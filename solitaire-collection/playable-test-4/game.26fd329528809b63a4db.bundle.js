(function(){var e={426:function(){HTMLCanvasElement.prototype.toBlob||Object.defineProperty(HTMLCanvasElement.prototype,"toBlob",{value:function(e,t,n){for(var i=atob(this.toDataURL(t,n).split(",")[1]),a=i.length,s=a>>2,r=new Uint8Array(a),o=new Uint32Array(r.buffer,0,s),c=0,h=0;c<s;c++)o[c]=i.charCodeAt(h++)|i.charCodeAt(h++)<<8|i.charCodeAt(h++)<<16|i.charCodeAt(h++)<<24;for(var u=3&a;u--;)r[h]=i.charCodeAt(h++);e(new Blob([r],{type:t||"image/png"}))}})},625:function(e,t,n){"use strict";n.d(t,{J:function(){return D},Z:function(){return M}});var i=n(615),a=n(27),s=n.n(a),r=n(2),o=n.n(r),c=n(10),h=n.n(c),u=n(0),l=n.n(u),d=n(627),p=n(183),f=n.n(p),g=function(e){return function(t){t.preventDefault();var n=document.getElementById("popup-add-shortcut");null==n||n.remove(),e()}},m=function(e){var t=document.createElement("div");return t.innerHTML=f()(e).call(e),t.firstChild},v=function(){var e=(0,i.Z)(l().mark((function e(t,n){var i,a,s;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=m('<div style="height: 50vh;width: 53vh;max-width: 95vw;position:absolute;background-color: rgba(31, 120, 136, 0.48);border-radius: 2vh;margin: auto;right: 0;left: 0;top: 0;bottom: 0;display: flex;flex-direction:column;justify-content:space-evenly;">\n            <p style="color:white;font-size:40px;text-align:center">Add shortcut for this game</p>\n            <p style="color:white;font-size:20px;text-align:center">This game wants to add a shortcut.</p>\n        </div>'),a=m('<button style="border: none;background-color: #1877f2;color: #fff;width: 90%;height: 50px;border-radius: 15px;margin-left: auto;margin-right: auto;font-size: 20px;cursor: pointer;">No</button>'),s=m('<button style="border: none;background-color: #1877f2;color: #fff;width: 90%;height: 50px;border-radius: 15px;margin-left: auto;margin-right: auto;font-size: 20px;cursor: pointer;">Yes</button>'),i&&a&&s||n({code:"CREATE_POPUP_ERROR",message:"Show popup failed"}),i.id="popup-add-shortcut",i.appendChild(a),i.appendChild(s),document.body.appendChild(i),a.addEventListener("click",g(n)),s.addEventListener("click",g(t));case 10:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),y=function(){function e(){this.isFirstCall=!0}var t=e.prototype;return t.canCreateShortcutAsync=function(){var e=(0,i.Z)(l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isFirstCall){e.next=3;break}return this.isFirstCall=!1,e.abrupt("return",!0);case 3:return e.abrupt("return",!1);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),t.createShortcutAsync=function(){var e=(0,i.Z)(l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new(o())((function(e,t){v(e,t)})));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),e}(),T=y,C=function(e){return function(t){t.preventDefault();var n=document.getElementById("popup-subscribe-bots");null==n||n.remove(),e()}},E=function(e){var t=document.createElement("div");return t.innerHTML=f()(e).call(e),t.firstChild},A=function(){var e=(0,i.Z)(l().mark((function e(t,n){var i,a,s;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=E('<div style="height: 50vh;width: 53vh;max-width: 95vw;position:absolute;background-color: rgba(31, 120, 136, 0.48);border-radius: 2vh;margin: auto;right: 0;left: 0;top: 0;bottom: 0;display: flex;flex-direction:column;justify-content:space-evenly;">\n            <p style="color:white;font-size:40px;text-align:center">Turn on messages from this game</p>\n            <p style="color:white;font-size:20px;text-align:center">This game wants to send messages, announcements and more.</p>\n        </div>'),a=E('<button style="border: none;background-color: #1877f2;color: #fff;width: 90%;height: 50px;border-radius: 15px;margin-left: auto;margin-right: auto;font-size: 20px;cursor: pointer;">Not Now</button>'),s=E('<button style="border: none;background-color: #1877f2;color: #fff;width: 90%;height: 50px;border-radius: 15px;margin-left: auto;margin-right: auto;font-size: 20px;cursor: pointer;">Turn On</button>'),i&&a&&s||n({code:"CREATE_POPUP_ERROR",message:"Show popup failed"}),i.id="popup-subscribe-bots",i.appendChild(a),i.appendChild(s),document.body.appendChild(i),a.addEventListener("click",C(n)),s.addEventListener("click",C(t));case 10:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),S=function(){function e(){this.isFirstCall=!0}var t=e.prototype;return t.canSubscribeBotAsync=function(){var e=(0,i.Z)(l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isFirstCall){e.next=3;break}return this.isFirstCall=!1,e.abrupt("return",!0);case 3:return e.abrupt("return",!1);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),t.subscribeBotAsync=function(){var e=(0,i.Z)(l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new(o())((function(e,t){A(e,t)})));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),e}(),b=S,I=n(630),w=n(626),P=n(628),k=n(632),_=GameCore.Configs,x=_.Notification,O=_.AddShortcut,L=_.SubscribeBot,R=x.GameTitle,D=(x.GameImage,function(){function e(){}var t=e.prototype;return t.createAsync=function(){var e=(0,i.Z)(l().mark((function e(t){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,GameSDK.tournament.createAsync(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t.shareAsync=function(){var e=(0,i.Z)(l().mark((function e(t){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,GameSDK.tournament.shareAsync(t);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t.joinAsync=function(){var e=(0,i.Z)(l().mark((function e(t){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,GameSDK.tournament.joinAsync(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t.postScoreAsync=function(){var e=(0,i.Z)(l().mark((function e(t){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,GameSDK.tournament.postScoreAsync(t);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t.getTournamentsAsync=function(){var e=(0,i.Z)(l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,GameSDK.tournament.getTournamentsAsync();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),e}()),B=function(){function e(e){var t=this;this.facebook=void 0,this.supportedAPIs=[],this.mockSubscribeBot=void 0,this.mockAddShortcut=void 0,this.isCalledSubscribeBot=!1,this.isCalledCreateShortcut=!1,this.isCanPlayerMatch=null,this.isCanSubscribeBot=null,this.isCanCreateShortcut=null,this.attemptToAddShortcut=(0,i.Z)(l().mark((function e(){var n,i,a,s,r,o;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.isCalledCreateShortcut){e.next=2;break}return e.abrupt("return",!1);case 2:if(e.prev=2,null===t.isCanCreateShortcut&&(O.UseMock?t.isCanCreateShortcut=!0:t.isCanCreateShortcut=t.isSupportedAPI("canCreateShortcutAsync")),t.isCanCreateShortcut){e.next=6;break}return e.abrupt("return",!1);case 6:return e.next=8,GameSDK.player.getDataAsync(["lastCallCreateShortcut"]);case 8:if(e.t0=e.sent,e.t0){e.next=11;break}e.t0={};case 11:if(n=e.t0,!(i=n.lastCallCreateShortcut||0)||!(0,w.Gm)(+i)){e.next=15;break}return e.abrupt("return",!1);case 15:if(!O.UseMock){e.next=21;break}return e.next=18,t.mockAddShortcut.canCreateShortcutAsync();case 18:e.t1=e.sent,e.next=24;break;case 21:return e.next=23,GameSDK.canCreateShortcutAsync();case 23:e.t1=e.sent;case 24:if(a=e.t1,s=Date.now(),GameSDK.player.setDataAsync({lastCallCreateShortcut:s}),!a){e.next=49;break}return r=d._.SHORTCUT_CREATE,o=d._.SHORTCUT_CREATE_POPUP,t.isCalledCreateShortcut=!0,window.game.analytics.event(o),e.prev=31,e.next=34,GameCore.Utils.Valid.isValueChangeAsync(window.__fbGameReady,!0);case 34:if(!O.UseMock){e.next=39;break}return e.next=37,t.mockAddShortcut.createShortcutAsync();case 37:e.next=41;break;case 39:return e.next=41,FBInstant.createShortcutAsync();case 41:return window.game.analytics.event(r,{success:!0}),e.abrupt("return",!0);case 45:return e.prev=45,e.t2=e.catch(31),window.game.analytics.event(r,{success:!1}),e.abrupt("return",!1);case 49:return e.abrupt("return",!1);case 52:return e.prev=52,e.t3=e.catch(2),e.abrupt("return",!1);case 55:case"end":return e.stop()}}),e,null,[[2,52],[31,45]])}))),this.attemptToSubscribeBot=(0,i.Z)(l().mark((function e(){var n,i,a,s,r;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.isCalledSubscribeBot){e.next=2;break}return e.abrupt("return",!1);case 2:if(e.prev=2,null===t.isCanSubscribeBot&&(L.UseMock?t.isCanSubscribeBot=!0:t.isCanSubscribeBot=t.isSupportedAPI("player.canSubscribeBotAsync")),t.isCanSubscribeBot){e.next=6;break}return e.abrupt("return",!1);case 6:if(!L.UseMock){e.next=12;break}return e.next=9,t.mockSubscribeBot.canSubscribeBotAsync();case 9:e.t0=e.sent,e.next=15;break;case 12:return e.next=14,GameSDK.player.canSubscribeBotAsync();case 14:e.t0=e.sent;case 15:if(!e.t0){e.next=49;break}return e.next=19,GameSDK.player.getDataAsync(["lastCallSubscribeBot"]);case 19:if(e.t1=e.sent,e.t1){e.next=22;break}e.t1={};case 22:if(n=e.t1,!(i=n.lastCallSubscribeBot)||!(0,w.Gm)(+i)){e.next=26;break}return e.abrupt("return",!1);case 26:return a=Date.now(),GameSDK.player.setDataAsync({lastCallSubscribeBot:a}),s=d._.BOT_SUBSCRIBE,r=d._.BOT_SUBSCRIBE_POPUP,t.isCalledSubscribeBot=!0,window.game.analytics.event(r),e.prev=31,e.next=34,GameCore.Utils.Valid.isValueChangeAsync(window.__fbGameReady,!0);case 34:if(!L.UseMock){e.next=39;break}return e.next=37,t.mockSubscribeBot.subscribeBotAsync();case 37:e.next=41;break;case 39:return e.next=41,GameSDK.player.subscribeBotAsync();case 41:return window.game.analytics.event(s,{success:!0}),e.abrupt("return",!0);case 45:return e.prev=45,e.t2=e.catch(31),window.game.analytics.event(s,{success:!1}),e.abrupt("return",!1);case 49:return e.abrupt("return",!1);case 52:return e.prev=52,e.t3=e.catch(2),e.abrupt("return",!1);case 55:case"end":return e.stop()}}),e,null,[[2,52],[31,45]])}))),this.matchPlayerAsync=function(){var e=(0,i.Z)(l().mark((function e(n,i,a){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,null===t.isCanPlayerMatch&&(t.isCanPlayerMatch=t.isSupportedAPI("checkCanPlayerMatchAsync")),t.isCanPlayerMatch){e.next=4;break}return e.abrupt("return",!1);case 4:return e.next=6,GameSDK.checkCanPlayerMatchAsync();case 6:if(e.sent){e.next=9;break}return e.abrupt("return",!1);case 9:return e.next=11,GameSDK.matchPlayerAsync(n,i,a);case 11:return e.abrupt("return",!0);case 14:return e.prev=14,e.t0=e.catch(0),e.abrupt("return",!1);case 17:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(t,n,i){return e.apply(this,arguments)}}(),this.getTournamentAsync=(0,i.Z)(l().mark((function e(){var n,i,a;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.facebook.tournament.getTournamentsAsync();case 2:if(n=e.sent,i=GameSDK.context.getID(),!(a=s()(n).call(n,(function(e){return e.getContextID()===i})))){e.next=7;break}return e.abrupt("return",o().resolve(a));case 7:return e.abrupt("return",o().reject(new P.Z(null)));case 8:case"end":return e.stop()}}),e)}))),this.requestTournamentAsync=function(){var e=(0,i.Z)(l().mark((function e(n){var i;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.facebook.getTournamentAsync();case 3:return e.next=5,t.facebook.tournament.shareAsync({score:n});case 5:e.next=12;break;case 7:return e.prev=7,e.t0=e.catch(0),i=GameSDK.player.getName(),e.next=12,t.facebook.tournament.createAsync({initialScore:n,config:{tournamentTitle:i+"'s Tournament"}});case 12:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),this.isSupportedAPI=function(e){var n;return 0===t.supportedAPIs.length&&(t.supportedAPIs=GameSDK.getSupportedAPIs()),h()(n=t.supportedAPIs).call(n,e)},this.facebook=e,this.mockSubscribeBot=new b,this.mockAddShortcut=new T}var t=e.prototype;return t.switchAsync=function(){var e=(0,i.Z)(l().mark((function e(t){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,GameCore.Utils.Valid.isValueChangeAsync(window.__fbGameReady,!0);case 2:return e.next=4,GameSDK.context.switchAsync(t);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t.chooseAsync=function(){var e=(0,i.Z)(l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,GameCore.Utils.Valid.isValueChangeAsync(window.__fbGameReady,!0);case 3:return e.next=5,GameSDK.context.chooseAsync({filters:["INCLUDE_EXISTING_CHALLENGES"],minSize:2,maxSize:2});case 5:case 15:return e.abrupt("return",GameSDK.context.getID());case 8:if(e.prev=8,e.t0=e.catch(0),!(e.t0 instanceof Object&&GameCore.Utils.Object.hasOwn(e.t0,"code"))){e.next=16;break}e.t1=e.t0.code,e.next="USER_INPUT"===e.t1?14:"SAME_CONTEXT"===e.t1?15:16;break;case 14:return e.abrupt("return",!1);case 16:return e.abrupt("return",null);case 17:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}(),t.createAsync=function(){var e=(0,i.Z)(l().mark((function e(t){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,GameCore.Utils.Valid.isValueChangeAsync(window.__fbGameReady,!0);case 3:return e.next=5,GameSDK.context.createAsync(""+t);case 5:case 15:return e.abrupt("return",GameSDK.context.getID());case 8:if(e.prev=8,e.t0=e.catch(0),!(e.t0 instanceof Object&&GameCore.Utils.Object.hasOwn(e.t0,"code"))){e.next=16;break}e.t1=e.t0.code,e.next="USER_INPUT"===e.t1?14:"SAME_CONTEXT"===e.t1?15:16;break;case 14:return e.abrupt("return",!1);case 16:return e.abrupt("return",null);case 17:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),t.getPlayerToken=function(){var e=(0,i.Z)(l().mark((function e(){var t;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,GameSDK.player.getSignedPlayerInfoAsync();case 2:return t=e.sent,e.abrupt("return",t.getSignature());case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),t.getContextPlayers=function(){var e=(0,i.Z)(l().mark((function e(t){var n,i;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,GameSDK.context.getPlayersAsync();case 3:return n=e.sent,i=[],n.forEach((function(e){var n=e.getID();if(n!==t){var a=e.getName();if(a){var s=e.getPhoto();i.push(new I.Z(n,a,s).toObject())}}})),e.abrupt("return",GameCore.Utils.Array.unique(i));case 9:return e.prev=9,e.t0=e.catch(0),e.abrupt("return",[]);case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}(),t.shareAsync=function(){var e=(0,i.Z)(l().mark((function e(t){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,GameSDK.shareAsync(t);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t.sendMessage=function(){var e=(0,i.Z)(l().mark((function e(t){var n,i,a,s,r,o;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.data,i=t.image,a=t.template,s=t.cta,r=t.text,o={data:n,image:i,action:"CUSTOM",template:a,cta:s,text:r,strategy:"IMMEDIATE",notification:"PUSH"},e.next=4,GameSDK.updateAsync(o);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t.inviteAsync=function(){var e=(0,i.Z)(l().mark((function e(t){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,GameSDK.inviteAsync(t);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t.postSessionScoreAsync=function(){var e=(0,i.Z)(l().mark((function e(t){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,GameSDK.postSessionScoreAsync(t);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t.getRewardedVideoAsync=function(){var e=(0,i.Z)(l().mark((function e(t){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,GameSDK.getRewardedVideoAsync(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t.getInterstitialAdAsync=function(){var e=(0,i.Z)(l().mark((function e(t){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,GameSDK.getInterstitialAdAsync(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t.getContextID=function(){return GameSDK.context.getID()},t.setLoadingProgress=function(e){GameSDK.setLoadingProgress(e)},t.getLocale=function(){return GameSDK.getLocale()||"en"},t.injectTournament=function(){var e=(0,i.Z)(l().mark((function e(){var t,i;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!GameCore.Configs.Tournament.UseMock){e.next=11;break}return e.next=4,n.e(302).then(n.bind(n,606));case 4:t=e.sent.default,i=new t,this.facebook.tournament=i,GameSDK.getTournamentAsync=this.getTournamentAsync,GameSDK.tournament=i,e.next=12;break;case 11:this.facebook.tournament=new D;case 12:this.facebook.getTournamentAsync=function(){return FBInstant.getTournamentAsync()},this.facebook.requestTournamentAsync=this.requestTournamentAsync;case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),t.sendNotificationAsync=function(){var e=(0,i.Z)(l().mark((function e(t){var n,i,a;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=t.message,i=t.delayTime,a=t.type,e.next=5,FBInstant.scheduleNotificationAsync({title:R,minDelayInSeconds:i,description:n,type:null!=a?a:k.Z.GENERIC_NOTIFICATION});case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),e}(),M=B},427:function(e,t,n){"use strict";var i=n(23),a=n.n(i),s=n(5),r=n.n(s),o=function(e,t){return void 0===t&&(t=1),a()({length:Math.ceil(e.length/t)},(function(n,i){return r()(e).call(e,i*t,i*t+t)}))},c=n(7),h=n.n(c),u=n(10),l=n.n(u),d=function(e,t){return h()(e).call(e,(function(e){return!l()(t).call(t,e)}))},p=function(e){for(var t=e.length-1;t>0;t--){var n=Math.floor(Math.random()*(t+1)),i=[e[n],e[t]];e[t]=i[0],e[n]=i[1]}},f=n(11),g=n.n(f),m=function(e,t,n){return g()(n).call(n,e)===t&&null!==e&&void 0!==e},v=function(e){return h()(e).call(e,m)},y={chunk:o,difference:d,shuffle:p,unique:v},T=n(32),C=n.n(T),E=n(264),A=n.n(E),S=A()((function(e,t){if("string"===typeof e){var n=t[e.toLowerCase()];if("string"===typeof n)return n}return"?"})),b=A()((function(e){for(var t=null,n=[],i=/:([A-Z0-9?]+)/gm;null!==(t=i.exec(e));)n.push(t[1]);return n})),I=A()((function(e){for(var t=null,n=[],i=/([0-9]+[A-Z?]{1}|[A-Z?]{1})/gm;null!==(t=i.exec(e));){var a=t[0];if(a.length>=2){var s,o=a.length,c=r()(a).call(a,0,o-1),h=a[o-1],u=C()(s=new Array(+c)).call(s,h);n.push.apply(n,u)}else n.push(a)}return n})),w=function(e,t){var n=e,i=GameCore.Utils.Object.invert(t),a={},s=0,r=0;return b(n).forEach((function(e){s=0,r++,a[r]||(a[r]={}),I(e).forEach((function(e){s++,a[r][s]=S(e,i)}))})),a},P=A()((function(e,t){var n=t[e];return"string"===typeof n?""+n.toUpperCase():"?"})),k=function e(t,n,i){void 0===i&&(i=!1);var a="";if(!GameCore.Utils.Valid.isObject(t))return a;var s="",o=1;for(var c in t)if(GameCore.Utils.Object.hasOwn(t,c)){var h=t[c];if(GameCore.Utils.Valid.isObject(h))a+=":"+e(h,n,!0);else if(GameCore.Utils.Valid.isString(h)){var u=P(h,n);u===s?(o++,a=r()(a).call(a,0,-2)):o=1,a+=""+o+u,s=u}}return a=a.replace(/1([A-Z])/g,"$1")},_=function(e){try{return atob(e)}catch(t){return""}},x=function(e){try{return btoa(e)}catch(t){return""}},O=function(){var e={},t=0;e["="]=t++,e["["]=t++,e["]"]=t++,e[","]=t++,e['"']=t++,e[":"]=t++,e["{"]=t++,e["}"]=t++;for(var n=48;n<=57;n++)e[String.fromCharCode(n)]=t++;e['suits":["']=t++,e.clubs=t++,e.diamonds=t++,e.hearts=t++,e.spades=t++,e.id=t++,e['piles":']=t++,e['type":"prebuilt"']=t++,e['type":"dynamic"']=t++,e['difficulty":"random"']=t++,e['difficulty":"easy"']=t++,e['difficulty":"medium"']=t++,e['difficulty":"hard"']=t++,e['mainMissions":{']=t++,e.win=t++;for(var i=1;i<=8;i++)e["finish"+i+"Run"]=t++;for(var a=1;a<=9;a++)e["clear"+a+"Column"]=t++;e['foundations":']=t++,e['startingCards":']=t++,e['startingLayout":"']=t++,e['difficulty":"dynamic"']=t++,e['type":"journey"']=t++,e['journeyData":{']=t++,e['stock":"']=t++,e['pileData":{']=t++;for(var s=0;s<=9;s++)e["pile"+s+'":"']=t++;e.NoStock=t++,e['info":']=t++,e['extra":{']=t++,e['move":']=t++,e['time":']=t++,e['foundationData":{']=t++;for(var r=0;r<=9;r++)e["foundation"+r+'":"']=t++;return e['min":']=t++,e['max":']=t++,e}(),L=function(){for(var e={},t=5,n=["c","d","h","s"],i=1;i<=13;i++)for(var a=0;a<4;a++)e[""+i+n[a]]=t++,e[","+i+n[a]]=t++;for(var s=1;s<=13;s++)for(var r=0;r<4;r++)e["-"+s+n[r]]=t++,e[",-"+s+n[r]]=t++;return e}(),R=function(){var e=[];e.push('startingLayout":"'),e.push('stock":"');for(var t=0;t<=9;t++)e.push("pile"+t+'":"');for(var n=0;n<=9;n++)e.push("foundation"+n+'":"');return e}(),D=function(e){for(var t=!1,n="",i=[],a=0;a<e.length;a++){var s=e[a],r=n+s;'"'===s&&t&&(t=!1);var o=t?L:O;o[r]?(i.push(o[r]),l()(R).call(R,r)&&(t=!0),n=""):n=r}return i},B=n(42),M=n.n(B),N=n(22),G=n.n(N),F=function(e){var t;return M()(t=G()(e)).call(t,(function(t,n){return t[e[n]]=n,t}),{})},Z=F(L),U=F(O),z=function(e){for(var t=U,n=Z,i=!1,a="",s=0;s<e.length;s++){var r=e[s];4===e[s]&&i&&(i=!1);var o=i?n:t;if(!o[r])break;a+=o[r],l()(R).call(R,o[r])&&(i=!0)}return a},H=n(3),W=n.n(H),Y={decodeMap:w,encodeMap:k,hashToString:_,stringToHash:x,lzwCompress:D,lzwDecompress:z,encodeLZWCompress:function(e){return W()(e).call(e,(function(e){return String.fromCharCode(e+48)})).join("")},decodeLZWCompress:function(e){for(var t=[],n=0;n<e.length;n++)t.push(e.charCodeAt(n)-48);return t}},K=function(e){try{return JSON.parse(e)}catch(t){return null}},V=n(33),j=n.n(V),J=function(e){try{return j()(e,null,0)}catch(t){return""}},X=function(e){return K(J(e))},q={clone:X,decode:K,encode:J},Q=function(e){var t="object"===typeof e||"function"===typeof e,n=Array.isArray(e);return null!==e&&t&&!n},$=function(e){return void 0===e||null===e},ee=function e(t){if(!Q(t))return t;for(var n in t){$(t[n])&&delete t[n];var i=t[n];Q(i)&&(t[n]=e(i))}return t},te=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},ne=function(e){var t={};return G()(e).forEach((function(n){if(te(e,n)){var i=e[n];"string"===typeof i&&(t[i]=n)}})),t},ie=function(e,t){if(!Array.isArray(e))return{};var n={};return e.forEach((function(e){if(te(e,t)){var i=e[t];"string"===typeof i&&(n[i]=e)}})),n},ae={clear:ee,hasOwn:te,invert:ne,keyBy:ie},se=function(e){return e?e[0].toUpperCase()+r()(e).call(e,1):e},re=function(e){var t=0;if(0==e.length)return t;for(var n=0;n<e.length;n++){t=(t<<5)-t+e.charCodeAt(n),t&=t}return t},oe=function(e){var t;return M()(t=G()(e)).call(t,(function(t,n){var i=e[n];return void 0!==i&&t.push(n+"="+i),t}),[]).join("&")},ce=function(e){void 0===e&&(e="0x");for(var t=e,n=0;n<6;n++)t+="0123456789ABCDEF"[Math.floor(16*Math.random())];return t},he=n(613),ue=function(e){return e.normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/[\u0111\u0110]/g,(function(e){return"\u0111"===e?"d":"D"}))},le=n(4),de=n.n(le),pe=n(451),fe=n.n(pe),ge=function(e,t){var n,i=e.split(" "),a=(i.length<=1?de()(n=[]).call(n,i):[i[0],i.pop()]).join(" "),s=fe()(a).call(a," ")||0,r=s>=0?s:t;return(a.length>t?a.substring(0,r):a).substring(0,t)},me=n(213),ve=n.n(me),ye=function(e){void 0===e&&(e=16);var t=function(t){return Math.floor(t).toString(e)};return t(Date.now()/1e3)+ve()(" ").call(" ",e).replace(/./g,(function(){return t(Math.random()*e)}))},Te=n(614);var Ce=function(e){for(var t=0,n=0;n<e.length;n++){t=(t<<5)-t+e.charCodeAt(n),t|=0}return t=Math.abs(t)},Ee=["James","Mary","John","Patricia","Robert","Jennifer","Michael","Linda","William","Elizabeth","David","Susan","Richard","Jessica","Joseph","Sarah","Thomas","Karen","Charles","Nancy","Christopher","Lisa","Daniel","Margaret","Matthew","Betty","Anthony","Sandra","Mark","Ashley","Donald","Dorothy","Steven","Kimberly","Paul","Emily","Andrew","Donna","Joshua","Michelle","Kenneth","Carol","Kevin","Amanda","Brian","Melissa","George","Deborah"],Ae=["Smith","Johnson","Williams","Jones","Brown","Davis","Miller","Wilson","Moore","Taylor","Anderson","Thomas","Jackson","White","Harris","Martin","Thompson","Garcia","Martinez","Robinson","Clark","Rodriguez","Lewis","Lee","Walker","Hall","Allen","Young","Hernandez","King","Wright","Lopez","Hill","Scott","Green","Adams","Baker","Gonzalez","Nelson","Carter","Mitchell","Perez","Roberts","Turner","Phillips","Campbell","Parker","Evans"],Se=function(e){var t=Ce(e),n=t%Ee.length,i=(t>>8)%Ae.length,a=(t>>16)%1e4;return""+Ee[n]+Ae[i]+a},be={capitalize:se,hashCode:re,params:oe,toCamelCase:function(e){var t=e.replace(/[-_\s.]+(.)?/g,(function(e,t){return t?t.toUpperCase():""}));return t.substr(0,1).toLowerCase()+t.substr(1)},toUpperCamelCase:function(e){var t=e.replace(/[-_\s.]+(.)?/g,(function(e,t){return t?t.toUpperCase():""}));return t.substr(0,1).toUpperCase()+t.substr(1)},randomColor:ce,random:he.Z,removeDiacritics:ue,getShortName:ge,generateObjectId:ye,replaceVariables:Te.Z,generateNameUsingString:Se},Ie=function(e){return"boolean"===typeof e},we=function(){var e=GameCore.Configs.Debugger.ListPlayerDevIds,t=void 0===e?[]:e,n="";try{n=FBInstant.player.getID()}catch(i){}if(n&&l()(t).call(t,n))return!0;return!1},Pe=function(e){return"function"===typeof e},ke=function(e){return"number"===typeof e},_e=function(e){var t;return g()(t=["string","number","symbol"]).call(t,typeof e)>-1},xe=function(e){return"string"===typeof e},Oe=n(2),Le=n.n(Oe),Re=function(e,t,n){var i=n||{},a=i.timeout,s=void 0===a?1e3:a,r=i.checkInterval,o=void 0===r?100:r;return new(Le())((function(n){var i=setInterval((function(){("function"===typeof e?e():e)===("function"===typeof t?t():t)&&(clearInterval(i),n(!0))}),o);s>0&&setTimeout((function(){clearInterval(i),n(!1)}),s)}))},De={isBoolean:Ie,isDebugger:we,isFunction:Pe,isNumber:ke,isObject:Q,isPropertyKey:_e,isString:xe,isValueChangeAsync:Re},Be=function(e){var t=e.scene,n=e.key,i=e.newKey,a=t.textures.get(n).getSourceImage();if(!a)return!1;var s=Math.min(a.width,a.height);i||t.textures.removeKey(n);var r=t.textures.createCanvas(i||n,s,s);r.setFilter(Phaser.Textures.FilterMode.LINEAR);var o=r.context;return o.beginPath(),o.arc(s/2,s/2,s/2,0,2*Math.PI,!1),o.clip(),r.draw((a.width-s)/2,(a.height-s)/2,a),!0},Me=function(e){var t=e.scene,n=e.key,i=e.newKey,a=e.radius,s=e.width,r=e.height,o=t.textures.get(n).getSourceImage();if(!o)return!1;s||(s=o.width),r||(r=o.height),i||t.textures.removeKey(n);var c=t.textures.createCanvas(i||n,s,r);c.setFilter(Phaser.Textures.FilterMode.LINEAR);var h=c.context,u=Math.min(s,r)/100*a/2;return h.beginPath(),h.moveTo(0+u,0),h.lineTo(0+s-u,0),h.quadraticCurveTo(0+s,0,0+s,0+u),h.lineTo(0+s,0+r-u),h.quadraticCurveTo(0+s,0+r,0+s-u,0+r),h.lineTo(0+u,0+r),h.quadraticCurveTo(0,0+r,0,0+r-u),h.lineTo(0,0+u),h.quadraticCurveTo(0,0,0+u,0),h.closePath(),h.clip(),c.draw(0,0,o),!0},Ne=function(){if(GameCore.Utils.Device.isDesktop())return 2;var e=GameCore.Utils.Device.pixelRatio();return e=e>2.44?2.88:e>2?2:Math.round(e)},Ge=function(e,t){var n=e.split(","),i=n[0].match(/:(.*?);/);if(!i)return null;for(var a=i[1],s=atob(n[n.length-1]),r=s.length,o=new Uint8Array(r);r--;)o[r]=s.charCodeAt(r);return new File([o],t,{type:a})},Fe=n(165),Ze=n.n(Fe),Ue=new Image,ze=function(e,t){return void 0===t&&(t=!0),new(Le())((function(n){t&&(Ue=new Image),Ue.onload=function(){n(Ue)},Ue.onerror=function(){n(null)},Ue.src=Ze().createObjectURL(e)}))},He=n(615),We=n(0),Ye=n.n(We),Ke=function(){var e=(0,He.Z)(Ye().mark((function e(t,n){var i;return Ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t).then((function(e){return e.blob()})).catch((function(){return null}));case 2:if(i=e.sent){e.next=5;break}return e.abrupt("return",null);case 5:return e.abrupt("return",new File([i],n));case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),Ve=function(e){if(g()(e).call(e,".")<0)return e;for(var t=e.length-1;t>=0;t--){if("."==e[t])return e.substring(0,t);if("0"!=e[t])return e.substring(0,t+1)}return e},je=function(e,t){var n=t||{},i=n.fractionalDigits,a=void 0===i?0:i,s=n.startAbbreviate,r=void 0===s?1e3:s,o=n.abbreviateStep,c=void 0===o?3:o,h=n.maxLength,u=void 0===h?-1:h,l=n.removeLastZero,d=void 0===l||l,p=n.suffixes,f=void 0===p?["","k","m","b","t","q"]:p,g=-1===u?99999999:u;if(e>=r){var m=Math.floor(e/Math.pow(10,c)),v=Math.floor((m.toString().length-1)/c)+1,y=(e/Math.pow(Math.pow(10,c),v)).toFixed(a),T=g-f[v].length,C=y.substring(0,T);return(d?Ve(C):C)+f[v]}var E=e.toFixed(a),A=g-f[0].length,S=E.substring(0,A);return d?Ve(S):S+f[0]},Je={Array:y,Hash:Y,Json:q,Object:ae,String:be,Valid:De,Image:{drawCircle:Be,drawBorder:Me,getImageScale:Ne,base64ToFile:Ge,blobToHtmlImage:ze,blobUrlToFile:Ke},Number:{toAbbreviatedString:je,padStart:function(e,t,n){void 0===n&&(n="0");for(var i=e.toString(),a=i.length,s=0;s<t-a;s++)i=n+i;return i},padEnd:function(e,t,n){void 0===n&&(n="0");for(var i=e.toString(),a=i.length,s=0;s<t-a;s++)i+=n;return i},random:function(e,t){var n=t?Math.random()>.5?1:-1:1;return Math.floor(Math.random()*e)*n}},Device:{isDesktop:function(){return!/Android|iPhone|iPad|iPod/i.test(navigator.userAgent)},isMobile:function(){return/Android|iPhone|iPad|iPod/i.test(navigator.userAgent)},isAndroid:function(){return window.__fbPlatform?"ANDROID"===window.__fbPlatform:/Android/i.test(navigator.userAgent)},isIOS:function(){return window.__fbPlatform?"IOS"===window.__fbPlatform:/iPhone|iPad|iPod/i.test(navigator.userAgent)},isMobileWeb:function(){return window.__fbPlatform?"MOBILE_WEB"===window.__fbPlatform:/mobile/i.test(navigator.userAgent)},pixelRatio:function(){return window.devicePixelRatio||1}},Time:{isToday:function(e){var t=new Date(e),n=new Date;return t.getDate()===n.getDate()&&t.getMonth()===n.getMonth()&&t.getFullYear()===n.getFullYear()},sleepAsync:function(e){return new(Le())((function(t){return setTimeout(t,e)}))}}},Xe=n(612),qe=n(611),Qe={ENV:"production",ApiHost:"https://fbig-singleplay-apps.citigo.site",OtherHost:"https://fbig-leaderboards.citigo.site",AppId:"9n0t94c2f10w",Notification:{Enable:!0},LeadersBoard:{Prefix:"leaderboards"},Debugger:{ShowConsole:!1,ShowInspector:!1,ShowMonitoring:!1},Statistics:{Enable:!1,ShowFPSInGame:!1,ShowMemoryInGame:!1},Rollbar:{Enable:!1},Analytics:{GameAnalytics:null}},$e={ENV:"production",ApiHost:"https://fbig-singleplay-apps.citigo.site",OtherHost:"https://fbig-leaderboards.citigo.site",AppId:"9n0t94c2f10w",Notification:{Enable:!0},LeadersBoard:{Prefix:"leaderboards"},Debugger:{ShowConsole:!1,ShowInspector:!1,ShowMonitoring:!1},Statistics:{Enable:!1,ShowFPSInGame:!1,ShowMemoryInGame:!1},Rollbar:{Enable:!1},Analytics:{GameAnalytics:null}},et={ENV:"development",AppId:"",ApiHost:"https://fbig-singleplay-apps-dev.sunstudio.io",OtherHost:"https://leaderboards-dev.sunstudio.io",SyncProfileFromAPI:!0,Notification:{Enable:!0,DisableSendNotification:!1,ApiUrl:"https://notifications.sunstudio.io",GameTitle:"Solitaire Collection - Classic Solitaire",GameImage:"https://sunstudio.io/images/logo.png",DailyNotificationMessages:{MONDAY:"Welcome back to Solitaire Collection! Start your week with a surprise and claim your daily reward across Klondike, FreeCell, or Spider Solitaire! \ud83c\udf1f",TUESDAY:"Your next Solitaire adventure awaits! Choose between Klondike, FreeCell, or Spider, and dive back into the challenge! \ud83d\ude80",WEDNESDAY:"A mystery gift has appeared! Log in today to claim your exclusive reward in any of the Solitaire games. \ud83c\udf81",THURSDAY:"Can you master today\u2019s challenge? Play Klondike, FreeCell, or Spider and earn special rewards for your skills! \ud83c\udfaf",FRIDAY:"Feeling lucky? Spin the daily wheel for your chance to win big rewards in Solitaire Collection! \ud83c\udfa1",SATURDAY:"A special event is live today! Join the fun across Klondike, FreeCell, and Spider Solitaire to unlock exclusive content. \u2728",SUNDAY:"We\u2019d love to hear from you! Log in, share your feedback on Klondike, FreeCell, or Spider, and get a reward for helping us improve Solitaire Collection! \ud83c\udf08"}},AddShortcut:{UseMock:!1},SubscribeBot:{UseMock:!1},PlayerMock:{id:"",signature:""},OpponentMock:{id:"",signature:""},MatchMockFailRate:5,Gameplay:{StartLevel:1,StartScore:0,StartDiamonds:0,DefaultDiamondsForNewUser:300,LevelDifficultRate:{FromUnder30:1.07,FromUnder35:1.05,FromUnder45:1.05,FromUnder200:1.1},StartAdAtLevel:2,GiftTime:10800,AwardDiamonds:100,FreeItems:!1,DelayStart:2e3,DelayLevelUp:1800,DelayFinishGame:2900,EnableVibrate:!0,ItemCount:{Enable:!1,ForceResetDaily:!1,UndoCount:5,UndoClaim:5,HintCount:5,HintClaim:5},EditMode:!1,SkipStartAnimation:!1,NewUserEasyGameCount:0,SmartClick:!1,SwitchFriend:!0},Tutorial:{ForceUseTutorial:!1,NumberOfTutorial:{FirstMove:3,TargetScore:1,CurrentScore:1,ColorfulGem:1,ItemPaint:1,ItemHammer:1,ItemShuffle:1}},PlayerDataStore:"playerData",Game:{AutoResize:!0,PortraitRatio:375/580,PortraitWidth:375,PortraitHeight:667,LandscapeRatio:1150/970,LandscapeWidth:1343520/700,LandscapeHeight:540,ForcePixelRatio:0,DisableLandscape:!1,FullSizeOnLandscape:!1},LevelScroller:{limitLevelButtonInContainer:6},Debugger:{ShowInspector:!1,ShowMonitoring:!1,ShowConsole:!1,Expanded:!0,AutoRefresh:!0,InspectorAutoUpdate:!0,ShowBoxBitmapText:!1,Opacity:.8,ListPlayerDevIds:[]},FastDebug:{DisableLazyLoad:!1,ShowScreenOnStart:void 0},Statistics:{Enable:!1,DisplayMode:0,FPS:!0,MS:!0,MB:!0,Opacity:.8,ShowFPSInGame:!0,ShowMemoryInGame:!1},ParticleEditor:{Enable:!1,Opacity:.8,Expanded:!0},ProfilerPlugin:{Enable:!1},CanvasRecorder:{Enable:!1,Options:{Type:"png",Quality:.85,RecordFps:60,SyncFps:!0}},Match:{MaxRescueCount:1,RescueGamePopupTimeout:15,ContinueSingleMatchEnabled:!1,SingleMatchStore:"singleMatch",LocalSingleMatchDefault:{_id:"12345678890",status:"open",playerId:"",score:0,level:1,startedAt:0,updateAt:0,finishAt:0,data:{}}},DailyRewards:{MaxDays:6,MockTime:0,CheckInterrupt:!0},DailyTasks:{Duration:86400},Tournament:{UseMock:!1,ForcePlay:!1,UseLeaderboard:!0,TournamentContextIds:[],YourMockTournamentCount:1},LeadersBoard:{Name:null,UseMock:!1,Prefix:"leaderboards",LeaderboardId:"5fbb6bee3f2485dac9b1dfa3",Limit:50,MockOptions:{PlayerEntryIndex:-1}},LanguageSupport:{en:"en"},EnableEffectSceneTransition:!0,DefaultTheme:"default",ThemeSupport:{default:"default"},Ads:{Enabled:!0,AdService:"msgames",FallbackService:"google",AdServiceConfigs:{Google:{DataAdClient:"ca-pub-2993382360222769",DataAdFrequencyHint:30,DataAdBreakTest:!1,DataAdChannel:"5804212866",MaxScriptLoadRetryCount:3}},CalculateSafeAreaBottom:!0,EnableRewardVideoResetInterstitial:!1,Mockup:{Enable:!1,ErrorRate:5,GiphyApiKey:""},InterstitialAdOptions:{pID:"",showWhenStartGame:!1,secondsFirstTime:30,secondsBetweenAds:30,breakAdsConfig:{showOnFirstFoundationSession:!0,showOnFirstFoundationNewMatch:!0,secondsBetweenBreakAds:180}},RewardAdOptions:{pID:"",secondsFirstTime:0,secondsBetweenAds:0},BannerAdOptions:[{placementId:"123",position:"bottom",bannerWidth:320,bannerHeight:50,platform:"MOBILE",secondsReload:60},{placementId:"456",position:"right",bannerWidth:160,bannerHeight:600,platform:"DESKTOP",secondsReload:60}]},Network:{MaximumRequest:6,Timeout:15e3,Retries:3},Analytics:{GameAnalytics:{consoleLog:!1,CustomDesignEvents:["level_start","level_end"],CustomDimensions:["ad_id","ad_type","adset_id","boosters","build","button_name","campaign_id","game_mode","invite_content_type","level","level_name","luck_reward","message_content_type","move","screen_name","share_content_type","step","success","value"],CustomMetrics:["add_cards_count_by_ad","add_cards_count_by_coin","average_combo_count","click_on_unmatched_card_count","coins","missed_playable_count","moves","remaining_pile_count","remaining_stock_count","streak_count","time_played","undo_count","wild_card_used_count"]},GoogleAnalytics:{consoleLog:!1},FacebookAnalytics:{prefix:"fba",consoleLog:!1}},Sentry:{errorCodes:{accepted:[],ignored:["USER_INPUT","NETWORK_FAILURE"]},errorMessages:{accepted:[],ignored:["Load image failed","Script error."]}},Rollbar:{Enable:!1,UseMockup:!1,FilterError:{Codes:{accepted:[],ignored:["USER_INPUT","NETWORK_FAILURE"]},Messages:{accepted:[],ignored:["Load image failed","Request failed to be processed","Script error."]}}},Performance:{Enable:!1,trackingSceneKeys:["DASHBOARD_SCENE","GAME_SCENE"],minQuality:1,maxQuality:2,fpsThreshold:48,checkInterval:2e3,qualityAdjustStep:.1,autoUpgradeQuality:!0,onlyUpdateWhenSwitchScene:!0}};et=(0,qe.TS)((0,Xe.Z)({},et),$e);var tt=et=(0,qe.TS)((0,Xe.Z)({},et),Qe),nt=function(e){return function(t){try{var n=window.game,i=t.module;if(n.scene.getScenes(!0)[0].scene.key!==e)return;var a=i.default;n.scene.remove(e),n.scene.add(e,a,!0),n.scene.bringToTop(n.globalScene)}catch(r){var s;null==(s=void 0)||s.invalidate()}}},it=n(520),at=n.n(it),st=n(522),rt=n.n(st),ot=n(524),ct=n.n(ot),ht=n(616),ut=!1,lt=function e(t,n,i){n.forEach((function(n){if(n.name){var a=null;if(a=i?i.getByName(n.name):t.children.getByName(n.name)){if("Container"===n.type){var s=a,r=n.getAll();if(e(t,r,s),!s.hotContainer)return}var o=at()(n),c=["_events","_sysEvents","input","localTransform","list","displayList"],u=h()(o).call(o,(function(e){if("string"!==typeof e)return!1;if(g()(c).call(c,e)>=0)return!1;if(!a)return!1;var t=rt()(n,e);return!(t instanceof Function)&&(!(t instanceof Phaser.Scene)&&(!(t instanceof Phaser.GameObjects.Group)&&(!(t instanceof Phaser.GameObjects.GameObject)&&t===rt()(a,e))))}));u.length<1||u.forEach((function(e){if(a){var t=rt()(n,e);rt()(a,e),ct()(a,e,t)}}))}}}))},dt={Scene:nt,SceneObjects:function(e,t){return void 0===t&&(t=ut),function(n){try{var i=window.game,a=n.module,s=i.scene.getScenes(!0)[0];if(s.scene.key!==e)return;ut=t;var r=a.default,o=e+"-draft";i.scene.remove(o);var c=i.scene.add(o,r);s=i.scene.getScene(e),c.events.once(Phaser.Scenes.Events.RENDER,(0,ht.D)((function(){var e=c.children.getAll();lt(s,e),i.scene.remove(o)})),50),i.scene.run(o),i.scene.bringToTop(s),i.scene.bringToTop(i.globalScene)}catch(h){}}}},pt=n(60),ft=function(){function e(){var e=this;this.events=void 0,this.previousLayout=void 0,this.resizeEventData=void 0,this.portraitRatio=void 0,this.portraitWidth=void 0,this.portraitHeight=void 0,this.landscapeRatio=void 0,this.landscapeWidth=void 0,this.landscapeHeight=void 0,this.worldWidth=void 0,this.worldHeight=void 0,this.worldRatio=void 0,this.autoResize=void 0,this.disableLandscape=void 0,this.fullSizeOnLandscape=void 0,this.currentLayout=void 0,this.forcePixelRatio=void 0,this.handleResize=(0,pt.debounce)((function(){e.previousLayout=""+e.currentLayout,e.initWorldSize(),e.resize()}),300)}var t=e.prototype;return t.configure=function(e){var t=e.autoResize,n=e.portraitRatio,i=e.portraitWidth,a=e.portraitHeight,s=e.landscapeWidth,r=e.landscapeHeight,o=e.landscapeRatio,c=e.disableLandscape,h=e.fullSizeOnLandscape;this.autoResize=t,this.disableLandscape=c,this.fullSizeOnLandscape=h,this.portraitRatio=n,this.portraitWidth=i,this.portraitHeight=a,this.landscapeRatio=o,this.landscapeWidth=s,this.landscapeHeight=r,this.initWorldSize(),this.addEventResize()},t.resize=function(e){},t.getResizeEventData=function(){return this.resizeEventData},t.resizeCanvas=function(e,t){},t.getWorldSize=function(){return{width:this.worldWidth,height:this.worldHeight}},t.initWorldSize=function(){if(this.worldWidth=this.portraitWidth,this.worldHeight=this.portraitHeight,this.isScreenSmallerRatio(this.portraitRatio))this.worldHeight=this.worldWidth/this.getScreenRatio();else if(!this.disableLandscape&&!this.isScreenSmallerRatio(this.landscapeRatio)){var e=this.getScreenWidth(),t=this.getScreenHeight();if(this.landscapeRatio=Math.max(Math.min(e/(t-0),2.111111111111111),1.22),this.worldHeight=this.landscapeHeight,this.worldWidth=this.worldHeight*this.landscapeRatio,this.fullSizeOnLandscape){this.worldRatio=this.worldWidth/this.worldHeight,this.landscapeRatio=this.getScreenRatio();var n=this.getCanvasSizeFixedRatio(this.landscapeRatio),i=n.width,a=n.height,s=this.getZoomRatio();this.worldWidth=i/s,this.worldHeight=a/s}}this.worldRatio=this.worldWidth/this.worldHeight},t.getZoomRatio=function(){var e=this.getWorldSize().width;return this.getCanvasSizeFixedRatio(this.worldRatio).width/e},t.getPixelRatio=function(){if(this.forcePixelRatio>0)return this.forcePixelRatio;if(GameCore.Utils.Device.isDesktop())return 2;var e=GameCore.Utils.Device.pixelRatio();return e=e>2.44?2.88:e>2?2:Math.round(e)},t.getPixelRatioForCanvas=function(){var e=GameCore.Utils.Device.pixelRatio();if(this.forcePixelRatio>0&&(e=this.forcePixelRatio),GameCore.Utils.Device.isDesktop())return Math.min(2,1200/(this.getScreenHeight()-0));var t=Math.max(1,e),n=1080/this.getScreenWidth();return t>2&&(t=Math.min(Math.round(2*t)/2,n)),t},t.getPhysicPixels=function(e,t){return e*t},t.getCanvasSizeFixedRatio=function(e){var t=this.getPixelRatioForCanvas(),n=this.getScreenWidth()*t,i=this.getScreenHeight()*t;return this.isLandscape()&&(i=(this.getScreenHeight()-0)*t),this.isScreenSmallerRatio(e)?i=n/e:n=i*e,{width:n,height:i}},t.getScreenRatio=function(){return this.getScreenWidth()/this.getScreenHeight()},t.getScreenHeight=function(){var e=document,t=e.body,n=e.documentElement,i=t.clientHeight,a=n.clientHeight;return Math.max(a,i)||0},t.getScreenWidth=function(){var e=document,t=e.body,n=e.documentElement,i=t.clientWidth,a=n.clientWidth;return Math.max(a,i)||0},t.isScreenSmallerRatio=function(e){var t=this.getScreenWidth(),n=this.getScreenHeight();return GameCore.Utils.Device.isDesktop()?t/(n-0)<e:t/n<e},t.addEventResize=function(){this.autoResize&&window.addEventListener("resize",this.handleResize)},t.isLandscape=function(){return!this.disableLandscape&&this.worldRatio>this.portraitRatio},e}(),gt=ft,mt={Configs:tt,Utils:Je,LiveUpdate:dt};window.GameCore=mt,window.GameCore.world=function(){var e=tt.Game,t=e.AutoResize,n=e.PortraitRatio,i=e.PortraitWidth,a=e.PortraitHeight,s=e.LandscapeRatio,r=e.LandscapeWidth,o=e.LandscapeHeight,c=t,h=e.DisableLandscape,u=e.FullSizeOnLandscape,l=n,d=i,p=a,f=s,g=r,m=o,v=new gt;return v.configure({autoResize:c,portraitRatio:l,portraitWidth:d,portraitHeight:p,landscapeRatio:f,landscapeWidth:g,landscapeHeight:m,disableLandscape:h,fullSizeOnLandscape:u}),v}();if(!Je.Valid.isDebugger()){var vt=function(){};console.log=vt,console.warn=vt,console.info=vt,console.error=vt,console.debug=vt,console.trace=vt,console.table=vt}},593:function(e,t,n){"use strict";n.r(t);var i=n(615),a=n(618),s=n(10),r=n.n(s),o=n(81),c=n.n(o),h=n(0),u=n.n(h),l=n(627),d=n(654),p=GameCore.Utils.Object,f=GameCore.Ads,g=f.Types,m=f.Status,v="msgames",y=function(e){function t(t,n){var i;return(i=e.call(this,t)||this).instance=void 0,i.placementId=void 0,i.instanceLoadFailedQueue=void 0,i.isHasTooManyInstancesError=void 0,i.instance=null,i.placementId=n,i.instanceLoadFailedQueue=[],i.isHasTooManyInstancesError=!1,i}(0,a.Z)(t,e),t.setGame=function(e){self.game=e};var n=t.prototype;return n.loadAsync=function(){var e=(0,i.Z)(u().mark((function e(){var t,n,i;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.status===m.IDLE){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,this.status=m.LOADING,e.next=6,this.createInstanceByType(this.type);case 6:if(this.instance=e.sent,null!==this.instance){e.next=9;break}throw new GameCore.Ads.AdError("AD_INSTANCE_NOT_INITIATED","Ad instance didn't initiated.");case 9:return e.next=11,this.instance.loadAsync();case 11:this.status=m.FILLED,t=this.getSceneName(),this.type===g.PRE_ROLL&&self.game.analytics.loadPreRollAd(t,v),this.type===g.INTERSTITIAL&&self.game.analytics.loadInterstitialAd(t,v),this.type===g.REWARDED&&self.game.analytics.loadRewardedVideoAd(t,v),e.next=25;break;case 18:throw e.prev=18,e.t0=e.catch(2),this.status=m.IDLE,this.instance&&this.instanceLoadFailedQueue.push(this.instance),this.instance=null,this.isAdTypeValid(this.type)&&(n=this.getSceneName(),i={type:this.type,placement:n,adService:v},self.game.analytics.loadAdFail(i)),e.t0;case 25:case"end":return e.stop()}}),e,this,[[2,18]])})));return function(){return e.apply(this,arguments)}}(),n.showAsync=function(){var e=(0,i.Z)(u().mark((function e(){var t,n,i,a;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=!1,null,e.prev=2,this.status===m.FILLED){e.next=5;break}throw new GameCore.Ads.AdError("AD_NOT_FILLED","Ads no fill.");case 5:if(this.status=m.SHOWING,null!==this.instance){e.next=8;break}throw new GameCore.Ads.AdError("AD_INSTANCE_NOT_INITIATED","Ad instance didn't initiated.");case 8:return this.isHasTooManyInstancesError&&self.game.analytics.event(l._.MISSING_AD_SHOW,{ad_type:this.type}),e.next=11,this.instance.showAsync();case 11:t=!0,this.status=m.IDLE,this.instance=null,e.next=21;break;case 16:throw e.prev=16,e.t0=e.catch(2),e.t0 instanceof Object&&p.hasOwn(e.t0,"code")?("ADS_NOT_LOADED"===e.t0.code?this.status=m.FILLED:(this.status=m.IDLE,this.instance=null),"USER_INPUT"===e.t0.code&&(this.status=m.IDLE,this.instance=null,t=!0)):(this.status=m.IDLE,this.instance=null),e.t0,e.t0;case 21:return e.prev=21,window.focus(),n=this.getSceneName(),t?(this.type===g.PRE_ROLL&&self.game.analytics.showPreRollAd(n,v),this.type===g.INTERSTITIAL&&self.game.analytics.showInterstitialAd(n,v),this.type===g.REWARDED&&self.game.analytics.showRewardedVideoAd(n,v)):this.isAdTypeValid(this.type)&&(i=this.getSceneName(),a={type:this.type,placement:i,adService:v},self.game.analytics.showAdFail(a)),e.finish(21);case 26:case"end":return e.stop()}}),e,this,[[2,16,21,26]])})));return function(){return e.apply(this,arguments)}}(),n.getStatus=function(){return this.status},n.createInstanceByType=function(){var e=(0,i.Z)(u().mark((function e(t){var n;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=self.game.facebook,e.prev=1,e.t0=t,e.next=e.t0===g.REWARDED?5:e.t0===g.INTERSTITIAL||e.t0===g.PRE_ROLL?8:11;break;case 5:return e.next=7,n.getRewardedVideoAsync(this.placementId);case 7:case 10:return e.abrupt("return",e.sent);case 8:return e.next=10,n.getInterstitialAdAsync(this.placementId);case 11:case 20:return e.abrupt("return",null);case 12:e.next=21;break;case 14:if(e.prev=14,e.t1=e.catch(1),!(e.t1 instanceof Object&&p.hasOwn(e.t1,"code"))){e.next=20;break}if("ADS_TOO_MANY_INSTANCES"!==e.t1.code){e.next=20;break}return this.isHasTooManyInstancesError=!0,e.abrupt("return",this.instanceLoadFailedQueue.shift()||null);case 21:case"end":return e.stop()}}),e,this,[[1,14]])})));return function(t){return e.apply(this,arguments)}}(),n.getSceneName=function(){try{var e=self.game.globalScene;return e instanceof d.Z?e.getCurrentScene().scene.getSceneName():"unknown"}catch(t){return"unknown"}},n.isAdTypeValid=function(e){var t;return r()(t=c()(g)).call(t,e)},t}(GameCore.Ads.AdInstance);t.default=y},594:function(e,t,n){"use strict";n.r(t);var i,a=n(615),s=n(624),r=n(623),o=n(618),c=n(2),h=n.n(c),u=n(10),l=n.n(u),d=n(81),p=n.n(d),f=n(0),g=n.n(f),m=n(627),v=n(654),y=GameCore,T=y.Utils.Object,C=y.Ads,E=C.Types,A=C.Status,S="not-loaded",b="loading",I="loaded",w="google",P=function(e){function t(n,i){var a;return(a=e.call(this,n)||this).instance=void 0,a.instance=null,a.status=A.IDLE,window.setInterstitialPlacementType=t.setInterstitialPlacementType,window.setRewardedPlacementType=t.setRewardedPlacementType,window.setPreRollPlacementType=t.setPreRollPlacementType,t.childAdInstances.push((0,r.Z)(a)),t.isPreloadConfigReady&&(a.status=A.FILLED),a}(0,o.Z)(t,e),t.initGoogleAdsAsync=function(){var e=(0,a.Z)(g().mark((function e(n){return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("loaded"!==t.initStatus){e.next=3;break}return e.abrupt("return");case 3:t._initStatus=b,t.adsByGoogleConfig=n,t.loadScriptElementAsync(n);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t.configGoogleAdsOnInit=function(){var e=(0,a.Z)(g().mark((function e(){return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:window.adsbygoogle=window.adsbygoogle||[],window.adBreak=function(e){adsbygoogle.push(e)},window.adConfig=function(e){adsbygoogle.push(e)},t._initStatus=I,t.runPreloadAdConfig();case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),t.runPreloadAdConfig=function(){var e=(0,a.Z)(g().mark((function e(){return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preloadPromise=new(h())((function(e,n){window.adConfig({preloadAdBreaks:"on",onReady:function(){t.isPreloadConfigReady=!0,t.handlePostPreloadAdComplete(),e()}}),setTimeout((function(){t.isPreloadConfigReady||n(new Error("Failed to preload ad config in time."))}),1e4)})),e.abrupt("return",t.preloadPromise);case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),t.loadScriptElementAsync=function(e){return new(h())((function(n,i){!function a(s){var r=e.maxScriptLoadRetryCount,o=document.createElement("script");try{t.assignAdsByGoogleScriptProperties(o,e)}catch(h){t._initStatus=S,i(new Error("Invalid adConfig."))}if(o.onload=function(){t.configGoogleAdsOnInit(),n(!0)},o.onerror=function(){s<r?setTimeout((function(){a(s+1)}),12e4):(t._initStatus=S,i(new Error("Failed to load Google Ads script.")))},document.head.appendChild(o),!!!document.getElementById("adsByGoogleFunctionScript")){var c=document.createElement("script");c.text="window.adsbygoogle = window.adsbygoogle || []; var adBreak = adConfig = function(o) {adsbygoogle.push(o);}",c.id="adsByGoogleFunctionScript",document.head.appendChild(c)}}(0)}))},t.assignAdsByGoogleScriptProperties=function(e,t){var n=t.dataAdClient,i=t.dataAdHost,a=t.dataAdChannel,s=t.dataAdBreakTest,r=t.dataAdFrequencyHint;if(!n&&!i)throw new Error("dataAdClient or dataAdHost is required.");e.async=!0,e.setAttribute("data-ad-frequency-hint",r+"s"),n&&e.setAttribute("data-ad-client",n),a&&e.setAttribute("data-ad-channel",a),i&&e.setAttribute("data-ad-host",i),s&&e.setAttribute("data-adbreak-test","on");var o="";if(n||i){o="?";var c=[];n&&c.push("client="+n),i&&c.push("host="+i),o+=c.join("&")}e.src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"+o,e.crossOrigin="anonymous"};var n=t.prototype;return n.makeAdInstance=function(){var e=this;return{getPlacementID:function(){return""},loadAsync:function(){return e.preloadAdPlacement()},showAsync:function(){return e.createAdPlacement()}}},n.preloadAdPlacement=function(){return t._initStatus!==I?h().reject(new Error("Google Ads not initiated.")):t.isPreloadConfigReady?h().resolve():t.preloadPromise?t.preloadPromise:t.runPreloadAdConfig()},n.createAdPlacement=function(){switch(this.type){case E.PRE_ROLL:return this.createAdPlacementPreroll();case E.REWARDED:return this.createAdPlacementRewarded();case E.INTERSTITIAL:return this.createAdPlacementInterstitial();default:return h().reject(new GameCore.Ads.AdError("UNSUPPORTED_AD_TYPE","Unsupported."))}},n.createAdPlacementPreroll=function(){return new(h())((function(e,n){window.adBreak({type:t.preRollPlacementType,name:"prerollAd",adBreakDone:function(t){switch(t.breakStatus){case"dismissed":case"viewed":return void e();default:return void n(new GameCore.Ads.AdError(t.breakStatus,t.breakType))}}})}))},n.createAdPlacementInterstitial=function(){return new(h())((function(e,n){window.adBreak({type:t.interstitialPlacementType,name:"interstitialAd",beforeAd:function(){self.game.ads.hideBannerAdAsync()},adBreakDone:function(t){switch(self.game.ads.showBannerAdAsync(),t.breakStatus){case"dismissed":case"viewed":return void e();default:return void n(new GameCore.Ads.AdError(t.breakStatus,t.breakType))}}})}))},n.createAdPlacementRewarded=function(){return new(h())((function(e,n){window.adBreak({type:t.rewardedPlacementType,name:"rewardedAd",beforeReward:function(e){self.game.ads.hideBannerAdAsync(),e()},adViewed:function(){},adDismissed:function(){},adBreakDone:function(t){switch(self.game.ads.showBannerAdAsync(),t.breakStatus){case"dismissed":return void n(new GameCore.Ads.AdError("USER_INPUT","User dismissed."));case"viewed":return void e();default:return void n(new GameCore.Ads.AdError(t.breakStatus,t.breakType))}}})}))},t.setGame=function(e){self.game=e},n.getStatus=function(){return this.status},n.loadAsync=function(){var e=(0,a.Z)(g().mark((function e(){var n,i,a;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,t.isPreloadConfigReady&&null==this.instance){e.next=3;break}return e.abrupt("return");case 3:if(this.instance=this.makeAdInstance(),null!==this.instance){e.next=6;break}throw new GameCore.Ads.AdError("AD_INSTANCE_NOT_INITIATED","Ad instance didn't initiated.");case 6:return e.next=8,this.instance.loadAsync();case 8:n=this.getSceneName(),this.type===E.PRE_ROLL&&self.game.analytics.loadPreRollAd(n,w),this.type===E.INTERSTITIAL&&self.game.analytics.loadInterstitialAd(n,w),this.type===E.REWARDED&&self.game.analytics.loadRewardedVideoAd(n,w),e.next=18;break;case 14:throw e.prev=14,e.t0=e.catch(0),this.isAdTypeValid(this.type)&&(i=this.getSceneName(),a={type:this.type,placement:i,adService:w},self.game.analytics.loadAdFail(a)),e.t0;case 18:case"end":return e.stop()}}),e,this,[[0,14]])})));return function(){return e.apply(this,arguments)}}(),n.showAsync=function(){var e=(0,a.Z)(g().mark((function e(){var t,n,i,a;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=!1,e.prev=1,this.status===A.FILLED){e.next=4;break}throw new GameCore.Ads.AdError("AD_NOT_FILLED","Ads no fill.");case 4:if(this.status=A.SHOWING,null!==this.instance){e.next=8;break}return e.next=8,this.loadAsync();case 8:if(null!==this.instance){e.next=10;break}throw new GameCore.Ads.AdError("AD_INSTANCE_NOT_INITIATED","Ad instance didn't initiated.");case 10:return e.next=12,this.instance.showAsync();case 12:t=!0,this.handlePostShowAdStatus(),this.instance=null,e.next=27;break;case 17:if(e.prev=17,e.t0=e.catch(1),!(e.t0 instanceof Object&&T.hasOwn(e.t0,"code"))){e.next=24;break}if("noAdPreloaded"!==e.t0.code){e.next=22;break}return e.abrupt("return");case 22:"USER_INPUT"===e.t0.code&&(t=!0),"frequencyCapped"===e.t0.code&&self.game.analytics.event(m._.MISSING_AD_SHOW,{ad_type:this.type});case 24:throw this.handlePostShowAdStatus(),this.instance=null,e.t0;case 27:return e.prev=27,window.focus(),n=this.getSceneName(),t?(this.type===E.PRE_ROLL&&self.game.analytics.showPreRollAd(n,w),this.type===E.INTERSTITIAL&&self.game.analytics.showInterstitialAd(n,w),this.type===E.REWARDED&&self.game.analytics.showRewardedVideoAd(n,w)):this.isAdTypeValid(this.type)&&(i=this.getSceneName(),a={type:this.type,placement:i,adService:w},self.game.analytics.showAdFail(a)),e.finish(27);case 32:case"end":return e.stop()}}),e,this,[[1,17,27,32]])})));return function(){return e.apply(this,arguments)}}(),n.getSceneName=function(){try{var e=self.game.globalScene;return e instanceof v.Z?e.getCurrentScene().scene.getSceneName():"unknown"}catch(t){return"unknown"}},n.isAdTypeValid=function(e){var t;return l()(t=p()(E)).call(t,e)},n.handlePostShowAdStatus=function(){t.isPreloadConfigReady?this.status=A.FILLED:this.status=A.IDLE},t.handlePostPreloadAdComplete=function(){t.childAdInstances.forEach((function(e){e.status=A.FILLED}))},(0,s.Z)(t,null,[{key:"initStatus",get:function(){return t._initStatus}}]),t}(GameCore.Ads.AdInstance);i=P,P.childAdInstances=[],P._initStatus=S,P.isPreloadConfigReady=!1,P.adsByGoogleConfig=void 0,P.preloadPromise=void 0,P.preRollPlacementType="preroll",P.interstitialPlacementType="next",P.rewardedPlacementType="reward",P.setInterstitialPlacementType=function(e){i.interstitialPlacementType=e},P.setRewardedPlacementType=function(e){i.rewardedPlacementType=e},P.setPreRollPlacementType=function(e){i.preRollPlacementType=e},t.default=P},639:function(e,t,n){"use strict";n.d(t,{U:function(){return E},v:function(){return A}});var i=n(612),a=n(615),s=n(0),r=n.n(s),o=n(33),c=n.n(o),h=n(618),u=n(629),l=function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).name="BadRequest",i.message=t||"This request is bad",i.payload=n,i}return(0,h.Z)(t,e),t}((0,u.Z)(Error)),d=function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).name="RequestTimeout",i.message=t||"This request is timeout",i.payload=n,i}return(0,h.Z)(t,e),t}((0,u.Z)(Error)),p=n(626),f=GameCore.Configs,g=f.AppId,m=f.Network,v=function(e){if(!e.ok)throw new l(null,{response:e})},y=function(){var e=window.game.auth.getToken();return{token:e,timeout:m.Timeout,headers:{Authorization:"Bearer "+e,"Content-Type":"application/json"}}},T=function(e,t,n,i){return(0,a.Z)(r().mark((function a(){var s,o,h,u,p;return r().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,s=e+"/apps/"+g+"/"+t,o=new AbortController,n.signal=o.signal,h=setTimeout((function(){o.abort()}),n.timeout),GameCore.Utils.Valid.isObject(i)&&(n.body=c()(i)),a.next=8,fetch(s,n);case 8:return u=a.sent,clearTimeout(h),v(u),a.next=13,u.json();case 13:if(a.t0=a.sent,a.t0){a.next=16;break}a.t0={};case 16:return p=a.t0,a.abrupt("return",p);case 20:if(a.prev=20,a.t1=a.catch(0),!(a.t1 instanceof l)){a.next=24;break}return a.abrupt("return",null);case 24:if(!(a.t1 instanceof Object&&GameCore.Utils.Object.hasOwn(a.t1,"name"))){a.next=27;break}if("AbortError"!==a.t1.name){a.next=27;break}throw new d(null);case 27:throw a.t1;case 28:case"end":return a.stop()}}),a,null,[[0,20]])})))},C=function(){var e=(0,a.Z)(r().mark((function e(t,n){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.abrupt("return",t());case 4:if(e.prev=4,e.t0=e.catch(0),!(e.t0 instanceof d&&n>0)){e.next=18;break}return e.prev=7,e.next=10,(0,p.qZ)(600);case 10:return e.next=12,C(t,n-1);case 12:return e.abrupt("return",e.sent);case 15:return e.prev=15,e.t1=e.catch(7),e.abrupt("return",{});case 18:if(!(e.t0 instanceof d)){e.next=20;break}return e.abrupt("return",{});case 20:return e.abrupt("return",{});case 22:case"end":return e.stop()}}),e,null,[[0,4],[7,15]])})));return function(t,n){return e.apply(this,arguments)}}(),E=function(){var e=(0,a.Z)(r().mark((function e(t,n,a,s){var o,c;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return void 0===n&&(n={}),void 0===s&&(s=m.Retries),e.prev=2,o=(0,i.Z)({},y(),n,{method:"GET"}),c=T(a,t,o),e.next=7,C(c,s);case 7:return e.abrupt("return",e.sent);case 10:return e.prev=10,e.t0=e.catch(2),e.abrupt("return",{});case 14:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(t,n,i,a){return e.apply(this,arguments)}}(),A=function(){var e=(0,a.Z)(r().mark((function e(t,n,a,s,o){var c,h;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return void 0===a&&(a={}),void 0===o&&(o=m.Retries),e.prev=2,c=(0,i.Z)({},y(),a,{method:"POST"}),h=T(s,t,c,n),e.next=7,C(h,o);case 7:return e.abrupt("return",e.sent);case 10:return e.prev=10,e.t0=e.catch(2),e.abrupt("return",{});case 14:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(t,n,i,a,s){return e.apply(this,arguments)}}()},636:function(e,t,n){"use strict";n.d(t,{kL:function(){return i},fJ:function(){return a},EH:function(){return s},qj:function(){return r},rh:function(){return o},DW:function(){return c}});var i="CONTEXT_RECEIVED",a="CONTEXT_PROCESSED",s="CONTEXT_GAME_MODE_DETECTED",r="MESSAGES_SENT_UPDATE",o="MESSAGES_SENT_REMOVE",c="SCENE_KEY_UPDATE"},652:function(e,t,n){"use strict";var i=n(618),a=function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).name="LeaderboardNotFound",i.message=t||"Leaderboard not found",i.payload=n,i}return(0,i.Z)(t,e),t}((0,n(629).Z)(Error));t.Z=a},628:function(e,t,n){"use strict";var i=n(618),a=function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).name="TournamentNotFound",i.message=t||"A Tournament with current context was not found",i.payload=n,i.code="TOURNAMENT_NOT_FOUND",i}return(0,i.Z)(t,e),t}((0,n(629).Z)(Error));t.Z=a},658:function(e,t,n){"use strict";var i=n(611),a=function(){function e(e,t){if(this.scene=void 0,this.config=void 0,this.isStarted=void 0,this.tween=void 0,!(t.targets.length<1)){this.buildConfig(e,t);var n=this.config.targets[0].scene;n&&(this.scene=n,this.isStarted=!1,this.tween=n.tweens.create(this.config))}}var t=e.prototype;return t.buildConfig=function(e,t){this.config=(0,i.TS)(e,t)},t.play=function(){this.tween&&(this.isStarted&&this.tween.hasStarted?this.restart():(this.isStarted||this.tween.hasStarted||this.tween.play(),this.isStarted=!0))},t.restart=function(){var e;null==(e=this.tween)||e.restart()},t.stop=function(){var e;null==(e=this.tween)||e.stop()},t.remove=function(){var e;null==(e=this.tween)||e.remove()},t.next=function(e){return this.tween?(this.tween.off(Phaser.Tweens.Events.TWEEN_COMPLETE,e),this.tween.once(Phaser.Tweens.Events.TWEEN_COMPLETE,e),this.tween):null},e}();t.Z=a},663:function(e,t,n){"use strict";var i=n(618),a=n(658),s={targets:[],yoyo:!0,repeat:-1,duration:600,repeatDelay:50,ease:n(664).Z,easeParams:[0,.9],props:{scale:{from:1,to:1.2}}},r=function(e){function t(t){return e.call(this,s,t)||this}return(0,i.Z)(t,e),t}(a.Z);t.Z=r},676:function(e,t,n){"use strict";var i=n(623),a=n(618),s=n(658),r={targets:[],repeat:-1,yoyo:!0,duration:33,ease:Phaser.Math.Easing.Sine.InOut,props:{x:5}},o=function(e){function t(t){var n,a,s;return(s=e.call(this,r,t)||this).posX=void 0,s.handleSwitchPosition=function(){var e;s.posX=-s.posX,null==(e=s.tween)||e.updateTo("x",-s.posX)},null!=(n=s.config)&&n.props?(s.posX=s.config.props.x,null==(a=s.tween)||a.on(Phaser.Tweens.Events.TWEEN_REPEAT,s.handleSwitchPosition),s):(0,i.Z)(s)}return(0,a.Z)(t,e),t}(s.Z);t.Z=o},675:function(e,t,n){"use strict";var i=n(618),a=n(658),s={targets:[],duration:400,ease:n(657).Z,props:{scale:"+=0.1"}},r=function(e){function t(t){return e.call(this,s,t)||this}return(0,i.Z)(t,e),t}(a.Z);t.Z=r},664:function(e,t,n){"use strict";var i=n(191),a=n.n(i)()(.55,.47,.43,.91);t.Z=a},657:function(e,t,n){"use strict";var i=n(191),a=n.n(i)()(.48,1.57,.6,.83);t.Z=a},659:function(e,t,n){"use strict";var i=n(618),a=n(658),s={targets:[],duration:300,ease:Phaser.Math.Easing.Sine.InOut,props:{alpha:{start:0,from:0,to:1}}},r=function(e){function t(t){return e.call(this,s,t)||this}return(0,i.Z)(t,e),t}(a.Z);t.Z=r},667:function(e,t,n){"use strict";var i=n(618),a=n(658),s={targets:[],duration:600,ease:Phaser.Math.Easing.Back.Out,props:{y:{from:500,to:0}}},r=function(e){function t(t){return e.call(this,s,t)||this}return(0,i.Z)(t,e),t}(a.Z);t.Z=r},660:function(e,t,n){"use strict";var i=n(618),a=n(658),s={targets:[],duration:300,ease:Phaser.Math.Easing.Sine.InOut,props:{alpha:{start:1,from:1,to:0}}},r=function(e){function t(t){return e.call(this,s,t)||this}return(0,i.Z)(t,e),t}(a.Z);t.Z=r},656:function(e,t,n){"use strict";var i=n(618),a=n(658),s={targets:[],duration:300,ease:n(657).Z,props:{scale:{from:1.2,to:1}}},r=function(e){function t(t){return e.call(this,s,t)||this}return(0,i.Z)(t,e),t}(a.Z);t.Z=r},669:function(e,t,n){"use strict";n.d(t,{Z:function(){return p}});var i=n(624),a=n(623),s=n(618),r=n(627),o=n(658),c={targets:[],duration:400,ease:n(657).Z,props:{scale:"-=0.1"}},h=function(e){function t(t){return e.call(this,c,t)||this}return(0,s.Z)(t,e),t}(o.Z),u=n(646),l=n(648),d=n(621),p=function(e){function t(t,n,i,s,r,o){var c;return void 0===o&&(o=!1),(c=e.call(this,t)||this).useSound=!0,c.isClicked=!1,c.scaleUp=-1,c.scaleDown=-1,c.button=void 0,c.upAnimation=void 0,c.downAnimation=void 0,c.isUsePixelPerfect=!1,c.hitArea=void 0,c.hitZone=void 0,c.scaleDownPress=void 0,c.parentName=void 0,c.handelObjectDestroy=function(){c.scene&&c.scene.events.off(Phaser.Scenes.Events.SLEEP,c.handleSceneSleep)},c.handleSceneSleep=function(){c.scene&&c.scene.tweens.killTweensOf((0,a.Z)(c))},c.handlePointerDown=function(){var e,t;c.isClicked||null!=(e=c.upAnimation)&&null!=(t=e.tween)&&t.isPlaying()||(c.isClicked=!0,c.runDownAnimation())},c.handleOnClick=function(e){return function(){var t,n,i,a;c.isClicked&&(null!=(t=c.upAnimation)&&null!=(n=t.tween)&&n.isPlaying()||(c.isClicked=!1,c.runUpAnimation(),null==(i=c.upAnimation)||null==(a=i.tween)||a.once(Phaser.Tweens.Events.TWEEN_COMPLETE,(function(){c.logButtonEvent(),c.addDebugData(),c.processCallback(e)}))))}},c.handlePointerOut=function(){var e,t;c.isClicked&&(null!=(e=c.upAnimation)&&null!=(t=e.tween)&&t.isPlaying()||(c.isClicked=!1,c.runUpAnimation()))},c.runDownAnimation=function(){var e;-1===c.scaleDown&&(c.scaleUp=c.scale,c.scaleDown=c.scaleDownPress),c.useSound&&c.scene.audio.playSound(l.Z.BUTTON_CLICK),null==(e=c.downAnimation)||e.remove(),c.downAnimation=new h({targets:[(0,a.Z)(c)],duration:150,props:{scale:c.scaleDown},onUpdate:function(){c.hitZone.scale=1/c.scale}}),c.downAnimation.play()},c.runUpAnimation=function(){var e;-1!==c.scaleUp&&(null==(e=c.upAnimation)||e.remove(),c.upAnimation=new h({targets:[(0,a.Z)(c)],duration:150,props:{scale:c.scaleUp},onUpdate:function(){c.hitZone.scale=1/c.scale}}),c.upAnimation.play())},c.isUsePixelPerfect=o,c.setDepth(u.Z.BUTTON),c.createButton(n,i,s,r),c.updateSize(),c.listenEvents(),c.scene.add.existing((0,a.Z)(c)),c}(0,s.Z)(t,e);var n=t.prototype;return n.listenEvents=function(){this.scene.events.on(Phaser.Scenes.Events.SLEEP,this.handleSceneSleep),this.once(Phaser.GameObjects.Events.DESTROY,this.handelObjectDestroy)},n.processCallback=function(e){var t,n,i;null==(t=this.upAnimation)||t.stop(),null==(n=this.downAnimation)||n.stop(),null==(i=this.scene)||i.tweens.killTweensOf(this),-1!==this.scaleUp&&this.setScale(this.scaleUp),e()},n.setDisabled=function(e){var t,n;e?(this.setAlpha(.5),null==(t=this.hitArea)||t.disableInteractive()):(this.setAlpha(1),null==(n=this.hitArea)||n.setInteractive())},n.createButton=function(e,t,n,i){this.button=this.scene.add.image(0,0,e,t),n&&i&&this.button.setWorldSize(n,i),this.scaleDownPress=this.scale-.1;var a=this.button,s=a.displayWidth,r=a.displayHeight;this.hitZone=this.scene.make.zone({displayWidth:s,displayHeight:r}),this.add([this.button,this.hitZone])},n.updateSize=function(){var e=this.button,t=e.width,n=e.height,i=t/100*10,a=n/100*10,s=i<10?i:10,r=a<10?a:10;this.setSize(t+s,n+r),this.hitZone.setSize(t+s,n+r)},n.addDebugData=function(){var e=this.getParentName(),t=this.name;(0,d.sw)("ui-click",e+":"+t)},n.logButtonEvent=function(){var e=this.getParentName(),t=this.name;this.scene.analytics.event(r._.BUTTON_CLICK,{button_name:t,screen_name:e})},n.getParentName=function(){if(this.parentName)return this.parentName;for(var e=this.parentContainer;e;){if(e instanceof GameCore.Screen){var t=e;return this.parentName=t.getScreenName(),this.parentName}e=e.parentContainer}return this.parentName=this.scene.getSceneName(),this.parentName},(0,i.Z)(t,[{key:"onClick",set:function(e){this.isUsePixelPerfect?(this.hitArea=this.button,this.hitArea.setInteractive({useHandCursor:!0,pixelPerfect:!0})):(this.hitArea=this.hitZone,this.updateSize(),this.hitArea.setInteractive({useHandCursor:!0})),this.hitArea.on(Phaser.Input.Events.GAMEOBJECT_POINTER_DOWN,this.handlePointerDown),this.hitArea.on(Phaser.Input.Events.GAMEOBJECT_POINTER_UP,this.handleOnClick(e)),this.hitArea.on(Phaser.Input.Events.GAMEOBJECT_POINTER_OUT,this.handlePointerOut)}},{key:"isUsePixelPerFect",get:function(){return this.isUsePixelPerfect}}]),t}(Phaser.GameObjects.Container)},662:function(e,t,n){"use strict";var i=n(624),a=n(623),s=n(618),r=n(627),o=n(646),c=n(621),h=n(663),u=function(e){function t(t,n,i){var s;return(s=e.call(this,t)||this).useSound=!0,s.isClicked=!1,s.scaleUp=-1,s.scaleDownPress=void 0,s.parentName=void 0,s.disable=void 0,s.handelObjectDestroy=function(){s.scene&&s.scene.events.off(Phaser.Scenes.Events.SLEEP,s.handleSceneSleep)},s.handleSceneSleep=function(){s.scene&&s.scene.tweens.killTweensOf((0,a.Z)(s))},s.handlePointerDown=function(){s.isClicked||(s.animButtonDown(),s.isClicked=!0)},s.handleOnClick=function(e){return function(){s.isClicked&&(s.isClicked=!1,s.animButtonUp(),s.logButtonEvent(),s.addDebugData(),s.processCallback(e))}},s.handlePointerOut=function(){s.isClicked&&(s.isClicked=!1,s.animButtonUp())},s.buttonsPulsateAnimation=void 0,s.setDepth(o.Z.BUTTON),s.setSize(n,i),s.listenEvents(),s.scene.add.existing((0,a.Z)(s)),s}(0,s.Z)(t,e);var n=t.prototype;return n.listenEvents=function(){this.scene.events.on(Phaser.Scenes.Events.SLEEP,this.handleSceneSleep),this.once(Phaser.GameObjects.Events.DESTROY,this.handelObjectDestroy)},n.animButtonDown=function(){var e=this;this.scene.add.tween({targets:this,alpha:.75,duration:100,ease:Phaser.Math.Easing.Sine.Out,onStart:function(t){e.disable&&(e.updateAlphaByDisable(),t.remove())},onUpdate:function(t){e.disable&&(e.updateAlphaByDisable(),t.remove())}})},n.animButtonUp=function(){var e=this;this.scene.add.tween({targets:this,alpha:1,duration:200,ease:Phaser.Math.Easing.Sine.In,onStart:function(t){e.disable&&(e.updateAlphaByDisable(),t.remove())},onUpdate:function(t){e.disable&&(e.updateAlphaByDisable(),t.remove())}})},n.processCallback=function(e){-1!==this.scaleUp&&this.setScale(this.scaleUp),e()},n.updateAlphaByDisable=function(){this.alpha=this.disable?.5:1},n.setDisabled=function(e,t){void 0===t&&(t=!0),this.disable!=e&&(this.disable=e,e?this.disableInteractive():this.setInteractive(),t&&this.updateAlphaByDisable())},n.addDebugData=function(){var e=this.getParentName(),t=this.name;(0,c.sw)("ui-click",e+":"+t)},n.logButtonEvent=function(){var e=this.getParentName(),t=this.name;this.scene.analytics.event(r._.BUTTON_CLICK,{button_name:t,screen_name:e})},n.getParentName=function(){if(this.parentName)return this.parentName;for(var e=this.parentContainer;e;){if(e instanceof GameCore.Screen){var t=e;return this.parentName=t.getScreenName(),this.parentName}e=e.parentContainer}return this.parentName=this.scene.getSceneName(),this.parentName},n.runPulsate=function(){var e,t;null==(e=this.buttonsPulsateAnimation)||e.remove(),this.buttonsPulsateAnimation=new h.Z({targets:[this],props:{scale:{from:1,to:1.05},duration:500}}),null==(t=this.buttonsPulsateAnimation)||t.play()},n.stopPulsate=function(){var e;null==(e=this.buttonsPulsateAnimation)||e.stop(),this.setScale(1)},n.cancelButtonClick=function(){this.isClicked&&(this.isClicked=!1,this.animButtonUp())},(0,i.Z)(t,[{key:"onClick",set:function(e){this.setInteractive({useHandCursor:!0}),this.on(Phaser.Input.Events.GAMEOBJECT_POINTER_DOWN,this.handlePointerDown),this.on(Phaser.Input.Events.GAMEOBJECT_POINTER_UP,this.handleOnClick(e)),this.on(Phaser.Input.Events.GAMEOBJECT_POINTER_OUT,this.handlePointerOut)}}]),t}(Phaser.GameObjects.Container);t.Z=u},673:function(e,t,n){"use strict";var i=n(618),a=n(653),s=function(e){function t(t,n,i,a){var s;return(s=e.call(this,t,n.key,n.button,i,a)||this).payload=void 0,s.payload=n,s.createIcon(),s.createText(),s}(0,i.Z)(t,e);var n=t.prototype;return n.createIcon=function(){var e=this.scene.add.image(0,0,this.payload.key,this.payload.icon);e.setWorldSize(43,43),this.add(e),Phaser.Display.Align.In.LeftCenter(e,this,-25)},n.createText=function(){var e=this.payload.text,t=this.scene.make.bitmapText({font:a.Z.PRIMARY.KEY,size:this.scene.fontSize(24),text:e,origin:{x:.2,y:.5}});this.add(t)},t}(n(669).Z);t.Z=s},655:function(e,t,n){"use strict";n.d(t,{Z:function(){return c}});var i=n(623),a=n(618),s=n(643).Z.GAMEPLAY_DEFAULT,r=s.KEY,o=s.FRAME,c=function(e){function t(t){var n;return(n=e.call(this,t)||this).icons=[],n.canPlayAnimation=!1,n.timeline=void 0,n.setSize(188,32),n.createIcons(),n.runAnimation(),n.scene.add.existing((0,i.Z)(n)),n}(0,a.Z)(t,e);var n=t.prototype;return n.createIcons=function(){var e=this.scene.add.image(0,0,r,o.LOADING_CLUB),t=this.scene.add.image(0,0,r,o.LOADING_DIAMOND),n=this.scene.add.image(0,0,r,o.LOADING_HEART),i=this.scene.add.image(0,0,r,o.LOADING_SPADE);e.setWorldSize(32,32),t.setWorldSize(32,32),n.setWorldSize(32,32),i.setWorldSize(32,32),this.icons=[e,t,n,i],this.add(this.icons),this.alignIcons()},n.alignIcons=function(){var e=this;this.icons.forEach((function(t,n){var i=-(e.icons.length-1)/2*40+40*n;t.setX(i)}))},n.runAnimation=function(){var e,t=this;if(this.canPlayAnimation){var n=1/this.scene.world.getPixelRatio();null==(e=this.timeline)||e.stop();var i=function(){t.icons.forEach((function(e){return e.setScale(.8*n)}))},a=this.scene.tweens.createTimeline({loop:-1,onStart:i,onLoop:i});this.icons.forEach((function(e,t){a.add({targets:e,duration:150,ease:Phaser.Math.Easing.Sine.Out,yoyo:!0,offset:150*t,props:{scale:{from:.8*n,to:1.1*n}}})})),a.play(),this.timeline=a}},n.stopAnimation=function(){var e;null==(e=this.timeline)||e.stop()},n.setVisible=function(t){return e.prototype.setVisible.call(this,t),this.canPlayAnimation=t,t?this.runAnimation():this.stopAnimation(),this},n.setTint=function(e){return this.icons.forEach((function(t){return t.setTint(e)})),this},t}(Phaser.GameObjects.Container)},670:function(e,t,n){"use strict";n.d(t,{Z:function(){return d}});var i=n(624),a=n(618),s=n(7),r=n.n(s),o=n(32),c=n.n(o),h=n(3),u=n.n(h),l=n(666),d=(function(e){function t(t){var n;return(n=e.call(this,t,"UpdateAbleObject")||this).updateInfo=void 0,n}(0,a.Z)(t,e)}(Phaser.GameObjects.GameObject),function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).classType=void 0,i.listConfigs=void 0,i.padding=void 0,i.startObjectIndex=void 0,i.endObjectIndex=void 0,i.listObjects=void 0,i.classType=n.classType,i.listConfigs=n.listConfigs,i.padding=n.padding?n.padding:0,i.objects.classType=i.classType,i.updateConfig(i.listConfigs),i}(0,a.Z)(t,e);var n=t.prototype;return n.reset=function(){e.prototype.reset.call(this),this.killAndHideAll()},n.getChildren=function(){var e;return r()(e=this.listObjects).call(e,(function(e){return void 0!=e&&e.active}))},n.updateConfig=function(e){var t;this.reset(),this.listConfigs=e,this.listObjects=c()(t=new Array(e.length)).call(t,void 0),this.addObjectIndex(0,0);var n=this.getEndObjectIndex();this.addObjectIndex(1,n),this.startObjectIndex=this.getStartObjectIndex(),this.endObjectIndex=this.getEndObjectIndex(),this.updateMaxHeight(),this.value=this.marginTop},n.killAndHideAll=function(){var e,t=this;this.listObjects instanceof Array&&u()(e=this.listObjects).call(e,(function(e){void 0!==e&&t.objects.killAndHide(e)}))},n.setItemPosition=function(e,t){var n=e.height;e.setPosition(0,n/2+(n+this.padding)*t-this.height/2)},n.updateMaxHeight=function(){return this.maxValue=Math.max(this.listConfigs.length*(this.objHeight+this.padding)-this.padding+this.marginBottom-this.height,0)},n.updateObject=function(t){e.prototype.updateObject.call(this,t);for(var n=this.getStartObjectIndex(),i=this.getEndObjectIndex(),a=this.startObjectIndex;a<=this.endObjectIndex;a++)(a<n||a>i)&&this.killObjectIndex(a,a);for(var s=n;s<=i;s++)(s<this.startObjectIndex||s>this.endObjectIndex)&&this.addObjectIndex(s,s);this.startObjectIndex=n,this.endObjectIndex=i},n.killObjectIndex=function(e,t){for(var n=e;n<=t;n++){var i=this.listObjects[n];i&&(this.objects.killAndHide(i),this.listObjects[n]=void 0)}},n.addObjectIndex=function(e,t){for(var n=e;n<=t;n++){var i=this.padding,a=this.listConfigs;if(n>=a.length)return;var s=this.objects.getFirstDead(!0),r=s.height,o=r/2+(r+i)*n+this.value-this.height/2;s.updateInfo(a[n]),s.setPosition(0,o),s.setActive(!0),s.setVisible(!0),this.addAt(s),this.listObjects[n]=s}},n.getStartObjectIndex=function(){var e=this.objHeight,t=this.padding;return Math.max(Math.floor((0-this.value)/(e+t)),0)},n.getEndObjectIndex=function(){var e=this.objHeight,t=this.padding,n=this.listConfigs,i=e+t;return Math.min(Math.floor((this.height-this.value)/i),n.length)},(0,i.Z)(t,[{key:"objHeight",get:function(){var e=this.objects.getChildren();return 0==e.length?this.maxValue=0:e[0].height}}]),t}(l.Z))},666:function(e,t,n){"use strict";n.d(t,{Z:function(){return _}});var i=n(612),a=n(624),s=n(623),r=n(618),o=n(3),c=n.n(o),h=n(42),u=n.n(h),l=n(32),d=n.n(l),p=n(7),f=n.n(p),g=n(5),m=n.n(g),v=n(23),y=n.n(v),T=n(24),C=n.n(T),E=n(26),A=n.n(E),S=n(646),b=n(616),I=n(662),w=function(e){function t(t,n,i,a,s){var r;return(r=e.call(this,t)||this).imageTop=void 0,r.imageBottom=void 0,r.paddingTop=0,r.paddingBottom=0,r.setSize(a,s),r.createImage(n,i),r}(0,r.Z)(t,e);var n=t.prototype;return n.createImage=function(e,t){this.imageTop=this.scene.add.image(0,0,e,t),this.imageBottom=this.scene.add.image(0,0,e,t),this.imageTop.setOrigin(.5,0),this.imageBottom.setOrigin(.5,1),this.imageTop.setWorldSize(this.width,this.height),this.imageBottom.setWorldSize(this.width,this.height),this.updateSizeImages()},n.setHeightBar=function(e){this.setSize(this.width,e),this.updateSizeImages(),this.input&&this.input.hitArea.setTo(0,0,this.width,this.height)},n.setPadding=function(e,t){this.paddingTop=e,this.paddingBottom=t},n.updateSizeImages=function(){var e=this.scene.world.getPixelRatio();this.imageTop.setPosition(0,-this.height/2),this.imageTop.setCrop(0,0,this.width*e,this.height/2*e),this.imageBottom.setCrop(0,this.imageBottom.frame.height-this.height/2*e,this.width*e,this.height/2*e),this.imageBottom.setPosition(0,this.height/2-1),this.add([this.imageTop,this.imageBottom])},t}(Phaser.GameObjects.Container);function P(e,t){var n="undefined"!==typeof C()&&A()(e)||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){var n;if(!e)return;if("string"===typeof e)return k(e,t);var i=m()(n=Object.prototype.toString.call(e)).call(n,8,-1);"Object"===i&&e.constructor&&(i=e.constructor.name);if("Map"===i||"Set"===i)return y()(e);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return k(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var i=0;return function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function k(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var _=function(e){function t(t,n){var a,r;(r=e.call(this,t)||this).config=void 0,r.isEnable=void 0,r.minValue=void 0,r.maxValue=void 0,r.isScrolling=void 0,r.boundTop=void 0,r.boundBottom=void 0,r.maskGraphics=void 0,r.scrollerBar=void 0,r.objects=void 0,r._value=0,r.velocity=0,r.isScrollingSmooth=void 0,r.lastScrollY=void 0,r.isScrollingBack=void 0,r.scrollingBackTo=void 0,r.lastScrollYCount=0,r.hitArea=void 0,r.onScrollEvents=[],r.isGameObjectDragged=void 0,r.dragGameObject=function(e,t){!r.isGameObjectDragged&&e.getDistanceX()+e.getDistanceY()<20||(r.isGameObjectDragged=!0,r.onTouchScroll()(e),t instanceof I.Z&&t.cancelButtonClick())},r.updateObjectVisible=function(){for(var e=r.objects.getChildren(),t=0;t<e.length;t++){var n=e[t];n.y+n.height/2<-r.height/2||n.y-n.height/2>r.height/2?n.setVisible(!1):n.active&&n.setVisible(!0)}},r.update=function(e,t){r.isScrollingSmooth&&r.velocity&&r.scrollingSmooth(t),r.isScrollingBack&&r.scrollingBack(t)},r.checkReachBound=function(){return r.isReachTop()||r.isReachBottom()},r.onMouseScroll=(0,b.D)((function(e,t,n){if(r.isEnable){var i;if(r.isScrolling=!0,r.checkReachBound())return r.lastScrollY=c()(i=r.lastScrollY).call(i,(function(){return 0})),void(r.isScrolling=!1);r.stopScrollingBack(),r.startScrollSmooth(-n*r.scrollSmooth/15)}}),100,{isImmediate:!0,maxWait:100}),r.onTouchScroll=function(e){return void 0===e&&(e=!1),function(t){if(r.isEnable){r.velocity&&r.stopScrollSmooth(),r.stopScrollingBack(),r.isScrolling=!0;var n=r.scene.game.world.getZoomRatio(),i=t.position,a=t.prevPosition,s=(i.y-a.y)/n,o=r.height*r.maxScrollOver,c=1;if(r.isReachTop()&&s>=0){var h=(o+(-r.minValue-r.value))/o;c=Math.min(c,h)}if(r.isReachBottom()&&s<=0){var u=(o-(-r.maxValue-r.value))/o;c=Math.min(c,u)}var l=r.maxScrollOver*r.height;if(e&&r.scrollerBar){var d=r.scrollerBar,p=d.paddingTop,f=d.paddingBottom,g=r.maxValue-r.minValue+r.height,m=r.height-p-f,v=m-m/g*m;s*=-1*((r.maxValue-r.minValue)/v),l=0}r.lastScrollY[++r.lastScrollYCount%r.lastScrollY.length]=s;var y=s*c;r.value+y>-r.minValue+l?r.value=-r.minValue+l:r.value+y<-r.maxValue-l?r.value=-r.maxValue-l:r.value+=y,r.callOnScrollEvents(r.value,y)}}},r.onTouchDown=function(){r.isEnable&&(r.isGameObjectDragged=!1,r.velocity&&r.stopScrollSmooth(),r.stopScrollingBack())},r.onTouchEnd=function(){var e,t;if(r.input.enabled&&(r.isGameObjectDragged=!1,r.isReachTop()&&(r.startScrollingBack(-r.minValue),r.stopScrollSmooth()),r.isReachBottom()&&(r.startScrollingBack(-r.maxValue),r.stopScrollSmooth()),r.isScrolling)){var n=u()(e=r.lastScrollY).call(e,(function(e,t){return e+t}))/r.lastScrollY.length;r.startScrollSmooth(n*r.scrollSmooth),r.lastScrollY=c()(t=r.lastScrollY).call(t,(function(){return 0}))}},r.config=(0,i.Z)({marginTop:0,marginBottom:0,maxScrollOver:.15,acceleration:.05,scrollSmooth:45,scrollingBackRate:5},n);var o=r.config,h=o.width,l=o.height,p=o.marginTop;return r.isEnable=!1,r.minValue=-p,r.maxValue=0,r.lastScrollY=d()(a=new Array(3)).call(a,0),r.isGameObjectDragged=!1,r.setSize(h,l),r.createGroup(),r.createInput(),r.createEvents(),r.scene.add.existing((0,s.Z)(r)),r}(0,r.Z)(t,e);var n=t.prototype;return n.onScroll=function(e){this.onScrollEvents.push(e)},n.gotoTop=function(){this.value=this.config.marginTop},n.reset=function(){this.minValue=-this.config.marginTop,this.maxValue=0,this.isScrolling=!1,this.isScrollingBack=!1,this.isScrollingSmooth=!1,this.updateScrollerBar(),this.gotoTop(),this.setEnable(!1)},n.createDebug=function(){this.drawDebugBox(16711680,.8)},n.setEnable=function(e){this.isEnable=e,e?this.setInteractive({draggable:!0,useHandCursor:!0}):this.disableInteractive()},n.addItem=function(e){this.addAt(e),this.objects.add(e);var t=e.y,n=e.height,i=t-n/2-this.marginTop+this.height/2,a=t+n/2+this.marginBottom-this.height/2;this.minValue=Math.min(this.minValue,i,0),this.maxValue=Math.max(this.maxValue,a,0),this.updateScrollerBar(),this.updateObjectVisible(),this.addDragEventForObject(e)},n.addItems=function(e){var t=this;this.addAt(e),this.objects.addMultiple(e),this.refreshItems(e),e.forEach((function(e){t.addDragEventForObject(e)}))},n.refreshItems=function(e){var t=this,n=c()(e).call(e,(function(e){return e.y-e.height/2-t.marginBottom+t.height/2})),i=c()(e).call(e,(function(e){return e.y+e.height/2+t.marginBottom-t.height/2}));this.minValue=Math.min(this.minValue,Math.max.apply(Math,n),0),this.maxValue=Math.max(this.maxValue,Math.max.apply(Math,i),0),this.updateScrollerBar(),this.updateObjectVisible()},n.addDragEventForObject=function(e){var t=this;e.input&&(e.input.draggable=!0,e.on(Phaser.Input.Events.GAMEOBJECT_DRAG,(function(n){t.dragGameObject(n,e)})),e.on(Phaser.Input.Events.POINTER_WHEEL,this.onMouseScroll))},n.clearItem=function(){this.objects.clear(!0,!0),this.reset()},n.getChildren=function(){var e;return f()(e=this.objects.getChildren()).call(e,(function(e){return e.active}))},n.createBound=function(e,t,n,i){this.boundTop=this.scene.make.image({key:e,frame:t}),this.boundBottom=this.scene.make.image({key:e,frame:t}),this.boundTop.setTint(i),this.boundBottom.setTint(i),this.boundTop.setAlpha(1,1,0,0),this.boundBottom.setAlpha(0,0,1,1),this.boundTop.setDepth(S.Z.PRIORITY),this.boundBottom.setDepth(S.Z.PRIORITY);var a=this.width,s=n,r=this.getWorldPosition(),o=r.x,c=r.y;this.boundTop.setDisplaySize(a,s),this.boundBottom.setDisplaySize(a,s),this.boundTop.setY(-this.displayHeight/2+s/2+c-this.y-1),this.boundBottom.setY(this.displayHeight/2-s/2+c-this.y+1),this.boundTop.setX(o-this.x),this.boundBottom.setX(o-this.x),this.add([this.boundTop,this.boundBottom])},n.createScrollerBar=function(e,t,n){void 0===e&&(e=0),void 0===t&&(t=0),this.scrollerBar=new w(this.scene,n.key,n.frame,n.width,n.height);var i=this.height,a=this.scrollerBar.height;this.scrollerBar.setPosition(this.width/2-7,-i/2+a/2),this.scrollerBar.setPadding(e,t),this.add(this.scrollerBar),this.scrollerBar.setInteractive({useHandCursor:!0,draggable:!0}),this.scrollerBar.on(Phaser.Input.Events.GAMEOBJECT_DRAG,this.onTouchScroll(!0)),this.scrollerBar.on(Phaser.Input.Events.GAMEOBJECT_POINTER_DOWN,this.onTouchDown),this.updateScrollerBar()},n.updateScrollerBar=function(){if(this.scrollerBar){var e=this.scrollerBar,t=e.paddingTop,n=e.paddingBottom,i=Phaser.Math.Clamp(this.value/-this.maxValue,0,1),a=this.maxValue-this.minValue+this.height,s=this.height-t-n,r=s/a*s,o=s-r;this.maxValue-this.marginBottom<=0?this.scrollerBar.kill():(this.scrollerBar.revive(),this.scrollerBar.setHeightBar(r),this.scrollerBar.setY(-this.height/2+r/2+o*i+t))}},n.createMask=function(e,t,n,i){var a;void 0===n&&(n=0),void 0===i&&(i=0),null==(a=this.maskGraphics)||a.destroy(),this.maskGraphics=this.scene.make.graphics({fillStyle:{color:255,alpha:1},visible:!0}),this.maskGraphics.setName("MaskGraphics");var s=e||this.width,r=t||this.height;this.maskGraphics.fillRoundedRect(0-s/2+n,0-r/2+i,s,r,0),this.setMask(this.maskGraphics.createGeometryMask()),this.scene.events.off(Phaser.Scenes.Events.UPDATE,this.updateMask,this),this.scene.events.on(Phaser.Scenes.Events.UPDATE,this.updateMask,this)},n.updateMask=function(){var e=this.getWorldPosition(),t=e.x,n=e.y;this.maskGraphics.setPosition(t,n)},n.createGroup=function(){this.objects=this.scene.make.group({})},n.updateObject=function(e){this.objects.incY(e),this.updateObjectVisible()},n.createInput=function(){this.setInteractive({draggable:!0,useHandCursor:!0}),this.on(Phaser.Input.Events.POINTER_WHEEL,this.onMouseScroll),this.on(Phaser.Input.Events.GAMEOBJECT_DRAG,this.onTouchScroll()),this.on(Phaser.Input.Events.GAMEOBJECT_POINTER_DOWN,this.onTouchDown),this.scene.input.on(Phaser.Input.Events.POINTER_UP,this.onTouchEnd,this)},n.createEvents=function(){this.scene.events.on(Phaser.Scenes.Events.UPDATE,this.update)},n.callOnScrollEvents=function(e,t){for(var n,i=P(this.onScrollEvents);!(n=i()).done;){(0,n.value)(this,e,t)}},n.scrollingBack=function(e){var t=(this.scrollingBackTo-this.value)*e*this.scrollingBackRate/1e3;this.value+=t,Math.abs(this.scrollingBackTo-this.value)<.5&&(this.value=this.scrollingBackTo,this.stopScrollingBack()),this.callOnScrollEvents(this.value,t)},n.startScrollingBack=function(e){this.isScrollingBack=!0,this.scrollingBackTo=e},n.stopScrollingBack=function(){this.isScrollingBack=!1},n.scrollingSmooth=function(e){var t=this.velocity*e/1e3;this.value+=t;var n=Math.abs(this.velocity)/this.velocity;this.isReachTop()&&(this.startScrollingBack(-this.minValue),this.stopScrollSmooth()),this.isReachBottom()&&(this.startScrollingBack(-this.maxValue),this.stopScrollSmooth()),this.callOnScrollEvents(this.value,t),Math.abs(this.velocity)<1?this.stopScrollSmooth():this.velocity-=Math.abs(this.velocity)*this.acceleration*n},n.startScrollSmooth=function(e){this.isScrollingSmooth=!0,e&&(e*this.velocity>0?this.velocity+=e:this.velocity=e)},n.stopScrollSmooth=function(){this.isScrollingSmooth=!1,this.isScrolling=!1,this.velocity=0,this.callOnScrollEvents(this.value,0)},n.isReachTop=function(){return this.value>-this.minValue},n.isReachBottom=function(){return-this.value>this.maxValue},n.refresh=function(){this.maxValue=0,this.refreshItems(this.getChildren())},(0,a.Z)(t,[{key:"marginTop",get:function(){return this.config.marginTop}},{key:"marginBottom",get:function(){return this.config.marginBottom}},{key:"acceleration",get:function(){return this.config.acceleration}},{key:"maxScrollOver",get:function(){return this.config.maxScrollOver}},{key:"scrollSmooth",get:function(){return this.config.scrollSmooth}},{key:"scrollingBackRate",get:function(){return this.config.scrollingBackRate}},{key:"value",get:function(){return this._value},set:function(e){var t=e-this._value;this._value=e,this.updateScrollerBar(),this.updateObject(t)}}]),t}(Phaser.GameObjects.Container)},646:function(e,t){"use strict";t.Z={BACKGROUND:1,FIREWORKS:5,ITEM:10,CARD_SLOT:9,CARD:10,REMAINING_STOCK:12,HINT:25,LOGO:15,BUTTON:20,TILE:25,TEXT:30,ENCOURAGING:31,EFFECT:32,MESSAGE:33,MENU:35,FOOTER_DEPTH_NORMAL:0,FOOTER_DEPTH_ACTIVE:37,FOOTER_LOGO:38,FOOTER_OVERLAY:38,POPUP:40,PRIORITY:80,DEBUG:90,ON_TOP:1e4}},653:function(e,t){"use strict";t.Z={ATLAS:{KEY:"fonts-{{locale}}",TEXTURE:"./assets/fonts/{{locale}}/fonts.png",JSON:"./assets/fonts/fonts.json"},PRIMARY:{KEY:"primary-{{locale}}",TEXTURE:"./assets/fonts/{{locale}}/primary.png",DATA:"./assets/fonts/{{locale}}/primary.xml"},BOLD:{KEY:"bold-{{locale}}",TEXTURE:"./assets/fonts/{{locale}}/bold.png",DATA:"./assets/fonts/{{locale}}/bold.xml"},BOLD_SHADOW:{KEY:"bold-shadow-{{locale}}",TEXTURE:"./assets/fonts/{{locale}}/bold-shadow.png",DATA:"./assets/fonts/{{locale}}/bold-shadow.xml"},BOLD_SHADOW_BLUR:{KEY:"bold-shadow-blur-{{locale}}",TEXTURE:"./assets/fonts/{{locale}}/bold-shadow-blur.png",DATA:"./assets/fonts/{{locale}}/bold-shadow-blur.xml"},FONT_FAMILY:"sf-pro"}},631:function(e,t){"use strict";var n={AVATAR:{KEY:"avatar",FILE:"./assets/images/others/avatar.png",CONFIG:{}},ICON_EARTH:{KEY:"icon-earth",FILE:"./assets/images/others/icon-earth.png",CONFIG:{}},BACKGROUND:{KEY:"background",FILE:"./assets/images/"+GameCore.Utils.Image.getImageScale()+"x/bg.jpg",CONFIG:{}}};t.Z=n},643:function(e,t,n){"use strict";var i=n(612),a=n(644),s=n(640),r=n(645),o=(0,s.t)(),c=GameCore.world.isLandscape()?"desktop":o+"x",h={TUTORIAL:{KEY:"tutorial-resources",TEXTURE:"./assets/textures/"+o+"x/tutorial-resources.png",JSON:"./assets/textures/"+o+"x/tutorial-resources.json",FRAME:{TIP:"tip",HAND:"hand",BLANK:"blank",AVATAR_CAT:"avatar-cat",POPUP_TALK:"talk-popup",FIRST_MOVE:"first-move",CURRENT_SCORE:"current-score",TARGET_SCORE:"target-score",HAMMER_ITEM:"hammer-item",PAINT_ITEM:"paint-item",SHUFFLE_ITEM:"shuffle-item",COLORFUL_GEM_1:"colorful-gem-1",COLORFUL_GEM_2:"colorful-gem-2"}},GAMEPLAY_DEFAULT:{KEY:"gameplay-default",TEXTURE:"./assets/textures/"+o+"x/gameplay-default-8bit.png",JSON:"./assets/textures/"+o+"x/gameplay-default-8bit.json",PATH:"./assets/textures/"+o+"x/",FRAME:{PRELOADER:"preloader/dual-ring",BLANK:"blank",STATS_CROWN:"crown",STATS_STAR:"star",STATS_CUP:"stats_cup",STATS_MEDAL_START:"stats_medal_star",STATS_TIMER:"stats_timer",STATS_FLASH:"flash",CUP:"cup",IC_LEFT_HAND:"ic_left_hand",IC_LANGUAGE:"ic_language",IC_THEME_SELECT:"ic_theme_select",IC_DONE:"ic_done",IC_BACK:"ic_back",IC_BACK_2:"ic_back_2",IC_SETTINGS:"footer/ico-settings",IC_STATISTICS_FOOTER:"footer/ico-statistics",IC_PLAY:"footer/ico-new",IC_HINT:"footer/ico-hint",IC_UNDO:"footer/ico-undo",IC_TOURNAMENTS:"footer/ico-tour",COUNTER:"footer/counter",IC_ADS:"footer/ad",FOUNDATION_SLOT:"stack",IC_FOUNDATION_2:"stack_2",IC_SLOT:"card_slot",IC_MENU:"ic_menu",IC_SHARE:"ic_share",IC_THEME:"ic_theme",IC_INVITE:"ic_invite",IC_FLAG:"flag",IC_SOUND:"ic_sound",IC_MOVE:"ic_move",IC_STATISTICS:"ic_statistics",IC_NEXT:"ic_next",IC_GROUP:"ico_group",IC_FOLLOW:"ico_follow",IC_BOOK:"ic_book",IC_REPLAY:"ic_replay",IC_RECYCLE:"ic_recycle",IC_NEXT_LV:"ic_next_lv",IC_CLOSE:"close",IC_JOURNEY:"ic_journey",IC_JOURNEY_GLOW:"ic_journey_glow",JOURNEY_BG:"journey_bg",IC_SQUARE_ON:"page_active",IC_SQUARE_OFF:"page_inactive",IC_HIGHLIGHT_LOW_CARD:"ico_highlight",IC_AUTO_MOVE_FOUNDATION:"ic_auto_move_foundation",IC_RELAX:"ic_relax",IC_SUIT_SIZE:"ico_suit_size",IC_VIBRATION:"vibration",IC_HINT_SETTINGS:"ic_hint_settings",IC_LEFT_HAND_SETTINGS:"ic_lefthand_settings",IC_DRAW_MODE:"ic_draw_mode",IC_AUTO_COMPLETE:"ic_auto_complete",ADD_SQUARE:"add-square",TIMER:"stats_timer",MEDAL_STAR_SHADOW:"medal-star-shadow",MEDAL_STAR:"medal-star",NO_TOURNAMENT:"no-tournament",IC_BG_OFF:"avatar/avatar_bg",ARROW_SWAP_HORIZONTAL:"arrow-swap-horizontal",AVATAR_CROWN:"avatar_crown",WIN_BANNER:"win_banner",LOSE_BANNER:"lose_banner",FLAG:{LEFT:"flags/left/",RIGHT:"flags/right/"},STRING:{LEFT:"string/left",RIGHT:"string/right"},SPADE:"spade",HEART:"heart",HAND:"hand",LOADING_CLUB:"loading_club",LOADING_DIAMOND:"loading_diamond",LOADING_HEART:"loading_heart",LOADING_SPADE:"loading_spade",BOTTOM_LOGO:"bottom_logo",FOOTER_BG:"footer/rectangle",FOOTER_BG_LANDSCAPE:"footer/rectangle_desktop",STOCK_BG:"stock-bg",AVATAR:{BG:"avatar/avatar_bg",BG_2:"avatar/avatar_bg_2",BLUE:"avatar/avatar_blue",ELLIPSE_BG:"avatar/avatar_ellipse_bg",ORANGE:"avatar/avatar_orange",RECTANGLE:"avatar/rectangle",RESULT_BG:"avatar/avatar_result_bg",LEADER_NORMAL:"avatar/leader_normal",LEADER_YOU:"avatar/leader_you",LEADER_RESULT_NORMAL:"avatar/leader_result_normal",LEADER_RESULT_YOU:"avatar/leader_result_you",LEADER_BG:"avatar/leader_bg",LEADER_RESULT_BG:"avatar/avatar_result_bg"},STEP:{IN_PROCESS_STEP:"steps/in_process_step",COMING_STEP:"steps/coming_step"},MISSION_MEDAL:"mission_medal",IC_VERIFY:"ic_verify",MISSION_HEADER_COMPLETED:"mission_header_completed",MISSION_HEADER_FAILED:"mission_header_failed",SETTINGS_TEXT:{TITLE:"text/text_settings_title",THEME:"text/text_theme",STATISTIC:"text/text_statistic",PLAY_MODE:"text/text_play_mode",PERSONAL:"text/text_personalization"},HEADER:{BG_HEADER:"header/bg_header",IC_FREECELL:"header/ico_freecell",IC_KLONDIKE:"header/ico_Klondike",IC_SPIDER:"header/ico_spider"},NEW_GAME_POPUP:{BACKGROUND:"new_game/background",LINE:"new_game/line",IC_NEW_GAME:"new_game/icon_new_game",IC_REPLAY:"new_game/icon_replay",IC_WITH_FRIEND:"new_game/icon_with_friend",TEXT_NEW_DEAL:"new_game/new_deal",TEXT_REPLAY:"new_game/replay",TEXT_WITH_FRIEND:"new_game/with_friend",IC_JOURNEY:"new_game/ic_journey"},BTN_NEW_GAME:"btn-new game",BTN_SHARE:"btn-share",BTN_AUTO_COMPLETE:"btn-auto-complete",VICTORY:"victory",SUB_RIBBON:"sub-ribbon",WIN_RIBBON:"win-ribbon",DRAW_RIBBON:"draw-ribbon",IC_VS:"vs",IC_VS_BIG:"vs_big",AVATAR_BLUE:"avatar_blue",AVATAR_ORANGE:"avatar_orange",AVATAR_WIN:"avatar_win",AVATAR_SHINE:"avatar_shine",IC_BEST_TIME:"ico-besttime",IC_NEW:"ico-new",BUTTON_DONE:"settings/btn_done",BUTTON_BACK:"settings/btn_back",BTN_NEXT:"btn-NEXT",GAME_TYPE_BG:"game_type_bg",BG_SETTINGS_BOTTOM:"settings/bottom_bar_settings",BG_GAME_STAT_TOP:"settings/game_stat_top",BG_SETTING_SEPERATE_NOTE:"settings/bar_title",SETTING_LINE_DIVIDE:"settings/setting_line_divine",BG_SELECT_ACTIVE_2:"settings/bg_select_active2",BG_SELECT_ACTIVE_3:"settings/bg_select_active3",BTN_BACKGROUND_INACTIVE:"settings/btn_background_inactive",BG_SELECT_THEME:"settings/bg_select_theme",BG_PROGRESS:"settings/bg_progress",BG_PROGRESS_LOSE:"settings/bg_progress_lose",BG_PROGRESS_WIN:"settings/bg_progress_win",BG_NOTIFICATION:"settings/frame_alert",SETTINGS_POPUP:"settings/popup",SCROLLER:"settings/scroller",HOW_TO_PLAY:{BACKGROUND:"how-to-play/background",IC_NEXT:"how-to-play/ic_next",IC_X:"how-to-play/ic_x",PAGE_ACTIVE:"how-to-play/page_active",PAGE_INACTIVE:"how-to-play/page_inactive",TAG_FREECELL:"how-to-play/tag_freecell",TAG_KLONDIKE:"how-to-play/tag_klondike",TAG_SPIDER:"how-to-play/tag_spider",IC_FREECELL:"how-to-play/ic_freecell",IC_KLONDIKE:"how-to-play/ic_klondike",IC_SPIDER:"how-to-play/ic_spider"},TOURNAMENT:{HEADER:"tournament/top/tournament_top",BUTTON_ADD:"tournament/top/btn_add",BG_INFO:"bg_info",BG_LANDSCAPE:"bg_landscape",BLOCK_BACKGROUND:"tournament/board",IC_STAR:"tournament/icons/star",IC_1ST:"tournament/icons/badge-1st",IC_2ND:"tournament/icons/badge-2nd",IC_3RD:"tournament/icons/badge-3rd",IC_NORMAL:"tournament/icons/badge-normal",IC_BACK:"tournament/icons/back",IC_KLONDIKE:"tournament/icons/circle_klondike",IC_FREECELL:"tournament/icons/circle_freecell",IC_SPIDER:"tournament/icons/circle_spider",IC_USER:"tournament/icons/ic_invite_friend",RECTANGLE:"tournament/icons/rectangle",IC_QUESTION:"tournament/icons/ic_tour_info",BUTTON_INFO:"tournament/icons/btn_tour_info",IC_CLOCK:"tournament/icons/ic_best_time",TIME_BACKGROUND:"tournament/duration",RIBBON:"tournament/ribbon",JOIN_BUTTON:"tournament/btn_orange",IC_CUP:"tournament/icons/ic-tour",IC_1ST_BG:"tournament/result/badge-1st",IC_2ND_BG:"tournament/result/badge-2nd",IC_3RD_BG:"tournament/result/badge-3rd",IC_NORMAL_BIG:"tournament/result/badge-normal",BUTTON_REPLAY:"tournament/result/btn-replay",IC_REPLAY:"tournament/result/ico_replay",RESULT_TIME_BACKGROUND:"tournament/result/duration_bg",POPUP:"tournament_popup",RESULT_RIBBON:"tournament/result/ribbon",IC_PLAY:"tournament/result/ic_play",LINE_DIVIDE:"tournament/result/line_divide",BUTTON_CREATE:"tournament/btn-create-tournament",BADGE_1ST:"tournament/awards/badge_1st",BADGE_2ND:"tournament/awards/badge_2nd",BADGE_3RD:"tournament/awards/badge_3rd",AWARDS_BOARD:"tournament/awards/board",IC_HINT_GLOW:"tournament/awards/ic_hint_glow",IC_UNDO_GLOW:"tournament/awards/ic_undo_glow"},HINT:"hint",MENU:{BACKGROUND:"menu",BG_MENU:"menu_screen/bg_menu",BTN_EXPAND:"menu_screen/btn_expand",DIVIDER:"menu_screen/divider",ICO_DAILY_CHALLENGE:"menu_screen/ico_daily_challenge",ICO_FREECELL_RED:"menu_screen/ico_freecell_red",ICO_FREECELL:"menu_screen/ico_freecell",ICO_JOURNEY:"menu_screen/ico_journey",ICO_KLONDIKE_BLUE:"menu_screen/ico_klondike_blue",ICO_KLONDIKE:"menu_screen/ico_klondike",ICO_OFFLINE:"menu_screen/ico_offline",ICO_ONLINE:"menu_screen/ico_online",ICO_RATE:"menu_screen/ico_rate",ICO_SETTINGS:"menu_screen/ico_settings",ICO_SPIDER_PURPLE:"menu_screen/ico_spider_purple",ICO_SPIDER:"menu_screen/ico_spider",ICO_STATS:"menu_screen/ico_stats",ICO_SUPPORT:"menu_screen/ico_support",ICO_THEME:"menu_screen/ico_theme",ICO_TOUR:"menu_screen/ico_tour",LINE_DIVIDE:"menu_screen/line_divide",LINE:"menu_screen/line",SCROLLER:"menu_screen/scroller_white"},RESULT_SCREEN:{ICO_FREECELL:"result_screen/ico_freecell",ICO_KLONDIKE:"result_screen/ico_klondike",ICO_SPIDER:"result_screen/ico_spider",POPUP:"result_popup",RIBBON_FREECELL:"result_screen/ribbon_freecell",RIBBON_KLONDIKE:"result_screen/ribbon_klondike",RIBBON_SPIDER:"result_screen/ribbon_spider",A_CLUB:"result_screen/A_club",A_DIAMOND:"result_screen/A_diamond",A_HEART:"result_screen/A_heart",A_SPADE:"result_screen/A_spade"},PLAY_WITH_FRIEND:{RIBBON_DRAW:"play_with_friend/ribbon_draw",RIBBON_WIN:"play_with_friend/ribbon_win"},TOP_UI:{BG_TOP_UI:"top_ui/bg_top_UI"}}},GAMEPLAY_DEFAULT_LANDSCAPE:{KEY:"gameplay-default-landscape",TEXTURE:"./assets/textures/"+o+"x/gameplay-default-landscape-8bit.png",JSON:"./assets/textures/"+o+"x/gameplay-default-landscape-8bit.json",FRAME:{BLANK:"blank",STATS_CROWN:"crown",STATS_STAR:"star",STATS_CUP:"stats_cup",STATS_MEDAL_START:"stats_medal_star",STATS_TIMER:"stats_timer",STATS_FLASH:"flash",MENU_STATISTIC:"menu_statistics",CUP:"cup",IC_LEFT_HAND:"ic_left_hand",IC_LANGUAGE:"ic_language",IC_THEME_SELECT:"ic_theme_select",IC_DONE:"ic_done",IC_BACK:"ic_back",IC_SETTINGS:"footer/ico-settings",IC_STATISTICS_FOOTER:"footer/ico-statistics",IC_PLAY:"footer/ico-new",IC_HINT:"footer/ico-hint",IC_UNDO:"footer/ico-undo",IC_TOURNAMENTS:"footer/ico-tour",COUNTER:"footer/counter",IC_ADS:"footer/ad",FOUNDATION_SLOT:"stack",IC_FOUNDATION_2:"stack_2",IC_SLOT:"card_slot",IC_SHARE:"ic_share",IC_THEME:"ic_theme",IC_INVITE:"ic_invite",IC_FLAG:"flag",IC_SOUND:"ic_sound",IC_MOVE:"ic_move",IC_STATISTICS:"ic_statistics",IC_NEXT:"ic_next",IC_GROUP:"ico_group",IC_FOLLOW:"ico_follow",IC_BOOK:"ic_book",IC_REPLAY:"ic_replay",IC_RECYCLE:"ic_recycle",IC_NEXT_LV:"ic_next_lv",IC_VIBRATION:"vibration",IC_HINT_SETTINGS:"ic_hint_settings",IC_DRAW_MODE:"ic_draw_mode",IC_AUTO_COMPLETE:"ic_auto_complete",ADD_SQUARE:"add-square",TIMER:"timer",MEDAL_STAR_SHADOW:"medal-star-shadow",MEDAL_STAR:"medal-star",NO_TOURNAMENT:"no-tournament",IC_BG_OFF:"avatar/avatar_bg",ARROW_SWAP_HORIZONTAL:"arrow-swap-horizontal",AVATAR_CROWN:"avatar_crown",WIN_BANNER:"win_banner",LOSE_BANNER:"lose_banner",FLAG:{LEFT:"flags/left/",RIGHT:"flags/right/"},STRING:{LEFT:"string/left",RIGHT:"string/right"},SPADE:"spade",HEART:"heart",HAND:"hand",LOADING_CLUB:"loading_club",LOADING_DIAMOND:"loading_diamond",LOADING_HEART:"loading_heart",LOADING_SPADE:"loading_spade",BOTTOM_BG:"bottom_bg",BOTTOM_LOGO:"bottom_logo",FOOTER_BG:"footer/rectangle",STOCK_BG:"stock-bg",AVATAR:{BG:"avatar/avatar_bg",BLUE:"avatar/avatar_blue",ELLIPSE_BG:"avatar/avatar_ellipse_bg",ORANGE:"avatar/avatar_orange",RECTANGLE:"avatar/rectangle",LEADER_NORMAL:"avatar/leader_normal",LEADER_YOU:"avatar/leader_you",LEADER_BG:"avatar/leader_bg"},STEP:{IN_PROCESS_STEP:"steps/in_process_step",COMING_STEP:"steps/coming_step"},MISSION_MEDAL:"mission_medal",IC_VERIFY:"ic_verify",MISSION_HEADER_COMPLETED:"mission_header_completed",MISSION_HEADER_FAILED:"mission_header_failed",SETTINGS_TEXT:{TITLE:"text/text_settings_title",THEME:"text/text_theme",STATISTIC:"text/text_statistic",PLAY_MODE:"text/text_play_mode",PERSONAL:"text/text_personalization"},NEW_GAME_POPUP:{BACKGROUND:"new_game/background",LINE:"new_game/line",IC_NEW_GAME:"new_game/icon_new_game",IC_REPLAY:"new_game/icon_replay",IC_WITH_FRIEND:"new_game/icon_with_friend",TEXT_NEW_DEAL:"new_game/new_deal",TEXT_REPLAY:"new_game/replay",TEXT_WITH_FRIEND:"new_game/with_friend",IC_JOURNEY:"new_game/ic_journey"},RESTART_POPUP:{BACKGROUND:"restart/bg",BUTTON_BACK:"restart/btn-back",BUTTON_OK:"restart/btn-ok",IC_BACK:"restart/ic_back",IC_OK:"restart/ic_done",TEXT_TITLE:"restart/title",TEXT_DESCRIPTION:"restart/text"},BTN_NEW_GAME:"btn-new game",BTN_SHARE:"btn-share",BTN_AUTO_COMPLETE:"btn-auto-complete",VICTORY:"victory",SUB_RIBBON:"sub-ribbon",WIN_RIBBON:"win-ribbon",DRAW_RIBBON:"draw-ribbon",IC_VS:"vs",IC_BIG:"vs_big",AVATAR_BLUE:"avatar_blue",AVATAR_ORANGE:"avatar_orange",AVATAR_WIN:"avatar_win",AVATAR_SHINE:"avatar_shine",IC_BEST_TIME:"ico-besttime",IC_NEW:"ico-new",IC_CLOSE:"close",BUTTON_DONE:"settings/btn_done",BUTTON_BACK:"settings/btn_back",BTN_NEXT:"btn-NEXT",SCROLLER:"scroller",BG_SETTINGS_BOTTOM:"settings/bottom_bar_settings",BG_SETTINGS_TOP:"settings/top_bg",BG_SETTING_SEPERATE_NOTE:"settings/bar_title",BG_TOP_LARGE:"settings/top_bg_large",BG_SETTINGS:"settings/bg-settings",BG_SELECT_ACTIVE_2:"settings/bg_select_active2",BG_SELECT_ACTIVE_3:"settings/bg_select_active3",BTN_BACKGROUND_INACTIVE:"settings/btn_background_inactive",BG_SELECT_THEME:"settings/bg_select_theme",BG_PROGRESS:"settings/bg_progress",BG_PROGRESS_LOSE:"settings/bg_progress_lose",BG_PROGRESS_WIN:"settings/bg_progress_win",BG_NOTIFICATION:"settings/frame_alert",HOW_TO_PLAY:{BACKGROUND:"how-to-play/background",IC_NEXT:"how-to-play/ic_next",IC_X:"how-to-play/ic_x",BUTTON_NEXT:"how-to-play/next_btn",PAGE_ACTIVE:"how-to-play/page_active",PAGE_INACTIVE:"how-to-play/page_inactive"},TOURNAMENT:{HEADER:"tournament/top_bg",BACKGROUND:"tournament/background",BOTTOM_BAR:"tournament/bar_bottom",BG_INFO:"tournament/bg_info",IC_STAR:"tournament/icons/star",IC_1ST:"tournament/icons/badge-1st",IC_2ND:"tournament/icons/badge-2nd",IC_3RD:"tournament/icons/badge-3rd",IC_NORMAL:"tournament/icons/badge-normal",IC_BACK:"tournament/icons/back",BUTTON_INFO:"tournament/icons/btn_tour_info",IC_CLOCK:"tournament/icons/ic_best_time",TIME_BACKGROUND:"tournament/duration",JOIN_BUTTON:"tournament/btn_orange",IC_CUP:"tournament/icons/ic-tour",IC_1ST_BG:"tournament/result/badge-1st",IC_2ND_BG:"tournament/result/badge-2nd",IC_3RD_BG:"tournament/result/badge-3rd",IC_NORMAL_BIG:"tournament/result/badge-normal",BUTTON_REPLAY:"tournament/result/btn-replay",IC_REPLAY:"tournament/result/ico_replay",BACK_BUTTON:"tournament/back_btn",BLOCK_BACKGROUND:"tournament/shadow",BUTTON_CREATE:"tournament/btn-create-tournament"},RESULT:{BACKGROUND_SOLO:"result/bg-result-solo",BACKGROUND_FRIEND:"result/bg-result-friend",BOTTOM_BAR:"result/bar_bottom"}}},JOURNEY:{KEY:"journey",TEXTURE:"./assets/textures/"+o+"x/journey.png",JSON:"./assets/textures/"+o+"x/journey.json",FRAME:{BLANK:"blank",AWESOME_SCREEN:{LB_FRAME:"awesome-screen/frame",BTN_GO_TO_MAP:"awesome-screen/btn_go_to_map",IC_GO_TO_MAP:"awesome-screen/ic_go_to_map",TITLE:"awesome-screen/title",RECTANGLE_TITLE:"awesome-screen/rectangle_title",LINE:"awesome-screen/line"},MISSION_BAR:{BACKGROUND:"mission-bar/bg",LINE:"mission-bar/line",LINE_LANDSCAPE:"mission-bar/line_landscape",CHECKER:"mission-bar/checker"},PATH_Y1:"path y1",PATH_Y2:"path y2",PATH_Y3:"path y3",PATH_Y0:"path y0",PATH_G1:"path g1",PATH_G2:"path g2",PATH_G3:"path g3",PATH_G0:"path g0",LV_ACTIVE_FX:"lv-active_fx",LV_ACTIVE:"lv-active",LV_PASSED:"lv-passed",LV_PASSED_BG:"lv-passed_bg1",LV_TWO_CARDS_PASS:"lv-special",LV_TWO_CARDS_PASS_LOCK:"lv-special_2",ICO_SPECIAL_LOCKED:"ico-special lv locked",ICO_LOCK:"ico-lock",IC_SETTINGS:"btn-setting",BTN_PLAY:"btn-play",ICN_PLAY:"icn_play",BG_BAR_TOP:"bars_02_top_bar",BG_BAR_BOT:"bars_02_bot_bar",WELCOME_FRAME:"welcome_frame",SELECT_GAME_MODE:{BOARD:"select-game-mode/board",FREECELL:"select-game-mode/freecell",KLONDIKE:"select-game-mode/klondike",POPUP:"select-game-mode/popup",SPIDER:"select-game-mode/spider"}}},JOURNEY_LANDSCAPE:{KEY:"journey",TEXTURE:"./assets/textures/"+o+"x/journey-landscape.png",JSON:"./assets/textures/"+o+"x/journey-landscape.json",FRAME:{BLANK:"blank",AWESOME_SCREEN:{LB_FRAME:"awesome-screen/frame",TITLE:"awesome-screen/title",RECTANGLE_TITLE:"awesome-screen/rectangle_title",BOT_BAR:"awesome-screen/bot_bar",IC_GO_TO_MAP:"awesome-screen/ic_go_to_map",LINE:"awesome-screen/line"},MISSION_BAR:{LINE:"mission-bar/line",CHECKER:"mission-bar/checker"},BACKGROUND:"frame_big",PATH_Y1:"path y1",PATH_Y2:"path y2",PATH_Y3:"path y3",PATH_Y0:"path y0",PATH_G1:"path g1",PATH_G2:"path g2",PATH_G3:"path g3",PATH_G0:"path g0",LV_ACTIVE_FX:"lv-active_fx",LV_ACTIVE:"lv-active",LV_PASSED:"lv-passed",LV_PASSED_BG:"lv-passed_bg1",LV_TWO_CARDS_ACTIVE:"lv-special",LV_TWO_CARDS_LOOKED:"card_lock",LV_TWO_CARDS_PASSED:"lv-special_2",ICO_SPECIAL_LOCKED:"ico-special lv locked",ICO_SPECIAL_ACTIVE:"K_unlock",ICO_SPECIAL_PASSED:"K_tick",ICO_LOCKED:"ico-lock",BTN_PLAY:"btn-play",ICN_PLAY:"icn_play",BG_BAR_TOP:"bars_02_top_bar"}},CARD_BACK:{KEY:"card-back",TEXTURE:"./assets/textures/"+c+"/card-back.png",JSON:"./assets/textures/"+c+"/card-back.json"},HOW_TO_PLAY:{getKey:function(e){return"how-to-play-"+(0,a.MU)(e)},getTexture:function(e){return"./assets/textures/"+o+"x/how-to-play-"+(0,a.MU)(e)+".jpg"},getJson:function(e){return"./assets/textures/"+o+"x/how-to-play-"+(0,a.MU)(e)+".json"}},HOW_TO_PLAY_LANDSCAPE:{KEY:"how-to-play",TEXTURE:"./assets/textures/"+o+"x/how-to-play-landscape.jpg",JSON:"./assets/textures/"+o+"x/how-to-play-landscape.json"},THEME_PREVIEW:{KEY:"theme-preview",TEXTURE:"./assets/textures/"+o+"x/theme-preview.png",JSON:"./assets/textures/"+o+"x/theme-preview.json"},DEFAULT:{KEY:"gameplay-default",TEXTURE:"./assets/textures/"+o+"x/default-resources.png",JSON:"./assets/textures/"+o+"x/default-resources.json",FRAME:{LINE:"line",BLANK:"blank",LOGO:"title-logo",GEMS:"title-gems",TEXT_LOADING:"loading",BOTTOM_BG:"bottom-bg",BOTTOM_LINE:"bottom-line",TOP_BG_LONG:"top-bg-long",BLOCK_LEADER_BLUE:"block-blue-bg",BLOCK_LEADER_YELLOW:"block-yellow-bg",PRELOADER:"preloader/dual-ring",LEADERBOARD_TAB_ON:"leaderboards/tab-on",LEADERBOARD_TAB_OFF:"leaderboards/tab-off",LEADERBOARD_BG_DARK:"leaderboards/bg-dark",LEADERBOARD_BG_LIGHT:"leaderboards/bg-light",MISSION_ICON_BG:"dailyMission/bg-icon",MISSION_BLOCK_BG:"dailyMission/bg-block",MISSION_CLOCK_BG:"dailyMission/bg-clock",DAILY_DAY_BG:"dailyRewards/bg",DAILY_DAY_LABEL:"dailyRewards/label",DAILY_DAY_BG_WAIT:"dailyRewards/bg-wait",DAILY_DAY_BG_OPEN:"dailyRewards/bg-open",DAILY_DAY_TITLE_GREY:"dailyRewards/title-grey",DAILY_DAY_TITLE_GREEN:"dailyRewards/title-green",DAILY_DAY_TITLE_ORANGE:"dailyRewards/title-orange",RIBBON_LONG:"ribbon/long",RIBBON_FULL:"ribbon/long-full",RIBBON_SHORT:"ribbon/short",RIBBON_SMALL:"ribbon/small",AVATAR_BG_BLUE:"avatar/blue-bg",AVATAR_FRAME_BLUE:"avatar/blue-frame",AVATAR_BG_BLUE_SMALL:"avatar/blue-bg-small",AVATAR_FRAME_BLUE_SMALL:"avatar/blue-frame-small",AVATAR_BG_BLUE_BIG:"avatar/blue-bg-big",AVATAR_FRAME_BLUE_BIG:"avatar/blue-frame-big",AVATAR_BG_YELLOW:"avatar/yellow-bg",AVATAR_FRAME_YELLOW:"avatar/yellow-frame",AVATAR_BG_YELLOW_SMALL:"avatar/yellow-bg-small",AVATAR_FRAME_YELLOW_SMALL:"avatar/yellow-frame-small",AVATAR_BG_YELLOW_BIG:"avatar/yellow-bg-big",AVATAR_FRAME_YELLOW_BIG:"avatar/yellow-frame-big",THE_CAT:"logo/cat",SAD_CAT:"logo/sad-cat",LOGO_GIFT:"logo/gift",LOGO_GIFT_ADS:"logo/gift-ad",LOGO_GIFT_WHITE:"logo/gift_white",LOGO_DIAMONDS_LIGHT_2:"logo/diamonds-light-2",LOGO_DIAMONDS_LIGHT_3:"logo/diamonds-light-3",LOGO_DIAMONDS_LIGHT_4:"logo/diamonds-light-4",LOGO_DIAMONDS_LIGHT_5:"logo/diamonds-light-5",LOGO_DIAMONDS_LIGHT_6:"logo/diamonds-light-6",LOGO_ADS_DIAMONDS:"logo/ads-diamonds",POPUP_TOP_LEFT:"popup/top-left",POPUP_TOP_MID:"popup/top-middle",POPUP_TOP_RIGHT:"popup/top-right",POPUP_MID_LEFT:"popup/middle-left",POPUP_MID_MID:"popup/middle-middle",POPUP_MID_RIGHT:"popup/middle-right",POPUP_BOTTOM_LEFT:"popup/bottom-left",POPUP_BOTTOM_MID:"popup/bottom-middle",POPUP_BOTTOM_RIGHT:"popup/bottom-right",PROGRESS_BG_LEFT:"progress/bg-left",PROGRESS_BG_MID:"progress/bg-mid",PROGRESS_BG_RIGHT:"progress/bg-right",PROGRESS_BAR_LEFT:"progress/bar-left",PROGRESS_BAR_MID:"progress/bar-mid",PROGRESS_BAR_RIGHT:"progress/bar-right",ICON_DOT:"icons/dot",ICON_CUP:"icons/cup",ICON_GIFT:"icons/gift",ICON_PLUS:"icons/plus",ICON_RANK:"icons/rank",ICON_FLAG:"icons/flag",ICON_CLOCK:"icons/clock",ICON_DAILY:"icons/daily",ICON_ADS:"icons/flat-ad",ICON_CHECK:"icons/check",ICON_CANCEL:"icons/cancel",ICON_SETTING:"icons/setting",ICON_RESUME:"icons/flat-resume",ICON_VIB_ON:"icons/flat-vib-on",ICON_VIB_OFF:"icons/flat-vib-off",ICON_MUSIC_ON:"icons/flat-music-on",ICON_MUSIC_OFF:"icons/flat-music-off",ICON_SOUND_ON:"icons/flat-sound-on",ICON_SOUND_OFF:"icons/flat-sound-off",ICON_FLAT_HOME:"icons/flat-home",ICON_FLAT_RANK:"icons/flat-rank",ICON_FLAT_SHARE:"icons/flat-share",ICON_CROWN:"icons/crown",ICON_CUP_MINI:"icons/cup-mini",ICON_CUP_GOLD:"icons/cup-gold",ICON_CUP_SILVER:"icons/cup-silver",ICON_CUP_COPPER:"icons/cup-bronze",ICON_DIAMOND:"icons/diamond",ICON_DIAMOND_SMALL:"icons/diamond-small",ICON_DIAMOND_GREY:"icons/diamond-grey",ICON_DIAMOND_LIGHT:"icons/diamond-light",BUTTON_CLOSE:"buttons/close",BUTTON_RED_LONG:"buttons/red-long",BUTTON_YELLOW_LONG:"buttons/yellow-long",BUTTON_YELLOW_CIRCLE:"buttons/yellow-circle",BUTTON_BLUE:"buttons/blue",BUTTON_BLUE_SHORT:"buttons/blue-short",BUTTON_BLUE_LONG:"buttons/blue-long",BUTTON_BLUE_CIRCLE:"buttons/blue-circle",BUTTON_GREEN:"buttons/green",BUTTON_GREEN_SHORT:"buttons/green-short",BUTTON_GREEN_LONG:"buttons/green-long",BUTTON_GREEN_MINOR:"buttons/green-minor",BUTTON_GREEN_CIRCLE:"buttons/green-circle",BUTTON_GREEN_MINOR_MINI:"buttons/green-minor-mini",NO_THANK_TEXT:"texts/no-thank",HORIZONTAL_LUCKY_BAR:"lucky-bar/horizontal-lucky-bar",HORIZONTAL_ARROW:"lucky-bar/horizontal-arrow",ARC_LUCKY_BAR:"lucky-bar/arc-lucky-bar",ARC_ARROW:"lucky-bar/arc-arrow"}},EFFECTS:{KEY:"effects-resources",PATH:"./assets/textures/"+o+"x/",JSON:"./assets/textures/"+o+"x/effects-resources.json",FRAME:{BLANK:"blank",FX_COMET:"comet",FX_SPARK:"spark",FX_CIRCLE:"circle",FX_CIRCLE_LIGHT:"circle-light",FX_GLOW_LIGHT:"glow-light",FX_GLOW_SMALL:"glow-small",FX_STAR_WHITE:"star-white",FX_STAR_YELLOW:"star-yellow",TEXT_COOL:"texts/cool",TEXT_GOOD:"texts/good",TEXT_GREAT:"texts/great",TEXT_EXCELLENT:"texts/excellent",TEXT_CONGRATULATION:"texts/congratulation",FX_CONFETTI_SMALL_1:"confetti/small-1",FX_CONFETTI_SMALL_2:"confetti/small-2",FX_CONFETTI_SMALL_3:"confetti/small-3",FX_CONFETTI_SMALL_4:"confetti/small-4",FX_CONFETTI_HEXAGON:"confetti/hexagon-",FX_FIREWORKS_SMALL:"fireworks/small",FX_FIREWORKS_BIG_0:"fireworks/big-explosive-0",FX_FIREWORKS_BIG_1:"fireworks/big-explosive-1",FX_FIREWORKS_SOAR_LINE:"fireworks/soar-line",FX_FIREWORKS_SOAR_CIRCLE:"fireworks/soar-circle",FX_HIGHLIGHT:"fx-items/highlight",FX_PAINT_EXPLOSIVE:"fx-items/paint-explosive-",FX_RED_EXPLOSIVE:"fx-gems/red-explosive-",FX_BLUE_EXPLOSIVE:"fx-gems/blue-explosive-",FX_PINK_EXPLOSIVE:"fx-gems/pink-explosive-",FX_GREEN_EXPLOSIVE:"fx-gems/green-explosive-",FX_YELLOW_EXPLOSIVE:"fx-gems/yellow-explosive-",FX_COLORFUL:"fx-gems/colorful-",FX_COLOR_CHANGE:"fx-gems/color-change-",FX_FREEZE_EXPLOSIVE:"fx-gems/freeze-explosive-",FX_COLORFUL_EXPLOSIVE:"fx-gems/colorful-explosive-",ANIMATION_STAR_X:"star-x/star-",ANIMATION_STAR_Y:"star-y/star-",FX_CONFETTI_RIBBON:"ribbon/ribbon",PREFIX_ANIMATION_RIBBON_CONFETTI_A:"ribbon/falling-confetti/confetti-a/confetti-a-",PREFIX_ANIMATION_RIBBON_CONFETTI_B:"ribbon/falling-confetti/confetti-b/confetti-b-",PREFIX_ANIMATION_RIBBON_CONFETTI_C:"ribbon/falling-confetti/confetti-c/confetti-c-",PREFIX_ANIMATION_RIBBON_CONFETTI_D:"ribbon/falling-confetti/confetti-d/confetti-d-"}},TOURNAMENT_BANNER:{KEY:"tournament-banner",TEXTURE:"./assets/textures/"+o+"x/tournament-banner.jpg",JSON:"./assets/textures/"+o+"x/tournament-banner.json",FRAME:{getBanner:function(e){return"banner-"+((void 0==e?0:e%r.Wg.NUMBER_OF_BANNER)+1)}}},ANIMATION_SCENE:{KEY:"effects-resources",PATH:"./assets/textures/"+o+"x/",JSON:"./assets/textures/"+o+"x/animation-scene-resources.json",FRAME:{BLANK:"blank",COIN:"coins/coin",COIN_SMALL:"coins/coin-small",COIN_SMALL_GREY:"coins/coin-small-grey",ANIMATION_STAR_X:"star-x/star-",ANIMATION_STAR_Y:"star-y/star-",FX_SPARK_YELLOW:"yellow-spark",FX_CONFETTI_RIBBON:"ribbon/ribbon",PREFIX_ANIMATION_RIBBON_CONFETTI_A:"ribbon/falling-confetti/confetti-a/confetti-a-",PREFIX_ANIMATION_RIBBON_CONFETTI_B:"ribbon/falling-confetti/confetti-b/confetti-b-",PREFIX_ANIMATION_RIBBON_CONFETTI_C:"ribbon/falling-confetti/confetti-c/confetti-c-",PREFIX_ANIMATION_RIBBON_CONFETTI_D:"ribbon/falling-confetti/confetti-d/confetti-d-",FX_CONFETTI_SMALL_1:"confetti/small-1",FX_CONFETTI_SMALL_2:"confetti/small-2",FX_CONFETTI_SMALL_3:"confetti/small-3",FX_CONFETTI_SMALL_4:"confetti/small-4",FX_CONFETTI_HEXAGON:"confetti/hexagon-"}},GAMEPLAY:{KEY:"gameplay-resources",TEXTURE:"./assets/textures/"+o+"x/gameplay-resources.png",JSON:"./assets/textures/"+o+"x/gameplay-resources.json",FRAME:{BLANK:"blank",BIG_TOP:"bg-top",BIG_PLAYER:"bg-player",BIG_CIRCLE:"big-circle",BUTTON_PLUS:"buttons/plus",BUTTON_SETTING:"buttons/setting",AVATAR_BLUE_BG:"avatars/bg-blue-mini",AVATAR_BLUE_FRAME:"avatars/frame-blue-mini",PROGRESS_BG_LEFT:"progress/bg-left",PROGRESS_BG_MID:"progress/bg-mid",PROGRESS_BG_RIGHT:"progress/bg-right",PROGRESS_BAR_LEFT:"progress/bar-left",PROGRESS_BAR_MID:"progress/bar-mid",PROGRESS_BAR_RIGHT:"progress/bar-right",ITEM_GIFT:"items/gift",ITEM_PAINT:"items/paint",ITEM_HAMMER:"items/hammer",ITEM_SHUFFLE:"items/shuffle",ITEM_BG_COIN:"items/bg-coin",ITEM_BG_ITEM:"items/bg-item",ICON_PLUS:"icons/plus",ICON_CHECK:"icons/check",ICON_CLOCK:"icons/clock",ICON_DIAMOND:"icons/diamond",ICON_DIAMOND_SMALL:"icons/diamond-small",ICON_CUP_SUPERMINI:"icons/cup-supermini",TILE_RED:"gems/red",TILE_BLUE:"gems/blue",TILE_PINK:"gems/pink",TILE_GREEN:"gems/green",TILE_YELLOW:"gems/yellow",TILE_FREEZE:"gems/freeze",TILE_COLORFUL:"gems/colorful",TILE_COLOR_CHANGE:"gems/change"}},DEMO_SPINE:{KEY:"demo-spine",jsonPATH:"./assets/spines/demo/demo.json",atlasPATH:"./assets/spines/demo/demo.atlas"},LANGUAGES:{KEY:"languages",TEXTURE:"./assets/textures/"+o+"x/languages.png",JSON:"./assets/textures/"+o+"x/languages.json",FRAME:{CHECK:"check",UNCHECK:"uncheck"}}};GameCore.Utils.Valid.isDebugger()&&(h.EFFECTS.FRAME=(0,i.Z)({},h.ANIMATION_SCENE.FRAME,h.EFFECTS.FRAME)),t.Z=h},647:function(e,t,n){"use strict";n.d(t,{C:function(){return a},K:function(){return s}});var i=n(24),a={BOOT_SCENE:"BOOT_SCENE",LOAD_SCENE:"LOAD_SCENE",GAME_SCENE:"GAME_SCENE",GLOBAL_SCENE:"GLOBAL_SCENE",DASHBOARD_SCENE:"DASHBOARD_SCENE",GAME_OVER_SCENE:"GAME_OVER_SCENE",LEADERBOARD_SCENE:"LEADERBOARD_SCENE",RESULT_MATCH_SCENE:"RESULT_MATCH_SCENE",TEST_SCENE:"TEST_SCENE",ANIMATIONS_SCENE:"ANIMATIONS_SCENE"},s={SWITCH:n.n(i)()("SWITCH")}},650:function(e,t,n){"use strict";n.d(t,{o4:function(){return i},Ks:function(){return a}});var i={PAUSE_SCREEN:"PAUSE_SCREEN",NOTIFY_SCREEN:"NOTIFY_SCREEN",REWARD_SCREEN:"REWARD_SCREEN",RESCUE_SCREEN:"RESCUE_SCREEN",SETTINGS_SCREEN:"SETTINGS_SCREEN",BEST_SCORE_SCREEN:"BEST_SCORE_SCREEN",DAILY_REWARD_SCREEN:"DAILY_REWARD_SCREEN",DAILY_MISSIONS_SCREEN:"DAILY_MISSIONS_SCREEN",LUCKY_REWARD_SCREEN:"LUCKY_REWARD_SCREEN",OUT_OF_MOVES_SCREEN:"OUT_OF_MOVES_SCREEN",VICTORY_SCREEN:"VICTORY_SCREEN",PLAY_SCREEN:"PLAY_SCREEN",GAME_STATS_SCREEN:"GAME_STATS_SCREEN",THEME_SCREEN:"THEME_SCREEN",HOW_TO_PLAY_SCREEN:"HOW_TO_PLAY_SCREEN",NOTIFICATION_SCREEN:"NOTIFICATION_SCREEN",TOURNAMENTS_SCREEN:"TOURNAMENTS_SCREEN",PLAY_WITH_FRIEND_GAME_OVER_SCREEN:"PLAY_WITH_FRIEND_GAME_OVER_SCREEN",TOURNAMENTS_RESULT_SCREEN:"TOURNAMENT_RESULT_SCREEN",JOURNEY_SCREEN:"JOURNEY_SCREEN",MISSION_WELCOME_SCREEN:"MISSION_WELCOME_SCREEN",MISSION_COMPLETED_SCREEN:"MISSION_COMPLETED_SCREEN",OUT_OF_MISSIONS_SCREEN:"OUT_OF_MISSIONS_SCREEN",SELECT_GAME_SCREEN:"SELECT_GAME_SCREEN",WELL_DONE_SCREEN:"WELL_DONE_SCREEN",CONFIRM_RESTART_SCREEN:"CONFIRM_RESTART_SCREEN",PLAY_WITH_FRIEND_WELCOME:"PLAY_WITH_FRIEND_WELCOME",LANGUAGES_SCREEN:"LANGUAGES_SCREEN"},a={SCREEN:200,POPUP:300,PRIORITY:999}},648:function(e,t){"use strict";t.Z={BUTTON_CLICK:"button_click",POPUP_OFF:"popup_out",POPUP_SHOW:"popup_in",AUTO_COMPLETE:"auto_complete",CARD_MOVE:"card_move",FINISH_1:"finish1",FINISH_2:"finish2",FINISH_3:"finish3",FINISH_4:"finish4",FINISH_5:"finish5",FINISH_6:"finish6",FINISH_7:"finish7",FINISH_8:"finish8",FINISH_9:"finish9",FINISH_10:"finish10",FINISH_11:"finish11",FINISH_12:"finish12",FINISH_13:"finish13",HINT:"hint",NO_MOVE:"no_move",SHUFFLE:"shuffle",UNDO:"undo",WON:"won",DIAMONDS_EAT:"",FIREWORKS_SOAR:"",FIREWORKS_BIG:"",FIREWORKS_SMALL:"",DAILY_REWARD:"",GAME_OVER_SCENE:"",SCORE_COUNTER:"",CONGRATULATION:"",YOU_WIN:"",YOU_LOSE:"",GIFT_CHARGE:"",GIFT_REVEAL:"",GIFT_EXPLODE:""}},645:function(e,t,n){"use strict";n.d(t,{Gc:function(){return i},Wg:function(){return a},iD:function(){return s}});var i={TOURNAMENTS:"Tournaments",AWARDS:"Awards"},a={NUMBER_OF_BANNER:3},s={SCREEN_WIDTH:375,HEADER:{WIDTH:375,HEIGHT:161/2.88},TAB_SELECTOR:{WIDTH:342,HEIGHT:28},MAX_LEADERS:4,LEADER_LIST:{WIDTH:303,HEIGHT:126},FOOTER:{WIDTH:375,HEIGHT:72},TOURNAMENT_BLOCK:{HEADER:{HEIGHT:48},FOOTER:{HEIGHT:66},TAB:{HEIGHT:35}}}},674:function(e,t,n){"use strict";var i=n(623),a=n(618),s=n(643).Z.EFFECTS,r=s.KEY,o=s.FRAME,c=function(e){function t(t){var n;return(n=e.call(this,t)||this).halo=void 0,n.star=void 0,n.createStar(),n.createHalo(),n.scene.add.existing((0,i.Z)(n)),n}(0,a.Z)(t,e);var n=t.prototype;return n.run=function(){this.runStarAnimation(),this.runHaloAnimation()},n.createStar=function(){this.star=this.scene.make.image({key:r,frame:o.FX_STAR_YELLOW,visible:!1}),this.star.setWorldSize(35,35),this.add(this.star)},n.createHalo=function(){this.halo=this.scene.make.image({key:r,frame:o.FX_CIRCLE,visible:!1}),this.halo.setWorldSize(162,162),this.add(this.halo)},n.runStarAnimation=function(){var e=this;this.scene.tweens.killTweensOf(this.star),this.star.setVisible(!0);var t=1/GameCore.Utils.Image.getImageScale();this.scene.tweens.add({targets:[this.star],duration:400,ease:Phaser.Math.Easing.Quintic.Out,props:{scaleX:{start:16*t,to:0},scaleY:{start:10*t,to:0}},onComplete:function(){e.star.setVisible(!1)}})},n.runHaloAnimation=function(){var e=this;this.scene.tweens.killTweensOf(this.halo),this.halo.setScale(0),this.halo.setVisible(!0),this.scene.tweens.add({targets:[this.halo],duration:200,ease:Phaser.Math.Easing.Cubic.Out,props:{scale:{from:0,to:8},alpha:{from:1,to:0}},onComplete:function(){e.halo.setVisible(!1)}})},t}(Phaser.GameObjects.Container);t.Z=c},665:function(e,t,n){"use strict";var i=n(623),a=n(618),s=n(643),r=n(611),o=s.Z.EFFECTS,c=o.KEY,h=o.FRAME,u=function(e){function t(t,n){var a;return(a=e.call(this,t,c,h.BLANK)||this).config=void 0,a.emitter=void 0,a.config=n||{},a.scene.add.existing((0,i.Z)(a)),a}(0,a.Z)(t,e);var n=t.prototype;return n.createEmitters=function(){var e=h.FX_CONFETTI_SMALL_1,t=h.FX_CONFETTI_SMALL_2,n=h.FX_CONFETTI_SMALL_3,i=h.FX_CONFETTI_SMALL_4,a=1/GameCore.Utils.Image.getImageScale(),s={on:!1,particleBringToTop:!0,frame:[e,t,n,i],tint:[14223402,1021804,5420529,16702052],timeScale:1,frequency:400,maxParticles:120,gravityY:-10,speedX:{min:-100,max:100},speedY:{min:80,max:250},alpha:{start:1,end:0,ease:Phaser.Math.Easing.Expo.In},rotate:{start:0,end:1080},scale:{min:.6*a,max:1.6*a},angle:{min:20,max:160},lifespan:{min:8e3,max:12e3}},o=(0,r.TS)(s,this.config);this.emitter=this.createEmitter(o)},n.run=function(e,t,n){this.stop(),this.emitter.setQuantity(e),this.emitter.setPosition(t,n),this.emitter.start()},n.explode=function(e,t,n){this.emitter||this.createEmitters(),this.emitter.explode(e,t,n)},n.stop=function(){var e,t,n;null==(e=this.emitter)||e.killAll(),null==(t=this.emitter)||t.stop(),null==(n=this.emitter)||n.remove(),this.createEmitters()},t}(Phaser.GameObjects.Particles.ParticleEmitterManager);t.Z=u},672:function(e,t,n){"use strict";var i=n(623),a=n(618),s=n(643).Z.EFFECTS,r=s.KEY,o=s.FRAME,c=function(e){function t(t){var n;return(n=e.call(this,t,r,o.FX_STAR_YELLOW)||this).emitZone=void 0,n.emitter=void 0,n.createEmitZone(),n.scene.add.existing((0,i.Z)(n)),n}(0,a.Z)(t,e);var n=t.prototype;return n.createEmitZone=function(){this.emitZone=new Phaser.Geom.Rectangle},n.createEmitters=function(){var e=1/GameCore.Utils.Image.getImageScale();this.emitter=this.createEmitter({on:!1,frame:o.FX_STAR_YELLOW,emitZone:{source:this.emitZone,type:"random"},timeScale:1,frequency:100,alpha:{start:1,end:0,ease:Phaser.Math.Easing.Expo.Out},scale:{start:1*e,end:0,ease:Phaser.Math.Easing.Expo.Out},lifespan:{min:800,max:1500}})},n.run=function(e,t,n,i,a){this.stop(),this.reset(),this.emitZone.setSize(i,a),this.emitZone.setPosition(t-i/2,n-a/2),this.emitter.setQuantity(e),this.emitter.start()},n.stop=function(){var e,t;null==(e=this.emitter)||e.killAll(),null==(t=this.emitter)||t.stop()},n.reset=function(){this.createEmitters()},t}(Phaser.GameObjects.Particles.ParticleEmitterManager);t.Z=c},644:function(e,t,n){"use strict";n.d(t,{Ds:function(){return s},MU:function(){return r}});var i=n(641),a=function(e){return e.KLONDIKE="Klondike",e.FREE_CELL="FreeCell",e.SPIDER="Spider",e}(a||{}),s=function(e){return e===i.Z.FREE_CELL?a.FREE_CELL:e===i.Z.SPIDER?a.SPIDER:a.KLONDIKE},r=function(e){return e===i.Z.FREE_CELL?"free_cell":e===i.Z.SPIDER?"spider":"klondike"};t.ZP=a},641:function(e,t){"use strict";var n=function(e){return e.KLONDIKE="klondike",e.FREE_CELL="freecell",e.SPIDER="spider",e}(n||{});t.Z=n},661:function(e,t,n){"use strict";n.d(t,{Z:function(){return o}});var i=n(618),a=n(627),s=function(e){function t(t,n,i){var a;return(a=e.call(this,t,0,0,n,i)||this).setOrigin(0,0),a}return(0,i.Z)(t,e),t}(Phaser.GameObjects.Zone),r=n(638),o=function(e){function t(){var t;return(t=e.call(this,{visible:!1})||this).unsubscribeList=void 0,t.gameZone=void 0,t.background=void 0,t.handleOpenScene=function(){t.logPageviewOnOpen(),t.logEventOpen()},t.handleResize=function(){if(t.background&&t.gameZone){var e=t.world.getResizeEventData(),n=e.width,i=e.height;t.gameZone.setSize(n,i),t.background.setPosition(n/2,i/2),t.background.setDisplaySize(n,i)}},t.removeStateChange=function(){t.unsubscribeList.forEach((function(e){return e()}))},t}(0,i.Z)(t,e);var n=t.prototype;return n.create=function(){this.events.on("wake",this.handleOpenScene),this.events.on("resume",this.handleOpenScene),this.events.on("create",this.handleOpenScene),this.world.events.on(r.Z.RESIZE,this.handleResize),this.scaleGame(),this.createGameZone()},n.scaleGame=function(){var e=this.getCamera("main"),t=this.world.getZoomRatio(),n=this.world.getWorldSize(),i=n.width,a=n.height;e.setZoom(t),e.centerOn(i/2,a/2)},n.createGameZone=function(){var e=this.world.getWorldSize(),t=e.width,n=e.height;this.gameZone=new s(this,t,n)},n.getCamera=function(e){return"main"===e?this.cameras.main:this.cameras.getCamera(e)},n.createMask=function(e){void 0===e&&(e=1),this.getCamera("main").setBackgroundColor("rgba(0, 0, 0, "+e+")")},n.fontSize=function(e){return Math.round(e/1.01)},n.createBackground=function(e,t,n,i){var a=this;this.background?(this.background.setTexture(e),t&&this.background.setFrame(t)):(this.background=this.make.image({key:e,frame:t}),this.game.events.on("world-resize",(function(){a.createBackground(a.background.texture.key,a.background.frame.name,a.background.alpha,a.background.tint)}))),this.background.setName(e);var s=this.gameZone,r=s.displayWidth,o=s.displayHeight;this.background.setDisplaySize(r,o);var c=this.world.getScreenWidth(),h=this.world.getScreenHeight(),u=this.world.getPixelRatioForCanvas(),l=this.world.getZoomRatio(),d=window.game.world.getPhysicPixels(c,u/l),p=window.game.world.getPhysicPixels(h,u/l);this.background.setSize(d,p),this.background.setDisplaySize(d,p),GameCore.Utils.Valid.isNumber(n)&&this.background.setAlpha(n),GameCore.Utils.Valid.isNumber(i)&&this.background.setTint(i);var f=this.ads.getBannerHeight();Phaser.Display.Align.In.Center(this.background,this.gameZone,0,f/2)},n.handleStateChange=function(e){var t=this;this.unsubscribeList=[],e.forEach((function(e){var n=e.selector,i=e.callback,a=t.storage.watch(n,i);t.unsubscribeList.push(a)})),this.events.once("sleep",this.removeStateChange),this.events.once("destroy",this.removeStateChange),this.events.once("shutdown",this.removeStateChange)},n.logPageviewOnOpen=function(){this.analytics.pageview(this.scene.key)},n.logEventOpen=function(){this.analytics.event(a._.SCREEN_OPEN,{screen_name:this.getSceneName()})},n.getSceneName=function(){return GameCore.Utils.String.toUpperCamelCase(this.scene.key.toLowerCase())},t}(Phaser.Scene)},642:function(e,t,n){"use strict";var i,a=n(10),s=n.n(a),r=n(7),o=n.n(r),c=n(5),h=n.n(c),u=n(23),l=n.n(u),d=n(24),p=n.n(d),f=n(26),g=n.n(f);function m(e,t){var n="undefined"!==typeof p()&&g()(e)||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){var n;if(!e)return;if("string"===typeof e)return v(e,t);var i=h()(n=Object.prototype.toString.call(e)).call(n,8,-1);"Object"===i&&e.constructor&&(i=e.constructor.name);if("Map"===i||"Set"===i)return l()(e);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return v(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var i=0;return function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function v(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var y=function(){function e(){}return e.registerObject=function(t){var n;s()(n=e.objects).call(n,t)||e.objects.push(t)},e.removeObject=function(t){var n;e.objects=o()(n=e.objects).call(n,(function(e){return e!==t}))},e.openScreen=function(t,n){e.openingScreens.push({screen:t,grayscale:n})},e.closeScreen=function(t){var n;e.openingScreens=o()(n=e.openingScreens).call(n,(function(e){return e.screen!==t}))},e.updateGrayScale=function(){var t=e.openingScreens,n=!1;t.length>0&&(n=t[t.length-1].grayscale),n!=this.previousGrayscale&&(this.previousGrayscale=n,this.setGrayScaleForAppBg(n))},e.setGrayScaleForAppBg=function(e){var t=document.getElementById("app-bg");t&&(t.style.filter=e?"grayscale(0.8)":"")},e.updateAppBg=function(e){var t=document.getElementById("app-bg");if(t){var n=new Image;n.src=e,n.onload=function(){t.style.backgroundImage="url("+e+")"}}},e}();i=y,y.objects=[],y.openingScreens=[],y.currentAlpha=0,y.updateBgMask=function(){for(var e,t=1,n=m(i.objects);!(e=n()).done;){var a=e.value,s=a.scene;s&&s.scene.isActive(s.scene.key)&&(a.parentContainer?a.parentContainer.visible&&a.visible&&(t*=1-a.alpha*a.parentContainer.alpha):a.visible&&(t*=1-a.alpha))}var r=1-t;i.currentAlpha!=r&&(i.currentAlpha=r,function(e){var t=document.getElementById("app-mask");t&&(t.style.background="rgb(20 20 22 / "+e+")")}(r))},y.previousGrayscale=!1,t.Z=y},668:function(e,t,n){"use strict";n.d(t,{Z:function(){return r}});var i=n(612),a=n(618),s=n(643).Z.JOURNEY.KEY,r=function(e){function t(t,n){var a;return(a=e.call(this,t,0,0,s)||this).options=void 0,a.options=(0,i.Z)({key:s},n),a.setEnable(n.enable),a}return(0,a.Z)(t,e),t.prototype.setEnable=function(e){this.options.enable=e,e?(this.setFrame(this.options.frameOn),this.setWorldSize(this.options.sizeOn.width,this.options.sizeOn.height)):(this.setFrame(this.options.frameOff),this.setWorldSize(this.options.sizeOff.width,this.options.sizeOff.height))},t}(Phaser.GameObjects.Image)},671:function(e,t,n){"use strict";n.d(t,{Z:function(){return P}});var i=n(618),a=n(4),s=n.n(a),r=n(42),o=n.n(r),c=n(5),h=n.n(c),u=n(670),l=n(54),d=n.n(l),p=n(664),f=n(669),g=n(653),m=n(643).Z.JOURNEY,v=m.KEY,y=m.FRAME,T=function(e){function t(t){var n;return(n=e.call(this,t,v,y.LV_PASSED_BG,47.5,48)||this).payload=void 0,n.overlay=void 0,n.text=void 0,n.levelRoundContainer=void 0,n.levelRoundTween=void 0,n.handleClick=function(){var e;n.payload.enable&&null!=(e=n.payload.config)&&e.level},n.payload={enable:!1,config:{level:0}},n.scene=t,n.setName("Level"),n.createUI(),n.align(),n}(0,i.Z)(t,e);var n=t.prototype;return n.createUI=function(){this.createLevelRound(),this.createButtonOverlay(),this.createText(),this.sendToBack(this.levelRoundContainer)},n.createButtonOverlay=function(){this.overlay=this.scene.make.image({key:v,frame:y.LV_ACTIVE}),this.overlay.setWorldSize(78,82),this.overlay.kill(),this.add(this.overlay)},n.createText=function(){this.text=this.scene.make.bitmapText({font:g.Z.BOLD_SHADOW.KEY,origin:{x:.5,y:.5},size:this.scene.fontSize(23)}),this.text.setIgnoreLanguage(),this.text.kill(),this.add(this.text)},n.createLevelRound=function(){this.levelRoundContainer=this.scene.add.container();var e=this.scene.make.image({key:v,frame:y.LV_ACTIVE_FX,alpha:1});e.setWorldSize(80.5,80.5),this.levelRoundContainer.add([e]),this.add(this.levelRoundContainer)},n.align=function(){Phaser.Display.Align.In.Center(this.text,this.button),Phaser.Display.Align.In.Center(this.levelRoundContainer,this.overlay,0,-2)},n.setConfig=function(e){this.payload.config=e},n.setEnable=function(e){this.payload.enable=e},n.setPayload=function(e,t){void 0===t&&(t=!0),this.setConfig(e),this.setEnable(t)},n.updateOverlay=function(){var e,t,n,i,a=this.scene.journey.getCurrentLevel();if(this.overlay.revive(),this.payload.enable)if(a==(null==(t=this.payload.config)?void 0:t.level)){switch(null==(n=this.payload.config)?void 0:n.key){case"two-cards":this.overlay.setFrame(y.LV_TWO_CARDS_PASS),this.overlay.setWorldSize(86,95);break;case"king":this.overlay.setFrame(y.ICO_SPECIAL_LOCKED),this.overlay.setWorldSize(86,95);break;default:this.overlay.setFrame(y.LV_ACTIVE),this.overlay.setWorldSize(78,82)}var s;if(this.payload.config.key)this.levelRoundContainer.kill(),this.text.kill();else d()(s=this.levelRoundContainer).call(s),this.text.revive()}else switch(null==(i=this.payload.config)?void 0:i.key){case"two-cards":this.overlay.setFrame(y.LV_TWO_CARDS_PASS_LOCK),this.overlay.setWorldSize(86,95);break;case"king":this.overlay.setFrame(y.ICO_SPECIAL_LOCKED),this.overlay.setWorldSize(86,95);break;default:this.overlay.setFrame(y.LV_PASSED),this.overlay.setWorldSize(38,37.5)}else switch(null==(e=this.payload.config)?void 0:e.key){case"two-cards":this.overlay.setFrame(y.LV_TWO_CARDS_PASS),this.overlay.setWorldSize(86,95);break;case"king":this.overlay.setFrame(y.ICO_SPECIAL_LOCKED),this.overlay.setWorldSize(91,80.5);break;default:this.overlay.setFrame(y.ICO_LOCK),this.overlay.setWorldSize(36.5,36.38)}},n.updateLevelButton=function(){var e,t;this.scene.journey.getCurrentLevel()===(null==(e=this.payload.config)?void 0:e.level)?(this.levelRoundContainer.revive(),this.button.setVisible(!1),this.runAnimation(),this.text.revive()):(this.text.kill(),this.button.setVisible(!0),this.levelRoundContainer.kill(),null==(t=this.levelRoundTween)||t.remove(),this.levelRoundTween=void 0);this.updateOverlay(),this.payload.config?this.text.setText(""+this.payload.config.level):(this.button.setSize(36.5,35),this.text.kill()),this.align()},n.updateEnable=function(e){this.setEnable(e),this.updateLevelButton()},n.runAnimation=function(){var e,t=1/this.scene.world.getPixelRatio();null==(e=this.levelRoundTween)||e.remove(),this.levelRoundTween=void 0,this.levelRoundTween=this.scene.tweens.add({targets:this.levelRoundContainer,scale:{start:t,from:t,to:1.4,delay:30,duration:1e3,ease:p.Z},alpha:{start:1,from:1,to:0,delay:100,duration:930},loop:-1})},t}(f.Z),C=n(612),E=n(623),A=n(668),S=[{x:28.625,y:36,sizeOff:{width:57.25,height:9.5},sizeOn:{width:57.25,height:8}},{x:95,y:0,sizeOff:{width:81,height:80},sizeOn:{width:81,height:80}},{x:95,y:-80,sizeOff:{width:82,height:79.5},sizeOn:{width:82,height:79.5}},{x:0,y:-115,sizeOff:{width:114.5,height:9.5},sizeOn:{width:114.5,height:8}},{x:-98,y:-151,sizeOff:{width:81,height:80},sizeOn:{width:81,height:80}},{x:-98,y:-233,sizeOff:{width:82,height:79.5},sizeOn:{width:82,height:79.5}},{x:-28.625,y:-268,sizeOff:{width:57.25,height:9.5},sizeOn:{width:57.25,height:8}}],b=function(e){function t(t){var n;return(n=e.call(this,t)||this).paths=[],n.setSize(208.5,304),n.createPaths(),n.scene.add.existing((0,E.Z)(n)),n}(0,i.Z)(t,e);var n=t.prototype;return n.createPaths=function(){for(var e,t=0;t<S.length;t++){var n=t==S.length-1||t%3==0?3:t%3,i=new A.Z(this.scene,{enable:!1,frameOff:"path g"+n,frameOn:"path y"+n,sizeOff:S[t].sizeOff,sizeOn:S[t].sizeOn});i.setVisible(!1),i.setPosition(S[t].x,S[t].y+this.height/2),i.flipX=t>=3,this.paths.push(i)}this.add(s()(e=[]).call(e,this.paths))},n.updatePathStart=function(e){e?(this.paths[1].options=(0,C.Z)({},this.paths[1].options,{frameOff:"path g0",frameOn:"path y0",sizeOff:{width:135,height:80},sizeOn:{width:135,height:80}}),this.paths[1].setEnable(this.paths[1].options.enable),this.paths[1].setPosition(68,152),this.paths[0].setVisible(!1)):(this.paths[1].options=(0,C.Z)({},this.paths[1].options,{frameOff:"path g1",frameOn:"path y1",sizeOff:S[1].sizeOff,sizeOn:S[1].sizeOn}),this.paths[1].setEnable(this.paths[1].options.enable),this.paths[1].setPosition(S[1].x,S[1].y+this.height/2),this.paths[0].setVisible(!0))},t}(Phaser.GameObjects.Container),I=[{x:47,y:-10},{x:132,y:-75},{x:47,y:-156},{x:-45,y:-158},{x:-132,y:-217},{x:-56,y:-300}],w=function(e){function t(t){var n;return(n=e.call(this,t)||this).background=void 0,n.buttons=[],n.payload=void 0,n.pathContainer=void 0,n.heightContainer=0,n.init(),n}(0,i.Z)(t,e);var n=t.prototype;return n.init=function(){this.payload={index:-1,payloadLevelButtons:[]},this.createPathContainers(),this.setSize(208.5,this.heightContainer),this.addNewButtons(GameCore.Configs.LevelScroller.limitLevelButtonInContainer)},n.clear=function(){this.buttons=[]},n.createPathContainers=function(){this.pathContainer=new b(this.scene),this.pathContainer.setPosition(0,this.heightContainer),this.heightContainer=this.pathContainer.height;var e=-this.heightContainer/5;this.pathContainer.setPosition(0,e),this.add(this.pathContainer)},n.addNewButtons=function(e){for(var t=0;t<e;t++){var n=new T(this.scene);this.buttons.push(n),this.add(n)}},n.setButtons=function(e){this.removeAll(),this.add(this.buttons),this.buttons=e},n.updateButtons=function(){var e;if(-1!==this.payload.index){for(var t=GameCore.Configs.LevelScroller.limitLevelButtonInContainer,n=this.heightContainer/2-22.5,i=0;i<this.buttons.length&&(this.buttons[i]&&I[i]);i++)this.buttons[i].setPosition(I[i].x,I[i].y+n),0==i&&this.isIncludeLevel1()&&this.buttons[i].setPosition(0,n);for(var a=0;a<this.buttons.length;a++)this.buttons[a].kill();for(var s=0;s<this.pathContainer.paths.length;s++)this.pathContainer.paths[s].setVisible(!1);for(var r=0;r<this.payload.payloadLevelButtons.length;r++){var o=this.payload.payloadLevelButtons[r];this.buttons[r].revive(),this.buttons[r].setPayload(o.config,o.enable),this.buttons[r].updateLevelButton(),this.pathContainer.paths[r].setEnable(o.enable),this.pathContainer.paths[r].setVisible(!0)}this.payload.payloadLevelButtons.length==t&&this.pathContainer.paths[6].setVisible(!0),this.isLastItem()&&(this.pathContainer.paths[6].visible=!1);var c=this.scene.journey.getCurrentSeasonMissions(),h=this.scene.journey.getCurrentLevel();this.pathContainer.paths[6].setEnable((null==(e=c[this.getMaxLevel()])?void 0:e.level)<=h),this.pathContainer.updatePathStart(1==this.payload.index&&this.isIncludeLevel1())}},n.updateInfo=function(e){this.payload=e,this.updateButtons()},n.setVisible=function(t){return e.prototype.setVisible.call(this,t),this},n.isIncludeLevel1=function(){for(var e=this.payload.payloadLevelButtons,t=0;t<e.length;t++)if(1==e[t].config.level)return!0;return!1},n.isLastItem=function(){var e=this.payload.payloadLevelButtons,t=this.scene.journey.getCurrentSeasonMissions(),n=GameCore.Configs.LevelScroller.limitLevelButtonInContainer;return e.length>0&&Math.ceil(e[0].config.level/n)==Math.ceil(t.length/n)},n.getMaxLevel=function(){var e=this.payload.payloadLevelButtons;return e[e.length-1].config.level||1},t}(Phaser.GameObjects.Container),P=function(e){function t(t){var n,i=t.world.getWorldSize(),a=i.width,s=i.height,r=t.ads.getBannerHeight();return(n=e.call(this,t,{classType:w,listConfigs:[],width:a,height:s,marginTop:0,marginBottom:r+111+40})||this).levelConfigMap=[],n.levelEnableMax=void 0,n.levelStars=void 0,n.isFastScroll=!1,n.updateLevelScroller=function(){n.levelConfigMap=n.scene.journey.getCurrentSeasonMissions(),n.clearItem(),n.updateLevelButtonContainers(n.levelConfigMap),n.setEnable(!0),n.value=n.getCorrectValue(),n.updateMinValue(),n.value>-n.minValue&&(n.value=-n.minValue),n.value<-n.maxValue&&(n.value=-n.maxValue)},n}(0,i.Z)(t,e);var n=t.prototype;return n.setLevelEnableMax=function(e){this.levelEnableMax=e||1},n.clearItem=function(){this.reset(),this.objects.clear(!1,!1)},n.updateLevelButtonContainers=function(e){var t=this.getConfigButtonContainers(e,this.levelEnableMax);this.updateConfig(t)},n.getConfigButtonContainers=function(e,t){for(var n=GameCore.Configs.LevelScroller.limitLevelButtonInContainer,i=[],a=[],r=1;r<=e.length;r++){var o=!0;t&&(o=r<=t);var c,h={config:{level:e[r-1].level,key:e[r-1].key},enable:o};if(a.push(h),r%n===0)i.unshift({index:r/n,payloadLevelButtons:s()(c=[]).call(c,a)}),a=[]}return a.length>0&&(i.unshift({index:r,payloadLevelButtons:a}),r++),i},n.getIndexButtonContainer=function(e){var t=GameCore.Configs.LevelScroller.limitLevelButtonInContainer;return Math.ceil(e/t)},n.getCorrectValue=function(e){var t;void 0===e&&(e=!1);var n=GameCore.Configs.LevelScroller.limitLevelButtonInContainer,i=this.objHeight,a=this.padding,s=[0,65,81,2,59,83],r=e?this.levelEnableMax:this.scene.journey.getCurrentLevel(),c=this.listObjects.length-this.getIndexButtonContainer(r),u=r%n;u=0===u?6:u;var l=-(c*i)-5+o()(t=h()(s).call(s,0,u)).call(t,(function(e,t){return e+t}),0);return l-=0!==c?a*c:0},n.enableAllLevel=function(){var e=this.value,t=this.scene.journey.getCurrentLevel(),n=this.getConfigButtonContainers(this.levelConfigMap,t);this.updateConfig(n),this.setEnable(!0),this.value=e},n.updateMinValue=function(){var e=GameCore.Configs.LevelScroller.limitLevelButtonInContainer,t=-170,n=this.levelConfigMap.length;t+=this.objHeight*((this.listObjects.length*e-n)/e),this.minValue=t},n.fastScroll=function(e){this.isScrollingBack||(this.isScrolling=!0,this.isScrollingSmooth=!0,this.isFastScroll=!0,this.velocity=2500*e)},n.stopFastScroll=function(e){this.isFastScroll&&(this.isFastScroll=!1,this.velocity=50*e)},t}(u.Z)},654:function(e,t,n){"use strict";n.d(t,{Z:function(){return B}});var i=n(624),a=n(618),s=n(4),r=n.n(s),o=n(659),c=n(660),h=n(643),u=n(647),l=n(650),d=n(649),p=(0,n(637).P1)([function(e){return e.scene.currentSceneKey}],(function(e){return e})),f=n(621),g=n(661),m=n(623),v=n(653),y=n(646),T=h.Z.DEFAULT,C=T.KEY,E=T.FRAME,A=function(e){function t(t){var n;return(n=e.call(this,t,0,0)||this).fps=0,n.fpsString="%1, %2, %3, %4",n.fpsText=void 0,n.background=void 0,n.lastUpdate=void 0,n.update=function(e){if(!(e-n.lastUpdate<800)){n.lastUpdate=e;var t=Math.floor(n.scene.game.loop.actualFps);n.setFps(t)}},n.createFps(),n.setDepth(y.Z.DEBUG),n.scene.add.existing((0,m.Z)(n)),n.scene.events.on(Phaser.Scenes.Events.UPDATE,n.update),n}(0,a.Z)(t,e);var n=t.prototype;return n.setFps=function(e){var t=this.scene.world.getPixelRatio(),n=this.scene.world.getPixelRatioForCanvas();this.fps=e;var i=Phaser.Utils.String.Format(this.fpsString,[e,t,n,window.devicePixelRatio]);this.fpsText.setIgnoreLanguage(),this.fpsText.setText(i)},n.createFps=function(){this.background=this.scene.make.image({key:C,frame:E.BLANK}),this.background.setName("BG"),this.background.setTint(13801480),this.background.setWorldSize(45,25),this.fpsText=this.scene.make.bitmapText({size:this.scene.fontSize(14),text:this.fpsString,font:v.Z.PRIMARY.KEY,origin:{x:0,y:.5}}),this.fpsText.setLeftAlign(),this.fpsText.setName("FPS Meter"),Phaser.Display.Align.In.LeftCenter(this.fpsText,this.background,-5),this.add([this.background,this.fpsText]),this.setFps(0)},t}(Phaser.GameObjects.Container),S=A,b=function(e){function t(t){var n;if((n=e.call(this,t,0,0)||this).performance=void 0,n.memory=0,n.maxMemoryLimit=void 0,n.maxPercentThreshold=void 0,n.normalColor=3459162,n.warningColor=16768343,n.alarmColor=15812200,n.memoryString="Memory: %1MB / %2MB",n.memoryText=void 0,n.lastUpdate=void 0,n.update=function(e){if(!(e-n.lastUpdate<1e3)){n.lastUpdate=e;var t=n.performance.memory.usedJSHeapSize,i=1048576*n.maxMemoryLimit,a=Math.round(t/1048576);n.setMemory(a),n.memoryText.setTint(n.normalColor),t>n.maxPercentThreshold/100*i&&n.memoryText.setTint(n.warningColor),t>i&&n.memoryText.setTint(n.alarmColor)}},n.performance=window.performance,n.createMemory(),n.setDepth(y.Z.DEBUG),n.scene.add.existing((0,m.Z)(n)),!n.isSupport())return n.memoryText.setText("Memory: not supported!"),(0,m.Z)(n);var i=n.performance.memory.jsHeapSizeLimit;return n.maxPercentThreshold=90,n.setMaxMemory(i/1048576),n.scene.events.on(Phaser.Scenes.Events.UPDATE,n.update),n}(0,a.Z)(t,e);var n=t.prototype;return n.isSupport=function(){var e;return this.performance&&!(null==(e=this.performance)||!e.memory)},n.setMaxMemory=function(e){this.maxMemoryLimit=Math.round(e)},n.setMemory=function(e){this.memory=e;var t=Phaser.Utils.String.Format(this.memoryString,[e,this.maxMemoryLimit]);this.memoryText.setText(t)},n.createMemory=function(){this.memoryText=this.scene.make.bitmapText({size:this.scene.fontSize(14),text:this.memoryString,font:v.Z.PRIMARY.KEY,depth:2e3}),this.memoryText.setName("Memory Meter"),this.add(this.memoryText),this.setMemory(0)},t}(Phaser.GameObjects.Container),I=b,w=n(656),P=n(655),k=function(e){function t(t,n,i,a){var s;return(s=e.call(this,t,n,i,a)||this).loadingIcon=void 0,s.messageText=void 0,s.openAnimation=void 0,s.closeTimerEvent=void 0,s.addLoadingIcon(),s.addMessageText(),s.setDepth(l.Ks.PRIORITY),s.background.setAlpha(.5),s.background.setTint(1315862),s}(0,a.Z)(t,e);var n=t.prototype;return n.open=function(t){var n,i=this;e.prototype.open.call(this,t);var a=this.getData(["message","duration","loading"]),s=a[0],r=void 0===s?"":s,o=a[1],c=void 0===o?0:o,h=a[2],u=void 0!==h&&h;this.setMessage(r),this.showLoading(u),null==(n=this.closeTimerEvent)||n.remove(),c>0&&(this.closeTimerEvent=this.scene.time.addEvent({delay:c,callback:function(){i.visible&&i.scene.screen.close(i.name)}})),this.runOpenAnimation()},n.addLoadingIcon=function(){this.loadingIcon=new P.Z(this.scene),this.add(this.loadingIcon),Phaser.Display.Align.In.Center(this.loadingIcon,this.zone)},n.addMessageText=function(){this.messageText=this.scene.make.bitmapText({size:this.scene.fontSize(20),font:v.Z.PRIMARY.KEY,text:"loading",origin:{x:.5,y:.5}}),this.messageText.setCenterAlign(),this.add(this.messageText)},n.setMessage=function(e){this.messageText.setText(e)},n.showLoading=function(e){this.loadingIcon.setVisible(e);var t=!1===e?10:40;Phaser.Display.Align.In.Center(this.messageText,this.zone,0,t)},n.runOpenAnimation=function(){var e,t;null==(e=this.openAnimation)||e.stop(),null==(t=this.openAnimation)||t.remove(),this.openAnimation=new w.Z({targets:[this.messageText,this.loadingIcon],props:{scale:{getStart:function(e){return e.scale-.3},getEnd:function(e){return e.scale}}}}),this.openAnimation.play()},n.logPageviewOnOpen=function(){},n.logPageviewOnClose=function(){},t}(GameCore.Screen),_=k,x=n(642),O=h.Z.DEFAULT,L=O.KEY,R=O.FRAME,D=function(e){function t(){for(var t,n,i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];return(n=e.call.apply(e,r()(t=[this]).call(t,a))||this).mask=void 0,n.fadeInAnim=void 0,n.fadeOutAnim=void 0,n.fpsMeter=void 0,n.memoryMeter=void 0,n.switchScene=function(e){n.currentScene.switch(e)},n.emitGameEventStartScene=function(e){var t=e.scene.key;n.updateSceneState(),n.runMaskFadeOutAnimation(),n.updateActiveSceneKey(t),n.game.events.emit(Phaser.Scenes.Events.START,t),(0,f.sw)("scene","Start scene: "+t)},n.emitGameEventSleepScene=function(e){var t=e.scene.scene.key;t!==u.C.LOAD_SCENE&&(n.runMaskFadeInAnimation(),n.game.events.emit(Phaser.Scenes.Events.SLEEP,t))},n.emitGameEventWakeScene=function(e){var t=e.scene.scene.key;t!==u.C.LOAD_SCENE&&(n.updateSceneState(),n.runMaskFadeOutAnimation(),n.updateActiveSceneKey(t),n.game.events.emit(Phaser.Scenes.Events.WAKE,t))},n.emitGameEventPauseScene=function(e){var t=e.scene.scene.key;n.game.events.emit(Phaser.Scenes.Events.PAUSE,t)},n.emitGameEventResumeScene=function(e){var t=e.scene.key;n.game.events.emit(Phaser.Scenes.Events.RESUME,t)},n.emitGameEventShutdownScene=function(e){var t=e.scene.scene.key;n.game.events.emit(Phaser.Scenes.Events.SHUTDOWN,t)},n}(0,a.Z)(t,e);var n=t.prototype;return n.init=function(){this.listenScenesEvents(),this.game.globalScene=this},n.setup=function(){this.scaleGame(),this.addMask(),this.addNotifyScreen(),this.addFPS(),this.addMemory(),this.showBackground()},n.addNotifyScreen=function(){var e=this.screen.add(l.o4.NOTIFY_SCREEN,_);Phaser.Display.Align.In.Center(e,this.gameZone)},n.addMask=function(){this.mask=this.make.image({key:L,frame:R.BLANK});var e=this.gameZone,t=e.width,n=e.height;this.mask.setAlpha(0),this.mask.setOrigin(0,0),this.mask.setTint(859421),this.mask.setWorldSize(t,n)},n.addFPS=function(){GameCore.Configs.Statistics.ShowFPSInGame&&(this.fpsMeter=new S(this),Phaser.Display.Align.In.TopLeft(this.fpsMeter,this.gameZone,-20,-10))},n.addMemory=function(){GameCore.Configs.Statistics.ShowMemoryInGame&&(this.memoryMeter=new I(this),Phaser.Display.Align.In.TopLeft(this.memoryMeter,this.gameZone,-45,-3))},n.updateSceneState=function(){this.setGlobalSceneOnTop()},n.setGlobalSceneOnTop=function(){this.scene.bringToTop(this)},n.runMaskFadeInAnimation=function(){var e,t;this.mask&&GameCore.Configs.EnableEffectSceneTransition&&(null==(e=this.fadeInAnim)||e.remove(),null==(t=this.fadeOutAnim)||t.remove(),this.fadeInAnim=new o.Z({targets:[this.mask],duration:400,ease:Phaser.Math.Easing.Cubic.In,props:{alpha:{start:0,from:0,to:.6}}}),this.mask.setAlpha(0),this.fadeInAnim.play())},n.runMaskFadeOutAnimation=function(){var e,t;this.mask&&GameCore.Configs.EnableEffectSceneTransition&&(null==(e=this.fadeInAnim)||e.remove(),null==(t=this.fadeOutAnim)||t.remove(),this.fadeOutAnim=new c.Z({targets:[this.mask],duration:400,ease:Phaser.Math.Easing.Cubic.Out,props:{alpha:{start:.6,from:.6,to:0}}}),this.mask.setAlpha(1),this.fadeOutAnim.play())},n.listenScenesEvents=function(){var e=this;this.scene.manager.getScenes(!1).forEach((function(t){t.events.on(Phaser.Scenes.Events.CREATE,e.emitGameEventStartScene),t.events.on(Phaser.Scenes.Events.SLEEP,e.emitGameEventSleepScene),t.events.on(Phaser.Scenes.Events.WAKE,e.emitGameEventWakeScene),t.events.on(Phaser.Scenes.Events.PAUSE,e.emitGameEventPauseScene),t.events.on(Phaser.Scenes.Events.RESUME,e.emitGameEventResumeScene),t.events.on(Phaser.Scenes.Events.SHUTDOWN,e.emitGameEventShutdownScene)})),this.events.on(u.K.SWITCH,this.switchScene),this.events.on(Phaser.Scenes.Events.RENDER,x.Z.updateBgMask)},n.getActiveScene=function(){return this.scene.manager.getScenes(!0)[0]},n.getCurrentScene=function(){return this.currentScene},n.updateActiveSceneKey=function(e){e!==u.C.GLOBAL_SCENE&&this.storage.dispatch((0,d.I)(e))},n.logEventOpen=function(){},n.logPageviewOnOpen=function(){},n.showBackground=function(){var e=this.theme.getCurrentThemeConfig().backgroundKey;this.createBackground(e);var t=this.theme.getCurrentThemeResources();x.Z.updateAppBg(t.backgroundFile)},n.hideBackground=function(){this.background.kill()},(0,i.Z)(t,[{key:"currentScene",get:function(){var e=this.storage.getState(),t=p(e);return(t?this.scene.manager.getScene(t):this.getActiveScene()).scene}}]),t}(g.Z),B=D},547:function(e,t,n){"use strict";var i=n(621),a=n(622),s=n(612),r=n(615),o=n(618),c=n(2),h=n.n(c),u=n(0),l=n.n(u),d=n(625),p=0,f=0,g=function(){function e(e){this.game=void 0,this.progressFbTimeEvent=void 0,this.game=e}var t=e.prototype;return t.loadingProgressFbBootScene=function(){var e=this,t=100;f=30;!function n(){t<=0?clearTimeout(e.progressFbTimeEvent):e.progressFbTimeEvent=setTimeout((function(){e.game.facebook.setLoadingProgress(Math.round(f)),f+=30/t,t--,n()}),50)}()},t.finishLoadingProgressFbBootScene=function(){clearTimeout(this.progressFbTimeEvent)},t.loadingProgressFbLoadScene=function(){var e=this;(!f||f<30)&&(f=60),p=f;!function t(){e.progressFbTimeEvent=setTimeout((function(){e.game.facebook.setLoadingProgress(Math.round(f)),f+=.1,t()}),50)}()},t.onProgress=function(e){var t=100-f,n=Math.round(e*t+f);n>p&&clearTimeout(this.progressFbTimeEvent),this.game.facebook.setLoadingProgress(n)},e}(),m=n(116),v=n.n(m);function y(e,t){if(1==t.length)return t[0].color;e=Phaser.Math.Clamp(e,0,1);for(var n=t[0].color,i=0;i<t.length-1;i++){var a=t[i],s=t[i+1];if(e>=a.at&&e<=s.at){var r=Phaser.Display.Color.IntegerToColor(a.color),o=Phaser.Display.Color.IntegerToColor(s.color),c=Phaser.Display.Color.Interpolate.ColorWithColor(r,o,100,100*e);return Phaser.Display.Color.GetColor(c.r,c.g,c.b)}a.at,n=a.color}return n}var T=function(){function e(e){this.game=void 0,this.game=e}var t=e.prototype;return t.addCropByViewport=function(){var e=this;[Phaser.GameObjects.Image,Phaser.GameObjects.RenderTexture].forEach((function(t){t.prototype.setCropByViewport=e.setCropByViewport}))},t.addKillRevive=function(){var e=this;[Phaser.GameObjects.Container,Phaser.GameObjects.Image,Phaser.GameObjects.Sprite,Phaser.GameObjects.Graphics,Phaser.GameObjects.Text,Phaser.GameObjects.BitmapText,Phaser.GameObjects.Particles.ParticleEmitter,Phaser.GameObjects.Particles.ParticleEmitterManager,Phaser.GameObjects.Rectangle,Phaser.GameObjects.Shape].forEach((function(t){t.prototype.kill=e.kill,t.prototype.revive=e.revive}))},t.addKillReviveGroup=function(){Phaser.GameObjects.Group.prototype.killGroup=this.killGroup,Phaser.GameObjects.Group.prototype.reviveGroup=this.reviveGroup},t.addSetWorldSize=function(){var e=this;[Phaser.GameObjects.Image,Phaser.GameObjects.Sprite].forEach((function(t){t.prototype.setWorldSize=e.setWorldSize}))},t.addSetWorldSizeForContainer=function(){var e=this;[Phaser.GameObjects.Container].forEach((function(t){t.prototype.setWorldSize=e.setWorldSizeForContainer}))},t.addGetWorldPosition=function(){var e=this;[Phaser.GameObjects.Container,Phaser.GameObjects.Image,Phaser.GameObjects.Sprite,Phaser.GameObjects.Graphics,Phaser.GameObjects.Text,Phaser.GameObjects.BitmapText].forEach((function(t){t.prototype.getWorldPosition=e.getWorldPosition}))},t.addDrawDebugBox=function(){var e=this;[Phaser.GameObjects.Container,Phaser.GameObjects.Image,Phaser.GameObjects.Sprite,Phaser.GameObjects.Graphics,Phaser.GameObjects.Text,Phaser.GameObjects.BitmapText,Phaser.GameObjects.Zone].forEach((function(t){t.prototype.drawDebugBox=e.drawDebugBox}))},t.addHighQuality=function(){var e=this;[Phaser.GameObjects.Text].forEach((function(t){t.prototype.setHighQuality=e.setHighQuality}))},t.addGradientHorizontalTint=function(){var e=this;[Phaser.GameObjects.BitmapText].forEach((function(t){t.prototype.setGradientHorizontalTint=e.setGradientHorizontalTint,t.prototype.setGradientVerticalTint=e.setGradientVerticalTint,t.prototype.clearGradientTint=e.clearGradientTint}))},t.addRadius=function(){var e=this;[Phaser.GameObjects.BitmapText].forEach((function(t){v()(t.prototype,"radius",{set:function(e){this._radius=e,this._dirty=!0},get:function(){return this._radius}}),t.prototype.setRadius=e.setRadius,t.prototype.clearRadius=e.clearRadius,t.prototype._originalGetTextBounds=t.prototype.getTextBounds,t.prototype.getTextBounds=e.getTextBounds}))},t.addSetLineHeightForBitmapText=function(){Phaser.GameObjects.BitmapText.prototype.setLineHeight=function(e){this.lineHeight=e,this.updateDisplayOrigin()}},t.kill=function(){this.setActive(!1),this.setVisible(!1)},t.revive=function(){this.setActive(!0),this.setVisible(!0)},t.killGroup=function(){this.getChildren().forEach((function(e){e.setActive(!1),e.setVisible(!1)}))},t.reviveGroup=function(){this.getChildren().forEach((function(e){e.setActive(!0),e.setVisible(!0)}))},t.setCropByViewport=function(e){var t=e.x,n=e.y,i=e.width,a=e.height,s=this.scaleX,r=this.scaleY,o=this.displayWidth,c=this.displayHeight,h=this.getWorldPosition(),u=h.x,l=h.y,d=t-i/2,p=u-o/2,f=t+i/2,g=u+o/2,m=n-a/2,v=l-c/2,y=n+a/2,T=l+c/2,C={x:0,y:0,width:this.width/s,height:this.height/r};p<d&&(C.x=(d-p)/s),g>f&&(C.width-=C.x+(g-f)/s),v<m&&(C.y=(m-v)/r),T>y&&(C.height-=C.y+(T-y)/r),this.setCrop(C.x,C.y,C.width,C.height)},t.setWorldSize=function(e,t){this.setSize(e,t),this.setDisplaySize(e,t)},t.setWorldSizeForContainer=function(e,t,n){void 0===n&&(n=2),this.setSize(e*n,t*n),this.setDisplaySize(e,t)},t.getWorldPosition=function(){var e=this.getWorldTransformMatrix().decomposeMatrix();return{x:e.translateX,y:e.translateY}},t.drawDebugBox=function(e,t){var n=this.x,i=this.y,a=this.width,s=this.height,r=this.depth,o=this.originX,c=this.originY,h=this.scene.add.rectangle(n,i,a,s,e,t);h.setName("Debug Box"),h.setDepth(r);var u=GameCore.Utils.Valid.isNumber;return u(o)&&u(c)&&h.setOrigin(o,c),h},t.setHighQuality=function(){return this.renderer instanceof Phaser.Renderer.WebGL.WebGLRenderer?this.setResolution(2*this.scene.game.world.getZoomRatio()):this},t.setGradientHorizontalTint=function(e){var t=this.getTextBounds().characters;if(0==t.length)return this;for(var n=t[t.length-1].r,i=0,a=0;a<t.length;a++){var s=i/n,r=(i=t[a].r)/n,o=y(s,e),c=y(r,e);this.setCharacterTint(a,1,!1,o,c,o,c)}return this},t.setGradientVerticalTint=function(e,t){void 0===t&&(t=!0);for(var n=[],i=this.getTextBounds().characters,a=0;a<i.length;a++){for(var s=i[a],r=t?s.line:0;!n[r];)n.push({minY:9999999,maxY:-9999999});var o=n[r],c=o.minY,h=o.maxY,u=s.y+s.h,l=s.y;c>l&&(n[r].minY=l),h<u&&(n[r].maxY=u)}for(var d=0;d<i.length;d++){var p=i[d],f=n[t?p.line:0],g=f.minY,m=f.maxY,v=p.y+p.h,T=(m-p.y)/(m-g),C=y((m-v)/(m-g),e),E=y(T,e);this.setCharacterTint(d,1,!1,E,E,C,C)}return this},t.clearGradientTint=function(){return this.setCharacterTint(0,this.text.length,!1,16777215),this},t.setRadius=function(e){return this.radius=e,this._dirty=!0,this},t.clearRadius=function(){return this.radius=void 0,this},t.getTextBounds=function(e){var t=this._bounds,n=void 0!=this.radius&&0!=this.radius&&(this._dirty||e||this.scaleX!==t.scaleX||this.scaleY!==t.scaleY);if(t=this._originalGetTextBounds(e),n)for(var i=0;i<t.characters.length;i++){var a=t.characters[i],s=this.radius,r=(a.x-this.displayOriginX+a.w/2)/s,o=Math.cos(r),c=Math.sin(r);a.curve={r:s,rotation:r,cos:o,sin:c}}return t},e}(),C=T,E=n(5),A=n.n(E),S=n(23),b=n.n(S),I=n(24),w=n.n(I),P=n(26),k=n.n(P),_=n(4),x=n.n(_),O=n(44),L=n.n(O),R=n(27),D=n.n(R),B=n(33),M=n.n(B),N=[{url:"./assets/images/others/mock1.jpg",title:"Buy lottery tickets on behalf",description:"\ud83d\udca5\ud83d\udca5\ud83d\udca5 Place an order for lottery tickets from 3 regions!!! \u2705 Fast - Convenient - Safe \u2705 Diverse products \u2705 Payment...",buttonName:"Discover more"},{url:"./assets/images/others/mock2.jpg",title:"SYSTEM-WIDE SALE UP TO 50%",description:'\ud83d\udd25 \ud835\uddec\ud835\uddd8\ud835\uddd4\ud835\udde5 \ud835\uddd8\ud835\udde1\ud835\uddd7 \ud835\udde6\ud835\uddd4\ud835\udddf\ud835\uddd8 | \ud835\udde8\ud835\udde3 \ud835\udde7\ud835\udde2 \ud835\udff1\ud835\udfec% "BIG PARTY" AUTHENTIC SPORTSWEAR SHOCKINGLY REDUCED PRICES! \ud83c\udf81 From...',buttonName:"Discover more"},{url:"./assets/images/others/mock3.jpg",title:"Register now",description:"Play safe, play fun, play 9club!",buttonName:"Register"}],G=function(){function e(){}return e.loadBannerAdAsync=function(){var e=(0,r.Z)(l().mark((function e(){var t,n,i,a,s,r,o,c,u,d;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.currentIdx=(this.currentIdx+1)%N.length,this.hideBannerAdAsync(),e.next=4,new(h())((function(e){setTimeout((function(){e()}),2e3)}));case 4:if(!document.getElementById("mock-banner-ads")){e.next=16;break}return t=N[this.currentIdx],n=t.url,i=t.buttonName,a=t.title,s=t.description,(r=document.getElementById("banner-content-text1"))&&(r.innerHTML=a),(o=document.getElementById("banner-content-text2"))&&(o.innerHTML=s),(c=document.getElementById("mock-banner-ads-avatar"))&&(c.style.background="url("+n+") center center/contain no-repeat"),(u=document.getElementById("banner-content-button"))&&(u.innerHTML=i),e.abrupt("return");case 16:d=GameCore.Utils.Device.isDesktop(),50,d?this.createDesktopBannerAd(50):this.createMobileBannerAd(50);case 19:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),e.createDesktopBannerAd=function(e){var t=this,n=N[this.currentIdx],i=n.url,a=n.buttonName,s=n.title,r=n.description,o=document.createElement("div");o.id="mock-banner-ads",o.style.width="100%",o.style.height=e+"px",o.style.bottom="var(--sab)",o.style.display="flex",o.style.position="absolute",o.style.opacity=this.currentOpacity;var c=document.createElement("div");c.id="mock-banner-ads-display-area",c.style.width="100%",c.style.height="100%",c.style.background="#323436 center center/auto no-repeat",c.style.borderRadius="10px",c.style.marginLeft="4px",c.style.marginRight="4px",c.style.display="block",c.style.alignContent="center";var h=document.createElement("div");h.id="mock-banner-ads-content",h.style.boxSizing="border-box",h.style.flexDirection="row",h.style.display="flex",h.style.position="relative",h.style.alignItems="stretch",h.style.paddingLeft="4px",h.style.paddingRight="4px",h.style.justifyContent="space-between";var u=document.createElement("div");u.id="mock-banner-ads-avatar",u.style.marginLeft="10px",u.style.width=e+"px",u.style.minWidth=e+"px",u.style.height=e+"px",u.style.display="flex",u.style.flexDirection="column",u.style.position="relative",u.style.background="url("+i+") center center/contain no-repeat",u.style.borderRadius="50%";var l=document.createElement("div");l.id="mock-banner-ads-right-content",l.style.width="100%",l.style.paddingLeft="10px",l.style.display="flex",l.style.flexDirection="row",l.style.position="relative",l.style.color="#E4E6EB",l.style.wordWrap="break-word",l.style.textAlign="left",l.style.alignContent="center",l.style.alignItems="center",l.style.fontSize="12px",l.style.fontFamily="Helvetica, Arial, sans-serif, Roboto, Helvetica, Arial, sans-serif",u.style.boxSizing="border-box";var d=document.createElement("div");d.style.flexDirection="column",d.style.display="flex",d.style.justifyContent="center",d.style.flexShrink="1",d.style.flexGrow="1",d.style.flexBasis="0",d.style.boxSizing="border-box",d.style.minWidth="0",d.innerHTML="\n            <div id='banner-content-text1' style=\"font-weight:600;line-height: 1.3333;font-size: .9375rem;text-overflow: ellipsis;-webkit-line-clamp: 1;overflow: hidden;display: -webkit-box;-webkit-box-orient: vertical;\">"+s+"</div>\n            <div id='banner-content-text2' style=\"font-weight:400;line-height: 1.2308;font-size: .8125rem;text-overflow: ellipsis;-webkit-line-clamp: 2;overflow: hidden;display: -webkit-box;-webkit-box-orient: vertical;\">"+r+"</div>";var p=document.createElement("button");p.id="banner-content-button",p.type="button",p.style.width="120px",p.style.height=e-20+"px",p.style.fontWeight="600",p.style.backgroundColor="#3963fc",p.style.border="none",p.style.color="white",p.style.borderRadius="5px",p.style.textAlign="center",p.style.display="inline-block",p.style.cursor="pointer",p.style.marginRight="10px",p.style.marginLeft="10px",p.style.flexShrink="1",p.style.boxSizing="border-box",p.style.paddingRight="2px",p.style.paddingLeft="2px",p.innerHTML=a,p.onclick=function(){"0.2"===t.currentOpacity?o.style.opacity="1":o.style.opacity="0.2",t.currentOpacity=o.style.opacity};var f=document.createElement("button");f.type="button",f.style.width=e-20+"px",f.style.height=e-20+"px",f.style.fontWeight="1000",f.style.backgroundColor="#5a5c5c",f.style.border="none",f.style.color="white",f.style.borderRadius="50%",f.style.textAlign="center",f.style.display="inline-block",f.style.cursor="pointer",f.style.marginRight="10px",f.style.marginLeft="10px",f.style.flexShrink="0",f.style.boxSizing="border-box",f.style.paddingRight="2px",f.style.paddingLeft="2px",f.innerHTML="...",document.body.appendChild(o),o.appendChild(c),c.appendChild(h),h.appendChild(u),h.appendChild(l),l.appendChild(d),l.appendChild(p),l.appendChild(f)},e.createMobileBannerAd=function(e){var t=this,n=N[this.currentIdx],i=n.url,a=n.buttonName,s=n.title,r=n.description,o=document.createElement("div");o.id="mock-banner-ads",o.style.width="100%",o.style.height=e+"px",o.style.bottom="var(--sab)",o.style.display="block",o.style.position="absolute",o.style.opacity=this.currentOpacity;var c=document.createElement("div");c.id="mock-banner-ads-display-area",c.style.background="#ffffff center center/auto no-repeat",c.style.display="block",c.style.alignContent="center";var h=document.createElement("div");h.id="mock-banner-ads-content",h.style.boxSizing="border-box",h.style.flexDirection="row",h.style.display="flex",h.style.position="relative",h.style.alignItems="stretch",h.style.justifyContent="space-between";var u=document.createElement("div");u.id="mock-banner-ads-avatar",u.style.width=e+"px",u.style.minWidth=e+"px",u.style.height=e+"px",u.style.display="flex",u.style.flexDirection="column",u.style.position="relative",u.style.background="url("+i+") center center/contain no-repeat";var l=document.createElement("div");l.id="mock-banner-ads-right-content",l.style.width="100%",l.style.paddingLeft="10px",l.style.display="flex",l.style.flexDirection="row",l.style.position="relative",l.style.color="#000",l.style.wordWrap="break-word",l.style.textAlign="left",l.style.alignContent="center",l.style.alignItems="center",l.style.fontSize="12px",l.style.fontFamily="Helvetica, Arial, sans-serif, Roboto, Helvetica, Arial, sans-serif",u.style.boxSizing="border-box";var d=document.createElement("div");d.style.flexDirection="column",d.style.display="flex",d.style.justifyContent="center",d.style.flexShrink="1",d.style.flexGrow="1",d.style.flexBasis="0",d.style.boxSizing="border-box",d.style.minWidth="0",d.innerHTML="\n            <div id='banner-content-text1' style=\"font-weight:600;line-height: 1.3333;font-size: .9375rem;text-overflow: ellipsis;-webkit-line-clamp: 1;overflow: hidden;display: -webkit-box;-webkit-box-orient: vertical;\">"+s+"</div>\n            <div id='banner-content-text2' style=\"font-weight:400;line-height: 1.2308;font-size: .8125rem;text-overflow: ellipsis;-webkit-line-clamp: 1;overflow: hidden;display: -webkit-box;-webkit-box-orient: vertical;\">"+r+"</div>";var p=document.createElement("button");p.id="banner-content-button",p.type="button",p.style.height="100%",p.style.fontWeight="600",p.style.backgroundColor="#3963fc",p.style.border="none",p.style.color="white",p.style.textAlign="center",p.style.display="inline-block",p.style.cursor="pointer",p.style.marginLeft="10px",p.style.flexShrink="1",p.style.boxSizing="border-box",p.style.paddingRight="7px",p.style.paddingLeft="7px",p.innerHTML=a,p.onclick=function(){"0.2"===t.currentOpacity?o.style.opacity="1":o.style.opacity="0.2",t.currentOpacity=o.style.opacity},document.body.appendChild(o),o.appendChild(c),c.appendChild(h),h.appendChild(u),h.appendChild(l),l.appendChild(d),l.appendChild(p)},e.hideBannerAdAsync=function(){var e=(0,r.Z)(l().mark((function e(){var t;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=document.getElementById("mock-banner-ads")){e.next=3;break}return e.abrupt("return");case 3:t.remove();case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),e}();G.currentIdx=-1,G.currentOpacity="1";var F={LOADED:"loaded",DISPLAYED:"displayed"},Z=function(e){return e.IDLE="idle",e.LOADING="loading",e.FILLED="filled",e.SHOWING="showing",e}(Z||{}),U=Z,z=function(e){return e.REWARDED="rewarded",e.PRE_ROLL="pre-roll",e.INTERSTITIAL="interstitial",e.BANNER="banner",e}(z||{}),H=z,W=n(629),Y=function(e){function t(t,n){var i;return(i=e.call(this,n)||this).code=void 0,i.code=t,i.message=n,i}return(0,o.Z)(t,e),t}((0,W.Z)(Error)),K=function(e){this.type=void 0,this.status=void 0,this.type=e,this.status=U.IDLE};function V(e,t){var n="undefined"!==typeof w()&&k()(e)||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){var n;if(!e)return;if("string"===typeof e)return j(e,t);var i=A()(n=Object.prototype.toString.call(e)).call(n,8,-1);"Object"===i&&e.constructor&&(i=e.constructor.name);if("Map"===i||"Set"===i)return b()(e);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return j(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var i=0;return function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function j(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}GameCore.Ads={Types:H,Status:U,Events:F,AdError:Y,AdInstance:K};var J=function(e){function t(){for(var t,n,i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];return(n=e.call.apply(e,x()(t=[this]).call(t,a))||this).events=void 0,n.enabled=void 0,n.config=void 0,n.lastInterAdShownTime=void 0,n.lastInterAdLoadedTime=void 0,n.lastRewardAdShownTime=void 0,n.interstitial=void 0,n.rewardedVideo=void 0,n.preRoll=void 0,n.fallbackInterstitial=void 0,n.fallbackRewardedVideo=void 0,n.fallbackPreRoll=void 0,n.safeAreaBottom=void 0,n.showingBannerAd=void 0,n.reloadBannerAdIntervals=void 0,n.bannerAdConfigs=void 0,n.isHaveBannerAdOptions=void 0,n.isFallbackReady=void 0,n.isFallbackInitialized=void 0,n.isBannerAdsShown=void 0,n}(0,o.Z)(t,e);var i=t.prototype;return i.init=function(){this.events=new Phaser.Events.EventEmitter,this.safeAreaBottom=0,this.lastInterAdShownTime=0,this.lastInterAdLoadedTime=0,this.lastRewardAdShownTime=0,this.showingBannerAd={},this.reloadBannerAdIntervals={},this.bannerAdConfigs=[],this.isHaveBannerAdOptions=!0,this.isFallbackReady=!1,this.isFallbackInitialized=!1,this.isBannerAdsShown=!1},i.calculateSafeAreaBottom=function(){try{if(!this.config.calculateSafeAreaBottom)return;this.safeAreaBottom=L()(getComputedStyle(document.documentElement).getPropertyValue("--sab")),isNaN(this.safeAreaBottom)&&(this.safeAreaBottom=0)}catch(e){this.safeAreaBottom=0}},i.configure=function(e,t){this.enabled=t.enabled,this.config=t,this.setAdInstance(e),this.setBannerAdConfigStatus(),this.calculateSafeAreaBottom()},i.setBannerAdConfigStatus=function(){for(var e,t=this.config.bannerAdOptions,n=GameCore.Utils.Device.isDesktop(),i=V(t);!(e=i()).done;){var a=e.value,s=a.platform,r="ALL"==s||"DESKTOP"==s&&n||"MOBILE"==s&&!n;this.bannerAdConfigs.push({config:a,canShow:r}),r&&(this.isHaveBannerAdOptions=!0)}},i.setAdInstance=function(e){var t=this.config,n=t.rewardAdOptions,i=t.interstitialAdOptions;this.interstitial=new e(H.INTERSTITIAL,i.pID),this.rewardedVideo=new e(H.REWARDED,n.pID),this.preRoll=new e(H.PRE_ROLL,i.pID)},i.setFallbackAdInstance=function(e){var t=this.config,n=t.rewardAdOptions,i=t.interstitialAdOptions;this.fallbackInterstitial=new e(H.INTERSTITIAL,i.pID),this.fallbackRewardedVideo=new e(H.REWARDED,n.pID),this.fallbackPreRoll=new e(H.PRE_ROLL,i.pID)},i.preloadInterstitialAdAsync=function(){var e=(0,r.Z)(l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.preloadAdAsync(H.INTERSTITIAL);case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),i.showInterstitialAdAsync=function(){var e=(0,r.Z)(l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.canbeShowInterstitialAdByTime()){e.next=2;break}throw new Y("INTERSTITIAL_AD_CAN_NOT_SHOW","Can't show interstitial ad");case 2:return e.next=4,this.showAdAsync(H.INTERSTITIAL);case 4:this.lastInterAdShownTime=window.performance.now()/1e3;case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),i.preloadPreRollAdAsync=function(){var e=(0,r.Z)(l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.preloadAdAsync(H.PRE_ROLL);case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),i.showPreRollAdAsync=function(){var e=(0,r.Z)(l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.showAdAsync(H.PRE_ROLL);case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),i.preloadRewardedVideoAsync=function(){var e=(0,r.Z)(l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.preloadAdAsync(H.REWARDED);case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),i.showRewardedVideoAsync=function(){var e=(0,r.Z)(l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.canbeShowRewardAd()){e.next=2;break}throw new Y("REWARDED_VIDEO_CAN_NOT_SHOW","Can't show rewarded video");case 2:return e.next=4,this.showAdAsync(H.REWARDED);case 4:this.lastRewardAdShownTime=window.performance.now()/1e3;case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),i.getRemainingRewardTime=function(){var e=window.performance.now()/1e3,t=this.config.rewardAdOptions.secondsBetweenAds,n=e-this.lastRewardAdShownTime;return n<t?t-n:0},i.preloadAdAsync=function(){var e=(0,r.Z)(l().mark((function e(t){var n,i;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.enabled){e.next=2;break}throw new Y("ADS_NOT_ENABLED","Ads is't enabled");case 2:return e.next=4,this.preloadMainAdService(t);case 4:if(!0!==(n=e.sent)){e.next=7;break}return e.abrupt("return");case 7:if(this.isFallbackReady){e.next=9;break}throw n;case 9:return e.next=11,this.preloadFallbackAdService(t);case 11:if(!0!==(i=e.sent)){e.next=14;break}return e.abrupt("return");case 14:throw i;case 15:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),i.preloadMainAdService=function(e){var t=this;return new(h())((function(n){var i=!1;t.preloadAdInstanceAsync(e,!1).then((function(){i=!0})).catch((function(e){t.isFallbackReady||t.initFallbackAdsService().catch((function(){t.isFallbackReady=!1})),i=e})).finally((function(){n(i)}))}))},i.preloadFallbackAdService=function(e){var t=this;return new(h())((function(n){var i=!1;t.isFallbackReady||n(new Y("FALLBACK_NOT_READY","Fallback ads not ready")),t.preloadAdInstanceAsync(e,!0).then((function(){i=!0})).catch((function(e){i=e})).finally((function(){n(i)}))}))},i.preloadAdInstanceAsync=function(){var e=(0,r.Z)(l().mark((function e(t,n){var i,a=this;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===n&&(n=!1),null!==(i=this.getAdInstanceByType(t,n))){e.next=4;break}throw new Y("AD_INSTANCE_NOT_INITIATED","The instance ads not yet initiated");case 4:if(i.getStatus()!==U.LOADING){e.next=8;break}return e.next=7,new(h())((function(e){a.events.once(F.LOADED,e)}));case 7:return e.abrupt("return");case 8:return t!==H.INTERSTITIAL&&t!==H.PRE_ROLL||(this.lastInterAdLoadedTime=window.performance.now()/1e3),e.next=11,i.loadAsync();case 11:this.events.emit(F.LOADED,t);case 12:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}(),i.showAdAsync=function(){var e=(0,r.Z)(l().mark((function e(t){var n,i;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.enabled){e.next=2;break}throw new Y("ADS_NOT_ENABLED","Ads is't enabled");case 2:return e.next=4,this.showMainAdService(t);case 4:if(!0!==(n=e.sent)){e.next=7;break}return e.abrupt("return");case 7:if(!this.isUserCancelledAdError(n)&&this.isAdFallbackReadyToShow(t)){e.next=9;break}throw n;case 9:return e.next=11,this.showFallbackAdService(t);case 11:if(!0!==(i=e.sent)){e.next=14;break}return e.abrupt("return");case 14:throw i;case 15:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),i.showMainAdService=function(e){var t=this;return new(h())((function(n){var i=!1;t.showAdInstanceAsync(e,!1).then((function(){i=!0})).catch((function(e){i=e,t.isUserCancelledAdError(e)||t.isFallbackReady||t.initFallbackAdsService().catch((function(){t.isFallbackReady=!1}))})).finally((function(){n(i)}))}))},i.showFallbackAdService=function(e){var t=this;return new(h())((function(n){var i=!1;t.isFallbackReady||n(new Y("FALLBACK_NOT_READY","Fallback ads not ready")),t.showAdInstanceAsync(e,!0).then((function(){i=!0})).catch((function(e){i=e})).finally((function(){n(i)}))}))},i.showAdInstanceAsync=function(){var e=(0,r.Z)(l().mark((function e(t,n){var i;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===n&&(n=!1),null!==(i=this.getAdInstanceByType(t,n))){e.next=4;break}throw new Y("AD_INSTANCE_NOT_INITIATED","The instance ads not yet initiated");case 4:return t!==H.INTERSTITIAL&&t!==H.PRE_ROLL||(this.lastInterAdShownTime=window.performance.now()/1e3),t===H.REWARDED&&(this.lastRewardAdShownTime=window.performance.now()/1e3,this.config.enableRewardVideoResetInterstitial&&(this.lastInterAdShownTime=this.lastRewardAdShownTime)),e.next=8,i.showAsync();case 8:this.events.emit(F.DISPLAYED,t);case 9:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}(),i.getAdStatus=function(e){var t=this.getAdInstanceByType(e);return t?t.getStatus():null},i.getAdInstanceByType=function(e,t){if(void 0===t&&(t=!1),t)switch(e){case H.INTERSTITIAL:return this.fallbackInterstitial;case H.REWARDED:return this.fallbackRewardedVideo;case H.PRE_ROLL:return this.fallbackPreRoll;default:return null}switch(e){case H.INTERSTITIAL:return this.interstitial;case H.REWARDED:return this.rewardedVideo;case H.PRE_ROLL:return this.preRoll;default:return null}},i.canbeShowInterstitialAd=function(){var e=this.canbeLoadInterstitialAdByTime();return e&&(e=this.canbeShowInterstitialAdByTime()),e},i.canbeLoadInterstitialAdByTime=function(){var e=window.performance.now()/1e3,t=this.config.interstitialAdOptions,n=t.secondsFirstTime,i=t.secondsBetweenAds,a=Math.floor(e-this.lastInterAdLoadedTime);return this.lastInterAdLoadedTime>0?a>=i:a>=n},i.canbeShowInterstitialAdByTime=function(){var e=window.performance.now()/1e3,t=this.config.interstitialAdOptions,n=t.secondsFirstTime,i=t.secondsBetweenAds,a=Math.floor(e-this.lastInterAdShownTime);return this.lastInterAdShownTime>0?a>=i:a>=n},i.canbeShowRewardAd=function(){var e=window.performance.now()/1e3,t=this.config.rewardAdOptions,n=t.secondsFirstTime,i=t.secondsBetweenAds,a=Math.floor(e-this.lastRewardAdShownTime);return this.lastRewardAdShownTime>0?a>=i:a>=n},i.getEnabledBannerAds=function(){if(!this.isHaveBannerAdOptions)return[];for(var e,t=[],n=V(this.bannerAdConfigs);!(e=n()).done;){var i=e.value,a=i.config;i.canShow&&t.push(a)}return t},i.disableBannerAds=function(){this.config.bannerAdOptions=[]},i.showBannerAdAsync=function(){var e=(0,r.Z)(l().mark((function e(){var t;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.enabled){e.next=2;break}return e.abrupt("return");case 2:if(!this.isBannerAdsShown){e.next=5;break}return e.next=5,this.hideBannerAdAsync();case 5:if(0!==(t=this.getEnabledBannerAds()).length){e.next=8;break}return e.abrupt("return");case 8:return this.reloadBannerAdIntervals=this.reloadBannerAdIntervals||{},this.loadBannerAdAsync("",t),e.abrupt("return");case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),i.loadBannerAdAsync=function(){var e=(0,r.Z)(l().mark((function e(t,n){var i,a,s=this;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.enabled){e.next=2;break}return e.abrupt("return");case 2:if(i=this.getSceneName(),a=GameCore.Configs.Ads,e.prev=4,"msgames"===a.AdService){e.next=7;break}throw new Y("BANNER_ADS_NOT_SUPPORTED","Banner ads not supported");case 7:if(!a.Mockup.Enable){e.next=12;break}return e.next=10,G.loadBannerAdAsync();case 10:e.next=14;break;case 12:return e.next=14,GameSDK.loadBannerAdAsync(t,n);case 14:this.isBannerAdsShown=!0,n.forEach((function(e){var t=e.placementId,n=e.position,r=e.bannerWidth,o=e.bannerHeight;if(t&&""!==t){var c=n+":"+r+"x"+o;s.showingBannerAd[t]=!0,window.game.analytics.showBannerAd(c,i,a.AdService)}})),e.next=23;break;case 18:e.prev=18,e.t0=e.catch(4),this.isBannerAdsShown=!1,n.forEach((function(e){var t=e.position+":"+e.bannerWidth+"x"+e.bannerHeight,n={type:H.BANNER,placement:i,bannerPosition:t,adService:a.AdService};window.game.analytics.showAdFail(n)}));case 23:case"end":return e.stop()}}),e,this,[[4,18]])})));return function(t,n){return e.apply(this,arguments)}}(),i.hideBannerAdAsync=function(){var e=(0,r.Z)(l().mark((function e(){var t;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.enabled){e.next=2;break}return e.abrupt("return");case 2:if(this.isHaveBannerAdOptions){e.next=4;break}return e.abrupt("return");case 4:if(this.isBannerAdsShown=!1,e.prev=5,"msgames"===(t=GameCore.Configs.Ads).AdService){e.next=9;break}throw new Y("BANNER_ADS_NOT_SUPPORTED","Banner ads not supported");case 9:if(!t.Mockup.Enable){e.next=14;break}return e.next=12,G.hideBannerAdAsync();case 12:e.next=16;break;case 14:return e.next=16,GameSDK.hideBannerAdAsync();case 16:e.next=21;break;case 18:e.prev=18,e.t0=e.catch(5);case 21:case"end":return e.stop()}}),e,this,[[5,18]])})));return function(){return e.apply(this,arguments)}}(),i.getBannerHeight=function(){if(!this.enabled)return 0;if(!this.isBannerAdsShown)return 0;var e=this.getBottomBannerConfig();if(!e)return 0;var t=e.bannerHeight,n=(void 0===t?0:t)+this.safeAreaBottom+20;if(this.game.world){var i=this.game.world,a=i.getPixelRatio(),s=i.getZoomRatio();return this.game.world.getPhysicPixels(n,a/s)}return n},i.getBottomBannerConfig=function(){var e=this.getEnabledBannerAds();return 0===e.length?null:D()(e).call(e,(function(e){return"bottom"===e.position}))||null},i.getSceneName=function(){try{var e=self.game.globalScene;return this.globalSceneTypeCheck(e)?e.getCurrentScene().scene.getSceneName():"unknown"}catch(t){return"unknown"}},i.globalSceneTypeCheck=function(e){return"getCurrentScene"in e&&"function"===typeof e.getCurrentScene},i.initFallbackAdsService=function(){var e=(0,r.Z)(l().mark((function e(){var t,n;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=GameCore.Configs.Ads,!this.isFallbackInitialized){e.next=3;break}return e.abrupt("return");case 3:return this.isFallbackInitialized=!0,e.next=6,this.getFallbackAdServiceInstance();case 6:n=e.sent,"none"!==t.FallbackService&&null!==n&&(this.isFallbackReady=!0,this.setFallbackAdInstance(n));case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),i.getFallbackAdServiceInstance=function(){var e=(0,r.Z)(l().mark((function e(){var t,i,a;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=GameCore.Configs.Ads.FallbackService,e.next=3,Promise.resolve().then(n.bind(n,593));case 3:if(i=e.sent.default,"google"!==t){e.next=16;break}return e.prev=5,e.next=8,this.initGoogleAdInstanceAsync();case 8:if(null===(a=e.sent)){e.next=11;break}return e.abrupt("return",a);case 11:e.next=16;break;case 13:e.prev=13,e.t0=e.catch(5);case 16:return e.abrupt("return",i);case 17:case"end":return e.stop()}}),e,this,[[5,13]])})));return function(){return e.apply(this,arguments)}}(),i.initGoogleAdInstanceAsync=function(){var e=(0,r.Z)(l().mark((function e(){var t,i,a,s,r,o,c,h,u;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=GameCore.Configs.Ads.AdServiceConfigs.Google){e.next=3;break}return e.abrupt("return",null);case 3:return i=t.DataAdChannel,a=t.DataAdClient,s=t.DataAdHost,r=t.DataAdBreakTest,o=t.DataAdFrequencyHint,c=t.MaxScriptLoadRetryCount,e.next=6,Promise.resolve().then(n.bind(n,594));case 6:if("loaded"!==(h=e.sent.default).initStatus){e.next=9;break}return e.abrupt("return",h);case 9:return u={dataAdClient:a,dataAdChannel:i,dataAdHost:s,dataAdBreakTest:r,dataAdFrequencyHint:o,maxScriptLoadRetryCount:c},e.prev=10,h.setGame(this.game),e.next=14,h.initGoogleAdsAsync(u);case 14:return e.abrupt("return",h);case 17:return e.prev=17,e.t0=e.catch(10),e.abrupt("return",null);case 21:case"end":return e.stop()}}),e,this,[[10,17]])})));return function(){return e.apply(this,arguments)}}(),i.isUserCancelledAdError=function(e){if(e instanceof Y&&"USER_INPUT"===e.code)return!0;try{var t=JSON.parse(M()(e));return"code"in t&&"USER_INPUT"===t.code}catch(e){return!1}},i.isAdFallbackReadyToShow=function(e){if(!this.isFallbackReady)return!1;var t=this.getAdInstanceByType(e,!0);return!!t&&t.getStatus()===U.FILLED},t}(Phaser.Plugins.BasePlugin),X=J,q=function(){function e(e,t,n){this.name=void 0,this.color=void 0,this.selfLog=void 0,this.options=void 0,this.name=e,this.color=n||"#FFF",this.options=t,this.selfLog=!0}var t=e.prototype;return t.event=function(e,t,n){this.processEvent(e,t,n),this.selfLog},t.pageview=function(e){var t=this.getPageByKey(e);this.processPageView(t),this.selfLog},t.levelStart=function(e,t,n){this.processLevelStart(e,t,n),this.selfLog},t.levelFail=function(e,t,n){this.processLevelFail(e,t,n),this.selfLog},t.levelRescue=function(e,t,n){this.processLevelRescue(e,t,n),this.selfLog},t.levelComplete=function(e,t,n){this.processLevelComplete(e,t,n),this.selfLog},t.loadPreRollAd=function(e,t){this.processLoadPreRollAd(e,t),this.selfLog},t.showPreRollAd=function(e,t){this.processShowPreRollAd(e,t),this.selfLog},t.loadInterstitialAd=function(e,t){this.processLoadInterstitialAd(e,t),this.selfLog},t.showInterstitialAd=function(e,t){this.processShowInterstitialAd(e,t),this.selfLog},t.loadRewardedVideoAd=function(e,t){this.processLoadRewardedVideoAd(e,t),this.selfLog},t.showRewardedVideoAd=function(e,t){this.processShowRewardedVideoAd(e,t),this.selfLog},t.showBannerAd=function(e,t,n){this.processShowBannerAd(e,t,n),this.selfLog},t.receiveReward=function(e){this.processReceiveReward(e),this.selfLog},t.loadAdFail=function(e){this.processLoadAdFail(e),this.selfLog},t.showAdFail=function(e){this.processShowAdFail(e),this.selfLog},t.getPageByKey=function(e){var t=e.replace(/_/g,"-");return t=t.toLowerCase()},t.processLevelStart=function(e,t,n){},t.processLevelFail=function(e,t,n){},t.processLevelRescue=function(e,t,n){},t.processLevelComplete=function(e,t,n){},t.processLoadInterstitialAd=function(e,t){},t.processShowInterstitialAd=function(e,t){},t.processLoadPreRollAd=function(e,t){},t.processShowPreRollAd=function(e,t){},t.processLoadRewardedVideoAd=function(e,t){},t.processShowRewardedVideoAd=function(e,t){},t.processShowBannerAd=function(e,t,n){},t.processReceiveReward=function(e){},t.processLoadAdFail=function(e){},t.processShowAdFail=function(e){},e}();GameCore.Analytics={BaseAnalytics:q};var Q=function(e){function t(){for(var t,n,i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];return(n=e.call.apply(e,x()(t=[this]).call(t,a))||this).analytics=void 0,n.pageview=function(e){n.isActive()&&n.analytics.forEach((function(t){t.pageview(e)}))},n}(0,o.Z)(t,e);var n=t.prototype;return n.init=function(){this.analytics=[]},n.add=function(e){this.analytics.push(e)},n.event=function(e,t,n){this.isActive()&&this.analytics.forEach((function(i){i.event(e,t,n)}))},n.levelStart=function(e,t,n){this.isActive()&&this.analytics.forEach((function(i){i.levelStart(e,t,n)}))},n.levelRescue=function(e,t,n){this.isActive()&&this.analytics.forEach((function(i){i.levelRescue(e,t,n)}))},n.levelFail=function(e,t,n){this.isActive()&&this.analytics.forEach((function(i){i.levelFail(e,t,n)}))},n.levelComplete=function(e,t,n){this.isActive()&&this.analytics.forEach((function(i){i.levelComplete(e,t,n)}))},n.loadPreRollAd=function(e,t){this.isActive()&&this.analytics.forEach((function(n){n.loadPreRollAd(e,t)}))},n.showPreRollAd=function(e,t){this.isActive()&&this.analytics.forEach((function(n){n.showPreRollAd(e,t)}))},n.loadInterstitialAd=function(e,t){this.isActive()&&this.analytics.forEach((function(n){n.loadInterstitialAd(e,t)}))},n.showInterstitialAd=function(e,t){this.isActive()&&this.analytics.forEach((function(n){n.showInterstitialAd(e,t)}))},n.loadRewardedVideoAd=function(e,t){this.isActive()&&this.analytics.forEach((function(n){n.loadRewardedVideoAd(e,t)}))},n.showRewardedVideoAd=function(e,t){this.isActive()&&this.analytics.forEach((function(n){n.showRewardedVideoAd(e,t)}))},n.showBannerAd=function(e,t,n){this.isActive()&&this.analytics.forEach((function(i){i.showBannerAd(e,t,n)}))},n.receiveReward=function(e){this.isActive()&&this.analytics.forEach((function(t){t.receiveReward(e)}))},n.loadAdFail=function(e){this.isActive()&&this.analytics.forEach((function(t){t.loadAdFail(e)}))},n.showAdFail=function(e){this.isActive()&&this.analytics.forEach((function(t){t.showAdFail(e)}))},n.isActive=function(){return this.analytics.length>=1},t}(Phaser.Plugins.BasePlugin),$=Q,ee=function(){function e(e,t){var n=this;this.name=void 0,this.game=void 0,this.isSprite=void 0,this.audio=void 0,this.markers=void 0,this.volume=void 0,this.isMusicEnabled=function(){return!!n.game.player.getPlayerSetting("music")},this.isSoundEnabled=function(){return!!n.game.player.getPlayerSetting("sound")},this.name=t,this.game=e,this.markers={},this.isSprite=!1,this.isSprite||(this.audio=this.game.sound.add(this.name))}var t=e.prototype;return t.play=function(e,t){var n,i,a,r=(0,s.Z)({volume:this.volume},t||{});if(r.volume!==this.volume&&(r.volume*=this.volume),!this.isSprite)return(null==(i=this.audio)?void 0:i.seek)>0?void this.audio.resume():void(null==(a=this.audio)||a.play(e,r));this.createMaker(e),null==(n=this.markers[e])||n.play(e,r)},t.pause=function(e){var t,n;this.isSprite?null==(t=this.markers[e])||t.pause():null==(n=this.audio)||n.pause()},t.stop=function(e){var t,n;this.isSprite?null==(t=this.markers[e])||t.stop():null==(n=this.audio)||n.stop()},t.setVolume=function(e){this.volume=e},t.createMaker=function(e){if(!this.markers[e])try{this.markers[e]=this.game.sound.addAudioSprite(this.name)}catch(t){}},e}(),te=n(36),ne=n.n(te),ie=n(22),ae=n.n(ie),se=function(){function e(e){var t=this;this.game=void 0,this.audios=void 0,this.volume=void 0,this.soundKeys=void 0,this.isMusicEnabled=function(){return!!t.game.player.getPlayerSetting("music")},this.isSoundEnabled=function(){return!!t.game.player.getPlayerSetting("sound")},this.game=e,this.audios=new(ne()),this.soundKeys=new(ne())}var t=e.prototype;return t.addSoundKeys=function(e){var t=this;ae()(e).forEach((function(n){var i=e[n];"string"===typeof i&&t.soundKeys.set(n,i)}))},t.clearSoundKeys=function(){this.soundKeys.clear()},t.play=function(e,t){var n=this,i=(0,s.Z)({volume:this.volume},t||{});i.volume!==this.volume&&(i.volume*=this.volume);var a=this.audios.get(e);if(!a&&this.game.cache.audio.exists(e)){var r=this.game.sound.add(e);this.audios.set(e,r),a=r}if(a)a.play(void 0,i);else{var o=this.soundKeys.get(e);if(o)try{this.game.globalScene.load.audio(e,o),this.game.globalScene.load.on(Phaser.Loader.Events.FILE_KEY_COMPLETE+"audio-"+e,(function(){var t=n.game.sound.add(e);n.audios.set(e,t),t.play(void 0,i)})),this.game.globalScene.load.start()}catch(c){}}},t.pauseAll=function(){this.audios.forEach((function(e){e.pause()}))},t.resumeAll=function(){this.audios.forEach((function(e){e.resume()}))},t.stopAll=function(){this.audios.forEach((function(e){e.stop()}))},t.pause=function(e){var t=this.audios.get(e);t&&t.pause()},t.stop=function(e){var t=this.audios.get(e);t&&t.stop()},t.setVolume=function(e){this.volume=e},e}(),re=se,oe=function(e){function t(){for(var t,n,i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];return(n=e.call.apply(e,x()(t=[this]).call(t,a))||this).soundManager=void 0,n.musicManager=void 0,n.isMuteAll=void 0,n.initMusic=function(e){n.musicManager=new ee(n.game,e),n.setMusicVolume(1)},n.initSound=function(){n.soundManager=new re(n.game),n.setSoundVolume(1)},n}(0,o.Z)(t,e);var n=t.prototype;return n.init=function(t){e.prototype.init.call(this,t),this.initSound()},n.importSoundEffectKeys=function(e){this.soundManager.addSoundKeys(e)},n.playSound=function(e,t){try{if(!this.soundManager||this.isMuteAll||!this.game.visibility.isGameVisible())return;if(!this.soundManager.isSoundEnabled())return;this.soundManager.play(e,t)}catch(n){}},n.stopSound=function(e){try{this.soundManager.stop(e)}catch(t){}},n.playMusic=function(e){void 0===e&&(e={});try{if(!this.musicManager||this.isMuteAll||!this.game.visibility.isGameVisible())return;if(!this.musicManager.isMusicEnabled())return;this.musicManager.play("",(0,s.Z)({loop:!0,volume:.2},e))}catch(t){}},n.pauseMusic=function(){try{if(!this.musicManager)return;this.musicManager.pause("")}catch(e){}},n.stopMusic=function(){try{if(!this.musicManager)return;this.musicManager.stop("")}catch(e){}},n.pauseAllSounds=function(){try{if(!this.soundManager)return;this.soundManager.pauseAll()}catch(e){}},n.resumeAllSounds=function(){try{if(!this.soundManager)return;this.soundManager.resumeAll()}catch(e){}},n.setSoundVolume=function(e){try{if(!this.soundManager)return;this.soundManager.setVolume(e)}catch(t){}},n.setMusicVolume=function(e){try{if(!this.musicManager)return;this.musicManager.setVolume(e)}catch(t){}},n.muteAll=function(){this.isMuteAll=!0,this.game.sound.mute=!0},n.unmuteAll=function(){this.isMuteAll=!1,this.game.sound.mute=!1},t}(Phaser.Plugins.BasePlugin),ce=oe,he=n(624),ue="AUTH_TOKEN_REQUEST",le="AUTH_TOKEN_RECEIVED",de=function(e){function t(t,n){var i;return(i=e.call(this,t)||this).payload=void 0,i.name="RequestTokenFail",i.message=t||"Request token fail",i.payload=n||{},i}return(0,o.Z)(t,e),t}((0,W.Z)(Error)),pe=n(637),fe="auth",ge=(0,pe.P1)([function(e){return e[fe].token}],(function(e){return e})),me=(0,pe.P1)([function(e){return e[fe].isRequesting}],(function(e){return e})),ve=function(e){return{type:le,payload:{token:e}}},ye=function(e){function t(){return e.apply(this,arguments)||this}(0,o.Z)(t,e);var n=t.prototype;return n.requestToken=function(){var e=(0,r.Z)(l().mark((function e(){var t;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.game.storage,e.next=3,t.dispatch(function(){var e=(0,r.Z)(l().mark((function e(t,n){var a,s,r,o;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,a=window.game.facebook,s=n(),r=ge(s),!me(s)&&""===r){e.next=7;break}return e.abrupt("return");case 7:return t({type:ue,payload:{}}),e.next=10,a.getPlayerToken();case 10:o=e.sent,t(ve(o)),e.next=25;break;case 14:if(e.prev=14,e.t0=e.catch(0),!(e.t0 instanceof Object&&GameCore.Utils.Object.hasOwn(e.t0,"code"))){e.next=19;break}if("PENDING_REQUEST"!==e.t0.code){e.next=19;break}return e.abrupt("return");case 19:if(t(ve("")),!(e.t0 instanceof Object&&GameCore.Utils.Object.hasOwn(e.t0,"message"))){e.next=24;break}if("string"!==typeof e.t0.message){e.next=24;break}return(0,i.tO)(new Error(e.t0.message)),e.abrupt("return");case 24:(0,i.tO)(new de);case 25:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(t,n){return e.apply(this,arguments)}}());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.getToken=function(){return ge(this.state)},(0,he.Z)(t,[{key:"state",get:function(){return this.game.storage.getState()}}]),t}(Phaser.Plugins.BasePlugin),Te=ye,Ce=function(e,t){void 0===t&&(t=1);var n=new Image;n.onload=function(){var e,n;e=this.width*t,n=this.height*t,Math.floor(n/2),Math.floor(e/2)},n.src=e},Ee=function(e){function t(){for(var t,n,i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];return(n=e.call.apply(e,x()(t=[this]).call(t,a))||this).width=void 0,n.height=void 0,n.renderOptions=void 0,n.canvas=void 0,n}(0,o.Z)(t,e);var n=t.prototype;return n.preload=function(e){var t=this,n=ae()(e);n.length<1||(n.forEach((function(n){t.scene.load.image(n,e[n])})),this.scene.load.start())},n.capture=function(){var e=(0,r.Z)(l().mark((function e(t){var n,i,a;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.width,i=t.height,a=t.renderOptions,this.width=n,this.height=i,this.renderOptions=a,this.createCanvas(),e.next=7,this.loadImages();case 7:return this.drawObjects(),e.abrupt("return",this.snapshotFrame());case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.createCanvas=function(){this.canvas||(this.canvas=this.game.textures.createCanvas("FrameCaptureCanvas")),this.canvas.clear(),this.canvas.setSize(this.width,this.height)},n.loadImages=function(){var e=[];for(var t in this.renderOptions){var n=this.renderOptions[t],i=n.name,a=n.image,s=n.fallbackWithImage;if(a)if(this.scene.textures.get(i).key!==i&&""!==i){var r=this.loadImage(i,a,s);e.push(r)}}return this.scene.load.start(),h().all(e)},n.loadImage=function(e,t,n){var i=this;return this.scene.load.image(e,t),new(h())((function(t,a){var s=Phaser.Loader.Events.FILE_KEY_COMPLETE+"image-"+e,r=Phaser.Loader.Events.FILE_LOAD_ERROR,o=function e(n){i.scene.load.off(s,e),i.scene.load.off(r,c),t()},c=function c(h){if(h.key===e)if(i.scene.load.off(s,o),i.scene.load.off(r,c),n)t();else{var u=new Error("Load image failed");a(u)}};i.scene.load.on(s,o),i.scene.load.on(r,c)}))},n.drawObjects=function(){for(var e in this.renderOptions){var t=this.renderOptions[e];switch(t.type){case"text":this.drawText(t);break;case"image":this.drawImage(t)}}},n.drawText=function(e){var t=this.canvas.context,n=e.x,i=e.y,a=e.font,s=e.text,r=e.fillStyle,o=e.lineWidth,c=e.textAlign,h=e.strokeColor,u=void 0===h?"#ffffff":h,l=e.strokeThickness,d=void 0===l?0:l,p=e.angle,f=void 0===p?0:p;t.font=a+' "Be Vietnam Pro",nunito,-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Oxygen,Ubuntu,Cantarell,"Fira Sans","Droid Sans","Helvetica Neue",sans-serif',t.fillStyle=r||"#ffffff",o&&(t.lineWidth=o),c&&(t.textAlign=c),t.save(),0!=f&&t.rotate(f*Math.PI/180),d&&(t.save(),t.strokeStyle=u,t.lineWidth=d,t.lineJoin="round",t.strokeText(s,n,i),t.restore()),t.fillText(s,n,i),t.restore()},n.drawImage=function(e){var t=this.canvas.context,n=e.x,i=e.y,a=e.name,s=e.frame,r=e.width,o=e.height,c=e.fallbackWithImage,h=e.angle,u=void 0===h?0:h;t.save(),0!=u&&(t.translate(r/2,o/2),t.rotate(u*Math.PI/180));var l=this.scene.textures.get(a),d=l.getSourceImage(s);"__MISSING"===l.key&&c&&(d=(l=this.scene.textures.get(c)).getSourceImage()),t.drawImage(d,n,i,r,o),t.restore()},n.snapshotFrame=function(){var e=this.canvas.getCanvas().toDataURL("image/jpeg",.85);return GameCore.Utils.Valid.isDebugger()&&Ce(e),e},t}(Phaser.Plugins.ScenePlugin),Ae=Ee,Se=n(10),be=n.n(Se),Ie=function(e){function t(t,n,i){var a;return(a=e.call(this)||this).game=void 0,a.options=void 0,a.performance=void 0,a.isRunning=!1,a.checkTimer=void 0,a.fpsHistory=void 0,a.start=function(){if(!a.isRunning){a.isRunning=!0;var e=a.options.checkInterval;a.checkTimer=e,a.fpsHistory=[],a.game.events.on(Phaser.Core.Events.POST_STEP,a.onPostStep)}},a.stop=function(){a.isRunning&&(a.isRunning=!1,a.game.events.off(Phaser.Core.Events.POST_STEP,a.onPostStep),a.options.onlyUpdateWhenSwitchScene&&a.checkFps())},a.onPostStep=function(e,t){if(a.checkTimer-=t,!(a.checkTimer>0)){var n=a.options,i=n.checkInterval,s=n.onlyUpdateWhenSwitchScene;a.checkTimer+=i,a.fpsHistory.push(a.game.loop.actualFps),!1===s&&a.fpsHistory.length>=5&&a.checkFps()}},a.game=t,a.options=i,a.performance=n,a}(0,o.Z)(t,e);var n=t.prototype;return n.checkFps=function(){if(0!==this.fpsHistory.length){var e=this.options.autoUpgradeQuality,t=!1;this.isLowFps()?t=this.performance.downgradeGraphicsQuality():e&&this.isHighFps()&&(t=this.performance.upgradeGraphicsQuality()),t&&(this.fpsHistory=[])}},n.getFpsMedian=function(){return Phaser.Math.Median(this.fpsHistory)},n.isLowFps=function(){return this.getFpsMedian()<this.options.fpsThreshold},n.isHighFps=function(){return this.getFpsMedian()>1.2*this.options.fpsThreshold},t}(Phaser.Events.EventEmitter),we=Ie,Pe=["pixelRatio","minQuality","maxQuality","qualityAdjustStep","trackingSceneKeys"],ke=function(e){function t(){for(var t,n,i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];return(n=e.call.apply(e,x()(t=[this]).call(t,a))||this).fpsTracker=void 0,n.pixelRatio=void 0,n.minQuality=void 0,n.maxQuality=void 0,n.qualityAdjustStep=void 0,n.trackingSceneKeys=[],n.trackingScene=function(e){var t;if(be()(t=n.trackingSceneKeys).call(t,e)){var i=n.game.scene.getScene(e);i.events.once(Phaser.Scenes.Events.UPDATE,n.fpsTracker.start),i.events.once(Phaser.Scenes.Events.SLEEP,n.fpsTracker.stop)}},n}(0,o.Z)(t,e);var n=t.prototype;return n.configure=function(e){var t=e.pixelRatio,n=e.minQuality,i=e.maxQuality,s=e.qualityAdjustStep,r=e.trackingSceneKeys,o=(0,a.Z)(e,Pe);this.pixelRatio=t,this.minQuality=n,this.maxQuality=i,this.qualityAdjustStep=s,this.trackingSceneKeys=r,this.fpsTracker=new we(this.game,this,o)},n.active=function(){this.game.events.on(Phaser.Scenes.Events.WAKE,this.trackingScene),this.game.events.on(Phaser.Scenes.Events.START,this.trackingScene)},n.downgradeGraphicsQuality=function(){var e=this.pixelRatio;if(e<=this.minQuality)return!1;var t=+(e-this.qualityAdjustStep).toFixed(2);return!(t<this.minQuality)&&(this.pixelRatio=t,this.game.world.resize(this.pixelRatio),!0)},n.upgradeGraphicsQuality=function(){var e=this.pixelRatio;if(e>=this.maxQuality)return!1;var t=+(e+this.qualityAdjustStep).toFixed(2);return!(t>this.maxQuality)&&(this.pixelRatio=t,this.game.world.resize(this.pixelRatio),!0)},t}(Phaser.Plugins.BasePlugin),_e=ke,xe={sound:!0,music:!0,vibrate:!0,vibrate2:!1,language:"",theme:GameCore.Configs.DefaultTheme,tapToMove:!0,autoHints:!0,autoComplete:!0,drawMode3:!1,leftHanded:!1,backgroundKlondikeIdx:0,cardFaceKlondikeIdx:0,cardBackKlondikeIdx:0,backgroundKlondikeDesktopIdx:0,cardFaceKlondikeDesktopIdx:0,cardBackKlondikeDesktopIdx:0,backgroundFreeCellIdx:0,cardFaceFreeCellIdx:0,cardBackFreeCellIdx:0,backgroundFreeCellDesktopIdx:0,cardFaceFreeCellDesktopIdx:0,cardBackFreeCellDesktopIdx:0,backgroundSpiderIdx:0,cardFaceSpiderIdx:0,cardBackSpiderIdx:0,backgroundSpiderDesktopIdx:0,cardFaceSpiderDesktopIdx:0,cardBackSpiderDesktopIdx:0,largeWidthLayout:!1,modifiedOptions:[],relaxedSpider:!0,suitSize:"one",difficulty:"easy",highlightLowCards:!0,autoMoveToFoundation:!0,gameType:"klondike"},Oe=n(7),Le=n.n(Oe),Re=n(3),De=n.n(Re),Be=xe.sound,Me=xe.music,Ne=xe.vibrate,Ge=xe.vibrate2,Fe=xe.language,Ze=xe.theme,Ue=xe.tapToMove,ze=xe.autoHints,He=xe.autoComplete,We=xe.drawMode3,Ye=xe.backgroundKlondikeIdx,Ke=xe.cardFaceKlondikeIdx,Ve=xe.cardBackKlondikeIdx,je=xe.backgroundKlondikeDesktopIdx,Je=xe.cardFaceKlondikeDesktopIdx,Xe=xe.cardBackKlondikeDesktopIdx,qe=xe.backgroundFreeCellIdx,Qe=xe.cardFaceFreeCellIdx,$e=xe.cardBackFreeCellIdx,et=xe.backgroundFreeCellDesktopIdx,tt=xe.cardFaceFreeCellDesktopIdx,nt=xe.cardBackFreeCellDesktopIdx,it=xe.backgroundSpiderIdx,at=xe.cardFaceSpiderIdx,st=xe.cardBackSpiderIdx,rt=xe.backgroundSpiderDesktopIdx,ot=xe.cardFaceSpiderDesktopIdx,ct=xe.cardBackSpiderDesktopIdx,ht=xe.largeWidthLayout,ut=xe.modifiedOptions,lt=xe.leftHanded,dt=xe.suitSize,pt=xe.difficulty,ft=xe.relaxedSpider,gt=xe.autoMoveToFoundation,mt=xe.highlightLowCards,vt=xe.gameType,yt=function(){function e(e){this.sound=void 0,this.music=void 0,this.vibrate=void 0,this.vibrate2=void 0,this.language=void 0,this.theme=void 0,this.tapToMove=void 0,this.autoHints=void 0,this.autoComplete=void 0,this.drawMode3=void 0,this.leftHanded=void 0,this.backgroundKlondikeIdx=void 0,this.cardFaceKlondikeIdx=void 0,this.cardBackKlondikeIdx=void 0,this.backgroundKlondikeDesktopIdx=void 0,this.cardFaceKlondikeDesktopIdx=void 0,this.cardBackKlondikeDesktopIdx=void 0,this.backgroundFreeCellIdx=void 0,this.cardFaceFreeCellIdx=void 0,this.cardBackFreeCellIdx=void 0,this.backgroundFreeCellDesktopIdx=void 0,this.cardFaceFreeCellDesktopIdx=void 0,this.cardBackFreeCellDesktopIdx=void 0,this.backgroundSpiderIdx=void 0,this.cardFaceSpiderIdx=void 0,this.cardBackSpiderIdx=void 0,this.backgroundSpiderDesktopIdx=void 0,this.cardFaceSpiderDesktopIdx=void 0,this.cardBackSpiderDesktopIdx=void 0,this.largeWidthLayout=void 0,this.modifiedOptions=void 0,this.gameType=void 0,this.suitSize=void 0,this.difficulty=void 0,this.relaxedSpider=void 0,this.autoMoveToFoundation=void 0,this.highlightLowCards=void 0;var t=e||{},n=t.sound,i=t.music,a=t.vibrate,s=t.vibrate2,r=t.language,o=t.theme,c=t.tapToMove,h=t.autoHints,u=t.autoComplete,l=t.drawMode3,d=t.backgroundKlondikeIdx,p=t.cardFaceKlondikeIdx,f=t.cardBackKlondikeIdx,g=t.backgroundKlondikeDesktopIdx,m=t.cardFaceKlondikeDesktopIdx,v=t.cardBackKlondikeDesktopIdx,y=t.backgroundFreeCellIdx,T=t.cardFaceFreeCellIdx,C=t.cardBackFreeCellIdx,E=t.backgroundFreeCellDesktopIdx,A=t.cardFaceFreeCellDesktopIdx,S=t.cardBackFreeCellDesktopIdx,b=t.backgroundSpiderIdx,I=t.cardFaceSpiderIdx,w=t.cardBackSpiderIdx,P=t.backgroundSpiderDesktopIdx,k=t.cardFaceSpiderDesktopIdx,_=t.cardBackSpiderDesktopIdx,x=t.largeWidthLayout,O=t.modifiedOptions,L=t.leftHanded,R=t.suitSize,D=t.difficulty,B=t.relaxedSpider,M=t.autoMoveToFoundation,N=t.highlightLowCards,G=t.gameType;this.sound=GameCore.Utils.Valid.isBoolean(n)?n:Be,this.music=GameCore.Utils.Valid.isBoolean(i)?i:Me,this.vibrate=GameCore.Utils.Valid.isBoolean(a)?a:Ne,this.vibrate2=GameCore.Utils.Valid.isBoolean(s)?s:Ge,this.language=GameCore.Utils.Valid.isString(r)?r:Fe,this.theme=GameCore.Utils.Valid.isString(o)?o:Ze,this.tapToMove=GameCore.Utils.Valid.isBoolean(c)?c:Ue,this.autoHints=GameCore.Utils.Valid.isBoolean(h)?h:ze,this.autoComplete=GameCore.Utils.Valid.isBoolean(u)?u:He,this.drawMode3=GameCore.Utils.Valid.isBoolean(l)?l:We,this.leftHanded=GameCore.Utils.Valid.isBoolean(L)?L:lt,this.backgroundKlondikeIdx=GameCore.Utils.Valid.isNumber(d)?d:Ye,this.cardFaceKlondikeIdx=GameCore.Utils.Valid.isNumber(p)?p:Ke,this.cardBackKlondikeIdx=GameCore.Utils.Valid.isNumber(f)?f:Ve,this.backgroundKlondikeDesktopIdx=GameCore.Utils.Valid.isNumber(g)?g:je,this.cardFaceKlondikeDesktopIdx=GameCore.Utils.Valid.isNumber(m)?m:Je,this.cardBackKlondikeDesktopIdx=GameCore.Utils.Valid.isNumber(v)?v:Xe,this.backgroundFreeCellIdx=GameCore.Utils.Valid.isNumber(y)?y:qe,this.cardFaceFreeCellIdx=GameCore.Utils.Valid.isNumber(T)?T:Qe,this.cardBackFreeCellIdx=GameCore.Utils.Valid.isNumber(C)?C:$e,this.backgroundFreeCellDesktopIdx=GameCore.Utils.Valid.isNumber(E)?E:et,this.cardFaceFreeCellDesktopIdx=GameCore.Utils.Valid.isNumber(A)?A:tt,this.cardBackFreeCellDesktopIdx=GameCore.Utils.Valid.isNumber(S)?S:nt,this.backgroundSpiderIdx=GameCore.Utils.Valid.isNumber(b)?b:it,this.cardFaceSpiderIdx=GameCore.Utils.Valid.isNumber(I)?I:at,this.cardBackSpiderIdx=GameCore.Utils.Valid.isNumber(w)?w:st,this.backgroundSpiderDesktopIdx=GameCore.Utils.Valid.isNumber(P)?P:rt,this.cardFaceSpiderDesktopIdx=GameCore.Utils.Valid.isNumber(k)?k:ot,this.cardBackSpiderDesktopIdx=GameCore.Utils.Valid.isNumber(_)?_:ct,this.modifiedOptions=Array.isArray(O)?O:ut,this.largeWidthLayout=GameCore.Utils.Valid.isBoolean(x)?x:ht,this.relaxedSpider=GameCore.Utils.Valid.isBoolean(B)?B:ft,this.suitSize=GameCore.Utils.Valid.isString(R)?R:dt,this.difficulty=GameCore.Utils.Valid.isString(D)?D:pt,this.autoMoveToFoundation=GameCore.Utils.Valid.isBoolean(M)?M:gt,this.highlightLowCards=GameCore.Utils.Valid.isBoolean(N)?N:mt,this.gameType="klondike"==G||"spider"==G||"freecell"==G?G:vt}return e.prototype.toObject=function(){return{sound:this.sound,music:this.music,vibrate:this.vibrate,vibrate2:this.vibrate2,language:this.language,theme:this.theme,tapToMove:this.tapToMove,autoHints:this.autoHints,autoComplete:this.autoComplete,drawMode3:this.drawMode3,backgroundKlondikeIdx:this.backgroundKlondikeIdx,cardFaceKlondikeIdx:this.cardFaceKlondikeIdx,cardBackKlondikeIdx:this.cardBackKlondikeIdx,backgroundKlondikeDesktopIdx:this.backgroundKlondikeDesktopIdx,cardFaceKlondikeDesktopIdx:this.cardFaceKlondikeDesktopIdx,cardBackKlondikeDesktopIdx:this.cardBackKlondikeDesktopIdx,backgroundFreeCellIdx:this.backgroundFreeCellIdx,cardFaceFreeCellIdx:this.cardFaceFreeCellIdx,cardBackFreeCellIdx:this.cardBackFreeCellIdx,backgroundFreeCellDesktopIdx:this.backgroundFreeCellDesktopIdx,cardFaceFreeCellDesktopIdx:this.cardFaceFreeCellDesktopIdx,cardBackFreeCellDesktopIdx:this.cardBackFreeCellDesktopIdx,backgroundSpiderIdx:this.backgroundSpiderIdx,cardFaceSpiderIdx:this.cardFaceSpiderIdx,cardBackSpiderIdx:this.cardBackSpiderIdx,backgroundSpiderDesktopIdx:this.backgroundSpiderDesktopIdx,cardFaceSpiderDesktopIdx:this.cardFaceSpiderDesktopIdx,cardBackSpiderDesktopIdx:this.cardBackSpiderDesktopIdx,largeWidthLayout:this.largeWidthLayout,modifiedOptions:this.modifiedOptions,leftHanded:this.leftHanded,suitSize:this.suitSize,difficulty:this.difficulty,relaxedSpider:this.relaxedSpider,autoMoveToFoundation:this.autoMoveToFoundation,highlightLowCards:this.highlightLowCards,gameType:this.gameType}},e}(),Tt=yt,Ct=GameCore.Utils,Et=Ct.Valid,At=Ct.Object,St=function(){function e(e){this.score=void 0,this.settings=void 0,this.gameData=void 0,this.klondikeGuideDisplays=void 0,this.freecellGuideDisplays=void 0,this.spiderGuideDisplays=void 0,this.setupDefaultData(),this.updateScore(e),this.updateSettings(e),this.updateGameData(e),this.updateUserGuideDisplays(e)}var t=e.prototype;return t.setupDefaultData=function(){this.score={spider:0,klondike:0,freecell:0},this.settings=(0,s.Z)({},xe),this.gameData={coins:0,diamond:0,lastReceiveGift:0,dailyRewarded:{lastRewarded:0,logDays:[]},dailyTasks:{startedTime:0,logTasks:{}},countItems:{undoCount:5,hintCount:5,lastTimeUpdate:0},game_stats:{},tournaments:[],current_board:{},journeyLevel:{spider:1,freecell:1,klondike:1},numberOfTrophy:0,journeySeason:"journey-season-1",newUserEasyGameCount:-1},this.klondikeGuideDisplays=0,this.freecellGuideDisplays=0,this.spiderGuideDisplays=0},t.updateScore=function(e){var t=e.score;!1!==Et.isObject(t)&&(this.score=t)},t.updateSettings=function(e){var t=e.settings;if(!1!==Et.isObject(t)){var n=new Tt(t).toObject();this.settings=n}},t.updateGameData=function(e){var t=e.gameData;if(!1!==Et.isObject(t)){if(At.hasOwn(t,"coins")&&Et.isNumber(t.coins)&&(this.gameData.coins=t.coins),At.hasOwn(t,"diamond")&&Et.isNumber(t.diamond)&&(this.gameData.diamond=t.diamond),At.hasOwn(t,"lastReceiveGift")&&Et.isNumber(t.lastReceiveGift)&&(this.gameData.lastReceiveGift=t.lastReceiveGift),At.hasOwn(t,"dailyRewarded")&&Et.isObject(t.dailyRewarded)){var n=t.dailyRewarded;At.hasOwn(n,"lastRewarded")&&Et.isNumber(n.lastRewarded)&&(this.gameData.dailyRewarded.lastRewarded=n.lastRewarded),At.hasOwn(n,"logDays")&&Array.isArray(n.logDays)&&(this.gameData.dailyRewarded.logDays=n.logDays)}if(At.hasOwn(t,"dailyTasks")&&Et.isObject(t.dailyTasks)){var i=t.dailyTasks;At.hasOwn(i,"startedTime")&&Et.isNumber(i.startedTime)&&(this.gameData.dailyTasks.startedTime=i.startedTime),At.hasOwn(i,"logTasks")&&Et.isObject(i.logTasks)&&(this.gameData.dailyTasks.logTasks=i.logTasks)}At.hasOwn(t,"journeyLevel")&&Et.isObject(t.journeyLevel)&&(this.gameData.journeyLevel=t.journeyLevel),At.hasOwn(t,"journeySeason")&&Et.isString(t.journeySeason)&&(this.gameData.journeySeason=t.journeySeason),At.hasOwn(t,"numberOfTrophy")&&Et.isNumber(t.numberOfTrophy)&&(this.gameData.numberOfTrophy=t.numberOfTrophy),At.hasOwn(t,"current_board")&&Et.isObject(t.current_board)&&(this.gameData.current_board=t.current_board),this.gameData.countItems=t.countItems,this.gameData.game_stats=t.game_stats,this.gameData.tournaments=t.tournaments,this.gameData.newUserEasyGameCount=t.newUserEasyGameCount}},t.updateUserGuideDisplays=function(e){var t=e.klondikeGuideDisplays,n=e.freecellGuideDisplays,i=e.spiderGuideDisplays;!1!==Et.isNumber(t)&&!1!==Et.isNumber(n)&&!1!==Et.isNumber(i)&&(this.klondikeGuideDisplays=t,this.freecellGuideDisplays=n,this.spiderGuideDisplays=i)},t.toObject=function(){return{score:this.score,settings:this.settings,gameData:this.gameData,klondikeGuideDisplays:this.klondikeGuideDisplays,freecellGuideDisplays:this.freecellGuideDisplays,spiderGuideDisplays:this.spiderGuideDisplays}},t.convertToPlayerData=function(){var e=this.gameData,t=e.coins,n=e.diamond,i=e.dailyTasks,a=e.dailyRewarded,s=e.lastReceiveGift,r=e.countItems,o=e.game_stats,c=e.tournaments,h=e.current_board,u=e.journeyLevel,l=e.numberOfTrophy,d=e.journeySeason,p=e.newUserEasyGameCount;return{score:this.score,settings:this.settings,customFields:{coins:t,diamond:n,dailyTasks:i,dailyRewarded:a,lastReceiveGift:s,countItems:r,game_stats:o,tournaments:c,current_board:h,journeyLevel:u,numberOfTrophy:l,journeySeason:d,newUserEasyGameCount:p},klondikeGuideDisplays:this.klondikeGuideDisplays,freecellGuideDisplays:this.freecellGuideDisplays,spiderGuideDisplays:this.spiderGuideDisplays}},t.convertToFacebookData=function(e){var t=e.score,n=e.settings,i=e.customFields,a=e.klondikeGuideDisplays,s=e.freecellGuideDisplays,r=e.spiderGuideDisplays;return this.updateScore({score:t}),this.updateSettings({settings:n}),this.updateGameData({gameData:i}),this.updateUserGuideDisplays({klondikeGuideDisplays:a,freecellGuideDisplays:s,spiderGuideDisplays:r}),this.toObject()},e}(),bt=n(639),It=GameCore.Configs.ApiHost,wt=function(){var e=(0,r.Z)(l().mark((function e(t){var n;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,bt.v)("players?platform=ms-games",t,{},It,10);case 2:return n=e.sent,e.abrupt("return",(null==n?void 0:n.data)||{});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Pt=function(){var e=(0,r.Z)(l().mark((function e(t){var n;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",null);case 3:return n=e.sent,e.abrupt("return",(null==n?void 0:n.data)||{});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),kt="PLAYER_RECEIVED",_t="PLAYER_DATA_UPDATE",xt="PLAYER_SCORE_UPDATE",Ot="PLAYER_PROFILE_UPDATE",Lt="PLAYER_SETTING_UPDATE",Rt="PLAYER_CONNECTED_PLAYERS_UPDATE",Dt=n(630),Bt=function(e){function t(t,n){var i;return(i=e.call(this,t)||this).payload=void 0,i.name="PlayerDataNameNotSupport",i.message=t||"The name of player data is not supported",i.payload=n||{},i}return(0,o.Z)(t,e),t}((0,W.Z)(Error)),Mt="player",Nt=(0,pe.P1)([function(e){return e[Mt]}],(function(e){return e})),Gt=(0,pe.P1)([Nt],(function(e){return e.playerId})),Ft=(0,pe.P1)([Nt],(function(e){return e.ASID})),Zt=(0,pe.P1)([function(e){return e[Mt].data}],(function(e){return e})),Ut=((0,pe.P1)([Zt],(function(e){return e.settings})),(0,pe.P1)([function(e){return e[Mt].connectedPlayers}],(function(e){return e}))),zt=(0,pe.P1)([Ut,function(e,t){return t.limit},function(e,t){return t.offset}],(function(e,t,n){if("number"!==typeof t)return[];if("number"!==typeof n)return[];var i=ae()(e);return A()(i).call(i,n,t+n)||[]})),Ht=(0,pe.P1)([Zt],(function(e){return e.score})),Wt=(0,pe.P1)([Zt],(function(e){return e.customFields})),Yt=(0,pe.P1)([Wt],(function(e){return void 0===(null==e?void 0:e.tournaments)?[]:e.tournaments})),Kt=GameCore.Configs,Vt=Kt.AppId,jt=Kt.Tutorial,Jt=function(e,t){return function(n){var i=e.playerId,a=e.name,s=e.photo,r=e.locale;n({type:kt,payload:{playerId:i,name:a,photo:s,locale:r,data:t||{}}})}},Xt=function(e){return{type:Rt,payload:{connectedPlayers:e}}},qt=function(e,t){return function(){var n=(0,r.Z)(l().mark((function n(a,s){var r,o,c;return l().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,a({type:Lt,payload:{name:e,value:t}});case 3:r=s(),o=Zt(r),c=new St({}).convertToFacebookData(o),FBInstant.player.setDataAsync(c),n.next=12;break;case 9:n.prev=9,n.t0=n.catch(0),(0,i.tO)(n.t0);case 12:case"end":return n.stop()}}),n,null,[[0,9]])})));return function(e,t){return n.apply(this,arguments)}}()},Qt=function(e,t){return function(){var n=(0,r.Z)(l().mark((function n(a,s){var r,o,c,h,u;return l().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,o={customFields:(r={},r[e]=t,r)},n.next=4,a(en(o));case 4:c=s(),h=Zt(c),u=new St({}).convertToFacebookData(h),FBInstant.player.setDataAsync(u),n.next=15;break;case 10:if(n.prev=10,n.t0=n.catch(0),!(n.t0 instanceof Bt)){n.next=14;break}return n.abrupt("return");case 14:(0,i.tO)(n.t0);case 15:case"end":return n.stop()}}),n,null,[[0,10]])})));return function(e,t){return n.apply(this,arguments)}}()},$t=function(e){return function(){var t=(0,r.Z)(l().mark((function t(n,a){var s,r,o,c;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,s={customFields:e},t.next=4,n(en(s));case 4:r=a(),o=Zt(r),c=new St({}).convertToFacebookData(o),FBInstant.player.setDataAsync(c),t.next=16;break;case 10:if(t.prev=10,t.t0=t.catch(0),!(t.t0 instanceof Bt)){t.next=15;break}return t.abrupt("return");case 15:(0,i.tO)(t.t0);case 16:case"end":return t.stop()}}),t,null,[[0,10]])})));return function(e,n){return t.apply(this,arguments)}}()},en=function(e){return{type:_t,payload:{data:e}}},tn=function(e){return function(){var t=(0,r.Z)(l().mark((function t(n,a){var s,r,o,c;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,!jt.ForceUseTutorial){t.next=3;break}return t.abrupt("return");case 3:if("klondike"!=e){t.next=8;break}return t.next=6,n(en({klondikeGuideDisplays:1}));case 6:t.next=16;break;case 8:if("freecell"!=e){t.next=13;break}return t.next=11,n(en({freecellGuideDisplays:1}));case 11:t.next=16;break;case 13:if("spider"!=e){t.next=16;break}return t.next=16,n(en({spiderGuideDisplays:1}));case 16:s=a(),r=Gt(s),o=Zt(s),c=new St({}).convertToFacebookData(o),FBInstant.player.setDataAsync(c),Pt(r),t.next=27;break;case 24:t.prev=24,t.t0=t.catch(0),(0,i.tO)(t.t0);case 27:case"end":return t.stop()}}),t,null,[[0,24]])})));return function(e,n){return t.apply(this,arguments)}}()},nn=function(e,t){return function(){var n=(0,r.Z)(l().mark((function n(a,s){var r,o,c;return l().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,a({type:xt,payload:{score:e,gameType:t}});case 3:wt({score:e}),r=s(),o=Zt(r),c=new St({}).convertToFacebookData(o),FBInstant.player.setDataAsync(c),n.next=13;break;case 10:n.prev=10,n.t0=n.catch(0),(0,i.tO)(n.t0);case 13:case"end":return n.stop()}}),n,null,[[0,10]])})));return function(e,t){return n.apply(this,arguments)}}()},an=function(e){function t(){return e.apply(this,arguments)||this}(0,o.Z)(t,e);var n=t.prototype;return n.incUserGuideDisplays=function(){var e=(0,r.Z)(l().mark((function e(t){var n;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.game.storage,e.next=3,n.dispatch(tn(t));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.receiveData=function(){var e=(0,r.Z)(l().mark((function e(t,n){var i;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=this.game.storage,e.next=3,i.dispatch(Jt(t,n));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}(),n.updateData=function(){var e=(0,r.Z)(l().mark((function e(){var t;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.game.storage,e.next=3,t.dispatch(function(){var e=(0,r.Z)(l().mark((function e(t,n){var a,s,r,o,c,h,u,d;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a=n(),s=Nt(a),r=s.playerId,o=s.name,c=s.photo,h=s.locale,e.next=6,FBInstant.player.getASIDAsync();case 6:return u=e.sent,d={appId:Vt,playerId:r,name:o,photo:c,locale:h,ASID:u},e.next=10,t({type:Ot,payload:{profile:d}});case 10:return e.next=12,wt(d);case 12:e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),(0,i.tO)(e.t0);case 17:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(t,n){return e.apply(this,arguments)}}());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.setBestScore=function(){var e=(0,r.Z)(l().mark((function e(t,n){var i;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=this.game.storage,e.next=3,i.dispatch(nn(t,n));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}(),n.setSetting=function(){var e=(0,r.Z)(l().mark((function e(t,n){var i;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=this.game.storage,e.next=3,i.dispatch(qt(t,n));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}(),n.setCustomData=function(){var e=(0,r.Z)(l().mark((function e(t,n){var i;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=this.game.storage,e.next=3,i.dispatch(Qt(t,n));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}(),n.setMultiCustomData=function(){var e=(0,r.Z)(l().mark((function e(t){var n;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.game.storage,e.next=3,n.dispatch($t(t));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.requestConnectedPlayers=function(){var e=(0,r.Z)(l().mark((function e(){var t;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.game.storage,e.next=3,t.dispatch(function(){var e=(0,r.Z)(l().mark((function e(t){var n,a,s,r;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,FBInstant.player.getConnectedPlayersAsync();case 3:if(a=e.sent,s=function(e){return!!e},r=Le()(n=De()(a).call(a,(function(e){var t=e.getID(),n=e.getName(),i=e.getPhoto();return t&&n&&i?new Dt.Z(t,n,i).toObject():null}))).call(n,s),!(r.length<1)){e.next=8;break}return e.abrupt("return");case 8:t(Xt(r)),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),(0,i.tO)(e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t){return e.apply(this,arguments)}}());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.updateConnectedPlayers=function(){var e=(0,r.Z)(l().mark((function e(t){var n;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.game.storage,e.next=3,n.dispatch(Xt(t));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.joinTournament=function(){var e=(0,r.Z)(l().mark((function e(t){var n,i,a;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=this.getTournaments(),!D()(i).call(i,(function(e){return e.leaderboardId===t.leaderboardId}))){e.next=3;break}return e.abrupt("return");case 3:return a=x()(n=[]).call(n,i,[t]),e.next=6,this.setMultiCustomData({tournaments:a});case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.getPlayer=function(){return Nt(this.state)},n.getPlayerId=function(){return this.getPlayer().playerId},n.getPlayerASID=function(){return Ft(this.state)},n.getPlayerData=function(){return this.getPlayer().data},n.getPlayerSetting=function(e){var t=this.getPlayerSettings();return"string"!==typeof e?null:GameCore.Utils.Object.hasOwn(t,e)?t[e]:GameCore.Utils.Object.hasOwn(xe,e)?xe[e]:null},n.getPlayerSettings=function(){return this.getPlayerData().settings},n.getPlayerIsNew=function(){return this.getPlayer().isUserNew},n.getIsKlondikeGuideDisplay=function(){return this.getPlayerData().klondikeGuideDisplays>0},n.getIsFreecellGuideDisplay=function(){return this.getPlayerData().freecellGuideDisplays>0},n.getIsSpiderGuideDisplay=function(){return this.getPlayerData().spiderGuideDisplays>0},n.getDiamond=function(){var e=this.getCustomData("diamond");return GameCore.Utils.Valid.isNumber(e)?e:0},n.getJourneyLevel=function(e){var t=this.getCustomData("journeyLevel");if(!GameCore.Utils.Valid.isObject(t))return 1;switch(e){case"freecell":return t.freecell;case"klondike":return t.klondike;case"spider":return t.spider}},n.getNumberOfTrophy=function(){var e=this.getCustomData("numberOfTrophy");return GameCore.Utils.Valid.isNumber(e)?e:0},n.getPlayingJourneySeason=function(){var e=this.game.player.getCustomData("journeySeason");return GameCore.Utils.Valid.isString(e)?e:"journey-season-1"},n.getBestScore=function(e){return Ht(this.state)[e]||0},n.getCustomData=function(e){var t=Wt(this.state);return GameCore.Utils.Valid.isObject(t)&&GameCore.Utils.Object.hasOwn(t,e)?t[e]:null},n.getConnectedPlayers=function(){return Ut(this.state)},n.getConnectedPlayerIds=function(e,t){return zt(this.state,{limit:e,offset:t})},n.getTournaments=function(){return Yt(this.state)},n.getCountItems=function(){return this.getCustomData("countItems")},(0,he.Z)(t,[{key:"state",get:function(){return this.game.storage.getState()}}]),t}(Phaser.Plugins.BasePlugin),sn=an,rn=n(32),on=n.n(rn),cn=GameCore.Configs.ApiHost,hn=function(){var e=(0,r.Z)(l().mark((function e(t){var n,i;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=GameCore.Utils.String.params(t),e.next=3,(0,bt.U)("players?"+n,{},cn);case 3:return i=e.sent,e.abrupt("return",(null==i?void 0:i.data)||[]);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),un="PROFILES_DATA_UPDATE",ln="profile",dn=(0,pe.P1)([function(e){return e[ln].data}],(function(e){return e})),pn=(0,pe.P1)([function(e){return e[ln].profileIds}],(function(e){return e})),fn=GameCore.Configs,gn=fn.Tournament,mn=fn.LeadersBoard,vn=function(e){return function(){var t=(0,r.Z)(l().mark((function t(n,a){var s,r,o,c,h,u;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,s=a(),r=pn(s),!((o=GameCore.Utils.Array.difference(e,r)).length<1)){t.next=6;break}return t.abrupt("return");case 6:return t.next=8,hn({playerIds:o});case 8:c=t.sent,gn.UseMock&&mn.UseMock&&(c=De()(h=on()(u=new Array(o.length)).call(u,null)).call(h,(function(e,t){var n=t+1;return{playerId:"player-0"+n,name:"MPlayer "+n,photo:"./assets/images/others/avatar.jpg",rank:n,score:Math.floor(17*Math.random()*1e3/n)}}))),n({type:un,payload:{data:c}}),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(0),(0,i.tO)(t.t0);case 16:case"end":return t.stop()}}),t,null,[[0,13]])})));return function(e,n){return t.apply(this,arguments)}}()},yn=function(e){function t(){return e.apply(this,arguments)||this}(0,o.Z)(t,e);var n=t.prototype;return n.requestProfiles=function(){var e=(0,r.Z)(l().mark((function e(t){var n;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.game.storage,e.next=3,n.dispatch(vn(t));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.getProfiles=function(){return dn(this.state)},(0,he.Z)(t,[{key:"state",get:function(){return this.game.storage.getState()}}]),t}(Phaser.Plugins.BasePlugin),Tn=yn,Cn=n(11),En=n.n(Cn),An=n(188),Sn=n.n(An),bn=["player","match"],In="null",wn=GameCore.Utils,Pn=wn.Valid,kn=wn.Object,_n=GameCore.Configs.Rollbar,xn=_n.UseMockup,On=_n.FilterError,Ln=function(e){function t(){for(var t,n,i=arguments.length,s=new Array(i),r=0;r<i;r++)s[r]=arguments[r];return(n=e.call.apply(e,x()(t=[this]).call(t,s))||this).enable=void 0,n.rollbar=void 0,n.events=[],n.beforeSend=function(e,t,i){xn&&n.showPopupError(i)},n.checkIgnore=function(e,t,i){try{return!!n.isErrorIgnore(t)}catch(a){return!1}},n.showPopupError=function(e){var t,i,a,s,r,o=null==e||null==(t=e.body)||null==(i=t.trace)?void 0:i.exception;o&&n.events.push(o);var c=(null==e||null==(a=e.body)||null==(s=a.trace)?void 0:s.frames)||[];(r=n.events).push.apply(r,c);var h=document.getElementById("popup-error");h||((h=document.createElement("div")).id="popup-error",document.body.appendChild(h)),h.innerHTML='<div style="color: #fff; display: flex; flex-flow: column; align-items: center; ">\n      <pre id="json" style="overflow: auto; background-color: rgb(195 112 97 / 80%); padding: 10px; max-height: 80vh; max-width: 90vw; border: 5px solid #545454;">'+M()(n.events,null,2)+'</pre>\n      <button id="close" style="cursor: pointer; padding: 10px 20px; border-radius: 100px;">Close</button>\n      </div>',h.style="top: 0px; z-index: 10000; width: 100vw; max-height: 100vh; position: absolute; display: flex; align-items: center; justify-content: center;";var u=document.getElementById("close");u&&(u.onclick=n.closePopup)},n.closePopup=function(){n.events=[{}];var e=document.getElementById("popup-error");null==e||e.remove()},n.isNoneErrorEvent=function(e){if(!e||0===e.length)return!1;if(!e[0].message)return!1;return"Non-Error promise rejection captured with keys: code, message"===e[0].message},n.isErrorIgnore=function(e){if(!e||0===e.length)return!1;var t=!1,i=e[0];return i instanceof Object&&(t=n.isIgnoreByCode(i)||n.isIgnoreByMessage(i)),t},n.isIgnoreByCode=function(e){if(kn.hasOwn(e,"code")){var t=e.code,n=On.Codes,i=n.accepted,a=n.ignored;if("string"===typeof t){if(En()(i).call(i,t)>=0)return!1;if(En()(a).call(a,t)>=0)return!0}}if(kn.hasOwn(e,"name")){var s=e.name,r=On.Codes,o=r.accepted,c=r.ignored;if("string"===typeof s){if(En()(o).call(o,s)>=0)return!1;if(En()(c).call(c,s)>=0)return!0}}return!1},n.isIgnoreByMessage=function(e){if(kn.hasOwn(e,"message")){var t=e.message,n=On.Messages,i=n.accepted,a=n.ignored;if("string"===typeof t){if(En()(i).call(i,t)>=0)return!1;if(En()(a).call(a,t)>=0)return!0}}return!1},n.addExtraState=function(){try{if(!kn.hasOwn(window,"game"))return;if(!kn.hasOwn(window.game,"storage"))return;if(!kn.hasOwn(window.game.storage,"getState"))return;var e=(0,window.game.storage.getState)()||{},t=e.player,i=e.match,s=(0,a.Z)(e,bn);n.rollbar.configure({payload:{player:t,match:i,other:s}})}catch(r){}},n}(0,o.Z)(t,e);var n=t.prototype;return n.setup=function(){this.rollbar=new(Sn())({accessToken:In,checkIgnore:this.checkIgnore,onSendCallback:this.beforeSend,captureUncaught:!0,scrubTelemetryInputs:!0,captureUnhandledRejections:!0,autoInstrument:{dom:!1,navigation:!1},payload:{environment:"production",client:{javascript:{code_version:"1"}},server:{root:"webpack:///./",branch:"master"}}}),this.enable=!0,this.sendTestException()},n.configure=function(e){this.rollbar&&this.rollbar.configure(e)},n.sendTestException=function(){if(!Pn.isDebugger()){var e=FBInstant.player.getID();e&&this.rollbar.debug(new Error("Test rollbar"),{playerID:e})}},n.sendException=function(e,t){e&&this.enable&&this.rollbar&&(this.addExtraState(),this.rollbar.error(e,t))},t}(Phaser.Plugins.BasePlugin),Rn=Ln,Dn=n(646),Bn=function(e){function t(){return e.apply(this,arguments)||this}return(0,o.Z)(t,e),t.prototype.emit=function(t,n){return e.prototype.emit.call(this,t,n)},t}(Phaser.Events.EventEmitter),Mn=Bn,Nn=n(627),Gn=n(643),Fn=n(642),Zn=function(e){function t(t,n,i,a){var s;(s=e.call(this,t)||this).zone=void 0,s.background=void 0,s.setName(n),s.setVisible(!1);var r=s.scene.world.getWorldSize(),o=r.width,c=r.height;return s.setSize(i||o,a||c),s.addZone(),s.addBackground(),Fn.Z.registerObject(s.background),s}(0,o.Z)(t,e);var n=t.prototype;return n.open=function(e){GameCore.Utils.Valid.isObject(e)&&(this.setDataEnabled(),this.setData(e)),this.setBlockInputOutsideEnabled(!0),this.scene.screen.screensLayer.bringToTop(this),this.visible||(this.setVisible(!0),this.logPageviewOnOpen(),this.logEventOpen())},n.close=function(){this.visible&&(this.setVisible(!1),this.logPageviewOnClose())},n.incY=function(e){this.y+=e,this.background.y-=e},n.incX=function(e){this.x+=e,this.background.x-=e},n.incScale=function(e){this.scale+=e,this.background.scale-=e^e*(100/e)},n.setBlockInputOutsideEnabled=function(e){this.scene.input.setTopOnly(e)},n.addZone=function(){this.zone=this.scene.add.zone(0,0,this.width,this.height),this.zone.setInteractive({}),this.add(this.zone)},n.addBackground=function(){this.background=this.scene.add.image(0,0,Gn.Z.GAMEPLAY_DEFAULT.KEY,"blank"),this.background.setWorldSize(this.width,this.height),this.add(this.background)},n.handleResize=function(){var e=this.scene.world.getWorldSize(),t=e.width,n=e.height;this.setSize(t,n).setPosition(t/2,n/2),this.zone.setSize(this.width,this.height),this.background.setDisplaySize(this.width,this.height)},n.logPageviewOnOpen=function(){this.scene.analytics.pageview(this.name)},n.logPageviewOnClose=function(){this.scene.analytics.pageview(this.scene.scene.key)},n.logEventOpen=function(){this.scene.analytics.event(Nn._.SCREEN_OPEN,{screen_name:this.getScreenName()})},n.getScreenName=function(){return GameCore.Utils.String.toUpperCamelCase(this.name.toLowerCase())},t}(Phaser.GameObjects.Container),Un=Zn,zn={OPEN:"open",CLOSE:"close",CREATED:"created"};GameCore.Screen=Un,GameCore.Screens={Events:zn};var Hn=function(e){function t(){for(var t,n,i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];return(n=e.call.apply(e,x()(t=[this]).call(t,a))||this).events=void 0,n.screensLayer=void 0,n.screenOpenState={},n}(0,o.Z)(t,e);var n=t.prototype;return n.boot=function(){this.events=new Mn,this.registryScreenFactory(),this.screensLayer=this.scene.add.layer(),this.screensLayer.setDepth(Dn.Z.POPUP)},n.get=function(e){var t=this.screensLayer.getByName(e);return null===t?null:t},n.add=function(e,t,n,i){var a=this.get(e);return a||(a=this.scene.add.screen(e,t,n,i),this.screensLayer.add(a),this.events.emit(GameCore.Screens.Events.CREATED,a),this.screenOpenState[e]=!1,a)},n.open=function(e,t){var n=this.get(e);return!!n&&(!this.screenOpenState[e]&&(this.screenOpenState[e]=!0,n.open(t),n.emit(GameCore.Screens.Events.OPEN,n),this.events.emit(GameCore.Screens.Events.OPEN,n),!0))},n.close=function(e){var t=this.get(e);return!!t&&(!!this.screenOpenState[e]&&(this.screenOpenState[e]=!1,t.close(),t.emit(GameCore.Screens.Events.CLOSE,t),this.events.emit(GameCore.Screens.Events.CLOSE,t),!0))},n.bringToTop=function(e){var t=this.scene.children.getByName(e);t&&this.scene.children.bringToTop(t)},n.registryScreenFactory=function(){Phaser.GameObjects.GameObjectFactory.register("screen",this.createScreen)},n.createScreen=function(e,t,n,i){var a=new t(this.scene,e,n,i);return Phaser.Display.Align.In.Center(a,this.scene.gameZone),this.existing(a),a},t}(Phaser.Plugins.ScenePlugin),Wn=Hn,Yn=n(408),Kn=n.n(Yn),Vn=n(634),jn=n(636),Jn=n(635),Xn={currentSceneKey:"",prevSceneKey:""};(0,Jn.pV)();var qn,Qn,$n,ei,ti,ni,ii,ai,si,ri={processed:!1,contextId:"",contextType:"SOLO",entryPointData:{},currentGameMode:""},oi=ri,ci={data:{}},hi={token:"",isRequesting:!1},ui=((qn={})[fe]=function(e,t){return void 0===e&&(e=hi),(0,Jn.ZP)(e,(function(e){var n=t.payload;if(n){var i=n.token;switch(t.type){case ue:e.isRequesting=!0;break;case le:e.token=i,e.isRequesting=!1}}}))},qn),li=n(611),di={ASID:"",playerId:"",name:"",photo:"",locale:"",connectedPlayers:{},data:{score:{spider:0,freecell:0,klondike:0},settings:xe,klondikeGuideDisplays:0,freecellGuideDisplays:0,spiderGuideDisplays:0,customFields:{coins:0,diamond:0,lastReceiveGift:0,dailyRewarded:{lastRewarded:0,logDays:[]},dailyTasks:{startedTime:0,logTasks:{}},game_stats:{},tournaments:[],current_board:{},countItems:{undoCount:5,hintCount:5,lastTimeUpdate:0},journeyLevel:{spider:1,freecell:1,klondike:1},numberOfTrophy:0,journeySeason:"journey-season-1",newUserEasyGameCount:-1}},isUserNew:!0},pi=((Qn={})[Mt]=function(e,t){return void 0===e&&(e=di),(0,Jn.ZP)(e,(function(n){var i,a=t.payload;if(a){var r=a.name,o=a.value,c=a.data,h=void 0===c?{}:c,u=a.score,l=a.gameType,d=a.connectedPlayers,p=void 0===d?[]:d,f=a.profile;switch(t.type){case kt:var g=a.playerId,m=a.name,v=a.photo,y=a.locale,T=a.data;if(n.playerId=g,n.name=m,n.photo=v,n.locale=y,GameCore.Utils.Valid.isObject(T)){var C=T;n.data=(0,li.TS)(e.data,C)}(T.klondikeGuideDisplays>0||T.freecellGuideDisplays>0||T.spiderGuideDisplays>0)&&(n.isUserNew=!1);break;case Ot:var E=f.playerId,A=f.name,S=f.photo,b=f.locale,I=f.ASID;n.ASID=I,n.playerId=E,n.name=A,n.photo=S,n.locale=b;break;case xt:n.data.score=(0,s.Z)({},n.data.score,((i={})[l]=u,i));break;case Lt:n.data.settings[r]=o;break;case _t:n.data=(0,li.TS)(e.data,h),(h.klondikeGuideDisplays>0||h.freecellGuideDisplays>0||h.spiderGuideDisplays>0)&&(n.isUserNew=!1);break;case Rt:if(p.length<=0)break;var w=GameCore.Utils.Object.keyBy(p,"playerId");n.connectedPlayers=(0,li.TS)(e.connectedPlayers,w)}}}))},Qn),fi=n(584),gi=n.n(fi),mi={data:{},profileIds:[]},vi=(($n={})[ln]=function(e,t){return void 0===e&&(e=mi),(0,Jn.ZP)(e,(function(n){var i=t.payload;if(i){var a=i.data,r=void 0===a?[]:a;if(t.type===un){var o,c,h=GameCore.Utils.Object.keyBy(r,"playerId"),u=ae()(h);n.data=(0,li.TS)((0,s.Z)({},e.data),h),n.profileIds=x()(o=[]).call(o,new(gi())(x()(c=[]).call(c,e.profileIds,u)))}}}))},$n),yi="match",Ti="MATCH_GAMEPLAY_INITIALIZE",Ci="MATCH_GAMEPLAY_START",Ei="MATCH_GAMEPLAY_FINISH",Ai="MATCH_GAMEPLAY_UPDATE",Si="MATCH_STATS_DATA_CLEAR",bi="MATCH_STATS_DATA_UPDATE",Ii="MATCH_STATS_CURRENT_UPDATE",wi="MATCH_SINGLE_CREATE_REQUEST",Pi="MATCH_SINGLE_DETAIL_REQUEST",ki="MATCH_SINGLE_DATA_RECEIVED",_i="MATCH_SINGLE_DATA_CLEAR",xi="MATCH_CHALLENGE_JOIN_REQUEST",Oi="MATCH_CHALLENGE_CREATE_REQUEST",Li="MATCH_CHALLENGE_FINISH_REQUEST",Ri="MATCH_CHALLENGE_CONTINUE_REQUEST",Di="MATCH_CHALLENGE_DATA_RECEIVED",Bi="MATCH_CHALLENGE_DATA_CLEAR",Mi="MATCH_GROUP_CREATE_REQUEST",Ni="MATCH_GROUP_FINISH_REQUEST",Gi="MATCH_ONLINE_CREATE_REQUEST",Fi="MATCH_ONLINE_DATA_RECEIVED",Zi="open",Ui="active",zi="finished",Hi={mode:"",status:Zi,rescued:0,startAt:0,finishAt:0},Wi={single:{_id:"",data:{fen:""},playerId:"",status:Zi},group:{status:Zi,opponentInfo:{playerId:"",name:"",photo:""}},challenge:{_id:"",status:Zi,whitePlayerId:"",blackPlayerId:"",opponentInfo:{playerId:"",name:"",photo:""}},online:{_id:"",status:Zi,players:{}},updateAt:0,isRequesting:!1},Yi={current:{updateAt:0},data:{updateAt:0},isRequesting:!1},Ki=((ei={})[yi]=(0,Vn.UY)({gameplay:function(e,t){return void 0===e&&(e=Hi),(0,Jn.ZP)(e,(function(n){var i=t.payload;if(i){var a=i.mode,s=i.status;switch(t.type){case Ti:n.status=Zi,n.mode=Hi.mode,n.rescued=Hi.rescued,n.startAt=Hi.startAt,n.finishAt=Hi.finishAt,n.opponentInfo=Hi.opponentInfo;break;case Ci:n.mode=a,n.status=Ui,n.rescued=Hi.rescued,n.startAt=Date.now();break;case Ai:n.mode="string"===typeof a?a:e.mode,n.status=s||e.status;break;case Ei:n.status=zi,n.finishAt=Date.now();break;case"MATCH_GAMEPLAY_RESCUE":n.rescued+=1}}}))},match:function(e,t){return void 0===e&&(e=Wi),(0,Jn.ZP)(e,(function(n){var i=t.payload;if(i){var a=i.match,r=i.opponentInfo,o=i.players;switch(t.type){case wi:case Pi:case xi:case Li:case Gi:n.isRequesting=!0;break;case"MATCH_SINGLE_MOVE_UPDATED":n.single=(0,s.Z)({},e.single,a),n.updateAt=Date.now();break;case ki:n.isRequesting=!1,n.single=a||Wi.single;break;case _i:n.isRequesting=!1,n.single=Wi.single;break;case Oi:case Ri:n.isRequesting=!0,n.challenge.opponentInfo=r;break;case Di:n.isRequesting=!1,n.challenge=(0,s.Z)({},a||Wi.challenge),n.challenge.opponentInfo=e.challenge.opponentInfo;break;case Bi:n.isRequesting=!1,n.challenge=Wi.challenge;break;case Mi:n.group.status=Ui,r&&(n.group.opponentInfo=r);break;case Ni:n.group.status=zi;break;case"MATCH_ONLINE_DATA_CLEAR":n.online.status=Wi.online.status,n.online.players=Wi.online.players;break;case Fi:n.online.status=Ui,n.online.players=o;break;case"MATCH_ONLINE_FINISH_REQUEST":n.online.status=zi}}}))},stats:function(e,t){return void 0===e&&(e=Yi),(0,Jn.ZP)(e,(function(n){var i=t.payload;if(i){var a=i.playerId,r=i.stats,o=i.match,c=i.current,h=i.players,u=i.leaders;switch(t.type){case Si:delete n.data[a],n.current=Yi.current;break;case"MATCH_STATS_CONTEXT_REQUEST":n.data=Yi.data,n.isRequesting=!0;break;case"MATCH_STATS_CONTEXT_RECEIVED":n.data=r,n.isRequesting=!1;break;case bi:n.data[a]=r;break;case Ii:n.current=(0,li.TS)((0,s.Z)({},e.current),r);break;case Fi:ae()(h).forEach((function(e){n.data[e]={score:0}}));break;case"MATCH_ONLINE_STATS_UPDATE":u.forEach((function(e){var t=e.playerId,i=e.score,a=e.rank;n.data[t]={score:i,rank:a}}));break;case Di:var l=o||{},d=l.blackPlayerId,p=l.blackPlayerScore,f=l.whitePlayerId,g=l.whitePlayerScore,m=l.whitePlayerLevel,v=l.blackPlayerLevel;if(!d||!f)break;c&&(n.current=c),n.data[d]={score:p,level:v},n.data[f]={score:g,level:m}}}}))}}),ei),Vi="tournament",ji="TOURNAMENT_ACTIVE",Ji="TOURNAMENT_REQUEST",Xi="TOURNAMENT_RECEIVED",qi={active:!1,tournamentId:null,leaderboardId:null,gameType:null,bestSessionScore:0,isRequesting:!1},Qi=((ti={})[Vi]=function(e,t){return void 0===e&&(e=qi),(0,Jn.ZP)(e,(function(n){var i=t.payload;if(i){var a=i.score,s=void 0===a?0:a,r=i.tournamentId,o=i.leaderboardId,c=i.gameType;switch(t.type){case ji:n.active=!0,n.tournamentId=r,n.leaderboardId=o,n.gameType=c;break;case Ji:n.isRequesting=!0;break;case Xi:n.isRequesting=!1,s>e.bestSessionScore&&(n.bestSessionScore=s)}}}))},ti),$i="leaderboards",ea=n(81),ta=n.n(ea),na=n(45),ia=n.n(na),aa="LEADERBOARD_DATA_REQUEST",sa="LEADERBOARD_DATA_UPDATE",ra="LEADERBOARD_DATA_CLEAR",oa={leaderboardId:"",type:"",limit:0,offset:0,leaders:{},isRequesting:!1},ca=((ni={})[$i]=function(e,t){return void 0===e&&(e=oa),(0,Jn.ZP)(e,(function(n){var i=t.payload;if(i){var a=i.leaderboardId,r=i.type,o=i.limit,c=i.offset,h=i.leaders;switch(t.type){case aa:e.type!==r&&0===c&&(n.leaders=oa.leaders),n.isRequesting=!0,n.leaderboardId=a,n.type=r,n.limit=o,n.offset=c;break;case sa:if(n.isRequesting=!1,e.type!==r)break;var u=GameCore.Utils.Json.clone((0,s.Z)({},e.leaders,h)),l=ta()(u),d=Le()(l).call(l,(function(e){return!!e.name&&!!e.photo}));ia()(d).call(d,(function(e,t){return+t.score-+e.score})),d.forEach((function(t,i){t.rank=i+1,e.leaders[t.playerId]||(n.leaders[t.playerId]=t)}));break;case ra:n.isRequesting=!1,n.type=oa.type,n.limit=oa.limit,n.offset=oa.offset,n.leaders=oa.leaders,n.leaderboardId=oa.leaderboardId}}}))},ni),ha="missions",ua="MISSIONS_DATA_REQUEST",la="MISSIONS_DATA_RECEIVE",da="MISSION_UPDATE",pa="MISSION_COMPLETED",fa={mission:null,missions:null,isRequesting:!1},ga=((ii={})[ha]=function(e,t){return void 0===e&&(e=fa),(0,Jn.ZP)(e,(function(n){var i,a,s=t.payload;if(s){var r=s.name,o=s.type,c=s.value,h=s.missions;switch(t.type){case ua:n.isRequesting=!0;break;case la:if(n.isRequesting=!1,h.length<1)return;n.missions={},h.forEach((function(e){n.missions[e.name]=e}));break;case"MISSION_START":if(null===e.missions)break;var u=e.missions[r];n.mission={name:r,process:{},require:u.require,reward:u.reward},ae()(u.require).forEach((function(e){n.mission.process[e]=0}));break;case da:if((null==(i=e.mission)?void 0:i.name)!==r)break;n.mission.process[o]+=c;break;case pa:if((null==(a=e.mission)?void 0:a.name)!==r)break;n.mission=null}}}))},ii),ma="dailyTasks",va="DAILY_TASKS_DATA_REQUEST",ya="DAILY_TASKS_DATA_RECEIVE",Ta="DAILY_TASKS_PROCESS_UPDATE",Ca="DAILY_TASK_VALUE_ADD",Ea="DAILY_TASK_FINISHED",Aa={tasks:[],process:[],isRequesting:!1,isNotice:!1},Sa=((ai={})[ma]=function(e,t){return void 0===e&&(e=Aa),(0,Jn.ZP)(e,(function(n){var i=t.payload;if(i){var a=i.id,s=i.type,r=i.value,o=i.tasks,c=i.process;switch(t.type){case va:n.isRequesting=!0;break;case ya:n.isRequesting=!1,n.tasks=o;break;case Ta:n.process=c;break;case Ca:if(!e.process[a])break;n.process[a][s]+=r;break;case"DAILY_TASK_REWARDED":if(!e.process[a])break;n.process[a].rewarded=!0;break;case"DAILY_TASKS_SEEN":n.isNotice=!1;break;case Ea:n.isNotice=!0}}}))},ai),ba={rewards:[],isRequesting:!1},Ia=((si={}).dailyRewards=function(e,t){return void 0===e&&(e=ba),(0,Jn.ZP)(e,(function(e){var n=t.payload;if(n){var i=n.rewards;switch(t.type){case"DAILY_REWARDS_REQUEST":e.isRequesting=!0;break;case"DAILY_REWARDS_RECEIVE":e.isRequesting=!1,e.rewards=i}}}))},si),wa=(0,Vn.UY)((0,s.Z)({scene:function(e,t){return void 0===e&&(e=Xn),(0,Jn.ZP)(e,(function(n){var i=t.payload;if(i){var a=i.sceneKey;if(t.type===jn.DW)n.currentSceneKey=a,n.prevSceneKey=e.currentSceneKey}}))},context:function(e,t){return void 0===e&&(e=ri),(0,Jn.ZP)(e,(function(e){var n=t.payload;if(n){var i=n.gameMode,a=n.contextId,s=n.contextType,r=n.entryPointData;switch(t.type){case jn.kL:e.contextId=a,e.contextType=s,e.entryPointData=r;break;case jn.fJ:e.contextId=a,e.contextType=s,e.processed=!0;break;case jn.EH:e.currentGameMode=i}}}))},messages:function(e,t){return void 0===e&&(e=ci),(0,Jn.ZP)(e,(function(n){var i=t.payload;if(i){var a=i.opponentId;if("string"===typeof a)switch(t.type){case jn.qj:e.data[a]?n.data[a].sent=!0:n.data[a]={sent:!0};break;case jn.rh:e.data[a]?n.data[a].sent=!1:n.data[a]={sent:!1}}}}))}},ui,pi,vi,Ki,Qi,ca,ga,Sa,Ia)),Pa=n(633),ka=function(e){return(0,Pa.xC)({reducer:wa,preloadedState:e,devTools:!0})},_a=function(e){function t(){for(var t,n,i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];return(n=e.call.apply(e,x()(t=[this]).call(t,a))||this).store=void 0,n.initiator=void 0,n.dispatch=function(e){return n.store.dispatch(e)},n.getState=function(){return n.store.getState()},n.subscribe=function(e){return n.store.subscribe(e)},n.watch=function(e,t){var i=Kn()((function(){var t=n.getState();return e(t)}));return n.subscribe(i((function(e){t(e)})))},n}(0,o.Z)(t,e);var n=t.prototype;return n.init=function(){this.store=ka({})},n.setInitiator=function(e){this.initiator=e},n.syncStore=function(){var e=(0,r.Z)(l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.initiator.initContext(),e.next=3,this.initiator.initPlayer();case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.initPlayerManually=function(){var e=(0,r.Z)(l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.initiator.initPlayer();case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),t}(Phaser.Plugins.BasePlugin),xa=_a,Oa=n(589),La=n.n(Oa),Ra=function(e){function t(t,n){var i;return(i=e.call(this,t,{type:"webfont",key:n.type})||this).payload=void 0,i.payload=n,i}(0,o.Z)(t,e);var n=t.prototype;return n.load=function(){var e;switch(this.payload.type){case"google":e=this.getGoogleFontConfig(this.payload);break;case"local":e=this.getLocalFontConfig(this.payload)}La().load(e)},n.getGoogleFontConfig=function(e){var t=this,n=e.character,i=e.fontName,a=e.fontWeight;return{google:{families:[i+":"+(void 0===a?400:a)],text:n},active:function(){t.loader.nextFile(t,!0)},timeout:15e3}},n.getLocalFontConfig=function(e){var t=this,n=e.fontName,i=e.fontType,a=document.createElement("style");document.head.appendChild(a);var s=a.sheet;if(s){var r="";switch(i){case"opentype":case"woff":r=".woff";break;case"truetype":r=".ttf"}var o='@font-face { font-family: "'+n+'"; src: url("assets/fonts/'+n+r+'") format("'+i+'"); }';s.insertRule(o,0)}return{custom:{families:[n]},active:function(){t.loader.nextFile(t,!0)},timeout:15e3}},t}(Phaser.Loader.File),Da=function(e){function t(){return e.apply(this,arguments)||this}return(0,o.Z)(t,e),t.prototype.addFont=function(e){var t=new Ra(this.scene.load,e);this.scene.load.addFile(t)},t}(Phaser.Plugins.ScenePlugin),Ba=Da,Ma=n(60),Na=function(e){function t(){return e.apply(this,arguments)||this}return(0,o.Z)(t,e),t.prototype.emit=function(t){return e.prototype.emit.call(this,t)},t}(Phaser.Events.EventEmitter),Ga=Na,Fa=n(638),Za=function(e){function t(){for(var t,n,i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];return(n=e.call.apply(e,x()(t=[this]).call(t,a))||this).events=void 0,n.previousLayout=void 0,n.resizeEventData=void 0,n.portraitRatio=void 0,n.portraitWidth=void 0,n.portraitHeight=void 0,n.landscapeRatio=void 0,n.landscapeWidth=void 0,n.landscapeHeight=void 0,n.worldWidth=void 0,n.worldHeight=void 0,n.worldRatio=void 0,n.autoResize=void 0,n.disableLandscape=void 0,n.fullSizeOnLandscape=void 0,n.currentLayout=void 0,n.forcePixelRatio=void 0,n.handleResize=(0,Ma.debounce)((function(){n.previousLayout=""+n.currentLayout,n.resize(),n.game.events.emit("world-resize")}),300),n}(0,o.Z)(t,e);var n=t.prototype;return n.configure=function(e){this.events=new Ga;var t=e.autoResize,n=e.portraitRatio,i=e.portraitWidth,a=e.portraitHeight,s=e.landscapeWidth,r=e.landscapeHeight,o=e.landscapeRatio,c=e.disableLandscape,h=e.fullSizeOnLandscape;this.autoResize=t,this.disableLandscape=c,this.fullSizeOnLandscape=h,this.portraitRatio=n,this.portraitWidth=i,this.portraitHeight=a,this.landscapeRatio=o,this.landscapeWidth=s,this.landscapeHeight=r,this.initWorldSize(),this.addEventResize()},n.resize=function(e){var t=this;e&&e>0&&(this.forcePixelRatio=e);var n=this.getCanvasSizeFixedRatio(this.worldRatio),i=n.width,a=n.height;this.resizeCanvas(i,a),this.game.scene.scenes.forEach((function(e){var n=e.cameras.main;if(n){var i=t.getZoomRatio(),a=t.getWorldSize(),s=a.width,r=a.height;n.setZoom(i),n.centerOn(s/2,r/2)}}));var s={width:this.worldWidth,height:this.worldHeight,isLayoutChanged:!1,newLayout:this.currentLayout};this.previousLayout!==this.currentLayout&&(s.isLayoutChanged=!0,s.newLayout=this.currentLayout),this.resizeEventData=s,this.events.emit(Fa.Z.RESIZE,s)},n.getResizeEventData=function(){return this.resizeEventData},n.resizeCanvas=function(e,t){this.game.canvas.width=e,this.game.canvas.height=t,this.game.scale.resize(e,t)},n.getWorldSize=function(){return{width:this.worldWidth,height:this.worldHeight}},n.initWorldSize=function(){if(this.worldWidth=this.portraitWidth,this.worldHeight=this.portraitHeight,this.isScreenSmallerRatio(this.portraitRatio))this.worldHeight=this.worldWidth/this.getScreenRatio();else if(!this.disableLandscape&&!this.isScreenSmallerRatio(this.landscapeRatio)){var e=this.getScreenWidth(),t=this.getScreenHeight();if(this.landscapeRatio=Math.max(Math.min(e/(t-0),2.111111111111111),1.22),this.worldHeight=this.landscapeHeight,this.worldWidth=this.worldHeight*this.landscapeRatio,this.currentLayout="landscape",this.fullSizeOnLandscape){this.worldRatio=this.worldWidth/this.worldHeight,this.landscapeRatio=this.getScreenRatio();var n=this.getCanvasSizeFixedRatio(this.landscapeRatio),i=n.width,a=n.height,s=this.getZoomRatio();this.worldWidth=i/s,this.worldHeight=a/s}}this.worldRatio=this.worldWidth/this.worldHeight},n.getZoomRatio=function(){var e=this.getWorldSize().width;return this.getCanvasSizeFixedRatio(this.worldRatio).width/e},n.getPixelRatio=function(){if(this.forcePixelRatio>0)return this.forcePixelRatio;if(GameCore.Utils.Device.isDesktop())return 2;var e=GameCore.Utils.Device.pixelRatio();return e=e>2.44?2.88:e>2?2:Math.round(e)},n.getPixelRatioForCanvas=function(){var e=GameCore.Utils.Device.pixelRatio();if(this.forcePixelRatio>0&&(e=this.forcePixelRatio),GameCore.Utils.Device.isDesktop())return Math.min(2,1200/(this.getScreenHeight()-0));var t=Math.max(1,e),n=1080/this.getScreenWidth();return t>2&&(t=Math.min(Math.round(2*t)/2,n)),t},n.getPhysicPixels=function(e,t){return e*t},n.getCanvasSizeFixedRatio=function(e){var t=this.getPixelRatioForCanvas(),n=this.getScreenWidth()*t,i=this.getScreenHeight()*t;return this.isLandscape()&&(i=(this.getScreenHeight()-0)*t),this.isScreenSmallerRatio(e)?i=n/e:n=i*e,{width:n,height:i}},n.getScreenRatio=function(){return this.getScreenWidth()/this.getScreenHeight()},n.getScreenHeight=function(){var e=document,t=e.body,n=e.documentElement,i=t.clientHeight,a=n.clientHeight;return Math.max(a,i)||0},n.getScreenWidth=function(){var e=document,t=e.body,n=e.documentElement,i=t.clientWidth,a=n.clientWidth;return Math.max(a,i)||0},n.isScreenSmallerRatio=function(e){var t=this.getScreenWidth(),n=this.getScreenHeight();return GameCore.Utils.Device.isDesktop()?t/(n-0)<e:t/n<e},n.addEventResize=function(){this.autoResize&&window.addEventListener("resize",this.handleResize)},n.isLandscape=function(){return!this.disableLandscape&&this.worldRatio>this.portraitRatio},t}(Phaser.Plugins.BasePlugin),Ua=Za,za=function(){function e(e,t,n){this.contextId=void 0,this.contextType=void 0,this.entryPointData=void 0,this.contextId=e||oi.contextId,this.contextType=t||oi.contextType,this.entryPointData=n||oi.entryPointData}return e.prototype.toObject=function(){return{contextId:this.contextId,contextType:this.contextType,entryPointData:this.entryPointData}},e}(),Ha=function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).name="InvalidPlayerId",i.message=t||"The playerId is not valid",i.payload=n,i}return(0,o.Z)(t,e),t}((0,W.Z)(Error)),Wa="share_invite",Ya="challenge_friend_match",Ka=n(631),Va=new Dt.Z("10","Your Friend",Ka.Z.AVATAR.FILE).toObject(),ja="single",Ja="challenge-friends",Xa="matching-group",qa="tournaments",Qa=(0,pe.P1)([function(e){return e.context}],(function(e){return e})),$a=(0,pe.P1)([function(e){return e.context.currentGameMode}],(function(e){return e})),es=function(e,t){return{type:jn.fJ,payload:{contextId:e,contextType:t}}},ts=function(e){return function(t){t({type:jn.EH,payload:{gameMode:e}}),(0,i.sw)("game-mode",e)}},ns={score:"score",settings:"settings",gameData:"gameData",klondikeGuideDisplays:"klondikeGuideDisplays",freecellGuideDisplays:"freecellGuideDisplays",spiderGuideDisplays:"spiderGuideDisplays"},is=n(641),as={sound:"sound",music:"music",vibrate:"vibrate",language:"language",theme:"theme",tapToMove:"tapToMove",autoHints:"autoHints",autoComplete:"autoComplete",drawMode3:"drawMode3",largeWidthLayout:"largeWidthLayout",leftHanded:"leftHanded",getGameKey:function(e){return e===is.Z.FREE_CELL?"FreeCell":e===is.Z.SPIDER?"Spider":"Klondike"},getThemeKey:function(e,t,n){return void 0===n&&(n=!1),t+"Klondike"+(n?"Desktop":"")+"Idx"},modifiedOptions:"modifiedOptions",gameType:"gameType",relaxedSpider:"relaxedSpider",suitSize:"suitSize",difficulty:"difficulty",highlightLowCards:"highlightLowCards",autoMoveToFoundation:"autoMoveToFoundation"},ss=as,rs=GameCore.Configs.SyncProfileFromAPI,os=function(e){var t=this;this.game=void 0,this.initContext=function(){var e=window.GameSDK.context.getID(),n=window.GameSDK.context.getType(),i=window.GameSDK.getEntryPointData(),a=new za(e,n,i).toObject(),s=a.contextId,r=a.contextType,o=a.entryPointData;t.game.storage.dispatch(function(e,t,n){return{type:jn.kL,payload:{contextId:e,contextType:t,entryPointData:n}}}(s,r,o))},this.initPlayer=(0,r.Z)(l().mark((function e(){var n,i,a,s,r,o,c,h,u,d,p,f,g,m;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.game.player,i=t.getPlayerInfo(),a=ta()(ns),e.next=5,FBInstant.player.getDataAsync(a);case 5:return s=e.sent,r=new St(s),e.next=11,t.maintainDataStructure(r);case 11:return r=e.sent,!0===r.toObject().settings.music&&window.GameSDK.isAudioEnabled()&&window.game.audio.playMusic(),o=r.convertToPlayerData(),c=o.settings.modifiedOptions,h=xe.autoComplete,u=xe.tapToMove,d=xe.autoHints,p=xe.largeWidthLayout,f=xe.gameType,g=xe.vibrate,m=xe.relaxedSpider,be()(c).call(c,ss.autoComplete)||(o.settings.autoComplete=h),be()(c).call(c,ss.autoHints)||(o.settings.autoHints=d),be()(c).call(c,ss.tapToMove)||(o.settings.tapToMove=u),be()(c).call(c,ss.relaxedSpider)||(o.settings.relaxedSpider=m),be()(c).call(c,ss.largeWidthLayout)||(o.settings.largeWidthLayout=p),be()(c).call(c,ss.gameType)||(o.settings.gameType=f),be()(c).call(c,ss.vibrate)||(o.settings.vibrate=g),e.next=26,n.receiveData(i,o);case 26:case"end":return e.stop()}}),e)}))),this.maintainDataStructure=function(){var e=(0,r.Z)(l().mark((function e(t){var n,i,a,r;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,rs){e.next=3;break}return e.abrupt("return",t);case 3:return e.next=5,FBInstant.player.getDataAsync(["isSynced","customFields"]);case 5:if(e.t0=e.sent,e.t0){e.next=8;break}e.t0={};case 8:if(n=e.t0,!0!==(n.isSynced||!1)){e.next=12;break}return e.abrupt("return",t);case 12:if(i=n.customFields||!1){e.next=15;break}return e.abrupt("return",t);case 15:return(a=t.convertToPlayerData()).customFields=i,r=new St({}).convertToFacebookData(a),e.next=20,FBInstant.player.setDataAsync((0,s.Z)({},r,{isSynced:!0}));case 20:return e.abrupt("return",new St(r));case 23:return e.prev=23,e.t1=e.catch(0),e.abrupt("return",t);case 27:case"end":return e.stop()}}),e,null,[[0,23]])})));return function(t){return e.apply(this,arguments)}}(),this.getPlayerInfo=function(){try{var e=window.GameSDK.player.getID(),t=window.GameSDK.player.getName(),n=window.GameSDK.player.getPhoto(),i=window.GameSDK.getLocale();if(!GameCore.Utils.Valid.isString(e))throw new Ha(null,{playerId:e});return GameCore.Utils.Valid.isString(t)||(t="You"),new Dt.Z(e,t,n,i).toObject()}catch(a){return new Dt.Z("123","You").toObject()}},this.game=e},cs=n(647),hs=GameCore.Ads.Types,us=[Nn._.BUTTON_CLICK,Nn._.SCREEN_OPEN],ls=function(e){function t(t,n,i){var a;return(a=e.call(this,"FacebookAnalytics",{prefix:n},"#0F52BA")||this).game=void 0,a.game=t,a.selfLog=!!i,a}(0,o.Z)(t,e);var n=t.prototype;return n.processEvent=function(e,t,n){var i;if(!(En()(us).call(us,e)>=0)){var a=this.getEventName(e),s={};De()(i=ae()(t||{})).call(i,(function(e){t&&"string"===typeof t[e]&&(s[e]=t[e])})),FBInstant.logEvent(a,n,s)}},n.processPageView=function(e){},n.processLevelStart=function(e,t,n){this.processEvent(Nn._.LEVEL_START,{level:e,score:t,level_name:n})},n.processLevelRescue=function(e,t,n){this.processEvent(Nn._.LEVEL_RESCUE,{level:e,score:t,level_name:n})},n.processLevelFail=function(e,t,n){this.processEvent(Nn._.LEVEL_END,{level:e,score:t,level_name:n,success:!1})},n.processLevelComplete=function(e,t,n){this.processEvent(Nn._.LEVEL_END,{level:e,score:t,level_name:n,success:!0})},n.processLoadInterstitialAd=function(e){var t=this.getEdaType(hs.INTERSTITIAL);this.processEvent(Nn._.AD_LOAD,{ad_type:t,screen_name:""+e})},n.processShowInterstitialAd=function(e){var t=this.getEdaType(hs.INTERSTITIAL);this.processEvent(Nn._.AD_SHOW,{ad_type:t,screen_name:""+e})},n.processLoadRewardedVideoAd=function(e){var t=this.getEdaType(hs.REWARDED);this.processEvent(Nn._.AD_LOAD,{ad_type:t,screen_name:""+e})},n.processShowRewardedVideoAd=function(e){var t=this.getEdaType(hs.REWARDED);this.processEvent(Nn._.AD_SHOW,{ad_type:t,screen_name:""+e})},n.processLoadAdFail=function(e){var t=e.type,n=e.placement,i=this.getEdaType(t);this.processEvent(Nn._.AD_LOAD_FAILED,{ad_type:i,screen_name:""+n})},n.processShowAdFail=function(e){var t=e.type,n=e.placement,i=this.getEdaType(t);this.processEvent(Nn._.AD_SHOW_FAILED,{ad_type:i,screen_name:""+n})},n.getEventName=function(e){return this.options.prefix+"_"+e},n.getEdaType=function(e){switch(e){case hs.INTERSTITIAL:return"interstitial";case hs.REWARDED:return"rewarded_video";case hs.BANNER:return"banner";case hs.PRE_ROLL:return"pre_roll";default:return"unknown"}},t}(GameCore.Analytics.BaseAnalytics),ds=GameCore.Ads.Types,ps=[Nn._.SCREEN_OPEN,"button_click","match_start","match_end","scroll"],fs=function(e){function t(t,n){var i;(i=e.call(this,"GoogleAnalytics",(0,s.Z)({},n),"#E35335")||this).game=void 0,i.trackingId=void 0,i.currentPath="/";var a=n.trackingId;i.game=t;var r=(GameCore.Configs.Analytics.GoogleAnalytics||{}).consoleLog;return i.selfLog=!!r,i.trackingId=a,i}(0,o.Z)(t,e);var n=t.prototype;return n.processEvent=function(e,t,n){if(!(En()(ps).call(ps,e)>=0)){var i=this.formatEventName(e),a=t?(0,s.Z)({},t):{};a=n?(0,s.Z)({},a,{value:n}):a,a=(0,s.Z)({},a,{page_path:this.currentPath,send_to:"GA"}),gtag("event",i,a)}},n.processLevelStart=function(e,t,n){this.processEvent(Nn._.LEVEL_START,{level:e,score:t,level_name:n})},n.processLevelRescue=function(e,t,n){this.processEvent(Nn._.LEVEL_RESCUE,{level:e,score:t,level_name:n})},n.processLevelFail=function(e,t,n){this.processEvent(Nn._.LEVEL_END,{level:e,score:t,level_name:n,success:!1})},n.processLevelComplete=function(e,t,n){this.processEvent(Nn._.LEVEL_END,{level:e,score:t,level_name:n,success:!0})},n.processLoadPreRollAd=function(e,t){var n=this.getEdaType(ds.PRE_ROLL);this.processEvent(Nn._.AD_LOAD,{ad_type:n,screen_name:""+e,ad_service:""+t})},n.processShowPreRollAd=function(e,t){var n=this.getEdaType(ds.PRE_ROLL);this.processEvent(Nn._.AD_SHOW,{ad_type:n,screen_name:""+e,ad_service:""+t}),this.processEvent(Nn._.AD_IMPRESSION,{ad_format:n})},n.processLoadInterstitialAd=function(e,t){var n=this.getEdaType(ds.INTERSTITIAL);this.processEvent(Nn._.AD_LOAD,{ad_type:n,screen_name:""+e,ad_service:""+t})},n.processShowInterstitialAd=function(e,t){var n=this.getEdaType(ds.INTERSTITIAL);this.processEvent(Nn._.AD_SHOW,{ad_type:n,screen_name:""+e,ad_service:""+t}),this.processEvent(Nn._.AD_IMPRESSION,{ad_format:"Interstitial"})},n.processLoadRewardedVideoAd=function(e,t){var n=this.getEdaType(ds.REWARDED);this.processEvent(Nn._.AD_LOAD,{ad_type:n,screen_name:""+e,ad_service:""+t})},n.processShowRewardedVideoAd=function(e,t){var n=this.getEdaType(ds.REWARDED);this.processEvent(Nn._.AD_SHOW,{ad_type:n,screen_name:""+e,ad_service:""+t}),this.processEvent(Nn._.AD_IMPRESSION,{ad_format:"Rewarded"})},n.processShowBannerAd=function(e,t,n){var i=this.getEdaType(ds.BANNER);this.processEvent(Nn._.AD_SHOW,{ad_type:i,banner_position:""+e,screen_name:""+t,ad_service:""+n})},n.processLoadAdFail=function(e){var t=e.type,n=e.placement,i=e.adService,a=this.getEdaType(t);this.processEvent(Nn._.AD_LOAD_FAILED,{ad_type:a,screen_name:""+n,ad_service:""+i})},n.processShowAdFail=function(e){var t=e.type,n=e.placement,i=e.adService,a=e.bannerPosition,s={ad_type:this.getEdaType(t),screen_name:""+n,ad_service:""+i};t===ds.BANNER&&(s.banner_position=""+a),this.processEvent(Nn._.AD_SHOW_FAILED,s)},n.processPageView=function(e){var t=this.getGameplayMode(),n="/"+t+"/"+e;this.currentPath=n,document.title=this.formatPageTitle(t,e),this.processEvent("page_view")},n.getGameplayMode=function(){var e=this.game.storage.getState();return $a(e)},n.formatEventName=function(e){return e.toLowerCase().replace(/:/g,"_")},n.formatPageTitle=function(e,t){return this.toUpperCamelCaseWithSpace(e)+"::"+this.toUpperCamelCaseWithSpace(t)},n.toUpperCamelCaseWithSpace=function(e){var t=e.replace(/[-_\s.]+(.)?/g,(function(e,t){return t?" "+t.toUpperCase():""}));return t.substr(0,1).toUpperCase()+t.substr(1)},n.getEdaType=function(e){switch(e){case ds.INTERSTITIAL:return"interstitial";case ds.PRE_ROLL:return"pre_roll";case ds.REWARDED:return"rewarded_video";case ds.BANNER:return"banner";default:return"unknown"}},t}(GameCore.Analytics.BaseAnalytics),gs="G-G56DMRTQWH",ms="null",vs=function(e){function t(){for(var t,n,a=arguments.length,s=new Array(a),o=0;o<a;o++)s[o]=arguments[o];return(n=e.call.apply(e,x()(t=[this]).call(t,s))||this).startGame=(0,r.Z)(l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n.auth.requestToken();case 3:return e.next=5,n.storage.syncStore();case 5:return n.configureSentry(),n.configureRollbar(),e.next=9,n.detectGameMode();case 9:n.initGoogleAnalytics(),n.analytics.event(Nn._.LOAD_START),n.scene.launch(cs.C.GLOBAL_SCENE),n.scene.start(cs.C.LOAD_SCENE),n.analytics.pageview(cs.C.LOAD_SCENE),e.next=19;break;case 16:e.prev=16,e.t0=e.catch(0),(0,i.tO)(e.t0);case 19:return e.prev=19,n.facebook.progressLoading.finishLoadingProgressFbBootScene(),n.scene.sleep(cs.C.BOOT_SCENE),e.finish(19);case 23:case"end":return e.stop()}}),e,null,[[0,16,19,23]])}))),n}(0,o.Z)(t,e);var n=t.prototype;return n.create=function(){this.facebook.progressLoading.loadingProgressFbBootScene(),this.startGame()},n.configureSentry=function(){var e=this.player.getPlayer();(0,i.Tv)({id:e.playerId,username:e.name})},n.configureRollbar=function(){if(this.rollbar){var e=this.player.getPlayer();this.rollbar.configure({payload:{person:{id:e.playerId,name:e.name}}})}},n.detectGameMode=function(){var e=(0,r.Z)(l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.storage.dispatch(function(){var e=(0,r.Z)(l().mark((function e(t,n){var i,a,s,r,o,c,h,u,d,p,f,g,m,v,y,T,C;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n(),s=Qa(a),r=window.game.player,o=r.getPlayerId(),c=s.contextId,h=s.entryPointData,d=(u=h||{}).type,p=u.matchId,f=u.playerId,g=u.opponentId,m=void 0===g?Va.playerId:g,v=o===f,y=m===Va.playerId,T=y||be()(i=[m,f]).call(i,o),C=ja,e.prev=10,e.next=13,window.game.facebook.getTournamentAsync();case 13:C=qa,e.next=18;break;case 16:e.prev=16,e.t0=e.catch(10);case 18:c&&d===Wa&&!v&&(C=Ja),p&&c&&T&&d===Ya&&(C=Ja),c&&"matching_group_match"===d&&(C=Xa),t(ts(C));case 22:case"end":return e.stop()}}),e,null,[[10,16]])})));return function(t,n){return e.apply(this,arguments)}}());case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.initGoogleAnalytics=function(){var e=this.player.getPlayerId();this.analytics.add(new fs(this.game,{userId:e,trackingId:ms,measuringId:gs,version:"1"}))},n.initFacebookAnalytics=function(){var e=GameCore.Configs.Analytics.FacebookAnalytics||{},t=e.prefix,n=e.consoleLog;"string"===typeof t&&this.analytics.add(new ls(this.game,t,n))},t}(Phaser.Scene),ys=vs,Ts=n(661),Cs=function(e){function t(){for(var t,n,i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];return(n=e.call.apply(e,x()(t=[this]).call(t,a))||this).run=function(){n.scene.switch(cs.C.GAME_SCENE),n.facebook.attemptToAddShortcut()},n}(0,o.Z)(t,e);var n=t.prototype;return n.preload=function(){this.events.on("wake",this.run),this.events.on("resume",this.run),this.events.on("create",this.run)},n.create=function(){e.prototype.create.call(this)},t}(Ts.Z);var Es=Cs,As=n(623),Ss=n(658),bs={targets:[],duration:600,ease:Phaser.Math.Easing.Linear,props:{angle:{from:0,to:360}}},Is=function(e){function t(t){return e.call(this,bs,t)||this}return(0,o.Z)(t,e),t}(Ss.Z),ws=Gn.Z.GAMEPLAY_DEFAULT,Ps=ws.KEY,ks=ws.FRAME,_s=function(e){function t(t){var n;return(n=e.call(this,t,0,0,Ps,ks.PRELOADER)||this).anim=void 0,n.runAnimation(),n.setWorldSize(56.5,56.5),n.scene.add.existing((0,As.Z)(n)),n}(0,o.Z)(t,e);var n=t.prototype;return n.runAnimation=function(){var e;null==(e=this.anim)||e.remove(),this.anim=new Is({targets:[this],repeat:-1,duration:1200}),this.anim.play()},n.setVisible=function(t){return e.prototype.setVisible.call(this,t),t?this.runAnimation():this.anim.stop(),this},t}(Phaser.GameObjects.Image),xs=_s,Os=n(650),Ls=n(648),Rs=n(665),Ds=n(626),Bs="global",Ms="friend",Ns=GameCore.Configs,Gs=Ns.ApiHost,Fs=Ns.OtherHost,Zs=Ns.LeadersBoard,Us=Zs.Prefix,zs=Zs.LeaderboardId,Hs=Zs.Name,Ws=Us+"/"+zs+"/leaders",Ys=Us+"/"+zs+"/players",Ks=function(e){var t="";return zs?(e===Bs?t=Ws:e===Ms&&(t=Ys),t):t},Vs=function(){var e=(0,r.Z)(l().mark((function e(t){var n,i,a,r,o,c;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=De()(t).call(t,(function(e){return e.playerId})),a=GameCore.Utils.Object.keyBy(t,"playerId"),r=GameCore.Utils.String.params({playerIds:i}),e.next=5,(0,bt.U)("players?"+r,{},Gs);case 5:return o=e.sent,c=De()(n=o.data).call(n,(function(e){var t=a[e.playerId];return(0,s.Z)({},e,{score:t.score,rank:t.rank,getScore:function(){return t.score},getFormattedScore:function(){return""},getTimestamp:function(){return(new Date).valueOf()},getRank:function(){return t.rank},getExtraData:function(){return t.extraData},getPlayer:function(){return{getName:function(){return e.name},getPhoto:function(){return e.photo},getID:function(){return e.playerId}}}})})),e.abrupt("return",c);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),js=function(){var e=(0,r.Z)(l().mark((function e(t){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===t&&(t={}),null==zs){e.next=3;break}return e.abrupt("return",Js(t));case 3:return e.abrupt("return",Xs(t));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Js=function(){var e=(0,r.Z)(l().mark((function e(t){var n,i,a,s,r;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===t&&(t={}),n=[],i=Ks(Bs)){e.next=5;break}return e.abrupt("return",n);case 5:return a=GameCore.Utils.String.params(t),e.next=8,(0,bt.U)(i+"?"+a,{},Fs);case 8:if(s=e.sent,!((r=(null==s?void 0:s.data)||[]).length<1)){e.next=12;break}return e.abrupt("return",n);case 12:return n=r,e.abrupt("return",Vs(n));case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Xs=function(){var e=(0,r.Z)(l().mark((function e(t){var n,i,a,s,r;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return void 0===t&&(t={}),i=(n=t).limit,a=n.offset,e.next=4,window.GameSDK.getLeaderboardAsync(Hs);case 4:return s=e.sent,e.next=7,s.getEntriesAsync(i,a);case 7:return r=e.sent,e.abrupt("return",r);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),qs=function(){var e=(0,r.Z)(l().mark((function e(t){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===t&&(t={}),null==zs){e.next=3;break}return e.abrupt("return",Qs(t));case 3:return e.abrupt("return",$s(t));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Qs=function(){var e=(0,r.Z)(l().mark((function e(t){var n,i,a,s,r;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===t&&(t={}),n=[],i=Ks(Ms)){e.next=5;break}return e.abrupt("return",n);case 5:return a=GameCore.Utils.String.params(t),e.next=8,(0,bt.U)(i+"?"+a,{},Fs);case 8:if(s=e.sent,!((r=(null==s?void 0:s.data)||[]).length<1)){e.next=12;break}return e.abrupt("return",n);case 12:return n=r,e.abrupt("return",Vs(n));case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),$s=function(){var e=(0,r.Z)(l().mark((function e(t){var n,i,a,s,r;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return void 0===t&&(t={}),i=(n=t).limit,a=n.offset,e.next=4,window.GameSDK.getLeaderboardAsync(Hs);case 4:return s=e.sent,e.next=7,s.getConnectedPlayerEntriesAsync(i,a);case 7:return r=e.sent,e.abrupt("return",r);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),er=(function(){var e=(0,r.Z)(l().mark((function e(t){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==zs){e.next=2;break}return e.abrupt("return",er(t));case 2:return e.abrupt("return",tr());case 3:case"end":return e.stop()}}),e)})))}(),function(){var e=(0,r.Z)(l().mark((function e(t){var n,i,a,s,r;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=null,t){e.next=3;break}return e.abrupt("return",n);case 3:if(i=Ks(Ms)){e.next=6;break}return e.abrupt("return",n);case 6:return a=GameCore.Utils.String.params({playerIds:t}),e.next=9,(0,bt.U)(i+"?"+a,{},Fs);case 9:if(s=e.sent,!((r=(null==s?void 0:s.data)||[]).length<1)){e.next=13;break}return e.abrupt("return",n);case 13:return e.next=15,Vs(r);case 15:return n=e.sent[0],e.abrupt("return",n);case 17:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),tr=function(){var e=(0,r.Z)(l().mark((function e(){var t,n;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,window.GameSDK.getLeaderboardAsync(Hs);case 2:return t=e.sent,e.next=5,t.getPlayerEntryAsync();case 5:return n=e.sent,e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),nr=function(){var e=(0,r.Z)(l().mark((function e(t,n){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(window.GameSDK.submitGameResultsAsync(n).catch((function(e){})),null==zs){e.next=5;break}if(""!==window.game.auth.getToken()){e.next=4;break}return e.abrupt("return",h().reject("Not logged in"));case 4:return e.abrupt("return",ir(t,n));case 5:return e.abrupt("return",ar(n));case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),ir=function(){var e=(0,r.Z)(l().mark((function e(t,n){var i;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,bt.v)("leaderboards/"+zs+"/players/"+t,{score:n},{},Fs);case 2:return i=e.sent,e.abrupt("return",(null==i?void 0:i.data)||{});case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),ar=function(){var e=(0,r.Z)(l().mark((function e(t){var n;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,window.GameSDK.getLeaderboardAsync(Hs);case 2:return n=e.sent,e.next=5,n.setScoreAsync(t);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();function sr(e,t){var n="undefined"!==typeof w()&&k()(e)||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){var n;if(!e)return;if("string"===typeof e)return rr(e,t);var i=A()(n=Object.prototype.toString.call(e)).call(n,8,-1);"Object"===i&&e.constructor&&(i=e.constructor.name);if("Map"===i||"Set"===i)return b()(e);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return rr(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var i=0;return function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function rr(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var or=GameCore.Configs.LeadersBoard,cr=or.UseMock,hr=or.Limit,ur=or.MockOptions,lr=function(e,t,n,a){return void 0===n&&(n=hr),void 0===a&&(a=0),function(){var s=(0,r.Z)(l().mark((function s(r){var o,c,h,u,d,p,f,g,m,v,y,T,C,E,A,S,b,I;return l().wrap((function(s){for(;;)switch(s.prev=s.next){case 0:if(s.prev=0,o=window.game.player,c=o.getPlayerId(),r(pr()),r({type:aa,payload:{leaderboardId:e,type:t,limit:n,offset:a}}),!cr){s.next=11;break}return s.next=8,(0,Ds.qZ)(1e3);case 8:return d=De()(h=on()(u=new Array(n)).call(u,null)).call(h,(function(e,t){var n=(t+1)*(a+1),i=ur.PlayerEntryIndex===t,s={playerId:"0"+n,name:"MPlayer "+n,photo:"./assets/images/others/avatar.png",rank:n,score:Math.floor(1e5/n)};if(i){var r=window.game.player.getPlayer(),o=r.playerId,c=r.name,h=r.photo;s.playerId=o,s.name=c,s.photo=h}return s})),r(dr(d,t)),s.abrupt("return");case 11:if(p=[],t!==Bs){s.next=18;break}return s.next=15,js({limit:n,offset:a});case 15:p=s.sent,s.next=26;break;case 18:if(t!==Ms){s.next=26;break}return(f=o.getConnectedPlayerIds(n,a)).push(c),g=GameCore.Utils.Array.unique(f),s.next=24,qs({playerIds:g,limit:g.length});case 24:p=s.sent,g.forEach((function(e){var t=Le()(p).call(p,(function(t){return t.playerId===e}));t&&0!==t.length||p.push({playerId:e,score:0})}));case 26:for(m={},v=sr(p);!(y=v()).done;)T=y.value,C=T.playerId,E=T.score,A=T.rank,S=T.getPlayer(),b=S.getPhoto(),I=S.getName(),m[C]={playerId:C,name:I,photo:b,score:E,rank:A};r(dr(m,t)),s.next=36;break;case 32:s.prev=32,s.t0=s.catch(0),r(dr([],t)),(0,i.tO)(s.t0);case 36:case"end":return s.stop()}}),s,null,[[0,32]])})));return function(e){return s.apply(this,arguments)}}()},dr=function(e,t){return{type:sa,payload:{leaders:e,type:t}}},pr=function(){return{type:ra,payload:{}}},fr=function(e){return e[$i]},gr=((0,pe.P1)([function(e){return fr(e).leaderboardId}],(function(e){return e})),(0,pe.P1)([function(e){return fr(e).leaders}],(function(e){return e}))),mr=(0,pe.P1)([function(e){return fr(e).isRequesting}],(function(e){return e})),vr=function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).name="InvalidContextId",i.message=t||"This contextId is not valid",i.payload=n,i}return(0,o.Z)(t,e),t}((0,W.Z)(Error)),yr=function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).name="NewScoreIsBad",i.message=t||"The new score is bad",i.payload=n,i}return(0,o.Z)(t,e),t}((0,W.Z)(Error)),Tr=function(e){return e[Vi]},Cr=((0,pe.P1)([function(e){return Tr(e).active}],(function(e){return e})),(0,pe.P1)([function(e){return Tr(e).tournamentId}],(function(e){return e}))),Er=((0,pe.P1)([function(e){return Tr(e).bestSessionScore}],(function(e){return e})),(0,pe.P1)([function(e){return Tr(e).isRequesting}],(function(e){return e})),(0,pe.P1)([function(e){return Tr(e).leaderboardId}],(function(e){return e}))),Ar=(0,pe.P1)([function(e){return Tr(e).gameType}],(function(e){return e})),Sr=function(e){return e[yi]},br=(0,pe.P1)([function(e){return Sr(e).gameplay.mode}],(function(e){return e})),Ir=((0,pe.P1)([function(e){return Sr(e).gameplay.status}],(function(e){return e})),(0,pe.P1)([function(e){return Sr(e).gameplay.rescued}],(function(e){return e})),(0,pe.P1)([function(e){return Sr(e).gameplay.startAt}],(function(e){return e})),(0,pe.P1)([function(e){return Sr(e).gameplay.finishAt}],(function(e){return e})),n(651)),wr={FOUNDATION_Y:70,VERTICAL_PILE_SPACE:21,MAX_HORIZONTAL_PILE_SPACE:62,MIN_VERTICAL_PILE_SPACE:18,MIN_VERTICAL_FACING_DOWN_CARD_SPACE:8,MAX_VERTICAL_FACING_DOWN_CARD_SPACE:10.5,SPACE_BETWEEN_PILE_AND_FOUNDATION:85,CARD_WIDTH:49,CARD_HEIGHT:72,NUMBER_OF_TARGET:4,NUMBER_OF_PILE:7,AUTO_MOVE_TIME:400,CARD_MOVE_TIME:300,NUMBER_OF_FREECELL:4,CARD_DEAL_TIME:20},Pr=function(e){if(e===is.Z.KLONDIKE){var t=window.game.player.getPlayerSettings(),n=window.game.world.isLandscape();if(n&&t.largeWidthLayout)return 66/49;if(n)return 1.15}else{if(e===is.Z.FREE_CELL)return window.game.world.isLandscape()?1.1:.9;if(e===is.Z.SPIDER)return window.game.world.isLandscape()?1:.7}return 1},kr=function(e){e=e||Rr.gameType;var t=Pr(e),n=window.game.world;switch(wr.VERTICAL_PILE_SPACE=21*t,e){case is.Z.KLONDIKE:wr.CARD_WIDTH=49*t,wr.CARD_HEIGHT=72*t,wr.MAX_VERTICAL_FACING_DOWN_CARD_SPACE=10.5*t,wr.SPACE_BETWEEN_PILE_AND_FOUNDATION=85,wr.MAX_HORIZONTAL_PILE_SPACE=62,wr.NUMBER_OF_PILE=7;break;case is.Z.FREE_CELL:n.isLandscape()?(wr.MAX_HORIZONTAL_PILE_SPACE=48,wr.SPACE_BETWEEN_PILE_AND_FOUNDATION=83,wr.MIN_VERTICAL_PILE_SPACE=13.5):(wr.MAX_HORIZONTAL_PILE_SPACE=62,wr.SPACE_BETWEEN_PILE_AND_FOUNDATION=85,wr.MIN_VERTICAL_PILE_SPACE=18*.85),wr.CARD_WIDTH=49*t,wr.CARD_HEIGHT=72*t,wr.NUMBER_OF_PILE=8;break;case is.Z.SPIDER:wr.CARD_HEIGHT=72*t,wr.CARD_WIDTH=49*t,window.game.world.isLandscape()?(wr.SPACE_BETWEEN_PILE_AND_FOUNDATION=65,wr.MAX_HORIZONTAL_PILE_SPACE=52):(wr.SPACE_BETWEEN_PILE_AND_FOUNDATION=65,wr.MAX_HORIZONTAL_PILE_SPACE=62),wr.NUMBER_OF_PILE=10}},_r=function(e){wr.FOUNDATION_Y=e},xr=wr,Or=function(e){return e.GAME_MODE_CHANGED="game-mode-changed",e.BACKGROUND_CHANGED="background-changed",e.GAME_START="game-start",e.BOARD_STATE_CHANGED="board-state-changed",e.GAME_CHANGE="game-change",e}(Or||{}),Lr=Or,Rr=function(){function e(e){this.scene=void 0,this.scene=e}var t=e.prototype;return t.switchGameType=function(t,n){void 0===n&&(n=!1),e.filterGameType=t,this.isSameGameType(t)||(e.gameType=t,this.updateSetting(n),kr(),this.scene.levelLoader.switchGameType(t),this.scene.gameplay.switchGameType(t),this.scene.header.setGameType(t),this.scene.events.emit(Lr.GAME_CHANGE),this.scene.switchTheme(t),this.scene.showHowToPlayScreen(t))},t.isSameGameType=function(t){return e.gameType===t},t.isCanSwitchTo=function(e){var t=this.scene.gameplay.boardGame;return!this.isSameGameType(e)&&!t.isDealing()},t.updateSetting=function(t){if(void 0===t&&(t=!1),this.scene.player.setSetting(ss.gameType,e.gameType),t){var n=this.scene.player.getPlayerSettings().modifiedOptions,i=GameCore.Utils.Json.clone(n);be()(i).call(i,ss.gameType)||i.push(ss.gameType),this.scene.player.setSetting(ss.modifiedOptions,i)}},(0,he.Z)(e,null,[{key:"gameType",get:function(){return e._gameType},set:function(t){e._gameType=t,e.filterGameType=t}}]),e}();function Dr(e,t){var n="undefined"!==typeof w()&&k()(e)||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){var n;if(!e)return;if("string"===typeof e)return Br(e,t);var i=A()(n=Object.prototype.toString.call(e)).call(n,8,-1);"Object"===i&&e.constructor&&(i=e.constructor.name);if("Map"===i||"Set"===i)return b()(e);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return Br(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var i=0;return function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Br(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}Rr._gameType=void 0,Rr.filterGameType=void 0;var Mr=GameCore.Configs.Tournament.UseLeaderboard,Nr=function(e,t,n){return void 0===t&&(t=""),void 0===n&&(n="klondike"),{type:ji,payload:{tournamentId:e,leaderboardId:t,gameType:n}}},Gr=function(e){return function(){var t=(0,r.Z)(l().mark((function t(n){var i,a,s,r,o,c,h,u,d,p,f;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,i=window.game.facebook,a=e.playerId,s=e.playerName,r=e.score,o=e.autoStartGame,c=e.gameType,h=void 0===c?Rr.filterGameType:c,u=s+"'s Tournament",d=GameCore.Utils.String.generateObjectId(),t.next=7,i.tournament.createAsync({initialScore:r,config:{title:u,tournamentTitle:u},data:{playerId:a,playerName:s,leaderboardId:d,gameType:h}});case 7:return p=t.sent,f=p.getID(),o&&n(Nr(f,d,h)),t.next=12,(0,Ir.Z5)({_id:d,createdBy:a,name:u,description:M()({contextID:f,tournamentID:f}),type:"tournament_leaderboard",expireTime:604800});case 12:if(t.sent._id!==d){t.next=16;break}return t.next=16,(0,Ir.bh)(d,a,r);case 16:window.game.player.joinTournament({leaderboardId:d,endTime:p.getEndTime()}),e.success=!0,t.next=24;break;case 20:throw t.prev=20,t.t0=t.catch(0),e.success=!1,t.t0;case 24:case"end":return t.stop()}}),t,null,[[0,20]])})));return function(e){return t.apply(this,arguments)}}()},Fr=function(e){return(0,r.Z)(l().mark((function t(){var n,i,a,s,r;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=window.game.facebook,i=e.playerId,a=e.playerName,s=e.score,r={score:s,data:{type:"tournament",playerId:i,playerName:a}},t.next=5,n.tournament.shareAsync(r);case 5:case"end":return t.stop()}}),t)})))},Zr=(function(){var e=(0,r.Z)(l().mark((function e(){var t,n,i,a,s,r,o,c,h;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=window.game.facebook,e.next=4,t.getTournamentAsync();case 4:if(n=e.sent,null!=(i=JSON.parse(n.getPayload()||"{}")).leaderboardId){e.next=21;break}return e.next=9,(0,Ir.Iy)();case 9:a=e.sent,s=n.getContextID(),r={payload:{}},o=Dr(a);case 13:if((c=o()).done){e.next=20;break}if((h=c.value).contextID!==s){e.next=18;break}return r=h,e.abrupt("return",r.payload.leaderboardId);case 18:e.next=13;break;case 20:return e.abrupt("return",r.payload.leaderboardId||"");case 21:return e.abrupt("return",i.leaderboardId);case 24:return e.prev=24,e.t0=e.catch(0),e.abrupt("return",null);case 27:case"end":return e.stop()}}),e,null,[[0,24]])})))}(),function(e,t){return function(){var n=(0,r.Z)(l().mark((function n(i,a){var s,r,o,c;return l().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(r=window.game.globalScene,o=a(),c=br(o),be()(s=[ja,qa]).call(s,c)){n.next=5;break}return n.abrupt("return");case 5:if(i({type:Ji,payload:{}}),r.screen.open(Os.o4.NOTIFY_SCREEN,{message:"loading",loading:!0}),!Mr){n.next=12;break}return n.next=10,Yr(e,o,t);case 10:n.next=14;break;case 12:return n.next=14,jr(e,t);case 14:r.screen.close(Os.o4.NOTIFY_SCREEN),i(Jr(e));case 16:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}()}),Ur=0,zr=!1,Hr=0,Wr=!1,Yr=function(){var e=(0,r.Z)(l().mark((function e(t,n,i){var a,s,r,o,c,h,u,d,p,f;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=window.game,s=a.player,r=a.facebook,o=s.getPlayer(),c=o.playerId,h=o.name,u=s.getBestScore(i),e.prev=3,e.next=6,r.getTournamentAsync();case 6:if(d=Er(n),!Vr(t,u)){e.next=15;break}return Ur+=1,p={playerId:c,playerName:h,score:t,leaderboardId:d,gameType:i},e.next=12,window.game.storage.dispatch(Fr(p)).then((function(){zr=!0}));case 12:zr=!0,e.next=17;break;case 15:return e.next=17,r.tournament.postScoreAsync(t);case 17:e.next=28;break;case 19:if(e.prev=19,e.t0=e.catch(3),"TOURNAMENT_NOT_FOUND"!==(null==e.t0?void 0:e.t0.code)){e.next=28;break}if(Kr(t,u)){e.next=24;break}return e.abrupt("return");case 24:return Hr+=1,f={playerId:c,playerName:h,score:t,autoStartGame:!1,gameType:i},e.next=28,window.game.storage.dispatch(Gr(f)).then((function(){Wr=!0})).catch((function(){}));case 28:return e.prev=28,e.finish(28);case 30:case"end":return e.stop()}}),e,null,[[3,19,28,30]])})));return function(t,n,i){return e.apply(this,arguments)}}(),Kr=function(e,t){return!window.game.player.getPlayerIsNew()&&e>t||!(Wr||Hr>1)&&Math.random()<.5},Vr=function(){return!(zr||Ur>1)},jr=function(){var e=(0,r.Z)(l().mark((function e(t,n){var i,a,s,r;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=window.game,a=i.player,s=i.facebook,r=a.getBestScore(n),e.prev=2,e.next=5,s.getTournamentAsync();case 5:if(!Vr(t,r)){e.next=12;break}return Ur+=1,e.next=9,s.tournament.shareAsync({score:t,data:{gameType:n}});case 9:zr=!0,e.next=14;break;case 12:return e.next=14,s.tournament.postScoreAsync(t);case 14:e.next=24;break;case 16:if(e.prev=16,e.t0=e.catch(2),"TOURNAMENT_NOT_FOUND"!==e.t0.code){e.next=24;break}if(Kr(t,r)){e.next=21;break}return e.abrupt("return");case 21:return Hr+=1,e.next=24,s.tournament.createAsync(t).then((function(){Wr=!0})).catch((function(e){}));case 24:case"end":return e.stop()}}),e,null,[[2,16]])})));return function(t,n){return e.apply(this,arguments)}}(),Jr=function(e){return{type:Xi,payload:{score:e}}},Xr=function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).name="InvalidMatchId",i.message=t||"Invalid match id",i.payload=n,i}return(0,o.Z)(t,e),t}((0,W.Z)(Error)),qr=function(e,t){return t.playerId},Qr=function(e){return Sr(e).match.challenge},$r=((0,pe.P1)([function(e){return Sr(e).match.isRequesting}],(function(e){return e})),(0,pe.P1)([function(e){return Sr(e).match.single}],(function(e){return e}))),eo=(0,pe.P1)([function(e){return Sr(e).match.single._id}],(function(e){return e})),to=(0,pe.P1)([function(e){return Sr(e).match.single.score}],(function(e){return e||0})),no=((0,pe.P1)([function(e){return Sr(e).match.single.level}],(function(e){return e||0})),(0,pe.P1)([function(e){var t;return null==(t=Sr(e).match.single.data)?void 0:t.diamond}],(function(e){return e||0})),(0,pe.P1)([function(e){var t;return null==(t=Sr(e).match.single.data)?void 0:t.fen}],(function(e){return e||null})),(0,pe.P1)([function(e){return Sr(e).match.single.status}],(function(e){return e})),(0,pe.P1)([function(e){return Sr(e).match.single.playerId}],(function(e){return e})),(0,pe.P1)([Qr],(function(e){return e}))),io=(0,pe.P1)([function(e){return Sr(e).match.challenge._id}],(function(e){return e})),ao=(0,pe.P1)([function(e){return Sr(e).match.challenge.status}],(function(e){return e})),so=(0,pe.P1)([function(e){return Sr(e).match.challenge.opponentInfo}],(function(e){return e})),ro=((0,pe.P1)([function(e){return Sr(e).match.challenge.whitePlayerId}],(function(e){return e})),(0,pe.P1)([function(e){return Sr(e).match.challenge.blackPlayerId}],(function(e){return e})),(0,pe.P1)([no,qr],(function(e,t){var n=e.whitePlayerId,i=e.blackPlayerId;return n!==t&&i===t?n:i!==t&&n===t?i:""})),(0,pe.P1)([no,qr],(function(e,t){var n=e.whitePlayerId,i=e.blackPlayerId;return n===t?n:i===t?i:Va.playerId}))),oo=(0,pe.P1)([no,qr],(function(e,t){var n=e.whitePlayerId,i=e.blackPlayerId,a=e.whitePlayerFinish,s=e.blackPlayerFinish;return t&&n===t?a:!(!t||i!==t)&&s})),co=(0,pe.P1)([no,function(e,t){return t.opponentId}],(function(e,t){var n=e.whitePlayerId,i=e.blackPlayerId,a=e.whitePlayerFinish,s=e.blackPlayerFinish;return t&&n===t?a:!(!t||i!==t)&&s})),ho=(0,pe.P1)([Qr],(function(e){return e.extraData})),uo=(0,pe.P1)([function(e){return Sr(e).match.group.opponentInfo}],(function(e){return e})),lo=((0,pe.P1)([function(e){return Sr(e).match.online.players}],(function(e){return e})),(0,pe.P1)([function(e){return Sr(e).match.journey}],(function(e){return e})),(0,pe.P1)([function(e){return Sr(e).match.journey._id}],(function(e){return e})),(0,pe.P1)([function(e){return Sr(e).match.journey.level}],(function(e){return e})),(0,pe.P1)([function(e){return Sr(e).match.challenge.matchResultFromMessage}],(function(e){return e})),(0,pe.P1)([function(e){return Sr(e).stats.data}],(function(e){return e}))),po=(0,pe.P1)([function(e){return Sr(e).stats.current}],(function(e){return e})),fo=((0,pe.P1)([function(e){return Sr(e).stats.isRequesting}],(function(e){return e})),function(e){try{var t=localStorage.getItem(e);return null===t?null:GameCore.Utils.Json.decode(t)}catch(n){return null}}),go=function(e,t){try{var n=fo(e),i={};GameCore.Utils.Valid.isObject(n)&&(i=n);var a=GameCore.Utils.Json.clone(t);if(!GameCore.Utils.Valid.isObject(a))return!1;var s=GameCore.Utils.Object.clear(a),r=(0,li.TS)(i,s),o=GameCore.Utils.Json.encode(r);return localStorage.setItem(e,o),!0}catch(c){return!1}},mo=function(e){try{return localStorage.removeItem(e),!0}catch(t){return!1}},vo=GameCore.Configs.ApiHost,yo=(function(){var e=(0,r.Z)(l().mark((function e(t){var n;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"single-matches",e.next=3,(0,bt.v)("single-matches",t,{},vo);case 3:return n=e.sent,e.abrupt("return",(null==n?void 0:n.data)||{});case 5:case"end":return e.stop()}}),e)})))}(),function(){var e=(0,r.Z)(l().mark((function e(){var t;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"single-matches/active",e.next=3,(0,bt.U)("single-matches/active",{},vo);case 3:return t=e.sent,e.abrupt("return",(null==t?void 0:t.data)||{});case 5:case"end":return e.stop()}}),e)})))}(),function(){var e=(0,r.Z)(l().mark((function e(t,n){var i,a;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i="single-matches/"+t+"/move",e.next=3,(0,bt.v)(i,n,{},vo);case 3:return a=e.sent,e.abrupt("return",(null==a?void 0:a.data)||{});case 5:case"end":return e.stop()}}),e)})))}(),function(){var e=(0,r.Z)(l().mark((function e(t){var n,i;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="single-matches/"+t+"/finish",e.next=3,(0,bt.v)(n,{},{},vo);case 3:return i=e.sent,e.abrupt("return",(null==i?void 0:i.data)||{});case 5:case"end":return e.stop()}}),e)})))}(),function(){var e=(0,r.Z)(l().mark((function e(t,n){var i;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"matches",e.next=3,(0,bt.v)("matches",{opponentPlayerId:t,extraData:n},{},vo);case 3:return i=e.sent,e.abrupt("return",(null==i?void 0:i.data)||{});case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),To=function(){var e=(0,r.Z)(l().mark((function e(t){var n,i;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="matches/"+t+"/join",e.next=3,(0,bt.v)(n,{},{},vo);case 3:return i=e.sent,e.abrupt("return",(null==i?void 0:i.data)||{});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Co=function(){var e=(0,r.Z)(l().mark((function e(t){var n,i;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="matches/"+t,e.next=3,(0,bt.U)(n,{},vo);case 3:return i=e.sent,e.abrupt("return",(null==i?void 0:i.data)||{});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Eo=function(){var e=(0,r.Z)(l().mark((function e(t,n,i,a){var s,r;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s="matches/"+t+"/finish",e.next=3,(0,bt.v)(s,{matchId:t,score:n,level:i,extraData:a},{},vo);case 3:return r=e.sent,e.abrupt("return",(null==r?void 0:r.data)||{});case 5:case"end":return e.stop()}}),e)})));return function(t,n,i,a){return e.apply(this,arguments)}}(),Ao=function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).name="InvalidMatchStatus",i.message=t||"The match status is not valid",i.payload=n,i}return(0,o.Z)(t,e),t}((0,W.Z)(Error)),So=function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).name="InvalidOpponentId",i.message=t||"Invalid opponent id",i.payload=n,i}return(0,o.Z)(t,e),t}((0,W.Z)(Error)),bo=function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).name="InvalidBlackPlayerId",i.message=t||"Invalid black player id",i.payload=n,i}return(0,o.Z)(t,e),t}((0,W.Z)(Error)),Io=function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).name="InvalidRequestedMatchId",i.message=t||"The matchId in match data not matched with requested matchId",i.payload=n,i}return(0,o.Z)(t,e),t}((0,W.Z)(Error)),wo=function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).name="InvalidWhitePlayerId",i.message=t||"Invalid white player id",i.payload=n,i}return(0,o.Z)(t,e),t}((0,W.Z)(Error)),Po=function(e){var t=e.matchId,n=e.currentMatchId;if(""===t||"string"!==typeof t)throw new Xr(null,{matchId:t});if(""===n||"string"!==typeof n)throw new Xr(null,{currentMatchId:n});if(t!==n)throw new Io(null,{matchId:t,currentMatchId:n})},ko=function(e){var t=e.playerId,n=e.match,i=n._id,a=n.playerId,s=n.status;if(""===i||"string"!==typeof i)throw new Xr(null,{matchId:i});if("finished"===s||"string"!==typeof s)throw new Ao("This match is finished",{status:s});if(a!==t)throw new Ha(null,{playerId:a,currentPlayerId:t})},_o=function(e){var t=e.opponentId;if(""===t||"string"!==typeof t)throw new So(null,{opponentId:t})},xo=function(e){var t=e.matchId;if(""===t||"string"!==typeof t)throw new Xr(null,{matchId:t})},Oo=function(e){var t=e.match,n=t._id,i=t.whitePlayerId,a=t.blackPlayerId;if(""===n||"string"!==typeof n)throw new Xr(null,{matchId:n});if(""===i||"string"!==typeof i)throw new wo(null,{whitePlayerId:i});if(""===a||"string"!==typeof a)throw new bo(null,{blackPlayerId:a})},Lo=GameCore.Configs.Match,Ro=function(e){try{return GameCore.Utils.Hash.stringToHash(M()(e))}catch(t){return""}},Do=function(e){try{return JSON.parse(GameCore.Utils.Hash.hashToString(e))}catch(t){return""}},Bo=function(){return function(){var e=(0,r.Z)(l().mark((function e(t){var n,a,r,o;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.prev=0,n=window.game,a=n.player,n.globalScene.screen.open(Os.o4.NOTIFY_SCREEN,{message:"loading",loading:!0}),t({type:wi,payload:{}}),r=a.getPlayerId(),o=(0,s.Z)({},Lo.LocalSingleMatchDefault,{status:"active",playerId:r,startedAt:Date.now()}),ko({playerId:r,match:o}),t(No(o)),go(Lo.SingleMatchStore,o),e.next=19;break;case 11:if(e.prev=11,e.t0=e.catch(0),t(No(null)),!(e.t0 instanceof Xr)){e.next=16;break}return e.abrupt("return");case 16:if(!(e.t0 instanceof Ao)){e.next=18;break}return e.abrupt("return");case 18:(0,i.tO)(e.t0);case 19:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t){return e.apply(this,arguments)}}()},Mo=function(e){return function(){var t=(0,r.Z)(l().mark((function t(n,a){var r,o,c,h,u,d,p,f;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:t.prev=0,r=window.game.player,xo({matchId:e}),o=a(),c=eo(o),h=r.getPlayerId(),Po({matchId:e,currentMatchId:c}),n({type:"MATCH_SINGLE_FINISH_REQUEST",payload:{matchId:e}}),u=$r(o),ko({playerId:h,match:u}),d=(0,s.Z)({},Lo.LocalSingleMatchDefault,u,{_id:e,status:"finished",playerId:h,finishAt:Date.now()}),n(No(d)),p=d.data,(f=(0,s.Z)({},d)).data=Ro(p),go(Lo.SingleMatchStore,f),t.next=26;break;case 18:if(t.prev=18,t.t0=t.catch(0),n(No(null)),!(t.t0 instanceof Xr)){t.next=23;break}return t.abrupt("return");case 23:if(!(t.t0 instanceof Ao)){t.next=25;break}return t.abrupt("return");case 25:(0,i.tO)(t.t0);case 26:case"end":return t.stop()}}),t,null,[[0,18]])})));return function(e,n){return t.apply(this,arguments)}}()},No=function(e){return{type:ki,payload:{match:e}}},Go=function(){return{type:_i,payload:{}}},Fo=function(e,t){return function(){var n=(0,r.Z)(l().mark((function n(a){var s,r,o,c;return l().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,s=window.game,r=s.profile,s.globalScene.screen.open(Os.o4.NOTIFY_SCREEN,{message:"loading",loading:!0}),o=e.playerId,_o({opponentId:o}),a({type:Oi,payload:{opponentInfo:e,extraData:t}}),n.next=8,yo(o,t);case 8:return c=n.sent,Oo({match:c}),n.next=12,r.requestProfiles([o]);case 12:a(Ho(c)),n.next=23;break;case 15:if(n.prev=15,n.t0=n.catch(0),a(Ho(null)),!(n.t0 instanceof Xr)){n.next=20;break}return n.abrupt("return");case 20:if(!(n.t0 instanceof So)){n.next=22;break}return n.abrupt("return");case 22:(0,i.tO)(n.t0);case 23:case"end":return n.stop()}}),n,null,[[0,15]])})));return function(e){return n.apply(this,arguments)}}()},Zo=function(e){return function(){var t=(0,r.Z)(l().mark((function t(n){var a,s,r,o,c,h,u,d,p;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a=window.game,s=a.player,r=a.profile,a.globalScene.screen.open(Os.o4.NOTIFY_SCREEN,{message:"loading",loading:!0}),xo({matchId:e}),n({type:xi,payload:{matchId:e}}),t.next=7,To(e);case 7:if(o=t.sent,Oo({match:o}),c=o.status,h=o.whitePlayerId,u=o.blackPlayerId,c!==Ui){t.next=16;break}return d=s.getPlayerId(),p=d===h?u:h,t.next=16,r.requestProfiles([p]);case 16:n(Ho(o)),t.next=25;break;case 19:if(t.prev=19,t.t0=t.catch(0),n(Ho(null)),!(t.t0 instanceof Xr)){t.next=24;break}return t.abrupt("return");case 24:(0,i.tO)(t.t0);case 25:case"end":return t.stop()}}),t,null,[[0,19]])})));return function(e){return t.apply(this,arguments)}}()},Uo=function(e,t,n){return function(){var a=(0,r.Z)(l().mark((function a(s){var r,o,c,h,u,d,p,f;return l().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,r=window.game,o=r.player,r.globalScene.screen.open(Os.o4.NOTIFY_SCREEN,{message:"loading",loading:!0}),xo({matchId:e}),s({type:Ri,payload:{matchId:e,opponentInfo:t}}),a.next=7,Co(e);case 7:c=a.sent,Oo({match:c}),h=c.whitePlayerId,u=c.whitePlayerScore,d=c.blackPlayerScore,p=o.getPlayerId(),f=o.getBestScore(n),s(Ho(c,{score:p===h?u:d,bestScore:f})),a.next=23;break;case 17:if(a.prev=17,a.t0=a.catch(0),s(Ho(null)),!(a.t0 instanceof Xr)){a.next=22;break}return a.abrupt("return");case 22:(0,i.tO)(a.t0);case 23:case"end":return a.stop()}}),a,null,[[0,17]])})));return function(e){return a.apply(this,arguments)}}()},zo=function(e,t,n){return function(){var a=(0,r.Z)(l().mark((function a(s){var r,o;return l().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,xo({matchId:e}),s({type:Li,payload:{matchId:e,score:t,extraData:n}}),r=n.level,a.next=6,Eo(e,t,r,n);case 6:return o=a.sent,Oo({match:o}),a.next=10,s(Ho(o));case 10:a.next=18;break;case 12:if(a.prev=12,a.t0=a.catch(0),s(Ho(null)),!(a.t0 instanceof Xr)){a.next=17;break}return a.abrupt("return");case 17:(0,i.tO)(a.t0);case 18:case"end":return a.stop()}}),a,null,[[0,12]])})));return function(e){return a.apply(this,arguments)}}()},Ho=function(e,t,n){return void 0===n&&(n=null),{type:Di,payload:{match:e,opponentInfo:t,current:n}}},Wo=function(e){return{type:Mi,payload:{opponentInfo:e}}},Yo=function(e,t){return{type:Fi,payload:{matchId:e,players:t}}},Ko=function(e){return{type:Si,payload:{playerId:e}}},Vo=function(e,t){return{type:bi,payload:{playerId:e,stats:t}}},jo=function(e){return{type:Ii,payload:{stats:e}}},Jo=function(e){return e.SINGLE="single",e.CHALLENGE_FRIENDS="challenge-friends",e.TOURNAMENT="tournaments",e.JOURNEY="journey",e}(Jo||{}),Xo=Jo,qo=function(e){function t(){var t;return(t=e.call(this)||this).gameMode=void 0,t.autoPlaySingleMode=void 0,t.friendsChallenged=void 0,t.isGameLoadedInTournament=!1,t.gameMode=Xo.SINGLE,t.autoPlaySingleMode=!0,t.friendsChallenged=[],t}(0,o.Z)(t,e);var n=t.prototype;return n.setGameMode=function(e){this.gameMode=e,this.emit(Lr.GAME_MODE_CHANGED)},n.getGameMode=function(){return this.gameMode},n.isSingleMode=function(){return this.gameMode==Xo.SINGLE},n.isChallengeMode=function(){return this.gameMode==Xo.CHALLENGE_FRIENDS},n.isTournamentMode=function(){return this.gameMode===Xo.TOURNAMENT},n.isJourneyMode=function(){return this.gameMode===Xo.JOURNEY},(0,he.Z)(t,null,[{key:"instance",get:function(){return this._instance||(this._instance=new t)}}]),t}(Phaser.Events.EventEmitter);qo._instance=void 0;var Qo=qo,$o=(0,pe.P1)([function(e){return e.messages.data}],(function(e){return e})),ec=(0,pe.P1)([$o,function(e,t){return t.opponentId}],(function(e,t){return!!GameCore.Utils.Valid.isString(t)&&(!!GameCore.Utils.Object.hasOwn(e,t)&&e[t].sent)})),tc=function(e){var t=e.contextId;if(""===t||"string"!==typeof t)throw new vr(null,{contextId:t})},nc=null,ic=function(e){clearTimeout(nc),nc=setTimeout((function(){window.game.globalScene.screen.close(Os.o4.NOTIFY_SCREEN)}),e)},ac=function(e){return function(t){try{if(t(Go()),e){var n=e.getPayload(),a=e.getID();if(n){var s=JSON.parse(n),r=s.leaderboardId,o=s.gameType;t(Nr(a.toString(),r,o))}}t(dc(qa))}catch(c){(0,i.tO)(c)}}},sc=function(e){return function(){var t=(0,r.Z)(l().mark((function t(n){return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:try{n(Go()),n(dc(ja,null,e))}catch(a){(0,i.tO)(a)}case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},rc=function(e,t,n){return void 0===e&&(e="10"),void 0===t&&(t=!1),function(a){try{a(oc("reset",e,t,n))}catch(s){(0,i.tO)(s)}}},oc=function(e,t,n,a){return void 0===t&&(t="10"),void 0===n&&(n=!1),function(){var s=(0,r.Z)(l().mark((function s(r){var o,c,h,u,d,p,f,g,m,v,y,T,C,E,A,S,b,I;return l().wrap((function(s){for(;;)switch(s.prev=s.next){case 0:if(s.prev=0,o=window.game,c=o.player,h=o.facebook,u=o.globalScene,a=a||Rr.filterGameType,u.screen.open(Os.o4.NOTIFY_SCREEN,{message:"loading",loading:!0}),d=e,p=h.contextType,t||(f=GameCore.Configs.PlayerIdMock,g=GameCore.Configs.PlayerIdMock2,t=c.getPlayerId()===f?g:f),e){s.next=31;break}return s.next=10,h.chooseAsync();case 10:if(!1!==(d=s.sent)){s.next=19;break}if(n&&u.events.emit(cs.K.SWITCH,cs.C.DASHBOARD_SCENE),!Qo.instance.autoPlaySingleMode){s.next=18;break}return s.next=16,fc();case 16:return r(sc(a)),s.abrupt("return");case 18:return s.abrupt("return");case 19:return s.prev=19,s.next=22,window.game.facebook.getTournamentAsync();case 22:return m=s.sent,r(ac(m)),s.abrupt("return");case 27:s.prev=27,s.t0=s.catch(19);case 29:s.next=41;break;case 31:if(!t||t===Va.playerId){s.next=39;break}return s.next=34,h.createAsync(t);case 34:if(!1!==(d=s.sent)){s.next=38;break}return n&&u.events.emit(cs.K.SWITCH,cs.C.DASHBOARD_SCENE),s.abrupt("return");case 38:d||"reset"===e||(d=e);case 39:p=h.contextType,r(es(d,p));case 41:return tc({contextId:d}),v=c.getPlayerId(),y=c.getConnectedPlayers(),s.next=46,h.getContextPlayers(v);case 46:return T=s.sent,t!==(C=Va).playerId&&y[t]?C=y[t]:1===T.length&&(C=T[0]),r(Ko()),A=(E=C).playerId,S=E.name,b=E.photo,I={playerId:A,name:S,photo:b},s.next=54,r(dc(Ja,I,a));case 54:r(es(d,p)),s.next=66;break;case 57:if(s.prev=57,s.t1=s.catch(0),!(s.t1 instanceof vr)){s.next=61;break}return s.abrupt("return");case 61:if("USER_INPUT"!==(null==s.t1?void 0:s.t1.code)){s.next=63;break}return s.abrupt("return");case 63:if("INVALID_OPERATION"!==(null==s.t1?void 0:s.t1.code)){s.next=65;break}return s.abrupt("return");case 65:(0,i.tO)(s.t1);case 66:return s.prev=66,ic(10),s.finish(66);case 69:case"end":return s.stop()}}),s,null,[[0,57,66,69],[19,27]])})));return function(e){return s.apply(this,arguments)}}()},cc=function(e){return function(){var t=(0,r.Z)(l().mark((function t(n){var a,s,r,o,c;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a=window.game,s=a.facebook,r=a.globalScene,o=a.analytics,r.screen.open(Os.o4.NOTIFY_SCREEN,{message:"loading",loading:!0}),c=s.getContextID(),tc({contextId:c}),o.event(Nn._.JOIN_GROUP,{group_id:c}),t.next=8,n(dc(Xa,e));case 8:t.next=17;break;case 10:if(t.prev=10,t.t0=t.catch(0),!(t.t0 instanceof vr)){t.next=14;break}return t.abrupt("return");case 14:if("INVALID_OPERATION"!==(null==t.t0?void 0:t.t0.code)){t.next=16;break}return t.abrupt("return");case 16:(0,i.tO)(t.t0);case 17:return t.prev=17,ic(100),t.finish(17);case 20:case"end":return t.stop()}}),t,null,[[0,10,17,20]])})));return function(e){return t.apply(this,arguments)}}()},hc=function(e,t,n){return function(){var a=(0,r.Z)(l().mark((function a(s,r){var o,c,h,u,d,p,f,g,m,v,y,T,C,E,A;return l().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(a.prev=0,o=window.game,c=o.player,h=o.profile,u=o.facebook,(d=o.globalScene).screen.open(Os.o4.NOTIFY_SCREEN,{message:"loading",loading:!0}),p=r(),f=c.getPlayerId(p),!((g=c.getConnectedPlayers(p)).length>0)||g[t]){a.next=10;break}return s(gc({mode:ja})),d.events.emit(cs.K.SWITCH,cs.C.GAME_SCENE),a.abrupt("return");case 10:return m=Va,a.next=13,u.getContextPlayers(f);case 13:if(v=a.sent,t===f||t===m.playerId||!g[t]){a.next=18;break}m=g[t],a.next=26;break;case 18:if(1!==v.length){a.next=22;break}m=v[0],a.next=26;break;case 22:return a.next=24,h.requestProfiles([t]);case 24:(y=h.getProfiles())[t]&&(m=y[t]);case 26:return a.next=28,s(Uo(e,m,n));case 28:if(p=r(),ro(p,{playerId:f})!==Va.playerId){a.next=33;break}return a.next=33,s(Zo(e));case 33:if(p=r(),ro(p,{playerId:f})===f||!g[t]){a.next=38;break}return s(rc(t,!0,n)),a.abrupt("return");case 38:if(io(p)===e){a.next=42;break}return d.events.emit(cs.K.SWITCH,cs.C.DASHBOARD_SCENE),a.abrupt("return");case 42:T=ao(p),C=oo(p,{playerId:f}),E=u.getContextID(),A=u.contextType,s(es(E,A)),s(gc(C?{mode:ja}:{mode:Ja,status:T})),d.events.emit(cs.K.SWITCH,cs.C.GAME_SCENE),C&&setTimeout((function(){window.game.scene.getScene(cs.C.GAME_SCENE).events.emit("player-finish-challenge")}),1e3),a.next=55;break;case 52:a.prev=52,a.t0=a.catch(0),(0,i.tO)(a.t0);case 55:return a.prev=55,ic(500),a.finish(55);case 58:case"end":return a.stop()}}),a,null,[[0,52,55,58]])})));return function(e,t){return a.apply(this,arguments)}}()},uc=function(e,t){return function(n){try{var a=window.game.player,s=a.getPlayerId();nr(s,e).catch((function(e){(0,i.tO)(new Error(e))}));var r=a.getPlayerData().level;(a.getBestScore(t)||0)<e&&a.setBestScore(e,t);var o={score:e,level:r};n(Vo(s,o)),n(jo(o))}catch(c){if(c instanceof yr)return;(0,i.tO)(c)}}},lc=function(e,t){var n=[];switch(e){case"klondike":n=window.game.cache.text.get("klondike/draw1/level1").split("\n");break;case"freecell":n=window.game.cache.text.get("freecell/level1").split("\n");break;case"spider":var i=t.suitSize,a=void 0===i?"one":i,s=t.difficulty,r=void 0===s?"easy":s,o=1,c=9;"easy"===r?(o=1,c=3):"medium"===r?(o=4,c=6):"hard"===r&&(o=7,c=9);for(var h=o;h<=c;h++){var u;(u=n).push.apply(u,window.game.cache.text.get("difficulty-"+h+"-"+a+"-suit").split("\n"))}break;default:throw Error("Can not get data for "+e)}return n[Math.floor(Math.random()*n.length)]},dc=function(e,t,n){return void 0===t&&(t=null),void 0===n&&(n=null),function(){var a=(0,r.Z)(l().mark((function a(s,o){var c,h,u,d,p,f,g,m,v,y,T,C,E,A,S,b,I,w,P;return l().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(a.prev=0,h=window.game,u=h.player,d=h.analytics,p=h.facebook,f=h.globalScene,g=p.getContextID(),m={freecell:0,spider:0,klondike:0},v=o(),d.event(Nn._.MATCH_START,{game_mode:GameCore.Utils.String.toUpperCamelCase(e),level:1,level_name:"level_1"}),s({type:Ti,payload:{}}),!En()(c=[ja,qa]).call(c,e)){a.next=16;break}return a.next=10,s((function(e){try{var t=window.game.player;e({type:Pi,payload:{}});var n=t.getPlayerId(),a=fo(Lo.SingleMatchStore)||{},s=a.data;a.data=Do(s),ko({playerId:n,match:a}),e(No(a))}catch(r){if(e(No(null)),r instanceof Xr)return;if(r instanceof Ha)return;if(r instanceof Ao)return;(0,i.tO)(r)}}));case 10:if(v=o(),eo(v)){a.next=15;break}return a.next=15,s(Bo());case 15:m=to(v);case 16:if(e===Xa&&s(Wo(t)),e!==Ja){a.next=34;break}return n=n||window.game.player.getPlayerSettings().gameType,y=window.game.player.getPlayerSettings().drawMode3,T=window.game.player.getPlayerSettings().suitSize,C=window.game.player.getPlayerSettings().relaxedSpider,"easy",A=lc(n,E={draw3:y,suitSize:T,relaxedSpider:C,difficulty:"easy"}),S={gameType:n,seed:A,options:E},a.next=28,s(Fo(t,S));case 28:v=o(),io(v),b=so(v),I=b.playerId,g||(g=window.FBInstant.context.getID()),ec(v,{opponentId:I});case 34:"online"===e&&s(function(){var e=(0,r.Z)(l().mark((function e(t){var n,i,a,s,r,o,c,h;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=window.game.player,s=a.getPlayer(),r=s.playerId,o=s.name,c=s.photo,t({type:Gi,payload:{playerId:r}}),h={},De()(n=on()(i=new Array(20)).call(i,null)).call(n,(function(e,t){var n="0"+(t+1);h[n]={playerId:n,name:"MPlayer "+n,photo:"./assets/images/others/avatar.png"}})),h[r]={playerId:r,name:o,photo:c},t(Yo("mock",h));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),w=u.getPlayerData(v),P=w.score,s(jo({score:m,bestScore:void 0===P?0:P})),s({type:Ci,payload:{mode:e,contextId:g}}),Qo.instance.setGameMode(e),s(ts(e)),f.events.emit(cs.K.SWITCH,cs.C.GAME_SCENE),a.next=50;break;case 43:if(a.prev=43,a.t0=a.catch(0),!(a.t0 instanceof Xr)){a.next=49;break}return window.game.globalScene.screen.open(Os.o4.NOTIFY_SCREEN,{message:"canNowCreateThisMatch",duration:2500,loading:!1}),a.abrupt("return");case 49:(0,i.tO)(a.t0);case 50:return a.prev=50,ic(0),a.finish(50);case 53:case"end":return a.stop()}}),a,null,[[0,43,50,53]])})));return function(e,t){return a.apply(this,arguments)}}()},pc=function(e,t){return function(){var n=(0,r.Z)(l().mark((function n(i,a){var r,o,c,h,u,d,p,f,g,m,v,y,T,C,E,A,S,b,I,w,P;return l().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(o=window.game.player,c=t.score,h=void 0===c?0:c,u=t.level,d=void 0===u?0:u,p=t.time,f=void 0===p?0:p,g=t.moves,m=void 0===g?0:g,v=a(),!(En()(r=[ja,qa]).call(r,e)>=0)){n.next=7;break}return y=eo(v),n.next=7,i(Mo(y));case 7:if(e!==qa){n.next=12;break}if(!(T=Er(v))){n.next=12;break}return n.next=12,(0,Ir.bh)(T,o.getPlayerId(),h);case 12:if(e===Xa&&(i({type:Ni,payload:{}}),C=o.getPlayerId(),i(Vo(C,t))),e!==Ja){n.next=23;break}return E=io(v),A=no(v),S=A.whitePlayerId,b=A.extraData,I=window.game.player.getPlayerId(),w=I===S,P=(0,s.Z)({},b),w?P.whitePlayerData={score:h,time:f,moves:m}:P.blackPlayerData={score:h,time:f,moves:m},n.next=23,i(zo(E,h,(0,s.Z)({level:d},P)));case 23:i({type:Ei,payload:{mode:e}});case 24:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}()},fc=function(){var e=(0,r.Z)(l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("SOLO"!=window.FBInstant.context.getType()){e.next=2;break}return e.abrupt("return");case 2:return window.game.globalScene.screen.open(Os.o4.NOTIFY_SCREEN,{message:"Loading...",loading:!0}),e.next=5,new(h())((function(e){try{var t=setInterval((function(){"SOLO"==window.FBInstant.context.getType()&&(clearInterval(t),e())}),200),n=function(){var n=(0,r.Z)(l().mark((function n(){return l().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,window.FBInstant.context.switchAsync("SOLO",!0);case 3:window.game.analytics.event(Nn._.SWITCH_SOLO_CONTEXT,{success:!0}),n.next=11;break;case 6:n.prev=6,n.t0=n.catch(0),window.game.analytics.event(Nn._.SWITCH_SOLO_CONTEXT,{success:!1}),clearInterval(t),e();case 11:case"end":return n.stop()}}),n,null,[[0,6]])})));return function(){return n.apply(this,arguments)}}();n()}catch(i){e()}}));case 5:ic(10);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),gc=function(e){return function(t){var n=e.mode,a=e.status;t({type:Ai,payload:{mode:n,status:a}}),Qo.instance.setGameMode(n),(0,i.sw)("game-mode",n)}},mc=n(667),vc=n(351),yc=n.n(vc),Tc=function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).name="WideFrameRenderFail",i.message=t||"Wide frame render fail",i.payload=n,i}return(0,o.Z)(t,e),t}((0,W.Z)(Error)),Cc=function(e){if("string"!==typeof e||!e)throw new Tc(null,{imageShare:e})},Ec=(function(){var e=(0,r.Z)(l().mark((function e(){var t,n,i,a,s,r,o,c;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=window.game,n=t.player,i=t.globalScene,a=n.getPlayer(),s=a.playerId,r=a.photo,o=Ec({playerId:s,playerPhoto:r})){e.next=6;break}return e.abrupt("return");case 6:return c={name:"share-best-score",width:750,height:1e3,renderOptions:o},e.next=9,i.frameCapture.capture(c);case 9:return e.abrupt("return",e.sent);case 10:case"end":return e.stop()}}),e)})))}(),function(e){var t=e.playerId,n=void 0===t?"10":t,i=e.playerPhoto;if("string"!==typeof n)return null;if("string"!==typeof(void 0===i?"":i))return null;return{wideFrame:{name:"wide-frame-share",type:"image",x:0,y:0,image:"./assets/wideframes/wide-frame-share.jpg",width:750,height:1e3}}}),Ac=function(e){return(0,r.Z)(l().mark((function t(){var n,a,s,r,o,c,h,u,d,p;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=window.game,a=n.player,s=n.analytics,r=n.facebook,o=n.globalScene,e=e||Rr.filterGameType,t.prev=2,o.screen.open(Os.o4.NOTIFY_SCREEN,{message:"loading",loading:!0}),t.next=6,Sc(e);case 6:return c=t.sent,Cc(c),h=a.getPlayer(),u=h.playerId,d=h.name,p=h.photo,t.next=11,r.shareAsync({text:"Great! I have a best score!",intent:"SHARE",image:c||"",data:{playerId:u,playerName:d,playerPhoto:p,type:Wa,gameType:e}});case 11:s.event(Nn._.SHARE,{share_content_type:"BestScore",success:!0}),t.next=18;break;case 14:t.prev=14,t.t0=t.catch(2),s.event(Nn._.SHARE,{share_content_type:"BestScore",success:!1}),(0,i.tO)(t.t0);case 18:return t.prev=18,o.screen.close(Os.o4.NOTIFY_SCREEN),t.finish(18);case 21:case"end":return t.stop()}}),t,null,[[2,14,18,21]])})))},Sc=function(){var e=(0,r.Z)(l().mark((function e(t){var n,i,a,s,r,o,c,h,u,d,p;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=window.game,i=n.player,a=n.globalScene,t=t||Rr.filterGameType,s=i.getPlayer(),r=s.playerId,o=s.photo,c=s.data,h=(c||{}).score,u=h[t],d=bc({playerId:r,playerPhoto:o,playerScore:u})){e.next=9;break}return e.abrupt("return");case 9:return p={name:"share-best-score",width:952,height:492,renderOptions:d},e.next=12,a.frameCapture.capture(p);case 12:return e.abrupt("return",e.sent);case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),bc=(function(){var e=(0,r.Z)(l().mark((function e(t){var n,i,a,s,r,o,c,h,u,d,p;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=window.game,i=n.player,a=n.globalScene,s=lo(t),r=i.getPlayer(),o=r.playerId,c=r.photo,h=s[o]||{},u=h.score,d=bc({playerId:o,playerPhoto:c,playerScore:u})){e.next=8;break}return e.abrupt("return");case 8:return p={name:"share-current-score",width:952,height:492,renderOptions:d},e.next=11,a.frameCapture.capture(p);case 11:return e.abrupt("return",e.sent);case 12:case"end":return e.stop()}}),e)})))}(),function(e){var t=e.playerId,n=void 0===t?"10":t,i=e.playerPhoto,a=void 0===i?"":i,s=e.playerScore,r=void 0===s?0:s;return"string"!==typeof n||"string"!==typeof a||"number"!==typeof r?null:{avatar:{name:""+n,type:"image",x:48,y:93,image:a,width:205,height:205,fallbackWithImage:Ka.Z.AVATAR.KEY},wideFrame:{name:"wide-frame-message-win",type:"image",x:0,y:0,image:"./assets/wideframes/wide-frame-message-win.png",width:952,height:492},playerScore:{type:"text",x:150,y:365,font:"600 60px",fillStyle:"#ffd10d",text:""+r,textAlign:"center"}}}),Ic=function(){return(0,r.Z)(l().mark((function e(){var t,n,a,s,r,o,c,h,u,d;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=window.game,n=t.player,a=t.analytics,s=t.facebook,r=t.globalScene,e.prev=1,r.screen.open(Os.o4.NOTIFY_SCREEN,{message:"loading",loading:!0}),e.next=5,wc();case 5:return o=e.sent,Cc(o),c=n.getPlayer(),h=c.playerId,u=c.name,d=c.photo,e.next=10,s.shareAsync({text:"A ha, I'm the best!",intent:"CHALLENGE",image:o||"",data:{playerId:h,playerName:u,playerPhoto:d,type:Wa}});case 10:a.event(Nn._.SHARE,{share_content_type:"Leaderboard",success:!0}),e.next=17;break;case 13:e.prev=13,e.t0=e.catch(1),a.event(Nn._.SHARE,{share_content_type:"Leaderboard",success:!1}),(0,i.tO)(e.t0);case 17:return e.prev=17,r.screen.close(Os.o4.NOTIFY_SCREEN),e.finish(17);case 20:case"end":return e.stop()}}),e,null,[[1,13,17,20]])})))},wc=function(){var e=(0,r.Z)(l().mark((function e(){var t,n,i,a,s,r,o,c,h,u,d,p,f,g,m,v,y,T,C,E;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=window.game,n=t.player,i=t.profile,a=t.globalScene,s=n.getPlayer(),r=s.playerId,o=s.name,c=s.photo,(h=n.getConnectedPlayerIds(99,0)).push(r),u=[],e.next=7,qs({playerIds:GameCore.Utils.Array.unique(h),limit:h.length});case 7:d=e.sent,p=GameCore.Utils.Object.keyBy(d,"playerId"),f={playerId:r,name:o,photo:c,score:0},GameCore.Utils.Object.hasOwn(p,r)&&(f=p[r]),u.push(f),e.t0=yc()(l()).call(l(),p);case 14:if((e.t1=e.t0()).done){e.next=27;break}if(g=e.t1.value,!GameCore.Utils.Object.hasOwn(p,g)){e.next=25;break}if(m=p[g],3!==u.length){e.next=20;break}return e.abrupt("break",27);case 20:if(m.playerId!==r){e.next=22;break}return e.abrupt("continue",14);case 22:if(!(Number(m.score)>Number(f.score))){e.next=24;break}return e.abrupt("continue",14);case 24:u.push(m);case 25:e.next=14;break;case 27:return v=GameCore.Utils.Array.unique(h),e.next=30,i.requestProfiles(v);case 30:if(y=i.getProfiles(),u.forEach((function(e,t){var n=e.playerId;if(GameCore.Utils.Object.hasOwn(y,n)){var i=y[n],a=i.name,s=i.photo;u[t].name=a,u[t].photo=s}})),u.length<3)for(T=0;T<=3-u.length;)u.push({playerId:"bot"+T,name:"???",score:0,photo:"./assets/images/others/avatar.png"}),T++;if(C=Pc({playerId:r,playerName:o,playerPhoto:c,listLeaders:u})){e.next=37;break}return e.abrupt("return");case 37:return E={name:"share-leaderboard",width:1500,height:2e3,renderOptions:C},e.next=40,a.frameCapture.capture(E);case 40:return e.abrupt("return",e.sent);case 41:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Pc=function(e){var t=e.playerId,n=void 0===t?"10":t,i=e.playerPhoto,a=void 0===i?"":i,s=e.listLeaders,r=void 0===s?[]:s;if(!Array.isArray(r))return null;if("string"!==typeof n)return null;if("string"!==typeof a)return null;var o={avatar:{name:""+n,type:"image",x:510,y:278,image:a,width:510,height:510,fallbackWithImage:Ka.Z.AVATAR.KEY}};return r.forEach((function(e,t){var n=e.playerId,i=e.photo;o["photo_"+n]={name:""+n,type:"image",x:436,y:1294+180*t,image:i,width:96,height:96,fallbackWithImage:Ka.Z.AVATAR.KEY}})),o.wideFrame={name:"wide-frame-share",type:"image",x:0,y:0,image:"./assets/wideframes/wide-frame-share.jpg",width:1500,height:2e3},r.forEach((function(e,t){var n=e.playerId,i=e.name,a=e.score;o["name_"+n]={type:"text",x:600,y:1360+180*t,font:"600 48px",text:i,fillStyle:"#b18151"},o["score_"+n]={type:"text",x:1e3,y:1360+180*t,font:"600 48px",text:a,fillStyle:"#b18151"}})),o},kc=function(e){return function(){var t=(0,r.Z)(l().mark((function t(n,a){var s,r,o,c,h,u,d,p,f,g,m;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s=window.game,r=s.player,o=s.analytics,c=s.facebook,h=s.globalScene,t.prev=1,h.screen.open(Os.o4.NOTIFY_SCREEN,{message:"loading",loading:!0}),u=a(),t.next=6,_c(u);case 6:return d=t.sent,Cc(d),p=r.getPlayer(),f=p.playerId,g=p.name,m=p.photo,t.next=11,c.shareAsync({text:"Pheww, a great match!",intent:"SHARE",image:d||"",data:{playerId:f,playerName:g,playerPhoto:m,type:Wa,gameType:e}});case 11:o.event(Nn._.SHARE,{share_content_type:"MatchResult",success:!0}),t.next=18;break;case 14:t.prev=14,t.t0=t.catch(1),o.event(Nn._.SHARE,{share_content_type:"MatchResult",success:!1}),(0,i.tO)(t.t0);case 18:return t.prev=18,h.screen.close(Os.o4.NOTIFY_SCREEN),t.finish(18);case 21:case"end":return t.stop()}}),t,null,[[1,14,18,21]])})));return function(e,n){return t.apply(this,arguments)}}()},_c=function(){var e=(0,r.Z)(l().mark((function e(t){var n,i,a,s,r,o,c,h,u,d,p,f,g,m,v,y,T,C;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=window.game,i=n.player,a=n.globalScene,s=lo(t),r=i.getPlayer(),o=r.photo,c=r.playerId,h=so(t),u=h.playerId,d=h.photo,p=oo(t,{playerId:c}),f=co(t,{opponentId:u}),g=s[c]||{},m=g.score,v=s[u]||{},y=v.score,T=Oc({playerId:c,playerPhoto:o,playerScore:m,opponentId:u,opponentPhoto:d,opponentScore:y,isPlayerFinished:p,isOpponentFinished:f})){e.next=12;break}return e.abrupt("return");case 12:return C={name:"share-game-result",width:952,height:492,renderOptions:T},e.next=15,a.frameCapture.capture(C);case 15:return e.abrupt("return",e.sent);case 16:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),xc=(function(){var e=(0,r.Z)(l().mark((function e(t){var n,i,a,s,r,o,c,h,u,d,p,f,g,m,v,y,T,C,E;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=window.game,a=i.player,s=i.globalScene,r=lo(t),o=a.getPlayer(),c=o.photo,h=o.playerId,e.next=5,window.FBInstant.player.getConnectedPlayersAsync();case 5:if(u=e.sent,d=xc(),p=(null==(n=D()(u).call(u,(function(e){return e.getID()===d})))?void 0:n.getPhoto())||Ka.Z.AVATAR.FILE,f=oo(t,{playerId:h}),g=co(t,{opponentId:d}),m=r[h]||{},v=m.score,y=r[d]||{},T=y.score,C=Oc({playerId:h,playerPhoto:c,playerScore:v,opponentId:d,opponentPhoto:p,opponentScore:T,isPlayerFinished:f,isOpponentFinished:g})){e.next=16;break}return e.abrupt("return");case 16:return E={name:"share-game-result",width:952,height:492,renderOptions:C},e.next=19,s.frameCapture.capture(E);case 19:return e.abrupt("return",e.sent);case 20:case"end":return e.stop()}}),e)})))}(),function(){var e=window.game.player,t=window.FBInstant.getEntryPointData()||{},n=t.playerId,i=t.opponentId;return n==e.getPlayerId()?i:n}),Oc=(function(){var e=(0,r.Z)(l().mark((function e(t){var n,i,a,s,r,o,c,h,u,d,p,f,g,m,v;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=window.game,i=n.player,a=n.globalScene,s=lo(t),r=i.getPlayer(),o=r.photo,c=r.playerId,h=uo(t),u=h.playerId,d=h.photo,p=h.score,f=s[c]||{},g=f.score,m=Oc({playerId:c,playerPhoto:o,playerScore:g,opponentId:u,opponentPhoto:d,opponentScore:p})){e.next=9;break}return e.abrupt("return");case 9:return v={name:"share-group-match-result",width:952,height:492,renderOptions:m},e.next=12,a.frameCapture.capture(v);case 12:return e.abrupt("return",e.sent);case 13:case"end":return e.stop()}}),e)})))}(),function(e){var t=e.playerId,n=void 0===t?"10":t,i=e.playerPhoto,a=void 0===i?"":i,s=e.playerScore,r=void 0===s?0:s,o=e.opponentId,c=void 0===o?"20":o,h=e.opponentPhoto,u=void 0===h?"":h,l=e.opponentScore,d=void 0===l?0:l,p=e.isPlayerFinished,f=e.isOpponentFinished;if("string"!==typeof n)return null;if("string"!==typeof a)return null;if("number"!==typeof r)return null;if("string"!==typeof c)return null;if("string"!==typeof u)return null;if("number"!==typeof d)return null;if("boolean"!==typeof p)return null;if("boolean"!==typeof f)return null;var g=r===d,m=r>d,v=p||f,y=p&&f,T={leftPhoto:{name:""+(y&&!m?c:n),type:"image",x:50,y:-35,image:a,width:230,height:230,fallbackWithImage:Ka.Z.AVATAR.KEY,angle:-5},rightPhoto:{name:""+(y&&!m?n:c),type:"image",x:430,y:-80,image:u,width:230,height:230,fallbackWithImage:Ka.Z.AVATAR.KEY,angle:5},wideFrame:{name:"wide-frame-game-result",type:"image",x:0,y:0,image:"./assets/wideframes/wide-frame-game-result.png",width:952,height:492}};return!v||!g&&y||(T.leftScore={type:"text",x:280,y:380,font:"600 50px",fillStyle:"#ffd10d",text:p?""+r:"???",textAlign:"center",strokeThickness:0,angle:-4},T.rightScore={type:"text",x:670,y:310,font:"600 50px",fillStyle:"#ffd10d",text:f?""+d:"???",textAlign:"center",strokeThickness:0,angle:4.5}),!g&&y&&(T.leftCrown={name:"crown-icon",type:"image",x:118,y:11,image:"./assets/images/others/crown-icon.png",width:115,height:99}),T}),Lc=function(e){var t=e?e.split("_"):[],n=t.length>0?t[0]:"en_US";switch(n){case"id":case"in":n="id"}return n},Rc=n(653),Dc=function(e){function t(t,n){var i;(i=e.call(this,t)||this).payload=void 0,i.loading=void 0,i.photo=void 0,i.avtFrame=void 0,i.background=void 0,i.loadPhotoTimer=void 0,i.handleLoadPhotoAfterDelay=function(e,t){return function(){var n=i.scene.textures.get(e);n&&n.key===e?i.handleLoadComplete(e):(i.scene.load.once("filecomplete-image-"+e,i.handleLoadComplete),i.scene.load.image(e,t),i.scene.load.start())}},i.handleLoadComplete=function(e){if(i.scene){var t=i.payload,n=t.id,a=t.radius,s=void 0===a?0:a;if(n&&n===e){var r=n+"_bordered_"+s,o=s>0?r:n,c=i.scene.textures.get(o);if(c&&c.key===o)i.setPhoto(c.key);else if(0!=s&&s<100){if(!GameCore.Utils.Image.drawBorder({scene:i.scene,key:n,newKey:r,radius:s}))return void i.showLoading(!1);i.setPhoto(r)}else if(100==s){if(!GameCore.Utils.Image.drawCircle({scene:i.scene,key:n,newKey:r}))return void i.showLoading(!1);i.setPhoto(r)}else i.setPhoto(n)}}},i.handleLoadPhotoFailed=function(e){e.key===i.payload.id&&i.setDefaultAvatar(e.key)},i.scene.add.existing((0,As.Z)(i)),i.payload=n,i.setSize(n.width,n.height),i.createBackground(),i.createLoading(),i.createPhoto(),i.createFrame();var a=i.payload,s=a.id,r=a.url,o=a.radius;return s&&r&&i.loadPhoto(s,r,o),i.addDefaultListeners(),i}(0,o.Z)(t,e);var n=t.prototype;return n.setFrame=function(e){this.avtFrame.setFrame(e),this.avtFrame.setVisible(!0)},n.setFrameSize=function(e,t){this.avtFrame.setWorldSize(e,t)},n.setBackground=function(e){this.background.setFrame(e)},n.loadPhoto=function(e,t,n){var i;if(void 0===n&&(n=0),e=e||Ka.Z.AVATAR.KEY,t=t||Ka.Z.AVATAR.FILE,this.payload.id=e,this.payload.url=t,this.payload.radius=n,null==(i=this.loadPhotoTimer)||i.remove(),e&&t){var a=this.scene.textures.get(e);if(a&&a.key===e)this.handleLoadComplete(e);else{this.showLoading(!0);var s=this.payload.loadDelay||0;this.loadPhotoTimer=this.scene.time.delayedCall(s,this.handleLoadPhotoAfterDelay(e,t))}}else this.setPhoto(Ka.Z.AVATAR.KEY)},n.addDefaultListeners=function(){var e=this;this.scene.load.on(Phaser.Loader.Events.FILE_LOAD_ERROR,this.handleLoadPhotoFailed),this.on(Phaser.GameObjects.Events.DESTROY,(function(){var t;null==(t=e.loadPhotoTimer)||t.remove(),e.scene.load.off(Phaser.Loader.Events.FILE_LOAD_ERROR,e.handleLoadPhotoFailed)}))},n.setDefaultAvatar=function(e){this.loadPhoto(e,Ka.Z.AVATAR.FILE,this.payload.radius)},n.createBackground=function(){var e=this.payload,t=e.key,n=e.background;this.background=this.scene.make.image({key:t,frame:n}),this.background.setWorldSize(this.payload.backgroundWidth||this.width,this.payload.backgroundHeight||this.height),this.add(this.background)},n.createLoading=function(){this.loading=new xs(this.scene),this.loading.setWorldSize(.75*this.width,.75*this.height),this.loading.setVisible(!1),this.add(this.loading)},n.createPhoto=function(){this.photo=this.scene.make.image({x:0,y:0,origin:{x:.5,y:.5},visible:!1}),this.add(this.photo)},n.createFrame=function(){var e=this.payload,t=e.key,n=e.frame,i=e.width,a=e.height;n?(this.avtFrame=this.scene.make.image({key:t,frame:n}),this.avtFrame.setWorldSize(i,a)):this.avtFrame=this.scene.make.image({x:0,y:0,origin:{x:.5,y:.5},visible:!1}),this.add(this.avtFrame)},n.showLoading=function(e){this.photo.setVisible(!e),this.loading.setVisible(e)},n.setPhoto=function(e){this.showLoading(!1),this.photo.setTexture(e),this.photo.setFrame(0);var t=this.payload,n=t.width,i=t.height,a=Math.min(n,i)-3;this.photo.setWorldSize(this.payload.photoWidth||a,this.payload.photoHeight||a),Phaser.Display.Align.In.Center(this.photo,this.background)},n.addBackground=function(){var e="avatar-background";if(!this.scene.textures.exists(e)){var t=this.width,n=this.height,i=this.scene.add.graphics();i.fillStyle(65280,.2),i.fillRect(0,0,t,n),i.generateTexture(e,t,n),i.destroy()}var a=this.scene.add.image(0,0,e);this.add(a)},t}(Phaser.GameObjects.Container),Bc=Dc,Mc=Gn.Z.DEFAULT,Nc=Mc.KEY,Gc=Mc.FRAME,Fc=function(e){function t(t){var n;return(n=e.call(this,t,{key:Nc,frame:Gc.AVATAR_FRAME_BLUE,background:Gc.AVATAR_BG_BLUE,width:60,height:60})||this).scene=void 0,n.scene=t,n}return(0,o.Z)(t,e),t.prototype.setHighlight=function(e){e?this.avtFrame.setFrame(Gc.AVATAR_FRAME_YELLOW):this.avtFrame.setFrame(Gc.AVATAR_FRAME_BLUE)},t}(Bc),Zc=Fc,Uc=Gn.Z.DEFAULT,zc=Uc.KEY,Hc=Uc.FRAME,Wc=function(e){function t(t,n){var i;return(i=e.call(this,t)||this).scene=void 0,i.payload=void 0,i.avatar=void 0,i.block=void 0,i.rankIcon=void 0,i.rankText=void 0,i.playerScore=void 0,i.label=void 0,i.scene=t,i.createBlock(),i.createAvatar(),i.createRankIcon(),i.createRankText(),i.createLabel(),i.createPlayerScore(),n&&i.updateInfo(n),i.scene.add.existing((0,As.Z)(i)),i}(0,o.Z)(t,e);var n=t.prototype;return n.updateInfo=function(e){this.payload=e,this.updateAvatar(),this.updateRankIcon(),this.updateRankText(),this.updatePlayerScore()},n.setLabel=function(e){this.label.setText(e)},n.setRank=function(e){this.rankText.setText(e)},n.setScore=function(e){this.playerScore.setText(e)},n.setHighlight=function(e){e?(this.y-=6,this.scale+=.1,this.label.scale+=.15,this.block.setFrame(Hc.BLOCK_LEADER_YELLOW)):(this.y+=6,this.scale-=.1,this.label.scale-=.15,this.block.setFrame(Hc.BLOCK_LEADER_BLUE)),this.avatar.setHighlight(e)},n.createBlock=function(){this.block=this.scene.make.image({key:zc,frame:Hc.BLOCK_LEADER_BLUE}),this.block.setWorldSize(79,99),this.add(this.block)},n.createAvatar=function(){this.avatar=new Zc(this.scene),Phaser.Display.Align.In.TopCenter(this.avatar,this.block,0,this.avatar.displayHeight/2-4),this.add(this.avatar)},n.updateAvatar=function(){var e=this.payload,t=e.playerId,n=e.photo;this.avatar.loadPhoto(t,n,50)},n.getRankFrame=function(){var e=Hc.ICON_FLAG;switch(this.payload.rank){case 1:e=Hc.ICON_CUP_GOLD;break;case 2:e=Hc.ICON_CUP_SILVER;break;case 3:e=Hc.ICON_CUP_COPPER}return e},n.createRankIcon=function(){var e=Hc.ICON_FLAG;this.rankIcon=this.scene.make.image({key:zc,frame:e}),e!=Hc.ICON_FLAG?this.rankIcon.setWorldSize(46,30):this.rankIcon.setWorldSize(27,27),Phaser.Display.Align.In.Center(this.rankIcon,this.block,0,-15),this.add(this.rankIcon)},n.updateRankIcon=function(){var e=this.getRankFrame();this.rankIcon.setFrame(e),e!=Hc.ICON_FLAG?this.rankIcon.setWorldSize(46,30):this.rankIcon.setWorldSize(27,27),Phaser.Display.Align.In.Center(this.rankIcon,this.block,0,-15)},n.createRankText=function(){this.rankText=this.scene.make.bitmapText({font:Rc.Z.PRIMARY.KEY,size:this.scene.fontSize(18),origin:{x:.5,y:.5},text:"1"}),Phaser.Display.Align.In.Center(this.rankText,this.rankIcon,0,-2),this.add(this.rankText)},n.updateRankText=function(){this.rankText.setText(this.payload.rank.toString())},n.createLabel=function(){this.label=this.scene.make.bitmapText({font:Rc.Z.PRIMARY.KEY,size:this.scene.fontSize(14),origin:{x:.5,y:0},text:"Play"}),Phaser.Display.Align.In.BottomCenter(this.label,this.block,0,-10),this.add(this.label)},n.createPlayerScore=function(){this.playerScore=this.scene.make.bitmapText({font:Rc.Z.PRIMARY.KEY,size:this.scene.fontSize(18),origin:{x:.5,y:.5},text:"132500"}),this.playerScore.setTint(5582186),Phaser.Display.Align.In.Center(this.playerScore,this.block,0,5),this.add(this.playerScore)},n.updatePlayerScore=function(){this.playerScore.setText(Math.floor(this.payload.score).toString())},(0,he.Z)(t,[{key:"onClick",set:function(e){var t=this.block,n=t.width,i=t.height;this.setSize(n,i+this.avatar.height),this.setInteractive({useHandCursor:!0}),this.off(Phaser.Input.Events.GAMEOBJECT_POINTER_DOWN),this.on(Phaser.Input.Events.GAMEOBJECT_POINTER_DOWN,e)}}]),t}(Phaser.GameObjects.Container),Yc=Wc,Kc=function(e){function t(t,n){var a;return(a=e.call(this,t)||this).scene=void 0,a.payload=void 0,a.leaderBlocks=void 0,a.entrancesAnimation=void 0,a.listLeaderBlocks=void 0,a.handleChallengeFriend=function(e){return function(){a.scene.storage.dispatch(rc(e))}},a.handleShareLeaderboard=function(){a.scene.audio.playSound(Ls.Z.BUTTON_CLICK),a.scene.storage.dispatch(Ic())},a.handleMatchingGroup=(0,r.Z)(l().mark((function e(){var t,n,s,r,o,c,h,u,d;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.scene,n=t.player,s=t.storage,r=t.game,o=t.facebook,e.prev=1,r.globalScene.screen.open(Os.o4.NOTIFY_SCREEN,{message:"loading",loading:!0}),c=n.getPlayer(),h="global","en"===(u=Lc(c.locale))&&(h="en"),"in"===u&&(h="in"),e.next=10,o.matchPlayerAsync(h,!0,!0);case 10:if(d=e.sent,r.globalScene.screen.close(Os.o4.NOTIFY_SCREEN),d){e.next=14;break}return e.abrupt("return");case 14:s.dispatch(cc()),e.next=21;break;case 17:e.prev=17,e.t0=e.catch(1),r.globalScene.screen.close(Os.o4.NOTIFY_SCREEN),e.t0 instanceof Error&&(0,i.tO)(e.t0);case 21:case"end":return e.stop()}}),e,null,[[1,17]])}))),a.scene=t,a.setName("LeadersBar"),a.listLeaderBlocks=[],a.createLeaderBlocks(),a.createEntrancesAnimation(),n&&a.updateInfo(n),a.scene.add.existing((0,As.Z)(a)),a}(0,o.Z)(t,e);var n=t.prototype;return n.updateInfo=function(e){var t=this;this.payload=e;var n,i=!1,a=this.payload,s=a.playerId;(a.leaders.forEach((function(e){var n,a=t.leaderBlocks.getFirstDead(!0);a.updateInfo(e),-1===e.score?(a.setRank(""),a.setLabel("Join"),a.setScore("Global"),a.onClick=t.handleMatchingGroup):e.playerId===s?(a.setLabel("Share"),a.setHighlight(!0),a.onClick=t.handleShareLeaderboard):a.onClick=t.handleChallengeFriend(e.playerId),t.add(a),a.setVisible(!0),a.setActive(!0),En()(n=t.listLeaderBlocks).call(n,a)<0&&(i=!0)})),this.alignBlocks(),i)&&(this.listLeaderBlocks=Le()(n=this.leaderBlocks.getChildren()).call(n,(function(e){return e.active})),this.createEntrancesAnimation());this.runAnimation()},n.killAndHideAll=function(){var e=this;this.removeAll(!1),this.leaderBlocks.getChildren().forEach((function(t){return e.leaderBlocks.killAndHide(t)}))},n.runAnimation=function(){this.leaderBlocks.setAlpha(0),this.entrancesAnimation.play()},n.createEntrancesAnimation=function(){this.entrancesAnimation=new mc.Z({targets:this.listLeaderBlocks,delay:this.scene.tweens.stagger(50,{start:400}),props:{y:{from:100,to:0},alpha:{from:0,to:1}}})},n.alignBlocks=function(){var e=-(this.leaderBlocks.getLength()-1)/2*95;this.leaderBlocks.setX(e,95)},n.createLeaderBlocks=function(){this.leaderBlocks=this.scene.add.group({classType:Yc})},t}(Phaser.GameObjects.Container),Vc=Kc,jc=n(669),Jc=Gn.Z.DEFAULT,Xc=Jc.KEY,qc=Jc.FRAME,Qc=function(e){function t(t){var n;return(n=e.call(this,t,Xc,qc.BUTTON_YELLOW_CIRCLE,100.05,78.2)||this).scene=void 0,n.setName("Home"),n.scene=t,n.createIcon(),n}return(0,o.Z)(t,e),t.prototype.createIcon=function(){var e=this.scene.make.image({key:Xc,frame:qc.ICON_FLAT_HOME});e.setSize(43,43).setDisplaySize(43,43),Phaser.Display.Align.In.Center(e,this.button),this.add(e)},t}(jc.Z),$c=Qc,eh=Gn.Z.DEFAULT,th=eh.KEY,nh=eh.FRAME,ih=function(e){function t(t){var n;return(n=e.call(this,t,th,nh.BUTTON_GREEN_SHORT,176,77.05)||this).scene=void 0,n.setName("PlayWithFriends"),n.scene=t,n.createLabel(),n}return(0,o.Z)(t,e),t.prototype.createLabel=function(){var e=this.scene.make.bitmapText({font:Rc.Z.PRIMARY.KEY,size:this.scene.fontSize(30),text:"PLAY"});Phaser.Display.Align.In.Center(e,this.button,0,-12);var t=this.scene.make.bitmapText({font:Rc.Z.PRIMARY.KEY,size:this.scene.fontSize(18),text:"WITH FRIENDS"});Phaser.Display.Align.In.Center(t,this.button,0,11),this.add([e,t])},t}(jc.Z),ah=ih,sh=Gn.Z.DEFAULT,rh=sh.KEY,oh=sh.FRAME,ch=function(e){function t(t){var n;return(n=e.call(this,t,rh,oh.BUTTON_YELLOW_CIRCLE,100.05,78.2)||this).scene=void 0,n.setName("Rank"),n.scene=t,n.createIcon(),n}return(0,o.Z)(t,e),t.prototype.createIcon=function(){var e=this.scene.make.image({key:rh,frame:oh.ICON_FLAT_RANK});e.setSize(43,43).setDisplaySize(43,43),Phaser.Display.Align.In.Center(e,this.button),this.add(e)},t}(jc.Z),hh=ch,uh=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n.homeButton=void 0,n.rankButton=void 0,n.pwfButton=void 0,n.entrancesAnimation=void 0,n.runAnimation=function(){n.entrancesAnimation.play()},n.scene=t,n.setName("FooterBar"),n.createHomeButton(),n.createRankButton(),n.createPlayWithFriendsButton(),n.createEntrancesAnimation(),n.alignIcons(),n.scene.add.existing((0,As.Z)(n)),n}(0,o.Z)(t,e);var n=t.prototype;return n.createEntrancesAnimation=function(){this.entrancesAnimation=new mc.Z({targets:[this],delay:800,props:{y:"-=5",alpha:{start:0,from:0,to:1}}})},n.alignIcons=function(){Phaser.Display.Align.In.Center(this.homeButton,this,-130,-6),Phaser.Display.Align.In.Center(this.pwfButton,this,0,-6),Phaser.Display.Align.In.Center(this.rankButton,this,130,-6)},n.createHomeButton=function(){this.homeButton=new $c(this.scene),this.add(this.homeButton)},n.createRankButton=function(){this.rankButton=new hh(this.scene),this.add(this.rankButton)},n.createPlayWithFriendsButton=function(){this.pwfButton=new ah(this.scene),this.add(this.pwfButton)},t}(Phaser.GameObjects.Container),lh=uh,dh=n(663),ph={targets:[],yoyo:!0,duration:120,ease:Phaser.Math.Easing.Circular.Out,props:{scale:{from:1,to:1.3}}},fh=function(e){function t(t){return e.call(this,ph,t)||this}return(0,o.Z)(t,e),t}(Ss.Z),gh=Gn.Z.DEFAULT,mh=gh.KEY,vh=gh.FRAME,yh=function(e){function t(t,n,i,a,s){var r;return(r=e.call(this,t,n,i)||this).barTopLeft=void 0,r.barTopMid=void 0,r.barTopRight=void 0,r.barMidLeft=void 0,r.barMidBg=void 0,r.barMidRight=void 0,r.barBottomLeft=void 0,r.barBottomMid=void 0,r.barBottomRight=void 0,r.setSize(a,s),r.setDepth(Dn.Z.POPUP),r.createPopup(),r.scene.add.existing((0,As.Z)(r)),r}(0,o.Z)(t,e);var n=t.prototype;return n.createPopup=function(){this.createPopupImages(),this.updatePopupSize(),this.alignPopupImages()},n.createPopupImages=function(){this.barTopLeft=this.scene.add.image(0,0,mh,vh.POPUP_TOP_LEFT),this.barTopMid=this.scene.add.image(0,0,mh,vh.POPUP_TOP_MID),this.barTopRight=this.scene.add.image(0,0,mh,vh.POPUP_TOP_RIGHT),this.barMidLeft=this.scene.add.image(0,0,mh,vh.POPUP_MID_LEFT),this.barMidBg=this.scene.add.image(0,0,mh,vh.POPUP_MID_MID),this.barMidRight=this.scene.add.image(0,0,mh,vh.POPUP_MID_RIGHT),this.barBottomLeft=this.scene.add.image(0,0,mh,vh.POPUP_BOTTOM_LEFT),this.barBottomMid=this.scene.add.image(0,0,mh,vh.POPUP_BOTTOM_MID),this.barBottomRight=this.scene.add.image(0,0,mh,vh.POPUP_BOTTOM_RIGHT),this.barTopLeft.setWorldSize(65,48),this.barTopMid.setWorldSize(65,48),this.barTopRight.setWorldSize(65,48),this.barMidLeft.setWorldSize(65,48),this.barMidBg.setWorldSize(65,48),this.barMidRight.setWorldSize(65,48),this.barBottomLeft.setWorldSize(65,48),this.barBottomMid.setWorldSize(65,48),this.barBottomRight.setWorldSize(65,48),this.add([this.barTopRight,this.barTopMid,this.barBottomLeft,this.barBottomRight,this.barMidLeft,this.barMidRight,this.barTopLeft,this.barBottomMid,this.barMidBg])},n.updatePopupSize=function(){this.barTopMid.setWorldSize(this.width-129,this.barTopMid.height),this.barMidLeft.setWorldSize(this.barMidLeft.width,this.height-95),this.barMidBg.setWorldSize(this.width-129,this.height-95),this.barMidRight.setWorldSize(this.barMidRight.width,this.height-95),this.barBottomMid.setWorldSize(this.width-129,this.barBottomMid.height)},n.alignPopupImages=function(){Phaser.Display.Align.In.TopLeft(this.barTopLeft,this),Phaser.Display.Align.In.TopCenter(this.barTopMid,this),Phaser.Display.Align.In.TopRight(this.barTopRight,this),Phaser.Display.Align.In.LeftCenter(this.barMidLeft,this),Phaser.Display.Align.In.Center(this.barMidBg,this),Phaser.Display.Align.In.RightCenter(this.barMidRight,this),Phaser.Display.Align.In.BottomLeft(this.barBottomLeft,this),Phaser.Display.Align.In.BottomCenter(this.barBottomMid,this),Phaser.Display.Align.In.BottomRight(this.barBottomRight,this)},(0,he.Z)(t,[{key:"onClose",set:function(e){this.setInteractive({useHandCursor:!0}),this.on(Phaser.Input.Events.GAMEOBJECT_POINTER_DOWN,e)}}]),t}(Phaser.GameObjects.Container),Th=yh,Ch=function(e){function t(t,n){var i;return(i=e.call(this,t)||this).payload=void 0,i.mainText=void 0,i.shadowText=void 0,i.payload=n,i.createMainText(),i.createShadowText(),i.updateSize(),i.moveDown(i.shadowText),i.scene.add.existing((0,As.Z)(i)),i}(0,o.Z)(t,e);var n=t.prototype;return n.setText=function(e){this.mainText.setText(e),this.shadowText.setText(e),this.updateSize()},n.setTintText=function(e,t,n,i){this.mainText.setTint(e,t,n,i)},n.setDropShadow=function(e,t,n,i){void 0===i&&(i=1),this.shadowText.setVisible(!0),this.shadowText.setTint(n),this.shadowText.setAlpha(i),Phaser.Display.Align.In.Center(this.shadowText,this.mainText,e,t)},n.updateSize=function(){var e=this.mainText,t=e.width,n=e.height;this.setSize(t,n)},n.createMainText=function(){this.mainText=this.scene.make.bitmapText({font:this.payload.font,size:this.payload.size,origin:{x:.5,y:.5}}),this.add(this.mainText)},n.createShadowText=function(){this.shadowText=this.scene.make.bitmapText({font:this.payload.font,size:this.payload.size,origin:{x:.5,y:.5},visible:!1}),this.add(this.shadowText)},t}(Phaser.GameObjects.Container),Eh=Ch,Ah=n(672),Sh=Gn.Z.DEFAULT,bh=Sh.KEY,Ih=Sh.FRAME,wh=function(e){function t(t){var n;return(n=e.call(this,t)||this).cat=void 0,n.effect=void 0,n.runStarTwinkle=function(){var e=n.cat,t=e.x,i=e.y,a=e.displayWidth,s=e.displayHeight,r=i-20;n.effect.run(1,t,r,a,s)},n.createEffect(),n.createCat(),n.runCatAnimation(),n.scene.add.existing((0,As.Z)(n)),n}(0,o.Z)(t,e);var n=t.prototype;return n.createCat=function(){this.cat=this.scene.make.image({key:bh,frame:Ih.THE_CAT,origin:{x:.5,y:1}}),this.cat.setWorldSize(204.5,112.5),this.cat.setY(this.cat.height/2),this.add(this.cat)},n.createEffect=function(){this.effect=new Ah.Z(this.scene),this.add(this.effect)},n.runCatAnimation=function(){new dh.Z({targets:[this.cat],duration:1e3,props:{scale:"+=0.02"}}).play()},t}(Phaser.GameObjects.Container),Ph=wh,kh=Gn.Z.DEFAULT,_h=kh.KEY,xh=kh.FRAME,Oh=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n.bestScore=void 0,n.payload=void 0,n.theCat=void 0,n.popup=void 0,n.ribbon=void 0,n.yourScoreText=void 0,n.bestScoreText=void 0,n.currentScoreText=void 0,n.entrancesAnimation=void 0,n.scoreAnimation=void 0,n.counterAnimation=void 0,n.scene=t,n.bestScore=0,n.createPopup(),n.createTheCat(),n.createRibbon(),n.createYourScoreText(),n.createCurrentScore(),n.createBestScore(),n.createScoreAnimation(),n.createEntrancesAnimation(),n.scene.add.existing((0,As.Z)(n)),n}(0,o.Z)(t,e);var n=t.prototype;return n.updateData=function(e){this.payload=e;var t=e.bestScore,n=e.currentScore;if(n<=t)return this.setBestScore(t),this.setCurrentScore(n),void this.runScoreAnimation();this.runAnimation()},n.runAnimation=function(){var e=this;this.runScoreCounter(),this.scene.time.delayedCall(1300,(function(){e.entrancesAnimation.play(),e.scene.audio.playSound(Ls.Z.SCORE_COUNTER)}))},n.runScoreCounter=function(){var e,t=this,n=this.payload,i=n.bestScore,a=n.currentScore;null==(e=this.counterAnimation)||e.remove(),this.counterAnimation=this.scene.tweens.addCounter({from:0,to:a,delay:500,duration:2e3,completeDelay:300,onUpdate:function(e){var n=Math.floor(e.getValue());t.runScoreAnimation(),t.setCurrentScore(n)},onComplete:function(){t.bestScore=i,t.setBestScore(i),t.setCurrentScore(a),t.counterAnimation.remove()}})},n.runScoreAnimation=function(){this.scoreAnimation.play()},n.setBestScore=function(e){this.bestScoreText.setText("Best score: "+e)},n.setCurrentScore=function(e){this.currentScoreText.setText(""+e)},n.createPopup=function(){this.popup=new Th(this.scene,0,0,284,240),this.add(this.popup)},n.createTheCat=function(){this.theCat=new Ph(this.scene),Phaser.Display.Align.In.TopCenter(this.theCat,this.popup),this.add(this.theCat)},n.createRibbon=function(){this.ribbon=this.scene.make.image({key:_h,frame:xh.RIBBON_LONG}),this.ribbon.setSize(341,80).setDisplaySize(341,80),Phaser.Display.Align.In.Center(this.ribbon,this.theCat,0,93),this.add(this.ribbon)},n.createYourScoreText=function(){this.yourScoreText=this.scene.make.bitmapText({font:Rc.Z.PRIMARY.KEY,size:this.scene.fontSize(30),origin:{x:.5,y:.5},text:"Your score"}),Phaser.Display.Align.In.Center(this.yourScoreText,this.ribbon,0,-10),this.add(this.yourScoreText)},n.createCurrentScore=function(){this.currentScoreText=new Eh(this.scene,{font:Rc.Z.PRIMARY.KEY,size:this.scene.fontSize(60)}),this.currentScoreText.setTintText(15779090,15779090,15704623,15704623),this.currentScoreText.setDropShadow(0,2,8804140),Phaser.Display.Align.In.Center(this.currentScoreText,this.popup,0,30),this.add(this.currentScoreText)},n.createBestScore=function(){this.bestScoreText=this.scene.make.bitmapText({font:Rc.Z.PRIMARY.KEY,size:this.scene.fontSize(24),origin:{x:.5,y:.5},text:"Best score: "+this.bestScore}),this.bestScoreText.setTint(10494183),Phaser.Display.Align.In.BottomCenter(this.bestScoreText,this.popup,0,-25),this.add(this.bestScoreText)},n.createEntrancesAnimation=function(){this.entrancesAnimation=new dh.Z({targets:[this],repeat:0,duration:200,props:{scale:"+=0.03"}})},n.createScoreAnimation=function(){this.scoreAnimation=new fh({targets:[this.currentScoreText],props:{scale:{from:1,to:1.3}}})},t}(Phaser.GameObjects.Container),Lh=Oh,Rh=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n.bestScoreBlock=void 0,n.scene=t,n.createBestScoreBlock(),n.scene.add.existing((0,As.Z)(n)),n}return(0,o.Z)(t,e),t.prototype.createBestScoreBlock=function(){this.bestScoreBlock=new Lh(this.scene),this.add(this.bestScoreBlock)},t}(Phaser.GameObjects.Container),Dh=Rh,Bh=n(675),Mh=n(659),Nh={targets:[],duration:600,ease:Phaser.Math.Easing.Back.Out,props:{y:{from:250,to:0},scale:{from:.9,to:1},alpha:{start:0,from:0,to:1}}},Gh=function(e){function t(t){return e.call(this,Nh,t)||this}return(0,o.Z)(t,e),t}(Ss.Z),Fh=n(673),Zh=n(674),Uh=Gn.Z.DEFAULT,zh=Uh.KEY,Hh=Uh.FRAME,Wh=function(e){function t(t,n,i,a){var s;return(s=e.call(this,t,n,i,a)||this).avatar=void 0,s.scoreText=void 0,s.shareButton=void 0,s.bigStarExplosive=void 0,s.open=function(t){e.prototype.open.call((0,As.Z)(s),t);var n=s.getData("bestScore");s.setBestScore(n);var i=s.scene.player.getPlayer();s.avatar.loadPhoto(i.playerId,i.photo),s.runOpenAnimation(),s.scene.audio.playSound(Ls.Z.CONGRATULATION)},s.handleClose=function(){s.scene.screen.close(s.name)},s.handleShareBestScore=function(){s.scene.storage.dispatch(Ac())},s.runBigStarExplosive=function(){Phaser.Display.Align.In.Center(s.bigStarExplosive,s.scoreText),s.bigStarExplosive.run()},s.setDepth(Os.Ks.POPUP),s.background.setAlpha(.8),s.createObjects(),s}(0,o.Z)(t,e);var n=t.prototype;return n.createObjects=function(){this.createTitle(),this.createClose(),this.createBestScoreTitle(),this.createPlayerAvatar(),this.createGlowEffect(),this.createBestScoreNumber(),this.createShareButton(),this.createStarTwinkleEffect(),this.createBigStarExplosive()},n.setBestScore=function(e){this.scoreText.setText(""+e)},n.createTitle=function(){var e=this.scene.make.image({key:zh,frame:Hh.RIBBON_SMALL});e.setSize(162,36).setDisplaySize(162,36);var t=-90;Phaser.Display.Align.In.TopCenter(e,this.zone,0,t);var n=this.scene.make.bitmapText({font:Rc.Z.PRIMARY.KEY,size:10,text:"Today Record"});t=-5,Phaser.Display.Align.In.Center(n,e,0,t),this.add([e,n])},n.createClose=function(){var e=new jc.Z(this.scene,zh,Hh.BUTTON_CLOSE,38,38);e.setName("Close"),this.add(e),Phaser.Display.Align.In.TopRight(e,this.zone,-60,-50),e.onClick=this.handleClose},n.createBestScoreTitle=function(){var e=this.scene.make.bitmapText({font:Rc.Z.PRIMARY.KEY,size:22,text:"bestScore"});this.add(e),e.setTint(13256697),Phaser.Display.Align.In.TopCenter(e,this.zone,0,-130)},n.createBestScoreNumber=function(){this.scoreText=new Eh(this.scene,{font:Rc.Z.PRIMARY.KEY,size:40}),this.add(this.scoreText),this.scoreText.setTintText(15911443,15911443,15902254,15902254),this.scoreText.setDropShadow(0,2,12871743),Phaser.Display.Align.In.TopCenter(this.scoreText,this.zone,0,-230)},n.createPlayerAvatar=function(){this.avatar=new Bc(this.scene,{key:zh,frame:Hh.AVATAR_FRAME_YELLOW_BIG,background:Hh.AVATAR_BG_YELLOW_BIG,width:89,height:89}),this.avatar.background.setSize(89,95).setDisplaySize(89,95),this.avatar.photo.setSize(89,95).setDisplaySize(89,95),this.avatar.avtFrame.setSize(89,95).setDisplaySize(89,95),this.add(this.avatar),Phaser.Display.Align.In.Center(this.avatar,this.zone,0,20)},n.createGlowEffect=function(){var e=Gn.Z.EFFECTS,t=e.KEY,n=e.FRAME,i=this.scene.make.image({key:t,frame:n.FX_GLOW_LIGHT});i.setWorldSize(246,246),this.add(i),this.moveDown(i),Phaser.Display.Align.In.Center(i,this.avatar),this.scene.tweens.add({targets:[i],duration:6e3,repeat:-1,props:{angle:360,scale:{value:"+=0.01",yoyo:!0,duration:800,ease:Phaser.Math.Easing.Sine.InOut}}})},n.createShareButton=function(){this.shareButton=new Fh.Z(this.scene,{key:zh,button:Hh.BUTTON_BLUE,icon:Hh.ICON_FLAT_SHARE,text:"Share"},168,82.8),this.shareButton.setName("Share"),this.add(this.shareButton),Phaser.Display.Align.In.BottomCenter(this.shareButton,this.zone,0,-80),this.shareButton.onClick=this.handleShareBestScore},n.createStarTwinkleEffect=function(){var e=new Ah.Z(this.scene),t=this.scoreText,n=t.x,i=t.y;e.run(2,n,i,300,120)},n.createBigStarExplosive=function(){this.bigStarExplosive=new Zh.Z(this.scene)},n.runOpenAnimation=function(){this.runBigStarExplosive(),this.runScoreEntrancesAnimation(),this.runAvatarEntrancesAnimation(),this.runShareEntrancesAnimation()},n.runScoreEntrancesAnimation=function(){this.scene.tweens.killTweensOf(this.scoreText),new Gh({targets:[this.scoreText],duration:300,props:{y:{from:0,to:this.scoreText.y}}}).play()},n.runAvatarEntrancesAnimation=function(){this.scene.tweens.killTweensOf(this.avatar);var e=this.avatar.scale;new Bh.Z({targets:[this.avatar],duration:400,props:{scale:{from:0,to:e}}}).play()},n.runShareEntrancesAnimation=function(){this.scene.tweens.killTweensOf(this.shareButton),this.shareButton.setAlpha(0),new Mh.Z({targets:[this.shareButton],delay:300}).play()},t}(GameCore.Screen),Yh=Wh,Kh=GameCore.Configs.LeadersBoard,Vh=function(e){function t(){for(var t,n,i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];return(n=e.call.apply(e,x()(t=[this]).call(t,a))||this).bestScore=void 0,n.currentScore=void 0,n.loading=void 0,n.leadersBar=void 0,n.footerBar=void 0,n.main=void 0,n.confettiLeftEffect=void 0,n.confettiRightEffect=void 0,n.run=function(){n.updateLeaders(),n.updateScore(),n.explodeConfettiEffect(),n.main.bestScoreBlock.counterAnimation&&n.main.bestScoreBlock.counterAnimation.state!==Phaser.Tweens.REMOVED?n.main.bestScoreBlock.counterAnimation.on(Phaser.Tweens.Events.TWEEN_COMPLETE,(function(){n.handleShowBestScorePopup(),n.handleShowResultChallengePopup()})):n.time.delayedCall(800,(function(){n.handleShowBestScorePopup(),n.handleShowResultChallengePopup()})),n.footerBar.setAlpha(0),n.footerBar.runAnimation(),n.audio.pauseMusic(),n.audio.playSound(Ls.Z.GAME_OVER_SCENE)},n.runConfettiEffect=function(){var e=n.gameZone.displayWidth;n.confettiLeftEffect.stop(),n.confettiRightEffect.stop(),n.children.bringToTop(n.confettiLeftEffect),n.children.bringToTop(n.confettiRightEffect),n.confettiLeftEffect.run(1,0,-100),n.confettiRightEffect.run(1,0+e,-100),n.tweens.addCounter({delay:1e4,from:100,to:0,ease:Phaser.Math.Easing.Cubic.Out,duration:400,onUpdate:function(e){var t,i,a=e.getValue()/100;null==(t=n.confettiLeftEffect.emitter)||t.setAlpha(a),null==(i=n.confettiRightEffect.emitter)||i.setAlpha(a)},onComplete:function(){var e,t;null==(e=n.confettiLeftEffect.emitter)||e.setAlpha(1),null==(t=n.confettiRightEffect.emitter)||t.setAlpha(1),n.confettiLeftEffect.stop(),n.confettiRightEffect.stop()}})},n.explodeConfettiEffect=function(){var e=n.gameZone.displayWidth,t=-100,i=e;n.tweens.addCounter({repeat:3,duration:500,onStart:function(){n.confettiLeftEffect.explode(6,0,t),n.confettiRightEffect.explode(6,0+i,t)},onRepeat:function(){n.confettiLeftEffect.explode(6,0,t),n.confettiRightEffect.explode(6,0+i,t)},completeDelay:7e3,onComplete:function(){n.tweens.addCounter({from:100,to:0,ease:Phaser.Math.Easing.Cubic.Out,duration:400,onUpdate:function(e){var t,i,a=e.getValue()/100;null==(t=n.confettiLeftEffect.emitter)||t.setAlpha(a),null==(i=n.confettiRightEffect.emitter)||i.setAlpha(a)},onComplete:function(){var e,t;null==(e=n.confettiLeftEffect.emitter)||e.setAlpha(1),null==(t=n.confettiRightEffect.emitter)||t.setAlpha(1),n.confettiLeftEffect.stop(),n.confettiRightEffect.stop()}})}})},n.handlePlayWithFriend=function(){n.storage.dispatch(oc())},n.handleHomeClick=function(){n.scene.switch(cs.C.DASHBOARD_SCENE)},n.handleLeaderboardClick=function(){n.scene.switch(cs.C.LEADERBOARD_SCENE)},n}(0,o.Z)(t,e);var n=t.prototype;return n.preload=function(){var e=this;this.events.on("resume",(function(){e.updateScore()})),this.events.on("sleep",(function(){e.storage.dispatch(Go())})),this.events.on("wake",this.run),this.events.on("create",this.run)},n.create=function(){e.prototype.create.call(this),this.createBackground(Ka.Z.BACKGROUND.KEY);var t=this.player.getBestScore("klondike");this.bestScore=t,this.currentScore=0,this.createLoading(),this.createMain(),this.createLeadersBar(),this.createFooterBar(),this.createBestScoreScreen(),this.createConfettiSmallAnimation()},n.updateLeaders=function(){var e=this;this.leadersBar.killAndHideAll();var t=[{selector:mr,callback:function(t){if(!1===t){var n=window.game.player.getPlayerId(),i=e.getLeadersExcludeIds([n]);e.updateLeaderBar(i)}e.loading.setVisible(t)}}];this.handleStateChange(t),this.storage.dispatch(lr(Kh.LeaderboardId,Ms,20))},n.getLeadersExcludeIds=function(e){var t=this.storage.getState(),n=gr(t),i={};if(!e||0===e.length)return n;for(var a in n)if(En()(e).call(e,a)<0){var s=n[a],r=s.playerId,o=s.photo,c=s.score,h=s.rank;i[a]={playerId:r,photo:o,score:c,rank:h}}return i},n.updateScore=function(){var e=this.storage.getState(),t=po(e),n=t.score,i=void 0===n?0:n,a=t.bestScore,s=void 0===a?0:a;this.bestScore=s<this.bestScore?this.bestScore:s,this.currentScore=i,this.main.bestScoreBlock.updateData({bestScore:this.bestScore,currentScore:this.currentScore})},n.createLoading=function(){this.loading=new xs(this),Phaser.Display.Align.In.Center(this.loading,this.gameZone,0,120)},n.createMain=function(){this.bestScore=0,this.main=new Dh(this),Phaser.Display.Align.In.TopCenter(this.main,this.gameZone,0,-230),this.main.bestScoreBlock.theCat.runStarTwinkle()},n.createLeadersBar=function(){this.leadersBar=new Vc(this),Phaser.Display.Align.In.Center(this.leadersBar,this.gameZone,0,120)},n.updateLeaderBar=function(e){var t={playerId:this.player.getPlayerId(),leaders:[]};for(var n in e){if(t.leaders.length>=3)break;var i=e[n],a=i.playerId,s=i.photo,r=i.score,o=i.rank;t.leaders.push({playerId:a,photo:s,score:r,rank:o})}t.leaders.push({playerId:Ka.Z.ICON_EARTH.KEY,photo:Ka.Z.ICON_EARTH.FILE,rank:4,score:-1}),this.leadersBar.updateInfo(t)},n.createFooterBar=function(){this.footerBar=new lh(this),Phaser.Display.Align.In.BottomCenter(this.footerBar,this.gameZone,0,-70),this.footerBar.homeButton.onClick=this.handleHomeClick,this.footerBar.pwfButton.onClick=this.handlePlayWithFriend,this.footerBar.rankButton.onClick=this.handleLeaderboardClick},n.createBestScoreScreen=function(){this.screen.add(Os.o4.BEST_SCORE_SCREEN,Yh)},n.createConfettiSmallAnimation=function(){this.confettiLeftEffect=new Rs.Z(this,{speedX:{min:-20,max:100},rotate:{start:-1080,end:0}}),this.confettiRightEffect=new Rs.Z(this,{speedX:{min:20,max:-100},rotate:{start:0,end:1080}}),this.confettiLeftEffect.setDepth(Dn.Z.EFFECT),this.confettiRightEffect.setDepth(Dn.Z.EFFECT)},n.handleShowBestScorePopup=function(){var e;this.currentScore>this.bestScore&&this.storage.dispatch(jo({bestScore:this.currentScore}));var t=this.storage.getState(),n=br(t),i=En()(e=[ja,qa]).call(e,n)>=0;this.currentScore>this.bestScore&&i&&(this.screen.open(Os.o4.BEST_SCORE_SCREEN,{bestScore:this.currentScore}),this.runConfettiEffect())},n.handleShowResultChallengePopup=function(){var e,t=this.storage.getState(),n=br(t);if(-1!==En()(e=[Ja,Xa]).call(e,n)&&io(t)){var i=so(t).playerId;n===Xa&&i===Va.playerId||(this.scene.pause(cs.C.GAME_OVER_SCENE),this.scene.launch(cs.C.RESULT_MATCH_SCENE))}},t}(Ts.Z);var jh=Vh,Jh=n(54),Xh=n.n(Jh),qh=n(61),Qh=n.n(qh),$h=n(40),eu=n.n($h),tu=Gn.Z.GAMEPLAY_DEFAULT,nu=tu.KEY,iu=tu.FRAME,au=function(e){function t(t,n){var i;(i=e.call(this,t,0,0,nu,iu.IC_SLOT)||this).placement=void 0;var a=xr.CARD_WIDTH,s=xr.CARD_HEIGHT;return i.placement=n,i.setInteractive(),i.disableInteractive(),i.setWorldSize(a,s),i.setInteractive({useHandCursor:!0}),i.setDepth(Dn.Z.CARD_SLOT),i.scene.add.existing((0,As.Z)(i)),i}(0,o.Z)(t,e);var n=t.prototype;return n.onClick=function(e){var t=!1;this.on(Phaser.Input.Events.GAMEOBJECT_POINTER_DOWN,(function(){t=!0})),this.on(Phaser.Input.Events.GAMEOBJECT_POINTER_UP,(function(){t&&e(),t=!1})),this.on(Phaser.Input.Events.GAMEOBJECT_POINTER_OUT,(function(){t=!1}))},n.offClick=function(){this.off(Phaser.Input.Events.GAMEOBJECT_POINTER_DOWN),this.off(Phaser.Input.Events.GAMEOBJECT_POINTER_UP),this.off(Phaser.Input.Events.GAMEOBJECT_POINTER_OUT)},n.updateSize=function(){var e=xr.CARD_WIDTH,t=xr.CARD_HEIGHT;this.setWorldSize(e,t)},t}(Phaser.GameObjects.Image),su=au,ru=function(e){function t(t){var n;return(n=e.call(this)||this).boardGame=void 0,n.slot=void 0,n.cards=void 0,n.x=void 0,n.y=void 0,n.name=void 0,n.idx=void 0,n.isShowing=void 0,n.boardGame=t,n.cards=[],n.slot=new su(t.scene,(0,As.Z)(n)),n.isShowing=!0,n.setIdx(-1),n}(0,o.Z)(t,e);var n=t.prototype;return n.setName=function(e){this.name=e},n.setIdx=function(e){this.idx=e},n.getIdx=function(){return this.idx},n.getname=function(){return this.name},n.setPosition=function(e,t){this.x=e,this.y=t,this.slot.setPosition(e,t)},n.addCard=function(e,t,n){if(void 0===n&&(n=!1),e.scene.gameplay.cardsLayer.bringToTop(e.bg),e.scene.gameplay.cardsLayer.bringToTop(e),e.scene.gameplay.cardsLayer.bringToTop(e.eligibleFoundationGlow),e.setPlacement(this),t){var i=this.getPlacingPosition(this.cards.length),a=i.x,s=i.y,r=n?0:xr.CARD_MOVE_TIME;e.moveTo(a,s,r)}this.cards.push(e)},n.pickTopCards=function(e){var t,n=this.cards.length;return 0==n?[]:eu()(t=this.cards).call(t,Math.max(n-e,0))},n.getLastCard=function(){return this.cards[this.cards.length-1]},n.getPlacingPosition=function(e){return{x:this.x,y:this.y}},n.canBePlace=function(e,t){return!1},n.update=function(e){},n.clear=function(){this.cards=[]},n.isEmpty=function(){return 0===this.cards.length},n.pickAllCards=function(){var e;return eu()(e=this.cards).call(e,0)},n.updateSlotSize=function(){this.slot.updateSize()},n.getAllCards=function(){for(var e=[],t=0;t<this.cards.length;t++)e.push(this.cards[t].getTag());return e},n.getCardByIndex=function(e){return this.cards[e]},n.show=function(){this.isShowing=!0;for(var e=0;e<this.cards.length;e++)this.cards[e].revive();this.slot.revive()},n.hide=function(){this.isShowing=!1;for(var e=0;e<this.cards.length;e++)this.cards[e].kill();this.slot.kill()},t}(Phaser.Events.EventEmitter),ou=ru,cu=function(e){return e.Stock="stock",e.Waste="waste",e.Pile="pile",e.Foundation="foundation",e.FreeCell="freecell",e}(cu||{}),hu=cu;function uu(e,t){var n="undefined"!==typeof w()&&k()(e)||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){var n;if(!e)return;if("string"===typeof e)return lu(e,t);var i=A()(n=Object.prototype.toString.call(e)).call(n,8,-1);"Object"===i&&e.constructor&&(i=e.constructor.name);if("Map"===i||"Set"===i)return b()(e);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return lu(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var i=0;return function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function lu(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var du=function(e){function t(t){var n;return(n=e.call(this,t)||this).slot.kill(),n.setName(hu.Waste),n}(0,o.Z)(t,e);var n=t.prototype;return n.show=function(){e.prototype.show.call(this),this.slot.kill()},n.hide=function(){e.prototype.hide.call(this),this.slot.kill()},n.alignBeforeAdd=function(){for(var e,t=this.boardGame.scene.player.getPlayerSettings(),n=this.x,i=this.y,a=this.cards.length,s=uu(this.cards);!(e=s()).done;){e.value.disableInteractive()}if(!(a<=2))for(var r=0;r<a;r++)if(this.cards.length-r<3){var o=r-this.cards.length+2;t.largeWidthLayout?this.cards[r].moveTo(n,i+32*o,200):this.cards[r].moveTo(n+16*o,i,200)}},n.align=function(){for(var e=this.cards.length,t=0;t<e;t++){var n=this.getPlacingPosition(t),i=n.x,a=n.y;this.cards[t].moveTo(i,a,200),t==e-1?this.cards[t].setInteractive():this.cards[t].disableInteractive()}},n.addCard=function(t,n){e.prototype.addCard.call(this,t,!1);var i=this.boardGame.scene.player.getPlayerSettings(),a=this.boardGame.scene.world.isLandscape();n&&this.align(),t.setFacingWithFlippingAnim(!0,!(i.largeWidthLayout&&a)),t.setInteractive()},n.getPlacingPosition=function(e){var t=this.boardGame.scene.player.getPlayerSettings(),n=this.boardGame.scene.world.isLandscape(),i=this.x,a=this.y,s=this.cards.length,r=e==s?2:Math.max(s>3?e-s+3:e,0);return n&&t.largeWidthLayout?{x:i,y:a+32*r}:{x:i+16*r,y:a}},n.removeAllCards=function(){var e;return eu()(e=this.cards).call(e,0)},n.clear=function(){this.cards=[]},n.canBePlace=function(e){return!1},t}(ou),pu=du,fu=function(e){return e[e.ACE=401]="ACE",e[e.TWO=402]="TWO",e[e.THREE=403]="THREE",e[e.FOUR=404]="FOUR",e[e.FIVE=405]="FIVE",e[e.SIX=406]="SIX",e[e.SEVEN=407]="SEVEN",e[e.EIGHT=408]="EIGHT",e[e.NINE=409]="NINE",e[e.TEN=410]="TEN",e[e.JACK=411]="JACK",e[e.QUEEN=412]="QUEEN",e[e.KING=413]="KING",e}(fu||{}),gu=function(e){return e[e.ACE=301]="ACE",e[e.TWO=302]="TWO",e[e.THREE=303]="THREE",e[e.FOUR=304]="FOUR",e[e.FIVE=305]="FIVE",e[e.SIX=306]="SIX",e[e.SEVEN=307]="SEVEN",e[e.EIGHT=308]="EIGHT",e[e.NINE=309]="NINE",e[e.TEN=310]="TEN",e[e.JACK=311]="JACK",e[e.QUEEN=312]="QUEEN",e[e.KING=313]="KING",e}(gu||{}),mu=function(e){return e[e.ACE=201]="ACE",e[e.TWO=202]="TWO",e[e.THREE=203]="THREE",e[e.FOUR=204]="FOUR",e[e.FIVE=205]="FIVE",e[e.SIX=206]="SIX",e[e.SEVEN=207]="SEVEN",e[e.EIGHT=208]="EIGHT",e[e.NINE=209]="NINE",e[e.TEN=210]="TEN",e[e.JACK=211]="JACK",e[e.QUEEN=212]="QUEEN",e[e.KING=213]="KING",e}(mu||{}),vu=function(e){return e[e.ACE=101]="ACE",e[e.TWO=102]="TWO",e[e.THREE=103]="THREE",e[e.FOUR=104]="FOUR",e[e.FIVE=105]="FIVE",e[e.SIX=106]="SIX",e[e.SEVEN=107]="SEVEN",e[e.EIGHT=108]="EIGHT",e[e.NINE=109]="NINE",e[e.TEN=110]="TEN",e[e.JACK=111]="JACK",e[e.QUEEN=112]="QUEEN",e[e.KING=113]="KING",e}(vu||{}),yu=function(e){return e[e.ACE=1]="ACE",e[e.TWO=2]="TWO",e[e.THREE=3]="THREE",e[e.FOUR=4]="FOUR",e[e.FIVE=5]="FIVE",e[e.SIX=6]="SIX",e[e.SEVEN=7]="SEVEN",e[e.EIGHT=8]="EIGHT",e[e.NINE=9]="NINE",e[e.TEN=10]="TEN",e[e.JACK=11]="JACK",e[e.QUEEN=12]="QUEEN",e[e.KING=13]="KING",e}(yu||{}),Tu=function(e){return e[e.SpadesCard=1]="SpadesCard",e[e.ClubsCard=2]="ClubsCard",e[e.DiamondsCard=3]="DiamondsCard",e[e.HeartsCard=4]="HeartsCard",e}(Tu||{}),Cu=[Tu.HeartsCard,Tu.DiamondsCard,Tu.ClubsCard,Tu.SpadesCard],Eu=function(){var e=(0,r.Z)(l().mark((function e(t,n){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new(h())((function(e){t.time.delayedCall(n,e)})));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),Au=Eu,Su=function(e){function t(t){var n;return(n=e.call(this,t)||this).spaceBetweenFacingUpCards=xr.VERTICAL_PILE_SPACE,n.setName(hu.Pile),n}(0,o.Z)(t,e);var n=t.prototype;return n.updateCardPosition=function(e){if(0!==this.cards.length){var t=e||this.cards.length;this.updateSpaceBetweenFacingUpCards(t);for(var n=xr.CARD_MOVE_TIME,i=this.y,a=1;a<t;a++){var s=this.getVerticalSpace(a,t),r=this.cards[a];if(r){var o=i+s;r.moveTo(this.x,o,n),i=o}}}},n.getVerticalSpace=function(e,t){void 0===e&&(e=0);var n=t||this.cards.length,i=this.getSpaceBetweenFacingDownCards(n),a=this.getSpaceBetweenFacingUpCards();return e<this.getIdxCardValidToMove(n)+1?i:a},n.getSpaceBetweenFacingDownCards=function(e){var t=xr.MAX_VERTICAL_FACING_DOWN_CARD_SPACE,n=e||this.cards.length,i=this.boardGame.getMaxHeightTableau(),a=this.getIdxCardValidToMove(n)+1;if(0===a)return t;var s=i-(n-a)*this.spaceBetweenFacingUpCards;return s/a>t?t:s/a},n.getSpaceBetweenFacingUpCards=function(){return this.spaceBetweenFacingUpCards},n.updateSpaceBetweenFacingUpCards=function(e){var t=xr.VERTICAL_PILE_SPACE,n=xr.MIN_VERTICAL_FACING_DOWN_CARD_SPACE;this.spaceBetweenFacingUpCards=t;var i=e||this.cards.length;if(!(this.getSpaceBetweenFacingDownCards(i)>=xr.MIN_VERTICAL_FACING_DOWN_CARD_SPACE)){var a=this.getIdxCardValidToMove()+1,s=this.cards.length-a;if(0!==s){var r=(this.boardGame.getMaxHeightTableau()-a*n)/s;this.spaceBetweenFacingUpCards=r}}},n.getIdxCardValidToMove=function(e){for(var t=this.cards,n=0,i=0;i<t.length;i++){if(t[i].isFacingUp())return n;n+=1}return void 0===e?n:n+(e-t.length)},n.addCardByDeal=function(){var t=(0,r.Z)(l().mark((function t(n,i,a){return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.prototype.addCard.call(this,n,i),this.cards.length===a&&this.cards.length>this.boardGame.getBoundNumberOfCards()&&this.updateCardPosition(),t.next=5,Au(this.boardGame.scene,xr.CARD_MOVE_TIME);case 5:case"end":return t.stop()}}),t,this)})));return function(e,n,i){return t.apply(this,arguments)}}(),n.getPlacingPosition=function(e){for(var t=this.x,n=void 0!=e?e:this.cards.length,i=this.y,a=0;a<n;a++)this.cards[a].isFacingUp()?i+=this.boardGame.getVerticalSpacePile():i+=.5*this.boardGame.getVerticalSpacePile();return{x:t,y:i}},n.getSubCards=function(e){var t,n,i=Qh()(t=this.cards).call(t,(function(t){return t===e}));return A()(n=this.cards).call(n,i)},n.pickSubCards=function(e){var t,n,i=Qh()(t=this.cards).call(t,(function(t){return t===e}));return eu()(n=this.cards).call(n,i)},n.getFacingUpCards=function(){var e,t;if(0===this.cards.length)return[];var n=Qh()(e=this.cards).call(e,(function(e){return e.isFacingUp()}));return n<0?[]:A()(t=this.cards).call(t,n)},n.faceUpLast=function(){var e=this.cards.length;if(e>0){var t=this.cards[e-1];if(t.isFacingUp())return;return t.setFacingWithFlippingAnim(!0),t.setInteractive(),t}this.slot.setInteractive()},n.faceDownLast=function(){var e=this.cards.length;if(e>0){var t=this.cards[e-1];return t.setFacingWithFlippingAnim(!1),t.disableInteractive(),t}this.slot.setInteractive()},n.canBePlace=function(e){var t=GameCore.Configs.Gameplay.EditMode;if(GameCore.Utils.Valid.isDebugger()&&t)return!0;var n=e.getTag(),i=n%100,a=Math.floor((n-i)/300);if(0===this.cards.length)return n%100===yu.KING;var s=this.cards[this.cards.length-1].getTag(),r=s%100;return a!=Math.floor((s-r)/300)&&i==r-1},n.canBeHint=function(e){var t=e.getTag(),n=t%100,i=Math.floor((t-n)/300);if(0===this.cards.length)return t%100===yu.KING;var a=this.cards[this.cards.length-1].getTag(),s=a%100;return i!=Math.floor((a-s)/300)&&n==s-1},n.isLastCard=function(e){return this.cards[this.cards.length-1]===e},n.clear=function(){this.cards=[]},t}(ou),bu=Su,Iu=Gn.Z.GAMEPLAY_DEFAULT,wu=(Iu.KEY,Iu.FRAME),Pu=function(e){function t(t){var n;return(n=e.call(this,t)||this).cards=[],n.createAce(),n.setName(hu.Foundation),n}(0,o.Z)(t,e);var n=t.prototype;return n.createAce=function(){var e=xr.CARD_WIDTH,t=xr.CARD_HEIGHT;this.slot.setFrame(wu.FOUNDATION_SLOT),this.slot.setWorldSize(e,t)},n.setPosition=function(t,n){e.prototype.setPosition.call(this,t,n)},n.canBePlace=function(e){var t=e.getTag(),n=t%100,i=(t-n)/100;if(0===this.cards.length)return t%100===yu.ACE;var a=this.cards[this.cards.length-1].getTag(),s=a%100;return i==(a-s)/100&&n==s+1},n.isFull=function(){return 13===this.cards.length},t}(ou),ku=function(e){return e[e.NONE=0]="NONE",e[e.DEALING=1]="DEALING",e[e.IDLE=2]="IDLE",e[e.PLAYING=3]="PLAYING",e[e.AUTO_COMPLETING=4]="AUTO_COMPLETING",e[e.OUT_OF_MOVE=5]="OUT_OF_MOVE",e[e.GAME_OVER=6]="GAME_OVER",e[e.AUTO_MOVE_TO_FOUNDATION=7]="AUTO_MOVE_TO_FOUNDATION",e}({}),_u=Gn.Z.GAMEPLAY_DEFAULT,xu=_u.KEY,Ou=_u.FRAME,Lu=function(e){function t(t,n){var i;return(i=e.call(this,t)||this).hand=void 0,i.handScaleDefault=1,i.name="TutorialHand",i.addHand(n),i.scene.add.existing((0,As.Z)(i)),i}(0,o.Z)(t,e);var n=t.prototype;return n.addHand=function(e){this.hand=this.scene.make.image({key:xu,frame:Ou.HAND,origin:{x:.5,y:.5}});var t=e==is.Z.SPIDER?.7:1;this.hand.setWorldSize(65.5*t,55.5*t),this.handScaleDefault=this.hand.scale,this.resetHandPosition(),this.add(this.hand)},n.doubleTap=function(e,t,n){var i=this;this.setHandPositionOnDoubleClick(),this.scene.tweens.add({delay:e,targets:[this.hand],ease:Phaser.Math.Easing.Cubic.In,props:{scale:{duration:100,from:this.handScaleDefault,to:.8*this.handScaleDefault},angle:{from:0,value:-10,duration:100}},loop:1,yoyo:!0,onComplete:function(){t&&i.hide(),n&&n()}})},n.tapAndHold=function(e,t){this.scene.tweens.add({delay:e,targets:[this.hand],ease:Phaser.Math.Easing.Cubic.Out,props:{scale:{duration:200,from:this.handScaleDefault,to:.8*this.handScaleDefault},angle:{from:0,value:-10,duration:200}},onComplete:t})},n.unHold=function(e,t,n){var i=this;this.scene.tweens.add({delay:e,targets:[this.hand],ease:Phaser.Math.Easing.Cubic.Out,props:{scale:{duration:200,from:.8*this.handScaleDefault,to:this.handScaleDefault},angle:{from:-10,value:0,duration:200}},onComplete:function(){t&&i.hide(),n&&n()}})},n.show=function(){this.hand.setVisible(!0)},n.hide=function(){this.hand.setVisible(!1)},n.preDestroy=function(){this.scene.tweens.killTweensOf(this.hand)},n.kill=function(){e.prototype.kill.call(this),this.resetHandPosition()},n.setHandPositionOnDoubleClick=function(){this.hand.setPosition(5,5)},n.resetHandPosition=function(){this.hand.setPosition(20,20)},t}(Phaser.GameObjects.Container),Ru=Lu,Du=function(e){function t(t){var n;return(n=e.call(this,t)||this).spaceBetweenMajorCards=xr.VERTICAL_PILE_SPACE,n.boardGame=void 0,n.boardGame=t,n.setName(hu.Pile),n}(0,o.Z)(t,e);var n=t.prototype;return n.addCardByDeal=function(){var t=(0,r.Z)(l().mark((function t(n,i,a){var s;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(s=GameCore.Configs.Gameplay.SkipStartAnimation,e.prototype.addCard.call(this,n,i,s),this.cards.length===a&&this.cards.length>this.boardGame.boundNumberOfCards&&this.updateCardPosition(),s){t.next=7;break}return t.next=7,Au(this.boardGame.scene,xr.CARD_MOVE_TIME);case 7:n.setInteractive(),n.setFacingWithFlippingAnim(!0);case 9:case"end":return t.stop()}}),t,this)})));return function(e,n,i){return t.apply(this,arguments)}}(),n.getPlacingPosition=function(e,t){void 0===e&&(e=0);var n=t||this.cards.length,i=this.getSpaceBetweenMinorCards(n),a=this.getSpaceBetweenMajorCards(),s=this.getIdxCardValidToMove(t),r=0;return r=n<=this.boardGame.boundNumberOfCards||-1==s?a*e:e<s?i*e:i*s+a*(e-s),{x:this.x,y:this.y+r}},n.getSubCards=function(e){var t,n,i=Qh()(t=this.cards).call(t,(function(t){return t===e}));return A()(n=this.cards).call(n,i)},n.pickSubCards=function(e){var t,n,i=Qh()(t=this.cards).call(t,(function(t){return t===e}));return eu()(n=this.cards).call(n,i)},n.getFacingUpCards=function(){var e,t;if(0===this.cards.length)return[];var n=Qh()(e=this.cards).call(e,(function(e){return e.isFacingUp()}));return n<0?[]:A()(t=this.cards).call(t,n)},n.faceUpLast=function(){var e=this.cards.length;if(e>0){var t=this.cards[e-1];if(t.isFacingUp())return;return t.setFacingWithFlippingAnim(!0),t.setInteractive(),t}this.slot.setInteractive()},n.faceDownLast=function(){var e=this.cards.length;if(e>0){var t=this.cards[e-1];return t.setFacingWithFlippingAnim(!1),t.disableInteractive(),t}this.slot.setInteractive()},n.canBePlace=function(e,t){var n=GameCore.Configs.Gameplay.EditMode;if(GameCore.Utils.Valid.isDebugger()&&n)return!0;var i=e.getTag(),a=i%100,s=Math.floor((i-a)/300);if(0===this.cards.length)return t<=this.boardGame.getMaxCardCanMoveToEmptyPile();var r=this.cards[this.cards.length-1].getTag(),o=r%100,c=Math.floor((r-o)/300),h=this.boardGame.getMaxCardCanMoveToNonEmptyPile();return s!=c&&a==o-1&&t<=h},n.canBeHint=function(e){var t=e.getTag(),n=t%100,i=Math.floor((t-n)/300);if(0===this.cards.length)return t%100===yu.KING;var a=this.cards[this.cards.length-1].getTag(),s=a%100;return i!=Math.floor((a-s)/300)&&n==s-1},n.isLastCard=function(e){return this.cards[this.cards.length-1]===e},n.clear=function(){this.cards=[],this.spaceBetweenMajorCards=xr.VERTICAL_PILE_SPACE},n.isSorted=function(){if(this.cards.length<=1)return!0;for(var e=0;e<this.cards.length-1;e++){var t=this.cards[e],n=this.cards[e+1];if(t.getTag()%100<n.getTag()%100)return!1}return!0},n.updateCardPosition=function(e){if(0!==this.cards.length){var t=e||this.cards.length;this.updateSpaceBetweenMajorCards(t);for(var n=xr.CARD_MOVE_TIME,i=this.y,a=1;a<t;a++){var s=this.getVerticalSpace(a,t),r=this.cards[a];if(r){var o=i+s;r.moveTo(this.x,o,n),i=o}}this.updateCardsVisibleHeight(t)}},n.updateCardsVisibleHeight=function(e){for(var t=this.getIdxCardValidToMove(e),n=0;n<e;n++){var i=this.cards[n];i&&(i.visibleHeight=n==e-1?i.displayHeight:n<t?this.getSpaceBetweenMinorCards(e):this.getSpaceBetweenMajorCards())}},n.getVerticalSpace=function(e,t){void 0===e&&(e=0);var n=t||this.cards.length,i=this.boardGame.boundNumberOfCards,a=this.getSpaceBetweenMinorCards(n),s=this.getSpaceBetweenMajorCards();return n<=i?s:e<this.getIdxCardValidToMove(n)+1?a:s},n.getSpaceBetweenMinorCards=function(e){var t=xr.VERTICAL_PILE_SPACE,n=e||this.cards.length,i=this.boardGame.getMaxHeightTableau(),a=this.getIdxCardValidToMove(n)+1;if(0===a)return t;var s=i-(n-a)*this.spaceBetweenMajorCards;return s/a>t?t:s/a},n.getSpaceBetweenMajorCards=function(){return this.spaceBetweenMajorCards},n.updateSpaceBetweenMajorCards=function(e){var t=xr.VERTICAL_PILE_SPACE,n=xr.MIN_VERTICAL_PILE_SPACE;this.spaceBetweenMajorCards=t;var i=e||this.cards.length;if(!(this.getSpaceBetweenMinorCards(i)>=xr.MIN_VERTICAL_PILE_SPACE)){var a=this.getIdxCardValidToMove()+1,s=this.cards.length-a;if(0!==s){var r=this.boardGame.getMaxHeightTableau()-a*n,o=Math.floor(r/s);this.spaceBetweenMajorCards=o}}},n.getIdxCardValidToMove=function(e){for(var t=this.cards,n=t.length-1,i=t.length-1;i>0;i--){var a=t[i].getCardValue(),s=t[i].getCardSuit(),r=t[i-1].getCardValue(),o=t[i-1].getCardSuit();if(a!=r-1||s==o)return n;n-=1}return void 0===e?n:n+(e-t.length)},t}(ou),Bu=Du,Mu=function(e){function t(t,n){var i;return(i=e.call(this,t,0,0,Gn.Z.GAMEPLAY_DEFAULT.KEY,"card-bg")||this).parent=void 0,i.updateFromParent=function(){i.setPosition(i.parent.x,i.parent.y+1.5),i.setDisplaySize(144*i.parent.displayWidth/141,219*i.parent.displayHeight/207),i.setVisible(i.parent.visible)},i.parent=n,i.setDepth(Dn.Z.CARD_SLOT),i.updateFromParent(),t.add.existing((0,As.Z)(i)),i}return(0,o.Z)(t,e),t}(Phaser.GameObjects.Image),Nu=Mu,Gu={MOVE_CARD_FROM_FOUNDATION_TO_TABLEAU:"move cards from foundation to tableau",OPEN_CARD:"open card"},Fu=function(e){return e.ACE="one",e.TWO="two",e.THREE="three",e.FOUR="four",e.FIVE="five",e.SIX="six",e.SEVEN="seven",e.EIGHT="eight",e.NINE="nine",e.TEN="ten",e.JACK="jack",e.QUEEN="queen",e.KING="king",e.ANY="any",e}({}),Zu=function(e){return e.SPADE="spade",e.CLUB="club",e.DIAMOND="diamond",e.HEART="heart",e.ANY="any",e}({}),Uu=function(e){return e.TIME="time",e.MOVES="moves",e.STOCK_RECYCLES="stock-recycle",e.NONE="none",e}({}),zu=function(e){return e.COMPLETE_GAME="complete-game",e.COMPLETE_ALMOST_FINISHED_GAME="complete-almost-finished-game",e.OPEN_ONE_CARD="open-one-card",e.MOVE_CARDS_TO_FOUNDATION="move-cards-to-foundation",e.MOVE_SAME_SUIT_CARDS_TO_FOUNDATION="move-same-suit-cards-to-foundation",e.MOVE_ONE_CARD_FROM_STOCK_TO_TABLEAU="move-one-card-from-stock-to-tableau",e.FINISH_N_RUN="finish-n-run",e.CLEAR_N_COLUMNS="clear-n-columns",e.WIN="win",e}({}),Hu=function(){function e(e,t){this.scene=void 0,this.gameObject=void 0,this.config=void 0,this.events=void 0,this.EVENTS={START_JUMP:"START_JUMP",LAND:"LAND"},this.timeline=void 0,this.onCompleteFunction=void 0,this.scene=e.scene,this.gameObject=e,this.events=new Phaser.Events.EventEmitter,this.config=(0,s.Z)({widthExpand:0,heightExpand:0,jumpHeight:20},t)}var t=e.prototype;return t.setWidthExpand=function(e){this.config.widthExpand=e},t.setHeightExpand=function(e){this.config.heightExpand=e},t.setJumpHeight=function(e){this.config.jumpHeight=e},t.run=function(){var e=(0,r.Z)(l().mark((function e(){var t=this;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.stop(),e.abrupt("return",new(h())((function(e){var n=t.config,i=n.widthExpand,a=n.heightExpand,s=n.jumpHeight,r=t.gameObject,o=r.displayWidth,c=r.displayHeight,h=r.y;t.onCompleteFunction=function(){t.gameObject.setDisplaySize(o,c),t.gameObject.setY(h),e(),t.timeline=void 0};var u=t.scene.tweens.createTimeline({onComplete:t.onCompleteFunction}),l=[t.gameObject];u.add({targets:l,props:{displayWidth:o+i/2,displayHeight:c-a/2,y:h+a/4},ease:Phaser.Math.Easing.Back.Out,duration:150}),u.add({targets:l,props:{displayWidth:o,displayHeight:c,y:h},ease:Phaser.Math.Easing.Sine.In,duration:100,onComplete:function(){t.events.emit(t.EVENTS.START_JUMP)}}),u.add({targets:l,props:{displayWidth:{value:o-i,ease:Phaser.Math.Easing.Sine.InOut,duration:150,yoyo:!0},displayHeight:{value:c+a,ease:Phaser.Math.Easing.Sine.InOut,duration:150,yoyo:!0},y:h-s},ease:Phaser.Math.Easing.Cubic.Out,duration:300}),u.add({targets:l,props:{displayWidth:o+i/4,displayHeight:c-a/4,y:h-s-a/8},ease:Phaser.Math.Easing.Sine.InOut,duration:50}),u.add({targets:l,props:{displayWidth:{value:o-i,ease:Phaser.Math.Easing.Cubic.In,duration:200},displayHeight:{value:c+a,ease:Phaser.Math.Easing.Cubic.In,duration:200},y:h-a/2},ease:Phaser.Math.Easing.Cubic.In,duration:300}),u.add({targets:l,props:{displayWidth:o,displayHeight:c,y:h},ease:Phaser.Math.Easing.Cubic.Out,duration:100,onComplete:function(){t.events.emit(t.EVENTS.LAND)}}),u.add({targets:l,props:{displayWidth:o+i/2,displayHeight:c-a/2,y:h+a/4},ease:Phaser.Math.Easing.Back.Out,duration:150}),u.add({targets:l,props:{displayWidth:o,displayHeight:c,y:h},ease:Phaser.Math.Easing.Back.Out,duration:150}),u.play(),t.timeline=u})));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),t.stop=function(){this.timeline&&(this.timeline.stop(),this.onCompleteFunction(this.timeline))},e}(),Wu=Hu,Yu=function(){function e(e,t){this.scene=void 0,this.gameObject=void 0,this.config=void 0,this.events=void 0,this.timeline=void 0,this.onCompleteFunction=void 0,this.scene=e.scene,this.gameObject=e,this.events=new Phaser.Events.EventEmitter,this.config=(0,s.Z)({rangeX:20,count:4,durationMaxEachCircle:80,accelerate:1.3},t)}var t=e.prototype;return t.setRangeX=function(e){this.config.rangeX=e},t.setCount=function(e){this.config.count=e},t.run=function(){var e=(0,r.Z)(l().mark((function e(){var t=this;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.stop(),e.abrupt("return",new(h())((function(e){var n=t.config,i=n.rangeX,a=n.count,s=n.durationMaxEachCircle,r=n.accelerate,o=t.gameObject.x;if(t.onCompleteFunction=function(){t.gameObject.setX(o),e(),t.timeline=void 0},0!=i){for(var c=t.scene.tweens.createTimeline({onComplete:t.onCompleteFunction}),h=[t.gameObject],u=0;u<a+1;u++){var l=u/2,d=o+i*(u%2==0?1:-1)/Math.pow(r,l),p=o+i*(u%2==0?-1:1)/Math.pow(r,l);0==u&&(d=o),u==a&&(p=o);var f=s*Math.abs(p-d)/(2*i);c.add({targets:h,props:{x:{from:d,to:p}},ease:Phaser.Math.Easing.Quadratic.InOut,duration:f})}c.play(),t.timeline=c}else e()})));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),t.stop=function(){this.timeline&&(this.timeline.stop(),this.onCompleteFunction(this.timeline))},e}(),Ku=Yu,Vu=Gn.Z.GAMEPLAY_DEFAULT,ju=Vu.KEY,Ju=Vu.FRAME,Xu=function(e){function t(t,n){var i;return(i=e.call(this,t,0,0,ju,Ju.HINT)||this).parent=void 0,i.glowMode="none",i.glowTint="none",i.fadeTween=void 0,i.tintTween=void 0,i.cropTween=void 0,i.cropHeight=void 0,i.isShowing=!1,i.updateFromParent=function(){i.setPosition(i.parent.x,i.parent.y)},i.parent=n,i.setDepth(Dn.Z.CARD),i.updateFromParent(),i.cropHeight=i.getCropHeight(),t.add.existing((0,As.Z)(i)),i}(0,o.Z)(t,e);var n=t.prototype;return n.reviveGlow=function(){this.revive(),this.setAlpha(0,0,0,0),this.cropHeight=this.getCropHeight(),this.isShowing=!0},n.removeGlow=function(){var e=this;"none"!=this.glowMode&&(this.glowMode="none",this.playFadeTween(0,0).then((function(){e.kill()})),this.isShowing=!1)},n.resetGlowSizeToFull=function(){var e;"full"!=this.glowMode&&(null==(e=this.fadeTween)||e.complete(),"none"==this.glowMode?(this.reviveGlow(),this.resetGlowSizeFromNone()):this.resetGlowSizeFromCrop(),this.playFadeTween(1,1),this.glowMode="full")},n.cropGlow=function(){var e;"crop"!=this.glowMode?(null==(e=this.fadeTween)||e.complete(),"none"==this.glowMode?(this.reviveGlow(),this.cropGlowSizeFromNone()):this.cropGlowSizeFromFull(),this.playFadeTween(1,.2),this.glowMode="crop"):this.updateCropSizeWhenCropHeightChange()},n.updateCropSizeWhenCropHeightChange=function(){if("crop"===this.glowMode){var e=this.cropHeight,t=this.getCropHeight();e!==t&&this.playCropTween(e,t,100)}},n.playFadeTween=function(e,t,n){var i=this;void 0===n&&(n=200);var a=this.alphaTopLeft,s=this.alphaBottomLeft;return new(h())((function(r){i.fadeTween=i.scene.tweens.addCounter({from:0,to:1,duration:n,onUpdate:function(n){var r=n.getValue(),o=Phaser.Math.Interpolation.Linear([a,e],r),c=Phaser.Math.Interpolation.Linear([s,t],r);i.setAlpha(o,o,c,c)},onComplete:function(){r()}})}))},n.updateGlowTintByLightOn=function(){this.parent.getLightOn()?this.setGlowTint("none"):this.setGlowTint("grey")},n.setGlowTint=function(e){if(this.glowTint!=e){var t=this.getTintByString(this.glowTint),n=this.getTintByString(e);this.playUpdateTintTween(t,n),this.glowTint=e}},n.getTintByString=function(e){return"grey"===e?new Phaser.Display.Color(209,209,209):new Phaser.Display.Color(255,255,255)},n.playUpdateTintTween=function(e,t){var n,i=this;null==(n=this.tintTween)||n.remove(),this.tintTween=this.scene.tweens.addCounter({from:0,to:1,ease:Phaser.Math.Easing.Sine.InOut,duration:200,onUpdate:function(n){var a=n.getValue(),s=Phaser.Display.Color.Interpolate.ColorWithColor(e,t,100,100*a),r=Phaser.Display.Color.GetColor(s.r,s.g,s.b);i.setTint(r)}})},n.cropGlowSizeFromFull=function(){var e=this.getCropHeight();this.playCropTween(this.displayHeight,e)},n.resetGlowSizeFromCrop=function(){this.playCropTween(this.cropHeight,this.displayHeight)},n.cropGlowSizeFromNone=function(){var e=this.getCropHeight();this.playCropTween(e,e,0)},n.resetGlowSizeFromNone=function(){this.playCropTween(this.displayHeight,this.displayHeight,0)},n.getCropHeight=function(){return this.parent.visibleHeight+(this.displayHeight-this.parent.displayHeight)/2},n.playCropTween=function(e,t,n){var i,a=this;void 0===n&&(n=200),null==(i=this.cropTween)||i.remove(),this.cropTween=this.scene.tweens.addCounter({from:e,to:t,duration:n,onUpdate:function(e){var t=e.getValue(),n={x:a.x,y:a.y-a.displayHeight/2+t/2,width:a.displayWidth,height:t};a.setCropByViewport(n),a.cropHeight=t}})},n.getGlowMode=function(){return this.glowMode},t}(Phaser.GameObjects.Image),qu=Xu,Qu=Gn.Z.CARD_BACK,$u=function(e){function t(t,n){var i;return(i=e.call(this,t,0,0,"")||this).scene=void 0,i.bg=void 0,i.tag=void 0,i.facingUp=void 0,i.oldX=void 0,i.oldY=void 0,i.futureX=void 0,i.futureY=void 0,i.shakePosition=void 0,i.jumpAttention=void 0,i.facingTween=void 0,i.movingTween=void 0,i.moves=void 0,i.placement=void 0,i.lightOn=!0,i.cardTint="none",i.tweenLight=void 0,i.isEligibleFoundation=!1,i.eligibleFoundationGlow=void 0,i.visibleHeight=xr.VERTICAL_PILE_SPACE,i.originalCardIdx=void 0,i.setFacing=function(e){i.facingUp=e,e?i.setCardFace():i.setCardBack()},i.scene=t,i.createBackground(),i.createEligibleFoundationGlow(),i.tag=n,i.moves=[],i.facingUp=!1,i.originalCardIdx=-1,i.setEligibleFoundation(!1),i.setLightOn(!0),i.cardTint="none",t.add.existing((0,As.Z)(i)),i.addBehavior(),i}(0,o.Z)(t,e);var n=t.prototype;return n.createEligibleFoundationGlow=function(){var e=new qu(this.scene,this);this.eligibleFoundationGlow=e;var t=Rr.gameType,n=Pr(t);e.setWorldSize(61*n,83*n),this.scene.events.on(Phaser.Scenes.Events.POST_UPDATE,e.updateFromParent),e.kill()},n.setLightOn=function(e){e?this.setCardTint("none"):this.isEligibleFoundation?this.setCardTint("lightGrey"):this.setCardTint("darkGrey"),this.lightOn=e,this.isEligibleFoundation&&this.eligibleFoundationGlow.updateGlowTintByLightOn()},n.setCardTint=function(e){if(this.cardTint!=e){var t=this.getTintByString(this.cardTint),n=this.getTintByString(e);this.playUpdateTintTween(t,n),this.cardTint=e}},n.getTintByString=function(e){switch(e){case"lightGrey":return new Phaser.Display.Color(160,160,160);case"darkGrey":return new Phaser.Display.Color(120,120,120);default:return new Phaser.Display.Color(255,255,255)}},n.playUpdateTintTween=function(e,t){var n,i=this;null==(n=this.tweenLight)||n.remove(),this.tweenLight=this.scene.tweens.addCounter({from:0,to:1,ease:Phaser.Math.Easing.Sine.InOut,duration:200,onUpdate:function(n){var a=n.getValue(),s=Phaser.Display.Color.Interpolate.ColorWithColor(e,t,100,100*a),r=Phaser.Display.Color.GetColor(s.r,s.g,s.b);i.setTint(r)}})},n.getLightOn=function(){return this.lightOn},n.setEligibleFoundation=function(e){e?(this.updateGlowByPlacement(),this.lightOn?this.setCardTint("none"):this.setCardTint("lightGrey")):(this.lightOn?this.setCardTint("none"):this.setCardTint("darkGrey"),this.eligibleFoundationGlow.removeGlow()),this.isEligibleFoundation=e},n.updateGlowByPlacement=function(){var e,t=this.placement;t.getname()===hu.Pile?En()(e=t.cards).call(e,this)===t.cards.length-1?this.eligibleFoundationGlow.resetGlowSizeToFull():this.eligibleFoundationGlow.cropGlow():this.eligibleFoundationGlow.resetGlowSizeToFull()},n.getEligibleFoundation=function(){return this.isEligibleFoundation},n.createBackground=function(){var e=new Nu(this.scene,this);this.bg=e,this.scene.events.on(Phaser.Scenes.Events.POST_UPDATE,e.updateFromParent)},n.updateCardStyle=function(){this.setFacing(this.facingUp),this.input||(this.setInteractive({useHandCursor:!0,draggable:!0}),this.disableInteractive()),this.updateSize()},n.setPlacement=function(e){this.placement=e},n.shake=function(){var e,t;this.isMoving()||(null==(e=this.shakePosition)||e.setRangeX(.1*this.displayWidth),null==(t=this.shakePosition)||t.run())},n.jump=function(){var e,t,n,i;this.isMoving()||(null==(e=this.jumpAttention)||e.setWidthExpand(.2*this.displayWidth),null==(t=this.jumpAttention)||t.setHeightExpand(.17*this.displayHeight),null==(n=this.jumpAttention)||n.setJumpHeight(.44*this.displayHeight),null==(i=this.jumpAttention)||i.run())},n.setFacingWithFlippingAnim=function(e,t,n){var i,a,s=this;void 0===t&&(t=!0),void 0===n&&(n=0),this.facingUp!==e&&(this.facingUp=e,null==(i=this.facingTween)||i.remove(),this.updateSize(),e&&this.scene.events.emit(Gu.OPEN_CARD,this),this.facingTween=this.scene.tweens.add(((a={targets:this})[t?"scaleX":"scaleY"]=0,a.yoyo=!0,a.delay=n,a.duration=150,a.onYoyo=function(){s.setFacing(e)},a.onComplete=function(){if(Qo.instance.getGameMode()===Xo.JOURNEY){var t=s.scene.journey.getCurrentMission();if(e&&"open-one-card"===t.type){var n=t.mainMission.cardStats,i=void 0===n?[]:n;s.isMatchWithJourneyMissionCardStats(i)&&setTimeout((function(){s.scene.gameplay.cardsLayer.bringToTop(s),s.jump()}),200)}}},a)))},n.isFacingUp=function(){return this.facingUp},n.getTag=function(){return this.tag},n.getSavingData=function(){return this.tag+"|"+this.originalCardIdx},n.setOriginalCardIdx=function(e){this.originalCardIdx=e},n.isAce=function(){return this.tag%100===yu.ACE},n.isJack=function(){return this.tag%100===yu.JACK},n.isQueen=function(){return this.tag%100===yu.QUEEN},n.isKing=function(){return this.tag%100===yu.KING},n.isCardValue=function(e){return this.tag%100===e},n.isTheSameCardSuit=function(e){var t=this.isClub,n=this.isDiamond,i=this.isHeart,a=this.isSpade;switch(e){case Zu.CLUB:return t;case Zu.DIAMOND:return n;case Zu.HEART:return i;case Zu.SPADE:return a;case Zu.ANY:return!0;default:return!1}},n.isTheSameCardRank=function(e){switch(e){case Fu.ACE:return this.isAce();case Fu.TWO:return this.isCardValue(yu.TWO);case Fu.THREE:return this.isCardValue(yu.THREE);case Fu.FOUR:return this.isCardValue(yu.FOUR);case Fu.FIVE:return this.isCardValue(yu.FIVE);case Fu.SIX:return this.isCardValue(yu.SIX);case Fu.SEVEN:return this.isCardValue(yu.SEVEN);case Fu.EIGHT:return this.isCardValue(yu.EIGHT);case Fu.NINE:return this.isCardValue(yu.NINE);case Fu.TEN:return this.isCardValue(yu.TEN);case Fu.JACK:return this.isJack();case Fu.QUEEN:return this.isQueen();case Fu.KING:return this.isKing();case Fu.ANY:return!0;default:return!1}},n.moveTo=function(e,t,n,i,a,s){var r,o,c,h=this;void 0===n&&(n=0),void 0===i&&(i=0),null==(r=this.movingTween)||r.complete(),e==this.x&&t==this.y||(this.futureX=e,this.futureY=t,null==(o=this.shakePosition)||o.stop(),null==(c=this.jumpAttention)||c.stop(),this.movingTween=this.scene.tweens.add({targets:this,delay:i,x:e,y:t,duration:n,ease:Phaser.Math.Easing.Sine.Out,onStart:function(){a&&a()},onComplete:function(){var e;null==(e=h.movingTween)||e.remove(),h.movingTween=void 0,s&&s()}}))},n.isMoving=function(){return this.movingTween&&(this.movingTween.isPlaying()||!this.movingTween.hasStarted)},n.setTag=function(e){this.tag=e},n.reset=function(){var e,t;null==(e=this.movingTween)||e.remove(),null==(t=this.facingTween)||t.remove(),this.updateSize(),this.disableInteractive(),this.setFacing(!1),this.visibleHeight=xr.VERTICAL_PILE_SPACE,this.eligibleFoundationGlow.kill()},n.setCardFace=function(){var e=this.scene.theme.getCurrentThemeConfig().cardFaceKey;this.setTexture(e,""+this.tag)},n.setCardBack=function(){var e=this.scene.theme.getCurrentThemeConfig().cardBackFrame;this.setTexture(Qu.KEY,e)},n.updateSize=function(){var e=xr.CARD_WIDTH,t=xr.CARD_HEIGHT;this.setWorldSize(e,t)},n.getCardValue=function(){return this.getTag()%100},n.getCardSuit=function(){return Math.floor((this.getTag()-this.getCardValue())/300)},n.addBehavior=function(){var e=this;this.shakePosition=new Ku(this,{rangeX:7,count:4,accelerate:1.5,durationMaxEachCircle:90}),this.jumpAttention=new Wu(this,{widthExpand:10,heightExpand:15,jumpHeight:32}),this.jumpAttention.events.on(this.jumpAttention.EVENTS.LAND,(function(){var t=(e.tag-e.tag%100)/100-1;e.scene.gameplay.boardGame.suitCircleExplosive.explode(t,30,e.x,e.y+12)}))},n.isMatchWithJourneyMissionCardStats=function(e){for(var t=0;t<e.length;t++){var n=e[t],i=this.isTheSameCardSuit(n.cardSuit);if(this.isTheSameCardRank(n.cardRank)&&i)return!0}return!1},n.resetCardTint=function(){this.clearTint()},n.setNotAvailableToMoveTint=function(){this.setTint(13684944)},n.kill=function(){this.eligibleFoundationGlow.kill(),e.prototype.kill.call(this)},n.revive=function(){this.eligibleFoundationGlow.isShowing&&this.eligibleFoundationGlow.revive(),e.prototype.revive.call(this)},(0,he.Z)(t,[{key:"isSpade",get:function(){return this.tag>=vu.ACE&&this.tag<=vu.KING}},{key:"isClub",get:function(){return this.tag>=mu.ACE&&this.tag<=mu.KING}},{key:"isDiamond",get:function(){return this.tag>=gu.ACE&&this.tag<=gu.KING}},{key:"isHeart",get:function(){return this.tag>=fu.ACE&&this.tag<=fu.KING}}]),t}(Phaser.GameObjects.Image),el=$u,tl=function(e){function t(t){var n;return(n=e.call(this,t)||this).active=void 0,n.boardGame=void 0,n.boardGame=t,n.active=!0,n}(0,o.Z)(t,e);var n=t.prototype;return n.addCard=function(e,t){if(e instanceof el){if(e.scene.gameplay.cardsLayer.bringToTop(e.bg),e.scene.gameplay.cardsLayer.bringToTop(e),e.setPlacement(this),t){var n=this.getPlacingPosition(this.cards.length),i=n.x,a=n.y;e.moveTo(i,a,300)}this.cards.push(e)}else for(var s=this.getPlacingPosition(this.cards.length),r=s.x,o=s.y,c=0;c<e.length;c++){var h=e[c];if(h.scene.gameplay.cardsLayer.bringToTop(h.bg),h.scene.gameplay.cardsLayer.bringToTop(h),h.setPlacement(this),t){var u=o+c*this.boardGame.getVerticalSpacePile();h.moveTo(r,u,300)}this.cards.push(h)}},n.getPlacingPositionForContinueGame=function(e){return{x:this.x,y:this.y}},n.addCardsFromSaveData=function(){var e=(0,r.Z)(l().mark((function e(t,n){var i,a,s,r,o,c,h,u;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=this.boardGame,a=i.deck,s=i.scene,r=0;case 2:if(!(r<t.length)){e.next=14;break}return o=t[r].split("|"),c=L()(o[0]),h=L()(o[1]),(u=a.setUpCardWhenContinueGame(c,this,t.length,h)).setFacingWithFlippingAnim(!0),u.setInteractive(),e.next=11,Au(s,30);case 11:r++,e.next=2;break;case 14:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}(),n.getCardVerticalSpaceForContinueGame=function(e){return 0},n.kill=function(){this.active=!1,this.slot.kill(),this.clear()},n.setVisible=function(e){this.slot.setVisible(e)},n.revive=function(){this.active=!0,this.slot.revive()},t}(ou),nl=tl,il=function(e){function t(t){var n;return(n=e.call(this,t)||this).setName(hu.Pile),n}(0,o.Z)(t,e);var n=t.prototype;return n.addCardsFromSaveData=function(){var e=(0,r.Z)(l().mark((function e(t,n){var i,a,s,r,o,c,h,u,d;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=this.boardGame,a=i.deck,s=i.scene,r=i.replayCardHandler.replayCardStatus,o=0;case 4:if(!(o<t.length)){e.next=16;break}return c=t[o].split("|"),h=L()(c[0]),u=L()(c[1]),h<100&&r[u]>100&&(h=r[u]),d=a.setUpCardWhenContinueGame(h,this,t.length,u),o>=n&&(d.setFacingWithFlippingAnim(!0),d.setInteractive()),e.next=13,Au(s,30);case 13:o++,e.next=4;break;case 16:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}(),n.getPlacingPosition=function(){var e=this.x,t=this.y,n=this.boardGame.getVerticalSpacePile();if(this.cards.length>0){var i=this.cards[this.cards.length-1];t=i.isFacingUp()?i.futureY+n:i.futureY+.5*n}return{x:e,y:t}},n.getPlacingPositionForContinueGame=function(e){var t=this.getCardVerticalSpaceForContinueGame(e);t>this.boardGame.getVerticalSpacePile()&&(t=this.boardGame.getVerticalSpacePile());for(var n=this.y,i=1;i<this.cards.length;i++){this.cards[i].isFacingUp()?n+=t:n+=.5*t}return{x:this.x,y:n}},n.getCardVerticalSpaceForContinueGame=function(e){return(this.getPileHeightLimit()-xr.CARD_HEIGHT)/e},n.resizePile=function(){var e=this.x,t=this.y,n=this.checkIfResizeNeeded(),i=this.boardGame.getVerticalSpacePile();if(n){var a=this.cards.length-this.getMaximumRevealedCards(),s=a-4>0?a-4:0,r=this.getSpacesBetweenHiddenCards(a);r>.5*i&&0==s&&(r=.5*i);for(var o=0;o<this.cards.length;o++){var c=this.cards[o];if(o>s){var h=this.cards[o-1];o>a&&h.isFacingUp()?t+=i:t+=r}c.x===e&&c.y===t||c.moveTo(e,t,300)}}else for(var u=0;u<this.cards.length;u++){var l=this.cards[u];if(0!==u)this.cards[u-1].isFacingUp()?t+=i:t+=.5*i;l.x===e&&l.y===t||l.moveTo(e,t,300)}},n.getPileHeight=function(){var e=this.cards.length;if(0==e)return 0;for(var t=this.cards[0].height,n=this.boardGame.getVerticalSpacePile(),i=1;i<e;i++){this.cards[i].isFacingUp()?t+=n:t+=.5*n}return t},n.getPileHeightLimit=function(){return Math.max(this.boardGame.getMaxHeightTableau(),0)},n.getMaximumRevealedCards=function(){var e=xr.CARD_HEIGHT,t=this.getPileHeightLimit(),n=this.boardGame.getVerticalSpacePile(),i=t-e+n;return Math.floor(i/n)-1},n.getSpacesBetweenHiddenCards=function(e){var t=this.cards[0].height,n=this.getMaximumRevealedCards(),i=this.boardGame.getVerticalSpacePile(),a=(this.getPileHeightLimit()-t+i-n*i)/e;return Math.max(a,i/6)},n.checkIfResizeNeeded=function(){var e=this.getPileHeightLimit();return this.getPileHeight()>e},n.getSubCards=function(e){var t,n,i=Qh()(t=this.cards).call(t,(function(t){return t===e}));return A()(n=this.cards).call(n,i)},n.pickSubCards=function(e){var t,n,i=Qh()(t=this.cards).call(t,(function(t){return t===e}));return eu()(n=this.cards).call(n,i)},n.removeLastCard=function(){if(this.cards.length>0)return this.cards.pop()},n.getFacingUpCards=function(){var e,t;if(0===this.cards.length)return[];var n=Qh()(e=this.cards).call(e,(function(e){return e.isFacingUp()}));return n<0?[]:A()(t=this.cards).call(t,n)},n.faceUpLast=function(e){void 0===e&&(e=0);var t=this.cards.length,n=this.boardGame;if(t>0){var i=this.cards[t-1];if(i.isFacingUp())return;return i.getTag()<100&&n.dynamicCardHandler.setDynamicTagForBackfaceCard(i),n.isGameWon(!0)||i.setFacingWithFlippingAnim(!0,!0,e),i.setInteractive(),i}this.slot.setInteractive()},n.faceDownLast=function(){var e=this.cards.length;if(e>0){var t=this.cards[e-1];return t.setFacingWithFlippingAnim(!1),t.disableInteractive(),t}this.slot.setInteractive()},n.canBePlace=function(e){var t=GameCore.Configs.Gameplay.EditMode;if(GameCore.Utils.Valid.isDebugger()&&t)return!0;var n=e.getTag()%100;return 0===this.cards.length||n==this.cards[this.cards.length-1].getTag()%100-1},n.getTopCardStackData=function(){var e=this.cards.length;if(0===e)return null;var t=Math.floor(this.cards[e-1].getTag()/100);if(1===e)return{color:t,length:1};for(var n=1,i=this.cards[e-1].getTag()%100,a=e-2;a>=0;a--){var s=this.cards[a],r=Math.floor(s.getTag()/100),o=s.getTag()%100;if(!1===s.isFacingUp())break;if(r!==t||o-1!==i)break;n++,i=o}return{color:t,length:n}},n.updateCardTintByAvailability=function(){var e=this.cards.length;if(0!==e){var t=this.getTopCardStackData();if(null!==t)for(var n=t.length,i=this.boardGame,a=1;e-a>=0;a++){var s=this.cards[e-a];if(!1===s.isFacingUp())break;if(i.isGameWon(!0))break;a<=n?s.resetCardTint():s.setNotAvailableToMoveTint()}}},n.canBeHint=function(e){var t=e.getTag()%100;return 0===this.cards.length||t==this.cards[this.cards.length-1].getTag()%100-1},n.isLastCard=function(e){return this.cards[this.cards.length-1]===e},n.getFaceDownCardAmount=function(){for(var e=0,t=0;t<this.cards.length;t++){if(!1!==this.cards[t].isFacingUp())break;e++}return e},n.clear=function(){this.cards=[]},t}(nl),al=il,sl=Gn.Z.CARD_BACK,rl=function(){function e(e){this.boardGame=void 0,this.bg=void 0,this.hintLayer=void 0,this.hintContainer=void 0,this.group=void 0,this.hintTween=void 0,this.hand=void 0,this.running=!1,this.boardGame=e,this.hintLayer=e.scene.add.container(),this.hintLayer.setDepth(Dn.Z.HINT),this.hintLayer.setVisible(!1),this.group=e.scene.add.group({defaultKey:Gn.Z.GAMEPLAY_DEFAULT.KEY}),this.createBg(),this.createContainer(),this.createTutorialHand(),this.listenEvents()}var t=e.prototype;return t.createBg=function(){var e=this.boardGame.scene.add.image(0,0,Gn.Z.GAMEPLAY_DEFAULT.KEY,"blank"),t=this.boardGame.scene.world.getWorldSize(),n=t.width,i=t.height;e.setOrigin(0,0),e.setWorldSize(n,i),e.setAlpha(.5),e.setTint(1315862),this.bg=e,Fn.Z.registerObject(e),this.hintLayer.add(e)},t.createContainer=function(){this.hintContainer=this.boardGame.scene.add.container(),this.hintLayer.add(this.hintContainer)},t.fadeInHint=function(){var e=this;this.running=!0,this.boardGame.scene.tweens.add({targets:[this.hintLayer],alpha:{from:0,to:1},duration:300,onStart:function(){e.hintLayer.revive()}})},t.fadeOutHint=function(){var e=this;this.boardGame.scene.tweens.add({targets:[this.hintLayer],alpha:{from:1,to:0},duration:300,onComplete:function(){e.hintLayer.kill(),e.running=!1}})},t.showDealerHint=function(){var e,t=this;if(!this.running&&(null==(e=this.hintTween)||!e.isPlaying())&&!(this.hintTween&&this.hintTween.countdown>0)){if(this.boardGame.stock.cards.length>0){var n=this.createCardBack();this.hintContainer.add([n])}var i=this.createHintGlow(),a=this.boardGame.stock.getPlacingPosition(0),s=a.x,r=a.y;this.hintContainer.add(i),this.hintContainer.setPosition(s,r),this.hintContainer.add(this.hand),this.hand.revive(),this.hintTween=this.boardGame.scene.tweens.addCounter({duration:800,onStart:function(){t.hand.doubleTap(0,!1,(function(){}))},onComplete:function(){t.hintContainer.getAll().forEach((function(e){return t.group.killAndHide(e)})),t.hintContainer.removeAll(),t.hand.kill(),t.fadeOutHint()}}),this.fadeInHint()}},t.showMoveHintAnimation=function(e,t){var n,i=this;if(!this.running&&(null==(n=this.hintTween)||!n.isPlaying())&&!(this.hintTween&&this.hintTween.countdown>0)){this.running=!0;var a=e.getWorldPosition(),s=a.x,r=a.y,o=t.getPlacingPosition(t.cards.length),c=o.x,h=o.y;if(e.placement instanceof Bu||e.placement instanceof bu||e.placement instanceof al)for(var u=e.placement.getSubCards(e),l=0;l<u.length;l++){var d=this.createHintCard(u[l].frame.name);d.setY(this.boardGame.getVerticalSpacePile()*l);var p=this.createHintGlow();p.setY(this.boardGame.getVerticalSpacePile()*l),this.hintContainer.add([p,d])}else{var f=this.createHintCard(e.frame.name),g=this.createHintGlow();this.hintContainer.add([g,f])}this.hintContainer.add(this.hand),this.boardGame.scene.tweens.killTweensOf(this.hand),this.hand.revive(),this.hand.tapAndHold(0),this.hintContainer.revive(),this.hintTween=this.boardGame.scene.tweens.add({targets:this.hintContainer,x:{start:s,from:s,to:c},y:{start:r,from:r,to:h},delay:300,duration:600,completeDelay:500,ease:Phaser.Math.Easing.Sine.Out,onComplete:function(){i.hand.unHold(0,!1,(function(){i.hintContainer.getAll().forEach((function(e){return i.group.killAndHide(e)})),i.hintContainer.removeAll(),i.hand.kill(),i.fadeOutHint()}))}}),this.fadeInHint()}},t.listenEvents=function(){var e=this;this.boardGame.scene.events.on(Lr.GAME_CHANGE,(function(){e.hand.active&&e.hand.unHold(0,!1,(function(){e.hintContainer.getAll().forEach((function(t){return e.group.killAndHide(t)})),e.hintContainer.removeAll(),e.hand.kill(),e.fadeOutHint()}))}))},t.createHintGlow=function(){var e=Rr.gameType,t=Pr(e),n=this.group.get();if(n.setTexture(Gn.Z.GAMEPLAY_DEFAULT.KEY,"hint"),e==is.Z.SPIDER){var i=xr.CARD_WIDTH,a=xr.CARD_HEIGHT;n.setWorldSize(1.2*i,1.15*a)}else n.setWorldSize(61*t,83*t);return n.revive(),n},t.createHintCard=function(e){var t=this.boardGame.scene.theme.getCurrentThemeConfig().cardFaceKey,n=this.group.get();n.setTexture(t),n.revive(),n.setFrame(e);var i=xr.CARD_WIDTH,a=xr.CARD_HEIGHT;return n.setWorldSize(i,a),n},t.createCardBack=function(){var e=this.boardGame.scene.theme.getCurrentThemeConfig().cardBackFrame,t=this.group.get();t.setTexture(sl.KEY,e),t.revive();var n=xr.CARD_WIDTH,i=xr.CARD_HEIGHT;return t.setWorldSize(n,i),t},t.createTutorialHand=function(){this.hand=new Ru(this.boardGame.scene,this.boardGame.gameType),this.hand.kill(),this.hintLayer.add(this.hand)},e}(),ol=rl,cl=function(){function e(e){this.scene=void 0,this.boardGame=void 0,this.availableHints=void 0,this.outOfMove=void 0,this.hintAnimation=void 0,this.hintClicked=void 0,this.timeToAutoHint=void 0,this.boardGame=e,this.scene=e.scene,this.outOfMove=!0,this.hintClicked=0,this.timeToAutoHint=0,this.hintAnimation=new ol(e)}var t=e.prototype;return t.getAvailableDestinations=function(e){var t=this.boardGame,n=t.piles,i=t.foundations,a=[],s=e.placement;return s instanceof bu&&!s.isLastCard(e)||a.push.apply(a,Le()(i).call(i,(function(t){return t.canBePlace(e)}))),a.push.apply(a,Le()(n).call(n,(function(t){return t.canBePlace(e)}))),a},t.canHint=function(){return this.findMovable().length>0},t.showHint=function(){var e=(0,r.Z)(l().mark((function e(){var t,n;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.boardGame.isOutOfMove()){e.next=3;break}return this.boardGame.outOfMove(),e.abrupt("return");case 3:if(this.scene.vibration.performVibrating(20),this.boardGame.isIdle()&&(this.boardGame.boardState=ku.PLAYING),this.boardGame.boardState===ku.PLAYING){e.next=7;break}return e.abrupt("return");case 7:if(this.boardGame.scene.audio.playSound(Ls.Z.HINT),this.hintClicked+=1,t=this.findMovable(),this.resetAutoHintTime(),!(t.length>0)){e.next=15;break}return n=t[0],this.hintAnimation.showMoveHintAnimation(n,this.getAvailableDestinations(n)[0]),e.abrupt("return");case 15:if(!(this.boardGame.stock.cards.length>0||this.boardGame.waste.cards.length>0&&!this.outOfMove)){e.next=18;break}return this.hintAnimation.showDealerHint(),e.abrupt("return");case 18:this.boardGame.outOfMove();case 19:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),t.findMovable=function(){var e,t,n,i,a,s,r=[],o=this.boardGame,c=A()(e=o.waste.cards).call(e,-1),h=De()(t=o.piles).call(t,(function(e){return e.cards[e.cards.length-1]})),u=De()(n=o.piles).call(n,(function(e){var t,n=Qh()(t=e.cards).call(t,(function(e){return e.isFacingUp()}));return e.cards[n]})),l=De()(i=o.foundations).call(i,(function(e){return e.cards[e.cards.length-1]})),d=De()(l).call(l,(function(e,t){return e?e.getTag()+1:100*(t+1)+1})),p=x()(a=[]).call(a,c,h),f=D()(p).call(p,(function(e){return e&&e.getTag()%100==1}));f&&r.push(f);for(var g=function(e){var t,n=u[e];if(!n)return"continue";var i=En()(t=o.piles[e].cards).call(t,n);if(n&&i>=1){var a;if(u[e]===h[e])if(En()(d).call(d,n.getTag())>=0)return r.push(n),"continue";var s=D()(a=o.piles).call(a,(function(e){return e.canBePlace(n)}));s&&r.push(n)}},m=0;m<u.length;m++)g(m);for(var v=0;v<p.length;v++){var y=p[v];if(y)En()(d).call(d,y.getTag())>=0&&r.push(y)}for(var T=function(e){var t,n=u[e];if(!n)return"continue";if(n.isKing()&&0==En()(t=o.piles[e].cards).call(t,n))return"continue";if(n){var i,a=D()(i=o.piles).call(i,(function(e){return e.canBePlace(n)}));a&&r.push(n)}},C=0;C<u.length;C++)T(C);var E,S=c[c.length-1];S&&(D()(E=o.piles).call(E,(function(e){return e.canBePlace(S)}))&&r.push(S));var b=De()(s=o.piles).call(s,(function(e){return e.getFacingUpCards()}));return b.forEach((function(e){e.forEach((function(t,n){var i;D()(i=o.piles).call(i,(function(e){return e.canBePlace(t)}))&&n>0&&En()(d).call(d,e[n-1].getTag())>=0&&r.push(t)}))})),r},t.autoPlayStep=function(){var e=this.findMovable();if(e.length>0){var t=e[0];return this.boardGame.mover.handleClickOnCard(t),void(this.outOfMove=!1)}this.boardGame.stock.cards.length>0||this.boardGame.waste.cards.length>0&&!this.outOfMove?this.boardGame.mover.deal():this.boardGame.outOfMove()},t.resetAutoHintTime=function(){this.timeToAutoHint=0},t.clear=function(){this.hintClicked=0},t.update=function(e){this.boardGame.isPlaying()&&(this.boardGame.scene.player.getPlayerSettings().autoHints?this.timeToAutoHint+=e:this.timeToAutoHint=0,this.timeToAutoHint>15e3&&this.showHint())},e}(),hl=cl,ul=n(640),ll=1/(0,ul.t)(),dl=Gn.Z.GAMEPLAY_DEFAULT.KEY,pl=function(e){function t(t){var n;return(n=e.call(this,t,dl)||this).emitZone=void 0,n.particleEmitters=void 0,n.particleEmitters=[],n.emitZone=new Phaser.Geom.Rectangle(-15,-20,30,40),n.createSuitEmitter("suit_spades"),n.createSuitEmitter("suit_clubs"),n.createSuitEmitter("suit_diamonds"),n.createSuitEmitter("suit_heart"),n.scene.add.existing((0,As.Z)(n)),n.setDepth(1e3),n}(0,o.Z)(t,e);var n=t.prototype;return n.createSuitEmitter=function(e){this.particleEmitters.push(this.createEmitter({on:!1,frame:e,emitZone:{source:this.emitZone,type:"random"},speed:40,frequency:100,alpha:{start:1,end:0,ease:Phaser.Math.Easing.Expo.Out},scale:.5*ll,lifespan:1200,rotate:{start:0,end:40,random:!0}}))},n.explode=function(e,t,n,i){this.particleEmitters[e].explode(t,n,i)},t}(Phaser.GameObjects.Particles.ParticleEmitterManager),fl=pl,gl=Gn.Z.GAMEPLAY_DEFAULT,ml=gl.KEY,vl=gl.FRAME,yl=function(e){function t(t){var n;return(n=e.call(this,t)||this).restartIcon=void 0,n.remainContainer=void 0,n.remainText=void 0,n.slot.input.cursor="pointer",n.createRecycle(),n.createStockCountText(),n.setName(hu.Stock),n}(0,o.Z)(t,e);var n=t.prototype;return n.show=function(){e.prototype.show.call(this),this.restartIcon.revive(),this.cards.length>0&&this.remainContainer.revive()},n.hide=function(){e.prototype.hide.call(this),this.restartIcon.kill(),this.remainContainer.kill()},n.createRecycle=function(){var e=this.boardGame.scene;this.restartIcon=e.add.image(0,0,ml,vl.IC_RECYCLE),e.world.isLandscape()?this.restartIcon.setWorldSize(41,41):this.restartIcon.setWorldSize(25,25)},n.createStockCountText=function(){var e=this.boardGame.scene,t=e.add.container();t.setDepth(Dn.Z.REMAINING_STOCK),this.remainText=e.make.bitmapText({font:Rc.Z.PRIMARY.KEY,size:e.fontSize(12),origin:{x:.5,y:.5},text:"0"}),this.remainText.setCenterAlign(),this.remainText.setTint(16579837),this.remainText.setPosition(8,-7.5),this.remainText.setIgnoreLanguage();var n=e.add.image(8,-9,ml,vl.STOCK_BG);n.setWorldSize(18,18),t.add([n,this.remainText]),this.remainContainer=t,this.remainContainer.kill()},n.setPosition=function(t,n){e.prototype.setPosition.call(this,t,n),this.restartIcon.setPosition(t,n);var i=this.slot,a=.5*i.width-4,s=.5*i.height-3;this.remainContainer.setPosition(t-a,n+s)},n.addCard=function(t,n){e.prototype.addCard.call(this,t,n);var i=this.boardGame.scene.player.getPlayerSettings(),a=this.boardGame.scene.world.isLandscape();t.setFacingWithFlippingAnim(!1,!(a&&i.largeWidthLayout)),t.disableInteractive()},n.canBePlace=function(e){return!1},n.clear=function(){this.cards=[]},n.update=function(t){e.prototype.update.call(this,t),this.isShowing&&(this.cards.length>0?(this.remainContainer.revive(),this.remainText.setText(""+this.cards.length)):this.remainContainer.kill())},t}(ou),Tl=yl;function Cl(e,t){var n="undefined"!==typeof w()&&k()(e)||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){var n;if(!e)return;if("string"===typeof e)return El(e,t);var i=A()(n=Object.prototype.toString.call(e)).call(n,8,-1);"Object"===i&&e.constructor&&(i=e.constructor.name);if("Map"===i||"Set"===i)return b()(e);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return El(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var i=0;return function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function El(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var Al=Phaser.Input.Events,Sl=Al.GAMEOBJECT_DOWN,bl=Al.DRAG,Il=Al.POINTER_UP,wl=Al.GAME_OUT,Pl=function(){function e(e){var t=this;this.boardGame=void 0,this.undos=void 0,this.picked=void 0,this.dragX=void 0,this.dragY=void 0,this.pickedPlacement=void 0,this.suitExplosive=void 0,this.undoClicked=void 0,this.isDragOutOfCanvas=!1,this.handlePointerDown=function(e,n){if(!t.isPicked()&&n instanceof el){var i;t.boardGame.boardState=ku.PLAYING;var a=n;if(a.isMoving())return;var s=En()(i=a.placement.cards).call(i,a);t.pickCard(a.placement,a.placement.cards.length-s)}},this.isDragged=void 0,this.dragPicked=function(e,n,i,a){!t.isDragged&&e.getDistanceX()+e.getDistanceY()<15||(t.isDragged=!0,t.dragX=i,t.dragY=a)},this.handlePointerUp=function(e){if(t.isPicked()){var n=t.picked[0],i=t.findFirstDestination(e,t.picked),a=!1;i?t.movePickedToNewPlacement(i):a=!0;var s=e.upTime-e.downTime<1e3;if(t.isDragOutOfCanvas&&void 0!==e.id&&(t.isDragOutOfCanvas=!1,s=!0),!t.isDragged&&s){if(t.donePick(),t.boardGame.scene.player.getPlayerSettings().tapToMove){if(n.isMoving())return;t.handleClickOnCard(n)}}else t.donePick(a);t.boardGame.hint.resetAutoHintTime()}},this.handlePointerOutOfCanvas=function(e){t.boardGame.isPlaying()&&t.isPicked()&&(t.isDragOutOfCanvas=!0,t.handlePointerUp(e))},this.deal=function(){var e,n=t.boardGame.draw3?3:1;if(!t.boardGame.stock.isEmpty()||!t.boardGame.waste.isEmpty()){t.boardGame.isPlaying()&&t.boardGame.scene.audio.playSound(Ls.Z.CARD_MOVE);var i=Xh()(e=t.boardGame.stock.pickTopCards(n)).call(e);if(i.length>0){for(var a,s=Cl(i);!(a=s()).done;){var r=a.value;t.boardGame.waste.addCard(r,!0)}t.undos.push({type:"deal",numOfCards:i.length,srcName:t.boardGame.stock.getname(),srcIdx:t.boardGame.stock.getIdx(),destName:t.boardGame.waste.getname(),destIdx:t.boardGame.waste.getIdx()}),t.boardGame.hint.canHint()&&(t.boardGame.hint.outOfMove=!1),t.boardGame.stock.isEmpty()&&t.boardGame.hint.outOfMove&&t.boardGame.outOfMove()}else{t.boardGame.increaseStockRecycleCount(),t.boardGame.scene.vibration.performVibrating(20);var o=t.boardGame.waste.pickAllCards();Xh()(o).call(o);for(var c,h=Cl(o);!(c=h()).done;){var u=c.value;t.boardGame.stock.addCard(u,!0)}t.undos.push({type:"deal",numOfCards:o.length,srcName:t.boardGame.waste.getname(),srcIdx:t.boardGame.waste.getIdx(),destName:t.boardGame.stock.getname(),destIdx:t.boardGame.stock.getIdx()}),t.boardGame.hint.outOfMove=!0}t.boardGame.increaseMovesAndSaveBoard()}},this.boardGame=e,this.undos=[],this.picked=[],this.undoClicked=0,this.suitExplosive=new fl(e.scene)}var t=e.prototype;return t.enableInput=function(){var e=this,t=this.boardGame.scene;t.input.on(Sl,this.handlePointerDown),t.input.on(bl,this.dragPicked),t.input.on(Il,this.handlePointerUp),t.input.on(wl,this.handlePointerOutOfCanvas),this.boardGame.stock.slot.onClick((function(){e.boardGame.boardState=ku.PLAYING,e.deal()}))},t.disableInput=function(){var e=this.boardGame.scene;e.input.off(Sl,this.handlePointerDown),e.input.off(bl,this.dragPicked),e.input.off(Il,this.handlePointerUp),e.input.off(wl,this.handlePointerOutOfCanvas),this.boardGame.stock.slot.offClick()},t.isPicked=function(){return this.picked.length>0},t.movePickedToNewPlacement=function(e){for(var t,n,i=this,a=Cl(this.picked);!(n=a()).done;){var s=n.value;e.addCard(s,!0),e instanceof bu&&e.updateCardPosition(e.cards.length)}this.pickedPlacement instanceof bu&&this.pickedPlacement.updateCardPosition();var r=this.pickedPlacement instanceof bu&&!!this.pickedPlacement.faceUpLast();if(r&&this.boardGame.increaseScore(5),e instanceof Pu){this.boardGame.increaseScore(10),this.boardGame.isPlaying()&&this.boardGame.scene.audio.playSound("finish"+e.cards.length,{delay:.1});var o=e.getPlacingPosition(0),c=o.x,h=o.y,u=e.cards[0].getTag(),l=(u-u%100)/100-1,d=this.picked[0];this.boardGame.scene.time.delayedCall(400,(function(){if(i.suitExplosive.explode(l,12,c,h),Qo.instance.getGameMode()===Xo.JOURNEY){var e=i.boardGame.scene.journey.getCurrentMission();if("move-same-suit-cards-to-foundation"===e.type){var t=e.mainMission.cardStats,n=void 0===t?[]:t;d.isMatchWithJourneyMissionCardStats(n)&&d.jump()}}}))}else this.boardGame.isPlaying()&&this.boardGame.scene.audio.playSound(Ls.Z.CARD_MOVE);this.pickedPlacement instanceof pu&&e instanceof bu&&(this.boardGame.increaseScore(5),this.boardGame.scene.events.emit(Gu.MOVE_CARD_FROM_FOUNDATION_TO_TABLEAU,this.picked)),this.pickedPlacement instanceof Pu&&this.boardGame.decreaseScore(10),this.undos=x()(t=[]).call(t,this.undos,[{type:"move",numOfCards:this.picked.length,srcName:this.pickedPlacement.getname(),srcIdx:this.pickedPlacement.getIdx(),destName:e.getname(),destIdx:e.getIdx(),faceLast:!!r}]),this.pickedPlacement instanceof pu&&this.boardGame.waste.align(),this.picked=[],this.boardGame.increaseMovesAndSaveBoard(),this.boardGame.checkGameWin(),this.boardGame.updateFoundationCardsInteractive()},t.unMovePickedToPlacement=function(e,t){e instanceof bu&&t&&e.faceDownLast();for(var n,i=Cl(this.picked);!(n=i()).done;){var a=n.value;e.addCard(a,!0),e instanceof bu&&e.updateCardPosition(e.cards.length)}t&&this.boardGame.decreaseScore(5),e instanceof Pu&&this.boardGame.increaseScore(10),this.pickedPlacement instanceof bu&&e instanceof pu&&this.boardGame.decreaseScore(5),this.pickedPlacement instanceof Pu&&this.boardGame.decreaseScore(10),this.picked=[],this.boardGame.increaseMovesAndSaveBoard(),this.boardGame.updateFoundationCardsInteractive()},t.pickCard=function(e,t){this.pickedPlacement=e,this.picked=e.pickTopCards(t),this.isDragged=!1},t.donePick=function(e){if(this.isPicked()){for(var t,n=Cl(this.picked);!(t=n()).done;){var i=t.value;this.pickedPlacement.addCard(i,this.isDragged)}e&&this.pickedPlacement instanceof bu&&this.pickedPlacement.updateCardPosition(),this.picked=[],this.isDragged=!1}},t.findFirstDestination=function(e,t){if(1==t.length){var n=this.detectFoundation(e,t[0]);if(n)return n}return this.detectPile(e,t[0])},t.detectFoundation=function(e,t){var n,i=Le()(n=this.boardGame.foundations).call(n,(function(e){return Phaser.Geom.Intersects.RectangleToRectangle(t.getBounds(),e.slot.getBounds())&&e.canBePlace(t)}));if(2==i.length)return e.worldX-i[0].x<i[1].x-e.worldX?i[0]:i[1];if(1==i.length){if(i[0]==this.pickedPlacement)return;return i[0]}},t.detectPile=function(e,t){var n,i=this,a=Le()(n=this.boardGame.piles).call(n,(function(e){var n,a=(null==(n=e.getLastCard())?void 0:n.getBounds())||e.slot.getBounds();return e!==i.pickedPlacement&&Phaser.Geom.Intersects.RectangleToRectangle(t.getBounds(),a)&&e.canBePlace(t)}));return 2==a.length?(e.worldX,a[0].x,a[1].x,e.worldX,a[1]):1==a.length?a[0]:void 0},t.getAvailableDestinations=function(){var e=this,t=this.boardGame,n=t.piles,i=t.foundations,a=[];return 1==this.picked.length&&a.push.apply(a,Le()(i).call(i,(function(t){return t!==e.pickedPlacement&&t.canBePlace(e.picked[0])}))),a.push.apply(a,Le()(n).call(n,(function(t){return t!==e.pickedPlacement&&t.canBePlace(e.picked[0])}))),a},t.handleClickOnCard=function(e){var t;if(!this.isPicked()){var n=En()(t=e.placement.cards).call(t,e);this.pickCard(e.placement,e.placement.cards.length-n);var i=this.getAvailableDestinations();if(0!==i.length)this.movePickedToNewPlacement(i[0]),this.donePick();else{this.boardGame.scene.audio.playSound(Ls.Z.NO_MOVE);for(var a,s=Cl(this.picked);!(a=s()).done;){a.value.shake()}this.donePick()}}},t.isCanUndo=function(){return this.boardGame.boardState!==ku.GAME_OVER&&0!=this.undos.length},t.undo=function(){if(this.boardGame.boardState!==ku.GAME_OVER){var e=this.undos.pop();if(e){this.boardGame.scene.audio.playSound(Ls.Z.UNDO),this.boardGame.boardState=ku.PLAYING,this.undoClicked+=1;var t=e.numOfCards,n=e.srcName,i=e.srcIdx,a=e.destName,s=e.destIdx,r=e.faceLast,o=void 0!==r&&r,c=this.getPlacement(n,i),h=this.getPlacement(a,s);if("deal"===e.type){var u=h.pickTopCards(t);h instanceof Tl&&Xh()(u).call(u);for(var l,d=Cl(u);!(l=d()).done;){var p=l.value;c.addCard(p,!0)}this.boardGame.waste.align(),this.boardGame.increaseMovesAndSaveBoard()}else"move"===e.type&&(this.pickCard(h,t),this.unMovePickedToPlacement(c,o),this.donePick(),this.boardGame.hint.outOfMove=!1);this.boardGame.decreaseScore(2),h instanceof bu&&h.updateCardPosition(),this.boardGame.checkAutoCompleted()}}},t.clear=function(){this.undos=[],this.undoClicked=0},t.update=function(){if(this.isDragged)for(var e=0;e<this.picked.length;e++){var t,n=this.picked[e];n.setPosition(this.dragX,this.dragY+e*this.boardGame.getVerticalSpacePile()),n.scene.gameplay.cardsLayer.bringToTop(n),null==(t=n.jumpAttention)||t.stop()}},t.getPlacement=function(e,t){if(e===hu.Stock)return this.boardGame.stock;if(e===hu.Waste)return this.boardGame.waste;if(e===hu.Pile)return this.boardGame.piles[t];if(e===hu.Foundation)return this.boardGame.foundations[t];throw new Error("Placement not found!!!")},e}(),kl=Pl,_l=function(){function e(){this.strSeed=void 0,this.intSeed=void 0}var t=e.prototype;return t.generateSeed=function(){return GameCore.Utils.String.random(10)},t.shuffle=function(e){var t,n,i,a,s,r=De()(t=on()(n=new Array(52)).call(n,0)).call(t,(function(e,t){return t})),o=this.shuffles(r,e),c=this.shuffles(o,Xh()(i=e.split("")).call(i).join("").toLowerCase());return this.shuffles(c,A()(a=Xh()(s=e.split("")).call(s).join("")).call(a,0,10).toUpperCase())},t.shuffles=function(e,t){if(this.setSeed(t)){for(var n=A()(e).call(e,0),i=n.length,a=this.genMap(i),s=i-1;s>0;s--)n[s]=eu()(n).call(n,a[i-1-s],1,n[s])[0];return n}return e},t.genMap=function(e){for(var t=new Array(e),n=0;n<e;n++)t[n]=(this.intSeed=(9301*this.intSeed+49297)%233280)/233280*e|0;return t=this.modifyIfNoZero(t)},t.modifyIfNoZero=function(e){for(var t=!1,n=0;n<e.length;n++)0===e[n]&&(t=!0);return!1===t&&(e[e[e.length-1]]=0),e},t.setSeed=function(e){var t,n=De()(t=String(this.strSeed=e).split("")).call(t,(function(e){return e.charCodeAt(0)})).join("");return this.intSeed=Number(n),!0},e}(),xl=_l,Ol=n(662),Ll=function(){function e(e){this.boardGame=void 0,this.cards=void 0,this.boardGame=e,this.cards=[]}var t=e.prototype;return t.init=function(){var e=this,t=this.boardGame.scene;this.cards.push(new el(t,mu.ACE),new el(t,mu.TWO),new el(t,mu.THREE),new el(t,mu.FOUR),new el(t,mu.FIVE),new el(t,mu.SIX),new el(t,mu.SEVEN),new el(t,mu.EIGHT),new el(t,mu.NINE),new el(t,mu.TEN),new el(t,mu.JACK),new el(t,mu.QUEEN),new el(t,mu.KING)),this.cards.push(new el(t,gu.ACE),new el(t,gu.TWO),new el(t,gu.THREE),new el(t,gu.FOUR),new el(t,gu.FIVE),new el(t,gu.SIX),new el(t,gu.SEVEN),new el(t,gu.EIGHT),new el(t,gu.NINE),new el(t,gu.TEN),new el(t,gu.JACK),new el(t,gu.QUEEN),new el(t,gu.KING)),this.cards.push(new el(t,fu.ACE),new el(t,fu.TWO),new el(t,fu.THREE),new el(t,fu.FOUR),new el(t,fu.FIVE),new el(t,fu.SIX),new el(t,fu.SEVEN),new el(t,fu.EIGHT),new el(t,fu.NINE),new el(t,fu.TEN),new el(t,fu.JACK),new el(t,fu.QUEEN),new el(t,fu.KING)),this.cards.push(new el(t,vu.ACE),new el(t,vu.TWO),new el(t,vu.THREE),new el(t,vu.FOUR),new el(t,vu.FIVE),new el(t,vu.SIX),new el(t,vu.SEVEN),new el(t,vu.EIGHT),new el(t,vu.NINE),new el(t,vu.TEN),new el(t,vu.JACK),new el(t,vu.QUEEN),new el(t,vu.KING));var n=this.boardGame.stock.getPlacingPosition(0),i=n.x,a=n.y;this.cards.forEach((function(t){t.updateCardStyle(),t.setFacing(!1),t.kill(),t.setPosition(i,a),t.setDepth(Dn.Z.CARD),e.boardGame.gameplay.cardsLayer.add(t.bg),e.boardGame.gameplay.cardsLayer.add(t),e.boardGame.gameplay.cardsLayer.add(t.eligibleFoundationGlow)}))},t.reset=function(){var e=this.boardGame.stock.getPlacingPosition(0),t=e.x,n=e.y;this.cards.forEach((function(e){e.reset(),e.revive(),e.moveTo(t,n,200)}))},t.align=function(){var e=this.boardGame.stock.getPlacingPosition(0),t=e.x,n=e.y;this.cards.forEach((function(e){e.reset(),e.setPosition(t,n)}))},t.getDeck=function(e){var t=this;return De()(e).call(e,(function(e){return t.cards[e]}))},t.getCards=function(e){var t=this;return De()(e).call(e,(function(e){return t.cards[e]}))},t.getCardsNew=function(e){var t=this,n=[3,0,1,2];return De()(e).call(e,(function(e){var i=13*n[e.suit-1]+e.value-1;return t.cards[i]}))},e}(),Rl=Ll,Dl=function(e){function t(t){var n;return(n=e.call(this,t)||this).boardGame=void 0,n.boardGame=t,n}return(0,o.Z)(t,e),t.prototype.alignCurrentDeck=function(){for(var e=this.boardGame,t=e.stock,n=e.waste,i=e.foundations,a=0;a<t.cards.length;a++){var s=t.getPlacingPosition(a),r=s.x,o=s.y;t.cards[a].setPosition(r,o)}for(var c=0;c<n.cards.length;c++){var h=n.getPlacingPosition(c),u=h.x,l=h.y;n.cards[c].setPosition(u,l)}for(var d=0;d<i.length;d++)for(var p=i[d],f=0;f<p.cards.length;f++){var g=p.getPlacingPosition(f),m=g.x,v=g.y;p.cards[f].setPosition(m,v)}},t}(Rl),Bl=Dl,Ml=n(42),Nl=n.n(Ml),Gl=function(e){function t(t){var n;return(n=e.call(this,t)||this).angle2=void 0,n}(0,o.Z)(t,e);var n=t.prototype;return n.fire=function(t,n){e.prototype.fire.call(this,t,n);var i=this.emitter,a=i.x,s=i.y;t||(t=a.defaultValue),n||(n=s.defaultValue);var r=Phaser.Math.Distance.Between(0,0,this.velocityX,this.velocityY),o=Math.atan2(this.y-n,this.x-t);this.velocityX=r*Math.cos(o),this.velocityY=r*Math.sin(o),this.rotation=o,this.angle2=o},n.update=function(t,n,i){var a=e.prototype.update.call(this,t,n,i);return this.rotation=this.angle2,a},t}(Phaser.GameObjects.Particles.Particle),Fl=Gl,Zl=1/(0,ul.t)(),Ul=Gn.Z.GAMEPLAY_DEFAULT.KEY,zl=function(e){function t(t){var n;return(n=e.call(this,t,Ul)||this).emitZone=void 0,n.particleEmitters=void 0,n.particleEmitters=[],n.emitZone=new Phaser.Geom.Circle(0,0,30),n.createSuitEmitter("suit_spades"),n.createSuitEmitter("suit_clubs"),n.createSuitEmitter("suit_diamonds"),n.createSuitEmitter("suit_heart"),n.scene.add.existing((0,As.Z)(n)),n.setDepth(1e3),n}(0,o.Z)(t,e);var n=t.prototype;return n.createSuitEmitter=function(e){this.particleEmitters.push(this.createEmitter({on:!1,frame:e,emitZone:{source:this.emitZone,type:"random"},speed:{min:30,max:60},frequency:100,alpha:{start:1,end:0,ease:Phaser.Math.Easing.Expo.Out},scale:.5*Zl,lifespan:1700,rotate:{start:0,end:360,random:!0},particleClass:Fl}))},n.explode=function(e,t,n,i){this.particleEmitters[e].explode(t,n,i)},t}(Phaser.GameObjects.Particles.ParticleEmitterManager),Hl=zl,Wl=function(e){function t(t,n,i){var a;return(a=e.call(this,t,n,i)||this).animation=void 0,a.icon=void 0,a.buttonLabel=void 0,a.background=void 0,a.setName("AutoComplete"),a.createContent(),a.createAnimation(),a.animation.play(),a}return(0,o.Z)(t,e),t.prototype.createAnimation=function(){this.animation=new dh.Z({targets:[this],duration:500,props:{scale:"*=0.98"}})},t}(Ol.Z),Yl=Wl,Kl=Gn.Z.GAMEPLAY_DEFAULT,Vl=Kl.KEY,jl=Kl.FRAME,Jl=function(e){function t(t,n){var i;return(i=e.call(this,t)||this).icon=void 0,i.text=void 0,i.config=void 0,i.config=(0,s.Z)({iconTextPadding:8,text:"newGame",font:Rc.Z.BOLD_SHADOW.KEY,iconFrame:jl.IC_NEW,iconWidth:20,iconHeight:21},n),i.createIcon(),i.createLabelText(),i.updateContainerSize(),i.alignIcon(),i.alignText(),i.text.on("textChanged",(function(){i.updateContainerSize(),i.alignIcon(),i.alignText()})),i}(0,o.Z)(t,e);var n=t.prototype;return n.getIcon=function(){return this.icon},n.getText=function(){return this.text},n.clearTint=function(){this.icon.clearTint(),this.text.clearTint()},n.createIcon=function(){var e=this.config,t=e.iconWidth,n=void 0===t?52/2.88:t,i=e.iconHeight,a=void 0===i?55/2.88:i,s=e.iconFrame,r=void 0===s?jl.IC_NEW:s,o=e.iconKey,c=void 0===o?Vl:o;this.icon=this.scene.add.image(0,0,c,r),this.icon.setWorldSize(n,a),this.add(this.icon)},n.alignIcon=function(){Phaser.Display.Align.In.LeftCenter(this.icon,this,0,-1)},n.createLabelText=function(){var e=this.config,t=e.text,n=void 0===t?"newGame":t,i=e.fontSize,a=void 0===i?18:i,s=e.font;this.text=this.scene.make.bitmapText({font:s,size:this.scene.fontSize(a),text:n,origin:{x:.5,y:.5}}),this.add(this.text)},n.alignText=function(){Phaser.Display.Align.In.RightCenter(this.text,this,0,0)},n.updateContainerSize=function(){var e=this.config.iconTextPadding,t=void 0===e?8:e;this.setSize(this.icon.width+t+this.text.width,this.icon.height>this.text.height?this.icon.height:this.text.height)},t}(Phaser.GameObjects.Container),Xl=Gn.Z.GAMEPLAY_DEFAULT,ql=Xl.KEY,Ql=Xl.FRAME,$l=function(e){function t(t){return e.call(this,t,135,36)||this}return(0,o.Z)(t,e),t.prototype.createContent=function(){var e=new Jl(this.scene,{iconTextPadding:6,text:"Auto Complete",fontSize:12,iconKey:ql,iconFrame:Ql.IC_DONE,iconWidth:15.5,iconHeight:13.5}),t=this.scene.make.image({key:ql,frame:Ql.BTN_AUTO_COMPLETE});t.setWorldSize(133,34),this.add([t,e]),Phaser.Display.Align.In.Center(e,this)},t}(Yl),ed=$l,td=Gn.Z.GAMEPLAY_DEFAULT,nd=td.KEY,id=td.FRAME,ad=function(e){function t(t){return e.call(this,t,267,48)||this}return(0,o.Z)(t,e),t.prototype.createContent=function(){var e=new Jl(this.scene,{iconTextPadding:8,text:"Auto Complete",fontSize:22,iconKey:nd,iconFrame:id.IC_DONE,iconWidth:20,iconHeight:16.5}),t=this.scene.make.image({key:nd,frame:id.BTN_AUTO_COMPLETE});t.setWorldSize(265,46),this.add([t,e]),Phaser.Display.Align.In.Center(e,this)},t}(Yl),sd=ad,rd=Gn.Z.GAMEPLAY_DEFAULT,od=rd.KEY,cd=rd.FRAME,hd=function(e){function t(t){var n;return(n=e.call(this)||this).scene=void 0,n.gameplay=void 0,n.hint=void 0,n.mover=void 0,n._boardState=void 0,n.autoCompleteBtn=void 0,n.canAutoComplete=void 0,n.stock=void 0,n.deck=void 0,n.piles=void 0,n.foundations=void 0,n.score=void 0,n.time=void 0,n.timeToDecreaseScore=void 0,n.timeToSaveBoardData=void 0,n.moves=void 0,n.updateScoreTimer=void 0,n.timer=void 0,n.suitCircleExplosive=void 0,n.stockRecycleCount=void 0,n.seed=void 0,n.gameType=void 0,n.isLeftHandedAlign=!1,n.isSingleMode=!0,n.boardStateText=void 0,n.autoPlayBtn=void 0,n.autoPlayStepBtn=void 0,n.editModeButton=void 0,n.outOfMoveButton=void 0,n.gameWonButton=void 0,n.idleButton=void 0,n.clearDataButton=void 0,n.debugButtons=[],n.gameplay=t,n.scene=t.scene,n.suitCircleExplosive=new Hl(t.scene),n.score=0,n.time=0,n.moves=0,n.timeToDecreaseScore=0,n.timeToSaveBoardData=0,n.stockRecycleCount=0,GameCore.Utils.Valid.isDebugger()&&n.createDevBtn(),n.addTimer(),n.scene.screen.events.on(GameCore.Screens.Events.OPEN,(function(){n.boardState===ku.PLAYING&&(n.boardState=ku.IDLE)})),n}(0,o.Z)(t,e);var n=t.prototype;return n.getFoundationsCardsCount=function(){var e;return Nl()(e=this.foundations).call(e,(function(e,t){return e+t.cards.length}),0)},n.getFoundationCardSuitCounts=function(){var e=0,t=0,n=0,i=0;return this.foundations.forEach((function(a){a.cards.forEach((function(a){var s=a.isSpade,r=a.isHeart,o=a.isClub,c=a.isDiamond;s&&e++,r&&t++,o&&n++,c&&i++}))})),{spadeCount:e,heartCount:t,clubCount:n,diamondCount:i}},n.getFoundationCardRankCounts=function(){var e=0,t=0,n=0,i=0,a=0,s=0,r=0,o=0,c=0,h=0,u=0,l=0,d=0;return this.foundations.forEach((function(p){p.cards.forEach((function(p){p.isCardValue(yu.ACE)?e++:p.isCardValue(yu.TWO)?t++:p.isCardValue(yu.THREE)?n++:p.isCardValue(yu.FOUR)?i++:p.isCardValue(yu.FIVE)?a++:p.isCardValue(yu.SIX)?s++:p.isCardValue(yu.SEVEN)?r++:p.isCardValue(yu.EIGHT)?o++:p.isCardValue(yu.NINE)?c++:p.isCardValue(yu.TEN)?h++:p.isCardValue(yu.JACK)?u++:p.isCardValue(yu.QUEEN)?l++:p.isCardValue(yu.KING)&&d++}))})),{aceCount:e,twoCount:t,threeCount:n,fourCount:i,fiveCount:a,sixCount:s,sevenCount:r,eightCount:o,nineCount:c,tenCount:h,jackCount:u,queenCount:l,kingCount:d}},n.increaseScore=function(e){var t=this;this.score+=e,this.updateScoreTimer&&!this.updateScoreTimer.hasDispatched||(this.updateScoreTimer=this.scene.time.delayedCall(500,(function(){var e;t.scene.storage.dispatch(jo({score:(e={},e[t.gameType]=t.score,e),time:t.time,moves:t.moves}))})))},n.decreaseScore=function(e){this.score=Math.max(0,this.score-e)},n.increaseMovesAndSaveBoard=function(){this.hint.resetAutoHintTime(),this.moves+=1,this.gameplay.saveSystem.saveCurrentBoardData(),this.timeToSaveBoardData=0},n.getScore=function(){return this.score},n.getTime=function(){return Math.round(this.time)},n.getMoves=function(){return this.moves},n.getStockRecycleCount=function(){return this.stockRecycleCount},n.increaseStockRecycleCount=function(){this.stockRecycleCount+=1},n.createAutoWinButton=function(){var e=this;GameCore.world.isLandscape()?(this.autoCompleteBtn=new ed(this.scene),Phaser.Display.Align.To.TopCenter(this.autoCompleteBtn,this.scene.footer,0,12)):(this.autoCompleteBtn=new sd(this.scene),Phaser.Display.Align.To.TopCenter(this.autoCompleteBtn,this.scene.footer,0,24)),this.autoCompleteBtn.kill(),this.autoCompleteBtn.onClick=function(){return e.handleAutoCompleteClick()}},n.showAutoCompleteButtonInLandscape=function(e){if(void 0===e&&(e=!0),e){var t=Qo.instance.isChallengeMode()?35:0;this.autoCompleteBtn.revive(),Phaser.Display.Align.To.TopCenter(this.autoCompleteBtn,this.scene.footer,0,12+t)}else this.autoCompleteBtn.kill()},n.showAutoCompleteButtonInPortrait=function(e){if(e){var t=Qo.instance.isChallengeMode()?40:0;this.autoCompleteBtn.revive(),Phaser.Display.Align.To.TopCenter(this.autoCompleteBtn,this.scene.footer,0,24+t),this.scene.journeyButton.kill()}else{this.autoCompleteBtn.kill();var n=this.boardState;n!==ku.GAME_OVER&&n!==ku.AUTO_COMPLETING&&this.scene.journeyButton.revive()}},n.addTimer=function(){var e=this;this.timer=this.scene.time.addEvent({delay:50,repeat:-1,callback:function(){e.boardState===ku.AUTO_COMPLETING?(e.hint.autoPlayStep(),e.scene.vibration.performVibrating(20)):e.timer.paused=!0},paused:!0})},n.handleAutoCompleteClick=function(){this.autoCompleteBtn.kill(),this.mover.disableInput(),this.boardState=ku.AUTO_COMPLETING,this.timer.paused=!1,this.scene.audio.playSound(Ls.Z.AUTO_COMPLETE)},n.initGameWithBoardState=function(){var e=(0,r.Z)(l().mark((function e(t){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Qo.instance.isJourneyMode()?this.logJourneyStartEvent(t.seed):this.scene.analytics.event(Nn._.LEVEL_CONTINUE,{game_type:Rr.filterGameType}),e.abrupt("return");case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.logJourneyStartEvent=function(e){var t=this.scene.journey;this.scene.analytics.event(Nn._.JOURNEY_START,{mission_id:t.getSeason(),seed:e||this.gameplay.getSeed(),level:t.getCurrentLevel(),game_type:Rr.filterGameType})},n.getLevelStartEventData=function(){var e=this.scene,t=e.gameStats,n=e.gameplay,i=Rr.filterGameType,a=t.getGameStatsForType(Rr.filterGameType,this.getGameOptions()),s=a.totalGame,r=a.wins,o=this.scene.levelLoader.getLevelByWins(r,i),c=Qo.instance.getGameMode();return{game_type:i,game_mode:GameCore.Utils.String.toUpperCamelCase(c),total_game:s,difficulty:o,seed:n.getSeed(),level:r}},n.logLevelStartEvent=function(){var e=this.getLevelStartEventData();this.scene.analytics.event(Nn._.LEVEL_START,e)},n.logStartGameEvent=function(){Qo.instance.isJourneyMode()?this.logJourneyStartEvent():this.logLevelStartEvent()},n.getBoundNumberOfCards=function(){var e=this.getMaxHeightTableau(),t=xr.CARD_HEIGHT,n=xr.VERTICAL_PILE_SPACE;return Math.floor((e-t/2)/n)+1},n.checkGameWin=function(){this.isGameWon()?this.handleGameWon():(this.isIdle()||this.isPlaying())&&this.checkAutoCompleted()},n.isGameWon=function(e){var t;return void 0===e&&(e=!1),!D()(t=this.foundations).call(t,(function(e){return!e.isFull()}))},n.outOfMove=function(){this.boardState=ku.GAME_OVER,this.gameplay.handleGameOver(!1),this.gameplay.saveSystem.clearLastGame()},n.isIdle=function(){return this.boardState==ku.IDLE},n.isDealing=function(){return this.boardState==ku.DEALING},n.isPlaying=function(){return this.boardState==ku.PLAYING},n.isAutoCompleting=function(){return this.boardState==ku.AUTO_COMPLETING},n.isOutOfMove=function(){return this.boardState==ku.OUT_OF_MOVE},n.isGameOver=function(){return this.boardState==ku.GAME_OVER},n.isNone=function(){return this.boardState==ku.NONE},n.getVerticalSpacePile=function(){return xr.VERTICAL_PILE_SPACE},n.isOnAutoMoveToFoundation=function(){return this.boardState==ku.AUTO_MOVE_TO_FOUNDATION},n.showAutoCompleteButton=function(e){GameCore.world.isLandscape()?this.showAutoCompleteButtonInLandscape(e):this.showAutoCompleteButtonInPortrait(e)},n.show=function(){this.scene.player.getPlayerSettings().autoComplete&&this.canAutoComplete&&this.showAutoCompleteButton(!0),this.debugButtons.forEach((function(e){e.revive(),e.setDisabled(!1)}))},n.hide=function(){this.showAutoCompleteButton(!1),this.debugButtons.forEach((function(e){e.kill(),e.setDisabled(!0)}))},n.createDevBtn=function(){if(GameCore.Utils.Valid.isDebugger()){this.createBoardStateText(),this.debugButtons=[],this.createAutoPlay(),this.createAutoStepPlay(),this.createOutOfMoveButton(),this.createGameWonButton(),this.createEditModeButton(),this.createIDLEButton(),this.createClearDataButton();var e=this.scene.ads.getBannerHeight(),t=this.scene.world.getWorldSize(),n=t.width,i=t.height,a=this.scene.world.isLandscape()?30:i-e-80;Phaser.Actions.GridAlign([this.autoPlayBtn,this.autoPlayStepBtn,this.outOfMoveButton,this.gameWonButton,this.editModeButton,this.idleButton,this.clearDataButton],{width:n>375?1:10,height:n>375?10:1,cellWidth:40,cellHeight:40,x:120,y:a})}},n.createAutoPlay=function(){var e;this.autoPlayBtn=new Ol.Z(this.scene,35,35);var t=this.scene.add.image(0,0,od,cd.IC_BG_OFF);t.setWorldSize(35,35);var n=this.scene.make.bitmapText({font:Rc.Z.PRIMARY.KEY,size:this.scene.fontSize(10),text:"Auto\nPlay",origin:{x:.5,y:.5}});n.setCenterAlign(),null==(e=this.autoPlayBtn)||e.add([t,n])},n.createAutoStepPlay=function(){var e;this.autoPlayStepBtn=new Ol.Z(this.scene,35,35);var t=this.scene.add.image(0,0,od,cd.IC_BG_OFF);t.setWorldSize(35,35);var n=this.scene.make.bitmapText({font:Rc.Z.PRIMARY.KEY,size:this.scene.fontSize(10),text:"Step",origin:{x:.5,y:.5}});n.setCenterAlign(),null==(e=this.autoPlayStepBtn)||e.add([t,n]),this.debugButtons.push(this.autoPlayStepBtn)},n.createOutOfMoveButton=function(){var e,t=this;this.outOfMoveButton=new Ol.Z(this.scene,35,35);var n=this.scene.add.image(0,0,od,cd.IC_BG_OFF);n.setWorldSize(35,35);var i=this.scene.make.bitmapText({font:Rc.Z.PRIMARY.KEY,size:this.scene.fontSize(10),text:"Out of\nMove",origin:{x:.5,y:.5}});i.setCenterAlign(),null==(e=this.outOfMoveButton)||e.add([n,i]),this.outOfMoveButton.onClick=function(){t.outOfMove()},this.debugButtons.push(this.outOfMoveButton)},n.createGameWonButton=function(){var e,t=this;this.gameWonButton=new Ol.Z(this.scene,35,35);var n=this.scene.add.image(0,0,od,cd.IC_BG_OFF);n.setWorldSize(35,35);var i=this.scene.make.bitmapText({font:Rc.Z.PRIMARY.KEY,size:this.scene.fontSize(10),text:"Won",origin:{x:.5,y:.5}});i.setCenterAlign(),null==(e=this.gameWonButton)||e.add([n,i]),this.gameWonButton.onClick=(0,r.Z)(l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.handleGameWon();case 1:case"end":return e.stop()}}),e)}))),this.debugButtons.push(this.gameWonButton)},n.createEditModeButton=function(){var e=GameCore.Configs.Gameplay.EditMode;this.editModeButton=new Ol.Z(this.scene,35,35);var t=this.scene.add.image(0,0,od,cd.IC_BG_OFF);t.setWorldSize(35,35);var n=this.scene.make.bitmapText({font:Rc.Z.PRIMARY.KEY,size:this.scene.fontSize(10),text:"Edit: off",origin:{x:.5,y:.5}});n.setMaxWidth(35),n.setCenterAlign(),this.editModeButton.add([t,n]),this.editModeButton.onClick=(0,r.Z)(l().mark((function t(){return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e=!e,GameCore.Configs.Gameplay.EditMode=e,n.setText("Edit: "+(e?"on":"off"));case 3:case"end":return t.stop()}}),t)}))),this.debugButtons.push(this.editModeButton)},n.createIDLEButton=function(){var e=this;this.idleButton=new Ol.Z(this.scene,35,35);var t=this.scene.add.image(0,0,od,cd.IC_BG_OFF);t.setWorldSize(35,35);var n=this.scene.make.bitmapText({font:Rc.Z.PRIMARY.KEY,size:this.scene.fontSize(10),text:"IDLE",origin:{x:.5,y:.5}});n.setCenterAlign(),this.idleButton.add([t,n]),Phaser.Display.Align.In.BottomRight(this.idleButton,this.scene.gameZone,0,-160),this.idleButton.onClick=(0,r.Z)(l().mark((function t(){return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.boardState=ku.IDLE;case 1:case"end":return t.stop()}}),t)}))),this.debugButtons.push(this.idleButton)},n.createClearDataButton=function(){this.clearDataButton=new Ol.Z(this.scene,35,35);var e=this.scene.add.image(0,0,od,cd.IC_BG_OFF);e.setWorldSize(35,35);var t=this.scene.make.bitmapText({font:Rc.Z.PRIMARY.KEY,size:this.scene.fontSize(10),text:"Clear\nData",origin:{x:.5,y:.5}});t.setCenterAlign(),this.clearDataButton.add([e,t]),Phaser.Display.Align.In.BottomRight(this.clearDataButton,this.scene.gameZone,0,-120),this.clearDataButton.onClick=(0,r.Z)(l().mark((function e(){var t;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:mo("current-board"),t=new St({}).toObject(),FBInstant.player.setDataAsync(t);case 3:case"end":return e.stop()}}),e)}))),this.debugButtons.push(this.clearDataButton)},n.createBoardStateText=function(){var e=this,t=this.scene.make.bitmapText({font:Rc.Z.PRIMARY.KEY,size:this.scene.fontSize(10),text:"NONE",origin:{x:.5,y:.5}});t.setCenterAlign().setDepth(Dn.Z.ON_TOP),this.scene.add.existing(t),this.boardStateText=t,this.scene.events.on(Lr.BOARD_STATE_CHANGED,(function(n){var i;GameCore.Utils.Valid.isDebugger()&&t&&(t.setText(A()(i=ku[n]).call(i,0,15)),Phaser.Display.Align.In.TopRight(t,e.scene.gameZone,-5,-10))}))},n.playDealingSound=function(){this.scene.audio.playSound(Ls.Z.SHUFFLE)},n.updateLeftHandedUI=function(){this.scene.player.getPlayerSettings().leftHanded!=this.isLeftHandedAlign&&this.alignBoard()},(0,he.Z)(t,[{key:"boardState",get:function(){return this._boardState},set:function(e){this._boardState=e,this.scene.events.emit(Lr.BOARD_STATE_CHANGED,this.boardState)}}]),t}(Phaser.Events.EventEmitter);function ud(e){var t=e%100,n=(e-t)/100;return 13*(1==n?3:n-2)+t-1}var ld=hd,dd=Gn.Z.GAMEPLAY_DEFAULT,pd=dd.KEY,fd=dd.FRAME,gd=function(e){function t(t){var n;(n=e.call(this,t)||this).shuffler=void 0,n.draw3=void 0,n.deck=void 0,n.stock=void 0,n.waste=void 0,n.piles=void 0,n.foundations=void 0,n.hint=void 0,n.mover=void 0,n.lastGame=void 0,n.handleAutoCompleteClick=function(){n.autoCompleteBtn.kill(),n.mover.disableInput(),n.boardState=ku.AUTO_COMPLETING,n.timer.paused=!1,n.scene.audio.playSound(Ls.Z.AUTO_COMPLETE)},n.gameType=is.Z.KLONDIKE,n.shuffler=new xl,n.deck=new Bl((0,As.Z)(n)),n.stock=new Tl((0,As.Z)(n)),n.waste=new pu((0,As.Z)(n)),n.piles=[],n.foundations=[],n.mover=new kl((0,As.Z)(n)),n.hint=new hl((0,As.Z)(n));for(var i=0;i<7;i++){var a=new bu((0,As.Z)(n));a.setIdx(i),n.piles.push(a)}for(var s=0;s<4;s++){var r=new Pu((0,As.Z)(n));r.setIdx(s),n.foundations.push(r)}return n.alignBoard(),n.draw3=!1,n.boardState=ku.NONE,n.canAutoComplete=!1,n.listenEvents(),n.createAutoWinButton(),n.deck.init(),n}(0,o.Z)(t,e);var n=t.prototype;return n.addTimer=function(){var e=this;this.timer=this.scene.time.addEvent({delay:50,repeat:-1,callback:function(){e.boardState===ku.AUTO_COMPLETING?(e.hint.autoPlayStep(),e.scene.vibration.performVibrating(20)):e.timer.paused=!0},paused:!0})},n.getBoundNumberOfCards=function(){var e=this.getMaxHeightTableau(),t=xr.CARD_HEIGHT,n=xr.VERTICAL_PILE_SPACE;return Math.floor((e-t/2)/n)+1},n.placeCenter=function(e,t,n,i,a){void 0===a&&(a=0);for(var s=e.length,r=t-(s/2-.5-a)*i,o=0;o<s;o++)e[o].setPosition(r+o*i,n)},n.getGameOptions=function(){return{draw3:this.draw3}},n.startGame=function(){var e=(0,r.Z)(l().mark((function e(t){var n,i;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isDealing()){e.next=2;break}return e.abrupt("return");case 2:return this.clearOldBoard(),n=t.seed,(i=t.options)&&void 0!=i.draw3&&(this.draw3=i.draw3),this.scene.events.emit(Lr.GAME_START),this.logStartGameEvent(),e.next=10,this.dealingWithSeed(n);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.dealingWithSeed=function(){var e=(0,r.Z)(l().mark((function e(t){var n,i,a,s,r,o,c=this;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.boardState=ku.DEALING,this.deck.reset(),n=this.shuffler.shuffle(t),(i=this.deck.getDeck(n)).forEach((function(e){return e.revive()})),e.next=8,Au(this.scene,300);case 8:this.playDealingSound(),a=0;case 10:if(!(a<7)){e.next=25;break}s=a;case 12:if(!(s<7)){e.next=22;break}if(!(r=i.pop())){e.next=19;break}return this.piles[s].addCard(r,!0),s%2==0&&this.scene.vibration.performVibrating(10),e.next=19,Au(this.scene,30);case 19:s++,e.next=12;break;case 22:a++,e.next=10;break;case 25:return i.forEach((function(e){return c.stock.addCard(e,!1)})),e.next=28,Au(this.scene,100);case 28:for(o=0;o<7;o++)this.piles[o].faceUpLast();return e.next=31,Au(this.scene,400);case 31:this.gameplay.saveSystem.saveCurrentBoardData(),this.updateAfterDeal();case 33:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.continueGame=function(){var e=(0,r.Z)(l().mark((function e(t){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.scene.analytics.event(Nn._.LEVEL_CONTINUE,{game_type:is.Z.KLONDIKE}),!this.isDealing()){e.next=3;break}return e.abrupt("return");case 3:return this.clearOldBoard(),e.next=6,this.dealingWithLastBoard(t);case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.dealingWithLastBoard=function(){var e=(0,r.Z)(l().mark((function e(t){var n,i,a,s,r,o,c,h,u,d,p,f,g,m,v,y,T,C,E,A,S,b,I,w=this;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.boardState=ku.DEALING,this.lastGame=t,i=t.stock,a=t.waste,s=t.piles,r=t.faceBackOfPiles,o=t.foundations,c=t.score,h=t.time,u=t.moves,d=t.draw3,p=t.movesData,this.deck.reset(),e.next=6,Au(this.scene,300);case 6:for(this.score=c,this.time=h,this.moves=u,this.draw3=d,f=this.deck.getCards(i),g=this.deck.getCards(a),m=De()(s).call(s,(function(e){return w.deck.getCards(e)})),v=De()(o).call(o,(function(e){return w.deck.getCards(e)})),this.playDealingSound(),y=0;y<f.length;y++)this.stock.addCard(f[y],!1);T=0;case 17:if(!(T<v.length)){e.next=32;break}C=v[T],E=0;case 20:if(!(E<C.length)){e.next=29;break}return this.foundations[T].addCard(C[E],!0),C[E].setFacingWithFlippingAnim(!0),C[E].setInteractive(),e.next=26,Au(this.scene,30);case 26:E++,e.next=20;break;case 29:T++,e.next=17;break;case 32:A=0;case 33:if(!(A<m.length)){e.next=47;break}S=m[A],b=0;case 36:if(!(b<S.length)){e.next=44;break}return this.piles[A].addCardByDeal(S[b],!0,S.length),b>=r[A]&&(S[b].setFacingWithFlippingAnim(!0),S[b].setInteractive()),e.next=41,Au(this.scene,30);case 41:b++,e.next=36;break;case 44:A++,e.next=33;break;case 47:I=0;case 48:if(!(I<g.length)){e.next=55;break}return this.waste.addCard(g[I],!0),e.next=52,Au(this.scene,30);case 52:I++,e.next=48;break;case 55:return e.next=57,Au(this.scene,400);case 57:this.mover.undos=x()(n=[]).call(n,p),this.updateAfterDeal();case 59:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.initGameWithBoardState=function(){var t=(0,r.Z)(l().mark((function t(n){var i,a,s,r,o,c,h,u,d,p,f,g,m,v,y,T,C,E,A=this;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.prototype.initGameWithBoardState.call(this,n),!this.isDealing()){t.next=3;break}return t.abrupt("return");case 3:if(n.currentState){t.next=5;break}return t.abrupt("return");case 5:return this.clearOldBoard(),this.boardState=ku.DEALING,i=n.draw3,a=n.currentState,s=a.stock,r=a.waste,o=a.tableau,c=a.foundations,this.deck.reset(),t.next=12,Au(this.scene,300);case 12:for(this.score=0,this.time=0,this.moves=0,this.draw3=i,h=this.deck.getCardsNew(s),u=this.deck.getCardsNew(r),d=De()(o).call(o,(function(e){return A.deck.getCardsNew(e)})),p=De()(c).call(c,(function(e){return A.deck.getCardsNew(e)})),this.playDealingSound(),f=0;f<h.length;f++)this.stock.addCard(h[f],!1);g=0;case 23:if(!(g<p.length)){t.next=38;break}m=p[g],v=0;case 26:if(!(v<m.length)){t.next=35;break}return this.foundations[g].addCard(m[v],!0),m[v].setFacingWithFlippingAnim(!0),m[v].setInteractive(),t.next=32,Au(this.scene,30);case 32:v++,t.next=26;break;case 35:g++,t.next=23;break;case 38:y=0;case 39:if(!(y<d.length)){t.next=54;break}T=d[y],C=0;case 42:if(!(C<T.length)){t.next=51;break}return this.piles[y].addCardByDeal(T[C],!0,T.length),C%2==0&&this.scene.vibration.performVibrating(10),o[y][C].faceUp&&(T[C].setFacingWithFlippingAnim(!0),T[C].setInteractive()),t.next=48,Au(this.scene,30);case 48:C++,t.next=42;break;case 51:y++,t.next=39;break;case 54:E=0;case 55:if(!(E<u.length)){t.next=62;break}return this.waste.addCard(u[E],!0),t.next=59,Au(this.scene,30);case 59:E++,t.next=55;break;case 62:return t.next=64,Au(this.scene,400);case 64:this.mover.undos=[],this.updateAfterDeal();case 66:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),n.initGameWithBoard=function(){var e=(0,r.Z)(l().mark((function e(t){var n,i,a,s,r,o,c,h,u,d,p,f,g,m,v,y,T,C=this;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.scene.analytics.event(Nn._.LEVEL_CONTINUE),!this.isDealing()){e.next=3;break}return e.abrupt("return");case 3:return this.clearOldBoard(),this.boardState=ku.DEALING,n=t.stock,i=t.waste,a=t.tableau,s=t.foundations,r=t.draw3,this.deck.reset(),e.next=9,Au(this.scene,300);case 9:for(this.score=0,this.time=0,this.moves=0,this.draw3=r,o=this.deck.getCardsNew(n),c=this.deck.getCardsNew(i),h=De()(a).call(a,(function(e){return C.deck.getCardsNew(e)})),u=De()(s).call(s,(function(e){return C.deck.getCardsNew(e)})),this.playDealingSound(),d=0;d<o.length;d++)this.stock.addCard(o[d],!1);p=0;case 20:if(!(p<u.length)){e.next=35;break}f=u[p],g=0;case 23:if(!(g<f.length)){e.next=32;break}return this.foundations[p].addCard(f[g],!0),f[g].setFacingWithFlippingAnim(!0),f[g].setInteractive(),e.next=29,Au(this.scene,30);case 29:g++,e.next=23;break;case 32:p++,e.next=20;break;case 35:m=0;case 36:if(!(m<h.length)){e.next=50;break}v=h[m],y=0;case 39:if(!(y<v.length)){e.next=47;break}return this.piles[m].addCardByDeal(v[y],!0,v.length),a[m][y].faceUp&&(v[y].setFacingWithFlippingAnim(!0),v[y].setInteractive()),e.next=44,Au(this.scene,30);case 44:y++,e.next=39;break;case 47:m++,e.next=36;break;case 50:T=0;case 51:if(!(T<c.length)){e.next=58;break}return this.waste.addCard(c[T],!0),e.next=55,Au(this.scene,30);case 55:T++,e.next=51;break;case 58:return e.next=60,Au(this.scene,400);case 60:this.mover.undos=[],this.updateAfterDeal();case 62:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.updateAfterDeal=function(){this.boardState=ku.IDLE,this.checkGameWin(),this.updateFoundationCardsInteractive(),this.mover.enableInput()},n.checkAutoCompleted=function(){if(this.scene.player.getPlayerSettings().autoComplete){var e,t=0===Le()(e=this.piles).call(e,(function(e){return e.cards.length>0&&!e.cards[0].isFacingUp()})).length;this.draw3&&(this.waste.cards.length>0||this.stock.cards.length>0)&&(t=!1),t?(this.canAutoComplete=!0,this.showAutoCompleteButton(!0)):(this.canAutoComplete=!1,this.showAutoCompleteButton(!1))}else this.showAutoCompleteButton(!1)},n.checkGameWin=function(){this.isGameWon()?this.handleGameWon():(this.isIdle()||this.isPlaying())&&this.checkAutoCompleted()},n.outOfMove=function(){this.boardState=ku.GAME_OVER,this.gameplay.handleGameOver(!1),this.gameplay.saveSystem.clearLastGame()},n.clearOldBoard=function(){this.boardState=ku.NONE,this.canAutoComplete=!1,this.moves=0,this.time=0,this.score=0,this.stockRecycleCount=0,this.mover.disableInput(),this.gameplay.boardGame.showAutoCompleteButton(!1),this.waste.clear(),this.piles.forEach((function(e){return e.clear()})),this.foundations.forEach((function(e){return e.clear()})),this.stock.clear(),this.mover.clear(),this.hint.clear(),this.deck.reset()},n.handleGameWon=function(){this.showAutoCompleteButton(!1),this.increaseScore(Math.round(7e5/this.time*1e3)),this.scene.audio.playSound(Ls.Z.WON),this.gameplay.saveSystem.clearLastGame(),this.boardState=ku.GAME_OVER,this.gameplay.handleGameOver(!0)},n.update=function(e){(this.isPlaying()||this.isAutoCompleting())&&(this.time+=e,this.timeToDecreaseScore+=e,this.timeToDecreaseScore>1e4&&(this.decreaseScore(2),this.timeToDecreaseScore-=1e4)),this.isPlaying()&&(this.timeToSaveBoardData+=e,this.timeToSaveBoardData>5e3&&(this.gameplay.saveSystem.saveCurrentBoardData(),this.timeToSaveBoardData=0)),this.stock.update(e),this.mover.update(),this.hint.update(e),this.mover.isPicked()&&this.hint.resetAutoHintTime(),this.scene.footer.undoBtn.setDisabled(0==this.mover.undos.length||!(this.isPlaying()||this.isIdle()))},n.createAutoPlay=function(){var e,t=this;this.autoPlayBtn=new Ol.Z(this.scene,35,35);var n=this.scene.add.image(0,0,pd,fd.IC_BG_OFF);n.setWorldSize(35,35);var i=this.scene.make.bitmapText({font:Rc.Z.PRIMARY.KEY,size:this.scene.fontSize(10),text:"Auto\nPlay",origin:{x:.5,y:.5}});i.setCenterAlign(),i.setIgnoreLanguage(),null==(e=this.autoPlayBtn)||e.add([n,i]);var a=this.scene.time.addEvent({delay:50,repeat:-1,callback:function(){if(t.isIdle()&&(t.boardState=ku.PLAYING),!t.isPlaying()||t.canAutoComplete)return a.paused=!0,void i.setText("Auto\nPlay");t.hint.autoPlayStep()},paused:!0});this.autoPlayBtn.onClick=function(){a.paused?(i.setText("Stop"),a.paused=!1):(i.setText("Auto\nPlay"),a.paused=!0)},this.debugButtons.push(this.autoPlayBtn)},n.createAutoStepPlay=function(){var e,t=this;this.autoPlayStepBtn=new Ol.Z(this.scene,35,35);var n=this.scene.add.image(0,0,pd,fd.IC_BG_OFF);n.setWorldSize(35,35);var i=this.scene.make.bitmapText({font:Rc.Z.PRIMARY.KEY,size:this.scene.fontSize(10),text:"Step",origin:{x:.5,y:.5}});i.setCenterAlign(),i.setIgnoreLanguage(),null==(e=this.autoPlayStepBtn)||e.add([n,i]),this.autoPlayStepBtn.onClick=function(){t.isIdle()&&(t.boardState=ku.PLAYING),t.isPlaying()&&t.hint.autoPlayStep()},this.debugButtons.push(this.autoPlayStepBtn)},n.getVerticalSpacePile=function(){return xr.VERTICAL_PILE_SPACE},n.updateFoundationCardsInteractive=function(){this.foundations.forEach((function(e){e.cards.forEach((function(t,n){n<e.cards.length-1?t.disableInteractive():t.setInteractive()}))}))},n.getCurrentBoard=function(){var e,t,n,i,a,s={seed:this.gameplay.getSeed(),stock:De()(e=this.stock.cards).call(e,(function(e){return ud(e.getTag())})),waste:De()(t=this.waste.cards).call(t,(function(e){return ud(e.getTag())})),piles:De()(n=this.piles).call(n,(function(e){var t;return De()(t=e.cards).call(t,(function(e){return ud(e.getTag())}))})),faceBackOfPiles:De()(i=this.piles).call(i,(function(e){var t;return Qh()(t=e.cards).call(t,(function(e){return e.isFacingUp()}))})),foundations:De()(a=this.foundations).call(a,(function(e){var t;return De()(t=e.cards).call(t,(function(e){return ud(e.getTag())}))})),score:this.getScore(),time:this.getTime(),moves:this.getMoves(),draw3:this.draw3,movesData:this.mover.undos,updatedAt:(new Date).getTime()};return Phaser.Utils.Objects.DeepCopy(s)},n.saveCurrentBoard=function(){this.lastGame=this.getCurrentBoard()},n.show=function(){var t;e.prototype.show.call(this),x()(t=[]).call(t,this.piles,this.foundations,[this.stock,this.waste]).forEach((function(e){return e.show()}))},n.hide=function(){var t;e.prototype.hide.call(this),x()(t=[]).call(t,this.piles,this.foundations,[this.stock,this.waste]).forEach((function(e){return e.hide()}))},t}(ld),md=gd,vd=Gn.Z.GAMEPLAY_DEFAULT,yd=(vd.KEY,vd.FRAME,function(e){function t(t){return e.call(this,t)||this}(0,o.Z)(t,e);var n=t.prototype;return n.getMaxHeightTableau=function(){var e=Qo.instance.isChallengeMode()?55:0,t=this.scene.footer;return t.y-t.height/2-this.piles[0].y-xr.CARD_HEIGHT/2-e},n.listenEvents=function(){var e=this;this.scene.events.on("settings-changed",(function(t){e.gameType==Rr.gameType&&(t==ss.autoComplete&&e.checkAutoCompleted(),t==ss.leftHanded&&e.alignBoard())}))},n.alignBoard=function(){var e=Pr(is.Z.KLONDIKE),t=this.scene.world.getWorldSize().width/2,n=xr.FOUNDATION_Y+30*e,i=this.getHorizontalPileSpace(),a=this.scene.player.getPlayerSettings().leftHanded,s=this.isLeftHandedAlign!=a;this.isLeftHandedAlign=a,a?(this.placeCenter(this.foundations,t,n,i,1.5),this.placeCenter([this.waste],t,n,i,-1.8),this.placeCenter([this.stock],t,n,i,-3)):(this.placeCenter(this.foundations,t,n,i,-1.5),this.placeCenter([this.waste],t,n,i,1.2),this.placeCenter([this.stock],t,n,i,3));var r=xr.SPACE_BETWEEN_PILE_AND_FOUNDATION;this.placeCenter(this.piles,t,n+r,i),s?this.deck.alignCurrentDeck():this.deck.align()},n.getHorizontalPileSpace=function(){var e=Math.floor((this.scene.gameZone.width-7*xr.CARD_WIDTH)/8)+xr.CARD_WIDTH;return Math.min(e,xr.MAX_HORIZONTAL_PILE_SPACE)},n.placeCenter=function(e,t,n,i,a){void 0===a&&(a=0);for(var s=e.length,r=t-(s/2-.5-a)*i,o=0;o<s;o++)e[o].setPosition(r+o*i,n)},t}(md)),Td=yd,Cd=Gn.Z.GAMEPLAY_DEFAULT_LANDSCAPE,Ed=(Cd.KEY,Cd.FRAME,function(e){function t(t){return e.call(this,t)||this}(0,o.Z)(t,e);var n=t.prototype;return n.getMaxHeightTableau=function(){var e=Qo.instance.isChallengeMode()?45:0,t=this.scene.footer;return t.y-t.height/2-this.piles[0].y-xr.CARD_HEIGHT/2-e},n.listenEvents=function(){var e=this;this.scene.events.on("settings-changed",(function(t){if(e.gameType==Rr.gameType){if(t==ss.autoComplete&&e.checkAutoCompleted(),t==ss.largeWidthLayout){if(kr(is.Z.KLONDIKE),e.scene.header.alignChildren(),e.updateSlotSize(),e.alignBoard(),e.isDealing()||!e.lastGame)return;e.clearOldBoard(),e.dealingWithLastBoard(e.lastGame)}t==ss.leftHanded&&e.alignBoard()}}))},n.alignBoard=function(){this.scene.player.getPlayerSettings().largeWidthLayout?this.alignBoardWithLagerWidth():this.alignBoardWidthSmallWidth(),this.waste.align()},n.alignBoardWithLagerWidth=function(){var e=xr.CARD_WIDTH,t=Pr(is.Z.KLONDIKE),n=this.scene.world.getWorldSize().width,i=n/2,a=xr.FOUNDATION_Y+30*t,s=this.getHorizontalPileSpace(),r=a+25,o=s-e,c=7*xr.CARD_WIDTH+6*o,h=Math.max((n-c)/2/(1+178/116),e/2+2);this.placeCenter(this.piles,i,a,s),this.waste.setPosition(n-h,r),this.stock.setPosition(n-h,r+172);for(var u=0;u<this.foundations.length;u++)this.foundations[u].setPosition(h,r+u*(xr.CARD_HEIGHT+10));this.deck.align()},n.alignBoardWidthSmallWidth=function(){var e=Pr(is.Z.KLONDIKE),t=this.scene.world.getWorldSize().width/2,n=xr.FOUNDATION_Y+30*e,i=this.getHorizontalPileSpace(),a=this.scene.player.getPlayerSettings().leftHanded,s=this.isLeftHandedAlign!=a;this.isLeftHandedAlign=a,a?(this.placeCenter(this.foundations,t,n,i,1.5),this.placeCenter([this.waste],t,n,i,-1.8),this.placeCenter([this.stock],t,n,i,-3)):(this.placeCenter(this.foundations,t,n,i,-1.5),this.placeCenter([this.waste],t,n,i,1.2),this.placeCenter([this.stock],t,n,i,3));var r=xr.SPACE_BETWEEN_PILE_AND_FOUNDATION*e;this.placeCenter(this.piles,t,n+r,i),s?this.deck.alignCurrentDeck():this.deck.align()},n.getHorizontalPileSpace=function(){var e=window.game.player.getPlayerSettings().largeWidthLayout?1.18:1,t=Math.floor((this.scene.gameZone.width-7*xr.CARD_WIDTH)/8)+xr.CARD_WIDTH;return Math.min(t,xr.MAX_HORIZONTAL_PILE_SPACE*e)},n.placeCenter=function(e,t,n,i,a){void 0===a&&(a=0);for(var s=e.length,r=t-(s/2-.5-a)*i,o=0;o<s;o++)e[o].setPosition(r+o*i,n)},n.updateSlotSize=function(){var e;x()(e=[]).call(e,this.piles,[this.waste,this.stock],this.foundations).forEach((function(e){return e.updateSlotSize()}))},t}(md)),Ad=Ed,Sd=GameCore.world.isLandscape()?Ad:Td,bd=function(){function e(){this.stock=void 0,this.waste=void 0,this.tableau=void 0,this.foundations=void 0,this.shuffler=void 0,this.turn1=void 0,this.totalMoves=0,this.outOfMove=void 0,this.turn3Seeds=[],this.turn1Seeds=[],this.shuffler=new xl,this.turn1=!0}var t=e.prototype;return t.intBoard=function(e){var t=this;this.stock=[],this.waste=[],this.tableau=[],this.foundations=[];for(var n=0;n<7;n++)this.tableau.push([]);for(var i=0;i<4;i++)this.foundations.push([]);this.stock=[201,202,203,204,205,206,207,208,209,210,211,212,213,301,302,303,304,305,306,307,308,309,310,311,312,313,401,402,403,404,405,406,407,408,409,410,411,412,413,101,102,103,104,105,106,107,108,109,110,111,112,113],this.stock=De()(e).call(e,(function(e){return t.stock[e]}));for(var a=0;a<7;a++)for(var s=a;s<7;s++)this.tableau[s].push((this.stock.pop()||0)+1e3);for(var r=0;r<7;r++){var o=this.tableau[r];o[o.length-1]=this.faceUp(o[o.length-1])}},t.printBoard=function(){},t.faceUp=function(e){return e-1e3},t.isFaceUp=function(e){return e<1e3},t.findFoundation=function(e){for(var t=0;t<4;t++){var n=this.foundations[t][this.foundations[t].length-1];if(n&&Math.abs(e-n)<=13&&e%100==n%100+1)return this.foundations[t]}},t.findColum=function(e){for(var t=0;t<7;t++){var n=this.tableau[t][this.tableau[t].length-1];if(!n&&e%100==13)return this.tableau[t];if(n&&(e/2>120&&n/2<120||e/2<120&&n/2>120)&&e%100+1==n%100)return this.tableau[t]}},t.getMovable=function(){var e,t,n,i,a,s=this,r=[],o=A()(e=this.waste).call(e,-1),c=De()(t=this.tableau).call(t,(function(e){return e.at(-1)||0})),h=De()(n=this.tableau).call(n,(function(e){return e[Qh()(e).call(e,(function(e){return s.isFaceUp(e)}))]||0})),u=De()(i=this.foundations).call(i,(function(e){return e.at(-1)||0})),l=De()(u).call(u,(function(e,t){return e?e+1:100*(t+1)+1})),d=x()(a=[]).call(a,o,c),p=D()(d).call(d,(function(e){return e%100==1}));if(p){var f=En()(l).call(l,p);r.push({card:p,dest:this.foundations[f]})}for(var g=0;g<h.length;g++){var m,v=h[g],y=En()(m=this.tableau[g]).call(m,v);if(v&&y>=1){if(h[g]==c[g]){var T=En()(l).call(l,v);if(T>=0){r.push({card:v,dest:this.foundations[T]});continue}}var C=this.findColum(v);C&&r.push({card:v,dest:C})}}for(var E=0;E<d.length;E++){var S=d[E];if(S){var b=En()(l).call(l,S);b>=0&&r.push({card:S,dest:this.foundations[b]})}}for(var I=0;I<h.length;I++){var w,P=h[I];if(P&&P%100==13)if(0==En()(w=this.tableau[I]).call(w,P))continue;if(P){var k=this.findColum(P);k&&r.push({card:P,dest:k})}}var _=o.at(-1);if(_){var O=this.findColum(_);O&&r.push({card:_,dest:O})}return Le()(r).call(r,(function(e,t,n){return Qh()(n).call(n,(function(t){return t===e}))===t}))},t.findPos=function(e){if(this.waste.at(-1)==e)return this.waste;for(var t=0;t<7;t++){var n;if(be()(n=this.tableau[t]).call(n,e))return this.tableau[t]}for(var i=0;i<4;i++){var a;if(be()(a=this.foundations[i]).call(a,e))return this.tableau[i]}return[]},t.solve=function(){var e;for(this.totalMoves=0;this.move();)this.totalMoves+=1;return!D()(e=this.foundations).call(e,(function(e){return e.length<13}))},t.move=function(){var e,t=this.getMovable();if(t.length>0){var n=t[Math.floor(Math.random()*t.length)],i=n.card,a=n.dest,s=this.findPos(i),r=En()(s).call(s,i);return a.push.apply(a,eu()(s).call(s,r)),s[s.length-1]>1e3&&(s[s.length-1]-=1e3),this.outOfMove=!1,!0}if(this.turn1){var o=this.stock.pop();if(o)return o>1e3&&(o-=1e3),this.waste.push(o),!0}else{var c,h,u=eu()(c=this.stock).call(c,-3);if(u.length>0)return(h=this.waste).push.apply(h,Xh()(u).call(u)),!0}return this.waste.length>0&&!this.outOfMove&&(this.stock=Xh()(e=this.waste).call(e),this.waste=[],this.outOfMove=!0,!0)},t.generateMap=function(e,t){if(void 0===e&&(e=0),void 0===t&&(t=!0),0!=e){this.turn1=t;for(var n,i,a=[],s=0;s<e;s++){for(var r=this.shuffler.generateSeed(),o=0,c=0,h=0;h<50;h++)o+=+this.solveSeed(r),c=(this.totalMoves+c*h)/(h+1);o/50==1&&a.push({seed:r,totalMoves:c,winRate:o/50})}if(t)(n=this.turn1Seeds).push.apply(n,a);else(i=this.turn3Seeds).push.apply(i,a)}},t.generateMapByRate=function(e,t,n,i){if(0!=e){this.turn1=t;for(var a,s,r=[],o=0;o<e;o++){for(var c=this.shuffler.generateSeed(),h=0,u=0,l=0;l<100;l++){this.solveSeed(c)&&(u=(this.totalMoves+u*h)/(h+1),h+=1)}var d=h/100;d>=n&&d<i&&r.push({seed:c,totalMoves:u,winRate:h/100})}if(t)(a=this.turn1Seeds).push.apply(a,r);else(s=this.turn3Seeds).push.apply(s,r)}},t.solveSeed=function(e){var t=this.shuffler.shuffle(e);return this.intBoard(t),!!this.solve()},t.testMaps=function(e,t){this.turn1=!t;for(var n,i,a=[],s=0;s<e.length;s++){var r=e[s],o=this.shuffler.shuffle(r);this.intBoard(o);for(var c=0,h=0,u=0;u<100;u++)c+=+this.solveSeed(r),h=(this.totalMoves+h*u)/(u+1);c/100==1&&a.push({seed:r,totalMoves:h,winRate:c/100})}t?(n=this.turn3Seeds).push.apply(n,a):(i=this.turn1Seeds).push.apply(i,a)},e}(),Id=bd,wd=n(616),Pd=function(){function e(e){var t=this;this.gameplay=void 0,this.gameType=void 0,this.saveCurrentBoardToProfile=(0,wd.D)((function(e){t.gameplay.scene.player.setCustomData("current_board",(0,s.Z)({},e))}),2e3),this.gameplay=e}var t=e.prototype;return t.saveCurrentBoardData=function(e){e=e||this.gameType;var t=this.gameplay.boardGame;if(!Qo.instance.isJourneyMode()&&!t.mover.isPicked()){var n={};switch(e){case is.Z.KLONDIKE:n=(0,s.Z)({},n,{klondike:{boardData:t.getCurrentBoard()}});break;case is.Z.FREE_CELL:n=(0,s.Z)({},n,{freeCell:{boardData:t.getCurrentBoard()}});break;case is.Z.SPIDER:n=(0,s.Z)({},n,{spider:{boardData:t.getCurrentBoard()}})}go("current_board",(0,s.Z)({},n)),this.saveCurrentBoardToProfile(n)}},t.clearLastGame=function(e){e=e||this.gameType,mo("current_board");var t=window.game.player,n=t.getCustomData("current_board");if(n){switch(e){case is.Z.KLONDIKE:n=(0,s.Z)({},n,{klondike:void 0});break;case is.Z.FREE_CELL:n=(0,s.Z)({},n,{freeCell:void 0});break;case is.Z.SPIDER:n=(0,s.Z)({},n,{spider:void 0})}t.setCustomData("current_board",(0,s.Z)({},n)),this.saveCurrentBoardToProfile((0,s.Z)({},n))}},t.getLastGameData=function(e){switch(e=e||this.gameType){case is.Z.KLONDIKE:return this.getLastGameDataKlondike();case is.Z.FREE_CELL:return this.getLastGameDataFreeCell();case is.Z.SPIDER:return this.getLastGameDataSpider()}},t.getLastGameDataKlondike=function(){var e=window.game.player.getCustomData("current_board");if(e&&e.klondike){var t=e.klondike.boardData;if(this.isBoardDataKlondikeValid(t))return Phaser.Utils.Objects.DeepCopy(t)}},t.getLastGameDataFreeCell=function(){var e=window.game.player.getCustomData("current_board");if(e&&e.freeCell){var t=e.freeCell.boardData;if(this.isBoardDataFreeCellValid(t))return Phaser.Utils.Objects.DeepCopy(t)}},t.getLastGameDataSpider=function(){var e=window.game.player.getCustomData("current_board");if(e&&e.spider){var t=e.spider.boardData;return Phaser.Utils.Objects.DeepCopy(t)}},t.isBoardDataKlondikeValid=function(e){var t,n=GameCore.Utils.Valid;if(!n.isObject(e))return!1;var i=e.piles,a=e.foundations,s=e.waste,r=e.stock,o=e.movesData,c=e.score,h=e.time,u=e.moves,l=e.seed;if(!n.isNumber(c))return!1;if(!n.isNumber(h))return!1;if(!n.isNumber(u))return!1;if(!n.isString(l))return!1;var d=void 0!==i,p=void 0!==a,f=void 0!==s,g=void 0!==r,m=void 0!==o,v=void 0!==l,y=0;return x()(t=[]).call(t,i,a,[s,r]).forEach((function(e){return y+=e.length})),!!(d&&p&&f&&g&&m&&v&&52==y)},t.isBoardDataFreeCellValid=function(e){var t,n=GameCore.Utils.Valid;if(!n.isObject(e))return!1;var i=e.freeCells,a=e.piles,s=e.foundations,r=e.movesData,o=e.score,c=e.time,h=e.moves,u=e.seed;if(!n.isNumber(o))return!1;if(!n.isNumber(c))return!1;if(!n.isNumber(h))return!1;if(!n.isString(u))return!1;var l=void 0!==a,d=void 0!==i,p=void 0!==s,f=void 0!==r,g=void 0!==u,m=0;return x()(t=[]).call(t,i,a,s).forEach((function(e){return m+=e.length})),!!(l&&d&&p&&f&&g&&52==m)},e}(),kd=Pd,_d=Gn.Z.GAMEPLAY_DEFAULT,xd=(_d.KEY,_d.FRAME),Od=function(e){function t(t,n){var i;return(i=e.call(this,t)||this).cards=[],i.color=void 0,i.color=n,i.createAce(),i.setName(hu.Foundation),i}(0,o.Z)(t,e);var n=t.prototype;return n.createAce=function(){this.slot.setFrame(xd.FOUNDATION_SLOT)},n.setPosition=function(t,n){e.prototype.setPosition.call(this,t,n)},n.addCard=function(t,n,i){var a=this;e.prototype.addCard.call(this,t,n,i);var s=i?0:xr.CARD_MOVE_TIME,r=this.cards.length-2;this.boardGame.scene.time.delayedCall(s,(function(){var e=a.cards[r];e&&e.kill()}))},n.pickTopCards=function(t){var n=this.cards[this.cards.length-2];return n&&n.revive(),e.prototype.pickTopCards.call(this,t)},n.canBePlace=function(e){var t=e.getTag(),n=t%100,i=(t-n)/100,a=i===this.color;if(0===this.cards.length)return t%100===yu.ACE&&a;var s=this.cards[this.cards.length-1].getTag(),r=s%100;return i==(s-r)/100&&n==r+1},n.isFull=function(){return 13===this.cards.length},t}(ou),Ld=Od,Rd=function(){function e(e){this.freeCells=void 0,this.piles=void 0,this.foundations=void 0,this.moveSpace=[],this.autoMoveFoundation=!0,this.boardGame=void 0,this.boardGame=e,this.piles=[],this.foundations=[],this.freeCells=[];for(var t=0;t<8;t++)this.piles.push([]);for(var n=0;n<4;n++)this.foundations.push([]),this.freeCells.push([])}var t=e.prototype;return t.printBoard=function(){},t.updateInfo=function(){this.updateState()},t.updateState=function(){var e=this,t=this.boardGame,n=t.foundations,i=t.piles,a=t.freeCells;n.forEach((function(t,n){return e.foundations[n]=t.getAllCards()})),i.forEach((function(t,n){return e.piles[n]=t.getAllCards()})),a.forEach((function(t,n){return e.freeCells[n]=t.getAllCards()}))},t.getHint=function(){var e=this;this.moveSpace=[];var t,n=this.getMovable(),i=n.move,a=n.moveToFoundation;if(0!=i.length||0!=a.length){if(a.length>0)t=a[0];else{for(var s,r,o=0;o<i.length;o++)this.getCostByMove(i[o]);ia()(s=this.moveSpace).call(s,(function(e,t){return e.cost-t.cost})),this.moveSpace=Le()(r=this.moveSpace).call(r,(function(t,n){for(var i=n-1;i>=0;i--){var a=e.moveSpace[i],s=a.cost,r=a.action;if(s<t.cost&&r.card==t.action.card&&r.from==t.action.from)return!1}return!0}));var c=this.moveSpace[0].cost;if(0==c)t=this.moveSpace[0].action;else{var h=0;this.moveSpace.forEach((function(e){e.cost<=c+1&&(h+=1)}));var u=Math.floor(Math.random()*Math.min(this.moveSpace.length,Math.max(3,h)));t=this.moveSpace[u].action}}return this.convertActionToHintType(t)}},t.convertActionToHintType=function(e){var t,n=e.from,i=e.to,a=e.card,s=this.boardGame,r=s.piles,o=s.freeCells,c=s.foundations,h=this.piles,u=r;"C"==n[0]&&(h=this.freeCells,u=o);this.foundations;var l=c;"C"==i[0]?(this.freeCells,l=o):"T"==i[0]&&(this.piles,l=r);var d=L()(n[1]),p=L()(i[1]),f=En()(t=h[d]).call(t,a);return{card:u[d].getCardByIndex(f),dest:l[p]}},t.getMovesEstimate=function(){var e=0;return this.foundations.forEach((function(t){e+=t.length})),52-e},t.getNumOfCardsUnsorted=function(){for(var e=0,t=0;t<this.piles.length;t++){for(var n=this.piles[t],i=n.length,a=n.length-1;a>0;a--){var s=n[a]%100,r=Math.floor((n[a]-s)/300),o=n[a-1]%100,c=Math.floor((n[a-1]-o)/300);if(s!=o-1||r==c)break;i-=1}e+=i}return e},t.getNumOfCardsInFreeCells=function(){for(var e=0,t=0;t<this.freeCells.length;t++)this.freeCells[t].length>0&&(e+=1);return e},t.getMovable=function(){for(var e,t,n=this,i=[],a=[],s=De()(e=this.piles).call(e,(function(e){return e[e.length-1]||0})),r=De()(t=this.foundations).call(t,(function(e){return e[e.length-1]||0})),o=De()(r).call(r,(function(e,t){return e?e+1:100*(3-t+1)+1})),c=0;c<s.length;c++){var h=s[c];if(h){var u=En()(o).call(o,h);u>=0&&a.push({from:"T"+c,to:"F"+u,card:h})}}for(var l=0;l<this.freeCells.length;l++){var d=this.freeCells[l][0];if(d){var p=En()(o).call(o,d);p>=0&&a.push({card:d,from:"C"+l,to:"F"+p})}}for(var f=0;f<this.freeCells.length;f++){var g=this.freeCells[f][0];if(g)for(var m=!1,v=0;v<this.piles.length;v++)!this.canBePlace(g,1,this.piles[v])||0==this.piles[v].length&&m||(m=0==this.piles[v].length,i.push({card:g,from:"C"+f,to:"T"+v}))}for(var y=0;y<s.length;y++){var T=s[y];if(T)for(var C=0;C<4;C++)if(0==this.freeCells[C].length){i.push({card:T,from:"T"+y,to:"C"+C});break}}return this.piles.forEach((function(e,t){e.forEach((function(a,s){for(var r=e.length-s,o=!1,c=0;c<n.piles.length;c++){var h=n.piles[c];0==s&&a%100==13||c==t||(r==e.length||o)&&0==h.length||n.canBePlace(a,r,h)&&n.isCardValidToMove(a,e)&&(o=0==h.length,i.push({card:a,from:"T"+t,to:"T"+c}))}}))})),{move:Le()(i).call(i,(function(e,t,n){return Qh()(n).call(n,(function(t){return t===e}))===t})),moveToFoundation:a}},t.isCardValidToMove=function(e,t){if(!e)return!1;var n=En()(t).call(t,e);if(-1==n)return!1;if(n==t.length-1)return!0;for(var i=n+1;i<t.length;i++){var a=t[i]%100,s=Math.floor((t[i]-a)/300),r=t[i-1]%100,o=Math.floor((t[i-1]-r)/300);if(a!=r-1||s==o)return!1}return!0},t.canBePlace=function(e,t,n){var i=this.getMaxCardCanMove();if(0==n.length)return t<=i/2;var a=n[n.length-1];return!(!a||!(e/2>120&&a/2<120||e/2<120&&a/2>120)||e%100+1!=a%100)&&t<=i},t.getMaxCardCanMove=function(){var e,t,n=Le()(e=this.freeCells).call(e,(function(e){return 0==e.length})).length,i=Le()(t=this.piles).call(t,(function(e){return 0==e.length})).length;return Math.pow(2,i)*(n+1)},t.getCostByMove=function(e){var t=JSON.parse(M()(this.piles)),n=JSON.parse(M()(this.freeCells)),i=JSON.parse(M()(this.foundations)),a=JSON.parse(M()(e));this.moveAction(e),this.moveSpace.push({action:a,cost:this.getCost()}),this.piles=t,this.freeCells=n,this.foundations=i},t.moveAction=function(e){var t,n=e.card,i=e.from,a=e.to,s=this.piles;"C"==i[0]&&(s=this.freeCells);var r=this.foundations;"C"==a[0]?r=this.freeCells:"T"==a[0]&&(r=this.piles);var o=s[L()(i[1])],c=En()(o).call(o,n);if((t=r[L()(a[1])]).push.apply(t,eu()(o).call(o,c)),this.autoMoveFoundation){var h=this.getMovable().moveToFoundation;h.length>0&&this.moveAction(h[0])}},t.getCost=function(){return this.getMovesEstimate()+this.getNumOfCardsUnsorted()+this.getNumOfCardsInFreeCells()},e}(),Dd=function(){function e(e){this.scene=void 0,this.boardGame=void 0,this.availableHints=void 0,this.outOfMove=void 0,this.hintAnimation=void 0,this.hintClicked=void 0,this.hintByCost=void 0,this.timeToAutoHint=void 0,this.boardGame=e,this.scene=e.scene,this.outOfMove=!0,this.hintClicked=0,this.timeToAutoHint=0,this.hintAnimation=new ol(e),this.hintByCost=new Rd(e)}var t=e.prototype;return t.getAvailableDestinations=function(e){var t=this.boardGame,n=t.piles,i=t.foundations,a=t.freeCells,s=[],r=e.placement;r instanceof Bu&&!r.isLastCard(e)||s.push.apply(s,Le()(i).call(i,(function(t){return t.canBePlace(e)})));var o=Le()(n).call(n,(function(t){var n,i=En()(n=e.placement.cards).call(n,e),a=e.placement.cards.length-i;return t.canBePlace(e,a)}));return s.push.apply(s,o),s.push.apply(s,Le()(a).call(a,(function(t){return t.canBePlace(e)}))),s},t.canHint=function(){return this.findMovable().length>0},t.showHint=function(){var e=(0,r.Z)(l().mark((function e(){var t;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.boardGame.isOutOfMove()){e.next=3;break}return this.boardGame.outOfMove(),e.abrupt("return");case 3:if(this.scene.vibration.performVibrating(20),this.boardGame.isIdle()&&(this.boardGame.boardState=ku.PLAYING),this.boardGame.boardState===ku.PLAYING){e.next=7;break}return e.abrupt("return");case 7:if(this.boardGame.scene.audio.playSound(Ls.Z.HINT),this.hintClicked+=1,this.resetAutoHintTime(),this.hintByCost.updateInfo(),!(t=this.hintByCost.getHint())){e.next=15;break}return this.hintAnimation.showMoveHintAnimation(t.card,t.dest),e.abrupt("return");case 15:this.boardGame.outOfMove();case 16:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),t.findMovable=function(){var e,t,n,i,a,s,r,o=this,c=[],h=this.boardGame,u=De()(e=h.piles).call(e,(function(e){return e.cards[e.cards.length-1]})),l=De()(t=h.piles).call(t,(function(e){var t,n=Qh()(t=e.cards).call(t,(function(e){return e.isFacingUp()}));return e.cards[n]})),d=De()(n=h.foundations).call(n,(function(e){return e.cards[e.cards.length-1]})),p=Le()(i=h.freeCells).call(i,(function(e){return e.isEmpty()})),f=Le()(a=h.freeCells).call(a,(function(e){return e.isFull()})),g=De()(f).call(f,(function(e){return e.cards[0]})),m=De()(d).call(d,(function(e,t){return e?e.getTag()+1:100*Cu[t]+1})),v=x()(s=[]).call(s,g,u),y=D()(v).call(v,(function(e){return e&&e.getTag()%100==1}));y&&c.push(y);for(var T=0;T<v.length;T++){var C=v[T];if(C)En()(m).call(m,C.getTag())>=0&&c.push(C)}var E=De()(r=h.piles).call(r,(function(e){return e.getFacingUpCards()}));g.forEach((function(e){var t;D()(t=h.piles).call(t,(function(t){return t.canBePlace(e,1)}))&&o.isCardValidToMove(e)&&c.push(e)}));for(var A=function(e){var t,n=l[e];if(!n)return"continue";if(n.isKing()&&0==En()(t=h.piles[e].cards).call(t,n))return"continue";if(n){var i,a,s=h.piles[e].cards.length-En()(i=h.piles[e].cards).call(i,n);D()(a=h.piles).call(a,(function(e){return e.canBePlace(n,s)}))&&o.isCardValidToMove(n)&&c.push(n)}},S=0;S<l.length;S++)A(S);if(E.forEach((function(e){e.forEach((function(e,t){var n,i=e.placement.cards.length-t;D()(n=h.piles).call(n,(function(t){return t.canBePlace(e,i)}))&&t>0&&o.isCardValidToMove(e)&&c.push(e)}))})),p.length>0){var b=u[Math.floor(u.length*Math.random())];this.isCardValidToMove(b)&&c.push(b)}return c},t.getNumberOfMovable=function(){this.hintByCost.updateInfo();var e=this.hintByCost.getMovable(),t=e.move,n=e.moveToFoundation;return t.length+n.length},t.isCardValidToMove=function(e){if(!e)return!1;var t=e.placement.cards,n=En()(t).call(t,e);if(-1==n)return!1;if(n==t.length-1)return!0;for(var i=n+1;i<t.length;i++){var a=t[i].getCardValue(),s=t[i].getCardSuit(),r=t[i-1].getCardValue(),o=t[i-1].getCardSuit();if(a!=r-1||s==o)return!1}return!0},t.autoPlayStep=function(){this.hintByCost.updateInfo();var e=this.hintByCost.getHint();e&&(this.boardGame.mover.handleClickOnCard(e.card,e.dest),this.outOfMove=!1)},t.resetAutoHintTime=function(){this.timeToAutoHint=0},t.clear=function(){this.hintClicked=0},t.update=function(e){if(this.boardGame.isPlaying()){this.boardGame.scene.player.getPlayerSettings().autoHints?this.timeToAutoHint+=e:this.timeToAutoHint=0;var t=this.getNumberOfMovable()<=5?1e4:2e4;this.timeToAutoHint>t&&this.showHint()}},e}(),Bd=Dd;function Md(e,t){var n="undefined"!==typeof w()&&k()(e)||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){var n;if(!e)return;if("string"===typeof e)return Nd(e,t);var i=A()(n=Object.prototype.toString.call(e)).call(n,8,-1);"Object"===i&&e.constructor&&(i=e.constructor.name);if("Map"===i||"Set"===i)return b()(e);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return Nd(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var i=0;return function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Nd(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var Gd=Phaser.Input.Events,Fd=Gd.GAMEOBJECT_DOWN,Zd=Gd.DRAG,Ud=Gd.POINTER_UP,zd=Gd.GAME_OUT,Hd=function(){function e(e){var t=this;this.boardGame=void 0,this.undos=void 0,this.picked=void 0,this.dragX=void 0,this.dragY=void 0,this.pickedPlacement=void 0,this.suitExplosive=void 0,this.undoClicked=void 0,this.isDragOutOfCanvas=!1,this.handlePointerDown=function(e,n){if(!t.isPicked()&&n instanceof el){var i;if(n.placement.getname()===hu.Foundation)return;if(!n.getLightOn())return;if(t.boardGame.isOnAutoMoveToFoundation())return;t.boardGame.boardState=ku.PLAYING;var a=n;if(a.isMoving())return;var s=En()(i=a.placement.cards).call(i,a);t.boardGame.hint.isCardValidToMove(a)&&t.pickCard(a.placement,a.placement.cards.length-s)}},this.isDragged=void 0,this.dragPicked=function(e,n,i,a){!t.isDragged&&e.getDistanceX()+e.getDistanceY()<15||(t.isDragged=!0,t.dragX=i,t.dragY=a)},this.handlePointerUp=function(e){if(t.isPicked()){var n=t.picked[0],i=t.findFirstDestination(e,t.picked),a=!1;i?t.movePickedToNewPlacement(i):a=!0;var s=e.upTime-e.downTime<1e3;if(t.isDragOutOfCanvas&&void 0!==e.id&&(t.isDragOutOfCanvas=!1,s=!0),!t.isDragged&&s){if(t.donePick(),t.boardGame.scene.player.getPlayerSettings().tapToMove){if(n.isMoving())return;t.handleClickOnCard(n)}}else t.donePick(a),t.boardGame.updateEligibleFoundationCards(),t.boardGame.updateAllCardLightOn();t.boardGame.hint.resetAutoHintTime()}},this.handlePointerOutOfCanvas=function(e){t.boardGame.isPlaying()&&t.isPicked()&&(t.isDragOutOfCanvas=!0,t.handlePointerUp(e))},this.boardGame=e,this.undos=[],this.picked=[],this.undoClicked=0,this.suitExplosive=new fl(e.scene)}var t=e.prototype;return t.enableInput=function(){var e=this.boardGame.scene;e.input.on(Fd,this.handlePointerDown),e.input.on(Zd,this.dragPicked),e.input.on(Ud,this.handlePointerUp),e.input.on(zd,this.handlePointerOutOfCanvas)},t.disableInput=function(){var e=this.boardGame.scene;e.input.off(Fd,this.handlePointerDown),e.input.off(Zd,this.dragPicked),e.input.off(Ud,this.handlePointerUp),e.input.off(zd,this.handlePointerOutOfCanvas)},t.isPicked=function(){return this.picked.length>0},t.movePickedToNewPlacement=function(e){for(var t,n=this,i=Md(this.picked);!(t=i()).done;){var a=t.value;e.addCard(a,!0),e instanceof Bu&&e.updateCardPosition(e.cards.length)}if(this.pickedPlacement instanceof Bu&&this.pickedPlacement.updateCardPosition(),e instanceof Ld){this.boardGame.increaseScore(10),this.boardGame.isPlaying()&&this.boardGame.scene.audio.playSound("finish"+e.cards.length,{delay:.1});var s=e.getPlacingPosition(0),r=s.x,o=s.y,c=e.cards[0].getTag(),h=(c-c%100)/100-1,u=this.picked[0];this.boardGame.scene.time.delayedCall(400,(function(){n.suitExplosive.explode(h,12,r,o),n.jumpCardOnFoundation(u)}))}else this.boardGame.isPlaying()&&this.boardGame.scene.audio.playSound(Ls.Z.CARD_MOVE);this.undos.push({type:"move",numOfCards:this.picked.length,srcName:this.pickedPlacement.getname(),srcIdx:this.pickedPlacement.getIdx(),destName:e.getname(),destIdx:e.getIdx()}),this.picked=[],this.boardGame.increaseMovesAndSaveBoard(),this.boardGame.updateAfterMove()},t.unMovePickedToPlacement=function(e){for(var t,n=Md(this.picked);!(t=n()).done;){var i=t.value;e.addCard(i,!0),e instanceof Bu&&e.updateCardPosition(e.cards.length),i.setLightOn(!0)}this.pickedPlacement instanceof Ld&&this.boardGame.decreaseScore(10),this.picked=[]},t.pickCard=function(e,t){this.pickedPlacement=e,this.picked=e.pickTopCards(t),this.isDragged=!1},t.donePick=function(e){if(this.isPicked()){for(var t,n=Md(this.picked);!(t=n()).done;){var i=t.value;this.pickedPlacement.addCard(i,this.isDragged)}e&&this.pickedPlacement instanceof Bu&&this.pickedPlacement.updateCardPosition(),this.picked=[],this.isDragged=!1}},t.findFirstDestination=function(e,t){if(1==t.length){var n=this.detectFoundation(e,t[0]),i=this.detectFreeCell(e,t[0]);if(n)return n;if(i)return i}return this.detectPile(e,t[0])},t.detectFoundation=function(e,t){var n,i,a=Le()(n=this.boardGame.foundations).call(n,(function(e){return Phaser.Geom.Intersects.RectangleToRectangle(t.getBounds(),e.slot.getBounds())})).length>0,s=Le()(i=this.boardGame.foundations).call(i,(function(e){return a&&e.canBePlace(t)}));if(2==s.length)return e.worldX-s[0].x<s[1].x-e.worldX?s[0]:s[1];if(1==s.length){if(s[0]==this.pickedPlacement)return;return s[0]}},t.detectFreeCell=function(e,t){var n,i=Le()(n=this.boardGame.freeCells).call(n,(function(e){return Phaser.Geom.Intersects.RectangleToRectangle(t.getBounds(),e.slot.getBounds())&&e.canBePlace(t)}));if(2==i.length)return e.worldX-i[0].x<i[1].x-e.worldX?i[0]:i[1];if(1==i.length){if(i[0]==this.pickedPlacement)return;return i[0]}},t.detectPile=function(e,t){var n,i=this,a=Le()(n=this.boardGame.piles).call(n,(function(e){var n,a=(null==(n=e.getLastCard())?void 0:n.getBounds())||e.slot.getBounds(),s=e!==i.pickedPlacement&&Phaser.Geom.Intersects.RectangleToRectangle(t.getBounds(),a),r=e.canBePlace(t,i.picked.length);return s&&!r&&0===e.cards.length&&i.notifyRule(),s&&r}));return 2==a.length?(e.worldX,a[0].x,a[1].x,e.worldX,a[1]):1==a.length?a[0]:void 0},t.notifyRule=function(){var e=this.boardGame.getNumberOfEmptyFreeCell(),t=this.boardGame.getNumberOfEmptyPile(),n=this.boardGame.getMaxCardCanMoveToEmptyPile();if(this.picked.length>n){var i="With "+e+" empty Free Cell and "+t+" empty\nTableau Column, you can move up to "+n+" cards\nto this Tableau Column";window.game.world.isLandscape()&&(i="With "+e+" empty Free Cell and "+t+" empty Tableau Column\nyou can move up to "+n+" cards to this Tableau Column"),this.boardGame.messageText.show(i,3e3)}},t.getAvailableDestinations=function(){var e=this,t=this.boardGame,n=t.foundations,i=t.freeCells,a=[];1==this.picked.length&&a.push.apply(a,Le()(n).call(n,(function(t){return t!==e.pickedPlacement&&t.canBePlace(e.picked[0])})));var s=this.getPileDestinations();if(a.push.apply(a,s),1==this.picked.length){var r=Le()(i).call(i,(function(t){return t!==e.pickedPlacement&&t.canBePlace(e.picked[0])}));a.push.apply(a,r)}return a},t.getPileDestinations=function(){var e=this,t=this.boardGame.piles,n=Le()(t).call(t,(function(t){return t!==e.pickedPlacement&&t.canBePlace(e.picked[0],e.picked.length)}));return ia()(n).call(n,(function(e,t){return t.cards.length-e.cards.length}))},t.handleClickOnCard=function(e,t){var n;if(!this.isPicked()){var i=En()(n=e.placement.cards).call(n,e);this.pickCard(e.placement,e.placement.cards.length-i);var a=t?[t]:this.getAvailableDestinations();if(0===a.length){this.boardGame.scene.audio.playSound(Ls.Z.NO_MOVE);for(var s,r=Md(this.picked);!(s=r()).done;){s.value.shake()}return this.donePick(),this.boardGame.updateEligibleFoundationCards(),void this.boardGame.updateAllCardLightOn()}var o=this.selectDestination(e,a);this.movePickedToNewPlacement(o),this.donePick()}},t.selectDestination=function(e,t){if(!(e.placement instanceof Bu)||e.placement.cards.length>0)return t[0];for(var n=0;n<t.length;n++){var i=t[n];if(!(i instanceof Bu&&0==i.cards.length))return i}return t[0]},t.moveCardToFoundation=function(e,t){var n=this;e.setLightOn(!0);var i=e.placement.getname(),a=e.placement.getIdx();e.placement.pickTopCards(1),e.placement instanceof Bu&&e.placement.updateCardPosition(),t.addCard(e,!0),this.boardGame.increaseScore(10),(this.boardGame.isPlaying()||this.boardGame.isOnAutoMoveToFoundation())&&(this.boardGame.isOnLastAutoMoveToFoundation||this.boardGame.scene.audio.playSound("finish"+t.cards.length,{delay:.1}));var s=t.getPlacingPosition(0),r=s.x,o=s.y,c=t.cards[0].getTag(),h=(c-c%100)/100-1;this.boardGame.scene.time.delayedCall(400,(function(){n.suitExplosive.explode(h,12,r,o),n.jumpCardOnFoundation(e)}));var u={type:"auto",numOfCards:1,srcName:i,srcIdx:a,destName:t.getname(),destIdx:t.getIdx()};this.undos.push(u),this.boardGame.increaseMovesAndSaveBoard()},t.jumpCardOnFoundation=function(e){if(Qo.instance.getGameMode()===Xo.JOURNEY){var t=this.boardGame.scene.journey.getCurrentMission();if("move-same-suit-cards-to-foundation"===t.type){var n=t.mainMission.cardStats,i=void 0===n?[]:n;e.isMatchWithJourneyMissionCardStats(i)&&e.jump()}}},t.moveCardToPlacement=function(e,t){e.setLightOn(!0);var n=e.placement.getname(),i=e.placement.getIdx();e.placement.pickTopCards(1),e.placement instanceof Bu&&e.placement.updateCardPosition(),t.addCard(e,!0),(this.boardGame.isPlaying()||this.boardGame.isOnAutoMoveToFoundation())&&(this.boardGame.isOnLastAutoMoveToFoundation||this.boardGame.scene.audio.playSound(Ls.Z.CARD_MOVE));var a={type:"auto",numOfCards:1,srcName:n,srcIdx:i,destName:t.getname(),destIdx:t.getIdx()};this.undos.push(a),this.boardGame.increaseMovesAndSaveBoard()},t.isCanUndo=function(){return this.boardGame.boardState!==ku.GAME_OVER&&0!=this.undos.length},t.undo=function(){if(this.boardGame.boardState!==ku.GAME_OVER){var e=this.undos.pop();if(e){this.boardGame.scene.audio.playSound(Ls.Z.UNDO),this.boardGame.boardState=ku.PLAYING,this.undoClicked+=1;var t=e.numOfCards,n=e.srcName,i=e.srcIdx,a=e.destName,s=e.destIdx,r=this.getPlacement(n,i),o=this.getPlacement(a,s);"move"===e.type?(this.pickCard(o,t),this.unMovePickedToPlacement(r),this.donePick(),this.boardGame.hint.outOfMove=!1,this.boardGame.increaseMovesAndSaveBoard(),this.boardGame.updateEligibleFoundationCards(),this.boardGame.updateAllCardLightOn(),this.boardGame.decreaseScore(5)):"auto"===e.type&&(this.pickCard(o,t),this.unMovePickedToPlacement(r),this.donePick(),this.boardGame.hint.outOfMove=!1,this.undo()),o instanceof Bu&&o.updateCardPosition(),this.boardGame.checkAutoCompleted()}}},t.clear=function(){this.undos=[],this.undoClicked=0},t.update=function(){if(this.isDragged)for(var e=0;e<this.picked.length;e++){var t=this.picked[e];t.setPosition(this.dragX,this.dragY+e*this.boardGame.getVerticalSpacePile()),t.scene.gameplay.cardsLayer.bringToTop(t),t.scene.gameplay.cardsLayer.bringToTop(t.eligibleFoundationGlow)}},t.getPlacement=function(e,t){if(e===hu.Stock)return this.boardGame.stock;if(e===hu.Pile)return this.boardGame.piles[t];if(e===hu.Foundation)return this.boardGame.foundations[t];if(e===hu.FreeCell)return this.boardGame.freeCells[t];throw new Error("Placement not found!!!")},t.getPicked=function(){return this.picked},t.getPickedPlacement=function(){return this.pickedPlacement},e}(),Wd=Hd,Yd=function(e){function t(t){var n;return(n=e.call(this,t)||this).setName(hu.Stock),n.slot.setVisible(!1),n}(0,o.Z)(t,e);var n=t.prototype;return n.show=function(){e.prototype.show.call(this),this.slot.kill()},n.hide=function(){e.prototype.hide.call(this)},n.setPosition=function(t,n){e.prototype.setPosition.call(this,t,n)},n.addCard=function(t,n){e.prototype.addCard.call(this,t,n),t.setFacingWithFlippingAnim(!1),t.disableInteractive()},n.canBePlace=function(e){return!1},n.clear=function(){this.cards=[]},n.update=function(t){e.prototype.update.call(this,t)},t}(ou),Kd=Yd,Vd=function(e){function t(t){var n;return(n=e.call(this,t)||this).boardGame=void 0,n.boardGame=t,n}return(0,o.Z)(t,e),t.prototype.alignCurrentDeck=function(){for(var e=this.boardGame,t=e.stock,n=e.freeCells,i=e.foundations,a=0;a<t.cards.length;a++){var s=t.getPlacingPosition(a),r=s.x,o=s.y;t.cards[a].setPosition(r,o)}for(var c=0;c<n.length;c++)for(var h=n[c],u=0;u<h.cards.length;u++){var l=h.getPlacingPosition(u),d=l.x,p=l.y;h.cards[u].setPosition(d,p)}for(var f=0;f<i.length;f++)for(var g=i[f],m=0;m<g.cards.length;m++){var v=g.getPlacingPosition(m),y=v.x,T=v.y;g.cards[m].setPosition(y,T)}},t}(Rl),jd=Vd,Jd=function(e){function t(t){var n;return(n=e.call(this,t)||this).setName(hu.FreeCell),n}(0,o.Z)(t,e);var n=t.prototype;return n.setPosition=function(t,n){e.prototype.setPosition.call(this,t,n)},n.canBePlace=function(e){return!this.isFull()},n.isFull=function(){return 1===this.cards.length},t}(ou),Xd=n(656),qd=n(381),Qd=n.n(qd);function $d(e,t){var n="undefined"!==typeof w()&&k()(e)||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){var n;if(!e)return;if("string"===typeof e)return ep(e,t);var i=A()(n=Object.prototype.toString.call(e)).call(n,8,-1);"Object"===i&&e.constructor&&(i=e.constructor.name);if("Map"===i||"Set"===i)return b()(e);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return ep(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var i=0;return function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function ep(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}!function(){var e,t,n;(null!=(e=Path2D.prototype).roundRect||(e.roundRect=i),Qd().CanvasRenderingContext2D)&&(null!=(t=Qd().CanvasRenderingContext2D.prototype).roundRect||(t.roundRect=i));Qd().OffscreenCanvasRenderingContext2D&&(null!=(n=Qd().OffscreenCanvasRenderingContext2D.prototype).roundRect||(n.roundRect=i));function i(e,t,n,i,s){if([e,t,n,i].every((function(e){return Number.isFinite(e)}))){var r,o,c,h;if(4===(s=function(e){var t=typeof e;if("undefined"===t||null===e)return[0];if("function"===t)return[NaN];if("object"===t){var n,i;return"function"===typeof k()(e)?De()(n=x()(i=[]).call(i,e)).call(n,(function(e){var t=typeof e;return"undefined"===t||null===e?0:"function"===t?NaN:"object"===t?d(e):p(e)})):[d(e)]}return[p(e)]}(s)).length)r=f(s[0]),o=f(s[1]),c=f(s[2]),h=f(s[3]);else if(3===s.length)r=f(s[0]),o=f(s[1]),h=f(s[1]),c=f(s[2]);else if(2===s.length)r=f(s[0]),c=f(s[0]),o=f(s[1]),h=f(s[1]);else{if(1!==s.length)throw new RangeError(a(this)+" "+s.length+" is not a valid size for radii sequence.");r=f(s[0]),o=f(s[0]),c=f(s[0]),h=f(s[0])}var u=[r,o,c,h],l=D()(u).call(u,(function(e){var t=e.x,n=e.y;return t<0||n<0}));(null==l?void 0:l.x)<0?l.x:null==l||l.y;if(!u.some((function(e){var t=e.x,n=e.y;return!Number.isFinite(t)||!Number.isFinite(n)}))){if(l)throw new RangeError(a(this)+" Radius value "+l+" is negative.");!function(e){var t=e[0],a=e[1],s=e[2],r=e[3],o=[Math.abs(n)/(t.x+a.x),Math.abs(i)/(a.y+s.y),Math.abs(n)/(s.x+r.x),Math.abs(i)/(t.y+r.y)],c=Math.min.apply(Math,o);if(c<=1)for(var h,u=$d(e);!(h=u()).done;){var l=h.value;l.x*=c,l.y*=c}}(u),n<0&&i<0?(this.moveTo(e-r.x,t),this.ellipse(e+n+o.x,t-o.y,o.x,o.y,0,1.5*-Math.PI,-Math.PI),this.ellipse(e+n+c.x,t+i+c.y,c.x,c.y,0,-Math.PI,-Math.PI/2),this.ellipse(e-h.x,t+i+h.y,h.x,h.y,0,-Math.PI/2,0),this.ellipse(e-r.x,t-r.y,r.x,r.y,0,0,-Math.PI/2)):n<0?(this.moveTo(e-r.x,t),this.ellipse(e+n+o.x,t+o.y,o.x,o.y,0,-Math.PI/2,-Math.PI,1),this.ellipse(e+n+c.x,t+i-c.y,c.x,c.y,0,-Math.PI,1.5*-Math.PI,1),this.ellipse(e-h.x,t+i-h.y,h.x,h.y,0,Math.PI/2,0,1),this.ellipse(e-r.x,t+r.y,r.x,r.y,0,0,-Math.PI/2,1)):i<0?(this.moveTo(e+r.x,t),this.ellipse(e+n-o.x,t-o.y,o.x,o.y,0,Math.PI/2,0,1),this.ellipse(e+n-c.x,t+i+c.y,c.x,c.y,0,0,-Math.PI/2,1),this.ellipse(e+h.x,t+i+h.y,h.x,h.y,0,-Math.PI/2,-Math.PI,1),this.ellipse(e+r.x,t-r.y,r.x,r.y,0,-Math.PI,1.5*-Math.PI,1)):(this.moveTo(e+r.x,t),this.ellipse(e+n-o.x,t+o.y,o.x,o.y,0,-Math.PI/2,0),this.ellipse(e+n-c.x,t+i-c.y,c.x,c.y,0,0,Math.PI/2),this.ellipse(e+h.x,t+i-h.y,h.x,h.y,0,Math.PI/2,Math.PI),this.ellipse(e+r.x,t+r.y,r.x,r.y,0,Math.PI,1.5*Math.PI)),this.closePath(),this.moveTo(e,t)}}function d(e){return{x:e.x,y:e.y,z:e.z,w:e.w}}function p(e){return+e}function f(e){var t,n,i=p(e);return Number.isFinite(i)?{x:i,y:i}:Object(e)===e?{x:p(null!=(t=e.x)?t:0),y:p(null!=(n=e.y)?n:0)}:{x:NaN,y:NaN}}}function a(e){return"Failed to execute 'roundRect' on '"+function(e){return Object(e)===e&&e instanceof Path2D?"Path2D":e instanceof(null==Qd()?void 0:Qd().CanvasRenderingContext2D)?"CanvasRenderingContext2D":e instanceof(null==Qd()?void 0:Qd().OffscreenCanvasRenderingContext2D)?"OffscreenCanvasRenderingContext2D":(null==e?void 0:e.constructor.name)||e}(e)+"':"}}();var tp=function(e){function t(n,i,a,s,r,o,c,h){var u;return(u=e.call(this,n,i,a)||this).radius=void 0,u.radiusTL=void 0,u.radiusTR=void 0,u.radiusBL=void 0,u.radiusBR=void 0,u.borderWidth=void 0,u.background=void 0,u.stroke=void 0,u.dpr=void 0,u.setSize(s,r),u.setRadius(o),u.dpr=n.world.getPixelRatio(),u.drawBackground(),u.createBackground(),u.setFillStyle(c),void 0!==h&&u.setAlpha(h),t.registered||n.game.events.on(Phaser.Core.Events.PRE_RENDER,t.UpdateFrame),u}(0,o.Z)(t,e);var n=t.prototype;return n.resize=function(e,t){this.setSize(e,t);var n=this.dpr;if(this.background.setSize(e*n,t*n),this.background instanceof Phaser.GameObjects.Image&&this.background.setWorldSize(e,t),this.stroke){var i=this.borderWidth;this.stroke.setSize((e+2*i)*n,(t+2*i)*n),this.stroke instanceof Phaser.GameObjects.Image&&this.stroke.setWorldSize(e+2*i,t+2*i)}return this},n.setFillStyle=function(e,t){return void 0===e?this.background.setTint(16777215):this.background.setTint(e),void 0!==t&&this.background.setAlpha(t),this},n.setOrigin=function(e,t){return this},n.setRadius=function(e){return void 0===e&&(e=0),"number"===typeof e&&(e={tl:e,tr:e,bl:e,br:e}),this.radiusTL=e.tl||0,this.radiusTR=e.tr||0,this.radiusBL=e.bl||0,this.radiusBR=e.br||0,this.radius=this.radiusTL,this},n.setRadiusTL=function(e){return this.radiusTL=e,this.radius=e,this},n.setRadiusTR=function(e){return this.radiusTR=e,this},n.setRadiusBL=function(e){return this.radiusBL=e,this},n.setRadiusBR=function(e){return this.radiusBR=e,this},n.setStrokeStyle=function(e,t){return this.borderWidth=e,this.drawStroke(),this.createStroke(),void 0!==t&&this.stroke.setTint(t),this},n.createBackground=function(){var e=this.scene,n=t.textureKey,i=this.getFrameBackgroundKey(),a=this.dpr,s=this.width*a,r=this.height*a,o=Math.max(this.radiusTL,this.radiusBL)*a,c=Math.max(this.radiusTR,this.radiusBR)*a,h=Math.max(this.radiusTL,this.radiusTR)*a,u=Math.max(this.radiusBL,this.radiusBR)*a;o||c||h||u?(this.background=e.add.nineslice(0,0,n,i,s,r,o,c,h,u),this.background.setOrigin(.5,.5),this.background.setScale(1/a),t.nineSliceRegistered.push(this.background)):(this.background=e.add.image(0,0,n,i),this.background.setOrigin(.5,.5),this.background.setWorldSize(s/a,r/a)),this.add(this.background)},n.createStroke=function(){var e=this.scene,n=t.strokeTextureKey,i=this.getFrameStrokeKey(),a=this.borderWidth,s=this.dpr,r=(this.width+2*a)*s,o=(this.height+2*a)*s,c=(Math.max(this.radiusTL,this.radiusBL)+a)*s,h=(Math.max(this.radiusTR,this.radiusBR)+a)*s,u=(Math.max(this.radiusTL,this.radiusTR)+a)*s,l=(Math.max(this.radiusBL,this.radiusBR)+a)*s;c||h||u||l?this.stroke?(this.stroke.setTexture(n,i),this.stroke instanceof Phaser.GameObjects.Image||this.stroke.setSlices(r,o,c,h,u,l)):(this.stroke=e.add.nineslice(0,0,n,i,r,o,c,h,u,l),this.stroke.setOrigin(.5,.5),this.stroke.setScale(1/s),this.add(this.stroke),t.nineSliceRegistered.push(this.stroke)):(this.stroke=e.add.image(0,0,n,i),this.stroke.setOrigin(.5,.5),this.stroke.setWorldSize(r/s,o/s))},n.drawBackground=function(){var e=this.scene,n=t.textureKey,i=this.getFrameBackgroundKey(),a=[this.radiusTL,this.radiusTR,this.radiusBR,this.radiusBL],s=this.dpr;t.CreateFrame({scene:e,key:n,frame:i,radius:a,dpr:s})},n.getFrameBackgroundKey=function(){return"round-rectangle-"+this.radiusTL+"-"+this.radiusTR+"-"+this.radiusBL+"-"+this.radiusBR},n.drawStroke=function(){var e=this.scene,n=t.strokeTextureKey,i=this.getFrameStrokeKey(),a=[this.radiusTL,this.radiusTR,this.radiusBR,this.radiusBL],s=this.dpr,r=this.borderWidth;t.CreateFrame({scene:e,key:n,frame:i,radius:a,dpr:s,stroke:r})},n.getFrameStrokeKey=function(){return"stroke-round-rectangle-"+this.radiusTL+"-"+this.radiusTR+"-"+this.radiusBL+"-"+this.radiusBR},t.CreateFrame=function(e){var n=e.scene,i=e.key,a=e.frame,s=(e.radius,e.stroke),r=e.dpr,o=this.frameWidth*r,c=this.frameHeight*r,h=1e3*r,u=1e3*r,l=Math.max(o,c)/(Math.floor(h/o)-1),d=Math.floor(h/(o+l)),p=Math.floor(u/(c+l)),f=n.textures.get(i);f.key!==i&&(f=n.textures.createCanvas(i,1,1));var g=f.frameTotal-1;if(g>=d*p)return!1;if(f.has(a))return!1;void 0===t.payloads[i]&&(t.payloads[i]=[]),t.payloads[i].push(e);var m=l/2+g%d*(o+l),v=l/2+Math.floor(g/d)*(c+l);return void 0!==s?f.add(a,0,m-s*r,v-s*r,o+2*s*r,c+2*s*r):(f.update(),f.add(a,0,m,v,o,c)),t.dirty[i]=!0,!0},t.UpdateFrame=function(){var e=window.game.world.getPixelRatio(),n=t.frameWidth*e,i=t.frameHeight*e,a=1e3*e,s=1e3*e,r=Math.max(n,i)/(Math.floor(a/n)-1),o=Math.floor(a/(n+r));Math.floor(s/(i+r));return ae()(t.payloads).forEach((function(e){if(!t.dirty[e])return!1;var s=window.game.textures.get(e);if(s.key===e){var c=t.payloads[e],h=c.length>o?a:(n+r)*c.length,u=Math.ceil(c.length/o)*(i+r),l=s.source[0];l.width=h,l.height=u;var d=s.getSourceImage(),p=d.getContext("2d");if(p){d.width=h,d.height=u;for(var f=function(e){var t=c[e],a=(t.scene,t.key,t.frame),h=t.radius,u=t.stroke,l=t.dpr,d=e,f="number"===typeof h?h*h:De()(h).call(h,(function(e){return e*l})),g=r/2+d%o*(n+r),m=r/2+Math.floor(d/o)*(i+r);p.beginPath(),p.roundRect(g,m,n,i,f),void 0!==u?(p.strokeStyle="#ffffff",p.lineWidth=u*l,p.stroke(),s.get(a).setSize(n+2*u*l,i+2*u*l,g-u*l,m-u*l)):(p.fillStyle="#ffffff",p.lineJoin="round",on()(p).call(p),s.get(a).setSize(n,i,g,m))},g=0;g<c.length;g++)f(g);s.update(),t.dirty[e]=!1,Ce(d.toDataURL(),.25)}}})),t.nineSliceRegistered.forEach((function(e){e.updateUVs()})),!0},t}(Phaser.GameObjects.Container);tp.textureKey="round-rectangle",tp.strokeTextureKey="round-rectangle-strokes",tp.frameWidth=128,tp.frameHeight=128,tp.dirty={},tp.payloads={},tp.registered=!1,tp.nineSliceRegistered=[];var np=tp,ip=function(){function e(e){this.messageText=void 0,this.scene=void 0,this.openAnimation=void 0,this.closeAnimation=void 0,this.closeTimerEvent=void 0,this.background=void 0,this.scene=e,this.createBackground(),this.createMessageText()}var t=e.prototype;return t.createBackground=function(){var e=new np(this.scene,0,0,200,100,8,2039583,.7);e.setVisible(!1).setDepth(Dn.Z.MESSAGE),this.scene.add.existing(e),this.background=e},t.createMessageText=function(){this.messageText=this.scene.add.bitmapText(0,0,Rc.Z.PRIMARY.KEY,"messageText",this.scene.fontSize(15)).setOrigin(.5,.5).setVisible(!1).setDepth(Dn.Z.MESSAGE),this.messageText.setCenterAlign()},t.setPosition=function(e,t){this.messageText.setPosition(e,t)},t.show=function(e,t){var n,i,a,s,r,o=this;this.messageText.setText(e),this.messageText.setVisible(!0),this.background.resize(this.messageText.width+10,this.messageText.height+10),this.background.x=this.messageText.x,this.background.y=this.messageText.y,this.background.setVisible(!0),null==(n=this.openAnimation)||n.stop(),null==(i=this.openAnimation)||i.remove(),null==(a=this.closeAnimation)||a.stop(),null==(s=this.closeAnimation)||s.remove(),this.openAnimation=new Xd.Z({targets:[this.messageText,this.background],props:{scale:{getStart:function(e){return e.scale-.3},getEnd:function(e){return e.scale}}}}),this.openAnimation.play(),null==(r=this.closeTimerEvent)||r.remove(),t>0&&(this.closeTimerEvent=this.scene.time.addEvent({delay:t,callback:function(){var e,t;o.messageText.visible&&(null==(e=o.closeAnimation)||e.stop(),null==(t=o.closeAnimation)||t.remove(),o.closeAnimation=new Xd.Z({targets:[o.messageText,o.background],props:{scale:{getStart:function(e){return e.scale},getEnd:function(e){return 0}},alpha:0},onComplete:function(){o.messageText.setVisible(!1),o.background.setVisible(!1),o.messageText.setScale(1),o.background.setScale(1),o.messageText.setAlpha(1),o.background.setAlpha(.7)}}),o.closeAnimation.play())}}))},e}(),ap=ip,sp=function(){function e(e,t,n){var i=this;this.piles=void 0,this.freeCells=void 0,this.foundations=void 0,this.piles=[],this.foundations=[],this.freeCells=[];for(var a=0;a<8;a++)this.piles.push([]);for(var s=0;s<4;s++)this.foundations.push([]),this.freeCells.push([]);n.forEach((function(e,t){return i.foundations[t]=e.getAllCards()})),e.forEach((function(e,t){return i.piles[t]=e.getAllCards()})),t.forEach((function(e,t){return i.freeCells[t]=e.getAllCards()}))}var t=e.prototype;return t.isCanSmartAutoComplete=function(e){return void 0===e&&(e=3),!(this.countUnsortedCard()>e)&&(!!this.moveAllValidCardToFoundation()||this.compareUnsortedCardAndEmptyPlacement())},t.compareUnsortedCardAndEmptyPlacement=function(){var e=this.countEmptyFreecellAndPile();return this.countUnsortedCard()<=e},t.countEmptyFreecellAndPile=function(){var e,t,n=Le()(e=this.freeCells).call(e,(function(e){return 0==e.length})),i=Le()(t=this.piles).call(t,(function(e){return 0==e.length}));return n.length+i.length},t.countUnsortedCard=function(){var e=this,t=0;return this.piles.forEach((function(n){var i=e.countUnsortedCardInPile(n);t+=i})),t},t.countUnsortedCardInPile=function(e){if(e.length<=1)return 0;for(var t=0;t<e.length-1;t++){if(e[t]%100<e[t+1]%100)return e.length-t-1}return 0},t.moveAllValidCardToFoundation=function(){if(this.isGameWon())return!0;var e=this.findMoveToFoundationMove();if(e){var t=this.getAvailableDestinations(e);return!!t&&(this.moveCardToFoundation(e,t),this.moveAllValidCardToFoundation())}return!1},t.getAvailableDestinations=function(e){var t=this.foundations,n=Le()(t).call(t,(function(t,n){return(e-e%100)/100==Cu[n]}));return n.length>0?n[0]:void 0},t.isGameWon=function(){var e;return!D()(e=this.foundations).call(e,(function(e){return!(13===e.length)}))},t.moveCardToFoundation=function(e,t){this.pickTopCard(e),t.push(e)},t.pickTopCard=function(e){this.freeCells.forEach((function(t){be()(t).call(t,e)&&eu()(t).call(t,t.length-1,1)})),this.piles.forEach((function(t){be()(t).call(t,e)&&eu()(t).call(t,t.length-1,1)}))},t.findMoveToFoundationMove=function(){var e,t,n,i,a=Le()(e=this.freeCells).call(e,(function(e){return 1===e.length})),s=De()(a).call(a,(function(e){return e[0]})),r=De()(t=this.piles).call(t,(function(e){return e[e.length-1]})),o=x()(n=[]).call(n,s,r),c=[],h=D()(o).call(o,(function(e){return e&&e%100==1}));h&&c.push(h);for(var u=De()(i=this.foundations).call(i,(function(e){return e[e.length-1]})),l=De()(u).call(u,(function(e,t){return e?e+1:100*Cu[t]+1})),d=0;d<o.length;d++){var p=o[d];if(p)En()(l).call(l,p)>=0&&c.push(p)}return c.length>0?c[0]:void 0},e}(),rp=sp,op=n(421),cp=n.n(op),hp=function(e){var t=[];return e.split("").forEach((function(e){var n=e.charCodeAt(0);n>=97&&n<=107&&t.push(n-97)})),L()(t.join(""))},up=[201,202,203,204,205,206,207,208,209,210,211,212,213,301,302,303,304,305,306,307,308,309,310,311,312,313,401,402,403,404,405,406,407,408,409,410,411,412,413,101,102,103,104,105,106,107,108,109,110,111,112,113],lp=function(){function e(){this.strSeed=void 0,this.intSeed=void 0}var t=e.prototype;return t.generateSeed=function(){var e=function(e,t){var n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789*#%&!",i="",a=e;void 0!=t&&(a-=t.length,i+=t);for(var s=0;s<a;s++){var r=Math.floor(67*Math.random());i+=n.charAt(r)}return i}(10);return e},t.shuffle=function(e){var t=String(hp(e));if(this.isStandardSeed(t))return this.mapSuitFromStandardDealToGame(Number(t));for(var n=this.getOriginalSeed(t),i=[],a=0;a<n.length;){var s=A()(n).call(n,a,a+3),r=cp()(s),o=En()(up).call(up,r);i.push(o),a+=3}return i},t.isStandardSeed=function(e){return e.length<=10},t.isStandardSeedValid=function(e){if(!this.isStandardSeed(e))return!1;var t,n=Number(e);if(!(n&&n>=1))return!1;if(52!=(t=this.mapSuitFromStandardDealToGame(n)).length)return!1;for(var i=ia()(t).call(t,(function(e,t){return e-t})),a=0;a<52;a++)if(a!=i[a])return!1;return!0},t.mapSuitFromStandardDealToGame=function(e){for(var t,n=this.shuffleByStandardNumberedDeal(e),i=on()(t=new Array(52)).call(t,0),a=0;a<i.length;a++){var s=n[a]%4,r=Math.floor(n[a]/4);switch(s){case 0:i[a]=0+r;break;case 1:i[a]=13+r;break;case 2:i[a]=26+r;break;case 3:i[a]=39+r;break;default:return[]}}return i},t.shuffleByStandardNumberedDeal=function(e){for(var t,n,i=De()(t=on()(n=new Array(52)).call(n,0)).call(t,(function(e,t){return t})),a=e,s=0;s<i.length;++s){var r=i.length-s;a=(214013*a+2531011)%Math.pow(2,32);var o=Math.floor(a/Math.pow(2,16))%Math.pow(2,15),c=void 0;c=e<Math.pow(2,31)?o%r:(o+Math.pow(2,15))%r;var h=[i[r-1],i[c]];i[c]=h[0],i[r-1]=h[1]}return i},t.shuffles=function(e,t){if(this.setSeed(t)){for(var n=A()(e).call(e,0),i=n.length,a=this.genMap(i),s=i-1;s>0;s--)n[s]=eu()(n).call(n,a[i-1-s],1,n[s])[0];return n}return e},t.genMap=function(e){for(var t=new Array(e),n=0;n<e;n++)t[n]=(this.intSeed=(9301*this.intSeed+49297)%233280)/233280*e|0;return t=this.modifyIfNoZero(t)},t.modifyIfNoZero=function(e){for(var t=!1,n=0;n<e.length;n++)0===e[n]&&(t=!0);return!1===t&&(e[e[e.length-1]]=0),e},t.setSeed=function(e){var t,n=De()(t=String(this.strSeed=e).split("")).call(t,(function(e){return e.charCodeAt(0)})).join("");return this.intSeed=Number(n),!0},t.getOriginalSeed=function(e){for(var t="",n="abcdefghijklm",i="nopqrstuvwxyz",a="ABCDEFGHIJKLM",s="NOPQRSTUVWXYZ",r=0;r<e.length;r++){var o=e[r],c=En()(n).call(n,o);-1==c?-1==(c=En()(i).call(i,o))?-1==(c=En()(a).call(a,o))?-1==(c=En()(s).call(s,o))||(t+=(400+c+1).toString()):t+=(300+c+1).toString():t+=(200+c+1).toString():t+=(100+c+1).toString()}return t},e}(),dp=lp,pp=Gn.Z.GAMEPLAY_DEFAULT,fp=pp.KEY,gp=pp.FRAME,mp=function(e){function t(t){var n;(n=e.call(this,t)||this).shuffler=void 0,n.deck=void 0,n.stock=void 0,n.piles=void 0,n.foundations=void 0,n.freeCells=void 0,n.hint=void 0,n.mover=void 0,n.messageText=void 0,n.isOnLastAutoMoveToFoundation=void 0,n.boundNumberOfCards=void 0,n.levelProgress=void 0,n.seedText=void 0,n.gameType=is.Z.FREE_CELL,n.shuffler=new dp,n.deck=new jd((0,As.Z)(n)),n.stock=new Kd((0,As.Z)(n)),n.piles=[],n.foundations=[],n.freeCells=[],n.levelProgress=0,n.messageText=new ap(n.scene),n.mover=new Wd((0,As.Z)(n)),n.hint=new Bd((0,As.Z)(n));for(var i=0;i<xr.NUMBER_OF_PILE;i++){var a=new Bu((0,As.Z)(n));a.setIdx(i),n.piles.push(a)}for(var s=0;s<xr.NUMBER_OF_TARGET;s++){var r=new Ld((0,As.Z)(n),Cu[s]);r.setIdx(s),n.foundations.push(r)}for(var o=0;o<xr.NUMBER_OF_FREECELL;o++){var c=new Jd((0,As.Z)(n));c.setIdx(o),n.freeCells.push(c)}return n.alignBoard(),n.canAutoComplete=!1,n.isOnLastAutoMoveToFoundation=!1,n.boardState=ku.NONE,n.listenEvents(),n.createAutoWinButton(),n.deck.init(),n}(0,o.Z)(t,e);var n=t.prototype;return n.getCurrentBoard=function(){var e,t,n,i,a={seed:this.gameplay.getSeed(),freeCells:De()(e=this.freeCells).call(e,(function(e){var t;return De()(t=e.cards).call(t,(function(e){return ud(e.getTag())}))})),piles:De()(t=this.piles).call(t,(function(e){var t;return De()(t=e.cards).call(t,(function(e){return ud(e.getTag())}))})),foundations:De()(n=this.foundations).call(n,(function(e){var t;return De()(t=e.cards).call(t,(function(e){return ud(e.getTag())}))})),score:this.getScore(),time:this.getTime(),moves:this.getMoves(),movesData:De()(i=this.mover.undos).call(i,(function(e){return(0,s.Z)({},e)})),level:1,updatedAt:(new Date).getTime()};return Phaser.Utils.Objects.DeepCopy(a)},n.show=function(){var e;x()(e=[]).call(e,this.piles,this.foundations,[this.stock],this.freeCells).forEach((function(e){return e.show()}));var t=this.scene.player.getPlayerSettings(),n=t.autoMoveToFoundation,i=t.autoComplete;!n&&i&&this.canAutoComplete&&this.showAutoCompleteButton(!0),this.updateHighlightCards(),this.debugButtons.forEach((function(e){e.revive(),e.setDisabled(!1)})),this.seedText&&this.seedText.revive()},n.hide=function(){var t;e.prototype.hide.call(this),x()(t=[]).call(t,this.piles,this.foundations,[this.stock],this.freeCells).forEach((function(e){return e.hide()})),this.seedText&&this.seedText.kill()},n.getGameOptions=function(){return{}},n.getLevelProgress=function(){return this.levelProgress},n.resetLevelProgress=function(){this.levelProgress=0},n.handleAutoCompleteClick=function(){var e=this;this.autoCompleteBtn.kill(),this.mover.disableInput(),this.boardState=ku.AUTO_COMPLETING,this.scene.audio.playSound(Ls.Z.AUTO_COMPLETE),this.removeAllCardsGlow(),this.scene.time.delayedCall(100,(function(){e.autoComplete()}))},n.increaseScore=function(e){var t=this;this.score+=e,this.updateScoreTimer&&!this.updateScoreTimer.hasDispatched||(this.updateScoreTimer=this.scene.time.delayedCall(500,(function(){t.scene.storage.dispatch(jo({score:t.score,time:t.time,moves:t.moves}))})))},n.decreaseScore=function(e){this.score=Math.max(0,this.score-e)},n.getScore=function(){return this.score},n.getTime=function(){return Math.round(this.time)},n.getMoves=function(){return this.moves},n.listenEvents=function(){var e=this;this.scene.events.on("settings-changed",(function(t){e.gameType==Rr.gameType&&(t===ss.autoMoveToFoundation&&e.updateAutoMoveToFoundation(),t==ss.autoComplete&&e.updateAutoComplete(),t===ss.highlightLowCards&&e.updateHighlightCards(),t==ss.leftHanded&&e.gameType==Rr.gameType&&e.alignBoard())}))},n.updateHighlightCards=function(){this.scene.player.getPlayerSettings().highlightLowCards?this.updateEligibleFoundationCards(!1):this.removeAllCardsGlow()},n.updateAutoComplete=function(){this.scene.player.getPlayerSettings().autoComplete?this.checkAutoCompleted():(this.canAutoComplete=!1,this.autoCompleteBtn.kill())},n.updateAutoMoveToFoundation=function(){(this.isPlaying()||this.isOnAutoMoveToFoundation()||this.isIdle())&&(this.scene.player.getPlayerSettings().autoMoveToFoundation?this.canAutoComplete&&(this.canAutoComplete=!1,this.autoCompleteBtn.kill()):(this.isOnAutoMoveToFoundation()&&(this.boardState=ku.IDLE),this.checkAutoCompleted()))},n.alignBoard=function(){var e=Pr(is.Z.FREE_CELL),t=this.scene.world.getWorldSize(),n=(t.width,t.height),i=this.scene.ads.getBannerHeight(),a=this.scene.world.getWorldSize().width/2,s=xr.FOUNDATION_Y+30*e,r=this.getHorizontalPileSpace(),o=this.scene.world.isLandscape()?2:2.04,c=this.scene.world.isLandscape()?.985*r:r,h=this.scene.player.getPlayerSettings().leftHanded,u=this.isLeftHandedAlign!=h;this.isLeftHandedAlign=h,h?(this.placeCenter(this.foundations,a,s,r,-o,c),this.placeCenter(this.freeCells,a,s,-r,-o,-c)):(this.placeCenter(this.foundations,a,s,-r,-o,-c),this.placeCenter(this.freeCells,a,s,r,-o,c));var l=this.scene.world.isLandscape()?n-170:n-i-170;this.placeCenter([this.stock],a,Math.min(s+400,l),r,3);var d=xr.SPACE_BETWEEN_PILE_AND_FOUNDATION*e,p=this.scene.world.isLandscape()?r:1.01*r;this.placeCenter(this.piles,a,s+d,p),u?this.deck.alignCurrentDeck():this.deck.align();var f=this.scene.footer.y;this.messageText.setPosition(a,f-70),this.boundNumberOfCards=this.getBoundNumberOfCards()},n.getMaxHeightTableau=function(){var e=Qo.instance.isChallengeMode()?55:0,t=this.scene.footer;return t.y-t.height/2-this.piles[0].y-xr.CARD_HEIGHT/2-e},n.getBoundNumberOfCards=function(){var e=this.getMaxHeightTableau(),t=xr.CARD_HEIGHT,n=xr.VERTICAL_PILE_SPACE;return Math.floor((e-t/2)/n)+1},n.getHorizontalPileSpace=function(){var e=this.scene.world.isLandscape()?1.2:1,t=(this.scene.gameZone.width-xr.CARD_WIDTH*xr.NUMBER_OF_PILE)/(xr.NUMBER_OF_PILE+1),n=Math.floor(t)+xr.CARD_WIDTH;return Math.min(n,xr.MAX_HORIZONTAL_PILE_SPACE*e)},n.placeCenter=function(e,t,n,i,a,s){void 0===a&&(a=0),void 0===s&&(s=0),s=s||i;for(var r=e.length,o=t-(r/2-.5-a)*i,c=0;c<r;c++)e[c].setPosition(o+c*s,n)},n.startGame=function(){var e=(0,r.Z)(l().mark((function e(t){var n,i,a,s,r,o,c,h,u;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isDealing()){e.next=2;break}return e.abrupt("return");case 2:return n=t.seed,this.scene.gameplay.tryCreateShortcut(),this.scene.gameplay.startGameCount+=1,this.updateSeedDebugText(1,n),this.clearOldBoard(),this.resetLevelProgress(),this.scene.events.emit(Lr.GAME_START),this.logStartGameEvent(),this.boardState=ku.DEALING,i=this.shuffler.shuffle(n),(a=this.deck.getDeck(i)).forEach((function(e){return e.revive()})),s=GameCore.Configs.Gameplay.SkipStartAnimation,r=s?50:300,e.next=18,Au(this.scene,r);case 18:this.playDealingSound(),o=7,c=0;case 21:if(!(c<o)){e.next=37;break}h=0;case 23:if(!(h<xr.NUMBER_OF_PILE)){e.next=34;break}if(!(u=a.pop())){e.next=31;break}if(this.piles[h].addCardByDeal(u,!0,o),h%2==0&&this.scene.vibration.performVibrating(10),s){e.next=31;break}return e.next=31,Au(this.scene,xr.CARD_DEAL_TIME);case 31:h++,e.next=23;break;case 34:c++,e.next=21;break;case 37:if(s){e.next=40;break}return e.next=40,Au(this.scene,400);case 40:if(this.boardState=ku.IDLE,this.updateAfterMove(),this.gameplay.saveSystem.saveCurrentBoardData(),s){e.next=46;break}return e.next=46,Au(this.scene,xr.CARD_MOVE_TIME+500);case 46:this.mover.enableInput();case 47:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.continueGame=function(){var e=(0,r.Z)(l().mark((function e(t){var n,i,a,r,o,c,h,u,d,p,f,g,m,v,y,T,C,E,A,S,b,I=this;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.scene.analytics.event(Nn._.LEVEL_CONTINUE,{game_type:is.Z.FREE_CELL}),!this.isDealing()){e.next=3;break}return e.abrupt("return");case 3:if(this.scene.gameplay.tryCreateShortcut(),this.scene.gameplay.startGameCount+=1,this.updateSeedDebugText(t.level,t.seed),this.clearOldBoard(),this.resetLevelProgress(),this.boardState=ku.DEALING,i=t.piles,a=t.freeCells,r=t.foundations,o=t.score,c=t.time,h=t.moves,u=t.movesData,d=GameCore.Configs.Gameplay.SkipStartAnimation){e.next=14;break}return e.next=14,Au(this.scene,300);case 14:this.score=o,this.time=c,this.moves=h,p=De()(i).call(i,(function(e){return I.deck.getCards(e)})),f=De()(r).call(r,(function(e){return I.deck.getCards(e)})),g=De()(a).call(a,(function(e){return I.deck.getCards(e)})),this.playDealingSound(),m=0;case 22:if(!(m<g.length)){e.next=38;break}v=g[m],y=0;case 25:if(!(y<v.length)){e.next=35;break}if(this.freeCells[m].addCard(v[y],!0,d),v[y].setFacingWithFlippingAnim(!0),v[y].setInteractive(),d){e.next=32;break}return e.next=32,Au(this.scene,xr.CARD_DEAL_TIME);case 32:y++,e.next=25;break;case 35:m++,e.next=22;break;case 38:T=0;case 39:if(!(T<f.length)){e.next=48;break}for(C=f[T],E=0;E<C.length;E++)this.foundations[T].addCard(C[E],!0,d),C[E].setFacingWithFlippingAnim(!0),C[E].setInteractive();if(d){e.next=45;break}return e.next=45,Au(this.scene,xr.CARD_DEAL_TIME);case 45:T++,e.next=39;break;case 48:A=0;case 49:if(!(A<p.length)){e.next=63;break}S=p[A],b=0;case 52:if(!(b<S.length)){e.next=60;break}if(this.piles[A].addCardByDeal(S[b],!0,S.length),d){e.next=57;break}return e.next=57,Au(this.scene,xr.CARD_DEAL_TIME);case 57:b++,e.next=52;break;case 60:A++,e.next=49;break;case 63:if(d){e.next=66;break}return e.next=66,Au(this.scene,400);case 66:if(this.mover.undos=x()(n=[]).call(n,De()(u).call(u,(function(e){return(0,s.Z)({},e)}))),this.boardState=ku.IDLE,this.gameplay.scene.footer.hintBtn.setDisabled(!1),this.updateAfterMove(),d){e.next=73;break}return e.next=73,Au(this.scene,xr.CARD_MOVE_TIME);case 73:this.mover.enableInput();case 74:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.initGameWithBoardState=function(){var t=(0,r.Z)(l().mark((function t(n){var i,a,s,r,o,c,h,u,d,p,f,g,m,v,y,T,C=this;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.prototype.initGameWithBoardState.call(this,n),!this.isDealing()){t.next=3;break}return t.abrupt("return");case 3:if(n.currentState){t.next=5;break}return t.abrupt("return");case 5:return this.clearOldBoard(),this.boardState=ku.DEALING,i=n.currentState,a=i.freecells,s=i.tableau,r=i.foundations,this.deck.reset(),t.next=11,Au(this.scene,300);case 11:this.score=0,this.time=0,this.moves=0,o=De()(s).call(s,(function(e){return C.deck.getCardsNew(e)})),c=De()(r).call(r,(function(e){return C.deck.getCardsNew(e)})),h=De()(a).call(a,(function(e){return C.deck.getCardsNew(e)})),this.scene.audio.playSound(Ls.Z.SHUFFLE),u=0;case 19:if(!(u<h.length)){t.next=34;break}d=h[u],p=0;case 22:if(!(p<d.length)){t.next=31;break}return this.freeCells[u].addCard(d[p],!0,!1),d[p].setFacingWithFlippingAnim(!0),d[p].setInteractive(),t.next=28,Au(this.scene,xr.CARD_DEAL_TIME);case 28:p++,t.next=22;break;case 31:u++,t.next=19;break;case 34:f=0;case 35:if(!(f<c.length)){t.next=43;break}for(g=c[f],m=0;m<g.length;m++)this.foundations[f].addCard(g[m],!0,!1),g[m].setFacingWithFlippingAnim(!0),g[m].setInteractive();return t.next=40,Au(this.scene,xr.CARD_DEAL_TIME);case 40:f++,t.next=35;break;case 43:v=0;case 44:if(!(v<o.length)){t.next=58;break}y=o[v],T=0;case 47:if(!(T<y.length)){t.next=55;break}return this.piles[v].addCardByDeal(y[T],!0,y.length),T%2==0&&this.scene.vibration.performVibrating(10),t.next=52,Au(this.scene,xr.CARD_DEAL_TIME);case 52:T++,t.next=47;break;case 55:v++,t.next=44;break;case 58:return t.next=60,Au(this.scene,400);case 60:return this.mover.undos=[],this.boardState=ku.IDLE,this.updateAfterMove(),t.next=65,Au(this.scene,xr.CARD_MOVE_TIME);case 65:this.mover.enableInput();case 66:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),n.checkAutoCompleted=function(){var e=this.scene.player.getPlayerSettings(),t=e.autoMoveToFoundation,n=e.autoComplete;t||this.isAutoCompleting()||n&&(this.canAutoComplete=!1,this.autoCompleteBtn.kill(),this.isCanSmartAutoComplete()?(this.canAutoComplete=!0,this.showAutoCompleteButton(!0)):(this.canAutoComplete=!1,this.showAutoCompleteButton(!1)))},n.isCanSmartAutoComplete=function(e){return new rp(this.piles,this.freeCells,this.foundations).isCanSmartAutoComplete(e)},n.isTableauSorted=function(){for(var e=0;e<this.piles.length;e++)if(!this.piles[e].isSorted())return!1;return!0},n.autoMoveCardToFoundation=function(){var e=this;if(!this.scene.player.getPlayerSettings().autoMoveToFoundation)return!1;var t=this.hint.findMovable();if(0===t.length)return!1;for(var n=!1,i=this.isCanSmartAutoComplete(),a=0;a<t.length;a++){var s=t[a],r=this.hint.getAvailableDestinations(s)[0];if(r instanceof Ld){if(!this.isCardValidToAutoMoveToFoundation(s)&&!i)continue;n=!0,this.mover.moveCardToFoundation(s,r);break}}if(!n&&i){var o=this.getUnsortedCard();if(o){var c=this.hint.getAvailableDestinations(o),h=Le()(c).call(c,(function(e){return e.isEmpty()})),u=h[0];u&&(n=!0,this.mover.moveCardToPlacement(o,u))}}if(n){this.boardState=ku.AUTO_MOVE_TO_FOUNDATION,!this.isOnLastAutoMoveToFoundation&&i&&(this.isOnLastAutoMoveToFoundation=!0,this.scene.audio.playSound(Ls.Z.AUTO_COMPLETE),this.removeAllCardsGlow());var l=this.isOnLastAutoMoveToFoundation?50:100;return this.scene.time.delayedCall(l,(function(){e.updateAfterMove()})),!0}return!1},n.autoComplete=function(){var e=this;if(this.boardState===ku.AUTO_COMPLETING)if(this.isGameWon())this.handleGameWon();else{this.updateEligibleFoundationCards(),this.updateAllCardLightOn(),this.scene.vibration.performVibrating(20);var t=this.hint.findMovable();if(0===t.length)return!1;for(var n=!1,i=0;i<t.length;i++){var a=t[i],s=this.hint.getAvailableDestinations(a)[0];if(s instanceof Ld){n=!0,this.mover.moveCardToFoundation(a,s);break}}if(!n){var r=this.getUnsortedCard();if(r){var o=this.hint.getAvailableDestinations(r),c=Le()(o).call(o,(function(e){return e.isEmpty()})),h=c[0];h&&this.mover.moveCardToPlacement(r,h)}}this.scene.time.delayedCall(50,(function(){e.autoComplete()}))}},n.getUnsortedCard=function(){var e,t=Le()(e=this.piles).call(e,(function(e){return!e.isSorted()}));if(0!==t.length){var n=t[0];return n.cards[n.cards.length-1]}},n.isCardValidToAutoMoveToFoundation=function(e){var t=e.getCardValue(),n=e.getCardSuit();if(1===t||2===t)return!0;var i=0;return this.foundations.forEach((function(e){e.cards.forEach((function(e){var a=e.getCardValue(),s=e.getCardSuit();a===t-1&&s!==n&&(i+=1)}))})),2===i},n.updateAfterMove=function(){if(this.boardState!=ku.GAME_OVER)if(this.updateEligibleFoundationCards(),this.updateAllCardLightOn(),this.isGameWon())this.handleGameWon();else{if(this.isIdle())return this.checkAutoCompleted(),void this.checkGameLose();if(this.isPlaying()||this.isOnAutoMoveToFoundation())if(this.scene.player.getPlayerSettings().autoMoveToFoundation)this.autoMoveCardToFoundation()||(this.boardState=ku.PLAYING,this.checkGameLose());else this.checkAutoCompleted(),this.checkGameLose()}},n.checkGameLose=function(){var e=this;this.isGameLose()&&(this.boardState=ku.OUT_OF_MOVE,this.scene.time.delayedCall(1e3,(function(){e.outOfMove()})))},n.isGameLose=function(){var e,t=x()(e=[]).call(e,this.freeCells,this.piles),n=0;return t.forEach((function(e){n+=e.cards.length})),n>0&&!this.hint.canHint()},n.outOfMove=function(){this.mover.donePick(),this.boardState=ku.GAME_OVER,this.gameplay.handleGameOver(!1),this.gameplay.saveSystem.clearLastGame()},n.clearOldBoard=function(){this.boardState=ku.NONE,this.canAutoComplete=!1,this.isOnLastAutoMoveToFoundation=!1,this.moves=0,this.time=0,this.score=0,this.mover.disableInput(),this.gameplay.boardGame.autoCompleteBtn.kill(),this.piles.forEach((function(e){return e.clear()})),this.foundations.forEach((function(e){return e.clear()})),this.freeCells.forEach((function(e){return e.clear()})),this.stock.clear(),this.mover.clear(),this.hint.clear(),this.deck.reset(),this.deck.cards.forEach((function(e){e.setEligibleFoundation(!1),e.setLightOn(!0)}))},n.handleGameWon=function(){this.autoCompleteBtn.kill(),this.increaseScore(Math.round(1e6/this.time*1e3)),this.scene.audio.playSound(Ls.Z.WON),this.gameplay.saveSystem.clearLastGame(),this.boardState=ku.GAME_OVER,this.gameplay.handleGameOver(!0)},n.update=function(e){(this.isPlaying()||this.isAutoCompleting()||this.isOnAutoMoveToFoundation())&&(this.time+=e),this.isPlaying()&&(this.timeToSaveBoardData+=e,this.timeToSaveBoardData>5e3&&(this.gameplay.saveSystem.saveCurrentBoardData(),this.timeToSaveBoardData=0)),this.stock.update(e),this.mover.update(),this.hint.update(e),this.mover.isPicked()&&this.hint.resetAutoHintTime(),this.isOnAutoMoveToFoundation()||this.scene.footer.undoBtn.setDisabled(0==this.mover.undos.length||!(this.isPlaying()||this.isIdle()))},n.createDevBtn=function(){GameCore.Utils.Valid.isDebugger()&&(e.prototype.createDevBtn.call(this),this.createSeedText())},n.createSeedText=function(){var e=this.scene.ads.getBannerHeight();this.seedText=this.scene.add.bitmapText(0,0,Rc.Z.PRIMARY.KEY,"#0",this.scene.fontSize(9)),Phaser.Display.Align.In.BottomLeft(this.seedText,this.scene.gameZone,-10,-72-e)},n.updateSeedDebugText=function(e,t){if(GameCore.Utils.Valid.isDebugger()&&this.seedText){var n=t.length>15?A()(t).call(t,0,15)+"...":t;this.seedText.setText("level: "+e+", #"+n)}},n.createAutoPlay=function(){var e,t=this;this.autoPlayBtn=new Ol.Z(this.scene,35,35);var n=this.scene.add.image(0,0,fp,gp.IC_BG_OFF);n.setWorldSize(35,35);var i=this.scene.make.bitmapText({font:Rc.Z.PRIMARY.KEY,size:this.scene.fontSize(10),text:"Auto\nPlay",origin:{x:.5,y:.5}});i.setCenterAlign(),null==(e=this.autoPlayBtn)||e.add([n,i]);var a=this.scene.time.addEvent({delay:50,repeat:-1,callback:function(){if(t.isIdle()&&(t.boardState=ku.PLAYING),t.scene.player.getPlayerSettings().autoMoveToFoundation){if(!t.isPlaying()&&!t.isOnAutoMoveToFoundation())return a.paused=!0,void i.setText("Auto\nPlay");t.isPlaying()&&t.hint.autoPlayStep()}else{if(!t.isPlaying()||t.canAutoComplete)return a.paused=!0,void i.setText("Auto\nPlay");t.hint.autoPlayStep()}},paused:!0});this.autoPlayBtn.onClick=function(){a.paused?(i.setText("Stop"),a.paused=!1):(i.setText("Auto\nPlay"),a.paused=!0)},this.debugButtons.push(this.autoPlayBtn)},n.createAutoStepPlay=function(){var e,t=this;this.autoPlayStepBtn=new Ol.Z(this.scene,35,35);var n=this.scene.add.image(0,0,fp,gp.IC_BG_OFF);n.setWorldSize(35,35);var i=this.scene.make.bitmapText({font:Rc.Z.PRIMARY.KEY,size:this.scene.fontSize(10),text:"Step",origin:{x:.5,y:.5}});i.setCenterAlign(),null==(e=this.autoPlayStepBtn)||e.add([n,i]),this.autoPlayStepBtn.onClick=function(){t.isIdle()&&(t.boardState=ku.PLAYING),t.isPlaying()&&t.hint.autoPlayStep()},this.debugButtons.push(this.autoPlayStepBtn)},n.getVerticalSpacePile=function(){return xr.VERTICAL_PILE_SPACE},n.getMaxCardCanMoveToEmptyPile=function(){return Math.floor(this.getMaxCardCanMoveToNonEmptyPile()/2)},n.getMaxCardCanMoveToNonEmptyPile=function(){var e=this.getNumberOfEmptyFreeCell(),t=this.getNumberOfEmptyPile();return Math.pow(2,t)*(e+1)},n.getNumberOfEmptyFreeCell=function(){var e,t=Le()(e=this.freeCells).call(e,(function(e){return e.isEmpty()})).length;return this.isPickedCardCreateNewEmptyFreeCell()&&(t-=1),t>=0?t:0},n.getNumberOfEmptyPile=function(){var e,t=Le()(e=this.piles).call(e,(function(e){return e.isEmpty()})).length;return this.isPickedCardCreateNewEmptyPile()&&(t-=1),t>=0?t:0},n.isPickedCardCreateNewEmptyPile=function(){if(this.mover.isPicked()){var e=this.mover.getPicked()[0].placement;return e instanceof Bu&&e.isEmpty()}return!1},n.isPickedCardCreateNewEmptyFreeCell=function(){if(this.mover.isPicked()){var e=this.mover.getPicked()[0].placement;return e instanceof Jd&&e.isEmpty()}return!1},n.updateAllCardLightOn=function(){var e=(0,r.Z)(l().mark((function e(){var t,n,i,a=this;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(GameCore.Configs.Gameplay.SkipStartAnimation){e.next=4;break}return e.next=4,Au(this.scene,xr.CARD_MOVE_TIME);case 4:t=!1,this.freeCells.forEach((function(e){e.cards.forEach((function(e){e.setLightOn(!0)}))})),this.foundations.forEach((function(e){e.cards.forEach((function(e){e.setLightOn(!0)}))})),n=this.mover.getPickedPlacement(),i=this.mover.isPicked(),this.piles.forEach((function(e){i&&e==n||(t=!1,e.cards.forEach((function(e,n){var i=t;i||(i=a.hint.isCardValidToMove(e)&&a.isCardCanMoveToNonEmptyPile(e,n),t=i),e.setLightOn(i)})))}));case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.updateEligibleFoundationCards=function(){var e=(0,r.Z)(l().mark((function e(t){var n,i,a,s,r,o,c;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===t&&(t=!0),i=GameCore.Configs.Gameplay.SkipStartAnimation,!t){e.next=6;break}if(i){e.next=6;break}return e.next=6,Au(this.scene,xr.CARD_MOVE_TIME);case 6:if(a=this.scene.player.getPlayerSettings(),a.highlightLowCards){e.next=9;break}return e.abrupt("return");case 9:if(!this.isOnAutoMoveToFoundation()||!this.isOnLastAutoMoveToFoundation){e.next=11;break}return e.abrupt("return");case 11:if(!this.isAutoCompleting()){e.next=13;break}return e.abrupt("return");case 13:s=De()(n=this.foundations).call(n,(function(e){return e.cards[e.cards.length-1]})),r=De()(s).call(s,(function(e,t){return e?e.getTag()+1:100*Cu[t]+1})),this.freeCells.forEach((function(e){e.cards.forEach((function(e){var t=be()(r).call(r,e.getTag());e.setEligibleFoundation(t)}))})),this.foundations.forEach((function(e){e.cards.forEach((function(e){e.setEligibleFoundation(!1)}))})),o=this.mover.getPickedPlacement(),c=this.mover.isPicked(),this.piles.forEach((function(e){c&&e==o||e.cards.forEach((function(e){var t=be()(r).call(r,e.getTag());e.setEligibleFoundation(t)}))}));case 20:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.isCardCanMoveToNonEmptyPile=function(e,t){return e.placement.cards.length-t<=this.getMaxCardCanMoveToNonEmptyPile()},n.isStandardSeedValid=function(e){return this.shuffler.isStandardSeedValid(e)},n.removeAllCardsGlow=function(){var e;x()(e=[]).call(e,this.freeCells,this.piles,this.foundations).forEach((function(e){e.cards.forEach((function(e){e.setEligibleFoundation(!1)}))}))},t}(ld),vp=mp,yp=Gn.Z.GAMEPLAY_DEFAULT,Tp=(yp.KEY,yp.FRAME),Cp=function(e){function t(t){var n;return(n=e.call(this,t)||this).cards=[],n.suitExplosive=void 0,n.createAce(),n.suitExplosive=new fl(t.scene),n.slot.setVisible(!1),n.setName(hu.Foundation),n}(0,o.Z)(t,e);var n=t.prototype;return n.createAce=function(){var e=xr.CARD_WIDTH,t=xr.CARD_HEIGHT;this.slot.setFrame(Tp.FOUNDATION_SLOT),this.slot.setWorldSize(e,t)},n.setPosition=function(t,n){e.prototype.setPosition.call(this,t,n)},n.addCardsFromSaveData=function(){var t=(0,r.Z)(l().mark((function t(n){return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.prototype.addCardsFromSaveData.call(this,n,0);case 1:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),n.addCard=function(e,t){var n=this;if(e instanceof el){if(e.scene.gameplay.cardsLayer.bringToTop(e.bg),e.scene.gameplay.cardsLayer.bringToTop(e),e.setPlacement(this),t){var i=this.getPlacingPosition(this.cards.length),a=i.x,s=i.y;e.moveTo(a,s,300)}this.cards.push(e)}else for(var r=this.getPlacingPosition(this.cards.length),o=r.x,c=r.y,h=function(i){var a=e[i];if(a.setPlacement(n),t){var s=e[0].getTag(),r=(s-s%100)/100-1;a.moveTo(o,c,300,650-50*i,(function(){a.scene.gameplay.cardsLayer.bringToTop(a.bg),a.scene.gameplay.cardsLayer.bringToTop(a)}),(function(){n.suitExplosive.explode(r,i,o,c)}))}n.cards.push(a)},u=e.length-1;u>=0;u--)h(u)},n.canBePlace=function(e){return e.getTag()%100==yu.KING&&13!==this.cards.length},n.isFull=function(){return 13===this.cards.length},n.kill=function(){this.active=!1,this.clear()},n.revive=function(){this.active=!0},n.show=function(){e.prototype.show.call(this),this.slot.kill()},n.hide=function(){e.prototype.hide.call(this)},t}(nl),Ep=Cp,Ap=function(){function e(e){this.scene=void 0,this.boardGame=void 0,this.availableHints=void 0,this.outOfMove=void 0,this.hintAnimation=void 0,this.hintClicked=void 0,this.currentAvailableHintMoves=void 0,this.currentBoardStateHash=void 0,this.currentHintIdx=void 0,this.timeToAutoHint=void 0,this.outOfMoverTimer=void 0,this.boardGame=e,this.scene=e.scene,this.outOfMove=!0,this.hintClicked=0,this.timeToAutoHint=0,this.currentAvailableHintMoves=[],this.currentBoardStateHash="",this.currentHintIdx=0,this.hintAnimation=new ol(e)}var t=e.prototype;return t.canHint=function(){return this.boardGame.bestMoveFinder.findMoveableCards(!0).length>0},t.showHint=function(){var e=(0,r.Z)(l().mark((function e(){var t,n,i,a;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.boardGame.isIdle()&&(this.boardGame.boardState=ku.PLAYING),this.boardGame.boardState===ku.PLAYING){e.next=3;break}return e.abrupt("return");case 3:if(this.boardGame.scene.audio.playSound(Ls.Z.HINT),this.scene.vibration.performVibrating(20),this.hintClicked+=1,t=this.boardGame.generateBoardStateHash(),this.currentBoardStateHash!==t){e.next=11;break}return this.resetAutoHintTime(),this.showDifferentPossibleMoves(),e.abrupt("return");case 11:if(this.currentBoardStateHash=t,this.currentAvailableHintMoves=this.boardGame.bestMoveFinder.findBestMoves(),this.currentHintIdx=0,this.resetAutoHintTime(),!(this.currentAvailableHintMoves.length>0)){e.next=19;break}return n=this.currentAvailableHintMoves[0],i=n.targetCard,a=n.targetPlacement,this.hintAnimation.showMoveHintAnimation(i,a),e.abrupt("return");case 19:if(!(this.boardGame.stock.cards.length>0)){e.next=22;break}return this.hintAnimation.showDealerHint(),e.abrupt("return");case 22:this.boardGame.outOfMove();case 23:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),t.showDifferentPossibleMoves=function(){if(0!==this.currentAvailableHintMoves.length){this.currentHintIdx+=1,this.currentHintIdx>=this.currentAvailableHintMoves.length&&(this.currentHintIdx=0);var e=this.currentAvailableHintMoves[this.currentHintIdx],t=e.targetCard,n=e.targetPlacement;this.hintAnimation.showMoveHintAnimation(t,n)}else this.boardGame.stock.cards.length>0?this.hintAnimation.showDealerHint():this.boardGame.outOfMove()},t.autoPlayStep=function(){var e,t,n=this.boardGame.bestMoveFinder,i=De()(e=n.findMoveableCards()).call(e,(function(e){return e.card}));if(i.length>0){this.outOfMove=!1;var a=this.getAutoMove();if(a)return void this.autoPlayMove(a)}this.boardGame.stock.cards.length<=0?D()(t=this.boardGame.foundations).call(t,(function(e){return e.isEmpty()}))?this.boardGame.outOfMove():this.boardGame.isAutoPlay=!1:this.handleDealCards()},t.handleDealCards=function(){this.boardGame.getCurrentGameRelaxedSpiderSetting()?this.boardGame.mover.deal():this.boardGame.bestMoveFinder.handleNonRelaxedDealCards()},t.getAutoMove=function(){var e,t=this.boardGame.bestMoveFinder.findBestMoves(),n=this.boardGame.getCurrentGameRelaxedSpiderSetting(),i=null==(e=t[0])?void 0:e.targetPlacement;if(!(i instanceof al)&&!(i instanceof Ep))return null;var a=n?-300:-100;if(t[0].movePriority<a)return null;var s=this.randomizeAutoMove(t);return 0===s.length?null:(this.boardGame.bestMoveFinder.addMoveToAcceptedList(s[0]),s[0])},t.randomizeAutoMove=function(e){var t=e[0].movePriority,n=t>0?Math.floor(.9*t):Math.floor(1.1*t),i=Le()(e).call(e,(function(e){return e.movePriority>=n}));return ia()(i).call(i,(function(){return Math.random()-.5})),i},t.resetAutoHintTime=function(){this.timeToAutoHint=0},t.resetOutOfMoveTimer=function(){this.outOfMoverTimer=0},t.clear=function(){this.hintClicked=0},t.update=function(e){if(this.boardGame.isPlaying()){if(this.boardGame.scene.player.getPlayerSettings().autoHints?this.timeToAutoHint+=e:this.timeToAutoHint=0,this.outOfMove&&this.boardGame.stock.isEmpty()){if(this.outOfMoverTimer+=e,this.outOfMoverTimer>2e3)return this.boardGame.outOfMove(),this.resetOutOfMoveTimer(),void(this.outOfMove=!1)}else this.resetOutOfMoveTimer();this.timeToAutoHint>1e4&&this.showHint()}},t.autoPlayMove=function(e){var t,n=this.boardGame.mover;if(!n.isPicked()){var i=e.targetCard,a=e.targetPlacement,s=i.placement,r=En()(t=i.placement.cards).call(t,i);n.pickCard(s,s.cards.length-r),n.movePickedToNewPlacement(a),n.donePick()}},e}(),Sp=Ap;function bp(e,t){var n="undefined"!==typeof w()&&k()(e)||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){var n;if(!e)return;if("string"===typeof e)return Ip(e,t);var i=A()(n=Object.prototype.toString.call(e)).call(n,8,-1);"Object"===i&&e.constructor&&(i=e.constructor.name);if("Map"===i||"Set"===i)return b()(e);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return Ip(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var i=0;return function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Ip(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var wp=GameCore.Configs.Gameplay.SmartClick,Pp=Phaser.Input.Events,kp=Pp.GAMEOBJECT_DOWN,_p=Pp.DRAG,xp=Pp.POINTER_UP,Op=(Pp.POINTER_DOWN,Pp.GAME_OUT),Lp=function(){function e(e){var t=this;this.boardGame=void 0,this.undos=void 0,this.picked=void 0,this.dragX=void 0,this.dragY=void 0,this.pickedPlacement=void 0,this.smartClickBounds=void 0,this.smartClickDebugRect=void 0,this.undoClicked=void 0,this.numOfFutureFoundationCompleted=0,this.isEmptySmartClick=void 0,this.isDealingNewCards=void 0,this.curMaxFoundationFinished=void 0,this.isDragOutOfCanvas=!1,this.handlePointerDown=function(e,n){if(t.isPicked()||t.isEmptySmartClick)t.handleSmartClickNoCardPointerDown(e);else if(n instanceof el){var i;t.boardGame.boardState=ku.PLAYING;var a=n;if(a.isMoving())return;if(!t.checkIfCardIsValidToMove(a))return;var s=En()(i=a.placement.cards).call(i,a);t.pickCard(a.placement,a.placement.cards.length-s)}},this.handleSmartClickNoCardPointerDown=function(e){var n=t.boardGame.scene.player.getPlayerSettings();t.isPicked()||t.isEmptySmartClick||n.tapToMove&&wp&&(t.boardGame.isIdle()||t.boardGame.isPlaying())&&(t.isEmptySmartClick=!0)},this.isDragged=void 0,this.dragPicked=function(e,n,i,a){!t.isDragged&&e.getDistanceX()+e.getDistanceY()<15||(t.isDragged=!0,t.dragX=i,t.dragY=a)},this.handlePointerUp=function(e){if(t.isPicked()||t.isEmptySmartClick){var n=t.checkForClickableState(),i=!t.isDealingNewCards&&wp&&n;if(t.isEmptySmartClick&&i){var a=t.gatherCardsForSmartClick(e),s=t.getBestCardForSmartClick(a);return s&&t.handleClickOnCard(s),t.boardGame.hint.resetAutoHintTime(),t.boardGame.hint.outOfMove=!t.boardGame.hint.canHint(),void(t.isEmptySmartClick=!1)}if(t.picked[0]){var r=t.picked[0],o=t.findFirstDestination(e,t.picked);o&&n&&t.movePickedToNewPlacement(o);var c=e.upTime-e.downTime<1e3;if(t.isDragOutOfCanvas&&void 0!==e.id&&(t.isDragOutOfCanvas=!1,c=!0),!t.isDragged&&n&&c){if(t.donePick(),t.boardGame.scene.player.getPlayerSettings().tapToMove){if(r.isMoving())return;var h=r;if(i){var u=t.gatherCardsForSmartClick(e);be()(u).call(u,r)||u.push(r);var l=t.getBestCardForSmartClick(u);l&&(h=l)}t.donePick(),t.handleClickOnCard(h)}}else t.donePick();t.boardGame.hint.resetAutoHintTime(),t.boardGame.hint.outOfMove=!t.boardGame.hint.canHint()}else t.donePick()}},this.handlePointerOutOfCanvas=function(e){t.boardGame.isPlaying()&&t.isPicked()&&(t.isDragOutOfCanvas=!0,t.handlePointerUp(e))},this.deal=function(){if(!t.boardGame.stock.isEmpty()){if(!1===t.boardGame.getCurrentGameRelaxedSpiderSetting()){for(var e=!1,n=0,i=0;i<t.boardGame.piles.length;i++){var a=t.boardGame.piles[i];n+=a.cards.length,a.isEmpty()&&(e=!0)}var s=t.boardGame.piles.length;if(e&&n>=s)return void t.boardGame.stock.getLastCard().shake()}if(t.boardGame.levelConfig){t.boardGame.isPlaying()&&t.boardGame.scene.audio.playSound(Ls.Z.CARD_MOVE);var r=t.boardGame.stock.pickTopCards(rf);if(r.length>0){t.isDealingNewCards=!0,t.boardGame.dynamicCardHandler.setDynamicTagForDealingCards(r);for(var o=0;o<r.length;o++){var c=r[o],h=t.boardGame.piles.length,u=t.boardGame.piles[o%h];u.addCard(c,!0),u.faceUpLast(),t.resizePile(u),t.autoCompleteCardStack(u)}t.boardGame.scene.time.delayedCall(310,(function(){t.boardGame.piles.forEach((function(e){e.updateCardTintByAvailability(),t.isDealingNewCards=!1}))})),t.undos.push({type:"deal",numOfCards:r.length,srcName:t.boardGame.stock.getname(),srcIdx:t.boardGame.stock.getIdx(),destName:t.boardGame.stock.getname(),destIdx:t.boardGame.stock.getIdx()}),t.boardGame.hint.canHint()&&(t.boardGame.hint.outOfMove=!1),t.boardGame.stock.isEmpty()&&t.boardGame.hint.outOfMove&&t.boardGame.outOfMove(),t.boardGame.decreaseScore(5),t.boardGame.increaseMovesAndSaveBoard()}}}},this.boardGame=e,this.undos=[],this.picked=[],this.undoClicked=0,this.isEmptySmartClick=!1,this.isDealingNewCards=!1,this.curMaxFoundationFinished=0}var t=e.prototype;return t.enableInput=function(){var e=this,t=this.boardGame.scene;t.input.on(kp,this.handlePointerDown),t.input.on(_p,this.dragPicked),t.input.on(xp,this.handlePointerUp),t.input.on(Op,this.handlePointerOutOfCanvas),this.boardGame.stock.slot.onClick((function(){e.boardGame.boardState=ku.PLAYING,e.deal()}))},t.disableInput=function(e){void 0===e&&(e=!1);var t=this.boardGame.scene;t.input.off(kp,this.handlePointerDown),t.input.off(_p,this.dragPicked),t.input.off(xp,this.handlePointerUp),t.input.off(Op,this.handlePointerOutOfCanvas),e&&this.boardGame.deck.cards.forEach((function(e){e.isFacingUp()&&e.placement instanceof al&&e.setNotAvailableToMoveTint()})),this.boardGame.stock.slot.offClick()},t.isPicked=function(){return this.picked.length>0},t.isCanUndo=function(){return this.boardGame.boardState!==ku.GAME_OVER&&0!=this.undos.length},t.movePickedToNewPlacement=function(e){var t=this;if(e.addCard(this.picked,!0),e instanceof al){this.boardGame.decreaseScore(5),e.updateCardTintByAvailability();var n=e.getTopCardStackData();n&&13===n.length||this.resizePile(e),this.autoCompleteCardStack(e)}var i=0;if(e instanceof Ep){this.boardGame.increaseScore(650),this.boardGame.isPlaying()&&this.boardGame.scene.audio.playSound("finish"+e.cards.length,{delay:.1});var a=this.boardGame.isAutoPlay,s=a?400:1250;i=a?0:700;var r=!this.boardGame.hint.canHint();this.boardGame.canAutoComplete||8===this.curMaxFoundationFinished||r||this.boardGame.scene.time.delayedCall(s,(function(){t.boardGame.scene.gameplay.handleShowCompleteStackAd()}))}else this.boardGame.isPlaying()&&this.boardGame.scene.audio.playSound(Ls.Z.CARD_MOVE);var o=this.pickedPlacement instanceof al&&!!this.pickedPlacement.faceUpLast(i);this.pickedPlacement instanceof al&&(this.pickedPlacement.updateCardTintByAvailability(),this.resizePile(this.pickedPlacement)),this.undos.push({type:"move",numOfCards:this.picked.length,srcName:this.pickedPlacement.getname(),srcIdx:this.pickedPlacement.getIdx(),destName:e.getname(),destIdx:e.getIdx(),faceLast:!!o}),this.picked=[],e instanceof Ep||this.boardGame.increaseMovesAndSaveBoard(),this.boardGame.checkGameWin()},t.unMovePickedToPlacement=function(e,t,n){void 0===n&&(n=!1),e instanceof al&&t&&e.faceDownLast(),e.addCard(this.picked,!0),e instanceof al&&(e.updateCardTintByAvailability(),this.resizePile(e)),this.pickedPlacement instanceof al&&(this.pickedPlacement.updateCardTintByAvailability(),this.resizePile(this.pickedPlacement)),this.picked=[],n||this.boardGame.increaseMovesAndSaveBoard()},t.getBestCardForSmartClick=function(e){var t=this.boardGame.bestMoveFinder,n=De()(e).call(e,(function(e){return{card:e,priority:0}})),i=t.findAllAvailableMoves(n);return 0===i.length?null:ia()(i).call(i,(function(e,t){return t.movePriority-e.movePriority}))[0].targetCard},t.gatherCardsForSmartClick=function(e){var t=this,n=e.worldX,i=e.worldY,a=this.boardGame.scene.gameZone,s=a.width,r=a.height;if(this.smartClickBounds)this.smartClickBounds.setPosition(n-this.smartClickBounds.width/2,i-this.smartClickBounds.height/2),this.smartClickDebugRect.setPosition(this.smartClickBounds.x,this.smartClickBounds.y);else{var o=Math.min(.1*r,.1*s,15);this.smartClickBounds=new Phaser.Geom.Rectangle(n-o/2,i-o/2,o,o),this.smartClickDebugRect=this.boardGame.scene.add.rectangle(this.smartClickBounds.x,this.smartClickBounds.y,this.smartClickBounds.width,this.smartClickBounds.height,16711680,.5),this.smartClickDebugRect.setOrigin(0,0),this.smartClickDebugRect.setDepth(Dn.Z.EFFECT),this.smartClickDebugRect.kill()}var c=[];return this.boardGame.piles.forEach((function(e){var n=e.cards;if(0!==n.length){var i=e.getTopCardStackData();if(i)for(var a=i.length;a>=1;a--){var s=n[n.length-a];if(s){if(!s.isFacingUp())return;var r=s.getBounds(),o=Phaser.Geom.Rectangle.Intersection(t.smartClickBounds,r);o.width>0&&o.height>0&&c.push(s)}}}})),c},t.checkIfCardIsValidToMove=function(e){var t,n,i=e.placement;if(i instanceof Ep)return!1;var a=En()(t=i.cards).call(t,e),s=i.cards.length;if(a===s-1)return!0;for(var r,o=A()(n=i.cards).call(n,a,s),c=!0,h=!0,u=e.getTag(),l=u%100,d=Math.floor(u/100),p=bp(o);!(r=p()).done;){var f=r.value;if(f!==e){var g=f.getTag(),m=g%100,v=Math.floor(g/100);if(l-m!==1&&(c=!1),d!==v&&(h=!1),!c&&!h)break;l=m,d=v}}return c&&h},t.pickCard=function(e,t,n){var i;(void 0===n&&(n=!1),this.pickedPlacement=e,this.picked=e.pickTopCards(t),n)&&Xh()(i=this.picked).call(i);this.isDragged=!1},t.donePick=function(){this.isPicked()&&(this.pickedPlacement.addCard(this.picked,this.isDragged),this.pickedPlacement instanceof al&&(this.pickedPlacement.updateCardTintByAvailability(),this.resizePile(this.pickedPlacement)),this.picked=[],this.isDragged=!1)},t.checkForClickableState=function(){return this.boardGame.isIdle()||this.boardGame.isPlaying()},t.autoCompleteCardStack=function(e){var t=this;if(!this.boardGame.isAutoPlay){var n=e.getTopCardStackData();if(n&&13===n.length){this.numOfFutureFoundationCompleted+=1,this.disableInput();this.boardGame.scene.time.delayedCall(450,(function(){t.numOfFutureFoundationCompleted-=1;var n=e.cards[e.cards.length-13];t.handleClickOnCard(n),t.boardGame.isGameOver()||t.boardGame.isOutOfMove()||(t.enableInput(),t.boardGame.hint.outOfMove=!t.boardGame.hint.canHint())}))}}},t.resizePile=function(e){this.boardGame.isAutoPlay?e.resizePile():this.boardGame.scene.time.delayedCall(350,(function(){e.resizePile()}))},t.findFirstDestination=function(e,t){if(13==t.length){var n=this.detectFoundation(e,t[0]);if(n)return n}return this.detectPile(e,t[0])},t.detectFoundation=function(e,t){var n,i=Le()(n=this.boardGame.foundations).call(n,(function(e){return Phaser.Geom.Intersects.RectangleToRectangle(t.getBounds(),e.slot.getBounds())&&e.canBePlace(t)}));if(2==i.length)return e.worldX-i[0].x<i[1].x-e.worldX?i[0]:i[1];if(1==i.length){if(i[0]==this.pickedPlacement)return;return i[0]}},t.detectPile=function(e,t){var n,i=this,a=Le()(n=this.boardGame.piles).call(n,(function(e){var n,a=(null==(n=e.getLastCard())?void 0:n.getBounds())||e.slot.getBounds();return e!==i.pickedPlacement&&Phaser.Geom.Intersects.RectangleToRectangle(t.getBounds(),a)&&e.canBePlace(t)}));return 2==a.length?(e.worldX,a[0].x,a[1].x,e.worldX,a[1]):1==a.length?a[0]:void 0},t.checkIfCanMoveToFoundation=function(){var e=this,t=this.boardGame.foundations,n=[];return 13==this.picked.length?(n.push.apply(n,Le()(t).call(t,(function(t){return t!==e.pickedPlacement&&t.canBePlace(e.picked[0])}))),n):[]},t.getAvailableDestinations=function(e){var t=[],n=this.boardGame.bestMoveFinder.findAllAvailableMoves([{card:e,priority:0}]);return 0===n.length?t:t=De()(n).call(n,(function(e){return{pile:e.targetPlacement,priority:e.movePriority}}))},t.handleClickOnCard=function(e){var t;if(!this.isPicked()&&e){var n=this.getAvailableDestinations(e),i=En()(t=e.placement.cards).call(t,e);if(this.pickCard(e.placement,e.placement.cards.length-i),0!==n.length)this.movePickedToNewPlacement(n[0].pile),this.donePick();else{this.boardGame.scene.audio.playSound(Ls.Z.NO_MOVE);for(var a,s=bp(this.picked);!(a=s()).done;){a.value.shake()}this.donePick()}}},t.undo=function(e){if(void 0===e&&(e=!1),this.boardGame.boardState!==ku.GAME_OVER){var t=this.undos.pop();if(t){this.boardGame.scene.audio.playSound(Ls.Z.UNDO),this.boardGame.boardState=ku.PLAYING,e||(this.undoClicked+=1),this.boardGame.bestMoveFinder.rollbackOneMoveFromAcceptedList();var n=t.numOfCards,i=t.srcName,a=t.srcIdx,s=t.destName,r=t.destIdx,o=t.faceLast,c=void 0!==o&&o,h=this.getPlacement(i,a),u=this.getPlacement(s,r);if("deal"===t.type){var l=[];for(var d in this.boardGame.piles){var p=this.boardGame.piles[d],f=p.removeLastCard();f&&l.push(f),p.updateCardTintByAvailability(),this.resizePile(p)}for(var g=0,m=l;g<m.length;g++){var v=m[g];h.addCard(v,!0)}e||this.boardGame.increaseMovesAndSaveBoard()}else"move"===t.type&&(this.pickCard(u,n,u instanceof Ep),u instanceof Ep&&this.boardGame.decreaseScore(650),this.unMovePickedToPlacement(h,c,e),this.donePick(),this.boardGame.hint.outOfMove=!1);e||this.boardGame.decreaseScore(20),this.boardGame.checkAutoCompleted(),u instanceof Ep&&this.undo(!0)}}},t.clear=function(){this.undos=[],this.undoClicked=0,this.numOfFutureFoundationCompleted=0,this.isEmptySmartClick=!1,this.isDealingNewCards=!1,this.curMaxFoundationFinished=0},t.update=function(){if(this.isDragged)for(var e=0;e<this.picked.length;e++){var t=this.picked[e];t.setPosition(this.dragX,this.dragY+e*this.boardGame.getVerticalSpacePile()),t.scene.gameplay.cardsLayer.bringToTop(t)}},t.getPlacement=function(e,t){if(e===hu.Stock)return this.boardGame.stock;if(e===hu.Pile)return this.boardGame.piles[t];if(e===hu.Foundation)return this.boardGame.foundations[t];throw new Error("Placement not found!!!")},t.getNumOfFutureFoundationCompleted=function(){return this.numOfFutureFoundationCompleted},e}(),Rp=Lp,Dp=Gn.Z.GAMEPLAY_DEFAULT,Bp=Dp.KEY,Mp=Dp.FRAME,Np=function(e){function t(t){var n;return(n=e.call(this,t)||this).restartIcon=void 0,n.remainContainer=void 0,n.remainText=void 0,n.slot.input.cursor="pointer",n.createRecycle(),n.createStockCountText(),n.setName(hu.Stock),n}(0,o.Z)(t,e);var n=t.prototype;return n.createRecycle=function(){var e=this.boardGame.scene,t=this.boardGame.scene.world.isLandscape()?1.2:.8;this.restartIcon=e.add.image(0,0,Bp,Mp.IC_RECYCLE),this.restartIcon.setWorldSize(25*t,25*t)},n.addCardsFromSaveData=function(){var e=(0,r.Z)(l().mark((function e(t){var n,i,a,s,r,o,c;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(n=this.boardGame,i=n.deck,a=n.replayCardHandler.replayCardStatus,s=0;s<t.length;s++)r=t[s].split("|"),o=L()(r[0]),c=L()(r[1]),o<100&&a[c]>100&&(o=a[c]),i.setUpCardWhenContinueGame(o,this,t.length,c);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.createStockCountText=function(){var e=this.boardGame.scene,t=e.add.container();t.setDepth(Dn.Z.REMAINING_STOCK),this.remainText=e.make.bitmapText({font:Rc.Z.PRIMARY.KEY,size:e.fontSize(9),origin:{x:.5,y:.5},text:"0"}),this.remainText.setCenterAlign(),this.remainText.setTint(16579837),this.remainText.setPosition(9,-8);var n=e.add.image(9,-9,Bp,Mp.STOCK_BG);n.setWorldSize(14.4,14.4),t.add([n,this.remainText]),this.remainContainer=t,this.remainContainer.kill()},n.setPosition=function(t,n){e.prototype.setPosition.call(this,t,n),this.restartIcon.setPosition(t,n);var i=this.slot,a=i.displayWidth/2,s=i.displayHeight/2;this.remainContainer.setPosition(t-a,n+s)},n.addCard=function(t,n){e.prototype.addCard.call(this,t,n),t.setFacingWithFlippingAnim(!1),t.disableInteractive()},n.canBePlace=function(e){return!1},n.clear=function(){this.cards=[]},n.update=function(t){e.prototype.update.call(this,t),this.cards.length>0?(this.remainContainer.revive(),this.remainText.setText(""+this.cards.length)):this.remainContainer.kill()},n.kill=function(){e.prototype.kill.call(this),this.restartIcon.kill()},n.revive=function(){e.prototype.revive.call(this),this.restartIcon.revive()},n.show=function(){e.prototype.show.call(this),this.restartIcon.revive(),this.cards.length>0&&this.remainContainer.revive()},n.hide=function(){e.prototype.hide.call(this),this.restartIcon.kill(),this.remainContainer.kill()},t}(nl),Gp=Np,Fp=function(e){function t(t){var n;return(n=e.call(this,t)||this).boardGame=void 0,n.cards=void 0,n.cardGroup=void 0,n.boardGame=t,n.cards=[],n.cardGroup=n.boardGame.scene.add.group(),n}(0,o.Z)(t,e);var n=t.prototype;return n.init=function(){var e=this.boardGame.levelConfig.type;"dynamic"===e&&this.initDynamicLevel(),"prebuilt"===e&&this.initPrebuiltLevel()},n.alignCurrentDeck=function(){for(var e=this.boardGame,t=e.stock,n=e.foundations,i=0;i<t.cards.length;i++){var a=t.getPlacingPosition(i),s=a.x,r=a.y;t.cards[i].setPosition(s,r)}for(var o=0;o<n.length;o++)for(var c=n[o],h=0;h<c.cards.length;h++){var u=c.getPlacingPosition(h),l=u.x,d=u.y;c.cards[h].setPosition(l,d)}},n.initDynamicLevel=function(){for(var e=this,t=this.boardGame.levelConfig,n=this.boardGame.replayCardHandler.replayCardStatus,i=t.startingLayout,a=13*of,s=0;s<a;s++){var r=void 0,o=a-cf;if(s>=o&&s<=a-cf+rf-1){var c=i[s-o];r=this.requestNewCard(c),this.removeCardFromDiffHandler(c),this.boardGame.replayCardHandler.setReplayCardStatus(s,r.getTag())}else n[s]>100?(r=this.requestNewCard(n[s]),this.removeCardFromDiffHandler(n[s])):r=this.requestNewCard(0);r.setOriginalCardIdx(s),this.cards.push(r)}var h=this.boardGame.stock.getPlacingPosition(0),u=h.x,l=h.y;this.cards.forEach((function(t){t.updateCardStyle(),t.resetCardTint(),t.setFacing(!1),t.kill(),t.setPosition(u,l),t.setDepth(10),e.boardGame.gameplay.cardsLayer.add(t.bg),e.boardGame.gameplay.cardsLayer.add(t)}))},n.initPrebuiltLevel=function(){for(var e=this,t=this.boardGame.levelConfig.startingLayout,n=0;n<t.length;n++){var i=t[n],a=this.requestNewCard(i);this.removeCardFromDiffHandler(i),this.boardGame.replayCardHandler.setReplayCardStatus(n,a.getTag()),a.setOriginalCardIdx(n),this.cards.push(a)}var s=this.boardGame.stock.getPlacingPosition(0),r=s.x,o=s.y;this.cards.forEach((function(t){t.updateCardStyle(),t.resetCardTint(),t.setFacing(!1),t.kill(),t.setPosition(r,o),t.setDepth(10),e.boardGame.gameplay.cardsLayer.add(t.bg),e.boardGame.gameplay.cardsLayer.add(t)}))},n.createCardForJourneyMode=function(e){var t=e;"-"===e[0]&&(t=e.substring(1,e.length));var n=this.getCardTag(t),i=this.requestNewCard(n);i.setOriginalCardIdx(-1),this.cards.push(i);var a=this.boardGame.stock.getPlacingPosition(0),s=a.x,r=a.y;return i.updateCardStyle(),i.resetCardTint(),i.setFacing(!1),i.setPosition(s,r),i.setDepth(10),this.boardGame.gameplay.cardsLayer.add(i.bg),this.boardGame.gameplay.cardsLayer.add(i),this.boardGame.gameplay.cardsLayer.sortChildrenFlag=!1,i.reset(),i},n.getCardTag=function(e){var t=e.length,n=e.substring(0,t-1),i=100;switch(e.substring(t-1,t)){case"c":i=mu.ACE-1;break;case"d":i=gu.ACE-1;break;case"h":i=fu.ACE-1;break;case"s":i=vu.ACE-1}return i+L()(n)},n.removeCardFromDiffHandler=function(e){if("number"!==typeof e){var t=e.length,n=e.substring(0,t-1),i=-1;switch(e.substring(t-1,t)){case"s":i=1;break;case"c":i=2;break;case"d":i=3;break;case"h":i=4}this.boardGame.dynamicCardHandler.manualRemoveCardHash(i,L()(n))}else{var a=this.boardGame.dynamicCardHandler.getCardIdAndValueFromCardTag(e),s=a.cardId,r=a.cardValue;this.boardGame.dynamicCardHandler.manualRemoveCardHash(s,r)}},n.requestNewCard=function(e){var t=this.cardGroup.getFirstDead();if(t&&t instanceof el)return t.setTag(e),t.revive(),t.resetCardTint(),t.setOriginalCardIdx(-1),t;var n=new el(this.boardGame.scene,e);return this.cardGroup.add(n),n},n.setUpCardWhenContinueGame=function(e,t,n,i){var a=this.requestNewCard(e);if(e>100&&this.removeCardFromDiffHandler(e),t.addCard(a,!1),!(t instanceof Gp)){t.cards.pop();var s=t.getPlacingPositionForContinueGame(n),r=s.x,o=s.y;a.moveTo(r,o,300),t.cards.push(a)}a.setOriginalCardIdx(i);var c=this.boardGame.stock.getPlacingPosition(0),h=c.x,u=c.y;return a.updateCardStyle(),a.resetCardTint(),a.setFacing(!1),a.setPosition(h,u),a.setDepth(10),this.boardGame.gameplay.cardsLayer.add(a.bg),this.boardGame.gameplay.cardsLayer.add(a),this.boardGame.gameplay.cardsLayer.sortChildrenFlag=!1,a},n.killAllCards=function(){this.cardGroup.getChildren().forEach((function(e){e instanceof el&&e.active&&(e.moveTo(0,0),e.kill())})),this.cards=[]},n.getDeck=function(){return this.cards},t}(Rl),Zp=Fp,Up=function(){function e(e){this.boardGame=void 0,this.remainingCards=[],this.remainingCardsHash=[],this.curFaceUpCards=[],this.boardGame=e}var t=e.prototype;return t.init=function(){var e;this.remainingCards=[],this.remainingCardsHash=on()(e=Array(53)).call(e,0),this.curFaceUpCards=[];var t=this.boardGame.levelConfig.suits.length,n=this.getCardIdxList();if(1===t)for(var i=0;i<n.length;i++){for(var a=1;a<=8;a++)this.remainingCards.push(n[i]);this.remainingCardsHash[n[i]]=8}else if(2===t)for(var s=0;s<n.length;s++){for(var r=1;r<=4;r++)this.remainingCards.push(n[s]);this.remainingCardsHash[n[s]]=4}else for(var o=0;o<n.length;o++){for(var c=1;c<=2;c++)this.remainingCards.push(n[o]);this.remainingCardsHash[n[o]]=2}},t.getCardIdxList=function(){for(var e=this.boardGame.levelConfig.suits,t=e.length,n=[],i=0;i<t;i++){var a=0;switch(e[i][0]){case"s":a=0;break;case"c":a=1;break;case"d":a=2;break;case"h":a=3}for(var s=1;s<=13;s++)n.push(s+13*a)}return n},t.randomCardIdAndValue=function(){var e,t=0,n=0;if(Math.random()<.9){var i,a=[],s=0;this.remainingCardsHash.forEach((function(e,t){e>s?(a=[t],s=e):e===s&&a.push(t)})),t=a[Math.floor(Math.random()*a.length)],n=En()(i=this.remainingCards).call(i,t)}else n=Math.floor(Math.random()*this.remainingCards.length),t=this.remainingCards[n];var r=t%13===0?13:t%13,o=Math.ceil(this.remainingCards[n]/13);return this.remainingCardsHash[t]-=1,eu()(e=this.remainingCards).call(e,n,1),this.curFaceUpCards.push(t),{cardId:o,cardValue:r}},t.manualRemoveCardHash=function(e,t){var n,i,a=this.getCardHashIdx(e,t),s=En()(n=this.remainingCards).call(n,a);this.remainingCardsHash[a]-=1,eu()(i=this.remainingCards).call(i,s,1),this.curFaceUpCards.push(a)},t.getCardHashIdx=function(e,t){return 13*(e-1)+t},t.getCardIdAndValueFromCard=function(e){var t=e.getTag();return this.getCardIdAndValueFromCardTag(t)},t.getCardIdAndValueFromCardTag=function(e){var t=e%100;return{cardId:Math.floor(e/100),cardValue:t}},t.getCardIdFromCHI=function(e){return Math.floor((Math.abs(e)-1)/13)+1},t.getGoodInitCardIdAndValue=function(){var e=this,t=[];if(this.curFaceUpCards.forEach((function(n){e.remainingCardsHash[n+1]>0&&t.push(n+1),e.remainingCardsHash[n-1]>0&&t.push(n-1)})),0===t.length)return this.randomCardIdAndValue();var n,i,a=t[Math.floor(Math.random()*t.length)],s=En()(n=this.remainingCards).call(n,a),r=a%13===0?13:a%13,o=Math.ceil(this.remainingCards[s]/13);return this.remainingCardsHash[a]-=1,eu()(i=this.remainingCards).call(i,s,1),this.curFaceUpCards.push(a),{cardId:o,cardValue:r}},t.setCardTagOnReplay=function(e){var t=this.boardGame.replayCardHandler.replayCardStatus;if(t[e.originalCardIdx]>100){var n=t[e.originalCardIdx];e.setTag(n);var i=Math.floor(n/100),a=n%100%13===0?13:n%100%13;return this.manualRemoveCardHash(i,a),!0}return!1},t.setDynamicTagForBackfaceCard=function(e){if(!this.setCardTagOnReplay(e)){var t=this.boardGame.replayCardHandler;if(Math.random()<=.7){for(var n=[],i=0;i<this.boardGame.piles.length;i++){for(var a=this.boardGame.piles[i],s=null,r=a.cards.length-1;r>=0;r--){var o=a.cards[r];if(!o.isFacingUp()||!this.boardGame.mover.checkIfCardIsValidToMove(o)){if(!s)break;var c=this.getCardIdAndValueFromCard(s),h=c.cardId,u=c.cardValue,l=this.getCardHashIdx(h,u);this.remainingCardsHash[l+1]>0&&this.getCardIdFromCHI(l)===this.getCardIdFromCHI(l+1)&&n.push(l+1);break}s=o}if(a.cards.length>0){var d=a.getLastCard();if(d.isFacingUp()){var p=this.getCardIdAndValueFromCard(d),f=p.cardId,g=p.cardValue,m=this.getCardHashIdx(f,g);this.remainingCardsHash[m-1]>0&&this.getCardIdFromCHI(m)===this.getCardIdFromCHI(m-1)&&n.push(m-1)}}}if(0===(n=GameCore.Utils.Array.unique(n)).length){var v=this.randomCardIdAndValue(),y=v.cardId,T=v.cardValue;e.setTag(100*y+T),t.setReplayCardStatus(e.originalCardIdx,e.getTag())}else{var C,E,A=n[Math.floor(Math.random()*n.length)],S=En()(C=this.remainingCards).call(C,A),b=A%13===0?13:A%13,I=Math.ceil(this.remainingCards[S]/13);this.remainingCardsHash[A]-=1,eu()(E=this.remainingCards).call(E,S,1),this.curFaceUpCards.push(A),e.setTag(100*I+b),t.setReplayCardStatus(e.originalCardIdx,e.getTag())}}else{var w=this.randomCardIdAndValue(),P=w.cardId,k=w.cardValue;e.setTag(100*P+k),t.setReplayCardStatus(e.originalCardIdx,e.getTag())}}},t.setDynamicTagForDealingCards=function(e){var t=this;if(0!==e.length)for(var n=[],i=this.boardGame.replayCardHandler,a=0;a<e.length;a++){var s=e[a];if(!(s.getTag()>=100)&&!this.setCardTagOnReplay(s)){var r=Math.floor(3*e.length/5/2);if(a<e.length-r){this.setDynamicTagForBackfaceCard(s);var o=this.getCardIdAndValueFromCard(s),c=o.cardId,h=o.cardValue;n.push(this.getCardHashIdx(c,h))}else!function(){var e=[];if(n.forEach((function(n){t.remainingCardsHash.length>n+1&&t.remainingCardsHash[n+1]>0&&t.getCardIdFromCHI(n)===t.getCardIdFromCHI(n+1)&&e.push(n+1),t.remainingCardsHash[n-1]>0&&t.getCardIdFromCHI(n)===t.getCardIdFromCHI(n-1)&&e.push(n-1)})),0===e.length){var a=t.randomCardIdAndValue(),r=a.cardId,o=a.cardValue;s.setTag(100*r+o),i.setReplayCardStatus(s.originalCardIdx,s.getTag())}else{var c,h,u=e[Math.floor(Math.random()*e.length)],l=En()(c=t.remainingCards).call(c,u),d=u%13===0?13:u%13,p=Math.ceil(t.remainingCards[l]/13);t.remainingCardsHash[u]-=1,eu()(h=t.remainingCards).call(h,l,1),t.curFaceUpCards.push(u),s.setTag(100*p+d),i.setReplayCardStatus(s.originalCardIdx,s.getTag());var f=D()(n).call(n,(function(e){return e===u-1||e===u+1}));f&&eu()(n).call(n,f,1)}}()}}},e}(),zp=Up,Hp={UNCOVER_NEW_CARDS:500,HELPS_COMPLETE_SUIT:3e3,CARD_VALUE_MULTIPLIER:5,FACE_DOWN_CARD_COUNT_PENALTY:-10,EMPTY_PILE_PENALTY:-1e3},Wp={UNCOVER_POTENTIAL_STACK:200},Yp={SAME_SUIT_MOVE:200,MOVE_KING_TO_EMPTY_PILE:300,MOVE_CARD_TO_EMPTY_PILE:100,MOVING_ONE_PILE_TO_ANOTHER:-5e3,CAPTURING_FULL_STACK:5e3},Kp={DIFFERENT_SUIT_MOVE:-500},Vp=function(){function e(e,t){this.scene=void 0,this.boardGame=void 0,this.acceptedMoveList=void 0,this.scene=e,this.boardGame=t,this.acceptedMoveList=[]}var t=e.prototype;return t.addMoveToAcceptedList=function(e){var t=this.generateMoveHash(e);this.acceptedMoveList.push(t)},t.rollbackOneMoveFromAcceptedList=function(){this.acceptedMoveList.pop()},t.resetAcceptedList=function(){this.acceptedMoveList=[]},t.findBestMoves=function(){var e=this.findMoveableCards(!0),t=this.findAllAvailableMoves(e,!0);return t.length>=15?A()(t).call(t,0,15):t},t.findMoveableCards=function(e){void 0===e&&(e=!1);for(var t=[],n=this.boardGame,i=0;i<n.piles.length;i++){var a=n.piles[i];t.push.apply(t,this.calculateTopCardStackPriority(a,e))}return ia()(t).call(t,(function(e,t){return t.priority-e.priority})),t},t.findAllAvailableMoves=function(e,t){var n=this;void 0===t&&(t=!1);var i=[];if(0===e.length)return i;for(var a=this.boardGame,s=a.piles,r=a.foundations,o=this.boardGame.levelConfig.suits,c=function(a){var c,h=e[a],u=h.card,l=h.priority;if(!(u.placement instanceof al))return"continue";var d=En()(c=u.placement.cards).call(c,u),p=u.placement.cards.length-d,f=u.placement.cards;if(u.isKing()&&13===p){var g=D()(r).call(r,(function(e){return e.canBePlace(u)}));if(!g)return"continue";var m={targetCard:u,targetPlacement:g,movePriority:l+Yp.CAPTURING_FULL_STACK};return i.push(m),"continue"}s.forEach((function(e){var a;if(e.canBePlace(u)&&e!==u.placement){var s=l,r=e.getTopCardStackData();if(r){var c=e.cards[e.cards.length-1].getTag()-u.getTag()===1;c?s+=Yp.SAME_SUIT_MOVE:o.length>1&&(s+=Kp.DIFFERENT_SUIT_MOVE),c&&r.length+p===13?s+=Yp.CAPTURING_FULL_STACK:s+=r.length}else p===f.length?s+=Yp.MOVING_ONE_PILE_TO_ANOTHER:u.isKing()?s+=Yp.MOVE_KING_TO_EMPTY_PILE:s+=Yp.MOVE_CARD_TO_EMPTY_PILE;var h={targetCard:u,targetPlacement:e,movePriority:s};t&&be()(a=n.acceptedMoveList).call(a,n.generateMoveHash(h))||i.push(h)}}))},h=0;h<e.length;h++)c(h);return ia()(i).call(i,(function(e,t){return t.movePriority-e.movePriority})),i},t.calculateTopCardStackPriority=function(e,t){var n=this;void 0===t&&(t=!1);var i=e.getTopCardStackData(),a=[];if(!i)return a;for(var s=this.boardGame.piles.some((function(e){return e.isEmpty()})),r=this.boardGame.stock.isEmpty(),o=function(o){var c;if(o===i.length){var h,u,l=e.cards.length-i.length,d=e.cards[l],p=e.cards[l-1],f=D()(h=n.boardGame.piles).call(h,(function(e){return e.canBePlace(d)&&e!==d.placement})),g=13===i.length&&d.isKing();if(!f&&!g)return{v:a};var m=0;if(p&&!p.isFacingUp())m+=Hp.UNCOVER_NEW_CARDS,m+=e.getFaceDownCardAmount()*Hp.FACE_DOWN_CARD_COUNT_PENALTY;m+=d.getTag()%100*Hp.CARD_VALUE_MULTIPLIER,m+=l,0===l&&s&&!r&&(m+=Hp.EMPTY_PILE_PENALTY);var v=D()(u=n.boardGame.piles).call(u,(function(e){var t=e.getTopCardStackData();return!!t&&(e.getLastCard().getTag()-d.getTag()===1&&t.length+i.length===13)}));v&&(m+=Hp.HELPS_COMPLETE_SUIT),g&&(m+=Yp.CAPTURING_FULL_STACK);var y=n.boardGame.levelConfig.suits;return t&&y.length>1&&(m+=n.extraPriorityCalculationForMultipleSuits(l,e)),a.push({card:d,priority:m}),"continue"}var T=e.cards.length-o,C=e.cards[T],E=D()(c=n.boardGame.piles).call(c,(function(t){if(t===e)return!1;var n=t.getTopCardStackData();return!!n&&(t.cards[t.cards.length-1].getTag()-C.getTag()===1&&n.length+o===13)}));if(!E)return"continue";a.push({card:C,priority:Hp.HELPS_COMPLETE_SUIT})},c=1;c<=i.length;c++){var h=o(c);if("continue"!==h&&"object"===typeof h)return h.v}return a},t.extraPriorityCalculationForMultipleSuits=function(e,t){var n=0;if(0===e)return 0;var i=this.findStackAfterCardForMulitpleSuit(e,t);if(!i)return 0;var a=t.cards[e-i.length],s=!1,r=!1;return this.boardGame.piles.forEach((function(e){if(e!==t){e.canBePlace(a)&&(r=!0);var n=e.getTopCardStackData();if(n){var i=e.cards[e.cards.length-n.length];a.getTag()-i.getTag()===1&&(s=!0)}}})),(s||r)&&(n+=Wp.UNCOVER_POTENTIAL_STACK),n},t.findStackAfterCardForMulitpleSuit=function(e,t){if(0===e)return null;var n=t.cards[e-1],i=Math.floor(n.getTag()/100),a=n.getTag()%100,s=1;if(!n.isFacingUp())return{color:i,length:s};for(var r=e-2;r>=0;r--){var o=t.cards[r],c=o.getTag()%100;if(Math.floor(o.getTag()/100)!==i)break;if(c-1!==a)break;if(!o.isFacingUp())break;a=c,s++}return{color:i,length:s}},t.generateMoveHash=function(e){var t,n,i,a=e.targetCard,s=e.targetPlacement,r=a.placement,o=""+r.getIdx(),c=""+s.getIdx();e.targetPlacement instanceof Ep&&(c+="foundation"+s.getIdx());var h=""+En()(t=r.cards).call(t,e.targetCard),u=De()(n=r.cards).call(n,(function(e){return e.getTag()})),l=De()(i=s.cards).call(i,(function(e){return e.getTag()}));return o+"-"+c+"-"+h+"-"+u.join(",")+"-"+l.join(",")},t.handleNonRelaxedDealCards=function(){var e=[],t=[];if(this.boardGame.piles.forEach((function(n){n.isEmpty()?e.push(n):n.cards.length>=2&&t.push(n)})),0!==e.length){ia()(t).call(t,(function(e,t){return e.cards.length-t.cards.length}));for(var n=[],i=0;i<t.length;i++){var a,s=t[i],r=x()(a=[]).call(a,s.cards);r.shift(),Xh()(r).call(r),n.push.apply(n,r)}if(n.length<e.length)this.boardGame.mover.deal();else{for(var o=0;o<e.length;o++){var c=n.shift(),h=e[o];if(!c)break;this.boardGame.hint.autoPlayMove({targetCard:c,targetPlacement:h,movePriority:0})}this.boardGame.mover.deal()}}else this.boardGame.mover.deal()},e}(),jp=Vp,Jp=function(){function e(e){this.boardGame=void 0,this.replayCardStatus=void 0,this.boardGame=e,this.resetReplayCardStatus()}var t=e.prototype;return t.setReplayCardStatus=function(e,t){this.replayCardStatus[e]=t},t.resetReplayCardStatus=function(){var e;this.replayCardStatus=on()(e=Array(13*of)).call(e,0)},e}(),Xp="abcdefghijklm",qp="nopqrstuvwxyz",Qp="ABCDEFGHIJKLM",$p="NOPQRSTUVWXYZ",ef=function(e){for(var t=[],n=0;n<e.length;n++){var i=e[n],a=En()(Xp).call(Xp,i);-1==a?-1==(a=En()(qp).call(qp,i))?-1==(a=En()(Qp).call(Qp,i))?-1==(a=En()($p).call($p,i))||t.push(400+a+1):t.push(300+a+1):t.push(200+a+1):t.push(100+a+1)}return t};function tf(e,t){var n=En()(e).call(e,t);-1!==n&&eu()(e).call(e,n,1)}function nf(e){switch(e){case 1:return["spades"];case 2:return["hearts","spades"];case 4:return["clubs","hearts","spades","diamonds"]}return[]}function af(e,t,n){var i=[1];function a(e){for(var t=i.length;t<=e;t++)i[t]=i[t-1]*t;return i[e]}for(var s=[],r=t-1;r>=0;r--){var o=Math.floor(e/a(r));e%=a(r),s.push(eu()(n).call(n,o,1)[0])}return s}var sf=function(e){var t;if(e.length<99)return{type:"dynamic",suits:nf(L()(e.split("|")[1])),difficulty:"dynamic",startingLayout:ef(e)};var n=A()(e).call(e,0,98),i=[];[Xp,qp,Qp,$p].forEach((function(e,t){for(var a=0;a<n.length;){if(be()(e).call(e,n[a]))return void i.push(t+1);a++}}));for(var a=[];a.length<104;)for(var s=0;s<i.length;s++)for(var r=0;r<13;r++)a.push(100*i[s]+(r+1));var o=ef(n),c=function(e,t){for(var n=0;n<t.length;n++)tf(e,t[n]);return e}(a,o),h=function(e){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",n=0,i=0;i<e.length;i++){var a=e.charAt(i);n=64*n+En()(t).call(t,a)}return n}(A()(e).call(e,98,100));return{type:"prebuilt",suits:nf(i.length),difficulty:"random",startingLayout:x()(t=[]).call(t,o,af(h,6,ia()(c).call(c)))}},rf=10,of=8,cf=54,hf=Gn.Z.GAMEPLAY_DEFAULT,uf=hf.KEY,lf=hf.FRAME,df=function(e){function t(t){var n;(n=e.call(this,t)||this).scene=void 0,n.gameplay=void 0,n.deck=void 0,n.stock=void 0,n.piles=void 0,n.foundations=void 0,n.hint=void 0,n.mover=void 0,n.bestMoveFinder=void 0,n.dynamicCardHandler=void 0,n.isAutoPlay=void 0,n.isRelaxedSpider=void 0,n.timeScoreBonusTween=void 0,n.levelConfig=void 0,n.suitSize=void 0,n.autoCompleteData=void 0,n.replayCardHandler=void 0,n.gameplay=t,n.scene=t.scene,n.gameType=is.Z.SPIDER,n.dynamicCardHandler=new zp((0,As.Z)(n)),n.bestMoveFinder=new jp(n.scene,(0,As.Z)(n)),n.deck=new Zp((0,As.Z)(n)),n.stock=new Gp((0,As.Z)(n)),n.piles=[],n.foundations=[],n.autoCompleteData={kingPiles:null,nonKingPiles:null},n.hint=new Sp((0,As.Z)(n)),n.mover=new Rp((0,As.Z)(n)),n.boardState=ku.NONE,n.canAutoComplete=!1,n.isAutoPlay=!1,n.isRelaxedSpider=!0,n.replayCardHandler=new Jp((0,As.Z)(n)),n.listenEvents(),n.createAutoWinButton();for(var i=0;i<8;i++){var a=new Ep((0,As.Z)(n));a.setIdx(i),n.foundations.push(a)}for(var s=0;s<rf;s++){var r=new al((0,As.Z)(n));r.setIdx(s),n.piles.push(r)}return n.alignBoard(),n}(0,o.Z)(t,e);var n=t.prototype;return n.initGameWithBoardState=function(){var t=(0,r.Z)(l().mark((function t(n){var i,a,s,r,o,c,h,u,d,p,f,g,m,v,y,T,C,E,A,S,b,I,w,P,k,_,x;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.prototype.initGameWithBoardState.call(this,n),n.currentState){t.next=3;break}return t.abrupt("return");case 3:return this.clearOldBoard(),i=n.suits||[],a=n.currentState,s=a.pileData,r=a.stock,o=a.foundationData,this.levelConfig={type:"prebuilt",difficulty:"random",suits:i,startingLayout:[]},this.suitSize=pf(i),this.boardState=ku.DEALING,t.next=12,Au(this.scene,300);case 12:this.scene.audio.playSound(Ls.Z.SHUFFLE),c=[],h=ae()(o),u=0;case 16:if(!(u<h.length)){t.next=28;break}if(d=o[h[u]],p=d.split(","),f=L()(h[u].substring(10)),""!==p[0]){t.next=22;break}return t.abrupt("continue",25);case 22:for(g=0;g<p.length;g++)m=p[g],(v=this.deck.createCardForJourneyMode(m))&&(v.setFacing(!0),this.foundations[f].addCard(v,!0));return t.next=25,Au(this.scene,30);case 25:u++,t.next=16;break;case 28:y=ae()(s),T=Math.max.apply(Math,De()(y).call(y,(function(e){return s[e].length}))),C=0;case 31:if(!(C<T)){t.next=53;break}E=0;case 33:if(!(E<y.length)){t.next=50;break}if(A=L()(y[E].substring(4)),!(""===(S=s[y[E]].split(","))[0]||S.length-1<C)){t.next=38;break}return t.abrupt("continue",47);case 38:if(b=S[C],I="-"!==b[0],w=this.deck.createCardForJourneyMode(b),E%2==0&&this.scene.vibration.performVibrating(10),!w){t.next=47;break}return this.piles[A].addCard(w,!0),I&&c.push(w),t.next=47,Au(this.scene,30);case 47:E++,t.next=33;break;case 50:C++,t.next=31;break;case 53:if(""!==(P=r.split(","))[0])for(k=0;k<P.length;k++)_=P[k],(x=this.deck.createCardForJourneyMode(_))&&(this.stock.addCard(x,!1),x.setFacing(!1));return t.next=57,Au(this.scene,100);case 57:return c.forEach((function(e){e.setFacingWithFlippingAnim(!0),e.setInteractive()})),t.next=60,Au(this.scene,350);case 60:return this.piles.forEach((function(e){e.updateCardTintByAvailability(),e.resizePile()})),t.next=63,Au(this.scene,400);case 63:this.boardState=ku.IDLE,this.checkGameWin(),this.mover.enableInput();case 66:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),n.getLevelStartEventData=function(){var t=e.prototype.getLevelStartEventData.call(this);return(0,s.Z)({},t,{suit_size:this.suitSize,relaxed_spider:this.isRelaxedSpider})},n.checkAutoCompleted=function(){if(!this.scene.player.getPlayerSettings().autoComplete)return this.canAutoComplete=!1,void this.autoCompleteBtn.kill();var e=this.checkAutoCompletePossible(),t=e.canWin,n=e.autoCompleteData;t?(this.canAutoComplete=!0,this.showAutoCompleteButton(!0)):(this.canAutoComplete=!1,this.showAutoCompleteButton(!1)),this.autoCompleteData=n},n.getMaxHeightTableau=function(){var e=Qo.instance.isChallengeMode()?55:0,t=this.scene.footer;return t.y-t.height/2-this.piles[0].y+xr.CARD_HEIGHT/2-e},n.getStatistics=function(){return{score:this.score,time:this.time,moves:this.moves}},n.getGameOptions=function(){return{suitSize:this.suitSize,difficulty:this.levelConfig.difficulty}},n.getCurrentBoard=function(){var e,t,n,i,a=this.replayCardHandler.replayCardStatus,s=De()(e=this.stock.cards).call(e,(function(e){return e.getSavingData()})),r=De()(t=this.piles).call(t,(function(e){var t;return De()(t=e.cards).call(t,(function(e){return e.getSavingData()}))})),o=De()(n=this.piles).call(n,(function(e){var t;return Qh()(t=e.cards).call(t,(function(e){return e.isFacingUp()}))})),c=De()(i=this.foundations).call(i,(function(e){var t;return De()(t=e.cards).call(t,(function(e){return e.getSavingData()}))})),h=this.getTime(),u=this.getScore(),l=this.getMoves(),d=this.mover.undos,p={seed:this.gameplay.getSeed(),stock:s,piles:r,faceBackOfPiles:o,foundations:c,score:u,time:h,moves:l,suitSize:this.suitSize,difficulty:this.levelConfig.difficulty,movesData:d,updatedAt:(new Date).getTime(),replayCardStatus:a,settings:{relaxedSpider:this.getCurrentGameRelaxedSpiderSetting()}};return Phaser.Utils.Objects.DeepCopy(p)},n.show=function(){var t;e.prototype.show.call(this),x()(t=[]).call(t,this.piles,this.foundations,[this.stock]).forEach((function(e){return e.show()}))},n.hide=function(){var t;e.prototype.hide.call(this),x()(t=[]).call(t,this.piles,this.foundations,[this.stock]).forEach((function(e){return e.hide()}))},n.addTimer=function(){var e=this;this.timer=this.scene.time.addEvent({delay:50,repeat:-1,callback:function(){e.boardState===ku.AUTO_COMPLETING?(e.autoCompleteGame(),e.scene.vibration.performVibrating(20)):e.timer.paused=!0},paused:!0})},n.getCurrentGameRelaxedSpiderSetting=function(){return this.isRelaxedSpider},n.setUpBoard=function(e,t){void 0===e&&(e=!1),this.levelConfig=t;var n=t.suits,i=pf(t.suits);if(this.suitSize=i,!e){switch(this.score=1e3,n.length){case 2:this.score=1500;break;case 4:this.score=2e3}this.deck.init()}},n.increaseScore=function(e){this.score+=e},n.decreaseScore=function(e){this.score=Math.max(0,this.score-e)},n.getScore=function(){return this.score},n.getTime=function(){return Math.round(this.time)},n.getMoves=function(){return this.moves},n.listenEvents=function(){var e=this;this.scene.events.on("settings-changed",(function(t){e.gameType==Rr.gameType&&("autoComplete"===t&&e.checkAutoCompleted(),t==ss.leftHanded&&e.alignBoard())}))},n.autoCompleteGame=function(){var e=(0,r.Z)(l().mark((function e(){var t,n,i,a,s,r,o,c,h,u;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=this.autoCompleteData,n=t.kingPiles,i=t.nonKingPiles,a=[],s=[],null!==n&&a.push.apply(a,n),null!==i&&s.push.apply(s,i),r=0;case 6:if(!(r<a.length)){e.next=16;break}if(o=a[r],!(c=o.getTopCardStackData())||13!==c.length){e.next=13;break}return this.mover.handleClickOnCard(o.cards[0]),e.next=13,Au(this.scene,30);case 13:r++,e.next=6;break;case 16:h=0;case 17:if(!(h<s.length)){e.next=25;break}return(u=s[h].cards[0])&&this.mover.handleClickOnCard(u),e.next=22,Au(this.scene,30);case 22:h++,e.next=17;break;case 25:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.alignBoard=function(){if(0!==this.piles.length){var e=this.scene.world.getWorldSize().width/2,t=xr.FOUNDATION_Y+30,n=this.getHorizontalPileSpace(),i=this.scene.world.isLandscape()?1.3:1,a=xr.SPACE_BETWEEN_PILE_AND_FOUNDATION*i,s=this.scene.player.getPlayerSettings().leftHanded,r=this.isLeftHandedAlign!=s;this.isLeftHandedAlign=s,this.placeCenter(this.piles,e,t+a,n);var o=this.piles[0],c=this.piles[this.piles.length-1];s?(this.stock.setPosition(o.x,t),this.placeFoundations(this.foundations,c.x,t,!0)):(this.stock.setPosition(c.x,t),this.placeFoundations(this.foundations,o.x,t)),r?this.deck.alignCurrentDeck():this.deck.align()}},n.getHorizontalPileSpace=function(){var e=Math.floor((this.scene.gameZone.width-10*xr.CARD_WIDTH)/11)+xr.CARD_WIDTH;return Math.min(e,xr.MAX_HORIZONTAL_PILE_SPACE)},n.placeCenter=function(e,t,n,i,a){void 0===a&&(a=0);for(var s=e.length,r=t-(s/2-.5-a)*i,o=0;o<s;o++)e[o].setPosition(r+o*i,n)},n.placeFoundations=function(e,t,n,i){void 0===i&&(i=!1);for(var a=e.length,s=t,r=.4*xr.CARD_WIDTH,o=0;o<a;o++){var c=i?-1:1;e[o].setPosition(s+o*r*c,n)}},n.startGame=function(){var e=(0,r.Z)(l().mark((function e(t){var n,i,a,r;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isDealing()){e.next=2;break}return e.abrupt("return");case 2:return t.options&&t.options.suitSize&&(this.suitSize=t.options.suitSize),this.scene.gameplay.tryCreateShortcut(),a=(null==(n=t.options)?void 0:n.relaxedSpider)||!0===this.scene.player.getPlayerSetting("relaxedSpider"),this.setupGameSettings({isRelaxedSpider:a}),r=t.seed,this.levelConfig=(0,s.Z)({},sf(r),{difficulty:(null==(i=t.options)?void 0:i.difficulty)||"random"}),this.clearOldBoardAndInitDynamicCard(),this.setUpBoard(!1,this.levelConfig),this.alignBoard(),e.next=13,this.startClassicGame(this.levelConfig,r);case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.startClassicGame=function(){var e=(0,r.Z)(l().mark((function e(t,n){var i,a,s,r,o,c,h=this;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.scene.events.emit(Lr.GAME_START),this.logStartGameEvent(),this.boardState=ku.DEALING,this.deck.reset(),a=x()(i=[]).call(i,this.deck.getDeck()),e.next=7,Au(this.scene,300);case 7:this.playDealingSound(),s=0;case 9:if(!(s<cf)){e.next=20;break}if(r=a.pop(),o=s%rf,s%2==0&&this.scene.vibration.performVibrating(10),!r){e.next=17;break}return this.piles[o].addCard(r,!0),e.next=17,Au(this.scene,30);case 17:s++,e.next=9;break;case 20:return a.forEach((function(e){return h.stock.addCard(e,!1)})),e.next=23,Au(this.scene,100);case 23:for(c=0;c<rf;c++)this.piles[c].faceUpLast();return this.gameplay.saveSystem.saveCurrentBoardData(),e.next=27,Au(this.scene,400);case 27:this.boardState=ku.IDLE,this.checkGameWin(),this.mover.enableInput();case 30:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}(),n.continueGame=function(){var e=(0,r.Z)(l().mark((function e(t){var n,i,a,r,o,c,h,u,d,p,f,g,m,v,y,T,C,E,A,S=this;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.scene.analytics.event(Nn._.LEVEL_CONTINUE,{game_type:is.Z.SPIDER}),!this.isDealing()){e.next=3;break}return e.abrupt("return");case 3:return this.scene.gameplay.tryCreateShortcut(),this.scene.gameplay.startGameCount+=1,a=t.settings.relaxedSpider,this.setupGameSettings({isRelaxedSpider:a}),r=t.stock,o=t.piles,c=t.faceBackOfPiles,h=t.foundations,u=t.time,d=t.score,p=t.moves,f=t.movesData,g=t.replayCardStatus,m=t.suitSize,v=t.difficulty,y=t.seed,this.replayCardHandler.replayCardStatus=x()(n=[]).call(n,g),this.levelConfig=(0,s.Z)({},sf(y),{difficulty:v}),this.suitSize=m,this.clearOldBoardAndInitDynamicCard(),this.setUpBoard(!0,this.levelConfig),this.alignBoard(),this.boardState=ku.DEALING,this.deck.reset(),e.next=18,Au(this.scene,300);case 18:return this.time=u,this.score=d,this.moves=p,this.playDealingSound(),e.next=24,this.stock.addCardsFromSaveData(r);case 24:T=0;case 25:if(!(T<h.length)){e.next=32;break}return C=h[T],e.next=29,this.foundations[T].addCardsFromSaveData(C);case 29:T++,e.next=25;break;case 32:E=0;case 33:if(!(E<o.length)){e.next=40;break}return A=o[E],e.next=37,this.piles[E].addCardsFromSaveData(A,c[E]);case 37:E++,e.next=33;break;case 40:return x()(i=[this.stock]).call(i,this.piles,this.foundations).forEach((function(e){var t;S.deck.cards=x()(t=[]).call(t,S.deck.cards,e.cards)})),e.next=43,Au(this.scene,300);case 43:return this.piles.forEach((function(e){e.updateCardTintByAvailability(),e.resizePile()})),e.next=46,Au(this.scene,100);case 46:this.mover.undos=JSON.parse(M()(f)),this.boardState=ku.IDLE,this.checkGameWin(),this.mover.enableInput();case 50:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.checkAutoCompletePossible=function(){var e=[],t=[],n={canWin:!1,autoCompleteData:{kingPiles:null,nonKingPiles:null}};if(this.stock.cards.length>0)return n;for(var i=0;i<this.piles.length;i++){var a=this.piles[i],s=a.cards.length;if(0!=s){var r=a.cards[0],o=a.getTopCardStackData();if(o){if(o.length!==s)return n;r&&r.isKing()?e.push(a):t.push(a)}}else t.push(a)}return 0==e.length||(n.canWin=!0,n.autoCompleteData={kingPiles:e,nonKingPiles:t}),n},n.checkGameWin=function(){this.isGameWon()?this.handleGameWon():(this.isIdle()||this.isPlaying())&&this.checkAutoCompleted()},n.outOfMove=function(){this.boardState=ku.GAME_OVER,this.isAutoPlay=!1,this.gameplay.handleGameOver(!1),this.gameplay.saveSystem.clearLastGame()},n.setupGameSettings=function(e){this.isRelaxedSpider=e.isRelaxedSpider},n.clearOldBoard=function(){this.boardState=ku.NONE,this.canAutoComplete=!1,this.isAutoPlay=!1,this.moves=0,this.time=0,this.mover.disableInput(),this.gameplay.boardGame.autoCompleteBtn.kill(),this.piles.forEach((function(e){return e.clear()})),this.foundations.forEach((function(e){return e.clear()})),this.stock.clear(),this.stock.revive(),this.mover.clear(),this.hint.clear(),this.deck.killAllCards(),this.bestMoveFinder.resetAcceptedList()},n.clearOldBoardAndInitDynamicCard=function(){this.clearOldBoard(),this.dynamicCardHandler.init()},n.resetBoard=function(){this.clearOldBoardAndInitDynamicCard()},n.getWonCelebrationDelayTime=function(){return 1e3},n.getTimeScoreBonusDuration=function(){return 0},n.handleGameWon=function(){var e=this;if(this.boardState!==ku.GAME_OVER){this.mover.disableInput(!0),this.autoCompleteBtn.kill(),this.boardState=ku.GAME_OVER,this.scene.audio.playSound(Ls.Z.WON),this.gameplay.saveSystem.clearLastGame(),this.boardState=ku.GAME_OVER,this.handleNewUserEasyGameCount();var t=this.getWonCelebrationDelayTime();this.scene.time.delayedCall(t,(function(){e.handleTimeScoreBonus()}))}},n.handleNewUserEasyGameCount=function(){var e=this.scene.player.getCustomData("newUserEasyGameCount");!GameCore.Utils.Valid.isNumber(e)||e<=0?this.scene.player.setMultiCustomData({newUserEasyGameCount:0}):this.scene.player.setMultiCustomData({newUserEasyGameCount:e-1})},n.handleTimeScoreBonus=function(){var e,t=this,n=0===this.time?0:Math.floor(7e5/this.time*1e3),i=(this.time,this.score);null==(e=this.timeScoreBonusTween)||e.stop(),this.timeScoreBonusTween=this.scene.tweens.addCounter({from:0,to:1500,duration:this.getTimeScoreBonusDuration(),onUpdate:function(e){var a=e.getValue(),s=i+a/1500*n;t.score=Math.floor(s)},onComplete:function(){t.scene.time.delayedCall(300,(function(){t.gameplay.handleGameOver(!0)}))}})},n.update=function(e){(this.isPlaying()||this.isAutoCompleting())&&(this.time+=e),this.isPlaying()&&(this.timeToSaveBoardData+=e,this.timeToSaveBoardData>5e3&&(this.gameplay.saveSystem.saveCurrentBoardData(),this.timeToSaveBoardData=0)),this.stock.update(e),this.mover.update(),this.hint.update(e),this.mover.isPicked()&&this.hint.resetAutoHintTime(),this.scene.footer.undoBtn.setDisabled(0==this.mover.undos.length||!(this.isPlaying()||this.isIdle()))},n.getVerticalSpacePile=function(){return xr.VERTICAL_PILE_SPACE},n.generateBoardStateHash=function(){var e="";return this.piles.forEach((function(t){0===t.cards.length?e+="EP":t.cards.forEach((function(t){e+=t.getTag().toString()}))})),e+="-",this.foundations.forEach((function(t){0!==t.cards.length?e+="1":e+="0"})),e+="-",0===this.stock.cards.length?e+="ES":(this.stock.cards.forEach((function(t){e+=t.getTag().toString()})),e)},n.createAutoPlay=function(){var e=this;this.autoPlayBtn=new Ol.Z(this.scene,35,35);var t=this.scene.add.image(0,0,uf,lf.IC_BG_OFF);t.setWorldSize(35,35);var n=this.scene.make.bitmapText({font:Rc.Z.PRIMARY.KEY,size:this.scene.fontSize(10),text:"Auto\nPlay",origin:{x:.5,y:.5}});n.setCenterAlign(),this.autoPlayBtn.add([t,n]);var i=this.scene.time.addEvent({delay:50,repeat:-1,callback:function(){return e.isAutoPlay&&e.boardState!==ku.GAME_OVER?(e.isIdle()&&(e.boardState=ku.PLAYING),e.canAutoComplete?(e.isAutoPlay=!0,void a()):void e.hint.autoPlayStep()):(e.isAutoPlay=!0,void a())},paused:!0}),a=function(){i.paused?(n.setText("Stop"),i.paused=!1,e.isAutoPlay=!0):(n.setText("Auto\nPlay"),i.paused=!0,e.isAutoPlay=!1)};this.autoPlayBtn.onClick=a,this.debugButtons.push(this.autoPlayBtn)},n.createAutoStepPlay=function(){var e,t=this;this.autoPlayStepBtn=new Ol.Z(this.scene,35,35);var n=this.scene.add.image(0,0,uf,lf.IC_BG_OFF);n.setWorldSize(35,35);var i=this.scene.make.bitmapText({font:Rc.Z.PRIMARY.KEY,size:this.scene.fontSize(10),text:"Step",origin:{x:.5,y:.5}});i.setCenterAlign(),null==(e=this.autoPlayStepBtn)||e.add([n,i]),this.autoPlayStepBtn.onClick=function(){t.isIdle()&&(t.boardState=ku.PLAYING),t.isPlaying()&&t.hint.autoPlayStep()},this.debugButtons.push(this.autoPlayStepBtn)},t}(ld);function pf(e){switch(e.length){case 1:default:return"one";case 2:return"two";case 4:return"four"}}var ff=df,gf=GameCore.Configs.Ads.InterstitialAdOptions.breakAdsConfig,mf=gf.secondsBetweenBreakAds,vf=gf.showOnFirstFoundationNewMatch,yf=gf.showOnFirstFoundationSession,Tf=function(){function e(e){this.scene=void 0,this.lastBreakAdTime=void 0,this.isFirstFoundation=void 0,this.isShowingAds=void 0,this.scene=e,this.lastBreakAdTime=0,this.isFirstFoundation=vf,this.isShowingAds=!1}var t=e.prototype;return t.canShowCompleteStackAd=function(){return!(!1===this.scene.ads.enabled||!vf)&&(0!==this.lastBreakAdTime||yf?vf?this.isFirstFoundation&&!this.isShowingAds:Date.now()-this.lastBreakAdTime>1e3*mf&&!this.isShowingAds:(this.lastBreakAdTime=1,this.isFirstFoundation=!1,!1))},t.resetBreakAdsOnFirstFoundation=function(){this.isFirstFoundation=!0},t.handleShowAds=function(){var e=(0,r.Z)(l().mark((function e(){var t;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.scene.audio,this.canShowCompleteStackAd()){e.next=3;break}return e.abrupt("return");case 3:return e.prev=3,this.isShowingAds=!0,this.isFirstFoundation=!1,t.pauseMusic(),t.muteAll(),this.scene.scene.pause(),"\nGreat job! Rest up for a bit...",this.scene.game.globalScene.screen.open(Os.o4.NOTIFY_SCREEN,{message:"\nGreat job! Rest up for a bit...",duration:0,loading:!0}),e.next=13,new(h())((function(e){return setTimeout(e,1800)}));case 13:return e.next=15,this.scene.game.ads.showInterstitialAdAsync();case 15:this.lastBreakAdTime=Date.now(),e.next=21;break;case 18:e.prev=18,e.t0=e.catch(3);case 21:return e.prev=21,window.GameSDK.isAudioEnabled()&&(t.unmuteAll(),t.playMusic()),this.scene.scene.resume(),this.scene.game.ads.preloadInterstitialAdAsync().catch((function(){})),this.isShowingAds=!1,this.scene.game.globalScene.screen.close(Os.o4.NOTIFY_SCREEN),e.finish(21);case 28:case"end":return e.stop()}}),e,this,[[3,18,21,28]])})));return function(){return e.apply(this,arguments)}}(),e}(),Cf=Tf,Ef=function(e){function t(t){var n;return(n=e.call(this)||this).scene=void 0,n.boardGame=void 0,n.solver=void 0,n.seed=void 0,n.saveSystem=void 0,n.confettiSmallFallDown=void 0,n.cardsLayer=void 0,n.startGameCount=void 0,n.gameType=void 0,n.gameCache=void 0,n.breakAdsHandler=void 0,n.finishGame=(0,r.Z)(l().mark((function e(){var t;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.boardGame.isGameOver()){e.next=2;break}return e.abrupt("return");case 2:return n.saveSystem.clearLastGame(),e.next=5,n.handleShowInterstitialAd();case 5:return t=n.boardGame.getScore(),e.next=8,n.scene.storage.dispatch(Zr(t,Rr.gameType));case 8:case"end":return e.stop()}}),e)}))),n.finishJourneyGame=(0,r.Z)(l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.boardGame.isGameOver()){e.next=2;break}return e.abrupt("return");case 2:return n.saveSystem.clearLastGame(),e.next=5,n.handleShowInterstitialAd();case 5:case"end":return e.stop()}}),e)}))),n.showNotifyNoAds=function(e){e&&e.name!==Os.o4.NOTIFY_SCREEN||n.scene.game.globalScene.screen.open(Os.o4.NOTIFY_SCREEN,{message:"noAdsToDisplay",duration:2e3,loading:!1})},n.showNotifySkipAds=function(){n.scene.game.globalScene.screen.open(Os.o4.NOTIFY_SCREEN,{message:"Sorry, No Rewards!\nYou have cancelled the ad!",duration:3e3,loading:!1})},n.scene=t,n.startGameCount=0,n.cardsLayer=t.add.layer(),n.cardsLayer.setDepth(Dn.Z.CARD),n.gameCache=new(ne()),n.solver=new Id,n.saveSystem=new kd((0,As.Z)(n)),n.breakAdsHandler=new Cf(t),n.createConfetti(),n}(0,o.Z)(t,e);var n=t.prototype;return n.getSeed=function(){return this.seed},n.setSeed=function(e){this.seed=e},n.isAvailableGameType=function(e){return this.gameCache.has(e)},n.switchGameType=function(e){if(this.gameType!==e){if(this.boardGame&&(this.scene.gameplay.saveSystem.saveCurrentBoardData(),this.boardGame.hide(),this.boardGame.mover.disableInput()),this.seed="",this.gameType=e,!this.isAvailableGameType(e))switch(e){case is.Z.FREE_CELL:this.gameCache.set(e,new vp(this));break;case is.Z.KLONDIKE:this.gameCache.set(e,new Sd(this));break;case is.Z.SPIDER:this.gameCache.set(e,new ff(this));break;default:throw new Error("Invalid game type")}var t=this.gameCache.get(e);if(!t)throw new Error("Board Game not found");this.boardGame=t,this.saveSystem.gameType=e,this.boardGame.updateLeftHandedUI(),this.boardGame.show(),this.boardGame.mover.enableInput()}},n.startJourneyMode=function(){var e=(0,r.Z)(l().mark((function e(){var t,n;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.scene.gameTypeManager.switchGameType(Rr.filterGameType,!0),this.boardGame.showAutoCompleteButton(!1),this.boardGame.clearOldBoard(),e.next=5,fc();case 5:return e.next=7,this.scene.storage.dispatch(function(){var e=(0,r.Z)(l().mark((function e(t){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{t(Go()),t(dc("journey"))}catch(n){(0,i.tO)(n)}case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 7:return this.saveSystem.clearLastGame(),(t=this.scene.journeyLevelMechanicManager.getMissionDescription())&&this.scene.header.journeyInfo&&this.scene.header.journeyInfo.setDescription(t),e.next=13,this.playMissionWelcomeAnimation();case 13:n=this.scene.journey.getCurrentMission(),this.handleJourneyMission(n);case 15:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.handleJourneyMission=function(e){if(e){var t=e.boardData;t.currentState?this.boardGame.initGameWithBoardState(t):(this.seed=t.seed,this.boardGame.startGame({seed:t.seed,options:{draw3:!1}}))}else this.startNewGame()},n.startNewGame=function(){var e=(0,r.Z)(l().mark((function e(t,n){var i,a,r,o,c,h=this;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=t||this.scene.player.getPlayerSettings().gameType,this.scene.gameTypeManager.switchGameType(t),this.tryCreateShortcut(),this.startGameCount+=1,this.saveSystem.clearLastGame(),this.scene.levelLoader.isLevelLoaded(this.gameType)){e.next=9;break}return this.scene.game.globalScene.screen.open(Os.o4.NOTIFY_SCREEN,{message:"Loading...",duration:0,loading:!0}),this.scene.time.delayedCall(500,(function(){return h.startNewGame(t)})),e.abrupt("return");case 9:if(this.scene.game.globalScene.screen.close(Os.o4.NOTIFY_SCREEN),!this.boardGame.isDealing()){e.next=12;break}return e.abrupt("return");case 12:n||(n={},this.gameType==is.Z.KLONDIKE?(i=this.scene.player.getPlayerSettings().drawMode3,n=(0,s.Z)({},n,{draw3:i})):this.gameType==is.Z.SPIDER&&(a=this.scene.player.getPlayerSettings().suitSize,r=this.scene.levelLoader.getCurrentLevelLoader(is.Z.SPIDER),n=(0,s.Z)({},n,{suitSize:a}),this.isEasyGameForNewUserAvailable()?n=(0,s.Z)({},n,{difficulty:"dynamic"}):(o=r.randomLevel(n),c=r.getDifficultyByLevel(o),n=(0,s.Z)({},n,{difficulty:c})))),this.seed=this.scene.levelLoader.randomSeed(n,this.gameType),this.boardGame.startGame({seed:this.seed,options:n});case 16:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}(),n.checkGameplayBeforeStartNewGame=function(){if(!this.boardGame.isGameWon()&&this.boardGame.getMoves()>0){var e={};if(this.gameType==is.Z.KLONDIKE){var t=this.boardGame;e=(0,s.Z)({},e,{draw3:t.draw3})}else if(this.gameType==is.Z.SPIDER){e=this.boardGame.getGameOptions()}var n=this.boardGame.getScore(),i=this.boardGame.getTime(),a=this.boardGame.getMoves(),r=this.boardGame.mover.undoClicked>0,o=(0,s.Z)({},e,{score:n,currentMoves:a,playedTime:i,usedUndo:r});this.scene.gameStats.addLose(this.gameType,o);var c=this.scene.gameStats.getGameStatsForType(this.gameType,e),h=c.totalGame,u=c.wins;this.scene.analytics.event(Nn._.LEVEL_GIVE_UP,{game_type:this.gameType,total_game:h,wins:u,score:this.boardGame.getScore(),moves:this.boardGame.getMoves(),time_played:Math.floor(this.boardGame.getTime()/1e3),draw3:e.draw3})}},n.playMissionWelcomeAnimation=function(){var e=(0,r.Z)(l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.scene.screen.open(Os.o4.MISSION_WELCOME_SCREEN),e.next=3,Au(this.scene,1e3);case 3:this.scene.screen.close(Os.o4.MISSION_WELCOME_SCREEN);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.startGameWith=function(e,t){this.seed=e,this.boardGame.startGame({seed:e,options:t})},n.replayGame=function(){if(this.boardGame.boardState!==ku.DEALING)if(this.breakAdsHandler.resetBreakAdsOnFirstFoundation(),this.seed)if(Qo.instance.isJourneyMode()){var e=this.scene.journey.getCurrentMission();this.handleJourneyMission(e)}else this.boardGame.startGame({seed:this.seed});else this.startNewGame()},n.getGameOverScreenKey=function(e){return Qo.instance.isChallengeMode()?Os.o4.PLAY_WITH_FRIEND_GAME_OVER_SCREEN:Qo.instance.isTournamentMode()?Os.o4.TOURNAMENTS_RESULT_SCREEN:Qo.instance.isJourneyMode()?Os.o4.MISSION_COMPLETED_SCREEN:e?Os.o4.VICTORY_SCREEN:Os.o4.OUT_OF_MOVES_SCREEN},n.getPlayerSettingOptions=function(){var e=this.scene.player.getPlayerSettings(),t=e.modifiedOptions,n=e.largeWidthLayout,i=e.autoMoveToFoundation,a=e.highlightLowCards,s=e.relaxedSpider,r=e.autoComplete,o=e.vibrate,c=be()(t).call(t,ss.autoMoveToFoundation),h=be()(t).call(t,ss.highlightLowCards),u=be()(t).call(t,ss.largeWidthLayout),l=be()(t).call(t,ss.relaxedSpider);return{mode2_option:u?""+n:"default",vibrate_option:be()(t).call(t,ss.vibrate)?""+o:"default",auto_complete_option:be()(t).call(t,ss.autoComplete)?""+r:"default",relaxed_spider:l?""+s:"default",auto_move_foundation_option:c?""+i:"default",highlight_low_cards_option:h?""+a:"default"}},n.handleAnalyticsEvent=function(e,t){var n=this.scene.analytics,i=this.getPlayerSettingOptions(),a=(0,s.Z)({},t,i),r=e?Nn._.JOURNEY_END:Nn._.LEVEL_END;n.event(r,(0,s.Z)({},a))},n.handleGameOver=function(){var e=(0,r.Z)(l().mark((function e(t){var n,a,o,c,h,u,d,p,f,g,m,v,y,T,C,E,A,S,b,I,w,P,k,_,x,O,L,R,D;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.boardGame.mover.disableInput(),e.next=3,this.showWellDoneScreen(t);case 3:if(a=this.scene,o=a.journey,c=a.gameStats,h=a.levelLoader,u=a.storage,d=a.screen,p=this.boardGame.getGameOptions(),f=this.boardGame.getScore(),g=this.boardGame.getTime(),m=this.boardGame.getMoves(),v=this.getSeed(),y=this.boardGame.mover.undoClicked>0,null==(n=this.boardGame.updateScoreTimer)||n.remove(),T=Math.floor(g/1e3),C=u.getState(),E=io(C),A=c.getGameStatsForType(this.gameType,p),S=A.totalGame,b=A.wins,I="dynamic"==p.difficulty?0:h.getLevelByWins(b,this.gameType),w=Qo.instance.isJourneyMode(),P=Qo.instance.getGameMode(),w){e.next=27;break}if(_={draw3:p.draw3,suitSize:p.suitSize,difficulty:p.difficulty,score:f,currentMoves:m,playedTime:g,usedUndo:y},t?c.addWin(this.gameType,_):c.addLose(this.gameType,_),!E){e.next=26;break}return e.next=24,Co(E);case 24:x=e.sent,u.dispatch(Ho(x));case 26:u.dispatch(jo({game_type:this.gameType,level:b,score:(k={},k[this.gameType]=f,k),time:g,moves:m,total_game:S,difficulty:I,seed:v,time_played:T,success:t,draw3:p.draw3,suit_size:p.suitSize}));case 27:return e.next=29,u.dispatch(function(){var e=(0,r.Z)(l().mark((function e(t,n){var a,s,r,o,c,h,u,d,p,f,g,m,v,y,T,C,E,A,S,b;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a=window.game,s=a.analytics,a.facebook,r=n(),o=br(r),c=po(r),h=c.score,u=void 0===h?{freecell:0,spider:0,klondike:0}:h,d=c.level,p=void 0===d?0:d,f=c.time,g=void 0===f?0:f,m=c.moves,v=void 0===m?0:m,y=c.total_game,T=c.difficulty,C=c.seed,E=c.time_played,A=c.success,S=c.draw3,b=u[Rr.gameType],Qo.instance.isJourneyMode()||t(uc(b,Rr.gameType)),e.next=12,t(pc(o,{score:b,level:p,time:g,moves:v}));case 12:r=n(),s.event(Nn._.MATCH_END,{game_type:Rr.gameType,game_mode:GameCore.Utils.String.toUpperCamelCase(o),total_game:y,difficulty:T,level:p,level_name:"level_"+p,score:b,moves:v,time_played:E,success:A,draw3:S,seed:C}),e.next=19;break;case 16:e.prev=16,e.t0=e.catch(0),(0,i.tO)(e.t0);case 19:case"end":return e.stop()}}),e,null,[[0,16]])})));return function(t,n){return e.apply(this,arguments)}}());case 29:O=this.getGameOverScreenKey(t),L=(0,s.Z)({score:f,currentMoves:m,playedTime:g},p),R=w?this.getJourneyGameOverScreenData(t):L,d.open(O,R),D={},D=w?{game_type:this.gameType,level:o.getCurrentLevel(),mission_id:o.getSeason(),time_played:T,moves:m,seed:v,success:t}:{game_type:this.gameType,game_mode:GameCore.Utils.String.toUpperCamelCase(P),total_game:S,difficulty:I,level:b,score:f,moves:m,time_played:T,success:t,seed:v,draw3:p.draw3,suit_size:p.suitSize},this.handleAnalyticsEvent(w,D),w&&t&&o.incrementLevel();case 37:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.getJourneyGameOverScreenData=function(e){var t,n=this.scene,i=n.journeyLevelMechanicManager,a=n.journey;return{description:null!=(t=i.getMissionDescription())?t:{key:""},stats:i.getMissionLimit(),level:a.getCurrentLevel(),completed:e}},n.showWellDoneScreen=function(){var e=(0,r.Z)(l().mark((function e(t){var n;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Qo.instance.getGameMode()!==Xo.JOURNEY||!t){e.next=6;break}if("move-same-suit-cards-to-foundation"!==(n=this.boardGame.scene.journey.getCurrentMission()).type&&"open-one-card"!==n.type){e.next=6;break}return e.next=6,Au(this.scene,2e3);case 6:return this.scene.screen.open(Os.o4.WELL_DONE_SCREEN,{wellDone:t}),e.next=9,Au(this.scene,2e3);case 9:return this.scene.screen.close(Os.o4.WELL_DONE_SCREEN),e.next=12,Au(this.scene,300);case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.startGame=function(){var e=(0,r.Z)(l().mark((function e(){var t,n,i,a,r,o,c,h,u,d,p;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.breakAdsHandler.resetBreakAdsOnFirstFoundation(),!Qo.instance.isChallengeMode()){e.next=13;break}if(t=this.scene.storage.getState(),n=this.scene.player.getPlayerId(),oo(t,{playerId:n})){e.next=13;break}if(!(i=ho(t))){e.next=13;break}if(a=i.options,r=i.seed,void 0==a||void 0==r){e.next=13;break}return this.startGameWith(r,a),e.abrupt("return");case 13:if(!Qo.instance.isTournamentMode()){e.next=29;break}if(o=this.scene.levelLoader.getRandomBeginnerSeed(this.gameType),c={},this.gameType!==is.Z.KLONDIKE){e.next=20;break}c=(0,s.Z)({},c,{draw3:!1}),e.next=27;break;case 20:if(this.gameType!==is.Z.SPIDER){e.next=27;break}return e.next=23,FBInstant.getTournamentAsync();case 23:h=e.sent,u=h.getPayload(),(d=JSON.parse(u)).options&&(c=(0,s.Z)({},c,d.options),o=this.scene.levelLoader.randomSeed(c,is.Z.SPIDER));case 27:return this.startGameWith(o,c),e.abrupt("return");case 29:if(p=this.saveSystem.getLastGameData()){e.next=34;break}return this.startNewGame(),e.abrupt("return");case 34:this.seed=p.seed,this.boardGame.continueGame(p);case 36:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.tryCreateShortcut=function(){this.startGameCount>=1&&this.scene.game.facebook.attemptToAddShortcut()},n.startGameWithSeed=function(e){this.boardGame.boardState!==ku.DEALING&&(this.seed=e,this.boardGame.startGame({seed:e,options:{draw3:!1}}))},n.update=function(e){this.boardGame.update(e)},n.isEasyGameForNewUserAvailable=function(){var e=this.scene.player.getCustomData("newUserEasyGameCount");return!(!GameCore.Utils.Valid.isNumber(e)||e<=0)},n.handleShowInterstitialAd=function(){var e=(0,r.Z)(l().mark((function e(){var t;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=this.scene).ads.canbeShowInterstitialAd()){e.next=13;break}return t.audio.pauseMusic(),t.audio.muteAll(),e.prev=4,e.next=7,t.ads.showInterstitialAdAsync();case 7:e.next=11;break;case 9:e.prev=9,e.t0=e.catch(4);case 11:window.GameSDK.isAudioEnabled()&&(t.audio.unmuteAll(),t.audio.playMusic()),t.ads.preloadInterstitialAdAsync().catch((function(){}));case 13:case"end":return e.stop()}}),e,this,[[4,9]])})));return function(){return e.apply(this,arguments)}}(),n.showRewardVideo=function(){var e=(0,r.Z)(l().mark((function e(){var t,n,i,a,s;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.scene.game,n=t.globalScene,i=t.audio,a=t.ads,s=t.analytics,e.prev=1,n.screen.open(Os.o4.NOTIFY_SCREEN,{message:"loadingAds",duration:0,loading:!0}),i.pauseMusic(),i.muteAll(),e.next=7,new(h())((function(e,t){a.getAdStatus(GameCore.Ads.Types.REWARDED)===GameCore.Ads.Status.LOADING?a.events.once(GameCore.Ads.Events.LOADED,e):a.preloadRewardedVideoAsync().then(e).catch(t)}));case 7:return e.next=9,a.showRewardedVideoAsync();case 9:return s.showRewardedVideoAd(this.scene.getSceneName()),a.preloadRewardedVideoAsync().catch((function(e){})),n.screen.events.off(GameCore.Screens.Events.CLOSE),n.screen.close(Os.o4.NOTIFY_SCREEN),e.abrupt("return",!0);case 16:if(e.prev=16,e.t0=e.catch(1),!(e.t0 instanceof Object&&GameCore.Utils.Object.hasOwn(e.t0,"code"))){e.next=22;break}if("USER_INPUT"!==e.t0.code){e.next=22;break}return this.showNotifySkipAds(),e.abrupt("return",!1);case 22:return this.showNotifyNoAds(),e.abrupt("return",!1);case 24:return e.prev=24,window.GameSDK.isAudioEnabled()&&(i.unmuteAll(),i.playMusic()),e.finish(24);case 27:case"end":return e.stop()}}),e,this,[[1,16,24,27]])})));return function(){return e.apply(this,arguments)}}(),n.handleShowCompleteStackAd=function(){var e=(0,r.Z)(l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.breakAdsHandler.handleShowAds();case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.createConfetti=function(){var e,t,n=this.scene.gameZone.height,i=new Phaser.Geom.Rectangle(-187.5,-n/2-100,375,50),a=De()(e=on()(t=Array(32)).call(t,0)).call(e,(function(e,t){return"confetti/papers/Layer "+(t+1)}));this.confettiSmallFallDown=new Rs.Z(this.scene,{rotate:{start:-720,end:0},lifespan:{min:1500,max:2e3},emitZone:{source:i,type:"random"},particleBringToTop:!0,frame:a,tint:void 0})},t}(Phaser.Events.EventEmitter),Af=Ef,Sf={FOOTER:13,TITLE:20,TAB_SELECTOR_LABEL:14,TOURNAMENT_BLOCK:{TITLE:20,JOIN_LABEL:16,LOW_TO_WIN:12}},bf=Gn.Z.GAMEPLAY_DEFAULT,If=bf.KEY,wf=bf.FRAME,Pf=GameCore.Configs.Gameplay.ItemCount,kf=function(e){function t(t,n,i){var a;return(a=e.call(this,t,n,i)||this).subIcon=void 0,a.countItemText=void 0,a.countItem=0,a.createItemCountContent(),a}(0,o.Z)(t,e);var n=t.prototype;return n.createItemCountContent=function(){this.subIcon=this.scene.make.image({key:If,frame:wf.COUNTER}),this.subIcon.setWorldSize(17.5,17.5),this.countItemText=this.scene.add.bitmapText(0,0,Rc.Z.PRIMARY.KEY,"0",this.scene.fontSize(13)),this.countItemText.setTint(274714),Pf.Enable||(this.subIcon.kill(),this.countItemText.kill()),Phaser.Display.Align.In.TopCenter(this.subIcon,this,10,12),Phaser.Display.Align.In.Center(this.countItemText,this.subIcon)},n.addItemCountContent=function(){Pf.Enable&&this.add([this.subIcon,this.countItemText])},n.updateCountItem=function(e){0==e?(this.subIcon.setFrame(wf.IC_ADS),this.subIcon.setWorldSize(15.5,13),this.countItemText.setVisible(!1)):(this.subIcon.setFrame(wf.COUNTER),this.subIcon.setWorldSize(17.5,17.5),this.countItemText.setVisible(!0),this.countItemText.setText(e.toString()),Phaser.Display.Align.In.Center(this.countItemText,this.subIcon))},n.resetCountItem=function(e){this.countItem=e,this.updateCountItem(e)},n.decreaseCountItem=function(){0!==this.countItem&&(this.countItem-=1,this.updateCountItem(this.countItem))},n.getCountItem=function(){return this.countItem},t}(Ol.Z),_f=kf,xf={WIDTH:375,HEIGHT:72,HIT_ZONE_BUTTON:{WIDTH:75,HEIGHT:50}},Of=function(e){return e.VERTICAL="vertical",e.HORIZONTAL="horizontal",e}({}),Lf=function(e){function t(t,n){var i;return(i=e.call(this,t)||this).config=void 0,i.image1=void 0,i.image2=void 0,i.setSize(n.width,n.height),i.config=n,i.createImage(),i.scene.add.existing((0,As.Z)(i)),i}(0,o.Z)(t,e);var n=t.prototype;return n.createImage=function(){var e=this.config,t=e.key,n=e.frame,i=e.symmetricType,a=void 0===i?Of.HORIZONTAL:i,s=e.width,r=e.height,o=this.scene.add.image(0,0,t,n),c=this.scene.add.image(0,0,t,n);this.add([o,c]),a==Of.HORIZONTAL?(o.setOrigin(1,.5),o.setWorldSize(s/2,r),c.setOrigin(0,.5).setFlipX(!0),c.setWorldSize(s/2,r)):a==Of.VERTICAL&&(o.setOrigin(.5,1),o.setWorldSize(s,r/2),c.setOrigin(.5,0).setFlipY(!0),c.setWorldSize(s,r/2)),this.image1=o,this.image2=c},n.setFrame=function(e){this.image1.setFrame(e),this.image2.setFrame(e)},n.setImageInteractive=function(){this.image1.setInteractive(),this.image2.setInteractive()},t}(Phaser.GameObjects.Container),Rf=GameCore.Configs.Gameplay.ItemCount,Df=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n.menuBtn=void 0,n.themeBtn=void 0,n.tournamentsButton=void 0,n.statisticsButton=void 0,n.playBtn=void 0,n.hintBtn=void 0,n.undoBtn=void 0,n.handleHint=(0,r.Z)(l().mark((function e(){var t,i;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Rf.Enable){e.next=3;break}return n.showHint(),e.abrupt("return");case 3:if(0!==n.hintBtn.getCountItem()){e.next=7;break}return n.claimHint(),e.abrupt("return");case 7:n.showHint(),n.hintBtn.decreaseCountItem(),t=n.hintBtn.getCountItem(),i=n.scene.player.getCountItems(),n.updatePlayerCountItems(i.undoCount,t,i.lastTimeUpdate);case 12:case"end":return e.stop()}}),e)}))),n.handleUndo=function(){if(Rf.Enable){var e=n.scene.gameplay.boardGame.mover;if(0!==n.undoBtn.getCountItem()){if(e.isCanUndo()){n.undoBtn.decreaseCountItem();var t=n.undoBtn.getCountItem(),i=n.scene.player.getCountItems();n.updatePlayerCountItems(t,i.hintCount,i.lastTimeUpdate),n.undo()}}else n.claimUndo()}else n.undo()},n.updateCountItems=(0,r.Z)(l().mark((function e(){var t,i,a;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Rf.Enable){e.next=2;break}return e.abrupt("return");case 2:if((t=n.scene.player.getCountItems())&&(!t||(0,Ds.Gm)(t.lastTimeUpdate))&&!GameCore.Configs.Gameplay.ItemCount.ForceResetDaily){e.next=7;break}return e.next=6,n.resetCountItems();case 6:return e.abrupt("return");case 7:i=t.undoCount,a=t.hintCount,n.undoBtn.resetCountItem(i),n.hintBtn.resetCountItem(a);case 11:case"end":return e.stop()}}),e)}))),n.resetCountItems=(0,r.Z)(l().mark((function e(){var t,i;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=GameCore.Configs.Gameplay.ItemCount.UndoCount,i=GameCore.Configs.Gameplay.ItemCount.HintCount,n.undoBtn.resetCountItem(t),n.hintBtn.resetCountItem(i),e.next=6,n.updatePlayerCountItems(t,i,(new Date).getTime());case 6:case"end":return e.stop()}}),e)}))),n.scene=t,n.listenEventsBoardChange(),n}(0,o.Z)(t,e);var n=t.prototype;return n.showHint=function(){this.scene.gameplay.boardGame.hint.showHint()},n.claimHint=function(){var e=(0,r.Z)(l().mark((function e(){var t;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.scene.gameplay.boardGame.hint.hintAnimation.canShowHint()){e.next=2;break}return e.abrupt("return",h().resolve());case 2:return e.next=4,this.scene.gameplay.showRewardVideo();case 4:e.sent&&(t=this.scene.player.getCountItems(),this.updatePlayerCountItems(t.undoCount,Rf.HintClaim,t.lastTimeUpdate),this.hintBtn.resetCountItem(Rf.HintClaim),this.showHint());case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.undo=function(){this.scene.gameplay.boardGame.mover.undo()},n.claimUndo=function(){var e=(0,r.Z)(l().mark((function e(){var t;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.scene.gameplay.showRewardVideo();case 2:e.sent&&(t=this.scene.player.getCountItems(),this.updatePlayerCountItems(Rf.UndoClaim,t.hintCount,t.lastTimeUpdate),this.undoBtn.resetCountItem(Rf.UndoClaim),this.undo());case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.updatePlayerCountItems=function(){var e=(0,r.Z)(l().mark((function e(t,n,i){var a;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a={undoCount:t,hintCount:n,lastTimeUpdate:i},this.scene.player.setCustomData("countItems",a);case 2:case"end":return e.stop()}}),e,this)})));return function(t,n,i){return e.apply(this,arguments)}}(),n.alignButtons=function(){for(var e=[this.menuBtn,this.statisticsButton,this.playBtn,this.hintBtn,this.undoBtn],t=this.width/5,n=0;n<e.length;n++)e[n].setX((n-e.length/2+.5)*t),e[n].setY(2)},n.listenEventsBoardChange=function(){var e=this;this.scene.events.on(Lr.BOARD_STATE_CHANGED,(function(t){var n=[e.menuBtn,e.statisticsButton,e.playBtn,e.hintBtn,e.undoBtn],i=[ku.NONE,ku.DEALING,ku.AUTO_COMPLETING,ku.OUT_OF_MOVE,ku.GAME_OVER];n.forEach((function(e){var n=i.some((function(e){return e==t}));n?(e.setDisabled(n),e.updateAlphaByDisable()):t==ku.AUTO_MOVE_TO_FOUNDATION?e.setDisabled(!0,!1):e.setDisabled(!1)}))}))},t}(Phaser.GameObjects.Container),Bf=Df,Mf=Gn.Z.GAMEPLAY_DEFAULT,Nf=Mf.KEY,Gf=Mf.FRAME,Ff=-10,Zf=xf.WIDTH,Uf=xf.HEIGHT,zf=xf.HIT_ZONE_BUTTON,Hf=function(e){function t(t){var n;return(n=e.call(this,t)||this).backgroundMask=void 0,n.scene=t,n.listenEvents(),n}(0,o.Z)(t,e);var n=t.prototype;return n.init=function(){this.setSize(Zf,Uf),this.createBackgroundMask(),this.createBackground(),this.createButtons(),this.scene.add.existing(this),this.updateCountItems()},n.createBackgroundMask=function(){var e=this.scene.theme.getCurrentThemeConfig().backgroundKey,t=this.scene.add.image(0,0,e);t.setOrigin(.5,1),this.add(t),this.backgroundMask=t,this.updateBackgroundMask()},n.updateBackgroundMask=function(){var e=this.scene.world.isLandscape()?20:0,t=this.scene.world.getPixelRatio(),n=this.scene.ads.getBannerHeight(),i=this.backgroundMask,a=this.scene.gameZone,s=a.width,r=a.height;i.setWorldSize(s,r),i.setCrop(0,i.frame.height-(this.height+n)/i.scaleY-e*t,this.width*t,r*t),i.setY(n+this.height/2+e),this.scene.events.on(Lr.BACKGROUND_CHANGED,(function(e){i.setTexture(e)}))},n.createBackground=function(){var e=new Lf(this.scene,{width:this.width,height:this.height,key:Nf,frame:Gf.FOOTER_BG,symmetricType:Of.HORIZONTAL});this.add(e)},n.createButtons=function(){this.createMenuBtn(),this.createStatisticsButton(),this.createPlayBtn(),this.createHintBtn(),this.createUndoBtn();var e=[this.menuBtn,this.statisticsButton,this.playBtn,this.hintBtn,this.undoBtn];this.add(e),this.alignButtons()},n.createMenuBtn=function(){var e=this;this.menuBtn=new Ol.Z(this.scene,zf.WIDTH,zf.HEIGHT),this.menuBtn.setName("Menu");var t=this.scene.add.image(0,Ff,Nf,Gf.IC_MENU).setTint(16579837);t.setWorldSize(25.3*.92,24*.92);var n=this.scene.add.bitmapText(0,15,Rc.Z.PRIMARY.KEY,"Menu",this.scene.fontSize(13));n.setTint(12437947).setOrigin(.5),n.setMaxSize(55,20),this.menuBtn.add([t,n]),this.menuBtn.onClick=function(){e.scene.menu.open()}},n.createStatisticsButton=function(){var e=this;this.statisticsButton=new Ol.Z(this.scene,zf.WIDTH,zf.HEIGHT),this.statisticsButton.setName("Statistics");var t=this.scene.add.image(0,Ff,Nf,Gf.IC_STATISTICS_FOOTER).setTint(16579837);t.setWorldSize(26,26.5);var n=this.scene.add.bitmapText(0,15,Rc.Z.PRIMARY.KEY,"statistics",this.scene.fontSize(13));n.setTint(12437947).setOrigin(.5),this.statisticsButton.add([t,n]),this.statisticsButton.onClick=function(){e.scene.screen.open(Os.o4.GAME_STATS_SCREEN)}},n.createPlayBtn=function(){var e=this;this.playBtn=new Ol.Z(this.scene,zf.WIDTH,zf.HEIGHT),this.playBtn.setName("Play");var t=this.scene.add.image(0,Ff,Nf,Gf.IC_PLAY).setTint(16579837);t.setWorldSize(26,26.5);var n=this.scene.add.bitmapText(0,15,Rc.Z.PRIMARY.KEY,"new",this.scene.fontSize(13));n.setTint(12437947).setOrigin(.5),n.setMaxSize(55,20),this.playBtn.add([t,n]),this.playBtn.onClick=function(){e.scene.header.playFadeOutChallengeInfoAnimation(),e.scene.screen.open(Os.o4.PLAY_SCREEN)}},n.createHintBtn=function(){this.hintBtn=new _f(this.scene,zf.WIDTH,zf.HEIGHT),this.hintBtn.setName("Hint");var e=this.scene.add.image(0,Ff,Nf,Gf.IC_HINT).setTint(16579837);e.setWorldSize(20,27);var t=this.scene.add.bitmapText(0,15,Rc.Z.PRIMARY.KEY,"hint",this.scene.fontSize(13));t.setTint(12437947).setOrigin(.5),this.hintBtn.add([e,t]),this.hintBtn.addItemCountContent(),t.setMaxSize(65,20),this.hintBtn.onClick=this.handleHint},n.createUndoBtn=function(){this.undoBtn=new _f(this.scene,zf.WIDTH,zf.HEIGHT),this.undoBtn.setName("Undo");var e=this.scene.add.image(0,Ff,Nf,Gf.IC_UNDO).setTint(16579837);e.setWorldSize(31,25.5);var t=this.scene.add.bitmapText(0,15,Rc.Z.PRIMARY.KEY,"undo",this.scene.fontSize(13));t.setTint(12437947).setOrigin(.5),this.undoBtn.add([e,t]),this.undoBtn.addItemCountContent(),t.setMaxSize(65,20),this.undoBtn.onClick=this.handleUndo},n.createThemeBtn=function(){var e=this;this.themeBtn=new Ol.Z(this.scene,zf.WIDTH,zf.HEIGHT),this.themeBtn.setName("Theme");var t=this.scene.add.image(0,Ff,Nf,Gf.IC_THEME).setTint(16579837);t.setWorldSize(28,28);var n=this.scene.make.bitmapText({font:Rc.Z.PRIMARY.KEY,size:this.scene.fontSize(Sf.FOOTER),text:"Theme",origin:{x:.5,y:.5}}).setTint(13355979);this.themeBtn.add([t,n]),this.themeBtn.onClick=function(){e.scene.screen.open(Os.o4.THEME_SCREEN)}},n.alignButtons=function(){var e=this.scene.player.getPlayerSettings().leftHanded,t=[this.menuBtn,this.statisticsButton,this.playBtn,this.hintBtn,this.undoBtn];e&&(t=Xh()(t).call(t));for(var n=this.width/5,i=0;i<t.length;i++)t[i].setX((i-t.length/2+.5)*n),t[i].setY(2)},n.listenEvents=function(){var e=this;this.scene.events.on("settings-changed",(function(t){"leftHanded"==t&&e.alignButtons()}))},t}(Bf),Wf=Hf,Yf=136,Kf=1436/2.88,Vf=55,jf=function(e){if(GameCore.world.isLandscape())return.75;for(var t=Yf-Vf+Kf/2+5,n=e.world.getWorldSize().height,i=1,a=t;n/2<a;)a=t*(i-=.01);return i},Jf=function(e){return-e.ads.getBannerHeight()/2},Xf=function(){return GameCore.world.isLandscape()?.85:1},qf=Gn.Z.GAMEPLAY_DEFAULT,Qf=qf.KEY,$f=qf.FRAME,eg=-10,tg=70,ng=50,ig=function(e){function t(t){return e.call(this,t)||this}(0,o.Z)(t,e);var n=t.prototype;return n.init=function(){this.setSize(413,56),this.createBackground(),this.createButtons(),this.scene.add.existing(this),this.updateCountItems()},n.createBackground=function(){var e=new Lf(this.scene,{width:this.width,height:this.height,key:Qf,frame:$f.FOOTER_BG_LANDSCAPE,symmetricType:Of.HORIZONTAL});this.add(e)},n.createButtons=function(){this.createMenuBtn(),this.createStatisticsButton(),this.createPlayBtn(),this.createHintBtn(),this.createUndoBtn();var e=[this.menuBtn,this.statisticsButton,this.playBtn,this.hintBtn,this.undoBtn];this.add(e),this.alignButtons()},n.createMenuBtn=function(){var e=this;this.menuBtn=new Ol.Z(this.scene,tg,ng),this.menuBtn.setName("Menu");var t=this.scene.add.image(0,eg,Qf,$f.IC_MENU).setTint(16579837);t.setWorldSize(25.3*.92*this._scale,24*.92*this._scale);var n=this.scene.add.bitmapText(0,12,Rc.Z.PRIMARY.KEY,"Menu",this.scene.fontSize(12));n.setMaxSize(75,20,!0),n.setTint(12437947).setOrigin(.5),this.menuBtn.add([t,n]),this.menuBtn.onClick=function(){e.scene.menu.open()}},n.createStatisticsButton=function(){var e=this;this.statisticsButton=new Ol.Z(this.scene,tg,ng),this.statisticsButton.setName("Statistics");var t=this.scene.add.image(0,eg,Qf,$f.IC_STATISTICS_FOOTER).setTint(16579837);t.setWorldSize(23,24);var n=this.scene.add.bitmapText(0,12,Rc.Z.PRIMARY.KEY,"statistics",this.scene.fontSize(12));n.setMaxSize(75,20,!0),n.setTint(12437947).setOrigin(.5),this.statisticsButton.add([t,n]),this.statisticsButton.onClick=function(){e.scene.screen.open(Os.o4.GAME_STATS_SCREEN)}},n.createPlayBtn=function(){var e=this;this.playBtn=new Ol.Z(this.scene,tg,ng),this.playBtn.setName("Play");var t=this.scene.add.image(0,eg,Qf,$f.IC_PLAY).setTint(16579837);t.setWorldSize(26*this._scale,26.5*this._scale);var n=this.scene.add.bitmapText(0,12,Rc.Z.PRIMARY.KEY,"new",this.scene.fontSize(12));n.setMaxSize(75,20,!0),n.setTint(12437947).setOrigin(.5),this.playBtn.add([t,n]),this.playBtn.onClick=function(){e.scene.header.playFadeOutChallengeInfoAnimation(),e.scene.screen.open(Os.o4.PLAY_SCREEN)}},n.createHintBtn=function(){this.hintBtn=new _f(this.scene,tg,ng),this.hintBtn.setName("Hint");var e=this.scene.add.image(0,eg,Qf,$f.IC_HINT).setTint(16579837);e.setWorldSize(20*this._scale,27*this._scale);var t=this.scene.add.bitmapText(0,12,Rc.Z.PRIMARY.KEY,"hint",this.scene.fontSize(12));t.setMaxSize(75,20,!0),t.setTint(12437947).setOrigin(.5),this.hintBtn.add([e,t]),this.hintBtn.addItemCountContent(),this.hintBtn.onClick=this.handleHint},n.createUndoBtn=function(){this.undoBtn=new _f(this.scene,tg,ng),this.undoBtn.setName("Undo");var e=this.scene.add.image(0,eg,Qf,$f.IC_UNDO).setTint(16579837);e.setWorldSize(31*this._scale,25.5*this._scale);var t=this.scene.add.bitmapText(0,12,Rc.Z.PRIMARY.KEY,"undo",this.scene.fontSize(12));t.setMaxSize(75,20,!0),t.setTint(12437947).setOrigin(.5),this.undoBtn.add([e,t]),this.undoBtn.addItemCountContent(),this.undoBtn.onClick=this.handleUndo},n.createThemeBtn=function(){var e=this;this.themeBtn=new Ol.Z(this.scene,tg,ng),this.themeBtn.setName("Theme");var t=this.scene.add.image(0,eg,Qf,$f.IC_THEME).setTint(16579837);t.setWorldSize(28,28);var n=this.scene.make.bitmapText({font:Rc.Z.PRIMARY.KEY,size:this.scene.fontSize(Sf.FOOTER),text:"theme",origin:{x:.5,y:.5}}).setTint(13355979);this.themeBtn.add([t,n]),this.themeBtn.onClick=function(){e.scene.screen.open(Os.o4.THEME_SCREEN)}},(0,he.Z)(t,[{key:"_scale",get:function(){return Xf()}}]),t}(Bf),ag=ig,sg=GameCore.world.isLandscape()?ag:Wf,rg="...",og=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n.avatar=void 0,n.scoreText=void 0,n.nameText=void 0,n.timeText=void 0,n.moveText=void 0,n.background=void 0,n.scene=t,n.createBackground(),n.createAvatar(),n.createText(),n.timeText.kill(),n.moveText.kill(),n.timeText.setIgnoreLanguage(),n.scoreText.setIgnoreLanguage(),n.moveText.setIgnoreLanguage(),n}(0,o.Z)(t,e);var n=t.prototype;return n.setAvatarFrame=function(e){this.avatar&&this.avatar.avtFrame&&this.avatar.avtFrame.setFrame(e)},n.updateData=function(e,t,n){this.scoreText.setText(""+(null!=e?e:rg)),this.timeText.setText(t?(0,Ds.F0)(t,!1):rg),this.moveText.setText(""+(null!=n?n:rg))},t}(Phaser.GameObjects.Container),cg=og,hg=Gn.Z.GAMEPLAY_DEFAULT,ug=hg.KEY,lg=hg.FRAME,dg=function(e){function t(t){var n;return(n=e.call(this,t)||this).setSize(124,40),n}(0,o.Z)(t,e);var n=t.prototype;return n.alignLeft=function(){this.nameText.setOrigin(1,.5),Phaser.Display.Align.In.RightCenter(this.avatar,this.background,15),Phaser.Display.Align.In.LeftCenter(this.scoreText,this.background,-5,2),Phaser.Display.Align.To.LeftCenter(this.nameText,this.avatar,2),this.nameText.setAlign("left"),this.scoreText.setLeftAlign(),this.scoreText.setOrigin(0,.5)},n.alignRight=function(){this.nameText.setOrigin(0,.5),Phaser.Display.Align.In.LeftCenter(this.avatar,this.background,15),Phaser.Display.Align.In.RightCenter(this.scoreText,this.background,-5,2),Phaser.Display.Align.To.RightCenter(this.nameText,this.avatar,2),this.nameText.setAlign("right"),this.scoreText.setRightAlign(),this.scoreText.setOrigin(1,.5)},n.createBackground=function(){var e=this.scene.add.image(0,0,ug,lg.AVATAR.RECTANGLE);e.setWorldSize(139,24),this.add(e),this.background=e},n.createAvatar=function(){this.avatar=new Bc(this.scene,{width:34,height:34,key:ug,background:lg.AVATAR.BG,frame:lg.AVATAR.BLUE}),this.avatar.loadPhoto(Ka.Z.AVATAR.KEY,Ka.Z.AVATAR.FILE,75),this.add(this.avatar)},n.createText=function(){var e=this.scene.make.bitmapText({font:Rc.Z.PRIMARY.KEY,size:this.scene.fontSize(14),text:"0",origin:{x:.5,y:.5},y:0,x:6});this.add(e);var t=this.scene.add.text(0,0,"name",{color:"#c1ccc0",fontFamily:Rc.Z.FONT_FAMILY});t.setFontSize(this.scene.fontSize(13)),t.setHighQuality(),t.setOrigin(.5),t.setIgnoreLanguage(),this.add(t);var n=this.scene.make.bitmapText({font:Rc.Z.PRIMARY.KEY,size:this.scene.fontSize(14),text:"00:00",origin:{x:.5,y:.5},y:0,x:6});e.setCenterAlign(),this.add(n);var i=this.scene.make.bitmapText({font:Rc.Z.PRIMARY.KEY,size:this.scene.fontSize(14),text:"0",origin:{x:0,y:.5},y:18,x:6});this.add(i),this.scoreText=e,this.timeText=n,this.moveText=i,this.nameText=t},t}(cg),pg=dg,fg=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n.leftBlock=void 0,n.rightBlock=void 0,n.scene=t,n}return(0,o.Z)(t,e),t}(Phaser.GameObjects.Container),gg=fg,mg=100,vg=Gn.Z.GAMEPLAY_DEFAULT,yg=vg.KEY,Tg=vg.FRAME,Cg=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n.scene=t,n.setSize(375,62),n.createBlocks(),n.createVSText(),n}(0,o.Z)(t,e);var n=t.prototype;return n.createBlocks=function(){this.leftBlock=new pg(this.scene),this.leftBlock.alignRight(),this.leftBlock.setAvatarFrame(Tg.AVATAR.BLUE),this.rightBlock=new pg(this.scene),this.rightBlock.alignLeft(),this.rightBlock.setAvatarFrame(Tg.AVATAR.ORANGE),this.leftBlock.setX(-100),this.rightBlock.setX(mg),this.add([this.leftBlock,this.rightBlock])},n.createVSText=function(){var e=this.scene.add.image(0,0,yg,Tg.IC_VS);e.setWorldSize(174/2.88*.7,44/2.88*.7),this.add(e),Phaser.Display.Align.In.Center(e,this)},n.alignChildren=function(){this.leftBlock.setX(-100),this.rightBlock.setX(mg)},t}(gg),Eg=Cg,Ag=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n.tournamentTitle=void 0,n.background=void 0,n.scene=t,n.createBackground(),n.createTitle(),n}return(0,o.Z)(t,e),t}(Phaser.GameObjects.Container),Sg=Gn.Z.GAMEPLAY_DEFAULT,bg=Sg.KEY,Ig=Sg.FRAME,wg=function(e){function t(t){return e.call(this,t)||this}(0,o.Z)(t,e);var n=t.prototype;return n.createBackground=function(){this.background=this.scene.add.image(0,0,bg,Ig.TOURNAMENT.BG_INFO),this.background.setWorldSize(375,88/2.88),this.add(this.background),this.setSize(this.background.width,this.background.height)},n.createTitle=function(){this.tournamentTitle=this.scene.make.bitmapText({font:Rc.Z.PRIMARY.KEY,size:this.scene.fontSize(16),text:"Tournament",origin:{x:.5,y:.5},y:-15}),this.tournamentTitle.setIgnoreLanguage(),this.add(this.tournamentTitle),Phaser.Display.Align.In.Center(this.tournamentTitle,this,0,1)},t}(Ag),Pg=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n.statBlock=void 0,n.titleBlock=void 0,n.scene=t,n.init(),n}(0,o.Z)(t,e);var n=t.prototype;return n.createContent=function(){this.createTitle(),this.createStat()},n.setTitle=function(e){this.titleBlock.tournamentTitle.setText(e).setGradientVerticalTint([{at:0,color:15718001},{at:1,color:16646084}])},t}(Phaser.GameObjects.Container),kg=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n.movesBlock=void 0,n.timeBlock=void 0,n.scoreBlock=void 0,n.scene=t,n.createContent(),n}return(0,o.Z)(t,e),t.prototype.createContent=function(){this.createScore(),this.createTime(),this.createMoves()},t}(Phaser.GameObjects.Container),_g=kg,xg=function(e){function t(t){var n;return(n=e.call(this,t)||this).text=void 0,n.createText(),n.setTintComponents(),n}(0,o.Z)(t,e);var n=t.prototype;return n.setTintComponents=function(){this.text.setTint(14014166)},n.setValue=function(e){this.text.setTranslationParameters(e)},t}(Phaser.GameObjects.Container),Og=function(e){function t(t){return e.call(this,t)||this}return(0,o.Z)(t,e),t.prototype.createText=function(){this.text=this.scene.make.bitmapText({font:Rc.Z.PRIMARY.KEY,size:this.scene.fontSize(16),origin:{x:1,y:.5}}),this.text.setTranslationParameter("moves","10"),this.text.setText("headerMoves"),this.text.setMaxSize(95,15),this.add(this.text)},t}(xg),Lg=function(e){function t(t){return e.call(this,t)||this}(0,o.Z)(t,e);var n=t.prototype;return n.createText=function(){this.text=this.scene.make.bitmapText({font:Rc.Z.PRIMARY.KEY,size:this.scene.fontSize(16),origin:{x:0,y:.5}}),this.text.setTranslationParameter("score","10"),this.text.setText("headerScore"),this.text.setMaxSize(95,15),this.add(this.text)},n.alignComponents=function(){Phaser.Display.Align.To.RightCenter(this.text,this)},t}(xg),Rg=function(e){function t(t){return e.call(this,t)||this}return(0,o.Z)(t,e),t.prototype.createText=function(){this.text=this.scene.make.bitmapText({font:Rc.Z.PRIMARY.KEY,size:this.scene.fontSize(16),origin:{x:.5,y:.5}}),this.text.setTranslationParameter("time","10"),this.text.setText("headerTime"),this.text.setMaxSize(110,15),this.add(this.text)},t}(xg),Dg=function(e){function t(t){var n;return(n=e.call(this,t)||this).setSize(375,62),n}(0,o.Z)(t,e);var n=t.prototype;return n.createMoves=function(){this.movesBlock=new Og(this.scene),this.add(this.movesBlock)},n.createTime=function(){this.timeBlock=new Rg(this.scene),this.add(this.timeBlock)},n.createScore=function(){this.scoreBlock=new Lg(this.scene),this.add(this.scoreBlock)},n.alignChildren=function(){var e=this.scene.gameplay.boardGame.getHorizontalPileSpace(),t=xr.NUMBER_OF_PILE;this.movesBlock.setX(e*(t/2-.1)-this.movesBlock.width/2),this.scoreBlock.setX(-e*(t/2-.1)+this.scoreBlock.width/2)},t}(_g),Bg=Dg,Mg=function(e){function t(t){return e.call(this,t)||this}(0,o.Z)(t,e);var n=t.prototype;return n.init=function(){this.createContent(),this.setSize(375,this.titleBlock.height+this.statBlock.height),this.alignChildren()},n.createTitle=function(){this.titleBlock=new wg(this.scene),this.add(this.titleBlock)},n.createStat=function(){this.statBlock=new Bg(this.scene),this.add(this.statBlock)},n.alignChildren=function(){Phaser.Display.Align.In.TopCenter(this.titleBlock,this),Phaser.Display.Align.In.BottomCenter(this.statBlock,this,0,-15)},t}(Pg),Ng=16646084,Gg=15718001,Fg=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n.background=void 0,n.missionDescriptionWithLimit=void 0,n.missionDescriptionWithoutLimit=void 0,n.verticalLine=void 0,n.missionLimit=void 0,n.isEnablingLimit=!0,n.scene=t,n.createBackground(),n.createMissionDescriptionWithLimit(),n.createMissionDescriptionWithoutLimit(),n.createVerticalLine(),n.createMissionLimit(),n.alignComponents(),n.enableLimit(!0),n}(0,o.Z)(t,e);var n=t.prototype;return n.updateInfo=function(){var e=this.scene.journeyLevelMechanicManager,t=e.getMissionDescription(),n=e.getMissionLimit();t&&this.setDescription(t),n?(this.setLimit(n),this.enableLimit(!0)):this.enableLimit(!1)},n.enableLimit=function(e){this.isEnablingLimit=e,this.missionLimit.setVisible(e),this.verticalLine.setVisible(e),this.missionDescriptionWithLimit.setVisible(e),this.missionDescriptionWithoutLimit.setVisible(!e)},n.getIsEnablingLimit=function(){return this.isEnablingLimit},n.setDescription=function(e){var t=e.key,n=e.interpolations;this.missionDescriptionWithLimit.setText(t),this.missionDescriptionWithoutLimit.setText(t),this.missionDescriptionWithLimit.setTranslationParameters((0,s.Z)({},n)),this.missionDescriptionWithoutLimit.setTranslationParameters((0,s.Z)({},n)),this.missionDescriptionWithLimit.setGradientVerticalTint([{at:0,color:Gg},{at:1,color:Ng}]),this.missionDescriptionWithoutLimit.setGradientVerticalTint([{at:0,color:Gg},{at:1,color:Ng}])},n.getDescription=function(){return this.missionDescriptionWithLimit.text},n.getLimit=function(){return this.missionLimit.text},t}(Phaser.GameObjects.Container),Zg=Gn.Z.JOURNEY,Ug=Zg.KEY,zg=Zg.FRAME,Hg=16646084,Wg=15718001,Yg=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=t,n}(0,o.Z)(t,e);var n=t.prototype;return n.setLimit=function(e){var t=e.key,n=e.interpolations,i=void 0===n?{}:n;this.missionLimit.setText(t),this.missionLimit.setTranslationParameters((0,s.Z)({ws:"\n"},i)),this.missionLimit.setGradientVerticalTint([{at:0,color:Wg},{at:1,color:Hg}])},n.createBackground=function(){this.background=this.scene.add.image(0,0,Ug,zg.MISSION_BAR.BACKGROUND),this.background.setWorldSize(375,52),this.add(this.background),this.setSize(this.background.width,this.background.height)},n.createMissionDescriptionWithLimit=function(){this.missionDescriptionWithLimit=this.scene.make.bitmapText({font:Rc.Z.PRIMARY.KEY,size:this.scene.fontSize(15),text:"moveOneCard",origin:{x:0,y:.5}}).setGradientVerticalTint([{at:0,color:Wg},{at:1,color:Hg}]),this.missionDescriptionWithLimit.setMaxSize(209,50),this.add(this.missionDescriptionWithLimit)},n.createMissionDescriptionWithoutLimit=function(){this.missionDescriptionWithoutLimit=this.scene.make.bitmapText({font:Rc.Z.PRIMARY.KEY,size:this.scene.fontSize(15),text:"moveOneCard",origin:{x:.5,y:.5}}).setCenterAlign().setGradientVerticalTint([{at:0,color:Wg},{at:1,color:Hg}]),this.missionDescriptionWithoutLimit.setMaxSize(260,50),this.add(this.missionDescriptionWithoutLimit)},n.createVerticalLine=function(){this.verticalLine=this.scene.add.image(0,0,Ug,zg.MISSION_BAR.LINE),this.verticalLine.setWorldSize(2,40),this.add(this.verticalLine)},n.createMissionLimit=function(){this.missionLimit=this.scene.make.bitmapText({font:Rc.Z.PRIMARY.KEY,size:this.scene.fontSize(15),origin:{x:.5,y:.5}}).setCenterAlign().setGradientVerticalTint([{at:0,color:Wg},{at:1,color:Hg}]),this.missionLimit.setMaxSize(100,50),this.missionLimit.setTranslationParameters({ws:"\n",moves:"2/192"}),this.missionLimit.setText("journeyLimitMoves"),this.add(this.missionLimit)},n.alignComponents=function(){Phaser.Display.Align.In.LeftCenter(this.missionDescriptionWithLimit,this,-18),Phaser.Display.Align.In.Center(this.missionDescriptionWithoutLimit,this),Phaser.Display.Align.In.RightCenter(this.verticalLine,this,-125),Phaser.Display.Align.In.RightCenter(this.missionLimit,this,-40)},t}(Fg),Kg=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n.singleInfo=void 0,n.challengeInfo=void 0,n.tournamentInfo=void 0,n.journeyInfo=void 0,n.fadeInChallengeInfoTween=void 0,n.fadeOutChallengeInfoTween=void 0,n.scene=t,n.init(),n.scene.add.existing((0,As.Z)(n)),n}(0,o.Z)(t,e);var n=t.prototype;return n.getAllHeaderInfos=function(){return this.journeyInfo?[this.singleInfo,this.tournamentInfo,this.journeyInfo]:[this.singleInfo,this.tournamentInfo]},n.getInfoContainersWithout=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var i=this.getAllHeaderInfos();return Le()(i).call(i,(function(e){return!be()(t).call(t,e)}))},n.useChallengeInfo=function(){this.challengeInfo.revive(),this.singleInfo.revive(),this.challengeInfo.setY(this.getChallengeFriendBlockY()),this.playFadeInChallengeInfoAnimation()},n.playKillChallengeInfoAnimation=function(e){var t=this;void 0===e&&(e=500),this.playFadeOutChallengeInfoAnimation(e,(function(){t.challengeInfo.kill()}))},n.playFadeInChallengeInfoAnimation=function(e){var t;void 0===e&&(e=300),Qo.instance.getGameMode()===Xo.CHALLENGE_FRIENDS&&(this.challengeInfo.setAlpha(0),null==(t=this.fadeInChallengeInfoTween)||t.remove(),this.fadeInChallengeInfoTween=this.scene.tweens.add({targets:this.challengeInfo,alpha:{from:0,to:1},duration:e,ease:Phaser.Math.Easing.Sine.Out}))},n.playFadeOutChallengeInfoAnimation=function(e,t){var n;void 0===e&&(e=300),this.challengeInfo.active&&(null==(n=this.fadeOutChallengeInfoTween)||n.remove(),this.fadeOutChallengeInfoTween=this.scene.tweens.add({targets:this.challengeInfo,alpha:{from:1,to:0},duration:e,ease:Phaser.Math.Easing.Sine.Out,onComplete:t}))},n.useSingleInfo=function(){this.singleInfo.revive(),this.challengeInfo.kill()},n.useTournamentInfo=function(){this.tournamentInfo.revive(),this.playKillChallengeInfoAnimation()},n.useMissionInfo=function(){this.journeyInfo&&(this.journeyInfo.revive(),this.playKillChallengeInfoAnimation())},n.update=function(){var e=this.scene.gameplay.boardGame,t=e.getScore(),n=e.getTime(),i=e.getMoves(),a=""+t,s=(0,Ds.F0)(n,!1),r=""+i;switch(Qo.instance.getGameMode()){case Xo.SINGLE:var o=this.singleInfo,c=o.scoreBlock,h=o.timeBlock,u=o.movesBlock;c.setValue({score:a}),h.setValue({time:s}),u.setValue({moves:r});break;case Xo.CHALLENGE_FRIENDS:var l=this.challengeInfo.rightBlock;l.scoreText.setText(a),l.timeText.setText(s),l.moveText.setText(r);var d=this.singleInfo,p=d.scoreBlock,f=d.timeBlock,g=d.movesBlock;p.setValue({score:a}),f.setValue({time:s}),g.setValue({moves:r});break;case Xo.TOURNAMENT:var m=this.tournamentInfo.statBlock,v=m.movesBlock,y=m.timeBlock;m.scoreBlock.setValue({score:a}),y.setValue({time:s}),v.setValue({moves:r});break;case Xo.JOURNEY:if(e.isGameOver())return;if(Rr.filterGameType!=Rr.gameType)return;if(this.updateJourneyInfo(),e.isIdle()||e.isNone())return;this.checkJourneyWinOrLose()}},n.checkJourneyWinOrLose=function(){var e=this.scene.gameplay.boardGame,t=this.scene.journeyLevelMechanicManager;t.isWithinLimit()?e.isGameOver()||t.isMissionCompleted()&&e.handleGameWon():e.outOfMove()},n.updateJourneyInfo=function(){if(this.journeyInfo){var e=this.scene.journeyLevelMechanicManager.getMissionLimit();e?(this.journeyInfo.setLimit(e),this.journeyInfo.enableLimit(!0)):this.journeyInfo.enableLimit(!1)}},n.alignChildren=function(){this.singleInfo.alignChildren(),this.challengeInfo.alignChildren(),this.tournamentInfo.statBlock.alignChildren()},t}(Phaser.GameObjects.Container),Vg=Kg,jg=n(644),Jg=function(e){function t(){for(var t,n,i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];return(n=e.call.apply(e,x()(t=[this]).call(t,a))||this).gameIcon=void 0,n.gameName=void 0,n}return(0,o.Z)(t,e),t}(Phaser.GameObjects.Container),Xg=Jg,qg=Gn.Z.GAMEPLAY_DEFAULT,Qg=qg.KEY,$g=qg.FRAME,em=function(e){function t(t){var n;return(n=e.call(this,t)||this).background=void 0,n.setSize(375,77/2.88),t.add.existing((0,As.Z)(n)),n.createContent(),n.align(),n}(0,o.Z)(t,e);var n=t.prototype;return n.createContent=function(){this.background=new Lf(this.scene,{width:this.width,height:this.height,key:Qg,frame:$g.TOP_UI.BG_TOP_UI}),this.gameIcon=this.scene.add.image(0,0,Qg,$g.RESULT_SCREEN.ICO_KLONDIKE).setTint(14079191),this.gameName=this.scene.add.bitmapText(0,0,Rc.Z.PRIMARY.KEY,jg.ZP.KLONDIKE,this.scene.fontSize(15)).setTint(14079191),this.add([this.background,this.gameIcon,this.gameName]),this.setGameType(is.Z.KLONDIKE)},n.align=function(){Phaser.Display.Align.In.Center(this.background,this,0),Phaser.Display.Align.In.Center(this.gameIcon,this,-30,-2),Phaser.Display.Align.In.Center(this.gameName,this,19,.5)},n.setGameType=function(e){var t=.82;switch(e){case is.Z.KLONDIKE:this.gameIcon.setFrame($g.RESULT_SCREEN.ICO_KLONDIKE),this.gameIcon.setWorldSize(84/2.88*t,41/2.88*t),this.gameName.text=jg.ZP.KLONDIKE;break;case is.Z.FREE_CELL:this.gameIcon.setFrame($g.RESULT_SCREEN.ICO_FREECELL),this.gameIcon.setWorldSize(53/2.88*t,46/2.88*t),this.gameName.text=jg.ZP.FREE_CELL;break;case is.Z.SPIDER:this.gameIcon.setFrame($g.RESULT_SCREEN.ICO_SPIDER),this.gameIcon.setWorldSize(53/2.88*t,61/2.88*t),this.gameName.text=jg.ZP.SPIDER}},t}(Xg),tm=em,nm=function(e){function t(t){var n;return(n=e.call(this,t)||this).gameTypeHeader=void 0,n.createGameTypeHeader(),n}(0,o.Z)(t,e);var n=t.prototype;return n.setGameType=function(e){this.gameTypeHeader.setGameType(e)},n.init=function(){this.setSize(375,62),this.createChallengeInfo(),this.createSingleInfo(),this.createTournamentInfo()},n.useChallengeInfo=function(){e.prototype.useChallengeInfo.call(this);var t=this.getInfoContainersWithout(this.challengeInfo,this.singleInfo);_r(45+this.gameTypeHeader.height),this.scene.gameplay.boardGame.alignBoard(),this.scene.tweens.add({targets:this.singleInfo,y:{from:-200,to:-10+this.gameTypeHeader.height},duration:500,ease:Phaser.Math.Easing.Sine.Out}),this.scene.tweens.add({targets:t,y:{from:0,to:-200},duration:500,ease:Phaser.Math.Easing.Sine.In,onComplete:function(){return t.forEach((function(e){return e.kill()}))}})},n.getChallengeFriendBlockY=function(){var e=this.scene.footer;return e.y-e.displayHeight-30},n.useSingleInfo=function(){var t=this;e.prototype.useSingleInfo.call(this);var n=this.getInfoContainersWithout(this.singleInfo);n.forEach((function(e){return e.kill()})),this.scene.tweens.add({targets:this.singleInfo,y:{from:-200,to:-10+this.gameTypeHeader.height},duration:500,ease:Phaser.Math.Easing.Sine.Out,onStart:function(){_r(45+t.gameTypeHeader.height),t.scene.gameplay.boardGame.alignBoard()}}),this.scene.tweens.add({targets:n,y:{from:0,to:-200},duration:500,ease:Phaser.Math.Easing.Sine.In,onComplete:function(){return n.forEach((function(e){return e.kill()}))}})},n.useTournamentInfo=function(){var t=this;e.prototype.useTournamentInfo.call(this);var n=this.getInfoContainersWithout(this.tournamentInfo);this.scene.tweens.add({targets:this.tournamentInfo,y:{from:-200,to:20+this.gameTypeHeader.height},duration:500,ease:Phaser.Math.Easing.Sine.Out,onStart:function(){_r(70+t.gameTypeHeader.height),t.scene.gameplay.boardGame.alignBoard()}}),this.scene.tweens.add({targets:n,y:{from:0,to:-200},duration:500,ease:Phaser.Math.Easing.Sine.In,onComplete:function(){return n.forEach((function(e){return e.kill()}))}})},n.useMissionInfo=function(){var t=this;if(this.journeyInfo){e.prototype.useMissionInfo.call(this);var n=this.getInfoContainersWithout(this.journeyInfo);this.scene.tweens.add({targets:this.journeyInfo,y:{from:-200,to:6+this.gameTypeHeader.height},duration:500,ease:Phaser.Math.Easing.Sine.Out,onStart:function(){_r(80+t.gameTypeHeader.height),t.scene.gameplay.boardGame.alignBoard()}}),this.scene.tweens.add({targets:n,y:{from:0,to:-200},duration:500,ease:Phaser.Math.Easing.Sine.In,onComplete:function(){return n.forEach((function(e){return e.kill()}))}})}},n.createChallengeInfo=function(){var e=new Eg(this.scene);this.challengeInfo=e,this.add(e),this.challengeInfo.kill()},n.createSingleInfo=function(){var e=new Bg(this.scene);this.singleInfo=e,this.add(e)},n.createTournamentInfo=function(){var e=new Mg(this.scene);this.tournamentInfo=e,this.add(e),this.tournamentInfo.kill()},n.createJourneyInfo=function(){this.journeyInfo=new Yg(this.scene),this.add(this.journeyInfo),this.journeyInfo.kill()},n.createGameTypeHeader=function(){this.gameTypeHeader=new tm(this.scene),this.add(this.gameTypeHeader),Phaser.Display.Align.In.TopCenter(this.gameTypeHeader,this)},t}(Vg),im=nm,am=Gn.Z.GAMEPLAY_DEFAULT,sm=am.KEY,rm=am.FRAME,om=function(e){function t(t){var n;return(n=e.call(this,t)||this).setSize(124,40),n}(0,o.Z)(t,e);var n=t.prototype;return n.alignLeft=function(){this.nameText.setOrigin(1,.5),Phaser.Display.Align.In.RightCenter(this.avatar,this.background,15),Phaser.Display.Align.In.LeftCenter(this.scoreText,this.background,-5,2),Phaser.Display.Align.To.LeftCenter(this.nameText,this.avatar,3),this.nameText.setAlign("left"),this.scoreText.setLeftAlign(),this.scoreText.setOrigin(0,.5)},n.alignRight=function(){this.nameText.setOrigin(0,.5),Phaser.Display.Align.In.LeftCenter(this.avatar,this.background,15),Phaser.Display.Align.In.RightCenter(this.scoreText,this.background,-5,2),Phaser.Display.Align.To.RightCenter(this.nameText,this.avatar,3),this.nameText.setAlign("right"),this.scoreText.setRightAlign(),this.scoreText.setOrigin(1,.5)},n.createBackground=function(){var e=this.scene.add.image(0,0,sm,rm.AVATAR.RECTANGLE);e.setWorldSize(139,24),this.add(e),this.background=e},n.createAvatar=function(){this.avatar=new Bc(this.scene,{width:34,height:34,key:sm,background:rm.AVATAR.BG,frame:rm.AVATAR.BLUE}),this.avatar.loadPhoto(Ka.Z.AVATAR.KEY,Ka.Z.AVATAR.FILE,75),this.add(this.avatar)},n.createText=function(){var e=this.scene.make.bitmapText({font:Rc.Z.PRIMARY.KEY,size:this.scene.fontSize(13),text:"0",origin:{x:.5,y:.5},y:0,x:6});this.add(e);var t=this.scene.add.text(0,0,"name",{color:"#c1ccc0",fontFamily:Rc.Z.FONT_FAMILY});t.setFontSize(this.scene.fontSize(12)),t.setHighQuality(),t.setOrigin(.5),t.setIgnoreLanguage(),this.add(t);var n=this.scene.make.bitmapText({font:Rc.Z.PRIMARY.KEY,size:this.scene.fontSize(14),text:"00:00",origin:{x:.5,y:.5},y:0,x:6});e.setCenterAlign(),this.add(n);var i=this.scene.make.bitmapText({font:Rc.Z.PRIMARY.KEY,size:this.scene.fontSize(14),text:"0",origin:{x:0,y:.5},y:18,x:6});this.add(i),this.scoreText=e,this.timeText=n,this.moveText=i,this.nameText=t},t}(cg),cm=om,hm=100,um=Gn.Z.GAMEPLAY_DEFAULT,lm=um.KEY,dm=um.FRAME,pm=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n.scene=t,n.setSize(375,62),n.createBlocks(),n.createVSText(),n.setScale(Xf()),n}(0,o.Z)(t,e);var n=t.prototype;return n.createBlocks=function(){this.leftBlock=new cm(this.scene),this.leftBlock.alignRight(),this.leftBlock.setAvatarFrame(dm.AVATAR.BLUE),this.rightBlock=new cm(this.scene),this.rightBlock.alignLeft(),this.rightBlock.setAvatarFrame(dm.AVATAR.ORANGE),this.leftBlock.setX(-100),this.rightBlock.setX(hm),this.add([this.leftBlock,this.rightBlock])},n.createVSText=function(){var e=this.scene.add.image(0,0,lm,dm.IC_VS);e.setWorldSize(174/2.88*.7,44/2.88*.7),this.add(e),Phaser.Display.Align.In.Center(e,this)},n.alignChildren=function(){this.leftBlock.setX(-100),this.rightBlock.setX(hm)},t}(gg),fm=pm,gm=Gn.Z.GAMEPLAY_DEFAULT,mm=gm.KEY,vm=gm.FRAME,ym=function(e){function t(t){return e.call(this,t)||this}(0,o.Z)(t,e);var n=t.prototype;return n.createBackground=function(){this.background=this.scene.add.image(0,0,mm,vm.TOURNAMENT.BG_LANDSCAPE),this.background.setWorldSize(543.5,26),this.add(this.background),this.setSize(this.background.width,this.background.height)},n.createTitle=function(){this.tournamentTitle=this.scene.make.bitmapText({font:Rc.Z.PRIMARY.KEY,size:this.scene.fontSize(12),text:"Tournament",origin:{x:.5,y:.5}}),this.tournamentTitle.setIgnoreLanguage(),this.add(this.tournamentTitle),Phaser.Display.Align.In.Center(this.tournamentTitle,this)},t}(Ag),Tm=function(e){function t(t){return e.call(this,t)||this}return(0,o.Z)(t,e),t.prototype.createText=function(){this.text=this.scene.make.bitmapText({font:Rc.Z.PRIMARY.KEY,size:this.scene.fontSize(12),origin:{x:1,y:.5}}),this.text.setTranslationParameter("moves","10"),this.text.setText("headerMoves"),this.add(this.text),this.text.setMaxSize(80,15)},t}(xg),Cm=function(e){function t(t){return e.call(this,t)||this}return(0,o.Z)(t,e),t.prototype.createText=function(){this.text=this.scene.make.bitmapText({font:Rc.Z.PRIMARY.KEY,size:this.scene.fontSize(12),origin:{x:0,y:.5}}),this.text.setTranslationParameter("score","10"),this.text.setText("headerScore"),this.add(this.text),this.text.setMaxSize(80,15)},t}(xg),Em=function(e){function t(t){return e.call(this,t)||this}return(0,o.Z)(t,e),t.prototype.createText=function(){this.text=this.scene.make.bitmapText({font:Rc.Z.PRIMARY.KEY,size:this.scene.fontSize(12),origin:{x:.5,y:.5}}),this.text.setTranslationParameter("time","10"),this.text.setText("headerTime"),this.add(this.text),this.text.setMaxSize(100,15)},t}(xg),Am=Gn.Z.GAMEPLAY_DEFAULT,Sm=Am.KEY,bm=Am.FRAME,Im=function(e){function t(t){var n;return(n=e.call(this,t)||this).setSize(0,0),t.add.existing((0,As.Z)(n)),n.createContent(),n.align(),n}(0,o.Z)(t,e);var n=t.prototype;return n.createContent=function(){var e=this.scene.add.image(0,0,Sm,bm.BLANK);e.setWorldSize(this.width,this.height),e.setTint(0),this.add(e),this.gameIcon=this.scene.add.image(0,0,Sm,bm.HEADER.IC_KLONDIKE),this.gameName=this.scene.make.bitmapText({origin:{x:0,y:.5},text:jg.ZP.KLONDIKE,font:Rc.Z.PRIMARY.KEY,size:this.scene.fontSize(11)}),this.add([this.gameIcon,this.gameName]),this.setGameType(is.Z.KLONDIKE)},n.align=function(){var e=this.gameIcon,t=this.gameName;e.setPosition(e.width/2-this.width/2,-1),t.setX(e.x+e.width/2+5)},n.setGameType=function(e){switch(e){case is.Z.KLONDIKE:this.gameIcon.setFrame(bm.HEADER.IC_KLONDIKE),this.gameIcon.setWorldSize(16,8),this.gameName.text=jg.ZP.KLONDIKE;break;case is.Z.FREE_CELL:this.gameIcon.setFrame(bm.HEADER.IC_FREECELL),this.gameIcon.setWorldSize(11.5,9.5),this.gameName.text=jg.ZP.FREE_CELL;break;case is.Z.SPIDER:this.gameIcon.setFrame(bm.HEADER.IC_SPIDER),this.gameIcon.setWorldSize(11.5,13.5),this.gameName.text=jg.ZP.SPIDER}},t}(Xg),wm=Im,Pm=Gn.Z.GAMEPLAY_DEFAULT,km=Pm.KEY,_m=Pm.FRAME,xm=function(e){function t(t){var n;return(n=e.call(this,t)||this).gameTypeHeader=void 0,n.setSize(579,29),n.createBackground(),n.createGameTypeHeader(),n}(0,o.Z)(t,e);var n=t.prototype;return n.setGameType=function(e){this.gameTypeHeader.setGameType(e)},n.createBackground=function(){var e=new Lf(this.scene,{width:this.width,height:this.height,key:km,frame:_m.HEADER.BG_HEADER,symmetricType:Of.HORIZONTAL});this.add([e]),this.sendToBack(e)},n.createGameTypeHeader=function(){this.gameTypeHeader=new wm(this.scene),this.add(this.gameTypeHeader),Phaser.Display.Align.In.LeftCenter(this.gameTypeHeader,this,-67)},n.createMoves=function(){this.movesBlock=new Tm(this.scene),this.add(this.movesBlock)},n.createTime=function(){this.timeBlock=new Em(this.scene),this.add(this.timeBlock),this.timeBlock.setX(65)},n.createScore=function(){this.scoreBlock=new Cm(this.scene),this.add(this.scoreBlock)},n.alignChildren=function(){this.movesBlock.setX(this.width/2-this.movesBlock.width/2-72),this.scoreBlock.setX(-this.width/2+this.scoreBlock.width/2+206)},t}(_g),Om=xm,Lm=function(e){function t(t){return e.call(this,t)||this}(0,o.Z)(t,e);var n=t.prototype;return n.setGameType=function(e){this.statBlock.setGameType(e)},n.init=function(){this.createContent(),this.setSize(375,this.titleBlock.height+this.statBlock.height),this.alignChildren()},n.createTitle=function(){this.titleBlock=new ym(this.scene),this.add(this.titleBlock)},n.createStat=function(){this.statBlock=new Om(this.scene),this.add(this.statBlock)},n.alignChildren=function(){Phaser.Display.Align.In.TopCenter(this.titleBlock,this,0),Phaser.Display.Align.To.BottomCenter(this.statBlock,this.titleBlock,0,4)},t}(Pg),Rm=Gn.Z.JOURNEY,Dm=Rm.KEY,Bm=Rm.FRAME,Mm=16646084,Nm=15718001,Gm=function(e){function t(t){var n;return(n=e.call(this,t)||this).gameTypeHeader=void 0,n.scene=t,n.createGameTypeHeader(),n}(0,o.Z)(t,e);var n=t.prototype;return n.setGameType=function(e){this.gameTypeHeader.setGameType(e)},n.setLimit=function(e){var t=e.key,n=e.interpolations,i=void 0===n?{}:n;this.missionLimit.setText(t),this.missionLimit.setTranslationParameters((0,s.Z)({ws:": "},i)),this.missionLimit.setGradientVerticalTint([{at:0,color:Nm},{at:1,color:Mm}])},n.createBackground=function(){this.background=this.scene.add.image(0,0,Gn.Z.GAMEPLAY_DEFAULT.KEY,Gn.Z.GAMEPLAY_DEFAULT.FRAME.TOURNAMENT.BG_LANDSCAPE),this.background.setWorldSize(543,25),this.add(this.background),this.setSize(this.background.width,this.background.height)},n.createGameTypeHeader=function(){this.gameTypeHeader=new wm(this.scene),this.add(this.gameTypeHeader),Phaser.Display.Align.In.LeftCenter(this.gameTypeHeader,this,-50)},n.createMissionDescriptionWithLimit=function(){this.missionDescriptionWithLimit=this.scene.make.bitmapText({font:Rc.Z.PRIMARY.KEY,size:this.scene.fontSize(12),text:"moveOneCard",origin:{x:0,y:.5}}).setGradientVerticalTint([{at:0,color:Nm},{at:1,color:Mm}]),this.missionDescriptionWithLimit.setMaxSize(240,20,!0),this.add(this.missionDescriptionWithLimit)},n.createMissionDescriptionWithoutLimit=function(){this.missionDescriptionWithoutLimit=this.scene.make.bitmapText({font:Rc.Z.PRIMARY.KEY,size:this.scene.fontSize(12),text:"moveOneCard",origin:{x:.5,y:.5}}).setCenterAlign().setGradientVerticalTint([{at:0,color:Nm},{at:1,color:Mm}]),this.missionDescriptionWithoutLimit.setMaxSize(400,20,!0),this.add(this.missionDescriptionWithoutLimit)},n.createVerticalLine=function(){this.verticalLine=this.scene.add.image(0,0,Dm,Bm.MISSION_BAR.LINE_LANDSCAPE),this.verticalLine.setWorldSize(7/2.88,46/2.88),this.add(this.verticalLine)},n.createMissionLimit=function(){this.missionLimit=this.scene.make.bitmapText({font:Rc.Z.PRIMARY.KEY,size:this.scene.fontSize(12),origin:{x:.5,y:.5}}).setCenterAlign().setGradientVerticalTint([{at:0,color:Nm},{at:1,color:Mm}]),this.missionLimit.setMaxSize(80,20,!0),this.missionLimit.setTranslationParameters({ws:": ",moves:"2/192"}),this.missionLimit.setText("journeyLimitMoves"),this.add(this.missionLimit)},n.alignComponents=function(){Phaser.Display.Align.In.LeftCenter(this.missionDescriptionWithLimit,this.background,-165),Phaser.Display.Align.In.Center(this.missionDescriptionWithoutLimit,this,20),Phaser.Display.Align.In.RightCenter(this.verticalLine,this,-125),Phaser.Display.Align.In.RightCenter(this.missionLimit,this,-40)},t}(Fg),Fm=function(e){function t(t){return e.call(this,t)||this}(0,o.Z)(t,e);var n=t.prototype;return n.init=function(){this.setSize(579,29),this.createChallengeInfo(),this.createSingleInfo(),this.createTournamentInfo()},n.setGameType=function(e){[this.singleInfo,this.tournamentInfo,this.journeyInfo].forEach((function(t){null==t||t.setGameType(e)}))},n.useChallengeInfo=function(){e.prototype.useChallengeInfo.call(this);var t=this.getInfoContainersWithout(this.challengeInfo,this.singleInfo);_r(45),this.scene.gameplay.boardGame.alignBoard(),this.scene.tweens.add({targets:this.singleInfo,y:{from:-200,to:0},duration:500,ease:Phaser.Math.Easing.Sine.Out}),this.scene.tweens.add({targets:t,y:{from:0,to:-200},duration:500,ease:Phaser.Math.Easing.Sine.In,onComplete:function(){return t.forEach((function(e){return e.kill()}))}})},n.getChallengeFriendBlockY=function(){var e=this.scene.footer;return e.y-e.displayHeight-15},n.useSingleInfo=function(){var t=this,n=this.singleInfo,i=this.getInfoContainersWithout(n);i.forEach((function(e){return e.kill()})),n.setGameType(Rr.filterGameType),e.prototype.useSingleInfo.call(this),this.scene.tweens.add({targets:n,y:{from:-200,to:0},duration:500,ease:Phaser.Math.Easing.Sine.Out,onStart:function(){_r(45),t.scene.gameplay.boardGame.alignBoard()}}),this.scene.tweens.add({targets:i,y:{from:0,to:-200},duration:500,ease:Phaser.Math.Easing.Sine.In,onComplete:function(){return i.forEach((function(e){return e.kill()}))}})},n.useTournamentInfo=function(){var t=this;e.prototype.useTournamentInfo.call(this);var n=this.getInfoContainersWithout(this.tournamentInfo);this.scene.tweens.add({targets:this.tournamentInfo,y:{from:-200,to:(this.tournamentInfo.height-this.height)/2},duration:500,ease:Phaser.Math.Easing.Sine.Out,onStart:function(){_r(t.tournamentInfo.height+14),t.scene.gameplay.boardGame.alignBoard()}}),this.scene.tweens.add({targets:n,y:{from:0,to:-200},duration:500,ease:Phaser.Math.Easing.Sine.In,onComplete:function(){return n.forEach((function(e){return e.kill()}))}})},n.useMissionInfo=function(){var t=this;if(this.journeyInfo){e.prototype.useMissionInfo.call(this);var n=this.getInfoContainersWithout(this.journeyInfo);this.scene.tweens.add({targets:this.journeyInfo,y:{from:-200,to:-2.5},duration:500,ease:Phaser.Math.Easing.Sine.Out,onStart:function(){_r(40),t.scene.gameplay.boardGame.alignBoard()}}),this.scene.tweens.add({targets:n,y:{from:0,to:-200},duration:500,ease:Phaser.Math.Easing.Sine.In,onComplete:function(){return n.forEach((function(e){return e.kill()}))}})}},n.createChallengeInfo=function(){var e=new fm(this.scene);this.challengeInfo=e,this.add(e),this.challengeInfo.kill()},n.createSingleInfo=function(){var e=new Om(this.scene);this.singleInfo=e,this.add(e)},n.createTournamentInfo=function(){var e=new Lm(this.scene);this.tournamentInfo=e,this.add(e),this.tournamentInfo.kill()},n.createJourneyInfo=function(){this.journeyInfo=new Gm(this.scene),this.add(this.journeyInfo),this.journeyInfo.kill(),this.journeyInfo.setGameType(Rr.filterGameType)},t}(Vg),Zm=Fm,Um=GameCore.world.isLandscape()?Zm:im,zm=n(660),Hm=(function(e){e.NEW_DEAL="NEW_DEAL",e.REPLAY="REPLAY"}({}),function(e){function t(t){var n;return(n=e.call(this,t)||this).background=void 0,n.buttonHeight=void 0,n.buttons=[],n.cropBackground=void 0,n.handleChallengeFriend=function(){n.scene.screen.close(Os.o4.PLAY_SCREEN),n.scene instanceof UM&&(n.scene.journey.isPlayingCurrentLevel()&&n.scene.journey.setIsPlayingCurrentLevel(!1),n.scene.handlePlayWithFriend(!0))},n.handleNewDeal=(0,r.Z)(l().mark((function e(){var t;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.scene.screen.close(Os.o4.PLAY_SCREEN),n.scene.events.emit("close-prev-screen"),!(n.scene instanceof UM)){e.next=10;break}return n.scene.journey.isPlayingCurrentLevel()&&n.scene.journey.setIsPlayingCurrentLevel(!1),t=n.scene.gameplay.boardGame.getTime(),e.next=7,n.scene.handlePlaySingle();case 7:if(!(t>6e4)){e.next=10;break}return e.next=10,n.scene.gameplay.handleShowInterstitialAd();case 10:case"end":return e.stop()}}),e)}))),n.handleReplay=function(){n.scene.screen.close(Os.o4.PLAY_SCREEN),n.scene.events.emit("close-prev-screen"),n.scene instanceof UM&&n.scene.gameplay.replayGame()},n.handleJourney=function(){n.scene.screen.close(Os.o4.PLAY_SCREEN),n.scene.screen.get(Os.o4.JOURNEY_SCREEN)?n.scene.screen.open(Os.o4.JOURNEY_SCREEN):(n.scene.game.globalScene.screen.open(Os.o4.NOTIFY_SCREEN,{message:"loading",duration:0,loading:!0}),n.waitingForJourneyScreenLoaded().then((function(){n.scene.game.globalScene.screen.close(Os.o4.NOTIFY_SCREEN),n.scene.screen.open(Os.o4.JOURNEY_SCREEN)})))},n.setSizeContainer(),n.createCropBackground(),n.createBackground(),n.buttonHeight=n.getButtonHeight(),n.createContent(),n.alignButtons(),t.add.existing((0,As.Z)(n)),n.y=n.calculateY(),n}(0,o.Z)(t,e);var n=t.prototype;return n.waitingForJourneyScreenLoaded=function(){var e=(0,r.Z)(l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.scene.screen.get(Os.o4.JOURNEY_SCREEN)){e.next=5;break}return e.next=3,(0,Ds.qZ)(100);case 3:e.next=0;break;case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.openConfirmRestartScreen=function(e){this.scene.screen.open(Os.o4.CONFIRM_RESTART_SCREEN,{buttonType:e})},t}(Phaser.GameObjects.Container)),Wm=Hm,Ym={},Km=function(e){var t=window.game.world.getPixelRatio(),n=window.game.world.getPixelRatioForCanvas(),i=window.game.world.getZoomRatio(),a=window.game.world.getWorldSize(),s=window.game.world.getScreenWidth(),r=window.game.world.getScreenHeight(),o=window.game.ads.getBannerHeight(),c=e.scene,h=e.key,u=e.newKey,l=(e.radius,e.alpha,e.offsetX),d=e.y,p=e.arrowSize,f=e.offsetY,g=e.width*t,m=e.height*t,v=(e.border||0)*t,y=c.textures.get(h).getSourceImage();if(GameCore.world.isLandscape()?(y.width=window.game.world.getPhysicPixels(s,n/i)*t,y.height=window.game.world.getPhysicPixels(r,n/i)*t,f+=o):(y.width=a.width*t,y.height=a.height*t),!y)return!1;if(c.textures.exists(u))return!0;var T=v,C=p*t,E=c.textures.createCanvas(u||h,g,m);E.setFilter(Phaser.Textures.FilterMode.LINEAR);var A=E.context,S=Ym[h];S||((S=document.createElement("canvas")).width=y.width,S.height=y.height,S.getContext("2d").drawImage(y,l,f-d*t,y.width,y.height));return A.beginPath(),A.moveTo(T,0),A.lineTo(g-T,0),A.quadraticCurveTo(g,0,g,0+T),A.lineTo(g,0+m-T-C),A.quadraticCurveTo(g,0+m-C,g-T,0+m-C),A.lineTo(g/2+C,0+m-C),A.lineTo(g/2,0+m),A.lineTo(g/2-C,0+m-C),A.lineTo(T,0+m-C),A.quadraticCurveTo(0,0+m-C,0,0+m-T-C),A.lineTo(0,0+T),A.quadraticCurveTo(0,0,T,0),A.closePath(),A.clip(),E.draw(-y.width/2+g/2,-y.height/2+m/2,S),!0},Vm=function(e){function t(t,n){var i,a=n.key,s=n.width,r=n.height,o=n.border,c=n.radius,h=n.y,u=void 0===h?0:h,l=n.alpha,d=void 0===l?.15:l,p=n.offsetX,f=void 0===p?0:p,g=n.offsetY,m=void 0===g?0:g,v=n.arrowSize,y=void 0===v?12.5:v,T=t.theme.getCurrentThemeConfig().backgroundKey,C=T+a;return i=e.call(this,t,0,0,C)||this,Km({scene:t,key:T,newKey:C,radius:c,border:o,width:s,height:r,alpha:d,y:u,offsetX:f,offsetY:m,arrowSize:y}),i.setTexture(C),i.scene.events.on(Lr.BACKGROUND_CHANGED,(function(e){var n=e+a;Km({scene:t,key:e,newKey:n,radius:c,border:o,width:s,height:r,alpha:d,y:u,offsetX:f,offsetY:m,arrowSize:y}),i.setTexture(n),i.setWorldSize(s,r)})),i.setWorldSize(s,r),i}return(0,o.Z)(t,e),t}(Phaser.GameObjects.Image),jm=Vm,Jm=Gn.Z.GAMEPLAY_DEFAULT,Xm=Jm.KEY,qm=Jm.FRAME,Qm=function(e){function t(t){return e.call(this,t)||this}(0,o.Z)(t,e);var n=t.prototype;return n.setSizeContainer=function(){this.setSize(368,181)},n.createBackground=function(){var e=new Lf(this.scene,{width:this.width,height:this.height,key:Xm,frame:qm.NEW_GAME_POPUP.BACKGROUND,symmetricType:Of.HORIZONTAL});this.background=e,this.add(e)},n.calculateY=function(){var e=this.scene.gameZone.height,t=this.scene.footer;return t.y-t.height/2-e/2-this.height/2-4},n.createCropBackground=function(){this.cropBackground=new jm(this.scene,{key:"play-container-background",radius:0,border:10,width:this.width,height:this.height,y:this.calculateY(),offsetX:0,offsetY:0,arrowSize:12.5}),this.add(this.cropBackground)},n.createContent=function(){this.createJourneyButton(),this.createNewDealButton(),this.createReplayButton()},n.getButtonHeight=function(){return 62.75},n.createJourneyButton=function(){var e=new Ol.Z(this.scene,360,this.buttonHeight);e.setName("Journey"),e.onClick=this.handleJourney;var t=this.scene.add.image(0,0,Xm,qm.NEW_GAME_POPUP.IC_JOURNEY);t.setWorldSize(23.5,27);var n=this.scene.make.bitmapText({font:Rc.Z.BOLD_SHADOW_BLUR.KEY,size:this.scene.fontSize(20),text:"journey",origin:{x:.5,y:.5}}).setTint(16777215,16777215,12833246,12833246);n.setMaxSize(140,40),e.add([t,n]),Phaser.Display.Align.In.Center(t,e,-65),Phaser.Display.Align.In.Center(n,e,25),this.add([e]),this.buttons.push(e)},n.createChallengeButton=function(){var e=new Ol.Z(this.scene,360,this.buttonHeight);e.setName("ChallengeFriend"),e.onClick=this.handleChallengeFriend;var t=this.scene.add.image(0,0,Xm,qm.NEW_GAME_POPUP.IC_WITH_FRIEND);t.setWorldSize(30,25.5);var n=this.scene.make.bitmapText({font:Rc.Z.BOLD_SHADOW_BLUR.KEY,size:this.scene.fontSize(20),text:"withFriends",origin:{x:.5,y:.5}}).setTint(16777215,16777215,12833246,12833246);n.setMaxSize(140,40),e.add([t,n]),Phaser.Display.Align.In.Center(t,e,-65),Phaser.Display.Align.In.Center(n,e,25,2.5),this.add([e]),this.buttons.push(e)},n.createNewDealButton=function(){var e=new Ol.Z(this.scene,360,this.buttonHeight);e.setName("NewDeal"),e.onClick=this.handleNewDeal;var t=this.scene.add.image(0,0,Xm,qm.NEW_GAME_POPUP.IC_NEW_GAME);t.setWorldSize(26,26.5);var n=this.scene.make.bitmapText({font:Rc.Z.BOLD_SHADOW_BLUR.KEY,size:this.scene.fontSize(20),text:"newDeal",origin:{x:.5,y:.5}}).setTint(16777215,16777215,12833246,12833246);n.setMaxSize(140,40),e.add([t,n]),Phaser.Display.Align.In.Center(t,e,-65),Phaser.Display.Align.In.Center(n,e,25,2),this.add([e]),this.buttons.push(e)},n.createReplayButton=function(){var e=new Ol.Z(this.scene,360,this.buttonHeight);e.setName("replay"),e.onClick=this.handleReplay;var t=this.scene.add.image(0,0,Xm,qm.NEW_GAME_POPUP.IC_REPLAY);t.setWorldSize(26,26.5);var n=this.scene.make.bitmapText({font:Rc.Z.BOLD_SHADOW_BLUR.KEY,size:this.scene.fontSize(20),text:"replay",origin:{x:.5,y:.5}}).setTint(16777215,16777215,12833246,12833246);n.setMaxSize(140,40),e.add([t,n]),Phaser.Display.Align.In.Center(t,e,-65),Phaser.Display.Align.In.Center(n,e,25),this.add([e]),this.buttons.push(e)},n.alignButtons=function(){for(var e=0;e<this.buttons.length;e++){var t=this.buttons[e];Phaser.Display.Align.In.TopCenter(t,this.background,0,-this.buttonHeight*e+6.5*e)}},t}(Wm),$m=Qm,ev=function(e){function t(t,n,i,a){var s;return(s=e.call(this,t,n,i,a)||this).playContainer=void 0,s.setDepth(Os.Ks.POPUP),s}return(0,o.Z)(t,e),t}(GameCore.Screen),tv=ev,nv=function(e){function t(t,n,i,a){var s;return(s=e.call(this,t,n,i,a)||this).fadeInAnimation=void 0,s.fadeOutAnimation=void 0,s.playContainer=void 0,s.playContainer=new $m(t),s.add(s.playContainer),s.background.setTint(1315862),s.background.setAlpha(1e-4),s.background.setInteractive(),s.playContainer.setInteractive(),s}(0,o.Z)(t,e);var n=t.prototype;return n.open=function(){e.prototype.open.call(this),this.runOpenAnimation()},n.close=function(){this.runCloseAnimation()},n.runOpenAnimation=function(){var e,t,n=this;null!=(e=this.fadeInAnimation)&&null!=(t=e.tween)&&t.isPlaying()||(this.scene.audio.playSound(Ls.Z.POPUP_SHOW),this.fadeInAnimation||(this.fadeInAnimation=new Mh.Z({targets:[this],onComplete:function(){n.background.once(Phaser.Input.Events.POINTER_DOWN,(function(){return n.scene.screen.close(Os.o4.PLAY_SCREEN)}))}})),this.fadeInAnimation.play())},n.runCloseAnimation=function(){var t,n,i=this;null!=(t=this.fadeOutAnimation)&&null!=(n=t.tween)&&n.isPlaying()||(this.scene.audio.playSound(Ls.Z.POPUP_OFF),this.fadeOutAnimation||(this.fadeOutAnimation=new zm.Z({targets:[this],props:{alpha:0},onComplete:function(){i.scene.scene.get(cs.C.GAME_SCENE).header.playFadeInChallengeInfoAnimation(),e.prototype.close.call(i)}})),this.fadeOutAnimation.play())},t}(tv),iv=nv,av=Gn.Z.GAMEPLAY_DEFAULT,sv=av.KEY,rv=av.FRAME,ov=function(e){function t(t){return e.call(this,t)||this}(0,o.Z)(t,e);var n=t.prototype;return n.setSizeContainer=function(){this.setSize(213,136)},n.createBackground=function(){var e=new Lf(this.scene,{width:this.width,height:this.height,key:sv,frame:rv.NEW_GAME_POPUP.BACKGROUND,symmetricType:Of.HORIZONTAL});this.add(e),this.background=e,this.setSize(e.width,e.height)},n.calculateY=function(){var e=this.scene.gameZone.height,t=this.scene.footer;return t.y-t.height/2-e/2-this.height/2-3},n.createCropBackground=function(){this.cropBackground=new jm(this.scene,{key:"play-container-background",radius:0,border:10,width:this.width,height:this.height,y:this.calculateY(),offsetX:0,offsetY:0,arrowSize:8.125}),this.add(this.cropBackground)},n.createContent=function(){this.createJourneyButton(),this.createNewDealButton(),this.createReplayButton()},n.getButtonHeight=function(){return 38.875},n.createJourneyButton=function(){var e=new Ol.Z(this.scene,this.width-52,this.buttonHeight);e.setName("Journey"),e.onClick=this.handleJourney;var t=this.scene.add.image(0,0,sv,rv.NEW_GAME_POPUP.IC_JOURNEY);t.setWorldSize(22*this._scale,25*this._scale);var n=this.scene.make.bitmapText({font:Rc.Z.BOLD_SHADOW_BLUR.KEY,size:this.scene.fontSize(12),text:"journey",origin:{x:.5,y:.5}}).setTint(16777215,16777215,12833246,12833246);n.setMaxSize(95,25,!0),e.add([t,n]),Phaser.Display.Align.In.Center(t,e,-45),Phaser.Display.Align.In.Center(n,e,18),this.add([e]),this.buttons.push(e)},n.createChallengeButton=function(){var e=new Ol.Z(this.scene,this.width-52,this.buttonHeight);e.setName("ChallengeFriend"),e.onClick=this.handleChallengeFriend;var t=this.scene.add.image(0,0,sv,rv.NEW_GAME_POPUP.IC_WITH_FRIEND);t.setWorldSize(26*this._scale,22*this._scale);var n=this.scene.make.bitmapText({font:Rc.Z.BOLD_SHADOW_BLUR.KEY,size:this.scene.fontSize(12),text:"withFriends",origin:{x:.5,y:.5}}).setTint(16777215,16777215,12833246,12833246);n.setMaxSize(95,25,!0),e.add([t,n]),Phaser.Display.Align.In.Center(t,e,-45),Phaser.Display.Align.In.Center(n,e,18),this.add([e]),this.buttons.push(e)},n.createNewDealButton=function(){var e=new Ol.Z(this.scene,this.width-52,this.buttonHeight);e.setName("NewDeal"),e.onClick=this.handleNewDeal;var t=this.scene.add.image(0,0,sv,rv.NEW_GAME_POPUP.IC_NEW_GAME);t.setWorldSize(22.5*this._scale,23*this._scale);var n=this.scene.make.bitmapText({font:Rc.Z.BOLD_SHADOW_BLUR.KEY,size:this.scene.fontSize(12),text:"newDeal",origin:{x:.5,y:.5}}).setTint(16777215,16777215,12833246,12833246);n.setMaxSize(95,25,!0),e.add([t,n]),Phaser.Display.Align.In.Center(t,e,-45),Phaser.Display.Align.In.Center(n,e,18),this.add([e]),this.buttons.push(e)},n.createReplayButton=function(){var e=new Ol.Z(this.scene,this.width-52,this.buttonHeight);e.setName("replay"),e.onClick=this.handleReplay;var t=this.scene.add.image(0,0,sv,rv.NEW_GAME_POPUP.IC_REPLAY);t.setWorldSize(22.5*this._scale,23*this._scale);var n=this.scene.make.bitmapText({font:Rc.Z.BOLD_SHADOW_BLUR.KEY,size:this.scene.fontSize(12),text:"replay",origin:{x:.5,y:.5}}).setTint(16777215,16777215,12833246,12833246);n.setMaxSize(95,25,!0),e.add([t,n]),Phaser.Display.Align.In.Center(t,e,-45),Phaser.Display.Align.In.Center(n,e,18),this.add([e]),this.buttons.push(e)},n.alignButtons=function(){for(var e=0;e<this.buttons.length;e++){var t=this.buttons[e];Phaser.Display.Align.In.TopCenter(t,this.background,0,-this.buttonHeight*e-(3+1.5*e))}},(0,he.Z)(t,[{key:"_scale",get:function(){return Xf()}}]),t}(Wm),cv=ov,hv=function(e){function t(t,n,i,a){var s;return(s=e.call(this,t,n,i,a)||this).fadeInAnimation=void 0,s.fadeOutAnimation=void 0,s.playContainer=void 0,s.playContainer=new cv(t),s.add(s.playContainer),s.background.setTint(1315862),s.background.setAlpha(1e-4),s.background.setInteractive(),s.playContainer.setInteractive(),s}(0,o.Z)(t,e);var n=t.prototype;return n.open=function(){e.prototype.open.call(this),this.runOpenAnimation()},n.close=function(){this.runCloseAnimation()},n.runOpenAnimation=function(){var e,t,n=this;null!=(e=this.fadeInAnimation)&&null!=(t=e.tween)&&t.isPlaying()||(this.scene.audio.playSound(Ls.Z.POPUP_SHOW),this.fadeInAnimation||(this.fadeInAnimation=new Mh.Z({targets:[this],ease:Phaser.Math.Easing.Sine.InOut,onComplete:function(){n.background.once(Phaser.Input.Events.POINTER_DOWN,(function(){return n.scene.screen.close(Os.o4.PLAY_SCREEN)}))}})),this.fadeInAnimation.play())},n.runCloseAnimation=function(){var t,n,i=this;null!=(t=this.fadeOutAnimation)&&null!=(n=t.tween)&&n.isPlaying()||(this.scene.audio.playSound(Ls.Z.POPUP_OFF),this.fadeOutAnimation||(this.fadeOutAnimation=new zm.Z({targets:[this],props:{alpha:0},onComplete:function(){i.scene.scene.get(cs.C.GAME_SCENE).header.playFadeInChallengeInfoAnimation(),e.prototype.close.call(i)}})),this.fadeOutAnimation.play())},t}(tv),uv=hv,lv=GameCore.world.isLandscape()?uv:iv,dv=n(344),pv=n.n(dv),fv={wins:0,totalGame:0,winsWithoutUndo:0,bestScore:0,averageScore:0,bestWinningTime:0,averageWinningTime:0,mostWinningTime:0,bestWinningMoves:0,mostWinningMoves:0,currentWinningStreak:0,longestWinningStreak:0,targetLevelTracking:{difficultyScore:0,lose:[],win:[]}},gv=function(){function e(e){this.scene=void 0,this.gameStats=void 0,this.scene=e;var t=e.player.getCustomData("game_stats");if(t&&0!==ae()(t).length){var n=t.klondike,i=t.freeCell,a=t.spider;this.gameStats={klondike:GameCore.Utils.Json.clone(n),freeCell:GameCore.Utils.Json.clone(i),spider:GameCore.Utils.Json.clone(a)}}else this.initializeStats(),this.pushGameStats()}var t=e.prototype;return t.initializeStats=function(){var e={easy:GameCore.Utils.Json.clone(fv),medium:GameCore.Utils.Json.clone(fv),hard:GameCore.Utils.Json.clone(fv),random:GameCore.Utils.Json.clone(fv),dynamic:GameCore.Utils.Json.clone(fv)};this.gameStats={klondike:{draw1:GameCore.Utils.Json.clone(fv),draw3:GameCore.Utils.Json.clone(fv)},freeCell:{normal:GameCore.Utils.Json.clone(fv)},spider:{one:GameCore.Utils.Json.clone(e),two:GameCore.Utils.Json.clone(e),four:GameCore.Utils.Json.clone(e)}}},t.addWin=function(e,t){var n=this.getGameStatsForType(e,{draw3:t.draw3,suitSize:t.suitSize,difficulty:t.difficulty});this.calculateNewStats(n,t),this.pushGameStats()},t.calculateNewStats=function(e,t,n){"win"!==(n=n||"win")?this.calculateNewStatsForLose(e,t,n):this.calculateNewStatsForWin(e,t)},t.calculateNewStatsForLose=function(e,t,n){var i,a,r=e.totalGame+1,o=e.targetLevelTracking.difficultyScore;if("lose"===n&&(o-=4)<0){var c=Math.abs(o);o=0;var h=t.suitSize,u=t.difficulty,l=void 0;if("medium"===u?l=this.getGameStatsForType(is.Z.SPIDER,{suitSize:h,difficulty:"easy"}):"hard"===u&&(l=this.getGameStatsForType(is.Z.SPIDER,{suitSize:h,difficulty:"medium"})),void 0!==l){var d=l.targetLevelTracking.difficultyScore;l.targetLevelTracking.difficultyScore=Math.max(0,d-c)}}var p={difficultyScore:o,win:x()(i=[]).call(i,e.targetLevelTracking.win),lose:x()(a=[]).call(a,e.targetLevelTracking.lose)};p.lose.push(Date.now()),mv(e,(0,s.Z)({},e,{totalGame:r,currentWinningStreak:0,targetLevelTracking:p}))},t.calculateNewStatsForWin=function(e,t){var n,i,a=t.score,s=t.currentMoves,r=t.playedTime,o=t.usedUndo,c=e.totalGame+1,h=e.wins+1,u=e.winsWithoutUndo+(o?0:1),l=Math.max(e.bestScore,a),d=(e.averageScore*e.wins+a)/h,p=(e.averageWinningTime*e.wins+r)/h,f=Math.min(r,e.bestWinningTime)||r,g=Math.max(r,e.mostWinningTime),m=Math.min(s,e.bestWinningMoves)||s,v=Math.max(s,e.mostWinningMoves),y=e.currentWinningStreak+1,T=Math.max(y,e.longestWinningStreak),C={difficultyScore:e.targetLevelTracking.difficultyScore+4,win:x()(n=[]).call(n,e.targetLevelTracking.win),lose:x()(i=[]).call(i,e.targetLevelTracking.lose)};C.win.push(Date.now()),mv(e,{totalGame:c,wins:h,winsWithoutUndo:u,bestScore:l,averageScore:d,averageWinningTime:p,bestWinningTime:f,mostWinningTime:g,bestWinningMoves:m,mostWinningMoves:v,currentWinningStreak:y,longestWinningStreak:T,targetLevelTracking:C})},t.addLose=function(e,t){var n=this.getGameStatsForType(e,{draw3:t.draw3,suitSize:t.suitSize,difficulty:t.difficulty});this.calculateNewStats(n,t,"lose"),this.pushGameStats()},t.getGameStatsForType=function(e,t){switch(e){case is.Z.KLONDIKE:return t&&t.draw3?this.gameStats.klondike.draw3:this.gameStats.klondike.draw1;case is.Z.FREE_CELL:return this.gameStats.freeCell.normal;case is.Z.SPIDER:if(!t||!t.suitSize)throw new Error("Can not get option");var n=t.suitSize,i=void 0===n?"one":n,a=t.difficulty;return a?this.gameStats.spider[i][a]:this.getTotalGameStatsForSpider(i);default:throw new Error("Invalid game type: "+e)}},t.pushGameStats=function(){var e=this.gameStats,t=e.klondike,n=e.freeCell,i=e.spider,a={klondike:GameCore.Utils.Json.clone(t),freeCell:GameCore.Utils.Json.clone(n),spider:GameCore.Utils.Json.clone(i)};this.scene.player.setCustomData("game_stats",(0,s.Z)({},a))},t.getWins=function(e,t){return this.getGameStatsForType(e,t).wins},t.getTotalDifficultyScoreForSpider=function(e){var t=this.gameStats.spider,n=t.one,i=t.two,a=t.four;if("one"===e){var s=0;return s+=n.easy.targetLevelTracking.difficultyScore,s+=n.medium.targetLevelTracking.difficultyScore,s+=n.hard.targetLevelTracking.difficultyScore}if("two"===e){var r=0;return r+=i.easy.targetLevelTracking.difficultyScore,r+=i.medium.targetLevelTracking.difficultyScore,r+=i.hard.targetLevelTracking.difficultyScore}if("four"===e){var o=0;return o+=a.easy.targetLevelTracking.difficultyScore,o+=a.medium.targetLevelTracking.difficultyScore,o+=a.hard.targetLevelTracking.difficultyScore}throw new Error("Invalid suit size: "+e)},t.getTotalGameStatsForSpider=function(e){var t=this.gameStats.spider,n=t.one,i=t.two,a=t.four,s=n;switch(e){case"two":s=i;break;case"four":s=a}var r=0;ae()(s).forEach((function(e){r+=s[e].wins}));var o=0;ae()(s).forEach((function(e){o+=s[e].totalGame}));var c=0;ae()(s).forEach((function(e){c+=s[e].winsWithoutUndo}));var h=0;ae()(s).forEach((function(e){h=Math.max(h,s[e].bestScore)}));var u=0,l=0;ae()(s).forEach((function(e){s[e].averageScore>0&&(u+=s[e].averageScore,l++)})),u=l>0?u/l:0;var d=pv();l=0,ae()(s).forEach((function(e){s[e].bestWinningTime<=0||(l++,d=Math.min(d,s[e].bestWinningTime))})),d=l>0?d:0;var p=0;return l=0,ae()(s).forEach((function(e){s[e].averageWinningTime>0&&(p+=s[e].averageWinningTime,l++)})),{wins:r,totalGame:o,winsWithoutUndo:c,bestScore:h,averageScore:u,bestWinningTime:d,averageWinningTime:p=l>0?p/l:0,mostWinningTime:0,bestWinningMoves:0,mostWinningMoves:0,currentWinningStreak:0,longestWinningStreak:0,targetLevelTracking:{difficultyScore:0,win:[],lose:[]}}},e}();function mv(e,t){for(var n in t)GameCore.Utils.Object.hasOwn(t,n)&&(e[n]=t[n])}var vv=gv,yv=function(e){function t(t){var n;return(n=e.call(this,t)||this).columns=void 0,n.rows=void 0,n.cellWidths=void 0,n.cellHeight=void 0,n.textGroup=void 0,n.iconGroup=void 0,n.aligns=void 0,n.tableData=void 0,n.iconSizes=[],n.background=void 0,n.columns=0,n.rows=0,n.tableData=[],n.aligns=[],n.cellWidths=[],n.cellHeight=0,n.textGroup=n.scene.add.group({classType:Phaser.GameObjects.BitmapText}),n.iconGroup=n.scene.add.group({classType:Phaser.GameObjects.Image}),t.add.existing((0,As.Z)(n)),n}(0,o.Z)(t,e);var n=t.prototype;return n.setTableSize=function(e,t,n,i,a){this.columns=t,this.rows=e,this.cellWidths=n,this.cellHeight=i,this.aligns=a,this.updateTable()},n.setIconSizeData=function(e){this.iconSizes=e},n.setTableData=function(e){this.tableData=e,this.updateTable()},n.updateTable=function(){var e;this.textGroup.getChildren().forEach((function(e){return e instanceof Phaser.GameObjects.BitmapText&&e.kill()})),this.iconGroup.getChildren().forEach((function(e){return e instanceof Phaser.GameObjects.Image&&e.kill()}));var t=Nl()(e=this.cellWidths).call(e,(function(e,t){return e+t}),0),n=this.rows*this.cellHeight;this.setSize(t,n);var i=this.tableData;if(i)for(var a=0;a<this.rows;a++){var s=i[a];if(!s)break;var r=this.cellHeight*(.5+a)-this.height/2,o=-this.width/2,c=this.spawnIcon();c.setTexture(Gn.Z.GAMEPLAY_DEFAULT.KEY,s[2]),c.setWorldSize(this.iconSizes[a][0],this.iconSizes[a][1]),c.setPosition(o-25,r);for(var h=0;h<this.columns;h++)if(s[h]){var u=this.cellWidths[h],l=this.spawnText();h==this.columns-1&&l.setIgnoreLanguage(),l.setText(s[h]),0==h?l.setTint(16777215):1==h&&l.setTint(16382878),1==this.aligns[h]?(l.setOrigin(1,.5),l.setPosition(o+u+8,r+4)):0==this.aligns[h]?(l.setOrigin(.5,.5),l.setPosition(o+.5*u,r)):(l.setOrigin(0,.5),l.setPosition(o,r+4)),o+=u}}},n.drawBorder=function(){this.drawRowBorder(),this.drawColumnBorder();var e=this.scene.add.rectangle(0,0,0,0);e.setOrigin(.5,.5),e.setStrokeStyle(1,1907997,.2),e.setSize(this.width,this.height),e.setPosition(-this.width/2,-this.height/2),this.add(e)},n.drawRowBorder=function(){for(var e=-this.height/2,t=0;t<this.rows;t++){var n=this.scene.add.line(-15,e+this.cellHeight*t,0,0,325.0416666666667,0,1333549,1);n.setLineWidth(.8),this.add(n)}},n.drawColumnBorder=function(){for(var e=-this.width/2,t=1;t<this.rows;t++){e+=this.cellWidths[t-1]||0;var n=this.scene.add.line(e,0,0,0,0,this.height,1907997,.1);n.setLineWidth(.2),this.add(n)}},n.spawnText=function(){var e=this.textGroup.getFirstDead()||this.createText();return e.revive(),e},n.spawnIcon=function(){var e=this.iconGroup.get();return e.revive(),e.clearTint(),this.add(e),e},t}(Phaser.GameObjects.Container),Tv=yv,Cv=function(e){function t(t){return e.call(this,t)||this}return(0,o.Z)(t,e),t.prototype.createText=function(){var e=this.scene.make.bitmapText({font:Rc.Z.PRIMARY.KEY,size:this.scene.fontSize(17),origin:{x:.5,y:.5}});return e.setMaxSize(220,40),this.textGroup.add(e),this.add(e),e},t}(Tv),Ev=Cv,Av=295,Sv=36,bv=36,Iv=83,wv=1e3,Pv=Phaser.Math.Easing.Quadratic.Out,kv=Gn.Z.GAMEPLAY_DEFAULT,_v=kv.KEY,xv=kv.FRAME,Ov=296.875,Lv=55/2.88,Rv=849/2.88,Dv=48/2.88,Bv=function(e){function t(t){var n;return(n=e.call(this,t)||this).emptyBar=void 0,n.winRateBar=void 0,n.loseRateBar=void 0,n.isPlayingAnimation=!1,n.totalCount=0,n.winCount=0,n.loseCount=0,n.progressTween=void 0,n.setSize(Av,Lv),n.createEmptyBar(),n.createWinRateBar(),n.createLoseRateBar(),n}(0,o.Z)(t,e);var n=t.prototype;return n.createEmptyBar=function(){this.emptyBar=this.scene.add.image(0,0,_v,xv.BG_PROGRESS),this.emptyBar.setWorldSize(Ov,Lv),this.add(this.emptyBar)},n.createWinRateBar=function(){this.winRateBar=this.scene.add.image(0,0,_v,xv.BG_PROGRESS_WIN),this.winRateBar.setWorldSize(Rv,Dv),this.add(this.winRateBar),Phaser.Display.Align.In.Center(this.winRateBar,this.emptyBar,0,-.5)},n.createLoseRateBar=function(){this.loseRateBar=this.scene.add.image(0,0,_v,xv.BG_PROGRESS_LOSE),this.loseRateBar.setWorldSize(Rv,Dv),this.add(this.loseRateBar),Phaser.Display.Align.In.Center(this.loseRateBar,this.emptyBar,0,-.5)},n.updateWinLoseCount=function(e,t){if(this.winCount=e,this.loseCount=t,this.totalCount=e+t,this.totalCount<=0)return this.winRateBar.kill(),void this.loseRateBar.kill();e?this.winRateBar.revive():this.winRateBar.kill(),t?this.loseRateBar.revive():this.loseRateBar.kill(),this.bringToTop(t<e?this.loseRateBar:this.winRateBar)},n.initAnimation=function(){this.isPlayingAnimation||(this.winRateBar.setCrop(0,0,0,0),this.loseRateBar.setCrop(0,0,0,0))},n.playAnimation=function(){var e=this;this.isPlayingAnimation||(this.isPlayingAnimation=!0,this.progressTween=this.scene.tweens.addCounter({from:0,to:1,duration:wv,ease:Pv,onUpdate:function(t){var n=t.getValue(),i=n*e.winCount,a=n*e.loseCount;e.updateWinProgress(i),e.updateLoseProgress(a)},onComplete:function(){e.updateLoseProgress(e.loseCount),e.updateWinProgress(e.winCount),e.isPlayingAnimation=!1}}))},n.updateWinProgress=function(e){var t=1,n=this.totalCount-1;t=e>=n?1+.2*(e-n):e/Math.max(1,this.totalCount-1)*1;var i=e/this.totalCount;t=t>i?i:t;var a=this.scene.world.getPixelRatio(),s=Rv*t;this.winRateBar.setCrop(0,0,s*a,Dv*a)},n.updateLoseProgress=function(e){var t=1,n=this.totalCount-1;t=e>=n?1+.2*(e-n):e/Math.max(1,this.totalCount-1)*1;var i=e/this.totalCount;t=t>i?i:t;var a=this.scene.world.getPixelRatio(),s=Rv*t;this.loseRateBar.setCrop((Rv-s)*a,0,Rv*a,Dv*a)},n.reset=function(){var e;null==(e=this.progressTween)||e.remove(),this.isPlayingAnimation=!1},t}(Phaser.GameObjects.Container),Mv=16,Nv=5366845,Gv=16404807,Fv=16,Zv=function(e){function t(t){var n;return(n=e.call(this,t)||this).winText=void 0,n.loseText=void 0,n.winCountLabel=void 0,n.loseCountLabel=void 0,n.setSize(Av,Sv),n.createWinCountLabel(),n.createLoseCountLabel(),n.setIgnoreLanguage(),n}(0,o.Z)(t,e);var n=t.prototype;return n.createWinCountLabel=function(){var e=this;this.winText=this.scene.make.bitmapText({font:Rc.Z.BOLD.KEY,size:this.scene.fontSize(Fv),text:"win",origin:{x:0,y:.5}}),this.winText.setMaxSize(120,20),this.winCountLabel=this.scene.make.bitmapText({font:Rc.Z.BOLD.KEY,size:this.scene.fontSize(Fv),text:"62",origin:{x:0,y:.5}}).setTint(Nv),this.add([this.winText,this.winCountLabel]);var t=function(){Phaser.Display.Align.In.LeftCenter(e.winText,e),e.winText.x-=e.x,e.winText.y-=e.y,Phaser.Display.Align.In.RightCenter(e.winCountLabel,e.winText,20)};t(),this.winText.on("textChanged",(function(){t()}))},n.createLoseCountLabel=function(){var e=this;this.loseText=this.scene.make.bitmapText({font:Rc.Z.BOLD.KEY,size:this.scene.fontSize(Fv),text:"lose",origin:{x:1,y:.5}}),this.loseText.setMaxSize(120,20),this.loseCountLabel=this.scene.make.bitmapText({font:Rc.Z.BOLD.KEY,size:this.scene.fontSize(Fv),text:"32",origin:{x:1,y:.5}}).setTint(Gv),this.add([this.loseText,this.loseCountLabel]);Phaser.Display.Align.In.RightCenter(e.loseCountLabel,e),e.loseCountLabel.x-=e.x,e.loseCountLabel.y-=e.y,Phaser.Display.Align.In.RightCenter(e.loseText,e.loseCountLabel)},n.updateWinLoseCount=function(e,t){this.winCountLabel.setText(""+e),this.loseCountLabel.setText(""+t);var n=this.loseCountLabel.width,i=this.loseCountLabel.x-n;this.loseText.x=i},n.setIgnoreLanguage=function(){this.loseCountLabel.setIgnoreLanguage(),this.winCountLabel.setIgnoreLanguage()},t}(Phaser.GameObjects.Container),Uv=Mv,zv=function(e){function t(t){var n;return(n=e.call(this,t)||this).winRateLabel=void 0,n.loseRateLabel=void 0,n.isPlayingAnimation=!1,n.updatedRoundedWinPercentage=-1,n.updatedRoundedLosePercentage=-1,n.setSize(Av,bv),n.createWinRateLabel(),n.createLoseRateLabel(),n.alignComponents(),n.setIgnoreLanguage(),n}(0,o.Z)(t,e);var n=t.prototype;return n.createWinRateLabel=function(){this.winRateLabel=this.scene.make.bitmapText({font:Rc.Z.BOLD.KEY,size:this.scene.fontSize(Uv),text:"67%",origin:{x:0,y:.5}}),this.add(this.winRateLabel)},n.createLoseRateLabel=function(){this.loseRateLabel=this.scene.make.bitmapText({font:Rc.Z.BOLD.KEY,size:this.scene.fontSize(Uv),text:"33%",origin:{x:1,y:.5}}),this.add(this.loseRateLabel)},n.alignComponents=function(){Phaser.Display.Align.In.LeftCenter(this.winRateLabel,this),Phaser.Display.Align.In.RightCenter(this.loseRateLabel,this)},n.getRoundedWinLosePercentage=function(e,t){if(0===e&&0===t)return{win:0,lose:0};var n=Math.round(100*e);return{win:n,lose:100-n}},n.setIgnoreLanguage=function(){this.winRateLabel.setIgnoreLanguage(),this.loseRateLabel.setIgnoreLanguage()},n.updateWinLoseRate=function(e,t){var n=e+t,i=n<=0?0:e/n,a=n<=0?0:t/n,s=this.getRoundedWinLosePercentage(i,a),r=s.win,o=s.lose;this.winRateLabel.setText(r+"%"),this.loseRateLabel.setText(o+"%"),this.updatedRoundedWinPercentage=r,this.updatedRoundedLosePercentage=o},n.initAnimation=function(){this.isPlayingAnimation||(this.winRateLabel.setText("0%"),this.loseRateLabel.setText("0%"))},n.playAnimation=function(){var e=this;this.isPlayingAnimation||(this.isPlayingAnimation=!0,-1!==this.updatedRoundedWinPercentage&&-1!==this.updatedRoundedLosePercentage?(this.scene.tweens.addCounter({from:0,to:this.updatedRoundedWinPercentage,ease:Pv,duration:wv,onUpdate:function(t){var n=Math.round(t.getValue());e.winRateLabel.setText(n+"%")},onComplete:function(){e.isPlayingAnimation=!1}}),this.scene.tweens.addCounter({from:0,to:this.updatedRoundedLosePercentage,ease:Pv,duration:wv,onUpdate:function(t){var n=Math.round(t.getValue());e.loseRateLabel.setText(n+"%")}})):this.isPlayingAnimation=!1)},t}(Phaser.GameObjects.Container),Hv=function(e){function t(t){var n;return(n=e.call(this,t)||this).countLabel=void 0,n.rateLabel=void 0,n.barChart=void 0,n.setSize(Av,Iv),n.createCountLabel(),n.createRateLabel(),n.createBarChart(),n.alignComponents(),n}(0,o.Z)(t,e);var n=t.prototype;return n.setWinLoseCount=function(e,t){this.countLabel.updateWinLoseCount(e,t),this.barChart.updateWinLoseCount(e,t),this.rateLabel.updateWinLoseRate(e,t)},n.initAnimation=function(){this.barChart.initAnimation(),this.rateLabel.initAnimation()},n.playAnimation=function(){this.barChart.playAnimation(),this.rateLabel.playAnimation()},n.createCountLabel=function(){this.countLabel=new Zv(this.scene),this.add(this.countLabel)},n.createRateLabel=function(){this.rateLabel=new zv(this.scene),this.add(this.rateLabel)},n.createBarChart=function(){this.barChart=new Bv(this.scene),this.add(this.barChart)},n.alignComponents=function(){Phaser.Display.Align.In.TopCenter(this.countLabel,this),Phaser.Display.Align.In.Center(this.barChart,this),Phaser.Display.Align.In.BottomCenter(this.rateLabel,this)},n.addBackground=function(){var e="win-lose-chart-background";if(!this.scene.textures.exists(e)){var t=this.width,n=this.height,i=this.scene.add.graphics();i.fillStyle(65280,.2),i.fillRect(0,0,t,n),i.generateTexture(e,t,n),i.destroy()}var a=this.scene.add.image(0,0,e);this.add(a)},t}(Phaser.GameObjects.Container),Wv=Gn.Z.GAMEPLAY_DEFAULT.FRAME,Yv=function(e){function t(t){var n;return(n=e.call(this,t)||this).chart=void 0,n.tableStats=void 0,n.chart=new Hv(t),n.tableStats=new Ev(t),n.tableStats.setTableSize(6,2,[130,125],43,[-1,1]),n.tableStats.drawRowBorder(),n.setSize(340,n.chart.height+n.tableStats.height),n.add([n.chart,n.tableStats]),Phaser.Display.Align.In.TopCenter(n.chart,(0,As.Z)(n)),Phaser.Display.Align.To.BottomCenter(n.tableStats,n.chart,15,10),t.add.existing((0,As.Z)(n)),n}return(0,o.Z)(t,e),t.prototype.setStats=function(e){var t=e.totalGame,n=e.wins,i=e.winsWithoutUndo,a=e.bestScore,s=e.averageScore,r=e.bestWinningTime,o=e.averageWinningTime;this.chart.setWinLoseCount(n,t-n);this.tableStats.setIconSizeData([[23,23.5],[24,19],[18,27],[23.5,23],[19,26.5],[22.5,27]]),this.tableStats.setTableData([["totalGame",""+t,Wv.STATS_FLASH],["winsWithoutUndo",""+i,Wv.STATS_CROWN],["bestScore",""+a,Wv.STATS_MEDAL_START],["avgScore",""+Math.round(s),Wv.STATS_STAR],["bestWinningTime",""+(0,Ds.F0)(r,!1),Wv.STATS_CUP],["avgWinningTime",""+(0,Ds.F0)(o,!1),Wv.STATS_TIMER]])},t}(Phaser.GameObjects.Container),Kv=Yv,Vv=Gn.Z.GAMEPLAY_DEFAULT,jv=Vv.KEY,Jv=Vv.FRAME,Xv=function(e){function t(t,n,i,a){var s;return(s=e.call(this,t)||this).numOfTabs=void 0,s.tabs=void 0,s.currentIdx=void 0,s.callback=void 0,s.numOfTabs=a,s.setSize(n,i),s.createTabs(),s.listenInput(),t.add.existing((0,As.Z)(s)),s}(0,o.Z)(t,e);var n=t.prototype;return n.getCurrentIdx=function(){return this.currentIdx},n.addLabels=function(e){this.add(e);var t=this.width/this.numOfTabs;this.placeCenter(e,0,1.25,t+2)},n.createTabs=function(){var e=this.scene.add.image(0,0,jv,Jv.BTN_BACKGROUND_INACTIVE);e.setWorldSize(this.width,this.height),this.add(e),this.tabs=[];for(var t=this.width/this.numOfTabs,n=0;n<this.numOfTabs;n++){var i=this.scene.add.image(0,0,jv,this.getTabFrame());i.setWorldSize(t,this.height+2.5),this.tabs.push(i)}this.add(this.tabs),this.placeCenter(this.tabs,0,-this.height/2+(this.height+2.5)/2,t+2)},n.getTabFrame=function(){return 3==this.numOfTabs?Jv.BG_SELECT_ACTIVE_3:Jv.BG_SELECT_ACTIVE_2},n.placeCenter=function(e,t,n,i,a){void 0===a&&(a=0);for(var s=t-(this.numOfTabs/2-.5-a)*i,r=0;r<e.length;r++)e[r].setPosition(s+r*i,n)},n.getIdx=function(e){var t=this.width/this.tabs.length;return Math.floor((e+this.width/2)/t)},n.listenInput=function(){var e=this,t=!1;this.setInteractive({useHandCursor:!0}).on(Phaser.Input.Events.POINTER_DOWN,(function(){t=!0})).on(Phaser.Input.Events.POINTER_OUT,(function(){t=!1})).on(Phaser.Input.Events.POINTER_UP,(function(n){if(t){var i=e.getLocalPoint(n.worldX,n.worldY).x;e.selectTab(e.getIdx(i))}t=!1}))},n.selectTab=function(e){if(e!=this.currentIdx){this.currentIdx=e,this.callback&&this.callback(e);for(var t=0;t<this.tabs.length;t++)this.scene.tweens.add({targets:this.tabs[t],alpha:t==e?1:0,duration:200,ease:Phaser.Math.Easing.Sine.InOut})}},(0,he.Z)(t,[{key:"themeColor",get:function(){return 3774208}},{key:"backgroundColor",get:function(){return 16579837}}]),t}(Phaser.GameObjects.Container),qv=Xv,Qv=Gn.Z.GAMEPLAY_DEFAULT,$v=Qv.KEY,ey=Qv.FRAME,ty=function(e){function t(t){var n;return(n=e.call(this,t,321/2.88,43.75)||this).setName("BackButton"),n.createBackground(),n.createContents(),n}(0,o.Z)(t,e);var n=t.prototype;return n.createBackground=function(){var e=this.scene.make.image({key:$v,frame:ey.BUTTON_BACK});e.setWorldSize(this.width,this.height),this.add(e)},n.createContents=function(){var e=new Jl(this.scene,{iconTextPadding:8,text:"back",fontSize:22,iconKey:Gn.Z.GAMEPLAY_DEFAULT.KEY,iconFrame:Gn.Z.GAMEPLAY_DEFAULT.FRAME.IC_BACK,iconWidth:18,iconHeight:17});this.add(e),e.text.setMaxSize(100,35,!0)},t}(Ol.Z),ny=ty,iy=Gn.Z.GAMEPLAY_DEFAULT,ay=iy.KEY,sy=iy.FRAME,ry={WIDTH:184/2.88,HEIGHT:150/2.88},oy={WIDTH:210/2.88,HEIGHT:147/2.88},cy=function(e){function t(t,n,i,a){var s;return void 0===n&&(n="popup"),(s=e.call(this,t)||this).colorBackground=void 0,s.background=void 0,s.gameIcon=void 0,s.gameName=void 0,s.tagType=void 0,s.gameType=void 0,s.tagType=n,i&&a?s.setSize(i,a):"popup"==n?s.setSize(ry.WIDTH,ry.HEIGHT):"full_screen"==n&&s.setSize(oy.WIDTH,oy.HEIGHT),t.add.existing((0,As.Z)(s)),s.createContent(),s}(0,o.Z)(t,e);var n=t.prototype;return n.createContent=function(){this.colorBackground=this.scene.add.image(0,0,ay,sy.HOW_TO_PLAY.TAG_KLONDIKE),this.colorBackground.setWorldSize(this.width,this.height),this.background=this.scene.add.image(0,0,ay,sy.GAME_TYPE_BG),this.background.setWorldSize(this.width,this.height),"full_screen"==this.tagType?this.colorBackground.kill():this.background.kill(),this.gameIcon=this.scene.add.image(0,0,ay,sy.HOW_TO_PLAY.IC_KLONDIKE),this.gameName=this.scene.add.bitmapText(0,0,Rc.Z.PRIMARY.KEY,jg.ZP.KLONDIKE,this.scene.fontSize(11)),this.add([this.colorBackground,this.background,this.gameIcon,this.gameName]),this.setGameType(is.Z.KLONDIKE)},n.align=function(){this.gameName.setOrigin(.5,.5),this.colorBackground.setPosition(0,0),this.gameIcon.setPosition(0,-8),this.gameName.setPosition(0,13)},n.setGameType=function(e){switch(this.gameType=e,e){case is.Z.KLONDIKE:this.colorBackground.setFrame(sy.HOW_TO_PLAY.TAG_KLONDIKE),this.gameIcon.setFrame(sy.HOW_TO_PLAY.IC_KLONDIKE),this.gameIcon.setWorldSize(84/2.88,41/2.88),this.gameName.text=jg.ZP.KLONDIKE;break;case is.Z.FREE_CELL:this.colorBackground.setFrame(sy.HOW_TO_PLAY.TAG_FREECELL),this.gameIcon.setFrame(sy.HOW_TO_PLAY.IC_FREECELL),this.gameIcon.setWorldSize(64/2.88,18.75),this.gameName.text=jg.ZP.FREE_CELL;break;case is.Z.SPIDER:this.colorBackground.setFrame(sy.HOW_TO_PLAY.TAG_SPIDER),this.gameIcon.setFrame(sy.HOW_TO_PLAY.IC_SPIDER),this.gameIcon.setWorldSize(64/2.88,73/2.88),this.gameName.text=jg.ZP.SPIDER}this.align()},t}(Phaser.GameObjects.Container),hy=cy,uy=Gn.Z.GAMEPLAY_DEFAULT,ly=uy.KEY,dy=uy.FRAME,py=function(e){function t(t){var n;return(n=e.call(this,t)||this).bg=void 0,n.klondikeTab=void 0,n.spiderTab=void 0,n.gameStats=void 0,n.chooseContainers=[],n.currentIdx=0,n.gameTypeTag=void 0,n.gameType=void 0,n.header=void 0,n.footer=void 0,n.backgroundHeader=void 0,n.title=void 0,n.createBackground(),n.createTitle(),n.createGameTypeTag(),n.createGameStats(),n.createTabs(),n.createBackButton(),t.add.existing((0,As.Z)(n)),n.setScale(jf(t)),n.setY(Jf(n.scene)),n}(0,o.Z)(t,e);var n=t.prototype;return n.setStats=function(e,t,n){this.chooseContainers[0].setStats(e),t&&this.chooseContainers[1].setStats(t),n&&this.chooseContainers[2].setStats(n)},n.getActiveStats=function(){var e;return Le()(e=this.chooseContainers).call(e,(function(e){return e.active}))},n.setGameType=function(e){this.gameType=e,this.gameTypeTag.setGameType(e),this.updateUI()},n.updateUI=function(){switch(this.updateHeaderAndPopupSize(),this.klondikeTab.selectTab(0),this.spiderTab.selectTab(0),this.gameType){case is.Z.KLONDIKE:this.chooseContainers[0].revive(),this.chooseContainers[1].revive(),this.chooseContainers[2].kill(),this.klondikeTab.revive(),this.spiderTab.kill();break;case is.Z.FREE_CELL:this.chooseContainers[0].revive(),this.chooseContainers[1].kill(),this.chooseContainers[2].kill(),this.klondikeTab.kill(),this.spiderTab.kill();break;default:this.chooseContainers[0].revive(),this.chooseContainers[1].revive(),this.chooseContainers[2].revive(),this.klondikeTab.kill(),this.spiderTab.revive()}},n.updateHeaderAndPopupSize=function(){var e=(0,ul.t)();if(this.gameType===is.Z.FREE_CELL)this.bg.height=494*e,this.backgroundHeader.height=48*e,this.title.setPosition(0,0);else this.bg.height=544*e,this.backgroundHeader.height=97*e,this.title.setPosition(0,-17);this.height=this.bg.displayHeight,this.header.height=this.backgroundHeader.displayHeight,this.header.setPosition(0,-this.height/2+this.header.height/2+2),Phaser.Display.Align.In.TopLeft(this.gameTypeTag,this.header,3,2),this.gameTypeTag.y-=this.header.y,Phaser.Display.Align.To.BottomCenter(this.gameStats,this.header),this.footer.setPosition(0,this.height/2-this.footer.height/2-3)},n.createBackground=function(){var e=(0,ul.t)(),t=this.scene.add.nineslice(0,0,ly,dy.SETTINGS_POPUP,329*e,544*e,0*e,0*e,50/2.88*e,50/2.88*e);t.scale=1/e,this.add(t),this.bg=t,this.setSize(t.displayWidth,t.displayHeight)},n.createGameTypeTag=function(){this.gameTypeTag=new hy(this.scene),this.add(this.gameTypeTag),this.header.add(this.gameTypeTag)},n.createTitle=function(){var e=(0,ul.t)();this.header=this.scene.add.container();var t=this.scene.add.nineslice(0,0,ly,dy.BG_GAME_STAT_TOP,326*e,97*e,0*e,0*e,35/2.88*e,20/2.88*e);t.scale=1/e,this.backgroundHeader=t,this.header.setSize(t.displayWidth,t.displayHeight);var n=this.scene.make.bitmapText({font:Rc.Z.BOLD_SHADOW_BLUR.KEY,size:this.scene.fontSize(22),text:"STATISTICS",origin:{x:.5,y:.5}});this.title=n,n.setMaxSize(220,40),n.setTint(16449487,16449487,15913325,15913325),this.header.add([t,n]),this.add(this.header)},n.createTabs=function(){this.klondikeTab=this.createTab(["Draw 1 mode","Draw 3 mode"]),this.header.add(this.klondikeTab),this.spiderTab=this.createTab(["1 suit","2 suits","4 suits"]),this.header.add(this.spiderTab),this.klondikeTab.setPosition(0,22),this.spiderTab.setPosition(0,22)},n.createTab=function(e){var t=this,n=new qv(this.scene,907/2.88,80/2.88,e.length),i=De()(e).call(e,(function(e,n){var i=t.scene.make.bitmapText({font:Rc.Z.BOLD.KEY,size:t.scene.fontSize(17),text:e,origin:{x:.5,y:.5}});return i.setCenterAlign(),i.setMaxSize(160,30),i}));return n.addLabels(i),n.callback=function(e){i.forEach((function(t,n){return t.setTint(e==n?3172678:7905394)}));var n=t.currentIdx<e?20:-20;t.scene.tweens.add({targets:t.chooseContainers[t.currentIdx],x:t.currentIdx<e?-20:20,alpha:0,duration:200,ease:Phaser.Math.Easing.Sine.InOut}),t.scene.tweens.add({targets:t.chooseContainers[e],x:{from:n,to:0},alpha:1,duration:200,ease:Phaser.Math.Easing.Sine.InOut}),t.currentIdx=e},n},n.createGameStats=function(){var e=this.scene.add.container(0,0),t=new Kv(this.scene),n=new Kv(this.scene);n.setAlpha(0);var i=new Kv(this.scene);i.setAlpha(0),e.setSize(t.width,t.height+34),this.chooseContainers=[t,n,i],e.add(this.chooseContainers),this.add(e),this.gameStats=e},n.createBackButton=function(){var e=this;this.footer=this.scene.add.container();var t=(0,ul.t)(),n=this.scene.add.nineslice(0,0,ly,dy.BG_SETTINGS_BOTTOM,939/2.88*t,205/2.88*t,0*t,0*t,15/2.88*t,25/2.88*t);n.scale=1/t,this.footer.setSize(n.displayWidth,n.displayHeight);var i=new ny(this.scene);i.onClick=function(){e.scene.screen.close(Os.o4.GAME_STATS_SCREEN)},i.y=2,this.footer.add([n,i]),this.add(this.footer)},n.onScreenClose=function(){this.chooseContainers[0].chart.barChart.reset(),this.chooseContainers[1].chart.barChart.reset(),this.chooseContainers[2].chart.barChart.reset()},t}(Phaser.GameObjects.Container),fy=py,gy=function(e){function t(t,n,i,a){var s;return(s=e.call(this,t,n,i,a)||this).scene=void 0,s.fadeInAnimation=void 0,s.fadeOutAnimation=void 0,s.gameStatsContainer=void 0,s.setBackground=function(){s.background.setTint(1315862),s.background.setAlpha(.65)},s.scene=t,s.setBackground(),s.setDepth(Os.Ks.POPUP),s.gameStatsContainer=new fy(t),s.add(s.gameStatsContainer),s.gameStatsContainer.setInteractive(),s}(0,o.Z)(t,e);var n=t.prototype;return n.open=function(t){e.prototype.open.call(this,t);var n=Rr.filterGameType;this.gameStatsContainer.setGameType(n),this.updateStatistics(n),this.runOpenAnimation()},n.updateStatistics=function(e){if(e==is.Z.KLONDIKE){var t=this.scene.gameStats.gameStats.klondike,n=t.draw1,i=t.draw3;this.gameStatsContainer.setStats(n,i)}else if(e==is.Z.FREE_CELL){var a=this.scene.gameStats.gameStats.freeCell.normal;this.gameStatsContainer.setStats(a)}else if(e==is.Z.SPIDER){var s=this.scene.scene.get(cs.C.GAME_SCENE);if(s){var r=s.gameStats.getTotalGameStatsForSpider("one"),o=s.gameStats.getTotalGameStatsForSpider("two"),c=s.gameStats.getTotalGameStatsForSpider("four");this.gameStatsContainer.setStats(r,o,c)}}},n.close=function(){this.runCloseAnimation(),this.gameStatsContainer.onScreenClose()},n.runOpenAnimation=function(){var e,t;if(null==(e=this.fadeInAnimation)||null==(t=e.tween)||!t.isPlaying()){this.scene.audio.playSound(Ls.Z.POPUP_SHOW);var n=this.gameStatsContainer.getActiveStats();n.forEach((function(e){e.chart.initAnimation()})),this.fadeInAnimation||(this.fadeInAnimation=new Mh.Z({targets:[this],onComplete:function(){var e=(0,r.Z)(l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.forEach((function(e){e.chart.playAnimation()}));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()})),this.fadeInAnimation.play()}},n.runCloseAnimation=function(){var t,n,i=this;null!=(t=this.fadeOutAnimation)&&null!=(n=t.tween)&&n.isPlaying()||(this.scene.audio.playSound(Ls.Z.POPUP_OFF),this.fadeOutAnimation||(this.fadeOutAnimation=new zm.Z({targets:[this],props:{alpha:0},onComplete:function(){e.prototype.close.call(i)}})),this.fadeOutAnimation.play())},t}(GameCore.Screen),my=gy,vy=function(e){function t(t){return e.call(this,t)||this}return(0,o.Z)(t,e),t.prototype.createText=function(){var e=this.scene.make.bitmapText({font:Rc.Z.PRIMARY.KEY,size:this.scene.fontSize(17),origin:{x:.5,y:.5}});return e.setMaxSize(140,25),this.textGroup.add(e),this.add(e),e},t}(Tv),yy=vy,Ty=295,Cy=36,Ey=36,Ay=83,Sy=1e3,by=Phaser.Math.Easing.Quadratic.Out,Iy=Gn.Z.GAMEPLAY_DEFAULT,wy=Iy.KEY,Py=Iy.FRAME,ky=296.875,_y=55/2.88,xy=849/2.88,Oy=48/2.88,Ly=function(e){function t(t){var n;return(n=e.call(this,t)||this).emptyBar=void 0,n.winRateBar=void 0,n.loseRateBar=void 0,n.isPlayingAnimation=!1,n.totalCount=0,n.winCount=0,n.loseCount=0,n.progressTween=void 0,n.setSize(Ty,_y),n.createEmptyBar(),n.createWinRateBar(),n.createLoseRateBar(),n}(0,o.Z)(t,e);var n=t.prototype;return n.createEmptyBar=function(){this.emptyBar=this.scene.add.image(0,0,wy,Py.BG_PROGRESS),this.emptyBar.setWorldSize(ky,_y),this.add(this.emptyBar)},n.createWinRateBar=function(){this.winRateBar=this.scene.add.image(0,0,wy,Py.BG_PROGRESS_WIN),this.winRateBar.setWorldSize(xy,Oy),this.add(this.winRateBar),Phaser.Display.Align.In.Center(this.winRateBar,this.emptyBar,0,-.5)},n.createLoseRateBar=function(){this.loseRateBar=this.scene.add.image(0,0,wy,Py.BG_PROGRESS_LOSE),this.loseRateBar.setWorldSize(xy,Oy),this.add(this.loseRateBar),Phaser.Display.Align.In.Center(this.loseRateBar,this.emptyBar,0,-.5)},n.updateWinLoseCount=function(e,t){if(this.winCount=e,this.loseCount=t,this.totalCount=e+t,this.totalCount<=0)return this.winRateBar.kill(),void this.loseRateBar.kill();e?this.winRateBar.revive():this.winRateBar.kill(),t?this.loseRateBar.revive():this.loseRateBar.kill(),this.bringToTop(t<e?this.loseRateBar:this.winRateBar)},n.initAnimation=function(){this.isPlayingAnimation||(this.winRateBar.setCrop(0,0,0,0),this.loseRateBar.setCrop(0,0,0,0))},n.playAnimation=function(){var e=this;this.isPlayingAnimation||(this.isPlayingAnimation=!0,this.progressTween=this.scene.tweens.addCounter({from:0,to:1,duration:Sy,ease:by,onUpdate:function(t){var n=t.getValue(),i=n*e.winCount,a=n*e.loseCount;e.updateWinProgress(i),e.updateLoseProgress(a)},onComplete:function(){e.updateLoseProgress(e.loseCount),e.updateWinProgress(e.winCount),e.isPlayingAnimation=!1}}))},n.updateWinProgress=function(e){var t=1,n=this.totalCount-1;t=e>=n?1+.2*(e-n):e/Math.max(1,this.totalCount-1)*1;var i=e/this.totalCount;t=t>i?i:t;var a=this.scene.world.getPixelRatio(),s=xy*t;this.winRateBar.setCrop(0,0,s*a,Oy*a)},n.updateLoseProgress=function(e){var t=1,n=this.totalCount-1;t=e>=n?1+.2*(e-n):e/Math.max(1,this.totalCount-1)*1;var i=e/this.totalCount;t=t>i?i:t;var a=this.scene.world.getPixelRatio(),s=xy*t;this.loseRateBar.setCrop((xy-s)*a,0,xy*a,Oy*a)},n.reset=function(){var e;null==(e=this.progressTween)||e.remove(),this.isPlayingAnimation=!1},t}(Phaser.GameObjects.Container),Ry=16,Dy=5366845,By=16404807,My=16,Ny=function(e){function t(t){var n;return(n=e.call(this,t)||this).winText=void 0,n.loseText=void 0,n.winCountLabel=void 0,n.loseCountLabel=void 0,n.setSize(Ty,Cy),n.createWinCountLabel(),n.createLoseCountLabel(),n.setIgnoreLanguage(),n}(0,o.Z)(t,e);var n=t.prototype;return n.createWinCountLabel=function(){var e=this;this.winText=this.scene.make.bitmapText({font:Rc.Z.BOLD.KEY,size:this.scene.fontSize(My),text:"win",origin:{x:0,y:.5}}),this.winText.setMaxSize(90,15),this.winCountLabel=this.scene.make.bitmapText({font:Rc.Z.BOLD.KEY,size:this.scene.fontSize(My),text:"62",origin:{x:0,y:.5}}).setTint(Dy),this.add([this.winText,this.winCountLabel]);var t=function(){Phaser.Display.Align.In.LeftCenter(e.winText,e),e.winText.x-=e.x,e.winText.y-=e.y,Phaser.Display.Align.In.RightCenter(e.winCountLabel,e.winText,15)};t(),this.winText.on("textChanged",(function(){t()}))},n.createLoseCountLabel=function(){this.loseText=this.scene.make.bitmapText({font:Rc.Z.BOLD.KEY,size:this.scene.fontSize(My),text:"lose",origin:{x:1,y:.5}}),this.loseText.setMaxSize(90,15),this.loseCountLabel=this.scene.make.bitmapText({font:Rc.Z.BOLD.KEY,size:this.scene.fontSize(My),text:"32",origin:{x:1,y:.5}}).setTint(By),this.add([this.loseText,this.loseCountLabel]),Phaser.Display.Align.In.RightCenter(this.loseCountLabel,this),Phaser.Display.Align.In.RightCenter(this.loseText,this.loseCountLabel,-10)},n.updateWinLoseCount=function(e,t){this.winCountLabel.setText(""+e),this.loseCountLabel.setText(""+t);var n=this.loseCountLabel.width,i=this.loseCountLabel.x-n;this.loseText.x=i},n.setIgnoreLanguage=function(){this.loseCountLabel.setIgnoreLanguage(),this.winCountLabel.setIgnoreLanguage()},t}(Phaser.GameObjects.Container),Gy=Ry,Fy=function(e){function t(t){var n;return(n=e.call(this,t)||this).winRateLabel=void 0,n.loseRateLabel=void 0,n.isPlayingAnimation=!1,n.updatedRoundedWinPercentage=-1,n.updatedRoundedLosePercentage=-1,n.setSize(Ty,Ey),n.createWinRateLabel(),n.createLoseRateLabel(),n.alignComponents(),n.setIgnoreLanguage(),n}(0,o.Z)(t,e);var n=t.prototype;return n.createWinRateLabel=function(){this.winRateLabel=this.scene.make.bitmapText({font:Rc.Z.BOLD.KEY,size:this.scene.fontSize(Gy),text:"67%",origin:{x:0,y:.5}}),this.add(this.winRateLabel)},n.createLoseRateLabel=function(){this.loseRateLabel=this.scene.make.bitmapText({font:Rc.Z.BOLD.KEY,size:this.scene.fontSize(Gy),text:"33%",origin:{x:1,y:.5}}),this.add(this.loseRateLabel)},n.alignComponents=function(){Phaser.Display.Align.In.LeftCenter(this.winRateLabel,this),Phaser.Display.Align.In.RightCenter(this.loseRateLabel,this)},n.getRoundedWinLosePercentage=function(e,t){if(0===e&&0===t)return{win:0,lose:0};var n=Math.round(100*e);return{win:n,lose:100-n}},n.setIgnoreLanguage=function(){this.winRateLabel.setIgnoreLanguage(),this.loseRateLabel.setIgnoreLanguage()},n.updateWinLoseRate=function(e,t){var n=e+t,i=n<=0?0:e/n,a=n<=0?0:t/n,s=this.getRoundedWinLosePercentage(i,a),r=s.win,o=s.lose;this.winRateLabel.setText(r+"%"),this.loseRateLabel.setText(o+"%"),this.updatedRoundedWinPercentage=r,this.updatedRoundedLosePercentage=o},n.initAnimation=function(){this.isPlayingAnimation||(this.winRateLabel.setText("0%"),this.loseRateLabel.setText("0%"))},n.playAnimation=function(){var e=this;this.isPlayingAnimation||(this.isPlayingAnimation=!0,-1!==this.updatedRoundedWinPercentage&&-1!==this.updatedRoundedLosePercentage?(this.scene.tweens.addCounter({from:0,to:this.updatedRoundedWinPercentage,ease:by,duration:Sy,onUpdate:function(t){var n=Math.round(t.getValue());e.winRateLabel.setText(n+"%")},onComplete:function(){e.isPlayingAnimation=!1}}),this.scene.tweens.addCounter({from:0,to:this.updatedRoundedLosePercentage,ease:by,duration:Sy,onUpdate:function(t){var n=Math.round(t.getValue());e.loseRateLabel.setText(n+"%")}})):this.isPlayingAnimation=!1)},t}(Phaser.GameObjects.Container),Zy=function(e){function t(t){var n;return(n=e.call(this,t)||this).countLabel=void 0,n.rateLabel=void 0,n.barChart=void 0,n.setSize(Ty,Ay),n.createCountLabel(),n.createRateLabel(),n.createBarChart(),n.alignComponents(),n}(0,o.Z)(t,e);var n=t.prototype;return n.setWinLoseCount=function(e,t){this.countLabel.updateWinLoseCount(e,t),this.barChart.updateWinLoseCount(e,t),this.rateLabel.updateWinLoseRate(e,t)},n.initAnimation=function(){this.barChart.initAnimation(),this.rateLabel.initAnimation()},n.playAnimation=function(){this.barChart.playAnimation(),this.rateLabel.playAnimation()},n.createCountLabel=function(){this.countLabel=new Ny(this.scene),this.add(this.countLabel)},n.createRateLabel=function(){this.rateLabel=new Fy(this.scene),this.add(this.rateLabel)},n.createBarChart=function(){this.barChart=new Ly(this.scene),this.add(this.barChart)},n.alignComponents=function(){Phaser.Display.Align.In.TopCenter(this.countLabel,this),Phaser.Display.Align.In.Center(this.barChart,this),Phaser.Display.Align.In.BottomCenter(this.rateLabel,this)},n.addBackground=function(){var e="win-lose-chart-background";if(!this.scene.textures.exists(e)){var t=this.width,n=this.height,i=this.scene.add.graphics();i.fillStyle(65280,.2),i.fillRect(0,0,t,n),i.generateTexture(e,t,n),i.destroy()}var a=this.scene.add.image(0,0,e);this.add(a)},t}(Phaser.GameObjects.Container),Uy=Gn.Z.GAMEPLAY_DEFAULT.FRAME,zy=function(e){function t(t){var n;return(n=e.call(this,t)||this).chart=void 0,n.tableStats=void 0,n.chart=new Zy(t),n.tableStats=new yy(t),n.tableStats.setTableSize(6,2,[130,125],43,[-1,1]),n.tableStats.drawRowBorder(),n.setSize(340,n.chart.height+n.tableStats.height),n.add([n.chart,n.tableStats]),Phaser.Display.Align.In.TopCenter(n.chart,(0,As.Z)(n)),Phaser.Display.Align.To.BottomCenter(n.tableStats,n.chart,15,10),t.add.existing((0,As.Z)(n)),n}return(0,o.Z)(t,e),t.prototype.setStats=function(e){var t=e.totalGame,n=e.wins,i=e.winsWithoutUndo,a=e.bestScore,s=e.averageScore,r=e.bestWinningTime,o=e.averageWinningTime;this.chart.setWinLoseCount(n,t-n);this.tableStats.setIconSizeData([[23,23.5],[24,19],[18,27],[23.5,23],[19,26.5],[22.5,27]]),this.tableStats.setTableData([["totalGame",""+t,Uy.STATS_FLASH],["winsWithoutUndo",""+i,Uy.STATS_CROWN],["bestScore",""+a,Uy.STATS_MEDAL_START],["avgScore",""+Math.round(s),Uy.STATS_STAR],["bestWinningTime",""+(0,Ds.F0)(r,!1),Uy.STATS_CUP],["avgWinningTime",""+(0,Ds.F0)(o,!1),Uy.STATS_TIMER]])},t}(Phaser.GameObjects.Container),Hy=zy,Wy=Gn.Z.GAMEPLAY_DEFAULT,Yy=Wy.KEY,Ky=Wy.FRAME,Vy=function(e){function t(t){var n;return(n=e.call(this,t,321/2.88,43.75)||this).setName("BackButton"),n.createBackground(),n.createContents(),n}(0,o.Z)(t,e);var n=t.prototype;return n.createBackground=function(){var e=this.scene.make.image({key:Yy,frame:Ky.BUTTON_BACK});e.setWorldSize(this.width,this.height),this.add(e)},n.createContents=function(){var e=new Jl(this.scene,{iconTextPadding:5,text:"back",fontSize:this.scene.fontSize(19),iconKey:Yy,iconFrame:Ky.IC_BACK,iconWidth:18.75,iconHeight:52/2.88});e.text.setMaxSize(60,20,!0),this.add(e),Phaser.Display.Align.In.Center(e,this,0,-1)},t}(Ol.Z),jy=Vy,Jy=Gn.Z.GAMEPLAY_DEFAULT,Xy=Jy.KEY,qy=Jy.FRAME,Qy=function(e){function t(t){var n;return(n=e.call(this,t,40,40)||this).setName("Close"),n.createButton(),n}return(0,o.Z)(t,e),t.prototype.createButton=function(){var e=this.scene.make.image({key:Xy,frame:qy.HOW_TO_PLAY.IC_X});e.setWorldSize(16.5,17),this.add(e)},t}(Ol.Z),$y=Gn.Z.GAMEPLAY_DEFAULT,eT=$y.KEY,tT=$y.FRAME,nT=function(e){function t(t){var n;return(n=e.call(this,t)||this).bg=void 0,n.klondikeTab=void 0,n.spiderTab=void 0,n.gameStats=void 0,n.chooseContainers=[],n.currentIdx=0,n.gameTypeTag=void 0,n.gameType=void 0,n.header=void 0,n.footer=void 0,n.backgroundHeader=void 0,n.title=void 0,n.closeButton=void 0,n.createBackground(),n.createTitle(),n.createGameTypeTag(),n.createCloseButton(),n.createGameStats(),n.createTabs(),n.addMask(),n.createBackButton(),t.add.existing((0,As.Z)(n)),n.setScale(jf(t)),n.setY(Jf(n.scene)),n}(0,o.Z)(t,e);var n=t.prototype;return n.setStats=function(e,t,n){this.chooseContainers[0].setStats(e),t&&this.chooseContainers[1].setStats(t),n&&this.chooseContainers[2].setStats(n)},n.getActiveStats=function(){var e;return Le()(e=this.chooseContainers).call(e,(function(e){return e.active}))},n.setGameType=function(e){this.gameType=e,this.gameTypeTag.setGameType(e),this.updateUI()},n.updateUI=function(){switch(this.updateHeaderAndPopupSize(),this.klondikeTab.selectTab(0),this.spiderTab.selectTab(0),this.gameType){case is.Z.KLONDIKE:this.chooseContainers[0].revive(),this.chooseContainers[1].revive(),this.chooseContainers[2].kill(),this.klondikeTab.revive(),this.spiderTab.kill();break;case is.Z.FREE_CELL:this.chooseContainers[0].revive(),this.chooseContainers[1].kill(),this.chooseContainers[2].kill(),this.klondikeTab.kill(),this.spiderTab.kill();break;default:this.chooseContainers[0].revive(),this.chooseContainers[1].revive(),this.chooseContainers[2].revive(),this.klondikeTab.kill(),this.spiderTab.revive()}},n.updateHeaderAndPopupSize=function(){var e=(0,ul.t)();if(this.gameType===is.Z.FREE_CELL)this.bg.height=494*e,this.backgroundHeader.height=48*e,this.title.setPosition(0,0);else this.bg.height=544*e,this.backgroundHeader.height=97*e,this.title.setPosition(0,-17);this.height=this.bg.displayHeight,this.header.height=this.backgroundHeader.displayHeight,this.header.setPosition(0,-this.height/2+this.header.height/2+2),Phaser.Display.Align.In.TopLeft(this.gameTypeTag,this.header,3,2),this.gameTypeTag.y-=this.header.y,Phaser.Display.Align.To.BottomCenter(this.gameStats,this.header),Phaser.Display.Align.In.TopRight(this.closeButton,this.header,-6,-2),this.footer.setPosition(0,this.height/2-this.footer.height/2-3)},n.createBackground=function(){var e=(0,ul.t)(),t=this.scene.add.nineslice(0,0,eT,tT.SETTINGS_POPUP,329*e,544*e,0*e,0*e,50/2.88*e,50/2.88*e);t.scale=1/e,this.add(t),this.bg=t,this.setSize(t.displayWidth,t.displayHeight)},n.createGameTypeTag=function(){this.gameTypeTag=new hy(this.scene),this.add(this.gameTypeTag),this.header.add(this.gameTypeTag)},n.createTitle=function(){var e=(0,ul.t)();this.header=this.scene.add.container();var t=this.scene.add.nineslice(0,0,eT,tT.BG_GAME_STAT_TOP,326*e,97*e,0*e,0*e,35/2.88*e,20/2.88*e);t.scale=1/e,this.backgroundHeader=t,this.header.setSize(t.displayWidth,t.displayHeight);var n=this.scene.make.bitmapText({font:Rc.Z.BOLD_SHADOW_BLUR.KEY,size:this.scene.fontSize(22),text:"STATISTICS",origin:{x:.5,y:.5}});this.title=n,n.setMaxSize(150,25),n.setTint(16449487,16449487,15913325,15913325),this.header.add([t,n]),this.add(this.header)},n.createCloseButton=function(){var e=this;this.closeButton=new Qy(this.scene),this.add(this.closeButton),this.closeButton.onClick=function(){e.scene.screen.close(Os.o4.GAME_STATS_SCREEN)}},n.createTabs=function(){this.klondikeTab=this.createTab(["Draw 1 mode","Draw 3 mode"]),this.header.add(this.klondikeTab),this.spiderTab=this.createTab(["1 suit","2 suits","4 suits"]),this.header.add(this.spiderTab),this.klondikeTab.setPosition(0,22),this.spiderTab.setPosition(0,22)},n.createTab=function(e){var t=this,n=new qv(this.scene,907/2.88,80/2.88,e.length),i=De()(e).call(e,(function(e,n){var i=t.scene.make.bitmapText({font:Rc.Z.BOLD.KEY,size:t.scene.fontSize(17),text:e,origin:{x:.5,y:.5}});return i.setMaxSize(100,20),i}));return n.addLabels(i),n.callback=function(e){i.forEach((function(t,n){return t.setTint(e==n?3172678:7905394)}));var n=t.currentIdx<e?20:-20;t.scene.tweens.add({targets:t.chooseContainers[t.currentIdx],x:t.currentIdx<e?-20:20,alpha:0,duration:200,ease:Phaser.Math.Easing.Sine.InOut}),t.scene.tweens.add({targets:t.chooseContainers[e],x:{from:n,to:0},alpha:1,duration:200,ease:Phaser.Math.Easing.Sine.InOut}),t.currentIdx=e},n},n.createGameStats=function(){var e=this.scene.add.container(0,0),t=new Hy(this.scene),n=new Hy(this.scene);n.setAlpha(0);var i=new Hy(this.scene);i.setAlpha(0),e.setSize(t.width,t.height+34),this.chooseContainers=[t,n,i],e.add(this.chooseContainers),this.add(e),this.gameStats=e},n.createBackButton=function(){var e=this;this.footer=this.scene.add.container();var t=(0,ul.t)(),n=this.scene.add.nineslice(0,0,eT,tT.BG_SETTINGS_BOTTOM,939/2.88*t,205/2.88*t,0*t,0*t,15/2.88*t,25/2.88*t);n.scale=1/t,this.footer.setSize(n.displayWidth,n.displayHeight);var i=new jy(this.scene);i.onClick=function(){e.scene.screen.close(Os.o4.GAME_STATS_SCREEN)},i.y=2,this.footer.add([n,i]),this.add(this.footer)},n.addMask=function(){var e=this,t=this.scene.make.graphics({fillStyle:{color:255,alpha:0},visible:!1});t.setName("MaskGraphics");var n=this.width,i=this.height;t.fillRoundedRect(-(n-10)/2,-i/2,n-10,i,0),this.gameStats.setMask(t.createGeometryMask()),this.scene.events.on("update",(function(){var n=e.getWorldPosition(),i=n.x,a=n.y;t.setPosition(i,a)}))},n.onScreenClose=function(){this.chooseContainers[0].chart.barChart.reset(),this.chooseContainers[1].chart.barChart.reset(),this.chooseContainers[2].chart.barChart.reset()},t}(Phaser.GameObjects.Container),iT=nT,aT=function(e){function t(t,n,i,a){var s;return(s=e.call(this,t,n,i,a)||this).scene=void 0,s.fadeInAnimation=void 0,s.gameStatsContainer=void 0,s.fadeOutAnimation=void 0,s.setBackground=function(){s.background.setTint(1315862),s.background.setAlpha(.65)},s.scene=t,s.setBackground(),s.setDepth(Os.Ks.POPUP),s.gameStatsContainer=new iT(t),s.add(s.gameStatsContainer),s.gameStatsContainer.setInteractive(),s}(0,o.Z)(t,e);var n=t.prototype;return n.open=function(){e.prototype.open.call(this);var t=Rr.filterGameType;this.gameStatsContainer.setGameType(t),this.updateStatistics(t),this.runOpenAnimation()},n.updateStatistics=function(e){if(e==is.Z.KLONDIKE){var t=this.scene.gameStats.gameStats.klondike,n=t.draw1,i=t.draw3;this.gameStatsContainer.setStats(n,i)}else if(e==is.Z.FREE_CELL){var a=this.scene.gameStats.gameStats.freeCell.normal;this.gameStatsContainer.setStats(a)}else if(e==is.Z.SPIDER){var s=this.scene.scene.get(cs.C.GAME_SCENE);if(s){var r=s.gameStats.getTotalGameStatsForSpider("one"),o=s.gameStats.getTotalGameStatsForSpider("two"),c=s.gameStats.getTotalGameStatsForSpider("four");this.gameStatsContainer.setStats(r,o,c)}}},n.close=function(){this.runCloseAnimation(),this.gameStatsContainer.onScreenClose()},n.runOpenAnimation=function(){var e,t;if(null==(e=this.fadeInAnimation)||null==(t=e.tween)||!t.isPlaying()){this.scene.audio.playSound(Ls.Z.POPUP_SHOW);var n=this.gameStatsContainer.getActiveStats();n.forEach((function(e){e.chart.initAnimation()})),this.fadeInAnimation||(this.fadeInAnimation=new Mh.Z({targets:[this],onComplete:function(){var e=(0,r.Z)(l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.forEach((function(e){e.chart.playAnimation()}));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()})),this.fadeInAnimation.play()}},n.runCloseAnimation=function(){var t,n,i=this;null!=(t=this.fadeOutAnimation)&&null!=(n=t.tween)&&n.isPlaying()||(this.scene.audio.playSound(Ls.Z.POPUP_OFF),this.fadeOutAnimation||(this.fadeOutAnimation=new zm.Z({targets:[this],props:{alpha:0},onComplete:function(){e.prototype.close.call(i)}})),this.fadeOutAnimation.play())},t}(GameCore.Screen),sT=aT,rT=GameCore.world.isLandscape()?sT:my,oT={STATUS:{READY:"ready",RUNNING:"running",STOPPED:"stopped"}},cT=oT.STATUS,hT=function(){function e(e){this.state=void 0,this.scene=void 0,this.scene=e}var t=e.prototype;return t.init=function(){this.setState(cT.READY)},t.start=function(){this.isRunning()||this.setState(cT.RUNNING)},t.stop=function(){this.isRunning()&&this.setState(cT.STOPPED)},t.setState=function(e){this.state=e},t.isReady=function(){return this.state===cT.READY},t.isRunning=function(){return this.state===cT.RUNNING},t.isStopped=function(){return this.state===cT.STOPPED},e}(),uT=hT,lT=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n.setBackground=function(){var e=n.scene.theme.getCurrentThemeConfig().backgroundKey;if(n.scene.load.off("filecomplete-image-"+e,n.setBackground),n.scene.textures.exists(e))return n.scene.setBackground(e),n.scene.events.emit(Lr.BACKGROUND_CHANGED,e),void n.updateBgApp();n.scene.load.once("filecomplete-image-"+e,n.setBackground)},n.updateCardStyle=function(){var e=n.scene.theme.getCurrentThemeConfig().cardFaceKey;n.scene.load.off("filecomplete-json-"+e,n.updateCardStyle),n.scene.textures.exists(e)?n.scene.gameplay.boardGame.deck.cards.forEach((function(e){return e.updateCardStyle()})):n.scene.load.once("filecomplete-json-"+e,n.updateCardStyle)},n.scene=t,n.setBackground(),n}(0,o.Z)(t,e);var n=t.prototype;return n.updateBgApp=function(){var e=this.scene.theme.getCurrentThemeResources();Fn.Z.updateAppBg(e.backgroundFile)},n.changeBackground=function(e){this.scene.theme.changeBackground(e),this.setBackground(),this.scene.analytics.event(Nn._.THEME_CHANGED,{theme_type:"background",theme_idx:e})},n.changeCardFace=function(e){this.scene.theme.changeCardFace(e),this.updateCardStyle(),this.scene.analytics.event(Nn._.THEME_CHANGED,{theme_type:"card_face",theme_idx:e})},n.changeCardBack=function(e){this.scene.theme.changeCardBack(e),this.updateCardStyle(),this.scene.analytics.event(Nn._.THEME_CHANGED,{theme_type:"card_back",theme_idx:e})},n.loadAllCardAtlas=function(){var e=this;this.scene.theme.getCardStyleAtlasConfigs().forEach((function(t){var n=t.key,i=t.textureURL,a=t.atlasURL;e.scene.textures.exists(n)||e.scene.load.atlas(n,i,a)})),this.scene.load.start()},n.loadAllBackgrounds=function(){var e=this;this.scene.theme.getBackgroundConfigs().forEach((function(t){var n=t.key,i=t.url;e.scene.textures.exists(n)||e.scene.load.image(n,i)})),this.scene.load.start()},t}(uT),dT=lT,pT=Gn.Z.GAMEPLAY_DEFAULT,fT=pT.KEY,gT=pT.FRAME,mT=function(e){function t(t,n,i,a,s,r,o,c){var h;void 0===r&&(r=!0),(h=e.call(this,t,n,i)||this).selectedBorder=void 0,h.tick=void 0,h.margin=0,h.icon=void 0,h.margin=r?26:16,h.createSelectBorder();var u=h.scene.add.image(0,0,a,s);return u.setWorldSize(o||n,c||i),h.icon=u,h.add([u]),r&&h.createExtraBorder(),h.createTick(),h}(0,o.Z)(t,e);var n=t.prototype;return n.setFrame=function(e){this.icon.setFrame(e)},n.createExtraBorder=function(){var e=new np(this.scene,0,0,this.width+3,this.height+3,10,16579837);e.background.setAlpha(0),e.setStrokeStyle(4,16579837),this.add(e)},n.createSelectBorder=function(){var e=this.scene.add.image(0,0,fT,gT.BG_SELECT_THEME);e.setWorldSize(this.width+this.margin,this.height+this.margin),this.add(e),e.kill(),this.selectedBorder=e},n.createTick=function(){this.tick=this.scene.add.image(0,0,Gn.Z.GAMEPLAY_DEFAULT.KEY,Gn.Z.GAMEPLAY_DEFAULT.FRAME.IC_THEME_SELECT),this.tick.setWorldSize(75/2.88,80/2.88),this.add(this.tick);Phaser.Display.Align.In.BottomRight(this.tick,this.selectedBorder,-8,-9),this.tick.kill()},n.showSelectedBorder=function(){this.selectedBorder.revive(),this.tick.revive()},n.hideSelectedBorder=function(){this.selectedBorder.kill(),this.tick.kill()},t}(Ol.Z),vT=mT,yT=function(e){function t(t,n,i,a,s,r,o,c){var h;return void 0===s&&(s=0),void 0===r&&(r=0),void 0===o&&(o=3),void 0===c&&(c=[]),(h=e.call(this,t)||this).margin=void 0,h.viewContainer=void 0,h.items=void 0,h.currentItemInteractive=void 0,h.itemsLength=void 0,h.currentY=void 0,h.offsetTop=void 0,h.offsetBottom=void 0,h.pointerDownX=void 0,h.pointerDownY=void 0,h.lastPointerY=void 0,h.canClickItem=void 0,h.pointerDown=void 0,h.itemsPerRow=void 0,h.distancesInRow=void 0,h.isEnableScroll=!0,h.handlePointerDown=function(e){var t=e.worldX,n=e.worldY;h.pointerDown=!0,h.pointerDownX=e.worldX,h.pointerDownY=e.worldY,h.lastPointerY=e.worldY,h.canClickItem=!0,h.items.forEach((function(i){var a=i.item,s=i.onClick;s&&a.getBounds().contains(t,n)&&(a.emit(Phaser.Input.Events.GAMEOBJECT_POINTER_DOWN,e),h.currentItemInteractive={item:a,onClick:s})}))},h.handlePointerMove=function(e){if(h.pointerDown){var t=e.worldX,n=e.worldY;if(Phaser.Math.Distance.Between(h.pointerDownX,h.pointerDownY,t,n)>15&&(h.canClickItem=!1),!h.canClickItem){var i=Math.max(0,h.itemsLength-h.height+h.offsetTop+h.offsetBottom);h.viewContainer.y+=n-h.lastPointerY,h.viewContainer.y=Phaser.Math.Clamp(h.viewContainer.y,-i,0)}if(h.currentItemInteractive){var a=h.currentItemInteractive,s=a.item;a.onClick&&!s.getBounds().contains(t,n)&&(s.emit(Phaser.Input.Events.GAMEOBJECT_POINTER_OUT,e),h.currentItemInteractive=void 0)}h.items.forEach((function(i){var a=i.item,s=i.onClick;s&&a.getBounds().contains(t,n)&&(a.emit(Phaser.Input.Events.GAMEOBJECT_POINTER_MOVE,e),h.currentItemInteractive={item:a,onClick:s})})),h.lastPointerY=n}},h.handleMouseScroll=function(e,t,n){if(h.isEnableScroll){var i=Math.max(0,h.itemsLength-h.height+h.offsetTop+h.offsetBottom);h.viewContainer.y+=-1*n/5,h.viewContainer.y=Phaser.Math.Clamp(h.viewContainer.y,-i,0)}},h.handlePointerUp=function(e){h.pointerDown=!1;var t=e.worldX,n=e.worldY;h.items.forEach((function(i){var a=i.item,s=i.onClick;s&&a.getBounds().contains(t,n)&&(a.emit(Phaser.Input.Events.GAMEOBJECT_POINTER_UP,e),h.canClickItem&&GameCore.Utils.Valid.isFunction(s)&&s())})),h.currentItemInteractive=void 0},h.handlePointerOut=function(e){if(h.pointerDown=!1,h.currentItemInteractive){var t=h.currentItemInteractive,n=t.item;t.onClick&&(n.emit(Phaser.Input.Events.GAMEOBJECT_POINTER_OUT,e),h.currentItemInteractive=void 0)}h.currentItemInteractive=void 0},h.setSize(n,i),h.margin=a,h.items=[],h.canClickItem=!0,h.pointerDown=!1,h.itemsLength=0,h.offsetTop=s,h.offsetBottom=r,h.currentY=-i/2+s,h.itemsPerRow=o,h.distancesInRow=c,0==c.length&&(h.distancesInRow=[-h.width/3+8,0,h.width/3-8]),h.viewContainer=t.make.container({}),h.add(h.viewContainer),h.setInteractive(),h.listenEvents(),h}(0,o.Z)(t,e);var n=t.prototype;return n.setEnable=function(e){this.isEnableScroll=e},n.listenEvents=function(){this.on(Phaser.Input.Events.GAMEOBJECT_POINTER_DOWN,this.handlePointerDown),this.on(Phaser.Input.Events.GAMEOBJECT_POINTER_MOVE,this.handlePointerMove),this.on(Phaser.Input.Events.GAMEOBJECT_POINTER_UP,this.handlePointerUp),this.on(Phaser.Input.Events.GAMEOBJECT_POINTER_OUT,this.handlePointerOut),this.on(Phaser.Input.Events.GAMEOBJECT_POINTER_WHEEL,this.handleMouseScroll)},n.addItem=function(e,t){this.items.push({item:e,onClick:t}),this.viewContainer.add(e);var n=(this.items.length-1)%this.itemsPerRow,i=n+1==this.itemsPerRow,a=this.currentY+e.height/2+this.margin;e.y=a,e.x=this.distancesInRow[n],i&&(this.itemsLength+=e.height+2*this.margin,this.currentY=a+e.height/2+this.margin)},t}(Phaser.GameObjects.Container),TT=yT,CT=Gn.Z.GAMEPLAY_DEFAULT,ET=CT.KEY,AT=CT.FRAME,ST=Gn.Z.THEME_PREVIEW,bT=function(e){function t(t){var n;return(n=e.call(this,t)||this).bgTitle=void 0,n.title=void 0,n.bg=void 0,n.tab=void 0,n.chooseContainers=void 0,n.currentIdx=0,n.backgroundPreView=void 0,n.cardFacePreView=void 0,n.cardBackPreview=void 0,n.gameTypeTag=void 0,n.gameType=void 0,n.createBackground(),n.createTitle(),n.createGameTypeTag(),n.createTab(),n.createChooseContainer(),n.createBackButton(),n.alignContainers(),n.tab.selectTab(0),t.add.existing((0,As.Z)(n)),n.setScale(jf(t)),n.setY(Jf(n.scene)),n}(0,o.Z)(t,e);var n=t.prototype;return n.setGameType=function(e){this.gameType=e,this.gameTypeTag.setGameType(e),this.updateThemePreviews()},n.updateThemePreviews=function(){var e=this.scene.theme.getThemePreview();this.backgroundPreView.forEach((function(t,n){t.setFrame(e.Background[n])})),this.cardFacePreView.forEach((function(t,n){t.setFrame(e.CardFace[n])})),this.cardBackPreview.forEach((function(t,n){t.setFrame(e.CardBack[n])}))},n.createBackground=function(){var e=(0,ul.t)(),t=this.scene.add.nineslice(0,0,ET,AT.SETTINGS_POPUP,329*e,544*e,0*e,0*e,50/2.88*e,50/2.88*e);t.scale=1/e,this.add(t),this.bg=t,this.setSize(t.displayWidth,t.displayHeight)},n.createGameTypeTag=function(){this.gameTypeTag=new hy(this.scene),this.gameTypeTag.kill(),this.add(this.gameTypeTag),Phaser.Display.Align.In.TopLeft(this.gameTypeTag,this,1,.5)},n.createTitle=function(){var e=(0,ul.t)(),t=this.scene.add.nineslice(0,0,ET,AT.BG_GAME_STAT_TOP,326*e,97*e,0*e,0*e,35/2.88*e,20/2.88*e);t.scale=1/e;var n=this.scene.make.bitmapText({font:Rc.Z.BOLD_SHADOW_BLUR.KEY,size:this.scene.fontSize(22),text:"THEME",origin:{x:.5,y:.5}});n.setMaxSize(220,40),n.setTint(16449487,16449487,15913325,15913325),this.add([t,n]),t.setPosition(0,-this.height/2+t.displayHeight/2+2),n.y=t.y-17,this.bgTitle=t,this.title=n},n.createTab=function(){var e,t=this;this.tab=new qv(this.scene,907/2.88,80/2.88,3),this.add(this.tab),Phaser.Display.Align.In.TopCenter(this.tab,this,0,-60);var n=De()(e=["background","cardFace","cardBack"]).call(e,(function(e,n){var i=t.scene.make.bitmapText({font:Rc.Z.BOLD.KEY,size:t.scene.fontSize(15),text:e,origin:{x:.5,y:.5}});return i.setCenterAlign(),i.setMaxSize(110,30),i}));this.tab.addLabels(n),this.tab.callback=function(e){n.forEach((function(t,n){return t.setTint(e==n?3172678:7905394)}));var i=t.currentIdx<e?20:-20;t.scene.tweens.add({targets:t.chooseContainers[t.currentIdx],x:t.currentIdx<e?-20:20,alpha:0,duration:200,ease:Phaser.Math.Easing.Sine.InOut}),t.scene.tweens.add({targets:t.chooseContainers[e],x:{from:i,to:0},alpha:1,duration:200,ease:Phaser.Math.Easing.Sine.InOut}),t.currentIdx=e}},n.createChooseContainer=function(){this.chooseContainers=[],this.createBackgroundChoose(),this.createCardFaceChoose(),this.createCardBackChoose(),this.chooseContainers[1].setAlpha(0),this.chooseContainers[2].setAlpha(0)},n.createBackgroundChoose=function(){var e=this,t=new TT(this.scene,this.bg.width,this.bg.height/1.25,16,0,100,3,[-104,0,104]);this.add(t),Phaser.Display.Align.In.TopCenter(t,this,0,-110);for(var n=[],i=this.scene.theme.getThemePreview().Background,a=0;a<i.length;a++){var s=i[a]||"blank",r=new vT(this.scene,82,121,ST.KEY,s);r.name="Background",n.push(r)}n.forEach((function(a,s){s<i.length&&(a.onClick=function(){},a.disableInteractive()),t.addItem(a,(function(){a.visible&&(n.forEach((function(e){return e.hideSelectedBorder()})),a.showSelectedBorder(),e.scene instanceof UM&&e.scene.themeHandler.changeBackground(s))}))})),this.chooseContainers.push(t),this.backgroundPreView=n},n.createCardFaceChoose=function(){var e=this,t=new TT(this.scene,this.bg.width,this.bg.height/1.25,16,0,100,3,[-104,0,104]);this.add(t),Phaser.Display.Align.In.TopCenter(t,this,0,-110);for(var n=[],i=this.scene.theme.getThemePreview().CardFace,a=0;a<i.length;a++){var s=i[a]||"blank",r=new vT(this.scene,82,121,ST.KEY,s,!1,93,114);r.name="CardFace",n.push(r)}n.forEach((function(a,s){s<i.length&&(a.onClick=function(){},a.disableInteractive(),t.addItem(a,(function(){a.visible&&(n.forEach((function(e){return e.hideSelectedBorder()})),a.showSelectedBorder(),e.scene instanceof UM&&e.scene.themeHandler.changeCardFace(s))})))})),this.chooseContainers.push(t),this.cardFacePreView=n},n.createCardBackChoose=function(){var e=this,t=new TT(this.scene,this.bg.width,this.bg.height/1.25,11,0,100,3,[-104,0,104]);this.add(t),Phaser.Display.Align.In.TopCenter(t,this,0,-110);for(var n=[],i=this.scene.theme.getThemePreview().CardBack,a=0;a<i.length;a++){var s=i[a]||"blank",r=new vT(this.scene,82,121,ST.KEY,s,!1);r.name="CardBack",n.push(r)}n.forEach((function(a,s){s<i.length&&(a.onClick=function(){},a.disableInteractive(),t.addItem(a,(function(){a.visible&&(n.forEach((function(e){return e.hideSelectedBorder()})),a.showSelectedBorder(),e.scene instanceof UM&&e.scene.themeHandler.changeCardBack(s))})))})),this.chooseContainers.push(t),this.cardBackPreview=n},n.createBgMask=function(){var e=this.scene.add.rectangle(-this.width/2+10,20,20,this.height-80,16579837),t=this.scene.add.rectangle(this.width/2-10,20,20,this.height-80,16579837);this.add(e),this.add(t)},n.createBackButton=function(){var e=this,t=(0,ul.t)(),n=this.scene.add.nineslice(0,0,ET,AT.BG_SETTINGS_BOTTOM,939/2.88*t,205/2.88*t,0*t,0*t,15/2.88*t,25/2.88*t);n.scale=1/t;var i=new ny(this.scene);i.onClick=function(){e.scene.screen.close(Os.o4.THEME_SCREEN)},i.setPosition(0,3);var a=this.scene.add.container();a.setSize(n.displayWidth,n.displayHeight),a.add([n,i]),this.add(a),Phaser.Display.Align.In.BottomCenter(a,this,0,-3)},n.alignContainers=function(){this.bringToTop(this.bgTitle),this.bringToTop(this.title),this.bringToTop(this.tab),this.bringToTop(this.gameTypeTag)},n.hideAllBorder=function(){this.backgroundPreView.forEach((function(e){return e.hideSelectedBorder()})),this.cardFacePreView.forEach((function(e){return e.hideSelectedBorder()})),this.cardBackPreview.forEach((function(e){return e.hideSelectedBorder()}))},t}(Phaser.GameObjects.Container),IT=bT,wT=function(e){function t(t,n,i,a){var s;return(s=e.call(this,t,n,i,a)||this).scene=void 0,s.fadeOutAnimation=void 0,s.fadeInAnimation=void 0,s.themeContainer=void 0,s.setBackground=function(){s.background.setTint(1315862),s.background.setAlpha(.65)},s.scene=t,s.setBackground(),s.setDepth(Os.Ks.POPUP),s.themeContainer=new IT(t),s.add(s.themeContainer),s}(0,o.Z)(t,e);var n=t.prototype;return n.open=function(t){e.prototype.open.call(this,t);var n=Rr.filterGameType;this.themeContainer.setGameType(n),this.themeContainer.setAlpha(1),this.scene.themeHandler.loadAllBackgrounds(),this.scene.themeHandler.loadAllCardAtlas(),this.updateSelected(),this.runOpenAnimation()},n.updateSelected=function(){this.themeContainer.hideAllBorder();var e=this.scene.theme.getCurrentIdxConfig(),t=e.backgroundIdx,n=e.cardFaceIdx,i=e.cardBackIdx;this.themeContainer.backgroundPreView[t].showSelectedBorder(),this.themeContainer.cardFacePreView[n].showSelectedBorder(),this.themeContainer.cardBackPreview[i].showSelectedBorder()},n.close=function(){this.runCloseAnimation()},n.runOpenAnimation=function(){var e,t;null!=(e=this.fadeInAnimation)&&null!=(t=e.tween)&&t.isPlaying()||(this.scene.audio.playSound(Ls.Z.POPUP_SHOW),this.fadeInAnimation||(this.fadeInAnimation=new Mh.Z({targets:[this]})),this.fadeInAnimation.play())},n.runCloseAnimation=function(){var t,n,i=this;null!=(t=this.fadeOutAnimation)&&null!=(n=t.tween)&&n.isPlaying()||(this.scene.audio.playSound(Ls.Z.POPUP_OFF),this.fadeOutAnimation||(this.fadeOutAnimation=new zm.Z({targets:[this],props:{alpha:0},onComplete:function(){e.prototype.close.call(i)}})),this.fadeOutAnimation.play())},t}(GameCore.Screen),PT=wT,kT=Gn.Z.GAMEPLAY_DEFAULT,_T=kT.KEY,xT=kT.FRAME,OT=function(e){function t(t,n,i,a,s,r,o,c){var h;void 0===r&&(r=!0),(h=e.call(this,t,n,i)||this).selectedBorder=void 0,h.tick=void 0,h.margin=0,h.icon=void 0,h.margin=r?26:16,h.createSelectBorder();var u=h.scene.add.image(0,0,a,s);return u.setWorldSize(o||n,c||i),h.icon=u,h.add([u]),r&&h.createExtraBorder(),h.createTick(),h}(0,o.Z)(t,e);var n=t.prototype;return n.setFrame=function(e){this.icon.setFrame(e)},n.createExtraBorder=function(){var e=new np(this.scene,0,0,this.width+3,this.height+3,10,16579837);e.background.setAlpha(0),e.setStrokeStyle(4,16579837),this.add(e)},n.createSelectBorder=function(){var e=this.scene.add.image(0,0,_T,xT.BG_SELECT_THEME);e.setWorldSize(this.width+this.margin,this.height+this.margin),this.add(e),e.kill(),this.selectedBorder=e},n.createTick=function(){this.tick=this.scene.add.image(0,0,Gn.Z.GAMEPLAY_DEFAULT.KEY,Gn.Z.GAMEPLAY_DEFAULT.FRAME.IC_THEME_SELECT),this.tick.setWorldSize(75/2.88,80/2.88),this.add(this.tick);Phaser.Display.Align.In.BottomRight(this.tick,this.selectedBorder,-8,-9),this.tick.kill()},n.showSelectedBorder=function(){this.selectedBorder.revive(),this.tick.revive()},n.hideSelectedBorder=function(){this.selectedBorder.kill(),this.tick.kill()},t}(Ol.Z),LT=OT,RT=Gn.Z.GAMEPLAY_DEFAULT,DT=RT.KEY,BT=RT.FRAME,MT=Gn.Z.THEME_PREVIEW,NT=function(e){function t(t){var n;return(n=e.call(this,t)||this).bgTitle=void 0,n.title=void 0,n.bg=void 0,n.tab=void 0,n.chooseContainers=void 0,n.currentIdx=0,n.backgroundPreView=void 0,n.cardFacePreView=void 0,n.cardBackPreview=void 0,n.closeButton=void 0,n.gameTypeTag=void 0,n.gameType=void 0,n.createBackground(),n.createTitle(),n.createGameTypeTag(),n.createCloseButton(),n.createTab(),n.createChooseContainer(),n.addMask(),n.createBackButton(),n.alignContainers(),n.tab.selectTab(0),t.add.existing((0,As.Z)(n)),n.setScale(jf(t)),n.setY(Jf(n.scene)),n}(0,o.Z)(t,e);var n=t.prototype;return n.setGameType=function(e){this.gameType=e,this.gameTypeTag.setGameType(e),this.updateThemePreviews()},n.updateThemePreviews=function(){var e=this.scene.theme.getThemePreview();this.backgroundPreView.forEach((function(t,n){t.setFrame(e.Background[n])})),this.cardFacePreView.forEach((function(t,n){t.setFrame(e.CardFace[n])})),this.cardBackPreview.forEach((function(t,n){t.setFrame(e.CardBack[n])}))},n.createBackground=function(){var e=(0,ul.t)(),t=this.scene.add.nineslice(0,0,DT,BT.SETTINGS_POPUP,329*e,544*e,0*e,0*e,50/2.88*e,50/2.88*e);t.scale=1/e,this.add(t),this.bg=t,this.setSize(t.displayWidth,t.displayHeight)},n.createGameTypeTag=function(){this.gameTypeTag=new hy(this.scene),this.gameTypeTag.kill(),this.add(this.gameTypeTag),Phaser.Display.Align.In.TopLeft(this.gameTypeTag,this,1,.5)},n.createTitle=function(){var e=(0,ul.t)(),t=this.scene.add.nineslice(0,0,DT,BT.BG_GAME_STAT_TOP,326*e,97*e,0*e,0*e,35/2.88*e,20/2.88*e);t.scale=1/e;var n=this.scene.make.bitmapText({font:Rc.Z.BOLD_SHADOW_BLUR.KEY,size:this.scene.fontSize(22),text:"THEME",origin:{x:.5,y:.5}});n.setMaxSize(150,25),n.setTint(16449487,16449487,15913325,15913325),this.add([t,n]),t.setPosition(0,-this.height/2+t.displayHeight/2+2),n.y=t.y-17,this.bgTitle=t,this.title=n},n.createCloseButton=function(){var e=this;this.closeButton=new Qy(this.scene),this.add(this.closeButton),Phaser.Display.Align.In.TopRight(this.closeButton,this,-6.5,-11.5),this.closeButton.onClick=function(){e.scene.screen.close(Os.o4.THEME_SCREEN)}},n.createTab=function(){var e,t=this;this.tab=new qv(this.scene,907/2.88,80/2.88,3),this.add(this.tab),Phaser.Display.Align.In.TopCenter(this.tab,this,0,-60);var n=De()(e=["background","cardFace","cardBack"]).call(e,(function(e){var n=t.scene.make.bitmapText({font:Rc.Z.BOLD.KEY,size:t.scene.fontSize(15),text:e,origin:{x:.5,y:.5}});return n.setCenterAlign(),n.setMaxSize(75,18),n}));this.tab.addLabels(n),this.tab.callback=function(e){n.forEach((function(t,n){return t.setTint(e==n?3172678:7905394)}));var i=t.currentIdx<e?20:-20;t.scene.tweens.add({targets:t.chooseContainers[t.currentIdx],x:t.currentIdx<e?-20:20,alpha:0,duration:200,ease:Phaser.Math.Easing.Sine.InOut}),t.scene.tweens.add({targets:t.chooseContainers[e],x:{from:i,to:0},alpha:1,duration:200,ease:Phaser.Math.Easing.Sine.InOut}),t.currentIdx=e}},n.createChooseContainer=function(){this.chooseContainers=[],this.createBackgroundChoose(),this.createCardFaceChoose(),this.createCardBackChoose(),this.chooseContainers[1].setAlpha(0),this.chooseContainers[2].setAlpha(0)},n.createBackgroundChoose=function(){var e=this,t=new TT(this.scene,this.bg.width,this.bg.height/1.25,16,0,100,3,[-104,0,104]);this.add(t),Phaser.Display.Align.In.TopCenter(t,this,0,-110);for(var n=[],i=this.scene.theme.getThemePreview().Background,a=0;a<i.length;a++){var s=i[a]||"blank",r=new LT(this.scene,82,121,MT.KEY,s);r.name="Background",n.push(r)}n.forEach((function(a,s){s<i.length&&(a.onClick=function(){},a.disableInteractive()),t.addItem(a,(function(){a.visible&&(n.forEach((function(e){return e.hideSelectedBorder()})),a.showSelectedBorder(),e.scene instanceof UM&&e.scene.themeHandler.changeBackground(s))}))})),this.chooseContainers.push(t),this.backgroundPreView=n},n.createCardFaceChoose=function(){var e=this,t=new TT(this.scene,this.bg.width,this.bg.height/1.25,16,0,100,3,[-104,0,104]);this.add(t),Phaser.Display.Align.In.TopCenter(t,this,0,-110);for(var n=[],i=this.scene.theme.getThemePreview().CardFace,a=0;a<i.length;a++){var s=i[a]||"blank",r=new LT(this.scene,82,121,MT.KEY,s,!1,93,114);r.name="CardFace",n.push(r)}n.forEach((function(a,s){s<i.length&&(a.onClick=function(){},a.disableInteractive(),t.addItem(a,(function(){a.visible&&(n.forEach((function(e){return e.hideSelectedBorder()})),a.showSelectedBorder(),e.scene instanceof UM&&e.scene.themeHandler.changeCardFace(s))})))})),this.chooseContainers.push(t),this.cardFacePreView=n},n.createCardBackChoose=function(){var e=this,t=new TT(this.scene,this.bg.width,this.bg.height/1.25,11,0,100,3,[-104,0,104]);this.add(t),Phaser.Display.Align.In.TopCenter(t,this,0,-110);for(var n=[],i=this.scene.theme.getThemePreview().CardBack,a=0;a<i.length;a++){var s=i[a]||"blank",r=new LT(this.scene,82,121,MT.KEY,s,!1);r.name="CardBack",n.push(r)}n.forEach((function(a,s){s<i.length&&(a.onClick=function(){},a.disableInteractive(),t.addItem(a,(function(){a.visible&&(n.forEach((function(e){return e.hideSelectedBorder()})),a.showSelectedBorder(),e.scene instanceof UM&&e.scene.themeHandler.changeCardBack(s))})))})),this.chooseContainers.push(t),this.cardBackPreview=n},n.addMask=function(){var e=this,t=this.scene.make.graphics({fillStyle:{color:255,alpha:0},visible:!1});t.setName("MaskGraphics");var n=this.width,i=this.height;t.fillRoundedRect(-(n-10)/2,-i/2,n-10,i,0),this.chooseContainers[0].setMask(t.createGeometryMask()),this.chooseContainers[1].setMask(t.createGeometryMask()),this.chooseContainers[2].setMask(t.createGeometryMask()),this.scene.events.on("update",(function(){var n=e.getWorldPosition(),i=n.x,a=n.y;t.setPosition(i,a)}))},n.createBgMask=function(){var e=this.scene.add.rectangle(-this.width/2+10,20,20,this.height-80,16579837),t=this.scene.add.rectangle(this.width/2-10,20,20,this.height-80,16579837);this.add(e),this.add(t)},n.createBackButton=function(){var e=this,t=(0,ul.t)(),n=this.scene.add.nineslice(0,0,DT,BT.BG_SETTINGS_BOTTOM,939/2.88*t,205/2.88*t,0*t,0*t,15/2.88*t,25/2.88*t);n.scale=1/t;var i=new jy(this.scene);i.onClick=function(){e.scene.screen.close(Os.o4.THEME_SCREEN)},i.setPosition(0,3);var a=this.scene.add.container();a.setSize(n.displayWidth,n.displayHeight),a.add([n,i]),this.add(a),Phaser.Display.Align.In.BottomCenter(a,this,0,-3)},n.alignContainers=function(){this.bringToTop(this.bgTitle),this.bringToTop(this.title),this.bringToTop(this.tab),this.bringToTop(this.gameTypeTag),this.bringToTop(this.closeButton)},t}(Phaser.GameObjects.Container),GT=NT,FT=function(e){function t(t,n,i,a){var s;return(s=e.call(this,t,n,i,a)||this).scene=void 0,s.fadeInAnimation=void 0,s.themeContainer=void 0,s.fadeOutAnimation=void 0,s.setBackground=function(){s.background.setTint(1315862),s.background.setAlpha(.65)},s.scene=t,s.setBackground(),s.setDepth(Os.Ks.POPUP),s.themeContainer=new GT(t),s.add(s.themeContainer),s}(0,o.Z)(t,e);var n=t.prototype;return n.open=function(){e.prototype.open.call(this);var t=Rr.filterGameType;this.themeContainer.setGameType(t),this.themeContainer.setAlpha(1),this.scene.themeHandler.loadAllBackgrounds(),this.scene.themeHandler.loadAllCardAtlas(),this.updateSelected(),this.runOpenAnimation()},n.updateSelected=function(){var e=this.scene.theme.getCurrentIdxConfig(),t=e.backgroundIdx,n=e.cardFaceIdx,i=e.cardBackIdx;this.themeContainer.backgroundPreView[t].showSelectedBorder(),this.themeContainer.cardFacePreView[n].showSelectedBorder(),this.themeContainer.cardBackPreview[i].showSelectedBorder()},n.close=function(){this.runCloseAnimation()},n.runOpenAnimation=function(){var e,t;null!=(e=this.fadeInAnimation)&&null!=(t=e.tween)&&t.isPlaying()||(this.scene.audio.playSound(Ls.Z.POPUP_SHOW),this.fadeInAnimation||(this.fadeInAnimation=new Mh.Z({targets:[this]})),this.fadeInAnimation.play())},n.runCloseAnimation=function(){var t,n,i=this;null!=(t=this.fadeOutAnimation)&&null!=(n=t.tween)&&n.isPlaying()||(this.scene.audio.playSound(Ls.Z.POPUP_OFF),this.fadeOutAnimation||(this.fadeOutAnimation=new zm.Z({targets:[this],props:{alpha:0},onComplete:function(){e.prototype.close.call(i)}})),this.fadeOutAnimation.play())},t}(GameCore.Screen),ZT=FT,UT=GameCore.world.isLandscape()?ZT:PT,zT=n(97),HT=n.n(zT),WT=Gn.Z.GAMEPLAY_DEFAULT,YT=WT.KEY,KT=WT.FRAME,VT=function(e){function t(t){var n;return(n=e.call(this,t,146,50.5)||this).text=void 0,n.icon=void 0,n.setName("NextButton"),n.createBackground(),n.createContents(),n}(0,o.Z)(t,e);var n=t.prototype;return n.setText=function(e){this.text.text=e},n.setIcon=function(e,t,n,i){this.icon.setTexture(e,t),this.icon.setWorldSize(n,i)},n.createBackground=function(){var e=this.scene.make.image({key:YT,frame:KT.BUTTON_DONE});e.setWorldSize(this.width,this.height),this.add(e)},n.createContents=function(){var e=new Jl(this.scene,{iconTextPadding:8,text:"next",fontSize:22,iconKey:YT,iconFrame:KT.HOW_TO_PLAY.IC_NEXT,iconWidth:15.5,iconHeight:15});e.text.setMaxSize(110,35,!0),this.add(e),this.text=e.text,this.icon=e.icon},t}(Ol.Z),jT=VT,JT=Gn.Z.GAMEPLAY_DEFAULT,XT=JT.KEY,qT=JT.FRAME,QT=function(e){function t(t,n){var i;return(i=e.call(this,t)||this).numberOfPage=void 0,i.pages=void 0,i.updateNumberOfPages(n),i.createPages(),i.alignPages(),i.setPage(0),i}(0,o.Z)(t,e);var n=t.prototype;return n.updatePagination=function(e){this.updateNumberOfPages(e),this.alignPages(),this.pages.forEach((function(t,n){n<e?t.revive():t.kill()}))},n.updateNumberOfPages=function(e){var t=13*e+5*(e-1);this.setSize(t,13.5),this.numberOfPage=e},n.setPage=function(e){e>this.pages.length-1&&(e=this.pages.length-1),this.pages.forEach((function(e){return e.setFrame(qT.HOW_TO_PLAY.PAGE_INACTIVE)})),this.pages[e].setFrame(qT.HOW_TO_PLAY.PAGE_ACTIVE)},n.createPages=function(){this.pages=[];for(var e=0;e<this.numberOfPage;e++){var t=this.scene.add.image(0,0,XT,qT.HOW_TO_PLAY.PAGE_INACTIVE);t.setWorldSize(13,13.5),this.pages.push(t)}this.add(this.pages)},n.alignPages=function(){for(var e=this.pages[0].displayWidth,t=0;t<this.numberOfPage;t++){this.pages[t].setPosition(this.width/2-(e+5)*(this.numberOfPage-1-t),0)}},t}(Phaser.GameObjects.Container),$T=QT;function eC(e,t){var n="undefined"!==typeof w()&&k()(e)||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){var n;if(!e)return;if("string"===typeof e)return tC(e,t);var i=A()(n=Object.prototype.toString.call(e)).call(n,8,-1);"Object"===i&&e.constructor&&(i=e.constructor.name);if("Map"===i||"Set"===i)return b()(e);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return tC(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var i=0;return function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function tC(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var nC=Gn.Z.HOW_TO_PLAY,iC=(Gn.Z.DEFAULT,Gn.Z.GAMEPLAY_DEFAULT),aC=iC.KEY,sC=iC.FRAME,rC=[{description:"The goal is to move call cards to the\nfoundation. Stacking them by suit\nfrom Aces to King.\nFor example, A, 2, 3, and so on.",frame:"howtoplay_1"},{description:"Cards can be moved from column to\ncolumn. In each column, the cards are\narranged in order from largest to\nsmallest. Alternating red and black.",frame:"howtoplay_2"},{description:"If the card below can't be moved, just\nclick the card stock in the upper right\ncorner, and more cards will be\nprovided here to help you solve the\nproblem!",frame:"howtoplay_3"},{description:'The sorting order on each foundation\nin the upper left corner is arranged\naccording to: "A-2-3-...-Q-K"',frame:"howtoplay_4"}],oC=[{description:"The goal is to move call cards to the\nfoundation. Stacking them by suit\nfrom Aces to King. For example, A, 2, 3,\nand so on.",frame:"howtoplay_1"},{description:"Cards can be moved from column to\ncolumn. In each column, the cards are\narranged in order from largest to\nsmallest. Alternating red and black.",frame:"howtoplay_2"},{description:"In the upper-left corner are four free cells.\nWhere you can temporarily store any single \n cards during play. You need empty Free Cells \nto move large stacks of cards.",frame:"howtoplay_3"},{description:'The sorting order on each foundation\nin the upper right corner is arranged\naccording to: "A-2-3-...-Q-K"',frame:"howtoplay_4"}],cC=[{description:"Win Spider Solitaire by forming runs,\nKing to Ace.",frame:"howtoplay_1"},{description:"Unweave the cards by moving them\nonto cards ranked one higher.",frame:"howtoplay_2"},{description:"Use the stockpile to add new cards to\nthe board.",frame:"howtoplay_3"}],hC=function(e){function t(t){var n;return(n=e.call(this,t)||this).nextButton=void 0,n.currentStep=void 0,n.stepContainersMap=new(ne()),n.stepImages=[],n.currentStepContainers=void 0,n.currentData=void 0,n.pagination=void 0,n.gameTypeTag=void 0,n.gameType=void 0,n.handleNextStep=function(){n.currentStep==n.currentData.length-1?(n.scene.screen.close(Os.o4.HOW_TO_PLAY_SCREEN),n.scene.analytics.event(Nn._.GetTutorial(n.gameType,"complete"))):(n.selectStep(n.currentStep+1),n.scene.analytics.event(Nn._.GetTutorial(n.gameType,"step"),{step:n.currentStep}))},n.setSize(341,464),n.currentStep=0,n.gameType=Rr.gameType,n.currentData=n.getDescriptionData(n.gameType),n.createAllStepImages(),n.createBackground(),n.createContents(),n.createNextButton(),n.createPagination(),n.createCloseButton(),n.setGameType(n.gameType),n.selectStep(0),t.add.existing((0,As.Z)(n)),n.setScale(jf(t)),n.setY(Jf(n.scene)),n}(0,o.Z)(t,e);var n=t.prototype;return n.setGameType=function(e){this.gameType=e,this.currentStepContainers=this.stepContainersMap.get(e)||[],this.currentData=this.getDescriptionData(e),this.gameTypeTag.setGameType(e);for(var t,n=eC(HT()(i=this.stepContainersMap).call(i));!(t=n()).done;){var i;t.value.forEach((function(e){return e.kill()}))}this.pagination.updatePagination(this.currentData.length),this.updateStepImage(),this.align()},n.updateStepImage=function(){var e=this.getDescriptionData(this.gameType),t=Gn.Z.HOW_TO_PLAY.getKey(this.gameType);this.stepImages.forEach((function(n,i){i>=e.length?n.kill():n.setTexture(t,e[i].frame)}))},n.align=function(){for(var e,t=this,n=eC(HT()(i=this.stepContainersMap).call(i));!(e=n()).done;){var i;e.value.forEach((function(e){e.setY(-t.height/2+102)}))}this.stepImages.forEach((function(e){e.setY(22)})),this.nextButton.setY(this.height/2-this.nextButton.height/2-20),Phaser.Display.Align.To.TopCenter(this.pagination,this.nextButton,0,12)},n.selectStep=function(e){e>=this.currentData.length&&(e=this.currentData.length-1),e==this.currentData.length-1?(this.nextButton.setText("Done"),this.nextButton.setIcon(iC.KEY,iC.FRAME.IC_DONE,20,16.5)):(this.nextButton.setText("Next"),this.nextButton.setIcon(aC,sC.HOW_TO_PLAY.IC_NEXT,15.5,15)),this.currentStepContainers.forEach((function(e){return e.kill()})),this.currentStepContainers[e].revive(),this.stepImages.forEach((function(e){return e.kill()})),this.stepImages[e].revive(),this.pagination.setPage(e),this.currentStep=e},n.createAllStepImages=function(){this.stepImages=[],this.createStepImages(this.gameType)},n.createStepImages=function(e){for(var t=0;t<4;t++){var n=this.scene.add.image(0,0,nC.getKey(e),rC[0].frame);n.setWorldSize(300*1.005,200*1.005),this.stepImages.push(n)}this.add(this.stepImages)},n.getDescriptionData=function(e){switch(e){case is.Z.KLONDIKE:return rC;case is.Z.FREE_CELL:return oC;default:return cC}},n.createBackground=function(){var e=new Lf(this.scene,{width:this.width,height:this.height,key:aC,frame:sC.HOW_TO_PLAY.BACKGROUND,symmetricType:Of.HORIZONTAL});this.add(e)},n.createContents=function(){var e=this.scene.make.bitmapText({font:Rc.Z.BOLD_SHADOW_BLUR.KEY,size:this.scene.fontSize(22),text:"HOW TO PLAY",origin:{x:.5,y:.5}});e.setTint(16449487,16449487,15913325,15913325),this.add(e),Phaser.Display.Align.In.TopCenter(e,this,0,-17),this.gameTypeTag=new hy(this.scene),this.add(this.gameTypeTag),Phaser.Display.Align.In.TopLeft(this.gameTypeTag,this,1,0),this.stepContainersMap=new(ne()),this.createStepContainers(is.Z.KLONDIKE),this.createStepContainers(is.Z.FREE_CELL),this.createStepContainers(is.Z.SPIDER)},n.createStepContainers=function(e){this.stepContainersMap.set(e,[]);var t=this.stepContainersMap.get(e);if(t){for(var n=this.getDescriptionData(e),i=0;i<n.length;i++){var a=n[i].description,s=this.createStepContainer(a);t.push(s)}this.add(t)}},n.createPagination=function(){this.pagination=new $T(this.scene,4),this.add(this.pagination)},n.createStepContainer=function(e){var t=this.scene.add.container(),n=this.scene.make.bitmapText({font:Rc.Z.PRIMARY.KEY,size:this.scene.fontSize(15),text:e,origin:{x:.5,y:.5}});return n.setTint(16777215),n.setCenterAlign(),t.add([n]),t},n.createNextButton=function(){var e=new jT(this.scene);e.onClick=this.handleNextStep,this.add(e),this.nextButton=e},n.createCloseButton=function(){var e=this,t=new Ol.Z(this.scene,40,40);t.setName("Close"),t.onClick=function(){e.scene.screen.close(Os.o4.HOW_TO_PLAY_SCREEN)};var n=this.scene.add.image(0,0,aC,sC.HOW_TO_PLAY.IC_X);n.setWorldSize(16.5,17),t.add(n),Phaser.Display.Align.In.TopRight(t,this,1,-7),this.add([t])},t}(Phaser.GameObjects.Container),uC=hC,lC=function(e){function t(t,n,i,a){var s;return(s=e.call(this,t,n,i,a)||this).fadeInAnimation=void 0,s.fadeOutAnimation=void 0,s.howToPlayContainer=void 0,s.setDepth(Os.Ks.POPUP),s.howToPlayContainer=new uC(t),s.add(s.howToPlayContainer),s.background.setTint(1315862),s.background.setAlpha(.65),s.background.setInteractive(),s}(0,o.Z)(t,e);var n=t.prototype;return n.open=function(t){e.prototype.open.call(this,t);var n=Rr.filterGameType;this.howToPlayContainer.setGameType(n),this.howToPlayContainer.selectStep(0),this.scene.analytics.event(Nn._.GetTutorial(n,"begin")),this.runOpenAnimation()},n.close=function(){this.runCloseAnimation()},n.runOpenAnimation=function(){var e,t;null!=(e=this.fadeInAnimation)&&null!=(t=e.tween)&&t.isPlaying()||(this.scene.audio.playSound(Ls.Z.POPUP_SHOW),this.fadeInAnimation||(this.fadeInAnimation=new Mh.Z({targets:[this]})),this.fadeInAnimation.play())},n.runCloseAnimation=function(){var t,n,i=this;null!=(t=this.fadeOutAnimation)&&null!=(n=t.tween)&&n.isPlaying()||(this.scene.audio.playSound(Ls.Z.POPUP_OFF),this.fadeOutAnimation||(this.fadeOutAnimation=new zm.Z({targets:[this],props:{alpha:0},onComplete:function(){e.prototype.close.call(i)}})),this.fadeOutAnimation.play())},t}(GameCore.Screen),dC=lC,pC=Gn.Z.GAMEPLAY_DEFAULT,fC=pC.KEY,gC=pC.FRAME,mC=function(e){function t(t){var n;return(n=e.call(this,t,146,50.5)||this).text=void 0,n.icon=void 0,n.setName("NextButton"),n.createBackground(),n.createContents(),n}(0,o.Z)(t,e);var n=t.prototype;return n.setText=function(e){this.text.text=e},n.setIcon=function(e,t,n,i){this.icon.setTexture(e,t),this.icon.setWorldSize(n,i)},n.createBackground=function(){var e=this.scene.make.image({key:fC,frame:gC.BUTTON_DONE});e.setWorldSize(this.width,this.height),this.add(e)},n.createContents=function(){var e=new Jl(this.scene,{iconTextPadding:5,text:"next",fontSize:22,iconKey:fC,iconFrame:gC.HOW_TO_PLAY.IC_NEXT,iconWidth:15.5,iconHeight:15});e.text.setMaxSize(80,20,!0),this.add(e),this.text=e.text,this.icon=e.icon},t}(Ol.Z),vC=mC,yC=Gn.Z.GAMEPLAY_DEFAULT,TC=yC.KEY,CC=yC.FRAME,EC=function(e){function t(t,n){var i;return(i=e.call(this,t)||this).numberOfPage=void 0,i.pages=void 0,i.updateNumberOfPages(n),i.createPages(),i.alignPages(),i.setPage(0),i}(0,o.Z)(t,e);var n=t.prototype;return n.updatePagination=function(e){this.updateNumberOfPages(e),this.alignPages(),this.pages.forEach((function(t,n){n<e?t.revive():t.kill()}))},n.updateNumberOfPages=function(e){var t=13*e+5*(e-1);this.setSize(t,13.5),this.numberOfPage=e},n.setPage=function(e){e>this.pages.length-1&&(e=this.pages.length-1),this.pages.forEach((function(e){return e.setFrame(CC.HOW_TO_PLAY.PAGE_INACTIVE)})),this.pages[e].setFrame(CC.HOW_TO_PLAY.PAGE_ACTIVE)},n.createPages=function(){this.pages=[];for(var e=0;e<this.numberOfPage;e++){var t=this.scene.add.image(0,0,TC,CC.HOW_TO_PLAY.PAGE_INACTIVE);t.setWorldSize(13,13.5),this.pages.push(t)}this.add(this.pages)},n.alignPages=function(){for(var e=this.pages[0].displayWidth,t=0;t<this.numberOfPage;t++){this.pages[t].setPosition(this.width/2-(e+5)*(this.numberOfPage-1-t),0)}},t}(Phaser.GameObjects.Container),AC=EC;function SC(e,t){var n="undefined"!==typeof w()&&k()(e)||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){var n;if(!e)return;if("string"===typeof e)return bC(e,t);var i=A()(n=Object.prototype.toString.call(e)).call(n,8,-1);"Object"===i&&e.constructor&&(i=e.constructor.name);if("Map"===i||"Set"===i)return b()(e);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return bC(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var i=0;return function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function bC(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var IC=Gn.Z.HOW_TO_PLAY,wC=(Gn.Z.DEFAULT,Gn.Z.GAMEPLAY_DEFAULT),PC=wC.KEY,kC=wC.FRAME,_C=[{description:"The goal is to move call cards to the\nfoundation. Stacking them by suit\nfrom Aces to King.\nFor example, A, 2, 3, and so on.",frame:"howtoplay_1"},{description:"Cards can be moved from column to\ncolumn. In each column, the cards are\narranged in order from largest to\nsmallest. Alternating red and black.",frame:"howtoplay_2"},{description:"If the card below can't be moved, just\nclick the card stock in the upper right\ncorner, and more cards will be\nprovided here to help you solve the\nproblem!",frame:"howtoplay_3"},{description:'The sorting order on each foundation\nin the upper left corner is arranged\naccording to: "A-2-3-...-Q-K"',frame:"howtoplay_4"}],xC=[{description:"The goal is to move call cards to the\nfoundation. Stacking them by suit\nfrom Aces to King. For example, A, 2, 3,\nand so on.",frame:"howtoplay_1"},{description:"Cards can be moved from column to\ncolumn. In each column, the cards are\narranged in order from largest to\nsmallest. Alternating red and black.",frame:"howtoplay_2"},{description:"In the upper-left corner are four free cells.\nWhere you can temporarily store any single \n cards during play. You need empty Free Cells \nto move large stacks of cards.",frame:"howtoplay_3"},{description:'The sorting order on each foundation\nin the upper right corner is arranged\naccording to: "A-2-3-...-Q-K"',frame:"howtoplay_4"}],OC=[{description:"Win Spider Solitaire by forming runs,\nKing to Ace.",frame:"howtoplay_1"},{description:"Unweave the cards by moving them\nonto cards ranked one higher.",frame:"howtoplay_2"},{description:"Use the stockpile to add new cards to\nthe board.",frame:"howtoplay_3"}],LC=function(e){function t(t){var n;return(n=e.call(this,t)||this).nextButton=void 0,n.currentStep=void 0,n.stepContainersMap=new(ne()),n.stepImages=[],n.currentStepContainers=void 0,n.currentData=void 0,n.pagination=void 0,n.gameTypeTag=void 0,n.gameType=void 0,n.handleNextStep=function(){n.currentStep==n.currentData.length-1?(n.scene.screen.close(Os.o4.HOW_TO_PLAY_SCREEN),n.scene.analytics.event(Nn._.GetTutorial(n.gameType,"complete"))):(n.selectStep(n.currentStep+1),n.scene.analytics.event(Nn._.GetTutorial(n.gameType,"step"),{step:n.currentStep}))},n.setSize(341,464),n.currentStep=0,n.gameType=Rr.gameType,n.currentData=n.getDescriptionData(n.gameType),n.createAllStepImages(),n.createBackground(),n.createContents(),n.createNextButton(),n.createPagination(),n.createCloseButton(),n.setGameType(n.gameType),n.selectStep(0),t.add.existing((0,As.Z)(n)),n.setScale(jf(t)),n.setY(Jf(n.scene)),n}(0,o.Z)(t,e);var n=t.prototype;return n.setGameType=function(e){this.gameType=e,this.currentStepContainers=this.stepContainersMap.get(e)||[],this.currentData=this.getDescriptionData(e),this.gameTypeTag.setGameType(e);for(var t,n=SC(HT()(i=this.stepContainersMap).call(i));!(t=n()).done;){var i;t.value.forEach((function(e){return e.kill()}))}this.pagination.updatePagination(this.currentData.length),this.updateStepImage(),this.align()},n.updateStepImage=function(){var e=this.getDescriptionData(this.gameType),t=Gn.Z.HOW_TO_PLAY.getKey(this.gameType);this.stepImages.forEach((function(n,i){i>=e.length?n.kill():n.setTexture(t,e[i].frame)}))},n.align=function(){for(var e,t=this,n=SC(HT()(i=this.stepContainersMap).call(i));!(e=n()).done;){var i;e.value.forEach((function(e){e.setY(-t.height/2+102)}))}this.stepImages.forEach((function(e){e.setY(22)})),this.nextButton.setY(this.height/2-this.nextButton.height/2-20),Phaser.Display.Align.To.TopCenter(this.pagination,this.nextButton,0,12)},n.selectStep=function(e){e>=this.currentData.length&&(e=this.currentData.length-1),e==this.currentData.length-1?(this.nextButton.setText("Done"),this.nextButton.setIcon(wC.KEY,wC.FRAME.IC_DONE,20,16.5)):(this.nextButton.setText("Next"),this.nextButton.setIcon(PC,kC.HOW_TO_PLAY.IC_NEXT,15.5,15)),this.currentStepContainers.forEach((function(e){return e.kill()})),this.currentStepContainers[e].revive(),this.stepImages.forEach((function(e){return e.kill()})),this.stepImages[e].revive(),this.pagination.setPage(e),this.currentStep=e},n.createAllStepImages=function(){this.stepImages=[],this.createStepImages(this.gameType)},n.createStepImages=function(e){for(var t=0;t<4;t++){var n=this.scene.add.image(0,0,IC.getKey(e),_C[0].frame);n.setWorldSize(300*1.005,200*1.005),this.stepImages.push(n)}this.add(this.stepImages)},n.getDescriptionData=function(e){switch(e){case is.Z.KLONDIKE:return _C;case is.Z.FREE_CELL:return xC;default:return OC}},n.createBackground=function(){var e=new Lf(this.scene,{width:this.width,height:this.height,key:PC,frame:kC.HOW_TO_PLAY.BACKGROUND,symmetricType:Of.HORIZONTAL});this.add(e)},n.createContents=function(){var e=this.scene.make.bitmapText({font:Rc.Z.BOLD_SHADOW_BLUR.KEY,size:this.scene.fontSize(22),text:"HOW TO PLAY",origin:{x:.5,y:.5}});e.setTint(16449487,16449487,15913325,15913325),this.add(e),Phaser.Display.Align.In.TopCenter(e,this,0,-17),this.gameTypeTag=new hy(this.scene),this.add(this.gameTypeTag),Phaser.Display.Align.In.TopLeft(this.gameTypeTag,this,1,0),this.stepContainersMap=new(ne()),this.createStepContainers(is.Z.KLONDIKE),this.createStepContainers(is.Z.FREE_CELL),this.createStepContainers(is.Z.SPIDER)},n.createStepContainers=function(e){this.stepContainersMap.set(e,[]);var t=this.stepContainersMap.get(e);if(t){for(var n=this.getDescriptionData(e),i=0;i<n.length;i++){var a=n[i].description,s=this.createStepContainer(a);t.push(s)}this.add(t)}},n.createPagination=function(){this.pagination=new AC(this.scene,4),this.add(this.pagination)},n.createStepContainer=function(e){var t=this.scene.add.container(),n=this.scene.make.bitmapText({font:Rc.Z.PRIMARY.KEY,size:this.scene.fontSize(15),text:e,origin:{x:.5,y:.5}});return n.setTint(16777215),n.setCenterAlign(),t.add([n]),t},n.createNextButton=function(){var e=new vC(this.scene);e.onClick=this.handleNextStep,this.add(e),this.nextButton=e},n.createCloseButton=function(){var e=this,t=new Qy(this.scene);t.onClick=function(){e.scene.screen.close(Os.o4.HOW_TO_PLAY_SCREEN)},Phaser.Display.Align.In.TopRight(t,this,-6,-6),this.add([t])},t}(Phaser.GameObjects.Container),RC=LC,DC=function(e){function t(t,n,i,a){var s;return(s=e.call(this,t,n,i,a)||this).fadeInAnimation=void 0,s.fadeOutAnimation=void 0,s.howToPlayContainer=void 0,s.setDepth(Os.Ks.POPUP),s.howToPlayContainer=new RC(t),s.add(s.howToPlayContainer),s.background.setTint(1315862),s.background.setAlpha(.65),s.background.setInteractive(),s}(0,o.Z)(t,e);var n=t.prototype;return n.open=function(t){e.prototype.open.call(this,t);var n=Rr.filterGameType;this.howToPlayContainer.setGameType(n),this.howToPlayContainer.selectStep(0),this.scene.analytics.event(Nn._.GetTutorial(n,"begin")),this.runOpenAnimation()},n.close=function(){this.runCloseAnimation()},n.runOpenAnimation=function(){var e,t;null!=(e=this.fadeInAnimation)&&null!=(t=e.tween)&&t.isPlaying()||(this.scene.audio.playSound(Ls.Z.POPUP_SHOW),this.fadeInAnimation||(this.fadeInAnimation=new Mh.Z({targets:[this]})),this.fadeInAnimation.play())},n.runCloseAnimation=function(){var t,n,i=this;null!=(t=this.fadeOutAnimation)&&null!=(n=t.tween)&&n.isPlaying()||(this.scene.audio.playSound(Ls.Z.POPUP_OFF),this.fadeOutAnimation||(this.fadeOutAnimation=new zm.Z({targets:[this],props:{alpha:0},onComplete:function(){e.prototype.close.call(i)}})),this.fadeOutAnimation.play())},t}(GameCore.Screen),BC=DC,MC=GameCore.world.isLandscape()?BC:dC,NC=MC,GC=Gn.Z.GAMEPLAY_DEFAULT,FC=GC.KEY,ZC=GC.FRAME,UC=function(e){function t(t,n,i,a,s){var r;return void 0===s&&(s="horizontal"),(r=e.call(this,t)||this).gradientPoints=[],r.backgrounds=[],r.orientation=void 0,r.orientation=s,r.setSize(n,i),r.setGradientPoints(a),r}(0,o.Z)(t,e);var n=t.prototype;return n.setGradientPoints=function(e){var t=0;t=0===e.length||1===e.length?0:e.length-1,this.gradientPoints=e;var n=this.backgrounds.length;t>n?this.addBackgrounds(t-n):t<n&&this.killLastBackgrounds(n-t),this.updateBackgrounds(),this.alignBackgrounds()},n.updateBackgrounds=function(){var e=this;0!==this.backgrounds.length&&this.gradientPoints.forEach((function(t,n){if(n!==e.gradientPoints.length-1){var i=e.gradientPoints[n+1],a=e.backgrounds[n];t.tint2||(t.tint2=t.tint1),t.alpha2||(t.alpha2=t.alpha1),i.tint2||(i.tint2=i.tint1),i.alpha2||(i.alpha2=i.alpha1),a.revive(),"horizontal"===e.orientation?(a.setTint(t.tint1,i.tint1,t.tint2,i.tint2),a.setAlpha(t.alpha1,i.alpha1,t.alpha2,i.alpha2),a.setWorldSize(e.width*(i.position-t.position),e.height)):(a.setTint(t.tint1,t.tint2,i.tint1,i.tint2),a.setAlpha(t.alpha1,t.alpha2,i.alpha1,i.alpha2),a.setWorldSize(e.width,e.height*(i.position-t.position)))}}))},n.addBackgrounds=function(e){if(!(e<=0))for(var t=0;t<e;t++){var n=this.scene.add.image(0,0,FC,ZC.BLANK);"horizontal"===this.orientation?n.setOrigin(0,.5):n.setOrigin(.5,0),this.backgrounds.push(n),this.add(n)}},n.killLastBackgrounds=function(e){if(!(e<=0))for(var t=0;t<e;t++)this.backgrounds[this.backgrounds.length-1-t].kill()},n.alignBackgrounds=function(){var e=this;0!==this.backgrounds.length&&("horizontal"===this.orientation?(Phaser.Display.Align.In.LeftCenter(this.backgrounds[0],this),this.backgrounds.forEach((function(t,n){if(0!==n){var i=e.backgrounds[n-1];Phaser.Display.Align.To.RightCenter(t,i)}}))):(Phaser.Display.Align.In.TopCenter(this.backgrounds[0],this),this.backgrounds.forEach((function(t,n){if(0!==n){var i=e.backgrounds[n-1];Phaser.Display.Align.To.BottomCenter(t,i)}}))))},t}(Phaser.GameObjects.Container),zC=UC,HC=[{position:0,tint1:0,alpha1:0},{position:.25,tint1:0,alpha1:.28},{position:.75,tint1:0,alpha1:.28},{position:1,tint1:0,alpha1:0}],WC=[{position:0,tint1:0,alpha1:0},{position:.25,tint1:0,alpha1:.1},{position:.75,tint1:0,alpha1:.1},{position:1,tint1:0,alpha1:0}],YC=[{position:0,tint1:16777215,alpha1:0},{position:.35,tint1:16777215,alpha1:.25},{position:.65,tint1:16777215,alpha1:.25},{position:1,tint1:16777215,alpha1:0}],KC=function(e){function t(t,n,i){var a;return(a=e.call(this,t)||this).background=void 0,a.icon=void 0,a.label=void 0,a.value=void 0,a.setSize(n,i),a.createBackground(),a.createIcon(),a.createLabel(),a.createValue(),t.add.existing((0,As.Z)(a)),a.value.setIgnoreLanguage(),a}(0,o.Z)(t,e);var n=t.prototype;return n.setIcon=function(e,t,n,i){this.icon.setTexture(e,t),this.icon.setWorldSize(n||24,i||24)},n.setLabel=function(e){this.label.setText(e)},n.setValue=function(e){this.value.setText(e)},n.updateBackgroundGradient=function(e){var t=e?HC:WC;this.background.setGradientPoints(t)},n.createBackground=function(){this.background=new zC(this.scene,this.width,this.height,WC),this.add(this.background)},t}(Phaser.GameObjects.Container),VC=KC,jC=function(e){function t(t,n,i){return e.call(this,t,n,i)||this}(0,o.Z)(t,e);var n=t.prototype;return n.createIcon=function(){var e=this.scene.add.image(0,0,"");e.setWorldSize(19.5,22.5),e.setTint(16579837),this.add(e),this.icon=e},n.createLabel=function(){var e=this.scene.make.bitmapText({font:Rc.Z.PRIMARY.KEY,size:this.scene.fontSize(17),text:"",origin:{x:0,y:.5}});e.setTint(16579837),e.setMaxSize(135,30),this.add(e),this.label=e},n.createValue=function(){var e=this.scene.make.bitmapText({font:Rc.Z.PRIMARY.KEY,size:this.scene.fontSize(16),text:"",origin:{x:1,y:.5}});e.setTint(16580252),e.setRightAlign(),this.add(e),this.value=e},n.alignProperties=function(){Phaser.Display.Align.In.LeftCenter(this.icon,this,-57),Phaser.Display.Align.In.LeftCenter(this.label,this,-90,1.5),Phaser.Display.Align.In.RightCenter(this.value,this,-55,1.5)},t}(VC),JC=jC,XC=function(e){function t(t){var n;return(n=e.call(this,t)||this).score=void 0,n.time=void 0,n.bestTime=void 0,n.moves=void 0,n}(0,o.Z)(t,e);var n=t.prototype;return n.setScore=function(e){this.score.setValue(e)},n.setWinningTime=function(e){this.time.setValue(e)},n.setBestWinningTime=function(e){this.bestTime.setValue(e)},n.setMoves=function(e){this.moves.setValue(e)},n.hideContent=function(){[this.score,this.moves,this.time,this.bestTime].forEach((function(e){return e.setAlpha(0)}))},n.runEntranceAnimationRows=function(){var e=(0,r.Z)(l().mark((function e(){var t,n,i=this;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[this.score,this.moves,this.time,this.bestTime],200,n=De()(t).call(t,(function(e,t){return new(h())((function(n){i.scene.add.tween({targets:[e],duration:200,delay:200*t/2,ease:Phaser.Math.Easing.Sine.Out,props:{alpha:{from:0,to:1},y:{from:e.y+e.height/2,to:e.y}},onComplete:n})}))})),e.next=5,h().all(n);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),t}(Phaser.GameObjects.Container),qC=Gn.Z.GAMEPLAY_DEFAULT,QC=qC.KEY,$C=qC.FRAME,eE=function(e){function t(t){var n;return(n=e.call(this,t)||this).setSize(375,190),n.createStats(),n}return(0,o.Z)(t,e),t.prototype.createStats=function(){var e=[],t=this.height/4,n=new JC(this.scene,this.width,t);n.setIcon(QC,$C.MEDAL_STAR_SHADOW,19.5,22.5),n.setLabel("score"),n.setValue("687"),this.score=n,e.push(n);var i=new JC(this.scene,this.width,t);i.setIcon(QC,$C.ARROW_SWAP_HORIZONTAL,20,22),i.setLabel("moves"),i.setValue("798"),this.moves=i,e.push(i);var a=new JC(this.scene,this.width,t);a.setIcon(QC,$C.TIMER,19,22.5),a.setLabel("time"),a.setValue("09:48"),this.time=a,e.push(a);var s=new JC(this.scene,this.width,t);s.setIcon(QC,$C.IC_BEST_TIME,18,25),s.setLabel("bestTime"),s.setValue("05:30"),this.bestTime=s,e.push(s),this.add(e);for(var r=0;r<e.length;r++){var o=e[r];o.updateBackgroundGradient(r%2==0),o.alignProperties(),Phaser.Display.Align.In.TopCenter(o,this,0,-r*t)}},t}(XC),tE=function(e){function t(t){var n;return(n=e.call(this,t)||this).buttons=[],n.newGameButton=void 0,n.shareButton=void 0,n.setSizeContainer(),n.createNewGameButton(),n}(0,o.Z)(t,e);var n=t.prototype;return n.hideContent=function(){this.buttons.forEach((function(e){e.setAlpha(0)}))},n.runEntranceAnimationButtons=function(){var e=(0,r.Z)(l().mark((function e(){var t,n,i=this;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.newGameButton.stopPulsate(),n=De()(t=this.buttons).call(t,(function(e){return new(h())((function(t){i.scene.add.tween({targets:[e],alpha:1,duration:200,onComplete:function(){e.setDisabled(!1),t(),i.newGameButton.runPulsate()}})}))})),e.next=4,h().all(n);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),t}(Phaser.GameObjects.Container),nE=function(e){function t(t,n,i){var a;return(a=e.call(this,t,n,i)||this).setName("Share"),a.createContent(),a}return(0,o.Z)(t,e),t}(Ol.Z),iE=nE,aE=Gn.Z.GAMEPLAY_DEFAULT,sE=aE.KEY,rE=aE.FRAME,oE=function(e){function t(t,n,i){return e.call(this,t,n,i)||this}return(0,o.Z)(t,e),t.prototype.createContent=function(){var e=this.scene.make.image({key:sE,frame:rE.BTN_SHARE});e.setWorldSize(this.width,this.height);var t=new Jl(this.scene,{iconTextPadding:8,text:"Share",iconFrame:rE.IC_SHARE,iconWidth:18.75,iconHeight:21.875});t.text.setMaxSize(90,35,!0),this.add([e,t])},t}(iE),cE=function(e){function t(t,n,i){var a;return(a=e.call(this,t,n,i)||this).setName("NewGame"),a.createContent(),a}return(0,o.Z)(t,e),t}(Ol.Z),hE=cE,uE=Gn.Z.GAMEPLAY_DEFAULT,lE=uE.KEY,dE=uE.FRAME,pE=function(e){function t(t,n,i){return e.call(this,t,n,i)||this}return(0,o.Z)(t,e),t.prototype.createContent=function(){var e=this.scene.make.image({key:lE,frame:dE.BTN_NEW_GAME});e.setWorldSize(this.width,this.height);var t=new Jl(this.scene);t.text.setMaxSize(130,35,!0),this.add([e,t])},t}(hE),fE=pE,gE=43.75,mE=function(e){function t(t){return e.call(this,t)||this}(0,o.Z)(t,e);var n=t.prototype;return n.setSizeContainer=function(){this.setSize(375,gE)},n.createNewGameButton=function(){var e=new fE(this.scene,447/2.88,gE);this.add(e),this.buttons.push(e),this.newGameButton=e,Phaser.Display.Align.In.Center(e,this)},n.createShareButton=function(){var e=new oE(this.scene,375/2.88,gE);this.shareButton=e,Phaser.Display.Align.In.LeftCenter(e,this,-38),this.add([e]),this.buttons.push(e)},t}(tE),vE=n(645),yE=function(e){function t(t){var n;return(n=e.call(this,t)||this).stats=void 0,n.draw=void 0,n.footer=void 0,n.title=void 0,n.gameTypeRibbon=void 0,n.handleNewGame=(0,r.Z)(l().mark((function e(){var t;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n.scene instanceof UM)){e.next=7;break}return t=n.scene.gameplay.boardGame.getTime(),e.next=4,n.scene.handlePlaySingle();case 4:if(!(t>6e4)){e.next=7;break}return e.next=7,n.scene.gameplay.handleShowInterstitialAd();case 7:n.scene.screen.close(Os.o4.VICTORY_SCREEN);case 8:case"end":return e.stop()}}),e)}))),n.handleShare=(0,r.Z)(l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.scene.storage.dispatch(Ac(Rr.gameType));case 1:case"end":return e.stop()}}),e)}))),n.setSizeContainer(),n.createGameType(),n.createTitle(),n.createStats(),n.createFooter(),n.createDevButtons(),n.align(),t.add.existing((0,As.Z)(n)),n.setScale(jf(t)),n}(0,o.Z)(t,e);var n=t.prototype;return n.setScore=function(e){this.stats.setScore(e)},n.setGameType=function(e){this.gameTypeRibbon.setGameType(e)},n.setWinningTime=function(e){this.stats.setWinningTime(e)},n.setBestWinningTime=function(e){this.stats.setBestWinningTime(e)},n.setMoves=function(e){this.stats.setMoves(e)},n.setDraw=function(e){this.draw.setText(e)},n.createDevButtons=function(){GameCore.Utils.Valid.isDebugger()&&this.createCloseButton()},n.hideContent=function(){this.stats.hideContent(),this.footer.hideContent()},n.runEntranceAnimationRows=function(){var e=(0,r.Z)(l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h().all([this.stats.runEntranceAnimationRows()]);case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.runEntranceAnimation=function(){var e=(0,r.Z)(l().mark((function e(){var t;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.runEntranceAnimationRows();case 2:return t=this.scene,e.next=5,t.gameplay.finishGame();case 5:return e.next=7,this.footer.runEntranceAnimationButtons();case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),t}(Phaser.GameObjects.Container),TE=yE,CE=Gn.Z.GAMEPLAY_DEFAULT,EE=CE.KEY,AE=CE.FRAME,SE=function(e){function t(t,n,i){var a;return(a=e.call(this,t)||this).background=void 0,a.gameIcon=void 0,a.gameName=void 0,a.setSize(n||957/2.88,i||160/2.88),t.add.existing((0,As.Z)(a)),a.createContent(),a.align(),a}(0,o.Z)(t,e);var n=t.prototype;return n.createContent=function(){this.background=new Lf(this.scene,{width:this.width,height:this.height,key:EE,frame:AE.RESULT_SCREEN.RIBBON_KLONDIKE}),this.gameIcon=this.scene.add.image(0,0,EE,AE.RESULT_SCREEN.ICO_KLONDIKE),this.gameName=this.scene.add.bitmapText(0,0,Rc.Z.PRIMARY.KEY,jg.ZP.KLONDIKE,this.scene.fontSize(17)),this.add([this.background,this.gameIcon,this.gameName]),this.setGameType(is.Z.KLONDIKE)},n.align=function(){Phaser.Display.Align.In.Center(this.background,this,0),Phaser.Display.Align.In.Center(this.gameIcon,this,-38,-5),Phaser.Display.Align.In.Center(this.gameName,this,19,-2)},n.setGameType=function(e){switch(e){case is.Z.KLONDIKE:this.background.setFrame(AE.RESULT_SCREEN.RIBBON_KLONDIKE),this.gameIcon.setFrame(AE.RESULT_SCREEN.ICO_KLONDIKE),this.gameIcon.setWorldSize(84/2.88,41/2.88),this.gameName.text=jg.ZP.KLONDIKE;break;case is.Z.FREE_CELL:this.background.setFrame(AE.RESULT_SCREEN.RIBBON_FREECELL),this.gameIcon.setFrame(AE.RESULT_SCREEN.ICO_FREECELL),this.gameIcon.setWorldSize(53/2.88,46/2.88),this.gameName.text=jg.ZP.FREE_CELL;break;case is.Z.SPIDER:this.background.setFrame(AE.RESULT_SCREEN.RIBBON_SPIDER),this.gameIcon.setFrame(AE.RESULT_SCREEN.ICO_SPIDER),this.gameIcon.setWorldSize(53/2.88,61/2.88),this.gameName.text=jg.ZP.SPIDER}},t}(Phaser.GameObjects.Container),bE=SE,IE=Gn.Z.GAMEPLAY_DEFAULT,wE=IE.KEY,PE=IE.FRAME,kE=(vE.iD.FOOTER.HEIGHT,function(e){function t(t){return e.call(this,t)||this}(0,o.Z)(t,e);var n=t.prototype;return n.setSizeContainer=function(){var e=(0,ul.t)(),t=this.scene.add.nineslice(0,0,wE,PE.RESULT_SCREEN.POPUP,948/2.88*e,1249/2.88*e,0*e,0*e,100/2.88*e,300/2.88*e);t.setScale(1/e),this.add(t),this.setSize(t.displayWidth,t.displayHeight)},n.createTitle=function(){var e=this.scene.add.container(0,0);this.add(e),e.setSize(375,129),this.title=e;var t=this.scene.add.image(0,0,wE,PE.VICTORY);t.setWorldSize(632/2.88,321/2.88);var n=this.scene.make.bitmapText({font:Rc.Z.BOLD_SHADOW_BLUR.KEY,size:this.scene.fontSize(24),text:"victory",origin:{x:.5,y:.5}});n.setRadius(1e3),n.setMaxSize(205,60),n.setGradientHorizontalTint([{at:0,color:16315097},{at:.5,color:16777215},{at:1,color:16315097}]),e.add([t,n]),Phaser.Display.Align.In.Center(t,e,0,-60),Phaser.Display.Align.In.Center(n,t,0,13);var i=this.scene.make.bitmapText({font:Rc.Z.PRIMARY.KEY,size:this.scene.fontSize(17),text:"standModeDraw1",origin:{x:.5,y:.5}});i.setTint(16777215),i.setMaxSize(330,35),this.draw=i,this.add([i])},n.createGameType=function(){this.gameTypeRibbon=new bE(this.scene),this.add(this.gameTypeRibbon)},n.createStats=function(){this.stats=new eE(this.scene),this.add(this.stats)},n.createFooter=function(){this.footer=new mE(this.scene),this.footer.newGameButton.onClick=this.handleNewGame,this.add(this.footer)},n.createCloseButton=function(){var e=this,t=new Ol.Z(this.scene,40,40),n=this.scene.add.image(0,0,wE,PE.IC_BG_OFF);n.setWorldSize(40,40);var i=this.scene.make.bitmapText({font:Rc.Z.PRIMARY.KEY,size:this.scene.fontSize(10),text:"Close",origin:{x:.5,y:.5}});i.setCenterAlign(),t.add([n,i]),this.add(t),Phaser.Display.Align.In.BottomLeft(t,this,0,-200),t.onClick=function(){e.scene.screen.close(Os.o4.VICTORY_SCREEN)}},n.align=function(){Phaser.Display.Align.In.TopCenter(this.title,this,0,19),Phaser.Display.Align.In.BottomCenter(this.gameTypeRibbon,this.title,0,-5),Phaser.Display.Align.In.BottomCenter(this.draw,this.gameTypeRibbon,0,17),Phaser.Display.Align.To.BottomCenter(this.stats,this.draw,0,15),Phaser.Display.Align.In.BottomCenter(this.footer,this,0,-17)},t}(TE)),_E=kE,xE=Gn.Z.GAMEPLAY_DEFAULT,OE=xE.KEY,LE=xE.FRAME,RE=function(e){function t(t){var n,i=(n=e.call(this,t)||this).scene.ads.getBannerHeight(),a=n.scene.game.world.isLandscape()?12:0;return n.setSize(375,i+a),n.createBackground(),n.createLogo(),0==i&&n.kill(),n}(0,o.Z)(t,e);var n=t.prototype;return n.createBackground=function(){if(!this.scene.game.world.isLandscape()){var e=new Lf(this.scene,{key:OE,frame:LE.FOOTER_BG,width:this.scene.gameZone.width,height:this.height,symmetricType:Of.HORIZONTAL});this.add(e),e.setImageInteractive()}},n.createLogo=function(){var e=this.scene.add.image(0,0,OE,LE.BOTTOM_LOGO);e.setWorldSize(321.875,71/2.88),this.add(e)},t}(Phaser.GameObjects.Container),DE=function(e,t){return e==is.Z.KLONDIKE?"Standard mode, Draw "+(null!=t&&t.draw3?3:1):e==is.Z.SPIDER?GameCore.Utils.String.toUpperCamelCase((null==t?void 0:t.suitSize)||"One")+" "+("one"==(null==t?void 0:t.suitSize)?"suit":"suits")+", "+(null==t?void 0:t.difficulty)+" difficulty":"Standard mode"},BE=function(e){function t(t,n,i,a){var s;return(s=e.call(this,t,n,i,a)||this).scene=void 0,s.fadeInAnimation=void 0,s.fadeOutAnimation=void 0,s.victoryContainer=void 0,s.setBackground=function(){s.background.setTint(1315862),s.background.setAlpha(.65)},s.scene=t,s.setBackground(),s.setDepth(Os.Ks.POPUP),s.createVictoryContainer(),s.createBottomLogo(),Fn.Z.removeObject(s.background),s}(0,o.Z)(t,e);var n=t.prototype;return n.createVictoryContainer=function(){this.victoryContainer=new _E(this.scene),this.add(this.victoryContainer)},n.createBottomLogo=function(){if(!this.scene.game.world.isLandscape()){var e=new RE(this.scene);this.add(e),Phaser.Display.Align.In.BottomCenter(e,this)}},n.open=function(t){var n=this;e.prototype.open.call(this,t),this.updateVictoryStats(),this.victoryContainer.setInteractive(),this.runOpenAnimation(),this.scene.events.once("close-prev-screen",(function(){n.scene.screen.close(Os.o4.VICTORY_SCREEN)})),this.add(this.scene.gameplay.confettiSmallFallDown),this.scene.sys.updateList.add(this.scene.gameplay.confettiSmallFallDown),this.scene.gameplay.confettiSmallFallDown.run(10,0,0)},n.close=function(){this.runCloseAnimation(),this.stopConfettiAnimation()},n.updateVictoryStats=function(){var e,t=null==(e=this.data)?void 0:e.list;if(t){var n=Rr.gameType;this.victoryContainer.setGameType(Rr.gameType);var i=t.draw3,a=t.suitSize,s=void 0===a?"one":a,r=t.difficulty,o=t.score,c=t.currentMoves,h=t.playedTime,u=this.scene.gameStats.getGameStatsForType(n,{draw3:i,suitSize:s,difficulty:r}).bestWinningTime;this.victoryContainer.setScore(""+o),this.victoryContainer.setMoves(""+c),this.victoryContainer.setWinningTime((0,Ds.F0)(h,!1)),this.victoryContainer.setBestWinningTime((0,Ds.F0)(u,!1)),this.victoryContainer.setDraw(DE(n,{draw3:i,suitSize:s,difficulty:r}))}},n.runOpenAnimation=function(){var e=(0,r.Z)(l().mark((function e(){var t,n,i=this;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==(t=this.fadeInAnimation)||null==(n=t.tween)||!n.isPlaying()){e.next=2;break}return e.abrupt("return");case 2:this.scene.audio.playSound(Ls.Z.POPUP_SHOW),this.victoryContainer.hideContent(),this.fadeInAnimation||(this.fadeInAnimation=new Mh.Z({targets:[this],onComplete:function(){var e=(0,r.Z)(l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.victoryContainer.runEntranceAnimation();case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()})),this.fadeInAnimation.play();case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.runCloseAnimation=function(){var t,n,i=this;null!=(t=this.fadeOutAnimation)&&null!=(n=t.tween)&&n.isPlaying()||(this.scene.audio.playSound(Ls.Z.POPUP_OFF),this.fadeOutAnimation||(this.fadeOutAnimation=new zm.Z({targets:[this],props:{alpha:0},onComplete:function(){e.prototype.close.call(i)}})),this.fadeOutAnimation.play())},n.stopConfettiAnimation=function(){this.scene.gameplay.confettiSmallFallDown.emitter.stop()},t}(GameCore.Screen),ME=BE,NE=function(e){function t(t,n,i){return e.call(this,t,n,i)||this}(0,o.Z)(t,e);var n=t.prototype;return n.createIcon=function(){var e=this.scene.add.image(0,0,"");e.setWorldSize(19.5,22.5),e.setTint(16579837),this.add(e),this.icon=e},n.createLabel=function(){var e=this.scene.make.bitmapText({font:Rc.Z.PRIMARY.KEY,size:this.scene.fontSize(17),text:"",origin:{x:0,y:.5}});e.setTint(16579837),this.add(e),e.setMaxSize(100,20),this.label=e},n.createValue=function(){var e=this.scene.make.bitmapText({font:Rc.Z.PRIMARY.KEY,size:this.scene.fontSize(16),text:"",origin:{x:1,y:.5}});e.setTint(16580252),e.setRightAlign(),this.add(e),this.value=e},n.alignProperties=function(){Phaser.Display.Align.In.LeftCenter(this.icon,this,-57),Phaser.Display.Align.In.LeftCenter(this.label,this,-90,1.5),Phaser.Display.Align.In.RightCenter(this.value,this,-55,1.5)},t}(VC),GE=NE,FE=Gn.Z.GAMEPLAY_DEFAULT,ZE=FE.KEY,UE=FE.FRAME,zE=function(e){function t(t){var n;return(n=e.call(this,t)||this).setSize(375,190),n.createStats(),n}return(0,o.Z)(t,e),t.prototype.createStats=function(){var e=[],t=this.height/4,n=new GE(this.scene,this.width,t);n.setIcon(ZE,UE.MEDAL_STAR_SHADOW,21.875,73/2.88),n.setLabel("score"),n.setValue("687"),this.score=n,e.push(n);var i=new GE(this.scene,this.width,t);i.setIcon(ZE,UE.ARROW_SWAP_HORIZONTAL,65/2.88,25),i.setLabel("moves"),i.setValue("798"),this.moves=i,e.push(i);var a=new GE(this.scene,this.width,t);a.setIcon(ZE,UE.TIMER,62/2.88,74/2.88),a.setLabel("time"),a.setValue("09:48"),this.time=a,e.push(a);var s=new GE(this.scene,this.width,t);s.setIcon(ZE,UE.IC_BEST_TIME,51/2.88,73/2.88),s.setLabel("bestTime"),s.setValue("05:30"),this.bestTime=s,e.push(s),this.add(e);for(var r=0;r<e.length;r++){var o=e[r];o.updateBackgroundGradient(r%2==0),o.alignProperties(),Phaser.Display.Align.In.TopCenter(o,this,0,-r*t)}},t}(XC),HE=Gn.Z.GAMEPLAY_DEFAULT,WE=HE.KEY,YE=HE.FRAME,KE=function(e){function t(t,n,i){return e.call(this,t,n,i)||this}return(0,o.Z)(t,e),t.prototype.createContent=function(){var e=this.scene.make.image({key:WE,frame:YE.BTN_NEW_GAME});e.setWorldSize(this.width,this.height);var t=new Jl(this.scene);this.add([e,t]),t.text.setMaxSize(120,20,!0),Phaser.Display.Align.In.Center(t,this,0,-1)},t}(hE),VE=KE,jE=Gn.Z.GAMEPLAY_DEFAULT,JE=jE.KEY,XE=jE.FRAME,qE=function(e){function t(t,n,i){return e.call(this,t,n,i)||this}return(0,o.Z)(t,e),t.prototype.createContent=function(){var e=this.scene.make.image({key:JE,frame:XE.BTN_SHARE});e.setWorldSize(this.width,this.height);var t=new Jl(this.scene,{iconTextPadding:5,fontSize:12,text:"share",iconKey:JE,iconFrame:XE.IC_SHARE,iconWidth:18.75,iconHeight:21.875});t.text.setMaxSize(70,20,!0),this.add([e,t])},t}(iE),QE=43.75,$E=function(e){function t(t){return e.call(this,t)||this}(0,o.Z)(t,e);var n=t.prototype;return n.setSizeContainer=function(){this.setSize(375,QE)},n.createNewGameButton=function(){var e=new VE(this.scene,447/2.88,QE);this.add(e),this.buttons.push(e),this.newGameButton=e,Phaser.Display.Align.In.Center(e,this,0,1)},n.createShareButton=function(){var e=new qE(this.scene,375/2.88,QE);this.shareButton=e,Phaser.Display.Align.In.LeftCenter(e,this,-38),this.add([e]),this.buttons.push(e)},t}(tE),eA=Gn.Z.GAMEPLAY_DEFAULT,tA=eA.KEY,nA=eA.FRAME,iA=(vE.iD.FOOTER,function(e){function t(t){return e.call(this,t)||this}(0,o.Z)(t,e);var n=t.prototype;return n.setSizeContainer=function(){var e=(0,ul.t)(),t=this.scene.add.nineslice(0,0,tA,nA.RESULT_SCREEN.POPUP,948/2.88*e,1249/2.88*e,0*e,0*e,100/2.88*e,300/2.88*e);t.setScale(1/e),this.add(t),this.setSize(t.displayWidth,t.displayHeight)},n.createTitle=function(){var e=this.scene.add.container(0,0);this.add(e),e.setSize(375,129),this.title=e;var t=this.scene.add.image(0,0,tA,nA.VICTORY);t.setWorldSize(632/2.88,321/2.88);var n=this.scene.make.bitmapText({font:Rc.Z.BOLD_SHADOW_BLUR.KEY,size:this.scene.fontSize(24),text:"victory",origin:{x:.5,y:.5}});n.setRadius(1e3),n.setMaxSize(200,50),n.setGradientHorizontalTint([{at:0,color:16315097},{at:.5,color:16777215},{at:1,color:16315097}]),e.add([t,n]),Phaser.Display.Align.In.Center(t,e,0,-60),Phaser.Display.Align.In.Center(n,t,0,13);var i=this.scene.make.bitmapText({font:Rc.Z.PRIMARY.KEY,size:this.scene.fontSize(17),text:"standModeDraw1",origin:{x:.5,y:.5}});i.setTint(16777215),i.setMaxSize(200,20),this.draw=i,this.add([i])},n.createGameType=function(){this.gameTypeRibbon=new bE(this.scene),this.add(this.gameTypeRibbon)},n.createStats=function(){this.stats=new zE(this.scene),this.add(this.stats)},n.createFooter=function(){this.footer=new $E(this.scene),this.footer.newGameButton.onClick=this.handleNewGame,this.add(this.footer)},n.createCloseButton=function(){var e=this,t=new Ol.Z(this.scene,40,40),n=this.scene.add.image(0,0,tA,nA.IC_BG_OFF);n.setWorldSize(40,40);var i=this.scene.make.bitmapText({font:Rc.Z.PRIMARY.KEY,size:this.scene.fontSize(10),text:"Close",origin:{x:.5,y:.5}});i.setCenterAlign(),t.add([n,i]),this.add(t),Phaser.Display.Align.In.BottomLeft(t,this,0,-200),t.onClick=function(){e.scene.screen.close(Os.o4.VICTORY_SCREEN)}},n.align=function(){Phaser.Display.Align.In.TopCenter(this.title,this,0,19),Phaser.Display.Align.In.BottomCenter(this.gameTypeRibbon,this.title,0,-5),Phaser.Display.Align.In.BottomCenter(this.draw,this.gameTypeRibbon,0,17),Phaser.Display.Align.To.BottomCenter(this.stats,this.draw,0,15),Phaser.Display.Align.In.BottomCenter(this.footer,this,0,-17)},t}(TE)),aA=iA,sA=function(e){function t(t,n,i,a){var s;return(s=e.call(this,t,n,i,a)||this).scene=void 0,s.fadeInAnimation=void 0,s.fadeOutAnimation=void 0,s.victoryContainer=void 0,s.setBackground=function(){s.background.setTint(1315862),s.background.setAlpha(.65)},s.scene=t,s.setBackground(),s.createVictoryContainer(),s.setDepth(Os.Ks.POPUP),s}(0,o.Z)(t,e);var n=t.prototype;return n.createVictoryContainer=function(){this.victoryContainer=new aA(this.scene),this.add(this.victoryContainer)},n.open=function(t){e.prototype.open.call(this,t),this.updateVictoryStats(),this.victoryContainer.setInteractive(),this.runOpenAnimation(),this.add(this.scene.gameplay.confettiSmallFallDown),this.scene.sys.updateList.add(this.scene.gameplay.confettiSmallFallDown),this.scene.gameplay.confettiSmallFallDown.run(10,0,0)},n.close=function(){this.runCloseAnimation(),this.stopConfettiAnimation()},n.updateVictoryStats=function(){var e,t=null==(e=this.data)?void 0:e.list;if(t){var n=Rr.gameType;this.victoryContainer.setGameType(Rr.gameType);var i=t.draw3,a=t.suitSize,s=void 0===a?"one":a,r=t.difficulty,o=t.score,c=t.currentMoves,h=t.playedTime,u=this.scene.gameStats.getGameStatsForType(n,{draw3:i,suitSize:s,difficulty:r}).bestWinningTime;this.victoryContainer.setScore(""+o),this.victoryContainer.setMoves(""+c),this.victoryContainer.setWinningTime((0,Ds.F0)(h,!1)),this.victoryContainer.setBestWinningTime((0,Ds.F0)(u,!1)),this.victoryContainer.setDraw(DE(n,{draw3:i,suitSize:s,difficulty:r}))}},n.runOpenAnimation=function(){var e=(0,r.Z)(l().mark((function e(){var t,n,i=this;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==(t=this.fadeInAnimation)||null==(n=t.tween)||!n.isPlaying()){e.next=2;break}return e.abrupt("return");case 2:this.scene.audio.playSound(Ls.Z.POPUP_SHOW),this.victoryContainer.hideContent(),this.fadeInAnimation||(this.fadeInAnimation=new Mh.Z({targets:[this],onComplete:function(){var e=(0,r.Z)(l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.victoryContainer.runEntranceAnimation();case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()})),this.fadeInAnimation.play();case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.runCloseAnimation=function(){var t,n,i=this;null!=(t=this.fadeOutAnimation)&&null!=(n=t.tween)&&n.isPlaying()||(this.scene.audio.playSound(Ls.Z.POPUP_OFF),this.fadeOutAnimation||(this.fadeOutAnimation=new zm.Z({targets:[this],props:{alpha:0},onComplete:function(){e.prototype.close.call(i)}})),this.fadeOutAnimation.play())},n.stopConfettiAnimation=function(){this.scene.gameplay.confettiSmallFallDown.emitter.stop()},t}(GameCore.Screen),rA=sA,oA=GameCore.world.isLandscape()?rA:ME,cA=function(e){function t(t,n,i){var a;return(a=e.call(this,t,n,i)||this).setName("ReplayButton"),a.createContent(),a}return(0,o.Z)(t,e),t}(Ol.Z),hA=Gn.Z.GAMEPLAY_DEFAULT,uA=hA.KEY,lA=hA.FRAME,dA=function(e){function t(t,n,i){return e.call(this,t,n,i)||this}return(0,o.Z)(t,e),t.prototype.createContent=function(){var e=new Jl(this.scene,{iconTextPadding:8,text:"replay",fontSize:22,iconKey:uA,iconFrame:lA.TOURNAMENT.IC_REPLAY,iconWidth:16,iconHeight:17});e.text.setMaxSize(84,35),e.text.setCenterAlign();var t=this.scene.make.image({key:uA,frame:lA.TOURNAMENT.BUTTON_REPLAY});t.setWorldSize(this.width,this.height),this.add([t,e]),Phaser.Display.Align.In.Center(e,this)},t}(cA),pA=function(e){function t(t){var n;return(n=e.call(this,t)||this).buttons=[],n.newGameButton=void 0,n.replayButton=void 0,n.setSizeContainer(),n.createNewGameButton(),n.createReplayButton(),n}(0,o.Z)(t,e);var n=t.prototype;return n.hideContent=function(){this.buttons.forEach((function(e){e.setAlpha(0)}))},n.runEntranceAnimationButtons=function(){var e=(0,r.Z)(l().mark((function e(){var t,n,i=this;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.newGameButton.stopPulsate(),n=De()(t=this.buttons).call(t,(function(e){return new(h())((function(t){i.scene.add.tween({targets:[e],alpha:1,duration:200,onComplete:function(){e.setDisabled(!1),t(),i.newGameButton.runPulsate()}})}))})),e.next=4,h().all(n);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),t}(Phaser.GameObjects.Container),fA=43.75,gA=function(e){function t(t){return e.call(this,t)||this}(0,o.Z)(t,e);var n=t.prototype;return n.setSizeContainer=function(){this.setSize(375,fA)},n.createNewGameButton=function(){var e=new fE(this.scene,447/2.88,fA);this.add([e]),this.buttons.push(e),this.newGameButton=e,Phaser.Display.Align.In.RightCenter(e,this,-45)},n.createReplayButton=function(){var e=new dA(this.scene,311/2.88,fA);this.replayButton=e,Phaser.Display.Align.In.LeftCenter(e,this,-45),this.add([e]),this.buttons.push(e)},t}(pA),mA=function(e){function t(t){var n;return(n=e.call(this,t)||this).stats=void 0,n.draw=void 0,n.footer=void 0,n.title=void 0,n.gameTypeRibbon=void 0,n.handleNewGame=(0,r.Z)(l().mark((function e(){var t;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n.scene instanceof UM)){e.next=8;break}return t=n.scene.gameplay.boardGame.getTime(),n.scene.gameplay.boardGame.clearOldBoard(),e.next=5,n.scene.handlePlaySingle();case 5:if(!(t>6e4)){e.next=8;break}return e.next=8,n.scene.gameplay.handleShowInterstitialAd();case 8:n.scene.screen.close(Os.o4.OUT_OF_MOVES_SCREEN);case 9:case"end":return e.stop()}}),e)}))),n.handleReplay=(0,r.Z)(l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.scene instanceof UM&&n.scene.gameplay.replayGame(),n.scene.screen.close(Os.o4.OUT_OF_MOVES_SCREEN);case 2:case"end":return e.stop()}}),e)}))),n.setSizeContainer(),n.createGameType(),n.createTitle(),n.createStats(),n.createFooter(),n.createDevButtons(),n.align(),t.add.existing((0,As.Z)(n)),n.setScale(jf(t)),n.setY(Jf(n.scene)),n}(0,o.Z)(t,e);var n=t.prototype;return n.setGameType=function(e){this.gameTypeRibbon.setGameType(e)},n.setScore=function(e){this.stats.setScore(e)},n.setWinningTime=function(e){this.stats.setWinningTime(e)},n.setBestWinningTime=function(e){this.stats.setBestWinningTime(e)},n.setMoves=function(e){this.stats.setMoves(e)},n.setDraw=function(e){this.draw.setText(e)},n.createDevButtons=function(){GameCore.Utils.Valid.isDebugger()&&this.createCloseButton()},n.hideContent=function(){this.stats.hideContent(),this.footer.hideContent()},n.runEntranceAnimationRows=function(){var e=(0,r.Z)(l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h().all([this.stats.runEntranceAnimationRows()]);case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.runEntranceAnimation=function(){var e=(0,r.Z)(l().mark((function e(){var t;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.runEntranceAnimationRows();case 2:return t=this.scene,e.next=5,t.gameplay.finishGame();case 5:return e.next=7,this.footer.runEntranceAnimationButtons();case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),t}(Phaser.GameObjects.Container),vA=mA,yA=Gn.Z.GAMEPLAY_DEFAULT,TA=yA.KEY,CA=yA.FRAME,EA=(vE.iD.FOOTER.HEIGHT,function(e){function t(t){return e.call(this,t)||this}(0,o.Z)(t,e);var n=t.prototype;return n.setSizeContainer=function(){var e=(0,ul.t)(),t=this.scene.add.nineslice(0,0,TA,CA.RESULT_SCREEN.POPUP,948/2.88*e,1249/2.88*e,0*e,0*e,100/2.88*e,300/2.88*e);t.setScale(1/e),this.add(t),this.setSize(t.displayWidth,t.displayHeight)},n.createTitle=function(){var e=this.scene.add.container(0,0);this.add(e),e.setSize(375,50),this.title=e;var t=this.scene.add.image(0,0,TA,CA.SPADE);t.setWorldSize(50/2.88,56/2.88);var n=this.scene.make.bitmapText({font:Rc.Z.BOLD_SHADOW_BLUR.KEY,size:this.scene.fontSize(34),text:"outOfMoves",origin:{x:.5,y:.5}});n.setMaxSize(330,50);var i=this.scene.add.image(0,0,TA,CA.HEART);i.setWorldSize(48/2.88,18.75),n.setTint(16777215,16777215,12833246,12833246),e.add([t,n,i]),Phaser.Display.Align.In.Center(n,e,0,35);var a=function(){Phaser.Display.Align.To.LeftCenter(t,n,3,-2),Phaser.Display.Align.To.RightCenter(i,n,2,-2)};a();var s=this.scene.make.bitmapText({font:Rc.Z.PRIMARY.KEY,size:this.scene.fontSize(17),text:"standModeDraw1",origin:{x:.5,y:.5}});s.setTint(16777215),s.setMaxSize(330,30),this.draw=s,n.on("textChanged",(function(){a()})),this.add([s])},n.createGameType=function(){this.gameTypeRibbon=new bE(this.scene),this.add(this.gameTypeRibbon)},n.createStats=function(){this.stats=new eE(this.scene),this.add(this.stats)},n.createFooter=function(){this.footer=new gA(this.scene),this.footer.newGameButton.onClick=this.handleNewGame,this.footer.replayButton.onClick=this.handleReplay,this.add(this.footer)},n.createCloseButton=function(){var e=this,t=new Ol.Z(this.scene,40,40),n=this.scene.add.image(0,0,TA,CA.IC_BG_OFF);n.setWorldSize(40,40);var i=this.scene.make.bitmapText({font:Rc.Z.PRIMARY.KEY,size:this.scene.fontSize(10),text:"Close",origin:{x:.5,y:.5}});i.setCenterAlign(),t.add([n,i]),this.add(t),Phaser.Display.Align.In.BottomLeft(t,this,0,-200),t.onClick=function(){e.scene.screen.close(Os.o4.OUT_OF_MOVES_SCREEN)}},n.align=function(){Phaser.Display.Align.In.TopCenter(this.title,this,0,26),Phaser.Display.Align.In.BottomCenter(this.gameTypeRibbon,this.title,0,88),Phaser.Display.Align.In.BottomCenter(this.draw,this.gameTypeRibbon,0,17),Phaser.Display.Align.To.BottomCenter(this.stats,this.draw,0,15),Phaser.Display.Align.In.BottomCenter(this.footer,this,0,-17)},t}(vA)),AA=EA,SA=function(e){function t(t,n,i,a){var s;return(s=e.call(this,t,n,i,a)||this).scene=void 0,s.fadeInAnimation=void 0,s.fadeOutAnimation=void 0,s.outOfMovesContainer=void 0,s.setBackground=function(){s.background.setTint(1315862),s.background.setAlpha(.65)},s.scene=t,s.setBackground(),s.createOutOfMovesContainer(),s.createBottomLogo(),s.setDepth(Os.Ks.POPUP),Fn.Z.removeObject(s.background),s}(0,o.Z)(t,e);var n=t.prototype;return n.createOutOfMovesContainer=function(){this.outOfMovesContainer=new AA(this.scene),this.add(this.outOfMovesContainer)},n.createBottomLogo=function(){if(!this.scene.world.isLandscape()){var e=new RE(this.scene);this.add(e),Phaser.Display.Align.In.BottomCenter(e,this)}},n.open=function(t){e.prototype.open.call(this,t),Fn.Z.openScreen(this,!0),this.updateVictoryStats(),this.outOfMovesContainer.setInteractive(),this.runOpenAnimation()},n.close=function(){this.runCloseAnimation()},n.updateVictoryStats=function(){var e,t=null==(e=this.data)?void 0:e.list;if(t){var n=Rr.gameType;this.outOfMovesContainer.setGameType(Rr.gameType);var i=t.draw3,a=t.suitSize,s=void 0===a?"one":a,r=t.difficulty,o=t.score,c=t.currentMoves,h=t.playedTime,u=this.scene.gameStats.getGameStatsForType(n,{draw3:i,suitSize:s,difficulty:r}).bestWinningTime;this.outOfMovesContainer.setScore(""+o),this.outOfMovesContainer.setMoves(""+c),this.outOfMovesContainer.setWinningTime((0,Ds.F0)(h,!1)),this.outOfMovesContainer.setBestWinningTime((0,Ds.F0)(u,!1)),this.outOfMovesContainer.setDraw(DE(n,{draw3:i,suitSize:s,difficulty:r}))}},n.runOpenAnimation=function(){var e=(0,r.Z)(l().mark((function e(){var t,n,i=this;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==(t=this.fadeInAnimation)||null==(n=t.tween)||!n.isPlaying()){e.next=2;break}return e.abrupt("return");case 2:this.scene.audio.playSound(Ls.Z.POPUP_SHOW),this.outOfMovesContainer.hideContent(),this.fadeInAnimation||(this.fadeInAnimation=new Mh.Z({targets:[this],onComplete:function(){var e=(0,r.Z)(l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.outOfMovesContainer.runEntranceAnimation();case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()})),this.fadeInAnimation.play();case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.runCloseAnimation=function(){var t,n,i=this;null!=(t=this.fadeOutAnimation)&&null!=(n=t.tween)&&n.isPlaying()||(this.scene.audio.playSound(Ls.Z.POPUP_OFF),this.fadeOutAnimation||(this.fadeOutAnimation=new zm.Z({targets:[this],props:{alpha:0},onComplete:function(){Fn.Z.closeScreen(i),e.prototype.close.call(i)}})),this.fadeOutAnimation.play())},t}(GameCore.Screen),bA=SA,IA=Gn.Z.GAMEPLAY_DEFAULT,wA=IA.KEY,PA=IA.FRAME,kA=function(e){function t(t,n,i){return e.call(this,t,n,i)||this}return(0,o.Z)(t,e),t.prototype.createContent=function(){var e=new Jl(this.scene,{iconTextPadding:5,text:"replay",fontSize:12,iconKey:wA,iconFrame:PA.TOURNAMENT.IC_REPLAY,iconWidth:16,iconHeight:17});e.text.setMaxSize(70,20),e.text.setCenterAlign();var t=this.scene.make.image({key:wA,frame:PA.TOURNAMENT.BUTTON_REPLAY});t.setWorldSize(this.width,this.height),this.add([t,e]),Phaser.Display.Align.In.Center(e,this)},t}(cA),_A=43.75,xA=function(e){function t(t){return e.call(this,t)||this}(0,o.Z)(t,e);var n=t.prototype;return n.setSizeContainer=function(){this.setSize(375,_A)},n.createNewGameButton=function(){var e=new VE(this.scene,447/2.88,_A);this.add([e]),this.buttons.push(e),this.newGameButton=e,Phaser.Display.Align.In.RightCenter(e,this,-45)},n.createReplayButton=function(){var e=new kA(this.scene,311/2.88,_A);this.replayButton=e,Phaser.Display.Align.In.LeftCenter(e,this,-45),this.add([e]),this.buttons.push(e)},t}(pA),OA=Gn.Z.GAMEPLAY_DEFAULT,LA=OA.KEY,RA=OA.FRAME,DA=(vE.iD.FOOTER.HEIGHT,function(e){function t(t){return e.call(this,t)||this}(0,o.Z)(t,e);var n=t.prototype;return n.setSizeContainer=function(){var e=(0,ul.t)(),t=this.scene.add.nineslice(0,0,LA,RA.RESULT_SCREEN.POPUP,948/2.88*e,1249/2.88*e,0*e,0*e,100/2.88*e,300/2.88*e);t.setScale(1/e),this.add(t),this.setSize(t.displayWidth,t.displayHeight)},n.createTitle=function(){var e=this.scene.add.container(0,0);this.add(e),e.setSize(375,50),this.title=e;var t=this.scene.add.image(0,0,LA,RA.SPADE);t.setWorldSize(50/2.88,56/2.88);var n=this.scene.make.bitmapText({font:Rc.Z.BOLD_SHADOW_BLUR.KEY,size:this.scene.fontSize(27),text:"outOfMoves",origin:{x:.5,y:.5}});n.setMaxSize(180,30);var i=this.scene.add.image(0,0,LA,RA.HEART);i.setWorldSize(48/2.88,18.75),n.setTint(16777215,16777215,12833246,12833246),e.add([t,n,i]),Phaser.Display.Align.In.Center(n,e,0,35),Phaser.Display.Align.To.LeftCenter(t,n,7,-2),Phaser.Display.Align.To.RightCenter(i,n,5,-3);var a=this.scene.make.bitmapText({font:Rc.Z.PRIMARY.KEY,size:this.scene.fontSize(17),text:"standModeDraw1",origin:{x:.5,y:.5}});a.setMaxSize(200,20),a.setTint(16777215),this.draw=a,this.add([a]),n.on("textChanged",(function(){Phaser.Display.Align.To.LeftCenter(t,n,3,-1),Phaser.Display.Align.To.RightCenter(i,n,2,-1)}))},n.createGameType=function(){this.gameTypeRibbon=new bE(this.scene),this.add(this.gameTypeRibbon)},n.createStats=function(){this.stats=new eE(this.scene),this.add(this.stats)},n.createFooter=function(){this.footer=new xA(this.scene),this.footer.newGameButton.onClick=this.handleNewGame,this.footer.replayButton.onClick=this.handleReplay,this.add(this.footer)},n.createCloseButton=function(){var e=this,t=new Ol.Z(this.scene,40,40),n=this.scene.add.image(0,0,LA,RA.IC_BG_OFF);n.setWorldSize(40,40);var i=this.scene.make.bitmapText({font:Rc.Z.PRIMARY.KEY,size:this.scene.fontSize(10),text:"Close",origin:{x:.5,y:.5}});i.setCenterAlign(),t.add([n,i]),this.add(t),Phaser.Display.Align.In.BottomLeft(t,this,0,-200),t.onClick=function(){e.scene.screen.close(Os.o4.OUT_OF_MOVES_SCREEN)}},n.align=function(){Phaser.Display.Align.In.TopCenter(this.title,this,0,26),Phaser.Display.Align.In.BottomCenter(this.gameTypeRibbon,this.title,0,88),Phaser.Display.Align.In.BottomCenter(this.draw,this.gameTypeRibbon,0,17),Phaser.Display.Align.To.BottomCenter(this.stats,this.draw,0,15),Phaser.Display.Align.In.BottomCenter(this.footer,this,0,-17)},t}(vA)),BA=DA,MA=function(e){function t(t,n,i,a){var s;return(s=e.call(this,t,n,i,a)||this).scene=void 0,s.fadeInAnimation=void 0,s.fadeOutAnimation=void 0,s.outOfMovesContainer=void 0,s.setBackground=function(){s.background.setTint(1315862),s.background.setAlpha(.65)},s.scene=t,s.setBackground(),s.createOutOfMovesContainer(),s.setDepth(Os.Ks.POPUP),s}(0,o.Z)(t,e);var n=t.prototype;return n.createOutOfMovesContainer=function(){this.outOfMovesContainer=new BA(this.scene),this.add(this.outOfMovesContainer)},n.open=function(t){e.prototype.open.call(this,t),Fn.Z.openScreen(this,!0),this.updateVictoryStats(),this.outOfMovesContainer.setInteractive(),this.runOpenAnimation()},n.close=function(){this.runCloseAnimation()},n.updateVictoryStats=function(){var e,t=null==(e=this.data)?void 0:e.list;if(t){var n=Rr.gameType;this.outOfMovesContainer.setGameType(Rr.gameType);var i=t.draw3,a=t.suitSize,s=void 0===a?"one":a,r=t.difficulty,o=t.score,c=t.currentMoves,h=t.playedTime,u=this.scene.gameStats.getGameStatsForType(n,{draw3:i,suitSize:s,difficulty:r}).bestWinningTime;this.outOfMovesContainer.setScore(""+o),this.outOfMovesContainer.setMoves(""+c),this.outOfMovesContainer.setWinningTime((0,Ds.F0)(h,!1)),this.outOfMovesContainer.setBestWinningTime((0,Ds.F0)(u,!1)),this.outOfMovesContainer.setDraw(DE(n,{draw3:i,suitSize:s,difficulty:r}))}},n.runOpenAnimation=function(){var e=(0,r.Z)(l().mark((function e(){var t,n,i=this;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==(t=this.fadeInAnimation)||null==(n=t.tween)||!n.isPlaying()){e.next=2;break}return e.abrupt("return");case 2:this.scene.audio.playSound(Ls.Z.POPUP_SHOW),this.outOfMovesContainer.hideContent(),this.fadeInAnimation||(this.fadeInAnimation=new Mh.Z({targets:[this],onComplete:function(){var e=(0,r.Z)(l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.outOfMovesContainer.runEntranceAnimation();case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()})),this.fadeInAnimation.play();case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.runCloseAnimation=function(){var t,n,i=this;null!=(t=this.fadeOutAnimation)&&null!=(n=t.tween)&&n.isPlaying()||(this.scene.audio.playSound(Ls.Z.POPUP_OFF),this.fadeOutAnimation||(this.fadeOutAnimation=new zm.Z({targets:[this],props:{alpha:0},onComplete:function(){Fn.Z.closeScreen(i),e.prototype.close.call(i)}})),this.fadeOutAnimation.play())},t}(GameCore.Screen),NA=MA,GA=GameCore.world.isLandscape()?NA:bA,FA=Gn.Z.GAMEPLAY_DEFAULT,ZA=FA.KEY,UA=FA.FRAME,zA=function(e){function t(t){var n;return(n=e.call(this,t,130,48.5)||this).setName("OkButton"),n.createBackground(),n.createContents(),n}(0,o.Z)(t,e);var n=t.prototype;return n.createBackground=function(){var e=this.scene.make.image({key:ZA,frame:UA.BUTTON_DONE});e.setWorldSize(this.width,this.height),this.add(e)},n.createContents=function(){var e=new Jl(this.scene,{iconTextPadding:8,text:"ok",fontSize:22,iconKey:ZA,iconFrame:UA.IC_DONE,iconWidth:20,iconHeight:16.5});e.text.setMaxSize(85,35),this.add(e)},t}(Ol.Z),HA=zA,WA=Gn.Z.GAMEPLAY_DEFAULT,YA=WA.KEY,KA=WA.FRAME,VA=function(e){function t(t){var n;return(n=e.call(this,t)||this).background=void 0,n.message=void 0,n.setSize(341,163.5),n.createBackground(),n.createMessage(),n.createOKButton(),t.add.existing((0,As.Z)(n)),n}(0,o.Z)(t,e);var n=t.prototype;return n.setMessage=function(e){this.message.setText(e)},n.createBackground=function(){var e=new Lf(this.scene,{width:this.width,height:this.height,key:YA,frame:KA.BG_NOTIFICATION,symmetricType:Of.HORIZONTAL});this.add(e),this.background=e},n.createMessage=function(){var e=this.scene.make.bitmapText({font:Rc.Z.PRIMARY.KEY,size:this.scene.fontSize(20),text:"Hello, world!",origin:{x:.5,y:.5}});e.setCenterAlign(),e.setMaxSize(320,80),Phaser.Display.Align.In.Center(e,this,0,-30),this.message=e,this.add(e)},n.createOKButton=function(){var e=this,t=new HA(this.scene);t.onClick=function(){e.scene.screen.close(Os.o4.NOTIFICATION_SCREEN)},Phaser.Display.Align.In.BottomCenter(t,this.background,0,-16),this.add([t])},t}(Phaser.GameObjects.Container),jA=VA,JA=function(e){function t(t,n,i,a){var s;return(s=e.call(this,t,n,i,a)||this).fadeInAnimation=void 0,s.fadeOutAnimation=void 0,s.notificationContainer=void 0,s.setDepth(Os.Ks.POPUP),s.notificationContainer=new jA(t),s.add(s.notificationContainer),s.background.setTint(1315862),s.background.setAlpha(.65),s.background.setInteractive(),s}(0,o.Z)(t,e);var n=t.prototype;return n.open=function(t){e.prototype.open.call(this,t);var n=this.data.list.message,i=void 0===n?"":n;this.notificationContainer.setMessage(i),this.runOpenAnimation()},n.close=function(){this.runCloseAnimation()},n.runOpenAnimation=function(){var e,t;null!=(e=this.fadeInAnimation)&&null!=(t=e.tween)&&t.isPlaying()||(this.scene.audio.playSound(Ls.Z.POPUP_SHOW),this.fadeInAnimation||(this.fadeInAnimation=new Mh.Z({targets:[this]})),this.fadeInAnimation.play())},n.runCloseAnimation=function(){var t,n,i=this;null!=(t=this.fadeOutAnimation)&&null!=(n=t.tween)&&n.isPlaying()||(this.scene.audio.playSound(Ls.Z.POPUP_OFF),this.fadeOutAnimation||(this.fadeOutAnimation=new zm.Z({targets:[this],props:{alpha:0},onComplete:function(){e.prototype.close.call(i)}})),this.fadeOutAnimation.play())},t}(GameCore.Screen),XA=JA,qA=Gn.Z.GAMEPLAY_DEFAULT,QA=qA.KEY,$A=qA.FRAME,eS=function(e){function t(t){var n;return(n=e.call(this,t)||this).background=void 0,n.message=void 0,n.setSize(341,163.5),n.createBackground(),n.createMessage(),n.createOKButton(),t.add.existing((0,As.Z)(n)),n.setScale(.95*jf(n.scene)),n}(0,o.Z)(t,e);var n=t.prototype;return n.setMessage=function(e){this.message.setText(e)},n.createBackground=function(){var e=new Lf(this.scene,{width:this.width,height:this.height,key:QA,frame:$A.BG_NOTIFICATION,symmetricType:Of.HORIZONTAL});this.add(e),this.background=e},n.createMessage=function(){var e=this.scene.make.bitmapText({font:Rc.Z.PRIMARY.KEY,size:this.scene.fontSize(20),text:"Hello, world!",origin:{x:.5,y:.5}});e.setCenterAlign(),e.setMaxSize(200,50),Phaser.Display.Align.In.Center(e,this,0,-30),this.message=e,this.add(e)},n.createOKButton=function(){var e=this,t=new HA(this.scene);t.onClick=function(){e.scene.screen.close(Os.o4.NOTIFICATION_SCREEN)},Phaser.Display.Align.In.BottomCenter(t,this.background,0,-16),this.add([t])},t}(Phaser.GameObjects.Container),tS=eS,nS=function(e){function t(t,n,i,a){var s;return(s=e.call(this,t,n,i,a)||this).fadeInAnimation=void 0,s.fadeOutAnimation=void 0,s.notificationContainer=void 0,s.setDepth(Os.Ks.POPUP),s.notificationContainer=new tS(t),s.add(s.notificationContainer),s.background.setTint(1315862),s.background.setAlpha(.65),s.background.setInteractive(),s}(0,o.Z)(t,e);var n=t.prototype;return n.open=function(t){e.prototype.open.call(this,t);var n=this.data.list.message,i=void 0===n?"":n;this.notificationContainer.setMessage(i),this.runOpenAnimation()},n.close=function(){this.runCloseAnimation()},n.runOpenAnimation=function(){var e,t;null!=(e=this.fadeInAnimation)&&null!=(t=e.tween)&&t.isPlaying()||(this.scene.audio.playSound(Ls.Z.POPUP_SHOW),this.fadeInAnimation||(this.fadeInAnimation=new Mh.Z({targets:[this]})),this.fadeInAnimation.play())},n.runCloseAnimation=function(){var t,n,i=this;null!=(t=this.fadeOutAnimation)&&null!=(n=t.tween)&&n.isPlaying()||(this.scene.audio.playSound(Ls.Z.POPUP_OFF),this.fadeOutAnimation||(this.fadeOutAnimation=new zm.Z({targets:[this],props:{alpha:0},onComplete:function(){e.prototype.close.call(i)}})),this.fadeOutAnimation.play())},t}(GameCore.Screen),iS=nS,aS=GameCore.world.isLandscape()?iS:XA,sS=n(652),rS=function(){function e(){this.payload=void 0}var t=e.prototype;return t.getData=function(){var e=(0,r.Z)(l().mark((function e(){var t,n,i;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.payload){e.next=2;break}return e.abrupt("return",this.payload);case 2:return e.next=4,h().all([this.getAPITournamentData(),this.getFacebookTournamentData()]);case 4:return t=e.sent,n=t[0],i=t[1],this.payload=n||i,e.abrupt("return",this.payload);case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),t.setData=function(e){this.payload=e},t.clearData=function(){this.payload=void 0},t.getAPITournamentData=function(){var e=(0,r.Z)(l().mark((function e(){var t,n,i;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=window.game.storage.getState(),n=Cr(t),e.next=4,(0,Ir.Iy)();case 4:if(0!==(i=e.sent).length){e.next=7;break}return e.abrupt("return",void 0);case 7:return e.abrupt("return",D()(i).call(i,(function(e){return e.id===n})));case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),t.getFacebookTournamentData=function(){var e=(0,r.Z)(l().mark((function e(){var t,n,i,a,s;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,window.game.facebook.getTournamentAsync();case 2:if(t=e.sent,n=t.getPayload()){e.next=6;break}return e.abrupt("return",void 0);case 6:if(i=JSON.parse(n),a=i.playerName,i.leaderboardId){e.next=10;break}return e.abrupt("return",void 0);case 10:return s={id:t.getID(),title:t.getTitle()||a+"'s Tournament",payload:i,endTime:t.getEndTime(),contextID:t.getContextID()},e.abrupt("return",s);case 12:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),e}(),oS=new rS,cS=oT.STATUS,hS=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n.gameMode=void 0,n.handleGameModeChanged=function(){n.stop(),n.start()},n.scene=t,n.init(),n}(0,o.Z)(t,e);var n=t.prototype;return n.init=function(){e.prototype.init.call(this),this.gameMode=Xo.SINGLE,Qo.instance.on(Lr.GAME_MODE_CHANGED,this.handleGameModeChanged)},n.start=function(){if(!this.isRunning()){switch(this.gameMode=Qo.instance.getGameMode(),this.gameMode){case Xo.SINGLE:this.startSingleMode();break;case Xo.TOURNAMENT:this.startTournamentMode();break;case Xo.CHALLENGE_FRIENDS:this.startChallengeMode();break;case Xo.JOURNEY:this.startJourneyMode();break;default:this.stopChallengeMode(),this.stopTournamentMode(),this.stopJourneyMode()}this.setState(cS.RUNNING)}},n.stop=function(){switch(this.gameMode){case Xo.SINGLE:this.stopSingleMode();break;case Xo.TOURNAMENT:this.stopTournamentMode();break;case Xo.CHALLENGE_FRIENDS:this.stopChallengeMode();break;case Xo.JOURNEY:this.stopJourneyMode()}this.setState(cS.STOPPED)},n.startSingleMode=function(){this.scene.header.useSingleInfo()},n.stopSingleMode=function(){},n.startTournamentMode=function(){var e=(0,r.Z)(l().mark((function e(){var t,n,a,s,r,o,c,h;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.scene.header.useTournamentInfo(),e.next=3,this.updateTournamentInfo();case 3:return e.prev=3,n=this.scene.storage.getState(),a=Er(n),s=Cr(n),e.next=11,(0,Ir.H$)(a,{limit:7}).catch((function(e){return[]}));case 11:if(!((r=e.sent).length<1)){e.next=15;break}return e.abrupt("return");case 15:return o=De()(r).call(r,(function(e){return e.playerId})),e.next=18,this.scene.profile.requestProfiles(o).catch((function(e){}));case 18:if(c=this.scene.profile.getProfiles(),h=De()(r).call(r,(function(e){var t=e.playerId,n=e.score,i=e.rank,a=c[t];if(!a)return null;var s=a.name;return{playerId:t,photo:a.photo,score:n,rank:i,name:s}})),!(ia()(t=Le()(h).call(h,(function(e){return null!==e}))).call(t,(function(e,t){return t.score-e.score})).length<1)){e.next=24;break}return e.abrupt("return");case 24:this.scene.analytics.event(Nn._.TOURNAMENT_START,{tournament_id:s,leaderboard_id:a}),e.next=34;break;case 28:if(e.prev=28,e.t0=e.catch(3),!(e.t0 instanceof sS.Z)){e.next=32;break}return e.abrupt("return");case 32:(0,i.tO)(e.t0);case 34:case"end":return e.stop()}}),e,this,[[3,28]])})));return function(){return e.apply(this,arguments)}}(),n.updateTournamentInfo=function(){var e=(0,r.Z)(l().mark((function e(){var t,n,i,a,s,r,o,c,h,u,d,p,f,g;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.scene.storage.getState(),n=Er(t),e.next=4,(0,Ir.wF)(n);case 4:i=e.sent,a=null==i?void 0:i.name,GameCore.Configs.Tournament.UseMock||(s=JSON.parse((null==i?void 0:i.description)||"{}"),r=s.image,o=s.gameType,c=s.level,h=s.options,u=s.contextID,d=s.tournamentID,p=new Date(null==i?void 0:i.expireAt).getTime(),f=Math.round(p/1e3),oS.setData({id:d,title:a,payload:{playerId:"",leaderboardId:n,image:r,gameType:o,options:h,level:c},endTime:f,contextID:u})),g=GameCore.Utils.String.removeDiacritics(a||"Your tournament"),this.scene.header.tournamentInfo.setTitle(g);case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.stopTournamentMode=function(){},n.startChallengeMode=function(){this.playPLayWithFriendWelcomeAnimation(),this.scene.header.useChallengeInfo();var e=this.scene.header.challengeInfo,t=e.leftBlock,n=e.rightBlock;n.updateData(0,0,0),t.updateData();var i=this.scene.storage.getState(),a=this.scene.player.getPlayer(),s=a.playerId,r=a.photo,o=a.name;n.avatar.loadPhoto(s,r,40),n.nameText.setText(o);var c=so(i),h=c.playerId,u=c.photo,l=c.name;t.avatar.loadPhoto(h,u,40),h==Va.playerId?(t.nameText.setText("yourFriend"),t.nameText.setIgnoreLanguage(!1)):(t.nameText.setText(l),t.nameText.setIgnoreLanguage(!0));var d=no(i),p=d.whitePlayerId,f=d.extraData,g=void 0===f?{}:f,m=s===p?g.blackPlayerData:g.whitePlayerData;if(m){var v=m.score,y=m.moves,T=m.time;t.updateData(v,T,y)}},n.playPLayWithFriendWelcomeAnimation=function(){var e=(0,r.Z)(l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Au(this.scene,500);case 2:return this.scene.screen.open(Os.o4.PLAY_WITH_FRIEND_WELCOME),e.next=5,Au(this.scene,1200);case 5:this.scene.screen.close(Os.o4.PLAY_WITH_FRIEND_WELCOME);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.stopChallengeMode=function(){},n.startJourneyMode=function(){this.scene.header.useMissionInfo(),this.scene.journey.setIsPlayingCurrentLevel(!0)},n.stopJourneyMode=function(){this.scene.journey.setIsPlayingCurrentLevel(!1)},t}(uT),uS=hS,lS=function(e){function t(t,n){var i;return(i=e.call(this,t,0,0,Rc.Z.BOLD_SHADOW_BLUR.KEY,n,t.fontSize(Sf.TITLE))||this).setOrigin(.5,.5),i.setTint(16449487,16449487,15913325,15913325),i.setMaxSize(280,40),i}return(0,o.Z)(t,e),t}(Phaser.GameObjects.BitmapText),dS=Gn.Z.GAMEPLAY_DEFAULT,pS=dS.KEY,fS=dS.FRAME,gS=function(e){function t(t){var n;return(n=e.call(this,t,98/2.88,100/2.88)||this).setName("CreateTournamentButton"),n.createContent(),n}return(0,o.Z)(t,e),t.prototype.createContent=function(){var e=this.scene.add.image(0,0,pS,fS.TOURNAMENT.BUTTON_ADD);e.setWorldSize(this.width,this.height),this.add(e),Phaser.Display.Align.In.Center(e,this,0,0)},t}(Ol.Z),mS=gS,vS=vE.iD.HEADER,yS=vS.WIDTH,TS=vS.HEIGHT,CS=Gn.Z.GAMEPLAY_DEFAULT,ES=CS.KEY,AS=CS.FRAME,SS=function(e){function t(t){var n;return(n=e.call(this,t)||this).background=void 0,n.createTournamentButton=void 0,n.gameTypeTag=void 0,n.setSize(yS,TS),n.createBackground(),n.createTitle(),n.createCreateButton(),n.createGameTypeTag(),n}(0,o.Z)(t,e);var n=t.prototype;return n.setGameType=function(e){this.gameTypeTag.setGameType(e)},n.createBackground=function(){this.background=new Lf(this.scene,{width:this.width,height:this.height,key:ES,frame:AS.TOURNAMENT.HEADER,symmetricType:Of.HORIZONTAL}),this.add(this.background),Phaser.Display.Align.In.Center(this.background,this,0,0)},n.createTitle=function(){var e=new lS(this.scene,"TOURNAMENTS");this.add(e),Phaser.Display.Align.In.TopCenter(e,this,0,-22.75)},n.createCreateButton=function(){this.createTournamentButton=new mS(this.scene),this.add(this.createTournamentButton),Phaser.Display.Align.In.RightCenter(this.createTournamentButton,this,-15,3)},n.createGameTypeTag=function(){this.gameTypeTag=new hy(this.scene,"full_screen"),this.add(this.gameTypeTag),Phaser.Display.Align.In.LeftCenter(this.gameTypeTag,this,0,3)},t}(Phaser.GameObjects.Container),bS=SS,IS=Gn.Z.GAMEPLAY_DEFAULT,wS=(IS.KEY,IS.FRAME),PS=function(e){function t(t,n,i,a,s,r){var o;return(o=e.call(this,t,n,i)||this).icon=void 0,o.text=void 0,o.createIcon(a,s),o.createText(r),o.add([o.icon,o.text]),o}(0,o.Z)(t,e);var n=t.prototype;return n.createIcon=function(e,t){this.icon=this.scene.add.image(0,-10,e,t).setTint(16579837),t==wS.IC_MENU?this.icon.setWorldSize(24,24):this.icon.setWorldSize(28,28)},n.createText=function(e){this.text=this.scene.make.bitmapText({font:Rc.Z.PRIMARY.KEY,size:this.scene.fontSize(Sf.FOOTER),text:e,origin:{x:.5,y:.5},y:14}).setTint(13355979),this.text.setMaxSize(120,20)},t}(Ol.Z),kS=PS,_S=Gn.Z.GAMEPLAY_DEFAULT,xS=_S.KEY,OS=_S.FRAME,LS=function(e){function t(t,n,i){var a;return(a=e.call(this,t,n||40,i||40,xS,OS.IC_MENU,"Menu")||this).setName("MenuButton"),a}return(0,o.Z)(t,e),t}(kS),RS=Gn.Z.GAMEPLAY_DEFAULT,DS=RS.KEY,BS=RS.FRAME,MS=function(e){function t(t){var n;return(n=e.call(this,t,40,40,DS,BS.CUP,"tournaments")||this).onClick=function(){},n}return(0,o.Z)(t,e),t}(kS),NS=Gn.Z.GAMEPLAY_DEFAULT,GS=NS.KEY,FS=NS.FRAME,ZS=function(e){function t(t,n,i){var a;return(a=e.call(this,t,n||42.5,i||39,GS,FS.IC_CLOSE,"Back to Game")||this).setName("Game"),a}return(0,o.Z)(t,e),t}(kS),US=Gn.Z.GAMEPLAY_DEFAULT,zS=US.KEY,HS=US.FRAME,WS=xf.WIDTH,YS=xf.HEIGHT,KS=xf.HIT_ZONE_BUTTON,VS=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n.menuButton=void 0,n.tournamentsButton=void 0,n.gameButton=void 0,n.buttons=[],n.background=void 0,n.scene=t,n.setSize(WS,YS),n.createBackgroundMask(),n.createBackground(),n.createButtons(),n}(0,o.Z)(t,e);var n=t.prototype;return n.createBackgroundMask=function(){var e=this.scene.theme.getThemeDefaultConfig().backgroundKey,t=this.scene.add.image(0,0,e);t.setOrigin(.5,1),this.add(t),this.background=t,this.updateBackgroundMask()},n.updateBackgroundMask=function(){var e=this.scene.world.isLandscape()?20:0,t=this.scene.world.getPixelRatio(),n=this.scene.ads.getBannerHeight(),i=this.background,a=this.scene.gameZone,s=a.width,r=a.height;i.setWorldSize(s,r),i.setCrop(0,i.frame.height-(this.height+n)/i.scaleY-e*t,this.width*t,(this.height+n)/i.scaleY+e*t),i.setY(n+this.height/2+e)},n.createBackground=function(){var e=this.scene.world.isLandscape()?0:40,t=this.scene.add.image(0,0,zS,HS.FOOTER_BG);t.setWorldSize(this.width+e,this.height),this.add(t),t.removeInteractive()},n.createButtons=function(){this.buttons=[],this.createMenuButton(),this.createGameButton(),this.alignButtons()},n.createMenuButton=function(){this.menuButton=new LS(this.scene,KS.WIDTH,KS.HEIGHT),this.add(this.menuButton),this.buttons.push(this.menuButton)},n.createTournamentsButton=function(){this.tournamentsButton=new MS(this.scene),this.add(this.tournamentsButton),this.buttons.push(this.tournamentsButton)},n.createGameButton=function(){var e=this;this.gameButton=new ZS(this.scene,KS.WIDTH,KS.HEIGHT),this.add(this.gameButton),this.buttons.push(this.gameButton),this.gameButton.onClick=function(){e.scene.screen.get(Os.o4.TOURNAMENTS_SCREEN).closeAllScreens(),e.scene.switchGameType(Rr.filterGameType)}},n.alignButtons=function(){if(0!==this.buttons.length)for(var e=this.width/this.buttons.length,t=0;t<this.buttons.length;++t)this.buttons[t].setX((t-this.buttons.length/2+.5)*e),this.buttons[t].setY(2)},t}(Phaser.GameObjects.Container),jS=VS,JS=n(655),XS=function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).name="TournamentPayloadInvalid",i.message=t||"The tournament payload invalid",i.payload=n,i}return(0,o.Z)(t,e),t}((0,W.Z)(Error)),qS=Gn.Z.GAMEPLAY_DEFAULT,QS=qS.KEY,$S=qS.FRAME,eb=function(e){function t(t){var n;return(n=e.call(this,t,269,46)||this).setName("CreateNewTournament"),n.createBackground(),n.createContents(),n}(0,o.Z)(t,e);var n=t.prototype;return n.createBackground=function(){var e=this.scene.make.image({key:QS,frame:$S.TOURNAMENT.BUTTON_CREATE});e.setWorldSize(this.width,this.height),this.add(e)},n.createContents=function(){var e=new Jl(this.scene,{iconTextPadding:8,text:"createTournament",fontSize:20,iconKey:QS,iconFrame:$S.IC_NEW,iconWidth:20,iconHeight:21});e.text.setMaxSize(220,35,!0),this.add(e)},t}(Ol.Z),tb=Gn.Z.GAMEPLAY_DEFAULT,nb=tb.KEY,ib=tb.FRAME,ab=function(e){function t(t,n,i,a){var s;return(s=e.call(this,t,n,i)||this).illustration=void 0,s.createNewTournamentButton=void 0,s.payload=void 0,s.scrollerManager=void 0,s.noTournamentText=void 0,s.handleCreateTournament=(0,r.Z)(l().mark((function e(){var t,n,i,a,r,o,c;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=s.scene.game.globalScene,e.prev=1,n=s.scene,i=Rr.filterGameType,oS.clearData(),a=s.scene.player.getPlayer(),r=a.playerId,o=a.name,c={playerId:r,playerName:o,score:0,autoStartGame:!0,success:!0,image:1+Math.floor(3*Math.random()),gameType:i},t.screen.open(Os.o4.NOTIFY_SCREEN,{message:"creatingTournament",loading:!0}),e.next=10,(0,Ds.qZ)(500);case 10:return e.next=12,fc();case 12:return e.next=14,s.scene.storage.dispatch(Gr(c));case 14:return e.next=16,oS.getData();case 16:return n.gameTypeManager.switchGameType(i),s.scene.storage.dispatch(ac()),e.next=20,s.updateTournaments();case 20:n.gameplay.startNewGame(i),s.scene.screen.get(Os.o4.TOURNAMENTS_SCREEN).closeAllScreens(),rb(0),e.next=32;break;case 26:if(e.prev=26,e.t0=e.catch(1),"USER_INPUT"!==(null==e.t0?void 0:e.t0.code)){e.next=31;break}return rb(0),e.abrupt("return");case 31:t.screen.open(Os.o4.NOTIFY_SCREEN,{message:"cannotCreateTournament",duration:2e3,loading:!1});case 32:case"end":return e.stop()}}),e,null,[[1,26]])}))),s.updateTournaments=(0,r.Z)(l().mark((function e(){var t,n,i;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=(0,As.Z)(s),n=t.scrollerManager,i=n.tournamentsContainer,n.forceLoadData=!0,i.updateScrollerIdx(s.scrollerManager),e.next=6,i.updateContainer(!0);case 6:n.scroller.setEnable(!0);case 7:case"end":return e.stop()}}),e)}))),s.scrollerManager=a,s.setSize(311,280),s.createIllustration(),s.createText(),s.createButton(),s}(0,o.Z)(t,e);var n=t.prototype;return n.updateText=function(e){this.noTournamentText.setText("You have no "+(0,jg.Ds)(e)+" tournaments")},n.addBackground=function(){var e="no-tournament-block-background";if(!this.scene.textures.exists(e)){var t=this.width,n=this.height,i=this.scene.add.graphics();i.fillStyle(65280,.2),i.fillRect(0,0,t,n),i.generateTexture(e,t,n),i.destroy()}var a=this.scene.add.image(0,0,e);this.add(a)},n.createIllustration=function(){var e=new Lf(this.scene,{width:188.5,height:182,key:nb,frame:ib.NO_TOURNAMENT,symmetricType:Of.HORIZONTAL});this.add(e),this.illustration=e,Phaser.Display.Align.In.TopCenter(e,this)},n.createText=function(){var e=this.scene.make.bitmapText({font:Rc.Z.BOLD.KEY,size:this.scene.fontSize(14),text:"youHaveNoTournaments",origin:{x:.5,y:.5}}).setTint(16579837);e.setMaxSize(350,20),this.add(e),this.alignUnder(e,this.illustration),this.noTournamentText=e},n.createButton=function(){var e=this;this.createNewTournamentButton=new eb(this.scene),this.add(this.createNewTournamentButton),this.createNewTournamentButton.onClick=function(){e.handleCreateTournament()},Phaser.Display.Align.In.BottomCenter(this.createNewTournamentButton,this)},n.alignUnder=function(e,t){var n=(e.height+t.height)/2;Phaser.Display.Align.In.Center(e,t,0,n+10)},t}(Phaser.GameObjects.Container),sb=null,rb=function(e){sb&&clearTimeout(sb),sb=setTimeout((function(){window.game.globalScene.screen.close(Os.o4.NOTIFY_SCREEN)}),e)},ob=Gn.Z.DEFAULT,cb=(ob.KEY,ob.FRAME,Gn.Z.TOURNAMENT_BANNER),hb=cb.KEY,ub=cb.FRAME,lb=function(e){function t(t){var n;return(n=e.call(this,t)||this).background=void 0,n.title=void 0,n.setSize(1e3/2.88,262/2.88),n.createBackground(),n.createTitle(),n.alignComponents(),n}(0,o.Z)(t,e);var n=t.prototype;return n.createTitle=function(){this.title=this.scene.add.bitmapText(0,0,Rc.Z.BOLD_SHADOW_BLUR.KEY,"Hurry up!\nJoin the tournament\nnow!",this.scene.fontSize(19)).setLeftAlign().setOrigin(0,.5).setMaxWidth(190).setTint(14673140),this.updateTitle(function(e){void 0===e&&(e=!1);var t=new Date,n=e?Phaser.Math.RND.between(0,11):t.getMonth();return n<3?"Spring":n<6?"Summer":n<9?"Autumn":"Winter"}(!0)+" Tournament"),this.add(this.title)},n.updateTitle=function(e){e=GameCore.Utils.String.removeDiacritics(e),this.title.setText(e),this.title.setPosition(22-this.width/2,5)},n.updateBackground=function(e){var t=ub.getBanner(e);this.background.setFrame(t)},n.alignComponents=function(){Phaser.Display.Align.In.Center(this.background,this,0,1)},n.createBackground=function(){this.background=this.scene.add.image(0,0,hb,ub.getBanner(0)),this.background.setWorldSize(this.width,this.height),this.add(this.background)},t}(Phaser.GameObjects.Container),db=lb;for(var pb=Gn.Z.GAMEPLAY_DEFAULT,fb=pb.KEY,gb=pb.FRAME,mb=function(e){function t(t,n){var i;return(i=e.call(this,t)||this).createContent(),i}return(0,o.Z)(t,e),t.prototype.createContent=function(){var e=new Jl(this.scene,{iconTextPadding:8,text:"join",fontSize:22,iconKey:fb,iconFrame:gb.TOURNAMENT.IC_CUP,iconWidth:24.5,iconHeight:24.5});e.text.setMaxSize(80,35,!0),this.add(e)},t}(Phaser.GameObjects.Container),vb=mb,yb=Gn.Z.GAMEPLAY_DEFAULT,Tb=yb.KEY,Cb=yb.FRAME,Eb=function(e){function t(t,n){var i;return(i=e.call(this,t)||this).createContent(),i}return(0,o.Z)(t,e),t.prototype.createContent=function(){var e=new Jl(this.scene,{iconTextPadding:5,text:"continue",fontSize:20,iconKey:Tb,iconFrame:Cb.TOURNAMENT.IC_CUP,iconWidth:24.5,iconHeight:24.5});e.text.setMaxSize(90,35,!0),this.add(e)},t}(Phaser.GameObjects.Container),Ab=Eb,Sb=Gn.Z.GAMEPLAY_DEFAULT,bb=Sb.KEY,Ib=Sb.FRAME,wb=function(e){return e.JOIN="join",e.CONTINUE="continue",e}({}),Pb=function(e){function t(t){var n;return(n=e.call(this,t,316/2.88,128/2.88)||this)._buttonState=wb.JOIN,n.joinLabel=void 0,n.continueLabel=void 0,n.setName("JoinButton"),n.createBackground(),n.createContent(),n.playAnimation(),n}(0,o.Z)(t,e);var n=t.prototype;return n.createBackground=function(){var e=this.scene.add.image(0,0,bb,Ib.TOURNAMENT.JOIN_BUTTON);e.setWorldSize(this.width,this.height),this.add(e)},n.createContent=function(){this.joinLabel=new vb(this.scene,this.displayWidth),this.continueLabel=new Ab(this.scene,this.displayWidth),this.continueLabel.kill(),this.add([this.joinLabel,this.continueLabel])},n.playAnimation=function(){new dh.Z({targets:this.getAll(),duration:700,props:{scale:"*=1.05"}}).play()},n.switchState=function(e){if(e!==this._buttonState)switch(e){case wb.JOIN:this._buttonState=wb.JOIN,this.joinLabel.revive(),this.continueLabel.kill();break;case wb.CONTINUE:this._buttonState=wb.CONTINUE,this.joinLabel.kill(),this.continueLabel.revive()}},(0,he.Z)(t,[{key:"buttonState",get:function(){return this._buttonState}}]),t}(Ol.Z),kb=Pb,_b="This competition is over",xb="End in",Ob=Gn.Z.GAMEPLAY_DEFAULT,Lb=Ob.KEY,Rb=Ob.FRAME,Db=353/2.88,Bb=60/2.88,Mb=function(e){function t(t){var n;return(n=e.call(this,t)||this).endTime=void 0,n.countdownTimer=void 0,n.timerText=void 0,n.background=void 0,n.clockIcon=void 0,n.updateCountdown=(0,r.Z)(l().mark((function e(){var t,i,a,s;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=Date.now(),i=1e3*n.endTime-t,a=Math.round(Math.abs(i)/864e5),i<0&&(i=0),0!==i){e.next=7;break}return n.setTimerText(_b),e.abrupt("return");case 7:s="",a>=1?(s=xb+" "+a+" "+(1===a?"day":"days"),n.setTimerText(s)):(s=xb+" "+(0,Ds.F0)(Math.abs(i),!0),n.setTimerText(s,!0));case 9:case"end":return e.stop()}}),e)}))),n.setSize(Db,Bb),n.createBackground(),n.createClockIcon(),n.createTimeText(),n.createCountdownTimer(),n.alignComponents(),n}(0,o.Z)(t,e);var n=t.prototype;return n.alignComponents=function(){Phaser.Display.Align.In.Center(this.background,this)},n.createBackground=function(){this.background=this.scene.add.image(0,0,Lb,Rb.TOURNAMENT.TIME_BACKGROUND).setOrigin(0,.5),this.background.setWorldSize(this.width,this.height),this.add(this.background)},n.createClockIcon=function(){this.clockIcon=this.scene.add.image(0,0,Lb,Rb.TOURNAMENT.IC_CLOCK),this.clockIcon.setWorldSize(28/2.88,32/2.88),this.add(this.clockIcon)},n.createTimeText=function(){this.timerText=this.scene.make.bitmapText({font:Rc.Z.BOLD.KEY,size:this.scene.fontSize(14),origin:{x:0,y:.5},text:"End in 10 days"}),this.add(this.timerText)},n.createCountdownTimer=function(){var e,t=this;void 0!=this.endTime&&(0!=this.endTime?(null==(e=this.countdownTimer)||e.destroy(),this.countdownTimer=this.scene.time.addEvent({loop:!0,delay:1e3,startAt:1e3,callback:this.updateCountdown}),this.on(Phaser.GameObjects.Events.DESTROY,(function(){var e;null==(e=t.countdownTimer)||e.destroy()}))):this.setTimerText(_b))},n.setCountdown=function(e){this.endTime=e,this.createCountdownTimer()},n.getRemain=function(){if(void 0!=this.endTime){var e=Date.now(),t=1e3*this.endTime-e;return t<0?0:t}},n.setTimerText=function(e,t){void 0===t&&(t=!1),this.timerText.setText(e),e===_b?(this.setSize(Db+30,Bb),this.background.setWorldSize(this.width,this.height),this.timerText.setFontSize(this.scene.fontSize(12)),Phaser.Display.Align.In.Center(this.timerText,this.background),this.clockIcon.kill()):(this.setSize(Db,Bb),this.background.setWorldSize(this.width,this.height),this.clockIcon.revive(),t?(this.timerText.setFontSize(this.scene.fontSize(12.5)),Phaser.Display.Align.In.LeftCenter(this.clockIcon,this.background,-10,0),Phaser.Display.Align.In.LeftCenter(this.timerText,this.background,-25,1)):(this.timerText.setFontSize(this.scene.fontSize(13)),Phaser.Display.Align.In.LeftCenter(this.clockIcon,this.background,-10,0),Phaser.Display.Align.In.LeftCenter(this.timerText,this.background,-25,1)))},t}(Phaser.GameObjects.Container),Nb=Mb,Gb=Gn.Z.GAMEPLAY_DEFAULT,Fb=Gb.KEY,Zb=Gb.FRAME,Ub=function(e){function t(t,n,i){var a;return(a=e.call(this,t)||this).userText=void 0,a.setSize(n,i),a.createContent(),a}(0,o.Z)(t,e);var n=t.prototype;return n.createContent=function(){var e=this.scene.add.image(0,0,Fb,Zb.TOURNAMENT.IC_USER);e.setWorldSize(29/2.88,33/2.88);var t=this.scene.add.bitmapText(0,0,Rc.Z.BOLD.KEY,"0 Participants",this.scene.fontSize(12));this.add([e,t]);var n=12046760;e.setTint(n),t.setTint(n),Phaser.Display.Align.In.LeftCenter(e,this),Phaser.Display.Align.To.RightCenter(t,e,5,1),this.userText=t},n.updateNumberOfUser=function(e){var t=e>1?e+" Participants":e+" Participant";this.userText.setText(t)},t}(Phaser.GameObjects.Container),zb=Ub,Hb=function(e){function t(t){var n;return(n=e.call(this,t)||this).timerContainer=void 0,n.userParticipant=void 0,n.joinButton=void 0,n.setSize(1014/2.88,65.625),n.createTimeContainer(),n.createUserParticipant(),n.createJoinButton(),n.alignComponents(),n}(0,o.Z)(t,e);var n=t.prototype;return n.alignComponents=function(){Phaser.Display.Align.In.LeftCenter(this.timerContainer,this,-15,-9),Phaser.Display.Align.In.LeftCenter(this.userParticipant,this,-25,13),Phaser.Display.Align.In.RightCenter(this.joinButton,this,-10,3)},n.createTimeContainer=function(){this.timerContainer=new Nb(this.scene),this.add(this.timerContainer)},n.createUserParticipant=function(){this.userParticipant=new zb(this.scene,120,22.5),this.add(this.userParticipant)},n.createJoinButton=function(){this.joinButton=new kb(this.scene),this.add(this.joinButton)},t}(Phaser.GameObjects.Container),Wb=Hb,Yb=Gn.Z.GAMEPLAY_DEFAULT,Kb=Yb.KEY,Vb=Yb.FRAME,jb=vE.iD.MAX_LEADERS,Jb={playerId:"10",name:"???",photo:"",score:0,rank:0},Xb=[],qb=0;qb<jb;qb++)Xb.push((0,s.Z)({},Jb,{rank:qb+1}));var Qb=function(e){function t(t){var n;return(n=e.call(this,t)||this).background=void 0,n.gameIcon=void 0,n.payload=void 0,n.header=void 0,n.footer=void 0,n.setSize(1014/2.88,451/2.88),n.createHeader(),n.createBackground(),n.createFooter(),n.createGameIcon(),n.alignComponents(),n.scene.add.existing((0,As.Z)(n)),n}(0,o.Z)(t,e);var n=t.prototype;return n.createBackground=function(){this.background=this.scene.make.image({key:Kb,frame:Vb.TOURNAMENT.BLOCK_BACKGROUND}),this.background.setWorldSize(this.width,this.height),this.add(this.background)},n.createHeader=function(){this.header=new db(this.scene),this.add(this.header)},n.createFooter=function(){this.footer=new Wb(this.scene),this.add(this.footer)},n.createGameIcon=function(){this.gameIcon=this.scene.add.image(0,0,Kb,Vb.TOURNAMENT.IC_KLONDIKE),this.gameIcon.setWorldSize(94/2.88,94/2.88),this.add(this.gameIcon)},n.setGameIcon=function(e){switch(e){case is.Z.KLONDIKE:this.gameIcon.setFrame(Vb.TOURNAMENT.IC_KLONDIKE);break;case is.Z.FREE_CELL:this.gameIcon.setFrame(Vb.TOURNAMENT.IC_FREECELL);break;default:this.gameIcon.setFrame(Vb.TOURNAMENT.IC_SPIDER)}},n.alignComponents=function(){Phaser.Display.Align.In.Center(this.background,this,0,2.25),Phaser.Display.Align.In.TopCenter(this.header,this,0,-4),Phaser.Display.Align.In.BottomCenter(this.footer,this,0,0),Phaser.Display.Align.In.TopLeft(this.gameIcon,this,5,3)},t}(Phaser.GameObjects.Container);function $b(e){var t=0;try{t=(9301*cp()(String(e))+49297)%vE.Wg.NUMBER_OF_BANNER}catch(n){}return t}var eI=Gn.Z.GAMEPLAY_DEFAULT,tI=eI.KEY,nI=eI.FRAME,iI=function(e){function t(t){var n;return(n=e.call(this,t)||this).handleJoinTournament=function(){var e=(0,r.Z)(l().mark((function e(t){var i,a,s,r,o,c,h,u,d,p,f,g;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.payload){e.next=2;break}return e.abrupt("return");case 2:if(oS.setData(n.payload),o=n.payload.id,c=n.payload.endTime,h=(null==(i=n.payload.payload)?void 0:i.leaderboardId)||"",u=(null==(a=n.payload.payload)?void 0:a.level)||1,d=null==(s=n.payload.payload)?void 0:s.gameType,p=null==(r=n.payload.payload)?void 0:r.options,f=n.scene,e.prev=11,t){e.next=15;break}return e.next=15,n.scene.facebook.tournament.joinAsync(o.toString());case 15:n.scene.storage.dispatch(Nr(o.toString(),h,d)),f.gameTypeManager.switchGameType(d),n.scene.storage.dispatch(ac()),g={leaderboardId:h,endTime:c,level:u,gameType:d},n.scene.player.joinTournament(g),null==f||f.gameplay.startNewGame(d,p),n.scene.screen.get(Os.o4.TOURNAMENTS_SCREEN).closeAllScreens(),e.next=32;break;case 25:if(e.prev=25,e.t0=e.catch(11),oS.clearData(),"USER_INPUT"!==(null==e.t0?void 0:e.t0.code)){e.next=31;break}return e.abrupt("return");case 31:throw e.t0;case 32:case"end":return e.stop()}}),e,null,[[11,25]])})));return function(t){return e.apply(this,arguments)}}(),n.createDebugButton(),n.handleInput(),t.events.on(Phaser.Scenes.Events.UPDATE,(function(){var e;null!=(e=t.screen.get(Os.o4.TOURNAMENTS_SCREEN))&&e.visible&&n.active&&n.updateJoinButton()})),n}(0,o.Z)(t,e);var n=t.prototype;return n.updateInfo=function(){var e=(0,r.Z)(l().mark((function e(t){var n,i,a,s,r,o,c,h;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.payload=t,this.payload.idRequest=(new Date).getTime(),r=$b(t.id),o=void 0==(null==(n=t.payload)?void 0:n.image)?r:null==(i=t.payload)?void 0:i.image,this.header.updateBackground(o),this.header.updateTitle(t.title),this.updateTimer(t.endTime),this.setGameIcon(null==(a=t.payload)?void 0:a.gameType),c=this.scene.screen.get(Os.o4.TOURNAMENTS_SCREEN),h=c.tournamentsContainer.getAmountPlayer((null==(s=t.payload)?void 0:s.leaderboardId)||""),this.footer.userParticipant.updateNumberOfUser(h);case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.updateTimer=function(e){this.footer.timerContainer.setCountdown(e)},n.createDebugButton=function(){var e=this;if(GameCore.Utils.Valid.isDebugger()){var t=new Ol.Z(this.scene,20,20),n=this.scene.add.image(0,0,tI,nI.IC_BG_OFF);n.setWorldSize(t.width,t.height);var i=this.scene.make.bitmapText({font:Rc.Z.PRIMARY.KEY,size:this.scene.fontSize(10),text:"PL",origin:{x:.5,y:.5}});i.setCenterAlign(),t.add([n,i]),this.add(t),Phaser.Display.Align.In.TopLeft(t,this,10,-90),t.onClick=function(){if(!e.isCurrentTournamentBeingPlayed()){var t=e.scene.storage.getState();Cr(t)}}}},n.handleInput=function(){var e=this,t=this.footer.joinButton,n=this.scene;t.onClick=function(){t.buttonState===wb.CONTINUE?n.gameplay.boardGame.isGameOver()?e.joinTournament(!0):e.scene.screen.close(Os.o4.TOURNAMENTS_SCREEN):e.joinTournament(!1),e.updateTextPlay()}},n.joinTournament=function(){var e=(0,r.Z)(l().mark((function e(t){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,this.scene.game.globalScene.screen.open(Os.o4.NOTIFY_SCREEN,{message:"Joining tournament...",loading:!0}),e.next=4,(0,Ds.qZ)(500);case 4:return e.next=6,this.handleJoinTournament(t);case 6:sI(100),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),window.game.globalScene.screen.open(Os.o4.NOTIFY_SCREEN,{message:"Sorry, you cannot join at this time.",duration:3e3,loading:!1});case 12:return e.prev=12,this.updateTextPlay(),e.finish(12);case 15:case"end":return e.stop()}}),e,this,[[0,9,12,15]])})));return function(t){return e.apply(this,arguments)}}(),n.updateJoinButton=function(){var e=this.footer.joinButton;0===this.footer.timerContainer.getRemain()?e.setDisabled(!0):e.setDisabled(!1),this.updateTextPlay()},n.isThisTournamentIdIdenticalToCurrentTournament=function(){var e=this.scene.storage.getState(),t=Cr(e);return GameCore.Utils.Valid.isNumber(t)?t===this.payload.id:!!GameCore.Utils.Valid.isString(t)&&t===""+this.payload.id},n.isCurrentTournamentBeingPlayed=function(){return this.isThisTournamentIdIdenticalToCurrentTournament()&&Qo.instance.isTournamentMode()},n.updateTextPlay=function(){this.footer.joinButton.switchState(this.isCurrentTournamentBeingPlayed()?wb.CONTINUE:wb.JOIN)},t}(Qb),aI=null,sI=function(e){aI&&clearTimeout(aI),aI=setTimeout((function(){window.game.globalScene.screen.close(Os.o4.NOTIFY_SCREEN)}),e)},rI=Gn.Z.GAMEPLAY_DEFAULT,oI=rI.KEY,cI=rI.FRAME,hI=function(e){function t(t,n){var i;return(i=e.call(this,t)||this).background=void 0,i.leftIcon=void 0,i.rightIcon=void 0,i.title=void 0,i.setSize(992/2.88,111/2.88),i.createBackground(),i.createIcons(),i.createTitle(n),i.align(),i}(0,o.Z)(t,e);var n=t.prototype;return n.createBackground=function(){this.background=new Lf(this.scene,{width:this.width,height:this.height,key:oI,frame:cI.TOURNAMENT.RIBBON}),this.add(this.background)},n.createIcons=function(){this.leftIcon=this.scene.add.image(0,0,oI,cI.TOURNAMENT.RECTANGLE),this.leftIcon.setWorldSize(30/2.88,31/2.88),this.rightIcon=this.scene.add.image(0,0,oI,cI.TOURNAMENT.RECTANGLE),this.rightIcon.setWorldSize(30/2.88,31/2.88),this.add([this.leftIcon,this.rightIcon])},n.createTitle=function(e){this.title=this.scene.make.bitmapText({font:Rc.Z.BOLD_SHADOW_BLUR.KEY,size:this.scene.fontSize(16),text:e+" TOURNAMENTS",origin:{x:.5,y:.5}}),this.title.setTint(16449487,16449487,15913325,15913325),this.add(this.title)},n.align=function(){Phaser.Display.Align.In.Center(this.title,this,0,1),Phaser.Display.Align.To.RightCenter(this.rightIcon,this.title,5,-1.5),Phaser.Display.Align.To.LeftCenter(this.leftIcon,this.title,5,-1.5)},t}(Phaser.GameObjects.Container),uI=hI,lI=function(){function e(e,t,n){this.scene=void 0,this.name=void 0,this.scroller=void 0,this.tournamentsContainer=void 0,this.noTournamentBlock=void 0,this.loadData=!1,this.debugNoTournament=!1,this.scene=e.scene,this.tournamentsContainer=e,this.scroller=t,this.name=n||"",this.createNoTournamentBlock()}var t=e.prototype;return t.createNoTournamentBlock=function(){this.noTournamentBlock=new ab(this.scene,0,0,this),this.tournamentsContainer.add(this.noTournamentBlock),this.tournamentsContainer.bringToTop(this.noTournamentBlock),this.noTournamentBlock.kill(),Phaser.Display.Align.In.Center(this.noTournamentBlock,this.scroller,0,-40),this.scene.time.delayedCall(3e3,(function(){}))},t.setMask=function(e){this.scroller.setMask(e),this.noTournamentBlock.setMask(e)},t.updateScroller=function(){var e,t=this.getListData("global"),n=this.getListData("friend"),i=this.getListData("your");if(x()(e=[]).call(e,t,n,i).length<1)return this.scroller.setEnable(!1),this.noTournamentBlock.updateText(this.tournamentsContainer.gameType),this.noTournamentBlock.revive(),void this.scroller.clearItem();this.scroller.clearItem(),this.noTournamentBlock.kill(),this.scroller.setEnable(!0);var a=-this.scroller.height/2;a=this.addBlocks(t,a,"GLOBAL"),a=this.addBlocks(n,a,"FRIENDS"),a=this.addBlocks(i,a,"YOUR"),this.scroller.onTouchEnd()},t.addBlocks=function(e,t,n){if(e.length<=0)return t;var i=new uI(this.scene,n);t+=i.height/2+5,i.setPosition(0,t),t+=i.height/2+10;for(var a=this.createBlocks(e),s=0;s<a.length;s++)t+=a[s].height/2,a[s].setPosition(0,t),t+=a[s].height/2+10;return this.scroller.addItem(i),this.scroller.addItems(a),t},t.createBlocks=function(e){var t=this;return De()(e).call(e,(function(e){var n=new iI(t.scene);return n.updateInfo(e),n}))},t.parseResponsesIntoTournaments=function(e){var t=[],n=[];if("friend"===e)n=this.filterFriendTournament();else n=this.filterYourTournament();return n.forEach((function(e){try{var n=e.getID(),i=e.getPayload();if(!i)return;var a=JSON.parse(i),s=a.playerName;if(!a.leaderboardId)throw new XS(null,a);var r={id:n,title:e.getTitle()||s+"'s Tournament",payload:a,endTime:e.getEndTime(),contextID:e.getContextID()};t.push(r)}catch(o){}})),t},(0,he.Z)(e,[{key:"forceLoadData",get:function(){return this.loadData},set:function(e){this.loadData=e}},{key:"forceNoTournament",get:function(){return this.debugNoTournament&&!this.loadData},set:function(e){this.debugNoTournament=e}}]),e}(),dI=function(e){function t(t,n,i){return e.call(this,t,n,i)||this}(0,o.Z)(t,e);var n=t.prototype;return n.getListData=function(e){return this.forceNoTournament?[]:(t="global"==e?this.tournamentsContainer.getWorldTournamentsData():this.parseResponsesIntoTournaments(e),this.filterByCurrentGameType(t));var t},n.filterByCurrentGameType=function(e){return Le()(e).call(e,(function(e){var t;return(null==(t=e.payload)?void 0:t.gameType)==Rr.filterGameType}))},n.filterFriendTournament=function(){var e=this.scene.player.getPlayerId(),t=this.tournamentsContainer.getTournaments();return Le()(t).call(t,(function(t){var n=t.getPayload();if(!n)return!1;try{var i=JSON.parse(n);return i.playerId&&e!=i.playerId}catch(a){return!1}}))},n.filterYourTournament=function(){var e=this.scene.player.getPlayerId(),t=this.tournamentsContainer.getTournaments(),n=Le()(t).call(t,(function(t){var n=t.getPayload();if(!n)return!1;try{var i=JSON.parse(n);return i.playerId&&e===i.playerId}catch(a){return!1}}));return n},t}(lI),pI=dI,fI=n(666),gI=Gn.Z.GAMEPLAY_DEFAULT,mI=gI.KEY,vI=gI.FRAME,yI=function(e){function t(t){var n;return(n=e.call(this,t)||this).medalNo123=void 0,n.customizedMedal=void 0,n.rankLabel=void 0,n.rank=1,n.setSize(55/2.88,89/2.88),n.createMedal123(),n.createCustomizedMedal(),n.createRankLabel(),n}(0,o.Z)(t,e);var n=t.prototype;return n.getRank=function(){return this.rank},n.setRank=function(e){var t=function(e){return e>99?"99+":0===e?"?":e.toString()}(e);switch(this.rank=e,this.rankLabel.setText(t),this.medalNo123.kill(),this.customizedMedal.kill(),t){case"1":this.medalNo123.revive(),this.medalNo123.setFrame(vI.TOURNAMENT.BADGE_1ST).setWorldSize(53/2.88,86/2.88),this.rankLabel.kill();break;case"2":this.medalNo123.revive(),this.medalNo123.setFrame(vI.TOURNAMENT.BADGE_2ND).setWorldSize(55/2.88,89/2.88),this.rankLabel.kill();break;case"3":this.medalNo123.revive(),this.medalNo123.setFrame(vI.TOURNAMENT.BADGE_3RD).setWorldSize(55/2.88,89/2.88),this.rankLabel.kill();break;default:this.customizedMedal.revive(),this.rankLabel.revive()}},n.createMedal123=function(){this.medalNo123=this.scene.add.image(0,0,mI,vI.TOURNAMENT.BADGE_1ST),this.medalNo123.setWorldSize(53/2.88,86/2.88),this.add(this.medalNo123)},n.createCustomizedMedal=function(){this.customizedMedal=this.scene.add.image(0,0,mI,vI.TOURNAMENT.IC_NORMAL_BIG),this.customizedMedal.setWorldSize(67/2.88,69/2.88),this.add(this.customizedMedal)},n.createRankLabel=function(){this.rankLabel=this.scene.make.bitmapText({font:Rc.Z.BOLD.KEY,size:this.scene.fontSize(10),origin:{x:.5,y:.5},text:""+this.rank}).setTint(1525537),this.add(this.rankLabel)},t}(Phaser.GameObjects.Container);var TI=yI,CI=Gn.Z.GAMEPLAY_DEFAULT,EI=CI.KEY,AI=CI.FRAME,SI=function(e){function t(t){var n;return(n=e.call(this,t)||this).background=void 0,n.medal=void 0,n.icon=void 0,n.text=void 0,n.setSize(244/2.88,370/2.88),n.createContents(),n}(0,o.Z)(t,e);var n=t.prototype;return n.updateContent=function(e,t,n){this.medal.setRank(e),this.text.setText("x"+t),"hint"==n?(this.icon.setFrame(AI.TOURNAMENT.IC_HINT_GLOW),this.icon.setWorldSize(309/2.88,336/2.88)):(this.icon.setFrame(AI.TOURNAMENT.IC_UNDO_GLOW),this.icon.setWorldSize(330/2.88,300/2.88))},n.createContents=function(){this.background=new Lf(this.scene,{width:this.width,height:this.height,key:EI,frame:AI.TOURNAMENT.AWARDS_BOARD}),this.medal=new TI(this.scene),this.icon=this.scene.add.image(0,0,EI,AI.TOURNAMENT.IC_HINT_GLOW),this.icon.setWorldSize(309/2.88,336/2.88),this.text=this.scene.add.bitmapText(0,0,Rc.Z.BOLD.KEY,"x5",this.scene.fontSize(17)).setOrigin(.5,.5),this.add([this.background,this.medal,this.icon,this.text]),Phaser.Display.Align.In.TopLeft(this.medal,this,-8,1),Phaser.Display.Align.In.Center(this.icon,this,0,-15),Phaser.Display.Align.In.BottomCenter(this.text,this,0,-11)},t}(Phaser.GameObjects.Container),bI=SI,II=function(e){function t(t,n,i,a,s,r,o,c){return void 0===s&&(s=0),void 0===r&&(r=0),void 0===o&&(o=3),void 0===c&&(c=[]),e.call(this,t,n,i,a,s,r,o,c)||this}return(0,o.Z)(t,e),t.prototype.addItems=function(){var e=new bI(this.scene);e.updateContent(1,5,"hint");var t=new bI(this.scene);t.updateContent(3,2,"undo"),this.addItem(e),this.addItem(t)},t}(TT),wI=II,PI=Gn.Z.GAMEPLAY_DEFAULT,kI=(PI.KEY,PI.FRAME,function(e){function t(t,n,i,a){var s;return(s=e.call(this,t,i,a)||this).options=void 0,s.button=void 0,s.getBackgroundByStatus=function(){var e=s.options,t=e.enable,n=e.backgroundOn,i=e.backgroundOff;return t?n:i},s.init(n),s.updateStatus(n),s}(0,o.Z)(t,e);var n=t.prototype;return n.processCallback=function(e){var t=this.options.enable;this.updateStatus(!t),e(!t)},n.updateStatus=function(e){this.options.enable=e;var t=this.getBackgroundByStatus();this.button.setFrame(t)},n.logButtonEvent=function(){var e=this.getParentName(),t=this.name,n=!this.options.enable;this.scene.analytics.event(Nn._.BUTTON_CLICK,{button_name:t,screen_name:e,enable:n})},t}(Ol.Z)),_I=kI,xI=Gn.Z.GAMEPLAY_DEFAULT,OI=xI.KEY,LI=xI.FRAME,RI=function(e){function t(t,n,i,a){return e.call(this,t,n,i,a)||this}return(0,o.Z)(t,e),t.prototype.init=function(e){this.button=this.scene.add.image(0,0,OI,LI.MENU.ICO_OFFLINE),this.button.setWorldSize(50/2.88,50/2.88),this.add(this.button),Phaser.Display.Align.In.RightCenter(this.button,this,-15,0),this.options={enable:e,backgroundOn:LI.MENU.ICO_ONLINE,backgroundOff:LI.MENU.ICO_OFFLINE}},t}(_I),DI=RI,BI=function(e){function t(t,n){var i;return(i=e.call(this,t)||this).bg=void 0,i.scroller=void 0,i.toggleButtonMap=new(ne()),i.scene=void 0,i.menu=void 0,i.separateNodes=[],i.handleTournamentButtonClick=function(){i.menu.parentScreenKey==Os.o4.TOURNAMENTS_SCREEN?i.menu.close():(i.menu.close(),i.scene.screen.open(Os.o4.TOURNAMENTS_SCREEN),i.scene.time.delayedCall(300,(function(){i.scene.screen.close(i.menu.parentScreenKey)})))},i.handleJourneyButtonClick=function(){i.menu.parentScreenKey==Os.o4.JOURNEY_SCREEN?i.menu.close():(i.openLazyScreen(Os.o4.JOURNEY_SCREEN),i.scene.time.delayedCall(300,(function(){i.scene.screen.close(i.menu.parentScreenKey)})))},i.handleGameOptionsButtonClick=function(){i.menu.close(),i.scene.screen.open(Os.o4.SETTINGS_SCREEN)},i.handleFollowPageButtonClick=function(){},i.handleJoinGroupButtonClick=function(){},i.handleStatisticsButtonClick=function(){i.menu.close(),i.scene.screen.open(Os.o4.GAME_STATS_SCREEN)},i.waitingForScreenLoaded=function(){var e=(0,r.Z)(l().mark((function e(t){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i.scene.screen.get(t)){e.next=5;break}return e.next=3,(0,Ds.qZ)(100);case 3:e.next=0;break;case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),i.openLazyScreen=function(e){var t=function(){i.menu.close(),i.scene.screen.open(e)};i.scene.screen.get(e)?t():(i.scene.game.globalScene.screen.open(Os.o4.NOTIFY_SCREEN,{message:"Loading...",duration:0,loading:!0}),i.waitingForScreenLoaded(e).then((function(){i.scene.game.globalScene.screen.close(Os.o4.NOTIFY_SCREEN),t()})))},i.scene=t,i.menu=n,i.init(),i.createBackground(),i.createScroller(),i.createMainButtons(),t.add.existing((0,As.Z)(i)),i}(0,o.Z)(t,e);var n=t.prototype;return n.handleGameTypeClick=function(e){this.updateButtonStatus(e),this.menu.switchGameType(e),this.menu.close()},n.updateButtonStatus=function(e){[this.toggleButtonMap.get(is.Z.KLONDIKE),this.toggleButtonMap.get(is.Z.FREE_CELL),this.toggleButtonMap.get(is.Z.SPIDER)].forEach((function(t){t&&(t.name==e?(t.updateStatus(!0),t.disableInteractive()):(t.updateStatus(!1),t.setInteractive()))}))},n.updateToggleButtons=function(){this.updateButtonStatus(Rr.filterGameType)},n.resetScroller=function(){this.scroller.gotoTop()},n.hideSeparateNodes=function(){this.separateNodes.forEach((function(e){return e.setVisible(!1)}))},n.unhideSeparateNodes=function(){this.separateNodes.forEach((function(e){return e.setVisible(!0)}))},t}(Phaser.GameObjects.Container),MI=BI,NI=Gn.Z.GAMEPLAY_DEFAULT,GI=NI.KEY,FI=NI.FRAME,ZI=23,UI=45,zI=17,HI=function(e){function t(t,n){return e.call(this,t,n)||this}(0,o.Z)(t,e);var n=t.prototype;return n.init=function(){var e=this.scene.ads.getBannerHeight(),t=this.scene.world.getWorldSize().height,n=t-(e+this.menu.getFooterHeight());this.setSize(766/2.88,n),this.y=-(t-n)/2},n.createBackground=function(){var e=this.scene.add.image(0,0,GI,FI.BLANK).setTint(0).setAlpha(.95,.95,1,1).setInteractive();e.setWorldSize(this.width,this.height),this.add(e),this.bg=e;var t=this.scene.add.image(0,0,GI,FI.MENU.LINE);t.setWorldSize(2,this.bg.height),this.add(t),Phaser.Display.Align.In.RightCenter(t,e,1)},n.createScroller=function(){this.scroller=new fI.Z(this.scene,{width:this.bg.width,height:this.bg.height,marginTop:20}),this.scroller.createScrollerBar(1,0,{key:GI,frame:FI.MENU.SCROLLER,width:3,height:674}),this.scroller.scrollerBar&&(this.scroller.scrollerBar.x+=2,this.scroller.scrollerBar.imageBottom.setTint(14540253),this.scroller.scrollerBar.imageTop.setTint(14540253)),this.add(this.scroller)},n.createMainButtons=function(){for(var e=this.scene.player.getPlayerSettings().gameType,t=void 0===e?"klondike":e,n=[this.createGameTypeToggleButton(is.Z.KLONDIKE,"Klondike","klondike"==t,FI.MENU.ICO_KLONDIKE_BLUE,86/2.88,44/2.88),this.createGameTypeToggleButton(is.Z.SPIDER,"Spider","spider"==t,FI.MENU.ICO_SPIDER_PURPLE,65/2.88,75/2.88),this.createGameTypeToggleButton(is.Z.FREE_CELL,"FreeCell","freecell"==t,FI.MENU.ICO_FREECELL_RED,21.875,56/2.88),this.createSeparateNode(),this.createJourneyButton(),this.createSeparateNode(),this.createGameOptionsButton(),this.createThemeButton(),this.createStatisticsButton()],i=n[0].height/2-this.scroller.height/2,a=0;a<n.length;a++)n[a].setPosition(0,i),n[a+1]&&(i+=n[a].height);this.scroller.addItems(n),this.scroller.setEnable(!0)},n.createGameTypeToggleButton=function(e,t,n,i,a,s){var r=this;void 0===a&&(a=24),void 0===s&&(s=24);var o=new DI(this.scene,n,this.width,UI);this.toggleButtonMap.set(e,o),o.setName(e),o.onClick=function(t){r.handleGameTypeClick(e)};var c=this.scene.make.bitmapText({font:Rc.Z.PRIMARY.KEY,size:this.scene.fontSize(zI),text:t,origin:{x:.5,y:.5}}),h=this.scene.add.image(0,0,GI,i);return h.setWorldSize(a,s),c.setTint(16777215),o.add([c,h]),Phaser.Display.Align.In.Center(h,o,-o.width/2+ZI,0),Phaser.Display.Align.In.LeftCenter(c,o,-44),e==is.Z.KLONDIKE&&(h.y-=1.5),e==is.Z.SPIDER&&(h.x-=2),e==is.Z.FREE_CELL&&(h.x-=2,h.y-=2),o},n.createSeparateNode=function(){var e=this.scene.add.container(0,0);e.setSize(this.width,31.5);var t=this.scene.add.image(0,0,GI,FI.BLANK).setTint(0).setAlpha(.7);return t.setWorldSize(this.width-5,12.5),e.setName("separateNode"),e.add([t]),e},n.createTournamentsButton=function(){var e=new Ol.Z(this.scene,this.width,UI);e.setName("Tournaments"),e.onClick=this.handleTournamentButtonClick;var t=this.scene.make.bitmapText({font:Rc.Z.PRIMARY.KEY,size:this.scene.fontSize(zI),text:"Tournaments",origin:{x:.5,y:.5}});t.setTint(16777215);var n=this.scene.add.image(0,0,GI,FI.MENU.ICO_TOUR);n.setWorldSize(21.875,62/2.88);var i=this.scene.add.image(0,0,GI,FI.MENU.BTN_EXPAND);return i.setWorldSize(34/2.88,59/2.88),Phaser.Display.Align.In.Center(n,e,-e.width/2+ZI,0),Phaser.Display.Align.In.LeftCenter(t,e,-44),Phaser.Display.Align.In.RightCenter(i,e,-15),e.add([t,n,i]),e},n.createJourneyButton=function(){var e=new Ol.Z(this.scene,this.width,UI);e.setName("Journey"),e.onClick=this.handleJourneyButtonClick;var t=this.scene.make.bitmapText({font:Rc.Z.PRIMARY.KEY,size:this.scene.fontSize(zI),text:"Journey",origin:{x:.5,y:.5}});t.setTint(16777215);var n=this.scene.add.image(0,0,GI,FI.MENU.ICO_JOURNEY);n.setWorldSize(56/2.88,65/2.88);var i=this.scene.add.image(0,0,GI,FI.MENU.BTN_EXPAND);return i.setWorldSize(34/2.88,59/2.88),Phaser.Display.Align.In.Center(n,e,-e.width/2+ZI,-1),Phaser.Display.Align.In.LeftCenter(t,e,-44),Phaser.Display.Align.In.RightCenter(i,e,-15),e.add([t,n,i]),e},n.createThemeButton=function(){var e=this,t=new Ol.Z(this.scene,this.width,UI);t.setName("Theme"),t.onClick=function(){e.openLazyScreen(Os.o4.THEME_SCREEN)};var n=this.scene.make.bitmapText({font:Rc.Z.PRIMARY.KEY,size:this.scene.fontSize(zI),text:"Theme",origin:{x:.5,y:.5}});n.setTint(16777215);var i=this.scene.add.image(0,0,GI,FI.MENU.ICO_THEME);i.setWorldSize(60/2.88,58/2.88);var a=this.scene.add.image(0,0,GI,FI.MENU.BTN_EXPAND);return a.setWorldSize(34/2.88,59/2.88),Phaser.Display.Align.In.Center(i,t,-t.width/2+ZI,-1),Phaser.Display.Align.In.LeftCenter(n,t,-44),Phaser.Display.Align.In.RightCenter(a,t,-15),t.add([n,i,a]),t},n.createGameOptionsButton=function(){var e=new Ol.Z(this.scene,this.width,UI);e.setName("GameOptions"),e.onClick=this.handleGameOptionsButtonClick;var t=this.scene.make.bitmapText({font:Rc.Z.PRIMARY.KEY,size:this.scene.fontSize(zI),text:"Game Options",origin:{x:.5,y:.5}});t.setTint(16777215);var n=this.scene.add.image(0,0,GI,FI.BLANK).setTint(16777215,16777215,5723991,5723991).setAlpha(.12);n.setWorldSize(this.width,155/2.88);var i=this.scene.add.image(0,0,GI,FI.MENU.ICO_SETTINGS);i.setWorldSize(60/2.88,62/2.88);var a=this.scene.add.image(0,0,GI,FI.MENU.BTN_EXPAND);return a.setWorldSize(34/2.88,59/2.88),Phaser.Display.Align.In.Center(i,e,-e.width/2+ZI,0),Phaser.Display.Align.In.LeftCenter(t,e,-44,2),Phaser.Display.Align.In.RightCenter(a,e,-15),e.add([n,t,i,a]),e},n.createInviteButton=function(){var e=new Ol.Z(this.scene,this.width,UI);e.setName("Invite");var t=this.scene.make.bitmapText({font:Rc.Z.PRIMARY.KEY,size:this.scene.fontSize(zI),text:"Invite Friends",origin:{x:.5,y:.5}});t.setTint(16777215);var n=this.scene.add.image(0,0,GI,FI.IC_INVITE);n.setWorldSize(34*.8,28*.8);var i=this.scene.add.image(0,0,GI,FI.IC_NEXT);return i.setWorldSize(14.5,24),e.add([t,n,i]),Phaser.Display.Align.In.Center(n,e,-e.width/2+ZI+4,0),Phaser.Display.Align.In.LeftCenter(t,e,-44),Phaser.Display.Align.In.RightCenter(i,e,-15),e},n.createFollowPageButton=function(){var e=new Ol.Z(this.scene,this.width,UI);e.setName("FollowPage"),e.onClick=this.handleFollowPageButtonClick;var t=this.scene.make.bitmapText({font:Rc.Z.PRIMARY.KEY,size:this.scene.fontSize(zI),text:"Follow Our Page",origin:{x:.5,y:.5}});t.setTint(16777215);var n=this.scene.add.image(0,0,GI,FI.IC_FOLLOW);n.setWorldSize(20.8,30.5*.8);var i=this.scene.add.image(0,0,GI,FI.IC_NEXT);return i.setWorldSize(34/2.88,59/2.88),Phaser.Display.Align.In.Center(n,e,-e.width/2+ZI,0),Phaser.Display.Align.In.LeftCenter(t,e,-44),Phaser.Display.Align.In.RightCenter(i,e,-15),e.add([t,n,i]),e},n.createJoinGroupButton=function(){var e=new Ol.Z(this.scene,this.width,UI);e.setName("JoinGroup"),e.onClick=this.handleJoinGroupButtonClick;var t=this.scene.make.bitmapText({font:Rc.Z.PRIMARY.KEY,size:this.scene.fontSize(zI),text:"Join Group",origin:{x:.5,y:.5}});t.setTint(16777215);var n=this.scene.add.image(0,0,GI,FI.IC_GROUP);n.setWorldSize(27.6,18.8);var i=this.scene.add.image(0,0,GI,FI.IC_NEXT);return i.setWorldSize(34/2.88,59/2.88),Phaser.Display.Align.In.Center(n,e,-e.width/2+ZI,0),Phaser.Display.Align.In.LeftCenter(t,e,-44),Phaser.Display.Align.In.RightCenter(i,e,-15),e.add([t,n,i]),e},n.createStatisticsButton=function(){var e=new Ol.Z(this.scene,this.width,UI);e.setName("Statistics"),e.onClick=this.handleStatisticsButtonClick;var t=this.scene.make.bitmapText({font:Rc.Z.PRIMARY.KEY,size:this.scene.fontSize(zI),text:"Statistics",origin:{x:.5,y:.5}});t.setTint(16777215);var n=this.scene.add.image(0,0,GI,FI.MENU.ICO_STATS);n.setWorldSize(60/2.88,58/2.88);var i=this.scene.add.image(0,0,GI,FI.IC_NEXT);return i.setWorldSize(14.5,24),Phaser.Display.Align.In.Center(n,e,-e.width/2+ZI,-1.5),Phaser.Display.Align.In.LeftCenter(t,e,-44),Phaser.Display.Align.In.RightCenter(i,e,-15),e.add([t,n,i]),e},t}(MI),WI=HI,YI=function(e){function t(t,n){var i;(i=e.call(this,t)||this).slideInAnimation=void 0,i.slideOutAnimation=void 0,i.container=void 0,i.behindMenuOverlayZone=void 0,i.menuOverlay=void 0,i.scene=void 0,i.isOpened=!1,i.footerOverlayZone=void 0,i.parentScreenKey="",i.scene=t,i.footerOverlayZone=n;var a=i.scene.world.getWorldSize(),s=a.width,r=a.height;return i.setSize(s,r),i.behindMenuOverlayZone=i.scene.add.zone(0,0,i.width,i.height).setInteractive(),i.menuOverlay=i.scene.add.zone(0,0,i.width,i.height),i.createMenuContainer(),i.add([i.behindMenuOverlayZone,i.container,i.menuOverlay]),i.scene.add.existing((0,As.Z)(i)),i.kill(),i}(0,o.Z)(t,e);var n=t.prototype;return n.setContainerInteractive=function(e){e?this.menuOverlay.disableInteractive():this.menuOverlay.setInteractive()},n.open=function(){if(!this.isOpened){this.scene.footer.setDepth(Dn.Z.FOOTER_DEPTH_ACTIVE);var e=this.scene.gameplay.boardGame;e.boardState===ku.PLAYING&&(e.boardState=ku.IDLE),this.isOpened=!0,this.revive(),this.footerOverlayZone.setInteractive(),this.behindMenuOverlayZone.setInteractive(),this.setContainerInteractive(!1),this.runOpenAnimation(),this.updateSettings(),this.container.resetScroller()}},n.updateSettings=function(){this.container.updateToggleButtons()},n.close=function(){this.footerOverlayZone.removeAllListeners(),this.behindMenuOverlayZone.removeAllListeners(),this.setContainerInteractive(!1),this.runCloseAnimation()},n.onOpenAnimationComplete=function(){var e=this;this.behindMenuOverlayZone.once(Phaser.Input.Events.POINTER_DOWN,(function(){e.close()})),this.footerOverlayZone.once(Phaser.Input.Events.POINTER_DOWN,(function(){e.close()})),this.setContainerInteractive(!0)},n.onCloseAnimationComplete=function(){this.kill(),this.isOpened=!1,this.behindMenuOverlayZone.disableInteractive(),this.footerOverlayZone.disableInteractive(),this.scene.footer.setDepth(Dn.Z.FOOTER_DEPTH_NORMAL)},n.getFooterHeight=function(){return this.footerOverlayZone.height},t}(Phaser.GameObjects.Container),KI=YI,VI=function(e){function t(t,n){return e.call(this,t,n)||this}(0,o.Z)(t,e);var n=t.prototype;return n.createMenuContainer=function(){this.container=new WI(this.scene,this)},n.runOpenAnimation=function(){var e,t=this;this.scene.audio.playSound(Ls.Z.POPUP_SHOW),null==(e=this.slideInAnimation)||e.remove();var n=-(this.scene.world.getWorldSize().width-this.container.width)/2;this.slideInAnimation=this.scene.tweens.add({targets:[this.container],props:{x:{from:n-this.container.width,to:n,ease:Phaser.Math.Easing.Sine.Out}},duration:300,onComplete:function(){t.onOpenAnimationComplete()}})},n.runCloseAnimation=function(){var e,t=this;this.scene.audio.playSound(Ls.Z.POPUP_OFF);var n=-(this.scene.world.getWorldSize().width-this.container.width)/2;null==(e=this.slideOutAnimation)||e.remove(),this.slideOutAnimation=this.scene.tweens.add({targets:[this.container],props:{x:{from:n,to:n-this.container.width,ease:Phaser.Math.Easing.Sine.Out}},duration:300,onComplete:function(){t.onCloseAnimationComplete()}})},t}(KI),jI=VI,JI=function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).parentScreenKey=Os.o4.TOURNAMENTS_SCREEN,i}return(0,o.Z)(t,e),t.prototype.switchGameType=function(e){Rr.filterGameType=e,this.scene.screen.get(this.parentScreenKey).refresh(!1)},t}(jI),XI=JI,qI=function(e){function t(t,n){var i;return(i=e.call(this,t,0,0,n.width,n.height)||this).setOrigin(.5,.5).setDepth(Dn.Z.FOOTER_OVERLAY).setPosition(n.x,n.y).setActive(!1).disableInteractive(),t.add.existing((0,As.Z)(i)),i}return(0,o.Z)(t,e),t}(Phaser.GameObjects.Zone),QI=qI,$I=vE.iD.SCREEN_WIDTH,ew=vE.iD.HEADER,tw=(vE.Gc.AWARDS,vE.Gc.TOURNAMENTS),nw=function(e){function t(t){var n;return(n=e.call(this,t)||this).header=void 0,n.footer=void 0,n.scrollers=[],n.scrollerManagers=[],n.currentIdx=0,n.tournaments=[],n.worldTournament=[],n.loading=void 0,n.gameType=void 0,n.menu=void 0,n.footerOverlayZone=void 0,n.userParticipantMap=new(ne()),n.handleCreateTournament=function(){0!=n.scrollerManagers.length&&n.scrollerManagers[0].noTournamentBlock.handleCreateTournament()},n.updateContainer=function(){var e=(0,r.Z)(l().mark((function e(t){var i,a;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=0,n.startLoading(),n.scrollers.forEach((function(e,t){e.setEnable(!1),e.kill()})),!t){e.next=10;break}return e.next=6,n.loadTournament();case 6:return e.next=8,n.loadWorldTournament();case 8:return e.next=10,n.createUserParticipantMap();case 10:if(n.endLoading(),n.scrollerManagers.forEach((function(e){e.updateScroller()})),null==(i=n.scrollers[a])||i.setEnable(!0),n.scrollers.forEach((function(e,t){e.revive()})),!GameCore.Utils.Device.isMobile()){e.next=16;break}return e.abrupt("return");case 16:n.scrollers.forEach((function(e,t){t!==a&&e.setEnable(!1)}));case 17:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.setSizeContainer(),t.world.isLandscape()||n.createHeaderBackground(),n.createHeader(),n.createFooter(),n.createScrollers(),n.createFooterOverlayZone(),n.createMenu(),n.add([n.menu,n.footer,n.footerOverlayZone]),n.createLoading(),n.setInput(),n}(0,o.Z)(t,e);var n=t.prototype;return n.setGameType=function(e){this.header.setGameType(e),this.gameType=e},n.setInput=function(){this.header.createTournamentButton.onClick=this.handleCreateTournament},n.createFooterOverlayZone=function(){this.footerOverlayZone=new QI(this.scene,this.footer)},n.createHeaderBackground=function(){var e=this,t=this.scene.world.getPixelRatio(),n=this.scene.gameZone,i=n.width,a=n.height,s=this.scene.theme.getThemeDefaultConfig().backgroundKey,r=this.scene.add.image(0,-a/2,s);r.setOrigin(.5,0),r.setWorldSize(i,a);var o=(ew.HEIGHT-5.5)/r.scaleY;r.setCrop(0,0,this.width*t,o),r.setAlpha(1),this.add(r),this.scene.events.on(Phaser.Scenes.Events.UPDATE,(function(){r.y=-e.y-a/2}))},n.getWorldTournamentsData=function(){return this.worldTournament},n.getTournaments=function(){return this.tournaments},n.setSizeContainer=function(){var e=this.scene.gameZone,t=e.width,n=e.height;this.setSize(t,n)},n.createHeader=function(){this.header=new bS(this.scene),this.add(this.header),this.bringToTop(this.header),this.header.setInteractive(),Phaser.Display.Align.In.TopCenter(this.header,this,0,5.5)},n.createScrollers=function(){this.scrollers=[],this.scrollerManagers=[],this.createTournamentsScroller(),this.createAwardScroller(),this.scrollers.forEach((function(e,t){e.setX($I*t),t>0&&e.setAlpha(0)}))},n.createAwardScroller=function(){var e=this.scene.gameZone.height-this.header.height-this.scene.ads.getBannerHeight()-this.footer.height,t=this.width-40,n=244/2.88,i=new wI(this.scene,this.width,e,16,0,100,3,[-t/2+n/2,0,t/2-n/2]);this.scrollers.push(i),Phaser.Display.Align.To.BottomCenter(i,this.header,0,0),this.add(i)},n.createTournamentsScroller=function(){var e=this.scene.gameZone.height-this.header.height-this.scene.ads.getBannerHeight()-this.footer.height+30,t=new fI.Z(this.scene,{width:375,height:e,marginBottom:50});Phaser.Display.Align.To.BottomCenter(t,this.header,0,8),this.add(t),this.sendToBack(t),t.setEnable(!0),this.scrollers.push(t);var n=new pI(this,t,tw);n&&this.scrollerManagers.push(n)},n.updateScrollerIdx=function(e){for(var t=0;t<this.scrollerManagers.length;t++)e===this.scrollerManagers[t]&&(this.currentIdx=t)},n.setButtonDisabled=function(e){e?(this.footer.menuButton.disableInteractive(),this.footer.gameButton.disableInteractive(),this.header.createTournamentButton.disableInteractive()):(this.footer.menuButton.setInteractive(),this.footer.gameButton.setInteractive(),this.header.createTournamentButton.setInteractive())},n.startLoading=function(){this.loading.revive(),this.setButtonDisabled(!0)},n.endLoading=function(){this.loading.kill(),this.setButtonDisabled(!1)},n.getAmountPlayer=function(e){return this.userParticipantMap.has(e)&&this.userParticipantMap.get(e)||0},n.createUserParticipantMap=function(){var e=(0,r.Z)(l().mark((function e(){var t,n,i=this;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.userParticipantMap=new(ne()),t=[],this.tournaments.forEach((function(e){var n=e.getPayload();if(n)try{var i=JSON.parse(n);t.push(i.leaderboardId||"")}catch(a){}})),this.worldTournament.forEach((function(e){var n;t.push((null==(n=e.payload)?void 0:n.leaderboardId)||"")})),n=De()(t).call(t,function(){var e=(0,r.Z)(l().mark((function e(t){var n;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,Ir.wF)(t);case 2:n=e.sent,i.userParticipantMap.set(t,(null==n?void 0:n.amountPlayer)||0);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.next=7,h().all(n);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.loadTournament=function(){var e=(0,r.Z)(l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.scene.facebook.tournament.getTournamentsAsync();case 3:this.tournaments=e.sent,e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),this.tournaments=[];case 10:case"end":return e.stop()}}),e,this,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),n.loadWorldTournament=function(){var e=(0,r.Z)(l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,Ir.Iy)();case 3:this.worldTournament=e.sent,e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),this.worldTournament=[];case 10:case"end":return e.stop()}}),e,this,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),n.createMenu=function(){this.menu=new XI(this.scene,this.footerOverlayZone)},n.createFooter=function(){var e=this;this.footer=new jS(this.scene),this.bringToTop(this.footer),this.footer.setInteractive();var t=this.scene.ads.getBannerHeight(),n=this.scene.gameZone.width>375?-10:0;Phaser.Display.Align.In.BottomCenter(this.footer,this,0,-t+n),this.footer.updateBackgroundMask(),this.footer.menuButton.onClick=function(){e.menu.open()}},n.createLoading=function(){var e=new JS.Z(this.scene);e.setVisible(!0),e.setScale(1.3),this.add(e),this.loading=e},t}(Phaser.GameObjects.Container),iw=nw,aw=function(e){function t(t,n,i,a){var s;return(s=e.call(this,t,n,i,a)||this).fadeInAnimation=void 0,s.fadeOutAnimation=void 0,s.tournamentsContainer=void 0,s.setBackground=function(){var e=s.scene.theme.getThemeDefaultConfig().backgroundKey;s.background.setTexture(e);var t=s.scene.gameZone,n=t.width,i=t.height;s.background.setWorldSize(n,i),s.scene.world.isLandscape()&&s.background.setScale(s.background.scaleY,s.background.scaleY)},s.setDepth(Os.Ks.POPUP),s.tournamentsContainer=new iw(t),s.add(s.tournamentsContainer),s.setBackground(),s.createBottomLogo(),Fn.Z.removeObject(s.background),s}(0,o.Z)(t,e);var n=t.prototype;return n.createBottomLogo=function(){if(!this.scene.world.isLandscape()){var e=new RE(this.scene);this.add(e),Phaser.Display.Align.In.BottomCenter(e,this)}},n.refresh=function(e){this.tournamentsContainer.setGameType(Rr.filterGameType),this.tournamentsContainer.updateContainer(e)},n.closeAllScreens=function(){this.scene.screen.close(Os.o4.TOURNAMENTS_SCREEN),this.scene.screen.close(Os.o4.TOURNAMENTS_RESULT_SCREEN),this.scene.screen.close(Os.o4.MISSION_COMPLETED_SCREEN)},n.open=function(){e.prototype.open.call(this),this.refresh(!0),this.setBlockInputOutsideEnabled(!0),this.runOpenAnimation()},n.close=function(){this.runCloseAnimation()},n.runOpenAnimation=function(){var e=this;this.scene.audio.playSound(Ls.Z.POPUP_SHOW),this.scene.time.delayedCall(100,(function(){Fn.Z.openScreen(e,!1)})),this.fadeInAnimation||(this.fadeInAnimation=new Mh.Z({targets:[this]})),this.fadeInAnimation.play()},n.runCloseAnimation=function(){var t,n,i=this;null!=(t=this.fadeOutAnimation)&&null!=(n=t.tween)&&n.isPlaying()||(this.scene.time.delayedCall(100,(function(){Fn.Z.closeScreen(i)})),this.scene.audio.playSound(Ls.Z.POPUP_OFF),this.fadeOutAnimation||(this.fadeOutAnimation=new zm.Z({targets:[this],props:{alpha:0},onComplete:function(){i.scene.events.emit("tournament-close"),e.prototype.close.call(i)}})),this.fadeOutAnimation.play())},t}(GameCore.Screen),sw=aw,rw=function(e){function t(t,n){var i;return(i=e.call(this,t,0,0,Rc.Z.BOLD_SHADOW_BLUR.KEY,n,t.fontSize(15))||this).setOrigin(.5,.5),i.setTint(16449487,16449487,15913325,15913325),i.setMaxSize(180,25),i}return(0,o.Z)(t,e),t}(Phaser.GameObjects.BitmapText),ow=Gn.Z.GAMEPLAY_DEFAULT,cw=ow.KEY,hw=ow.FRAME,uw=function(e){function t(t){var n;return(n=e.call(this,t,98/2.88,100/2.88)||this).setName("CreateTournamentButton"),n.createContent(),n}return(0,o.Z)(t,e),t.prototype.createContent=function(){var e=this.scene.add.image(0,0,cw,hw.TOURNAMENT.BUTTON_ADD);e.setWorldSize(this.width,this.height),this.add(e),Phaser.Display.Align.In.Center(e,this,0,0)},t}(Ol.Z),lw=uw,dw=Gn.Z.GAMEPLAY_DEFAULT,pw=dw.KEY,fw=dw.FRAME,gw=function(e){function t(t){var n;return(n=e.call(this,t)||this).background=void 0,n.createTournamentButton=void 0,n.gameTypeTag=void 0,n.setSize(326,51),n.createBackground(),n.createTitle(),n.createCreateButton(),n.createGameTypeTag(),n}(0,o.Z)(t,e);var n=t.prototype;return n.setGameType=function(e){this.gameTypeTag.setGameType(e)},n.createBackground=function(){var e=(0,ul.t)(),t=this.scene.add.nineslice(0,0,pw,fw.BG_GAME_STAT_TOP,this.width*e,this.height*e,0*e,0*e,35/2.88*e,20/2.88*e);t.scale=1/e,this.background=t,this.add([t])},n.createTitle=function(){var e=new rw(this.scene,"TOURNAMENTS");this.add(e),Phaser.Display.Align.In.Center(e,this,0,2)},n.createCreateButton=function(){this.createTournamentButton=new lw(this.scene),this.add(this.createTournamentButton),Phaser.Display.Align.In.RightCenter(this.createTournamentButton,this,-15,0)},n.createGameTypeTag=function(){this.gameTypeTag=new hy(this.scene,"popup"),this.add(this.gameTypeTag),Phaser.Display.Align.In.LeftCenter(this.gameTypeTag,this,3,-1)},t}(Phaser.GameObjects.Container),mw=gw,vw=Gn.Z.GAMEPLAY_DEFAULT,yw=vw.KEY,Tw=vw.FRAME,Cw=function(e){function t(t){var n;return(n=e.call(this,t,321/2.88,43.75)||this).setName("BackButton"),n.createBackground(),n.createContents(),n}(0,o.Z)(t,e);var n=t.prototype;return n.createBackground=function(){var e=this.scene.make.image({key:yw,frame:Tw.BUTTON_BACK});e.setWorldSize(this.width,this.height),this.add(e)},n.createContents=function(){var e=this.scene.add.image(0,0,Gn.Z.GAMEPLAY_DEFAULT.KEY,Gn.Z.GAMEPLAY_DEFAULT.FRAME.IC_BACK);e.setWorldSize(18.75,52/2.88);var t=this.scene.make.bitmapText({font:Rc.Z.BOLD_SHADOW.KEY,size:this.scene.fontSize(19),text:"Back",origin:{x:.5,y:.5}});this.add([e,t]),Phaser.Display.Align.In.Center(e,this,-30,-2),Phaser.Display.Align.In.Center(t,this,12)},t}(Ol.Z),Ew=Cw,Aw=Gn.Z.GAMEPLAY_DEFAULT,Sw=Aw.KEY,bw=Aw.FRAME,Iw=function(e){function t(t){var n;return(n=e.call(this,t)||this).backButton=void 0,n.createBackground(),n.createBackButton(),n}(0,o.Z)(t,e);var n=t.prototype;return n.createBackground=function(){var e=(0,ul.t)(),t=this.scene.add.nineslice(0,0,Sw,bw.BG_SETTINGS_BOTTOM,939/2.88*e,205/2.88*e,0*e,0*e,15/2.88*e,25/2.88*e);t.scale=1/e,this.add(t),this.setSize(t.displayWidth,t.displayHeight),t.setPosition(0,2)},n.createBackButton=function(){var e=this,t=new Ew(this.scene),n=this.scene;t.onClick=function(){e.scene.screen.get(Os.o4.TOURNAMENTS_SCREEN).closeAllScreens(),n.switchGameType(Rr.filterGameType)},t.setPosition(0,3),this.backButton=t,this.add(this.backButton)},t}(Phaser.GameObjects.Container),ww=Iw,Pw=Gn.Z.GAMEPLAY_DEFAULT,kw=Pw.KEY,_w=Pw.FRAME,xw=function(e){function t(t){var n;return(n=e.call(this,t,269,46)||this).setName("CreateNewTournament"),n.createBackground(),n.createContents(),n}(0,o.Z)(t,e);var n=t.prototype;return n.createBackground=function(){var e=this.scene.make.image({key:kw,frame:_w.TOURNAMENT.BUTTON_CREATE});e.setWorldSize(this.width,this.height),this.add(e)},n.createContents=function(){var e=this.scene.make.image({key:Gn.Z.GAMEPLAY_DEFAULT.KEY,frame:Gn.Z.GAMEPLAY_DEFAULT.FRAME.IC_NEW});e.setWorldSize(20,21);var t=this.scene.add.bitmapText(0,0,Rc.Z.BOLD_SHADOW.KEY,"Create Tournament",this.scene.fontSize(20));this.add([e,t]),Phaser.Display.Align.In.LeftCenter(e,this,-25,-1),Phaser.Display.Align.In.Center(t,this,12)},t}(Ol.Z),Ow=Gn.Z.GAMEPLAY_DEFAULT,Lw=Ow.KEY,Rw=Ow.FRAME,Dw=function(e){function t(t,n,i,a){var s;return(s=e.call(this,t,n,i)||this).illustration=void 0,s.createNewTournamentButton=void 0,s.payload=void 0,s.scrollerManager=void 0,s.noTournamentText=void 0,s.handleCreateTournament=(0,r.Z)(l().mark((function e(){var t,n,i,a,r,o,c;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=s.scene.game.globalScene,e.prev=1,n=s.scene,i=Rr.filterGameType,oS.clearData(),a=s.scene.player.getPlayer(),r=a.playerId,o=a.name,c={playerId:r,playerName:o,score:0,autoStartGame:!0,success:!0,image:1+Math.floor(3*Math.random()),gameType:i},t.screen.open(Os.o4.NOTIFY_SCREEN,{message:"creatingTournament",loading:!0}),e.next=10,(0,Ds.qZ)(500);case 10:return e.next=12,fc();case 12:return e.next=14,s.scene.storage.dispatch(Gr(c));case 14:return e.next=16,oS.getData();case 16:return n.gameTypeManager.switchGameType(i),s.scene.storage.dispatch(ac()),e.next=20,s.updateTournaments();case 20:n.gameplay.startNewGame(i),s.scene.screen.get(Os.o4.TOURNAMENTS_SCREEN).closeAllScreens(),Mw(0),e.next=32;break;case 26:if(e.prev=26,e.t0=e.catch(1),"USER_INPUT"!==(null==e.t0?void 0:e.t0.code)){e.next=31;break}return Mw(0),e.abrupt("return");case 31:t.screen.open(Os.o4.NOTIFY_SCREEN,{message:"cannotCreateTournament",duration:2e3,loading:!1});case 32:case"end":return e.stop()}}),e,null,[[1,26]])}))),s.updateTournaments=(0,r.Z)(l().mark((function e(){var t,n,i;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=(0,As.Z)(s),n=t.scrollerManager,i=n.tournamentsContainer,n.forceLoadData=!0,i.updateScrollerIdx(s.scrollerManager),e.next=6,i.updateContainer(!0);case 6:n.scroller.setEnable(!0);case 7:case"end":return e.stop()}}),e)}))),s.scrollerManager=a,s.setSize(311,280),s.createIllustration(),s.createText(),s.createButton(),s.setScale(Xf()),s}(0,o.Z)(t,e);var n=t.prototype;return n.updateText=function(e){this.noTournamentText.setText("You have no "+(0,jg.Ds)(e)+" tournaments")},n.addBackground=function(){var e="no-tournament-block-background";if(!this.scene.textures.exists(e)){var t=this.width,n=this.height,i=this.scene.add.graphics();i.fillStyle(65280,.2),i.fillRect(0,0,t,n),i.generateTexture(e,t,n),i.destroy()}var a=this.scene.add.image(0,0,e);this.add(a)},n.createIllustration=function(){var e=new Lf(this.scene,{width:188.5,height:182,key:Lw,frame:Rw.NO_TOURNAMENT,symmetricType:Of.HORIZONTAL});this.add(e),this.illustration=e,Phaser.Display.Align.In.TopCenter(e,this)},n.createText=function(){var e=this.scene.make.bitmapText({font:Rc.Z.BOLD.KEY,size:this.scene.fontSize(10),text:"youHaveNoTournaments",origin:{x:.5,y:.5}}).setTint(16579837);e.setMaxSize(200,20),this.add(e),this.alignUnder(e,this.illustration),this.noTournamentText=e},n.createButton=function(){var e=this;this.createNewTournamentButton=new xw(this.scene),this.add(this.createNewTournamentButton),this.createNewTournamentButton.onClick=function(){e.handleCreateTournament()},Phaser.Display.Align.In.BottomCenter(this.createNewTournamentButton,this)},n.alignUnder=function(e,t){var n=(e.height+t.height)/2;Phaser.Display.Align.In.Center(e,t,0,n+10)},t}(Phaser.GameObjects.Container),Bw=null,Mw=function(e){Bw&&clearTimeout(Bw),Bw=setTimeout((function(){window.game.globalScene.screen.close(Os.o4.NOTIFY_SCREEN)}),e)},Nw=Gn.Z.DEFAULT,Gw=(Nw.KEY,Nw.FRAME,Gn.Z.TOURNAMENT_BANNER),Fw=Gw.KEY,Zw=Gw.FRAME,Uw=function(e){function t(t){var n;return(n=e.call(this,t)||this).background=void 0,n.title=void 0,n.setSize(1e3/2.88,262/2.88),n.createBackground(),n.createTitle(),n.alignComponents(),n}(0,o.Z)(t,e);var n=t.prototype;return n.createTitle=function(){this.title=this.scene.add.bitmapText(0,0,Rc.Z.BOLD_SHADOW_BLUR.KEY,"Hurry up!\nJoin the tournament\nnow!",this.scene.fontSize(19)).setLeftAlign().setOrigin(0,.5).setMaxWidth(190).setTint(14673140),this.updateTitle(function(e){void 0===e&&(e=!1);var t=new Date,n=e?Phaser.Math.RND.between(0,11):t.getMonth();return n<3?"Spring":n<6?"Summer":n<9?"Autumn":"Winter"}(!0)+" Tournament"),this.add(this.title)},n.updateTitle=function(e){e=GameCore.Utils.String.removeDiacritics(e),this.title.setText(e),this.title.setPosition(22-this.width/2,5)},n.updateBackground=function(e){var t=Zw.getBanner(e);this.background.setFrame(t)},n.alignComponents=function(){Phaser.Display.Align.In.Center(this.background,this,0,1)},n.createBackground=function(){this.background=this.scene.add.image(0,0,Fw,Zw.getBanner(0)),this.background.setWorldSize(this.width,this.height),this.add(this.background)},t}(Phaser.GameObjects.Container),zw=Uw;for(var Hw=Gn.Z.GAMEPLAY_DEFAULT,Ww=Hw.KEY,Yw=Hw.FRAME,Kw=function(e){function t(t,n){var i;return(i=e.call(this,t)||this).createContent(n),i}return(0,o.Z)(t,e),t.prototype.createContent=function(e){var t=this.scene.add.container(0,0),n=this.scene.make.image({key:Ww,frame:Yw.TOURNAMENT.IC_CUP});n.setWorldSize(24.5,24.5);var i=this.scene.add.bitmapText(0,0,Rc.Z.BOLD_SHADOW.KEY,"join",this.scene.fontSize(22));t.add([n,i]);var a=i.width,s=n.width,r=(e-n.displayWidth-i.width)/20;Phaser.Display.Align.In.Center(n,this,-a/2-r,-2),Phaser.Display.Align.In.Center(i,this,s/2+r),this.add(t)},t}(Phaser.GameObjects.Container),Vw=Kw,jw=Gn.Z.GAMEPLAY_DEFAULT,Jw=jw.KEY,Xw=jw.FRAME,qw=function(e){function t(t,n){var i;return(i=e.call(this,t)||this).createContent(n),i}return(0,o.Z)(t,e),t.prototype.createContent=function(e){var t=this.scene.add.container(0,0),n=this.scene.make.image({key:Jw,frame:Xw.TOURNAMENT.IC_CUP});n.setWorldSize(24.5,24.5);var i=this.scene.add.bitmapText(0,0,Rc.Z.BOLD_SHADOW.KEY,"continue",this.scene.fontSize(17));t.add([n,i]);var a=i.width,s=n.width,r=(e-n.displayWidth-i.width)/20;Phaser.Display.Align.In.Center(n,this,-a/2-r,-2),Phaser.Display.Align.In.Center(i,this,s/2+r),this.add(t)},t}(Phaser.GameObjects.Container),Qw=qw,$w=Gn.Z.GAMEPLAY_DEFAULT,eP=$w.KEY,tP=$w.FRAME,nP=function(e){return e.JOIN="join",e.CONTINUE="continue",e}({}),iP=function(e){function t(t){var n;return(n=e.call(this,t,316/2.88,128/2.88)||this)._buttonState=nP.JOIN,n.joinLabel=void 0,n.continueLabel=void 0,n.setName("JoinButton"),n.createBackground(),n.createContent(),n.playAnimation(),n}(0,o.Z)(t,e);var n=t.prototype;return n.createBackground=function(){var e=this.scene.add.image(0,0,eP,tP.TOURNAMENT.JOIN_BUTTON);e.setWorldSize(this.width,this.height),this.add(e)},n.createContent=function(){this.joinLabel=new Vw(this.scene,this.displayWidth),this.continueLabel=new Qw(this.scene,this.displayWidth),this.continueLabel.kill(),this.add([this.joinLabel,this.continueLabel])},n.playAnimation=function(){new dh.Z({targets:this.getAll(),duration:1e3,props:{scale:"*=1.05"}}).play()},n.switchState=function(e){if(e!==this._buttonState)switch(e){case nP.JOIN:this._buttonState=nP.JOIN,this.joinLabel.revive(),this.continueLabel.kill();break;case nP.CONTINUE:this._buttonState=nP.CONTINUE,this.joinLabel.kill(),this.continueLabel.revive()}},(0,he.Z)(t,[{key:"buttonState",get:function(){return this._buttonState}}]),t}(Ol.Z),aP=iP,sP="This competition is over",rP="End in",oP=Gn.Z.GAMEPLAY_DEFAULT,cP=oP.KEY,hP=oP.FRAME,uP=353/2.88,lP=60/2.88,dP=function(e){function t(t){var n;return(n=e.call(this,t)||this).endTime=void 0,n.countdownTimer=void 0,n.timerText=void 0,n.background=void 0,n.clockIcon=void 0,n.updateCountdown=(0,r.Z)(l().mark((function e(){var t,i,a,s;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=Date.now(),i=1e3*n.endTime-t,a=Math.round(Math.abs(i)/864e5),i<0&&(i=0),0!==i){e.next=7;break}return n.setTimerText(sP),e.abrupt("return");case 7:s="",a>=1?(s=rP+" "+a+" "+(1===a?"day":"days"),n.setTimerText(s)):(s=rP+" "+(0,Ds.F0)(Math.abs(i),!0),n.setTimerText(s,!0));case 9:case"end":return e.stop()}}),e)}))),n.setSize(uP,lP),n.createBackground(),n.createClockIcon(),n.createTimeText(),n.createCountdownTimer(),n.alignComponents(),n}(0,o.Z)(t,e);var n=t.prototype;return n.alignComponents=function(){Phaser.Display.Align.In.Center(this.background,this)},n.createBackground=function(){this.background=this.scene.add.image(0,0,cP,hP.TOURNAMENT.TIME_BACKGROUND).setOrigin(0,.5),this.background.setWorldSize(this.width,this.height),this.add(this.background)},n.createClockIcon=function(){this.clockIcon=this.scene.add.image(0,0,cP,hP.TOURNAMENT.IC_CLOCK),this.clockIcon.setWorldSize(28/2.88,32/2.88),this.add(this.clockIcon)},n.createTimeText=function(){this.timerText=this.scene.make.bitmapText({font:Rc.Z.BOLD.KEY,size:this.scene.fontSize(14),origin:{x:0,y:.5},text:"End in 10 days"}),this.add(this.timerText)},n.createCountdownTimer=function(){var e,t=this;void 0!=this.endTime&&(0!=this.endTime?(null==(e=this.countdownTimer)||e.destroy(),this.countdownTimer=this.scene.time.addEvent({loop:!0,delay:1e3,startAt:1e3,callback:this.updateCountdown}),this.on(Phaser.GameObjects.Events.DESTROY,(function(){var e;null==(e=t.countdownTimer)||e.destroy()}))):this.setTimerText(sP))},n.setCountdown=function(e){this.endTime=e,this.createCountdownTimer()},n.getRemain=function(){if(void 0!=this.endTime){var e=Date.now(),t=1e3*this.endTime-e;return t<0?0:t}},n.setTimerText=function(e,t){void 0===t&&(t=!1),this.timerText.setText(e),e===sP?(this.setSize(uP+30,lP),this.background.setWorldSize(this.width,this.height),this.timerText.setFontSize(this.scene.fontSize(12)),Phaser.Display.Align.In.Center(this.timerText,this.background),this.clockIcon.kill()):(this.setSize(uP,lP),this.background.setWorldSize(this.width,this.height),this.clockIcon.revive(),t?(this.timerText.setFontSize(this.scene.fontSize(12.5)),Phaser.Display.Align.In.LeftCenter(this.clockIcon,this.background,-10,0),Phaser.Display.Align.In.LeftCenter(this.timerText,this.background,-25,1)):(this.timerText.setFontSize(this.scene.fontSize(13)),Phaser.Display.Align.In.LeftCenter(this.clockIcon,this.background,-10,0),Phaser.Display.Align.In.LeftCenter(this.timerText,this.background,-25,1)))},t}(Phaser.GameObjects.Container),pP=dP,fP=Gn.Z.GAMEPLAY_DEFAULT,gP=fP.KEY,mP=fP.FRAME,vP=function(e){function t(t,n,i){var a;return(a=e.call(this,t)||this).userText=void 0,a.setSize(n,i),a.createContent(),a}(0,o.Z)(t,e);var n=t.prototype;return n.createContent=function(){var e=this.scene.add.image(0,0,gP,mP.TOURNAMENT.IC_USER);e.setWorldSize(29/2.88,33/2.88);var t=this.scene.add.bitmapText(0,0,Rc.Z.BOLD.KEY,"0 Participants",this.scene.fontSize(12));this.add([e,t]);var n=12046760;e.setTint(n),t.setTint(n),Phaser.Display.Align.In.LeftCenter(e,this),Phaser.Display.Align.To.RightCenter(t,e,5,1),this.userText=t},n.updateNumberOfUser=function(e){var t=e>1?e+" Participants":e+" Participant";this.userText.setText(t)},t}(Phaser.GameObjects.Container),yP=vP,TP=function(e){function t(t){var n;return(n=e.call(this,t)||this).timerContainer=void 0,n.userParticipant=void 0,n.joinButton=void 0,n.setSize(1014/2.88,65.625),n.createTimeContainer(),n.createUserParticipant(),n.createJoinButton(),n.alignComponents(),n}(0,o.Z)(t,e);var n=t.prototype;return n.alignComponents=function(){Phaser.Display.Align.In.LeftCenter(this.timerContainer,this,-15,-9),Phaser.Display.Align.In.LeftCenter(this.userParticipant,this,-25,13),Phaser.Display.Align.In.RightCenter(this.joinButton,this,-10,3)},n.createTimeContainer=function(){this.timerContainer=new pP(this.scene),this.add(this.timerContainer)},n.createUserParticipant=function(){this.userParticipant=new yP(this.scene,120,22.5),this.add(this.userParticipant)},n.createJoinButton=function(){this.joinButton=new aP(this.scene),this.add(this.joinButton)},t}(Phaser.GameObjects.Container),CP=TP,EP=Gn.Z.GAMEPLAY_DEFAULT,AP=EP.KEY,SP=EP.FRAME,bP=vE.iD.MAX_LEADERS,IP={playerId:"10",name:"???",photo:"",score:0,rank:0},wP=[],PP=0;PP<bP;PP++)wP.push((0,s.Z)({},IP,{rank:PP+1}));var kP=function(e){function t(t){var n;return(n=e.call(this,t)||this).background=void 0,n.gameIcon=void 0,n.payload=void 0,n.header=void 0,n.footer=void 0,n.setSize(1014/2.88,451/2.88),n.createHeader(),n.createBackground(),n.createFooter(),n.createGameIcon(),n.alignComponents(),n.scene.add.existing((0,As.Z)(n)),n.setScale(Xf()),n}(0,o.Z)(t,e);var n=t.prototype;return n.createBackground=function(){this.background=this.scene.make.image({key:AP,frame:SP.TOURNAMENT.BLOCK_BACKGROUND}),this.background.setWorldSize(this.width,this.height),this.add(this.background)},n.createHeader=function(){this.header=new zw(this.scene),this.add(this.header)},n.createFooter=function(){this.footer=new CP(this.scene),this.add(this.footer)},n.createGameIcon=function(){this.gameIcon=this.scene.add.image(0,0,AP,SP.TOURNAMENT.IC_KLONDIKE),this.gameIcon.setWorldSize(94/2.88,94/2.88),this.add(this.gameIcon)},n.setGameIcon=function(e){switch(e){case is.Z.KLONDIKE:this.gameIcon.setFrame(SP.TOURNAMENT.IC_KLONDIKE);break;case is.Z.FREE_CELL:this.gameIcon.setFrame(SP.TOURNAMENT.IC_FREECELL);break;default:this.gameIcon.setFrame(SP.TOURNAMENT.IC_SPIDER)}},n.alignComponents=function(){Phaser.Display.Align.In.Center(this.background,this,0,2.25),Phaser.Display.Align.In.TopCenter(this.header,this,0,-4),Phaser.Display.Align.In.BottomCenter(this.footer,this,0,0),Phaser.Display.Align.In.TopLeft(this.gameIcon,this,5,3)},t}(Phaser.GameObjects.Container),_P=Gn.Z.GAMEPLAY_DEFAULT,xP=_P.KEY,OP=_P.FRAME,LP=function(e){function t(t){var n;return(n=e.call(this,t)||this).handleJoinTournament=function(){var e=(0,r.Z)(l().mark((function e(t){var i,a,s,r,o,c,h,u,d,p,f,g;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.payload){e.next=2;break}return e.abrupt("return");case 2:if(oS.setData(n.payload),o=n.payload.id,c=n.payload.endTime,h=(null==(i=n.payload.payload)?void 0:i.leaderboardId)||"",u=(null==(a=n.payload.payload)?void 0:a.level)||1,d=null==(s=n.payload.payload)?void 0:s.gameType,p=null==(r=n.payload.payload)?void 0:r.options,f=n.scene,e.prev=11,t){e.next=15;break}return e.next=15,n.scene.facebook.tournament.joinAsync(o.toString());case 15:n.scene.storage.dispatch(Nr(o.toString(),h,d)),f.gameTypeManager.switchGameType(d),n.scene.storage.dispatch(ac()),g={leaderboardId:h,endTime:c,level:u,gameType:d},n.scene.player.joinTournament(g),null==f||f.gameplay.startNewGame(d,p),n.scene.screen.get(Os.o4.TOURNAMENTS_SCREEN).closeAllScreens(),e.next=32;break;case 25:if(e.prev=25,e.t0=e.catch(11),oS.clearData(),"USER_INPUT"!==(null==e.t0?void 0:e.t0.code)){e.next=31;break}return e.abrupt("return");case 31:throw e.t0;case 32:case"end":return e.stop()}}),e,null,[[11,25]])})));return function(t){return e.apply(this,arguments)}}(),n.createDebugButton(),n.handleInput(),t.events.on(Phaser.Scenes.Events.UPDATE,(function(){var e;null!=(e=t.screen.get(Os.o4.TOURNAMENTS_SCREEN))&&e.visible&&n.active&&n.updateJoinButton()})),n}(0,o.Z)(t,e);var n=t.prototype;return n.updateInfo=function(){var e=(0,r.Z)(l().mark((function e(t){var n,i,a,s,r,o,c,h;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.payload=t,this.payload.idRequest=(new Date).getTime(),r=$b(t.id),o=void 0==(null==(n=t.payload)?void 0:n.image)?r:null==(i=t.payload)?void 0:i.image,this.header.updateBackground(o),this.header.updateTitle(t.title),this.updateTimer(t.endTime),this.setGameIcon(null==(a=t.payload)?void 0:a.gameType),c=this.scene.screen.get(Os.o4.TOURNAMENTS_SCREEN),h=c.tournamentsContainer.getAmountPlayer((null==(s=t.payload)?void 0:s.leaderboardId)||""),this.footer.userParticipant.updateNumberOfUser(h);case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.updateTimer=function(e){this.footer.timerContainer.setCountdown(e)},n.createDebugButton=function(){var e=this;if(GameCore.Utils.Valid.isDebugger()){var t=new Ol.Z(this.scene,20,20),n=this.scene.add.image(0,0,xP,OP.IC_BG_OFF);n.setWorldSize(t.width,t.height);var i=this.scene.make.bitmapText({font:Rc.Z.PRIMARY.KEY,size:this.scene.fontSize(10),text:"PL",origin:{x:.5,y:.5}});i.setCenterAlign(),t.add([n,i]),this.add(t),Phaser.Display.Align.In.TopLeft(t,this,10,-90),t.onClick=function(){if(!e.isCurrentTournamentBeingPlayed()){var t=e.scene.storage.getState();Cr(t)}}}},n.handleInput=function(){var e=this,t=this.footer.joinButton,n=this.scene;t.onClick=function(){t.buttonState===nP.CONTINUE?n.gameplay.boardGame.isGameOver()?e.joinTournament(!0):e.scene.screen.close(Os.o4.TOURNAMENTS_SCREEN):e.joinTournament(!1),e.updateTextPlay()}},n.joinTournament=function(){var e=(0,r.Z)(l().mark((function e(t){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,this.scene.game.globalScene.screen.open(Os.o4.NOTIFY_SCREEN,{message:"Joining tournament...",loading:!0}),e.next=4,(0,Ds.qZ)(500);case 4:return e.next=6,this.handleJoinTournament(t);case 6:DP(100),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),window.game.globalScene.screen.open(Os.o4.NOTIFY_SCREEN,{message:"Sorry, you cannot join at this time.",duration:3e3,loading:!1});case 12:return e.prev=12,this.updateTextPlay(),e.finish(12);case 15:case"end":return e.stop()}}),e,this,[[0,9,12,15]])})));return function(t){return e.apply(this,arguments)}}(),n.updateJoinButton=function(){var e=this.footer.joinButton;0===this.footer.timerContainer.getRemain()?e.setDisabled(!0):e.setDisabled(!1),this.updateTextPlay()},n.isThisTournamentIdIdenticalToCurrentTournament=function(){var e=this.scene.storage.getState(),t=Cr(e);return GameCore.Utils.Valid.isNumber(t)?t===this.payload.id:!!GameCore.Utils.Valid.isString(t)&&t===""+this.payload.id},n.isCurrentTournamentBeingPlayed=function(){return this.isThisTournamentIdIdenticalToCurrentTournament()&&Qo.instance.isTournamentMode()},n.updateTextPlay=function(){this.footer.joinButton.switchState(this.isCurrentTournamentBeingPlayed()?nP.CONTINUE:nP.JOIN)},t}(kP),RP=null,DP=function(e){RP&&clearTimeout(RP),RP=setTimeout((function(){window.game.globalScene.screen.close(Os.o4.NOTIFY_SCREEN)}),e)},BP=Gn.Z.GAMEPLAY_DEFAULT,MP=BP.KEY,NP=BP.FRAME,GP=function(e){function t(t,n){var i;return(i=e.call(this,t)||this).background=void 0,i.leftIcon=void 0,i.rightIcon=void 0,i.title=void 0,i.setSize(992/2.88,111/2.88),i.createBackground(),i.createIcons(),i.createTitle(n),i.align(),i.setScale(Xf()),i}(0,o.Z)(t,e);var n=t.prototype;return n.createBackground=function(){this.background=new Lf(this.scene,{width:this.width,height:this.height,key:MP,frame:NP.TOURNAMENT.RIBBON}),this.add(this.background)},n.createIcons=function(){this.leftIcon=this.scene.add.image(0,0,MP,NP.TOURNAMENT.RECTANGLE),this.leftIcon.setWorldSize(30/2.88,31/2.88),this.rightIcon=this.scene.add.image(0,0,MP,NP.TOURNAMENT.RECTANGLE),this.rightIcon.setWorldSize(30/2.88,31/2.88),this.add([this.leftIcon,this.rightIcon])},n.createTitle=function(e){this.title=this.scene.make.bitmapText({font:Rc.Z.BOLD_SHADOW_BLUR.KEY,size:this.scene.fontSize(16),text:e+" TOURNAMENTS",origin:{x:.5,y:.5}}),this.title.setTint(16449487,16449487,15913325,15913325),this.add(this.title)},n.align=function(){Phaser.Display.Align.In.Center(this.title,this,0,1),Phaser.Display.Align.To.RightCenter(this.rightIcon,this.title,5,-1.5),Phaser.Display.Align.To.LeftCenter(this.leftIcon,this.title,5,-1.5)},t}(Phaser.GameObjects.Container),FP=GP,ZP=function(){function e(e,t,n){this.scene=void 0,this.name=void 0,this.scroller=void 0,this.tournamentsContainer=void 0,this.noTournamentBlock=void 0,this.loadData=!1,this.debugNoTournament=!1,this.scene=e.scene,this.tournamentsContainer=e,this.scroller=t,this.name=n||"",this.createNoTournamentBlock()}var t=e.prototype;return t.createNoTournamentBlock=function(){this.noTournamentBlock=new Dw(this.scene,0,0,this),this.tournamentsContainer.add(this.noTournamentBlock),this.tournamentsContainer.bringToTop(this.noTournamentBlock),this.noTournamentBlock.kill(),Phaser.Display.Align.In.Center(this.noTournamentBlock,this.scroller,0,-40)},t.setMask=function(e){this.scroller.setMask(e),this.noTournamentBlock.setMask(e)},t.updateScroller=function(){var e,t=this.getListData("global"),n=this.getListData("friend"),i=this.getListData("your");if(x()(e=[]).call(e,t,n,i).length<1)return this.scroller.setEnable(!1),this.noTournamentBlock.updateText(this.tournamentsContainer.gameType),this.noTournamentBlock.revive(),void this.scroller.clearItem();this.scroller.clearItem(),this.noTournamentBlock.kill(),this.scroller.setEnable(!0);var a=-this.scroller.height/2;a=this.addBlocks(t,a,"GLOBAL"),a=this.addBlocks(n,a,"FRIENDS"),a=this.addBlocks(i,a,"YOUR"),this.scroller.onTouchEnd()},t.addBlocks=function(e,t,n){if(e.length<=0)return t;var i=new FP(this.scene,n);t+=i.displayHeight/2+5,i.setPosition(0,t),t+=i.displayHeight/2+10;for(var a=this.createBlocks(e),s=0;s<a.length;s++)t+=a[s].displayHeight/2,a[s].setPosition(0,t),t+=a[s].displayHeight/2+10;return this.scroller.addItem(i),this.scroller.addItems(a),t},t.createBlocks=function(e){var t=this;return De()(e).call(e,(function(e){var n=new LP(t.scene);return n.updateInfo(e),n}))},t.parseResponsesIntoTournaments=function(e){var t=[],n=[];if("friend"===e)n=this.filterFriendTournament();else n=this.filterYourTournament();return n.forEach((function(e){try{var n=e.getID(),i=e.getPayload();if(!i)return;var a=JSON.parse(i),s=a.playerName;if(!a.leaderboardId)throw new XS(null,a);var r={id:n,title:e.getTitle()||s+"'s Tournament",payload:a,endTime:e.getEndTime(),contextID:e.getContextID()};t.push(r)}catch(o){}})),t},(0,he.Z)(e,[{key:"forceLoadData",get:function(){return this.loadData},set:function(e){this.loadData=e}},{key:"forceNoTournament",get:function(){return this.debugNoTournament&&!this.loadData},set:function(e){this.debugNoTournament=e}}]),e}(),UP=function(e){function t(t,n,i){return e.call(this,t,n,i)||this}(0,o.Z)(t,e);var n=t.prototype;return n.getListData=function(e){return this.forceNoTournament?[]:(t="global"==e?this.tournamentsContainer.getWorldTournamentsData():this.parseResponsesIntoTournaments(e),this.filterByCurrentGameType(t));var t},n.filterByCurrentGameType=function(e){return Le()(e).call(e,(function(e){var t;return(null==(t=e.payload)?void 0:t.gameType)==Rr.filterGameType}))},n.filterFriendTournament=function(){var e=this.scene.player.getPlayerId(),t=this.tournamentsContainer.getTournaments();return Le()(t).call(t,(function(t){var n=t.getPayload();if(!n)return!1;try{var i=JSON.parse(n);return i.playerId&&e!=i.playerId}catch(a){return!1}}))},n.filterYourTournament=function(){var e=this.scene.player.getPlayerId(),t=this.tournamentsContainer.getTournaments(),n=Le()(t).call(t,(function(t){var n=t.getPayload();if(!n)return!1;try{var i=JSON.parse(n);return i.playerId&&e===i.playerId}catch(a){return!1}}));return n},t}(ZP),zP=UP,HP=(vE.Gc.AWARDS,vE.Gc.TOURNAMENTS),WP=Gn.Z.GAMEPLAY_DEFAULT,YP=WP.KEY,KP=WP.FRAME,VP=function(e){function t(t){var n;return(n=e.call(this,t)||this).header=void 0,n.footer=void 0,n.bg=void 0,n.scrollers=[],n.scrollerManagers=[],n.currentIdx=0,n.tournaments=[],n.worldTournament=[],n.loading=void 0,n.gameType=void 0,n.userParticipantMap=new(ne()),n.handleCreateTournament=function(){0!=n.scrollerManagers.length&&n.scrollerManagers[0].noTournamentBlock.handleCreateTournament()},n.updateContainer=function(){var e=(0,r.Z)(l().mark((function e(t){var i,a;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=0,n.startLoading(),n.scrollers.forEach((function(e,t){e.setEnable(!1),e.kill()})),!t){e.next=10;break}return e.next=6,n.loadTournament();case 6:return e.next=8,n.loadWorldTournament();case 8:return e.next=10,n.createUserParticipantMap();case 10:if(n.endLoading(),n.scrollerManagers.forEach((function(e){e.updateScroller()})),null==(i=n.scrollers[a])||i.setEnable(!0),n.scrollers.forEach((function(e,t){e.revive()})),!GameCore.Utils.Device.isMobile()){e.next=16;break}return e.abrupt("return");case 16:n.scrollers.forEach((function(e,t){t!==a&&e.setEnable(!1)}));case 17:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.setSizeContainer(),n.createHeader(),n.createFooter(),n.createScrollers(),n.createLoading(),n.addMask(),n.addMaskHitZone(),n.add([n.header,n.footer]),n.setScale(jf(t)),n.setY(Jf(n.scene)),n.setInput(),n}(0,o.Z)(t,e);var n=t.prototype;return n.setGameType=function(e){this.header.setGameType(e),this.gameType=e},n.setInput=function(){this.header.createTournamentButton.onClick=this.handleCreateTournament},n.getWorldTournamentsData=function(){return this.worldTournament},n.getTournaments=function(){return this.tournaments},n.setSizeContainer=function(){var e=(0,ul.t)(),t=this.scene.add.nineslice(0,0,YP,KP.SETTINGS_POPUP,329*e,544*e,0*e,0*e,50/2.88*e,50/2.88*e);t.scale=1/e,this.add(t),this.bg=t,this.setSize(t.displayWidth,t.displayHeight)},n.createHeader=function(){this.header=new mw(this.scene),this.bringToTop(this.header),this.header.setInteractive(),Phaser.Display.Align.In.TopCenter(this.header,this,0,-1.5)},n.createFooter=function(){this.footer=new ww(this.scene),this.footer.setInteractive(),Phaser.Display.Align.In.BottomCenter(this.footer,this,0,-5)},n.getContainers=function(e){return[this.scrollers[e],this.scrollerManagers[e].noTournamentBlock]},n.createScrollers=function(){this.scrollers=[],this.scrollerManagers=[],this.createTournamentsScroller(),this.createAwardScroller(),this.scrollers.forEach((function(e,t){e.setX(239*t),t>0&&e.setAlpha(0)}))},n.createAwardScroller=function(){var e=this.scene.gameZone.height-this.header.height-this.scene.ads.getBannerHeight()-this.footer.height,t=this.width-40,n=244/2.88,i=new wI(this.scene,this.width,e,16,0,100,3,[-t/2+n/2,0,t/2-n/2]);this.scrollers.push(i),Phaser.Display.Align.To.BottomCenter(i,this.header,0,0),this.add(i)},n.createTournamentsScroller=function(){var e=new fI.Z(this.scene,{width:375,height:440,marginBottom:30});Phaser.Display.Align.To.BottomCenter(e,this.header,0,3),this.add(e),e.setEnable(!0),this.scrollers.push(e);var t=new zP(this,e,HP);t&&this.scrollerManagers.push(t)},n.distanceBetweenTabBottomAndFooterTop=function(){return this.footer.y-this.header.y-(this.footer.height+this.header.height)/2},n.updateScrollerIdx=function(e){for(var t=0;t<this.scrollerManagers.length;t++)e===this.scrollerManagers[t]&&(this.currentIdx=t)},n.setButtonDisabled=function(e){e?this.header.createTournamentButton.disableInteractive():this.header.createTournamentButton.setInteractive()},n.startLoading=function(){this.loading.revive(),this.setButtonDisabled(!0)},n.endLoading=function(){this.loading.kill(),this.setButtonDisabled(!1)},n.getAmountPlayer=function(e){return this.userParticipantMap.has(e)&&this.userParticipantMap.get(e)||0},n.createUserParticipantMap=function(){var e=(0,r.Z)(l().mark((function e(){var t,n,i=this;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.userParticipantMap=new(ne()),t=[],this.tournaments.forEach((function(e){var n=e.getPayload();if(n)try{var i=JSON.parse(n);t.push(i.leaderboardId||"")}catch(a){}})),this.worldTournament.forEach((function(e){var n;t.push((null==(n=e.payload)?void 0:n.leaderboardId)||"")})),n=De()(t).call(t,function(){var e=(0,r.Z)(l().mark((function e(t){var n;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,Ir.wF)(t);case 2:n=e.sent,i.userParticipantMap.set(t,(null==n?void 0:n.amountPlayer)||0);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.next=7,h().all(n);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.loadTournament=function(){var e=(0,r.Z)(l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.scene.facebook.tournament.getTournamentsAsync();case 3:this.tournaments=e.sent,e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),this.tournaments=[];case 10:case"end":return e.stop()}}),e,this,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),n.loadWorldTournament=function(){var e=(0,r.Z)(l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,Ir.Iy)();case 3:this.worldTournament=e.sent,e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),this.worldTournament=[];case 10:case"end":return e.stop()}}),e,this,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),n.addMask=function(){var e=this,t=this.scene.make.graphics({fillStyle:{color:255,alpha:0},visible:!1});t.setName("MaskGraphics");var n=this.header.x,i=(this.footer.y-this.footer.height/2+(this.header.y+this.header.height/2))/2,a=this.width-6,s=n-a/2,r=i-160;t.fillRoundedRect(s,r,a,320,0),this.scrollerManagers.forEach((function(e){e.setMask(t.createGeometryMask())})),this.scene.events.on(Phaser.Scenes.Events.UPDATE,(function(){var n=e.getWorldPosition(),i=n.x,a=n.y;t.setPosition(i,a)}))},n.addMaskHitZone=function(){var e=this.scene.world.getWorldSize().height-this.height,t=this.scene.add.zone(0,0,this.width,e/2);t.setInteractive(),Phaser.Display.Align.In.TopCenter(t,this,0,t.height),this.add(t);var n=this.scene.add.zone(0,0,this.width,e/2);n.setInteractive(),Phaser.Display.Align.To.BottomCenter(n,this.footer),this.add(n)},n.createLoading=function(){var e=new JS.Z(this.scene);e.setVisible(!0),this.add(e),this.loading=e},t}(Phaser.GameObjects.Container),jP=VP,JP=function(e){function t(t,n,i,a){var s;return(s=e.call(this,t,n,i,a)||this).fadeInAnimation=void 0,s.fadeOutAnimation=void 0,s.tournamentsContainer=void 0,s.setBackground=function(){s.background.setTint(1315862),s.background.setAlpha(.65)},s.setDepth(Os.Ks.POPUP),s.tournamentsContainer=new jP(t),s.add(s.tournamentsContainer),s.setBackground(),s}(0,o.Z)(t,e);var n=t.prototype;return n.refresh=function(e){this.tournamentsContainer.setGameType(Rr.filterGameType),this.tournamentsContainer.updateContainer(e)},n.closeAllScreens=function(){this.scene.screen.close(Os.o4.TOURNAMENTS_SCREEN),this.scene.screen.close(Os.o4.TOURNAMENTS_RESULT_SCREEN),this.scene.screen.close(Os.o4.MISSION_COMPLETED_SCREEN)},n.open=function(){e.prototype.open.call(this),this.refresh(!0),this.setBlockInputOutsideEnabled(!0),this.runOpenAnimation()},n.close=function(){this.runCloseAnimation()},n.runOpenAnimation=function(){var e=this;this.scene.audio.playSound(Ls.Z.POPUP_SHOW),this.scene.time.delayedCall(100,(function(){Fn.Z.openScreen(e,!1)})),this.fadeInAnimation||(this.fadeInAnimation=new Mh.Z({targets:[this]})),this.fadeInAnimation.play()},n.runCloseAnimation=function(){var t,n,i=this;null!=(t=this.fadeOutAnimation)&&null!=(n=t.tween)&&n.isPlaying()||(this.scene.time.delayedCall(100,(function(){Fn.Z.closeScreen(i)})),this.scene.audio.playSound(Ls.Z.POPUP_OFF),this.fadeOutAnimation||(this.fadeOutAnimation=new zm.Z({targets:[this],props:{alpha:0},onComplete:function(){i.scene.events.emit("tournament-close"),e.prototype.close.call(i)}})),this.fadeOutAnimation.play())},t}(GameCore.Screen),XP=JP,qP=GameCore.world.isLandscape()?XP:sw,QP=function(e){function t(t){var n;return(n=e.call(this,t)||this)._avatar=void 0,n._username=void 0,n._shine=void 0,n._shineAnimation=void 0,n.setSizeContainer(),n.createShine(),n.createAvatarFrame(),n.createText(),n.alignComponents(),n}(0,o.Z)(t,e);var n=t.prototype;return n.hideContent=function(){this._avatar.setScale(0),this._username.setAlpha(0),this._shine.setAlpha(0),this.stopShineAnimation()},n.runEntranceAnimationAvatar=function(){var e=(0,r.Z)(l().mark((function e(){var t=this;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new(h())((function(e){t.scene.add.tween({targets:t._avatar,duration:300,ease:Phaser.Math.Easing.Cubic.Out,props:{scale:{from:0,to:1}},onComplete:e})})));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),n.runEntranceAnimationUsername=function(){var e=(0,r.Z)(l().mark((function e(){var t=this;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new(h())((function(e){t.scene.add.tween({targets:t._username,duration:300,ease:Phaser.Math.Easing.Sine.Out,props:{alpha:{from:0,to:1}},onComplete:e})})));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),n.runShineAnimation=function(){var e;null==(e=this._shineAnimation)||e.stop(),this._shineAnimation=this.scene.add.tween({targets:this._shine,angle:360,duration:5e3,loop:-1})},n.stopShineAnimation=function(){var e;null==(e=this._shineAnimation)||e.stop()},n.runEntranceAnimationWin=function(){var e=(0,r.Z)(l().mark((function e(){var t,n=this;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.scene.world.getPixelRatio(),e.abrupt("return",new(h())((function(e){n.scene.add.tween({targets:n._shine,ease:Phaser.Math.Easing.Sine.Out,duration:100,props:{alpha:{from:0,to:.5},scale:{from:0,to:1/t*1.2}},onComplete:e})})));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.runEntranceAnimation=function(){var e=(0,r.Z)(l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h().all([this.runEntranceAnimationAvatar(),this.runEntranceAnimationUsername()]);case 2:return e.next=4,this.runEntranceAnimationWin();case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),(0,he.Z)(t,[{key:"avatar",get:function(){return this._avatar}},{key:"username",get:function(){return this._username}}]),t}(Phaser.GameObjects.Container),$P=Gn.Z.GAMEPLAY_DEFAULT,ek=$P.KEY,tk=$P.FRAME,nk=function(e){function t(t){return e.call(this,t)||this}(0,o.Z)(t,e);var n=t.prototype;return n.setSizeContainer=function(){this.setSize(54,120)},n.createShine=function(){this._shine=this.scene.add.image(0,0,ek,tk.AVATAR_SHINE),this._shine.setWorldSize(225,201),this.add(this._shine)},n.createAvatarFrame=function(){this._avatar=new Bc(this.scene,{key:ek,background:tk.AVATAR.BG_2,frame:tk.AVATAR_BLUE,width:72,height:72,loadDelay:100,backgroundWidth:70,backgroundHeight:70}),this._avatar.update(),this._avatar.loadPhoto(Ka.Z.AVATAR.KEY,Ka.Z.AVATAR.FILE,72),this.add(this._avatar)},n.createText=function(){this._username=this.scene.make.text({style:{fontFamily:Rc.Z.FONT_FAMILY},origin:{x:.5,y:.5}}),this._username.setHighQuality(),this._username.setFontSize(16),this._username.setText("Name"),this.username.setIgnoreLanguage(),this.add(this._username)},n.alignComponents=function(){Phaser.Display.Align.In.BottomCenter(this._username,this,0,0),Phaser.Display.Align.In.Center(this._avatar,this)},n.setWinner=function(e,t){void 0===e&&(e=!0),void 0===t&&(t=!0),this._shine.setVisible(e),1==e?(this._avatar.setFrame(tk.AVATAR_WIN),this._avatar.setFrameSize(70,70),this.runShineAnimation()):(t?this._avatar.setFrame(tk.AVATAR_ORANGE):this._avatar.setFrame(tk.AVATAR_BLUE),this._avatar.setFrameSize(72,72))},t}(QP),ik=function(e){return e.WIN="win",e.LOSE="lose",e.DRAW="draw",e.WAITING_FOR_OPPONENT="waiting_for_opponent",e}(ik||{}),ak=ik,sk=function(e){function t(t){var n;return(n=e.call(this,t)||this)._youAvatar=void 0,n._opponentAvatar=void 0,n._versusText=void 0,n.setSizeContainer(),n.createAvatars(),n.createVersusText(),n.alignComponents(),n}(0,o.Z)(t,e);var n=t.prototype;return n.hideContent=function(){this._youAvatar.hideContent(),this._opponentAvatar.hideContent(),this._versusText.setAlpha(0)},n.runEntranceAnimationVersusText=function(){var e=(0,r.Z)(l().mark((function e(){var t=this;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new(h())((function(e){t.scene.add.tween({targets:t.versusText,duration:100,ease:Phaser.Math.Easing.Sine.Out,props:{alpha:{from:0,to:1},y:{from:t.versusText.y+t.versusText.height/4,to:t.versusText.y}},onComplete:e})})));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),n.runEntranceAnimation=function(){var e=(0,r.Z)(l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h().all([this._youAvatar.runEntranceAnimation(),this._opponentAvatar.runEntranceAnimation()]);case 2:return e.next=4,this.runEntranceAnimationVersusText();case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),(0,he.Z)(t,[{key:"youAvatar",get:function(){return this._youAvatar}},{key:"opponentAvatar",get:function(){return this._opponentAvatar}},{key:"versusText",get:function(){return this._versusText}}]),t}(Phaser.GameObjects.Container),rk=Gn.Z.GAMEPLAY_DEFAULT,ok=rk.KEY,ck=rk.FRAME,hk=function(e){function t(t){return e.call(this,t)||this}(0,o.Z)(t,e);var n=t.prototype;return n.setSizeContainer=function(){this.setSize(375,100)},n.createAvatars=function(){this._youAvatar=new nk(this.scene),this._opponentAvatar=new nk(this.scene),this._youAvatar.username.setTint(16444008),this.add([this._youAvatar,this._opponentAvatar])},n.createVersusText=function(){this._versusText=this.scene.add.image(0,0,ok,ck.IC_VS),this._versusText.setWorldSize(174/2.88,44/2.88),this.add(this._versusText)},n.alignComponents=function(){Phaser.Display.Align.In.Center(this._versusText,this),Phaser.Display.Align.In.Center(this._youAvatar,this._versusText,90),Phaser.Display.Align.In.Center(this._opponentAvatar,this._versusText,-90)},n.updateState=function(e){switch(e){case ak.WIN:this._youAvatar.setWinner(!0),this._opponentAvatar.setWinner(!1,!1);break;case ak.LOSE:this._youAvatar.setWinner(!1),this._opponentAvatar.setWinner(!0,!1);break;case ak.DRAW:default:this._youAvatar.setWinner(!1),this._opponentAvatar.setWinner(!1,!1)}},t}(sk),uk=function(e){function t(t){var n;return(n=e.call(this,t)||this).winLoseText=void 0,n.cardChain=void 0,n.ribbon=void 0,n.waitingAnimationEvent=void 0,n.waitingAnimation=void 0,n.spade=void 0,n.heart=void 0,n.setSize(303,Yf),n.addRibbon(),n.addSpadeAndHeart(),n.createWinLoseText(),n}(0,o.Z)(t,e);var n=t.prototype;return n.playWaitingAnimation=function(){var e=this,t=0;this.winLoseText.setTranslationParameters({dots:""}),this.winLoseText.setText("waitingLoading"),this.waitingAnimationEvent=this.scene.time.addEvent({delay:500,repeat:-1,callback:function(){t=(t+1)%4;var n=Array(t+1).join(".");e.winLoseText.setTranslationParameters({dots:n})}}),this.waitingAnimation=this.scene.add.tween({targets:this.winLoseText,alpha:.5,repeat:-1,yoyo:!0,delay:250,ease:Phaser.Math.Easing.Sine.InOut})},n.stopWaitingAnimation=function(){if(this.waitingAnimationEvent)try{this.waitingAnimationEvent.remove(),this.waitingAnimationEvent.destroy()}catch(e){}if(this.waitingAnimation)try{this.waitingAnimation.remove(),this.waitingAnimation.destroy()}catch(t){}this.winLoseText.setAlpha(1),this.cardChain.stopAnimation()},t}(Phaser.GameObjects.Container),lk=Gn.Z.GAMEPLAY_DEFAULT,dk=lk.KEY,pk=lk.FRAME,fk=function(e){function t(t,n){var i;return(i=e.call(this,t)||this).chain=void 0,i.timeline=void 0,i.config=void 0,i.cardAngles=[],i.config=(0,s.Z)({cardScale:1,radius:100},n),i.createCards(),i.align(),i}(0,o.Z)(t,e);var n=t.prototype;return n.createCards=function(){var e=this.scene.add.image(0,0,dk,pk.RESULT_SCREEN.A_CLUB);e.setWorldSize(192/2.88*this.config.cardScale,214/2.88*this.config.cardScale);var t=this.scene.add.image(0,0,dk,pk.RESULT_SCREEN.A_HEART);t.setWorldSize(56.25*this.config.cardScale,213/2.88*this.config.cardScale);var n=this.scene.add.image(0,0,dk,pk.RESULT_SCREEN.A_SPADE);n.setWorldSize(56.25*this.config.cardScale,212/2.88*this.config.cardScale);var i=this.scene.add.image(0,0,dk,pk.RESULT_SCREEN.A_DIAMOND);i.setWorldSize(192/2.88*this.config.cardScale,214/2.88*this.config.cardScale),this.chain=[e,t,n,i],this.add(this.chain)},n.align=function(){var e=this.config.radius,t=this.chain.length;if(!(t<=1))for(var n=0;n<this.chain.length;n++){var i=this.chain[n],a=60/(t-1)*n-30,s=Math.cos((a-90)*Math.PI/180),r=Math.sin((a-90)*Math.PI/180);this.cardAngles.push(a),i.setPosition(s*e,r*e+85)}},n.playAnimation=function(e,t){var n=this,i=8750469,a=16777215,s=e||100,r=t||110;this.align(),this.chain.forEach((function(e){e.setTint(i)}));for(var o=this.scene.tweens.createTimeline({loop:-1}),c=function(e){var t=n.chain[e],c=n.cardAngles[e],h=Math.cos((c-90)*Math.PI/180),u=Math.sin((c-90)*Math.PI/180),l=h*s,d=h*r,p=u*s+85,f=u*r+85;o.add({targets:{value:0},value:1,duration:500,ease:Phaser.Math.Easing.Sine.Out,onUpdate:function(e){n.bringToTop(t);var s=e.getValue(),r=Phaser.Display.Color.IntegerToColor(i),o=Phaser.Display.Color.IntegerToColor(a),c=Phaser.Display.Color.Interpolate.ColorWithColor(r,o,100,100*s),h=Phaser.Display.Color.GetColor(c.r,c.g,c.b);t.x=Phaser.Math.Linear(l,d,s),t.y=Phaser.Math.Linear(p,f,s),t.setTint(h)}});o.add({targets:{value:0},value:1,duration:500,ease:Phaser.Math.Easing.Sine.In,onUpdate:function(e){n.bringToTop(t);var s=e.getValue(),r=Phaser.Display.Color.IntegerToColor(a),o=Phaser.Display.Color.IntegerToColor(i),c=Phaser.Display.Color.Interpolate.ColorWithColor(r,o,100,100*s),h=Phaser.Display.Color.GetColor(c.r,c.g,c.b);t.x=Phaser.Math.Linear(d,l,s),t.y=Phaser.Math.Linear(f,p,s),t.setTint(h)}})},h=0;h<this.chain.length;h++)c(h);this.timeline=o,o.play()},n.stopAnimation=function(){var e;null==(e=this.timeline)||e.stop()},t}(Phaser.GameObjects.Container),gk=fk,mk=Gn.Z.GAMEPLAY_DEFAULT,vk=mk.KEY,yk=mk.FRAME,Tk=function(e){function t(t){return e.call(this,t)||this}(0,o.Z)(t,e);var n=t.prototype;return n.createWinLoseText=function(){var e=this.scene.make.bitmapText({font:Rc.Z.BOLD_SHADOW_BLUR.KEY,size:this.scene.fontSize(27),origin:{x:.5,y:.5},text:"youWin"});this.add(e),Phaser.Display.Align.In.TopCenter(e,this,0,-65),this.winLoseText=e},n.addRibbon=function(){this.cardChain=new gk(this.scene);var e=this.scene.add.image(0,0,Gn.Z.GAMEPLAY_DEFAULT.KEY,yk.SUB_RIBBON);e.setWorldSize(177,45),this.ribbon=e,this.add([this.cardChain,e])},n.addSpadeAndHeart=function(){var e=this.scene.add.image(0,0,vk,yk.SPADE);e.setWorldSize(23.5,26.5);var t=this.scene.add.image(0,0,vk,yk.HEART);t.setWorldSize(22,26),this.add([e,t]),this.spade=e,this.heart=t},n.updateWinLoseText=function(e){var t=this;switch(this.stopWaitingAnimation(),e){case ak.WIN:this.winLoseText.setFont(Rc.Z.BOLD_SHADOW_BLUR.KEY),this.winLoseText.setFontSize(this.scene.fontSize(24)),this.winLoseText.setText("youWin"),this.winLoseText.setMaxSize(125,30),this.winLoseText.clearTint(),this.winLoseText.setGradientHorizontalTint([{at:0,color:16315097},{at:.5,color:16777215},{at:1,color:16315097}]),this.winLoseText.setRadius(1e3),this.winLoseText.setPosition(0,26),this.ribbon.setVisible(!0),this.spade.setVisible(!1),this.heart.setVisible(!1),this.ribbon.setTexture(vk,yk.PLAY_WITH_FRIEND.RIBBON_WIN),this.ribbon.setWorldSize(740/2.88,this.height),this.cardChain.kill();break;case ak.LOSE:this.winLoseText.setFont(Rc.Z.BOLD_SHADOW_BLUR.KEY),this.winLoseText.setFontSize(this.scene.fontSize(28)),this.winLoseText.setText("youLose"),this.winLoseText.setMaxSize(300,40),this.winLoseText.clearGradientTint(),this.winLoseText.setTint(16777215,16777215,12833246,12833246),this.winLoseText.clearRadius(),this.winLoseText.setPosition(0,11),this.spade.setVisible(!1),this.heart.setVisible(!1),Phaser.Display.Align.To.LeftCenter(this.spade,this.winLoseText,3,-2),Phaser.Display.Align.To.RightCenter(this.heart,this.winLoseText,2,-2),this.winLoseText.on("textChanged",(function(){Phaser.Display.Align.To.LeftCenter(t.spade,t.winLoseText,3,-2),Phaser.Display.Align.To.RightCenter(t.heart,t.winLoseText,2,-2)})),this.ribbon.setVisible(!1),this.cardChain.kill();break;case ak.DRAW:this.winLoseText.setFont(Rc.Z.BOLD_SHADOW_BLUR.KEY),this.winLoseText.setFontSize(this.scene.fontSize(24)),this.winLoseText.setText("draw"),this.winLoseText.setMaxSize(125,30),this.winLoseText.x+=4,this.winLoseText.clearTint(),this.winLoseText.setGradientHorizontalTint([{at:0,color:16315097},{at:.5,color:16777215},{at:1,color:16315097}]),this.winLoseText.setRadius(1e3),this.winLoseText.setPosition(0,20),this.ribbon.setVisible(!0),this.spade.setVisible(!1),this.heart.setVisible(!1),this.ribbon.setTexture(vk,yk.PLAY_WITH_FRIEND.RIBBON_DRAW),this.ribbon.setWorldSize(613/2.88,118.75),this.cardChain.kill();break;case ak.WAITING_FOR_OPPONENT:default:this.winLoseText.setFont(Rc.Z.BOLD.KEY),this.winLoseText.setFontSize(this.scene.fontSize(21)),this.winLoseText.setText("WAITING"),this.winLoseText.setMaxSize(140,30),this.winLoseText.clearTint(),this.winLoseText.clearGradientTint(),this.winLoseText.setRadius(1e3),this.winLoseText.setPosition(0,-5),this.ribbon.setVisible(!0),this.spade.setVisible(!1),this.heart.setVisible(!1),this.ribbon.setTexture(Gn.Z.GAMEPLAY_DEFAULT.KEY,yk.SUB_RIBBON),this.ribbon.setWorldSize(217.71,55.35),this.cardChain.revive(),this.playWaitingAnimation(),this.cardChain.playAnimation(),this.cardChain.setPosition(0,-25)}e!=ak.LOSE&&this.winLoseText.off("textChanged")},t}(uk),Ck=function(e){function t(t){var n;return(n=e.call(this,t)||this).newGameButton=void 0,n.shareButton=void 0,n.setSizeContainer(),n.createNewGameButton(),n.createShareButton(),n}(0,o.Z)(t,e);var n=t.prototype;return n.hideContent=function(){this.newGameButton.hideContent(),this.shareButton.hideContent()},n.runEntranceAnimation=function(){var e=(0,r.Z)(l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h().all([this.newGameButton.runEntranceAnimation(),this.shareButton.runEntranceAnimation()]);case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),t}(Phaser.GameObjects.Container),Ek=function(e){return e.NEW_GAME="new",e.CLOSE="close",e}({}),Ak=function(e){function t(t,n,i){var a;return(a=e.call(this,t,n,i)||this).closeLabel=void 0,a.newGameLabel=void 0,a._buttonState=void 0,a.setName("NewGameButton"),a.createBackground(),a.createNewGameLabel(),a.createCloseLabel(),a.switchState(Ek.NEW_GAME),a.initOnClick(),a.playPulsateAnimation(),a}(0,o.Z)(t,e);var n=t.prototype;return n.initOnClick=function(){var e=this;this.onClick=(0,r.Z)(l().mark((function t(){var n;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e._buttonState!==Ek.NEW_GAME){t.next=6;break}return n=e.scene,t.next=4,n.handlePlayWithFriend();case 4:t.next=7;break;case 6:e.scene.time.delayedCall(300,(function(){e.switchState(Ek.NEW_GAME)}));case 7:e.scene.screen.close(Os.o4.PLAY_WITH_FRIEND_GAME_OVER_SCREEN);case 8:case"end":return t.stop()}}),t)})))},n.playPulsateAnimation=function(){new dh.Z({targets:[this],duration:1e3,props:{scale:"*=1.05"}}).play()},n.hideContent=function(){this.setAlpha(0)},n.runEntranceAnimation=function(){var e=(0,r.Z)(l().mark((function e(){var t=this;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new(h())((function(e){t.scene.add.tween({targets:t,alpha:1,duration:200,onComplete:function(){t.setDisabled(!1),e()}})})));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),n.switchState=function(e){if(e!==this._buttonState)switch(e){case Ek.CLOSE:this._buttonState=Ek.CLOSE,this.closeLabel.revive(),this.newGameLabel.kill();break;case Ek.NEW_GAME:this._buttonState=Ek.NEW_GAME,this.closeLabel.kill(),this.newGameLabel.revive()}},t}(Ol.Z),Sk=Gn.Z.GAMEPLAY_DEFAULT,bk=Sk.KEY,Ik=Sk.FRAME,wk=(function(e){e.NEW_GAME="new",e.CLOSE="close"}({}),function(e){function t(t){return e.call(this,t,155.20833333333334,43.75)||this}(0,o.Z)(t,e);var n=t.prototype;return n.createBackground=function(){var e=this.scene.make.image({key:bk,frame:Ik.BTN_NEW_GAME});e.setWorldSize(this.width,this.height),this.add(e)},n.createNewGameLabel=function(){this.newGameLabel=new Jl(this.scene),this.newGameLabel.text.setMaxSize(110,30),this.add(this.newGameLabel)},n.createCloseLabel=function(){this.closeLabel=this.scene.make.bitmapText({font:Rc.Z.BOLD_SHADOW.KEY,size:this.scene.fontSize(21),text:"close",origin:{x:.5,y:.5}}),this.closeLabel.setMaxSize(130,30),this.add(this.closeLabel),Phaser.Display.Align.In.Center(this.closeLabel,this)},t}(Ak)),Pk=function(e){function t(t,n,i){var a;return(a=e.call(this,t,n,i)||this).labelContainer=void 0,a.setName("Share"),a.createBackground(),a.createLabel(),a}(0,o.Z)(t,e);var n=t.prototype;return n.hideContent=function(){this.setAlpha(0)},n.runEntranceAnimation=function(){var e=(0,r.Z)(l().mark((function e(){var t=this;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new(h())((function(e){t.scene.add.tween({targets:t,alpha:1,duration:200,onComplete:function(){t.setDisabled(!1),e()}})})));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),t}(Ol.Z),kk=Gn.Z.GAMEPLAY_DEFAULT,_k=kk.KEY,xk=kk.FRAME,Ok=function(e){function t(t){return e.call(this,t,130.20833333333334,43.75)||this}(0,o.Z)(t,e);var n=t.prototype;return n.createBackground=function(){var e=this.scene.make.image({key:_k,frame:xk.BTN_SHARE});e.setWorldSize(this.width,this.height),this.add(e)},n.createLabel=function(){this.labelContainer=new Jl(this.scene,{iconTextPadding:8,text:"share",iconFrame:Gn.Z.GAMEPLAY_DEFAULT.FRAME.IC_SHARE}),this.labelContainer.text.setMaxSize(92,30),this.labelContainer.icon.setWorldSize(18.75,21.875),this.add(this.labelContainer)},t}(Pk),Lk=function(e){function t(t){return e.call(this,t)||this}(0,o.Z)(t,e);var n=t.prototype;return n.setSizeContainer=function(){this.setSize(375,48)},n.createNewGameButton=function(){var e=new wk(this.scene);this.add(e),Phaser.Display.Align.In.RightCenter(e,this,-39),this.newGameButton=e},n.createShareButton=function(){var e=new Ok(this.scene);this.add(e),Phaser.Display.Align.In.LeftCenter(e,this,-39),this.shareButton=e},t}(Ck),Rk=function(e){function t(t,n,i,a,s,r,o){var c;return(c=e.call(this,t)||this).playerStat=void 0,c.opponentStat=void 0,c.background=void 0,c.setSize(r,o),c.createBackground(),c.addIcon(n),c.createLabel(i),c.createOpponentStat(s),c.createPlayerStat(a),c.setIgnoreLanguage(),c}(0,o.Z)(t,e);var n=t.prototype;return n.updateBackgroundAlpha=function(e){var t=e?HC:WC;this.background.setGradientPoints(t)},n.createBackground=function(){this.background=new zC(this.scene,this.width,this.height,WC),this.add(this.background)},n.setPlayerStat=function(e,t){void 0===t&&(t=!1),this.playerStat.setIgnoreLanguage(!t),this.playerStat.setText(e)},n.setOpponentStat=function(e,t){void 0===t&&(t=!1),this.opponentStat.setIgnoreLanguage(!t),this.opponentStat.setText(e)},n.setIgnoreLanguage=function(){this.playerStat.setIgnoreLanguage(),this.opponentStat.setIgnoreLanguage()},t}(Phaser.GameObjects.Container),Dk=function(e){function t(t,n,i,a,s,r,o){return e.call(this,t,n,i,a,s,r,o)||this}(0,o.Z)(t,e);var n=t.prototype;return n.addIcon=function(e){this.add(e),Phaser.Display.Align.In.Center(e,this,0,-5)},n.createLabel=function(e){var t=this.scene.make.bitmapText({font:Rc.Z.PRIMARY.KEY,size:this.scene.fontSize(13),text:e,origin:{x:.5,y:.5}});t.setMaxSize(70,20),this.add(t),Phaser.Display.Align.In.Center(t,this,0,13.5)},n.createPlayerStat=function(e){var t=this.scene.make.bitmapText({font:Rc.Z.PRIMARY.KEY,size:this.scene.fontSize(16),text:e,origin:{x:.5,y:.5}}).setTint(16444008);this.add(t),Phaser.Display.Align.In.Center(t,this,88),this.playerStat=t},n.createOpponentStat=function(e){var t=this.scene.make.bitmapText({font:Rc.Z.PRIMARY.KEY,size:this.scene.fontSize(16),text:e,origin:{x:.5,y:.5}});this.add(t),Phaser.Display.Align.In.Center(t,this,-88),this.opponentStat=t},t}(Rk),Bk=function(e){function t(t){var n;return(n=e.call(this,t)||this)._scoreStat=void 0,n._movesStat=void 0,n._timeStat=void 0,n.stats=[],n.setSizeContainer(),n.createScoreStatEntry(),n.createMovesStatEntry(),n.createTimeStatEntry(),n.stats=[n._scoreStat,n._movesStat,n._timeStat],n.updateStatBackgrounds(),n.alignContent(),n}(0,o.Z)(t,e);var n=t.prototype;return n.updateStatBackgrounds=function(){this.stats.forEach((function(e,t){e.updateBackgroundAlpha(t%2==0)}))},n.alignContent=function(){var e=this,t=this.height/3;this.stats.forEach((function(n,i){Phaser.Display.Align.In.TopCenter(n,e,0,-i*t)}))},n.runEntranceAnimationStats=function(){var e=(0,r.Z)(l().mark((function e(){var t,n,i=this;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[this._scoreStat,this._movesStat,this._timeStat],200,n=De()(t).call(t,(function(e,t){return new(h())((function(n){i.scene.add.tween({targets:e,duration:200,delay:200*t/2,ease:Phaser.Math.Easing.Sine.Out,props:{alpha:{from:0,to:1},y:{from:e.y+e.height/2,to:e.y}},onComplete:n})}))})),e.next=5,h().all(n);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.hideContent=function(){[this._scoreStat,this._movesStat,this._timeStat].forEach((function(e){return e.setAlpha(0)}))},n.runEntranceAnimation=function(){var e=(0,r.Z)(l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h().all([this.runEntranceAnimationStats()]);case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),(0,he.Z)(t,[{key:"scoreStat",get:function(){return this._scoreStat}},{key:"movesStat",get:function(){return this._movesStat}},{key:"timeStat",get:function(){return this._timeStat}}]),t}(Phaser.GameObjects.Container),Mk=Gn.Z.GAMEPLAY_DEFAULT,Nk=Mk.KEY,Gk=Mk.FRAME,Fk=function(e){function t(t){return e.call(this,t)||this}(0,o.Z)(t,e);var n=t.prototype;return n.setSizeContainer=function(){this.setSize(375,143)},n.createScoreStatEntry=function(){var e=this.scene.add.image(0,0,Nk,Gk.MEDAL_STAR_SHADOW);e.setWorldSize(19.5,22.5),this._scoreStat=new Dk(this.scene,e,"score","1234","687",this.width,this.height/3),this.add(this._scoreStat)},n.createMovesStatEntry=function(){var e=this.scene.add.image(0,0,Nk,Gk.ARROW_SWAP_HORIZONTAL);e.setWorldSize(20,22),this._movesStat=new Dk(this.scene,e,"moves","335","687",this.width,this.height/3),this.add(this._movesStat)},n.createTimeStatEntry=function(){var e=this.scene.add.image(0,0,Nk,Gk.TIMER);e.setWorldSize(19,22.5),this._timeStat=new Dk(this.scene,e,"time","07:25","09:45",this.width,this.height/3),this.add(this._timeStat)},t}(Bk),Zk=function(e){function t(t,n,i){var a;return(a=e.call(this,t,n,i)||this).header=void 0,a.avatarZone=void 0,a.stat=void 0,a.footer=void 0,a.modeText=void 0,a.gameTypeRibbon=void 0,a.gameType=void 0,a.setSizeContainer(),a.createGameType(),a.createHeader(),a.createModeText(),a.createAvatarZone(),a.createMatchStatistics(),a.createFooter(),a.handleInputs(),a.align(ak.WIN),a.setScale(jf(t)),a}(0,o.Z)(t,e);var n=t.prototype;return n.setGameType=function(e){this.gameTypeRibbon.setGameType(e),this.gameType=e},n.setModeText=function(e){this.modeText.setText(e)},n.handleInputs=function(){var e=this;this.footer.shareButton.onClick=function(){e.scene.storage.dispatch(kc(e.gameType))}},n.showModeText=function(e){this.modeText.setVisible(e)},n.hideContent=function(){this.avatarZone.hideContent(),this.stat.hideContent(),this.footer.hideContent()},n.runEntranceAnimation=function(){var e=(0,r.Z)(l().mark((function e(){var t;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.avatarZone.runEntranceAnimation();case 2:return e.next=4,this.stat.runEntranceAnimation();case 4:return t=this.scene,e.next=7,t.gameplay.finishGame();case 7:return e.next=9,this.footer.runEntranceAnimation();case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),t}(Phaser.GameObjects.Container),Uk=Gn.Z.GAMEPLAY_DEFAULT,zk=Uk.KEY,Hk=Uk.FRAME,Wk=function(e){function t(t,n,i){return e.call(this,t,n,i)||this}(0,o.Z)(t,e);var n=t.prototype;return n.setSizeContainer=function(){var e=(0,ul.t)(),t=this.scene.add.nineslice(0,0,zk,Hk.RESULT_SCREEN.POPUP,948/2.88*e,Kf*e,0*e,0*e,100/2.88*e,300/2.88*e);t.setScale(1/e),this.add(t),this.setSize(t.displayWidth,t.displayHeight)},n.createHeader=function(){this.header=new Tk(this.scene),this.add(this.header)},n.createModeText=function(){var e=this.scene.make.bitmapText({font:Rc.Z.PRIMARY.KEY,size:this.scene.fontSize(16),origin:{x:.5,y:.5},text:"standModeDraw1"});e.setMaxSize(330,30),this.add(e),Phaser.Display.Align.In.TopCenter(e,this),this.modeText=e},n.createGameType=function(){this.gameTypeRibbon=new bE(this.scene),this.add(this.gameTypeRibbon)},n.createMatchStatistics=function(){var e=new Fk(this.scene);this.add(e),this.stat=e},n.createFooter=function(){this.footer=new Lk(this.scene),this.add(this.footer)},n.createAvatarZone=function(){this.avatarZone=new hk(this.scene),this.add(this.avatarZone)},n.align=function(e){switch(e){case ak.WIN:Phaser.Display.Align.To.TopCenter(this.header,this,0,-Vf);break;case ak.DRAW:Phaser.Display.Align.To.TopCenter(this.header,this,0,-50);break;case ak.WAITING_FOR_OPPONENT:Phaser.Display.Align.To.TopCenter(this.header,this,0,-88);break;case ak.LOSE:default:Phaser.Display.Align.To.TopCenter(this.header,this,0,-90)}e==ak.WIN?(Phaser.Display.Align.To.TopCenter(this.gameTypeRibbon,this,0,-120),Phaser.Display.Align.In.TopCenter(this.modeText,this,0,-120),Phaser.Display.Align.In.TopCenter(this.avatarZone,this,0,-140),Phaser.Display.Align.In.Center(this.stat,this,0,85),Phaser.Display.Align.In.BottomCenter(this.footer,this,0,-15)):(Phaser.Display.Align.To.TopCenter(this.gameTypeRibbon,this,0,-109),Phaser.Display.Align.In.TopCenter(this.modeText,this,0,-110),Phaser.Display.Align.In.TopCenter(this.avatarZone,this,0,-130),Phaser.Display.Align.In.Center(this.stat,this,0,77),Phaser.Display.Align.In.BottomCenter(this.footer,this,0,-15))},t}(Zk),Yk=function(e){function t(t){var n;return(n=e.call(this,t)||this).background=void 0,n._popup=void 0,n.setContainerSize(),n.createPopup(),n.createDevButtons(),n}(0,o.Z)(t,e);var n=t.prototype;return n.setContainerSize=function(){var e=this.scene.gameZone,t=e.width,n=e.height;this.setSize(t,n)},n.addBackground=function(){var e="challenge-result-container-background";if(!this.scene.textures.exists(e)){var t=this.width,n=this.height,i=this.scene.add.graphics();i.fillStyle(859421,1),i.fillRect(0,0,t,n),i.generateTexture(e,t,n),i.destroy()}this.background=this.scene.add.image(0,0,e),this.background.kill(),this.add(this.background)},n.createDevButtons=function(){GameCore.Utils.Valid.isDebugger()&&this.createCloseButton()},n.hideContent=function(){this._popup.hideContent()},n.runEntranceAnimation=function(){var e=(0,r.Z)(l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._popup.runEntranceAnimation();case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),(0,he.Z)(t,[{key:"popup",get:function(){return this._popup}}]),t}(Phaser.GameObjects.Container),Kk=Gn.Z.GAMEPLAY_DEFAULT,Vk=Kk.KEY,jk=Kk.FRAME,Jk=function(e){function t(t){return e.call(this,t)||this}(0,o.Z)(t,e);var n=t.prototype;return n.createCloseButton=function(){var e=this,t=new Ol.Z(this.scene,40,40),n=this.scene.add.image(0,0,Vk,jk.IC_BG_OFF);n.setWorldSize(40,40);var i=this.scene.make.bitmapText({font:Rc.Z.PRIMARY.KEY,size:this.scene.fontSize(10),text:"Close",origin:{x:.5,y:.5}});i.setCenterAlign(),t.add([n,i]),this.add(t),Phaser.Display.Align.In.BottomLeft(t,this,0,-200),t.onClick=function(){e.scene.screen.close(Os.o4.PLAY_WITH_FRIEND_GAME_OVER_SCREEN)}},n.createPopup=function(){this._popup=new Wk(this.scene),this.add(this._popup),Phaser.Display.Align.In.Center(this._popup,this,0,0)},t}(Yk),Xk=Gn.Z.GAMEPLAY_DEFAULT,qk=Xk.KEY,Qk=Xk.FRAME,$k=function(e){return e.NEW_GAME="new",e.CLOSE="close",e}({}),e_=function(e){function t(t){return e.call(this,t,155.20833333333334,43.75)||this}(0,o.Z)(t,e);var n=t.prototype;return n.createBackground=function(){var e=this.scene.make.image({key:qk,frame:Qk.BTN_NEW_GAME});e.setWorldSize(this.width,this.height),this.add(e)},n.createNewGameLabel=function(){var e=new Jl(this.scene,{iconTextPadding:5,fontSize:12,iconKey:qk,iconFrame:Qk.IC_NEW,iconWidth:13,iconHeight:14.5});this.add([e]),e.text.setMaxSize(90,20),this.newGameLabel=e,Phaser.Display.Align.In.Center(e,this,0,-1)},n.createCloseLabel=function(){this.closeLabel=this.scene.make.bitmapText({font:Rc.Z.BOLD_SHADOW.KEY,size:this.scene.fontSize(20),text:"close",origin:{x:.5,y:.5}}),this.closeLabel.setMaxSize(100,20),this.add(this.closeLabel),Phaser.Display.Align.In.Center(this.closeLabel,this)},t}(Ak),t_="waiting",n_=new(function(){function e(){this._state=void 0,this._state=ak.WIN}return(0,he.Z)(e,[{key:"state",get:function(){return this._state},set:function(e){var t=game.globalScene.getActiveScene().screen.get(Os.o4.PLAY_WITH_FRIEND_GAME_OVER_SCREEN);t instanceof i_&&t.setGameOverInfo({state:e}),this._state=e}}]),e}());window.resultStateManager=n_;for(var i_=function(e){function t(t,n,i,a){var s;return(s=e.call(this,t,n,i,a)||this).playWithFriendGameOverContainer=void 0,s.closed=!1,s.scene instanceof UM&&s.setBackground(),s.setDepth(Os.Ks.POPUP),s.createContainer(),s}(0,o.Z)(t,e);var n=t.prototype;return n.open=function(t){e.prototype.open.call(this,t),this.closed=!1,this.runOpenAnimation(),n_.state!==ak.LOSE&&(this.playConfettiAnimation(),this.updateResultInfo())},n.playConfettiAnimation=function(){if(this.scene instanceof UM){var e=this.scene.gameplay.confettiSmallFallDown;this.add(this.scene.gameplay.confettiSmallFallDown),this.scene.sys.updateList.add(this.scene.gameplay.confettiSmallFallDown),e.run(8,0,0)}},n.stopConfettiAnimation=function(){this.scene instanceof UM&&this.scene.gameplay.confettiSmallFallDown.stop()},n.updateResultInfo=function(){var e=this.scene.storage.getState(),t=br(e),n=lo(e),i=this.scene.player.getPlayer().playerId,a=so(e).playerId,s=(n[i]||{}).score,r=(n[a]||{}).score,o=oo(e,{playerId:i}),c=co(e,{opponentId:a});t===Xa&&(o=!0,c=!0);var h,u,l=no(e),d=l.whitePlayerId,p=l.extraData,f=void 0===p?{}:p,g=i===d,m=g?f.blackPlayerData:f.whitePlayerData,v=g?f.whitePlayerData:f.blackPlayerData,y=f.gameType,T=f.options,C=v||{},E=C.moves,A=C.time,S=m||{},b=S.moves,I=S.time,w=o&&c,P=w&&s<r;h=w?w&&s>r?ak.WIN:P?ak.LOSE:ak.DRAW:ak.WAITING_FOR_OPPONENT,this.setGameOverInfo({state:h,options:T,playerScore:o?s:void 0,opponentScore:c?r:void 0,playerMoves:o?E:void 0,opponentMoves:c?b:void 0,playerTime:o?A:void 0,opponentTime:c?I:void 0,gameType:y}),this.scene.storage.dispatch((void 0===(u=!1)&&(u=!1),{type:"MATCH_RESUTL_FROM_MESSAGE",payload:{matchResultFromMessage:u}}))},n.setGameOverInfo=function(e){var t=this.playWithFriendGameOverContainer.popup,n=t.header,i=t.avatarZone,a=t.stat,s=i.youAvatar,r=i.opponentAvatar,o=this.scene.player.getPlayer(),c=o.playerId,h=o.photo,u=o.name;s.avatar.loadPhoto(c,h,70),s.username.setText(u);var l=this.scene.storage.getState(),d=so(l),p=d.playerId,f=d.photo,g=d.name;if(r.avatar.loadPhoto(p,f,70),p==Va.playerId?(r.username.setText("yourFriend"),r.username.setIgnoreLanguage(!1)):(r.username.setText(g),r.username.setIgnoreLanguage(!0)),e.state)switch(n.updateWinLoseText(e.state),i.updateState(e.state),e.state){case ak.LOSE:this.enableDarkBackground(),this.stopConfettiAnimation();break;case ak.WIN:case ak.DRAW:this.enableDarkBackground(!1);break;case ak.WAITING_FOR_OPPONENT:default:this.stopConfettiAnimation(),this.enableDarkBackground(!1)}var m=e.gameType,v=void 0===m?is.Z.KLONDIKE:m,y=e.options||{},T=y.draw3,C=y.suitSize,E=y.difficulty,A=y.relaxedSpider;t.setGameType(v),t.setModeText(DE(v,{draw3:T,suitSize:C,difficulty:E,relaxedSpider:A}));var S=a.scoreStat,b=a.movesStat,I=a.timeStat;void 0!==e.playerScore?S.setPlayerStat(""+e.playerScore):S.setPlayerStat(t_,!0),void 0!==e.opponentScore?S.setOpponentStat(""+e.opponentScore):S.setOpponentStat(t_,!0),void 0!==e.playerMoves?b.setPlayerStat(""+e.playerMoves):b.setPlayerStat(t_,!0),void 0!==e.opponentMoves?b.setOpponentStat(""+e.opponentMoves):b.setOpponentStat(t_,!0),void 0!==e.playerTime?I.setPlayerStat((0,Ds.F0)(e.playerTime,!1)):I.setPlayerStat(t_,!0),void 0!==e.opponentTime?I.setOpponentStat((0,Ds.F0)(e.opponentTime,!1)):I.setOpponentStat(t_,!0),t.align(e.state||ak.WIN)},n.enableDarkBackground=function(e){void 0===e&&(e=!0),Fn.Z.openScreen(this,e)},n.updateFinishingChallenge=function(){this.playWithFriendGameOverContainer.popup.footer.newGameButton.switchState($k.CLOSE)},t}(GameCore.Screen),a_=function(e){function t(t,n,i,a){var s;return(s=e.call(this,t,n,i,a)||this).fadeInAnimation=void 0,s.fadeOutAnimation=void 0,s.createBottomLogo(),Fn.Z.removeObject(s.background),s}(0,o.Z)(t,e);var n=t.prototype;return n.close=function(){this.closed=!0,this.runCloseAnimation(),this.stopConfettiAnimation()},n.runOpenAnimation=function(){var e=(0,r.Z)(l().mark((function e(){var t,n,i=this;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==(t=this.fadeInAnimation)||null==(n=t.tween)||!n.isPlaying()){e.next=2;break}return e.abrupt("return");case 2:this.scene.audio.playSound(Ls.Z.POPUP_SHOW),this.playWithFriendGameOverContainer.hideContent(),this.fadeInAnimation||(this.fadeInAnimation=new Mh.Z({targets:[this],onComplete:function(){var e=(0,r.Z)(l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.playWithFriendGameOverContainer.runEntranceAnimation();case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()})),this.fadeInAnimation.play();case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.runCloseAnimation=function(){var t,n,i=this;null!=(t=this.fadeOutAnimation)&&null!=(n=t.tween)&&n.isPlaying()||(this.scene.audio.playSound(Ls.Z.POPUP_OFF),this.fadeOutAnimation||(this.fadeOutAnimation=new zm.Z({targets:[this],props:{alpha:0},onComplete:function(){Fn.Z.closeScreen(i),e.prototype.close.call(i)}})),this.fadeOutAnimation.play())},n.setBackground=function(){this.background.setTint(1315862),this.background.setAlpha(.65)},n.createContainer=function(){this.playWithFriendGameOverContainer=new Jk(this.scene),this.add(this.playWithFriendGameOverContainer)},n.createBottomLogo=function(){var e=new RE(this.scene);Phaser.Display.Align.In.BottomCenter(e,this),this.add(e)},t}(i_),s_=Gn.Z.GAMEPLAY_DEFAULT,r_=s_.KEY,o_=s_.FRAME,c_=function(e){function t(t){return e.call(this,t)||this}(0,o.Z)(t,e);var n=t.prototype;return n.setSizeContainer=function(){this.setSize(54,120)},n.createShine=function(){this._shine=this.scene.add.image(0,0,r_,o_.AVATAR_SHINE),this._shine.setWorldSize(225,201),this.add(this._shine)},n.createAvatarFrame=function(){this._avatar=new Bc(this.scene,{key:r_,background:o_.AVATAR.BG_2,frame:o_.AVATAR_BLUE,width:72,height:72,loadDelay:100,backgroundWidth:70,backgroundHeight:70}),this._avatar.update(),this._avatar.loadPhoto(Ka.Z.AVATAR.KEY,Ka.Z.AVATAR.FILE,72),this.add(this._avatar)},n.createText=function(){this._username=this.scene.make.text({style:{fontFamily:Rc.Z.FONT_FAMILY},origin:{x:.5,y:.5}}),this._username.setHighQuality(),this._username.setFontSize(16),this._username.setText("Name"),this._username.setIgnoreLanguage(),this.add(this._username)},n.alignComponents=function(){Phaser.Display.Align.In.BottomCenter(this._username,this,0,0),Phaser.Display.Align.In.Center(this._avatar,this)},n.setWinner=function(e,t){void 0===e&&(e=!0),void 0===t&&(t=!0),this._shine.setVisible(e),1==e?(this._avatar.setFrame(o_.AVATAR_WIN),this._avatar.setFrameSize(70,70),this.runShineAnimation()):(t?this._avatar.setFrame(o_.AVATAR_ORANGE):this._avatar.setFrame(o_.AVATAR_BLUE),this._avatar.setFrameSize(72,72))},t}(QP),h_=Gn.Z.GAMEPLAY_DEFAULT,u_=h_.KEY,l_=h_.FRAME,d_=function(e){function t(t){return e.call(this,t)||this}(0,o.Z)(t,e);var n=t.prototype;return n.setSizeContainer=function(){this.setSize(375,100)},n.createAvatars=function(){this._youAvatar=new c_(this.scene),this._opponentAvatar=new c_(this.scene),this._youAvatar.username.setTint(16444008),this.add([this._youAvatar,this._opponentAvatar])},n.createVersusText=function(){this._versusText=this.scene.add.image(0,0,u_,l_.IC_VS),this._versusText.setWorldSize(174/2.88,44/2.88),this.add(this._versusText)},n.alignComponents=function(){Phaser.Display.Align.In.Center(this._versusText,this),Phaser.Display.Align.In.Center(this._youAvatar,this._versusText,90),Phaser.Display.Align.In.Center(this._opponentAvatar,this._versusText,-90)},n.updateState=function(e){switch(e){case ak.WIN:this._youAvatar.setWinner(!0),this._opponentAvatar.setWinner(!1,!1);break;case ak.LOSE:this._youAvatar.setWinner(!1),this._opponentAvatar.setWinner(!0,!1);break;case ak.DRAW:default:this._youAvatar.setWinner(!1),this._opponentAvatar.setWinner(!1,!1)}},t}(sk),p_=Gn.Z.GAMEPLAY_DEFAULT,f_=p_.KEY,g_=p_.FRAME,m_=function(e){function t(t){return e.call(this,t)||this}(0,o.Z)(t,e);var n=t.prototype;return n.createWinLoseText=function(){var e=this.scene.make.bitmapText({font:Rc.Z.BOLD_SHADOW_BLUR.KEY,size:this.scene.fontSize(27),origin:{x:.5,y:.5},text:"youWin"});this.add(e),Phaser.Display.Align.In.TopCenter(e,this,0,-65),this.winLoseText=e},n.addRibbon=function(){this.cardChain=new gk(this.scene);var e=this.scene.add.image(0,0,Gn.Z.GAMEPLAY_DEFAULT.KEY,g_.SUB_RIBBON);e.setWorldSize(177,45),this.ribbon=e,this.add([this.cardChain,e])},n.addSpadeAndHeart=function(){var e=this.scene.add.image(0,0,f_,g_.SPADE);e.setWorldSize(23.5,26.5);var t=this.scene.add.image(0,0,f_,g_.HEART);t.setWorldSize(22,26),this.add([e,t]),this.spade=e,this.heart=t},n.updateWinLoseText=function(e){var t=this;switch(this.stopWaitingAnimation(),e){case ak.WIN:this.winLoseText.setFont(Rc.Z.BOLD_SHADOW_BLUR.KEY),this.winLoseText.setFontSize(this.scene.fontSize(24)),this.winLoseText.setMaxSize(110,40,!0),this.winLoseText.setRadius(500),this.winLoseText.setText("youWin"),this.winLoseText.clearTint(),this.winLoseText.setGradientHorizontalTint([{at:0,color:16315097},{at:.5,color:16777215},{at:1,color:16315097}]),this.winLoseText.setRadius(1e3),this.winLoseText.setPosition(0,26),this.ribbon.setVisible(!0),this.spade.setVisible(!1),this.heart.setVisible(!1),this.ribbon.setTexture(f_,g_.PLAY_WITH_FRIEND.RIBBON_WIN),this.ribbon.setWorldSize(740/2.88,this.height),this.cardChain.kill();break;case ak.LOSE:this.winLoseText.setFont(Rc.Z.BOLD_SHADOW_BLUR.KEY),this.winLoseText.setFontSize(this.scene.fontSize(28)),this.winLoseText.setText("youLose"),this.winLoseText.setMaxSize(120,40,!0),this.winLoseText.clearGradientTint(),this.winLoseText.setTint(16777215,16777215,12833246,12833246),this.winLoseText.clearRadius(),this.winLoseText.setPosition(0,11),this.winLoseText.setPosition(0,47),this.spade.setVisible(!0),this.heart.setVisible(!0),Phaser.Display.Align.To.LeftCenter(this.spade,this.winLoseText,3,-1),Phaser.Display.Align.To.RightCenter(this.heart,this.winLoseText,2,-1),this.winLoseText.on("textChanged",(function(){Phaser.Display.Align.To.LeftCenter(t.spade,t.winLoseText,3,-1),Phaser.Display.Align.To.RightCenter(t.heart,t.winLoseText,2,-1)})),this.ribbon.setVisible(!1),this.cardChain.kill();break;case ak.DRAW:this.winLoseText.setFont(Rc.Z.BOLD_SHADOW_BLUR.KEY),this.winLoseText.setFontSize(this.scene.fontSize(20)),this.winLoseText.setMaxSize(105,40,!0),this.winLoseText.setText("draw"),this.winLoseText.clearTint(),this.winLoseText.setGradientHorizontalTint([{at:0,color:16315097},{at:.5,color:16777215},{at:1,color:16315097}]),this.winLoseText.setRadius(1e3),this.winLoseText.setPosition(1,30),this.ribbon.setVisible(!0),this.spade.setVisible(!1),this.heart.setVisible(!1),this.ribbon.setTexture(f_,g_.PLAY_WITH_FRIEND.RIBBON_DRAW),this.ribbon.setWorldSize(613/2.88,118.75),this.cardChain.kill();break;case ak.WAITING_FOR_OPPONENT:default:this.winLoseText.setFont(Rc.Z.BOLD.KEY),this.winLoseText.setFontSize(this.scene.fontSize(21)),this.winLoseText.setText("WAITING"),this.winLoseText.setMaxSize(120,40,!0),this.winLoseText.clearTint(),this.winLoseText.clearGradientTint(),this.winLoseText.setRadius(1e3),this.winLoseText.setPosition(0,-5),this.ribbon.setVisible(!0),this.spade.setVisible(!1),this.heart.setVisible(!1),this.ribbon.setTexture(Gn.Z.GAMEPLAY_DEFAULT.KEY,g_.SUB_RIBBON),this.ribbon.setWorldSize(217.71,55.35),this.cardChain.revive(),this.playWaitingAnimation(),this.cardChain.playAnimation(),this.cardChain.setPosition(0,-25)}e!=ak.LOSE&&this.winLoseText.off("textChanged")},t}(uk),v_=Gn.Z.GAMEPLAY_DEFAULT,y_=v_.KEY,T_=v_.FRAME,C_=function(e){function t(t){return e.call(this,t,130.20833333333334,43.75)||this}(0,o.Z)(t,e);var n=t.prototype;return n.createBackground=function(){var e=this.scene.make.image({key:y_,frame:T_.BTN_SHARE});e.setWorldSize(this.width,this.height),this.add(e)},n.createLabel=function(){var e=new Jl(this.scene,{iconTextPadding:5,fontSize:12,text:"share",iconKey:y_,iconFrame:T_.IC_SHARE,iconWidth:13.5,iconHeight:16.5});e.text.setMaxSize(72,20),this.add([e]),this.labelContainer=e,Phaser.Display.Align.In.Center(e,this)},t}(Pk),E_=function(e){function t(t){return e.call(this,t)||this}(0,o.Z)(t,e);var n=t.prototype;return n.setSizeContainer=function(){this.setSize(375,48)},n.createNewGameButton=function(){var e=new e_(this.scene);this.add(e),Phaser.Display.Align.In.RightCenter(e,this,-39),this.newGameButton=e},n.createShareButton=function(){var e=new C_(this.scene);this.add(e),Phaser.Display.Align.In.LeftCenter(e,this,-39),this.shareButton=e},t}(Ck),A_=function(e){function t(t,n,i,a,s,r,o){return e.call(this,t,n,i,a,s,r,o)||this}(0,o.Z)(t,e);var n=t.prototype;return n.addIcon=function(e){this.add(e),Phaser.Display.Align.In.Center(e,this,0,-5)},n.createLabel=function(e){var t=this.scene.make.bitmapText({font:Rc.Z.PRIMARY.KEY,size:this.scene.fontSize(13),text:e,origin:{x:.5,y:.5}});this.add(t),t.setMaxSize(50,10),Phaser.Display.Align.In.Center(t,this,0,13.5)},n.createPlayerStat=function(e){var t=this.scene.make.bitmapText({font:Rc.Z.PRIMARY.KEY,size:this.scene.fontSize(16),text:e,origin:{x:.5,y:.5}}).setTint(16444008);this.add(t),Phaser.Display.Align.In.Center(t,this,88),this.playerStat=t},n.createOpponentStat=function(e){var t=this.scene.make.bitmapText({font:Rc.Z.PRIMARY.KEY,size:this.scene.fontSize(16),text:e,origin:{x:.5,y:.5}});this.add(t),Phaser.Display.Align.In.Center(t,this,-88),this.opponentStat=t},t}(Rk),S_=Gn.Z.GAMEPLAY_DEFAULT,b_=S_.KEY,I_=S_.FRAME,w_=function(e){function t(t){return e.call(this,t)||this}(0,o.Z)(t,e);var n=t.prototype;return n.setSizeContainer=function(){this.setSize(375,143)},n.createScoreStatEntry=function(){var e=this.scene.add.image(0,0,b_,I_.MEDAL_STAR_SHADOW);e.setWorldSize(19.5,22.5),this._scoreStat=new A_(this.scene,e,"score","1234","687",this.width,this.height/3),this.add(this._scoreStat)},n.createMovesStatEntry=function(){var e=this.scene.add.image(0,0,b_,I_.ARROW_SWAP_HORIZONTAL);e.setWorldSize(20,22),this._movesStat=new A_(this.scene,e,"moves","335","687",this.width,this.height/3),this.add(this._movesStat)},n.createTimeStatEntry=function(){var e=this.scene.add.image(0,0,b_,I_.TIMER);e.setWorldSize(19,22.5),this._timeStat=new A_(this.scene,e,"time","07:25","09:45",this.width,this.height/3),this.add(this._timeStat)},t}(Bk),P_=Gn.Z.GAMEPLAY_DEFAULT,k_=P_.KEY,__=P_.FRAME,x_=function(e){function t(t,n,i){return e.call(this,t,n,i)||this}(0,o.Z)(t,e);var n=t.prototype;return n.setSizeContainer=function(){var e=(0,ul.t)(),t=this.scene.add.nineslice(0,0,k_,__.RESULT_SCREEN.POPUP,948/2.88*e,Kf*e,0*e,0*e,100/2.88*e,300/2.88*e);t.setScale(1/e),this.add(t),this.setSize(t.displayWidth,t.displayHeight)},n.createHeader=function(){this.header=new m_(this.scene),this.add(this.header)},n.createModeText=function(){var e=this.scene.make.bitmapText({font:Rc.Z.PRIMARY.KEY,size:this.scene.fontSize(16),origin:{x:.5,y:.5},text:"standModeDraw1"});e.setMaxSize(200,20),this.add(e),Phaser.Display.Align.In.TopCenter(e,this),this.modeText=e},n.createGameType=function(){this.gameTypeRibbon=new bE(this.scene),this.add(this.gameTypeRibbon)},n.createMatchStatistics=function(){var e=new w_(this.scene);this.add(e),this.stat=e},n.createFooter=function(){this.footer=new E_(this.scene),this.add(this.footer)},n.createAvatarZone=function(){this.avatarZone=new d_(this.scene),this.add(this.avatarZone)},n.align=function(e){switch(e){case ak.WIN:Phaser.Display.Align.To.TopCenter(this.header,this,0,-Vf);break;case ak.DRAW:Phaser.Display.Align.To.TopCenter(this.header,this,0,-50);break;case ak.WAITING_FOR_OPPONENT:Phaser.Display.Align.To.TopCenter(this.header,this,0,-88);break;case ak.LOSE:default:Phaser.Display.Align.To.TopCenter(this.header,this,0,-90)}e==ak.WIN?(Phaser.Display.Align.To.TopCenter(this.gameTypeRibbon,this,0,-120),Phaser.Display.Align.In.TopCenter(this.modeText,this,0,-120),Phaser.Display.Align.In.TopCenter(this.avatarZone,this,0,-140),Phaser.Display.Align.In.Center(this.stat,this,0,85),Phaser.Display.Align.In.BottomCenter(this.footer,this,0,-15)):(Phaser.Display.Align.To.TopCenter(this.gameTypeRibbon,this,0,-109),Phaser.Display.Align.In.TopCenter(this.modeText,this,0,-110),Phaser.Display.Align.In.TopCenter(this.avatarZone,this,0,-130),Phaser.Display.Align.In.Center(this.stat,this,0,77),Phaser.Display.Align.In.BottomCenter(this.footer,this,0,-15))},t}(Zk),O_=Gn.Z.GAMEPLAY_DEFAULT,L_=O_.KEY,R_=O_.FRAME,D_=function(e){function t(t){return e.call(this,t)||this}(0,o.Z)(t,e);var n=t.prototype;return n.createCloseButton=function(){var e=this,t=new Ol.Z(this.scene,40,40),n=this.scene.add.image(0,0,L_,R_.IC_BG_OFF);n.setWorldSize(40,40);var i=this.scene.make.bitmapText({font:Rc.Z.PRIMARY.KEY,size:this.scene.fontSize(10),text:"Close",origin:{x:.5,y:.5}});i.setCenterAlign(),t.add([n,i]),this.add(t),Phaser.Display.Align.In.BottomLeft(t,this,0,-200),t.onClick=function(){e.scene.screen.close(Os.o4.PLAY_WITH_FRIEND_GAME_OVER_SCREEN)}},n.createPopup=function(){this._popup=new x_(this.scene),this.add(this._popup),Phaser.Display.Align.In.Center(this._popup,this,0,0)},t}(Yk),B_=function(e){function t(t,n,i,a){var s;return(s=e.call(this,t,n,i,a)||this).fadeInAnimation=void 0,s.fadeOutAnimation=void 0,s}(0,o.Z)(t,e);var n=t.prototype;return n.close=function(){this.runCloseAnimation(),this.stopConfettiAnimation()},n.runOpenAnimation=function(){var e=(0,r.Z)(l().mark((function e(){var t,n,i=this;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==(t=this.fadeInAnimation)||null==(n=t.tween)||!n.isPlaying()){e.next=2;break}return e.abrupt("return");case 2:this.scene.audio.playSound(Ls.Z.POPUP_SHOW),this.playWithFriendGameOverContainer.hideContent(),this.fadeInAnimation||(this.fadeInAnimation=new Mh.Z({targets:[this],onComplete:function(){var e=(0,r.Z)(l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.playWithFriendGameOverContainer.runEntranceAnimation();case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()})),this.fadeInAnimation.play();case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.runCloseAnimation=function(){var t,n,i=this;null!=(t=this.fadeOutAnimation)&&null!=(n=t.tween)&&n.isPlaying()||(this.scene.audio.playSound(Ls.Z.POPUP_OFF),this.fadeOutAnimation||(this.fadeOutAnimation=new zm.Z({targets:[this],props:{alpha:0},onComplete:function(){Fn.Z.closeScreen(i),e.prototype.close.call(i)}})),this.fadeOutAnimation.play())},n.setBackground=function(){this.background.setTint(1315862),this.background.setAlpha(.65)},n.createContainer=function(){this.playWithFriendGameOverContainer=new D_(this.scene),this.add(this.playWithFriendGameOverContainer)},n.createBottomLogo=function(){},t}(i_),M_=GameCore.world.isLandscape()?B_:a_,N_=function(e){function t(t){var n;return(n=e.call(this,t)||this).endTime=void 0,n.countdownTimer=void 0,n.timerText=void 0,n.background=void 0,n.clockIcon=void 0,n.updateCountdown=(0,r.Z)(l().mark((function e(){var t,i,a;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=Date.now(),i=1e3*n.endTime-t,a=Math.round(Math.abs(i)/864e5),i<0&&(i=0),0!==i){e.next=7;break}return n.timerText.setText("noCompetitionMessage"),e.abrupt("return");case 7:i=1e3,(a=0)>=1?(1===a?n.timerText.setText("competitionEndInDay"):n.timerText.setText("competitionEndInDays"),n.timerText.setTranslationParameter("count",a)):(n.timerText.setText("competitionEndInMs"),n.timerText.setTranslationParameter("ms",(0,Ds.F0)(Math.abs(i),!0)));case 10:case"end":return e.stop()}}),e)}))),n.setSizeContainer(),n.createBackground(),n.createClockIcon(),n.createTimerContainer(),n.createCountdownTimer(),t.add.existing((0,As.Z)(n)),n}(0,o.Z)(t,e);var n=t.prototype;return n.createCountdownTimer=function(){var e;void 0!=this.endTime&&(0!=this.endTime?(null==(e=this.countdownTimer)||e.destroy(),this.countdownTimer=this.scene.time.addEvent({loop:!0,delay:1e3,startAt:1e3,callback:this.updateCountdown})):this.timerText.setText("noCompetitionMessage"))},n.setCountdown=function(e){this.endTime=e,this.createCountdownTimer()},n.getRemain=function(){if(void 0!=this.endTime){var e=Date.now(),t=1e3*this.endTime-e;return t<0?0:t}},t}(Phaser.GameObjects.Container),G_=N_,F_=Gn.Z.GAMEPLAY_DEFAULT,Z_=F_.KEY,U_=F_.FRAME,z_=466/2.88,H_=67/2.88,W_=function(e){function t(t){return e.call(this,t)||this}(0,o.Z)(t,e);var n=t.prototype;return n.setSizeContainer=function(){this.setSize(z_,H_)},n.createTimerContainer=function(){this.timerText=this.scene.make.bitmapText({font:Rc.Z.PRIMARY.KEY,size:this.scene.fontSize(20),origin:{x:.5,y:.5}}),this.timerText.setTint(15790071),this.timerText.setMaxSize(350,30),this.add([this.timerText])},n.createBackground=function(){this.background=this.scene.add.image(0,0,Z_,U_.TOURNAMENT.RESULT_TIME_BACKGROUND),this.background.setWorldSize(this.width,this.height),this.add(this.background)},n.createClockIcon=function(){this.clockIcon=this.scene.add.image(0,0,Z_,U_.TOURNAMENT.IC_CLOCK),this.clockIcon.setWorldSize(28/2.88,32/2.88),this.add(this.clockIcon)},n.setTimerText=function(e,t){void 0===t&&(t=!1),this.timerText.setText(e),"This competition is over"===e?(this.setSize(z_+30,H_),this.background.setWorldSize(this.width,this.height),this.timerText.setFontSize(this.scene.fontSize(13)),Phaser.Display.Align.In.Center(this.timerText,this.background,0,1),this.clockIcon.kill()):(this.setSize(z_,H_),this.background.setWorldSize(this.width,this.height),this.clockIcon.revive(),t?(this.timerText.setFontSize(this.scene.fontSize(13)),Phaser.Display.Align.In.Center(this.clockIcon,this.background,-50,-1),Phaser.Display.Align.In.Center(this.timerText,this.background,10,1)):(this.timerText.setFontSize(this.scene.fontSize(13)),Phaser.Display.Align.In.Center(this.clockIcon,this.background,-50,-.5),Phaser.Display.Align.In.Center(this.timerText,this.background,5,1.5)))},t}(G_),Y_=W_,K_=function(e){function t(t,n,i){var a;return(a=e.call(this,t,n,i)||this).setName("ContinueButton"),a.createContent(),a}return(0,o.Z)(t,e),t}(Ol.Z),V_=K_,j_=Gn.Z.GAMEPLAY_DEFAULT,J_=j_.KEY,X_=j_.FRAME,q_=function(e){function t(t,n,i){return e.call(this,t,n,i)||this}return(0,o.Z)(t,e),t.prototype.createContent=function(){var e=this.scene.make.image({key:J_,frame:X_.BTN_NEW_GAME});e.setWorldSize(this.width,this.height);var t=new Jl(this.scene,{text:"Continue",iconFrame:X_.TOURNAMENT.IC_PLAY,iconWidth:26/2.88*1.1,iconHeight:17.1875});this.add([e,t])},t}(V_),Q_=q_,$_=function(e){function t(t){var n;return(n=e.call(this,t)||this).buttons=[],n.continueButton=void 0,n.replayButton=void 0,n.setSizeContainer(),n.createContinueButton(),n.createReplayButton(),n.buttons=[n.continueButton,n.replayButton],n}(0,o.Z)(t,e);var n=t.prototype;return n.updateButtons=function(){},n.hideContent=function(){this.buttons.forEach((function(e){e.setAlpha(0)}))},n.runEntranceAnimationButtons=function(){var e=(0,r.Z)(l().mark((function e(){var t,n,i=this;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.continueButton.stopPulsate(),n=De()(t=this.buttons).call(t,(function(e){return new(h())((function(t){i.scene.add.tween({targets:[e],alpha:1,duration:200,onComplete:function(){e.setDisabled(!1),t(),i.continueButton.runPulsate()}})}))})),e.next=4,h().all(n);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),t}(Phaser.GameObjects.Container),ex=function(e){function t(t){return e.call(this,t)||this}(0,o.Z)(t,e);var n=t.prototype;return n.setSizeContainer=function(){this.setSize(375,43.75)},n.createContinueButton=function(){this.continueButton=new Q_(this.scene,447/2.88,this.height),this.add(this.continueButton),Phaser.Display.Align.In.RightCenter(this.continueButton,this,-45)},n.createReplayButton=function(){this.replayButton=new dA(this.scene,311/2.88,this.height),this.add(this.replayButton),Phaser.Display.Align.In.LeftCenter(this.replayButton,this,-45)},t}($_),tx={playerId:"10",name:"???",photo:"",score:0,rank:0},nx=[],ix=0;ix<4;ix++)nx.push((0,s.Z)({},tx,{rank:ix+1}));var ax=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n.timer=void 0,n.leaderList=void 0,n.footer=void 0,n.header=void 0,n.headerBanner=void 0,n.handleReplay=function(){n.scene instanceof UM&&n.scene.gameplay.replayGame(),n.scene.screen.close(Os.o4.TOURNAMENTS_RESULT_SCREEN)},n.handleContinue=(0,r.Z)(l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.scene.screen.open(Os.o4.TOURNAMENTS_SCREEN);case 1:case"end":return e.stop()}}),e)}))),n.scene=t,n.createHeaderBanner(),n.setSizeContainer(),n.createHeader(),n.createTimer(),n.createLeaderList(),n.createFooter(),n.alignComponents(),n.createDevButtons(),n.setScale(jf(t)),n}(0,o.Z)(t,e);var n=t.prototype;return n.createDevButtons=function(){GameCore.Utils.Valid.isDebugger()&&this.createCloseButton()},n.updateButtons=function(){this.footer.updateButtons()},n.updateTitle=function(e){void 0===e&&(e="Your tournament"),this.header.setTitle(e)},n.updateTimer=function(e){this.timer.setCountdown(e)},n.updateLeadersViaId=function(){var e=(0,r.Z)(l().mark((function e(t){var n,i,a,r,o,c,h,u,d,p,f=this;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=x()(n=[]).call(n,nx),this.leaderList.loading.revive(),this.leaderList.bringToTop(this.leaderList.loading),e.prev=3,e.next=6,(0,Ir.H$)(t,{limit:4});case 6:if(!((a=e.sent).length>0)){e.next=24;break}return o=De()(a).call(a,(function(e){return e.playerId})),e.next=12,this.scene.profile.requestProfiles(o);case 12:if(c=this.scene.profile.getProfiles(),h=!1,u=Le()(r=De()(a).call(a,(function(e){var t=e.playerId,n=e.score,i=e.rank,a=c[t];if(t===f.scene.player.getPlayerId()&&(h=!0),!a)return{playerId:t,photo:"",score:n,rank:i,name:"Player"};var s=a.name;return{playerId:t,photo:a.photo,score:n,rank:i,name:s}}))).call(r,(function(e){return null!==e})),!(u.length<1)){e.next=17;break}throw new Error("Leaderboard is empty");case 17:if(this.leaderList.revive(),u.forEach((function(e,t){i[t]=e})),h){e.next=24;break}return e.next=22,this.getCurrentPlayerLeaderDataPayload(t);case 22:d=e.sent,i[3]=(0,s.Z)({},d,{name:"You"});case 24:p=this.scene.player.getPlayerId(),i.forEach((function(e){e.playerId===p&&(e.name="You")})),this.leaderList.updateLeaders(i),e.next=33;break;case 30:e.prev=30,e.t0=e.catch(3);case 33:return e.prev=33,this.leaderList.loading.kill(),e.finish(33);case 36:case"end":return e.stop()}}),e,this,[[3,30,33,36]])})));return function(t){return e.apply(this,arguments)}}(),n.getCurrentPlayerLeaderDataPayload=function(){var e=(0,r.Z)(l().mark((function e(t){var n,i,a,s,r,o,c;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.scene.player.getPlayer(),i=n.playerId,a=n.name,s=n.photo,e.next=3,(0,Ir.xB)(i,t);case 3:if(r=e.sent){e.next=7;break}return e.abrupt("return",{playerId:i,photo:s,score:0,rank:0,name:a});case 7:return o=r.score,c=r.rank,e.abrupt("return",{playerId:i,photo:s,score:o,rank:c,name:a});case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.hideContent=function(){this.leaderList.hideContent(),this.footer.hideContent()},n.runEntranceAnimation=function(){var e=(0,r.Z)(l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.leaderList.runEntranceAnimation();case 2:return e.next=4,this.scene.gameplay.finishGame();case 4:return e.next=6,this.footer.runEntranceAnimationButtons();case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),t}(Phaser.GameObjects.Container),sx=function(e){function t(t){var n;return(n=e.call(this,t)||this).medalNo123=void 0,n.customizedMedal=void 0,n.rankLabel=void 0,n.rank=1,n.setSizeContainer(),n.createMedal123(),n.createCustomizedMedal(),n.createRankLabel(),n.setIgnoreLanguages(),n}(0,o.Z)(t,e);var n=t.prototype;return n.getRank=function(){return this.rank},n.setIgnoreLanguages=function(){this.rankLabel.setIgnoreLanguage()},n.getCorrectRankText=function(e){return e>99?"99+":0===e?"?":e.toString()},t}(Phaser.GameObjects.Container),rx=Gn.Z.GAMEPLAY_DEFAULT,ox=rx.KEY,cx=rx.FRAME,hx=function(e){function t(t){return e.call(this,t)||this}(0,o.Z)(t,e);var n=t.prototype;return n.setRank=function(e){var t=this.getCorrectRankText(e);switch(this.rank=e,this.rankLabel.setText(t),this.medalNo123.kill(),this.customizedMedal.kill(),t){case"1":this.medalNo123.revive(),this.medalNo123.setFrame(cx.TOURNAMENT.IC_1ST_BG),this.rankLabel.kill(),Phaser.Display.Align.In.Center(this.rankLabel,this.customizedMedal,0,7);break;case"2":this.medalNo123.revive(),this.medalNo123.setFrame(cx.TOURNAMENT.IC_2ND_BG),this.rankLabel.kill(),Phaser.Display.Align.In.Center(this.rankLabel,this.customizedMedal,0,7);break;case"3":this.medalNo123.revive(),this.medalNo123.setFrame(cx.TOURNAMENT.IC_3RD_BG),this.rankLabel.kill(),Phaser.Display.Align.In.Center(this.rankLabel,this.customizedMedal,0,7);break;default:this.customizedMedal.revive(),this.rankLabel.revive(),this.rankLabel.setTint(1066013),Phaser.Display.Align.In.Center(this.rankLabel,this.customizedMedal)}},n.setSizeContainer=function(){this.setSize(67/2.88,37.5)},n.createMedal123=function(){this.medalNo123=this.scene.add.image(0,0,ox,cx.TOURNAMENT.IC_1ST_BG),this.medalNo123.setWorldSize(67/2.88,37.5),this.add(this.medalNo123)},n.createCustomizedMedal=function(){this.customizedMedal=this.scene.add.image(0,0,ox,cx.TOURNAMENT.IC_NORMAL_BIG),this.customizedMedal.setWorldSize(23,23.5),this.add(this.customizedMedal)},n.createRankLabel=function(){this.rankLabel=this.scene.make.bitmapText({font:Rc.Z.BOLD.KEY,size:this.scene.fontSize(16),origin:{x:.5,y:.5},text:""+this.rank}).setTint(1525537),this.add(this.rankLabel)},t}(sx),ux=function(e){function t(t,n){var i;return void 0===n&&(n=!1),(i=e.call(this,t)||this).scene=void 0,i._isPlayer=!1,i.background=void 0,i.avatar=void 0,i.username=void 0,i.score=void 0,i.medalIcon=void 0,i.scoreIcon=void 0,i.payload=void 0,i.instantPlayerVisualIndicator=!1,i.scene=t,i.setSizeContainer(),i.createBackground(),i.createMedalIcon(),i.createAvatar(),i.createUsername(),i.createScore(),i.createScoreIcon(),i.alignComponents(),i.setIgnoreLanguages(),i.isPlayer=n,i}(0,o.Z)(t,e);var n=t.prototype;return n.setIgnoreLanguages=function(){this.score.setIgnoreLanguage()},n.createBackground=function(){this.background=new zC(this.scene,this.width,this.height,WC),this.add(this.background)},n.setScore=function(e){this.score.setText(""+e)},n.setUsername=function(e,t){void 0===t&&(t=!0);var n=GameCore.Utils.String.getShortName(e,12);this.username.setText(n),this.username.setIgnoreLanguage(t)},n.updateData=function(e,t){var n,i,a=e.playerId,s=void 0===a?"10":a,r=e.name,o=void 0===r?"???":r,c=e.photo,h=void 0===c?"":c,u=e.score,l=void 0===u?0:u,d=e.rank,p=void 0===d?0:d;this.payload&&(n=e,i=this.payload,n.playerId===i.playerId&&n.photo===i.photo&&n.score===i.score&&n.rank===i.rank&&n.name===i.name)||(this.payload=e,this.isPlayer=s===this.scene.player.getPlayerId(),this.score.setAlpha(0),this.username.setAlpha(0),this.avatar.setAlpha(0),this.setScore(l),this.medalIcon.setRank(p),0===l?(this.setUsername("waitingDots",!1),this.avatar.loadPhoto(Ka.Z.AVATAR.KEY,Ka.Z.AVATAR.FILE,60)):(this.setUsername(o),this.avatar.loadPhoto(s,h,60)),this.medalIcon.revive(),this.updateStyle(t,this.isPlayer),this.playRecentlyUpdatedComponentEntrancesAnimation())},n.playRecentlyUpdatedComponentEntrancesAnimation=function(){this.scene.add.tween({targets:[this.score,this.username,this.avatar],props:{alpha:{from:0,to:1}},duration:150})},n.hideContent=function(){this._isPlayer},n.runScalingAnimation=function(){var e=(0,r.Z)(l().mark((function e(){var t=this;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new(h())((function(e){t.scene.add.tween({targets:t,duration:200,ease:Phaser.Math.Easing.Cubic.In,props:{scale:.95},onComplete:function(){t.scene.add.tween({targets:t,ease:Phaser.Math.Easing.Elastic.Out,easeParams:[.1,.45],props:{scale:1},onComplete:e})}})})));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),n.runEntranceAnimation=function(){var e=(0,r.Z)(l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._isPlayer){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,h().all([this.runScalingAnimation()]);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),(0,he.Z)(t,[{key:"isPlayer",get:function(){return this._isPlayer},set:function(e){this._isPlayer=e,this._isPlayer&&this.updateStyle(0,this._isPlayer)}}]),t}(Phaser.GameObjects.Container);var lx=Gn.Z.GAMEPLAY_DEFAULT,dx=lx.KEY,px=lx.FRAME,fx=function(e){function t(t,n){return void 0===n&&(n=!1),e.call(this,t,n)||this}(0,o.Z)(t,e);var n=t.prototype;return n.updateStyle=function(e,t){t||this.isPlayer?(this.avatar.setFrame(px.AVATAR.LEADER_RESULT_YOU),this.score.setTint(16510057).setFont(Rc.Z.BOLD.KEY).setFontSize(this.scene.fontSize(21)),this.scoreIcon.setTint(16510057),Phaser.Display.Align.To.LeftCenter(this.scoreIcon,this.score,7,-2),this.username.setTint(16184823),this.background.setGradientPoints(YC)):(this.avatar.setFrame(px.AVATAR.LEADER_RESULT_NORMAL),this.score.setTint(12763071).setFont(Rc.Z.PRIMARY.KEY).setFontSize(this.scene.fontSize(20)),Phaser.Display.Align.To.LeftCenter(this.scoreIcon,this.score,7,-2),this.scoreIcon.clearTint(),this.username.setTint(12763071),e%2==0?this.background.setGradientPoints(HC):this.background.setGradientPoints(WC)),3===e?Phaser.Display.Align.In.LeftCenter(this.medalIcon,this.background,-15):Phaser.Display.Align.In.TopLeft(this.medalIcon,this.background,-15,1)},n.setSizeContainer=function(){this.setSize(938/2.88,137/2.88)},n.createAvatar=function(){this.avatar=new Bc(this.scene,{key:dx,background:px.AVATAR.RESULT_BG,frame:px.AVATAR.LEADER_RESULT_NORMAL,width:33,height:33,backgroundWidth:33,backgroundHeight:33,photoWidth:30,photoHeight:30,loadDelay:100}),this.avatar.update(),this.avatar.loadPhoto(Ka.Z.AVATAR.KEY,Ka.Z.AVATAR.FILE,100),this.add(this.avatar)},n.createUsername=function(){this.username=this.scene.make.text({style:{fontFamily:Rc.Z.FONT_FAMILY},origin:{x:0,y:.5}}),this.username.setHighQuality(),this.username.setFontSize(16),this.add(this.username)},n.createScore=function(){this.score=this.scene.make.bitmapText({font:Rc.Z.PRIMARY.KEY,size:this.scene.fontSize(16),origin:{x:1,y:.5}}),this.add(this.score),this.setScore(0)},n.createScoreIcon=function(){this.scoreIcon=this.scene.add.image(0,0,dx,px.MEDAL_STAR_SHADOW),this.scoreIcon.setWorldSize(21.875,73/2.88),this.add(this.scoreIcon)},n.createMedalIcon=function(){this.medalIcon=new hx(this.scene),this.medalIcon.kill(),this.add(this.medalIcon)},n.alignComponents=function(){Phaser.Display.Align.In.LeftCenter(this.medalIcon,this,-15),Phaser.Display.Align.To.RightCenter(this.avatar,this.medalIcon,8),Phaser.Display.Align.To.RightCenter(this.username,this.avatar,8),Phaser.Display.Align.In.RightCenter(this.score,this,-17)},t}(ux),gx=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n.leaders=[],n.loading=void 0,n.payload=[],n.scene=t,n.createLeaders(),n.alignLeaders(),n.createLoading(),n}(0,o.Z)(t,e);var n=t.prototype;return n.updateLeaders=function(e){(function(e,t){var n,i;if(e.length!==t.length)return!1;for(var a=ia()(n=A()(e).call(e)).call(n,(function(e,t){return e.rank-t.rank})),s=ia()(i=A()(t).call(t)).call(i,(function(e,t){return e.rank-t.rank})),r=0;r<a.length;r++){var o=a[r],c=s[r];if(o.playerId!==c.playerId||o.photo!==c.photo||o.score!==c.score||o.rank!==c.rank||o.name!==c.name)return!1}return!0})(this.payload,e)||(this.payload=e,this.leaders.forEach((function(t,n){t.updateData((0,s.Z)({},e[n]),n)})))},n.alignLeaders=function(){var e=this,t=this.leaders.length,n=t*this.leaders[0].height+0*(t-1);this.setSize(375,n),this.leaders.forEach((function(t,n){0!==n?Phaser.Display.Align.To.BottomCenter(t,e.leaders[n-1],0,0):Phaser.Display.Align.In.TopCenter(t,e)}))},n.createLoading=function(){this.loading=new JS.Z(this.scene),this.loading.revive(),this.add(this.loading)},n.hideContent=function(){this.leaders.forEach((function(e){return e.setAlpha(0)})),this.leaders.forEach((function(e){return e.hideContent()}))},n.runEntranceAnimation=function(){var e=(0,r.Z)(l().mark((function e(){var t,n,i,a,s=this;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=De()(t=this.leaders).call(t,(function(e,t){return new(h())((function(n){s.scene.add.tween({targets:[e],duration:250,delay:250*t/2,ease:Phaser.Math.Easing.Cubic.Out,props:{alpha:{from:0,to:1},y:{from:e.y+e.height/2,to:e.y},scale:{from:.85,to:1,ease:Phaser.Math.Easing.Elastic.Out,easeParams:[.1,.45],duration:1e3}},onComplete:n})}))})),e.next=3,h().all(i);case 3:return a=De()(n=this.leaders).call(n,(function(e){return e.runEntranceAnimation()})),e.next=6,h().all(a);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),t}(Phaser.GameObjects.Container);var mx=function(e){function t(t){return e.call(this,t)||this}return(0,o.Z)(t,e),t.prototype.createLeaders=function(){for(var e=0;e<4;e++){var t=new fx(this.scene);this.leaders.push(t),3===e&&(t.isPlayer=!0);var n={playerId:e.toString(),photo:"",score:0,rank:e+1,name:"player"};t.updateData(n,e)}this.add(this.leaders)},t}(gx),vx=Gn.Z.GAMEPLAY_DEFAULT,yx=vx.KEY,Tx=vx.FRAME,Cx=function(e){function t(t){var n;return(n=e.call(this,t)||this).titleText=void 0,n.debugGameTypeTag=void 0,n.setSize(939/2.88,262/2.88),t.add.existing((0,As.Z)(n)),n.createContent(),n.createDebugGameTypeTag(),n}(0,o.Z)(t,e);var n=t.prototype;return n.setTitle=function(e){e=GameCore.Utils.String.removeDiacritics(e),this.titleText.setText(e),this.titleText.setPosition(14-this.width/2,0)},n.createContent=function(){var e=this.scene.add.image(0,0,yx,Tx.TOURNAMENT.RESULT_RIBBON);e.setWorldSize(852/2.88,313/2.88);var t=this.scene.make.bitmapText({font:Rc.Z.BOLD_SHADOW_BLUR.KEY,size:this.scene.fontSize(20),text:"TOURNAMENT",origin:{x:.5,y:.5}});t.setRadius(400),t.setGradientHorizontalTint([{at:0,color:16315097},{at:.5,color:16777215},{at:1,color:16315097}]),this.titleText=this.scene.add.bitmapText(0,0,Rc.Z.BOLD.KEY,"Hurry up!\nJoin the tournament\nnow!",this.scene.fontSize(19)).setLeftAlign().setTint(15786748).setOrigin(0,.5).setMaxWidth(195);var n=this.scene.add.image(0,0,yx,Tx.TOURNAMENT.LINE_DIVIDE);n.setWorldSize(937/2.88,1),this.add([this.titleText,n,e,t]),Phaser.Display.Align.To.BottomCenter(n,this),Phaser.Display.Align.To.TopCenter(e,this,0,-15),Phaser.Display.Align.In.Center(t,e,0,16)},n.createDebugGameTypeTag=function(){GameCore.Utils.Valid.isDebugger()&&(this.debugGameTypeTag=new hy(this.scene,"popup",50,30),this.add(this.debugGameTypeTag),Phaser.Display.Align.In.BottomLeft(this.debugGameTypeTag,this,-30,40))},t}(Phaser.GameObjects.Container),Ex=Cx,Ax=Gn.Z.GAMEPLAY_DEFAULT,Sx=(Ax.KEY,Ax.FRAME,function(e){function t(t){return e.call(this,t)||this}return(0,o.Z)(t,e),t}(Ex)),bx=Sx,Ix=Gn.Z.GAMEPLAY_DEFAULT,wx=Ix.KEY,Px=Ix.FRAME,kx=vE.iD.FOOTER,_x=(vE.iD.LEADER_LIST.WIDTH,kx.HEIGHT,function(e){function t(t){return e.call(this,t)||this}(0,o.Z)(t,e);var n=t.prototype;return n.updateHeaderBanner=function(e){this.headerBanner.setFrame(Gn.Z.TOURNAMENT_BANNER.FRAME.getBanner(e))},n.createHeaderBanner=function(){var e=this.scene.add.image(0,0,Gn.Z.TOURNAMENT_BANNER.KEY,Gn.Z.TOURNAMENT_BANNER.FRAME.getBanner(0));e.setWorldSize(1e3/2.88,262/2.88);e.setCropByViewport({x:0,y:0,width:325.5,height:e.displayHeight}),this.add(e),this.headerBanner=e},n.setSizeContainer=function(){var e=new Lf(this.scene,{width:952/2.88,height:1213/2.88,key:wx,frame:Px.TOURNAMENT.POPUP});this.add(e),this.setSize(e.width,e.height)},n.createHeader=function(){this.header=new bx(this.scene),this.add(this.header)},n.createTimer=function(){this.timer=new Y_(this.scene),this.add(this.timer)},n.createLeaderList=function(){this.leaderList=new mx(this.scene),this.add(this.leaderList)},n.createFooter=function(){this.footer=new ex(this.scene),this.add(this.footer),this.footer.replayButton.onClick=this.handleReplay,this.footer.continueButton.onClick=this.handleContinue},n.createCloseButton=function(){var e=this;if(GameCore.Utils.Valid.isDebugger()){var t=new Ol.Z(this.scene,40,40);this.add(t);var n=this.scene.add.image(0,0,wx,Px.IC_BG_OFF);n.setWorldSize(40,40);var i=this.scene.make.bitmapText({font:Rc.Z.PRIMARY.KEY,size:this.scene.fontSize(10),text:"Close",origin:{x:.5,y:.5}});i.setCenterAlign(),t.add([n,i]),Phaser.Display.Align.In.TopRight(t,this,-20,-80),t.onClick=(0,r.Z)(l().mark((function t(){return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.scene.screen.close(Os.o4.TOURNAMENTS_RESULT_SCREEN);case 1:case"end":return t.stop()}}),t)})))}},n.alignComponents=function(){this.header.setPosition(0,-163),this.headerBanner.setPosition(0,this.header.y+.25),Phaser.Display.Align.To.BottomCenter(this.timer,this.header,0,14),Phaser.Display.Align.To.BottomCenter(this.leaderList,this.timer,0,14),Phaser.Display.Align.To.BottomCenter(this.footer,this.leaderList,0,31)},t}(ax)),xx=function(e){function t(t,n,i,a){var s;return(s=e.call(this,t,n,i,a)||this).scene=void 0,s.container=void 0,s.closed=!1,s.payload=void 0,s.scene=t,s.setBackground(),s.createContainer(),s.setDepth(Os.Ks.POPUP),s}(0,o.Z)(t,e);var n=t.prototype;return n.open=function(){var t=(0,r.Z)(l().mark((function t(n){return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.prototype.open.call(this,n),this.payload=n?n.payload:void 0,this.updateInfo(),this.container.setAlpha(1),this.container.setInteractive(),this.runOpenAnimation(),this.closed=!1,this.add(this.scene.gameplay.confettiSmallFallDown),this.scene.sys.updateList.add(this.scene.gameplay.confettiSmallFallDown),this.scene.gameplay.confettiSmallFallDown.run(8,0,0);case 10:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),n.updateInfo=function(){var e=(0,r.Z)(l().mark((function e(){var t,n,i,a,s,r,o,c,h;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,oS.getData().catch((function(){return{id:0,title:"Your Tournament",endTime:604800+Date.now()/1e3,contextID:""}}));case 2:if(r=e.sent){e.next=5;break}return e.abrupt("return");case 5:if(null==(t=this.container.header.debugGameTypeTag)||t.setGameType(null==(n=r.payload)?void 0:n.gameType),o=$b(null==r?void 0:r.id),c=void 0==(null==(i=r.payload)?void 0:i.image)?o:null==(a=r.payload)?void 0:a.image,this.container.updateHeaderBanner(c),this.container.updateTitle(r.title),this.container.updateTimer(r.endTime),this.container.updateButtons(),this.container.alignComponents(),!(h=null==(s=r.payload)?void 0:s.leaderboardId)){e.next=17;break}return e.next=17,this.container.updateLeadersViaId(h);case 17:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.close=function(){e.prototype.close.call(this)},n.stopConfettiAnimation=function(){this.scene.gameplay.confettiSmallFallDown.emitter.stop()},t}(GameCore.Screen),Ox=function(e){function t(t,n,i,a){var s;return(s=e.call(this,t,n,i,a)||this).fadeInAnimation=void 0,s.fadeOutAnimation=void 0,s.handleClickTournaments=function(){s.scene.time.delayedCall(100,(function(){s.closed||s.scene.screen.close(s.name)}))},s.setBackground(),s.createBottomLogo(),Fn.Z.removeObject(s.background),s}(0,o.Z)(t,e);var n=t.prototype;return n.close=function(){this.closed=!0,this.runCloseAnimation(),this.stopConfettiAnimation()},n.createContainer=function(){this.container=new _x(this.scene),this.add(this.container)},n.createBottomLogo=function(){if(!this.scene.world.isLandscape()){var e=new RE(this.scene);this.add(e),Phaser.Display.Align.In.BottomCenter(e,this)}},n.runOpenAnimation=function(){var e=(0,r.Z)(l().mark((function e(){var t,n,i=this;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==(t=this.fadeInAnimation)||null==(n=t.tween)||!n.isPlaying()){e.next=2;break}return e.abrupt("return");case 2:this.scene.audio.playSound(Ls.Z.POPUP_SHOW),this.container.hideContent(),this.container.footer.continueButton.stopPulsate(),this.fadeInAnimation||(this.fadeInAnimation=new Mh.Z({targets:[this],onComplete:function(){var e=(0,r.Z)(l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.container.runEntranceAnimation();case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()})),this.fadeInAnimation.play();case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.runCloseAnimation=function(){var t,n,i=this;null!=(t=this.fadeOutAnimation)&&null!=(n=t.tween)&&n.isPlaying()||(this.scene.audio.playSound(Ls.Z.POPUP_OFF),this.fadeOutAnimation||(this.fadeOutAnimation=new zm.Z({targets:[this],props:{alpha:0},onComplete:function(){e.prototype.close.call(i)}})),this.fadeOutAnimation.play())},n.setBackground=function(){this.background.setTint(1315862),this.background.setAlpha(.65)},t}(xx),Lx=function(e){function t(t){return e.call(this,t)||this}(0,o.Z)(t,e);var n=t.prototype;return n.setSizeContainer=function(){this.setSize(375,43.75)},n.createContinueButton=function(){this.continueButton=new Q_(this.scene,447/2.88,this.height),this.add(this.continueButton),Phaser.Display.Align.In.RightCenter(this.continueButton,this,-45)},n.createReplayButton=function(){this.replayButton=new dA(this.scene,311/2.88,this.height),this.add(this.replayButton),Phaser.Display.Align.In.LeftCenter(this.replayButton,this,-45)},t}($_),Rx=Gn.Z.GAMEPLAY_DEFAULT,Dx=(Rx.KEY,Rx.FRAME,function(e){function t(t){return e.call(this,t)||this}return(0,o.Z)(t,e),t}(Ex)),Bx=Dx,Mx=Gn.Z.GAMEPLAY_DEFAULT,Nx=Mx.KEY,Gx=Mx.FRAME,Fx=vE.iD.FOOTER,Zx=(vE.iD.LEADER_LIST.WIDTH,Fx.HEIGHT,function(e){function t(t){return e.call(this,t)||this}(0,o.Z)(t,e);var n=t.prototype;return n.updateHeaderBanner=function(e){this.headerBanner.setFrame(Gn.Z.TOURNAMENT_BANNER.FRAME.getBanner(e))},n.createHeaderBanner=function(){var e=this.scene.add.image(0,0,Gn.Z.TOURNAMENT_BANNER.KEY,Gn.Z.TOURNAMENT_BANNER.FRAME.getBanner(0));e.setWorldSize(1e3/2.88,262/2.88);e.setCropByViewport({x:0,y:0,width:325.5,height:e.displayHeight}),this.add(e),this.headerBanner=e},n.setSizeContainer=function(){var e=new Lf(this.scene,{width:952/2.88,height:1213/2.88,key:Nx,frame:Gx.TOURNAMENT.POPUP});this.add(e),this.setSize(e.width,e.height)},n.createHeader=function(){this.header=new Bx(this.scene),this.add(this.header)},n.createTimer=function(){this.timer=new Y_(this.scene),this.add(this.timer)},n.createLeaderList=function(){this.leaderList=new mx(this.scene),this.add(this.leaderList)},n.createFooter=function(){this.footer=new Lx(this.scene),this.add(this.footer),this.footer.replayButton.onClick=this.handleReplay,this.footer.continueButton.onClick=this.handleContinue},n.createCloseButton=function(){var e=this;if(GameCore.Utils.Valid.isDebugger()){var t=new Ol.Z(this.scene,40,40);this.add(t);var n=this.scene.add.image(0,0,Nx,Gx.IC_BG_OFF);n.setWorldSize(40,40);var i=this.scene.make.bitmapText({font:Rc.Z.PRIMARY.KEY,size:this.scene.fontSize(10),text:"Close",origin:{x:.5,y:.5}});i.setCenterAlign(),t.add([n,i]),Phaser.Display.Align.In.TopRight(t,this,-20,-80),t.onClick=(0,r.Z)(l().mark((function t(){return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.scene.screen.close(Os.o4.TOURNAMENTS_RESULT_SCREEN);case 1:case"end":return t.stop()}}),t)})))}},n.alignComponents=function(){this.header.setPosition(0,-163),this.headerBanner.setPosition(0,this.header.y+.25),Phaser.Display.Align.To.BottomCenter(this.timer,this.header,0,14),Phaser.Display.Align.To.BottomCenter(this.leaderList,this.timer,0,14),Phaser.Display.Align.To.BottomCenter(this.footer,this.leaderList,0,31)},t}(ax)),Ux=function(e){function t(t,n,i,a){var s;return(s=e.call(this,t,n,i,a)||this).fadeInAnimation=void 0,s.fadeOutAnimation=void 0,s.handleClickTournaments=function(){s.scene.time.delayedCall(100,(function(){s.closed||s.scene.screen.close(s.name)}))},s.setBackground(),s.createBottomLogo(),s}(0,o.Z)(t,e);var n=t.prototype;return n.close=function(){this.closed=!0,this.runCloseAnimation(),this.stopConfettiAnimation()},n.createContainer=function(){this.container=new Zx(this.scene),this.add(this.container)},n.createBottomLogo=function(){if(!this.scene.world.isLandscape()){var e=new RE(this.scene);this.add(e),Phaser.Display.Align.In.BottomCenter(e,this)}},n.runOpenAnimation=function(){var e=(0,r.Z)(l().mark((function e(){var t,n,i=this;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==(t=this.fadeInAnimation)||null==(n=t.tween)||!n.isPlaying()){e.next=2;break}return e.abrupt("return");case 2:this.scene.audio.playSound(Ls.Z.POPUP_SHOW),this.container.hideContent(),this.container.footer.continueButton.stopPulsate(),this.fadeInAnimation||(this.fadeInAnimation=new Mh.Z({targets:[this],onComplete:function(){var e=(0,r.Z)(l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.container.runEntranceAnimation();case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()})),this.fadeInAnimation.play();case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.runCloseAnimation=function(){var t,n,i=this;null!=(t=this.fadeOutAnimation)&&null!=(n=t.tween)&&n.isPlaying()||(this.scene.audio.playSound(Ls.Z.POPUP_OFF),this.fadeOutAnimation||(this.fadeOutAnimation=new zm.Z({targets:[this],props:{alpha:0},onComplete:function(){e.prototype.close.call(i)}})),this.fadeOutAnimation.play())},n.setBackground=function(){this.background.setTint(1315862),this.background.setAlpha(.65)},t}(xx),zx=GameCore.world.isLandscape()?Ux:Ox,Hx=Gn.Z.JOURNEY,Wx=Hx.KEY,Yx=Hx.FRAME,Kx=function(e){function t(t){var n;return(n=e.call(this,t)||this).leftIcon=void 0,n.rightIcon=void 0,n.title=void 0,n.setSize(375,27),n.createIcons(),n.createTitle(),n.align(),n.title.on("textChanged",(function(){n.align()})),n}(0,o.Z)(t,e);var n=t.prototype;return n.createIcons=function(){this.leftIcon=this.scene.add.image(0,0,Wx,Yx.AWESOME_SCREEN.RECTANGLE_TITLE),this.leftIcon.setWorldSize(12,12.5),this.rightIcon=this.scene.add.image(0,0,Wx,Yx.AWESOME_SCREEN.RECTANGLE_TITLE),this.rightIcon.setWorldSize(12,12.5),this.add([this.leftIcon,this.rightIcon])},n.createTitle=function(){this.title=this.scene.make.bitmapText({font:Rc.Z.BOLD_SHADOW_BLUR.KEY,size:this.scene.fontSize(24),origin:{x:.5,y:.5}}),this.title.setTranslationParameters({levelNumber:"1"}),this.title.setText("levelXChallenge"),this.title.setMaxSize(350,30),this.title.setTint(16449487,16449487,15913325,15913325),this.add(this.title)},n.align=function(){Phaser.Display.Align.To.RightCenter(this.rightIcon,this.title,5),Phaser.Display.Align.To.LeftCenter(this.leftIcon,this.title,5)},n.setLevel=function(e){this.title.setTranslationParameters({levelNumber:e.toString()}),this.align()},t}(Phaser.GameObjects.Container),Vx=Gn.Z.JOURNEY,jx=Vx.KEY,Jx=Vx.FRAME,Xx=function(e){function t(t){var n;return(n=e.call(this,t)||this).background=void 0,n.missionText=void 0,n.levelLabel=void 0,n.updateSize(),n.createBackground(),n.createLevelLabel(),n.createMissionText(),n.setScale(jf(n.scene)),n}(0,o.Z)(t,e);var n=t.prototype;return n.updateInfo=function(e,t){var n=e.key,i=e.interpolations,a=void 0===i?{}:i;this.missionText.setText(n),this.missionText.setTranslationParameters(a),this.levelLabel.setLevel(t)},n.updateSize=function(){this.setSize(374,130)},n.createBackground=function(){this.background=this.scene.add.image(0,0,jx,Jx.WELCOME_FRAME),this.background.setWorldSize(1077/2.88,410/2.88),this.add(this.background)},n.createLevelLabel=function(){this.levelLabel=new Kx(this.scene),this.add(this.levelLabel),Phaser.Display.Align.In.Center(this.levelLabel,this,0,-20)},n.createMissionText=function(){this.missionText=this.scene.make.bitmapText({font:Rc.Z.BOLD_SHADOW_BLUR.KEY,size:this.scene.fontSize(20),text:"Having full stack for 1 tablue",origin:{x:.5,y:.5}}),this.missionText.setCenterAlign(),this.missionText.setMaxSize(360,30),this.add(this.missionText),Phaser.Display.Align.In.Center(this.missionText,this,0,21)},t}(Phaser.GameObjects.Container),qx=function(e){function t(t,n,i,a){var s;return(s=e.call(this,t,n,i,a)||this).fadeInAnimation=void 0,s.fadeOutAnimation=void 0,s.container=void 0,s.setBackground=function(){var e=s.scene.theme.getCurrentThemeConfig().backgroundKey;s.background.setTexture(e);var t=s.scene.gameZone,n=t.width,i=t.height;s.background.setWorldSize(n,i),s.background.setVisible(!1)},s.setDepth(Os.Ks.POPUP),s.setBackground(),s.createContainer(),s.scene.events.on(Lr.BACKGROUND_CHANGED,s.setBackground),s}(0,o.Z)(t,e);var n=t.prototype;return n.createContainer=function(){this.container=new Xx(this.scene),this.add(this.container)},n.open=function(){e.prototype.open.call(this),this.setBlockInputOutsideEnabled(!0),this.updateData(),this.runOpenAnimation()},n.close=function(){this.runCloseAnimation()},n.updateData=function(){if(this.scene instanceof UM){var e=this.scene.journeyLevelMechanicManager.getMissionDescription(),t=this.scene.journey.getCurrentLevel();e&&this.container.updateInfo(e,t)}},n.runOpenAnimation=function(){this.scene.audio.playSound(Ls.Z.POPUP_SHOW),this.fadeInAnimation||(this.fadeInAnimation=new Mh.Z({targets:[this]})),this.fadeInAnimation.play()},n.runCloseAnimation=function(){var t,n,i=this;null!=(t=this.fadeOutAnimation)&&null!=(n=t.tween)&&n.isPlaying()||(this.scene.audio.playSound(Ls.Z.POPUP_OFF),this.fadeOutAnimation||(this.fadeOutAnimation=new zm.Z({targets:[this],props:{alpha:0},onComplete:function(){e.prototype.close.call(i)}})),this.fadeOutAnimation.play())},t}(GameCore.Screen),Qx=Gn.Z.JOURNEY,$x=Qx.KEY,eO=Qx.FRAME,tO=function(e){function t(t){var n;return(n=e.call(this,t)||this).leftIcon=void 0,n.rightIcon=void 0,n.title=void 0,n.setSize(375,27),n.createIcons(),n.createTitle(),n.align(),n.title.on("textChanged",(function(){n.align()})),n}(0,o.Z)(t,e);var n=t.prototype;return n.createIcons=function(){this.leftIcon=this.scene.add.image(0,0,$x,eO.AWESOME_SCREEN.RECTANGLE_TITLE),this.leftIcon.setWorldSize(12,12.5),this.rightIcon=this.scene.add.image(0,0,$x,eO.AWESOME_SCREEN.RECTANGLE_TITLE),this.rightIcon.setWorldSize(12,12.5),this.add([this.leftIcon,this.rightIcon])},n.createTitle=function(){this.title=this.scene.make.bitmapText({font:Rc.Z.BOLD_SHADOW_BLUR.KEY,size:this.scene.fontSize(18),origin:{x:.5,y:.5}}),this.title.setTranslationParameters({levelNumber:"1"}),this.title.setText("levelXChallenge"),this.title.setMaxSize(375,25),this.title.setTint(16449487,16449487,15913325,15913325),this.add(this.title)},n.align=function(){Phaser.Display.Align.To.RightCenter(this.rightIcon,this.title,5),Phaser.Display.Align.To.LeftCenter(this.leftIcon,this.title,5)},n.setLevel=function(e){this.title.setTranslationParameters({levelNumber:e.toString()}),this.align()},t}(Phaser.GameObjects.Container),nO=Gn.Z.JOURNEY,iO=nO.KEY,aO=nO.FRAME,sO=function(e){function t(t){var n;return(n=e.call(this,t)||this).background=void 0,n.missionText=void 0,n.levelLabel=void 0,n.updateSize(),n.createBackground(),n.createLevelLabel(),n.createMissionText(),n.setScale(jf(n.scene)),n}(0,o.Z)(t,e);var n=t.prototype;return n.updateInfo=function(e,t){var n=e.key,i=e.interpolations,a=void 0===i?{}:i;this.missionText.setText(n),this.missionText.setTranslationParameters(a),this.levelLabel.setLevel(t)},n.updateSize=function(){this.setSize(374,130)},n.createBackground=function(){this.background=this.scene.add.image(0,0,iO,aO.WELCOME_FRAME),this.background.setWorldSize(1077/2.88,410/2.88),this.add(this.background)},n.createLevelLabel=function(){this.levelLabel=new tO(this.scene),this.add(this.levelLabel),Phaser.Display.Align.In.Center(this.levelLabel,this,0,-20)},n.createMissionText=function(){this.missionText=this.scene.make.bitmapText({font:Rc.Z.BOLD_SHADOW_BLUR.KEY,size:this.scene.fontSize(20),text:"Having full stack for 1 tablue",origin:{x:.5,y:.5}}),this.missionText.setCenterAlign(),this.missionText.setMaxSize(350,20),this.add(this.missionText),Phaser.Display.Align.In.Center(this.missionText,this,0,21)},t}(Phaser.GameObjects.Container),rO=function(e){function t(t,n,i,a){var s;return(s=e.call(this,t,n,i,a)||this).fadeInAnimation=void 0,s.fadeOutAnimation=void 0,s.container=void 0,s.setBackground=function(){var e=s.scene.theme.getCurrentThemeConfig().backgroundKey;s.background.setTexture(e);var t=s.scene.gameZone,n=t.width,i=t.height;s.background.setWorldSize(n,i),s.background.setVisible(!1)},s.setDepth(Os.Ks.POPUP),s.setBackground(),s.createContainer(),s.scene.events.on(Lr.BACKGROUND_CHANGED,s.setBackground),s}(0,o.Z)(t,e);var n=t.prototype;return n.createContainer=function(){this.container=new sO(this.scene),this.add(this.container)},n.open=function(){e.prototype.open.call(this),this.setBlockInputOutsideEnabled(!0),this.updateData(),this.runOpenAnimation()},n.close=function(){this.runCloseAnimation()},n.updateData=function(){if(this.scene instanceof UM){var e=this.scene.journeyLevelMechanicManager.getMissionDescription(),t=this.scene.journey.getCurrentLevel();e&&this.container.updateInfo(e,t)}},n.runOpenAnimation=function(){this.scene.audio.playSound(Ls.Z.POPUP_SHOW),this.fadeInAnimation||(this.fadeInAnimation=new Mh.Z({targets:[this]})),this.fadeInAnimation.play()},n.runCloseAnimation=function(){var t,n,i=this;null!=(t=this.fadeOutAnimation)&&null!=(n=t.tween)&&n.isPlaying()||(this.scene.audio.playSound(Ls.Z.POPUP_OFF),this.fadeOutAnimation||(this.fadeOutAnimation=new zm.Z({targets:[this],props:{alpha:0},onComplete:function(){e.prototype.close.call(i)}})),this.fadeOutAnimation.play())},t}(GameCore.Screen),oO=GameCore.world.isLandscape()?rO:qx,cO=n(189),hO=n.n(cO),uO=Gn.Z.GAMEPLAY_DEFAULT,lO=uO.KEY,dO=uO.FRAME,pO=function(e){function t(t){var n;return(n=e.call(this,t,29.5,27)||this).createButton(),n}return(0,o.Z)(t,e),t.prototype.createButton=function(){var e=this.scene.make.image({key:lO,frame:dO.IC_CLOSE});e.setWorldSize(this.width,this.height),this.add(e)},t}(Ol.Z),fO=Gn.Z.JOURNEY,gO=fO.KEY,mO=fO.FRAME,vO=function(e){function t(t){var n;return(n=e.call(this,t)||this).journeyName=void 0,n.closeButton=void 0,n.background=void 0,n.gameTypeTag=void 0,n.setSize(375,49),n.createBackground(),n.createJourneyName(),n.createGameTypeTag(),n}(0,o.Z)(t,e);var n=t.prototype;return n.setGameType=function(e){this.gameTypeTag.setGameType(e)},n.setJourneyName=function(e){this.journeyName.setText(e)},n.updateUI=function(){var e=this.scene.journey.getJourneyName();this.setJourneyName(e)},n.createBackground=function(){this.background=new Lf(this.scene,{width:375,height:53.5,key:gO,frame:mO.BG_BAR_TOP,symmetricType:Of.HORIZONTAL}),this.add(this.background)},n.createCloseButton=function(){var e=this;this.closeButton=new pO(this.scene),this.add(this.closeButton),Phaser.Display.Align.In.LeftCenter(this.closeButton,this,-13),this.closeButton.onClick=function(){e.scene.screen.close(Os.o4.JOURNEY_SCREEN)}},n.createJourneyName=function(){this.journeyName=this.scene.make.bitmapText({font:Rc.Z.BOLD_SHADOW_BLUR.KEY,origin:{x:.5,y:.5},size:this.scene.fontSize(21)}),this.journeyName.setMaxSize(280,35),this.journeyName.setTranslationParameter("seasonId","1"),this.journeyName.setText("journeySeasonX"),this.journeyName.setTint(16449487,16449487,15913325,15913325),this.add(this.journeyName)},n.createGameTypeTag=function(){this.gameTypeTag=new hy(this.scene,"full_screen",73,48),this.add(this.gameTypeTag),Phaser.Display.Align.In.TopLeft(this.gameTypeTag,this,1,.5)},t}(Phaser.GameObjects.Container),yO=Gn.Z.JOURNEY,TO=yO.KEY,CO=yO.FRAME,EO=function(e){function t(t){var n;return(n=e.call(this,t,198.5,62)||this).icon=void 0,n.levelText=void 0,n.setName("JourneyPlayButton"),n.createBackground(),n.createContent(),n.levelText.on("textChanged",(function(){n.align()})),n}(0,o.Z)(t,e);var n=t.prototype;return n.createBackground=function(){var e=this.scene.make.image({key:TO,frame:CO.BTN_PLAY});e.setWorldSize(this.width,this.height),this.add(e)},n.setLevel=function(e){this.levelText.setTranslationParameter("v",e),this.align()},n.createContent=function(){this.icon=this.scene.add.image(0,0,TO,CO.ICN_PLAY),this.icon.setWorldSize(16,27),this.levelText=this.scene.make.bitmapText({font:Rc.Z.BOLD_SHADOW.KEY,size:this.scene.fontSize(27),origin:{x:.5,y:.5}}),this.levelText.setMaxSize(150,40),this.levelText.setTranslationParameter("v",1),this.levelText.setText("levelV"),this.add([this.icon,this.levelText])},n.align=function(){Phaser.Display.Align.In.Center(this.levelText,this,13,-2),this.levelText.x-=this.x,this.levelText.y-=this.y,Phaser.Display.Align.In.LeftCenter(this.icon,this.levelText,22,-1)},t}(Ol.Z),AO=Gn.Z.GAMEPLAY_DEFAULT,SO=AO.KEY,bO=AO.FRAME,IO=function(e){function t(t){var n;return(n=e.call(this,t,50,50)||this).setName("JourneyMenuButton"),n.createContent(),n}return(0,o.Z)(t,e),t.prototype.createContent=function(){var e=this.scene.add.image(0,0,SO,bO.IC_MENU);e.setWorldSize(24,24);var t=this.scene.make.bitmapText({font:Rc.Z.PRIMARY.KEY,size:this.scene.fontSize(13),text:"Menu",origin:{x:.5,y:.5}});this.add([e,t]),Phaser.Display.Align.In.Center(e,this,0,-11),Phaser.Display.Align.In.Center(t,this,0,11)},t}(Ol.Z),wO=Gn.Z.GAMEPLAY_DEFAULT,PO=wO.KEY,kO=wO.FRAME,_O=function(e){function t(t){var n;return(n=e.call(this,t,50,50)||this).setName("JourneyBackToGameButton"),n.createContent(),n}return(0,o.Z)(t,e),t.prototype.createContent=function(){var e=this.scene.add.image(0,0,PO,kO.IC_CLOSE);e.setWorldSize(28,28);var t=this.scene.make.bitmapText({font:Rc.Z.PRIMARY.KEY,size:this.scene.fontSize(13),text:"Game",origin:{x:.5,y:.5}});t.setCenterAlign(),this.add([e,t]),Phaser.Display.Align.In.Center(e,this,0,-11),Phaser.Display.Align.In.Center(t,this,0,11)},t}(Ol.Z),xO=Gn.Z.JOURNEY,OO=xO.KEY,LO=xO.FRAME,RO=function(e){function t(t){var n;return(n=e.call(this,t)||this).playButton=void 0,n.backButton=void 0,n.menuButton=void 0,n.background=void 0,n.backgroundMask=void 0,n.backToGameButton=void 0,n.handleBackButtonOnClick=function(){n.scene.screen.get(Os.o4.JOURNEY_SCREEN).closeAllScreens(),n.scene.switchGameType(Rr.filterGameType)},n.setSize(375,95),n.createBackgroundMask(),n.createBackground(),n.createPlayButton(),n.createBackButton(),n.createMenuButton(),n.createBackToGameButton(),n}(0,o.Z)(t,e);var n=t.prototype;return n.updateUI=function(){var e=this.scene.journey.outOfMissions();this.playButton.setVisible(!e),this.backButton.setVisible(e)},n.createBackground=function(){this.background=new Lf(this.scene,{width:this.width,height:this.height,key:OO,frame:LO.BG_BAR_BOT,symmetricType:Of.HORIZONTAL}),this.background.setInteractive(),Phaser.Display.Align.In.TopCenter(this.background,this),this.add(this.background)},n.createBackgroundMask=function(){var e=this.scene.theme.getThemeDefaultConfig().backgroundKey,t=this.scene.add.image(0,0,e);t.setOrigin(.5,1),this.add(t),this.backgroundMask=t,this.updateBackgroundMask()},n.updateBackgroundMask=function(){var e=this.scene.world.isLandscape()?20:0,t=this.scene.world.getPixelRatio(),n=this.scene.ads.getBannerHeight(),i=this.backgroundMask,a=this.scene.gameZone,s=a.width,r=a.height;i.setWorldSize(s,r),i.setCrop(0,i.frame.height-(this.height+n)/i.scaleY-e*t,this.width*t,r*t),i.setY(n+this.height/2+e)},n.createPlayButton=function(){this.playButton=new EO(this.scene),this.add(this.playButton),Phaser.Display.Align.In.BottomCenter(this.playButton,this,0,-12)},n.createBackButton=function(){var e=new ny(this.scene);e.onClick=this.handleBackButtonOnClick,this.add(e),this.backButton=e,Phaser.Display.Align.In.TopCenter(this.backButton,this,0,-29)},n.createMenuButton=function(){var e=new IO(this.scene);this.add(e),Phaser.Display.Align.In.LeftCenter(e,this,-13,10),this.menuButton=e},n.createBackToGameButton=function(){var e=new _O(this.scene);e.onClick=this.handleBackButtonOnClick,this.add(e),this.backToGameButton=e,Phaser.Display.Align.In.RightCenter(e,this,-13,10)},n.setLevel=function(e){this.playButton.setLevel(e)},t}(Phaser.GameObjects.Container),DO=n(671),BO=Gn.Z.JOURNEY,MO=(BO.KEY,BO.FRAME,function(e){function t(t){var n;return(n=e.call(this,t)||this).endTime=void 0,n.countdownTimer=void 0,n.timerText=void 0,n.onTimeOut=void 0,n.updateCountdown=(0,r.Z)(l().mark((function e(){var t,i,a,s,r,o;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=Date.now(),i=1e3*n.endTime-t,a=Math.floor(Math.abs(i)/864e5),i-=864e5*a,s=Math.floor(Math.abs(i)/36e5),i-=36e5*s,r=Math.floor(Math.abs(i)/6e4),i-=6e4*r,o=Math.round(i/1e3),i<0&&(i=0,n.onTimeOut&&n.onTimeOut()),n.timerText.setTranslationParameters({d:a.toString(),h:s.toString(),m:r.toString(),s:o.toString()});case 11:case"end":return e.stop()}}),e)}))),n.setSize(375,30),n.createBackground(),n.createTimerContainer(),n.createCountdownTimer(),t.add.existing((0,As.Z)(n)),n}(0,o.Z)(t,e);var n=t.prototype;return n.createBackground=function(){var e=405021,t=[{position:0,tint1:e,alpha1:.05},{position:.25,tint1:e,alpha1:.5},{position:.4,tint1:e,alpha1:1},{position:.5,tint1:e,alpha1:1},{position:.6,tint1:e,alpha1:1},{position:.75,tint1:e,alpha1:.5},{position:1,tint1:e,alpha1:.05}],n=new zC(this.scene,367.5,24.5,t,"horizontal");n.setInteractive(),this.setSize(n.width,n.height),this.add(n)},n.createTimerContainer=function(){this.timerText=this.scene.make.bitmapText({font:Rc.Z.PRIMARY.KEY,size:this.scene.fontSize(15.5),origin:{x:0,y:.5}}),this.timerText.setTint(14602143),this.timerText.setTranslationParameters({d:"2",h:"8",m:"28",s:"8"}),this.timerText.setMaxSize(350,25),this.timerText.setText("timeLeftdhms"),Phaser.Display.Align.In.Center(this.timerText,this,0,2),this.add([this.timerText])},n.createCountdownTimer=function(){var e;void 0!=this.endTime&&(null==(e=this.countdownTimer)||e.destroy(),this.countdownTimer=this.scene.time.addEvent({loop:!0,delay:1e3,startAt:1e3,callback:this.updateCountdown}))},n.setCountdown=function(e){this.endTime=e,this.createCountdownTimer()},n.getRemain=function(){if(void 0!=this.endTime){var e=Date.now(),t=1e3*this.endTime-e;return t<0?0:t}},t}(Phaser.GameObjects.Container)),NO=MO,GO=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n.handleIncreaseSeason=function(){var e=n.scene.journey;e.increaseSeason()&&(n.resetJourneyData(),n.updateData(e.getCurrentLevel(),e.getTimeEnd()))},n.handlePlay=function(){n.scene.journey.isPlayingCurrentLevel()&&Rr.filterGameType==Rr.gameType||(n.scene.journey.setIsPlayingCurrentLevel(),n.scene.gameplay.startJourneyMode()),n.scene.screen.get(Os.o4.JOURNEY_SCREEN).closeAllScreens()},n.scene=t,n.setContainerSize(),n}return(0,o.Z)(t,e),t.prototype.resetJourneyData=function(){var e=this.scene.journey;e.isPlayingCurrentLevel()||(e.resetNewSeason(),e.setIsPlayingCurrentLevel(!1))},t}(Phaser.GameObjects.Container),FO=function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).parentScreenKey=Os.o4.JOURNEY_SCREEN,i}return(0,o.Z)(t,e),t.prototype.switchGameType=function(e){Rr.filterGameType=e,this.scene.screen.get(this.parentScreenKey).refresh()},t}(jI),ZO=FO,UO=function(e){function t(t){var n;return(n=e.call(this,t)||this).levelScroller=void 0,n.header=void 0,n.timeCounter=void 0,n.footer=void 0,n.loading=void 0,n.menu=void 0,n.footerOverlayZone=void 0,n.updateData=function(){var e=(0,r.Z)(l().mark((function e(t,i){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(hO()(t)){e.next=2;break}return e.abrupt("return");case 2:return n.footer.setLevel(t),n.levelScroller.setLevelEnableMax(t),e.next=6,n.levelScroller.updateLevelScroller();case 6:n.timeCounter.setCountdown(i),n.footer.updateUI(),n.header.updateUI();case 9:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),n.createLevelScroller(),n.createHeader(),n.createTimerCounter(),n.createFooter(),n.createFooterOverlayZone(),n.createMenu(),n.add([n.menu,n.footer,n.footerOverlayZone]),n.createLoading(),n}(0,o.Z)(t,e);var n=t.prototype;return n.setButtonDisabled=function(e){e?(this.footer.menuButton.disableInteractive(),this.footer.backToGameButton.disableInteractive()):(this.footer.menuButton.setInteractive(),this.footer.backToGameButton.setInteractive())},n.startLoading=function(){this.loading.revive(),this.setButtonDisabled(!0),this.footer.playButton.setVisible(!1),this.footer.backButton.setVisible(!1)},n.endLoading=function(){this.loading.kill(),this.setButtonDisabled(!1)},n.checkForSeasonUpdate=function(){this.scene.journey.canUpdateNewSeason(new Date)&&this.handleIncreaseSeason()},n.createHeader=function(){this.header=new vO(this.scene),this.add(this.header),Phaser.Display.Align.In.TopCenter(this.header,this)},n.createTimerCounter=function(){this.timeCounter=new NO(this.scene),this.add(this.timeCounter),Phaser.Display.Align.In.TopCenter(this.timeCounter,this,0,-46)},n.createFooterOverlayZone=function(){this.footerOverlayZone=new QI(this.scene,this.footer)},n.createMenu=function(){this.menu=new ZO(this.scene,this.footerOverlayZone)},n.createFooter=function(){var e=this;this.footer=new RO(this.scene);var t=this.scene.ads.getBannerHeight();Phaser.Display.Align.In.BottomCenter(this.footer,this,0,-t),this.footer.playButton.onClick=this.handlePlay,this.footer.updateBackgroundMask(),this.footer.menuButton.onClick=function(){e.menu.open()}},n.createLevelScroller=function(){this.levelScroller=new DO.Z(this.scene),this.add(this.levelScroller),this.levelScroller.setLevelEnableMax(this.scene.journey.getCurrentLevel()),this.levelScroller.updateLevelScroller()},n.setContainerSize=function(){var e=this.scene.gameZone,t=e.width,n=e.height;this.setSize(t,n)},n.createLoading=function(){var e=new JS.Z(this.scene);e.setVisible(!0),e.setScale(1.3),this.add(e),this.loading=e},t}(GO),zO=function(e){function t(t,n,i,a){var s;return(s=e.call(this,t,n,i,a)||this).fadeInAnimation=void 0,s.fadeOutAnimation=void 0,s.container=void 0,s.updateContainer=(0,r.Z)(l().mark((function e(){var t,n,i;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s.visible){e.next=2;break}return e.abrupt("return");case 2:return t=s.scene.journey,s.container.startLoading(),e.next=6,t.updateJourney();case 6:s.container.endLoading(),n=t.getCurrentLevel(),i=t.getTimeEnd(),s.container.updateData(n,i);case 10:case"end":return e.stop()}}),e)}))),s.setBackground=function(){var e=s.scene.theme.getThemeDefaultConfig().backgroundKey;s.background.setTexture(e);var t=s.scene.gameZone,n=t.width,i=t.height;s.background.setWorldSize(n,i)},s.setDepth(Os.Ks.POPUP),s.setBackground(),s.createContainer(),s.createBottomLogo(),s}(0,o.Z)(t,e);var n=t.prototype;return n.setGameType=function(e){this.container.header.setGameType(e)},n.createContainer=function(){var e=this;this.container=new UO(this.scene),this.add(this.container),this.container.timeCounter.onTimeOut=function(){return e.updateContainer()}},n.createBottomLogo=function(){if(!this.scene.world.isLandscape()){var e=new RE(this.scene);this.add(e),Phaser.Display.Align.In.BottomCenter(e,this)}},n.refresh=function(){this.setGameType(Rr.filterGameType),this.updateContainer()},n.closeAllScreens=function(){this.scene.screen.close(Os.o4.JOURNEY_SCREEN),this.scene.screen.close(Os.o4.TOURNAMENTS_RESULT_SCREEN),this.scene.screen.close(Os.o4.MISSION_COMPLETED_SCREEN)},n.open=function(){e.prototype.open.call(this),this.setBlockInputOutsideEnabled(!0),this.refresh(),this.runOpenAnimation()},n.close=function(){this.runCloseAnimation()},n.runOpenAnimation=function(){this.scene.audio.playSound(Ls.Z.POPUP_SHOW),this.fadeInAnimation||(this.fadeInAnimation=new Mh.Z({targets:[this]})),this.fadeInAnimation.play()},n.runCloseAnimation=function(){var t,n,i=this;null!=(t=this.fadeOutAnimation)&&null!=(n=t.tween)&&n.isPlaying()||(this.scene.audio.playSound(Ls.Z.POPUP_OFF),this.fadeOutAnimation||(this.fadeOutAnimation=new zm.Z({targets:[this],props:{alpha:0},onComplete:function(){e.prototype.close.call(i)}})),this.fadeOutAnimation.play())},t}(GameCore.Screen),HO=Gn.Z.GAMEPLAY_DEFAULT,WO=HO.KEY,YO=HO.FRAME,KO=function(e){function t(t){var n;return(n=e.call(this,t)||this).journeyName=void 0,n.closeButton=void 0,n.background=void 0,n.gameTypeTag=void 0,n.gameType=void 0,n.createBackground(),n.createCloseButton(),n.createJourneyName(),n.createGameTypeTag(),n}(0,o.Z)(t,e);var n=t.prototype;return n.setGameType=function(e){this.gameType=e,this.gameTypeTag.setGameType(e)},n.createGameTypeTag=function(){this.gameTypeTag=new hy(this.scene,"popup"),this.add(this.gameTypeTag),Phaser.Display.Align.In.LeftCenter(this.gameTypeTag,this,2,-1)},n.setJourneyName=function(e){this.journeyName.setText(e)},n.updateUI=function(){var e=this.scene.journey.getJourneyName();this.setJourneyName(e)},n.createBackground=function(){var e=(0,ul.t)(),t=this.scene.add.nineslice(0,0,WO,YO.BG_GAME_STAT_TOP,326*e,51*e,0*e,0*e,35/2.88*e,20/2.88*e);t.scale=1/e,this.background=t,this.add(this.background),this.setSize(this.background.displayWidth,this.background.displayHeight)},n.createJourneyName=function(){this.journeyName=this.scene.make.bitmapText({font:Rc.Z.BOLD_SHADOW_BLUR.KEY,origin:{x:.5,y:.5},text:"JOURNEY'S NAME",size:this.scene.fontSize(22)}),this.journeyName.setMaxSize(190,20),this.journeyName.setTranslationParameter("seasonId","1"),this.journeyName.setText("journeySeasonX"),this.journeyName.setTint(16449487,16449487,15913325,15913325),this.add(this.journeyName)},n.createCloseButton=function(){var e=this;this.closeButton=new Qy(this.scene),this.add(this.closeButton),Phaser.Display.Align.In.TopRight(this.closeButton,this,-6.5,-4);var t=this.scene;this.closeButton.onClick=function(){e.scene.screen.get(Os.o4.JOURNEY_SCREEN).closeAllScreens(),t.switchGameType(Rr.filterGameType)}},t}(Phaser.GameObjects.Container),VO=Gn.Z.JOURNEY,jO=VO.KEY,JO=VO.FRAME,XO=function(e){function t(t){var n;return(n=e.call(this,t,198.5,62)||this).icon=void 0,n.levelText=void 0,n.setName("JourneyPlayButton"),n.createBackground(),n.createContent(),n.levelText.on("textChanged",(function(){n.align()})),n.setScale(Xf()),n}(0,o.Z)(t,e);var n=t.prototype;return n.createBackground=function(){var e=this.scene.make.image({key:jO,frame:JO.BTN_PLAY});e.setWorldSize(this.width,this.height),this.add(e)},n.setLevel=function(e){this.levelText.setTranslationParameter("v",e),this.align()},n.createContent=function(){this.icon=this.scene.add.image(0,0,jO,JO.ICN_PLAY),this.icon.setWorldSize(16,27),this.levelText=this.scene.make.bitmapText({font:Rc.Z.BOLD_SHADOW.KEY,size:this.scene.fontSize(27),text:"Level 1",origin:{x:.5,y:.5}}),this.levelText.setMaxSize(150,20),this.levelText.setTranslationParameter("v",1),this.levelText.setText("levelV"),this.add([this.icon,this.levelText])},n.align=function(){Phaser.Display.Align.In.Center(this.levelText,this,13,-2),this.levelText.x-=this.x,this.levelText.y-=this.y,Phaser.Display.Align.In.LeftCenter(this.icon,this.levelText,22,-1)},t}(Ol.Z),qO=Gn.Z.GAMEPLAY_DEFAULT,QO=qO.KEY,$O=qO.FRAME,eL=function(e){function t(t){var n;return(n=e.call(this,t)||this).playButton=void 0,n.backButton=void 0,n.background=void 0,n.createBackground(),n.createPlayButton(),n.createBackButton(),n}(0,o.Z)(t,e);var n=t.prototype;return n.updateUI=function(){var e=this.scene.journey.outOfMissions();this.playButton.setVisible(!e),this.backButton.setVisible(e)},n.createBackground=function(){var e=(0,ul.t)(),t=this.scene.add.nineslice(0,0,QO,$O.BG_SETTINGS_BOTTOM,939/2.88*e,215/2.88*e,0*e,0*e,15/2.88*e,25/2.88*e);t.scale=1/e,this.background=t,this.add(this.background),this.setSize(t.displayWidth,t.displayHeight),this.background.setPosition(0,2)},n.createPlayButton=function(){this.playButton=new XO(this.scene),this.add(this.playButton),Phaser.Display.Align.In.Center(this.playButton,this,0,4.5)},n.createBackButton=function(){var e=this,t=new jy(this.scene);t.onClick=function(){e.scene.screen.close(Os.o4.JOURNEY_SCREEN)},this.add(t),this.backButton=t,Phaser.Display.Align.In.Center(this.backButton,this,0,3.5)},n.setLevel=function(e){this.playButton.setLevel(e)},t}(Phaser.GameObjects.Container),tL=Gn.Z.JOURNEY,nL=(tL.KEY,tL.FRAME,function(e){function t(t){var n;return(n=e.call(this,t)||this).endTime=void 0,n.countdownTimer=void 0,n.timerText=void 0,n.onTimeOut=void 0,n.updateCountdown=(0,r.Z)(l().mark((function e(){var t,i,a,s,r,o;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=Date.now(),i=1e3*n.endTime-t,a=Math.floor(Math.abs(i)/864e5),i-=864e5*a,s=Math.floor(Math.abs(i)/36e5),i-=36e5*s,r=Math.floor(Math.abs(i)/6e4),i-=6e4*r,o=Math.round(i/1e3),i<0&&(i=0,n.onTimeOut&&n.onTimeOut()),n.timerText.setTranslationParameters({d:a.toString(),h:s.toString(),m:r.toString(),s:o.toString()});case 11:case"end":return e.stop()}}),e)}))),n.setSize(375,30),n.createBackground(),n.createTimerContainer(),n.createCountdownTimer(),t.add.existing((0,As.Z)(n)),n.setScale(Xf()),n}(0,o.Z)(t,e);var n=t.prototype;return n.createBackground=function(){var e=405021,t=[{position:0,tint1:e,alpha1:.05},{position:.25,tint1:e,alpha1:.5},{position:.4,tint1:e,alpha1:1},{position:.5,tint1:e,alpha1:1},{position:.6,tint1:e,alpha1:1},{position:.75,tint1:e,alpha1:.5},{position:1,tint1:e,alpha1:.05}],n=new zC(this.scene,367.5,24.5,t,"horizontal");n.setInteractive(),this.setSize(n.width,n.height),this.add(n)},n.createTimerContainer=function(){var e=this;this.timerText=this.scene.make.bitmapText({font:Rc.Z.PRIMARY.KEY,size:this.scene.fontSize(15.5),origin:{x:0,y:.5}}),this.timerText.setTint(14602143),this.timerText.setTranslationParameters({d:"2",h:"8",m:"28",s:"8"}),this.timerText.setMaxSize(220,17),this.timerText.setText("timeLeftdhms"),Phaser.Display.Align.In.Center(this.timerText,this,0,1.5),this.timerText.on("textChanged",(function(){Phaser.Display.Align.In.Center(e.timerText,e,0,1.5),e.timerText.x-=e.x,e.timerText.y-=e.y})),this.add([this.timerText])},n.createCountdownTimer=function(){var e;void 0!=this.endTime&&(null==(e=this.countdownTimer)||e.destroy(),this.countdownTimer=this.scene.time.addEvent({loop:!0,delay:1e3,startAt:1e3,callback:this.updateCountdown}))},n.setCountdown=function(e){this.endTime=e,this.createCountdownTimer()},n.getRemain=function(){if(void 0!=this.endTime){var e=Date.now(),t=1e3*this.endTime-e;return t<0?0:t}},t}(Phaser.GameObjects.Container)),iL=nL,aL=n(670),sL=n(664),rL=Gn.Z.JOURNEY,oL=rL.KEY,cL=rL.FRAME,hL=function(e){function t(t){var n;return(n=e.call(this,t,oL,cL.LV_PASSED_BG,47.5,48)||this).payload=void 0,n.overlay=void 0,n.text=void 0,n.levelRoundContainer=void 0,n.levelRoundTween=void 0,n.handleClick=function(){var e;n.payload.enable&&null!=(e=n.payload.config)&&e.level},n.payload={enable:!1,config:{level:0}},n.scene=t,n.setName("Level"),n.createUI(),n.align(),n}(0,o.Z)(t,e);var n=t.prototype;return n.createUI=function(){this.createLevelRound(),this.createButtonOverlay(),this.createText(),this.sendToBack(this.levelRoundContainer)},n.createButtonOverlay=function(){this.overlay=this.scene.make.image({key:oL,frame:cL.LV_ACTIVE}),this.overlay.setWorldSize(78,82),this.overlay.kill(),this.add(this.overlay)},n.createText=function(){this.text=this.scene.make.bitmapText({font:Rc.Z.BOLD_SHADOW.KEY,origin:{x:.5,y:.5},size:this.scene.fontSize(23)}),this.text.setIgnoreLanguage(),this.text.kill(),this.add(this.text)},n.createLevelRound=function(){this.levelRoundContainer=this.scene.add.container();var e=this.scene.make.image({key:oL,frame:cL.LV_ACTIVE_FX,alpha:1});e.setWorldSize(80.5,80.5),this.levelRoundContainer.add([e]),this.add(this.levelRoundContainer)},n.align=function(){Phaser.Display.Align.In.Center(this.text,this.button),Phaser.Display.Align.In.Center(this.levelRoundContainer,this.overlay,0,-2)},n.setConfig=function(e){this.payload.config=e},n.setEnable=function(e){this.payload.enable=e},n.setPayload=function(e,t){void 0===t&&(t=!0),this.setConfig(e),this.setEnable(t)},n.updateOverlay=function(){var e,t,n,i,a=this.scene.journey.getCurrentLevel();if(this.overlay.revive(),this.payload.enable)if(a==(null==(t=this.payload.config)?void 0:t.level)){switch(null==(n=this.payload.config)?void 0:n.key){case"two-cards":this.overlay.setFrame(cL.LV_TWO_CARDS_PASS),this.overlay.setWorldSize(86,95);break;case"king":this.overlay.setFrame(cL.ICO_SPECIAL_LOCKED),this.overlay.setWorldSize(86,95);break;default:this.overlay.setFrame(cL.LV_ACTIVE),this.overlay.setWorldSize(78,82)}var s;if(this.payload.config.key)this.levelRoundContainer.kill(),this.text.kill();else Xh()(s=this.levelRoundContainer).call(s),this.text.revive()}else switch(null==(i=this.payload.config)?void 0:i.key){case"two-cards":this.overlay.setFrame(cL.LV_TWO_CARDS_PASS_LOCK),this.overlay.setWorldSize(86,95);break;case"king":this.overlay.setFrame(cL.ICO_SPECIAL_LOCKED),this.overlay.setWorldSize(86,95);break;default:this.overlay.setFrame(cL.LV_PASSED),this.overlay.setWorldSize(38,37.5)}else switch(null==(e=this.payload.config)?void 0:e.key){case"two-cards":this.overlay.setFrame(cL.LV_TWO_CARDS_PASS),this.overlay.setWorldSize(86,95);break;case"king":this.overlay.setFrame(cL.ICO_SPECIAL_LOCKED),this.overlay.setWorldSize(91,80.5);break;default:this.overlay.setFrame(cL.ICO_LOCK),this.overlay.setWorldSize(36.5,36.38)}},n.updateLevelButton=function(){var e,t;this.scene.journey.getCurrentLevel()===(null==(e=this.payload.config)?void 0:e.level)?(this.levelRoundContainer.revive(),this.button.setVisible(!1),this.runAnimation(),this.text.revive()):(this.text.kill(),this.button.setVisible(!0),this.levelRoundContainer.kill(),null==(t=this.levelRoundTween)||t.remove(),this.levelRoundTween=void 0);this.updateOverlay(),this.payload.config?this.text.setText(""+this.payload.config.level):(this.button.setSize(36.5,35),this.text.kill()),this.align()},n.updateEnable=function(e){this.setEnable(e),this.updateLevelButton()},n.runAnimation=function(){var e,t=1/this.scene.world.getPixelRatio();null==(e=this.levelRoundTween)||e.remove(),this.levelRoundTween=void 0,this.levelRoundTween=this.scene.tweens.add({targets:this.levelRoundContainer,scale:{start:t,from:t,to:1.4,delay:30,duration:1e3,ease:sL.Z},alpha:{start:1,from:1,to:0,delay:100,duration:930},loop:-1})},t}(jc.Z),uL=hL,lL=n(668),dL=[{x:28.625,y:36,sizeOff:{width:57.25,height:9.5},sizeOn:{width:57.25,height:8}},{x:95,y:0,sizeOff:{width:81,height:80},sizeOn:{width:81,height:80}},{x:95,y:-80,sizeOff:{width:82,height:79.5},sizeOn:{width:82,height:79.5}},{x:0,y:-115,sizeOff:{width:114.5,height:9.5},sizeOn:{width:114.5,height:8}},{x:-98,y:-151,sizeOff:{width:81,height:80},sizeOn:{width:81,height:80}},{x:-98,y:-233,sizeOff:{width:82,height:79.5},sizeOn:{width:82,height:79.5}},{x:-28.625,y:-268,sizeOff:{width:57.25,height:9.5},sizeOn:{width:57.25,height:8}}],pL=function(e){function t(t){var n;return(n=e.call(this,t)||this).paths=[],n.setSize(208.5,304),n.createPaths(),n.scene.add.existing((0,As.Z)(n)),n}(0,o.Z)(t,e);var n=t.prototype;return n.createPaths=function(){for(var e,t=0;t<dL.length;t++){var n=t==dL.length-1||t%3==0?3:t%3,i=new lL.Z(this.scene,{enable:!1,frameOff:"path g"+n,frameOn:"path y"+n,sizeOff:dL[t].sizeOff,sizeOn:dL[t].sizeOn});i.setVisible(!1),i.setPosition(dL[t].x,dL[t].y+this.height/2),i.flipX=t>=3,this.paths.push(i)}this.add(x()(e=[]).call(e,this.paths))},n.updatePathStart=function(e){e?(this.paths[1].options=(0,s.Z)({},this.paths[1].options,{frameOff:"path g0",frameOn:"path y0",sizeOff:{width:135,height:80},sizeOn:{width:135,height:80}}),this.paths[1].setEnable(this.paths[1].options.enable),this.paths[1].setPosition(68,152),this.paths[0].setVisible(!1)):(this.paths[1].options=(0,s.Z)({},this.paths[1].options,{frameOff:"path g1",frameOn:"path y1",sizeOff:dL[1].sizeOff,sizeOn:dL[1].sizeOn}),this.paths[1].setEnable(this.paths[1].options.enable),this.paths[1].setPosition(dL[1].x,dL[1].y+this.height/2),this.paths[0].setVisible(!0))},t}(Phaser.GameObjects.Container),fL=pL,gL=[{x:47,y:-10},{x:132,y:-75},{x:47,y:-156},{x:-45,y:-158},{x:-132,y:-217},{x:-56,y:-300}],mL=function(e){function t(t){var n;return(n=e.call(this,t)||this).background=void 0,n.buttons=[],n.payload=void 0,n.pathContainer=void 0,n.heightContainer=0,n.init(),n}(0,o.Z)(t,e);var n=t.prototype;return n.init=function(){this.payload={index:-1,payloadLevelButtons:[]},this.createPathContainers(),this.setSize(208.5,this.heightContainer),this.addNewButtons(GameCore.Configs.LevelScroller.limitLevelButtonInContainer)},n.clear=function(){this.buttons=[]},n.createPathContainers=function(){this.pathContainer=new fL(this.scene),this.pathContainer.setPosition(0,this.heightContainer),this.heightContainer=this.pathContainer.height;var e=-this.heightContainer/5;this.pathContainer.setPosition(0,e),this.add(this.pathContainer)},n.addNewButtons=function(e){for(var t=0;t<e;t++){var n=new uL(this.scene);this.buttons.push(n),this.add(n)}},n.setButtons=function(e){this.removeAll(),this.add(this.buttons),this.buttons=e},n.updateButtons=function(){var e;if(-1!==this.payload.index){for(var t=GameCore.Configs.LevelScroller.limitLevelButtonInContainer,n=this.heightContainer/2-22.5,i=0;i<this.buttons.length&&(this.buttons[i]&&gL[i]);i++)this.buttons[i].setPosition(gL[i].x,gL[i].y+n),0==i&&this.isIncludeLevel1()&&this.buttons[i].setPosition(0,n);for(var a=0;a<this.buttons.length;a++)this.buttons[a].kill();for(var s=0;s<this.pathContainer.paths.length;s++)this.pathContainer.paths[s].setVisible(!1);for(var r=0;r<this.payload.payloadLevelButtons.length;r++){var o=this.payload.payloadLevelButtons[r];this.buttons[r].revive(),this.buttons[r].setPayload(o.config,o.enable),this.buttons[r].updateLevelButton(),this.pathContainer.paths[r].setEnable(o.enable),this.pathContainer.paths[r].setVisible(!0)}this.payload.payloadLevelButtons.length==t&&this.pathContainer.paths[6].setVisible(!0),this.isLastItem()&&(this.pathContainer.paths[6].visible=!1);var c=this.scene.journey.getCurrentSeasonMissions(),h=this.scene.journey.getCurrentLevel();this.pathContainer.paths[6].setEnable((null==(e=c[this.getMaxLevel()])?void 0:e.level)<=h),this.pathContainer.updatePathStart(1==this.payload.index&&this.isIncludeLevel1())}},n.updateInfo=function(e){this.payload=e,this.updateButtons()},n.setVisible=function(t){return e.prototype.setVisible.call(this,t),this},n.isIncludeLevel1=function(){for(var e=this.payload.payloadLevelButtons,t=0;t<e.length;t++)if(1==e[t].config.level)return!0;return!1},n.isLastItem=function(){var e=this.payload.payloadLevelButtons,t=this.scene.journey.getCurrentSeasonMissions(),n=GameCore.Configs.LevelScroller.limitLevelButtonInContainer;return e.length>0&&Math.ceil(e[0].config.level/n)==Math.ceil(t.length/n)},n.getMaxLevel=function(){var e=this.payload.payloadLevelButtons;return e[e.length-1].config.level||1},t}(Phaser.GameObjects.Container),vL=mL,yL=function(e){function t(t,n,i){var a,s=n/Xf(),r=i/Xf();return(a=e.call(this,t,{classType:vL,listConfigs:[],width:s,height:r,marginTop:0,marginBottom:100})||this).levelConfigMap=[],a.levelEnableMax=void 0,a.levelStars=void 0,a.isFastScroll=!1,a.updateLevelScroller=function(){a.levelConfigMap=a.scene.journey.getCurrentSeasonMissions(),a.clearItem(),a.updateLevelButtonContainers(a.levelConfigMap),a.setEnable(!0),a.value=a.getCorrectValue(),a.updateMinValue(),a.value>-a.minValue&&(a.value=-a.minValue),a.value<-a.maxValue&&(a.value=-a.maxValue)},a.setSize(s,r),a.setScale(Xf()),a}(0,o.Z)(t,e);var n=t.prototype;return n.setLevelEnableMax=function(e){this.levelEnableMax=e||1},n.clearItem=function(){this.reset(),this.objects.clear(!1,!1)},n.updateLevelButtonContainers=function(e){var t=this.getConfigButtonContainers(e,this.levelEnableMax);this.updateConfig(t)},n.getConfigButtonContainers=function(e,t){for(var n=GameCore.Configs.LevelScroller.limitLevelButtonInContainer,i=[],a=[],s=1;s<=e.length;s++){var r=!0;t&&(r=s<=t);var o,c={config:{level:e[s-1].level,key:e[s-1].key},enable:r};if(a.push(c),s%n===0)i.unshift({index:s/n,payloadLevelButtons:x()(o=[]).call(o,a)}),a=[]}return a.length>0&&(i.unshift({index:s,payloadLevelButtons:a}),s++),i},n.getIndexButtonContainer=function(e){var t=GameCore.Configs.LevelScroller.limitLevelButtonInContainer;return Math.ceil(e/t)},n.getCorrectValue=function(e){var t;void 0===e&&(e=!1);var n=GameCore.Configs.LevelScroller.limitLevelButtonInContainer,i=this.objHeight,a=this.padding,s=[0,65,81,2,59,83],r=e?this.levelEnableMax:this.scene.journey.getCurrentLevel(),o=this.listObjects.length-this.getIndexButtonContainer(r),c=r%n;c=0===c?6:c;var h=-(o*i)-5+Nl()(t=A()(s).call(s,0,c)).call(t,(function(e,t){return e+t}),0);return h-=0!==o?a*o:0},n.enableAllLevel=function(){var e=this.value,t=this.scene.journey.getCurrentLevel(),n=this.getConfigButtonContainers(this.levelConfigMap,t);this.updateConfig(n),this.setEnable(!0),this.value=e},n.updateMinValue=function(){var e=GameCore.Configs.LevelScroller.limitLevelButtonInContainer,t=-170,n=this.levelConfigMap.length;t+=this.objHeight*((this.listObjects.length*e-n)/e),this.minValue=t},n.fastScroll=function(e){this.isScrollingBack||(this.isScrolling=!0,this.isScrollingSmooth=!0,this.isFastScroll=!0,this.velocity=2500*e)},n.stopFastScroll=function(e){this.isFastScroll&&(this.isFastScroll=!1,this.velocity=50*e)},t}(aL.Z),TL=yL,CL=Gn.Z.GAMEPLAY_DEFAULT,EL=CL.KEY,AL=CL.FRAME,SL=function(e){function t(t){var n;return(n=e.call(this,t)||this).levelScroller=void 0,n.header=void 0,n.timeCounter=void 0,n.footer=void 0,n.loading=void 0,n.updateData=function(){var e=(0,r.Z)(l().mark((function e(t,i){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(hO()(t)){e.next=2;break}return e.abrupt("return");case 2:return n.footer.setLevel(t),n.levelScroller.setLevelEnableMax(t),e.next=6,n.levelScroller.updateLevelScroller();case 6:n.timeCounter.setCountdown(i),n.footer.updateUI(),n.header.updateUI();case 9:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),n.createHeader(),n.createTimerCounter(),n.createFooter(),n.createLevelScroller(),n.add([n.header,n.timeCounter,n.footer]),n.createLoading(),n.addMaskHitZone(),n.setSize(n.width/jf(t),n.height/jf(t)),n.setScale(jf(t)),n.setY(Jf(n.scene)),n}(0,o.Z)(t,e);var n=t.prototype;return n.setButtonDisabled=function(e){e?this.header.closeButton.disableInteractive():this.header.closeButton.setInteractive()},n.startLoading=function(){this.loading.revive(),this.setButtonDisabled(!0),this.footer.playButton.setVisible(!1),this.footer.backButton.setVisible(!1)},n.endLoading=function(){this.loading.kill(),this.setButtonDisabled(!1)},n.createHeader=function(){this.header=new KO(this.scene),Phaser.Display.Align.In.TopCenter(this.header,this,0,-1.5)},n.createTimerCounter=function(){this.timeCounter=new iL(this.scene),Phaser.Display.Align.To.BottomCenter(this.timeCounter,this.header,0,-4)},n.createFooter=function(){this.footer=new eL(this.scene),Phaser.Display.Align.In.BottomCenter(this.footer,this,0,-5),this.footer.playButton.onClick=this.handlePlay},n.createLevelScroller=function(){var e=this.displayHeight-(this.header.height+this.footer.height)+40;this.levelScroller=new TL(this.scene,this.displayWidth,e),this.levelScroller.createScrollerBar(0,60,{key:EL,frame:AL.SCROLLER,width:5,height:550/2.88}),this.levelScroller.setPosition(0,15),this.add(this.levelScroller),this.levelScroller.setLevelEnableMax(this.scene.journey.getCurrentLevel()),this.levelScroller.updateLevelScroller();var t=jf(this.scene)*Xf();this.levelScroller.createMask(this.levelScroller.width*t,this.levelScroller.height*t,0,-5)},n.setContainerSize=function(){var e=(0,ul.t)(),t=this.scene.add.nineslice(0,0,EL,AL.RESULT_SCREEN.POPUP,329*e,544*e,0*e,0*e,100/2.88*e,300/2.88*e);t.scale=1/e,this.add(t),this.setSize(t.displayWidth,t.displayHeight)},n.createLoading=function(){var e=new JS.Z(this.scene);e.setVisible(!0),e.setScale(1.3),this.add(e),this.loading=e},n.addMaskHitZone=function(){var e=this.scene.world.getWorldSize().height-this.height,t=this.scene.add.zone(0,0,this.width,e/2);t.setInteractive(),Phaser.Display.Align.In.TopCenter(t,this,0,t.height),this.add(t);var n=this.scene.add.zone(0,0,this.width,e/2);n.setInteractive(),Phaser.Display.Align.To.BottomCenter(n,this.footer),this.add(n)},t}(GO),bL=function(e){function t(t,n,i,a){var s;return(s=e.call(this,t,n,i,a)||this).fadeInAnimation=void 0,s.fadeOutAnimation=void 0,s.container=void 0,s.updateContainer=(0,r.Z)(l().mark((function e(){var t,n,i;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s.visible){e.next=2;break}return e.abrupt("return");case 2:return t=s.scene.journey,s.container.startLoading(),e.next=6,t.updateJourney();case 6:s.container.endLoading(),n=t.getCurrentLevel(),i=t.getTimeEnd(),s.container.updateData(n,i);case 10:case"end":return e.stop()}}),e)}))),s.setBackground=function(){s.background.setTint(1315862),s.background.setAlpha(.65)},s.setDepth(Os.Ks.POPUP),s.setBackground(),s.createContainer(),s}(0,o.Z)(t,e);var n=t.prototype;return n.setGameType=function(e){this.container.header.setGameType(e)},n.refresh=function(){this.setGameType(Rr.filterGameType),this.updateContainer()},n.closeAllScreens=function(){this.scene.screen.close(Os.o4.JOURNEY_SCREEN),this.scene.screen.close(Os.o4.TOURNAMENTS_RESULT_SCREEN),this.scene.screen.close(Os.o4.MISSION_COMPLETED_SCREEN)},n.createContainer=function(){var e=this;this.container=new SL(this.scene),this.add(this.container),this.container.timeCounter.onTimeOut=function(){return e.updateContainer()}},n.open=function(){e.prototype.open.call(this),this.setBlockInputOutsideEnabled(!0),this.refresh(),this.runOpenAnimation()},n.close=function(){this.runCloseAnimation()},n.runOpenAnimation=function(){this.scene.audio.playSound(Ls.Z.POPUP_SHOW),this.fadeInAnimation||(this.fadeInAnimation=new Mh.Z({targets:[this]})),this.fadeInAnimation.play()},n.runCloseAnimation=function(){var t,n,i=this;null!=(t=this.fadeOutAnimation)&&null!=(n=t.tween)&&n.isPlaying()||(this.scene.audio.playSound(Ls.Z.POPUP_OFF),this.fadeOutAnimation||(this.fadeOutAnimation=new zm.Z({targets:[this],props:{alpha:0},onComplete:function(){e.prototype.close.call(i)}})),this.fadeOutAnimation.play())},t}(GameCore.Screen),IL=GameCore.world.isLandscape()?bL:zO,wL=function(){function e(e){this.scene=void 0,this.scene=e}var t=e.prototype;return t.initData=function(){},t.getMissionDescription=function(){return{key:"solveThisDeal"}},t.isDescriptionCompleted=function(){var e,t=this.scene.gameplay.boardGame;return!D()(e=t.foundations).call(e,(function(e){return!e.isFull()}))},t.getMissionLimit=function(){return null},e}(),PL=function(){function e(e){this.scene=void 0,this.scene=e}var t=e.prototype;return t.initData=function(){},t.getMissionDescription=function(){return{key:"solveAlmostFinishGame",interpolations:{}}},t.isDescriptionCompleted=function(){var e,t=this.scene.gameplay.boardGame;return!D()(e=t.foundations).call(e,(function(e){return!e.isFull()}))},t.getMissionLimit=function(){return null},e}();function kL(e){switch(e){case Zu.CLUB:return"\u2663";case Zu.HEART:return"\u2665";case Zu.DIAMOND:return"\u2666";case Zu.SPADE:return"\u2660";default:return"x"}}function _L(e){switch(e){case Fu.ACE:return"A";case Fu.TWO:return"2";case Fu.THREE:return"3";case Fu.FOUR:return"4";case Fu.FIVE:return"5";case Fu.SIX:return"6";case Fu.SEVEN:return"7";case Fu.EIGHT:return"8";case Fu.NINE:return"9";case Fu.TEN:return"10";case Fu.JACK:return"J";case Fu.QUEEN:return"Q";case Fu.KING:return"K";case Fu.ANY:return"?";default:throw new Error("Invalid card rank: "+e)}}var xL=function(){function e(e){this.scene=void 0,this.openedCard=!1,this.wantedCardStat=null,this.scene=e,this.wantedCardStat=null}var t=e.prototype;return t.initData=function(){this.openedCard=!1,this.wantedCardStat=this.getCardStat()},t.getCardStat=function(){var e=this.scene.journey.getCurrentMission();if(!e)return null;var t=e.mainMission.cardStats,n=void 0===t?[]:t;return 0===n.length?null:n[0]},t.getMissionDescription=function(){if(!this.wantedCardStat)return null;var e=this.wantedCardStat,t=e.cardSuit;return{key:"revealRankOfSuit",interpolations:{rank:_L(e.cardRank),suit:kL(t)}}},t.isDescriptionCompleted=function(){var e=this;if(!this.wantedCardStat)return!1;var t=this.wantedCardStat,n=t.cardSuit,i=t.cardRank;return this.scene.events.off(Gu.OPEN_CARD),this.scene.events.on(Gu.OPEN_CARD,(function(t){var a=t.isTheSameCardSuit(n),s=t.isTheSameCardRank(i);a&&s&&(e.openedCard=!0)})),this.openedCard},t.getMissionLimit=function(){return null},e}(),OL=function(){function e(e){this.scene=void 0,this.wantedCount=0,this.scene=e,this.wantedCount=0}var t=e.prototype;return t.initData=function(){this.wantedCount=this.getStatCount()},t.getStatCount=function(){var e,t,n=null!=(e=null==(t=this.scene.journey.getCurrentMission().mainMission)?void 0:t.cardStats)?e:[];return 0===n.length?0:Nl()(n).call(n,(function(e,t){return e+t.count}),0)},t.getMissionDescription=function(){var e=this.wantedCount;return 1==e?{key:"moveOneCard",interpolations:{}}:{key:"moveManyCards",interpolations:{count:e.toString()}}},t.isDescriptionCompleted=function(){return this.scene.gameplay.boardGame.getFoundationsCardsCount()>=this.wantedCount},t.getMissionLimit=function(){return{key:"journeyLimitCards",interpolations:{formattedCounter:this.scene.gameplay.boardGame.getFoundationsCardsCount()+"/"+this.wantedCount}}},e}();var LL=function(){function e(e){this.scene=void 0,this.requiredSpadeCount=0,this.requiredHeartCount=0,this.requiredDiamondCount=0,this.requiredClubCount=0,this.scene=e,this.requiredSpadeCount=0,this.requiredHeartCount=0,this.requiredDiamondCount=0,this.requiredClubCount=0}var t=e.prototype;return t.initData=function(){var e=this.scene.journey.getCurrentMission();if(e){var t=e.mainMission.cardStats,n=function(e){var t=0,n=0,i=0,a=0,s=0;return e.forEach((function(e){var r=e.cardSuit,o=e.count;switch(r){case Zu.SPADE:t+=o;break;case Zu.HEART:n+=o;break;case Zu.DIAMOND:a+=o;break;case Zu.CLUB:i+=o;break;case Zu.ANY:s+=o}})),{spadeCount:t,heartCount:n,clubCount:i,diamondCount:a,anyCount:s}}(void 0===t?[]:t),i=n.spadeCount,a=n.heartCount,s=n.clubCount,r=n.diamondCount;this.requiredSpadeCount=i,this.requiredHeartCount=a,this.requiredDiamondCount=r,this.requiredClubCount=s}},t.getMissionDescription=function(){return this.scene.journey.getCurrentMission()?this.moveCardsToFoundationMissionDescription(this.requiredSpadeCount,this.requiredHeartCount,this.requiredClubCount,this.requiredDiamondCount):null},t.isDescriptionCompleted=function(){if(!this.scene.journey.getCurrentMission())return!1;var e=this.scene.gameplay.boardGame.getFoundationCardSuitCounts(),t=e.spadeCount,n=e.heartCount,i=e.clubCount,a=e.diamondCount;return t>=this.requiredSpadeCount&&n>=this.requiredHeartCount&&i>=this.requiredClubCount&&a>=this.requiredDiamondCount},t.moveCardsToFoundationMissionDescription=function(e,t,n,i){var a={spade:e,heart:t,club:n,diamond:i},s=[];for(var r in a)if(a[r]>0){var o=a[r],c=kL(r);s.push({count:o,suit:c})}var h=s[0],u=s[1];switch(s.length){case 1:return{key:1===h.count?"moveOneCardOfSuit":"moveXCardsOfSuit",interpolations:{count:h.count.toString(),suit:h.suit}};case 2:return{key:1===h.count&&1===u.count?"moveOneCardsOfSuit1AndOneCardOfSuit2":1===h.count?"moveOneCardOfSuit1AndYCardsOfSuit2":1===u.count?"moveXCardsOfSuit1AndOneCardOfSuit2":"moveOneCardsOfSuit1AndOneCardOfSuit2",interpolations:{count1:h.count.toString(),suit1:h.suit,count2:u.count.toString(),suit2:u.suit}};default:return null}},t.getMissionLimit=function(){if(!this.scene.journey.getCurrentMission())return null;var e=this.scene.gameplay.boardGame.getFoundationCardSuitCounts(),t=e.spadeCount,n=e.heartCount,i=e.clubCount,a=e.diamondCount,s=0,r=0;return this.requiredSpadeCount>0&&(s+=this.requiredSpadeCount,r+=t),this.requiredHeartCount>0&&(s+=this.requiredHeartCount,r+=n),this.requiredDiamondCount>0&&(s+=this.requiredDiamondCount,r+=a),this.requiredClubCount>0&&(s+=this.requiredClubCount,r+=i),{key:"journeyLimitCards",interpolations:{formattedCounter:r+"/"+s}}},e}();function RL(e,t){var n="undefined"!==typeof w()&&k()(e)||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){var n;if(!e)return;if("string"===typeof e)return DL(e,t);var i=A()(n=Object.prototype.toString.call(e)).call(n,8,-1);"Object"===i&&e.constructor&&(i=e.constructor.name);if("Map"===i||"Set"===i)return b()(e);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return DL(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var i=0;return function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function DL(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var BL=function(){function e(e){this.scene=void 0,this.completed=!1,this.scene=e}var t=e.prototype;return t.initData=function(){this.completed=!1},t.getMissionDescription=function(){var e=this.scene.journey.getCurrentMission();if(!e)return null;var t=e.mainMission.cardStats,n=void 0===t?[]:t;if(1!==n.length)return null;var i=n[0],a=i.cardSuit,s=i.cardRank,r=kL(a);return{key:"moveRankOfSuitToFoundation",interpolations:{rank:_L(s),suitEmoji:r}}},t.isDescriptionCompleted=function(){var e=this.scene.journey.getCurrentMission();if(!e)return!1;var t=e.mainMission.cardStats,n=void 0===t?[]:t;if(1!==n.length)return!1;for(var i,a=n[0],s=a.cardSuit,r=a.cardRank,o=RL(this.scene.gameplay.boardGame.foundations);!(i=o()).done;)for(var c,h=RL(i.value.cards);!(c=h()).done;){var u=c.value;if(u.isTheSameCardSuit(s)&&u.isTheSameCardRank(r))return this.completed=!0,!0}return!1},t.getMissionLimit=function(){return this.scene.journey.getCurrentMission()?{key:"journeyLimitCards",interpolations:{formattedCounter:(this.completed?1:0)+"/1"}}:null},e}();var ML=function(){function e(e){this.scene=void 0,this.requiredAceCount=0,this.requiredTwoCount=0,this.requiredThreeCount=0,this.requiredFourCount=0,this.requiredFiveCount=0,this.requiredSixCount=0,this.requiredSevenCount=0,this.requiredEightCount=0,this.requiredNineCount=0,this.requiredTenCount=0,this.requiredJackCount=0,this.requiredQueenCount=0,this.requiredKingCount=0,this.scene=e,this.initData()}var t=e.prototype;return t.initData=function(){var e=this.scene.journey.getCurrentMission();if(e){var t=e.mainMission.cardStats,n=function(e){var t=0,n=0,i=0,a=0,s=0,r=0,o=0,c=0,h=0,u=0,l=0,d=0,p=0;return e.forEach((function(e){var f=e.cardRank,g=e.count;switch(f){case Fu.ACE:t+=g;break;case Fu.TWO:n+=g;break;case Fu.THREE:i+=g;break;case Fu.FOUR:a+=g;break;case Fu.FIVE:s+=g;break;case Fu.SIX:r+=g;break;case Fu.SEVEN:o+=g;break;case Fu.EIGHT:c+=g;break;case Fu.NINE:h+=g;break;case Fu.TEN:u+=g;break;case Fu.JACK:l+=g;break;case Fu.QUEEN:d+=g;break;case Fu.KING:p+=g}})),{aceCount:t,twoCount:n,threeCount:i,fourCount:a,fiveCount:s,sixCount:r,sevenCount:o,eightCount:c,nineCount:h,tenCount:u,jackCount:l,queenCount:d,kingCount:p}}(void 0===t?[]:t),i=n.aceCount,a=n.twoCount,s=n.threeCount,r=n.fourCount,o=n.fiveCount,c=n.sixCount,h=n.sevenCount,u=n.eightCount,l=n.nineCount,d=n.tenCount,p=n.jackCount,f=n.queenCount,g=n.kingCount;this.requiredAceCount=i,this.requiredTwoCount=a,this.requiredThreeCount=s,this.requiredFourCount=r,this.requiredFiveCount=o,this.requiredSixCount=c,this.requiredSevenCount=h,this.requiredEightCount=u,this.requiredNineCount=l,this.requiredTenCount=d,this.requiredJackCount=p,this.requiredQueenCount=f,this.requiredKingCount=g}},t.getMissionDescription=function(){return this.scene.journey.getCurrentMission()?this.moveCardsToFoundationMissionDescription(this.requiredAceCount,this.requiredTwoCount,this.requiredThreeCount,this.requiredFourCount,this.requiredFiveCount,this.requiredSixCount,this.requiredSevenCount,this.requiredEightCount,this.requiredNineCount,this.requiredTenCount,this.requiredJackCount,this.requiredQueenCount,this.requiredKingCount):null},t.isDescriptionCompleted=function(){if(!this.scene.journey.getCurrentMission())return!1;var e=this.scene.gameplay.boardGame.getFoundationCardRankCounts(),t=e.aceCount,n=e.twoCount,i=e.threeCount,a=e.fourCount,s=e.fiveCount,r=e.sixCount,o=e.sevenCount,c=e.eightCount,h=e.nineCount,u=e.tenCount,l=e.jackCount,d=e.queenCount,p=e.kingCount;return t>=this.requiredAceCount&&n>=this.requiredTwoCount&&i>=this.requiredThreeCount&&a>=this.requiredFourCount&&s>=this.requiredFiveCount&&r>=this.requiredSixCount&&o>=this.requiredSevenCount&&c>=this.requiredEightCount&&h>=this.requiredNineCount&&u>=this.requiredTenCount&&l>=this.requiredJackCount&&d>=this.requiredQueenCount&&p>=this.requiredKingCount},t.moveCardsToFoundationMissionDescription=function(e,t,n,i,a,s,r,o,c,h,u,l,d){var p={ace:e,two:t,three:n,four:i,five:a,six:s,seven:r,eight:o,nine:c,ten:h,jack:u,queen:l,king:d},f=[];for(var g in p)if(p[g]>0){var m=p[g],v=_L(g);f.push({count:m,rank:v})}var y=f[0],T=f[1];switch(f.length){case 1:return{key:1===y.count?"moveOneCardOfRank":"moveXCardsOfRank",interpolations:{count:y.count.toString(),rank:y.rank}};case 2:return{key:1===y.count&&1===T.count?"moveOneCardsOfRank1AndOneCardOfRank2":1===y.count?"moveOneCardOfRank1AndYCardsOfRank2":1===T.count?"moveXCardsOfRank1AndOneCardOfRank2":"moveOneCardsOfRank1AndOneCardOfRank2",interpolations:{count1:y.count.toString(),suit1:y.rank,count2:T.count.toString(),suit2:T.rank}};default:return null}},t.getMissionLimit=function(){if(!this.scene.journey.getCurrentMission())return null;var e=this.scene.gameplay.boardGame.getFoundationCardRankCounts(),t=e.aceCount,n=e.twoCount,i=e.threeCount,a=e.fourCount,s=e.fiveCount,r=e.sixCount,o=e.sevenCount,c=e.eightCount,h=e.nineCount,u=e.tenCount,l=e.jackCount,d=e.queenCount,p=e.kingCount,f=0,g=0;return this.requiredAceCount>0&&(f+=this.requiredAceCount,g+=t),this.requiredTwoCount>0&&(f+=this.requiredTwoCount,g+=n),this.requiredThreeCount>0&&(f+=this.requiredThreeCount,g+=i),this.requiredFourCount>0&&(f+=this.requiredFourCount,g+=a),this.requiredFiveCount>0&&(f+=this.requiredFiveCount,g+=s),this.requiredSixCount>0&&(f+=this.requiredSixCount,g+=r),this.requiredSevenCount>0&&(f+=this.requiredSevenCount,g+=o),this.requiredEightCount>0&&(f+=this.requiredEightCount,g+=c),this.requiredNineCount>0&&(f+=this.requiredNineCount,g+=h),this.requiredTenCount>0&&(f+=this.requiredTenCount,g+=u),this.requiredJackCount>0&&(f+=this.requiredJackCount,g+=l),this.requiredQueenCount>0&&(f+=this.requiredQueenCount,g+=d),this.requiredKingCount>0&&(f+=this.requiredKingCount,g+=p),{key:"journeyLimitCards",interpolations:{formattedCounter:g+"/"+f}}},e}(),NL=function(){function e(e){this.scene=void 0,this.sameSuitSubStrategy=void 0,this.sameRankSubStrategy=void 0,this.sameSuitRankSubStrategy=void 0,this.currentSubStrategy=null,this.scene=e,this.sameSuitSubStrategy=new LL(e),this.sameRankSubStrategy=new ML(e),this.sameSuitRankSubStrategy=new BL(e)}var t=e.prototype;return t.getCurrentSubStrategy=function(){var e=this.scene.journey.getCurrentMission();if(!e)return null;var t=e.mainMission.cardStats,n=void 0===t?[]:t;if(1===n.length){var i=n[0],a=i.cardSuit,s=i.cardRank,r=i.count;if("any"!==a&&"any"!==s&&1===r)return this.sameSuitRankSubStrategy;if("any"===a&&"any"!==s)return this.sameRankSubStrategy}return this.sameSuitSubStrategy},t.initData=function(){var e;this.currentSubStrategy=this.getCurrentSubStrategy(),null==(e=this.currentSubStrategy)||e.initData()},t.getMissionDescription=function(){var e;return(null==(e=this.currentSubStrategy)?void 0:e.getMissionDescription())||null},t.isDescriptionCompleted=function(){var e;return(null==(e=this.currentSubStrategy)?void 0:e.isDescriptionCompleted())||!1},t.getMissionLimit=function(){var e;return(null==(e=this.currentSubStrategy)?void 0:e.getMissionLimit())||null},e}();function GL(e,t){var n="undefined"!==typeof w()&&k()(e)||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){var n;if(!e)return;if("string"===typeof e)return FL(e,t);var i=A()(n=Object.prototype.toString.call(e)).call(n,8,-1);"Object"===i&&e.constructor&&(i=e.constructor.name);if("Map"===i||"Set"===i)return b()(e);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return FL(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var i=0;return function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function FL(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var ZL=function(){function e(e){this.scene=void 0,this.wasStockCardMovedToTableau=!1,this.wantedCardStat=null,this.scene=e,this.wantedCardStat=null}var t=e.prototype;return t.initData=function(){this.wasStockCardMovedToTableau=!1,this.wantedCardStat=this.getCardStat()},t.getCardStat=function(){var e=this.scene.journey.getCurrentMission();if(!e)return null;var t=e.mainMission.cardStats,n=void 0===t?[]:t;return 0===n.length?null:n[0]},t.getMissionDescription=function(){if(!this.wantedCardStat)return null;var e=this.wantedCardStat,t=e.cardSuit;return{key:"revealRankOfSuitToTableau",interpolations:{rank:_L(e.cardRank),suit:kL(t)}}},t.isDescriptionCompleted=function(){var e=this;if(!this.wantedCardStat)return!1;var t=this.wantedCardStat,n=t.cardSuit,i=t.cardRank;return this.scene.events.off(Gu.MOVE_CARD_FROM_FOUNDATION_TO_TABLEAU),this.scene.events.on(Gu.MOVE_CARD_FROM_FOUNDATION_TO_TABLEAU,(function(t){for(var a,s=GL(t);!(a=s()).done;){var r=a.value,o=r.isTheSameCardSuit(n),c=r.isTheSameCardRank(i);o&&c&&(e.wasStockCardMovedToTableau=!0)}})),this.wasStockCardMovedToTableau},t.getMissionLimit=function(){return null},e}(),UL=function(){function e(e){this.scene=void 0,this.requiredNumber=void 0,this.scene=e,this.requiredNumber=0}var t=e.prototype;return t.initData=function(){this.requiredNumber=this.getNumOfFoundationsRequired()},t.getNumOfFoundationsRequired=function(){var e=this.scene.journey.getCurrentMission().mainMission.columnStats;return(null==e?void 0:e.count)||0},t.getMissionDescription=function(){return this.requiredNumber?{key:"Build "+(1===this.requiredNumber?"a complete suit":this.requiredNumber+" complete suits")+" of cards"}:null},t.isDescriptionCompleted=function(){var e,t=this.scene.gameplay.boardGame;return Le()(e=t.foundations).call(e,(function(e){return e.isFull()})).length>=this.requiredNumber},t.getMissionLimit=function(){var e,t=this.scene.gameplay.boardGame;return{key:"Suits{{ws}}"+Le()(e=t.foundations).call(e,(function(e){return e.isFull()})).length+"/"+this.requiredNumber}},e}(),zL=function(){function e(e){this.scene=void 0,this.requiredNumber=void 0,this.numOfColumnEmpty=0,this.scene=e,this.requiredNumber=0}var t=e.prototype;return t.initData=function(){this.requiredNumber=this.getCountRequired(),this.numOfColumnEmpty=0},t.getCountRequired=function(){var e=this.scene.journey.getCurrentMission().mainMission.columnStats;return(null==e?void 0:e.count)||0},t.getMissionDescription=function(){return this.requiredNumber?{key:"Empty "+(1===this.requiredNumber?"a full column":this.requiredNumber+" columns")+" of cards"}:null},t.isDescriptionCompleted=function(){return this.updateNumOfColumnEmpty(),this.numOfColumnEmpty>=this.requiredNumber},t.getMissionLimit=function(){return this.updateNumOfColumnEmpty(),{key:"Columns{{ws}}"+this.numOfColumnEmpty+"/"+this.requiredNumber}},t.updateNumOfColumnEmpty=function(){var e,t=this.scene.gameplay.boardGame;t.mover.isPicked()||t.isDealing()||t.isNone()||(this.numOfColumnEmpty=Le()(e=t.piles).call(e,(function(e){return e.isEmpty()})).length);t.isDealing()&&(this.numOfColumnEmpty=0)},e}(),HL=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n.gameCompletionStrategy=void 0,n.almostFinishedGameStrategy=void 0,n.revealCardStrategy=void 0,n.cardsToFoundationStrategy=void 0,n.sameSuitCardsToFoundationStrategy=void 0,n.cardStockToTableauStrategy=void 0,n.finishNRunNoStockStrategy=void 0,n.clearNColumnsStrategy=void 0,n.strategies=[],n.scene=t,n.createStrategies(),n}(0,o.Z)(t,e);var n=t.prototype;return n.createStrategies=function(){this.gameCompletionStrategy=new wL(this.scene),this.almostFinishedGameStrategy=new PL(this.scene),this.revealCardStrategy=new xL(this.scene),this.cardsToFoundationStrategy=new OL(this.scene),this.sameSuitCardsToFoundationStrategy=new NL(this.scene),this.cardStockToTableauStrategy=new ZL(this.scene),this.finishNRunNoStockStrategy=new UL(this.scene),this.clearNColumnsStrategy=new zL(this.scene),this.strategies=[this.gameCompletionStrategy,this.almostFinishedGameStrategy,this.revealCardStrategy,this.cardsToFoundationStrategy,this.sameSuitCardsToFoundationStrategy,this.cardStockToTableauStrategy,this.finishNRunNoStockStrategy,this.clearNColumnsStrategy]},n.getCurrentStrategy=function(){var e=this.scene.journey.getCurrentMission();if(!e)return null;switch(e.type){case zu.COMPLETE_GAME:return this.gameCompletionStrategy;case zu.COMPLETE_ALMOST_FINISHED_GAME:return this.almostFinishedGameStrategy;case zu.OPEN_ONE_CARD:return this.revealCardStrategy;case zu.MOVE_CARDS_TO_FOUNDATION:return this.cardsToFoundationStrategy;case zu.MOVE_SAME_SUIT_CARDS_TO_FOUNDATION:return this.sameSuitCardsToFoundationStrategy;case zu.MOVE_ONE_CARD_FROM_STOCK_TO_TABLEAU:return this.cardStockToTableauStrategy;case zu.FINISH_N_RUN:return this.finishNRunNoStockStrategy;case zu.CLEAR_N_COLUMNS:return this.clearNColumnsStrategy;default:return null}},n.getMissionDescription=function(){var e=this.getCurrentStrategy();return e?(e.initData(),e.getMissionDescription()):null},n.getMissionLimit=function(e){void 0===e&&(e=!1);var t=this.scene.journey.getCurrentMission();if(!t)return null;var n=t.mainMission,i=t.limitMechanic,a=n.cardStats,s=void 0===a?[]:a,r=n.columnStats,o=void 0===r?{count:1}:r;if(this.getStatCount(s)>1||o.count>1){var c=this.getCurrentStrategy();return c?c.getMissionLimit():null}if(!i)return null;var h=i.type,u=this.scene.gameplay.boardGame,l=u.getTime(),d=u.getMoves(),p=u.getStockRecycleCount();switch(h){case Uu.TIME:var f=this.getFormattedCounter(i,l);return e?{key:"withinLimit",interpolations:{formattedCounter:f}}:{key:"journeyLimitTime",interpolations:{time:f}};case Uu.MOVES:var g=this.getFormattedCounter(i,d);return e?{key:"withinLimit",interpolations:{formattedCounter:g}}:{key:"journeyLimitTime",interpolations:{time:g}};case Uu.STOCK_RECYCLES:var m=this.getFormattedCounter(i,p);return e?{key:"withinLimit",interpolations:{formattedCounter:m}}:{key:"journeyLimitRecycle",interpolations:{recycles:m}};default:return null}},n.isMissionCompleted=function(){return this.isDescriptionCompleted()&&this.isWithinLimit()},n.isDescriptionCompleted=function(){if(!this.scene.journey.getCurrentMission())return!1;var e=this.getCurrentStrategy();return!e||e.isDescriptionCompleted()},n.isWithinLimit=function(){var e=this.scene.journey.getCurrentMission();if(!e)return!0;var t=e.mainMission,n=t.cardStats,i=void 0===n?[]:n,a=t.columnStats,s=void 0===a?{count:1}:a;if(this.getStatCount(i)>1||s.count>1)return!0;var r=e.limitMechanic,o=r.type,c=r.value,h=this.scene.gameplay.boardGame,u=h.getTime(),l=h.getMoves(),d=h.getStockRecycleCount();switch(o){case Uu.TIME:return u<=c;case Uu.MOVES:return l<=c;case Uu.STOCK_RECYCLES:return d<=c;case Uu.NONE:default:return!0}},n.getFormattedCounter=function(e,t){var n=e.type,i=e.value;if(n===Uu.TIME){var a=i-t;return(0,Ds.F0)(a>0?a:0,!1)}return t+(this.scene.world.isLandscape()?"/":":")+i},n.getStatCount=function(e){return Nl()(e).call(e,(function(e,t){return e+t.count}),0)},t}(uT),WL=Gn.Z.GAMEPLAY_DEFAULT,YL=WL.KEY,KL=WL.FRAME,VL=function(e){function t(t){var n;return(n=e.call(this,t)||this).background=void 0,n.wellDoneLetterBitmapTexts=[],n.outOfMovesLetterBitmapTexts=[],n.wellDoneBitmapText=void 0,n.outOfMovesBitmapText=void 0,n.cards=[],n.cardInitialProps=[],n.isPlayingAnimation=!1,n.isWellDone=!0,n.setSize(300,300),n.createRawTexts(),n.createBackground(),n.createWellDoneLetterBitmapTexts(),n.createOutOfMovesLetterBitmapTexts(),n.createCards(),n.alignComponents(),n.createDevButtons(),n}(0,o.Z)(t,e);var n=t.prototype;return n.enableWellDone=function(e){void 0===e&&(e=!0),this.isWellDone=e},n.createBackground=function(){this.background=new np(this.scene,0,0,this.width,this.height,20,16579837,0),this.add(this.background)},n.createRawTexts=function(){this.wellDoneBitmapText=this.scene.make.bitmapText({font:Rc.Z.BOLD.KEY,size:this.scene.fontSize(30),text:"wellDone",origin:{x:.5,y:.5}}),this.wellDoneBitmapText.setMaxSize(360,500,!0),this.wellDoneBitmapText.setPosition(187.5,333.5),this.wellDoneBitmapText.setDepth(1e12),this.wellDoneBitmapText.kill(),this.outOfMovesBitmapText=this.scene.make.bitmapText({font:Rc.Z.BOLD.KEY,size:this.scene.fontSize(30),text:"outOfMoves",origin:{x:.5,y:.5}}),this.outOfMovesBitmapText.setMaxSize(360,500,!0),this.outOfMovesBitmapText.setPosition(187.5,333.5),this.outOfMovesBitmapText.setDepth(1e12),this.outOfMovesBitmapText.kill(),this.scene.add.existing(this.outOfMovesBitmapText),this.scene.add.existing(this.wellDoneBitmapText)},n.createWellDoneLetterBitmapTexts=function(){var e=this;this.createBitmapTextsFromString(this.scene.i18n.t("wellDone"),this.wellDoneLetterBitmapTexts),this.wellDoneLetterBitmapTexts.forEach((function(t){t.setFontSize(e.wellDoneBitmapText.fontSize)}))},n.createOutOfMovesLetterBitmapTexts=function(){var e=this;this.createBitmapTextsFromString(this.scene.i18n.t("outOfMoves"),this.outOfMovesLetterBitmapTexts),this.outOfMovesLetterBitmapTexts.forEach((function(t){t.setFontSize(e.getFontSizeWithLanguage(e.scene.lang.language))}))},n.createBitmapTextsFromString=function(e,t){for(var n=e.split(""),i=0;i<Math.max(n.length,t.length);i++){if(i>=t.length){var a=this.scene.make.bitmapText({font:Rc.Z.BOLD.KEY,size:this.scene.fontSize(30),origin:{x:.5,y:.5},text:""});a.setIgnoreLanguage(),a.setAlpha(0),t.push(a),this.add(a)}i>=n.length?(t[i].kill(),t[i].setText("")):(t[i].revive(),t[i].setText(n[i]))}},n.createCards=function(){var e=this.scene.theme.getCurrentThemeConfig().cardFaceKey,t=this.scene.add.image(0,0,e,"101"),n=this.scene.add.image(0,0,e,"201"),i=this.scene.add.image(0,0,e,"301"),a=this.scene.add.image(0,0,e,"401");this.cards.push(t,n,i,a),this.cards.forEach((function(e){return e.setWorldSize(49,72)})),this.add(this.cards)},n.alignComponents=function(){[this.wellDoneLetterBitmapTexts,this.outOfMovesLetterBitmapTexts].forEach((function(e){var t=[];(e=Le()(e).call(e,(function(e){return e.active&&e.visible}))).forEach((function(n,i){if(0!=e[i].text.length)if(0==i){var a=e[i].getTextBounds().characters[0];a&&t.push(a.w/2)}else{var s=e[i-1].getTextBounds().characters[0],r=e[i].getTextBounds().characters[0];if(s&&r){var o=" "==e[i-1].text?10:s.w,c=" "==e[i].text?10:r.w;t.push(t[i-1]+o/2+1+c/2)}}}));var n=-t[t.length-1]/2-5;e.forEach((function(i,a){var s=-(e.length-1)/2*25+25*a;i.setX(s),i.setX(n+t[a])}))}))},n.createDevButtons=function(){GameCore.Utils.Valid.isDebugger()&&this.createCloseButton()},n.createCloseButton=function(){var e=this,t=new Ol.Z(this.scene,40,40),n=this.scene.add.image(0,0,YL,KL.IC_BG_OFF);n.setWorldSize(40,40);var i=this.scene.make.bitmapText({font:Rc.Z.PRIMARY.KEY,size:this.scene.fontSize(10),text:"X",origin:{x:.5,y:.5}});i.setCenterAlign(),t.add([n,i]),Phaser.Display.Align.To.TopRight(t,this),t.onClick=function(){e.isPlayingAnimation||e.scene.screen.close(Os.o4.WELL_DONE_SCREEN)},this.add(t)},n.hideContent=function(){[this.wellDoneLetterBitmapTexts,this.outOfMovesLetterBitmapTexts].forEach((function(e){e.forEach((function(e){e.setAlpha(0),e.setAngle(10)}))})),this.cards.forEach((function(e){e.setAlpha(0),e.setPosition(0,333.5)}))},n.runEntranceAnimationText=function(){var e=(0,r.Z)(l().mark((function e(){var t,n,i=this;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return 100,this.createWellDoneLetterBitmapTexts(),this.createOutOfMovesLetterBitmapTexts(),this.alignComponents(),t=this.isWellDone?this.wellDoneLetterBitmapTexts:this.outOfMovesLetterBitmapTexts,n=De()(t).call(t,(function(e,t){return new(h())((function(n){i.scene.add.tween({targets:e,duration:100,delay:100*t/2,ease:Phaser.Math.Easing.Cubic.Out,props:{alpha:1,angle:0,scale:{from:.6,to:1,ease:Phaser.Math.Easing.Elastic.Out,easeParams:[.1,.45],duration:1e3}},onComplete:n})}))})),e.next=8,h().all(n);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.runEntranceAnimationCards=function(){var e=(0,r.Z)(l().mark((function e(){var t,n,i,a,s,r=this;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=800,a=De()(t=this.cards).call(t,(function(e,t){var n=r.cardInitialProps[t],a=t*i/4,s=new(h())((function(t){r.scene.add.tween({targets:e,duration:i,delay:a,ease:Phaser.Math.Easing.Back.Out,easeParams:[2.7],props:{alpha:1,y:n.y,scale:{from:.6*n.scale,to:1.1*n.scale,ease:Phaser.Math.Easing.Elastic.Out,easeParams:[.1,.45],duration:i}},onComplete:t})})),o=new(h())((function(t){r.scene.add.tween({targets:e,duration:i,delay:a,ease:Phaser.Math.Easing.Quadratic.Out,props:{x:n.x},onComplete:t})})),c=new(h())((function(t){r.scene.add.tween({targets:e,duration:i,delay:a,ease:Phaser.Math.Easing.Quadratic.Out,props:{x:n.x},onComplete:t})}));return h().all([s,o,c])})),e.next=4,h().all(a);case 4:return s=De()(n=this.cards).call(n,(function(e,t){var n=r.cardInitialProps[t];return new(h())((function(t){r.scene.add.tween({targets:e,ease:Phaser.Math.Easing.Elastic.Out,easeParams:[.1,.45],duration:i,props:{scale:n.scale},onComplete:t})}))})),e.next=7,h().all(s);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.runEntranceAnimation=function(){var e=(0,r.Z)(l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isPlayingAnimation){e.next=2;break}return e.abrupt("return");case 2:return this.isPlayingAnimation=!0,e.next=5,this.runEntranceAnimationText();case 5:this.isPlayingAnimation=!1;case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.getFontSizeWithLanguage=function(e){switch(e){case"es":return 22;case"pt":return 24;case"fr":return 20;default:return 30}},t}(Phaser.GameObjects.Container),jL=function(e){function t(t,n,i,a){var s;return(s=e.call(this,t,n,i,a)||this).fadeInAnimation=void 0,s.fadeOutAnimation=void 0,s.container=void 0,s.setDepth(Os.Ks.POPUP),s.container=new VL(t),s.add(s.container),s.background.setTint(1315862),s.background.setAlpha(.65),s}(0,o.Z)(t,e);var n=t.prototype;return n.open=function(t){e.prototype.open.call(this,t),this.background.setAlpha(.5),this.container.setInteractive();var n=(null!=t?t:{}).wellDone;this.container.enableWellDone("boolean"!==typeof n||n),this.runOpenAnimation()},n.close=function(){this.runCloseAnimation()},n.runOpenAnimation=function(){var e=(0,r.Z)(l().mark((function e(){var t,n,i=this;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==(t=this.fadeInAnimation)||null==(n=t.tween)||!n.isPlaying()){e.next=2;break}return e.abrupt("return");case 2:this.scene.audio.playSound(Ls.Z.POPUP_SHOW),this.container.hideContent(),this.fadeInAnimation||(this.fadeInAnimation=new Mh.Z({targets:[this],onComplete:function(){var e=(0,r.Z)(l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.container.runEntranceAnimation();case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()})),this.fadeInAnimation.play();case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.runCloseAnimation=function(){var t,n,i=this;null!=(t=this.fadeOutAnimation)&&null!=(n=t.tween)&&n.isPlaying()||(this.scene.audio.playSound(Ls.Z.POPUP_OFF),this.fadeOutAnimation||(this.fadeOutAnimation=new zm.Z({targets:[this],props:{alpha:0},onComplete:function(){e.prototype.close.call(i)}})),this.fadeOutAnimation.play())},t}(GameCore.Screen),JL=Gn.Z.GAMEPLAY_DEFAULT.KEY,XL=function(e){function t(t,n){var i;return(i=e.call(this,t,60,44)||this).options=void 0,i.button=void 0,i.getBackgroundByStatus=function(){var e=i.options,t=e.enable,n=e.backgroundOn,a=e.backgroundOff;return t?n:a},i.createButton=function(e){var t=i.getBackgroundByStatus();i.button=i.scene.add.image(0,0,e,t),i.add(i.button)},i.button=t.add.image(0,0,JL,"ic_switch_off"),i.button.setWorldSize(157/2.88,25),i.add(i.button),i.options={enable:n,backgroundOn:"ic_switch_on",backgroundOff:"ic_switch_off"},i.updateStatus(n),i}(0,o.Z)(t,e);var n=t.prototype;return n.processCallback=function(e){var t=this.options.enable;this.updateStatus(!t),e(!t)},n.updateStatus=function(e){this.options.enable=e;var t=this.getBackgroundByStatus();this.button.setFrame(t)},n.logButtonEvent=function(){var e=this.getParentName(),t=this.name,n=!this.options.enable;this.scene.analytics.event(Nn._.BUTTON_CLICK,{button_name:t,screen_name:e,enable:n})},t}(Ol.Z),qL=XL,QL=Gn.Z.GAMEPLAY_DEFAULT,$L=QL.KEY,eR=QL.FRAME,tR=function(e){function t(t){var n;return(n=e.call(this,t,321/2.88,127/2.88)||this).setName("DoneButton"),n.createBackground(),n.createContents(),n}(0,o.Z)(t,e);var n=t.prototype;return n.createBackground=function(){var e=this.scene.make.image({key:$L,frame:eR.BUTTON_DONE});e.setWorldSize(this.width,this.height),this.add(e)},n.createContents=function(){var e=new Jl(this.scene,{iconTextPadding:8,text:"done",fontSize:22,iconKey:Gn.Z.GAMEPLAY_DEFAULT.KEY,iconFrame:Gn.Z.GAMEPLAY_DEFAULT.FRAME.IC_DONE,iconWidth:20,iconHeight:16.5});this.add(e),e.text.setMaxSize(100,35)},t}(Ol.Z),nR=tR,iR=Gn.Z.GAMEPLAY_DEFAULT,aR=iR.KEY,sR=iR.FRAME,rR=function(e){function t(t,n,i){var a;return(a=e.call(this,t)||this).options=void 0,a.buttons=void 0,a.callback=void 0,a.createButton=function(e,t){var n=new Ol.Z(a.scene,32,32),i=a.scene.add.image(0,0,aR,sR.IC_SQUARE_OFF);i.setName("bg"),i.setWorldSize(65/2.88,65/2.88);var s=a.scene.make.bitmapText({font:Rc.Z.BOLD.KEY,size:a.scene.fontSize(14),text:t,origin:{x:.5,y:.5}});return a.add(n),n.add([i,s]),Phaser.Display.Align.In.Center(s,i,0,1),Phaser.Display.Align.In.Center(i,n),n.x=32*e,n},a.handleSelectOption=function(e){return function(){a.options.checked=e,a.updateSelectedOption(),a.callback&&a.callback(e)}},a.setSize(96,32),a.options={checked:n,options:i},a.buttons={},a.createButtons(),a.updateSelectedOption(),a.scene.add.existing((0,As.Z)(a)),a}(0,o.Z)(t,e);var n=t.prototype;return n.createButtons=function(){var e=this;this.options.options.forEach((function(t,n){var i=e.createButton(n,t);e.buttons[t]=i,i.onClick=e.handleSelectOption(t)}))},n.updateStatus=function(e){this.options.checked=e,this.updateSelectedOption()},n.updateSelectedOption=function(){var e=this,t=this.options,n=t.options,i=t.checked;n.forEach((function(t){e.buttons[t].getByName("bg").setFrame(sR.IC_SQUARE_OFF)})),this.buttons[i].getByName("bg").setFrame(sR.IC_SQUARE_ON)},(0,he.Z)(t,[{key:"onClick",set:function(e){this.callback=e}}]),t}(Phaser.GameObjects.Container),oR=rR,cR=Gn.Z.GAMEPLAY_DEFAULT,hR=cR.KEY,uR=cR.FRAME,lR=44,dR=function(e){function t(t){var n;return(n=e.call(this,t)||this).bg=void 0,n.scroller=void 0,n.toggleButtonMap=new(ne()),n.buttons=void 0,n.gameTypeTag=void 0,n.suitSizeCheckBoxBtn=void 0,n.gameOptionText=void 0,n.createBackground(),n.createScroller(),n.createHeader(),n.createGameTypeTag(),n.createMainButtons(),n.createDoneButton(),t.add.existing((0,As.Z)(n)),n.setScale(jf(t)),n.setY(Jf(n.scene)),n}(0,o.Z)(t,e);var n=t.prototype;return n.createBackground=function(){var e=(0,ul.t)(),t=this.scene.add.nineslice(0,0,hR,uR.SETTINGS_POPUP,948/2.88*e,534.375*e,0*e,0*e,50/2.88*e,50/2.88*e);t.scale=1/e,this.add(t),this.bg=t,this.setSize(t.displayWidth,t.displayHeight)},n.createHeader=function(){var e=(0,ul.t)(),t=this.scene.add.nineslice(0,0,hR,uR.BG_GAME_STAT_TOP,326*e,48*e,0*e,0*e,35/2.88*e,20/2.88*e);t.scale=1/e;var n=this.scene.make.bitmapText({font:Rc.Z.BOLD_SHADOW_BLUR.KEY,size:this.scene.fontSize(22),text:"GAME OPTIONS",origin:{x:.5,y:.5}});n.setTint(16449487,16449487,15913325,15913325),this.add([t,n]),t.setPosition(0,-this.height/2+t.displayHeight/2+2),n.y=t.y+2},n.createGameTypeTag=function(){this.gameTypeTag=new hy(this.scene),this.add(this.gameTypeTag),Phaser.Display.Align.In.TopLeft(this.gameTypeTag,this,1,.5)},n.createScroller=function(){this.scroller=new fI.Z(this.scene,{width:this.bg.displayWidth,height:413,marginBottom:0}),this.scroller.createScrollerBar(0,5,{key:hR,frame:uR.SCROLLER,width:5,height:550/2.88}),Phaser.Display.Align.In.TopCenter(this.scroller,this,0,-50),this.add(this.scroller)},n.setGameType=function(e){this.updateButtons(e),this.gameTypeTag.setGameType(e)},n.createMainButtons=function(){var e=this.scene.player.getPlayerSettings(),t=e.sound,n=void 0===t||t,i=e.tapToMove,a=void 0===i||i,s=e.autoHints,r=void 0===s||s,o=e.autoComplete,c=void 0===o||o,h=e.autoMoveToFoundation,u=void 0===h||h,l=e.relaxedSpider,d=void 0===l||l,p=e.highlightLowCards,f=void 0===p||p,g=e.drawMode3,m=void 0!==g&&g,v=e.leftHanded,y=void 0!==v&&v,T=e.vibrate,C=void 0!==T&&T,E=e.suitSize,A=void 0===E?"one":E,S="1";"one"===A?S="1":"two"===A?S="2":"four"===A&&(S="4");for(var b=[this.createToggleButton(ss.sound,"Sound Effects",n,uR.IC_SOUND,25,61/2.88),this.createToggleButton(ss.vibrate,"Vibration",C,"ic_vibrate",25.52,22.8),this.createToggleButton(ss.tapToMove,"Tap To Move",a,uR.IC_MOVE,51/2.88,80/2.88),this.createToggleButton(ss.autoHints,"Auto Hints",r,uR.IC_HINT_SETTINGS,75/2.88,74/2.88),this.createToggleButton(ss.autoComplete,"Auto Complete",c,uR.IC_AUTO_COMPLETE,65/2.88,66/2.88),this.createSeparateNode("Play mode"),this.createToggleButton(ss.autoMoveToFoundation,"Auto Move To\nFoundation",u,uR.IC_AUTO_MOVE_FOUNDATION,58/2.88,74/2.88),this.createToggleButton(ss.highlightLowCards,"Highlight Low Cards",f,uR.IC_HIGHLIGHT_LOW_CARD,73/2.88,75/2.88),this.createToggleButton(ss.drawMode3,"3 Draw Mode",m,uR.IC_DRAW_MODE,75/2.88,60/2.88),this.createCheckboxButton(ss.suitSize,"Suit Size",S,["1","2","4"],uR.IC_SUIT_SIZE),this.createToggleButton(ss.relaxedSpider,"Relaxed Spider",d,uR.IC_RELAX,65/2.88,66/2.88),this.createSeparateNode("Personalization"),this.createToggleButton("leftHanded","Left-handed Mode",y,uR.IC_LEFT_HAND_SETTINGS,58/2.88,79/2.88),this.createHowToPlayButton()],I=b[0].height/2-this.scroller.height/2,w=0;w<b.length;w++){if(b[w].setPosition(0,I),"separateNode"!=b[w].name){var P=this.scene.add.image(0,21,hR,uR.BLANK);P.setName("line"),P.setWorldSize(this.width-3,2),P.setTint(1333293),P.setAlpha(0,0,1,1),b[w].add(P)}b[w+1]&&(I+=b[w].height)}this.scroller.addItems(b),this.scroller.setEnable(!0),this.buttons=b},n.openNotificationScreen=function(){this.scene.screen.open(Os.o4.NOTIFICATION_SCREEN,{message:"New settings will take effect\nin the next deal!"})},n.createCheckboxButton=function(e,t,n,i,a){var s=this,r=this.scene.add.container(0,0);r.setSize(this.width,lR),r.setName(e);var o=new oR(this.scene,n,i);o.setName(e),o.onClick=function(t){var n;"suitSize"==e&&("1"==t?n="one":"2"==t?n="two":"4"==t&&(n="four"),s.scene.player.setSetting(e,n),s.openNotificationScreen())},this.suitSizeCheckBoxBtn=o;var c=this.scene.make.bitmapText({font:Rc.Z.PRIMARY.KEY,size:this.scene.fontSize(16),text:t,origin:{x:.5,y:.5}}),h=this.scene.add.image(0,0,hR,a);return h.setWorldSize(61/2.88,62/2.88),r.add([o,c,h]),Phaser.Display.Align.In.Center(h,r,-r.width/2+25+2,0),Phaser.Display.Align.In.LeftCenter(c,r,-50,1),Phaser.Display.Align.In.RightCenter(o,r,-41,0),r},n.getButton=function(e){var t;return D()(t=this.buttons).call(t,(function(t){return t.name==e}))},n.updateButtons=function(e){var t,n,i,a=this.getButton(ss.autoMoveToFoundation),s=this.getButton(ss.highlightLowCards),r=this.getButton(ss.relaxedSpider),o=this.getButton(ss.drawMode3),c=this.getButton(ss.suitSize);switch(null==(t=this.gameOptionText)||t.setText((0,jg.Ds)(e)+" Options"),null==(n=this.gameOptionText)||n.setPosition(-this.width/2+14,0),e){case is.Z.KLONDIKE:null==a||a.kill(),null==s||s.kill(),null==r||r.kill(),null==o||o.revive(),null==c||c.kill();break;case is.Z.FREE_CELL:null==a||a.revive(),null==s||s.revive(),null==r||r.kill(),null==o||o.kill(),null==c||c.kill();break;default:null==a||a.kill(),null==s||s.kill(),null==r||r.revive(),null==o||o.kill(),null==c||c.revive()}for(var h=Le()(i=this.buttons).call(i,(function(e){return e.active})),u=h[0].height/2-this.scroller.height/2,l=0;l<h.length;l++){h[l].setPosition(0,u);var d=h[l].getByName("line");d&&(l<h.length-1&&"separateNode"==h[l+1].name||l==h.length-1)?d.setVisible(!1):d&&d.setVisible(!0),h[l+1]&&(u+=h[l].height)}this.scroller.refresh()},n.createToggleButton=function(e,t,n,i,a,s){var r=this;void 0===i&&(i="ic_sound"),void 0===a&&(a=24),void 0===s&&(s=24);var o=this.scene.add.container(0,0);o.setSize(this.width,lR),o.setName(e);var c=new qL(this.scene,n);this.toggleButtonMap.set(e,c),c.setName(e),c.onClick=function(t){r.scene.player.setSetting(e,t),r.scene.events.emit("settings-changed",e,t),e==ss.sound&&r.handleSoundChanged(t);var n=[ss.drawMode3,ss.relaxedSpider,ss.suitSize];be()(n).call(n,e)&&r.openNotificationScreen(),e==ss.vibrate&&r.scene.vibration.performVibrating(50);var i=r.scene.player.getPlayerSettings().modifiedOptions,a=GameCore.Utils.Json.clone(i);be()(a).call(a,e)||a.push(e),r.scene.player.setSetting(ss.modifiedOptions,a)},"leftHanded"==e&&this.scene.events.on(Lr.BOARD_STATE_CHANGED,(function(e){e==ku.DEALING?c.setDisabled(!0):c.setDisabled(!1)}));var h=this.scene.make.bitmapText({font:Rc.Z.PRIMARY.KEY,size:this.scene.fontSize(16),text:t,origin:{x:.5,y:.5}}),u=this.scene.add.image(0,0,hR,i);return u.setWorldSize(a,s),h.setTint(16777215),o.add([c,h,u]),Phaser.Display.Align.In.Center(u,o,-o.width/2+25,0),Phaser.Display.Align.In.LeftCenter(h,o,-50,1),Phaser.Display.Align.In.RightCenter(c,o,-10,0),e==ss.sound&&(u.x+=2),o},n.updateToggleButtons=function(){var e,t,n,i,a,s,r,o,c=this.scene.player.getPlayerSettings(),h=c.sound,u=void 0===h||h,l=c.tapToMove,d=void 0===l||l,p=c.autoHints,f=void 0===p||p,g=c.autoComplete,m=void 0===g||g,v=c.drawMode3,y=void 0!==v&&v,T=c.leftHanded,C=void 0!==T&&T;null==(e=this.toggleButtonMap.get("sound"))||e.updateStatus(u),null==(t=this.toggleButtonMap.get("tapToMove"))||t.updateStatus(d),null==(n=this.toggleButtonMap.get("drawMode3"))||n.updateStatus(y),null==(i=this.toggleButtonMap.get("autoHints"))||i.updateStatus(f),null==(a=this.toggleButtonMap.get("quickPlay"))||a.updateStatus(!1),null==(s=this.toggleButtonMap.get("leftHanded"))||s.updateStatus(C),null==(r=this.toggleButtonMap.get("autoComplete"))||r.updateStatus(m),null==(o=this.toggleButtonMap.get("leftHanded"))||o.updateStatus(C)},n.createHowToPlayButton=function(){var e=this,t=new Ol.Z(this.scene,this.width,lR);t.setName("HowToPlay"),t.onClick=function(){e.scene.screen.close(Os.o4.SETTINGS_SCREEN),e.scene.screen.open(Os.o4.HOW_TO_PLAY_SCREEN)};var n=this.scene.make.bitmapText({font:Rc.Z.PRIMARY.KEY,size:this.scene.fontSize(16),text:"How To Play?",origin:{x:.5,y:.5}});n.setTint(16777215);var i=this.scene.add.image(0,0,hR,uR.IC_BOOK);i.setWorldSize(21.875,64/2.88);var a=this.scene.add.image(0,0,hR,uR.IC_NEXT);return a.setWorldSize(14.5,24),Phaser.Display.Align.In.Center(i,t,-t.width/2+25,0),Phaser.Display.Align.In.LeftCenter(n,t,-50,1),Phaser.Display.Align.In.RightCenter(a,t,-14),t.add([n,i,a]),t},n.createSeparateNode=function(e){var t=this.scene.add.container(0,0);t.setSize(this.width,lR);var n,i=new Lf(this.scene,{width:this.width-3,height:lR,key:hR,frame:uR.BG_SETTING_SEPERATE_NOTE,symmetricType:Of.HORIZONTAL}),a=this.scene.make.bitmapText({font:Rc.Z.BOLD.KEY,size:this.scene.fontSize(22),text:e,origin:{x:.5,y:.5}});"Play mode"==e?(this.gameOptionText=a,null==(n=this.gameOptionText)||n.setOrigin(0,.5)):Phaser.Display.Align.In.LeftCenter(a,t,-14);return a.setTint(12704660),t.setName("separateNode"),t.add([i,a]),t},n.handleSoundChanged=function(e){this.scene.sound.volume=e?1:0},n.createDoneButton=function(){var e=this,t=(0,ul.t)(),n=this.scene.add.nineslice(0,0,hR,uR.BG_SETTINGS_BOTTOM,939/2.88*t,205/2.88*t,0*t,0*t,15/2.88*t,25/2.88*t);n.scale=1/t;var i=new nR(this.scene);i.onClick=function(){e.scene.screen.close(Os.o4.SETTINGS_SCREEN)},i.setPosition(0,2.5);var a=this.scene.add.container();a.setSize(n.displayWidth,n.displayHeight),a.add([n,i]),this.add(a),Phaser.Display.Align.In.BottomCenter(a,this,0,-3)},n.resetScroller=function(){this.scroller.gotoTop()},t}(Phaser.GameObjects.Container),pR=dR,fR=function(e){function t(t,n,i,a){var s;return(s=e.call(this,t,n,i,a)||this).fadeInAnimation=void 0,s.fadeOutAnimation=void 0,s.settingsContainer=void 0,s.setDepth(Os.Ks.POPUP),s.settingsContainer=new pR(t),s.add(s.settingsContainer),s.background.setTint(1315862),s.background.setAlpha(.65),s}(0,o.Z)(t,e);var n=t.prototype;return n.open=function(){e.prototype.open.call(this);var t=Rr.filterGameType;this.settingsContainer.resetScroller(),this.settingsContainer.setGameType(t),this.runOpenAnimation(),this.updateSettings()},n.close=function(){this.runCloseAnimation()},n.updateSettings=function(){this.settingsContainer.updateToggleButtons()},n.runOpenAnimation=function(){var e,t;null!=(e=this.fadeInAnimation)&&null!=(t=e.tween)&&t.isPlaying()||(this.scene.audio.playSound(Ls.Z.POPUP_SHOW),this.fadeInAnimation||(this.fadeInAnimation=new Mh.Z({targets:[this]})),this.fadeInAnimation.play())},n.runCloseAnimation=function(){var t,n,i=this;null!=(t=this.fadeOutAnimation)&&null!=(n=t.tween)&&n.isPlaying()||(this.scene.audio.playSound(Ls.Z.POPUP_OFF),this.fadeOutAnimation||(this.fadeOutAnimation=new zm.Z({targets:[this],props:{alpha:0},onComplete:function(){i.setAlpha(1),e.prototype.close.call(i)}})),this.fadeOutAnimation.play())},t}(GameCore.Screen),gR=fR,mR=Gn.Z.GAMEPLAY_DEFAULT.KEY,vR=function(e){function t(t,n){var i;return(i=e.call(this,t,60,44)||this).options=void 0,i.button=void 0,i.getBackgroundByStatus=function(){var e=i.options,t=e.enable,n=e.backgroundOn,a=e.backgroundOff;return t?n:a},i.createButton=function(e){var t=i.getBackgroundByStatus();i.button=i.scene.add.image(0,0,e,t),i.add(i.button)},i.button=t.add.image(0,0,mR,"ic_switch_off"),i.button.setWorldSize(157/2.88,25),i.add(i.button),i.options={enable:n,backgroundOn:"ic_switch_on",backgroundOff:"ic_switch_off"},i.updateStatus(n),i}(0,o.Z)(t,e);var n=t.prototype;return n.processCallback=function(e){var t=this.options.enable;this.updateStatus(!t),e(!t)},n.updateStatus=function(e){this.options.enable=e;var t=this.getBackgroundByStatus();this.button.setFrame(t)},n.logButtonEvent=function(){var e=this.getParentName(),t=this.name,n=!this.options.enable;this.scene.analytics.event(Nn._.BUTTON_CLICK,{button_name:t,screen_name:e,enable:n})},t}(Ol.Z),yR=vR,TR=Gn.Z.GAMEPLAY_DEFAULT,CR=TR.KEY,ER=TR.FRAME,AR=function(e){function t(t){var n;return(n=e.call(this,t,321/2.88,127/2.88)||this).setName("DoneButton"),n.createBackground(),n.createContents(),n}(0,o.Z)(t,e);var n=t.prototype;return n.createBackground=function(){var e=this.scene.make.image({key:CR,frame:ER.BUTTON_DONE});e.setWorldSize(this.width,this.height),this.add(e)},n.createContents=function(){var e=new Jl(this.scene,{iconTextPadding:5,text:"done",iconKey:CR,iconFrame:ER.IC_DONE,iconWidth:15,iconHeight:12.5});e.text.setMaxSize(60,20),this.add(e),Phaser.Display.Align.In.Center(e,this,0,-1)},t}(Ol.Z),SR=AR,bR=Gn.Z.GAMEPLAY_DEFAULT,IR=bR.KEY,wR=bR.FRAME,PR=44,kR=function(e){function t(t){var n;return(n=e.call(this,t)||this).bg=void 0,n.scroller=void 0,n.toggleButtonMap=new(ne()),n.closeButton=void 0,n.buttons=void 0,n.gameTypeTag=void 0,n.suitSizeCheckBoxBtn=void 0,n.gameOptionText=void 0,n.createBackground(),n.createScroller(),n.createHeader(),n.createGameTypeTag(),n.createCloseButton(),n.createMainButtons(),n.createDoneButton(),t.add.existing((0,As.Z)(n)),n.setScale(jf(t)),n.setY(Jf(n.scene)),n}(0,o.Z)(t,e);var n=t.prototype;return n.createBackground=function(){var e=(0,ul.t)(),t=this.scene.add.nineslice(0,0,IR,wR.SETTINGS_POPUP,948/2.88*e,534.375*e,0*e,0*e,50/2.88*e,50/2.88*e);t.scale=1/e,this.add(t),this.bg=t,this.setSize(t.displayWidth,t.displayHeight)},n.createHeader=function(){var e=(0,ul.t)(),t=this.scene.add.nineslice(0,0,IR,wR.BG_GAME_STAT_TOP,326*e,48*e,0*e,0*e,35/2.88*e,20/2.88*e);t.scale=1/e;var n=this.scene.make.bitmapText({font:Rc.Z.BOLD_SHADOW_BLUR.KEY,size:this.scene.fontSize(22),text:"GAME OPTIONS",origin:{x:.5,y:.5}});n.setTint(16449487,16449487,15913325,15913325),this.add([t,n]),t.setPosition(0,-this.height/2+t.displayHeight/2+2),n.y=t.y+2},n.createGameTypeTag=function(){this.gameTypeTag=new hy(this.scene),this.add(this.gameTypeTag),Phaser.Display.Align.In.TopLeft(this.gameTypeTag,this,1,.5)},n.createScroller=function(){this.scroller=new fI.Z(this.scene,{width:this.bg.displayWidth,height:413,marginBottom:0}),this.scroller.createScrollerBar(0,5,{key:IR,frame:wR.SCROLLER,width:5,height:550/2.88}),Phaser.Display.Align.In.TopCenter(this.scroller,this,0,-50),this.add(this.scroller)},n.setGameType=function(e){this.updateButtons(e),this.gameTypeTag.setGameType(e)},n.createMainButtons=function(){var e=this.scene.player.getPlayerSettings(),t=e.sound,n=void 0===t||t,i=e.tapToMove,a=void 0===i||i,s=e.autoHints,r=void 0===s||s,o=e.autoComplete,c=void 0===o||o,h=e.autoMoveToFoundation,u=void 0===h||h,l=e.relaxedSpider,d=void 0===l||l,p=e.highlightLowCards,f=void 0===p||p,g=e.drawMode3,m=void 0!==g&&g,v=e.leftHanded,y=void 0!==v&&v,T=(e.vibrate,e.suitSize),C=void 0===T?"one":T,E="1";"one"===C?E="1":"two"===C?E="2":"four"===C&&(E="4");for(var A=[this.createToggleButton(ss.sound,"Sound Effects",n,wR.IC_SOUND,25,61/2.88),this.createToggleButton(ss.tapToMove,"Tap To Move",a,wR.IC_MOVE,51/2.88,80/2.88),this.createToggleButton(ss.autoHints,"Auto Hints",r,wR.IC_HINT_SETTINGS,75/2.88,74/2.88),this.createToggleButton(ss.autoComplete,"Auto Complete",c,wR.IC_AUTO_COMPLETE,65/2.88,66/2.88),this.createSeparateNode("Play mode"),this.createToggleButton(ss.autoMoveToFoundation,"Auto Move To\nFoundation",u,wR.IC_AUTO_MOVE_FOUNDATION,58/2.88,74/2.88),this.createToggleButton(ss.highlightLowCards,"Highlight Low Cards",f,wR.IC_HIGHLIGHT_LOW_CARD,73/2.88,75/2.88),this.createToggleButton(ss.drawMode3,"3 Draw Mode",m,wR.IC_DRAW_MODE,75/2.88,60/2.88),this.createCheckboxButton(ss.suitSize,"Suit Size",E,["1","2","4"],wR.IC_SUIT_SIZE),this.createToggleButton(ss.relaxedSpider,"Relaxed Spider",d,wR.IC_RELAX,65/2.88,66/2.88),this.createSeparateNode("Personalization"),this.createToggleButton("leftHanded","Left-handed Mode",y,wR.IC_LEFT_HAND_SETTINGS,58/2.88,79/2.88),this.createHowToPlayButton()],S=A[0].height/2-this.scroller.height/2,b=0;b<A.length;b++){if(A[b].setPosition(0,S),"separateNode"!=A[b].name){var I=this.scene.add.image(0,21,IR,wR.BLANK);I.setName("line"),I.setWorldSize(this.width-3,2),I.setTint(1333293),I.setAlpha(0,0,1,1),A[b].add(I)}A[b+1]&&(S+=A[b].height)}this.scroller.addItems(A),this.scroller.setEnable(!0),this.buttons=A},n.openNotificationScreen=function(){this.scene.screen.open(Os.o4.NOTIFICATION_SCREEN,{message:"New settings will take effect\nin the next deal!"})},n.createCheckboxButton=function(e,t,n,i,a){var s=this,r=this.scene.add.container(0,0);r.setSize(this.width,PR),r.setName(e);var o=new oR(this.scene,n,i);o.setName(e),o.onClick=function(t){var n;"suitSize"==e&&("1"==t?n="one":"2"==t?n="two":"4"==t&&(n="four"),s.scene.player.setSetting(e,n),s.openNotificationScreen())},this.suitSizeCheckBoxBtn=o;var c=this.scene.make.bitmapText({font:Rc.Z.PRIMARY.KEY,size:this.scene.fontSize(16),text:t,origin:{x:.5,y:.5}}),h=this.scene.add.image(0,0,IR,a);return h.setWorldSize(61/2.88,62/2.88),r.add([o,c,h]),Phaser.Display.Align.In.Center(h,r,-r.width/2+25+2,0),Phaser.Display.Align.In.LeftCenter(c,r,-50,1),Phaser.Display.Align.In.RightCenter(o,r,-41,0),r},n.getButton=function(e){var t;return D()(t=this.buttons).call(t,(function(t){return t.name==e}))},n.updateButtons=function(e){var t,n,i,a=this.getButton(ss.autoMoveToFoundation),s=this.getButton(ss.highlightLowCards),r=this.getButton(ss.relaxedSpider),o=this.getButton(ss.drawMode3),c=this.getButton(ss.suitSize);switch(null==(t=this.gameOptionText)||t.setText((0,jg.Ds)(e)+" Options"),null==(n=this.gameOptionText)||n.setPosition(-this.width/2+14,0),e){case is.Z.KLONDIKE:null==a||a.kill(),null==s||s.kill(),null==r||r.kill(),null==o||o.revive(),null==c||c.kill();break;case is.Z.FREE_CELL:null==a||a.revive(),null==s||s.revive(),null==r||r.kill(),null==o||o.kill(),null==c||c.kill();break;default:null==a||a.kill(),null==s||s.kill(),null==r||r.revive(),null==o||o.kill(),null==c||c.revive()}for(var h=Le()(i=this.buttons).call(i,(function(e){return e.active})),u=h[0].height/2-this.scroller.height/2,l=0;l<h.length;l++){h[l].setPosition(0,u);var d=h[l].getByName("line");d&&(l<h.length-1&&"separateNode"==h[l+1].name||l==h.length-1)?d.setVisible(!1):d&&d.setVisible(!0),h[l+1]&&(u+=h[l].height)}this.scroller.refresh()},n.createToggleButton=function(e,t,n,i,a,s){var r=this;void 0===i&&(i="ic_sound"),void 0===a&&(a=24),void 0===s&&(s=24);var o=this.scene.add.container(0,0);o.setSize(this.width,PR),o.setName(e);var c=new yR(this.scene,n);this.toggleButtonMap.set(e,c),c.setName(e),c.onClick=function(t){r.scene.player.setSetting(e,t),r.scene.events.emit("settings-changed",e,t),e==ss.sound&&r.handleSoundChanged(t);var n=[ss.drawMode3,ss.relaxedSpider,ss.suitSize];be()(n).call(n,e)&&r.openNotificationScreen(),e==ss.vibrate&&r.scene.vibration.performVibrating(50);var i=r.scene.player.getPlayerSettings().modifiedOptions,a=GameCore.Utils.Json.clone(i);be()(a).call(a,e)||a.push(e),r.scene.player.setSetting(ss.modifiedOptions,a)},"leftHanded"==e&&this.scene.events.on(Lr.BOARD_STATE_CHANGED,(function(e){e==ku.DEALING?c.setDisabled(!0):c.setDisabled(!1)}));var h=this.scene.make.bitmapText({font:Rc.Z.PRIMARY.KEY,size:this.scene.fontSize(16),text:t,origin:{x:.5,y:.5}}),u=this.scene.add.image(0,0,IR,i);return u.setWorldSize(a,s),h.setTint(16777215),o.add([c,h,u]),Phaser.Display.Align.In.Center(u,o,-o.width/2+25,0),Phaser.Display.Align.In.LeftCenter(h,o,-50,1),Phaser.Display.Align.In.RightCenter(c,o,-10,0),e==ss.sound&&(u.x+=2),o},n.updateToggleButtons=function(){var e,t,n,i,a,s,r,o,c=this.scene.player.getPlayerSettings(),h=c.sound,u=void 0===h||h,l=c.tapToMove,d=void 0===l||l,p=c.autoHints,f=void 0===p||p,g=c.autoComplete,m=void 0===g||g,v=c.drawMode3,y=void 0!==v&&v,T=c.leftHanded,C=void 0!==T&&T;null==(e=this.toggleButtonMap.get("sound"))||e.updateStatus(u),null==(t=this.toggleButtonMap.get("tapToMove"))||t.updateStatus(d),null==(n=this.toggleButtonMap.get("drawMode3"))||n.updateStatus(y),null==(i=this.toggleButtonMap.get("autoHints"))||i.updateStatus(f),null==(a=this.toggleButtonMap.get("quickPlay"))||a.updateStatus(!1),null==(s=this.toggleButtonMap.get("leftHanded"))||s.updateStatus(C),null==(r=this.toggleButtonMap.get("autoComplete"))||r.updateStatus(m),null==(o=this.toggleButtonMap.get("leftHanded"))||o.updateStatus(C)},n.createHowToPlayButton=function(){var e=this,t=new Ol.Z(this.scene,this.width,PR);t.setName("HowToPlay"),t.onClick=function(){e.scene.screen.close(Os.o4.SETTINGS_SCREEN),e.scene.screen.open(Os.o4.HOW_TO_PLAY_SCREEN)};var n=this.scene.make.bitmapText({font:Rc.Z.PRIMARY.KEY,size:this.scene.fontSize(16),text:"How To Play?",origin:{x:.5,y:.5}});n.setTint(16777215);var i=this.scene.add.image(0,0,IR,wR.IC_BOOK);i.setWorldSize(21.875,64/2.88);var a=this.scene.add.image(0,0,IR,wR.IC_NEXT);return a.setWorldSize(14.5,24),Phaser.Display.Align.In.Center(i,t,-t.width/2+25,0),Phaser.Display.Align.In.LeftCenter(n,t,-50,1),Phaser.Display.Align.In.RightCenter(a,t,-14),t.add([n,i,a]),t},n.createSeparateNode=function(e){var t=this.scene.add.container(0,0);t.setSize(this.width,PR);var n,i=new Lf(this.scene,{width:this.width-3,height:PR,key:IR,frame:wR.BG_SETTING_SEPERATE_NOTE,symmetricType:Of.HORIZONTAL}),a=this.scene.make.bitmapText({font:Rc.Z.BOLD.KEY,size:this.scene.fontSize(22),text:e,origin:{x:.5,y:.5}});"Play mode"==e?(this.gameOptionText=a,null==(n=this.gameOptionText)||n.setOrigin(0,.5)):Phaser.Display.Align.In.LeftCenter(a,t,-14);return a.setTint(12704660),t.setName("separateNode"),t.add([i,a]),t},n.handleSoundChanged=function(e){this.scene.sound.volume=e?1:0},n.createDoneButton=function(){var e=this,t=(0,ul.t)(),n=this.scene.add.nineslice(0,0,IR,wR.BG_SETTINGS_BOTTOM,939/2.88*t,205/2.88*t,0*t,0*t,15/2.88*t,25/2.88*t);n.scale=1/t;var i=new SR(this.scene);i.onClick=function(){e.scene.screen.close(Os.o4.SETTINGS_SCREEN)},i.setPosition(0,2.5);var a=this.scene.add.container();a.setSize(n.displayWidth,n.displayHeight),a.add([n,i]),this.add(a),Phaser.Display.Align.In.BottomCenter(a,this,0,-3)},n.createCloseButton=function(){var e=this;this.closeButton=new Qy(this.scene),this.add(this.closeButton),Phaser.Display.Align.In.TopRight(this.closeButton,this,-6.5,-6.5),this.closeButton.onClick=function(){e.scene.screen.close(Os.o4.SETTINGS_SCREEN)}},n.resetScroller=function(){this.scroller.gotoTop()},t}(Phaser.GameObjects.Container),_R=kR,xR=function(e){function t(t,n,i,a){var s;return(s=e.call(this,t,n,i,a)||this).fadeInAnimation=void 0,s.fadeOutAnimation=void 0,s.settingsContainer=void 0,s.setDepth(Os.Ks.POPUP),s.settingsContainer=new _R(t),s.add(s.settingsContainer),s.background.setTint(1315862),s.background.setAlpha(.65),s}(0,o.Z)(t,e);var n=t.prototype;return n.open=function(){e.prototype.open.call(this);var t=Rr.filterGameType;this.settingsContainer.resetScroller(),this.settingsContainer.setGameType(t),this.runOpenAnimation(),this.updateSettings()},n.close=function(){this.runCloseAnimation()},n.updateSettings=function(){this.settingsContainer.updateToggleButtons()},n.runOpenAnimation=function(){this.scene.audio.playSound(Ls.Z.POPUP_SHOW),this.fadeInAnimation||(this.fadeInAnimation=new Mh.Z({targets:[this]})),this.fadeInAnimation.play()},n.runCloseAnimation=function(){var t=this;this.scene.audio.playSound(Ls.Z.POPUP_OFF),this.fadeOutAnimation||(this.fadeOutAnimation=new zm.Z({targets:[this],props:{alpha:0},onComplete:function(){t.setAlpha(1),e.prototype.close.call(t)}})),this.fadeOutAnimation.play()},t}(GameCore.Screen),OR=xR,LR=GameCore.world.isLandscape()?OR:gR,RR=LR,DR=Gn.Z.JOURNEY,BR=DR.KEY,MR=DR.FRAME,NR=function(e){function t(t){var n;return(n=e.call(this,t)||this).levelCompleted=void 0,n.description=void 0,n.createBackground(),n.createStats(),n}(0,o.Z)(t,e);var n=t.prototype;return n.createBackground=function(){var e=this.scene.add.image(0,0,BR,MR.AWESOME_SCREEN.LB_FRAME);e.setWorldSize(939/2.88,262/2.88),this.add(e),this.setSize(e.width,e.height)},n.setDescription=function(e){var t=e.key,n=e.interpolations,i=void 0===n?{}:n;this.description.setText(t),this.description.setTranslationParameters(i)},n.createStats=function(){this.levelCompleted=this.scene.make.bitmapText({font:Rc.Z.BOLD_SHADOW_BLUR.KEY,size:this.scene.fontSize(22),origin:{x:.5,y:.5}}),this.levelCompleted.setMaxSize(350,40),this.levelCompleted.setTranslationParameter("v",1),this.levelCompleted.setText("levelVComplete"),this.add(this.levelCompleted),Phaser.Display.Align.In.TopCenter(this.levelCompleted,this,0,-25),this.description=this.scene.make.bitmapText({font:Rc.Z.PRIMARY.KEY,size:this.scene.fontSize(16),text:"journeyResultDescription",origin:{x:.5,y:.5}}),this.description.setMaxSize(320,20),this.add(this.description),Phaser.Display.Align.In.TopCenter(this.description,this,0,-55)},n.hideContent=function(){[this.levelCompleted,this.description].forEach((function(e){return e.setAlpha(0)}))},n.runEntranceAnimationRows=function(){var e=(0,r.Z)(l().mark((function e(){var t,n,i=this;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[this.levelCompleted,this.description],200,n=De()(t).call(t,(function(e,t){return new(h())((function(n){i.scene.add.tween({targets:[e],duration:200,delay:200*t/2,ease:Phaser.Math.Easing.Sine.Out,props:{alpha:{from:0,to:1},y:{from:e.y+e.height/2,to:e.y}},onComplete:n})}))})),e.next=5,h().all(n);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.setLevel=function(e,t){void 0===t&&(t=!0),this.levelCompleted.setTranslationParameter("v",e),t?this.levelCompleted.setText("levelVComplete"):this.levelCompleted.setText("levelVFailed")},t}(Phaser.GameObjects.Container),GR=Gn.Z.JOURNEY,FR=GR.KEY,ZR=GR.FRAME,UR=function(e){function t(t){var n;return(n=e.call(this,t)||this).leftIcon=void 0,n.rightIcon=void 0,n.title=void 0,n.setSize(375,27),n.createIcons(),n.createTitle(),n.align(),n.title.on("textChanged",(function(){n.align()})),n}(0,o.Z)(t,e);var n=t.prototype;return n.createIcons=function(){this.leftIcon=this.scene.add.image(0,0,FR,ZR.AWESOME_SCREEN.RECTANGLE_TITLE),this.leftIcon.setWorldSize(44/2.88,15.625),this.rightIcon=this.scene.add.image(0,0,FR,ZR.AWESOME_SCREEN.RECTANGLE_TITLE),this.rightIcon.setWorldSize(44/2.88,15.625),this.add([this.leftIcon,this.rightIcon])},n.createTitle=function(){this.title=this.scene.make.bitmapText({font:Rc.Z.BOLD_SHADOW_BLUR.KEY,size:this.scene.fontSize(24),text:"solitaire_challenge",origin:{x:.5,y:.5}}),this.title.setMaxSize(330,35),this.title.setTint(16449487,16449487,15913325,15913325),this.add(this.title)},n.align=function(){Phaser.Display.Align.To.RightCenter(this.rightIcon,this.title,5,-1),Phaser.Display.Align.To.LeftCenter(this.leftIcon,this.title,5,-1)},t}(Phaser.GameObjects.Container),zR=function(e){function t(t,n,i){var a;return(a=e.call(this,t,n,i)||this).handleNextLevel=(0,r.Z)(l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a.scene.journey.outOfMissions()){e.next=5;break}a.scene instanceof UM&&(a.scene.journey.setIsPlayingCurrentLevel(),a.scene.gameplay.startJourneyMode()),e.next=12;break;case 5:return a.scene.screen.open(Os.o4.OUT_OF_MISSIONS_SCREEN),e.next=8,Au(a.scene,2e3);case 8:if(a.scene.screen.close(Os.o4.OUT_OF_MISSIONS_SCREEN),!(a.scene instanceof UM)){e.next=12;break}return e.next=12,a.scene.handlePlaySingle();case 12:a.scene.screen.close(Os.o4.MISSION_COMPLETED_SCREEN);case 13:case"end":return e.stop()}}),e)}))),a.setName("NextLevel"),a.onClick=a.handleNextLevel,a.createContent(),a}return(0,o.Z)(t,e),t}(Ol.Z),HR=zR,WR=Gn.Z.GAMEPLAY_DEFAULT,YR=WR.KEY,KR=WR.FRAME,VR=function(e){function t(t,n,i){return e.call(this,t,n,i)||this}return(0,o.Z)(t,e),t.prototype.createContent=function(){var e=new Jl(this.scene,{iconTextPadding:8,text:"nextLevel",iconWidth:19,iconHeight:21,iconFrame:Gn.Z.GAMEPLAY_DEFAULT.FRAME.IC_NEXT_LV});e.text.setMaxSize(200,25);var t=this.scene.make.image({key:YR,frame:KR.BTN_NEW_GAME});t.setWorldSize(this.width,this.height),this.add([t,e])},t}(HR),jR=VR,JR=function(e){function t(t,n,i){var a;return(a=e.call(this,t,n,i)||this).setName("GoToMap"),a.onClick=(0,r.Z)(l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a.scene.screen.open(Os.o4.JOURNEY_SCREEN);case 1:case"end":return e.stop()}}),e)}))),a.createContent(),a}return(0,o.Z)(t,e),t}(Ol.Z),XR=Gn.Z.JOURNEY,qR=XR.KEY,QR=XR.FRAME,$R=function(e){function t(t,n,i){return e.call(this,t,n,i)||this}return(0,o.Z)(t,e),t.prototype.createContent=function(){var e=this,t=this.scene.add.container(),n=this.scene.make.bitmapText({font:Rc.Z.PRIMARY.KEY,size:this.scene.fontSize(17),text:"goToMap",origin:{x:.5,y:.5}});n.setMaxSize(200,30);var i=this.scene.add.image(0,0,qR,QR.AWESOME_SCREEN.LINE),a=this.scene.add.image(0,0,qR,QR.AWESOME_SCREEN.IC_GO_TO_MAP);a.setWorldSize(31/2.88,47/2.88);var s=function(){t.setSize(a.width+6+n.width,a.height>n.height?a.height:n.height),i.setWorldSize(n.width,3.125),Phaser.Display.Align.In.LeftCenter(a,t),Phaser.Display.Align.In.RightCenter(n,t),Phaser.Display.Align.In.BottomCenter(i,n,0),e.setSize(t.width,e.height)};s(),n.on("textChanged",(function(){s()})),t.add([n,i,a]),this.add(t)},t}(JR),eD=Gn.Z.JOURNEY,tD=(eD.KEY,eD.FRAME,vE.iD.FOOTER.HEIGHT,function(e){function t(t){var n;return(n=e.call(this,t)||this).awesomeImage=void 0,n.title=void 0,n.stats=void 0,n.nextLevelButton=void 0,n.goToMapButton=void 0,n.awesome=void 0,n.gameTypeRibbon=void 0,n.handleNextLevel=(0,r.Z)(l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.scene.journey.outOfMissions()){e.next=5;break}n.scene instanceof UM&&(n.scene.journey.setIsPlayingCurrentLevel(),n.scene.gameplay.startJourneyMode()),e.next=12;break;case 5:return n.scene.screen.open(Os.o4.OUT_OF_MISSIONS_SCREEN),e.next=8,Au(n.scene,2e3);case 8:if(n.scene.screen.close(Os.o4.OUT_OF_MISSIONS_SCREEN),!(n.scene instanceof UM)){e.next=12;break}return e.next=12,n.scene.handlePlaySingle();case 12:n.scene.screen.close(Os.o4.MISSION_COMPLETED_SCREEN);case 13:case"end":return e.stop()}}),e)}))),n.setSizeContainer(),n.createGameType(),n.createTitle(),n.createBody(),n.createNextLevelButton(),n.createGoToMapButton(),n.createDevButtons(),n.align(),t.add.existing((0,As.Z)(n)),n.setScale(jf(t)),n}(0,o.Z)(t,e);var n=t.prototype;return n.setLevel=function(e){this.stats.setLevel(e)},n.setGameType=function(e){this.gameTypeRibbon.setGameType(e)},n.setSizeContainer=function(){var e=(0,ul.t)(),t=this.scene.add.nineslice(0,0,Gn.Z.GAMEPLAY_DEFAULT.KEY,Gn.Z.GAMEPLAY_DEFAULT.FRAME.RESULT_SCREEN.POPUP,948/2.88*e,1249/2.88*e,0*e,0*e,100/2.88*e,300/2.88*e);t.setScale(1/e),this.add(t),this.setSize(t.displayWidth,t.displayHeight)},n.createGameType=function(){this.gameTypeRibbon=new bE(this.scene),this.add(this.gameTypeRibbon)},n.createTitle=function(){this.awesome=this.scene.add.container(),this.awesome.setSize(300,112),this.add(this.awesome);var e=this.scene.add.image(0,0,Gn.Z.GAMEPLAY_DEFAULT.KEY,Gn.Z.GAMEPLAY_DEFAULT.FRAME.VICTORY);e.setWorldSize(632/2.88,112);var t=this.scene.make.bitmapText({font:Rc.Z.BOLD_SHADOW_BLUR.KEY,size:this.scene.fontSize(32),text:"awesome",origin:{x:.5,y:.5}});t.setRadius(1e3),t.setMaxSize(300,80),t.setGradientHorizontalTint([{at:0,color:16315097},{at:.5,color:16777215},{at:1,color:16315097}]),this.awesome.add([e,t]),Phaser.Display.Align.In.Center(t,e,0,15);var n=new UR(this.scene);this.title=n,this.add([n])},n.createBody=function(){this.stats=new NR(this.scene),this.add(this.stats)},n.createNextLevelButton=function(){this.nextLevelButton=new jR(this.scene,447/2.88,43.75),this.nextLevelButton.onClick=this.handleNextLevel,this.add(this.nextLevelButton)},n.createGoToMapButton=function(){this.goToMapButton=new $R(this.scene,99.5,20),this.goToMapButton.setName("GoToMap"),this.add([this.goToMapButton])},n.runEntranceAnimationButtons=function(){var e=(0,r.Z)(l().mark((function e(){var t,n,i=this;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.nextLevelButton.stopPulsate(),n=De()(t=[this.nextLevelButton,this.goToMapButton]).call(t,(function(e){return new(h())((function(t){i.scene.add.tween({targets:[e],alpha:1,duration:200,onComplete:function(){e.setDisabled(!1),t(),i.nextLevelButton.runPulsate()}})}))})),e.next=4,h().all(n);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.align=function(){Phaser.Display.Align.In.TopCenter(this.awesome,this,0,70),Phaser.Display.Align.In.BottomCenter(this.gameTypeRibbon,this.awesome,0,65),Phaser.Display.Align.In.BottomCenter(this.title,this.gameTypeRibbon,0,45),Phaser.Display.Align.In.BottomCenter(this.stats,this.title,0,100),Phaser.Display.Align.In.BottomCenter(this.nextLevelButton,this,0,-105),Phaser.Display.Align.In.BottomCenter(this.goToMapButton,this,8,-30)},n.createDevButtons=function(){GameCore.Utils.Valid.isDebugger()&&this.createCloseButton()},n.createCloseButton=function(){var e=this,t=new Ol.Z(this.scene,40,40),n=this.scene.add.image(0,0,Gn.Z.GAMEPLAY_DEFAULT.KEY,Gn.Z.GAMEPLAY_DEFAULT.FRAME.IC_BG_OFF);n.setWorldSize(40,40);var i=this.scene.make.bitmapText({font:Rc.Z.PRIMARY.KEY,size:this.scene.fontSize(10),text:"Close",origin:{x:.5,y:.5}});i.setCenterAlign(),t.add([n,i]),this.add(t),Phaser.Display.Align.In.BottomLeft(t,this,0,-200),t.onClick=function(){e.scene.screen.close(Os.o4.MISSION_COMPLETED_SCREEN)}},n.hideContent=function(){this.stats.hideContent(),this.nextLevelButton.setAlpha(0),this.goToMapButton.setAlpha(0)},n.runEntranceAnimationRows=function(){var e=(0,r.Z)(l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h().all([this.stats.runEntranceAnimationRows()]);case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.runEntranceAnimation=function(){var e=(0,r.Z)(l().mark((function e(){var t;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.runEntranceAnimationRows();case 2:return t=this.scene,e.next=5,t.gameplay.finishJourneyGame();case 5:return e.next=7,this.runEntranceAnimationButtons();case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),t}(Phaser.GameObjects.Container)),nD=tD,iD=function(e){function t(t,n,i){var a;return(a=e.call(this,t,n,i)||this).handleReplay=(0,r.Z)(l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a.scene instanceof UM&&(a.scene.journey.setIsPlayingCurrentLevel(),a.scene.gameplay.replayGame()),a.scene.screen.close(Os.o4.MISSION_COMPLETED_SCREEN);case 2:case"end":return e.stop()}}),e)}))),a.setName("ReplayButton"),a.onClick=a.handleReplay,a.createContent(),a}return(0,o.Z)(t,e),t}(Ol.Z),aD=Gn.Z.GAMEPLAY_DEFAULT,sD=aD.KEY,rD=aD.FRAME,oD=function(e){function t(t,n,i){return e.call(this,t,n,i)||this}return(0,o.Z)(t,e),t.prototype.createContent=function(){var e=new Jl(this.scene,{iconTextPadding:8,text:"replay",fontSize:22,iconKey:sD,iconFrame:rD.TOURNAMENT.IC_REPLAY,iconWidth:16,iconHeight:17});e.text.setMaxSize(90,30),e.text.setCenterAlign();var t=this.scene.make.image({key:sD,frame:rD.TOURNAMENT.BUTTON_REPLAY});t.setWorldSize(this.width,this.height),this.add([t,e]),Phaser.Display.Align.In.Center(e,this)},t}(iD),cD=function(e){function t(t){var n;return(n=e.call(this,t)||this).buttons=[],n.replayButton=void 0,n.shareButton=void 0,n.setSizeContainer(),n.createReplayButton(),n}(0,o.Z)(t,e);var n=t.prototype;return n.setSizeContainer=function(){this.setSize(375,48)},n.createReplayButton=function(){var e=new oD(this.scene,311/2.88,125/2.88);this.add(e),this.buttons.push(e),this.replayButton=e},n.hideContent=function(){this.buttons.forEach((function(e){e.setAlpha(0)}))},n.runEntranceAnimationButtons=function(){var e=(0,r.Z)(l().mark((function e(){var t,n,i=this;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.replayButton.stopPulsate(),n=De()(t=this.buttons).call(t,(function(e){return new(h())((function(t){i.scene.add.tween({targets:[e],alpha:1,duration:200,onComplete:function(){e.setDisabled(!1),t(),i.replayButton.runPulsate()}})}))})),e.next=4,h().all(n);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),t}(Phaser.GameObjects.Container),hD=Gn.Z.GAMEPLAY_DEFAULT,uD=hD.KEY,lD=hD.FRAME,dD=(vE.iD.FOOTER.HEIGHT,function(e){function t(t){var n;return(n=e.call(this,t)||this).stats=void 0,n.footer=void 0,n.title=void 0,n.gameTypeRibbon=void 0,n.setSizeContainer(),n.createTitle(),n.createGameType(),n.createStats(),n.createFooter(),n.createDevButtons(),n.align(),t.add.existing((0,As.Z)(n)),n.setScale(jf(t)),n}(0,o.Z)(t,e);var n=t.prototype;return n.setGameType=function(e){this.gameTypeRibbon.setGameType(e)},n.updateInfo=function(e,t){this.stats.setLevel(e,!1),this.stats.setDescription(t)},n.setSizeContainer=function(){var e=(0,ul.t)(),t=this.scene.add.nineslice(0,0,Gn.Z.GAMEPLAY_DEFAULT.KEY,Gn.Z.GAMEPLAY_DEFAULT.FRAME.RESULT_SCREEN.POPUP,948/2.88*e,1249/2.88*e,0*e,0*e,100/2.88*e,300/2.88*e);t.setScale(1/e),this.add(t),this.setSize(t.displayWidth,t.displayHeight)},n.createTitle=function(){var e=this.scene.add.container(0,0);this.add(e),this.title=e;var t=this.scene.add.image(0,0,uD,lD.SPADE);t.setWorldSize(50/2.88,56/2.88);var n=this.scene.make.bitmapText({font:Rc.Z.BOLD_SHADOW_BLUR.KEY,size:this.scene.fontSize(34),text:"missionFailed",origin:{x:.5,y:.5}}),i=this.scene.add.image(0,0,uD,lD.HEART);i.setWorldSize(48/2.88,18.75),e.setSize(375,n.height),n.setTint(16777215,16777215,12833246,12833246),e.add([t,n,i]),Phaser.Display.Align.To.LeftCenter(t,n,8,-4),Phaser.Display.Align.To.RightCenter(i,n,8,-4)},n.createGameType=function(){this.gameTypeRibbon=new bE(this.scene),this.add(this.gameTypeRibbon)},n.createStats=function(){this.stats=new NR(this.scene),this.add(this.stats)},n.createFooter=function(){var e=this;this.footer=new cD(this.scene),this.footer.replayButton.onClick=(0,r.Z)(l().mark((function t(){return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.scene instanceof UM&&(e.scene.journey.setIsPlayingCurrentLevel(),e.scene.gameplay.replayGame()),e.scene.screen.close(Os.o4.MISSION_COMPLETED_SCREEN);case 2:case"end":return t.stop()}}),t)}))),this.add(this.footer)},n.createDevButtons=function(){GameCore.Utils.Valid.isDebugger()&&this.createCloseButton()},n.createCloseButton=function(){var e=this,t=new Ol.Z(this.scene,40,40),n=this.scene.add.image(0,0,uD,lD.IC_BG_OFF);n.setWorldSize(40,40);var i=this.scene.make.bitmapText({font:Rc.Z.PRIMARY.KEY,size:this.scene.fontSize(10),text:"Close",origin:{x:.5,y:.5}});i.setCenterAlign(),t.add([n,i]),this.add(t),Phaser.Display.Align.In.BottomLeft(t,this,0,-200),t.onClick=function(){e.scene.screen.close(Os.o4.MISSION_COMPLETED_SCREEN)}},n.hideContent=function(){this.stats.hideContent(),this.footer.hideContent()},n.runEntranceAnimationRows=function(){var e=(0,r.Z)(l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h().all([this.stats.runEntranceAnimationRows()]);case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.runEntranceAnimation=function(){var e=(0,r.Z)(l().mark((function e(){var t;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.runEntranceAnimationRows();case 2:return t=this.scene,e.next=5,t.gameplay.finishJourneyGame();case 5:return e.next=7,this.footer.runEntranceAnimationButtons();case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.align=function(){Phaser.Display.Align.In.TopCenter(this.title,this,0,-30),Phaser.Display.Align.In.BottomCenter(this.gameTypeRibbon,this.title,0,75),Phaser.Display.Align.In.Center(this.stats,this,0,20),Phaser.Display.Align.In.BottomCenter(this.footer,this,0,-15)},t}(Phaser.GameObjects.Container)),pD=function(e){function t(t,n,i,a){var s;return(s=e.call(this,t,n,i,a)||this).scene=void 0,s.fadeInAnimation=void 0,s.fadeOutAnimation=void 0,s.awesomeContainer=void 0,s.failedContainer=void 0,s.closed=!1,s.completed=!0,s.setBackground=function(){s.background.setTint(1315862),s.background.setAlpha(.65)},s.scene=t,s.setBackground(),s.createContainers(),s.createBottomLogo(),s.setDepth(Os.Ks.POPUP),Fn.Z.removeObject(s.background),s}(0,o.Z)(t,e);var n=t.prototype;return n.createContainers=function(){this.createAwesomeContainer(),this.createFailedContainer(),this.awesomeContainer.setVisible(this.completed),this.failedContainer.setVisible(!this.completed)},n.createAwesomeContainer=function(){this.awesomeContainer=new nD(this.scene),this.add(this.awesomeContainer)},n.createFailedContainer=function(){this.failedContainer=new dD(this.scene),this.add(this.failedContainer)},n.createBottomLogo=function(){if(!this.scene.game.world.isLandscape()){var e=new RE(this.scene);this.add(e),Phaser.Display.Align.In.BottomCenter(e,this)}},n.open=function(t){var n=this;e.prototype.open.call(this,t),this.closed=!1,this.updateData(),this.awesomeContainer.setVisible(this.completed),this.failedContainer.setVisible(!this.completed),this.awesomeContainer.setAlpha(this.completed?1:0),this.failedContainer.setAlpha(this.completed?0:1),this.runOpenAnimation(),this.scene.events.once("close-prev-screen",(function(){n.scene.screen.close(Os.o4.MISSION_COMPLETED_SCREEN)})),this.completed&&(this.add(this.scene.gameplay.confettiSmallFallDown),this.scene.sys.updateList.add(this.scene.gameplay.confettiSmallFallDown),this.scene.gameplay.confettiSmallFallDown.run(10,0,0))},n.close=function(){this.closed=!0,this.runCloseAnimation(),this.stopConfettiAnimation()},n.updateData=function(){var e,t=null==(e=this.data)?void 0:e.list,n=Rr.gameType;if(t){var i=t.description,a=(t.stats,t.completed),s=t.level;s&&(this.awesomeContainer.setLevel(s),this.failedContainer.updateInfo(s,i)),this.awesomeContainer.setGameType(n),this.failedContainer.setGameType(n),this.completed=null!=a&&a,this.scene.journey.setIsPlayingCurrentLevel(!1)}},n.runOpenAnimation=function(){var e=(0,r.Z)(l().mark((function e(){var t,n,i;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==(t=this.fadeInAnimation)||null==(n=t.tween)||!n.isPlaying()){e.next=2;break}return e.abrupt("return");case 2:this.scene.audio.playSound(Ls.Z.POPUP_SHOW),(i=[this.awesomeContainer,this.failedContainer]).forEach((function(e){e.hideContent()})),this.fadeInAnimation||(this.fadeInAnimation=new Mh.Z({targets:[this],onComplete:function(){var e=(0,r.Z)(l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h().all(De()(i).call(i,(function(e){return e.runEntranceAnimation()})));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()})),this.fadeInAnimation.play();case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.runCloseAnimation=function(){var t,n,i=this;null!=(t=this.fadeOutAnimation)&&null!=(n=t.tween)&&n.isPlaying()||(this.scene.audio.playSound(Ls.Z.POPUP_OFF),this.fadeOutAnimation||(this.fadeOutAnimation=new zm.Z({targets:[this],props:{alpha:0},onComplete:function(){e.prototype.close.call(i)}})),this.fadeOutAnimation.play())},n.stopConfettiAnimation=function(){this.completed&&this.scene.gameplay.confettiSmallFallDown.emitter.stop()},t}(GameCore.Screen),fD=pD,gD=Gn.Z.JOURNEY,mD=gD.KEY,vD=gD.FRAME,yD=function(e){function t(t){var n;return(n=e.call(this,t)||this).levelCompleted=void 0,n.description=void 0,n.createBackground(),n.createStats(),n}(0,o.Z)(t,e);var n=t.prototype;return n.createBackground=function(){var e=this.scene.add.image(0,0,mD,vD.AWESOME_SCREEN.LB_FRAME);e.setWorldSize(939/2.88,262/2.88),this.add(e),this.setSize(e.width,e.height)},n.setDescription=function(e){var t=e.key,n=e.interpolations,i=void 0===n?{}:n;this.description.setText(t),this.description.setTranslationParameters(i)},n.createStats=function(){this.levelCompleted=this.scene.make.bitmapText({font:Rc.Z.BOLD_SHADOW_BLUR.KEY,size:this.scene.fontSize(22),origin:{x:.5,y:.5}}),this.levelCompleted.setMaxSize(600,20),this.levelCompleted.setTranslationParameter("v",1),this.levelCompleted.setText("levelVComplete"),this.add(this.levelCompleted),Phaser.Display.Align.In.TopCenter(this.levelCompleted,this,0,-25),this.description=this.scene.make.bitmapText({font:Rc.Z.PRIMARY.KEY,size:this.scene.fontSize(16),text:"journeyResultDescription",origin:{x:.5,y:.5}}),this.description.setMaxSize(600,20),this.add(this.description),Phaser.Display.Align.In.TopCenter(this.description,this,0,-55)},n.hideContent=function(){[this.levelCompleted,this.description].forEach((function(e){return e.setAlpha(0)}))},n.runEntranceAnimationRows=function(){var e=(0,r.Z)(l().mark((function e(){var t,n,i=this;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[this.levelCompleted,this.description],200,n=De()(t).call(t,(function(e,t){return new(h())((function(n){i.scene.add.tween({targets:[e],duration:200,delay:200*t/2,ease:Phaser.Math.Easing.Sine.Out,props:{alpha:{from:0,to:1},y:{from:e.y+e.height/2,to:e.y}},onComplete:n})}))})),e.next=5,h().all(n);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.setLevel=function(e,t){void 0===t&&(t=!0),this.levelCompleted.setTranslationParameter("v",e),t?this.levelCompleted.setText("levelVComplete"):this.levelCompleted.setText("levelVFailed")},t}(Phaser.GameObjects.Container),TD=Gn.Z.JOURNEY,CD=TD.KEY,ED=TD.FRAME,AD=function(e){function t(t){var n;return(n=e.call(this,t)||this).leftIcon=void 0,n.rightIcon=void 0,n.title=void 0,n.setSize(375,27),n.createIcons(),n.createTitle(),n.align(),n.title.on("textChanged",(function(){n.align()})),n}(0,o.Z)(t,e);var n=t.prototype;return n.createIcons=function(){this.leftIcon=this.scene.add.image(0,0,CD,ED.AWESOME_SCREEN.RECTANGLE_TITLE),this.leftIcon.setWorldSize(44/2.88,15.625),this.rightIcon=this.scene.add.image(0,0,CD,ED.AWESOME_SCREEN.RECTANGLE_TITLE),this.rightIcon.setWorldSize(44/2.88,15.625),this.add([this.leftIcon,this.rightIcon])},n.createTitle=function(){this.title=this.scene.make.bitmapText({font:Rc.Z.BOLD_SHADOW_BLUR.KEY,size:this.scene.fontSize(19),text:"solitaireChallenge",origin:{x:.5,y:.5}}),this.title.setMaxSize(190,20),this.title.setTint(16449487,16449487,15913325,15913325),this.add(this.title)},n.align=function(){Phaser.Display.Align.To.RightCenter(this.rightIcon,this.title,5,-1),Phaser.Display.Align.To.LeftCenter(this.leftIcon,this.title,5,-1)},t}(Phaser.GameObjects.Container),SD=Gn.Z.GAMEPLAY_DEFAULT,bD=SD.KEY,ID=SD.FRAME,wD=function(e){function t(t,n,i){return e.call(this,t,n,i)||this}return(0,o.Z)(t,e),t.prototype.createContent=function(){var e=new Jl(this.scene,{iconTextPadding:5,text:"nextLevel",iconKey:bD,iconFrame:ID.IC_NEXT_LV,iconWidth:13.5,iconHeight:14});e.icon.setWorldSize(19,21),e.text.setMaxSize(200,20,!0);var t=this.scene.make.image({key:bD,frame:ID.BTN_NEW_GAME});t.setWorldSize(this.width,this.height),this.add([t,e])},t}(HR),PD=wD,kD=Gn.Z.JOURNEY,_D=kD.KEY,xD=kD.FRAME,OD=(vE.iD.FOOTER.HEIGHT,function(e){function t(t){var n;return(n=e.call(this,t)||this).awesomeImage=void 0,n.title=void 0,n.stats=void 0,n.nextLevelButton=void 0,n.goToMapButton=void 0,n.awesome=void 0,n.gameTypeRibbon=void 0,n.handleNextLevel=(0,r.Z)(l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.scene.journey.outOfMissions()){e.next=5;break}n.scene instanceof UM&&(n.scene.journey.setIsPlayingCurrentLevel(),n.scene.gameplay.startJourneyMode()),e.next=12;break;case 5:return n.scene.screen.open(Os.o4.OUT_OF_MISSIONS_SCREEN),e.next=8,Au(n.scene,2e3);case 8:if(n.scene.screen.close(Os.o4.OUT_OF_MISSIONS_SCREEN),!(n.scene instanceof UM)){e.next=12;break}return e.next=12,n.scene.handlePlaySingle();case 12:n.scene.screen.close(Os.o4.MISSION_COMPLETED_SCREEN);case 13:case"end":return e.stop()}}),e)}))),n.setSizeContainer(),n.createGameType(),n.createTitle(),n.createBody(),n.createNextLevelButton(),n.createGoToMapButton(),n.createDevButtons(),n.align(),t.add.existing((0,As.Z)(n)),n.setScale(jf(t)),n}(0,o.Z)(t,e);var n=t.prototype;return n.setLevel=function(e){this.stats.setLevel(e)},n.setGameType=function(e){this.gameTypeRibbon.setGameType(e)},n.setSizeContainer=function(){var e=(0,ul.t)(),t=this.scene.add.nineslice(0,0,Gn.Z.GAMEPLAY_DEFAULT.KEY,Gn.Z.GAMEPLAY_DEFAULT.FRAME.RESULT_SCREEN.POPUP,948/2.88*e,1249/2.88*e,0*e,0*e,100/2.88*e,300/2.88*e);t.setScale(1/e),this.add(t),this.setSize(t.displayWidth,t.displayHeight)},n.createGameType=function(){this.gameTypeRibbon=new bE(this.scene),this.add(this.gameTypeRibbon)},n.createTitle=function(){this.awesome=this.scene.add.container(),this.awesome.setSize(300,112),this.add(this.awesome);var e=this.scene.add.image(0,0,Gn.Z.GAMEPLAY_DEFAULT.KEY,Gn.Z.GAMEPLAY_DEFAULT.FRAME.VICTORY);e.setWorldSize(632/2.88,112);var t=this.scene.make.bitmapText({font:Rc.Z.BOLD_SHADOW_BLUR.KEY,size:this.scene.fontSize(17),text:"awesome",origin:{x:.5,y:.5}});t.setRadius(500),t.setMaxSize(300,30,!0),t.setGradientHorizontalTint([{at:0,color:16315097},{at:.5,color:16777215},{at:1,color:16315097}]),this.awesome.add([e,t]),Phaser.Display.Align.In.Center(t,e,0,15);var n=new AD(this.scene);this.title=n,this.add([n])},n.createBody=function(){this.stats=new yD(this.scene),this.add(this.stats)},n.createNextLevelButton=function(){this.nextLevelButton=new PD(this.scene,447/2.88,43.75),this.nextLevelButton.onClick=this.handleNextLevel,this.add(this.nextLevelButton)},n.createGoToMapButton=function(){var e=this;this.goToMapButton=new Ol.Z(this.scene,99.5,20),this.goToMapButton.onClick=(0,r.Z)(l().mark((function t(){return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.scene.screen.open(Os.o4.JOURNEY_SCREEN);case 1:case"end":return t.stop()}}),t)}))),this.goToMapButton.setName("GoToMap");var t=this.scene.add.image(0,0,_D,xD.AWESOME_SCREEN.BTN_GO_TO_MAP);t.setWorldSize(84.375,49/2.88);var n=this.scene.add.image(0,0,_D,xD.AWESOME_SCREEN.IC_GO_TO_MAP);n.setWorldSize(34/2.88,50/2.88),this.goToMapButton.add([n,t]),this.add([this.goToMapButton]),Phaser.Display.Align.In.BottomCenter(n,t,-55,0)},n.runEntranceAnimationButtons=function(){var e=(0,r.Z)(l().mark((function e(){var t,n,i=this;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.nextLevelButton.stopPulsate(),n=De()(t=[this.nextLevelButton,this.goToMapButton]).call(t,(function(e){return new(h())((function(t){i.scene.add.tween({targets:[e],alpha:1,duration:200,onComplete:function(){e.setDisabled(!1),t(),i.nextLevelButton.runPulsate()}})}))})),e.next=4,h().all(n);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.align=function(){Phaser.Display.Align.In.TopCenter(this.awesome,this,0,70),Phaser.Display.Align.In.BottomCenter(this.gameTypeRibbon,this.awesome,0,65),Phaser.Display.Align.In.BottomCenter(this.title,this.gameTypeRibbon,0,45),Phaser.Display.Align.In.BottomCenter(this.stats,this.title,0,100),Phaser.Display.Align.In.BottomCenter(this.nextLevelButton,this,0,-105),Phaser.Display.Align.In.BottomCenter(this.goToMapButton,this,8,-30)},n.createDevButtons=function(){GameCore.Utils.Valid.isDebugger()&&this.createCloseButton()},n.createCloseButton=function(){var e=this,t=new Ol.Z(this.scene,40,40),n=this.scene.add.image(0,0,Gn.Z.GAMEPLAY_DEFAULT.KEY,Gn.Z.GAMEPLAY_DEFAULT.FRAME.IC_BG_OFF);n.setWorldSize(40,40);var i=this.scene.make.bitmapText({font:Rc.Z.PRIMARY.KEY,size:this.scene.fontSize(10),text:"Close",origin:{x:.5,y:.5}});i.setCenterAlign(),t.add([n,i]),this.add(t),Phaser.Display.Align.In.BottomLeft(t,this,0,-200),t.onClick=function(){e.scene.screen.close(Os.o4.MISSION_COMPLETED_SCREEN)}},n.hideContent=function(){this.stats.hideContent(),this.nextLevelButton.setAlpha(0),this.goToMapButton.setAlpha(0)},n.runEntranceAnimationRows=function(){var e=(0,r.Z)(l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h().all([this.stats.runEntranceAnimationRows()]);case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.runEntranceAnimation=function(){var e=(0,r.Z)(l().mark((function e(){var t;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.runEntranceAnimationRows();case 2:return t=this.scene,e.next=5,t.gameplay.finishJourneyGame();case 5:return e.next=7,this.runEntranceAnimationButtons();case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),t}(Phaser.GameObjects.Container)),LD=OD,RD=Gn.Z.GAMEPLAY_DEFAULT,DD=RD.KEY,BD=RD.FRAME,MD=function(e){function t(t,n,i){return e.call(this,t,n,i)||this}return(0,o.Z)(t,e),t.prototype.createContent=function(){var e=new Jl(this.scene,{iconTextPadding:5,text:"replay",iconKey:DD,iconFrame:BD.TOURNAMENT.IC_REPLAY,iconWidth:16,iconHeight:17});e.text.setMaxSize(200,20),e.text.setCenterAlign();var t=this.scene.make.image({key:DD,frame:BD.TOURNAMENT.BUTTON_REPLAY});t.setWorldSize(this.width,this.height),this.add([t,e]),Phaser.Display.Align.In.Center(e,this)},t}(iD),ND=function(e){function t(t){var n;return(n=e.call(this,t)||this).buttons=[],n.replayButton=void 0,n.shareButton=void 0,n.setSizeContainer(),n.createReplayButton(),n}(0,o.Z)(t,e);var n=t.prototype;return n.setSizeContainer=function(){this.setSize(375,48)},n.createReplayButton=function(){var e=new MD(this.scene,311/2.88,125/2.88);this.add(e),this.buttons.push(e),this.replayButton=e},n.hideContent=function(){this.buttons.forEach((function(e){e.setAlpha(0)}))},n.runEntranceAnimationButtons=function(){var e=(0,r.Z)(l().mark((function e(){var t,n,i=this;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.replayButton.stopPulsate(),n=De()(t=this.buttons).call(t,(function(e){return new(h())((function(t){i.scene.add.tween({targets:[e],alpha:1,duration:200,onComplete:function(){e.setDisabled(!1),t(),i.replayButton.runPulsate()}})}))})),e.next=4,h().all(n);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),t}(Phaser.GameObjects.Container),GD=Gn.Z.GAMEPLAY_DEFAULT,FD=GD.KEY,ZD=GD.FRAME,UD=(vE.iD.FOOTER.HEIGHT,function(e){function t(t){var n;return(n=e.call(this,t)||this).stats=void 0,n.footer=void 0,n.title=void 0,n.gameTypeRibbon=void 0,n.setSizeContainer(),n.createTitle(),n.createGameType(),n.createStats(),n.createFooter(),n.createDevButtons(),n.align(),t.add.existing((0,As.Z)(n)),n.setScale(jf(t)),n}(0,o.Z)(t,e);var n=t.prototype;return n.setGameType=function(e){this.gameTypeRibbon.setGameType(e)},n.updateInfo=function(e,t){this.stats.setLevel(e,!1),this.stats.setDescription(t)},n.setSizeContainer=function(){var e=(0,ul.t)(),t=this.scene.add.nineslice(0,0,Gn.Z.GAMEPLAY_DEFAULT.KEY,Gn.Z.GAMEPLAY_DEFAULT.FRAME.RESULT_SCREEN.POPUP,948/2.88*e,1249/2.88*e,0*e,0*e,100/2.88*e,300/2.88*e);t.setScale(1/e),this.add(t),this.setSize(t.displayWidth,t.displayHeight)},n.createTitle=function(){var e=this.scene.add.container(0,0);this.add(e),this.title=e;var t=this.scene.add.image(0,0,FD,ZD.SPADE);t.setWorldSize(50/2.88,56/2.88);var n=this.scene.make.bitmapText({font:Rc.Z.BOLD_SHADOW_BLUR.KEY,size:this.scene.fontSize(19),text:"missionFailed",origin:{x:.5,y:.5}});n.setMaxSize(200,20);var i=this.scene.add.image(0,0,FD,ZD.HEART);i.setWorldSize(48/2.88,18.75),e.setSize(375,n.height),n.setTint(16777215,16777215,12833246,12833246),e.add([t,n,i]),Phaser.Display.Align.To.LeftCenter(t,n,8,-4),Phaser.Display.Align.To.RightCenter(i,n,8,-4)},n.createGameType=function(){this.gameTypeRibbon=new bE(this.scene),this.add(this.gameTypeRibbon)},n.createStats=function(){this.stats=new yD(this.scene),this.add(this.stats)},n.createFooter=function(){var e=this;this.footer=new ND(this.scene),this.footer.replayButton.onClick=(0,r.Z)(l().mark((function t(){return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.scene instanceof UM&&(e.scene.journey.setIsPlayingCurrentLevel(),e.scene.gameplay.replayGame()),e.scene.screen.close(Os.o4.MISSION_COMPLETED_SCREEN);case 2:case"end":return t.stop()}}),t)}))),this.add(this.footer)},n.createDevButtons=function(){GameCore.Utils.Valid.isDebugger()&&this.createCloseButton()},n.createCloseButton=function(){var e=this,t=new Ol.Z(this.scene,40,40),n=this.scene.add.image(0,0,FD,ZD.IC_BG_OFF);n.setWorldSize(40,40);var i=this.scene.make.bitmapText({font:Rc.Z.PRIMARY.KEY,size:this.scene.fontSize(10),text:"Close",origin:{x:.5,y:.5}});i.setCenterAlign(),t.add([n,i]),this.add(t),Phaser.Display.Align.In.BottomLeft(t,this,0,-200),t.onClick=function(){e.scene.screen.close(Os.o4.MISSION_COMPLETED_SCREEN)}},n.hideContent=function(){this.stats.hideContent(),this.footer.hideContent()},n.runEntranceAnimationRows=function(){var e=(0,r.Z)(l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h().all([this.stats.runEntranceAnimationRows()]);case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.runEntranceAnimation=function(){var e=(0,r.Z)(l().mark((function e(){var t;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.runEntranceAnimationRows();case 2:return t=this.scene,e.next=5,t.gameplay.finishJourneyGame();case 5:return e.next=7,this.footer.runEntranceAnimationButtons();case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.align=function(){Phaser.Display.Align.In.TopCenter(this.title,this,0,-30),Phaser.Display.Align.In.BottomCenter(this.gameTypeRibbon,this.title,0,75),Phaser.Display.Align.In.Center(this.stats,this,0,20),Phaser.Display.Align.In.BottomCenter(this.footer,this,0,-15)},t}(Phaser.GameObjects.Container)),zD=function(e){function t(t,n,i,a){var s;return(s=e.call(this,t,n,i,a)||this).scene=void 0,s.fadeInAnimation=void 0,s.fadeOutAnimation=void 0,s.awesomeContainer=void 0,s.failedContainer=void 0,s.closed=!1,s.completed=!0,s.setBackground=function(){s.background.setTint(1315862),s.background.setAlpha(.65)},s.scene=t,s.setBackground(),s.createContainers(),s.setDepth(Os.Ks.POPUP),s}(0,o.Z)(t,e);var n=t.prototype;return n.createContainers=function(){this.createAwesomeContainer(),this.createFailedContainer(),this.awesomeContainer.setVisible(this.completed),this.failedContainer.setVisible(!this.completed)},n.createAwesomeContainer=function(){this.awesomeContainer=new LD(this.scene),this.add(this.awesomeContainer)},n.createFailedContainer=function(){this.failedContainer=new UD(this.scene),this.add(this.failedContainer)},n.createBottomLogo=function(){if(!this.scene.game.world.isLandscape()){var e=new RE(this.scene);this.add(e),Phaser.Display.Align.In.BottomCenter(e,this)}},n.open=function(t){e.prototype.open.call(this,t),this.closed=!1,this.updateData(),this.awesomeContainer.setVisible(this.completed),this.failedContainer.setVisible(!this.completed),this.awesomeContainer.setAlpha(this.completed?1:0),this.failedContainer.setAlpha(this.completed?0:1),this.runOpenAnimation(),this.completed&&(this.add(this.scene.gameplay.confettiSmallFallDown),this.scene.sys.updateList.add(this.scene.gameplay.confettiSmallFallDown),this.scene.gameplay.confettiSmallFallDown.run(10,0,0))},n.close=function(){this.closed=!0,this.runCloseAnimation(),this.stopConfettiAnimation()},n.updateData=function(){var e,t=null==(e=this.data)?void 0:e.list,n=Rr.gameType;if(t){var i=t.description,a=(t.stats,t.completed),s=t.level;s&&(this.awesomeContainer.setLevel(s),this.failedContainer.updateInfo(s,i)),this.awesomeContainer.setGameType(n),this.failedContainer.setGameType(n),this.completed=null!=a&&a,this.scene.journey.setIsPlayingCurrentLevel(!1)}},n.runOpenAnimation=function(){var e=(0,r.Z)(l().mark((function e(){var t,n,i;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==(t=this.fadeInAnimation)||null==(n=t.tween)||!n.isPlaying()){e.next=2;break}return e.abrupt("return");case 2:this.scene.audio.playSound(Ls.Z.POPUP_SHOW),(i=[this.awesomeContainer,this.failedContainer]).forEach((function(e){e.hideContent()})),this.fadeInAnimation||(this.fadeInAnimation=new Mh.Z({targets:[this],onComplete:function(){var e=(0,r.Z)(l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h().all(De()(i).call(i,(function(e){return e.runEntranceAnimation()})));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()})),this.fadeInAnimation.play();case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.runCloseAnimation=function(){var t,n,i=this;null!=(t=this.fadeOutAnimation)&&null!=(n=t.tween)&&n.isPlaying()||(this.scene.audio.playSound(Ls.Z.POPUP_OFF),this.fadeOutAnimation||(this.fadeOutAnimation=new zm.Z({targets:[this],props:{alpha:0},onComplete:function(){e.prototype.close.call(i)}})),this.fadeOutAnimation.play())},n.stopConfettiAnimation=function(){this.completed&&this.scene.gameplay.confettiSmallFallDown.emitter.stop()},t}(GameCore.Screen),HD=zD,WD=GameCore.world.isLandscape()?HD:fD,YD=Gn.Z.GAMEPLAY_DEFAULT,KD=YD.KEY,VD=YD.FRAME,jD=function(e){function t(t){var n;return(n=e.call(this,t)||this).background=void 0,n.outOfMissionsLetterBitmapTexts=[],n.isPlayingAnimation=!1,n.setSize(300,300),n.createBackground(),n.createOutOfMissionsLetterBitmapTexts(),n.alignComponents(),n.createDevButtons(),n}(0,o.Z)(t,e);var n=t.prototype;return n.createBackground=function(){this.background=new np(this.scene,0,0,this.width,this.height,20,16579837,0),this.add(this.background)},n.createOutOfMissionsLetterBitmapTexts=function(){this.outOfMissionsLetterBitmapTexts=this.createBitmapTextsFromString("YOU WIN THE TROPHY!"),this.add(this.outOfMissionsLetterBitmapTexts)},n.createBitmapTextsFromString=function(e){var t,n=this;return De()(t=e.split("")).call(t,(function(e){return n.scene.make.bitmapText({font:Rc.Z.BOLD_SHADOW_BLUR.KEY,size:n.scene.fontSize(30),origin:{x:.5,y:.5},text:e})}))},n.alignComponents=function(){var e=this;this.outOfMissionsLetterBitmapTexts.forEach((function(t,n){var i=-(e.outOfMissionsLetterBitmapTexts.length-1)/2*19.5+19.5*n;t.setX(i)}))},n.createDevButtons=function(){GameCore.Utils.Valid.isDebugger()&&this.createCloseButton()},n.createCloseButton=function(){var e=this,t=new Ol.Z(this.scene,40,40),n=this.scene.add.image(0,0,KD,VD.IC_BG_OFF);n.setWorldSize(40,40);var i=this.scene.make.bitmapText({font:Rc.Z.PRIMARY.KEY,size:this.scene.fontSize(10),text:"X",origin:{x:.5,y:.5}});i.setCenterAlign(),t.add([n,i]),Phaser.Display.Align.To.TopRight(t,this),t.onClick=function(){e.isPlayingAnimation||e.scene.screen.close(Os.o4.OUT_OF_MISSIONS_SCREEN)},this.add(t)},n.hideContent=function(){this.outOfMissionsLetterBitmapTexts.forEach((function(e){e.setAlpha(0),e.setAngle(10)}))},n.runEntranceAnimationText=function(){var e=(0,r.Z)(l().mark((function e(){var t,n,i=this;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return 100,t=this.outOfMissionsLetterBitmapTexts,n=De()(t).call(t,(function(e,t){return new(h())((function(n){i.scene.add.tween({targets:e,duration:100,delay:100*t/2,ease:Phaser.Math.Easing.Cubic.Out,props:{alpha:1,angle:0,scale:{from:.6,to:1,ease:Phaser.Math.Easing.Elastic.Out,easeParams:[.1,.45],duration:1e3}},onComplete:n})}))})),e.next=5,h().all(n);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.runEntranceAnimation=function(){var e=(0,r.Z)(l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isPlayingAnimation){e.next=2;break}return e.abrupt("return");case 2:return this.isPlayingAnimation=!0,e.next=5,this.runEntranceAnimationText();case 5:this.isPlayingAnimation=!1;case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),t}(Phaser.GameObjects.Container),JD=function(e){function t(t,n,i,a){var s;return(s=e.call(this,t,n,i,a)||this).fadeInAnimation=void 0,s.fadeOutAnimation=void 0,s.container=void 0,s.setDepth(Os.Ks.POPUP),s.container=new jD(t),s.add(s.container),s.background.setTint(1315862),s.background.setAlpha(.65),s}(0,o.Z)(t,e);var n=t.prototype;return n.open=function(t){e.prototype.open.call(this,t),this.background.setAlpha(.8),this.container.setInteractive(),this.runOpenAnimation()},n.close=function(){this.runCloseAnimation()},n.runOpenAnimation=function(){var e=(0,r.Z)(l().mark((function e(){var t,n,i=this;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==(t=this.fadeInAnimation)||null==(n=t.tween)||!n.isPlaying()){e.next=2;break}return e.abrupt("return");case 2:this.scene.audio.playSound(Ls.Z.POPUP_SHOW),this.container.hideContent(),this.fadeInAnimation||(this.fadeInAnimation=new Mh.Z({targets:[this],onComplete:function(){var e=(0,r.Z)(l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.container.runEntranceAnimation();case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()})),this.fadeInAnimation.play();case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.runCloseAnimation=function(){var t,n,i=this;null!=(t=this.fadeOutAnimation)&&null!=(n=t.tween)&&n.isPlaying()||(this.scene.audio.playSound(Ls.Z.POPUP_OFF),this.fadeOutAnimation||(this.fadeOutAnimation=new zm.Z({targets:[this],props:{alpha:0},onComplete:function(){e.prototype.close.call(i)}})),this.fadeOutAnimation.play())},t}(GameCore.Screen),XD=Gn.Z.GAMEPLAY_DEFAULT,qD=XD.KEY,QD=XD.FRAME,$D=function(e){function t(t){var n;return(n=e.call(this,t)||this).youAvatar=void 0,n.opponentAvatar=void 0,n._versusText=void 0,n.setSize(375,100),n.createAvatars(),n.createVersusText(),n.alignComponents(),n}(0,o.Z)(t,e);var n=t.prototype;return n.createAvatars=function(){this.youAvatar=new nk(this.scene),this.opponentAvatar=new nk(this.scene),this.youAvatar.setWinner(!1),this.opponentAvatar.setWinner(!1,!1),this.add([this.youAvatar,this.opponentAvatar])},n.createVersusText=function(){this._versusText=this.scene.add.image(0,0,qD,QD.IC_VS_BIG),this._versusText.setWorldSize(70.5,23.5),this.add(this._versusText)},n.alignComponents=function(){Phaser.Display.Align.In.Center(this._versusText,this),Phaser.Display.Align.In.Center(this.youAvatar,this._versusText,95),Phaser.Display.Align.In.Center(this.opponentAvatar,this._versusText,-95)},t}(Phaser.GameObjects.Container),eB=$D,tB=function(e){function t(t,n,i,a){var s;return(s=e.call(this,t,n,i,a)||this).fadeInAnimation=void 0,s.fadeOutAnimation=void 0,s.container=void 0,s.setDepth(Os.Ks.POPUP),s.background.kill(),s.createContainer(),s}(0,o.Z)(t,e);var n=t.prototype;return n.open=function(t){e.prototype.open.call(this,t),this.runOpenAnimation(),this.updateInfo()},n.updateInfo=function(){var e=this.container,t=e.youAvatar,n=e.opponentAvatar,i=this.scene.player.getPlayer(),a=i.playerId,s=i.photo,r=i.name;t.avatar.loadPhoto(a,s,70),t.username.setText(r);var o=this.scene.storage.getState(),c=so(o),h=c.playerId,u=c.photo,l=c.name;n.avatar.loadPhoto(h,u,70),h==Va.playerId?(n.username.setText("yourFriend"),n.username.setIgnoreLanguage(!1)):(n.username.setText(l),n.username.setIgnoreLanguage(!0))},n.close=function(){this.runCloseAnimation()},n.createContainer=function(){this.container=new eB(this.scene),this.add(this.container)},n.runOpenAnimation=function(){this.scene.audio.playSound(Ls.Z.POPUP_SHOW),this.fadeInAnimation||(this.fadeInAnimation=new Mh.Z({targets:[this],ease:Phaser.Math.Easing.Sine.InOut})),this.fadeInAnimation.play()},n.runCloseAnimation=function(){var t,n,i=this;null!=(t=this.fadeOutAnimation)&&null!=(n=t.tween)&&n.isPlaying()||(this.scene.audio.playSound(Ls.Z.POPUP_OFF),this.fadeOutAnimation||(this.fadeOutAnimation=new zm.Z({targets:[this],props:{alpha:0},onComplete:function(){e.prototype.close.call(i)}})),this.fadeOutAnimation.play())},t}(GameCore.Screen),nB=tB,iB=n(654),aB=Gn.Z.LANGUAGES,sB=Gn.Z.GAMEPLAY_DEFAULT,rB=function(e){function t(t,n){var i;(i=e.call(this,t,350,54)||this).languageCode=void 0,i.flag=void 0,i.languageName=void 0,i.iconUncheck=void 0,i.iconCheck=void 0,i.setName("Language-"+n),i.languageCode=n;var a=1/t.world.getPixelRatio(),s=i.scene.add.image(0,0,aB.KEY,"name/"+n);s.setScale(a),s.setWorldSize(s.displayWidth,s.displayHeight);var o=i.scene.add.image(0,0,aB.KEY,"flags/"+n);o.setWorldSize(101/2.88,69/2.88);var c=i.scene.add.image(0,0,sB.KEY,"bg_check");c.setWorldSize(75/2.88,75/2.88);var h=i.scene.add.image(0,0,sB.KEY,"ico_checked");return h.setWorldSize(94/2.88,76/2.88),Phaser.Display.Align.In.LeftCenter(o,(0,As.Z)(i)),Phaser.Display.Align.To.RightCenter(s,o,12),Phaser.Display.Align.In.RightCenter(c,(0,As.Z)(i)),Phaser.Display.Align.In.Center(h,c,0,-3),i.flag=o,i.iconCheck=h,i.iconUncheck=c,i.languageName=s,i.add([o,s,c,h]),i.setUncheck(),i.scene.lang.language===i.languageCode&&i.setCheck(),i.onClick=(0,r.Z)(l().mark((function e(){var t,n;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=i.scene.player,t.getPlayerSettings().language!=i.languageCode){e.next=4;break}return e.abrupt("return");case 4:return(n=i.scene.game.globalScene).screen.open(Os.o4.NOTIFY_SCREEN,{message:"loading",loading:!0}),e.next=8,i.scene.lang.changeLanguage(i.languageCode);case 8:n.screen.close(Os.o4.NOTIFY_SCREEN),i.scene.player.setSetting("language",i.languageCode);case 10:case"end":return e.stop()}}),e)}))),i.listenEventLanguageChanged(),i}(0,o.Z)(t,e);var n=t.prototype;return n.setCheck=function(){this.iconCheck.revive()},n.setUncheck=function(){this.iconCheck.kill()},n.listenEventLanguageChanged=function(){var e=this;this.scene.i18n.on("languageChanged",(function(){e.scene.lang.language===e.languageCode?e.setCheck():e.setUncheck()}))},t}(Ol.Z),oB=rB,cB=Gn.Z.GAMEPLAY_DEFAULT,hB=cB.KEY,uB=cB.FRAME,lB=function(e){function t(t){var n;return(n=e.call(this,t)||this).bg=void 0,n.scroller=void 0,n.closeButton=void 0,n.createBackground(),n.createScroller(),n.createHeader(),n.createCloseButton(),n.createMainButtons(),n.createBackButton(),n.createBottomLogo(),t.add.existing((0,As.Z)(n)),n}(0,o.Z)(t,e);var n=t.prototype;return n.createBackground=function(){var e=this.scene.world.getWorldSize(),t=e.width,n=e.height,i=this.scene.add.image(0,0,hB,uB.BLANK);i.setWorldSize(t,n),i.setTint(1665080),this.add(i),this.bg=i,this.setSize(i.width,i.height)},n.createHeader=function(){var e=new Lf(this.scene,{width:this.bg.width,height:64,key:hB,frame:uB.BLANK,symmetricType:Of.HORIZONTAL});e.setInteractive();var t=this.scene.make.bitmapText({font:Rc.Z.BOLD_SHADOW_BLUR.KEY,size:this.scene.fontSize(26),text:"LANGUAGES",origin:{x:.5,y:.5}});t.setMaxSize(220,40),t.setTint(16449487,16449487,15913325,15913325),this.add([e,t]),Phaser.Display.Align.In.TopCenter(e,this),Phaser.Display.Align.In.Center(t,e)},n.createCloseButton=function(){var e=this;this.closeButton=new pO(this.scene),this.add(this.closeButton),Phaser.Display.Align.In.TopLeft(this.closeButton,this,-16,-16),this.closeButton.onClick=function(){e.scene.screen.close(Os.o4.LANGUAGES_SCREEN)}},n.createScroller=function(){var e=this.scene.ads.getBannerHeight();this.scroller=new fI.Z(this.scene,{width:this.bg.width,height:this.bg.height-64-95-e}),Phaser.Display.Align.In.TopCenter(this.scroller,this,0,-64),this.add(this.scroller)},n.createMainButtons=function(){for(var e=[],t=this.scene.lang.supportedLanguages,n=0;n<t.length;n++){var i=this.createLanguageButton(t[n]);e.push(i)}for(var a=[],s=e[0].height/2-this.scroller.height/2,r=0;r<e.length;r++){if(e[r].setPosition(0,s),r<e.length-1){var o=this.scene.add.image(0,s+25,hB,uB.BLANK);o.setWorldSize(this.bg.width,2),o.setTint(1333293),o.setAlpha(0,0,1,1),a.push(o)}e[r+1]&&(s+=e[r].height)}this.scroller.addItems(e),this.scroller.addItems(a),this.scroller.setEnable(!0)},n.createLanguageButton=function(e){return new oB(this.scene,e)},n.createBackButton=function(){var e=this,t=new Lf(this.scene,{width:this.bg.width,height:95,key:hB,frame:uB.BG_SETTINGS_BOTTOM,symmetricType:Of.HORIZONTAL}),n=new ny(this.scene);n.onClick=function(){e.scene.screen.close(Os.o4.LANGUAGES_SCREEN)},this.add([t,n]);var i=this.scene.ads.getBannerHeight();Phaser.Display.Align.In.BottomCenter(t,this,0,-i),Phaser.Display.Align.In.TopCenter(n,t,0,-21)},n.createBottomLogo=function(){var e=new RE(this.scene);this.add(e),Phaser.Display.Align.In.BottomCenter(e,this)},n.resetScroller=function(){this.scroller.gotoTop()},t}(Phaser.GameObjects.Container),dB=lB,pB=function(e){function t(t,n,i,a){var s;return(s=e.call(this,t,n,i,a)||this).slideInAnimation=void 0,s.slideOutAnimation=void 0,s.fadeInAnimation=void 0,s.fadeOutAnimation=void 0,s.settingsContainer=void 0,s.setDepth(Os.Ks.POPUP),s.settingsContainer=new dB(t),s.add(s.settingsContainer),s.background.setTint(1315862),s.background.setAlpha(.5),s}(0,o.Z)(t,e);var n=t.prototype;return n.open=function(){e.prototype.open.call(this),this.runOpenAnimation()},n.close=function(){this.runCloseAnimation()},n.runOpenAnimation=function(){this.scene.audio.playSound(Ls.Z.POPUP_SHOW),this.slideInAnimation||(this.slideInAnimation=new mc.Z({targets:[this.settingsContainer],props:{y:{from:this.height/2,to:this.height/2-this.settingsContainer.height/2,ease:Phaser.Math.Easing.Sine.Out}},duration:300})),this.fadeInAnimation||(this.fadeInAnimation=new Mh.Z({targets:[this],duration:300})),this.slideInAnimation.play(),this.fadeInAnimation.play()},n.runCloseAnimation=function(){var t=this;this.scene.audio.playSound(Ls.Z.POPUP_OFF),this.slideOutAnimation||(this.slideOutAnimation=new mc.Z({targets:[this.settingsContainer],props:{y:{from:this.height/2-this.settingsContainer.height/2,to:this.height/2,ease:Phaser.Math.Easing.Sine.Out}},duration:300})),this.fadeOutAnimation||(this.fadeOutAnimation=new zm.Z({targets:[this],props:{alpha:0},duration:300,onComplete:function(){t.settingsContainer.resetScroller(),t.setAlpha(1),e.prototype.close.call(t)}})),this.slideOutAnimation.play(),this.fadeOutAnimation.play()},t}(GameCore.Screen),fB=pB,gB=function(e){function t(t,n){var i;return(i=e.call(this,t)||this).config=void 0,i.setSize(n.width,n.height),i.config=n,i.createImage(),i.scene.add.existing((0,As.Z)(i)),i}return(0,o.Z)(t,e),t.prototype.createImage=function(){var e=this.config,t=e.key,n=e.frame,i=e.width,a=e.height,s=this.scene.add.image(0,0,t,n);s.setOrigin(1,1),s.setWorldSize(i/2,a/2);var r=this.scene.add.image(0,0,t,n);r.setOrigin(0,1).setFlipX(!0),r.setWorldSize(i/2,a/2);var o=this.scene.add.image(0,0,t,n);o.setOrigin(1,0).setFlipY(!0),o.setWorldSize(i/2,a/2);var c=this.scene.add.image(0,0,t,n);c.setOrigin(0,0).setFlip(!0,!0),c.setWorldSize(i/2,a/2),this.add([s,r,o,c])},t}(Phaser.GameObjects.Container),mB=15,vB=Gn.Z.LANGUAGES,yB=Gn.Z.GAMEPLAY_DEFAULT_LANDSCAPE,TB=function(e){function t(t,n){var i;(i=e.call(this,t,210,33)||this).languageCode=void 0,i.flag=void 0,i.languageName=void 0,i.iconUncheck=void 0,i.iconCheck=void 0,i.setName("Language-"+n),i.languageCode=n;var a=1/t.world.getPixelRatio(),s=i.scene.add.image(0,0,vB.KEY,"name/"+n);s.setScale(.65*a),s.setWorldSize(s.displayWidth,s.displayHeight);var o=i.scene.add.image(0,0,vB.KEY,"flags/"+n);o.setWorldSize(25.25,17.25);var c=i.scene.add.image(0,0,yB.KEY,"bg_check");c.setWorldSize(16.5,16.5);var h=i.scene.add.image(0,0,yB.KEY,"ico_checked");return h.setWorldSize(20,16.5),Phaser.Display.Align.In.LeftCenter(o,(0,As.Z)(i)),Phaser.Display.Align.To.RightCenter(s,o,10),Phaser.Display.Align.In.RightCenter(c,(0,As.Z)(i)),Phaser.Display.Align.In.Center(h,c,0,-3),i.flag=o,i.iconCheck=h,i.iconUncheck=c,i.languageName=s,i.add([o,s,c,h]),i.setUncheck(),i.scene.lang.language===i.languageCode&&i.setCheck(),i.onClick=(0,r.Z)(l().mark((function e(){var t,n;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=i.scene.player,t.getPlayerSettings().language!=i.languageCode){e.next=4;break}return e.abrupt("return");case 4:return(n=i.scene.game.globalScene).screen.open(Os.o4.NOTIFY_SCREEN,{message:"loading",loading:!0}),e.next=8,i.scene.lang.changeLanguage(i.languageCode);case 8:n.screen.close(Os.o4.NOTIFY_SCREEN),i.scene.player.setSetting("language",i.languageCode);case 10:case"end":return e.stop()}}),e)}))),i.listenEventLanguageChanged(),i}(0,o.Z)(t,e);var n=t.prototype;return n.setCheck=function(){this.iconCheck.revive()},n.setUncheck=function(){this.iconCheck.kill()},n.listenEventLanguageChanged=function(){var e=this;this.scene.i18n.on("languageChanged",(function(){e.scene.lang.language===e.languageCode?e.setCheck():e.setUncheck()}))},t}(Ol.Z),CB=TB,EB=Gn.Z.GAMEPLAY_DEFAULT_LANDSCAPE,AB=EB.KEY,SB=EB.FRAME,bB=232,IB=33,wB={WIDTH:234,HEIGHT:37},PB={WIDTH:234,HEIGHT:46.5},kB=function(e){function t(t){var n;return(n=e.call(this,t)||this).scroller=void 0,n.closeButton=void 0,n.createBackground(),n.createScroller(),n.createHeader(),n.createCloseButton(),n.createMainButtons(),n.createBackButton(),n.y=n.calculateY(),t.add.existing((0,As.Z)(n)),n}(0,o.Z)(t,e);var n=t.prototype;return n.createBackground=function(){var e=new gB(this.scene,{width:239,height:388,key:AB,frame:SB.BG_SETTINGS});this.add(e),this.setSize(e.width,e.height)},n.createHeader=function(){var e=new Lf(this.scene,{width:wB.WIDTH,height:wB.HEIGHT,key:AB,frame:SB.BG_SETTINGS_TOP,symmetricType:Of.HORIZONTAL});e.setInteractive();var t=this.scene.make.bitmapText({font:Rc.Z.BOLD_SHADOW_BLUR.KEY,size:this.scene.fontSize(15),text:"LANGUAGES",origin:{x:.5,y:.5}});t.setMaxSize(150,25),t.setTint(16449487,16449487,15913325,15913325),this.add([e,t]),Phaser.Display.Align.In.TopCenter(e,this,0,-1.5),Phaser.Display.Align.In.Center(t,e)},n.createScroller=function(){this.scroller=new fI.Z(this.scene,{width:this.width,height:this.height-wB.HEIGHT-PB.HEIGHT}),Phaser.Display.Align.In.TopCenter(this.scroller,this,0,-wB.HEIGHT),this.add(this.scroller)},n.createMainButtons=function(){for(var e=[],t=this.scene.lang.supportedLanguages,n=0;n<t.length;n++){var i=this.createLanguageButton(t[n]);e.push(i)}for(var a=[],s=IB/2-this.scroller.height/2,r=0;r<e.length;r++){if(e[r].setPosition(0,s),r<e.length-1){var o=IB/2,c=this.scene.add.image(0,s+o,AB,SB.BLANK);c.setWorldSize(bB,2),c.setTint(1333293),c.setAlpha(0,0,1,1),a.push(c)}e[r+1]&&(s+=e[r].height)}this.scroller.addItems(e),this.scroller.addItems(a),this.scroller.setEnable(!0)},n.createLanguageButton=function(e){return new CB(this.scene,e)},n.createBackButton=function(){var e=this,t=new Lf(this.scene,{width:PB.WIDTH,height:PB.HEIGHT,key:AB,frame:SB.BG_SETTINGS_BOTTOM,symmetricType:Of.HORIZONTAL}),n=new jy(this.scene);n.onClick=function(){e.scene.screen.close(Os.o4.LANGUAGES_SCREEN)},this.add([t,n]),Phaser.Display.Align.In.BottomCenter(t,this,0,-1),Phaser.Display.Align.In.Center(n,t,0,2)},n.createCloseButton=function(){var e=this;this.closeButton=new Qy(this.scene),this.add(this.closeButton),Phaser.Display.Align.In.TopRight(this.closeButton,this,-6.5,-11.5),this.closeButton.onClick=function(){e.scene.screen.close(Os.o4.LANGUAGES_SCREEN)}},n.resetScroller=function(){this.scroller.gotoTop()},n.calculateY=function(){var e=this.scene.gameZone.height,t=this.scene.footer;return t.y-t.height/2-e/2-this.height/2-mB},t}(Phaser.GameObjects.Container),_B=kB,xB=function(e){function t(t,n,i,a){var s;return(s=e.call(this,t,n,i,a)||this).fadeInAnimation=void 0,s.fadeOutAnimation=void 0,s.LanguagesContainer=void 0,s.setDepth(Os.Ks.POPUP),s.LanguagesContainer=new _B(t),s.add(s.LanguagesContainer),s.background.setTint(1315862),s.background.setAlpha(.5),s}(0,o.Z)(t,e);var n=t.prototype;return n.open=function(){e.prototype.open.call(this),this.runOpenAnimation()},n.close=function(){this.runCloseAnimation()},n.runOpenAnimation=function(){this.scene.audio.playSound(Ls.Z.POPUP_SHOW),this.fadeInAnimation||(this.fadeInAnimation=new Mh.Z({targets:[this],duration:300})),this.fadeInAnimation.play()},n.runCloseAnimation=function(){var t=this;this.scene.audio.playSound(Ls.Z.POPUP_OFF),this.fadeOutAnimation||(this.fadeOutAnimation=new zm.Z({targets:[this],props:{alpha:0},duration:300,onComplete:function(){t.LanguagesContainer.resetScroller(),t.setAlpha(1),e.prototype.close.call(t)}})),this.fadeOutAnimation.play()},t}(GameCore.Screen),OB=xB,LB=GameCore.world.isLandscape()?OB:fB,RB="freecell/level",DB=function(){function e(e){this.scene=void 0,this.scene=e,this.loadLevels()}var t=e.prototype;return t.loadLevels=function(){for(var e=1;e<=5;e++){var t=""+RB+e;this.scene.cache.text.exists(t)||this.scene.load.text(t,"assets/levels/"+t+".txt")}this.scene.load.start()},t.isLevelLoaded=function(){var e=this.getKey();return!!this.scene.cache.text.get(e)&&!!this.scene.cache.text.get(e)},t.getKey=function(){var e=this.scene.gameStats.getWins(is.Z.FREE_CELL),t=this.getLevelByWins(e);return""+RB+t},t.getLevelByWins=function(e){return e<10?1:e<20?2:e<60?3:e<140?4:5},t.randomLevel=function(){var e=this.scene.gameStats.getWins(is.Z.FREE_CELL),t=this.getLevelByWins(e);return Phaser.Math.RND.between(1,t)},t.randomSeed=function(e){var t=this.scene.gameStats.getWins(is.Z.FREE_CELL),n=this.getLevelByWins(t),i=Phaser.Math.RND.between(1,n),a=""+RB+i,s=this.scene.cache.text.get(a);if(!s)throw Error("Level data \u0111\xe2u r\u1ed3i b\u1ea1n \xeai!!!");var r=Phaser.Math.RND.pick(s.split("\n")),o=String(hp(r)),c=this.scene.gameplay.boardGame;return this.isStandardSeed(o)&&!c.isStandardSeedValid(o)?this.randomSeed(e):r},t.isStandardSeed=function(e){return e.length<=10},t.getRandomBeginnerSeed=function(){var e=""+RB+1,t=this.scene.cache.text.get(e);if(!t)throw Error("Level data \u0111\xe2u r\u1ed3i b\u1ea1n \xeai!!!");var n=Phaser.Math.RND.pick(t.split("\n")),i=String(hp(n)),a=this.scene.gameplay.boardGame;return this.isStandardSeed(i)&&!a.isStandardSeedValid(i)?this.getRandomBeginnerSeed():n},t.getAllSeeds=function(e){var t,n=""+RB+e,i=this.scene.cache.text.get(n);return De()(t=i.split("\n")).call(t,(function(e){return e}))},t.getDrawMode=function(){},e}(),BB=DB,MB="klondike/draw1/level",NB="klondike/draw3/level",GB=function(){function e(e){this.scene=void 0,this.scene=e,this.loadLevels()}var t=e.prototype;return t.loadLevels=function(){for(var e=1;e<=5;e++){var t=""+MB+e,n=""+NB+e;this.scene.cache.text.exists(t)||(this.scene.cache.text.exists(n)||(this.scene.load.text(t,"assets/levels/"+t+".txt"),this.scene.load.text(n,"assets/levels/"+n+".txt")))}this.scene.load.start()},t.isLevelLoaded=function(){var e=this.getKey(!1),t=this.getKey(!0);return!!this.scene.cache.text.get(e)&&(!!this.scene.cache.text.get(t)&&(!!this.scene.cache.text.get(e)&&!!this.scene.cache.text.get(t)))},t.getKey=function(e){var t=this.scene.gameStats.getWins(is.Z.KLONDIKE,{draw3:e}),n=this.getLevelByWins(t);return e?""+NB+n:""+MB+n},t.getLevelByWins=function(e){return e<10?1:e<20?2:e<60?3:e<140?4:5},t.randomLevel=function(e){var t=this.scene.gameStats.getWins(is.Z.KLONDIKE,{draw3:e.draw3}),n=this.getLevelByWins(t);return Phaser.Math.RND.between(1,n)},t.randomSeed=function(e){var t=e.draw3?3:1,n=this.scene.gameStats.getWins(is.Z.KLONDIKE,{draw3:e.draw3}),i=this.getLevelByWins(n),a="klondike/draw"+t+"/level"+Phaser.Math.RND.between(1,i),s=this.scene.cache.text.get(a);if(!s)throw Error("Level data \u0111\xe2u r\u1ed3i b\u1ea1n \xeai!!!");return Phaser.Math.RND.pick(s.split("\n"))},t.getRandomBeginnerSeed=function(){var e=""+MB+1,t=this.scene.cache.text.get(e);if(!t)throw Error("Level data \u0111\xe2u r\u1ed3i b\u1ea1n \xeai!!!");return Phaser.Math.RND.pick(t.split("\n"))},e}(),FB=GB,ZB={ONE_SUIT:{KEY:"dynamic-levels-one-suit",PATH:"assets/levels/spider/one-suit/dynamic.txt"},TWO_SUIT:{KEY:"dynamic-levels-two-suit",PATH:"assets/levels/spider/two-suit/dynamic.txt"},FOUR_SUIT:{KEY:"dynamic-levels-four-suit",PATH:"assets/levels/spider/four-suit/dynamic.txt"}},UB={ONE_SUIT:{GROUP1:{KEY:"difficulty-1-one-suit",PATH:"assets/levels/spider/one-suit/levels1.txt"},GROUP2:{KEY:"difficulty-2-one-suit",PATH:"assets/levels/spider/one-suit/levels2.txt"},GROUP3:{KEY:"difficulty-3-one-suit",PATH:"assets/levels/spider/one-suit/levels3.txt"},GROUP4:{KEY:"difficulty-4-one-suit",PATH:"assets/levels/spider/one-suit/levels4.txt"},GROUP5:{KEY:"difficulty-5-one-suit",PATH:"assets/levels/spider/one-suit/levels5.txt"},GROUP6:{KEY:"difficulty-6-one-suit",PATH:"assets/levels/spider/one-suit/levels6.txt"},GROUP7:{KEY:"difficulty-7-one-suit",PATH:"assets/levels/spider/one-suit/levels7.txt"},GROUP8:{KEY:"difficulty-8-one-suit",PATH:"assets/levels/spider/one-suit/levels8.txt"},GROUP9:{KEY:"difficulty-9-one-suit",PATH:"assets/levels/spider/one-suit/levels9.txt"}},TWO_SUIT:{GROUP1:{KEY:"difficulty-1-two-suit",PATH:"assets/levels/spider/two-suit/levels1.txt"},GROUP2:{KEY:"difficulty-2-two-suit",PATH:"assets/levels/spider/two-suit/levels2.txt"},GROUP3:{KEY:"difficulty-3-two-suit",PATH:"assets/levels/spider/two-suit/levels3.txt"},GROUP4:{KEY:"difficulty-4-two-suit",PATH:"assets/levels/spider/two-suit/levels4.txt"},GROUP5:{KEY:"difficulty-5-two-suit",PATH:"assets/levels/spider/two-suit/levels5.txt"},GROUP6:{KEY:"difficulty-6-two-suit",PATH:"assets/levels/spider/two-suit/levels6.txt"},GROUP7:{KEY:"difficulty-7-two-suit",PATH:"assets/levels/spider/two-suit/levels7.txt"},GROUP8:{KEY:"difficulty-8-two-suit",PATH:"assets/levels/spider/two-suit/levels8.txt"},GROUP9:{KEY:"difficulty-9-two-suit",PATH:"assets/levels/spider/two-suit/levels9.txt"}},FOUR_SUIT:{GROUP1:{KEY:"difficulty-1-four-suit",PATH:"assets/levels/spider/four-suit/levels1.txt"},GROUP2:{KEY:"difficulty-2-four-suit",PATH:"assets/levels/spider/four-suit/levels2.txt"},GROUP3:{KEY:"difficulty-3-four-suit",PATH:"assets/levels/spider/four-suit/levels3.txt"},GROUP4:{KEY:"difficulty-4-four-suit",PATH:"assets/levels/spider/four-suit/levels4.txt"},GROUP5:{KEY:"difficulty-5-four-suit",PATH:"assets/levels/spider/four-suit/levels5.txt"},GROUP6:{KEY:"difficulty-6-four-suit",PATH:"assets/levels/spider/four-suit/levels6.txt"},GROUP7:{KEY:"difficulty-7-four-suit",PATH:"assets/levels/spider/four-suit/levels7.txt"},GROUP8:{KEY:"difficulty-8-four-suit",PATH:"assets/levels/spider/four-suit/levels8.txt"},GROUP9:{KEY:"difficulty-9-four-suit",PATH:"assets/levels/spider/four-suit/levels9.txt"}}},zB=function(){function e(e){this.scene=void 0,this.scene=e,this.loadLevels()}var t=e.prototype;return t.loadLevels=function(){this.loadPrebuiltLevels(),this.loadDynamicLevels(),this.scene.load.start()},t.loadPrebuiltLevels=function(){var e=this,t=UB.ONE_SUIT,n=UB.TWO_SUIT,i=UB.FOUR_SUIT;ta()(t).forEach((function(t){e.scene.cache.text.exists(t.KEY)||e.scene.load.text(t.KEY,t.PATH)})),ta()(n).forEach((function(t){e.scene.cache.text.exists(t.KEY)||e.scene.load.text(t.KEY,t.PATH)})),ta()(i).forEach((function(t){e.scene.cache.text.exists(t.KEY)||e.scene.load.text(t.KEY,t.PATH)}))},t.loadDynamicLevels=function(){var e=ZB.ONE_SUIT,t=ZB.TWO_SUIT,n=ZB.FOUR_SUIT;this.scene.load.text(e.KEY,e.PATH),this.scene.load.text(t.KEY,t.PATH),this.scene.load.text(n.KEY,n.PATH)},t.isLevelLoaded=function(){var e=this.getKey(),t=this.scene.cache.text,n=this.scene.player.getPlayerSettings().suitSize;return!!t.get(e)&&t.get("dynamic-levels-"+n+"-suit")},t.getKey=function(){var e=this.scene.player.getPlayerSettings().suitSize,t=this.scene.gameStats.getWins(is.Z.SPIDER,{suitSize:e});return"difficulty-"+this.getLevelByWins(t)+"-"+e+"-suit"},t.getLevelByWins=function(e){return e<10?1:e<20?2:e<30?3:e<50?4:e<70?5:e<90?6:e<130?7:e<180?8:9},t.randomLevel=function(e){if("dynamic"==e.difficulty)return 0;var t=this.scene.gameStats.getWins(is.Z.SPIDER,e),n=this.getLevelByWins(t);return Phaser.Math.RND.between(1,n)},t.randomSeed=function(e){var t=e.suitSize||"one",n=e.difficulty;return"dynamic"==n?this.getDynamicLevelConfig(t):this.getRandomPrebuiltLevels(n,t)},t.getRandomBeginnerSeed=function(e){var t=e||{},n=t.suitSize,i=void 0===n?"one":n,a=t.difficulty,s=void 0===a?"easy":a,r=this.getConstantPrebuiltLevels(s,i);return Phaser.Math.RND.pick(r)},t.getConstantPrebuiltLevels=function(e,t){var n=1,i=9;"easy"===e?(n=1,i=3):"medium"===e?(n=4,i=6):"hard"===e&&(n=7,i=9);for(var a=[],s=n;s<=i;s++)a.push.apply(a,this.scene.cache.text.get("difficulty-"+s+"-"+t+"-suit").split("\n"));return a},t.getDynamicLevelConfig=function(e){var t=this.scene.cache.text.get("dynamic-levels-"+e+"-suit").split("\n");return Phaser.Math.RND.pick(t)},t.getDifficultyByLevel=function(e){var t="easy";return e>=4&&e<=6?t="medium":e>=7&&(t="hard"),t},t.getRandomPrebuiltLevels=function(e,t){var n=1;if(e&&"random"!=e){var i=1,a=9;"easy"===e?(i=1,a=3):"medium"===e?(i=4,a=6):"hard"===e&&(i=7,a=9),n=Phaser.Math.RND.between(i,a)}else{var s=this.scene.gameStats.getWins(is.Z.SPIDER,{suitSize:t}),r=this.getLevelByWins(s);n=Phaser.Math.RND.between(1,r)}var o=this.scene.cache.text.get("difficulty-"+n+"-"+t+"-suit").split("\n");return o[Math.floor(Math.random()*o.length)]},t.handleOneAndTwoSuits=function(e){switch(e.suits.length){case 1:e.suits=["spades"];break;case 2:e.suits=["hearts","spades"];break;case 4:e.suits=["clubs","hearts","spades","diamonds"]}},e}(),HB=zB,WB=function(){function e(e){this.scene=void 0,this.levelLoaderMap=void 0,this.gameType=void 0,this.scene=e,this.levelLoaderMap=new(ne())}var t=e.prototype;return t.getCurrentLevelLoader=function(e){e=e||this.gameType;var t=this.levelLoaderMap.get(e);if(!t)throw new Error("Can not find current level handler for game "+e);return t},t.switchGameType=function(e){if(!this.levelLoaderMap.has(e))switch(e){case is.Z.KLONDIKE:this.levelLoaderMap.set(e,new FB(this.scene));break;case is.Z.FREE_CELL:this.levelLoaderMap.set(e,new BB(this.scene));break;case is.Z.SPIDER:this.levelLoaderMap.set(e,new HB(this.scene));break;default:this.levelLoaderMap.set(e,new FB(this.scene))}this.gameType=e},t.isLevelLoaded=function(e){var t;e=e||this.gameType;var n=null==(t=this.levelLoaderMap.get(e))?void 0:t.isLevelLoaded();return void 0!=n&&n},t.randomLevel=function(e,t){var n;return t=t||this.gameType,(null==(n=this.levelLoaderMap.get(t))?void 0:n.randomLevel(e))||1},t.loadLevels=function(e){var t;e=e||this.gameType,null==(t=this.levelLoaderMap.get(e))||t.loadLevels()},t.getLevelByWins=function(e,t){var n;return t=t||this.gameType,(null==(n=this.levelLoaderMap.get(t))?void 0:n.getLevelByWins(e))||1},t.randomSeed=function(e,t){t=t||this.gameType,e=e||{};var n=this.levelLoaderMap.get(t);if(!n)throw new Error("Game type not found");return n.randomSeed(e)},t.getRandomBeginnerSeed=function(e,t){e=e||this.gameType;var n=this.levelLoaderMap.get(e);if(!n)throw new Error("Game type "+e+" not found ");return n.getRandomBeginnerSeed(t)},e}(),YB=WB,KB=function(e){function t(t,n,i){var a;return(a=e.call(this,t,n,i)||this).scene=void 0,a.timerText=void 0,a.fadeTween=void 0,a.isFadeOut=!1,a.jumpAttention=void 0,a.isShouldJump=!0,a.forceHide=!1,a.scene=t,a}(0,o.Z)(t,e);var n=t.prototype;return n.fadeIn=function(e){var t;void 0===e&&(e=300),this.isFadeOut&&(this.isFadeOut=!1,null==(t=this.fadeTween)||t.remove(),this.fadeTween=this.scene.add.tween({targets:this,alpha:1,duration:e*(1-this.alpha),ease:Phaser.Math.Easing.Sine.Out}))},n.fadeOut=function(e){var t;void 0===e&&(e=300),this.isFadeOut||(this.isFadeOut=!0,null==(t=this.fadeTween)||t.remove(),this.fadeTween=this.scene.add.tween({targets:this,alpha:0,duration:e*this.alpha,ease:Phaser.Math.Easing.Sine.Out}))},t}(Ol.Z),VB=KB,jB=Gn.Z.GAMEPLAY_DEFAULT,JB=jB.KEY,XB=jB.FRAME,qB=function(e){function t(t){var n;(n=e.call(this,t,75,75)||this).handleJourney=function(){var e=n.scene.gameplay.boardGame.boardState;e!==ku.DEALING&&e!==ku.NONE&&(n.scene.screen.close(Os.o4.PLAY_SCREEN),n.scene.screen.get(Os.o4.JOURNEY_SCREEN)?n.scene.screen.open(Os.o4.JOURNEY_SCREEN):(n.scene.game.globalScene.screen.open(Os.o4.NOTIFY_SCREEN,{message:"loading",duration:0,loading:!0}),n.waitingForJourneyScreenLoaded().then((function(){n.scene.game.globalScene.screen.close(Os.o4.NOTIFY_SCREEN),n.scene.screen.open(Os.o4.JOURNEY_SCREEN)}))))},n.scene=t,n.setName("JourneyIcon");var i=n.scene.add.image(0,0,JB,XB.IC_JOURNEY_GLOW);i.setWorldSize(75,75);var a=n.scene.add.image(0,0,JB,XB.IC_JOURNEY);a.setWorldSize(45,41.5);var s=n.scene.add.image(0,0,JB,XB.JOURNEY_BG);s.setWorldSize(47.5,14.5),s.setPosition(0,23);var r=n.scene.make.bitmapText({x:s.x,y:s.y+2,font:Rc.Z.PRIMARY.KEY,size:n.scene.fontSize(11.5),origin:{x:.5,y:.5}}).setTint(13355979);return r.setTranslationParameters({d:"1",h:"1",m:"1",s:"1"}),r.setText("dhms"),n.timerText=r,n.jumpAttention=new Wu(a,{widthExpand:10,heightExpand:12,jumpHeight:25}),n.scene.tweens.addCounter({from:0,to:1,duration:1e4,loop:-1,onLoop:function(){n.isShouldJump&&n.runAnimationAttention()},onUpdate:function(){i.setPosition(a.x,a.y)}}),n.scene.tweens.addCounter({from:0,to:360,duration:5e3,loop:-1,onUpdate:function(e){var t=e.getValue();i.setPosition(a.x,a.y),i.setAngle(t)}}),n.onClick=n.handleJourney,n.add([i,a,s,r]),n.listenEventUpdate(),n}(0,o.Z)(t,e);var n=t.prototype;return n.updateButton=function(){var e=1e3*this.scene.journey.getTimeEnd()-Date.now(),t=Math.floor(Math.abs(e)/864e5);e-=864e5*t;var n=Math.floor(Math.abs(e)/36e5);e-=36e5*n;var i=Math.floor(Math.abs(e)/6e4);e-=6e4*i;var a=Math.round(e/1e3);e<0&&(e=0,this.scene.journey.updateJourney());for(var s=[t,n,i,a],r=["d","h","m","s"],o="",c=0,h=0;h<r.length&&(0==c&&0==s[h]&&h<3||(c+=1,o+=r[h],this.timerText.setTranslationParameter(r[h],s[h]),!(c>=2)));h++);this.timerText.setText(o);var u=this.scene.gameplay.boardGame,l=this.getWorldPosition(),d=!this.forceHide,p=!0,f=Qo.instance.getGameMode(),g=this.scene.footer,m=g.y-g.height/2-40;switch(f){case Xo.CHALLENGE_FRIENDS:this.setPosition(37,m-50);break;case Xo.JOURNEY:d=!1;break;default:this.setPosition(37,m)}this.scene.journey.getCurrentLevel()>this.scene.journey.getLevelCount()&&(d=!1);for(var v=0;v<Math.min(2,u.piles.length);v++){var y=u.piles[v];if(0!=y.cards.length){var T=y.getPlacingPosition();l.y-T.y<50&&(d=!1),l.y-T.y<80&&(p=!1)}}d?this.fadeIn():this.fadeOut(),this.isShouldJump=p},n.listenEventUpdate=function(){var e=this;this.scene.events.on(Phaser.Scenes.Events.UPDATE,(function(){e.updateButton()}))},n.runAnimationAttention=function(){this.jumpAttention.run()},n.waitingForJourneyScreenLoaded=function(){var e=(0,r.Z)(l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.scene.screen.get(Os.o4.JOURNEY_SCREEN)){e.next=5;break}return e.next=3,(0,Ds.qZ)(100);case 3:e.next=0;break;case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),t}(VB),QB=qB,$B=Gn.Z.GAMEPLAY_DEFAULT,eM=$B.KEY,tM=$B.FRAME,nM=function(e){function t(t){var n;(n=e.call(this,t,100,100)||this).handleJourney=function(){var e=n.scene.gameplay.boardGame.boardState;e!==ku.DEALING&&e!==ku.NONE&&(n.scene.screen.close(Os.o4.PLAY_SCREEN),n.scene.screen.get(Os.o4.JOURNEY_SCREEN)?n.scene.screen.open(Os.o4.JOURNEY_SCREEN):(n.scene.game.globalScene.screen.open(Os.o4.NOTIFY_SCREEN,{message:"loading",duration:0,loading:!0}),n.waitingForJourneyScreenLoaded().then((function(){n.scene.game.globalScene.screen.close(Os.o4.NOTIFY_SCREEN),n.scene.screen.open(Os.o4.JOURNEY_SCREEN)}))))},n.scene=t,n.setName("JourneyIcon");var i=n.scene.add.image(0,0,eM,tM.IC_JOURNEY_GLOW);i.setWorldSize(100,100);var a=n.scene.add.image(0,0,eM,tM.IC_JOURNEY);a.setWorldSize(59,55);var s=n.scene.add.image(0,0,eM,tM.JOURNEY_BG);s.setWorldSize(69.5,22),s.setPosition(0,32);var r=n.scene.make.bitmapText({x:s.x,y:s.y+2,font:Rc.Z.PRIMARY.KEY,size:n.scene.fontSize(12),origin:{x:.5,y:.5}}).setTint(13355979);return r.setTranslationParameters({d:"1",h:"1",m:"1",s:"1"}),r.setText("dhms"),n.timerText=r,n.jumpAttention=new Wu(a,{widthExpand:10,heightExpand:15,jumpHeight:30}),n.scene.tweens.addCounter({from:0,to:1,duration:1e4,loop:-1,onLoop:function(){n.isShouldJump&&n.runAnimationAttention()},onUpdate:function(){i.setPosition(a.x,a.y)}}),n.scene.tweens.addCounter({from:0,to:360,duration:5e3,loop:-1,onUpdate:function(e){var t=e.getValue();i.setPosition(a.x,a.y),i.setAngle(t)}}),n.onClick=n.handleJourney,n.add([i,a,s,r]),n.listenEventUpdate(),n.setScale(Xf()),n}(0,o.Z)(t,e);var n=t.prototype;return n.updateButton=function(){var e=1e3*this.scene.journey.getTimeEnd()-Date.now(),t=Math.floor(Math.abs(e)/864e5);e-=864e5*t;var n=Math.floor(Math.abs(e)/36e5);e-=36e5*n;var i=Math.floor(Math.abs(e)/6e4);e-=6e4*i;var a=Math.round(e/1e3);e<0&&(e=0,this.scene.journey.updateJourney());for(var s=[t,n,i,a],r=["d","h","m","s"],o="",c=0,h=0;h<r.length&&(0==c&&0==s[h]||(c+=1,o+=r[h],this.timerText.setTranslationParameter(r[h],s[h]),!(c>=3)));h++);this.timerText.setText(o);var u=this.scene.gameplay.boardGame,l=this.getWorldPosition(),d=!this.forceHide,p=!0,f=Qo.instance.getGameMode(),g=this.scene.footer,m=g.y-7,v=g.menuBtn.getWorldPosition().x-90;if(f===Xo.JOURNEY)d=!1;else this.setPosition(v,m);this.scene.journey.getCurrentLevel()>this.scene.journey.getLevelCount()&&(d=!1);for(var y=0;y<Math.min(1,u.piles.length);y++){var T=u.piles[y];if(0!=T.cards.length){var C=T.getPlacingPosition();l.y-C.y<60&&(d=!1),l.y-C.y<90&&(p=!1)}}d?this.fadeIn():this.fadeOut(),this.isShouldJump=p},n.listenEventUpdate=function(){var e=this;this.scene.events.on(Phaser.Scenes.Events.UPDATE,(function(){e.updateButton()}))},n.runAnimationAttention=function(){this.jumpAttention.run()},n.waitingForJourneyScreenLoaded=function(){var e=(0,r.Z)(l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.scene.screen.get(Os.o4.JOURNEY_SCREEN)){e.next=5;break}return e.next=3,(0,Ds.qZ)(100);case 3:e.next=0;break;case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),t}(VB),iM=nM,aM=GameCore.world.isLandscape()?iM:QB,sM=Gn.Z.JOURNEY,rM=sM.KEY,oM=sM.FRAME,cM=function(e){function t(t,n){var i;return(i=e.call(this,t,271/2.88,340/2.88)||this).gameType=void 0,i.gameType=n,i.createContent(),i}return(0,o.Z)(t,e),t.prototype.createContent=function(){var e=oM.SELECT_GAME_MODE.KLONDIKE,t=jg.ZP.KLONDIKE;this.gameType==is.Z.FREE_CELL?(e=oM.SELECT_GAME_MODE.FREECELL,t=jg.ZP.FREE_CELL):this.gameType==is.Z.SPIDER&&(e=oM.SELECT_GAME_MODE.SPIDER,t=jg.ZP.SPIDER);var n=this.scene.add.image(0,0,rM,e);n.setWorldSize(this.width,this.height);var i=this.scene.add.bitmapText(0,0,Rc.Z.PRIMARY.KEY,t,this.scene.fontSize(16)).setOrigin(.5);this.add([n,i]),Phaser.Display.Align.In.TopCenter(n,this,0,1),Phaser.Display.Align.In.BottomCenter(i,this,0,-9.5)},t}(Ol.Z),hM=cM,uM=Gn.Z.JOURNEY,lM=uM.KEY,dM=uM.FRAME,pM=function(e){function t(t){var n;return(n=e.call(this,t)||this).background=void 0,n.buttons=[],n.setSize(968/2.88,586/2.88),n.createBackground(),n.createTitle(),n.createSelectGameButton(),t.add.existing((0,As.Z)(n)),n.setScale(jf(t)),n}(0,o.Z)(t,e);var n=t.prototype;return n.createBackground=function(){var e=new Lf(this.scene,{width:this.width,height:this.height,key:lM,frame:dM.SELECT_GAME_MODE.POPUP,symmetricType:Of.HORIZONTAL});this.add(e),this.background=e},n.createTitle=function(){var e=this.scene.make.bitmapText({font:Rc.Z.BOLD_SHADOW_BLUR.KEY,size:this.scene.fontSize(22),text:"SELECT A GAME MODE",origin:{x:.5,y:.5}});e.setTint(16449487,16449487,15913325,15913325),this.add(e),Phaser.Display.Align.In.TopCenter(e,this,0,-16)},n.createSelectGameButton=function(){var e=this,t=this.scene.add.container(),n=new hM(this.scene,is.Z.KLONDIKE),i=new hM(this.scene,is.Z.FREE_CELL),a=new hM(this.scene,is.Z.SPIDER);this.buttons=[n,i,a],t.add(this.buttons),this.add(t);t.setSize(3*n.width+28,n.height),Phaser.Display.Align.In.LeftCenter(n,t),Phaser.Display.Align.In.Center(a,t),Phaser.Display.Align.In.RightCenter(i,t),Phaser.Display.Align.In.BottomCenter(t,this,0,-18),this.buttons.forEach((function(t){t.gameType;t.onClick=function(){e.scene.screen.close(Os.o4.SELECT_GAME_SCREEN);e.scene.screen.get(Os.o4.JOURNEY_SCREEN)}}))},t}(Phaser.GameObjects.Container),fM=pM,gM=function(e){function t(t,n,i,a){var s;return(s=e.call(this,t,n,i,a)||this).slideInAnimation=void 0,s.fadeInAnimation=void 0,s.fadeOutAnimation=void 0,s.container=void 0,s.setDepth(Os.Ks.POPUP),s.container=new fM(t),s.add(s.container),s.background.setTint(1315862),s.background.setAlpha(.75),s.background.setInteractive(),s}(0,o.Z)(t,e);var n=t.prototype;return n.open=function(t){e.prototype.open.call(this,t),this.runOpenAnimation()},n.close=function(){this.runCloseAnimation()},n.runOpenAnimation=function(){var e,t;null!=(e=this.fadeInAnimation)&&null!=(t=e.tween)&&t.isPlaying()||(this.scene.audio.playSound(Ls.Z.POPUP_SHOW),this.fadeInAnimation||(this.fadeInAnimation=new Mh.Z({targets:[this]})),this.fadeInAnimation.play())},n.runCloseAnimation=function(){var t,n,i=this;null!=(t=this.fadeOutAnimation)&&null!=(n=t.tween)&&n.isPlaying()||(this.scene.audio.playSound(Ls.Z.POPUP_OFF),this.fadeOutAnimation||(this.fadeOutAnimation=new zm.Z({targets:[this],props:{alpha:0},onComplete:function(){e.prototype.close.call(i)}})),this.fadeOutAnimation.play())},t}(GameCore.Screen),mM=gM,vM=(GameCore.world.isLandscape(),mM),yM=function(e){function t(t,n){return e.call(this,t,n)||this}return(0,o.Z)(t,e),t.prototype.switchGameType=function(e){this.scene.switchGameType(e,!0)},t}(jI),TM=yM,CM=Gn.Z.GAMEPLAY_DEFAULT,EM=CM.KEY,AM=CM.FRAME,SM=function(e){function t(t,n,i,a){return e.call(this,t,n,i,a)||this}return(0,o.Z)(t,e),t.prototype.init=function(e){this.button=this.scene.add.image(0,0,EM,AM.MENU.ICO_OFFLINE),this.button.setWorldSize(50/2.88*.7,50/2.88*.7),this.add(this.button),Phaser.Display.Align.In.RightCenter(this.button,this,-11,0),this.options={enable:e,backgroundOn:AM.MENU.ICO_ONLINE,backgroundOff:AM.MENU.ICO_OFFLINE}},t}(_I),bM=SM,IM=Gn.Z.GAMEPLAY_DEFAULT,wM=IM.KEY,PM=IM.FRAME,kM=20,_M=32,xM=12,OM=function(e){function t(t,n){return e.call(this,t,n)||this}(0,o.Z)(t,e);var n=t.prototype;return n.init=function(){this.setSize(195,290);var e=this.scene.footer.menuBtn;this.setPosition(e.x,e.y+35)},n.createBackground=function(){var e=(0,ul.t)(),t=this.scene.add.nineslice(0,0,wM,PM.MENU.BACKGROUND,this.width*e,this.height*e,0*e,0*e,50/2.88*e,100/2.88*e);t.scale=1/e,t.setInteractive(),this.add(t),this.bg=t},n.createScroller=function(){this.scroller=new fI.Z(this.scene,{width:this.bg.displayWidth,height:this.bg.displayHeight-15,marginTop:0}),this.scroller.setEnable(!1),this.add(this.scroller)},n.createMainButtons=function(){for(var e=this.scene.player.getPlayerSettings().gameType,t=void 0===e?"klondike":e,n=[this.createGameTypeToggleButton(is.Z.KLONDIKE,"Klondike","klondike"==t,PM.MENU.ICO_KLONDIKE_BLUE,86/2.88,44/2.88),this.createGameTypeToggleButton(is.Z.SPIDER,"Spider","spider"==t,PM.MENU.ICO_SPIDER_PURPLE,65/2.88,75/2.88),this.createGameTypeToggleButton(is.Z.FREE_CELL,"FreeCell","freecell"==t,PM.MENU.ICO_FREECELL_RED,21.875,56/2.88),this.createSeparateNode(),this.createJourneyButton(),this.createSeparateNode(),this.createGameOptionsButton(),this.createThemeButton(),this.createStatisticsButton()],i=n[0].height/2-this.scroller.height/2,a=0;a<n.length;a++)n[a].setPosition(0,i),n[a+1]&&(i+=n[a].height);this.scroller.addItems(n)},n.createGameTypeToggleButton=function(e,t,n,i,a,s){var r=this;void 0===a&&(a=24),void 0===s&&(s=24);var o=new bM(this.scene,n,this.width,_M);this.toggleButtonMap.set(e,o),o.setName(e),o.onClick=function(t){r.handleGameTypeClick(e)};var c=this.scene.make.bitmapText({font:Rc.Z.PRIMARY.KEY,size:this.scene.fontSize(xM),text:t,origin:{x:.5,y:.5}}),h=this.scene.add.image(0,0,wM,i);return h.setWorldSize(a*this._scale,s*this._scale),c.setTint(16777215),o.add([c,h]),Phaser.Display.Align.In.Center(h,o,-o.width/2+kM,0),Phaser.Display.Align.In.LeftCenter(c,o,-37),e==is.Z.KLONDIKE&&(h.y-=1.5),e==is.Z.SPIDER&&(h.x-=2),e==is.Z.FREE_CELL&&(h.x-=2,h.y-=2),o},n.createSeparateNode=function(){var e=this.scene.add.container(0,0);e.setSize(this.width,24);var t=this.scene.add.image(0,0,wM,PM.BLANK).setTint(0).setAlpha(.7);return t.setWorldSize(this.width-5,12.5),e.setName("separateNode"),e.add([t]),this.separateNodes.push(t),e},n.createTournamentsButton=function(){var e=new Ol.Z(this.scene,this.width,_M);e.setName("Tournaments"),e.onClick=this.handleTournamentButtonClick;var t=this.scene.make.bitmapText({font:Rc.Z.PRIMARY.KEY,size:this.scene.fontSize(xM),text:"Tournaments",origin:{x:.5,y:.5}});t.setTint(16777215);var n=this.scene.add.image(0,0,wM,PM.MENU.ICO_TOUR);n.setWorldSize(21.875*this._scale,62/2.88*this._scale);var i=this.scene.add.image(0,0,wM,PM.MENU.BTN_EXPAND);return i.setWorldSize(34/2.88*this._scale,59/2.88*this._scale),Phaser.Display.Align.In.Center(n,e,-e.width/2+kM,0),Phaser.Display.Align.In.LeftCenter(t,e,-37),Phaser.Display.Align.In.RightCenter(i,e,-12),e.add([t,n,i]),e},n.createJourneyButton=function(){var e=new Ol.Z(this.scene,this.width,_M);e.setName("Journey"),e.onClick=this.handleJourneyButtonClick;var t=this.scene.make.bitmapText({font:Rc.Z.PRIMARY.KEY,size:this.scene.fontSize(xM),text:"Journey",origin:{x:.5,y:.5}});t.setTint(16777215);var n=this.scene.add.image(0,0,wM,PM.MENU.ICO_JOURNEY);n.setWorldSize(56/2.88*this._scale,65/2.88*this._scale);var i=this.scene.add.image(0,0,wM,PM.MENU.BTN_EXPAND);return i.setWorldSize(34/2.88*this._scale,59/2.88*this._scale),Phaser.Display.Align.In.Center(n,e,-e.width/2+kM,-1),Phaser.Display.Align.In.LeftCenter(t,e,-37),Phaser.Display.Align.In.RightCenter(i,e,-12),e.add([t,n,i]),e},n.createThemeButton=function(){var e=this,t=new Ol.Z(this.scene,this.width,_M);t.setName("Theme"),t.onClick=function(){e.openLazyScreen(Os.o4.THEME_SCREEN)};var n=this.scene.make.bitmapText({font:Rc.Z.PRIMARY.KEY,size:this.scene.fontSize(xM),text:"Theme",origin:{x:.5,y:.5}});n.setTint(16777215);var i=this.scene.add.image(0,0,wM,PM.MENU.ICO_THEME);i.setWorldSize(60/2.88*this._scale,58/2.88*this._scale);var a=this.scene.add.image(0,0,wM,PM.MENU.BTN_EXPAND);return a.setWorldSize(34/2.88*this._scale,59/2.88*this._scale),Phaser.Display.Align.In.Center(i,t,-t.width/2+kM,-1),Phaser.Display.Align.In.LeftCenter(n,t,-37),Phaser.Display.Align.In.RightCenter(a,t,-12),t.add([n,i,a]),t},n.createGameOptionsButton=function(){var e=new Ol.Z(this.scene,this.width,_M);e.setName("GameOptions"),e.onClick=this.handleGameOptionsButtonClick;var t=this.scene.make.bitmapText({font:Rc.Z.PRIMARY.KEY,size:this.scene.fontSize(xM),text:"Game Options",origin:{x:.5,y:.5}});t.setTint(16777215);var n=this.scene.add.image(0,0,wM,PM.BLANK).setTint(16777215,16777215,5723991,5723991).setAlpha(.12);n.setWorldSize(this.width,_M);var i=this.scene.add.image(0,0,wM,PM.MENU.ICO_SETTINGS);i.setWorldSize(60/2.88*this._scale,62/2.88*this._scale);var a=this.scene.add.image(0,0,wM,PM.MENU.BTN_EXPAND);return a.setWorldSize(34/2.88*this._scale,59/2.88*this._scale),Phaser.Display.Align.In.Center(i,e,-e.width/2+kM,0),Phaser.Display.Align.In.LeftCenter(t,e,-37,2),Phaser.Display.Align.In.RightCenter(a,e,-12),e.add([n,t,i,a]),e},n.createInviteButton=function(){var e=new Ol.Z(this.scene,this.width,_M);e.setName("Invite");var t=this.scene.make.bitmapText({font:Rc.Z.PRIMARY.KEY,size:this.scene.fontSize(xM),text:"Invite Friends",origin:{x:.5,y:.5}});t.setTint(16777215);var n=this.scene.add.image(0,0,wM,PM.IC_INVITE);n.setWorldSize(34*.8*this._scale,28*.8*this._scale);var i=this.scene.add.image(0,0,wM,PM.IC_NEXT);return i.setWorldSize(34/2.88*this._scale,59/2.88*this._scale),e.add([t,n,i]),Phaser.Display.Align.In.Center(n,e,-e.width/2+kM+4,0),Phaser.Display.Align.In.LeftCenter(t,e,-37),Phaser.Display.Align.In.RightCenter(i,e,-12),e},n.createFollowPageButton=function(){var e=new Ol.Z(this.scene,this.width,_M);e.setName("FollowPage"),e.onClick=this.handleFollowPageButtonClick;var t=this.scene.make.bitmapText({font:Rc.Z.PRIMARY.KEY,size:this.scene.fontSize(xM),text:"Follow Our Page",origin:{x:.5,y:.5}});t.setTint(16777215);var n=this.scene.add.image(0,0,wM,PM.IC_FOLLOW);n.setWorldSize(20.8*this._scale,30.5*.8*this._scale);var i=this.scene.add.image(0,0,wM,PM.IC_NEXT);return i.setWorldSize(34/2.88*this._scale,59/2.88*this._scale),Phaser.Display.Align.In.Center(n,e,-e.width/2+kM,0),Phaser.Display.Align.In.LeftCenter(t,e,-37),Phaser.Display.Align.In.RightCenter(i,e,-12),e.add([t,n,i]),e},n.createJoinGroupButton=function(){var e=new Ol.Z(this.scene,this.width,_M);e.setName("JoinGroup"),e.onClick=this.handleJoinGroupButtonClick;var t=this.scene.make.bitmapText({font:Rc.Z.PRIMARY.KEY,size:this.scene.fontSize(xM),text:"Join Group",origin:{x:.5,y:.5}});t.setTint(16777215);var n=this.scene.add.image(0,0,wM,PM.IC_GROUP);n.setWorldSize(27.6*this._scale,18.8*this._scale);var i=this.scene.add.image(0,0,wM,PM.IC_NEXT);return i.setWorldSize(34/2.88*this._scale,59/2.88*this._scale),Phaser.Display.Align.In.Center(n,e,-e.width/2+kM,0),Phaser.Display.Align.In.LeftCenter(t,e,-37),Phaser.Display.Align.In.RightCenter(i,e,-12),e.add([t,n,i]),e},n.createStatisticsButton=function(){var e=new Ol.Z(this.scene,this.width,_M);e.setName("Statistics"),e.onClick=this.handleStatisticsButtonClick;var t=this.scene.make.bitmapText({font:Rc.Z.PRIMARY.KEY,size:this.scene.fontSize(xM),text:"Statistics",origin:{x:.5,y:.5}});t.setTint(16777215);var n=this.scene.add.image(0,0,wM,PM.MENU.ICO_STATS);n.setWorldSize(60/2.88*this._scale,58/2.88*this._scale);var i=this.scene.add.image(0,0,wM,PM.IC_NEXT);return i.setWorldSize(34/2.88*this._scale,59/2.88*this._scale),Phaser.Display.Align.In.Center(n,e,-e.width/2+kM,-1.5),Phaser.Display.Align.In.LeftCenter(t,e,-37),Phaser.Display.Align.In.RightCenter(i,e,-12),e.add([t,n,i]),e},(0,he.Z)(t,[{key:"_scale",get:function(){return.7}}]),t}(MI),LM=OM,RM=function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).fadeInAnimation=void 0,i.fadeOutAnimation=void 0,i}(0,o.Z)(t,e);var n=t.prototype;return n.createMenuContainer=function(){this.container=new LM(this.scene,this)},n.runOpenAnimation=function(){var e,t,n=this;this.scene.audio.playSound(Ls.Z.POPUP_SHOW),null!=(e=this.fadeInAnimation)&&null!=(t=e.tween)&&t.isPlaying()||(this.container.hideSeparateNodes(),this.fadeInAnimation||(this.fadeInAnimation=new Mh.Z({targets:[this.container],onComplete:function(){n.onOpenAnimationComplete(),n.container.unhideSeparateNodes()}})),this.fadeInAnimation.play())},n.runCloseAnimation=function(){var e,t,n=this;this.scene.audio.playSound(Ls.Z.POPUP_OFF),null!=(e=this.fadeOutAnimation)&&null!=(t=e.tween)&&t.isPlaying()||(this.container.hideSeparateNodes(),this.fadeOutAnimation||(this.fadeOutAnimation=new zm.Z({targets:[this.container],onComplete:function(){n.onCloseAnimationComplete()}})),this.fadeOutAnimation.play())},t}(KI),DM=function(e){function t(t,n){return e.call(this,t,n)||this}return(0,o.Z)(t,e),t.prototype.switchGameType=function(e){this.scene.switchGameType(e,!0)},t}(RM),BM=DM,MM=GameCore.world.isLandscape()?BM:TM,NM=Gn.Z.GAMEPLAY_DEFAULT,GM=NM.KEY,FM=NM.FRAME,ZM=function(e){function t(){for(var t,n,a=arguments.length,s=new Array(a),o=0;o<a;o++)s[o]=arguments[o];return(n=e.call.apply(e,x()(t=[this]).call(t,s))||this).gameplay=void 0,n.header=void 0,n.footer=void 0,n.journeyButton=void 0,n.menu=void 0,n.footerOverlayZone=void 0,n.gameStats=void 0,n.levelLoader=void 0,n.themeHandler=void 0,n.gameModeManager=void 0,n.gameTypeManager=void 0,n.journeyLevelMechanicManager=void 0,n.bottomLogo=void 0,n.handleFinishingChallenge=function(){n.screen.open(Os.o4.PLAY_WITH_FRIEND_GAME_OVER_SCREEN),n.screen.get(Os.o4.PLAY_WITH_FRIEND_GAME_OVER_SCREEN).updateFinishingChallenge()},n.create=function(){e.prototype.create.call((0,As.Z)(n));var t=n.player.getPlayerSettings().gameType;kr(t),n.themeHandler=new dT((0,As.Z)(n)),n.gameModeManager=new uS((0,As.Z)(n)),n.journeyLevelMechanicManager=new HL((0,As.Z)(n)),n.gameStats=new vv((0,As.Z)(n)),n.levelLoader=new YB((0,As.Z)(n)),n.gameTypeManager=new Rr((0,As.Z)(n)),n.header=new Um((0,As.Z)(n)),n.footer=new sg((0,As.Z)(n)),n.footer.init();var i=n.ads.getBannerHeight();Phaser.Display.Align.In.TopCenter(n.header,n.gameZone,0,0),n.world.isLandscape()?Phaser.Display.Align.In.BottomCenter(n.footer,n.gameZone,0,-10):Phaser.Display.Align.In.BottomCenter(n.footer,n.gameZone,0,-i),n.createFooterOverlayZone(),n.createJourneyButton(),n.gameplay=new Af((0,As.Z)(n)),n.createScreens(),n.ads.preloadInterstitialAdAsync().catch((function(){})),n.processStartGame(),n.header.alignChildren();var a=n.game.globalScene;a instanceof iB.Z&&a.hideBackground(),n.createMenu(),n.openDebugScreen(),n.scene.get(cs.C.LOAD_SCENE).lazyLoadResource()},n.setBackground=function(e){n.createBackground(e)},n.run=function(){n.createBottomLogo(),n.ads.showBannerAdAsync().catch((function(e){}))},n.handlePlayWithFriend=function(){var e=(0,r.Z)(l().mark((function e(t){var a,s;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===t&&(t=!1),!GameCore.Configs.Gameplay.SwitchFriend&&!t){e.next=17;break}return e.next=4,n.storage.dispatch(function(){var e=(0,r.Z)(l().mark((function e(t){var n,a,s,r,o,c,h,u,d,p,f,g,m,v,y,T;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,n=window.game,a=n.player,s=n.facebook,n.globalScene.screen.open(Os.o4.NOTIFY_SCREEN,{message:"loading",loading:!0}),r=a.getPlayerId(),o=a.getConnectedPlayerIds(100,0),c=a.getConnectedPlayers(100,0),0==(h=Le()(o).call(o,(function(e){var t;return En()(t=Qo.instance.friendsChallenged).call(t,e)<0&&e!=r}))).length&&(h.push.apply(h,o),Qo.instance.friendsChallenged=[]),u="",d="",p=s.contextType,f=null,h.length>0&&(g=Phaser.Math.RND.between(0,h.length-1),u=h[g],c[u]&&(f=c[u],Qo.instance.friendsChallenged.push(u))),!u||"string"!==typeof u){e.next=18;break}return e.next=17,s.createAsync(u);case 17:d=e.sent;case 18:if(f&&d){e.next=22;break}return e.next=21,t(oc());case 21:return e.abrupt("return");case 22:return tc({contextId:d}),t(Ko()),v=(m=f).name,y=m.photo,T={playerId:u,name:v,photo:y},e.next=28,t(dc(Ja,T));case 28:t(es(d,p)),ic(100),e.next=38;break;case 32:if(e.prev=32,e.t0=e.catch(0),ic(100),!(e.t0 instanceof vr)){e.next=37;break}return e.abrupt("return");case 37:(0,i.tO)(e.t0);case 38:return e.prev=38,e.finish(38);case 40:case"end":return e.stop()}}),e,null,[[0,32,38,40]])})));return function(t){return e.apply(this,arguments)}}());case 4:if(!Qo.instance.isChallengeMode()){e.next=15;break}if(a=n.storage.getState(),void 0==(null==(s=ho(a))?void 0:s.seed)){e.next=14;break}return n.gameTypeManager.switchGameType(s.gameType),n.gameplay.startGameWith(s.seed,s.options),e.abrupt("return");case 14:case 15:e.next=19;break;case 17:return e.next=19,n.storage.dispatch(sc());case 19:n.gameplay.startNewGame();case 20:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.handlePlaySingle=function(){var e=(0,r.Z)(l().mark((function e(t){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return void 0===t&&(t=!0),e.next=3,fc();case 3:return e.next=5,n.storage.dispatch(sc());case 5:n.gameplay.boardGame.isSingleMode=!0,t?(n.gameplay.checkGameplayBeforeStartNewGame(),n.gameplay.startNewGame()):n.gameplay.startGame();case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n}(0,o.Z)(t,e);var n=t.prototype;return n.preload=function(){this.events.on(Phaser.Scenes.Events.WAKE,this.run),this.events.on(Phaser.Scenes.Events.CREATE,this.run),this.events.once("player-finish-challenge",this.handleFinishingChallenge)},n.openDebugScreen=function(){var e=this;if(GameCore.Utils.Valid.isDebugger()){var t=GameCore.Configs.FastDebug.ShowScreenOnStart;void 0!=t&&this.time.delayedCall(500,(function(){e.screen.open(t)}))}},n.createMenu=function(){var e=this.world.getWorldSize(),t=e.width,n=e.height,i=this.add.container();i.setSize(t,n),i.setDepth(Dn.Z.MENU),i.setPosition(t/2,n/2),this.menu=new MM(this,this.footerOverlayZone),i.add(this.menu)},n.createFooterOverlayZone=function(){this.footerOverlayZone=new QI(this,this.footer)},n.createJourneyButton=function(){this.journeyButton=new aM(this)},n.switchGameType=function(){var e=(0,r.Z)(l().mark((function e(t,n,i){var a;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===n&&(n=!1),this.gameTypeManager.isCanSwitchTo(t)){e.next=4;break}return this.gameplay.boardGame.isGameOver()&&this.handlePlaySingle(),e.abrupt("return");case 4:if(a=void 0==i?!this.gameplay.isAvailableGameType(t):i,Qo.instance.isSingleMode()){e.next=8;break}return this.handleSwitchGameTypeToSingleMode(t,n),e.abrupt("return");case 8:this.handleSwitchGameTypeInSameGameMode(a,t,n);case 9:case"end":return e.stop()}}),e,this)})));return function(t,n,i){return e.apply(this,arguments)}}(),n.handleSwitchGameTypeInSameGameMode=function(e,t,n){this.gameTypeManager.switchGameType(t,n);var i=this.gameplay.boardGame.isGameOver();if(!this.gameplay.boardGame.isSingleMode||i)return this.gameplay.boardGame.clearOldBoard(),void this.handlePlaySingle();if(e)this.gameplay.startGame();else{var a=this.gameplay.saveSystem.getLastGameData(),s=null==a?void 0:a.seed;s&&this.gameplay.setSeed(s)}},n.handleSwitchGameTypeToSingleMode=function(e,t){this.gameplay.boardGame.isSingleMode=!1,this.gameTypeManager.switchGameType(e,t),this.gameplay.boardGame.clearOldBoard();var n=!this.gameplay.boardGame.isSingleMode;this.handlePlaySingle(n)},n.processStartGame=function(){var e=this,t=this.player.getPlayerSettings().gameType;if(Qo.instance.isChallengeMode()){var n=this.storage.getState();t=ho(n).gameType||t}else if(Qo.instance.isTournamentMode()){var i=this.storage.getState();t=Ar(i)||t}this.gameTypeManager.switchGameType(t),this.showLoading(),this.gameModeManager.start(),this.header.setVisible(!1),this.time.delayedCall(500,(function(){e.gameplay.startGame(),e.header.setVisible(!0)}))},n.showLoading=function(){var e=this,t=new JS.Z(this);t.setDepth(Dn.Z.ON_TOP),t.setVisible(!0),t.setScale(1.3),this.add.existing(t),Phaser.Display.Align.In.Center(t,this.gameZone,0,0),this.time.delayedCall(500,(function(){e.tweens.add({targets:[t],alpha:0,duration:300})}))},n.createBottomLogo=function(){if(!this.world.isLandscape()){var e=new RE(this);e.setDepth(Dn.Z.FOOTER_LOGO),this.add.existing(e),Phaser.Display.Align.In.BottomCenter(e,this.gameZone),this.bottomLogo=e}},n.createScreens=function(){this.screen.add(Os.o4.OUT_OF_MOVES_SCREEN,GA),this.screen.add(Os.o4.SETTINGS_SCREEN,RR),this.screen.add(Os.o4.VICTORY_SCREEN,oA),this.screen.add(Os.o4.PLAY_SCREEN,lv),this.screen.add(Os.o4.GAME_STATS_SCREEN,rT),this.screen.add(Os.o4.NOTIFICATION_SCREEN,aS),this.screen.add(Os.o4.TOURNAMENTS_SCREEN,qP),this.screen.add(Os.o4.PLAY_WITH_FRIEND_GAME_OVER_SCREEN,M_),this.screen.add(Os.o4.TOURNAMENTS_RESULT_SCREEN,zx),this.screen.add(Os.o4.WELL_DONE_SCREEN,jL),this.screen.add(Os.o4.PLAY_WITH_FRIEND_WELCOME,nB),this.screen.add(Os.o4.LANGUAGES_SCREEN,LB)},n.handleAfterLoadJourneyTexture=function(){this.screen.get(Os.o4.JOURNEY_SCREEN)||(this.createJourneyModeScreens(),this.header.createJourneyInfo())},n.handleAfterLoadThemePreviewTexture=function(){this.screen.get(Os.o4.THEME_SCREEN)||this.createThemeScreens()},n.handleAfterLoadHowToPlayTexture=function(){this.screen.get(Os.o4.HOW_TO_PLAY_SCREEN)||this.createHowToPlayScreen()},n.createJourneyModeScreens=function(){this.screen.add(Os.o4.JOURNEY_SCREEN,IL),this.screen.add(Os.o4.MISSION_WELCOME_SCREEN,oO),this.screen.add(Os.o4.OUT_OF_MISSIONS_SCREEN,JD),this.screen.add(Os.o4.MISSION_COMPLETED_SCREEN,WD),this.screen.add(Os.o4.SELECT_GAME_SCREEN,vM)},n.createThemeScreens=function(){this.screen.add(Os.o4.THEME_SCREEN,UT)},n.createHowToPlayScreen=function(){this.screen.add(Os.o4.HOW_TO_PLAY_SCREEN,NC)},n.switchTheme=function(e){this.theme.updateCurrentCardStyle(e),this.themeHandler.setBackground(),this.themeHandler.updateCardStyle()},n.showHowToPlayScreen=function(e){var t=this,n=e==is.Z.KLONDIKE&&!this.player.getIsKlondikeGuideDisplay(),i=e==is.Z.FREE_CELL&&!this.player.getIsFreecellGuideDisplay(),a=e==is.Z.SPIDER&&!this.player.getIsSpiderGuideDisplay();(n||i||a)&&(this.loadHowToPlayTexture(e),this.time.delayedCall(1e3,(function(){t.openHowToPlayScreen(e)})))},n.openHowToPlayScreen=function(e){var t=this,n=function(){var n=(0,r.Z)(l().mark((function n(){var i;return l().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:i=Gn.Z.HOW_TO_PLAY.getKey(e);case 1:if(t.textures.exists(i)){n.next=6;break}return n.next=4,(0,Ds.qZ)(100);case 4:n.next=1;break;case 6:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();n().then((function(){t.screen.open(Os.o4.HOW_TO_PLAY_SCREEN),t.player.incUserGuideDisplays(e)}))},n.update=function(e,t){this.gameplay.update(t),this.header.update()},n.createDevBtn=function(){var e,t=this;if(GameCore.Utils.Valid.isDebugger()){var n=De()(e=[is.Z.KLONDIKE,is.Z.FREE_CELL,is.Z.SPIDER]).call(e,(function(e){return t.createGameTypeButton(e)})),i=this.ads.getBannerHeight(),a=this.world.getWorldSize(),s=a.width,r=a.height;Phaser.Actions.GridAlign(Xh()(n).call(n),{width:s>375?1:10,height:s>375?10:1,cellWidth:-52,cellHeight:-40,x:s-100,y:r-120-i+5-40})}},n.createGameTypeButton=function(e){var t=this,n=new Ol.Z(this,50,30),i=this.add.image(0,0,GM,FM.IC_BG_OFF);i.setWorldSize(50,30);var a=this.make.bitmapText({font:Rc.Z.PRIMARY.KEY,size:this.fontSize(10),text:e,origin:{x:.5,y:.5}});return a.setCenterAlign(),null==n||n.add([i,a]),n.onClick=function(){t.switchGameType(e)},n},n.loadHowToPlayTexture=function(e){var t=this,n=Gn.Z.HOW_TO_PLAY.getKey(e),i=Gn.Z.HOW_TO_PLAY.getTexture(e),a=Gn.Z.HOW_TO_PLAY.getJson(e);this.textures.exists(n)?this.handleAfterLoadHowToPlayTexture():(this.load.atlas(n,i,a),this.load.on(Phaser.Loader.Events.FILE_COMPLETE,(function(e){e==n&&t.handleAfterLoadHowToPlayTexture()})),this.load.start())},t}(Ts.Z),UM=ZM;var zM=UM,HM=Gn.Z.DEFAULT,WM=HM.KEY,YM=HM.FRAME,KM=function(e){function t(t){var n;return(n=e.call(this,t,WM,YM.BUTTON_YELLOW_CIRCLE)||this).scene=void 0,n.scene=t,n.button.setSize(87,68).setDisplaySize(87,68),n.setName("Home"),n.createIcon(),n}return(0,o.Z)(t,e),t.prototype.createIcon=function(){var e=this.scene.add.image(0,0,WM,YM.ICON_FLAT_HOME);e.setSize(43,43).setDisplaySize(43,43),this.add(e),Phaser.Display.Align.In.Center(e,this)},t}(jc.Z),VM=KM,jM=Gn.Z.DEFAULT,JM=jM.KEY,XM=jM.FRAME,qM=function(e){function t(t){var n;return(n=e.call(this,t,JM,XM.BUTTON_GREEN)||this).scene=void 0,n.scene=t,n.button.setWorldSize(170,72),n.setName("PlayWithFriends"),n.createLabel(),n}return(0,o.Z)(t,e),t.prototype.createLabel=function(){var e=this.scene.make.bitmapText({font:Rc.Z.PRIMARY.KEY,size:13,text:"PLAY"}),t=10;Phaser.Display.Align.In.Center(e,this,0,-t);var n=this.scene.make.bitmapText({font:Rc.Z.PRIMARY.KEY,size:9,text:"WITH FRIENDS"});t=12,Phaser.Display.Align.In.Center(n,this,0,t),this.add([e,n])},t}(jc.Z),QM=qM,$M=Gn.Z.DEFAULT,eN=$M.KEY,tN=$M.FRAME,nN=function(e){function t(t){var n;return(n=e.call(this,t,eN,tN.BUTTON_YELLOW_CIRCLE)||this).scene=void 0,n.scene=t,n.button.setSize(87,68).setDisplaySize(87,68),n.setName("Share"),n.createIcon(),n}return(0,o.Z)(t,e),t.prototype.createIcon=function(){var e=this.scene.add.image(0,0,eN,tN.ICON_FLAT_SHARE);e.setSize(43,43).setDisplaySize(43,43),this.add(e),Phaser.Display.Align.In.Center(e,this)},t}(jc.Z),iN=nN,aN=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n.homeButton=void 0,n.playButton=void 0,n.shareButton=void 0,n.scene=t,n.setName("FooterBar"),n.createButtons(),n.alignButtons(),n.scene.add.existing((0,As.Z)(n)),n}(0,o.Z)(t,e);var n=t.prototype;return n.alignButtons=function(){Phaser.Display.Align.In.Center(this.homeButton,this,-140),Phaser.Display.Align.In.Center(this.playButton,this,0),Phaser.Display.Align.In.Center(this.shareButton,this,140)},n.createButtons=function(){this.createHomeButton(),this.createPlayButton(),this.createShareButton()},n.createHomeButton=function(){this.homeButton=new VM(this.scene),this.add(this.homeButton)},n.createPlayButton=function(){this.playButton=new QM(this.scene),this.add(this.playButton)},n.createShareButton=function(){this.shareButton=new iN(this.scene),this.add(this.shareButton)},t}(Phaser.GameObjects.Container),sN=aN,rN=n(676),oN={targets:[],props:{alpha:{duration:500,value:{start:0,from:0,to:1},ease:Phaser.Math.Easing.Cubic.Out},scale:{duration:1e3,value:{start:.8,from:.8,to:1},ease:Phaser.Math.Easing.Elastic.Out,easeParams:[.1,.45]}}},cN=function(e){function t(t){return e.call(this,oN,t)||this}return(0,o.Z)(t,e),t}(Ss.Z),hN={targets:[],props:{alpha:{start:0,to:1,duration:500,ease:Phaser.Math.Easing.Cubic.Out},scale:{start:.8,to:1,duration:1e3,ease:Phaser.Math.Easing.Elastic.Out,easeParams:[.1,.45]},y:{start:0,to:0,duration:500,ease:Phaser.Math.Easing.Back.Out}},delay:0},uN=function(e){function t(t){return e.call(this,hN,t)||this}return(0,o.Z)(t,e),t}(Ss.Z),lN=Gn.Z.DEFAULT,dN=lN.KEY,pN=lN.FRAME,fN=function(e){function t(t,n){var i;return(i=e.call(this,t)||this).button=void 0,i.avatar=void 0,i.rankIcon=void 0,i.rankText=void 0,i.username=void 0,i.score=void 0,i.scoreText=void 0,i.background=void 0,i.showPopUp=void 0,i.showItems=void 0,i.payload=void 0,i.handleChallengeFriend=function(){var e=i.payload.playerId;i.scene.storage.dispatch(rc(e))},i.createBackground(),i.updateSize(),i.createAvatar(),i.createRank(),i.createUsername(),i.createScore(),i.createButton(),n&&i.updateInfo(n),i.scene.add.existing((0,As.Z)(i)),i}(0,o.Z)(t,e);var n=t.prototype;return n.updateInfo=function(e){this.payload=(0,s.Z)({scoreRight:!0,isHighlight:!1,useChallenge:!1},e),this.updateBackground(),this.updateAvatar(),this.updateRank(),this.updateUsername(),this.updateScore(),this.updatePosition()},n.updatePosition=function(){var e=this.payload.scoreRight,t=this.payload.useChallenge;this.button.setVisible(!!t),e?Phaser.Display.Align.To.RightCenter(this.score,this.avatar,120):Phaser.Display.Align.To.RightCenter(this.score,this.avatar,80)},n.createBackground=function(){this.background=this.scene.make.image({key:dN,frame:pN.LEADERBOARD_BG_LIGHT}),this.background.setWorldSize(264,56),this.add(this.background)},n.updateBackground=function(){var e="";e=this.payload.isHighlight?pN.LEADERBOARD_BG_LIGHT:pN.LEADERBOARD_BG_DARK,this.background.setFrame(e),this.background.setWorldSize(264,56)},n.updateSize=function(){var e=this.background,t=e.width,n=e.height;this.setSize(t,n)},n.createAvatar=function(){this.avatar=new Bc(this.scene,{key:dN,frame:pN.AVATAR_FRAME_YELLOW_SMALL,background:pN.AVATAR_BG_YELLOW_SMALL,width:47.5,height:49.5,radius:40}),this.add(this.avatar),Phaser.Display.Align.In.LeftCenter(this.avatar,this,-10)},n.updateAvatar=function(){var e=this.payload,t=e.playerId,n=e.photo;this.avatar.loadPhoto(t,n)},n.createRank=function(){this.createRankIcon(1),this.createRankText(1)},n.updateRank=function(){var e=this.payload.rank;this.updateRankIcon(e),this.updateRankText(e)},n.getRankIconFrame=function(e){var t=pN.ICON_FLAG;switch(e){case 1:t=pN.ICON_CUP_GOLD;break;case 2:t=pN.ICON_CUP_SILVER;break;case 3:t=pN.ICON_CUP_COPPER}return t},n.createRankIcon=function(e){var t=this.getRankIconFrame(e);this.rankIcon=this.scene.make.image({key:dN,frame:t}),t!=pN.ICON_FLAG?this.rankIcon.setWorldSize(46,30):this.rankIcon.setWorldSize(27,27),this.add(this.rankIcon);var n=e<=3?13:16;Phaser.Display.Align.In.Center(this.rankIcon,this.avatar,0,n)},n.updateRankIcon=function(e){var t=this.getRankIconFrame(e);this.rankIcon.setFrame(t),t!=pN.ICON_FLAG?this.rankIcon.setWorldSize(46,30):this.rankIcon.setWorldSize(27,27)},n.createRankText=function(e){this.rankText=this.scene.make.bitmapText({font:Rc.Z.PRIMARY.KEY,size:this.scene.fontSize(15),text:""+e,origin:{x:.5,y:.5}}),this.add(this.rankText),Phaser.Display.Align.In.Center(this.rankText,this.rankIcon,0,-2)},n.updateRankText=function(e){this.rankText.setText(""+e)},n.getShortName=function(e){var t=e.substring(0,7);return t.split(" ")[0]||t},n.createUsername=function(){this.username=this.scene.make.text({text:this.getShortName("FRIEND NAME"),style:{fontFamily:Rc.Z.FONT_FAMILY,fontSize:"15px",fontStyle:"bold"}}),this.username.setTint(10317116),this.username.setHighQuality(),Phaser.Display.Align.In.LeftCenter(this.username,this.avatar,-53),this.add(this.username)},n.updateUsername=function(){var e=this.payload.name;this.username.setText(this.getShortName(e))},n.createScore=function(){this.score=this.scene.add.container(),this.scoreText=this.scene.make.bitmapText({font:Rc.Z.PRIMARY.KEY,size:this.scene.fontSize(18),text:"132500",origin:{x:.5,y:.5}}),this.scoreText.setTint(6565e3);var e=this.scene.make.image({key:dN,frame:pN.ICON_CUP_MINI});e.setWorldSize(17,18),this.score.add([this.scoreText,e]);var t=-20;Phaser.Display.Align.In.LeftCenter(this.scoreText,e,t),this.add(this.score),t=10,Phaser.Display.Align.In.Center(this.score,this,t)},n.updateScore=function(){var e=this.payload.score;this.scoreText.setText(e)},n.createButton=function(){this.button=new jc.Z(this.scene,dN,pN.BUTTON_GREEN_MINOR_MINI,54,34.5),this.button.setName("ChallengeFriend");var e=this.scene.make.bitmapText({font:Rc.Z.PRIMARY.KEY,size:this.scene.fontSize(18),text:"PLAY"});Phaser.Display.Align.In.Center(e,this.button,0,-2),this.button.add(e),Phaser.Display.Align.In.RightCenter(this.button,this,-2),this.add(this.button),this.button.onClick=this.handleChallengeFriend},n.runShowPopUpAnimation=function(e,t){this.scene.tweens.killTweensOf(this),this.showPopUp=new uN({targets:[this],delay:e,duration:t,props:{y:{start:this.y+70,to:this.y}}}),this.showPopUp.play()},n.runShowItemAnimation=function(e,t){var n=this.getAll();this.scene.tweens.killTweensOf(n),this.showItems=new cN({targets:n,duration:t,delay:this.scene.tweens.stagger(50,{start:e+50}),props:{scale:{duration:1e3,getStart:function(e){return.8*e.scale},getEnd:function(e){return e.scale},ease:Phaser.Math.Easing.Elastic.Out,easeParams:[.1,.45]}}}),this.showItems.play()},n.runShowUpAnimation=function(e,t){void 0===e&&(e=0),void 0===t&&(t=300);var n=100*e;this.runShowPopUpAnimation(n,t),this.runShowItemAnimation(n,t)},t}(Phaser.GameObjects.Container),gN=fN;function mN(e,t){var n="undefined"!==typeof w()&&k()(e)||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){var n;if(!e)return;if("string"===typeof e)return vN(e,t);var i=A()(n=Object.prototype.toString.call(e)).call(n,8,-1);"Object"===i&&e.constructor&&(i=e.constructor.name);if("Map"===i||"Set"===i)return b()(e);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return vN(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var i=0;return function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function vN(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var yN=function(e){function t(t){var n;(n=e.call(this,t)||this).scene=void 0,n.currentPlayerId=void 0,n.scroller=void 0,n.scene=t;var i=n.scene.player;return n.currentPlayerId=i.getPlayerId(),n.createReuseScroller(),n.scene.add.existing((0,As.Z)(n)),n}(0,o.Z)(t,e);var n=t.prototype;return n.createReuseScroller=function(){this.scroller=new aL.Z(this.scene,{classType:gN,listConfigs:[],width:280,height:310,padding:10,marginTop:10,marginBottom:10}),this.scene.renderer instanceof Phaser.Renderer.WebGL.WebGLRenderer&&this.scroller.createBound(Gn.Z.DEFAULT.KEY,Gn.Z.DEFAULT.FRAME.BLANK,40,16643027),this.scroller.createMask(),this.scroller.setPosition(0,25),this.add(this.scroller)},n.updateData=function(e){var t=ta()(e)||[];if(t.length<1)return this.scene.isSwitchable=!0,void this.scene.board.showMessage(!0,"Leaderboard is empty!");for(var n,i=[],a=mN(ia()(t).call(t,(function(e,t){return+t.score-+e.score})));!(n=a()).done;){var s=n.value,r=s.playerId,o=s.photo,c=s.score,h=s.name,u=s.rank;if(r){var l=this.currentPlayerId===r,d={playerId:r,photo:o,name:h,rank:u,score:c,scoreRight:this.scene.tabId===Bs,useChallenge:!l&&this.scene.tabId===Ms,isHighlight:l};i.push(d)}}this.scroller.updateConfig(i),this.showLeaders()},n.removeLeaders=function(){this.scroller.updateConfig([])},n.getLeaders=function(){return this.scroller.getChildren()},n.showLeaders=function(){var e=this,t=this.getLeaders();if(t.length<1)return this.scene.isSwitchable=!0,void this.scene.board.showMessage(!0,"Leaderboard is empty!");for(var n=Math.min(t.length,6),i=0;i<n;i++){var a=t[i];a&&(a.setVisible(!0),a.runShowUpAnimation(i,300))}var s=300+100*n+250;this.scene.time.delayedCall(s,(function(){e.scene.isSwitchable=!0,e.scroller.setEnable(!0)}))},t}(Phaser.GameObjects.Container),TN=yN,CN=Gn.Z.DEFAULT,EN=CN.KEY,AN=CN.FRAME,SN=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n.tabWorld=void 0,n.tabFriends=void 0,n.scene=t,n.createTabFriends(),n.createTabWorld(),n}(0,o.Z)(t,e);var n=t.prototype;return n.selectTabFriends=function(){this.tabFriends.button.setFrame(AN.LEADERBOARD_TAB_ON),this.tabWorld.button.setFrame(AN.LEADERBOARD_TAB_OFF)},n.selectTabWorld=function(){this.tabFriends.button.setFrame(AN.LEADERBOARD_TAB_OFF),this.tabWorld.button.setFrame(AN.LEADERBOARD_TAB_ON)},n.createTabFriends=function(){this.tabFriends=new jc.Z(this.scene,EN,AN.LEADERBOARD_TAB_OFF),this.tabFriends.button.setSize(85,33).setDisplaySize(85,33),this.tabFriends.setName("FriendsTab");var e=this.scene.make.bitmapText({font:Rc.Z.PRIMARY.KEY,size:9,text:"FRIENDS",origin:{x:.5,y:.55}});this.tabFriends.add(e),Phaser.Display.Align.In.Center(this.tabFriends,this,-55),this.add(this.tabFriends)},n.createTabWorld=function(){this.tabWorld=new jc.Z(this.scene,EN,AN.LEADERBOARD_TAB_OFF),this.tabWorld.button.setSize(85,33).setDisplaySize(85,33),this.tabWorld.setName("WorldTab");var e=this.scene.make.bitmapText({font:Rc.Z.PRIMARY.KEY,size:9,text:"WORLD",origin:{x:.5,y:.55}});this.tabWorld.add(e),Phaser.Display.Align.In.Center(this.tabWorld,this,55),this.add(this.tabWorld)},t}(Phaser.GameObjects.Container),bN=SN,IN=Gn.Z.DEFAULT,wN=IN.KEY,PN=IN.FRAME,kN=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n.background=void 0,n.tabs=void 0,n.leaders=void 0,n.loading=void 0,n.message=void 0,n.messageAnimation=void 0,n.scene=t,n.setSize(310,430),n.createBackground(),n.createLoading(),n.createMessage(),n.createContents(),n.createAnimation(),n.scene.add.existing((0,As.Z)(n)),n}(0,o.Z)(t,e);var n=t.prototype;return n.showLoading=function(e){this.loading.setVisible(e),this.showMessage(!1)},n.showMessage=function(e,t){this.message.setVisible(e),t&&(this.message.setText(t),this.messageAnimation.play())},n.createBackground=function(){this.background=new Th(this.scene,0,0,310,430),this.add(this.background)},n.createLoading=function(){this.loading=new xs(this.scene),this.loading.setTint(12237498),this.loading.setWorldSize(113,113),this.add(this.loading),Phaser.Display.Align.In.Center(this.loading,this.background)},n.createMessage=function(){this.message=this.scene.make.bitmapText({font:Rc.Z.PRIMARY.KEY,size:this.scene.fontSize(18),origin:{x:.5,y:.5}}),this.message.setTint(10317116),this.add(this.message),Phaser.Display.Align.In.Center(this.message,this.background)},n.createContents=function(){this.createLeaders(),this.createTitle(),this.createTabs()},n.createLeaders=function(){this.leaders=new TN(this.scene),this.add(this.leaders),Phaser.Display.Align.In.Center(this.leaders,this.background,0,0)},n.createTitle=function(){var e=this.scene.add.container(),t=this.scene.make.image({key:wN,frame:PN.RIBBON_SHORT});t.setWorldSize(271,81);var n=this.scene.make.bitmapText({font:Rc.Z.PRIMARY.KEY,size:this.scene.fontSize(30),text:"Leaderboards"});Phaser.Display.Align.In.Center(n,t,0,-10),e.add([t,n]),Phaser.Display.Align.In.TopCenter(e,this.background,0,5),this.add(e)},n.createTabs=function(){this.tabs=new bN(this.scene),this.add(this.tabs),Phaser.Display.Align.In.TopCenter(this.tabs,this.background,0,-55)},n.createAnimation=function(){this.messageAnimation=new rN.Z({targets:[this.message],duration:60,repeat:2})},t}(Phaser.GameObjects.Container),_N=kN,xN=GameCore.Configs.LeadersBoard,ON=function(e){function t(){for(var t,n,i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];return(n=e.call.apply(e,x()(t=[this]).call(t,a))||this).board=void 0,n.footerBar=void 0,n.tabId=void 0,n.offset=void 0,n.isRequesting=void 0,n.isSwitchable=void 0,n.run=function(){n.isRequesting=!1;var e=[{selector:mr,callback:function(e){if(n.isRequesting=e,n.board.showLoading(e),!1===e){var t=n.game.storage.getState(),i=gr(t);n.board.leaders.updateData(i)}}}];n.handleStateChange(e),n.selectFriendTab()},n.handleSelectFriendTab=function(){n.isRequesting||n.isSwitchable&&(n.isSwitchable=!1,n.selectFriendTab())},n.handleSelectWorldTab=function(){n.isRequesting||n.isSwitchable&&(n.isSwitchable=!1,n.selectWorldTab())},n.handlePlayWithFriend=function(){n.storage.dispatch(oc())},n.handleHomeClick=function(){n.scene.switch(cs.C.DASHBOARD_SCENE)},n.handleShareLeaderboard=function(){n.storage.dispatch(Ic())},n}(0,o.Z)(t,e);var n=t.prototype;return n.preload=function(){this.events.on("wake",this.run),this.events.on("create",this.run)},n.create=function(){e.prototype.create.call(this),this.gameZone.setPosition(0,0),this.createBackground(Ka.Z.BACKGROUND.KEY,"0"),this.scene.bringToTop(),this.createBoard(),this.createFooterBar()},n.selectFriendTab=function(){this.tabId=Ms,this.offset=0,this.board.showLoading(!0),this.board.leaders.removeLeaders(),this.board.tabs.selectTabFriends(),this.storage.dispatch(lr(xN.LeaderboardId,Ms,xN.Limit,this.offset))},n.selectWorldTab=function(){this.tabId=Bs,this.offset=0,this.board.showLoading(!0),this.board.leaders.removeLeaders(),this.board.tabs.selectTabWorld(),this.storage.dispatch(lr(xN.LeaderboardId,Bs,xN.Limit,this.offset))},n.loadMoreTabFriend=function(){this.isRequesting||(this.offset+=xN.Limit,this.storage.dispatch(lr(xN.LeaderboardId,Ms,xN.Limit,this.offset)))},n.loadMoreTabWorld=function(){this.isRequesting||(this.offset+=xN.Limit,this.storage.dispatch(lr(xN.LeaderboardId,Bs,xN.Limit,this.offset)))},n.createBoard=function(){this.board=new _N(this),Phaser.Display.Align.In.Center(this.board,this.gameZone,0,-20),this.board.tabs.tabWorld.onClick=this.handleSelectWorldTab,this.board.tabs.tabFriends.onClick=this.handleSelectFriendTab},n.createFooterBar=function(){this.footerBar=new sN(this),Phaser.Display.Align.In.BottomCenter(this.footerBar,this.gameZone,0,-50),this.footerBar.homeButton.onClick=this.handleHomeClick,this.footerBar.playButton.onClick=this.handlePlayWithFriend,this.footerBar.shareButton.onClick=this.handleShareLeaderboard},t}(Ts.Z);var LN,RN,DN=ON,BN=function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).name="LoadResourceFail",i.message=t||"Load resource fail",i.payload=n,i}return(0,o.Z)(t,e),t}((0,W.Z)(Error)),MN=n(417),NN=new(n.n(MN)()),GN=[{id:"pass-levels",title:"Pass 10 Levels",require:{level:10},reward:{diamond:100}},{id:"collect-diamonds",title:"Collect 300 diamonds",require:{diamond:300},reward:{diamond:100}},{id:"invite-friends",title:"Invite 2 friends",require:{friend:2},reward:{diamond:200}},{id:"reach-score",title:"Reach Total Scores",require:{score:1e5},reward:{diamond:200}}],FN=function(){var e=(0,r.Z)(l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",GN);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ZN={PASS_LEVELS:{ID:"pass-levels",EVENTS:{PASS_LEVEL:"pass-level"}},COLLECT_DIAMONDS:{ID:"collect-diamonds",EVENTS:{COLLECT_DIAMONDS:"collect-diamonds"}},INVITE_FRIENDS:{ID:"invite-friends",EVENTS:{INVITED_FRIEND:"INVITED_FRIEND"}},REACH_SCORE:{ID:"reach-score",EVENTS:{ADD_SCORE:"add-score"}},EVENTS:{TASKS_RESET:"tasks-reset",NOTICE_UPDATE:"notice-update"}},UN=(0,pe.P1)([function(e){var t;return null==(t=e[ma])?void 0:t.tasks}],(function(e){return e})),zN=(0,pe.P1)([function(e){var t;return null==(t=e[ma])?void 0:t.process}],(function(e){return e})),HN=(0,pe.P1)([function(e){var t;return null==(t=e[ma])?void 0:t.isRequesting}],(function(e){return e})),WN=((0,pe.P1)([function(e){var t;return null==(t=e[ma])?void 0:t.isNotice}],(function(e){return e})),GameCore.Configs.DailyTasks),YN=function(e){return function(t){t({type:ya,payload:{tasks:e}});var n=window.game.player.getCustomData("dailyTasks")||{},i=n.startedTime,a=void 0===i?0:i,s=n.logTasks,r=void 0===s?{}:s;t((Date.now()-a)/1e3>WN.Duration?KN(e):VN(r))}},KN=function(e){return function(t){var n={};e.forEach((function(e){var t=e.id,i=e.require;n[t]={},ae()(i).forEach((function(e){var i;n[t]=((i={})[e]=0,i.rewarded=!1,i)}))})),window.game.player.setCustomData("dailyTasks",{logTasks:n,startedTime:Date.now()}),t(VN(n)),NN.emit(ZN.EVENTS.TASKS_RESET)}},VN=function(e){return{type:Ta,payload:{process:e}}},jN=function(){var e=(window.game.player.getCustomData("dailyTasks")||{}).logTasks;return GameCore.Utils.Json.clone(e)},JN=function(){function e(e,t){var n=this;this.game=void 0,this.id=void 0,this.taskData=void 0,this.requireTypes=void 0,this.process=function(e){var t,i=e.type,a=e.value;if(!(a<1)&&(-1!==En()(t=n.requireTypes).call(t,i)&&!n.isPassRequiredTarget(i)&&n.processMore(e))){i=e.type,a=e.value;var s=n.getCorrectValue(i,a);n.game.storage.dispatch(function(e,t,n){return function(i){var a=jN();if(GameCore.Utils.Valid.isObject(a)){var s=a;GameCore.Utils.Object.hasOwn(s,e)&&(s[e].rewarded||(s[e][t]+=n,window.game.player.setCustomData("dailyTasks",{logTasks:s}),i({type:Ca,payload:{id:e,type:t,value:n}})))}}}(n.id,i,s)),n.isTaskFinished(i)&&n.game.storage.dispatch(function(e){return function(t){t({type:Ea,payload:{id:e}}),NN.emit(ZN.EVENTS.NOTICE_UPDATE)}}(n.id))}},this.game=e,this.id=t,this.init()}var t=e.prototype;return t.init=function(){var e=this,t=this.game.storage.getState(),n=UN(t)||[];if(!((null==n?void 0:n.length)<1)){var i=null==n?void 0:D()(n).call(n,(function(t){return t.id===e.id}));i&&(this.taskData=i,this.requireTypes=ae()(this.taskData.require),this.initEvents())}},t.getDataByType=function(e){var t=this.game.storage.getState(),n=zN(t),i={value:0,target:0};if(!n)return i;if(!GameCore.Utils.Object.hasOwn(n,this.taskData.id))return i;var a=n[this.taskData.id];if(GameCore.Utils.Valid.isObject(a)&&GameCore.Utils.Object.hasOwn(a,e)){var s=a[e];"number"===typeof s&&(i.value=s)}return i.target=this.taskData.require[e]||0,i},t.getCorrectValue=function(e,t){var n=this.getDataByType(e),i=n.value,a=n.target,s=t;return i+t>a&&(s=a-i),Math.round(s)},t.isPassRequiredTarget=function(e){var t=this.getDataByType(e);return t.value>=t.target},t.isTaskFinished=function(e){var t=this.getDataByType(e);return t.value>=t.target},e}(),XN=ZN.COLLECT_DIAMONDS,qN=XN.ID,QN=XN.EVENTS,$N=function(e){function t(t){return e.call(this,t,qN)||this}(0,o.Z)(t,e);var n=t.prototype;return n.initEvents=function(){NN.off(QN.COLLECT_DIAMONDS,this.process),NN.on(QN.COLLECT_DIAMONDS,this.process)},n.processMore=function(){return!0},t}(JN),eG=ZN.INVITE_FRIENDS,tG=eG.ID,nG=eG.EVENTS,iG=function(e){function t(t){var n;return(n=e.call(this,t,tG)||this).invitedFriends=void 0,n.resetData=function(){n.invitedFriends=[]},n.resetData(),n}(0,o.Z)(t,e);var n=t.prototype;return n.initEvents=function(){var e=this;NN.off(nG.INVITED_FRIEND,this.process),NN.on(nG.INVITED_FRIEND,this.process),NN.on(ZN.EVENTS.TASKS_RESET,(function(){e.resetData()}))},n.processMore=function(e){var t,n=e.opponentId;return!!n&&(-1===En()(t=this.invitedFriends).call(t,n)&&(this.invitedFriends.push(n),!0))},t}(JN),aG=ZN.PASS_LEVELS,sG=aG.ID,rG=aG.EVENTS,oG=function(e){function t(t){return e.call(this,t,sG)||this}(0,o.Z)(t,e);var n=t.prototype;return n.initEvents=function(){NN.off(rG.PASS_LEVEL,this.process),NN.on(rG.PASS_LEVEL,this.process)},n.processMore=function(){return!0},t}(JN),cG=ZN.REACH_SCORE,hG=cG.ID,uG=cG.EVENTS,lG=function(e){function t(t){var n;return(n=e.call(this,t,hG)||this).totalScore=void 0,n.lastUpdate=void 0,n.totalScore=0,n.lastUpdate=Date.now(),n}(0,o.Z)(t,e);var n=t.prototype;return n.initEvents=function(){NN.off(uG.ADD_SCORE,this.process),NN.on(uG.ADD_SCORE,this.process)},n.processMore=function(e){var t=e.value,n=Date.now();return n-this.lastUpdate<3e3?(this.totalScore+=t,!1):(e.value+=this.totalScore,this.totalScore=0,this.lastUpdate=n,!0)},t}(JN),dG=function(){function e(e){var t=this;this.game=void 0,this.eventsListener=void 0,this.init=(0,r.Z)(l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.eventsListener={},e.next=3,t.initData();case 3:t.initEvents();case 4:case"end":return e.stop()}}),e)}))),this.initData=(0,r.Z)(l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.game.storage.dispatch(function(){var e=(0,r.Z)(l().mark((function e(t,n){var i,a;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=n(),!HN(i)){e.next=4;break}return e.abrupt("return");case 4:return t({type:va,payload:{}}),e.next=7,FN();case 7:a=e.sent,t(YN(a));case 9:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}());case 2:case"end":return e.stop()}}),e)}))),this.game=e,this.init()}var t=e.prototype;return t.getEventListener=function(e){return this.eventsListener[e]},t.initEvents=function(){this.eventsListener[ZN.PASS_LEVELS.ID]=new oG(this.game),this.eventsListener[ZN.REACH_SCORE.ID]=new lG(this.game),this.eventsListener[ZN.INVITE_FRIENDS.ID]=new iG(this.game),this.eventsListener[ZN.COLLECT_DIAMONDS.ID]=new $N(this.game)},e}(),pG=dG,fG=[{name:"collect-red-gems",id:"collect-gems",require:{red:5},reward:50},{name:"collect-blue-gems",id:"collect-gems",require:{blue:5},reward:50},{name:"collect-pink-gems",id:"collect-gems",require:{pink:5},reward:50},{name:"collect-green-gems",id:"collect-gems",require:{green:5},reward:50},{name:"collect-yellow-gems",id:"collect-gems",require:{yellow:5},reward:50},{name:"collect-red-blue-gems",id:"collect-gems",require:{red:5,blue:5},reward:120},{name:"collect-red-pink-gems",id:"collect-gems",require:{red:5,pink:5},reward:120},{name:"collect-red-green-gems",id:"collect-gems",require:{red:5,green:5},reward:120},{name:"collect-red-yellow-gems",id:"collect-gems",require:{red:5,yellow:5},reward:120},{name:"collect-blue-pink-gems",id:"collect-gems",require:{blue:5,pink:5},reward:120},{name:"collect-blue-green-gems",id:"collect-gems",require:{blue:5,green:5},reward:120},{name:"collect-blue-yellow-gems",id:"collect-gems",require:{blue:5,yellow:5},reward:120},{name:"collect-pink-green-gems",id:"collect-gems",require:{pink:5,green:5},reward:120},{name:"collect-pink-yellow-gems",id:"collect-gems",require:{pink:5,yellow:5},reward:120},{name:"collect-green-yellow-gems",id:"collect-gems",require:{green:5,yellow:5},reward:120},{name:"collect-red-blue-pink-gems",id:"collect-gems",require:{red:5,blue:5,pink:5},reward:210},{name:"collect-red-blue-green-gems",id:"collect-gems",require:{red:5,blue:5,green:5},reward:210},{name:"collect-red-blue-yellow-gems",id:"collect-gems",require:{red:5,blue:5,yellow:5},reward:210},{name:"collect-red-pink-green-gems",id:"collect-gems",require:{red:5,pink:5,green:5},reward:210},{name:"collect-red-pink-yellow-gems",id:"collect-gems",require:{red:5,pink:5,yellow:5},reward:210},{name:"collect-red-green-yellow-gems",id:"collect-gems",require:{red:5,green:5,yellow:5},reward:210},{name:"collect-blue-pink-green-gems",id:"collect-gems",require:{blue:5,pink:5,green:5},reward:210},{name:"collect-blue-pink-yellow-gems",id:"collect-gems",require:{blue:5,pink:5,yellow:5},reward:210},{name:"collect-blue-green-yellow-gems",id:"collect-gems",require:{blue:5,green:5,yellow:5},reward:210},{name:"collect-pink-green-yellow-gems",id:"collect-gems",require:{pink:5,green:5,yellow:5},reward:210}],gG=function(){var e=(0,r.Z)(l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fG);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),mG=(0,pe.P1)([function(e){var t;return null==(t=e[ha])?void 0:t.missions}],(function(e){return e})),vG=(0,pe.P1)([function(e){var t;return null==(t=e[ha])?void 0:t.isRequesting}],(function(e){return e})),yG=((0,pe.P1)([mG,function(e,t){return t.name}],(function(e,t){return e?"string"!==typeof t?null:GameCore.Utils.Object.hasOwn(e,t)?e[t]:null:null})),function(e){return{type:la,payload:{missions:e}}}),TG=Gn.Z.GAMEPLAY.FRAME,CG=TG.TILE_RED,EG=TG.TILE_BLUE,AG=TG.TILE_PINK,SG=TG.TILE_GREEN,bG=TG.TILE_YELLOW,IG=TG.TILE_FREEZE,wG=TG.TILE_COLORFUL,PG=TG.TILE_COLOR_CHANGE,kG={RED:"red",BLUE:"blue",PINK:"pink",GREEN:"green",YELLOW:"yellow"},_G={FREEZE:"freeze",COLORFUL:"colorful",COLOR_CHANGE:"color_change"},xG=kG.RED,OG=kG.BLUE,LG=kG.PINK,RG=kG.GREEN,DG=kG.YELLOW,BG=_G.FREEZE,MG=_G.COLORFUL,NG=_G.COLOR_CHANGE,GG=((LN={})[xG]="r",LN[OG]="b",LN[LG]="p",LN[RG]="g",LN[DG]="y",LN[BG]="f",LN[MG]="c",LN[NG]="m",LN),FG={SIZE:37,STATUS:{READY:"ready",MOVING:"moving",CAPTURED:"captured"},FRAME:(RN={},RN[xG]=CG,RN[OG]=EG,RN[LG]=AG,RN[RG]=SG,RN[DG]=bG,RN[BG]=IG,RN[MG]=wG,RN[NG]=PG,RN),SETS:{SET_3:"set_3",SET_4:"set_4",SET_5:"set_5",SET_6:"set_6",SET_7:"set_7",SET_8:"set_8",SET_9:"set_9"},COLORS:kG,SPECIALS:_G,HASH:GG},ZG={GIFT:{ID:"ItemGift"},PAINT:{ID:"ItemPaint"},HAMMER:{ID:"ItemHammer"},SHUFFLE:{ID:"ItemShuffle"},CHANGE_COLOR:{ID:"ItemChangeColor"}},UG={TYPES:{COLLECT_GEMS:"collect-gems",USE_ITEM:"use-item",COMBO:"combo"},EVENTS:{MISSION_START:"mission-start",MISSION_UPDATE:"mission-update",MISSION_FAILED:"mission-failed",MISSION_COMPLETED:"mission-completed"},OBJECTS:(0,s.Z)({},FG.COLORS,FG.SPECIALS,{PAINT:ZG.PAINT.ID,HAMMER:ZG.HAMMER.ID,SHUFFLE:ZG.SHUFFLE.ID})},zG=(0,pe.P1)([function(e){var t;return null==(t=e[ha])?void 0:t.mission}],(function(e){return e})),HG=((0,pe.P1)([zG],(function(e){return e?e.name:null})),function(){function e(e,t,n){var i=this;this.game=void 0,this.id=void 0,this.name=void 0,this.reward=void 0,this.process=function(e){var t=e.id,n=e.type,a=e.value;a<1||i.id===t&&i.isTypeRequired(n)&&i.processMore(e)&&(i.game.storage.dispatch(function(e,t,n){return{type:da,payload:{name:e,type:t,value:n}}}(i.name,n,a)),i.isMissionComplete()&&(NN.emit(UG.EVENTS.MISSION_COMPLETED,{name:i.name,reward:i.reward}),i.game.storage.dispatch(function(e){return{type:pa,payload:{name:e}}}(i.name))))},this.id=t,this.name=n,this.game=e}var t=e.prototype;return t.start=function(){var e=this.game.storage.getState(),t=zG(e);t&&t.name===this.name&&(this.reward=t.reward,this.initEvents())},t.getMissionData=function(){var e=this.game.storage.getState(),t=zG(e);return t?t.name!==this.name?null:t:null},t.getDataByType=function(e){var t=this.getMissionData();if(!t)return null;var n=t.require[e];return{value:t.process[e],target:n}},t.isTypeRequired=function(e){var t=this.getDataByType(e);return!!t&&t.target>0},t.isMissionComplete=function(){var e=this.getMissionData();if(!e)return!0;var t=e.require,n=e.process,i=!0;return ae()(t).forEach((function(e){if(i){var a=t[e];n[e]<a&&(i=!1)}})),i},e}()),WG=HG,YG=UG.EVENTS,KG=UG.TYPES,VG=function(e){function t(t,n){return e.call(this,t,KG.COLLECT_GEMS,n)||this}(0,o.Z)(t,e);var n=t.prototype;return n.initEvents=function(){NN.off(YG.MISSION_UPDATE,this.process),NN.on(YG.MISSION_UPDATE,this.process)},n.processMore=function(){return!0},t}(WG),jG=UG.EVENTS,JG=UG.TYPES,XG=function(e){function t(t,n){return e.call(this,t,JG.COMBO,n)||this}(0,o.Z)(t,e);var n=t.prototype;return n.initEvents=function(){NN.off(jG.MISSION_UPDATE,this.process),NN.on(jG.MISSION_UPDATE,this.process)},n.processMore=function(e){var t=this.getMissionData();if(!t)return!1;var n=e.type;return e.value>=t.require[n]},t}(WG),qG=UG.EVENTS,QG=UG.TYPES,$G=function(e){function t(t,n){return e.call(this,t,QG.USE_ITEM,n)||this}(0,o.Z)(t,e);var n=t.prototype;return n.initEvents=function(){NN.off(qG.MISSION_UPDATE,this.process),NN.on(qG.MISSION_UPDATE,this.process)},n.processMore=function(e){return!0},t}(WG),eF=function(){function e(e){var t=this;this.game=void 0,this.listener=void 0,this.init=(0,r.Z)(l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.initData();case 2:t.initListeners(),t.initEvents();case 4:case"end":return e.stop()}}),e)}))),this.initData=(0,r.Z)(l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.game.storage.dispatch(function(){var e=(0,r.Z)(l().mark((function e(t,n){var i,a;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=n(),!vG(i)){e.next=4;break}return e.abrupt("return");case 4:return t({type:ua,payload:{}}),e.next=7,gG();case 7:a=e.sent,t(yG(a));case 9:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}());case 2:case"end":return e.stop()}}),e)}))),this.startListener=function(e){t.listener[e]&&t.listener[e].start()},this.game=e,this.init()}var t=e.prototype;return t.initListeners=function(){var e=this;this.listener={};var t=this.game.storage.getState(),n=mG(t);n&&ae()(n).forEach((function(t){switch(n[t].id){case UG.TYPES.COLLECT_GEMS:e.listener[t]=new VG(e.game,t);break;case UG.TYPES.COMBO:e.listener[t]=new XG(e.game,t);break;case UG.TYPES.USE_ITEM:e.listener[t]=new $G(e.game,t)}}))},t.initEvents=function(){NN.off(UG.EVENTS.MISSION_START,this.startListener),NN.on(UG.EVENTS.MISSION_START,this.startListener)},e}(),tF=eF,nF=function(e){try{var t=Qa(e),n=window.game.player,i=t.entryPointData||{},a=i.playerId,s=i.playerName,r=i.playerPhoto;return n.getPlayer().playerId===a?Va:new Dt.Z(a,s,r).toObject()}catch(o){return Va}},iF=function(){return function(e){try{window.game.facebook.getTournamentAsync().then((function(t){e(ac(t))})).catch((function(e){}))}catch(t){}}},aF=function(){return function(e,t){try{var n=t(),i=Qa(n),a=window.game.player,s=a.getPlayer(),r=i.contextId,o=i.entryPointData||{},c=o.playerId,h=o.gameType,u=void 0===h?"klondike":h,l=s.playerId===c,d=nF(n);l||a.updateConnectedPlayers([d]);var p=d.playerId;e(oc(r,p,!0,u))}catch(f){throw new Error("processInviteMode: "+f)}}},sF=function(){return function(e,t){try{var n=t(),i=Qa(n),a=window.game.player.getPlayer(),s=i.entryPointData||{},r=s.matchId,o=s.opponentId,c=s.playerId,h=s.gameType,u=void 0===h?"klondike":h,l=a.playerId===c;e(hc(r,l?o:c,u))}catch(d){throw new Error("processChallengeFriendMode: "+d)}}},rF=function(){return function(e,t){try{var n=t(),i=Qa(n).entryPointData||{},a=i.playerId,r=i.playerScore;e(Vo(a,{score:r,level:0}));var o=nF(n),c=(0,s.Z)({},o,{score:r});e(cc(c))}catch(h){throw new Error("processMatchingGroupMode: "+h)}}},oF=function(){return function(e){try{e(sc())}catch(t){throw new Error("processNewUserMode: "+t)}}},cF=n(649),hF={BACKGROUND:{KEY:"background",FILE:"./assets/music/bg_music.mp3"},EFFECTS:{KEY:"effects",FILE:"./assets/sounds/effects.mp3",JSON:"./assets/sounds/effects.json",PATH:"./assets/sounds/"}},uF={ONE_SUIT:{GROUP1:{KEY:"difficulty-1-one-suit",PATH:"assets/levels/spider/one-suit/levels1.txt",DECOMPRESSED_DATA:[]},GROUP2:{KEY:"difficulty-2-one-suit",PATH:"assets/levels/spider/one-suit/levels2.txt",DECOMPRESSED_DATA:[]},GROUP3:{KEY:"difficulty-3-one-suit",PATH:"assets/levels/spider/one-suit/levels3.txt",DECOMPRESSED_DATA:[]},GROUP4:{KEY:"difficulty-4-one-suit",PATH:"assets/levels/spider/one-suit/levels4.txt",DECOMPRESSED_DATA:[]},GROUP5:{KEY:"difficulty-5-one-suit",PATH:"assets/levels/spider/one-suit/levels5.txt",DECOMPRESSED_DATA:[]},GROUP6:{KEY:"difficulty-6-one-suit",PATH:"assets/levels/spider/one-suit/levels6.txt",DECOMPRESSED_DATA:[]},GROUP7:{KEY:"difficulty-7-one-suit",PATH:"assets/levels/spider/one-suit/levels7.txt",DECOMPRESSED_DATA:[]},GROUP8:{KEY:"difficulty-8-one-suit",PATH:"assets/levels/spider/one-suit/levels8.txt",DECOMPRESSED_DATA:[]},GROUP9:{KEY:"difficulty-9-one-suit",PATH:"assets/levels/spider/one-suit/levels9.txt",DECOMPRESSED_DATA:[]}},TWO_SUIT:{GROUP1:{KEY:"difficulty-1-two-suit",PATH:"assets/levels/spider/two-suit/levels1.txt",DECOMPRESSED_DATA:[]},GROUP2:{KEY:"difficulty-2-two-suit",PATH:"assets/levels/spider/two-suit/levels2.txt",DECOMPRESSED_DATA:[]},GROUP3:{KEY:"difficulty-3-two-suit",PATH:"assets/levels/spider/two-suit/levels3.txt",DECOMPRESSED_DATA:[]},GROUP4:{KEY:"difficulty-4-two-suit",PATH:"assets/levels/spider/two-suit/levels4.txt",DECOMPRESSED_DATA:[]},GROUP5:{KEY:"difficulty-5-two-suit",PATH:"assets/levels/spider/two-suit/levels5.txt",DECOMPRESSED_DATA:[]},GROUP6:{KEY:"difficulty-6-two-suit",PATH:"assets/levels/spider/two-suit/levels6.txt",DECOMPRESSED_DATA:[]},GROUP7:{KEY:"difficulty-7-two-suit",PATH:"assets/levels/spider/two-suit/levels7.txt",DECOMPRESSED_DATA:[]},GROUP8:{KEY:"difficulty-8-two-suit",PATH:"assets/levels/spider/two-suit/levels8.txt",DECOMPRESSED_DATA:[]},GROUP9:{KEY:"difficulty-9-two-suit",PATH:"assets/levels/spider/two-suit/levels9.txt",DECOMPRESSED_DATA:[]}},FOUR_SUIT:{GROUP1:{KEY:"difficulty-1-four-suit",PATH:"assets/levels/spider/four-suit/levels1.txt",DECOMPRESSED_DATA:[]},GROUP2:{KEY:"difficulty-2-four-suit",PATH:"assets/levels/spider/four-suit/levels2.txt",DECOMPRESSED_DATA:[]},GROUP3:{KEY:"difficulty-3-four-suit",PATH:"assets/levels/spider/four-suit/levels3.txt",DECOMPRESSED_DATA:[]},GROUP4:{KEY:"difficulty-4-four-suit",PATH:"assets/levels/spider/four-suit/levels4.txt",DECOMPRESSED_DATA:[]},GROUP5:{KEY:"difficulty-5-four-suit",PATH:"assets/levels/spider/four-suit/levels5.txt",DECOMPRESSED_DATA:[]},GROUP6:{KEY:"difficulty-6-four-suit",PATH:"assets/levels/spider/four-suit/levels6.txt",DECOMPRESSED_DATA:[]},GROUP7:{KEY:"difficulty-7-four-suit",PATH:"assets/levels/spider/four-suit/levels7.txt",DECOMPRESSED_DATA:[]},GROUP8:{KEY:"difficulty-8-four-suit",PATH:"assets/levels/spider/four-suit/levels8.txt",DECOMPRESSED_DATA:[]},GROUP9:{KEY:"difficulty-9-four-suit",PATH:"assets/levels/spider/four-suit/levels9.txt",DECOMPRESSED_DATA:[]}}},lF=n(632),dF="How about diving into the game for a relaxing experience?",pF=GameCore.Configs.Notification.DailyNotificationMessages,fF=void 0===pF?{}:pF,gF=function(){function e(){}e.sendNewUserNotification=function(){var e=(0,r.Z)(l().mark((function e(){var t;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.getInstance(),e.abrupt("return",t.sendNewUserNotificationInstance());case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),e.sendDailyNotification=function(){var e=(0,r.Z)(l().mark((function e(){var t;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.getInstance(),e.abrupt("return",t.sendDailyNotificationInstance());case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),e.sendTestDailyNotification=function(){var e=(0,r.Z)(l().mark((function e(t){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.getInstance();case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),e.getInstance=function(){return this._instance||(this._instance=new e),this._instance};var t=e.prototype;return t.sendNewUserNotificationInstance=function(){var e=(0,r.Z)(l().mark((function e(){var t,n,i,a,s,r;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=window.game,n=t.player,i=t.facebook,a=t.rollbar,e.prev=1,n.getPlayerIsNew()){e.next=5;break}return e.abrupt("return");case 5:if(n.getPlayerASID()){e.next=8;break}return e.abrupt("return");case 8:return e.next=10,FBInstant.player.getDataAsync(["isNotificationFirstSent"]);case 10:if(e.t0=e.sent,e.t0){e.next=13;break}e.t0={};case 13:if(s=e.t0,!0!==s.isNotificationFirstSent){e.next=17;break}return e.abrupt("return");case 17:return r={message:dF,delayTime:14400,type:lF.Z.NEW_USER_NOTIFICATION},e.next=20,i.sendNotificationAsync(r);case 20:FBInstant.player.setDataAsync({isNotificationFirstSent:!0}),e.next=26;break;case 23:e.prev=23,e.t1=e.catch(1),a.sendException(e.t1);case 26:case"end":return e.stop()}}),e,null,[[1,23]])})));return function(){return e.apply(this,arguments)}}(),t.sendDailyNotificationInstance=function(){var e=(0,r.Z)(l().mark((function e(){var t,n,i;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=window.game.rollbar,e.prev=1,n=new Date,i=n.getDay(),e.t0=i,e.next=0===e.t0?7:1===e.t0?10:2===e.t0?13:3===e.t0?16:4===e.t0?19:22;break;case 7:return e.next=9,this.sendMondayNotification();case 9:return e.abrupt("break",22);case 10:return e.next=12,this.sendTuesdayNotification();case 12:return e.abrupt("break",22);case 13:return e.next=15,this.sendWednesdayNotification();case 15:return e.abrupt("break",22);case 16:return e.next=18,this.sendThursdayNotification();case 18:return e.abrupt("break",22);case 19:return e.next=21,this.sendFridayNotification();case 21:return e.abrupt("break",22);case 22:return e.next=24,this.sendSaturdayNotification();case 24:return e.next=26,this.sendSundayNotification();case 26:e.next=31;break;case 28:e.prev=28,e.t1=e.catch(1),t.sendException(e.t1);case 31:case"end":return e.stop()}}),e,this,[[1,28]])})));return function(){return e.apply(this,arguments)}}(),t.sendMondayNotification=function(){var e=(0,r.Z)(l().mark((function e(){var t,n,i,a,s;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=window.game,n=t.facebook,i=t.rollbar,e.prev=1,s={message:null!=(a=fF.MONDAY)?a:dF,delayTime:86400,type:lF.Z.MONDAY_NOTIFICATION},e.next=5,n.sendNotificationAsync(s);case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),i.sendException(e.t0);case 10:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(){return e.apply(this,arguments)}}(),t.sendTuesdayNotification=function(){var e=(0,r.Z)(l().mark((function e(){var t,n,i,a,s;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=window.game,n=t.facebook,i=t.rollbar,e.prev=1,s={message:null!=(a=fF.TUESDAY)?a:dF,delayTime:86400,type:lF.Z.TUESDAY_NOTIFICATION},e.next=5,n.sendNotificationAsync(s);case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),i.sendException(e.t0);case 10:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(){return e.apply(this,arguments)}}(),t.sendWednesdayNotification=function(){var e=(0,r.Z)(l().mark((function e(){var t,n,i,a,s;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=window.game,n=t.facebook,i=t.rollbar,e.prev=1,s={message:null!=(a=fF.WEDNESDAY)?a:dF,delayTime:86400,type:lF.Z.WEDNESDAY_NOTIFICATION},e.next=5,n.sendNotificationAsync(s);case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),i.sendException(e.t0);case 10:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(){return e.apply(this,arguments)}}(),t.sendThursdayNotification=function(){var e=(0,r.Z)(l().mark((function e(){var t,n,i,a,s;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=window.game,n=t.facebook,i=t.rollbar,e.prev=1,s={message:null!=(a=fF.THURSDAY)?a:dF,delayTime:86400,type:lF.Z.THURSDAY_NOTIFICATION},e.next=5,n.sendNotificationAsync(s);case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),i.sendException(e.t0);case 10:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(){return e.apply(this,arguments)}}(),t.sendFridayNotification=function(){var e=(0,r.Z)(l().mark((function e(){var t,n,i,a,s;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=window.game,n=t.facebook,i=t.rollbar,e.prev=1,s={message:null!=(a=fF.FRIDAY)?a:dF,delayTime:86400,type:lF.Z.FRIDAY_NOTIFICATION},e.next=5,n.sendNotificationAsync(s);case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),i.sendException(e.t0);case 10:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(){return e.apply(this,arguments)}}(),t.sendSaturdayNotification=function(){var e=(0,r.Z)(l().mark((function e(){var t,n,i,a,s,r;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=window.game,n=t.facebook,i=t.rollbar,e.prev=1,s=this.findDelayTimeForNextDay(6,10),r={message:null!=(a=fF.SATURDAY)?a:dF,delayTime:s,type:lF.Z.SATURDAY_NOTIFICATION},e.next=6,n.sendNotificationAsync(r);case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),i.sendException(e.t0);case 11:case"end":return e.stop()}}),e,this,[[1,8]])})));return function(){return e.apply(this,arguments)}}(),t.sendSundayNotification=function(){var e=(0,r.Z)(l().mark((function e(){var t,n,i,a,s,r;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=window.game,n=t.facebook,i=t.rollbar,e.prev=1,s=this.findDelayTimeForNextDay(0,10),r={message:null!=(a=fF.SUNDAY)?a:dF,delayTime:s,type:lF.Z.SUNDAY_NOTIFICATION},e.next=6,n.sendNotificationAsync(r);case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),i.sendException(e.t0);case 11:case"end":return e.stop()}}),e,this,[[1,8]])})));return function(){return e.apply(this,arguments)}}(),t.findDelayTimeForNextDay=function(e,t){if(e<0||e>6)throw new Error("Invalid day for notification");if(t<0||t>23)throw new Error("Invalid hour for notification");var n=Date.now(),i=new Date(n).getDay(),a=new Date(n).getHours(),s=e,r=t;if(i===s&&a>=r){var o=3600*(168-a+r);if(o>604800)throw new Error("Notification delay time is more than 7 days");return o}var c=s<i?7-i+s:s-i;r<a&&c--;var h=3600*(24*c+(r<a?24-a+r:r-a));if(h>604800)throw new Error("Notification delay time is more than 7 days");return h},t.sendTestDailyNotificationInstance=function(){var e=(0,r.Z)(l().mark((function e(t){var n,i,a,s;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n={0:"SUNDAY",1:"MONDAY",2:"TUESDAY",3:"WEDNESDAY",4:"THURSDAY",5:"FRIDAY",6:"SATURDAY"},e.prev=1,a=dF,!(t<0||t>6)){e.next=5;break}throw new Error("Invalid day for notification. Day must be between 0 (Sunday) and 6 (Saturday)");case 5:return a=null!=(i=fF[n[t]])?i:dF,s={message:a,delayTime:300,type:lF.Z.GENERIC_NOTIFICATION},e.next=9,window.game.facebook.sendNotificationAsync(s);case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1);case 14:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(t){return e.apply(this,arguments)}}(),e}();gF._instance=void 0;var mF=gF,vF=GameCore.Configs.Notification.ApiUrl,yF=function(){var e=(0,r.Z)(l().mark((function e(t){var n,i;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.playerId,e.next=3,(0,bt.v)("players/"+n,t,{},vF,10);case 3:return i=e.sent,e.abrupt("return",(null==i?void 0:i.data)||{});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();function TF(e,t){var n="undefined"!==typeof w()&&k()(e)||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){var n;if(!e)return;if("string"===typeof e)return CF(e,t);var i=A()(n=Object.prototype.toString.call(e)).call(n,8,-1);"Object"===i&&e.constructor&&(i=e.constructor.name);if("Map"===i||"Set"===i)return b()(e);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return CF(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var i=0;return function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function CF(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var EF=GameCore.Configs,AF=EF.AppId,SF=EF.Notification,bF=EF.Gameplay,IF=[Ls.Z.SHUFFLE],wF=function(e){function t(){for(var t,n,i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];return(n=e.call.apply(e,x()(t=[this]).call(t,a))||this).loadAtlas32bitParameterQueues=[],n.i18nPromise=void 0,n.isMusicLoaded=!1,n.handleFBInstantGameStarted=function(){window.__fbGameReady=!0,window.__fbPlatform=FBInstant.getPlatform(),n.player.requestConnectedPlayers()},n.processAfterUpdatePlayerProfile=function(){SF.DisableSendNotification||(mF.sendNewUserNotification(),mF.sendDailyNotification())},n.startGame=function(){n.analytics.event(Nn._.APP_READY),n.storage.dispatch((0,cF.I)(cs.C.LOAD_SCENE)),n.storage.dispatch((function(e,t){var n=window.game,i=n.player,a=n.analytics,s=n.globalScene;try{var r=t(),o=Qa(r),c=$a(r),h=i.getPlayer(),u=(o.entryPointData||{}).type;if(h.isUserNew&&a.event(Nn._.NEW_USER),c===qa)return void e(iF());if(c===Ja){if(u===Wa)return void e(aF());if(u===Ya)return void e(sF())}if(c===Xa)return void e(rF());if(h.isUserNew)return void e(oF());if(c===ja)return void e(sc());s.events.emit(cs.K.SWITCH,cs.C.DASHBOARD_SCENE)}catch(l){s.events.emit(cs.K.SWITCH,cs.C.DASHBOARD_SCENE)}}))},n.handleLoadMusicCompleted=function(){n.audio.initMusic(hF.BACKGROUND.KEY),!n.game.player.getPlayerSetting("music")&&window.GameSDK.isAudioEnabled()||n.audio.playMusic()},n}(0,o.Z)(t,e);var n=t.prototype;return n.getGameTypeFromEntryPointData=function(){var e=this.storage.getState(),t=Qa(e).entryPointData,n=void 0;return t&&t.gameType&&(n=t.gameType),n},n.preload=function(){var e=this,t=this.getGameTypeFromEntryPointData();this.facebook.progressLoading.loadingProgressFbLoadScene(),this.analytics.event(Nn._.SCREEN_OPEN,{screen_name:"LoadScene"}),this.load.on("progress",(function(t){e.facebook.progressLoading.onProgress(t)})),this.load.on(Phaser.Loader.Events.FILE_LOAD_ERROR,(function(e){var t=new BN("Load resources at LoadScene failed.");(0,i.R0)(t,{file:null==e?void 0:e.url})})),t||(t=this.player.getPlayerSetting(ss.gameType)),this.theme.setCurrentGameType(t);var n=this.theme.getCurrentThemeResources(),a=n.backgroundKey,s=n.backgroundFile,r=n.cardFaceKey,o=n.cardFaceTexture,c=n.cardFaceJSON,h=this.theme.getThemeResources(0,0),u=h.backgroundKey,l=h.backgroundFile;this.theme.updateCurrentCardStyle(),this.load.image(a,s),this.load.image(u,l),this.load.atlas({key:r,textureURL:o,atlasURL:c}),this.load.image(Ka.Z.AVATAR.KEY,Ka.Z.AVATAR.FILE),this.load.multiatlas({key:Gn.Z.EFFECTS.KEY,path:Gn.Z.EFFECTS.PATH,atlasURL:Gn.Z.EFFECTS.JSON}),this.load.atlas({key:Gn.Z.HOW_TO_PLAY.getKey(t),textureURL:Gn.Z.HOW_TO_PLAY.getTexture(t),atlasURL:Gn.Z.HOW_TO_PLAY.getJson(t)}),this.load.atlas({key:Gn.Z.TOURNAMENT_BANNER.KEY,textureURL:Gn.Z.TOURNAMENT_BANNER.TEXTURE,atlasURL:Gn.Z.TOURNAMENT_BANNER.JSON}),this.load.multiatlas({key:Gn.Z.GAMEPLAY_DEFAULT.KEY,atlasURL:Gn.Z.GAMEPLAY_DEFAULT.JSON,path:Gn.Z.GAMEPLAY_DEFAULT.PATH}),this.load.atlas({key:Gn.Z.CARD_BACK.KEY,textureURL:Gn.Z.CARD_BACK.TEXTURE,atlasURL:Gn.Z.CARD_BACK.JSON}),this.load.atlas({key:Gn.Z.LANGUAGES.KEY,textureURL:Gn.Z.LANGUAGES.TEXTURE,atlasURL:Gn.Z.LANGUAGES.JSON}),this.loadKlondikeLevels(),this.loadFreeCellLevels(),this.loadSpiderPrebuiltLevels(),this.textStyler.addFont({type:"local",fontType:"woff",fontName:Rc.Z.FONT_FAMILY});var d=this.player.getPlayerSetting("language");this.i18nPromise=this.lang.initI18n(this,{language:d||"en",fallbackLanguage:"en",supportLanguages:["ru","en","tr","zh","de","es","id","it","ja","pt","fr"],atlasFonts:[{atlasKey:Rc.Z.ATLAS.KEY,fonts:[Rc.Z.PRIMARY.KEY,Rc.Z.BOLD.KEY,Rc.Z.BOLD_SHADOW.KEY,Rc.Z.BOLD_SHADOW_BLUR.KEY]}]});for(var p,f=TF(IF);!(p=f()).done;){var g=p.value;""!=g&&this.load.audio(g,[hF.EFFECTS.PATH+g+".ogg",hF.EFFECTS.PATH+g+".mp3"])}this.player.updateData().then(this.processAfterUpdatePlayerProfile).catch(i.tO)},n.create=function(){var e=(0,r.Z)(l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.i18nPromise;case 2:this.audio.initSound(),this.audio.importSoundEffectKeys(hF.EFFECTS),this.analytics.event(Nn._.LOAD_COMPLETE),this.facebook.on("startgame",this.handleFBInstantGameStarted),this.facebook.gameStarted(),this.journey.updateJourney(),this.setupGlobalScene(),this.lazyLoadResource(),this.handleShowAdWhenStartGame(),this.initNewUserEasyGame(),this.startGame();case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.loadSpiderPrebuiltLevels=function(){var e,t,n,i=this,a=uF.ONE_SUIT,s=uF.TWO_SUIT,r=uF.FOUR_SUIT;A()(e=ta()(a)).call(e,0,3).forEach((function(e){i.cache.text.exists(e.KEY)||i.load.text(e.KEY,e.PATH)})),A()(t=ta()(s)).call(t,0,3).forEach((function(e){i.cache.text.exists(e.KEY)||i.load.text(e.KEY,e.PATH)})),A()(n=ta()(r)).call(n,0,3).forEach((function(e){i.cache.text.exists(e.KEY)||i.load.text(e.KEY,e.PATH)}))},n.loadFreeCellLevels=function(){this.load.text("freecell/level1","assets/levels/freecell/level1.txt")},n.loadKlondikeLevels=function(){this.load.text("klondike/draw1/level1","assets/levels/klondike/draw1/level1.txt"),this.load.text("klondike/draw3/level1","assets/levels/klondike/draw3/level1.txt")},n.updatePlayerProfileToNotificationService=function(){var e=this.player.getPlayer(),t=e.playerId,n=e.name,i=e.photo,a=e.locale,s=e.ASID;yF({appId:AF,playerId:t,name:n,photo:i,locale:a,ASID:s})},n.initNewUserEasyGame=function(){-1===this.player.getCustomData("newUserEasyGameCount")&&this.player.setMultiCustomData({newUserEasyGameCount:bF.NewUserEasyGameCount})},n.sendNotificationForNewUser=function(){var e=(0,r.Z)(l().mark((function e(){var t,n;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,this.player.getPlayerIsNew()){e.next=4;break}return e.abrupt("return");case 4:if(t=this.player.getPlayerASID()){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,FBInstant.player.getDataAsync(["isNotificationFirstSent"]);case 9:if(e.t0=e.sent,e.t0){e.next=12;break}e.t0={};case 12:if(n=e.t0,!0!==n.isNotificationFirstSent){e.next=16;break}return e.abrupt("return");case 16:this.facebook.sendNotificationAsync({message:"Hi @["+t+"] your friends are waiting to play with you, play now!",delayTime:3600}),FBInstant.player.setDataAsync({isNotificationFirstSent:!0}),e.next=23;break;case 20:e.prev=20,e.t1=e.catch(0);case 23:case"end":return e.stop()}}),e,this,[[0,20]])})));return function(){return e.apply(this,arguments)}}(),n.setupGlobalScene=function(){var e=this.scene.get(cs.C.GLOBAL_SCENE);e instanceof iB.Z&&e.setup()},n.initModules=function(){new tF(this.game),new pG(this.game)},n.lazyLoadResource=function(){var e=this,t=GameCore.Configs.FastDebug.DisableLazyLoad?0:1e3;setTimeout((function(){var t=Gn.Z.JOURNEY;e.scene.wake(),e.loadSounds(),e.load32bitTextures(),e.load.atlas({key:t.KEY,textureURL:t.TEXTURE,atlasURL:t.JSON}),e.load.atlas({key:Gn.Z.THEME_PREVIEW.KEY,textureURL:Gn.Z.THEME_PREVIEW.TEXTURE,atlasURL:Gn.Z.THEME_PREVIEW.JSON}),e.load.on(Phaser.Loader.Events.FILE_COMPLETE,(function(n){if(n==t.KEY){var i=e.scene.get(cs.C.GAME_SCENE);i&&i.handleAfterLoadJourneyTexture()}if(n===Gn.Z.THEME_PREVIEW.KEY){var a=e.scene.get(cs.C.GAME_SCENE);a&&a.handleAfterLoadThemePreviewTexture()}})),e.loadAllHowToPlayTextures(),e.load.once(Phaser.Loader.Events.COMPLETE,(function(){e.scene.sleep(),e.load.off(Phaser.Loader.Events.FILE_COMPLETE)}))}),t)},n.loadAllHowToPlayTextures=function(){var e=this,t=[is.Z.KLONDIKE,is.Z.FREE_CELL,is.Z.SPIDER],n=this.scene.get(cs.C.GAME_SCENE);t.forEach((function(t){var i=Gn.Z.HOW_TO_PLAY.getKey(t),a=Gn.Z.HOW_TO_PLAY.getTexture(t),s=Gn.Z.HOW_TO_PLAY.getJson(t);e.textures.exists(i)||(e.load.atlas(i,a,s),e.load.on(Phaser.Loader.Events.FILE_COMPLETE,(function(e){e==i&&n&&n.handleAfterLoadHowToPlayTexture()})))})),this.load.start()},n.loadSounds=function(){var e=Phaser.Loader.Events.FILE_KEY_COMPLETE;this.load.once(e+"audio-"+hF.BACKGROUND.KEY,this.handleLoadMusicCompleted);for(var t=Ls.Z,n=0,i=ae()(Ls.Z);n<i.length;n++){var a=t[i[n]];""!=a&&(be()(IF).call(IF,a)||this.load.audio(a,[hF.EFFECTS.PATH+a+".ogg",hF.EFFECTS.PATH+a+".mp3"]))}this.load.start()},n.loadWideframesResource=function(){this.frameCapture.preload({"wide-frame-share":"./assets/wideframes/wide-frame-share.jpg","wide-frame-message-win":"./assets/wideframes/wide-frame-message-win.png","wide-frame-game-result":"./assets/wideframes/wide-frame-game-result.png"})},n.handleShowAdWhenStartGame=function(){var e=this;if(GameCore.Configs.Ads.InterstitialAdOptions.showWhenStartGame){this.time.now,GameCore.Utils.Device.isDesktop();GameCore.Utils.Valid.isDebugger()&&0;var t={en:"Initializing...",ru:"\u0418\u043d\u0438\u0446\u0438\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u044f...",pt:"Inicializando...",es:"Inicializando...",ar:"\u062a\u0647\u064a\u0626\u0629...",hi:"\u092a\u094d\u0930\u093e\u0930\u0902\u092d \u0915\u0930 \u0930\u0939\u093e \u0939\u0948...",zh:"\u521d\u59cb\u5316\u4e2d...",tr:"Ba\u015flat\u0131l\u0131yor...",ja:"\u521d\u671f\u5316\u4e2d...",fr:"Initialisation en cours...",id:"Menginisialisasi...",de:"Initialisierung...",it:"Inizializzazione..."}[this.lang.language||""]||"",n=document.createElement("div");n.id="wait-ads-mask";var a=document.createElement("div");a.id="wait-ads-content",n.appendChild(a);var s=document.createElement("div");s.id="wait-ads-dual-ring",a.appendChild(s);var o=document.createElement("div");o.id="wait-ads-text",o.innerHTML=t,a.appendChild(o),document.body.appendChild(n),this.audio.muteAll(),setTimeout((0,r.Z)(l().mark((function t(){return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,e.audio.stopMusic(),e.audio.muteAll(),t.next=5,e.ads.preloadInterstitialAdAsync();case 5:return t.next=7,e.ads.showInterstitialAdAsync();case 7:t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),(0,i.tO)(t.t0);case 12:return t.prev=12,n.remove(),e.ads.preloadInterstitialAdAsync().catch((function(){})),window.GameSDK.isAudioEnabled()&&(e.audio.unmuteAll(),e.audio.playMusic()),t.finish(12);case 17:case"end":return t.stop()}}),t,null,[[0,9,12,17]])}))),0)}},n.loadBitmapFontFromAtlas=function(e,t,n,i,a,s){var r=this,o=e+"_data";return this.load.xml(o,i),this.load.once(Phaser.Loader.Events.COMPLETE,(function(){Phaser.GameObjects.BitmapText.ParseFromAtlas(r,e,t,n,o,a,s)})),this.load},n.load32bitTextures=function(){this.loadAtlas32bitParameterQueues=[],this.loadMultiAtlas32bit(Gn.Z.GAMEPLAY_DEFAULT.KEY,Gn.Z.GAMEPLAY_DEFAULT.JSON,Gn.Z.GAMEPLAY_DEFAULT.PATH)},n.loadImage32bit=function(e,t){var n=t.replace("8bit","32bit"),i=e+"-32bit";this.load.image(i,n),this.addEventOverride32BitTexture(i,e)},n.loadAtlas32bit=function(e,t,n){var i=t.replace("8bit","32bit"),a=n.replace("8bit","32bit"),s=e+"-32bit";this.load.atlas({key:s,textureURL:i,atlasURL:a}),this.addEventOverride32BitTexture(s,e)},n.loadMultiAtlas32bit=function(e,t,n){var i=t.replace("8bit","32bit"),a=n.replace("8bit","32bit"),s=e+"-32bit";this.load.multiatlas(s,i,a),this.addEventOverride32BitTexture(s,e)},n.addEventOverride32BitTexture=function(e,t){var n=this;this.load.on(Phaser.Loader.Events.FILE_COMPLETE,(function(i){if(i==e&&n.textures.exists(e)&&n.textures.exists(t)){var a=n.textures.get(e);if(n.textures.get(t).copy(a),0!==n.loadAtlas32bitParameterQueues.length){var s=n.loadAtlas32bitParameterQueues.shift();s&&n.loadAtlas32bit(s.key,s.texture,s.json)}}}))},n.waitForRemoteConfigFromGameAnalytics=function(){var e=(0,r.Z)(l().mark((function e(){var t,n,i;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(gameanalytics.state.GAState.isInitialized()){e.next=2;break}return e.abrupt("return");case 2:t=5e3,n=100,i=0;case 5:if(gameanalytics.GameAnalytics.isRemoteConfigsReady()){e.next=14;break}return e.next=8,new(h())((function(e){setTimeout(e,n)}));case 8:if(!((i+=n)>=t)){e.next=12;break}return e.abrupt("return");case 12:e.next=5;break;case 14:this.mergeRemoteConfigFromGameAnalytics("remoteConfig"),this.mergeRemoteConfigFromGameAnalytics("abConfig");case 16:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.mergeRemoteConfigFromGameAnalytics=function(e){try{var t=gameanalytics.GameAnalytics.getRemoteConfigsValueAsString(e);if(null!==t){var n=JSON.parse(t);return GameCore.Configs=(0,li.TS)(GameCore.Configs,n),!0}}catch(i){}return!1},t}(Phaser.Scene),PF=wF,kF=Gn.Z.DEFAULT,_F=kF.KEY,xF=kF.FRAME,OF=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n.avatar=void 0,n.crown=void 0,n.playerName=void 0,n.playerScore=void 0,n.scene=t,n.createAvatar(),n.updateSize(),n.createWinCrown(),n.createPlayerName(),n.createPlayerScore(),n.scene.add.existing((0,As.Z)(n)),n}(0,o.Z)(t,e);var n=t.prototype;return n.showCrown=function(e){this.crown.setVisible(e),e?this.avatar.setFrame(xF.AVATAR_FRAME_YELLOW_BIG):this.avatar.setFrame(xF.AVATAR_FRAME_BLUE_BIG)},n.setPlayerName=function(e){this.playerName.setText(e)},n.setPlayerScore=function(e){this.playerScore.setText(""+e)},n.loadPhoto=function(e,t){this.avatar.loadPhoto(e,t,60)},n.updateSize=function(){var e=this.avatar,t=e.width,n=e.height;this.setSize(t,n)},n.createAvatar=function(){this.avatar=new Bc(this.scene,{key:_F,frame:xF.AVATAR_FRAME_BLUE_BIG,background:xF.AVATAR_BG_BLUE_BIG,width:89,height:89}),this.add(this.avatar)},n.createWinCrown=function(){this.crown=this.scene.make.image({key:_F,frame:xF.ICON_CROWN}),this.crown.setWorldSize(52,36),Phaser.Display.Align.In.TopCenter(this.crown,this.avatar,0,75),this.add(this.crown)},n.createPlayerName=function(){this.playerName=this.scene.make.text({style:{fontFamily:Rc.Z.FONT_FAMILY,fontSize:this.scene.fontSize(42)+"px",fontStyle:"bold"},origin:{x:.5,y:.5}}),this.playerName.setTint(11632207),this.playerName.setHighQuality(),Phaser.Display.Align.In.BottomCenter(this.playerName,this.avatar,0,25),this.add(this.playerName)},n.createPlayerScore=function(){this.playerScore=this.scene.make.bitmapText({size:this.scene.fontSize(30),font:Rc.Z.PRIMARY.KEY,origin:{x:.5,y:.5}}),this.playerScore.setTint(6762627),Phaser.Display.Align.In.BottomCenter(this.playerScore,this.playerName,0,25),this.add(this.playerScore)},t}(Phaser.GameObjects.Container),LF=OF,RF=Gn.Z.DEFAULT,DF=RF.KEY,BF=RF.FRAME,MF=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n.board=void 0,n.titleText=void 0,n.playerScore=void 0,n.opponentScore=void 0,n.buttonClose=void 0,n.buttonRestart=void 0,n.buttonShare=void 0,n.scene=t,n.createBoard(),n.createTitle(),n.createVSText(),n.createPlayers(),n.createRestartButton(),n.createShareButton(),n.scene.add.existing((0,As.Z)(n)),n}(0,o.Z)(t,e);var n=t.prototype;return n.createBoard=function(){this.board=new Th(this.scene,0,0,600,340),this.board.setDepth(Dn.Z.BACKGROUND),this.add(this.board),Phaser.Display.Align.In.Center(this.board,this)},n.createTitle=function(){var e=this.scene.add.container(),t=this.scene.make.image({key:DF,frame:BF.RIBBON_FULL});t.setWorldSize(340,75),this.titleText=this.scene.make.bitmapText({font:Rc.Z.PRIMARY.KEY,size:this.scene.fontSize(32),origin:{x:.5,y:.5}}),Phaser.Display.Align.In.Center(this.titleText,t,0,-10),this.buttonClose=new jc.Z(this.scene,DF,BF.BUTTON_CLOSE,41.8,41.8),this.buttonClose.setName("Close"),Phaser.Display.Align.In.RightCenter(this.buttonClose,t,0,-3),e.setDepth(Dn.Z.TILE),e.add([t,this.titleText,this.buttonClose]),this.add(e),Phaser.Display.Align.In.Center(e,this.board,0,-170)},n.createVSText=function(){var e=this.scene.make.bitmapText({font:Rc.Z.PRIMARY.KEY,size:this.scene.fontSize(70),text:"VS",origin:{x:.5,y:.5}});e.setTint(11632207),e.setDepth(Dn.Z.TEXT),this.add(e),Phaser.Display.Align.In.Center(e,this.board,0,-45)},n.createPlayers=function(){this.playerScore=new LF(this.scene),this.playerScore.setDepth(Dn.Z.ITEM),this.add(this.playerScore),Phaser.Display.Align.In.Center(this.playerScore,this.board,-100,-50),this.opponentScore=new LF(this.scene),this.opponentScore.setDepth(Dn.Z.ITEM),this.add(this.opponentScore),Phaser.Display.Align.In.Center(this.opponentScore,this.board,100,-50)},n.createRestartButton=function(){this.buttonRestart=new Fh.Z(this.scene,{key:DF,button:BF.BUTTON_GREEN,icon:BF.ICON_RESUME,text:"Restart"},170,72),this.buttonRestart.setName("Restart"),this.buttonRestart.setDepth(Dn.Z.BUTTON),this.add(this.buttonRestart),Phaser.Display.Align.In.Center(this.buttonRestart,this.opponentScore,0,155)},n.createShareButton=function(){this.buttonShare=new Fh.Z(this.scene,{key:DF,button:BF.BUTTON_BLUE,icon:BF.ICON_FLAT_SHARE,text:"Share"},153,72),this.buttonShare.setName("Restart"),this.buttonShare.setDepth(Dn.Z.BUTTON),this.add(this.buttonShare),Phaser.Display.Align.In.Center(this.buttonShare,this.playerScore,0,155)},t}(Phaser.GameObjects.Container),NF=MF,GF=function(e){function t(){for(var t,n,a=arguments.length,s=new Array(a),o=0;o<a;o++)s[o]=arguments[o];return(n=e.call.apply(e,x()(t=[this]).call(t,s))||this).main=void 0,n.run=function(){n.getResultInfo()},n.handleClose=function(){n.scene.sleep(cs.C.RESULT_MATCH_SCENE),n.scene.run(cs.C.GAME_OVER_SCENE)},n.handleShareScore=function(){n.storage.dispatch(kc(is.Z.KLONDIKE))},n.handleRestartMatch=function(){n.storage.dispatch(function(){var e=(0,r.Z)(l().mark((function e(t,n){var a,s,r,o;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,window.game.globalScene.screen.open(Os.o4.NOTIFY_SCREEN,{message:"loading",loading:!0}),s=n(),r=br(s),En()(a=[ja,qa]).call(a,r)>=0&&(t(Go()),t(Bo())),o=null,r===Ja&&(o=so(s),t({type:Bi,payload:{}})),t(Ko()),e.next=11,t(dc(r,o));case 11:e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),(0,i.tO)(e.t0);case 16:return e.prev=16,ic(300),e.finish(16);case 19:case"end":return e.stop()}}),e,null,[[0,13,16,19]])})));return function(t,n){return e.apply(this,arguments)}}()),n.scene.sleep(cs.C.RESULT_MATCH_SCENE),n.scene.sleep(cs.C.GAME_OVER_SCENE)},n}(0,o.Z)(t,e);var n=t.prototype;return n.preload=function(){this.events.on("wake",this.run),this.events.on("create",this.run)},n.create=function(){e.prototype.create.call(this),this.createMask(.8),this.createMain(),this.createInput()},n.getResultInfo=function(){var e=this.storage.getState(),t=lo(e),n=br(e),i=this.player.getPlayer(),a=i.photo,s=i.name,r=i.playerId,o=so(e),c=o.playerId,h=o.name,u=o.photo,l=(t[r]||{}).score,d=void 0===l?0:l,p=(t[c]||{}).score,f=void 0===p?0:p,g=oo(e,{playerId:r}),m=co(e,{opponentId:c});n===Xa&&(g=!0,m=!0);var v=g&&m;this.main.playerScore.loadPhoto(r,a),this.main.opponentScore.loadPhoto(c,u),this.main.playerScore.setPlayerName(s),this.main.opponentScore.setPlayerName(h),this.main.playerScore.setPlayerScore(d),this.main.opponentScore.setPlayerScore(f),this.main.playerScore.showCrown(v&&d>f),this.main.opponentScore.showCrown(v&&f>d),g&&m?d===f?this.main.titleText.setText("Draw"):d>f?this.main.titleText.setText("You Win"):d<f&&this.main.titleText.setText("You Lose"):this.main.titleText.setText("Waiting for Opponent"),g&&m&&(d===f||(d>f?this.audio.playSound(Ls.Z.YOU_WIN):d<f&&this.audio.playSound(Ls.Z.YOU_LOSE)))},n.createMain=function(){this.main=new NF(this),Phaser.Display.Align.In.Center(this.main,this.gameZone,0,13)},n.createInput=function(){this.main.buttonClose.onClick=this.handleClose,this.main.buttonRestart.onClick=this.handleRestartMatch,this.main.buttonShare.onClick=this.handleShareScore},t}(Ts.Z);var FF=GF,ZF=n(579),UF=n(190),zF=function(e){function t(){for(var t,n,i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];return(n=e.call.apply(e,x()(t=[this]).call(t,a))||this).config=void 0,n.promisesLoadFonts={},n.promisesLoadAtlas={},n.promisesLoadXml={},n}(0,o.Z)(t,e);var n=t.prototype;return n.getFontKey=function(e,t){return e.replace("{{locale}}",t||this.language)},n.initI18n=function(e,t){var n=this;this.config=(0,s.Z)({fallbackLanguage:"en",fontKeys:[],atlasFonts:[],supportLanguages:["en"]},t);var i=[new(h())((function(t){e.i18n.initialize({fallbackLng:n.config.fallbackLanguage,loadPath:"assets/i18n/{{lng}}/{{ns}}.json",debug:GameCore.Utils.Valid.isDebugger(),languages:n.config.supportLanguages,interpolation:{escapeValue:!1}},(function(){n.changeLanguage(n.config.language).then((function(){t()}))}))}))];return new(h())((function(e){h().all(i).then((function(){return e()}))}))},n.changeLanguage=function(e){var t;if(!be()(t=this.supportedLanguages).call(t,e))return h().resolve();var n=this.preloadLanguageResource(this.game.globalScene,e);return new(h())((function(t){n.then((function(){UF.ZP.changeLanguage(e).then((function(){t()})).catch((function(){t()}))})).catch((function(){t()})).finally((function(){}))}))},n.preloadLanguageResource=function(e,t){var n=this,i=this.config,a=i.fontKeys,s=i.atlasFonts,r=[];return De()(a).call(a,(function(i){return r.push(n.preloadBitmapFont(e,i,t))})),De()(s).call(s,(function(i){var a=i.atlasKey,s=i.fonts;r.push(n.preloadAtlas(e,a,t)),De()(s).call(s,(function(i){return r.push(n.preloadBitmapFontFromAtlas(e,i,a,t))}))})),e.load.start(),r.push(UF.ZP.loadLanguages(t)),new(h())((function(e){h().all(r).then((function(){return e()}))}))},n.preloadBitmapFont=function(e,t,n){var i=this,a=t.replace("-{{locale}}",""),s=this.getFontKey(t,n);if(this.game.cache.bitmapFont.exists(s))return h().resolve();if(void 0!==this.promisesLoadFonts[s])return this.promisesLoadFonts[s];var r="assets/fonts/"+n+"/"+a+".png",o="assets/fonts/"+n+"/"+a+".xml";e.load.bitmapFont(s,r,o);var c=new(h())((function(t){var n=e.tweens.addCounter({duration:100,loop:-1,onLoop:function(){i.game.cache.bitmapFont.exists(s)&&(n.remove(),t())}})}));return this.promisesLoadFonts[a]=c,c},n.preloadBitmapFontFromAtlas=function(e,t,n,i){var a=this,s=t.replace("-{{locale}}",""),r=this.getFontKey(t,i),o=n.replace("-{{locale}}",i),c=r+"_data",u="assets/fonts/"+i+"/"+s+".xml";if(this.game.cache.xml.exists(c)&&this.game.textures.exists(o))return h().resolve();if(void 0!==this.promisesLoadXml[c])return this.promisesLoadXml[c];e.load.xml(c,u);var l=new(h())((function(n){var i=e.tweens.addCounter({duration:50,loop:-1,onLoop:function(){if(a.game.cache.xml.exists(c)&&a.game.textures.exists(o)){i.remove(),a.game.cache.bitmapFont.exists(t)||Phaser.GameObjects.BitmapText.ParseFromAtlas(e,t,o,s,c);Phaser.GameObjects.BitmapText.ParseFromAtlas(e,r,o,s,c);n()}}})}));return this.promisesLoadXml[c]=l,l},n.preloadAtlas=function(e,t,n){var i=this,a=t.replace("-{{locale}}",n),s=t.replace("-{{locale}}",""),r="assets/fonts/"+n+"/"+s+".png",o="assets/fonts/"+n+"/"+s+".json";if(this.game.textures.exists(a))return h().resolve();if(void 0!==this.promisesLoadAtlas[a])return this.promisesLoadAtlas[a];e.load.atlas(a,r,o);var c=new(h())((function(t){var n=e.tweens.addCounter({duration:50,loop:-1,onLoop:function(){i.game.textures.exists(a)&&(n.remove(),t())}})}));return this.promisesLoadAtlas[a]=c,c},(0,he.Z)(t,[{key:"supportedLanguages",get:function(){var e;return x()(e=[]).call(e,this.config.supportLanguages)}},{key:"fallbackLanguage",get:function(){return this.config.fallbackLanguage}},{key:"language",get:function(){return UF.ZP.language}},{key:"languageIndex",get:function(){var e;return En()(e=this.supportedLanguages).call(e,this.language)}}]),t}(Phaser.Plugins.BasePlugin),HF=zF,WF=n(593),YF=n(614),KF={Klondike:{Mobile:{Background:["bg-0","bg-1","bg-2","bg-3","bg-4","bg-5"],CardFace:["card-style-3","card-style-0","card-style-1","card-style-2"],CardBack:["card-back-0","card-back-1","card-back-2","card-back-3","card-back-4"]},Desktop:{Background:["bg-desktop-0","bg-desktop-1","bg-desktop-2","bg-desktop-3","bg-desktop-4"],CardFace:["card-style-3","card-style-0","card-style-1","card-style-2","card-style-desktop-0"],CardBack:["card-back-0","card-back-1","card-back-2","card-back-3","card-back-4"]}},FreeCell:{Mobile:{Background:["bg-0","bg-1","bg-2","bg-3","bg-4","bg-5"],CardFace:["card-style-3","card-style-0","card-style-1","card-style-2"],CardBack:["card-back-0","card-back-1","card-back-2","card-back-3","card-back-4"]},Desktop:{Background:["bg-desktop-0","bg-desktop-1","bg-desktop-2","bg-desktop-3","bg-desktop-4"],CardFace:["card-style-3","card-style-0","card-style-1","card-style-2","card-style-desktop-0"],CardBack:["card-back-0","card-back-1","card-back-2","card-back-3","card-back-4"]}},Spider:{Mobile:{Background:["bg-0","bg-1","bg-2","bg-3","bg-4","bg-5"],CardFace:["card-style-3","card-style-0","card-style-1","card-style-2"],CardBack:["card-back-0","card-back-1","card-back-2","card-back-3","card-back-4"]},Desktop:{Background:["bg-desktop-0","bg-desktop-1","bg-desktop-2","bg-desktop-3","bg-desktop-4"],CardFace:["card-style-3","card-style-0","card-style-1","card-style-2","card-style-desktop-0"],CardBack:["card-back-0","card-back-1","card-back-2","card-back-3","card-back-4"]}}},VF=(0,ul.t)(),jF=GameCore.world.isLandscape()?"desktop":VF+"x",JF={Background:{File:"./assets/images/"+VF+"x/{}.jpg"},CardFaceAtlas:{Texture:"./assets/textures/"+jF+"/{}.png",JSON:"./assets/textures/"+jF+"/{}.json"}},XF=JF.Background,qF=JF.CardFaceAtlas,QF=function(e){function t(){for(var t,n,i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];return(n=e.call.apply(e,x()(t=[this]).call(t,a))||this).events=void 0,n.device=void 0,n.gameType=is.Z.KLONDIKE,n.backgroundKlondikeIdx=void 0,n.cardFaceKlondikeIdx=void 0,n.cardBackKlondikeIdx=void 0,n.backgroundFreeCellIdx=void 0,n.cardFaceFreeCellIdx=void 0,n.cardBackFreeCellIdx=void 0,n.backgroundSpiderIdx=void 0,n.cardFaceSpiderIdx=void 0,n.cardBackSpiderIdx=void 0,n}(0,o.Z)(t,e);var n=t.prototype;return n.init=function(t){e.prototype.init.call(this,t),this.events=new Phaser.Events.EventEmitter},n.config=function(){this.device=this.game.world.isLandscape()?"desktop":"mobile"},n.setCurrentGameType=function(e){this.gameType=e},n.getCurrentThemeResources=function(){var e=this.getCurrentIdxConfig(),t=e.backgroundIdx,n=e.cardFaceIdx;return this.getThemeResources(t,n)},n.getThemeResources=function(e,t){var n=this.getThemePreview(),i=n.Background[e]||n.Background[0],a=(0,YF.Z)(XF.File,[i]),s=n.CardFace[t]||n.CardFace[0];return{backgroundKey:i,backgroundFile:a,cardFaceKey:s,cardFaceTexture:(0,YF.Z)(qF.Texture,[s]),cardFaceJSON:(0,YF.Z)(qF.JSON,[s])}},n.getBackgroundConfigs=function(){var e,t=this.getThemePreview();return De()(e=t.Background).call(e,(function(e){return{key:e,url:(0,YF.Z)(XF.File,[e])}}))},n.getCardStyleAtlasConfigs=function(){var e,t=this.getThemePreview();return De()(e=t.CardFace).call(e,(function(e){return{key:e,textureURL:(0,YF.Z)(qF.Texture,[e]),atlasURL:(0,YF.Z)(qF.JSON,[e])}}))},n.getCurrentThemeConfig=function(){var e=ss.getGameKey(this.gameType),t=this["background"+e+"Idx"],n=this["cardFace"+e+"Idx"],i=this["cardBack"+e+"Idx"],a=this.getThemePreview();return{backgroundKey:a.Background[t],cardFaceKey:a.CardFace[n],cardBackFrame:a.CardBack[i]}},n.getThemeDefaultConfig=function(){var e=this.getThemePreview();return{backgroundKey:e.Background[0],cardFaceKey:e.CardFace[0],cardBackFrame:e.CardBack[0]}},n.getCurrentIdxConfig=function(){var e=this.gameType,t=this.game.player.getPlayerSettings(),n="desktop"==this.device;return{backgroundIdx:t[ss.getThemeKey(e,"background",n)],cardFaceIdx:t[ss.getThemeKey(e,"cardFace",n)],cardBackIdx:t[ss.getThemeKey(e,"cardBack",n)]}},n.getThemePreview=function(){var e=this.gameType,t=e===is.Z.FREE_CELL?KF.FreeCell:e===is.Z.SPIDER?KF.Spider:KF.Klondike;return"desktop"===this.device?t.Desktop:t.Mobile},n.changeBackground=function(e){this.changeSetting("background",e)},n.changeCardFace=function(e){this.changeSetting("cardFace",e)},n.changeCardBack=function(e){this.changeSetting("cardBack",e)},n.changeSetting=function(e,t){var n=ss.getThemeKey(this.gameType,e,"desktop"==this.device);this.game.player.setSetting(n,t),this[""+e+ss.getGameKey(this.gameType)+"Idx"]=t},n.updateCurrentCardStyle=function(e){e&&(this.gameType=e);var t=this.getCurrentIdxConfig(),n=t.backgroundIdx,i=t.cardFaceIdx,a=t.cardBackIdx;this.setCurrentStyle(n,i,a)},n.setCurrentStyle=function(e,t,n){var i=ss.getGameKey(this.gameType);this["background"+i+"Idx"]=e,this["cardFace"+i+"Idx"]=t,this["cardBack"+i+"Idx"]=n},t}(Phaser.Plugins.BasePlugin),$F=QF,eZ=function(e){function t(t){var n;return(n=e.call(this,{game:t,fragShader:"\nprecision mediump float;\n\nuniform sampler2D uMainSampler[%count%];\nuniform float gray;\n\nvarying vec2 outTexCoord;\nvarying float outTexId;\nvarying vec4 outTint;\nvarying vec2 fragCoord;\n\nvoid main()\n{\n    vec4 texture;\n\n    %forloop%\n\n    gl_FragColor = texture;\n    gl_FragColor.rgb = mix(gl_FragColor.rgb, vec3(0.2126 * gl_FragColor.r + 0.7152 * gl_FragColor.g + 0.0722 * gl_FragColor.b), gray);\n}",uniforms:["uProjectionMatrix","uMainSampler","gray"]})||this).gray=void 0,n.gray=.8,n}return(0,o.Z)(t,e),t.prototype.onPreRender=function(){this.set1f("gray",this.gray)},t}(Phaser.Renderer.WebGL.Pipelines.MultiPipeline);var tZ={UPDATE_NEW_LEVEL:"update-new-level"},nZ=JSON.parse('[{"id":"journey-season-1","count":52,"startTime":"2023-01-01T17:00:00.000Z","endTime":"2023-01-08T17:00:00.000Z","levelsUrl":"season_1.json"},{"id":"journey-season-2","count":52,"startTime":"2023-01-08T17:00:00.000Z","endTime":"2023-01-15T17:00:00.000Z","levelsUrl":"season_2.json"},{"id":"journey-season-3","count":52,"startTime":"2023-01-15T17:00:00.000Z","endTime":"2023-01-22T17:00:00.000Z","levelsUrl":"season_3.json"},{"id":"journey-season-4","count":52,"startTime":"2023-01-22T17:00:00.000Z","endTime":"2023-01-29T17:00:00.000Z","levelsUrl":"season_4.json"},{"id":"journey-season-5","count":52,"startTime":"2023-01-29T17:00:00.000Z","endTime":"2023-02-05T17:00:00.000Z","levelsUrl":"season_5.json"},{"id":"journey-season-6","count":52,"startTime":"2023-02-05T17:00:00.000Z","endTime":"2023-02-12T17:00:00.000Z","levelsUrl":"season_6.json"},{"id":"journey-season-7","count":52,"startTime":"2023-02-12T17:00:00.000Z","endTime":"2023-02-19T17:00:00.000Z","levelsUrl":"season_7.json"},{"id":"journey-season-8","count":52,"startTime":"2023-02-19T17:00:00.000Z","endTime":"2023-02-26T17:00:00.000Z","levelsUrl":"season_8.json"},{"id":"journey-season-9","count":52,"startTime":"2023-02-26T17:00:00.000Z","endTime":"2023-03-05T17:00:00.000Z","levelsUrl":"season_9.json"},{"id":"journey-season-10","count":52,"startTime":"2023-03-05T17:00:00.000Z","endTime":"2023-03-12T17:00:00.000Z","levelsUrl":"season_10.json"},{"id":"journey-season-11","count":52,"startTime":"2023-03-12T17:00:00.000Z","endTime":"2023-03-19T17:00:00.000Z","levelsUrl":"season_11.json"},{"id":"journey-season-12","count":52,"startTime":"2023-03-19T17:00:00.000Z","endTime":"2023-03-26T17:00:00.000Z","levelsUrl":"season_12.json"},{"id":"journey-season-13","count":52,"startTime":"2023-03-26T17:00:00.000Z","endTime":"2023-04-02T17:00:00.000Z","levelsUrl":"season_13.json"},{"id":"journey-season-14","count":52,"startTime":"2023-04-02T17:00:00.000Z","endTime":"2023-04-09T17:00:00.000Z","levelsUrl":"season_14.json"},{"id":"journey-season-15","count":52,"startTime":"2023-04-09T17:00:00.000Z","endTime":"2023-04-16T17:00:00.000Z","levelsUrl":"season_15.json"},{"id":"journey-season-16","count":52,"startTime":"2023-04-16T17:00:00.000Z","endTime":"2023-04-23T17:00:00.000Z","levelsUrl":"season_16.json"},{"id":"journey-season-17","count":52,"startTime":"2023-04-23T17:00:00.000Z","endTime":"2023-04-30T17:00:00.000Z","levelsUrl":"season_17.json"},{"id":"journey-season-18","count":52,"startTime":"2023-04-30T17:00:00.000Z","endTime":"2023-05-07T17:00:00.000Z","levelsUrl":"season_18.json"},{"id":"journey-season-19","count":52,"startTime":"2023-05-07T17:00:00.000Z","endTime":"2023-05-14T17:00:00.000Z","levelsUrl":"season_19.json"},{"id":"journey-season-20","count":52,"startTime":"2023-05-14T17:00:00.000Z","endTime":"2023-05-21T17:00:00.000Z","levelsUrl":"season_20.json"},{"id":"journey-season-21","count":52,"startTime":"2023-05-21T17:00:00.000Z","endTime":"2023-05-28T17:00:00.000Z","levelsUrl":"season_21.json"},{"id":"journey-season-22","count":52,"startTime":"2023-05-28T17:00:00.000Z","endTime":"2023-06-04T17:00:00.000Z","levelsUrl":"season_22.json"},{"id":"journey-season-23","count":52,"startTime":"2023-06-04T17:00:00.000Z","endTime":"2023-06-11T17:00:00.000Z","levelsUrl":"season_23.json"},{"id":"journey-season-24","count":52,"startTime":"2023-06-11T17:00:00.000Z","endTime":"2023-06-18T17:00:00.000Z","levelsUrl":"season_24.json"},{"id":"journey-season-25","count":52,"startTime":"2023-06-18T17:00:00.000Z","endTime":"2023-06-25T17:00:00.000Z","levelsUrl":"season_25.json"},{"id":"journey-season-26","count":52,"startTime":"2023-06-25T17:00:00.000Z","endTime":"2023-07-02T17:00:00.000Z","levelsUrl":"season_26.json"},{"id":"journey-season-27","count":52,"startTime":"2023-07-02T17:00:00.000Z","endTime":"2023-07-09T17:00:00.000Z","levelsUrl":"season_27.json"},{"id":"journey-season-28","count":52,"startTime":"2023-07-09T17:00:00.000Z","endTime":"2023-07-16T17:00:00.000Z","levelsUrl":"season_28.json"},{"id":"journey-season-29","count":52,"startTime":"2023-07-16T17:00:00.000Z","endTime":"2023-07-23T17:00:00.000Z","levelsUrl":"season_29.json"},{"id":"journey-season-30","count":52,"startTime":"2023-07-23T17:00:00.000Z","endTime":"2023-07-30T17:00:00.000Z","levelsUrl":"season_30.json"},{"id":"journey-season-31","count":52,"startTime":"2023-07-30T17:00:00.000Z","endTime":"2023-08-06T17:00:00.000Z","levelsUrl":"season_31.json"},{"id":"journey-season-32","count":52,"startTime":"2023-08-06T17:00:00.000Z","endTime":"2023-08-13T17:00:00.000Z","levelsUrl":"season_32.json"},{"id":"journey-season-33","count":52,"startTime":"2023-08-13T17:00:00.000Z","endTime":"2023-08-20T17:00:00.000Z","levelsUrl":"season_33.json"},{"id":"journey-season-34","count":52,"startTime":"2023-08-20T17:00:00.000Z","endTime":"2023-08-27T17:00:00.000Z","levelsUrl":"season_34.json"},{"id":"journey-season-35","count":52,"startTime":"2023-08-27T17:00:00.000Z","endTime":"2023-09-03T17:00:00.000Z","levelsUrl":"season_35.json"},{"id":"journey-season-36","count":52,"startTime":"2023-09-03T17:00:00.000Z","endTime":"2023-09-10T17:00:00.000Z","levelsUrl":"season_36.json"},{"id":"journey-season-37","count":52,"startTime":"2023-09-10T17:00:00.000Z","endTime":"2023-09-17T17:00:00.000Z","levelsUrl":"season_37.json"},{"id":"journey-season-38","count":52,"startTime":"2023-09-17T17:00:00.000Z","endTime":"2023-09-24T17:00:00.000Z","levelsUrl":"season_38.json"},{"id":"journey-season-39","count":52,"startTime":"2023-09-24T17:00:00.000Z","endTime":"2023-10-01T17:00:00.000Z","levelsUrl":"season_39.json"},{"id":"journey-season-40","count":52,"startTime":"2023-10-01T17:00:00.000Z","endTime":"2023-10-08T17:00:00.000Z","levelsUrl":"season_40.json"},{"id":"journey-season-41","count":52,"startTime":"2023-10-08T17:00:00.000Z","endTime":"2023-10-15T17:00:00.000Z","levelsUrl":"season_41.json"},{"id":"journey-season-42","count":52,"startTime":"2023-10-15T17:00:00.000Z","endTime":"2023-10-22T17:00:00.000Z","levelsUrl":"season_42.json"},{"id":"journey-season-43","count":52,"startTime":"2023-10-22T17:00:00.000Z","endTime":"2023-10-29T17:00:00.000Z","levelsUrl":"season_43.json"},{"id":"journey-season-44","count":52,"startTime":"2023-10-29T17:00:00.000Z","endTime":"2023-11-05T17:00:00.000Z","levelsUrl":"season_44.json"},{"id":"journey-season-45","count":52,"startTime":"2023-11-05T17:00:00.000Z","endTime":"2023-11-12T17:00:00.000Z","levelsUrl":"season_45.json"},{"id":"journey-season-46","count":52,"startTime":"2023-11-12T17:00:00.000Z","endTime":"2023-11-19T17:00:00.000Z","levelsUrl":"season_46.json"},{"id":"journey-season-47","count":52,"startTime":"2023-11-19T17:00:00.000Z","endTime":"2023-11-26T17:00:00.000Z","levelsUrl":"season_47.json"},{"id":"journey-season-48","count":52,"startTime":"2023-11-26T17:00:00.000Z","endTime":"2023-12-03T17:00:00.000Z","levelsUrl":"season_48.json"},{"id":"journey-season-49","count":52,"startTime":"2023-12-03T17:00:00.000Z","endTime":"2023-12-10T17:00:00.000Z","levelsUrl":"season_49.json"},{"id":"journey-season-50","count":52,"startTime":"2023-12-10T17:00:00.000Z","endTime":"2023-12-17T17:00:00.000Z","levelsUrl":"season_50.json"},{"id":"journey-season-51","count":52,"startTime":"2023-12-17T17:00:00.000Z","endTime":"2023-12-24T17:00:00.000Z","levelsUrl":"season_51.json"},{"id":"journey-season-52","count":52,"startTime":"2023-12-24T17:00:00.000Z","endTime":"2023-12-31T17:00:00.000Z","levelsUrl":"season_52.json"},{"id":"journey-season-53","count":52,"startTime":"2023-12-24T17:00:00.000Z","endTime":"2023-12-31T17:00:00.000Z","levelsUrl":"season_53.json"}]'),iZ={level:2,type:zu.COMPLETE_GAME,boardData:{seed:"9TJfXCcEA1",draw3:!1},limitMechanic:{type:Uu.MOVES,value:520},mainMission:{cardStats:[]}},aZ="journey-season-",sZ=function(e){function t(){for(var t,n,i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];return(n=e.call.apply(e,x()(t=[this]).call(t,a))||this).config=void 0,n.currentLevelMap=void 0,n.season=aZ+"1",n.events=void 0,n.playingCurrentLevel=!1,n.promisePreloadSeason={},n.loadedSeason={},n}(0,o.Z)(t,e);var n=t.prototype;return n.init=function(t){e.prototype.init.call(this,t),this.events=new Phaser.Events.EventEmitter,this.currentLevelMap=new(ne()),this.currentLevelMap.set(is.Z.KLONDIKE,1),this.currentLevelMap.set(is.Z.SPIDER,1),this.currentLevelMap.set(is.Z.FREE_CELL,1);var n=this.getAllSeasonConfigs();this.configure(n["journey-season-1"])},n.configure=function(e){this.config=e},n.preloadLevelDataAsync=function(){var e=(0,r.Z)(l().mark((function e(t){var n,i,a,s;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=Rr.filterGameType){e.next=3;break}return e.abrupt("return",void 0);case 3:return a=t.id+i,!be()(n=ae()(this.promisePreloadSeason)).call(n,a)&&(this.promisePreloadSeason[a]=this.preloadLevel("assets/levels/journey/"+i+"/"+t.levelsUrl)),e.next=8,this.promisePreloadSeason[a];case 8:if(s=e.sent){e.next=15;break}return delete this.promisePreloadSeason[a],this.promisePreloadSeason[a]=this.preloadLevel("assets/levels/journey/"+i+"/"+t.levelsUrl),e.abrupt("return",this.promisePreloadSeason[a]);case 15:return this.loadedSeason[a]=s,e.abrupt("return",s);case 17:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.preloadLevel=function(){var e=(0,r.Z)(l().mark((function e(t){var n,i;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(""+t,{method:"GET"});case 3:return i=e.sent,e.next=6,i.json();case 6:n=e.sent,e.next=12;break;case 9:return e.prev=9,e.t0=e.catch(0),e.abrupt("return",void 0);case 12:return e.abrupt("return",n);case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}(),n.getKeyLevel=function(e){return"season_"+e},n.canUpdateNewSeason=function(e){var t=this.getSeasonConfigPlayerCurrentlyIn(e);return!!t&&t.id!==this.getSeason()},n.getSeasonConfigPlayerCurrentlyIn=function(e){var t=this.getAllSeasonConfigs(),n=(0,Ds.uW)(e),i=aZ+n;return t[i]?t[i]:null},n.getAllSeasonConfigs=function(){for(var e={},t=(0,Ds.H8)(),n=0;n<nZ.length;n++){var i=nZ[n].id,a=L()(i.split("-")[2]);e[i]=(0,s.Z)({},nZ[n],{startTime:(0,Ds.wu)(a,t),endTime:(0,Ds.Hx)(a,t)})}return e},n.resetNewSeason=function(){this.setCurrentLevel(1)},n.getSeason=function(){return this.season=this.config.id,this.season},n.getCurrentSeasonConfig=function(){return this.config},n.increaseSeason=function(){var e=function(e){var t=e.match(/(\d+)/);return t?L()(t[1],10):null}(this.getSeason());if(null===e)return!1;var t=aZ+(e+1);return!!this.getAllSeasonConfigs()[t]&&this.setSeason(t)},n.setSeason=function(e){return!this.isPlayingCurrentLevel()&&(this.game.player.setCustomData("journeySeason",e),!0)},n.getTimeStart=function(){return this.config.startTime.getTime()/1e3},n.getTimeEnd=function(){return this.config.endTime.getTime()/1e3},n.getCurrentLevel=function(e){return e=e||Rr.filterGameType,this.currentLevelMap.get(e)||1},n.getLevelCount=function(){var e,t=(null!=(e=this.config)?e:{}).count;return void 0===t?52:t},n.setCurrentLevel=function(e,t){if(!hO()(e))return!1;if(t=t||Rr.gameType,e>this.getLevelCount()){var n=this.game.player.getNumberOfTrophy();this.game.player.setCustomData("numberOfTrophy",n+1)}if(e<1)return!1;this.currentLevelMap.set(t,e),this.events.emit(tZ.UPDATE_NEW_LEVEL,e);var i=GameCore.Utils.Json.clone(this.game.player.getCustomData("journeyLevel"));switch(t){case is.Z.SPIDER:i=(0,s.Z)({},i,{spider:e});break;case is.Z.KLONDIKE:i=(0,s.Z)({},i,{klondike:e});break;case is.Z.FREE_CELL:i=(0,s.Z)({},i,{freecell:e})}return this.game.player.setCustomData("journeyLevel",i),this.game.player.setCustomData("journeySeason",this.config.id),!0},n.outOfMissions=function(e){return this.getCurrentLevel(e)>this.getLevelCount()},n.isCurrentLevelTheLast=function(){return this.getCurrentLevel()===this.getLevelCount()},n.incrementLevel=function(e){var t=this.getCurrentLevel(e);return this.setCurrentLevel(t+1)},n.getConfig=function(){return this.config},n.isPlayingCurrentLevel=function(){return this.playingCurrentLevel},n.setIsPlayingCurrentLevel=function(e){void 0===e&&(e=!0),this.playingCurrentLevel!==e&&(this.playingCurrentLevel=e)},n.getCurrentSeasonMissions=function(){var e=this.getSeason()+Rr.filterGameType,t=this.loadedSeason[e];return null!=t?t:[]},n.getCurrentSeasonMissionsAsync=function(){var e=(0,r.Z)(l().mark((function e(t){var n;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.preloadLevelDataAsync(t);case 3:return n=e.sent,e.abrupt("return",n);case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return");case 10:case"end":return e.stop()}}),e,this,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),n.getJourneyName=function(){var e=this.config.id.split("-");return"Journey Season "+e[e.length-1]},n.getCurrentMission=function(e){var t,n=this.getCurrentLevel(e);return null!=(t=this.getCurrentSeasonMissions()[n-1])?t:iZ},n.updateJourney=function(){var e=(0,r.Z)(l().mark((function e(){var t,n,i,a;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.game.player,e.prev=1,this.config=this.getSeasonConfigPlayerCurrentlyIn(new Date)||this.config,e.next=5,this.preloadLevelDataAsync(this.config);case 5:e.next=10;break;case 7:return e.prev=7,e.t0=e.catch(1),e.abrupt("return");case 10:n=Rr.filterGameType||t.getPlayerSettings().gameType||is.Z.KLONDIKE,i=t.getPlayingJourneySeason(),a=i!=this.config.id?1:t.getJourneyLevel(n),this.setCurrentLevel(a,n);case 14:case"end":return e.stop()}}),e,this,[[1,7]])})));return function(){return e.apply(this,arguments)}}(),t}(Phaser.Plugins.BasePlugin),rZ=function(){var e=(0,r.Z)(l().mark((function e(t){var n,i,a,s,o;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=Math.ceil(t/80),i=0,a=function(){var e=(0,r.Z)(l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,FBInstant.performHapticFeedbackAsync();case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0);case 8:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(){return e.apply(this,arguments)}}();case 3:if(!(i<n)){e.next=11;break}return s=a(),o=(0,Ds.qZ)(80),i+=1,e.next=9,h().all([s,o]);case 9:e.next=3;break;case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),oZ=function(e){window.navigator.vibrate(0),window.navigator.vibrate(e)},cZ=function(e){try{if(!function(){var e=GameCore.Utils.Device,t=window.navigator.vibrate;return e.isAndroid()&&"function"===typeof t||e.isMobileWeb()&&"function"===typeof t}())return!1;var t=GameCore.Utils.Device;t.isAndroid()||t.isMobileWeb()?oZ(e):t.isIOS()&&rZ(e).catch((function(e){}))}catch(n){}},hZ=function(e){function t(){return e.apply(this,arguments)||this}return(0,o.Z)(t,e),t.prototype.performVibrating=function(e){this.game.player.getPlayerSettings().vibrate&&cZ(e)},t}(Phaser.Plugins.BasePlugin),uZ=hZ,lZ=function(e){function t(){for(var t,n,i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];return(n=e.call.apply(e,x()(t=[this]).call(t,a))||this).isVisible=!0,n.browserPrefixes=["moz","ms","o","","webkit"],n.visibleCallbacks=[],n.hiddenCallbacks=[],n.handleVisibilityChange=function(e){if("boolean"===typeof e)return e?n.onVisibleEvent():n.onHiddenEvent();var t=n.getBrowserPrefix(),i=n.getHiddenPropertyName(t);return document[i]?n.onHiddenEvent():n.onVisibleEvent()},n}(0,o.Z)(t,e);var n=t.prototype;return n.configure=function(){var e=this,t=this.getBrowserPrefix(),n=this.getVisibilityEvent(t);document.addEventListener(n,this.handleVisibilityChange,!1),document.addEventListener("focus",(function(){e.handleVisibilityChange(!0)}),!1),document.addEventListener("blur",(function(){e.handleVisibilityChange(!1)}),!1),window.addEventListener("focus",(function(){e.handleVisibilityChange(!0)}),!1),window.addEventListener("blur",(function(){e.handleVisibilityChange(!1)}),!1)},n.addEventVisible=function(e){this.visibleCallbacks.push(e)},n.addEventHidden=function(e){this.hiddenCallbacks.push(e)},n.isGameVisible=function(){return this.isVisible},n.getHiddenPropertyName=function(e){return e?e+"Hidden":"hidden"},n.getVisibilityEvent=function(e){return(e||"")+"visibilitychange"},n.getBrowserPrefix=function(){for(var e=0;e<this.browserPrefixes.length;e++)if(this.getHiddenPropertyName(this.browserPrefixes[e])in document)return this.browserPrefixes[e];return""},n.onVisibleEvent=function(){this.isVisible||(this.isVisible=!0,this.visibleCallbacks.forEach((function(e){e()})))},n.onHiddenEvent=function(){this.isVisible&&(this.isVisible=!1,this.hiddenCallbacks.forEach((function(e){e()})))},t}(Phaser.Plugins.BasePlugin),dZ=lZ,pZ=n(594),fZ=n(416),gZ=n.n(fZ),mZ=function(e){if((this._i18nFontKey||this.font)&&this.setFont(this._i18nFontKey||this.font),e!==this._i18nKey&&(this._i18nKey=e.toString()||""),this._isIgnoreLanguage)return this._setText(e);var t=this._setText(UF.ZP.t(this._i18nKey,this._interpolations)||"");return this.refontSize&&this.refontSize(),this.emit("textChanged",e),t},vZ=function(e,t,n){if(be()(e).call(e,"{{locale}}")){e!==this._i18nFontKey&&(this._i18nFontKey=e.toString()||"");var i=this._baseLocale||this.scene.lang.language,a=e.replace("{{locale}}",i);return this._setFont(a,t,n)}},yZ={get:function(){return this._interpolations},set:function(e){this._interpolations=e,this.setText(this._i18nKey)}},TZ=function(e){this._interpolations||(this._interpolations={}),this._interpolations=(0,s.Z)({},this._interpolations,e),this.setText(this._i18nKey)},CZ=function(e,t){this._interpolations||(this._interpolations={}),this._interpolations[e]=t,this.setText(this._i18nKey)},EZ=function(e){e in this._interpolations&&delete this._interpolations[e],this.setText(this._i18nKey)},AZ=function(e,t){this._isIgnoreLanguage=void 0==e||e,this._baseLocale=t,this.setText(this._i18nKey)},SZ=function(e,t,n,i){var a=this;if((!this._maxWidth||!this._maxHeight||!this._baseFontSize)&&GameCore.Utils.Valid.isDebugger()&&GameCore.Configs.Debugger.ShowBoxBitmapText){var s=this.scene.add.rectangle(0,0,10,10);s.setStrokeStyle(1,16711680,1),this.scene.events.on(Phaser.Scenes.Events.UPDATE,(function(){s.setPosition(a.x,a.y),s.setOrigin(a.originX,a.originY),s.setSize(a._maxWidth,a._maxHeight),a.parentContainer&&a.parentContainer.add(s)}))}this._maxWidth=e||this._maxWidth||Phaser.Math.MAX_SAFE_INTEGER,this._maxHeight=t||this._maxHeight||Phaser.Math.MAX_SAFE_INTEGER,this._baseFontSize=i||this.fontSize,this.setMaxWidth(this._maxWidth,n?Phaser.Math.MAX_SAFE_INTEGER:void 0),this.setText(this._i18nKey)},bZ=function(){if(this._maxWidth&&this._maxHeight&&this._baseFontSize){var e=this._maxWidth,t=this._maxHeight,n=this._baseFontSize,i=this.wordWrapCharCode===Phaser.Math.MAX_SAFE_INTEGER;for(this.setFontSize(n);this.width>e||this.height>t||this.getTextBounds().lines.lengths.length>1&&i;)this.setFontSize(.95*this.fontSize)}},IZ=function(e,t){e.prototype.setText!==mZ&&(e.prototype._setText=e.prototype.setText,e.prototype._setFont=e.prototype.setFont,e.prototype.setText=mZ,e.prototype.setFont=vZ,v()(e.prototype,"interpolations",yZ),e.prototype.setTranslationParameter=CZ,e.prototype.setTranslationParameters=TZ,e.prototype.clearTranslationParameter=EZ,e.prototype.setIgnoreLanguage=AZ);var n=Phaser.GameObjects.GameObjectCreator;if(n){var i=n.prototype[t];i&&(delete n.prototype[t],n.register("_"+t,i),n.register(t,(function(e,n){void 0===n&&(n=!1);var i=this.scene.make["_"+t](e,n);return i.interpolations=e.interpolations,i})))}var a=Phaser.GameObjects.GameObjectFactory;if(a){var s=a.prototype[t];s&&(delete a.prototype[t],a.register("_"+t,s))}},wZ={extendText:function(){var e=Phaser.GameObjects.Text;e&&IZ(e,"text");var t=Phaser.GameObjects.GameObjectFactory;t&&t.register("text",(function(e,t,n,i,a){var s=this.scene.add._text(e,t,n,i);return s.interpolations=a,s}))},extendBitmapText:function(){var e=Phaser.GameObjects.BitmapText;e&&(IZ(e,"bitmapText"),e.prototype.setMaxSize=SZ,e.prototype.refontSize=bZ);var t=Phaser.GameObjects.GameObjectFactory;t&&t.register("bitmapText",(function(e,t,n,i,a,s){var r=this.scene.add._bitmapText(e,t,n,i,a);return r.interpolations=s,r}))},extendDynamicBitmapText:function(){var e=Phaser.GameObjects.DynamicBitmapText;e&&IZ(e,"dynamicBitmapText");var t=Phaser.GameObjects.GameObjectFactory;t&&t.register("dynamicBitmapText",(function(e,t,n,i,a,s){var r=this.scene.add._dynamicBitmapText(e,t,n,i,a);return r.interpolations=s,r}))}},PZ=function(e){function t(){for(var t,n,i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];return(n=e.call.apply(e,x()(t=[this]).call(t,a))||this).languageChangedBound=void 0,n}(0,o.Z)(t,e),t.staticConstructor=function(){wZ.extendText(),wZ.extendBitmapText()};var n=t.prototype;return n.boot=function(){var e=this.systems.events;e.on("shutdown",this.shutdown,this),e.on("shutdown",this.shutdown,this),this.languageChangedBound=this.languageChanged.bind(this),this.on("languageChanged",this.languageChangedBound)},n.initialize=function(e,t){UF.ZP.use(new(gZ())(null,e)),e?UF.ZP.init(e,t):UF.ZP.init(t)},n.use=function(e){return UF.ZP.use(e)},n.t=function(e,t){return UF.ZP.t(e,t)},n.exists=function(e,t){return UF.ZP.exists(e,t)},n.loadResources=function(e){UF.ZP.loadResources(e)},n.createInstance=function(e,t){return UF.ZP.createInstance(e,t)},n.cloneInstance=function(e,t){return UF.ZP.cloneInstance(e,t)},n.getFixedT=function(e,t){return UF.ZP.getFixedT(e,t)},n.changeLanguage=function(e,t){return UF.ZP.changeLanguage(e,t)},n.loadNamespaces=function(e,t){return UF.ZP.loadNamespaces(e,t)},n.loadLanguages=function(e,t){return UF.ZP.loadLanguages(e,t)},n.reloadResources=function(e,t){return UF.ZP.reloadResources(e,t)},n.setDefaultNamespace=function(e){UF.ZP.setDefaultNamespace(e)},n.dir=function(e){return UF.ZP.dir(e)},n.on=function(e,t){UF.ZP.on(e,t)},n.off=function(e,t){UF.ZP.off(e,t)},n.getResource=function(e,t,n,i){UF.ZP.getResource(e,t,n,i)},n.addResource=function(e,t,n,i,a){UF.ZP.addResource(e,t,n,i,a)},n.addResources=function(e,t,n){UF.ZP.addResources(e,t,n)},n.addResourceBundle=function(e,t,n,i,a){UF.ZP.addResourceBundle(e,t,n,i,a)},n.hasResourceBundle=function(e,t){return UF.ZP.hasResourceBundle(e,t)},n.getResourceBundle=function(e,t){return UF.ZP.getResourceBundle(e,t)},n.removeResourceBundle=function(e,t){UF.ZP.removeResourceBundle(e,t)},n.recursiveUpdateText=function(e){var t=this;e instanceof Phaser.GameObjects.Text||e instanceof Phaser.GameObjects.BitmapText?e.setText(e._i18nKey):e instanceof Phaser.GameObjects.Container||e instanceof Phaser.GameObjects.Layer?e.list.forEach((function(e){t.recursiveUpdateText(e)})):e.children&&e.children.length>0&&e.children.each((function(e){t.recursiveUpdateText(e)}))},n.shutdown=function(){this.off("languageChanged",this.languageChangedBound);var e=this.systems.events;e.off("shutdown",this.shutdown,this,!1),e.off("shutdown",this.shutdown,this,!1)},n.languageChanged=function(){this.recursiveUpdateText(this.scene)},(0,he.Z)(t,[{key:"language",get:function(){return UF.ZP.language}},{key:"languages",get:function(){return UF.ZP.languages}},{key:"format",get:function(){return UF.ZP.format}},{key:"options",get:function(){return UF.ZP.options}},{key:"isInitialized",get:function(){return UF.ZP.isInitialized}}]),t}(Phaser.Plugins.ScenePlugin);PZ.staticConstructor();var kZ=["Enable"],_Z=function(e){function t(){return e.apply(this,arguments)||this}(0,o.Z)(t,e);var i=t.prototype;return i.boot=function(){var t=(0,r.Z)(l().mark((function t(){return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.prototype.boot.call(this),this.addExtraGameObjectMethods(),this.addExtraFBInstantFunctions(),this.addPlugins(),t.next=6,this.addDevPlugins();case 6:return t.next=8,this.initAdsAsync();case 8:this.addScenes(),this.addDevScenes(),this.initWorld(),this.initManagers(),this.initStorage(),this.initVisibilityChangeHandler(),this.initUtils(),this.initRollbar(),this.initConsole(),this.initDebugger(),this.initStatistics(),this.initParticleEditor(),this.initProfilerPlugin(),this.initAdaptivePerformance(),this.initCanvasRecorderPlugin();case 23:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),i.start=function(){e.prototype.start.call(this)},i.addExtraGameObjectMethods=function(){var e=new C(this);e.addKillRevive(),e.addKillReviveGroup(),e.addDrawDebugBox(),e.addSetWorldSize(),e.addSetWorldSizeForContainer(),e.addGetWorldPosition(),e.addCropByViewport(),e.addHighQuality(),e.addGradientHorizontalTint(),e.addRadius(),e.addSetLineHeightForBitmapText(),e.addCropByViewport()},i.addExtraFBInstantFunctions=function(){var e=new d.Z(this.facebook);this.facebook.getLocale=e.getLocale,this.facebook.shareAsync=e.shareAsync,this.facebook.inviteAsync=e.inviteAsync,this.facebook.switchAsync=e.switchAsync,this.facebook.chooseAsync=e.chooseAsync,this.facebook.createAsync=e.createAsync,this.facebook.sendMessage=e.sendMessage,this.facebook.getContextID=e.getContextID,this.facebook.getPlayerToken=e.getPlayerToken,this.facebook.matchPlayerAsync=e.matchPlayerAsync,this.facebook.getContextPlayers=e.getContextPlayers,this.facebook.setLoadingProgress=e.setLoadingProgress,this.facebook.attemptToAddShortcut=e.attemptToAddShortcut,this.facebook.attemptToSubscribeBot=e.attemptToSubscribeBot,this.facebook.postSessionScoreAsync=e.postSessionScoreAsync,this.facebook.getRewardedVideoAsync=e.getRewardedVideoAsync,this.facebook.sendNotificationAsync=e.sendNotificationAsync,this.facebook.getInterstitialAdAsync=e.getInterstitialAdAsync,this.facebook.isSupportedAPI=e.isSupportedAPI,e.injectTournament(),this.facebook.progressLoading=new g(this)},i.addPlugins=function(){this.plugins.install("Storage",xa,!0,"storage"),this.plugins.install("Rollbar",Rn,!0,"rollbar"),this.plugins.install("AdsManager",X,!0,"ads"),this.plugins.install("AuthManager",Te,!0,"auth"),this.plugins.install("AudioManager",ce,!0,"audio"),this.plugins.install("WorldManager",Ua,!0,"world"),this.plugins.install("PlayerManager",sn,!0,"player"),this.plugins.install("ProfileManager",Tn,!0,"profile"),this.plugins.install("AnalyticsManager",$,!0,"analytics"),this.plugins.install("AdaptivePerformance",_e,!0,"performance"),this.plugins.install("ThemeManager",$F,!0,"theme"),this.plugins.install("JourneyManager",sZ,!0,"journey"),this.plugins.install("VibrationManager",uZ,!0,"vibration"),this.plugins.install("VisibilityChangeHandler",dZ,!0,"visibility"),this.plugins.install("LanguageManager",HF,!0,"lang"),this.plugins.installScenePlugin("textStyler",Ba,"textStyler"),this.plugins.installScenePlugin("ScreenManager",Wn,"screen"),this.plugins.installScenePlugin("FrameCapture",Ae,"frameCapture"),this.plugins.installScenePlugin("I18n",PZ,"i18n"),window.SpinePlugin&&this.plugins.installScenePlugin("SpinePlugin",SpinePlugin,"spine"),this.storage=this.plugins.get("Storage"),this.rollbar=this.plugins.get("Rollbar"),this.ads=this.plugins.get("AdsManager"),this.auth=this.plugins.get("AuthManager"),this.audio=this.plugins.get("AudioManager"),this.world=this.plugins.get("WorldManager"),this.theme=this.plugins.get("ThemeManager"),this.player=this.plugins.get("PlayerManager"),this.lang=this.plugins.get("LanguageManager"),this.profile=this.plugins.get("ProfileManager"),this.analytics=this.plugins.get("AnalyticsManager"),this.performance=this.plugins.get("AdaptivePerformance"),this.plugins.install("KawaseBlurFilterPlugin",ZF.Z),this.visibility=this.plugins.get("VisibilityChangeHandler")},i.addDevPlugins=function(){var e=(0,r.Z)(l().mark((function e(){var t,i,a,s,r,o;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(GameCore.Utils.Valid.isDebugger()){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,Promise.all([n.e(7),n.e(942)]).then(n.bind(n,595));case 4:return t=e.sent.default,e.next=7,Promise.all([n.e(498),n.e(739),n.e(530)]).then(n.bind(n,596));case 7:return i=e.sent.default,e.next=10,n.e(401).then(n.bind(n,597));case 10:return a=e.sent.default,e.next=13,Promise.all([n.e(498),n.e(123)]).then(n.bind(n,598));case 13:return s=e.sent.default,e.next=16,Promise.all([n.e(498),n.e(803)]).then(n.bind(n,599));case 16:return r=e.sent.default,e.next=19,Promise.all([n.e(498),n.e(616),n.e(613)]).then(n.bind(n,601));case 19:o=e.sent.default,this.plugins.install("Console",t,!0,"console"),this.plugins.install("Debugger",i,!0,"debugger"),this.plugins.install("Statistics",a,!0,"statistics"),this.plugins.install("Profiler",s,!0,"profiler"),this.plugins.install("ParticleEditor",r,!0,"particle-editor"),this.plugins.install("CanvasRecorder",o,!0,"canvasRecorder"),this.eruda=this.plugins.get("Console"),this.debugger=this.plugins.get("Debugger"),this.statistics=this.plugins.get("Statistics"),this.profiler=this.plugins.get("Profiler"),this.particleEditor=this.plugins.get("ParticleEditor"),this.canvasRecorder=this.plugins.get("CanvasRecorder");case 32:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),i.addScenes=function(){this.scene.add(cs.C.BOOT_SCENE,ys,!0),this.scene.add(cs.C.LOAD_SCENE,PF,!1),this.scene.add(cs.C.GAME_SCENE,zM,!1),this.scene.add(cs.C.GAME_OVER_SCENE,jh,!1),this.scene.add(cs.C.DASHBOARD_SCENE,Es,!1),this.scene.add(cs.C.LEADERBOARD_SCENE,DN,!1),this.scene.add(cs.C.RESULT_MATCH_SCENE,FF,!1),this.scene.add(cs.C.GLOBAL_SCENE,iB.Z,!1)},i.addDevScenes=function(){var e=(0,r.Z)(l().mark((function e(){var t,i;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(GameCore.Utils.Valid.isDebugger()){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,n.e(638).then(n.bind(n,603));case 4:return t=e.sent.default,e.next=7,n.e(557).then(n.bind(n,604));case 7:i=e.sent.default,this.scene.add(cs.C.TEST_SCENE,t,!1),this.scene.add(cs.C.ANIMATIONS_SCENE,i,!1);case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),i.initAdsAsync=function(){var e=(0,r.Z)(l().mark((function e(){var t,n,i;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=GameCore.Configs.Ads,e.next=3,this.getAdServiceInstance();case 3:(n=e.sent).setGame(this),i=(0,s.Z)({},t.InterstitialAdOptions),this.ads.configure(n,{enabled:t.Enabled,calculateSafeAreaBottom:t.CalculateSafeAreaBottom,enableRewardVideoResetInterstitial:t.EnableRewardVideoResetInterstitial,interstitialAdOptions:i,rewardAdOptions:t.RewardAdOptions,bannerAdOptions:t.BannerAdOptions});case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),i.getAdServiceInstance=function(){var e=(0,r.Z)(l().mark((function e(){var t,i,a,s;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=GameCore.Configs.Ads,i=t.AdService,!t.Mockup.Enable){e.next=6;break}return e.next=4,n.e(131).then(n.bind(n,605));case 4:return a=e.sent.default,e.abrupt("return",a);case 6:if("google"!==i){e.next=19;break}return e.prev=7,e.next=10,this.initGoogleAdInstanceAsync();case 10:if(null===(s=e.sent)){e.next=13;break}return e.abrupt("return",s);case 13:e.next=19;break;case 15:return e.prev=15,e.t0=e.catch(7),e.abrupt("return",WF.default);case 19:return e.abrupt("return",WF.default);case 20:case"end":return e.stop()}}),e,this,[[7,15]])})));return function(){return e.apply(this,arguments)}}(),i.initGoogleAdInstanceAsync=function(){var e=(0,r.Z)(l().mark((function e(){var t,n,i,a,s,r,o,c;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("loaded"!==pZ.default.initStatus){e.next=2;break}return e.abrupt("return",pZ.default);case 2:if(t=GameCore.Configs.Ads.AdServiceConfigs.Google){e.next=6;break}return e.abrupt("return",null);case 6:return n=t.DataAdClient,i=t.DataAdChannel,a=t.DataAdBreakTest,s=t.DataAdFrequencyHint,r=t.DataAdHost,o=t.MaxScriptLoadRetryCount,c={dataAdClient:n,dataAdChannel:i,dataAdBreakTest:a,dataAdFrequencyHint:s,dataAdHost:r,maxScriptLoadRetryCount:o},e.prev=8,pZ.default.setGame(this),e.next=12,pZ.default.initGoogleAdsAsync(c);case 12:return e.abrupt("return",pZ.default);case 15:return e.prev=15,e.t0=e.catch(8),e.abrupt("return",null);case 19:case"end":return e.stop()}}),e,this,[[8,15]])})));return function(){return e.apply(this,arguments)}}(),i.initWorld=function(){var e=GameCore.Configs.Game,t=e.AutoResize,n=e.PortraitRatio,i=e.PortraitWidth,a=e.PortraitHeight,s=e.LandscapeRatio,r=e.LandscapeWidth,o=e.LandscapeHeight,c=t,h=e.DisableLandscape,u=e.FullSizeOnLandscape,l=n,d=i,p=a,f=s,g=r,m=o;this.world.configure({autoResize:c,portraitRatio:l,portraitWidth:d,portraitHeight:p,landscapeRatio:f,landscapeWidth:g,landscapeHeight:m,disableLandscape:h,fullSizeOnLandscape:u}),this.world.resize(e.ForcePixelRatio)},i.initManagers=function(){this.theme.config()},i.initStorage=function(){var e=new os(this);this.storage.setInitiator(e)},i.initVisibilityChangeHandler=function(){this.visibility.configure()},i.initUtils=function(){this.handlePauseAudio(),this.addPipelines(),this.removeUnusedPipelines()},i.initConsole=function(){GameCore.Utils.Valid.isDebugger()&&(GameCore.Configs.Debugger.ShowConsole&&!GameCore.Utils.Device.isDesktop()&&this.eruda.configure({tool:["console","info"],defaults:{theme:"Dark"}}))},i.initDebugger=function(){if(GameCore.Utils.Valid.isDebugger()){var e=GameCore.Configs.Debugger,t=e.ShowInspector,n=e.ShowMonitoring;(t||n)&&this.debugger.configure(GameCore.Configs.Debugger)}},i.initStatistics=function(){GameCore.Utils.Valid.isDebugger()&&(GameCore.Configs.Statistics.Enable&&this.statistics.configure(GameCore.Configs.Statistics))},i.initParticleEditor=function(){GameCore.Utils.Valid.isDebugger()&&(GameCore.Configs.ParticleEditor.Enable&&this.particleEditor.configure(GameCore.Configs.ParticleEditor))},i.initProfilerPlugin=function(){GameCore.Utils.Valid.isDebugger()&&(GameCore.Configs.ProfilerPlugin.Enable&&this.profiler.configure())},i.initAdaptivePerformance=function(){var e=GameCore.Configs.Performance,t=e.Enable,n=(0,a.Z)(e,kZ);if(t){var i=this.world.getPixelRatio();this.performance.configure((0,s.Z)({pixelRatio:i},n)),this.performance.active()}},i.initCanvasRecorderPlugin=function(){var e=this;if(GameCore.Utils.Valid.isDebugger()){var t=GameCore.Configs.CanvasRecorder;if(t.Enable){var n=t.Options,i=n.Type,a=n.Quality,s=n.RecordFps,o=n.SyncFps;this.canvasRecorder.configure({type:i,quality:a,syncFps:o,recordFps:s});var c=document.querySelector("canvas");if(c){this.canvasRecorder.setCanvas(c);var u=this.canvasRecorder.getOptions(),d=this.canvasRecorder.waitNextFrame;this.canvasRecorder.waitNextFrame=(0,r.Z)(l().mark((function t(){return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!u.syncFps){t.next=5;break}return e.loop.sleep(),t.abrupt("return",new(h())((function(t){e.events.once(Phaser.Core.Events.POST_RENDER,t),e.loop.lastTime=1e3/u.recordFps,e.loop.step()})));case 5:return e.loop.wake(),t.abrupt("return",d.call(e.canvasRecorder));case 7:case"end":return t.stop()}}),t)})))}}}},i.initRollbar=function(){GameCore.Configs.Rollbar.Enable&&this.rollbar.setup()},i.handlePauseAudio=function(){var e=this;this.sound.pauseOnBlur=!1,this.visibility.addEventVisible((function(){window.GameSDK.isAudioEnabled()&&(e.audio.playMusic(),e.audio.resumeAllSounds())})),this.visibility.addEventHidden((function(){e.audio.pauseMusic(),e.audio.pauseAllSounds()}))},i.addPipelines=function(){var e=this.renderer;e instanceof Phaser.Renderer.WebGL.WebGLRenderer&&e.pipelines.add("Grayscale",new eZ(this))},i.removeUnusedPipelines=function(){var e=this.renderer;if(e instanceof Phaser.Renderer.WebGL.WebGLRenderer){var t=e.pipelines,n=Phaser.Renderer.WebGL.Pipelines;if(n)[n.ROPE_PIPELINE,n.LIGHT_PIPELINE,n.POSTFX_PIPELINE,n.POINTLIGHT_PIPELINE,n.BITMAPMASK_PIPELINE].forEach((function(e){var n;null==(n=t.get(e))||n.destroy(),t.remove(e)}))}},t}(Phaser.Game),xZ=_Z,OZ=GameCore.Configs.Debugger.ShowInspector,LZ={parent:"app",type:Phaser.AUTO,width:0,height:0,scale:{autoRound:!0},dom:{createContainer:!1},loader:{maxParallelDownloads:6,crossOrigin:"no-cros"},input:{gamepad:!1,keyboard:OZ,touch:{capture:!0},smoothFactor:1,activePointers:1,windowEvents:!1},disableContextMenu:!0,render:{pixelArt:!1,antialias:!0,antialiasGL:GameCore.Utils.Device.isDesktop(),transparent:!1,desynchronized:!1,powerPreference:"high-performance",clearBeforeRender:!1,roundPixels:!1,mipmapFilter:"LINEAR_MIPMAP_LINEAR"},plugins:{global:[]}};(0,i.j6)();var RZ=setInterval((function(){window.__analyticsInitiated&&(window.__fbGameReady=!1,clearInterval(RZ),clearInterval(window.__fbInstantLoadingTimer),GameSDK.setLoadingProgress(30),gtag("event","app_initialize",{send_to:["GA"]}),function(){try{var e=new xZ(LZ);window.game=e}catch(t){(0,i.tO)(t)}}())}),50)},651:function(e,t,n){"use strict";n.d(t,{Z5:function(){return T},H$:function(){return C},wF:function(){return E},bh:function(){return A},Iy:function(){return S},xB:function(){return b}});var i=n(612),a=n(615),s=n(3),r=n.n(s),o=n(32),c=n.n(o),h=n(0),u=n.n(h),l=n(639),d=n(626),p=n(652),f=GameCore.Configs,g=f.AppId,m=f.OtherHost,v=f.LeadersBoard,y=f.Tournament,T=function(){var e=(0,a.Z)(u().mark((function e(t){var n,a;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n={appId:g,resetScore:0,numberOfLeaders:15,timezone:"utc+0",sortOrder:"desc",statistics:"max",resettable:"manually",description:"no description"},!v.UseMock){e.next=5;break}return e.next=4,(0,d.qZ)(1e3);case 4:return e.abrupt("return",(0,i.Z)({},n,t,{_id:v.LeaderboardId,type:"app_leaderboard",description:"mockup_leaderboard",createdAt:new Date(Date.now()).toISOString(),updatedAt:new Date(Date.now()).toISOString()}));case 5:return"leaderboards",e.next=8,(0,l.v)("leaderboards",(0,i.Z)({},n,t),{},m);case 8:return a=e.sent,e.abrupt("return",(null==a?void 0:a.data)||{});case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),C=function(){var e=(0,a.Z)(u().mark((function e(t,n){var i,a,s,o,h,p,f,g,T,C,E;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===n&&(n={}),t){e.next=3;break}return e.abrupt("return",[]);case 3:if(i=[],!y.UseMock){e.next=9;break}return e.next=7,(0,d.qZ)(1e3);case 7:return h=(o=n).limit,void 0===h?Math.floor(10*Math.random()):h,p=o.offset,f=void 0===p?0:p,e.abrupt("return",r()(a=c()(s=new Array(Math.floor(10*Math.random()))).call(s,null)).call(a,(function(e,t){var n=(t+1)*(f+1),i=v.MockOptions.PlayerEntryIndex===t,a={playerId:"player-0"+n,name:"MPlayer "+n,photo:"./assets/images/others/avatar.jpg",rank:n,score:Math.floor(1e5/n+1e4*Math.random())};if(i){var s=window.game.player.getPlayer(),r=s.playerId,o=s.name,c=s.photo;a.playerId=r,a.name=o,a.photo=c}return a})));case 9:return g=GameCore.Utils.String.params(n),T="leaderboards/"+t+"/leaders",e.next=13,(0,l.U)(T+"?"+g,{},m);case 13:if((C=e.sent)&&(null==C||!C.error)){e.next=16;break}throw new Error((null==C?void 0:C.error)||"Leaderboard not found");case 16:if(!((E=(null==C?void 0:C.data)||[]).length<1)){e.next=19;break}return e.abrupt("return",i);case 19:return i=E,e.abrupt("return",i);case 21:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),E=function(){var e=(0,a.Z)(u().mark((function e(t){var n,i;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return",null);case 2:return n="leaderboards/"+t,e.next=5,(0,l.U)(""+n,{},m);case 5:if((i=e.sent)&&(null==i||!i.error)){e.next=8;break}return e.abrupt("return",null);case 8:return e.abrupt("return",null==i?void 0:i.data);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),A=function(){var e=(0,a.Z)(u().mark((function e(t,n,i){var a;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,l.v)("leaderboards/"+t+"/players/"+n,{score:i},{},m);case 2:return a=e.sent,e.abrupt("return",(null==a?void 0:a.data)||{});case 4:case"end":return e.stop()}}),e)})));return function(t,n,i){return e.apply(this,arguments)}}(),S=function(){var e=(0,a.Z)(u().mark((function e(){var t,n,i,a,s,r,o,c,h;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=GameCore.Utils.String.params({limit:100,type:"world_tournament_leaderboard"}),"leaderboards",e.next=4,(0,l.U)("leaderboards?"+t,{},m);case 4:if((n=e.sent)&&(null==n||!n.error)){e.next=7;break}throw new p.Z;case 7:for(i=(null==n?void 0:n.data)||[],a=[],s=0;s<i.length;s++)r=JSON.parse(i[s].description),o=new Date(i[s].createdAt).getTime(),c=Math.round((6048e5+o)/1e3),h={id:r.tournamentID,title:i[s].name,endTime:c,contextID:r.contextID,payload:{playerId:"",playerName:"",leaderboardId:i[s]._id,level:r.level,image:r.image}},a.push(h);return e.abrupt("return",a);case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),b=function(){var e=(0,a.Z)(u().mark((function e(t,n){var i,a,s,r,o;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=null,t){e.next=3;break}return e.abrupt("return",i);case 3:if(a=v.Prefix+"/"+n+"/players"){e.next=6;break}return e.abrupt("return",i);case 6:return s=GameCore.Utils.String.params({playerIds:t}),e.next=9,(0,l.U)(a+"?"+s,{},m);case 9:if(r=e.sent,!((o=(null==r?void 0:r.data)||[]).length<1)){e.next=13;break}return e.abrupt("return",i);case 13:return i=o[0],e.abrupt("return",i);case 15:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},627:function(e,t,n){"use strict";n.d(t,{_:function(){return i}});var i={BUTTON_CLICK:"button_click",SCREEN_OPEN:"screen_open",LOAD_START:"load_start",LOAD_COMPLETE:"load_complete",APP_READY:"app_ready",GetTutorial:function(e,t){return"tutorial_"+e+"_"+t},MATCH_START:"match_start",MATCH_RESCUE:"match_rescue",MATCH_END:"match_end",LEVEL_START:"level_start",JOURNEY_START:"journey_start",JOURNEY_END:"journey_end",LEVEL_RESCUE:"level_rescue",LEVEL_CONTINUE:"level_continue",LEVEL_END:"level_end",LEVEL_GIVE_UP:"level_give_up",SHARE:"share",MESSAGE:"message",INVITE:"invite",SHORTCUT_CREATE:"shortcut_create",SHORTCUT_CREATE_POPUP:"shortcut_create_popup",BOT_SUBSCRIBE:"bot_subscribe",BOT_SUBSCRIBE_POPUP:"bot_subscribe_popup",AD_LOAD:"ad_load",AD_LOAD_FAILED:"ad_load_failed",AD_SHOW:"ad_show",AD_SHOW_FAILED:"ad_show_failed",MISSING_AD_SHOW:"missing_ad_show",NEW_USER:"new_user",AD_IMPRESSION:"ad_impression",JOIN_GROUP:"join_group",THEME_CHANGED:"theme_changed",TOURNAMENT_SHARE:"tournament_share",TOURNAMENT_CREATE:"tournament_create",TOURNAMENT_POST_SCORE:"tournament_post_score",TOURNAMENT_START:"tournament_start",SWITCH_SOLO_CONTEXT:"switch_solo_context",PAGE_FOLLOW:"page_follow",GROUP_JOIN:"group_join"}},630:function(e,t,n){"use strict";var i=n(631),a=function(){function e(e,t,n,a){this.playerId=void 0,this.name=void 0,this.photo=void 0,this.locale=void 0,this.playerId=e,this.name=t,this.photo=n||i.Z.AVATAR.FILE,this.locale=a||"en_US"}return e.prototype.toObject=function(){return{playerId:this.playerId,name:this.name,photo:this.photo,locale:this.locale}},e}();t.Z=a},638:function(e,t){"use strict";t.Z={RESIZE:"resize",CHANGE_LAYOUT:"change-layout"}},649:function(e,t,n){"use strict";n.d(t,{I:function(){return a}});var i=n(636),a=function(e){return{type:i.DW,payload:{sceneKey:e}}}},626:function(e,t,n){"use strict";n.d(t,{qZ:function(){return o},Gm:function(){return c},F0:function(){return h},uW:function(){return u},wu:function(){return l},Hx:function(){return d},H8:function(){return p}});var i=n(2),a=n.n(i),s=n(5),r=n.n(s),o=function(e){return new(a())((function(t){return setTimeout(t,e)}))},c=function(e){var t=new Date(e),n=new Date;return t.getDate()===n.getDate()&&t.getMonth()===n.getMonth()&&t.getFullYear()===n.getFullYear()},h=function(e,t){void 0===t&&(t=!0);var n=new Date(e).toISOString();return t?r()(n).call(n,11,-5):r()(n).call(n,14,-5)},u=function(e){var t=new Date(e);t.setHours(0,0,0,0);var n=new Date(t.getFullYear(),0,1);return t.setDate(t.getDate()+4-(t.getDay()||7)),Math.ceil(((t.valueOf()-n.valueOf())/864e5+1)/7)},l=function(e,t){var n=new Date(t,0,1),i=7*(e-1),a=new Date(n);return a.setDate(n.getDate()+i-n.getDay()+1),a},d=function(e,t){var n=l(e,t),i=new Date(n);return i.setDate(n.getDate()+7),i.getFullYear()>t||53===e?new Date(t+1,0,1):i},p=function(){return(new Date).getFullYear()}},621:function(e,t,n){"use strict";n.d(t,{j6:function(){return i},sw:function(){return a},Tv:function(){return s},R0:function(){return r},tO:function(){return o}});n(622),n(97),n(33),n(11);var i=function(){var e=setInterval((function(){window.Sentry&&clearInterval(e)}),100)},a=function(e,t){window.Sentry&&window.Sentry.addBreadcrumb({category:e,message:t})},s=function(e){window.Sentry&&window.Sentry.setUser(e)},r=function(e,t){},o=function(e){}},632:function(e,t){"use strict";t.Z={GENERIC_NOTIFICATION:0,NEW_USER_NOTIFICATION:1,MONDAY_NOTIFICATION:2,TUESDAY_NOTIFICATION:3,WEDNESDAY_NOTIFICATION:4,THURSDAY_NOTIFICATION:5,FRIDAY_NOTIFICATION:6,SATURDAY_NOTIFICATION:7,SUNDAY_NOTIFICATION:8}},640:function(e,t,n){"use strict";n.d(t,{t:function(){return i}});var i=function(){if(GameCore.Utils.Device.isDesktop())return 2;var e=GameCore.Utils.Device.pixelRatio();return e=e>2.44?2.88:e>2?2:Math.round(e)}},620:function(e,t,n){"use strict";n.d(t,{Z:function(){return s}});var i=JSON.parse('{"data":["Smith","Johnson","Williams","Brown","Jones","Miller","Davis","Garcia","Rodriguez","Wilson","Martinez","Anderson","Taylor","Thomas","Hernandez","Moore","Martin","Jackson","Thompson","White","Lopez","Lee","Gonzalez","Harris","Clark","Lewis","Robinson","Walker","Perez","Hall","Young","Allen","Sanchez","Wright","King","Scott","Green","Baker","Adams","Nelson","Hill","Ramirez","Campbell","Mitchell","Roberts","Carter","Phillips","Evans","Turner","Torres","Parker","Collins","Edwards","Stewart","Flores","Morris","Nguyen","Murphy","Rivera","Cook","Rogers","Morgan","Peterson","Cooper","Reed","Bailey","Bell","Gomez","Kelly","Howard","Ward","Cox","Diaz","Richardson","Wood","Watson","Brooks","Bennett","Gray","James","Reyes","Cruz","Hughes","Price","Myers","Long","Foster","Sanders","Ross","Morales","Powell","Sullivan","Russell","Ortiz","Jenkins","Gutierrez","Perry","Butler","Barnes","Fisher","Henderson","Coleman","Simmons","Patterson","Jordan","Reynolds","Hamilton","Graham","Kim","Gonzales","Alexander","Ramos","Wallace","Griffin","West","Cole","Hayes","Chavez","Gibson","Bryant","Ellis","Stevens","Murray","Ford","Marshall","Owens","Mcdonald","Harrison","Ruiz","Kennedy","Wells","Alvarez","Woods","Mendoza","Castillo","Olson","Webb","Washington","Tucker","Freeman","Burns","Henry","Vasquez","Snyder","Simpson","Crawford","Jimenez","Porter","Mason","Shaw","Gordon","Wagner","Hunter","Romero","Hicks","Dixon","Hunt","Palmer","Robertson","Black","Holmes","Stone","Meyer","Boyd","Mills","Warren","Fox","Rose","Rice","Moreno","Schmidt","Patel","Ferguson","Nichols","Herrera","Medina","Ryan","Fernandez","Weaver","Daniels","Stephens","Gardner","Payne","Kelley","Dunn","Pierce","Arnold","Tran","Spencer","Peters","Hawkins","Grant","Hansen","Castro","Hoffman","Hart","Elliott","Cunningham","Knight","Bradley","Carroll","Hudson","Duncan","Armstrong","Berry","Andrews","Johnston","Ray","Lane","Riley","Carpenter","Perkins","Aguilar","Silva","Richards","Willis","Matthews","Chapman","Lawrence","Garza","Vargas","Watkins","Wheeler","Larson","Carlson","Harper","George","Greene","Burke","Guzman","Morrison","Munoz","Jacobs","Obrien","Lawson","Franklin","Lynch","Bishop","Carr","Salazar","Austin","Mendez","Gilbert","Jensen","Williamson","Montgomery","Harvey","Oliver","Howell","Dean","Hanson","Weber","Garrett","Sims","Burton","Fuller","Soto","Mccoy","Welch","Chen","Schultz","Walters","Reid","Fields","Walsh","Little","Fowler","Bowman","Davidson","May","Day","Schneider","Newman","Brewer","Lucas","Holland","Wong","Banks","Santos","Curtis","Pearson","Delgado","Valdez","Pena","Rios","Douglas","Sandoval","Barrett","Hopkins","Keller","Guerrero","Stanley","Bates","Alvarado","Beck","Ortega","Wade","Estrada","Contreras","Barnett","Caldwell","Santiago","Lambert","Powers","Chambers","Nunez","Craig","Leonard","Lowe","Rhodes","Byrd","Gregory","Shelton","Frazier","Becker","Maldonado","Fleming","Vega","Sutton","Cohen","Jennings","Parks","Mcdaniel","Watts","Barker","Norris","Vaughn","Vazquez","Holt","Schwartz","Steele","Benson","Neal","Dominguez","Horton","Terry","Wolfe","Hale","Lyons","Graves","Haynes","Miles","Park","Warner","Padilla","Bush","Thornton","Mccarthy","Mann","Zimmerman","Erickson","Fletcher","Mckinney","Page","Dawson","Joseph","Marquez","Reeves","Klein","Espinoza","Baldwin","Moran","Love","Robbins","Higgins","Ball","Cortez","Le","Griffith","Bowen","Sharp","Cummings","Ramsey","Hardy","Swanson","Barber","Acosta","Luna","Chandler","Blair","Daniel","Cross","Simon","Dennis","Oconnor","Quinn","Gross","Navarro","Moss","Fitzgerald","Doyle","Mclaughlin","Rojas","Rodgers","Stevenson","Singh","Yang","Figueroa","Harmon","Newton","Paul","Manning","Garner","Mcgee","Reese","Francis","Burgess","Adkins","Goodman","Curry","Brady","Christensen","Potter","Walton","Goodwin","Mullins","Molina","Webster","Fischer","Campos","Avila","Sherman","Todd","Chang","Blake","Malone","Wolf","Hodges","Juarez","Gill","Farmer","Hines","Gallagher","Duran","Hubbard","Cannon","Miranda","Wang","Saunders","Tate","Mack","Hammond","Carrillo","Townsend","Wise","Ingram","Barton","Mejia","Ayala","Schroeder","Hampton","Rowe","Parsons","Frank","Waters","Strickland","Osborne","Maxwell","Chan","Deleon","Norman","Harrington","Casey","Patton","Logan","Bowers","Mueller","Glover","Floyd","Hartman","Buchanan","Cobb","French","Kramer","Mccormick","Clarke","Tyler","Gibbs","Moody","Conner","Sparks","Mcguire","Leon","Bauer","Norton","Pope","Flynn","Hogan","Robles","Salinas","Yates","Lindsey","Lloyd","Marsh","Mcbride","Owen","Solis","Pham","Lang","Pratt","Lara","Brock","Ballard","Trujillo","Shaffer","Drake","Roman","Aguirre","Morton","Stokes","Lamb","Pacheco","Patrick","Cochran","Shepherd","Cain","Burnett","Hess","Li","Cervantes","Olsen","Briggs","Ochoa","Cabrera","Velasquez","Montoya","Roth","Meyers","Cardenas","Fuentes","Weiss","Hoover","Wilkins","Nicholson","Underwood","Short","Carson","Morrow","Colon","Holloway","Summers","Bryan","Petersen","Mckenzie","Serrano","Wilcox","Carey","Clayton","Poole","Calderon","Gallegos","Greer","Rivas","Guerra","Decker","Collier","Wall","Whitaker","Bass","Flowers","Davenport","Conley","Houston","Huff","Copeland","Hood","Monroe","Massey","Roberson","Combs","Franco","Larsen","Pittman","Randall","Skinner","Wilkinson","Kirby","Cameron","Bridges","Anthony","Richard","Kirk","Bruce","Singleton","Mathis","Bradford","Boone","Abbott","Charles","Allison","Sweeney","Atkinson","Horn","Jefferson","Rosales","York","Christian","Phelps","Farrell","Castaneda","Nash","Dickerson","Bond","Wyatt","Foley","Chase","Gates","Vincent","Mathews","Hodge","Garrison","Trevino","Villarreal","Heath","Dalton","Valencia","Callahan","Hensley","Atkins","Huffman","Roy","Boyer","Shields","Lin","Hancock","Grimes","Glenn","Cline","Delacruz","Camacho","Dillon","Parrish","Oneill","Melton","Booth","Kane","Berg","Harrell","Pitts","Savage","Wiggins","Brennan","Salas","Marks","Russo","Sawyer","Baxter","Golden","Hutchinson","Liu","Walter","Mcdowell","Wiley","Rich","Humphrey","Johns","Koch","Suarez","Hobbs","Beard","Gilmore","Ibarra","Keith","Macias","Khan","Andrade","Ware","Stephenson","Henson","Wilkerson","Dyer","Mcclure","Blackwell","Mercado","Tanner","Eaton","Clay","Barron","Beasley","Oneal","Preston","Small","Wu","Zamora","Macdonald","Vance","Snow","Mcclain","Stafford","Orozco","Barry","English","Shannon","Kline","Jacobson","Woodard","Huang","Kemp","Mosley","Prince","Merritt","Hurst","Villanueva","Roach","Nolan","Lam","Yoder","Mccullough","Lester","Santana","Valenzuela","Winters","Barrera","Leach","Orr","Berger","Mckee","Strong","Conway","Stein","Whitehead","Bullock","Escobar","Knox","Meadows","Solomon","Velez","Odonnell","Kerr","Stout","Blankenship","Browning","Kent","Lozano","Bartlett","Pruitt","Buck","Barr","Gaines","Durham","Gentry","Mcintyre","Sloan","Melendez","Rocha","Herman","Sexton","Moon","Hendricks","Rangel","Stark","Lowery","Hardin","Hull","Sellers","Ellison","Calhoun","Gillespie","Mora","Knapp","Mccall","Morse","Dorsey","Weeks","Nielsen","Livingston","Leblanc","Mclean","Bradshaw","Glass","Middleton","Buckley","Schaefer","Frost","Howe","House","Mcintosh","Ho","Pennington","Reilly","Hebert","Mcfarland","Hickman","Noble","Spears","Conrad","Arias","Galvan","Velazquez","Huynh","Frederick","Randolph","Cantu","Fitzpatrick","Mahoney","Peck","Villa","Michael","Donovan","Mcconnell","Walls","Boyle","Mayer","Zuniga","Giles","Pineda","Pace","Hurley","Mays","Mcmillan","Crosby","Ayers","Case","Bentley","Shepard","Everett","Pugh","David","Mcmahon","Dunlap","Bender","Hahn","Harding","Acevedo","Raymond","Blackburn","Duffy","Landry","Dougherty","Bautista","Shah","Potts","Arroyo","Valentine","Meza","Gould","Vaughan","Fry","Rush","Avery","Herring","Dodson","Clements","Sampson","Tapia","Bean","Lynn","Crane","Farley","Cisneros","Benton","Ashley","Mckay","Finley","Best","Blevins","Friedman","Moses","Sosa","Blanchard","Huber","Frye","Krueger","Bernard","Rosario","Rubio","Mullen","Benjamin","Haley","Chung","Moyer","Choi","Horne","Yu","Woodward","Ali","Nixon","Hayden","Rivers","Estes","Mccarty","Richmond","Stuart","Maynard","Brandt","Oconnell","Hanna","Sanford","Sheppard","Church","Burch","Levy","Rasmussen","Coffey","Ponce","Faulkner","Donaldson","Schmitt","Novak","Costa","Montes","Booker","Cordova","Waller","Arellano","Maddox","Mata","Bonilla","Stanton","Compton","Kaufman","Dudley","Mcpherson","Beltran","Dickson","Mccann","Villegas","Proctor","Hester","Cantrell","Daugherty","Cherry","Bray","Davila","Rowland","Levine","Madden","Spence","Good","Irwin","Werner","Krause","Petty","Whitney","Baird","Hooper","Pollard","Zavala","Jarvis","Holden","Haas","Hendrix","Mcgrath","Bird","Lucero","Terrell","Riggs","Joyce","Mercer","Rollins","Galloway","Duke","Odom","Andersen","Downs","Hatfield","Benitez","Archer","Huerta","Travis","Mcneil","Hinton","Zhang","Hays","Mayo","Fritz","Branch","Mooney","Ewing","Ritter","Esparza","Frey","Braun","Gay","Riddle","Haney","Kaiser","Holder","Chaney","Mcknight","Gamble","Vang","Cooley","Carney","Cowan","Forbes","Ferrell","Davies","Barajas","Shea","Osborn","Bright","Cuevas","Bolton","Murillo","Lutz","Duarte","Kidd","Key","Cooke"]}'),a=function(e){return Math.floor(Math.random()*e)},s=function(){if(!i)return"Unknown";if(!i.data)return"Unknown";var e=i.data;if(!Array.isArray(e))return"Unknown";var t=e.length;return e[a(t)]+" "+e[a(t)]}},613:function(e,t){"use strict";t.Z=function(e,t){var n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789*#%&!",i="",a=e;void 0!=t&&(a-=t.length,i+=t);for(var s=0;s<a;s++){var r=Math.floor(67*Math.random());i+=n.charAt(r)}return i}},614:function(e,t){"use strict";t.Z=function(e,t){if(0==t.length)return e;for(var n=e,i=0;i<t.length;i++)n=n.replace(/{}/,""+t[i]);return n}}},t={};function n(i){var a=t[i];if(void 0!==a)return a.exports;var s=t[i]={id:i,loaded:!1,exports:{}};return e[i].call(s.exports,s,s.exports,n),s.loaded=!0,s.exports}n.m=e,n.amdO={},function(){var e=[];n.O=function(t,i,a,s){if(!i){var r=1/0;for(u=0;u<e.length;u++){i=e[u][0],a=e[u][1],s=e[u][2];for(var o=!0,c=0;c<i.length;c++)(!1&s||r>=s)&&Object.keys(n.O).every((function(e){return n.O[e](i[c])}))?i.splice(c--,1):(o=!1,s<r&&(r=s));if(o){e.splice(u--,1);var h=a();void 0!==h&&(t=h)}}return t}s=s||0;for(var u=e.length;u>0&&e[u-1][2]>s;u--)e[u]=e[u-1];e[u]=[i,a,s]}}(),n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,{a:t}),t},n.d=function(e,t){for(var i in t)n.o(t,i)&&!n.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},n.f={},n.e=function(e){return Promise.all(Object.keys(n.f).reduce((function(t,i){return n.f[i](e,t),t}),[]))},n.u=function(e){return e+"."+{7:"c55d4acd7b496face505",109:"50dfa17ee67fefb9cba6",123:"29321b588faf53edbb9b",131:"0f24191caebafcdfbf15",302:"43196ba65a957ea385bd",401:"978aeec5b43c21361fa1",498:"a255dd1c0fd0a89845f7",530:"2fd9adb2f079cd476c38",557:"17049c3c34a0e2c2a4dd",613:"1b0f6c85a3002360c4d3",616:"52d5cdc15da9810dd06d",638:"cc1467901250b1f11470",739:"1d0d1e54b014862f1be5",803:"dc55eafae1c64ea7a423",942:"b59724f5449dd29997c2",961:"b9b0ca302d2a2b861a15"}[e]+".bundle.js"},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.hmd=function(e){return(e=Object.create(e)).children||(e.children=[]),Object.defineProperty(e,"exports",{enumerable:!0,set:function(){throw new Error("ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: "+e.id)}}),e},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},function(){var e={},t="game-core:";n.l=function(i,a,s,r){if(e[i])e[i].push(a);else{var o,c;if(void 0!==s)for(var h=document.getElementsByTagName("script"),u=0;u<h.length;u++){var l=h[u];if(l.getAttribute("src")==i||l.getAttribute("data-webpack")==t+s){o=l;break}}o||(c=!0,(o=document.createElement("script")).charset="utf-8",o.timeout=120,n.nc&&o.setAttribute("nonce",n.nc),o.setAttribute("data-webpack",t+s),o.src=i),e[i]=[a];var d=function(t,n){o.onerror=o.onload=null,clearTimeout(p);var a=e[i];if(delete e[i],o.parentNode&&o.parentNode.removeChild(o),a&&a.forEach((function(e){return e(n)})),t)return t(n)},p=setTimeout(d.bind(null,void 0,{type:"timeout",target:o}),12e4);o.onerror=d.bind(null,o.onerror),o.onload=d.bind(null,o.onload),c&&document.head.appendChild(o)}}}(),n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e},function(){var e;n.g.importScripts&&(e=n.g.location+"");var t=n.g.document;if(!e&&t&&(t.currentScript&&(e=t.currentScript.src),!e)){var i=t.getElementsByTagName("script");i.length&&(e=i[i.length-1].src)}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),n.p=e}(),function(){var e={757:0};n.f.j=function(t,i){var a=n.o(e,t)?e[t]:void 0;if(0!==a)if(a)i.push(a[2]);else{var s=new Promise((function(n,i){a=e[t]=[n,i]}));i.push(a[2]=s);var r=n.p+n.u(t),o=new Error;n.l(r,(function(i){if(n.o(e,t)&&(0!==(a=e[t])&&(e[t]=void 0),a)){var s=i&&("load"===i.type?"missing":i.type),r=i&&i.target&&i.target.src;o.message="Loading chunk "+t+" failed.\n("+s+": "+r+")",o.name="ChunkLoadError",o.type=s,o.request=r,a[1](o)}}),"chunk-"+t,t)}},n.O.j=function(t){return 0===e[t]};var t=function(t,i){var a,s,r=i[0],o=i[1],c=i[2],h=0;if(r.some((function(t){return 0!==e[t]}))){for(a in o)n.o(o,a)&&(n.m[a]=o[a]);if(c)var u=c(n)}for(t&&t(i);h<r.length;h++)s=r[h],n.o(e,s)&&e[s]&&e[s][0](),e[s]=0;return n.O(u)},i=self.webpackChunkgame_core=self.webpackChunkgame_core||[];i.forEach(t.bind(null,0)),i.push=t.bind(null,i.push.bind(i))}(),n.O(void 0,[216,630,542],(function(){return n(609)})),n.O(void 0,[216,630,542],(function(){return n(610)})),n.O(void 0,[216,630,542],(function(){return n(426)})),n.O(void 0,[216,630,542],(function(){return n(427)})),n.O(void 0,[216,630,542],(function(){return n(617)})),n.O(void 0,[216,630,542],(function(){return n(528)}));var i=n.O(void 0,[216,630,542],(function(){return n(547)}));i=n.O(i)})();