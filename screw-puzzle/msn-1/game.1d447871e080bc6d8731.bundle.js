(function(){var e={462:function(){HTMLCanvasElement.prototype.toBlob||Object.defineProperty(HTMLCanvasElement.prototype,"toBlob",{value:function(e,t,n){for(var i=atob(this.toDataURL(t,n).split(",")[1]),r=i.length,s=r>>2,a=new Uint8Array(r),o=new Uint32Array(a.buffer,0,s),c=0,l=0;c<s;c++)o[c]=i.charCodeAt(l++)|i.charCodeAt(l++)<<8|i.charCodeAt(l++)<<16|i.charCodeAt(l++)<<24;for(var u=3&r;u--;)a[l]=i.charCodeAt(l++);e(new Blob([a],{type:t||"image/png"}))}})},616:function(e,t,n){"use strict";n.d(t,{J:function(){return L},Z:function(){return N}});var i=n(68),r=n(129),s=n.n(r),a=n(38),o=n.n(a),c=n(56),l=n.n(c),u=n(47),h=n.n(u),d=n(101),p=n(132),f=n.n(p),v=function(e){return function(t){t.preventDefault();var n=document.getElementById("popup-add-shortcut");null==n||n.remove(),e()}},m=function(e){var t=document.createElement("div");return t.innerHTML=f()(e).call(e),t.firstChild},g=function(){var e=(0,i.Z)(h().mark((function e(t,n){var i,r,s;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=m('<div style="height: 50vh;width: 53vh;max-width: 95vw;position:absolute;background-color: rgba(31, 120, 136, 0.48);border-radius: 2vh;margin: auto;right: 0;left: 0;top: 0;bottom: 0;display: flex;flex-direction:column;justify-content:space-evenly;">\n            <p style="color:white;font-size:40px;text-align:center">Add shortcut for this game</p>\n            <p style="color:white;font-size:20px;text-align:center">This game wants to add a shortcut.</p>\n        </div>'),r=m('<button style="border: none;background-color: #1877f2;color: #fff;width: 90%;height: 50px;border-radius: 15px;margin-left: auto;margin-right: auto;font-size: 20px;cursor: pointer;">No</button>'),s=m('<button style="border: none;background-color: #1877f2;color: #fff;width: 90%;height: 50px;border-radius: 15px;margin-left: auto;margin-right: auto;font-size: 20px;cursor: pointer;">Yes</button>'),i&&r&&s||n({code:"CREATE_POPUP_ERROR",message:"Show popup failed"}),i.id="popup-add-shortcut",i.appendChild(r),i.appendChild(s),document.body.appendChild(i),r.addEventListener("click",v(n)),s.addEventListener("click",v(t));case 10:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),y=function(){function e(){this.isFirstCall=!0}var t=e.prototype;return t.canCreateShortcutAsync=function(){var e=(0,i.Z)(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isFirstCall){e.next=3;break}return this.isFirstCall=!1,e.abrupt("return",!0);case 3:return e.abrupt("return",!1);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),t.createShortcutAsync=function(){var e=(0,i.Z)(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new(o())((function(e,t){g(e,t)})));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),e}(),E=y,S=function(e){return function(t){t.preventDefault();var n=document.getElementById("popup-subscribe-bots");null==n||n.remove(),e()}},w=function(e){var t=document.createElement("div");return t.innerHTML=f()(e).call(e),t.firstChild},I=function(){var e=(0,i.Z)(h().mark((function e(t,n){var i,r,s;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=w('<div style="height: 50vh;width: 53vh;max-width: 95vw;position:absolute;background-color: rgba(31, 120, 136, 0.48);border-radius: 2vh;margin: auto;right: 0;left: 0;top: 0;bottom: 0;display: flex;flex-direction:column;justify-content:space-evenly;">\n            <p style="color:white;font-size:40px;text-align:center">Turn on messages from this game</p>\n            <p style="color:white;font-size:20px;text-align:center">This game wants to send messages, announcements and more.</p>\n        </div>'),r=w('<button style="border: none;background-color: #1877f2;color: #fff;width: 90%;height: 50px;border-radius: 15px;margin-left: auto;margin-right: auto;font-size: 20px;cursor: pointer;">Not Now</button>'),s=w('<button style="border: none;background-color: #1877f2;color: #fff;width: 90%;height: 50px;border-radius: 15px;margin-left: auto;margin-right: auto;font-size: 20px;cursor: pointer;">Turn On</button>'),i&&r&&s||n({code:"CREATE_POPUP_ERROR",message:"Show popup failed"}),i.id="popup-subscribe-bots",i.appendChild(r),i.appendChild(s),document.body.appendChild(i),r.addEventListener("click",S(n)),s.addEventListener("click",S(t));case 10:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),A=function(){function e(){this.isFirstCall=!0}var t=e.prototype;return t.canSubscribeBotAsync=function(){var e=(0,i.Z)(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isFirstCall){e.next=3;break}return this.isFirstCall=!1,e.abrupt("return",!0);case 3:return e.abrupt("return",!1);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),t.subscribeBotAsync=function(){var e=(0,i.Z)(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new(o())((function(e,t){I(e,t)})));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),e}(),T=A,C=n(432),b=n(199),P=n(639),x=n(433),R=GameCore.Configs,O=R.Notification,_=R.AddShortcut,k=R.SubscribeBot,D=O.GameTitle,L=(O.GameImage,function(){function e(){}var t=e.prototype;return t.createAsync=function(){var e=(0,i.Z)(h().mark((function e(t){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,GameSDK.tournament.createAsync(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t.shareAsync=function(){var e=(0,i.Z)(h().mark((function e(t){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,GameSDK.tournament.shareAsync(t);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t.joinAsync=function(){var e=(0,i.Z)(h().mark((function e(t){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,GameSDK.tournament.joinAsync(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t.postScoreAsync=function(){var e=(0,i.Z)(h().mark((function e(t){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,GameSDK.tournament.postScoreAsync(t);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t.getTournamentsAsync=function(){var e=(0,i.Z)(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,GameSDK.tournament.getTournamentsAsync();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),e}()),B=function(){function e(e){var t=this;this.facebook=void 0,this.supportedAPIs=[],this.mockSubscribeBot=void 0,this.mockAddShortcut=void 0,this.isCalledSubscribeBot=!1,this.isCalledCreateShortcut=!1,this.isCanPlayerMatch=null,this.isCanSubscribeBot=null,this.isCanCreateShortcut=null,this.attemptToAddShortcut=(0,i.Z)(h().mark((function e(){var n,i,r,s,a,o;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.isCalledCreateShortcut){e.next=2;break}return e.abrupt("return",!1);case 2:if(e.prev=2,null===t.isCanCreateShortcut&&(_.UseMock?t.isCanCreateShortcut=!0:t.isCanCreateShortcut=t.isSupportedAPI("canCreateShortcutAsync")),t.isCanCreateShortcut){e.next=6;break}return e.abrupt("return",!1);case 6:return e.next=8,GameSDK.player.getDataAsync(["lastCallCreateShortcut"]);case 8:if(e.t0=e.sent,e.t0){e.next=11;break}e.t0={};case 11:if(n=e.t0,!(i=n.lastCallCreateShortcut||0)||!(0,b.Gm)(+i)){e.next=15;break}return e.abrupt("return",!1);case 15:if(!_.UseMock){e.next=21;break}return e.next=18,t.mockAddShortcut.canCreateShortcutAsync();case 18:e.t1=e.sent,e.next=24;break;case 21:return e.next=23,GameSDK.canCreateShortcutAsync();case 23:e.t1=e.sent;case 24:if(r=e.t1,s=Date.now(),GameSDK.player.setDataAsync({lastCallCreateShortcut:s}),!r){e.next=49;break}return a=d._.SHORTCUT_CREATE,o=d._.SHORTCUT_CREATE_POPUP,t.isCalledCreateShortcut=!0,window.game.analytics.event(o),e.prev=31,e.next=34,GameCore.Utils.Valid.isValueChangeAsync(window.__fbGameReady,!0);case 34:if(!_.UseMock){e.next=39;break}return e.next=37,t.mockAddShortcut.createShortcutAsync();case 37:e.next=41;break;case 39:return e.next=41,FBInstant.createShortcutAsync();case 41:return window.game.analytics.event(a,{success:!0}),e.abrupt("return",!0);case 45:return e.prev=45,e.t2=e.catch(31),window.game.analytics.event(a,{success:!1}),e.abrupt("return",!1);case 49:return e.abrupt("return",!1);case 52:return e.prev=52,e.t3=e.catch(2),e.abrupt("return",!1);case 55:case"end":return e.stop()}}),e,null,[[2,52],[31,45]])}))),this.attemptToSubscribeBot=(0,i.Z)(h().mark((function e(){var n,i,r,s,a;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.isCalledSubscribeBot){e.next=2;break}return e.abrupt("return",!1);case 2:if(e.prev=2,null===t.isCanSubscribeBot&&(k.UseMock?t.isCanSubscribeBot=!0:t.isCanSubscribeBot=t.isSupportedAPI("player.canSubscribeBotAsync")),t.isCanSubscribeBot){e.next=6;break}return e.abrupt("return",!1);case 6:if(!k.UseMock){e.next=12;break}return e.next=9,t.mockSubscribeBot.canSubscribeBotAsync();case 9:e.t0=e.sent,e.next=15;break;case 12:return e.next=14,GameSDK.player.canSubscribeBotAsync();case 14:e.t0=e.sent;case 15:if(!e.t0){e.next=49;break}return e.next=19,GameSDK.player.getDataAsync(["lastCallSubscribeBot"]);case 19:if(e.t1=e.sent,e.t1){e.next=22;break}e.t1={};case 22:if(n=e.t1,!(i=n.lastCallSubscribeBot)||!(0,b.Gm)(+i)){e.next=26;break}return e.abrupt("return",!1);case 26:return r=Date.now(),GameSDK.player.setDataAsync({lastCallSubscribeBot:r}),s=d._.BOT_SUBSCRIBE,a=d._.BOT_SUBSCRIBE_POPUP,t.isCalledSubscribeBot=!0,window.game.analytics.event(a),e.prev=31,e.next=34,GameCore.Utils.Valid.isValueChangeAsync(window.__fbGameReady,!0);case 34:if(!k.UseMock){e.next=39;break}return e.next=37,t.mockSubscribeBot.subscribeBotAsync();case 37:e.next=41;break;case 39:return e.next=41,GameSDK.player.subscribeBotAsync();case 41:return window.game.analytics.event(s,{success:!0}),e.abrupt("return",!0);case 45:return e.prev=45,e.t2=e.catch(31),window.game.analytics.event(s,{success:!1}),e.abrupt("return",!1);case 49:return e.abrupt("return",!1);case 52:return e.prev=52,e.t3=e.catch(2),e.abrupt("return",!1);case 55:case"end":return e.stop()}}),e,null,[[2,52],[31,45]])}))),this.matchPlayerAsync=function(){var e=(0,i.Z)(h().mark((function e(n,i,r){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,null===t.isCanPlayerMatch&&(t.isCanPlayerMatch=t.isSupportedAPI("checkCanPlayerMatchAsync")),t.isCanPlayerMatch){e.next=4;break}return e.abrupt("return",!1);case 4:return e.next=6,GameSDK.checkCanPlayerMatchAsync();case 6:if(e.sent){e.next=9;break}return e.abrupt("return",!1);case 9:return e.next=11,GameSDK.matchPlayerAsync(n,i,r);case 11:return e.abrupt("return",!0);case 14:return e.prev=14,e.t0=e.catch(0),e.abrupt("return",!1);case 17:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(t,n,i){return e.apply(this,arguments)}}(),this.getTournamentAsync=(0,i.Z)(h().mark((function e(){var n,i,r;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.facebook.tournament.getTournamentsAsync();case 2:if(n=e.sent,i=GameSDK.context.getID(),!(r=s()(n).call(n,(function(e){return e.getContextID()===i})))){e.next=7;break}return e.abrupt("return",o().resolve(r));case 7:return e.abrupt("return",o().reject(new P.Z(null)));case 8:case"end":return e.stop()}}),e)}))),this.requestTournamentAsync=function(){var e=(0,i.Z)(h().mark((function e(n){var i;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.facebook.getTournamentAsync();case 3:return e.next=5,t.facebook.tournament.shareAsync({score:n});case 5:e.next=12;break;case 7:return e.prev=7,e.t0=e.catch(0),i=GameSDK.player.getName(),e.next=12,t.facebook.tournament.createAsync({initialScore:n,config:{tournamentTitle:i+"'s Tournament"}});case 12:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),this.isSupportedAPI=function(e){var n;return 0===t.supportedAPIs.length&&(t.supportedAPIs=GameSDK.getSupportedAPIs()),l()(n=t.supportedAPIs).call(n,e)},this.facebook=e,this.mockSubscribeBot=new T,this.mockAddShortcut=new E}var t=e.prototype;return t.switchAsync=function(){var e=(0,i.Z)(h().mark((function e(t){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,GameCore.Utils.Valid.isValueChangeAsync(window.__fbGameReady,!0);case 2:return e.next=4,GameSDK.context.switchAsync(t);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t.chooseAsync=function(){var e=(0,i.Z)(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,GameCore.Utils.Valid.isValueChangeAsync(window.__fbGameReady,!0);case 3:return e.next=5,GameSDK.context.chooseAsync({filters:["INCLUDE_EXISTING_CHALLENGES"],minSize:2,maxSize:2});case 5:case 15:return e.abrupt("return",GameSDK.context.getID());case 8:if(e.prev=8,e.t0=e.catch(0),!(e.t0 instanceof Object&&GameCore.Utils.Object.hasOwn(e.t0,"code"))){e.next=16;break}e.t1=e.t0.code,e.next="USER_INPUT"===e.t1?14:"SAME_CONTEXT"===e.t1?15:16;break;case 14:return e.abrupt("return",!1);case 16:return e.abrupt("return",null);case 17:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}(),t.createAsync=function(){var e=(0,i.Z)(h().mark((function e(t){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,GameCore.Utils.Valid.isValueChangeAsync(window.__fbGameReady,!0);case 3:return e.next=5,GameSDK.context.createAsync(""+t);case 5:case 15:return e.abrupt("return",GameSDK.context.getID());case 8:if(e.prev=8,e.t0=e.catch(0),!(e.t0 instanceof Object&&GameCore.Utils.Object.hasOwn(e.t0,"code"))){e.next=16;break}e.t1=e.t0.code,e.next="USER_INPUT"===e.t1?14:"SAME_CONTEXT"===e.t1?15:16;break;case 14:return e.abrupt("return",!1);case 16:return e.abrupt("return",null);case 17:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),t.getPlayerToken=function(){var e=(0,i.Z)(h().mark((function e(){var t;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,GameSDK.player.getSignedPlayerInfoAsync();case 2:return t=e.sent,e.abrupt("return",t.getSignature());case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),t.getContextPlayers=function(){var e=(0,i.Z)(h().mark((function e(t){var n,i;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,GameSDK.context.getPlayersAsync();case 3:return n=e.sent,i=[],n.forEach((function(e){var n=e.getID();if(n!==t){var r=e.getName();if(r){var s=e.getPhoto();i.push(new C.Z(n,r,s).toObject())}}})),e.abrupt("return",GameCore.Utils.Array.unique(i));case 9:return e.prev=9,e.t0=e.catch(0),e.abrupt("return",[]);case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}(),t.shareAsync=function(){var e=(0,i.Z)(h().mark((function e(t){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,GameSDK.shareAsync(t);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t.sendMessage=function(){var e=(0,i.Z)(h().mark((function e(t){var n,i,r,s,a,o;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.data,i=t.image,r=t.template,s=t.cta,a=t.text,o={data:n,image:i,action:"CUSTOM",template:r,cta:s,text:a,strategy:"IMMEDIATE",notification:"PUSH"},e.next=4,GameSDK.updateAsync(o);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t.inviteAsync=function(){var e=(0,i.Z)(h().mark((function e(t){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,GameSDK.inviteAsync(t);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t.postSessionScoreAsync=function(){var e=(0,i.Z)(h().mark((function e(t){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,GameSDK.postSessionScoreAsync(t);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t.getRewardedVideoAsync=function(){var e=(0,i.Z)(h().mark((function e(t){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,GameSDK.getRewardedVideoAsync(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t.getInterstitialAdAsync=function(){var e=(0,i.Z)(h().mark((function e(t){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,GameSDK.getInterstitialAdAsync(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t.getContextID=function(){return GameSDK.context.getID()},t.setLoadingProgress=function(e){GameSDK.setLoadingProgress(e)},t.getLocale=function(){return GameSDK.getLocale()||"en"},t.injectTournament=function(){var e=(0,i.Z)(h().mark((function e(){var t,i;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!GameCore.Configs.Tournament.UseMock){e.next=11;break}return e.next=4,n.e(783).then(n.bind(n,633));case 4:t=e.sent.default,i=new t,this.facebook.tournament=i,GameSDK.getTournamentAsync=this.getTournamentAsync,GameSDK.tournament=i,e.next=12;break;case 11:this.facebook.tournament=new L;case 12:this.facebook.getTournamentAsync=function(){return FBInstant.getTournamentAsync()},this.facebook.requestTournamentAsync=this.requestTournamentAsync;case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),t.sendNotificationAsync=function(){var e=(0,i.Z)(h().mark((function e(t){var n,i,r;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=t.message,i=t.delayTime,r=t.type,e.next=5,FBInstant.scheduleNotificationAsync({title:D,minDelayInSeconds:i,description:n,type:null!=r?r:x.Z.GENERIC_NOTIFICATION});case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),e}(),N=B},463:function(e,t,n){"use strict";var i=n(71),r=n.n(i),s=n(39),a=n.n(s),o=function(e,t){return void 0===t&&(t=1),r()({length:Math.ceil(e.length/t)},(function(n,i){return a()(e).call(e,i*t,i*t+t)}))},c=n(48),l=n.n(c),u=n(56),h=n.n(u),d=function(e,t){return l()(e).call(e,(function(e){return!h()(t).call(t,e)}))},p=n(428),f=n(70),v=n.n(f),m=function(e,t,n){return v()(n).call(n,e)===t&&null!==e&&void 0!==e},g=function(e){return l()(e).call(e,m)},y={chunk:o,difference:d,shuffle:p.Z,unique:g},E=n(104),S=n.n(E),w=n(266),I=n.n(w),A=I()((function(e,t){if("string"===typeof e){var n=t[e.toLowerCase()];if("string"===typeof n)return n}return"?"})),T=I()((function(e){for(var t=null,n=[],i=/:([A-Z0-9?]+)/gm;null!==(t=i.exec(e));)n.push(t[1]);return n})),C=I()((function(e){for(var t=null,n=[],i=/([0-9]+[A-Z?]{1}|[A-Z?]{1})/gm;null!==(t=i.exec(e));){var r=t[0];if(r.length>=2){var s,o=r.length,c=a()(r).call(r,0,o-1),l=r[o-1],u=S()(s=new Array(+c)).call(s,l);n.push.apply(n,u)}else n.push(r)}return n})),b=function(e,t){var n=e,i=GameCore.Utils.Object.invert(t),r={},s=0,a=0;return T(n).forEach((function(e){s=0,a++,r[a]||(r[a]={}),C(e).forEach((function(e){s++,r[a][s]=A(e,i)}))})),r},P=I()((function(e,t){var n=t[e];return"string"===typeof n?""+n.toUpperCase():"?"})),x=function e(t,n,i){void 0===i&&(i=!1);var r="";if(!GameCore.Utils.Valid.isObject(t))return r;var s="",o=1;for(var c in t)if(GameCore.Utils.Object.hasOwn(t,c)){var l=t[c];if(GameCore.Utils.Valid.isObject(l))r+=":"+e(l,n,!0);else if(GameCore.Utils.Valid.isString(l)){var u=P(l,n);u===s?(o++,r=a()(r).call(r,0,-2)):o=1,r+=""+o+u,s=u}}return r=r.replace(/1([A-Z])/g,"$1")},R=function(e){try{return atob(e)}catch(t){return""}},O={decodeMap:b,encodeMap:x,hashToString:R,stringToHash:function(e){try{return btoa(e)}catch(t){return""}}},_=function(e){try{return JSON.parse(e)}catch(t){return null}},k=n(73),D=n.n(k),L=function(e){try{return D()(e,null,0)}catch(t){return""}},B=function(e){return _(L(e))},N={clone:B,decode:_,encode:L},H=function(e){var t="object"===typeof e||"function"===typeof e,n=Array.isArray(e);return null!==e&&t&&!n},M=function(e){return void 0===e||null===e},G=function e(t){if(!H(t))return t;for(var n in t){M(t[n])&&delete t[n];var i=t[n];H(i)&&(t[n]=e(i))}return t},W=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},U=n(103),F=n.n(U),Z=function(e){var t={};return F()(e).forEach((function(n){if(W(e,n)){var i=e[n];"string"===typeof i&&(t[i]=n)}})),t},Y=function(e,t){if(!Array.isArray(e))return{};var n={};return e.forEach((function(e){if(W(e,t)){var i=e[t];"string"===typeof i&&(n[i]=e)}})),n},V={clear:G,hasOwn:W,invert:Z,keyBy:Y},z=function(e){return e?e[0].toUpperCase()+a()(e).call(e,1):e},K=function(e){var t=0;if(0==e.length)return t;for(var n=0;n<e.length;n++){t=(t<<5)-t+e.charCodeAt(n),t&=t}return t},j=n(74),X=n.n(j),Q=function(e){var t;return X()(t=F()(e)).call(t,(function(t,n){var i=e[n];return void 0!==i&&t.push(n+"="+i),t}),[]).join("&")},q=function(e){void 0===e&&(e="0x");for(var t=e,n=0;n<6;n++)t+="0123456789ABCDEF"[Math.floor(16*Math.random())];return t},J=n(429),$=function(e){return e.normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/[\u0111\u0110]/g,(function(e){return"\u0111"===e?"d":"D"}))},ee=n(69),te=n.n(ee),ne=n(483),ie=n.n(ne),re=function(e,t){var n,i=e.split(" "),r=(i.length<=1?te()(n=[]).call(n,i):[i[0],i.pop()]).join(" "),s=ie()(r).call(r," ")||0,a=s>=0?s:t;return(r.length>t?r.substring(0,a):r).substring(0,t)},se=n(273),ae=n.n(se),oe=function(e){void 0===e&&(e=16);var t=function(t){return Math.floor(t).toString(e)};return t(Date.now()/1e3)+ae()(" ").call(" ",e).replace(/./g,(function(){return t(Math.random()*e)}))},ce={capitalize:z,hashCode:K,params:Q,toCamelCase:function(e){var t=e.replace(/[-_\s.]+(.)?/g,(function(e,t){return t?t.toUpperCase():""}));return t.substr(0,1).toLowerCase()+t.substr(1)},toUpperCamelCase:function(e){var t=e.replace(/[-_\s.]+(.)?/g,(function(e,t){return t?t.toUpperCase():""}));return t.substr(0,1).toUpperCase()+t.substr(1)},randomColor:q,random:J.Z,removeDiacritics:$,getShortName:re,generateObjectId:oe},le=function(e){return"boolean"===typeof e},ue=function(){return!1},he=function(e){return"function"===typeof e},de=function(e){return"number"===typeof e},pe=function(e){var t;return v()(t=["string","number","symbol"]).call(t,typeof e)>-1},fe=function(e){return"string"===typeof e},ve=n(38),me=n.n(ve),ge=function(e,t,n){var i=n||{},r=i.timeout,s=void 0===r?1e3:r,a=i.checkInterval,o=void 0===a?100:a;return new(me())((function(n){var i=setInterval((function(){("function"===typeof e?e():e)===("function"===typeof t?t():t)&&(clearInterval(i),n(!0))}),o);s>0&&setTimeout((function(){clearInterval(i),n(!1)}),s)}))},ye={isBoolean:le,isDebugger:ue,isFunction:he,isNumber:de,isObject:H,isPropertyKey:pe,isString:fe,isValueChangeAsync:ge},Ee=function(e){var t=e.scene,n=e.key,i=e.newKey,r=t.textures.get(n).getSourceImage();if(!r)return!1;var s=Math.min(r.width,r.height);i||t.textures.removeKey(n);var a=t.textures.createCanvas(i||n,s,s),o=a.context;return o.beginPath(),o.arc(s/2,s/2,s/2,0,2*Math.PI,!1),o.clip(),a.draw((r.width-s)/2,(r.height-s)/2,r),!0},Se=function(e){var t=e.scene,n=e.key,i=e.newKey,r=e.radius,s=e.width,a=e.height,o=t.textures.get(n).getSourceImage();if(!o)return!1;s||(s=o.width),a||(a=o.height),i||t.textures.removeKey(n);var c=t.textures.createCanvas(i||n,s,a),l=c.context,u=Math.min(s,a)/100*r/2;return l.beginPath(),l.moveTo(0+u,0),l.lineTo(0+s-u,0),l.quadraticCurveTo(0+s,0,0+s,0+u),l.lineTo(0+s,0+a-u),l.quadraticCurveTo(0+s,0+a,0+s-u,0+a),l.lineTo(0+u,0+a),l.quadraticCurveTo(0,0+a,0,0+a-u),l.lineTo(0,0+u),l.quadraticCurveTo(0,0,0+u,0),l.closePath(),l.clip(),c.draw(0,0,o),!0},we=function(){if(GameCore.Utils.Device.isDesktop())return 2;var e=GameCore.Utils.Device.pixelRatio();return e<1&&(e=1),e>3&&(e=3),e=Math.round(e)},Ie=function(e,t){var n=e.split(","),i=n[0].match(/:(.*?);/);if(!i)return null;for(var r=i[1],s=atob(n[n.length-1]),a=s.length,o=new Uint8Array(a);a--;)o[a]=s.charCodeAt(a);return new File([o],t,{type:r})},Ae=n(210),Te=n.n(Ae),Ce=new Image,be=function(e,t){return void 0===t&&(t=!0),new(me())((function(n){t&&(Ce=new Image),Ce.onload=function(){n(Ce)},Ce.onerror=function(){n(null)},Ce.src=Te().createObjectURL(e)}))},Pe=n(68),xe=n(47),Re=n.n(xe),Oe=function(){var e=(0,Pe.Z)(Re().mark((function e(t,n){var i;return Re().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t).then((function(e){return e.blob()})).catch((function(){return null}));case 2:if(i=e.sent){e.next=5;break}return e.abrupt("return",null);case 5:return e.abrupt("return",new File([i],n));case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),_e=function(e){if(v()(e).call(e,".")<0)return e;for(var t=e.length-1;t>=0;t--){if("."==e[t])return e.substring(0,t);if("0"!=e[t])return e.substring(0,t+1)}return e},ke=function(e,t){var n=t||{},i=n.fractionalDigits,r=void 0===i?0:i,s=n.startAbbreviate,a=void 0===s?1e3:s,o=n.abbreviateStep,c=void 0===o?3:o,l=n.maxLength,u=void 0===l?-1:l,h=n.removeLastZero,d=void 0===h||h,p=n.suffixes,f=void 0===p?["","k","m","b","t","q"]:p,v=-1===u?99999999:u;if(e>=a){var m=Math.floor(e/Math.pow(10,c)),g=Math.floor((m.toString().length-1)/c)+1,y=(e/Math.pow(Math.pow(10,c),g)).toFixed(r),E=v-f[g].length,S=y.substring(0,E);return(d?_e(S):S)+f[g]}var w=e.toFixed(r),I=v-f[0].length,A=w.substring(0,I);return d?_e(A):A+f[0]},De={Array:y,Hash:O,Json:N,Object:V,String:ce,Valid:ye,Image:{drawCircle:Ee,drawBorder:Se,getImageScale:we,base64ToFile:Ie,blobToHtmlImage:be,blobUrlToFile:Oe},Number:{toAbbreviatedString:ke,padStart:function(e,t,n){void 0===n&&(n="0");for(var i=e.toString(),r=i.length,s=0;s<t-r;s++)i=n+i;return i},padEnd:function(e,t,n){void 0===n&&(n="0");for(var i=e.toString(),r=i.length,s=0;s<t-r;s++)i+=n;return i},random:function(e,t){var n=t?Math.random()>.5?1:-1:1;return Math.floor(Math.random()*e)*n}},Device:{isDesktop:function(){return!/Android|iPhone|iPad|iPod/i.test(navigator.userAgent)},isMobile:function(){return/Android|iPhone|iPad|iPod/i.test(navigator.userAgent)},isAndroid:function(){return window.__fbPlatform?"ANDROID"===window.__fbPlatform:/Android/i.test(navigator.userAgent)},isIOS:function(){return window.__fbPlatform?"IOS"===window.__fbPlatform:/iPhone|iPad|iPod/i.test(navigator.userAgent)},isMobileWeb:function(){return window.__fbPlatform?"MOBILE_WEB"===window.__fbPlatform:/mobile/i.test(navigator.userAgent)},pixelRatio:function(){return Math.round(window.devicePixelRatio)||1}},Time:{isToday:function(e){var t=new Date(e),n=new Date;return t.getDate()===n.getDate()&&t.getMonth()===n.getMonth()&&t.getFullYear()===n.getFullYear()},sleepAsync:function(e){return new(me())((function(t){return setTimeout(t,e)}))}}},Le=n(36),Be=n(196),Ne={ENV:"production",AppId:"9n21399h2r5p",Notification:{Enable:!0},LeadersBoard:{Prefix:"leaderboards"},Debugger:{ShowConsole:!1,ShowInspector:!1,ShowMonitoring:!1},Statistics:{Enable:!1,ShowFPSInGame:!1,ShowMemoryInGame:!1}},He={ENV:"production",AppId:"9n21399h2r5p",Notification:{Enable:!0},LeadersBoard:{Prefix:"leaderboards"},Debugger:{ShowConsole:!1,ShowInspector:!1,ShowMonitoring:!1},Statistics:{Enable:!1,ShowFPSInGame:!1,ShowMemoryInGame:!1}},Me={ENV:"development",AppId:"",ApiHost:"https://fbig-singleplay-apps-dev.sunstudio.io",OtherHost:"https://leaderboards-dev.sunstudio.io",Level:{url:"./assets/levels/",urlEditLevel:"./assets/levels/",alwaysLoadNew:!1},SyncProfileFromAPI:!1,Notification:{Enable:!0,DisableSendNotification:!1,ApiUrl:"https://notifications.sunstudio.io",GameTitle:"Screw Puzzle: Nut and Bolt",GameImage:"https://sunstudio.io/images/logo.png",DailyNotificationMessages:{MONDAY:"Start your week with a twist! Solve mind-bending puzzles and master new challenges in Screw Puzzle: Nut and Bolt! \ud83d\udd29",TUESDAY:"Feeling up for a challenge? Test your skills with today's wooden puzzle adventure. Log in now! \ud83e\udde9",WEDNESDAY:"Can you solve today's conundrum? Navigate bolts, nuts, and obstacles in Screw Puzzle. Dive in! \ud83c\udf1f",THURSDAY:"Time to think like a mechanic! Face unique challenges and solve wooden puzzles today. \ud83d\udee0\ufe0f",FRIDAY:"The weekend is near! Relax with some riveting puzzles in Screw Puzzle: Nut and Bolt. \ud83c\udf89",SATURDAY:"A new level of challenge awaits! Outsmart obstacles and explore wood-packed puzzles today. \ud83c\udf33",SUNDAY:"Wrap up the week with a puzzle! Log in to tackle captivating challenges in Screw Puzzle. \ud83e\udde0"}},AddShortcut:{UseMock:!1},SubscribeBot:{UseMock:!1},PlayerMock:{id:"",signature:""},OpponentMock:{id:"",signature:""},MatchMockFailRate:5,Gameplay:{StartLevel:1,StartScore:0,StartDiamonds:0,DefaultDiamondsForNewUser:300,LevelDifficultRate:{FromUnder30:1.07,FromUnder35:1.05,FromUnder45:1.05,FromUnder200:1.1},StartAdAtLevel:2,GiftTime:10800,AwardDiamonds:100,FreeItems:!1,DelayStart:2e3,DelayLevelUp:1800,DelayFinishGame:2900,ShowSwitchStepAnimation:!0,EnableVibrate:!0,TimePlay:{UseMock:!1,Enable:!0,Step1:6e4,Step2:18e4,Bonus:60,RescuePrice:[10]},ScaleFactor:1.2,MinLevelToBuyBat:5,UseLoopLevel:!0,LevelReward:{Enable:!0,Step:1,Reward:{GoldScrew:1,SilverScrew:10}}},Tutorial:{ForceUseTutorial:!1,NumberOfTutorial:{FirstMove:3,TargetScore:1,CurrentScore:1,ColorfulGem:1,ItemPaint:1,ItemHammer:1,ItemShuffle:1}},PlayerDataStore:"playerData",Game:{AutoResize:!0,PortraitRatio:460/792,PortraitWidth:360,PortraitHeight:760,OrientationThreshold:625/792,LandscapeRatio:1.92,LandscapeWidth:713,MaxLandscapeWidth:900,LandscapeHeight:612,ForcePixelRatio:0,DisableLandscape:!1,FullSizeOnLandscape:!1},Debugger:{ShowInspector:!1,ShowMonitoring:!1,ShowConsole:!1,Expanded:!0,AutoRefresh:!0,InspectorAutoUpdate:!0,Opacity:.8,ListPlayerDevIds:[]},Statistics:{Enable:!1,DisplayMode:0,FPS:!0,MS:!0,MB:!0,Opacity:.8,ShowFPSInGame:!0,ShowMemoryInGame:!1},ParticleEditor:{Enable:!1,Opacity:.8,Expanded:!0},ProfilerPlugin:{Enable:!1},CanvasRecorder:{Enable:!1,Options:{Type:"png",Quality:.85,RecordFps:60,SyncFps:!0}},Match:{MaxRescueCount:1,RescueGamePopupTimeout:15,ContinueSingleMatchEnabled:!1,SingleMatchStore:"singleMatch",LocalSingleMatchDefault:{_id:"12345678890",status:"open",playerId:"",score:0,level:1,startedAt:0,updateAt:0,finishAt:0,data:{}}},DailyRewards:{MaxDays:6,MockTime:0,CheckInterrupt:!0},DailyTasks:{Duration:86400},Tournament:{UseMock:!1,ForcePlay:!1,UseLeaderboard:!1,TournamentContextIds:[],YourMockTournamentCount:1},LeadersBoard:{Name:null,UseMock:!1,Prefix:"leaderboards",LeaderboardId:"5fbb6bee3f2485dac9b1dfa3",Limit:50,MockOptions:{PlayerEntryIndex:-1}},LanguageSupport:{en:"en"},EnableEffectSceneTransition:!0,DefaultTheme:"default",ThemeSupport:{default:"default"},Ads:{Enabled:!0,AdService:"msgames",FallbackService:"google",AdServiceConfigs:{Google:{DataAdClient:"ca-pub-2993382360222769",DataAdFrequencyHint:30,DataAdBreakTest:!1,DataAdChannel:"1916678984",MaxScriptLoadRetryCount:3}},CalculateSafeAreaBottom:!0,EnableRewardVideoResetInterstitial:!1,Mockup:{Enable:!1,ErrorRate:5,GiphyApiKey:"VmjHIRsfrwCAssDS4mDo9DoImxJm1lLM"},InterstitialAdOptions:{pID:"",showWhenStartGame:!1,secondsFirstTime:30,secondsBetweenAds:30},MinLevelToShow:2,RewardAdOptions:{pID:"",secondsFirstTime:0,secondsBetweenAds:0},BannerAdOptions:[{placementId:"123",position:"bottom",bannerWidth:320,bannerHeight:50,platform:"MOBILE",secondsReload:60},{placementId:"456",position:"right",bannerWidth:160,bannerHeight:600,platform:"DESKTOP",secondsReload:60}]},Network:{MaximumRequest:6,Timeout:15e3,Retries:3},Analytics:{GoogleAnalytics:{consoleLog:!1},FacebookAnalytics:{prefix:"fba",consoleLog:!1}},Sentry:{errorCodes:{accepted:[],ignored:["USER_INPUT","NETWORK_FAILURE"]},errorMessages:{accepted:[],ignored:["Load image failed","Script error."]}},Rollbar:{Enable:!1,UseMockup:!1,FilterError:{Codes:{accepted:[],ignored:["USER_INPUT","NETWORK_FAILURE"]},Messages:{accepted:[],ignored:["Load image failed","Request failed to be processed","Script error."]}}},Performance:{Enable:!1,trackingSceneKeys:["DASHBOARD_SCENE","GAME_SCENE"],minQuality:1,maxQuality:2,fpsThreshold:48,checkInterval:2e3,qualityAdjustStep:.1,autoUpgradeQuality:!0,onlyUpdateWhenSwitchScene:!0},ForceStartGame:!1,DailyQuests:{Enable:!0,LevelStart:1,rewardList:[{level:1,target:30,reward:{SilverScrew:10}},{level:2,target:50,reward:{GoldScrew:2}},{level:3,target:70,reward:{SilverScrew:20}},{level:4,target:100,reward:{GoldScrew:3}},{level:5,target:120,reward:{SilverScrew:30}},{level:6,target:140,reward:{GoldScrew:4}},{level:7,target:180,reward:{SilverScrew:40}},{level:8,target:200,reward:{GoldScrew:5}},{level:9,target:220,reward:{SilverScrew:50}},{level:10,target:400,reward:{GoldScrew:8}}]},Payment:{enable:!1,showMock:!0,mockProducts:[{title:"Gold Screw",productID:"gold_screw_10",priceAmount:2.99},{title:"Gold Screw",productID:"gold_screw_30",priceAmount:6.99},{title:"Gold Screw",productID:"gold_screw_60",priceAmount:13.99},{title:"Silver Screw",productID:"silver_screw_15",priceAmount:2.99},{title:"Silver Screw",productID:"silver_screw_45",priceAmount:6.99},{title:"Silver Screw",productID:"silver_screw_90",priceAmount:13.99},{title:"Remove Ads",productID:"remove_ads_30",priceAmount:3.99},{title:"Remove Ads Bundle",productID:"remove_ads_30_bundle",priceAmount:6.99}],nonConsumableProductID:[]},Items:{RemoveScrew:{MaxScrew:3,PriceRescue:[{GoldScrew:10}]},Hammer:{AffectRadius:100,PriceRescue:[{GoldScrew:10}]},Undo:{PriceRescue:[{SilverScrew:50}]},Replay:{PriceRescue:[{SilverScrew:50}]},AdsHole:{PriceRescue:[{GoldScrew:10}]},Lightning:{StrikeCount:3,PriceRescue:[{GoldScrew:10}]},BonusTime:{PriceRescue:[{GoldScrew:10}],Duration:4e4},WatchAdReward:{GoldScrew:10,SilverScrew:50}}};Me=(0,Be.TS)((0,Le.Z)({},Me),He);var Ge=Me=(0,Be.TS)((0,Le.Z)({},Me),Ne),We=function(e){return function(t){try{var n=window.game,i=t.module;if(n.scene.getScenes(!0)[0].scene.key!==e)return;var r=i.default;n.scene.remove(e),n.scene.add(e,r,!0),n.scene.bringToTop(n.globalScene)}catch(a){var s;null==(s=void 0)||s.invalidate()}}},Ue=n(553),Fe=n.n(Ue),Ze=n(555),Ye=n.n(Ze),Ve=n(557),ze=n.n(Ve),Ke=n(197),je=!1,Xe=function e(t,n,i){n.forEach((function(n){if(n.name){var r=null;if(r=i?i.getByName(n.name):t.children.getByName(n.name)){if("Container"===n.type){var s=r,a=n.getAll();if(e(t,a,s),!s.hotContainer)return}var o=Fe()(n),c=["_events","_sysEvents","input","localTransform","list","displayList"],u=l()(o).call(o,(function(e){if("string"!==typeof e)return!1;if(v()(c).call(c,e)>=0)return!1;if(!r)return!1;var t=Ye()(n,e);return!(t instanceof Function)&&(!(t instanceof Phaser.Scene)&&(!(t instanceof Phaser.GameObjects.Group)&&(!(t instanceof Phaser.GameObjects.GameObject)&&t===Ye()(r,e))))}));u.length<1||u.forEach((function(e){if(r){var t=Ye()(n,e);Ye()(r,e),ze()(r,e,t)}}))}}}))},Qe={Configs:Ge,Utils:De,LiveUpdate:{Scene:We,SceneObjects:function(e,t){return void 0===t&&(t=je),function(n){try{var i=window.game,r=n.module,s=i.scene.getScenes(!0)[0];if(s.scene.key!==e)return;je=t;var a=r.default,o=e+"-draft";i.scene.remove(o);var c=i.scene.add(o,a);s=i.scene.getScene(e),c.events.once(Phaser.Scenes.Events.RENDER,(0,Ke.D)((function(){var e=c.children.getAll();Xe(s,e),i.scene.remove(o)})),50),i.scene.run(o),i.scene.bringToTop(s),i.scene.bringToTop(i.globalScene)}catch(l){}}}}};window.GameCore=Qe},618:function(e,t,n){"use strict";n.d(t,{U:function(){return w},v:function(){return I}});var i=n(36),r=n(68),s=n(47),a=n.n(s),o=n(73),c=n.n(o),l=n(14),u=n(200),h=function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).name="BadRequest",i.message=t||"This request is bad",i.payload=n,i}return(0,l.Z)(t,e),t}((0,u.Z)(Error)),d=function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).name="RequestTimeout",i.message=t||"This request is timeout",i.payload=n,i}return(0,l.Z)(t,e),t}((0,u.Z)(Error)),p=n(199),f=GameCore.Configs,v=f.AppId,m=f.Network,g=function(e){if(!e.ok)throw new h(null,{response:e})},y=function(){var e=window.game.auth.getToken();return{token:e,timeout:m.Timeout,headers:{Authorization:"Bearer "+e,"Content-Type":"application/json"}}},E=function(e,t,n,i){return(0,r.Z)(a().mark((function r(){var s,o,l,u,p;return a().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,s=e+"/apps/"+v+"/"+t,o=new AbortController,n.signal=o.signal,l=setTimeout((function(){o.abort()}),n.timeout),GameCore.Utils.Valid.isObject(i)&&(n.body=c()(i)),r.next=8,fetch(s,n);case 8:return u=r.sent,clearTimeout(l),g(u),r.next=13,u.json();case 13:if(r.t0=r.sent,r.t0){r.next=16;break}r.t0={};case 16:return p=r.t0,r.abrupt("return",p);case 20:if(r.prev=20,r.t1=r.catch(0),!(r.t1 instanceof h)){r.next=24;break}return r.abrupt("return",null);case 24:if(!(r.t1 instanceof Object&&GameCore.Utils.Object.hasOwn(r.t1,"name"))){r.next=27;break}if("AbortError"!==r.t1.name){r.next=27;break}throw new d(null);case 27:throw r.t1;case 28:case"end":return r.stop()}}),r,null,[[0,20]])})))},S=function(){var e=(0,r.Z)(a().mark((function e(t,n){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.abrupt("return",t());case 4:if(e.prev=4,e.t0=e.catch(0),!(e.t0 instanceof d&&n>0)){e.next=18;break}return e.prev=7,e.next=10,(0,p.qZ)(600);case 10:return e.next=12,S(t,n-1);case 12:return e.abrupt("return",e.sent);case 15:return e.prev=15,e.t1=e.catch(7),e.abrupt("return",{});case 18:if(!(e.t0 instanceof d)){e.next=20;break}return e.abrupt("return",{});case 20:return e.abrupt("return",{});case 22:case"end":return e.stop()}}),e,null,[[0,4],[7,15]])})));return function(t,n){return e.apply(this,arguments)}}(),w=function(){var e=(0,r.Z)(a().mark((function e(t,n,r,s){var o,c;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return void 0===n&&(n={}),void 0===s&&(s=m.Retries),e.prev=2,o=(0,i.Z)({},y(),n,{method:"GET"}),c=E(r,t,o),e.next=7,S(c,s);case 7:return e.abrupt("return",e.sent);case 10:return e.prev=10,e.t0=e.catch(2),e.abrupt("return",{});case 14:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(t,n,i,r){return e.apply(this,arguments)}}(),I=function(){var e=(0,r.Z)(a().mark((function e(t,n,r,s,o){var c,l;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return void 0===r&&(r={}),void 0===o&&(o=m.Retries),e.prev=2,c=(0,i.Z)({},y(),r,{method:"POST"}),l=E(s,t,c,n),e.next=7,S(l,o);case 7:return e.abrupt("return",e.sent);case 10:return e.prev=10,e.t0=e.catch(2),e.abrupt("return",{});case 14:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(t,n,i,r,s){return e.apply(this,arguments)}}()},436:function(e,t,n){"use strict";n.d(t,{DW:function(){return c},EH:function(){return s},fJ:function(){return r},kL:function(){return i},qj:function(){return a},rh:function(){return o}});var i="CONTEXT_RECEIVED",r="CONTEXT_PROCESSED",s="CONTEXT_GAME_MODE_DETECTED",a="MESSAGES_SENT_UPDATE",o="MESSAGES_SENT_REMOVE",c="SCENE_KEY_UPDATE"},639:function(e,t,n){"use strict";var i=n(14),r=function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).name="TournamentNotFound",i.message=t||"A Tournament with current context was not found",i.payload=n,i.code="TOURNAMENT_NOT_FOUND",i}return(0,i.Z)(t,e),t}((0,n(200).Z)(Error));t.Z=r},90:function(e,t,n){"use strict";var i=n(196),r=function(){function e(e,t){if(this.scene=void 0,this.config=void 0,this.isStarted=void 0,this.tween=void 0,!(t.targets.length<1)){this.buildConfig(e,t);var n=this.config.targets[0].scene;n&&(this.scene=n,this.isStarted=!1,this.tween=n.tweens.create(this.config))}}var t=e.prototype;return t.buildConfig=function(e,t){this.config=(0,i.TS)(e,t)},t.play=function(){this.tween&&(this.isStarted&&this.tween.hasStarted?this.restart():(this.tween.play(),this.isStarted=!0))},t.restart=function(){var e;null==(e=this.tween)||e.restart()},t.stop=function(){var e;null==(e=this.tween)||e.stop()},t.remove=function(){var e;null==(e=this.tween)||e.remove()},t.next=function(e){return this.tween?(this.tween.off(Phaser.Tweens.Events.TWEEN_COMPLETE,e),this.tween.once(Phaser.Tweens.Events.TWEEN_COMPLETE,e),this.tween):null},e}();t.Z=r},439:function(e,t,n){"use strict";var i=n(36),r=n(54),s=n(48),a=n.n(s),o=n(70),c=n.n(o),l=n(38),u=n.n(l),h=n(55),d=n.n(h),p=n(69),f=n.n(p),v=n(440),m=function(){function e(e){this.events=void 0,this.parent=void 0,this.children=[],this.timeScale=1,this.loop=0,this.tweenLoopAnimation=void 0,this.events=new Phaser.Events.EventEmitter,this.createAnimation(e)}var t=e.prototype;return t.createAnimation=function(e){for(var t=0;t<e.length;t++){var n=e[t].target;Array.isArray(n)||(n=[n]);for(var r=0;r<n.length;r++){var s=e[t].delay||0;"function"===typeof s&&(s=s(n[r],"",0,r,n.length)),this.addAnimation(new v.Z((0,i.Z)({},e[t],{target:n[r],delay:s})))}}},t.addAnimationGraph=function(e){this.createAnimation(e)},t.addAnimation=function(e){var t,n=this;this.children.push(e),this.children=a()(t=this.children).call(t,(function(e,t){var i;return c()(i=n.children).call(i,e)===t})),e.parent=this},t.removeAnimation=function(e){var t;this.children=a()(t=this.children).call(t,(function(t,n){return t!==e})),e.parent=void 0},t.start=function(){var e,t=this;return null==(e=this.tweenLoopAnimation)||e.complete(),0===this.loop?this.startAnimation():new(u())((function(e){var n=t.children[0].scene;t.tweenLoopAnimation=n.tweens.addCounter({from:0,to:1,duration:t.duration,loop:t.loop,onStart:function(){t.startAnimation()},onLoop:function(){t.startAnimation()},onComplete:function(){e()}})}))},t.startAnimation=function(){var e=this;return 0===this.children.length?u().resolve():new(u())((function(t){var n;e.events.emit("start");var i=d()(n=e.children).call(n,(function(t){return t.setTimeScale(e.timeScale),t.start()}));u().all(i).then((function(){e.events.emit("complete"),t()}))}))},t.stop=function(){this.events.emit("stop"),this.children.forEach((function(e){e.stop()}))},t.emitEvent=function(e){for(var t,n,i,r,s=arguments.length,a=new Array(s>1?s-1:0),o=1;o<s;o++)a[o-1]=arguments[o];((t=this.events).emit.apply(t,f()(n=[e]).call(n,a)),this.parent)&&(i=this.parent).emitEvent.apply(i,f()(r=[e]).call(r,a))},t.seek=function(e){this.children.forEach((function(t){t.seek(e)}))},t.seekPercent=function(e){var t=this.duration*e;this.seek(t)},t.setTimeScale=function(e){void 0===e&&(e=1),this.timeScale=e},t.setDelay=function(e){this.children.forEach((function(t){t.setDelay(e)}))},t.setLoop=function(e){this.loop=e},(0,r.Z)(e,[{key:"scene",get:function(){return this.children[0].scene}},{key:"duration",get:function(){var e;return Math.max.apply(Math,d()(e=this.children).call(e,(function(e){return e.duration})))}},{key:"isPlaying",get:function(){return this.children.some((function(e){return e.isPlaying}))}}]),e}();m.WORLD_SCALE=1/2.88,t.Z=m},440:function(e,t,n){"use strict";n.d(t,{Z:function(){return B}});var i=n(54),r=n(55),s=n.n(r),a=n(38),o=n.n(a),c=n(48),l=n.n(c),u=n(36),h=n(439);function d(e){for(var t=e.length-1;t>0;t--){var n=e[t],i=e[t-1];if(n.v!=i.v||"stepped"!==i.curve&&"linear"!==i.curve)break;e.pop()}return e}function p(e,t,n,i,r,s){return{curve:i==n?0:(e[4*t+0]-n)/(i-n)||0,c2:s==r?0:(e[4*t+1]-r)/(s-r)||0,c3:i==n?0:(e[4*t+2]-n)/(i-n)||1,c4:s==r?0:(e[4*t+3]-r)/(s-r)||1}}var f=function(e){var t=e.target;return(0,u.Z)({},function(e,t){void 0===t&&(t=[]);function n(e){e=e.replace(/^#/,"");var t=parseInt(e,16);return{r:t>>24&255,g:t>>16&255,b:t>>8&255,a:255&t}}for(var i=e.tint||16777215,r=Phaser.Display.Color.ColorToRGBA(i),s=r.r,a=r.g,o=r.b,c=(r.a,e.alpha),l=[],h=[],f=[],v=[],m=0;m<t.length;m++){var g=t[m],y=c,E=s,S=a,w=o;if(g.color){var I=n(g.color);y=I.a/255,E=I.r,S=I.g,w=I.b}var A={curve:"linear",c2:0,c3:1,c4:1},T={curve:"linear",c2:0,c3:1,c4:1},C={curve:"linear",c2:0,c3:1,c4:1},b={curve:"linear",c2:0,c3:1,c4:1};if(g.curve instanceof Array){t.length;var P=t[m+1],x=c,R=s,O=a,_=o;if(P.color){var k=n(P.color);x=k.a/255,R=k.r,O=k.g,_=k.b}var D=g.time||0,L=P.time||1,B=E,N=R,H=S,M=O,G=w,W=_,U=y,F=x;A=p(g.curve,0,D,L,B,N),T=p(g.curve,1,D,L,H,M),C=p(g.curve,2,D,L,G,W),b=p(g.curve,3,D,L,U,F)}else T=A=(0,u.Z)({},A,g,{curve:void 0===g.curve?A.curve:g.curve}),C=A,b=A;v.push((0,u.Z)({time:0,v:y},g,b)),l.push((0,u.Z)({time:0,v:E},g,A)),h.push((0,u.Z)({time:0,v:S},g,T)),f.push((0,u.Z)({time:0,v:w},g,C))}d(v);var Z=e.setTint;return Z&&"function"===typeof Z?{tintR:l,tintG:h,tintB:f,alpha:v}:{tintR:[],tintB:[],tintG:[],alpha:v}}(t,e.color||e.rgba),function(e,t){void 0===t&&(t=[]);for(var n=e.scaleX,i=e.scaleY,r=[],s=[],a=0;a<t.length;a++){var o=t[a],c={curve:"linear",c2:0,c3:1,c4:1},l={curve:"linear",c2:0,c3:1,c4:1};if(o.curve instanceof Array){t.length;var h=t[a+1],f=o.time||0,v=h.time||1,m=o.x||0,g=h.x||0,y=o.y||0,E=h.y||0;c=p(o.curve,0,f,v,m,g),l=p(o.curve,1,f,v,y,E)}else l=c=(0,u.Z)({},c,o,{curve:void 0===o.curve?c.curve:o.curve});r.push((0,u.Z)({time:0,v:void 0==o.x?n:o.x*n},o,c)),s.push((0,u.Z)({time:0,v:void 0==o.y?i:o.y*i},o,l))}return d(r),d(s),{scaleX:r,scaleY:s}}(t,e.scale),function(e,t,n){void 0===t&&(t=[]);for(var i=e.x,r=e.y,s=[],a=[],o=(null==n?void 0:n.translate)||"default",c=h.Z.WORLD_SCALE,l=0;l<t.length;l++){var f=t[l],v={curve:"linear",c2:0,c3:1,c4:1},m={curve:"linear",c2:0,c3:1,c4:1};if(f.curve instanceof Array){t.length;var g=t[l+1],y=f.time||0,E=g.time||1,S=f.x||0,w=g.x||0,I=f.y||0,A=g.y||0;v=p(f.curve,0,y,E,S,w),m=p(f.curve,1,y,E,I,A)}else m=v=(0,u.Z)({},v,f,{curve:void 0===f.curve?v.curve:f.curve});switch(o){case"default":s.push((0,u.Z)({time:0,v:void 0==f.x?i:f.x*c+i},f,v)),a.push((0,u.Z)({time:0,v:void 0==f.y?r:-f.y*c+r},f,m));break;case"correctPosition":s.push((0,u.Z)({time:0,v:void 0==f.x?i:f.x},f,v)),a.push((0,u.Z)({time:0,v:void 0==f.y?r:f.y},f,m))}}return d(s),d(a),{x:s,y:a}}(t,e.translate,e.mode),function(e,t){void 0===t&&(t=[]);for(var n=e.angle,i=[],r=0;r<t.length;r++){var s=t[r],a={curve:"linear",c2:0,c3:1,c4:1};if(s.curve instanceof Array){t.length;var o=t[r+1],c=s.time||0,l=o.time||1,h=s.angle||s.value||0,f=o.angle||o.value||0;a=p(s.curve,0,c,l,h,f)}else a=(0,u.Z)({},a,s,{curve:void 0===s.curve?a.curve:s.curve});i.push((0,u.Z)({time:0,v:void 0==s.angle?void 0==s.value?n:-s.value:-s.angle},s,a))}return d(i),{angle:i}}(t,e.rotate),function(e,t){void 0===t&&(t=[]);e.angle;var n=[],i=e.spineConfig;if(void 0===i)return{deform:[]};for(var r=i.vertices,a=function(){var e=t[o],i=e.vertices,a=e.offset||0,c={curve:"linear",c2:0,c3:1,c4:1};if(e.curve instanceof Array){t.length;var l=t[o+1],h=e.time||0,d=l.time||1,f=0,v=1;c=p(e.curve,0,h,d,f,v)}else c=(0,u.Z)({},c,e,{curve:void 0===e.curve?c.curve:e.curve});n.push((0,u.Z)({time:0,v:void 0==i?r:s()(r).call(r,(function(e,t){return t<a?e:e+(i[t-a]||0)}))},e,c))},o=0;o<t.length;o++)a();return function(e){for(var t=function(e,t){if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0},n=e.length-1;n>0;n--){var i=e[n],r=e[n-1];if(!t(i.v,r.v)||"stepped"!==r.curve&&"linear"!==r.curve)break;e.pop()}1===e.length&&e.pop()}(n),{deform:n}}(t,e.deform),function(e,t){void 0===t&&(t=[]);for(var n=e.shearX,i=e.shearY,r=[],s=[],a=0;a<t.length;a++){var o=t[a],c={curve:"linear",c2:0,c3:1,c4:1},l={curve:"linear",c2:0,c3:1,c4:1};if(o.curve instanceof Array){t.length;var h=t[a+1],f=o.time||0,v=h.time||1,m=o.x||0,g=h.x||0,y=o.y||0,E=h.y||0;c=p(o.curve,0,f,v,m,g),l=p(o.curve,1,f,v,y,E)}else l=c=(0,u.Z)({},c,o,{curve:void 0===o.curve?c.curve:o.curve});r.push((0,u.Z)({time:0,v:void 0==o.x?n:o.x},o,c)),s.push((0,u.Z)({time:0,v:void 0==o.y?i:o.y},o,l))}return d(r),d(s),{shearX:r,shearY:s}}(t,e.shear),function(e,t){void 0===t&&(t=[]);for(var n=0,i=[],r=0;r<t.length;r++){var s=t[r],a={curve:"linear",c2:0,c3:1,c4:1};if(s.curve instanceof Array){t.length;var o=t[r+1],c=s.time||0,l=o.time||1,h=0,f=1;a=p(s.curve,0,c,l,h,f)}else a=(0,u.Z)({},a,s,{curve:void 0===s.curve?a.curve:s.curve});i.push((0,u.Z)({time:0,v:void 0==s.position?n:s.position},s,a))}return d(i),{position:i}}(0,e.position),function(e,t){void 0===t&&(t=[]);if(e instanceof Phaser.GameObjects.Image){for(var n=e.frame.name,i=Number(n.match(/\d+/))||1,r=[],s=0;s<t.length;s++){var a,o=t[s],c=Number(null==(a=o.name)?void 0:a.match(/\d+/))||i;r.push((0,u.Z)({time:0,v:c},o,{curve:"stepped",c2:0,c3:1,c4:1}))}return d(r),{attachment:r}}return{attachment:[]}}(t,e.attachment))},v=n(14),m=n(105),g=n.n(m);function y(e,t){return void 0===t&&(t=!1),function(t){var n,i,r=t/1e3;if(r<e[0].time)return e[0].v;for(var s=0;s<e.length-1;s++)if(r>=e[s].time&&r<=e[s+1].time){n=e[s],i=e[s+1];break}if(n&&i){if("stepped"===n.curve)return n.v;var a=(r-n.time)/(i.time-n.time),o="linear"===n.curve?a:g()(Phaser.Math.Clamp(n.curve,0,1),n.c2,Phaser.Math.Clamp(n.c3,0,1),n.c4)(a);return n.v+(i.v-n.v)*o}return e[e.length-1].v}}var E={tintR:[],tintG:[],tintB:[],alpha:[],scaleX:[],scaleY:[],x:[],y:[],angle:[],deform:[],shearX:[],shearY:[],position:[],attachment:[]},S=function(){function e(e,t){this.gameObject=void 0,this.tweenAnimationGraph=void 0,this.minTime=void 0,this.maxTime=void 0,this.gameObject=e,this.tweenAnimationGraph=t||E}var t=e.prototype;return t.start=function(){},t.update=function(e){},t.complete=function(){},t.applyMinMaxTime=function(e){if(1===e.length)return this.minTime=0,void(this.maxTime=0);for(var t=0;t<e.length;t++){var n=e[t];(void 0===this.minTime||this.minTime>n.time)&&(this.minTime=n.time),(void 0===this.maxTime||this.maxTime<n.time)&&(this.maxTime=n.time)}},e}(),w=function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).curve=void 0,i.curve=y(n.alpha),i.applyMinMaxTime(n.alpha),i}return(0,v.Z)(t,e),t.prototype.update=function(e){var t=this.curve(e);this.gameObject.alpha=t},t}(S);function I(e,t){return void 0===t&&(t=!1),function(t){var n,i,r=t/1e3;if(r<e[0].time)return e[0].v;for(var s=0;s<e.length-1;s++)if(r>=e[s].time&&r<=e[s+1].time){n=e[s],i=e[s+1];break}if(n&&i){if("stepped"===n.curve)return n.v;var a=(r-n.time)/(i.time-n.time),o="linear"===n.curve?a:g()(Phaser.Math.Clamp(n.curve,0,1),n.c2,Phaser.Math.Clamp(n.c3,0,1),n.c4)(a),c=i.v,l=n.v,u=c-l;return u<-180?u+=360:u>180&&(u-=360),l+u*o}return e[e.length-1].v}}var A=function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).curve=void 0,i.curve=I(n.angle),i.applyMinMaxTime(n.angle),i}return(0,v.Z)(t,e),t.prototype.update=function(e){var t=this.curve(e);this.gameObject.angle=t},t}(S),T=function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).curve=void 0,i.curve=y(n.attachment),i.applyMinMaxTime(n.attachment),i}return(0,v.Z)(t,e),t.prototype.update=function(e){var t=Math.ceil(this.curve(e));if(this.gameObject instanceof Phaser.GameObjects.Image){var n=this.gameObject.frame.name.split("-")[0];this.gameObject.setFrame(n+"-"+t,!1,!1)}},t}(S);var C=function(e){function t(t,n){var i,r,s;return(i=e.call(this,t,n)||this).curve=void 0,i.curve=(r=n.deform,void 0===s&&(s=!1),function(e){var t,n,i=e/1e3;if(i<r[0].time)return r[0].v;for(var s=0;s<r.length-1;s++)if(i>=r[s].time&&i<=r[s+1].time){t=r[s],n=r[s+1];break}if(t&&n){if("stepped"===t.curve)return t.v;for(var a=(i-t.time)/(n.time-t.time),o="linear"===t.curve?a:g()(Phaser.Math.Clamp(t.curve,0,1),t.c2,Phaser.Math.Clamp(t.c3,0,1),t.c4)(a),c=[],l=0;l<t.v.length;l++){var u=t.v[l]+(n.v[l]-t.v[l])*o;c.push(u)}return c}return r[r.length-1].v}),i.applyMinMaxTime(n.deform),i}return(0,v.Z)(t,e),t.prototype.update=function(e){var t=this.gameObject.setVertices;if(t&&"function"===typeof t){var n=this.curve(e);t.bind(this.gameObject)(n)}},t}(S),b=function(e){function t(t,n){var i;return(i=e.call(this,t.gameObject)||this).lastT=void 0,i.eventKeyFrames=void 0,i.currentIndex=0,i.animation=void 0,i.eventKeyFrames=n,i.animation=t,i.applyMinMaxTimeEvent(n),i}(0,v.Z)(t,e);var n=t.prototype;return n.start=function(){this.lastT=void 0,this.currentIndex=0},n.update=function(e){void 0===this.lastT&&(this.lastT=e,e+=1e-8);for(var t=this.currentIndex;t<this.eventKeyFrames.length;t++){var n=this.eventKeyFrames[t],i=1e3*n.time;this.lastT<=i&&e>i&&(this.animation.events.emit(n.eventName),this.animation.parent&&this.animation.parent.emitEvent(n.eventName),this.currentIndex=t+1)}this.lastT=e},n.complete=function(){if(this.currentIndex<this.eventKeyFrames.length)for(var e=this.currentIndex;e<this.eventKeyFrames.length;e++){var t=this.eventKeyFrames[e];this.animation.events.emit(t.eventName),this.animation.parent&&this.animation.parent.emitEvent(t.eventName),this.currentIndex=e+1}},n.applyMinMaxTimeEvent=function(e){for(var t=0;t<e.length;t++){var n=e[t];(void 0===this.minTime||this.minTime>n.time)&&(this.minTime=n.time),(void 0===this.maxTime||this.maxTime<n.time)&&(this.maxTime=n.time)}},t}(S),P=function(e){function t(t,n,i){var r;return(r=e.call(this,t,n)||this).curve=void 0,r.path=void 0,r.path=i,r.curve=y(n.position),r.applyMinMaxTime(n.position),r}return(0,v.Z)(t,e),t.prototype.update=function(e){var t=Phaser.Math.Clamp(this.curve(e),0,1),n=this.path.getPoint(t);this.gameObject.x=n.x,this.gameObject.y=n.y},t}(S),x=function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).curve=void 0,i.curve=y(n.scaleX),i.applyMinMaxTime(n.scaleX),i}return(0,v.Z)(t,e),t.prototype.update=function(e){var t=this.curve(e);this.gameObject.scaleX=t},t}(S),R=function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).curve=void 0,i.curve=y(n.scaleY),i.applyMinMaxTime(n.scaleY),i}return(0,v.Z)(t,e),t.prototype.update=function(e){var t=this.curve(e);this.gameObject.scaleY=t},t}(S),O=function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).curve=void 0,i.curve=I(n.shearX),i.applyMinMaxTime(n.shearX),i}return(0,v.Z)(t,e),t.prototype.update=function(e){var t=this.curve(e);this.gameObject.shearX=t},t}(S),_=function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).curve=void 0,i.curve=I(n.shearY),i.applyMinMaxTime(n.shearY),i}return(0,v.Z)(t,e),t.prototype.update=function(e){var t=this.curve(e);this.gameObject.shearY=t},t}(S),k=function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).curveR=void 0,i.curveG=void 0,i.curveB=void 0,i.curveR=y(n.tintR),i.curveG=y(n.tintG),i.curveB=y(n.tintB),i.applyMinMaxTime(n.tintR),i.applyMinMaxTime(n.tintG),i.applyMinMaxTime(n.tintB),i}return(0,v.Z)(t,e),t.prototype.update=function(e){var t=this.gameObject.setTint;if(t&&"function"===typeof t){var n=this.curveR(e),i=this.curveG(e),r=this.curveB(e);t.bind(this.gameObject)(Phaser.Display.Color.GetColor(n,i,r))}},t}(S),D=function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).curve=void 0,i.curve=y(n.x),i.applyMinMaxTime(n.x),i}return(0,v.Z)(t,e),t.prototype.update=function(e){var t=this.curve(e);this.gameObject.x=t},t}(S),L=function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).curve=void 0,i.curve=y(n.y),i.applyMinMaxTime(n.y),i}return(0,v.Z)(t,e),t.prototype.update=function(e){var t=this.curve(e);this.gameObject.y=t},t}(S),B=function(){function e(e){this.scene=void 0,this.events=void 0,this.parent=void 0,this.gameObject=void 0,this.spineGraph=void 0,this.tweenGraph=void 0,this.updateBehaviours=[],this.tween=void 0,this.duration=0,this.timeScale=1,this.delay=0;var t=e.target;this.events=new Phaser.Events.EventEmitter,this.scene=t.scene,this.gameObject=t,this.spineGraph=e,this.tweenGraph=f(e),this.addBehaviours(),this.setDelay(this.spineGraph.delay)}var t=e.prototype;return t.addBehaviours=function(){var e,t=this.gameObject,n=this.tweenGraph;this.tweenGraph.alpha.length>=1&&this.updateBehaviours.push(new w(t,n)),this.tweenGraph.angle.length>=1&&this.updateBehaviours.push(new A(t,n)),this.tweenGraph.scaleX.length>=1&&this.updateBehaviours.push(new x(t,n)),this.tweenGraph.scaleY.length>=1&&this.updateBehaviours.push(new R(t,n)),(this.tweenGraph.tintR.length>=1||this.tweenGraph.tintG.length>=1||this.tweenGraph.tintB.length>=1)&&this.updateBehaviours.push(new k(t,n)),this.tweenGraph.x.length>=1&&this.updateBehaviours.push(new D(t,n)),this.tweenGraph.y.length>=1&&this.updateBehaviours.push(new L(t,n)),this.tweenGraph.deform.length>=1&&this.updateBehaviours.push(new C(t,n)),this.spineGraph.event&&this.spineGraph.event.length>=1&&this.updateBehaviours.push(new b(this,this.spineGraph.event)),this.tweenGraph.shearX.length>=1&&this.updateBehaviours.push(new O(t,n)),this.tweenGraph.shearY.length>=1&&this.updateBehaviours.push(new _(t,n)),this.tweenGraph.position.length>=1&&this.spineGraph.path&&this.updateBehaviours.push(new P(t,n,this.spineGraph.path)),this.tweenGraph.attachment.length>=1&&this.updateBehaviours.push(new T(t,n)),this.duration=1e3*Math.max.apply(Math,s()(e=this.updateBehaviours).call(e,(function(e){return e.maxTime})))},t.start=function(){var e=this;return new(o())((function(t){e.stop();var n=e.delay||0;e.events.emit("start");for(var i=0;i<e.updateBehaviours.length;i++)e.updateBehaviours[i].start(),e.updateBehaviours[i].update(-n);var r=!1,s=e.scene.tweens.addCounter({from:-n,to:e.duration,duration:e.duration+n,onUpdate:function(t){var n=t.getValue();!r&&n>=0&&(e.events.emit("startDelay"),e.parent&&e.parent.emitEvent("startDelay"),r=!0);for(var i=0;i<e.updateBehaviours.length;i++)e.updateBehaviours[i].update(n);e.spineGraph.onUpdate&&e.spineGraph.onUpdate(n)},loop:e.spineGraph.loop,onComplete:function(){e.events.emit("complete"),e.tween=void 0;for(var n=0;n<e.updateBehaviours.length;n++)e.updateBehaviours[n].complete();t()}});s.setTimeScale(e.timeScale),e.tween=s}))},t.stop=function(){this.tween&&(this.events.emit("stop"),this.tween.complete())},t.seek=function(e){for(var t,n=l()(t=this.updateBehaviours).call(t,(function(e){return!(e instanceof b)})),i=0;i<n.length;i++)this.updateBehaviours[i].update(e)},t.setTimeScale=function(e){void 0===e&&(e=1),this.timeScale=e},t.setDelay=function(e){this.delay=e||0},(0,i.Z)(e,[{key:"isPlaying",get:function(){return!!this.tween}}]),e}()},203:function(e,t,n){"use strict";var i=n(105),r=n.n(i)()(.48,1.57,.6,.83);t.Z=r},450:function(e,t,n){"use strict";var i=n(14),r=n(90),s={targets:[],duration:600,ease:Phaser.Math.Easing.Cubic.Out,props:{alpha:{start:0,from:0,to:1}}},a=function(e){function t(t){return e.call(this,s,t)||this}return(0,i.Z)(t,e),t}(r.Z);t.Z=a},451:function(e,t,n){"use strict";var i=n(14),r=n(90),s={targets:[],duration:600,ease:Phaser.Math.Easing.Quadratic.Out,props:{alpha:{start:1,from:1,to:0}}},a=function(e){function t(t){return e.call(this,s,t)||this}return(0,i.Z)(t,e),t}(r.Z);t.Z=a},446:function(e,t,n){"use strict";var i=n(14),r=n(90),s={targets:[],duration:300,ease:n(203).Z,props:{scale:{from:1.2,to:1}}},a=function(e){function t(t){return e.call(this,s,t)||this}return(0,i.Z)(t,e),t}(r.Z);t.Z=a},441:function(e,t,n){"use strict";n.d(t,{Z:function(){return p}});var i=n(54),r=n(37),s=n(14),a=n(101),o=n(90),c={targets:[],duration:400,ease:n(203).Z,props:{scale:"-=0.1"}},l=function(e){function t(t){return e.call(this,c,t)||this}return(0,s.Z)(t,e),t}(o.Z),u=n(102),h=n(128),d=n(198),p=function(e){function t(t,n,i,s,a,o){var c;return void 0===o&&(o=!1),(c=e.call(this,t)||this).useSound=!0,c.isClicked=!1,c.scaleUp=-1,c.scaleDown=-1,c.button=void 0,c.upAnimation=void 0,c.downAnimation=void 0,c.isUsePixelPerfect=!1,c.hitArea=void 0,c.hitZone=void 0,c.scaleDownPress=void 0,c.parentName=void 0,c.disabled=!1,c.handelObjectDestroy=function(){c.scene&&c.scene.events.off(Phaser.Scenes.Events.SLEEP,c.handleSceneSleep)},c.handleSceneSleep=function(){c.scene&&c.scene.tweens.killTweensOf((0,r.Z)(c))},c.handlePointerDown=function(){var e;c.isClicked||null!=(e=c.upAnimation)&&null!=(e=e.tween)&&e.isPlaying()||(c.isClicked=!0,c.runDownAnimation())},c.handleOnClick=function(e){return function(){var t,n;c.isClicked&&(null!=(t=c.upAnimation)&&null!=(t=t.tween)&&t.isPlaying()||c.disabled||(c.isClicked=!1,c.runUpAnimation(),null==(n=c.upAnimation)||null==(n=n.tween)||n.once(Phaser.Tweens.Events.TWEEN_COMPLETE,(function(){c.disabled||(c.logButtonEvent(),c.addDebugData(),c.processCallback(e))}))))}},c.handlePointerOut=function(){var e;c.isClicked&&(null!=(e=c.upAnimation)&&null!=(e=e.tween)&&e.isPlaying()||(c.isClicked=!1,c.runUpAnimation()))},c.runDownAnimation=function(){var e;-1===c.scaleDown&&(c.scaleUp=c.scale,c.scaleDown=c.scaleDownPress),c.useSound&&c.scene.audio.playSound(h.Z.BUTTON_CLICK),null==(e=c.downAnimation)||e.remove(),c.downAnimation=new l({targets:[(0,r.Z)(c)],duration:150,props:{scale:c.scaleDown},onUpdate:function(){c.hitZone.scale=1/c.scale}}),c.downAnimation.play()},c.runUpAnimation=function(){var e;-1!==c.scaleUp&&(null==(e=c.upAnimation)||e.remove(),c.upAnimation=new l({targets:[(0,r.Z)(c)],duration:150,props:{scale:c.scaleUp},onUpdate:function(){c.hitZone.scale=1/c.scale}}),c.upAnimation.play())},c.isUsePixelPerfect=o,c.setDepth(u.Z.BUTTON),c.createButton(n,i,s,a),c.updateSize(),c.listenEvents(),c.scene.add.existing((0,r.Z)(c)),c}(0,s.Z)(t,e);var n=t.prototype;return n.listenEvents=function(){this.scene.events.on(Phaser.Scenes.Events.SLEEP,this.handleSceneSleep),this.once(Phaser.GameObjects.Events.DESTROY,this.handelObjectDestroy)},n.processCallback=function(e){var t,n,i;null==(t=this.upAnimation)||t.stop(),null==(n=this.downAnimation)||n.stop(),null==(i=this.scene)||i.tweens.killTweensOf(this),-1!==this.scaleUp&&this.setScale(this.scaleUp),e()},n.setDisabled=function(e,t){var n,i;(void 0===t&&(t=!0),e)?(t&&this.setAlpha(.5),null==(n=this.hitArea)||n.disableInteractive()):(t&&this.setAlpha(1),null==(i=this.hitArea)||i.setInteractive());this.disabled=e},n.createButton=function(e,t,n,i){this.button=this.scene.add.image(0,0,e,t),n&&i&&this.button.setWorldSize(n,i),this.scaleDownPress=this.scale-.1;var r=this.button,s=r.displayWidth,a=r.displayHeight;this.hitZone=this.scene.make.zone({displayWidth:s,displayHeight:a}),this.add([this.button,this.hitZone])},n.updateSize=function(){var e=this.button,t=e.width,n=e.height,i=t/100*10,r=n/100*10,s=i<10?i:10,a=r<10?r:10;this.setSize(t+s,n+a),this.hitZone.setSize(t+s,n+a)},n.addDebugData=function(){var e=this.getParentName(),t=this.name;(0,d.sw)("ui-click",e+":"+t)},n.logButtonEvent=function(){var e=this.getParentName(),t=this.name;this.scene.analytics.event(a._.BUTTON_CLICK,{button_name:t,screen_name:e})},n.getParentName=function(){if(this.parentName)return this.parentName;for(var e=this.parentContainer;e;){if(e instanceof GameCore.Screen){var t=e;return this.parentName=t.getScreenName(),this.parentName}e=e.parentContainer}return this.parentName=this.scene.getSceneName(),this.parentName},(0,i.Z)(t,[{key:"onClick",set:function(e){this.isUsePixelPerfect?(this.hitArea=this.button,this.hitArea.setInteractive({useHandCursor:!0,pixelPerfect:!0})):(this.hitArea=this.hitZone,this.updateSize(),this.hitArea.setInteractive({useHandCursor:!0})),this.hitArea.on(Phaser.Input.Events.GAMEOBJECT_POINTER_DOWN,this.handlePointerDown),this.hitArea.on(Phaser.Input.Events.GAMEOBJECT_POINTER_UP,this.handleOnClick(e)),this.hitArea.on(Phaser.Input.Events.GAMEOBJECT_POINTER_OUT,this.handlePointerOut)}},{key:"isUsePixelPerFect",get:function(){return this.isUsePixelPerfect}}]),t}(Phaser.GameObjects.Container)},621:function(e,t,n){"use strict";var i=n(14),r=function(e){function t(t,n){var i,r=n.key,s=n.frame,a=n.width,o=n.height,c=n.usePixelPerfect;(i=e.call(this,t,r,s,a,o,c)||this).paddingZone=void 0,i.showDebugZone=void 0,i.debugZone=void 0;var l=n.paddingZone,u=void 0===l?0:l,h=n.showDebugZone,d=void 0!==h&&h;return i.paddingZone=u,i.showDebugZone=d,i}return(0,i.Z)(t,e),t.prototype.updateSize=function(){e.prototype.updateSize.call(this);var t,n=this.width,i=this.height,r=n+this.paddingZone,s=i+this.paddingZone;(this.setSize(r,s),this.hitZone.setSize(r,s),this.showDebugZone)&&(null==(t=this.debugZone)||t.destroy(),this.debugZone=this.hitZone.drawDebugBox(10699282,.5),this.add(this.debugZone))},t}(n(441).Z);t.Z=r},444:function(e,t,n){"use strict";n.d(t,{Z:function(){return d}});var i=n(37),r=n(14),s=n(46),a=n(90),o={targets:[],duration:600,ease:Phaser.Math.Easing.Linear,props:{angle:{from:0,to:360}}},c=function(e){function t(t){return e.call(this,o,t)||this}return(0,r.Z)(t,e),t}(a.Z),l=s.Z.DEFAULT,u=l.KEY,h=l.FRAME,d=function(e){function t(t){var n;return(n=e.call(this,t,0,0,u,h.PRELOADER)||this).anim=void 0,n.runAnimation(),n.setWorldSize(113,113),n.scene.add.existing((0,i.Z)(n)),n}(0,r.Z)(t,e);var n=t.prototype;return n.runAnimation=function(){var e;null==(e=this.anim)||e.remove(),this.anim=new c({targets:[this],repeat:-1,duration:1200}),this.anim.play()},n.setVisible=function(t){return e.prototype.setVisible.call(this,t),t?this.runAnimation():this.anim.stop(),this},t}(Phaser.GameObjects.Image)},447:function(e,t,n){"use strict";var i=n(36),r=n(54),s=n(37),a=n(14),o=n(102),c=n(46),l=n(440),u=n(128),h=c.Z.DEFAULT,d={width:878/3,height:1129/3,leftWidth:70/3,rightWidth:70/3,topHeight:134/3,bottomHeight:80/3,key:h.KEY,frame:h.FRAME.POPUP.FILE},p=function(e){function t(t,n){var r;return(r=e.call(this,t)||this).payload=void 0,r.popup=void 0,r.leftWidth=void 0,r.rightWidth=void 0,r.topHeight=void 0,r.bottomHeight=void 0,r.key=void 0,r.frame=void 0,r.entranceAnimation=void 0,r.exitAnimation=void 0,r.payload=(0,i.Z)({},d,n),r.leftWidth=r.payload.leftWidth,r.rightWidth=r.payload.rightWidth,r.topHeight=r.payload.topHeight,r.bottomHeight=r.payload.bottomHeight,r.key=r.payload.key,r.frame=r.payload.frame,r.setSize(r.payload.width,r.payload.height),r.setDepth(o.Z.POPUP),r.createPopup(),r.createAnimations(),r.scene.add.existing((0,s.Z)(r)),r}(0,a.Z)(t,e);var n=t.prototype;return n.createPopup=function(){var e=this.scene.world.getPixelRatio();this.popup=this.scene.add.nineslice(0,0,this.key,this.frame,this.width*e,this.height*e,this.leftWidth*e,this.rightWidth*e,this.topHeight*e,this.bottomHeight*e),this.popup.setScale(1/e),this.add([this.popup])},n.setWidth=function(e){var t=this.scene.world.getPixelRatio();this.popup.width=e*t,this.setSize(e,this.height)},n.setHeight=function(e){var t=this.scene.world.getPixelRatio();this.popup.height=e*t,this.setSize(this.width,e)},n.getPopup=function(){return this.popup},n.createAnimations=function(){var e=this;this.entranceAnimation=new l.Z({target:this,scale:[{x:0,y:0},{time:.0167,x:.4,y:.4,curve:.14,c2:.21,c3:.75},{time:.1333,x:1.06,y:1.06,curve:.25,c3:.75},{time:.2667,x:.95,y:.95},{time:.3833,curve:"stepped"},{time:1}]}),this.exitAnimation=new l.Z({target:this,scale:[{curve:.146,c2:.1,c3:.75},{time:.1333,x:1.078,y:1.078,curve:.25,c3:.75},{time:.2,x:.7,y:.7},{time:.2167,x:0,y:0,curve:"stepped"},{time:1,x:0,y:0}]}),this.entranceAnimation.events.on("start",(function(){e.scene.audio.playSound(u.Z.POPUP_SHOW)})),this.exitAnimation.events.on("start",(function(){e.scene.audio.playSound(u.Z.POPUP_OFF,{volume:.6})}))},(0,r.Z)(t,[{key:"onClose",set:function(e){this.setInteractive({useHandCursor:!0}),this.on(Phaser.Input.Events.GAMEOBJECT_POINTER_DOWN,e)}}]),t}(Phaser.GameObjects.Container);t.Z=p},623:function(e,t,n){"use strict";var i=n(36),r=n(54),s=n(37),a=n(14),o=n(55),c=n.n(o),l=n(74),u=n.n(l),h=n(104),d=n.n(h),p=n(48),f=n.n(p),v=n(39),m=n.n(v),g=n(71),y=n.n(g),E=n(72),S=n.n(E),w=n(91),I=n.n(w),A=n(102),T=n(197);function C(e,t){var n="undefined"!==typeof S()&&I()(e)||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){var n;if(!e)return;if("string"===typeof e)return b(e,t);var i=m()(n=Object.prototype.toString.call(e)).call(n,8,-1);"Object"===i&&e.constructor&&(i=e.constructor.name);if("Map"===i||"Set"===i)return y()(e);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return b(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var i=0;return function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function b(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var P=function(e){function t(t,n){var r,a;(a=e.call(this,t)||this).config=void 0,a.isEnable=void 0,a.maxHeight=void 0,a.isScrolling=void 0,a.boundTop=void 0,a.boundBottom=void 0,a.maskGraphics=void 0,a.objects=void 0,a._value=0,a.velocity=0,a.isScrollingSmooth=void 0,a.lastScrollY=void 0,a.isScrollingBack=void 0,a.scrollingBackTo=void 0,a.lastScrollYCount=0,a.hitArea=void 0,a.onScrollEvents=[],a.update=function(e,t){a.isScrollingSmooth&&a.velocity&&a.scrollingSmooth(t),a.isScrollingBack&&a.scrollingBack(t)},a.checkReachBound=function(){return a.isReachTop()||a.isReachBottom()},a.onMouseScroll=(0,T.D)((function(e,t,n){if(a.isEnable){var i;if(a.isScrolling=!0,a.checkReachBound())return a.lastScrollY=c()(i=a.lastScrollY).call(i,(function(){return 0})),void(a.isScrolling=!1);a.stopScrollingBack(),a.startScrollSmooth(-n*a.scrollSmooth/15)}}),100,{isImmediate:!0,maxWait:100}),a.onTouchScroll=function(e){if(a.isEnable){a.velocity&&a.stopScrollSmooth(),a.stopScrollingBack(),a.isScrolling=!0;var t=a.scene.game.world.getZoomRatio(),n=e.position,i=e.prevPosition,r=(n.y-i.y)/t,s=a.height*a.maxScrollOver,o=1;if(a.lastScrollY[++a.lastScrollYCount%a.lastScrollY.length]=r,a.isReachTop()&&r>=0){var c=(s-(a.value-a.marginTop))/s;o=Math.min(o,c)}if(a.isReachBottom()&&r<=0){var l=(s-(-a.maxHeight-a.value))/s;o=Math.min(o,l)}var u=r*o,h=a.maxScrollOver*a.height;a.value+u>a.marginTop+h?a.value=a.marginTop+h:a.value+u<-a.maxHeight-h?a.value=-a.maxHeight-h:a.value+=u,a.callOnScrollEvents(a.value,u)}},a.onTouchDown=function(){a.isEnable&&(a.velocity&&a.stopScrollSmooth(),a.stopScrollingBack())},a.onTouchEnd=function(){var e,t;if(a.isReachTop()&&(a.startScrollingBack(a.marginTop),a.stopScrollSmooth()),a.isReachBottom()&&(a.startScrollingBack(-a.maxHeight),a.stopScrollSmooth()),a.isScrolling){var n=u()(e=a.lastScrollY).call(e,(function(e,t){return e+t}))/a.lastScrollY.length;a.startScrollSmooth(n*a.scrollSmooth),a.lastScrollY=c()(t=a.lastScrollY).call(t,(function(){return 0}))}},a.config=(0,i.Z)({marginTop:0,marginBottom:0,acceleration:1400,maxScrollOver:.15,scrollSmooth:40,scrollingBackRate:5},n);var o=n.width,l=n.height;return a.isEnable=!1,a.maxHeight=0,a.lastScrollY=d()(r=new Array(3)).call(r,0),a.setSize(o,l),a.createGroup(),a.createInput(),a.createEvents(),a.scene.add.existing((0,s.Z)(a)),a}(0,a.Z)(t,e);var n=t.prototype;return n.onScroll=function(e){this.onScrollEvents.push(e)},n.gotoTop=function(){this.value=this.config.marginTop},n.reset=function(){this.maxHeight=0,this.isScrolling=!1,this.isScrollingBack=!1,this.isScrollingSmooth=!1,this.gotoTop(),this.setEnable(!1)},n.createDebug=function(){this.drawDebugBox(16711680,.8)},n.setEnable=function(e){this.isEnable=e,e?this.setInteractive({draggable:!0,useHandCursor:!0}):this.disableInteractive()},n.addItem=function(e){this.addAt(e),this.objects.add(e);var t=e.y+e.height+this.marginBottom-this.height/2;this.maxHeight=Math.max(this.maxHeight,t,0),this.updateObjectVisible()},n.addItems=function(e){var t=this;this.addAt(e),this.objects.addMultiple(e);var n=c()(e).call(e,(function(e){return e.y+e.height+t.marginBottom-t.height/2}));this.maxHeight=Math.max(this.maxHeight,Math.max.apply(Math,n),0),this.updateObjectVisible()},n.clearItem=function(){this.objects.clear(!0,!0),this.reset()},n.getChildren=function(){var e;return f()(e=this.objects.getChildren()).call(e,(function(e){return e.active}))},n.createBound=function(e,t,n,i){this.boundTop=this.scene.make.image({key:e,frame:t}),this.boundBottom=this.scene.make.image({key:e,frame:t}),this.boundTop.setTint(i),this.boundBottom.setTint(i),this.boundTop.setAlpha(1,1,0,0),this.boundBottom.setAlpha(0,0,1,1),this.boundTop.setDepth(A.Z.PRIORITY),this.boundBottom.setDepth(A.Z.PRIORITY);var r=this.width,s=n,a=this.getWorldPosition(),o=a.x,c=a.y;this.boundTop.setDisplaySize(r,s),this.boundBottom.setDisplaySize(r,s),this.boundTop.setY(-this.displayHeight/2+s/2+c-this.y-1),this.boundBottom.setY(this.displayHeight/2-s/2+c-this.y+1),this.boundTop.setX(o-this.x),this.boundBottom.setX(o-this.x),this.add([this.boundTop,this.boundBottom])},n.createMask=function(){var e;null==(e=this.maskGraphics)||e.destroy(),this.maskGraphics=this.scene.make.graphics({fillStyle:{color:255,alpha:1},visible:!0}),this.maskGraphics.setName("MaskGraphics");var t=this.width,n=this.height;this.maskGraphics.fillRoundedRect(0-t/2,0-n/2,t,n,0),this.setMask(this.maskGraphics.createGeometryMask()),this.scene.events.off(Phaser.Scenes.Events.UPDATE,this.updateMask,this),this.scene.events.on(Phaser.Scenes.Events.UPDATE,this.updateMask,this)},n.updateMask=function(){var e=this.getWorldPosition(),t=e.x,n=e.y;this.maskGraphics.setPosition(t,n)},n.createGroup=function(){this.objects=this.scene.make.group({})},n.updateObject=function(e){this.objects.incY(e),this.updateObjectVisible()},n.updateObjectVisible=function(){for(var e=this.objects.getChildren(),t=0;t<e.length;t++){var n=e[t];n.y+n.height<-this.height/2||n.y-n.height>this.height/2?n.setVisible(!1):n.setVisible(!0)}},n.createInput=function(){this.setInteractive({draggable:!0,useHandCursor:!0}),this.on(Phaser.Input.Events.POINTER_WHEEL,this.onMouseScroll),this.on(Phaser.Input.Events.GAMEOBJECT_DRAG,this.onTouchScroll),this.on(Phaser.Input.Events.GAMEOBJECT_POINTER_DOWN,this.onTouchDown),this.scene.input.on(Phaser.Input.Events.POINTER_UP,this.onTouchEnd,this)},n.createEvents=function(){this.scene.events.on(Phaser.Scenes.Events.UPDATE,this.update)},n.callOnScrollEvents=function(e,t){for(var n,i=C(this.onScrollEvents);!(n=i()).done;){(0,n.value)(this,e,t)}},n.scrollingBack=function(e){var t=(this.scrollingBackTo-this.value)*e*this.scrollingBackRate/1e3;this.value+=t,Math.abs(this.scrollingBackTo-this.value)<.5&&(this.value=this.scrollingBackTo,this.stopScrollingBack()),this.callOnScrollEvents(this.value,t)},n.startScrollingBack=function(e){this.isScrollingBack=!0,this.scrollingBackTo=e},n.stopScrollingBack=function(){this.isScrollingBack=!1},n.scrollingSmooth=function(e){var t=this.velocity*e/1e3;this.value+=t;var n=Math.abs(this.velocity)/this.velocity;this.velocity-=n*this.acceleration*e/1e3,Math.abs(this.velocity)<this.acceleration*e/1e3&&this.stopScrollSmooth(),this.isReachTop()&&(this.startScrollingBack(this.marginTop),this.stopScrollSmooth()),this.isReachBottom()&&(this.startScrollingBack(-this.maxHeight),this.stopScrollSmooth()),this.callOnScrollEvents(this.value,t)},n.startScrollSmooth=function(e){this.isScrollingSmooth=!0,e&&(e*this.velocity>0?this.velocity+=e:this.velocity=e)},n.stopScrollSmooth=function(){this.isScrollingSmooth=!1,this.isScrolling=!1,this.velocity=0},n.isReachTop=function(){return this.value>this.marginTop},n.isReachBottom=function(){return-this.value>this.maxHeight},(0,r.Z)(t,[{key:"marginTop",get:function(){return this.config.marginTop}},{key:"marginBottom",get:function(){return this.config.marginBottom}},{key:"acceleration",get:function(){return this.config.acceleration}},{key:"maxScrollOver",get:function(){return this.config.maxScrollOver}},{key:"scrollSmooth",get:function(){return this.config.scrollSmooth}},{key:"scrollingBackRate",get:function(){return this.config.scrollingBackRate}},{key:"value",get:function(){return this._value},set:function(e){var t=e-this._value;this._value=e,this.updateObject(t)}}]),t}(Phaser.GameObjects.Container);t.Z=P},205:function(e,t,n){"use strict";n.d(t,{Z:function(){return d}});var i=n(36),r=n(37),s=n(14),a=n(55),o=n.n(a),c=n(132),l=n.n(c),u=n(445),h=function(e,t,n){var i=e.canvas,r=e.context,s=e.style,a=[],o=0,c=n.length;s.maxLines>0&&s.maxLines<n.length&&(c=s.maxLines),s.syncFont(i,r);for(var l=0;l<c;l++){for(var u=s.strokeThickness,h=0;h<n[l].length;h++)u+=r.measureText(n[l][h]).width;s.wordWrap&&(u-=r.measureText(" ").width),a[l]=Math.ceil(u),o=Math.max(o,a[l])}var d=t.fontSize+s.strokeThickness,p=d*c,f=e.lineSpacing;return c>1&&(p+=f*(c-1)),{width:o,height:p,lines:c,lineWidths:a,lineSpacing:f,lineHeight:d}},d=function(e){function t(t,n){var s,a=Phaser.Display.Color.IntegerToColor(n.strokeColor||0),o=Phaser.Display.Color.IntegerToColor(n.fillColor||16777215),c=void 0!==n.strokeThickness?n.strokeThickness+(n.extraStroke||0):0;return(s=e.call(this,t,0,0,n.text,{fontFamily:u.Z.FONT_FAMILY,fontSize:n.fontSize+"px",stroke:"rgba("+a.red+", "+a.green+", "+a.blue+", "+(n.strokeAlpha||1)+")",strokeThickness:c,color:"rgb("+o.red+", "+o.green+", "+o.blue+")",fontStyle:n.fontStyle})||this).extraStroke=0,s.strokeOffset={x:0,y:0},s.letterSpacingExtra=0,s.payload=void 0,s.charactersTint=[],s.charactersStrokeTint=[],s.payload=n,s.extraStroke=n.extraStroke||0,s.strokeOffset=n.strokeOffset?(0,i.Z)({},s.strokeOffset,n.strokeOffset):{x:0,y:0},s.letterSpacingExtra=n.letterSpacingExtra||0,s.setHighQuality(),s.setOrigin(.5,.5),n.lineSpacing&&s.setLineSpacing(n.lineSpacing),s.scene.add.existing((0,r.Z)(s)),s}(0,s.Z)(t,e);var n=t.prototype;return n.setCharacterTint=function(e,t,n,i,r){for(var s=0;s<e+t;s++)s>=this.charactersTint.length&&(this.charactersTint.push(void 0),this.charactersStrokeTint.push(void 0)),s>=e&&(this.charactersTint[s]=i,this.charactersStrokeTint[s]=r);return this.updateText(),this},n.setStrokeAlpha=function(e){var t=this.payload;if(t.strokeAlpha===e)return this;t.strokeAlpha=e;var n=Phaser.Display.Color.IntegerToColor(t.strokeColor||0);return this.style.stroke="rgba("+n.red+", "+n.green+", "+n.blue+", "+(t.strokeAlpha||1)+")",this.payload=t,this.updateText(),this},n.setTintSeparate=function(e,t){var n=this.payload;if(n.fillColor===e&&n.strokeColor===t)return this;n.strokeColor=t;var i=Phaser.Display.Color.IntegerToColor(n.strokeColor||0);this.style.stroke="rgba("+i.red+", "+i.green+", "+i.blue+", "+(n.strokeAlpha||1)+")",n.fillColor=e;var r=Phaser.Display.Color.IntegerToColor(n.fillColor||16777215);return this.style.color="rgb("+r.red+", "+r.green+", "+r.blue+")",this.payload=n,this.updateText(),this},n.disableStroke=function(e){return void 0===e&&(e=!0),this.style.strokeThickness=e?0:this.payload.strokeThickness||0,this.updateText(),this},n.setLeftAlign=function(){return this.setAlign("left"),this.setOrigin(0,.5),this},n.setRightAlign=function(){return this.setAlign("right"),this.setOrigin(1,.5),this},n.setCenterAlign=function(){return this.setAlign("center"),this.setOrigin(.5,.5),this},n.getWidth=function(){return this.width},n.getHeight=function(){return this.height},n.updateText=function(){if(""===this.text)return this;var e=this.canvas,t=this.context,n=this.style,i=(n.resolution,n.getTextMetrics());n.syncFont(e,t);var r=this.text;(n.wordWrapWidth||n.wordWrapCallback)&&(r=this.runWordWrap(this.text));var s,a=r.split(this.splitRegExp),c=h(this,i,a),l=this.padding,u=l.left||0,d=l.right||0,p=l.top||0,f=l.bottom||0,v=this.strokeOffset||{x:0,y:0},m=this.extraStroke+(this.letterSpacingExtra||0),g=Math.max.apply(Math,o()(a).call(a,(function(e){return e.length}))),y=this.extraStroke+Math.abs(v.x)+m*(g-1),E=this.extraStroke+2*Math.abs(v.y);0===n.fixedWidth?(this.width=c.width+u+d+y,s=c.width+y):(this.width=n.fixedWidth+y,(s=this.width-u-d+y)<c.width+y&&(s=c.width+y)),this.lines=a,this.textSize=c,this.textWidth=s,0===n.fixedHeight?this.height=c.height+p+f+E:this.height=n.fixedHeight+E,this.updateDisplayOrigin(),this.dirty=!0;var S=this.input;S&&!S.customHitArea&&(S.hitArea.width=this.width,S.hitArea.height=this.height);var w=Phaser.Display.Canvas.CanvasTexturePooler.getContainer(this.key);return w&&(w.dirty=!0),this},n.drawTextCanvas=function(){var e=Phaser.Display.Canvas.CanvasTexturePooler.use(this);if(e.dirty&&this.dirty&&this.lines){var t=this.canvas,n=this.context,i=this.style,r=i.resolution,s=i.metrics,a=this.textSize,c=this.textWidth,u=this.strokeOffset||{x:0,y:0},h=this.extraStroke+(this.letterSpacingExtra||0),d=this.lines,p=Math.max.apply(Math,o()(d).call(d,(function(e){return e.length}))),f=this.width,v=this.height;f*=r,v*=r,f=Math.max(f,1),v=Math.max(v,1);var m,g,y=this.extraStroke+Math.abs(u.x)+h*(p-1),E=this.extraStroke+2*Math.abs(u.y);f=Math.max(f,1),v=Math.max(v,1),t.width=f,t.height=v,this.frame.setSize(f,v),i.syncFont(t,n),n.save(),n.scale(r,r),i.backgroundColor&&(n.fillStyle=i.backgroundColor,n.fillRect(0,0,f,v)),i.syncStyle(t,n),n.textBaseline="alphabetic";for(var S=0,w=this.charactersTint||[],I=this.charactersStrokeTint||[],A=0;A<a.lines;A++){if(m=i.strokeThickness/2+y/2,g=i.strokeThickness/2+A*a.lineHeight+s.ascent+E/2,A>0&&(g+=a.lineSpacing*A),i.rtl)m=f-m;else if("right"===i.align)m+=c-a.lineWidths[A];else if("center"===i.align)m+=(c-a.lineWidths[A])/2;else if("justify"===i.align){if(a.lineWidths[A]/a.width>=.85){var T,C=a.width-a.lineWidths[A],b=n.measureText(" ").width,P=l()(T=d[A]).call(T),x=P.split(" ");C+=(d[A].length-P.length)*b;for(var R=Math.floor(C/b),O=0;R>0;)x[O]+=" ",O=(O+1)%(x.length-1||1),--R;d[A]=x.join(" ")}}if(this.autoRound&&(m=Math.round(m),g=Math.round(g)),i.strokeThickness){this.style.syncShadow(n,i.shadowStroke);for(var _=m+u.x,k=0;k<d[A].length;k++){var D=d[A][k],L=S+k,B=I.length>L?I[L]:void 0;if(void 0!==B){var N=Phaser.Display.Color.IntegerToColor(B);n.strokeStyle="rgba("+N.red+", "+N.green+", "+N.blue+", "+(this.payload.strokeAlpha||1)+")"}else n.strokeStyle=this.style.stroke;n.strokeText(D,_,g+u.y),_+=n.measureText(D).width+h}}if(i.color){this.style.syncShadow(n,i.shadowFill);for(var H=m,M=0;M<d[A].length;M++){var G=d[A][M],W=S+M,U=w.length>W?w[W]:void 0;if(void 0!==U){var F=Phaser.Display.Color.IntegerToColor(U);n.strokeStyle="rgba("+F.red+", "+F.green+", "+F.blue+", 1)",n.fillStyle="rgba("+F.red+", "+F.green+", "+F.blue+", 1)"}else n.strokeStyle=this.style.color,n.fillStyle=this.style.color;0!==this.extraStroke&&(n.lineWidth=this.extraStroke,n.strokeText(G,H,g)),n.fillText(G,H,g),H+=n.measureText(G).width+h}}S+=d[A].length}n.restore(),this.renderer&&this.renderer instanceof Phaser.Renderer.WebGL.WebGLRenderer&&(this.frame.source.glTexture=this.renderer.canvasToTexture(t,this.frame.source.glTexture,!0),this.frame.glTexture=this.frame.source.glTexture),this.dirty=!1,e.dirty=!1}},t}(Phaser.GameObjects.Text)},102:function(e,t){"use strict";t.Z={BACKGROUND:1,FIREWORKS:125,ITEM:130,LOGO:135,BUTTON:140,TILE:145,TEXT:150,ENCOURAGING:151,EFFECT:152,MESSAGE:153,POPUP:160,PRIORITY:200,DEBUG:210,ON_TOP:1e4,BOARD:2,HOLE:3,WOOD:4,CHAIN:45,ROPE:48,WOOD_OVERLAY:50,WARNING_PANEL:81,SCREW:85,HOLE_OBJECT_ADDED:.25,CHOOSING_SCREW:100,FLYING_KEY:105}},445:function(e,t){"use strict";t.Z={PRIMARY:{KEY:"bebas",TEXTURE:"./assets/fonts/bebas.png",DATA:"./assets/fonts/bebas.xml"},FONT_FAMILY:'MikadoBlack,nunito,-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Oxygen,Ubuntu,Cantarell,"Fira Sans","Droid Sans","Helvetica Neue",sans-serif'}},201:function(e,t){"use strict";var n=GameCore.Utils.Image.getImageScale(),i={AVATAR:{KEY:"avatar",FILE:"./assets/images/others/avatar.jpg",CONFIG:{}},ICON_EARTH:{KEY:"icon-earth",FILE:"./assets/images/others/icon-earth.png",CONFIG:{}},BACKGROUND:{KEY:"background",FILE:"./assets/images/"+n+"x/bg.jpg",CONFIG:{}},BACKGROUND_LANDSCAPE:{KEY:"background-landscape",FILE:"./assets/images/"+n+"x/bg-landscape.jpg",CONFIG:{}},LANDSCAPE:{HEADER:{KEY:"landscape-header",FILE:"./assets/images/landscape/header.png",CONFIG:{}},HEADER_INSIDE:{KEY:"landscape-header-inside",FILE:"./assets/images/landscape/header-inside.png",CONFIG:{}},LEVEL_PANEL:{KEY:"landscape-level-panel",FILE:"./assets/images/landscape/level-panel.png",CONFIG:{}}},LIGHTNING_STRIKE:{KEY:"lightning-strike",FILE:"./assets/images/lightning/lightning-strike.png",CONFIG:{}}};t.Z=i},46:function(e,t,n){"use strict";var i=n(36),r=GameCore.Utils.Image.getImageScale(),s={TUTORIAL:{KEY:"tutorial-resources",TEXTURE:"./assets/textures/"+r+"x/tutorial-resources.png",JSON:"./assets/textures/"+r+"x/tutorial-resources.json",FRAME:{TIP:"tip",HAND:"hand",BLANK:"blank",POPUP_TALK:"talk-popup",FIRST_MOVE:"first-move",CURRENT_SCORE:"current-score",TARGET_SCORE:"target-score",HAMMER_ITEM:"hammer-item",PAINT_ITEM:"paint-item",SHUFFLE_ITEM:"shuffle-item",COLORFUL_GEM_1:"colorful-gem-1",COLORFUL_GEM_2:"colorful-gem-2"}},DEFAULT:{KEY:"default-resources",TEXTURE:"./assets/textures/"+r+"x/default-resources.png",JSON:"./assets/textures/"+r+"x/default-resources.json",FRAME:{AVATAR_FRAME:{FILE:"avatar/avatar-frame",WIDTH:118/3,HEIGHT:118/3},BACKGROUND_ITEM_PANEL:{FILE:"background/item-panel",WIDTH:598/3,HEIGHT:223/3},BACKGROUND_ITEM_PANEL_BIG:{FILE:"background/item-panel-big",WIDTH:755/3,HEIGHT:110},BACKGROUND_MISSION:{FILE:"background/mission",WIDTH:1010/3,HEIGHT:229/3},BACKGROUND_SCREW_BAR:{FILE:"background/screw-bar",WIDTH:67,HEIGHT:61/3},BACKGROUND_STORE_ITEM_PANEL:{FILE:"background/store-item-panel",WIDTH:292/3,HEIGHT:383/3},BACKGROUND_STORE_ITEM_PANEL_LONG:{FILE:"background/store-item-panel-long",WIDTH:961/3,HEIGHT:92},BACKGROUND_STORE_TITLE:{FILE:"background/store-title",WIDTH:360,HEIGHT:93},BACKGROUND_TIME:{FILE:"background/time",WIDTH:256/3,HEIGHT:85/3},BLANK:"blank",BUTTON_ADD:{FILE:"buttons/add",WIDTH:25,HEIGHT:25},BUTTON_BOOSTER_BASE:{FILE:"buttons/booster-base",WIDTH:241/3,HEIGHT:241/3},BUTTON_BOOSTER_BASE_GREEN:{FILE:"buttons/booster-base-green",WIDTH:241/3,HEIGHT:241/3},BUTTON_BLUE:{FILE:"buttons/blue",WIDTH:200,HEIGHT:140/3},BUTTON_BLUE_MEDIUM:{FILE:"buttons/blue-medium",WIDTH:377/3,HEIGHT:140/3},BUTTON_BLUE_SQUARE:{FILE:"buttons/blue-square",WIDTH:173/3,HEIGHT:163/3},BUTTON_GREEN:{FILE:"buttons/green",WIDTH:638/3,HEIGHT:199/3},BUTTON_GREEN_LONG:{FILE:"buttons/green-long",WIDTH:200,HEIGHT:140/3},BUTTON_GREEN_SMALL:{FILE:"buttons/green-small",WIDTH:344/3,HEIGHT:124/3},BUTTON_GREEN_MEDIUM:{FILE:"buttons/green-small",WIDTH:377/3,HEIGHT:140/3},BUTTON_GREEN_SMALLEST:{FILE:"buttons/green-smallest",WIDTH:218/3,HEIGHT:101/3},BUTTON_PLUS_GREEN:{FILE:"buttons/plus-green",WIDTH:24,HEIGHT:25},BUTTON_RED:{FILE:"buttons/red",WIDTH:200,HEIGHT:140/3},BUTTON_SETTING:{FILE:"buttons/setting",WIDTH:40,HEIGHT:40},ICON_ADD:{FILE:"buttons/add",WIDTH:25,HEIGHT:25},DASHBOARD_GREEN_LEVEL:{FILE:"dashboard/green-level",WIDTH:197/3,HEIGHT:218/3},DASHBOARD_BROWN_LEVEL:{FILE:"dashboard/brown-level",WIDTH:173/3,HEIGHT:188/3},DASHBOARD_GREY_LEVEL:{FILE:"dashboard/grey-level",WIDTH:173/3,HEIGHT:188/3},DASHBOARD_PROGRESS_BAR_BROWN:{FILE:"dashboard/progress-bar-brown",WIDTH:41/3,HEIGHT:65/3},DASHBOARD_PROGRESS_BAR_EMPTY:{FILE:"dashboard/progress-bar-empty",WIDTH:41/3,HEIGHT:65/3},DASHBOARD_PROGRESS_BAR_GREEN:{FILE:"dashboard/progress-bar-green",WIDTH:41/3,HEIGHT:65/3},DAILY_DAY_BG:"dailyRewards/bg",DAILY_DAY_BG_OPEN:"dailyRewards/bg-open",DAILY_DAY_BG_WAIT:"dailyRewards/bg-wait",DAILY_DAY_LABEL:"dailyRewards/label",DAILY_DAY_TITLE_GREEN:"dailyRewards/title-green",DAILY_DAY_TITLE_GREY:"dailyRewards/title-grey",DAILY_DAY_TITLE_ORANGE:"dailyRewards/title-orange",ICON_ADS:{FILE:"icons/ads",WIDTH:334/3,HEIGHT:334/3},ICON_ADS_LEAN:{FILE:"icons/ads-lean",WIDTH:211/3,HEIGHT:69},ICON_GOLD_VIDEO:{FILE:"icons/gold-video",WIDTH:107/3,HEIGHT:83/3},ICON_GOLD_VIDEO_LEAN:{FILE:"icons/gold-video-lean",WIDTH:39,HEIGHT:33},ICON_MUSIC:{FILE:"icons/music",WIDTH:32,HEIGHT:91/3},ICON_PLANKS:{FILE:"icons/planks",WIDTH:47,HEIGHT:106/3},ICON_PLUS:{FILE:"icons/plus",WIDTH:68/3,HEIGHT:68/3},ICON_SCREW:{FILE:"icons/screw",WIDTH:88/3,HEIGHT:97/3},ICON_SCREW_GOLD:{FILE:"icons/screw-gold",WIDTH:130/3,HEIGHT:137/3},ICON_SCREW_PILE:{FILE:"icons/screw-pile",WIDTH:359/3,HEIGHT:331/3},ICON_SCREW_SILVER:{FILE:"icons/screw-silver",WIDTH:130/3,HEIGHT:137/3},ICON_SHOP:{FILE:"icons/shop",WIDTH:175/3,HEIGHT:172/3},ICON_SOUND:{FILE:"icons/sound",WIDTH:91/3,HEIGHT:97/3},ICON_TIME:{FILE:"icons/time",WIDTH:28,HEIGHT:91/3},ICON_TIME_MEDIUM:{FILE:"icons/time-medium",WIDTH:148/3,HEIGHT:175/3},ICON_TIME_BIG:{FILE:"icons/time-big",WIDTH:230/3,HEIGHT:266/3},ICON_VIBRATE:{FILE:"icons/vibrate",WIDTH:115/3,HEIGHT:87.5/3},ICON_X:{FILE:"icons/x",WIDTH:67/3,HEIGHT:67/3},ICON_X_DARK:{FILE:"icons/x-dark",WIDTH:67/3,HEIGHT:67/3},ICON_HOME:{FILE:"icons/home",WIDTH:97/3,HEIGHT:94/3},ICON_STAR:{FILE:"icons/star",WIDTH:17,HEIGHT:49/3},ICON_CHECK:{FILE:"icons/icon-check",WIDTH:24,HEIGHT:25},ICON_THUNDER:{FILE:"icons/thunder",WIDTH:119/3,HEIGHT:175/3},LOGO:{FILE:"logo/logo",WIDTH:728/3,HEIGHT:159},NO_THANK_TEXT:"texts/no-thank",POPUP:{FILE:"popup/popup",WIDTH:878/3,HEIGHT:1129/3},POPUP_ADS:{FILE:"popup/ads",WIDTH:878/3,HEIGHT:1129/3},POPUP_ADS_BANNER:{FILE:"popup/ads-banner",WIDTH:878/3,HEIGHT:157},POPUP_TITLE:{FILE:"popup/title",WIDTH:530/3,HEIGHT:140/3},POPUP_TITLE_WIN:{FILE:"popup/title-win",WIDTH:297,HEIGHT:278/3},PRELOADER:"preloader/dual-ring",PROGRESS_BACKGROUND:{FILE:"progress/background",WIDTH:644/3,HEIGHT:20},PROGRESS_BAR:{FILE:"progress/bar",WIDTH:638/3,HEIGHT:18},PROGRESS_VOLUME_BACKGROUND:{FILE:"progress/volume-background",WIDTH:269/3,HEIGHT:22},PROGRESS_VOLUME_BAR:{FILE:"progress/volume-bar",WIDTH:269/3,HEIGHT:22}}},EFFECTS:{KEY:"effects-resources",PATH:"./assets/textures/"+r+"x/",JSON:"./assets/textures/"+r+"x/effects-resources.json",FRAME:{BLANK:"blank",FX_COMET:"comet",FX_SPARK:"spark",FX_CIRCLE:"circle",FX_CIRCLE_LIGHT:"circle-light",FX_GLOW_LIGHT:"glow-light",FX_GLOW_SMALL:"glow-small",FX_STAR:"star",FX_STAR_WHITE:"star-white",FX_STAR_YELLOW:"star-yellow",FX_SPARKLE:{FILE:"sparkle",WIDTH:26,HEIGHT:77/3},FX_SPARKLE_2:{FILE:"sparkle-2",WIDTH:101/3,HEIGHT:33},FX_GLOW:{FILE:"glow",WIDTH:521/3,HEIGHT:515/3},TEXT_COOL:"texts/cool",TEXT_GOOD:"texts/good",TEXT_GREAT:"texts/great",TEXT_EXCELLENT:"texts/excellent",TEXT_CONGRATULATION:"texts/congratulation",FX_CONFETTI_SMALL_1:"confetti/small-1",FX_CONFETTI_SMALL_2:"confetti/small-2",FX_CONFETTI_SMALL_3:"confetti/small-3",FX_CONFETTI_SMALL_4:"confetti/small-4",FX_CONFETTI_HEXAGON:"confetti/hexagon-",CONFETTI_PARTICLE_1:"confetti/confetti-1",CONFETTI_PARTICLE_2:"confetti/confetti-2",CONFETTI_PARTICLE_3:"confetti/confetti-3",CONFETTI_PARTICLE_4:"confetti/confetti-4",CONFETTI_PARTICLE_5:"confetti/confetti-5",CONFETTI_PARTICLE_6:"confetti/confetti-6",CONFETTI_PARTICLE_7:"confetti/confetti-7",RIBBON_PARTICLE_1:"confetti/ribbon-1",RIBBON_PARTICLE_2:"confetti/ribbon-2",RIBBON_PARTICLE_3:"confetti/ribbon-3",RIBBON_PARTICLE_4:"confetti/ribbon-4",RIBBON_PARTICLE_5:"confetti/ribbon-5",RIBBON_PARTICLE_6:"confetti/ribbon-6",FX_FIREWORKS_SMALL:"fireworks/small",FX_FIRE_WHITE:"fire-white",FX_FIREWORKS_BIG_0:"fireworks/big-explosive-0",FX_FIREWORKS_BIG_1:"fireworks/big-explosive-1",FX_FIREWORKS_SOAR_LINE:"fireworks/soar-line",FX_FIREWORKS_SOAR_CIRCLE:"fireworks/soar-circle",FX_HIGHLIGHT:"fx-items/highlight",FX_PAINT_EXPLOSIVE:"fx-items/paint-explosive-",FX_RED_EXPLOSIVE:"fx-gems/red-explosive-",FX_BLUE_EXPLOSIVE:"fx-gems/blue-explosive-",FX_PINK_EXPLOSIVE:"fx-gems/pink-explosive-",FX_GREEN_EXPLOSIVE:"fx-gems/green-explosive-",FX_YELLOW_EXPLOSIVE:"fx-gems/yellow-explosive-",FX_COLORFUL:"fx-gems/colorful-",FX_COLOR_CHANGE:"fx-gems/color-change-",FX_FREEZE_EXPLOSIVE:"fx-gems/freeze-explosive-",FX_COLORFUL_EXPLOSIVE:"fx-gems/colorful-explosive-"}},ANIMATION_SCENE:{KEY:"effects-resources",PATH:"./assets/textures/"+r+"x/",JSON:"./assets/textures/"+r+"x/animation-scene-resources.json",FRAME:{BLANK:"blank",COIN:"coins/coin",COIN_SMALL:"coins/coin-small",COIN_SMALL_GREY:"coins/coin-small-grey",ANIMATION_STAR_X:"star-x/star-",ANIMATION_STAR_Y:"star-y/star-",FX_SPARK_YELLOW:"yellow-spark",FX_CONFETTI_RIBBON:"ribbon/ribbon",PREFIX_ANIMATION_RIBBON_CONFETTI_A:"ribbon/falling-confetti/confetti-a/confetti-a-",PREFIX_ANIMATION_RIBBON_CONFETTI_B:"ribbon/falling-confetti/confetti-b/confetti-b-",PREFIX_ANIMATION_RIBBON_CONFETTI_C:"ribbon/falling-confetti/confetti-c/confetti-c-",PREFIX_ANIMATION_RIBBON_CONFETTI_D:"ribbon/falling-confetti/confetti-d/confetti-d-"}},GAMEPLAY:{KEY:"gameplay-resources",TEXTURE:"./assets/textures/8bit/"+r+"x/gameplay-resources.png",JSON:"./assets/textures/8bit/"+r+"x/gameplay-resources.json",FRAME:{BACKGROUND_DIFFICULTY_LEVEL_BASE:{FILE:"background/difficulty-level-base",WIDTH:51,HEIGHT:50/3},BACKGROUND_HEADER:{FILE:"background/header",WIDTH:192,HEIGHT:65},BACKGROUND_RED_PANEL:{FILE:"background/red-panel",WIDTH:667/3,HEIGHT:34},BACKGROUND_LINE:{FILE:"background/line",WIDTH:10/3,HEIGHT:20},BACKGROUND_WARNING_PANEL:{FILE:"background/warning-panel",WIDTH:360,HEIGHT:265/3},BACKGROUND_INFO:{FILE:"background/info",WIDTH:755/3,HEIGHT:154/3},BOARD:{FILE:"background/board",WIDTH:346,HEIGHT:1237/3},BAR:{FILE:"bars/bar",WIDTH:256,HEIGHT:54},BAR_C_SHAPED:{FILE:"bars/C-Shaped",WIDTH:134,HEIGHT:228},BAR_E_SHAPED:{FILE:"bars/E-Shaped",WIDTH:208,HEIGHT:112},BAR_HOLED_CIRCLE:{FILE:"bars/Holed_Circle",WIDTH:78,HEIGHT:78},BAR_LAYER_10:{FILE:"bars/Layer-10",WIDTH:54,HEIGHT:54},BAR_L_1:{FILE:"bars/L_1",WIDTH:130,HEIGHT:184},BAR_L_2:{FILE:"bars/L_2",WIDTH:188,HEIGHT:246},BAR_L_3:{FILE:"bars/L_3",WIDTH:196,HEIGHT:196},BAR_L_5:{FILE:"bars/L_5",WIDTH:150,HEIGHT:150},BAR_L_SHAPED:{FILE:"bars/L_Shaped",WIDTH:190,HEIGHT:190},BAR_PLUS_SHAPED:{FILE:"bars/Plus_Shaped",WIDTH:228,HEIGHT:228},BAR_SHAPE_12:{FILE:"bars/shape-12",WIDTH:222.72,HEIGHT:90.48},BAR_SHAPE_13:{FILE:"bars/shape-13",WIDTH:162*.91,HEIGHT:232.96},BAR_SHAPE_17:{FILE:"bars/shape-17",WIDTH:139.5,HEIGHT:238.08},BAR_SHAPE_18:{FILE:"bars/shape-18",WIDTH:225.28,HEIGHT:223.52},BAR_SHAPE_19:{FILE:"bars/shape-19",WIDTH:186.88,HEIGHT:156.95},BAR_SHAPE_1:{FILE:"bars/shape-1",WIDTH:158.72,HEIGHT:146.32},BAR_SHAPE_20:{FILE:"bars/shape-20",WIDTH:212.48,HEIGHT:206.67},BAR_SHAPE_21:{FILE:"bars/shape-21",WIDTH:261.12,HEIGHT:137.7},BAR_SHAPE_22:{FILE:"bars/shape-22",WIDTH:215.04,HEIGHT:214.2},BAR_SHAPE_23:{FILE:"bars/shape-23",WIDTH:153.6,HEIGHT:233*.6},BAR_SHAPE_24:{FILE:"bars/shape-24",WIDTH:181.76,HEIGHT:241*.71},BAR_SHAPE_25:{FILE:"bars/shape-25",WIDTH:158.72,HEIGHT:143.22},BAR_SHAPE_26:{FILE:"bars/shape-26",WIDTH:217*.83,HEIGHT:212.48},BAR_SHAPE_27:{FILE:"bars/shape-27",WIDTH:212.48,HEIGHT:103.75},BAR_SHAPE_28:{FILE:"bars/shape-28",WIDTH:109.5,HEIGHT:109.5},BAR_SHAPE_29:{FILE:"bars/shape-29",WIDTH:194.56,HEIGHT:194.56},BAR_SHAPE_2:{FILE:"bars/shape-2",WIDTH:143.56,HEIGHT:248.32},BAR_SHAPE_30:{FILE:"bars/shape-30",WIDTH:189.44,HEIGHT:188.7},BAR_SHAPE_31:{FILE:"bars/shape-31",WIDTH:166.4,HEIGHT:165.75},BAR_SHAPE_32:{FILE:"bars/shape-32",WIDTH:181.76,HEIGHT:164.01},BAR_SHAPE_33:{FILE:"bars/shape-33",WIDTH:148*.69,HEIGHT:176.64},BAR_SHAPE_34:{FILE:"bars/shape-34",WIDTH:181.76,HEIGHT:95.14},BAR_SHAPE_35:{FILE:"bars/shape-35",WIDTH:204.8,HEIGHT:127.2},BAR_SHAPE_36:{FILE:"bars/shape-36",WIDTH:179.2,HEIGHT:130.9},BAR_SHAPE_37:{FILE:"bars/shape-37",WIDTH:148.48,HEIGHT:101.5},BAR_SHAPE_38:{FILE:"bars/shape-38",WIDTH:171.52,HEIGHT:131.99},BAR_SHAPE_39:{FILE:"bars/shape-39",WIDTH:157.74,HEIGHT:168.96},BAR_SHAPE_40:{FILE:"bars/shape-40",WIDTH:215.04,HEIGHT:215.04},BAR_SHAPE_41:{FILE:"bars/shape-41",WIDTH:289.28,HEIGHT:288.15},BAR_SHAPE_42:{FILE:"bars/shape-42",WIDTH:225.28,HEIGHT:225.28},BAR_SHAPE_43:{FILE:"bars/shape-43",WIDTH:222.72,HEIGHT:200.1},BAR_SHAPE_44:{FILE:"bars/shape-44",WIDTH:222.72,HEIGHT:203.58},BAR_SHAPE_45:{FILE:"bars/shape-45",WIDTH:192,HEIGHT:192},BAR_SHAPE_5:{FILE:"bars/shape-5",WIDTH:158.24,HEIGHT:235.52},BAR_SHAPE_S10:{FILE:"bars/s-10",WIDTH:202,HEIGHT:104},BAR_SHAPE_S11:{FILE:"bars/s-11",WIDTH:160,HEIGHT:86},BAR_SHAPE_S12:{FILE:"bars/s-12",WIDTH:168,HEIGHT:178},BAR_SHAPE_S1:{FILE:"bars/s-1",WIDTH:184,HEIGHT:176},BAR_SHAPE_S2:{FILE:"bars/s-2",WIDTH:178,HEIGHT:216},BAR_SHAPE_S3:{FILE:"bars/s-3",WIDTH:210,HEIGHT:216},BAR_SHAPE_S4:{FILE:"bars/s-4",WIDTH:182,HEIGHT:78},BAR_SHAPE_S5:{FILE:"bars/s-5",WIDTH:194,HEIGHT:176},BAR_SHAPE_S6:{FILE:"bars/s-6",WIDTH:110,HEIGHT:182},BAR_SHAPE_S7:{FILE:"bars/s-7",WIDTH:216,HEIGHT:126},BAR_SHAPE_S8:{FILE:"bars/s-8",WIDTH:148,HEIGHT:182},BAR_SHAPE_S9:{FILE:"bars/s-9",WIDTH:232,HEIGHT:232},BAR_SILVER_2:{FILE:"bars/silver-2",WIDTH:256.5,HEIGHT:54},BAR_SOLID_CIRCLE_1:{FILE:"bars/Solid_Circle_1",WIDTH:54,HEIGHT:54},BAR_SOLID_CIRCLE_3:{FILE:"bars/Solid_Circle_3",WIDTH:54,HEIGHT:54},BAR_SQUARE:{FILE:"bars/square",WIDTH:132,HEIGHT:110},BAR_T_SHAPE:{FILE:"bars/T_shape",WIDTH:304,HEIGHT:150},BAR_WAVY_BAR:{FILE:"bars/wavy-bar",WIDTH:132,HEIGHT:218},BLANK:"blank",BUTTON_ITEM:{FILE:"buttons/item",WIDTH:199/3,HEIGHT:200/3},BUTTON_PAUSE:{FILE:"buttons/pause",WIDTH:40,HEIGHT:40},BUTTON_PLUS:{FILE:"buttons/plus",WIDTH:50/3,HEIGHT:52/3},BUTTON_GREEN_SMALL:{FILE:"buttons/green-small",WIDTH:206/3,HEIGHT:106/3},BUTTON_GREEN:{FILE:"buttons/green",WIDTH:373/3,HEIGHT:140/3},BUTTON_RED:{FILE:"buttons/red",WIDTH:373/3,HEIGHT:140/3},ICON_HAMMER:{FILE:"icons/hammer",WIDTH:42,HEIGHT:134/3},ICON_HAMMER_BIG:{FILE:"icons/hammer-big",WIDTH:254/3,HEIGHT:90},ICON_ORANGE_CIRCLE:{FILE:"icons/orange-circle",WIDTH:49/3,HEIGHT:49/3},ICON_REPLAY:{FILE:"icons/replay",WIDTH:40,HEIGHT:136/3},ICON_REPLAY_BIG:{FILE:"icons/replay-big",WIDTH:79,HEIGHT:89},ICON_TIME:{FILE:"icons/time",WIDTH:70/3,HEIGHT:24},ICON_UNDO:{FILE:"icons/undo",WIDTH:134/3,HEIGHT:42},ICON_UNDO_BIG:{FILE:"icons/undo-big",WIDTH:233/3,HEIGHT:73},ICON_UNSCREW:{FILE:"icons/unscrew",WIDTH:128/3,HEIGHT:44},ICON_UNSCREW_BIG:{FILE:"icons/unscrew-big",WIDTH:259/3,HEIGHT:269/3},ICON_WARNING:{FILE:"icons/warning",WIDTH:18,HEIGHT:50/3},ICON_WARNING_YELLOW:{FILE:"icons/warning-yellow",WIDTH:109/3,HEIGHT:33},ICON_RED_CIRCLE:{FILE:"icons/red-circle",WIDTH:70/3,HEIGHT:73/3},ICON_CROWN:{FILE:"icons/crown",WIDTH:385/3,HEIGHT:283/3},ICON_LOCK:{FILE:"icons/lock",WIDTH:148/3,HEIGHT:188/3},ICON_HAMMER_PREFIX:{FILE:"icons/hammer/hammer-",WIDTH:319/3,HEIGHT:505/3},ICON_UNSCREW_PREFIX:{FILE:"icons/unscrew/unscrew-",WIDTH:359/3,HEIGHT:424/3},GUIDE_CIRCLE_GLOW:{FILE:"guides/circle-glow",WIDTH:349/3,HEIGHT:349/3},GUIDE_HAND:{FILE:"guides/hand",WIDTH:149/3,HEIGHT:143/3},GUIDE_ARROW:{FILE:"guides/arrow",WIDTH:128/3,HEIGHT:158/3},SCREW_PIN:"screws/pin",SCREW_PREFIX:"screws/screw-",TEXT_GOOD_JOB:{FILE:"texts/good-job",WIDTH:592/3,HEIGHT:45},WOOD_NUT_HOLE_GOLD:"wood-nuts/hole_gold",WOOD_NUT_HOLE_INSIDE:"wood-nuts/hole-inside",WOOD_NUT_HOLE_SILVER:"wood-nuts/hole_silver",WOOD_NUT_PATTERN:"patterns/pattern-",BLUE_KEY:"hole-objects/blue_key",BLUE_LOCK_1:"hole-objects/blue_lock_1",BLUE_LOCK_2:"hole-objects/blue_lock_2",RED_KEY:"hole-objects/red_key",RED_LOCK_1:"hole-objects/red_lock_1",RED_LOCK_2:"hole-objects/red_lock_2",YELLOW_KEY:"hole-objects/yellow_key",YELLOW_LOCK_1:"hole-objects/yellow_lock_1",YELLOW_LOCK_2:"hole-objects/yellow_lock_2",FLYING_KEY:"hole-objects/flying_key",LOCK_FLYING:"hole-objects/lock",SCREW_LOCK:"hole-objects/screw_lock",CHAIN_1:{FILE:"hole-objects/chain_1",WIDTH:60,HEIGHT:116/3},CHAIN_2:{FILE:"hole-objects/chain_2",WIDTH:60,HEIGHT:12},ICE_FULL:"hole-objects/ice_full",ICE_1_3:"hole-objects/ice_1_3",ICE_2_3:"hole-objects/ice_2_3",FX_BROKE_1:"effects/broke-1",FX_BROKE_2:"effects/broke-2",FX_BROKE_3:"effects/broke-3",FX_BROKE_4:"effects/broke-4",FX_BROKE_5:"effects/broke-5"}},DEMO_SPINE:{KEY:"demo-spine",jsonPATH:"./assets/spines/demo/demo.json",atlasPATH:"./assets/spines/demo/demo.atlas"}};GameCore.Utils.Valid.isDebugger()&&(s.EFFECTS.FRAME=(0,i.Z)({},s.ANIMATION_SCENE.FRAME,s.EFFECTS.FRAME)),t.Z=s},442:function(e,t,n){"use strict";n.d(t,{C:function(){return r},K:function(){return s}});var i=n(72),r={BOOT_SCENE:"BOOT_SCENE",LOAD_SCENE:"LOAD_SCENE",GAME_SCENE:"GAME_SCENE",GLOBAL_SCENE:"GLOBAL_SCENE",DASHBOARD_SCENE:"DASHBOARD_SCENE",GAME_OVER_SCENE:"GAME_OVER_SCENE",LEADERBOARD_SCENE:"LEADERBOARD_SCENE",RESULT_MATCH_SCENE:"RESULT_MATCH_SCENE",ERROR_SCENE:"ERROR_SCENE",TEST_SCENE:"TEST_SCENE",ANIMATIONS_SCENE:"ANIMATIONS_SCENE"},s={SWITCH:n.n(i)()("SWITCH")}},204:function(e,t,n){"use strict";n.d(t,{Ks:function(){return r},o4:function(){return i}});var i={NOTIFY_SCREEN:"NOTIFY_SCREEN",PRODUCT_RECEIVE_SCREEN:"PRODUCT_RECEIVE_SCREEN",REWARD_SCREEN:"REWARD_SCREEN",PAUSE_SCREEN:"PAUSE_SCREEN",RESCUE_SCREEN:"RESCUE_SCREEN",COMPLETE_SCREEN:"COMPLETE_SCREEN",QUIT_SCREEN:"QUIT_SCREEN",BUY_ITEM_SCREEN:"BUY_ITEM_SCREEN",GUIDE_SCREEN:"GUIDE_SCREEN",SETTINGS_SCREEN:"SETTINGS_SCREEN",NO_ADS_SCREEN:"NO_ADS_SCREEN",STORE_SCREEN:"STORE_SCREEN",STARTING_SCREEN:"STARTING_SCREEN",BEST_SCORE_SCREEN:"BEST_SCORE_SCREEN",DAILY_REWARD_SCREEN:"DAILY_REWARD_SCREEN",DAILY_MISSIONS_SCREEN:"DAILY_MISSIONS_SCREEN",LUCKY_REWARD_SCREEN:"LUCKY_REWARD_SCREEN",REWARD_ITEM_SCREEN:"REWARD_ITEM_SCREEN"},r={SCREEN:200,POPUP:300,PRIORITY:999}},128:function(e,t){"use strict";t.Z={BUTTON_CLICK:"button_click",CONGRATULATION:"congratulation",CONFETTI:"confetti",DAILY_REWARD:"daily_reward",DIAMONDS_DROP:"diamonds_drop",DIAMONDS_EAT:"diamonds_eat",FIREWORKS_BIG:"fireworks_big",FIREWORKS_SOAR:"fireworks_soar",FIREWORKS_SMALL:"fireworks_small",GEM_DROP:"gem_drop",GAME_OVER_SCENE:"game_over_scene",GEM_EXPLOSIVE_1:"gem_explosive_1",GEM_EXPLOSIVE_2:"gem_explosive_2",GEM_EXPLOSIVE_3:"gem_explosive_3",GEM_EXPLOSIVE_4:"gem_explosive_4",GEM_EXPLOSIVE_5:"gem_explosive_5",GEM_EXPLOSIVE_6:"gem_explosive_6",GEM_EXPLOSIVE_FREEZE:"gem_explosive_freeze",GEM_FALLING:"gem_falling",GIFT_CHARGE:"gift_charge",GIFT_EXPLODE:"gift_explode",GIFT_REVEAL:"gift_reveal",ITEM_ACTIVE_AMBIENCE:"item_active_ambience",MISSION_COMPLETED:"mission_completed",MISSION_REWARD:"mission_reward",MOVE_WRONG:"move_wrong",START_LEVEL:"start_level",POPUP_OFF:"popup_off",POPUP_SHOW:"popup_show",SCORE_COUNTER:"score_counter",START_GAME:"start_game",USE_HAMMER:"use_hammer",USE_PAINT:"use_paint",USE_SHUFFLE:"use_shuffle",YOU_LOSE:"you_lose",YOU_WIN:"you_win",GOAL_PROGRESS:"goal_progress",POPUP_IN:"popup_in",HAMMER_HIT:"hammer_hit",SCREW_IN:"screw_in",SCREW_OUT:"screw_out",WOOD_BREAK:"wood_break"}},452:function(e,t,n){"use strict";var i,r=n(46).Z.DEFAULT,s=r.KEY,a=r.FRAME,o={GOLD_SCREW_10:"gold_screw_10",GOLD_SCREW_30:"gold_screw_30",GOLD_SCREW_60:"gold_screw_60",SILVER_SCREW_15:"silver_screw_15",SILVER_SCREW_45:"silver_screw_45",SILVER_SCREW_90:"silver_screw_90",REMOVE_ADS_30:"remove_ads_30",REMOVE_ADS_BUNDLE:"remove_ads_30_bundle",SCREW_PILE:"screw_pile"},c={PRODUCTS:((i={})[o.GOLD_SCREW_10]={title:"Gold Screw",itemsDataByKey:{GoldScrew:10},type:"Normal",background:{key:s,frame:a.BACKGROUND_STORE_ITEM_PANEL.FILE,width:a.BACKGROUND_STORE_ITEM_PANEL.WIDTH,height:a.BACKGROUND_STORE_ITEM_PANEL.HEIGHT},icon:{key:s,frame:a.ICON_SCREW_GOLD.FILE,width:a.ICON_SCREW_GOLD.WIDTH,height:a.ICON_SCREW_GOLD.HEIGHT}},i[o.GOLD_SCREW_30]={title:"Gold Screw",itemsDataByKey:{GoldScrew:30},type:"Normal",background:{key:s,frame:a.BACKGROUND_STORE_ITEM_PANEL.FILE,width:a.BACKGROUND_STORE_ITEM_PANEL.WIDTH,height:a.BACKGROUND_STORE_ITEM_PANEL.HEIGHT},icon:{key:s,frame:a.ICON_SCREW_GOLD.FILE,width:a.ICON_SCREW_GOLD.WIDTH,height:a.ICON_SCREW_GOLD.HEIGHT}},i[o.GOLD_SCREW_60]={title:"Gold Screw",itemsDataByKey:{GoldScrew:60},type:"Normal",background:{key:s,frame:a.BACKGROUND_STORE_ITEM_PANEL.FILE,width:a.BACKGROUND_STORE_ITEM_PANEL.WIDTH,height:a.BACKGROUND_STORE_ITEM_PANEL.HEIGHT},icon:{key:s,frame:a.ICON_SCREW_GOLD.FILE,width:a.ICON_SCREW_GOLD.WIDTH,height:a.ICON_SCREW_GOLD.HEIGHT}},i[o.SILVER_SCREW_15]={title:"Silver Screw",itemsDataByKey:{SilverScrew:15},type:"Normal",background:{key:s,frame:a.BACKGROUND_STORE_ITEM_PANEL.FILE,width:a.BACKGROUND_STORE_ITEM_PANEL.WIDTH,height:a.BACKGROUND_STORE_ITEM_PANEL.HEIGHT},icon:{key:s,frame:a.ICON_SCREW_SILVER.FILE,width:a.ICON_SCREW_SILVER.WIDTH,height:a.ICON_SCREW_SILVER.HEIGHT}},i[o.SILVER_SCREW_45]={title:"Silver Screw",itemsDataByKey:{SilverScrew:45},type:"Normal",background:{key:s,frame:a.BACKGROUND_STORE_ITEM_PANEL.FILE,width:a.BACKGROUND_STORE_ITEM_PANEL.WIDTH,height:a.BACKGROUND_STORE_ITEM_PANEL.HEIGHT},icon:{key:s,frame:a.ICON_SCREW_SILVER.FILE,width:a.ICON_SCREW_SILVER.WIDTH,height:a.ICON_SCREW_SILVER.HEIGHT}},i[o.SILVER_SCREW_90]={title:"Silver Screw",itemsDataByKey:{SilverScrew:90},type:"Normal",background:{key:s,frame:a.BACKGROUND_STORE_ITEM_PANEL.FILE,width:a.BACKGROUND_STORE_ITEM_PANEL.WIDTH,height:a.BACKGROUND_STORE_ITEM_PANEL.HEIGHT},icon:{key:s,frame:a.ICON_SCREW_SILVER.FILE,width:a.ICON_SCREW_SILVER.WIDTH,height:a.ICON_SCREW_SILVER.HEIGHT}},i[o.REMOVE_ADS_30]={title:"Remove Ads",type:"RemoveAds",background:{key:s,frame:a.BACKGROUND_STORE_ITEM_PANEL_LONG.FILE,width:a.BACKGROUND_STORE_ITEM_PANEL_LONG.WIDTH,height:a.BACKGROUND_STORE_ITEM_PANEL_LONG.HEIGHT},itemsDataByKey:{},removeAdDays:30},i[o.SCREW_PILE]={title:"Screw Pile",type:"Bundle",itemsDataByKey:{GoldScrew:1,SilverScrew:1},background:{key:s,frame:a.BACKGROUND_STORE_ITEM_PANEL_LONG.FILE,width:a.BACKGROUND_STORE_ITEM_PANEL_LONG.WIDTH,height:a.BACKGROUND_STORE_ITEM_PANEL_LONG.HEIGHT}},i[o.REMOVE_ADS_BUNDLE]={title:"Remove Ads Bundle",type:"Bundle",itemsDataByKey:{GoldScrew:10,SilverScrew:5},background:{key:s,frame:a.BACKGROUND_STORE_ITEM_PANEL_LONG.FILE,width:a.BACKGROUND_STORE_ITEM_PANEL_LONG.WIDTH,height:a.BACKGROUND_STORE_ITEM_PANEL_LONG.HEIGHT},removeAdDays:30},i),ID:o};t.Z=c},622:function(e,t,n){"use strict";var i=n(37),r=n(14),s=n(46).Z.EFFECTS,a=s.KEY,o=s.FRAME,c=function(e){function t(t){var n;return(n=e.call(this,t,a,o.FX_STAR_YELLOW)||this).emitZone=void 0,n.emitter=void 0,n.createEmitZone(),n.scene.add.existing((0,i.Z)(n)),n}(0,r.Z)(t,e);var n=t.prototype;return n.createEmitZone=function(){this.emitZone=new Phaser.Geom.Rectangle},n.createEmitters=function(){var e=1/GameCore.Utils.Image.getImageScale();this.emitter=this.createEmitter({on:!1,frame:o.FX_COMET,emitZone:{source:this.emitZone,type:"random"},speed:20,timeScale:1,frequency:100,alpha:{start:1,end:0,ease:Phaser.Math.Easing.Expo.Out},scale:{start:2*e,end:.1*e,ease:Phaser.Math.Easing.Expo.Out},lifespan:2666})},n.run=function(e,t,n,i,r){this.stop(),this.reset(),this.emitZone.setSize(i,r),this.emitZone.setPosition(t-i/2,n-r/2),this.emitter.setQuantity(e),this.emitter.start()},n.explode=function(e,t,n){this.emitter||this.reset(),this.emitter.explode(e,t,n)},n.stop=function(){var e,t;null==(e=this.emitter)||e.killAll(),null==(t=this.emitter)||t.stop()},n.reset=function(){this.createEmitters()},t}(Phaser.GameObjects.Particles.ParticleEmitterManager);t.Z=c},620:function(e,t,n){"use strict";var i=n(37),r=n(14),s=n(46).Z.EFFECTS,a=s.KEY,o=s.FRAME,c=function(e){function t(t){var n;return(n=e.call(this,t,a,o.FX_SPARK)||this).deathZone=void 0,n.emitter=void 0,n.createDeathZone(),n.createEmitters(),n.setActive(!1),n.setVisible(!1),n.scene.add.existing((0,i.Z)(n)),n}(0,r.Z)(t,e);var n=t.prototype;return n.createDeathZone=function(){this.deathZone=new Phaser.Geom.Circle},n.createEmitters=function(){var e=1/GameCore.Utils.Image.getImageScale();this.emitter=this.createEmitter({on:!1,frame:o.FX_SPARK,speed:{min:10,max:1200},scale:{start:1.33*e,end:0},alpha:{start:1,end:0,ease:Phaser.Math.Easing.Expo.Out},deathZone:{source:this.deathZone,type:"onLeave"},lifespan:3e3})},n.explode=function(e,t,n,i){this.setActive(!0),this.setVisible(!0),this.deathZone.radius=i,this.deathZone.setPosition(t,n),this.emitter.explode(e,t,n)},t}(Phaser.GameObjects.Particles.ParticleEmitterManager);t.Z=c},449:function(e,t,n){"use strict";var i=n(37),r=n(14),s=n(46).Z.EFFECTS,a=s.KEY,o=s.FRAME,c=function(e){function t(t){var n;return(n=e.call(this,t,a,o.FX_COMET)||this).emitZone=void 0,n.emitter=void 0,n.createEmitZone(),n.createEmitters(),n.scene.add.existing((0,i.Z)(n)),n}(0,r.Z)(t,e);var n=t.prototype;return n.createEmitZone=function(){this.emitZone=new Phaser.Geom.Rectangle},n.createEmitters=function(){var e=1/GameCore.Utils.Image.getImageScale();this.emitter=this.createEmitter({on:!1,frame:o.FX_COMET,emitZone:{source:this.emitZone,type:"random"},deathZone:{source:this.emitZone,type:"onLeave"},timeScale:1,frequency:150,speedY:{min:-20,max:-60},alpha:{start:1,end:0,ease:Phaser.Math.Easing.Cubic.Out},scale:{start:1*e,end:0,ease:Phaser.Math.Easing.Cubic.Out},lifespan:{min:1500,max:2500}})},n.run=function(e,t,n,i,r){this.stop(),this.emitZone.setSize(i,r),this.emitZone.setPosition(t-i/2,n-r/2),this.emitter.setQuantity(e),this.emitter.start()},n.stop=function(){var e,t;null==(e=this.emitter)||e.killAll(),null==(t=this.emitter)||t.stop()},t}(Phaser.GameObjects.Particles.ParticleEmitterManager);t.Z=c},454:function(e,t){"use strict";t.Z={LAYOUT_UPDATE:"layout-update"}},453:function(e,t,n){"use strict";n.d(t,{Z:function(){return v}});var i=n(68),r=n(14),s=n(47),a=n.n(s),o=n(38),c=n.n(o),l=n(101),u=function(e){function t(t,n,i){var r;return(r=e.call(this,t,0,0,n,i)||this).setOrigin(0,0),r}return(0,r.Z)(t,e),t}(Phaser.GameObjects.Zone),h=n(438),d=n(454),p=n(202),f=n(204),v=function(e){function t(){var t;return(t=e.call(this,{visible:!1})||this).unsubscribeList=void 0,t.gameZone=void 0,t.background=void 0,t.sceneAnimationPromise=void 0,t.handleOpenScene=function(){t.logPageviewOnOpen(),t.logEventOpen()},t.handleResize=function(){if(t.background&&t.gameZone){var e=t.world.getResizeEventData(),n=e.width,i=e.height;t.gameZone.setSize(n,i),t.events.emit(d.Z.LAYOUT_UPDATE)}},t.removeStateChange=function(){t.unsubscribeList.forEach((function(e){return e()}))},t}(0,r.Z)(t,e);var n=t.prototype;return n.create=function(){this.events.on("wake",this.handleOpenScene),this.events.on("resume",this.handleOpenScene),this.events.on("create",this.handleOpenScene),this.world.events.on(h.Z.RESIZE,this.handleResize),this.scaleGame(),this.createGameZone()},n.scaleGame=function(){var e=this.getCamera("main"),t=this.world.getZoomRatio(),n=this.world.getWorldSize(),i=n.width,r=n.height;e.setZoom(t),e.centerOn(i/2,r/2)},n.createGameZone=function(){var e=this.world.getWorldSize(),t=e.width,n=e.height;this.gameZone=new u(this,t,n)},n.getCamera=function(e){return"main"===e?this.cameras.main:this.cameras.getCamera(e)},n.createMask=function(e){void 0===e&&(e=1),this.getCamera("main").setBackgroundColor("rgba(0, 0, 0, "+e+")")},n.fontSize=function(e){return e/1},n.createBackground=function(e,t,n,i){var r=this;this.background?(this.background.setTexture(e),t&&this.background.setFrame(t)):(this.background=this.make.image({key:e,frame:t}),this.world.isLandscape()&&this.game.events.on("world-resize",(function(){r.createBackground(r.background.texture.key,r.background.frame.name,r.background.alpha,r.background.tint)}))),this.background.setName(e);var s=this.gameZone,a=s.displayWidth,o=s.displayHeight;if(this.background.setDisplaySize(a,o),Phaser.Display.Align.In.Center(this.background,this.gameZone),this.world.isLandscape()){var c=this.world.getScreenWidth(),l=this.world.getScreenHeight(),u=(this.world.getPixelRatioForCanvas(),this.world.getWorldSize()),h=u.width,d=u.height,p=getComputedStyle(window.game.canvas).width,f=parseInt(p),v=c*h/f,m=l*h/f,g=90*h/f;this.background.setPosition(h/2+g,d/2),this.background.setSize(v,m),this.background.setDisplaySize(v,m)}GameCore.Utils.Valid.isNumber(n)&&this.background.setAlpha(n),GameCore.Utils.Valid.isNumber(i)&&this.background.setTint(i)},n.handleStateChange=function(e){var t=this;this.unsubscribeList=[],e.forEach((function(e){var n=e.selector,i=e.callback,r=t.storage.watch(n,i);t.unsubscribeList.push(r)})),this.events.once("sleep",this.removeStateChange),this.events.once("destroy",this.removeStateChange),this.events.once("shutdown",this.removeStateChange)},n.logPageviewOnOpen=function(){this.analytics.pageview(this.scene.key)},n.logEventOpen=function(){this.analytics.event(l._.SCREEN_OPEN,{screen_name:this.getSceneName()})},n.getSceneName=function(){return GameCore.Utils.String.toUpperCamelCase(this.scene.key.toLowerCase())},n.runEntranceAnimation=function(e){var t,n=this,r=null==(t=this.game.globalScene)||null==(t=t.screen.get(f.o4.NOTIFY_SCREEN))?void 0:t.visible,s=function(e,t){n.world.isLandscape()&&!r&&p.Z.updateMaskBackground(1-t)};return this.sceneAnimationPromise=new(c())((function(e){n.cameras.main.fadeIn(200,0,0,0,s),n.cameras.main.once(Phaser.Cameras.Scene2D.Events.FADE_IN_COMPLETE,(0,i.Z)(a().mark((function t(){return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e();case 1:case"end":return t.stop()}}),t)}))))})),this.sceneAnimationPromise},n.runExitAnimation=function(e){var t,n=this,r=null==(t=this.game.globalScene)||null==(t=t.screen.get(f.o4.NOTIFY_SCREEN))?void 0:t.visible,s=function(e,t){n.world.isLandscape()&&!r&&p.Z.updateMaskBackground(t)};return this.sceneAnimationPromise=new(c())((function(e){n.cameras.main.fadeOut(200,0,0,0,s),n.cameras.main.once(Phaser.Cameras.Scene2D.Events.FADE_OUT_COMPLETE,(0,i.Z)(a().mark((function t(){return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e();case 1:case"end":return t.stop()}}),t)}))))})),this.sceneAnimationPromise},t}(Phaser.Scene)},202:function(e,t,n){"use strict";var i,r=n(56),s=n.n(r),a=n(48),o=n.n(a),c=n(39),l=n.n(c),u=n(71),h=n.n(u),d=n(72),p=n.n(d),f=n(91),v=n.n(f);function m(e,t){var n="undefined"!==typeof p()&&v()(e)||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){var n;if(!e)return;if("string"===typeof e)return g(e,t);var i=l()(n=Object.prototype.toString.call(e)).call(n,8,-1);"Object"===i&&e.constructor&&(i=e.constructor.name);if("Map"===i||"Set"===i)return h()(e);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return g(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var i=0;return function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function g(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var y=function(e){var t=document.getElementById("app-mask");t&&(t.style.background="rgb(1 1 1 / "+e+")")},E=function(){function e(){}return e.registerObject=function(t){var n;s()(n=e.objects).call(n,t)||e.objects.push(t)},e.removeObject=function(t){var n;e.objects=o()(n=e.objects).call(n,(function(e){return e!==t}))},e.openScreen=function(t,n){e.openingScreens.push({screen:t,grayscale:n})},e.closeScreen=function(t){var n;e.openingScreens=o()(n=e.openingScreens).call(n,(function(e){return e.screen!==t}))},e.updateGrayScale=function(){var t=e.openingScreens,n=!1;t.length>0&&(n=t[t.length-1].grayscale),n!=this.previousGrayscale&&(this.previousGrayscale=n,this.setGrayScaleForAppBg(n))},e.setGrayScaleForAppBg=function(e){if(window.game.world.isLandscape()){var t=document.getElementById("app-bg");t&&(t.style.filter=e?"grayscale(0.8)":"")}},e.updateMaskBackground=function(e){y(e)},e.updateAppBg=function(e){if(window.game.world.isLandscape()){var t=document.getElementById("app-bg");if(t){var n=new Image;n.src=e,n.onload=function(){t.style.backgroundImage="url("+e+")"}}}},e}();i=E,E.objects=[],E.openingScreens=[],E.currentAlpha=0,E.updateBgMask=function(){for(var e,t=1,n=m(i.objects);!(e=n()).done;){var r=e.value,s=r.scene;s&&s.scene.isActive(s.scene.key)&&(r.parentContainer?r.parentContainer.visible&&r.visible&&(t*=1-r.alpha*r.parentContainer.alpha):r.visible&&(t*=1-r.alpha))}var a=1-t;i.currentAlpha!=a&&(i.currentAlpha=a,y(a))},E.previousGrayscale=!1,t.Z=E},619:function(e,t,n){"use strict";n.d(t,{Z:function(){return ie}});var i=n(68),r=n(54),s=n(14),a=n(47),o=n.n(a),c=n(69),l=n.n(c),u=n(38),h=n.n(u),d=n(55),p=n.n(d),f=n(46),v=n(442),m=n(204),g=n(443),y=(0,n(437).P1)([function(e){return e.scene.currentSceneKey}],(function(e){return e})),E=n(198),S=n(37),w=n(102),I=n(205),A=f.Z.DEFAULT,T=A.KEY,C=A.FRAME,b=function(e){function t(t){var n;return(n=e.call(this,t,0,0)||this).fps=0,n.fpsString="FPS: %1",n.fpsText=void 0,n.background=void 0,n.lastUpdate=void 0,n.update=function(e){if(!(e-n.lastUpdate<800)){n.lastUpdate=e;var t=Math.floor(n.scene.game.loop.actualFps);n.setFps(t)}},n.createFps(),n.setDepth(w.Z.DEBUG),n.scene.add.existing((0,S.Z)(n)),n.scene.events.on(Phaser.Scenes.Events.UPDATE,n.update),n}(0,s.Z)(t,e);var n=t.prototype;return n.setFps=function(e){this.fps=e;var t=Phaser.Utils.String.Format(this.fpsString,[e]);this.fpsText.setText(t)},n.createFps=function(){this.background=this.scene.make.image({key:T,frame:C.BLANK}),this.background.setName("BG"),this.background.setTint(13801480),this.background.setWorldSize(45,25),this.fpsText=new I.Z(this.scene,{text:"",fontSize:this.scene.fontSize(12)}),this.fpsText.setName("FPS Meter"),Phaser.Display.Align.In.Center(this.fpsText,this.background,1),this.add([this.background,this.fpsText]),this.setFps(0)},t}(Phaser.GameObjects.Container),P=b,x=function(e){function t(t){var n;if((n=e.call(this,t,0,0)||this).performance=void 0,n.memory=0,n.maxMemoryLimit=void 0,n.maxPercentThreshold=void 0,n.normalColor=3459162,n.warningColor=16768343,n.alarmColor=15812200,n.memoryString="Memory: %1MB / %2MB",n.memoryText=void 0,n.lastUpdate=void 0,n.update=function(e){if(!(e-n.lastUpdate<1e3)){n.lastUpdate=e;var t=n.performance.memory.usedJSHeapSize,i=1048576*n.maxMemoryLimit,r=Math.round(t/1048576);n.setMemory(r),n.memoryText.setTint(n.normalColor),t>n.maxPercentThreshold/100*i&&n.memoryText.setTint(n.warningColor),t>i&&n.memoryText.setTint(n.alarmColor)}},n.performance=window.performance,n.createMemory(),n.setDepth(w.Z.DEBUG),n.scene.add.existing((0,S.Z)(n)),!n.isSupport())return n.memoryText.setText("Memory: not supported!"),(0,S.Z)(n);var i=n.performance.memory.jsHeapSizeLimit;return n.maxPercentThreshold=90,n.setMaxMemory(i/1048576),n.scene.events.on(Phaser.Scenes.Events.UPDATE,n.update),n}(0,s.Z)(t,e);var n=t.prototype;return n.isSupport=function(){var e;return this.performance&&!(null==(e=this.performance)||!e.memory)},n.setMaxMemory=function(e){this.maxMemoryLimit=Math.round(e)},n.setMemory=function(e){this.memory=e;var t=Phaser.Utils.String.Format(this.memoryString,[e,this.maxMemoryLimit]);this.memoryText.setText(t)},n.createMemory=function(){this.memoryText=new I.Z(this.scene,{fontSize:this.scene.fontSize(14),text:""}),this.memoryText.setDepth(2e3),this.memoryText.setName("Memory Meter"),this.add(this.memoryText),this.setMemory(0)},t}(Phaser.GameObjects.Container),R=x,O=n(446),_=n(444),k=function(e){function t(t,n,i,r){var s;return(s=e.call(this,t,n,i,r)||this).loadingIcon=void 0,s.messageText=void 0,s.openAnimation=void 0,s.closeTimerEvent=void 0,s.addLoadingIcon(),s.addMessageText(),s.setDepth(m.Ks.PRIORITY),s.background.setAlpha(.8),s}(0,s.Z)(t,e);var n=t.prototype;return n.open=function(t){var n,i=this;e.prototype.open.call(this,t);var r=this.getData(["message","duration","loading"]),s=r[0],a=void 0===s?"":s,o=r[1],c=void 0===o?0:o,l=r[2],u=void 0!==l&&l;this.setMessage(a),this.showLoading(u),null==(n=this.closeTimerEvent)||n.remove(),c>0&&(this.closeTimerEvent=this.scene.time.addEvent({delay:c,callback:function(){i.visible&&i.scene.screen.close(i.name)}})),this.runOpenAnimation()},n.addLoadingIcon=function(){this.loadingIcon=new _.Z(this.scene),this.add(this.loadingIcon),Phaser.Display.Align.In.Center(this.loadingIcon,this.zone)},n.addMessageText=function(){this.messageText=new I.Z(this.scene,{text:"",fontSize:this.scene.fontSize(28)}),this.messageText.setWordWrapWidth(this.zone.width-20),this.messageText.setCenterAlign(),this.add(this.messageText)},n.setMessage=function(e){this.messageText.setText(e)},n.showLoading=function(e){this.loadingIcon.setVisible(e);var t=!1===e?20:80;Phaser.Display.Align.In.Center(this.messageText,this.zone,0,t)},n.runOpenAnimation=function(){var e,t,n,i=this;null==(e=this.openAnimation)||e.stop(),null==(t=this.openAnimation)||t.remove();var r=[this.messageText.scale,this.loadingIcon.scale];return this.openAnimation=new O.Z({targets:[this.messageText,this.loadingIcon],props:{scale:{getStart:function(e){return e.scale-.3},getEnd:function(e){return e.scale}}}}),null==(n=this.openAnimation)||null==(n=n.tween)||n.once(Phaser.Tweens.Events.TWEEN_STOP,(function(){i.messageText.scale=r[0],i.loadingIcon.scale=r[1]})),this.openAnimation.play(),h().resolve()},n.logPageviewOnOpen=function(){},n.logPageviewOnClose=function(){},t}(GameCore.Screen),D=k,L=n(452),B=n(74),N=n.n(B),H=n(56),M=n.n(H),G=n(451),W=n(447),U=n(128),F=n(448),Z=n(450),Y=n(101),V=f.Z.DEFAULT,z=V.KEY,K=V.FRAME,j=function(e){function t(t,n,i,r){var s;return(s=e.call(this,t,n,i,r)||this).popup=void 0,s.popupShowUpAnimation=void 0,s.popupFadeOutAnimation=void 0,s.popupFadeOutAnimation2=void 0,s.onceClose=void 0,s.itemGoldScrew=void 0,s.itemSilverScrew=void 0,s.itemRemoveAds=void 0,s.items=[],s.startPosition=void 0,s.endPosition=void 0,s.handleClose=function(){s.runCloseAnimation()},s.textContinue=void 0,s.source="StoreScreen",s.scene=t,s.createPopup(),s.createContents(),s.arrangeItems(),s.createInput(),s.setDepth(m.Ks.POPUP),s.background.setAlpha(.8),s.onceClose=void 0,s.zone.on(Phaser.Input.Events.POINTER_DOWN,s.handleClose),s}(0,s.Z)(t,e);var n=t.prototype;return n.open=function(t){if(e.prototype.open.call(this),this.onceClose=void 0,this.startPosition=void 0,this.endPosition=void 0,this.items=[],this.itemGoldScrew.kill(),this.itemSilverScrew.kill(),this.itemRemoveAds.kill(),this.source=(null==t?void 0:t.source)||"StoreScreen",t){var n=t.treasure,i=t.onClose;this.onceClose=i,this.claimTreasureData(n);var r=this.scene.game.world.getWorldSize(),s=r.width/2,a=r.height/2;if(t.startPosition&&(this.startPosition={x:t.startPosition.x-s,y:t.startPosition.y-a}),t.endPosition){var o=t.endPosition,c=o.GoldScrew,l=o.SilverScrew,u=o.RemoveAds;this.endPosition={GoldScrew:c&&{x:c.x-s,y:c.y-a},SilverScrew:l&&{x:l.x-s,y:l.y-a},RemoveAds:u&&{x:u.x-s,y:u.y-a}}}this.alignItem()}this.items.forEach((function(e){e.stopAnimation()})),this.runOpenAnimation()},n.claimTreasureData=function(e){if(e.GoldScrew){this.itemGoldScrew.revive(),this.itemGoldScrew.updateItem(Number(e.GoldScrew));var t=this.scene.player.getGoldScrew()+Number(e.GoldScrew);this.scene.player.setCustomData("goldScrew",t),this.items.push(this.itemGoldScrew),this.logEarnVirtualCurrency(Number(e.GoldScrew),"GoldScrew")}if(e.SilverScrew){this.itemSilverScrew.revive(),this.itemSilverScrew.updateItem(Number(e.SilverScrew));var n=this.scene.player.getSilverScrew()+Number(e.SilverScrew);this.scene.player.setCustomData("silverScrew",n),this.items.push(this.itemSilverScrew),this.logEarnVirtualCurrency(Number(e.SilverScrew),"SilverScrew")}e.RemoveAd&&(this.itemRemoveAds.revive(),this.handleDisableAd(),this.items.push(this.itemRemoveAds),this.logEarnItem(1,"RemoveAds"))},n.alignItem=function(){var e,t=this;if(0!==this.items.length){var n=-(N()(e=this.items).call(e,(function(e,t){return e+t.width}),0)+40*(this.items.length-1))/2+this.items[0].width/2;this.items.forEach((function(e,i){Phaser.Display.Align.In.Center(e,t.popup,n),n+=e.width+40}))}},n.createInput=function(){},n.createPopup=function(){this.popup=new W.Z(this.scene,{width:878/3,height:1129/3}),this.add(this.popup),this.popup.getPopup().setVisible(!1),Phaser.Display.Align.In.Center(this.popup,this.zone)},n.createContents=function(){this.itemGoldScrew=new F.Z(this.scene,{key:z,frame:K.ICON_SCREW_GOLD.FILE,width:K.ICON_SCREW_GOLD.WIDTH,height:K.ICON_SCREW_GOLD.HEIGHT,text:"100"}),this.itemSilverScrew=new F.Z(this.scene,{key:z,frame:K.ICON_SCREW_SILVER.FILE,width:K.ICON_SCREW_SILVER.WIDTH,height:K.ICON_SCREW_SILVER.HEIGHT,text:"100"}),this.itemRemoveAds=new F.Z(this.scene,{key:z,frame:K.ICON_SCREW_GOLD.FILE,width:.5*K.ICON_SCREW_GOLD.WIDTH,height:.5*K.ICON_SCREW_GOLD.HEIGHT,text:""}),this.popup.add([this.itemGoldScrew,this.itemSilverScrew,this.itemRemoveAds]),this.createContinueText()},n.createContinueText=function(){this.textContinue=new I.Z(this.scene,{text:"Tap to claim",fontSize:this.scene.fontSize(21),strokeColor:3747354,strokeThickness:2.4,strokeOffset:{y:.5}}).setCenterAlign().setTint(13417136),this.popup.add([this.textContinue])},n.arrangeItems=function(){Phaser.Display.Align.In.Center(this.textContinue,this.popup,0,100)},n.runOpenAnimation=function(){var e;return null!=(e=this.popupShowUpAnimation)&&null!=(e=e.tween)&&e.isPlaying()||(this.scene.audio.playSound(U.Z.POPUP_SHOW),this.runPopupEntrancesAnimation(0,200),this.items.forEach((function(e,t){e.alpha=1,e.scale=1})),this.runPopupContentEntrancesAnimation(200,700)),h().resolve()},n.runCloseAnimation=function(){var e,t;return null!=(e=this.popupFadeOutAnimation)&&null!=(e=e.tween)&&e.isPlaying()||null!=(t=this.popupFadeOutAnimation2)&&null!=(t=t.tween)&&t.isPlaying()||(this.scene.audio.playSound(U.Z.POPUP_OFF,{volume:.6}),this.endPosition?(this.runPopupContentExitsAnimation(0,300),this.runPopupExitsAnimation2(300,10)):this.runPopupExitsAnimation(0,300)),h().resolve()},n.runPopupEntrancesAnimation=function(e,t){if(this.popup.setAlpha(1),!this.popupShowUpAnimation){var n=this.popup;n.y,n.scale;this.popupShowUpAnimation=new Z.Z({targets:[this.textContinue],delay:e,duration:t,props:{alpha:{getStart:function(){return 0},getEnd:function(){return 1}}}})}this.popupShowUpAnimation.play()},n.getCubicFunction=function(e,t,n,i,r){var s=(t-i)/(Math.pow(e-r,2)-Math.pow(n-r,2)),a=t-s*Math.pow(e-r,2);return function(e){return s*(e-r)*(e-r)+a}},n.runPopupContentEntrancesAnimation=function(e,t){var n,i,r=this;if(this.startPosition){var s=this.startPosition,a=s.x,o=s.y,c=p()(n=this.items).call(n,(function(e,t){return{x:e.x,y:e.y}})),l=p()(i=this.items).call(i,(function(e,t){var n=e.x,i=e.y,s=.75*a+.25*n;return r.getCubicFunction(a,o,n,i,s)}));this.items.forEach((function(e,t){e.alpha=1,e.scale=.62,e.setPosition(a,o)})),this.scene.tweens.addCounter({delay:e,from:0,to:1,duration:t,ease:Phaser.Math.Easing.Quadratic.Out,onUpdate:function(e){var t=e.getValue();r.items.forEach((function(e,n){e.scale=.38*t+.62;var i=a+t*(c[n].x-a),r=l[n](i);e.setPosition(i,r)}))},onComplete:function(){r.items.forEach((function(e,t){e.runAnimation()}))}})}else this.items.forEach((function(e,t){e.runAnimation()}))},n.runPopupExitsAnimation=function(e,t){var n,i=this;this.popupFadeOutAnimation||(this.popupFadeOutAnimation=new G.Z({targets:[this.popup],delay:e,duration:t,props:{alpha:0},onComplete:function(){i.background.setVisible(!0),i.textContinue.setVisible(!0),i.scene.screen.close(i.name)}})),null==(n=this.popupFadeOutAnimation.tween)||n.once("complete",(function(){i.onceClose&&i.onceClose()})),this.popupFadeOutAnimation.play()},n.runPopupExitsAnimation2=function(e,t){var n,i=this;this.popupFadeOutAnimation2||(this.popupFadeOutAnimation2=new G.Z({targets:[this.popup],delay:e,duration:t,props:{alpha:0},onComplete:function(){i.background.setVisible(!0),i.textContinue.setVisible(!0),i.scene.screen.close(i.name)}})),null==(n=this.popupFadeOutAnimation2.tween)||n.once("complete",(function(){i.onceClose&&i.onceClose()})),this.popupFadeOutAnimation2.play()},n.runPopupContentExitsAnimation=function(e,t){var n,i,r;if(this.background.setVisible(!1),this.textContinue.setVisible(!1),this.itemGoldScrew.active&&null!=(n=this.endPosition)&&n.GoldScrew){var s;this.itemGoldScrew.stopAnimation();var a=(null==(s=this.endPosition)?void 0:s.GoldScrew)||{x:0,y:0},o=a.x,c=a.y;this.scene.tweens.add({targets:this.itemGoldScrew,delay:e,duration:t,scale:.5,x:o,y:c,ease:Phaser.Math.Easing.Quartic.In})}if(this.itemSilverScrew.active&&null!=(i=this.endPosition)&&i.SilverScrew){var l;this.itemSilverScrew.stopAnimation();var u=(null==(l=this.endPosition)?void 0:l.SilverScrew)||{x:0,y:0},h=u.x,d=u.y;this.scene.tweens.add({targets:this.itemSilverScrew,delay:e,duration:t,scale:.5,x:h,y:d,ease:Phaser.Math.Easing.Quartic.In})}if(this.itemRemoveAds.active&&null!=(r=this.endPosition)&&r.RemoveAds){var p;this.itemRemoveAds.stopAnimation();var f=(null==(p=this.endPosition)?void 0:p.RemoveAds)||{x:0,y:0},v=f.x,m=f.y;this.scene.tweens.add({targets:this.itemRemoveAds,delay:e,duration:t,scale:.5,x:v,y:m,ease:Phaser.Math.Easing.Quartic.In})}},n.handleDisableAd=function(){var e=this.scene,t=e.player,n=e.ads;t.getPurchases().forEach((function(e){var t=e.productID;if(M()(t).call(t,L.Z.ID.REMOVE_ADS_30)||M()(t).call(t,L.Z.ID.REMOVE_ADS_BUNDLE)){var i=L.Z.PRODUCTS[t];if(void 0!==i.removeAdDays){var r=i.removeAdDays,s=(new Date).valueOf()/1e3,a=Number(e.purchaseTime)+24*r*3600;s<=a&&n.setDisabledInterstitialAds(Math.ceil((a-s)/86400))}}}))},n.logEarnItem=function(e,t){var n=this.scene;n.analytics.event(Y._.EARN_ITEM,{value:e,item_name:t,earn_from:this.source,level:n.level.getLevelWithStep()})},n.logEarnVirtualCurrency=function(e,t){this.scene.analytics.event(Y._.EARN_VIRTUAL_CURRENCY,{value:e,virtual_currency_name:t,earn_from:this.source,level:this.scene.level.getLevelWithStep()})},t}(GameCore.Screen),X=j,Q=n(453),q=n(202),J=n(201),$=f.Z.DEFAULT,ee=$.KEY,te=$.FRAME,ne=function(e){function t(){for(var t,n,r=arguments.length,s=new Array(r),a=0;a<r;a++)s[a]=arguments[a];return(n=e.call.apply(e,l()(t=[this]).call(t,s))||this).mask=void 0,n.fadeInAnim=void 0,n.fadeOutAnim=void 0,n.fpsMeter=void 0,n.memoryMeter=void 0,n.switchScene=function(e){n.currentScene.key!==e&&n.currentScene.scene.runExitAnimation(n.currentScene.key).then((0,i.Z)(o().mark((function t(){return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n.currentScene.switch(e);case 1:case"end":return t.stop()}}),t)}))))},n.emitGameEventStartScene=function(e){var t=e.scene.key,i=n.getCurrentScene();n.updateSceneState(),e.runEntranceAnimation(i.key),n.updateActiveSceneKey(t),n.game.events.emit(Phaser.Scenes.Events.START,t),(0,E.sw)("scene","Start scene: "+t)},n.emitGameEventSleepScene=function(e){var t=e.scene.scene.key;t!==v.C.LOAD_SCENE&&e.scene.runExitAnimation("").then((function(){n.game.events.emit(Phaser.Scenes.Events.SLEEP,t)}))},n.emitGameEventWakeScene=function(e){var t=e.scene.scene.key;if(t!==v.C.LOAD_SCENE){var i=n.getCurrentScene();n.updateSceneState(),e.scene.runEntranceAnimation(i.key),n.updateActiveSceneKey(t),n.game.events.emit(Phaser.Scenes.Events.WAKE,t)}},n.emitGameEventPauseScene=function(e){var t=e.scene.scene.key;n.game.events.emit(Phaser.Scenes.Events.PAUSE,t)},n.emitGameEventResumeScene=function(e){var t=e.scene.key;n.game.events.emit(Phaser.Scenes.Events.RESUME,t)},n.emitGameEventShutdownScene=function(e){var t=e.scene.scene.key;n.game.events.emit(Phaser.Scenes.Events.SHUTDOWN,t)},n.showNotifyWithMessage=function(e,t,i,r){void 0===t&&(t=1200),r&&r.name!==m.o4.NOTIFY_SCREEN||(i&&(n.screen.events.off(GameCore.Screens.Events.CLOSE),n.screen.events.once(GameCore.Screens.Events.CLOSE,i)),n.screen.open(m.o4.NOTIFY_SCREEN,{message:e,duration:t,loading:!1}))},n}(0,s.Z)(t,e);var n=t.prototype;return n.init=function(){this.listenScenesEvents(),this.game.globalScene=this},n.setup=function(){this.scaleGame(),this.addMask(),this.addNotifyScreen(),this.addProductReceiveScreen(),this.addFPS(),this.addMemory(),this.setUpMaskBackground()},n.setUpMaskBackground=function(){this.world.isLandscape()&&q.Z.updateAppBg(J.Z.BACKGROUND_LANDSCAPE.FILE)},n.addNotifyScreen=function(){var e=this.screen.add(m.o4.NOTIFY_SCREEN,D);Phaser.Display.Align.In.Center(e,this.gameZone)},n.addProductReceiveScreen=function(){var e=this.screen.add(m.o4.PRODUCT_RECEIVE_SCREEN,X);Phaser.Display.Align.In.Center(e,this.gameZone)},n.addMask=function(){this.mask=this.make.image({key:ee,frame:te.BLANK});var e=this.gameZone,t=e.width,n=e.height;this.mask.setAlpha(0),this.mask.setOrigin(0,0),this.mask.setTint(0),this.mask.setWorldSize(t,n)},n.addFPS=function(){GameCore.Configs.Statistics.ShowFPSInGame&&(this.fpsMeter=new P(this),Phaser.Display.Align.In.TopLeft(this.fpsMeter,this.gameZone,-20,-10))},n.addMemory=function(){GameCore.Configs.Statistics.ShowMemoryInGame&&(this.memoryMeter=new R(this),Phaser.Display.Align.In.TopLeft(this.memoryMeter,this.gameZone,-45,-3))},n.updateSceneState=function(){this.setGlobalSceneOnTop()},n.setGlobalSceneOnTop=function(){this.scene.bringToTop(this)},n.listenScenesEvents=function(){var e=this;this.scene.manager.getScenes(!1).forEach((function(t){t.events.on(Phaser.Scenes.Events.CREATE,e.emitGameEventStartScene),t.events.on(Phaser.Scenes.Events.SLEEP,e.emitGameEventSleepScene),t.events.on(Phaser.Scenes.Events.WAKE,e.emitGameEventWakeScene),t.events.on(Phaser.Scenes.Events.PAUSE,e.emitGameEventPauseScene),t.events.on(Phaser.Scenes.Events.RESUME,e.emitGameEventResumeScene),t.events.on(Phaser.Scenes.Events.SHUTDOWN,e.emitGameEventShutdownScene)})),this.events.off(v.K.SWITCH,this.switchScene),this.events.on(v.K.SWITCH,this.switchScene),this.world.isLandscape()&&(this.events.off(Phaser.Scenes.Events.RENDER,q.Z.updateBgMask),this.events.on(Phaser.Scenes.Events.RENDER,q.Z.updateBgMask))},n.getActiveScene=function(){return this.scene.manager.getScenes(!0)[0]},n.getCurrentScene=function(){return this.currentScene},n.updateActiveSceneKey=function(e){e!==v.C.GLOBAL_SCENE&&this.storage.dispatch((0,g.I)(e))},n.logEventOpen=function(){},n.logPageviewOnOpen=function(){},n.consumePurchasesReward=function(){var e=(0,i.Z)(o().mark((function e(){var t,n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.payment.getPurchasesAsync();case 2:return t=e.sent,e.next=5,this.consumePurchases(t);case 5:return n=e.sent,e.abrupt("return",n);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.consumePurchases=function(){var e=(0,i.Z)(o().mark((function e(t){var n,r=this;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={},e.next=3,h().all(p()(t).call(t,function(){var e=(0,i.Z)(o().mark((function e(t){var i,s,a,c,l,u,h,d,p,f,v,m,g;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=L.Z.PRODUCTS[t.productID]){e.next=3;break}return e.abrupt("return");case 3:if("RemoveAds"!==i.type){e.next=15;break}return e.next=6,r.payment.consumePurchaseAsync(t);case 6:if(e.sent){e.next=9;break}return e.abrupt("return");case 9:s=i.removeAdDays,a=(new Date).valueOf()/1e3,c=Number(t.purchaseTime)+24*s*3600,a<=c&&r.ads.setDisabledInterstitialAds(Math.ceil((c-a)/86400)),n.RemoveAd||(n.RemoveAd=0),n.RemoveAd+=s;case 15:if("Normal"!==i.type){e.next=22;break}return e.next=18,r.payment.consumePurchaseAsync(t);case 18:if(e.sent){e.next=21;break}return e.abrupt("return");case 21:for(l in i.itemsDataByKey)u=l,h=i.itemsDataByKey,n[u]=(n[u]||0)+(h[u]||0);case 22:if("Bundle"!==i.type){e.next=31;break}return e.next=25,r.payment.consumePurchaseAsync(t);case 25:if(e.sent){e.next=28;break}return e.abrupt("return");case 28:for(d in i.itemsDataByKey)p=d,f=i.itemsDataByKey,n[p]=(n[p]||0)+(f[p]||0);0!==(v=i.removeAdDays||0)&&(m=(new Date).valueOf()/1e3,g=Number(t.purchaseTime)+24*v*3600,m<=g&&r.ads.setDisabledInterstitialAds(Math.ceil((g-m)/86400)),n.RemoveAd||(n.RemoveAd=0),n.RemoveAd+=v);case 31:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 3:return e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.openProductReceiveScreen=function(){var e=(0,i.Z)(o().mark((function e(t,n,i,r,s){var a=this;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new(h())((function(e){a.screen.open(m.o4.PRODUCT_RECEIVE_SCREEN,{treasure:t,source:n,onClose:function(){i&&i(),e()},startPosition:r,endPosition:s})})));case 1:case"end":return e.stop()}}),e)})));return function(t,n,i,r,s){return e.apply(this,arguments)}}(),n.runEntranceAnimation=function(){return this.world.isLandscape()&&q.Z.updateMaskBackground(1),h().resolve()},n.runExitAnimation=function(){return h().resolve()},(0,r.Z)(t,[{key:"currentScene",get:function(){var e=this.storage.getState(),t=y(e);return(t?this.scene.manager.getScene(t):this.getActiveScene()).scene}}]),t}(Q.Z),ie=ne},448:function(e,t,n){"use strict";var i=n(14),r=n(205),s=n(46),a=n(449),o=function(e){function t(t,n){var i;return(i=e.call(this,t)||this).payload=void 0,i.icon=void 0,i.text=void 0,i.glow=void 0,i.rotateGlowTween=void 0,i.starTwinkleUp=void 0,i.payload=n,i.createUI(),i.setSize(i.icon.width,i.icon.height),i.alignUI(),i.createAnimations(),i}(0,i.Z)(t,e);var n=t.prototype;return n.createUI=function(){this.createGlow(),this.createIcon(),this.createText(),this.createStarTwinkleUp()},n.alignUI=function(){Phaser.Display.Align.In.Center(this.icon,this),Phaser.Display.Align.In.BottomRight(this.text,this,10,5)},n.createGlow=function(){var e=s.Z.EFFECTS,t=e.KEY,n=e.FRAME.FX_GLOW,i=n.FILE,r=n.WIDTH,a=n.HEIGHT;this.glow=this.scene.add.image(0,0,t,i),this.glow.setWorldSize(.63*r,.63*a),this.glow.kill(),this.add(this.glow)},n.createStarTwinkleUp=function(){this.starTwinkleUp=new a.Z(this.scene),this.starTwinkleUp.setScale(1.5),this.add(this.starTwinkleUp)},n.createIcon=function(){this.icon=this.scene.add.image(0,0,this.payload.key,this.payload.frame),this.icon.setWorldSize(this.payload.width,this.payload.height),this.add(this.icon)},n.createText=function(){this.text=new r.Z(this.scene,{text:this.payload.text,fontSize:this.scene.fontSize(20),strokeColor:3747354,strokeThickness:2.4,strokeOffset:{y:.5}}).setLeftAlign(),this.add(this.text)},n.updateItem=function(e){this.text.setText("x"+e.toString())},n.createAnimations=function(){this.rotateGlowTween=this.scene.tweens.add({targets:this.glow,angle:360,duration:6e3,repeat:-1}),this.rotateGlowTween.stop()},n.runAnimation=function(){this.glow.revive(),this.rotateGlowTween.play(),this.starTwinkleUp.run(1,this.icon.x,this.icon.y,this.icon.width,this.icon.height)},n.stopAnimation=function(){this.glow.kill(),this.rotateGlowTween.stop(),this.starTwinkleUp.stop()},n.runShowUpAnimation=function(e,t){var n=this;void 0===e&&(e=1200),void 0===t&&(t=0),this.setAlpha(0),this.scene.tweens.add({targets:this,delay:t,alpha:{from:0,start:0,to:1},ease:Phaser.Math.Easing.Sine.Out,duration:e,onStart:function(){n.runAnimation()}})},t}(Phaser.GameObjects.Container);t.Z=o},578:function(e,t,n){"use strict";var i=n(198),r=n(36),s=n(431),a=n(68),o=n(14),c=n(38),l=n.n(c),u=n(47),h=n.n(u),d=n(616),p=0,f=0,v=function(){function e(e){this.game=void 0,this.progressFbTimeEvent=void 0,this.game=e}var t=e.prototype;return t.loadingProgressFbBootScene=function(){var e=this,t=100;f=30;!function n(){t<=0?clearTimeout(e.progressFbTimeEvent):e.progressFbTimeEvent=setTimeout((function(){e.game.facebook.setLoadingProgress(Math.round(f)),f+=30/t,t--,n()}),50)}()},t.finishLoadingProgressFbBootScene=function(){clearTimeout(this.progressFbTimeEvent)},t.loadingProgressFbLoadScene=function(){var e=this;(!f||f<30)&&(f=60),p=f;!function t(){e.progressFbTimeEvent=setTimeout((function(){e.game.facebook.setLoadingProgress(Math.round(f)),f+=.1,t()}),50)}()},t.onProgress=function(e){var t=100-f,n=Math.round(e*t+f);n>p&&clearTimeout(this.progressFbTimeEvent),this.game.facebook.setLoadingProgress(n)},e}(),m=v,g=function(){function e(e){this.game=void 0,this.game=e}var t=e.prototype;return t.addKillRevive=function(){var e=this;[Phaser.GameObjects.Container,Phaser.GameObjects.Image,Phaser.GameObjects.Sprite,Phaser.GameObjects.Graphics,Phaser.GameObjects.Text,Phaser.GameObjects.BitmapText,Phaser.GameObjects.Particles.ParticleEmitter,Phaser.GameObjects.Particles.ParticleEmitterManager].forEach((function(t){t.prototype.kill=e.kill,t.prototype.revive=e.revive}))},t.addKillReviveGroup=function(){Phaser.GameObjects.Group.prototype.killGroup=this.killGroup,Phaser.GameObjects.Group.prototype.reviveGroup=this.reviveGroup},t.addSetWorldSize=function(){var e=this;[Phaser.GameObjects.Image,Phaser.GameObjects.Sprite].forEach((function(t){t.prototype.setWorldSize=e.setWorldSize}))},t.addSetWorldSizeForContainer=function(){var e=this;[Phaser.GameObjects.Container].forEach((function(t){t.prototype.setWorldSize=e.setWorldSizeForContainer}))},t.addGetWorldPosition=function(){var e=this;[Phaser.GameObjects.Container,Phaser.GameObjects.Image,Phaser.GameObjects.Sprite,Phaser.GameObjects.Graphics,Phaser.GameObjects.Text,Phaser.GameObjects.BitmapText].forEach((function(t){t.prototype.getWorldPosition=e.getWorldPosition}))},t.addDrawDebugBox=function(){var e=this;[Phaser.GameObjects.Container,Phaser.GameObjects.Image,Phaser.GameObjects.Sprite,Phaser.GameObjects.Graphics,Phaser.GameObjects.Text,Phaser.GameObjects.BitmapText,Phaser.GameObjects.Zone].forEach((function(t){t.prototype.drawDebugBox=e.drawDebugBox}))},t.addHighQuality=function(){var e=this;[Phaser.GameObjects.Text].forEach((function(t){t.prototype.setHighQuality=e.setHighQuality}))},t.addSetLineHeightForBitmapText=function(){Phaser.GameObjects.BitmapText.prototype.setLineHeight=function(e){this.lineHeight=e,this.updateDisplayOrigin()}},t.kill=function(){this.setActive(!1),this.setVisible(!1)},t.revive=function(){this.setActive(!0),this.setVisible(!0)},t.killGroup=function(){this.getChildren().forEach((function(e){e.setActive(!1),e.setVisible(!1)}))},t.reviveGroup=function(){this.getChildren().forEach((function(e){e.setActive(!0),e.setVisible(!0)}))},t.setWorldSize=function(e,t){this.setSize(e,t),this.setDisplaySize(e,t)},t.setWorldSizeForContainer=function(e,t,n){void 0===n&&(n=2),this.setSize(e*n,t*n),this.setDisplaySize(e,t)},t.getWorldPosition=function(){var e=this.getWorldTransformMatrix().decomposeMatrix();return{x:e.translateX,y:e.translateY}},t.drawDebugBox=function(e,t){var n=this.x,i=this.y,r=this.width,s=this.height,a=this.depth,o=this.originX,c=this.originY,l=this.scene.add.rectangle(n,i,r,s,e,t);l.setName("Debug Box"),l.setDepth(a);var u=GameCore.Utils.Valid.isNumber;return u(o)&&u(c)&&l.setOrigin(o,c),l},t.setHighQuality=function(){return this.renderer instanceof Phaser.Renderer.WebGL.WebGLRenderer?this.setResolution(2*this.scene.game.world.getZoomRatio()):this},e}(),y=g,E=n(39),S=n.n(E),w=n(71),I=n.n(w),A=n(72),T=n.n(A),C=n(91),b=n.n(C),P=n(69),x=n.n(P),R=n(129),O=n.n(R),_=n(73),k=n.n(_),D=[{url:"./assets/images/others/mock1.jpg",title:"Buy lottery tickets on behalf",description:"\ud83d\udca5\ud83d\udca5\ud83d\udca5 Place an order for lottery tickets from 3 regions!!! \u2705 Fast - Convenient - Safe \u2705 Diverse products \u2705 Payment...",buttonName:"Discover more"},{url:"./assets/images/others/mock2.jpg",title:"SYSTEM-WIDE SALE UP TO 50%",description:'\ud83d\udd25 \ud835\uddec\ud835\uddd8\ud835\uddd4\ud835\udde5 \ud835\uddd8\ud835\udde1\ud835\uddd7 \ud835\udde6\ud835\uddd4\ud835\udddf\ud835\uddd8 | \ud835\udde8\ud835\udde3 \ud835\udde7\ud835\udde2 \ud835\udff1\ud835\udfec% "BIG PARTY" AUTHENTIC SPORTSWEAR SHOCKINGLY REDUCED PRICES! \ud83c\udf81 From...',buttonName:"Discover more"},{url:"./assets/images/others/mock3.jpg",title:"Register now",description:"Play safe, play fun, play 9club!",buttonName:"Register"}],L=function(){function e(){}return e.loadBannerAdAsync=function(){var e=(0,a.Z)(h().mark((function e(){var t,n,i,r,s,a,o,c,u,d;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.currentIdx=(this.currentIdx+1)%D.length,this.hideBannerAdAsync(),e.next=4,new(l())((function(e){setTimeout((function(){e()}),2e3)}));case 4:if(!document.getElementById("mock-banner-ads")){e.next=16;break}return t=D[this.currentIdx],n=t.url,i=t.buttonName,r=t.title,s=t.description,(a=document.getElementById("banner-content-text1"))&&(a.innerHTML=r),(o=document.getElementById("banner-content-text2"))&&(o.innerHTML=s),(c=document.getElementById("mock-banner-ads-avatar"))&&(c.style.background="url("+n+") center center/contain no-repeat"),(u=document.getElementById("banner-content-button"))&&(u.innerHTML=i),e.abrupt("return");case 16:d=GameCore.Utils.Device.isDesktop(),50,d?this.createDesktopBannerAd(50):this.createMobileBannerAd(50);case 19:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),e.createDesktopBannerAd=function(e){var t=this,n=D[this.currentIdx],i=n.url,r=n.buttonName,s=n.title,a=n.description,o=document.createElement("div");o.id="mock-banner-ads",o.style.width="100%",o.style.height=e+"px",o.style.bottom="var(--sab)",o.style.display="flex",o.style.position="absolute",o.style.opacity=this.currentOpacity;var c=document.createElement("div");c.id="mock-banner-ads-display-area",c.style.width="100%",c.style.height="100%",c.style.background="#323436 center center/auto no-repeat",c.style.borderRadius="10px",c.style.marginLeft="4px",c.style.marginRight="4px",c.style.display="block",c.style.alignContent="center";var l=document.createElement("div");l.id="mock-banner-ads-content",l.style.boxSizing="border-box",l.style.flexDirection="row",l.style.display="flex",l.style.position="relative",l.style.alignItems="stretch",l.style.paddingLeft="4px",l.style.paddingRight="4px",l.style.justifyContent="space-between";var u=document.createElement("div");u.id="mock-banner-ads-avatar",u.style.marginLeft="10px",u.style.width=e+"px",u.style.minWidth=e+"px",u.style.height=e+"px",u.style.display="flex",u.style.flexDirection="column",u.style.position="relative",u.style.background="url("+i+") center center/contain no-repeat",u.style.borderRadius="50%";var h=document.createElement("div");h.id="mock-banner-ads-right-content",h.style.width="100%",h.style.paddingLeft="10px",h.style.display="flex",h.style.flexDirection="row",h.style.position="relative",h.style.color="#E4E6EB",h.style.wordWrap="break-word",h.style.textAlign="left",h.style.alignContent="center",h.style.alignItems="center",h.style.fontSize="12px",h.style.fontFamily="Helvetica, Arial, sans-serif, Roboto, Helvetica, Arial, sans-serif",u.style.boxSizing="border-box";var d=document.createElement("div");d.style.flexDirection="column",d.style.display="flex",d.style.justifyContent="center",d.style.flexShrink="1",d.style.flexGrow="1",d.style.flexBasis="0",d.style.boxSizing="border-box",d.style.minWidth="0",d.innerHTML="\n            <div id='banner-content-text1' style=\"font-weight:600;line-height: 1.3333;font-size: .9375rem;text-overflow: ellipsis;-webkit-line-clamp: 1;overflow: hidden;display: -webkit-box;-webkit-box-orient: vertical;\">"+s+"</div>\n            <div id='banner-content-text2' style=\"font-weight:400;line-height: 1.2308;font-size: .8125rem;text-overflow: ellipsis;-webkit-line-clamp: 2;overflow: hidden;display: -webkit-box;-webkit-box-orient: vertical;\">"+a+"</div>";var p=document.createElement("button");p.id="banner-content-button",p.type="button",p.style.width="120px",p.style.height=e-20+"px",p.style.fontWeight="600",p.style.backgroundColor="#3963fc",p.style.border="none",p.style.color="white",p.style.borderRadius="5px",p.style.textAlign="center",p.style.display="inline-block",p.style.cursor="pointer",p.style.marginRight="10px",p.style.marginLeft="10px",p.style.flexShrink="1",p.style.boxSizing="border-box",p.style.paddingRight="2px",p.style.paddingLeft="2px",p.innerHTML=r,p.onclick=function(){"0.2"===t.currentOpacity?o.style.opacity="1":o.style.opacity="0.2",t.currentOpacity=o.style.opacity};var f=document.createElement("button");f.type="button",f.style.width=e-20+"px",f.style.height=e-20+"px",f.style.fontWeight="1000",f.style.backgroundColor="#5a5c5c",f.style.border="none",f.style.color="white",f.style.borderRadius="50%",f.style.textAlign="center",f.style.display="inline-block",f.style.cursor="pointer",f.style.marginRight="10px",f.style.marginLeft="10px",f.style.flexShrink="0",f.style.boxSizing="border-box",f.style.paddingRight="2px",f.style.paddingLeft="2px",f.innerHTML="...",document.body.appendChild(o),o.appendChild(c),c.appendChild(l),l.appendChild(u),l.appendChild(h),h.appendChild(d),h.appendChild(p),h.appendChild(f)},e.createMobileBannerAd=function(e){var t=this,n=D[this.currentIdx],i=n.url,r=n.buttonName,s=n.title,a=n.description,o=document.createElement("div");o.id="mock-banner-ads",o.style.width="100%",o.style.height=e+"px",o.style.bottom="var(--sab)",o.style.display="block",o.style.position="absolute",o.style.opacity=this.currentOpacity;var c=document.createElement("div");c.id="mock-banner-ads-display-area",c.style.background="#ffffff center center/auto no-repeat",c.style.display="block",c.style.alignContent="center";var l=document.createElement("div");l.id="mock-banner-ads-content",l.style.boxSizing="border-box",l.style.flexDirection="row",l.style.display="flex",l.style.position="relative",l.style.alignItems="stretch",l.style.justifyContent="space-between";var u=document.createElement("div");u.id="mock-banner-ads-avatar",u.style.width=e+"px",u.style.minWidth=e+"px",u.style.height=e+"px",u.style.display="flex",u.style.flexDirection="column",u.style.position="relative",u.style.background="url("+i+") center center/contain no-repeat";var h=document.createElement("div");h.id="mock-banner-ads-right-content",h.style.width="100%",h.style.paddingLeft="10px",h.style.display="flex",h.style.flexDirection="row",h.style.position="relative",h.style.color="#000",h.style.wordWrap="break-word",h.style.textAlign="left",h.style.alignContent="center",h.style.alignItems="center",h.style.fontSize="12px",h.style.fontFamily="Helvetica, Arial, sans-serif, Roboto, Helvetica, Arial, sans-serif",u.style.boxSizing="border-box";var d=document.createElement("div");d.style.flexDirection="column",d.style.display="flex",d.style.justifyContent="center",d.style.flexShrink="1",d.style.flexGrow="1",d.style.flexBasis="0",d.style.boxSizing="border-box",d.style.minWidth="0",d.innerHTML="\n            <div id='banner-content-text1' style=\"font-weight:600;line-height: 1.3333;font-size: .9375rem;text-overflow: ellipsis;-webkit-line-clamp: 1;overflow: hidden;display: -webkit-box;-webkit-box-orient: vertical;\">"+s+"</div>\n            <div id='banner-content-text2' style=\"font-weight:400;line-height: 1.2308;font-size: .8125rem;text-overflow: ellipsis;-webkit-line-clamp: 1;overflow: hidden;display: -webkit-box;-webkit-box-orient: vertical;\">"+a+"</div>";var p=document.createElement("button");p.id="banner-content-button",p.type="button",p.style.height="100%",p.style.fontWeight="600",p.style.backgroundColor="#3963fc",p.style.border="none",p.style.color="white",p.style.textAlign="center",p.style.display="inline-block",p.style.cursor="pointer",p.style.marginLeft="10px",p.style.flexShrink="1",p.style.boxSizing="border-box",p.style.paddingRight="7px",p.style.paddingLeft="7px",p.innerHTML=r,p.onclick=function(){"0.2"===t.currentOpacity?o.style.opacity="1":o.style.opacity="0.2",t.currentOpacity=o.style.opacity},document.body.appendChild(o),o.appendChild(c),c.appendChild(l),l.appendChild(u),l.appendChild(h),h.appendChild(d),h.appendChild(p)},e.hideBannerAdAsync=function(){var e=(0,a.Z)(h().mark((function e(){var t;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=document.getElementById("mock-banner-ads")){e.next=3;break}return e.abrupt("return");case 3:t.remove();case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),e}();L.currentIdx=-1,L.currentOpacity="1";var B={LOADED:"loaded",DISPLAYED:"displayed"},N=function(e){return e.IDLE="idle",e.LOADING="loading",e.FILLED="filled",e.SHOWING="showing",e}(N||{}),H=N,M=function(e){return e.REWARDED="rewarded",e.PRE_ROLL="pre-roll",e.INTERSTITIAL="interstitial",e.BANNER="banner",e}(M||{}),G=M,W=n(200),U=function(e){function t(t,n){var i;return(i=e.call(this,n)||this).code=void 0,i.code=t,i.message=n,i}return(0,o.Z)(t,e),t}((0,W.Z)(Error)),F=function(e){this.type=void 0,this.status=void 0,this.type=e,this.status=H.IDLE},Z=n(101);function Y(e,t){var n="undefined"!==typeof T()&&b()(e)||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){var n;if(!e)return;if("string"===typeof e)return V(e,t);var i=S()(n=Object.prototype.toString.call(e)).call(n,8,-1);"Object"===i&&e.constructor&&(i=e.constructor.name);if("Map"===i||"Set"===i)return I()(e);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return V(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var i=0;return function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function V(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}GameCore.Ads={Types:G,Status:H,Events:B,AdError:U,AdInstance:F};var z=function(e){function t(){for(var t,n,i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return(n=e.call.apply(e,x()(t=[this]).call(t,r))||this).events=void 0,n.enabled=void 0,n.config=void 0,n.lastInterAdShownTime=void 0,n.lastInterAdLoadedTime=void 0,n.lastRewardAdShownTime=void 0,n.interstitial=void 0,n.rewardedVideo=void 0,n.preRoll=void 0,n.fallbackInterstitial=void 0,n.fallbackRewardedVideo=void 0,n.fallbackPreRoll=void 0,n.safeAreaBottom=void 0,n.showingBannerAd=void 0,n.reloadBannerAdIntervals=void 0,n.bannerAdConfigs=void 0,n.isHaveBannerAdOptions=void 0,n.isFallbackReady=void 0,n.isFallbackInitialized=void 0,n.isBannerAdsShown=void 0,n.isInterstitialRemoved=!1,n.daysRemoveAdsLeft=0,n.showInterstitialAdTimes=0,n}(0,o.Z)(t,e);var i=t.prototype;return i.init=function(){this.events=new Phaser.Events.EventEmitter,this.safeAreaBottom=0,this.lastInterAdShownTime=0,this.lastInterAdLoadedTime=0,this.lastRewardAdShownTime=0,this.showingBannerAd={},this.reloadBannerAdIntervals={},this.bannerAdConfigs=[],this.isHaveBannerAdOptions=!0,this.isFallbackReady=!1,this.isFallbackInitialized=!1,this.isBannerAdsShown=!1},i.calculateSafeAreaBottom=function(){try{if(!this.config.calculateSafeAreaBottom)return;this.safeAreaBottom=parseInt(getComputedStyle(document.documentElement).getPropertyValue("--sab")),isNaN(this.safeAreaBottom)&&(this.safeAreaBottom=0)}catch(e){this.safeAreaBottom=0}},i.configureAsync=function(){var e=(0,a.Z)(h().mark((function e(){var t,n,i,r,s,a,o,c;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=GameCore.Configs.Ads,n=t.Enabled,i=t.CalculateSafeAreaBottom,r=t.EnableRewardVideoResetInterstitial,s=t.InterstitialAdOptions,a=t.RewardAdOptions,o=t.BannerAdOptions,this.enabled=n,this.config={enabled:n,calculateSafeAreaBottom:i,enableRewardVideoResetInterstitial:r,interstitialAdOptions:s,rewardAdOptions:a,bannerAdOptions:o},this.enabled){e.next=5;break}return e.abrupt("return");case 5:return e.next=7,this.getAdServiceInstance();case 7:(c=e.sent).setGame(this.game),this.setAdInstance(c),this.initFallbackAdsService(),this.setBannerAdConfigStatus(),this.calculateSafeAreaBottom();case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),i.getAdServiceInstance=function(){var e=(0,a.Z)(h().mark((function e(){var t,i,r,s,a;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=GameCore.Configs.Ads,i=t.AdService,!t.Mockup.Enable){e.next=6;break}return e.next=4,n.e(131).then(n.bind(n,634));case 4:return r=e.sent.default,e.abrupt("return",r);case 6:if("google"!==i){e.next=18;break}return e.prev=7,e.next=10,this.initGoogleAdInstanceAsync();case 10:if(null===(s=e.sent)){e.next=13;break}return e.abrupt("return",s);case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(7);case 18:return"msgames"===i&&window.game.analytics.event(Z._.AD_INIT,{ad_service:"msgames",state:"loading"}),e.next=21,n.e(442).then(n.bind(n,624));case 21:return a=e.sent.default,e.abrupt("return",a);case 23:case"end":return e.stop()}}),e,this,[[7,15]])})));return function(){return e.apply(this,arguments)}}(),i.setBannerAdConfigStatus=function(){for(var e,t=this.config.bannerAdOptions,n=GameCore.Utils.Device.isDesktop(),i=Y(t);!(e=i()).done;){var r=e.value,s=r.platform,a="ALL"==s||"DESKTOP"==s&&n||"MOBILE"==s&&!n;this.bannerAdConfigs.push({config:r,canShow:a}),a&&(this.isHaveBannerAdOptions=!0)}},i.setAdInstance=function(e){var t=this.config,n=t.rewardAdOptions,i=t.interstitialAdOptions;this.interstitial=new e(G.INTERSTITIAL,i.pID),this.rewardedVideo=new e(G.REWARDED,n.pID),this.preRoll=new e(G.PRE_ROLL,i.pID)},i.setFallbackAdInstance=function(e){var t=this.config,n=t.rewardAdOptions,i=t.interstitialAdOptions;this.fallbackInterstitial=new e(G.INTERSTITIAL,i.pID),this.fallbackRewardedVideo=new e(G.REWARDED,n.pID),this.fallbackPreRoll=new e(G.PRE_ROLL,i.pID)},i.preloadInterstitialAdAsync=function(){var e=(0,a.Z)(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.preloadAdAsync(G.INTERSTITIAL);case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),i.showInterstitialAdAsync=function(){var e=(0,a.Z)(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.canbeShowInterstitialAdByTime()){e.next=2;break}throw new U("INTERSTITIAL_AD_CAN_NOT_SHOW","Can't show interstitial ad");case 2:return e.next=4,this.showAdAsync(G.INTERSTITIAL);case 4:this.lastInterAdShownTime=window.performance.now()/1e3;case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),i.preloadPreRollAdAsync=function(){var e=(0,a.Z)(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.preloadAdAsync(G.PRE_ROLL);case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),i.showPreRollAdAsync=function(){var e=(0,a.Z)(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.showAdAsync(G.PRE_ROLL);case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),i.preloadRewardedVideoAsync=function(){var e=(0,a.Z)(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.preloadAdAsync(G.REWARDED);case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),i.showRewardedVideoAsync=function(){var e=(0,a.Z)(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.canbeShowRewardAd()){e.next=2;break}throw new U("REWARDED_VIDEO_CAN_NOT_SHOW","Can't show rewarded video");case 2:return e.next=4,this.showAdAsync(G.REWARDED);case 4:this.lastRewardAdShownTime=window.performance.now()/1e3;case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),i.getRemainingRewardTime=function(){var e=window.performance.now()/1e3,t=this.config.rewardAdOptions.secondsBetweenAds,n=e-this.lastRewardAdShownTime;return n<t?t-n:0},i.preloadAdAsync=function(){var e=(0,a.Z)(h().mark((function e(t){var n,i,r,s,a;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.enabled){e.next=2;break}throw new U("ADS_NOT_ENABLED","Ads is't enabled");case 2:return n=this.preloadFallbackAdService(t),e.next=5,this.preloadMainAdService(t);case 5:return i=e.sent,e.next=8,l().all([n,i]);case 8:if(r=e.sent,s=r[0],!0!==(a=r[1])){e.next=13;break}return e.abrupt("return");case 13:if(this.isFallbackReady){e.next=15;break}throw a;case 15:if(!0!==s){e.next=17;break}return e.abrupt("return");case 17:throw s;case 18:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),i.preloadMainAdService=function(e){var t=this;return new(l())((function(n){var i=!1;t.preloadAdInstanceAsync(e,!1).then((function(){i=!0})).catch((function(e){t.isFallbackReady||t.initFallbackAdsService().catch((function(){t.isFallbackReady=!1})),i=e})).finally((function(){n(i)}))}))},i.preloadFallbackAdService=function(e){var t=this;return new(l())((function(n){var i=!1;t.isFallbackReady||n(new U("FALLBACK_NOT_READY","Fallback ads not ready")),t.preloadAdInstanceAsync(e,!0).then((function(){i=!0})).catch((function(e){i=e})).finally((function(){n(i)}))}))},i.preloadAdInstanceAsync=function(){var e=(0,a.Z)(h().mark((function e(t,n){var i,r=this;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===n&&(n=!1),null!==(i=this.getAdInstanceByType(t,n))){e.next=4;break}throw new U("AD_INSTANCE_NOT_INITIATED","The instance ads not yet initiated");case 4:if(i.getStatus()!==H.LOADING){e.next=8;break}return e.next=7,new(l())((function(e){r.events.once(B.LOADED,e)}));case 7:return e.abrupt("return");case 8:return t!==G.INTERSTITIAL&&t!==G.PRE_ROLL||(this.lastInterAdLoadedTime=window.performance.now()/1e3),e.next=11,i.loadAsync();case 11:this.events.emit(B.LOADED,t);case 12:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}(),i.showAdAsync=function(){var e=(0,a.Z)(h().mark((function e(t){var n,i;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.enabled){e.next=2;break}throw new U("ADS_NOT_ENABLED","Ads is't enabled");case 2:return e.next=4,this.showMainAdService(t);case 4:if(!0!==(n=e.sent)){e.next=7;break}return e.abrupt("return");case 7:if(!this.isUserCancelledAdError(n)&&this.isAdFallbackReadyToShow(t)){e.next=9;break}throw n;case 9:return e.next=11,this.showFallbackAdService(t);case 11:if(!0!==(i=e.sent)){e.next=14;break}return e.abrupt("return");case 14:throw i;case 15:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),i.showMainAdService=function(e){var t=this;return new(l())((function(n){var i=!1;t.showAdInstanceAsync(e,!1).then((function(){i=!0})).catch((function(e){i=e,t.isUserCancelledAdError(e)||t.isFallbackReady||t.initFallbackAdsService().catch((function(){t.isFallbackReady=!1}))})).finally((function(){n(i)}))}))},i.showFallbackAdService=function(e){var t=this;return new(l())((function(n){var i=!1;t.isFallbackReady||n(new U("FALLBACK_NOT_READY","Fallback ads not ready")),t.showAdInstanceAsync(e,!0).then((function(){i=!0})).catch((function(e){i=e})).finally((function(){n(i)}))}))},i.showAdInstanceAsync=function(){var e=(0,a.Z)(h().mark((function e(t,n){var i;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===n&&(n=!1),null!==(i=this.getAdInstanceByType(t,n))){e.next=4;break}throw new U("AD_INSTANCE_NOT_INITIATED","The instance ads not yet initiated");case 4:return t!==G.INTERSTITIAL&&t!==G.PRE_ROLL||(this.lastInterAdShownTime=window.performance.now()/1e3),t===G.REWARDED&&(this.lastRewardAdShownTime=window.performance.now()/1e3,this.config.enableRewardVideoResetInterstitial&&(this.lastInterAdShownTime=this.lastRewardAdShownTime)),e.next=8,i.showAsync();case 8:t===G.INTERSTITIAL&&(this.showInterstitialAdTimes+=1),this.events.emit(B.DISPLAYED,t);case 10:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}(),i.getAdStatus=function(e){var t=this.getAdInstanceByType(e);return t?t.getStatus():null},i.getAdInstanceByType=function(e,t){if(void 0===t&&(t=!1),t)switch(e){case G.INTERSTITIAL:return this.fallbackInterstitial;case G.REWARDED:return this.fallbackRewardedVideo;case G.PRE_ROLL:return this.fallbackPreRoll;default:return null}switch(e){case G.INTERSTITIAL:return this.interstitial;case G.REWARDED:return this.rewardedVideo;case G.PRE_ROLL:return this.preRoll;default:return null}},i.canbeShowInterstitialAd=function(){var e=this.canbeLoadInterstitialAdByTime();return e&&(e=this.canbeShowInterstitialAdByTime()),e},i.canbeLoadInterstitialAdByTime=function(){var e=window.performance.now()/1e3,t=this.config.interstitialAdOptions,n=t.secondsFirstTime,i=t.secondsBetweenAds,r=Math.floor(e-this.lastInterAdLoadedTime);return this.lastInterAdLoadedTime>0?r>=i:r>=n},i.canbeShowInterstitialAdByTime=function(){var e=window.performance.now()/1e3,t=this.config.interstitialAdOptions,n=t.secondsFirstTime,i=t.secondsBetweenAds,r=Math.floor(e-this.lastInterAdShownTime);return this.lastInterAdShownTime>0?r>=i:r>=n},i.canbeShowRewardAd=function(){var e=window.performance.now()/1e3,t=this.config.rewardAdOptions,n=t.secondsFirstTime,i=t.secondsBetweenAds,r=Math.floor(e-this.lastRewardAdShownTime);return this.lastRewardAdShownTime>0?r>=i:r>=n},i.getEnabledBannerAds=function(){if(!this.isHaveBannerAdOptions)return[];for(var e,t=[],n=Y(this.bannerAdConfigs);!(e=n()).done;){var i=e.value,r=i.config;i.canShow&&t.push(r)}return t},i.disableBannerAds=function(){this.config.bannerAdOptions=[]},i.showBannerAdAsync=function(){var e=(0,a.Z)(h().mark((function e(){var t;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.enabled){e.next=2;break}return e.abrupt("return");case 2:if(!this.isBannerAdsShown){e.next=5;break}return e.next=5,this.hideBannerAdAsync();case 5:if(0!==(t=this.getEnabledBannerAds()).length){e.next=8;break}return e.abrupt("return");case 8:return this.reloadBannerAdIntervals=this.reloadBannerAdIntervals||{},this.loadBannerAdAsync("",t),e.abrupt("return");case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),i.loadBannerAdAsync=function(){var e=(0,a.Z)(h().mark((function e(t,n){var i,r,s=this;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.enabled){e.next=2;break}return e.abrupt("return");case 2:if(i=this.getSceneName(),r=GameCore.Configs.Ads,e.prev=4,"msgames"===r.AdService){e.next=7;break}throw new U("BANNER_ADS_NOT_SUPPORTED","Banner ads not supported");case 7:if(!r.Mockup.Enable){e.next=12;break}return e.next=10,L.loadBannerAdAsync();case 10:e.next=14;break;case 12:return e.next=14,GameSDK.loadBannerAdAsync(t,n);case 14:this.isBannerAdsShown=!0,n.forEach((function(e){var t=e.placementId,n=e.position,a=e.bannerWidth,o=e.bannerHeight;if(t&&""!==t){var c=n+":"+a+"x"+o;s.showingBannerAd[t]=!0,window.game.analytics.showBannerAd(c,i,r.AdService)}})),e.next=23;break;case 18:e.prev=18,e.t0=e.catch(4),this.isBannerAdsShown=!1,n.forEach((function(e){var t=e.position+":"+e.bannerWidth+"x"+e.bannerHeight,n={type:G.BANNER,placement:i,bannerPosition:t,adService:r.AdService};window.game.analytics.showAdFail(n)}));case 23:case"end":return e.stop()}}),e,this,[[4,18]])})));return function(t,n){return e.apply(this,arguments)}}(),i.hideBannerAdAsync=function(){var e=(0,a.Z)(h().mark((function e(){var t;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.enabled){e.next=2;break}return e.abrupt("return");case 2:if(this.isHaveBannerAdOptions){e.next=4;break}return e.abrupt("return");case 4:if(this.isBannerAdsShown=!1,e.prev=5,"msgames"===(t=GameCore.Configs.Ads).AdService){e.next=9;break}throw new U("BANNER_ADS_NOT_SUPPORTED","Banner ads not supported");case 9:if(!t.Mockup.Enable){e.next=14;break}return e.next=12,L.hideBannerAdAsync();case 12:e.next=16;break;case 14:return e.next=16,GameSDK.hideBannerAdAsync();case 16:e.next=21;break;case 18:e.prev=18,e.t0=e.catch(5);case 21:case"end":return e.stop()}}),e,this,[[5,18]])})));return function(){return e.apply(this,arguments)}}(),i.getBannerHeight=function(){if(!this.enabled)return 0;if(!this.isBannerAdsShown)return 0;var e=this.getBottomBannerConfig();if(!e)return 0;var t=e.bannerHeight,n=(void 0===t?0:t)+this.safeAreaBottom+20;if(this.game.world){var i=this.game.world,r=i.getPixelRatio(),s=i.getZoomRatio();return this.game.world.getPhysicPixels(n,r/s)}return n},i.getBottomBannerConfig=function(){var e=this.getEnabledBannerAds();return 0===e.length?null:O()(e).call(e,(function(e){return"bottom"===e.position}))||null},i.getSceneName=function(){try{var e=self.game.globalScene;return this.globalSceneTypeCheck(e)?e.getCurrentScene().scene.getSceneName():"unknown"}catch(t){return"unknown"}},i.globalSceneTypeCheck=function(e){return"getCurrentScene"in e&&"function"===typeof e.getCurrentScene},i.initFallbackAdsService=function(){var e=(0,a.Z)(h().mark((function e(){var t,n;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=GameCore.Configs.Ads,!this.isFallbackInitialized){e.next=3;break}return e.abrupt("return");case 3:return this.isFallbackInitialized=!0,e.next=6,this.getFallbackAdServiceInstance();case 6:n=e.sent,"none"!==t.FallbackService&&null!==n&&(this.isFallbackReady=!0,this.setFallbackAdInstance(n));case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),i.getFallbackAdServiceInstance=function(){var e=(0,a.Z)(h().mark((function e(){var t,i,r;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=GameCore.Configs.Ads.FallbackService,e.next=3,n.e(442).then(n.bind(n,624));case 3:if(i=e.sent.default,"google"!==t){e.next=16;break}return e.prev=5,e.next=8,this.initGoogleAdInstanceAsync();case 8:if(null===(r=e.sent)){e.next=11;break}return e.abrupt("return",r);case 11:e.next=16;break;case 13:e.prev=13,e.t0=e.catch(5);case 16:return e.abrupt("return",i);case 17:case"end":return e.stop()}}),e,this,[[5,13]])})));return function(){return e.apply(this,arguments)}}(),i.initGoogleAdInstanceAsync=function(){var e=(0,a.Z)(h().mark((function e(){var t,i,r,s,a,o,c,l,u;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=GameCore.Configs.Ads.AdServiceConfigs.Google){e.next=3;break}return e.abrupt("return",null);case 3:return i=t.DataAdChannel,r=t.DataAdClient,s=t.DataAdHost,a=t.DataAdBreakTest,o=t.DataAdFrequencyHint,c=t.MaxScriptLoadRetryCount,e.next=6,n.e(112).then(n.bind(n,635));case 6:if("loaded"!==(l=e.sent.default).initStatus){e.next=9;break}return e.abrupt("return",l);case 9:return u={dataAdClient:r,dataAdChannel:i,dataAdHost:s,dataAdBreakTest:a,dataAdFrequencyHint:o,maxScriptLoadRetryCount:c},e.prev=10,l.setGame(this.game),e.next=14,l.initGoogleAdsAsync(u);case 14:return e.abrupt("return",l);case 17:return e.prev=17,e.t0=e.catch(10),e.abrupt("return",null);case 21:case"end":return e.stop()}}),e,this,[[10,17]])})));return function(){return e.apply(this,arguments)}}(),i.isUserCancelledAdError=function(e){if(e instanceof U&&"USER_INPUT"===e.code)return!0;try{var t=JSON.parse(k()(e));return"code"in t&&"USER_INPUT"===t.code}catch(e){return!1}},i.isAdFallbackReadyToShow=function(e){if(!this.isFallbackReady)return!1;var t=this.getAdInstanceByType(e,!0);return!!t&&t.getStatus()===H.FILLED},i.setDisabledInterstitialAds=function(e){this.isInterstitialRemoved=!0,this.daysRemoveAdsLeft=e},i.isDisabledInterstitialAds=function(){return this.isInterstitialRemoved},i.getDaysRemoveAdsLeft=function(){return this.daysRemoveAdsLeft},i.getShowInterstitialAdTimes=function(){return this.showInterstitialAdTimes},t}(Phaser.Plugins.BasePlugin),K=z,j=function(){function e(e,t,n){this.name=void 0,this.color=void 0,this.selfLog=void 0,this.options=void 0,this.name=e,this.color=n||"#FFF",this.options=t,this.selfLog=!0}var t=e.prototype;return t.event=function(e,t,n){this.processEvent(e,t,n),this.selfLog},t.pageview=function(e){var t=this.getPageByKey(e);this.processPageView(t),this.selfLog},t.levelStart=function(e,t,n){this.processLevelStart(e,t,n),this.selfLog},t.levelFail=function(e,t,n){this.processLevelFail(e,t,n),this.selfLog},t.levelRescue=function(e,t,n){this.processLevelRescue(e,t,n),this.selfLog},t.levelComplete=function(e,t,n){this.processLevelComplete(e,t,n),this.selfLog},t.loadPreRollAd=function(e,t){this.processLoadPreRollAd(e,t),this.selfLog},t.showPreRollAd=function(e,t){this.processShowPreRollAd(e,t),this.selfLog},t.loadInterstitialAd=function(e,t){this.processLoadInterstitialAd(e,t),this.selfLog},t.showInterstitialAd=function(e,t){this.processShowInterstitialAd(e,t),this.selfLog},t.loadRewardedVideoAd=function(e,t){this.processLoadRewardedVideoAd(e,t),this.selfLog},t.showRewardedVideoAd=function(e,t){this.processShowRewardedVideoAd(e,t),this.selfLog},t.showBannerAd=function(e,t,n){this.processShowBannerAd(e,t,n),this.selfLog},t.receiveReward=function(e){this.processReceiveReward(e),this.selfLog},t.loadAdFail=function(e){this.processLoadAdFail(e),this.selfLog},t.showAdFail=function(e){this.processShowAdFail(e),this.selfLog},t.getPageByKey=function(e){var t=e.replace(/_/g,"-");return t=t.toLowerCase()},t.viewItemList=function(e,t,n){this.processViewItemList(e,t,n),this.selfLog},t.selectItem=function(e,t,n){this.processSelectItem(e,t,n),this.selfLog},t.viewItem=function(e,t,n){this.processViewItem(e,t,n),this.selfLog},t.beginCheckout=function(e,t,n){this.processBeginCheckout(e,t,n),this.selfLog},t.purchase=function(e,t,n,i){this.processPurchase(e,t,n,i),this.selfLog},t.purchaseCancel=function(e,t){this.processPurchaseCancel(e,t),this.selfLog},t.processLevelStart=function(e,t,n){},t.processLevelFail=function(e,t,n){},t.processLevelRescue=function(e,t,n){},t.processLevelComplete=function(e,t,n){},t.processLoadInterstitialAd=function(e,t){},t.processShowInterstitialAd=function(e,t){},t.processLoadPreRollAd=function(e,t){},t.processShowPreRollAd=function(e,t){},t.processLoadRewardedVideoAd=function(e,t){},t.processShowRewardedVideoAd=function(e,t){},t.processShowBannerAd=function(e,t,n){},t.processReceiveReward=function(e){},t.processLoadAdFail=function(e){},t.processShowAdFail=function(e){},e}(),X=j;GameCore.Analytics={BaseAnalytics:X};var Q=function(e){function t(){for(var t,n,i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return(n=e.call.apply(e,x()(t=[this]).call(t,r))||this).analytics=void 0,n.pageview=function(e){n.isActive()&&n.analytics.forEach((function(t){t.pageview(e)}))},n}(0,o.Z)(t,e);var n=t.prototype;return n.init=function(){this.analytics=[]},n.add=function(e){this.analytics.push(e)},n.event=function(e,t,n){this.isActive()&&this.analytics.forEach((function(i){i.event(e,t,n)}))},n.levelStart=function(e,t,n){this.isActive()&&this.analytics.forEach((function(i){i.levelStart(e,t,n)}))},n.levelRescue=function(e,t,n){this.isActive()&&this.analytics.forEach((function(i){i.levelRescue(e,t,n)}))},n.levelFail=function(e,t,n){this.isActive()&&this.analytics.forEach((function(i){i.levelFail(e,t,n)}))},n.levelComplete=function(e,t,n){this.isActive()&&this.analytics.forEach((function(i){i.levelComplete(e,t,n)}))},n.loadPreRollAd=function(e,t){this.isActive()&&this.analytics.forEach((function(n){n.loadPreRollAd(e,t)}))},n.showPreRollAd=function(e,t){this.isActive()&&this.analytics.forEach((function(n){n.showPreRollAd(e,t)}))},n.loadInterstitialAd=function(e,t){this.isActive()&&this.analytics.forEach((function(n){n.loadInterstitialAd(e,t)}))},n.showInterstitialAd=function(e,t){this.isActive()&&this.analytics.forEach((function(n){n.showInterstitialAd(e,t)}))},n.loadRewardedVideoAd=function(e,t){this.isActive()&&this.analytics.forEach((function(n){n.loadRewardedVideoAd(e,t)}))},n.showRewardedVideoAd=function(e,t){this.isActive()&&this.analytics.forEach((function(n){n.showRewardedVideoAd(e,t)}))},n.showBannerAd=function(e,t,n){this.isActive()&&this.analytics.forEach((function(i){i.showBannerAd(e,t,n)}))},n.receiveReward=function(e){this.isActive()&&this.analytics.forEach((function(t){t.receiveReward(e)}))},n.loadAdFail=function(e){this.isActive()&&this.analytics.forEach((function(t){t.loadAdFail(e)}))},n.showAdFail=function(e){this.isActive()&&this.analytics.forEach((function(t){t.showAdFail(e)}))},n.isActive=function(){return this.analytics.length>=1},n.viewItemList=function(e,t,n){this.isActive()&&this.analytics.forEach((function(i){i.viewItemList(e,t,n)}))},n.selectItem=function(e,t,n){this.isActive()&&this.analytics.forEach((function(i){i.selectItem(e,t,n)}))},n.viewItem=function(e,t,n){this.isActive()&&this.analytics.forEach((function(i){i.viewItem(e,t,n)}))},n.beginCheckout=function(e,t,n){this.isActive()&&this.analytics.forEach((function(i){i.beginCheckout(e,t,n)}))},n.purchase=function(e,t,n,i){this.isActive()&&this.analytics.forEach((function(r){r.purchase(e,t,n,i)}))},n.purchaseCancel=function(e,t){this.isActive()&&this.analytics.forEach((function(n){n.purchaseCancel(e,t)}))},t}(Phaser.Plugins.BasePlugin),q=Q,J=n(206),$=n.n(J),ee=n(103),te=n.n(ee),ne=function(){function e(e){var t=this;this.game=void 0,this.audios=void 0,this.volume=void 0,this.soundKeys=void 0,this.isMusicEnabled=function(){return!!t.game.player.getPlayerSetting("music")},this.isSoundEnabled=function(){return!!t.game.player.getPlayerSetting("sound")},this.game=e,this.audios=new($()),this.soundKeys=new($())}var t=e.prototype;return t.addSoundKeys=function(e){var t=this;te()(e).forEach((function(n){var i=e[n];"string"===typeof i&&t.soundKeys.set(n,i)}))},t.clearSoundKeys=function(){this.soundKeys.clear()},t.play=function(e,t){var n=this,i=(0,r.Z)({volume:this.volume},t||{});i.volume!==this.volume&&(i.volume*=this.volume);var s=this.audios.get(e);if(!s&&this.game.cache.audio.exists(e)){var a=this.game.sound.add(e);this.audios.set(e,a),s=a}if(s)s.play(void 0,i);else{var o=this.soundKeys.get(e);if(o)try{this.game.globalScene.load.audio(e,o),this.game.globalScene.load.on(Phaser.Loader.Events.FILE_KEY_COMPLETE+"audio-"+e,(function(){var t=n.game.sound.add(e);n.audios.set(e,t),t.play(void 0,i)})),this.game.globalScene.load.start()}catch(c){}}},t.pauseAll=function(){this.audios.forEach((function(e){e.pause()}))},t.resumeAll=function(){this.audios.forEach((function(e){e.resume()}))},t.stopAll=function(){this.audios.forEach((function(e){e.stop()}))},t.pause=function(e){var t=this.audios.get(e);t&&t.pause()},t.stop=function(e){var t=this.audios.get(e);t&&t.stop()},t.setVolume=function(e){this.volume=e},e}(),ie=ne,re=function(){function e(e,t){var n=this;this.name=void 0,this.game=void 0,this.isSprite=void 0,this.audio=void 0,this.markers=void 0,this.volume=void 0,this.isMusicEnabled=function(){return!!n.game.player.getPlayerSetting("music")},this.isSoundEnabled=function(){return!!n.game.player.getPlayerSetting("sound")},this.name=t,this.game=e,this.markers={},this.isSprite=!1,this.isSprite||(this.audio=this.game.sound.add(this.name))}var t=e.prototype;return t.play=function(e,t){var n,i,s,a=(0,r.Z)({volume:this.volume},t||{});if(a.volume!==this.volume&&(a.volume*=this.volume),!this.isSprite)return(null==(i=this.audio)?void 0:i.seek)>0?void this.audio.resume():void(null==(s=this.audio)||s.play(e,a));this.createMaker(e),null==(n=this.markers[e])||n.play(e,a)},t.pause=function(e){var t,n;this.isSprite?null==(t=this.markers[e])||t.pause():null==(n=this.audio)||n.pause()},t.stop=function(e){var t,n;this.isSprite?null==(t=this.markers[e])||t.stop():null==(n=this.audio)||n.stop()},t.setVolume=function(e){this.volume=e},t.createMaker=function(e){if(!this.markers[e])try{this.markers[e]=this.game.sound.addAudioSprite(this.name)}catch(t){}},e}(),se=re,ae=function(e){function t(){for(var t,n,i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return(n=e.call.apply(e,x()(t=[this]).call(t,r))||this).soundManager=void 0,n.musicManager=void 0,n.isMuteAll=void 0,n.initMusic=function(e){n.musicManager=new se(n.game,e),n.setMusicVolume(1)},n.initSound=function(){n.soundManager=new ie(n.game),n.setSoundVolume(1)},n}(0,o.Z)(t,e);var n=t.prototype;return n.importSoundEffectKeys=function(e){this.soundManager.addSoundKeys(e)},n.playSound=function(e,t){try{if(!this.soundManager||this.isMuteAll||!this.game.visibility.isGameVisible())return;if(!this.soundManager.isSoundEnabled())return;this.soundManager.play(e,t)}catch(n){}},n.stopSound=function(e){try{this.soundManager.stop(e)}catch(t){}},n.playMusic=function(e){void 0===e&&(e={});try{if(!this.musicManager||this.isMuteAll||!this.game.visibility.isGameVisible())return;if(!this.musicManager.isMusicEnabled())return;this.musicManager.play("",(0,r.Z)({loop:!0,volume:.2},e))}catch(t){}},n.pauseMusic=function(){try{if(!this.musicManager)return;this.musicManager.pause("")}catch(e){}},n.stopMusic=function(){try{if(!this.musicManager)return;this.musicManager.stop("")}catch(e){}},n.pauseAllSounds=function(){try{if(!this.soundManager)return;this.soundManager.pauseAll()}catch(e){}},n.resumeAllSounds=function(){try{if(!this.soundManager)return;this.soundManager.resumeAll()}catch(e){}},n.setSoundVolume=function(e){try{if(!this.soundManager)return;this.soundManager.setVolume(e)}catch(t){}},n.setMusicVolume=function(e){try{if(!this.musicManager)return;this.musicManager.setVolume(e)}catch(t){}},n.muteAll=function(){this.isMuteAll=!0,this.game.sound.mute=!0},n.unmuteAll=function(){this.isMuteAll=!1,this.game.sound.mute=!1},t}(Phaser.Plugins.BasePlugin),oe=ae,ce=n(54),le="AUTH_TOKEN_REQUEST",ue="AUTH_TOKEN_RECEIVED",he=function(e){function t(t,n){var i;return(i=e.call(this,t)||this).payload=void 0,i.name="RequestTokenFail",i.message=t||"Request token fail",i.payload=n||{},i}return(0,o.Z)(t,e),t}((0,W.Z)(Error)),de=n(437),pe="auth",fe=(0,de.P1)([function(e){return e[pe].token}],(function(e){return e})),ve=(0,de.P1)([function(e){return e[pe].isRequesting}],(function(e){return e})),me=function(e){return{type:ue,payload:{token:e}}},ge=function(e){function t(){return e.apply(this,arguments)||this}(0,o.Z)(t,e);var n=t.prototype;return n.requestToken=function(){var e=(0,a.Z)(h().mark((function e(){var t;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.game.storage,e.next=3,t.dispatch(function(){var e=(0,a.Z)(h().mark((function e(t,n){var r,s,a,o;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,r=window.game.facebook,s=n(),a=fe(s),!ve(s)&&""===a){e.next=7;break}return e.abrupt("return");case 7:return t({type:le,payload:{}}),e.next=10,r.getPlayerToken();case 10:o=e.sent,t(me(o)),e.next=25;break;case 14:if(e.prev=14,e.t0=e.catch(0),!(e.t0 instanceof Object&&GameCore.Utils.Object.hasOwn(e.t0,"code"))){e.next=19;break}if("PENDING_REQUEST"!==e.t0.code){e.next=19;break}return e.abrupt("return");case 19:if(t(me("")),!(e.t0 instanceof Object&&GameCore.Utils.Object.hasOwn(e.t0,"message"))){e.next=24;break}if("string"!==typeof e.t0.message){e.next=24;break}return(0,i.tO)(new Error(e.t0.message)),e.abrupt("return");case 24:(0,i.tO)(new he);case 25:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(t,n){return e.apply(this,arguments)}}());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.getToken=function(){return fe(this.state)},(0,ce.Z)(t,[{key:"state",get:function(){return this.game.storage.getState()}}]),t}(Phaser.Plugins.BasePlugin),ye=ge,Ee=function(e,t){void 0===t&&(t=1);var n=new Image;n.onload=function(){var e,n;e=this.width*t,n=this.height*t,Math.floor(n/2),Math.floor(e/2)},n.src=e},Se=function(e){function t(){for(var t,n,i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return(n=e.call.apply(e,x()(t=[this]).call(t,r))||this).width=void 0,n.height=void 0,n.renderOptions=void 0,n.canvas=void 0,n}(0,o.Z)(t,e);var n=t.prototype;return n.preload=function(e){var t=this,n=te()(e);n.length<1||(n.forEach((function(n){t.scene.load.image(n,e[n])})),this.scene.load.start())},n.capture=function(){var e=(0,a.Z)(h().mark((function e(t){var n,i,r;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.width,i=t.height,r=t.renderOptions,this.width=n,this.height=i,this.renderOptions=r,this.createCanvas(),e.next=7,this.loadImages();case 7:return this.drawObjects(),e.abrupt("return",this.snapshotFrame());case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.createCanvas=function(){this.canvas||(this.canvas=this.game.textures.createCanvas("FrameCaptureCanvas")),this.canvas.clear(),this.canvas.setSize(this.width,this.height)},n.loadImages=function(){var e=[];for(var t in this.renderOptions){var n=this.renderOptions[t],i=n.name,r=n.image,s=n.fallbackWithImage;if(r)if(this.scene.textures.get(i).key!==i&&""!==i){var a=this.loadImage(i,r,s);e.push(a)}}return this.scene.load.start(),l().all(e)},n.loadImage=function(e,t,n){var i=this;return this.scene.load.image(e,t),new(l())((function(t,r){var s=Phaser.Loader.Events.FILE_KEY_COMPLETE+"image-"+e,a=Phaser.Loader.Events.FILE_LOAD_ERROR,o=function e(n){i.scene.load.off(s,e),i.scene.load.off(a,c),t()},c=function c(l){if(l.key===e)if(i.scene.load.off(s,o),i.scene.load.off(a,c),n)t();else{var u=new Error("Load image failed");r(u)}};i.scene.load.on(s,o),i.scene.load.on(a,c)}))},n.drawObjects=function(){for(var e in this.renderOptions){var t=this.renderOptions[e];switch(t.type){case"text":this.drawText(t);break;case"image":this.drawImage(t)}}},n.drawText=function(e){var t=this.canvas.context,n=e.x,i=e.y,r=e.font,s=e.text,a=e.fillStyle,o=e.lineWidth,c=e.textAlign;t.font=r+' MikadoBlack,nunito,-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Oxygen,Ubuntu,Cantarell,"Fira Sans","Droid Sans","Helvetica Neue",sans-serif',t.fillStyle=a||"#ffffff",o&&(t.lineWidth=o),c&&(t.textAlign=c),t.fillText(s,n,i)},n.drawImage=function(e){var t=this.canvas.context,n=e.x,i=e.y,r=e.name,s=e.frame,a=e.width,o=e.height,c=e.fallbackWithImage,l=this.scene.textures.get(r),u=l.getSourceImage(s);"__MISSING"===l.key&&c&&(u=(l=this.scene.textures.get(c)).getSourceImage()),t.drawImage(u,n,i,a,o)},n.snapshotFrame=function(){var e=this.canvas.getCanvas().toDataURL("image/jpeg",.85);return GameCore.Utils.Valid.isDebugger()&&Ee(e),e},t}(Phaser.Plugins.ScenePlugin),we=Se,Ie=n(56),Ae=n.n(Ie),Te=function(e){function t(t,n,i){var r;return(r=e.call(this)||this).game=void 0,r.options=void 0,r.performance=void 0,r.isRunning=!1,r.checkTimer=void 0,r.fpsHistory=void 0,r.start=function(){if(!r.isRunning){r.isRunning=!0;var e=r.options.checkInterval;r.checkTimer=e,r.fpsHistory=[],r.game.events.on(Phaser.Core.Events.POST_STEP,r.onPostStep)}},r.stop=function(){r.isRunning&&(r.isRunning=!1,r.game.events.off(Phaser.Core.Events.POST_STEP,r.onPostStep),r.options.onlyUpdateWhenSwitchScene&&r.checkFps())},r.onPostStep=function(e,t){if(r.checkTimer-=t,!(r.checkTimer>0)){var n=r.options,i=n.checkInterval,s=n.onlyUpdateWhenSwitchScene;r.checkTimer+=i,r.fpsHistory.push(r.game.loop.actualFps),!1===s&&r.fpsHistory.length>=5&&r.checkFps()}},r.game=t,r.options=i,r.performance=n,r}(0,o.Z)(t,e);var n=t.prototype;return n.checkFps=function(){if(0!==this.fpsHistory.length){var e=this.options.autoUpgradeQuality,t=!1;this.isLowFps()?t=this.performance.downgradeGraphicsQuality():e&&this.isHighFps()&&(t=this.performance.upgradeGraphicsQuality()),t&&(this.fpsHistory=[])}},n.getFpsMedian=function(){return Phaser.Math.Median(this.fpsHistory)},n.isLowFps=function(){return this.getFpsMedian()<this.options.fpsThreshold},n.isHighFps=function(){return this.getFpsMedian()>1.2*this.options.fpsThreshold},t}(Phaser.Events.EventEmitter),Ce=Te,be=["pixelRatio","minQuality","maxQuality","qualityAdjustStep","trackingSceneKeys"],Pe=function(e){function t(){for(var t,n,i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return(n=e.call.apply(e,x()(t=[this]).call(t,r))||this).fpsTracker=void 0,n.pixelRatio=void 0,n.minQuality=void 0,n.maxQuality=void 0,n.qualityAdjustStep=void 0,n.trackingSceneKeys=[],n.trackingScene=function(e){var t;if(Ae()(t=n.trackingSceneKeys).call(t,e)){var i=n.game.scene.getScene(e);i.events.once(Phaser.Scenes.Events.UPDATE,n.fpsTracker.start),i.events.once(Phaser.Scenes.Events.SLEEP,n.fpsTracker.stop)}},n}(0,o.Z)(t,e);var n=t.prototype;return n.configure=function(e){var t=e.pixelRatio,n=e.minQuality,i=e.maxQuality,r=e.qualityAdjustStep,a=e.trackingSceneKeys,o=(0,s.Z)(e,be);this.pixelRatio=t,this.minQuality=n,this.maxQuality=i,this.qualityAdjustStep=r,this.trackingSceneKeys=a,this.fpsTracker=new Ce(this.game,this,o)},n.active=function(){this.game.events.on(Phaser.Scenes.Events.WAKE,this.trackingScene),this.game.events.on(Phaser.Scenes.Events.START,this.trackingScene)},n.downgradeGraphicsQuality=function(){var e=this.pixelRatio;if(e<=this.minQuality)return!1;var t=+(e-this.qualityAdjustStep).toFixed(2);return!(t<this.minQuality)&&(this.pixelRatio=t,this.game.world.resize(this.pixelRatio),!0)},n.upgradeGraphicsQuality=function(){var e=this.pixelRatio;if(e>=this.maxQuality)return!1;var t=+(e+this.qualityAdjustStep).toFixed(2);return!(t>this.maxQuality)&&(this.pixelRatio=t,this.game.world.resize(this.pixelRatio),!0)},t}(Phaser.Plugins.BasePlugin),xe=Pe,Re={sound:!0,music:!0,vibrate:!0,language:"en",theme:GameCore.Configs.DefaultTheme},Oe=n(48),_e=n.n(Oe),ke=n(55),De=n.n(ke),Le=Re.sound,Be=Re.music,Ne=Re.vibrate,He=Re.language,Me=Re.theme,Ge=function(){function e(e){this.sound=void 0,this.music=void 0,this.vibrate=void 0,this.language=void 0,this.theme=void 0;var t=e||{},n=t.sound,i=t.music,r=t.vibrate,s=t.language,a=t.theme;this.sound=GameCore.Utils.Valid.isBoolean(n)?n:Le,this.music=GameCore.Utils.Valid.isBoolean(i)?i:Be,this.vibrate=GameCore.Utils.Valid.isBoolean(r)?r:Ne,this.language=GameCore.Utils.Valid.isString(s)?s:He,this.theme=GameCore.Utils.Valid.isString(a)?a:Me}return e.prototype.toObject=function(){return{sound:this.sound,music:this.music,vibrate:this.vibrate,language:this.language,theme:this.theme}},e}(),We=Ge,Ue=GameCore.Utils,Fe=Ue.Valid,Ze=Ue.Object,Ye=function(){function e(e){this.score=void 0,this.settings=void 0,this.gameData=void 0,this.userGuideDisplays=void 0,this.setupDefaultData(),this.updateScore(e),this.updateSettings(e),this.updateGameData(e),this.updateUserGuideDisplays(e)}var t=e.prototype;return t.setupDefaultData=function(){var e;this.score=0,this.settings=(0,r.Z)({},Re),this.gameData={coins:0,diamond:0,goldScrew:2,silverScrew:2,lastReceiveGift:0,dailyRewarded:{lastRewarded:0,logDays:[]},dailyTasks:{startedTime:0,logTasks:{}},items:(e={},e.UndoItem=0,e.ReplayItem=0,e.RemoveScrewItem=0,e.HammerItem=0,e.LightningItem=0,e.BonusTimeItem=0,e),dailyQuest:{exp:0,level:1,firstTimePlay:!0,startTime:0},purchases:[],level:1},this.userGuideDisplays=0},t.updateScore=function(e){var t=e.score;!1!==Fe.isNumber(t)&&(this.score=t)},t.updateSettings=function(e){var t=e.settings;if(!1!==Fe.isObject(t)){var n=new We(t).toObject();this.settings=n}},t.updateGameData=function(e){var t=e.gameData;if(!1!==Fe.isObject(t)){if(Ze.hasOwn(t,"coins")&&Fe.isNumber(t.coins)&&(this.gameData.coins=t.coins),Ze.hasOwn(t,"diamond")&&Fe.isNumber(t.diamond)&&(this.gameData.diamond=t.diamond),Ze.hasOwn(t,"goldScrew")&&Fe.isNumber(t.goldScrew)&&(this.gameData.goldScrew=t.goldScrew),Ze.hasOwn(t,"silverScrew")&&Fe.isNumber(t.silverScrew)&&(this.gameData.silverScrew=t.silverScrew),Ze.hasOwn(t,"lastReceiveGift")&&Fe.isNumber(t.lastReceiveGift)&&(this.gameData.lastReceiveGift=t.lastReceiveGift),Ze.hasOwn(t,"dailyRewarded")&&Fe.isObject(t.dailyRewarded)){var n=t.dailyRewarded;Ze.hasOwn(n,"lastRewarded")&&Fe.isNumber(n.lastRewarded)&&(this.gameData.dailyRewarded.lastRewarded=n.lastRewarded),Ze.hasOwn(n,"logDays")&&Array.isArray(n.logDays)&&(this.gameData.dailyRewarded.logDays=n.logDays)}if(Ze.hasOwn(t,"dailyTasks")&&Fe.isObject(t.dailyTasks)){var i=t.dailyTasks;Ze.hasOwn(i,"startedTime")&&Fe.isNumber(i.startedTime)&&(this.gameData.dailyTasks.startedTime=i.startedTime),Ze.hasOwn(i,"logTasks")&&Fe.isObject(i.logTasks)&&(this.gameData.dailyTasks.logTasks=i.logTasks)}if(Ze.hasOwn(t,"items")&&Fe.isObject(t.items)){var r=t.items;this.gameData.items=r}if(Ze.hasOwn(t,"purchases")&&Array.isArray(t.purchases)&&(this.gameData.purchases=t.purchases),Ze.hasOwn(t,"dailyQuest")&&Fe.isObject(t.dailyQuest)){var s=t.dailyQuest;Ze.hasOwn(s,"exp")&&Fe.isNumber(s.exp)&&(this.gameData.dailyQuest.exp=s.exp),Ze.hasOwn(s,"level")&&Fe.isNumber(s.level)&&(this.gameData.dailyQuest.level=s.level),Ze.hasOwn(s,"firstTimePlay")&&Fe.isBoolean(s.firstTimePlay)&&(this.gameData.dailyQuest.firstTimePlay=s.firstTimePlay),Ze.hasOwn(s,"startTime")&&Fe.isNumber(s.startTime)&&(this.gameData.dailyQuest.startTime=s.startTime)}Ze.hasOwn(t,"level")&&Fe.isNumber(t.level)&&(this.gameData.level=t.level)}},t.updateUserGuideDisplays=function(e){var t=e.userGuideDisplays;!1!==Fe.isNumber(t)&&(this.userGuideDisplays=t)},t.toObject=function(){return{score:this.score,settings:this.settings,gameData:this.gameData,userGuideDisplays:this.userGuideDisplays}},t.convertToPlayerData=function(){var e=this.gameData,t=e.coins,n=e.diamond,i=e.goldScrew,r=e.silverScrew,s=e.dailyTasks,a=e.dailyRewarded,o=e.lastReceiveGift,c=e.items,l=e.dailyQuest,u=e.purchases,h=e.level;return{score:this.score,settings:this.settings,customFields:{coins:t,diamond:n,goldScrew:i,silverScrew:r,dailyTasks:s,dailyRewarded:a,lastReceiveGift:o,items:c,dailyQuest:l,purchases:u,level:h},userGuideDisplays:this.userGuideDisplays}},t.convertToFacebookData=function(e){var t=e.score,n=e.settings,i=e.customFields,r=e.userGuideDisplays;return this.updateScore({score:t}),this.updateSettings({settings:n}),this.updateGameData({gameData:i}),this.updateUserGuideDisplays({userGuideDisplays:r}),this.toObject()},e}(),Ve=Ye,ze=n(618),Ke=GameCore.Configs.ApiHost,je=function(){var e=(0,a.Z)(h().mark((function e(t){var n;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,ze.v)("players?platform=ms-games",t,{},Ke,10);case 2:return n=e.sent,e.abrupt("return",(null==n?void 0:n.data)||{});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Xe=function(){var e=(0,a.Z)(h().mark((function e(t){var n;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,ze.v)("players/"+t+"/user-guide-displays/inc",{},{},Ke);case 2:return n=e.sent,e.abrupt("return",(null==n?void 0:n.data)||{});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Qe="PLAYER_RECEIVED",qe="PLAYER_DATA_UPDATE",Je="PLAYER_SCORE_UPDATE",$e="PLAYER_PROFILE_UPDATE",et="PLAYER_SETTING_UPDATE",tt="PLAYER_CONNECTED_PLAYERS_UPDATE",nt=n(432),it=function(e){function t(t,n){var i;return(i=e.call(this,t)||this).payload=void 0,i.name="PlayerDataNameNotSupport",i.message=t||"The name of player data is not supported",i.payload=n||{},i}return(0,o.Z)(t,e),t}((0,W.Z)(Error)),rt="player",st=(0,de.P1)([function(e){return e[rt]}],(function(e){return e})),at=(0,de.P1)([st],(function(e){return e.playerId})),ot=(0,de.P1)([st],(function(e){return e.ASID})),ct=(0,de.P1)([function(e){return e[rt].data}],(function(e){return e})),lt=(0,de.P1)([ct],(function(e){return e.settings})),ut=(0,de.P1)([function(e){return e[rt].connectedPlayers}],(function(e){return e})),ht=(0,de.P1)([ut,function(e,t){return t.limit},function(e,t){return t.offset}],(function(e,t,n){if("number"!==typeof t)return[];if("number"!==typeof n)return[];var i=te()(e);return S()(i).call(i,n,t+n)||[]})),dt=(0,de.P1)([ct],(function(e){return e.score})),pt=(0,de.P1)([ct],(function(e){return e.customFields})),ft=(0,de.P1)([pt],(function(e){return Number(null==e?void 0:e.level)||1})),vt=(0,de.P1)([pt],(function(e){return(null==e?void 0:e.items)||{}})),mt=(0,de.P1)([pt],(function(e){return(null==e?void 0:e.goldScrew)||0})),gt=(0,de.P1)([pt],(function(e){return(null==e?void 0:e.silverScrew)||0})),yt=(0,de.P1)([pt],(function(e){return(null==e?void 0:e.dailyQuest)||{exp:0,level:1,firstTimePlay:!0,startTime:0}})),Et=(0,de.P1)([pt],(function(e){return void 0===(null==e?void 0:e.purchases)?[]:e.purchases})),St=GameCore.Configs,wt=St.AppId,It=St.Tutorial,At=function(e,t){return function(n){var i=e.playerId,r=e.name,s=e.photo,a=e.locale;n({type:Qe,payload:{playerId:i,name:r,photo:s,locale:a,data:t||{}}})}},Tt=function(e){return{type:tt,payload:{connectedPlayers:e}}},Ct=function(e,t){return function(){var n=(0,a.Z)(h().mark((function n(r,s){var a,o,c;return h().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,r({type:et,payload:{name:e,value:t}});case 3:a=s(),o=ct(a),c=new Ve({}).convertToFacebookData(o),FBInstant.player.setDataAsync(c),n.next=12;break;case 9:n.prev=9,n.t0=n.catch(0),(0,i.tO)(n.t0);case 12:case"end":return n.stop()}}),n,null,[[0,9]])})));return function(e,t){return n.apply(this,arguments)}}()},bt=function(e,t){return function(){var n=(0,a.Z)(h().mark((function n(r,s){var a,o,c,l,u;return h().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,o={customFields:(a={},a[e]=t,a)},n.next=4,r(Rt(o));case 4:c=s(),l=ct(c),u=new Ve({}).convertToFacebookData(l),FBInstant.player.setDataAsync(u),n.next=15;break;case 10:if(n.prev=10,n.t0=n.catch(0),!(n.t0 instanceof it)){n.next=14;break}return n.abrupt("return");case 14:(0,i.tO)(n.t0);case 15:case"end":return n.stop()}}),n,null,[[0,10]])})));return function(e,t){return n.apply(this,arguments)}}()},Pt=function(e){return function(){var t=(0,a.Z)(h().mark((function t(n,r){var s,a,o,c;return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,s={customFields:e},t.next=4,n(Rt(s));case 4:a=r(),o=ct(a),c=new Ve({}).convertToFacebookData(o),FBInstant.player.setDataAsync(c),t.next=15;break;case 10:if(t.prev=10,t.t0=t.catch(0),!(t.t0 instanceof it)){t.next=14;break}return t.abrupt("return");case 14:(0,i.tO)(t.t0);case 15:case"end":return t.stop()}}),t,null,[[0,10]])})));return function(e,n){return t.apply(this,arguments)}}()},xt=function(e){return function(){var t=(0,a.Z)(h().mark((function t(n,r){var s,a,o,c;return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,s={customFields:e},t.next=4,n(Rt(s));case 4:a=r(),o=ct(a),c=new Ve({}).convertToFacebookData(o),FBInstant.player.setDataAsync(c),t.next=16;break;case 10:if(t.prev=10,t.t0=t.catch(0),!(t.t0 instanceof it)){t.next=15;break}return t.abrupt("return");case 15:(0,i.tO)(t.t0);case 16:case"end":return t.stop()}}),t,null,[[0,10]])})));return function(e,n){return t.apply(this,arguments)}}()},Rt=function(e){return{type:qe,payload:{data:e}}},Ot=function(e){return function(){var t=(0,a.Z)(h().mark((function t(n,r){var s,a,o;return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,n({type:Je,payload:{score:e}});case 3:je({score:e}),s=r(),a=ct(s),o=new Ve({}).convertToFacebookData(a),FBInstant.player.setDataAsync(o),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(0),(0,i.tO)(t.t0);case 13:case"end":return t.stop()}}),t,null,[[0,10]])})));return function(e,n){return t.apply(this,arguments)}}()},_t=function(e){function t(){return e.apply(this,arguments)||this}(0,o.Z)(t,e);var n=t.prototype;return n.incUserGuideDisplays=function(){var e=(0,a.Z)(h().mark((function e(){var t;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.game.storage,e.next=3,t.dispatch(function(){var e=(0,a.Z)(h().mark((function e(t,n){var r,s,a,o;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!It.ForceUseTutorial){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,t(Rt({userGuideDisplays:1}));case 5:r=n(),s=at(r),a=ct(r),o=new Ve({}).convertToFacebookData(a),FBInstant.player.setDataAsync(o),Xe(s),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),(0,i.tO)(e.t0);case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t,n){return e.apply(this,arguments)}}());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.receiveData=function(){var e=(0,a.Z)(h().mark((function e(t,n){var i;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=this.game.storage,e.next=3,i.dispatch(At(t,n));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}(),n.updateData=function(){var e=(0,a.Z)(h().mark((function e(){var t;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.game.storage,e.next=3,t.dispatch(function(){var e=(0,a.Z)(h().mark((function e(t,n){var r,s,a,o,c,l,u,d;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r=n(),s=st(r),a=s.playerId,o=s.name,c=s.photo,l=s.locale,e.next=6,FBInstant.player.getASIDAsync();case 6:return u=e.sent,d={appId:wt,playerId:a,name:o,photo:c,locale:l,ASID:u},e.next=10,t({type:$e,payload:{profile:d}});case 10:return e.next=12,je(d);case 12:e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),(0,i.tO)(e.t0);case 17:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(t,n){return e.apply(this,arguments)}}());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.setBestScore=function(){var e=(0,a.Z)(h().mark((function e(t){var n;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.game.storage,e.next=3,n.dispatch(Ot(t));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.setSetting=function(){var e=(0,a.Z)(h().mark((function e(t,n){var i;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=this.game.storage,e.next=3,i.dispatch(Ct(t,n));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}(),n.setCustomData=function(){var e=(0,a.Z)(h().mark((function e(t,n){var i;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=this.game.storage,e.next=3,i.dispatch(bt(t,n));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}(),n.setMultiCustomData=function(){var e=(0,a.Z)(h().mark((function e(t){var n;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.game.storage,e.next=3,n.dispatch(xt(t));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.requestConnectedPlayers=function(){var e=(0,a.Z)(h().mark((function e(){var t;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.game.storage,e.next=3,t.dispatch(function(){var e=(0,a.Z)(h().mark((function e(t){var n,r,s,a;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,FBInstant.player.getConnectedPlayersAsync();case 3:if(r=e.sent,s=function(e){return!!e},a=_e()(n=De()(r).call(r,(function(e){var t=e.getID(),n=e.getName(),i=e.getPhoto();return t&&n&&i?new nt.Z(t,n,i).toObject():null}))).call(n,s),!(a.length<1)){e.next=8;break}return e.abrupt("return");case 8:t(Tt(a)),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),(0,i.tO)(e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t){return e.apply(this,arguments)}}());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.updateConnectedPlayers=function(){var e=(0,a.Z)(h().mark((function e(t){var n;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.game.storage,e.next=3,n.dispatch(Tt(t));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.updateCustomFields=function(){var e=(0,a.Z)(h().mark((function e(t){var n;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.game.storage,e.next=3,n.dispatch(Pt(t));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.updateDailyQuest=function(){var e=(0,a.Z)(h().mark((function e(t){var n,i,s,a;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.game.storage,i=this.getDailyQuest(),s=(0,r.Z)({},i,t),a={dailyQuest:s},e.next=6,n.dispatch(Pt(a));case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.buyProduct=function(){var e=(0,a.Z)(h().mark((function e(t,n){var i,r,s;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=this.getPurchases(),!O()(r).call(r,(function(e){return e.paymentID===t}))){e.next=3;break}return e.abrupt("return");case 3:return s=x()(i=[]).call(i,r,[{paymentID:t,productID:n,purchaseTime:(new Date).valueOf()/1e3}]),e.next=6,this.updateCustomFields({purchases:s});case 6:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}(),n.getPlayer=function(){return st(this.state)},n.getPlayerId=function(){return this.getPlayer().playerId},n.getPlayerASID=function(){return ot(this.state)},n.getPlayerData=function(){return this.getPlayer().data},n.getPlayerSetting=function(e){var t=this.getPlayerSettings();return"string"!==typeof e?null:GameCore.Utils.Object.hasOwn(t,e)?t[e]:GameCore.Utils.Object.hasOwn(Re,e)?Re[e]:null},n.getPlayerSettings=function(){return this.getPlayerData().settings},n.getPlayerIsNew=function(){return this.getPlayer().isUserNew},n.getItems=function(){return vt(this.state)},n.getDailyQuest=function(){return yt(this.state)},n.getDiamond=function(){var e=this.getCustomData("diamond");return GameCore.Utils.Valid.isNumber(e)?e:0},n.getGoldScrew=function(){var e=this.getCustomData("goldScrew");return GameCore.Utils.Valid.isNumber(e)?e:0},n.getSilverScrew=function(){var e=this.getCustomData("silverScrew");return GameCore.Utils.Valid.isNumber(e)?e:0},n.getBestScore=function(){return dt(this.state)},n.getCustomData=function(e){var t=pt(this.state);return GameCore.Utils.Valid.isObject(t)&&GameCore.Utils.Object.hasOwn(t,e)?t[e]:null},n.getConnectedPlayers=function(){return ut(this.state)},n.getConnectedPlayerIds=function(e,t){return ht(this.state,{limit:e,offset:t})},n.updatePlayerLevel=function(){var e=(0,a.Z)(h().mark((function e(t){var n,i;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.game.storage,void 0===(i={level:t}).level&&delete i.level,e.next=5,n.dispatch(bt("level",t));case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.getLevel=function(){return Math.floor(ft(this.state))},n.getPurchases=function(){return Et(this.state)},(0,ce.Z)(t,[{key:"state",get:function(){return this.game.storage.getState()}}]),t}(Phaser.Plugins.BasePlugin),kt=_t,Dt=GameCore.Configs.ApiHost,Lt=function(){var e=(0,a.Z)(h().mark((function e(t){var n,i;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=GameCore.Utils.String.params(t),e.next=3,(0,ze.U)("players?"+n,{},Dt);case 3:return i=e.sent,e.abrupt("return",(null==i?void 0:i.data)||[]);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Bt="PROFILES_DATA_UPDATE",Nt="profile",Ht=(0,de.P1)([function(e){return e[Nt].data}],(function(e){return e})),Mt=(0,de.P1)([function(e){return e[Nt].profileIds}],(function(e){return e})),Gt=function(e){return function(){var t=(0,a.Z)(h().mark((function t(n,r){var s,a,o,c;return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,s=r(),a=Mt(s),!((o=GameCore.Utils.Array.difference(e,a)).length<1)){t.next=6;break}return t.abrupt("return");case 6:return t.next=8,Lt({playerIds:o});case 8:c=t.sent,n({type:Bt,payload:{data:c}}),t.next=15;break;case 12:t.prev=12,t.t0=t.catch(0),(0,i.tO)(t.t0);case 15:case"end":return t.stop()}}),t,null,[[0,12]])})));return function(e,n){return t.apply(this,arguments)}}()},Wt=function(e){function t(){return e.apply(this,arguments)||this}(0,o.Z)(t,e);var n=t.prototype;return n.requestProfiles=function(){var e=(0,a.Z)(h().mark((function e(t){var n;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.game.storage,e.next=3,n.dispatch(Gt(t));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.getProfiles=function(){return Ht(this.state)},(0,ce.Z)(t,[{key:"state",get:function(){return this.game.storage.getState()}}]),t}(Phaser.Plugins.BasePlugin),Ut=Wt,Ft=n(70),Zt=n.n(Ft),Yt=n(211),Vt=n.n(Yt),zt=["player","match"],Kt="null",jt=GameCore.Utils,Xt=jt.Valid,Qt=jt.Object,qt=GameCore.Configs.Rollbar,Jt=qt.UseMockup,$t=qt.FilterError,en=function(e){function t(){for(var t,n,i=arguments.length,r=new Array(i),a=0;a<i;a++)r[a]=arguments[a];return(n=e.call.apply(e,x()(t=[this]).call(t,r))||this).enable=void 0,n.rollbar=void 0,n.events=[],n.beforeSend=function(e,t,i){Jt&&n.showPopupError(i)},n.checkIgnore=function(e,t,i){try{return!!n.isErrorIgnore(t)}catch(r){return!1}},n.showPopupError=function(e){var t,i,r,s=null==e||null==(t=e.body)||null==(t=t.trace)?void 0:t.exception;s&&n.events.push(s);var a=(null==e||null==(i=e.body)||null==(i=i.trace)?void 0:i.frames)||[];(r=n.events).push.apply(r,a);var o=document.getElementById("popup-error");o||((o=document.createElement("div")).id="popup-error",document.body.appendChild(o)),o.innerHTML='<div style="color: #fff; display: flex; flex-flow: column; align-items: center; ">\n      <pre id="json" style="overflow: auto; background-color: rgb(195 112 97 / 80%); padding: 10px; max-height: 80vh; max-width: 90vw; border: 5px solid #545454;">'+k()(n.events,null,2)+'</pre>\n      <button id="close" style="cursor: pointer; padding: 10px 20px; border-radius: 100px;">Close</button>\n      </div>',o.style="top: 0px; z-index: 10000; width: 100vw; max-height: 100vh; position: absolute; display: flex; align-items: center; justify-content: center;";var c=document.getElementById("close");c&&(c.onclick=n.closePopup)},n.closePopup=function(){n.events=[{}];var e=document.getElementById("popup-error");null==e||e.remove()},n.isNoneErrorEvent=function(e){if(!e||0===e.length)return!1;if(!e[0].message)return!1;return"Non-Error promise rejection captured with keys: code, message"===e[0].message},n.isErrorIgnore=function(e){if(!e||0===e.length)return!1;var t=!1,i=e[0];return i instanceof Object&&(t=n.isIgnoreByCode(i)||n.isIgnoreByMessage(i)),t},n.isIgnoreByCode=function(e){if(Qt.hasOwn(e,"code")){var t=e.code,n=$t.Codes,i=n.accepted,r=n.ignored;if("string"===typeof t){if(Zt()(i).call(i,t)>=0)return!1;if(Zt()(r).call(r,t)>=0)return!0}}if(Qt.hasOwn(e,"name")){var s=e.name,a=$t.Codes,o=a.accepted,c=a.ignored;if("string"===typeof s){if(Zt()(o).call(o,s)>=0)return!1;if(Zt()(c).call(c,s)>=0)return!0}}return!1},n.isIgnoreByMessage=function(e){if(Qt.hasOwn(e,"message")){var t=e.message,n=$t.Messages,i=n.accepted,r=n.ignored;if("string"===typeof t){if(Zt()(i).call(i,t)>=0)return!1;if(Zt()(r).call(r,t)>=0)return!0}}return!1},n.addExtraState=function(){try{if(!Qt.hasOwn(window,"game"))return;if(!Qt.hasOwn(window.game,"storage"))return;if(!Qt.hasOwn(window.game.storage,"getState"))return;var e=(0,window.game.storage.getState)()||{},t=e.player,i=e.match,r=(0,s.Z)(e,zt);n.rollbar.configure({payload:{player:t,match:i,other:r}})}catch(a){}},n}(0,o.Z)(t,e);var n=t.prototype;return n.setup=function(){this.rollbar=new(Vt())({accessToken:Kt,checkIgnore:this.checkIgnore,onSendCallback:this.beforeSend,captureUncaught:!0,scrubTelemetryInputs:!0,captureUnhandledRejections:!0,autoInstrument:{dom:!1,navigation:!1},payload:{environment:"production",client:{javascript:{code_version:"0"}},server:{root:"webpack:///./",branch:"master"}}}),this.enable=!0,this.sendTestException()},n.configure=function(e){this.rollbar&&this.rollbar.configure(e)},n.sendTestException=function(){if(!Xt.isDebugger()){var e=FBInstant.player.getID();e&&this.rollbar.debug(new Error("Test rollbar"),{playerID:e})}},n.sendException=function(e,t){e&&this.enable&&this.rollbar&&(this.addExtraState(),this.rollbar.error(e,t))},t}(Phaser.Plugins.BasePlugin),tn=en,nn=function(e){function t(){return e.apply(this,arguments)||this}return(0,o.Z)(t,e),t.prototype.emit=function(t,n){return e.prototype.emit.call(this,t,n)},t}(Phaser.Events.EventEmitter),rn=nn,sn=n(439),an=n(441),on=n(202),cn=n(438),ln=function(e){function t(t,n,i,r){var s;(s=e.call(this,t)||this).zone=void 0,s.background=void 0,s.entranceAnimation=void 0,s.exitAnimation=void 0,s.setName(n),s.setVisible(!1);var a=s.scene.world.getWorldSize(),o=a.width,c=a.height;return s.setSize(i||o,r||c),s.addZone(),s.addBackground(),s.registerEvents(),s.createEntranceExitAnimations(),s.scene.world.isLandscape()&&on.Z.registerObject(s.background),s}(0,o.Z)(t,e);var n=t.prototype;return n.open=function(e){GameCore.Utils.Valid.isObject(e)&&(this.setDataEnabled(),this.setData(e)),this.setBlockInputOutsideEnabled(!0),this.scene.screen.bringToTop(this.name),this.visible||(this.setVisible(!0),this.logPageviewOnOpen(),this.logEventOpen(),this.handleResize())},n.close=function(){this.setBlockInputOutsideEnabled(!1),this.visible&&(this.setVisible(!1),this.logPageviewOnClose())},n.incY=function(e){this.y+=e,this.background.y-=e},n.incX=function(e){this.x+=e,this.background.x-=e},n.incScale=function(e){this.scale+=e,this.background.scale-=e^e*(100/e)},n.setBlockInputOutsideEnabled=function(e){this.scene.input.setTopOnly(e)},n.addZone=function(){this.zone=this.scene.add.zone(0,0,this.width,this.height),this.zone.setInteractive({}),this.add(this.zone)},n.addBackground=function(){var e="screen-background";if(!this.scene.textures.exists(e)){var t=this.width+2,n=this.height+2,i=this.scene.add.graphics();i.fillStyle(0,1),i.fillRect(0,0,t,n),i.generateTexture(e,t,n),i.destroy()}this.background=this.scene.add.image(0,0,e),this.add(this.background)},n.registerEvents=function(){this.scene.world.events.on(cn.Z.RESIZE,this.handleResize,this)},n.handleResize=function(){var e=this.scene.world.getWorldSize(),t=e.width,n=e.height;this.setSize(t,n).setPosition(t/2,n/2),this.zone.setSize(this.width,this.height),this.background.setDisplaySize(this.width,this.height)},n.logPageviewOnOpen=function(){this.scene.analytics.pageview(this.name)},n.logPageviewOnClose=function(){this.scene.analytics.pageview(this.scene.scene.key)},n.logEventOpen=function(){this.scene.analytics.event(Z._.SCREEN_OPEN,{screen_name:this.getScreenName()})},n.getScreenName=function(){return GameCore.Utils.String.toUpperCamelCase(this.name.toLowerCase())},n.createEntranceExitAnimations=function(){var e=this;this.entranceAnimation=new sn.Z([{target:this.background,color:[{color:"ffffff00",curve:.146,c2:.26,c3:.75},{time:.1333,color:"ffffffd8"}]}]),this.exitAnimation=new sn.Z([{target:this.background,color:[{color:"ffffffd8",curve:.25,c3:.75},{time:.1667,color:"ffffff00"}]}]),this.exitAnimation.events.on("complete",(function(){e.disableButtons(!1),e.scene.screen.close(e.name)}))},n.runOpenAnimation=function(){return this.entranceAnimation.start()},n.runCloseAnimation=function(){var e;return this.emit(GameCore.Screens.Events.RUN_CLOSE_ANIMATION),this.disableButtons(!0),null==(e=this.exitAnimation)?void 0:e.start()},n.disableButtons=function(e){!function t(n){n.list.forEach((function(n){n instanceof an.Z?n.setDisabled(e,!1):n instanceof Phaser.GameObjects.Container&&t(n)}))}(this)},t}(Phaser.GameObjects.Container),un=ln,hn={OPEN:"open",CLOSE:"close",CREATED:"created",RUN_CLOSE_ANIMATION:"runCloseAnimation"};GameCore.Screen=un,GameCore.Screens={Events:hn};var dn=function(e){function t(){for(var t,n,i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return(n=e.call.apply(e,x()(t=[this]).call(t,r))||this).events=void 0,n}(0,o.Z)(t,e);var n=t.prototype;return n.boot=function(){this.events=new rn,this.registryScreenFactory()},n.get=function(e){var t=this.scene.children.getByName(e);return null===t?null:t},n.add=function(e,t,n,i){var r=this.get(e);return r||(r=this.scene.add.screen(e,t,n,i),this.events.emit(GameCore.Screens.Events.CREATED,r),r)},n.open=function(e,t){var n=this.get(e);return!!n&&(n.open(t),n.emit(GameCore.Screens.Events.OPEN,n),this.events.emit(GameCore.Screens.Events.OPEN,n),!0)},n.close=function(e){var t=this.get(e);return!!t&&(t.close(),t.emit(GameCore.Screens.Events.CLOSE,t),this.events.emit(GameCore.Screens.Events.CLOSE,t),!0)},n.bringToTop=function(e){var t=this.scene.children.getByName(e);t&&this.scene.children.bringToTop(t)},n.registryScreenFactory=function(){Phaser.GameObjects.GameObjectFactory.register("screen",this.createScreen)},n.createScreen=function(e,t,n,i){var r=new t(this.scene,e,n,i);return Phaser.Display.Align.In.Center(r,this.scene.gameZone),this.existing(r),r},t}(Phaser.Plugins.ScenePlugin),pn=dn,fn=n(398),vn=n.n(fn),mn=n(434),gn=n(436),yn=n(435),En={currentSceneKey:"",prevSceneKey:""};(0,yn.pV)();var Sn,wn,In,An,Tn,Cn,bn,Pn,xn,Rn={processed:!1,contextId:"",contextType:"SOLO",entryPointData:{},currentGameMode:""},On=Rn,_n={data:{}},kn={token:"",isRequesting:!1},Dn=(Sn={},Sn[pe]=function(e,t){return void 0===e&&(e=kn),(0,yn.ZP)(e,(function(e){var n=t.payload;if(n){var i=n.token;switch(t.type){case le:e.isRequesting=!0;break;case ue:e.token=i,e.isRequesting=!1}}}))},Sn),Ln=n(196),Bn={ASID:"",playerId:"",name:"",photo:"",locale:"",connectedPlayers:{},data:{score:0,settings:Re,userGuideDisplays:0,customFields:{items:{},dailyQuest:{exp:0,level:1,firstTimePlay:!0,startTime:0},purchases:[]}},isUserNew:!0},Nn=(wn={},wn[rt]=function(e,t){return void 0===e&&(e=Bn),(0,yn.ZP)(e,(function(n){var i=t.payload;if(i){var r=i.name,s=i.value,a=i.data,o=void 0===a?{}:a,c=i.score,l=i.connectedPlayers,u=void 0===l?[]:l,h=i.profile;switch(t.type){case Qe:var d=i.playerId,p=i.name,f=i.photo,v=i.locale,m=i.data;if(n.playerId=d,n.name=p,n.photo=f,n.locale=v,GameCore.Utils.Valid.isObject(m)){var g=m;n.data=(0,Ln.TS)(e.data,g)}m.userGuideDisplays>0&&(n.isUserNew=!1);break;case $e:var y=h.playerId,E=h.name,S=h.photo,w=h.locale,I=h.ASID;n.ASID=I,n.playerId=y,n.name=E,n.photo=S,n.locale=w;break;case Je:n.data.score=c;break;case et:if(!GameCore.Utils.Object.hasOwn(n.data.settings,r))break;n.data.settings[r]=s;break;case qe:n.data=(0,Ln.TS)(e.data,o),o.userGuideDisplays>0&&(n.isUserNew=!1);break;case tt:if(u.length<=0)break;var A=GameCore.Utils.Object.keyBy(u,"playerId");n.connectedPlayers=(0,Ln.TS)(e.connectedPlayers,A)}}}))},wn),Hn=n(458),Mn=n.n(Hn),Gn={data:{},profileIds:[]},Wn=(In={},In[Nt]=function(e,t){return void 0===e&&(e=Gn),(0,yn.ZP)(e,(function(n){var i=t.payload;if(i){var s=i.data,a=void 0===s?[]:s;if(t.type===Bt){var o,c,l=GameCore.Utils.Object.keyBy(a,"playerId"),u=te()(l);n.data=(0,Ln.TS)((0,r.Z)({},e.data),l),n.profileIds=x()(o=[]).call(o,new(Mn())(x()(c=[]).call(c,e.profileIds,u)))}}}))},In),Un="match",Fn="MATCH_GAMEPLAY_INITIALIZE",Zn="MATCH_GAMEPLAY_START",Yn="MATCH_GAMEPLAY_FINISH",Vn="MATCH_GAMEPLAY_UPDATE",zn="MATCH_GAMEPLAY_RESCUE",Kn="MATCH_STATS_DATA_CLEAR",jn="MATCH_STATS_DATA_UPDATE",Xn="MATCH_STATS_CURRENT_UPDATE",Qn="MATCH_SINGLE_CREATE_REQUEST",qn="MATCH_SINGLE_DETAIL_REQUEST",Jn="MATCH_SINGLE_DATA_RECEIVED",$n="MATCH_SINGLE_DATA_CLEAR",ei="MATCH_CHALLENGE_JOIN_REQUEST",ti="MATCH_CHALLENGE_CREATE_REQUEST",ni="MATCH_CHALLENGE_FINISH_REQUEST",ii="MATCH_CHALLENGE_CONTINUE_REQUEST",ri="MATCH_CHALLENGE_DATA_RECEIVED",si="MATCH_CHALLENGE_DATA_CLEAR",ai="MATCH_GROUP_CREATE_REQUEST",oi="MATCH_GROUP_FINISH_REQUEST",ci="MATCH_ONLINE_CREATE_REQUEST",li="MATCH_ONLINE_DATA_RECEIVED",ui="open",hi="active",di="finished",pi={mode:"",status:ui,rescued:0,startAt:0,finishAt:0},fi={single:{_id:"",data:{fen:""},playerId:"",status:ui},group:{status:ui,opponentInfo:{playerId:"",name:"",photo:""}},challenge:{_id:"",status:ui,whitePlayerId:"",blackPlayerId:"",opponentInfo:{playerId:"",name:"",photo:""}},online:{_id:"",status:ui,players:{}},updateAt:0,isRequesting:!1},vi={current:{updateAt:0},data:{updateAt:0},isRequesting:!1},mi=(An={},An[Un]=(0,mn.UY)({gameplay:function(e,t){return void 0===e&&(e=pi),(0,yn.ZP)(e,(function(n){var i=t.payload;if(i){var r=i.mode,s=i.status;switch(t.type){case Fn:n.status=ui,n.mode=pi.mode,n.rescued=pi.rescued,n.startAt=pi.startAt,n.finishAt=pi.finishAt,n.opponentInfo=pi.opponentInfo;break;case Zn:n.mode=r,n.status=hi,n.rescued=pi.rescued,n.startAt=Date.now();break;case Vn:n.mode="string"===typeof r?r:e.mode,n.status=s||e.status;break;case Yn:n.status=di,n.finishAt=Date.now();break;case zn:n.rescued+=1}}}))},match:function(e,t){return void 0===e&&(e=fi),(0,yn.ZP)(e,(function(n){var i=t.payload;if(i){var s=i.match,a=i.opponentInfo,o=i.players;switch(t.type){case Qn:case qn:case ei:case ni:case ci:n.isRequesting=!0;break;case"MATCH_SINGLE_MOVE_UPDATED":n.single=(0,r.Z)({},e.single,s),n.updateAt=Date.now();break;case Jn:n.isRequesting=!1,n.single=s||fi.single;break;case $n:n.isRequesting=!1,n.single=fi.single;break;case ti:case ii:n.isRequesting=!0,n.challenge.opponentInfo=a;break;case ri:n.isRequesting=!1,n.challenge=(0,r.Z)({},s||fi.challenge),n.challenge.opponentInfo=e.challenge.opponentInfo;break;case si:n.isRequesting=!1,n.challenge=fi.challenge;break;case ai:n.group.status=hi,a&&(n.group.opponentInfo=a);break;case oi:n.group.status=di;break;case"MATCH_ONLINE_DATA_CLEAR":n.online.status=fi.online.status,n.online.players=fi.online.players;break;case li:n.online.status=hi,n.online.players=o;break;case"MATCH_ONLINE_FINISH_REQUEST":n.online.status=di}}}))},stats:function(e,t){return void 0===e&&(e=vi),(0,yn.ZP)(e,(function(n){var i=t.payload;if(i){var s=i.playerId,a=i.stats,o=i.match,c=i.current,l=i.players,u=i.leaders;switch(t.type){case Kn:delete n.data[s],n.current=vi.current;break;case"MATCH_STATS_CONTEXT_REQUEST":n.data=vi.data,n.isRequesting=!0;break;case"MATCH_STATS_CONTEXT_RECEIVED":n.data=a,n.isRequesting=!1;break;case jn:n.data[s]=a;break;case Xn:n.current=(0,Ln.TS)((0,r.Z)({},e.current),a);break;case li:te()(l).forEach((function(e){n.data[e]={score:0}}));break;case"MATCH_ONLINE_STATS_UPDATE":u.forEach((function(e){var t=e.playerId,i=e.score,r=e.rank;n.data[t]={score:i,rank:r}}));break;case ri:var h=o||{},d=h.blackPlayerId,p=h.blackPlayerScore,f=h.whitePlayerId,v=h.whitePlayerScore,m=h.whitePlayerLevel,g=h.blackPlayerLevel;if(!d||!f)break;c&&(n.current=c),n.data[d]={score:p,level:g},n.data[f]={score:v,level:m}}}}))}}),An),gi="TOURNAMENT_ACTIVE",yi={active:!1,tournamentId:null,bestSessionScore:0,isRequesting:!1},Ei=(Tn={},Tn.tournament=function(e,t){return void 0===e&&(e=yi),(0,yn.ZP)(e,(function(n){var i=t.payload;if(i){var r=i.score,s=void 0===r?0:r,a=i.tournamentId;switch(t.type){case gi:n.active=!0,n.tournamentId=a;break;case"TOURNAMENT_REQUEST":n.isRequesting=!0;break;case"TOURNAMENT_RECEIVED":n.isRequesting=!1,s>e.bestSessionScore&&(n.bestSessionScore=s)}}}))},Tn),Si=n(455),wi=n.n(Si),Ii=n(131),Ai=n.n(Ii),Ti={leaderboardId:"",type:"",limit:0,offset:0,leaders:{},isRequesting:!1},Ci=(Cn={},Cn.leaderboards=function(e,t){return void 0===e&&(e=Ti),(0,yn.ZP)(e,(function(n){var i=t.payload;if(i){var s=i.leaderboardId,a=i.type,o=i.limit,c=i.offset,l=i.leaders;switch(t.type){case"LEADERBOARD_DATA_REQUEST":e.type!==a&&0===c&&(n.leaders=Ti.leaders),n.isRequesting=!0,n.leaderboardId=s,n.type=a,n.limit=o,n.offset=c;break;case"LEADERBOARD_DATA_UPDATE":if(n.isRequesting=!1,e.type!==a)break;var u=GameCore.Utils.Json.clone((0,r.Z)({},e.leaders,l)),h=wi()(u),d=_e()(h).call(h,(function(e){return!!e.name&&!!e.photo}));Ai()(d).call(d,(function(e,t){return+t.score-+e.score})),d.forEach((function(t,i){t.rank=i+1,e.leaders[t.playerId]||(n.leaders[t.playerId]=t)}));break;case"LEADERBOARD_DATA_CLEAR":n.isRequesting=!1,n.type=Ti.type,n.limit=Ti.limit,n.offset=Ti.offset,n.leaders=Ti.leaders,n.leaderboardId=Ti.leaderboardId}}}))},Cn),bi="missions",Pi="MISSIONS_DATA_REQUEST",xi="MISSIONS_DATA_RECEIVE",Ri="MISSION_UPDATE",Oi="MISSION_COMPLETED",_i={mission:null,missions:null,isRequesting:!1},ki=(bn={},bn[bi]=function(e,t){return void 0===e&&(e=_i),(0,yn.ZP)(e,(function(n){var i,r,s=t.payload;if(s){var a=s.name,o=s.type,c=s.value,l=s.missions;switch(t.type){case Pi:n.isRequesting=!0;break;case xi:if(n.isRequesting=!1,l.length<1)return;n.missions={},l.forEach((function(e){n.missions[e.name]=e}));break;case"MISSION_START":if(null===e.missions)break;var u=e.missions[a];n.mission={name:a,process:{},require:u.require,reward:u.reward},te()(u.require).forEach((function(e){n.mission.process[e]=0}));break;case Ri:if((null==(i=e.mission)?void 0:i.name)!==a)break;n.mission.process[o]+=c;break;case Oi:if((null==(r=e.mission)?void 0:r.name)!==a)break;n.mission=null}}}))},bn),Di="dailyTasks",Li="DAILY_TASKS_DATA_REQUEST",Bi="DAILY_TASKS_DATA_RECEIVE",Ni="DAILY_TASKS_PROCESS_UPDATE",Hi="DAILY_TASK_VALUE_ADD",Mi="DAILY_TASK_FINISHED",Gi={tasks:[],process:[],isRequesting:!1,isNotice:!1},Wi=(Pn={},Pn[Di]=function(e,t){return void 0===e&&(e=Gi),(0,yn.ZP)(e,(function(n){var i=t.payload;if(i){var r=i.id,s=i.type,a=i.value,o=i.tasks,c=i.process;switch(t.type){case Li:n.isRequesting=!0;break;case Bi:n.isRequesting=!1,n.tasks=o;break;case Ni:n.process=c;break;case Hi:if(!e.process[r])break;n.process[r][s]+=a;break;case"DAILY_TASK_REWARDED":if(!e.process[r])break;n.process[r].rewarded=!0;break;case"DAILY_TASKS_SEEN":n.isNotice=!1;break;case Mi:n.isNotice=!0}}}))},Pn),Ui="dailyRewards",Fi="DAILY_REWARDS_REQUEST",Zi="DAILY_REWARDS_RECEIVE",Yi={rewards:[],isRequesting:!1},Vi=(xn={},xn[Ui]=function(e,t){return void 0===e&&(e=Yi),(0,yn.ZP)(e,(function(e){var n=t.payload;if(n){var i=n.rewards;switch(t.type){case Fi:e.isRequesting=!0;break;case Zi:e.isRequesting=!1,e.rewards=i}}}))},xn),zi=(0,mn.UY)((0,r.Z)({scene:function(e,t){return void 0===e&&(e=En),(0,yn.ZP)(e,(function(n){var i=t.payload;if(i){var r=i.sceneKey;if(t.type===gn.DW)n.currentSceneKey=r,n.prevSceneKey=e.currentSceneKey}}))},context:function(e,t){return void 0===e&&(e=Rn),(0,yn.ZP)(e,(function(e){var n=t.payload;if(n){var i=n.gameMode,r=n.contextId,s=n.contextType,a=n.entryPointData;switch(t.type){case gn.kL:e.contextId=r,e.contextType=s,e.entryPointData=a;break;case gn.fJ:e.contextId=r,e.contextType=s,e.processed=!0;break;case gn.EH:e.currentGameMode=i}}}))},messages:function(e,t){return void 0===e&&(e=_n),(0,yn.ZP)(e,(function(n){var i=t.payload;if(i){var r=i.opponentId;if("string"===typeof r)switch(t.type){case gn.qj:e.data[r]?n.data[r].sent=!0:n.data[r]={sent:!0};break;case gn.rh:e.data[r]?n.data[r].sent=!1:n.data[r]={sent:!1}}}}))}},Dn,Nn,Wn,mi,Ei,Ci,ki,Wi,Vi)),Ki=zi,ji=n(617),Xi=function(e){return(0,ji.xC)({reducer:Ki,preloadedState:e,devTools:!0})},Qi=function(e){function t(){for(var t,n,i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return(n=e.call.apply(e,x()(t=[this]).call(t,r))||this).store=void 0,n.initiator=void 0,n.dispatch=function(e){return n.store.dispatch(e)},n.getState=function(){return n.store.getState()},n.subscribe=function(e){return n.store.subscribe(e)},n.watch=function(e,t){var i=vn()((function(){var t=n.getState();return e(t)}));return n.subscribe(i((function(e){t(e)})))},n}(0,o.Z)(t,e);var n=t.prototype;return n.init=function(){this.store=Xi({})},n.setInitiator=function(e){this.initiator=e},n.syncStore=function(){var e=(0,a.Z)(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.initiator.initContext(),e.next=3,this.initiator.initPlayer();case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.initPlayerManually=function(){var e=(0,a.Z)(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.initiator.initPlayer();case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),t}(Phaser.Plugins.BasePlugin),qi=Qi,Ji=n(607),$i=n.n(Ji),er=function(e){function t(t,n){var i;return(i=e.call(this,t,{type:"webfont",key:n.type})||this).payload=void 0,i.payload=n,i}(0,o.Z)(t,e);var n=t.prototype;return n.load=function(){var e;switch(this.payload.type){case"google":e=this.getGoogleFontConfig(this.payload);break;case"local":e=this.getLocalFontConfig(this.payload)}$i().load(e)},n.getGoogleFontConfig=function(e){var t=this,n=e.character,i=e.fontName,r=e.fontWeight;return{google:{families:[i+":"+(void 0===r?400:r)],text:n},active:function(){t.loader.nextFile(t,!0)},timeout:15e3}},n.getLocalFontConfig=function(e){var t=this,n=e.fontName,i=e.fontType,r=document.createElement("style");document.head.appendChild(r);var s=r.sheet;if(s){var a=".otf";switch(i){case"truetype":a=".ttf";break;case"woff2":a=".woff2";break;default:a=".otf"}var o='@font-face { font-family: "'+n+'"; src: url("assets/fonts/'+n+a+'") format("'+i+'"); }';s.insertRule(o,0)}return{custom:{families:[n]},active:function(){t.loader.nextFile(t,!0)},timeout:15e3}},t}(Phaser.Loader.File),tr=er,nr=function(e){function t(){return e.apply(this,arguments)||this}return(0,o.Z)(t,e),t.prototype.addFont=function(e){var t=new tr(this.scene.load,e);this.scene.load.addFile(t)},t}(Phaser.Plugins.ScenePlugin),ir=nr,rr=function(e){function t(){for(var t,n,i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return(n=e.call.apply(e,x()(t=[this]).call(t,r))||this).isVisible=!0,n.browserPrefixes=["moz","ms","o","","webkit"],n.visibleCallbacks=[],n.hiddenCallbacks=[],n.handleVisibilityChange=function(e){if("boolean"===typeof e)return e?n.onVisibleEvent():n.onHiddenEvent();var t=n.getBrowserPrefix(),i=n.getHiddenPropertyName(t);return document[i]?n.onHiddenEvent():n.onVisibleEvent()},n}(0,o.Z)(t,e);var n=t.prototype;return n.configure=function(){var e=this,t=this.getBrowserPrefix(),n=this.getVisibilityEvent(t);document.addEventListener(n,this.handleVisibilityChange,!1),document.addEventListener("focus",(function(){e.handleVisibilityChange(!0)}),!1),document.addEventListener("blur",(function(){e.handleVisibilityChange(!1)}),!1),window.addEventListener("focus",(function(){e.handleVisibilityChange(!0)}),!1),window.addEventListener("blur",(function(){e.handleVisibilityChange(!1)}),!1)},n.addEventVisible=function(e){this.visibleCallbacks.push(e)},n.addEventHidden=function(e){this.hiddenCallbacks.push(e)},n.isGameVisible=function(){return this.isVisible},n.getHiddenPropertyName=function(e){return e?e+"Hidden":"hidden"},n.getVisibilityEvent=function(e){return(e||"")+"visibilitychange"},n.getBrowserPrefix=function(){for(var e=0;e<this.browserPrefixes.length;e++)if(this.getHiddenPropertyName(this.browserPrefixes[e])in document)return this.browserPrefixes[e];return""},n.onVisibleEvent=function(){this.isVisible||(this.isVisible=!0,this.visibleCallbacks.forEach((function(e){e()})))},n.onHiddenEvent=function(){this.isVisible&&(this.isVisible=!1,this.hiddenCallbacks.forEach((function(e){e()})))},t}(Phaser.Plugins.BasePlugin),sr=rr,ar=n(197),or=function(e){function t(){return e.apply(this,arguments)||this}return(0,o.Z)(t,e),t.prototype.emit=function(t){return e.prototype.emit.call(this,t)},t}(Phaser.Events.EventEmitter),cr=or,lr=function(e){function t(){for(var t,n,i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return(n=e.call.apply(e,x()(t=[this]).call(t,r))||this).events=void 0,n.previousLayout=void 0,n.resizeEventData=void 0,n.portraitRatio=void 0,n.portraitWidth=void 0,n.portraitHeight=void 0,n.orientationThreshold=void 0,n.landscapeRatio=void 0,n.landscapeWidth=void 0,n.landscapeHeight=void 0,n.maxLandscapeWidth=void 0,n.worldWidth=void 0,n.worldHeight=void 0,n.worldRatio=void 0,n.autoResize=void 0,n.disableLandscape=void 0,n.fullSizeOnLandscape=void 0,n.currentLayout=void 0,n.forcePixelRatio=void 0,n.handleResize=(0,ar.D)((function(){n.previousLayout=""+n.currentLayout,n.game.events.emit("world-resize"),n.resize()}),300),n}(0,o.Z)(t,e);var n=t.prototype;return n.configure=function(e){this.events=new cr;var t=e.autoResize,n=e.portraitRatio,i=e.portraitWidth,r=e.portraitHeight,s=e.orientationThreshold,a=e.landscapeWidth,o=e.maxLandscapeWidth,c=e.landscapeHeight,l=e.landscapeRatio,u=e.disableLandscape,h=e.fullSizeOnLandscape;this.autoResize=t,this.disableLandscape=u,this.fullSizeOnLandscape=h,this.portraitRatio=n,this.portraitWidth=i,this.portraitHeight=r,this.orientationThreshold=s,this.landscapeRatio=l,this.landscapeWidth=a,this.landscapeHeight=c,this.maxLandscapeWidth=o,this.initWorldSize(),this.addEventResize()},n.resize=function(e){var t=this;e&&e>0&&(this.forcePixelRatio=e);var n=this.getCanvasSizeFixedRatio(this.worldRatio),i=n.width,r=n.height;this.resizeCanvas(i,r),this.game.scene.scenes.forEach((function(e){var n=e.cameras.main;if(n){var i=t.getZoomRatio(),r=t.getWorldSize(),s=r.width,a=r.height;n.setZoom(i),n.centerOn(s/2,a/2)}}));var s={width:this.worldWidth,height:this.worldHeight,isLayoutChanged:!1,newLayout:this.currentLayout};this.previousLayout!==this.currentLayout&&(s.isLayoutChanged=!0,s.newLayout=this.currentLayout),this.resizeEventData=s,this.events.emit(cn.Z.RESIZE,s)},n.getResizeEventData=function(){return this.resizeEventData},n.resizeCanvas=function(e,t){this.game.canvas.width=e,this.game.canvas.height=t,this.game.scale.resize(e,t)},n.getWorldSize=function(){return{width:this.worldWidth,height:this.worldHeight}},n.initWorldSize=function(){if(this.worldWidth=this.portraitWidth,this.worldHeight=this.portraitHeight,this.isScreenSmallerRatio(this.portraitRatio))this.worldHeight=this.worldWidth/this.getScreenRatio(),this.currentLayout="portrait";else if(this.isScreenSmallerRatio(this.orientationThreshold))this.worldWidth=this.worldHeight*this.getScreenRatio(),this.currentLayout="portrait";else if(!this.disableLandscape)if(this.worldWidth=this.landscapeWidth,this.worldHeight=this.landscapeHeight,this.currentLayout="landscape",this.fullSizeOnLandscape){this.worldRatio=this.worldWidth/this.worldHeight,this.landscapeRatio=this.getScreenRatio();var e=this.getCanvasSizeFixedRatio(this.landscapeRatio),t=e.width,n=e.height,i=this.getZoomRatio();this.worldWidth=t/i,this.worldHeight=n/i}else{var r=this.getScreenRatio();r>this.maxLandscapeWidth/this.landscapeHeight?this.worldWidth=this.maxLandscapeWidth:r>this.landscapeWidth/this.landscapeHeight&&(this.worldWidth=this.landscapeHeight*r)}this.worldRatio=this.worldWidth/this.worldHeight},n.getZoomRatio=function(){var e=this.getWorldSize().width;return this.getCanvasSizeFixedRatio(this.worldRatio).width/e},n.getPixelRatio=function(){if(this.forcePixelRatio>0)return this.forcePixelRatio;if(GameCore.Utils.Device.isDesktop())return 2;var e=GameCore.Utils.Device.pixelRatio();return e<1&&(e=1),e>3&&(e=3),e=Math.round(e)},n.getPixelRatioForCanvas=function(){var e=GameCore.Utils.Device.pixelRatio();if(this.forcePixelRatio>0&&(e=this.forcePixelRatio),GameCore.Utils.Device.isDesktop())return Math.min(2,1200/this.getScreenHeight());var t=Math.max(1,e),n=1080/this.getScreenWidth(!0);return t>2&&(t=Math.min(Math.round(2*t)/2,n)),t},n.getPhysicPixels=function(e,t){return e*t},n.getCanvasSizeFixedRatio=function(e){var t=this.getPixelRatioForCanvas(),n=this.getScreenWidth(!0)*t,i=this.getScreenHeight()*t;return this.isScreenSmallerRatio(e)?i=n/e:n=i*e,{width:n,height:i}},n.getScreenRatio=function(){return this.getScreenWidth(!0)/this.getScreenHeight()},n.getScreenHeight=function(){var e=document,t=e.body,n=e.documentElement,i=t.clientHeight,r=n.clientHeight;return Math.max(r,i)||0},n.getScreenWidth=function(e){void 0===e&&(e=!1);var t=document,n=t.body,i=t.documentElement,r=n.clientWidth,s=i.clientWidth,a=Math.max(s,r)||0;return e?Math.max(0,a-180):a},n.isScreenSmallerRatio=function(e){return this.getScreenRatio()<e},n.addEventResize=function(){this.autoResize&&window.addEventListener("resize",this.handleResize)},n.isLandscape=function(){return!this.disableLandscape&&this.worldRatio>this.orientationThreshold},n.isPortrait=function(){return!!this.disableLandscape||this.worldRatio<=this.portraitRatio},t}(Phaser.Plugins.BasePlugin),ur=lr,hr=function(){function e(e,t,n){this.contextId=void 0,this.contextType=void 0,this.entryPointData=void 0,this.contextId=e||On.contextId,this.contextType=t||On.contextType,this.entryPointData=n||On.entryPointData}return e.prototype.toObject=function(){return{contextId:this.contextId,contextType:this.contextType,entryPointData:this.entryPointData}},e}(),dr=hr,pr=function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).name="InvalidPlayerId",i.message=t||"The playerId is not valid",i.payload=n,i}return(0,o.Z)(t,e),t}((0,W.Z)(Error)),fr=pr,vr="share_invite",mr="challenge_friend_match",gr=n(201),yr=new nt.Z("10","Your Friend",gr.Z.AVATAR.FILE).toObject(),Er="single",Sr="challenge-friends",wr="matching-group",Ir="tournaments",Ar=(0,de.P1)([function(e){return e.context}],(function(e){return e})),Tr=(0,de.P1)([function(e){return e.context.currentGameMode}],(function(e){return e})),Cr=function(e,t){return{type:gn.fJ,payload:{contextId:e,contextType:t}}},br=function(e){return function(t){t({type:gn.EH,payload:{gameMode:e}}),(0,i.sw)("game-mode",e)}},Pr={score:"score",settings:"settings",gameData:"gameData",userGuideDisplays:"userGuideDisplays"},xr=GameCore.Configs.SyncProfileFromAPI,Rr=function(e){var t=this;this.game=void 0,this.initContext=function(){var e=window.GameSDK.context.getID(),n=window.GameSDK.context.getType(),i=window.GameSDK.getEntryPointData(),r=new dr(e,n,i).toObject(),s=r.contextId,a=r.contextType,o=r.entryPointData;t.game.storage.dispatch(function(e,t,n){return{type:gn.kL,payload:{contextId:e,contextType:t,entryPointData:n}}}(s,a,o))},this.initPlayer=(0,a.Z)(h().mark((function e(){var n,i,r,s,a;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.game.player,i=t.getPlayerInfo(),r=wi()(Pr),e.next=5,FBInstant.player.getDataAsync(r);case 5:return s=e.sent,a=new Ve(s),e.next=11,t.maintainDataStructure(a);case 11:return a=e.sent,!0===a.toObject().settings.music&&window.game.audio.playMusic(),e.next=16,n.receiveData(i,a.convertToPlayerData());case 16:case"end":return e.stop()}}),e)}))),this.maintainDataStructure=function(){var e=(0,a.Z)(h().mark((function e(t){var n,i,s,a;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,xr){e.next=3;break}return e.abrupt("return",t);case 3:return e.next=5,FBInstant.player.getDataAsync(["isSynced","customFields"]);case 5:if(e.t0=e.sent,e.t0){e.next=8;break}e.t0={};case 8:if(n=e.t0,!0!==(n.isSynced||!1)){e.next=12;break}return e.abrupt("return",t);case 12:if(i=n.customFields||!1){e.next=15;break}return e.abrupt("return",t);case 15:return(s=t.convertToPlayerData()).customFields=i,a=new Ve({}).convertToFacebookData(s),e.next=20,FBInstant.player.setDataAsync((0,r.Z)({},a,{isSynced:!0}));case 20:return e.abrupt("return",new Ve(a));case 23:return e.prev=23,e.t1=e.catch(0),e.abrupt("return",t);case 27:case"end":return e.stop()}}),e,null,[[0,23]])})));return function(t){return e.apply(this,arguments)}}(),this.getPlayerInfo=function(){try{var e=window.GameSDK.player.getID(),t=window.GameSDK.player.getName(),n=window.GameSDK.player.getPhoto(),i=window.GameSDK.getLocale();if(!GameCore.Utils.Valid.isString(e))throw new fr(null,{playerId:e});return GameCore.Utils.Valid.isString(t)||(t="You"),new nt.Z(e,t,n,i).toObject()}catch(r){return new nt.Z("123","You").toObject()}},this.game=e},Or=n(442),_r=function(e){function t(){for(var t,n,i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return(n=e.call.apply(e,x()(t=[this]).call(t,r))||this).Text=void 0,n.Texture=void 0,n.currentLocale=void 0,n.supportedLanguages=void 0,n.data=void 0,n.options=void 0,n}(0,o.Z)(t,e);var n=t.prototype;return n.configure=function(e){this.applyOptions(e)},n.getCurrentLanguage=function(){return this.currentLocale},n.switchLanguage=function(e){void 0===e&&(e="en");var t=this.getCorrectLocale(e);this.currentLocale=t,this.Text=this.data[t].Text,this.Texture=this.data[t].Texture},n.getText=function(e){if("object"==typeof e){var t=e.key,n=e.variables,i=void 0===n?[]:n,r=e.locale,s=void 0===r?this.currentLocale:r,a=this.getCorrectLocale(s),o=this.data[a].Text[t];return this.replaceVariables(o,i)}return this.Text[e]},n.getTexture=function(e){if("object"==typeof e){var t=e.key,n=e.variables,i=void 0===n?[]:n,r=e.locale,s=void 0===r?this.currentLocale:r,a=this.getCorrectLocale(s),o=this.data[a].Texture[t];return this.replaceVariables(o,i)}return this.Texture[e]},n.isSupportLanguage=function(e){var t;return Zt()(t=this.supportedLanguages).call(t,e)>=0},n.applyOptions=function(e){this.options=(0,r.Z)({},e);var t=e.data,n=e.locale,i=void 0===n?"en":n,s=e.upperCaseText,a=void 0!==s&&s;this.data=t,this.supportedLanguages=te()(t);var o=this.getCorrectLocale(i);if(this.currentLocale=o,this.Text=t[o].Text,this.Texture=t[o].Texture,a)for(var c in this.Text)this.Text[c]=this.Text[c].toUpperCase()},n.makeText=function(e,t){var n,i=t.maxWidth,r=void 0===i?Phaser.Math.MAX_SAFE_INTEGER:i,s=t.maxHeight,a=void 0===s?Phaser.Math.MAX_SAFE_INTEGER:s,o=t.align,c=void 0===o?"center":o,l=t.drawMaxBoxDebug,u=void 0!==l&&l,h=e.make.bitmapText(t);for("center"===c?h.setCenterAlign():"left"===c?h.setLeftAlign():"right"===c&&h.setRightAlign(),Zt()(n=t.text||"").call(n," ")>=0&&h.setMaxWidth(r);h.width>r||h.height>=a;)h.setFontSize(.95*h.fontSize);if(u&&GameCore.Utils.Valid.isDebugger()){var d=e.game.globalScene.add.graphics({lineStyle:{width:2,color:16711680}});d.setDepth(Phaser.Math.MAX_SAFE_INTEGER),e.game.globalScene.events.on(Phaser.Scenes.Events.UPDATE,(function(){if(d.clear(),h&&h.visible&&h.active){var e=h.getWorldPosition(),t=e.x,n=e.y;d.strokeRect(t-.5*r+(.5-h.originX)*h.width,n-.5*a+(.5-h.originY)*h.height,r,a)}}))}return h},n.setFontSize=function(e,t,n){var i,r=t||Phaser.Math.MAX_SAFE_INTEGER,s=n||Phaser.Math.MAX_SAFE_INTEGER;for(Zt()(i=e.text||"").call(i," ")>=0&&e.setMaxWidth(r);e.width>r||e.height>=s;)e.setFontSize(.95*e.fontSize)},n.replaceVariables=function(e,t){var n=t.length;if(0==n)return e;var i=0;return e.replace(/{.*}/,(function(){return String(t[Math.min(i++,n-1)])}))},n.getCorrectLocale=function(e){var t=e;return this.isSupportLanguage(e)||(t="en"),t},t}(Phaser.Plugins.BasePlugin),kr=JSON.parse('{"Text":{"empty_{X}":"empty_{X}"},"Texture":{"empty_2_{abc}":"empty_2_{abc}"}}'),Dr={en:kr},Lr=Dr,Br=function(e){function t(){return e.apply(this,arguments)||this}return(0,o.Z)(t,e),t.prototype.configure=function(t){e.prototype.configure.call(this,(0,r.Z)({data:Lr,locale:"en",upperCaseText:!1},t))},t}(_r),Nr=Br,Hr=GameCore.Ads.Types,Mr=[Z._.SCREEN_OPEN],Gr=function(e){function t(t,n){var i;(i=e.call(this,"GoogleAnalytics",(0,r.Z)({},n),"#E35335")||this).game=void 0,i.trackingId=void 0,i.currentPath="/";var s=n.trackingId;i.game=t;var a=(GameCore.Configs.Analytics.GoogleAnalytics||{}).consoleLog;return i.selfLog=!!a,i.trackingId=s,i}(0,o.Z)(t,e);var n=t.prototype;return n.processEvent=function(e,t,n){if(!(Zt()(Mr).call(Mr,e)>=0)){var i=this.formatEventName(e),s=t?(0,r.Z)({},t):{};s=n?(0,r.Z)({},s,{value:n}):s,s=(0,r.Z)({},s,{page_path:this.currentPath,send_to:"GA"}),gtag("event",i,s)}},n.processLevelStart=function(e,t,n){this.processEvent(Z._.LEVEL_START,{level:e,score:t,level_name:n})},n.processLevelRescue=function(e,t,n){this.processEvent(Z._.LEVEL_RESCUE,{level:e,score:t,level_name:n})},n.processLevelFail=function(e,t,n){this.processEvent(Z._.LEVEL_END,{level:e,score:t,level_name:n,success:!1})},n.processLevelComplete=function(e,t,n){this.processEvent(Z._.LEVEL_END,{level:e,score:t,level_name:n,success:!0})},n.processLoadPreRollAd=function(e,t){var n=this.getEdaType(Hr.PRE_ROLL);this.processEvent(Z._.AD_LOAD,{ad_type:n,screen_name:""+e,ad_service:""+t})},n.processShowPreRollAd=function(e,t){var n=this.getEdaType(Hr.PRE_ROLL);this.processEvent(Z._.AD_SHOW,{ad_type:n,screen_name:""+e,ad_service:""+t}),this.processEvent(Z._.AD_IMPRESSION,{ad_format:n})},n.processLoadInterstitialAd=function(e,t){var n=this.getEdaType(Hr.INTERSTITIAL);this.processEvent(Z._.AD_LOAD,{ad_type:n,screen_name:""+e,ad_service:""+t})},n.processShowInterstitialAd=function(e,t){var n=this.getEdaType(Hr.INTERSTITIAL);this.processEvent(Z._.AD_SHOW,{ad_type:n,screen_name:""+e,ad_service:""+t}),this.processEvent(Z._.AD_IMPRESSION,{ad_format:"Interstitial"})},n.processLoadRewardedVideoAd=function(e,t){var n=this.getEdaType(Hr.REWARDED);this.processEvent(Z._.AD_LOAD,{ad_type:n,screen_name:""+e,ad_service:""+t})},n.processShowRewardedVideoAd=function(e,t){var n=this.getEdaType(Hr.REWARDED);this.processEvent(Z._.AD_SHOW,{ad_type:n,screen_name:""+e,ad_service:""+t}),this.processEvent(Z._.AD_IMPRESSION,{ad_format:"Rewarded"})},n.processShowBannerAd=function(e,t,n){var i=this.getEdaType(Hr.BANNER);this.processEvent(Z._.AD_SHOW,{ad_type:i,banner_position:""+e,screen_name:""+t,ad_service:""+n})},n.processLoadAdFail=function(e){var t=e.type,n=e.placement,i=e.adService,r=this.getEdaType(t);this.processEvent(Z._.AD_LOAD_FAILED,{ad_type:r,screen_name:""+n,ad_service:""+i})},n.processShowAdFail=function(e){var t=e.type,n=e.placement,i=e.adService,r=e.bannerPosition,s={ad_type:this.getEdaType(t),screen_name:""+n,ad_service:""+i};t===Hr.BANNER&&(s.banner_position=""+r),this.processEvent(Z._.AD_SHOW_FAILED,s)},n.processPageView=function(e){var t=this.getGameplayMode(),n="/"+t+"/"+e;this.currentPath=n,document.title=this.formatPageTitle(t,e),gtag("event","page_view",{page_path:this.currentPath,send_to:["GA",this.trackingId]})},n.getGameplayMode=function(){var e=this.game.storage.getState();return Tr(e)},n.formatEventName=function(e){return e.toLowerCase().replace(/:/g,"_")},n.formatPageTitle=function(e,t){return this.toUpperCamelCaseWithSpace(e)+"::"+this.toUpperCamelCaseWithSpace(t)},n.toUpperCamelCaseWithSpace=function(e){var t=e.replace(/[-_\s.]+(.)?/g,(function(e,t){return t?" "+t.toUpperCase():""}));return t.substr(0,1).toUpperCase()+t.substr(1)},n.getEdaType=function(e){switch(e){case Hr.INTERSTITIAL:return"interstitial";case Hr.PRE_ROLL:return"pre_roll";case Hr.REWARDED:return"rewarded_video";case Hr.BANNER:return"banner";default:return"unknown"}},n.processPurchase=function(e,t,n,i){this.processEvent(Z._.PURCHASE,{currency:e,transaction_id:t,value:n,items:i})},n.processPurchaseCancel=function(e,t){this.processEvent(Z._.PURCHASE_CANCEL,{reason:e,items:t})},n.processViewItemList=function(e,t,n){this.processEvent(Z._.VIEW_ITEM_LIST,{item_list_id:e,item_list_name:t,items:n})},n.processSelectItem=function(e,t,n){this.processEvent(Z._.SELECT_ITEM,{item_list_id:e,item_list_name:t,items:n})},n.processViewItem=function(e,t,n){this.processEvent(Z._.VIEW_ITEM,{currency:e,value:t,items:n})},n.processBeginCheckout=function(e,t,n){this.processEvent(Z._.BEGIN_CHECKOUT,{currency:e,value:t,items:n})},t}(GameCore.Analytics.BaseAnalytics),Wr=Gr,Ur="G-2N2GVF7N1W",Fr="null",Zr=function(e){function t(){for(var t,n,r=arguments.length,s=new Array(r),o=0;o<r;o++)s[o]=arguments[o];return(n=e.call.apply(e,x()(t=[this]).call(t,s))||this).startGame=(0,a.Z)(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n.auth.requestToken();case 3:return e.next=5,n.storage.syncStore();case 5:return n.configureSentry(),n.configureRollbar(),e.next=9,n.detectGameMode();case 9:return n.initGoogleAnalytics(),e.next=12,n.initAdServices();case 12:n.analytics.event(Z._.LOAD_START),n.scene.launch(Or.C.GLOBAL_SCENE),n.scene.start(Or.C.LOAD_SCENE),n.analytics.pageview(Or.C.LOAD_SCENE),e.next=21;break;case 18:e.prev=18,e.t0=e.catch(0),(0,i.tO)(e.t0);case 21:return e.prev=21,n.facebook.progressLoading.finishLoadingProgressFbBootScene(),n.scene.sleep(Or.C.BOOT_SCENE),e.finish(21);case 25:case"end":return e.stop()}}),e,null,[[0,18,21,25]])}))),n}(0,o.Z)(t,e);var n=t.prototype;return n.create=function(){this.facebook.progressLoading.loadingProgressFbBootScene(),this.startGame()},n.configureSentry=function(){var e=this.player.getPlayer();(0,i.Tv)({id:e.playerId,username:e.name})},n.configureRollbar=function(){if(this.rollbar){var e=this.player.getPlayer();this.rollbar.configure({payload:{person:{id:e.playerId,name:e.name}}})}},n.detectGameMode=function(){var e=(0,a.Z)(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.storage.dispatch(function(){var e=(0,a.Z)(h().mark((function e(t,n){var i,r,s,a,o,c,l,u,d,p,f,v,m,g,y,E;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n(),s=Ar(r),a=window.game.player,o=a.getPlayerId(),c=s.contextId,l=s.entryPointData,d=(u=l||{}).type,p=u.matchId,f=u.playerId,v=u.opponentId,m=void 0===v?yr.playerId:v,g=o===f,y=m===yr.playerId||Zt()(i=[m,f]).call(i,o)>=0,E=Er,e.prev=9,e.next=12,window.game.facebook.getTournamentAsync();case 12:E=Ir,e.next=17;break;case 15:e.prev=15,e.t0=e.catch(9);case 17:c&&d===vr&&!g&&(E=Sr),p&&c&&y&&d===mr&&(E=Sr),c&&"matching_group_match"===d&&(E=wr),t(br(E));case 21:case"end":return e.stop()}}),e,null,[[9,15]])})));return function(t,n){return e.apply(this,arguments)}}());case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.initGoogleAnalytics=function(){var e=this.player.getPlayerId();this.analytics.add(new Wr(this.game,{userId:e,trackingId:Fr,measuringId:Ur,version:"0"}))},n.runEntranceAnimation=function(){return l().resolve()},n.runExitAnimation=function(){return l().resolve()},n.initAdServices=function(){var e=(0,a.Z)(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.ads.configureAsync();case 3:this.logAdServiceStatus("loaded"),e.next=10;break;case 6:e.prev=6,e.t0=e.catch(0),(0,i.tO)(e.t0),this.logAdServiceStatus("failed");case 10:case"end":return e.stop()}}),e,this,[[0,6]])})));return function(){return e.apply(this,arguments)}}(),n.logAdServiceStatus=function(e){var t=GameCore.Configs.Ads,n=t.AdService,i=t.FallbackService;"msgames"===n&&this.analytics.event(Z._.AD_INIT,{adService:n,state:e}),"msgames"===i&&this.analytics.event(Z._.AD_INIT,{adService:i,state:e})},t}(Phaser.Scene),Yr=Zr,Vr=n(204),zr=function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).name="InvalidContextId",i.message=t||"This contextId is not valid",i.payload=n,i}return(0,o.Z)(t,e),t}((0,W.Z)(Error)),Kr=zr,jr="global",Xr="friend",Qr=GameCore.Configs,qr=Qr.ApiHost,Jr=Qr.OtherHost,$r=Qr.LeadersBoard,es=$r.Prefix,ts=$r.LeaderboardId,ns=$r.Name,is=es+"/"+ts+"/leaders",rs=es+"/"+ts+"/players",ss=function(e){var t="";return ts?(e===jr?t=is:e===Xr&&(t=rs),t):t},as=function(){var e=(0,a.Z)(h().mark((function e(t){var n,i,s,a,o,c;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=De()(t).call(t,(function(e){return e.playerId})),s=GameCore.Utils.Object.keyBy(t,"playerId"),a=GameCore.Utils.String.params({playerIds:i}),e.next=5,(0,ze.U)("players?"+a,{},qr);case 5:return o=e.sent,c=De()(n=o.data).call(n,(function(e){var t=s[e.playerId];return(0,r.Z)({},e,{score:t.score,rank:t.rank,getScore:function(){return t.score},getFormattedScore:function(){return""},getTimestamp:function(){return(new Date).valueOf()},getRank:function(){return t.rank},getExtraData:function(){return t.extraData},getPlayer:function(){return{getName:function(){return e.name},getPhoto:function(){return e.photo},getID:function(){return e.playerId}}}})})),e.abrupt("return",c);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),os=(function(){var e=(0,a.Z)(h().mark((function e(t){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===t&&(t={}),null==ts){e.next=3;break}return e.abrupt("return",os(t));case 3:return e.abrupt("return",cs(t));case 4:case"end":return e.stop()}}),e)})))}(),function(){var e=(0,a.Z)(h().mark((function e(t){var n,i,r,s,a;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===t&&(t={}),n=[],i=ss(jr)){e.next=5;break}return e.abrupt("return",n);case 5:return r=GameCore.Utils.String.params(t),e.next=8,(0,ze.U)(i+"?"+r,{},Jr);case 8:if(s=e.sent,!((a=(null==s?void 0:s.data)||[]).length<1)){e.next=12;break}return e.abrupt("return",n);case 12:return n=a,e.abrupt("return",as(n));case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),cs=function(){var e=(0,a.Z)(h().mark((function e(t){var n,i,r,s,a;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return void 0===t&&(t={}),i=(n=t).limit,r=n.offset,e.next=4,window.GameSDK.getLeaderboardAsync(ns);case 4:return s=e.sent,e.next=7,s.getEntriesAsync(i,r);case 7:return a=e.sent,e.abrupt("return",a);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ls=(function(){var e=(0,a.Z)(h().mark((function e(t){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===t&&(t={}),null==ts){e.next=3;break}return e.abrupt("return",ls(t));case 3:return e.abrupt("return",us(t));case 4:case"end":return e.stop()}}),e)})))}(),function(){var e=(0,a.Z)(h().mark((function e(t){var n,i,r,s,a;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===t&&(t={}),n=[],i=ss(Xr)){e.next=5;break}return e.abrupt("return",n);case 5:return r=GameCore.Utils.String.params(t),e.next=8,(0,ze.U)(i+"?"+r,{},Jr);case 8:if(s=e.sent,!((a=(null==s?void 0:s.data)||[]).length<1)){e.next=12;break}return e.abrupt("return",n);case 12:return n=a,e.abrupt("return",as(n));case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),us=function(){var e=(0,a.Z)(h().mark((function e(t){var n,i,r,s,a;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return void 0===t&&(t={}),i=(n=t).limit,r=n.offset,e.next=4,window.GameSDK.getLeaderboardAsync(ns);case 4:return s=e.sent,e.next=7,s.getConnectedPlayerEntriesAsync(i,r);case 7:return a=e.sent,e.abrupt("return",a);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),hs=(function(){var e=(0,a.Z)(h().mark((function e(t){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==ts){e.next=2;break}return e.abrupt("return",hs(t));case 2:return e.abrupt("return",ds());case 3:case"end":return e.stop()}}),e)})))}(),function(){var e=(0,a.Z)(h().mark((function e(t){var n,i,r,s,a;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=null,t){e.next=3;break}return e.abrupt("return",n);case 3:if(i=ss(Xr)){e.next=6;break}return e.abrupt("return",n);case 6:return r=GameCore.Utils.String.params({playerIds:t}),e.next=9,(0,ze.U)(i+"?"+r,{},Jr);case 9:if(s=e.sent,!((a=(null==s?void 0:s.data)||[]).length<1)){e.next=13;break}return e.abrupt("return",n);case 13:return e.next=15,as(a);case 15:return n=e.sent[0],e.abrupt("return",n);case 17:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),ds=function(){var e=(0,a.Z)(h().mark((function e(){var t,n;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,window.GameSDK.getLeaderboardAsync(ns);case 2:return t=e.sent,e.next=5,t.getPlayerEntryAsync();case 5:return n=e.sent,e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ps=function(){var e=(0,a.Z)(h().mark((function e(t,n){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(window.GameSDK.submitGameResultsAsync(n).catch((function(e){})),null==ts){e.next=5;break}if(""!==window.game.auth.getToken()){e.next=4;break}return e.abrupt("return",l().reject("Not logged in"));case 4:return e.abrupt("return",fs(t,n));case 5:return e.abrupt("return",vs(n));case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),fs=function(){var e=(0,a.Z)(h().mark((function e(t,n){var i;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,ze.v)("leaderboards/"+ts+"/players/"+t,{score:n},{},Jr);case 2:return i=e.sent,e.abrupt("return",(null==i?void 0:i.data)||{});case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),vs=function(){var e=(0,a.Z)(h().mark((function e(t){var n;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,window.GameSDK.getLeaderboardAsync(ns);case 2:return n=e.sent,e.next=5,n.setScoreAsync(t);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ms=function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).name="NewScoreIsBad",i.message=t||"The new score is bad",i.payload=n,i}return(0,o.Z)(t,e),t}((0,W.Z)(Error)),gs=ms,ys=function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).name="InvalidMatchId",i.message=t||"Invalid match id",i.payload=n,i}return(0,o.Z)(t,e),t}((0,W.Z)(Error)),Es=ys,Ss=function(e){return e[Un]},ws=(0,de.P1)([function(e){return Ss(e).gameplay.mode}],(function(e){return e})),Is=((0,de.P1)([function(e){return Ss(e).gameplay.status}],(function(e){return e})),(0,de.P1)([function(e){return Ss(e).gameplay.rescued}],(function(e){return e})),(0,de.P1)([function(e){return Ss(e).gameplay.startAt}],(function(e){return e}))),As=(0,de.P1)([function(e){return Ss(e).gameplay.finishAt}],(function(e){return e})),Ts=function(e,t){return t.playerId},Cs=((0,de.P1)([function(e){return Ss(e).match.isRequesting}],(function(e){return e})),(0,de.P1)([function(e){return Ss(e).match.single}],(function(e){return e}))),bs=(0,de.P1)([function(e){return Ss(e).match.single._id}],(function(e){return e})),Ps=(0,de.P1)([function(e){return Ss(e).match.single.score}],(function(e){return e||0})),xs=((0,de.P1)([function(e){return Ss(e).match.single.level}],(function(e){return e||0})),(0,de.P1)([function(e){var t;return null==(t=Ss(e).match.single.data)?void 0:t.diamond}],(function(e){return e||0})),(0,de.P1)([function(e){var t;return null==(t=Ss(e).match.single.data)?void 0:t.fen}],(function(e){return e||null})),(0,de.P1)([function(e){return Ss(e).match.single.status}],(function(e){return e})),(0,de.P1)([function(e){return Ss(e).match.single.playerId}],(function(e){return e})),(0,de.P1)([function(e){return Ss(e).match.challenge}],(function(e){return e}))),Rs=(0,de.P1)([function(e){return Ss(e).match.challenge._id}],(function(e){return e})),Os=(0,de.P1)([function(e){return Ss(e).match.challenge.status}],(function(e){return e})),_s=(0,de.P1)([function(e){return Ss(e).match.challenge.opponentInfo}],(function(e){return e})),ks=((0,de.P1)([function(e){return Ss(e).match.challenge.whitePlayerId}],(function(e){return e})),(0,de.P1)([function(e){return Ss(e).match.challenge.blackPlayerId}],(function(e){return e})),(0,de.P1)([xs,Ts],(function(e,t){var n=e.whitePlayerId,i=e.blackPlayerId;return n!==t&&i===t?n:i!==t&&n===t?i:""})),(0,de.P1)([xs,Ts],(function(e,t){var n=e.whitePlayerId,i=e.blackPlayerId;return n===t?n:i===t?i:yr.playerId}))),Ds=(0,de.P1)([xs,Ts],(function(e,t){var n=e.whitePlayerId,i=e.blackPlayerId,r=e.whitePlayerFinish,s=e.blackPlayerFinish;return t&&n===t?r:!(!t||i!==t)&&s})),Ls=((0,de.P1)([xs,function(e,t){return t.opponentId}],(function(e,t){var n=e.whitePlayerId,i=e.blackPlayerId,r=e.whitePlayerFinish,s=e.blackPlayerFinish;return t&&n===t?r:!(!t||i!==t)&&s})),(0,de.P1)([function(e){return Ss(e).match.group.opponentInfo}],(function(e){return e})),(0,de.P1)([function(e){return Ss(e).match.online.players}],(function(e){return e})),(0,de.P1)([function(e){return Ss(e).stats.data}],(function(e){return e})),(0,de.P1)([function(e){return Ss(e).stats.current}],(function(e){return e}))),Bs=((0,de.P1)([function(e){return Ss(e).stats.isRequesting}],(function(e){return e})),n(104)),Ns=n.n(Bs),Hs=function(e){try{var t=localStorage.getItem(e);return null===t?null:GameCore.Utils.Json.decode(t)}catch(n){return null}},Ms=function(e,t){try{var n=Hs(e),i={};GameCore.Utils.Valid.isObject(n)&&(i=n);var r=GameCore.Utils.Json.clone(t);if(!GameCore.Utils.Valid.isObject(r))return!1;var s=GameCore.Utils.Object.clear(r),a=(0,Ln.TS)(i,s),o=GameCore.Utils.Json.encode(a);return localStorage.setItem(e,o),!0}catch(c){return!1}},Gs=GameCore.Configs.ApiHost,Ws=(function(){var e=(0,a.Z)(h().mark((function e(t){var n;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"single-matches",e.next=3,(0,ze.v)("single-matches",t,{},Gs);case 3:return n=e.sent,e.abrupt("return",(null==n?void 0:n.data)||{});case 5:case"end":return e.stop()}}),e)})))}(),function(){var e=(0,a.Z)(h().mark((function e(){var t;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"single-matches/active",e.next=3,(0,ze.U)("single-matches/active",{},Gs);case 3:return t=e.sent,e.abrupt("return",(null==t?void 0:t.data)||{});case 5:case"end":return e.stop()}}),e)})))}(),function(){var e=(0,a.Z)(h().mark((function e(t,n){var i,r;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i="single-matches/"+t+"/move",e.next=3,(0,ze.v)(i,n,{},Gs);case 3:return r=e.sent,e.abrupt("return",(null==r?void 0:r.data)||{});case 5:case"end":return e.stop()}}),e)})))}(),function(){var e=(0,a.Z)(h().mark((function e(t){var n,i;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="single-matches/"+t+"/finish",e.next=3,(0,ze.v)(n,{},{},Gs);case 3:return i=e.sent,e.abrupt("return",(null==i?void 0:i.data)||{});case 5:case"end":return e.stop()}}),e)})))}(),function(){var e=(0,a.Z)(h().mark((function e(t){var n;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"matches",e.next=3,(0,ze.v)("matches",{opponentPlayerId:t},{},Gs);case 3:return n=e.sent,e.abrupt("return",(null==n?void 0:n.data)||{});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),Us=function(){var e=(0,a.Z)(h().mark((function e(t){var n,i;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="matches/"+t+"/join",e.next=3,(0,ze.v)(n,{},{},Gs);case 3:return i=e.sent,e.abrupt("return",(null==i?void 0:i.data)||{});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Fs=function(){var e=(0,a.Z)(h().mark((function e(t){var n,i;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="matches/"+t,e.next=3,(0,ze.U)(n,{},Gs);case 3:return i=e.sent,e.abrupt("return",(null==i?void 0:i.data)||{});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Zs=function(){var e=(0,a.Z)(h().mark((function e(t,n,i,r){var s,a;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s="matches/"+t+"/finish",e.next=3,(0,ze.v)(s,{matchId:t,score:n,level:i,extraData:r},{},Gs);case 3:return a=e.sent,e.abrupt("return",(null==a?void 0:a.data)||{});case 5:case"end":return e.stop()}}),e)})));return function(t,n,i,r){return e.apply(this,arguments)}}(),Ys=function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).name="InvalidMatchStatus",i.message=t||"The match status is not valid",i.payload=n,i}return(0,o.Z)(t,e),t}((0,W.Z)(Error)),Vs=function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).name="InvalidOpponentId",i.message=t||"Invalid opponent id",i.payload=n,i}return(0,o.Z)(t,e),t}((0,W.Z)(Error)),zs=function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).name="InvalidBlackPlayerId",i.message=t||"Invalid black player id",i.payload=n,i}return(0,o.Z)(t,e),t}((0,W.Z)(Error)),Ks=function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).name="InvalidRequestedMatchId",i.message=t||"The matchId in match data not matched with requested matchId",i.payload=n,i}return(0,o.Z)(t,e),t}((0,W.Z)(Error)),js=function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).name="InvalidWhitePlayerId",i.message=t||"Invalid white player id",i.payload=n,i}return(0,o.Z)(t,e),t}((0,W.Z)(Error)),Xs=function(e){var t=e.matchId,n=e.currentMatchId;if(""===t||"string"!==typeof t)throw new Es(null,{matchId:t});if(""===n||"string"!==typeof n)throw new Es(null,{currentMatchId:n});if(t!==n)throw new Ks(null,{matchId:t,currentMatchId:n})},Qs=function(e){var t=e.playerId,n=e.match,i=n._id,r=n.playerId,s=n.status;if(""===i||"string"!==typeof i)throw new Es(null,{matchId:i});if("finished"===s||"string"!==typeof s)throw new Ys("This match is finished",{status:s});if(r!==t)throw new fr(null,{playerId:r,currentPlayerId:t})},qs=function(e){var t=e.opponentId;if(""===t||"string"!==typeof t)throw new Vs(null,{opponentId:t})},Js=function(e){var t=e.matchId;if(""===t||"string"!==typeof t)throw new Es(null,{matchId:t})},$s=function(e){var t=e.match,n=t._id,i=t.whitePlayerId,r=t.blackPlayerId;if(""===n||"string"!==typeof n)throw new Es(null,{matchId:n});if(""===i||"string"!==typeof i)throw new js(null,{whitePlayerId:i});if(""===r||"string"!==typeof r)throw new zs(null,{blackPlayerId:r})},ea=GameCore.Configs.Match,ta=function(e){try{return GameCore.Utils.Hash.stringToHash(k()(e))}catch(t){return""}},na=function(e){try{return JSON.parse(GameCore.Utils.Hash.hashToString(e))}catch(t){return""}},ia=function(){return function(){var e=(0,a.Z)(h().mark((function e(t){var n,s,a;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.prev=0,n=window.game.player,t({type:Qn,payload:{}}),s=n.getPlayerId(),a=(0,r.Z)({},ea.LocalSingleMatchDefault,{status:"active",playerId:s,startedAt:Date.now()}),Qs({playerId:s,match:a}),t(sa(a)),Ms(ea.SingleMatchStore,a),e.next=18;break;case 10:if(e.prev=10,e.t0=e.catch(0),t(sa(null)),!(e.t0 instanceof Es)){e.next=15;break}return e.abrupt("return");case 15:if(!(e.t0 instanceof Ys)){e.next=17;break}return e.abrupt("return");case 17:(0,i.tO)(e.t0);case 18:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}()},ra=function(e){return function(){var t=(0,a.Z)(h().mark((function t(n,s){var a,o,c,l,u,d,p,f;return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:t.prev=0,a=window.game.player,Js({matchId:e}),o=s(),c=bs(o),l=a.getPlayerId(),Xs({matchId:e,currentMatchId:c}),n({type:"MATCH_SINGLE_FINISH_REQUEST",payload:{matchId:e}}),u=Cs(o),Qs({playerId:l,match:u}),d=(0,r.Z)({},ea.LocalSingleMatchDefault,u,{_id:e,status:"finished",playerId:l,finishAt:Date.now()}),n(sa(d)),p=d.data,(f=(0,r.Z)({},d)).data=ta(p),Ms(ea.SingleMatchStore,f),t.next=26;break;case 18:if(t.prev=18,t.t0=t.catch(0),n(sa(null)),!(t.t0 instanceof Es)){t.next=23;break}return t.abrupt("return");case 23:if(!(t.t0 instanceof Ys)){t.next=25;break}return t.abrupt("return");case 25:(0,i.tO)(t.t0);case 26:case"end":return t.stop()}}),t,null,[[0,18]])})));return function(e,n){return t.apply(this,arguments)}}()},sa=function(e){return{type:Jn,payload:{match:e}}},aa=function(){return{type:$n,payload:{}}},oa=function(e){return function(){var t=(0,a.Z)(h().mark((function t(n){var r,s,a,o;return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,r=window.game,s=r.profile,r.globalScene.screen.open(Vr.o4.NOTIFY_SCREEN,{message:"Loading...",loading:!0}),a=e.playerId,qs({opponentId:a}),n({type:ti,payload:{opponentInfo:e}}),t.next=8,Ws(a);case 8:return o=t.sent,$s({match:o}),t.next=12,s.requestProfiles([a]);case 12:n(ha(o)),t.next=23;break;case 15:if(t.prev=15,t.t0=t.catch(0),n(ha(null)),!(t.t0 instanceof Es)){t.next=20;break}return t.abrupt("return");case 20:if(!(t.t0 instanceof Vs)){t.next=22;break}return t.abrupt("return");case 22:(0,i.tO)(t.t0);case 23:case"end":return t.stop()}}),t,null,[[0,15]])})));return function(e){return t.apply(this,arguments)}}()},ca=function(e){return function(){var t=(0,a.Z)(h().mark((function t(n){var r,s,a,o,c,l,u,d,p;return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,r=window.game,s=r.player,a=r.profile,r.globalScene.screen.open(Vr.o4.NOTIFY_SCREEN,{message:"Loading...",loading:!0}),Js({matchId:e}),n({type:ei,payload:{matchId:e}}),t.next=7,Us(e);case 7:if(o=t.sent,$s({match:o}),c=o.status,l=o.whitePlayerId,u=o.blackPlayerId,c!==hi){t.next=16;break}return d=s.getPlayerId(),p=d===l?u:l,t.next=16,a.requestProfiles([p]);case 16:n(ha(o)),t.next=25;break;case 19:if(t.prev=19,t.t0=t.catch(0),n(ha(null)),!(t.t0 instanceof Es)){t.next=24;break}return t.abrupt("return");case 24:(0,i.tO)(t.t0);case 25:case"end":return t.stop()}}),t,null,[[0,19]])})));return function(e){return t.apply(this,arguments)}}()},la=function(e,t){return function(){var n=(0,a.Z)(h().mark((function n(r){var s,a,o,c,l,u,d,p,f;return h().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,s=window.game,a=s.player,s.globalScene,Js({matchId:e}),r({type:ii,payload:{matchId:e,opponentInfo:t}}),n.next=6,Fs(e);case 6:o=n.sent,$s({match:o}),c=o.whitePlayerId,l=o.whitePlayerScore,u=o.blackPlayerScore,d=a.getPlayerId(),p=a.getPlayerData(),f=p.score,r(ha(o,{score:d===c?l:u,bestScore:f})),n.next=22;break;case 16:if(n.prev=16,n.t0=n.catch(0),r(ha(null)),!(n.t0 instanceof Es)){n.next=21;break}return n.abrupt("return");case 21:(0,i.tO)(n.t0);case 22:case"end":return n.stop()}}),n,null,[[0,16]])})));return function(e){return n.apply(this,arguments)}}()},ua=function(e,t,n){return function(){var r=(0,a.Z)(h().mark((function r(s){var a,o;return h().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,window.game.globalScene.screen.open(Vr.o4.NOTIFY_SCREEN,{message:"Loading...",loading:!0}),Js({matchId:e}),s({type:ni,payload:{matchId:e,score:t,extraData:n}}),a=n.level,r.next=8,Zs(e,t,a,n);case 8:return o=r.sent,$s({match:o}),r.next=12,s(ha(o));case 12:r.next=20;break;case 14:if(r.prev=14,r.t0=r.catch(0),s(ha(null)),!(r.t0 instanceof Es)){r.next=19;break}return r.abrupt("return");case 19:(0,i.tO)(r.t0);case 20:return r.prev=20,window.game.globalScene.screen.close(Vr.o4.NOTIFY_SCREEN),r.finish(20);case 23:case"end":return r.stop()}}),r,null,[[0,14,20,23]])})));return function(e){return r.apply(this,arguments)}}()},ha=function(e,t,n){return void 0===n&&(n=null),{type:ri,payload:{match:e,opponentInfo:t,current:n}}},da=function(e){return{type:ai,payload:{opponentInfo:e}}},pa=function(e,t){return{type:li,payload:{matchId:e,players:t}}},fa=function(e){return{type:Kn,payload:{playerId:e}}},va=function(e,t){return{type:jn,payload:{playerId:e,stats:t}}},ma=function(e){return{type:Xn,payload:{stats:e}}},ga=function(e){var t=e.contextId;if(""===t||"string"!==typeof t)throw new Kr(null,{contextId:t})},ya=null,Ea=function(e){clearTimeout(ya),ya=setTimeout((function(){window.game.globalScene.screen.close(Vr.o4.NOTIFY_SCREEN)}),e)},Sa=function(){return function(){var e=(0,a.Z)(h().mark((function e(t){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t(aa());case 3:return e.next=5,t(Pa(Er));case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),(0,i.tO)(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()},wa=function(){return function(){var e=(0,a.Z)(h().mark((function e(t,n){var r,s,a,o,c;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,s=window.game.globalScene,a=n(),o=ws(a),Zt()(r=[Er,Ir]).call(r,o)>=0&&(t(aa()),t(ia())),c=null,o===Sr&&(s.screen.open(Vr.o4.NOTIFY_SCREEN,{message:"Loading...",loading:!0}),c=_s(a),t({type:si,payload:{}})),t(fa()),e.next=10,t(Pa(o,c));case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),(0,i.tO)(e.t0);case 15:return e.prev=15,Ea(300),e.finish(15);case 18:case"end":return e.stop()}}),e,null,[[0,12,15,18]])})));return function(t,n){return e.apply(this,arguments)}}()},Ia=function(e,t){return void 0===e&&(e="10"),void 0===t&&(t=!1),function(n){try{n(Aa("reset",e,t))}catch(r){(0,i.tO)(r)}}},Aa=function(e,t,n){return void 0===t&&(t="10"),void 0===n&&(n=!1),function(){var r=(0,a.Z)(h().mark((function r(s){var a,o,c,l,u,d,p,f,v,m,g,y,E,S,w,I,A;return h().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(r.prev=0,a=window.game,o=a.player,c=a.facebook,(l=a.globalScene).screen.open(Vr.o4.NOTIFY_SCREEN,{message:"Loading...",loading:!0}),u=e,d=c.contextType,t||(p=GameCore.Configs.PlayerIdMock,f=GameCore.Configs.PlayerIdMock2,t=o.getPlayerId()===p?f:p),e){r.next=15;break}return r.next=9,c.chooseAsync();case 9:if(!1!==(u=r.sent)){r.next=13;break}return n&&l.events.emit(Or.K.SWITCH,Or.C.DASHBOARD_SCENE),r.abrupt("return");case 13:r.next=25;break;case 15:if(!t||t===yr.playerId){r.next=23;break}return r.next=18,c.createAsync(t);case 18:if(!1!==(u=r.sent)){r.next=22;break}return n&&l.events.emit(Or.K.SWITCH,Or.C.DASHBOARD_SCENE),r.abrupt("return");case 22:u||"reset"===e||(u=e);case 23:d=c.contextType,s(Cr(u,d));case 25:return ga({contextId:u}),v=o.getPlayerId(),m=o.getConnectedPlayers(),r.next=30,c.getContextPlayers(v);case 30:return g=r.sent,t!==(y=yr).playerId&&m[t]?y=m[t]:1===g.length&&(y=g[0]),s(fa()),S=(E=y).playerId,w=E.name,I=E.photo,A={playerId:S,name:w,photo:I},r.next=38,s(Pa(Sr,A));case 38:s(Cr(u,d)),r.next=50;break;case 41:if(r.prev=41,r.t0=r.catch(0),!(r.t0 instanceof Kr)){r.next=45;break}return r.abrupt("return");case 45:if("USER_INPUT"!==(null==r.t0?void 0:r.t0.code)){r.next=47;break}return r.abrupt("return");case 47:if("INVALID_OPERATION"!==(null==r.t0?void 0:r.t0.code)){r.next=49;break}return r.abrupt("return");case 49:(0,i.tO)(r.t0);case 50:return r.prev=50,Ea(1e3),r.finish(50);case 53:case"end":return r.stop()}}),r,null,[[0,41,50,53]])})));return function(e){return r.apply(this,arguments)}}()},Ta=function(e,t){return function(){var n=(0,a.Z)(h().mark((function n(r,s){var a,o,c,l,u,d,p,f,v,m,g,y,E,S,w;return h().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,a=window.game,o=a.player,c=a.profile,l=a.facebook,(u=a.globalScene).screen.open(Vr.o4.NOTIFY_SCREEN,{message:"Loading...",loading:!0}),d=s(),p=o.getPlayerId(d),!((f=o.getConnectedPlayers(d)).length>0)||f[t]){n.next=9;break}return u.events.emit(Or.K.SWITCH,Or.C.DASHBOARD_SCENE),n.abrupt("return");case 9:return v=yr,n.next=12,l.getContextPlayers(p);case 12:if(m=n.sent,t===p||t===v.playerId||!f[t]){n.next=17;break}v=f[t],n.next=25;break;case 17:if(1!==m.length){n.next=21;break}v=m[0],n.next=25;break;case 21:return n.next=23,c.requestProfiles([t]);case 23:(g=c.getProfiles())[t]&&(v=g[t]);case 25:return n.next=27,r(la(e,v));case 27:if(d=s(),ks(d,{playerId:p})!==yr.playerId){n.next=32;break}return n.next=32,r(ca(e));case 32:if(d=s(),ks(d,{playerId:p})===p||!f[t]){n.next=37;break}return r(Ia(t,!0)),n.abrupt("return");case 37:if(Rs(d)===e){n.next=41;break}return u.events.emit(Or.K.SWITCH,Or.C.DASHBOARD_SCENE),n.abrupt("return");case 41:if(y=Os(d),E=Ds(d,{playerId:p}),r(Ra({mode:Sr,status:y})),S=l.getContextID(),w=l.contextType,r(Cr(S,w)),!E){n.next=52;break}return n.next=50,o.requestConnectedPlayers();case 50:return u.events.emit(Or.K.SWITCH,Or.C.DASHBOARD_SCENE),n.abrupt("return");case 52:u.events.emit(Or.K.SWITCH,Or.C.GAME_SCENE),n.next=58;break;case 55:n.prev=55,n.t0=n.catch(0),(0,i.tO)(n.t0);case 58:return n.prev=58,Ea(1e3),n.finish(58);case 61:case"end":return n.stop()}}),n,null,[[0,55,58,61]])})));return function(e,t){return n.apply(this,arguments)}}()},Ca=function(){return function(){var e=(0,a.Z)(h().mark((function e(t,n){var r,s,a,o,c,l,u,d,p,f,v,m;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r=window.game,s=r.analytics,r.facebook,r.globalScene,a=n(),o=ws(a),c=Ls(a),l=c.score,u=void 0===l?0:l,d=c.level,p=void 0===d?0:d,t(ba(u)),e.next=8,t(xa(o,{score:u}));case 8:a=n(),f=Is(a),v=As(a),m=Math.floor((v-f)/1e3),s.event(Z._.MATCH_END,{game_mode:GameCore.Utils.String.toUpperCamelCase(o),level:p,level_name:"level_"+p,time_played:m}),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(0),(0,i.tO)(e.t0);case 18:return e.prev=18,Ea(300),e.finish(18);case 21:case"end":return e.stop()}}),e,null,[[0,15,18,21]])})));return function(t,n){return e.apply(this,arguments)}}()},ba=function(e){return function(t){try{var n=window.game.player,r=n.getPlayerId();ps(r,e).catch((function(e){(0,i.tO)(new Error(e))}));var s=n.getPlayerData(),a=s.score,o=void 0===a?0:a,c=s.level;o<e&&n.setBestScore(e);var l={score:e,level:c};t(va(r,l)),t(ma(l))}catch(u){if(u instanceof gs)return;(0,i.tO)(u)}}},Pa=function(e,t){return void 0===t&&(t=null),function(){var n=(0,a.Z)(h().mark((function n(r,s){var o,c,l,u,d,p,f,v,m,g,y,E,S,w,I,A;return h().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,c=window.game,l=c.player,u=c.analytics,d=c.facebook,p=c.globalScene,f=c.level,f.getLevelData()){n.next=13;break}return p.screen.open(Vr.o4.NOTIFY_SCREEN,{message:"Loading...",loading:!0}),n.prev=5,n.next=8,f.preloadLevelDataAsync();case 8:n.next=12;break;case 10:n.prev=10,n.t0=n.catch(5);case 12:window.game.globalScene.screen.close(Vr.o4.NOTIFY_SCREEN);case 13:if(f.getLevelData()){n.next=17;break}return p.events.emit(Or.K.SWITCH,Or.C.ERROR_SCENE),n.abrupt("return");case 17:if(v=d.getContextID(),m=0,g=s(),u.event(Z._.MATCH_START,{game_mode:GameCore.Utils.String.toUpperCamelCase(e),level:1,level_name:"level_1"}),r({type:Fn,payload:{}}),!Zt()(o=[Er,Ir]).call(o,e)){n.next=31;break}return n.next=25,r((function(e){try{var t=window.game.player;e({type:qn,payload:{}});var n=t.getPlayerId(),r=Hs(ea.SingleMatchStore)||{},s=r.data;r.data=na(s),Qs({playerId:n,match:r}),e(sa(r))}catch(a){if(e(sa(null)),a instanceof Es)return;if(a instanceof fr)return;if(a instanceof Ys)return;(0,i.tO)(a)}}));case 25:if(g=s(),bs(g)){n.next=30;break}return n.next=30,r(ia());case 30:m=Ps(g);case 31:if(e===wr&&r(da(t)),e!==Sr){n.next=41;break}return n.next=35,r(oa(t));case 35:g=s(),y=Rs(g),E=_s(g),S=E.playerId,v||(v=window.FBInstant.context.getID()),w=getMessagesSentStatus(g,{opponentId:S}),v&&S&&!w&&r(sendInviteMessage(S,{contextId:v,matchId:y}));case 41:"online"===e&&r(function(){var e=(0,a.Z)(h().mark((function e(t){var n,i,r,s,a,o,c,l;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=window.game.player,s=r.getPlayer(),a=s.playerId,o=s.name,c=s.photo,t({type:ci,payload:{playerId:a}}),l={},De()(n=Ns()(i=new Array(20)).call(i,null)).call(n,(function(e,t){var n="0"+(t+1);l[n]={playerId:n,name:"MPlayer "+n,photo:"./assets/images/others/avatar.jpg"}})),l[a]={playerId:a,name:o,photo:c},t(pa("mock",l));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),I=l.getPlayerData(g),A=I.score,r(ma({score:m,bestScore:void 0===A?0:A})),r({type:Zn,payload:{mode:e,contextId:v}}),r(br(e)),p.events.emit(Or.K.SWITCH,Or.C.GAME_SCENE),n.next=56;break;case 49:if(n.prev=49,n.t1=n.catch(0),!(n.t1 instanceof Es)){n.next=55;break}return window.game.globalScene.screen.open(Vr.o4.NOTIFY_SCREEN,{message:"Sorry!, you can now\ncreate this match!",duration:2500,loading:!1}),n.abrupt("return");case 55:(0,i.tO)(n.t1);case 56:return n.prev=56,Ea(0),n.finish(56);case 59:case"end":return n.stop()}}),n,null,[[0,49,56,59],[5,10]])})));return function(e,t){return n.apply(this,arguments)}}()},xa=function(e,t){return function(){var n=(0,a.Z)(h().mark((function n(i,r){var s,a,o,c,l,u,d,p,f,v,m;return h().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(a=window.game,o=a.player,a.globalScene,c=t.score,l=void 0===c?0:c,u=t.level,d=void 0===u?0:u,p=r(),!(Zt()(s=[Er,Ir]).call(s,e)>=0)){n.next=7;break}return f=bs(p),n.next=7,i(ra(f));case 7:if(e===wr&&(i({type:oi,payload:{}}),v=o.getPlayerId(),i(va(v,t))),e!==Sr){n.next=12;break}return m=Rs(p),n.next=12,i(ua(m,l,{level:d}));case 12:i({type:Yn,payload:{mode:e}});case 13:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}()},Ra=function(e){return function(t){var n=e.mode,r=e.status;t({type:Vn,payload:{mode:n,status:r}}),(0,i.sw)("game-mode",n)}},Oa=function(){return function(e,t){var n=t(),i=Ls(n).level,r=void 0===i?0:i,s=ws(n);window.game.analytics.event(Z._.MATCH_RESCUE,{game_mode:GameCore.Utils.String.toUpperCamelCase(s),level:r,level_name:"level_"+r}),e({type:zn,payload:{}})}},_a=n(453),ka={STATUS:{READY:"ready",RUNNING:"running",STOPPED:"stopped"}},Da=ka.STATUS,La=function(){function e(e){this.state=void 0,this.scene=void 0,this.scene=e}var t=e.prototype;return t.init=function(){this.setState(Da.READY)},t.start=function(){this.isRunning()||this.setState(Da.RUNNING)},t.stop=function(){this.isRunning()&&this.setState(Da.STOPPED)},t.setState=function(e){this.state=e},t.isReady=function(){return this.state===Da.READY},t.isRunning=function(){return this.state===Da.RUNNING},t.isStopped=function(){return this.state===Da.STOPPED},e}(),Ba=La,Na=n(454),Ha=ka.STATUS,Ma=function(e){function t(t){var n;return(n=e.call(this,t)||this).layout=void 0,n.objects=void 0,n.changeLayout=function(){n.scene.world.getResizeEventData().isLayoutChanged?(n.createLayouts(),n.layout.setUIObjects(n.objects),n.layout.alignUI()):n.layout.alignUI()},n.scene=t,n.createObjects(),n.createLayouts(),n.registerEvents(),n}(0,o.Z)(t,e);var n=t.prototype;return n.registerEvents=function(){this.scene.events.on(Na.Z.LAYOUT_UPDATE,this.changeLayout)},n.init=function(){this.initUILogic(),this.layout.alignUI(),this.setState(Ha.READY)},n.start=function(){this.isRunning()||(this.updateUIState(),this.setState(Ha.RUNNING))},n.stop=function(){this.isRunning()&&this.setState(Ha.STOPPED)},t}(Ba),Ga=Ma,Wa=function(){function e(e){this.scene=void 0,this.objects=void 0,this.allUI=void 0,this.groups=void 0,this.scene=e,this.objects=null,this.createGroups()}var t=e.prototype;return t.setUIObjects=function(e){this.objects=e,this.allUI.addMultiple(this.objects.getAll())},t.createGroups=function(){this.groups={},this.allUI=this.scene.add.group(),this.groups.allUI=this.allUI},t.killAllUI=function(){this.allUI.killGroup()},t.reviveAllUI=function(){this.allUI.reviveGroup()},e}(),Ua=Wa,Fa=function(e){function t(t){var n;return(n=e.call(this,t)||this).objects=void 0,n.guideUI=void 0,n.objects=null,n}(0,o.Z)(t,e);var n=t.prototype;return n.alignUI=function(){if(null!==this.objects){var e=this.scene.gameZone,t=this.objects,n=t.header,i=t.main,r=t.footer,s=this.scene.ads.getBannerHeight();i.setScale(1),i.setPosition(0,0),Phaser.Display.Align.In.Center(i.levelVisualizer,i,0,0),n.setPosition(0,0),r.setPosition(0,0),Phaser.Display.Align.In.Center(r.playSingleButton,r,0,0),Phaser.Display.Align.In.TopLeft(n.avatarFrame,n,-10,-2),Phaser.Display.Align.To.RightCenter(n.goldScrewBar,n.avatarFrame,7,-3),Phaser.Display.Align.To.RightCenter(n.silverScrewBar,n.goldScrewBar,7,0),Phaser.Display.Align.In.TopRight(n.settingButton,n,0,0),Phaser.Display.Align.In.Center(i,e),Phaser.Display.Align.In.TopCenter(n,e,0,-30),Phaser.Display.Align.In.BottomCenter(r,e,0,-30-s)}},n.createGroups=function(){e.prototype.createGroups.call(this),this.guideUI=this.scene.add.group(),this.groups.guideUI=this.guideUI},n.setUIObjects=function(t){e.prototype.setUIObjects.call(this,t),this.addUIObjectsToGroups()},n.addUIObjectsToGroups=function(){null!==this.objects&&this.addObjectForGuideUI()},n.addObjectForGuideUI=function(){this.objects},t}(Ua),Za=Fa,Ya=function(e){function t(){return e.apply(this,arguments)||this}return(0,o.Z)(t,e),t.prototype.alignUI=function(){if(null!==this.objects){var e=this.scene.gameZone,t=this.objects,n=t.header,i=t.main,r=t.footer,s=this.scene.ads.getBannerHeight();i.setScale(1),i.setPosition(0,0),n.setPosition(0,0),r.setPosition(0,0),Phaser.Display.Align.In.Center(r.playSingleButton,r,0,0),Phaser.Display.Align.In.TopLeft(n.avatarFrame,n,-10,-2),Phaser.Display.Align.To.RightCenter(n.goldScrewBar,n.avatarFrame,7,-3),Phaser.Display.Align.To.RightCenter(n.silverScrewBar,n.goldScrewBar,7,0),Phaser.Display.Align.In.TopRight(n.settingButton,n,0,0),Phaser.Display.Align.In.Center(i,e),Phaser.Display.Align.In.TopCenter(n,e,0,-30),Phaser.Display.Align.In.BottomCenter(r,e,0,-30-s)}},t}(Za),Va=Ya,za=n(102),Ka=n(37),ja=n(46),Xa=n(128),Qa=ja.Z.EFFECTS,qa=Qa.KEY,Ja=Qa.FRAME,$a=Xa.Z.FIREWORKS_SMALL,eo=Xa.Z.FIREWORKS_BIG,to=Xa.Z.FIREWORKS_SOAR,no=function(e){function t(t){var n;return(n=e.call(this,t,0,0)||this).soar=void 0,n.fireworks1=void 0,n.fireworks2=void 0,n.colors={red:16462401,blue:1863148,pink:15271420,green:183084,yellow:16631323},n.runSoarExplosiveAnimation=function(){n.setAlpha(0),n.setScale(0),n.soar.setOrigin(.5,.5),n.soar.setFrame(Ja.FX_FIREWORKS_SOAR_CIRCLE),n.scene.tweens.add({targets:[(0,Ka.Z)(n)],duration:200,ease:Phaser.Math.Easing.Cubic.Out,props:{alpha:{from:0,to:1},scale:{from:0,to:Phaser.Math.RND.between(.8,1)/n.scene.world.getZoomRatio()}},onComplete:n.runFireworkExplosiveAnimation})},n.runFireworkExplosiveAnimation=function(){n.fireworks1.setAlpha(0),n.fireworks1.setScale(.1),n.fireworks1.setVisible(!0),n.scene.tweens.add({targets:[n.fireworks1],duration:600,ease:Phaser.Math.Easing.Sine.Out,props:{alpha:{from:0,to:1,duration:300},scale:{from:.1,to:Phaser.Math.RND.between(.6,.8)}}}),n.fireworks2.setVisible(!0),n.fireworks2.setScale(.1),n.scene.tweens.add({targets:[n.fireworks2],duration:800,ease:Phaser.Math.Easing.Cubic.Out,props:{scale:{from:.1,to:Phaser.Math.RND.between(.5,.6)}}}),n.runExistAnimation()},n.runExistAnimation=function(){n.scene.tweens.add({targets:[(0,Ka.Z)(n)],duration:600,delay:400,ease:Phaser.Math.Easing.Cubic.Out,props:{alpha:0},onComplete:function(){n.setAlpha(1),n.soar.setVisible(!1),n.fireworks1.setVisible(!1),n.fireworks2.setVisible(!1),n.kill()}})},n.kill(),n.createObjects(),n.setDepth(za.Z.FIREWORKS),n.scene.add.existing((0,Ka.Z)(n)),n}(0,o.Z)(t,e);var n=t.prototype;return n.createObjects=function(){this.soar=this.scene.make.image({key:qa,frame:Ja.FX_FIREWORKS_SOAR_LINE,visible:!1}),this.fireworks1=this.scene.make.image({key:qa,frame:Ja.FX_FIREWORKS_BIG_0,visible:!1}),this.fireworks2=this.scene.make.image({key:qa,frame:Ja.FX_FIREWORKS_BIG_1,visible:!1}),this.add([this.soar,this.fireworks2,this.fireworks1])},n.playExplosiveSound=function(){var e,t=Phaser.Math.RND.between(0,100);e=t<30?to:t<70?eo:$a,this.scene.audio.playSound(e)},n.randomColor=function(){var e=wi()(this.colors),t=Phaser.Math.RND.between(0,e.length-1),n=e[t];this.fireworks1.setTint(n),n=e[t=Phaser.Math.RND.between(0,e.length-1)],this.fireworks2.setAlpha(.5),this.fireworks2.setTint(n)},n.fire=function(e,t,n){this.setVisible(!0),this.setPosition(e,t),this.runFireworkAnimation(n),this.playExplosiveSound()},n.runFireworkAnimation=function(e){if(this.scene){var t=Phaser.Math.RND.between(-120,120);this.setAlpha(.6),this.soar.setVisible(!0),this.soar.setOrigin(.5,.1),this.soar.setFrame(Ja.FX_FIREWORKS_SOAR_LINE),this.scene.tweens.add({targets:[this],duration:600,ease:Phaser.Math.Easing.Sine.Out,props:{y:e+t,alpha:{from:.6,to:.2},scale:{from:.1,to:1/this.scene.world.getZoomRatio()}},onComplete:this.runSoarExplosiveAnimation})}},t}(Phaser.GameObjects.Container),io=no,ro=ja.Z.DEFAULT,so=ro.KEY,ao=ro.FRAME,oo=function(e){function t(t,n){var i;return(i=e.call(this,t,0,0,so,ao.BLANK)||this).onUpdate=void 0,i.onComplete=void 0,i.positions=void 0,i.visibleAnimation=void 0,i.eatAnimation=void 0,i.setWorldSize(25,24),i.positions=n,i.setVisible(!1),i.setDepth(za.Z.PRIORITY),i.createAnimation(),i.scene.add.existing((0,Ka.Z)(i)),i}(0,o.Z)(t,e);var n=t.prototype;return n.createAnimation=function(){var e=this,t=this.positions,n=t.from,i=t.to,r=1/GameCore.Utils.Image.getImageScale();this.visibleAnimation=this.scene.add.tween({targets:this,duration:1e3,paused:!0,props:{alpha:{duration:500,ease:Phaser.Math.Easing.Cubic.Out,value:{from:0,to:1}},x:{getStart:function(){return n.x}},y:{ease:Phaser.Math.Easing.Bounce.Out,value:{getStart:function(){return n.y},getEnd:function(){return n.y+100}}},scale:{duration:400,ease:Phaser.Math.Easing.Cubic.Out,value:{from:2*r,to:r}}},onStart:function(){e.setVisible(!0),e.scene.audio.playSound(Xa.Z.DIAMONDS_EAT)},onComplete:function(){e.eatAnimation.play()}}),this.eatAnimation=this.scene.add.tween({targets:this,duration:500,delay:50,ease:"Circ.easeOut",paused:!0,props:{x:{getEnd:function(){return i.x}},y:{getEnd:function(){return i.y}}},onUpdate:function(){"function"===typeof e.onUpdate&&e.onUpdate()},onComplete:function(){e.destroy(),"function"===typeof e.onComplete&&e.onComplete()}})},n.run=function(){this.visibleAnimation.play()},t}(Phaser.GameObjects.Image),co=oo,lo=function(){function e(e){this.scene=void 0,this.group=void 0,this.scene=e,this.createGroup()}var t=e.prototype;return t.getAll=function(){return this.group.getChildren()},t.createGroup=function(){this.group=this.scene.add.group()},e}(),uo=lo,ho=n(205),po=ja.Z.DEFAULT,fo=po.KEY,vo=po.FRAME,mo=function(e){function t(t,n,i){var r;return(r=e.call(this,t,fo,vo.BLANK)||this).maxValue=void 0,r.key=void 0,r.frames=void 0,r.bar=void 0,r.icon=void 0,r.buttonPlus=void 0,r.value=void 0,r.button.setVisible(!1),r.key=n,r.frames=i,r.maxValue=1e4,r.createBar(),r.createValue(),r.createIcon(),r.createButtonPlus(),r.alignObject(),r.scene.add.existing((0,Ka.Z)(r)),r}(0,o.Z)(t,e);var n=t.prototype;return n.setValue=function(e){var t=""+e;e>=this.maxValue&&(t=Math.floor(e/1e3)+"k"),this.value.setText(t)},n.alignObject=function(){var e=this.bar,t=e.width,n=e.height;this.setSize(t,n),Phaser.Display.Align.In.Center(this.value,this.bar,2),Phaser.Display.Align.In.LeftCenter(this.icon,this.bar),this.buttonPlus&&Phaser.Display.Align.In.RightCenter(this.buttonPlus,this.bar)},n.createBar=function(){this.bar=this.scene.add.image(0,0,this.key,this.frames.background),this.bar.setY(4),this.add(this.bar)},n.createValue=function(){this.value=new ho.Z(this.scene,{text:"",fontSize:this.scene.fontSize(20),strokeColor:9194534,strokeThickness:3,strokeOffset:{y:.5}}),this.setValue(0),this.add(this.value)},n.createIcon=function(){this.icon=this.scene.add.image(0,0,this.key,this.frames.icon),this.add(this.icon)},n.createButtonPlus=function(){this.frames.button&&this.scene.ads.enabled&&(this.buttonPlus=this.scene.add.image(0,0,this.key,this.frames.button),this.add(this.buttonPlus))},n.logButtonEvent=function(){var e=this.getParentName(),t=this.name;this.scene.analytics.event(Z._.BUTTON_CLICK,{button_name:t,screen_name:e})},n.getParentName=function(){for(var e=this.parentContainer;e;){if(e instanceof GameCore.Screen)return e.getScreenName();e=e.parentContainer}return this.scene.getSceneName()},t}(an.Z),go=mo,yo=ja.Z.DEFAULT,Eo=yo.KEY,So=yo.FRAME,wo=function(e){function t(t){var n,i;return(i=e.call(this,t,Eo,{background:So.BACKGROUND_SCREW_BAR.FILE,icon:So.ICON_SCREW_GOLD.FILE,button:So.BUTTON_PLUS_GREEN.FILE})||this).setName("ScrewBar"),i.bar.setWorldSize(So.BACKGROUND_SCREW_BAR.WIDTH,So.BACKGROUND_SCREW_BAR.HEIGHT),i.icon.setWorldSize(.62*So.ICON_SCREW_GOLD.WIDTH,.62*So.ICON_SCREW_GOLD.HEIGHT),null==(n=i.buttonPlus)||n.setWorldSize(So.BUTTON_PLUS_GREEN.WIDTH,So.BUTTON_PLUS_GREEN.HEIGHT),i.value.setFontSize(i.scene.fontSize(15)),i.value.setCenterAlign(),i.alignObject(),i}(0,o.Z)(t,e);var n=t.prototype;return n.alignObject=function(){var e=this.bar,t=e.width,n=e.height,i=this.buttonPlus?this.buttonPlus.width-5:0,r=this.icon.width-5;this.button.setWorldSize(t+i/2+r/2,n),this.updateSize(),Phaser.Display.Align.In.Center(this.value,this.bar,0),Phaser.Display.Align.In.LeftCenter(this.icon,this.bar,this.icon.width/2),this.buttonPlus&&Phaser.Display.Align.In.RightCenter(this.buttonPlus,this.bar,this.buttonPlus.width/2)},n.setIconFrame=function(e){this.icon.setFrame(e.FILE),this.icon.setWorldSize(e.WIDTH,e.HEIGHT)},n.getIcon=function(){return this.icon},t}(go),Io=wo,Ao=n(444),To=function(e){function t(t,n){var i;(i=e.call(this,t)||this).payload=void 0,i.loading=void 0,i.photo=void 0,i.avtFrame=void 0,i.background=void 0,i.loadPhotoTimer=void 0,i.handleLoadPhotoAfterDelay=function(e,t){return function(){var n=i.scene.textures.get(e);n&&n.key===e?i.handleLoadComplete(e):(i.scene.load.once("filecomplete-image-"+e,i.handleLoadComplete),i.scene.load.image(e,t),i.scene.load.start())}},i.handleLoadComplete=function(e){if(i.scene){var t=i.payload,n=t.id,r=t.radius,s=void 0===r?0:r;if(n&&n===e){var a=n+"_bordered_"+s,o=s>0?a:n,c=i.scene.textures.get(o);if(c&&c.key===o)i.setPhoto(c.key);else if(0!=s&&s<100){if(!GameCore.Utils.Image.drawBorder({scene:i.scene,key:n,newKey:a,radius:s}))return void i.showLoading(!1);i.setPhoto(a)}else if(100==s){if(!GameCore.Utils.Image.drawCircle({scene:i.scene,key:n,newKey:a}))return void i.showLoading(!1);i.setPhoto(a)}else i.setPhoto(n)}}},i.handleLoadPhotoFailed=function(e){e.key===i.payload.id&&i.setDefaultAvatar(e.key)},i.scene.add.existing((0,Ka.Z)(i)),i.payload=n,i.setSize(n.width,n.height),i.createBackground(),i.createLoading(),i.createPhoto(),i.createFrame();var r=i.payload,s=r.id,a=r.url,o=r.radius;return s&&a&&i.loadPhoto(s,a,o),i.addDefaultListeners(),i}(0,o.Z)(t,e);var n=t.prototype;return n.setFrame=function(e){this.avtFrame.setFrame(e),this.avtFrame.setVisible(!0)},n.setBackground=function(e){this.background.setFrame(e)},n.loadPhoto=function(e,t,n){var i;if(void 0===n&&(n=0),this.payload.id=e,this.payload.url=t,this.payload.radius=n,null==(i=this.loadPhotoTimer)||i.remove(),e&&t){var r=this.scene.textures.get(e);if(r&&r.key===e)this.handleLoadComplete(e);else{this.showLoading(!0);var s=this.payload.loadDelay||0;this.loadPhotoTimer=this.scene.time.delayedCall(s,this.handleLoadPhotoAfterDelay(e,t))}}else this.setPhoto(gr.Z.AVATAR.KEY)},n.addDefaultListeners=function(){var e=this;this.scene.load.on(Phaser.Loader.Events.FILE_LOAD_ERROR,this.handleLoadPhotoFailed),this.on(Phaser.GameObjects.Events.DESTROY,(function(){var t;null==(t=e.loadPhotoTimer)||t.remove(),e.scene.load.off(Phaser.Loader.Events.FILE_LOAD_ERROR,e.handleLoadPhotoFailed)}))},n.setDefaultAvatar=function(e){this.loadPhoto(e,gr.Z.AVATAR.FILE,this.payload.radius)},n.createBackground=function(){var e=this.payload,t=e.key,n=e.background;this.background=this.scene.make.image({key:t,frame:n}),this.background.setWorldSize(this.width,this.height),this.add(this.background)},n.createLoading=function(){this.loading=new Ao.Z(this.scene),this.loading.setWorldSize(.75*this.width,.75*this.height),this.loading.setVisible(!1),this.add(this.loading)},n.createPhoto=function(){this.photo=this.scene.make.image({x:0,y:0,origin:{x:.5,y:.5},visible:!1}),this.add(this.photo)},n.createFrame=function(){var e=this.payload,t=e.key,n=e.frame,i=e.width,r=e.height;n?(this.avtFrame=this.scene.make.image({key:t,frame:n}),this.avtFrame.setWorldSize(i,r)):this.avtFrame=this.scene.make.image({x:0,y:0,origin:{x:.5,y:.5},visible:!1}),this.add(this.avtFrame)},n.showLoading=function(e){this.photo.setVisible(!e),this.loading.setVisible(e)},n.setPhoto=function(e){this.showLoading(!1),this.photo.setTexture(e),this.photo.setFrame(0);var t=this.payload,n=t.width,i=t.height,r=Math.min(n,i)-10;this.photo.setWorldSize(r,r),Phaser.Display.Align.In.Center(this.photo,this.background)},t}(Phaser.GameObjects.Container),Co=To,bo=n(199),Po=ja.Z.DEFAULT,xo=(Po.KEY,Po.FRAME,function(e){function t(t,n,i){var r;return void 0===i&&(i=!1),(r=e.call(this,t)||this).payload=void 0,r.icon=void 0,r.text=void 0,r.id=void 0,r.isBox=!1,r.payload=n,r.id=n.id,r.createIcon(),i&&r.createText(),r}(0,o.Z)(t,e);var n=t.prototype;return n.createIcon=function(){this.icon=this.scene.make.image({key:this.payload.key,frame:this.payload.frame}),this.icon.setWorldSize(this.payload.width,this.payload.height),this.add(this.icon)},n.getIsBox=function(){return this.isBox},n.createText=function(){this.text=new ho.Z(this.scene,{text:"1000",fontSize:this.scene.fontSize(14),strokeColor:4731525,strokeThickness:1.8,strokeAlpha:.5,strokeOffset:{y:.3}}),this.add(this.text),Phaser.Display.Align.In.Center(this.text,this.icon,8,10)},n.updateText=function(e){var t=e.toString();this.id,t="x"+t,this.text.setText(t)},n.scaleUp=function(){var e=(0,a.Z)(h().mark((function e(){var t=this;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new(l())((function(e){t.setScale(0),t.scene.tweens.add({targets:t,scale:1,duration:300,ease:Phaser.Math.Easing.Back.Out,onComplete:function(){e()}})})));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),n.scaleDown=function(){var e=(0,a.Z)(h().mark((function e(){var t=this;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new(l())((function(e){t.setScale(1),t.scene.tweens.add({targets:t,scale:0,duration:300,ease:Phaser.Math.Easing.Back.Out,onComplete:function(){e()}})})));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),t}(Phaser.GameObjects.Container)),Ro={ID_MISSION:{REMOVE_PLANK:"REMOVE_PLANK"},ID_REWARD:{GOLD_SCREW:"GOLD_SCREW",SILVER_SCREW:"SILVER_SCREW"}},Oo=["GoldScrew","SilverScrew"],_o="GoldScrew",ko=function(e){function t(t,n){var i;return(i=e.call(this,t)||this).payload=void 0,i.process=void 0,i.minProcess=void 0,i.maxProcess=void 0,i.progressAnimation=void 0,i.progressBg=void 0,i.progressBar=void 0,i.durationPerProcess=1e3,i.runProgressDelay=0,i.onUpdate=void 0,i.payload=(0,r.Z)({},n),i.setSize(n.progressBg.width,n.progressBg.height),i.process=0,i.minProcess=0,i.maxProcess=1,i.createProgressBg(n.progressBg.width,n.progressBg.height,n.progressBg.key,n.progressBg.frame),i.createProgressBar(n.progressBar.width,n.progressBar.height,n.progressBar.key,n.progressBar.frame),i.createContainer(),i.setProgress(0,!0),i}(0,o.Z)(t,e);var n=t.prototype;return n.setProgress=function(e,t,n){if(void 0===t&&(t=!1),!this.scene||t)return this.process=this.getCorrectValue(e),void this.updateProgress(this.process);this.runProgressAnimation(e,n)},n.setDurationPerProcess=function(e){void 0===e&&(e=1e3),this.durationPerProcess=e},n.setDelayRunProgress=function(e){void 0===e&&(e=0),this.runProgressDelay=e},n.setOnUpdateFunction=function(e){this.onUpdate=e},n.updateProgress=function(e){var t=this.scene.world.getPixelRatio(),n=this.payload.progressBar.width*e*t,i=(this.payload.leftWidth+this.payload.rightWidth)/this.payload.progressBar.width,r=e<i?e/i:1,s=Math.floor(n);s%2==1&&(s-=1),0==s?this.progressBar.setVisible(!1):this.progressBar.setVisible(!0),this.progressBar.width=s,this.progressBar.setSlices(s,Math.floor(this.payload.progressBar.height*t),Math.floor(this.payload.leftWidth*r*t),Math.floor(this.payload.rightWidth*r*t),Math.floor(this.payload.topHeight*t),Math.floor(this.payload.bottomHeight*t)).setScale(1/t),this.onUpdate&&this.onUpdate()},n.getCorrectValue=function(e){var t=e;return isFinite(t)||(t=0),t<this.minProcess&&(t=this.minProcess),t>this.maxProcess&&(t=this.maxProcess),t},n.runProgressAnimation=function(e,t){var n,i=this;null==(n=this.progressAnimation)||n.stop();var r=this.getCorrectValue(e);this.progressAnimation=this.scene.tweens.addCounter({from:this.process,to:r,ease:Phaser.Math.Easing.Quadratic.InOut,onUpdate:function(e){var t=e.getValue();i.process=t,i.updateProgress(t)},onComplete:function(){i.updateProgress(r),t&&t()},duration:(r-this.process)*this.durationPerProcess,delay:this.runProgressDelay})},n.createProgressBg=function(e,t,n,i){this.progressBg=this.scene.make.image({key:n,frame:i});var r=this.payload.progressBg.origin;r&&this.progressBg.setOrigin(r.x,r.y),this.progressBg.setWorldSize(e,t)},n.createProgressBar=function(e,t,n,i){var r=this.scene.world.getPixelRatio();this.progressBar=this.scene.add.nineslice(0,0,n,i,e*r,t*r,this.payload.leftWidth*r,this.payload.rightWidth*r,this.payload.topHeight*r,this.payload.bottomHeight*r),this.progressBar.setScale(1/r),this.progressBar.setOrigin(0,.5);var s=this.payload.progressBar.offsetX?this.payload.progressBar.offsetX:0,a=this.payload.progressBar.offsetY?this.payload.progressBar.offsetY:0;Phaser.Display.Align.In.LeftCenter(this.progressBar,this,(-this.payload.progressBg.width+this.payload.progressBar.width)/2+s,a)},n.createContainer=function(){this.add([this.progressBg,this.progressBar]),this.scene.add.existing(this)},n.getProcess=function(){return this.process},t}(Phaser.GameObjects.Container),Do={config:{text:"",fontSize:12.5,origin:{x:.5,y:.5},strokeAlpha:.5,strokeThickness:2,strokeOffset:{y:.3}},offsetX:0,offsetY:0},Lo=function(e){function t(t,n,i){var r;return(r=e.call(this,t,n)||this).textConfig=void 0,r.text=void 0,r.leftValue=void 0,r.rightValue=void 0,r.leftValue=0,r.rightValue=100,r.textConfig=i||Do,r.createProgressText(),r.setOnUpdateFunction((function(){return r.updateProgressText()})),r}(0,o.Z)(t,e);var n=t.prototype;return n.createProgressText=function(){this.text=new ho.Z(this.scene,this.textConfig.config),this.text.setText(this.leftValue+"/"+this.rightValue),this.add(this.text);var e=this.textConfig.offsetX?this.textConfig.offsetX:0,t=this.textConfig.offsetY?this.textConfig.offsetY:0;Phaser.Display.Align.In.Center(this.text,this,e,t)},n.updateProgressText=function(e,t){void 0===t&&(t=!1),t||(this.leftValue=Math.round(this.process*this.rightValue)),e?this.text.setText(e):this.text.setText(this.leftValue+"/"+this.rightValue)},n.setLeftValue=function(e){this.leftValue=e,this.updateProgressText(void 0,!0)},n.setRightValue=function(e){this.rightValue=e,this.updateProgressText(void 0,!0)},n.getLeftValue=function(){return this.leftValue},n.getRightValue=function(){return this.rightValue},t}(ko),Bo=Lo,No=ja.Z.DEFAULT,Ho=No.KEY,Mo=No.FRAME,Go=function(e){function t(t,n,i){var r;return void 0===n&&(n={progressBg:{key:Ho,frame:Mo.PROGRESS_BACKGROUND.FILE,width:Mo.PROGRESS_BACKGROUND.WIDTH,height:Mo.PROGRESS_BACKGROUND.HEIGHT},progressBar:{key:Ho,frame:Mo.PROGRESS_BAR.FILE,width:Mo.PROGRESS_BAR.WIDTH,height:Mo.PROGRESS_BAR.HEIGHT,offsetX:-.5},leftWidth:12,rightWidth:12,topHeight:7,bottomHeight:7}),void 0===i&&(i={config:{text:"",fontSize:12.5,origin:{x:.5,y:.5},strokeThickness:.5,strokeOffset:{y:.3}},offsetX:0,offsetY:0}),(r=e.call(this,t,n,i)||this).setDelayRunProgress(300),r}return(0,o.Z)(t,e),t.prototype.runAnimation=function(e,t,n){var i,r=this;null==(i=this.progressAnimation)||i.stop();var s=this.leftValue,a=e;t!=this.rightValue&&(s=0,a=e,this.rightValue=t),a>t&&(a=t),this.setProgress(s/t,!0),this.leftValue=s,this.setProgress(a/t,!1,(function(){r.leftValue=a,r.updateProgressText(void 0,!0),n&&n()}))},t}(Bo),Wo=Go,Uo=Ro.ID_MISSION,Fo=ja.Z.DEFAULT,Zo=Fo.KEY,Yo=Fo.FRAME,Vo=function(e){function t(t,n,i){var r;return(r=e.call(this,t)||this).descriptionText=void 0,r.progress=void 0,r.rewardBlocksByKey={},r.showedRewardBlocks=[],r.showedQuestBlocks=[],r.questBlocksByKey={},r.scaleUpShowedBlocks=(0,a.Z)(h().mark((function e(){var t;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[],r.showedRewardBlocks.forEach((function(e){t.push(e.scaleUp())})),e.abrupt("return",l().all(t));case 3:case"end":return e.stop()}}),e)}))),r.scaleUp=function(){var e=(0,a.Z)(h().mark((function e(t,n){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return void 0===t&&(t=300),void 0===n&&(n=0),e.abrupt("return",new(l())((function(e){r.scene.tweens.add({targets:(0,Ka.Z)(r),props:{scale:1},duration:t,delay:n,onComplete:function(){e()}})})));case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),r.scaleDown=function(){var e=(0,a.Z)(h().mark((function e(t,n){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return void 0===t&&(t=300),void 0===n&&(n=0),e.abrupt("return",new(l())((function(e){r.scene.tweens.add({targets:(0,Ka.Z)(r),props:{scale:0},duration:t,delay:n,onComplete:function(){e()}})})));case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),r.setSize(n,i),r.createProgress(),r.createBlocks(),r.createDescriptionText(),r.scene.add.existing((0,Ka.Z)(r)),r}(0,o.Z)(t,e);var n=t.prototype;return n.createProgress=function(){this.progress=new Wo(this.scene),this.add(this.progress),this.progress.setProgress(0,!0),Phaser.Display.Align.In.Center(this.progress,this)},n.createBlocks=function(){this.createQuestBlocks(),this.createRewardBlocks()},n.createQuestBlocks=function(){var e=this;this.createRemovePlanksQuestBlock(),wi()(this.questBlocksByKey).forEach((function(t){t&&(e.alignIconBlock(t,!1),t.kill())}))},n.createRemovePlanksQuestBlock=function(){var e=Yo.ICON_PLANKS,t=e.FILE,n=e.WIDTH,i=e.HEIGHT,r=new xo(this.scene,{id:Uo.REMOVE_PLANK,key:Zo,frame:t,width:n,height:i});this.add(r),this.questBlocksByKey[Uo.REMOVE_PLANK]=r},n.getQuestBlockPosition=function(){var e;return(null==(e=this.questBlocksByKey[Uo.REMOVE_PLANK])?void 0:e.getWorldPosition())||{x:0,y:0}},n.getRewardBlockPosition=function(e){var t={x:0,y:0};return wi()(this.rewardBlocksByKey).forEach((function(e){e&&(t=e.getWorldPosition())})),t},n.getCurrentShowRewardBlock=function(){return this.showedRewardBlocks[0]},n.createRewardBlocks=function(){var e=this;this.createGoldScrewRewardBlock(),this.createSilverScrewRewardBlock(),wi()(this.rewardBlocksByKey).forEach((function(t){t&&(e.alignIconBlock(t,!0),t.kill())}))},n.alignIconBlock=function(e,t){void 0===t&&(t=!0),t?Phaser.Display.Align.In.RightCenter(e,this,-41.5):Phaser.Display.Align.In.LeftCenter(e,this,-40)},n.createGoldScrewRewardBlock=function(){var e=Yo.ICON_SCREW_GOLD,t=e.FILE,n=e.WIDTH,i=e.HEIGHT,r=new xo(this.scene,{id:_o,key:Zo,frame:t,width:.62*n,height:.62*i},!0);this.add(r),this.rewardBlocksByKey.GoldScrew=r,r.kill()},n.createSilverScrewRewardBlock=function(){var e=Yo.ICON_SCREW_SILVER,t=e.FILE,n=e.WIDTH,i=e.HEIGHT,r=new xo(this.scene,{id:_o,key:Zo,frame:t,width:.62*n,height:.62*i},!0);this.add(r),this.rewardBlocksByKey.SilverScrew=r,r.kill()},n.createDescriptionText=function(){this.descriptionText=this.descriptionText=new ho.Z(this.scene,{text:"Remove 20 planks",fontSize:this.scene.fontSize(15),fillColor:9849600}),this.add(this.descriptionText),Phaser.Display.Align.In.TopLeft(this.descriptionText,this.progress,-4,this.descriptionText.height+2)},n.killBlocks=function(){wi()(this.questBlocksByKey).forEach((function(e){return null==e?void 0:e.kill()})),wi()(this.rewardBlocksByKey).forEach((function(e){return null==e?void 0:e.kill()}))},n.setDescriptionText=function(e){},n.setTargetProgress=function(e){void 0===e&&(e=0),this.progress.setRightValue(e),this.descriptionText.setText("Remove "+e+" planks")},n.setCurrentProgress=function(e,t){void 0===e&&(e=0),void 0===t&&(t=0),this.progress.setLeftValue(e),this.progress.setRightValue(t);var n=0!==t?e/t:0;this.progress.setProgress(n,!0)},n.resetProgress=function(){this.progress.setProgress(0),this.progress.setLeftValue(0)},n.updateShowedBlocks=function(e){this.killBlocks(),this.showedQuestBlocks=[],this.showedRewardBlocks=[],this.updateShowedQuestBlocks([Uo.REMOVE_PLANK]);var t=te()(e);this.updateShowedRewardBlocks(t,e)},n.updateShowedRewardBlocks=function(e,t){var n=this;this.showedRewardBlocks=[];var i=0;Oo.forEach((function(e){t[e]&&(i+=1)})),i>1||te()(this.rewardBlocksByKey).forEach((function(i){var r=i,s=n.rewardBlocksByKey[r];if(s)return-1!==Zt()(e).call(e,r)?(n.showedRewardBlocks.push(s),s.updateText(t[r]||0),s.revive(),void s.setScale(1)):void s.kill()}))},n.updateShowedQuestBlocks=function(e){var t=this;this.showedQuestBlocks=[],te()(this.questBlocksByKey).forEach((function(n){var i=t.questBlocksByKey[n];if(i)return-1!==Zt()(e).call(e,n)?(t.showedQuestBlocks.push(i),i.revive(),void i.setScale(1)):void i.kill()}))},n.scaleDownShowedQuestBlocks=function(){var e=(0,a.Z)(h().mark((function e(){var t;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[],e.abrupt("return",l().all(t));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),n.scaleDownShowedRewardBlocks=function(){var e=(0,a.Z)(h().mark((function e(){var t;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[],this.showedRewardBlocks.forEach((function(e){t.push(e.scaleDown())})),e.abrupt("return",l().all(t));case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.scaleDownShowedBlocks=function(){this.scaleDownShowedQuestBlocks(),this.scaleDownShowedRewardBlocks()},t}(Phaser.GameObjects.Container),zo=ja.Z.DEFAULT,Ko=(zo.KEY,zo.FRAME,function(e){function t(t,n,i){var r;return(r=e.call(this,t)||this).text=void 0,r.remainTimeText=void 0,r.setSize(n,i),r.createCompletedText(),r.createRemainTimeText(),r.scene.add.existing((0,Ka.Z)(r)),r}(0,o.Z)(t,e);var n=t.prototype;return n.createCompletedText=function(){this.text=new ho.Z(this.scene,{fontSize:this.scene.fontSize(15),text:"Your quests renew in                     \nWatch an ad to continue with new quests.",fillColor:9849600,origin:{x:.5,y:.5}}),this.text.setCenterAlign(),this.add(this.text),Phaser.Display.Align.In.Center(this.text,this,0,-3)},n.setRemainTimeText=function(e){this.remainTimeText.setText(e)},n.createRemainTimeText=function(){this.remainTimeText=new ho.Z(this.scene,{fontSize:this.scene.fontSize(15),text:"00:00:00",fillColor:9849600,origin:{x:.5,y:.5}}),this.add(this.remainTimeText),Phaser.Display.Align.In.RightCenter(this.remainTimeText,this.text,-30,-8.5)},t}(Phaser.GameObjects.Container)),jo=ja.Z.DEFAULT,Xo=jo.KEY,Qo=jo.FRAME,qo=function(e){function t(t,n){var i,r=Qo.BUTTON_GREEN_SMALL,s=r.FILE,a=r.WIDTH,o=r.HEIGHT;return(i=e.call(this,t,Xo,s,.7*a,.7*o)||this).dailyQuests=void 0,i.moveY=function(e,t,n){void 0===n&&(n=Phaser.Math.Easing.Linear);var r={targets:(0,Ka.Z)(i),y:e,duration:t,ease:n};return i.dailyQuests.createTweenPromise(r).promise},i.dailyQuests=n,i.setName("ViewAd"),i.createText(),i}return(0,o.Z)(t,e),t.prototype.createText=function(){var e=new ho.Z(this.scene,{fontSize:this.scene.fontSize(13),text:"Watch AD",strokeThickness:2.2,strokeOffset:{y:.4},strokeColor:23819});this.add(e),Phaser.Display.Align.In.Center(e,this,0,-1)},t}(an.Z),Jo=ja.Z.DEFAULT,$o=Jo.KEY,ec=Jo.FRAME,tc={textConfig:{text:"00:00:00",fontSize:13,origin:{x:.5,y:.5}},bgConfig:{key:$o,frame:ec.BACKGROUND_TIME.FILE,width:ec.BACKGROUND_TIME.WIDTH,height:ec.BACKGROUND_TIME.HEIGHT},useBackground:!0,useIcon:!0,useMSFormat:!1},nc=function(e){function t(t,n){var i;return(i=e.call(this,t)||this).payload=void 0,i.background=void 0,i.timer=void 0,i.text=void 0,i.textWarningTween=void 0,i.iconWarningTween=void 0,i.iconScale=1,i.isWarning=!1,i.runTimerWarningAnimation=function(){if(!i.isWarning){i.stopTimerWarningAnimation(),i.isWarning=!0;var e=Phaser.Display.Color.ValueToColor(9849600),t=Phaser.Display.Color.ValueToColor(16711680);i.textWarningTween=i.scene.tweens.addCounter({from:0,to:1,yoyo:!0,loop:-1,duration:600,onUpdate:function(n){var r=100*n.getValue(),s=Phaser.Display.Color.Interpolate.ColorWithColor(e,t,100,r),a=s.r,o=s.g,c=s.b,l=Phaser.Display.Color.GetColor(a,o,c);i.text.setTint(l)}}),i.timer&&(i.iconWarningTween=i.scene.tweens.add({targets:i.timer,duration:400,yoyo:!0,loop:-1,props:{scale:{from:i.iconScale,to:1.1*i.iconScale},rotation:{from:-Math.PI/18,to:Math.PI/18}},ease:Phaser.Math.Easing.Quadratic.InOut}))}},i.stopTimerWarningAnimation=function(){var e,t;i.isWarning&&(null==(e=i.textWarningTween)||e.remove(),null==(t=i.iconWarningTween)||t.remove(),i.text.setTint(9849600),i.timer&&i.timer.setScale(i.iconScale).setRotation(0),i.isWarning=!1)},i.textAddingTween=void 0,i.iconAddingTween=void 0,i.isAdding=!1,i.runTimerAddingAnimation=function(){if(!i.isAdding){i.stopTimerAddingAnimation(),i.isAdding=!0;var e=Phaser.Display.Color.ValueToColor(9849600),t=Phaser.Display.Color.ValueToColor(65280);i.textAddingTween=i.scene.tweens.addCounter({from:0,to:1,duration:400,yoyo:!0,loop:0,onUpdate:function(n){var r=100*n.getValue(),s=Phaser.Display.Color.Interpolate.ColorWithColor(e,t,100,r),a=s.r,o=s.g,c=s.b,l=Phaser.Display.Color.GetColor(a,o,c);i.text.setTint(l),i.text.setScale(1+r/1e3)}}),i.timer&&(i.iconAddingTween=i.scene.tweens.add({targets:i.timer,duration:200,yoyo:!0,loop:-1,props:{scale:{from:i.iconScale,to:1.1*i.iconScale},rotation:{from:-Math.PI/18,to:Math.PI/18}},ease:Phaser.Math.Easing.Quadratic.InOut}))}},i.stopTimerAddingAnimation=function(){var e,t;i.isAdding&&(null==(e=i.textAddingTween)||e.remove(),null==(t=i.iconAddingTween)||t.remove(),i.text.setTint(9849600),i.timer&&i.timer.setScale(i.iconScale).setRotation(0),i.isAdding=!1)},tc.textConfig.fontSize=t.fontSize(13),n.useMSFormat&&(tc.textConfig.text="00:00"),i.payload=(0,r.Z)({},tc,n),i.createUI(),i.background?i.setSize(i.background.width,i.background.height):i.timer?i.setSize(i.timer.width+i.text.width+3,i.timer.height):i.setSize(i.text.width+3,i.text.height),i.alignUI(),i.setName("TimerText"),i}(0,o.Z)(t,e);var n=t.prototype;return n.createUI=function(){this.createBackground(),this.createIcon(),this.createTimeText()},n.createBackground=function(){var e=this.payload,t=e.useBackground,n=e.bgConfig;if(t){var i=n.key,r=n.frame,s=n.width,a=n.height;this.background=this.scene.make.image({key:i,frame:r}),this.background.setWorldSize(s,a),this.add(this.background)}},n.createIcon=function(){if(this.payload.useIcon){var e=ec.ICON_TIME,t=e.FILE,n=e.WIDTH,i=e.HEIGHT;this.timer=this.scene.make.image({key:$o,frame:t}),this.timer.setWorldSize(n,i),this.iconScale=this.timer.scale,this.add(this.timer)}},n.createTimeText=function(){var e=this.payload.textConfig;this.text=new ho.Z(this.scene,(0,r.Z)({},e)),this.text.setLeftAlign(),this.add(this.text)},n.alignUI=function(){if(this.background)if(Phaser.Display.Align.In.Center(this.background,this,0,1.5),this.timer){Phaser.Display.Align.In.LeftCenter(this.timer,this,0,1);var e=(this.width-this.timer.width)/2;Phaser.Display.Align.In.RightCenter(this.text,this,-e/2+3)}else Phaser.Display.Align.In.Center(this.text,this);else this.timer?(Phaser.Display.Align.In.LeftCenter(this.timer,this,0,1),Phaser.Display.Align.In.RightCenter(this.text,this)):Phaser.Display.Align.In.Center(this.text,this)},n.updateText=function(e){this.text.setText(e)},n.updateClock=function(e){this.updateText(this.formatTimeToHMS(e))},n.formatTimeToHMS=function(e){if(e>=864e5){var t=Math.floor(e/864e5);return t+" "+(t>1?"days":"day")}var n=Math.floor(e/36e5),i=Math.floor(e%36e5/6e4),r=Math.floor(e%6e4/1e3),s=n<10?"0"+n:n,a=i<10?"0"+i:i,o=r<10?"0"+r:r;if(this.payload.useMSFormat){var c=60*n+i;return(c<10?"0"+c:c)+":"+o}return s+":"+a+":"+o},n.getText=function(){return this.text},n.getTimer=function(){return this.timer},n.setIconSize=function(e,t){this.timer&&(this.timer.setWorldSize(e,t),this.iconScale=this.timer.scale)},n.getBackground=function(){return this.background},t}(Phaser.GameObjects.Container),ic=nc,rc=ja.Z.DEFAULT,sc=rc.KEY,ac=rc.FRAME,oc=function(e){function t(t,n){var i;return(i=e.call(this,t,{useBackground:!0,useMSFormat:!1,useIcon:!0,textConfig:{text:"00:00:00",fontSize:t.fontSize(14)},bgConfig:{key:sc,frame:ac.BACKGROUND_TIME.FILE,width:1.15*ac.BACKGROUND_TIME.WIDTH,height:ac.BACKGROUND_TIME.HEIGHT}})||this).dailyQuests=void 0,i.scaleDownIcon=function(){var e=(0,a.Z)(h().mark((function e(t){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return void 0===t&&(t=200),e.abrupt("return");case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),i.scaleUpIcon=function(){var e=(0,a.Z)(h().mark((function e(t,n){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return void 0===n&&(n=Phaser.Math.Easing.Linear),e.abrupt("return");case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),i.moveY=function(){var e=(0,a.Z)(h().mark((function e(t,n,r){var s;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return void 0===r&&(r=Phaser.Math.Easing.Linear),s={targets:(0,Ka.Z)(i),y:t,duration:n,ease:r},e.abrupt("return",i.dailyQuests.createTweenPromise(s).promise);case 3:case"end":return e.stop()}}),e)})));return function(t,n,i){return e.apply(this,arguments)}}(),i.getText().setTint(9849600),Phaser.Display.Align.In.RightCenter(i.getText(),(0,Ka.Z)(i),-7,0),i.dailyQuests=n,i}return(0,o.Z)(t,e),t.prototype.setText=function(e){this.text.setText(e)},t}(ic),cc=function(){function e(){var e=this;this._isCancelled=void 0,this.listeners=[],this.cancel=function(){e._isCancelled||(e._isCancelled=!0,e.listeners&&0!=e.listeners.length&&(e.listeners.forEach((function(e){e()})),e.listeners=[]))},this.register=function(t){e._isCancelled?t():e.listeners.push(t)},this.listeners=[],this._isCancelled=!1}var t=e.prototype;return t.unregister=function(e){var t;this.listeners=_e()(t=this.listeners).call(t,(function(t){return t!=e}))},t.clear=function(){this._isCancelled=!1,this.listeners=[]},(0,ce.Z)(e,[{key:"isCancelled",get:function(){return this._isCancelled}}]),e}(),lc={text:"",callback:function(){},width:30,height:30,backgroundColor:16380883,backgroundAlpha:.75,strokeColor:0,tint:16777215},uc=function(e){function t(n,i){var s;return(s=e.call(this,n,ja.Z.DEFAULT.KEY,ja.Z.DEFAULT.FRAME.BLANK,30,30)||this).payload=void 0,s.text=void 0,s.payload=(0,r.Z)({},lc,i),s.button.setWorldSize(s.payload.width,s.payload.height),s.button.setTint(s.payload.backgroundColor),s.setAlpha(s.payload.backgroundAlpha),s.createUI(),s.onClick=function(){i.callback&&i.callback()},t.buttons||(t.buttons=[]),t.buttons.push((0,Ka.Z)(s)),s}return(0,o.Z)(t,e),t.prototype.createUI=function(){this.text=new ho.Z(this.scene,{text:this.payload.text,fontSize:this.scene.fontSize(10),strokeColor:this.payload.strokeColor,strokeThickness:1.5,strokeOffset:{y:0}}).setCenterAlign().setTint(this.payload.tint);for(var e=10;this.text.width+5>this.button.width;)e*=.95,this.text.setFontSize(e);Phaser.Display.Align.In.Center(this.text,this.button,0,0),this.add(this.text)},t.setAlphaAll=function(e){t.buttons.forEach((function(t){null==t||t.setAlpha(e)}))},t}(an.Z);uc.buttons=[];var hc,dc=uc,pc=ja.Z.DEFAULT,fc=pc.KEY,vc=pc.FRAME,mc=GameCore,gc=mc.Configs,yc=function(e){function t(t){var n;return(n=e.call(this,t,fc,vc.BACKGROUND_MISSION.FILE,vc.BACKGROUND_MISSION.WIDTH,vc.BACKGROUND_MISSION.HEIGHT)||this).zone=void 0,n.mainContainer=void 0,n.completedContainer=void 0,n.countdownTimer=void 0,n.loading=void 0,n.asyncQueue=[],n.additionalAsyncFunction=[],n.adsTimer=void 0,n.maskGraphics=void 0,n.geometryMask=void 0,n.viewAdButton=void 0,n.stopWatch=void 0,n.cancelationToken=void 0,n.countText=void 0,n.originalTextScale=1,n.greenBall=void 0,n.greenBallAdd=void 0,n.greenBallContainer=void 0,n.redBall=void 0,n.redBallAdd=void 0,n.redBallContainer=void 0,n.yellowBall=void 0,n.yellowBallAdd=void 0,n.yellowBallContainer=void 0,n.isPassingMultiLevels=!1,n.unclaimedReward=!1,n.processDailyQuests=function(){n.isPassingMultiLevels=n.scene.dailyQuest.isPassingMultiLevels(),n.updateDailyQuests()},n.updateDailyQuests=function(){var e=n.scene.dailyQuest;try{var t;if(n.scene.events.off("sleep",n.cancelationToken.cancel),n.scene.events.on("sleep",n.cancelationToken.cancel),n.cancelationToken.clear(),n.setScale(1),n.asyncQueue=[],n.additionalAsyncFunction=[],!e.getConfig().Enable)return null==(t=n.countdownTimer)||t.destroy(),n.completedContainer.kill(),n.mainContainer.kill(),void n.setVisibleLoading(!0);n.updateMask(),n.mainContainer.clearMask(),n.completedContainer.clearMask(),n.setVisibleLoading(!1);var i=e.getRemainingTime();if(n.updateRemainTimeText(i<0?0:i),n.createCountdownTimer(),e.isRewardedAllTasks())return n.mainContainer.kill(),n.stopWatch.kill(),Phaser.Display.Align.In.BottomCenter(n.viewAdButton,(0,Ka.Z)(n),0,n.viewAdButton.height/2-10),n.viewAdButton.setScale(1).revive(),void n.completedContainer.setX(0).revive();i<=0?e.resetNewDailyQuest():n.asyncQueue.push(n.runProgressAnimation),n.completedContainer.kill(),n.viewAdButton.kill(),n.updateMainContainer(),n.stopWatch.revive(),n.stopWatch.scaleUpIcon(0),n.moveAbove(n.stopWatch,n.button),Phaser.Display.Align.In.BottomCenter(n.stopWatch,n.button,0,7.5),n.mainContainer.setScale(1)}catch(r){}},n.runProgressAnimation=(0,a.Z)(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new(l())((function(e){var t=n.scene.dailyQuest.getCurrentQuestData();!n.scene.dailyQuest.isRewardedAllTasks()&&t?n.mainContainer.progress.runAnimation(t.current,t.target,(0,a.Z)(h().mark((function i(){var r;return h().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(!(t.current<t.target)){i.next=3;break}return e(),i.abrupt("return");case 3:if(n.scene.dailyQuest.passLevel(),!n.isPassingMultiLevels){i.next=18;break}return n.unclaimedReward=!0,n.scene.dailyQuest.isRewardedAllTasks()||n.mainContainer.resetProgress(),r=n.mainContainer.getCurrentShowRewardBlock(),n.mainContainer.getRewardBlockPosition(r),i.next=11,n.mainContainer.scaleDownShowedQuestBlocks();case 11:if(n.scene.audio.playSound(Xa.Z.GOAL_PROGRESS),n.scene.dailyQuest.isRewardedAllTasks()){i.next=15;break}return i.next=15,n.playNextQuestAnimation();case 15:e(),i.next=19;break;case 18:n.claimReward().then((function(){e()}));case 19:case"end":return i.stop()}}),i)})))):e()})));case 1:case"end":return e.stop()}}),e)}))),n.updateCountdown=(0,a.Z)(h().mark((function e(){var t,i;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!((t=n.scene.dailyQuest.getRemainingTime())<=0)){e.next=6;break}return t=0,null==(i=n.countdownTimer)||i.destroy(),n.addAdditionalAsyncFunction(n.resetDailyQuests.bind((0,Ka.Z)(n),1e3)),e.abrupt("return");case 6:n.updateRemainTimeText(t);case 7:case"end":return e.stop()}}),e)}))),n.resetDailyQuests=function(){var e=(0,a.Z)(h().mark((function e(t){var i,r,s,o,c,u;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===t&&(t=0),e.prev=1,n.mainContainer.resetProgress(),n.scene.dailyQuest.resetNewDailyQuest(),n.scene.audio.playSound(Xa.Z.POPUP_IN),!(t>0)){e.next=12;break}return s=new(l())((function(e,t){i=t,r=e})),o=n.scene.time.delayedCall(t,(function(){n.cancelationToken.unregister(c),r()})),c=function(){null==o||o.destroy(),i(new Error("Timer event cancelate"))},n.cancelationToken.register(c),e.next=12,s;case 12:if(n.viewAdButton.active){e.next=23;break}return n.completedContainer.kill(),e.next=16,n.stopWatch.scaleDownIcon(200);case 16:return n.moveBelow(n.stopWatch,n.button),e.next=19,n.stopWatch.moveY(15,200);case 19:return e.next=21,n.runSliceContainersAnimation(300);case 21:return n.showMainContainer(),e.abrupt("return");case 23:n.mainContainer.kill(),n.stopWatch.kill(),n.viewAdButton.moveY(n.viewAdButton.y+10,200),u=function(){var e=(0,a.Z)(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n.moveBelow(n.viewAdButton,n.button),e.next=4,n.viewAdButton.moveY(n.viewAdButton.y-n.viewAdButton.height-10,300);case 4:return e.next=6,n.runSliceContainersAnimation(200);case 6:n.showMainContainer(),e.next=11;break;case 9:e.prev=9,e.t0=e.catch(0);case 11:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}(),n.scene.tweens.add({targets:n.viewAdButton,scale:.6,duration:200,onComplete:u}),e.next=32;break;case 30:e.prev=30,e.t0=e.catch(1);case 32:case"end":return e.stop()}}),e,null,[[1,30]])})));return function(t){return e.apply(this,arguments)}}(),n.showMainContainer=function(){var e=(0,a.Z)(h().mark((function e(t){var i;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return void 0===t&&(t=0),n.completedContainer.kill(),n.viewAdButton.kill(),n.completedContainer.clearMask(),i={targets:(0,Ka.Z)(n),scaleY:0,delay:t,duration:300,ease:Phaser.Math.Easing.Back.In,yoyo:!0,onYoyo:function(){n.playNextQuestAnimation(),n.createCountdownTimer(),n.mainContainer.clearMask(),n.mainContainer.setX(0)}},e.prev=5,e.next=8,n.createTweenPromise(i).promise;case 8:return Phaser.Display.Align.In.BottomCenter(n.stopWatch,n.button,0,7.5),n.stopWatch.y-=30,n.stopWatch.revive(),e.next=13,n.stopWatch.moveY(n.stopWatch.y+30,250);case 13:n.moveAbove(n.stopWatch,n.button),n.stopWatch.scaleUpIcon(200,Phaser.Math.Easing.Sine.Out),e.next=19;break;case 17:e.prev=17,e.t0=e.catch(5);case 19:case"end":return e.stop()}}),e,null,[[5,17]])})));return function(t){return e.apply(this,arguments)}}(),n.playNextQuestAnimation=(0,a.Z)(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.mainContainer.resetProgress(),n.updateMainContainer(),n.mainContainer.scaleUp(),e.next=5,n.mainContainer.scaleUpShowedBlocks().catch((function(){}));case 5:case"end":return e.stop()}}),e)}))),n.runNextQuestAnimation=(0,a.Z)(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.mainContainer.resetProgress(),n.updateMainContainer();case 2:case"end":return e.stop()}}),e)}))),n.claimReward=(0,a.Z)(h().mark((function e(){var t,i;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=n.unclaimedReward,n.unclaimedReward=!1,i=n.scene.dailyQuest.getRewardDailyQuest()){e.next=5;break}return e.abrupt("return");case 5:return e.next=7,(0,bo.qZ)(200);case 7:return n.scene.audio.playSound(Xa.Z.CONGRATULATION,{volume:.5}),e.next=10,n.openRewardItemScreen(i,t).catch((function(){}));case 10:case"end":return e.stop()}}),e)}))),n.openRewardItemScreen=function(){var e=(0,a.Z)(h().mark((function e(t,i){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new(l())((function(e){var r=te()(t);if(0!=wi()(t).length){var s=n.scene.game.globalScene;r.forEach((function(e){var t=n.mainContainer.rewardBlocksByKey[e];t&&t.kill()}));var o=function(){};o=n.scene.dailyQuest.isRewardedAllTasks()?function(){n.scene.time.delayedCall(200,(function(){n.showCompletedContainer(),e({})}))}:function(){var t=(0,a.Z)(h().mark((function t(){return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,n.isPassingMultiLevels){t.next=4;break}return t.next=4,n.runNextQuestAnimation();case 4:e({}),t.next=9;break;case 7:t.prev=7,t.t0=t.catch(0);case 9:return t.prev=9,e({}),t.finish(9);case 12:case"end":return t.stop()}}),t,null,[[0,7,9,12]])})));return function(){return t.apply(this,arguments)}}();var c=n.mainContainer.getCurrentShowRewardBlock(),l=n.mainContainer.getRewardBlockPosition(c);n.isPassingMultiLevels||c.kill(),i&&c.revive(),s.openProductReceiveScreen(t,"DailyQuest",(function(){o(),n.scene.updateCurrentScrew(),t.GoldScrew&&n.scene.layoutManager.objects.header.runGoldScrewBarAnimation(),t.SilverScrew&&n.scene.layoutManager.objects.header.runSilverScrewBarAnimation()}),l,{GoldScrew:n.scene.layoutManager.objects.header.goldScrewBar.getIcon().getWorldPosition(),SilverScrew:n.scene.layoutManager.objects.header.silverScrewBar.getIcon().getWorldPosition()})}else e({})})));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),n.showCompletedContainer=(0,a.Z)(h().mark((function e(){var t;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n.scene.audio.playSound(Xa.Z.POPUP_IN),n.viewAdButton.kill(),e.next=5,n.stopWatch.scaleDownIcon(200);case 5:return n.moveBelow(n.stopWatch,n.button),e.next=8,n.stopWatch.moveY(15,200);case 8:n.completedContainer.revive(),n.completedContainer.setX(-n.width),n.runSliceContainersAnimation(300).then((function(){n.mainContainer.kill(),n.mainContainer.clearMask(),n.completedContainer.clearMask()})),n.moveAbove(n.viewAdButton,n.completedContainer),n.viewAdButton.setScale(0).revive(),Phaser.Display.Align.In.BottomCenter(n.viewAdButton,(0,Ka.Z)(n),0,n.viewAdButton.height/2-10),t=n.viewAdButton.y,n.viewAdButton.setX(-n.width/2),n.viewAdButton.setDisabled(!1),n.scene.tweens.add({targets:n.viewAdButton,props:{x:{from:-n.width/2,to:0,duration:400,ease:Phaser.Math.Easing.Quartic.Out},y:{from:n.viewAdButton.y,to:t,ease:Phaser.Math.Easing.Sine.InOut,duration:300},scale:{from:0,start:0,to:1,duration:300}}}),e.next=22;break;case 20:e.prev=20,e.t0=e.catch(0);case 22:case"end":return e.stop()}}),e,null,[[0,20]])}))),n.runSliceContainersAnimation=function(){var e=(0,a.Z)(h().mark((function e(t){var i;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return void 0===t&&(t=300),n.mainContainer.setMask(n.geometryMask),n.completedContainer.setMask(n.geometryMask),i={targets:[n.mainContainer,n.completedContainer],x:"+="+n.width,duration:t,ease:Phaser.Math.Easing.Sine.In},e.abrupt("return",n.createTweenPromise(i).promise);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.isProcessingAsyncQueue=!1,n.processAsyncQueue=(0,a.Z)(h().mark((function e(){var t,i,r,s,a;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n.isProcessingAsyncQueue){e.next=2;break}return e.abrupt("return");case 2:n.isProcessingAsyncQueue=!0,r=x()(t=[]).call(t,n.asyncQueue),n.asyncQueue=[];case 5:if(!r.length){e.next=13;break}if(s=r.shift()){e.next=9;break}return e.abrupt("continue",5);case 9:return e.next=11,s().catch((function(){}));case 11:e.next=5;break;case 13:n.isProcessingAsyncQueue=!1,r=x()(i=[]).call(i,n.additionalAsyncFunction);case 15:if(!(r.length>0)){e.next=23;break}if(a=r.shift()){e.next=19;break}return e.abrupt("continue",15);case 19:return e.next=21,a().catch((function(){}));case 21:e.next=15;break;case 23:return e.next=25,n.updateUnusedExp();case 25:return e.next=27,n.runReceiveUnclaimReward();case 27:case"end":return e.stop()}}),e)}))),n.updateUnusedExp=(0,a.Z)(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0==n.scene.dailyQuest.getUnusedExp()||n.scene.dailyQuest.isRewardedAllTasks()){e.next=4;break}return n.updateDailyQuests(),e.next=4,n.processAsyncQueue();case 4:case"end":return e.stop()}}),e)}))),n.runReceiveUnclaimReward=(0,a.Z)(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!=n.scene.dailyQuest.getUnusedExp()||!n.unclaimedReward){e.next=3;break}return e.next=3,n.claimReward();case 3:case"end":return e.stop()}}),e)}))),n.addAdditionalAsyncFunction=function(){var e=(0,a.Z)(h().mark((function e(t){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n.isProcessingAsyncQueue||n.asyncQueue.length>0)){e.next=3;break}return n.additionalAsyncFunction.push(t),e.abrupt("return");case 3:return e.abrupt("return",t());case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.handleShowRewardedVideoAd=(0,a.Z)(h().mark((function e(){var t,i,r,s;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.scene,i=t.audio,r=t.game,e.prev=1,n.viewAdButton.setDisabled(!0),n.viewAdButton.setAlpha(1),r.globalScene.screen.open(Vr.o4.NOTIFY_SCREEN,{message:"Loading ads...",duration:0,loading:!0}),i.pauseMusic(),e.next=8,new(l())((function(e,t){var i;null==(i=n.adsTimer)||i.remove(),n.adsTimer=n.scene.time.delayedCall(gc.Network.Timeout,t),n.scene.ads.getAdStatus(GameCore.Ads.Types.REWARDED)===GameCore.Ads.Status.LOADING?n.scene.ads.events.once(GameCore.Ads.Events.LOADED,e):n.scene.ads.preloadRewardedVideoAsync().then(e).catch(t)}));case 8:return e.next=10,n.scene.ads.showRewardedVideoAsync();case 10:r.globalScene.screen.close(Vr.o4.NOTIFY_SCREEN),n.resetDailyQuests(),e.next=21;break;case 14:if(e.prev=14,e.t0=e.catch(1),!(e.t0 instanceof Object&&GameCore.Utils.Object.hasOwn(e.t0,"code"))){e.next=20;break}if("USER_INPUT"!==e.t0.code){e.next=20;break}return n.showNotifySkipAds(),e.abrupt("return");case 20:n.showNotifyNoAds();case 21:return e.prev=21,n.scene.ads.preloadRewardedVideoAsync().catch((function(e){})),null==(s=n.adsTimer)||s.destroy(),n.scene.audio.playMusic(),n.viewAdButton.setDisabled(!1),e.finish(21);case 27:case"end":return e.stop()}}),e,null,[[1,14,21,27]])}))),n.showNotifyNoAds=function(){n.scene.game.globalScene.screen.open(Vr.o4.NOTIFY_SCREEN,{message:"No ads to display!",duration:1200,loading:!1})},n.handleDailyQuestClick=function(){},n.createMainContainer(),n.createLoading(),n.createCompletedContainer(),n.createViewAdButton(),n.createStopWatch(),n.createMask(),n.createCancelationToken(),n.createIconContainer(),n.createFlyingBalls(),n.addZone(),n.createDebug(),n.alignUI(),n}(0,o.Z)(t,e);var n=t.prototype;return n.alignUI=function(){},n.addZone=function(){var e=this.scene.gameZone,t=e.width,n=e.height;this.zone=this.scene.add.zone(t/2,n/2,t,n),this.zone.setDepth(za.Z.POPUP)},n.createDebug=function(){var e=this;if(GameCore.Utils.Valid.isDebugger()){var t=this.scene.add.container();t.add(new dc(this.scene,{text:"Reset\nQuests",callback:function(){e.scene.dailyQuest.resetNewDailyQuest(),e.processDailyQuests(),e.processAsyncQueue()}})),t.add(new dc(this.scene,{text:"Add\n5 exp",callback:function(){e.scene.setDisabledButton(!0),e.scene.dailyQuest.increaseExp(5),e.processDailyQuests(),e.processAsyncQueue().then((function(){e.scene.setDisabledButton(!1)}))}})),t.add(new dc(this.scene,{text:"Add\n10 exp",callback:function(){e.scene.setDisabledButton(!0),e.scene.dailyQuest.increaseExp(10),e.processDailyQuests(),e.processAsyncQueue().then((function(){e.scene.setDisabledButton(!1)}))}})),t.add(new dc(this.scene,{text:"Add\n50 exp",callback:function(){e.scene.setDisabledButton(!0),e.scene.dailyQuest.increaseExp(50),e.processDailyQuests(),e.processAsyncQueue().then((function(){e.scene.setDisabledButton(!1)}))}})),this.add(t);var n=t.list.length,i=Math.ceil(n/5),r=Math.ceil(n/i),s=42.5;t.setSize(s*r,s*i),t.list.forEach((function(e,t){var n=t%i,a=Math.floor(t/i);e.setPosition(s*(-r/2+.5+a),s*(-i/2+.5+n))})),Phaser.Display.Align.To.BottomCenter(t,this,0,0)}},n.createMainContainer=function(){this.mainContainer=new Vo(this.scene,this.width,this.height),this.add(this.mainContainer)},n.createLoading=function(){this.loading=new Ao.Z(this.scene),this.add(this.loading),this.setVisibleLoading(!1)},n.createCompletedContainer=function(){this.completedContainer=new Ko(this.scene,this.width,this.height),this.completedContainer.kill(),this.add(this.completedContainer)},n.createViewAdButton=function(){this.viewAdButton=new qo(this.scene,this),this.viewAdButton.onClick=this.handleShowRewardedVideoAd,Phaser.Display.Align.In.BottomCenter(this.viewAdButton,this,0,this.viewAdButton.height/2-10),this.viewAdButton.kill(),this.add(this.viewAdButton)},n.createStopWatch=function(){this.stopWatch=new oc(this.scene,this),Phaser.Display.Align.In.BottomCenter(this.stopWatch,this.button,0,7.5),this.add(this.stopWatch)},n.createMask=function(){var e;null==(e=this.maskGraphics)||e.destroy(),this.maskGraphics=this.scene.make.graphics({fillStyle:{color:255,alpha:1},visible:!0}),this.maskGraphics.setName("MaskGraphics");var t=this.width-10,n=this.height;this.maskGraphics.fillRoundedRect(0-t/2,0-n/2,t,n,0),this.geometryMask=this.maskGraphics.createGeometryMask()},n.createCancelationToken=function(){this.cancelationToken=new cc},n.createIconContainer=function(){this.countText=new ho.Z(this.scene,{text:"",fontSize:this.scene.fontSize(16),strokeColor:2961294,strokeThickness:2.2,strokeOffset:{y:.5}}),this.countText.setCenterAlign(),this.countText.kill(),this.originalTextScale=this.countText.scale,this.countText.kill(),this.countText.setDepth(za.Z.ON_TOP)},n.createFlyingBalls=function(){var e=ja.Z.EFFECTS,t=e.KEY,n=e.FRAME,i=this.scene.world.getWorldSize(),r=i.width,s=i.height;this.redBallContainer=this.scene.add.container(),this.redBallContainer.setPosition(43.14928/2.88,44.42989/2.88),this.redBall=this.scene.add.image(0,0,t,n.BLANK),this.redBall.setPosition(-2.52969/2.88,-4.06458/2.88).setAlpha(0).setWorldSize(213/2.88,215/2.88),this.redBallAdd=this.scene.add.image(0,0,t,n.BLANK),this.redBallAdd.setPosition(-2.52969/2.88,-4.06458/2.88).setBlendMode(Phaser.BlendModes.ADD).setAlpha(0).setWorldSize(213/2.88,215/2.88),this.redBallContainer.add([this.redBall,this.redBallAdd]),this.greenBallContainer=this.scene.add.container(),this.greenBallContainer.setPosition(-3.44065/2.88,108.5879/2.88),this.greenBall=this.scene.add.image(0,0,t,n.BLANK),this.greenBall.setPosition(0,-6.63058/2.88).setAlpha(0).setWorldSize(215/2.88,215/2.88),this.greenBallAdd=this.scene.add.image(0,0,t,n.BLANK),this.greenBallAdd.setPosition(0,-6.63058/2.88).setBlendMode(Phaser.BlendModes.ADD).setAlpha(0).setWorldSize(215/2.88,215/2.88),this.greenBallContainer.add([this.greenBall,this.greenBallAdd]),this.yellowBallContainer=this.scene.add.container(),this.yellowBallContainer.setPosition(-46.88669/2.88,33.35387/2.88),this.yellowBall=this.scene.add.image(0,0,t,n.BLANK),this.yellowBall.setPosition(0,-2.35657/2.88).setAlpha(0).setWorldSize(212/2.88,212/2.88),this.yellowBallAdd=this.scene.add.image(0,0,t,n.BLANK),this.yellowBallAdd.setPosition(0,-2.35657/2.88).setBlendMode(Phaser.BlendModes.ADD).setAlpha(0).setWorldSize(212/2.88,212/2.88),this.yellowBallContainer.add([this.yellowBall,this.yellowBallAdd]),[this.redBallContainer,this.greenBallContainer,this.yellowBallContainer].forEach((function(e){e.setDepth(za.Z.ON_TOP+3),e.x+=r/2,e.y+=s/2,e.kill()}))},n.runCountTextAnimation=function(e,t){var n=this;if(void 0===t&&(t=0),e>1){this.countText.setText("x"+e);var i=this.mainContainer.getQuestBlockPosition();this.countText.setPosition(i.x,i.y-35),this.scene.tweens.add({targets:this.countText,duration:900,delay:t+600,ease:Phaser.Math.Easing.Back.Out,props:{scale:{from:.7*this.originalTextScale,to:1.2*this.originalTextScale,ease:Phaser.Math.Easing.Bounce.Out},alpha:{start:0,from:0,to:1}},onStart:function(){n.countText.revive()},onComplete:function(){n.countText.kill(),n.countText.setScale(n.originalTextScale)}})}else this.countText.kill()},n.createTweenPromise=function(e){var t,n,i=this,r=new(l())((function(e,i){t=i,n=e})),s=this.scene.tweens.add(e);s.once(Phaser.Tweens.Events.TWEEN_COMPLETE,(function(){i.cancelationToken.unregister(a),n()}));var a=function(){s.remove(),t(new Error("Tween cancelate"))};return this.cancelationToken.register(a),{tween:s,promise:r}},n.getRemainTime=function(){return this.scene.dailyQuest.getRemainingTime()},n.createCountdownTimer=function(){var e;null==(e=this.countdownTimer)||e.destroy(),this.countdownTimer=this.scene.time.addEvent({loop:!0,delay:1e3,startAt:1e3,callback:this.updateCountdown})},n.updateRemainTimeText=function(e){var t=(0,bo.F0)(e,!0);this.scene.dailyQuest.isRewardedAllTasks()?this.completedContainer.setRemainTimeText(t):this.stopWatch.setText(t)},n.updateMainContainer=function(){this.mainContainer.revive(),this.mainContainer.setX(0);var e=this.scene.dailyQuest.getCurrentLevelReward(),t=this.scene.dailyQuest.getCurrentQuestData();t&&this.mainContainer.setTargetProgress(t.target),e&&this.mainContainer.updateShowedBlocks(e)},n.setVisibleLoading=function(e){e&&this.loading.setRotation(0),this.loading.setVisible(e)},n.showNotifySkipAds=function(){this.scene.game.globalScene.screen.open(Vr.o4.NOTIFY_SCREEN,{message:"Sorry, No Rewards!\nYou have cancelled the ad!",duration:1500,loading:!1})},n.updateMask=function(){var e=this.getWorldPosition(),t=e.x,n=e.y;this.maskGraphics.setPosition(t,n)},t}(an.Z),Ec=n(620),Sc=ja.Z.DEFAULT,wc=Sc.KEY,Ic=Sc.FRAME,Ac=function(e){function t(t){var n;(n=e.call(this,t)||this).scene=void 0,n.goldScrewBar=void 0,n.silverScrewBar=void 0,n.settingButton=void 0,n.avatarFrame=void 0,n.dailyQuests=void 0,n.sparkExplosive1=void 0,n.sparkExplosive2=void 0,n.scene=t;var i=n.scene.gameZone.width;return n.scene.world.isPortrait()||(i=GameCore.Configs.Game.PortraitWidth),n.setSize(i,200),n.createUI(),n.scene.add.existing((0,Ka.Z)(n)),n}(0,o.Z)(t,e);var n=t.prototype;return n.createUI=function(){this.createGoldScrewBar(),this.createSilverScrewBar(),this.createSettingButton(),this.createAvatarFrame(),this.createDailyQuests(),this.createFireWork()},n.createGoldScrewBar=function(){this.goldScrewBar=new Io(this.scene),this.add(this.goldScrewBar)},n.createSilverScrewBar=function(){this.silverScrewBar=new Io(this.scene),this.silverScrewBar.setIconFrame({FILE:Ic.ICON_SCREW_SILVER.FILE,WIDTH:.62*Ic.ICON_SCREW_SILVER.WIDTH,HEIGHT:.62*Ic.ICON_SCREW_SILVER.HEIGHT}),this.add(this.silverScrewBar)},n.createSettingButton=function(){var e=Ic.BUTTON_SETTING,t=e.FILE,n=e.WIDTH,i=e.HEIGHT;this.settingButton=new an.Z(this.scene,wc,t,n,i),this.add(this.settingButton)},n.createAvatarFrame=function(){var e=Ic.AVATAR_FRAME,t=e.FILE,n=e.WIDTH,i=e.HEIGHT,r=this.scene.player.getPlayerId(),s=this.scene.player.getPlayer().photo;this.avatarFrame=new Co(this.scene,{id:r,url:s,width:n,height:i,key:wc,frame:t,background:Ic.BLANK}),this.add(this.avatarFrame),this.avatarFrame.background.setTint(0).setWorldSize(.75*n,.75*i),Phaser.Display.Align.In.Center(this.avatarFrame.background,this.avatarFrame,-1,-1)},n.createDailyQuests=function(){this.dailyQuests=new yc(this.scene),this.add(this.dailyQuests)},n.createFireWork=function(){this.sparkExplosive1=new Ec.Z(this.scene),this.sparkExplosive2=new Ec.Z(this.scene),this.sparkExplosive1.setDepth(za.Z.EFFECT),this.sparkExplosive2.setDepth(za.Z.EFFECT)},n.runGoldScrewBarAnimation=function(){var e=this.goldScrewBar.getIcon(),t=e.scale;this.scene.tweens.add({targets:e,scaleX:1.25*t,scaleY:1.25*t,duration:100,yoyo:!0});var n=e.getWorldPosition(),i=n.x,r=n.y;this.sparkExplosive1.explode(30,i,r,30)},n.runSilverScrewBarAnimation=function(){var e=this.silverScrewBar.getIcon(),t=e.scale;this.scene.tweens.add({targets:e,scaleX:1.25*t,scaleY:1.25*t,duration:100,yoyo:!0});var n=e.getWorldPosition(),i=n.x,r=n.y;this.sparkExplosive2.explode(30,i,r,30)},t}(Phaser.GameObjects.Container),Tc=Ac,Cc=function(e){return e.PREVIOUS="PREVIOUS",e.CURRENT="CURRENT",e.NEXT="NEXT",e}({}),bc=ja.Z.DEFAULT,Pc=bc.KEY,xc=bc.FRAME,Rc=function(e){function t(t,n,i){var r;return(r=e.call(this,t)||this).level=void 0,r.levelState=void 0,r.icon=void 0,r.text=void 0,r.level=n,r.levelState=i,r.createIcon(),r.createText(),r.setSize(50,46),t.add.existing((0,Ka.Z)(r)),r}(0,o.Z)(t,e);var n=t.prototype;return n.createIcon=function(){this.icon=this.scene.add.image(0,0,Pc,xc.DASHBOARD_GREY_LEVEL.FILE),this.icon.setWorldSize(xc.DASHBOARD_GREY_LEVEL.WIDTH,xc.DASHBOARD_GREY_LEVEL.HEIGHT),Phaser.Display.Align.In.Center(this.icon,this),this.add(this.icon)},n.createText=function(){this.text=new ho.Z(this.scene,{text:this.level.toString(),fontSize:this.scene.fontSize(18),strokeColor:0,strokeThickness:3,strokeOffset:{y:.5}}),Phaser.Display.Align.In.Center(this.text,this.icon),this.add(this.text)},n.updateLevel=function(e,t){if(this.level=e,this.text.setText(this.level.toString()),e<10?this.text.setFontSize(this.scene.fontSize(27)):e<100?this.text.setFontSize(this.scene.fontSize(24)):e<1e3?this.text.setFontSize(this.scene.fontSize(21)):this.text.setFontSize(this.scene.fontSize(18)),t)switch(this.levelState=t,this.levelState){case Cc.PREVIOUS:this.icon.setTexture(Pc,xc.DASHBOARD_BROWN_LEVEL.FILE),this.icon.setWorldSize(xc.DASHBOARD_BROWN_LEVEL.WIDTH,xc.DASHBOARD_BROWN_LEVEL.HEIGHT),this.text.setTintSeparate(15769421,6895128);break;case Cc.CURRENT:this.icon.setTexture(Pc,xc.DASHBOARD_GREEN_LEVEL.FILE),this.icon.setWorldSize(xc.DASHBOARD_GREEN_LEVEL.WIDTH,xc.DASHBOARD_GREEN_LEVEL.HEIGHT),this.text.setTintSeparate(16777215,2322450);break;case Cc.NEXT:this.icon.setTexture(Pc,xc.DASHBOARD_GREY_LEVEL.FILE),this.icon.setWorldSize(xc.DASHBOARD_GREY_LEVEL.WIDTH,xc.DASHBOARD_GREY_LEVEL.HEIGHT),this.text.setTintSeparate(13553358,4934475)}},t}(Phaser.GameObjects.Container),Oc=Rc,_c=n(605),kc=n.n(_c),Dc=GameCore.Configs.Gameplay,Lc=1364,Bc=function(e){function t(){for(var t,n,i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return(n=e.call.apply(e,x()(t=[this]).call(t,r))||this).level=1,n.maxLevel=1,n.lastCompleteLevel=1,n.promisePreloadLevel={},n.loadedLevel={},n.step=1,n}(0,o.Z)(t,e);var n=t.prototype;return n.getLevel=function(){return this.level},n.getLevelWithStep=function(){var e=1===this.step?.1:.2;return this.level+e},n.getMaxLevel=function(){return this.maxLevel},n.setLevel=function(e){e>Lc&&!Dc.UseLoopLevel&&(e=Lc),this.level=e,this.maxLevel=Math.max(this.maxLevel,e)},n.setMaxLevel=function(e){e>Lc&&!Dc.UseLoopLevel&&(e=Lc),this.maxLevel=e,this.game.player.updatePlayerLevel(e)},n.setLevelCustom=function(e){this.loadedLevel[this.getKeyLevel(this.level)]=e},n.nextLevel=function(){this.lastCompleteLevel=this.level,this.level>=Lc&&!Dc.UseLoopLevel||(this.level+=1,this.maxLevel=Math.max(this.level,this.maxLevel),this.preloadLevelDataAsync(this.level),this.preloadLevelDataAsync(this.level+1))},n.getKeyLevel=function(e){var t;return e>Lc&&Dc.UseLoopLevel?e%=1064:e>Lc&&(e=Lc),"level_"+kc()(t=GameCore.Utils.Number).call(t,e,6)},n.preloadLevelDataAsync=function(){var e=(0,a.Z)(h().mark((function e(t){var n,i,r;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=t||this.level,i=this.getKeyLevel(t),(!Ae()(n=te()(this.promisePreloadLevel)).call(n,i)||GameCore.Configs.Level.alwaysLoadNew)&&(this.promisePreloadLevel[i]=this.preloadLevel(t)),e.next=6,this.promisePreloadLevel[i];case 6:if(r=e.sent){e.next=13;break}return delete this.promisePreloadLevel[i],this.promisePreloadLevel[i]=this.preloadLevel(t),e.abrupt("return",this.promisePreloadLevel[i]);case 13:return this.loadedLevel[i]=r,e.abrupt("return",r);case 15:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.preloadLevel=function(){var e=(0,a.Z)(h().mark((function e(t){var n,i,r,s;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,i=this.getKeyLevel(t),r=GameCore.Configs.Level.url,e.next=5,fetch(""+r+i+".json",{method:"GET"});case 5:return s=e.sent,e.next=8,s.json();case 8:n=e.sent,e.next=14;break;case 11:return e.prev=11,e.t0=e.catch(0),e.abrupt("return",void 0);case 14:return e.abrupt("return",n);case 15:case"end":return e.stop()}}),e,this,[[0,11]])})));return function(t){return e.apply(this,arguments)}}(),n.getLevelDataAsync=function(){var e=(0,a.Z)(h().mark((function e(t){var n;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.preloadLevelDataAsync(t||this.level);case 3:return n=e.sent,e.abrupt("return",n);case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return");case 10:case"end":return e.stop()}}),e,this,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),n.getLevelData=function(e){var t=this.getKeyLevel(e||this.level);return this.loadedLevel[t]},n.getStep=function(){return this.step},n.setStep=function(e){1!=e&&2!=e&&(e=1),this.step=e},n.getLastCompleteLevel=function(){return this.lastCompleteLevel},t}(Phaser.Plugins.BasePlugin),Nc=Bc,Hc=GameCore.Configs.Gameplay,Mc=ja.Z.DEFAULT,Gc=Mc.KEY,Wc=Mc.FRAME,Uc=function(e){function t(t,n,i,r){var s;return void 0===n&&(n=4),void 0===i&&(i=0),void 0===r&&(r=100),(s=e.call(this,t)||this).levelNodes=void 0,s.connectors=void 0,s.defaultIndex=1,s.setSize(s.scene.gameZone.width,s.scene.gameZone.height),s.defaultIndex=Math.floor((n+1)/2)-1,s.drawProgress(n,r),s.drawLevels(n,i,r),s.setDepth(za.Z.LOGO),t.add.existing((0,Ka.Z)(s)),s}(0,o.Z)(t,e);var n=t.prototype;return n.drawProgress=function(e,t){this.connectors=[];for(var n=0;n<=e;n++)this.connectors.push(this.scene.add.image(0,0,Gc,Wc.DASHBOARD_PROGRESS_BAR_BROWN.FILE)),this.connectors[n].setWorldSize(Wc.DASHBOARD_PROGRESS_BAR_BROWN.WIDTH,t);this.add(this.connectors)},n.drawLevels=function(e,t,n){var i=this.scene.level.getLevel();this.levelNodes=[];for(var r=0;r<e;r++)this.levelNodes.push(new Oc(this.scene,i+r,Cc.NEXT));Phaser.Display.Align.In.Center(this.levelNodes[0],this,0,t),Phaser.Display.Align.In.Center(this.connectors[0],this.levelNodes[0],0,this.levelNodes[0].height/2);for(var s=1;s<this.levelNodes.length;s++)Phaser.Display.Align.In.TopCenter(this.levelNodes[s],this.levelNodes[s-1],0,n),Phaser.Display.Align.In.Center(this.connectors[s],this.levelNodes[s],0,this.levelNodes[s].height/2);Phaser.Display.Align.In.Center(this.connectors[e],this.levelNodes[this.levelNodes.length-1],0,-this.levelNodes[this.levelNodes.length-1].height/2),this.add(this.levelNodes)},n.updateLevelTexts=function(){var e=this.scene.level.getLevel();if(e===Hc.StartLevel||e<=this.defaultIndex){var t=e-1;this.levelNodes[t].updateLevel(e,Cc.CURRENT),this.connectors[t].setFrame(Wc.DASHBOARD_PROGRESS_BAR_GREEN.FILE);for(var n=t+1;n<this.levelNodes.length;n++)this.levelNodes[n].updateLevel(e+(n-t),Cc.NEXT),this.connectors[n].setFrame(Wc.DASHBOARD_PROGRESS_BAR_BROWN.FILE);for(var i=t-1;i>=0;i--)this.levelNodes[i].updateLevel(e-(t-i),Cc.PREVIOUS),this.connectors[i].setFrame(Wc.DASHBOARD_PROGRESS_BAR_GREEN.FILE);this.connectors[this.levelNodes.length].setVisible(!0)}else if(e!==Lc||Hc.UseLoopLevel)if(e>=Lc-(this.levelNodes.length-this.defaultIndex-1)&&!Hc.UseLoopLevel){var r=this.levelNodes.length-(Lc-e)-1;this.levelNodes[r].updateLevel(e,Cc.CURRENT),this.connectors[r].setFrame(Wc.DASHBOARD_PROGRESS_BAR_GREEN.FILE);for(var s=r-1;s>=0;s--)this.levelNodes[s].updateLevel(e-(r-s),Cc.PREVIOUS),this.connectors[s].setFrame(Wc.DASHBOARD_PROGRESS_BAR_GREEN.FILE);for(var a=r+1;a<this.levelNodes.length;a++)this.levelNodes[a].updateLevel(e+(a-r),Cc.NEXT),this.connectors[a].setFrame(Wc.DASHBOARD_PROGRESS_BAR_BROWN.FILE);this.connectors[this.levelNodes.length].setVisible(!1)}else{var o=this.defaultIndex;this.levelNodes[o].updateLevel(e,Cc.CURRENT),this.connectors[o].setFrame(Wc.DASHBOARD_PROGRESS_BAR_GREEN.FILE);for(var c=o-1;c>=0;c--)this.levelNodes[c].updateLevel(e-(o-c),Cc.PREVIOUS),this.connectors[c].setFrame(Wc.DASHBOARD_PROGRESS_BAR_GREEN.FILE);for(var l=o+1;l<this.levelNodes.length;l++)this.levelNodes[l].updateLevel(e+(l-o),Cc.NEXT),this.connectors[l].setFrame(Wc.DASHBOARD_PROGRESS_BAR_BROWN.FILE);e+(this.levelNodes.length-this.defaultIndex-1)>=Lc&&!Hc.UseLoopLevel?this.connectors[this.levelNodes.length].setVisible(!1):this.connectors[this.levelNodes.length].setVisible(!0)}else{var u=this.levelNodes.length-1;this.levelNodes[u].updateLevel(e,Cc.CURRENT),this.connectors[u].setFrame(Wc.DASHBOARD_PROGRESS_BAR_GREEN.FILE);for(var h=u-1;h>=0;h--)this.levelNodes[h].updateLevel(e-(u-h),Cc.PREVIOUS),this.connectors[h].setFrame(Wc.DASHBOARD_PROGRESS_BAR_GREEN.FILE);this.connectors[this.levelNodes.length].setVisible(!1)}},t}(Phaser.GameObjects.Container),Fc=Uc,Zc=ja.Z.DEFAULT,Yc=(Zc.KEY,Zc.FRAME),Vc=function(e){function t(t){var n;(n=e.call(this,t)||this).shopButton=void 0,n.adsButton=void 0,n.levelVisualizer=void 0;var i=n.scene.gameZone.width;return n.scene.world.isPortrait()||(i=GameCore.Configs.Game.PortraitWidth),n.setSize(i,200),n.createUI(),n.alignUI(),n.scene.add.existing((0,Ka.Z)(n)),n}(0,o.Z)(t,e);var n=t.prototype;return n.createUI=function(){this.createLogo(),this.createLevelVisualizer()},n.alignUI=function(){},n.createLogo=function(){},n.createShopButton=function(){},n.createAdsButton=function(){},n.createLevelVisualizer=function(){var e=this.scene.gameZone.height/2-this.scene.ads.getBannerHeight()-30-Yc.DASHBOARD_BROWN_LEVEL.HEIGHT-Yc.BUTTON_GREEN.HEIGHT,t=Math.max(1,Math.min(6,Math.ceil((this.scene.gameZone.height/2+e-140)/100))),n=(this.scene.gameZone.height/2+e-140)/t;this.levelVisualizer=new Fc(this.scene,t,e,n),this.levelVisualizer.setPosition(0,0),this.add(this.levelVisualizer)},n.createPlayWithFriendButton=function(){},t}(Phaser.GameObjects.Container),zc=Vc,Kc=n(621),jc=ja.Z.DEFAULT,Xc=jc.KEY,Qc=jc.FRAME,qc=function(e){function t(t,n,i,r){var s;return(s=e.call(this,t,{key:Xc,frame:n||Qc.ICON_X_DARK.FILE,width:i||Qc.ICON_X_DARK.WIDTH,height:r||Qc.ICON_X_DARK.HEIGHT,paddingZone:15})||this).updateSize(),s.setName("CloseButton"),s}return(0,o.Z)(t,e),t}(Kc.Z),Jc=qc,$c=n(447),el=ja.Z.DEFAULT,tl=(el.KEY,el.FRAME,function(e){function t(t,n,i){var r;return(r=e.call(this,t,n)||this).popup=void 0,r.titleText=void 0,r.closeButton=void 0,r.popupWidth=void 0,r.popupHeight=void 0,r.handleClose=function(){r.runCloseAnimation()},r.popupWidth=i.popupWidth,r.popupHeight=i.popupHeight,r.setDepth(Vr.Ks.POPUP),r.background.setAlpha(.8),r}(0,o.Z)(t,e);var n=t.prototype;return n.open=function(t){e.prototype.open.call(this)},n.createUI=function(){this.createPopup(),this.createTitleText(),this.createButtonClose(),this.createAnimation()},n.createAnimation=function(){this.entranceAnimation.addAnimation(this.popup.entranceAnimation),this.exitAnimation.addAnimation(this.popup.exitAnimation)},n.alignUI=function(){this.popup.setPosition(0,0),Phaser.Display.Align.In.TopRight(this.closeButton,this.popup,-10,-3),Phaser.Display.Align.In.TopCenter(this.titleText,this.popup,0,-5),Phaser.Display.Align.In.Center(this.popup,this.zone)},n.createPopup=function(){this.popup=new $c.Z(this.scene,{width:this.popupWidth,height:this.popupHeight}),this.add(this.popup)},n.createTitleText=function(){this.titleText=new ho.Z(this.scene,{text:"TITLE",fontSize:this.scene.fontSize(25),strokeColor:9194534,strokeThickness:3,strokeAlpha:.35,strokeOffset:{y:1}}).setTint(16509640),this.popup.add(this.titleText)},n.createButtonClose=function(){this.closeButton=new Jc(this.scene),this.popup.add(this.closeButton)},n.createInput=function(){this.closeButton.useSound=!1,this.closeButton.onClick=this.handleClose},t}(GameCore.Screen)),nl=tl,il=ja.Z.GAMEPLAY,rl=(il.KEY,il.FRAME,function(e){function t(t,n){var i;return(i=e.call(this,t,n,{popupWidth:878/3,popupHeight:245})||this).scene=void 0,i.text=void 0,i.open=function(){e.prototype.open.call((0,Ka.Z)(i)),i.scene.audio.playSound(Xa.Z.POPUP_SHOW),i.runOpenAnimation()},i.scene=t,i.createUI(),i.alignUI(),i.createInput(),i}(0,o.Z)(t,e);var n=t.prototype;return n.createUI=function(){e.prototype.createUI.call(this),this.titleText.setText("YOUR TITLE"),this.createText()},n.alignUI=function(){e.prototype.alignUI.call(this),this.popup.setPosition(0,0),Phaser.Display.Align.In.TopCenter(this.text,this.popup,0,-70),Phaser.Display.Align.In.Center(this.popup,this.zone)},n.createInput=function(){e.prototype.createInput.call(this)},n.createText=function(){this.text=new ho.Z(this.scene,{text:"This is a base popup screen",fontSize:this.scene.fontSize(20)}).setCenterAlign().setTint(10180132),this.popup.add(this.text)},t}(nl)),sl=rl,al=n(450),ol=n(451),cl=n(446),ll=n(90),ul={targets:[],duration:600,ease:Phaser.Math.Easing.Back.Out,props:{y:{from:250,to:0},scale:{from:.9,to:1},alpha:{start:0,from:0,to:1}}},hl=function(e){function t(t){return e.call(this,ul,t)||this}return(0,o.Z)(t,e),t}(ll.Z),dl=hl,pl=ja.Z.DEFAULT,fl=pl.KEY,vl=pl.FRAME,ml=function(e){function t(t,n,i,r,s){var a;return(a=e.call(this,t,n,i)||this).barTopLeft=void 0,a.barTopMid=void 0,a.barTopRight=void 0,a.barMidLeft=void 0,a.barMidBg=void 0,a.barMidRight=void 0,a.barBottomLeft=void 0,a.barBottomMid=void 0,a.barBottomRight=void 0,a.setSize(r,s),a.setDepth(za.Z.POPUP),a.createPopup(),a.scene.add.existing((0,Ka.Z)(a)),a}(0,o.Z)(t,e);var n=t.prototype;return n.createPopup=function(){this.createPopupImages(),this.updatePopupSize(),this.alignPopupImages()},n.createPopupImages=function(){this.barTopLeft=this.scene.add.image(0,0,fl,vl.BLANK),this.barTopMid=this.scene.add.image(0,0,fl,vl.BLANK),this.barTopRight=this.scene.add.image(0,0,fl,vl.BLANK),this.barMidLeft=this.scene.add.image(0,0,fl,vl.BLANK),this.barMidBg=this.scene.add.image(0,0,fl,vl.BLANK),this.barMidRight=this.scene.add.image(0,0,fl,vl.BLANK),this.barBottomLeft=this.scene.add.image(0,0,fl,vl.BLANK),this.barBottomMid=this.scene.add.image(0,0,fl,vl.BLANK),this.barBottomRight=this.scene.add.image(0,0,fl,vl.BLANK),this.barTopLeft.setWorldSize(65,48),this.barTopMid.setWorldSize(65,48),this.barTopRight.setWorldSize(65,48),this.barMidLeft.setWorldSize(65,48),this.barMidBg.setWorldSize(65,48),this.barMidRight.setWorldSize(65,48),this.barBottomLeft.setWorldSize(65,48),this.barBottomMid.setWorldSize(65,48),this.barBottomRight.setWorldSize(65,48),this.add([this.barTopRight,this.barTopMid,this.barBottomLeft,this.barBottomRight,this.barMidLeft,this.barMidRight,this.barTopLeft,this.barBottomMid,this.barMidBg])},n.updatePopupSize=function(){this.barTopMid.setWorldSize(this.width-129,this.barTopMid.height),this.barMidLeft.setWorldSize(this.barMidLeft.width,this.height-95),this.barMidBg.setWorldSize(this.width-129,this.height-95),this.barMidRight.setWorldSize(this.barMidRight.width,this.height-95),this.barBottomMid.setWorldSize(this.width-129,this.barBottomMid.height)},n.alignPopupImages=function(){Phaser.Display.Align.In.TopLeft(this.barTopLeft,this),Phaser.Display.Align.In.TopCenter(this.barTopMid,this),Phaser.Display.Align.In.TopRight(this.barTopRight,this),Phaser.Display.Align.In.LeftCenter(this.barMidLeft,this),Phaser.Display.Align.In.Center(this.barMidBg,this),Phaser.Display.Align.In.RightCenter(this.barMidRight,this),Phaser.Display.Align.In.BottomLeft(this.barBottomLeft,this),Phaser.Display.Align.In.BottomCenter(this.barBottomMid,this),Phaser.Display.Align.In.BottomRight(this.barBottomRight,this)},(0,ce.Z)(t,[{key:"onClose",set:function(e){this.setInteractive({useHandCursor:!0}),this.on(Phaser.Input.Events.GAMEOBJECT_POINTER_DOWN,e)}}]),t}(Phaser.GameObjects.Container),gl=ml,yl=n(445),El=[{id:1,type:"diamond",value:50},{id:2,type:"diamond",value:75},{id:3,type:"diamond",value:100},{id:4,type:"diamond",value:125},{id:5,type:"diamond",value:150},{id:6,type:"diamond",value:200}],Sl=function(){var e=(0,a.Z)(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",El);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),wl={REWARDED:"rewarded",SKIPPED:"skipped",READY:"ready",WAITING:"waiting"},Il=(0,de.P1)([function(e){var t;return null==(t=e[Ui])?void 0:t.rewards}],(function(e){return e})),Al=(0,de.P1)([function(e){var t;return null==(t=e[Ui])?void 0:t.isRequesting}],(function(e){return e})),Tl=GameCore.Configs.DailyRewards,Cl=function(e){return function(t){var n,i=window.game.player.getCustomData("dailyRewarded")||{},s=i.logDays,a=void 0===s?[]:s,o=i.lastRewarded,c=void 0===o?0:o,l=new Date,u=new Date(c),h=new Date(u.toDateString()),d=Math.abs(l.valueOf()-h.valueOf()),p=Math.floor(d/864e5)>1,f=Tl.CheckInterrupt&&p||a.length>=Tl.MaxDays,v=f?[!1]:x()(n=[]).call(n,a,[!1]);bl(v);var m=De()(e).call(e,(function(e,t){var n=t<v.length,i=v.length===t+1,s=!1===v[t],a=wl.WAITING;return i?a=wl.READY:f?a=wl.WAITING:n&&s?a=wl.SKIPPED:n&&(a=wl.REWARDED),(0,r.Z)({},e,{status:a})}));t({type:Zi,payload:{rewards:m}})}},bl=function(e,t){void 0===t&&(t=!1),window.game.player.setCustomData("dailyRewarded",{logDays:e,lastRewarded:t?0:Date.now()})},Pl=n(105),xl=n.n(Pl),Rl=xl()(.55,.47,.43,.91),Ol=Rl,_l={targets:[],yoyo:!0,repeat:-1,duration:600,repeatDelay:50,ease:Ol,easeParams:[0,.9],props:{scale:{from:1,to:1.2}}},kl=function(e){function t(t){return e.call(this,_l,t)||this}return(0,o.Z)(t,e),t}(ll.Z),Dl=kl,Ll=n(449),Bl=ja.Z.DEFAULT,Nl=Bl.KEY,Hl=Bl.FRAME,Ml=function(e){function t(t,n){var i;return(i=e.call(this,t)||this).payload=void 0,i.background=void 0,i.blockBg=void 0,i.titleBg=void 0,i.titleText=void 0,i.iconStatus=void 0,i.currencyIcon=void 0,i.currencyText=void 0,i.label=void 0,i.starTwinkleUp=void 0,i.pulsateBubbleAnimation=void 0,i.payload=n,i.setName("Day: "+n.day),i.draw(),i.setStatus(),i}(0,o.Z)(t,e);var n=t.prototype;return n.setStatus=function(){switch(this.payload.status){case wl.READY:this.setStatusReady(),this.runAnimations();break;case wl.SKIPPED:this.setStatusSkipped();break;case wl.REWARDED:this.setStatusRewarded();break;default:this.setStatusWaiting()}},n.setStatusReady=function(){this.blockBg.setVisible(!1),this.titleBg.setFrame(Hl.DAILY_DAY_TITLE_ORANGE),this.setCurrentIconByDay(this.payload.day)},n.setStatusRewarded=function(){this.iconStatus.setVisible(!0),this.blockBg.setFrame(Hl.DAILY_DAY_BG_OPEN),this.titleBg.setFrame(Hl.DAILY_DAY_TITLE_GREEN),this.iconStatus.setFrame(Hl.BLANK),this.setCurrentIconByDay(this.payload.day)},n.setStatusSkipped=function(){this.iconStatus.setVisible(!0),this.blockBg.setFrame(Hl.DAILY_DAY_BG_OPEN),this.titleBg.setFrame(Hl.DAILY_DAY_TITLE_GREEN),this.iconStatus.setFrame(Hl.BLANK),this.setCurrentIconByDay(this.payload.day)},n.setStatusWaiting=function(){this.setCurrentIconByDay(this.payload.day)},n.setCurrentIconByDay=function(e){var t=Hl.BLANK;switch(e){case 1:t=Hl.BLANK,this.currencyIcon.setFrame(t),this.currencyIcon.setWorldSize(38.5,36.5);break;case 2:t=Hl.BLANK,this.currencyIcon.setFrame(t),this.currencyIcon.setWorldSize(52,38);break;case 3:t=Hl.BLANK,this.currencyIcon.setFrame(t),this.currencyIcon.setWorldSize(60,40.5);break;case 4:t=Hl.BLANK,this.currencyIcon.setFrame(t),this.currencyIcon.setWorldSize(55,53.5);break;case 5:t=Hl.BLANK,this.currencyIcon.setFrame(t),this.currencyIcon.setWorldSize(62.5,54);break;case 6:t=Hl.BLANK,this.currencyIcon.setFrame(t),this.currencyIcon.setWorldSize(64,53)}},n.draw=function(){this.createBackground(),this.updateBlockSize(),this.createBlockBG(),this.createTitleBg(),this.createTitleText(),this.createLabel(),this.createCurrencyText(),this.createCurrencyIcon(),this.createIconStatus()},n.createBackground=function(){this.background=this.scene.make.image({key:Nl,frame:Hl.DAILY_DAY_BG}),this.background.setWorldSize(82,102),this.add(this.background)},n.updateBlockSize=function(){var e=this.background,t=e.width,n=e.height;this.setSize(t,n)},n.createBlockBG=function(){this.blockBg=this.scene.make.image({key:Nl,frame:Hl.DAILY_DAY_BG_WAIT}),this.blockBg.setWorldSize(76,69),this.add(this.blockBg),Phaser.Display.Align.In.BottomCenter(this.blockBg,this.background,0,-4)},n.createTitleBg=function(){this.titleBg=this.scene.make.image({key:Nl,frame:Hl.DAILY_DAY_TITLE_GREY}),this.titleBg.setWorldSize(68,25),this.add(this.titleBg),Phaser.Display.Align.In.TopCenter(this.titleBg,this,0,-1)},n.createTitleText=function(){var e=this.payload.day;this.titleText=this.scene.make.bitmapText({font:yl.Z.PRIMARY.KEY,size:this.scene.fontSize(16),text:"DAY "+e,origin:{x:.5,y:.5}}),this.add(this.titleText),Phaser.Display.Align.In.Center(this.titleText,this.titleBg)},n.createCurrencyIcon=function(){this.currencyIcon=this.scene.make.image({key:Nl,frame:Hl.BLANK}),this.currencyIcon.setWorldSize(38.5,36.5),this.add(this.currencyIcon),Phaser.Display.Align.In.Center(this.currencyIcon,this.background)},n.createIconStatus=function(){this.iconStatus=this.scene.make.image({key:Nl,frame:Hl.BLANK}),this.iconStatus.setVisible(!1),this.iconStatus.setWorldSize(15,16),this.add(this.iconStatus),Phaser.Display.Align.In.Center(this.iconStatus,this.currencyIcon,20,10)},n.createLabel=function(){this.label=this.scene.make.image({key:Nl,frame:Hl.DAILY_DAY_LABEL}),this.label.setWorldSize(73,19),this.add(this.label),Phaser.Display.Align.In.BottomCenter(this.label,this.background,0,-5)},n.createCurrencyText=function(){var e=this.payload.value;this.currencyText=this.scene.make.bitmapText({font:yl.Z.PRIMARY.KEY,size:this.scene.fontSize(14),text:"+"+e,origin:{x:.5,y:.5}}),this.add(this.currencyText),Phaser.Display.Align.In.Center(this.currencyText,this.label,-2,-1)},n.runAnimations=function(){this.runSparksIdle()},n.runSparksIdle=function(){this.starTwinkleUp||(this.starTwinkleUp=new Ll.Z(this.scene),this.starTwinkleUp.emitter.setFrequency(100),this.add(this.starTwinkleUp));var e=this.currencyIcon,t=e.x,n=e.y,i=e.width,r=e.height;this.starTwinkleUp.run(1,t,n,i,r)},n.runPulsateBubbleAnimation=function(){this.pulsateBubbleAnimation||(this.pulsateBubbleAnimation=new Dl({targets:[this.currencyIcon],props:{scale:"+=0.04"}})),this.pulsateBubbleAnimation.play()},t}(Phaser.GameObjects.Container),Gl=Ml,Wl=ja.Z.DEFAULT,Ul=Wl.KEY,Fl=Wl.FRAME,Zl=GameCore.Configs,Yl=Zl.Network,Vl=Zl.DailyRewards,zl={id:0,type:"diamond",value:0},Kl=function(e){function t(t,n,i,r){var s;return(s=e.call(this,t,n,i,r)||this).onReward=void 0,s.onSkipAd=void 0,s.onNoAd=void 0,s.logDays=void 0,s.rewardsData=void 0,s.popup=void 0,s.loading=void 0,s.dayBlocks=void 0,s.claimButton=void 0,s.claimButton2X=void 0,s.backgroundFadeInAnimation=void 0,s.popupShowUpAnimation=void 0,s.popupExitsAnimation=void 0,s.contentShowUpAnimation=void 0,s.adsTimer=void 0,s.handleClosePopup=function(){s.runCloseAnimation()},s.handleOnClaim=function(){var e=s.getCurrentRewardValue();s.claimReward(e)},s.handleOnClaimX2=(0,a.Z)(h().mark((function e(){var t,n,i,r,a;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=s.scene,n=t.audio,i=t.game,e.prev=1,s.claimButton.setDisabled(!0),s.claimButton2X.setDisabled(!0),i.globalScene.screen.open(Vr.o4.NOTIFY_SCREEN,{message:"Loading...",duration:0,loading:!0}),n.pauseMusic(),n.muteAll(),e.next=9,new(l())((function(e,t){var n;null==(n=s.adsTimer)||n.remove(),s.adsTimer=s.scene.time.delayedCall(Yl.Timeout,t),s.scene.ads.getAdStatus(GameCore.Ads.Types.REWARDED)===GameCore.Ads.Status.LOADING?s.scene.ads.events.once(GameCore.Ads.Events.LOADED,e):s.scene.ads.preloadRewardedVideoAsync().then(e).catch(t)}));case 9:return e.next=11,s.scene.ads.showRewardedVideoAsync();case 11:i.globalScene.screen.close(Vr.o4.NOTIFY_SCREEN),r=s.getCurrentRewardValue(),s.claimReward(2*r),e.next=23;break;case 16:if(e.prev=16,e.t0=e.catch(1),!(e.t0 instanceof Object&&GameCore.Utils.Object.hasOwn(e.t0,"code"))){e.next=22;break}if("USER_INPUT"!==e.t0.code){e.next=22;break}return s.onSkipAd(),e.abrupt("return");case 22:s.onNoAd();case 23:return e.prev=23,s.scene.ads.preloadRewardedVideoAsync().catch((function(){})),s.scene.ads.preloadRewardedVideoAsync().catch((function(e){})),null==(a=s.adsTimer)||a.destroy(),n.unmuteAll(),n.playMusic(),s.claimButton.setDisabled(!1),s.claimButton2X.setDisabled(!1),e.finish(23);case 32:case"end":return e.stop()}}),e,null,[[1,16,23,32]])}))),s.updateRewardsData=(0,a.Z)(h().mark((function e(){var t,n,i,r,o,c,l,u,d;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=s.scene,i=n.storage,r=n.player,e.next=3,i.dispatch(function(){var e=(0,a.Z)(h().mark((function e(t,n){var i,r;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=n(),!Al(i)){e.next=4;break}return e.abrupt("return");case 4:return t({type:Fi,payload:{}}),e.next=7,Sl();case 7:r=e.sent,t(Cl(r));case 9:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}());case 3:if(o=i.getState(),!((null==(c=Il(o)||[])?void 0:c.length)<1)){e.next=7;break}return e.abrupt("return");case 7:s.rewardsData=c,l=r.getCustomData("dailyRewarded"),u=(l||{}).logDays,d=void 0===u?[]:u,s.logDays=x()(t=[]).call(t,d);case 11:case"end":return e.stop()}}),e)}))),s.checkOpenable=(0,a.Z)(h().mark((function e(){var t,n,i,r,a,o,c;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=s.scene.player,n=t.getCustomData("dailyRewarded"),r=(i=n||{}).logDays,a=void 0===r?[]:r,o=i.lastRewarded,c=void 0===o?0:o,!(a.length>Vl.MaxDays)){e.next=5;break}return e.abrupt("return",!0);case 5:if(!(Vl.MockTime>0)){e.next=9;break}if(!(Date.now()-c>=1e3*Vl.MockTime)){e.next=9;break}return e.abrupt("return",!0);case 9:if(!(0,bo.Gm)(c)){e.next=11;break}return e.abrupt("return",!1);case 11:return e.abrupt("return",!0);case 12:case"end":return e.stop()}}),e)}))),s.rewardsData=[],s.createPopup(),s.createPopupContents(),s.setDepth(Vr.Ks.POPUP),s.background.setAlpha(.8),s}(0,o.Z)(t,e);var n=t.prototype;return n.open=function(){var t=(0,a.Z)(h().mark((function t(){return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.checkOpenable();case 2:if(t.sent){t.next=5;break}return t.abrupt("return");case 5:return e.prototype.open.call(this),t.next=8,this.updateRewardsData();case 8:this.createDayBlocks(),this.runOpenAnimation();case 10:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),n.claimReward=function(e){var t;"function"===typeof this.onReward&&((null==(t=this.logDays)?void 0:t.length)<1||(this.logDays[this.logDays.length-1]=!0,bl(this.logDays),this.onReward(e),this.scene.audio.playSound(Xa.Z.DAILY_REWARD),this.runCloseAnimation()))},n.getCurrentRewardValue=function(){var e,t=O()(e=this.rewardsData).call(e,(function(e){return e.status===wl.READY}));return(null==t?void 0:t.value)||0},n.getRewardByDay=function(e){var t;return O()(t=this.rewardsData).call(t,(function(t){return t.id===e}))||zl},n.runOpenAnimation=function(){return this.setVisible(!0),this.scene.audio.playSound(Xa.Z.POPUP_SHOW),this.runBackgroundEntrancesAnimation(0,300),this.runPopupEntrancesAnimation(150,400),this.runPopupContentEntrancesAnimation(300,300),l().resolve()},n.runCloseAnimation=function(){return this.scene.audio.playSound(Xa.Z.POPUP_OFF,{volume:.6}),this.runPopupExitsAnimation(0,200),l().resolve()},n.runBackgroundEntrancesAnimation=function(e,t){this.backgroundFadeInAnimation||(this.backgroundFadeInAnimation=new al.Z({targets:[this.background],delay:e,duration:t,props:{alpha:{getStart:function(){return 0},getEnd:function(){return.8}}}})),this.backgroundFadeInAnimation.play()},n.runPopupEntrancesAnimation=function(e,t){this.popupShowUpAnimation||(this.popupShowUpAnimation=new dl({targets:[this.popup],delay:e,duration:t,props:{scale:{start:0,from:0,to:1},alpha:{start:1,from:1,to:1}}})),this.popupShowUpAnimation.play()},n.runPopupContentEntrancesAnimation=function(e,t){var n,i=this.dayBlocks.getChildren();i.length<1||(null==(n=this.contentShowUpAnimation)||n.remove(),this.contentShowUpAnimation=new cl.Z({targets:i,duration:t,delay:this.scene.tweens.stagger(150,{start:e}),props:{alpha:{start:0,from:0,to:1}}}),this.contentShowUpAnimation.play())},n.runPopupExitsAnimation=function(e,t){var n=this;this.popupExitsAnimation||(this.popupExitsAnimation=new ol.Z({targets:[this.popup],delay:e,duration:t,props:{y:250,scale:0},onComplete:function(){n.scene.screen.close(n.name)}})),this.dayBlocks.destroy(!0,!0),this.popupExitsAnimation.play()},n.createPopup=function(){this.popup=new gl(this.scene,0,0,310,390),this.add(this.popup),Phaser.Display.Align.In.Center(this.popup,this.zone)},n.createPopupContents=function(){this.createTitle(),this.createLoading(),this.createClaimButton(),this.createClaimX2Button()},n.createTitle=function(){var e=this.scene.add.container(),t=this.scene.make.image({key:Ul,frame:Fl.BLANK});t.setWorldSize(271,81);var n=this.scene.make.bitmapText({font:yl.Z.PRIMARY.KEY,size:this.scene.fontSize(30),text:"Daily Rewards"});Phaser.Display.Align.In.Center(n,t,0,-10);var i=new an.Z(this.scene,Ul,Fl.ICON_X.FILE,38,38);i.setName("Close"),i.useSound=!1,i.onClick=this.handleClosePopup,Phaser.Display.Align.In.RightCenter(i,t,-5,-5),e.add([t,n,i]),this.popup.add(e),Phaser.Display.Align.In.TopCenter(e,this.popup)},n.createLoading=function(){this.loading=new Ao.Z(this.scene),this.loading.setVisible(!1),this.loading.setTint(12237498),this.popup.add(this.loading),Phaser.Display.Align.In.Center(this.loading,this.popup)},n.createDayBlocks=function(){var e,t,n=this;null==(e=this.dayBlocks)||e.destroy(!0,!0);var i=Vl.MaxDays;this.dayBlocks=this.scene.make.group({maxSize:i}),Ns()(t=new Array(i)).call(t,null).forEach((function(e,t){var i=n.createDayBlock(t+1);n.dayBlocks.add(i)})),Phaser.Actions.GridAlign(this.dayBlocks.getChildren(),{width:3,height:2,cellWidth:92,cellHeight:112,x:-88,y:-75})},n.createDayBlock=function(e){var t=this.getRewardByDay(e),n=t.type,i=t.value,r=t.status,s=void 0===r?"":r,a=new Gl(this.scene,{day:e,type:n,value:i,status:s});return a.setAlpha(0),this.popup.add(a),a},n.createClaimButton=function(){this.claimButton=new an.Z(this.scene,Ul,Fl.BLANK,79,68),this.claimButton.setName("Claim");var e=this.scene.make.bitmapText({font:yl.Z.PRIMARY.KEY,size:this.scene.fontSize(22),text:"Claim",origin:{x:.5,y:.5}});this.claimButton.add(e),Phaser.Display.Align.In.Center(e,this.claimButton,0,-3),this.popup.add(this.claimButton),Phaser.Display.Align.In.BottomCenter(this.claimButton,this.popup,-86,-30),this.claimButton.onClick=this.handleOnClaim},n.createClaimX2Button=function(){this.claimButton2X=new an.Z(this.scene,Ul,Fl.BUTTON_GREEN_SMALL.FILE,161,68),this.claimButton2X.setName("ClaimX2");var e=this.scene.make.bitmapText({font:yl.Z.PRIMARY.KEY,size:this.scene.fontSize(22),text:"Claim X2",origin:{x:0,y:.5}}),t=this.scene.make.image({key:Ul,frame:Fl.ICON_ADS_LEAN.FILE});t.setWorldSize(37,34),Phaser.Display.Align.In.Center(t,this.claimButton2X,-38,-2),Phaser.Display.Align.In.Center(e,this.claimButton2X,24,-3),this.claimButton2X.add([e,t]),this.popup.add(this.claimButton2X),Phaser.Display.Align.In.BottomCenter(this.claimButton2X,this.popup,52,-30),this.claimButton2X.onClick=this.handleOnClaimX2},t}(GameCore.Screen),jl=Kl,Xl=ja.Z.DEFAULT,Ql=Xl.KEY,ql=Xl.FRAME,Jl=function(e){function t(t){var n;return(n=e.call(this,t,Ql,ql.PROGRESS_VOLUME_BACKGROUND.FILE,ql.PROGRESS_VOLUME_BACKGROUND.WIDTH,ql.PROGRESS_VOLUME_BACKGROUND.HEIGHT)||this).screwIcon=void 0,n.bar=void 0,n.enable=void 0,n.text=void 0,n.createUI(),n.alignUI(),n}(0,o.Z)(t,e);var n=t.prototype;return n.createUI=function(){this.createBar(),this.createScrewIcon(),this.createText()},n.alignUI=function(){},n.createBar=function(){var e=ql.PROGRESS_VOLUME_BAR,t=e.FILE,n=e.WIDTH,i=e.HEIGHT;this.bar=this.scene.make.image({key:Ql,frame:t}),this.bar.setWorldSize(n,i),this.add(this.bar)},n.createScrewIcon=function(){var e=ql.ICON_SCREW,t=e.FILE,n=e.WIDTH,i=e.HEIGHT;this.screwIcon=this.scene.make.image({key:Ql,frame:t}),this.screwIcon.setWorldSize(n,i),this.add(this.screwIcon)},n.createText=function(){this.text=new ho.Z(this.scene,{text:"",fontSize:this.scene.fontSize(17),strokeColor:0,strokeThickness:1.5,strokeOffset:{y:.5}}),this.add(this.text)},n.updateStatus=function(e){this.enable=e,e?(this.bar.setVisible(!0),this.screwIcon.setPosition(this.width/2-17,0),this.text.setText("On"),Phaser.Display.Align.In.LeftCenter(this.text,this.bar,-8,0)):(this.bar.setVisible(!1),this.screwIcon.setPosition(-this.width/2+17,0),this.text.setText("Off"),Phaser.Display.Align.In.RightCenter(this.text,this.bar,-8,0))},n.processCallback=function(e){var t=this.enable;this.updateStatus(!t),e(!t)},t}(an.Z),$l=Jl,eu=function(){var e=GameCore.Utils.Device,t=window.navigator.vibrate;return e.isAndroid()&&"function"===typeof t||e.isMobileWeb()&&"function"===typeof t},tu=function(){var e=(0,a.Z)(h().mark((function e(t){var n,i,r,s,o;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=Math.round(t/80),i=0,r=function(){var e=(0,a.Z)(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,FBInstant.performHapticFeedbackAsync();case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0);case 8:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(){return e.apply(this,arguments)}}();case 3:if(!(i<n)){e.next=11;break}return s=r(),o=(0,bo.qZ)(80),i+=1,e.next=9,l().all([s,o]);case 9:e.next=3;break;case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),nu=function(e){window.navigator.vibrate(0),window.navigator.vibrate(e)},iu=function(e){try{if(!eu())return!1;var t=GameCore.Utils.Device;t.isAndroid()||t.isMobileWeb()?nu(e):t.isIOS()&&tu(e).catch((function(e){}))}catch(n){}},ru=ja.Z.DEFAULT,su=ru.KEY,au=ru.FRAME,ou=function(e){function t(t,n,i,r){var s;return(s=e.call(this,t,n,i,r)||this).popup=void 0,s.titleText=void 0,s.closeButton=void 0,s.contents=void 0,s.musicIcon=void 0,s.settingMusic=void 0,s.soundIcon=void 0,s.settingSound=void 0,s.vibrateIcon=void 0,s.settingVibrate=void 0,s.popupShowUpAnimation=void 0,s.popupFadeOutAnimation=void 0,s.contentShowUpAnimation=void 0,s.handleClose=function(){s.runCloseAnimation()},s.handleMusicSetting=function(e){s.scene.player.setSetting("music",e),e?s.scene.audio.playMusic():s.scene.audio.pauseMusic()},s.handleSoundSetting=function(e){s.scene.player.setSetting("sound",e)},s.handleVibrateSetting=function(e){s.scene.player.setSetting("vibrate",e)},s.createUI(),s.alignUI(),s.createInput(),s.setDepth(Vr.Ks.POPUP),s.createAnimation(),s.background.setAlpha(.8),s}(0,o.Z)(t,e);var n=t.prototype;return n.open=function(){e.prototype.open.call(this);var t=this.scene.player.getPlayerSettings(),n=t.music,i=t.sound,r=t.vibrate;if(this.settingMusic.updateStatus(n),this.settingSound.updateStatus(i),this.settingVibrate.updateStatus(r),!eu()){this.settingVibrate.kill(),this.vibrateIcon.kill();var s=this.musicIcon.width+20+this.settingMusic.width;Phaser.Display.Align.In.Center(this.soundIcon,this.popup,-s/2+this.soundIcon.width/2+5,-10),Phaser.Display.Align.In.Center(this.musicIcon,this.popup,-s/2+this.musicIcon.width/2,40);var a=s/2-this.settingMusic.width/2;Phaser.Display.Align.In.Center(this.settingSound,this.popup,a,-10),Phaser.Display.Align.In.Center(this.settingMusic,this.popup,a,40)}this.runOpenAnimation()},n.createAnimation=function(){this.entranceAnimation.addAnimation(this.popup.entranceAnimation),this.exitAnimation.addAnimation(this.popup.exitAnimation)},n.createUI=function(){this.createPopup(),this.createTitleText(),this.createButtonClose(),this.createSettingButtons()},n.alignUI=function(){Phaser.Display.Align.In.TopCenter(this.titleText,this.popup,0,-4),Phaser.Display.Align.In.TopRight(this.closeButton,this.popup,-7,-2);var e=this.musicIcon.width+20+this.settingMusic.width;Phaser.Display.Align.In.Center(this.soundIcon,this.popup,-e/2+this.soundIcon.width/2+5,-40),Phaser.Display.Align.In.Center(this.musicIcon,this.popup,-e/2+this.musicIcon.width/2,0),Phaser.Display.Align.In.Center(this.vibrateIcon,this.popup,-e/2+this.vibrateIcon.width/2-1,40);var t=e/2-this.settingVibrate.width/2;Phaser.Display.Align.In.Center(this.settingSound,this.popup,t,-40),Phaser.Display.Align.In.Center(this.settingMusic,this.popup,t,0),Phaser.Display.Align.In.Center(this.settingVibrate,this.popup,t,40),Phaser.Display.Align.In.Center(this.popup,this.zone)},n.createPopup=function(){this.popup=new $c.Z(this.scene,{width:878/3,height:535/3}),this.add(this.popup)},n.createTitleText=function(){this.titleText=new ho.Z(this.scene,{text:"SETTINGS",fontSize:this.scene.fontSize(25),strokeColor:9194534,strokeThickness:3,strokeAlpha:.35,strokeOffset:{y:1}}).setTint(16509640),this.popup.add(this.titleText)},n.createButtonClose=function(){this.closeButton=new Jc(this.scene),this.popup.add(this.closeButton)},n.createSettingButtons=function(){var e=this.scene.player.getPlayerSettings(),t=e.music,n=e.sound,i=e.vibrate;this.createMusicButton(t),this.createVibrateButton(i),this.createSoundButton(n),this.popup.add([this.settingVibrate,this.settingMusic,this.settingSound,this.musicIcon,this.soundIcon,this.vibrateIcon]),this.contents=this.scene.add.group(),this.contents.addMultiple([this.settingVibrate,this.settingMusic,this.settingSound])},n.createMusicButton=function(e){this.settingMusic=new $l(this.scene),this.settingMusic.setName("Music"),this.musicIcon=this.scene.make.image({key:su,frame:au.ICON_MUSIC.FILE}),this.musicIcon.setWorldSize(au.ICON_MUSIC.WIDTH,au.ICON_MUSIC.HEIGHT),this.settingMusic.updateStatus(e)},n.createVibrateButton=function(e){this.settingVibrate=new $l(this.scene),this.settingVibrate.setName("Vibrate"),this.vibrateIcon=this.scene.make.image({key:su,frame:au.ICON_VIBRATE.FILE}),this.vibrateIcon.setWorldSize(au.ICON_VIBRATE.WIDTH,au.ICON_VIBRATE.HEIGHT)},n.createSoundButton=function(e){this.settingSound=new $l(this.scene),this.settingSound.setName("Sound"),this.soundIcon=this.scene.make.image({key:su,frame:au.ICON_SOUND.FILE}),this.soundIcon.setWorldSize(au.ICON_SOUND.WIDTH,au.ICON_SOUND.HEIGHT)},n.createInput=function(){this.closeButton.useSound=!1,this.closeButton.onClick=this.handleClose,this.settingMusic.onClick=this.handleMusicSetting,this.settingSound.onClick=this.handleSoundSetting,this.settingVibrate.onClick=this.handleVibrateSetting},t}(GameCore.Screen),cu=ou,lu=n(459),uu=n.n(lu),hu=n(461),du=n.n(hu),pu=ja.Z.DEFAULT,fu=(pu.KEY,pu.FRAME,function(e){function t(t,n){var i;return(i=e.call(this,t)||this).payload=void 0,i.icon=void 0,i.text=void 0,i.payload=n,i.setSize(i.payload.icon.width,i.payload.icon.height),i.createUI(),i.alignUI(),i}(0,o.Z)(t,e);var n=t.prototype;return n.createUI=function(){this.createIcon(),this.createText()},n.alignUI=function(){Phaser.Display.Align.In.BottomRight(this.text,this,3,3)},n.createIcon=function(){var e=this.payload.icon,t=e.key,n=e.frame,i=e.width,r=e.height;this.icon=this.scene.make.image({key:t,frame:n}),this.icon.setWorldSize(i,r),this.add(this.icon)},n.createText=function(){this.text=new ho.Z(this.scene,this.payload.text),this.add(this.text)},n.updateIcon=function(e,t,n,i){this.icon.setTexture(e,t),this.icon.setWorldSize(n,i)},t}(Phaser.GameObjects.Container)),vu=n(452),mu=ja.Z.EFFECTS,gu=mu.KEY,yu=mu.FRAME,Eu=function(e){function t(t){var n;return(n=e.call(this,t,gu,yu.FX_SPARKLE_2.FILE)||this).emitZone=void 0,n.emitter=void 0,n.createEmitZone(),n.createEmitters(),n.scene.add.existing((0,Ka.Z)(n)),n}(0,o.Z)(t,e);var n=t.prototype;return n.createEmitZone=function(){this.emitZone=new Phaser.Geom.Circle(0,0,48)},n.createEmitters=function(){var e=1/this.scene.world.getPixelRatio();this.emitter=this.createEmitter({on:!1,frame:yu.FX_SPARKLE_2.FILE,emitZone:{source:this.emitZone,type:"random"},timeScale:1,frequency:400,alpha:{start:1,end:0,ease:Phaser.Math.Easing.Quadratic.In},scale:{min:.8*e,max:1*e},speedY:-5,particleClass:Su,lifespan:{min:1200,max:2500}})},n.run=function(e,t,n){this.stop(),this.emitter.setPosition(t,n),this.emitter.setQuantity(e),this.emitter.start()},n.stop=function(){var e,t;null==(e=this.emitter)||e.killAll(),null==(t=this.emitter)||t.stop()},t}(Phaser.GameObjects.Particles.ParticleEmitterManager),Su=function(e){function t(t){var n;return(n=e.call(this,t)||this)._scaleX=void 0,n._scaleY=void 0,n.split=void 0,n}(0,o.Z)(t,e);var n=t.prototype;return n.fire=function(t,n){e.prototype.fire.call(this,t,n),this._scaleX=this.scaleX,this._scaleY=this.scaleY,this.split=2*Phaser.Math.RND.between(1,2),this.scaleX=0,this.scaleY=0},n.update=function(t,n,i){var r=e.prototype.update.call(this,t,n,i),s=this.lifeT*this.split,a=Math.floor(s),o=s-a;return a%2==0?(this.scaleX=Phaser.Math.Easing.Sine.InOut(o)*this._scaleX,this.scaleY=Phaser.Math.Easing.Sine.InOut(o)*this._scaleY):(this.scaleX=(1-Phaser.Math.Easing.Sine.InOut(o))*this._scaleX,this.scaleY=(1-Phaser.Math.Easing.Sine.InOut(o))*this._scaleY),r},t}(Phaser.GameObjects.Particles.Particle),wu=Eu,Iu=ja.Z.DEFAULT,Au=Iu.KEY,Tu=Iu.FRAME,Cu=function(e){function t(t,n,i,r){var s;return(s=e.call(this,t,n,i,r)||this).scene=void 0,s.popup=void 0,s.title=void 0,s.buttonClose=void 0,s.iconAds=void 0,s.textAds=void 0,s.textPanel=void 0,s.itemBlocks=void 0,s.buttonBuy=void 0,s.buttonBuyText=void 0,s.itemSparkle=void 0,s.handleClose=function(){s.itemSparkle.stop(),s.runCloseAnimation()},s.handleOnBuy=function(){var e=(0,a.Z)(h().mark((function e(t){var n,i;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=s.scene.game.globalScene).screen.open(Vr.o4.NOTIFY_SCREEN,{message:"Loading...",duration:0,loading:!0}),e.prev=2,s.logViewRemovedAdsBundle(),e.next=6,s.scene.payment.purchaseAsync(t);case 6:if(e.sent){e.next=9;break}throw new Error("You have canceled payment!");case 9:return e.next=11,n.consumePurchasesReward();case 11:if(i=e.sent,0!==te()(i).length){e.next=14;break}throw new Error("There was an error\nduring the payment!\nPlease try again.");case 14:return n.screen.close(Vr.o4.NOTIFY_SCREEN),s.itemSparkle.stop(),e.next=18,s.handleShowProductReceive(i);case 18:e.next=23;break;case 20:e.prev=20,e.t0=e.catch(2),n.screen.open(Vr.o4.NOTIFY_SCREEN,{message:e.t0.message,duration:2e3,loading:!1});case 23:case"end":return e.stop()}}),e,null,[[2,20]])})));return function(t){return e.apply(this,arguments)}}(),s.handleShowProductReceive=function(){var e=(0,a.Z)(h().mark((function e(t){var n,i,r;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=s.scene.game,i=n.globalScene,n.player,r=s.scene,s.scene.screen.close(s.name),e.next=5,i.openProductReceiveScreen(t,"NoAdsScreen",(function(){r instanceof GE&&(r.updateCurrentScrew(),r.layoutManager.objects.main.adsButton.active&&r.layoutManager.objects.main.adsButton.kill())}));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),s.scene=t,s.createPopup(),s.createTitle(),s.createCloseButton(),s.createContents(),s.createStarTwinkleUp(),s.addItem(),s.arrangeItems(),s.createInput(),s.setDepth(Vr.Ks.POPUP),s.createAnimation(),s.background.setAlpha(.8),s}(0,o.Z)(t,e);var n=t.prototype;return n.open=function(){e.prototype.open.call(this),this.runOpenAnimation(),this.updatePriceProducts()},n.createAnimation=function(){var e=this;this.entranceAnimation.addAnimation(this.popup.entranceAnimation),this.exitAnimation.addAnimation(this.popup.exitAnimation),this.entranceAnimation.events.on("complete",(function(){e.runItemSparkle()})),this.exitAnimation.events.on("start",(function(){var t;null==(t=e.itemSparkle)||t.stop()}))},n.createInput=function(){var e=this;this.buttonClose.useSound=!1,this.buttonClose.onClick=this.handleClose,this.buttonBuy.onClick=function(){return e.handleOnBuy(vu.Z.ID.REMOVE_ADS_BUNDLE)}},n.createStarTwinkleUp=function(){this.itemSparkle=new wu(this.scene),this.add(this.itemSparkle)},n.runItemSparkle=function(){this.itemSparkle.run(2,this.iconAds.x,this.iconAds.y)},n.logViewRemovedAdsBundle=function(){var e=(0,a.Z)(h().mark((function e(){var t,n,i,r,s;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.scene.payment.getCatalogAsync();case 2:return t=e.sent,e.next=5,this.scene.payment.getPurchasesAsync();case 5:n=e.sent,i=_e()(t).call(t,(function(e){return uu()(n).call(n,(function(t){return t.productID===e.productID}))<0})),r=O()(i).call(i,(function(e){return e.productID===vu.Z.ID.REMOVE_ADS_BUNDLE})),s=(null==r?void 0:r.priceCurrencyCode)||"USD",this.scene.analytics.viewItem(s,(null==r?void 0:r.price)||"0",[{item_id:vu.Z.ID.REMOVE_ADS_BUNDLE,price:du()((null==r?void 0:r.price)||"0"),currency:s}]),this.scene.analytics.selectItem("no_ads_screen","No Ads Screen",[{item_id:vu.Z.ID.REMOVE_ADS_BUNDLE,price:du()((null==r?void 0:r.price)||"0"),currency:s}]);case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.createPopup=function(){this.popup=new $c.Z(this.scene,{width:878/3,height:1129/3,key:Au,frame:Tu.POPUP_ADS.FILE,leftWidth:80/3,rightWidth:80/3,topHeight:60,bottomHeight:80/3}),this.add(this.popup),Phaser.Display.Align.In.Center(this.popup,this.zone)},n.createTitle=function(){this.title=this.scene.add.container();var e=this.scene.make.image({key:Au,frame:Tu.POPUP_TITLE.FILE});e.setWorldSize(Tu.POPUP_TITLE.WIDTH,Tu.POPUP_TITLE.HEIGHT);var t=new ho.Z(this.scene,{text:"NO ADS",fontSize:this.scene.fontSize(25),strokeColor:9194534,strokeThickness:3,strokeAlpha:.35,strokeOffset:{y:1}}).setTint(16509640);Phaser.Display.Align.In.Center(t,e,0,0),this.title.add([e,t])},n.createCloseButton=function(){this.buttonClose=new Jc(this.scene,Tu.ICON_X.FILE,Tu.ICON_X.WIDTH,Tu.ICON_X.HEIGHT),this.popup.add(this.buttonClose)},n.createContents=function(){this.iconAds=this.scene.make.image({key:Au,frame:Tu.ICON_ADS.FILE}),this.iconAds.setWorldSize(Tu.ICON_ADS.WIDTH,Tu.ICON_ADS.HEIGHT),this.textAds=new ho.Z(this.scene,{text:"Remove ADS and get",fontSize:this.scene.fontSize(20)}).setTint(9849600),this.createTextPanel(),this.createItemBlocks(),this.createButtonBuy(),this.popup.add([this.iconAds,this.textAds,this.textPanel,this.buttonBuy]),this.popup.add(this.itemBlocks)},n.createTextPanel=function(){this.textPanel=this.scene.make.image({key:Au,frame:Tu.BACKGROUND_ITEM_PANEL.FILE}),this.textPanel.setWorldSize(Tu.BACKGROUND_ITEM_PANEL.WIDTH,Tu.BACKGROUND_ITEM_PANEL.HEIGHT)},n.createItemBlocks=function(){var e=this;this.itemBlocks=[];var t=vu.Z.PRODUCTS[vu.Z.ID.REMOVE_ADS_BUNDLE];[{icon:Tu.ICON_SCREW_SILVER.FILE,text:""+t.itemsDataByKey.SilverScrew,width:Tu.ICON_SCREW_SILVER.WIDTH,height:Tu.ICON_SCREW_SILVER.HEIGHT},{icon:Tu.ICON_SCREW_GOLD.FILE,text:""+t.itemsDataByKey.GoldScrew,width:Tu.ICON_SCREW_GOLD.WIDTH,height:Tu.ICON_SCREW_GOLD.HEIGHT}].forEach((function(t,n){var i=new fu(e.scene,{icon:{key:Au,frame:t.icon,width:t.width,height:t.height},text:{text:t.text,fontSize:e.scene.fontSize(20),strokeColor:9194534,strokeThickness:3,strokeAlpha:.35,strokeOffset:{y:1}}});i.text.setLeftAlign(),e.itemBlocks.push(i)}))},n.createButtonBuy=function(){this.buttonBuy=new an.Z(this.scene,Au,Tu.BUTTON_GREEN_LONG.FILE,Tu.BUTTON_GREEN_LONG.WIDTH,Tu.BUTTON_GREEN_LONG.HEIGHT),this.buttonBuy.setName("Buy");var e=new ho.Z(this.scene,{text:"$ 9.99",fontSize:this.scene.fontSize(25),strokeColor:23819,strokeThickness:2.4,strokeOffset:{y:.5}});this.buttonBuyText=e,this.buttonBuy.add(e)},n.addItem=function(){this.popup.add([this.title])},n.arrangeItems=function(){var e=this;Phaser.Display.Align.In.TopCenter(this.title,this.popup,0,-8),Phaser.Display.Align.In.TopRight(this.buttonClose,this.popup,-7,-2),Phaser.Display.Align.In.TopCenter(this.iconAds,this.popup,0,-50),Phaser.Display.Align.To.BottomCenter(this.textAds,this.iconAds,0,10),Phaser.Display.Align.To.BottomCenter(this.textPanel,this.textAds,0,20);var t=this.itemBlocks.length,n=this.itemBlocks[0].width;this.itemBlocks.forEach((function(i,r){var s=(n+45)*(r-(t-1)/2);Phaser.Display.Align.In.Center(i,e.textPanel,s,0)})),Phaser.Display.Align.In.BottomCenter(this.buttonBuy,this.popup,0,-20)},n.updatePriceProducts=function(){var e=(0,a.Z)(h().mark((function e(){var t,n;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.scene.payment.getCatalogAsync();case 2:t=e.sent,(n=O()(t).call(t,(function(e){return e.productID===vu.Z.ID.REMOVE_ADS_BUNDLE})))&&this.buttonBuyText.setText(n.price);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),t}(GameCore.Screen),bu=Cu,Pu=ja.Z.DEFAULT,xu=Pu.KEY,Ru=Pu.FRAME,Ou=function(e){function t(t,n){var i;return(i=e.call(this,t)||this).id=void 0,i.payload=void 0,i.panel=void 0,i.titleText=void 0,i.icon=void 0,i.valueText=void 0,i.buttonBuy=void 0,i.buttonBuyText=void 0,i.payload=n,i.id=n.id,i.setSize(n.width,n.height),i.createUI(),i.alignUI(),i}(0,o.Z)(t,e);var n=t.prototype;return n.createUI=function(){this.createPanel(),this.createTitleText(),this.createIcon(),this.createValueText(),this.createButtonBuy()},n.alignUI=function(){Phaser.Display.Align.In.TopCenter(this.titleText,this,0,-2.5),Phaser.Display.Align.In.Center(this.icon,this,0,-5),Phaser.Display.Align.To.BottomCenter(this.valueText,this.icon,0,0),Phaser.Display.Align.In.Center(this.buttonBuyText,this.buttonBuy,0,-7/3),Phaser.Display.Align.In.BottomCenter(this.buttonBuy,this,0,15)},n.createPanel=function(){var e=Ru.BACKGROUND_STORE_ITEM_PANEL.FILE,t=this.scene.world.getPixelRatio();this.panel=this.scene.add.nineslice(0,0,xu,e,this.payload.width*t,this.payload.height*t,20/3*t,10*t,110/3*t,50/3*t),this.panel.setScale(1/t),this.add(this.panel)},n.createTitleText=function(){this.titleText=new ho.Z(this.scene,{text:this.payload.title,fontSize:this.scene.fontSize(15),strokeColor:9983782,strokeThickness:2.4,strokeOffset:{y:1}}),this.add(this.titleText)},n.createIcon=function(){this.icon=this.scene.make.image({key:this.payload.icon.key,frame:this.payload.icon.frame}),this.icon.setWorldSize(this.payload.icon.width,this.payload.icon.height),this.add(this.icon)},n.createValueText=function(){this.valueText=new ho.Z(this.scene,{text:this.payload.value,fontSize:this.scene.fontSize(20)}).setTint(10048806),this.add(this.valueText)},n.createButtonBuy=function(){var e=Ru.BUTTON_GREEN_SMALLEST,t=e.FILE,n=e.WIDTH,i=e.HEIGHT;this.buttonBuy=new an.Z(this.scene,xu,t,n,i),this.buttonBuyText=new ho.Z(this.scene,{text:this.payload.price,fontSize:this.scene.fontSize(15),strokeColor:23819,strokeThickness:2.4,strokeOffset:{y:.5}}),this.buttonBuy.add(this.buttonBuyText),this.add(this.buttonBuy)},n.updatePrice=function(e){var t=e.length<9?this.scene.fontSize(15):this.scene.fontSize(Math.max(10,22-e.length));this.buttonBuyText.setFontSize(t),this.buttonBuyText.setText(e)},(0,ce.Z)(t,[{key:"onBuy",set:function(e){this.buttonBuy.onClick=e}}]),t}(Phaser.GameObjects.Container),_u=Ou,ku=ja.Z.DEFAULT,Du=ku.KEY,Lu=ku.FRAME,Bu=ja.Z.EFFECTS,Nu=Bu.KEY,Hu=Bu.FRAME,Mu=function(e){function t(t,n){var i;return(i=e.call(this,t)||this).id=void 0,i.payload=void 0,i.panel=void 0,i.buttonBuy=void 0,i.buttonBuyText=void 0,i.payload=n,i.setSize(Lu.BACKGROUND_STORE_ITEM_PANEL_LONG.WIDTH,Lu.BACKGROUND_STORE_ITEM_PANEL_LONG.HEIGHT),i.createUI(),i.id=n.id,i.alignUI(),i}(0,o.Z)(t,e);var n=t.prototype;return n.createUI=function(){switch(this.createPanel(),this.createButtonBuy(),this.payload.id){case vu.Z.ID.REMOVE_ADS_30:this.createNoMoreAds();break;case vu.Z.ID.SCREW_PILE:this.createScrewPile()}this.payload.isAdsFree&&this.createButtonWatchAds()},n.createButtonWatchAds=function(){var e=this.scene.make.image({key:Du,frame:Lu.ICON_GOLD_VIDEO_LEAN.FILE});e.setWorldSize(Lu.ICON_GOLD_VIDEO_LEAN.WIDTH,Lu.ICON_GOLD_VIDEO_LEAN.HEIGHT),Phaser.Display.Align.In.TopLeft(e,this.buttonBuy,10,13),this.buttonBuyText.setText("Watch Ads"),this.buttonBuy.add(e)},n.alignUI=function(){Phaser.Display.Align.In.Center(this.buttonBuyText,this.buttonBuy,0,-7/3),Phaser.Display.Align.In.RightCenter(this.buttonBuy,this,-10,0)},n.createPanel=function(){var e=Lu.BACKGROUND_STORE_ITEM_PANEL_LONG,t=e.FILE,n=e.WIDTH,i=e.HEIGHT;this.panel=this.scene.make.image({key:Du,frame:t}),this.panel.setWorldSize(n,i),this.add(this.panel)},n.createButtonBuy=function(){var e=Lu.BUTTON_GREEN_SMALL,t=e.FILE,n=e.WIDTH,i=e.HEIGHT;this.buttonBuy=new an.Z(this.scene,Du,t,n,i),this.buttonBuyText=new ho.Z(this.scene,{text:"Buy",fontSize:this.scene.fontSize(15),strokeColor:23819,strokeThickness:2.4,strokeOffset:{y:.5}}),this.buttonBuy.add(this.buttonBuyText),this.add(this.buttonBuy)},n.createNoMoreAds=function(){this.buttonBuyText.setText(this.payload.price);var e=this.scene.make.image({key:Du,frame:Lu.ICON_ADS_LEAN.FILE});e.setWorldSize(Lu.ICON_ADS_LEAN.WIDTH,Lu.ICON_ADS_LEAN.HEIGHT);var t=this.scene.make.image({key:Nu,frame:Hu.FX_SPARKLE.FILE});t.setWorldSize(Hu.FX_SPARKLE.WIDTH,Hu.FX_SPARKLE.HEIGHT);var n=this.scene.make.image({key:Nu,frame:Hu.FX_SPARKLE.FILE});n.setWorldSize(Hu.FX_SPARKLE.WIDTH,Hu.FX_SPARKLE.HEIGHT);var i=this.scene.make.image({key:Nu,frame:Hu.FX_SPARKLE.FILE});i.setWorldSize(Hu.FX_SPARKLE.WIDTH,Hu.FX_SPARKLE.HEIGHT);var r=new ho.Z(this.scene,{text:"NO MORE\nADS!",fontSize:this.scene.fontSize(20),strokeColor:12280580,strokeThickness:2.4,strokeOffset:{x:-.5,y:1}}).setCenterAlign().setTint(16767240).setLineSpacing(-3);Phaser.Display.Align.In.LeftCenter(e,this,-15,-10/3),Phaser.Display.Align.In.LeftCenter(t,e,14,10),Phaser.Display.Align.In.LeftCenter(n,e,0,-32),Phaser.Display.Align.In.RightCenter(i,e,30,-25),Phaser.Display.Align.In.Center(r,this,-22,0),this.add([t,n,i,e,r])},n.createScrewPile=function(){this.buttonBuyText.setText(this.payload.price);var e=this.scene.make.image({key:Du,frame:Lu.ICON_SCREW_PILE.FILE});e.setWorldSize(Lu.ICON_SCREW_PILE.WIDTH,Lu.ICON_SCREW_PILE.HEIGHT);var t=new ho.Z(this.scene,{text:"+2",fontSize:this.scene.fontSize(27),strokeColor:11230224,strokeThickness:1.5,strokeOffset:{y:1}}).setCenterAlign().setTint(16777215);Phaser.Display.Align.In.LeftCenter(e,this,-15,-10/3),Phaser.Display.Align.In.TopCenter(t,this,-9,-7),this.add([e,t])},n.updatePrice=function(e){var t=e.length<11?this.scene.fontSize(15):this.scene.fontSize(Math.max(12,27-e.length));this.buttonBuyText.setFontSize(t),this.buttonBuyText.setText(e)},(0,ce.Z)(t,[{key:"onBuy",set:function(e){this.buttonBuy.onClick=e}}]),t}(Phaser.GameObjects.Container),Gu=Mu,Wu=n(130),Uu=n.n(Wu),Fu={REPLAY:"replay",RESCUE:"rescue",RECEIVE_DIAMONDS:"receive-coins",LOSE:"lose",WOOD_OUT:"wood-out"},Zu=n(411),Yu=new(n.n(Zu)()),Vu=ja.Z.DEFAULT,zu=Vu.KEY,Ku=Vu.FRAME,ju=function(e){function t(t,n){var i;return(i=e.call(this,t,n,{popupWidth:Ku.POPUP_ADS_BANNER.WIDTH,popupHeight:203})||this).scene=void 0,i.homeButton=void 0,i.retryButton=void 0,i.isButtonReleased=!1,i.open=function(){e.prototype.open.call((0,Ka.Z)(i)),i.isButtonReleased=!1,i.runOpenAnimation()},i.handleClosePopup=function(){i.runCloseAnimation(),i.exitAnimation.events.once("complete",(function(){i.scene.stateManager.play()}))},i.handleGotoDashboard=function(){i.isButtonReleased||(i.isButtonReleased=!0,i.runCloseAnimation(),i.exitAnimation.events.once("complete",(function(){i.isButtonReleased=!1,i.scene.screen.close(i.name),i.scene.layoutManager.showQuitScreen()})))},i.handleRetry=function(){i.isButtonReleased||(i.isButtonReleased=!0,i.scene.player.getLevel()>GameCore.Configs.Ads.MinLevelToShow&&i.handleShowInterstitialAd(),i.runCloseAnimation(),i.exitAnimation.events.once("complete",(0,a.Z)(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i.isButtonReleased=!1,e.next=3,i.scene.storage.dispatch(wa());case 3:Yu.emit(Fu.REPLAY);case 4:case"end":return e.stop()}}),e)})))))},i.handleShowInterstitialAd=(0,a.Z)(h().mark((function e(){var t;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!1!==(t=i.scene).ads.canbeShowInterstitialAd()){e.next=3;break}return e.abrupt("return");case 3:return t.audio.pauseMusic(),t.audio.muteAll(),e.prev=5,e.next=8,t.ads.showInterstitialAdAsync();case 8:e.next=13;break;case 10:e.prev=10,e.t0=e.catch(5);case 13:t.audio.unmuteAll(),t.audio.playMusic(),t.ads.preloadInterstitialAdAsync().catch((function(){}));case 16:case"end":return e.stop()}}),e,null,[[5,10]])}))),i.handleOnBuyAds=(0,a.Z)(h().mark((function e(){var t,n,r;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=vu.Z.ID.REMOVE_ADS_BUNDLE,(n=i.scene.game.globalScene).screen.open(Vr.o4.NOTIFY_SCREEN,{message:"Loading...",duration:0,loading:!0}),e.prev=3,i.logViewRemovedAdsBundle(),e.next=7,i.scene.payment.purchaseAsync(t);case 7:if(e.sent){e.next=10;break}throw new Error("You have canceled payment!");case 10:return e.next=12,n.consumePurchasesReward();case 12:if(r=e.sent,0!==te()(r).length){e.next=15;break}throw new Error("There was an error\nduring the payment!\nPlease try again.");case 15:return n.screen.close(Vr.o4.NOTIFY_SCREEN),e.next=18,i.handleShowProductReceive(r);case 18:e.next=23;break;case 20:e.prev=20,e.t0=e.catch(3),n.screen.open(Vr.o4.NOTIFY_SCREEN,{message:e.t0.message,duration:2e3,loading:!1});case 23:case"end":return e.stop()}}),e,null,[[3,20]])}))),i.handleShowProductReceive=function(){var e=(0,a.Z)(h().mark((function e(t){var n,r;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=i.scene.game,r=n.globalScene,n.player,e.next=3,r.openProductReceiveScreen(t,"PauseScreen",(function(){}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),i.scene=t,i.createUI(),i.alignUI(),i.createInput(),i}(0,o.Z)(t,e);var n=t.prototype;return n.createUI=function(){e.prototype.createUI.call(this),this.titleText.setText("PAUSE"),this.createHomeButton(),this.createRetryButton(),this.createPopupAds()},n.alignUI=function(){e.prototype.alignUI.call(this),Phaser.Display.Align.In.Center(this.homeButton,this.popup,0,-14),Phaser.Display.Align.To.BottomCenter(this.retryButton,this.homeButton,0,10),!this.scene.ads.isDisabledInterstitialAds()&&GameCore.Configs.Payment.enable||Phaser.Display.Align.In.Center(this.popup,this.zone,0,0)},n.createInput=function(){this.closeButton.useSound=!1,this.closeButton.onClick=this.handleClosePopup,this.homeButton.onClick=this.handleGotoDashboard,this.retryButton.onClick=this.handleRetry},n.createHomeButton=function(){var e=Ku.BUTTON_BLUE,t=e.FILE,n=e.WIDTH,i=e.HEIGHT;this.homeButton=new an.Z(this.scene,zu,t,n,i),this.homeButton.setName("Home");var r=new ho.Z(this.scene,{text:"Home",fontSize:this.scene.fontSize(23),strokeColor:2843025,strokeThickness:2.4,strokeOffset:{y:.5}}).setCenterAlign().setTint(16777215);Phaser.Display.Align.In.Center(r,this.homeButton),this.homeButton.add(r),this.popup.add(this.homeButton)},n.createRetryButton=function(){var e=Ku.BUTTON_RED,t=e.FILE,n=e.WIDTH,i=e.HEIGHT;this.retryButton=new an.Z(this.scene,zu,t,n,i),this.retryButton.setName("Retry");var r=new ho.Z(this.scene,{text:"Retry",fontSize:this.scene.fontSize(23),strokeColor:9194534,strokeThickness:2.4,strokeOffset:{y:.5}}).setCenterAlign().setTint(16777215);Phaser.Display.Align.In.Center(r,this.retryButton),this.retryButton.add(r),this.popup.add(this.retryButton)},n.createPopupAds=function(){},n.logViewRemovedAdsBundle=function(){var e=(0,a.Z)(h().mark((function e(){var t,n,i,r,s;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.scene.payment.getCatalogAsync();case 2:return t=e.sent,e.next=5,this.scene.payment.getPurchasesAsync();case 5:n=e.sent,i=_e()(t).call(t,(function(e){return uu()(n).call(n,(function(t){return t.productID===e.productID}))<0})),r=O()(i).call(i,(function(e){return e.productID===vu.Z.ID.REMOVE_ADS_BUNDLE})),s=(null==r?void 0:r.priceCurrencyCode)||"USD",this.scene.analytics.viewItem(s,(null==r?void 0:r.price)||"0",[{item_id:vu.Z.ID.REMOVE_ADS_BUNDLE,price:du()((null==r?void 0:r.price)||"0"),currency:s}]),this.scene.analytics.selectItem("pause_screen","Pause Screen",[{item_id:vu.Z.ID.REMOVE_ADS_BUNDLE,price:du()((null==r?void 0:r.price)||"0"),currency:s}]);case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.updatePriceProducts=function(){var e=(0,a.Z)(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.scene.payment.getCatalogAsync();case 2:e.sent.forEach((function(e){e.productID,vu.Z.ID.REMOVE_ADS_BUNDLE}));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),t}(nl),Xu=ju,Qu=function(e){function t(t,n,i,s,a,o,c){var l;void 0===o&&(o=!1);var u={text:"???",fontSize:t.fontSize(25),strokeColor:0,strokeThickness:2.4,strokeOffset:{y:.5}};return(l=e.call(this,t,n,i,s,a,o)||this).textConfig=void 0,l.text=void 0,l.textConfig=(0,r.Z)({},u,c),l.text=new ho.Z(l.scene,l.textConfig).setCenterAlign(),l.add(l.text),Phaser.Display.Align.In.Center(l.text,l.button),l}return(0,o.Z)(t,e),t}(an.Z),qu=Qu,Ju=ja.Z.DEFAULT,$u=Ju.KEY,eh=Ju.FRAME,th=GameCore.Configs,nh=th.Network,ih=(th.Match,function(e){function t(t,n){var i;return(i=e.call(this,t,n,{popupWidth:878/3,popupHeight:967/3+20})||this).scene=void 0,i.iconTime=void 0,i.text=void 0,i.buttonBuy=void 0,i.buttonClaim=void 0,i.buttonRetry=void 0,i.isButtonReleased=!1,i.adsTimer=void 0,i.open=function(){e.prototype.open.call((0,Ka.Z)(i)),i.scene.audio.playSound(Xa.Z.POPUP_SHOW);var t=i.scene.numberOfRescue<=GameCore.Configs.Gameplay.TimePlay.RescuePrice.length?i.scene.numberOfRescue-1:GameCore.Configs.Gameplay.TimePlay.RescuePrice.length-1,n=GameCore.Configs.Gameplay.TimePlay.RescuePrice[t];i.buttonBuy.text.setText("x"+n),i.isButtonReleased=!1,i.runOpenAnimation()},i.handleBuyRescue=(0,a.Z)(h().mark((function e(){var t,n,r,s,a;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!i.isButtonReleased){e.next=2;break}return e.abrupt("return");case 2:if(i.isButtonReleased=!0,t=i.scene.game.audio,n=i.scene.player.getGoldScrew(),r=i.scene.numberOfRescue<=GameCore.Configs.Gameplay.TimePlay.RescuePrice.length?i.scene.numberOfRescue-1:GameCore.Configs.Gameplay.TimePlay.RescuePrice.length-1,s=GameCore.Configs.Gameplay.TimePlay.RescuePrice[r],!(n<s)){e.next=11;break}return i.scene.game.globalScene.screen.open(Vr.o4.NOTIFY_SCREEN,{message:"Not enough screws!",duration:2e3,loading:!1}),i.isButtonReleased=!1,e.abrupt("return");case 11:return a="Rescue_"+i.scene.numberOfRescue,i.logSpendVirtualCurrency(s,a),e.next=15,i.scene.player.updateCustomFields({goldScrew:n-s});case 15:i.scene.storage.dispatch(Oa()),t.playSound(Xa.Z.DAILY_REWARD),i.handleSuccessfulRescue();case 18:case"end":return e.stop()}}),e)}))),i.handleWatchAds=(0,a.Z)(h().mark((function e(){var t,n,r,s;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!i.isButtonReleased){e.next=2;break}return e.abrupt("return");case 2:return i.isButtonReleased=!0,t=i.scene.game,n=t.globalScene,r=t.audio,e.prev=4,i.scene.storage.dispatch(Oa()),n.screen.open(Vr.o4.NOTIFY_SCREEN,{message:"Loading ads...",duration:0,loading:!0}),r.pauseMusic(),r.muteAll(),e.next=11,new(l())((function(e,t){var n;null==(n=i.adsTimer)||n.remove(),i.adsTimer=i.scene.time.delayedCall(nh.Timeout,t),i.scene.ads.getAdStatus(GameCore.Ads.Types.REWARDED)===GameCore.Ads.Status.LOADING?i.scene.ads.events.once(GameCore.Ads.Events.LOADED,e):i.scene.ads.preloadRewardedVideoAsync().then(e).catch(t)}));case 11:return e.next=13,i.scene.ads.showRewardedVideoAsync();case 13:n.screen.events.off(GameCore.Screens.Events.CLOSE),r.playSound(Xa.Z.DAILY_REWARD),n.screen.close(Vr.o4.NOTIFY_SCREEN),i.handleSuccessfulRescue(),e.next=27;break;case 19:if(e.prev=19,e.t0=e.catch(4),!(e.t0 instanceof Object&&GameCore.Utils.Object.hasOwn(e.t0,"code"))){e.next=26;break}if("USER_INPUT"!==e.t0.code){e.next=26;break}return i.showNotifySkipAds(),i.isButtonReleased=!1,e.abrupt("return");case 26:i.showNotifyNoAds();case 27:return e.prev=27,i.scene.ads.preloadRewardedVideoAsync().catch((function(){})),i.isButtonReleased=!1,null==(s=i.adsTimer)||s.destroy(),i.scene.ads.preloadRewardedVideoAsync().catch((function(e){})),r.unmuteAll(),r.playMusic(),e.finish(27);case 35:case"end":return e.stop()}}),e,null,[[4,19,27,35]])}))),i.handleSuccessfulRescue=function(){i.runCloseAnimation(),i.exitAnimation.events.once("complete",(function(){i.isButtonReleased=!1,Yu.emit(Fu.RESCUE)}))},i.showNotifyNoAds=function(e){if(!e||e.name===Vr.o4.NOTIFY_SCREEN){var t=i.scene.game.globalScene;t.screen.events.off(GameCore.Screens.Events.CLOSE),t.screen.events.once(GameCore.Screens.Events.CLOSE,i.showGameOver),t.screen.open(Vr.o4.NOTIFY_SCREEN,{message:"No ads to display!",duration:2e3,loading:!1})}},i.showNotifySkipAds=function(){var e=i.scene.game.globalScene;e.screen.events.off(GameCore.Screens.Events.CLOSE),e.screen.events.once(GameCore.Screens.Events.CLOSE,i.showGameOver),e.screen.open(Vr.o4.NOTIFY_SCREEN,{message:"Sorry, No Rewards!\nYou have cancelled the ad!",duration:3e3,loading:!1})},i.showGameOver=function(e){e&&e.name!==Vr.o4.NOTIFY_SCREEN||i.handleFailRescue()},i.handleFailRescue=function(){i.isButtonReleased||(i.isButtonReleased=!0,i.runCloseAnimation(),i.exitAnimation.events.once("complete",(function(){i.isButtonReleased=!1,i.scene.stateManager.gameOver()})))},i.handleRetry=function(){i.isButtonReleased||(i.isButtonReleased=!0,i.scene.player.getLevel()>GameCore.Configs.Ads.MinLevelToShow&&i.scene.handleShowInterstitialAd(),i.runCloseAnimation(),i.exitAnimation.events.once("complete",(0,a.Z)(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i.isButtonReleased=!1,e.next=3,i.scene.storage.dispatch(wa());case 3:Yu.emit(Fu.REPLAY);case 4:case"end":return e.stop()}}),e)})))))},i.scene=t,i.createUI(),i.alignUI(),i.createInput(),i}(0,o.Z)(t,e);var n=t.prototype;return n.createUI=function(){e.prototype.createUI.call(this),this.titleText.setText("TIME'S UP!"),this.createIconTime(),this.createText(),this.createButtonBuy(),this.createButtonClaim(),this.createButtonRetry()},n.alignUI=function(){e.prototype.alignUI.call(this),this.popup.setPosition(0,0),Phaser.Display.Align.In.TopCenter(this.iconTime,this.popup,0,-60),Phaser.Display.Align.To.BottomCenter(this.text,this.iconTime,0,10);var t=-40-this.buttonRetry.height+14;Phaser.Display.Align.In.BottomLeft(this.buttonBuy,this.popup,-12,t),Phaser.Display.Align.In.BottomRight(this.buttonClaim,this.popup,-12,t),Phaser.Display.Align.In.BottomCenter(this.buttonRetry,this.popup,0,-20),Phaser.Display.Align.In.Center(this.popup,this.zone)},n.createInput=function(){this.closeButton.useSound=!1,this.closeButton.onClick=this.handleFailRescue,this.buttonBuy.onClick=this.handleBuyRescue,this.buttonClaim.onClick=this.handleWatchAds},n.createIconTime=function(){var e=eh.ICON_TIME_BIG,t=e.FILE,n=e.WIDTH,i=e.HEIGHT;this.iconTime=this.scene.make.image({key:$u,frame:t}),this.iconTime.setWorldSize(n,i),this.popup.add(this.iconTime)},n.createText=function(){this.text=new ho.Z(this.scene,{text:"Add "+Math.round(GameCore.Configs.Gameplay.TimePlay.Bonus)+" seconds\nto the time.",fontSize:this.scene.fontSize(20)}).setTint(10048038).setCenterAlign(),this.popup.add(this.text)},n.createButtonBuy=function(){var e=eh.BUTTON_GREEN_MEDIUM,t=e.FILE,n=e.WIDTH,i=e.HEIGHT;this.buttonBuy=new qu(this.scene,$u,t,n,i,!1,{text:"x40",fontSize:this.scene.fontSize(23),strokeColor:2001170,strokeThickness:2.4,strokeOffset:{y:.5}}),this.buttonBuy.setName("Buy");var r=this.scene.make.image({key:$u,frame:eh.ICON_SCREW_GOLD.FILE});r.setWorldSize(81*eh.ICON_SCREW_GOLD.WIDTH/130,81*eh.ICON_SCREW_GOLD.HEIGHT/130),Phaser.Display.Align.In.LeftCenter(r,this.buttonBuy,-32),Phaser.Display.Align.In.RightCenter(this.buttonBuy.text,this.buttonBuy,-30),this.buttonBuy.add([this.buttonBuy.text,r]),this.popup.add(this.buttonBuy)},n.createButtonClaim=function(){var e=eh.BUTTON_BLUE_MEDIUM,t=e.FILE,n=e.WIDTH,i=e.HEIGHT;this.buttonClaim=new qu(this.scene,$u,t,n,i,!1,{text:"Claim",fontSize:this.scene.fontSize(23),strokeColor:2711440,strokeThickness:2.4,strokeOffset:{y:.5}}),this.buttonClaim.setName("Claim");var r=this.buttonClaim.text,s=this.scene.make.image({key:$u,frame:eh.ICON_GOLD_VIDEO.FILE});s.setWorldSize(eh.ICON_GOLD_VIDEO.WIDTH,eh.ICON_GOLD_VIDEO.HEIGHT),Phaser.Display.Align.In.LeftCenter(s,this.buttonClaim,-17),Phaser.Display.Align.In.RightCenter(r,this.buttonClaim,-14),this.buttonClaim.add([r,s]),this.popup.add(this.buttonClaim)},n.createButtonRetry=function(){var e=eh.BUTTON_RED,t=e.FILE,n=e.WIDTH,i=e.HEIGHT;this.buttonRetry=new qu(this.scene,$u,t,n,i,!1,{text:"Retry",fontSize:this.scene.fontSize(23),strokeColor:9194534,strokeThickness:2.4,strokeOffset:{y:.5}}),this.buttonRetry.setName("Retry"),this.buttonRetry.onClick=this.handleRetry,this.popup.add(this.buttonRetry)},n.logSpendVirtualCurrency=function(e,t){this.scene.analytics.event(Z._.SPEND_VIRTUAL_CURRENCY,{item_name:t,value:e,virtual_currency_name:"GoldScrew",level:this.scene.level.getLevelWithStep()})},t}(nl)),rh=ih,sh=n(74),ah=n.n(sh),oh=n(448),ch=n(622),lh=ja.Z.DEFAULT,uh=lh.KEY,hh=lh.FRAME,dh=GameCore.Configs.Network,ph=function(e){function t(t,n,i,r){var s;return(s=e.call(this,t,n,i,r)||this).popup=void 0,s.itemGoldScrew=void 0,s.itemSilverScrew=void 0,s.text=void 0,s.items=[],s.viewAdButton=void 0,s.skipButton=void 0,s.adsTimer=void 0,s.treasure=void 0,s.popupContents=void 0,s.popupFadeOutAnimation=void 0,s.backgroundFadeInAnimation=void 0,s.contentShowUpAnimation=void 0,s.iconAttentionAnimation=void 0,s.cometTwinkle=void 0,s.starTwinkleUp=void 0,s.starTwinkleUp2=void 0,s.sparksExplosive=void 0,s.onceClose=void 0,s.handleClosePopup=function(){var e;null==(e=s.iconAttentionAnimation)||e.remove(),s.runCloseAnimation()},s.handleShowRewardedVideoAd=(0,a.Z)(h().mark((function e(){var t,n,i,r,a,o,c,u,d,p,f;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=s.scene,n=t.audio,i=t.game,e.prev=1,s.viewAdButton.setDisabled(!0),null==(r=s.iconAttentionAnimation)||r.remove(),i.globalScene.screen.open(Vr.o4.NOTIFY_SCREEN,{message:"Loading ads...",duration:0,loading:!0}),n.pauseMusic(),n.muteAll(),e.next=9,new(l())((function(e,t){var n;null==(n=s.adsTimer)||n.remove(),s.adsTimer=s.scene.time.delayedCall(dh.Timeout,t),s.scene.ads.getAdStatus(GameCore.Ads.Types.REWARDED)===GameCore.Ads.Status.LOADING?s.scene.ads.events.once(GameCore.Ads.Events.LOADED,e):s.scene.ads.preloadRewardedVideoAsync().then(e).catch(t)}));case 9:return e.next=11,s.scene.ads.showRewardedVideoAsync();case 11:i.globalScene.screen.close(Vr.o4.NOTIFY_SCREEN),a=s.onceClose,s.onceClose=void 0,o=s.treasure,c=o.GoldScrew,u=void 0===c?0:c,d=o.SilverScrew,p=void 0===d?0:d,s.scene.screen.close(s.name),s.scene.game.globalScene.openProductReceiveScreen({GoldScrew:u,SilverScrew:p},"RewardsScreen",(function(){a&&a()})),s.scene.audio.playSound(Xa.Z.DAILY_REWARD),s.popupContents.killGroup(),e.next=28;break;case 21:if(e.prev=21,e.t0=e.catch(1),!(e.t0 instanceof Object&&GameCore.Utils.Object.hasOwn(e.t0,"code"))){e.next=27;break}if("USER_INPUT"!==e.t0.code){e.next=27;break}return s.showNotifySkipAds(),e.abrupt("return");case 27:s.showNotifyNoAds();case 28:return e.prev=28,s.scene.ads.preloadRewardedVideoAsync().catch((function(e){})),null==(f=s.adsTimer)||f.destroy(),n.unmuteAll(),n.playMusic(),s.handleClosePopup(),s.viewAdButton.setDisabled(!1),e.finish(28);case 36:case"end":return e.stop()}}),e,null,[[1,21,28,36]])}))),s.showNotifyNoAds=function(e){e&&e.name!==Vr.o4.NOTIFY_SCREEN||s.scene.game.globalScene.screen.open(Vr.o4.NOTIFY_SCREEN,{message:"No ads to display!",duration:1200,loading:!1})},s.showNotifySkipAds=function(){s.scene.game.globalScene.screen.open(Vr.o4.NOTIFY_SCREEN,{message:"Sorry, No Rewards!\nYou have cancelled the ad!",duration:1500,loading:!1})},s.runCloseAnimation=function(){return s.runExitsAnimation(0,200),l().resolve()},s.scene=t,s.createPopup(),s.createContents(),s.createViewAdsButton(),s.createSkipButton(),s.createEffects(),s.createContentsGroup(),s.createInput(),s.setDepth(Vr.Ks.POPUP),s.background.setAlpha(.8),s.onceClose=void 0,s}(0,o.Z)(t,e);var n=t.prototype;return n.createContentsGroup=function(){this.popupContents=this.scene.make.group({}),this.popupContents.addMultiple([this.itemGoldScrew,this.itemSilverScrew,this.text,this.viewAdButton,this.skipButton])},n.open=function(t){if(e.prototype.open.call(this),this.items=[],this.viewAdButton.setScale(1),this.itemGoldScrew.setScale(1).kill(),this.itemSilverScrew.setScale(1).kill(),t){var n=t.treasure,i=t.onceClose;this.onceClose=i,n.GoldScrew&&(this.itemGoldScrew.revive(),this.items.push(this.itemGoldScrew)),n.SilverScrew&&(this.itemSilverScrew.revive(),this.items.push(this.itemSilverScrew)),this.treasure=n,this.alignItem()}this.updateText(),this.items.forEach((function(e){e.stopAnimation()})),this.runOpenAnimation()},n.alignItem=function(){var e,t=this;if(0!==this.items.length){var n=ah()(e=this.items).call(e,(function(e,t){return e+t.width}),0)+40*(this.items.length-1),i=-n/2+this.items[0].width/2;this.items.forEach((function(e,n){Phaser.Display.Align.In.Center(e,t.popup,i,-70),i+=e.width+40})),this.text.setPosition(0,20)}},n.updateText=function(){var e=this.treasure,t=e.GoldScrew,n=void 0===t?0:t,i=e.SilverScrew,r=void 0===i?0:i,s=n+(n>1?" gold screws":" gold screw"),a=r+(r>1?" silver screws":" silver screw");n>0&&r>0?this.text.setText("Watch a video to get\n"+s+"\nand "+a+"!"):n>0?this.text.setText("Watch a video to get\n "+s+"!"):r>0?this.text.setText("Watch a video to get\n "+a+"!"):this.text.setText("Watch a video to get\n some screws!")},n.createInput=function(){},n.createPopup=function(){this.popup=new $c.Z(this.scene,{width:878/3,height:1129/3}),this.add(this.popup),this.popup.getPopup().setVisible(!1),Phaser.Display.Align.In.Center(this.popup,this.zone)},n.createContents=function(){this.itemGoldScrew=new oh.Z(this.scene,{key:uh,frame:hh.ICON_SCREW_GOLD.FILE,width:1.3*hh.ICON_SCREW_GOLD.WIDTH,height:1.3*hh.ICON_SCREW_GOLD.HEIGHT,text:""}),this.itemSilverScrew=new oh.Z(this.scene,{key:uh,frame:hh.ICON_SCREW_SILVER.FILE,width:1.3*hh.ICON_SCREW_SILVER.WIDTH,height:1.3*hh.ICON_SCREW_SILVER.HEIGHT,text:""}),this.text=new ho.Z(this.scene,{text:"",fontSize:this.scene.fontSize(25)}).setCenterAlign(),this.popup.add([this.itemGoldScrew,this.itemSilverScrew,this.text])},n.createViewAdsButton=function(){this.viewAdButton=new an.Z(this.scene,uh,hh.BUTTON_BLUE.FILE,1.2*hh.BUTTON_BLUE.WIDTH,1.2*hh.BUTTON_BLUE.HEIGHT),this.viewAdButton.setName("ViewAd"),this.viewAdButton.onClick=this.handleShowRewardedVideoAd;var e=new ho.Z(this.scene,{text:"GET NOW!",fontSize:this.scene.fontSize(23),strokeColor:0,strokeThickness:2.4,strokeOffset:{y:.5}});Phaser.Display.Align.In.Center(e,this.viewAdButton,0,-2.5),this.viewAdButton.add(e),Phaser.Display.Align.In.Center(this.viewAdButton,this.zone,0,120),this.add(this.viewAdButton)},n.createSkipButton=function(){this.skipButton=new an.Z(this.scene,uh,hh.BLANK,129,25),this.skipButton.setName("NoThanks"),this.skipButton.button.setVisible(!1);var e=new ho.Z(this.scene,{text:"No thanks",fontSize:this.scene.fontSize(23),strokeColor:0,strokeThickness:2.4,strokeOffset:{y:.5}});this.skipButton.add(e),this.skipButton.onClick=this.handleClosePopup,Phaser.Display.Align.In.BottomCenter(this.skipButton,this.viewAdButton,0,50),this.add(this.skipButton)},n.runOpenAnimation=function(){return this.revive(),this.popupContents.reviveGroup(),this.runBackgroundEntrancesAnimation(0,200),this.runPopupContentEntrancesAnimation(100,400),this.runLogoAttentionAnimation(1e3),l().resolve()},n.runBackgroundEntrancesAnimation=function(e,t){this.backgroundFadeInAnimation||(this.backgroundFadeInAnimation=new al.Z({targets:[this.background],delay:e,duration:t,props:{alpha:{start:0,to:.8}}})),this.backgroundFadeInAnimation.play()},n.runPopupContentEntrancesAnimation=function(e,t){var n;null==(n=this.contentShowUpAnimation)||n.remove(),this.contentShowUpAnimation=new cl.Z({targets:this.popupContents.getChildren(),duration:t,delay:this.scene.tweens.stagger(100,{start:e}),props:{scale:{getStart:function(e){return e.scale-.3},getEnd:function(e){return e.scale}},alpha:{start:0,from:0,to:1}}}),this.contentShowUpAnimation.play()},n.runLogoAttentionAnimation=function(e){var t=this.itemGoldScrew,n=t.x,i=t.y,r=t.width,s=t.height,a=this.itemSilverScrew,o=a.x,c=a.y,l=a.width,u=a.height;this.starTwinkleUp.run(1,n,i,r,s),this.starTwinkleUp2.run(1,o,c,l,u),this.iconAttentionAnimation=new Dl({targets:[this.itemGoldScrew,this.itemSilverScrew,this.viewAdButton],delay:e,props:{scale:"+=0.05"}}),this.iconAttentionAnimation.play()},n.runExitsAnimation=function(e,t){var n=this;this.popupFadeOutAnimation||(this.popupFadeOutAnimation=new ol.Z({targets:this.popupContents.getChildren(),delay:e,duration:t,props:{alpha:{start:.8,to:0}},onComplete:function(){n.onceClose&&n.onceClose(),n.onceClose=void 0,n.scene.screen.close(n.name)}})),this.popupFadeOutAnimation.play()},n.createEffects=function(){this.cometTwinkle=new ch.Z(this.scene),this.starTwinkleUp=new Ll.Z(this.scene),this.starTwinkleUp2=new Ll.Z(this.scene),this.sparksExplosive=new Ec.Z(this.scene),this.add([this.cometTwinkle,this.starTwinkleUp,this.starTwinkleUp2,this.sparksExplosive])},t}(GameCore.Screen),fh=ph,vh=n(456),mh=n.n(vh),gh=function(e){function t(t){var n;return(n=e.call(this,t)||this).windX=1,n.airFrictionX=.05,n.airFrictionY=.01,n._lastRotation=0,n.airFrictionX=.01*Math.random()+.01,n.airFrictionY=.004*Math.random()+.006,(0,Ka.Z)(n)||(0,Ka.Z)(n)}return(0,o.Z)(t,e),t.prototype.update=function(t,n,i){for(var r=e.prototype.update.call(this,t,n,i),s=t;s>16.67;)this.velocityX-=yh(this.velocityX,.2,this.airFrictionX)/60,this.velocityY-=yh(this.velocityY,.2,this.airFrictionY)/60,s-=16.67;return this.velocityX-=yh(this.velocityX,.2,this.airFrictionX)*s/1e3,this.velocityY-=yh(this.velocityY,.2,this.airFrictionY)*s/1e3,this.rotation=this._lastRotation+Math.random()*Math.PI/180*4,this._lastRotation=this.rotation,r},t}(Phaser.GameObjects.Particles.Particle),yh=function(e,t,n){return void 0===t&&(t=.1),void 0===n&&(n=.04),t*e+mh()(e)*n*e*e},Eh=gh,Sh=function(e){function t(t){var n;return n=e.call(this,t)||this,(0,Ka.Z)(n)||(0,Ka.Z)(n)}return(0,o.Z)(t,e),t.prototype.update=function(t,n,i){for(var r=e.prototype.update.call(this,t,n,i),s=Math.atan(this.velocityY/this.velocityX),a=t;a>16.67;){var o=Math.sqrt(Math.pow(this.velocityX,2)+Math.pow(this.velocityY,2));o-=wh(o,.2,.01)/60,this.velocityX=mh()(this.velocityX)*o*Math.abs(Math.cos(s)),this.velocityY=mh()(this.velocityY)*o*Math.abs(Math.sin(s)),a-=16.67}var c=Math.sqrt(Math.pow(this.velocityX,2)+Math.pow(this.velocityY,2));return c-=wh(c,.2,.01)*a/1e3,this.velocityX=mh()(this.velocityX)*c*Math.abs(Math.cos(s)),this.velocityY=mh()(this.velocityY)*c*Math.abs(Math.sin(s)),this.rotation=s,r},t}(Phaser.GameObjects.Particles.Particle),wh=function(e,t,n){return void 0===t&&(t=.1),void 0===n&&(n=.04),t*e+mh()(e)*n*e*e},Ih=Sh,Ah=ja.Z.EFFECTS,Th=Ah.KEY,Ch=Ah.FRAME,bh=function(e){function t(t){var n;return(n=e.call(this,t,Th)||this).leftConfettiEmitter=void 0,n.leftRibbonEmitter=void 0,n.rightConfettiEmitter=void 0,n.rightRibbonEmitter=void 0,n.listEmitter=[],n.setDepth(za.Z.ON_TOP),n.createExplodeAnimation(),n.scene.add.existing((0,Ka.Z)(n)),n}(0,o.Z)(t,e);var n=t.prototype;return n.createExplodeAnimation=function(){var e=1/this.scene.world.getPixelRatio(),t=this.scene.world.getWorldSize(),n=t.width,i=(t.height,[Ch.CONFETTI_PARTICLE_1,Ch.CONFETTI_PARTICLE_2,Ch.CONFETTI_PARTICLE_3,Ch.CONFETTI_PARTICLE_4,Ch.CONFETTI_PARTICLE_5,Ch.CONFETTI_PARTICLE_6,Ch.CONFETTI_PARTICLE_7]),r=[1626097,10222125,16727594,16753164,16177466],s=[Ch.RIBBON_PARTICLE_1,Ch.RIBBON_PARTICLE_2,Ch.RIBBON_PARTICLE_3,Ch.RIBBON_PARTICLE_4,Ch.RIBBON_PARTICLE_5,Ch.RIBBON_PARTICLE_6],a={frame:i,tint:r,x:-n/2-20,y:0,speed:{min:200,max:2e3},gravityY:250,scale:{start:.1*e,end:.8*e,ease:Phaser.Math.Easing.Expo.Out},angle:{start:270,end:360,steps:30},alpha:{start:1,end:0,ease:Phaser.Math.Easing.Expo.In},lifespan:{min:1500,max:2e3},maxParticles:0,on:!1,particleClass:Eh},o={frame:s,tint:r,x:-n/2-20,y:0,speed:{min:1500,max:1800},angle:{start:272,end:360,steps:7},gravityY:0,gravityX:0,lifespan:400,scale:{start:.1*e,end:.55*e,ease:Phaser.Math.Easing.Expo.Out},alpha:{start:1,end:0,ease:Phaser.Math.Easing.Linear},maxParticles:0,on:!1,particleClass:Ih},c={frame:i,tint:r,x:n/2+20,y:0,speed:{min:200,max:2e3},gravityY:250,scale:{start:.1*e,end:.8*e,ease:Phaser.Math.Easing.Expo.Out},angle:{start:180,end:270,steps:30},alpha:{start:1,end:0,ease:Phaser.Math.Easing.Expo.In},lifespan:{min:1500,max:2e3},maxParticles:0,on:!1,particleClass:Eh},l={frame:s,tint:r,x:n/2+20,y:0,speed:{min:1500,max:1800},angle:{start:180,end:268,steps:7},gravityY:0,gravityX:0,lifespan:400,scale:{start:.1*e,end:.55*e,ease:Phaser.Math.Easing.Expo.Out},alpha:{start:1,end:0,ease:Phaser.Math.Easing.Linear},maxParticles:0,on:!1,particleClass:Ih};this.leftConfettiEmitter=this.createEmitter(a),this.leftRibbonEmitter=this.createEmitter(o),this.rightConfettiEmitter=this.createEmitter(c),this.rightRibbonEmitter=this.createEmitter(l),this.listEmitter=[this.leftConfettiEmitter,this.leftRibbonEmitter,this.rightConfettiEmitter,this.rightRibbonEmitter]},n.explode=function(e,t){this.leftConfettiEmitter.flow(1e5,30),this.leftRibbonEmitter.flow(1e5,7),this.rightConfettiEmitter.flow(1e5,30),this.rightRibbonEmitter.flow(1e5,7),this.scene.time.delayedCall(500,this.stop.bind(this))},n.stop=function(){this.listEmitter.forEach((function(e){e.stop()}))},n.killAll=function(){var e=this;this.listEmitter.forEach((function(t){t.killAll(),t.forEachDead((function(e){e.resetPosition()}),e)}))},t}(Phaser.GameObjects.Particles.ParticleEmitterManager),Ph=bh,xh=ja.Z.DEFAULT,Rh=xh.KEY,Oh=xh.FRAME,_h=function(e){function t(t){var n;(n=e.call(this,t,Rh,Oh.BUTTON_GREEN_MEDIUM.FILE,157,163/3)||this).pulsateBubbleAnimation=void 0,n.setName("NextLevelButton");var i=n.scene.add.container(0,0),r=new ho.Z(n.scene,{text:"Next",fontSize:n.scene.fontSize(23),strokeColor:2065684,strokeThickness:2.4,strokeOffset:{y:.5}}).setCenterAlign();return i.add([r]),Phaser.Display.Align.In.Center(r,(0,Ka.Z)(n)),n.add(i),n}(0,o.Z)(t,e);var n=t.prototype;return n.runPulsateBubbleAnimation=function(){this.pulsateBubbleAnimation||(this.pulsateBubbleAnimation=new Dl({targets:this.getAll(),duration:1e3,props:{scale:"*=1.1"}})),this.pulsateBubbleAnimation.play()},n.stopPulsateBubbleAnimation=function(){var e;null==(e=this.pulsateBubbleAnimation)||e.stop()},t}(an.Z),kh=_h,Dh=function(e){return e[e.NONE=1]="NONE",e[e.UNDO=2]="UNDO",e[e.REPLAY=3]="REPLAY",e[e.REMOVE_SCREW=4]="REMOVE_SCREW",e[e.HAMMER=5]="HAMMER",e[e.ADS_HOLE=6]="ADS_HOLE",e[e.LIGHTNING=7]="LIGHTNING",e[e.BONUS_TIME=8]="BONUS_TIME",e}({}),Lh=((hc={})[Dh.NONE]="None",hc[Dh.UNDO]="UndoItem",hc[Dh.REPLAY]="ReplayItem",hc[Dh.REMOVE_SCREW]="RemoveScrewItem",hc[Dh.HAMMER]="HammerItem",hc[Dh.ADS_HOLE]="AdsHole",hc[Dh.LIGHTNING]="LightningItem",hc[Dh.BONUS_TIME]="BonusTimeItem",hc),Bh="UseLightningItem",Nh="UseBonusTimeItem",Hh=ja.Z.DEFAULT,Mh=Hh.KEY,Gh=Hh.FRAME,Wh=function(e){function t(t){var n;return(n=e.call(this,t,Mh,Gh.BUTTON_GREEN_MEDIUM.FILE,157,163/3)||this).text=void 0,n.icon=void 0,n.setName("ClaimDoubleButton"),n.createText(),n.createIcon(),n.alignButton(),n}(0,o.Z)(t,e);var n=t.prototype;return n.createText=function(){this.text=new ho.Z(this.scene,{text:"Claim x5",fontSize:this.scene.fontSize(23),strokeColor:2262298,strokeThickness:2.4,strokeOffset:{y:.5}}),this.text.setOrigin(.5),this.add(this.text)},n.createIcon=function(){this.icon=this.scene.make.image({key:Mh,frame:Gh.ICON_GOLD_VIDEO.FILE}),this.icon.setOrigin(.5),this.icon.setWorldSize(Gh.ICON_GOLD_VIDEO.WIDTH,Gh.ICON_GOLD_VIDEO.HEIGHT),this.add(this.icon)},n.alignButton=function(){Phaser.Display.Align.In.RightCenter(this.text,this,-15,0),Phaser.Display.Align.In.LeftCenter(this.icon,this,-15,0)},t}(an.Z),Uh=Wh,Fh=ja.Z.DEFAULT,Zh=Fh.KEY,Yh=Fh.FRAME,Vh=function(e){function t(t){var n;return(n=e.call(this,t,Zh,Yh.BUTTON_GREEN_MEDIUM.FILE,157,163/3)||this).setName("ClaimButton"),n.button.setVisible(!1),n.createText(),n}return(0,o.Z)(t,e),t.prototype.createText=function(){var e=new ho.Z(this.scene,{text:"Tap To Claim",fontSize:this.scene.fontSize(20),strokeColor:0,strokeThickness:2.4,strokeOffset:{y:.5},fillColor:13550789});e.setOrigin(.5),this.add(e)},t}(an.Z),zh=Vh,Kh=ja.Z.DEFAULT,jh=Kh.KEY,Xh=Kh.FRAME,Qh=GameCore.Configs.Gameplay,qh=Qh.LevelReward,Jh=Qh.UseLoopLevel,$h=function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).scene=void 0,i.titleYouWin=void 0,i.buttonsContainer=void 0,i.buttonHome=void 0,i.nextLevelButton=void 0,i.claimDoubleButton=void 0,i.claimButton=void 0,i.rewardText=void 0,i.goldScrewItem=void 0,i.silverScrewItem=void 0,i.levelCompleteParticle=void 0,i.titleShowUpAnimation=void 0,i.rewardTextShowUpAnimation=void 0,i.buttonsContainerShowUpAnimation=void 0,i.rewardPopupShowUpAnimation=void 0,i.backgroundShowUpAnimation=void 0,i.rewardClaimAnimation=void 0,i.screenExitAnimation=void 0,i.showAdAfterDelay=void 0,i.delayAdsComplete=!0,i.rewardGroup=void 0,i.defaultGroup=void 0,i.isHasLevelReward=!1,i.open=function(){e.prototype.open.call((0,Ka.Z)(i)),i.checkHasLevelReward(),i.scene.registry.set(Bh,!1),i.scene.registry.set(Nh,!1),i.delayAdsComplete=!0,i.disableButtons(!0),i.runScreenShowUpAnimation()},i.handleGotoDashboard=(0,a.Z)(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i.disableButtons(!0),i.delayAdsComplete){e.next=4;break}return e.next=4,i.showAdsImmediately();case 4:i.runScreenExitAnimation((function(){i.scene.game.globalScene.events.emit(Or.K.SWITCH,Or.C.DASHBOARD_SCENE),i.nextLevelButton.stopPulsateBubbleAnimation(),i.scene.screen.close(i.name)}));case 5:case"end":return e.stop()}}),e)}))),i.handleNextLevel=(0,a.Z)(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i.disableButtons(!0),i.delayAdsComplete){e.next=4;break}return e.next=4,i.showAdsImmediately();case 4:i.runScreenExitAnimation((0,a.Z)(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(i.scene.level.getLastCompleteLevel()>=Lc)||Jh){e.next=4;break}i.scene.game.globalScene.events.emit(Or.K.SWITCH,Or.C.DASHBOARD_SCENE),e.next=7;break;case 4:return e.next=6,i.scene.storage.dispatch(Sa());case 6:i.scene.level.getLevelData()&&i.scene.stateManager.ready();case 7:i.nextLevelButton.stopPulsateBubbleAnimation(),i.scene.screen.close(i.name);case 9:case"end":return e.stop()}}),e)}))));case 5:case"end":return e.stop()}}),e)}))),i.handleClaimDouble=(0,a.Z)(h().mark((function e(){var t,n,r,s,a,o,c,u,d;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=i.scene,n=t.audio,r=t.game,e.prev=1,i.disableButtons(!0),r.globalScene.screen.open(Vr.o4.NOTIFY_SCREEN,{message:"Loading ads...",duration:0,loading:!0}),n.pauseMusic(),n.muteAll(),e.next=8,new(l())((function(e,t){var n;null==(n=i.scene.adsTimer)||n.remove(),i.scene.adsTimer=i.scene.time.delayedCall(GameCore.Configs.Network.Timeout,t),i.scene.ads.getAdStatus(GameCore.Ads.Types.REWARDED)===GameCore.Ads.Status.LOADING?i.scene.ads.events.once(GameCore.Ads.Events.LOADED,e):i.scene.ads.preloadRewardedVideoAsync().then(e).catch(t)}));case 8:return e.next=10,i.scene.ads.showRewardedVideoAsync();case 10:r.globalScene.screen.close(Vr.o4.NOTIFY_SCREEN),s=qh.Reward,a=s.GoldScrew,o=void 0===a?0:a,c=s.SilverScrew,u=void 0===c?0:c,5,i.goldScrewItem.updateItem(5*Number(o)),i.silverScrewItem.updateItem(5*Number(u)),d=function(){i.runRewardClaimAnimation(300,100).then((function(){i.updateCurrentScrew(5*o,5*u),i.scene.time.delayedCall(200,(function(){i.handleClaimDone()}))}))},i.runScreenExitAnimation(d),i.scene.audio.playSound(Xa.Z.DAILY_REWARD),e.next=29;break;case 20:if(e.prev=20,e.t0=e.catch(1),!(e.t0 instanceof Object&&GameCore.Utils.Object.hasOwn(e.t0,"code"))){e.next=27;break}if("USER_INPUT"!==e.t0.code){e.next=27;break}return i.showNotifySkipAds(),i.disableButtons(!1),e.abrupt("return");case 27:i.disableButtons(!1),i.showNotifyNoAds();case 29:return e.prev=29,i.scene.ads.preloadRewardedVideoAsync().catch((function(e){})),n.unmuteAll(),n.playMusic(),e.finish(29);case 34:case"end":return e.stop()}}),e,null,[[1,20,29,34]])}))),i.handleClaim=(0,a.Z)(h().mark((function e(){var t,n,r,s,a,o;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i.disableButtons(!0),!(i.scene.player.getLevel()<=GameCore.Configs.Ads.MinLevelToShow)){e.next=5;break}return e.next=5,i.showAdsImmediately();case 5:t=qh.Reward,n=t.GoldScrew,r=void 0===n?0:n,s=t.SilverScrew,a=void 0===s?0:s,o=function(){i.runRewardClaimAnimation().then((function(){i.updateCurrentScrew(r,a),i.scene.time.delayedCall(200,(function(){i.handleClaimDone()}))}))},i.runScreenExitAnimation(o),i.scene.audio.playSound(Xa.Z.DAILY_REWARD);case 9:case"end":return e.stop()}}),e)}))),i.handleClaimDone=function(){var e=Or.C.DASHBOARD_SCENE;i.scene.game.globalScene.events.emit(Or.K.SWITCH,e),i.scene.screen.close(i.name)},i.showNotifyNoAds=function(e){e&&e.name!==Vr.o4.NOTIFY_SCREEN||i.scene.game.globalScene.screen.open(Vr.o4.NOTIFY_SCREEN,{message:"No ads to display!",duration:1200,loading:!1})},i.showNotifySkipAds=function(){i.scene.game.globalScene.screen.open(Vr.o4.NOTIFY_SCREEN,{message:"Sorry, No Rewards!\nYou have cancelled the ad!",duration:1500,loading:!1})},i.scene=t,i.createUI(),i.alignUI(),i.createInput(),i.setDepth(Vr.Ks.POPUP),i}(0,o.Z)(t,e);var n=t.prototype;return n.checkHasLevelReward=function(){var e=this.scene.level.getLevel();this.isHasLevelReward=qh.Enable&&(1===qh.Step||e%qh.Step===1),this.isHasLevelReward?(this.updateRewardItem(),this.rewardGroup.reviveGroup(),this.defaultGroup.killGroup()):(this.rewardGroup.killGroup(),this.defaultGroup.reviveGroup(),this.nextLevelButton.runPulsateBubbleAnimation())},n.updateRewardItem=function(){var e=qh.Reward,t=e.GoldScrew,n=void 0===t?0:t,i=e.SilverScrew,r=void 0===i?0:i,s=[];if(0===r?this.silverScrewItem.kill():(this.silverScrewItem.updateItem(r),s.push(this.silverScrewItem)),0===n?this.goldScrewItem.kill():(this.goldScrewItem.updateItem(n),s.push(this.goldScrewItem)),0!==s.length){if(1===s.length)return s[0].setPosition(0,0),void s[0].revive();var a=ah()(s).call(s,(function(e,t){return e+t.width}),0)+40*(s.length-1),o=-a/2+s[0].width/2;s.forEach((function(e,t){e.setPosition(o,0),o+=e.width+40,e.revive()}))}},n.createUI=function(){this.createTitleYouWin(),this.createButtonHome(),this.createButtonNext(),this.createRewardContents(),this.createRewardGroup(),this.createDefaultGroup(),this.createButtonContainer(),this.createLevelCompleteParticle()},n.createButtonContainer=function(){this.buttonsContainer=this.scene.add.container(),this.buttonsContainer.add([this.buttonHome,this.nextLevelButton,this.claimDoubleButton,this.claimButton]);var e=this.nextLevelButton.width+this.buttonHome.width+20,t=-e/2+this.buttonHome.width/2,n=e/2-this.nextLevelButton.width/2;Phaser.Display.Align.In.Center(this.buttonHome,this.buttonsContainer,t,100),Phaser.Display.Align.In.Center(this.nextLevelButton,this.buttonsContainer,n,100),Phaser.Display.Align.In.Center(this.claimDoubleButton,this.buttonsContainer,0,80),Phaser.Display.Align.In.BottomCenter(this.claimButton,this.claimDoubleButton,0,60),this.add(this.buttonsContainer)},n.createLevelCompleteParticle=function(){this.levelCompleteParticle=new Ph(this.scene),this.add(this.levelCompleteParticle)},n.alignUI=function(){Phaser.Display.Align.In.Center(this.titleYouWin,this,0,-200),Phaser.Display.Align.In.BottomCenter(this.rewardText,this.titleYouWin,0,25),Phaser.Display.Align.In.Center(this.silverScrewItem,this),Phaser.Display.Align.In.Center(this.goldScrewItem,this),Phaser.Display.Align.In.Center(this.buttonsContainer,this,0,50)},n.createInput=function(){this.buttonHome.onClick=this.handleGotoDashboard,this.nextLevelButton.onClick=this.handleNextLevel,this.claimDoubleButton.onClick=this.handleClaimDouble,this.claimButton.onClick=this.handleClaim},n.createTitleYouWin=function(){var e=Xh.POPUP_TITLE_WIN,t=e.FILE,n=e.WIDTH,i=e.HEIGHT;this.titleYouWin=this.scene.make.image({key:jh,frame:t}),this.titleYouWin.setWorldSize(n,i),this.add(this.titleYouWin)},n.createButtonHome=function(){var e=Xh.BUTTON_BLUE_SQUARE,t=e.FILE,n=e.WIDTH,i=e.HEIGHT;this.buttonHome=new an.Z(this.scene,jh,t,n,i),this.buttonHome.setName("Home");var r=this.scene.make.image({key:jh,frame:Xh.ICON_HOME.FILE});r.setWorldSize(Xh.ICON_HOME.WIDTH,Xh.ICON_HOME.HEIGHT),Phaser.Display.Align.In.Center(r,this.buttonHome),this.buttonHome.add([r])},n.createButtonNext=function(){this.nextLevelButton=new kh(this.scene)},n.createRewardContents=function(){this.createRewardText(),this.createRewardItems()},n.createRewardText=function(){this.rewardText=new ho.Z(this.scene,{text:"Your Rewarded",fontSize:this.scene.fontSize(20),fillColor:16444313,fontStyle:"normal",strokeThickness:0}),this.rewardText.kill(),this.add(this.rewardText)},n.createRewardItems=function(){this.goldScrewItem=new oh.Z(this.scene,{key:jh,frame:Xh.ICON_SCREW_GOLD.FILE,width:Xh.ICON_SCREW_GOLD.WIDTH,height:Xh.ICON_SCREW_GOLD.HEIGHT,text:"0"}),this.goldScrewItem.kill(),this.silverScrewItem=new oh.Z(this.scene,{key:jh,frame:Xh.ICON_SCREW_SILVER.FILE,width:Xh.ICON_SCREW_SILVER.WIDTH,height:Xh.ICON_SCREW_SILVER.HEIGHT,text:"0"}),this.silverScrewItem.kill(),this.add([this.goldScrewItem,this.silverScrewItem])},n.createRewardGroup=function(){this.rewardGroup=this.scene.add.group(),this.claimDoubleButton=new Uh(this.scene),this.claimButton=new zh(this.scene),this.rewardGroup.addMultiple([this.claimDoubleButton,this.claimButton,this.rewardText])},n.createDefaultGroup=function(){this.defaultGroup=this.scene.add.group(),this.defaultGroup.addMultiple([this.buttonHome,this.nextLevelButton])},n.showAdsImmediately=function(){var e=(0,a.Z)(h().mark((function e(){var t;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:null==(t=this.showAdAfterDelay)||t.remove(),this.showAdAfterDelay=void 0,this.delayAdsComplete=!0,this.scene.handleShowInterstitialAd();case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.runScreenShowUpAnimation=function(){var e,t,n,i,r,s=this;null==(e=this.titleShowUpAnimation)||e.remove(),null==(t=this.rewardTextShowUpAnimation)||t.remove(),null==(n=this.buttonsContainerShowUpAnimation)||n.remove(),null==(i=this.backgroundShowUpAnimation)||i.remove(),null==(r=this.rewardPopupShowUpAnimation)||r.remove();var a=this.titleYouWin,o=a.x,c=a.y,l=a.scale,u=this.rewardText,h=u.x,d=u.y,p=u.scale,f=this.buttonsContainer,v=f.x,m=f.y,g=f.scale;this.titleYouWin.setAlpha(0),this.buttonsContainer.setAlpha(0),this.background.setAlpha(0),this.rewardText.setAlpha(0),this.scene.time.delayedCall(200,(function(){var e=s.scene.world.getWorldSize().width;s.scene.audio.playSound(Xa.Z.CONFETTI),s.levelCompleteParticle.explode(e/2+50,0)}));var y=this.getShowUpTweenConfig([this.titleYouWin],200,c,l,(function(){return s.titleYouWin.setPosition(o,c)})),E=this.getShowUpTweenConfig([this.rewardText],250,d,p,(function(){return s.rewardText.setPosition(h,d)})),S=this.getShowUpTweenConfig([this.buttonsContainer],300,m,g,(function(){s.buttonsContainer.setPosition(v,m),s.disableButtons(!1)}));this.backgroundShowUpAnimation=this.scene.tweens.add({targets:[this.background],duration:300,ease:Phaser.Math.Easing.Sine.In,alpha:{from:0,to:.8},onStart:function(){return s.background.setAlpha(0)},onComplete:function(){return s.background.setAlpha(.8)}}),this.titleShowUpAnimation=this.scene.tweens.add(y),this.buttonsContainerShowUpAnimation=this.scene.tweens.add(S),this.isHasLevelReward&&(this.rewardTextShowUpAnimation=this.scene.tweens.add(E),this.goldScrewItem.active&&this.goldScrewItem.runShowUpAnimation(1200,500),this.silverScrewItem.active&&this.silverScrewItem.runShowUpAnimation(1200,500)),this.scene.player.getLevel()<=GameCore.Configs.Ads.MinLevelToShow||this.isHasLevelReward||(this.delayAdsComplete=!1,this.showAdAfterDelay=this.scene.time.delayedCall(1700,(function(){s.delayAdsComplete=!0,s.scene.handleShowInterstitialAd()})))},n.runScreenExitAnimation=function(e){var t,n=this;null==(t=this.screenExitAnimation)||t.remove(),this.screenExitAnimation=this.scene.tweens.add({targets:[this.titleYouWin,this.buttonsContainer,this.background,this.rewardText],duration:200,alpha:0,ease:Phaser.Math.Easing.Quadratic.Out,onComplete:function(){n.titleYouWin.setAlpha(0),n.buttonsContainer.setAlpha(0),n.background.setAlpha(0),e&&e()}})},n.runRewardClaimAnimation=function(e,t){var n,i=this;void 0===e&&(e=300),void 0===t&&(t=0);var r=this.goldScrewItem,s=this.silverScrewItem;return null==(n=this.rewardClaimAnimation)||n.remove(),r.active&&this.runItemRewardAnimation(r,e,t,"GoldScrew"),s.active&&(s.stopAnimation(),this.runItemRewardAnimation(s,e,t,"SilverScrew")),new(l())((function(n){i.rewardClaimAnimation=i.scene.tweens.addCounter({from:0,to:1,delay:t,duration:e+100,ease:Phaser.Math.Easing.Quadratic.In,onComplete:function(){n()}})}))},n.runItemRewardAnimation=function(e,t,n,i){var r=this,s=this.scene.layoutManager.objects.header,a=("GoldScrew"===i?s.goldScrewBar.getIcon():s.silverScrewBar.getIcon()).getWorldPosition(),o=e.getWorldPosition(),c=o.x,l=o.y;this.remove(e),e.setDepth(za.Z.EFFECT).setPosition(c,l),e.stopAnimation();var u=e.scale;this.scene.tweens.add({targets:e,x:a.x,y:a.y,scale:.5,duration:t,delay:n,ease:Phaser.Math.Easing.Quadratic.In,onComplete:function(){e.kill(),e.setScale(u),r.add(e),s.runScrewBarAnimation(i)}})},n.getShowUpTweenConfig=function(e,t,n,i,r){return{targets:e,delay:t,props:{y:{from:n+200,to:n,ease:Phaser.Math.Easing.Back.Out,duration:500},alpha:{from:0,to:1,ease:Phaser.Math.Easing.Cubic.Out,duration:500},scale:{from:i-.15,to:i,ease:Phaser.Math.Easing.Elastic.Out,easeParams:[.1,.45],duration:200}},onComplete:function(){r&&r()}}},n.updateCurrentScrew=function(e,t){var n=this.scene.player.getGoldScrew()+e;this.scene.player.setCustomData("goldScrew",n);var i=this.scene.player.getSilverScrew()+t;this.scene.player.setCustomData("silverScrew",i)},t}(GameCore.Screen),ed=$h,td=ja.Z.GAMEPLAY,nd=(td.KEY,td.FRAME),id=function(e){function t(t){var n;return(n=e.call(this,t)||this).objects=void 0,n.guideUI=void 0,n.objects=null,n}(0,o.Z)(t,e);var n=t.prototype;return n.alignUI=function(){if(null!==this.objects){var e=this.scene,t=e.gameZone,n=e.ads.getBannerHeight(),i=e.world.getWorldSize().height,r=this.objects,s=r.header,a=r.footer,o=(i-n-nd.BUTTON_ITEM.HEIGHT-e.board.getWorldPosition().y-e.board.height/2)/2,c=(e.board.y-e.board.height/2-s.height)/2;Phaser.Display.Align.In.TopCenter(s,t,0,-c),Phaser.Display.Align.In.BottomCenter(a,t,0,-n-o)}},n.createGroups=function(){e.prototype.createGroups.call(this),this.guideUI=this.scene.add.group(),this.groups.guideUI=this.guideUI},n.setUIObjects=function(t){e.prototype.setUIObjects.call(this,t),this.addUIObjectsToGroups()},n.addUIObjectsToGroups=function(){null!==this.objects&&this.addObjectForGuideUI()},n.addObjectForGuideUI=function(){this.objects},t}(Ua),rd=id,sd=ja.Z.GAMEPLAY,ad=(sd.KEY,sd.FRAME,function(e){function t(){return e.apply(this,arguments)||this}return(0,o.Z)(t,e),t.prototype.alignUI=function(){if(null!==this.objects){var e=this.scene,t=(e.gameZone,e.board),n=(e.ads.getBannerHeight(),e.world.getWorldSize()),i=n.width,r=(n.height,this.objects),s=r.header,a=r.footer,o=(i/2-t.width/2-103)/2,c=(i/2-t.width/2-a.width)/2,l=Math.min(o,c,46);Phaser.Display.Align.To.LeftCenter(s,e.board,l-22,0),Phaser.Display.Align.To.RightCenter(a,e.board,l,0)}},t}(rd)),od=ad,cd={targets:[],duration:200,repeat:5,props:{alpha:{start:1,to:.1}}},ld=function(e){function t(t){return e.call(this,cd,t)||this}return(0,o.Z)(t,e),t}(ll.Z),ud=function(e){function t(t){var n;return(n=e.call(this,t,{text:"",fontSize:t.fontSize(14)})||this).scene=void 0,n.flickerAnimation=void 0,n.scene=t,n.setOrigin(.5,.5),n.setNotifyText("Loading interstitial ad..."),n.setVisible(!1),n.scene.add.existing((0,Ka.Z)(n)),n}(0,o.Z)(t,e);var n=t.prototype;return n.show=function(){this.setVisible(!0),this.runTextAnimation()},n.setNotifyText=function(e){this.setText(e)},n.runTextAnimation=function(){var e,t=this;this.flickerAnimation||(this.flickerAnimation=new ld({targets:[this],yoyo:!0,duration:300,repeat:3,ease:"Sine.easeInOut",onStart:function(){t.setVisible(!0)},onComplete:function(){t.setVisible(!1)}})),null==(e=this.flickerAnimation)||e.play()},t}(ho.Z),hd=ud,dd=ja.Z.GAMEPLAY,pd=dd.KEY,fd=dd.FRAME,vd=function(e){function t(t,n){var i;return(i=e.call(this,t,pd,fd.BUTTON_ITEM.FILE,fd.BUTTON_ITEM.WIDTH,fd.BUTTON_ITEM.HEIGHT)||this).icon=void 0,i.createUI(),i.createIcon(n),i.alignUI(),i.setName("GameButton"),i}(0,o.Z)(t,e);var n=t.prototype;return n.createUI=function(){},n.alignUI=function(){Phaser.Display.Align.In.Center(this.icon,this,0,0)},n.createIcon=function(e){var t=e.FILE,n=e.WIDTH,i=e.HEIGHT;this.icon=this.scene.make.image({key:pd,frame:t}),this.icon.setWorldSize(n,i),this.add(this.icon)},t}(an.Z),md=vd,gd=ja.Z.DEFAULT,yd=gd.KEY,Ed=gd.FRAME,Sd=ja.Z.GAMEPLAY,wd=Sd.KEY,Id=Sd.FRAME,Ad=function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).addIcon=void 0,i.countTextContainer=void 0,i.countText=void 0,i.enable=!0,i.limitCount=0,i.countUseInMatch=0,i.itemType=void 0,i.handleUseItem=function(){if(i.limitCount<=0)return i.scene.stateManager.pause(),void i.scene.layoutManager.showBuyItemScreen({itemType:i.itemType,countUseInMatch:i.countUseInMatch,isWatchAds:!0});var e,t=i.scene.player.getItems();i.scene.player.updateCustomFields({items:(0,r.Z)({},t,(e={},e[i.name]=i.limitCount-1,e))}),i.handleActiveItem()},i.createCount(),i.setName("BaseItem"),i.itemType=Dh.NONE,i.onClick=i.handleUseItem,i}(0,o.Z)(t,e);var n=t.prototype;return n.createCount=function(){this.createAddIcon(),this.createCountText()},n.createAddIcon=function(){var e=Ed.BUTTON_PLUS_GREEN,t=e.FILE,n=e.WIDTH,i=e.HEIGHT;this.addIcon=this.scene.add.image(0,0,yd,t),this.addIcon.setWorldSize(.9*n,.9*i),this.addIcon.kill(),this.add(this.addIcon),Phaser.Display.Align.In.TopRight(this.addIcon,this,3,3)},n.createCountText=function(){var e=this.scene.add.container(),t=this.scene.add.image(0,0,wd,Id.ICON_RED_CIRCLE.FILE);t.setWorldSize(Id.ICON_RED_CIRCLE.WIDTH,Id.ICON_RED_CIRCLE.HEIGHT),e.setSize(t.width,t.height),this.countText=new ho.Z(this.scene,{text:"",fontSize:this.scene.fontSize(13),strokeColor:11481901,strokeThickness:1.4,strokeOffset:{y:.5}}),Phaser.Display.Align.In.Center(this.countText,t,0,-2),e.add([t,this.countText]),this.add(e),this.countTextContainer=e,Phaser.Display.Align.In.TopRight(e,this,3,0)},n.handleActiveItem=function(){this.countUseInMatch+=1,this.scene.itemManager.activeItem(this),this.logUseItem()},n.logUseItem=function(){this.scene.analytics.event(Z._.USE_ITEM,{item_name:this.name,level:this.scene.level.getLevelWithStep()})},n.handleUseItemDone=function(){this.scene.timeManager.resume(),this.scene.itemManager.deActiveItem()},n.getCountUseInMatch=function(){return this.countUseInMatch},n.resetCount=function(){this.countUseInMatch=0},n.setLimitCount=function(e){this.limitCount=e<0||!e?0:e,this.updateTextCount()},n.updateTextCount=function(){this.limitCount>0?(this.addIcon.kill(),this.countText.setText(this.limitCount.toString()),this.countTextContainer.revive()):(this.countTextContainer.kill(),this.addIcon.revive())},n.enableItem=function(e,t){e!=this.enable&&(this.enable=e,this.setDisabled(!e)),e?this.revive():t&&this.kill()},n.cancelUseItem=function(){},t}(md),Td=Ad,Cd=ja.Z.GAMEPLAY,bd=(Cd.KEY,Cd.FRAME),Pd=function(e){function t(t){var n;return(n=e.call(this,t,{FILE:bd.ICON_UNDO.FILE,WIDTH:bd.ICON_UNDO.WIDTH,HEIGHT:bd.ICON_UNDO.HEIGHT})||this).setName(Lh[Dh.UNDO]),n.itemType=Dh.UNDO,n}return(0,o.Z)(t,e),t.prototype.handleActiveItem=function(){e.prototype.handleActiveItem.call(this),this.scene.itemManager.setDisabledItems(!0),this.handleUseItemDone(),this.scene.screwManager.undoMove()},t}(Td),xd=Pd,Rd=ja.Z.GAMEPLAY,Od=(Rd.KEY,Rd.FRAME),_d=function(e){function t(t){var n;return(n=e.call(this,t,{FILE:Od.ICON_REPLAY.FILE,WIDTH:Od.ICON_REPLAY.WIDTH,HEIGHT:Od.ICON_REPLAY.HEIGHT})||this).setName(Lh[Dh.REPLAY]),n.itemType=Dh.REPLAY,n}return(0,o.Z)(t,e),t.prototype.handleActiveItem=function(){var t=(0,a.Z)(h().mark((function t(){return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.prototype.handleActiveItem.call(this),this.scene.itemManager.setDisabledItems(!0),this.scene.itemManager.setUseReplayItem(!0),this.handleUseItemDone(),t.next=6,this.scene.storage.dispatch(wa());case 6:Yu.emit(Fu.REPLAY);case 7:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),t}(Td),kd=_d,Dd=n(203),Ld=ja.Z.GAMEPLAY,Bd=Ld.KEY,Nd=Ld.FRAME,Hd=Nd.ICON_HAMMER_PREFIX,Md=Hd.FILE,Gd=Hd.WIDTH,Wd=Hd.HEIGHT,Ud=function(){function e(e){this.scene=void 0,this.fadeInAnimation=void 0,this.centerIdleTween=void 0,this.center=void 0,this.hammer=void 0,this.circle=void 0,this.onCompleted=void 0,this.scene=e,this.createHammer(),this.createCircle()}var t=e.prototype;return t.runAnimation=function(e,t,n){this.setPosition(e,t),this.runHammerAnimation(n)},t.createHammer=function(){var e=Nd.ICON_HAMMER_PREFIX,t=e.FILE,n=e.WIDTH,i=e.HEIGHT;this.hammer=this.scene.add.image(0,0,Bd,t+"1"),this.hammer.setOrigin(.8,.1),this.hammer.setWorldSize(.5*n,.5*i),this.hammer.setDepth(za.Z.ON_TOP),this.hammer.kill()},t.createCircle=function(){var e=ja.Z.EFFECTS,t=e.KEY,n=e.FRAME;this.circle=this.scene.add.image(0,0,t,n.FX_CIRCLE_LIGHT),this.circle.setWorldSize(75.5,75),this.circle.setDepth(za.Z.ON_TOP).kill(),this.center=this.scene.add.image(0,0,t,n.FX_CIRCLE_LIGHT).setTint(16711680).setDepth(za.Z.ON_TOP-1),this.center.setWorldSize(30,30),this.center.kill()},t.runFadeInAnimation=function(e,t){var n,i;this.hammer.setPosition(e,t),this.hammer.setWorldSize(.5*Gd,.5*Wd),this.center.setPosition(e,t),this.hammer.revive(),this.scene.itemManager.showHintPanel({content:"Tap, hold and move the hammer!",backgroundDepth:za.Z.POPUP,footerDepth:za.Z.BUTTON,backgroundAlpha:.2}),null==(n=this.fadeInAnimation)||n.remove(),this.fadeInAnimation=new al.Z({targets:[this.hammer]}),null==(i=this.fadeInAnimation)||i.play(),this.runCenterIdleAnimation()},t.runCenterIdleAnimation=function(){var e,t=this;null==(e=this.centerIdleTween)||e.remove(),this.centerIdleTween=this.scene.tweens.add({targets:[this.center],scale:{from:.2,to:.4},alpha:{from:.5,to:1},onStart:function(){t.center.setAlpha(.5).setScale(.2),t.center.revive()},duration:500,repeat:-1,yoyo:!0})},t.runHammerAnimation=function(e){var t=this;this.scene.tweens.addCounter({from:0,to:1,duration:500,onUpdate:function(e){var n=Math.floor(8*e.progress)+1;t.hammer.setTexture(Bd,Md+n),t.hammer.setWorldSize(.5*Gd,.5*Wd)},onComplete:function(){t.runCircleAnimation(),t.scene.audio.playSound(Xa.Z.HAMMER_HIT,{volume:.5}),t.hammer.kill(),t.hammer.setAngle(0),t.hammer.setTexture(Bd,Md+"1"),t.hammer.setWorldSize(.5*Gd,.5*Wd),t.center.kill(),t.scene.itemManager.hideHintPanel(),t.onCompleted&&t.onCompleted(),e&&e(),t.scene.setDisabledButton(!1)},onStart:function(){var e;t.center.kill(),null==(e=t.centerIdleTween)||e.remove()}})},t.runCircleAnimation=function(){var e=this,t=this.circle.scale;this.scene.tweens.add({targets:[this.circle],scale:{from:0*t,to:5*t},alpha:{from:1,to:0,ease:Phaser.Math.Easing.Sine.In,hold:100},ease:Dd.Z,duration:400,onStart:function(){e.circle.setAlpha(1).setScale(0),e.circle.revive()},onComplete:function(){e.circle.kill(),e.circle.setScale(t)}})},t.setPosition=function(e,t){this.hammer.setPosition(e,t),this.center.setPosition(e,t),this.circle.setPosition(e,t)},t.getPosition=function(){return{x:this.hammer.x,y:this.hammer.y}},t.cancel=function(){var e,t=this.scene.itemManager;this.hammer.kill(),this.circle.kill(),t.hideHintPanel(),this.scene.screwManager.stopHammer(),this.center.kill(),null==(e=this.centerIdleTween)||e.remove()},e}(),Fd=Ud,Zd=ja.Z.GAMEPLAY,Yd=Zd.KEY,Vd=Zd.FRAME,zd=function(e){function t(t){var n;return(n=e.call(this,t,{FILE:Vd.ICON_HAMMER.FILE,WIDTH:Vd.ICON_HAMMER.WIDTH,HEIGHT:Vd.ICON_HAMMER.HEIGHT})||this).hammerAnimation=void 0,n.startPosition={x:0,y:0},n.pointerDownPosition={x:0,y:0},n.targetPosition={x:0,y:0},n.hasMove=!1,n.currentWoodHover=void 0,n.currentWoodTween=void 0,n.woodHighlightImage=void 0,n.startMovePointerEvent=function(e){var t=n.hammerAnimation.getPosition(),i=t.x,r=t.y;n.startPosition={x:i,y:r},n.hasMove=!1,n.pointerDownPosition={x:e.worldX,y:e.worldY},n.scene.input.on(Phaser.Input.Events.POINTER_MOVE,n.moveHammer),n.scene.input.once(Phaser.Input.Events.POINTER_UP,n.handlePointerUp),n.scene.events.on("update",n.updateHammer,(0,Ka.Z)(n))},n.handleHammerUse=function(){n.scene.runShakingAnimation(3),n.scene.screwManager.hammerHitWood(n.targetPosition.x,n.targetPosition.y,n.currentWoodHover)},n.moveHammer=function(e){var t=e.worldX-n.pointerDownPosition.x,i=e.worldY-n.pointerDownPosition.y,r=n.scene.world.getWorldSize(),s=r.width,a=r.height;0===t&&0===i||(n.hasMove=!0);var o={x:Phaser.Math.Clamp(n.startPosition.x+t,0,s),y:Phaser.Math.Clamp(n.startPosition.y+i,0,a)};n.hammerAnimation.setPosition(o.x,o.y),n.targetPosition={x:o.x,y:o.y}},n.updateHammer=function(){var e=n.scene.screwManager.getTopWoodAtPosition(n.targetPosition.x,n.targetPosition.y);if(e&&n.currentWoodHover!=e){var t;if(n.currentWoodHover)null==(t=n.currentWoodTween)||t.stop(),n.woodHighlightImage.kill();n.currentWoodHover=e;var i=n.scene.world.getPixelRatio();n.woodHighlightImage.setTexture("wood-textures","wood-texture"+e.config.id),n.woodHighlightImage.setPosition(e.x,e.y),n.woodHighlightImage.setOrigin(e.originX,e.originY),n.woodHighlightImage.setWorldSize(1*e.width/i,1*e.height/i),n.woodHighlightImage.setDepth(e.depth+.1),n.woodHighlightImage.setAngle(e.angle),n.woodHighlightImage.setAlpha(.75),n.woodHighlightImage.revive(),n.currentWoodTween=n.scene.tweens.add({targets:n.woodHighlightImage,alpha:{from:.4,to:0},duration:300,yoyo:!0,loop:-1})}else if(!e&&n.currentWoodHover){var r;null==(r=n.currentWoodTween)||r.stop(),n.woodHighlightImage.kill(),n.currentWoodHover=void 0}n.currentWoodHover&&(n.woodHighlightImage.setPosition(n.currentWoodHover.x,n.currentWoodHover.y),n.woodHighlightImage.setAngle(n.currentWoodHover.angle))},n.handlePointerUp=function(e){var t,i,r=e.worldX-n.pointerDownPosition.x,s=e.worldY-n.pointerDownPosition.y,a=n.scene.world.getWorldSize(),o=a.width,c=a.height;i=n.hasMove?{x:Phaser.Math.Clamp(n.startPosition.x+r,0,o),y:Phaser.Math.Clamp(n.startPosition.y+s,0,c)}:{x:e.worldX,y:e.worldY};var l=n.scene.screwManager.getTopWoodAtPosition(i.x,i.y);if(n.scene.input.off(Phaser.Input.Events.POINTER_MOVE,n.moveHammer),n.scene.input.off(Phaser.Input.Events.POINTER_UP,n.handlePointerUp),l){n.currentWoodHover=l,null==(t=n.currentWoodTween)||t.stop(),n.woodHighlightImage.kill(),n.scene.events.off("update",n.updateHammer,(0,Ka.Z)(n));n.hammerAnimation.onCompleted=n.handleHammerUse,n.hammerAnimation.runAnimation(i.x,i.y,(function(){n.handleUseItemDone()})),n.targetPosition={x:i.x,y:i.y}}else n.scene.input.once(Phaser.Input.Events.POINTER_DOWN,n.startMovePointerEvent)},n.createHammerAnimation(),n.setName(Lh[Dh.HAMMER]),n.itemType=Dh.HAMMER,n}(0,o.Z)(t,e);var n=t.prototype;return n.createHammerAnimation=function(){this.hammerAnimation=new Fd(this.scene),this.woodHighlightImage=this.scene.add.image(0,0,Yd,Vd.BLANK),this.woodHighlightImage.setDepth(za.Z.WOOD_OVERLAY+1),this.woodHighlightImage.setBlendMode(Phaser.BlendModes.ADD),this.woodHighlightImage.kill()},n.handleActiveItem=function(){e.prototype.handleActiveItem.call(this),this.scene.screwManager.startHammer(),this.scene.setDisabledButton(!0);var t=this.scene.world.getWorldSize().width,n=this.getWorldPosition();this.hammerAnimation.runFadeInAnimation(t/2,n.y-150),this.startPosition={x:t/2,y:n.y-150},this.targetPosition={x:this.startPosition.x,y:this.startPosition.y},this.scene.input.once(Phaser.Input.Events.POINTER_DOWN,this.startMovePointerEvent)},n.cancelUseItem=function(){var e,t;this.scene.input.off(Phaser.Input.Events.POINTER_DOWN,this.startMovePointerEvent),this.scene.input.off(Phaser.Input.Events.POINTER_MOVE,this.moveHammer),this.scene.input.off(Phaser.Input.Events.POINTER_UP,this.handlePointerUp),this.hammerAnimation.cancel(),null==(e=this.currentWoodTween)||e.stop(),this.woodHighlightImage.kill(),this.scene.events.off("update",this.updateHammer,this);var n=this.scene.player.getItems();this.scene.player.updateCustomFields({items:(0,r.Z)({},n,(t={},t[this.name]=this.limitCount+1,t))})},t}(Td),Kd=zd,jd=ja.Z.GAMEPLAY,Xd=jd.KEY,Qd=jd.FRAME.ICON_UNSCREW_PREFIX,qd=Qd.FILE,Jd=Qd.WIDTH,$d=Qd.HEIGHT,ep=function(){function e(e){this.scene=void 0,this.unscrew=void 0,this.scene=e,this.createUnscrew()}var t=e.prototype;return t.createUnscrew=function(){this.unscrew=this.scene.add.image(110,110,Xd,qd+"1").setOrigin(.1,.35),this.unscrew.setWorldSize(.5*Jd,.5*$d),this.unscrew.setDepth(za.Z.ON_TOP),this.scene.add.existing(this.unscrew),this.unscrew.kill()},t.runRemoveScrewAnimation=function(e){var t=this;this.scene.tweens.addCounter({from:0,to:1,duration:500,onUpdate:function(e){var n=Math.floor(9*e.progress)+1;t.unscrew.setTexture(Xd,qd+n),t.unscrew.setWorldSize(.5*Jd,.5*$d)},onComplete:function(){t.unscrew.kill(),t.unscrew.setTexture(Xd,qd+"1"),t.unscrew.setWorldSize(.5*Jd,.5*$d),e&&e(),t.scene.itemManager.hideHintPanel()},onStart:function(){t.unscrew.setWorldSize(.5*Jd,.5*$d),t.unscrew.revive()}})},t.setPosition=function(e,t){this.unscrew.setPosition(e,t)},t.cancel=function(){var e=this.scene.itemManager;this.unscrew.kill(),e.hideHintPanel(),this.scene.screwManager.stopRemoveScrew()},e}(),tp=ep,np=ja.Z.GAMEPLAY,ip=(np.KEY,np.FRAME),rp=function(e){function t(t){var n;return(n=e.call(this,t,{FILE:ip.ICON_UNSCREW.FILE,WIDTH:ip.ICON_UNSCREW.WIDTH,HEIGHT:ip.ICON_UNSCREW.HEIGHT})||this).unscrewAnimation=void 0,n.createUnscrewAnimation(),n.setName(Lh[Dh.REMOVE_SCREW]),n.itemType=Dh.REMOVE_SCREW,n}(0,o.Z)(t,e);var n=t.prototype;return n.createUnscrewAnimation=function(){this.unscrewAnimation=new tp(this.scene)},n.runAnimation=function(e,t,n){var i=this;this.unscrewAnimation.setPosition(e,t),this.unscrewAnimation.runRemoveScrewAnimation((function(){i.handleUseItemDone(),n&&n()}))},n.handleActiveItem=function(){e.prototype.handleActiveItem.call(this),this.scene.setDisabledButton(!0),this.scene.itemManager.showHintPanel({content:"Tap on the screw to remove it!",footerDepth:za.Z.SCREW-10,backgroundDepth:za.Z.CHOOSING_SCREW-1}),this.scene.screwManager.startRemoveScrew()},n.cancelUseItem=function(){var e;this.unscrewAnimation.cancel();var t=this.scene.player.getItems();this.scene.player.updateCustomFields({items:(0,r.Z)({},t,(e={},e[this.name]=this.limitCount+1,e))})},t}(Td),sp=rp,ap=ja.Z.GAMEPLAY.FRAME,op=function(e){function t(t){var n;(n=e.call(this,t)||this).undoItem=void 0,n.replayItem=void 0,n.hammerItem=void 0,n.removeScrewItem=void 0,n.items=[],n.scene=t;var i=n.scene.world.getWorldSize().width;if(n.setSize(i,ap.BUTTON_ITEM.HEIGHT),n.createUI(),n.alignUI(),n.setDepth(za.Z.BUTTON),GameCore.Utils.Valid.isDebugger()){var r=new dc(n.scene,{text:"All 10",callback:function(){var e;n.scene.player.updateCustomFields({items:(e={},e[Lh[Dh.HAMMER]]=10,e[Lh[Dh.REPLAY]]=10,e[Lh[Dh.UNDO]]=10,e[Lh[Dh.REMOVE_SCREW]]=10,e)})}}),s=new dc(n.scene,{text:"All 0",callback:function(){var e;n.scene.player.updateCustomFields({items:(e={},e[Lh[Dh.HAMMER]]=0,e[Lh[Dh.REPLAY]]=0,e[Lh[Dh.UNDO]]=0,e[Lh[Dh.REMOVE_SCREW]]=0,e)})}});n.add([r,s]),n.scene.world.isLandscape()?(Phaser.Display.Align.In.BottomCenter(r,(0,Ka.Z)(n),17),Phaser.Display.Align.In.BottomCenter(s,(0,Ka.Z)(n),-17)):(Phaser.Display.Align.In.LeftCenter(r,(0,Ka.Z)(n),0,17),Phaser.Display.Align.In.LeftCenter(s,(0,Ka.Z)(n),0,-17))}return t.add.existing((0,Ka.Z)(n)),n}(0,o.Z)(t,e);var n=t.prototype;return n.createUI=function(){var e;this.createUndoItem(),this.createReplayItem(),this.createHammerItem(),this.createRemoveScrewItem(),this.items=[this.replayItem,this.removeScrewItem,this.undoItem,this.hammerItem],this.add(x()(e=[]).call(e,this.items))},n.alignUI=function(){var e=this;this.items.forEach((function(t){Phaser.Display.Align.In.Center(t,e)})),this.alginItems()},n.alginItems=function(){this.scene.world.isLandscape()?this.alignItemsVertical():this.alignItemsHorizontal()},n.alignItemsHorizontal=function(){var e,t=this.scene.world.getWorldSize().width;this.setSize(t,ap.BUTTON_ITEM.HEIGHT);for(var n=this.undoItem.width+10,i=_e()(e=this.items).call(e,(function(e){return e.active})),r=i.length/2,s=i.length%2===0,a=0;a<i.length;a++){var o=void 0;o=s?n*(a-r+.5):a<r?-n*Math.ceil(r-a-1):n*(a-Math.floor(r)),i[a].x=o}},n.alignItemsVertical=function(){var e;this.setSize(ap.BUTTON_ITEM.WIDTH,this.scene.board.height);for(var t=this.undoItem.height+10,n=_e()(e=this.items).call(e,(function(e){return e.active})),i=n.length/2,r=n.length%2===0,s=0;s<n.length;s++){var a=void 0;a=r?t*(s-i+.5):s<i?-t*Math.ceil(i-s-1):t*(s-Math.floor(i)),n[s].y=a}},n.createUndoItem=function(){this.undoItem=new xd(this.scene)},n.createReplayItem=function(){this.replayItem=new kd(this.scene)},n.createHammerItem=function(){this.hammerItem=new Kd(this.scene)},n.createRemoveScrewItem=function(){this.removeScrewItem=new sp(this.scene)},t}(Phaser.GameObjects.Container),cp=op,lp=ja.Z.GAMEPLAY,up=lp.KEY,hp=lp.FRAME,dp=function(e){function t(t){var n;return(n=e.call(this,t)||this).step=void 0,n.maxStep=void 0,n.background=void 0,n.circles=void 0,n.step=1,n.maxStep=2,n.createUI(),n.setSize(hp.BACKGROUND_DIFFICULTY_LEVEL_BASE.WIDTH,hp.BACKGROUND_DIFFICULTY_LEVEL_BASE.HEIGHT),n.alignUI(),n}(0,o.Z)(t,e);var n=t.prototype;return n.createUI=function(){this.createBackground(),this.createCircles()},n.alignUI=function(){Phaser.Display.Align.In.LeftCenter(this.circles[0],this.background,0,0),Phaser.Display.Align.In.RightCenter(this.circles[1],this.background,0,0)},n.setStep=function(e){if(!(e>this.maxStep)){this.step=e;for(var t=0;t<this.maxStep;t++)this.circles[t].setVisible(!1);this.circles[e-1].setVisible(!0)}},n.createBackground=function(){var e=hp.BACKGROUND_DIFFICULTY_LEVEL_BASE,t=e.FILE,n=e.WIDTH,i=e.HEIGHT;this.background=this.scene.make.image({key:up,frame:t}),this.background.setWorldSize(n,i),this.add(this.background)},n.createCircles=function(){var e=hp.ICON_ORANGE_CIRCLE,t=e.FILE,n=e.WIDTH,i=e.HEIGHT;this.circles=[];for(var r=0;r<this.maxStep;r++){var s=this.scene.make.image({key:up,frame:t});s.setWorldSize(n,i),this.add(s),this.circles.push(s)}},t}(Phaser.GameObjects.Container),pp=dp,fp=ja.Z.GAMEPLAY,vp=fp.KEY,mp=fp.FRAME,gp=ja.Z.DEFAULT,yp=(gp.KEY,gp.FRAME),Ep=function(e){function t(t){var n;(n=e.call(this,t)||this).scene=void 0,n.pauseButton=void 0,n.silverScrewBar=void 0,n.goldScrewBar=void 0,n.levelBackground=void 0,n.text=void 0,n.stepCounter=void 0,n.timerText=void 0,n.line=void 0,n.scene=t;var i=n.scene.world.getWorldSize().width;return n.setSize(i,100),n.createUI(),n.alignUI(),n.updateText(1,1),t.add.existing((0,Ka.Z)(n)),n}(0,o.Z)(t,e);var n=t.prototype;return n.createUI=function(){this.createButtons(),this.createLevelBackground(),this.createText(),this.createScrewBars(),this.createStepCounter(),this.createTimerText(),this.createLine()},n.alignUI=function(){Phaser.Display.Align.In.LeftCenter(this.pauseButton,this,-10,0);var e=this.goldScrewBar.height/2+5;Phaser.Display.Align.In.RightCenter(this.silverScrewBar,this,-7,-e-3),Phaser.Display.Align.In.RightCenter(this.goldScrewBar,this,-7,e-3),Phaser.Display.Align.In.Center(this.levelBackground,this,-23,11/6),Phaser.Display.Align.In.TopCenter(this.text,this.levelBackground,0,0);var t=41/6,n=(this.levelBackground.width-2*t-this.timerText.width-this.stepCounter.width-this.line.width)/4;Phaser.Display.Align.In.LeftCenter(this.stepCounter,this.levelBackground,-n-t,5),Phaser.Display.Align.In.RightCenter(this.timerText,this.levelBackground,-n-t,5),Phaser.Display.Align.To.LeftCenter(this.line,this.timerText,n,0)},n.createText=function(){this.text=new ho.Z(this.scene,{text:"Level 1",fontSize:this.scene.fontSize(15),strokeColor:9525806,strokeThickness:2.4,strokeOffset:{y:.5}}),this.add(this.text)},n.createButtons=function(){this.pauseButton=new an.Z(this.scene,vp,mp.BUTTON_PAUSE.FILE,mp.BUTTON_PAUSE.WIDTH,mp.BUTTON_PAUSE.HEIGHT),this.add(this.pauseButton)},n.createScrewBars=function(){this.silverScrewBar=new Io(this.scene),this.silverScrewBar.setIconFrame({FILE:yp.ICON_SCREW_SILVER.FILE,WIDTH:.62*yp.ICON_SCREW_SILVER.WIDTH,HEIGHT:.62*yp.ICON_SCREW_SILVER.HEIGHT}),this.goldScrewBar=new Io(this.scene),this.add([this.silverScrewBar,this.goldScrewBar])},n.createStepCounter=function(){this.stepCounter=new pp(this.scene),this.add(this.stepCounter)},n.createTimerText=function(){this.timerText=new ic(this.scene,{useBackground:!1,useMSFormat:!0,textConfig:{text:"00:00",fontSize:this.scene.fontSize(15)}}),this.timerText.getText().setTint(9849600),this.timerText.setIconSize(70/3,76/3),this.add([this.timerText])},n.createLine=function(){var e=mp.BACKGROUND_LINE,t=e.FILE,n=e.WIDTH,i=e.HEIGHT;this.line=this.scene.make.image({key:vp,frame:t}),this.line.setWorldSize(n,i),this.add(this.line)},n.createLevelBackground=function(){var e=mp.BACKGROUND_HEADER,t=e.FILE,n=e.WIDTH,i=e.HEIGHT;this.levelBackground=this.scene.make.image({key:vp,frame:t}),this.levelBackground.setWorldSize(n,i),this.add(this.levelBackground)},n.updateText=function(e,t){this.text.setFontSize(this.scene.fontSize(15)),this.text.setText("Level "+e),this.stepCounter.setStep(t),Phaser.Display.Align.In.TopCenter(this.text,this.levelBackground,0,0)},n.update=function(){var e=this.scene.timeManager.getTime();e<0&&(e=0),e<=15e3?this.runWarningAnimation():this.stopWarningAnimation(),this.timerText.updateClock(e)},n.runWarningAnimation=function(){this.timerText.runTimerWarningAnimation()},n.stopWarningAnimation=function(){this.timerText.stopTimerWarningAnimation()},t}(Phaser.GameObjects.Container),Sp=Ep,wp=ja.Z.GAMEPLAY,Ip=wp.KEY,Ap=wp.FRAME,Tp=ja.Z.DEFAULT,Cp=(Tp.KEY,Tp.FRAME),bp=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n.pauseButton=void 0,n.silverScrewBar=void 0,n.goldScrewBar=void 0,n.levelBackground=void 0,n.backgroundInside=void 0,n.levelPanel=void 0,n.text=void 0,n.stepCounter=void 0,n.timerText=void 0,n.line=void 0,n.scene=t,n.setSize(150,t.board.height),n.createUI(),n.alignUI(),n.updateText(1,1),t.add.existing((0,Ka.Z)(n)),n}(0,o.Z)(t,e);var n=t.prototype;return n.createUI=function(){this.createLevelBackground(),this.createLevelPanel(),this.createButtons(),this.createText(),this.createScrewBars(),this.createStepCounter(),this.createTimerText(),this.createLine()},n.alignUI=function(){Phaser.Display.Align.In.Center(this.levelBackground,this,0,0),Phaser.Display.Align.In.TopCenter(this.levelPanel,this.levelBackground,-3,-20),Phaser.Display.Align.In.TopCenter(this.text,this.levelPanel,0,0),Phaser.Display.Align.To.BottomCenter(this.backgroundInside,this.levelPanel,3,-10),Phaser.Display.Align.In.TopCenter(this.stepCounter,this.backgroundInside,0,-20),Phaser.Display.Align.To.BottomCenter(this.line,this.stepCounter,0,10),Phaser.Display.Align.To.BottomCenter(this.timerText,this.line,0,22),Phaser.Display.Align.To.BottomCenter(this.goldScrewBar,this.backgroundInside,0,12),Phaser.Display.Align.To.BottomCenter(this.silverScrewBar,this.goldScrewBar,0,12),Phaser.Display.Align.In.BottomCenter(this.pauseButton,this.levelBackground,0,-15)},n.createLevelBackground=function(){this.levelBackground=this.scene.make.image({key:gr.Z.LANDSCAPE.HEADER.KEY}),this.levelBackground.setWorldSize(103,335),this.backgroundInside=this.scene.make.image({key:gr.Z.LANDSCAPE.HEADER_INSIDE.KEY}),this.backgroundInside.setWorldSize(70,143),this.add([this.levelBackground,this.backgroundInside])},n.createLevelPanel=function(){this.levelPanel=this.scene.make.image({key:gr.Z.LANDSCAPE.LEVEL_PANEL.KEY}),this.levelPanel.setWorldSize(136.5,39.5),this.add(this.levelPanel)},n.createText=function(){this.text=new ho.Z(this.scene,{text:"Level 1",fontSize:this.scene.fontSize(15),strokeColor:9525806,strokeThickness:2.4,strokeOffset:{y:.5}}),this.add(this.text)},n.createButtons=function(){this.pauseButton=new an.Z(this.scene,Ip,Ap.BUTTON_PAUSE.FILE,Ap.BUTTON_PAUSE.WIDTH,Ap.BUTTON_PAUSE.HEIGHT),this.add(this.pauseButton)},n.createScrewBars=function(){this.silverScrewBar=new Io(this.scene),this.silverScrewBar.setIconFrame({FILE:Cp.ICON_SCREW_SILVER.FILE,WIDTH:.62*Cp.ICON_SCREW_SILVER.WIDTH,HEIGHT:.62*Cp.ICON_SCREW_SILVER.HEIGHT}),this.goldScrewBar=new Io(this.scene),this.silverScrewBar.setScale(.9),this.goldScrewBar.setScale(.9),this.add([this.silverScrewBar,this.goldScrewBar])},n.createStepCounter=function(){this.stepCounter=new pp(this.scene),this.add(this.stepCounter)},n.createTimerText=function(){this.timerText=new ic(this.scene,{useBackground:!1,useMSFormat:!0,textConfig:{text:"00:00",fontSize:this.scene.fontSize(18)}});var e=Ap.ICON_TIME,t=(e.FILE,e.WIDTH),n=e.HEIGHT;this.timerText.getText().setTint(9849600),this.timerText.setIconSize(1.2*t,1.2*n),Phaser.Display.Align.In.Center(this.timerText.getText(),this.timerText,1,17);var i=this.timerText.getTimer();i&&Phaser.Display.Align.In.Center(i,this.timerText,0,-17),this.add([this.timerText])},n.createLine=function(){var e=Ap.BACKGROUND_LINE,t=e.FILE,n=e.WIDTH,i=e.HEIGHT;this.line=this.scene.make.image({key:Ip,frame:t}).setAngle(90),this.line.setWorldSize(n,i),this.add(this.line)},n.updateText=function(e,t){this.text.setText("Level "+e),this.stepCounter.setStep(t),this.scene.world.isLandscape()?Phaser.Display.Align.In.Center(this.text,this.levelPanel,0,-2):Phaser.Display.Align.In.TopCenter(this.text,this.levelBackground,0,0)},n.update=function(){var e=this.scene.timeManager.getTime();e<0&&(e=0),e<=15e3?this.runWarningAnimation():this.stopWarningAnimation(),this.timerText.updateClock(e)},n.runWarningAnimation=function(){this.timerText.runTimerWarningAnimation()},n.stopWarningAnimation=function(){this.timerText.stopTimerWarningAnimation()},t}(Phaser.GameObjects.Container),Pp=bp,xp=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n.pauseButton=void 0,n.silverScrewBar=void 0,n.goldScrewBar=void 0,n.sparkExplosive1=void 0,n.sparkExplosive2=void 0,n.header=void 0,n.timerText=void 0,n.scene=t,n.scene.world.isLandscape()?n.header=new Pp(t):n.header=new Sp(t),n.timerText=n.header.timerText,n.add(n.header),n.setSize(n.header.width,n.header.height),n.pauseButton=n.header.pauseButton,n.silverScrewBar=n.header.silverScrewBar,n.goldScrewBar=n.header.goldScrewBar,n.createSparkExplosive(),t.add.existing((0,Ka.Z)(n)),n}(0,o.Z)(t,e);var n=t.prototype;return n.createSparkExplosive=function(){this.sparkExplosive1=new Ec.Z(this.scene),this.sparkExplosive2=new Ec.Z(this.scene),this.sparkExplosive1.setDepth(za.Z.EFFECT),this.sparkExplosive2.setDepth(za.Z.EFFECT)},n.runScrewBarAnimation=function(e){var t="GoldScrew"===e?this.goldScrewBar.getIcon():this.silverScrewBar.getIcon(),n="GoldScrew"===e?this.sparkExplosive1:this.sparkExplosive2,i=t.scale;this.scene.tweens.add({targets:t,scaleX:1.25*i,scaleY:1.25*i,duration:100,yoyo:!0});var r=t.getWorldPosition(),s=r.x,a=r.y;n.explode(30,s,a,30)},n.updateText=function(e,t){this.header.updateText(e,t)},n.update=function(){this.header.update()},n.runWarningAnimation=function(){this.header.runWarningAnimation()},n.stopWarningAnimation=function(){this.header.stopWarningAnimation()},t}(Phaser.GameObjects.Container),Rp=xp,Op=ja.Z.GAMEPLAY,_p=Op.KEY,kp=Op.FRAME,Dp=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n.showAdNotify=void 0,n.header=void 0,n.footer=void 0,n.gameOverTool=void 0,n.nextLevelTool=void 0,n.scene=t,n.createObjects(),n}(0,o.Z)(t,e);var n=t.prototype;return n.createObjects=function(){this.createHeader(),this.createFooter(),this.createShowAdNotify()},n.createHeader=function(){this.header=new Rp(this.scene),this.group.add(this.header)},n.createFooter=function(){this.footer=new cp(this.scene),this.group.add(this.footer)},n.createOpponentInfo=function(){},n.createShowAdNotify=function(){this.showAdNotify=new hd(this.scene),this.group.add(this.showAdNotify)},n.createGameOverBoard=function(){},n.createStartLevelBoard=function(){},n.createGiftItem=function(){},n.createPaintItem=function(){},n.createHammerItem=function(){},n.createShuffleItem=function(){},n.createDevTools=function(){GameCore.Utils.Valid.isDebugger()&&(this.createChangeColorItem(),this.createGameOverButton(),this.createNextLevelButton())},n.createChangeColorItem=function(){},n.createGameOverButton=function(){this.gameOverTool=new an.Z(this.scene,_p,kp.BLANK),this.group.add(this.gameOverTool),this.gameOverTool.setAlpha(.02),this.gameOverTool.setName("GameOver"),this.gameOverTool.button.setTint(6291256)},n.createNextLevelButton=function(){this.nextLevelTool=new an.Z(this.scene,_p,kp.BUTTON_PLUS.FILE),this.group.add(this.nextLevelTool),this.nextLevelTool.setAlpha(.02),this.nextLevelTool.setName("NextLevel"),this.nextLevelTool.button.setTint(6291256)},t}(uo),Lp=Dp,Bp=ja.Z.GAMEPLAY,Np=Bp.KEY,Hp=Bp.FRAME,Mp=function(e){function t(t,n){var i;return(i=e.call(this,t,n,{popupWidth:878/3,popupHeight:245})||this).scene=void 0,i.text=void 0,i.buttonYes=void 0,i.buttonNo=void 0,i.isButtonReleased=!1,i.open=function(){e.prototype.open.call((0,Ka.Z)(i)),i.isButtonReleased=!1,i.scene.audio.playSound(Xa.Z.POPUP_SHOW),i.runOpenAnimation()},i.handleGotoDashboard=function(){i.isButtonReleased||(i.isButtonReleased=!0,i.scene.player.getLevel()>GameCore.Configs.Ads.MinLevelToShow&&i.scene.handleShowInterstitialAd(),i.scene.registry.set(Bh,!1),i.scene.registry.set(Nh,!1),i.runCloseAnimation().then((function(){i.isButtonReleased=!1,i.scene.game.globalScene.events.emit(Or.K.SWITCH,Or.C.DASHBOARD_SCENE)})))},i.handleClosePopup=function(){i.scene.audio.playSound(Xa.Z.POPUP_OFF,{volume:.6}),i.runCloseAnimation().then((function(){i.scene.stateManager.play()}))},i.scene=t,i.createUI(),i.alignUI(),i.createInput(),i}(0,o.Z)(t,e);var n=t.prototype;return n.createUI=function(){e.prototype.createUI.call(this),this.titleText.setText("QUIT LEVEL?"),this.createText(),this.createButtonYes(),this.createButtonNo()},n.alignUI=function(){e.prototype.alignUI.call(this),this.popup.setPosition(0,0),Phaser.Display.Align.In.Center(this.text,this.popup,0,-20),Phaser.Display.Align.In.LeftCenter(this.buttonYes,this.popup,-12,55),Phaser.Display.Align.In.RightCenter(this.buttonNo,this.popup,-12,55),Phaser.Display.Align.In.Center(this.popup,this.zone)},n.createInput=function(){this.closeButton.useSound=!1,this.closeButton.onClick=this.handleClosePopup,this.buttonYes.onClick=this.handleGotoDashboard,this.buttonNo.onClick=this.handleClosePopup},n.createText=function(){this.text=new ho.Z(this.scene,{text:"Are you sure you want to\nquit the level?",fontSize:this.scene.fontSize(17)}).setCenterAlign().setTint(10180132),this.popup.add(this.text)},n.createButtonYes=function(){var e=Hp.BUTTON_RED,t=e.FILE,n=e.WIDTH,i=e.HEIGHT;this.buttonYes=new an.Z(this.scene,Np,t,n,i);var r=new ho.Z(this.scene,{text:"YES",fontSize:this.scene.fontSize(20),strokeColor:10300193,strokeThickness:2.4,strokeOffset:{y:.5}}).setCenterAlign();this.buttonYes.add(r),this.popup.add(this.buttonYes)},n.createButtonNo=function(){var e=Hp.BUTTON_GREEN,t=e.FILE,n=e.WIDTH,i=e.HEIGHT;this.buttonNo=new an.Z(this.scene,Np,t,n,i);var r=new ho.Z(this.scene,{text:"NO",fontSize:this.scene.fontSize(20),strokeColor:2131477,strokeThickness:2.4,strokeOffset:{y:.5}}).setCenterAlign();this.buttonNo.add(r),this.popup.add(this.buttonNo)},t}(nl),Gp=Mp,Wp=ja.Z.GAMEPLAY,Up=Wp.KEY,Fp=Wp.FRAME,Zp=ja.Z.DEFAULT,Yp=Zp.KEY,Vp=Zp.FRAME,zp=GameCore.Configs,Kp=zp.Items,jp=zp.Network,Xp={itemType:Dh.NONE,countUseInMatch:0,isWatchAds:!1},Qp=function(e){function t(t,n){var i;return(i=e.call(this,t,n,{popupWidth:878/3,popupHeight:800/3})||this).scene=void 0,i.icon=void 0,i.text=void 0,i.buttonBuy=void 0,i.buttonClaim=void 0,i.iconScrew=void 0,i.textPrice=void 0,i.price=void 0,i.payload=void 0,i.open=function(t){e.prototype.open.call((0,Ka.Z)(i)),i.scene.audio.playSound(Xa.Z.POPUP_SHOW),i.price={GoldScrew:1},i.payload=(0,r.Z)({},Xp,t),i.updatePayload(),i.updateIconFrameAndContent(),i.runOpenAnimation()},i.handleOnBuy=(0,a.Z)(h().mark((function e(){var t,n,r,s,a,o,c,l,u;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i.payload.itemType&&i.payload.itemType!==Dh.NONE){e.next=3;break}return e.abrupt("return");case 3:t=function(){i.scene.stateManager.play()},e.t0=i.payload.itemType,e.next=e.t0===Dh.UNDO?7:e.t0===Dh.REMOVE_SCREW?10:e.t0===Dh.REPLAY?13:e.t0===Dh.HAMMER?16:e.t0===Dh.ADS_HOLE?19:21;break;case 7:return n=i.scene.layoutManager.objects.footer.undoItem,t=function(){i.scene.stateManager.play(),n.handleActiveItem()},e.abrupt("break",22);case 10:return n=i.scene.layoutManager.objects.footer.removeScrewItem,t=function(){i.scene.stateManager.play(),n.handleActiveItem()},e.abrupt("break",22);case 13:return n=i.scene.layoutManager.objects.footer.replayItem,t=function(){i.scene.stateManager.play(),n.handleActiveItem()},e.abrupt("break",22);case 16:return n=i.scene.layoutManager.objects.footer.hammerItem,t=function(){i.scene.stateManager.play(),n.handleActiveItem()},e.abrupt("break",22);case 19:return t=function(){var e;null==(e=i.payload.adsHole)||e.removeAdsHole(),i.scene.stateManager.play()},e.abrupt("break",22);case 21:return e.abrupt("break",22);case 22:if(r=i.price,s=r.GoldScrew,a=void 0===s?0:s,o=r.SilverScrew,c=void 0===o?0:o,!(a>0)){e.next=32;break}if(!((l=i.scene.player.getGoldScrew())<a)){e.next=28;break}return i.showNotifyNotEnoughScrew("Not enough\nGold Screw!"),e.abrupt("return");case 28:return e.next=30,i.scene.player.updateCustomFields({goldScrew:l-a});case 30:e.next=38;break;case 32:if(!((u=i.scene.player.getSilverScrew())<c)){e.next=36;break}return i.showNotifyNotEnoughScrew("Not enough\nSilver Screw!"),e.abrupt("return");case 36:return e.next=38,i.scene.player.updateCustomFields({silverScrew:u-c});case 38:i.runCloseAnimation().then((function(){t(),i.logBuyItem(i.getNameByItemType(i.payload.itemType),!1),i.payload.itemType===Dh.ADS_HOLE&&i.scene.screwManager.setCanClickHole(!0),i.payload.callback&&i.payload.callback()}));case 39:case"end":return e.stop()}}),e)}))),i.showNotifyNotEnoughScrew=function(e){i.scene.game.globalScene.screen.open(Vr.o4.NOTIFY_SCREEN,{message:e,duration:1e3,loading:!1}),i.payload.itemType!==Dh.ADS_HOLE&&(i.scene.screen.close(i.name),i.scene.time.delayedCall(1e3,(function(){i.scene.stateManager.play()})))},i.handleShowRewardedVideoAd=(0,a.Z)(h().mark((function e(){var t,n,r,s,a,o;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i.payload.itemType&&i.payload.itemType!==Dh.NONE){e.next=3;break}return e.abrupt("return");case 3:t=function(){i.scene.stateManager.play()},e.t0=i.payload.itemType,e.next=e.t0===Dh.UNDO?7:e.t0===Dh.REMOVE_SCREW?10:e.t0===Dh.REPLAY?13:e.t0===Dh.HAMMER?16:e.t0===Dh.ADS_HOLE?19:21;break;case 7:return n=i.scene.layoutManager.objects.footer.undoItem,t=function(){i.scene.stateManager.play(),n.handleActiveItem()},e.abrupt("break",22);case 10:return n=i.scene.layoutManager.objects.footer.removeScrewItem,t=function(){i.scene.stateManager.play(),n.handleActiveItem()},e.abrupt("break",22);case 13:return n=i.scene.layoutManager.objects.footer.replayItem,t=function(){i.scene.stateManager.play(),n.handleActiveItem()},e.abrupt("break",22);case 16:return n=i.scene.layoutManager.objects.footer.hammerItem,t=function(){i.scene.stateManager.play(),n.handleActiveItem()},e.abrupt("break",22);case 19:return t=function(){var e;null==(e=i.payload.adsHole)||e.removeAdsHole(),i.scene.stateManager.play()},e.abrupt("break",22);case 21:return e.abrupt("break",22);case 22:return r=i.scene.game,s=r.globalScene,a=r.audio,e.prev=23,s.screen.open(Vr.o4.NOTIFY_SCREEN,{message:"Loading ads...",duration:0,loading:!0}),a.pauseMusic(),a.muteAll(),e.next=29,new(l())((function(e,t){var n;null==(n=i.scene.adsTimer)||n.remove(),i.scene.adsTimer=i.scene.time.delayedCall(jp.Timeout,t),i.scene.ads.getAdStatus(GameCore.Ads.Types.REWARDED)===GameCore.Ads.Status.LOADING?i.scene.ads.events.once(GameCore.Ads.Events.LOADED,e):i.scene.ads.preloadRewardedVideoAsync().then(e).catch(t)}));case 29:return e.next=31,i.scene.ads.showRewardedVideoAsync();case 31:s.screen.events.off(GameCore.Screens.Events.CLOSE),s.screen.close(Vr.o4.NOTIFY_SCREEN),i.runCloseAnimation().then((function(){t(),i.logBuyItem(i.getNameByItemType(i.payload.itemType),!0),i.payload.itemType===Dh.ADS_HOLE&&i.scene.screwManager.setCanClickHole(!0),i.payload.callback&&i.payload.callback()})),e.next=43;break;case 36:if(e.prev=36,e.t1=e.catch(23),!(e.t1 instanceof Object&&GameCore.Utils.Object.hasOwn(e.t1,"code"))){e.next=42;break}if("USER_INPUT"!==e.t1.code){e.next=42;break}return i.scene.showNotifySkipAds(),e.abrupt("return");case 42:i.scene.showNotifyNoAds();case 43:return e.prev=43,i.scene.ads.preloadRewardedVideoAsync().catch((function(e){})),null==(o=i.scene.adsTimer)||o.destroy(),a.unmuteAll(),a.playMusic(),e.finish(43);case 49:case"end":return e.stop()}}),e,null,[[23,36,43,49]])}))),i.getNameByItemType=function(e){return Lh[e]},i.handleClosePopup=function(){i.scene.audio.playSound(Xa.Z.POPUP_OFF,{volume:.6}),i.runCloseAnimation().then((function(){i.scene.stateManager.play(),i.payload.itemType===Dh.ADS_HOLE&&i.scene.screwManager.setCanClickHole(!0)}))},i.scene=t,i.createUI(),i.alignUI(),i.createInput(),i}(0,o.Z)(t,e);var n=t.prototype;return n.updatePayload=function(){var e={GoldScrew:1},t=0;switch(this.payload.itemType){case Dh.UNDO:this.titleText.setText("UNDO"),t=this.payload.countUseInMatch<Kp.Undo.PriceRescue.length?this.payload.countUseInMatch:Kp.Undo.PriceRescue.length-1,e=Kp.Undo.PriceRescue[t];break;case Dh.REMOVE_SCREW:this.titleText.setText("REMOVE SCREW"),t=this.payload.countUseInMatch<Kp.RemoveScrew.PriceRescue.length?this.payload.countUseInMatch:Kp.RemoveScrew.PriceRescue.length-1,e=Kp.RemoveScrew.PriceRescue[t];break;case Dh.REPLAY:this.titleText.setText("REPLAY"),t=this.payload.countUseInMatch<Kp.Replay.PriceRescue.length?this.payload.countUseInMatch:Kp.Replay.PriceRescue.length-1,e=Kp.Replay.PriceRescue[t];break;case Dh.HAMMER:this.titleText.setText("HAMMER"),t=this.payload.countUseInMatch<Kp.Hammer.PriceRescue.length?this.payload.countUseInMatch:Kp.Hammer.PriceRescue.length-1,e=Kp.Hammer.PriceRescue[t];break;case Dh.ADS_HOLE:this.titleText.setText("UNLOCK HOLE"),t=this.payload.countUseInMatch<Kp.AdsHole.PriceRescue.length?this.payload.countUseInMatch:Kp.AdsHole.PriceRescue.length-1,e=Kp.AdsHole.PriceRescue[t]}this.price=e;var n=this.price,i=n.GoldScrew,r=void 0===i?0:i,s=n.SilverScrew,a=void 0===s?0:s;this.updateScrew(Yp,r>0?Vp.ICON_SCREW_GOLD.FILE:Vp.ICON_SCREW_SILVER.FILE),this.textPrice.setText("x"+(r||a)),this.payload.isWatchAds?(this.buttonClaim.revive(),this.popup.setPosition(0,0),Phaser.Display.Align.In.BottomLeft(this.buttonBuy,this.popup,-12,-25),Phaser.Display.Align.In.BottomRight(this.buttonClaim,this.popup,-12,-25),Phaser.Display.Align.In.Center(this.popup,this.zone)):(this.buttonClaim.kill(),this.popup.setPosition(0,0),Phaser.Display.Align.In.BottomCenter(this.buttonBuy,this.popup,0,-25),Phaser.Display.Align.In.Center(this.popup,this.zone))},n.createUI=function(){e.prototype.createUI.call(this),this.titleText.setText("YOUR TITLE"),this.createText(),this.createIcon(),this.createButtonBuy(),this.createButtonClaim()},n.alignUI=function(){e.prototype.alignUI.call(this),this.popup.setPosition(0,0),Phaser.Display.Align.In.TopCenter(this.icon,this.popup,0,-60),Phaser.Display.Align.To.BottomCenter(this.text,this.icon,0,7.5),Phaser.Display.Align.In.BottomCenter(this.buttonBuy,this.popup,0,-25),Phaser.Display.Align.In.Center(this.popup,this.zone)},n.createInput=function(){this.closeButton.useSound=!1,this.closeButton.onClick=this.handleClosePopup,this.buttonBuy.onClick=this.handleOnBuy,this.buttonClaim.onClick=this.handleShowRewardedVideoAd},n.createText=function(){this.text=new ho.Z(this.scene,{text:"This is a base popup screen",fontSize:this.scene.fontSize(15)}).setCenterAlign().setTint(10180132),this.popup.add(this.text)},n.createIcon=function(){var e=Fp.ICON_HAMMER_BIG,t=e.FILE,n=e.WIDTH,i=e.HEIGHT;this.icon=this.scene.make.image({key:Up,frame:t}),this.icon.setWorldSize(n,i),this.popup.add(this.icon)},n.createButtonBuy=function(){var e=Fp.BUTTON_GREEN,t=e.FILE,n=e.WIDTH,i=e.HEIGHT;this.buttonBuy=new an.Z(this.scene,Up,t,n,i),this.iconScrew=this.scene.make.image({key:Yp,frame:Vp.ICON_SCREW_GOLD.FILE}),this.iconScrew.setWorldSize(.62*Vp.ICON_SCREW_GOLD.WIDTH,.62*Vp.ICON_SCREW_GOLD.HEIGHT),this.textPrice=new ho.Z(this.scene,{text:"x1",fontSize:this.scene.fontSize(25),strokeColor:23819,strokeThickness:1,strokeOffset:{y:.5}}).setCenterAlign(),this.buttonBuy.add([this.iconScrew,this.textPrice]),Phaser.Display.Align.In.Center(this.iconScrew,this.buttonBuy,-20),Phaser.Display.Align.In.Center(this.textPrice,this.buttonBuy,17),this.popup.add(this.buttonBuy)},n.createButtonClaim=function(){var e=ja.Z.DEFAULT,t=e.KEY,n=e.FRAME,i=n.BUTTON_BLUE_MEDIUM,r=i.FILE,s=i.WIDTH,a=i.HEIGHT;this.buttonClaim=new an.Z(this.scene,t,r,s,a),this.buttonClaim.setName("Claim");var o=new ho.Z(this.scene,{text:"Claim",fontSize:this.scene.fontSize(23),strokeColor:2711440,strokeThickness:2.4,strokeOffset:{y:.5}}).setCenterAlign().setTint(16777215),c=this.scene.make.image({key:t,frame:n.ICON_GOLD_VIDEO.FILE});c.setWorldSize(n.ICON_GOLD_VIDEO.WIDTH,n.ICON_GOLD_VIDEO.HEIGHT),Phaser.Display.Align.In.LeftCenter(c,this.buttonClaim,-17),Phaser.Display.Align.In.RightCenter(o,this.buttonClaim,-14),this.buttonClaim.add([o,c]),this.popup.add(this.buttonClaim)},n.updateScrew=function(e,t){this.iconScrew.setTexture(e,t),this.iconScrew.setWorldSize(.62*Vp.ICON_SCREW_GOLD.WIDTH,.62*Vp.ICON_SCREW_GOLD.HEIGHT)},n.updateIconFrameAndContent=function(){!this.payload.itemType||(this.payload.itemType,Dh.NONE);var e=Fp.ICON_HAMMER_BIG;switch(this.payload.itemType){case Dh.UNDO:e=Fp.ICON_UNDO_BIG,this.text.setText("Undo the last action!");break;case Dh.REMOVE_SCREW:e=Fp.ICON_UNSCREW_BIG,this.text.setText("Remove a screw!");break;case Dh.REPLAY:e=Fp.ICON_REPLAY_BIG,this.text.setText("Replay the hard level!");break;case Dh.HAMMER:e=Fp.ICON_HAMMER_BIG,this.text.setText("Hammer out a random plank!");break;case Dh.ADS_HOLE:e=Fp.ICON_LOCK,this.text.setText("Unlock an additional hole!")}var t=e,n=t.FILE,i=t.WIDTH,r=t.HEIGHT;this.icon.setFrame(n),this.icon.setWorldSize(i,r)},n.logBuyItem=function(e,t){this.scene.analytics.event(Z._.BUY_GAME_ITEM,{item_name:e,level:this.scene.level.getLevelWithStep(),is_free:t}),t||this.logSpendVirtualCurrency(e)},n.logSpendVirtualCurrency=function(e){var t=this.price,n=t.GoldScrew,i=void 0===n?0:n,r=t.SilverScrew,s=i>0?"GoldScrew":"SilverScrew",a=i>0?i:void 0===r?0:r;this.scene.analytics.event(Z._.SPEND_VIRTUAL_CURRENCY,{value:a,item_name:e,virtual_currency_name:s,level:this.scene.level.getLevelWithStep()})},t}(nl),qp=Qp,Jp=ja.Z.GAMEPLAY,$p=Jp.KEY,ef=Jp.FRAME,tf=function(e){function t(t,n){var i;return(i=e.call(this,t,n,{popupWidth:878/3,popupHeight:1100/3})||this).scene=void 0,i.text=void 0,i.board=void 0,i.open=function(){e.prototype.open.call((0,Ka.Z)(i)),i.scene.audio.playSound(Xa.Z.POPUP_SHOW),i.runOpenAnimation()},i.woods=[],i.holes=[],i.circle=void 0,i.hand=void 0,i.scene=t,i.createUI(),i.alignUI(),i.createAnimation(),i.createInput(),i}(0,o.Z)(t,e);var n=t.prototype;return n.createUI=function(){e.prototype.createUI.call(this),this.titleText.setText("GUIDE"),this.createBoard(),this.createGuideObjects(),this.createText()},n.alignUI=function(){e.prototype.alignUI.call(this),this.popup.setPosition(0,0),Phaser.Display.Align.In.BottomCenter(this.board,this.popup,0,-22.5),Phaser.Display.Align.In.BottomCenter(this.text,this.board,0,-17),Phaser.Display.Align.In.Center(this.popup,this.zone)},n.createInput=function(){e.prototype.createInput.call(this)},n.createText=function(){this.text=new ho.Z(this.scene,{text:"Touch to break a blank",fontSize:this.scene.fontSize(15),strokeColor:0,strokeThickness:1.5,strokeAlpha:.6,strokeOffset:{y:.5}}).setCenterAlign(),this.popup.add(this.text)},n.createBoard=function(){this.board=this.scene.add.image(0,0,$p,ef.BOARD.FILE),this.board.setWorldSize(242.2,1237/3*.7),this.popup.add(this.board)},n.createGuideObjects=function(){this.woods=[],this.holes=[],this.woods.push(this.createWood({layer:4,spriteName:"bar",angle:90}).setPosition(0,40)),this.holes.push(this.createHole({isAds:!0}).setPosition(-80,-90)),this.holes.push(this.createHole({}).setPosition(-50,-90)),this.holes.push(this.createHole().setPosition(-20,-90)),this.holes.push(this.createHole().setPosition(10,-90)),this.circle=this.scene.add.image(0,0,$p,ef.GUIDE_CIRCLE_GLOW.FILE).setPosition(0,10),this.circle.setWorldSize(.7*ef.GUIDE_CIRCLE_GLOW.WIDTH,.7*ef.GUIDE_CIRCLE_GLOW.HEIGHT),this.hand=this.scene.add.image(0,0,$p,ef.GUIDE_HAND.FILE).setPosition(18,25).setAngle(10),this.hand.setWorldSize(ef.GUIDE_HAND.WIDTH,ef.GUIDE_HAND.HEIGHT),this.popup.add(this.woods),this.popup.add(this.holes),this.popup.add([this.circle,this.hand])},n.alignGuideObjects=function(){},n.createWood=function(e){return this.scene.add.container(0,0)},n.createHole=function(e){var t=!1,n=!1;e&&(t=e.isAds||!1,n=e.isScrew||!1);var i=.7,r=this.scene.add.container(0,0),s=this.scene.add.image(0,0,$p,ef.WOOD_NUT_HOLE_INSIDE);s.setWorldSize(13.02,13.02),r.add(s);var a=this.scene.add.image(0,0,$p,ef.WOOD_NUT_HOLE_SILVER);a.setWorldSize(13.02,13.02),r.add(a);var o=this.scene.add.image(0,0,$p,ef.WOOD_NUT_HOLE_GOLD);if(o.setWorldSize(13.02,13.02),r.add(o),t){var c=this.scene.add.image(0,0,$p,ef.BUTTON_PLUS.FILE);c.setWorldSize(ef.BUTTON_PLUS.WIDTH*i*.8,ef.BUTTON_PLUS.HEIGHT*i*.8),r.add(c),Phaser.Display.Align.In.TopRight(c,a,2,2)}if(n){var l=this.scene.add.image(0,0,$p,ef.SCREW_PREFIX+"1");l.setWorldSize(16.275,16.275),r.add(l)}return r},n.createAnimation=function(){var e=this,t=this.hand.scale,n=this.hand.angle,i=this.scene.tweens.add({targets:[this.hand],duration:500,angle:n-15,scaleX:.8*t,scaleY:.8*t,onComplete:function(){e.scene.tweens.add({targets:[e.hand],duration:500,angle:n,scaleX:t,scaleY:t})}}).pause();this.scene.tweens.addCounter({from:0,to:1,duration:500,repeat:-1,yoyo:!0,onRepeat:function(e){i.play(!0)}})},t}(nl),nf=tf,rf=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=t,n}(0,o.Z)(t,e);var n=t.prototype;return n.createObjects=function(){this.objects=new Lp(this.scene)},n.createLayouts=function(){this.scene.world.isLandscape()?this.layout=new od(this.scene):this.layout=new rd(this.scene),this.layout.setUIObjects(this.objects)},n.initUILogic=function(){GameCore.Utils.Valid.isDebugger()},n.updateUIState=function(){},n.showPauseScreen=function(){var e=this.scene.screen;e.get(Vr.o4.PAUSE_SCREEN)||e.add(Vr.o4.PAUSE_SCREEN,Xu),e.open(Vr.o4.PAUSE_SCREEN)},n.showRewardScreen=function(e){var t=this.scene.game.globalScene.screen;t.get(Vr.o4.REWARD_SCREEN)||t.add(Vr.o4.REWARD_SCREEN,fh),t.open(Vr.o4.REWARD_SCREEN,e)},n.showRescueScreen=function(){var e=this.scene.screen;e.get(Vr.o4.RESCUE_SCREEN)||e.add(Vr.o4.RESCUE_SCREEN,rh),e.open(Vr.o4.RESCUE_SCREEN)},n.showCompleteScreen=function(){var e=this.scene.screen;e.get(Vr.o4.COMPLETE_SCREEN)||e.add(Vr.o4.COMPLETE_SCREEN,ed),e.open(Vr.o4.COMPLETE_SCREEN)},n.showQuitScreen=function(){var e=this.scene.screen;e.get(Vr.o4.QUIT_SCREEN)||e.add(Vr.o4.QUIT_SCREEN,Gp),e.open(Vr.o4.QUIT_SCREEN)},n.showBuyItemScreen=function(e){var t=this.scene.screen;t.get(Vr.o4.BUY_ITEM_SCREEN)||t.add(Vr.o4.BUY_ITEM_SCREEN,qp),t.open(Vr.o4.BUY_ITEM_SCREEN,e)},n.showGuideScreen=function(e){var t=this.scene.screen;t.get(Vr.o4.GUIDE_SCREEN)||t.add(Vr.o4.GUIDE_SCREEN,nf),t.open(Vr.o4.GUIDE_SCREEN,e)},n.closeAllLayoutScreens=function(){var e=this.scene.screen;e.close(Vr.o4.PAUSE_SCREEN),e.close(Vr.o4.RESCUE_SCREEN),e.close(Vr.o4.COMPLETE_SCREEN),e.close(Vr.o4.STARTING_SCREEN),e.close(Vr.o4.QUIT_SCREEN),e.close(Vr.o4.BUY_ITEM_SCREEN),e.close(Vr.o4.GUIDE_SCREEN)},t}(Ga),sf=rf;function af(e,t){var n="undefined"!==typeof T()&&b()(e)||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){var n;if(!e)return;if("string"===typeof e)return of(e,t);var i=S()(n=Object.prototype.toString.call(e)).call(n,8,-1);"Object"===i&&e.constructor&&(i=e.constructor.name);if("Map"===i||"Set"===i)return I()(e);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return of(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var i=0;return function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function of(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var cf=0,lf=1,uf=function(){function e(e,t,n){this.scene=void 0,this.body=void 0,this.constraintState=lf,this.scene=e,this.body=this.scene.matter.add.fromVertices(n.x,n.y,t,{},!0);var i=GameCore.Configs.Gameplay.ScaleFactor;this.body.friction=0,this.body.frictionAir=1e-4,this.body.restitution=.65,this.body.inverseMass=2/Math.pow(i,2),this.body.gravityScale.y=5*i,this.body.gravityScale.x=0}var t=e.prototype;return t.getCenterOfMass=function(){return this.body.centerOfMass},t.updateCategory=function(e){this.body.collisionFilter.category=e,this.body.collisionFilter.mask=e},t.addWorldConstraint=function(){var e=this.scene.matter.add.worldConstraint(this.body,0,1,{pointA:{x:0,y:0},pointB:{x:0,y:0}});return e.stiffness=0,e},t.createWorldConstraint=function(e){for(var t=[],n=0;n<e;n++)t.push(this.addWorldConstraint());return t},t.setUnConstraintState=function(){if(this.constraintState!==cf){this.constraintState=cf;var e=GameCore.Configs.Gameplay.ScaleFactor;this.body.inverseMass=1/(this.body.mass||1),this.body.gravityScale.y=1*e}},t.setConstraintState=function(){if(this.constraintState!==lf){this.constraintState=lf;var e=GameCore.Configs.Gameplay.ScaleFactor;this.body.inverseMass=2/Math.pow(e,2),this.body.gravityScale.y=5*e}},t.isOutOfZone=function(){var e=this.scene.gameZone,t=e.width,n=e.height,i=this.body.vertices;if(!i)return!1;for(var r,s=!0,a=af(i);!(r=a()).done;){var o=r.value;if(!(o.x<0||o.x>t||o.y<0||o.y>n)){s=!1;break}}return s},t.containPoint=function(e,t){return this.scene.matter.containsPoint(this.body,e,t)},t.removeFromWorld=function(){this.scene.matter.world.remove(this.body)},t.handleBodyOutOfZone=function(){this.body.restitution=0,this.setStatic(!0),this.body.isSensor=!0},t.reviveBody=function(){this.body.positionImpulse={x:0,y:0},this.setStatic(!1),this.body.isSensor=!1,this.setConstraintState()},t.setStatic=function(e){e&&this.body.isStatic||this.scene.matter.body.setStatic(this.body,e)},t.getRandomPoint=function(e){var t,n=this.body.vertices,i=new Phaser.Geom.Polygon(n),r=Phaser.Geom.Polygon.GetAABB(i);do{t=new Phaser.Math.Vector2(Phaser.Math.Between(r.left,r.right),Phaser.Math.Between(r.top,r.bottom))}while(!Phaser.Geom.Polygon.Contains(i,t.x,t.y));e.x=t.x,e.y=t.y},e}(),hf=uf;function df(e,t){var n="undefined"!==typeof T()&&b()(e)||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){var n;if(!e)return;if("string"===typeof e)return pf(e,t);var i=S()(n=Object.prototype.toString.call(e)).call(n,8,-1);"Object"===i&&e.constructor&&(i=e.constructor.name);if("Map"===i||"Set"===i)return I()(e);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return pf(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var i=0;return function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function pf(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var ff=function(){function e(e,t){this.scene=void 0,this.payload=void 0,this.polygonPosition=void 0,this.holeInLocalWoodPositions=[],this._dx=void 0,this._dy=void 0,this.scene=e,this.payload=t,this.processData()}var t=e.prototype;return t.processData=function(){var e=GameCore.Configs.Gameplay.ScaleFactor,t=this.payload,n=t.config,i=t.holeConfigs,r=t.boardPosition,s=t.isOverlay,a=t.holeOverlay,o=this.getVector2Like(n.polygonColliderPoints,n.scaleX,n.scaleY),c=-n.angle*(Math.PI/180),l=50*n.x*e,u=50*-n.y*e,h=new Phaser.GameObjects.Components.TransformMatrix,d=new Phaser.GameObjects.Components.TransformMatrix;this.polygonPosition={x:l+r.x,y:u+r.y},h.applyITRS(this.polygonPosition.x,this.polygonPosition.y,c,1,1),d.applyITRS(0,0,c,1,1),De()(o).call(o,(function(e){var t=e.x||0,n=e.y||0;return d.transformPoint(t,n,e),e}));var p=new Phaser.Geom.Polygon(o);Phaser.Geom.Polygon.Translate(p,this.polygonPosition.x,this.polygonPosition.y);for(var f,v=df(i);!(f=v()).done;){var m=f.value;if(!s||!Ae()(a).call(a,m.id)){var g=m.x,y=50*-m.y*e,E=50*g*e+r.x,S=y+r.y;if(p.contains(E,S)&&1===m.hasScrew){var w=h.applyInverse(E,S),I=w.x,A=w.y;this.holeInLocalWoodPositions.push({x:I,y:A})}}}},t.getHoleInLocalWoodPositions=function(){return this.holeInLocalWoodPositions},t.getPolygonPosition=function(){return this.polygonPosition},t.getVertices=function(){var e=this.payload.config;return this.getVector2Like(e.polygonColliderPoints,e.scaleX,e.scaleY)},t.getVector2Like=function(e,t,n){void 0===t&&(t=1),void 0===n&&(n=1);var i=GameCore.Configs.Gameplay.ScaleFactor;return De()(e).call(e,(function(e){return{x:50*e.x*i*t,y:-1*e.y*50*i*n}}))},t.getCorrectImagePosition=function(e){var t=this.polygonPosition.x-e.x,n=this.polygonPosition.y-e.y,i=new Phaser.GameObjects.Components.TransformMatrix;i.applyITRS(0,0,-this.payload.config.angle*Math.PI/180,1,1);var r=new Phaser.Math.Vector2;i.transformPoint(t,n,r);var s=this.polygonPosition.x+r.x,a=this.polygonPosition.y+r.y;return this._dx=t,this._dy=n,{x:s,y:a}},t.getWorldPositionOfHolesInWood=function(e,t){var n=[],i=new Phaser.GameObjects.Components.TransformMatrix;i.applyITRS(e.x,e.y,t,1,1);for(var r,s=df(this.holeInLocalWoodPositions);!(r=s()).done;){var a=r.value,o=new Phaser.Math.Vector2;i.transformPoint(a.x-this._dx,a.y-this._dy,o),n.push({x:o.x,y:o.y})}return n},t.reset=function(){},e}(),vf=ff,mf=ja.Z.GAMEPLAY,gf=(mf.KEY,mf.FRAME),yf={key:gf.BAR.FILE,width:gf.BAR.WIDTH,height:gf.BAR.HEIGHT,color:16777215,polygonPoints:[{x:-2.4363685,y:.53999996},{x:-2.5511053,y:.40401322},{x:-2.5498672,y:-.37077624},{x:-2.4434211,y:-.5248026},{x:2.4376051,y:-.51033485},{x:2.5034964,y:-.46678618},{x:2.543266,y:-.39738947},{x:2.5504155,y:.3948298},{x:2.5016344,y:.4714166},{x:2.4345713,y:.5232619}]},Ef={bar:gf.BAR,Wavy_Bar:gf.BAR_WAVY_BAR,Plus_Shaped:gf.BAR_PLUS_SHAPED,square:gf.BAR_SQUARE,Solid_Circle_3:gf.BAR_SOLID_CIRCLE_3,"E-Shaped":gf.BAR_E_SHAPED,Solid_Circle_1:gf.BAR_SOLID_CIRCLE_1,L_5:gf.BAR_L_5,"C-Shaped":gf.BAR_C_SHAPED,"#10":gf.BAR_SHAPE_S10,"#9":gf.BAR_SHAPE_S9,"#12":gf.BAR_SHAPE_S12,"#7":gf.BAR_SHAPE_S7,"#5":gf.BAR_SHAPE_S5,"silver 2":gf.BAR_SILVER_2,"#11":gf.BAR_SHAPE_S11,L_Shaped:gf.BAR_L_SHAPED,Holed_Circle:gf.BAR_HOLED_CIRCLE,"Layer-10":gf.BAR_LAYER_10,"#4":gf.BAR_SHAPE_S4,"#6":gf.BAR_SHAPE_S6,"#2":gf.BAR_SHAPE_S2,"#1":gf.BAR_SHAPE_S1,L_3:gf.BAR_L_3,L_2:gf.BAR_L_2,T_shape:gf.BAR_T_SHAPE,"#8":gf.BAR_SHAPE_S8,L_1:gf.BAR_L_1,"#3":gf.BAR_SHAPE_S3,"shape (29)":gf.BAR_SHAPE_29,"shape (31)":gf.BAR_SHAPE_31,"shape (22)":gf.BAR_SHAPE_22,"shape (26)":gf.BAR_SHAPE_26,"shape (33)":gf.BAR_SHAPE_33,"shape (35)":gf.BAR_SHAPE_35,"shape (37)":gf.BAR_SHAPE_37,"shape (1)":gf.BAR_SHAPE_1,"shape (44)":gf.BAR_SHAPE_44,"shape (28)":gf.BAR_SHAPE_28,"shape (39)":gf.BAR_SHAPE_39,"shape (32)":gf.BAR_SHAPE_32,"shape (18)":gf.BAR_SHAPE_18,"shape (38)":gf.BAR_SHAPE_38,"shape (23)":gf.BAR_SHAPE_23,"shape (5)":gf.BAR_SHAPE_5,"shape (20)":gf.BAR_SHAPE_20,"shape (24)":gf.BAR_SHAPE_24,"shape (19)":gf.BAR_SHAPE_19,"shape (34)":gf.BAR_SHAPE_34,"shape (13)":gf.BAR_SHAPE_13,"shape (2)":gf.BAR_SHAPE_2,"shape (12)":gf.BAR_SHAPE_12,"shape (17)":gf.BAR_SHAPE_17,"shape (43)":gf.BAR_SHAPE_43,"shape (27)":gf.BAR_SHAPE_27,"shape (30)":gf.BAR_SHAPE_30,"shape (21)":gf.BAR_SHAPE_21,"shape (40)":gf.BAR_SHAPE_40,"shape (42)":gf.BAR_SHAPE_42,"shape (25)":gf.BAR_SHAPE_25,"shape (45)":gf.BAR_SHAPE_45,"shape (41)":gf.BAR_SHAPE_41,"shape (36)":gf.BAR_SHAPE_36},Sf=function(){function e(){}return e.loadSprites=function(t,n,i){var r=!1;return(n=_e()(n).call(n,(function(e,t){return Zt()(n).call(n,e)===t}))).forEach((function(e){var n=Ef[e];if(n){var i=n.FILE,s=t.textures.get(i);s&&s.key===i||(t.load.image(i,"assets/images/"+i+".png"),r=!0)}})),(i=_e()(i).call(i,(function(e,t){return Zt()(i).call(i,e)===t}))).forEach((function(n){var i=e.getPatternBasedOnLayer(n),s=t.textures.get(i);s&&s.key===i||(t.load.image(i,"assets/images/"+i+".png"),r=!0)})),r?(t.load.start(),new(l())((function(e){t.load.once("complete",(function(){e()}))}))):l().resolve()},e.getShapeConfigBaseOnSpriteName=function(e){if(void 0===e)return yf;var t={key:yf.key,width:yf.width,height:yf.height},n=Ef[e]||void 0;return n?{key:n.FILE,width:n.WIDTH,height:n.HEIGHT}:t},e.getPatternBasedOnLayer=function(e){return void 0===e||e>9?gf.WOOD_NUT_PATTERN+1:gf.WOOD_NUT_PATTERN+e},e.getTintParticleBasedOnLayer=function(e){var t=[14189132,7584806,3331729,5745373,16211846,10722703,16702480,16674628,10188766];return void 0===e||e>9||e<1?t[0]:t[e-1]},e}(),wf=Sf,If=ja.Z.GAMEPLAY,Af=If.KEY,Tf=If.FRAME,Cf=function(){function e(e,t,n,i,r){void 0===i&&(i=!1),this.scene=void 0,this.packer=void 0,this.frameId=void 0,this.container=void 0,this.shape=void 0,this.pattern=void 0,this.holes=[],this.holeInsides=[],this.particleTint=void 0,this.scene=e,this.packer=r,this.createTexture(t,n,i),this.particleTint=wf.getTintParticleBasedOnLayer(n.layer)}var t=e.prototype;return t.createTexture=function(e,t,n){var i,r=GameCore.Configs.Gameplay.ScaleFactor,s=wf.getShapeConfigBaseOnSpriteName(t.spriteName),a=this.scene.world.getPixelRatio();this.shape=new Phaser.GameObjects.Image(this.scene,0,0,s.key,s.frame),this.shape.setWorldSize(Math.abs(Math.round(s.width*t.scaleX*a*r)),Math.abs(Math.round(s.height*t.scaleY*a*r))),mh()(t.scaleX)<0&&this.shape.setFlipX(!0),mh()(t.scaleY)<0&&this.shape.setFlipY(!0),n&&this.shape.setAlpha(.75);var o=wf.getPatternBasedOnLayer(t.layer);this.pattern=new Phaser.GameObjects.TileSprite(this.scene,0,0,this.shape.width,this.shape.height,o),this.pattern.tileScaleX=1/a*2,this.pattern.tileScaleY=1/a*2,this.pattern.tilePositionX=100*Math.random(),this.pattern.tilePositionY=100*Math.random(),this.pattern.setBlendMode(Phaser.BlendModes.MULTIPLY),this.container=new Phaser.GameObjects.Container(this.scene,0,0),this.container.setSize(this.shape.width,this.shape.height);for(var c=0;c<e.length;c++){var l=new Phaser.GameObjects.Image(this.scene,0,0,Af,Tf.WOOD_NUT_HOLE_SILVER);l.setWorldSize(48.5,48.5),l.scale*=.4*a*r,this.holes.push(l);var u=new Phaser.GameObjects.Image(this.scene,0,0,Af,Tf.WOOD_NUT_HOLE_INSIDE);u.setWorldSize(54,54),u.scale*=97/108*.4*.79*a*r,this.holeInsides.push(u),l.setPosition(e[c].x*a,e[c].y*a),u.setPosition(e[c].x*a,e[c].y*a),u.setBlendMode(Phaser.BlendModes.ERASE)}this.container.add(x()(i=[this.shape,this.pattern]).call(i,this.holes,this.holeInsides));var h=this.shape.width,d=this.shape.height,p=new Phaser.GameObjects.Image(this.scene,0,0,Af,Tf.BLANK);p.setScale(1e-5),p.setAlpha(1e-5),this.container.add(p),this.frameId="wood-texture"+t.id,this.packer.addGameObject(h,d,this.frameId,this.container)},t.getFrameId=function(){return this.frameId},t.getParticleTint=function(){return this.particleTint},t.reset=function(){try{var e;null==(e=this.container)||e.destroy(!0)}catch(t){}},t.getShapeSize=function(){return{width:this.shape.width,height:this.shape.height}},t.getFrameSize=function(){var e=this.packer.getPadding();return{width:this.shape.width+e,height:this.shape.height+e}},e}(),bf=Cf,Pf={THRESHOLD:1.25,RADIUS:8.25};function xf(e,t){var n="undefined"!==typeof T()&&b()(e)||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){var n;if(!e)return;if("string"===typeof e)return Rf(e,t);var i=S()(n=Object.prototype.toString.call(e)).call(n,8,-1);"Object"===i&&e.constructor&&(i=e.constructor.name);if("Map"===i||"Set"===i)return I()(e);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return Rf(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var i=0;return function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Rf(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var Of=function(e){function t(t,n,i,r,s){var a;return(a=e.call(this,t,0,0,"__MISSING")||this).scene=void 0,a.config=void 0,a.holeConfigs=void 0,a.woodProcessor=void 0,a.woodDrawer=void 0,a.woodBody=void 0,a.isOutOfGameZone=!1,a.isHitByHammer=!1,a.isRopeOutOfGameZone=!1,a.isOverlay=void 0,a.overlaidHole=[],a.ropes=[],a.packer=void 0,a.category=void 0,a.overlayCategory=void 0,a.holeConstraints=[],a.holes=[],a.countActiveConstraints=0,a.updateAfterChangeConstraints=function(){a.woodBody.setStatic(a.countActiveConstraints>=2),0===a.countActiveConstraints?a.woodBody.setUnConstraintState():a.woodBody.setConstraintState()},a.scene=t,a.config=n,a.holeConfigs=i,a.packer=s,a.initOverlayData(),a.createWoodProcessor(r),a.createWoodDrawer(),a.createWoodBody(),a.scene.add.existing((0,Ka.Z)(a)),a}(0,o.Z)(t,e);var n=t.prototype;return n.initOverlayData=function(){var e=this.scene.screwManager;this.isOverlay=e.isWoodOverlay(this.config.id),this.isOverlay&&(this.overlaidHole=e.getOverlaidHoleOfWood(this.config.id)||[])},n.createWoodProcessor=function(e){this.woodProcessor=new vf(this.scene,{config:this.config,holeConfigs:this.holeConfigs,boardPosition:e,isOverlay:this.isOverlay,holeOverlay:this.overlaidHole})},n.createWoodDrawer=function(){var e=this;this.woodDrawer=new bf(this.scene,this.woodProcessor.getHoleInLocalWoodPositions(),this.config,this.isOverlay,this.packer),this.packer.events.once("save",(function(){e.setupWoodImage()}))},n.createWoodBody=function(){var e=this.woodProcessor.getVertices(),t=this.woodProcessor.getPolygonPosition(),n=new hf(this.scene,e,t);this.woodBody=n},n.setupWoodImage=function(){var e=this.scene.world.getPixelRatio();this.setScale(1/e),this.setTexture("wood-textures",this.woodDrawer.getFrameId()),this.scene.matter.add.gameObject(this,this.woodBody.body)},n.addRope=function(e){this.ropes.push(e)},n.updateConfig=function(e,t){this.config=e,this.updatePhysicBody(t);var n=this.woodProcessor.getPolygonPosition(),i=this.isOverlay?za.Z.WOOD_OVERLAY:za.Z.WOOD;this.setDepth(i+this.config.layerPhysic),this.setPosition(n.x,n.y);var r=this.woodDrawer.getShapeSize(),s=this.woodDrawer.getFrameSize(),a=this.woodBody.getCenterOfMass(),o={x:(a.x*r.width+(s.width-r.width)/2)/s.width,y:(a.y*r.height+(s.height-r.height)/2)/s.height};this.setOrigin(o.x,o.y);var c=this.getCenter(),l=this.woodProcessor.getCorrectImagePosition(c);this.setPosition(l.x,l.y),this.setAngle(-1*e.angle),this.isOutOfGameZone=!1,this.isHitByHammer=!1,this.isRopeOutOfGameZone=!1},n.updatePhysicBody=function(e){e&&(this.category=e,this.woodBody.updateCategory(e))},n.updateOverlayBody=function(e,t){this.woodBody.body.collisionFilter.category=this.isOverlay?t:e,this.overlayCategory=this.isOverlay?t:e,this.scene.matter.setCollidesWith([this.woodBody.body],[e,t])},n.attachHoles=function(e){this.holeConstraints=[],this.countActiveConstraints=0,this.holes=e;for(var t,n=[],i=0,r=xf(e);!(t=r()).done;){var s,a=t.value;this.isOverlay&&Ae()(s=this.overlaidHole).call(s,a.id)||this.containPoint(a.x,a.y)&&a.getIsHasScrew()&&(n.push(a),i++)}if(this.countActiveConstraints=i,this.countActiveConstraints<2){this.holeConstraints=this.woodBody.createWorldConstraint(i);for(var o=0;o<n.length;o++){var c=n[o],l=this.getUnStiffConstraint();l.pointA={x:c.x,y:c.y};var u=this.woodBody.body.position;l.pointB={x:c.x-u.x,y:c.y-u.y},l.stiffness=1}}this.updateAfterChangeConstraints()},n.getWorldPositionOfHolesInWood=function(){var e=this.getWorldPosition(),t=this.angle*(Math.PI/180);return this.woodProcessor.getWorldPositionOfHolesInWood(e,t)},n.getCategory=function(){return this.category},n.getOverlayCategory=function(){return this.isOverlay?this.overlayCategory:this.category},n.getVertices=function(){return this.woodBody.body.vertices},n.getCountActiveConstraints=function(){return this.countActiveConstraints},n.isWoodConstraintByScrews=function(){return!this.getIsWoodOutOfBoard()&&this.countActiveConstraints>=2},n.removeHoleConstraints=function(){var e=this;this.holeConstraints.forEach((function(t){e.scene.matter.world.remove(t)})),this.holeConstraints=[]},n.getThreshold=function(){return Pf.THRESHOLD*GameCore.Configs.Gameplay.ScaleFactor},n.updateHoleConstraints=function(){if(!this.getIsWoodOutOfBoard()){this.countActiveConstraints=0;var e=[];this.removeHoleConstraints();for(var t,n=this.getThreshold(),i=this.getWorldPositionOfHolesInWood(),r=xf(this.holes);!(t=r()).done;){var s,a=t.value;if(!this.isOverlay||!Ae()(s=this.overlaidHole).call(s,a.id)){for(var o,c=a.getIsHasScrew(),l={x:a.x,y:a.y},u=!1,h=xf(i);!(o=h()).done;){var d=o.value;if(Math.abs(d.x-l.x)<n&&Math.abs(d.y-l.y)<n){u=!0;break}}if(c&&u){var p=this.woodBody.body.position;e.push({PointA:{x:l.x,y:l.y},PointB:{x:l.x-p.x,y:l.y-p.y}}),this.countActiveConstraints+=1}}}if(this.countActiveConstraints<2)for(var f,v=xf(e);!(f=v()).done;){var m=f.value,g=this.getUnStiffConstraint();g.pointA=m.PointA,g.pointB=m.PointB,g.stiffness=1}this.updateAfterChangeConstraints()}},n.getUnStiffConstraint=function(){var e,t=O()(e=this.holeConstraints).call(e,(function(e){return 0===e.stiffness}));return t||(t=this.woodBody.addWorldConstraint(),this.holeConstraints.push(t)),t},n.checkOutOfGameZone=function(e){if((void 0===e&&(e=!1),!(this.isHitByHammer||0==this.ropes.length&&this.isOutOfGameZone))&&this.woodBody.isOutOfZone()){if(this.isRopeOutOfGameZone&&this.isOutOfGameZone)return;this.isRopeOutOfGameZone=0==this.ropes.length||this.isWoodRopesOutOfBoard(),this.isOutOfGameZone=!0,this.isRopeOutOfGameZone&&(e||this.splash(),this.handleOutOfGameZone(),e||Yu.emit(Fu.WOOD_OUT))}},n.getRopes=function(){return this.ropes},n.isWoodRopesOutOfBoard=function(){for(var e=[],t=[this];t.length>0;){var n=t.pop();if(n){if(!n.getIsWoodOutOfBoard())return!1;if(!n.getIsHitByHammer())for(var i,r=xf(n.getRopes());!(i=r()).done;){var s=i.value.getOtherWood(n);if(s){if(!s.getIsWoodOutOfBoard())return!1;Ae()(e).call(e,s.config.id)||(t.push(s),e.push(s.config.id))}}}}return!0},n.handleOutOfGameZone=function(){var e=this.scene.gameZone.height;this.woodBody.handleBodyOutOfZone();var t=this.woodProcessor.getPolygonPosition();this.angle=-this.config.angle,this.y=t.y+e,this.x=t.x,this.kill()},n.containPoint=function(e,t){return this.woodBody.containPoint(e,t)},n.getIsWoodOutOfBoard=function(){return this.isOutOfGameZone||this.isHitByHammer},n.getIsHitByHammer=function(){return this.isHitByHammer},n.hitByHammer=function(e){var t=this;void 0===e&&(e=!1),this.isHitByHammer||(this.isHitByHammer=!0,this.removeWoodBody(),this.explode(),this.kill(),this.ropes.forEach((function(e){e.removeConstraintWithWood(t)})),Yu.emit(Fu.WOOD_OUT),e&&this.scene.audio.playSound(Xa.Z.WOOD_BREAK,{volume:.5}))},n.explode=function(){var e=this.scene.particlePool.spawn("WoodExplodeParticle");e.emitter.setTint([this.woodDrawer.getParticleTint()]);var t=Math.floor(this.woodBody.body.area/200);e.explode(this.woodBody,t,this.x,this.y)},n.splash=function(){var e=this.scene.particlePool.spawn("WoodSplashParticle");e.emitter.setTint([this.woodDrawer.getParticleTint()]);var t=this.scene.gameZone,n=t.width,i=t.height,r=this.scene.board,s=r.width,a=r.height,o=this.woodBody.body.position.y>.9*this.scene.gameZone.height,c=this.woodBody.body.position.y<.1*this.scene.gameZone.height,l=Math.floor(this.woodBody.body.area/150);if(o||c){var u,h,d=0;if(o)d=this.woodBody.body.vertices?Math.min.apply(Math,De()(u=this.woodBody.body.vertices).call(u,(function(e){return e.y}))):this.woodBody.body.position.y;else d=this.woodBody.body.vertices?Math.max.apply(Math,De()(h=this.woodBody.body.vertices).call(h,(function(e){return e.y}))):this.woodBody.body.position.y;var p=this.woodBody.body.position.x,f=(n/2-p)/n*90+mh()(n/2-p)*(i-d)/i*180,v=(i/2-a/2)/100,m=this.woodBody.body.speed/7;e.explode(l,p,d,f,v,1,m)}else{var g=this.woodBody.body.position.y,y=this.woodBody.body.position.x<this.scene.gameZone.width/2?-20:n+20,E=(n/2-y)/n*90+mh()(n/2-y)*(i-g)/i*180,S=(i/2-a/2)/100,w=(n-s)/200;e.explode(l,y,g,E,S,w,1)}},n.removeWoodBody=function(){this.scene.matter.world.remove(this.body);for(var e,t=xf(this.holeConstraints);!(e=t()).done;){var n=e.value;this.scene.matter.world.remove(n)}},n.undoState=function(e){this.isHitByHammer||(this.setPosition(e.position.x,e.position.y),this.setAngle(e.angle),this.revive(),this.woodBody.reviveBody(),this.isOutOfGameZone=!1,this.isRopeOutOfGameZone=!1,this.checkOutOfGameZone(!0))},n.getWoodInfo=function(){return{position:this.getWorldPosition(),angle:this.angle}},n.setDefaultRestitution=function(){this.scene&&this.woodBody&&this.woodBody.body&&(this.woodBody.body.restitution=.65)},n.reset=function(){this.removeWoodBody(),this.woodBody.removeFromWorld(),this.woodDrawer.reset(),this.woodProcessor.reset(),this.ropes=[],this.destroy(!0)},n.applyHammerForce=function(e){for(var t,n=this.getVertices(),i=new Phaser.Geom.Polygon(n),r=Phaser.Geom.Intersects.GetRaysFromPointToPolygon(e.x,e.y,i),s=Number.MAX_SAFE_INTEGER,a=r[0],o=xf(r);!(t=o()).done;){var c=t.value,l=Phaser.Math.Distance.Between(e.x,e.y,c.x,c.y);l<s&&(s=l,a=c)}var u=new Phaser.Math.Vector2(a.x-e.x,a.y-e.y).normalize();0===s&&(s=1);var h=u.x,d=u.y,p=350*h*this.woodBody.body.mass/s,f=350*d*this.woodBody.body.mass/s,v=0===this.countActiveConstraints?8:60;p=Phaser.Math.Clamp(p,-v,v),f=Phaser.Math.Clamp(f,-v,v),this.scene.matter.body.setVelocity(this.woodBody.body,{x:p,y:f})},n.hitByLightning=function(){var e=this;this.isHitByHammer||(this.isHitByHammer=!0,this.removeWoodBody(),this.explode(),this.kill(),this.ropes.forEach((function(t){t.removeConstraintWithWood(e)})),this.scene.holeScrewAreas.forEach((function(e){e.updateAfterChangeScrew()})),this.scene.vibrateController.handleWoodOut(),this.scene.screwManager.handleWoodOutOfBoard())},t}(Phaser.GameObjects.Image),_f=Of,kf={CHOOSE_SCREW:"choose-screw",CANCEL_SCREW:"cancel-screw",ATTACH_SCREW:"attach-screw",ITEM_HAMMER:"item-hammer",ITEM_REMOVE_SCREW:"item-remove-screw",ITEM_UNDO:"item-undo",CHOOSE_HOLE:"choose-hole",ITEM_ADS:"item-ads",ITEM_REPLAY:"item-replay"};function Df(e,t){var n="undefined"!==typeof T()&&b()(e)||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){var n;if(!e)return;if("string"===typeof e)return Lf(e,t);var i=S()(n=Object.prototype.toString.call(e)).call(n,8,-1);"Object"===i&&e.constructor&&(i=e.constructor.name);if("Map"===i||"Set"===i)return I()(e);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return Lf(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var i=0;return function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Lf(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var Bf=1,Nf=2,Hf=3,Mf=4,Gf=5,Wf=6,Uf=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n.woods=[],n.woodMap=new($()),n.woodsByCategory=new($()),n.screws=[],n.ropes=[],n.holeScrewAreas=[],n.holeScrewAreaMap=new($()),n.woodOnHoleMap=new($()),n.screwState=Bf,n.choosingHoleArea=void 0,n.usingCategory=[],n.moves=[],n.disableAdsHole=!1,n.timerCheckMove=void 0,n.overlayWoodMap=new($()),n.overlayWoodOfHoleMap=new($()),n.overlayWoodIds=new(Mn()),n.overlayHoleIds=new(Mn()),n.minLayerPhysicOfHole=new($()),n.isCanClick=!0,n.scene=t,n}(0,o.Z)(t,e);var n=t.prototype;return n.initOverlayWoods=function(e,t){var n=this;this.overlayWoodMap.clear(),this.overlayWoodOfHoleMap.clear(),this.overlayWoodIds.clear(),this.overlayHoleIds.clear(),this.minLayerPhysicOfHole.clear();var i=[];e.forEach((function(e){var n=O()(t).call(t,(function(t){return t.id===e.ironId}));n&&i.push(n)}));for(var r,s=function(){var e=r.value,t=O()(i).call(i,(function(t){return t.id===e.ironId})),s=e.ironId,a=e.holeId;n.overlayWoodMap.set(s,a),n.overlayWoodIds.add(s);for(var o,c=Df(a);!(o=c()).done;){var l=o.value;n.overlayHoleIds.add(l);var u=n.minLayerPhysicOfHole.get(l)||Number.MAX_SAFE_INTEGER;t&&t.layerPhysic<u&&n.minLayerPhysicOfHole.set(l,t.layerPhysic)}},a=Df(e);!(r=a()).done;)s();for(var o,c=Df(this.overlayHoleIds);!(o=c()).done;){for(var l,u=o.value,h=[],d=this.minLayerPhysicOfHole.get(u)||0,p=Df(i);!(l=p()).done;){var f=l.value;if(f.layerPhysic>=d){h.push(f.id);var v=this.overlayWoodMap.get(f.id)||[];Ae()(v).call(v,u)||(v.push(u),this.overlayWoodMap.set(f.id,v))}}this.overlayWoodOfHoleMap.set(u,h)}},n.isWoodOverlay=function(e){return this.overlayWoodIds.has(e)},n.isHoleOverlay=function(e){return this.overlayHoleIds.has(e)},n.isHoleOverlayByWood=function(e,t){var n=this.overlayWoodOfHoleMap.get(e)||[];return Ae()(n).call(n,t)},n.getMinLayerOfOverlayHole=function(e){return this.minLayerPhysicOfHole.get(e)||0},n.getOverlaidHoleOfWood=function(e){return this.overlayWoodMap.get(e)},n.isHoleHasOverlayWood=function(e){if(!this.isHoleOverlay(e.id))return!1;for(var t,n=this.overlayWoodOfHoleMap.get(e.id)||[],i=e.getRadius(),r=e.x,s=e.y,a=new Phaser.Geom.Circle(r,s,1.25*i).getPoints(6),o=Df(n);!(t=o()).done;){var c=t.value,l=this.getWoodById(c);if(l&&!l.getIsWoodOutOfBoard())for(var u,h=Df(a);!(u=h()).done;){var d=u.value;if(l.containPoint(d.x,d.y))return!0}}return!1},n.initBoard=function(e){this.setWoods(e.woods),this.setScrews(e.screws),this.setRopes(e.ropes),this.setHoleScrewAreas(e.holeScrewAreas),this.setUsingCategory(e.usingCategory),this.initHoleBodyCategory(),this.initHoleObjects()},n.start=function(){var t;e.prototype.start.call(this),null==(t=this.timerCheckMove)||t.remove()},n.stop=function(){var t;e.prototype.stop.call(this),null==(t=this.timerCheckMove)||t.remove()},n.initHoleObjects=function(){for(var e,t=Df(this.holeScrewAreas);!(e=t()).done;){e.value.initHoleObjects()}},n.setWoods=function(e){this.woods=e,this.woodMap.clear();for(var t,n=Df(e);!(t=n()).done;){var i=t.value;this.woodMap.set(i.config.id,i)}},n.setScrews=function(e){this.screws=e},n.setRopes=function(e){this.ropes=e},n.setHoleScrewAreas=function(e){this.holeScrewAreas=e,this.holeScrewAreaMap.clear();for(var t,n=Df(e);!(t=n()).done;){var i=t.value;this.holeScrewAreaMap.set(i.id,i)}},n.setUsingCategory=function(e){this.usingCategory=e,this.woodsByCategory.clear();for(var t,n=Df(e);!(t=n()).done;){for(var i,r=t.value,s=[],a=Df(this.woods);!(i=a()).done;){var o=i.value;o.getCategory()===r&&s.push(o)}this.woodsByCategory.set(r,s)}},n.initHoleBodyCategory=function(){var e=this;this.holeScrewAreas.forEach((function(t){t.createCategoryBody(e.usingCategory)})),this.initOverlayGroup(),this.updateHoleBodyCategory(),this.holeScrewAreas.forEach((function(e){e.activeCategoryBody()}))},n.initOverlayGroup=function(){for(var e,t=this,n=[],i=Df(this.overlayWoodIds);!(e=i()).done;){var r=e.value,s=this.getWoodById(r);s&&n.push(s)}if(0!==n.length){Ai()(n).call(n,(function(e,t){return t.config.layerPhysic-e.config.layerPhysic}));for(var a=new($()),o=0;o<n.length;o++){for(var c,l=n[o],u=l.getCategory(),h=a.get(u)||{layerPhysic:l.config.layerPhysic,holes:[]},d=h.layerPhysic,p=h.holes,f=Df(this.getOverlaidHoleOfWood(l.config.id)||[]);!(c=f()).done;){var v=c.value;Ae()(p).call(p,v)||p.push(v)}for(var m=o+1;m<n.length;m++)for(var g,y=n[m],E=Df(this.getOverlaidHoleOfWood(y.config.id)||[]);!(g=E()).done;){var S=g.value;Ae()(p).call(p,S)||p.push(S)}a.set(u,{layerPhysic:d,holes:p})}for(var w,I=function(){var e,n=w.value,i=n[0],r=n[1],s=r.layerPhysic,a=r.holes,o=_e()(e=t.woods).call(e,(function(e){return e.config.layerPhysic===s})),c=t.scene.getCategoryByLayer(s,!0);t.usingCategory.push(c);for(var l,u=[],h=Df(o);!(l=h()).done;){var d=l.value;d.updateOverlayBody(i,c),d.isOverlay&&u.push(d)}t.woodsByCategory.set(c,u);for(var p,f=Df(t.holeScrewAreas);!(p=f()).done;){var v=p.value;Ae()(a).call(a,v.id)||v.createMatterBody(c)}},A=Df(a);!(w=A()).done;)I()}},n.reset=function(){this.choosingHoleArea=void 0,this.screwState=Bf,this.moves=[]},n.handleScrewAnimation=function(e){e&&this.screwState==Bf?this.screwState=Hf:e||this.screwState!=Hf||(this.screwState=Bf)},n.handleBoardClick=function(e,t){if(this.isCanClick){var n=this.getHoleAreaByPosition(e,t);n&&(n.handleHoleClick(),this.scene.timeManager.resume())}},n.getHoleAreaByPosition=function(e,t){for(var n,i=Number.MAX_SAFE_INTEGER,r=void 0,s=Df(this.holeScrewAreas);!(n=s()).done;){var a=n.value,o=Phaser.Math.Distance.Between(e,t,a.x,a.y);o<i&&(i=o,r=a)}return i<=3*Pf.RADIUS*GameCore.Configs.Gameplay.ScaleFactor?r:void 0},n.setCanClickHole=function(e){this.isCanClick=e},n.handleChooseNewHoleScrew=function(e){var t=this;if(e.getIsHasScrew()){var n;if(this.isHoleHasOverlayWood(e))return void(null==(n=e.getScrew())||n.runCannotChooseAnimation());this.scene.handleGuideScrewEvent(kf.CHOOSE_SCREW),this.screwState=Hf,this.choosingHoleArea=e,this.choosingHoleArea.runClickScrewAnimation().then((function(){t.screwState=Nf}))}},n.handleSwitchChoosingScrew=function(e){var t=this;if(this.choosingHoleArea){this.screwState=Hf;var n,i=Bf,r=void 0;if(e.id!==this.choosingHoleArea.id){if(this.choosingHoleArea.runClickScrewAnimation(),i=Nf,r=e,this.isHoleHasOverlayWood(e))return null==(n=e.getScrew())||n.runCannotChooseAnimation(),this.choosingHoleArea=void 0,void(this.screwState=Bf)}else this.scene.handleGuideScrewEvent(kf.CANCEL_SCREW);e.runClickScrewAnimation().then((function(){t.screwState=i,t.choosingHoleArea=r}))}},n.handleAttachScrewToHole=function(e){var t=this;if(this.choosingHoleArea){var n=this.isHoleHasOverlayWood(e);if(!n&&this.checkHoleAvailableToScrew(e)){var i,r;this.scene.handleGuideScrewEvent(kf.ATTACH_SCREW),this.addMove();var s=[e,this.choosingHoleArea];this.screwState=Hf;var a=this.choosingHoleArea.getScrew();if(!a)return void(this.screwState=Bf);e.runAttachScrewAnimation(a).then((function(){t.screwState=Bf})),null==(i=this.choosingHoleArea)||i.onScrewMoveAway(),null==(r=this.choosingHoleArea)||r.unAttachScrew(),this.choosingHoleArea=void 0,this.updateAfterChangeScrew(s)}else{var o,c;if(n)null==(c=e.getScrew())||c.runCannotChooseAnimation();this.screwState=Hf,null==(o=this.choosingHoleArea)||o.runClickScrewAnimation().then((function(){t.screwState=Bf,t.choosingHoleArea=void 0}))}}},n.chooseHoleArea=function(e){var t=this;switch(this.screwState){case Bf:return void this.handleChooseNewHoleScrew(e);case Hf:return;case Nf:if(!this.choosingHoleArea)return;return void(e.getIsHasScrew()?this.handleSwitchChoosingScrew(e):this.handleAttachScrewToHole(e));case Mf:if(e.getIsHasScrew()&&!this.isHoleHasOverlayWood(e))this.scene.handleGuideScrewEvent(kf.ITEM_REMOVE_SCREW),this.screwState=Hf,this.scene.itemManager.runRemoveScrewAnimation(e.x,e.y,(function(){t.removeScrewFromHole(e),t.screwState=Bf,t.scene.setDisabledButton(!1)}));return;default:return}},n.isCanClickAdsHole=function(){var e=[Bf,Nf,Hf];return Ae()(e).call(e,this.screwState)&&!this.disableAdsHole},n.updateAfterChangeScrew=function(e){this.updateWoodConstraints(e),this.updateHoleBodyCategory();for(var t,n=Df(this.holeScrewAreas);!(t=n()).done;){t.value.updateAfterChangeScrew()}this.scene.itemManager.updateAvailableItems(),this.checkWarningOutOfMove()},n.checkWarningOutOfMove=function(){var e,t=this;this.scene.warningAnimation.stopShowOutOfMoveAnimation(),null==(e=this.timerCheckMove)||e.remove(),this.timerCheckMove=this.scene.time.delayedCall(2500,(function(){for(var e,n=[],i=Df(t.holeScrewAreas);!(e=i()).done;){var r=e.value;r.getIsHasScrew()||r.isBlockByHoleObjects()||r.getIsAdsHole()||n.push(r)}if(0!==n.length){for(var s=0,a=n;s<a.length;s++){var o=a[s];if(t.checkHoleAvailableToScrew(o))return}t.scene.warningAnimation.runShowOutOfMoveAnimation()}else t.scene.warningAnimation.runShowOutOfMoveAnimation()}))},n.checkHoleAvailableToScrew=function(e){for(var t,n=e.getRadius(),i=e.x,r=e.y,s=new Phaser.Geom.Circle(i,r,n).getPoints(6),a=[],o=Df(this.woods);!(t=o()).done;)for(var c,l=t.value,u=Df(s);!(c=u()).done;){var h=c.value;if(!l.getIsWoodOutOfBoard()&&l.containPoint(h.x,h.y)){a.push(l);break}}if(0===a.length)return!0;for(var d=0,p=a;d<p.length;d++){var f=p[d].getWorldPositionOfHolesInWood();if(0===f.length)return!1;for(var v,m=!1,g=Df(f);!(v=g()).done;){var y=v.value;Phaser.Math.Distance.Between(y.x,y.y,i,r)<=Pf.THRESHOLD*GameCore.Configs.Gameplay.ScaleFactor&&(m=!0)}if(!m)return!1}return!0},n.updateWoodConstraints=function(e){if(0!==e.length){var t=[];if(e.length===this.holeScrewAreas.length)t=this.woods;else for(var n,i=Df(e);!(n=i()).done;)for(var r,s=n.value,a=Df(this.getWoodsOverlayHoleScrew(s));!(r=a()).done;){var o=r.value;Ae()(t).call(t,o)||t.push(o)}t.forEach((function(e){e.updateHoleConstraints()}))}},n.updateHoleBodyCategory=function(){var e=[];this.woodOnHoleMap.clear();for(var t,n=Df(this.holeScrewAreas);!(t=n()).done;){var i=t.value;i.getIsHasScrew()?e.push(i):i.activeCategoryBody(!0)}for(var r,s=Df(this.usingCategory);!(r=s()).done;){var a=r.value,o=this.woodsByCategory.get(a);if(o)for(var c,l=Df(e);!(c=l()).done;){for(var u,h=c.value,d=h.x,p=h.y,f=this.isHoleOverlay(h.id),v=f&&this.overlayWoodOfHoleMap.get(h.id)||[],m=this.woodOnHoleMap.get(h.id)||[],g=!1,y=Df(o);!(u=y()).done;){var E=u.value,S=f&&Ae()(v).call(v,E.config.id)&&a!==E.getOverlayCategory();E.getIsWoodOutOfBoard()||S||!E.containPoint(d,p)||(g=!0,m.push(E))}h.setCategoryBody(a,g),h.activeCategoryBody(!1),this.woodOnHoleMap.set(h.id,m)}}},n.getWoodsOnHole=function(e){return this.woodOnHoleMap.get(e)||[]},n.getWoodById=function(e){return this.woodMap.get(e)},n.getHoleScrewById=function(e){return this.holeScrewAreaMap.get(e)},n.getHoleScrews=function(){return this.holeScrewAreas},n.getUnconstrainedWoods=function(){for(var e,t=[],n=Df(this.woods);!(e=n()).done;){var i=e.value;i.isWoodConstraintByScrews()||i.getIsWoodOutOfBoard()||t.push(i)}return t},n.getWoodsInBoard=function(){for(var e,t=[],n=Df(this.woods);!(e=n()).done;){var i=e.value;i.getIsWoodOutOfBoard()||t.push(i)}return t},n.getWoodsOverlayHoleScrew=function(e){for(var t,n=e.getRadius(),i=e.x,r=e.y,s=new Phaser.Geom.Circle(i,r,n).getPoints(6),a=[],o=Df(this.woods);!(t=o()).done;)for(var c,l=t.value,u=Df(s);!(c=u()).done;){var h=c.value;!l.getIsWoodOutOfBoard()&&l.containPoint(h.x,h.y)&&a.push(l)}return a},n.startHammer=function(){this.unChooseHole(),this.screwState=Gf},n.hammerHitWood=function(e,t,n){for(var i,r=this.getWoodsInBoard(),s=GameCore.Configs.Items.Hammer.AffectRadius,a=Number.MAX_SAFE_INTEGER,o=[],c=void 0,l=Df(r);!(i=l()).done;){for(var u,h=i.value,d=h.getVertices(),p=new Phaser.Geom.Polygon(d),f=Phaser.Geom.Intersects.GetRaysFromPointToPolygon(e,t,p),v=Number.MAX_SAFE_INTEGER,m=Df(f);!(u=m()).done;){var g=u.value,y=Phaser.Math.Distance.Between(e,t,g.x,g.y);y<v&&(v=y)}v<s&&(o.push(h),v<a&&(a=v,c=h))}for(var E,S=[],w=Df(r);!(E=w()).done;){var I=E.value;I.containPoint(e,t)&&S.push(I)}if(0!==S.length){c=S[0];for(var A,T=Df(S);!(A=T()).done;){var C=A.value;C.config.layerPhysic>c.config.layerPhysic&&(c=C)}}n&&(c=n),c&&c.hitByHammer(!0);var b=void 0===c?-1:c.config.id;this.applyForceByHammer(o,e,t,b),this.stopHammer()},n.getTopWoodAtPosition=function(e,t){var n=this.getWoodsInBoard();if(0!==n.length){for(var i,r=void 0,s=[],a=Df(n);!(i=a()).done;){var o=i.value;o.containPoint(e,t)&&s.push(o)}if(0!==s.length){r=s[0];for(var c,l=Df(s);!(c=l()).done;){var u=c.value;u.config.layerPhysic>r.config.layerPhysic&&(r=u)}}return r}},n.applyForceByHammer=function(e,t,n,i){for(var r,s=Df(e);!(r=s()).done;){var a=r.value;a.config.id!==i&&(a.isWoodConstraintByScrews()||a.applyHammerForce({x:t,y:n}))}},n.setToNextLevel=function(){this.screwState=Hf},n.stopHammer=function(){this.screwState=Bf,this.updateAfterChangeScrew([])},n.unChooseHole=function(){var e;null==(e=this.choosingHoleArea)||e.runClickScrewAnimation(0),this.choosingHoleArea=void 0},n.startRemoveScrew=function(){this.unChooseHole(),this.screwState=Mf;for(var e,t=Df(this.holeScrewAreas);!(e=t()).done;){var n=e.value,i=n.getScrew();n.getIsHasScrew()&&!n.isBlockByHoleObjects()&&i&&!this.isHoleHasOverlayWood(n)&&i.runChooseRemoveAnimation()}},n.stopRemoveScrew=function(){for(var e,t=Df(this.holeScrewAreas);!(e=t()).done;){var n=e.value,i=n.getScrew();n.getIsHasScrew()&&!n.isBlockByHoleObjects()&&i&&!this.isHoleHasOverlayWood(n)&&i.stopPlayingRemoveWarning()}this.screwState=Bf},n.removeScrewFromHole=function(e){for(var t,n=Df(this.holeScrewAreas);!(t=n()).done;){var i=t.value,r=i.getScrew();i.getIsHasScrew()&&r&&r.stopPlayingRemoveWarning()}var s=[e],a=e.getScrew();null==a||a.removeScrew(),e.onScrewRemoved(),e.unAttachScrew(),this.updateAfterChangeScrew(s)},n.addMove=function(){for(var e,t=new($()),n=new($()),i=new($()),r=Df(this.screws);!(e=r()).done;){var s=e.value;if(s){var a={holeId:s.holeId,isScrewRemoved:s.getIsScrewRemoved()};t.set(s.getId(),a)}}for(var o,c=Df(this.woods);!(o=c()).done;){var l=o.value;n.set(l.config.id,l.getWoodInfo())}for(var u,h=Df(this.ropes);!(u=h()).done;){var d=u.value,p={chainPositions:d.getChainPositions()};i.set(d.id,p)}this.moves.push({screwInfo:t,woodInfo:n,ropeInfo:i})},n.getIsCanUndo=function(){return this.moves.length>0},n.undoMove=function(){var e,t=this;if(0!==this.moves.length){var n=this.moves.pop();if(n){this.unChooseHole(),this.screwState=Wf,this.holeScrewAreas.forEach((function(e){return e.unAttachScrew()}));for(var i,r=Df(this.screws);!(i=r()).done;){var s=i.value;if(s){var a=n.screwInfo.get(s.getId());if(a){var o=a.holeId;if(-1!==o&&!a.isScrewRemoved){var c=this.holeScrewAreaMap.get(o);c&&(s.reviveScrew(),c.attachScrew(s,!0))}}}}for(var l,u=Df(this.woods);!(l=u()).done;){var h=l.value,d=n.woodInfo.get(h.config.id);d&&h.undoState(d)}this.scene.time.delayedCall(50,(function(){for(var e,n=Df(t.woods);!(e=n()).done;){var i=e.value;null!=i&&i.getIsWoodOutOfBoard()||null==i||i.setDefaultRestitution()}})),this.updateAfterChangeScrew(x()(e=[]).call(e,this.holeScrewAreas)),this.ropes.forEach((function(e){var t=n.ropeInfo.get(e.id);t&&e.resetConstraint(t.chainPositions)})),this.screwState=Bf}}},n.shouldUpdateBoard=function(){return this.screwState!==Wf},n.handleWoodOutOfBoard=function(){this.holeScrewAreas.forEach((function(e){return e.onWoodOutOfBoard()}))},n.isPointsInAnyWood=function(e){for(var t,n=Df(this.woods);!(t=n()).done;){var i=t.value;if(!i.getIsWoodOutOfBoard())for(var r,s=Df(e);!(r=s()).done;){var a=r.value;if(i.containPoint(a.x,a.y))return!0}}return!1},n.getWoods=function(){return this.woods},n.getRandomWoods=function(e){void 0===e&&(e=1);var t=[];e=Math.min(e,this.woods.length);for(var n=0;n<e;n++){var i=void 0,r=0;do{if(i=this.woods[Phaser.Math.Between(0,this.woods.length-1)],++r>100)break}while(Ae()(t).call(t,i));t.push(i)}return t},n.getRandomFlyingKeys=function(e){void 0===e&&(e=1);for(var t=[],n=[],i=0;i<this.holeScrewAreas.length;i++)for(var r=this.holeScrewAreas[i],s=0;s<r.holeObjects.length;s++){var a=r.holeObjects[s];"FlyingKey"==a.objectType&&t.push(a)}e=Math.min(e,t.length);for(var o=0;o<e;o++){var c=void 0,l=0;do{if(c=t[Phaser.Math.Between(0,t.length-1)],++l>100)break}while(Ae()(n).call(n,c));n.push(c)}return n},n.countWoodStillInGame=function(){var e=0;return this.woods.forEach((function(t){t.getIsWoodOutOfBoard()&&e++})),this.woods.length-e-this.getUnconstrainedWoods().length},n.setDisabledAdsHole=function(e){this.disableAdsHole=e},t}(Ba),Ff=Uf,Zf=GameCore.Configs.Gameplay.TimePlay,Yf=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n.currentTime=0,n.isPause=!1,n.canEmitLoseEvent=!0,n.bonusTime=0,n.playedTime=0,n.playedTimeStep1=0,n.scene=t,n}(0,o.Z)(t,e);var n=t.prototype;return n.initTimeByStep=function(e){var t=(1==e?Zf.Step1:Zf.Step2)+500;this.initTime(t)},n.initTime=function(e){this.currentTime=e,this.isPause=!0,this.canEmitLoseEvent=!0,this.bonusTime=0,this.playedTimeStep1=1===this.scene.level.getStep()?0:this.playedTime,this.playedTime=0},n.initTimeBonus=function(e){this.currentTime=e,this.isPause=!0,this.canEmitLoseEvent=!0,this.bonusTime+=e},n.update=function(e){if(GameCore.Configs.Gameplay.TimePlay.Enable&&!this.isPause){this.isTimeUp()&&this.canEmitLoseEvent&&(Yu.emit(Fu.LOSE),this.canEmitLoseEvent=!1);Date.now();this.currentTime-=e,this.playedTime+=e}},n.isTimeUp=function(){return this.currentTime<0},n.pause=function(){this.isPause=!0},n.resume=function(){this.isPause=!1},n.getTime=function(){return this.currentTime},n.getIsPause=function(){return this.isPause},n.getPlayTime=function(){return Math.floor(this.playedTime/1e3)},n.getTotalPlayTime=function(){var e=Math.floor((this.playedTime+this.playedTimeStep1)/1e3);return e<=0?0:e},n.addBonusTime=function(e){this.bonusTime+=e},n.addTimeToCurrentTime=function(e){this.currentTime+=e},t}(Ba),Vf=Yf,zf=function(e){this.scene=void 0,this.scene=e},Kf=function(e){function t(t){var n;return n=e.call(this,t)||this,t.itemManager.cancelActiveItem(),n.scene.stopManager(),n}(0,o.Z)(t,e);var n=t.prototype;return n.ready=function(){var e=new av(this.scene);this.scene.stateManager.transitionTo(e)},n.play=function(){},n.pause=function(){},n.rescue=function(){},n.gameOver=function(){},n.quit=function(){},n.nextLevel=function(){},n.update=function(e){},t}(zf),jf=Kf,Xf=function(e){function t(t){var n;return(n=e.call(this,t)||this).handleFinishGame=function(){n.scene.storage.dispatch(Ca())},t.itemManager.cancelActiveItem(),n.handleGameOver(),n}(0,o.Z)(t,e);var n=t.prototype;return n.handleGameOver=function(){var e=(0,a.Z)(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.logLevelFailed(),this.scene.registry.set(Bh,!1),this.scene.registry.set(Nh,!1),this.scene.game.globalScene.events.emit(Or.K.SWITCH,Or.C.DASHBOARD_SCENE),this.handleFinishGame();case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.logLevelFailed=function(){var e=this.scene,t=e.level.getLevel(),n=e.itemManager.getItemUsedCount(Lh[Dh.UNDO]),i=e.itemManager.getItemUsedCount(Lh[Dh.HAMMER]),r=e.itemManager.getItemUsedCount(Lh[Dh.REMOVE_SCREW]),s=e.itemManager.getItemUsedCount(Lh[Dh.REPLAY]);e.analytics.event(Z._.LEVEL_END,{success:!1,level:e.level.getLevelWithStep(),undo_item_used:n,hammer_item_used:i,remove_screw_item_used:r,replay_item_used:s,level_play_time:e.timeManager.getPlayTime(),rescue_used:e.numberOfRescue}),e.facebook.log(Z._.LEVEL_END,t,{level:t,success:!1})},n.ready=function(){var e=new av(this.scene);this.scene.stateManager.transitionTo(e)},n.play=function(){},n.pause=function(){},n.rescue=function(){},n.gameOver=function(){},n.quit=function(){var e=new jf(this.scene);this.scene.stateManager.transitionTo(e)},n.nextLevel=function(){},n.update=function(e){},t}(zf),Qf=Xf,qf=function(e){function t(t){var n;return(n=e.call(this,t)||this).handleFinishGame=function(){n.scene.storage.dispatch(Ca())},t.itemManager.cancelActiveItem(),t.setDisabledButton(!0),t.screwManager.setToNextLevel(),n.handleNextLevel(),n}(0,o.Z)(t,e);var n=t.prototype;return n.handleNextLevel=function(){var e=(0,a.Z)(h().mark((function e(){var t=this;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.logLevelComplete(),this.handleOnWin(),this.scene.player.getLevel()>GameCore.Configs.Ads.MinLevelToShow&&2==this.scene.level.getStep()&&this.scene.handleShowInterstitialAd(),this.scene.audio.playSound(Xa.Z.YOU_WIN),this.scene.time.delayedCall(50,(function(){2==t.scene.level.getStep()?t.scene.runWinStep1Animation((function(){t.scene.stateManager.ready()})):(t.handleFinishGame(),t.handleCompleteLevel())}));case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.handleCompleteLevel=function(){this.scene.layoutManager.showCompleteScreen()},n.handleOnWin=function(){var e=(0,a.Z)(h().mark((function e(){var t,n,i,r,s,a;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=this.scene,n=t.level,i=t.player,t.guideManager.clearEventListeners(),r=this.scene.level.getStep()+1,s=i.getLevel(),a=s==n.getLevel(),r>2?(a&&(this.handleEventData(),n.nextLevel(),i.updatePlayerLevel(n.getLevel())),n.setStep(1),i.updatePlayerLevel(n.getLevel()),GameSDK.submitGameResultsAsync(n.getLevel())):n.setStep(r);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.logLevelComplete=function(){var e=this.scene,t=e.level.getLevel(),n=e.itemManager.getItemUsedCount(Lh[Dh.UNDO]),i=e.itemManager.getItemUsedCount(Lh[Dh.HAMMER]),r=e.itemManager.getItemUsedCount(Lh[Dh.REMOVE_SCREW]),s=e.itemManager.getItemUsedCount(Lh[Dh.REPLAY]);e.analytics.event(Z._.LEVEL_END,{success:!0,level:e.level.getLevelWithStep(),undo_item_used:n,hammer_item_used:i,remove_screw_item_used:r,replay_item_used:s,level_play_time:e.timeManager.getPlayTime(),rescue_used:e.numberOfRescue}),e.facebook.log(Z._.LEVEL_END,t,{level:t,success:!0})},n.handleEventData=function(){var e=this.scene.level.getLevelData(),t=this.scene.screwManager.getWoods().length;if(e){t=0;for(var n=0;n<e.steps.length;n++)t+=e.steps[n].ironModels.length}this.scene.dailyQuest.increaseExp(t)},n.ready=function(){var e=new av(this.scene);this.scene.stateManager.transitionTo(e)},n.play=function(){},n.pause=function(){},n.rescue=function(){},n.gameOver=function(){},n.quit=function(){var e=new jf(this.scene);this.scene.stateManager.transitionTo(e)},n.nextLevel=function(){},n.update=function(e){},t}(zf),Jf=qf,$f=function(e){function t(t){return e.call(this,t)||this}(0,o.Z)(t,e);var n=t.prototype;return n.ready=function(){var e=new av(this.scene);this.scene.stateManager.transitionTo(e)},n.play=function(){var e=new rv(this.scene);this.scene.stateManager.transitionTo(e)},n.pause=function(){},n.rescue=function(){},n.gameOver=function(){},n.quit=function(){var e=new jf(this.scene);this.scene.stateManager.transitionTo(e)},n.nextLevel=function(){},n.update=function(e){},t}(zf),ev=$f,tv=function(e){function t(t){var n;return n=e.call(this,t)||this,t.itemManager.cancelActiveItem(),n.scene.numberOfRescue+=1,n.scene.audio.playSound(Xa.Z.YOU_LOSE),t.layoutManager.showRescueScreen(),t.itemManager.updateAvailableItems(),n}(0,o.Z)(t,e);var n=t.prototype;return n.logLevelRescue=function(){var e=this.scene,t=e.itemManager.getItemUsedCount(Lh[Dh.UNDO]),n=e.itemManager.getItemUsedCount(Lh[Dh.HAMMER]),i=e.itemManager.getItemUsedCount(Lh[Dh.REMOVE_SCREW]),r=e.itemManager.getItemUsedCount(Lh[Dh.REPLAY]);e.analytics.event(Z._.LEVEL_RESCUE,{level:e.level.getLevelWithStep(),undo_item_used:t,hammer_item_used:n,remove_screw_item_used:i,replay_item_used:r,level_play_time:e.timeManager.getPlayTime()})},n.ready=function(){var e=new av(this.scene);this.scene.stateManager.transitionTo(e)},n.play=function(){var e=new rv(this.scene);this.scene.stateManager.transitionTo(e),this.logLevelRescue()},n.pause=function(){},n.rescue=function(){},n.gameOver=function(){var e=new Qf(this.scene);this.scene.stateManager.transitionTo(e)},n.quit=function(){var e=new jf(this.scene);this.scene.stateManager.transitionTo(e)},n.nextLevel=function(){},n.update=function(e){},t}(zf),nv=tv,iv=function(e){function t(t){var n;return n=e.call(this,t)||this,t.setDisabledButton(!1),n.scene.guideManager.showLevelGuide(),n}(0,o.Z)(t,e);var n=t.prototype;return n.ready=function(){var e=new av(this.scene);this.scene.stateManager.transitionTo(e)},n.play=function(){},n.pause=function(){var e=new ev(this.scene);this.scene.stateManager.transitionTo(e)},n.rescue=function(){var e=new nv(this.scene);this.scene.stateManager.transitionTo(e)},n.gameOver=function(){var e=new Qf(this.scene);this.scene.stateManager.transitionTo(e)},n.quit=function(){var e=new jf(this.scene);this.scene.stateManager.transitionTo(e)},n.nextLevel=function(){var e=new Jf(this.scene);this.scene.stateManager.transitionTo(e)},n.update=function(e){this.scene.timeManager.update(e),this.scene.layoutManager.objects.header.update(),this.scene.updateGameplay(e),this.scene.checkGameState()},t}(zf),rv=iv,sv=(GameCore.Configs.Gameplay.ShowSwitchStepAnimation,function(e){function t(t){var n;return(n=e.call(this,t)||this).scene.level.getLevelData()?(n.scene.stopManager(),n.startGame()):n.scene.game.globalScene.events.emit(Or.K.SWITCH,Or.C.ERROR_SCENE),n.scene.player.getLevel()>=GameCore.Configs.Ads.MinLevelToShow&&(t.ads.preloadRewardedVideoAsync().catch((function(e){})),t.ads.preloadInterstitialAdAsync().catch((function(){}))),n}(0,o.Z)(t,e);var n=t.prototype;return n.startGame=function(){var e=this;this.scene.startGame();var t=this.scene.level;this.scene.layoutManager.objects.header.updateText(t.getLevel(),t.getStep()),this.scene.layoutManager.objects.header.update(),this.logLevelStart(),this.scene.level.preloadLevelDataAsync(t.getLevel()+1),this.scene.setDisabledButton(!0);var n=this.scene.registry.get(Bh),i=this.scene.registry.get(Nh);this.scene.runStartLevelAnimation(n,i,(function(){e.scene.time.delayedCall(50,(function(){e.scene.stateManager.play()}))}))},n.logLevelStart=function(){var e=this.scene,t=e.level.getLevel();e.analytics.event(Z._.LEVEL_START,{level:e.level.getLevelWithStep()}),e.facebook.log(Z._.LEVEL_START,t,{level:t})},n.ready=function(){},n.play=function(){var e=new rv(this.scene);this.scene.stateManager.transitionTo(e)},n.pause=function(){},n.rescue=function(){},n.gameOver=function(){},n.nextLevel=function(){},n.quit=function(){var e=new jf(this.scene);this.scene.stateManager.transitionTo(e)},n.update=function(e){},t}(zf)),av=sv,ov=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n.gameState=void 0,n.ready=function(){n.gameState.ready()},n.play=function(){n.gameState.play()},n.pause=function(){n.gameState.pause()},n.rescue=function(){n.gameState.rescue()},n.gameOver=function(){n.gameState.gameOver()},n.quit=function(){n.gameState.quit()},n.update=function(e){n.gameState.update(e)},n.nextLevel=function(){n.gameState.nextLevel()},n.scene=t,n}(0,o.Z)(t,e);var n=t.prototype;return n.transitionTo=function(e){this.gameState=e},n.init=function(){if(!this.gameState){var e=new av(this.scene);this.transitionTo(e)}this.gameState.ready()},n.isPlaying=function(){return this.gameState instanceof rv},n.isPaused=function(){return this.gameState instanceof ev},t}(Ba),cv=ov,lv=ka.STATUS,uv=GameCore.Configs.Items,hv=ja.Z.GAMEPLAY,dv=hv.KEY,pv=hv.FRAME,fv=function(e){function t(t){var n;return(n=e.call(this,t)||this).itemActive=void 0,n.isUsedItemLastTurn=!1,n.isUseReplayItem=!1,n.hintPanel=void 0,n.hintText=void 0,n.backgroundDark=void 0,n.init(),n.createBackgroundDark(),n.createHintPanel(),n.createHintText(),n}(0,o.Z)(t,e);var n=t.prototype;return n.init=function(){this.setState(lv.READY)},n.createBackgroundDark=function(){var e=this.scene.gameZone,t=e.width,n=e.height;this.backgroundDark=this.scene.add.image(0,0,dv,pv.BLANK).setDepth(za.Z.POPUP).setTint(0).setAlpha(.8),this.backgroundDark.setWorldSize(t,n),this.backgroundDark.kill(),Phaser.Display.Align.In.Center(this.backgroundDark,this.scene.gameZone),this.scene.world.isLandscape()&&on.Z.registerObject(this.backgroundDark)},n.createHintPanel=function(){var e=this.scene.gameZone,t=e.width,n=(e.height,pv.BACKGROUND_INFO),i=n.FILE,r=n.WIDTH,s=n.HEIGHT;this.hintPanel=this.scene.add.image(t/2,75,dv,i).setDepth(za.Z.POPUP),this.hintPanel.setWorldSize(r,s),this.hintPanel.kill()},n.createHintText=function(){this.hintText=new ho.Z(this.scene,{text:"Tap, hold and move the hammer!",fontSize:this.scene.fontSize(17),strokeColor:9851172,strokeThickness:2.4,strokeOffset:{y:.5}}).setDepth(za.Z.POPUP).setCenterAlign().setWordWrapWidth(this.hintPanel.width-20),Phaser.Display.Align.In.Center(this.hintText,this.hintPanel,0,-2),this.hintText.kill()},n.start=function(){if(!this.isRunning()){this.isUseReplayItem=!1;var e=this.scene.player.getItems();this.resetCountUseItems(),this.updateLimitItems(e),this.updateAvailableItems(),this.setState(lv.RUNNING),this.isUsedItemLastTurn=!1,this.itemActive&&(this.itemActive=void 0)}},n.updateAvailableItems=function(){if(!this.itemActive){var e=this.scene.layoutManager.objects.footer;this.updateRemoveScrewItem(),this.updateUndoItem(),this.updateHammerItem(),this.updateRelayItem(),e.alginItems()}},n.updateRemoveScrewItem=function(){var e=this.scene.layoutManager.objects.footer.removeScrewItem;e.getCountUseInMatch()>=uv.RemoveScrew.MaxScrew?e.enableItem(!1,!0):e.enableItem(!0,!1)},n.updateUndoItem=function(){var e=this.scene.layoutManager.objects.footer.undoItem,t=this.scene.screwManager.getIsCanUndo();e.enableItem(t,!1)},n.updateHammerItem=function(){var e=this.scene.layoutManager.objects.footer.hammerItem,t=this.scene.screwManager.getWoodsInBoard().length>0;e.enableItem(t,!1)},n.updateRelayItem=function(){var e=this.scene.level.getStep()>1;this.scene.layoutManager.objects.footer.replayItem.enableItem(e,!0)},n.stop=function(){this.isRunning()&&this.setState(lv.STOPPED)},n.getItem=function(e){var t=this.scene.layoutManager.objects.footer;switch(e){case"HammerItem":return t.hammerItem;case"RemoveScrewItem":return t.removeScrewItem;case"UndoItem":return t.undoItem;case"ReplayItem":return t.replayItem}},n.getItemUsedCount=function(e){var t=this.getItem(e);return(null==t?void 0:t.getCountUseInMatch())||0},n.activeItem=function(e){return!this.itemActive&&(this.itemActive=e,this.scene.timeManager.pause(),!0)},n.deActiveItem=function(){this.itemActive&&(this.itemActive=void 0)},n.getNameItemActive=function(){var e;return(null==(e=this.itemActive)?void 0:e.name)||""},n.updateLimitItems=function(e){var t=this.scene.layoutManager.objects.footer;t.hammerItem.setLimitCount(e.HammerItem),t.undoItem.setLimitCount(e.UndoItem),t.removeScrewItem.setLimitCount(e.RemoveScrewItem),t.replayItem.setLimitCount(e.ReplayItem)},n.getItemActive=function(){return this.itemActive},n.setUsedItemLastTurn=function(e){this.isUsedItemLastTurn=e},n.setUseReplayItem=function(e){this.isUseReplayItem=e},n.isReplayByItem=function(){return this.isUseReplayItem},n.resetCountUseItems=function(){var e=this.scene.layoutManager.objects.footer;e.hammerItem.resetCount(),e.undoItem.resetCount(),e.removeScrewItem.resetCount(),2!=this.scene.level.getStep()&&e.replayItem.resetCount()},n.setDisabledItems=function(e){var t=this.scene.layoutManager.objects.footer,n=!e;t.hammerItem.enableItem(n,!1),t.undoItem.enableItem(n,!1),t.removeScrewItem.enableItem(n,!1),t.replayItem.enableItem(n,!1)},n.runRemoveScrewAnimation=function(e,t,n){this.scene.layoutManager.objects.footer.removeScrewItem.runAnimation(e,t,n)},n.cancelActiveItem=function(){this.itemActive&&(this.itemActive.cancelUseItem(),this.deActiveItem())},n.showHintPanel=function(e){this.backgroundDark.setDepth(e.backgroundDepth),this.backgroundDark.setAlpha(e.backgroundAlpha||.8),this.backgroundDark.revive(),this.hintPanel.revive(),this.hintText.revive(),this.hintText.setText(e.content),this.scene.layoutManager.objects.footer.setDepth(e.footerDepth)},n.hideHintPanel=function(){this.backgroundDark.kill(),this.hintPanel.kill(),this.hintText.kill(),this.scene.layoutManager.objects.footer.setDepth(za.Z.BUTTON)},t}(Ba),vv=fv,mv=function(e){function t(t,n,i){var r;return(r=e.call(this,t,n)||this).timerDelayKill=void 0,r.maxLifeSpan=void 0,r.pool=void 0,r.key=void 0,r.maxLifeSpan=1e3,r.key=i,r.scene.add.existing((0,Ka.Z)(r)),r}return(0,o.Z)(t,e),t.prototype.reviveIn=function(e){var t,n=this;this.pool&&(this.maxLifeSpan=e,this.revive(),null==(t=this.timerDelayKill)||t.remove(),this.timerDelayKill=this.scene.time.delayedCall(this.maxLifeSpan,(function(){n.kill(),n.pool.despawn(n)})))},t}(Phaser.GameObjects.Particles.ParticleEmitterManager),gv=mv,yv=ja.Z.EFFECTS,Ev=yv.KEY,Sv=yv.FRAME,wv=function(e){function t(t){var n;return(n=e.call(this,t,Ev,"ClickExplodeParticle")||this).emitter=void 0,n.emitZone=void 0,n.createEmitZone(),n.setDepth(za.Z.ON_TOP),n.createExplodeAnimation(),n.scene.add.existing((0,Ka.Z)(n)),n}(0,o.Z)(t,e);var n=t.prototype;return n.createEmitZone=function(){this.emitZone=new Phaser.Geom.Circle(0,0,15)},n.createExplodeAnimation=function(){var e=1/this.scene.world.getPixelRatio(),t={frame:[Sv.FX_FIRE_WHITE],scaleY:{min:.2*e,max:.5*e},scaleX:{min:.2*e/2,max:.5*e/2},alpha:{start:1,end:0,ease:Phaser.Math.Easing.Quadratic.In},speed:{min:90,max:120},lifespan:{min:100,max:200},emitZone:{source:this.emitZone,type:"random"},tint:[16777215],particleClass:Iv,on:!1};this.emitter=this.createEmitter(t)},n.explode=function(e,t){this.reviveIn(500),this.emitter.explode(50,e,t)},t}(gv),Iv=function(e){function t(t){var n;return(n=e.call(this,t)||this).angle2=void 0,n}(0,o.Z)(t,e);var n=t.prototype;return n.fire=function(t,n){e.prototype.fire.call(this,t,n);var i=this.emitter,r=i.x,s=i.y;t||(t=r.defaultValue),n||(n=s.defaultValue);var a=Phaser.Math.Distance.Between(0,0,this.velocityX,this.velocityY),o=Math.atan2(this.y-n,this.x-t);this.velocityX=a*Math.cos(o),this.velocityY=a*Math.sin(o),this.rotation=o,this.angle2=o},n.update=function(t,n,i){var r=e.prototype.update.call(this,t,n,i);return this.rotation=this.angle2,r},t}(Phaser.GameObjects.Particles.Particle),Av=wv,Tv=ja.Z.GAMEPLAY,Cv=Tv.KEY,bv=Tv.FRAME,Pv=function(e){function t(t){var n;return(n=e.call(this,t,Cv,"IceExplodeParticle")||this).emitter=void 0,n.emitZone=void 0,n.createEmitZone(),n.setDepth(za.Z.ON_TOP),n.createExplodeAnimation(),n.scene.add.existing((0,Ka.Z)(n)),n}(0,o.Z)(t,e);var n=t.prototype;return n.createEmitZone=function(){this.emitZone=new Phaser.Geom.Circle(0,0,30)},n.createExplodeAnimation=function(){var e=1/this.scene.world.getPixelRatio(),t={frame:[bv.ICE_1_3],scale:{min:.07*e,max:.12*e},alpha:{start:1,end:0,ease:Phaser.Math.Easing.Quadratic.In},speed:{min:60,max:120},lifespan:{min:300,max:600},gravityY:120,emitZone:{source:this.emitZone,type:"random"},particleClass:xv,on:!1};this.emitter=this.createEmitter(t)},n.explode=function(e,t){this.reviveIn(600),this.emitter.explode(20,e,t)},t}(gv),xv=function(e){function t(t){var n;return(n=e.call(this,t)||this).angle2=void 0,n}(0,o.Z)(t,e);var n=t.prototype;return n.fire=function(t,n){e.prototype.fire.call(this,t,n);var i=this.emitter,r=i.x,s=i.y;t||(t=r.defaultValue),n||(n=s.defaultValue);var a=Phaser.Math.Distance.Between(0,0,this.velocityX,this.velocityY),o=Math.atan2(this.y-n,this.x-t);this.velocityX=a*Math.cos(o)/2,this.velocityY=2*Math.abs(a*Math.sin(o)),this.rotation=o,this.angle2=o},n.update=function(t,n,i){var r=e.prototype.update.call(this,t,n,i);return this.rotation=this.angle2,r},t}(Phaser.GameObjects.Particles.Particle),Rv=Pv,Ov=ja.Z.GAMEPLAY,_v=Ov.KEY,kv=Ov.FRAME,Dv=function(e){function t(t){var n;return(n=e.call(this,t,_v,"NumberLockExplodeParticle")||this).emitter=void 0,n.emitZone=void 0,n.createEmitZone(),n.setDepth(za.Z.ON_TOP),n.createExplodeAnimation(),n.scene.add.existing((0,Ka.Z)(n)),n}(0,o.Z)(t,e);var n=t.prototype;return n.createEmitZone=function(){this.emitZone=new Phaser.Geom.Circle(0,0,15)},n.createExplodeAnimation=function(){var e=1/this.scene.world.getPixelRatio(),t={frame:[kv.FX_BROKE_1,kv.FX_BROKE_2,kv.FX_BROKE_3,kv.FX_BROKE_4],scale:{min:.1*e,max:.4*e},alpha:{start:1,end:0,ease:Phaser.Math.Easing.Quadratic.In},speed:{min:30,max:60},lifespan:{min:200,max:400},gravityY:200,emitZone:{source:this.emitZone,type:"random"},tint:[10180123],particleClass:Lv,on:!1};this.emitter=this.createEmitter(t)},n.explode=function(e,t){this.reviveIn(500),this.emitter.explode(15,e,t)},t}(gv),Lv=function(e){function t(t){var n;return(n=e.call(this,t)||this).angle2=void 0,n}(0,o.Z)(t,e);var n=t.prototype;return n.fire=function(t,n){e.prototype.fire.call(this,t,n);var i=this.emitter,r=i.x,s=i.y;t||(t=r.defaultValue),n||(n=s.defaultValue);var a=Phaser.Math.Distance.Between(0,0,this.velocityX,this.velocityY),o=Math.atan2(this.y-n,this.x-t);this.velocityX=a*Math.cos(o),this.velocityY=a*Math.sin(o),this.rotation=o,this.angle2=o},n.update=function(t,n,i){var r=e.prototype.update.call(this,t,n,i);return this.rotation=this.angle2,r},t}(Phaser.GameObjects.Particles.Particle),Bv=Dv,Nv=ja.Z.GAMEPLAY,Hv=Nv.KEY,Mv=Nv.FRAME,Gv=function(e){function t(t){var n;return(n=e.call(this,t,Hv,"WoodExplodeParticle")||this).emitter=void 0,n.emitZone=void 0,n.createEmitZone(),n.setDepth(za.Z.FLYING_KEY+1),n.createExplodeAnimation(),n.scene.add.existing((0,Ka.Z)(n)),n}(0,o.Z)(t,e);var n=t.prototype;return n.createEmitZone=function(){this.emitZone=new Phaser.Geom.Circle(0,0,15)},n.createExplodeAnimation=function(){var e=1/this.scene.world.getPixelRatio(),t={frame:[Mv.FX_BROKE_2,Mv.FX_BROKE_3,Mv.FX_BROKE_4,Mv.FX_BROKE_5],scale:{min:.3*e,max:.75*e},alpha:{start:1,end:0,ease:Phaser.Math.Easing.Quadratic.In},speed:{min:50,max:70},lifespan:{min:400,max:800},gravityY:60,emitZone:{source:this.emitZone,type:"random"},particleClass:Wv,on:!1};this.emitter=this.createEmitter(t)},n.explode=function(e,t,n,i){this.reviveIn(800),this.emitter.setEmitZone({source:e,type:"random"}),this.emitter.setPosition(n,i),this.emitter.explode(t,0,0)},t}(gv),Wv=function(e){function t(t){var n;return(n=e.call(this,t)||this).angle2=void 0,n}(0,o.Z)(t,e);var n=t.prototype;return n.fire=function(t,n){e.prototype.fire.call(this,t,n);var i=this.emitter,r=i.x,s=i.y;t||(t=r.propertyValue),n||(n=s.propertyValue);var a=Phaser.Math.Distance.Between(0,0,this.velocityX,this.velocityY),o=Math.atan2(this.y-n,this.x-t);this.velocityX=a*Math.cos(o),this.velocityY=a*Math.sin(o),this.rotation=o,this.angle2=o},n.update=function(t,n,i){var r=e.prototype.update.call(this,t,n,i);return this.rotation=this.angle2,r},t}(Phaser.GameObjects.Particles.Particle),Uv=Gv,Fv=ja.Z.EFFECTS,Zv=Fv.KEY,Yv=Fv.FRAME,Vv=function(e){function t(t){var n;return(n=e.call(this,t,Zv,"WoodSplashParticle")||this).emitter=void 0,n.emitZone=void 0,n.createEmitZone(),n.setDepth(za.Z.SCREW-.5),n.createExplodeAnimation(),n.scene.add.existing((0,Ka.Z)(n)),n}(0,o.Z)(t,e);var n=t.prototype;return n.createEmitZone=function(){this.emitZone=new Phaser.Geom.Circle(0,0,15)},n.createExplodeAnimation=function(){var e=1/this.scene.world.getPixelRatio(),t={frame:[Yv.FX_STAR],scale:{min:.3*e,max:.8*e},alpha:{start:.5,end:1,ease:Phaser.Math.Easing.Expo.Out},speed:{min:900,max:1600},lifespan:{min:1200,max:1500},gravityY:210,emitZone:{source:this.emitZone,type:"random"},angle:{start:240,end:300,steps:40},rotate:{min:-100,max:100},maxParticles:0,particleClass:zv,on:!1};this.emitter=this.createEmitter(t)},n.explode=function(e,t,n,i,r,s,a){void 0===i&&(i=0),void 0===r&&(r=1),void 0===s&&(s=1),void 0===a&&(a=1),this.reviveIn(1500),i=Phaser.Math.Clamp(i,-90,90),this.emitter.setAngle({start:240+i,end:300+i,steps:1*e}),this.emitter.setGravityX(400*Math.sin(i*Math.PI/180)*s),this.emitter.setGravityY(400-120*r-150*(a-1)),this.emitter.explode(e,t,n)},t}(gv),zv=function(e){function t(t){var n;return(n=e.call(this,t)||this).windX=1,n.airFrictionX=.1,n.airFrictionY=.01,n.lastRotation=0,n.startScaleX=0,n.startScaleY=0,n.randomScalePhase=0,n.airFrictionX=.03*Math.random()+.04,n.airFrictionY=.004*Math.pow(Math.random(),2)+.01,(0,Ka.Z)(n)||(0,Ka.Z)(n)}(0,o.Z)(t,e);var n=t.prototype;return n.fire=function(t,n){return e.prototype.fire.call(this,t,n),this.startScaleX=this.scaleX,this.startScaleY=this.scaleY,this.randomScalePhase=Math.random()*Math.PI*3,this},n.update=function(t,n,i){for(var r=e.prototype.update.call(this,t,n,i),s=t;s>16.67;)this.velocityX-=Kv(this.velocityX,.2,this.airFrictionX)/60,this.velocityY-=Kv(this.velocityY,.2,this.airFrictionY)/60,s-=16.67;this.velocityX-=Kv(this.velocityX,.2,this.airFrictionX)*s/1e3,this.velocityY-=Kv(this.velocityY,.2,this.airFrictionY)*s/1e3,this.rotation=this.lastRotation+Math.random()*Math.PI/180*4,this.lastRotation=this.rotation;var a=(3.5*this.lifeT+this.randomScalePhase/(2*Math.PI))/3.5;if(a>1)this.scaleX=0,this.scaleY=0;else{var o=1*(1-Phaser.Math.Easing.Expo.In(Math.min(1,a))),c=Math.sin(a*Math.PI*3.5)+1+o;this.scaleX=this.startScaleX*c,this.scaleY=this.startScaleY*c}return r},t}(Phaser.GameObjects.Particles.Particle),Kv=function(e,t,n){return void 0===t&&(t=.1),void 0===n&&(n=.04),t*e+mh()(e)*n*e*e},jv=Vv,Xv=function(){function e(e){this.scene=void 0,this.particleDead=void 0,this.scene=e,this.particleDead={}}var t=e.prototype;return t.init=function(e,t,n){var i=this.getParticleByKey(e);if(i&&(this.particleDead[e]||(this.particleDead[e]=[]),!(void 0!=n&&this.particleDead[e].length>=n)))for(var r=0;r<t;r++){var s=new i(this.scene);s.pool=this,s.kill(),this.particleDead[e].push(s)}},t.spawn=function(e){return this.particleDead[e]&&0!==this.particleDead[e].length||this.init(e,1),this.particleDead[e].pop()},t.despawn=function(e){e.kill(),this.particleDead[e.key].push(e)},t.getParticleByKey=function(e){switch(e){case"WoodExplodeParticle":return Uv;case"WoodSplashParticle":return jv;case"IceExplodeParticle":return Rv;case"NumberLockExplodeParticle":return Bv;case"ClickExplodeParticle":return Av;default:throw new Error("Wrong key particle, please check!")}},e}(),Qv=Xv,qv=ja.Z.GAMEPLAY,Jv=qv.KEY,$v=qv.FRAME,em=function(e){function t(t,n,i){var r;return void 0===n&&(n=$v.BOARD.WIDTH),void 0===i&&(i=$v.BOARD.HEIGHT),(r=e.call(this,t,0,0)||this).boardNineSlice=void 0,r.leftWidth=115/3,r.rightWidth=115/3,r.topHeight=39,r.bottomHeight=39,r.handleClickOnBoard=function(e){if(r.scene.stateManager.isPlaying()){var t=e.worldX,n=e.worldY;r.runExplodeParticle(t,n),r.scene.screwManager.handleBoardClick(t,n)}},r.setSize(n,i),r.createBoard(),r.listenInput(),r.scene.add.existing((0,Ka.Z)(r)),r}(0,o.Z)(t,e);var n=t.prototype;return n.createBoard=function(){var e=this.scene.world.getPixelRatio();this.boardNineSlice=this.scene.add.nineslice(0,0,Jv,$v.BOARD.FILE,this.width*e,this.height*e,this.leftWidth*e,this.rightWidth*e,this.topHeight*e,this.bottomHeight*e),this.boardNineSlice.setScale(1/e),this.boardNineSlice.setPosition(17/6,0),this.add(this.boardNineSlice)},n.listenInput=function(){var e=this;this.setInteractive({useHandCursor:!0});var t=!1;this.on(Phaser.Input.Events.GAMEOBJECT_POINTER_DOWN,(function(){t=!0})),this.on(Phaser.Input.Events.GAMEOBJECT_POINTER_OUT,(function(){t=!1})),this.on(Phaser.Input.Events.GAMEOBJECT_POINTER_UP,(function(n){t&&e.handleClickOnBoard(n)}))},n.runExplodeParticle=function(e,t){this.scene.particlePool.spawn("ClickExplodeParticle").explode(e,t)},n.getBasePosition=function(){var e=this.getWorldPosition();return{x:e.x,y:e.y+30}},t}(Phaser.GameObjects.Container),tm=em,nm=ja.Z.GAMEPLAY,im=nm.KEY,rm=nm.FRAME,sm=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n.step=0,n.currentGuideConfigs=void 0,n.closeGuide=function(){var e,t,i;n.currentGuideConfigs=[],n.step=0,null==(e=n.arrow)||e.kill(),null==(t=n.text)||t.kill(),null==(i=n.arrowAnimation)||i.remove()},n.arrow=void 0,n.arrowAnimation=void 0,n.text=void 0,n.scene=t,n}(0,o.Z)(t,e);var n=t.prototype;return n.init=function(){e.prototype.init.call(this)},n.start=function(){e.prototype.start.call(this)},n.stop=function(){e.prototype.stop.call(this)},n.reset=function(){this.closeGuide()},n.clearEventListeners=function(){Yu.removeListener(kf.CHOOSE_SCREW),Yu.removeListener(kf.CANCEL_SCREW)},n.showLevelGuide=function(){var e=this.scene.level,t=this.scene.level.getLevelData();if(t){var n=t.steps[e.getStep()-1];this.showGuide(n.guides)}},n.showGuide=function(e){var t=this;if(e&&0!==(null==e?void 0:e.length)){this.currentGuideConfigs=e;var n=e[0];n.condition?Yu.on(n.condition,(function(){t.step=-1,t.createListenEventsForNextGuide(n)})):this.createGuide(n)}},n.createGuide=function(e){var t;if(e){if(this.clearEventListeners(),e.arrowConfig){var n=e.arrowConfig;this.createArrow(n)}else{var i,r;null==(i=this.arrow)||i.kill(),null==(r=this.arrowAnimation)||r.remove()}if(e.textConfig){var s=e.textConfig;this.createText(s)}else null==(t=this.text)||t.kill();if(this.step+1<this.currentGuideConfigs.length){var a=this.currentGuideConfigs[this.step+1],o=this.currentGuideConfigs[this.step];this.step>0&&o.condition&&a.condition&&o.condition!==a.condition&&this.createListenEventsForPrevGuide(o),this.createListenEventsForNextGuide(a)}}},n.showNextGuide=function(){this.step++,this.step>=this.currentGuideConfigs.length?this.closeGuide():this.createGuide(this.currentGuideConfigs[this.step])},n.createListenEventsForPrevGuide=function(e){var t=this;e&&e.previousCondition&&Yu.on(e.previousCondition,(function(){t.step--;var e=t.currentGuideConfigs[t.step];t.createGuide(e)}))},n.createListenEventsForNextGuide=function(e){var t=this;e&&e.condition&&Yu.on(e.condition,(function(){t.step++,t.createGuide(e)}))},n.createArrow=function(e){var t;if(!this.arrow){var n=rm.GUIDE_ARROW,i=n.FILE,r=n.WIDTH,s=n.HEIGHT;this.arrow=this.scene.add.image(0,0,im,i).setDepth(za.Z.EFFECT).setOrigin(.5,1),this.arrow.setWorldSize(.75*r,.75*s)}this.arrow.revive(),this.arrow.setPosition(0,0);var a=e.destination,o=0,c=0;if("woodId"in a){var l=this.scene.woods[a.woodId],u=a.offsetX||0,h=a.offsetY||0;l&&(o=l.x+u,c=l.y+h)}else if("holeId"in a){var d=this.scene.screwManager.getHoleScrewById(a.holeId),p=a.offsetX||0,f=a.offsetY||0;d&&(o=d.x+p,c=d.y+f)}else o=a.x,c=a.y;this.arrow.setPosition(e.offsetX+o,e.offsetY+c);var v=Phaser.Math.Angle.Between(this.arrow.x,this.arrow.y,o,c);this.arrow.setAngle(Phaser.Math.RadToDeg(v)-90),null==(t=this.arrowAnimation)||t.remove(),e.isAnimation&&(this.arrowAnimation=this.scene.tweens.add({targets:this.arrow,x:o,y:c,duration:500,repeat:-1,yoyo:!0}))},n.createText=function(e){this.text||(this.text=new ho.Z(this.scene,{text:"",fontSize:this.scene.fontSize(22),strokeColor:0,strokeAlpha:.5,strokeThickness:2.4,strokeOffset:{y:.5},origin:{x:.5,y:.5}}).setCenterAlign()),this.text.revive(),this.text.setText(e.text);var t=this.scene.board.getWorldPosition(),n=this.scene.board,i=(n.width,n.height);this.text.setPosition(t.x,t.y-i/2+30)},n.openGuideScreen=function(e,t){},n.hasGuide=function(){return this.currentGuideConfigs.length>0},t}(Ba),am=sm,om=function(e){function t(t,n,i,r,s){var a;return void 0===r&&(r=""),void 0===s&&(s=""),(a=e.call(this,t,n,i,r,s)||this).objectType=void 0,a.holeScrew=void 0,a.key=void 0,a.isKilled=!1,a.isAvailable=!0,a.depthIndex=0,a.status=void 0,a.fadeOutAfterDropTween=void 0,a.scene.add.existing((0,Ka.Z)(a)),a}(0,o.Z)(t,e);var n=t.prototype;return n.initDefault=function(e){var t;return void 0===e&&(e=0),null==(t=this.fadeOutAfterDropTween)||t.remove(),this.status=e,this.isKilled=!1,this.isAvailable=!0,this},n.setHoleScrew=function(e){this.holeScrew=e,this.setPosition(e.x,e.y),this.setScale(e.scaleX,e.scaleY)},n.setAvailable=function(e){this.isAvailable=e},n.getHoleScrew=function(){return this.holeScrew},n.getHoleScrewId=function(){return void 0!==this.holeScrew?this.holeScrew.id:-1},n.isBlockHole=function(){return!1},n.updateAfterScrewMove=function(){},n.explode=function(){return l().resolve()},n.postUpdate=function(){},n.kill=function(){e.prototype.kill.call(this),this.isKilled=!0,this.holeScrew=void 0},n.updateDepthObjects=function(e){this.setDepth(e+this.depthIndex)},n.onWoodOutOfBoard=function(){},n.onScrewMoveAway=function(){},n.onScrewRemoved=function(){},n.getUI=function(){return[this]},t}(Phaser.GameObjects.Image),cm=om,lm=ja.Z.GAMEPLAY,um=lm.KEY,hm=lm.FRAME,dm=function(e){function t(t){var n;return(n=e.call(this,t,0,0,um,hm.ICE_FULL)||this).health=2,n.baseWoodOnHoles=[],n.originalCount=0,n.objectType="Ice",n.setWorldSize(64,61.25),n.updateDepthObjects(za.Z.SCREW+1),n}(0,o.Z)(t,e);var n=t.prototype;return n.initDefault=function(){var t,n,i=this;e.prototype.initDefault.call(this),this.setFrame(hm.ICE_FULL),this.setHealth(2);var r=null==(t=this.holeScrew)?void 0:t.getScrew(),s=(null==r?void 0:r.depth)||za.Z.SCREW;this.updateDepthObjects(s+za.Z.HOLE_OBJECT_ADDED),this.originalCount=0,this.baseWoodOnHoles=this.scene.screwManager.getWoodsOnHole(this.getHoleScrewId()),this.baseWoodOnHoles=_e()(n=this.baseWoodOnHoles).call(n,(function(e){var t;return e.isWoodConstraintByScrews()&&!(e.isOverlay&&i.scene.screwManager.isHoleOverlayByWood((null==(t=i.holeScrew)?void 0:t.id)||-1,e.config.id))}));var a=this.baseWoodOnHoles.length;this.originalCount=this.baseWoodOnHoles.length;var o,c=a-this.originalCount;this.originalCount<1||c>=2?(null==(o=this.holeScrew)||o.removeHoleObject(this.objectType),this.kill()):1!==c&&1!==this.originalCount||this.setHealth(1);return this},n.setHealth=function(e){this.health=e,1==e?this.setFrame(hm.ICE_2_3):2==e&&this.setFrame(hm.ICE_FULL)},n.lowerHealth=function(e){e<=0||(this.health-=e,this.health<=0?this.explode():(this.setHealth(this.health),this.runIceBreakParticle()))},n.runIceBreakParticle=function(){this.scene.particlePool.spawn("IceExplodeParticle").explode(this.x,this.y)},n.explode=function(){var e=this;return new(l())((function(t){var n;e.runIceBreakParticle(),null==(n=e.holeScrew)||n.removeHoleObject(e.objectType),e.kill(),t()}))},n.setScale=function(e,t){return t||(t=e),this.setWorldSize(64*e,61.25*t),this},n.isBlockHole=function(){return!0},n.updateAfterScrewMove=function(){var e;this.baseWoodOnHoles=_e()(e=this.baseWoodOnHoles).call(e,(function(e){return e.isWoodConstraintByScrews()}));var t=this.baseWoodOnHoles.length,n=this.originalCount-t;this.originalCount=t,this.lowerHealth(n)},t}(cm),pm=dm,fm=ja.Z.GAMEPLAY,vm=fm.KEY,mm=fm.FRAME,gm=function(e){function t(t){var n;return(n=e.call(this,t,0,0,vm,mm.SCREW_LOCK)||this).numberLock=2,n.text=void 0,n.plusOneText=void 0,n.addTween=void 0,n.runAddAnimation=function(){n.addTween&&n.addTween.isPlaying()||(n.addTween=n.scene.tweens.add({targets:n.plusOneText,ease:Phaser.Math.Easing.Back.Out,props:{y:"-=20"},duration:400,onStart:function(){n.plusOneText.setPosition(n.x,n.y).setAlpha(1),n.plusOneText.revive()},onComplete:function(){n.plusOneText.kill(),n.addTween=void 0}}))},n.objectType="NumberLock",n.setWorldSize(116,116),n.createText(),n.updateDepthObjects(za.Z.SCREW+1),n}(0,o.Z)(t,e);var n=t.prototype;return n.createText=function(){this.text=new ho.Z(this.scene,{text:"0",fontSize:this.scene.fontSize(30)}),this.text.setOrigin(.5,.5).kill(),this.plusOneText=new ho.Z(this.scene,{text:"+1",fontSize:this.scene.fontSize(30)}),this.plusOneText.setOrigin(.5,.5).setTint(8183809).kill()},n.kill=function(){e.prototype.kill.call(this),this.text.kill()},n.setHoleScrew=function(t){e.prototype.setHoleScrew.call(this,t),this.text.setPosition(t.x,t.y),this.text.setScale(t.scaleX,t.scaleY),this.plusOneText.setScale(t.scaleX,t.scaleY)},n.initDefault=function(){var t;e.prototype.initDefault.call(this),this.text.setText(this.numberLock.toString()),this.text.revive();var n=null==(t=this.holeScrew)?void 0:t.getScrew(),i=(null==n?void 0:n.depth)||za.Z.SCREW;return this.updateDepthObjects(i+za.Z.HOLE_OBJECT_ADDED),this},n.setNumberLock=function(e){this.numberLock=e},n.setAvailable=function(e){this.isAvailable=e,e?this.text.revive():this.text.kill()},n.lowerHealth=function(){this.numberLock<=0||(this.numberLock-=1,this.text.setText(this.numberLock.toString()),this.runAddAnimation(),this.numberLock<=0&&this.explode())},n.runNumberLockBreakParticle=function(){this.scene.particlePool.spawn("NumberLockExplodeParticle").explode(this.x,this.y)},n.explode=function(){var e=this;return new(l())((function(t){var n;e.runNumberLockBreakParticle(),null==(n=e.holeScrew)||n.removeHoleObject(e.objectType),e.kill(),t()}))},n.setScale=function(e,t){return t||(t=e),this.setWorldSize(58*e,58*t),this},n.isBlockHole=function(){return!0},n.onWoodOutOfBoard=function(){this.isKilled||this.lowerHealth()},n.updateDepthObjects=function(t){e.prototype.updateDepthObjects.call(this,t),this.text.setDepth(this.depth+1),this.plusOneText.setDepth(za.Z.EFFECT)},n.getUI=function(){return[this,this.text]},t}(cm),ym=gm,Em=ja.Z.GAMEPLAY,Sm=Em.KEY,wm=Em.FRAME,Im=function(e){function t(t){var n;return(n=e.call(this,t,0,0,Sm,wm.FLYING_KEY)||this).config=void 0,n.rectangle=void 0,n.flyingLock=void 0,n.isFlying=!1,n.objectType="FlyingKey",n.setWorldSize(69.5,35.5),n.updateDepthObjects(za.Z.FLYING_KEY),n}(0,o.Z)(t,e);var n=t.prototype;return n.updateConfig=function(e,t){var n,i,r=GameCore.Configs.Gameplay.ScaleFactor;this.initDefault(),this.config=e,this.setWorldSize(69.5*e.scaleX*r,35.5*e.scaleY*r),this.setAngle(-e.angle),this.setPosition(50*r*e.x+t.x,-50*r*e.y+t.y),this.rectangle=new Phaser.Geom.Rectangle,this.getBounds(this.rectangle),this.isFlying=!1,this.holeScrew=this.scene.screwManager.getHoleScrewById(e.holeId),null==(n=this.holeScrew)||n.addInstanceHoleObject(this),this.flyingLock=null==(i=this.holeScrew)?void 0:i.getHoleObject("FlyingKeyLock")},n.runUnlockHole=function(){var e,t,n=this,i=(null==(e=this.holeScrew)?void 0:e.x)||0,r=(null==(t=this.holeScrew)?void 0:t.y)||0;return new(l())((function(e){n.scene.tweens.add({targets:n,duration:600,ease:Phaser.Math.Easing.Sine.Out,x:i,y:r,onComplete:function(){var t,i;null==(t=n.holeScrew)||t.removeHoleObject(n.objectType),n.kill(),null==(i=n.flyingLock)||i.unlock(),e()}})}))},n.postUpdate=function(){if(e.prototype.postUpdate.call(this),!this.isKilled&&this.holeScrew&&this.flyingLock&&this.rectangle&&this.isAvailable&&!this.isFlying){var t=this.rectangle.getPoints(10);this.scene.screwManager.isPointsInAnyWood(t)&&(this.isFlying=!0,this.runUnlockHole())}},n.hitByLightning=function(){this.isFlying=!0,this.runUnlockHole()},t}(cm),Am=Im,Tm=ja.Z.GAMEPLAY,Cm=Tm.KEY,bm=Tm.FRAME,Pm=function(e){function t(t){var n;return(n=e.call(this,t,0,0,Cm,bm.LOCK_FLYING)||this).objectType="FlyingKeyLock",n.setWorldSize(41.5,41.5),n.updateDepthObjects(za.Z.SCREW+1),n}(0,o.Z)(t,e);var n=t.prototype;return n.initDefault=function(t){var n;e.prototype.initDefault.call(this,t);var i=null==(n=this.holeScrew)?void 0:n.getScrew(),r=(null==i?void 0:i.depth)||za.Z.SCREW;return this.updateDepthObjects(r+za.Z.HOLE_OBJECT_ADDED),this},n.setScale=function(e,t){return t||(t=e),this.setWorldSize(46.5*e,46.5*t),this},n.isBlockHole=function(){return!0},n.unlock=function(){var e=this;return new(l())((function(t){var n;null==(n=e.holeScrew)||n.removeHoleObject(e.objectType),e.kill(),t()}))},t}(cm),xm=Pm,Rm=ja.Z.GAMEPLAY,Om=Rm.KEY,_m=Rm.FRAME,km=function(e){function t(t){var n;return(n=e.call(this,t,0,0,Om,_m.SCREW_LOCK)||this).color=void 0,n.screwPoolType=void 0,n.lock=void 0,n.health=1,n.objectType="LockKey",n.setWorldSize(116,116),n.createLockImage(),n.updateDepthObjects(za.Z.SCREW+1),n}(0,o.Z)(t,e);var n=t.prototype;return n.createLockImage=function(){this.lock=this.scene.add.image(0,0,Om,_m.YELLOW_LOCK_1),this.lock.setWorldSize(40,46)},n.kill=function(){e.prototype.kill.call(this),this.lock.kill()},n.setHoleScrew=function(t){e.prototype.setHoleScrew.call(this,t),this.lock.setPosition(t.x,t.y)},n.setLockType=function(e){this.screwPoolType=e,this.setLockColorByType()},n.setAvailable=function(e){this.isAvailable=e,e?this.lock.revive():this.lock.kill()},n.setLockColorByType=function(){var e=[23,33],t=[26],n=[24,34,35],i=[27,41],r=[25,37],s=[28,42,43];return Ae()(e).call(e,this.screwPoolType)?(this.lock.setFrame(_m.YELLOW_LOCK_1),this.color="Yellow",void(this.health=1)):Ae()(t).call(t,this.screwPoolType)?(this.lock.setFrame(_m.YELLOW_LOCK_2),this.color="Yellow",void(this.health=2)):Ae()(n).call(n,this.screwPoolType)?(this.lock.setFrame(_m.BLUE_LOCK_1),this.color="Blue",void(this.health=1)):Ae()(i).call(i,this.screwPoolType)?(this.lock.setFrame(_m.BLUE_LOCK_2),this.color="Blue",void(this.health=2)):Ae()(r).call(r,this.screwPoolType)?(this.lock.setFrame(_m.RED_LOCK_1),this.color="Red",void(this.health=1)):Ae()(s).call(s,this.screwPoolType)?(this.lock.setFrame(_m.RED_LOCK_2),this.color="Red",void(this.health=2)):void 0},n.initDefault=function(){var t;e.prototype.initDefault.call(this),this.lock.revive();var n=null==(t=this.holeScrew)?void 0:t.getScrew(),i=(null==n?void 0:n.depth)||za.Z.SCREW;return this.updateDepthObjects(i+za.Z.HOLE_OBJECT_ADDED),this},n.runNumberLockBreakParticle=function(){this.scene.particlePool.spawn("NumberLockExplodeParticle").explode(this.x,this.y)},n.explode=function(){var e=this;if(this.health<=0)return new(l())((function(t){var n;e.runNumberLockBreakParticle(),null==(n=e.holeScrew)||n.removeHoleObject(e.objectType),e.kill(),t()}));if(1===this.health){var t="Yellow"===this.color?_m.YELLOW_LOCK_1:"Blue"===this.color?_m.BLUE_LOCK_1:_m.RED_LOCK_1;this.lock.setFrame(t)}return l().resolve()},n.setScale=function(e,t){return t||(t=e),this.setWorldSize(58*e,58*t),this.lock.setWorldSize(40*e,46*t),this},n.isBlockHole=function(){return!0},n.isLocked=function(){return this.health>0},n.unlock=function(){this.health-=1},n.updateDepthObjects=function(t){e.prototype.updateDepthObjects.call(this,t),this.lock.setDepth(this.depth+1)},t}(cm),Dm=km;function Lm(e,t){var n="undefined"!==typeof T()&&b()(e)||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){var n;if(!e)return;if("string"===typeof e)return Bm(e,t);var i=S()(n=Object.prototype.toString.call(e)).call(n,8,-1);"Object"===i&&e.constructor&&(i=e.constructor.name);if("Map"===i||"Set"===i)return I()(e);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return Bm(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var i=0;return function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Bm(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var Nm=ja.Z.GAMEPLAY,Hm=Nm.KEY,Mm=Nm.FRAME,Gm=function(e){function t(t){var n;return(n=e.call(this,t,0,0,Hm,Mm.YELLOW_KEY)||this).color=void 0,n.screwPoolType=void 0,n.screw=void 0,n.isFlying=!1,n.idleAnimation=void 0,n.objectType="Key",n.setWorldSize(28,54),n.updateDepthObjects(za.Z.SCREW+1),n.setOrigin(.65,0),n}(0,o.Z)(t,e);var n=t.prototype;return n.initDefault=function(t){var n;return e.prototype.initDefault.call(this,t),this.isFlying=!1,this.screw=null==(n=this.holeScrew)?void 0:n.getScrew(),this.runIdleAnimation(),this},n.kill=function(){var t;e.prototype.kill.call(this),null==(t=this.idleAnimation)||t.remove()},n.setKeyType=function(e){this.screwPoolType=e,this.setColorByType()},n.setColorByType=function(){var e=[29,34,42],t=[30,37,43],n=[31,33,35,41];return Ae()(e).call(e,this.screwPoolType)?(this.setFrame(Mm.YELLOW_KEY,!1,!1),void(this.color="Yellow")):Ae()(t).call(t,this.screwPoolType)?(this.setFrame(Mm.BLUE_KEY,!1,!1),void(this.color="Blue")):Ae()(n).call(n,this.screwPoolType)?(this.setFrame(Mm.RED_KEY,!1,!1),void(this.color="Red")):void 0},n.setScale=function(e,t){return t||(t=e),this.setWorldSize(28*e,54*t),this},n.postUpdate=function(){if(e.prototype.postUpdate.call(this),this.screw&&!this.isFlying){var t=this.screw.getScrewPosition();this.x=t.x,this.y=t.y+10;var n=this.screw.getIsScrewUp()?this.screw.depth+1:this.screw.depth+za.Z.HOLE_OBJECT_ADDED+.1;this.updateDepthObjects(n)}},n.onScrewRemoved=function(){this.onScrewMoveAway()},n.onScrewMoveAway=function(){var e;if(!this.isKilled){this.isFlying=!0,null==(e=this.idleAnimation)||e.remove();for(var t,n,i,r,s=Lm(this.scene.screwManager.getHoleScrews());!(i=s()).done;){var a=i.value;if(a&&a.getIsHasScrew()){var o=a.getHoleObject("LockKey");if(o&&o.isLocked()&&o.color===this.color){n=o,t=a;break}}}if(!t||!n)return null==(r=this.holeScrew)||r.removeHoleObject(this.objectType),void this.kill();this.runUnlockHole(t,n)}},n.runIdleAnimation=function(){var e;null==(e=this.idleAnimation)||e.remove();var t=-Math.PI/12,n=Math.PI/12;this.idleAnimation=this.scene.tweens.add({targets:[this],yoyo:!0,repeat:-1,duration:600,repeatDelay:50,ease:Phaser.Math.Easing.Sine.InOut,props:{rotation:{from:t,to:n,start:t}}})},n.runUnlockHole=function(e,t){var n=this;t.unlock();var i=e.x,r=e.y;return this.updateDepthObjects(za.Z.FLYING_KEY),new(l())((function(e){n.scene.tweens.add({targets:n,duration:500,ease:Phaser.Math.Easing.Sine.Out,rotation:{from:n.rotation,to:Math.PI/2,duration:300},scale:{from:n.scale,to:.8*n.scale,duration:300},x:i+50,y:r,onComplete:function(){n.scene&&n&&n.scene.tweens.add({targets:n,duration:200,x:i+10,ease:Phaser.Math.Easing.Quadratic.InOut,onComplete:function(){var i;null==(i=n.holeScrew)||i.removeHoleObject(n.objectType),n.kill(),t.explode(),e()}})}})}))},t}(cm),Wm=Gm,Um=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n.scene=t,n.scene.add.existing((0,Ka.Z)(n)),n.setActive(!0),n.listenEvents(),n}(0,o.Z)(t,e);var n=t.prototype;return n.listenEvents=function(){this.scene.events.off(Phaser.Scenes.Events.POST_UPDATE,this.postUpdate,this),this.scene.events.on(Phaser.Scenes.Events.POST_UPDATE,this.postUpdate,this)},n.postUpdate=function(){this.getMatching("active",!0).forEach((function(e){e.isKilled||e.postUpdate()}))},n.spawn=function(e){var t=this.getMatching("objectType",e),n=O()(t).call(t,(function(e){return!e.active&&!e.holeScrew}));return n||(n=this.createHoleObject(e)),n.revive(),n},n.reset=function(){this.getChildren().forEach((function(e){e.holeScrew=void 0,e.active&&e.kill()}))},n.createHoleObject=function(e){var t;switch(e){case"Ice":t=new pm(this.scene);break;case"NumberLock":t=new ym(this.scene);break;case"FlyingKey":t=new Am(this.scene);break;case"FlyingKeyLock":t=new xm(this.scene);break;case"Key":t=new Wm(this.scene);break;case"LockKey":t=new Dm(this.scene)}return this.add(t),t},n.getChildren=function(){return e.prototype.getChildren.call(this)},t}(Phaser.GameObjects.Group),Fm=Um,Zm=ja.Z.GAMEPLAY,Ym=Zm.KEY,Vm=Zm.FRAME,zm=function(){function e(e){this.scene=void 0,this.textWin=void 0,this.iconWin=void 0,this.backgroundWin=void 0,this.scene=e,this.createUI(),this.scene.world.isLandscape()&&on.Z.registerObject(this.backgroundWin)}var t=e.prototype;return t.createUI=function(){this.createBackgroundWin(),this.createIconWin(),this.createTextWin()},t.createTextWin=function(){var e=Vm.TEXT_GOOD_JOB,t=e.FILE,n=e.WIDTH,i=e.HEIGHT;this.textWin=this.scene.add.image(0,0,Ym,t).setDepth(za.Z.POPUP).setAlpha(0),this.textWin.setWorldSize(n,i),Phaser.Display.Align.In.Center(this.textWin,this.scene.gameZone,0,-70)},t.createIconWin=function(){var e=Vm.ICON_CROWN,t=e.FILE,n=e.WIDTH,i=e.HEIGHT;this.iconWin=this.scene.add.image(0,0,Ym,t).setDepth(za.Z.POPUP).setAlpha(0),this.iconWin.setWorldSize(n,i),Phaser.Display.Align.In.Center(this.iconWin,this.scene.gameZone)},t.createBackgroundWin=function(){var e=this.scene.gameZone,t=e.width,n=e.height;this.backgroundWin=this.scene.add.image(0,0,Ym,Vm.BLANK).setDepth(za.Z.POPUP-1).setTint(0).setAlpha(0),this.backgroundWin.setWorldSize(t,n),this.backgroundWin.setInteractive(),Phaser.Display.Align.In.Center(this.backgroundWin,this.scene.gameZone)},t.runBackgroundWinAnimation=function(e,t,n,i){var r;void 0===e&&(e=0),void 0===t&&(t=.8),void 0===n&&(n=300),void 0===i&&(i=0),e!==t&&this.backgroundWin&&(null==(r=this.backgroundWin)?void 0:r.alpha)!==t&&this.scene.tweens.add({targets:[this.backgroundWin],alpha:t,duration:n,delay:i})},t.play=function(e){var t=this,n=0,i=function(){2===++n&&(t.runBackgroundWinAnimation(.8,0,300,0),e&&e())};this.scene.tweens.add({delay:200,targets:[this.textWin,this.iconWin],alpha:1,duration:250,onComplete:function(){t.scene.tweens.add({delay:700,targets:[t.textWin,t.iconWin],alpha:0,duration:300,onComplete:function(){i()}})}}),this.scene.tweens.add({targets:[this.backgroundWin],alpha:.8,duration:700,onComplete:function(){i()}})},e}(),Km=zm,jm=function(){function e(e){this.allowVibration=void 0,this.initAllowVibrate(e)}var t=e.prototype;return t.setAllowVibrate=function(e){this.allowVibration=e},t.initAllowVibrate=function(e){var t=e.player.getPlayerSettings().vibrate;this.allowVibration=t},t.handleUseHammer=function(){this.allowVibration&&iu(350)},t.handleWoodOut=function(){this.allowVibration&&iu(100)},t.handleWarning=function(){this.allowVibration&&iu(200)},e}(),Xm=jm,Qm=ja.Z.GAMEPLAY,qm=Qm.KEY,Jm=Qm.FRAME,$m=function(e){function t(t){var n;return(n=e.call(this,t,0,0)||this).hole=void 0,n.holeInside=void 0,n.plusIcon=void 0,n.config=void 0,n.createUI(),n.setSize(n.hole.width,n.hole.height),n.scene.add.existing((0,Ka.Z)(n)),n.setDepth(za.Z.HOLE),n}(0,o.Z)(t,e);var n=t.prototype;return n.createUI=function(){this.createHole(),this.createPlusIcon(),this.add([this.holeInside,this.hole,this.plusIcon]),Phaser.Display.Align.In.TopRight(this.plusIcon,this.hole,10,10)},n.updateConfig=function(e,t){var n=GameCore.Configs.Gameplay.ScaleFactor;this.config=e,this.setScale(e.scaleX*n*1.125,e.scaleY*n*1.125),this.setPosition(t.x+50*e.x*n,t.y+-1*e.y*50*n),this.setAdsHole(1===e.hasAdsHole)},n.createHole=function(){this.hole=this.scene.add.image(0,0,qm,Jm.WOOD_NUT_HOLE_GOLD),this.hole.setWorldSize(46.5,46.5),this.holeInside=this.scene.add.image(0,0,qm,Jm.WOOD_NUT_HOLE_INSIDE),this.holeInside.setWorldSize(54,54),this.holeInside.scale*=93/108*.75},n.createPlusIcon=function(){this.plusIcon=this.scene.add.image(0,0,qm,Jm.BUTTON_PLUS.FILE),this.plusIcon.setWorldSize(36,36)},n.setAdsHole=function(e){this.plusIcon.setVisible(e)},n.updateHoleFrame=function(e){this.hole.setFrame(e.holeFrame,!1,!1),this.holeInside.setFrame(e.holeInsideFrame,!1,!1)},t}(Phaser.GameObjects.Container),eg=$m;function tg(e,t){var n="undefined"!==typeof T()&&b()(e)||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){var n;if(!e)return;if("string"===typeof e)return ng(e,t);var i=S()(n=Object.prototype.toString.call(e)).call(n,8,-1);"Object"===i&&e.constructor&&(i=e.constructor.name);if("Map"===i||"Set"===i)return I()(e);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return ng(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var i=0;return function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function ng(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var ig=function(e){function t(t,n){var i;return(i=e.call(this,t,0,0)||this).scene=void 0,i.screw=void 0,i.holeImage=void 0,i.config=void 0,i.categoryBodyMap=new($()),i.id=1,i.baseCategory=0,i.isHasScrew=!0,i.isAdsHole=!1,i.isScrewUnlock=!1,i.isRunningAnimation=!1,i.holeObjects=[],i.baseScrewDepth=void 0,i.handleHoleClick=function(){var e=i.scene.screwManager;if(!i.isBlockByHoleObjects()){var t=function(){e.chooseHoleArea((0,Ka.Z)(i))};i.isAdsHole&&e.isCanClickAdsHole()?(i.scene.screwManager.setCanClickHole(!1),i.scene.stateManager.pause(),i.scene.layoutManager.showBuyItemScreen({itemType:Dh.ADS_HOLE,isWatchAds:!0,adsHole:(0,Ka.Z)(i),callback:t})):t()}},i.runClickScrewAnimation=function(e){return void 0===e&&(e=200),!i.isHasScrew||i.isRunningAnimation?l().resolve():(i.isRunningAnimation=!0,i.isScrewUnlock?i.runLockScrewAnimation(e):i.runUnlockScrewAnimation(e))},i.setName("HoleScrew"),i.setSize(54,54),i.scene=t,i.baseCategory=n,i.holeImage=new eg(t),i.scene.add.existing((0,Ka.Z)(i)),i.setDepth(za.Z.HOLE),i}(0,o.Z)(t,e);var n=t.prototype;return n.onWoodOutOfBoard=function(){for(var e,t=tg(this.holeObjects);!(e=t()).done;){e.value.onWoodOutOfBoard()}},n.onScrewMoveAway=function(){for(var e,t=tg(this.holeObjects);!(e=t()).done;){e.value.onScrewMoveAway()}},n.onScrewRemoved=function(){for(var e,t=tg(this.holeObjects);!(e=t()).done;){e.value.onScrewRemoved()}},n.removeAdsHole=function(){this.isAdsHole=!1,this.holeImage.setAdsHole(!1)},n.getRadius=function(){return Pf.RADIUS*GameCore.Configs.Gameplay.ScaleFactor},n.updateConfig=function(e,t,n,i){var r=GameCore.Configs.Gameplay.ScaleFactor;(this.config=e,this.setScale(e.scaleX*r,e.scaleY*r),this.setPosition(n.x+50*e.x*r,n.y+-1*e.y*50*r),this.id=e.id,this.isHasScrew=1===e.hasScrew,this.isAdsHole=1===e.hasAdsHole,this.holeImage.updateConfig(e,n),1===e.hasIce&&this.addHoleObject("Ice"),e.numberLockIron>0)&&this.addHoleObject("NumberLock").setNumberLock(e.numberLockIron);if(0!==e.hasLockKey){this.addHoleObject("LockKey").setLockType(e.screwPoolType);var s=[33,34,35,37,41,42,43];if(Ae()(s).call(s,e.screwPoolType))this.addHoleObject("Key").setKeyType(e.screwPoolType)}0!==e.hasKey&&this.addHoleObject("Key").setKeyType(e.screwPoolType);for(var a,o=tg(t);!(a=o()).done;){a.value.holeId===e.id&&this.addHoleObject("FlyingKeyLock")}var c=i?i+za.Z.WOOD_OVERLAY-.5:za.Z.SCREW;this.baseScrewDepth=c},n.addHoleObject=function(e){var t=this.scene.holeObjectPool.spawn(e);return t.setHoleScrew(this),this.holeObjects.push(t),t},n.addInstanceHoleObject=function(e){this.holeObjects.push(e)},n.getHoleObject=function(e){var t;return O()(t=this.holeObjects).call(t,(function(t){return t.objectType===e}))},n.removeHoleObject=function(e){var t;this.holeObjects=_e()(t=this.holeObjects).call(t,(function(t){return t.objectType!==e}))},n.initHoleObjects=function(){for(var e,t=tg(this.holeObjects);!(e=t()).done;){e.value.initDefault()}},n.isBlockByHoleObjects=function(){return this.holeObjects.some((function(e){return e.isBlockHole()}))},n.updateAfterChangeScrew=function(){for(var e,t=tg(this.holeObjects);!(e=t()).done;){e.value.updateAfterScrewMove()}},n.getIsHasScrew=function(){return this.isHasScrew},n.getIsAdsHole=function(){return this.isAdsHole},n.getHoleImage=function(){return this.holeImage},n.runUnlockScrewAnimation=function(e){var t=this;return void 0===e&&(e=300),this.screw?(this.screw.setDepthChoosing(),new(l())((function(n){var i;null==(i=t.screw)||i.runUnlockScrewAnimation(e).then((function(){t.isScrewUnlock=!0,t.isRunningAnimation=!1,n()}))}))):l().resolve()},n.runLockScrewAnimation=function(e,t){var n=this;return void 0===e&&(e=300),void 0===t&&(t=!1),this.screw?(this.screw.setToBaseDepth(),new(l())((function(i){var r;null==(r=n.screw)||r.runLockScrewAnimation(e,t).then((function(){n.isScrewUnlock=!1,n.isRunningAnimation=!1,i()}))}))):l().resolve()},n.runAttachScrewAnimation=function(e,t){var n=this;return void 0===t&&(t=150),this.isHasScrew||this.isRunningAnimation||!e?l().resolve():(this.attachScrew(e,!1),this.isRunningAnimation=!0,new(l())((function(e){n.scene.tweens.add({targets:n.screw,x:n.x,y:n.y,duration:t,ease:Phaser.Math.Easing.Sine.Out,onComplete:function(){n.runLockScrewAnimation(t,!0).then((function(){e()}))}})})))},n.attachScrew=function(e,t){void 0===t&&(t=!1),this.screw=e,e.holeId=this.id,this.isHasScrew=!0,e.setNewBaseDepth(this.baseScrewDepth),t&&(this.isScrewUnlock=!1,this.screw.setPosition(this.x,this.y))},n.getScrew=function(){return this.screw},n.unAttachScrew=function(){return this.isHasScrew=!1,this.screw=void 0,l().resolve()},n.createCategoryBody=function(e){for(var t,n=tg(e);!(t=n()).done;){var i=t.value;this.createMatterBody(i)}},n.createMatterBody=function(e){var t=this.scene.holeBodyPool.spawn(this.x,this.y,this.scale);return t.ignoreGravity=!0,t.restitution=0,t.label="Screw Body cat: "+e+" id: "+this.config.id,t.collisionFilter.category=e,t.collisionFilter.mask=e,this.categoryBodyMap.set(e,t),t},n.activeCategoryBody=function(e){void 0===e&&(e=!1);for(var t,n=tg(Uu()(i=this.categoryBodyMap).call(i));!(t=n()).done;){var i,r=t.value;r.isSensor=e,e&&(r.collisionFilter.mask=this.baseCategory)}},n.getBodyByCategory=function(e){return this.categoryBodyMap.get(e)},n.setCategoryBody=function(e,t){var n=this.categoryBodyMap.get(e);n&&(n.collisionFilter.mask=t?this.baseCategory:e)},n.reset=function(){this.holeImage.kill();for(var e,t=tg(Uu()(n=this.categoryBodyMap).call(n));!(e=t()).done;){var n,i=e.value;this.scene.matter.world.remove(i),i.label="unused"}for(var r,s=tg(this.holeObjects);!(r=s()).done;){r.value.kill()}this.holeObjects=[],this.categoryBodyMap.clear(),this.isHasScrew=!1,this.isAdsHole=!1,this.isScrewUnlock=!1,this.isRunningAnimation=!1,this.kill()},n.initDefault=function(e){e&&this.holeImage.updateHoleFrame(e),this.revive(),this.holeImage.revive()},t}(Phaser.GameObjects.Container),rg=ig,sg=ja.Z.GAMEPLAY,ag=sg.KEY,og=sg.FRAME,cg=function(e){function t(t){var n;return(n=e.call(this,t,0,0)||this).screw=void 0,n.screwPin=void 0,n.config=void 0,n.isScrewRemoved=!1,n.holeId=-1,n.isScrewUp=!1,n.baseDepth=za.Z.SCREW,n.scaleYPin=1,n.chooseRemoveTween=void 0,n.setName("Screw"),n.createUI(),n.setSize(n.screw.width,n.screw.height),n.scene.add.existing((0,Ka.Z)(n)),n.setDepth(za.Z.SCREW),n}(0,o.Z)(t,e);var n=t.prototype;return n.createUI=function(){this.createScrew(),this.add([this.screwPin,this.screw])},n.updateConfig=function(e,t,n,i){var r=GameCore.Configs.Gameplay.ScaleFactor;this.config=e,this.setScale(e.scaleX*r,e.scaleY*r),this.setPosition(t.x+50*e.x*r,t.y+-1*e.y*50*r),this.isScrewUp=!1;var s=i&&n?i+za.Z.WOOD_OVERLAY-.5:za.Z.SCREW;this.baseDepth=s,this.setDepth(s)},n.getId=function(){return this.config.id},n.getIsScrewUp=function(){return this.isScrewUp},n.setDepthChoosing=function(){this.setDepth(za.Z.CHOOSING_SCREW)},n.setNewBaseDepth=function(e){this.baseDepth=e,this.setDepth(e)},n.setToBaseDepth=function(){this.setDepth(this.baseDepth)},n.createScrew=function(){this.screw=this.scene.add.image(0,0,ag,og.SCREW_PREFIX+1),this.screw.setWorldSize(49,50.75),this.screwPin=this.scene.add.image(0,0,ag,og.SCREW_PIN),this.screwPin.setWorldSize(34,58),this.screwPin.setVisible(!1),this.screwPin.setTint(13805669),this.scaleYPin=this.screwPin.scaleY},n.runUnlockScrewAnimation=function(e){var t=this;void 0===e&&(e=300);var n=e>0;return new(l())((function(i){t.scene.tweens.add({targets:t.screwPin,duration:e,ease:Phaser.Math.Easing.Sine.Out,props:{scaleY:{from:0,to:1*t.scaleYPin},y:-30},onStart:function(){t.isScrewUp=!0,t.screwPin.scaleY=0,t.screwPin.y=0,t.screwPin.setVisible(!0),n&&t.scene.audio.playSound(Xa.Z.SCREW_OUT)},onComplete:function(){i()}}),t.scene.tweens.add({targets:t.screw,duration:e,ease:Phaser.Math.Easing.Sine.Out,props:{y:-50,rotation:{from:0,to:-Math.PI}},onStart:function(){t.screw.y=0,t.screw.setRotation(0),t.screw.setVisible(!0)}})}))},n.runLockScrewAnimation=function(e,t,n){var i=this;return void 0===e&&(e=300),void 0===t&&(t=!1),void 0===n&&(n=!0),n=e>0&&n,new(l())((function(r){i.scene.tweens.add({targets:i.screwPin,duration:e,ease:Phaser.Math.Easing.Sine.Out,props:{scaleY:{from:i.scaleYPin,to:0},y:0},onStart:function(){if(i.screwPin.scaleY=i.scaleYPin,i.screwPin.setVisible(!0),n){var e=t?Xa.Z.SCREW_IN:Xa.Z.SCREW_OUT;i.scene.audio.playSound(e)}},onComplete:function(){i.isScrewUp=!1,i.screwPin.setVisible(!1),i.screwPin.scaleY=0,r()}}),i.scene.tweens.add({targets:i.screw,duration:e,ease:Phaser.Math.Easing.Sine.Out,props:{y:0,rotation:{from:-Math.PI,to:0}},onStart:function(){i.screw.setVisible(!0)}})}))},n.runAttachScrewAnimation=function(){return this.runLockScrewAnimation()},n.runChooseRemoveAnimation=function(){var e=this,t=Phaser.Display.Color.ValueToColor(16777215),n=Phaser.Display.Color.ValueToColor(16711680);this.setDepth(za.Z.CHOOSING_SCREW),this.chooseRemoveTween=this.scene.tweens.addCounter({from:0,to:1,yoyo:!0,loop:-1,duration:600,onUpdate:function(i){var r=100*i.getValue(),s=Phaser.Display.Color.Interpolate.ColorWithColor(t,n,100,r),a=s.r,o=s.g,c=s.b,l=Phaser.Display.Color.GetColor(a,o,c);e.screw.setTint(l)}})},n.runCannotChooseAnimation=function(){var e=this,t=Phaser.Display.Color.ValueToColor(16777215),n=Phaser.Display.Color.ValueToColor(16711680);this.scene.tweens.addCounter({from:0,to:1,yoyo:!0,duration:100,onUpdate:function(i){var r=100*i.getValue(),s=Phaser.Display.Color.Interpolate.ColorWithColor(t,n,100,r),a=s.r,o=s.g,c=s.b,l=Phaser.Display.Color.GetColor(a,o,c);e.screw.setTint(l)}})},n.stopPlayingRemoveWarning=function(){var e;this.setToBaseDepth(),this.screw.setTint(16777215),null==(e=this.chooseRemoveTween)||e.remove()},n.reset=function(){this.isScrewRemoved=!1,this.isScrewUp=!1,this.stopPlayingRemoveWarning(),this.screwPin.scaleY=0,this.screwPin.y=0,this.screwPin.setVisible(!1),this.screw.setVisible(!0).setRotation(0),this.screw.y=0,this.screw.revive(),this.kill()},n.removeScrew=function(){this.isScrewRemoved=!0,this.holeId=-1,this.screw.kill()},n.getIsScrewRemoved=function(){return this.isScrewRemoved},n.getScrewPosition=function(){return this.screw.getWorldPosition()},n.reviveScrew=function(){this.isScrewRemoved=!1,this.setToBaseDepth(),this.screw.revive()},n.updateScrewFrame=function(e){this.screw.setFrame(e.screwFrame,!1,!1),this.screwPin.setFrame(e.pinFrame,!1,!1)},t}(Phaser.GameObjects.Container),lg=cg,ug=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n.scene=t,n.scene.add.existing((0,Ka.Z)(n)),n.setActive(!0),n}(0,o.Z)(t,e);var n=t.prototype;return n.spawn=function(){var e=this.getMatching("name","HoleScrew"),t=O()(e).call(e,(function(e){return!e.active}));return t||(t=this.createHoleScrew()),t.initDefault(),t},n.spawnScrew=function(e){var t=this.getMatching("name","Screw"),n=O()(t).call(t,(function(e){return!e.active}));return n||(n=this.createScrew()),n.revive(),e&&n.updateScrewFrame(e),n},n.reset=function(){this.getMatching("name","HoleScrew").forEach((function(e){e.active&&e.reset()})),this.getMatching("name","Screw").forEach((function(e){e.active&&e.reset()}))},n.createHoleScrew=function(){var e=new rg(this.scene,this.scene.baseScrewCategory);return this.add(e),e},n.createScrew=function(){var e=new lg(this.scene);return this.add(e),e},t}(Phaser.GameObjects.Group),hg=ug,dg=function(){function e(e){this.scene=void 0,this.bodies=[],this.scene=e}var t=e.prototype;return t.spawn=function(e,t,n){var i,r=_e()(i=this.bodies).call(i,(function(e){return"unused"===e.label}));if(r.length>0){var s=r[0];this.scene.matter.body.setStatic(s,!0),s.isSensor=!0,this.scene.matter.body.setPosition(s,{x:e,y:t});var a=s.scale.x||1,o=n;return a!==o&&(this.scene.matter.body.scale(s,1/a,1/a),this.scene.matter.body.scale(s,o,o)),this.scene.matter.world.add(s),s}return this.createHoleBody(e,t,n)},t.createHoleBody=function(e,t,n){var i=this.scene.matter.add.circle(e,t,27,{isStatic:!0,isSensor:!0});return this.scene.matter.body.scale(i,n,n),this.bodies.push(i),i},t.reset=function(){var e=this;this.bodies.forEach((function(t){"unused"!==t.label&&e.scene.matter.world.remove(t),t.label="unused"}))},e}(),pg=dg,fg=ja.Z.GAMEPLAY,vg=fg.KEY,mg=fg.FRAME,gg=function(){function e(e){this.scene=void 0,this.chains=[],this.pool=[],this.scene=e,this.chains=[],this.pool=[]}var t=e.prototype;return t.createChain=function(e){var t=e.isChain1,n=e.scale,i=e.x,r=e.y,s=e.width,a=e.height,o=e.options,c=this.scene.make.image({key:vg,frame:t?mg.CHAIN_1.FILE:mg.CHAIN_2.FILE}).setDepth(za.Z.CHAIN+(t?0:1));c.setScale(n);var l=this.scene.matter.add.rectangle(i,r,s,a,o);this.scene.matter.world.remove(l);var u=this.scene.matter.add.gameObject(c,l);return u.setPosition(i,r),this.scene.matter.world.remove(u),u},t.updateConfig=function(e,t){var n=t.isChain1,i=t.scale,r=t.x,s=t.y,a=(t.width,t.height,t.options);e.setActive(!0).setVisible(!0),e.setScale(i).setTexture(vg,n?mg.CHAIN_1.FILE:mg.CHAIN_2.FILE).setDepth(za.Z.CHAIN+(n?0:1)).setAngle(0);var o=e.body;if(a){var c=a.collisionFilter,l=(a.chamfer,a.density,a.frictionAir);c&&(c.category&&(o.collisionFilter.category=c.category),c.mask&&(o.collisionFilter.mask=c.mask),c.group&&(o.collisionFilter.group=c.group)),l&&(o.frictionAir=l)}this.scene.matter.body.setVelocity(o,{x:0,y:0}),this.scene.matter.body.setAngularVelocity(o,0),this.scene.matter.body.setAngle(o,0),this.scene.matter.body.translate(o,{x:r-o.position.x,y:s-o.position.y})},t.spawn=function(e){if(this.pool.length>0){var t=this.pool.pop();return this.updateConfig(t,e),this.chains.push(t),t}var n=this.createChain(e);return this.chains.push(n),n},t.reset=function(){var e=this;this.chains.forEach((function(t){e.scene.matter.world.remove(t),t.setActive(!1).setVisible(!1),e.pool.push(t)})),this.chains=[]},e}(),yg=gg,Eg=ja.Z.GAMEPLAY.FRAME,Sg=function(){function e(e,t,n,i,r){var s=this;this.scene=void 0,this.config=void 0,this.id=void 0,this.boardPosition=void 0,this.bridge=void 0,this.chain=void 0,this.constraint1=void 0,this.constraint2=void 0,this.matterImages=[],this.circle1=void 0,this.circle2=void 0,this.wood1=void 0,this.wood2=void 0,this.group=void 0,this.firstPosition=void 0,this.lastPosition=void 0,this.numberOfChain=0,this.diff1=void 0,this.diff2=void 0,this.scene=e,this.config=t,this.boardPosition=n,this.group=i,this.id=r,this.initSegments(),this.initCircles(),this.calculateDiff(),this.createChain(),this.scene.time.delayedCall(500,(function(){s.matterImages.forEach((function(e){e.body.frictionAir=.05}))}))}var t=e.prototype;return t.initSegments=function(){var e=this.config,t=e.firstSegment,n=e.lastSegment,i=this.boardPosition,r=i.x,s=i.y,a=GameCore.Configs.Gameplay.ScaleFactor;this.firstPosition={x:r+50*a*t.x,y:s-50*a*t.y},this.lastPosition={x:r+50*a*n.x,y:s-50*a*n.y};var o=this.scene.screwManager.getWoods(),c=O()(o).call(o,(function(e){return e.config.id===t.ironHingeId})),l=O()(o).call(o,(function(e){return e.config.id===n.ironHingeId}));c&&l&&(this.wood1=c,this.wood2=l)},t.initCircles=function(){var e=Eg.BAR_LAYER_10,t=e.FILE,n=e.WIDTH,i=e.HEIGHT,r=GameCore.Configs.Gameplay.ScaleFactor;this.circle1=this.scene.add.image(this.firstPosition.x,this.firstPosition.y,t).setDepth(za.Z.ROPE+2),this.circle1.setWorldSize(.23*n*r,.23*i*r),this.circle2=this.scene.add.image(this.lastPosition.x,this.lastPosition.y,t).setDepth(za.Z.ROPE+2),this.circle2.setWorldSize(.23*n*r,.23*i*r)},t.createChain=function(e){var t=this;void 0===e&&(e=!0);var n=this.firstPosition,i=n.x,r=n.y,s=this.lastPosition,a=s.x,o=s.y,c=Math.sqrt((i-a)*(i-a)+(r-o)*(r-o)),l=.36*GameCore.Configs.Gameplay.ScaleFactor/1.2,u=53*l,h=20*l;e&&(this.numberOfChain=Math.floor(c/u*1.65));var d=.8*l/this.scene.world.getPixelRatio(),p=-20*l,f=this.scene.getCategoryByLayer(60,!1),v=1;this.wood1.addRope(this),this.wood2.addRope(this);var m=this.wood1.body,g=this.wood2.body,y={x:a-i>0?1:-1,y:o-r>0?1:-1};a-i<.1&&(y.x=0),o-r<.1&&(y.y=0);var E=-u/2+y.x*u/4,S=-u/2+y.y*u/4+3;this.bridge=this.scene.matter.add.stack(i,r,this.numberOfChain,1,0,0,(function(e,n,s){var c=s/t.numberOfChain,l=i+c*(a-i),p=r+c*(o-r),m=t.scene.ropeChainPool.spawn({isChain1:v%2!=0,scale:d,x:l+E,y:p+S,width:u,height:h,options:{collisionFilter:{group:t.group,category:f,mask:f},chamfer:1,density:.005,frictionAir:.5}});return v++,t.matterImages.push(m),m.body})),this.chain=this.scene.matter.add.chain(this.bridge,.3,0,-.3,0,{stiffness:1,length:0,render:{visible:!1}}),this.constraint1=this.scene.matter.add.constraint(m,this.bridge.bodies[0],0,1,{pointA:{x:this.firstPosition.x-this.wood1.x,y:this.firstPosition.y-this.wood1.y},pointB:{x:p,y:0}}),this.constraint2=this.scene.matter.add.constraint(this.bridge.bodies[this.numberOfChain-1],g,0,1,{pointA:{x:-p,y:0},pointB:{x:a-this.wood2.x,y:this.lastPosition.y-this.wood2.y}})},t.calculateDiff=function(){this.diff1={x:this.circle1.x-this.wood1.x,y:this.circle1.y-this.wood1.y,angle:this.wood1.angle},this.diff2={x:this.circle2.x-this.wood2.x,y:this.circle2.y-this.wood2.y,angle:this.wood2.angle}},t.kill=function(){this.circle1.kill(),this.circle2.kill(),this.reset()},t.revive=function(){this.circle1.revive(),this.circle2.revive()},t.updateConfig=function(e,t,n,i){var r=this;this.config=e,this.boardPosition=t,this.group=n,this.id=i;var s=GameCore.Configs.Gameplay.ScaleFactor;this.initSegments();var a=Eg.BAR_LAYER_10,o=a.WIDTH,c=a.HEIGHT;this.circle1.setPosition(this.firstPosition.x,this.firstPosition.y).setWorldSize(.23*o*s,.23*c*s),this.circle2.setPosition(this.lastPosition.x,this.lastPosition.y).setWorldSize(.23*o*s,.23*c*s),this.calculateDiff(),this.createChain(!0),this.scene.time.delayedCall(500,(function(){r.matterImages.forEach((function(e){e.body.frictionAir=.05}))}))},t.reset=function(){this.constraint1&&this.scene.matter.world.remove(this.constraint1,!0),this.constraint2&&this.scene.matter.world.remove(this.constraint2,!0),this.scene.matter.world.remove(this.chain,!0),this.scene.matter.world.remove(this.bridge,!0),this.matterImages=[]},t.postUpdate=function(){var e=this.wood1.x,t=this.wood1.y,n=(this.wood1.angle-this.diff1.angle)*(Math.PI/180),i=this.wood2.x,r=this.wood2.y,s=(this.wood2.angle-this.diff2.angle)*(Math.PI/180),a=e+this.diff1.x*Math.cos(n)-this.diff1.y*Math.sin(n),o=t+this.diff1.x*Math.sin(n)+this.diff1.y*Math.cos(n),c=i+this.diff2.x*Math.cos(s)-this.diff2.y*Math.sin(s),l=r+this.diff2.x*Math.sin(s)+this.diff2.y*Math.cos(s);this.circle1.setPosition(a,o),this.circle2.setPosition(c,l)},t.removeConstraintWithWood=function(e){this.wood1===e?this.constraint1&&(this.scene.matter.world.remove(this.constraint1,!0),this.circle1.kill()):this.wood2===e&&this.constraint2&&(this.scene.matter.world.remove(this.constraint2,!0),this.circle2.kill())},t.getOtherWood=function(e){var t=void 0;return this.wood1&&this.wood1.config.id==e.config.id?t=this.wood2:this.wood2&&this.wood2.config.id==e.config.id&&(t=this.wood1),t},t.getChainPositions=function(){var e=[];return this.matterImages.forEach((function(t){e.push({x:t.x,y:t.y})})),e},t.resetConstraint=function(e){var t=this;this.matterImages.forEach((function(e){e.body.frictionAir=.5})),this.matterImages.length>0&&this.matterImages.forEach((function(n,i){n.setPosition(e[i].x,e[i].y);var r=n.body;t.scene.matter.body.setVelocity(r,{x:0,y:0})}));var n=this.wood1.angle,i=this.wood2.angle;this.constraint1&&this.wood1.getCountActiveConstraints()>=2&&(this.constraint1.angleA=n*Math.PI/180,this.constraint1.pointA={x:this.diff1.x,y:this.diff1.y}),this.constraint2&&this.wood2.getCountActiveConstraints()>=2&&(this.constraint2.angleB=i*Math.PI/180,this.constraint2.pointB={x:this.diff2.x,y:this.diff2.y}),this.scene.time.delayedCall(500,(function(){t.matterImages.forEach((function(e){e.body.frictionAir=.05}))}))},t.setAvailable=function(e){var t;(this.circle1.active&&this.circle1.setVisible(e),this.circle2.active&&this.circle2.setVisible(e),this.matterImages.forEach((function(t){t.setVisible(e)})),e)&&this.resetConstraint(De()(t=this.matterImages).call(t,(function(e){return{x:e.x,y:e.y}})))},t.getUI=function(){var e;return x()(e=[this.circle1,this.circle2]).call(e,this.matterImages)},e}(),wg=Sg,Ig=function(){function e(e){this.scene=void 0,this.ropes=[],this.pool=[],this.scene=e,this.pool=[],this.ropes=[],this.scene.events.off(Phaser.Scenes.Events.POST_UPDATE,this.postUpdate,this),this.scene.events.on(Phaser.Scenes.Events.POST_UPDATE,this.postUpdate,this)}var t=e.prototype;return t.createRope=function(e,t,n,i){var r=new wg(this.scene,e,t,n,i);return this.ropes.push(r),r},t.spawn=function(e,t,n,i){if(this.pool.length>0){var r=this.pool.pop();return r.revive(),r.updateConfig(e,t,n,i),this.ropes.push(r),r}return this.createRope(e,t,n,i)},t.reset=function(){var e=this;this.ropes.forEach((function(t){t.kill(),e.pool.push(t)})),this.ropes=[]},t.postUpdate=function(){this.ropes.forEach((function(e){e.postUpdate()}))},e}(),Ag=Ig,Tg=n(608),Cg=n.n(Tg),bg=n(610),Pg=function(e){return Math.pow(2,Math.ceil(Cg()(e)))},xg=function(){function e(e,t){this.scene=void 0,this.key=void 0,this.events=void 0,this.rts=[],this.packer=void 0,this.padding=8,this.frameWithPadding=!1,this.key=t,this.scene=e,this.events=new Phaser.Events.EventEmitter,this.rts=[],this.packer=new bg.cC(2048,2048,2,{smart:!1,pot:!1,square:!1,allowRotation:!1,tag:!1,border:this.padding}),this.packer.padding=this.padding}var t=e.prototype;return t.setPadding=function(e){this.padding=e,this.packer.padding=e,this.packer.options.border=e},t.getPadding=function(){return this.padding},t.addGameObject=function(e,t,n,i){this.packer.add({x:0,y:0,width:e,height:t,name:n,gameObject:i})},t.saveTexture=function(){var e=this,t=this.scene,n=this.key,i=t.textures.get(n);this.packer.next(),this.packer.bins.forEach((function(r,s){var a=1,o=1;r.rects.forEach((function(e){a=Math.max(a,e.x+e.width),o=Math.max(o,e.y+e.height)}));var c=Pg(a),l=Pg(o);e.rts.length<=s&&e.rts.push(new Phaser.GameObjects.RenderTexture(t,0,0,c,l)),i.key!==n&&(i=t.textures.create(n,[],c,l)),i.source.length<=s&&i.source.push(e.rts[s].texture.source[0]),e.rts[s].width==c&&e.rts[s].height==l||e.rts[s].resize(c,l);var u=[];r.rects.forEach((function(t){var n=t.gameObject,r=t.x,a=t.y,o=t.width,c=t.height,l=t.name;if(n.x=r+o/2,n.y=i.source[s].height-a-c/2,u.push(n),e.frameWithPadding){var h=e.padding;i.add(l,s,r-h/2,a-h/2,o+h,c+h)}else i.add(l,s,r,a,o,c)})),e.rts[s].draw(u)})),this.events.emit("save",i)},t.reset=function(){this.rts.forEach((function(e){e.clear()})),this.packer.reset();var e=this.scene.textures.get(this.key);if(e.key==this.key)for(var t=te()(e.frames),n=0;n<t.length;n++)e.remove(t[n])},e}(),Rg=xg,Og={targets:[],duration:600,ease:Phaser.Math.Easing.Back.Out,props:{alpha:{from:0,to:1},scale:{from:3,to:1}}},_g=function(e){function t(t){return e.call(this,Og,t)||this}return(0,o.Z)(t,e),t}(ll.Z),kg=ja.Z.GAMEPLAY,Dg=kg.KEY,Lg=kg.FRAME,Bg=za.Z.EFFECT,Ng=function(){function e(e){this.scene=void 0,this.icon=void 0,this.iconTween=void 0,this.textTween=void 0,this.scene=e,this.createIcon()}var t=e.prototype;return t.createIcon=function(){var e=Lg.ICON_TIME,t=e.FILE,n=e.WIDTH,i=e.HEIGHT;this.icon=this.scene.make.image({key:Dg,frame:t}),this.icon.setWorldSize(2*n,2*i),this.icon.setDepth(Bg),this.icon.kill()},t.runAddAnimation=function(e,t){var n=this;return this.icon.revive(),Phaser.Display.Align.In.Center(this.icon,this.scene.gameZone),new(l())((function(i){n.iconTween=n.scene.tweens.add({targets:n.icon,scale:{from:0,to:1},duration:300,ease:Phaser.Math.Easing.Cubic.Out,onComplete:function(){var r=n.scene.layoutManager.objects.header.timerText.getWorldPosition(),s=r.x,a=r.y;n.iconTween=n.scene.tweens.add({targets:n.icon,x:s,y:a,scale:.5,duration:500,ease:Phaser.Math.Easing.Sine.Out,onComplete:function(){n.icon.kill(),n.iconTween=null;var r=n.scene.layoutManager.objects.header.timerText;r.runTimerAddingAnimation(),n.scene.time.delayedCall(900,(function(){r.stopTimerAddingAnimation()})),n.textTween=n.scene.tweens.add({targets:r,value:{from:e,to:e+t},duration:700,onUpdate:function(e){var t=e.getValue();r.updateClock(t)},onComplete:function(){r.updateClock(e+t),i()}})}})}})}))},t.setPosition=function(e,t){this.icon.setPosition(e,t)},t.getUpdateDuration=function(){return 1500},t.getStopDuration=function(){return 200},t.stop=function(){var e,t;this.icon.kill(),null==(e=this.iconTween)||e.remove(),null==(t=this.textTween)||t.remove()},e}(),Hg=Ng;function Mg(e,t){var n="undefined"!==typeof T()&&b()(e)||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){var n;if(!e)return;if("string"===typeof e)return Gg(e,t);var i=S()(n=Object.prototype.toString.call(e)).call(n,8,-1);"Object"===i&&e.constructor&&(i=e.constructor.name);if("Map"===i||"Set"===i)return I()(e);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return Gg(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var i=0;return function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Gg(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var Wg=za.Z.EFFECT,Ug=function(){function e(e){this.scene=void 0,this.lightningStrikes=[],this.scene=e,this.createLightningStrikes()}var t=e.prototype;return t.createLightningStrikes=function(){for(var e=0;e<3;e++){var t=this.createLightningStrike(0,0);this.lightningStrikes.push(t)}},t.createLightningStrike=function(e,t){var n=this.scene.add.sprite(e,t,gr.Z.LIGHTNING_STRIKE.KEY);return n.setDepth(Wg),n.setOrigin(.5,1),n.kill(),n},t.getAvailableLightningStrike=function(){for(var e,t=Mg(this.lightningStrikes);!(e=t()).done;){var n=e.value;if(!n.active)return n}var i=this.createLightningStrike(0,0);return this.lightningStrikes.push(i),i},t.runAnimation=function(e,t,n,i){var r=this,s=this.getAvailableLightningStrike();return s.revive(),s.setPosition(e,0),s.setScale(1,0),s.setAlpha(0),s.setFrame(0),s.setDisplaySize(50,500),new(l())((function(e){r.scene.tweens.add({targets:s,y:t+50,scaleY:1,alpha:1,duration:300,delay:n,ease:"Power2",onStart:function(){s.play({key:"lightning-strike",frameRate:10})},onComplete:function(){r.scene.time.delayedCall(200,(function(){i(),e(),r.scene.tweens.add({targets:s,alpha:0,duration:300,onComplete:function(){s.kill()}})}))}})}))},t.getUntilStrikeDuration=function(){return 500},e}(),Fg=Ug;function Zg(e,t){var n="undefined"!==typeof T()&&b()(e)||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){var n;if(!e)return;if("string"===typeof e)return Yg(e,t);var i=S()(n=Object.prototype.toString.call(e)).call(n,8,-1);"Object"===i&&e.constructor&&(i=e.constructor.name);if("Map"===i||"Set"===i)return I()(e);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return Yg(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var i=0;return function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Yg(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var Vg=function(){function e(e){this.scene=void 0,this.headerSlideInAnimation=void 0,this.footerSlideInAnimation=void 0,this.headerSlideOutAnimation=void 0,this.footerSlideOutAnimation=void 0,this.bonusTimeAnimation=void 0,this.lightningAnimation=void 0,this.headerYPosition=0,this.footerYPosition=0,this.headerXPosition=0,this.footerXPosition=0,this.hideOffset=0,this.scene=e,this.initPosition(),this.initHideOffset(),this.createAnimations()}var t=e.prototype;return t.initHideOffset=function(){var e=this.scene.world.isLandscape(),t=this.scene.ads.getBannerHeight(),n=this.scene.world.getWorldSize(),i=n.width,r=n.height,s=(i-this.scene.board.width)/2,a=(r-this.scene.board.height+t)/2;this.hideOffset=e?s:a},t.initPosition=function(){var e=this.scene.layoutManager.objects,t=e.header,n=e.footer;this.headerYPosition=t.y,this.footerYPosition=n.y,this.headerXPosition=t.x,this.footerXPosition=n.x},t.createAnimations=function(){this.bonusTimeAnimation=new Hg(this.scene),this.lightningAnimation=new Fg(this.scene)},t.runShowUIObjects=function(){var e=this.scene.layoutManager.objects,t=e.header,n=e.footer,i=this.scene.world.isLandscape();this.headerSlideInAnimation||(this.headerSlideInAnimation=new _g(i?{targets:[t],duration:500,props:{x:{from:this.headerXPosition-this.hideOffset,to:this.headerXPosition},alpha:{from:0,to:1},scale:t.scale}}:{targets:[t],duration:500,props:{y:{from:this.headerYPosition-this.hideOffset,to:this.headerYPosition},alpha:{from:0,to:1},scale:t.scale}})),this.footerSlideInAnimation||(this.footerSlideInAnimation=new _g(i?{targets:[n],duration:500,props:{x:{from:this.footerXPosition+this.hideOffset,to:this.footerXPosition},alpha:{from:0,to:1},scale:n.scale}}:{targets:[n],duration:500,props:{y:{from:this.footerYPosition+this.hideOffset,to:this.footerYPosition},alpha:{from:0,to:1},scale:n.scale}})),this.headerSlideInAnimation.play(),this.footerSlideInAnimation.play()},t.runHideUIObjects=function(){var e=this.scene.layoutManager.objects,t=e.header,n=e.footer,i=this.scene.world.isLandscape();this.headerSlideOutAnimation||(this.headerSlideOutAnimation=new _g(i?{targets:[t],duration:500,props:{x:this.headerXPosition-this.hideOffset,alpha:{from:1,to:0},scale:t.scale}}:{targets:[t],duration:500,props:{y:this.headerYPosition-this.hideOffset,alpha:{from:1,to:0},scale:t.scale}})),this.footerSlideOutAnimation||(this.footerSlideOutAnimation=new _g(i?{targets:[n],duration:500,props:{x:this.footerXPosition+this.hideOffset,alpha:{from:1,to:0},scale:n.scale}}:{targets:[n],duration:500,props:{y:this.footerYPosition+this.hideOffset,alpha:{from:1,to:0},scale:n.scale}})),this.headerSlideOutAnimation.play(),this.footerSlideOutAnimation.play()},t.completeShowUIObjects=function(){var e=this.scene.layoutManager.objects,t=e.header,n=e.footer;t.y=this.headerYPosition,n.y=this.footerYPosition,t.x=this.headerXPosition,n.x=this.footerXPosition},t.completeHideUIObjects=function(){var e=this.scene.layoutManager.objects,t=e.header,n=e.footer;this.scene.world.isLandscape()?(t.x=this.headerXPosition-this.hideOffset,n.x=this.footerXPosition+this.hideOffset):(t.y=this.headerYPosition-this.hideOffset,n.y=this.footerYPosition+this.hideOffset)},t.runLightningAnimation=function(e,t){var n=this;void 0===t&&(t=!1);if(t){for(var i,r=Zg(e);!(i=r()).done;){i.value.hitByLightning()}return l().resolve()}return new(l())((function(t){for(var i=[],r=function(t){var r=e[t].getWorldPosition(),s=n.lightningAnimation.runAnimation(r.x,r.y,500*t,(function(){n.scene.runShakingAnimation(5,70),e[t].hitByLightning()}));i.push(s)},s=0;s<e.length;s++)r(s);l().all(i).then((function(){t()}))}))},t.runBonusTimeAnimation=function(e,t,n){return void 0===n&&(n=!1),n?(this.scene.layoutManager.objects.header.timerText.updateClock(e+t),l().resolve()):l().resolve(this.bonusTimeAnimation.runAddAnimation(e,t))},t.runShowBoardAnimation=function(){var e=(0,a.Z)(h().mark((function e(t,n,i){var r,s,a,o,c,u,d,p,f,v,m,g,y,E,S,w,I,A,T,C,b,P,x,R,O,_,k,D,L,B,N,H,M,G,W,U,F,Z,Y,V,z,K,j,X,Q,q,J=this;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=this.initializeScrews(),s=this.initializeHoleScrewAreas(),a=s.holeImages,o=s.holeObjectsWidthHeightMap,c=s.holeDimensions,u=this.initializeWoods(),d=u.layerToWoodMap,p=u.woodToWidthHeightMap,this.initializeRopes(),f=this.sortLayerToWoodMap(d),v=2300,100,m=Phaser.Math.Clamp(1500/d.size,200,350),g=80,y=80,E=100,S=200,m*d.size,w=100+g+y+S+m*d.size+(0!=o.size?E:0),I=Math.max(t.length*this.lightningAnimation.getUntilStrikeDuration()-(i>0?this.bonusTimeAnimation.getUpdateDuration():0),0),this.scene.time.delayedCall(Math.min(w,v)+I-500,(function(){J.runShowUIObjects()})),e.next=19,(0,bo.qZ)(100);case 19:return e.next=21,this.createShowTween(a,g,c.width,c.height);case 21:for(A=Phaser.Math.Clamp((w-v)/f.length,0,80),T=0,C=[],b=Zg(f);!(P=b()).done;){for(x=P.value,R=x[1],O=Zg(R);!(_=O()).done;)k=_.value,D=p.get(k)||{width:0,height:0},L=D.width,B=D.height,C.push(this.createTweenForWood(k,m,T,L,B));T+=m-A}return e.next=27,l().all(C);case 27:return e.next=29,this.createShowTween(this.scene.screws,y,r.width,r.height);case 29:for(N=[],H=Zg(this.scene.screws);!(M=H()).done;)G=M.value,N.push(G.runLockScrewAnimation(S,!0,!1));return e.next=33,l().all(N);case 33:for(W=[],U=Zg(this.scene.holeScrewAreas);!(F=U()).done;)for(Z=F.value,Y=Zg(Z.holeObjects);!(V=Y()).done;)z=V.value,K=o.get(z)||{width:0,height:0},j=K.width,X=K.height,W.push(this.createTweenForHoleObject(z,E,j,X));return e.next=37,l().all(W);case 37:if(!(2===this.scene.level.getStep())){e.next=41;break}return e.next=41,this.runWarningPanelAnimationAsync();case 41:return Q=[],t.length>0&&Q.push(this.runLightningAnimation(t)),i>0&&Q.push(this.runBonusTimeAnimation(n,i)),e.next=46,l().all(Q);case 46:this.setRopesAvailable(!0),this.scene.ropes.length>0&&(q=1e3/this.scene.BASE_FPS,this.scene.updateGameplay(q));case 48:case"end":return e.stop()}}),e,this)})));return function(t,n,i){return e.apply(this,arguments)}}(),t.initializeScrews=function(){for(var e,t=0,n=0,i=Zg(this.scene.screws);!(e=i()).done;){var r=e.value;r.setAlpha(0),t=r.displayWidth,n=r.displayHeight}return{width:t,height:n}},t.initializeHoleScrewAreas=function(){for(var e,t=[],n=new($()),i=0,r=0,s=Zg(this.scene.holeScrewAreas);!(e=s()).done;){var a=e.value,o=a.getHoleImage();t.push(o),i=o.displayWidth,r=o.displayHeight,o.setAlpha(0);for(var c,l=Zg(a.holeObjects);!(c=l()).done;){var u=c.value;n.set(u,{width:u.displayWidth,height:u.displayHeight}),u.setAvailable(!1),u.setAlpha(0),u.setDisplaySize(0,0)}}return{holeImages:t,holeObjectsWidthHeightMap:n,holeDimensions:{width:i,height:r}}},t.initializeWoods=function(){for(var e,t=new($()),n=new($()),i=Zg(this.scene.woods);!(e=i()).done;){var r,s=e.value,a=s.depth;if(t.has(a))null==(r=t.get(a))||r.push(s);else t.set(a,[s]);s.setAlpha(0),n.set(s,{width:s.displayWidth,height:s.displayHeight}),s.setDisplaySize(.001,.001)}return{layerToWoodMap:t,woodToWidthHeightMap:n}},t.initializeRopes=function(){for(var e,t=Zg(this.scene.ropes);!(e=t()).done;){e.value.setAvailable(!1)}},t.sortLayerToWoodMap=function(e){var t=[];return e.forEach((function(e,n){t.push([n,e])})),Ai()(t).call(t,(function(e,t){return e[0]-t[0]})),t},t.createTweenForHoleObject=function(e,t,n,i){var r=this;return new(l())((function(s){r.scene.tweens.add({targets:e,alpha:1,displayWidth:n,displayHeight:i,ease:Phaser.Math.Easing.Cubic.Out,duration:t,onComplete:function(){e.setAvailable(!0),s()}})}))},t.createShowTween=function(e,t,n,i){var r=this;return new(l())((function(s){r.scene.tweens.add({targets:e,alpha:1,displayWidth:n,displayHeight:i,ease:Phaser.Math.Easing.Cubic.Out,duration:t,onComplete:function(){return s()}})}))},t.createTweenForWood=function(e,t,n,i,r){var s=this;return new(l())((function(a){s.scene.tweens.add({targets:e,delay:n,alpha:1,displayWidth:i,displayHeight:r,ease:function(e){return Phaser.Math.Easing.Back.Out(e,2.5)},duration:t,onComplete:function(){return a()}})}))},t.setRopesAvailable=function(e){for(var t,n=Zg(this.scene.ropes);!(t=n()).done;){t.value.setAvailable(e)}},t.runWarningPanelAnimationAsync=function(){var e=(0,a.Z)(h().mark((function e(){var t=this;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new(l())((function(e){t.scene.world.isPortrait()?t.scene.warningAnimation.runShowHardLevelPortraitAnimation((function(){e()})):(t.scene.warningAnimation.runShowHardLevelLandscapeAnimation(),e())})));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),e}(),zg=Vg,Kg=n(428),jg=ja.Z.GAMEPLAY,Xg=jg.KEY,Qg=jg.FRAME,qg=function(e){function t(t){var n;return(n=e.call(this,t,0,0)||this).background=void 0,n.textWarning=void 0,n.iconWarning1=void 0,n.iconWarning2=void 0,n.iconScale=1,n.iconIdleTween=void 0,n.textIdleTween=void 0,n.runWarningIdleAnimation=function(){n.stopWarningAnimation(),n.iconIdleTween=n.scene.tweens.add({targets:[n.iconWarning1,n.iconWarning2],duration:200,yoyo:!0,repeat:-1,props:{scale:{from:n.iconScale,to:.95*n.iconScale}},ease:Phaser.Math.Easing.Sine.InOut});var e=Phaser.Display.Color.ValueToColor(7935778),t=Phaser.Display.Color.ValueToColor(16711680);n.textIdleTween=n.scene.tweens.addCounter({from:0,to:1,yoyo:!0,loop:-1,duration:400,onUpdate:function(i){var r=100*i.getValue(),s=Phaser.Display.Color.Interpolate.ColorWithColor(e,t,100,r),a=s.r,o=s.g,c=s.b,l=Phaser.Display.Color.GetColor(a,o,c),u=Phaser.Display.Color.IntegerToColor(l),h="rgba("+u.red+", "+u.green+", "+u.blue+", 1)";n.textWarning.setStroke(h,2.4)}})},n.stopWarningAnimation=function(){var e,t;null==(e=n.iconIdleTween)||e.remove(),null==(t=n.textIdleTween)||t.remove();var i=Phaser.Display.Color.IntegerToColor(7935778),r="rgba("+i.red+", "+i.green+", "+i.blue+", 1)";n.textWarning.setStroke(r,2.4),n.iconWarning1.setScale(n.iconScale),n.iconWarning2.setScale(n.iconScale)},n.createUI(),n.alignUI(),n.setSize(n.background.width,n.background.height),n}(0,o.Z)(t,e);var n=t.prototype;return n.createUI=function(){this.createBackground(),this.createText(),this.createIconWarnings(),this.add([this.background,this.textWarning,this.iconWarning1,this.iconWarning2])},n.alignUI=function(){Phaser.Display.Align.In.Center(this.textWarning,this,0,-16/3),Phaser.Display.Align.To.LeftCenter(this.iconWarning1,this.textWarning,10),Phaser.Display.Align.To.RightCenter(this.iconWarning2,this.textWarning,10)},n.createBackground=function(){var e=Qg.BACKGROUND_WARNING_PANEL,t=e.FILE,n=e.WIDTH,i=e.HEIGHT;this.background=this.scene.make.image({key:Xg,frame:t}),this.background.setWorldSize(n,i)},n.createText=function(){this.textWarning=new ho.Z(this.scene,{text:"Hard Level",fontSize:this.scene.fontSize(23),strokeColor:7935778,strokeThickness:2.4,strokeOffset:{y:.5}}).setCenterAlign().setTint(16439425)},n.createIconWarnings=function(){var e=Qg.ICON_WARNING_YELLOW,t=e.FILE,n=e.WIDTH,i=e.HEIGHT;this.iconWarning1=this.scene.make.image({key:Xg,frame:t}),this.iconWarning1.setWorldSize(n,i),this.iconWarning2=this.scene.make.image({key:Xg,frame:t}),this.iconWarning2.setWorldSize(n,i),this.iconScale=this.iconWarning1.scale},t}(Phaser.GameObjects.Container),Jg=qg,$g=ja.Z.GAMEPLAY,ey=$g.KEY,ty=$g.FRAME,ny=ty.BACKGROUND_RED_PANEL,iy=ny.FILE,ry=ny.WIDTH,sy=ny.HEIGHT,ay=function(e){function t(t){var n;return(n=e.call(this,t,0,0)||this).background=void 0,n.text=void 0,n.warningIcon1=void 0,n.warningIcon2=void 0,n.baseScale=void 0,n.baseScale=1,n.setSize(ry,sy).setAlpha(0).setDepth(za.Z.WARNING_PANEL).kill(),n.createUI(),n.scene.add.existing((0,Ka.Z)(n)),n}(0,o.Z)(t,e);var n=t.prototype;return n.createUI=function(){this.background=this.scene.add.image(0,0,ey,iy),this.background.setWorldSize(ry,sy),this.text=new ho.Z(this.scene,{text:"Might run out of moves",fontSize:this.scene.fontSize(14),strokeColor:10363684,strokeThickness:2.4,strokeOffset:{y:.5}});var e=ty.ICON_WARNING,t=e.FILE,n=e.WIDTH,i=e.HEIGHT;this.warningIcon1=this.scene.add.image(0,0,ey,t),this.warningIcon1.setWorldSize(n,i),this.warningIcon2=this.scene.add.image(0,0,ey,t),this.warningIcon2.setWorldSize(n,i),this.add([this.background,this.text,this.warningIcon1,this.warningIcon2]),Phaser.Display.Align.In.Center(this.text,this,0,-2.5),Phaser.Display.Align.In.LeftCenter(this.warningIcon1,this,-10,-2.5),Phaser.Display.Align.In.RightCenter(this.warningIcon2,this,-10,-2.5)},n.updateText=function(e){this.text.setText(e)},n.setTintColor=function(e){this.text.setTint(e),this.warningIcon1.setTint(e),this.warningIcon2.setTint(e)},n.setBaseScale=function(e){this.baseScale=e,this.setScale(e)},n.setToBaseScale=function(){this.setBaseScale(this.baseScale)},t}(Phaser.GameObjects.Container),oy=ay,cy=za.Z.POPUP,ly=ja.Z.GAMEPLAY,uy=ly.KEY,hy=ly.FRAME,dy=function(){function e(e){this.scene=void 0,this.warningBigPanel=void 0,this.background=void 0,this.warningPanel=void 0,this.showOutOfMoveAnimation=void 0,this.hideOutOfMoveAnimation=void 0,this.scene=e,this.createUI(),this.alignUI()}var t=e.prototype;return t.createUI=function(){this.createBigWarningPanel(),this.createWarningPanel(),this.createBackground()},t.alignUI=function(){Phaser.Display.Align.In.Center(this.warningBigPanel,this.scene.gameZone,0,0),Phaser.Display.Align.In.Center(this.background,this.scene.gameZone),this.scene.world.isLandscape()?Phaser.Display.Align.In.TopCenter(this.warningPanel,this.scene.board,0,17):Phaser.Display.Align.In.TopCenter(this.warningPanel,this.scene.board,0,10)},t.createBigWarningPanel=function(){this.warningBigPanel=new Jg(this.scene),this.warningBigPanel.setDepth(cy),this.warningBigPanel.setAlpha(0),this.scene.add.existing(this.warningBigPanel)},t.createBackground=function(){var e=this.scene.gameZone,t=e.width,n=e.height;this.background=this.scene.add.image(0,0,uy,hy.BLANK).setDepth(za.Z.POPUP-1).setTint(0).setAlpha(0),this.background.setWorldSize(t,n),this.background.setInteractive()},t.createWarningPanel=function(){this.warningPanel=new oy(this.scene)},t.runShowHardLevelPortraitAnimation=function(e){var t,n,i,r,s=this;null!=(t=this.showOutOfMoveAnimation)&&t.isPlaying()||null!=(n=this.hideOutOfMoveAnimation)&&n.isPlaying()||(this.scene.vibrateController.handleWarning(),null==(i=this.showOutOfMoveAnimation)||i.remove(),null==(r=this.hideOutOfMoveAnimation)||r.remove(),this.showOutOfMoveAnimation=this.scene.tweens.add({delay:300,targets:[this.warningBigPanel],alpha:1,duration:500,onComplete:function(){s.runHideWarningBigPanelAnimation(e)},onStart:function(){s.warningBigPanel.revive(),s.warningBigPanel.setAlpha(0),s.warningBigPanel.runWarningIdleAnimation(),s.runBackgroundAnimation(0,.8,300,0)}}))},t.runHideWarningBigPanelAnimation=function(e){var t,n,i=this;null==(t=this.showOutOfMoveAnimation)||t.remove(),null==(n=this.hideOutOfMoveAnimation)||n.remove(),this.hideOutOfMoveAnimation=this.scene.tweens.add({targets:[this.warningBigPanel],alpha:{from:1,to:0,delay:1e3,duration:300},onComplete:function(){e&&e(),i.warningBigPanel.kill()},onStart:function(){i.runBackgroundAnimation(.8,0,300,0)}})},t.runShowOutOfMoveAnimation=function(e){var t,n,i,r,s=this;null!=(t=this.showOutOfMoveAnimation)&&t.isPlaying()||null!=(n=this.hideOutOfMoveAnimation)&&n.isPlaying()||(this.warningPanel.updateText("Might run out of moves"),this.warningPanel.setTintColor(16777215),this.scene.world.isLandscape()&&!this.scene.world.isPortrait()?this.warningPanel.setBaseScale(1.2*this.scene.boardRatio):this.warningPanel.setBaseScale(1*this.scene.boardRatio),this.scene.vibrateController.handleWarning(),null==(i=this.showOutOfMoveAnimation)||i.remove(),null==(r=this.hideOutOfMoveAnimation)||r.remove(),this.showOutOfMoveAnimation=this.scene.tweens.add({targets:[this.warningPanel],alpha:1,duration:300,onComplete:function(){s.runHideWarningPanelAnimation(e)},onStart:function(){s.warningPanel.setAlpha(0).setToBaseScale(),s.warningPanel.revive()}}))},t.runShowHardLevelLandscapeAnimation=function(e){var t,n,i,r,s=this;null!=(t=this.showOutOfMoveAnimation)&&t.isPlaying()||null!=(n=this.hideOutOfMoveAnimation)&&n.isPlaying()||(this.warningPanel.updateText("Hard level"),this.warningPanel.setTintColor(16504705),this.warningPanel.setBaseScale(1.2*this.scene.boardRatio),this.scene.vibrateController.handleWarning(),null==(i=this.showOutOfMoveAnimation)||i.remove(),null==(r=this.hideOutOfMoveAnimation)||r.remove(),this.showOutOfMoveAnimation=this.scene.tweens.add({targets:[this.warningPanel],alpha:1,duration:500,onComplete:function(){s.runHideWarningPanelAnimation(e)},onStart:function(){s.warningPanel.setAlpha(0).setToBaseScale(),s.warningPanel.revive()}}))},t.runHideWarningPanelAnimation=function(e){var t,n,i=this;null==(t=this.showOutOfMoveAnimation)||t.remove(),null==(n=this.hideOutOfMoveAnimation)||n.remove(),0!==this.warningPanel.alpha&&(this.hideOutOfMoveAnimation=this.scene.tweens.add({targets:[this.warningPanel],scale:{from:this.warningPanel.scale,to:.95*this.warningPanel.scale,duration:400,yoyo:!0,repeat:2},alpha:{from:1,to:0,delay:2500,duration:300},onComplete:function(){e&&e(),i.warningPanel.kill()}}))},t.runBackgroundAnimation=function(e,t,n,i){var r;void 0===e&&(e=0),void 0===t&&(t=.8),void 0===n&&(n=300),void 0===i&&(i=0),e!==t&&this.background&&(this.background.revive(),(null==(r=this.background)?void 0:r.alpha)!==t&&this.scene.tweens.add({targets:[this.background],alpha:t,duration:n,delay:i}))},t.stopShowOutOfMoveAnimation=function(){var e,t;null==(e=this.showOutOfMoveAnimation)||e.remove(),null==(t=this.hideOutOfMoveAnimation)||t.remove(),this.warningPanel.setAlpha(0).kill(),this.warningBigPanel.setAlpha(0).kill(),this.background.setAlpha(0).kill()},e}(),py=dy;function fy(e,t){var n="undefined"!==typeof T()&&b()(e)||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){var n;if(!e)return;if("string"===typeof e)return vy(e,t);var i=S()(n=Object.prototype.toString.call(e)).call(n,8,-1);"Object"===i&&e.constructor&&(i=e.constructor.name);if("Map"===i||"Set"===i)return I()(e);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return vy(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var i=0;return function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function vy(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var my=ja.Z.GAMEPLAY,gy=(my.KEY,my.FRAME),yy=GameCore.Configs,Ey=yy.Match,Sy=yy.Gameplay,wy=(yy.Ads,Sy.TimePlay),Iy=function(e){function t(){for(var t,n,i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return(n=e.call.apply(e,x()(t=[this]).call(t,r))||this).gameplayMode=void 0,n.currentScore=0,n.currentDiamond=0,n.prevTargetScore=0,n.isReachTargetScore=!1,n.board=void 0,n.vibrateController=void 0,n.layoutManager=void 0,n.itemManager=void 0,n.screwManager=void 0,n.timeManager=void 0,n.guideManager=void 0,n.stateManager=void 0,n.particlePool=void 0,n.holeObjectPool=void 0,n.holeScrewPool=void 0,n.holeBodyPool=void 0,n.ropeChainPool=void 0,n.ropePool=void 0,n.saveTimer=void 0,n.adsTimer=void 0,n.woodRenderTexturePacker=void 0,n.holeScrewAreas=[],n.screws=[],n.woods=[],n.ropes=[],n.worldCategory=new($()),n.usingCategory=[],n.baseScrewCategory=0,n.baseRopeGroup=0,n.numberOfRescue=0,n.firstStepWinAnimation=void 0,n.warningAnimation=void 0,n.prepareBoardAnimation=void 0,n.boardRatio=1,n.create=function(){e.prototype.create.call((0,Ka.Z)(n)),n.matter.world.autoUpdate=!1,n.baseScrewCategory=n.matter.world.nextCategory(),n.baseRopeGroup=n.matter.world.nextGroup(!0),n.woodRenderTexturePacker=new Rg((0,Ka.Z)(n),"wood-textures"),n.woodRenderTexturePacker.frameWithPadding=!0,n.world.isLandscape()?n.createBackground(gr.Z.BACKGROUND_LANDSCAPE.KEY):n.createBackground(gr.Z.BACKGROUND.KEY),n.createController(),n.createUI(),n.createAnimations(),n.createPools(),n.createManager(),n.createClickCallback(),n.listenEvents(),n.createDebug()},n.run=function(){n.showAllUI(),n.stateManager.ready(),n.level.getLevelData()?n.layoutManager.objects.header.updateText(n.level.getLevel(),n.level.getStep()):n.level.preloadLevelDataAsync().then((function(){n.layoutManager.objects.header.updateText(n.level.getLevel(),n.level.getStep())})),n.updateCurrentScrew(),n.checkAndAddShortcut(),n.ads.showBannerAdAsync().catch((function(e){}));var e=n.player.getPlayerSettings();n.vibrateController.setAllowVibrate(e.vibrate),n.handleMapStateChange()},n._elapseTime=0,n.BASE_FPS=120,n.tempContainer=void 0,n.centerContainer=void 0,n.runShakingAnimation=function(e,t){var i;void 0===e&&(e=5),void 0===t&&(t=90);var r={x:n.board.x,y:n.board.y};n.vibrateController.handleUseHammer(),n.centerContainer||(n.centerContainer=n.add.container(r.x,r.y)),n.tempContainer||(n.tempContainer=n.add.container(-r.x,-r.y),n.centerContainer.add(n.tempContainer));for(var s,a=[],o=[],c=fy(n.holeScrewAreas);!(s=c()).done;){var l=s.value,u=l.getScrew();u&&o.push(u),a.push(l.getHoleImage())}for(var h,d=[],p=fy(n.holeObjectPool.getChildren());!(h=p()).done;){var f=h.value;f.active&&d.push.apply(d,f.getUI())}for(var v,m=[],g=fy(n.ropes);!(v=g()).done;){var y=v.value;m.push.apply(m,y.getUI())}var E=x()(i=[]).call(i,a,n.woods,o,d,m);n.tweens.addCounter({duration:t,repeat:2,yoyo:!0,ease:Phaser.Math.Easing.Sine.Out,onStart:function(){n.addGameObjectsToContainer(n.tempContainer,E)},onUpdate:function(t){var i=1.2-t.progress;n.board.x=r.x+Math.random()*i*e-.5*i*e,n.board.y=r.y+Math.random()*i*e-.5*i*e,n.centerContainer.x=n.board.x,n.centerContainer.y=n.board.y},onComplete:function(){n.board.x=r.x,n.board.y=r.y,n.centerContainer.x=r.x,n.centerContainer.y=r.y,n.tempContainer.remove(E)}})},n.rescued=function(){n.timeManager.initTimeBonus(1e3*wy.Bonus),n.stateManager.play()},n.replay=function(){var e=n.itemManager.isReplayByItem();n.analytics.event(Z._.LEVEL_RETRY,{level:n.level.getLevelWithStep()}),n.registry.set(Bh,!1),n.registry.set(Nh,!1),e||n.level.setStep(1),n.stateManager.ready()},n.lose=function(){n.itemManager.cancelActiveItem(),n.stateManager.rescue()},n.handleWoodOut=function(){n.vibrateController.handleWoodOut(),n.itemManager.updateAvailableItems(),n.screwManager.handleWoodOutOfBoard()},n.handleShowInterstitialAd=(0,a.Z)(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!1!==n.ads.canbeShowInterstitialAd()){e.next=2;break}return e.abrupt("return");case 2:return n.audio.pauseMusic(),n.audio.muteAll(),e.prev=4,e.next=7,n.ads.showInterstitialAdAsync();case 7:e.next=12;break;case 9:e.prev=9,e.t0=e.catch(4);case 12:n.audio.unmuteAll(),n.audio.playMusic(),n.ads.preloadInterstitialAdAsync().catch((function(){}));case 15:case"end":return e.stop()}}),e,null,[[4,9]])}))),n.showNotifyNoAds=function(){n.game.globalScene.screen.open(Vr.o4.NOTIFY_SCREEN,{message:"No ads to display!",duration:1200,loading:!1})},n.showNotifySkipAds=function(){n.game.globalScene.screen.open(Vr.o4.NOTIFY_SCREEN,{message:"Sorry, No Rewards!\nYou have cancelled the ad!",duration:1500,loading:!1})},n.updateScore=(0,ar.D)((function(){}),1e3),n}(0,o.Z)(t,e);var n=t.prototype;return n.preload=function(){var e=this;this.events.on(Phaser.Scenes.Events.WAKE,this.run),this.events.on(Phaser.Scenes.Events.CREATE,this.run),this.events.on(Phaser.Scenes.Events.PAUSE,(function(){var t;null==(t=e.screwManager)||null==(t=t.timerCheckMove)||t.remove()}))},n.createUI=function(){this.createMain()},n.createDebug=function(){var e=this;if(GameCore.Utils.Valid.isDebugger()){var t=this.add.container(200,300),n=this.add.container(200,300);if(GameCore.Utils.Valid.isDebugger()){this.add.existing(t);var i=1,r=new dc(this,{text:"Hide\nAll UI",callback:function(){var r=(0,a.Z)(h().mark((function r(){return h().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:i=.01===i?1:.01,e.layoutManager.objects.header.setAlpha(i),e.layoutManager.objects.footer.setAlpha(i),t.setAlpha(i),n.setAlpha(i);case 5:case"end":return r.stop()}}),r)})));return function(){return r.apply(this,arguments)}}()});t.add(r);var s=.01,o=new dc(this,{text:"Hide \nAll \nDebug",callback:function(){dc.setAlphaAll(s),s=.01===s?.75:.01}});t.add(o);var c=new dc(this,{text:"Win",callback:function(){var t=(0,a.Z)(h().mark((function t(){return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.stateManager.nextLevel();case 1:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()});t.add(c);var l=new dc(this,{text:"Lose",callback:function(){var t=(0,a.Z)(h().mark((function t(){return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.stateManager.rescue();case 1:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()});t.add(l);var u=new dc(this,{text:"Show\nGuide",callback:function(){var t=(0,a.Z)(h().mark((function t(){return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.layoutManager.showGuideScreen();case 1:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()});t.add(u);var d=new dc(this,{text:"Show\nOut of\nMove",callback:function(){var t=(0,a.Z)(h().mark((function t(){return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.warningAnimation.runShowOutOfMoveAnimation();case 1:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()});t.add(d),t.add(new dc(this,{text:"Show\nHard\nLevel",callback:function(){var t=(0,a.Z)(h().mark((function t(){return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.world.isPortrait()?e.warningAnimation.runShowHardLevelPortraitAnimation():e.warningAnimation.runShowHardLevelLandscapeAnimation();case 1:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()}));var p=t.list.length;t.setSize(40,45*p),t.list.forEach((function(e,t){e.setPosition(0,-45*p/2+20+2.5+45*t)})),Phaser.Display.Align.In.LeftCenter(t,this.board,0,0)}if(GameCore.Utils.Valid.isDebugger()){this.add.existing(n);var f={Ice:{levels:[137,138,265,271,284,293,302,316,344,344,352,354,361,364,364,366,367,367,369,371,373,376,377,379,383,391,397,399,403,410,411,424,427,436,439,440,443,453,456,461,473,480,484,485,485,489,489,490,510,517,519,525,529,533,534,535,535,540,541,546,553,555,556,558,559,562,564,568,572,573,574,577,578,580,585,587,588,589,590,593,594,596,599,602,609,619,621,626,628,633,634,638,641,642,650,651,654,659,660,664,671,680,705,743,751,761,766,776,804,805,811,844,868,870,878,890,893,902,910,922,928,930,934,938,942,948,950,958,977,992,994,1e3,1008,1009,1048,1054,1063,1069,1079,1081,1091,1096,1098,1100,1103,1107,1108,1110,1115,1129,1140,1141,1154,1160,1164,1168,1171,1173,1178,1188,1194,1195,1207,1208,1224,1247,1249,1260,1273,1275,1284,1288,1288,1297,1299,1301,1318,1351,1357],steps:[2,2,2,2,2,2,2,2,1,2,1,1,1,1,2,1,1,2,1,2,1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,1,2,1,2,2,2,2,2,2,2,2,2,1,2,2,1,2,2,1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,1,2,2,2,1,2,2,2,2,2,2,2],idx:0},LockFlyingKey:{levels:[15,25,33,46,55,62,79,89,97,103,111,119,124,126,141,142,156,156,157,168,174,189,193,202,239,256,279,290,294,295,300,301,302,321,329,338,363,371,374,421,467,468,483,486,491,491,495,531,553,563,565,567,573,584,608,636,640,644,646,658,732,750,758,759,772,775,788,793,810,826,845,864,881,891,921,937,953,954,969,971,1025,1035,1076,1093,1095,1099,1119,1125,1142,1271,1278,1333,1347,1359],steps:[1,2,1,1,2,2,1,2,1,1,1,2,1,2,2,2,1,2,2,2,2,2,1,1,2,1,2,2,2,2,2,2,1,2,1,2,2,1,1,1,1,1,1,1,1,2,2,2,1,1,1,1,2,2,2,2,1,2,2,1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,1,2,2,2,2,2,2,2,2,1,2,1,1,2],idx:0},KeyAndLock:{levels:[665,667,671,688,702,705,706,707,711,713,726,730,734,739,744,746,772,783,787,794,802,804,807,827,832,835,841,852,856,862,1057,1111],steps:[2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,1,1],idx:0},NumberLock:{levels:[377,379,391,411,424,425,427,428,430,436,440,443,451,453,456,457,461,473,480,485,488,489,503,510,517,519,525,529,531,533,535,544,545,547,552,553,556,558,559,561,562,563,565,568,572,574,577,578,578,579,580,580,585,585,586,587,588,588,589,591,592,593,594,596,599,602,604,609,615,621,626,633,634,635,638,642,650,675,683,699,725,776,817,843,855],steps:[2,2,2,2,2,1,2,1,1,2,2,2,1,2,2,1,2,2,2,2,1,2,2,2,2,2,2,2,2,2,2,1,1,2,2,2,1,2,2,1,2,2,1,2,2,2,2,1,2,2,1,2,1,2,1,1,1,2,2,1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,1,2,2,2,2,2,2,2,2,2],idx:0},IronOverlay:{levels:[427,429,431,442,443,444,449,454,461,466,466,467,469,471,472,474,475,476,477,478,479,480,480,482,483,484,485,486,487,489,490,490,491,491,492,492,493,493,494,494,495,495,496,496,497,498,499,500,501,502,502,504,505,505,506,506,507,508,509,509,510,511,512,512,513,513,514,515,516,516,517,518,518,519,520,520,521,522,523,523,524,525,525,526,527,528,528,529,530,531,531,532,533,533,534,535,536,536,537,538,538,539,539,540,540,541,541,542,543,543,544,544,545,545,546,547,548,548,549,550,550,551,552,553,553,554,554,555,556,556,557,558,560,561,561,562,563,564,565,566,567,568,569,570,571,572,573,574,574,575,576,576,577,577,578,578,579,580,581,581,582,583,586,587,587,588,589,589,590,591,591,592,595,595,596,597,598,600,600,601,602,602,603,604,604,605,606,607,608,609,610,611,612,613,613,614,615,616,617,618,619,620,621,622,624,625,625,626,627,629,630,630,631,632,633,634,635,636,637,639,640,641,641,642,642,643,644,645,646,647,648,649,650,651,652,652,653,654,655,656,656,657,657,658,659,659,660,660,661,672,751,754,769,1181,1256,1260,1261,1265,1270,1271,1272,1277,1280,1285,1290,1291,1295,1298,1300,1303,1306,1307,1311,1316,1317,1325,1326,1327,1330,1332,1335,1336,1337,1338,1340,1341,1342,1352,1360],steps:[1,1,1,1,1,1,1,1,2,1,2,2,2,2,2,2,2,2,2,2,2,1,2,2,2,2,2,2,2,2,1,2,1,2,1,2,1,2,1,2,1,2,1,2,2,2,2,2,2,1,2,2,1,2,1,2,2,2,1,2,2,2,1,2,1,2,2,2,1,2,2,1,2,1,1,2,2,2,1,2,2,1,2,2,2,1,2,1,2,1,2,2,1,2,2,2,1,2,2,1,2,1,2,1,2,1,2,2,1,2,1,2,1,2,2,1,1,2,2,1,2,2,1,1,2,1,2,2,1,2,2,2,2,1,2,2,2,2,2,2,2,2,2,2,2,2,2,1,2,2,1,2,1,2,1,2,2,2,1,2,2,2,2,1,2,2,1,2,2,1,2,1,1,2,2,2,2,1,2,2,1,2,2,1,2,2,2,2,2,1,2,2,2,1,2,2,2,2,2,2,2,2,2,2,2,1,2,2,2,2,1,2,2,2,2,2,2,2,2,2,2,1,2,1,2,2,2,2,2,2,2,2,2,2,1,2,2,2,2,1,2,1,2,2,1,2,1,2,2,2,2,2,2,1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2],idx:0},Rope:{levels:[426,430,434,437,446,447,452,475,491,495,496,497,498,499,500,501,503,504,506,507,508,510,511,513,514,520,521,523,526,529,530,532,534,535,540,543,546,547,549,551,568,571,573,576,579,582,583,655,658,661],steps:[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],idx:0}},v=function(){var t=f[m],i=m;if(i.length>5)for(var r=!1,s=0;s<i.length;s++)0!=s&&(s%7==1&&(r=!1),i[s]!==i[s].toUpperCase()||r||(i=S()(i).call(i,0,s)+"\n"+S()(i).call(i,s),s++,r=!0));var o=new dc(e,{text:i,callback:function(){var n=(0,a.Z)(h().mark((function n(){var i;return h().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return i=t.levels[t.idx],e.level.setMaxLevel(i),e.level.setLevel(i),e.level.setStep(t.steps[t.idx]),n.next=6,e.game.player.updatePlayerLevel(i);case 6:if(e.level.getLevelData()){n.next=17;break}return e.game.globalScene.screen.open(Vr.o4.NOTIFY_SCREEN,{message:"Loading...",loading:!0}),n.prev=9,n.next=12,e.level.preloadLevelDataAsync();case 12:n.next=16;break;case 14:n.prev=14,n.t0=n.catch(9);case 16:window.game.globalScene.screen.close(Vr.o4.NOTIFY_SCREEN);case 17:e.run(),t.idx=t.idx+1,t.idx>=t.levels.length&&(t.idx=0);case 20:case"end":return n.stop()}}),n,null,[[9,14]])})));return function(){return n.apply(this,arguments)}}()});n.add(o)};for(var m in f)v();var g=n.list.length;n.setSize(40,45*g),n.list.forEach((function(e,t){e.setPosition(0,-45*g/2+20+2.5+45*t)})),Phaser.Display.Align.In.RightCenter(n,this.board,0,0)}}},n.createMain=function(){var e=this.gameZone,t=e.width,n=(e.height,gy.BOARD.WIDTH),i=gy.BOARD.HEIGHT;if(this.world.isLandscape()){var r=t-100-gy.BUTTON_ITEM.WIDTH-184;r>1.23*i&&(r=1.23*i),r=Math.max(r,n),this.board=new tm(this,r)}else this.world.isPortrait()?this.board=new tm(this):(this.boardRatio=1.15,this.board=new tm(this,n*this.boardRatio,i*this.boardRatio));var s=this.ads.getBannerHeight();Phaser.Display.Align.In.Center(this.board,this.gameZone,0,-s/2)},n.resetGames=function(){this.warningAnimation.stopShowOutOfMoveAnimation(),this.woodRenderTexturePacker.reset(),this.guideManager.reset(),this.holeScrewPool.reset(),this.holeObjectPool.reset(),this.holeBodyPool.reset(),this.ropeChainPool.reset(),this.ropePool.reset(),this.woods.forEach((function(e){try{e.reset()}catch(t){}})),this.screwManager.reset(),this.holeScrewAreas=[],this.screws=[],this.woods=[],this.ropes=[]},n.initGame=function(){var e=this.level.getLevelData();if(e){var t=e.steps[this.level.getStep()-1].boardIncreaseSize;GameCore.Configs.Gameplay.ScaleFactor=1.2*(1-t/2)*this.boardRatio;var n=Number(null==e?void 0:e.steps[this.level.getStep()-1].time);if(n&&!GameCore.Configs.Gameplay.TimePlay.UseMock?this.timeManager.initTime(1e3*n):this.timeManager.initTimeByStep(this.level.getStep()),this.numberOfRescue=0,this.timeManager.pause(),this.resetGames(),this.usingCategory=[],this.initOverlayObjects(),this.initHoles(),this.initWoods(),this.isLevelHaveRope()){var i,r=this.getCategoryByLayer(60,!1);-1===Zt()(i=this.usingCategory).call(i,r)&&this.usingCategory.push(r)}this.screwManager.initBoard({woods:this.woods,holeScrewAreas:this.holeScrewAreas,screws:this.screws,usingCategory:this.usingCategory,ropes:[]}),this.initBoardObjects()}},n.isLevelHaveRope=function(){var e=this.level.getLevelData();return!!e&&e.steps[this.level.getStep()-1].itemRopeModels.length>0},n.getCategoryByLayer=function(e,t){if(void 0===t&&(t=!1),t&&(e+=30),this.worldCategory.has(e))return this.worldCategory.get(e);var n=this.matter.world.nextCategory();return this.worldCategory.set(e,n),n},n.initWoods=function(){var e=this.level.getLevelData();if(e){for(var t=e.steps[this.level.getStep()-1],n=t.ironModels,i=t.holeModels,r=this.board.getBasePosition(),s=new(Mn()),a=0;a<n.length;a++){var o=new _f(this,n[a],i,r,this.woodRenderTexturePacker);this.woods.push(o)}this.woodRenderTexturePacker.saveTexture();for(var c=0;c<this.woods.length;c++){var l=this.woods[c],u=this.getCategoryByLayer(n[c].layerPhysic);l.updateConfig(n[c],u),s.add(u),l.attachHoles(this.holeScrewAreas)}for(var h,d=fy(Uu()(s).call(s));!(h=d()).done;){var p=h.value;this.usingCategory.push(p)}}},n.initHoles=function(){var e=this.level.getLevelData();if(e)for(var t=e.steps[this.level.getStep()-1],n=t.holeModels,i=t.keyModels,r=this.board.getBasePosition(),s=0;s<n.length;s++){var a=this.screwManager.isHoleOverlay(n[s].id),o=this.screwManager.getMinLayerOfOverlayHole(n[s].id),c=this.holeScrewPool.spawn();if(c.updateConfig(n[s],i,r,o),1===n[s].hasScrew){var l=this.holeScrewPool.spawnScrew();l.updateConfig(n[s],r,a,o),c.attachScrew(l),this.screws.push(l)}this.holeScrewAreas.push(c)}},n.initOverlayObjects=function(){var e=this.level.getLevelData();if(e){var t=e.steps[this.level.getStep()-1],n=t.ironOverlayModels,i=t.ironModels;this.screwManager.initOverlayWoods(n,i)}},n.initRopes=function(){var e=this,t=this.level.getLevelData(),n=this.board.getBasePosition();t&&t.steps[this.level.getStep()-1].itemRopeModels.forEach((function(t,i){var r=e.ropePool.spawn(t,n,e.baseRopeGroup,i);e.ropes.push(r)}))},n.initBoardObjects=function(){this.initRopes(),this.screwManager.setRopes(this.ropes);var e=this.level.getLevelData();if(e)for(var t=e.steps[this.level.getStep()-1].keyModels,n=this.board.getBasePosition(),i=0;i<t.length;i++){var r=t[i];this.holeObjectPool.spawn("FlyingKey").updateConfig(r,n)}},n.createController=function(){this.vibrateController=new Xm(this)},n.createManager=function(){this.layoutManager=new sf(this),this.itemManager=new vv(this),this.itemManager.init(),this.screwManager=new Ff(this),this.timeManager=new Vf(this),this.guideManager=new am(this),this.stateManager=new cv(this),this.stateManager.init()},n.createPools=function(){this.particlePool=new Qv(this),this.holeObjectPool=new Fm(this),this.holeScrewPool=new hg(this),this.holeBodyPool=new pg(this),this.ropeChainPool=new yg(this),this.ropePool=new Ag(this)},n.initManager=function(){this.guideManager.init(),this.layoutManager.init()},n.stopManager=function(){this.stateManager.stop(),this.itemManager.stop(),this.screwManager.stop(),this.guideManager.stop(),this.layoutManager.stop()},n.startManager=function(){this.stateManager.start(),this.itemManager.start(),this.screwManager.start(),this.layoutManager.start(),this.guideManager.start()},n.createClickCallback=function(){var e=this,t=GameCore.Configs.Items.WatchAdReward;this.layoutManager.objects.header.pauseButton.onClick=function(){e.stateManager.pause(),e.layoutManager.showPauseScreen()},this.layoutManager.objects.header.goldScrewBar.onClick=function(){e.stateManager.pause(),e.layoutManager.showRewardScreen({treasure:{GoldScrew:t.GoldScrew,SilverScrew:t.SilverScrew},onceClose:function(){e.stateManager.play()}})},this.layoutManager.objects.header.silverScrewBar.onClick=function(){e.stateManager.pause(),e.layoutManager.showRewardScreen({treasure:{GoldScrew:t.GoldScrew,SilverScrew:t.SilverScrew},onceClose:function(){e.stateManager.play()}})}},n.listenEvents=function(){var e=this;Yu.on(Fu.RESCUE,(function(){e.rescued()})),Yu.on(Fu.REPLAY,(function(){e.replay()})),Yu.on(Fu.LOSE,(function(){e.lose()})),Yu.on(Fu.WOOD_OUT,(function(){e.handleWoodOut()})),this.events.on(Phaser.Scenes.Events.SLEEP,(function(){e.stateManager.quit()}))},n.update=function(t,n){e.prototype.update.call(this,t,n),this.stateManager.update(n)},n.updateGameplay=function(e){this._elapseTime+=e;for(var t=1e3/this.BASE_FPS;this._elapseTime>=t&&this.screwManager.shouldUpdateBoard();)this._elapseTime-=t,this.matter.world.step(t)},n.checkGameState=function(){var e=0;this.woods.forEach((function(t){t.checkOutOfGameZone(),t.getIsWoodOutOfBoard()&&e++})),e===this.woods.length&&this.stateManager.nextLevel()},n.startGame=function(){this.initGame(),this.initManager(),this.startManager(),this.gameplayMode===Er&&Ey.ContinueSingleMatchEnabled},n.addGameObjectsToContainer=function(e,t){Ai()(t).call(t,(function(e,t){var n,i;return(null!=(n=e.depth)?n:0)-(null!=(i=t.depth)?i:0)})),e.add(t)},n.createAnimations=function(){this.createWinAnimation(),this.createWarningAnimation()},n.createWarningAnimation=function(){this.warningAnimation=new py(this)},n.runStartLevelAnimation=function(e,t,n){var i=this;void 0===e&&(e=!1),void 0===t&&(t=!1);var r=[],s=0,a=this.timeManager.getTime();if(e){for(var o=GameCore.Configs.Items.Lightning.StrikeCount,c=this.screwManager.getRandomFlyingKeys(o),l=0;l<c.length;l++)r.push(c[l]);o-=c.length;for(var u=this.screwManager.getRandomWoods(o),h=0;h<u.length;h++)r.push(u[h]);(0,Kg.Z)(r)}if(t&&(s=GameCore.Configs.Items.BonusTime.Duration,this.timeManager.addTimeToCurrentTime(s)),this.prepareBoardAnimation||(this.prepareBoardAnimation=new zg(this)),!GameCore.Configs.Gameplay.ShowSwitchStepAnimation)return this.prepareBoardAnimation.runLightningAnimation(r,!0),this.prepareBoardAnimation.runBonusTimeAnimation(a,s,!0),this.screwManager.updateHoleBodyCategory(),this.itemManager.updateAvailableItems(),void(n&&n());this.setDisabledButton(!0),this.screwManager.handleScrewAnimation(!0),this.prepareBoardAnimation.completeHideUIObjects(),this.prepareBoardAnimation.runShowBoardAnimation(r,a,s).then((function(){i.screwManager.handleScrewAnimation(!1),i.screwManager.updateHoleBodyCategory(),i.itemManager.updateAvailableItems(),n&&n()}))},n.runGameOverAnimation=function(){},n.runBonusScoreAnimation=function(e){},n.runTotalScoreAnimation=function(e,t,n){},n.runEncouragingAnimation=function(e){},n.handleMapStateChange=function(){var e=this,t=[{selector:lt,callback:function(t){e.vibrateController.setAllowVibrate(t.vibrate)}},{selector:vt,callback:function(t){e.itemManager.updateLimitItems(t)}},{selector:mt,callback:function(t){e.layoutManager.objects.header.goldScrewBar.setValue(t)}},{selector:gt,callback:function(t){e.layoutManager.objects.header.silverScrewBar.setValue(t)}}];this.handleStateChange(t)},n.checkAndAddShortcut=function(){if(!this.game.player.getPlayer().isUserNew){var e=this.storage.getState();Tr(e)!=Ir&&this.facebook.attemptToAddShortcut()}},n.updateCurrentScrew=function(){var e=this.player.getGoldScrew(),t=this.player.getSilverScrew();this.layoutManager.objects.header.goldScrewBar.setValue(e),this.layoutManager.objects.header.silverScrewBar.setValue(t)},n.createWinAnimation=function(){this.firstStepWinAnimation=new Km(this)},n.runWinStep1Animation=function(e){GameCore.Configs.Gameplay.ShowSwitchStepAnimation?(this.setDisabledButton(!0),this.prepareBoardAnimation.runHideUIObjects(),this.firstStepWinAnimation.play((function(){e&&e()}))):e&&e()},n.setDisabledButton=function(e){this.layoutManager.objects.header.pauseButton.setDisabled(e),this.layoutManager.objects.header.pauseButton.setAlpha(1),this.layoutManager.objects.header.goldScrewBar.setDisabled(e),this.layoutManager.objects.header.goldScrewBar.setAlpha(1),this.layoutManager.objects.header.silverScrewBar.setDisabled(e),this.layoutManager.objects.header.silverScrewBar.setAlpha(1),this.itemManager.setDisabledItems(e),e||this.itemManager.updateAvailableItems(),this.screwManager.setDisabledAdsHole(e)},n.handleGuideScrewEvent=function(e){this.guideManager.hasGuide()&&Yu.emit(e)},n.hideAllUI=function(){this.layoutManager.objects.header.setVisible(!1),this.layoutManager.objects.footer.setVisible(!1),this.board.setVisible(!1),this.resetGames()},n.showAllUI=function(){this.layoutManager.objects.header.setVisible(!0),this.layoutManager.objects.footer.setVisible(!0),this.board.setVisible(!0)},t}(_a.Z);var Ay=Iy,Ty=function(e){function t(t,n){return e.call(this,t,n)||this}return(0,o.Z)(t,e),t.prototype.clearItem=function(){var e=this;this.objects.children.each((function(t){e.remove(t)})),this.objects.clear(!1,!1),this.reset()},t}(n(623).Z),Cy=Ty,by=ja.Z.DEFAULT,Py=by.KEY,xy=by.FRAME,Ry=GameCore.Configs.Network,Oy=function(e){function t(t){var n;(n=e.call(this,t)||this).titlePanel=void 0,n.titleText=void 0,n.storeItems={},n.storeBundles={},n.scroller=void 0,n.adsTimer=void 0,n.showAbleItems=void 0,n.showAbleBundles=void 0,n.loading=void 0,n.products=[],n.handleOnBuy=function(){var e=(0,a.Z)(h().mark((function e(t){var i,r;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(i=n.scene.game.globalScene).screen.open(Vr.o4.NOTIFY_SCREEN,{message:"Loading...",duration:0,loading:!0}),e.prev=2,n.logViewItem(t),e.next=6,n.scene.payment.purchaseAsync(t);case 6:if(e.sent){e.next=9;break}throw new Error("You have canceled payment!");case 9:return e.next=11,i.consumePurchasesReward();case 11:if(r=e.sent,0!==te()(r).length){e.next=14;break}throw new Error("There was an error\nduring the payment!\nPlease try again.");case 14:return i.screen.close(Vr.o4.NOTIFY_SCREEN),e.next=17,n.handleShowProductReceive(r);case 17:n.showBuyableProducts(),e.next=23;break;case 20:e.prev=20,e.t0=e.catch(2),i.screen.open(Vr.o4.NOTIFY_SCREEN,{message:e.t0.message,duration:2e3,loading:!1});case 23:case"end":return e.stop()}}),e,null,[[2,20]])})));return function(t){return e.apply(this,arguments)}}(),n.handleOnWatchAds=function(){var e=(0,a.Z)(h().mark((function e(t){var i,r,s,a,o;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=vu.Z.PRODUCTS[t].itemsDataByKey,r=n.scene,s=r.audio,a=r.game,e.prev=2,a.globalScene.screen.open(Vr.o4.NOTIFY_SCREEN,{message:"Loading ads...",duration:0,loading:!0}),s.pauseMusic(),s.muteAll(),e.next=8,new(l())((function(e,t){var i;null==(i=n.adsTimer)||i.remove(),n.adsTimer=n.scene.time.delayedCall(Ry.Timeout,t),n.scene.ads.getAdStatus(GameCore.Ads.Types.REWARDED)===GameCore.Ads.Status.LOADING?n.scene.ads.events.once(GameCore.Ads.Events.LOADED,e):n.scene.ads.preloadRewardedVideoAsync().then(e).catch(t)}));case 8:return e.next=10,n.scene.ads.showRewardedVideoAsync();case 10:return a.globalScene.screen.close(Vr.o4.NOTIFY_SCREEN),e.next=13,n.handleShowProductReceive(i);case 13:e.next=22;break;case 15:if(e.prev=15,e.t0=e.catch(2),!(e.t0 instanceof Object&&GameCore.Utils.Object.hasOwn(e.t0,"code"))){e.next=21;break}if("USER_INPUT"!==e.t0.code){e.next=21;break}return n.showNotifySkipAds(),e.abrupt("return");case 21:n.showNotifyNoAds();case 22:return e.prev=22,n.scene.ads.preloadRewardedVideoAsync().catch((function(e){})),null==(o=n.adsTimer)||o.destroy(),s.unmuteAll(),s.playMusic(),e.finish(22);case 28:case"end":return e.stop()}}),e,null,[[2,15,22,28]])})));return function(t){return e.apply(this,arguments)}}(),n.handleShowProductReceive=function(){var e=(0,a.Z)(h().mark((function e(t){var i,r,s;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=n.scene.game,r=i.globalScene,i.player,s=n.scene,e.next=4,r.openProductReceiveScreen(t,"StoreScreen",(function(){(s instanceof FE||s instanceof Ay)&&s.updateCurrentScrew()}));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.showNotifyNoAds=function(e){e&&e.name!==Vr.o4.NOTIFY_SCREEN||n.scene.game.globalScene.screen.open(Vr.o4.NOTIFY_SCREEN,{message:"No ads to display!",duration:1200,loading:!1})},n.showNotifySkipAds=function(){n.scene.game.globalScene.screen.open(Vr.o4.NOTIFY_SCREEN,{message:"Sorry, No Rewards!\nYou have cancelled the ad!",duration:1500,loading:!1})};var i=t.game.world.getWorldSize(),r=i.width;i.height;return n.setSize(r,600),n.createUI(),n.initProducts(),n.alignUI(),n}(0,o.Z)(t,e);var n=t.prototype;return n.createUI=function(){this.createTitlePanel(),this.createTitleText(),this.createStoreItems(),this.createScroller(),this.createLoading()},n.createLoading=function(){this.loading=new Ao.Z(this.scene),this.loading.kill(),this.add(this.loading),Phaser.Display.Align.In.Center(this.loading,this)},n.alignUI=function(){Phaser.Display.Align.In.TopCenter(this.titlePanel,this,0,0),Phaser.Display.Align.In.Center(this.titleText,this.titlePanel,3,-25),Phaser.Display.Align.To.BottomCenter(this.scroller,this.titlePanel,0,0)},n.createTitlePanel=function(){var e=xy.BACKGROUND_STORE_TITLE,t=e.FILE,n=e.WIDTH,i=e.HEIGHT;this.titlePanel=this.scene.make.image({key:Py,frame:t}),this.titlePanel.setWorldSize(n,i),this.add(this.titlePanel)},n.createTitleText=function(){this.titleText=new ho.Z(this.scene,{text:"SHOP",fontSize:this.scene.fontSize(25),strokeColor:9194534,strokeThickness:3,strokeAlpha:.35,strokeOffset:{y:1}}).setTint(16509640),this.add(this.titleText)},n.createStoreItems=function(){var e=this;(this.storeItems={},this.storeBundles={},GameCore.Configs.Payment.enable)&&te()(vu.Z.PRODUCTS).forEach((function(t){var n=vu.Z.PRODUCTS[t],i=t===vu.Z.ID.SCREW_PILE;if(n)if("Normal"===n.type){var r=n,s=r.itemsDataByKey.GoldScrew;if(s||(s=r.itemsDataByKey.SilverScrew),!s)return;var a=new _u(e.scene,{width:r.background.width,height:r.background.height,icon:r.icon,title:r.title,value:s.toString(),price:"???",id:t});e.storeItems[t]=a,a.onBuy=function(){i?e.handleOnWatchAds(t):e.handleOnBuy(t)}}else if("RemoveAds"===n.type){var o=new Gu(e.scene,{id:vu.Z.ID.REMOVE_ADS_30,price:"???",isAdsFree:i});e.storeBundles[t]=o,o.onBuy=function(){i?e.handleOnWatchAds(t):e.handleOnBuy(t)}}else if("Bundle"===n.type){var c=new Gu(e.scene,{id:vu.Z.ID.SCREW_PILE,price:"???",isAdsFree:i});e.storeBundles[t]=c,c.onBuy=function(){i?e.handleOnWatchAds(t):e.handleOnBuy(t)}}}))},n.alignShowAbleItemsAndBundles=function(){var e=this;if(0!=this.showAbleItems.length){var t=(xy.BACKGROUND_STORE_ITEM_PANEL_LONG.WIDTH-3*this.showAbleItems[0].width)/2,n=-xy.BACKGROUND_STORE_ITEM_PANEL_LONG.WIDTH/2+this.showAbleItems[0].width/2,i=-this.scroller.height/2+this.showAbleItems[0].height/2+20;this.showAbleItems.forEach((function(e,r){var s=Math.floor(r/3),a=r%3*(e.width+t)+n,o=s*(e.height+20)+i;e.setPosition(a,o)}));var r=this.showAbleItems[this.showAbleItems.length-1].y;this.showAbleBundles.forEach((function(t,n){var i=r+e.showAbleItems[0].height/2+t.height/2+20+n*(t.height+20);t.setPosition(0,i)}))}},n.createScroller=function(){this.scroller=new Cy(this.scene,{width:this.width,height:this.height-this.titlePanel.height,maxScrollOver:.1}),this.add(this.scroller)},n.logViewItem=function(e){var t,n=O()(t=this.products).call(t,(function(t){return t.productID===e})),i=(null==n?void 0:n.priceCurrencyCode)||"USD";this.scene.analytics.viewItem(i,(null==n?void 0:n.priceAmount.toString())||"0",[{item_id:(null==n?void 0:n.productID)||"",price:(null==n?void 0:n.priceAmount)||0,currency:i}]),this.scene.analytics.selectItem("store_screen","Store Screen",[{item_id:(null==n?void 0:n.productID)||"",price:(null==n?void 0:n.priceAmount)||0,currency:i}])},n.showLoading=function(){var e=this;this.scroller.setEnable(!1),this.loading.revive(),te()(this.storeItems).forEach((function(t){e.storeItems[t].kill()})),te()(this.storeBundles).forEach((function(t){e.storeBundles[t].kill()}))},n.hideLoading=function(){this.loading.kill()},n.showBuyableProducts=function(){var e=(0,a.Z)(h().mark((function e(){var t,n,i;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.scene.payment.getCatalogAsync();case 2:return t=e.sent,e.next=5,this.scene.payment.getPurchasesAsync();case 5:return n=e.sent,i=_e()(t).call(t,(function(e){return uu()(n).call(n,(function(t){return t.productID===e.productID}))<0})),this.updateProducts(i),e.abrupt("return");case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.initProducts=function(){var e=this;this.showAbleItems=[],this.showAbleBundles=[];var t=this.scene.ads.isDisabledInterstitialAds();te()(this.storeItems).forEach((function(t){e.storeItems[t].revive(),e.showAbleItems.push(e.storeItems[t])})),te()(this.storeBundles).forEach((function(n){t&&n===vu.Z.ID.REMOVE_ADS_30?e.storeBundles[n].kill():(e.storeBundles[n].revive(),e.showAbleBundles.push(e.storeBundles[n]))})),this.alignShowAbleItemsAndBundles(),this.scroller.addItems(this.showAbleItems),this.scroller.addItems(this.showAbleBundles),this.scroller.setEnable(!0),this.scroller.createMask()},n.updateProducts=function(e){var t,n=this;this.products=e,this.hideLoading(),this.scroller.clearItem(),this.scroller.setEnable(!0),this.showAbleItems=[],this.showAbleBundles=[],te()(this.storeItems).forEach((function(e){n.storeItems[e].kill()})),te()(this.storeBundles).forEach((function(e){n.storeBundles[e].kill()}));var i=this.scene.ads.isDisabledInterstitialAds();e.forEach((function(e){var t=e.productID;if(!i||t!==vu.Z.ID.REMOVE_ADS_30)if(n.storeItems[t])n.showAbleItems.push(n.storeItems[t]),n.storeItems[t].revive(),n.storeItems[t].updatePrice(e.price);else if(n.storeBundles[t]){if(t===vu.Z.ID.REMOVE_ADS_BUNDLE)return;n.showAbleBundles.push(n.storeBundles[t]),n.storeBundles[t].revive(),n.storeBundles[t].updatePrice(e.price)}}));var r=x()(t=[]).call(t,this.showAbleItems,this.showAbleBundles);this.scene.analytics.viewItemList("store_screen","Store Screen",De()(r).call(r,(function(e){var t,i=O()(t=n.products).call(t,(function(t){return t.productID===e.id}));return{item_id:(null==i?void 0:i.productID)||"",price:(null==i?void 0:i.priceAmount)||0,currency:(null==i?void 0:i.priceCurrencyCode)||"USD"}}))),this.showAbleBundles.push(this.storeBundles[vu.Z.ID.SCREW_PILE]),this.storeBundles[vu.Z.ID.SCREW_PILE].revive(),this.alignShowAbleItemsAndBundles(),this.scroller.addItems(this.showAbleItems),this.scroller.addItems(this.showAbleBundles)},t}(Phaser.GameObjects.Container),_y=Oy,ky=ja.Z.DEFAULT,Dy=(ky.KEY,ky.FRAME,function(e){function t(t,n,i,r){var s;return(s=e.call(this,t,n,i,r)||this).scene=void 0,s.backgroundImage=void 0,s.buttonClose=void 0,s.storeUI=void 0,s.popupShowUpAnimation=void 0,s.popupFadeOutAnimation=void 0,s.handleClose=function(){s.runCloseAnimation();var e=s.scene.ads.isDisabledInterstitialAds()||!GameCore.Configs.Payment.enable;e&&s.scene.layoutManager.objects.main.adsButton.active?s.scene.layoutManager.objects.main.adsButton.kill():e||s.scene.layoutManager.objects.main.adsButton.active||s.scene.layoutManager.objects.main.adsButton.revive()},s.scene=t,s.background.setVisible(!1),s.createBackgroundImage(),s.createStoreUI(),s.createCloseButton(),s.arrangeItems(),s.createInput(),s.setDepth(Vr.Ks.POPUP),s}(0,o.Z)(t,e);var n=t.prototype;return n.open=function(){this.storeUI.setX(-350),e.prototype.open.call(this),this.runOpenAnimation(),this.storeUI.showLoading(),this.storeUI.showBuyableProducts()},n.createInput=function(){this.buttonClose.useSound=!1,this.buttonClose.onClick=this.handleClose},n.createBackgroundImage=function(){var e=this.scene.world.getWorldSize(),t=e.width,n=e.height,i=this.scene.world.isLandscape()?gr.Z.BACKGROUND_LANDSCAPE.KEY:gr.Z.BACKGROUND.KEY;this.backgroundImage=new Phaser.GameObjects.Image(this.scene,0,0,i),this.backgroundImage.setAlpha(0).setWorldSize(t,n),this.add(this.backgroundImage)},n.createStoreUI=function(){this.storeUI=new _y(this.scene),this.add(this.storeUI)},n.createCloseButton=function(){this.buttonClose=new Jc(this.scene),this.storeUI.add(this.buttonClose)},n.arrangeItems=function(){Phaser.Display.Align.In.TopRight(this.buttonClose,this.storeUI,-13,16)},n.runOpenAnimation=function(){var e;return null!=(e=this.popupShowUpAnimation)&&null!=(e=e.tween)&&e.isPlaying()||(this.scene.audio.playSound(Xa.Z.POPUP_SHOW),this.runPopupEntrancesAnimation(0,400)),l().resolve()},n.runCloseAnimation=function(){var e;return null!=(e=this.popupFadeOutAnimation)&&null!=(e=e.tween)&&e.isPlaying()||(this.scene.audio.playSound(Xa.Z.POPUP_OFF,{volume:.6}),this.runPopupExitsAnimation(0,200)),l().resolve()},n.runPopupEntrancesAnimation=function(e,t){if(!this.popupShowUpAnimation){var n=this.storeUI,i=(n.x,n.y);n.scale;this.popupShowUpAnimation=new dl({targets:[this.storeUI],delay:e,duration:t,props:{x:{start:-350,from:-350,to:0},y:i,alpha:{start:1,from:1,to:1}}})}this.scene.tweens.add({targets:[this.backgroundImage],delay:e,duration:.25*t,props:{alpha:{start:0,from:0,to:1}}}),this.popupShowUpAnimation.play()},n.runPopupExitsAnimation=function(e,t){var n=this;this.popupFadeOutAnimation||(this.popupFadeOutAnimation=new ol.Z({targets:[this.storeUI],delay:e,duration:t,props:{x:-350},onComplete:function(){n.storeUI.setX(0),n.scene.screen.close(n.name)}})),this.scene.tweens.add({targets:[this.backgroundImage],delay:e,duration:.25*t,props:{alpha:{start:1,from:1,to:0}}}),this.popupFadeOutAnimation.play()},t}(GameCore.Screen)),Ly=Dy,By=ja.Z.DEFAULT,Ny=By.KEY,Hy=By.FRAME,My=function(e){function t(t,n,i,r){var s;return(s=e.call(this,t,n,i,r)||this).scene=void 0,s.popup=void 0,s.itemBlocks=void 0,s.popupShowUpAnimation=void 0,s.popupFadeOutAnimation=void 0,s.text=void 0,s.handleClose=function(){s.scene.updateCurrentScrew(),s.runCloseAnimation()},s.textContinue=void 0,s.starTwinkleUp=void 0,s.iconAttentionAnimation=void 0,s.scene=t,s.createPopup(),s.createContents(),s.arrangeItems(),s.createInput(),s.setDepth(Vr.Ks.POPUP),s.background.setAlpha(.8),s.zone.on(Phaser.Input.Events.POINTER_DOWN,s.handleClose),s}(0,o.Z)(t,e);var n=t.prototype;return n.open=function(t){if(e.prototype.open.call(this),t)if(t.goldScrew){this.itemBlocks[0].updateIcon(Ny,Hy.ICON_SCREW_GOLD.FILE,Hy.ICON_SCREW_GOLD.WIDTH,Hy.ICON_SCREW_GOLD.HEIGHT),this.text.setText(t.goldScrew.toString());var n=this.scene.player.getGoldScrew()+Number(t.goldScrew);this.scene.player.setCustomData("goldScrew",n)}else if(t.silverScrew){this.itemBlocks[0].updateIcon(Ny,Hy.ICON_SCREW_SILVER.FILE,Hy.ICON_SCREW_SILVER.WIDTH,Hy.ICON_SCREW_SILVER.HEIGHT),this.text.setText(t.silverScrew.toString());var i=this.scene.player.getSilverScrew()+Number(t.silverScrew);this.scene.player.setCustomData("silverScrew",i)}this.runOpenAnimation()},n.createInput=function(){},n.createPopup=function(){this.popup=new $c.Z(this.scene,{width:878/3,height:1129/3}),this.add(this.popup),this.popup.getPopup().setVisible(!1),Phaser.Display.Align.In.Center(this.popup,this.zone)},n.createContents=function(){this.createItemBlocks(),this.createTexts(),this.starTwinkleUp=new Ll.Z(this.scene),this.add(this.starTwinkleUp),this.popup.add(this.itemBlocks)},n.createTexts=function(){this.text=new ho.Z(this.scene,{text:"100",fontSize:this.scene.fontSize(25),strokeColor:3747354,strokeThickness:2.4,strokeOffset:{y:.5}}).setCenterAlign(),this.textContinue=new ho.Z(this.scene,{text:"Tap to claim",fontSize:this.scene.fontSize(21),strokeColor:3747354,strokeThickness:2.4,strokeOffset:{y:.5}}).setCenterAlign().setTint(13417136),this.popup.add([this.text,this.textContinue])},n.createItemBlocks=function(){var e=this;this.itemBlocks=[],[{icon:Hy.ICON_SCREW_GOLD.FILE,text:"10",width:Hy.ICON_SCREW_GOLD.WIDTH,height:Hy.ICON_SCREW_GOLD.HEIGHT}].forEach((function(t,n){var i=new fu(e.scene,{icon:{key:Ny,frame:t.icon,width:t.width,height:t.height},text:{text:t.text,fontSize:e.scene.fontSize(20),strokeColor:9194534,strokeThickness:3,strokeAlpha:.35,strokeOffset:{y:1}}});i.scale*=1.2,i.text.setVisible(!1),i.text.setLeftAlign(),e.itemBlocks.push(i)}))},n.arrangeItems=function(){Phaser.Display.Align.In.Center(this.text,this.popup,0,50),Phaser.Display.Align.In.Center(this.textContinue,this.popup,0,100);this.itemBlocks.length,this.itemBlocks[0].width;this.itemBlocks.forEach((function(e,t){}))},n.runOpenAnimation=function(){var e;return null!=(e=this.popupShowUpAnimation)&&null!=(e=e.tween)&&e.isPlaying()||(this.scene.audio.playSound(Xa.Z.POPUP_SHOW),this.starTwinkleUp.stop(),this.runPopupEntrancesAnimation(0,400),this.runPopupContentEntrancesAnimation(200,300),this.runLogoAttentionAnimation(500)),l().resolve()},n.runCloseAnimation=function(){var e;return null!=(e=this.popupFadeOutAnimation)&&null!=(e=e.tween)&&e.isPlaying()||(this.scene.audio.playSound(Xa.Z.POPUP_OFF,{volume:.6}),this.runPopupExitsAnimation(0,200)),l().resolve()},n.runPopupEntrancesAnimation=function(e,t){if(!this.popupShowUpAnimation){var n=this.popup;n.y,n.scale;this.popupShowUpAnimation=new dl({targets:[this.popup],delay:e,duration:t,props:{y:{from:this.popup.y,to:this.popup.y},scale:{start:0,from:0,to:1},alpha:{start:1,from:1,to:1}}})}this.popupShowUpAnimation.play()},n.runPopupContentEntrancesAnimation=function(e,t){},n.runPopupExitsAnimation=function(e,t){var n=this;this.popupFadeOutAnimation||(this.popupFadeOutAnimation=new ol.Z({targets:[this.popup],delay:e,duration:t,props:{alpha:0},onComplete:function(){n.scene.screen.close(n.name)}})),this.popupFadeOutAnimation.play()},n.runLogoAttentionAnimation=function(e){var t=this.itemBlocks[0],n=t.x,i=t.y,r=t.width,s=t.height;this.starTwinkleUp.run(1,n,i,r,s),this.iconAttentionAnimation||(this.iconAttentionAnimation=new Dl({targets:this.itemBlocks,delay:e,props:{scale:"+=0.05"}})),this.iconAttentionAnimation.play()},t}(GameCore.Screen),Gy=My,Wy=ja.Z.DEFAULT,Uy=Wy.KEY,Fy=Wy.FRAME,Zy=function(e){function t(t){var n;return(n=e.call(this,t,Uy,Fy.BUTTON_GREEN.FILE)||this).text=void 0,n.animation=void 0,n.button.setWorldSize(Fy.BUTTON_GREEN.WIDTH,Fy.BUTTON_GREEN.HEIGHT),n.setName("PlaySingle"),n.createText(),n.listenAnimationEvents(),n.runAnimation(),n}(0,o.Z)(t,e);var n=t.prototype;return n.listenAnimationEvents=function(){var e=this;this.hitZone.on(Phaser.Input.Events.GAMEOBJECT_POINTER_DOWN,(function(){var t;null==(t=e.animation)||t.stop()})),this.hitZone.on(Phaser.Input.Events.GAMEOBJECT_POINTER_OUT,(function(){var t,n;null!=(t=e.animation.tween)&&t.isPlaying()||null==(n=e.animation)||n.play()}))},n.createText=function(){this.text=new ho.Z(this.scene,{text:"",fontSize:this.scene.fontSize(30),strokeColor:2001170,strokeThickness:3,strokeOffset:{y:.5}}),this.add(this.text)},n.setText=function(e){this.text.setText(e)},n.runAnimation=function(){var e,t;null==(e=this.animation)||e.remove(),this.animation=new Dl({targets:[this],props:{scale:{from:1,to:1.05}}}),null==(t=this.animation)||t.play()},t}(an.Z),Yy=Zy,Vy=ja.Z.DEFAULT,zy=(Vy.KEY,Vy.FRAME),Ky=function(e){function t(t){var n;(n=e.call(this,t)||this).playSingleButton=void 0,n.createPlaySingleButton();var i=zy.BUTTON_GREEN.HEIGHT,r=n.scene.gameZone.width;return n.scene.world.isLandscape()&&(r=GameCore.Configs.Game.PortraitWidth),n.setSize(r,i+10),n.scene.add.existing((0,Ka.Z)(n)),n}return(0,o.Z)(t,e),t.prototype.createPlaySingleButton=function(){this.playSingleButton=new Yy(this.scene),this.add(this.playSingleButton)},t}(Phaser.GameObjects.Container),jy=Ky,Xy=ja.Z.DEFAULT,Qy=Xy.KEY,qy=Xy.FRAME,Jy=ja.Z.GAMEPLAY,$y=Jy.KEY,eE=Jy.FRAME,tE={scale:1,iconScrew:{FILE:qy.ICON_SCREW_GOLD.FILE,WIDTH:.62*qy.ICON_SCREW_GOLD.WIDTH,HEIGHT:.62*qy.ICON_SCREW_GOLD.HEIGHT},textPrice:"1"},nE=function(e){function t(t,n,i){var s,a=qy.BUTTON_BOOSTER_BASE,o=a.FILE,c=a.WIDTH,l=a.HEIGHT,u=(0,r.Z)({},tE,i);return(s=e.call(this,t,Qy,o,c*u.scale,l*u.scale)||this).startingScreen=void 0,s.icon=void 0,s.checkIcon=void 0,s.addIcon=void 0,s.countTextContainer=void 0,s.countText=void 0,s.payload=tE,s.textNumber=void 0,s.iconScrew=void 0,s.textPrice=void 0,s.itemType=void 0,s.limitCount=0,s.countUseInMatch=0,s.handleToggleItem=function(){0==s.countUseInMatch?s.setUse():s.cancelUse()},s.startingScreen=n,s.payload=u,s.createUI(),s.alignUI(),s.onClick=s.handleToggleItem,s}(0,o.Z)(t,e);var n=t.prototype;return n.createUI=function(){this.createIcon(),this.createCount()},n.alignUI=function(){Phaser.Display.Align.In.Center(this.icon,this),Phaser.Display.Align.In.TopRight(this.countTextContainer,this,3,5),Phaser.Display.Align.In.TopRight(this.addIcon,this,3,5),Phaser.Display.Align.In.TopRight(this.checkIcon,this,3,5),this.add(this.countTextContainer)},n.createIcon=function(){},n.createCount=function(){this.createAddIcon(),this.createCheckIcon(),this.createCountText()},n.createAddIcon=function(){var e=qy.BUTTON_PLUS_GREEN,t=e.FILE,n=e.WIDTH,i=e.HEIGHT;this.addIcon=this.scene.add.image(0,0,Qy,t),this.addIcon.setWorldSize(.9*n,.9*i),this.addIcon.kill(),this.add(this.addIcon)},n.createCheckIcon=function(){var e=qy.ICON_CHECK,t=e.FILE,n=e.WIDTH,i=e.HEIGHT;this.checkIcon=this.scene.add.image(0,0,Qy,t),this.checkIcon.setWorldSize(.9*n,.9*i),this.checkIcon.kill(),this.add(this.checkIcon)},n.createCountText=function(){this.countTextContainer=this.scene.add.container();var e=this.scene.add.image(0,0,$y,eE.ICON_RED_CIRCLE.FILE);e.setWorldSize(eE.ICON_RED_CIRCLE.WIDTH,eE.ICON_RED_CIRCLE.HEIGHT),this.countTextContainer.setSize(e.width,e.height),this.countText=new ho.Z(this.scene,{text:"",fontSize:this.scene.fontSize(13),strokeColor:11481901,strokeThickness:1.4,strokeOffset:{y:.5}}),Phaser.Display.Align.In.Center(this.countText,e,0,-2),this.countTextContainer.add([e,this.countText]),this.countTextContainer.kill(),this.add(this.countTextContainer)},n.setLimitCount=function(e){this.limitCount=e<0||!e?0:e,this.updateTextCount()},n.updateTextCount=function(){var e=qy.BUTTON_BOOSTER_BASE_GREEN,t=e.FILE,n=(e.WIDTH,e.HEIGHT,qy.BUTTON_BOOSTER_BASE),i=n.FILE;n.WIDTH,n.HEIGHT;this.countUseInMatch>0?(this.limitCount,this.button.setFrame(t),this.checkIcon.revive(),this.addIcon.kill(),this.countTextContainer.kill()):this.limitCount>0?(this.button.setFrame(i),this.checkIcon.kill(),this.addIcon.kill(),this.countText.setText(this.limitCount.toString()),this.countTextContainer.revive()):(this.button.setFrame(i),this.checkIcon.kill(),this.addIcon.revive(),this.countTextContainer.kill())},n.setUse=function(){var e=this,t=function(){var t,n=e.scene.player.getItems();e.scene.player.updateCustomFields({items:(0,r.Z)({},n,(t={},t[e.name]=n[e.name]+1,t))}),e.scene.layoutManager.showStartingScreen(),e.countUseInMatch+=1,e.setLimitCount(n[e.name]-1)},n=function(){e.scene.layoutManager.showStartingScreen()};this.limitCount<=0?this.startingScreen.handleClosePopup((function(){e.scene.screen.close(e.startingScreen.name),e.scene.layoutManager.showBuyItemScreen({itemType:e.itemType,countUseInMatch:e.countUseInMatch,isWatchAds:!0,successCallback:t,failCallback:n})})):(this.countUseInMatch+=1,this.setLimitCount(this.limitCount-1))},n.cancelUse=function(){this.countUseInMatch>0?(this.countUseInMatch=0,this.setLimitCount(this.limitCount+1)):this.updateTextCount()},n.resetUse=function(){this.countUseInMatch=0,this.updateTextCount()},n.getUseCountInMatch=function(){return this.countUseInMatch},t}(an.Z),iE=nE,rE=ja.Z.DEFAULT,sE=rE.KEY,aE=rE.FRAME,oE={iconScrew:{FILE:aE.ICON_SCREW_GOLD.FILE,WIDTH:.62*aE.ICON_SCREW_GOLD.WIDTH,HEIGHT:.62*aE.ICON_SCREW_GOLD.HEIGHT},textPrice:"1"},cE=function(e){function t(t,n,i){var s;return(s=e.call(this,t,n,(0,r.Z)({},oE,i))||this).setName(Lh[Dh.LIGHTNING]),s.itemType=Dh.LIGHTNING,s}return(0,o.Z)(t,e),t.prototype.createIcon=function(){var e=aE.ICON_THUNDER,t=e.FILE,n=e.WIDTH,i=e.HEIGHT;this.icon=this.scene.make.image({key:sE,frame:t}),this.icon.setWorldSize(n,i),this.add(this.icon)},t}(iE),lE=cE,uE=ja.Z.DEFAULT,hE=uE.KEY,dE=uE.FRAME,pE={iconScrew:{FILE:dE.ICON_SCREW_GOLD.FILE,WIDTH:.62*dE.ICON_SCREW_GOLD.WIDTH,HEIGHT:.62*dE.ICON_SCREW_GOLD.HEIGHT},textPrice:"1"},fE=function(e){function t(t,n,i){var s;return(s=e.call(this,t,n,(0,r.Z)({},pE,i))||this).setName(Lh[Dh.BONUS_TIME]),s.itemType=Dh.BONUS_TIME,s}return(0,o.Z)(t,e),t.prototype.createIcon=function(){var e=dE.ICON_TIME_MEDIUM,t=e.FILE,n=e.WIDTH,i=e.HEIGHT;this.icon=this.scene.make.image({key:hE,frame:t}),this.icon.setWorldSize(n,i),this.add(this.icon)},t}(iE),vE=fE,mE=ja.Z.GAMEPLAY,gE=(mE.KEY,mE.FRAME,ja.Z.DEFAULT),yE=gE.KEY,EE=gE.FRAME,SE=function(e){function t(t,n){var i;return(i=e.call(this,t,n,{popupWidth:878/3,popupHeight:835/3})||this).scene=void 0,i.headerText=void 0,i.guideText=void 0,i.boosterBackground=void 0,i.lightningItem=void 0,i.bonusTimeItem=void 0,i.unsubscribeList=[],i.playSingleButton=void 0,i.isCanClick=!1,i.popupShowUpAnimation=void 0,i.open=function(){e.prototype.open.call((0,Ka.Z)(i)),i.isCanClick=!1,i.scene.audio.playSound(Xa.Z.POPUP_SHOW),i.updateUI(),i.runOpenAnimation()},i.handleClosePopup=function(e){i.isCanClick=!1,i.runCloseAnimation(),i.exitAnimation.events.once("complete",(function(){e&&e()}))},i.handlePlay=function(){i.isCanClick=!1;var e=i.lightningItem.getUseCountInMatch(),t=i.bonusTimeItem.getUseCountInMatch();i.scene.registry.set(Bh,e),i.scene.registry.set(Nh,t),i.runCloseAnimation().then((function(){i.scene.handlePlaySingle(),i.updateItems(e,t)}))},i.scene=t,i.createUI(),i.alignUI(),i.createInput(),i.createAnimation(),i.popup.setInteractive(),i.moveBelow(i.zone,i.popup),i}(0,o.Z)(t,e);var n=t.prototype;return n.createUI=function(){e.prototype.createUI.call(this),this.titleText.setText("HARD LEVEL").setVisible(!1),this.createTextTime(),this.createText(),this.createBoosterBackground(),this.createLightningItem(),this.createBonusTimeItem(),this.createPlaySingleButton(),this.createDebugButton()},n.alignUI=function(){e.prototype.alignUI.call(this),this.popup.setPosition(0,0),Phaser.Display.Align.In.TopCenter(this.headerText,this.popup,0,-10),Phaser.Display.Align.In.TopCenter(this.guideText,this.popup,0,-53),Phaser.Display.Align.In.BottomCenter(this.playSingleButton,this.popup,0,-22),this.alignItems(),Phaser.Display.Align.In.Center(this.popup,this.zone)},n.alignItems=function(){Phaser.Display.Align.In.BottomCenter(this.boosterBackground,this.popup,0,-83),Phaser.Display.Align.In.Center(this.lightningItem,this.boosterBackground,-60,0),Phaser.Display.Align.In.Center(this.bonusTimeItem,this.boosterBackground,60,0)},n.createInput=function(){this.closeButton.onClick=this.handleClosePopup,this.playSingleButton.onClick=this.handlePlay},n.createAnimation=function(){var e=this;this.entranceAnimation.addAnimation(this.popup.entranceAnimation),this.exitAnimation.addAnimation(this.popup.exitAnimation),this.entranceAnimation.events.on("complete",(function(){e.isCanClick=!0}))},n.createTextTime=function(){this.headerText=new ho.Z(this.scene,{text:"STARTING BOOSTERS",fontSize:this.scene.fontSize(20),strokeColor:11035703,strokeThickness:2.4,strokeOffset:{y:.5}}).setCenterAlign().setTint(16508871),this.popup.add(this.headerText)},n.createText=function(){this.guideText=new ho.Z(this.scene,{text:"Select boosters:",fontSize:this.scene.fontSize(17)}).setCenterAlign().setTint(10180132),this.popup.add(this.guideText)},n.createBoosterBackground=function(){var e=EE.BACKGROUND_ITEM_PANEL_BIG,t=e.FILE,n=e.WIDTH,i=e.HEIGHT;this.boosterBackground=this.scene.add.image(0,0,yE,t),this.boosterBackground.setWorldSize(n,i),this.popup.add(this.boosterBackground)},n.createLightningItem=function(){var e=GameCore.Configs.Items.Lightning.PriceRescue[0],t=(e.GoldScrew,e.SilverScrew),n=void 0===t?0:t,i=EE.ICON_SCREW_GOLD.FILE;n>0&&(i=EE.ICON_SCREW_SILVER.FILE),this.lightningItem=new lE(this.scene,this,{iconScrew:{FILE:i,WIDTH:.62*EE.ICON_SCREW_GOLD.WIDTH,HEIGHT:.62*EE.ICON_SCREW_GOLD.HEIGHT},textPrice:"1"}),this.popup.add(this.lightningItem)},n.createBonusTimeItem=function(){var e=GameCore.Configs.Items.BonusTime.PriceRescue[0],t=(e.GoldScrew,e.SilverScrew),n=void 0===t?0:t,i=EE.ICON_SCREW_GOLD.FILE;n>0&&(i=EE.ICON_SCREW_SILVER.FILE),this.bonusTimeItem=new vE(this.scene,this,{iconScrew:{FILE:i,WIDTH:.62*EE.ICON_SCREW_GOLD.WIDTH,HEIGHT:.62*EE.ICON_SCREW_GOLD.HEIGHT},textPrice:"1"}),this.popup.add(this.bonusTimeItem)},n.createPlaySingleButton=function(){var e=EE.BUTTON_GREEN_MEDIUM,t=e.FILE,n=e.WIDTH,i=e.HEIGHT;this.playSingleButton=new an.Z(this.scene,yE,t,n,i);var r=new ho.Z(this.scene,{text:"PLAY",fontSize:this.scene.fontSize(26),strokeColor:2001170,strokeThickness:3,strokeOffset:{y:.5}});Phaser.Display.Align.In.Center(r,this.playSingleButton),this.playSingleButton.add(r),this.popup.add(this.playSingleButton)},n.createDebugButton=function(){var e=this;if(GameCore.Utils.Valid.isDebugger()){var t=this.scene.add.container(200,300);this.add(t);var n=new dc(this.scene,{text:"All 10",callback:function(){var t;e.scene.player.updateCustomFields({items:(t={},t[Lh[Dh.LIGHTNING]]=10,t[Lh[Dh.BONUS_TIME]]=10,t)}),e.updateUI()}}),i=new dc(this.scene,{text:"All 0",callback:function(){var t;e.scene.player.updateCustomFields({items:(t={},t[Lh[Dh.LIGHTNING]]=0,t[Lh[Dh.BONUS_TIME]]=0,t)}),e.lightningItem.resetUse(),e.bonusTimeItem.resetUse(),e.updateUI()}});Phaser.Display.Align.In.LeftCenter(n,this,0,30),Phaser.Display.Align.In.LeftCenter(i,this,0,-30),this.add([n,i]),Phaser.Display.Align.In.LeftCenter(t,this.popup,0,30)}},n.updateUI=function(){var e=this.scene.level.getLevel();this.headerText.setText("LEVEL "+e);var t=this.scene.player.getItems();0==this.lightningItem.getUseCountInMatch()&&(this.lightningItem.resetUse(),this.lightningItem.setLimitCount(t[Lh[Dh.LIGHTNING]])),0==this.bonusTimeItem.getUseCountInMatch()&&(this.bonusTimeItem.resetUse(),this.bonusTimeItem.setLimitCount(t[Lh[Dh.BONUS_TIME]]))},n.cancelUseItems=function(){this.lightningItem.cancelUse(),this.bonusTimeItem.cancelUse()},n.updateItems=function(e,t){this.lightningItem.resetUse(),this.bonusTimeItem.resetUse();var n=this.scene.player.getItems();if(e>0&&n[Lh[Dh.LIGHTNING]]>0){var i,r=Math.max(n[Lh[Dh.LIGHTNING]]-1,0);this.scene.player.updateCustomFields({items:(i={},i[Lh[Dh.LIGHTNING]]=r,i)})}if(t>0&&n[Lh[Dh.BONUS_TIME]]>0){var s,a=Math.max(n[Lh[Dh.BONUS_TIME]]-1,0);this.scene.player.updateCustomFields({items:(s={},s[Lh[Dh.BONUS_TIME]]=a,s)})}},n.runPopupEntrancesAnimation=function(e,t){var n=this;return this.popupShowUpAnimation||(this.popupShowUpAnimation=new dl({targets:[this.popup],delay:e,duration:t,props:{alpha:{start:1,from:1,to:1}}})),this.popupShowUpAnimation.play(),new(l())((function(e){n.popupShowUpAnimation&&n.popupShowUpAnimation.tween?n.popupShowUpAnimation.tween.once(Phaser.Tweens.Events.TWEEN_COMPLETE,(function(){e()})):e()}))},t}(nl),wE=SE,IE=ja.Z.GAMEPLAY,AE=IE.KEY,TE=IE.FRAME,CE=ja.Z.DEFAULT,bE=CE.KEY,PE=CE.FRAME,xE=GameCore.Configs,RE=xE.Items,OE=xE.Network,_E={itemType:Dh.NONE,countUseInMatch:0,isWatchAds:!1},kE=function(e){function t(t,n){var i;return(i=e.call(this,t,n,{popupWidth:878/3,popupHeight:800/3})||this).scene=void 0,i.silverScrewBar=void 0,i.goldScrewBar=void 0,i.icon=void 0,i.text=void 0,i.buttonBuy=void 0,i.buttonClaim=void 0,i.iconScrew=void 0,i.textPrice=void 0,i.price=void 0,i.payload=void 0,i.adsTimer=void 0,i.open=function(t){e.prototype.open.call((0,Ka.Z)(i)),i.scene.audio.playSound(Xa.Z.POPUP_SHOW),i.price={GoldScrew:1},i.payload=(0,r.Z)({},_E,t),i.updatePayload(),i.updateIconFrameAndContent(),i.updateCurrentScrew(),i.runOpenAnimation()},i.handleOnBuy=(0,a.Z)(h().mark((function e(){var t,n,r,s,a,o,c,l;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i.payload.itemType&&i.payload.itemType!==Dh.NONE){e.next=3;break}return e.abrupt("return");case 3:t=function(){},e.t0=i.payload.itemType,e.next=e.t0===Dh.LIGHTNING?7:e.t0===Dh.BONUS_TIME?8:9;break;case 7:case 8:case 9:return e.abrupt("break",10);case 10:if(n=i.price,r=n.GoldScrew,s=void 0===r?0:r,a=n.SilverScrew,o=void 0===a?0:a,!(s>0)){e.next=20;break}if(!((c=i.scene.player.getGoldScrew())<s)){e.next=16;break}return i.showNotifyNotEnoughScrew("Not enough\nGold Screw!"),e.abrupt("return");case 16:return e.next=18,i.scene.player.updateCustomFields({goldScrew:c-s});case 18:e.next=26;break;case 20:if(!((l=i.scene.player.getSilverScrew())<o)){e.next=24;break}return i.showNotifyNotEnoughScrew("Not enough\nSilver Screw!"),e.abrupt("return");case 24:return e.next=26,i.scene.player.updateCustomFields({silverScrew:l-o});case 26:i.runCloseAnimation().then((function(){t(),i.scene.updateCurrentScrew(),i.logBuyItem(i.getNameByItemType(i.payload.itemType),!1),i.payload.successCallback&&i.payload.successCallback()}));case 27:case"end":return e.stop()}}),e)}))),i.showNotifyNotEnoughScrew=function(e){i.scene.game.globalScene.screen.open(Vr.o4.NOTIFY_SCREEN,{message:e,duration:1e3,loading:!1})},i.handleShowRewardedVideoAd=(0,a.Z)(h().mark((function e(){var t,n,r,s,a;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i.payload.itemType&&i.payload.itemType!==Dh.NONE){e.next=3;break}return e.abrupt("return");case 3:t=function(){},e.t0=i.payload.itemType,e.next=e.t0===Dh.LIGHTNING?7:e.t0===Dh.BONUS_TIME?8:9;break;case 7:case 8:case 9:return e.abrupt("break",10);case 10:return n=i.scene.game,r=n.globalScene,s=n.audio,e.prev=11,r.screen.open(Vr.o4.NOTIFY_SCREEN,{message:"Loading ads...",duration:0,loading:!0}),s.pauseMusic(),s.muteAll(),e.next=17,new(l())((function(e,t){var n;null==(n=i.adsTimer)||n.remove(),i.adsTimer=i.scene.time.delayedCall(OE.Timeout,t),i.scene.ads.getAdStatus(GameCore.Ads.Types.REWARDED)===GameCore.Ads.Status.LOADING?i.scene.ads.events.once(GameCore.Ads.Events.LOADED,e):i.scene.ads.preloadRewardedVideoAsync().then(e).catch(t)}));case 17:return e.next=19,i.scene.ads.showRewardedVideoAsync();case 19:r.screen.events.off(GameCore.Screens.Events.CLOSE),r.screen.close(Vr.o4.NOTIFY_SCREEN),i.runCloseAnimation().then((function(){t(),i.scene.updateCurrentScrew(),i.logBuyItem(i.getNameByItemType(i.payload.itemType),!0),i.payload.successCallback&&i.payload.successCallback()})),e.next=31;break;case 24:if(e.prev=24,e.t1=e.catch(11),!(e.t1 instanceof Object&&GameCore.Utils.Object.hasOwn(e.t1,"code"))){e.next=30;break}if("USER_INPUT"!==e.t1.code){e.next=30;break}return i.scene.showNotifySkipAds(),e.abrupt("return");case 30:i.scene.showNotifyNoAds();case 31:return e.prev=31,i.scene.ads.preloadRewardedVideoAsync().catch((function(e){})),null==(a=i.adsTimer)||a.destroy(),s.unmuteAll(),s.playMusic(),e.finish(31);case 37:case"end":return e.stop()}}),e,null,[[11,24,31,37]])}))),i.getNameByItemType=function(e){return Lh[e]},i.handleClosePopup=function(){i.scene.audio.playSound(Xa.Z.POPUP_OFF,{volume:.6}),i.runCloseAnimation().then((function(){i.payload.failCallback&&i.payload.failCallback()}))},i.scene=t,i.createUI(),i.alignUI(),i.createInput(),i}(0,o.Z)(t,e);var n=t.prototype;return n.updatePayload=function(){var e={GoldScrew:1},t=0;switch(this.payload.itemType){case Dh.LIGHTNING:this.titleText.setText("LIGHTNING"),t=this.payload.countUseInMatch<RE.Lightning.PriceRescue.length?this.payload.countUseInMatch:RE.Lightning.PriceRescue.length-1,e=RE.Lightning.PriceRescue[t];break;case Dh.BONUS_TIME:this.titleText.setText("TIMER"),t=this.payload.countUseInMatch<RE.BonusTime.PriceRescue.length?this.payload.countUseInMatch:RE.BonusTime.PriceRescue.length-1,e=RE.BonusTime.PriceRescue[t]}this.price=e;var n=this.price,i=n.GoldScrew,r=void 0===i?0:i,s=n.SilverScrew,a=void 0===s?0:s;this.updateScrew(bE,r>0?PE.ICON_SCREW_GOLD.FILE:PE.ICON_SCREW_SILVER.FILE),this.textPrice.setText("x"+(r||a)),this.payload.isWatchAds?(this.buttonClaim.revive(),this.popup.setPosition(0,0),Phaser.Display.Align.In.BottomLeft(this.buttonBuy,this.popup,-12,-25),Phaser.Display.Align.In.BottomRight(this.buttonClaim,this.popup,-12,-25),Phaser.Display.Align.In.Center(this.popup,this.zone)):(this.buttonClaim.kill(),this.popup.setPosition(0,0),Phaser.Display.Align.In.BottomCenter(this.buttonBuy,this.popup,0,-25),Phaser.Display.Align.In.Center(this.popup,this.zone))},n.createUI=function(){e.prototype.createUI.call(this),this.titleText.setText("YOUR TITLE"),this.createText(),this.createIcon(),this.createButtonBuy(),this.createButtonClaim(),this.createScrewBars()},n.alignUI=function(){e.prototype.alignUI.call(this),this.popup.setPosition(0,0),Phaser.Display.Align.In.TopCenter(this.icon,this.popup,0,-60),Phaser.Display.Align.To.BottomCenter(this.text,this.icon,0,7.5),Phaser.Display.Align.In.BottomCenter(this.buttonBuy,this.popup,0,-25),Phaser.Display.Align.In.Center(this.popup,this.zone)},n.createInput=function(){var e=this,t=GameCore.Configs.Items.WatchAdReward;this.closeButton.useSound=!1,this.closeButton.onClick=this.handleClosePopup,this.buttonBuy.onClick=this.handleOnBuy,this.buttonClaim.onClick=this.handleShowRewardedVideoAd,this.goldScrewBar.onClick=function(){e.scene.layoutManager.showRewardScreen({treasure:{GoldScrew:t.GoldScrew,SilverScrew:t.SilverScrew},onceClose:function(){e.scene.updateCurrentScrew(),e.updateCurrentScrew()}})},this.silverScrewBar.onClick=function(){e.scene.layoutManager.showRewardScreen({treasure:{GoldScrew:t.GoldScrew,SilverScrew:t.SilverScrew},onceClose:function(){e.scene.updateCurrentScrew(),e.updateCurrentScrew()}})}},n.createText=function(){this.text=new ho.Z(this.scene,{text:"This is a base popup screen",fontSize:this.scene.fontSize(15)}).setCenterAlign().setTint(10180132),this.popup.add(this.text)},n.createIcon=function(){var e=PE.ICON_THUNDER,t=e.FILE,n=e.WIDTH,i=e.HEIGHT;this.icon=this.scene.make.image({key:bE,frame:t}),this.icon.setWorldSize(1.5*n,1.5*i),this.popup.add(this.icon)},n.createButtonBuy=function(){var e=TE.BUTTON_GREEN,t=e.FILE,n=e.WIDTH,i=e.HEIGHT;this.buttonBuy=new an.Z(this.scene,AE,t,n,i),this.iconScrew=this.scene.make.image({key:bE,frame:PE.ICON_SCREW_GOLD.FILE}),this.iconScrew.setWorldSize(.62*PE.ICON_SCREW_GOLD.WIDTH,.62*PE.ICON_SCREW_GOLD.HEIGHT),this.textPrice=new ho.Z(this.scene,{text:"x1",fontSize:this.scene.fontSize(25),strokeColor:23819,strokeThickness:1,strokeOffset:{y:.5}}).setCenterAlign(),this.buttonBuy.add([this.iconScrew,this.textPrice]),Phaser.Display.Align.In.Center(this.iconScrew,this.buttonBuy,-20),Phaser.Display.Align.In.Center(this.textPrice,this.buttonBuy,17),this.popup.add(this.buttonBuy)},n.createButtonClaim=function(){var e=ja.Z.DEFAULT,t=e.KEY,n=e.FRAME,i=n.BUTTON_BLUE_MEDIUM,r=i.FILE,s=i.WIDTH,a=i.HEIGHT;this.buttonClaim=new an.Z(this.scene,t,r,s,a),this.buttonClaim.setName("Claim");var o=new ho.Z(this.scene,{text:"Claim",fontSize:this.scene.fontSize(23),strokeColor:2711440,strokeThickness:2.4,strokeOffset:{y:.5}}).setCenterAlign().setTint(16777215),c=this.scene.make.image({key:t,frame:n.ICON_GOLD_VIDEO.FILE});c.setWorldSize(n.ICON_GOLD_VIDEO.WIDTH,n.ICON_GOLD_VIDEO.HEIGHT),Phaser.Display.Align.In.LeftCenter(c,this.buttonClaim,-17),Phaser.Display.Align.In.RightCenter(o,this.buttonClaim,-14),this.buttonClaim.add([o,c]),this.popup.add(this.buttonClaim)},n.createScrewBars=function(){this.goldScrewBar=new Io(this.scene),this.goldScrewBar.setIconFrame({FILE:PE.ICON_SCREW_GOLD.FILE,WIDTH:.62*PE.ICON_SCREW_GOLD.WIDTH,HEIGHT:.62*PE.ICON_SCREW_GOLD.HEIGHT}),this.silverScrewBar=new Io(this.scene),this.silverScrewBar.setIconFrame({FILE:PE.ICON_SCREW_SILVER.FILE,WIDTH:.62*PE.ICON_SCREW_SILVER.WIDTH,HEIGHT:.62*PE.ICON_SCREW_SILVER.HEIGHT}),this.popup.add(this.goldScrewBar),this.popup.add(this.silverScrewBar),this.goldScrewBar.kill(),this.silverScrewBar.kill()},n.updateCurrentScrew=function(){var e=this.scene.player.getGoldScrew(),t=this.scene.player.getSilverScrew();this.goldScrewBar.setValue(e),this.silverScrewBar.setValue(t);var n=0;this.goldScrewBar.kill(),this.silverScrewBar.kill();var i={GoldScrew:0,SilverScrew:0};switch(this.payload.itemType){case Dh.LIGHTNING:i=GameCore.Configs.Items.Lightning.PriceRescue[0];break;case Dh.BONUS_TIME:i=GameCore.Configs.Items.BonusTime.PriceRescue[0]}var r=i,s=r.GoldScrew,a=void 0===s?0:s,o=r.SilverScrew,c=void 0===o?0:o;a>0&&(this.goldScrewBar.revive(),Phaser.Display.Align.To.TopLeft(this.goldScrewBar,this.popup,n,25),n-=120),c>0&&(this.silverScrewBar.revive(),Phaser.Display.Align.To.TopLeft(this.silverScrewBar,this.popup,n,25))},n.updateScrew=function(e,t){this.iconScrew.setTexture(e,t),this.iconScrew.setWorldSize(.62*PE.ICON_SCREW_GOLD.WIDTH,.62*PE.ICON_SCREW_GOLD.HEIGHT)},n.updateIconFrameAndContent=function(){!this.payload.itemType||(this.payload.itemType,Dh.NONE);var e=PE.ICON_THUNDER;switch(this.payload.itemType){case Dh.LIGHTNING:e=PE.ICON_THUNDER,this.text.setText("Strike "+RE.Lightning.StrikeCount+" random woods!");break;case Dh.BONUS_TIME:e=PE.ICON_TIME_MEDIUM,this.text.setText("Use this item to get bonus time!")}var t=e,n=t.FILE,i=t.WIDTH,r=t.HEIGHT;this.icon.setFrame(n),this.icon.setWorldSize(1.5*i,1.5*r)},n.logBuyItem=function(e,t){this.scene.analytics.event(Z._.BUY_BOOSTER_ITEM,{item_name:e,level:this.scene.level.getLevel(),is_free:t}),t||this.logSpendVirtualCurrency(e)},n.logSpendVirtualCurrency=function(e){var t=this.price,n=t.GoldScrew,i=void 0===n?0:n,r=t.SilverScrew,s=i>0?"GoldScrew":"SilverScrew",a=i>0?i:void 0===r?0:r;this.scene.analytics.event(Z._.SPEND_VIRTUAL_CURRENCY,{value:a,item_name:e,virtual_currency_name:s,level:this.scene.level.getLevel()})},t}(nl),DE=kE,LE=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n.screen=void 0,n.header=void 0,n.main=void 0,n.footer=void 0,n.diamonds=void 0,n.fireworks=void 0,n.settingsScreen=void 0,n.dailyRewardsScreen=void 0,n.dailyMissionScreen=void 0,n.noAdsScreen=void 0,n.storeScreen=void 0,n.rewardItemScreen=void 0,n.startingScreen=void 0,n.buyItemScreen=void 0,n.scene=t,n.screen=t.screen,n.createObjects(),n}(0,o.Z)(t,e);var n=t.prototype;return n.createObjects=function(){this.createHeaderBar(),this.createMainContent(),this.createFooterBar()},n.createHeaderBar=function(){this.header=new Tc(this.scene),this.header.setDepth(za.Z.BUTTON)},n.createMainContent=function(){this.main=new zc(this.scene),this.main.setDepth(za.Z.LOGO)},n.createFooterBar=function(){this.footer=new jy(this.scene),this.footer.setDepth(za.Z.BUTTON)},n.createSettingsScreen=function(){this.settingsScreen=this.screen.add(Vr.o4.SETTINGS_SCREEN,cu)},n.createNoAdsScreen=function(){this.noAdsScreen=this.screen.add(Vr.o4.NO_ADS_SCREEN,bu)},n.createStoreScreen=function(){this.storeScreen=this.screen.add(Vr.o4.STORE_SCREEN,Ly)},n.createRewardItemScreen=function(){return this.rewardItemScreen=this.screen.add(Vr.o4.REWARD_ITEM_SCREEN,Gy),this.rewardItemScreen},n.createDailyMissionScreen=function(){return this.dailyMissionScreen=this.screen.add(Vr.o4.DAILY_MISSIONS_SCREEN,sl),this.dailyMissionScreen},n.createDailyRewardsScreen=function(){return this.dailyRewardsScreen=this.screen.add(Vr.o4.DAILY_REWARD_SCREEN,jl),this.dailyRewardsScreen},n.createStartingScreen=function(){return this.startingScreen=this.screen.add(Vr.o4.STARTING_SCREEN,wE),this.startingScreen},n.createBuyItemScreen=function(){return this.buyItemScreen=this.screen.add(Vr.o4.BUY_ITEM_SCREEN,DE),this.buyItemScreen},n.createFirework=function(){this.fireworks||(this.fireworks=this.scene.add.group());var e=this.fireworks.getFirstDead();if(e instanceof io)return e.revive(),e;var t=new io(this.scene);return this.fireworks.add(t),t},n.createDiamondDrop=function(e){this.diamonds||(this.diamonds=this.scene.add.group());var t=this.diamonds.getFirstDead();if(t instanceof co)return t.positions=e,t;var n=new co(this.scene,e);return n.setDepth(za.Z.ON_TOP),this.diamonds.add(n),n},t}(uo),BE=LE,NE=(GameCore.Configs.Gameplay,function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n.scene=t,n}(0,o.Z)(t,e);var n=t.prototype;return n.createObjects=function(){this.objects=new BE(this.scene)},n.createLayouts=function(){this.scene.world.isLandscape()?this.layout=new Va(this.scene):this.layout=new Za(this.scene),this.layout.setUIObjects(this.objects)},n.initUILogic=function(){},n.updateUIState=function(){},n.showSettingScreen=function(){this.objects.settingsScreen||this.objects.createSettingsScreen(),this.scene.screen.open(Vr.o4.SETTINGS_SCREEN)},n.showNoAdsScreen=function(){this.objects.noAdsScreen||this.objects.createNoAdsScreen(),this.scene.screen.open(Vr.o4.NO_ADS_SCREEN)},n.showStoreScreen=function(){this.objects.storeScreen||this.objects.createStoreScreen(),this.scene.screen.open(Vr.o4.STORE_SCREEN)},n.showDailyRewardScreen=function(){var e=this,t=this.objects.dailyRewardsScreen;t||((t=this.objects.createDailyRewardsScreen()).onNoAd=this.scene.showNotifyNoAds,t.onSkipAd=this.scene.showNotifySkipAds,t.onReward=function(t){e.scene.eatGoldScrew(t)}),this.scene.screen.open(Vr.o4.DAILY_REWARD_SCREEN)},n.showDailyMissionScreen=function(){var e=this.objects.dailyMissionScreen;e||(e=this.objects.createDailyMissionScreen()),this.scene.screen.open(Vr.o4.DAILY_MISSIONS_SCREEN)},n.showRewardScreen=function(e){var t=this.scene.game.globalScene.screen;t.get(Vr.o4.REWARD_SCREEN)||t.add(Vr.o4.REWARD_SCREEN,fh),t.open(Vr.o4.REWARD_SCREEN,e)},n.showRewardItemScreen=function(e){var t=this.objects.rewardItemScreen;t||(t=this.objects.createRewardItemScreen()),this.scene.screen.open(Vr.o4.REWARD_ITEM_SCREEN,e)},n.showStartingScreen=function(){var e=this.objects.startingScreen;e||(e=this.objects.createStartingScreen()),this.scene.screen.open(Vr.o4.STARTING_SCREEN)},n.showBuyItemScreen=function(e){var t=this.objects.buyItemScreen;t||(t=this.objects.createBuyItemScreen()),this.scene.screen.open(Vr.o4.BUY_ITEM_SCREEN,e)},t}(Ga)),HE=NE,ME=function(e){function t(){for(var t,n,i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return(n=e.call.apply(e,x()(t=[this]).call(t,r))||this).currentDiamond=void 0,n.timerFireworks=void 0,n.timerDailyRewards=void 0,n.layoutManager=void 0,n.run=function(){var e;n.layoutManager.init(),n.currentDiamond=0;var t=n.player.getLevel();n.level.setLevel(t);var i=n.level.getLevel();n.layoutManager.objects.main.levelVisualizer.updateLevelTexts(),n.layoutManager.objects.footer.playSingleButton.setText("Level "+i),n.updateCurrentBestScore(),n.updateCurrentScrew(),null==(e=n.timerDailyRewards)||e.remove(),n.timerDailyRewards=n.time.delayedCall(300,(function(){n.screen.open(Vr.o4.DAILY_REWARD_SCREEN)})),n.facebook.attemptToAddShortcut(),n.layoutManager.start(),n.timerFireworks&&n.timerFireworks.remove(),n.fireFireworks(),n.level.setStep(1),n.checkAnimationOpenDashboard(),n.layoutManager.objects.footer.playSingleButton.runAnimation(),n.ads.showBannerAdAsync().catch((function(e){})),n.handleConsumeProducts(),n.ads.preloadInterstitialAdAsync(),n.ads.preloadRewardedVideoAsync()},n.checkAnimationOpenDashboard=(0,a.Z)(h().mark((function e(){var t;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=n.dailyQuest.isPassingNextLevel(),n.setDisabledButton(!0,!t),n.layoutManager.objects.header.dailyQuests.processDailyQuests(),!n.dailyQuest.isRewardedAllTasks()||!n.world.isLandscape()){e.next=6;break}return e.next=6,n.sceneAnimationPromise;case 6:n.layoutManager.objects.header.dailyQuests.processAsyncQueue().then((function(){n.setDisabledButton(!1),n.handlePlayClick()}));case 7:case"end":return e.stop()}}),e)}))),n.eatGoldScrew=function(){var e=(0,a.Z)(h().mark((function e(t){var i;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=n.player.getGoldScrew()+t,e.next=3,n.player.setCustomData("goldScrew",i);case 3:n.updateCurrentScrew();case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.eatSilverScrew=function(){var e=(0,a.Z)(h().mark((function e(t){var i;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=n.player.getSilverScrew()+t,e.next=3,n.player.setCustomData("silverScrew",i);case 3:n.updateCurrentScrew();case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.fireFireworks=function(){},n.showNotifyNoAds=function(){n.game.globalScene.screen.open(Vr.o4.NOTIFY_SCREEN,{message:"No ads to display!",duration:1200,loading:!1})},n.showNotifySkipAds=function(){n.game.globalScene.screen.open(Vr.o4.NOTIFY_SCREEN,{message:"Sorry, No Rewards!\nYou have cancelled the ad!",duration:1500,loading:!1})},n.handlePlaySingle=function(){n.storage.dispatch(Sa())},n.handlePlayWithFriend=function(){n.storage.dispatch(Aa())},n.handleSettingClick=function(){n.layoutManager.showSettingScreen()},n.handleStoreClick=function(){n.layoutManager.showStoreScreen()},n.handleAdsClick=function(){n.layoutManager.showNoAdsScreen()},n.handlePlayClick=function(){n.layoutManager.showStartingScreen()},n.handleGoldScrewBarClick=function(){var e=GameCore.Configs.Items.WatchAdReward;n.layoutManager.showRewardScreen({treasure:{GoldScrew:e.GoldScrew,SilverScrew:e.SilverScrew},onceClose:function(){n.updateCurrentScrew()}})},n.handleSilverScrewBarClick=function(){var e=GameCore.Configs.Items.WatchAdReward;n.layoutManager.showRewardScreen({treasure:{GoldScrew:e.GoldScrew,SilverScrew:e.SilverScrew},onceClose:function(){n.updateCurrentScrew()}})},n}(0,o.Z)(t,e);var n=t.prototype;return n.update=function(){this.layoutManager.objects.header.dailyQuests.update()},n.updateCurrentBestScore=function(){},n.updateCurrentScrew=function(){var e=this.player.getGoldScrew(),t=this.player.getSilverScrew();this.layoutManager.objects.header.goldScrewBar.setValue(e),this.layoutManager.objects.header.silverScrewBar.setValue(t)},n.preload=function(){var e=this;this.events.on("wake",this.run),this.events.on("resume",this.run),this.events.on("create",this.run),this.events.on(Phaser.Scenes.Events.PAUSE,(function(){var t;null==(t=e.timerDailyRewards)||t.remove()}))},n.create=function(){e.prototype.create.call(this),this.world.isLandscape()?this.createBackground(gr.Z.BACKGROUND_LANDSCAPE.KEY):this.createBackground(gr.Z.BACKGROUND.KEY),this.createLayoutManager(),this.createOnClickEvent(),this.createDebug()},n.createOnClickEvent=function(){var e=this.layoutManager.objects,t=e.header,n=(e.main,e.footer);t.goldScrewBar.onClick=this.handleGoldScrewBarClick,t.silverScrewBar.onClick=this.handleSilverScrewBarClick,t.settingButton.onClick=this.handleSettingClick,n.playSingleButton.onClick=this.handlePlayClick},n.createLayoutManager=function(){this.layoutManager=new HE(this)},n.createDiamondsEffect=function(e,t){},n.setDiamond=function(e){var t=e<0?0:e;this.currentDiamond=t,this.layoutManager.objects.header.goldScrewBar.setValue(t)},n.handleConsumeProducts=function(){var e=(0,a.Z)(h().mark((function e(){var t,n;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.game.globalScene,e.prev=1,e.next=4,t.consumePurchasesReward();case 4:if(n=e.sent,0!==te()(n).length){e.next=7;break}throw new Error("There was an error\nduring the payment!\nPlease try again.");case 7:return t.screen.close(Vr.o4.NOTIFY_SCREEN),e.next=10,t.openProductReceiveScreen(n,"ConsumeProduct");case 10:e.next=14;break;case 12:e.prev=12,e.t0=e.catch(1);case 14:case"end":return e.stop()}}),e,this,[[1,12]])})));return function(){return e.apply(this,arguments)}}(),n.createDebug=function(){var e=this;if(GameCore.Utils.Valid.isDebugger()){var t=this.add.container(200,300).setDepth(139);this.add.existing(t);var n=.01,i=new dc(this,{text:"Hide \nAll \nDebug",callback:function(){dc.setAlphaAll(n),n=.01===n?.75:.01}});t.add(i),t.add(new dc(this,{text:"Open \nProduct \nReceive",callback:function(){e.game.globalScene.openProductReceiveScreen({GoldScrew:10,SilverScrew:15},"Debug",(function(){e.updateCurrentScrew(),e.layoutManager.objects.header.runGoldScrewBarAnimation(),e.layoutManager.objects.header.runSilverScrewBarAnimation()}),{x:319.33331298828125,y:130},{GoldScrew:e.layoutManager.objects.header.goldScrewBar.getIcon().getWorldPosition(),SilverScrew:e.layoutManager.objects.header.silverScrewBar.getIcon().getWorldPosition()})}})),t.add(new dc(this,{text:"Reset \nlevel 1",callback:function(){e.level.setMaxLevel(1),e.level.setLevel(1),e.layoutManager.objects.footer.playSingleButton.setText("Level "+e.level.getLevel()),e.layoutManager.objects.main.levelVisualizer.updateLevelTexts()}})),t.add(new dc(this,{text:"+1\nLevel",callback:function(){var t=e.level.getLevel()+1;e.level.setMaxLevel(t),e.level.setLevel(t),e.layoutManager.objects.footer.playSingleButton.setText("Level "+e.level.getLevel()),e.layoutManager.objects.main.levelVisualizer.updateLevelTexts()}})),t.add(new dc(this,{text:"+10\nLevel",callback:function(){var t=(0,a.Z)(h().mark((function t(){var n;return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=e.level.getLevel()+10,e.level.setMaxLevel(n),e.level.setLevel(n),e.layoutManager.objects.footer.playSingleButton.setText("Level "+e.level.getLevel()),e.layoutManager.objects.main.levelVisualizer.updateLevelTexts();case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()})),t.add(new dc(this,{text:"+100\nLevel",callback:function(){var t=(0,a.Z)(h().mark((function t(){var n;return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=e.level.getLevel()+100,e.level.setMaxLevel(n),e.level.setLevel(n),e.layoutManager.objects.footer.playSingleButton.setText("Level "+e.level.getLevel()),e.layoutManager.objects.main.levelVisualizer.updateLevelTexts();case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()})),t.add(new dc(this,{text:"Reset\nScrew",callback:function(){var t=(0,a.Z)(h().mark((function t(){return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.player.setCustomData("goldScrew",0);case 2:return t.next=4,e.player.setCustomData("silverScrew",0);case 4:e.updateCurrentScrew();case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),backgroundColor:11711154})),t.add(new dc(this,{text:"Revive\nAds",callback:function(){var t=(0,a.Z)(h().mark((function t(){var n;return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.player.getPurchases(),n=_e()(n).call(n,(function(e){return"remove_ads_30"!==e.productID&&"remove_ads_30_bundle"!==e.productID})),t.next=4,e.player.setCustomData("purchases",n);case 4:e.ads.setDisabledInterstitialAds(0);case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),backgroundColor:13639735,backgroundAlpha:1}));var r=t.list.length,s=Math.ceil(r/5),o=Math.ceil(r/s),c=42.5;t.setSize(c*o,c*s),t.list.forEach((function(e,t){var n=t%o,i=Math.floor(t/o);e.setPosition(c*(-o/2+.5+n),c*(-s/2+.5+i))})),Phaser.Display.Align.In.Center(t,this.gameZone,0,50)}},n.setDisabledButton=function(e,t){void 0===t&&(t=!0),this.layoutManager&&this.layoutManager.objects&&(this.layoutManager.objects.footer.playSingleButton.setDisabled(e,t),this.layoutManager.objects.footer.playSingleButton.setAlpha(1),this.layoutManager.objects.header.goldScrewBar.setDisabled(e,t),this.layoutManager.objects.header.silverScrewBar.setDisabled(e,t),this.layoutManager.objects.header.settingButton.setDisabled(e,t))},t}(_a.Z),GE=ME;var WE,UE,FE=GE,ZE=ja.Z.DEFAULT,YE=ZE.KEY,VE=ZE.FRAME,zE=function(e){function t(){for(var t,n,i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return(n=e.call.apply(e,x()(t=[this]).call(t,r))||this).errorText=void 0,n.retryButton=void 0,n.run=function(){n.retryButton.setDisabled(!1)},n.create=function(){e.prototype.create.call((0,Ka.Z)(n)),n.world.isLandscape()?n.createBackground(gr.Z.BACKGROUND_LANDSCAPE.KEY):n.createBackground(gr.Z.BACKGROUND.KEY),n.createText(),n.createRetryButton(),n.alignObjects()},n.handleRetry=(0,a.Z)(h().mark((function e(){var t;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.level.getLevel(),n.retryButton.setDisabled(!0),e.next=4,n.level.preloadLevelDataAsync(t);case 4:n.storage.dispatch(Sa()),n.retryButton.setDisabled(!1);case 6:case"end":return e.stop()}}),e)}))),n}(0,o.Z)(t,e);var n=t.prototype;return n.preload=function(){this.events.on(Phaser.Scenes.Events.WAKE,this.run),this.events.on(Phaser.Scenes.Events.CREATE,this.run)},n.createText=function(){this.errorText=new ho.Z(this,{text:"There was an error while loading\nlevel. Please try again later.",fontSize:this.fontSize(24),strokeThickness:2.2,strokeOffset:{y:.5},strokeAlpha:.5}),this.errorText.setCenterAlign(),this.errorText.setDepth(za.Z.TEXT)},n.createRetryButton=function(){this.retryButton=new an.Z(this,YE,VE.BUTTON_GREEN_MEDIUM.FILE,VE.BUTTON_GREEN_MEDIUM.WIDTH,VE.BUTTON_GREEN_MEDIUM.HEIGHT),this.retryButton.setName("Retry");var e=new ho.Z(this,{text:"Retry",fontSize:this.fontSize(26),strokeColor:2001170,strokeThickness:3,strokeOffset:{y:.5}});this.retryButton.add(e),this.retryButton.onClick=this.handleRetry,Phaser.Display.Align.In.Center(e,this.retryButton,0,-2)},n.alignObjects=function(){Phaser.Display.Align.In.Center(this.errorText,this.gameZone,0,-10),Phaser.Display.Align.To.BottomCenter(this.retryButton,this.errorText,0,50)},t}(_a.Z),KE=zE,jE=n(619),XE=function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).name="LoadResourceFail",i.message=t||"Load resource fail",i.payload=n,i}return(0,o.Z)(t,e),t}((0,W.Z)(Error)),QE=[{id:"remove-planks",title:"Remove 30 planks",require:{plank:30},reward:{goldScrew:10}}],qE=function(){var e=(0,a.Z)(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",QE);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),JE={PASS_LEVELS:{ID:"pass-levels",EVENTS:{PASS_LEVEL:"pass-level"}},COLLECT_DIAMONDS:{ID:"collect-diamonds",EVENTS:{COLLECT_DIAMONDS:"collect-diamonds"}},INVITE_FRIENDS:{ID:"invite-friends",EVENTS:{INVITED_FRIEND:"INVITED_FRIEND"}},REACH_SCORE:{ID:"reach-score",EVENTS:{ADD_SCORE:"add-score"}},REMOVE_PLANKS:{ID:"remove-planks",EVENTS:{REMOVE_PLANKS:"remove-planks"}},EVENTS:{TASKS_RESET:"tasks-reset",NOTICE_UPDATE:"notice-update"}},$E=(0,de.P1)([function(e){var t;return null==(t=e[Di])?void 0:t.tasks}],(function(e){return e})),eS=(0,de.P1)([function(e){var t;return null==(t=e[Di])?void 0:t.process}],(function(e){return e})),tS=(0,de.P1)([function(e){var t;return null==(t=e[Di])?void 0:t.isRequesting}],(function(e){return e})),nS=((0,de.P1)([function(e){var t;return null==(t=e[Di])?void 0:t.isNotice}],(function(e){return e})),GameCore.Configs.DailyTasks),iS=function(e){return function(t){t({type:Bi,payload:{tasks:e}});var n=window.game.player.getCustomData("dailyTasks")||{},i=n.startedTime,r=void 0===i?0:i,s=n.logTasks,a=void 0===s?{}:s;t((Date.now()-r)/1e3>nS.Duration?rS(e):sS(a))}},rS=function(e){return function(t){var n={};e.forEach((function(e){var t=e.id,i=e.require;n[t]={},te()(i).forEach((function(e){var i;n[t]=((i={})[e]=0,i.rewarded=!1,i)}))})),window.game.player.setCustomData("dailyTasks",{logTasks:n,startedTime:Date.now()}),t(sS(n)),Yu.emit(JE.EVENTS.TASKS_RESET)}},sS=function(e){return{type:Ni,payload:{process:e}}},aS=function(){var e=(window.game.player.getCustomData("dailyTasks")||{}).logTasks;return GameCore.Utils.Json.clone(e)},oS=function(){function e(e,t){var n=this;this.game=void 0,this.id=void 0,this.taskData=void 0,this.requireTypes=void 0,this.process=function(e){var t,i=e.type,r=e.value;if(!(r<1)&&(-1!==Zt()(t=n.requireTypes).call(t,i)&&!n.isPassRequiredTarget(i)&&n.processMore(e))){i=e.type,r=e.value;var s=n.getCorrectValue(i,r);n.game.storage.dispatch(function(e,t,n){return function(i){var r=aS();if(GameCore.Utils.Valid.isObject(r)){var s=r;GameCore.Utils.Object.hasOwn(s,e)&&(s[e].rewarded||(s[e][t]+=n,window.game.player.setCustomData("dailyTasks",{logTasks:s}),i({type:Hi,payload:{id:e,type:t,value:n}})))}}}(n.id,i,s)),n.isTaskFinished(i)&&n.game.storage.dispatch(function(e){return function(t){t({type:Mi,payload:{id:e}}),Yu.emit(JE.EVENTS.NOTICE_UPDATE)}}(n.id))}},this.game=e,this.id=t,this.init()}var t=e.prototype;return t.init=function(){var e=this,t=this.game.storage.getState(),n=$E(t)||[];if(!((null==n?void 0:n.length)<1)){var i=null==n?void 0:O()(n).call(n,(function(t){return t.id===e.id}));i&&(this.taskData=i,this.requireTypes=te()(this.taskData.require),this.initEvents())}},t.getDataByType=function(e){var t=this.game.storage.getState(),n=eS(t),i={value:0,target:0};if(!n)return i;if(!GameCore.Utils.Object.hasOwn(n,this.taskData.id))return i;var r=n[this.taskData.id];if(GameCore.Utils.Valid.isObject(r)&&GameCore.Utils.Object.hasOwn(r,e)){var s=r[e];"number"===typeof s&&(i.value=s)}return i.target=this.taskData.require[e]||0,i},t.getCorrectValue=function(e,t){var n=this.getDataByType(e),i=n.value,r=n.target,s=t;return i+t>r&&(s=r-i),Math.round(s)},t.isPassRequiredTarget=function(e){var t=this.getDataByType(e);return t.value>=t.target},t.isTaskFinished=function(e){var t=this.getDataByType(e);return t.value>=t.target},e}(),cS=oS,lS=JE.COLLECT_DIAMONDS,uS=lS.ID,hS=lS.EVENTS,dS=function(e){function t(t){return e.call(this,t,uS)||this}(0,o.Z)(t,e);var n=t.prototype;return n.initEvents=function(){Yu.off(hS.COLLECT_DIAMONDS,this.process),Yu.on(hS.COLLECT_DIAMONDS,this.process)},n.processMore=function(){return!0},t}(cS),pS=dS,fS=JE.INVITE_FRIENDS,vS=fS.ID,mS=fS.EVENTS,gS=function(e){function t(t){var n;return(n=e.call(this,t,vS)||this).invitedFriends=void 0,n.resetData=function(){n.invitedFriends=[]},n.resetData(),n}(0,o.Z)(t,e);var n=t.prototype;return n.initEvents=function(){var e=this;Yu.off(mS.INVITED_FRIEND,this.process),Yu.on(mS.INVITED_FRIEND,this.process),Yu.on(JE.EVENTS.TASKS_RESET,(function(){e.resetData()}))},n.processMore=function(e){var t,n=e.opponentId;return!!n&&(-1===Zt()(t=this.invitedFriends).call(t,n)&&(this.invitedFriends.push(n),!0))},t}(cS),yS=gS,ES=JE.PASS_LEVELS,SS=ES.ID,wS=ES.EVENTS,IS=function(e){function t(t){return e.call(this,t,SS)||this}(0,o.Z)(t,e);var n=t.prototype;return n.initEvents=function(){Yu.off(wS.PASS_LEVEL,this.process),Yu.on(wS.PASS_LEVEL,this.process)},n.processMore=function(){return!0},t}(cS),AS=IS,TS=JE.REACH_SCORE,CS=TS.ID,bS=TS.EVENTS,PS=function(e){function t(t){var n;return(n=e.call(this,t,CS)||this).totalScore=void 0,n.lastUpdate=void 0,n.totalScore=0,n.lastUpdate=Date.now(),n}(0,o.Z)(t,e);var n=t.prototype;return n.initEvents=function(){Yu.off(bS.ADD_SCORE,this.process),Yu.on(bS.ADD_SCORE,this.process)},n.processMore=function(e){var t=e.value,n=Date.now();return n-this.lastUpdate<3e3?(this.totalScore+=t,!1):(e.value+=this.totalScore,this.totalScore=0,this.lastUpdate=n,!0)},t}(cS),xS=PS,RS=JE.REMOVE_PLANKS,OS=RS.ID,_S=RS.EVENTS,kS=function(e){function t(t){return e.call(this,t,OS)||this}(0,o.Z)(t,e);var n=t.prototype;return n.initEvents=function(){Yu.off(_S.REMOVE_PLANKS,this.process),Yu.on(_S.REMOVE_PLANKS,this.process)},n.processMore=function(){return!0},t}(cS),DS=kS,LS=function(){function e(e){var t=this;this.game=void 0,this.eventsListener=void 0,this.init=(0,a.Z)(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.eventsListener={},e.next=3,t.initData();case 3:t.initEvents();case 4:case"end":return e.stop()}}),e)}))),this.initData=(0,a.Z)(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.game.storage.dispatch(function(){var e=(0,a.Z)(h().mark((function e(t,n){var i,r;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=n(),!tS(i)){e.next=4;break}return e.abrupt("return");case 4:return t({type:Li,payload:{}}),e.next=7,qE();case 7:r=e.sent,t(iS(r));case 9:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}());case 2:case"end":return e.stop()}}),e)}))),this.game=e,this.init()}var t=e.prototype;return t.getEventListener=function(e){return this.eventsListener[e]},t.initEvents=function(){this.eventsListener[JE.PASS_LEVELS.ID]=new AS(this.game),this.eventsListener[JE.REACH_SCORE.ID]=new xS(this.game),this.eventsListener[JE.INVITE_FRIENDS.ID]=new yS(this.game),this.eventsListener[JE.COLLECT_DIAMONDS.ID]=new pS(this.game),this.eventsListener[JE.REMOVE_PLANKS.ID]=new DS(this.game)},e}(),BS=LS,NS=[{name:"collect-red-gems",id:"collect-gems",require:{red:5},reward:50},{name:"collect-blue-gems",id:"collect-gems",require:{blue:5},reward:50},{name:"collect-pink-gems",id:"collect-gems",require:{pink:5},reward:50},{name:"collect-green-gems",id:"collect-gems",require:{green:5},reward:50},{name:"collect-yellow-gems",id:"collect-gems",require:{yellow:5},reward:50},{name:"collect-red-blue-gems",id:"collect-gems",require:{red:5,blue:5},reward:120},{name:"collect-red-pink-gems",id:"collect-gems",require:{red:5,pink:5},reward:120},{name:"collect-red-green-gems",id:"collect-gems",require:{red:5,green:5},reward:120},{name:"collect-red-yellow-gems",id:"collect-gems",require:{red:5,yellow:5},reward:120},{name:"collect-blue-pink-gems",id:"collect-gems",require:{blue:5,pink:5},reward:120},{name:"collect-blue-green-gems",id:"collect-gems",require:{blue:5,green:5},reward:120},{name:"collect-blue-yellow-gems",id:"collect-gems",require:{blue:5,yellow:5},reward:120},{name:"collect-pink-green-gems",id:"collect-gems",require:{pink:5,green:5},reward:120},{name:"collect-pink-yellow-gems",id:"collect-gems",require:{pink:5,yellow:5},reward:120},{name:"collect-green-yellow-gems",id:"collect-gems",require:{green:5,yellow:5},reward:120},{name:"collect-red-blue-pink-gems",id:"collect-gems",require:{red:5,blue:5,pink:5},reward:210},{name:"collect-red-blue-green-gems",id:"collect-gems",require:{red:5,blue:5,green:5},reward:210},{name:"collect-red-blue-yellow-gems",id:"collect-gems",require:{red:5,blue:5,yellow:5},reward:210},{name:"collect-red-pink-green-gems",id:"collect-gems",require:{red:5,pink:5,green:5},reward:210},{name:"collect-red-pink-yellow-gems",id:"collect-gems",require:{red:5,pink:5,yellow:5},reward:210},{name:"collect-red-green-yellow-gems",id:"collect-gems",require:{red:5,green:5,yellow:5},reward:210},{name:"collect-blue-pink-green-gems",id:"collect-gems",require:{blue:5,pink:5,green:5},reward:210},{name:"collect-blue-pink-yellow-gems",id:"collect-gems",require:{blue:5,pink:5,yellow:5},reward:210},{name:"collect-blue-green-yellow-gems",id:"collect-gems",require:{blue:5,green:5,yellow:5},reward:210},{name:"collect-pink-green-yellow-gems",id:"collect-gems",require:{pink:5,green:5,yellow:5},reward:210}],HS=function(){var e=(0,a.Z)(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",NS);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),MS=(0,de.P1)([function(e){var t;return null==(t=e[bi])?void 0:t.missions}],(function(e){return e})),GS=(0,de.P1)([function(e){var t;return null==(t=e[bi])?void 0:t.isRequesting}],(function(e){return e})),WS=((0,de.P1)([MS,function(e,t){return t.name}],(function(e,t){return e?"string"!==typeof t?null:GameCore.Utils.Object.hasOwn(e,t)?e[t]:null:null})),function(e){return{type:xi,payload:{missions:e}}}),US=ja.Z.GAMEPLAY.FRAME,FS=US.BLANK,ZS=US.BLANK,YS=US.BLANK,VS=US.BLANK,zS=US.BLANK,KS=US.BLANK,jS=US.BLANK,XS=US.BLANK,QS={RED:"red",BLUE:"blue",PINK:"pink",GREEN:"green",YELLOW:"yellow"},qS={FREEZE:"freeze",COLORFUL:"colorful",COLOR_CHANGE:"color_change"},JS=QS.RED,$S=QS.BLUE,ew=QS.PINK,tw=QS.GREEN,nw=QS.YELLOW,iw=qS.FREEZE,rw=qS.COLORFUL,sw=qS.COLOR_CHANGE,aw=((WE={})[JS]="r",WE[$S]="b",WE[ew]="p",WE[tw]="g",WE[nw]="y",WE[iw]="f",WE[rw]="c",WE[sw]="m",WE),ow={SIZE:37,STATUS:{READY:"ready",MOVING:"moving",CAPTURED:"captured"},FRAME:(UE={},UE[JS]=FS,UE[$S]=ZS,UE[ew]=YS,UE[tw]=VS,UE[nw]=zS,UE[iw]=KS,UE[rw]=jS,UE[sw]=XS,UE),SETS:{SET_3:"set_3",SET_4:"set_4",SET_5:"set_5",SET_6:"set_6",SET_7:"set_7",SET_8:"set_8",SET_9:"set_9"},COLORS:QS,SPECIALS:qS,HASH:aw},cw={GIFT:{ID:"ItemGift"},PAINT:{ID:"ItemPaint"},HAMMER:{ID:"ItemHammer"},SHUFFLE:{ID:"ItemShuffle"},CHANGE_COLOR:{ID:"ItemChangeColor"}},lw={TYPES:{COLLECT_GEMS:"collect-gems",USE_ITEM:"use-item",COMBO:"combo"},EVENTS:{MISSION_START:"mission-start",MISSION_UPDATE:"mission-update",MISSION_FAILED:"mission-failed",MISSION_COMPLETED:"mission-completed"},OBJECTS:(0,r.Z)({},ow.COLORS,ow.SPECIALS,{PAINT:cw.PAINT.ID,HAMMER:cw.HAMMER.ID,SHUFFLE:cw.SHUFFLE.ID})},uw=(0,de.P1)([function(e){var t;return null==(t=e[bi])?void 0:t.mission}],(function(e){return e})),hw=((0,de.P1)([uw],(function(e){return e?e.name:null})),function(){function e(e,t,n){var i=this;this.game=void 0,this.id=void 0,this.name=void 0,this.reward=void 0,this.process=function(e){var t=e.id,n=e.type,r=e.value;r<1||i.id===t&&i.isTypeRequired(n)&&i.processMore(e)&&(i.game.storage.dispatch(function(e,t,n){return{type:Ri,payload:{name:e,type:t,value:n}}}(i.name,n,r)),i.isMissionComplete()&&(Yu.emit(lw.EVENTS.MISSION_COMPLETED,{name:i.name,reward:i.reward}),i.game.storage.dispatch(function(e){return{type:Oi,payload:{name:e}}}(i.name))))},this.id=t,this.name=n,this.game=e}var t=e.prototype;return t.start=function(){var e=this.game.storage.getState(),t=uw(e);t&&t.name===this.name&&(this.reward=t.reward,this.initEvents())},t.getMissionData=function(){var e=this.game.storage.getState(),t=uw(e);return t?t.name!==this.name?null:t:null},t.getDataByType=function(e){var t=this.getMissionData();if(!t)return null;var n=t.require[e];return{value:t.process[e],target:n}},t.isTypeRequired=function(e){var t=this.getDataByType(e);return!!t&&t.target>0},t.isMissionComplete=function(){var e=this.getMissionData();if(!e)return!0;var t=e.require,n=e.process,i=!0;return te()(t).forEach((function(e){if(i){var r=t[e];n[e]<r&&(i=!1)}})),i},e}()),dw=hw,pw=lw.EVENTS,fw=lw.TYPES,vw=function(e){function t(t,n){return e.call(this,t,fw.COLLECT_GEMS,n)||this}(0,o.Z)(t,e);var n=t.prototype;return n.initEvents=function(){Yu.off(pw.MISSION_UPDATE,this.process),Yu.on(pw.MISSION_UPDATE,this.process)},n.processMore=function(){return!0},t}(dw),mw=vw,gw=lw.EVENTS,yw=lw.TYPES,Ew=function(e){function t(t,n){return e.call(this,t,yw.COMBO,n)||this}(0,o.Z)(t,e);var n=t.prototype;return n.initEvents=function(){Yu.off(gw.MISSION_UPDATE,this.process),Yu.on(gw.MISSION_UPDATE,this.process)},n.processMore=function(e){var t=this.getMissionData();if(!t)return!1;var n=e.type;return e.value>=t.require[n]},t}(dw),Sw=Ew,ww=lw.EVENTS,Iw=lw.TYPES,Aw=function(e){function t(t,n){return e.call(this,t,Iw.USE_ITEM,n)||this}(0,o.Z)(t,e);var n=t.prototype;return n.initEvents=function(){Yu.off(ww.MISSION_UPDATE,this.process),Yu.on(ww.MISSION_UPDATE,this.process)},n.processMore=function(e){return!0},t}(dw),Tw=Aw,Cw=function(){function e(e){var t=this;this.game=void 0,this.listener=void 0,this.init=(0,a.Z)(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.initData();case 2:t.initListeners(),t.initEvents();case 4:case"end":return e.stop()}}),e)}))),this.initData=(0,a.Z)(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.game.storage.dispatch(function(){var e=(0,a.Z)(h().mark((function e(t,n){var i,r;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=n(),!GS(i)){e.next=4;break}return e.abrupt("return");case 4:return t({type:Pi,payload:{}}),e.next=7,HS();case 7:r=e.sent,t(WS(r));case 9:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}());case 2:case"end":return e.stop()}}),e)}))),this.startListener=function(e){t.listener[e]&&t.listener[e].start()},this.game=e,this.init()}var t=e.prototype;return t.initListeners=function(){var e=this;this.listener={};var t=this.game.storage.getState(),n=MS(t);n&&te()(n).forEach((function(t){switch(n[t].id){case lw.TYPES.COLLECT_GEMS:e.listener[t]=new mw(e.game,t);break;case lw.TYPES.COMBO:e.listener[t]=new Sw(e.game,t);break;case lw.TYPES.USE_ITEM:e.listener[t]=new Tw(e.game,t)}}))},t.initEvents=function(){Yu.off(lw.EVENTS.MISSION_START,this.startListener),Yu.on(lw.EVENTS.MISSION_START,this.startListener)},e}(),bw=Cw,Pw=(GameCore.Configs.Tournament.UseLeaderboard,function(e){return{type:gi,payload:{tournamentId:e}}}),xw=(function(){var e=(0,a.Z)(h().mark((function e(){var t,n,i;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=window.game.facebook,e.next=4,t.getTournamentAsync();case 4:return n=e.sent,i=JSON.parse(n.getPayload()||"{}"),e.abrupt("return",i.leaderboardId);case 9:return e.prev=9,e.t0=e.catch(0),e.abrupt("return",null);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})))}(),function(){var e=(0,a.Z)(h().mark((function e(){var t;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=window.game.facebook,e.next=4,t.getTournamentAsync();case 4:return e.abrupt("return",e.sent);case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",null);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})))}(),function(e){try{var t=Ar(e),n=window.game.player,i=t.entryPointData||{},r=i.playerId,s=i.playerName,a=i.playerPhoto;return n.getPlayer().playerId===r?yr:new nt.Z(r,s,a).toObject()}catch(o){return yr}}),Rw=function(){return function(e){try{window.game.facebook.getTournamentAsync().then((function(t){var n=t.getID().toString();e(Pw(n))})).catch((function(e){})),e((function(e){try{e(aa()),e(Pa(Ir))}catch(t){(0,i.tO)(t)}}))}catch(t){}}},Ow=function(){return function(e,t){try{var n=t(),i=Ar(n),r=window.game.player,s=r.getPlayer(),a=i.contextId,o=(i.entryPointData||{}).playerId,c=s.playerId===o,l=xw(n);c||r.updateConnectedPlayers([l]);var u=l.playerId;e(Aa(a,u,!0))}catch(h){throw new Error("processInviteMode: "+h)}}},_w=function(){return function(e,t){try{var n=t(),i=Ar(n),r=window.game.player.getPlayer(),s=i.entryPointData||{},a=s.matchId,o=s.opponentId,c=s.playerId,l=r.playerId===c;e(Ta(a,l?o:c))}catch(u){throw new Error("processChallengeFriendMode: "+u)}}},kw=function(){return function(e,t){try{var n=t(),s=Ar(n).entryPointData||{},o=s.playerId,c=s.playerScore;e(va(o,{score:c,level:0}));var l=xw(n);e(function(e){return function(){var t=(0,a.Z)(h().mark((function t(n){var r,s,a,o,c;return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,r=window.game,s=r.facebook,a=r.globalScene,o=r.analytics,a.screen.open(Vr.o4.NOTIFY_SCREEN,{message:"Loading...",loading:!0}),c=s.getContextID(),ga({contextId:c}),o.event(Z._.JOIN_GROUP,{group_id:c}),t.next=8,n(Pa(wr,e));case 8:t.next=17;break;case 10:if(t.prev=10,t.t0=t.catch(0),!(t.t0 instanceof Kr)){t.next=14;break}return t.abrupt("return");case 14:if("INVALID_OPERATION"!==(null==t.t0?void 0:t.t0.code)){t.next=16;break}return t.abrupt("return");case 16:(0,i.tO)(t.t0);case 17:return t.prev=17,Ea(1e3),t.finish(17);case 20:case"end":return t.stop()}}),t,null,[[0,10,17,20]])})));return function(e){return t.apply(this,arguments)}}()}((0,r.Z)({},l,{score:c})))}catch(u){throw new Error("processMatchingGroupMode: "+u)}}},Dw=function(){return function(e){try{e(Sa())}catch(t){throw new Error("processNewUserMode: "+t)}}},Lw=n(443),Bw={BACKGROUND:{KEY:"background",FILE:"./assets/music/bg_music.mp3"},EFFECTS:{button_click:"./assets/sounds/button_click.mp3",congratulation:"./assets/sounds/congratulation.mp3",daily_reward:"./assets/sounds/daily_reward.mp3",confetti:"./assets/sounds/confetti.mp3",popup_off:"./assets/sounds/popup_off.mp3",popup_show:"./assets/sounds/popup_show.mp3",start_level:"./assets/sounds/start_level.mp3",use_hammer:"./assets/sounds/use_hammer.mp3",use_paint:"./assets/sounds/use_paint.mp3",you_lose:"./assets/sounds/you_lose.mp3",you_win:"./assets/sounds/you_win.mp3",hammer_hit:"./assets/sounds/hammer_hit.mp3",screw_in:"./assets/sounds/screw_in.mp3",screw_out:"./assets/sounds/screw_out.mp3",wood_break:"./assets/sounds/wood_break.mp3"}},Nw=n(433),Hw="How about diving into the game for a relaxing experience?",Mw=GameCore.Configs.Notification.DailyNotificationMessages,Gw=void 0===Mw?{}:Mw,Ww=function(){function e(){}e.sendNewUserNotification=function(){var e=(0,a.Z)(h().mark((function e(){var t;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.getInstance(),e.abrupt("return",t.sendNewUserNotificationInstance());case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),e.sendDailyNotification=function(){var e=(0,a.Z)(h().mark((function e(){var t;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.getInstance(),e.abrupt("return",t.sendDailyNotificationInstance());case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),e.sendTestDailyNotification=function(){var e=(0,a.Z)(h().mark((function e(t){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.getInstance();case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),e.getInstance=function(){return this._instance||(this._instance=new e),this._instance};var t=e.prototype;return t.sendNewUserNotificationInstance=function(){var e=(0,a.Z)(h().mark((function e(){var t,n,i,r,s,a;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=window.game,n=t.player,i=t.facebook,r=t.rollbar,e.prev=1,n.getPlayerIsNew()){e.next=5;break}return e.abrupt("return");case 5:if(n.getPlayerASID()){e.next=8;break}return e.abrupt("return");case 8:return e.next=10,FBInstant.player.getDataAsync(["isNotificationFirstSent"]);case 10:if(e.t0=e.sent,e.t0){e.next=13;break}e.t0={};case 13:if(s=e.t0,!0!==s.isNotificationFirstSent){e.next=17;break}return e.abrupt("return");case 17:return a={message:Hw,delayTime:14400,type:Nw.Z.NEW_USER_NOTIFICATION},e.next=20,i.sendNotificationAsync(a);case 20:FBInstant.player.setDataAsync({isNotificationFirstSent:!0}),e.next=26;break;case 23:e.prev=23,e.t1=e.catch(1),r.sendException(e.t1);case 26:case"end":return e.stop()}}),e,null,[[1,23]])})));return function(){return e.apply(this,arguments)}}(),t.sendDailyNotificationInstance=function(){var e=(0,a.Z)(h().mark((function e(){var t,n,i;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=window.game.rollbar,e.prev=1,n=new Date,i=n.getDay(),e.t0=i,e.next=0===e.t0?7:1===e.t0?10:2===e.t0?13:3===e.t0?16:4===e.t0?19:22;break;case 7:return e.next=9,this.sendMondayNotification();case 9:return e.abrupt("break",22);case 10:return e.next=12,this.sendTuesdayNotification();case 12:return e.abrupt("break",22);case 13:return e.next=15,this.sendWednesdayNotification();case 15:return e.abrupt("break",22);case 16:return e.next=18,this.sendThursdayNotification();case 18:return e.abrupt("break",22);case 19:return e.next=21,this.sendFridayNotification();case 21:return e.abrupt("break",22);case 22:return e.next=24,this.sendSaturdayNotification();case 24:return e.next=26,this.sendSundayNotification();case 26:e.next=31;break;case 28:e.prev=28,e.t1=e.catch(1),t.sendException(e.t1);case 31:case"end":return e.stop()}}),e,this,[[1,28]])})));return function(){return e.apply(this,arguments)}}(),t.sendMondayNotification=function(){var e=(0,a.Z)(h().mark((function e(){var t,n,i,r,s;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=window.game,n=t.facebook,i=t.rollbar,e.prev=1,s={message:null!=(r=Gw.MONDAY)?r:Hw,delayTime:86400,type:Nw.Z.MONDAY_NOTIFICATION},e.next=5,n.sendNotificationAsync(s);case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),i.sendException(e.t0);case 10:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(){return e.apply(this,arguments)}}(),t.sendTuesdayNotification=function(){var e=(0,a.Z)(h().mark((function e(){var t,n,i,r,s;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=window.game,n=t.facebook,i=t.rollbar,e.prev=1,s={message:null!=(r=Gw.TUESDAY)?r:Hw,delayTime:86400,type:Nw.Z.TUESDAY_NOTIFICATION},e.next=5,n.sendNotificationAsync(s);case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),i.sendException(e.t0);case 10:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(){return e.apply(this,arguments)}}(),t.sendWednesdayNotification=function(){var e=(0,a.Z)(h().mark((function e(){var t,n,i,r,s;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=window.game,n=t.facebook,i=t.rollbar,e.prev=1,s={message:null!=(r=Gw.WEDNESDAY)?r:Hw,delayTime:86400,type:Nw.Z.WEDNESDAY_NOTIFICATION},e.next=5,n.sendNotificationAsync(s);case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),i.sendException(e.t0);case 10:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(){return e.apply(this,arguments)}}(),t.sendThursdayNotification=function(){var e=(0,a.Z)(h().mark((function e(){var t,n,i,r,s;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=window.game,n=t.facebook,i=t.rollbar,e.prev=1,s={message:null!=(r=Gw.THURSDAY)?r:Hw,delayTime:86400,type:Nw.Z.THURSDAY_NOTIFICATION},e.next=5,n.sendNotificationAsync(s);case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),i.sendException(e.t0);case 10:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(){return e.apply(this,arguments)}}(),t.sendFridayNotification=function(){var e=(0,a.Z)(h().mark((function e(){var t,n,i,r,s;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=window.game,n=t.facebook,i=t.rollbar,e.prev=1,s={message:null!=(r=Gw.FRIDAY)?r:Hw,delayTime:86400,type:Nw.Z.FRIDAY_NOTIFICATION},e.next=5,n.sendNotificationAsync(s);case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),i.sendException(e.t0);case 10:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(){return e.apply(this,arguments)}}(),t.sendSaturdayNotification=function(){var e=(0,a.Z)(h().mark((function e(){var t,n,i,r,s,a;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=window.game,n=t.facebook,i=t.rollbar,e.prev=1,s=this.findDelayTimeForNextDay(6,10),a={message:null!=(r=Gw.SATURDAY)?r:Hw,delayTime:s,type:Nw.Z.SATURDAY_NOTIFICATION},e.next=6,n.sendNotificationAsync(a);case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),i.sendException(e.t0);case 11:case"end":return e.stop()}}),e,this,[[1,8]])})));return function(){return e.apply(this,arguments)}}(),t.sendSundayNotification=function(){var e=(0,a.Z)(h().mark((function e(){var t,n,i,r,s,a;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=window.game,n=t.facebook,i=t.rollbar,e.prev=1,s=this.findDelayTimeForNextDay(0,10),a={message:null!=(r=Gw.SUNDAY)?r:Hw,delayTime:s,type:Nw.Z.SUNDAY_NOTIFICATION},e.next=6,n.sendNotificationAsync(a);case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),i.sendException(e.t0);case 11:case"end":return e.stop()}}),e,this,[[1,8]])})));return function(){return e.apply(this,arguments)}}(),t.findDelayTimeForNextDay=function(e,t){if(e<0||e>6)throw new Error("Invalid day for notification");if(t<0||t>23)throw new Error("Invalid hour for notification");var n=Date.now(),i=new Date(n).getDay(),r=new Date(n).getHours(),s=e,a=t;if(i===s&&r>=a){var o=3600*(168-r+a);if(o>604800)throw new Error("Notification delay time is more than 7 days");return o}var c=s<i?7-i+s:s-i;a<r&&c--;var l=3600*(24*c+(a<r?24-r+a:a-r));if(l>604800)throw new Error("Notification delay time is more than 7 days");return l},t.sendTestDailyNotificationInstance=function(){var e=(0,a.Z)(h().mark((function e(t){var n,i,r,s;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n={0:"SUNDAY",1:"MONDAY",2:"TUESDAY",3:"WEDNESDAY",4:"THURSDAY",5:"FRIDAY",6:"SATURDAY"},e.prev=1,r=Hw,!(t<0||t>6)){e.next=5;break}throw new Error("Invalid day for notification. Day must be between 0 (Sunday) and 6 (Saturday)");case 5:return r=null!=(i=Gw[n[t]])?i:Hw,s={message:r,delayTime:300,type:Nw.Z.GENERIC_NOTIFICATION},e.next=9,window.game.facebook.sendNotificationAsync(s);case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1);case 14:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(t){return e.apply(this,arguments)}}(),e}();Ww._instance=void 0;var Uw=Ww,Fw=GameCore.Configs.Notification.ApiUrl,Zw=function(){var e=(0,a.Z)(h().mark((function e(t){var n,i;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.playerId,e.next=3,(0,ze.v)("players/"+n,t,{},Fw,10);case 3:return i=e.sent,e.abrupt("return",(null==i?void 0:i.data)||{});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Yw=GameCore.Configs,Vw=Yw.AppId,zw=Yw.Notification,Kw=function(e){function t(){for(var t,n,i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return(n=e.call.apply(e,x()(t=[this]).call(t,r))||this).loadAtlas32bitParameterQueues=[],n.isMusicLoaded=!1,n.loadLevelReadyPromise=void 0,n.handleFBInstantGameStarted=function(){window.__fbGameReady=!0,window.__fbPlatform=FBInstant.getPlatform(),n.player.requestConnectedPlayers()},n.processAfterUpdatePlayerProfile=function(){zw.Enable&&(n.updatePlayerProfileToNotificationService(),zw.DisableSendNotification||(Uw.sendNewUserNotification(),Uw.sendDailyNotification()))},n.startGame=function(){n.analytics.event(Z._.APP_READY),n.storage.dispatch((0,Lw.I)(Or.C.LOAD_SCENE)),n.storage.dispatch((function(e,t){var n=window.game,i=n.player,r=n.analytics,s=n.globalScene;try{var a=t(),o=Ar(a),c=Tr(a),l=i.getPlayer(),u=(o.entryPointData||{}).type,h=1===i.getLevel()||GameCore.Configs.ForceStartGame;if(l.isUserNew&&r.event(Z._.NEW_USER),c===Ir)return void e(Rw());if(c===Sr){if(u===vr)return void e(Ow());if(u===mr)return void e(_w())}if(c===wr)return void e(kw());if(h)return void e(Dw());s.events.emit(Or.K.SWITCH,Or.C.DASHBOARD_SCENE)}catch(d){s.events.emit(Or.K.SWITCH,Or.C.DASHBOARD_SCENE)}}))},n.handleLoadMusicCompleted=function(){n.audio.initMusic(Bw.BACKGROUND.KEY),!!n.game.player.getPlayerSetting("music")&&n.audio.playMusic()},n}(0,o.Z)(t,e);var n=t.prototype;return n.preload=function(){var e=this;this.facebook.progressLoading.loadingProgressFbLoadScene(),this.analytics.event(Z._.SCREEN_OPEN,{screen_name:"LoadScene"}),this.load.on("progress",(function(t){e.facebook.progressLoading.onProgress(t)})),this.load.on(Phaser.Loader.Events.FILE_LOAD_ERROR,(function(e){var t=new XE("Load resources at LoadScene failed.");(0,i.R0)(t,{file:null==e?void 0:e.url})})),this.textStyler.addFont({type:"local",fontType:"woff2",fontName:"MikadoBlack"}),this.load.image(gr.Z.AVATAR.KEY,gr.Z.AVATAR.FILE),this.world.isLandscape()?(this.load.image(gr.Z.BACKGROUND_LANDSCAPE.KEY,gr.Z.BACKGROUND_LANDSCAPE.FILE),this.load.image(gr.Z.LANDSCAPE.HEADER.KEY,gr.Z.LANDSCAPE.HEADER.FILE),this.load.image(gr.Z.LANDSCAPE.HEADER_INSIDE.KEY,gr.Z.LANDSCAPE.HEADER_INSIDE.FILE),this.load.image(gr.Z.LANDSCAPE.LEVEL_PANEL.KEY,gr.Z.LANDSCAPE.LEVEL_PANEL.FILE)):this.load.image(gr.Z.BACKGROUND.KEY,gr.Z.BACKGROUND.FILE),this.load.atlas({key:ja.Z.DEFAULT.KEY,textureURL:ja.Z.DEFAULT.TEXTURE,atlasURL:ja.Z.DEFAULT.JSON}),this.load.atlas({key:ja.Z.GAMEPLAY.KEY,textureURL:ja.Z.GAMEPLAY.TEXTURE,atlasURL:ja.Z.GAMEPLAY.JSON}),this.load.multiatlas({key:ja.Z.EFFECTS.KEY,path:ja.Z.EFFECTS.PATH,atlasURL:ja.Z.EFFECTS.JSON}),this.load.spritesheet(gr.Z.LIGHTNING_STRIKE.KEY,gr.Z.LIGHTNING_STRIKE.FILE,{frameWidth:130,frameHeight:660}),this.player.updateData().then(this.processAfterUpdatePlayerProfile).catch(i.tO),this.loadLevelReadyPromise=this.loadLevel()},n.loadLevel=function(){var e=(0,a.Z)(h().mark((function e(){var t;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=this.player.getLevel(),this.level.setLevel(t),e.next=5,this.level.preloadLevelDataAsync(t);case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),(0,i.tO)(e.t0);case 10:case"end":return e.stop()}}),e,this,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),n.create=function(){this.createAnimation(),this.createAsync()},n.createAnimation=function(){this.anims.create({key:gr.Z.LIGHTNING_STRIKE.KEY,frames:this.anims.generateFrameNumbers(gr.Z.LIGHTNING_STRIKE.KEY,{start:0,end:8}),frameRate:10,repeat:0})},n.createAsync=function(){var e=(0,a.Z)(h().mark((function e(){var t;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.loadLevelReadyPromise;case 2:this.audio.initSound(),this.audio.importSoundEffectKeys(Bw.EFFECTS),this.handleGameData(),this.analytics.event(Z._.LOAD_COMPLETE),this.facebook.on("startgame",this.handleFBInstantGameStarted),this.facebook.gameStarted(),this.initModules(),this.setupGlobalScene(),this.lazyLoadResource(),this.handleShowAdWhenStartGame(),this.preloadAllAds(),t=this.player.getLevel(),this.level.preloadLevelDataAsync(t),this.startGame();case 16:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.updatePlayerProfileToNotificationService=function(){var e=this.player.getPlayer(),t=e.playerId,n=e.name,i=e.photo,r=e.locale,s=e.ASID;Zw({appId:Vw,playerId:t,name:n,photo:i,locale:r,ASID:s})},n.setupGlobalScene=function(){var e=this.scene.get(Or.C.GLOBAL_SCENE);e instanceof jE.Z&&e.setup()},n.initModules=function(){new bw(this.game),new BS(this.game)},n.lazyLoadResource=function(){var e=this;setTimeout((function(){e.scene.wake(),e.loadSounds(),e.load32bitTextures(),e.load.once(Phaser.Loader.Events.COMPLETE,(function(){e.scene.sleep()}))}),1500)},n.loadSounds=function(){this.loadSoundEffects(),this.loadMusic()},n.loadSoundEffects=function(){var e=this;te()(Bw.EFFECTS).forEach((function(t){e.load.audio(t,Bw.EFFECTS[t])}))},n.loadMusic=function(){if(!this.isMusicLoaded){this.isMusicLoaded=!0;var e=Phaser.Loader.Events.FILE_KEY_COMPLETE;this.load.once(e+"audio-"+Bw.BACKGROUND.KEY,this.handleLoadMusicCompleted),this.load.audio(Bw.BACKGROUND.KEY,Bw.BACKGROUND.FILE),this.load.start()}},n.load32bitTextures=function(){this.loadAtlas32bitParameterQueues=[],this.loadAtlas32bit(ja.Z.GAMEPLAY.KEY,ja.Z.GAMEPLAY.TEXTURE,ja.Z.GAMEPLAY.JSON)},n.loadAtlas32bit=function(e,t,n){var i=t.replace("8bit","32bit"),r=n.replace("8bit","32bit"),s=e+"-32bit";this.load.atlas({key:s,textureURL:i,atlasURL:r}),this.addEventOverride32BitTexture(s,e)},n.addEventOverride32BitTexture=function(e,t){var n=this;this.load.on(Phaser.Loader.Events.FILE_COMPLETE,(function(i){if(i==e&&n.textures.exists(e)){var r=n.textures.get(e);if(n.textures.exists(t))n.textures.get(t).override32Bit(r);else n.textures.list[t]=r;if(0!==n.loadAtlas32bitParameterQueues.length){var s=n.loadAtlas32bitParameterQueues.shift();s&&n.loadAtlas32bit(s.key,s.texture,s.json)}}}))},n.handleShowAdWhenStartGame=function(){var e=this;if(GameCore.Configs.Ads.InterstitialAdOptions.showWhenStartGame){var t={en:"Initializing...",ru:"\u0418\u043d\u0438\u0446\u0438\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u044f...",pt:"Inicializando...",es:"Inicializando...",ar:"\u062a\u0647\u064a\u0626\u0629...",hi:"\u092a\u094d\u0930\u093e\u0930\u0902\u092d \u0915\u0930 \u0930\u0939\u093e \u0939\u0948...",zh:"\u521d\u59cb\u5316\u4e2d...",tr:"Ba\u015flat\u0131l\u0131yor...",ja:"\u521d\u671f\u5316\u4e2d...",fr:"Initialisation en cours...",id:"Menginisialisasi...",de:"Initialisierung...",it:"Inizializzazione..."}[this.lang.getCurrentLanguage()||""]||"",n=document.createElement("div");n.id="wait-ads-mask";var r=document.createElement("div");r.id="wait-ads-content",n.appendChild(r);var s=document.createElement("div");s.id="wait-ads-dual-ring",r.appendChild(s);var o=document.createElement("div");o.id="wait-ads-text",o.innerHTML=t,r.appendChild(o),document.body.appendChild(n),this.audio.muteAll(),setTimeout((0,a.Z)(h().mark((function t(){return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,e.audio.stopMusic(),e.audio.muteAll(),t.next=5,e.ads.preloadInterstitialAdAsync();case 5:return t.next=7,e.ads.showInterstitialAdAsync();case 7:t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),(0,i.tO)(t.t0);case 12:return t.prev=12,n.remove(),e.audio.unmuteAll(),e.audio.playMusic(),t.finish(12);case 17:case"end":return t.stop()}}),t,null,[[0,9,12,17]])}))),0)}},n.handleGameData=function(){this.handleDisableAd(),this.proceedEventsData()},n.handleDisableAd=function(){var e=this;this.player.getPurchases().forEach((function(t){var n=t.productID;if(Ae()(n).call(n,vu.Z.ID.REMOVE_ADS_30)||Ae()(n).call(n,vu.Z.ID.REMOVE_ADS_BUNDLE)){var i=vu.Z.PRODUCTS[n];if(void 0!==i.removeAdDays){var r=i.removeAdDays,s=(new Date).valueOf()/1e3,a=Number(t.purchaseTime)+24*r*3600;s<=a&&e.ads.setDisabledInterstitialAds(Math.ceil((a-s)/86400))}}}))},n.proceedEventsData=function(){var e=this.player.getDailyQuest();this.dailyQuest.initData(e)},n.runEntranceAnimation=function(){return l().resolve()},n.runExitAnimation=function(){return l().resolve()},n.preloadAllAds=function(){this.ads.preloadInterstitialAdAsync(),this.ads.preloadRewardedVideoAsync()},t}(Phaser.Scene),jw=Kw,Xw=function(e){function t(){for(var t,n,i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return(n=e.call.apply(e,x()(t=[this]).call(t,r))||this).isEnable=!1,n.events=void 0,n.config=void 0,n.mockPurchases=[],n.products=[],n}(0,o.Z)(t,e);var n=t.prototype;return n.configure=function(e){this.config=e,this.initEvents(),this.initPayment()},n.openStore=function(){this.game.globalScene.screen.open("STORE_SCREEN")},n.closeStore=function(){this.game.globalScene.screen.close("STORE_SCREEN")},n.getCatalogAsync=function(){var e=(0,a.Z)(h().mark((function e(){var t,n,i;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.config.showMock){e.next=4;break}return n=De()(t=this.config.mockProducts).call(t,(function(e){return(0,r.Z)({},e,{price:e.priceAmount.toFixed(2),priceCurrencyCode:"USD"})})),this.products=n,e.abrupt("return",l().resolve(n));case 4:return i=[],e.prev=5,e.next=8,FBInstant.payments.getCatalogAsync();case 8:i=e.sent,e.next=13;break;case 11:e.prev=11,e.t0=e.catch(5);case 13:return this.products=i,e.abrupt("return",i);case 15:case"end":return e.stop()}}),e,this,[[5,11]])})));return function(){return e.apply(this,arguments)}}(),n.getPurchasesAsync=function(){var e=(0,a.Z)(h().mark((function e(){var t;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.config.showMock){e.next=2;break}return e.abrupt("return",this.mockPurchases);case 2:return t=[],e.prev=3,e.next=6,FBInstant.payments.getPurchasesAsync();case 6:t=e.sent,e.next=11;break;case 9:e.prev=9,e.t0=e.catch(3);case 11:return e.abrupt("return",t);case 12:case"end":return e.stop()}}),e,this,[[3,9]])})));return function(){return e.apply(this,arguments)}}(),n.purchaseAsync=function(){var e=(0,a.Z)(h().mark((function e(t,n){var i,r,s,a,o,c,u;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.isEnable){e.next=2;break}return e.abrupt("return",l().resolve(!1));case 2:if(0!=this.products.length){e.next=5;break}return e.next=5,this.getCatalogAsync();case 5:if(r=O()(i=this.products).call(i,(function(e){return e.productID===t}))){e.next=8;break}return e.abrupt("return",l().resolve(!1));case 8:if(s=(null==r?void 0:r.priceCurrencyCode)||"USD",a=[{item_id:r.productID,item_name:r.title,price:r.priceAmount,currency:s}],this.game.analytics.beginCheckout(s,r.priceAmount.toString(),a),!this.config.showMock){e.next=18;break}return o=t+GameCore.Utils.String.random(10),c={developerPayload:"",paymentID:o,productID:t,purchaseTime:"1663841515",purchaseToken:GameCore.Utils.String.random(10),signedRequest:""},this.mockPurchases.push(c),this.game.player.buyProduct(c.paymentID,t),this.game.analytics.purchase(s,c.paymentID,r.priceAmount.toString(),a),e.abrupt("return",l().resolve(c));case 18:return e.prev=18,e.next=21,FBInstant.payments.purchaseAsync({productID:t,developerPayload:n});case 21:return u=e.sent,this.events.emit("purchase-success-"+t,u),this.game.player.buyProduct(u.paymentID,t),this.game.analytics.purchase(s,u.paymentID,r.priceAmount.toString(),a),e.abrupt("return",u);case 28:return e.prev=28,e.t0=e.catch(18),this.events.emit("purchase-fail-"+t,e.t0),this.game.analytics.purchaseCancel(""+e.t0,a),e.abrupt("return",l().resolve(!1));case 33:case"end":return e.stop()}}),e,this,[[18,28]])})));return function(t,n){return e.apply(this,arguments)}}(),n.consumePurchaseAsync=function(){var e=(0,a.Z)(h().mark((function e(t){var n,i,r,s;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.purchaseToken,this.isEnable){e.next=3;break}return e.abrupt("return",l().resolve(!1));case 3:if(!this.config.showMock){e.next=10;break}if(s=O()(i=this.mockPurchases).call(i,(function(e){return e.purchaseToken===n}))){e.next=7;break}return e.abrupt("return",l().resolve(!1));case 7:return this.mockPurchases=_e()(r=this.mockPurchases).call(r,(function(e){return e.purchaseToken!=n})),this.game.player.buyProduct(s.paymentID,s.productID),e.abrupt("return",l().resolve(!0));case 10:return e.prev=10,e.next=13,FBInstant.payments.consumePurchaseAsync(n);case 13:return this.game.player.buyProduct(t.paymentID,t.productID),this.events.emit("purchase-success-"+n),e.abrupt("return",!0);case 18:return e.prev=18,e.t0=e.catch(10),this.events.emit("purchase-fail-"+n,e.t0),e.abrupt("return",l().resolve(!1));case 22:case"end":return e.stop()}}),e,this,[[10,18]])})));return function(t){return e.apply(this,arguments)}}(),n.isConsumableProduct=function(e){var t;return!Ae()(t=this.config.nonConsumableProductID).call(t,e)},n.getPaymentEnable=function(){return this.isEnable},n.initEvents=function(){this.events=new Phaser.Events.EventEmitter},n.initPayment=function(){var e=this;this.config.showMock?(this.events.emit("ready"),this.isEnable=!0):this.config.enable&&FBInstant.payments.onReady((function(){e.events.emit("ready"),e.isEnable=!0}))},t}(Phaser.Plugins.BasePlugin),Qw=Xw,qw=function(e){function t(){for(var t,n,i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return(n=e.call.apply(e,x()(t=[this]).call(t,r))||this).exp=0,n.unusedExp=0,n.currentLevel=1,n.rewardList=[],n.config=void 0,n.firstTimePlay=!0,n.reward={},n.isIncreased=!1,n}(0,o.Z)(t,e);var n=t.prototype;return n.configure=function(e){this.config=e,this.rewardList=this.config.rewardList},n.initData=function(e){this.exp=e.exp||0,this.currentLevel=e.level||1,this.firstTimePlay=void 0==e.firstTimePlay||e.firstTimePlay;var t=e.startTime||0;0===t||(0,bo.Gm)(t)||this.resetNewDailyQuest(),this.game.player.updateDailyQuest({startTime:(new Date).getTime()})},n.resetNewDailyQuest=function(){this.exp=0,this.currentLevel=1,this.firstTimePlay=!1,this.reward={},this.unusedExp=0,this.game.player.updateDailyQuest({level:1,exp:this.exp,firstTimePlay:!1})},n.getIsFirstTimePlay=function(){return this.firstTimePlay},n.setFirstTimePlay=function(){this.firstTimePlay=!1,this.game.player.updateDailyQuest({firstTimePlay:!1})},n.getExp=function(){return this.exp||0},n.isIncreasedLastGame=function(){return this.isIncreased},n.resetIncreasedLastGame=function(){this.isIncreased=!1},n.increaseExp=function(e){this.isCanPlayDailyQuest()&&(this.exp+=e,e>0&&!this.isRewardedAllTasks()?this.isIncreased=!0:this.isIncreased=!1,this.game.player.updateDailyQuest({exp:this.exp}))},n.getCurrentLevel=function(){return this.currentLevel},n.getRewardList=function(){return this.rewardList},n.getCurrentLevelReward=function(){var e;return(null==(e=this.rewardList[this.currentLevel-1])?void 0:e.reward)||void 0},n.getRewardLevel=function(e){var t;return O()(t=this.rewardList).call(t,(function(t){return t.level==e}))},n.getConfig=function(){return this.config},n.isCanPlayDailyQuest=function(){var e=this.game.player.getLevel();return this.config.Enable&&e>=this.config.LevelStart},n.logCollectItem=function(e){this.game.analytics.event(Z._.DAILY_QUEST_COMPLETE,{milestone:e})},n.getCurrentExpOnLevel=function(){var e;return(null==(e=this.rewardList[this.currentLevel-1])?void 0:e.target)||0},n.getTargetExpAtLevel=function(e){return e<=0||e>this.rewardList.length?0:this.rewardList[e-1].target||0},n.getRemainingTime=function(){var e=new Date,t=new Date;t.setHours(23,59,59,999);var n=t.getTime()-e.getTime(),i=1e3*Math.floor(n/1e3);return Math.max(i,0)},n.isRewardedAllTasks=function(){return this.currentLevel>this.rewardList.length},n.getCurrentQuestData=function(){var e;return{target:null==(e=this.rewardList[this.currentLevel-1])?void 0:e.target,current:this.exp}},n.passLevel=function(){this.exp-=this.getCurrentExpOnLevel(),this.logCollectItem(this.currentLevel);var e=this.getCurrentLevelReward();this.addReward(e),this.exp=Math.max(0,this.exp),this.unusedExp=this.exp,this.currentLevel+=1,this.game.player.updateDailyQuest({exp:this.exp,level:this.currentLevel})},n.addReward=function(e){var t=this;Oo.forEach((function(n){var i=t.reward[n]||0,r=e[n]||0;0==i&&0==r||(t.reward[n]=i+r)}))},n.getRewardDailyQuest=function(){var e=this.reward;return this.reward={},e},n.isPassingMultiLevels=function(){for(var e=this.exp,t=this.currentLevel;e>0;){var n=this.getTargetExpAtLevel(t);if(0==n)break;(e-=n)>=0&&(t+=1)}return t-this.currentLevel>=2},n.isPassingNextLevel=function(){var e=this.exp,t=this.currentLevel;return e>=this.getTargetExpAtLevel(t)},n.getUnusedExp=function(){var e=this.unusedExp;return this.unusedExp=0,e},n.isDailyQuestTextureUrgent=function(){if(!this.isCanPlayDailyQuest())return!1;var e=this.game.player.getLevel(),t=Math.abs(e-this.config.LevelStart)<=1,n=this.getIsFirstTimePlay()&&e>=this.config.LevelStart;return t||n},t}(Phaser.Plugins.BasePlugin),Jw=qw;function $w(e,t){var n="undefined"!==typeof T()&&b()(e)||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){var n;if(!e)return;if("string"===typeof e)return eI(e,t);var i=S()(n=Object.prototype.toString.call(e)).call(n,8,-1);"Object"===i&&e.constructor&&(i=e.constructor.name);if("Map"===i||"Set"===i)return I()(e);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return eI(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var i=0;return function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function eI(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var tI=function(e){function t(){return e.apply(this,arguments)||this}return(0,o.Z)(t,e),t.prototype.preloadLevel=function(){var e=(0,a.Z)(h().mark((function e(t){var n,i,r,s,a,o,c,l,u,d,p,f,v,m;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,s=this.getKeyLevel(t),a=GameCore.Configs.Level.url,e.next=5,fetch(""+a+s+".json",{method:"GET"});case 5:return o=e.sent,e.next=8,o.json();case 8:for(n=e.sent,c=[],l=[],u=$w(n.steps[0].ironModels);!(d=u()).done;)p=d.value,c.push(p.spriteName),l.push(p.layer);for(f=$w(n.steps[1].ironModels);!(v=f()).done;)m=v.value,c.push(m.spriteName),l.push(m.layer);return((null==(i=n.steps[0].itemRopeModels)?void 0:i.length)>0||(null==(r=n.steps[1].itemRopeModels)?void 0:r.length)>0)&&c.push("Layer-10"),e.next=16,wf.loadSprites(this.game.globalScene,c,l);case 16:e.next=22;break;case 19:return e.prev=19,e.t0=e.catch(0),e.abrupt("return",void 0);case 22:return e.abrupt("return",n);case 23:case"end":return e.stop()}}),e,this,[[0,19]])})));return function(t){return e.apply(this,arguments)}}(),t}(Nc),nI=tI,iI=["Enable"],rI=function(e){function t(){return e.apply(this,arguments)||this}(0,o.Z)(t,e);var i=t.prototype;return i.boot=function(){var t=(0,a.Z)(h().mark((function t(){return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.prototype.boot.call(this),this.addExtraGameObjectMethods(),this.addExtraFBInstantFunctions(),this.addPlugins(),t.next=6,this.addDevPlugins();case 6:this.addScenes(),this.addDevScenes(),this.initWorld(),this.initStorage(),this.initLanguage(),this.initVisibilityChangeHandler(),this.initDailyQuest(),this.initPayment(),this.initUtils(),this.initRollbar(),this.initConsole(),this.initDebugger(),this.initStatistics(),this.initParticleEditor(),this.initProfilerPlugin(),this.initAdaptivePerformance(),this.initCanvasRecorderPlugin();case 23:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),i.start=function(){e.prototype.start.call(this)},i.addExtraGameObjectMethods=function(){var e=new y(this);e.addKillRevive(),e.addKillReviveGroup(),e.addDrawDebugBox(),e.addSetWorldSize(),e.addSetWorldSizeForContainer(),e.addGetWorldPosition(),e.addHighQuality(),e.addSetLineHeightForBitmapText()},i.addExtraFBInstantFunctions=function(){var e=new d.Z(this.facebook);this.facebook.getLocale=e.getLocale,this.facebook.shareAsync=e.shareAsync,this.facebook.inviteAsync=e.inviteAsync,this.facebook.switchAsync=e.switchAsync,this.facebook.chooseAsync=e.chooseAsync,this.facebook.createAsync=e.createAsync,this.facebook.sendMessage=e.sendMessage,this.facebook.getContextID=e.getContextID,this.facebook.getPlayerToken=e.getPlayerToken,this.facebook.matchPlayerAsync=e.matchPlayerAsync,this.facebook.getContextPlayers=e.getContextPlayers,this.facebook.setLoadingProgress=e.setLoadingProgress,this.facebook.attemptToAddShortcut=e.attemptToAddShortcut,this.facebook.attemptToSubscribeBot=e.attemptToSubscribeBot,this.facebook.postSessionScoreAsync=e.postSessionScoreAsync,this.facebook.getRewardedVideoAsync=e.getRewardedVideoAsync,this.facebook.sendNotificationAsync=e.sendNotificationAsync,this.facebook.getInterstitialAdAsync=e.getInterstitialAdAsync,this.facebook.isSupportedAPI=e.isSupportedAPI,e.injectTournament(),this.facebook.progressLoading=new m(this)},i.addPlugins=function(){this.plugins.install("Storage",qi,!0,"storage"),this.plugins.install("Rollbar",tn,!0,"rollbar"),this.plugins.install("AdsManager",K,!0,"ads"),this.plugins.install("AuthManager",ye,!0,"auth"),this.plugins.install("AudioManager",oe,!0,"audio"),this.plugins.install("WorldManager",ur,!0,"world"),this.plugins.install("PlayerManager",kt,!0,"player"),this.plugins.install("ProfileManager",Ut,!0,"profile"),this.plugins.install("LanguageManager",Nr,!0,"lang"),this.plugins.install("AnalyticsManager",q,!0,"analytics"),this.plugins.install("AdaptivePerformance",xe,!0,"performance"),this.plugins.install("VisibilityChangeHandler",sr,!0,"visibility"),this.plugins.install("LevelManager",nI,!0,"level"),this.plugins.install("PaymentManager",Qw,!0,"payment"),this.plugins.install("DailyQuest",Jw,!0,"dailyQuest"),this.plugins.installScenePlugin("textStyler",ir,"textStyler"),this.plugins.installScenePlugin("ScreenManager",pn,"screen"),this.plugins.installScenePlugin("FrameCapture",we,"frameCapture"),window.SpinePlugin&&this.plugins.installScenePlugin("SpinePlugin",SpinePlugin,"spine"),this.storage=this.plugins.get("Storage"),this.rollbar=this.plugins.get("Rollbar"),this.ads=this.plugins.get("AdsManager"),this.auth=this.plugins.get("AuthManager"),this.audio=this.plugins.get("AudioManager"),this.world=this.plugins.get("WorldManager"),this.player=this.plugins.get("PlayerManager"),this.lang=this.plugins.get("LanguageManager"),this.profile=this.plugins.get("ProfileManager"),this.analytics=this.plugins.get("AnalyticsManager"),this.performance=this.plugins.get("AdaptivePerformance"),this.visibility=this.plugins.get("VisibilityChangeHandler"),this.level=this.plugins.get("LevelManager"),this.payment=this.plugins.get("PaymentManager"),this.dailyQuest=this.plugins.get("DailyQuest")},i.addDevPlugins=function(){var e=(0,a.Z)(h().mark((function e(){var t,i,r,s,a,o;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(GameCore.Utils.Valid.isDebugger()){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,Promise.all([n.e(7),n.e(942)]).then(n.bind(n,625));case 4:return t=e.sent.default,e.next=7,Promise.all([n.e(498),n.e(739),n.e(530)]).then(n.bind(n,626));case 7:return i=e.sent.default,e.next=10,n.e(401).then(n.bind(n,627));case 10:return r=e.sent.default,e.next=13,Promise.all([n.e(498),n.e(123)]).then(n.bind(n,628));case 13:return s=e.sent.default,e.next=16,Promise.all([n.e(498),n.e(803)]).then(n.bind(n,629));case 16:return a=e.sent.default,e.next=19,Promise.all([n.e(498),n.e(616),n.e(613)]).then(n.bind(n,630));case 19:o=e.sent.default,this.plugins.install("Console",t,!0,"console"),this.plugins.install("Debugger",i,!0,"debugger"),this.plugins.install("Statistics",r,!0,"statistics"),this.plugins.install("Profiler",s,!0,"profiler"),this.plugins.install("ParticleEditor",a,!0,"particle-editor"),this.plugins.install("CanvasRecorder",o,!0,"canvasRecorder"),this.eruda=this.plugins.get("Console"),this.debugger=this.plugins.get("Debugger"),this.statistics=this.plugins.get("Statistics"),this.profiler=this.plugins.get("Profiler"),this.particleEditor=this.plugins.get("ParticleEditor"),this.canvasRecorder=this.plugins.get("CanvasRecorder");case 32:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),i.addScenes=function(){this.scene.add(Or.C.BOOT_SCENE,Yr,!0),this.scene.add(Or.C.LOAD_SCENE,jw,!1),this.scene.add(Or.C.GAME_SCENE,Ay,!1),this.scene.add(Or.C.DASHBOARD_SCENE,FE,!1),this.scene.add(Or.C.ERROR_SCENE,KE,!1),this.scene.add(Or.C.GLOBAL_SCENE,jE.Z,!1)},i.addDevScenes=function(){var e=(0,a.Z)(h().mark((function e(){var t,i;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(GameCore.Utils.Valid.isDebugger()){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,n.e(638).then(n.bind(n,631));case 4:return t=e.sent.default,e.next=7,n.e(469).then(n.bind(n,632));case 7:i=e.sent.default,this.scene.add(Or.C.TEST_SCENE,t,!1),this.scene.add(Or.C.ANIMATIONS_SCENE,i,!1);case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),i.initWorld=function(){var e=GameCore.Configs.Game,t=e.AutoResize,n=e.PortraitRatio,i=e.PortraitWidth,r=e.PortraitHeight,s=e.OrientationThreshold,a=e.LandscapeRatio,o=e.LandscapeWidth,c=e.MaxLandscapeWidth,l=e.LandscapeHeight,u=t,h=e.DisableLandscape,d=e.FullSizeOnLandscape,p=n,f=i,v=r,m=s,g=a,y=o,E=l,S=c;this.world.configure({autoResize:u,portraitRatio:p,portraitWidth:f,portraitHeight:v,orientationThreshold:m,landscapeRatio:g,landscapeWidth:y,maxLandscapeWidth:S,landscapeHeight:E,disableLandscape:h,fullSizeOnLandscape:d}),this.world.resize(e.ForcePixelRatio)},i.initStorage=function(){var e=new Rr(this);this.storage.setInitiator(e)},i.initLanguage=function(){var e=this.facebook.getLocale();this.lang.configure({locale:e,upperCaseText:!0})},i.initVisibilityChangeHandler=function(){this.visibility.configure()},i.initDailyQuest=function(){this.dailyQuest.configure(GameCore.Configs.DailyQuests)},i.initPayment=function(){this.payment.configure(GameCore.Configs.Payment)},i.initUtils=function(){this.handlePauseAudio(),this.removeUnusedPipelines()},i.initConsole=function(){GameCore.Utils.Valid.isDebugger()&&(GameCore.Configs.Debugger.ShowConsole&&this.eruda.configure({tool:["console","info"],defaults:{theme:"Dark"}}))},i.initDebugger=function(){if(GameCore.Utils.Valid.isDebugger()){var e=GameCore.Configs.Debugger,t=e.ShowInspector,n=e.ShowMonitoring;(t||n)&&this.debugger.configure(GameCore.Configs.Debugger)}},i.initStatistics=function(){GameCore.Utils.Valid.isDebugger()&&(GameCore.Configs.Statistics.Enable&&this.statistics.configure(GameCore.Configs.Statistics))},i.initParticleEditor=function(){GameCore.Utils.Valid.isDebugger()&&(GameCore.Configs.ParticleEditor.Enable&&this.particleEditor.configure(GameCore.Configs.ParticleEditor))},i.initProfilerPlugin=function(){GameCore.Utils.Valid.isDebugger()&&(GameCore.Configs.ProfilerPlugin.Enable&&this.profiler.configure())},i.initAdaptivePerformance=function(){var e=GameCore.Configs.Performance,t=e.Enable,n=(0,s.Z)(e,iI);if(t){var i=this.world.getPixelRatio();this.performance.configure((0,r.Z)({pixelRatio:i},n)),this.performance.active()}},i.initCanvasRecorderPlugin=function(){var e=this;if(GameCore.Utils.Valid.isDebugger()){var t=GameCore.Configs.CanvasRecorder;if(t.Enable){var n=t.Options,i=n.Type,r=n.Quality,s=n.RecordFps,o=n.SyncFps;this.canvasRecorder.configure({type:i,quality:r,syncFps:o,recordFps:s});var c=document.querySelector("canvas");if(c){this.canvasRecorder.setCanvas(c);var u=this.canvasRecorder.getOptions(),d=this.canvasRecorder.waitNextFrame;this.canvasRecorder.waitNextFrame=(0,a.Z)(h().mark((function t(){return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!u.syncFps){t.next=5;break}return e.loop.sleep(),t.abrupt("return",new(l())((function(t){e.events.once(Phaser.Core.Events.POST_RENDER,t),e.loop.lastTime=1e3/u.recordFps,e.loop.step()})));case 5:return e.loop.wake(),t.abrupt("return",d.call(e.canvasRecorder));case 7:case"end":return t.stop()}}),t)})))}}}},i.initRollbar=function(){GameCore.Configs.Rollbar.Enable&&this.rollbar.setup()},i.handlePauseAudio=function(){var e=this;this.sound.pauseOnBlur=!1,this.visibility.addEventVisible((function(){e.audio.playMusic(),e.audio.resumeAllSounds(),GameCore.Utils.Device.isIOS()&&e.globalScene.input.once(Phaser.Input.Events.POINTER_DOWN,(0,a.Z)(h().mark((function t(){return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.sound.context.suspend();case 3:return t.next=5,e.sound.context.resume();case 5:t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])}))))})),this.visibility.addEventHidden((function(){e.audio.pauseMusic(),e.audio.pauseAllSounds()}))},i.removeUnusedPipelines=function(){var e=this.renderer;if(e instanceof Phaser.Renderer.WebGL.WebGLRenderer){var t=e.pipelines,n=Phaser.Renderer.WebGL.Pipelines;if(n)[n.ROPE_PIPELINE,n.LIGHT_PIPELINE,n.POSTFX_PIPELINE,n.POINTLIGHT_PIPELINE,n.BITMAPMASK_PIPELINE].forEach((function(e){var n;null==(n=t.get(e))||n.destroy(),t.remove(e)}))}},t}(Phaser.Game),sI=rI,aI=GameCore.Configs.Debugger.ShowInspector,oI={parent:"app",type:Phaser.AUTO,width:0,height:0,scale:{autoRound:!0},dom:{createContainer:!1},loader:{maxParallelDownloads:6,crossOrigin:"no-cros"},input:{gamepad:!1,keyboard:aI,touch:{capture:!0},smoothFactor:1,activePointers:1,windowEvents:!1},disableContextMenu:!0,render:{pixelArt:!1,antialias:!0,antialiasGL:GameCore.Utils.Device.isDesktop(),transparent:!1,desynchronized:!1,powerPreference:"high-performance",clearBeforeRender:!1,roundPixels:!1},physics:{default:"matter",matter:{gravity:{x:0,y:1.1}}},plugins:{global:[]}};(0,i.j6)();var cI=setInterval((function(){window.__analyticsInitiated&&(window.__fbGameReady=!1,clearInterval(cI),clearInterval(window.__fbInstantLoadingTimer),GameSDK.setLoadingProgress(30),gtag("event","app_initialize",{send_to:["GA"]}),function(){try{var e=new sI(oI);window.game=e}catch(t){(0,i.tO)(t)}}())}),50)},101:function(e,t,n){"use strict";n.d(t,{_:function(){return i}});var i={BUTTON_CLICK:"button_click",SCREEN_OPEN:"screen_open",LOAD_START:"load_start",LOAD_COMPLETE:"load_complete",APP_READY:"app_ready",TUTORIAL_BEGIN:"tutorial_begin",TUTORIAL_STEP:"tutorial_step",TUTORIAL_COMPLETE:"tutorial_complete",MATCH_START:"match_start",MATCH_RESCUE:"match_rescue",MATCH_END:"match_end",LEVEL_START:"level_start",LEVEL_RESCUE:"level_rescue",LEVEL_END:"level_end",LEVEL_RETRY:"level_retry",SHARE:"share",MESSAGE:"message",INVITE:"invite",SHORTCUT_CREATE:"shortcut_create",SHORTCUT_CREATE_POPUP:"shortcut_create_popup",BOT_SUBSCRIBE:"bot_subscribe",BOT_SUBSCRIBE_POPUP:"bot_subscribe_popup",AD_LOAD:"ad_load",AD_LOAD_FAILED:"ad_load_failed",AD_SHOW:"ad_show",AD_SHOW_FAILED:"ad_show_failed",MISSING_AD_SHOW:"missing_ad_show",NEW_USER:"new_user",AD_IMPRESSION:"ad_impression",JOIN_GROUP:"join_group",AD_INIT:"ad_init",TOURNAMENT_SHARE:"tournament_share",TOURNAMENT_CREATE:"tournament_create",TOURNAMENT_POST_SCORE:"tournament_post_score",DAILY_QUEST_COMPLETE:"daily_quest_complete",VIEW_ITEM_LIST:"view_item_list",SELECT_ITEM:"select_item",VIEW_ITEM:"view_item",BEGIN_CHECKOUT:"begin_checkout",PURCHASE:"purchase",PURCHASE_CANCEL:"purchase_cancel",EARN_ITEM:"earn_item",EARN_VIRTUAL_CURRENCY:"earn_virtual_currency",SPEND_VIRTUAL_CURRENCY:"spend_virtual_currency",USE_ITEM:"use_item",BUY_GAME_ITEM:"buy_game_item",BUY_BOOSTER_ITEM:"buy_booster_item"}},432:function(e,t,n){"use strict";var i=n(201),r=function(){function e(e,t,n,r){this.playerId=void 0,this.name=void 0,this.photo=void 0,this.locale=void 0,this.playerId=e,this.name=t,this.photo=n||i.Z.AVATAR.FILE,this.locale=r||"en_US"}return e.prototype.toObject=function(){return{playerId:this.playerId,name:this.name,photo:this.photo,locale:this.locale}},e}();t.Z=r},438:function(e,t){"use strict";t.Z={RESIZE:"resize",CHANGE_LAYOUT:"change-layout"}},443:function(e,t,n){"use strict";n.d(t,{I:function(){return r}});var i=n(436),r=function(e){return{type:i.DW,payload:{sceneKey:e}}}},199:function(e,t,n){"use strict";n.d(t,{F0:function(){return l},Gm:function(){return c},qZ:function(){return o}});var i=n(38),r=n.n(i),s=n(39),a=n.n(s),o=function(e){return new(r())((function(t){return setTimeout(t,e)}))},c=function(e){var t=new Date(e),n=new Date;return t.getDate()===n.getDate()&&t.getMonth()===n.getMonth()&&t.getFullYear()===n.getFullYear()},l=function(e,t){void 0===t&&(t=!0);var n=new Date(e).toISOString();return t?a()(n).call(n,11,-5):a()(n).call(n,14,-5)}},198:function(e,t,n){"use strict";n.d(t,{R0:function(){return a},Tv:function(){return s},j6:function(){return i},sw:function(){return r},tO:function(){return o}});n(431),n(130),n(73),n(70);var i=function(){var e=setInterval((function(){window.Sentry&&clearInterval(e)}),100)},r=function(e,t){window.Sentry&&window.Sentry.addBreadcrumb({category:e,message:t})},s=function(e){window.Sentry&&window.Sentry.setUser(e)},a=function(e,t){},o=function(e){}},428:function(e,t){"use strict";t.Z=function(e){for(var t=e.length-1;t>0;t--){var n=Math.floor(Math.random()*(t+1)),i=[e[n],e[t]];e[t]=i[0],e[n]=i[1]}}},433:function(e,t){"use strict";t.Z={GENERIC_NOTIFICATION:0,NEW_USER_NOTIFICATION:1,MONDAY_NOTIFICATION:2,TUESDAY_NOTIFICATION:3,WEDNESDAY_NOTIFICATION:4,THURSDAY_NOTIFICATION:5,FRIDAY_NOTIFICATION:6,SATURDAY_NOTIFICATION:7,SUNDAY_NOTIFICATION:8}},615:function(e,t,n){"use strict";n.d(t,{Z:function(){return s}});var i=JSON.parse('{"data":["Smith","Johnson","Williams","Brown","Jones","Miller","Davis","Garcia","Rodriguez","Wilson","Martinez","Anderson","Taylor","Thomas","Hernandez","Moore","Martin","Jackson","Thompson","White","Lopez","Lee","Gonzalez","Harris","Clark","Lewis","Robinson","Walker","Perez","Hall","Young","Allen","Sanchez","Wright","King","Scott","Green","Baker","Adams","Nelson","Hill","Ramirez","Campbell","Mitchell","Roberts","Carter","Phillips","Evans","Turner","Torres","Parker","Collins","Edwards","Stewart","Flores","Morris","Nguyen","Murphy","Rivera","Cook","Rogers","Morgan","Peterson","Cooper","Reed","Bailey","Bell","Gomez","Kelly","Howard","Ward","Cox","Diaz","Richardson","Wood","Watson","Brooks","Bennett","Gray","James","Reyes","Cruz","Hughes","Price","Myers","Long","Foster","Sanders","Ross","Morales","Powell","Sullivan","Russell","Ortiz","Jenkins","Gutierrez","Perry","Butler","Barnes","Fisher","Henderson","Coleman","Simmons","Patterson","Jordan","Reynolds","Hamilton","Graham","Kim","Gonzales","Alexander","Ramos","Wallace","Griffin","West","Cole","Hayes","Chavez","Gibson","Bryant","Ellis","Stevens","Murray","Ford","Marshall","Owens","Mcdonald","Harrison","Ruiz","Kennedy","Wells","Alvarez","Woods","Mendoza","Castillo","Olson","Webb","Washington","Tucker","Freeman","Burns","Henry","Vasquez","Snyder","Simpson","Crawford","Jimenez","Porter","Mason","Shaw","Gordon","Wagner","Hunter","Romero","Hicks","Dixon","Hunt","Palmer","Robertson","Black","Holmes","Stone","Meyer","Boyd","Mills","Warren","Fox","Rose","Rice","Moreno","Schmidt","Patel","Ferguson","Nichols","Herrera","Medina","Ryan","Fernandez","Weaver","Daniels","Stephens","Gardner","Payne","Kelley","Dunn","Pierce","Arnold","Tran","Spencer","Peters","Hawkins","Grant","Hansen","Castro","Hoffman","Hart","Elliott","Cunningham","Knight","Bradley","Carroll","Hudson","Duncan","Armstrong","Berry","Andrews","Johnston","Ray","Lane","Riley","Carpenter","Perkins","Aguilar","Silva","Richards","Willis","Matthews","Chapman","Lawrence","Garza","Vargas","Watkins","Wheeler","Larson","Carlson","Harper","George","Greene","Burke","Guzman","Morrison","Munoz","Jacobs","Obrien","Lawson","Franklin","Lynch","Bishop","Carr","Salazar","Austin","Mendez","Gilbert","Jensen","Williamson","Montgomery","Harvey","Oliver","Howell","Dean","Hanson","Weber","Garrett","Sims","Burton","Fuller","Soto","Mccoy","Welch","Chen","Schultz","Walters","Reid","Fields","Walsh","Little","Fowler","Bowman","Davidson","May","Day","Schneider","Newman","Brewer","Lucas","Holland","Wong","Banks","Santos","Curtis","Pearson","Delgado","Valdez","Pena","Rios","Douglas","Sandoval","Barrett","Hopkins","Keller","Guerrero","Stanley","Bates","Alvarado","Beck","Ortega","Wade","Estrada","Contreras","Barnett","Caldwell","Santiago","Lambert","Powers","Chambers","Nunez","Craig","Leonard","Lowe","Rhodes","Byrd","Gregory","Shelton","Frazier","Becker","Maldonado","Fleming","Vega","Sutton","Cohen","Jennings","Parks","Mcdaniel","Watts","Barker","Norris","Vaughn","Vazquez","Holt","Schwartz","Steele","Benson","Neal","Dominguez","Horton","Terry","Wolfe","Hale","Lyons","Graves","Haynes","Miles","Park","Warner","Padilla","Bush","Thornton","Mccarthy","Mann","Zimmerman","Erickson","Fletcher","Mckinney","Page","Dawson","Joseph","Marquez","Reeves","Klein","Espinoza","Baldwin","Moran","Love","Robbins","Higgins","Ball","Cortez","Le","Griffith","Bowen","Sharp","Cummings","Ramsey","Hardy","Swanson","Barber","Acosta","Luna","Chandler","Blair","Daniel","Cross","Simon","Dennis","Oconnor","Quinn","Gross","Navarro","Moss","Fitzgerald","Doyle","Mclaughlin","Rojas","Rodgers","Stevenson","Singh","Yang","Figueroa","Harmon","Newton","Paul","Manning","Garner","Mcgee","Reese","Francis","Burgess","Adkins","Goodman","Curry","Brady","Christensen","Potter","Walton","Goodwin","Mullins","Molina","Webster","Fischer","Campos","Avila","Sherman","Todd","Chang","Blake","Malone","Wolf","Hodges","Juarez","Gill","Farmer","Hines","Gallagher","Duran","Hubbard","Cannon","Miranda","Wang","Saunders","Tate","Mack","Hammond","Carrillo","Townsend","Wise","Ingram","Barton","Mejia","Ayala","Schroeder","Hampton","Rowe","Parsons","Frank","Waters","Strickland","Osborne","Maxwell","Chan","Deleon","Norman","Harrington","Casey","Patton","Logan","Bowers","Mueller","Glover","Floyd","Hartman","Buchanan","Cobb","French","Kramer","Mccormick","Clarke","Tyler","Gibbs","Moody","Conner","Sparks","Mcguire","Leon","Bauer","Norton","Pope","Flynn","Hogan","Robles","Salinas","Yates","Lindsey","Lloyd","Marsh","Mcbride","Owen","Solis","Pham","Lang","Pratt","Lara","Brock","Ballard","Trujillo","Shaffer","Drake","Roman","Aguirre","Morton","Stokes","Lamb","Pacheco","Patrick","Cochran","Shepherd","Cain","Burnett","Hess","Li","Cervantes","Olsen","Briggs","Ochoa","Cabrera","Velasquez","Montoya","Roth","Meyers","Cardenas","Fuentes","Weiss","Hoover","Wilkins","Nicholson","Underwood","Short","Carson","Morrow","Colon","Holloway","Summers","Bryan","Petersen","Mckenzie","Serrano","Wilcox","Carey","Clayton","Poole","Calderon","Gallegos","Greer","Rivas","Guerra","Decker","Collier","Wall","Whitaker","Bass","Flowers","Davenport","Conley","Houston","Huff","Copeland","Hood","Monroe","Massey","Roberson","Combs","Franco","Larsen","Pittman","Randall","Skinner","Wilkinson","Kirby","Cameron","Bridges","Anthony","Richard","Kirk","Bruce","Singleton","Mathis","Bradford","Boone","Abbott","Charles","Allison","Sweeney","Atkinson","Horn","Jefferson","Rosales","York","Christian","Phelps","Farrell","Castaneda","Nash","Dickerson","Bond","Wyatt","Foley","Chase","Gates","Vincent","Mathews","Hodge","Garrison","Trevino","Villarreal","Heath","Dalton","Valencia","Callahan","Hensley","Atkins","Huffman","Roy","Boyer","Shields","Lin","Hancock","Grimes","Glenn","Cline","Delacruz","Camacho","Dillon","Parrish","Oneill","Melton","Booth","Kane","Berg","Harrell","Pitts","Savage","Wiggins","Brennan","Salas","Marks","Russo","Sawyer","Baxter","Golden","Hutchinson","Liu","Walter","Mcdowell","Wiley","Rich","Humphrey","Johns","Koch","Suarez","Hobbs","Beard","Gilmore","Ibarra","Keith","Macias","Khan","Andrade","Ware","Stephenson","Henson","Wilkerson","Dyer","Mcclure","Blackwell","Mercado","Tanner","Eaton","Clay","Barron","Beasley","Oneal","Preston","Small","Wu","Zamora","Macdonald","Vance","Snow","Mcclain","Stafford","Orozco","Barry","English","Shannon","Kline","Jacobson","Woodard","Huang","Kemp","Mosley","Prince","Merritt","Hurst","Villanueva","Roach","Nolan","Lam","Yoder","Mccullough","Lester","Santana","Valenzuela","Winters","Barrera","Leach","Orr","Berger","Mckee","Strong","Conway","Stein","Whitehead","Bullock","Escobar","Knox","Meadows","Solomon","Velez","Odonnell","Kerr","Stout","Blankenship","Browning","Kent","Lozano","Bartlett","Pruitt","Buck","Barr","Gaines","Durham","Gentry","Mcintyre","Sloan","Melendez","Rocha","Herman","Sexton","Moon","Hendricks","Rangel","Stark","Lowery","Hardin","Hull","Sellers","Ellison","Calhoun","Gillespie","Mora","Knapp","Mccall","Morse","Dorsey","Weeks","Nielsen","Livingston","Leblanc","Mclean","Bradshaw","Glass","Middleton","Buckley","Schaefer","Frost","Howe","House","Mcintosh","Ho","Pennington","Reilly","Hebert","Mcfarland","Hickman","Noble","Spears","Conrad","Arias","Galvan","Velazquez","Huynh","Frederick","Randolph","Cantu","Fitzpatrick","Mahoney","Peck","Villa","Michael","Donovan","Mcconnell","Walls","Boyle","Mayer","Zuniga","Giles","Pineda","Pace","Hurley","Mays","Mcmillan","Crosby","Ayers","Case","Bentley","Shepard","Everett","Pugh","David","Mcmahon","Dunlap","Bender","Hahn","Harding","Acevedo","Raymond","Blackburn","Duffy","Landry","Dougherty","Bautista","Shah","Potts","Arroyo","Valentine","Meza","Gould","Vaughan","Fry","Rush","Avery","Herring","Dodson","Clements","Sampson","Tapia","Bean","Lynn","Crane","Farley","Cisneros","Benton","Ashley","Mckay","Finley","Best","Blevins","Friedman","Moses","Sosa","Blanchard","Huber","Frye","Krueger","Bernard","Rosario","Rubio","Mullen","Benjamin","Haley","Chung","Moyer","Choi","Horne","Yu","Woodward","Ali","Nixon","Hayden","Rivers","Estes","Mccarty","Richmond","Stuart","Maynard","Brandt","Oconnell","Hanna","Sanford","Sheppard","Church","Burch","Levy","Rasmussen","Coffey","Ponce","Faulkner","Donaldson","Schmitt","Novak","Costa","Montes","Booker","Cordova","Waller","Arellano","Maddox","Mata","Bonilla","Stanton","Compton","Kaufman","Dudley","Mcpherson","Beltran","Dickson","Mccann","Villegas","Proctor","Hester","Cantrell","Daugherty","Cherry","Bray","Davila","Rowland","Levine","Madden","Spence","Good","Irwin","Werner","Krause","Petty","Whitney","Baird","Hooper","Pollard","Zavala","Jarvis","Holden","Haas","Hendrix","Mcgrath","Bird","Lucero","Terrell","Riggs","Joyce","Mercer","Rollins","Galloway","Duke","Odom","Andersen","Downs","Hatfield","Benitez","Archer","Huerta","Travis","Mcneil","Hinton","Zhang","Hays","Mayo","Fritz","Branch","Mooney","Ewing","Ritter","Esparza","Frey","Braun","Gay","Riddle","Haney","Kaiser","Holder","Chaney","Mcknight","Gamble","Vang","Cooley","Carney","Cowan","Forbes","Ferrell","Davies","Barajas","Shea","Osborn","Bright","Cuevas","Bolton","Murillo","Lutz","Duarte","Kidd","Key","Cooke"]}'),r=function(e){return Math.floor(Math.random()*e)},s=function(){if(!i)return"Unknown";if(!i.data)return"Unknown";var e=i.data;if(!Array.isArray(e))return"Unknown";var t=e.length;return e[r(t)]+" "+e[r(t)]}},429:function(e,t){"use strict";t.Z=function(e,t){var n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789*#%&!",i="",r=e;void 0!=t&&(r-=t.length,i+=t);for(var s=0;s<r;s++){var a=Math.floor(67*Math.random());i+=n.charAt(a)}return i}}},t={};function n(i){var r=t[i];if(void 0!==r)return r.exports;var s=t[i]={id:i,loaded:!1,exports:{}};return e[i].call(s.exports,s,s.exports,n),s.loaded=!0,s.exports}n.m=e,n.amdO={},function(){var e=[];n.O=function(t,i,r,s){if(!i){var a=1/0;for(u=0;u<e.length;u++){i=e[u][0],r=e[u][1],s=e[u][2];for(var o=!0,c=0;c<i.length;c++)(!1&s||a>=s)&&Object.keys(n.O).every((function(e){return n.O[e](i[c])}))?i.splice(c--,1):(o=!1,s<a&&(a=s));if(o){e.splice(u--,1);var l=r();void 0!==l&&(t=l)}}return t}s=s||0;for(var u=e.length;u>0&&e[u-1][2]>s;u--)e[u]=e[u-1];e[u]=[i,r,s]}}(),n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,{a:t}),t},n.d=function(e,t){for(var i in t)n.o(t,i)&&!n.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},n.f={},n.e=function(e){return Promise.all(Object.keys(n.f).reduce((function(t,i){return n.f[i](e,t),t}),[]))},n.u=function(e){return e+"."+{7:"7ec29cd61a269d6eb5aa",109:"ee7ea822b72b84f893c9",112:"62ccbb7f16abdbabb36d",123:"631d74786f8bef4bc657",131:"3d8831007118eaa938ee",401:"b7ce5b485fe7207491ca",442:"159b911035a573731748",469:"afc9c5d6126ce67a2c17",498:"834dbdb756b57cc2922e",530:"059db086a150c76c17ce",613:"3a0d416b6017609a5cf7",616:"634b4f071936b21da6cb",638:"7b4d47e14f2684c2e3f1",739:"a545e138c5553207788f",783:"8cbd0930d49d6d9c25e8",803:"c00e19854abafca4c2c7",942:"5143a4d95a95edc86042",961:"9b4b90d04d978f58f249"}[e]+".bundle.js"},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.hmd=function(e){return(e=Object.create(e)).children||(e.children=[]),Object.defineProperty(e,"exports",{enumerable:!0,set:function(){throw new Error("ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: "+e.id)}}),e},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},function(){var e={},t="game-core:";n.l=function(i,r,s,a){if(e[i])e[i].push(r);else{var o,c;if(void 0!==s)for(var l=document.getElementsByTagName("script"),u=0;u<l.length;u++){var h=l[u];if(h.getAttribute("src")==i||h.getAttribute("data-webpack")==t+s){o=h;break}}o||(c=!0,(o=document.createElement("script")).charset="utf-8",o.timeout=120,n.nc&&o.setAttribute("nonce",n.nc),o.setAttribute("data-webpack",t+s),o.src=i),e[i]=[r];var d=function(t,n){o.onerror=o.onload=null,clearTimeout(p);var r=e[i];if(delete e[i],o.parentNode&&o.parentNode.removeChild(o),r&&r.forEach((function(e){return e(n)})),t)return t(n)},p=setTimeout(d.bind(null,void 0,{type:"timeout",target:o}),12e4);o.onerror=d.bind(null,o.onerror),o.onload=d.bind(null,o.onload),c&&document.head.appendChild(o)}}}(),n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},function(){var e;n.g.importScripts&&(e=n.g.location+"");var t=n.g.document;if(!e&&t&&(t.currentScript&&(e=t.currentScript.src),!e)){var i=t.getElementsByTagName("script");if(i.length)for(var r=i.length-1;r>-1&&!e;)e=i[r--].src}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),n.p=e}(),function(){var e={757:0};n.f.j=function(t,i){var r=n.o(e,t)?e[t]:void 0;if(0!==r)if(r)i.push(r[2]);else{var s=new Promise((function(n,i){r=e[t]=[n,i]}));i.push(r[2]=s);var a=n.p+n.u(t),o=new Error;n.l(a,(function(i){if(n.o(e,t)&&(0!==(r=e[t])&&(e[t]=void 0),r)){var s=i&&("load"===i.type?"missing":i.type),a=i&&i.target&&i.target.src;o.message="Loading chunk "+t+" failed.\n("+s+": "+a+")",o.name="ChunkLoadError",o.type=s,o.request=a,r[1](o)}}),"chunk-"+t,t)}},n.O.j=function(t){return 0===e[t]};var t=function(t,i){var r,s,a=i[0],o=i[1],c=i[2],l=0;if(a.some((function(t){return 0!==e[t]}))){for(r in o)n.o(o,r)&&(n.m[r]=o[r]);if(c)var u=c(n)}for(t&&t(i);l<a.length;l++)s=a[l],n.o(e,s)&&e[s]&&e[s][0](),e[s]=0;return n.O(u)},i=self.webpackChunkgame_core=self.webpackChunkgame_core||[];i.forEach(t.bind(null,0)),i.push=t.bind(null,i.push.bind(i))}(),n.O(void 0,[216,630,542],(function(){return n(636)})),n.O(void 0,[216,630,542],(function(){return n(637)})),n.O(void 0,[216,630,542],(function(){return n(462)})),n.O(void 0,[216,630,542],(function(){return n(463)})),n.O(void 0,[216,630,542],(function(){return n(638)})),n.O(void 0,[216,630,542],(function(){return n(561)}));var i=n.O(void 0,[216,630,542],(function(){return n(578)}));i=n.O(i)})();