(function(){var e={390:function(){HTMLCanvasElement.prototype.toBlob||Object.defineProperty(HTMLCanvasElement.prototype,"toBlob",{value:function(e,t,n){for(var a=atob(this.toDataURL(t,n).split(",")[1]),i=a.length,r=i>>2,s=new Uint8Array(i),o=new Uint32Array(s.buffer,0,r),c=0,u=0;c<r;c++)o[c]=a.charCodeAt(u++)|a.charCodeAt(u++)<<8|a.charCodeAt(u++)<<16|a.charCodeAt(u++)<<24;for(var l=3&i;l--;)s[u]=a.charCodeAt(u++);e(new Blob([s],{type:t||"image/png"}))}})},539:function(e,t,n){"use strict";n.d(t,{J:function(){return L},Z:function(){return N}});var a=n(1),i=n(44),r=n.n(i),s=n(5),o=n.n(s),c=n(41),u=n.n(c),l=n(2),h=n.n(l),d=n(540),p=n(166),f=n.n(p),g=function(e){return function(t){t.preventDefault();var n=document.getElementById("popup-add-shortcut");null==n||n.remove(),e()}},m=function(e){var t=document.createElement("div");return t.innerHTML=f()(e).call(e),t.firstChild},v=function(){var e=(0,a.Z)(h().mark((function e(t,n){var a,i,r;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=m('<div style="height: 50vh;width: 53vh;max-width: 95vw;position:absolute;background-color: rgba(31, 120, 136, 0.48);border-radius: 2vh;margin: auto;right: 0;left: 0;top: 0;bottom: 0;display: flex;flex-direction:column;justify-content:space-evenly;">\n            <p style="color:white;font-size:40px;text-align:center">Add shortcut for this game</p>\n            <p style="color:white;font-size:20px;text-align:center">This game wants to add a shortcut.</p>\n        </div>'),i=m('<button style="border: none;background-color: #1877f2;color: #fff;width: 90%;height: 50px;border-radius: 15px;margin-left: auto;margin-right: auto;font-size: 20px;cursor: pointer;">No</button>'),r=m('<button style="border: none;background-color: #1877f2;color: #fff;width: 90%;height: 50px;border-radius: 15px;margin-left: auto;margin-right: auto;font-size: 20px;cursor: pointer;">Yes</button>'),a&&i&&r||n({code:"CREATE_POPUP_ERROR",message:"Show popup failed"}),a.id="popup-add-shortcut",a.appendChild(i),a.appendChild(r),document.body.appendChild(a),i.addEventListener("click",g(n)),r.addEventListener("click",g(t));case 10:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),y=function(){function e(){this.isFirstCall=!0}var t=e.prototype;return t.canCreateShortcutAsync=function(){var e=(0,a.Z)(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isFirstCall){e.next=3;break}return this.isFirstCall=!1,e.abrupt("return",!0);case 3:return e.abrupt("return",!1);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),t.createShortcutAsync=function(){var e=(0,a.Z)(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new(o())((function(e,t){v(e,t)})));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),e}(),b=y,A=function(e){return function(t){t.preventDefault();var n=document.getElementById("popup-subscribe-bots");null==n||n.remove(),e()}},S=function(e){var t=document.createElement("div");return t.innerHTML=f()(e).call(e),t.firstChild},E=function(){var e=(0,a.Z)(h().mark((function e(t,n){var a,i,r;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=S('<div style="height: 50vh;width: 53vh;max-width: 95vw;position:absolute;background-color: rgba(31, 120, 136, 0.48);border-radius: 2vh;margin: auto;right: 0;left: 0;top: 0;bottom: 0;display: flex;flex-direction:column;justify-content:space-evenly;">\n            <p style="color:white;font-size:40px;text-align:center">Turn on messages from this game</p>\n            <p style="color:white;font-size:20px;text-align:center">This game wants to send messages, announcements and more.</p>\n        </div>'),i=S('<button style="border: none;background-color: #1877f2;color: #fff;width: 90%;height: 50px;border-radius: 15px;margin-left: auto;margin-right: auto;font-size: 20px;cursor: pointer;">Not Now</button>'),r=S('<button style="border: none;background-color: #1877f2;color: #fff;width: 90%;height: 50px;border-radius: 15px;margin-left: auto;margin-right: auto;font-size: 20px;cursor: pointer;">Turn On</button>'),a&&i&&r||n({code:"CREATE_POPUP_ERROR",message:"Show popup failed"}),a.id="popup-subscribe-bots",a.appendChild(i),a.appendChild(r),document.body.appendChild(a),i.addEventListener("click",A(n)),r.addEventListener("click",A(t));case 10:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),w=function(){function e(){this.isFirstCall=!0}var t=e.prototype;return t.canSubscribeBotAsync=function(){var e=(0,a.Z)(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isFirstCall){e.next=3;break}return this.isFirstCall=!1,e.abrupt("return",!0);case 3:return e.abrupt("return",!1);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),t.subscribeBotAsync=function(){var e=(0,a.Z)(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new(o())((function(e,t){E(e,t)})));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),e}(),T=w,I=n(543),C=n(541),k=n(542),x=n(545),P=GameCore.Configs,_=P.Notification,O=P.AddShortcut,R=P.SubscribeBot,D=_.GameTitle,L=(_.GameImage,function(){function e(){}var t=e.prototype;return t.createAsync=function(){var e=(0,a.Z)(h().mark((function e(t){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,GameSDK.tournament.createAsync(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t.shareAsync=function(){var e=(0,a.Z)(h().mark((function e(t){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,GameSDK.tournament.shareAsync(t);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t.joinAsync=function(){var e=(0,a.Z)(h().mark((function e(t){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,GameSDK.tournament.joinAsync(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t.postScoreAsync=function(){var e=(0,a.Z)(h().mark((function e(t){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,GameSDK.tournament.postScoreAsync(t);case 2:window.game.analytics.event(d._.TOURNAMENT_POST_SCORE,{score:!0});case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t.getTournamentsAsync=function(){var e=(0,a.Z)(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,GameSDK.tournament.getTournamentsAsync();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),e}()),B=function(){function e(e){var t=this;this.facebook=void 0,this.supportedAPIs=[],this.mockSubscribeBot=void 0,this.mockAddShortcut=void 0,this.isCalledSubscribeBot=!1,this.isCalledCreateShortcut=!1,this.isCanPlayerMatch=null,this.isCanSubscribeBot=null,this.isCanCreateShortcut=null,this.attemptToAddShortcut=(0,a.Z)(h().mark((function e(){var n,a,i,r,s,o;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.isCalledCreateShortcut){e.next=2;break}return e.abrupt("return",!1);case 2:if(e.prev=2,null===t.isCanCreateShortcut&&(O.UseMock?t.isCanCreateShortcut=!0:t.isCanCreateShortcut=t.isSupportedAPI("canCreateShortcutAsync")),t.isCanCreateShortcut){e.next=6;break}return e.abrupt("return",!1);case 6:return e.next=8,GameSDK.player.getDataAsync(["lastCallCreateShortcut"]);case 8:if(e.t0=e.sent,e.t0){e.next=11;break}e.t0={};case 11:if(n=e.t0,!(a=n.lastCallCreateShortcut||0)||!(0,C.Gm)(+a)){e.next=15;break}return e.abrupt("return",!1);case 15:if(!O.UseMock){e.next=21;break}return e.next=18,t.mockAddShortcut.canCreateShortcutAsync();case 18:e.t1=e.sent,e.next=24;break;case 21:return e.next=23,GameSDK.canCreateShortcutAsync();case 23:e.t1=e.sent;case 24:if(i=e.t1,r=Date.now(),GameSDK.player.setDataAsync({lastCallCreateShortcut:r}),!i){e.next=49;break}return s=d._.SHORTCUT_CREATE,o=d._.SHORTCUT_CREATE_POPUP,t.isCalledCreateShortcut=!0,window.game.analytics.event(o),e.prev=31,e.next=34,GameCore.Utils.Valid.isValueChangeAsync(window.__fbGameReady,!0);case 34:if(!O.UseMock){e.next=39;break}return e.next=37,t.mockAddShortcut.createShortcutAsync();case 37:e.next=41;break;case 39:return e.next=41,FBInstant.createShortcutAsync();case 41:return window.game.analytics.event(s,{success:!0}),e.abrupt("return",!0);case 45:return e.prev=45,e.t2=e.catch(31),window.game.analytics.event(s,{success:!1}),e.abrupt("return",!1);case 49:return e.abrupt("return",!1);case 52:return e.prev=52,e.t3=e.catch(2),e.abrupt("return",!1);case 55:case"end":return e.stop()}}),e,null,[[2,52],[31,45]])}))),this.attemptToSubscribeBot=(0,a.Z)(h().mark((function e(){var n,a,i,r,s;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.isCalledSubscribeBot){e.next=2;break}return e.abrupt("return",!1);case 2:if(e.prev=2,null===t.isCanSubscribeBot&&(R.UseMock?t.isCanSubscribeBot=!0:t.isCanSubscribeBot=t.isSupportedAPI("player.canSubscribeBotAsync")),t.isCanSubscribeBot){e.next=6;break}return e.abrupt("return",!1);case 6:if(!R.UseMock){e.next=12;break}return e.next=9,t.mockSubscribeBot.canSubscribeBotAsync();case 9:e.t0=e.sent,e.next=15;break;case 12:return e.next=14,GameSDK.player.canSubscribeBotAsync();case 14:e.t0=e.sent;case 15:if(!e.t0){e.next=49;break}return e.next=19,GameSDK.player.getDataAsync(["lastCallSubscribeBot"]);case 19:if(e.t1=e.sent,e.t1){e.next=22;break}e.t1={};case 22:if(n=e.t1,!(a=n.lastCallSubscribeBot)||!(0,C.Gm)(+a)){e.next=26;break}return e.abrupt("return",!1);case 26:return i=Date.now(),GameSDK.player.setDataAsync({lastCallSubscribeBot:i}),r=d._.BOT_SUBSCRIBE,s=d._.BOT_SUBSCRIBE_POPUP,t.isCalledSubscribeBot=!0,window.game.analytics.event(s),e.prev=31,e.next=34,GameCore.Utils.Valid.isValueChangeAsync(window.__fbGameReady,!0);case 34:if(!R.UseMock){e.next=39;break}return e.next=37,t.mockSubscribeBot.subscribeBotAsync();case 37:e.next=41;break;case 39:return e.next=41,GameSDK.player.subscribeBotAsync();case 41:return window.game.analytics.event(r,{success:!0}),e.abrupt("return",!0);case 45:return e.prev=45,e.t2=e.catch(31),window.game.analytics.event(r,{success:!1}),e.abrupt("return",!1);case 49:return e.abrupt("return",!1);case 52:return e.prev=52,e.t3=e.catch(2),e.abrupt("return",!1);case 55:case"end":return e.stop()}}),e,null,[[2,52],[31,45]])}))),this.matchPlayerAsync=function(){var e=(0,a.Z)(h().mark((function e(n,a,i){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,null===t.isCanPlayerMatch&&(t.isCanPlayerMatch=t.isSupportedAPI("checkCanPlayerMatchAsync")),t.isCanPlayerMatch){e.next=4;break}return e.abrupt("return",!1);case 4:return e.next=6,GameSDK.checkCanPlayerMatchAsync();case 6:if(e.sent){e.next=9;break}return e.abrupt("return",!1);case 9:return e.next=11,GameSDK.matchPlayerAsync(n,a,i);case 11:return e.abrupt("return",!0);case 14:return e.prev=14,e.t0=e.catch(0),e.abrupt("return",!1);case 17:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(t,n,a){return e.apply(this,arguments)}}(),this.getTournamentAsync=(0,a.Z)(h().mark((function e(){var n,a,i;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.facebook.tournament.getTournamentsAsync();case 2:if(n=e.sent,a=GameSDK.context.getID(),!(i=r()(n).call(n,(function(e){return e.getContextID()===a})))){e.next=7;break}return e.abrupt("return",o().resolve(i));case 7:return e.abrupt("return",o().reject(new k.Z(null)));case 8:case"end":return e.stop()}}),e)}))),this.requestTournamentAsync=function(){var e=(0,a.Z)(h().mark((function e(n){var a;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.facebook.getTournamentAsync();case 3:return e.next=5,t.facebook.tournament.shareAsync({score:n});case 5:e.next=12;break;case 7:return e.prev=7,e.t0=e.catch(0),a=GameSDK.player.getName(),e.next=12,t.facebook.tournament.createAsync({initialScore:n,config:{tournamentTitle:a+"'s Tournament"}});case 12:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),this.isSupportedAPI=function(e){var n;return 0===t.supportedAPIs.length&&(t.supportedAPIs=GameSDK.getSupportedAPIs()),u()(n=t.supportedAPIs).call(n,e)},this.facebook=e,this.mockSubscribeBot=new T,this.mockAddShortcut=new b}var t=e.prototype;return t.switchAsync=function(){var e=(0,a.Z)(h().mark((function e(t){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,GameCore.Utils.Valid.isValueChangeAsync(window.__fbGameReady,!0);case 2:return e.next=4,GameSDK.context.switchAsync(t);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t.chooseAsync=function(){var e=(0,a.Z)(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,GameCore.Utils.Valid.isValueChangeAsync(window.__fbGameReady,!0);case 3:return e.next=5,GameSDK.context.chooseAsync({filters:["INCLUDE_EXISTING_CHALLENGES"],minSize:2,maxSize:2});case 5:case 15:return e.abrupt("return",GameSDK.context.getID());case 8:if(e.prev=8,e.t0=e.catch(0),!(e.t0 instanceof Object&&GameCore.Utils.Object.hasOwn(e.t0,"code"))){e.next=16;break}e.t1=e.t0.code,e.next="USER_INPUT"===e.t1?14:"SAME_CONTEXT"===e.t1?15:16;break;case 14:return e.abrupt("return",!1);case 16:return e.abrupt("return",null);case 17:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}(),t.createAsync=function(){var e=(0,a.Z)(h().mark((function e(t){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,GameCore.Utils.Valid.isValueChangeAsync(window.__fbGameReady,!0);case 3:return e.next=5,GameSDK.context.createAsync(""+t);case 5:case 15:return e.abrupt("return",GameSDK.context.getID());case 8:if(e.prev=8,e.t0=e.catch(0),!(e.t0 instanceof Object&&GameCore.Utils.Object.hasOwn(e.t0,"code"))){e.next=16;break}e.t1=e.t0.code,e.next="USER_INPUT"===e.t1?14:"SAME_CONTEXT"===e.t1?15:16;break;case 14:return e.abrupt("return",!1);case 16:return e.abrupt("return",null);case 17:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),t.getPlayerToken=function(){var e=(0,a.Z)(h().mark((function e(){var t;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,GameSDK.player.getSignedPlayerInfoAsync();case 2:return t=e.sent,e.abrupt("return",t.getSignature());case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),t.getContextPlayers=function(){var e=(0,a.Z)(h().mark((function e(t){var n,a;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,GameSDK.context.getPlayersAsync();case 3:return n=e.sent,a=[],n.forEach((function(e){var n=e.getID();if(n!==t){var i=e.getName();if(i){var r=e.getPhoto();a.push(new I.Z(n,i,r).toObject())}}})),e.abrupt("return",GameCore.Utils.Array.unique(a));case 9:return e.prev=9,e.t0=e.catch(0),console.warn("getPlayersAsync",{error:e.t0}),e.abrupt("return",[]);case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}(),t.shareAsync=function(){var e=(0,a.Z)(h().mark((function e(t){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,GameSDK.shareAsync(t);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t.sendMessage=function(){var e=(0,a.Z)(h().mark((function e(t){var n,a,i,r,s,o,c;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.data,a=t.image,i=t.template,r=t.cta,s=t.text,o=t.strategy,c={data:n,image:a,action:"CUSTOM",template:i,cta:r,text:s,strategy:void 0===o?"IMMEDIATE":o,notification:"PUSH"},e.next=4,FBInstant.updateAsync(c);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t.sendMessageWithLastStrategy=function(){var e=(0,a.Z)(h().mark((function e(t){var n,a,i,r,s,o;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.data,a=t.image,i=t.template,r=t.cta,s=t.text,o={data:n,image:a,action:"CUSTOM",template:i,cta:r,text:s,strategy:"LAST",notification:"PUSH"},e.next=4,GameSDK.updateAsync(o);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t.inviteAsync=function(){var e=(0,a.Z)(h().mark((function e(t){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,GameSDK.inviteAsync(t);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t.postSessionScoreAsync=function(){var e=(0,a.Z)(h().mark((function e(t){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,GameSDK.postSessionScoreAsync(t);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t.getRewardedVideoAsync=function(){var e=(0,a.Z)(h().mark((function e(t){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,GameSDK.getRewardedVideoAsync(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t.getInterstitialAdAsync=function(){var e=(0,a.Z)(h().mark((function e(t){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,GameSDK.getInterstitialAdAsync(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t.getContextID=function(){return GameSDK.context.getID()},t.setLoadingProgress=function(e){GameSDK.setLoadingProgress(e)},t.getLocale=function(){return GameSDK.getLocale()||"en"},t.injectTournament=function(){var e=(0,a.Z)(h().mark((function e(){var t,a;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!GameCore.Configs.Tournament.UseMock){e.next=11;break}return e.next=4,n.e(302).then(n.bind(n,517));case 4:t=e.sent.default,a=new t,this.facebook.tournament=a,GameSDK.getTournamentAsync=this.getTournamentAsync,GameSDK.tournament=a,e.next=12;break;case 11:this.facebook.tournament=new L;case 12:this.facebook.getTournamentAsync=function(){return FBInstant.getTournamentAsync()},this.facebook.requestTournamentAsync=this.requestTournamentAsync;case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),t.sendNotificationAsync=function(){var e=(0,a.Z)(h().mark((function e(t){var n,a,i;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,console.log("\ud83e\udd16 ? sendNotificationAsync",t),n=t.message,a=t.delayTime,i=t.type,e.next=5,FBInstant.scheduleNotificationAsync({title:D,minDelayInSeconds:a,description:n,type:null!=i?i:x.Z.GENERIC_NOTIFICATION});case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.error("\ud83e\udd16 ? sendNotificationAsync",e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),t.followOfficialPageAsync=function(){var e=(0,a.Z)(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return window.game.analytics.event(d._.PAGE_FOLLOW),e.prev=1,e.next=4,FBInstant.community.canFollowOfficialPageAsync();case 4:if(!e.sent){e.next=10;break}return e.next=8,FBInstant.community.followOfficialPageAsync();case 8:e.next=11;break;case 10:throw new Error("INVALID_OPERATION");case 11:e.next=16;break;case 13:e.prev=13,e.t0=e.catch(1),console.error("\ud83e\udd16 ? followOfficialPageAsync",e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,13]])})));return function(){return e.apply(this,arguments)}}(),t.joinOfficialGroupAsync=function(){var e=(0,a.Z)(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return window.game.analytics.event(d._.GROUP_JOIN),e.prev=1,e.next=4,FBInstant.community.canJoinOfficialGroupAsync();case 4:if(!e.sent){e.next=10;break}return e.next=8,FBInstant.community.joinOfficialGroupAsync();case 8:e.next=11;break;case 10:throw new Error("INVALID_OPERATION");case 11:e.next=16;break;case 13:e.prev=13,e.t0=e.catch(1),console.error("\ud83e\udd16 ? joinOfficialGroupAsync",e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,13]])})));return function(){return e.apply(this,arguments)}}(),e}(),N=B},391:function(e,t,n){"use strict";var a=n(32),i=n.n(a),r=n(15),s=n.n(r),o=function(e,t){return void 0===t&&(t=1),i()({length:Math.ceil(e.length/t)},(function(n,a){return s()(e).call(e,a*t,a*t+t)}))},c=n(28),u=n.n(c),l=n(41),h=n.n(l),d=function(e,t){return u()(e).call(e,(function(e){return!h()(t).call(t,e)}))},p=function(e){for(var t=e.length-1;t>0;t--){var n=Math.floor(Math.random()*(t+1)),a=[e[n],e[t]];e[t]=a[0],e[n]=a[1]}},f=n(25),g=n.n(f),m=function(e,t,n){return g()(n).call(n,e)===t&&null!==e&&void 0!==e},v=function(e){return u()(e).call(e,m)},y={chunk:o,difference:d,shuffle:p,unique:v},b=n(42),A=n.n(b),S=n(229),E=n.n(S),w=E()((function(e,t){if("string"===typeof e){var n=t[e.toLowerCase()];if("string"===typeof n)return n}return"?"})),T=E()((function(e){for(var t=null,n=[],a=/:([A-Z0-9?]+)/gm;null!==(t=a.exec(e));)n.push(t[1]);return n})),I=E()((function(e){for(var t=null,n=[],a=/([0-9]+[A-Z?]{1}|[A-Z?]{1})/gm;null!==(t=a.exec(e));){var i=t[0];if(i.length>=2){var r,o=i.length,c=s()(i).call(i,0,o-1),u=i[o-1],l=A()(r=new Array(+c)).call(r,u);n.push.apply(n,l)}else n.push(i)}return n})),C=function(e,t){var n=e,a=GameCore.Utils.Object.invert(t),i={},r=0,s=0;return T(n).forEach((function(e){r=0,s++,i[s]||(i[s]={}),I(e).forEach((function(e){r++,i[s][r]=w(e,a)}))})),i},k=E()((function(e,t){var n=t[e];return"string"===typeof n?""+n.toUpperCase():"?"})),x=function e(t,n,a){void 0===a&&(a=!1);var i="";if(!GameCore.Utils.Valid.isObject(t))return i;var r="",o=1;for(var c in t)if(GameCore.Utils.Object.hasOwn(t,c)){var u=t[c];if(GameCore.Utils.Valid.isObject(u))i+=":"+e(u,n,!0);else if(GameCore.Utils.Valid.isString(u)){var l=k(u,n);l===r?(o++,i=s()(i).call(i,0,-2)):o=1,i+=""+o+l,r=l}}return i=i.replace(/1([A-Z])/g,"$1")},P=function(e){try{return atob(e)}catch(t){return""}},_={decodeMap:C,encodeMap:x,hashToString:P,stringToHash:function(e){try{return btoa(e)}catch(t){return""}}},O=function(e){try{return JSON.parse(e)}catch(t){return null}},R=n(38),D=n.n(R),L=function(e){try{return D()(e,null,0)}catch(t){return""}},B=function(e){return O(L(e))},N={clone:B,decode:O,encode:L},M=function(e){var t="object"===typeof e||"function"===typeof e,n=Array.isArray(e);return null!==e&&t&&!n},G=function(e){return void 0===e||null===e},F=function e(t){if(!M(t))return t;for(var n in t){G(t[n])&&delete t[n];var a=t[n];M(a)&&(t[n]=e(a))}return t},Z=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},U=n(24),W=n.n(U),H=function(e){var t={};return W()(e).forEach((function(n){if(Z(e,n)){var a=e[n];"string"===typeof a&&(t[a]=n)}})),t},z=function(e,t){if(!Array.isArray(e))return{};var n={};return e.forEach((function(e){if(Z(e,t)){var a=e[t];"string"===typeof a&&(n[a]=e)}})),n},Y=n(152),K=n.n(Y),V=Object,j=function(e,t){if("assign"in V)return K()(e,t);var n=e;for(var a in t)n[a]=t[a];return n},X=function e(t,n){for(var a in n){var i;if(M(t[a])&&M(n[a]))e(t[a],n[a]);else j(t,((i={})[a]=n[a],i))}return t},q={clear:F,hasOwn:Z,invert:H,keyBy:z,assign:j,merge:X},J=function(e){return e?e[0].toUpperCase()+s()(e).call(e,1):e},Q=function(e){var t=0;if(0==e.length)return t;for(var n=0;n<e.length;n++){t=(t<<5)-t+e.charCodeAt(n),t&=t}return t},$=n(76),ee=n.n($),te=function(e){var t;return ee()(t=W()(e)).call(t,(function(t,n){var a=e[n];return void 0!==a&&t.push(n+"="+a),t}),[]).join("&")},ne=function(e){void 0===e&&(e="0x");for(var t=e,n=0;n<6;n++)t+="0123456789ABCDEF"[Math.floor(16*Math.random())];return t},ae=n(532),ie=function(e){return e.normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/[\u0111\u0110]/g,(function(e){return"\u0111"===e?"d":"D"}))},re=n(6),se=n.n(re),oe=n(409),ce=n.n(oe),ue=function(e,t){var n,a=e.split(" "),i=(a.length<=1?se()(n=[]).call(n,a):[a[0],a.pop()]).join(" "),r=ce()(i).call(i," ")||0,s=r>=0?r:t;return(i.length>t?i.substring(0,s):i).substring(0,t)},le=n(147),he=n.n(le),de=function(e){void 0===e&&(e=16);var t=function(t){return Math.floor(t).toString(e)};return t(Date.now()/1e3)+he()(" ").call(" ",e).replace(/./g,(function(){return t(Math.random()*e)}))},pe=n(533);var fe=function(e){for(var t=0,n=0;n<e.length;n++){t=(t<<5)-t+e.charCodeAt(n),t|=0}return t=Math.abs(t)},ge=["James","Mary","John","Patricia","Robert","Jennifer","Michael","Linda","William","Elizabeth","David","Susan","Richard","Jessica","Joseph","Sarah","Thomas","Karen","Charles","Nancy","Christopher","Lisa","Daniel","Margaret","Matthew","Betty","Anthony","Sandra","Mark","Ashley","Donald","Dorothy","Steven","Kimberly","Paul","Emily","Andrew","Donna","Joshua","Michelle","Kenneth","Carol","Kevin","Amanda","Brian","Melissa","George","Deborah"],me=["Smith","Johnson","Williams","Jones","Brown","Davis","Miller","Wilson","Moore","Taylor","Anderson","Thomas","Jackson","White","Harris","Martin","Thompson","Garcia","Martinez","Robinson","Clark","Rodriguez","Lewis","Lee","Walker","Hall","Allen","Young","Hernandez","King","Wright","Lopez","Hill","Scott","Green","Adams","Baker","Gonzalez","Nelson","Carter","Mitchell","Perez","Roberts","Turner","Phillips","Campbell","Parker","Evans"],ve=function(e){var t=fe(e),n=t%ge.length,a=(t>>8)%me.length,i=(t>>16)%1e4;return""+ge[n]+me[a]+i},ye={capitalize:J,hashCode:Q,params:te,toCamelCase:function(e){var t=e.replace(/[-_\s.]+(.)?/g,(function(e,t){return t?t.toUpperCase():""}));return t.substr(0,1).toLowerCase()+t.substr(1)},toUpperCamelCase:function(e){var t=e.replace(/[-_\s.]+(.)?/g,(function(e,t){return t?t.toUpperCase():""}));return t.substr(0,1).toUpperCase()+t.substr(1)},randomColor:ne,random:ae.Z,removeDiacritics:ie,getShortName:ue,generateObjectId:de,replaceVariables:pe.Z,generateNameUsingString:ve},be=function(e){return"boolean"===typeof e},Ae=function(){return!0},Se=function(e){return"function"===typeof e},Ee=function(e){return"number"===typeof e},we=function(e){var t;return g()(t=["string","number","symbol"]).call(t,typeof e)>-1},Te=function(e){return"string"===typeof e},Ie=n(5),Ce=n.n(Ie),ke=function(e,t,n){var a=n||{},i=a.timeout,r=void 0===i?1e3:i,s=a.checkInterval,o=void 0===s?100:s;return new(Ce())((function(n){var a=setInterval((function(){("function"===typeof e?e():e)===("function"===typeof t?t():t)&&(clearInterval(a),n(!0))}),o);r>0&&setTimeout((function(){clearInterval(a),n(!1)}),r)}))},xe={isBoolean:be,isDebugger:Ae,isFunction:Se,isNumber:Ee,isObject:M,isPropertyKey:we,isString:Te,isValueChangeAsync:ke},Pe=function(e){var t=e.scene,n=e.key,a=e.newKey,i=t.textures.get(n).getSourceImage();if(!i)return!1;var r=Math.min(i.width,i.height);a||t.textures.removeKey(n);var s=t.textures.createCanvas(a||n,r,r),o=s.context;return o.beginPath(),o.arc(r/2,r/2,r/2,0,2*Math.PI,!1),o.clip(),s.draw((i.width-r)/2,(i.height-r)/2,i),!0},_e=function(e){var t=e.scene,n=e.key,a=e.newKey,i=e.radius,r=e.width,s=e.height,o=t.textures.get(n).getSourceImage();if(!o)return!1;r||(r=o.width),s||(s=o.height),a||t.textures.removeKey(n);var c=t.textures.createCanvas(a||n,r,s),u=c.context,l=Math.min(r,s)/100*i/2;return u.beginPath(),u.moveTo(0+l,0),u.lineTo(0+r-l,0),u.quadraticCurveTo(0+r,0,0+r,0+l),u.lineTo(0+r,0+s-l),u.quadraticCurveTo(0+r,0+s,0+r-l,0+s),u.lineTo(0+l,0+s),u.quadraticCurveTo(0,0+s,0,0+s-l),u.lineTo(0,0+l),u.quadraticCurveTo(0,0,0+l,0),u.closePath(),u.clip(),c.draw(0,0,o),!0},Oe=n(534),Re=function(e,t){var n=e.split(","),a=n[0].match(/:(.*?);/);if(!a)return null;for(var i=a[1],r=atob(n[n.length-1]),s=r.length,o=new Uint8Array(s);s--;)o[s]=r.charCodeAt(s);return new File([o],t,{type:i})},De=n(149),Le=n.n(De),Be=new Image,Ne=function(e,t){return void 0===t&&(t=!0),new(Ce())((function(n){t&&(Be=new Image),Be.onload=function(){n(Be)},Be.onerror=function(){n(null)},Be.src=Le().createObjectURL(e)}))},Me=n(1),Ge=n(2),Fe=n.n(Ge),Ze=function(){var e=(0,Me.Z)(Fe().mark((function e(t,n){var a;return Fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t).then((function(e){return e.blob()})).catch((function(){return null}));case 2:if(a=e.sent){e.next=5;break}return e.abrupt("return",null);case 5:return e.abrupt("return",new File([a],n));case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),Ue=Ze,We={drawCircle:Pe,drawBorder:_e,getImageScale:Oe.Z,base64ToFile:Re,blobToHtmlImage:Ne,blobUrlToFile:Ue},He=function(e){if(g()(e).call(e,".")<0)return e;for(var t=e.length-1;t>=0;t--){if("."==e[t])return e.substring(0,t);if("0"!=e[t])return e.substring(0,t+1)}return e},ze=function(e,t){var n=t||{},a=n.fractionalDigits,i=void 0===a?0:a,r=n.startAbbreviate,s=void 0===r?1e3:r,o=n.abbreviateStep,c=void 0===o?3:o,u=n.maxLength,l=void 0===u?-1:u,h=n.removeLastZero,d=void 0===h||h,p=n.suffixes,f=void 0===p?["","k","m","b","t","q"]:p,g=-1===l?99999999:l;if(e>=s){var m=Math.floor(e/Math.pow(10,c)),v=Math.floor((m.toString().length-1)/c)+1,y=(e/Math.pow(Math.pow(10,c),v)).toFixed(i),b=g-f[v].length,A=y.substring(0,b);return(d?He(A):A)+f[v]}var S=e.toFixed(i),E=g-f[0].length,w=S.substring(0,E);return d?He(w):w+f[0]},Ye={Array:y,Hash:_,Json:N,Object:q,String:ye,Valid:xe,Image:We,Number:{toAbbreviatedString:ze,padStart:function(e,t,n){void 0===n&&(n="0");for(var a=e.toString(),i=a.length,r=0;r<t-i;r++)a=n+a;return a},padEnd:function(e,t,n){void 0===n&&(n="0");for(var a=e.toString(),i=a.length,r=0;r<t-i;r++)a+=n;return a},random:function(e,t){var n=t?Math.random()>.5?1:-1:1;return Math.floor(Math.random()*e)*n}},Device:{isDesktop:function(){return!/Android|iPhone|iPad|iPod/i.test(navigator.userAgent)},isMobile:function(){return/Android|iPhone|iPad|iPod/i.test(navigator.userAgent)},isAndroid:function(){return window.__fbPlatform?"ANDROID"===window.__fbPlatform:/Android/i.test(navigator.userAgent)},isIOS:function(){return window.__fbPlatform?"IOS"===window.__fbPlatform:/iPhone|iPad|iPod/i.test(navigator.userAgent)},isMobileWeb:function(){return window.__fbPlatform?"MOBILE_WEB"===window.__fbPlatform:/mobile/i.test(navigator.userAgent)},pixelRatio:function(){return window.devicePixelRatio||1}},Time:{isToday:function(e){var t=new Date(e),n=new Date;return t.getDate()===n.getDate()&&t.getMonth()===n.getMonth()&&t.getFullYear()===n.getFullYear()},sleepAsync:function(e){return new(Ce())((function(t){return setTimeout(t,e)}))}}},Ke=n(8),Ve=n(520),je={},Xe={ENV:"production",AppId:"9pm3r8f7wm5r",ApiHost:"https://fbig-singleplay-apps.citigo.site",OtherHost:"https://fbig-leaderboards.citigo.site",Notification:{Enable:!1,DisableSendNotification:!0},LeadersBoard:{Prefix:"leaderboards"},Debugger:{ShowConsole:!1,ShowInspector:!1,ShowMonitoring:!1},Statistics:{Enable:!1,ShowFPSInGame:!1,ShowMemoryInGame:!1},Rollbar:{Enable:!1},Ads:{Enabled:!0,Mockup:{Enable:!1},BannerAdOptions:[],InterstitialAdOptions:{secondsFirstTime:30,secondsBetweenAds:30,showWhenStartGame:!1},RewardAdOptions:{secondsFirstTime:5,secondsBetweenAds:5},AdServiceConfigs:{}},Analytics:{GoogleAnalytics:null,FacebookAnalytics:null}},qe={ENV:"development",AppId:"",ApiHost:"https://fbig-singleplay-apps-dev.sunstudio.io",OtherHost:"https://leaderboards-dev.sunstudio.io",SyncProfileFromAPI:!0,Notification:{Enable:!0,DisableSendNotification:!1,ApiUrl:"https://notifications.sunstudio.io",GameTitle:"Solitaire",GameImage:"",DailyNotificationMessages:{MONDAY:"Time to shuffle the deck! Jump back into Solitaire Classic and enjoy a relaxing round. \ud83c\udf1f",TUESDAY:"Fresh look, classic feel: Check out the new deck skins available now in Solitaire Classic! \ud83d\ude80",WEDNESDAY:"Can you keep your win streak going? Play now and test your Solitaire skills! \ud83c\udf81",THURSDAY:"Solitaire Tip: Don't forget the draw pile! Strategic moves can help you unlock those hidden cards faster. \ud83c\udfaf",FRIDAY:"Having trouble with your current game? Use a hint to find your next move and finish the game in style!. \ud83c\udfa1",SATURDAY:"Thank you for being a loyal Solitaire Classic player! Enjoy a special reward on us\u2014log in now to claim it. \u2728",SUNDAY:"It's time to unwind with a classic game of Solitaire. Relax, play, and enjoy your weekend with us! \ud83c\udf08"}},AddShortcut:{UseMock:!1},SubscribeBot:{UseMock:!1},PlayerMock:{id:"",signature:""},OpponentMock:{id:"",signature:""},MatchMockFailRate:5,Gameplay:{StartLevel:1,StartScore:0,StartDiamonds:0,LevelDifficultRate:{FromUnder30:1.07,FromUnder35:1.05,FromUnder45:1.05,FromUnder200:1.1},StartAdAtLevel:2,GiftTime:10800,AwardDiamonds:100,FreeItems:!1,DelayStart:2e3,DelayLevelUp:1800,DelayFinishGame:2900,EnableVibrate:!0},Tutorial:{ForceUseTutorial:!1,NumberOfTutorial:{FirstMove:3,TargetScore:1,CurrentScore:1,ColorfulGem:1,ItemPaint:1,ItemHammer:1,ItemShuffle:1}},PlayerDataStore:"playerData",Game:{AutoResize:!0,PortraitRatio:375/580,PortraitWidth:375,PortraitHeight:667,LandscapeRatio:760/450,LandscapeWidth:1244,LandscapeHeight:700,ForcePixelRatio:0,DisableLandscape:!1,FullSizeOnLandscape:!0},Debugger:{ShowInspector:!1,ShowMonitoring:!1,ShowConsole:!1,Expanded:!0,AutoRefresh:!0,InspectorAutoUpdate:!0,Opacity:.8,ListPlayerDevIds:[]},Statistics:{Enable:!1,DisplayMode:0,FPS:!0,MS:!0,MB:!0,Opacity:.8,ShowFPSInGame:!0,ShowMemoryInGame:!1},ParticleEditor:{Enable:!1,Opacity:.8,Expanded:!0},ProfilerPlugin:{Enable:!1},CanvasRecorder:{Enable:!1,Options:{Type:"png",Quality:.85,RecordFps:60,SyncFps:!0}},Match:{MaxRescueCount:1,RescueGamePopupTimeout:15,ContinueSingleMatchEnabled:!1,SingleMatchStore:"singleMatch",LocalSingleMatchDefault:{_id:"12345678890",status:"open",playerId:"",score:0,level:1,startedAt:0,updateAt:0,finishAt:0,data:{}}},DailyRewards:{MaxDays:6,MockTime:0,CheckInterrupt:!0},DailyTasks:{Duration:86400},Tournament:{UseMock:!1,ForcePlay:!1,UseLeaderboard:!1,TournamentContextIds:[],YourMockTournamentCount:1},LeadersBoard:{Name:null,UseMock:!1,Prefix:"leaderboards",LeaderboardId:"5fbb6bee3f2485dac9b1dfa3",Limit:50,MockOptions:{PlayerEntryIndex:-1}},LanguageSupport:{en:"en"},EnableEffectSceneTransition:!0,DefaultTheme:"default",ThemeSupport:{default:"default"},Ads:{Enabled:!0,AdService:"msgames",FallbackService:"none",AdServiceConfigs:{Google:{DataAdClient:"",DataAdFrequencyHint:30,DataAdBreakTest:!1,MaxScriptLoadRetryCount:3}},CalculateSafeAreaBottom:!0,EnableRewardVideoResetInterstitial:!1,Mockup:{Enable:!1,ErrorRate:5,GiphyApiKey:""},InterstitialAdOptions:{pID:"",showWhenStartGame:!1,secondsFirstTime:30,secondsBetweenAds:30},RewardAdOptions:{pID:"",secondsFirstTime:0,secondsBetweenAds:0},BannerAdOptions:[{placementId:"123",position:"bottom",bannerWidth:320,bannerHeight:50,platform:"MOBILE",secondsReload:60},{placementId:"456",position:"right",bannerWidth:160,bannerHeight:600,platform:"DESKTOP",secondsReload:60}]},Network:{MaximumRequest:6,Timeout:15e3,Retries:3},Analytics:{GoogleAnalytics:null,FacebookAnalytics:null},Sentry:{errorCodes:{accepted:[],ignored:["USER_INPUT","NETWORK_FAILURE"]},errorMessages:{accepted:[],ignored:["Load image failed","Script error."]}},Rollbar:{Enable:!1,UseMockup:!1,FilterError:{Codes:{accepted:[],ignored:["USER_INPUT","NETWORK_FAILURE"]},Messages:{accepted:[],ignored:["Load image failed","Request failed to be processed","Script error."]}},ListPlayerDevIds:[]},Performance:{Enable:!1,trackingSceneKeys:["DASHBOARD_SCENE","GAME_SCENE"],minQuality:1,maxQuality:2,fpsThreshold:48,checkInterval:2e3,qualityAdjustStep:.1,autoUpgradeQuality:!0,onlyUpdateWhenSwitchScene:!0},GlobalDebugEnabled:!1};qe=(0,Ve.TS)((0,Ke.Z)({},qe),Xe);var Je=qe=(0,Ve.TS)((0,Ke.Z)({},qe),je),Qe=function(e){return function(t){try{var n=window.game,a=t.module;if(n.scene.getScenes(!0)[0].scene.key!==e)return;var i=a.default;n.scene.remove(e),n.scene.add(e,i,!0),n.scene.bringToTop(n.globalScene),console.log("%c HotScene: ","font-size:12px;background-color: #465975;color:#fff;",e)}catch(s){var r;null==(r=void 0)||r.invalidate()}}},$e=n(421),et=n.n($e),tt=n(423),nt=n.n(tt),at=n(425),it=n.n(at),rt=n(535),st=!1,ot=function e(t,n,a){n.forEach((function(n){if(n.name){var i=null;if(i=a?a.getByName(n.name):t.children.getByName(n.name),st&&console.log("%c Checking object: ","font-size:12px;background-color: #465975;color:#fff;",n.name,n.type),i){if("Container"===n.type){var r=i,s=n.getAll();if(e(t,s,r),!r.hotContainer)return;console.log("%c Update container: ","font-size:12px;background-color: #33A5FF;color:#fff;",r.name)}var o=et()(n),c=["_events","_sysEvents","input","localTransform","list","displayList"],l=u()(o).call(o,(function(e){if("string"!==typeof e)return!1;if(g()(c).call(c,e)>=0)return!1;if(!i)return!1;var t=nt()(n,e);return!(t instanceof Function)&&(!(t instanceof Phaser.Scene)&&(!(t instanceof Phaser.GameObjects.Group)&&(!(t instanceof Phaser.GameObjects.GameObject)&&t===nt()(i,e))))}));l.length<1||(st&&console.log("%c HotObject: ","font-size:12px;background-color: #2EAFB0;color:#fff;",n.name,l),l.forEach((function(e){if(i){var t=nt()(n,e),a=nt()(i,e),r=it()(i,e,t);st&&console.log("%c Update property: ","font-size:12px;background-color: #B03734;color:#fff;",r,e,{oldValue:a,newValue:t})}})))}}}))},ct={Configs:Je,Utils:Ye,LiveUpdate:{Scene:Qe,SceneObjects:function(e,t){return void 0===t&&(t=st),function(n){try{var a=window.game,i=n.module,r=a.scene.getScenes(!0)[0];if(r.scene.key!==e)return;st=t;var s=i.default,o=e+"-draft";a.scene.remove(o);var c=a.scene.add(o,s);console.log("%c HotSceneObjects: ","font-size:12px;background-color: #465975;color:#fff;",e),r=a.scene.getScene(e),c.events.once(Phaser.Scenes.Events.RENDER,(0,rt.D)((function(){var e=c.children.getAll();ot(r,e),a.scene.remove(o)})),50),a.scene.run(o),a.scene.bringToTop(r),a.scene.bringToTop(a.globalScene)}catch(u){console.warn(u)}}}}};window.GameCore=ct},525:function(e,t,n){"use strict";n.r(t);var a=n(1),i=n(0),r=n(41),s=n.n(r),o=n(98),c=n.n(o),u=n(2),l=n.n(u),h=n(540),d=n(558),p=GameCore.Utils.Object,f=GameCore.Ads,g=f.Types,m=f.Status,v="msgames",y=function(e){function t(t,n){var a;return(a=e.call(this,t)||this).instance=void 0,a.placementId=void 0,a.instanceLoadFailedQueue=void 0,a.isHasTooManyInstancesError=void 0,a.instance=null,a.placementId=n,a.instanceLoadFailedQueue=[],a.isHasTooManyInstancesError=!1,a}(0,i.Z)(t,e),t.setGame=function(e){self.game=e};var n=t.prototype;return n.loadAsync=function(){var e=(0,a.Z)(l().mark((function e(){var t,n,a;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.status===m.IDLE){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,this.status=m.LOADING,e.next=6,this.createInstanceByType(this.type);case 6:if(this.instance=e.sent,null!==this.instance){e.next=9;break}throw new GameCore.Ads.AdError("AD_INSTANCE_NOT_INITIATED","Ad instance didn't initiated.");case 9:return e.next=11,this.instance.loadAsync();case 11:this.status=m.FILLED,t=this.getSceneName(),this.type===g.PRE_ROLL&&self.game.analytics.loadPreRollAd(t,v),this.type===g.INTERSTITIAL&&self.game.analytics.loadInterstitialAd(t,v),this.type===g.REWARDED&&self.game.analytics.loadRewardedVideoAd(t,v),e.next=25;break;case 18:throw e.prev=18,e.t0=e.catch(2),this.status=m.IDLE,this.instance&&this.instanceLoadFailedQueue.push(this.instance),this.instance=null,this.isAdTypeValid(this.type)&&(n=this.getSceneName(),a={type:this.type,placement:n,adService:v},self.game.analytics.loadAdFail(a)),e.t0;case 25:case"end":return e.stop()}}),e,this,[[2,18]])})));return function(){return e.apply(this,arguments)}}(),n.showAsync=function(){var e=(0,a.Z)(l().mark((function e(){var t,n,a,i;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=!1,null,e.prev=2,this.status===m.FILLED){e.next=5;break}throw new GameCore.Ads.AdError("AD_NOT_FILLED","Ads no fill.");case 5:if(this.status=m.SHOWING,null!==this.instance){e.next=8;break}throw new GameCore.Ads.AdError("AD_INSTANCE_NOT_INITIATED","Ad instance didn't initiated.");case 8:return this.isHasTooManyInstancesError&&self.game.analytics.event(h._.MISSING_AD_SHOW,{ad_type:this.type}),e.next=11,this.instance.showAsync();case 11:t=!0,this.status=m.IDLE,this.instance=null,e.next=21;break;case 16:throw e.prev=16,e.t0=e.catch(2),e.t0 instanceof Object&&p.hasOwn(e.t0,"code")?("ADS_NOT_LOADED"===e.t0.code?this.status=m.FILLED:(this.status=m.IDLE,this.instance=null),"USER_INPUT"===e.t0.code&&(this.status=m.IDLE,this.instance=null,t=!0)):(this.status=m.IDLE,this.instance=null),e.t0,e.t0;case 21:return e.prev=21,window.focus(),n=this.getSceneName(),t?(this.type===g.PRE_ROLL&&self.game.analytics.showPreRollAd(n,v),this.type===g.INTERSTITIAL&&self.game.analytics.showInterstitialAd(n,v),this.type===g.REWARDED&&self.game.analytics.showRewardedVideoAd(n,v)):this.isAdTypeValid(this.type)&&(a=this.getSceneName(),i={type:this.type,placement:a,adService:v},self.game.analytics.showAdFail(i)),e.finish(21);case 26:case"end":return e.stop()}}),e,this,[[2,16,21,26]])})));return function(){return e.apply(this,arguments)}}(),n.getStatus=function(){return this.status},n.createInstanceByType=function(){var e=(0,a.Z)(l().mark((function e(t){var n;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=self.game.facebook,e.prev=1,e.t0=t,e.next=e.t0===g.REWARDED?5:e.t0===g.INTERSTITIAL||e.t0===g.PRE_ROLL?8:11;break;case 5:return e.next=7,n.getRewardedVideoAsync(this.placementId);case 7:case 10:return e.abrupt("return",e.sent);case 8:return e.next=10,n.getInterstitialAdAsync(this.placementId);case 11:case 20:return e.abrupt("return",null);case 12:e.next=21;break;case 14:if(e.prev=14,e.t1=e.catch(1),!(e.t1 instanceof Object&&p.hasOwn(e.t1,"code"))){e.next=20;break}if("ADS_TOO_MANY_INSTANCES"!==e.t1.code){e.next=20;break}return this.isHasTooManyInstancesError=!0,e.abrupt("return",this.instanceLoadFailedQueue.shift()||null);case 21:case"end":return e.stop()}}),e,this,[[1,14]])})));return function(t){return e.apply(this,arguments)}}(),n.getSceneName=function(){try{var e=self.game.globalScene;return e instanceof d.Z?e.getCurrentScene().scene.getSceneName():"unknown"}catch(t){return"unknown"}},n.isAdTypeValid=function(e){var t;return s()(t=c()(g)).call(t,e)},t}(GameCore.Ads.AdInstance);t.default=y},526:function(e,t,n){"use strict";n.r(t);var a=n(1),i=n(12),r=n(538),s=n(0),o=n(5),c=n.n(o),u=n(41),l=n.n(u),h=n(98),d=n.n(h),p=n(2),f=n.n(p),g=n(540),m=n(558),v=GameCore,y=v.Utils.Object,b=v.Ads,A=b.Types,S=b.Status,E="not-loaded",w="loading",T="loaded",I="google",C=function(e){function t(n,a){var i;return(i=e.call(this,n)||this).instance=void 0,i.instance=null,i.status=S.IDLE,window.setInterstitialPlacementType=t.setInterstitialPlacementType,window.setRewardedPlacementType=t.setRewardedPlacementType,window.setPreRollPlacementType=t.setPreRollPlacementType,t.childAdInstances.push((0,r.Z)(i)),t.isPreloadConfigReady&&(i.status=S.FILLED),i}(0,s.Z)(t,e),t.initGoogleAdsAsync=function(){var e=(0,a.Z)(f().mark((function e(n){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("loaded"!==t.initStatus){e.next=3;break}return console.warn("Google Ads already initiated."),e.abrupt("return");case 3:t.initStatus=w,t.adsByGoogleConfig=n,t.loadScriptElementAsync(n);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t.configGoogleAdsOnInit=function(){var e=(0,a.Z)(f().mark((function e(){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:window.adsbygoogle=window.adsbygoogle||[],window.adBreak=function(e){adsbygoogle.push(e)},window.adConfig=function(e){adsbygoogle.push(e)},t.initStatus=T,t.runPreloadAdConfig();case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),t.runPreloadAdConfig=function(){var e=(0,a.Z)(f().mark((function e(){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preloadPromise=new(c())((function(e,n){window.adConfig({preloadAdBreaks:"on",onReady:function(){t.isPreloadConfigReady=!0,t.handlePostPreloadAdComplete(),e()}}),setTimeout((function(){t.isPreloadConfigReady||n(new Error("Failed to preload ad config in time."))}),1e4)})),e.abrupt("return",t.preloadPromise);case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),t.loadScriptElementAsync=function(e){return new(c())((function(n,a){!function i(r){var s=e.maxScriptLoadRetryCount,o=document.createElement("script");try{t.assignAdsByGoogleScriptProperties(o,e)}catch(u){t.initStatus=E,a(new Error("Invalid adConfig."))}if(o.onload=function(){t.configGoogleAdsOnInit(),n(!0)},o.onerror=function(){r<s?setTimeout((function(){i(r+1)}),12e4):(t.initStatus=E,a(new Error("Failed to load Google Ads script.")))},document.head.appendChild(o),!!!document.getElementById("adsByGoogleFunctionScript")){var c=document.createElement("script");c.text="window.adsbygoogle = window.adsbygoogle || []; var adBreak = adConfig = function(o) {adsbygoogle.push(o);}",c.id="adsByGoogleFunctionScript",document.head.appendChild(c)}}(0)}))},t.assignAdsByGoogleScriptProperties=function(e,t){var n=t.dataAdClient,a=t.dataAdHost,i=t.dataAdChannel,r=t.dataAdBreakTest,s=t.dataAdFrequencyHint;if(!n&&!a)throw new Error("dataAdClient or dataAdHost is required.");e.async=!0,e.setAttribute("data-ad-frequency-hint",s+"s"),n&&e.setAttribute("data-ad-client",n),i&&e.setAttribute("data-ad-channel",i),a&&e.setAttribute("data-ad-host",a),r&&e.setAttribute("data-adbreak-test","on");var o="";if(n||a){o="?";var c=[];n&&c.push("client="+n),a&&c.push("host="+a),o+=c.join("&")}e.src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"+o,e.crossOrigin="anonymous"};var n=t.prototype;return n.makeAdInstance=function(){var e=this;return{getPlacementID:function(){return""},loadAsync:function(){return e.preloadAdPlacement()},showAsync:function(){return e.createAdPlacement()}}},n.preloadAdPlacement=function(){return console.log("preloadAdPlacement",this.type),t.initStatus!==T?c().reject(new Error("Google Ads not initiated.")):t.isPreloadConfigReady?c().resolve():t.preloadPromise?t.preloadPromise:t.runPreloadAdConfig()},n.createAdPlacement=function(){switch(this.type){case A.PRE_ROLL:return this.createAdPlacementPreroll();case A.REWARDED:return this.createAdPlacementRewarded();case A.INTERSTITIAL:return this.createAdPlacementInterstitial();default:return c().reject(new GameCore.Ads.AdError("UNSUPPORTED_AD_TYPE","Unsupported."))}},n.createAdPlacementPreroll=function(){return new(c())((function(e,n){window.adBreak({type:t.preRollPlacementType,name:"prerollAd",adBreakDone:function(t){switch(console.info("GoogleAdInstance.adBreakDone hook called",t),t.breakStatus){case"dismissed":case"viewed":return void e();default:return void n(new GameCore.Ads.AdError(t.breakStatus,t.breakType))}}})}))},n.createAdPlacementInterstitial=function(){return new(c())((function(e,n){window.adBreak({type:t.interstitialPlacementType,name:"interstitialAd",beforeAd:function(){self.game.ads.hideBannerAdAsync()},adBreakDone:function(t){switch(console.info("GoogleAdInstance.adBreakDone hook called",t),self.game.ads.showBannerAdAsync(),t.breakStatus){case"dismissed":case"viewed":return void e();default:return void n(new GameCore.Ads.AdError(t.breakStatus,t.breakType))}}})}))},n.createAdPlacementRewarded=function(){return new(c())((function(e,n){window.adBreak({type:t.rewardedPlacementType,name:"rewardedAd",beforeReward:function(e){console.info("GoogleAdInstance.beforeReward hook called"),self.game.ads.hideBannerAdAsync(),e()},adViewed:function(){console.info("GoogleAdInstance.adViewed hook called")},adDismissed:function(){console.info("GoogleAdInstance.adDismissed hook called")},adBreakDone:function(t){switch(console.info("GoogleAdInstance.adBreakDone hook called",t),self.game.ads.showBannerAdAsync(),t.breakStatus){case"dismissed":return void n(new GameCore.Ads.AdError("USER_INPUT","User dismissed."));case"viewed":return void e();default:return void n(new GameCore.Ads.AdError(t.breakStatus,t.breakType))}}})}))},t.setGame=function(e){self.game=e},n.getStatus=function(){return this.status},n.loadAsync=function(){var e=(0,a.Z)(f().mark((function e(){var t,n,a;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,null==this.instance){e.next=3;break}return e.abrupt("return");case 3:if(this.instance=this.makeAdInstance(),null!==this.instance){e.next=6;break}throw new GameCore.Ads.AdError("AD_INSTANCE_NOT_INITIATED","Ad instance didn't initiated.");case 6:return e.next=8,this.instance.loadAsync();case 8:t=this.getSceneName(),this.type===A.PRE_ROLL&&self.game.analytics.loadPreRollAd(t,I),this.type===A.INTERSTITIAL&&self.game.analytics.loadInterstitialAd(t,I),this.type===A.REWARDED&&self.game.analytics.loadRewardedVideoAd(t,I),e.next=18;break;case 14:throw e.prev=14,e.t0=e.catch(0),this.isAdTypeValid(this.type)&&(n=this.getSceneName(),a={type:this.type,placement:n,adService:I},self.game.analytics.loadAdFail(a)),e.t0;case 18:case"end":return e.stop()}}),e,this,[[0,14]])})));return function(){return e.apply(this,arguments)}}(),n.showAsync=function(){var e=(0,a.Z)(f().mark((function e(){var t,n,a,i;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=!1,e.prev=1,this.status===S.FILLED){e.next=4;break}throw new GameCore.Ads.AdError("AD_NOT_FILLED","Ads no fill.");case 4:if(this.status=S.SHOWING,null!==this.instance){e.next=8;break}return e.next=8,this.loadAsync();case 8:if(null!==this.instance){e.next=10;break}throw new GameCore.Ads.AdError("AD_INSTANCE_NOT_INITIATED","Ad instance didn't initiated.");case 10:return e.next=12,this.instance.showAsync();case 12:t=!0,this.handlePostShowAdStatus(),this.instance=null,e.next=27;break;case 17:if(e.prev=17,e.t0=e.catch(1),!(e.t0 instanceof Object&&y.hasOwn(e.t0,"code"))){e.next=24;break}if("noAdPreloaded"!==e.t0.code){e.next=22;break}return e.abrupt("return");case 22:"USER_INPUT"===e.t0.code&&(t=!0),"frequencyCapped"===e.t0.code&&self.game.analytics.event(g._.MISSING_AD_SHOW,{ad_type:this.type});case 24:throw this.handlePostShowAdStatus(),this.instance=null,e.t0;case 27:return e.prev=27,window.focus(),n=this.getSceneName(),t?(this.type===A.PRE_ROLL&&self.game.analytics.showPreRollAd(n,I),this.type===A.INTERSTITIAL&&self.game.analytics.showInterstitialAd(n,I),this.type===A.REWARDED&&self.game.analytics.showRewardedVideoAd(n,I)):this.isAdTypeValid(this.type)&&(a=this.getSceneName(),i={type:this.type,placement:a,adService:I},self.game.analytics.showAdFail(i)),e.finish(27);case 32:case"end":return e.stop()}}),e,this,[[1,17,27,32]])})));return function(){return e.apply(this,arguments)}}(),n.getSceneName=function(){try{var e=self.game.globalScene;return e instanceof m.Z?e.getCurrentScene().scene.getSceneName():"unknown"}catch(t){return"unknown"}},n.isAdTypeValid=function(e){var t;return l()(t=d()(A)).call(t,e)},n.handlePostShowAdStatus=function(){t.isPreloadConfigReady?this.status=S.FILLED:this.status=S.IDLE},t.handlePostPreloadAdComplete=function(){t.childAdInstances.forEach((function(e){e.status=S.FILLED}))},(0,i.Z)(t,null,[{key:"initStatus",get:function(){return t._initStatus},set:function(e){this._initStatus!==e&&(self.game.analytics.event(g._.AD_INIT,{adService:"adsense",state:e}),this._initStatus=e)}}]),t}(GameCore.Ads.AdInstance);C.childAdInstances=[],C._initStatus=E,C.isPreloadConfigReady=!1,C.adsByGoogleConfig=void 0,C.preloadPromise=void 0,C.preRollPlacementType="preroll",C.interstitialPlacementType="next",C.rewardedPlacementType="reward",C.setInterstitialPlacementType=function(e){C.interstitialPlacementType=e},C.setRewardedPlacementType=function(e){C.rewardedPlacementType=e},C.setPreRollPlacementType=function(e){C.preRollPlacementType=e},t.default=C},551:function(e,t,n){"use strict";n.d(t,{U:function(){return S},v:function(){return E}});var a=n(8),i=n(1),r=n(2),s=n.n(r),o=n(38),c=n.n(o),u=n(0),l=n(29),h=function(e){function t(t,n){var a;return(a=e.call(this,t,n)||this).name="BadRequest",a.message=t||"This request is bad",a.payload=n,a}return(0,u.Z)(t,e),t}((0,l.Z)(Error)),d=function(e){function t(t,n){var a;return(a=e.call(this,t,n)||this).name="RequestTimeout",a.message=t||"This request is timeout",a.payload=n,a}return(0,u.Z)(t,e),t}((0,l.Z)(Error)),p=n(541),f=GameCore.Configs,g=f.AppId,m=f.Network,v=function(e){if(!e.ok)throw new h(null,{response:e})},y=function(){var e=window.game.auth.getToken();return{token:e,timeout:m.Timeout,headers:{Authorization:"Bearer "+e,"Content-Type":"application/json"}}},b=function(e,t,n,a){return(0,i.Z)(s().mark((function i(){var r,o,u,l,p;return s().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.prev=0,r=e+"/apps/"+g+"/"+t,o=new AbortController,n.signal=o.signal,u=setTimeout((function(){o.abort()}),n.timeout),GameCore.Utils.Valid.isObject(a)&&(n.body=c()(a)),i.next=8,fetch(r,n);case 8:return l=i.sent,clearTimeout(u),v(l),i.next=13,l.json();case 13:if(i.t0=i.sent,i.t0){i.next=16;break}i.t0={};case 16:return p=i.t0,i.abrupt("return",p);case 20:if(i.prev=20,i.t1=i.catch(0),!(i.t1 instanceof h)){i.next=24;break}return i.abrupt("return",null);case 24:if(!(i.t1 instanceof Object&&GameCore.Utils.Object.hasOwn(i.t1,"name"))){i.next=27;break}if("AbortError"!==i.t1.name){i.next=27;break}throw new d(null);case 27:throw i.t1;case 28:case"end":return i.stop()}}),i,null,[[0,20]])})))},A=function(){var e=(0,i.Z)(s().mark((function e(t,n){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.abrupt("return",t());case 4:if(e.prev=4,e.t0=e.catch(0),!(e.t0 instanceof d&&n>0)){e.next=18;break}return e.prev=7,e.next=10,(0,p.qZ)(600);case 10:return e.next=12,A(t,n-1);case 12:return e.abrupt("return",e.sent);case 15:return e.prev=15,e.t1=e.catch(7),e.abrupt("return",{});case 18:if(!(e.t0 instanceof d)){e.next=20;break}return e.abrupt("return",{});case 20:return console.warn(e.t0),e.abrupt("return",{});case 22:case"end":return e.stop()}}),e,null,[[0,4],[7,15]])})));return function(t,n){return e.apply(this,arguments)}}(),S=function(){var e=(0,i.Z)(s().mark((function e(t,n,i,r){var o,c;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return void 0===n&&(n={}),void 0===r&&(r=m.Retries),e.prev=2,o=(0,a.Z)({},y(),n,{method:"GET"}),c=b(i,t,o),e.next=7,A(c,r);case 7:return e.abrupt("return",e.sent);case 10:return e.prev=10,e.t0=e.catch(2),console.warn(e.t0),e.abrupt("return",{});case 14:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(t,n,a,i){return e.apply(this,arguments)}}(),E=function(){var e=(0,i.Z)(s().mark((function e(t,n,i,r,o){var c,u;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return void 0===i&&(i={}),void 0===o&&(o=m.Retries),e.prev=2,c=(0,a.Z)({},y(),i,{method:"POST"}),u=b(r,t,c,n),e.next=7,A(u,o);case 7:return e.abrupt("return",e.sent);case 10:return e.prev=10,e.t0=e.catch(2),console.warn(e.t0),e.abrupt("return",{});case 14:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(t,n,a,i,r){return e.apply(this,arguments)}}()},549:function(e,t,n){"use strict";n.d(t,{kL:function(){return a},fJ:function(){return i},EH:function(){return r},qj:function(){return s},rh:function(){return o},DW:function(){return c}});var a="CONTEXT_RECEIVED",i="CONTEXT_PROCESSED",r="CONTEXT_GAME_MODE_DETECTED",s="MESSAGES_SENT_UPDATE",o="MESSAGES_SENT_REMOVE",c="SCENE_KEY_UPDATE"},570:function(e,t,n){"use strict";var a=n(0),i=function(e){function t(t,n){var a;return(a=e.call(this,t,n)||this).name="LeaderboardNotFound",a.message=t||"Leaderboard not found",a.payload=n,a}return(0,a.Z)(t,e),t}((0,n(29).Z)(Error));t.Z=i},542:function(e,t,n){"use strict";var a=n(0),i=function(e){function t(t,n){var a;return(a=e.call(this,t,n)||this).name="TournamentNotFound",a.message=t||"A Tournament with current context was not found",a.payload=n,a.code="TOURNAMENT_NOT_FOUND",a}return(0,a.Z)(t,e),t}((0,n(29).Z)(Error));t.Z=i},562:function(e,t,n){"use strict";var a=n(520),i=function(){function e(e,t){if(this.scene=void 0,this.config=void 0,this.isStarted=void 0,this.tween=void 0,!(t.targets.length<1)){this.buildConfig(e,t);var n=this.config.targets[0].scene;n&&(this.scene=n,this.isStarted=!1,this.tween=n.tweens.create(this.config))}}var t=e.prototype;return t.buildConfig=function(e,t){this.config=(0,a.TS)(e,t)},t.play=function(){this.tween&&(this.isStarted&&this.tween.hasStarted?this.restart():(this.isStarted||this.tween.hasStarted||this.tween.play(),this.isStarted=!0))},t.restart=function(){var e;null==(e=this.tween)||e.restart()},t.stop=function(){var e;null==(e=this.tween)||e.stop()},t.remove=function(){var e;null==(e=this.tween)||e.remove()},t.next=function(e){return this.tween?(this.tween.off(Phaser.Tweens.Events.TWEEN_COMPLETE,e),this.tween.once(Phaser.Tweens.Events.TWEEN_COMPLETE,e),this.tween):null},e}();t.Z=i},573:function(e,t,n){"use strict";n.d(t,{Z:function(){return o}});var a=n(0),i=n(562),r=n(174),s={targets:[],yoyo:!0,repeat:-1,duration:600,repeatDelay:50,ease:n.n(r)()(.55,.47,.43,.91),easeParams:[0,.9],props:{scale:{from:1,to:1.2}}},o=function(e){function t(t){return e.call(this,s,t)||this}return(0,a.Z)(t,e),t}(i.Z)},584:function(e,t,n){"use strict";var a=n(538),i=n(0),r=n(562),s={targets:[],repeat:-1,yoyo:!0,duration:33,ease:Phaser.Math.Easing.Sine.InOut,props:{x:5}},o=function(e){function t(t){var n,i,r;return(r=e.call(this,s,t)||this).posX=void 0,r.handleSwitchPosition=function(){var e;r.posX=-r.posX,null==(e=r.tween)||e.updateTo("x",-r.posX)},null!=(n=r.config)&&n.props?(r.posX=r.config.props.x,null==(i=r.tween)||i.on(Phaser.Tweens.Events.TWEEN_REPEAT,r.handleSwitchPosition),r):(0,a.Z)(r)}return(0,i.Z)(t,e),t}(r.Z);t.Z=o},583:function(e,t,n){"use strict";var a=n(0),i=n(562),r={targets:[],duration:400,ease:n(561).Z,props:{scale:"+=0.1"}},s=function(e){function t(t){return e.call(this,r,t)||this}return(0,a.Z)(t,e),t}(i.Z);t.Z=s},561:function(e,t,n){"use strict";var a=n(174),i=n.n(a)()(.48,1.57,.6,.83);t.Z=i},564:function(e,t,n){"use strict";var a=n(0),i=n(562),r={targets:[],duration:600,ease:Phaser.Math.Easing.Cubic.Out,props:{alpha:{start:0,from:0,to:1}}},s=function(e){function t(t){return e.call(this,r,t)||this}return(0,a.Z)(t,e),t}(i.Z);t.Z=s},576:function(e,t,n){"use strict";var a=n(0),i=n(562),r={targets:[],duration:600,ease:Phaser.Math.Easing.Back.Out,props:{y:{from:500,to:0}}},s=function(e){function t(t){return e.call(this,r,t)||this}return(0,a.Z)(t,e),t}(i.Z);t.Z=s},565:function(e,t,n){"use strict";var a=n(0),i=n(562),r={targets:[],duration:600,ease:Phaser.Math.Easing.Quadratic.Out,props:{alpha:{start:1,from:1,to:0}}},s=function(e){function t(t){return e.call(this,r,t)||this}return(0,a.Z)(t,e),t}(i.Z);t.Z=s},580:function(e,t,n){"use strict";n.d(t,{Z:function(){return p}});var a=n(12),i=n(538),r=n(0),s=n(540),o=n(562),c={targets:[],duration:400,ease:n(561).Z,props:{scale:"-=0.1"}},u=function(e){function t(t){return e.call(this,c,t)||this}return(0,r.Z)(t,e),t}(o.Z),l=n(554),h=n(568),d=n(537),p=function(e){function t(t,n,a,r,s,o){var c;return void 0===o&&(o=!1),(c=e.call(this,t)||this).useSound=!0,c.isClicked=!1,c.scaleUp=-1,c.scaleDown=-1,c.button=void 0,c.upAnimation=void 0,c.downAnimation=void 0,c.isUsePixelPerfect=!1,c.hitArea=void 0,c.hitZone=void 0,c.scaleDownPress=void 0,c.parentName=void 0,c.handelObjectDestroy=function(){c.scene&&c.scene.events.off(Phaser.Scenes.Events.SLEEP,c.handleSceneSleep)},c.handleSceneSleep=function(){c.scene&&c.scene.tweens.killTweensOf((0,i.Z)(c))},c.handlePointerDown=function(){var e,t;c.isClicked||null!=(e=c.upAnimation)&&null!=(t=e.tween)&&t.isPlaying()||(c.isClicked=!0,c.runDownAnimation())},c.handleOnClick=function(e){return function(){var t,n,a,i;c.isClicked&&(null!=(t=c.upAnimation)&&null!=(n=t.tween)&&n.isPlaying()||(c.isClicked=!1,c.runUpAnimation(),null==(a=c.upAnimation)||null==(i=a.tween)||i.once(Phaser.Tweens.Events.TWEEN_COMPLETE,(function(){c.logButtonEvent(),c.addDebugData(),c.processCallback(e)}))))}},c.handlePointerOut=function(){var e,t;c.isClicked&&(null!=(e=c.upAnimation)&&null!=(t=e.tween)&&t.isPlaying()||(c.isClicked=!1,c.runUpAnimation()))},c.runDownAnimation=function(){var e;-1===c.scaleDown&&(c.scaleUp=c.scale,c.scaleDown=c.scaleDownPress),c.useSound&&c.scene.audio.playSound(h.Z.BUTTON_CLICK),null==(e=c.downAnimation)||e.remove(),c.downAnimation=new u({targets:[(0,i.Z)(c)],duration:150,props:{scale:c.scaleDown},onUpdate:function(){c.hitZone.scale=1/c.scale}}),c.downAnimation.play()},c.runUpAnimation=function(){var e;-1!==c.scaleUp&&(null==(e=c.upAnimation)||e.remove(),c.upAnimation=new u({targets:[(0,i.Z)(c)],duration:150,props:{scale:c.scaleUp},onUpdate:function(){c.hitZone.scale=1/c.scale}}),c.upAnimation.play())},c.isUsePixelPerfect=o,c.setDepth(l.Z.BUTTON),c.createButton(n,a,r,s),c.updateSize(),c.listenEvents(),c.scene.add.existing((0,i.Z)(c)),c}(0,r.Z)(t,e);var n=t.prototype;return n.listenEvents=function(){this.scene.events.on(Phaser.Scenes.Events.SLEEP,this.handleSceneSleep),this.once(Phaser.GameObjects.Events.DESTROY,this.handelObjectDestroy)},n.processCallback=function(e){var t,n,a;null==(t=this.upAnimation)||t.stop(),null==(n=this.downAnimation)||n.stop(),null==(a=this.scene)||a.tweens.killTweensOf(this),-1!==this.scaleUp&&this.setScale(this.scaleUp),e()},n.setDisabled=function(e){var t,n;e?(this.setAlpha(.5),null==(t=this.hitArea)||t.disableInteractive()):(this.setAlpha(1),null==(n=this.hitArea)||n.setInteractive())},n.createButton=function(e,t,n,a){this.button=this.scene.add.image(0,0,e,t),n&&a&&this.button.setWorldSize(n,a),this.scaleDownPress=this.scale-.1;var i=this.button,r=i.displayWidth,s=i.displayHeight;this.hitZone=this.scene.make.zone({displayWidth:r,displayHeight:s}),this.add([this.button,this.hitZone])},n.updateSize=function(){var e=this.button,t=e.width,n=e.height,a=t/100*10,i=n/100*10,r=a<10?a:10,s=i<10?i:10;this.setSize(t+r,n+s),this.hitZone.setSize(t+r,n+s)},n.addDebugData=function(){var e=this.getParentName(),t=this.name;(0,d.sw)("ui-click",e+":"+t)},n.logButtonEvent=function(){var e=this.getParentName(),t=this.name;this.scene.analytics.event(s._.BUTTON_CLICK,{button_name:t,screen_name:e})},n.getParentName=function(){if(this.parentName)return this.parentName;for(var e=this.parentContainer;e;){if(e instanceof GameCore.Screen){var t=e;return this.parentName=t.getScreenName(),this.parentName}e=e.parentContainer}return this.parentName=this.scene.getSceneName(),this.parentName},(0,a.Z)(t,[{key:"onClick",set:function(e){this.isUsePixelPerfect?(this.hitArea=this.button,this.hitArea.setInteractive({useHandCursor:!0,pixelPerfect:!0})):(this.hitArea=this.hitZone,this.updateSize(),this.hitArea.setInteractive({useHandCursor:!0})),this.hitArea.on(Phaser.Input.Events.GAMEOBJECT_POINTER_DOWN,this.handlePointerDown),this.hitArea.on(Phaser.Input.Events.GAMEOBJECT_POINTER_UP,this.handleOnClick(e)),this.hitArea.on(Phaser.Input.Events.GAMEOBJECT_POINTER_OUT,this.handlePointerOut)}},{key:"isUsePixelPerFect",get:function(){return this.isUsePixelPerfect}}]),t}(Phaser.GameObjects.Container)},572:function(e,t,n){"use strict";var a=n(12),i=n(538),r=n(0),s=n(540),o=n(554),c=n(537),u=function(e){function t(t,n,a){var r;return(r=e.call(this,t)||this).useSound=!0,r.isClicked=!1,r.scaleUp=-1,r.scaleDownPress=void 0,r.parentName=void 0,r.disable=void 0,r.handelObjectDestroy=function(){r.scene&&r.scene.events.off(Phaser.Scenes.Events.SLEEP,r.handleSceneSleep)},r.handleSceneSleep=function(){r.scene&&r.scene.tweens.killTweensOf((0,i.Z)(r))},r.handlePointerDown=function(){r.isClicked||(r.animButtonDown(),r.isClicked=!0)},r.handleOnClick=function(e){return function(){r.isClicked&&(r.isClicked=!1,r.animButtonUp(),r.logButtonEvent(),r.addDebugData(),r.processCallback(e))}},r.handlePointerOut=function(){r.isClicked&&(r.isClicked=!1,r.animButtonUp())},r.setDepth(o.Z.BUTTON),r.setSize(n,a),r.listenEvents(),r.scene.add.existing((0,i.Z)(r)),r}(0,r.Z)(t,e);var n=t.prototype;return n.listenEvents=function(){this.scene.events.on(Phaser.Scenes.Events.SLEEP,this.handleSceneSleep),this.once(Phaser.GameObjects.Events.DESTROY,this.handelObjectDestroy)},n.animButtonDown=function(){var e=this;this.scene.add.tween({targets:this,alpha:.75,duration:100,ease:Phaser.Math.Easing.Sine.Out,onStart:function(t){e.disable&&t.remove()},onUpdate:function(t){e.disable&&t.remove()}})},n.animButtonUp=function(){var e=this;this.scene.add.tween({targets:this,alpha:1,duration:200,ease:Phaser.Math.Easing.Sine.In,onStart:function(t){e.disable&&t.remove()},onUpdate:function(t){e.disable&&t.remove()}})},n.processCallback=function(e){-1!==this.scaleUp&&this.setScale(this.scaleUp),e()},n.setDisabled=function(e){this.disable!=e&&(this.disable=e,e?(this.setAlpha(.5),this.disableInteractive()):(this.setAlpha(1),this.setInteractive()))},n.addDebugData=function(){var e=this.getParentName(),t=this.name;(0,c.sw)("ui-click",e+":"+t)},n.logButtonEvent=function(){var e=this.getParentName(),t=this.name;this.scene.analytics.event(s._.BUTTON_CLICK,{button_name:t,screen_name:e})},n.getParentName=function(){if(this.parentName)return this.parentName;for(var e=this.parentContainer;e;){if(e instanceof GameCore.Screen){var t=e;return this.parentName=t.getScreenName(),this.parentName}e=e.parentContainer}return this.parentName=this.scene.getSceneName(),this.parentName},(0,a.Z)(t,[{key:"onClick",set:function(e){this.setInteractive({useHandCursor:!0}),this.on(Phaser.Input.Events.GAMEOBJECT_POINTER_DOWN,this.handlePointerDown),this.on(Phaser.Input.Events.GAMEOBJECT_POINTER_UP,this.handleOnClick(e)),this.on(Phaser.Input.Events.GAMEOBJECT_POINTER_OUT,this.handlePointerOut)}}]),t}(Phaser.GameObjects.Container);t.Z=u},575:function(e,t,n){"use strict";var a=n(12),i=n(538),r=n(0),s=n(540),o=n(554),c=n(537),u=n(26),l=n(573),h=function(e){function t(t,n,a,r,s){var c;return(c=e.call(this,t)||this).useSound=!0,c.isClicked=!1,c.scaleUp=-1,c.button=void 0,c.buttonDown=void 0,c.hitArea=void 0,c.scaleDownPress=void 0,c.parentName=void 0,c.handelObjectDestroy=function(){c.scene&&c.scene.events.off(Phaser.Scenes.Events.SLEEP,c.handleSceneSleep)},c.handleSceneSleep=function(){c.scene&&c.scene.tweens.killTweensOf((0,i.Z)(c))},c.handlePointerDown=function(){c.isClicked||(c.showButtonDown(),c.isClicked=!0)},c.handleOnClick=function(e){return function(){c.isClicked&&(c.isClicked=!1,c.hideButtonDown(),c.logButtonEvent(),c.addDebugData(),c.processCallback(e))}},c.handlePointerOut=function(){c.isClicked&&(c.isClicked=!1,c.hideButtonDown())},c.buttonsPulsateAnimation=void 0,c.setDepth(o.Z.BUTTON),c.createButton(n,a,r,s),c.updateSize(),c.listenEvents(),c.scene.add.existing((0,i.Z)(c)),c}(0,r.Z)(t,e);var n=t.prototype;return n.listenEvents=function(){this.scene.events.on(Phaser.Scenes.Events.SLEEP,this.handleSceneSleep),this.once(Phaser.GameObjects.Events.DESTROY,this.handelObjectDestroy)},n.showButtonDown=function(){this.scene.tweens.killTweensOf(this.buttonDown),this.scene.add.tween({targets:this.buttonDown,alpha:.4,duration:150,ease:Phaser.Math.Easing.Sine.Out})},n.hideButtonDown=function(){this.scene.tweens.killTweensOf(this.buttonDown),this.scene.add.tween({targets:this.buttonDown,alpha:0,duration:150,ease:Phaser.Math.Easing.Sine.In})},n.processCallback=function(e){-1!==this.scaleUp&&this.setScale(this.scaleUp),e()},n.setDisabled=function(e){var t,n;e?(this.setAlpha(.5),null==(t=this.hitArea)||t.disableInteractive()):(this.setAlpha(1),null==(n=this.hitArea)||n.setInteractive())},n.createButton=function(e,t,n,a){this.button=new u.Z(this.scene,0,0,e,t,n,a),this.buttonDown=new u.Z(this.scene,0,0,e,t,n,13619151),this.buttonDown.setAlpha(0),this.scaleDownPress=this.scale-.1;var i=this.button,r=i.displayWidth,s=i.displayHeight;this.hitArea=this.scene.make.zone({displayWidth:r,displayHeight:s}),this.add([this.button,this.buttonDown,this.hitArea])},n.updateSize=function(){var e=this.button,t=e.width,n=e.height,a=t/100*10,i=n/100*10,r=a<10?a:10,s=i<10?i:10;this.setSize(t+r,n+s),this.hitArea.setSize(t+r,n+s)},n.addDebugData=function(){var e=this.getParentName(),t=this.name;(0,c.sw)("ui-click",e+":"+t)},n.logButtonEvent=function(){var e=this.getParentName(),t=this.name;this.scene.analytics.event(s._.BUTTON_CLICK,{button_name:t,screen_name:e})},n.getParentName=function(){if(this.parentName)return this.parentName;for(var e=this.parentContainer;e;){if(e instanceof GameCore.Screen){var t=e;return this.parentName=t.getScreenName(),this.parentName}e=e.parentContainer}return this.parentName=this.scene.getSceneName(),this.parentName},n.runPulsate=function(){var e,t;null==(e=this.buttonsPulsateAnimation)||e.remove(),this.buttonsPulsateAnimation=new l.Z({targets:[this],props:{scale:{from:1,to:1.05},duration:500}}),null==(t=this.buttonsPulsateAnimation)||t.play()},n.stopPulsate=function(){var e;null==(e=this.buttonsPulsateAnimation)||e.stop(),this.setScale(1)},(0,a.Z)(t,[{key:"onClick",set:function(e){this.hitArea.setInteractive({useHandCursor:!0}),this.hitArea.on(Phaser.Input.Events.GAMEOBJECT_POINTER_DOWN,this.handlePointerDown),this.hitArea.on(Phaser.Input.Events.GAMEOBJECT_POINTER_UP,this.handleOnClick(e)),this.hitArea.on(Phaser.Input.Events.GAMEOBJECT_POINTER_OUT,this.handlePointerOut)}}]),t}(Phaser.GameObjects.Container);t.Z=h},581:function(e,t,n){"use strict";var a=n(0),i=n(557),r=function(e){function t(t,n,a,i){var r;return(r=e.call(this,t,n.key,n.button,a,i)||this).payload=void 0,r.payload=n,r.createIcon(),r.createText(),r}(0,a.Z)(t,e);var n=t.prototype;return n.createIcon=function(){var e=this.scene.add.image(0,0,this.payload.key,this.payload.icon);e.setWorldSize(43,43),this.add(e),Phaser.Display.Align.In.LeftCenter(e,this,-25)},n.createText=function(){var e=this.payload.text,t=this.scene.make.bitmapText({font:i.Z.PRIMARY.KEY,size:this.scene.fontSize(24),text:e,origin:{x:.2,y:.5}});this.add(t)},t}(n(580).Z);t.Z=r},560:function(e,t,n){"use strict";n.d(t,{Z:function(){return c}});var a=n(538),i=n(0),r=n(553).Z.GAMEPLAY_DEFAULT,s=r.KEY,o=r.FRAME,c=function(e){function t(t){var n;return(n=e.call(this,t)||this).icons=[],n.canPlayAnimation=!1,n.timeline=void 0,n.setSize(188,32),n.createIcons(),n.runAnimation(),n.scene.add.existing((0,a.Z)(n)),n}(0,i.Z)(t,e);var n=t.prototype;return n.createIcons=function(){var e=this.scene.add.image(0,0,s,o.LOADING_CLUB),t=this.scene.add.image(0,0,s,o.LOADING_DIAMOND),n=this.scene.add.image(0,0,s,o.LOADING_HEART),a=this.scene.add.image(0,0,s,o.LOADING_SPADE);e.setWorldSize(32,32),t.setWorldSize(32,32),n.setWorldSize(32,32),a.setWorldSize(32,32),this.icons=[e,t,n,a],this.add(this.icons),this.alignIcons()},n.alignIcons=function(){var e=this;this.icons.forEach((function(t,n){var a=-(e.icons.length-1)/2*40+40*n;t.setX(a)}))},n.runAnimation=function(){var e,t=this;if(this.canPlayAnimation){var n=1/this.scene.world.getPixelRatio();null==(e=this.timeline)||e.stop();var a=function(){t.icons.forEach((function(e){return e.setScale(.8*n)}))},i=this.scene.tweens.createTimeline({loop:-1,onStart:a,onLoop:a});this.icons.forEach((function(e,t){i.add({targets:e,duration:150,ease:Phaser.Math.Easing.Sine.Out,yoyo:!0,offset:150*t,props:{scale:{from:.8*n,to:1.1*n}}})})),i.play(),this.timeline=i}},n.stopAnimation=function(){var e;null==(e=this.timeline)||e.stop()},n.setVisible=function(t){return e.prototype.setVisible.call(this,t),this.canPlayAnimation=t,t?this.runAnimation():this.stopAnimation(),this},n.setTint=function(e){return this.icons.forEach((function(t){return t.setTint(e)})),this},t}(Phaser.GameObjects.Container)},577:function(e,t,n){"use strict";var a=n(8),i=n(12),r=n(538),s=n(0),o=n(7),c=n.n(o),u=n(76),l=n.n(u),h=n(42),d=n.n(h),p=n(28),f=n.n(p),g=n(15),m=n.n(g),v=n(32),y=n.n(v),b=n(34),A=n.n(b),S=n(39),E=n.n(S),w=n(554),T=n(535);function I(e,t){var n="undefined"!==typeof A()&&E()(e)||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){var n;if(!e)return;if("string"===typeof e)return C(e,t);var a=m()(n=Object.prototype.toString.call(e)).call(n,8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return y()(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return C(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var a=0;return function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function C(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}var k=function(e){function t(t,n){var i,s;(s=e.call(this,t)||this).config=void 0,s.isEnable=void 0,s.maxHeight=void 0,s.isScrolling=void 0,s.boundTop=void 0,s.boundBottom=void 0,s.maskGraphics=void 0,s.objects=void 0,s._value=0,s.velocity=0,s.isScrollingSmooth=void 0,s.lastScrollY=void 0,s.isScrollingBack=void 0,s.scrollingBackTo=void 0,s.lastScrollYCount=0,s.hitArea=void 0,s.onScrollEvents=[],s.update=function(e,t){s.isScrollingSmooth&&s.velocity&&s.scrollingSmooth(t),s.isScrollingBack&&s.scrollingBack(t)},s.checkReachBound=function(){return s.isReachTop()||s.isReachBottom()},s.onMouseScroll=(0,T.D)((function(e,t,n){if(s.isEnable){var a;if(s.isScrolling=!0,s.checkReachBound())return s.lastScrollY=c()(a=s.lastScrollY).call(a,(function(){return 0})),void(s.isScrolling=!1);s.stopScrollingBack(),s.startScrollSmooth(-n*s.scrollSmooth/15)}}),100,{isImmediate:!0,maxWait:100}),s.onTouchScroll=function(e){if(s.isEnable){s.velocity&&s.stopScrollSmooth(),s.stopScrollingBack(),s.isScrolling=!0;var t=s.scene.game.world.getZoomRatio(),n=e.position,a=e.prevPosition,i=(n.y-a.y)/t,r=s.height*s.maxScrollOver,o=1;if(s.lastScrollY[++s.lastScrollYCount%s.lastScrollY.length]=i,s.isReachTop()&&i>=0){var c=(r-(s.value-s.marginTop))/r;o=Math.min(o,c)}if(s.isReachBottom()&&i<=0){var u=(r-(-s.maxHeight-s.value))/r;o=Math.min(o,u)}var l=i*o,h=s.maxScrollOver*s.height;s.value+l>s.marginTop+h?s.value=s.marginTop+h:s.value+l<-s.maxHeight-h?s.value=-s.maxHeight-h:s.value+=l,s.callOnScrollEvents(s.value,l)}},s.onTouchDown=function(){s.isEnable&&(s.velocity&&s.stopScrollSmooth(),s.stopScrollingBack())},s.onTouchEnd=function(){var e,t;if(s.isReachTop()&&(s.startScrollingBack(s.marginTop),s.stopScrollSmooth()),s.isReachBottom()&&(s.startScrollingBack(-s.maxHeight),s.stopScrollSmooth()),s.isScrolling){var n=l()(e=s.lastScrollY).call(e,(function(e,t){return e+t}))/s.lastScrollY.length;s.startScrollSmooth(n*s.scrollSmooth),s.lastScrollY=c()(t=s.lastScrollY).call(t,(function(){return 0}))}},s.config=(0,a.Z)({marginTop:0,marginBottom:0,acceleration:1400,maxScrollOver:.15,scrollSmooth:40,scrollingBackRate:5},n);var o=n.width,u=n.height;return s.isEnable=!1,s.maxHeight=0,s.lastScrollY=d()(i=new Array(3)).call(i,0),s.setSize(o,u),s.createGroup(),s.createInput(),s.createEvents(),s.scene.add.existing((0,r.Z)(s)),s}(0,s.Z)(t,e);var n=t.prototype;return n.onScroll=function(e){this.onScrollEvents.push(e)},n.gotoTop=function(){this.value=this.config.marginTop},n.reset=function(){this.maxHeight=0,this.isScrolling=!1,this.isScrollingBack=!1,this.isScrollingSmooth=!1,this.gotoTop(),this.setEnable(!1)},n.createDebug=function(){var e=this.drawDebugBox(16711680,.8);console.log(null==e?void 0:e.x,null==e?void 0:e.y,null==e?void 0:e.displayWidth,null==e?void 0:e.displayHeight)},n.setEnable=function(e){this.isEnable=e,e?this.setInteractive({draggable:!0,useHandCursor:!0}):this.disableInteractive()},n.addItem=function(e){this.addAt(e),this.objects.add(e);var t=e.y+e.height+this.marginBottom-this.height/2;this.maxHeight=Math.max(this.maxHeight,t,0),this.updateObjectVisible()},n.addItems=function(e){var t=this;this.addAt(e),this.objects.addMultiple(e);var n=c()(e).call(e,(function(e){return e.y+e.height+t.marginBottom-t.height/2}));this.maxHeight=Math.max(this.maxHeight,Math.max.apply(Math,n),0),this.updateObjectVisible()},n.clearItem=function(){this.objects.clear(!0,!0),this.reset()},n.getChildren=function(){var e;return f()(e=this.objects.getChildren()).call(e,(function(e){return e.active}))},n.createBound=function(e,t,n,a){this.boundTop=this.scene.make.image({key:e,frame:t}),this.boundBottom=this.scene.make.image({key:e,frame:t}),this.boundTop.setTint(a),this.boundBottom.setTint(a),this.boundTop.setAlpha(1,1,0,0),this.boundBottom.setAlpha(0,0,1,1),this.boundTop.setDepth(w.Z.PRIORITY),this.boundBottom.setDepth(w.Z.PRIORITY);var i=this.width,r=n,s=this.getWorldPosition(),o=s.x,c=s.y;this.boundTop.setDisplaySize(i,r),this.boundBottom.setDisplaySize(i,r),this.boundTop.setY(-this.displayHeight/2+r/2+c-this.y-1),this.boundBottom.setY(this.displayHeight/2-r/2+c-this.y+1),this.boundTop.setX(o-this.x),this.boundBottom.setX(o-this.x),this.add([this.boundTop,this.boundBottom])},n.createMask=function(){var e;null==(e=this.maskGraphics)||e.destroy(),this.maskGraphics=this.scene.make.graphics({fillStyle:{color:255,alpha:1},visible:!0}),this.maskGraphics.setName("MaskGraphics");var t=this.width,n=this.height;this.maskGraphics.fillRoundedRect(0-t/2,0-n/2,t,n,0),this.setMask(this.maskGraphics.createGeometryMask()),this.scene.events.off(Phaser.Scenes.Events.UPDATE,this.updateMask,this),this.scene.events.on(Phaser.Scenes.Events.UPDATE,this.updateMask,this)},n.updateMask=function(){var e=this.getWorldPosition(),t=e.x,n=e.y;this.maskGraphics.setPosition(t,n)},n.createGroup=function(){this.objects=this.scene.make.group({})},n.updateObject=function(e){this.objects.incY(e),this.updateObjectVisible()},n.updateObjectVisible=function(){for(var e=this.objects.getChildren(),t=0;t<e.length;t++){var n=e[t];n.y+n.height<-this.height/2||n.y-n.height>this.height/2?n.setVisible(!1):n.setVisible(!0)}},n.createInput=function(){this.setInteractive({draggable:!0,useHandCursor:!0}),this.on(Phaser.Input.Events.POINTER_WHEEL,this.onMouseScroll),this.on(Phaser.Input.Events.GAMEOBJECT_DRAG,this.onTouchScroll),this.on(Phaser.Input.Events.GAMEOBJECT_POINTER_DOWN,this.onTouchDown),this.scene.input.on(Phaser.Input.Events.POINTER_UP,this.onTouchEnd,this)},n.createEvents=function(){this.scene.events.on(Phaser.Scenes.Events.UPDATE,this.update)},n.callOnScrollEvents=function(e,t){for(var n,a=I(this.onScrollEvents);!(n=a()).done;){(0,n.value)(this,e,t)}},n.scrollingBack=function(e){var t=(this.scrollingBackTo-this.value)*e*this.scrollingBackRate/1e3;this.value+=t,Math.abs(this.scrollingBackTo-this.value)<.5&&(this.value=this.scrollingBackTo,this.stopScrollingBack()),this.callOnScrollEvents(this.value,t)},n.startScrollingBack=function(e){this.isScrollingBack=!0,this.scrollingBackTo=e},n.stopScrollingBack=function(){this.isScrollingBack=!1},n.scrollingSmooth=function(e){var t=this.velocity*e/1e3;this.value+=t;var n=Math.abs(this.velocity)/this.velocity;this.velocity-=n*this.acceleration*e/1e3,Math.abs(this.velocity)<this.acceleration*e/1e3&&this.stopScrollSmooth(),this.isReachTop()&&(this.startScrollingBack(this.marginTop),this.stopScrollSmooth()),this.isReachBottom()&&(this.startScrollingBack(-this.maxHeight),this.stopScrollSmooth()),this.callOnScrollEvents(this.value,t)},n.startScrollSmooth=function(e){this.isScrollingSmooth=!0,e&&(e*this.velocity>0?this.velocity+=e:this.velocity=e)},n.stopScrollSmooth=function(){this.isScrollingSmooth=!1,this.isScrolling=!1,this.velocity=0},n.isReachTop=function(){return this.value>this.marginTop},n.isReachBottom=function(){return-this.value>this.maxHeight},(0,i.Z)(t,[{key:"marginTop",get:function(){return this.config.marginTop}},{key:"marginBottom",get:function(){return this.config.marginBottom}},{key:"acceleration",get:function(){return this.config.acceleration}},{key:"maxScrollOver",get:function(){return this.config.maxScrollOver}},{key:"scrollSmooth",get:function(){return this.config.scrollSmooth}},{key:"scrollingBackRate",get:function(){return this.config.scrollingBackRate}},{key:"value",get:function(){return this._value},set:function(e){var t=e-this._value;this._value=e,this.updateObject(t)}}]),t}(Phaser.GameObjects.Container);t.Z=k},554:function(e,t){"use strict";t.Z={BACKGROUND:1,FOOTER_LOGO:2,FIREWORKS:5,ITEM:10,LOGO:15,BUTTON:20,TILE:25,TEXT:30,ENCOURAGING:31,EFFECT:32,MESSAGE:33,POPUP:40,PRIORITY:80,DEBUG:90,ON_TOP:1e4}},557:function(e,t){"use strict";t.Z={PRIMARY:{KEY:"gamefont",TEXTURE:"./assets/fonts/gamefont-{lang}.png",DATA:"./assets/fonts/gamefont-{lang}.xml"},BOLD:{KEY:"gamefont-bold",TEXTURE:"./assets/fonts/gamefont-bold-{lang}.png",DATA:"./assets/fonts/gamefont-bold-{lang}.xml"},FONT_FAMILY:"SFProText-Medium"}},544:function(e,t){"use strict";var n={AVATAR:{KEY:"avatar",FILE:"./assets/images/others/avatar.png",CONFIG:{}},ICON_EARTH:{KEY:"icon-earth",FILE:"./assets/images/others/icon-earth.png",CONFIG:{}},BACKGROUND:{KEY:"background",FILE:"./assets/images/"+GameCore.Utils.Image.getImageScale()+"x/bg.jpg",CONFIG:{}}};t.Z=n},553:function(e,t,n){"use strict";var a=n(8),i=GameCore.Utils.Image.getImageScale(),r={TUTORIAL:{KEY:"tutorial-resources",TEXTURE:"./assets/textures/"+i+"x/tutorial-resources.png",JSON:"./assets/textures/"+i+"x/tutorial-resources.json",FRAME:{TIP:"tip",HAND:"hand",BLANK:"blank",AVATAR_CAT:"avatar-cat",POPUP_TALK:"talk-popup",FIRST_MOVE:"first-move",CURRENT_SCORE:"current-score",TARGET_SCORE:"target-score",HAMMER_ITEM:"hammer-item",PAINT_ITEM:"paint-item",SHUFFLE_ITEM:"shuffle-item",COLORFUL_GEM_1:"colorful-gem-1",COLORFUL_GEM_2:"colorful-gem-2"}},GAMEPLAY_DEFAULT:{KEY:"gameplay-default",TEXTURE:"./assets/textures/"+i+"x/gameplay-default.png",JSON:"./assets/textures/"+i+"x/gameplay-default.json",FRAME:{BLANK:"blank",STATS_CROWN:"crown",STATS_STAR:"star",STATS_CUP:"stats_cup",STATS_MEDAL_START:"stats_medal_star",STATS_TIMER:"stats_timer",STATS_FLASH:"flash",MENU_STATISTIC:"menu_statistics",CUP:"cup",IC_SETTINGS:"ic_setting",IC_PLAY:"ic_play",IC_HINT:"ic_hint",IC_UNDO:"ic_undo",IC_SHARE:"ic_share",IC_THEME:"ic_theme",IC_INVITE:"ic_invite",IC_FLAG:"flag",IC_SOUND:"ic_sound",IC_MOVE:"ic_move",IC_STATISTICS:"ic_statistics",IC_NEXT:"ic_next",IC_BOOK:"ic_book",IC_RESTART:"ic_restart",IC_REPLAY:"ic_replay",IC_RECYCLE:"ic_recycle",IC_VIBRATION:"vibration",IC_GROUP:"ic_group",IC_HINT_SETTINGS:"ic_hint_settings",IC_DRAW_MODE:"ic_draw_mode",IC_AUTO_COMPLETE:"ic_auto_complete",ADD_SQUARE:"add-square",TIMER:"timer",GOLD:"gold",SILVER:"silver",BRONZE:"bronze",CUSTOM_MEDAL:"custom_medal",TOURNAMENT_TIMER:"tournament_timer",MEDAL_STAR:"medal-star",NO_TOURNAMENT:"no-tournament",IC_BG_OFF:"ic_bg_off",ARROW_SWAP_HORIZONTAL:"arrow-swap-horizontal",AVATAR_CROWN:"avatar_crown",WIN_BANNER:"win_banner",LOSE_BANNER:"lose_banner",BEAM:{AXIS:"beam_axis",LOSE_AXIS:"lose_beam_axis"},FLAG:{LEFT:"flags/left/",RIGHT:"flags/right/"},STRING:{LEFT:"string/left",RIGHT:"string/right"},LIGHTNING:{LEFT:"lightning/left_lightning",MIDDLE:"lightning/middle_lightning",RIGHT:"lightning/right_lightning"},HAND:"hand",LOADING_CLUB:"loading_club",LOADING_DIAMOND:"loading_diamond",LOADING_HEART:"loading_heart",LOADING_SPADE:"loading_spade",BOTTOM_BG:"bottom_bg",BOTTOM_LOGO:"bottom_logo",FOOTER_BG:"footer-bg",STOCK_BG:"stock-bg",FOOTER_TEXT:{BACK_TO_GAME:"text/back-to-game",TEXT_GAME:"text/text-game",TEXT_HINT:"text/text-hint",TEXT_SETTINGS:"text/text-settings",TEXT_TOURNAMENTS:"text/text-tournaments",TEXT_UNDO:"text/text-undo"}}},CARD_BACK:{KEY:"card-back",TEXTURE:"./assets/textures/"+i+"x/card-back.png",JSON:"./assets/textures/"+i+"x/card-back.json"},HOW_TO_PLAY:{KEY:"how-to-play",TEXTURE:"./assets/textures/"+i+"x/how-to-play.jpg",JSON:"./assets/textures/"+i+"x/how-to-play.json"},THEME_PREVIEW:{KEY:"theme-preview",TEXTURE:"./assets/textures/"+i+"x/theme-preview.png",JSON:"./assets/textures/"+i+"x/theme-preview.json"},DEFAULT:{KEY:"default-resources",TEXTURE:"./assets/textures/"+i+"x/default-resources.png",JSON:"./assets/textures/"+i+"x/default-resources.json",FRAME:{LINE:"line",BLANK:"blank",LOGO:"title-logo",GEMS:"title-gems",TEXT_LOADING:"loading",BOTTOM_BG:"bottom-bg",BOTTOM_LINE:"bottom-line",TOP_BG_LONG:"top-bg-long",BLOCK_LEADER_BLUE:"block-blue-bg",BLOCK_LEADER_YELLOW:"block-yellow-bg",PRELOADER:"preloader/dual-ring",LEADERBOARD_TAB_ON:"leaderboards/tab-on",LEADERBOARD_TAB_OFF:"leaderboards/tab-off",LEADERBOARD_BG_DARK:"leaderboards/bg-dark",LEADERBOARD_BG_LIGHT:"leaderboards/bg-light",MISSION_ICON_BG:"dailyMission/bg-icon",MISSION_BLOCK_BG:"dailyMission/bg-block",MISSION_CLOCK_BG:"dailyMission/bg-clock",DAILY_DAY_BG:"dailyRewards/bg",DAILY_DAY_LABEL:"dailyRewards/label",DAILY_DAY_BG_WAIT:"dailyRewards/bg-wait",DAILY_DAY_BG_OPEN:"dailyRewards/bg-open",DAILY_DAY_TITLE_GREY:"dailyRewards/title-grey",DAILY_DAY_TITLE_GREEN:"dailyRewards/title-green",DAILY_DAY_TITLE_ORANGE:"dailyRewards/title-orange",RIBBON_LONG:"ribbon/long",RIBBON_FULL:"ribbon/long-full",RIBBON_SHORT:"ribbon/short",RIBBON_SMALL:"ribbon/small",AVATAR_BG_BLUE:"avatar/blue-bg",AVATAR_FRAME_BLUE:"avatar/blue-frame",AVATAR_BG_BLUE_SMALL:"avatar/blue-bg-small",AVATAR_FRAME_BLUE_SMALL:"avatar/blue-frame-small",AVATAR_BG_BLUE_BIG:"avatar/blue-bg-big",AVATAR_FRAME_BLUE_BIG:"avatar/blue-frame-big",AVATAR_BG_YELLOW:"avatar/yellow-bg",AVATAR_FRAME_YELLOW:"avatar/yellow-frame",AVATAR_BG_YELLOW_SMALL:"avatar/yellow-bg-small",AVATAR_FRAME_YELLOW_SMALL:"avatar/yellow-frame-small",AVATAR_BG_YELLOW_BIG:"avatar/yellow-bg-big",AVATAR_FRAME_YELLOW_BIG:"avatar/yellow-frame-big",THE_CAT:"logo/cat",SAD_CAT:"logo/sad-cat",LOGO_GIFT:"logo/gift",LOGO_GIFT_ADS:"logo/gift-ad",LOGO_GIFT_WHITE:"logo/gift_white",LOGO_DIAMONDS_LIGHT_2:"logo/diamonds-light-2",LOGO_DIAMONDS_LIGHT_3:"logo/diamonds-light-3",LOGO_DIAMONDS_LIGHT_4:"logo/diamonds-light-4",LOGO_DIAMONDS_LIGHT_5:"logo/diamonds-light-5",LOGO_DIAMONDS_LIGHT_6:"logo/diamonds-light-6",LOGO_ADS_DIAMONDS:"logo/ads-diamonds",POPUP_TOP_LEFT:"popup/top-left",POPUP_TOP_MID:"popup/top-middle",POPUP_TOP_RIGHT:"popup/top-right",POPUP_MID_LEFT:"popup/middle-left",POPUP_MID_MID:"popup/middle-middle",POPUP_MID_RIGHT:"popup/middle-right",POPUP_BOTTOM_LEFT:"popup/bottom-left",POPUP_BOTTOM_MID:"popup/bottom-middle",POPUP_BOTTOM_RIGHT:"popup/bottom-right",PROGRESS_BG_LEFT:"progress/bg-left",PROGRESS_BG_MID:"progress/bg-mid",PROGRESS_BG_RIGHT:"progress/bg-right",PROGRESS_BAR_LEFT:"progress/bar-left",PROGRESS_BAR_MID:"progress/bar-mid",PROGRESS_BAR_RIGHT:"progress/bar-right",ICON_DOT:"icons/dot",ICON_CUP:"icons/cup",ICON_GIFT:"icons/gift",ICON_PLUS:"icons/plus",ICON_RANK:"icons/rank",ICON_FLAG:"icons/flag",ICON_CLOCK:"icons/clock",ICON_DAILY:"icons/daily",ICON_ADS:"icons/flat-ad",ICON_CHECK:"icons/check",ICON_CANCEL:"icons/cancel",ICON_SETTING:"icons/setting",ICON_RESUME:"icons/flat-resume",ICON_VIB_ON:"icons/flat-vib-on",ICON_VIB_OFF:"icons/flat-vib-off",ICON_MUSIC_ON:"icons/flat-music-on",ICON_MUSIC_OFF:"icons/flat-music-off",ICON_SOUND_ON:"icons/flat-sound-on",ICON_SOUND_OFF:"icons/flat-sound-off",ICON_FLAT_HOME:"icons/flat-home",ICON_FLAT_RANK:"icons/flat-rank",ICON_FLAT_SHARE:"icons/flat-share",ICON_CROWN:"icons/crown",ICON_CUP_MINI:"icons/cup-mini",ICON_CUP_GOLD:"icons/cup-gold",ICON_CUP_SILVER:"icons/cup-silver",ICON_CUP_COPPER:"icons/cup-bronze",ICON_DIAMOND:"icons/diamond",ICON_DIAMOND_SMALL:"icons/diamond-small",ICON_DIAMOND_GREY:"icons/diamond-grey",ICON_DIAMOND_LIGHT:"icons/diamond-light",BUTTON_CLOSE:"buttons/close",BUTTON_RED_LONG:"buttons/red-long",BUTTON_YELLOW_LONG:"buttons/yellow-long",BUTTON_YELLOW_CIRCLE:"buttons/yellow-circle",BUTTON_BLUE:"buttons/blue",BUTTON_BLUE_SHORT:"buttons/blue-short",BUTTON_BLUE_LONG:"buttons/blue-long",BUTTON_BLUE_CIRCLE:"buttons/blue-circle",BUTTON_GREEN:"buttons/green",BUTTON_GREEN_SHORT:"buttons/green-short",BUTTON_GREEN_LONG:"buttons/green-long",BUTTON_GREEN_MINOR:"buttons/green-minor",BUTTON_GREEN_CIRCLE:"buttons/green-circle",BUTTON_GREEN_MINOR_MINI:"buttons/green-minor-mini",NO_THANK_TEXT:"texts/no-thank",HORIZONTAL_LUCKY_BAR:"lucky-bar/horizontal-lucky-bar",HORIZONTAL_ARROW:"lucky-bar/horizontal-arrow",ARC_LUCKY_BAR:"lucky-bar/arc-lucky-bar",ARC_ARROW:"lucky-bar/arc-arrow"}},EFFECTS:{KEY:"effects-resources",PATH:"./assets/textures/"+i+"x/",JSON:"./assets/textures/"+i+"x/effects-resources.json",FRAME:{BLANK:"blank",FX_COMET:"comet",FX_SPARK:"spark",FX_CIRCLE:"circle",FX_CIRCLE_LIGHT:"circle-light",FX_GLOW_LIGHT:"glow-light",FX_GLOW_SMALL:"glow-small",FX_STAR_WHITE:"star-white",FX_STAR_YELLOW:"star-yellow",TEXT_COOL:"texts/cool",TEXT_GOOD:"texts/good",TEXT_GREAT:"texts/great",TEXT_EXCELLENT:"texts/excellent",TEXT_CONGRATULATION:"texts/congratulation",FX_CONFETTI_SMALL_1:"confetti/small-1",FX_CONFETTI_SMALL_2:"confetti/small-2",FX_CONFETTI_SMALL_3:"confetti/small-3",FX_CONFETTI_SMALL_4:"confetti/small-4",FX_CONFETTI_HEXAGON:"confetti/hexagon-",FX_FIREWORKS_SMALL:"fireworks/small",FX_FIREWORKS_BIG_0:"fireworks/big-explosive-0",FX_FIREWORKS_BIG_1:"fireworks/big-explosive-1",FX_FIREWORKS_SOAR_LINE:"fireworks/soar-line",FX_FIREWORKS_SOAR_CIRCLE:"fireworks/soar-circle",FX_HIGHLIGHT:"fx-items/highlight",FX_PAINT_EXPLOSIVE:"fx-items/paint-explosive-",FX_RED_EXPLOSIVE:"fx-gems/red-explosive-",FX_BLUE_EXPLOSIVE:"fx-gems/blue-explosive-",FX_PINK_EXPLOSIVE:"fx-gems/pink-explosive-",FX_GREEN_EXPLOSIVE:"fx-gems/green-explosive-",FX_YELLOW_EXPLOSIVE:"fx-gems/yellow-explosive-",FX_COLORFUL:"fx-gems/colorful-",FX_COLOR_CHANGE:"fx-gems/color-change-",FX_FREEZE_EXPLOSIVE:"fx-gems/freeze-explosive-",FX_COLORFUL_EXPLOSIVE:"fx-gems/colorful-explosive-",ANIMATION_STAR_X:"star-x/star-",ANIMATION_STAR_Y:"star-y/star-",FX_CONFETTI_RIBBON:"ribbon/ribbon",PREFIX_ANIMATION_RIBBON_CONFETTI_A:"ribbon/falling-confetti/confetti-a/confetti-a-",PREFIX_ANIMATION_RIBBON_CONFETTI_B:"ribbon/falling-confetti/confetti-b/confetti-b-",PREFIX_ANIMATION_RIBBON_CONFETTI_C:"ribbon/falling-confetti/confetti-c/confetti-c-",PREFIX_ANIMATION_RIBBON_CONFETTI_D:"ribbon/falling-confetti/confetti-d/confetti-d-"}},ANIMATION_SCENE:{KEY:"effects-resources",PATH:"./assets/textures/"+i+"x/",JSON:"./assets/textures/"+i+"x/animation-scene-resources.json",FRAME:{BLANK:"blank",COIN:"coins/coin",COIN_SMALL:"coins/coin-small",COIN_SMALL_GREY:"coins/coin-small-grey",ANIMATION_STAR_X:"star-x/star-",ANIMATION_STAR_Y:"star-y/star-",FX_SPARK_YELLOW:"yellow-spark",FX_CONFETTI_RIBBON:"ribbon/ribbon",PREFIX_ANIMATION_RIBBON_CONFETTI_A:"ribbon/falling-confetti/confetti-a/confetti-a-",PREFIX_ANIMATION_RIBBON_CONFETTI_B:"ribbon/falling-confetti/confetti-b/confetti-b-",PREFIX_ANIMATION_RIBBON_CONFETTI_C:"ribbon/falling-confetti/confetti-c/confetti-c-",PREFIX_ANIMATION_RIBBON_CONFETTI_D:"ribbon/falling-confetti/confetti-d/confetti-d-",FX_CONFETTI_SMALL_1:"confetti/small-1",FX_CONFETTI_SMALL_2:"confetti/small-2",FX_CONFETTI_SMALL_3:"confetti/small-3",FX_CONFETTI_SMALL_4:"confetti/small-4",FX_CONFETTI_HEXAGON:"confetti/hexagon-"}},GAMEPLAY:{KEY:"gameplay-resources",TEXTURE:"./assets/textures/"+i+"x/gameplay-resources.png",JSON:"./assets/textures/"+i+"x/gameplay-resources.json",FRAME:{BLANK:"blank",BIG_TOP:"bg-top",BIG_PLAYER:"bg-player",BIG_CIRCLE:"big-circle",BUTTON_PLUS:"buttons/plus",BUTTON_SETTING:"buttons/setting",AVATAR_BLUE_BG:"avatars/bg-blue-mini",AVATAR_BLUE_FRAME:"avatars/frame-blue-mini",PROGRESS_BG_LEFT:"progress/bg-left",PROGRESS_BG_MID:"progress/bg-mid",PROGRESS_BG_RIGHT:"progress/bg-right",PROGRESS_BAR_LEFT:"progress/bar-left",PROGRESS_BAR_MID:"progress/bar-mid",PROGRESS_BAR_RIGHT:"progress/bar-right",ITEM_GIFT:"items/gift",ITEM_PAINT:"items/paint",ITEM_HAMMER:"items/hammer",ITEM_SHUFFLE:"items/shuffle",ITEM_BG_COIN:"items/bg-coin",ITEM_BG_ITEM:"items/bg-item",ICON_PLUS:"icons/plus",ICON_CHECK:"icons/check",ICON_CLOCK:"icons/clock",ICON_DIAMOND:"icons/diamond",ICON_DIAMOND_SMALL:"icons/diamond-small",ICON_CUP_SUPERMINI:"icons/cup-supermini",TILE_RED:"gems/red",TILE_BLUE:"gems/blue",TILE_PINK:"gems/pink",TILE_GREEN:"gems/green",TILE_YELLOW:"gems/yellow",TILE_FREEZE:"gems/freeze",TILE_COLORFUL:"gems/colorful",TILE_COLOR_CHANGE:"gems/change"}},DEMO_SPINE:{KEY:"demo-spine",jsonPATH:"./assets/spines/demo/demo.json",atlasPATH:"./assets/spines/demo/demo.atlas"}};GameCore.Utils.Valid.isDebugger()&&(r.EFFECTS.FRAME=(0,a.Z)({},r.ANIMATION_SCENE.FRAME,r.EFFECTS.FRAME)),t.Z=r},555:function(e,t,n){"use strict";n.d(t,{C:function(){return i},K:function(){return r}});var a=n(34),i={BOOT_SCENE:"BOOT_SCENE",LOAD_SCENE:"LOAD_SCENE",GAME_SCENE:"GAME_SCENE",GLOBAL_SCENE:"GLOBAL_SCENE",DASHBOARD_SCENE:"DASHBOARD_SCENE",GAME_OVER_SCENE:"GAME_OVER_SCENE",LEADERBOARD_SCENE:"LEADERBOARD_SCENE",RESULT_MATCH_SCENE:"RESULT_MATCH_SCENE",TEST_SCENE:"TEST_SCENE",ANIMATIONS_SCENE:"ANIMATIONS_SCENE"},r={SWITCH:n.n(a)()("SWITCH")}},559:function(e,t,n){"use strict";n.d(t,{o4:function(){return a},Ks:function(){return i}});var a={PAUSE_SCREEN:"PAUSE_SCREEN",NOTIFY_SCREEN:"NOTIFY_SCREEN",REWARD_SCREEN:"REWARD_SCREEN",RESCUE_SCREEN:"RESCUE_SCREEN",SETTINGS_SCREEN:"SETTINGS_SCREEN",BEST_SCORE_SCREEN:"BEST_SCORE_SCREEN",DAILY_REWARD_SCREEN:"DAILY_REWARD_SCREEN",DAILY_MISSIONS_SCREEN:"DAILY_MISSIONS_SCREEN",LUCKY_REWARD_SCREEN:"LUCKY_REWARD_SCREEN",NO_MORE_MOVES_SCREEN:"NO_MORE_MOVES_SCREEN",VICTORY_SCREEN:"VICTORY_SCREEN",PLAY_SCREEN:"PLAY_SCREEN",GAME_STATS_SCREEN:"GAME_STATS_SCREEN",THEME_SCREEN:"THEME_SCREEN",HOW_TO_PLAY_SCREEN:"HOW_TO_PLAY_SCREEN",AWESOME_SCREEN:"AWESOME_SCREEN",NOTIFICATION_SCREEN:"NOTIFICATION_SCREEN",TOURNAMENTS_SCREEN:"TOURNAMENTS_SCREEN",PLAY_WITH_FRIEND_GAME_OVER_SCREEN:"PLAY_WITH_FRIEND_GAME_OVER_SCREEN",PLAY_WITH_FRIEND_RESULT_SCREEN:"PLAY_WITH_FRIEND_GAME_RESULT",TOURNAMENTS_RESULT_SCREEN:"TOURNAMENT_RESULT_SCREEN",WELL_DONE_SCREEN:"WELL_DONE_SCREEN"},i={SCREEN:200,POPUP:300,PRIORITY:999}},568:function(e,t){"use strict";t.Z={BUTTON_CLICK:"button_click",POPUP_OFF:"popup_out",POPUP_SHOW:"popup_in",AUTO_COMPLETE:"auto_complete",CARD_MOVE:"card_move",FINISH_1:"finish1",FINISH_2:"finish2",FINISH_3:"finish3",FINISH_4:"finish4",FINISH_5:"finish5",FINISH_6:"finish6",FINISH_7:"finish7",FINISH_8:"finish8",FINISH_9:"finish9",FINISH_10:"finish10",FINISH_11:"finish11",FINISH_12:"finish12",FINISH_13:"finish13",HINT:"hint",NO_MOVE:"no_move",SHUFFLE:"shuffle",UNDO:"undo",WON:"won",DIAMONDS_EAT:"",FIREWORKS_SOAR:"",FIREWORKS_BIG:"",FIREWORKS_SMALL:"",DAILY_REWARD:"",GAME_OVER_SCENE:"",SCORE_COUNTER:"",CONGRATULATION:"",YOU_WIN:"",YOU_LOSE:"",GIFT_CHARGE:"",GIFT_REVEAL:"",GIFT_EXPLODE:""}},582:function(e,t,n){"use strict";var a=n(538),i=n(0),r=n(553).Z.EFFECTS,s=r.KEY,o=r.FRAME,c=function(e){function t(t){var n;return(n=e.call(this,t)||this).halo=void 0,n.star=void 0,n.createStar(),n.createHalo(),n.scene.add.existing((0,a.Z)(n)),n}(0,i.Z)(t,e);var n=t.prototype;return n.run=function(){this.runStarAnimation(),this.runHaloAnimation()},n.createStar=function(){this.star=this.scene.make.image({key:s,frame:o.FX_STAR_YELLOW,visible:!1}),this.star.setWorldSize(35,35),this.add(this.star)},n.createHalo=function(){this.halo=this.scene.make.image({key:s,frame:o.FX_CIRCLE,visible:!1}),this.halo.setWorldSize(162,162),this.add(this.halo)},n.runStarAnimation=function(){var e=this;this.scene.tweens.killTweensOf(this.star),this.star.setVisible(!0);var t=1/GameCore.Utils.Image.getImageScale();this.scene.tweens.add({targets:[this.star],duration:400,ease:Phaser.Math.Easing.Quintic.Out,props:{scaleX:{start:16*t,to:0},scaleY:{start:10*t,to:0}},onComplete:function(){e.star.setVisible(!1)}})},n.runHaloAnimation=function(){var e=this;this.scene.tweens.killTweensOf(this.halo),this.halo.setScale(0),this.halo.setVisible(!0),this.scene.tweens.add({targets:[this.halo],duration:200,ease:Phaser.Math.Easing.Cubic.Out,props:{scale:{from:0,to:8},alpha:{from:1,to:0}},onComplete:function(){e.halo.setVisible(!1)}})},t}(Phaser.GameObjects.Container);t.Z=c},574:function(e,t,n){"use strict";var a=n(538),i=n(0),r=n(553),s=n(520),o=r.Z.EFFECTS,c=o.KEY,u=o.FRAME,l=function(e){function t(t,n){var i;return(i=e.call(this,t,c,u.BLANK)||this).config=void 0,i.emitter=void 0,i.config=n||{},i.scene.add.existing((0,a.Z)(i)),i}(0,i.Z)(t,e);var n=t.prototype;return n.createEmitters=function(){var e=u.FX_CONFETTI_SMALL_1,t=u.FX_CONFETTI_SMALL_2,n=u.FX_CONFETTI_SMALL_3,a=u.FX_CONFETTI_SMALL_4,i=1/GameCore.Utils.Image.getImageScale(),r={on:!1,particleBringToTop:!0,frame:[e,t,n,a],tint:[14223402,1021804,5420529,16702052],timeScale:1,frequency:400,maxParticles:120,gravityY:-10,speedX:{min:-100,max:100},speedY:{min:80,max:250},alpha:{start:1,end:0,ease:Phaser.Math.Easing.Expo.In},rotate:{start:0,end:1080},scale:{min:.8*i,max:2*i},angle:{min:20,max:160},lifespan:{min:8e3,max:12e3}},o=(0,s.TS)(r,this.config);this.emitter=this.createEmitter(o)},n.run=function(e,t,n){this.stop(),this.emitter.setQuantity(e),this.emitter.setPosition(t,n),this.emitter.start()},n.explode=function(e,t,n){this.emitter||this.createEmitters(),this.emitter.explode(e,t,n)},n.stop=function(){var e,t,n;null==(e=this.emitter)||e.killAll(),null==(t=this.emitter)||t.stop(),null==(n=this.emitter)||n.remove(),this.createEmitters()},t}(Phaser.GameObjects.Particles.ParticleEmitterManager);t.Z=l},579:function(e,t,n){"use strict";var a=n(538),i=n(0),r=n(553).Z.EFFECTS,s=r.KEY,o=r.FRAME,c=function(e){function t(t){var n;return(n=e.call(this,t,s,o.FX_STAR_YELLOW)||this).emitZone=void 0,n.emitter=void 0,n.createEmitZone(),n.scene.add.existing((0,a.Z)(n)),n}(0,i.Z)(t,e);var n=t.prototype;return n.createEmitZone=function(){this.emitZone=new Phaser.Geom.Rectangle},n.createEmitters=function(){var e=1/GameCore.Utils.Image.getImageScale();this.emitter=this.createEmitter({on:!1,frame:o.FX_STAR_YELLOW,emitZone:{source:this.emitZone,type:"random"},timeScale:1,frequency:100,alpha:{start:1,end:0,ease:Phaser.Math.Easing.Expo.Out},scale:{start:1*e,end:0,ease:Phaser.Math.Easing.Expo.Out},lifespan:{min:800,max:1500}})},n.run=function(e,t,n,a,i){this.stop(),this.reset(),this.emitZone.setSize(a,i),this.emitZone.setPosition(t-a/2,n-i/2),this.emitter.setQuantity(e),this.emitter.start()},n.stop=function(){var e,t;null==(e=this.emitter)||e.killAll(),null==(t=this.emitter)||t.stop()},n.reset=function(){this.createEmitters()},t}(Phaser.GameObjects.Particles.ParticleEmitterManager);t.Z=c},567:function(e,t){"use strict";t.Z={LAYOUT_UPDATE:"layout-update"}},566:function(e,t,n){"use strict";n.d(t,{Z:function(){return o}});var a=n(0),i=n(540),r=function(e){function t(t,n,a){var i;return(i=e.call(this,t,0,0,n,a)||this).setOrigin(0,0),i}return(0,a.Z)(t,e),t}(Phaser.GameObjects.Zone),s=n(567),o=function(e){function t(){var t;return(t=e.call(this,{visible:!1})||this).unsubscribeList=void 0,t.gameZone=void 0,t.background=void 0,t.handleOpenScene=function(){t.logPageviewOnOpen(),t.logEventOpen()},t.handleResize=function(){if(t.background&&t.gameZone){var e=t.world.getResizeEventData(),n=e.width,a=e.height;t.gameZone.setSize(n,a),t.background.setPosition(n/2,a/2),t.background.setDisplaySize(n,a),t.events.emit(s.Z.LAYOUT_UPDATE)}},t.removeStateChange=function(){t.unsubscribeList.forEach((function(e){return e()}))},t}(0,a.Z)(t,e);var n=t.prototype;return n.create=function(){this.events.on("wake",this.handleOpenScene),this.events.on("resume",this.handleOpenScene),this.events.on("create",this.handleOpenScene),this.scaleGame(),this.createGameZone()},n.scaleGame=function(){var e=this.getCamera("main"),t=this.world.getZoomRatio(),n=this.world.getWorldSize(),a=n.width,i=n.height;e.setZoom(t),e.centerOn(a/2,i/2)},n.createGameZone=function(){var e=this.world.getWorldSize(),t=e.width,n=e.height;this.gameZone=new r(this,t,n)},n.getCamera=function(e){return"main"===e?this.cameras.main:this.cameras.getCamera(e)},n.createMask=function(e){void 0===e&&(e=1),this.getCamera("main").setBackgroundColor("rgba(0, 0, 0, "+e+")")},n.fontSize=function(e){var t=this.getModSizeByLang();return Math.round(e/t)},n.getModSizeByLang=function(){switch(this.lang.getCurrentLanguage()){case"en":return 1.01;case"ru":case"es":case"id":case"it":return 1.15;case"de":return 1.25;default:return 1.1;case"ja":return 1.12;case"hi":return 1;case"fr":return 1.2;case"zh":return 1.04}},n.createBackground=function(e,t,n,a){var i=this;this.background?(this.background.setTexture(e),t&&this.background.setFrame(t)):(this.background=this.make.image({key:e,frame:t}),this.game.events.on("world-resize",(function(){i.createBackground(i.background.texture.key,i.background.frame.name,i.background.alpha,i.background.tint)}))),this.background.setName(e);var r=this.gameZone,s=r.displayWidth,o=r.displayHeight;this.background.setDisplaySize(s,o);var c=this.world.getScreenWidth(),u=this.world.getScreenHeight(),l=this.world.getPixelRatioForCanvas(),h=this.world.getZoomRatio(),d=window.game.world.getPhysicPixels(c,l/h),p=window.game.world.getPhysicPixels(u,l/h);console.log({width:d,height:p,worldWidth:this.gameZone.displayWidth}),this.background.setSize(d,p),this.background.setDisplaySize(d,p),GameCore.Utils.Valid.isNumber(n)&&this.background.setAlpha(n),GameCore.Utils.Valid.isNumber(a)&&this.background.setTint(a),Phaser.Display.Align.In.Center(this.background,this.gameZone)},n.handleStateChange=function(e){var t=this;this.unsubscribeList=[],e.forEach((function(e){var n=e.selector,a=e.callback,i=t.storage.watch(n,a);t.unsubscribeList.push(i)})),this.events.once("sleep",this.removeStateChange),this.events.once("destroy",this.removeStateChange),this.events.once("shutdown",this.removeStateChange)},n.logPageviewOnOpen=function(){this.analytics.pageview(this.scene.key)},n.logEventOpen=function(){this.analytics.event(i._.SCREEN_OPEN,{screen_name:this.getSceneName()})},n.getSceneName=function(){return GameCore.Utils.String.toUpperCamelCase(this.scene.key.toLowerCase())},t}(Phaser.Scene)},552:function(e,t,n){"use strict";var a=n(41),i=n.n(a),r=n(28),s=n.n(r),o=n(15),c=n.n(o),u=n(32),l=n.n(u),h=n(34),d=n.n(h),p=n(39),f=n.n(p);function g(e,t){var n="undefined"!==typeof d()&&f()(e)||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){var n;if(!e)return;if("string"===typeof e)return m(e,t);var a=c()(n=Object.prototype.toString.call(e)).call(n,8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return l()(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return m(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var a=0;return function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function m(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}var v=function(e){var t=document.getElementById("app-mask");t&&(t.style.background="rgb(20 20 22 / "+e+")")},y=function(){function e(){}return e.registerObject=function(t){var n;i()(n=e.objects).call(n,t)||e.objects.push(t)},e.removeObject=function(t){var n;e.objects=s()(n=e.objects).call(n,(function(e){return e!==t}))},e.openScreen=function(t,n){e.openingScreens.push({screen:t,grayscale:n})},e.closeScreen=function(t){var n;e.openingScreens=s()(n=e.openingScreens).call(n,(function(e){return e.screen!==t}))},e.resetBgMask=function(){e.currentAlpha=0,v(0)},e.updateGrayScale=function(){var t=e.openingScreens,n=!1;t.length>0&&(n=t[t.length-1].grayscale),n!=this.previousGrayscale&&(this.previousGrayscale=n,this.setGrayScaleForAppBg(n))},e.setGrayScaleForAppBg=function(e){var t=document.getElementById("app-bg");t&&(t.style.filter=e?"grayscale(0.8)":"")},e.updateAppBg=function(e){var t=document.getElementById("app-bg");if(t){var n=new Image;n.src=e,n.onload=function(){t.style.backgroundImage="url("+e+")"}}},e}();y.objects=[],y.openingScreens=[],y.currentAlpha=0,y.updateBgMask=function(){for(var e,t=1,n=g(y.objects);!(e=n()).done;){var a=e.value,i=a.scene;i&&i.scene.isActive(i.scene.key)&&(a.parentContainer?a.parentContainer.visible&&a.visible&&(t*=1-a.alpha*a.parentContainer.alpha):a.visible&&(t*=1-a.alpha))}var r=1-t;y.currentAlpha!=r&&(y.currentAlpha=r,v(r))},y.previousGrayscale=!1,t.Z=y},578:function(e,t,n){"use strict";var a=n(538),i=n(0),r=n(557),s=n(26),o=n(572),c=n(559),u=n(553),l=n(575),h=n(540),d=u.Z.HOW_TO_PLAY,p=u.Z.GAMEPLAY_DEFAULT,f=[{description:"",frame:"how_to_play_1"},{description:"",frame:"how_to_play_2"},{description:"",frame:"how_to_play_3"},{description:"",frame:"how_to_play_4"}],g=function(e){function t(t){var n;return(n=e.call(this,t)||this).bg=void 0,n.stepBtnText=void 0,n.currentStep=void 0,n.stepContainers=void 0,n.handleNextStep=function(){n.currentStep==f.length-1?(n.scene.screen.close(c.o4.HOW_TO_PLAY_SCREEN),n.scene.analytics.event(h._.TUTORIAL_COMPLETE)):(n.selectStep(n.currentStep+1),n.scene.analytics.event(h._.TUTORIAL_STEP,{step:n.currentStep}))},n.currentStep=0,n.createBackground(),n.writeDescription(),n.createContent(),n.createGetStartedButton(),n.createCloseButton(),n.selectStep(0),t.add.existing((0,a.Z)(n)),n}(0,i.Z)(t,e);var n=t.prototype;return n.selectStep=function(e){e>=f.length&&(e=f.length-1),e==f.length-1?this.stepBtnText.setText(this.scene.lang.Text.done):this.stepBtnText.setText(this.scene.lang.Text.next),this.stepContainers.forEach((function(e){return e.kill()})),this.stepContainers[e].revive(),this.currentStep=e},n.writeDescription=function(){var e=this;f.forEach((function(t){switch(t.frame){case"how_to_play_1":t.description=e.scene.lang.Text.firstTutor;break;case"how_to_play_2":t.description=e.scene.lang.Text.secondTutor;break;case"how_to_play_3":t.description=e.scene.lang.Text.thirdTutor;break;case"how_to_play_4":t.description=e.scene.lang.Text.fourthTutor}}))},n.createBackground=function(){var e=new s.Z(this.scene,0,0,340,460,20,16579837),t=this.scene.add.line(0,0,0,0,e.width,0,3774208);t.setLineWidth(.5),Phaser.Display.Align.In.TopCenter(t,e,0,-60),this.add([e,t]),this.bg=e,this.setSize(e.width,e.height)},n.createContent=function(){var e=this.scene.make.bitmapText({font:r.Z.BOLD.KEY,size:this.scene.fontSize(20),text:this.scene.lang.Text.howToPlay,origin:{x:.5,y:.5}});e.setTint(1907997),this.add(e),Phaser.Display.Align.In.TopCenter(e,this,0,-20),this.stepContainers=[];for(var t=0;t<f.length;t++){var n=f[t],a=n.description,i=n.frame,s=this.createStepContainer(a,i);this.stepContainers.push(s),Phaser.Display.Align.In.TopCenter(s,this,0,-75)}this.add(this.stepContainers)},n.createStepContainer=function(e,t){var n=this.scene.add.container();n.setSize(300,270);var a=this.scene.make.bitmapText({font:r.Z.PRIMARY.KEY,size:this.scene.fontSize(14),text:e,origin:{x:.5,y:.5}});a.setTint(1907997),a.setCenterAlign();var i=this.scene.add.image(0,0,d.KEY,t);return i.setWorldSize(300,200),n.add([a,i]),Phaser.Display.Align.In.TopCenter(a,n),Phaser.Display.Align.In.BottomCenter(i,n,0,20),n},n.createGetStartedButton=function(){var e=new l.Z(this.scene,192,40,16,3774208);e.setName("GetStated"),e.onClick=this.handleNextStep;var t=this.scene.make.bitmapText({font:r.Z.BOLD.KEY,size:this.scene.fontSize(16),text:this.scene.lang.Text.next,origin:{x:.5,y:.5}});t.setTint(16579837),e.add([t]),Phaser.Display.Align.In.BottomCenter(e,this.bg,0,-20),this.add([e]),this.stepBtnText=t},n.createCloseButton=function(){var e=this,t=new o.Z(this.scene,40,40);t.setName("Close"),t.onClick=function(){e.scene.screen.close(c.o4.HOW_TO_PLAY_SCREEN)};var n=this.scene.add.image(0,0,p.KEY,"ic_close");n.setWorldSize(30,30),n.setTint(8750210),t.add(n),Phaser.Display.Align.In.TopRight(t,this.bg,-6,-9),this.add([t])},t}(Phaser.GameObjects.Container);t.Z=g},563:function(e,t,n){"use strict";var a=n(44),i=n.n(a),r=n(7),s=n.n(r),o=n(557),c=function(){function e(){}return e.enable=function(){this.enabled=!0,this.createDebugText()},e.createDebugText=function(){var e=window.game.globalScene,t=e.add.bitmapText(0,0,o.Z.PRIMARY.KEY,"Global Debug",8);t.setOrigin(0,0),t.setLeftAlign(),t.setPosition(0,30),e.add.existing(t),this.debugText=t},e.updateValue=function(e,t,n){var a,r;if(this.enabled){var o=i()(a=this.debugs).call(a,(function(t){return t.key===e}));o?o.value=n:this.debugs.push({key:e,name:t,value:n});var c=s()(r=this.debugs).call(r,(function(e){return e.name+": "+e.value})).join("\n");this.debugText.setText(c)}},e}();c.enabled=!1,c.debugs=[],c.debugText=void 0,t.Z=c},558:function(e,t,n){"use strict";n.d(t,{Z:function(){return G}});var a=n(12),i=n(0),r=n(6),s=n.n(r),o=n(564),c=n(565),u=n(553),l=n(555),h=n(559),d=n(556),p=(0,n(550).P1)([function(e){return e.scene.currentSceneKey}],(function(e){return e})),f=n(537),g=n(566),m=n(538),v=n(557),y=n(554),b=u.Z.DEFAULT,A=b.KEY,S=b.FRAME,E=function(e){function t(t){var n;return(n=e.call(this,t,0,0)||this).fps=0,n.fpsString="FPS: %1",n.fpsText=void 0,n.background=void 0,n.lastUpdate=void 0,n.update=function(e){if(!(e-n.lastUpdate<800)){n.lastUpdate=e;var t=Math.floor(n.scene.game.loop.actualFps);n.setFps(t)}},n.createFps(),n.setDepth(y.Z.DEBUG),n.scene.add.existing((0,m.Z)(n)),n.scene.events.on(Phaser.Scenes.Events.UPDATE,n.update),n}(0,i.Z)(t,e);var n=t.prototype;return n.setFps=function(e){this.fps=e;var t=Phaser.Utils.String.Format(this.fpsString,[e]);this.fpsText.setText(t)},n.createFps=function(){this.background=this.scene.make.image({key:A,frame:S.BLANK}),this.background.setName("BG"),this.background.setTint(13801480),this.background.setWorldSize(45,25),this.fpsText=this.scene.make.bitmapText({size:this.scene.fontSize(14),text:this.fpsString,font:v.Z.PRIMARY.KEY,origin:{x:.5,y:.5}}),this.fpsText.setName("FPS Meter"),Phaser.Display.Align.In.Center(this.fpsText,this.background),this.add([this.background,this.fpsText]),this.setFps(0)},t}(Phaser.GameObjects.Container),w=E,T=function(e){function t(t){var n;if((n=e.call(this,t,0,0)||this).performance=void 0,n.memory=0,n.maxMemoryLimit=void 0,n.maxPercentThreshold=void 0,n.normalColor=3459162,n.warningColor=16768343,n.alarmColor=15812200,n.memoryString="Memory: %1MB / %2MB",n.memoryText=void 0,n.lastUpdate=void 0,n.update=function(e){if(!(e-n.lastUpdate<1e3)){n.lastUpdate=e;var t=n.performance.memory.usedJSHeapSize,a=1048576*n.maxMemoryLimit,i=Math.round(t/1048576);n.setMemory(i),n.memoryText.setTint(n.normalColor),t>n.maxPercentThreshold/100*a&&n.memoryText.setTint(n.warningColor),t>a&&n.memoryText.setTint(n.alarmColor)}},n.performance=window.performance,n.createMemory(),n.setDepth(y.Z.DEBUG),n.scene.add.existing((0,m.Z)(n)),!n.isSupport())return n.memoryText.setText("Memory: not supported!"),(0,m.Z)(n);var a=n.performance.memory.jsHeapSizeLimit;return n.maxPercentThreshold=90,n.setMaxMemory(a/1048576),n.scene.events.on(Phaser.Scenes.Events.UPDATE,n.update),n}(0,i.Z)(t,e);var n=t.prototype;return n.isSupport=function(){var e;return this.performance&&!(null==(e=this.performance)||!e.memory)},n.setMaxMemory=function(e){this.maxMemoryLimit=Math.round(e)},n.setMemory=function(e){this.memory=e;var t=Phaser.Utils.String.Format(this.memoryString,[e,this.maxMemoryLimit]);this.memoryText.setText(t)},n.createMemory=function(){this.memoryText=this.scene.make.bitmapText({size:this.scene.fontSize(14),text:this.memoryString,font:v.Z.PRIMARY.KEY,depth:2e3}),this.memoryText.setName("Memory Meter"),this.add(this.memoryText),this.setMemory(0)},t}(Phaser.GameObjects.Container),I=T,C=n(562),k={targets:[],duration:300,ease:n(561).Z,props:{scale:{from:1.2,to:1}}},x=function(e){function t(t){return e.call(this,k,t)||this}return(0,i.Z)(t,e),t}(C.Z),P=n(560),_=function(e){function t(t,n,a,i){var r;return(r=e.call(this,t,n,a,i)||this).loadingIcon=void 0,r.messageText=void 0,r.openAnimation=void 0,r.closeTimerEvent=void 0,r.addLoadingIcon(),r.addMessageText(),r.setDepth(h.Ks.PRIORITY),r.background.setAlpha(.5),r.background.setTint(1315862),r}(0,i.Z)(t,e);var n=t.prototype;return n.open=function(t){var n,a=this;e.prototype.open.call(this,t);var i=this.getData(["message","duration","loading"]),r=i[0],s=void 0===r?"":r,o=i[1],c=void 0===o?0:o,u=i[2],l=void 0!==u&&u;this.setMessage(s),this.showLoading(l),null==(n=this.closeTimerEvent)||n.remove(),c>0&&(this.closeTimerEvent=this.scene.time.addEvent({delay:c,callback:function(){a.visible&&a.scene.screen.close(a.name)}})),this.runOpenAnimation()},n.addLoadingIcon=function(){this.loadingIcon=new P.Z(this.scene),this.add(this.loadingIcon),Phaser.Display.Align.In.Center(this.loadingIcon,this.zone)},n.addMessageText=function(){this.messageText=this.scene.make.bitmapText({size:this.scene.fontSize(15),font:v.Z.PRIMARY.KEY,origin:{x:.5,y:.5}}),this.messageText.setCenterAlign(),this.add(this.messageText)},n.setMessage=function(e){this.messageText.setText(e)},n.showLoading=function(e){this.loadingIcon.setVisible(e);var t=!1===e?10:40;Phaser.Display.Align.In.Center(this.messageText,this.zone,0,t)},n.runOpenAnimation=function(){var e,t;null==(e=this.openAnimation)||e.stop(),null==(t=this.openAnimation)||t.remove(),this.openAnimation=new x({targets:[this.messageText,this.loadingIcon],props:{scale:{getStart:function(e){return e.scale-.3},getEnd:function(e){return e.scale}}}}),this.openAnimation.play()},n.logPageviewOnOpen=function(){},n.logPageviewOnClose=function(){},t}(GameCore.Screen),O=_,R=n(552),D=n(563),L=u.Z.DEFAULT,B=L.KEY,N=L.FRAME,M=function(e){function t(){for(var t,n,a=arguments.length,i=new Array(a),r=0;r<a;r++)i[r]=arguments[r];return(n=e.call.apply(e,s()(t=[this]).call(t,i))||this).mask=void 0,n.fadeInAnim=void 0,n.fadeOutAnim=void 0,n.fpsMeter=void 0,n.memoryMeter=void 0,n.switchScene=function(e){n.currentScene.switch(e)},n.emitGameEventStartScene=function(e){var t=e.scene.key;console.info("%cScene start","color: #D27D2D",t),n.updateSceneState(),n.runMaskFadeOutAnimation(),n.updateActiveSceneKey(t),n.game.events.emit(Phaser.Scenes.Events.START,t),(0,f.sw)("scene","Start scene: "+t)},n.emitGameEventSleepScene=function(e){var t=e.scene.scene.key;console.info("%cScene sleep","color: #D27D2D",t),t!==l.C.LOAD_SCENE&&(n.runMaskFadeInAnimation(),n.game.events.emit(Phaser.Scenes.Events.SLEEP,t))},n.emitGameEventWakeScene=function(e){var t=e.scene.scene.key;console.info("%cScene wake","color: #D27D2D",t),t!==l.C.LOAD_SCENE&&(n.updateSceneState(),n.runMaskFadeOutAnimation(),n.updateActiveSceneKey(t),n.game.events.emit(Phaser.Scenes.Events.WAKE,t))},n.emitGameEventPauseScene=function(e){var t=e.scene.scene.key;console.info("%cScene pause","color: #D27D2D",t),n.game.events.emit(Phaser.Scenes.Events.PAUSE,t)},n.emitGameEventResumeScene=function(e){var t=e.scene.key;console.info("%cScene resume","color: #D27D2D",t),n.game.events.emit(Phaser.Scenes.Events.RESUME,t)},n.emitGameEventShutdownScene=function(e){var t=e.scene.scene.key;console.info("%cScene shutdown","color: #D27D2D",t),n.game.events.emit(Phaser.Scenes.Events.SHUTDOWN,t)},n}(0,i.Z)(t,e);var n=t.prototype;return n.init=function(){this.listenScenesEvents(),this.game.globalScene=this},n.setup=function(){this.scaleGame(),this.addMask(),this.addNotifyScreen(),this.addFPS(),this.addMemory(),this.addGlobalDebug(),this.showBackground()},n.addNotifyScreen=function(){var e=this.screen.add(h.o4.NOTIFY_SCREEN,O);Phaser.Display.Align.In.Center(e,this.gameZone)},n.addMask=function(){this.mask=this.make.image({key:B,frame:N.BLANK});var e=this.gameZone,t=e.width,n=e.height;this.mask.setAlpha(0),this.mask.setOrigin(0,0),this.mask.setTint(859421),this.mask.setWorldSize(t,n)},n.addFPS=function(){GameCore.Configs.Statistics.ShowFPSInGame&&(this.fpsMeter=new w(this),Phaser.Display.Align.In.TopLeft(this.fpsMeter,this.gameZone,-20,-10))},n.addMemory=function(){GameCore.Configs.Statistics.ShowMemoryInGame&&(this.memoryMeter=new I(this),Phaser.Display.Align.In.TopLeft(this.memoryMeter,this.gameZone,-45,-3))},n.addGlobalDebug=function(){GameCore.Configs.GlobalDebugEnabled&&D.Z.enable()},n.updateSceneState=function(){this.setGlobalSceneOnTop()},n.setGlobalSceneOnTop=function(){this.scene.bringToTop(this)},n.runMaskFadeInAnimation=function(){var e,t;this.mask&&GameCore.Configs.EnableEffectSceneTransition&&(null==(e=this.fadeInAnim)||e.remove(),null==(t=this.fadeOutAnim)||t.remove(),this.fadeInAnim=new o.Z({targets:[this.mask],duration:400,ease:Phaser.Math.Easing.Cubic.In,props:{alpha:{start:0,from:0,to:.6}}}),this.mask.setAlpha(0),this.fadeInAnim.play())},n.runMaskFadeOutAnimation=function(){var e,t;this.mask&&GameCore.Configs.EnableEffectSceneTransition&&(null==(e=this.fadeInAnim)||e.remove(),null==(t=this.fadeOutAnim)||t.remove(),this.fadeOutAnim=new c.Z({targets:[this.mask],duration:400,ease:Phaser.Math.Easing.Cubic.Out,props:{alpha:{start:.6,from:.6,to:0}}}),this.mask.setAlpha(1),this.fadeOutAnim.play())},n.listenScenesEvents=function(){var e=this;this.scene.manager.getScenes(!1).forEach((function(t){t.events.on(Phaser.Scenes.Events.CREATE,e.emitGameEventStartScene),t.events.on(Phaser.Scenes.Events.SLEEP,e.emitGameEventSleepScene),t.events.on(Phaser.Scenes.Events.WAKE,e.emitGameEventWakeScene),t.events.on(Phaser.Scenes.Events.PAUSE,e.emitGameEventPauseScene),t.events.on(Phaser.Scenes.Events.RESUME,e.emitGameEventResumeScene),t.events.on(Phaser.Scenes.Events.SHUTDOWN,e.emitGameEventShutdownScene)})),this.events.on(l.K.SWITCH,this.switchScene),this.events.on(Phaser.Scenes.Events.RENDER,R.Z.updateBgMask)},n.getActiveScene=function(){return this.scene.manager.getScenes(!0)[0]},n.getCurrentScene=function(){return this.currentScene},n.updateActiveSceneKey=function(e){e!==l.C.GLOBAL_SCENE&&this.storage.dispatch((0,d.I)(e))},n.logEventOpen=function(){},n.logPageviewOnOpen=function(){},n.showBackground=function(){var e=this.theme.getCurrentThemeConfig().backgroundKey;this.createBackground(e);var t=this.theme.getCurrentThemeResources();R.Z.updateAppBg(t.backgroundFile)},n.hideBackground=function(){this.background.kill()},(0,a.Z)(t,[{key:"currentScene",get:function(){var e=this.storage.getState(),t=p(e);return(t?this.scene.manager.getScene(t):this.getActiveScene()).scene}}]),t}(g.Z),G=M},469:function(e,t,n){"use strict";var a=n(1),i=n(2),r=n.n(i),s=n(5),o=n.n(s),c=function(){var e=document,t=e.body,n=e.documentElement,a=t.clientHeight,i=n.clientHeight;return Math.max(i,a)||0},u=function(){var e=document,t=e.body,n=e.documentElement,a=t.clientWidth,i=n.clientWidth;return Math.max(i,a)||0},l=function(){return new(o())((function(e){!function t(){var n=u(),a=c();n>0&&a>0?e():requestAnimationFrame(t)}()}))},h=n(537),d=n(120),p=n(8),f=n(0),g=n(539),m=0,v=0,y=function(){function e(e){this.game=void 0,this.progressFbTimeEvent=void 0,this.game=e}var t=e.prototype;return t.loadingProgressFbBootScene=function(){var e=this,t=100;v=30;!function n(){t<=0?clearTimeout(e.progressFbTimeEvent):e.progressFbTimeEvent=setTimeout((function(){e.game.facebook.setLoadingProgress(Math.round(v)),v+=30/t,t--,n()}),50)}()},t.finishLoadingProgressFbBootScene=function(){clearTimeout(this.progressFbTimeEvent)},t.loadingProgressFbLoadScene=function(){var e=this;(!v||v<30)&&(v=60),m=v;!function t(){e.progressFbTimeEvent=setTimeout((function(){e.game.facebook.setLoadingProgress(Math.round(v)),v+=.1,t()}),50)}()},t.onProgress=function(e){var t=100-v,n=Math.round(e*t+v);n>m&&clearTimeout(this.progressFbTimeEvent),this.game.facebook.setLoadingProgress(n)},e}(),b=function(){function e(e){this.game=void 0,this.game=e}var t=e.prototype;return t.addCropByViewport=function(){var e=this;[Phaser.GameObjects.Image,Phaser.GameObjects.RenderTexture].forEach((function(t){t.prototype.setCropByViewport=e.setCropByViewport}))},t.addKillRevive=function(){var e=this;[Phaser.GameObjects.Container,Phaser.GameObjects.Image,Phaser.GameObjects.Sprite,Phaser.GameObjects.Graphics,Phaser.GameObjects.Text,Phaser.GameObjects.BitmapText,Phaser.GameObjects.Particles.ParticleEmitter,Phaser.GameObjects.Particles.ParticleEmitterManager,Phaser.GameObjects.Rectangle,Phaser.GameObjects.Shape].forEach((function(t){t.prototype.kill=e.kill,t.prototype.revive=e.revive}))},t.addKillReviveGroup=function(){Phaser.GameObjects.Group.prototype.killGroup=this.killGroup,Phaser.GameObjects.Group.prototype.reviveGroup=this.reviveGroup},t.addSetWorldSize=function(){var e=this;[Phaser.GameObjects.Image,Phaser.GameObjects.Sprite].forEach((function(t){t.prototype.setWorldSize=e.setWorldSize}))},t.addSetWorldSizeForContainer=function(){var e=this;[Phaser.GameObjects.Container].forEach((function(t){t.prototype.setWorldSize=e.setWorldSizeForContainer}))},t.addGetWorldPosition=function(){var e=this;[Phaser.GameObjects.Container,Phaser.GameObjects.Image,Phaser.GameObjects.Sprite,Phaser.GameObjects.Graphics,Phaser.GameObjects.Text,Phaser.GameObjects.BitmapText].forEach((function(t){t.prototype.getWorldPosition=e.getWorldPosition}))},t.addDrawDebugBox=function(){var e=this;[Phaser.GameObjects.Container,Phaser.GameObjects.Image,Phaser.GameObjects.Sprite,Phaser.GameObjects.Graphics,Phaser.GameObjects.Text,Phaser.GameObjects.BitmapText,Phaser.GameObjects.Zone].forEach((function(t){t.prototype.drawDebugBox=e.drawDebugBox}))},t.addHighQuality=function(){var e=this;[Phaser.GameObjects.Text].forEach((function(t){t.prototype.setHighQuality=e.setHighQuality}))},t.addSetLineHeightForBitmapText=function(){Phaser.GameObjects.BitmapText.prototype.setLineHeight=function(e){this.lineHeight=e,this.updateDisplayOrigin()}},t.kill=function(){this.setActive(!1),this.setVisible(!1)},t.revive=function(){this.setActive(!0),this.setVisible(!0)},t.killGroup=function(){this.getChildren().forEach((function(e){e.setActive(!1),e.setVisible(!1)}))},t.reviveGroup=function(){this.getChildren().forEach((function(e){e.setActive(!0),e.setVisible(!0)}))},t.setCropByViewport=function(e){var t=e.x,n=e.y,a=e.width,i=e.height,r=this.scaleX,s=this.scaleY,o=this.displayWidth,c=this.displayHeight,u=this.getWorldPosition(),l=u.x,h=u.y,d=t-a/2,p=l-o/2,f=t+a/2,g=l+o/2,m=n-i/2,v=h-c/2,y=n+i/2,b=h+c/2,A={x:0,y:0,width:this.width/r,height:this.height/s};p<d&&(A.x=(d-p)/r),g>f&&(A.width-=A.x+(g-f)/r),v<m&&(A.y=(m-v)/s),b>y&&(A.height-=A.y+(b-y)/s),this.setCrop(A.x,A.y,A.width,A.height)},t.setWorldSize=function(e,t){this.setSize(e,t),this.setDisplaySize(e,t)},t.setWorldSizeForContainer=function(e,t,n){void 0===n&&(n=2),this.setSize(e*n,t*n),this.setDisplaySize(e,t)},t.getWorldPosition=function(){var e=this.getWorldTransformMatrix().decomposeMatrix();return{x:e.translateX,y:e.translateY}},t.drawDebugBox=function(e,t){var n=this.x,a=this.y,i=this.width,r=this.height,s=this.depth,o=this.originX,c=this.originY,u=this.scene.add.rectangle(n,a,i,r,e,t);u.setName("Debug Box"),u.setDepth(s);var l=GameCore.Utils.Valid.isNumber;return l(o)&&l(c)&&u.setOrigin(o,c),u},t.setHighQuality=function(){return this.renderer instanceof Phaser.Renderer.WebGL.WebGLRenderer?this.setResolution(2*this.scene.game.world.getZoomRatio()):this},t.customBitmapText=function(){Phaser.GameObjects.BitmapText.prototype.setRoundPixels=function(e){this.roundPixels=e}},e}(),A=b,S=n(15),E=n.n(S),w=n(32),T=n.n(w),I=n(34),C=n.n(I),k=n(39),x=n.n(k),P=n(6),_=n.n(P),O=n(306),R=n.n(O),D=n(44),L=n.n(D),B=n(38),N=n.n(B),M=[{url:"./assets/images/others/mock1.jpg",title:"Buy lottery tickets on behalf",description:"\ud83d\udca5\ud83d\udca5\ud83d\udca5 Place an order for lottery tickets from 3 regions!!! \u2705 Fast - Convenient - Safe \u2705 Diverse products \u2705 Payment...",buttonName:"Discover more"},{url:"./assets/images/others/mock2.jpg",title:"SYSTEM-WIDE SALE UP TO 50%",description:'\ud83d\udd25 \ud835\uddec\ud835\uddd8\ud835\uddd4\ud835\udde5 \ud835\uddd8\ud835\udde1\ud835\uddd7 \ud835\udde6\ud835\uddd4\ud835\udddf\ud835\uddd8 | \ud835\udde8\ud835\udde3 \ud835\udde7\ud835\udde2 \ud835\udff1\ud835\udfec% "BIG PARTY" AUTHENTIC SPORTSWEAR SHOCKINGLY REDUCED PRICES! \ud83c\udf81 From...',buttonName:"Discover more"},{url:"./assets/images/others/mock3.jpg",title:"Register now",description:"Play safe, play fun, play 9club!",buttonName:"Register"}],G=function(){function e(){}return e.loadBannerAdAsync=function(){var e=(0,a.Z)(r().mark((function e(){var t,n,a,i,s,c,u,l,h,d;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.currentIdx=(this.currentIdx+1)%M.length,this.hideBannerAdAsync(),e.next=4,new(o())((function(e){setTimeout((function(){e()}),2e3)}));case 4:if(!document.getElementById("mock-banner-ads")){e.next=16;break}return t=M[this.currentIdx],n=t.url,a=t.buttonName,i=t.title,s=t.description,(c=document.getElementById("banner-content-text1"))&&(c.innerHTML=i),(u=document.getElementById("banner-content-text2"))&&(u.innerHTML=s),(l=document.getElementById("mock-banner-ads-avatar"))&&(l.style.background="url("+n+") center center/contain no-repeat"),(h=document.getElementById("banner-content-button"))&&(h.innerHTML=a),e.abrupt("return");case 16:d=GameCore.Utils.Device.isDesktop(),50,d?this.createDesktopBannerAd(50):this.createMobileBannerAd(50);case 19:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),e.createDesktopBannerAd=function(e){var t=this,n=M[this.currentIdx],a=n.url,i=n.buttonName,r=n.title,s=n.description,o=document.createElement("div");o.id="mock-banner-ads",o.style.width="100%",o.style.height=e+"px",o.style.bottom="var(--sab)",o.style.display="flex",o.style.position="absolute",o.style.opacity=this.currentOpacity;var c=document.createElement("div");c.id="mock-banner-ads-display-area",c.style.width="100%",c.style.height="100%",c.style.background="#323436 center center/auto no-repeat",c.style.borderRadius="10px",c.style.marginLeft="4px",c.style.marginRight="4px",c.style.display="block",c.style.alignContent="center";var u=document.createElement("div");u.id="mock-banner-ads-content",u.style.boxSizing="border-box",u.style.flexDirection="row",u.style.display="flex",u.style.position="relative",u.style.alignItems="stretch",u.style.paddingLeft="4px",u.style.paddingRight="4px",u.style.justifyContent="space-between";var l=document.createElement("div");l.id="mock-banner-ads-avatar",l.style.marginLeft="10px",l.style.width=e+"px",l.style.minWidth=e+"px",l.style.height=e+"px",l.style.display="flex",l.style.flexDirection="column",l.style.position="relative",l.style.background="url("+a+") center center/contain no-repeat",l.style.borderRadius="50%";var h=document.createElement("div");h.id="mock-banner-ads-right-content",h.style.width="100%",h.style.paddingLeft="10px",h.style.display="flex",h.style.flexDirection="row",h.style.position="relative",h.style.color="#E4E6EB",h.style.wordWrap="break-word",h.style.textAlign="left",h.style.alignContent="center",h.style.alignItems="center",h.style.fontSize="12px",h.style.fontFamily="Helvetica, Arial, sans-serif, Roboto, Helvetica, Arial, sans-serif",l.style.boxSizing="border-box";var d=document.createElement("div");d.style.flexDirection="column",d.style.display="flex",d.style.justifyContent="center",d.style.flexShrink="1",d.style.flexGrow="1",d.style.flexBasis="0",d.style.boxSizing="border-box",d.style.minWidth="0",d.innerHTML="\n            <div id='banner-content-text1' style=\"font-weight:600;line-height: 1.3333;font-size: .9375rem;text-overflow: ellipsis;-webkit-line-clamp: 1;overflow: hidden;display: -webkit-box;-webkit-box-orient: vertical;\">"+r+"</div>\n            <div id='banner-content-text2' style=\"font-weight:400;line-height: 1.2308;font-size: .8125rem;text-overflow: ellipsis;-webkit-line-clamp: 2;overflow: hidden;display: -webkit-box;-webkit-box-orient: vertical;\">"+s+"</div>";var p=document.createElement("button");p.id="banner-content-button",p.type="button",p.style.width="120px",p.style.height=e-20+"px",p.style.fontWeight="600",p.style.backgroundColor="#3963fc",p.style.border="none",p.style.color="white",p.style.borderRadius="5px",p.style.textAlign="center",p.style.display="inline-block",p.style.cursor="pointer",p.style.marginRight="10px",p.style.marginLeft="10px",p.style.flexShrink="1",p.style.boxSizing="border-box",p.style.paddingRight="2px",p.style.paddingLeft="2px",p.innerHTML=i,p.onclick=function(){"0.2"===t.currentOpacity?o.style.opacity="1":o.style.opacity="0.2",t.currentOpacity=o.style.opacity};var f=document.createElement("button");f.type="button",f.style.width=e-20+"px",f.style.height=e-20+"px",f.style.fontWeight="1000",f.style.backgroundColor="#5a5c5c",f.style.border="none",f.style.color="white",f.style.borderRadius="50%",f.style.textAlign="center",f.style.display="inline-block",f.style.cursor="pointer",f.style.marginRight="10px",f.style.marginLeft="10px",f.style.flexShrink="0",f.style.boxSizing="border-box",f.style.paddingRight="2px",f.style.paddingLeft="2px",f.innerHTML="...",document.body.appendChild(o),o.appendChild(c),c.appendChild(u),u.appendChild(l),u.appendChild(h),h.appendChild(d),h.appendChild(p),h.appendChild(f)},e.createMobileBannerAd=function(e){var t=this,n=M[this.currentIdx],a=n.url,i=n.buttonName,r=n.title,s=n.description,o=document.createElement("div");o.id="mock-banner-ads",o.style.width="100%",o.style.height=e+"px",o.style.bottom="var(--sab)",o.style.display="block",o.style.position="absolute",o.style.opacity=this.currentOpacity;var c=document.createElement("div");c.id="mock-banner-ads-display-area",c.style.background="#ffffff center center/auto no-repeat",c.style.display="block",c.style.alignContent="center";var u=document.createElement("div");u.id="mock-banner-ads-content",u.style.boxSizing="border-box",u.style.flexDirection="row",u.style.display="flex",u.style.position="relative",u.style.alignItems="stretch",u.style.justifyContent="space-between";var l=document.createElement("div");l.id="mock-banner-ads-avatar",l.style.width=e+"px",l.style.minWidth=e+"px",l.style.height=e+"px",l.style.display="flex",l.style.flexDirection="column",l.style.position="relative",l.style.background="url("+a+") center center/contain no-repeat";var h=document.createElement("div");h.id="mock-banner-ads-right-content",h.style.width="100%",h.style.paddingLeft="10px",h.style.display="flex",h.style.flexDirection="row",h.style.position="relative",h.style.color="#000",h.style.wordWrap="break-word",h.style.textAlign="left",h.style.alignContent="center",h.style.alignItems="center",h.style.fontSize="12px",h.style.fontFamily="Helvetica, Arial, sans-serif, Roboto, Helvetica, Arial, sans-serif",l.style.boxSizing="border-box";var d=document.createElement("div");d.style.flexDirection="column",d.style.display="flex",d.style.justifyContent="center",d.style.flexShrink="1",d.style.flexGrow="1",d.style.flexBasis="0",d.style.boxSizing="border-box",d.style.minWidth="0",d.innerHTML="\n            <div id='banner-content-text1' style=\"font-weight:600;line-height: 1.3333;font-size: .9375rem;text-overflow: ellipsis;-webkit-line-clamp: 1;overflow: hidden;display: -webkit-box;-webkit-box-orient: vertical;\">"+r+"</div>\n            <div id='banner-content-text2' style=\"font-weight:400;line-height: 1.2308;font-size: .8125rem;text-overflow: ellipsis;-webkit-line-clamp: 1;overflow: hidden;display: -webkit-box;-webkit-box-orient: vertical;\">"+s+"</div>";var p=document.createElement("button");p.id="banner-content-button",p.type="button",p.style.height="100%",p.style.fontWeight="600",p.style.backgroundColor="#3963fc",p.style.border="none",p.style.color="white",p.style.textAlign="center",p.style.display="inline-block",p.style.cursor="pointer",p.style.marginLeft="10px",p.style.flexShrink="1",p.style.boxSizing="border-box",p.style.paddingRight="7px",p.style.paddingLeft="7px",p.innerHTML=i,p.onclick=function(){"0.2"===t.currentOpacity?o.style.opacity="1":o.style.opacity="0.2",t.currentOpacity=o.style.opacity},document.body.appendChild(o),o.appendChild(c),c.appendChild(u),u.appendChild(l),u.appendChild(h),h.appendChild(d),h.appendChild(p)},e.hideBannerAdAsync=function(){var e=(0,a.Z)(r().mark((function e(){var t;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=document.getElementById("mock-banner-ads")){e.next=3;break}return e.abrupt("return");case 3:t.remove();case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),e}();G.currentIdx=-1,G.currentOpacity="1";var F={LOADED:"loaded",DISPLAYED:"displayed"},Z=function(e){return e.IDLE="idle",e.LOADING="loading",e.FILLED="filled",e.SHOWING="showing",e}(Z||{}),U=Z,W=function(e){return e.REWARDED="rewarded",e.PRE_ROLL="pre-roll",e.INTERSTITIAL="interstitial",e.BANNER="banner",e}(W||{}),H=W,z=n(29),Y=function(e){function t(t,n){var a;return(a=e.call(this,n)||this).code=void 0,a.code=t,a.message=n,a}return(0,f.Z)(t,e),t}((0,z.Z)(Error)),K=function(e){this.type=void 0,this.status=void 0,this.type=e,this.status=U.IDLE};function V(e,t){var n="undefined"!==typeof C()&&x()(e)||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){var n;if(!e)return;if("string"===typeof e)return j(e,t);var a=E()(n=Object.prototype.toString.call(e)).call(n,8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return T()(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return j(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var a=0;return function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function j(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}GameCore.Ads={Types:H,Status:U,Events:F,AdError:Y,AdInstance:K};var X=function(e){function t(){for(var t,n,a=arguments.length,i=new Array(a),r=0;r<a;r++)i[r]=arguments[r];return(n=e.call.apply(e,_()(t=[this]).call(t,i))||this).events=void 0,n.enabled=void 0,n.config=void 0,n.lastInterAdShownTime=void 0,n.lastInterAdLoadedTime=void 0,n.lastRewardAdShownTime=void 0,n.interstitial=void 0,n.rewardedVideo=void 0,n.preRoll=void 0,n.fallbackInterstitial=void 0,n.fallbackRewardedVideo=void 0,n.fallbackPreRoll=void 0,n.safeAreaBottom=void 0,n.showingBannerAd=void 0,n.reloadBannerAdIntervals=void 0,n.bannerAdConfigs=void 0,n.isHaveBannerAdOptions=void 0,n.isFallbackReady=void 0,n.isFallbackInitialized=void 0,n.isBannerAdsShown=void 0,n.adInProcessFlag=void 0,n}(0,f.Z)(t,e);var i=t.prototype;return i.init=function(){this.events=new Phaser.Events.EventEmitter,this.safeAreaBottom=0,this.lastInterAdShownTime=0,this.lastInterAdLoadedTime=0,this.lastRewardAdShownTime=0,this.showingBannerAd={},this.reloadBannerAdIntervals={},this.bannerAdConfigs=[],this.isHaveBannerAdOptions=!0,this.isFallbackReady=!1,this.isFallbackInitialized=!1,this.isBannerAdsShown=!1,this.adInProcessFlag=!1},i.calculateSafeAreaBottom=function(){try{if(!this.config.calculateSafeAreaBottom)return;this.safeAreaBottom=R()(getComputedStyle(document.documentElement).getPropertyValue("--sab")),isNaN(this.safeAreaBottom)&&(this.safeAreaBottom=0)}catch(e){this.safeAreaBottom=0}},i.configure=function(e,t){this.enabled=t.enabled,this.config=t,this.setAdInstance(e),this.setBannerAdConfigStatus(),this.calculateSafeAreaBottom()},i.setBannerAdConfigStatus=function(){for(var e,t=this.config.bannerAdOptions,n=GameCore.Utils.Device.isDesktop(),a=V(t);!(e=a()).done;){var i=e.value,r=i.platform,s="ALL"==r||"DESKTOP"==r&&n||"MOBILE"==r&&!n;this.bannerAdConfigs.push({config:i,canShow:s}),s&&(this.isHaveBannerAdOptions=!0)}},i.setAdInstance=function(e){var t=this.config,n=t.rewardAdOptions,a=t.interstitialAdOptions;this.interstitial=new e(H.INTERSTITIAL,a.pID),this.rewardedVideo=new e(H.REWARDED,n.pID),this.preRoll=new e(H.PRE_ROLL,a.pID)},i.setFallbackAdInstance=function(e){var t=this.config,n=t.rewardAdOptions,a=t.interstitialAdOptions;this.fallbackInterstitial=new e(H.INTERSTITIAL,a.pID),this.fallbackRewardedVideo=new e(H.REWARDED,n.pID),this.fallbackPreRoll=new e(H.PRE_ROLL,a.pID)},i.preloadInterstitialAdAsync=function(){var e=(0,a.Z)(r().mark((function e(){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.preloadAdAsync(H.INTERSTITIAL);case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),i.showInterstitialAdAsync=function(){var e=(0,a.Z)(r().mark((function e(){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.canbeShowInterstitialAdByTime()){e.next=2;break}throw new Y("INTERSTITIAL_AD_CAN_NOT_SHOW","Can't show interstitial ad");case 2:return e.next=4,this.showAdAsync(H.INTERSTITIAL);case 4:this.lastInterAdShownTime=window.performance.now()/1e3;case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),i.preloadPreRollAdAsync=function(){var e=(0,a.Z)(r().mark((function e(){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.preloadAdAsync(H.PRE_ROLL);case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),i.showPreRollAdAsync=function(){var e=(0,a.Z)(r().mark((function e(){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.showAdAsync(H.PRE_ROLL);case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),i.preloadRewardedVideoAsync=function(){var e=(0,a.Z)(r().mark((function e(){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.preloadAdAsync(H.REWARDED);case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),i.showRewardedVideoAsync=function(){var e=(0,a.Z)(r().mark((function e(){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.canbeShowRewardAd()){e.next=2;break}throw new Y("REWARDED_VIDEO_CAN_NOT_SHOW","Can't show rewarded video");case 2:return e.next=4,this.showAdAsync(H.REWARDED);case 4:this.lastRewardAdShownTime=window.performance.now()/1e3;case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),i.getRemainingRewardTime=function(){var e=window.performance.now()/1e3,t=this.config.rewardAdOptions.secondsBetweenAds,n=e-this.lastRewardAdShownTime;return n<t?t-n:0},i.preloadAdAsync=function(){var e=(0,a.Z)(r().mark((function e(t){var n,a,i,s,c;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.enabled){e.next=2;break}throw new Y("ADS_NOT_ENABLED","Ads is't enabled");case 2:return n=this.preloadFallbackAdService(t),a=this.preloadMainAdService(t),e.next=6,o().all([n,a]);case 6:if(i=e.sent,s=i[0],!0!==(c=i[1])){e.next=11;break}return e.abrupt("return");case 11:if(this.isFallbackReady){e.next=13;break}throw c;case 13:if(!0!==s){e.next=15;break}return e.abrupt("return");case 15:throw s;case 16:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),i.preloadMainAdService=function(e){var t=this;return new(o())((function(n){var a=!1;t.preloadAdInstanceAsync(e,!1).then((function(){a=!0})).catch((function(e){t.isFallbackReady||t.initFallbackAdsService().catch((function(){t.isFallbackReady=!1})),a=e})).finally((function(){n(a)}))}))},i.preloadFallbackAdService=function(e){var t=this;return new(o())((function(n){var a=!1;t.isFallbackReady||n(new Y("FALLBACK_NOT_READY","Fallback ads not ready")),t.preloadAdInstanceAsync(e,!0).then((function(){a=!0})).catch((function(e){a=e})).finally((function(){n(a)}))}))},i.preloadAdInstanceAsync=function(){var e=(0,a.Z)(r().mark((function e(t,n){var a,i=this;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===n&&(n=!1),null!==(a=this.getAdInstanceByType(t,n))){e.next=4;break}throw new Y("AD_INSTANCE_NOT_INITIATED","The instance ads not yet initiated");case 4:if(a.getStatus()!==U.LOADING){e.next=8;break}return e.next=7,new(o())((function(e){i.events.once(F.LOADED,e)}));case 7:return e.abrupt("return");case 8:return t!==H.INTERSTITIAL&&t!==H.PRE_ROLL||(this.lastInterAdLoadedTime=window.performance.now()/1e3),e.next=11,a.loadAsync();case 11:this.events.emit(F.LOADED,t);case 12:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}(),i.showAdAsync=function(){var e=(0,a.Z)(r().mark((function e(t){var n,a;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.enabled){e.next=2;break}throw new Y("ADS_NOT_ENABLED","Ads is't enabled");case 2:return e.next=4,this.showMainAdService(t);case 4:if(!0!==(n=e.sent)){e.next=7;break}return e.abrupt("return");case 7:if(!this.isUserCancelledAdError(n)&&this.isAdFallbackReadyToShow(t)){e.next=9;break}throw n;case 9:return e.next=11,this.showFallbackAdService(t);case 11:if(!0!==(a=e.sent)){e.next=14;break}return e.abrupt("return");case 14:throw a;case 15:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),i.showMainAdService=function(e){var t=this;return new(o())((function(n){var a=!1;t.showAdInstanceAsync(e,!1).then((function(){a=!0})).catch((function(e){a=e,t.isUserCancelledAdError(e)||t.isFallbackReady||t.initFallbackAdsService().catch((function(){t.isFallbackReady=!1}))})).finally((function(){n(a)}))}))},i.showFallbackAdService=function(e){var t=this;return new(o())((function(n){var a=!1;t.isFallbackReady||n(new Y("FALLBACK_NOT_READY","Fallback ads not ready")),t.showAdInstanceAsync(e,!0).then((function(){a=!0})).catch((function(e){a=e})).finally((function(){n(a)}))}))},i.showAdInstanceAsync=function(){var e=(0,a.Z)(r().mark((function e(t,n){var a;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===n&&(n=!1),null!==(a=this.getAdInstanceByType(t,n))){e.next=4;break}throw new Y("AD_INSTANCE_NOT_INITIATED","The instance ads not yet initiated");case 4:return t!==H.INTERSTITIAL&&t!==H.PRE_ROLL||(this.lastInterAdShownTime=window.performance.now()/1e3),t===H.REWARDED&&(this.lastRewardAdShownTime=window.performance.now()/1e3,this.config.enableRewardVideoResetInterstitial&&(this.lastInterAdShownTime=this.lastRewardAdShownTime)),e.next=8,a.showAsync();case 8:this.events.emit(F.DISPLAYED,t);case 9:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}(),i.getAdStatus=function(e){var t=this.getAdInstanceByType(e);return t?t.getStatus():null},i.getAdInstanceByType=function(e,t){if(void 0===t&&(t=!1),t)switch(e){case H.INTERSTITIAL:return this.fallbackInterstitial;case H.REWARDED:return this.fallbackRewardedVideo;case H.PRE_ROLL:return this.fallbackPreRoll;default:return null}switch(e){case H.INTERSTITIAL:return this.interstitial;case H.REWARDED:return this.rewardedVideo;case H.PRE_ROLL:return this.preRoll;default:return null}},i.canbeShowInterstitialAd=function(){var e=this.canbeLoadInterstitialAdByTime();return e&&(e=this.canbeShowInterstitialAdByTime()),e},i.canbeLoadInterstitialAdByTime=function(){var e=window.performance.now()/1e3,t=this.config.interstitialAdOptions,n=t.secondsFirstTime,a=t.secondsBetweenAds,i=Math.floor(e-this.lastInterAdLoadedTime);return this.lastInterAdLoadedTime>0?i>=a:i>=n},i.canbeShowInterstitialAdByTime=function(){var e=window.performance.now()/1e3,t=this.config.interstitialAdOptions,n=t.secondsFirstTime,a=t.secondsBetweenAds,i=Math.floor(e-this.lastInterAdShownTime);return this.lastInterAdShownTime>0?i>=a:i>=n},i.canbeShowRewardAd=function(){var e=window.performance.now()/1e3,t=this.config.rewardAdOptions,n=t.secondsFirstTime,a=t.secondsBetweenAds,i=Math.floor(e-this.lastRewardAdShownTime);return this.lastRewardAdShownTime>0?i>=a:i>=n},i.getEnabledBannerAds=function(){if(!this.isHaveBannerAdOptions)return[];for(var e,t=[],n=V(this.bannerAdConfigs);!(e=n()).done;){var a=e.value,i=a.config;a.canShow&&t.push(i)}return t},i.disableBannerAds=function(){this.config.bannerAdOptions=[]},i.showBannerAdAsync=function(){var e=(0,a.Z)(r().mark((function e(){var t;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.enabled){e.next=2;break}return e.abrupt("return");case 2:if(!this.isBannerAdsShown){e.next=5;break}return e.next=5,this.hideBannerAdAsync();case 5:if(0!==(t=this.getEnabledBannerAds()).length){e.next=8;break}return e.abrupt("return");case 8:return this.reloadBannerAdIntervals=this.reloadBannerAdIntervals||{},this.loadBannerAdAsync("",t),e.abrupt("return");case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),i.loadBannerAdAsync=function(){var e=(0,a.Z)(r().mark((function e(t,n){var a,i,s=this;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.enabled){e.next=2;break}return e.abrupt("return");case 2:if(a=this.getSceneName(),i=GameCore.Configs.Ads,e.prev=4,"msgames"===i.AdService){e.next=7;break}throw new Y("BANNER_ADS_NOT_SUPPORTED","Banner ads not supported");case 7:if(!i.Mockup.Enable){e.next=12;break}return e.next=10,G.loadBannerAdAsync();case 10:e.next=14;break;case 12:return e.next=14,GameSDK.loadBannerAdAsync(t,n);case 14:this.isBannerAdsShown=!0,n.forEach((function(e){var t=e.placementId,n=e.position,r=e.bannerWidth,o=e.bannerHeight;if(t&&""!==t){var c=n+":"+r+"x"+o;s.showingBannerAd[t]=!0,window.game.analytics.showBannerAd(c,a,i.AdService)}})),e.next=23;break;case 18:e.prev=18,e.t0=e.catch(4),console.log(e.t0),this.isBannerAdsShown=!1,n.forEach((function(e){var t=e.position+":"+e.bannerWidth+"x"+e.bannerHeight,n={type:H.BANNER,placement:a,bannerPosition:t,adService:i.AdService};window.game.analytics.showAdFail(n)}));case 23:case"end":return e.stop()}}),e,this,[[4,18]])})));return function(t,n){return e.apply(this,arguments)}}(),i.hideBannerAdAsync=function(){var e=(0,a.Z)(r().mark((function e(){var t;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.enabled){e.next=2;break}return e.abrupt("return");case 2:if(this.isHaveBannerAdOptions){e.next=4;break}return e.abrupt("return");case 4:if(this.isBannerAdsShown=!1,e.prev=5,"msgames"===(t=GameCore.Configs.Ads).AdService){e.next=9;break}throw new Y("BANNER_ADS_NOT_SUPPORTED","Banner ads not supported");case 9:if(!t.Mockup.Enable){e.next=14;break}return e.next=12,G.hideBannerAdAsync();case 12:e.next=16;break;case 14:return e.next=16,GameSDK.hideBannerAdAsync();case 16:e.next=21;break;case 18:e.prev=18,e.t0=e.catch(5),console.log(e.t0);case 21:case"end":return e.stop()}}),e,this,[[5,18]])})));return function(){return e.apply(this,arguments)}}(),i.getBannerHeight=function(){return 0},i.getBottomBannerConfig=function(){var e=this.getEnabledBannerAds();return 0===e.length?null:L()(e).call(e,(function(e){return"bottom"===e.position}))||null},i.getSceneName=function(){try{var e=self.game.globalScene;return this.globalSceneTypeCheck(e)?e.getCurrentScene().scene.getSceneName():"unknown"}catch(t){return"unknown"}},i.globalSceneTypeCheck=function(e){return"getCurrentScene"in e&&"function"===typeof e.getCurrentScene},i.initFallbackAdsService=function(){var e=(0,a.Z)(r().mark((function e(){var t,n;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=GameCore.Configs.Ads,!this.isFallbackInitialized){e.next=3;break}return e.abrupt("return");case 3:return this.isFallbackInitialized=!0,e.next=6,this.getFallbackAdServiceInstance();case 6:n=e.sent,"none"!==t.FallbackService&&null!==n&&(this.isFallbackReady=!0,this.setFallbackAdInstance(n));case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),i.getFallbackAdServiceInstance=function(){var e=(0,a.Z)(r().mark((function e(){var t,a,i;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=GameCore.Configs.Ads.FallbackService,e.next=3,Promise.resolve().then(n.bind(n,525));case 3:if(a=e.sent.default,"google"!==t){e.next=16;break}return e.prev=5,e.next=8,this.initGoogleAdInstanceAsync();case 8:if(null===(i=e.sent)){e.next=11;break}return e.abrupt("return",i);case 11:e.next=16;break;case 13:e.prev=13,e.t0=e.catch(5),console.error("Google Ads failed to load, fallback to GameAdInstance",e.t0);case 16:return e.abrupt("return",a);case 17:case"end":return e.stop()}}),e,this,[[5,13]])})));return function(){return e.apply(this,arguments)}}(),i.initGoogleAdInstanceAsync=function(){var e=(0,a.Z)(r().mark((function e(){var t,a,i,s,o,c,u,l,h;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=GameCore.Configs.Ads.AdServiceConfigs.Google){e.next=3;break}return e.abrupt("return",null);case 3:return a=t.DataAdChannel,i=t.DataAdClient,s=t.DataAdHost,o=t.DataAdBreakTest,c=t.DataAdFrequencyHint,u=t.MaxScriptLoadRetryCount,e.next=6,Promise.resolve().then(n.bind(n,526));case 6:if("loaded"!==(l=e.sent.default).initStatus){e.next=9;break}return e.abrupt("return",l);case 9:return h={dataAdClient:i,dataAdChannel:a,dataAdHost:s,dataAdBreakTest:o,dataAdFrequencyHint:c,maxScriptLoadRetryCount:u},e.prev=10,l.setGame(this.game),e.next=14,l.initGoogleAdsAsync(h);case 14:return e.abrupt("return",l);case 17:return e.prev=17,e.t0=e.catch(10),console.error("Google Ads failed to load, fallback to GameAdInstance",e.t0),e.abrupt("return",null);case 21:case"end":return e.stop()}}),e,this,[[10,17]])})));return function(){return e.apply(this,arguments)}}(),i.isUserCancelledAdError=function(e){if(e instanceof Y&&"USER_INPUT"===e.code)return!0;try{var t=JSON.parse(N()(e));return"code"in t&&"USER_INPUT"===t.code}catch(e){return!1}},i.isAdFallbackReadyToShow=function(e){if(!this.isFallbackReady)return!1;var t=this.getAdInstanceByType(e,!0);return!!t&&t.getStatus()===U.FILLED},i.setAdInProcess=function(e){this.adInProcessFlag=e},i.isAdInProcess=function(){return this.adInProcessFlag},t}(Phaser.Plugins.BasePlugin),q=X,J=function(){function e(e,t,n){this.name=void 0,this.color=void 0,this.selfLog=void 0,this.options=void 0,this.name=e,this.color=n||"#FFF",this.options=t,this.selfLog=!0,console.info("%c"+this.name+": init","color: "+this.color,this.options)}var t=e.prototype;return t.event=function(e,t,n){this.processEvent(e,t,n),this.selfLog&&console.info("%c"+this.name+": event","color: "+this.color,{name:e,value:n,payload:t})},t.pageview=function(e){var t=this.getPageByKey(e);this.processPageView(t),this.selfLog&&console.info("%c"+this.name+": pageview","color: "+this.color,{page:t})},t.setTrafficSource=function(e){this.processTrafficSource(e),this.selfLog&&console.info("%c"+this.name+": set traffic source","color: "+this.color,{source:e})},t.levelStart=function(e,t,n){this.processLevelStart(e,t,n),this.selfLog&&console.info("%c"+this.name+": level start","color: "+this.color,{level:e,score:t,levelName:n})},t.levelFail=function(e,t,n){this.processLevelFail(e,t,n),this.selfLog&&console.info("%c"+this.name+": level fail","color: "+this.color,{level:e,score:t,levelName:n})},t.levelRescue=function(e,t,n){this.processLevelRescue(e,t,n),this.selfLog&&console.info("%c"+this.name+": level rescue","color: "+this.color,{level:e,score:t,levelName:n})},t.levelComplete=function(e,t,n){this.processLevelComplete(e,t,n),this.selfLog&&console.info("%c"+this.name+": level complete","color: "+this.color,{level:e,score:t,levelName:n})},t.loadPreRollAd=function(e,t){this.processLoadPreRollAd(e,t),this.selfLog&&console.info("%c"+this.name+": load pre-roll ad","color: "+this.color,{placement:e})},t.showPreRollAd=function(e,t){this.processShowPreRollAd(e,t),this.selfLog&&console.info("%c"+this.name+": show pre-roll","color: "+this.color,{placement:e})},t.loadInterstitialAd=function(e,t){this.processLoadInterstitialAd(e,t),this.selfLog&&console.info("%c"+this.name+": load interstitial ad","color: "+this.color,{placement:e})},t.showInterstitialAd=function(e,t){this.processShowInterstitialAd(e,t),this.selfLog&&console.info("%c"+this.name+": show interstitial ad","color: "+this.color,{placement:e})},t.loadRewardedVideoAd=function(e,t){this.processLoadRewardedVideoAd(e,t),this.selfLog&&console.info("%c"+this.name+": load rewarded video ad","color: "+this.color,{placement:e})},t.showRewardedVideoAd=function(e,t){this.processShowRewardedVideoAd(e,t),this.selfLog&&console.info("%c"+this.name+": show rewarded video ad","color: "+this.color,{placement:e})},t.showBannerAd=function(e,t,n){this.processShowBannerAd(e,t,n),this.selfLog&&console.info("%c"+this.name+": show banner ad","color: "+this.color,{placement:t})},t.receiveReward=function(e){this.processReceiveReward(e),this.selfLog&&console.info("%c"+this.name+": receive reward","color: "+this.color,{placement:e})},t.loadAdFail=function(e){this.processLoadAdFail(e),this.selfLog&&console.info("%c"+this.name+": load ad fail","color: "+this.color,e)},t.showAdFail=function(e){this.processShowAdFail(e),this.selfLog&&console.info("%c"+this.name+": show ad fail","color: "+this.color,e)},t.getPageByKey=function(e){var t=e.replace(/_/g,"-");return t=t.toLowerCase()},t.processLevelStart=function(e,t,n){},t.processLevelFail=function(e,t,n){},t.processLevelRescue=function(e,t,n){},t.processLevelComplete=function(e,t,n){},t.processLoadInterstitialAd=function(e,t){},t.processShowInterstitialAd=function(e,t){},t.processLoadPreRollAd=function(e,t){},t.processShowPreRollAd=function(e,t){},t.processLoadRewardedVideoAd=function(e,t){},t.processShowRewardedVideoAd=function(e,t){},t.processShowBannerAd=function(e,t,n){},t.processReceiveReward=function(e){},t.processLoadAdFail=function(e){},t.processShowAdFail=function(e){},e}();GameCore.Analytics={BaseAnalytics:J};var Q=function(e){function t(){for(var t,n,a=arguments.length,i=new Array(a),r=0;r<a;r++)i[r]=arguments[r];return(n=e.call.apply(e,_()(t=[this]).call(t,i))||this).analytics=void 0,n.pageview=function(e){n.isActive()&&n.analytics.forEach((function(t){t.pageview(e)}))},n}(0,f.Z)(t,e);var n=t.prototype;return n.init=function(){this.analytics=[]},n.add=function(e){this.analytics.push(e)},n.setTrafficSource=function(e){this.isActive()&&this.analytics.forEach((function(t){t.setTrafficSource(e)}))},n.event=function(e,t,n){this.isActive()&&this.analytics.forEach((function(a){a.event(e,t,n)}))},n.levelStart=function(e,t,n){this.isActive()&&this.analytics.forEach((function(a){a.levelStart(e,t,n)}))},n.levelRescue=function(e,t,n){this.isActive()&&this.analytics.forEach((function(a){a.levelRescue(e,t,n)}))},n.levelFail=function(e,t,n){this.isActive()&&this.analytics.forEach((function(a){a.levelFail(e,t,n)}))},n.levelComplete=function(e,t,n){this.isActive()&&this.analytics.forEach((function(a){a.levelComplete(e,t,n)}))},n.loadPreRollAd=function(e,t){this.isActive()&&this.analytics.forEach((function(n){n.loadPreRollAd(e,t)}))},n.showPreRollAd=function(e,t){this.isActive()&&this.analytics.forEach((function(n){n.showPreRollAd(e,t)}))},n.loadInterstitialAd=function(e,t){this.isActive()&&this.analytics.forEach((function(n){n.loadInterstitialAd(e,t)}))},n.showInterstitialAd=function(e,t){this.isActive()&&this.analytics.forEach((function(n){n.showInterstitialAd(e,t)}))},n.loadRewardedVideoAd=function(e,t){this.isActive()&&this.analytics.forEach((function(n){n.loadRewardedVideoAd(e,t)}))},n.showRewardedVideoAd=function(e,t){this.isActive()&&this.analytics.forEach((function(n){n.showRewardedVideoAd(e,t)}))},n.showBannerAd=function(e,t,n){this.isActive()&&this.analytics.forEach((function(a){a.showBannerAd(e,t,n)}))},n.receiveReward=function(e){this.isActive()&&this.analytics.forEach((function(t){t.receiveReward(e)}))},n.loadAdFail=function(e){this.isActive()&&this.analytics.forEach((function(t){t.loadAdFail(e)}))},n.showAdFail=function(e){this.isActive()&&this.analytics.forEach((function(t){t.showAdFail(e)}))},n.isActive=function(){return this.analytics.length>=1},t}(Phaser.Plugins.BasePlugin),$=Q,ee=function(){function e(e,t){var n=this;this.name=void 0,this.game=void 0,this.isSprite=void 0,this.audio=void 0,this.markers=void 0,this.volume=void 0,this.isMusicEnabled=function(){return!!n.game.player.getPlayerSetting("music")},this.isSoundEnabled=function(){return!!n.game.player.getPlayerSetting("sound")},this.name=t,this.game=e,this.markers={},this.isSprite=!1,this.isSprite||(this.audio=this.game.sound.add(this.name))}var t=e.prototype;return t.play=function(e,t){var n,a,i,r=(0,p.Z)({volume:this.volume},t||{});if(r.volume!==this.volume&&(r.volume*=this.volume),!this.isSprite)return(null==(a=this.audio)?void 0:a.seek)>0?void this.audio.resume():void(null==(i=this.audio)||i.play(e,r));this.createMaker(e),null==(n=this.markers[e])||n.play(e,r)},t.pause=function(e){var t,n;this.isSprite?null==(t=this.markers[e])||t.pause():null==(n=this.audio)||n.pause()},t.stop=function(e){var t,n;this.isSprite?null==(t=this.markers[e])||t.stop():null==(n=this.audio)||n.stop()},t.setVolume=function(e){this.volume=e},t.createMaker=function(e){if(!this.markers[e])try{this.markers[e]=this.game.sound.addAudioSprite(this.name)}catch(t){console.warn("createMaker",t)}},e}(),te=n(84),ne=n.n(te),ae=n(24),ie=n.n(ae),re=function(){function e(e){var t=this;this.game=void 0,this.audios=void 0,this.volume=void 0,this.soundKeys=void 0,this.isMusicEnabled=function(){return!!t.game.player.getPlayerSetting("music")},this.isSoundEnabled=function(){return!!t.game.player.getPlayerSetting("sound")},this.game=e,this.audios=new(ne()),this.soundKeys=new(ne())}var t=e.prototype;return t.addSoundKeys=function(e){var t=this;ie()(e).forEach((function(n){var a=e[n];"string"===typeof a&&t.soundKeys.set(n,a)}))},t.clearSoundKeys=function(){this.soundKeys.clear()},t.play=function(e,t){var n=this,a=(0,p.Z)({volume:this.volume},t||{});a.volume!==this.volume&&(a.volume*=this.volume);var i=this.audios.get(e);if(!i&&this.game.cache.audio.exists(e)){var r=this.game.sound.add(e);this.audios.set(e,r),i=r}if(i)i.play(void 0,a);else{var s=this.soundKeys.get(e);if(!s)return console.log(this.soundKeys.get(e),e),void console.warn(e+" not found. Use importSoundEffectKeys from audio plugin to add it.");try{console.log(e,s,"load_sound_plugin"),this.game.globalScene.load.audio(e,s),this.game.globalScene.load.on(Phaser.Loader.Events.FILE_KEY_COMPLETE+"audio-"+e,(function(){console.log(e,s,"finish");var t=n.game.sound.add(e);n.audios.set(e,t),t.play(void 0,a)})),this.game.globalScene.load.start()}catch(o){console.warn(o)}}},t.pauseAll=function(){this.audios.forEach((function(e){e.pause()}))},t.resumeAll=function(){this.audios.forEach((function(e){e.resume()}))},t.stopAll=function(){this.audios.forEach((function(e){e.stop()}))},t.pause=function(e){var t=this.audios.get(e);t&&t.pause()},t.stop=function(e){var t=this.audios.get(e);t&&t.stop()},t.setVolume=function(e){this.volume=e},e}(),se=re,oe=function(e){function t(){for(var t,n,a=arguments.length,i=new Array(a),r=0;r<a;r++)i[r]=arguments[r];return(n=e.call.apply(e,_()(t=[this]).call(t,i))||this).soundManager=void 0,n.musicManager=void 0,n.isMuteAll=void 0,n.initMusic=function(e){n.musicManager=new ee(n.game,e),n.setMusicVolume(1)},n.initSound=function(){n.soundManager=new se(n.game),n.setSoundVolume(1)},n}(0,f.Z)(t,e);var n=t.prototype;return n.importSoundEffectKeys=function(e){},n.playSound=function(e,t){try{if(!this.soundManager||this.isMuteAll)return;if(!this.soundManager.isSoundEnabled())return;this.soundManager.play(e,t)}catch(n){}},n.stopSound=function(e){try{this.soundManager.stop(e)}catch(t){}},n.playMusic=function(e){void 0===e&&(e={});try{if(!this.musicManager||this.isMuteAll)return;if(!this.musicManager.isMusicEnabled())return;this.musicManager.play("",(0,p.Z)({loop:!0,volume:.2},e))}catch(t){}},n.pauseMusic=function(){try{if(!this.musicManager)return;this.musicManager.pause("")}catch(e){}},n.stopMusic=function(){try{if(!this.musicManager)return;this.musicManager.stop("")}catch(e){}},n.pauseAllSounds=function(){try{if(!this.soundManager)return;this.soundManager.pauseAll()}catch(e){}},n.resumeAllSounds=function(){try{if(!this.soundManager)return;this.soundManager.resumeAll()}catch(e){}},n.setSoundVolume=function(e){try{if(!this.soundManager)return;this.soundManager.setVolume(e)}catch(t){console.warn("setSoundVolume",t)}},n.setMusicVolume=function(e){try{if(!this.musicManager)return;this.musicManager.setVolume(e)}catch(t){console.warn("setMusicVolume",t)}},n.muteAll=function(){this.isMuteAll=!0,this.game.sound.mute=!0},n.unmuteAll=function(){this.isMuteAll=!1,this.game.sound.mute=!1},t}(Phaser.Plugins.BasePlugin),ce=oe,ue=n(12),le="AUTH_TOKEN_REQUEST",he="AUTH_TOKEN_RECEIVED",de=function(e){function t(t,n){var a;return(a=e.call(this,t)||this).payload=void 0,a.name="RequestTokenFail",a.message=t||"Request token fail",a.payload=n||{},a}return(0,f.Z)(t,e),t}((0,z.Z)(Error)),pe=n(550),fe=(0,pe.P1)([function(e){return e.auth.token}],(function(e){return e})),ge=(0,pe.P1)([function(e){return e.auth.isRequesting}],(function(e){return e})),me=function(e){return{type:he,payload:{token:e}}},ve=function(e){function t(){return e.apply(this,arguments)||this}(0,f.Z)(t,e);var n=t.prototype;return n.requestToken=function(){var e=(0,a.Z)(r().mark((function e(){var t;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.game.storage,e.next=3,t.dispatch(function(){var e=(0,a.Z)(r().mark((function e(t,n){var a,i,s,o;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,a=window.game.facebook,i=n(),s=fe(i),!ge(i)&&""===s){e.next=7;break}return e.abrupt("return");case 7:return t({type:le,payload:{}}),e.next=10,a.getPlayerToken();case 10:o=e.sent,t(me(o)),e.next=25;break;case 14:if(e.prev=14,e.t0=e.catch(0),!(e.t0 instanceof Object&&GameCore.Utils.Object.hasOwn(e.t0,"code"))){e.next=19;break}if("PENDING_REQUEST"!==e.t0.code){e.next=19;break}return e.abrupt("return");case 19:if(t(me("")),!(e.t0 instanceof Object&&GameCore.Utils.Object.hasOwn(e.t0,"message"))){e.next=24;break}if("string"!==typeof e.t0.message){e.next=24;break}return(0,h.tO)(new Error(e.t0.message)),e.abrupt("return");case 24:(0,h.tO)(new de);case 25:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(t,n){return e.apply(this,arguments)}}());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.getToken=function(){return fe(this.state)},(0,ue.Z)(t,[{key:"state",get:function(){return this.game.storage.getState()}}]),t}(Phaser.Plugins.BasePlugin),ye=ve,be=function(e,t){void 0===t&&(t=1);var n=new Image;n.onload=function(){var n,a,i=(n=this.width*t,a=this.height*t,{string:"+",style:"font-size: 1px; padding: "+Math.floor(a/2)+"px "+Math.floor(n/2)+"px;"});console.info("%c "+i.string,i.style+" background: transparent url("+e+") no-repeat center center; background-size: "+this.width*t+"px "+this.height*t+"px;")},n.src=e},Ae=function(e){function t(){for(var t,n,a=arguments.length,i=new Array(a),r=0;r<a;r++)i[r]=arguments[r];return(n=e.call.apply(e,_()(t=[this]).call(t,i))||this).width=void 0,n.height=void 0,n.renderOptions=void 0,n.canvas=void 0,n}(0,f.Z)(t,e);var n=t.prototype;return n.preload=function(e){var t=this,n=ie()(e);n.length<1||(n.forEach((function(n){t.scene.load.image(n,e[n])})),this.scene.load.start())},n.capture=function(){var e=(0,a.Z)(r().mark((function e(t){var n,a,i;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.width,a=t.height,i=t.renderOptions,this.width=n,this.height=a,this.renderOptions=i,this.createCanvas(),e.next=7,this.loadImages();case 7:return this.drawObjects(),e.abrupt("return",this.snapshotFrame());case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.createCanvas=function(){this.canvas||(this.canvas=this.game.textures.createCanvas("FrameCaptureCanvas")),this.canvas.clear(),this.canvas.setSize(this.width,this.height)},n.loadImages=function(){var e=[];for(var t in this.renderOptions){var n=this.renderOptions[t],a=n.name,i=n.image,r=n.fallbackWithImage;if(i)if(this.scene.textures.get(a).key!==a&&""!==a){var s=this.loadImage(a,i,r);e.push(s)}}return this.scene.load.start(),o().all(e)},n.loadImage=function(e,t,n){var a=this;return this.scene.load.image(e,t),new(o())((function(t,i){var r=Phaser.Loader.Events.FILE_KEY_COMPLETE+"image-"+e,s=Phaser.Loader.Events.FILE_LOAD_ERROR,o=function e(n){a.scene.load.off(r,e),a.scene.load.off(s,c),t()},c=function c(u){if(u.key===e)if(a.scene.load.off(r,o),a.scene.load.off(s,c),n)t();else{var l=new Error("Load image failed");i(l)}};a.scene.load.on(r,o),a.scene.load.on(s,c)}))},n.drawObjects=function(){for(var e in this.renderOptions){var t=this.renderOptions[e];switch(t.type){case"text":this.drawText(t);break;case"image":this.drawImage(t)}}},n.drawText=function(e){var t=this.canvas.context,n=e.x,a=e.y,i=e.font,r=e.text,s=e.fillStyle,o=e.lineWidth,c=e.textAlign;t.font=i+' "Be Vietnam Pro",nunito,-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Oxygen,Ubuntu,Cantarell,"Fira Sans","Droid Sans","Helvetica Neue",sans-serif',t.fillStyle=s||"#ffffff",o&&(t.lineWidth=o),c&&(t.textAlign=c),t.fillText(r,n,a)},n.drawImage=function(e){var t=this.canvas.context,n=e.x,a=e.y,i=e.name,r=e.frame,s=e.width,o=e.height,c=e.fallbackWithImage,u=this.scene.textures.get(i),l=u.getSourceImage(r);"__MISSING"===u.key&&c&&(l=(u=this.scene.textures.get(c)).getSourceImage()),t.drawImage(l,n,a,s,o)},n.snapshotFrame=function(){var e=this.canvas.getCanvas().toDataURL("image/jpeg",.85);return GameCore.Utils.Valid.isDebugger()&&be(e),e},t}(Phaser.Plugins.ScenePlugin),Se=Ae,Ee=n(41),we=n.n(Ee),Te=function(e){function t(t,n,a){var i;return(i=e.call(this)||this).game=void 0,i.options=void 0,i.performance=void 0,i.isRunning=!1,i.checkTimer=void 0,i.fpsHistory=void 0,i.start=function(){if(!i.isRunning){i.isRunning=!0;var e=i.options.checkInterval;i.checkTimer=e,i.fpsHistory=[],i.game.events.on(Phaser.Core.Events.POST_STEP,i.onPostStep)}},i.stop=function(){i.isRunning&&(i.isRunning=!1,i.game.events.off(Phaser.Core.Events.POST_STEP,i.onPostStep),i.options.onlyUpdateWhenSwitchScene&&i.checkFps())},i.onPostStep=function(e,t){if(i.checkTimer-=t,!(i.checkTimer>0)){var n=i.options,a=n.checkInterval,r=n.onlyUpdateWhenSwitchScene;i.checkTimer+=a,i.fpsHistory.push(i.game.loop.actualFps),!1===r&&i.fpsHistory.length>=5&&i.checkFps()}},i.game=t,i.options=a,i.performance=n,i}(0,f.Z)(t,e);var n=t.prototype;return n.checkFps=function(){if(0!==this.fpsHistory.length){var e=this.options.autoUpgradeQuality,t=!1;this.isLowFps()?t=this.performance.downgradeGraphicsQuality():e&&this.isHighFps()&&(t=this.performance.upgradeGraphicsQuality()),t&&(this.fpsHistory=[])}},n.getFpsMedian=function(){return Phaser.Math.Median(this.fpsHistory)},n.isLowFps=function(){return this.getFpsMedian()<this.options.fpsThreshold},n.isHighFps=function(){return this.getFpsMedian()>1.2*this.options.fpsThreshold},t}(Phaser.Events.EventEmitter),Ie=Te,Ce=["pixelRatio","minQuality","maxQuality","qualityAdjustStep","trackingSceneKeys"],ke=function(e){function t(){for(var t,n,a=arguments.length,i=new Array(a),r=0;r<a;r++)i[r]=arguments[r];return(n=e.call.apply(e,_()(t=[this]).call(t,i))||this).fpsTracker=void 0,n.pixelRatio=void 0,n.minQuality=void 0,n.maxQuality=void 0,n.qualityAdjustStep=void 0,n.trackingSceneKeys=[],n.trackingScene=function(e){var t;if(we()(t=n.trackingSceneKeys).call(t,e)){var a=n.game.scene.getScene(e);a.events.once(Phaser.Scenes.Events.UPDATE,n.fpsTracker.start),a.events.once(Phaser.Scenes.Events.SLEEP,n.fpsTracker.stop)}},n}(0,f.Z)(t,e);var n=t.prototype;return n.configure=function(e){var t=e.pixelRatio,n=e.minQuality,a=e.maxQuality,i=e.qualityAdjustStep,r=e.trackingSceneKeys,s=(0,d.Z)(e,Ce);this.pixelRatio=t,this.minQuality=n,this.maxQuality=a,this.qualityAdjustStep=i,this.trackingSceneKeys=r,this.fpsTracker=new Ie(this.game,this,s)},n.active=function(){this.game.events.on(Phaser.Scenes.Events.WAKE,this.trackingScene),this.game.events.on(Phaser.Scenes.Events.START,this.trackingScene)},n.downgradeGraphicsQuality=function(){var e=this.pixelRatio;if(e<=this.minQuality)return!1;var t=+(e-this.qualityAdjustStep).toFixed(2);return!(t<this.minQuality)&&(this.pixelRatio=t,this.game.world.resize(this.pixelRatio),console.warn("\ud83d\udcab Graphics quality was downgraded! ("+e+" -> "+t+")"),!0)},n.upgradeGraphicsQuality=function(){var e=this.pixelRatio;if(e>=this.maxQuality)return!1;var t=+(e+this.qualityAdjustStep).toFixed(2);return!(t>this.maxQuality)&&(this.pixelRatio=t,this.game.world.resize(this.pixelRatio),console.warn("\ud83d\ude80 Graphics quality was upgraded! ("+e+" -> "+t+")"),!0)},t}(Phaser.Plugins.BasePlugin),xe=ke,Pe={sound:!0,music:!0,vibrate:!0,vibrate2:!1,language:"en",theme:GameCore.Configs.DefaultTheme,tapToMove:!0,autoHints:!0,autoComplete:!0,drawMode3:!1,backgroundIdx:0,cardFaceIdx:0,cardBackIdx:0,backgroundDesktopIdx:0,cardFaceDesktopIdx:0,cardBackDesktopIdx:0},_e=n(28),Oe=n.n(_e),Re=n(7),De=n.n(Re),Le=Pe.sound,Be=Pe.music,Ne=Pe.vibrate,Me=Pe.vibrate2,Ge=Pe.language,Fe=Pe.theme,Ze=Pe.tapToMove,Ue=Pe.autoHints,We=Pe.autoComplete,He=Pe.drawMode3,ze=Pe.backgroundIdx,Ye=Pe.cardFaceIdx,Ke=Pe.cardBackIdx,Ve=Pe.backgroundDesktopIdx,je=Pe.cardFaceDesktopIdx,Xe=Pe.cardBackDesktopIdx,qe=function(){function e(e){this.sound=void 0,this.music=void 0,this.vibrate=void 0,this.vibrate2=void 0,this.language=void 0,this.theme=void 0,this.tapToMove=void 0,this.autoHints=void 0,this.autoComplete=void 0,this.drawMode3=void 0,this.backgroundIdx=void 0,this.cardFaceIdx=void 0,this.cardBackIdx=void 0,this.backgroundDesktopIdx=void 0,this.cardFaceDesktopIdx=void 0,this.cardBackDesktopIdx=void 0;var t=e||{},n=t.sound,a=t.music,i=t.vibrate,r=t.vibrate2,s=t.language,o=t.theme,c=t.tapToMove,u=t.autoHints,l=t.autoComplete,h=t.drawMode3,d=t.backgroundIdx,p=t.cardFaceIdx,f=t.cardBackIdx,g=t.backgroundDesktopIdx,m=t.cardFaceDesktopIdx,v=t.cardBackDesktopIdx;this.sound=GameCore.Utils.Valid.isBoolean(n)?n:Le,this.music=GameCore.Utils.Valid.isBoolean(a)?a:Be,this.vibrate=GameCore.Utils.Valid.isBoolean(i)?i:Ne,this.vibrate2=GameCore.Utils.Valid.isBoolean(r)?r:Me,this.language=GameCore.Utils.Valid.isString(s)?s:Ge,this.theme=GameCore.Utils.Valid.isString(o)?o:Fe,this.tapToMove=GameCore.Utils.Valid.isBoolean(c)?c:Ze,this.autoHints=GameCore.Utils.Valid.isBoolean(u)?u:Ue,this.autoComplete=GameCore.Utils.Valid.isBoolean(l)?l:We,this.drawMode3=GameCore.Utils.Valid.isBoolean(h)?h:He,this.backgroundIdx=GameCore.Utils.Valid.isNumber(d)?d:ze,this.cardFaceIdx=GameCore.Utils.Valid.isNumber(p)?p:Ye,this.cardBackIdx=GameCore.Utils.Valid.isNumber(f)?f:Ke,this.backgroundDesktopIdx=GameCore.Utils.Valid.isNumber(g)?g:Ve,this.cardFaceDesktopIdx=GameCore.Utils.Valid.isNumber(m)?m:je,this.cardBackDesktopIdx=GameCore.Utils.Valid.isNumber(v)?v:Xe}return e.prototype.toObject=function(){return{sound:this.sound,music:this.music,vibrate:this.vibrate,vibrate2:this.vibrate2,language:this.language,theme:this.theme,tapToMove:this.tapToMove,autoHints:this.autoHints,autoComplete:this.autoComplete,drawMode3:this.drawMode3,backgroundIdx:this.backgroundIdx,cardFaceIdx:this.cardFaceIdx,cardBackIdx:this.cardBackIdx,backgroundDesktopIdx:this.backgroundDesktopIdx,cardFaceDesktopIdx:this.cardFaceDesktopIdx,cardBackDesktopIdx:this.cardBackDesktopIdx}},e}(),Je=qe,Qe=GameCore.Utils,$e=Qe.Valid,et=Qe.Object,tt=function(){function e(e){this.score=void 0,this.settings=void 0,this.gameData=void 0,this.userGuideDisplays=void 0,this.setupDefaultData(),this.updateScore(e),this.updateSettings(e),this.updateGameData(e),this.updateUserGuideDisplays(e)}var t=e.prototype;return t.setupDefaultData=function(){this.score=0,this.settings=(0,p.Z)({},Pe),this.gameData={coins:0,diamond:0,lastReceiveGift:0,dailyRewarded:{lastRewarded:0,logDays:[]},dailyTasks:{startedTime:0,logTasks:{}},game_stats:{},tournaments:[],match:{}},this.userGuideDisplays=0},t.updateScore=function(e){var t=e.score;!1!==$e.isNumber(t)&&(this.score=t)},t.updateSettings=function(e){var t=e.settings;if(!1!==$e.isObject(t)){var n=new Je(t).toObject();this.settings=n}},t.updateGameData=function(e){var t=e.gameData;if(!1!==$e.isObject(t)){if(et.hasOwn(t,"coins")&&$e.isNumber(t.coins)&&(this.gameData.coins=t.coins),et.hasOwn(t,"diamond")&&$e.isNumber(t.diamond)&&(this.gameData.diamond=t.diamond),et.hasOwn(t,"lastReceiveGift")&&$e.isNumber(t.lastReceiveGift)&&(this.gameData.lastReceiveGift=t.lastReceiveGift),et.hasOwn(t,"dailyRewarded")&&$e.isObject(t.dailyRewarded)){var n=t.dailyRewarded;et.hasOwn(n,"lastRewarded")&&$e.isNumber(n.lastRewarded)&&(this.gameData.dailyRewarded.lastRewarded=n.lastRewarded),et.hasOwn(n,"logDays")&&Array.isArray(n.logDays)&&(this.gameData.dailyRewarded.logDays=n.logDays)}if(et.hasOwn(t,"dailyTasks")&&$e.isObject(t.dailyTasks)){var a=t.dailyTasks;et.hasOwn(a,"startedTime")&&$e.isNumber(a.startedTime)&&(this.gameData.dailyTasks.startedTime=a.startedTime),et.hasOwn(a,"logTasks")&&$e.isObject(a.logTasks)&&(this.gameData.dailyTasks.logTasks=a.logTasks)}this.gameData.game_stats=t.game_stats,this.gameData.tournaments=t.tournaments,this.gameData.match=t.match||this.gameData.match}},t.updateUserGuideDisplays=function(e){var t=e.userGuideDisplays;!1!==$e.isNumber(t)&&(this.userGuideDisplays=t)},t.toObject=function(){return{score:this.score,settings:this.settings,gameData:this.gameData,userGuideDisplays:this.userGuideDisplays}},t.convertToPlayerData=function(){var e=this.gameData,t=e.coins,n=e.diamond,a=e.dailyTasks,i=e.dailyRewarded,r=e.lastReceiveGift,s=e.game_stats,o=e.tournaments,c=e.match;return{score:this.score,settings:this.settings,customFields:{coins:t,diamond:n,dailyTasks:a,dailyRewarded:i,lastReceiveGift:r,game_stats:s,tournaments:o,match:c},userGuideDisplays:this.userGuideDisplays}},t.convertToFacebookData=function(e){var t=e.score,n=e.settings,a=e.customFields,i=e.userGuideDisplays;return this.updateScore({score:t}),this.updateSettings({settings:n}),this.updateGameData({gameData:a}),this.updateUserGuideDisplays({userGuideDisplays:i}),this.toObject()},e}(),nt=tt,at=n(551),it=GameCore.Configs.ApiHost,rt=function(){var e=(0,a.Z)(r().mark((function e(t){var n;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,at.v)("players?platform=ms-games",t,{},it,10);case 2:return n=e.sent,e.abrupt("return",(null==n?void 0:n.data)||{});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),st=function(){var e=(0,a.Z)(r().mark((function e(t){var n;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,at.v)("players/"+t+"/user-guide-displays/inc",{},{},it);case 2:return n=e.sent,e.abrupt("return",(null==n?void 0:n.data)||{});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ot="PLAYER_RECEIVED",ct="PLAYER_DATA_UPDATE",ut="PLAYER_SCORE_UPDATE",lt="PLAYER_PROFILE_UPDATE",ht="PLAYER_SETTING_UPDATE",dt="PLAYER_CONNECTED_PLAYERS_UPDATE",pt=n(543),ft=function(e){function t(t,n){var a;return(a=e.call(this,t)||this).payload=void 0,a.name="PlayerDataNameNotSupport",a.message=t||"The name of player data is not supported",a.payload=n||{},a}return(0,f.Z)(t,e),t}((0,z.Z)(Error)),gt=(0,pe.P1)([function(e){return e.player}],(function(e){return e})),mt=(0,pe.P1)([gt],(function(e){return e.playerId})),vt=(0,pe.P1)([gt],(function(e){return e.ASID})),yt=(0,pe.P1)([function(e){return e.player.data}],(function(e){return e})),bt=((0,pe.P1)([yt],(function(e){return e.settings})),(0,pe.P1)([function(e){return e.player.connectedPlayers}],(function(e){return e}))),At=(0,pe.P1)([bt,function(e,t){return t.limit},function(e,t){return t.offset}],(function(e,t,n){if("number"!==typeof t)return[];if("number"!==typeof n)return[];var a=ie()(e);return E()(a).call(a,n,t+n)||[]})),St=(0,pe.P1)([yt],(function(e){return e.score})),Et=(0,pe.P1)([yt],(function(e){return e.customFields})),wt=(0,pe.P1)([Et],(function(e){return void 0===(null==e?void 0:e.tournaments)?[]:e.tournaments})),Tt=GameCore.Configs,It=Tt.AppId,Ct=Tt.Tutorial,kt=function(e,t){return function(n){var a=e.playerId,i=e.name,r=e.photo,s=e.locale;n({type:ot,payload:{playerId:a,name:i,photo:r,locale:s,data:t||{}}})}},xt=function(e){return{type:dt,payload:{connectedPlayers:e}}},Pt=function(e,t){return function(){var n=(0,a.Z)(r().mark((function n(a,i){var s,o,c;return r().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,a({type:ht,payload:{name:e,value:t}});case 3:s=i(),o=yt(s),c=new nt({}).convertToFacebookData(o),FBInstant.player.setDataAsync(c),n.next=12;break;case 9:n.prev=9,n.t0=n.catch(0),(0,h.tO)(n.t0);case 12:case"end":return n.stop()}}),n,null,[[0,9]])})));return function(e,t){return n.apply(this,arguments)}}()},_t=function(e,t){return function(){var n=(0,a.Z)(r().mark((function n(a,i){var s,o,c,u,l;return r().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,o={customFields:(s={},s[e]=t,s)},n.next=4,a(Rt(o));case 4:c=i(),u=yt(c),l=new nt({}).convertToFacebookData(u),FBInstant.player.setDataAsync(l),n.next=15;break;case 10:if(n.prev=10,n.t0=n.catch(0),!(n.t0 instanceof ft)){n.next=14;break}return n.abrupt("return");case 14:(0,h.tO)(n.t0);case 15:case"end":return n.stop()}}),n,null,[[0,10]])})));return function(e,t){return n.apply(this,arguments)}}()},Ot=function(e){return function(){var t=(0,a.Z)(r().mark((function t(n,a){var i,s,o,c;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,i={customFields:e},t.next=4,n(Rt(i));case 4:s=a(),o=yt(s),c=new nt({}).convertToFacebookData(o),FBInstant.player.setDataAsync(c),t.next=16;break;case 10:if(t.prev=10,t.t0=t.catch(0),console.log("\ud83e\udd16 ? error",t.t0),!(t.t0 instanceof ft)){t.next=15;break}return t.abrupt("return");case 15:(0,h.tO)(t.t0);case 16:case"end":return t.stop()}}),t,null,[[0,10]])})));return function(e,n){return t.apply(this,arguments)}}()},Rt=function(e){return{type:ct,payload:{data:e}}},Dt=function(e){return function(){var t=(0,a.Z)(r().mark((function t(n,a){var i,s,o;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,n({type:ut,payload:{score:e}});case 3:rt({score:e}),i=a(),s=yt(i),o=new nt({}).convertToFacebookData(s),FBInstant.player.setDataAsync(o),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(0),(0,h.tO)(t.t0);case 13:case"end":return t.stop()}}),t,null,[[0,10]])})));return function(e,n){return t.apply(this,arguments)}}()},Lt=function(e){function t(){return e.apply(this,arguments)||this}(0,f.Z)(t,e);var n=t.prototype;return n.incUserGuideDisplays=function(){var e=(0,a.Z)(r().mark((function e(){var t;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.game.storage,e.next=3,t.dispatch(function(){var e=(0,a.Z)(r().mark((function e(t,n){var a,i,s,o;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!Ct.ForceUseTutorial){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,t(Rt({userGuideDisplays:1}));case 5:a=n(),i=mt(a),s=yt(a),o=new nt({}).convertToFacebookData(s),FBInstant.player.setDataAsync(o),st(i),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),(0,h.tO)(e.t0);case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t,n){return e.apply(this,arguments)}}());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.receiveData=function(){var e=(0,a.Z)(r().mark((function e(t,n){var a;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=this.game.storage,e.next=3,a.dispatch(kt(t,n));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}(),n.updateData=function(){var e=(0,a.Z)(r().mark((function e(){var t;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.game.storage,e.next=3,t.dispatch(function(){var e=(0,a.Z)(r().mark((function e(t,n){var a,i,s,o,c,u,l,d;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a=n(),i=gt(a),s=i.playerId,o=i.name,c=i.photo,u=i.locale,e.next=6,FBInstant.player.getASIDAsync();case 6:return l=e.sent,d={appId:It,playerId:s,name:o,photo:c,locale:u,ASID:l},e.next=10,t({type:lt,payload:{profile:d}});case 10:return e.next=12,rt(d);case 12:e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),(0,h.tO)(e.t0);case 17:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(t,n){return e.apply(this,arguments)}}());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.setBestScore=function(){var e=(0,a.Z)(r().mark((function e(t){var n;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.game.storage,e.next=3,n.dispatch(Dt(t));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.setSetting=function(){var e=(0,a.Z)(r().mark((function e(t,n){var a;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=this.game.storage,e.next=3,a.dispatch(Pt(t,n));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}(),n.setCustomData=function(){var e=(0,a.Z)(r().mark((function e(t,n){var a;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=this.game.storage,e.next=3,a.dispatch(_t(t,n));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}(),n.setMultiCustomData=function(){var e=(0,a.Z)(r().mark((function e(t){var n;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.game.storage,e.next=3,n.dispatch(Ot(t));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.requestConnectedPlayers=function(){var e=(0,a.Z)(r().mark((function e(){var t;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.game.storage,e.next=3,t.dispatch(function(){var e=(0,a.Z)(r().mark((function e(t){var n,a,i,s;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,FBInstant.player.getConnectedPlayersAsync().catch((function(){return[]}));case 3:if(a=e.sent,i=function(e){return!!e},s=Oe()(n=De()(a).call(a,(function(e){var t=e.getID(),n=e.getName(),a=e.getPhoto();return t&&n&&a?new pt.Z(t,n,a).toObject():null}))).call(n,i),!(s.length<1)){e.next=8;break}return e.abrupt("return");case 8:t(xt(s)),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),(0,h.tO)(e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t){return e.apply(this,arguments)}}());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.updateConnectedPlayers=function(){var e=(0,a.Z)(r().mark((function e(t){var n;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.game.storage,e.next=3,n.dispatch(xt(t));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.joinTournament=function(){var e=(0,a.Z)(r().mark((function e(t){var n,a,i;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=this.getTournaments(),!L()(a).call(a,(function(e){return e.leaderboardId===t.leaderboardId}))){e.next=3;break}return e.abrupt("return");case 3:return i=_()(n=[]).call(n,a,[t]),e.next=6,this.setMultiCustomData({tournaments:i});case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.getPlayer=function(){return gt(this.state)},n.getPlayerId=function(){return this.getPlayer().playerId},n.getPlayerASID=function(){return vt(this.state)},n.getPlayerData=function(){return this.getPlayer().data},n.getPlayerSetting=function(e){var t=this.getPlayerSettings();return"string"!==typeof e?null:GameCore.Utils.Object.hasOwn(t,e)?t[e]:GameCore.Utils.Object.hasOwn(Pe,e)?Pe[e]:null},n.getPlayerSettings=function(){return this.getPlayerData().settings},n.getPlayerIsNew=function(){return this.getPlayer().isUserNew},n.getDiamond=function(){var e=this.getCustomData("diamond");return GameCore.Utils.Valid.isNumber(e)?e:0},n.getBestScore=function(){return St(this.state)},n.getCustomData=function(e){var t=Et(this.state);return GameCore.Utils.Valid.isObject(t)&&GameCore.Utils.Object.hasOwn(t,e)?t[e]:null},n.getConnectedPlayers=function(){return bt(this.state)},n.getConnectedPlayerIds=function(e,t){return At(this.state,{limit:e,offset:t})},n.getTournaments=function(){return wt(this.state)},(0,ue.Z)(t,[{key:"state",get:function(){return this.game.storage.getState()}}]),t}(Phaser.Plugins.BasePlugin),Bt=Lt,Nt=n(42),Mt=n.n(Nt),Gt=GameCore.Configs.ApiHost,Ft=function(){var e=(0,a.Z)(r().mark((function e(t){var n,a;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=GameCore.Utils.String.params(t),e.next=3,(0,at.U)("players?"+n,{},Gt);case 3:return a=e.sent,e.abrupt("return",(null==a?void 0:a.data)||[]);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Zt="PROFILES_DATA_UPDATE",Ut=(0,pe.P1)([function(e){return e.profile.data}],(function(e){return e})),Wt=(0,pe.P1)([function(e){return e.profile.profileIds}],(function(e){return e})),Ht=GameCore.Configs,zt=Ht.Tournament,Yt=Ht.LeadersBoard,Kt=function(e){return function(){var t=(0,a.Z)(r().mark((function t(n,a){var i,s,o,c,u,l;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,i=a(),s=Wt(i),!((o=GameCore.Utils.Array.difference(e,s)).length<1)){t.next=6;break}return t.abrupt("return");case 6:return t.next=8,Ft({playerIds:o});case 8:c=t.sent,zt.UseMock&&Yt.UseMock&&(c=De()(u=Mt()(l=new Array(o.length)).call(l,null)).call(u,(function(e,t){var n=t+1;return{playerId:"player-0"+n,name:"MPlayer "+n,photo:"./assets/images/others/avatar.jpg",rank:n,score:Math.floor(17*Math.random()*1e3/n)}}))),n({type:Zt,payload:{data:c}}),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(0),(0,h.tO)(t.t0);case 16:case"end":return t.stop()}}),t,null,[[0,13]])})));return function(e,n){return t.apply(this,arguments)}}()},Vt=function(e){function t(){return e.apply(this,arguments)||this}(0,f.Z)(t,e);var n=t.prototype;return n.requestProfiles=function(){var e=(0,a.Z)(r().mark((function e(t){var n;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.game.storage,e.next=3,n.dispatch(Kt(t));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.getProfiles=function(){return Ut(this.state)},(0,ue.Z)(t,[{key:"state",get:function(){return this.game.storage.getState()}}]),t}(Phaser.Plugins.BasePlugin),jt=Vt,Xt=n(25),qt=n.n(Xt),Jt=n(173),Qt=n.n(Jt),$t=["player","match"],en="null",tn=GameCore.Utils,nn=tn.Valid,an=tn.Object,rn=GameCore.Configs.Rollbar,sn=rn.UseMockup,on=rn.FilterError,cn=function(e){function t(){for(var t,n,a=arguments.length,i=new Array(a),r=0;r<a;r++)i[r]=arguments[r];return(n=e.call.apply(e,_()(t=[this]).call(t,i))||this).enable=void 0,n.rollbar=void 0,n.events=[],n.beforeSend=function(e,t,a){sn&&n.showPopupError(a)},n.checkIgnore=function(e,t,a){try{return!!n.isErrorIgnore(t)&&(console.warn(t),!0)}catch(i){return!1}},n.showPopupError=function(e){var t,a,i,r,s,o=null==e||null==(t=e.body)||null==(a=t.trace)?void 0:a.exception;o&&n.events.push(o);var c=(null==e||null==(i=e.body)||null==(r=i.trace)?void 0:r.frames)||[];(s=n.events).push.apply(s,c);var u=document.getElementById("popup-error");u||((u=document.createElement("div")).id="popup-error",document.body.appendChild(u)),u.innerHTML='<div style="color: #fff; display: flex; flex-flow: column; align-items: center; ">\n      <pre id="json" style="overflow: auto; background-color: rgb(195 112 97 / 80%); padding: 10px; max-height: 80vh; max-width: 90vw; border: 5px solid #545454;">'+N()(n.events,null,2)+'</pre>\n      <button id="close" style="cursor: pointer; padding: 10px 20px; border-radius: 100px;">Close</button>\n      </div>',u.style="top: 0px; z-index: 10000; width: 100vw; max-height: 100vh; position: absolute; display: flex; align-items: center; justify-content: center;";var l=document.getElementById("close");l&&(l.onclick=n.closePopup)},n.closePopup=function(){n.events=[{}];var e=document.getElementById("popup-error");null==e||e.remove()},n.isNoneErrorEvent=function(e){if(!e||0===e.length)return!1;if(!e[0].message)return!1;return"Non-Error promise rejection captured with keys: code, message"===e[0].message},n.isErrorIgnore=function(e){if(!e||0===e.length)return!1;var t=!1,a=e[0];return a instanceof Object&&(t=n.isIgnoreByCode(a)||n.isIgnoreByMessage(a)),t},n.isIgnoreByCode=function(e){if(an.hasOwn(e,"code")){var t=e.code,n=on.Codes,a=n.accepted,i=n.ignored;if("string"===typeof t){if(qt()(a).call(a,t)>=0)return!1;if(qt()(i).call(i,t)>=0)return!0}}if(an.hasOwn(e,"name")){var r=e.name,s=on.Codes,o=s.accepted,c=s.ignored;if("string"===typeof r){if(qt()(o).call(o,r)>=0)return!1;if(qt()(c).call(c,r)>=0)return!0}}return!1},n.isIgnoreByMessage=function(e){if(an.hasOwn(e,"message")){var t=e.message,n=on.Messages,a=n.accepted,i=n.ignored;if("string"===typeof t){if(qt()(a).call(a,t)>=0)return!1;if(qt()(i).call(i,t)>=0)return!0}}return!1},n.addExtraState=function(){try{if(!an.hasOwn(window,"game"))return;if(!an.hasOwn(window.game,"storage"))return;if(!an.hasOwn(window.game.storage,"getState"))return;var e=(0,window.game.storage.getState)()||{},t=e.player,a=e.match,i=(0,d.Z)(e,$t);n.rollbar.configure({payload:{player:t,match:a,other:i}})}catch(r){console.warn("%c addExtraState: ","font-size:12px;background-color: #42b983;color:#fff;",r)}},n}(0,f.Z)(t,e);var n=t.prototype;return n.setup=function(){this.rollbar=new(Qt())({accessToken:en,checkIgnore:this.checkIgnore,onSendCallback:this.beforeSend,captureUncaught:!0,scrubTelemetryInputs:!0,captureUnhandledRejections:!0,autoInstrument:{dom:!1,navigation:!1},payload:{environment:"production",client:{javascript:{code_version:"4"}},server:{root:"webpack:///./",branch:"master"}}}),this.enable=!0,this.sendTestException()},n.configure=function(e){this.rollbar&&this.rollbar.configure(e)},n.sendTestException=function(){if(!nn.isDebugger()){var e=FBInstant.player.getID();e&&this.rollbar.debug(new Error("Test rollbar"),{playerID:e})}},n.sendException=function(e,t){e&&(this.enable?this.rollbar&&(this.addExtraState(),this.rollbar.error(e,t)):console.error(e))},t}(Phaser.Plugins.BasePlugin),un=cn,ln=n(554),hn=function(e){function t(){return e.apply(this,arguments)||this}return(0,f.Z)(t,e),t.prototype.emit=function(t,n){return e.prototype.emit.call(this,t,n)},t}(Phaser.Events.EventEmitter),dn=hn,pn=n(540),fn=n(553),gn=n(552),mn={RESIZE:"resize",CHANGE_LAYOUT:"change-layout"},vn=function(e){function t(t,n,a,i){var r;(r=e.call(this,t)||this).zone=void 0,r.background=void 0,r.setName(n),r.setVisible(!1);var s=r.scene.world.getWorldSize(),o=s.width,c=s.height;return r.setSize(a||o,i||c),r.addZone(),r.addBackground(),gn.Z.registerObject(r.background),r.handleResize(),r.scene.game.events.on("world-resize",(function(){r.handleResize()})),r}(0,f.Z)(t,e);var n=t.prototype;return n.open=function(e){GameCore.Utils.Valid.isObject(e)&&(this.setDataEnabled(),this.setData(e)),this.setBlockInputOutsideEnabled(!0),this.scene.screen.screensLayer.bringToTop(this),this.visible||(this.setVisible(!0),this.logPageviewOnOpen(),this.logEventOpen())},n.close=function(){this.visible&&(this.setVisible(!1),this.logPageviewOnClose())},n.incY=function(e){this.y+=e,this.background.y-=e},n.incX=function(e){this.x+=e,this.background.x-=e},n.incScale=function(e){this.scale+=e,this.background.scale-=e^e*(100/e)},n.setBlockInputOutsideEnabled=function(e){this.scene.input.setTopOnly(e)},n.addZone=function(){this.zone=this.scene.add.zone(0,0,this.width,this.height),this.zone.setInteractive({}),this.add(this.zone)},n.addBackground=function(){this.background=this.scene.add.image(0,0,fn.Z.GAMEPLAY_DEFAULT.KEY,"blank"),this.background.setWorldSize(this.width,this.height),this.add(this.background)},n.registerEvents=function(){this.scene.world.events.on(mn.RESIZE,this.handleResize,this)},n.handleResize=function(){var e=this.scene.world.getWorldSize(),t=e.width,n=e.height,a=this.x+(t-this.width)/2,i=this.y+(n-this.height)/2;this.setSize(t,n),this.setPosition(a,i),this.zone.setSize(t,n),this.background.setWorldSize(t,n)},n.logPageviewOnOpen=function(){this.scene.analytics.pageview(this.name)},n.logPageviewOnClose=function(){this.scene.analytics.pageview(this.scene.scene.key)},n.logEventOpen=function(){this.scene.analytics.event(pn._.SCREEN_OPEN,{screen_name:this.getScreenName()})},n.getScreenName=function(){return GameCore.Utils.String.toUpperCamelCase(this.name.toLowerCase())},n.getScreenBackground=function(){return this.background},t}(Phaser.GameObjects.Container),yn=vn,bn={OPEN:"open",CLOSE:"close",CREATED:"created"};GameCore.Screen=yn,GameCore.Screens={Events:bn};var An=function(e){function t(){for(var t,n,a=arguments.length,i=new Array(a),r=0;r<a;r++)i[r]=arguments[r];return(n=e.call.apply(e,_()(t=[this]).call(t,i))||this).events=void 0,n.screensLayer=void 0,n}(0,f.Z)(t,e);var n=t.prototype;return n.boot=function(){this.events=new dn,this.registryScreenFactory(),this.screensLayer=this.scene.add.layer(),this.screensLayer.setDepth(ln.Z.POPUP)},n.get=function(e){var t=this.screensLayer.getByName(e);return null===t?null:t},n.add=function(e,t,n,a){var i=this.get(e);return i||(i=this.scene.add.screen(e,t,n,a),this.screensLayer.add(i),this.events.emit(GameCore.Screens.Events.CREATED,i),i)},n.open=function(e,t){var n=this.get(e);return!!n&&(n.open(t),n.emit(GameCore.Screens.Events.OPEN,n),this.events.emit(GameCore.Screens.Events.OPEN,n),console.log("Screen open",e,t),!0)},n.openAsync=function(e,t){var n=this.get(e);return this.open(e,t),new(o())((function(e){n.once(GameCore.Screens.Events.CLOSE,(function(t,n){e(n)}))}))},n.close=function(e,t){var n=this.get(e);return!!n&&(n.close(),n.emit(GameCore.Screens.Events.CLOSE,n,t),this.events.emit(GameCore.Screens.Events.CLOSE,n),console.log("Screen close",e),!0)},n.bringToTop=function(e){var t=this.scene.children.getByName(e);t&&this.scene.children.bringToTop(t)},n.registryScreenFactory=function(){Phaser.GameObjects.GameObjectFactory.register("screen",this.createScreen)},n.createScreen=function(e,t,n,a){var i=new t(this.scene,e,n,a);return Phaser.Display.Align.In.Center(i,this.scene.gameZone),this.existing(i),i},t}(Phaser.Plugins.ScenePlugin),Sn=An,En=n(369),wn=n.n(En),Tn=n(547),In=n(549),Cn=n(548),kn={currentSceneKey:"",prevSceneKey:""};(0,Cn.pV)();var xn,Pn,_n,On,Rn,Dn,Ln,Bn,Nn,Mn={processed:!1,contextId:"",contextType:"SOLO",entryPointData:{},currentGameMode:""},Gn=Mn,Fn={data:{}},Zn={token:"",isRequesting:!1},Un=((xn={}).auth=function(e,t){return void 0===e&&(e=Zn),(0,Cn.ZP)(e,(function(e){var n=t.payload;if(n){var a=n.token;switch(t.type){case le:e.isRequesting=!0;break;case he:e.token=a,e.isRequesting=!1}}}))},xn),Wn=n(520),Hn={ASID:"",playerId:"",name:"",photo:"",locale:"",connectedPlayers:{},data:{score:0,settings:Pe,userGuideDisplays:0,customFields:{coins:0,diamond:0,lastReceiveGift:0,dailyRewarded:{lastRewarded:0,logDays:[]},dailyTasks:{startedTime:0,logTasks:{}},game_stats:{},tournaments:[],match:{}}},isUserNew:!0},zn=((Pn={}).player=function(e,t){return void 0===e&&(e=Hn),(0,Cn.ZP)(e,(function(n){var a=t.payload;if(a){var i=a.name,r=a.value,s=a.data,o=void 0===s?{}:s,c=a.score,u=a.connectedPlayers,l=void 0===u?[]:u,h=a.profile;switch(t.type){case ot:var d=a.playerId,p=a.name,f=a.photo,g=a.locale,m=a.data;if(n.playerId=d,n.name=p,n.photo=f,n.locale=g,GameCore.Utils.Valid.isObject(m)){var v=m;n.data=(0,Wn.TS)(e.data,v)}m.userGuideDisplays>0&&(n.isUserNew=!1);break;case lt:var y=h.playerId,b=h.name,A=h.photo,S=h.locale,E=h.ASID;n.ASID=E,n.playerId=y,n.name=b,n.photo=A,n.locale=S;break;case ut:n.data.score=c;break;case ht:n.data.settings[i]=r;break;case ct:n.data=(0,Wn.TS)(e.data,o),o.userGuideDisplays>0&&(n.isUserNew=!1);break;case dt:if(l.length<=0)break;var w=GameCore.Utils.Object.keyBy(l,"playerId");n.connectedPlayers=(0,Wn.TS)(e.connectedPlayers,w)}}}))},Pn),Yn=n(503),Kn=n.n(Yn),Vn={data:{},profileIds:[]},jn=((_n={}).profile=function(e,t){return void 0===e&&(e=Vn),(0,Cn.ZP)(e,(function(n){var a=t.payload;if(a){var i=a.data,r=void 0===i?[]:i;if(t.type===Zt){var s,o,c=GameCore.Utils.Object.keyBy(r,"playerId"),u=ie()(c);n.data=(0,Wn.TS)((0,p.Z)({},e.data),c),n.profileIds=_()(s=[]).call(s,new(Kn())(_()(o=[]).call(o,e.profileIds,u)))}}}))},_n),Xn="MATCH_GAMEPLAY_INITIALIZE",qn="MATCH_GAMEPLAY_START",Jn="MATCH_GAMEPLAY_FINISH",Qn="MATCH_GAMEPLAY_UPDATE",$n="MATCH_STATS_DATA_CLEAR",ea="MATCH_STATS_DATA_UPDATE",ta="MATCH_STATS_CURRENT_UPDATE",na="MATCH_SINGLE_CREATE_REQUEST",aa="MATCH_SINGLE_DETAIL_REQUEST",ia="MATCH_SINGLE_DATA_RECEIVED",ra="MATCH_SINGLE_DATA_CLEAR",sa="MATCH_CHALLENGE_JOIN_REQUEST",oa="MATCH_CHALLENGE_CREATE_REQUEST",ca="MATCH_CHALLENGE_FINISH_REQUEST",ua="MATCH_CHALLENGE_CONTINUE_REQUEST",la="MATCH_CHALLENGE_DATA_RECEIVED",ha="MATCH_CHALLENGE_DATA_CLEAR",da="MATCH_GROUP_CREATE_REQUEST",pa="MATCH_GROUP_FINISH_REQUEST",fa="MATCH_ONLINE_CREATE_REQUEST",ga="MATCH_ONLINE_DATA_RECEIVED",ma="open",va="active",ya="finished",ba={mode:"",status:ma,rescued:0,startAt:0,finishAt:0},Aa={single:{_id:"",data:{fen:""},playerId:"",status:ma},group:{status:ma,opponentInfo:{playerId:"",name:"",photo:""}},challenge:{_id:"",status:ma,whitePlayerId:"",blackPlayerId:"",opponentInfo:{playerId:"",name:"",photo:""}},online:{_id:"",status:ma,players:{}},updateAt:0,isRequesting:!1},Sa={current:{updateAt:0},data:{updateAt:0},isRequesting:!1},Ea=((On={}).match=(0,Tn.UY)({gameplay:function(e,t){return void 0===e&&(e=ba),(0,Cn.ZP)(e,(function(n){var a=t.payload;if(a){var i=a.mode,r=a.status;switch(t.type){case Xn:n.status=ma,n.mode=ba.mode,n.rescued=ba.rescued,n.startAt=ba.startAt,n.finishAt=ba.finishAt,n.opponentInfo=ba.opponentInfo;break;case qn:n.mode=i,n.status=va,n.rescued=ba.rescued,n.startAt=Date.now();break;case Qn:n.mode="string"===typeof i?i:e.mode,n.status=r||e.status;break;case Jn:n.status=ya,n.finishAt=Date.now();break;case"MATCH_GAMEPLAY_RESCUE":n.rescued+=1}}}))},match:function(e,t){return void 0===e&&(e=Aa),(0,Cn.ZP)(e,(function(n){var a=t.payload;if(a){var i=a.match,r=a.opponentInfo,s=a.players;switch(t.type){case na:case aa:case sa:case ca:case fa:n.isRequesting=!0;break;case"MATCH_SINGLE_MOVE_UPDATED":n.single=(0,p.Z)({},e.single,i),n.updateAt=Date.now();break;case ia:n.isRequesting=!1,n.single=i||Aa.single;break;case ra:n.isRequesting=!1,n.single=Aa.single;break;case oa:case ua:n.isRequesting=!0,n.challenge.opponentInfo=r;break;case la:n.isRequesting=!1,n.challenge=(0,p.Z)({},i||Aa.challenge),n.challenge.opponentInfo=e.challenge.opponentInfo;break;case ha:n.isRequesting=!1,n.challenge=Aa.challenge;break;case da:n.group.status=va,r&&(n.group.opponentInfo=r);break;case pa:n.group.status=ya;break;case"MATCH_ONLINE_DATA_CLEAR":n.online.status=Aa.online.status,n.online.players=Aa.online.players;break;case ga:n.online.status=va,n.online.players=s;break;case"MATCH_ONLINE_FINISH_REQUEST":n.online.status=ya}}}))},stats:function(e,t){return void 0===e&&(e=Sa),(0,Cn.ZP)(e,(function(n){var a=t.payload;if(a){var i=a.playerId,r=a.stats,s=a.match,o=a.current,c=a.players,u=a.leaders;switch(t.type){case $n:delete n.data[i],n.current=Sa.current;break;case"MATCH_STATS_CONTEXT_REQUEST":n.data=Sa.data,n.isRequesting=!0;break;case"MATCH_STATS_CONTEXT_RECEIVED":n.data=r,n.isRequesting=!1;break;case ea:n.data[i]=r;break;case ta:n.current=(0,Wn.TS)((0,p.Z)({},e.current),r);break;case ga:ie()(c).forEach((function(e){n.data[e]={score:0}}));break;case"MATCH_ONLINE_STATS_UPDATE":u.forEach((function(e){var t=e.playerId,a=e.score,i=e.rank;n.data[t]={score:a,rank:i}}));break;case la:var l=s||{},h=l.blackPlayerId,d=l.blackPlayerScore,f=l.whitePlayerId,g=l.whitePlayerScore,m=l.whitePlayerLevel,v=l.blackPlayerLevel;if(!h||!f)break;o&&(n.current=o),n.data[h]={score:d,level:v},n.data[f]={score:g,level:m}}}}))}}),On),wa="TOURNAMENT_ACTIVE",Ta={active:!1,tournamentId:null,leaderboardId:null,bestSessionScore:0,isRequesting:!1},Ia=((Rn={}).tournament=function(e,t){return void 0===e&&(e=Ta),(0,Cn.ZP)(e,(function(n){var a=t.payload;if(a){var i=a.score,r=void 0===i?0:i,s=a.tournamentId,o=a.leaderboardId;switch(t.type){case wa:n.active=!0,n.tournamentId=s,n.leaderboardId=o;break;case"TOURNAMENT_REQUEST":n.isRequesting=!0;break;case"TOURNAMENT_RECEIVED":n.isRequesting=!1,r>e.bestSessionScore&&(n.bestSessionScore=r)}}}))},Rn),Ca=n(98),ka=n.n(Ca),xa=n(97),Pa=n.n(xa),_a="LEADERBOARD_DATA_REQUEST",Oa="LEADERBOARD_DATA_UPDATE",Ra="LEADERBOARD_DATA_CLEAR",Da={leaderboardId:"",type:"",limit:0,offset:0,leaders:{},isRequesting:!1},La=((Dn={}).leaderboards=function(e,t){return void 0===e&&(e=Da),(0,Cn.ZP)(e,(function(n){var a=t.payload;if(a){var i=a.leaderboardId,r=a.type,s=a.limit,o=a.offset,c=a.leaders;switch(t.type){case _a:e.type!==r&&0===o&&(n.leaders=Da.leaders),n.isRequesting=!0,n.leaderboardId=i,n.type=r,n.limit=s,n.offset=o;break;case Oa:if(n.isRequesting=!1,e.type!==r)break;var u=GameCore.Utils.Json.clone((0,p.Z)({},e.leaders,c)),l=ka()(u),h=Oe()(l).call(l,(function(e){return!!e.name&&!!e.photo}));Pa()(h).call(h,(function(e,t){return+t.score-+e.score})),h.forEach((function(t,a){t.rank=a+1,e.leaders[t.playerId]||(n.leaders[t.playerId]=t)}));break;case Ra:n.isRequesting=!1,n.type=Da.type,n.limit=Da.limit,n.offset=Da.offset,n.leaders=Da.leaders,n.leaderboardId=Da.leaderboardId}}}))},Dn),Ba="MISSIONS_DATA_REQUEST",Na="MISSIONS_DATA_RECEIVE",Ma="MISSION_UPDATE",Ga="MISSION_COMPLETED",Fa={mission:null,missions:null,isRequesting:!1},Za=((Ln={}).missions=function(e,t){return void 0===e&&(e=Fa),(0,Cn.ZP)(e,(function(n){var a,i,r=t.payload;if(r){var s=r.name,o=r.type,c=r.value,u=r.missions;switch(t.type){case Ba:n.isRequesting=!0;break;case Na:if(n.isRequesting=!1,u.length<1)return;n.missions={},u.forEach((function(e){n.missions[e.name]=e}));break;case"MISSION_START":if(null===e.missions)break;var l=e.missions[s];n.mission={name:s,process:{},require:l.require,reward:l.reward},ie()(l.require).forEach((function(e){n.mission.process[e]=0}));break;case Ma:if((null==(a=e.mission)?void 0:a.name)!==s)break;n.mission.process[o]+=c;break;case Ga:if((null==(i=e.mission)?void 0:i.name)!==s)break;n.mission=null}}}))},Ln),Ua="DAILY_TASKS_DATA_REQUEST",Wa="DAILY_TASKS_DATA_RECEIVE",Ha="DAILY_TASKS_PROCESS_UPDATE",za="DAILY_TASK_VALUE_ADD",Ya="DAILY_TASK_FINISHED",Ka={tasks:[],process:[],isRequesting:!1,isNotice:!1},Va=((Bn={}).dailyTasks=function(e,t){return void 0===e&&(e=Ka),(0,Cn.ZP)(e,(function(n){var a=t.payload;if(a){var i=a.id,r=a.type,s=a.value,o=a.tasks,c=a.process;switch(t.type){case Ua:n.isRequesting=!0;break;case Wa:n.isRequesting=!1,n.tasks=o;break;case Ha:n.process=c;break;case za:if(!e.process[i])break;n.process[i][r]+=s;break;case"DAILY_TASK_REWARDED":if(!e.process[i])break;n.process[i].rewarded=!0;break;case"DAILY_TASKS_SEEN":n.isNotice=!1;break;case Ya:n.isNotice=!0}}}))},Bn),ja={rewards:[],isRequesting:!1},Xa=((Nn={}).dailyRewards=function(e,t){return void 0===e&&(e=ja),(0,Cn.ZP)(e,(function(e){var n=t.payload;if(n){var a=n.rewards;switch(t.type){case"DAILY_REWARDS_REQUEST":e.isRequesting=!0;break;case"DAILY_REWARDS_RECEIVE":e.isRequesting=!1,e.rewards=a}}}))},Nn),qa=(0,Tn.UY)((0,p.Z)({scene:function(e,t){return void 0===e&&(e=kn),(0,Cn.ZP)(e,(function(n){var a=t.payload;if(a){var i=a.sceneKey;if(t.type===In.DW)n.currentSceneKey=i,n.prevSceneKey=e.currentSceneKey}}))},context:function(e,t){return void 0===e&&(e=Mn),(0,Cn.ZP)(e,(function(e){var n=t.payload;if(n){var a=n.gameMode,i=n.contextId,r=n.contextType,s=n.entryPointData;switch(t.type){case In.kL:e.contextId=i,e.contextType=r,e.entryPointData=s;break;case In.fJ:e.contextId=i,e.contextType=r,e.processed=!0;break;case In.EH:e.currentGameMode=a}}}))},messages:function(e,t){return void 0===e&&(e=Fn),(0,Cn.ZP)(e,(function(n){var a=t.payload;if(a){var i=a.opponentId;if("string"===typeof i)switch(t.type){case In.qj:e.data[i]?n.data[i].sent=!0:n.data[i]={sent:!0};break;case In.rh:e.data[i]?n.data[i].sent=!1:n.data[i]={sent:!1}}}}))}},Un,zn,jn,Ea,Ia,La,Za,Va,Xa)),Ja=n(546),Qa=function(e){return(0,Ja.xC)({reducer:qa,preloadedState:e,devTools:!0})},$a=function(e){function t(){for(var t,n,a=arguments.length,i=new Array(a),r=0;r<a;r++)i[r]=arguments[r];return(n=e.call.apply(e,_()(t=[this]).call(t,i))||this).store=void 0,n.initiator=void 0,n.dispatch=function(e){return n.store.dispatch(e)},n.getState=function(){return n.store.getState()},n.subscribe=function(e){return n.store.subscribe(e)},n.watch=function(e,t){var a=wn()((function(){var t=n.getState();return e(t)}));return n.subscribe(a((function(e){t(e)})))},n}(0,f.Z)(t,e);var n=t.prototype;return n.init=function(){this.store=Qa({})},n.setInitiator=function(e){this.initiator=e},n.syncStore=function(){var e=(0,a.Z)(r().mark((function e(){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.initiator.initContext(),e.next=3,this.initiator.initPlayer();case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.initPlayerManually=function(){var e=(0,a.Z)(r().mark((function e(){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.initiator.initPlayer();case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),t}(Phaser.Plugins.BasePlugin),ei=$a,ti=n(523),ni=n.n(ti),ai=function(e){function t(t,n){var a;return(a=e.call(this,t,{type:"webfont",key:n.type})||this).payload=void 0,a.payload=n,a}(0,f.Z)(t,e);var n=t.prototype;return n.load=function(){var e;switch(this.payload.type){case"google":e=this.getGoogleFontConfig(this.payload);break;case"local":e=this.getLocalFontConfig(this.payload)}ni().load(e)},n.getGoogleFontConfig=function(e){var t=this,n=e.character,a=e.fontName,i=e.fontWeight;return{google:{families:[a+":"+(void 0===i?400:i)],text:n},active:function(){t.loader.nextFile(t,!0)},timeout:15e3}},n.getLocalFontConfig=function(e){var t=this,n=e.fontName,a=e.fontType,i=document.createElement("style");document.head.appendChild(i);var r=i.sheet;if(r){var s="";switch(a){case"opentype":case"woff":s=".woff";break;case"truetype":s=".ttf"}var o='@font-face { font-family: "'+n+'"; src: url("assets/fonts/'+n+s+'") format("'+a+'"); }';r.insertRule(o,0)}return{custom:{families:[n]},active:function(){t.loader.nextFile(t,!0)},timeout:15e3}},t}(Phaser.Loader.File),ii=function(e){function t(){return e.apply(this,arguments)||this}return(0,f.Z)(t,e),t.prototype.addFont=function(e){var t=new ai(this.scene.load,e);this.scene.load.addFile(t)},t}(Phaser.Plugins.ScenePlugin),ri=ii,si=n(534),oi=n(535),ci=function(e){function t(){return e.apply(this,arguments)||this}return(0,f.Z)(t,e),t.prototype.emit=function(t){return e.prototype.emit.call(this,t)},t}(Phaser.Events.EventEmitter),ui=ci,li=function(e){function t(){for(var t,n,a=arguments.length,i=new Array(a),r=0;r<a;r++)i[r]=arguments[r];return(n=e.call.apply(e,_()(t=[this]).call(t,i))||this).events=void 0,n.previousLayout=void 0,n.resizeEventData=void 0,n.portraitRatio=void 0,n.portraitWidth=void 0,n.portraitHeight=void 0,n.landscapeRatio=void 0,n.landscapeWidth=void 0,n.landscapeHeight=void 0,n.worldWidth=void 0,n.worldHeight=void 0,n.worldRatio=void 0,n.autoResize=void 0,n.disableLandscape=void 0,n.fullSizeOnLandscape=void 0,n.currentLayout=void 0,n.forcePixelRatio=void 0,n.ignoreResizeFlag=!1,n.handleResize=(0,oi.D)((function(){n.previousLayout=""+n.currentLayout,n.ignoreResizeFlag?n.game.events.once("resume-resize",(function(){n.ignoreResizeFlag=!1,n.resize(),n.game.events.emit("world-resize")})):(n.resize(),n.game.events.emit("world-resize"))}),100),n}(0,f.Z)(t,e);var n=t.prototype;return n.configure=function(e){this.events=new ui;var t=e.autoResize,n=e.portraitRatio,a=e.portraitWidth,i=e.portraitHeight,r=e.landscapeWidth,s=e.landscapeHeight,o=e.landscapeRatio,c=e.disableLandscape,u=e.fullSizeOnLandscape;this.autoResize=t,this.disableLandscape=c,this.fullSizeOnLandscape=u,this.portraitRatio=n,this.portraitWidth=a,this.portraitHeight=i,this.landscapeRatio=o,this.landscapeWidth=r,this.landscapeHeight=s,this.initWorldSize(),this.addEventResize()},n.resize=function(e){var t=this;e&&e>0&&(this.forcePixelRatio=e);var n=this.getCanvasSizeFixedRatio(this.worldRatio),a=n.width,i=n.height;this.resizeCanvas(a,i),this.game.scene.scenes.forEach((function(e){var n=e.cameras.main;if(n){var a=t.getZoomRatio(),i=t.getWorldSize(),r=i.width,s=i.height;n.setZoom(a),n.centerOn(r/2,s/2)}}));var r={width:this.worldWidth,height:this.worldHeight,isLayoutChanged:!1,newLayout:this.currentLayout};this.previousLayout!==this.currentLayout&&(r.isLayoutChanged=!0,r.newLayout=this.currentLayout),this.resizeEventData=r,this.events.emit(mn.RESIZE,r)},n.getResizeEventData=function(){return this.resizeEventData},n.resizeCanvas=function(e,t){this.game.canvas.width=e,this.game.canvas.height=t,this.game.scale.resize(e,t)},n.getWorldSize=function(){return{width:this.worldWidth,height:this.worldHeight}},n.initWorldSize=function(){if(this.worldWidth=this.portraitWidth,this.worldHeight=this.portraitHeight,this.isScreenSmallerRatio(this.portraitRatio))this.worldHeight=this.worldWidth/this.getScreenRatio(),this.currentLayout="portrait";else if(!this.disableLandscape&&(this.landscapeRatio=Math.min(this.getScreenRatio(),1),this.worldHeight=this.landscapeHeight,this.worldWidth=Math.min(this.landscapeWidth,this.landscapeHeight*this.getScreenRatio()),this.worldWidth=this.worldHeight*this.landscapeRatio,this.currentLayout="landscape",this.fullSizeOnLandscape)){this.worldRatio=this.worldWidth/this.worldHeight,this.landscapeRatio=this.getScreenRatio();var e=this.getCanvasSizeFixedRatio(this.landscapeRatio),t=e.width,n=e.height,a=this.getZoomRatio();this.worldWidth=t/a,this.worldHeight=n/a}this.worldRatio=this.worldWidth/this.worldHeight,console.info("\ud83d\ude80 > this.worldRatio",this.worldRatio)},n.getZoomRatio=function(){var e=this.getWorldSize().width;return this.getCanvasSizeFixedRatio(this.worldRatio).width/e},n.getPixelRatio=function(){return(0,si.Z)()},n.getPixelRatioForCanvas=function(){if(this.forcePixelRatio>0)return this.forcePixelRatio;var e=GameCore.Utils.Device.pixelRatio();return e=GameCore.Utils.Device.isDesktop()?Phaser.Math.Clamp(e,1.5,2):Phaser.Math.Clamp(e,1.5,2.5)},n.getPhysicPixels=function(e,t){return e*t},n.getCanvasSizeFixedRatio=function(e){var t=this.getPixelRatioForCanvas(),n=this.getScreenWidth()*t,a=this.getScreenHeight()*t;return this.isScreenSmallerRatio(e)?a=n/e:n=a*e,{width:n,height:a}},n.getScreenRatio=function(){return this.getScreenWidth()/this.getScreenHeight()},n.getScreenHeight=function(){var e=document,t=e.body,n=e.documentElement,a=t.clientHeight,i=n.clientHeight;return Math.max(i,a)||0},n.getScreenWidth=function(){var e=document,t=e.body,n=e.documentElement,a=t.clientWidth,i=n.clientWidth;return Math.max(i,a)||0},n.isScreenSmallerRatio=function(e){return this.getScreenRatio()<e},n.addEventResize=function(){var e=this;this.autoResize&&(window.addEventListener("resize",this.handleResize),0===this.game.events.listeners("pause-resize").length&&this.game.events.on("pause-resize",(function(){e.ignoreResizeFlag=!0})),0===this.game.events.listeners("resume-resize").length&&this.game.events.on("resume-resize",(function(){e.ignoreResizeFlag=!1})))},n.isLandscape=function(){return!this.disableLandscape&&this.worldRatio>this.portraitRatio},t}(Phaser.Plugins.BasePlugin),hi=li,di=function(){function e(e,t,n){this.contextId=void 0,this.contextType=void 0,this.entryPointData=void 0,this.contextId=e||Gn.contextId,this.contextType=t||Gn.contextType,this.entryPointData=n||Gn.entryPointData}return e.prototype.toObject=function(){return{contextId:this.contextId,contextType:this.contextType,entryPointData:this.entryPointData}},e}(),pi=function(e){function t(t,n){var a;return(a=e.call(this,t,n)||this).name="InvalidPlayerId",a.message=t||"The playerId is not valid",a.payload=n,a}return(0,f.Z)(t,e),t}((0,z.Z)(Error)),fi="share_invite",gi="challenge_friend_match",mi="single",vi="challenge-friends",yi="thread-challenge",bi="matching-group",Ai="tournaments",Si=(0,pe.P1)([function(e){return e.context}],(function(e){return e})),Ei=(0,pe.P1)([function(e){return e.context.currentGameMode}],(function(e){return e})),wi=function(e){return e.MATCH_GAMEPLAY_START="MATCH_GAMEPLAY_START",e.GAME_MODE_CHANGED="game-mode-changed",e.BACKGROUND_CHANGED="background-changed",e.GAME_START="game-start",e.GAME_MODE_DETECTED="game-mode-detected",e}(wi||{}),Ti=wi,Ii=function(e,t){return{type:In.fJ,payload:{contextId:e,contextType:t}}},Ci=function(e){return function(t){t({type:In.EH,payload:{gameMode:e}}),(0,h.sw)("game-mode",e)}},ki={score:"score",settings:"settings",gameData:"gameData",userGuideDisplays:"userGuideDisplays"},xi=GameCore.Configs.SyncProfileFromAPI,Pi=function(e){var t=this;this.game=void 0,this.initContext=function(){var e=window.GameSDK.context.getID(),n=window.GameSDK.context.getType(),a=window.GameSDK.getEntryPointData(),i=new di(e,n,a).toObject(),r=i.contextId,s=i.contextType,o=i.entryPointData;t.game.storage.dispatch(function(e,t,n){return{type:In.kL,payload:{contextId:e,contextType:t,entryPointData:n}}}(r,s,o))},this.initPlayer=(0,a.Z)(r().mark((function e(){var n,a,i,s,o;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.game.player,a=t.getPlayerInfo(),i=ka()(ki),e.next=5,FBInstant.player.getDataAsync(i);case 5:return s=e.sent,console.info("\ud83d\ude80 > rawData",s),o=new nt(s),console.info("\ud83d\ude80 > playerData",o),e.next=11,t.maintainDataStructure(o);case 11:return o=e.sent,!0===o.toObject().settings.music&&window.game.audio.playMusic(),e.next=16,n.receiveData(a,o.convertToPlayerData());case 16:case"end":return e.stop()}}),e)}))),this.maintainDataStructure=function(){var e=(0,a.Z)(r().mark((function e(t){var n,a,i,s;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,xi){e.next=3;break}return e.abrupt("return",t);case 3:return e.next=5,FBInstant.player.getDataAsync(["isSynced","customFields"]);case 5:if(e.t0=e.sent,e.t0){e.next=8;break}e.t0={};case 8:if(n=e.t0,!0!==(n.isSynced||!1)){e.next=12;break}return e.abrupt("return",t);case 12:if(a=n.customFields||!1){e.next=15;break}return e.abrupt("return",t);case 15:return(i=t.convertToPlayerData()).customFields=a,s=new nt({}).convertToFacebookData(i),e.next=20,FBInstant.player.setDataAsync((0,p.Z)({},s,{isSynced:!0}));case 20:return e.abrupt("return",new nt(s));case 23:return e.prev=23,e.t1=e.catch(0),console.warn(e.t1),e.abrupt("return",t);case 27:case"end":return e.stop()}}),e,null,[[0,23]])})));return function(t){return e.apply(this,arguments)}}(),this.getPlayerInfo=function(){try{var e=window.GameSDK.player.getID(),t=window.GameSDK.player.getName(),n=window.GameSDK.player.getPhoto(),a=window.GameSDK.getLocale();if(!GameCore.Utils.Valid.isString(e))throw new pi(null,{playerId:e});return GameCore.Utils.Valid.isString(t)||(t="You"),new pt.Z(e,t,n,a).toObject()}catch(i){return new pt.Z("123","You").toObject()}},this.game=e},_i=n(555),Oi=GameCore.Ads.Types,Ri=[pn._.BUTTON_CLICK,pn._.SCREEN_OPEN],Di=function(e){function t(t,n,a){var i;return(i=e.call(this,"FacebookAnalytics",{prefix:n},"#0F52BA")||this).game=void 0,i.game=t,i.selfLog=!!a,i}(0,f.Z)(t,e);var n=t.prototype;return n.processEvent=function(e,t,n){var a;if(!(qt()(Ri).call(Ri,e)>=0)){var i=this.getEventName(e),r={};De()(a=ie()(t||{})).call(a,(function(e){t&&"string"===typeof t[e]&&(r[e]=t[e])})),FBInstant.logEvent(i,n,r)}},n.processPageView=function(e){},n.processLevelStart=function(e,t,n){this.processEvent(pn._.LEVEL_START,{level:e,score:t,level_name:n})},n.processLevelRescue=function(e,t,n){this.processEvent(pn._.LEVEL_RESCUE,{level:e,score:t,level_name:n})},n.processLevelFail=function(e,t,n){this.processEvent(pn._.LEVEL_END,{level:e,score:t,level_name:n,success:!1})},n.processLevelComplete=function(e,t,n){this.processEvent(pn._.LEVEL_END,{level:e,score:t,level_name:n,success:!0})},n.processLoadInterstitialAd=function(e){var t=this.getEdaType(Oi.INTERSTITIAL);this.processEvent(pn._.AD_LOAD,{ad_type:t,screen_name:""+e})},n.processShowInterstitialAd=function(e){var t=this.getEdaType(Oi.INTERSTITIAL);this.processEvent(pn._.AD_SHOW,{ad_type:t,screen_name:""+e})},n.processLoadRewardedVideoAd=function(e){var t=this.getEdaType(Oi.REWARDED);this.processEvent(pn._.AD_LOAD,{ad_type:t,screen_name:""+e})},n.processShowRewardedVideoAd=function(e){var t=this.getEdaType(Oi.REWARDED);this.processEvent(pn._.AD_SHOW,{ad_type:t,screen_name:""+e})},n.processLoadAdFail=function(e){var t=e.type,n=e.placement,a=this.getEdaType(t);this.processEvent(pn._.AD_LOAD_FAILED,{ad_type:a,screen_name:""+n})},n.processShowAdFail=function(e){var t=e.type,n=e.placement,a=this.getEdaType(t);this.processEvent(pn._.AD_SHOW_FAILED,{ad_type:a,screen_name:""+n})},n.getEventName=function(e){return this.options.prefix+"_"+e},n.getEdaType=function(e){switch(e){case Oi.INTERSTITIAL:return"interstitial";case Oi.REWARDED:return"rewarded_video";case Oi.BANNER:return"banner";case Oi.PRE_ROLL:return"pre_roll";default:return"unknown"}},t}(GameCore.Analytics.BaseAnalytics),Li=GameCore.Ads.Types,Bi=[pn._.SCREEN_OPEN],Ni=(function(e){function t(t,n){var a;(a=e.call(this,"GoogleAnalytics",(0,p.Z)({},n),"#E35335")||this).game=void 0,a.trackingId=void 0,a.currentPath="/";var i=n.trackingId;a.game=t;var r=(GameCore.Configs.Analytics.GoogleAnalytics||{}).consoleLog;return a.selfLog=!!r,a.trackingId=i,a}(0,f.Z)(t,e);var n=t.prototype;n.processEvent=function(e,t,n){if(!(qt()(Bi).call(Bi,e)>=0)){var a=this.formatEventName(e),i=t?(0,p.Z)({},t):{};i=n?(0,p.Z)({},i,{value:n}):i,i=(0,p.Z)({},i,{page_path:this.currentPath,send_to:"GA"}),gtag("event",a,i)}},n.processLevelStart=function(e,t,n){this.processEvent(pn._.LEVEL_START,{level:e,score:t,level_name:n})},n.processLevelRescue=function(e,t,n){this.processEvent(pn._.LEVEL_RESCUE,{level:e,score:t,level_name:n})},n.processLevelFail=function(e,t,n){this.processEvent(pn._.LEVEL_END,{level:e,score:t,level_name:n,success:!1})},n.processLevelComplete=function(e,t,n){this.processEvent(pn._.LEVEL_END,{level:e,score:t,level_name:n,success:!0})},n.processLoadPreRollAd=function(e,t){var n=this.getEdaType(Li.PRE_ROLL);this.processEvent(pn._.AD_LOAD,{ad_type:n,screen_name:""+e,ad_service:""+t})},n.processShowPreRollAd=function(e,t){var n=this.getEdaType(Li.PRE_ROLL);this.processEvent(pn._.AD_SHOW,{ad_type:n,screen_name:""+e,ad_service:""+t}),this.processEvent(pn._.AD_IMPRESSION,{ad_format:n})},n.processLoadInterstitialAd=function(e,t){var n=this.getEdaType(Li.INTERSTITIAL);this.processEvent(pn._.AD_LOAD,{ad_type:n,screen_name:""+e,ad_service:""+t})},n.processShowInterstitialAd=function(e,t){var n=this.getEdaType(Li.INTERSTITIAL);this.processEvent(pn._.AD_SHOW,{ad_type:n,screen_name:""+e,ad_service:""+t}),this.processEvent(pn._.AD_IMPRESSION,{ad_format:"Interstitial"})},n.processLoadRewardedVideoAd=function(e,t){var n=this.getEdaType(Li.REWARDED);this.processEvent(pn._.AD_LOAD,{ad_type:n,screen_name:""+e,ad_service:""+t})},n.processShowRewardedVideoAd=function(e,t){var n=this.getEdaType(Li.REWARDED);this.processEvent(pn._.AD_SHOW,{ad_type:n,screen_name:""+e,ad_service:""+t}),this.processEvent(pn._.AD_IMPRESSION,{ad_format:"Rewarded"})},n.processShowBannerAd=function(e,t,n){var a=this.getEdaType(Li.BANNER);this.processEvent(pn._.AD_SHOW,{ad_type:a,banner_position:""+e,screen_name:""+t,ad_service:""+n})},n.processLoadAdFail=function(e){var t=e.type,n=e.placement,a=e.adService,i=this.getEdaType(t);this.processEvent(pn._.AD_LOAD_FAILED,{ad_type:i,screen_name:""+n,ad_service:""+a})},n.processShowAdFail=function(e){var t=e.type,n=e.placement,a=e.adService,i=e.bannerPosition,r={ad_type:this.getEdaType(t),screen_name:""+n,ad_service:""+a};t===Li.BANNER&&(r.banner_position=""+i),this.processEvent(pn._.AD_SHOW_FAILED,r)},n.processPageView=function(e){var t="/"+this.getGameplayMode()+"/"+e;this.currentPath=t,gtag("event","page_view",{page_path:this.currentPath,send_to:["GA",this.trackingId]})},n.getGameplayMode=function(){var e=this.game.storage.getState();return Ei(e)},n.formatEventName=function(e){return e.toLowerCase().replace(/:/g,"_")},n.formatPageTitle=function(e,t){return this.toUpperCamelCaseWithSpace(e)+"::"+this.toUpperCamelCaseWithSpace(t)},n.toUpperCamelCaseWithSpace=function(e){var t=e.replace(/[-_\s.]+(.)?/g,(function(e,t){return t?" "+t.toUpperCase():""}));return t.substr(0,1).toUpperCase()+t.substr(1)},n.getEdaType=function(e){switch(e){case Li.INTERSTITIAL:return"interstitial";case Li.PRE_ROLL:return"pre_roll";case Li.REWARDED:return"rewarded_video";case Li.BANNER:return"banner";default:return"unknown"}}}(GameCore.Analytics.BaseAnalytics),function(e){function t(){for(var t,n,i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];return(n=e.call.apply(e,_()(t=[this]).call(t,s))||this).startGame=(0,a.Z)(r().mark((function e(){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,window.FBInstant.context.getID(),window.FBInstant.context.getType(),e.next=5,n.auth.requestToken();case 5:return e.next=7,n.storage.syncStore();case 7:n.configureSentry(),n.configureRollbar(),n.handleYTAudioSync(),n.trackGameReadyUsage(),n.initGoogleAnalytics(),n.logAdServiceReady(),n.analytics.event(pn._.LOAD_START),n.scene.launch(_i.C.GLOBAL_SCENE),n.scene.start(_i.C.LOAD_SCENE),n.analytics.pageview(_i.C.LOAD_SCENE),e.next=22;break;case 19:e.prev=19,e.t0=e.catch(0),(0,h.tO)(e.t0);case 22:return e.prev=22,n.facebook.progressLoading.finishLoadingProgressFbBootScene(),n.scene.sleep(_i.C.BOOT_SCENE),e.finish(22);case 26:case"end":return e.stop()}}),e,null,[[0,19,22,26]])}))),n}(0,f.Z)(t,e);var n=t.prototype;return n.create=function(){this.facebook.progressLoading.loadingProgressFbBootScene(),this.startGame()},n.configureSentry=function(){var e=this.player.getPlayer();(0,h.Tv)({id:e.playerId,username:e.name})},n.configureRollbar=function(){if(this.rollbar){var e=this.player.getPlayer();this.rollbar.configure({payload:{person:{id:e.playerId,name:e.name}}})}},n.initGoogleAnalytics=function(){},n.initFacebookAnalytics=function(){var e=GameCore.Configs.Analytics.FacebookAnalytics||{},t=e.prefix,n=e.consoleLog;"string"===typeof t?this.analytics.add(new Di(this.game,t,n)):console.error("FacebookAnalytics: prefix is not defined")},n.logAdServiceReady=function(){var e=GameCore.Configs.Ads,t=e.AdService,n=e.FallbackService;"msgames"===t&&this.analytics.event(pn._.AD_INIT,{adService:t,state:"loaded"}),"msgames"===n&&this.analytics.event(pn._.AD_INIT,{adService:n,state:"loaded"})},n.handleYTAudioSync=function(){var e=window.game,t=e.audio,n=e.player;window.GameSDK.isAudioEnabled()||(n.setSetting("sound",!1),n.setSetting("music",!1),t.muteAll(),t.pauseAllSounds(),t.pauseMusic())},n.trackGameReadyUsage=function(){this.game.events.once("user-interaction-ready",(function(){window.performance.mark("GameReady API sent",{detail:{devtools:{dataType:"marker"}}}),console.log("GameReady API sent. Timestamp: ",window.performance.now())}))},t}(Phaser.Scene)),Mi=Ni,Gi=n(566),Fi=function(e){function t(){for(var t,n,a=arguments.length,i=new Array(a),r=0;r<a;r++)i[r]=arguments[r];return(n=e.call.apply(e,_()(t=[this]).call(t,i))||this).run=function(){n.scene.switch(_i.C.GAME_SCENE),n.facebook.attemptToAddShortcut()},n}(0,f.Z)(t,e);var n=t.prototype;return n.preload=function(){this.events.on("wake",this.run),this.events.on("resume",this.run),this.events.on("create",this.run)},n.create=function(){e.prototype.create.call(this)},t}(Gi.Z);var Zi=Fi,Ui=n(544),Wi=new pt.Z("10","Your Friend",Ui.Z.AVATAR.FILE).toObject(),Hi=n(538),zi=n(562),Yi={targets:[],duration:600,ease:Phaser.Math.Easing.Linear,props:{angle:{from:0,to:360}}},Ki=function(e){function t(t){return e.call(this,Yi,t)||this}return(0,f.Z)(t,e),t}(zi.Z),Vi=fn.Z.DEFAULT,ji=Vi.KEY,Xi=Vi.FRAME,qi=function(e){function t(t){var n;return(n=e.call(this,t,0,0,ji,Xi.PRELOADER)||this).anim=void 0,n.runAnimation(),n.setWorldSize(56.5,56.5),n.scene.add.existing((0,Hi.Z)(n)),n}(0,f.Z)(t,e);var n=t.prototype;return n.runAnimation=function(){var e;null==(e=this.anim)||e.remove(),this.anim=new Ki({targets:[this],repeat:-1,duration:1200}),this.anim.play()},n.setVisible=function(t){return e.prototype.setVisible.call(this,t),t?this.runAnimation():this.anim.stop(),this},t}(Phaser.GameObjects.Image),Ji=qi,Qi=n(559),$i=n(568),er=n(574),tr=n(541),nr="global",ar="friend",ir=GameCore.Configs,rr=ir.ApiHost,sr=ir.OtherHost,or=ir.LeadersBoard,cr=or.Prefix,ur=or.LeaderboardId,lr=or.Name,hr=cr+"/"+ur+"/leaders",dr=cr+"/"+ur+"/players",pr=function(e){var t="";return ur?(e===nr?t=hr:e===ar&&(t=dr),t):t},fr=function(){var e=(0,a.Z)(r().mark((function e(t){var n,a,i,s,o,c;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=De()(t).call(t,(function(e){return e.playerId})),i=GameCore.Utils.Object.keyBy(t,"playerId"),s=GameCore.Utils.String.params({playerIds:a}),e.next=5,(0,at.U)("players?"+s,{},rr);case 5:return o=e.sent,c=De()(n=o.data).call(n,(function(e){var t=i[e.playerId];return(0,p.Z)({},e,{score:t.score,rank:t.rank,getScore:function(){return t.score},getFormattedScore:function(){return""},getTimestamp:function(){return(new Date).valueOf()},getRank:function(){return t.rank},getExtraData:function(){return t.extraData},getPlayer:function(){return{getName:function(){return e.name},getPhoto:function(){return e.photo},getID:function(){return e.playerId}}}})})),e.abrupt("return",c);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),gr=function(){var e=(0,a.Z)(r().mark((function e(t){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===t&&(t={}),null==ur){e.next=3;break}return e.abrupt("return",mr(t));case 3:return e.abrupt("return",vr(t));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),mr=function(){var e=(0,a.Z)(r().mark((function e(t){var n,a,i,s,o;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===t&&(t={}),n=[],a=pr(nr)){e.next=5;break}return e.abrupt("return",n);case 5:return i=GameCore.Utils.String.params(t),e.next=8,(0,at.U)(a+"?"+i,{},sr);case 8:if(s=e.sent,!((o=(null==s?void 0:s.data)||[]).length<1)){e.next=12;break}return e.abrupt("return",n);case 12:return n=o,e.abrupt("return",fr(n));case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),vr=function(){var e=(0,a.Z)(r().mark((function e(t){var n,a,i,s,o;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return void 0===t&&(t={}),a=(n=t).limit,i=n.offset,e.next=4,window.GameSDK.getLeaderboardAsync(lr);case 4:return s=e.sent,e.next=7,s.getEntriesAsync(a,i);case 7:return o=e.sent,e.abrupt("return",o);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),yr=function(){var e=(0,a.Z)(r().mark((function e(t){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===t&&(t={}),null==ur){e.next=3;break}return e.abrupt("return",br(t));case 3:return e.abrupt("return",Ar(t));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),br=function(){var e=(0,a.Z)(r().mark((function e(t){var n,a,i,s,o;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===t&&(t={}),n=[],a=pr(ar)){e.next=5;break}return e.abrupt("return",n);case 5:return i=GameCore.Utils.String.params(t),e.next=8,(0,at.U)(a+"?"+i,{},sr);case 8:if(s=e.sent,!((o=(null==s?void 0:s.data)||[]).length<1)){e.next=12;break}return e.abrupt("return",n);case 12:return n=o,e.abrupt("return",fr(n));case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ar=function(){var e=(0,a.Z)(r().mark((function e(t){var n,a,i,s,o;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return void 0===t&&(t={}),a=(n=t).limit,i=n.offset,e.next=4,window.GameSDK.getLeaderboardAsync(lr);case 4:return s=e.sent,e.next=7,s.getConnectedPlayerEntriesAsync(a,i);case 7:return o=e.sent,e.abrupt("return",o);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Sr=(function(){var e=(0,a.Z)(r().mark((function e(t){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==ur){e.next=2;break}return e.abrupt("return",Sr(t));case 2:return e.abrupt("return",Er());case 3:case"end":return e.stop()}}),e)})))}(),function(){var e=(0,a.Z)(r().mark((function e(t){var n,a,i,s,o;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=null,t){e.next=3;break}return e.abrupt("return",n);case 3:if(a=pr(ar)){e.next=6;break}return e.abrupt("return",n);case 6:return i=GameCore.Utils.String.params({playerIds:t}),e.next=9,(0,at.U)(a+"?"+i,{},sr);case 9:if(s=e.sent,!((o=(null==s?void 0:s.data)||[]).length<1)){e.next=13;break}return e.abrupt("return",n);case 13:return e.next=15,fr(o);case 15:return n=e.sent[0],e.abrupt("return",n);case 17:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),Er=function(){var e=(0,a.Z)(r().mark((function e(){var t,n;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,window.GameSDK.getLeaderboardAsync(lr);case 2:return t=e.sent,e.next=5,t.getPlayerEntryAsync();case 5:return n=e.sent,e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),wr=function(){var e=(0,a.Z)(r().mark((function e(t,n){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(window.GameSDK.submitGameResultsAsync(n).catch((function(e){console.log(e)})),null==ur){e.next=5;break}if(""!==window.game.auth.getToken()){e.next=4;break}return e.abrupt("return",o().reject("Not logged in"));case 4:return e.abrupt("return",Tr(t,n));case 5:return e.abrupt("return",Ir(n));case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),Tr=function(){var e=(0,a.Z)(r().mark((function e(t,n){var a;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,at.v)("leaderboards/"+ur+"/players/"+t,{score:n},{},sr);case 2:return a=e.sent,e.abrupt("return",(null==a?void 0:a.data)||{});case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),Ir=function(){var e=(0,a.Z)(r().mark((function e(t){var n;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,window.GameSDK.getLeaderboardAsync(lr);case 2:return n=e.sent,e.next=5,n.setScoreAsync(t);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();function Cr(e,t){var n="undefined"!==typeof C()&&x()(e)||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){var n;if(!e)return;if("string"===typeof e)return kr(e,t);var a=E()(n=Object.prototype.toString.call(e)).call(n,8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return T()(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return kr(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var a=0;return function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function kr(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}var xr=GameCore.Configs.LeadersBoard,Pr=xr.UseMock,_r=xr.Limit,Or=xr.MockOptions,Rr=function(e,t,n,i){return void 0===n&&(n=_r),void 0===i&&(i=0),function(){var s=(0,a.Z)(r().mark((function a(s){var o,c,u,l,d,p,f,g,m,v,y,b,A,S,E,w,T,I;return r().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(a.prev=0,o=window.game.player,c=o.getPlayerId(),s(Lr()),s({type:_a,payload:{leaderboardId:e,type:t,limit:n,offset:i}}),!Pr){a.next=11;break}return a.next=8,(0,tr.qZ)(1e3);case 8:return d=De()(u=Mt()(l=new Array(n)).call(l,null)).call(u,(function(e,t){var n=(t+1)*(i+1),a=Or.PlayerEntryIndex===t,r={playerId:"0"+n,name:"MPlayer "+n,photo:"./assets/images/others/avatar.png",rank:n,score:Math.floor(1e5/n)};if(a){var s=window.game.player.getPlayer(),o=s.playerId,c=s.name,u=s.photo;r.playerId=o,r.name=c,r.photo=u}return r})),s(Dr(d,t)),a.abrupt("return");case 11:if(p=[],t!==nr){a.next=18;break}return a.next=15,gr({limit:n,offset:i});case 15:p=a.sent,a.next=26;break;case 18:if(t!==ar){a.next=26;break}return(f=o.getConnectedPlayerIds(n,i)).push(c),g=GameCore.Utils.Array.unique(f),a.next=24,yr({playerIds:g,limit:g.length});case 24:p=a.sent,g.forEach((function(e){var t=Oe()(p).call(p,(function(t){return t.playerId===e}));t&&0!==t.length||p.push({playerId:e,score:0})}));case 26:for(m={},v=Cr(p);!(y=v()).done;)b=y.value,A=b.playerId,S=b.score,E=b.rank,w=b.getPlayer(),T=w.getPhoto(),I=w.getName(),m[A]={playerId:A,name:I,photo:T,score:S,rank:E};console.log("Request leaderboard data",m),s(Dr(m,t)),a.next=36;break;case 32:a.prev=32,a.t0=a.catch(0),s(Dr([],t)),(0,h.tO)(a.t0);case 36:case"end":return a.stop()}}),a,null,[[0,32]])})));return function(e){return s.apply(this,arguments)}}()},Dr=function(e,t){return{type:Oa,payload:{leaders:e,type:t}}},Lr=function(){return{type:Ra,payload:{}}},Br=function(e){return e.leaderboards},Nr=((0,pe.P1)([function(e){return Br(e).leaderboardId}],(function(e){return e})),(0,pe.P1)([function(e){return Br(e).leaders}],(function(e){return e}))),Mr=(0,pe.P1)([function(e){return Br(e).isRequesting}],(function(e){return e})),Gr=function(e){function t(t,n){var a;return(a=e.call(this,t,n)||this).name="InvalidContextId",a.message=t||"This contextId is not valid",a.payload=n,a}return(0,f.Z)(t,e),t}((0,z.Z)(Error)),Fr=function(e){function t(t,n){var a;return(a=e.call(this,t,n)||this).name="NewScoreIsBad",a.message=t||"The new score is bad",a.payload=n,a}return(0,f.Z)(t,e),t}((0,z.Z)(Error)),Zr=function(e){return e.tournament},Ur=((0,pe.P1)([function(e){return Zr(e).active}],(function(e){return e})),(0,pe.P1)([function(e){return Zr(e).tournamentId}],(function(e){return e}))),Wr=((0,pe.P1)([function(e){return Zr(e).bestSessionScore}],(function(e){return e})),(0,pe.P1)([function(e){return Zr(e).isRequesting}],(function(e){return e})),(0,pe.P1)([function(e){return Zr(e).leaderboardId}],(function(e){return e}))),Hr=n(569);function zr(e,t){var n="undefined"!==typeof C()&&x()(e)||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){var n;if(!e)return;if("string"===typeof e)return Yr(e,t);var a=E()(n=Object.prototype.toString.call(e)).call(n,8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return T()(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return Yr(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var a=0;return function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Yr(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}GameCore.Configs.Tournament.UseLeaderboard;var Kr=function(e,t){return void 0===t&&(t=""),{type:wa,payload:{tournamentId:e,leaderboardId:t}}},Vr=function(e){return function(){var t=(0,a.Z)(r().mark((function t(n){var a,i,s,o,c,u,l,h,d,p;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a=window.game.facebook,i=e.playerId,s=e.playerName,o=e.score,c=e.level,u=e.autoStartGame,l=s+"'s Tournament",h=GameCore.Utils.String.generateObjectId(),t.next=7,a.tournament.createAsync({initialScore:o,config:{title:l,tournamentTitle:l},data:{playerId:i,playerName:s,leaderboardId:h,level:c}});case 7:return d=t.sent,p=d.getID(),u&&n(Kr(p,h)),t.next=12,(0,Hr.Z5)({_id:h,createdBy:i,name:l,description:N()({contextID:p,tournamentID:p}),type:"tournament_leaderboard",expireTime:604800});case 12:if(t.sent._id!==h){t.next=16;break}return t.next=16,(0,Hr.bh)(h,i,o);case 16:window.game.player.joinTournament({leaderboardId:h,endTime:d.getEndTime(),level:c}),e.success=!0,t.next=24;break;case 20:throw t.prev=20,t.t0=t.catch(0),e.success=!1,t.t0;case 24:case"end":return t.stop()}}),t,null,[[0,20]])})));return function(e){return t.apply(this,arguments)}}()},jr=function(e){return(0,a.Z)(r().mark((function t(){var n,a,i,s,o;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=window.game.facebook,a=e.playerId,i=e.playerName,s=e.score,o={score:s,data:{type:"tournament",playerId:a,playerName:i}},t.next=5,n.tournament.shareAsync(o);case 5:case"end":return t.stop()}}),t)})))},Xr=(function(){var e=(0,a.Z)(r().mark((function e(){var t,n,a,i,s,o,c,u,l;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=window.game.facebook,e.next=4,t.getTournamentAsync();case 4:if(n=e.sent,null!=(a=JSON.parse(n.getPayload()||"{}")).leaderboardId){e.next=21;break}return e.next=9,(0,Hr.Iy)();case 9:i=e.sent,s=n.getContextID(),o={payload:{}},c=zr(i);case 13:if((u=c()).done){e.next=20;break}if((l=u.value).contextID!==s){e.next=18;break}return o=l,e.abrupt("return",o.payload.leaderboardId);case 18:e.next=13;break;case 20:return e.abrupt("return",o.payload.leaderboardId||"");case 21:return e.abrupt("return",a.leaderboardId);case 24:return e.prev=24,e.t0=e.catch(0),e.abrupt("return",null);case 27:case"end":return e.stop()}}),e,null,[[0,24]])})))}(),0),qr=!1,Jr=0,Qr=!1,$r="",es=(function(){var e=(0,a.Z)(r().mark((function e(t,n){var a,i,s,o,c,u,l,h,d,p,f;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=window.game,i=a.player,s=a.facebook,o=i.getPlayer(),c=o.playerId,u=o.name,l=i.getBestScore(),e.prev=3,e.next=6,s.getTournamentAsync();case 6:if(h=e.sent,$r!==h.getID()&&($r=h.getID(),Xr=0,qr=!1),d=Wr(n),!ts(t,l)){e.next=16;break}return Xr+=1,p={playerId:c,playerName:u,score:t,leaderboardId:d},e.next=14,window.game.storage.dispatch(jr(p)).then((function(){qr=!0}));case 14:e.next=18;break;case 16:return e.next=18,s.tournament.postScoreAsync(t);case 18:e.next=29;break;case 20:if(e.prev=20,e.t0=e.catch(3),"TOURNAMENT_NOT_FOUND"!==(null==e.t0?void 0:e.t0.code)){e.next=29;break}if(es(t,l)){e.next=25;break}return e.abrupt("return");case 25:return Jr+=1,f={playerId:c,playerName:u,score:t,autoStartGame:!1},e.next=29,window.game.storage.dispatch(Vr(f)).then((function(){Qr=!0})).catch((function(){}));case 29:return e.prev=29,e.finish(29);case 31:case"end":return e.stop()}}),e,null,[[3,20,29,31]])})))}(),function(e,t){return!window.game.player.getPlayerIsNew()&&e>t||!(Qr||Jr>1)&&Math.random()<.5}),ts=function(){return!(qr||Xr>1)},ns=(function(){var e=(0,a.Z)(r().mark((function e(t){var n,a,i,s;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=window.game,a=n.player,i=n.facebook,s=a.getBestScore(),e.prev=2,e.next=5,i.getTournamentAsync();case 5:if(!ts(t,s)){e.next=12;break}return Xr+=1,e.next=9,i.tournament.shareAsync({score:t});case 9:qr=!0,e.next=14;break;case 12:return e.next=14,i.tournament.postScoreAsync(t);case 14:e.next=24;break;case 16:if(e.prev=16,e.t0=e.catch(2),"TOURNAMENT_NOT_FOUND"!==e.t0.code){e.next=24;break}if(es(t,s)){e.next=21;break}return e.abrupt("return");case 21:return Jr+=1,e.next=24,i.createTournamentAsync(t).then((function(){Qr=!0})).catch((function(e){}));case 24:case"end":return e.stop()}}),e,null,[[2,16]])})))}(),(0,pe.P1)([function(e){return e.messages.data}],(function(e){return e}))),as=(0,pe.P1)([ns,function(e,t){return t.opponentId}],(function(e,t){return!!GameCore.Utils.Valid.isString(t)&&(!!GameCore.Utils.Object.hasOwn(e,t)&&e[t].sent)})),is=function(e){function t(t,n){var a;return(a=e.call(this,t,n)||this).name="InvalidMatchId",a.message=t||"Invalid match id",a.payload=n,a}return(0,f.Z)(t,e),t}((0,z.Z)(Error)),rs=function(e){return e.match},ss=(0,pe.P1)([function(e){return rs(e).gameplay.mode}],(function(e){return e})),os=((0,pe.P1)([function(e){return rs(e).gameplay.status}],(function(e){return e})),(0,pe.P1)([function(e){return rs(e).gameplay.rescued}],(function(e){return e})),(0,pe.P1)([function(e){return rs(e).gameplay.startAt}],(function(e){return e})),(0,pe.P1)([function(e){return rs(e).gameplay.finishAt}],(function(e){return e})),function(e,t){return t.playerId}),cs=function(e){return rs(e).match.challenge},us=((0,pe.P1)([function(e){return rs(e).match.isRequesting}],(function(e){return e})),(0,pe.P1)([function(e){return rs(e).match.single}],(function(e){return e}))),ls=(0,pe.P1)([function(e){return rs(e).match.single._id}],(function(e){return e})),hs=(0,pe.P1)([function(e){return rs(e).match.single.score}],(function(e){return e||0})),ds=((0,pe.P1)([function(e){return rs(e).match.single.level}],(function(e){return e||0})),(0,pe.P1)([function(e){var t;return null==(t=rs(e).match.single.data)?void 0:t.diamond}],(function(e){return e||0})),(0,pe.P1)([function(e){var t;return null==(t=rs(e).match.single.data)?void 0:t.fen}],(function(e){return e||null})),(0,pe.P1)([function(e){return rs(e).match.single.status}],(function(e){return e})),(0,pe.P1)([function(e){return rs(e).match.single.playerId}],(function(e){return e})),(0,pe.P1)([cs],(function(e){return e}))),ps=(0,pe.P1)([function(e){return rs(e).match.challenge._id}],(function(e){return e})),fs=(0,pe.P1)([function(e){return rs(e).match.challenge.status}],(function(e){return e})),gs=(0,pe.P1)([function(e){return rs(e).match.challenge.opponentInfo}],(function(e){return e})),ms=((0,pe.P1)([function(e){return rs(e).match.challenge.whitePlayerId}],(function(e){return e})),(0,pe.P1)([function(e){return rs(e).match.challenge.blackPlayerId}],(function(e){return e})),(0,pe.P1)([ds,os],(function(e,t){var n=e.whitePlayerId,a=e.blackPlayerId;return n!==t&&a===t?n:a!==t&&n===t?a:""})),(0,pe.P1)([ds,os],(function(e,t){var n=e.whitePlayerId,a=e.blackPlayerId;return n===t?n:a===t?a:Wi.playerId}))),vs=(0,pe.P1)([ds,os],(function(e,t){var n=e.whitePlayerId,a=e.blackPlayerId,i=e.whitePlayerFinish,r=e.blackPlayerFinish;return t&&n===t?i:!(!t||a!==t)&&r})),ys=(0,pe.P1)([ds,function(e,t){return t.opponentId}],(function(e,t){var n=e.whitePlayerId,a=e.blackPlayerId,i=e.whitePlayerFinish,r=e.blackPlayerFinish;return t&&n===t?i:!(!t||a!==t)&&r})),bs=(0,pe.P1)([cs],(function(e){return e.extraData})),As=(0,pe.P1)([function(e){return rs(e).match.group.opponentInfo}],(function(e){return e})),Ss=((0,pe.P1)([function(e){return rs(e).match.online.players}],(function(e){return e})),(0,pe.P1)([function(e){return rs(e).match.journey}],(function(e){return e})),(0,pe.P1)([function(e){return rs(e).match.journey._id}],(function(e){return e})),(0,pe.P1)([function(e){return rs(e).match.journey.level}],(function(e){return e})),(0,pe.P1)([function(e){return rs(e).match.challenge.matchResultFromMessage}],(function(e){return e})),(0,pe.P1)([function(e){return rs(e).stats.data}],(function(e){return e}))),Es=(0,pe.P1)([function(e){return rs(e).stats.current}],(function(e){return e})),ws=((0,pe.P1)([function(e){return rs(e).stats.isRequesting}],(function(e){return e})),function(e){try{var t=localStorage.getItem(e);return null===t?null:GameCore.Utils.Json.decode(t)}catch(n){return null}}),Ts=function(e,t){try{var n=ws(e),a={};GameCore.Utils.Valid.isObject(n)&&(a=n);var i=GameCore.Utils.Json.clone(t);if(!GameCore.Utils.Valid.isObject(i))return!1;var r=GameCore.Utils.Object.clear(i),s=(0,Wn.TS)(a,r),o=GameCore.Utils.Json.encode(s);return localStorage.setItem(e,o),!0}catch(c){return!1}},Is=GameCore.Configs.ApiHost,Cs=(function(){var e=(0,a.Z)(r().mark((function e(t){var n;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"single-matches",e.next=3,(0,at.v)("single-matches",t,{},Is);case 3:return n=e.sent,e.abrupt("return",(null==n?void 0:n.data)||{});case 5:case"end":return e.stop()}}),e)})))}(),function(){var e=(0,a.Z)(r().mark((function e(){var t;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"single-matches/active",e.next=3,(0,at.U)("single-matches/active",{},Is);case 3:return t=e.sent,e.abrupt("return",(null==t?void 0:t.data)||{});case 5:case"end":return e.stop()}}),e)})))}(),function(){var e=(0,a.Z)(r().mark((function e(t,n){var a,i;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a="single-matches/"+t+"/move",e.next=3,(0,at.v)(a,n,{},Is);case 3:return i=e.sent,e.abrupt("return",(null==i?void 0:i.data)||{});case 5:case"end":return e.stop()}}),e)})))}(),function(){var e=(0,a.Z)(r().mark((function e(t){var n,a;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="single-matches/"+t+"/finish",e.next=3,(0,at.v)(n,{},{},Is);case 3:return a=e.sent,e.abrupt("return",(null==a?void 0:a.data)||{});case 5:case"end":return e.stop()}}),e)})))}(),function(){var e=(0,a.Z)(r().mark((function e(t,n){var a;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"matches",e.next=3,(0,at.v)("matches",{opponentPlayerId:t,extraData:n},{},Is);case 3:return a=e.sent,e.abrupt("return",(null==a?void 0:a.data)||{});case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),ks=function(){var e=(0,a.Z)(r().mark((function e(t){var n,a;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="matches/"+t+"/join",e.next=3,(0,at.v)(n,{},{},Is);case 3:return a=e.sent,e.abrupt("return",(null==a?void 0:a.data)||{});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),xs=function(){var e=(0,a.Z)(r().mark((function e(t){var n,a;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="matches/"+t,e.next=3,(0,at.U)(n,{},Is);case 3:return a=e.sent,e.abrupt("return",(null==a?void 0:a.data)||{});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ps=function(){var e=(0,a.Z)(r().mark((function e(t,n,a,i){var s,o;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s="matches/"+t+"/finish",e.next=3,(0,at.v)(s,{matchId:t,score:n,level:a,extraData:i},{},Is);case 3:return o=e.sent,e.abrupt("return",(null==o?void 0:o.data)||{});case 5:case"end":return e.stop()}}),e)})));return function(t,n,a,i){return e.apply(this,arguments)}}(),_s=function(e){function t(t,n){var a;return(a=e.call(this,t,n)||this).name="InvalidMatchStatus",a.message=t||"The match status is not valid",a.payload=n,a}return(0,f.Z)(t,e),t}((0,z.Z)(Error)),Os=function(e){function t(t,n){var a;return(a=e.call(this,t,n)||this).name="InvalidOpponentId",a.message=t||"Invalid opponent id",a.payload=n,a}return(0,f.Z)(t,e),t}((0,z.Z)(Error)),Rs=function(e){function t(t,n){var a;return(a=e.call(this,t,n)||this).name="InvalidBlackPlayerId",a.message=t||"Invalid black player id",a.payload=n,a}return(0,f.Z)(t,e),t}((0,z.Z)(Error)),Ds=function(e){function t(t,n){var a;return(a=e.call(this,t,n)||this).name="InvalidRequestedMatchId",a.message=t||"The matchId in match data not matched with requested matchId",a.payload=n,a}return(0,f.Z)(t,e),t}((0,z.Z)(Error)),Ls=function(e){function t(t,n){var a;return(a=e.call(this,t,n)||this).name="InvalidWhitePlayerId",a.message=t||"Invalid white player id",a.payload=n,a}return(0,f.Z)(t,e),t}((0,z.Z)(Error)),Bs=function(e){var t=e.matchId,n=e.currentMatchId;if(""===t||"string"!==typeof t)throw new is(null,{matchId:t});if(""===n||"string"!==typeof n)throw new is(null,{currentMatchId:n});if(t!==n)throw new Ds(null,{matchId:t,currentMatchId:n})},Ns=function(e){var t=e.playerId,n=e.match,a=n._id,i=n.playerId,r=n.status;if(""===a||"string"!==typeof a)throw new is(null,{matchId:a});if("finished"===r||"string"!==typeof r)throw new _s("This match is finished",{status:r});if(i!==t)throw new pi(null,{playerId:i,currentPlayerId:t})},Ms=function(e){var t=e.opponentId;if(""===t||"string"!==typeof t)throw new Os(null,{opponentId:t})},Gs=function(e){var t=e.matchId;if(""===t||"string"!==typeof t)throw new is(null,{matchId:t})},Fs=function(e){var t=e.match,n=t._id,a=t.whitePlayerId,i=t.blackPlayerId;if(""===n||"string"!==typeof n)throw new is(null,{matchId:n});if(""===a||"string"!==typeof a)throw new Ls(null,{whitePlayerId:a});if(""===i||"string"!==typeof i)throw new Rs(null,{blackPlayerId:i})},Zs=GameCore.Configs.Match,Us=function(e){try{return GameCore.Utils.Hash.stringToHash(N()(e))}catch(t){return""}},Ws=function(e){try{return JSON.parse(GameCore.Utils.Hash.hashToString(e))}catch(t){return""}},Hs=function(){return function(){var e=(0,a.Z)(r().mark((function e(t){var n,a,i,s;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.prev=0,n=window.game,a=n.player,n.globalScene.screen.open(Qi.o4.NOTIFY_SCREEN,{message:"Loading...",loading:!0}),t({type:na,payload:{}}),i=a.getPlayerId(),s=(0,p.Z)({},Zs.LocalSingleMatchDefault,{status:"active",playerId:i,startedAt:Date.now()}),Ns({playerId:i,match:s}),t(Ys(s)),Ts(Zs.SingleMatchStore,s),e.next=19;break;case 11:if(e.prev=11,e.t0=e.catch(0),t(Ys(null)),!(e.t0 instanceof is)){e.next=16;break}return e.abrupt("return");case 16:if(!(e.t0 instanceof _s)){e.next=18;break}return e.abrupt("return");case 18:(0,h.tO)(e.t0);case 19:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t){return e.apply(this,arguments)}}()},zs=function(e){return function(){var t=(0,a.Z)(r().mark((function t(n,a){var i,s,o,c,u,l,d,f;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:t.prev=0,i=window.game.player,Gs({matchId:e}),s=a(),o=ls(s),c=i.getPlayerId(),Bs({matchId:e,currentMatchId:o}),n({type:"MATCH_SINGLE_FINISH_REQUEST",payload:{matchId:e}}),u=us(s),Ns({playerId:c,match:u}),l=(0,p.Z)({},Zs.LocalSingleMatchDefault,u,{_id:e,status:"finished",playerId:c,finishAt:Date.now()}),n(Ys(l)),d=l.data,(f=(0,p.Z)({},l)).data=Us(d),Ts(Zs.SingleMatchStore,f),t.next=26;break;case 18:if(t.prev=18,t.t0=t.catch(0),n(Ys(null)),!(t.t0 instanceof is)){t.next=23;break}return t.abrupt("return");case 23:if(!(t.t0 instanceof _s)){t.next=25;break}return t.abrupt("return");case 25:(0,h.tO)(t.t0);case 26:case"end":return t.stop()}}),t,null,[[0,18]])})));return function(e,n){return t.apply(this,arguments)}}()},Ys=function(e){return{type:ia,payload:{match:e}}},Ks=function(){return{type:ra,payload:{}}},Vs=function(e,t){return function(){var n=(0,a.Z)(r().mark((function n(a){var i,s,o,c;return r().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,i=window.game,s=i.profile,i.globalScene.screen.open(Qi.o4.NOTIFY_SCREEN,{message:"Loading...",loading:!0}),o=e.playerId,Ms({opponentId:o}),a({type:oa,payload:{opponentInfo:e,extraData:t}}),n.next=8,Cs(o,t);case 8:return c=n.sent,Fs({match:c}),n.next=12,s.requestProfiles([o]);case 12:a(Js(c)),n.next=23;break;case 15:if(n.prev=15,n.t0=n.catch(0),a(Js(null)),!(n.t0 instanceof is)){n.next=20;break}return n.abrupt("return");case 20:if(!(n.t0 instanceof Os)){n.next=22;break}return n.abrupt("return");case 22:(0,h.tO)(n.t0);case 23:case"end":return n.stop()}}),n,null,[[0,15]])})));return function(e){return n.apply(this,arguments)}}()},js=function(e){return function(){var t=(0,a.Z)(r().mark((function t(n){var a,i,s,o,c,u,l,d,p;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a=window.game,i=a.player,s=a.profile,Gs({matchId:e}),n({type:sa,payload:{matchId:e}}),t.next=6,ks(e);case 6:if(o=t.sent,Fs({match:o}),c=o.status,u=o.whitePlayerId,l=o.blackPlayerId,c!==va){t.next=15;break}return d=i.getPlayerId(),p=d===u?l:u,t.next=15,s.requestProfiles([p]);case 15:n(Js(o)),t.next=24;break;case 18:if(t.prev=18,t.t0=t.catch(0),n(Js(null)),!(t.t0 instanceof is)){t.next=23;break}return t.abrupt("return");case 23:(0,h.tO)(t.t0);case 24:case"end":return t.stop()}}),t,null,[[0,18]])})));return function(e){return t.apply(this,arguments)}}()},Xs=function(e,t){return function(){var n=(0,a.Z)(r().mark((function n(a){var i,s,o,c,u,l,d,p,f;return r().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,i=window.game,s=i.player,i.globalScene.screen.open(Qi.o4.NOTIFY_SCREEN,{message:"Loading...",loading:!0}),Gs({matchId:e}),a({type:ua,payload:{matchId:e,opponentInfo:t}}),n.next=7,xs(e);case 7:o=n.sent,Fs({match:o}),c=o.whitePlayerId,u=o.whitePlayerScore,l=o.blackPlayerScore,d=s.getPlayerId(),p=s.getPlayerData(),f=p.score,a(Js(o,{score:d===c?u:l,bestScore:f})),n.next=23;break;case 17:if(n.prev=17,n.t0=n.catch(0),a(Js(null)),!(n.t0 instanceof is)){n.next=22;break}return n.abrupt("return");case 22:(0,h.tO)(n.t0);case 23:case"end":return n.stop()}}),n,null,[[0,17]])})));return function(e){return n.apply(this,arguments)}}()},qs=function(e,t,n){return function(){var i=(0,a.Z)(r().mark((function a(i){var s,o;return r().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,Gs({matchId:e}),i({type:ca,payload:{matchId:e,score:t,extraData:n}}),s=n.level,a.next=6,Ps(e,t,s,n);case 6:return o=a.sent,Fs({match:o}),a.next=10,i(Js(o));case 10:a.next=18;break;case 12:if(a.prev=12,a.t0=a.catch(0),i(Js(null)),!(a.t0 instanceof is)){a.next=17;break}return a.abrupt("return");case 17:(0,h.tO)(a.t0);case 18:case"end":return a.stop()}}),a,null,[[0,12]])})));return function(e){return i.apply(this,arguments)}}()},Js=function(e,t,n){return void 0===n&&(n=null),{type:la,payload:{match:e,opponentInfo:t,current:n}}},Qs=function(e){return{type:da,payload:{opponentInfo:e}}},$s=function(e,t){return{type:ga,payload:{matchId:e,players:t}}},eo=function(e){return void 0===e&&(e=!1),{type:"MATCH_RESUTL_FROM_MESSAGE",payload:{matchResultFromMessage:e}}},to=function(e){return{type:$n,payload:{playerId:e}}},no=function(e,t){return{type:ea,payload:{playerId:e,stats:t}}},ao=function(e){return{type:ta,payload:{stats:e}}},io=function(e){return e.SINGLE="single",e.CHALLENGE_FRIENDS="challenge-friends",e.TOURNAMENT="tournaments",e}(io||{}),ro=io,so=function(e){function t(){var t;return(t=e.call(this)||this).gameMode=void 0,t.autoPlaySingleMode=void 0,t.friendsChallenged=void 0,t.isGameLoadedInTournament=!1,t.gameMode=ro.SINGLE,t.autoPlaySingleMode=!0,t.friendsChallenged=[],t}(0,f.Z)(t,e);var n=t.prototype;return n.setGameMode=function(e){this.gameMode=e,console.log("\ud83e\udd16 ? Set game mode:",this.gameMode),this.emit(Ti.GAME_MODE_CHANGED)},n.getGameMode=function(){return this.gameMode},n.isSingleMode=function(){return this.gameMode==ro.SINGLE},n.isChallengeMode=function(){return this.gameMode==ro.CHALLENGE_FRIENDS},n.isTournamentMode=function(){return this.gameMode===ro.TOURNAMENT},(0,ue.Z)(t,null,[{key:"instance",get:function(){return this._instance||(this._instance=new t)}}]),t}(Phaser.Events.EventEmitter);so._instance=void 0;var oo=so,co=function(e){var t=e.contextId;if(""===t||"string"!==typeof t)throw new Gr(null,{contextId:t})},uo=null,lo=function(e){clearTimeout(uo),uo=setTimeout((function(){window.game.globalScene.screen.close(Qi.o4.NOTIFY_SCREEN)}),e)},ho=function(e){return function(t){try{if(t(Ks()),e){var n=e.getPayload(),a=e.getID();if(n){var i=JSON.parse(n).leaderboardId;t(Kr(a.toString(),i))}}t(wo(Ai))}catch(r){(0,h.tO)(r)}}},po=function(){return function(){var e=(0,a.Z)(r().mark((function e(t){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{t(Ks()),t(wo(mi))}catch(n){(0,h.tO)(n)}case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},fo=function(){return function(){var e=(0,a.Z)(r().mark((function e(t,n){var a,i,s,o;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,window.game.globalScene.screen.open(Qi.o4.NOTIFY_SCREEN,{message:"Loading...",loading:!0}),i=n(),s=ss(i),qt()(a=[mi,Ai]).call(a,s)>=0&&(t(Ks()),t(Hs())),o=null,s===vi&&(o=gs(i),t({type:ha,payload:{}})),t(to()),e.next=11,t(wo(s,o));case 11:e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),(0,h.tO)(e.t0);case 16:return e.prev=16,lo(300),e.finish(16);case 19:case"end":return e.stop()}}),e,null,[[0,13,16,19]])})));return function(t,n){return e.apply(this,arguments)}}()},go=function(e,t){return void 0===e&&(e="10"),void 0===t&&(t=!1),function(n){try{n(mo("reset",e,t))}catch(a){(0,h.tO)(a)}}},mo=function(e,t,n){return void 0===t&&(t="10"),void 0===n&&(n=!1),function(){var i=(0,a.Z)(r().mark((function a(i){var s,o,c,u,l,d,p,f,g,m,v,y,b,A,S,E,w,T;return r().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(a.prev=0,s=window.game,o=s.player,c=s.facebook,(u=s.globalScene).screen.open(Qi.o4.NOTIFY_SCREEN,{message:"Loading...",loading:!0}),l=e,d=c.contextType,t||(p=GameCore.Configs.PlayerIdMock,f=GameCore.Configs.PlayerIdMock2,t=o.getPlayerId()===p?f:p),e){a.next=30;break}return a.next=9,c.chooseAsync();case 9:if(!1!==(l=a.sent)){a.next=18;break}if(n&&u.events.emit(_i.K.SWITCH,_i.C.DASHBOARD_SCENE),!oo.instance.autoPlaySingleMode){a.next=17;break}return a.next=15,Io();case 15:return i(po()),a.abrupt("return");case 17:return a.abrupt("return");case 18:return a.prev=18,a.next=21,window.game.facebook.getTournamentAsync();case 21:return g=a.sent,i(ho(g)),a.abrupt("return");case 26:a.prev=26,a.t0=a.catch(18);case 28:a.next=40;break;case 30:if(l===c.getContextID()||!t||t===Wi.playerId){a.next=38;break}return a.next=33,c.createAsync(t);case 33:if(!1!==(l=a.sent)){a.next=37;break}return n&&u.events.emit(_i.K.SWITCH,_i.C.DASHBOARD_SCENE),a.abrupt("return");case 37:l||"reset"===e||(l=e);case 38:d=c.contextType,i(Ii(l,d));case 40:return co({contextId:l}),m=o.getPlayerId(),v=o.getConnectedPlayers(),a.next=45,c.getContextPlayers(m);case 45:return y=a.sent,t!==(b=Wi).playerId&&v[t]?b=v[t]:1===y.length&&(b=y[0]),i(to()),S=(A=b).playerId,E=A.name,w=A.photo,T={playerId:S,name:E,photo:w},a.next=53,i(wo(vi,T));case 53:i(Ii(l,d)),a.next=65;break;case 56:if(a.prev=56,a.t1=a.catch(0),!(a.t1 instanceof Gr)){a.next=60;break}return a.abrupt("return");case 60:if("USER_INPUT"!==(null==a.t1?void 0:a.t1.code)){a.next=62;break}return a.abrupt("return");case 62:if("INVALID_OPERATION"!==(null==a.t1?void 0:a.t1.code)){a.next=64;break}return a.abrupt("return");case 64:(0,h.tO)(a.t1);case 65:return a.prev=65,lo(10),a.finish(65);case 68:case"end":return a.stop()}}),a,null,[[0,56,65,68],[18,26]])})));return function(e){return i.apply(this,arguments)}}()},vo=function(e){return function(){var t=(0,a.Z)(r().mark((function t(n){var a,i,s,o,c,u,l,d,p,f,g,m,v,y,b,A;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,a=window.game,i=a.player,s=a.facebook,a.globalScene.screen.open(Qi.o4.NOTIFY_SCREEN,{message:"Loading...",loading:!0}),o=i.getPlayerId(),c=i.getConnectedPlayerIds(100,0),u=i.getConnectedPlayers(100,0),0==(l=Oe()(c).call(c,(function(e){var t;return qt()(t=oo.instance.friendsChallenged).call(t,e)<0&&e!=o}))).length&&(l.push.apply(l,c),oo.instance.friendsChallenged=[]),console.log({friendListCanBeChallenged:l}),d=e||"",p="",f=s.contextType,g=null,l.length>0&&!e&&(m=Phaser.Math.RND.between(0,l.length-1),d=l[m],u[d]&&(g=u[d],oo.instance.friendsChallenged.push(d))),!d||"string"!==typeof d){t.next=18;break}return t.next=17,s.createAsync(d);case 17:p=t.sent;case 18:if(g&&p){t.next=22;break}return t.next=21,n(mo());case 21:return t.abrupt("return");case 22:return co({contextId:p}),n(to()),y=(v=g).name,b=v.photo,A={playerId:d,name:y,photo:b},t.next=28,n(wo(vi,A));case 28:n(Ii(p,f)),lo(100),t.next=38;break;case 32:if(t.prev=32,t.t0=t.catch(0),lo(100),!(t.t0 instanceof Gr)){t.next=37;break}return t.abrupt("return");case 37:(0,h.tO)(t.t0);case 38:return t.prev=38,t.finish(38);case 40:case"end":return t.stop()}}),t,null,[[0,32,38,40]])})));return function(e){return t.apply(this,arguments)}}()},yo=function(e){return function(){var t=(0,a.Z)(r().mark((function t(n){var a,i,s,o;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a=window.game,i=a.facebook,a.globalScene.screen.open(Qi.o4.NOTIFY_SCREEN,{message:"Loading...",loading:!0}),s=i.contextID,o=i.contextType,co({contextId:s}),n(to()),t.next=9,n(wo(vi,e));case 9:n(Ii(s,o)),lo(100),t.next=19;break;case 13:if(t.prev=13,t.t0=t.catch(0),lo(100),!(t.t0 instanceof Gr)){t.next=18;break}return t.abrupt("return");case 18:(0,h.tO)(t.t0);case 19:return t.prev=19,t.finish(19);case 21:case"end":return t.stop()}}),t,null,[[0,13,19,21]])})));return function(e){return t.apply(this,arguments)}}()},bo=function(e){return function(){var t=(0,a.Z)(r().mark((function t(n){var a,i,s,o,c;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a=window.game,i=a.facebook,s=a.globalScene,o=a.analytics,s.screen.open(Qi.o4.NOTIFY_SCREEN,{message:"Loading...",loading:!0}),c=i.getContextID(),co({contextId:c}),o.event(pn._.JOIN_GROUP,{group_id:c}),t.next=8,n(wo(bi,e));case 8:t.next=17;break;case 10:if(t.prev=10,t.t0=t.catch(0),!(t.t0 instanceof Gr)){t.next=14;break}return t.abrupt("return");case 14:if("INVALID_OPERATION"!==(null==t.t0?void 0:t.t0.code)){t.next=16;break}return t.abrupt("return");case 16:(0,h.tO)(t.t0);case 17:return t.prev=17,lo(100),t.finish(17);case 20:case"end":return t.stop()}}),t,null,[[0,10,17,20]])})));return function(e){return t.apply(this,arguments)}}()},Ao=function(e,t){return function(){var n=(0,a.Z)(r().mark((function n(a,i){var s,o,c,u,l,d,p,f,g,m,v,y,b,A,S;return r().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,s=window.game,o=s.player,c=s.profile,u=s.facebook,(l=s.globalScene).screen.open(Qi.o4.NOTIFY_SCREEN,{message:"Loading...",loading:!0}),d=i(),p=o.getPlayerId(d),!((f=o.getConnectedPlayers(d)).length>0)||f[t]){n.next=10;break}return a(Co({mode:mi})),l.events.emit(_i.K.SWITCH,_i.C.GAME_SCENE),n.abrupt("return");case 10:return g=Wi,n.next=13,u.getContextPlayers(p);case 13:if(m=n.sent,t===p||t===g.playerId||!f[t]){n.next=18;break}g=f[t],n.next=26;break;case 18:if(1!==m.length){n.next=22;break}g=m[0],n.next=26;break;case 22:return n.next=24,c.requestProfiles([t]);case 24:(v=c.getProfiles())[t]&&(g=v[t]);case 26:return n.next=28,a(Xs(e,g));case 28:if(d=i(),ms(d,{playerId:p})!==Wi.playerId){n.next=33;break}return n.next=33,a(js(e));case 33:if(d=i(),ms(d,{playerId:p})===p||!f[t]){n.next=38;break}return a(go(t,!0)),n.abrupt("return");case 38:if(ps(d)===e){n.next=42;break}return l.events.emit(_i.K.SWITCH,_i.C.DASHBOARD_SCENE),n.abrupt("return");case 42:y=fs(d),b=vs(d,{playerId:p}),A=u.getContextID(),S=u.contextType,a(Ii(A,S)),a(Co(b?{mode:yi}:{mode:vi,status:y})),l.events.emit(_i.K.SWITCH,_i.C.GAME_SCENE),b&&setTimeout((function(){window.game.scene.getScene(_i.C.GAME_SCENE).events.emit("player-finish-challenge")}),1e3),n.next=55;break;case 52:n.prev=52,n.t0=n.catch(0),(0,h.tO)(n.t0);case 55:return n.prev=55,lo(500),n.finish(55);case 58:case"end":return n.stop()}}),n,null,[[0,52,55,58]])})));return function(e,t){return n.apply(this,arguments)}}()},So=function(e){return function(t){try{var n=window.game.player,a=n.getPlayerId();wr(a,e).catch((function(e){(0,h.tO)(new Error(e))}));var i=n.getPlayerData(),r=i.score,s=void 0===r?0:r,o=i.level;s<e&&n.setBestScore(e);var c={score:e,level:o};t(no(a,c)),t(ao(c))}catch(u){if(u instanceof Fr)return;(0,h.tO)(u)}}},Eo=function(){var e=window.game.cache.text.get("draw1/level1");return e?Phaser.Math.RND.pick(e.split("\n")):"ld8gzNHtv0"},wo=function(e,t){return void 0===t&&(t=null),function(){var n=(0,a.Z)(r().mark((function n(i,s){var o,c,u,l,d,p,f,g,m,v,y,b,A,S,E,w;return r().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,c=window.game,u=c.player,l=c.analytics,d=c.facebook,p=c.globalScene,f=d.getContextID(),g=0,m=s(),l.event(pn._.MATCH_START,{game_mode:GameCore.Utils.String.toUpperCamelCase(e),level:1,level_name:"level_1"}),i({type:Xn,payload:{}}),!qt()(o=[mi,Ai,yi]).call(o,e)){n.next=16;break}return n.next=10,i((function(e){try{var t=window.game.player;e({type:aa,payload:{}});var n=t.getPlayerId(),a=ws(Zs.SingleMatchStore)||{},i=a.data;a.data=Ws(i),Ns({playerId:n,match:a}),e(Ys(a))}catch(r){if(e(Ys(null)),r instanceof is)return;if(r instanceof pi)return;if(r instanceof _s)return;(0,h.tO)(r)}}));case 10:if(m=s(),ls(m)){n.next=15;break}return n.next=15,i(Hs());case 15:g=hs(m);case 16:if(e===bi&&i(Qs(t)),e!==vi){n.next=28;break}return v=Eo(),y=window.game.player.getPlayerSettings().drawMode3,b={seed:v,draw3:y},n.next=23,i(Vs(t,b));case 23:m=s(),ps(m),A=gs(m),S=A.playerId,f||(f=window.FBInstant.context.getID()),as(m,{opponentId:S});case 28:"online"===e&&i(function(){var e=(0,a.Z)(r().mark((function e(t){var n,a,i,s,o,c,u,l;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=window.game.player,s=i.getPlayer(),o=s.playerId,c=s.name,u=s.photo,t({type:fa,payload:{playerId:o}}),l={},De()(n=Mt()(a=new Array(20)).call(a,null)).call(n,(function(e,t){var n="0"+(t+1);l[n]={playerId:n,name:"MPlayer "+n,photo:"./assets/images/others/avatar.png"}})),l[o]={playerId:o,name:c,photo:u},t($s("mock",l));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),E=u.getPlayerData(m),w=E.score,i(ao({score:g,bestScore:void 0===w?0:w})),i({type:qn,payload:{mode:e,contextId:f}}),oo.instance.setGameMode(e),i(Ci(e)),p.events.emit(Ti.MATCH_GAMEPLAY_START),n.next=44;break;case 37:if(n.prev=37,n.t0=n.catch(0),!(n.t0 instanceof is)){n.next=43;break}return window.game.globalScene.screen.open(Qi.o4.NOTIFY_SCREEN,{message:"Sorry!, you can now\ncreate this match!",duration:2500,loading:!1}),n.abrupt("return");case 43:(0,h.tO)(n.t0);case 44:return n.prev=44,lo(0),n.finish(44);case 47:case"end":return n.stop()}}),n,null,[[0,37,44,47]])})));return function(e,t){return n.apply(this,arguments)}}()},To=function(e,t){return function(){var n=(0,a.Z)(r().mark((function n(a,i){var s,o,c,u,l,h,d,f,g,m,v,y,b,A,S,E,w,T,I,C,k;return r().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(o=window.game.player,c=t.score,u=void 0===c?0:c,l=t.level,h=void 0===l?0:l,d=t.time,f=void 0===d?0:d,g=t.moves,m=void 0===g?0:g,v=i(),!(qt()(s=[mi,Ai]).call(s,e)>=0)){n.next=7;break}return y=ls(v),n.next=7,a(zs(y));case 7:if(e!==Ai){n.next=12;break}if(!(b=Wr(v))){n.next=12;break}return n.next=12,(0,Hr.bh)(b,o.getPlayerId(),u);case 12:if(e===bi&&(a({type:pa,payload:{}}),A=o.getPlayerId(),a(no(A,t))),e!==vi){n.next=23;break}return S=ps(v),E=ds(v),w=E.whitePlayerId,T=E.extraData,I=window.game.player.getPlayerId(),C=I===w,k=(0,p.Z)({},T),C?k.whitePlayerData={score:u,time:f,moves:m}:k.blackPlayerData={score:u,time:f,moves:m},n.next=23,a(qs(S,u,(0,p.Z)({level:h},k)));case 23:a({type:Jn,payload:{mode:e}});case 24:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}()},Io=function(){var e=(0,a.Z)(r().mark((function e(){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("SOLO"!=window.FBInstant.context.getType()){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,new(o())((function(e){try{if("SOLO"==window.FBInstant.context.getType())return e();var t=setInterval((function(){"SOLO"==window.FBInstant.context.getType()&&(clearInterval(t),e())}),200),n=function(){var n=(0,a.Z)(r().mark((function n(){return r().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,window.FBInstant.context.switchAsync("SOLO",!0);case 3:window.game.analytics.event(pn._.SWITCH_SOLO_CONTEXT,{success:!0}),n.next=11;break;case 6:n.prev=6,n.t0=n.catch(0),window.game.analytics.event(pn._.SWITCH_SOLO_CONTEXT,{success:!1}),clearInterval(t),e();case 11:case"end":return n.stop()}}),n,null,[[0,6]])})));return function(){return n.apply(this,arguments)}}();n()}catch(i){console.log("same context"),e()}})).then((function(){}));case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Co=function(e){return function(t){var n=e.mode,a=e.status;t({type:Qn,payload:{mode:n,status:a}}),oo.instance.setGameMode(n),(0,h.sw)("game-mode",n)}},ko=function(){function e(e){this.scene=void 0,this.group=void 0,this.scene=e,this.createGroup()}var t=e.prototype;return t.getAll=function(){return this.group.getChildren()},t.createGroup=function(){this.group=this.scene.add.group()},e}(),xo=ko,Po=n(576),_o=n(580),Oo=fn.Z.DEFAULT,Ro=Oo.KEY,Do=Oo.FRAME,Lo=function(e){function t(t){var n;return(n=e.call(this,t,Ro,Do.BUTTON_YELLOW_CIRCLE,100.05,78.2)||this).scene=void 0,n.setName("Home"),n.scene=t,n.createIcon(),n}return(0,f.Z)(t,e),t.prototype.createIcon=function(){var e=this.scene.make.image({key:Ro,frame:Do.ICON_FLAT_HOME});e.setSize(43,43).setDisplaySize(43,43),Phaser.Display.Align.In.Center(e,this.button),this.add(e)},t}(_o.Z),Bo=Lo,No=n(557),Mo=fn.Z.DEFAULT,Go=Mo.KEY,Fo=Mo.FRAME,Zo=function(e){function t(t){var n;return(n=e.call(this,t,Go,Fo.BUTTON_GREEN_SHORT,176,77.05)||this).scene=void 0,n.setName("PlayWithFriends"),n.scene=t,n.createLabel(),n}return(0,f.Z)(t,e),t.prototype.createLabel=function(){var e=this.scene.make.bitmapText({font:No.Z.PRIMARY.KEY,size:this.scene.fontSize(30),text:"PLAY"});Phaser.Display.Align.In.Center(e,this.button,0,-12);var t=this.scene.make.bitmapText({font:No.Z.PRIMARY.KEY,size:this.scene.fontSize(18),text:"WITH FRIENDS"});Phaser.Display.Align.In.Center(t,this.button,0,11),this.add([e,t])},t}(_o.Z),Uo=Zo,Wo=fn.Z.DEFAULT,Ho=Wo.KEY,zo=Wo.FRAME,Yo=function(e){function t(t){var n;return(n=e.call(this,t,Ho,zo.BUTTON_YELLOW_CIRCLE,100.05,78.2)||this).scene=void 0,n.setName("Rank"),n.scene=t,n.createIcon(),n}return(0,f.Z)(t,e),t.prototype.createIcon=function(){var e=this.scene.make.image({key:Ho,frame:zo.ICON_FLAT_RANK});e.setSize(43,43).setDisplaySize(43,43),Phaser.Display.Align.In.Center(e,this.button),this.add(e)},t}(_o.Z),Ko=Yo,Vo=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n.homeButton=void 0,n.rankButton=void 0,n.pwfButton=void 0,n.entrancesAnimation=void 0,n.runAnimation=function(){n.entrancesAnimation.play()},n.scene=t,n.setName("FooterBar"),n.createHomeButton(),n.createRankButton(),n.createPlayWithFriendsButton(),n.createEntrancesAnimation(),n.alignIcons(),n.scene.add.existing((0,Hi.Z)(n)),n}(0,f.Z)(t,e);var n=t.prototype;return n.createEntrancesAnimation=function(){this.entrancesAnimation=new Po.Z({targets:[this],delay:800,props:{y:"-=5",alpha:{start:0,from:0,to:1}}})},n.alignIcons=function(){Phaser.Display.Align.In.Center(this.homeButton,this,-130,-6),Phaser.Display.Align.In.Center(this.pwfButton,this,0,-6),Phaser.Display.Align.In.Center(this.rankButton,this,130,-6)},n.createHomeButton=function(){this.homeButton=new Bo(this.scene),this.add(this.homeButton)},n.createRankButton=function(){this.rankButton=new Ko(this.scene),this.add(this.rankButton)},n.createPlayWithFriendsButton=function(){this.pwfButton=new Uo(this.scene),this.add(this.pwfButton)},t}(Phaser.GameObjects.Container),jo=Vo,Xo=n(573),qo={targets:[],yoyo:!0,duration:120,ease:Phaser.Math.Easing.Circular.Out,props:{scale:{from:1,to:1.3}}},Jo=function(e){function t(t){return e.call(this,qo,t)||this}return(0,f.Z)(t,e),t}(zi.Z),Qo=fn.Z.DEFAULT,$o=Qo.KEY,ec=Qo.FRAME,tc=function(e){function t(t,n,a,i,r){var s;return(s=e.call(this,t,n,a)||this).barTopLeft=void 0,s.barTopMid=void 0,s.barTopRight=void 0,s.barMidLeft=void 0,s.barMidBg=void 0,s.barMidRight=void 0,s.barBottomLeft=void 0,s.barBottomMid=void 0,s.barBottomRight=void 0,s.setSize(i,r),s.setDepth(ln.Z.POPUP),s.createPopup(),s.scene.add.existing((0,Hi.Z)(s)),s}(0,f.Z)(t,e);var n=t.prototype;return n.createPopup=function(){this.createPopupImages(),this.updatePopupSize(),this.alignPopupImages()},n.createPopupImages=function(){this.barTopLeft=this.scene.add.image(0,0,$o,ec.POPUP_TOP_LEFT),this.barTopMid=this.scene.add.image(0,0,$o,ec.POPUP_TOP_MID),this.barTopRight=this.scene.add.image(0,0,$o,ec.POPUP_TOP_RIGHT),this.barMidLeft=this.scene.add.image(0,0,$o,ec.POPUP_MID_LEFT),this.barMidBg=this.scene.add.image(0,0,$o,ec.POPUP_MID_MID),this.barMidRight=this.scene.add.image(0,0,$o,ec.POPUP_MID_RIGHT),this.barBottomLeft=this.scene.add.image(0,0,$o,ec.POPUP_BOTTOM_LEFT),this.barBottomMid=this.scene.add.image(0,0,$o,ec.POPUP_BOTTOM_MID),this.barBottomRight=this.scene.add.image(0,0,$o,ec.POPUP_BOTTOM_RIGHT),this.barTopLeft.setWorldSize(65,48),this.barTopMid.setWorldSize(65,48),this.barTopRight.setWorldSize(65,48),this.barMidLeft.setWorldSize(65,48),this.barMidBg.setWorldSize(65,48),this.barMidRight.setWorldSize(65,48),this.barBottomLeft.setWorldSize(65,48),this.barBottomMid.setWorldSize(65,48),this.barBottomRight.setWorldSize(65,48),this.add([this.barTopRight,this.barTopMid,this.barBottomLeft,this.barBottomRight,this.barMidLeft,this.barMidRight,this.barTopLeft,this.barBottomMid,this.barMidBg])},n.updatePopupSize=function(){this.barTopMid.setWorldSize(this.width-129,this.barTopMid.height),this.barMidLeft.setWorldSize(this.barMidLeft.width,this.height-95),this.barMidBg.setWorldSize(this.width-129,this.height-95),this.barMidRight.setWorldSize(this.barMidRight.width,this.height-95),this.barBottomMid.setWorldSize(this.width-129,this.barBottomMid.height)},n.alignPopupImages=function(){Phaser.Display.Align.In.TopLeft(this.barTopLeft,this),Phaser.Display.Align.In.TopCenter(this.barTopMid,this),Phaser.Display.Align.In.TopRight(this.barTopRight,this),Phaser.Display.Align.In.LeftCenter(this.barMidLeft,this),Phaser.Display.Align.In.Center(this.barMidBg,this),Phaser.Display.Align.In.RightCenter(this.barMidRight,this),Phaser.Display.Align.In.BottomLeft(this.barBottomLeft,this),Phaser.Display.Align.In.BottomCenter(this.barBottomMid,this),Phaser.Display.Align.In.BottomRight(this.barBottomRight,this)},(0,ue.Z)(t,[{key:"onClose",set:function(e){this.setInteractive({useHandCursor:!0}),this.on(Phaser.Input.Events.GAMEOBJECT_POINTER_DOWN,e)}}]),t}(Phaser.GameObjects.Container),nc=tc,ac=function(e){function t(t,n){var a;return(a=e.call(this,t)||this).payload=void 0,a.mainText=void 0,a.shadowText=void 0,a.payload=n,a.createMainText(),a.createShadowText(),a.updateSize(),a.moveDown(a.shadowText),a.scene.add.existing((0,Hi.Z)(a)),a}(0,f.Z)(t,e);var n=t.prototype;return n.setText=function(e){this.mainText.setText(e),this.shadowText.setText(e),this.updateSize()},n.setTintText=function(e,t,n,a){this.mainText.setTint(e,t,n,a)},n.setDropShadow=function(e,t,n,a){void 0===a&&(a=1),this.shadowText.setVisible(!0),this.shadowText.setTint(n),this.shadowText.setAlpha(a),Phaser.Display.Align.In.Center(this.shadowText,this.mainText,e,t)},n.updateSize=function(){var e=this.mainText,t=e.width,n=e.height;this.setSize(t,n)},n.createMainText=function(){this.mainText=this.scene.make.bitmapText({font:this.payload.font,size:this.payload.size,origin:{x:.5,y:.5}}),this.add(this.mainText)},n.createShadowText=function(){this.shadowText=this.scene.make.bitmapText({font:this.payload.font,size:this.payload.size,origin:{x:.5,y:.5},visible:!1}),this.add(this.shadowText)},t}(Phaser.GameObjects.Container),ic=ac,rc=n(579),sc=fn.Z.DEFAULT,oc=sc.KEY,cc=sc.FRAME,uc=function(e){function t(t){var n;return(n=e.call(this,t)||this).cat=void 0,n.effect=void 0,n.runStarTwinkle=function(){var e=n.cat,t=e.x,a=e.y,i=e.displayWidth,r=e.displayHeight,s=a-20;n.effect.run(1,t,s,i,r)},n.createEffect(),n.createCat(),n.runCatAnimation(),n.scene.add.existing((0,Hi.Z)(n)),n}(0,f.Z)(t,e);var n=t.prototype;return n.createCat=function(){this.cat=this.scene.make.image({key:oc,frame:cc.THE_CAT,origin:{x:.5,y:1}}),this.cat.setWorldSize(204.5,112.5),this.cat.setY(this.cat.height/2),this.add(this.cat)},n.createEffect=function(){this.effect=new rc.Z(this.scene),this.add(this.effect)},n.runCatAnimation=function(){new Xo.Z({targets:[this.cat],duration:1e3,props:{scale:"+=0.02"}}).play()},t}(Phaser.GameObjects.Container),lc=uc,hc=fn.Z.DEFAULT,dc=hc.KEY,pc=hc.FRAME,fc=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n.bestScore=void 0,n.payload=void 0,n.theCat=void 0,n.popup=void 0,n.ribbon=void 0,n.yourScoreText=void 0,n.bestScoreText=void 0,n.currentScoreText=void 0,n.entrancesAnimation=void 0,n.scoreAnimation=void 0,n.counterAnimation=void 0,n.scene=t,n.bestScore=0,n.createPopup(),n.createTheCat(),n.createRibbon(),n.createYourScoreText(),n.createCurrentScore(),n.createBestScore(),n.createScoreAnimation(),n.createEntrancesAnimation(),n.scene.add.existing((0,Hi.Z)(n)),n}(0,f.Z)(t,e);var n=t.prototype;return n.updateData=function(e){this.payload=e;var t=e.bestScore,n=e.currentScore;if(n<=t)return this.setBestScore(t),this.setCurrentScore(n),void this.runScoreAnimation();this.runAnimation()},n.runAnimation=function(){var e=this;this.runScoreCounter(),this.scene.time.delayedCall(1300,(function(){e.entrancesAnimation.play(),e.scene.audio.playSound($i.Z.SCORE_COUNTER)}))},n.runScoreCounter=function(){var e,t=this,n=this.payload,a=n.bestScore,i=n.currentScore;null==(e=this.counterAnimation)||e.remove(),this.counterAnimation=this.scene.tweens.addCounter({from:0,to:i,delay:500,duration:2e3,completeDelay:300,onUpdate:function(e){var n=Math.floor(e.getValue());t.runScoreAnimation(),t.setCurrentScore(n)},onComplete:function(){t.bestScore=a,t.setBestScore(a),t.setCurrentScore(i),t.counterAnimation.remove()}})},n.runScoreAnimation=function(){this.scoreAnimation.play()},n.setBestScore=function(e){this.bestScoreText.setText("Best score: "+e)},n.setCurrentScore=function(e){this.currentScoreText.setText(""+e)},n.createPopup=function(){this.popup=new nc(this.scene,0,0,284,240),this.add(this.popup)},n.createTheCat=function(){this.theCat=new lc(this.scene),Phaser.Display.Align.In.TopCenter(this.theCat,this.popup),this.add(this.theCat)},n.createRibbon=function(){this.ribbon=this.scene.make.image({key:dc,frame:pc.RIBBON_LONG}),this.ribbon.setSize(341,80).setDisplaySize(341,80),Phaser.Display.Align.In.Center(this.ribbon,this.theCat,0,93),this.add(this.ribbon)},n.createYourScoreText=function(){this.yourScoreText=this.scene.make.bitmapText({font:No.Z.PRIMARY.KEY,size:this.scene.fontSize(30),origin:{x:.5,y:.5},text:"Your score"}),Phaser.Display.Align.In.Center(this.yourScoreText,this.ribbon,0,-10),this.add(this.yourScoreText)},n.createCurrentScore=function(){this.currentScoreText=new ic(this.scene,{font:No.Z.PRIMARY.KEY,size:this.scene.fontSize(60)}),this.currentScoreText.setTintText(15779090,15779090,15704623,15704623),this.currentScoreText.setDropShadow(0,2,8804140),Phaser.Display.Align.In.Center(this.currentScoreText,this.popup,0,30),this.add(this.currentScoreText)},n.createBestScore=function(){this.bestScoreText=this.scene.make.bitmapText({font:No.Z.PRIMARY.KEY,size:this.scene.fontSize(24),origin:{x:.5,y:.5},text:"Best score: "+this.bestScore}),this.bestScoreText.setTint(10494183),Phaser.Display.Align.In.BottomCenter(this.bestScoreText,this.popup,0,-25),this.add(this.bestScoreText)},n.createEntrancesAnimation=function(){this.entrancesAnimation=new Xo.Z({targets:[this],repeat:0,duration:200,props:{scale:"+=0.03"}})},n.createScoreAnimation=function(){this.scoreAnimation=new Jo({targets:[this.currentScoreText],props:{scale:{from:1,to:1.3}}})},t}(Phaser.GameObjects.Container),gc=fc,mc=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n.bestScoreBlock=void 0,n.scene=t,n.createBestScoreBlock(),n.scene.add.existing((0,Hi.Z)(n)),n}return(0,f.Z)(t,e),t.prototype.createBestScoreBlock=function(){this.bestScoreBlock=new gc(this.scene),this.add(this.bestScoreBlock)},t}(Phaser.GameObjects.Container),vc=mc,yc=n(583),bc=n(564),Ac={targets:[],duration:600,ease:Phaser.Math.Easing.Back.Out,props:{y:{from:250,to:0},scale:{from:.9,to:1},alpha:{start:0,from:0,to:1}}},Sc=function(e){function t(t){return e.call(this,Ac,t)||this}return(0,f.Z)(t,e),t}(zi.Z),Ec=function(e){function t(t,n){var a;(a=e.call(this,t)||this).payload=void 0,a.loading=void 0,a.photo=void 0,a.avtFrame=void 0,a.background=void 0,a.loadPhotoTimer=void 0,a.handleLoadPhotoAfterDelay=function(e,t){return function(){var n=a.scene.textures.get(e);n&&n.key===e?a.handleLoadComplete(e):(a.scene.load.once("filecomplete-image-"+e,a.handleLoadComplete),a.scene.load.image(e,t),a.scene.load.start())}},a.handleLoadComplete=function(e){if(a.scene){var t=a.payload,n=t.id,i=t.radius,r=void 0===i?0:i;if(n&&n===e){var s=n+"_bordered_"+r,o=r>0?s:n,c=a.scene.textures.get(o);if(c&&c.key===o)a.setPhoto(c.key);else if(0!=r&&r<100){if(!GameCore.Utils.Image.drawBorder({scene:a.scene,key:n,newKey:s,radius:r}))return void a.showLoading(!1);a.setPhoto(s)}else if(100==r){if(!GameCore.Utils.Image.drawCircle({scene:a.scene,key:n,newKey:s}))return void a.showLoading(!1);a.setPhoto(s)}else a.setPhoto(n)}}},a.handleLoadPhotoFailed=function(e){e.key===a.payload.id&&a.setDefaultAvatar(e.key)},a.scene.add.existing((0,Hi.Z)(a)),a.payload=n,a.setSize(n.width,n.height),a.createBackground(),a.createLoading(),a.createPhoto(),a.createFrame();var i=a.payload,r=i.id,s=i.url,o=i.radius;return r&&s&&a.loadPhoto(r,s,o),a.addDefaultListeners(),a}(0,f.Z)(t,e);var n=t.prototype;return n.setFrame=function(e){this.avtFrame.setFrame(e),this.avtFrame.setVisible(!0)},n.setBackground=function(e){this.background.setFrame(e)},n.loadPhoto=function(e,t,n){var a;if(void 0===n&&(n=0),this.payload.id=e,this.payload.url=t,this.payload.radius=n,null==(a=this.loadPhotoTimer)||a.remove(),e&&t){var i=this.scene.textures.get(e);if(i&&i.key===e)this.handleLoadComplete(e);else{this.showLoading(!0);var r=this.payload.loadDelay||0;this.loadPhotoTimer=this.scene.time.delayedCall(r,this.handleLoadPhotoAfterDelay(e,t))}}else this.setPhoto(Ui.Z.AVATAR.KEY)},n.addDefaultListeners=function(){var e=this;this.scene.load.on(Phaser.Loader.Events.FILE_LOAD_ERROR,this.handleLoadPhotoFailed),this.on(Phaser.GameObjects.Events.DESTROY,(function(){var t;null==(t=e.loadPhotoTimer)||t.remove(),e.scene.load.off(Phaser.Loader.Events.FILE_LOAD_ERROR,e.handleLoadPhotoFailed)}))},n.setDefaultAvatar=function(e){this.loadPhoto(e,Ui.Z.AVATAR.FILE,this.payload.radius)},n.createBackground=function(){var e=this.payload,t=e.key,n=e.background;this.background=this.scene.make.image({key:t,frame:n}),this.background.setWorldSize(this.width,this.height),this.add(this.background)},n.createLoading=function(){this.loading=new Ji(this.scene),this.loading.setWorldSize(.75*this.width,.75*this.height),this.loading.setVisible(!1),this.add(this.loading)},n.createPhoto=function(){this.photo=this.scene.make.image({x:0,y:0,origin:{x:.5,y:.5},visible:!1}),this.add(this.photo)},n.createFrame=function(){var e=this.payload,t=e.key,n=e.frame,a=e.width,i=e.height;n?(this.avtFrame=this.scene.make.image({key:t,frame:n}),this.avtFrame.setWorldSize(a,i)):this.avtFrame=this.scene.make.image({x:0,y:0,origin:{x:.5,y:.5},visible:!1}),this.add(this.avtFrame)},n.showLoading=function(e){this.photo.setVisible(!e),this.loading.setVisible(e)},n.setPhoto=function(e){this.showLoading(!1),this.photo.setTexture(e),this.photo.setFrame(0);var t=this.payload,n=t.width,a=t.height,i=Math.min(n,a)-10;this.photo.setWorldSize(i,i),Phaser.Display.Align.In.Center(this.photo,this.background)},n.addBackground=function(){var e="avatar-background";if(!this.scene.textures.exists(e)){var t=this.width,n=this.height,a=this.scene.add.graphics();a.fillStyle(65280,.2),a.fillRect(0,0,t,n),a.generateTexture(e,t,n),a.destroy()}var i=this.scene.add.image(0,0,e);this.add(i)},t}(Phaser.GameObjects.Container),wc=Ec,Tc=n(581),Ic=n(582),Cc=n(297),kc=n.n(Cc),xc=function(e){function t(t,n){var a;return(a=e.call(this,t,n)||this).name="WideFrameRenderFail",a.message=t||"Wide frame render fail",a.payload=n,a}return(0,f.Z)(t,e),t}((0,z.Z)(Error)),Pc=function(e){if("string"!==typeof e||!e)throw new xc(null,{imageShare:e})},_c=(function(){var e=(0,a.Z)(r().mark((function e(){var t,n,a,i,s,o,c,u;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=window.game,n=t.player,a=t.globalScene,i=n.getPlayer(),s=i.playerId,o=i.photo,c=_c({playerId:s,playerPhoto:o})){e.next=6;break}return console.warn("getRenderOptionsBestScore"),e.abrupt("return");case 6:return u={name:"share-best-score",width:750,height:1e3,renderOptions:c},e.next=9,a.frameCapture.capture(u);case 9:return e.abrupt("return",e.sent);case 10:case"end":return e.stop()}}),e)})))}(),function(e){var t=e.playerId,n=void 0===t?"10":t,a=e.playerPhoto,i=void 0===a?"":a;return"string"!==typeof n||"string"!==typeof i?null:{avatar:{name:""+n,type:"image",x:248,y:96,image:i,width:250,height:250,fallbackWithImage:Ui.Z.AVATAR.KEY},wideFrame:{name:"wide-frame-share",type:"image",x:0,y:0,image:"./assets/wideframes/wide-frame-share.png",width:750,height:1e3}}}),Oc=function(){return(0,a.Z)(r().mark((function e(){var t,n,a,i,s,o,c,u,l,d,p,f,g;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=window.game,n=t.player,a=t.analytics,i=t.facebook,s=t.globalScene,o=t.storage,e.prev=1,s.screen.open(Qi.o4.NOTIFY_SCREEN,{message:"Loading...",loading:!0}),c=o.getState(),u=Es(c),l=n.getPlayer(),d=l.playerId,p=l.name,f=l.photo,e.next=8,Rc(u.score);case 8:return g=e.sent,Pc(g),e.next=12,i.shareAsync({text:"Join Solitaire, play your cards right and remain victorious, starting right now!",intent:"SHARE",image:g||"",data:{playerId:d,playerName:p,playerPhoto:f,type:fi}});case 12:a.event(pn._.SHARE,{share_content_type:"CurrentScore",success:!0}),e.next=19;break;case 15:e.prev=15,e.t0=e.catch(1),a.event(pn._.SHARE,{share_content_type:"CurrentScore",success:!1}),(0,h.tO)(e.t0);case 19:return e.prev=19,s.screen.close(Qi.o4.NOTIFY_SCREEN),e.finish(19);case 22:case"end":return e.stop()}}),e,null,[[1,15,19,22]])})))},Rc=function(){var e=(0,a.Z)(r().mark((function e(t){var n,a,i,s,o,c,u,l;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=window.game,a=n.player,i=n.globalScene,s=a.getPlayer(),o=s.playerId,c=s.photo,u=Dc({playerId:o,playerPhoto:c,playerScore:t})){e.next=6;break}return console.warn("getRenderOptionsBestScore"),e.abrupt("return");case 6:return l={name:"share-best-score",width:952,height:492,renderOptions:u},e.next=9,i.frameCapture.capture(l);case 9:return e.abrupt("return",e.sent);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Dc=(function(){var e=(0,a.Z)(r().mark((function e(t){var n,a,i,s,o,c,u,l,h,d,p;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=window.game,a=n.player,i=n.globalScene,s=Ss(t),o=a.getPlayer(),c=o.playerId,u=o.photo,l=s[c]||{},h=l.score,d=Dc({playerId:c,playerPhoto:u,playerScore:h})){e.next=8;break}return console.warn("getRenderOptionsCurrentScore"),e.abrupt("return");case 8:return p={name:"share-current-score",width:952,height:492,renderOptions:d},e.next=11,i.frameCapture.capture(p);case 11:return e.abrupt("return",e.sent);case 12:case"end":return e.stop()}}),e)})))}(),function(e){var t=e.playerId,n=void 0===t?"10":t,a=e.playerPhoto,i=void 0===a?"":a,r=e.playerScore,s=void 0===r?0:r;return"string"!==typeof n||"string"!==typeof i||"number"!==typeof s?null:{avatar:{name:""+n,type:"image",x:65,y:75,image:i,width:180,height:180,fallbackWithImage:Ui.Z.AVATAR.KEY},wideFrame:{name:"wide-frame-message-win",type:"image",x:0,y:0,image:"./assets/wideframes/wide-frame-message-win.png",width:952,height:492},playerScore:{type:"text",x:165,y:344,font:"600 70px",fillStyle:"#ffd10d",text:""+(s||""),textAlign:"center"}}}),Lc=(function(){var e=(0,a.Z)(r().mark((function e(){var t,n,a,i,s,o,c,u;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=window.game,n=t.player,a=t.globalScene,i=n.getPlayer(),s=i.playerId,o=i.photo,c=Lc({playerId:s,playerPhoto:o})){e.next=6;break}return console.warn("getRenderOptionsCurrentScore"),e.abrupt("return");case 6:return u={name:"share-current-score",width:952,height:492,renderOptions:c},e.next=9,a.frameCapture.capture(u);case 9:return e.abrupt("return",e.sent);case 10:case"end":return e.stop()}}),e)})))}(),function(e){var t=e.playerId,n=void 0===t?"10":t,a=e.playerPhoto,i=void 0===a?"":a;e.playerScore;return"string"!==typeof n||"string"!==typeof i?null:{avatar:{name:""+n,type:"image",x:65,y:75,image:i,width:180,height:180,fallbackWithImage:Ui.Z.AVATAR.KEY},wideFrame:{name:"wide-frame-message-win",type:"image",x:0,y:0,image:"./assets/wideframes/wide-frame-message-win.png",width:952,height:492}}}),Bc=function(){return(0,a.Z)(r().mark((function e(){var t,n,a,i,s,o,c,u,l,d;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=window.game,n=t.player,a=t.analytics,i=t.facebook,s=t.globalScene,e.prev=1,s.screen.open(Qi.o4.NOTIFY_SCREEN,{message:"Loading...",loading:!0}),e.next=5,Nc();case 5:return o=e.sent,Pc(o),c=n.getPlayer(),u=c.playerId,l=c.name,d=c.photo,e.next=10,i.shareAsync({text:"A ha, I'm the best!",intent:"CHALLENGE",image:o||"",data:{playerId:u,playerName:l,playerPhoto:d,type:fi}});case 10:a.event(pn._.SHARE,{share_content_type:"Leaderboard",success:!0}),e.next=17;break;case 13:e.prev=13,e.t0=e.catch(1),a.event(pn._.SHARE,{share_content_type:"Leaderboard",success:!1}),(0,h.tO)(e.t0);case 17:return e.prev=17,s.screen.close(Qi.o4.NOTIFY_SCREEN),e.finish(17);case 20:case"end":return e.stop()}}),e,null,[[1,13,17,20]])})))},Nc=function(){var e=(0,a.Z)(r().mark((function e(){var t,n,a,i,s,o,c,u,l,h,d,p,f,g,m,v,y,b,A,S;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=window.game,n=t.player,a=t.profile,i=t.globalScene,s=n.getPlayer(),o=s.playerId,c=s.name,u=s.photo,(l=n.getConnectedPlayerIds(99,0)).push(o),h=[],e.next=7,yr({playerIds:GameCore.Utils.Array.unique(l),limit:l.length});case 7:d=e.sent,p=GameCore.Utils.Object.keyBy(d,"playerId"),f={playerId:o,name:c,photo:u,score:0},GameCore.Utils.Object.hasOwn(p,o)&&(f=p[o]),h.push(f),e.t0=kc()(r()).call(r(),p);case 14:if((e.t1=e.t0()).done){e.next=27;break}if(g=e.t1.value,!GameCore.Utils.Object.hasOwn(p,g)){e.next=25;break}if(m=p[g],3!==h.length){e.next=20;break}return e.abrupt("break",27);case 20:if(m.playerId!==o){e.next=22;break}return e.abrupt("continue",14);case 22:if(!(Number(m.score)>Number(f.score))){e.next=24;break}return e.abrupt("continue",14);case 24:h.push(m);case 25:e.next=14;break;case 27:return v=GameCore.Utils.Array.unique(l),e.next=30,a.requestProfiles(v);case 30:if(y=a.getProfiles(),h.forEach((function(e,t){var n=e.playerId;if(GameCore.Utils.Object.hasOwn(y,n)){var a=y[n],i=a.name,r=a.photo;h[t].name=i,h[t].photo=r}})),h.length<3)for(b=0;b<=3-h.length;)h.push({playerId:"bot"+b,name:"-----",score:0,photo:"./assets/images/others/avatar.png"}),b++;if(A=Mc({playerId:o,playerName:c,playerPhoto:u,listLeaders:h})){e.next=37;break}return console.warn("getRenderOptionsLeaderboard"),e.abrupt("return");case 37:return S={name:"share-leaderboard",width:1500,height:2e3,renderOptions:A},e.next=40,i.frameCapture.capture(S);case 40:return e.abrupt("return",e.sent);case 41:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Mc=function(e){var t=e.playerId,n=void 0===t?"10":t,a=e.playerPhoto,i=void 0===a?"":a,r=e.listLeaders,s=void 0===r?[]:r;if(!Array.isArray(s))return null;if("string"!==typeof n)return null;if("string"!==typeof i)return null;var o={avatar:{name:""+n,type:"image",x:510,y:278,image:i,width:510,height:510,fallbackWithImage:Ui.Z.AVATAR.KEY}};return s.forEach((function(e,t){var n=e.playerId,a=e.photo;o["photo_"+n]={name:""+n,type:"image",x:436,y:1294+180*t,image:a,width:96,height:96,fallbackWithImage:Ui.Z.AVATAR.KEY}})),o.wideFrame={name:"wide-frame-share",type:"image",x:0,y:0,image:"./assets/wideframes/wide-frame-share.png",width:1500,height:2e3},s.forEach((function(e,t){var n=e.playerId,a=e.name,i=e.score;o["name_"+n]={type:"text",x:600,y:1360+180*t,font:"600 48px",text:a,fillStyle:"#b18151"},o["score_"+n]={type:"text",x:1e3,y:1360+180*t,font:"600 48px",text:i,fillStyle:"#b18151"}})),o},Gc=function(){return function(){var e=(0,a.Z)(r().mark((function e(t,n){var a,i,s,o,c,u,l,d,p,f,g;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=window.game,i=a.player,s=a.analytics,o=a.facebook,c=a.globalScene,e.prev=1,c.screen.open(Qi.o4.NOTIFY_SCREEN,{message:"Loading...",loading:!0}),u=n(),e.next=6,Fc(u);case 6:return l=e.sent,Pc(l),d=i.getPlayer(),p=d.playerId,f=d.name,g=d.photo,e.next=11,o.shareAsync({text:"Pheww, a great match!",intent:"SHARE",image:l||"",data:{playerId:p,playerName:f,playerPhoto:g,type:fi}});case 11:s.event(pn._.SHARE,{share_content_type:"MatchResult",success:!0}),e.next=18;break;case 14:e.prev=14,e.t0=e.catch(1),s.event(pn._.SHARE,{share_content_type:"MatchResult",success:!1}),(0,h.tO)(e.t0);case 18:return e.prev=18,c.screen.close(Qi.o4.NOTIFY_SCREEN),e.finish(18);case 21:case"end":return e.stop()}}),e,null,[[1,14,18,21]])})));return function(t,n){return e.apply(this,arguments)}}()},Fc=function(){var e=(0,a.Z)(r().mark((function e(t){var n,a,i,s,o,c,u,l,h,d,p,f,g,m,v,y,b,A;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=window.game,a=n.player,i=n.globalScene,s=Ss(t),o=a.getPlayer(),c=o.photo,u=o.playerId,l=gs(t),h=l.playerId,d=l.photo,p=vs(t,{playerId:u}),f=ys(t,{opponentId:h}),g=s[u]||{},m=g.score,v=s[h]||{},y=v.score,b=Uc({playerId:u,playerPhoto:c,playerScore:m,opponentId:h,opponentPhoto:d,opponentScore:y,isPlayerFinished:p,isOpponentFinished:f})){e.next=12;break}return console.warn("getRenderOptionsLeaderboard"),e.abrupt("return");case 12:return A={name:"share-game-result",width:952,height:492,renderOptions:b},e.next=15,i.frameCapture.capture(A);case 15:return e.abrupt("return",e.sent);case 16:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Zc=(function(){var e=(0,a.Z)(r().mark((function e(t){var n,a,i,s,o,c,u,l,h,d,p,f,g,m,v,y,b,A,S;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=window.game,i=a.player,s=a.globalScene,o=Ss(t),c=i.getPlayer(),u=c.photo,l=c.playerId,e.next=5,window.FBInstant.player.getConnectedPlayersAsync();case 5:if(h=e.sent,d=Zc(),p=(null==(n=L()(h).call(h,(function(e){return e.getID()===d})))?void 0:n.getPhoto())||Ui.Z.AVATAR.FILE,f=vs(t,{playerId:l}),g=ys(t,{opponentId:d}),m=o[l]||{},v=m.score,y=o[d]||{},b=y.score,A=Uc({playerId:l,playerPhoto:u,playerScore:v,opponentId:d,opponentPhoto:p,opponentScore:b,isPlayerFinished:f,isOpponentFinished:g})){e.next=16;break}return console.warn("getRenderOptionsLeaderboard"),e.abrupt("return");case 16:return S={name:"share-game-result",width:952,height:492,renderOptions:A},e.next=19,s.frameCapture.capture(S);case 19:return e.abrupt("return",e.sent);case 20:case"end":return e.stop()}}),e)})))}(),function(){var e=window.game.player,t=window.FBInstant.getEntryPointData()||{},n=t.playerId,a=t.opponentId;return n==e.getPlayerId()?a:n}),Uc=(function(){var e=(0,a.Z)(r().mark((function e(t){var n,a,i,s,o,c,u,l,h,d,p,f,g,m,v;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=window.game,a=n.player,i=n.globalScene,s=Ss(t),o=a.getPlayer(),c=o.photo,u=o.playerId,l=As(t),h=l.playerId,d=l.photo,p=l.score,f=s[u]||{},g=f.score,m=Uc({playerId:u,playerPhoto:c,playerScore:g,opponentId:h,opponentPhoto:d,opponentScore:p})){e.next=9;break}return console.warn("getRenderOptionsGroupResult"),e.abrupt("return");case 9:return v={name:"share-group-match-result",width:952,height:492,renderOptions:m},e.next=12,i.frameCapture.capture(v);case 12:return e.abrupt("return",e.sent);case 13:case"end":return e.stop()}}),e)})))}(),function(e){var t=e.playerId,n=void 0===t?"10":t,a=e.playerPhoto,i=void 0===a?"":a,r=e.playerScore,s=void 0===r?0:r,o=e.opponentId,c=void 0===o?"20":o,u=e.opponentPhoto,l=void 0===u?"":u,h=e.opponentScore,d=void 0===h?0:h,p=e.isPlayerFinished,f=e.isOpponentFinished;if("string"!==typeof n)return null;if("string"!==typeof i)return null;if("number"!==typeof s)return null;if("string"!==typeof c)return null;if("string"!==typeof l)return null;if("number"!==typeof d)return null;if("boolean"!==typeof p)return null;if("boolean"!==typeof f)return null;var g=s===d,m=s>d,v=p||f,y=p&&f,b={leftPhoto:{name:""+n,type:"image",x:69,y:145,image:i,width:170,height:170,fallbackWithImage:Ui.Z.AVATAR.KEY},rightPhoto:{name:""+c,type:"image",x:717,y:145,image:l,width:170,height:170,fallbackWithImage:Ui.Z.AVATAR.KEY},wideFrame:{name:"wide-frame-game-result",type:"image",x:0,y:0,image:"./assets/wideframes/wide-frame-game-result.png",width:952,height:492}};return v&&(b.leftScoreShadow={type:"text",x:162,y:380,font:"660 64px",fillStyle:"#c4683f",text:p?""+s:"",textAlign:"center"},b.leftScore={type:"text",x:162,y:380,font:"660 64px",fillStyle:"#f2a62e",text:p?""+s:"",textAlign:"center"},b.rightScoreShadow={type:"text",x:796,y:380,font:"660 64px",fillStyle:"#c4683f",text:f?""+d:"",textAlign:"center"},b.rightScore={type:"text",x:796,y:380,font:"660 64px",fillStyle:"#f2a62e",text:f?""+d:"",textAlign:"center"}),!g&&y&&(m?b.leftCrown={name:"crown-icon",type:"image",x:98,y:85,image:"./assets/images/others/crown-icon.png",width:111,height:73}:b.rightCrown={name:"crown-icon",type:"image",x:747,y:85,image:"./assets/images/others/crown-icon.png",width:111,height:73}),b}),Wc=fn.Z.DEFAULT,Hc=Wc.KEY,zc=Wc.FRAME,Yc=function(e){function t(t,n,i,s){var o;return(o=e.call(this,t,n,i,s)||this).avatar=void 0,o.scoreText=void 0,o.shareButton=void 0,o.bigStarExplosive=void 0,o.open=function(t){e.prototype.open.call((0,Hi.Z)(o),t);var n=o.getData("bestScore");o.setBestScore(n);var a=o.scene.player.getPlayer();o.avatar.loadPhoto(a.playerId,a.photo),o.runOpenAnimation(),o.scene.audio.playSound($i.Z.CONGRATULATION)},o.handleClose=function(){o.scene.screen.close(o.name)},o.handleShareBestScore=function(){o.scene.storage.dispatch((0,a.Z)(r().mark((function e(){var t,n,a,i,s,o,c,u,l,d,p,f,g;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=window.game,n=t.player,a=t.analytics,i=t.facebook,s=t.globalScene,e.prev=1,s.screen.open(Qi.o4.NOTIFY_SCREEN,{message:"Loading...",loading:!0}),o=n.getPlayer(),c=o.data,u=(c||{}).score,e.next=7,Rc(u);case 7:return l=e.sent,Pc(l),d=n.getPlayer(),p=d.playerId,f=d.name,g=d.photo,e.next=12,i.shareAsync({text:"Great! I have a best score!",intent:"SHARE",image:l||"",data:{playerId:p,playerName:f,playerPhoto:g,type:fi}});case 12:a.event(pn._.SHARE,{share_content_type:"BestScore",success:!0}),e.next=19;break;case 15:e.prev=15,e.t0=e.catch(1),a.event(pn._.SHARE,{share_content_type:"BestScore",success:!1}),(0,h.tO)(e.t0);case 19:return e.prev=19,s.screen.close(Qi.o4.NOTIFY_SCREEN),e.finish(19);case 22:case"end":return e.stop()}}),e,null,[[1,15,19,22]])}))))},o.runBigStarExplosive=function(){Phaser.Display.Align.In.Center(o.bigStarExplosive,o.scoreText),o.bigStarExplosive.run()},o.setDepth(Qi.Ks.POPUP),o.background.setAlpha(.8),o.createObjects(),o}(0,f.Z)(t,e);var n=t.prototype;return n.createObjects=function(){this.createTitle(),this.createClose(),this.createBestScoreTitle(),this.createPlayerAvatar(),this.createGlowEffect(),this.createBestScoreNumber(),this.createShareButton(),this.createStarTwinkleEffect(),this.createBigStarExplosive()},n.setBestScore=function(e){this.scoreText.setText(""+e)},n.createTitle=function(){var e=this.scene.make.image({key:Hc,frame:zc.RIBBON_SMALL});e.setSize(162,36).setDisplaySize(162,36);var t=-90;Phaser.Display.Align.In.TopCenter(e,this.zone,0,t);var n=this.scene.make.bitmapText({font:No.Z.PRIMARY.KEY,size:10,text:"Today Record"});t=-5,Phaser.Display.Align.In.Center(n,e,0,t),this.add([e,n])},n.createClose=function(){var e=new _o.Z(this.scene,Hc,zc.BUTTON_CLOSE,38,38);e.setName("Close"),this.add(e),Phaser.Display.Align.In.TopRight(e,this.zone,-60,-50),e.onClick=this.handleClose},n.createBestScoreTitle=function(){var e=this.scene.make.bitmapText({font:No.Z.PRIMARY.KEY,size:22,text:"Best Score"});this.add(e),e.setTint(13256697),Phaser.Display.Align.In.TopCenter(e,this.zone,0,-130)},n.createBestScoreNumber=function(){this.scoreText=new ic(this.scene,{font:No.Z.PRIMARY.KEY,size:40}),this.add(this.scoreText),this.scoreText.setTintText(15911443,15911443,15902254,15902254),this.scoreText.setDropShadow(0,2,12871743),Phaser.Display.Align.In.TopCenter(this.scoreText,this.zone,0,-230)},n.createPlayerAvatar=function(){this.avatar=new wc(this.scene,{key:Hc,frame:zc.AVATAR_FRAME_YELLOW_BIG,background:zc.AVATAR_BG_YELLOW_BIG,width:89,height:89}),this.avatar.background.setSize(89,95).setDisplaySize(89,95),this.avatar.photo.setSize(89,95).setDisplaySize(89,95),this.avatar.avtFrame.setSize(89,95).setDisplaySize(89,95),this.add(this.avatar),Phaser.Display.Align.In.Center(this.avatar,this.zone,0,20)},n.createGlowEffect=function(){var e=fn.Z.EFFECTS,t=e.KEY,n=e.FRAME,a=this.scene.make.image({key:t,frame:n.FX_GLOW_LIGHT});a.setWorldSize(246,246),this.add(a),this.moveDown(a),Phaser.Display.Align.In.Center(a,this.avatar),this.scene.tweens.add({targets:[a],duration:6e3,repeat:-1,props:{angle:360,scale:{value:"+=0.01",yoyo:!0,duration:800,ease:Phaser.Math.Easing.Sine.InOut}}})},n.createShareButton=function(){this.shareButton=new Tc.Z(this.scene,{key:Hc,button:zc.BUTTON_BLUE,icon:zc.ICON_FLAT_SHARE,text:"Share"},168,82.8),this.shareButton.setName("Share"),this.add(this.shareButton),Phaser.Display.Align.In.BottomCenter(this.shareButton,this.zone,0,-80),this.shareButton.onClick=this.handleShareBestScore},n.createStarTwinkleEffect=function(){var e=new rc.Z(this.scene),t=this.scoreText,n=t.x,a=t.y;e.run(2,n,a,300,120)},n.createBigStarExplosive=function(){this.bigStarExplosive=new Ic.Z(this.scene)},n.runOpenAnimation=function(){this.runBigStarExplosive(),this.runScoreEntrancesAnimation(),this.runAvatarEntrancesAnimation(),this.runShareEntrancesAnimation()},n.runScoreEntrancesAnimation=function(){this.scene.tweens.killTweensOf(this.scoreText),new Sc({targets:[this.scoreText],duration:300,props:{y:{from:0,to:this.scoreText.y}}}).play()},n.runAvatarEntrancesAnimation=function(){this.scene.tweens.killTweensOf(this.avatar);var e=this.avatar.scale;new yc.Z({targets:[this.avatar],duration:400,props:{scale:{from:0,to:e}}}).play()},n.runShareEntrancesAnimation=function(){this.scene.tweens.killTweensOf(this.shareButton),this.shareButton.setAlpha(0),new bc.Z({targets:[this.shareButton],delay:300}).play()},t}(GameCore.Screen),Kc=Yc,Vc=function(e){var t=e?e.split("_"):[],n=t.length>0?t[0]:"en_US";switch(n){case"id":case"in":n="id"}return n},jc=fn.Z.DEFAULT,Xc=jc.KEY,qc=jc.FRAME,Jc=function(e){function t(t){var n;return(n=e.call(this,t,{key:Xc,frame:qc.AVATAR_FRAME_BLUE,background:qc.AVATAR_BG_BLUE,width:60,height:60})||this).scene=void 0,n.scene=t,n}return(0,f.Z)(t,e),t.prototype.setHighlight=function(e){e?(this.background.setFrame(qc.AVATAR_BG_YELLOW),this.avtFrame.setFrame(qc.AVATAR_FRAME_YELLOW)):(this.background.setFrame(qc.AVATAR_BG_BLUE),this.avtFrame.setFrame(qc.AVATAR_FRAME_BLUE))},t}(wc),Qc=Jc,$c=fn.Z.DEFAULT,eu=$c.KEY,tu=$c.FRAME,nu=function(e){function t(t,n){var a;return(a=e.call(this,t)||this).scene=void 0,a.payload=void 0,a.avatar=void 0,a.block=void 0,a.rankIcon=void 0,a.rankText=void 0,a.playerScore=void 0,a.label=void 0,a.scene=t,a.createBlock(),a.createAvatar(),a.createRankIcon(),a.createRankText(),a.createLabel(),a.createPlayerScore(),n&&a.updateInfo(n),a.scene.add.existing((0,Hi.Z)(a)),a}(0,f.Z)(t,e);var n=t.prototype;return n.updateInfo=function(e){this.payload=e,this.updateAvatar(),this.updateRankIcon(),this.updateRankText(),this.updatePlayerScore()},n.setLabel=function(e){this.label.setText(e)},n.setRank=function(e){this.rankText.setText(e)},n.setScore=function(e){this.playerScore.setText(e)},n.setHighlight=function(e){e?(this.y-=6,this.scale+=.1,this.label.scale+=.15,this.block.setFrame(tu.BLOCK_LEADER_YELLOW)):(this.y+=6,this.scale-=.1,this.label.scale-=.15,this.block.setFrame(tu.BLOCK_LEADER_BLUE)),this.avatar.setHighlight(e)},n.createBlock=function(){this.block=this.scene.make.image({key:eu,frame:tu.BLOCK_LEADER_BLUE}),this.block.setWorldSize(79,99),this.add(this.block)},n.createAvatar=function(){this.avatar=new Qc(this.scene),Phaser.Display.Align.In.TopCenter(this.avatar,this.block,0,this.avatar.displayHeight/2-4),this.add(this.avatar)},n.updateAvatar=function(){var e=this.payload,t=e.playerId,n=e.photo;this.avatar.loadPhoto(t,n,50)},n.getRankFrame=function(){var e=tu.ICON_FLAG;switch(this.payload.rank){case 1:e=tu.ICON_CUP_GOLD;break;case 2:e=tu.ICON_CUP_SILVER;break;case 3:e=tu.ICON_CUP_COPPER}return e},n.createRankIcon=function(){var e=tu.ICON_FLAG;this.rankIcon=this.scene.make.image({key:eu,frame:e}),e!=tu.ICON_FLAG?this.rankIcon.setWorldSize(46,30):this.rankIcon.setWorldSize(27,27),Phaser.Display.Align.In.Center(this.rankIcon,this.block,0,-15),this.add(this.rankIcon)},n.updateRankIcon=function(){var e=this.getRankFrame();this.rankIcon.setFrame(e),e!=tu.ICON_FLAG?this.rankIcon.setWorldSize(46,30):this.rankIcon.setWorldSize(27,27),Phaser.Display.Align.In.Center(this.rankIcon,this.block,0,-15)},n.createRankText=function(){this.rankText=this.scene.make.bitmapText({font:No.Z.PRIMARY.KEY,size:this.scene.fontSize(18),origin:{x:.5,y:.5},text:"1"}),Phaser.Display.Align.In.Center(this.rankText,this.rankIcon,0,-2),this.add(this.rankText)},n.updateRankText=function(){this.rankText.setText(this.payload.rank.toString())},n.createLabel=function(){this.label=this.scene.make.bitmapText({font:No.Z.PRIMARY.KEY,size:this.scene.fontSize(14),origin:{x:.5,y:0},text:"Play"}),Phaser.Display.Align.In.BottomCenter(this.label,this.block,0,-10),this.add(this.label)},n.createPlayerScore=function(){this.playerScore=this.scene.make.bitmapText({font:No.Z.PRIMARY.KEY,size:this.scene.fontSize(18),origin:{x:.5,y:.5},text:"132500"}),this.playerScore.setTint(5582186),Phaser.Display.Align.In.Center(this.playerScore,this.block,0,5),this.add(this.playerScore)},n.updatePlayerScore=function(){this.playerScore.setText(Math.floor(this.payload.score).toString())},(0,ue.Z)(t,[{key:"onClick",set:function(e){var t=this.block,n=t.width,a=t.height;this.setSize(n,a+this.avatar.height),this.setInteractive({useHandCursor:!0}),this.off(Phaser.Input.Events.GAMEOBJECT_POINTER_DOWN),this.on(Phaser.Input.Events.GAMEOBJECT_POINTER_DOWN,e)}}]),t}(Phaser.GameObjects.Container),au=nu,iu=function(e){function t(t,n){var i;return(i=e.call(this,t)||this).scene=void 0,i.payload=void 0,i.leaderBlocks=void 0,i.entrancesAnimation=void 0,i.listLeaderBlocks=void 0,i.handleChallengeFriend=function(e){return function(){i.scene.storage.dispatch(go(e))}},i.handleShareLeaderboard=function(){i.scene.audio.playSound($i.Z.BUTTON_CLICK),i.scene.storage.dispatch(Bc())},i.handleMatchingGroup=(0,a.Z)(r().mark((function e(){var t,n,a,s,o,c,u,l,d;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=i.scene,n=t.player,a=t.storage,s=t.game,o=t.facebook,e.prev=1,s.globalScene.screen.open(Qi.o4.NOTIFY_SCREEN,{message:"Loading...",loading:!0}),c=n.getPlayer(),u="global","en"===(l=Vc(c.locale))&&(u="en"),"in"===l&&(u="in"),e.next=10,o.matchPlayerAsync(u,!0,!0);case 10:if(d=e.sent,s.globalScene.screen.close(Qi.o4.NOTIFY_SCREEN),d){e.next=14;break}return e.abrupt("return");case 14:a.dispatch(bo()),e.next=21;break;case 17:e.prev=17,e.t0=e.catch(1),s.globalScene.screen.close(Qi.o4.NOTIFY_SCREEN),e.t0 instanceof Error&&(0,h.tO)(e.t0);case 21:case"end":return e.stop()}}),e,null,[[1,17]])}))),i.scene=t,i.setName("LeadersBar"),i.listLeaderBlocks=[],i.createLeaderBlocks(),i.createEntrancesAnimation(),n&&i.updateInfo(n),i.scene.add.existing((0,Hi.Z)(i)),i}(0,f.Z)(t,e);var n=t.prototype;return n.updateInfo=function(e){var t=this;this.payload=e;var n,a=!1,i=this.payload,r=i.playerId;(i.leaders.forEach((function(e){var n,i=t.leaderBlocks.getFirstDead(!0);i.updateInfo(e),-1===e.score?(i.setRank(""),i.setLabel("Join"),i.setScore("Global"),i.onClick=t.handleMatchingGroup):e.playerId===r?(i.setLabel("Share"),i.setHighlight(!0),i.onClick=t.handleShareLeaderboard):i.onClick=t.handleChallengeFriend(e.playerId),t.add(i),i.setVisible(!0),i.setActive(!0),qt()(n=t.listLeaderBlocks).call(n,i)<0&&(a=!0)})),this.alignBlocks(),a)&&(this.listLeaderBlocks=Oe()(n=this.leaderBlocks.getChildren()).call(n,(function(e){return e.active})),this.createEntrancesAnimation());this.runAnimation()},n.killAndHideAll=function(){var e=this;this.removeAll(!1),this.leaderBlocks.getChildren().forEach((function(t){return e.leaderBlocks.killAndHide(t)}))},n.runAnimation=function(){this.leaderBlocks.setAlpha(0),this.entrancesAnimation.play()},n.createEntrancesAnimation=function(){this.entrancesAnimation=new Po.Z({targets:this.listLeaderBlocks,delay:this.scene.tweens.stagger(50,{start:400}),props:{y:{from:100,to:0},alpha:{from:0,to:1}}})},n.alignBlocks=function(){var e=-(this.leaderBlocks.getLength()-1)/2*95;this.leaderBlocks.setX(e,95)},n.createLeaderBlocks=function(){this.leaderBlocks=this.scene.add.group({classType:au})},t}(Phaser.GameObjects.Container),ru=iu,su=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n.screen=void 0,n.main=void 0,n.footer=void 0,n.leadersBar=void 0,n.bestScoreScreen=void 0,n.scene=t,n.screen=t.screen,n}(0,f.Z)(t,e);var n=t.prototype;return n.createObjects=function(){this.createMainContent(),this.createLeadersBar(),this.createFooterBar()},n.createMainContent=function(){this.main=new vc(this.scene),this.main.setDepth(ln.Z.LOGO)},n.createLeadersBar=function(){this.leadersBar=new ru(this.scene)},n.createFooterBar=function(){this.footer=new jo(this.scene),this.footer.setDepth(ln.Z.BUTTON)},n.createBestScoreScreen=function(){return this.screen.add(Qi.o4.BEST_SCORE_SCREEN,Kc)},t}(xo),ou=su,cu=function(){function e(e){this.scene=void 0,this.objects=void 0,this.allUI=void 0,this.groups=void 0,this.scene=e,this.objects=null,this.createGroups()}var t=e.prototype;return t.setUIObjects=function(e){this.objects=e,this.allUI.addMultiple(this.objects.getAll())},t.createGroups=function(){this.groups={},this.allUI=this.scene.add.group(),this.groups.allUI=this.allUI},t.killAllUI=function(){this.allUI.killGroup()},t.reviveAllUI=function(){this.allUI.reviveGroup()},e}(),uu=cu,lu=function(e){function t(t){var n;return(n=e.call(this,t)||this).objects=void 0,n.guideUI=void 0,n.objects=null,n}(0,f.Z)(t,e);var n=t.prototype;return n.alignUI=function(){if(null!==this.objects){var e=this.scene.gameZone,t=this.objects,n=t.main,a=t.leadersBar,i=t.footer;Phaser.Display.Align.In.TopCenter(n,e,0,-230),Phaser.Display.Align.In.Center(a,e,0,120),Phaser.Display.Align.In.BottomCenter(i,e,0,-70)}},n.createGroups=function(){e.prototype.createGroups.call(this),this.guideUI=this.scene.add.group(),this.groups.guideUI=this.guideUI},n.setUIObjects=function(t){e.prototype.setUIObjects.call(this,t),this.addUIObjectsToGroups()},n.addUIObjectsToGroups=function(){null!==this.objects&&this.addObjectForGuideUI()},n.addObjectForGuideUI=function(){this.objects},t}(uu),hu=lu,du=function(e){function t(){return e.apply(this,arguments)||this}return(0,f.Z)(t,e),t.prototype.alignUI=function(){e.prototype.alignUI.call(this)},t}(hu),pu=du,fu={STATUS:{READY:"ready",RUNNING:"running",STOPPED:"stopped"}},gu=n(567),mu=fu.STATUS,vu=function(){function e(e){this.state=void 0,this.scene=void 0,this.scene=e}var t=e.prototype;return t.init=function(){this.setState(mu.READY)},t.start=function(){this.isRunning()||this.setState(mu.RUNNING)},t.stop=function(){this.isRunning()&&this.setState(mu.STOPPED)},t.setState=function(e){this.state=e},t.isReady=function(){return this.state===mu.READY},t.isRunning=function(){return this.state===mu.RUNNING},t.isStopped=function(){return this.state===mu.STOPPED},e}(),yu=vu,bu=fu.STATUS,Au=function(e){function t(t){var n;return(n=e.call(this,t)||this).layout=void 0,n.objects=void 0,n.changeLayout=function(){n.scene.world.getResizeEventData().isLayoutChanged?(n.createLayouts(),n.layout.setUIObjects(n.objects),n.layout.alignUI()):n.layout.alignUI()},n.scene=t,n.createObjects(),n.createLayouts(),n.registerEvents(),n}(0,f.Z)(t,e);var n=t.prototype;return n.registerEvents=function(){this.scene.events.on(gu.Z.LAYOUT_UPDATE,this.changeLayout)},n.init=function(){this.initUILogic(),this.layout.alignUI(),this.setState(bu.READY)},n.start=function(){this.isRunning()||(this.updateUIState(),this.setState(bu.RUNNING))},n.stop=function(){this.isRunning()&&this.setState(bu.STOPPED)},t}(yu),Su=Au,Eu=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n.scene=t,n}(0,f.Z)(t,e);var n=t.prototype;return n.createObjects=function(){this.objects=new ou(this.scene)},n.createLayouts=function(){this.scene.world.isLandscape()?this.layout=new pu(this.scene):this.layout=new hu(this.scene);var e=this.objects.footer;e.setAlpha(0),e.runAnimation(),this.layout.setUIObjects(this.objects)},n.initUILogic=function(){var e=this.objects.footer;e.homeButton.onClick=this.scene.handleHomeClick,e.pwfButton.onClick=this.scene.handlePlayWithFriend,e.rankButton.onClick=this.scene.handleLeaderboardClick},n.updateUIState=function(){},t}(Su),wu=Eu,Tu=GameCore.Configs.LeadersBoard,Iu=function(e){function t(){for(var t,n,a=arguments.length,i=new Array(a),r=0;r<a;r++)i[r]=arguments[r];return(n=e.call.apply(e,_()(t=[this]).call(t,i))||this).bestScore=void 0,n.currentScore=void 0,n.loading=void 0,n.layoutManager=void 0,n.confettiLeftEffect=void 0,n.confettiRightEffect=void 0,n.run=function(){n.layoutManager.init(),n.updateLeaders(),n.updateScore(),n.handleShowScorePopups(),n.explodeConfettiEffect(),n.audio.pauseMusic(),n.audio.playSound($i.Z.GAME_OVER_SCENE),n.layoutManager.start()},n.runConfettiEffect=function(){var e=n.gameZone.displayWidth;n.confettiLeftEffect.stop(),n.confettiRightEffect.stop(),n.children.bringToTop(n.confettiLeftEffect),n.children.bringToTop(n.confettiRightEffect),n.confettiLeftEffect.run(1,0,-100),n.confettiRightEffect.run(1,0+e,-100),n.tweens.addCounter({delay:1e4,from:100,to:0,ease:Phaser.Math.Easing.Cubic.Out,duration:400,onUpdate:function(e){var t,a,i=e.getValue()/100;null==(t=n.confettiLeftEffect.emitter)||t.setAlpha(i),null==(a=n.confettiRightEffect.emitter)||a.setAlpha(i)},onComplete:function(){var e,t;null==(e=n.confettiLeftEffect.emitter)||e.setAlpha(1),null==(t=n.confettiRightEffect.emitter)||t.setAlpha(1),n.confettiLeftEffect.stop(),n.confettiRightEffect.stop()}})},n.explodeConfettiEffect=function(){var e=n.gameZone.displayWidth,t=-100,a=e;n.tweens.addCounter({repeat:3,duration:500,onStart:function(){n.confettiLeftEffect.explode(6,0,t),n.confettiRightEffect.explode(6,0+a,t)},onRepeat:function(){n.confettiLeftEffect.explode(6,0,t),n.confettiRightEffect.explode(6,0+a,t)},completeDelay:7e3,onComplete:function(){n.tweens.addCounter({from:100,to:0,ease:Phaser.Math.Easing.Cubic.Out,duration:400,onUpdate:function(e){var t,a,i=e.getValue()/100;null==(t=n.confettiLeftEffect.emitter)||t.setAlpha(i),null==(a=n.confettiRightEffect.emitter)||a.setAlpha(i)},onComplete:function(){var e,t;null==(e=n.confettiLeftEffect.emitter)||e.setAlpha(1),null==(t=n.confettiRightEffect.emitter)||t.setAlpha(1),n.confettiLeftEffect.stop(),n.confettiRightEffect.stop()}})}})},n.handlePlayWithFriend=function(){n.storage.dispatch(mo())},n.handleHomeClick=function(){n.scene.switch(_i.C.DASHBOARD_SCENE)},n.handleLeaderboardClick=function(){n.scene.switch(_i.C.LEADERBOARD_SCENE)},n}(0,f.Z)(t,e);var n=t.prototype;return n.preload=function(){var e=this;this.events.on("resume",(function(){e.updateScore()})),this.events.on("sleep",(function(){e.storage.dispatch(Ks())})),this.events.on("wake",this.run),this.events.on("create",this.run)},n.create=function(){e.prototype.create.call(this),this.createBackground(Ui.Z.BACKGROUND.KEY),this.bestScore=0,this.currentScore=0,this.createLoading(),this.createLayoutManager(),this.createConfettiSmallAnimation()},n.handleShowScorePopups=function(){var e=this,t=this.layoutManager.objects.main;t.bestScoreBlock.counterAnimation&&t.bestScoreBlock.counterAnimation.state!==Phaser.Tweens.REMOVED?t.bestScoreBlock.counterAnimation.on(Phaser.Tweens.Events.TWEEN_COMPLETE,(function(){e.handleShowBestScorePopup(),e.handleShowResultChallengePopup()})):this.time.delayedCall(800,(function(){e.handleShowBestScorePopup(),e.handleShowResultChallengePopup()}))},n.updateLeaders=function(){var e=this;this.layoutManager.objects.leadersBar.killAndHideAll();var t=[{selector:Mr,callback:function(t){if(!1===t){var n=window.game.player.getPlayerId(),a=e.getLeadersExcludeIds([n]);e.updateLeaderBar(a)}e.loading.setVisible(t)}}];this.handleStateChange(t),this.storage.dispatch(Rr(Tu.LeaderboardId,ar,20))},n.getLeadersExcludeIds=function(e){var t=this.storage.getState(),n=Nr(t),a={};if(!e||0===e.length)return n;for(var i in n)if(qt()(e).call(e,i)<0){var r=n[i],s=r.playerId,o=r.photo,c=r.score,u=r.rank;a[i]={playerId:s,photo:o,score:c,rank:u}}return a},n.updateScore=function(){var e=this.layoutManager.objects.main,t=this.storage.getState(),n=Es(t),a=n.score,i=void 0===a?0:a,r=n.bestScore,s=void 0===r?0:r;this.bestScore=s<this.bestScore?this.bestScore:s,this.currentScore=i,e.bestScoreBlock.updateData({bestScore:this.bestScore,currentScore:this.currentScore})},n.createLoading=function(){this.loading=new Ji(this),Phaser.Display.Align.In.Center(this.loading,this.gameZone,0,120)},n.updateLeaderBar=function(e){var t=this.player.getPlayerId(),n=this.layoutManager.objects.leadersBar,a={playerId:t,leaders:[]};for(var i in e){if(a.leaders.length>=3)break;var r=e[i],s=r.playerId,o=r.photo,c=r.score,u=r.rank;a.leaders.push({playerId:s,photo:o,score:c,rank:u})}a.leaders.push({playerId:Ui.Z.ICON_EARTH.KEY,photo:Ui.Z.ICON_EARTH.FILE,rank:4,score:-1}),n.updateInfo(a)},n.createLayoutManager=function(){this.layoutManager=new wu(this)},n.createConfettiSmallAnimation=function(){this.confettiLeftEffect=new er.Z(this,{speedX:{min:-20,max:100},rotate:{start:-1080,end:0}}),this.confettiRightEffect=new er.Z(this,{speedX:{min:20,max:-100},rotate:{start:0,end:1080}}),this.confettiLeftEffect.setDepth(ln.Z.EFFECT),this.confettiRightEffect.setDepth(ln.Z.EFFECT)},n.handleShowBestScorePopup=function(){var e;this.currentScore>this.bestScore&&this.storage.dispatch(ao({bestScore:this.currentScore}));var t=this.storage.getState(),n=ss(t),a=qt()(e=[mi,Ai]).call(e,n)>=0;if(this.currentScore>this.bestScore&&a){var i=this.layoutManager.objects,r=i.bestScoreScreen;r||(r=i.createBestScoreScreen()),this.screen.open(Qi.o4.BEST_SCORE_SCREEN,{bestScore:this.currentScore}),this.runConfettiEffect()}},n.handleShowResultChallengePopup=function(){var e,t=this.storage.getState(),n=ss(t);if(-1!==qt()(e=[vi,bi]).call(e,n)&&ps(t)){var a=gs(t).playerId;n===bi&&a===Wi.playerId||(this.scene.pause(_i.C.GAME_OVER_SCENE),this.scene.launch(_i.C.RESULT_MATCH_SCENE))}},t}(Gi.Z);var Cu=Iu,ku=n(524),xu=n.n(ku),Pu=n(83),_u=n.n(Pu),Ou={DEPTH:{REMAINING_STOCK:12,HINT:25,CARD:10,CARD_SLOT:9},Y:0,FOUNDATION_Y:70,VERTICAL_PILE_SPACE:24,MAX_HORIZONTAL_PILE_SPACE:62,SPACE_BETWEEN_PILE_AND_FOUNDATION:85,CARD_WIDTH:49,CARD_HEIGHT:72,CARD_SHADOW_WIDTH:50,CARD_SHADOW_HEIGHT:76,NUMBER_OF_TARGET:4,NUMBER_OF_PILE:7,AUTO_MOVE_TIME:400},Ru=function(){return window.game.world.isLandscape()?1.3:1},Du=function(){var e=Ru();Ou.CARD_WIDTH=49*e,Ou.CARD_HEIGHT=72*e,Ou.CARD_SHADOW_WIDTH=50*e,Ou.CARD_SHADOW_HEIGHT=75*e},Lu=Ou,Bu=fn.Z.GAMEPLAY_DEFAULT.KEY,Nu=function(e){function t(t,n){var a;(a=e.call(this,t,0,0,Bu,"ic_slot")||this).placement=void 0;var i=Lu.CARD_WIDTH,r=Lu.CARD_HEIGHT,s=Lu.DEPTH;return a.placement=n,a.setInteractive(),a.disableInteractive(),a.setAlpha(.6).setWorldSize(i,r),a.setInteractive({useHandCursor:!0}),a.setDepth(s.CARD_SLOT),a.scene.add.existing((0,Hi.Z)(a)),a}(0,f.Z)(t,e);var n=t.prototype;return n.onClick=function(e){var t=!1;this.on(Phaser.Input.Events.GAMEOBJECT_POINTER_DOWN,(function(){t=!0})),this.on(Phaser.Input.Events.GAMEOBJECT_POINTER_UP,(function(){t&&e(),t=!1})),this.on(Phaser.Input.Events.GAMEOBJECT_POINTER_OUT,(function(){t=!1}))},n.offClick=function(){this.off(Phaser.Input.Events.GAMEOBJECT_POINTER_DOWN),this.off(Phaser.Input.Events.GAMEOBJECT_POINTER_UP),this.off(Phaser.Input.Events.GAMEOBJECT_POINTER_OUT)},n.updateSize=function(){var e=Lu.CARD_WIDTH,t=Lu.CARD_HEIGHT;this.setWorldSize(e,t)},t}(Phaser.GameObjects.Image),Mu=Nu,Gu=function(e){function t(t){var n;return(n=e.call(this)||this).boardGame=void 0,n.slot=void 0,n.cards=void 0,n.x=void 0,n.y=void 0,n.name=void 0,n.idx=void 0,n.boardGame=t,n.cards=[],n.slot=new Mu(t.scene,(0,Hi.Z)(n)),n.boardGame.gameplay.slotLayer.add(n.slot),n.setIdx(-1),n}(0,f.Z)(t,e);var n=t.prototype;return n.setName=function(e){this.name=e},n.setIdx=function(e){this.idx=e},n.getIdx=function(){return this.idx},n.getname=function(){return this.name},n.setPosition=function(e,t){this.x=e,this.y=t,this.slot.setPosition(e,t)},n.addCard=function(e,t){if(e.scene.gameplay.cardsLayer.bringToTop(e.bg),e.scene.gameplay.cardsLayer.bringToTop(e),e.setPlacement(this),t){var n=this.getPlacingPosition(this.cards.length),a=n.x,i=n.y;e.moveTo(a,i,300)}this.cards.push(e)},n.pickTopCards=function(e){var t,n=this.cards.length;return 0==n?[]:_u()(t=this.cards).call(t,Math.max(n-e,0))},n.getLastCard=function(){return this.cards[this.cards.length-1]},n.getPlacingPosition=function(e){return{x:this.x,y:this.y}},n.canBePlace=function(e){return!1},n.update=function(e){},n.clear=function(){this.cards=[]},n.isEmpty=function(){return 0===this.cards.length},n.pickAllCards=function(){var e;return _u()(e=this.cards).call(e,0)},n.updateSlotSize=function(){this.slot.updateSize()},t}(Phaser.Events.EventEmitter),Fu=function(e){return e.Stock="stock",e.Waste="waste",e.Pile="pile",e.Foundation="foundation",e}(Fu||{}),Zu=Fu;function Uu(e,t){var n="undefined"!==typeof C()&&x()(e)||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){var n;if(!e)return;if("string"===typeof e)return Wu(e,t);var a=E()(n=Object.prototype.toString.call(e)).call(n,8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return T()(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return Wu(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var a=0;return function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Wu(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}var Hu=function(e){function t(t){var n;return(n=e.call(this,t)||this).slot.kill(),n.setName(Zu.Waste),n}(0,f.Z)(t,e);var n=t.prototype;return n.alignBeforeAdd=function(){for(var e,t=this.x,n=this.y,a=this.cards.length,i=Uu(this.cards);!(e=i()).done;){e.value.disableInteractive()}if(!(a<=2))for(var r=0;r<a;r++)if(this.cards.length-r<3){var s=r-this.cards.length+2;this.cards[r].moveTo(t+16*s,n,200)}},n.align=function(){for(var e=this.cards.length,t=0;t<e;t++){var n=this.getPlacingPosition(t),a=n.x,i=n.y;this.cards[t].moveTo(a,i,200),t==e-1?this.cards[t].setInteractive():this.cards[t].disableInteractive()}},n.addCard=function(t,n){e.prototype.addCard.call(this,t,!1),n&&this.align(),t.setFacingWithFlippingAnim(!0),t.setInteractive()},n.getPlacingPosition=function(e){var t=this.x,n=this.y,a=this.cards.length;return{x:t+16*(e==a?2:Math.max(a>3?e-a+3:e,0)),y:n}},n.removeAllCards=function(){var e;return _u()(e=this.cards).call(e,0)},n.clear=function(){this.cards=[]},n.canBePlace=function(e){return!1},t}(Gu),zu=Hu,Yu=n(121),Ku=n.n(Yu),Vu=function(e){return e[e.ACE=401]="ACE",e[e.TWO=402]="TWO",e[e.THREE=403]="THREE",e[e.FOUR=404]="FOUR",e[e.FIVE=405]="FIVE",e[e.SIX=406]="SIX",e[e.SEVEN=407]="SEVEN",e[e.EIGHT=408]="EIGHT",e[e.NINE=409]="NINE",e[e.TEN=410]="TEN",e[e.JACK=411]="JACK",e[e.QUEEN=412]="QUEEN",e[e.KING=413]="KING",e}(Vu||{}),ju=function(e){return e[e.ACE=301]="ACE",e[e.TWO=302]="TWO",e[e.THREE=303]="THREE",e[e.FOUR=304]="FOUR",e[e.FIVE=305]="FIVE",e[e.SIX=306]="SIX",e[e.SEVEN=307]="SEVEN",e[e.EIGHT=308]="EIGHT",e[e.NINE=309]="NINE",e[e.TEN=310]="TEN",e[e.JACK=311]="JACK",e[e.QUEEN=312]="QUEEN",e[e.KING=313]="KING",e}(ju||{}),Xu=function(e){return e[e.ACE=201]="ACE",e[e.TWO=202]="TWO",e[e.THREE=203]="THREE",e[e.FOUR=204]="FOUR",e[e.FIVE=205]="FIVE",e[e.SIX=206]="SIX",e[e.SEVEN=207]="SEVEN",e[e.EIGHT=208]="EIGHT",e[e.NINE=209]="NINE",e[e.TEN=210]="TEN",e[e.JACK=211]="JACK",e[e.QUEEN=212]="QUEEN",e[e.KING=213]="KING",e}(Xu||{}),qu=function(e){return e[e.ACE=101]="ACE",e[e.TWO=102]="TWO",e[e.THREE=103]="THREE",e[e.FOUR=104]="FOUR",e[e.FIVE=105]="FIVE",e[e.SIX=106]="SIX",e[e.SEVEN=107]="SEVEN",e[e.EIGHT=108]="EIGHT",e[e.NINE=109]="NINE",e[e.TEN=110]="TEN",e[e.JACK=111]="JACK",e[e.QUEEN=112]="QUEEN",e[e.KING=113]="KING",e}(qu||{}),Ju=function(e){return e[e.ACE=1]="ACE",e[e.TWO=2]="TWO",e[e.THREE=3]="THREE",e[e.FOUR=4]="FOUR",e[e.FIVE=5]="FIVE",e[e.SIX=6]="SIX",e[e.SEVEN=7]="SEVEN",e[e.EIGHT=8]="EIGHT",e[e.NINE=9]="NINE",e[e.TEN=10]="TEN",e[e.JACK=11]="JACK",e[e.QUEEN=12]="QUEEN",e[e.KING=13]="KING",e}(Ju||{}),Qu=function(e){function t(t){var n;return(n=e.call(this,t)||this).setName(Zu.Pile),n}(0,f.Z)(t,e);var n=t.prototype;return n.getPlacingPosition=function(e){for(var t=this.x,n=this.y,a=void 0!=e?e:this.cards.length,i=0;i<a;i++)this.cards[i].isFacingUp()?n+=this.boardGame.getVerticalSpacePile():n+=.5*this.boardGame.getVerticalSpacePile();return{x:t,y:n}},n.getSubCards=function(e){var t,n,a=Ku()(t=this.cards).call(t,(function(t){return t===e}));return E()(n=this.cards).call(n,a)},n.pickSubCards=function(e){var t,n,a=Ku()(t=this.cards).call(t,(function(t){return t===e}));return _u()(n=this.cards).call(n,a)},n.getFacingUpCards=function(){var e,t;if(0===this.cards.length)return[];var n=Ku()(e=this.cards).call(e,(function(e){return e.isFacingUp()}));return n<0?[]:E()(t=this.cards).call(t,n)},n.faceUpLast=function(){var e=this.cards.length;if(e>0){var t=this.cards[e-1];if(t.isFacingUp())return;return t.setFacingWithFlippingAnim(!0),t.setInteractive(),t}this.slot.setInteractive()},n.faceDownLast=function(){var e=this.cards.length;if(e>0){var t=this.cards[e-1];return t.setFacingWithFlippingAnim(!1),t.disableInteractive(),t}this.slot.setInteractive()},n.canBePlace=function(e){var t=e.getTag(),n=t%100,a=Math.floor((t-n)/300);if(0===this.cards.length)return t%100===Ju.KING;var i=this.cards[this.cards.length-1].getTag(),r=i%100;return a!=Math.floor((i-r)/300)&&n==r-1},n.canBeHint=function(e){var t=e.getTag(),n=t%100,a=Math.floor((t-n)/300);if(0===this.cards.length)return t%100===Ju.KING;var i=this.cards[this.cards.length-1].getTag(),r=i%100;return a!=Math.floor((i-r)/300)&&n==r-1},n.isLastCard=function(e){return this.cards[this.cards.length-1]===e},n.clear=function(){this.cards=[]},t}(Gu),$u=Qu,el=(fn.Z.GAMEPLAY_DEFAULT.KEY,function(e){function t(t){var n;return(n=e.call(this,t)||this).cards=[],n.createAce(),n.setName(Zu.Foundation),n}(0,f.Z)(t,e);var n=t.prototype;return n.createAce=function(){this.slot.setFrame("ic_slot_a")},n.setPosition=function(t,n){e.prototype.setPosition.call(this,t,n)},n.canBePlace=function(e){var t=e.getTag(),n=t%100,a=(t-n)/100;if(0===this.cards.length)return t%100===Ju.ACE;var i=this.cards[this.cards.length-1].getTag(),r=i%100;return a==(i-r)/100&&n==r+1},n.isFull=function(){return 13===this.cards.length},t}(Gu)),tl=function(e){return e[e.NONE=0]="NONE",e[e.DEALING=1]="DEALING",e[e.IDLE=2]="IDLE",e[e.PLAYING=3]="PLAYING",e[e.AUTO_COMPLETING=4]="AUTO_COMPLETING",e[e.OUT_OF_MOVE=5]="OUT_OF_MOVE",e[e.GAME_OVER=6]="GAME_OVER",e}({}),nl=fn.Z.GAMEPLAY_DEFAULT,al=nl.KEY,il=nl.FRAME,rl=function(e){function t(t){var n;return(n=e.call(this,t)||this).hand=void 0,n.handScaleDefault=1,n.name="TutorialHand",n.addHand(),n.hand.scale,n.scene.add.existing((0,Hi.Z)(n)),n}(0,f.Z)(t,e);var n=t.prototype;return n.addHand=function(){this.hand=this.scene.make.image({key:al,frame:il.HAND,origin:{x:.5,y:.5}}),this.hand.setWorldSize(65.5,55.5),this.handScaleDefault=this.hand.scale,this.resetHandPosition(),this.add(this.hand)},n.doubleTap=function(e,t,n){var a=this;this.setHandPositionOnDoubleClick(),this.scene.tweens.add({delay:e,targets:[this.hand],ease:Phaser.Math.Easing.Cubic.In,props:{scale:{duration:100,from:this.handScaleDefault,to:.8*this.handScaleDefault},angle:{from:0,value:-10,duration:100}},loop:1,yoyo:!0,onComplete:function(){t&&a.hide(),n&&n()}})},n.tapAndHold=function(e,t){this.scene.tweens.add({delay:e,targets:[this.hand],ease:Phaser.Math.Easing.Cubic.Out,props:{scale:{duration:200,from:this.handScaleDefault,to:.8*this.handScaleDefault},angle:{from:0,value:-10,duration:200}},onComplete:t})},n.unHold=function(e,t,n){var a=this;this.scene.tweens.add({delay:e,targets:[this.hand],ease:Phaser.Math.Easing.Cubic.Out,props:{scale:{duration:200,from:.8*this.handScaleDefault,to:this.handScaleDefault},angle:{from:-10,value:0,duration:200}},onComplete:function(){t&&a.hide(),n&&n()}})},n.show=function(){this.hand.setVisible(!0)},n.hide=function(){this.hand.setVisible(!1)},n.preDestroy=function(){this.scene.tweens.killTweensOf(this.hand)},n.kill=function(){e.prototype.kill.call(this),this.resetHandPosition()},n.setHandPositionOnDoubleClick=function(){this.hand.setPosition(5,5)},n.resetHandPosition=function(){this.hand.setPosition(20,20)},t}(Phaser.GameObjects.Container),sl=rl,ol=fn.Z.CARD_BACK,cl=Lu.DEPTH,ul=function(){function e(e){this.boardGame=void 0,this.bg=void 0,this.hintLayer=void 0,this.hintContainer=void 0,this.group=void 0,this.hintTween=void 0,this.hand=void 0,this.running=!1,this.boardGame=e,this.hintLayer=e.scene.add.container(),this.hintLayer.setDepth(cl.HINT),this.hintLayer.setVisible(!1),this.hintLayer.setAlpha(0),this.group=e.scene.add.group({defaultKey:fn.Z.GAMEPLAY_DEFAULT.KEY}),this.createBg(),this.createContainer(),this.createTutorialHand()}var t=e.prototype;return t.createBg=function(){var e=this,t=this.boardGame.scene.add.image(0,0,fn.Z.GAMEPLAY_DEFAULT.KEY,"blank"),n=this.boardGame.scene.world.getWorldSize(),a=n.width,i=n.height;t.setOrigin(0,0),t.setWorldSize(a,i),t.setAlpha(.5),t.setTint(1315862),this.bg=t,this.boardGame.scene.game.events.on("world-resize",(function(){var n=e.boardGame.scene.world.getWorldSize(),a=n.width,i=n.height;t.setWorldSize(a,i)})),gn.Z.registerObject(t),this.hintLayer.add(t)},t.createContainer=function(){this.hintContainer=this.boardGame.scene.add.container(),this.hintLayer.add(this.hintContainer)},t.fadeInHint=function(){this.running=!0,this.hintLayer.revive(),this.boardGame.scene.tweens.add({targets:[this.hintLayer],alpha:{from:0,to:1},duration:300})},t.fadeOutHint=function(){var e=this;this.boardGame.scene.tweens.add({targets:[this.hintLayer],alpha:{from:1,to:0},duration:300,onComplete:function(){e.hintLayer.kill(),e.running=!1}})},t.showDealerHint=function(){var e,t=this;if(!this.running&&(null==(e=this.hintTween)||!e.isPlaying())&&!(this.hintTween&&this.hintTween.countdown>0)){if(this.boardGame.scene.game.events.emit("pause-resize"),this.boardGame.stock.cards.length>0){var n=this.createCardBack();this.hintContainer.add([n])}var a=this.createHintGlow(),i=this.boardGame.stock.slot.getWorldPosition(),r=i.x,s=i.y;this.hintContainer.add(a),this.hintContainer.setPosition(r,s),this.hintContainer.add(this.hand),this.hand.revive(),this.hintTween=this.boardGame.scene.tweens.addCounter({duration:800,onStart:function(){t.hand.doubleTap(0,!1,(function(){console.log("complete double tap")}))},onComplete:function(){t.hintContainer.getAll().forEach((function(e){return t.group.killAndHide(e)})),t.hintContainer.removeAll(),t.hand.kill(),t.fadeOutHint(),t.boardGame.scene.game.events.emit("resume-resize")}}),this.fadeInHint()}},t.showMoveHintAnimation=function(e,t){var n,a=this;if(!this.running&&(null==(n=this.hintTween)||!n.isPlaying())&&!(this.hintTween&&this.hintTween.countdown>0)){this.boardGame.scene.game.events.emit("pause-resize"),this.running=!0;var i=e.getWorldPosition(),r=i.x,s=i.y,o=this.boardGame.gameplay.getWorldCardPosition(t.getPlacingPosition(t.cards.length)),c=o.x,u=o.y;if(e.placement instanceof $u)for(var l=e.placement.getSubCards(e),h=0;h<l.length;h++){var d=this.createHintCard(l[h].frame.name);d.setY(this.boardGame.getVerticalSpacePile()*h);var p=this.createHintGlow();p.setY(this.boardGame.getVerticalSpacePile()*h),this.hintContainer.add([p,d])}else{var f=this.createHintCard(e.frame.name),g=this.createHintGlow();this.hintContainer.add([g,f])}this.hintContainer.add(this.hand),this.boardGame.scene.tweens.killTweensOf(this.hand),this.hand.revive(),this.hand.tapAndHold(0),this.hintContainer.revive(),this.hintTween=this.boardGame.scene.tweens.add({targets:this.hintContainer,x:{start:r,from:r,to:c},y:{start:s,from:s,to:u},delay:300,duration:600,completeDelay:500,ease:Phaser.Math.Easing.Sine.Out,onComplete:function(){a.hand.unHold(0,!1,(function(){a.hintContainer.getAll().forEach((function(e){return a.group.killAndHide(e)})),a.hintContainer.removeAll(),a.hand.kill(),a.fadeOutHint(),a.boardGame.scene.game.events.emit("resume-resize")}))}}),this.fadeInHint()}},t.createHintGlow=function(){var e=Ru(),t=this.group.get();return t.setTexture(fn.Z.GAMEPLAY_DEFAULT.KEY,"hint"),t.setWorldSize(61*e,83*e),t.revive(),t},t.createHintCard=function(e){var t=this.boardGame.scene.theme.getCurrentThemeConfig().cardFaceKey,n=this.group.get();n.setTexture(t),n.revive(),n.setFrame(e);var a=Lu.CARD_WIDTH,i=Lu.CARD_HEIGHT;return n.setWorldSize(a,i),n},t.createCardBack=function(){var e=this.boardGame.scene.theme.getCurrentThemeConfig().cardBackFrame,t=this.group.get();t.setTexture(ol.KEY,e),t.revive();var n=Lu.CARD_WIDTH,a=Lu.CARD_HEIGHT;return t.setWorldSize(n,a),t},t.createTutorialHand=function(){this.hand=new sl(this.boardGame.scene),this.hand.kill(),this.hintLayer.add(this.hand)},e}(),ll=ul,hl=function(){function e(e){this.scene=void 0,this.boardGame=void 0,this.availableHints=void 0,this.outOfMove=void 0,this.hintAnimation=void 0,this.hintClicked=void 0,this.timeToAutoHint=void 0,this.boardGame=e,this.scene=e.scene,this.outOfMove=!0,this.hintClicked=0,this.timeToAutoHint=0,this.hintAnimation=new ll(e)}var t=e.prototype;return t.getAvailableDestinations=function(e){var t=this.boardGame,n=t.piles,a=t.foundations,i=[],r=e.placement;return r instanceof $u&&!r.isLastCard(e)||i.push.apply(i,Oe()(a).call(a,(function(t){return t.canBePlace(e)}))),i.push.apply(i,Oe()(n).call(n,(function(t){return t.canBePlace(e)}))),i},t.canHint=function(){return this.findMovable().length>0},t.showHint=function(){var e=(0,a.Z)(r().mark((function e(){var t,n;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.boardGame.isOutOfMove()){e.next=3;break}return this.boardGame.outOfMove(),e.abrupt("return");case 3:if(this.scene.vibration.performVibrating(20),this.boardGame.isIdle()&&(this.boardGame.boardState=tl.PLAYING),this.boardGame.boardState===tl.PLAYING){e.next=7;break}return e.abrupt("return");case 7:if(this.boardGame.scene.audio.playSound($i.Z.HINT),this.hintClicked+=1,t=this.findMovable(),this.resetAutoHintTime(),!(t.length>0)){e.next=15;break}return n=t[0],this.hintAnimation.showMoveHintAnimation(n,this.getAvailableDestinations(n)[0]),e.abrupt("return");case 15:if(!(this.boardGame.stock.cards.length>0||this.boardGame.waste.cards.length>0&&!this.outOfMove)){e.next=18;break}return this.hintAnimation.showDealerHint(),e.abrupt("return");case 18:this.boardGame.outOfMove();case 19:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),t.findMovable=function(){var e,t,n,a,i,r,s=[],o=this.boardGame,c=E()(e=o.waste.cards).call(e,-1),u=De()(t=o.piles).call(t,(function(e){return e.cards[e.cards.length-1]})),l=De()(n=o.piles).call(n,(function(e){var t,n=Ku()(t=e.cards).call(t,(function(e){return e.isFacingUp()}));return e.cards[n]})),h=De()(a=o.foundations).call(a,(function(e){return e.cards[e.cards.length-1]})),d=De()(h).call(h,(function(e,t){return e?e.getTag()+1:100*(t+1)+1})),p=_()(i=[]).call(i,c,u),f=L()(p).call(p,(function(e){return e&&e.getTag()%100==1}));f&&s.push(f);for(var g=function(e){var t,n=l[e];if(!n)return"continue";var a=qt()(t=o.piles[e].cards).call(t,n);if(n&&a>=1){var i;if(l[e]===u[e])if(qt()(d).call(d,n.getTag())>=0)return s.push(n),"continue";var r=L()(i=o.piles).call(i,(function(e){return e.canBePlace(n)}));r&&s.push(n)}},m=0;m<l.length;m++)g(m);for(var v=0;v<p.length;v++){var y=p[v];if(y)qt()(d).call(d,y.getTag())>=0&&s.push(y)}for(var b=function(e){var t,n=l[e];if(!n)return"continue";if(n.isKing()&&0==qt()(t=o.piles[e].cards).call(t,n))return"continue";if(n){var a,i=L()(a=o.piles).call(a,(function(e){return e.canBePlace(n)}));i&&s.push(n)}},A=0;A<l.length;A++)b(A);var S,w=c[c.length-1];w&&(L()(S=o.piles).call(S,(function(e){return e.canBePlace(w)}))&&s.push(w));var T=De()(r=o.piles).call(r,(function(e){return e.getFacingUpCards()}));return T.forEach((function(e){e.forEach((function(t,n){var a;L()(a=o.piles).call(a,(function(e){return e.canBePlace(t)}))&&n>0&&qt()(d).call(d,e[n-1].getTag())>=0&&s.push(t)}))})),s},t.autoPlayStep=function(){var e=this.findMovable();if(e.length>0){var t=e[0];return this.boardGame.mover.handleClickOnCard(t),void(this.outOfMove=!1)}this.boardGame.stock.cards.length>0||this.boardGame.waste.cards.length>0&&!this.outOfMove?this.boardGame.mover.deal():this.boardGame.outOfMove()},t.resetAutoHintTime=function(){this.timeToAutoHint=0},t.clear=function(){this.hintClicked=0},t.update=function(e){this.boardGame.isPlaying()&&(this.boardGame.scene.player.getPlayerSettings().autoHints?this.timeToAutoHint+=e:this.timeToAutoHint=0,this.timeToAutoHint>15e3&&this.showHint())},e}(),dl=hl,pl=function(){var e=(0,a.Z)(r().mark((function e(t,n){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new(o())((function(e){t.time.delayedCall(n,e)})));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),fl=pl,gl=n(117),ml=n.n(gl),vl=n(507),yl=function(e){function t(t,n){var a;return(a=e.call(this,t,0,0,fn.Z.GAMEPLAY_DEFAULT.KEY,"card-bg")||this).parent=void 0,a.updateFromParent=function(){var e=a.parent.displayWidth/Lu.CARD_WIDTH,t=a.parent.displayHeight/Lu.CARD_HEIGHT;a.setPosition(a.parent.x,a.parent.y+1),a.setWorldSize(Lu.CARD_SHADOW_WIDTH*e,Lu.CARD_SHADOW_HEIGHT*t),a.setVisible(a.parent.visible)},a.parent=n,a.setDepth(Lu.DEPTH.CARD_SLOT),a.updateFromParent(),t.add.existing((0,Hi.Z)(a)),a}return(0,f.Z)(t,e),t}(Phaser.GameObjects.Image),bl=yl,Al=fn.Z.CARD_BACK,Sl=function(e){function t(t,n){var a;return(a=e.call(this,t,0,0,"")||this).scene=void 0,a.bg=void 0,a.tag=void 0,a.facingUp=void 0,a.oldX=void 0,a.oldY=void 0,a.shakePosition=void 0,a.facingTween=void 0,a.movingTween=void 0,a.moves=void 0,a.placement=void 0,a.hitArea=void 0,a.setFacing=function(e){a.facingUp=e,e?a.setCardFace():a.setCardBack()},a.scene=t,a.createBackground(),a.tag=n,a.moves=[],a.facingUp=!1,t.add.existing((0,Hi.Z)(a)),a.addBehavior(),a.hitArea=new Phaser.Geom.Rectangle(0,0,1,1),a}(0,f.Z)(t,e);var n=t.prototype;return n.createBackground=function(){var e=new bl(this.scene,this);this.bg=e,this.scene.events.on(Phaser.Scenes.Events.POST_UPDATE,e.updateFromParent)},n.initInteractive=function(){this.setInteractive(this.hitArea,Phaser.Geom.Rectangle.Contains),this.input.cursor="pointer",this.scene.input.setDraggable(this),this.disableInteractive()},n.updateCardStyle=function(){this.setFacing(this.facingUp),this.updateSize()},n.setPlacement=function(e){this.placement=e},n.shake=function(){this.isMoving()||(void 0==this.shakePosition&&(this.shakePosition=new vl.Z(this)),this.shakePosition.setMagnitude(1.2),this.shakePosition.setDuration(500),this.shakePosition.shake())},n.setFacingWithFlippingAnim=function(e){var t,n=this;this.facingUp!==e&&(this.facingUp=e,null==(t=this.facingTween)||t.remove(),this.updateSize(),this.facingTween=this.scene.tweens.add({targets:this,scaleX:0,duration:150,onComplete:function(){n.setFacing(e);var t=n.scaleX;n.scaleX=0,n.facingTween=n.scene.tweens.add({targets:n,scaleX:t,duration:150})}}))},n.isFacingUp=function(){return this.facingUp},n.getTag=function(){return this.tag},n.isAce=function(){return this.tag%100===Ju.ACE},n.isKing=function(){return this.tag%100===Ju.KING},n.moveTo=function(e,t,n){var a,i,r=this;void 0===n&&(n=0),e==this.x&&t==this.y||(null==(a=this.movingTween)||a.remove(),null==(i=this.shakePosition)||i.stop(),this.shakePosition=void 0,this.movingTween=this.scene.tweens.add({targets:this,x:e,y:t,duration:n,ease:Phaser.Math.Easing.Sine.Out,onComplete:function(){r.setPosition(e,t)}}))},n.isMoving=function(){return this.movingTween&&(this.movingTween.isPlaying()||!this.movingTween.hasStarted)},n.reset=function(){var e,t;null==(e=this.movingTween)||e.remove(),null==(t=this.facingTween)||t.complete(),this.updateSize(),this.disableInteractive(),this.setFacing(!1)},n.setCardFace=function(){var e,t=this.scene.theme.getCurrentThemeConfig().cardFaceKey;this.setTexture(t,""+this.tag);var n=Lu.CARD_WIDTH,a=Lu.CARD_HEIGHT;this.setWorldSize(n,a),null==(e=this.hitArea)||e.setSize(this.frame.width,this.frame.height)},n.setCardBack=function(){var e,t=this.scene.theme.getCurrentThemeConfig().cardBackFrame;this.setTexture(Al.KEY,t);var n=Lu.CARD_WIDTH,a=Lu.CARD_HEIGHT;this.setWorldSize(n,a),null==(e=this.hitArea)||e.setSize(this.frame.width,this.frame.height)},n.updateSize=function(){var e=Lu.CARD_WIDTH,t=Lu.CARD_HEIGHT;this.setWorldSize(e,t),this.bg.updateFromParent()},n.addBehavior=function(){this.shakePosition=new vl.Z(this,{duration:500,magnitude:2})},t}(Phaser.GameObjects.Image),El=Sl,wl=1/GameCore.Utils.Image.getImageScale(),Tl=fn.Z.GAMEPLAY_DEFAULT.KEY,Il=function(e){function t(t){var n;return(n=e.call(this,t,Tl)||this).emitZone=void 0,n.particleEmitters=void 0,n.particleEmitters=[],n.emitZone=new Phaser.Geom.Rectangle(-15,-20,30,40),n.createSuitEmitter("suit_spades"),n.createSuitEmitter("suit_clubs"),n.createSuitEmitter("suit_diamonds"),n.createSuitEmitter("suit_heart"),n.scene.add.existing((0,Hi.Z)(n)),n.setDepth(1e3),n}(0,f.Z)(t,e);var n=t.prototype;return n.createSuitEmitter=function(e){this.particleEmitters.push(this.createEmitter({on:!1,frame:e,emitZone:{source:this.emitZone,type:"random"},speed:40,frequency:100,alpha:{start:1,end:0,ease:Phaser.Math.Easing.Expo.Out},scale:.5*wl,lifespan:1200,rotate:{start:0,end:40,random:!0}}))},n.explode=function(e,t,n,a){this.particleEmitters[e].explode(t,n,a)},t}(Phaser.GameObjects.Particles.ParticleEmitterManager),Cl=Il,kl=fn.Z.GAMEPLAY_DEFAULT,xl=kl.KEY,Pl=kl.FRAME,_l=function(e){function t(t){var n;return(n=e.call(this,t)||this).restartIcon=void 0,n.remainContainer=void 0,n.remainText=void 0,n.slot.input.cursor="pointer",n.createRecycle(),n.createStockCountText(),n.setName(Zu.Stock),n}(0,f.Z)(t,e);var n=t.prototype;return n.createRecycle=function(){var e=this.boardGame.scene;this.restartIcon=e.add.image(0,0,xl,Pl.IC_RECYCLE),this.restartIcon.setWorldSize(36,36),this.boardGame.gameplay.slotLayer.add(this.restartIcon)},n.createStockCountText=function(){var e=this.boardGame.scene,t=e.add.container();t.setDepth(Lu.DEPTH.REMAINING_STOCK),this.remainText=e.make.bitmapText({font:No.Z.PRIMARY.KEY,size:e.fontSize(12),origin:{x:.5,y:.5},text:"0"}),this.remainText.setCenterAlign(),this.remainText.setTint(16579837),this.remainText.setPosition(9,-9);var n=e.add.image(9,-9,xl,Pl.STOCK_BG);n.setWorldSize(18,18),t.add([n,this.remainText]),this.remainContainer=t,this.boardGame.gameplay.topLayer.add(this.remainContainer),this.remainContainer.kill()},n.setPosition=function(t,n){e.prototype.setPosition.call(this,t,n),this.restartIcon.setPosition(t,n);var a=this.slot,i=.5*a.width-2,r=.5*a.height-2;this.remainContainer.setPosition(t-i,n+r)},n.addCard=function(t,n){e.prototype.addCard.call(this,t,n),t.setFacingWithFlippingAnim(!1),t.disableInteractive()},n.canBePlace=function(e){return!1},n.clear=function(){this.cards=[]},n.update=function(t){e.prototype.update.call(this,t),this.cards.length>0?(this.remainContainer.revive(),this.remainText.setText(""+this.cards.length)):this.remainContainer.kill()},t}(Gu),Ol=_l;function Rl(e,t){var n="undefined"!==typeof C()&&x()(e)||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){var n;if(!e)return;if("string"===typeof e)return Dl(e,t);var a=E()(n=Object.prototype.toString.call(e)).call(n,8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return T()(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return Dl(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var a=0;return function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Dl(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}var Ll=Phaser.Input.Events,Bl=Ll.GAMEOBJECT_DOWN,Nl=Ll.DRAG,Ml=Ll.POINTER_UP,Gl=function(){function e(e){var t=this;this.boardGame=void 0,this.undos=void 0,this.picked=void 0,this.dragX=void 0,this.dragY=void 0,this.pickedPlacement=void 0,this.suitExplosive=void 0,this.undoClicked=void 0,this.handlePointerDown=function(e,n){if(!t.isPicked()&&n instanceof El){var a;t.boardGame.boardState=tl.PLAYING;var i=n;if(i.isMoving())return;var r=qt()(a=i.placement.cards).call(a,i);t.pickCard(i.placement,i.placement.cards.length-r)}},this.isDragged=void 0,this.dragPicked=function(e,n,a,i){!t.isDragged&&e.getDistanceX()+e.getDistanceY()<15||(t.isDragged=!0,t.dragX=a,t.dragY=i)},this.handlePointerUp=function(e){if(t.isPicked()){var n=t.picked[0],a=t.findFirstDestination(e,t.picked);if(a&&t.movePickedToNewPlacement(a),!t.isDragged&&e.upTime-e.downTime<1e3){if(t.donePick(),t.boardGame.scene.player.getPlayerSettings().tapToMove){if(n.isMoving())return;t.handleClickOnCard(n)}}else t.donePick();t.boardGame.hint.resetAutoHintTime()}},this.deal=function(){var e,n=t.boardGame.draw3?3:1;if(!t.boardGame.stock.isEmpty()||!t.boardGame.waste.isEmpty()){t.boardGame.isPlaying()&&t.boardGame.scene.audio.playSound($i.Z.CARD_MOVE);var a=ml()(e=t.boardGame.stock.pickTopCards(n)).call(e);if(a.length>0){for(var i,r=Rl(a);!(i=r()).done;){var s=i.value;t.boardGame.waste.addCard(s,!0)}t.undos.push({type:"deal",numOfCards:a.length,srcName:t.boardGame.stock.getname(),srcIdx:t.boardGame.stock.getIdx(),destName:t.boardGame.waste.getname(),destIdx:t.boardGame.waste.getIdx()}),t.boardGame.hint.canHint()&&(t.boardGame.hint.outOfMove=!1),t.boardGame.stock.isEmpty()&&t.boardGame.hint.outOfMove&&t.boardGame.outOfMove()}else{t.boardGame.scene.vibration.performVibrating(20);var o=t.boardGame.waste.pickAllCards();ml()(o).call(o);for(var c,u=Rl(o);!(c=u()).done;){var l=c.value;t.boardGame.stock.addCard(l,!0)}t.undos.push({type:"deal",numOfCards:o.length,srcName:t.boardGame.waste.getname(),srcIdx:t.boardGame.waste.getIdx(),destName:t.boardGame.stock.getname(),destIdx:t.boardGame.stock.getIdx()}),t.boardGame.hint.outOfMove=!0}t.boardGame.increaseMoves()}},this.boardGame=e,this.undos=[],this.picked=[],this.undoClicked=0,this.suitExplosive=new Cl(e.scene)}var t=e.prototype;return t.enableInput=function(){var e=this,t=this.boardGame.scene;t.input.on(Bl,this.handlePointerDown),t.input.on(Nl,this.dragPicked),t.input.on(Ml,this.handlePointerUp),this.boardGame.stock.slot.onClick((function(){e.boardGame.boardState=tl.PLAYING,e.deal()}))},t.disableInput=function(){var e=this.boardGame.scene;e.input.off(Bl,this.handlePointerDown),e.input.off(Nl,this.dragPicked),e.input.off(Ml,this.handlePointerUp),this.boardGame.stock.slot.offClick()},t.isPicked=function(){return this.picked.length>0},t.movePickedToNewPlacement=function(e){for(var t,n=this,a=Rl(this.picked);!(t=a()).done;){var i=t.value;e.addCard(i,!0)}var r=this.pickedPlacement instanceof $u&&!!this.pickedPlacement.faceUpLast();if(r&&this.boardGame.increaseScore(5),e instanceof el){this.boardGame.increaseScore(10),this.boardGame.isPlaying()&&this.boardGame.scene.audio.playSound("finish"+e.cards.length,{delay:.1});var s=e.slot.getWorldPosition(),o=s.x,c=s.y,u=e.cards[0].getTag(),l=(u-u%100)/100-1;this.boardGame.scene.time.delayedCall(400,(function(){n.suitExplosive.explode(l,12,o,c)}))}else this.boardGame.isPlaying()&&this.boardGame.scene.audio.playSound($i.Z.CARD_MOVE);this.pickedPlacement instanceof zu&&e instanceof $u&&this.boardGame.increaseScore(5),this.pickedPlacement instanceof el&&this.boardGame.decreaseScore(10),this.undos.push({type:"move",numOfCards:this.picked.length,srcName:this.pickedPlacement.getname(),srcIdx:this.pickedPlacement.getIdx(),destName:e.getname(),destIdx:e.getIdx(),faceLast:!!r}),this.pickedPlacement instanceof zu&&this.boardGame.waste.align(),this.boardGame.increaseMoves(),this.boardGame.checkGameWin(),this.picked=[]},t.unMovePickedToPlacement=function(e,t){e instanceof $u&&t&&e.faceDownLast();for(var n,a=Rl(this.picked);!(n=a()).done;){var i=n.value;e.addCard(i,!0)}t&&this.boardGame.decreaseScore(5),e instanceof el&&this.boardGame.increaseScore(10),this.pickedPlacement instanceof $u&&e instanceof zu&&this.boardGame.decreaseScore(5),this.pickedPlacement instanceof el&&this.boardGame.decreaseScore(10),this.boardGame.increaseMoves(),this.picked=[]},t.pickCard=function(e,t){this.pickedPlacement=e,this.picked=e.pickTopCards(t),this.isDragged=!1},t.donePick=function(){if(this.isPicked()){for(var e,t=Rl(this.picked);!(e=t()).done;){var n=e.value;this.pickedPlacement.addCard(n,this.isDragged)}this.picked=[],this.isDragged=!1}},t.findFirstDestination=function(e,t){if(1==t.length){var n=this.detectFoundation(e,t[0]);if(n)return n}return this.detectPile(e,t[0])},t.detectFoundation=function(e,t){var n,a=Oe()(n=this.boardGame.foundations).call(n,(function(e){return Phaser.Geom.Intersects.RectangleToRectangle(t.getBounds(),e.slot.getBounds())&&e.canBePlace(t)}));if(2==a.length)return e.worldX-a[0].x<a[1].x-e.worldX?a[0]:a[1];if(1==a.length){if(a[0]==this.pickedPlacement)return;return a[0]}},t.detectPile=function(e,t){var n,a=this,i=Oe()(n=this.boardGame.piles).call(n,(function(e){var n,i=(null==(n=e.getLastCard())?void 0:n.getBounds())||e.slot.getBounds();return e!==a.pickedPlacement&&Phaser.Geom.Intersects.RectangleToRectangle(t.getBounds(),i)&&e.canBePlace(t)}));return 2==i.length?(e.worldX,i[0].x,i[1].x,e.worldX,i[1]):1==i.length?i[0]:void 0},t.getAvailableDestinations=function(){var e=this,t=this.boardGame,n=t.piles,a=t.foundations,i=[];return 1==this.picked.length&&i.push.apply(i,Oe()(a).call(a,(function(t){return t!==e.pickedPlacement&&t.canBePlace(e.picked[0])}))),i.push.apply(i,Oe()(n).call(n,(function(t){return t!==e.pickedPlacement&&t.canBePlace(e.picked[0])}))),i},t.handleClickOnCard=function(e){var t;if(!this.isPicked()){var n=qt()(t=e.placement.cards).call(t,e);this.pickCard(e.placement,e.placement.cards.length-n);var a=this.getAvailableDestinations();if(0!==a.length)this.movePickedToNewPlacement(a[0]),this.donePick();else{this.boardGame.scene.audio.playSound($i.Z.NO_MOVE);for(var i,r=Rl(this.picked);!(i=r()).done;){i.value.shake()}this.donePick()}}},t.undo=function(){if(this.boardGame.boardState!==tl.GAME_OVER){var e=this.undos.pop();if(e){this.boardGame.scene.audio.playSound($i.Z.UNDO),this.boardGame.boardState=tl.PLAYING,this.undoClicked+=1;var t=e.numOfCards,n=e.srcName,a=e.srcIdx,i=e.destName,r=e.destIdx,s=e.faceLast,o=void 0!==s&&s,c=this.getPlacement(n,a),u=this.getPlacement(i,r);if("deal"===e.type){var l=u.pickTopCards(t);u instanceof Ol&&ml()(l).call(l);for(var h,d=Rl(l);!(h=d()).done;){var p=h.value;c.addCard(p,!0)}this.boardGame.waste.align(),this.boardGame.increaseMoves()}else"move"===e.type&&(this.pickCard(u,t),this.unMovePickedToPlacement(c,o),this.donePick(),this.boardGame.hint.outOfMove=!1);this.boardGame.decreaseScore(2),this.boardGame.checkAutoCompleted()}}},t.clear=function(){this.undos=[],this.undoClicked=0},t.update=function(){if(this.isDragged)for(var e=0;e<this.picked.length;e++){var t=this.picked[e];t.setPosition(this.dragX,this.dragY+e*this.boardGame.getVerticalSpacePile()),t.scene.gameplay.cardsLayer.bringToTop(t)}},t.getPlacement=function(e,t){if(e===Zu.Stock)return this.boardGame.stock;if(e===Zu.Waste)return this.boardGame.waste;if(e===Zu.Pile)return this.boardGame.piles[t];if(e===Zu.Foundation)return this.boardGame.foundations[t];throw new Error("Placement not found!!!")},e}(),Fl=Gl,Zl=function(){function e(){this.strSeed=void 0,this.intSeed=void 0}var t=e.prototype;return t.generateSeed=function(){return GameCore.Utils.String.random(10)},t.shuffle=function(e){var t,n,a,i,r,s=De()(t=Mt()(n=new Array(52)).call(n,0)).call(t,(function(e,t){return t})),o=this.shuffles(s,e),c=this.shuffles(o,ml()(a=e.split("")).call(a).join("").toLowerCase());return this.shuffles(c,E()(i=ml()(r=e.split("")).call(r).join("")).call(i,0,10).toUpperCase())},t.shuffles=function(e,t){if(this.setSeed(t)){for(var n=E()(e).call(e,0),a=n.length,i=this.genMap(a),r=a-1;r>0;r--)n[r]=_u()(n).call(n,i[a-1-r],1,n[r])[0];return n}return e},t.genMap=function(e){for(var t=new Array(e),n=0;n<e;n++)t[n]=(this.intSeed=(9301*this.intSeed+49297)%233280)/233280*e|0;return t=this.modifyIfNoZero(t)},t.modifyIfNoZero=function(e){for(var t=!1,n=0;n<e.length;n++)0===e[n]&&(t=!0);return!1===t&&(e[e[e.length-1]]=0),e},t.setSeed=function(e){var t,n=De()(t=String(this.strSeed=e).split("")).call(t,(function(e){return e.charCodeAt(0)})).join("");return this.intSeed=Number(n),!0},e}(),Ul=Zl,Wl=n(572),Hl=function(){function e(e){this.boardGame=void 0,this.cards=void 0,this.boardGame=e,this.cards=[]}var t=e.prototype;return t.init=function(){var e=this,t=this.boardGame.scene;this.cards.push(new El(t,Xu.ACE),new El(t,Xu.TWO),new El(t,Xu.THREE),new El(t,Xu.FOUR),new El(t,Xu.FIVE),new El(t,Xu.SIX),new El(t,Xu.SEVEN),new El(t,Xu.EIGHT),new El(t,Xu.NINE),new El(t,Xu.TEN),new El(t,Xu.JACK),new El(t,Xu.QUEEN),new El(t,Xu.KING)),this.cards.push(new El(t,ju.ACE),new El(t,ju.TWO),new El(t,ju.THREE),new El(t,ju.FOUR),new El(t,ju.FIVE),new El(t,ju.SIX),new El(t,ju.SEVEN),new El(t,ju.EIGHT),new El(t,ju.NINE),new El(t,ju.TEN),new El(t,ju.JACK),new El(t,ju.QUEEN),new El(t,ju.KING)),this.cards.push(new El(t,Vu.ACE),new El(t,Vu.TWO),new El(t,Vu.THREE),new El(t,Vu.FOUR),new El(t,Vu.FIVE),new El(t,Vu.SIX),new El(t,Vu.SEVEN),new El(t,Vu.EIGHT),new El(t,Vu.NINE),new El(t,Vu.TEN),new El(t,Vu.JACK),new El(t,Vu.QUEEN),new El(t,Vu.KING)),this.cards.push(new El(t,qu.ACE),new El(t,qu.TWO),new El(t,qu.THREE),new El(t,qu.FOUR),new El(t,qu.FIVE),new El(t,qu.SIX),new El(t,qu.SEVEN),new El(t,qu.EIGHT),new El(t,qu.NINE),new El(t,qu.TEN),new El(t,qu.JACK),new El(t,qu.QUEEN),new El(t,qu.KING));var n=this.boardGame.stock.getPlacingPosition(0),a=n.x,i=n.y;this.cards.forEach((function(t){t.initInteractive(),t.updateCardStyle(),t.setFacing(!1),t.kill(),t.setPosition(a,i),t.setDepth(10),e.boardGame.gameplay.cardsLayer.add(t.bg),e.boardGame.gameplay.cardsLayer.add(t)}))},t.reset=function(){var e=this.boardGame.stock.getPlacingPosition(0),t=e.x,n=e.y;this.cards.forEach((function(e){e.reset(),e.revive(),e.moveTo(t,n,200)}))},t.align=function(){var e=this.boardGame.stock.getPlacingPosition(0),t=e.x,n=e.y;this.cards.forEach((function(e){e.reset(),e.setPosition(t,n,200)}))},t.getDeck=function(e){var t=this;return De()(e).call(e,(function(e){return t.cards[e]}))},t.getCards=function(e){var t=this;return De()(e).call(e,(function(e){return t.cards[e]}))},t.alignCurrentDeck=function(){for(var e=this.boardGame,t=e.stock,n=e.foundations,a=e.piles,i=0;i<t.cards.length;i++){var r=t.getPlacingPosition(i),s=r.x,o=r.y;t.cards[i].setPosition(s,o)}for(var c=0;c<n.length;c++)for(var u=n[c],l=0;l<u.cards.length;l++){var h=u.getPlacingPosition(l),d=h.x,p=h.y;u.cards[l].setPosition(d,p)}for(var f=0;f<a.length;f++)for(var g=a[f],m=0;m<g.cards.length;m++){var v=g.getPlacingPosition(m),y=v.x,b=v.y;g.cards[m].setPosition(y,b)}},e}(),zl=Hl,Yl=n(571),Kl={},Vl=function(e){var t=window.game.world.getPixelRatio(),n=e.scene,a=e.key,i=e.newKey,r=e.radius,s=e.alpha,o=e.width*t,c=e.height*t,u=2*(e.border||0),l=n.textures.get(a).getSourceImage();if(!l)return!1;if(n.textures.exists(i))return!0;var h=n.textures.createCanvas(i||a,o,c),d=h.context,p=u,f=Kl[a];if(!f){(f=document.createElement("canvas")).width=l.width,f.height=l.height;var g=f.getContext("2d");g.drawImage(l,0,0),Yl.r_(f,0,0,f.width,f.height,r),g.globalAlpha=s,g.fillStyle="#ffffff",null==g||g.fillRect(0,0,l.width,l.height),g.globalAlpha=1,Kl[a]=f}return d.beginPath(),d.moveTo(p,0),d.lineTo(o-p,0),d.quadraticCurveTo(o,0,o,0+p),d.lineTo(o,0+c-p),d.quadraticCurveTo(o,0+c,o-p,0+c),d.lineTo(p,0+c),d.quadraticCurveTo(0,0+c,0,0+c-p),d.lineTo(0,0+p),d.quadraticCurveTo(0,0,p,0),d.closePath(),d.clip(),h.draw(-l.width/2+o/2+p/2,-l.height/2+c/2+p/2,f),!0},jl=function(e){function t(t,n){var a,i=n.key,r=n.width,s=n.height,o=n.border,c=n.radius,u=n.y,l=void 0===u?0:u,h=n.alpha,d=void 0===h?.15:h,p=t.theme.getCurrentThemeConfig().backgroundKey,f=p+i;return Vl({scene:t,key:p,newKey:f,radius:c,border:o,width:r,height:s,alpha:d,y:l}),(a=e.call(this,t,0,0,f)||this).setTexture(f),a.scene.events.on(Ti.BACKGROUND_CHANGED,(function(e){var n=e+i;Vl({scene:t,key:e,newKey:n,radius:c,border:o,width:r,height:s,alpha:d,y:l}),a.setTexture(n),a.setWorldSize(r,s)})),a.setWorldSize(r,s),a}return(0,f.Z)(t,e),t}(Phaser.GameObjects.Image),Xl=jl,ql=267,Jl=48,Ql=fn.Z.GAMEPLAY_DEFAULT,$l=Ql.KEY,eh=Ql.FRAME,th=function(e){function t(t){var n;(n=e.call(this)||this).scene=void 0,n.gameplay=void 0,n.shuffler=void 0,n.draw3=void 0,n.deck=void 0,n.stock=void 0,n.waste=void 0,n.piles=void 0,n.foundations=void 0,n.hint=void 0,n.mover=void 0,n.boardState=void 0,n.autoCompleteBtn=void 0,n.canAutoComplete=void 0,n.score=void 0,n.time=void 0,n.timeToDecreaseScore=void 0,n.timeToSaveBoardData=void 0,n.moves=void 0,n.updateScoreTimer=void 0,n.tournamentResult=void 0,n.autoPlayBtn=void 0,n.autoPlayStepBtn=void 0,n.playWithFriendGameOverButton=void 0,n.challengeModeButton=void 0,n.gameplay=t,n.scene=t.scene,n.shuffler=new Ul,n.deck=new zl((0,Hi.Z)(n)),n.stock=new Ol((0,Hi.Z)(n)),n.waste=new zu((0,Hi.Z)(n)),n.piles=[],n.foundations=[],n.score=0,n.time=0,n.moves=0,n.timeToDecreaseScore=0,n.timeToSaveBoardData=0,n.mover=new Fl((0,Hi.Z)(n)),n.hint=new dl((0,Hi.Z)(n));for(var a=0;a<7;a++){var i=new $u((0,Hi.Z)(n));i.setIdx(a),n.piles.push(i)}for(var r=0;r<4;r++){var s=new el((0,Hi.Z)(n));s.setIdx(r),n.foundations.push(s)}return n.alignBoard(),n.draw3=!1,n.boardState=tl.NONE,n.canAutoComplete=!1,n.listenEvents(),n.createAutoWinButton(),GameCore.Configs.GlobalDebugEnabled&&n.createDevBtn(),n.scene.screen.events.on(GameCore.Screens.Events.OPEN,(function(){n.boardState===tl.PLAYING&&(n.boardState=tl.IDLE)})),n.deck.init(),n}(0,f.Z)(t,e);var n=t.prototype;return n.increaseScore=function(e){var t=this;this.score+=e,this.updateScoreTimer&&!this.updateScoreTimer.hasDispatched||(this.updateScoreTimer=this.scene.time.delayedCall(500,(function(){t.scene.storage.dispatch(ao({score:t.score,time:t.time,moves:t.moves}))})))},n.decreaseScore=function(e){this.score=Math.max(0,this.score-e)},n.increaseMoves=function(){this.hint.resetAutoHintTime(),this.moves+=1,this.gameplay.saveSystem.saveCurrentBoardData()},n.getScore=function(){return this.score},n.getTime=function(){return Math.round(this.time)},n.getMoves=function(){return this.moves},n.createAutoWinButton=function(){var e=this,t=ql,n=Jl,a=new Wl.Z(this.scene,t,n);a.setName("AutoComplete");var i=new Xl(this.scene,{key:"auto-complete-button",radius:10,border:16,width:t,height:n,alpha:.24}),r=this.scene.add.graphics();r.lineStyle(1,16777215),r.strokeRoundedRect(-t/2,-n/2,t,n,16);var s=this.scene.time.addEvent({delay:50,repeat:-1,callback:function(){e.boardState===tl.AUTO_COMPLETING?(e.hint.autoPlayStep(),e.scene.vibration.performVibrating(20)):s.paused=!0},paused:!0});a.onClick=function(){a.kill(),e.mover.disableInput(),e.boardState=tl.AUTO_COMPLETING,s.paused=!1,e.gameplay.scene.footer.hintBtn.setDisabled(!0),e.gameplay.scene.footer.playBtn.setDisabled(!0),e.scene.audio.playSound($i.Z.AUTO_COMPLETE)};var o=this.scene.make.bitmapText({font:No.Z.PRIMARY.KEY,size:this.scene.fontSize(16),text:this.scene.lang.Text.autoComplete,origin:{x:.5,y:.5}});o.setRoundPixels(!1),a.add([i,r,o]),Phaser.Display.Align.To.TopCenter(a,this.scene.footer,0,24),new Xo.Z({targets:[a],duration:500,props:{scale:"*=0.98"}}).play(),a.kill(),this.autoCompleteBtn=a,this.scene.game.events.on("footer-updated",(function(){Phaser.Display.Align.To.TopCenter(a,e.scene.footer,0,24)}))},n.listenEvents=function(){var e=this;this.scene.events.on("settings-changed",(function(t){"autoComplete"===t&&e.checkAutoCompleted()}))},n.alignBoard=function(e){void 0===e&&(e=!1);var t=Ru(),n=this.scene.world.getWorldSize().width/2,a=Lu.FOUNDATION_Y+30*t,i=this.getHorizontalPileSpace();this.placeCenter(this.foundations,n,a,i,-1.5),this.placeCenter([this.waste],n,a,i,1.2),this.placeCenter([this.stock],n,a,i,3);var r=this.scene.world.isLandscape()?1.3:1,s=Lu.SPACE_BETWEEN_PILE_AND_FOUNDATION*r;this.placeCenter(this.piles,n,a+s,i),e?this.deck.alignCurrentDeck():this.deck.align()},n.updatePlacementSize=function(){var e;_()(e=[]).call(e,this.piles,this.foundations).forEach((function(e){return e.updateSlotSize()}))},n.getHorizontalPileSpace=function(){var e=this.scene.world.isLandscape()?1.2:1,t=Math.floor((this.scene.gameZone.width-7*Lu.CARD_WIDTH)/8)+Lu.CARD_WIDTH;return Math.min(t,Lu.MAX_HORIZONTAL_PILE_SPACE*e)},n.placeCenter=function(e,t,n,a,i){void 0===i&&(i=0);for(var r=e.length,s=t-(r/2-.5-i)*a,o=0;o<r;o++)e[o].setPosition(s+o*a,n)},n.startGame=function(){var e=(0,a.Z)(r().mark((function e(t){var n,a,i,s,o,c,u,l,h=this;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isDealing()){e.next=2;break}return e.abrupt("return");case 2:return this.scene.game.events.emit("pause-resize"),this.clearOldBoard(),this.scene.events.emit(Ti.GAME_START),n=this.scene.gameStats.getDraw(this.draw3),a=n.wins,this.scene.analytics.levelStart(a),this.boardState=tl.DEALING,this.deck.reset(),i=this.shuffler.shuffle(t),(s=this.deck.getDeck(i)).forEach((function(e){return e.revive()})),e.next=14,fl(this.scene,300);case 14:this.scene.audio.playSound($i.Z.SHUFFLE),o=0;case 16:if(!(o<7)){e.next=31;break}c=o;case 18:if(!(c<7)){e.next=28;break}if(!(u=s.pop())){e.next=25;break}return this.piles[c].addCard(u,!0),c%2==0&&this.scene.vibration.performVibrating(10),e.next=25,fl(this.scene,30);case 25:c++,e.next=18;break;case 28:o++,e.next=16;break;case 31:return s.forEach((function(e){return h.stock.addCard(e,!1)})),e.next=34,fl(this.scene,100);case 34:for(l=0;l<7;l++)this.piles[l].faceUpLast();return e.next=37,fl(this.scene,400);case 37:this.boardState=tl.IDLE,this.checkGameWin(),this.gameplay.scene.footer.hintBtn.setDisabled(!1),this.scene.game.events.emit("user-interaction-ready"),this.mover.enableInput(),this.scene.game.events.emit("resume-resize");case 43:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.continueGame=function(){var e=(0,a.Z)(r().mark((function e(t){var n,a,i,s,o,c,u,l,h,d,p,f,g,m,v,y,b,A,S,E,w,T,I=this;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.scene.analytics.event(pn._.LEVEL_CONTINUE),!this.isDealing()){e.next=3;break}return e.abrupt("return");case 3:return this.scene.game.events.emit("pause-resize"),this.clearOldBoard(),this.boardState=tl.DEALING,n=t.stock,a=t.waste,i=t.piles,s=t.faceBackOfPiles,o=t.foundations,c=t.score,u=t.time,l=t.moves,h=t.draw3,d=t.movesData,this.deck.reset(),e.next=10,fl(this.scene,300);case 10:for(this.score=c,this.time=u,this.moves=l,this.draw3=h,this.scene.storage.dispatch(ao({score:c,time:this.time,moves:this.moves})),p=this.deck.getCards(n),f=this.deck.getCards(a),g=De()(i).call(i,(function(e){return I.deck.getCards(e)})),m=De()(o).call(o,(function(e){return I.deck.getCards(e)})),this.scene.audio.playSound($i.Z.SHUFFLE),v=0;v<p.length;v++)this.stock.addCard(p[v],!1);y=0;case 22:if(!(y<m.length)){e.next=37;break}b=m[y],A=0;case 25:if(!(A<b.length)){e.next=34;break}return this.foundations[y].addCard(b[A],!0),b[A].setFacingWithFlippingAnim(!0),b[A].setInteractive(),e.next=31,fl(this.scene,30);case 31:A++,e.next=25;break;case 34:y++,e.next=22;break;case 37:S=0;case 38:if(!(S<g.length)){e.next=52;break}E=g[S],w=0;case 41:if(!(w<E.length)){e.next=49;break}return this.piles[S].addCard(E[w],!0),w>=s[S]&&(E[w].setFacingWithFlippingAnim(!0),E[w].setInteractive()),e.next=46,fl(this.scene,30);case 46:w++,e.next=41;break;case 49:S++,e.next=38;break;case 52:T=0;case 53:if(!(T<f.length)){e.next=60;break}return this.waste.addCard(f[T],!0),e.next=57,fl(this.scene,30);case 57:T++,e.next=53;break;case 60:return e.next=62,fl(this.scene,400);case 62:this.mover.undos=d,this.boardState=tl.IDLE,this.gameplay.scene.footer.hintBtn.setDisabled(!1),this.checkGameWin(),this.scene.game.events.emit("user-interaction-ready"),this.mover.enableInput(),this.scene.game.events.emit("resume-resize");case 69:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.checkAutoCompleted=function(){if(this.scene.player.getPlayerSettings().autoComplete){var e,t=0===Oe()(e=this.piles).call(e,(function(e){return e.cards.length>0&&!e.cards[0].isFacingUp()})).length;this.draw3&&(this.waste.cards.length>0||this.stock.cards.length>0)&&(t=!1),t?(this.canAutoComplete=!0,this.autoCompleteBtn.revive()):(this.canAutoComplete=!1,this.autoCompleteBtn.kill())}else this.autoCompleteBtn.kill()},n.checkGameWin=function(){this.isGameWon()?this.handleGameWon():(this.isIdle()||this.isPlaying())&&this.checkAutoCompleted()},n.isGameWon=function(){var e;return!L()(e=this.foundations).call(e,(function(e){return!e.isFull()}))},n.outOfMove=function(){this.boardState=tl.GAME_OVER,this.gameplay.handleGameOver(!1),this.gameplay.saveSystem.clearLastGame()},n.clearOldBoard=function(){this.boardState=tl.NONE,this.canAutoComplete=!1,this.moves=0,this.time=0,this.score=0,this.mover.disableInput(),this.gameplay.scene.footer.hintBtn.setDisabled(!0),this.gameplay.boardGame.autoCompleteBtn.kill(),this.waste.clear(),this.piles.forEach((function(e){return e.clear()})),this.foundations.forEach((function(e){return e.clear()})),this.stock.clear(),this.mover.clear(),this.hint.clear(),this.deck.reset()},n.handleGameWon=function(){this.autoCompleteBtn.kill(),this.gameplay.scene.footer.hintBtn.setDisabled(!0),this.increaseScore(Math.round(7e5/this.time*1e3)),this.scene.audio.playSound($i.Z.WON),this.gameplay.saveSystem.clearLastGame(),this.boardState=tl.GAME_OVER,this.gameplay.handleGameOver(!0)},n.update=function(e){(this.isPlaying()||this.isAutoCompleting())&&(this.time+=e,this.timeToDecreaseScore+=e,this.timeToDecreaseScore>1e4&&(this.decreaseScore(2),this.timeToDecreaseScore-=1e4)),this.isPlaying()&&(this.timeToSaveBoardData+=e,this.timeToSaveBoardData>2e3&&(this.gameplay.saveSystem.saveCurrentBoardData(),this.timeToSaveBoardData-=1e3)),this.stock.update(e),this.mover.update(),this.hint.update(e),this.mover.isPicked()&&this.hint.resetAutoHintTime(),this.scene.footer.undoBtn.setDisabled(0==this.mover.undos.length||this.isAutoCompleting()),this.scene.footer.playBtn.setDisabled(this.isDealing()||this.isAutoCompleting())},n.isDealing=function(){return this.boardState==tl.DEALING},n.isPlaying=function(){return this.boardState==tl.PLAYING},n.isAutoCompleting=function(){return this.boardState==tl.AUTO_COMPLETING},n.isIdle=function(){return this.boardState==tl.IDLE},n.isOutOfMove=function(){return this.boardState==tl.OUT_OF_MOVE},n.isGameOver=function(){return this.boardState==tl.GAME_OVER},n.isNone=function(){return this.boardState==tl.NONE},n.createDevBtn=function(){this.createAutoPlay(),this.createAutoStepPlay(),this.createPlayWithFriendGameOver();var e=this.scene.add.zone(0,0,40,40);Phaser.Display.Align.In.BottomLeft(e,this.scene.gameZone,0,-40)},n.createAutoPlay=function(){var e,t=this;this.autoPlayBtn=new Wl.Z(this.scene,40,40);var n=this.scene.add.image(0,0,$l,eh.IC_BG_OFF);n.setWorldSize(40,40);var a=this.scene.make.bitmapText({font:No.Z.PRIMARY.KEY,size:this.scene.fontSize(10),text:"Auto\nPlay",origin:{x:.5,y:.5}});a.setCenterAlign(),null==(e=this.autoPlayBtn)||e.add([n,a]),Phaser.Display.Align.In.BottomLeft(this.autoPlayBtn,this.scene.gameZone,0,-120);var i=this.scene.time.addEvent({delay:50,repeat:-1,callback:function(){if(t.isIdle()&&(t.boardState=tl.PLAYING),!t.isPlaying()||t.canAutoComplete)return i.paused=!0,void a.setText("Auto\nPlay");t.time+=1e3,t.hint.autoPlayStep()},paused:!0});this.autoPlayBtn.onClick=function(){i.paused?(a.setText("Stop"),i.paused=!1):(a.setText("Auto\nPlay"),i.paused=!0)}},n.createAutoStepPlay=function(){var e,t=this;this.autoPlayStepBtn=new Wl.Z(this.scene,40,40);var n=this.scene.add.image(0,0,$l,eh.IC_BG_OFF);n.setWorldSize(40,40);var a=this.scene.make.bitmapText({font:No.Z.PRIMARY.KEY,size:this.scene.fontSize(10),text:"Step",origin:{x:.5,y:.5}});a.setCenterAlign(),null==(e=this.autoPlayStepBtn)||e.add([n,a]),Phaser.Display.Align.In.BottomLeft(this.autoPlayStepBtn,this.scene.gameZone,0,-160),this.autoPlayStepBtn.onClick=function(){t.isIdle()&&(t.boardState=tl.PLAYING),t.isPlaying()&&(t.time+=1e3,t.hint.autoPlayStep())}},n.createPlayWithFriendGameOver=function(){var e,t=this;this.playWithFriendGameOverButton=new Wl.Z(this.scene,40,40);var n=this.scene.add.image(0,0,$l,eh.IC_BG_OFF);n.setWorldSize(40,40);var a=this.scene.make.bitmapText({font:No.Z.PRIMARY.KEY,size:this.scene.fontSize(10),text:"Over",origin:{x:.5,y:.5}});a.setCenterAlign(),null==(e=this.playWithFriendGameOverButton)||e.add([n,a]),Phaser.Display.Align.In.BottomLeft(this.playWithFriendGameOverButton,this.scene.gameZone,0,-200),this.playWithFriendGameOverButton.onClick=function(){t.scene.screen.open(Qi.o4.AWESOME_SCREEN)}},n.createChallengeMode=function(){var e,t=this;this.challengeModeButton=new Wl.Z(this.scene,40,40);var n=this.scene.add.image(0,0,$l,eh.IC_BG_OFF);n.setWorldSize(40,40);var i=this.scene.make.bitmapText({font:No.Z.PRIMARY.KEY,size:this.scene.fontSize(10),text:"CHL",origin:{x:.5,y:.5}});i.setCenterAlign(),null==(e=this.challengeModeButton)||e.add([n,i]),Phaser.Display.Align.In.BottomLeft(this.challengeModeButton,this.scene.gameZone,0,-240),this.challengeModeButton.onClick=(0,a.Z)(r().mark((function e(){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.scene.handlePlayWithFriend();case 1:case"end":return e.stop()}}),e)})))},n.createTournamentResultButton=function(){var e,t=this;this.tournamentResult=new Wl.Z(this.scene,40,40);var n=this.scene.add.image(0,0,$l,eh.IC_BG_OFF);n.setWorldSize(40,40);var i=this.scene.make.bitmapText({font:No.Z.PRIMARY.KEY,size:this.scene.fontSize(10),text:"ToRe",origin:{x:.5,y:.5}});i.setCenterAlign(),null==(e=this.tournamentResult)||e.add([n,i]),Phaser.Display.Align.In.BottomLeft(this.tournamentResult,this.scene.gameZone,0,-280),this.tournamentResult.onClick=(0,a.Z)(r().mark((function e(){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.scene.screen.open(Qi.o4.TOURNAMENTS_RESULT_SCREEN);case 1:case"end":return e.stop()}}),e)})))},n.createChallengeResultButton=function(){var e=this,t=new Wl.Z(this.scene,40,40),n=this.scene.add.image(0,0,$l,eh.IC_BG_OFF);n.setWorldSize(40,40);var i=this.scene.make.bitmapText({font:No.Z.PRIMARY.KEY,size:this.scene.fontSize(10),text:"CHRe",origin:{x:.5,y:.5}});i.setCenterAlign(),t.add([n,i]),Phaser.Display.Align.In.BottomLeft(t,this.scene.gameZone,0,-320),t.onClick=(0,a.Z)(r().mark((function t(){return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.scene.screen.open(Qi.o4.VICTORY_SCREEN);case 1:case"end":return t.stop()}}),t)})))},n.createNotifyScreenButton=function(){var e=this,t=new Wl.Z(this.scene,40,40),n=this.scene.add.image(0,0,$l,eh.IC_BG_OFF);n.setWorldSize(40,40);var i=this.scene.make.bitmapText({font:No.Z.PRIMARY.KEY,size:this.scene.fontSize(10),text:"NTF",origin:{x:.5,y:.5}});i.setCenterAlign(),t.add([n,i]),Phaser.Display.Align.In.BottomLeft(t,this.scene.gameZone,0,-360),t.onClick=(0,a.Z)(r().mark((function t(){return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:console.log("notify"),e.scene.game.globalScene.screen.open(Qi.o4.NOTIFY_SCREEN,{message:"Creating tournament...",duration:5e3,loading:!0});case 3:case"end":return t.stop()}}),t)})))},n.getVerticalSpacePile=function(){return Lu.VERTICAL_PILE_SPACE},t}(Phaser.Events.EventEmitter),nh=th,ah=function(){function e(){this.stock=void 0,this.waste=void 0,this.tableau=void 0,this.foundations=void 0,this.shuffler=void 0,this.turn1=void 0,this.totalMoves=0,this.outOfMove=void 0,this.turn3Seeds=[],this.turn1Seeds=[],this.shuffler=new Ul,this.turn1=!0}var t=e.prototype;return t.intBoard=function(e){var t=this;this.stock=[],this.waste=[],this.tableau=[],this.foundations=[];for(var n=0;n<7;n++)this.tableau.push([]);for(var a=0;a<4;a++)this.foundations.push([]);this.stock=[201,202,203,204,205,206,207,208,209,210,211,212,213,301,302,303,304,305,306,307,308,309,310,311,312,313,401,402,403,404,405,406,407,408,409,410,411,412,413,101,102,103,104,105,106,107,108,109,110,111,112,113],this.stock=De()(e).call(e,(function(e){return t.stock[e]}));for(var i=0;i<7;i++)for(var r=i;r<7;r++)this.tableau[r].push((this.stock.pop()||0)+1e3);for(var s=0;s<7;s++){var o=this.tableau[s];o[o.length-1]=this.faceUp(o[o.length-1])}},t.printBoard=function(){var e,t;console.log(this.stock.join(" ")),console.log(this.waste.join(" ")),console.log(De()(e=this.tableau).call(e,(function(e){return e.join(" ")})).join("\n")),console.log(De()(t=this.foundations).call(t,(function(e){return e.join(" ")})).join("\n"))},t.faceUp=function(e){return e-1e3},t.isFaceUp=function(e){return e<1e3},t.findFoundation=function(e){for(var t=0;t<4;t++){var n=this.foundations[t][this.foundations[t].length-1];if(n&&Math.abs(e-n)<=13&&e%100==n%100+1)return this.foundations[t]}},t.findColum=function(e){for(var t=0;t<7;t++){var n=this.tableau[t][this.tableau[t].length-1];if(!n&&e%100==13)return this.tableau[t];if(n&&(e/2>120&&n/2<120||e/2<120&&n/2>120)&&e%100+1==n%100)return this.tableau[t]}},t.getMovable=function(){var e,t,n,a,i,r=this,s=[],o=E()(e=this.waste).call(e,-1),c=De()(t=this.tableau).call(t,(function(e){return e.at(-1)||0})),u=De()(n=this.tableau).call(n,(function(e){return e[Ku()(e).call(e,(function(e){return r.isFaceUp(e)}))]||0})),l=De()(a=this.foundations).call(a,(function(e){return e.at(-1)||0})),h=De()(l).call(l,(function(e,t){return e?e+1:100*(t+1)+1})),d=_()(i=[]).call(i,o,c),p=L()(d).call(d,(function(e){return e%100==1}));if(p){var f=qt()(h).call(h,p);s.push({card:p,dest:this.foundations[f]})}for(var g=0;g<u.length;g++){var m,v=u[g],y=qt()(m=this.tableau[g]).call(m,v);if(v&&y>=1){if(u[g]==c[g]){var b=qt()(h).call(h,v);if(b>=0){s.push({card:v,dest:this.foundations[b]});continue}}var A=this.findColum(v);A&&s.push({card:v,dest:A})}}for(var S=0;S<d.length;S++){var w=d[S];if(w){var T=qt()(h).call(h,w);T>=0&&s.push({card:w,dest:this.foundations[T]})}}for(var I=0;I<u.length;I++){var C,k=u[I];if(k&&k%100==13)if(0==qt()(C=this.tableau[I]).call(C,k))continue;if(k){var x=this.findColum(k);x&&s.push({card:k,dest:x})}}var P=o.at(-1);if(P){var O=this.findColum(P);O&&s.push({card:P,dest:O})}return Oe()(s).call(s,(function(e,t,n){return Ku()(n).call(n,(function(t){return t===e}))===t}))},t.findPos=function(e){if(this.waste.at(-1)==e)return this.waste;for(var t=0;t<7;t++){var n;if(we()(n=this.tableau[t]).call(n,e))return this.tableau[t]}for(var a=0;a<4;a++){var i;if(we()(i=this.foundations[a]).call(i,e))return this.tableau[a]}return[]},t.solve=function(){var e;for(this.totalMoves=0;this.move();)this.totalMoves+=1;return!L()(e=this.foundations).call(e,(function(e){return e.length<13}))},t.move=function(){var e,t=this.getMovable();if(t.length>0){var n=t[Math.floor(Math.random()*t.length)],a=n.card,i=n.dest,r=this.findPos(a),s=qt()(r).call(r,a);return i.push.apply(i,_u()(r).call(r,s)),r[r.length-1]>1e3&&(r[r.length-1]-=1e3),this.outOfMove=!1,!0}if(this.turn1){var o=this.stock.pop();if(o)return o>1e3&&(o-=1e3),this.waste.push(o),!0}else{var c,u,l=_u()(c=this.stock).call(c,-3);if(l.length>0)return(u=this.waste).push.apply(u,ml()(l).call(l)),!0}return this.waste.length>0&&!this.outOfMove&&(this.stock=ml()(e=this.waste).call(e),this.waste=[],this.outOfMove=!0,!0)},t.generateMap=function(e,t){if(void 0===e&&(e=0),void 0===t&&(t=!0),0!=e){this.turn1=t;for(var n,a,i=[],r=0;r<e;r++){var s=this.shuffler.generateSeed();console.log(r);for(var o=0,c=0,u=0;u<50;u++)o+=+this.solveSeed(s),c=(this.totalMoves+c*u)/(u+1);o/50==1&&i.push({seed:s,totalMoves:c,winRate:o/50})}if(t)(n=this.turn1Seeds).push.apply(n,i);else(a=this.turn3Seeds).push.apply(a,i);console.log(this),console.log(De()(i).call(i,(function(e){return e.seed+"\t"+e.winRate+"\t"+e.totalMoves})).join("\n"))}},t.generateMapByRate=function(e,t,n,a){if(0!=e){this.turn1=t;for(var i,r,s=[],o=0;o<e;o++){var c=this.shuffler.generateSeed();console.log(o);for(var u=0,l=0,h=0;h<100;h++){this.solveSeed(c)&&(l=(this.totalMoves+l*u)/(u+1),u+=1)}var d=u/100;d>=n&&d<a&&s.push({seed:c,totalMoves:l,winRate:u/100})}if(t)(i=this.turn1Seeds).push.apply(i,s);else(r=this.turn3Seeds).push.apply(r,s);console.log(this),console.log(De()(s).call(s,(function(e){return e.seed+"\t"+e.winRate+"\t"+e.totalMoves})).join("\n"))}},t.solveSeed=function(e){var t=this.shuffler.shuffle(e);return this.intBoard(t),!!this.solve()},t.testMaps=function(e,t){this.turn1=!t;for(var n,a,i=[],r=0;r<e.length;r++){var s=e[r],o=this.shuffler.shuffle(s);this.intBoard(o),console.log(r);for(var c=0,u=0,l=0;l<100;l++)c+=+this.solveSeed(s),u=(this.totalMoves+u*l)/(l+1);c/100==1&&i.push({seed:s,totalMoves:u,winRate:c/100})}t?(n=this.turn3Seeds).push.apply(n,i):(a=this.turn1Seeds).push.apply(a,i);console.log(this),console.log(De()(i).call(i,(function(e){return e.seed+"\t"+e.winRate+"\t"+e.totalMoves})).join("\n"))},e}(),ih=ah,rh=function(){function e(e){this.gameplay=void 0,this.gameplay=e}var t=e.prototype;return t.saveCurrentBoardData=function(){var e,t,n,a,i,r=this,s=this.gameplay.boardGame,o={seed:this.gameplay.getSeed(),stock:De()(e=s.stock.cards).call(e,(function(e){return r.cardTagToIdx(e.getTag())})),waste:De()(t=s.waste.cards).call(t,(function(e){return r.cardTagToIdx(e.getTag())})),piles:De()(n=s.piles).call(n,(function(e){var t;return De()(t=e.cards).call(t,(function(e){return r.cardTagToIdx(e.getTag())}))})),faceBackOfPiles:De()(a=s.piles).call(a,(function(e){var t;return Ku()(t=e.cards).call(t,(function(e){return e.isFacingUp()}))})),foundations:De()(i=s.foundations).call(i,(function(e){var t;return De()(t=e.cards).call(t,(function(e){return r.cardTagToIdx(e.getTag())}))})),score:s.getScore(),time:s.getTime(),moves:s.getMoves(),draw3:s.draw3,movesData:s.mover.undos,updatedAt:(new Date).getTime()};Ts("current-board",{boardData:o})},t.hasSavedGame=function(){return!!ws("current-board")},t.clearLastGame=function(){!function(e){try{localStorage.removeItem(e)}catch(t){return!1}}("current-board")},t.getLastGameData=function(){var e=ws("current-board");if(e){var t=e.boardData;if(this.isBoardDataValid(t))return t}},t.isBoardDataValid=function(e){return!0},t.cardTagToIdx=function(e){var t=e%100,n=(e-t)/100;return 13*(1==n?3:n-2)+t-1},e}(),sh=rh,oh=function(e){function t(t){var n;return(n=e.call(this)||this).scene=void 0,n.boardGame=void 0,n.y=void 0,n.solver=void 0,n.seed=void 0,n.saveSystem=void 0,n.confettiSmallFallDown=void 0,n.cardsLayer=void 0,n.slotLayer=void 0,n.topLayer=void 0,n.startGameCount=void 0,n.checkGameModeToStartGame=function(){if(oo.instance.isChallengeMode()){var e=n.scene.storage.getState(),t=n.scene.player.getPlayerId();if(!vs(e,{playerId:t})){var a=n.scene.storage.getState(),i=bs(a);if(void 0!=(null==i?void 0:i.draw3)&&void 0!=(null==i?void 0:i.seed))return void n.startGameWith(i.draw3,i.seed);console.warn("Cannot get extra data")}}n.startNewGame()},n.loadSavedGame=function(){var e=n.saveSystem.getLastGameData();if(e)return n.seed=e.seed,void n.boardGame.continueGame(e);n.startNewGame()},n.finishGame=(0,a.Z)(r().mark((function e(){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.boardGame.isGameOver()){e.next=2;break}return e.abrupt("return");case 2:return n.saveSystem.clearLastGame(),e.next=5,n.handleShowInterstitialAd();case 5:case"end":return e.stop()}}),e)}))),n.scene=t,n.startGameCount=0,n.cardsLayer=t.add.container(),n.slotLayer=t.add.container(),n.topLayer=t.add.container(),n.cardsLayer.setDepth(Lu.DEPTH.CARD),n.slotLayer.setDepth(Lu.DEPTH.CARD_SLOT),n.topLayer.setDepth(Lu.DEPTH.REMAINING_STOCK),n.solver=new ih,n.boardGame=new nh((0,Hi.Z)(n)),n.saveSystem=new sh((0,Hi.Z)(n)),n.createConfetti(),n}(0,f.Z)(t,e);var n=t.prototype;return n.getWorldCardPosition=function(e){var t=this.cardsLayer.getWorldTransformMatrix().decomposeMatrix(),n=t.translateX,a=t.translateY;return{x:n+e.x,y:a+e.y}},n.updateY=function(e){this.y=e;var t=this.cardsLayer,n=this.slotLayer,a=this.topLayer;this.scene.tweens.add({targets:[t,n,a],y:e,duration:200})},n.getSeed=function(){return this.seed},n.startNewGame=function(){var e=(0,a.Z)(r().mark((function e(){var t,n,a=this;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.tryCreateShortcut(),this.startGameCount+=1,this.saveSystem.clearLastGame(),this.scene.levelLoader.isLevelLoaded()){e.next=6;break}return this.scene.time.delayedCall(500,(function(){return a.startNewGame()})),e.abrupt("return");case 6:if(!this.boardGame.isDealing()){e.next=8;break}return e.abrupt("return");case 8:t=this.scene.player.getPlayerSettings().drawMode3,n=this.scene.levelLoader.randomSeed(t),this.seed=n,this.boardGame.draw3=t,this.boardGame.startGame(n),this.scene.checkNewUser();case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.checkGameplayBeforeStartNewGame=function(){if(!this.boardGame.isGameWon()&&this.boardGame.getMoves()>0){this.scene.gameStats.addLose(this.boardGame.draw3);var e=this.scene.gameStats.getDraw(this.boardGame.draw3),t=e.totalGame,n=e.wins;this.scene.analytics.event(pn._.LEVEL_GIVE_UP,{total_game:t,wins:n,score:this.boardGame.getScore(),moves:this.boardGame.getMoves(),time_played:Math.floor(this.boardGame.getTime()/1e3),draw3:this.boardGame.draw3})}},n.startGameWith=function(e,t){this.seed=t,this.boardGame.draw3=e,this.boardGame.startGame(t)},n.replayGame=function(){this.boardGame.boardState!==tl.DEALING&&(this.seed?this.boardGame.startGame(this.seed):this.startNewGame())},n.getGameOverScreenKey=function(e){return oo.instance.isChallengeMode()?Qi.o4.PLAY_WITH_FRIEND_GAME_OVER_SCREEN:oo.instance.isTournamentMode()?Qi.o4.TOURNAMENTS_RESULT_SCREEN:e?Qi.o4.VICTORY_SCREEN:Qi.o4.NO_MORE_MOVES_SCREEN},n.handleGameOver=function(){var e=(0,a.Z)(r().mark((function e(t){var n,i,s,o,c,u,l,d,p,f,g,m,v,y,b,A,S,E,w,T;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fl(this.scene,500);case 2:if(i=this.boardGame.draw3,s=this.boardGame.getScore(),o=this.boardGame.getTime(),c=this.boardGame.getMoves(),u=this.getSeed(),l=this.boardGame.mover.undoClicked>0,null==(n=this.boardGame.updateScoreTimer)||n.remove(),d=Math.floor(o/1e3),p=this.scene.storage.getState(),f=ps(p),g=this.scene.gameStats.getDraw(this.boardGame.draw3),m=g.totalGame,v=g.wins,y=this.scene.levelLoader.getLevelByWins(v),t?this.scene.gameStats.addWin({draw3:i,score:s,winningMoves:c,winningTime:o,usedUndo:l}):this.scene.gameStats.addLose(this.boardGame.draw3),!f){e.next=20;break}return e.next=18,xs(f);case 18:b=e.sent,this.scene.storage.dispatch(Js(b));case 20:return this.scene.storage.dispatch(ao({level:v,score:s,time:o,moves:c,total_game:m,difficulty:y,seed:u,time_played:d,success:t,draw3:this.boardGame.draw3})),e.next=23,this.scene.storage.dispatch(function(){var e=(0,a.Z)(r().mark((function e(t,n){var a,i,s,o,c,u,l,d,p,f,g,m,v,y,b,A,S,E,w;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a=window.game,i=a.analytics,a.facebook,s=n(),o=ss(s),c=Es(s),u=c.score,l=void 0===u?0:u,d=c.level,p=void 0===d?0:d,f=c.time,g=void 0===f?0:f,m=c.moves,v=void 0===m?0:m,y=c.total_game,b=c.difficulty,A=c.seed,S=c.time_played,E=c.success,w=c.draw3,console.log(Es(s)),t(So(l)),e.next=9,t(To(o,{score:l,level:p,time:g,moves:v}));case 9:s=n(),i.event(pn._.MATCH_END,{game_mode:GameCore.Utils.String.toUpperCamelCase(o),total_game:y,difficulty:b,level:p,level_name:"level_"+p,score:l,moves:v,time_played:S,success:E,draw3:w,seed:A}),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),(0,h.tO)(e.t0);case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t,n){return e.apply(this,arguments)}}());case 23:A=this.scene.gameStats.getDraw(this.boardGame.draw3),S=A.bestScore,E=A.bestWinningTime,w=A.bestWinningMoves,T=this.getGameOverScreenKey(t),this.scene.screen.open(T,{score:s,bestScore:S,winningMoves:c,bestWinningMoves:w,winningTime:o,bestWinningTime:E,draw3:this.boardGame.draw3}),this.scene.analytics.event(pn._.LEVEL_END,{total_game:m,difficulty:y,level:v,score:s,moves:c,time_played:d,success:t,draw3:this.boardGame.draw3,seed:u});case 27:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.showWellDoneScreen=function(){var e=(0,a.Z)(r().mark((function e(t){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.scene.screen.open(Qi.o4.WELL_DONE_SCREEN,{wellDone:t}),e.next=3,fl(this.scene,1e3);case 3:return this.scene.screen.close(Qi.o4.WELL_DONE_SCREEN),e.next=6,fl(this.scene,300);case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.tryCreateShortcut=function(){this.startGameCount>=1&&this.scene.game.facebook.attemptToAddShortcut()},n.startGameWithSeed=function(e){this.boardGame.boardState!==tl.DEALING&&(this.seed=e,this.boardGame.startGame(e))},n.update=function(e){this.boardGame.update(e)},n.handleShowInterstitialAd=function(){var e=(0,a.Z)(r().mark((function e(){var t;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=this.scene).ads.canbeShowInterstitialAd()){e.next=15;break}return t.ads.setAdInProcess(!0),t.audio.pauseMusic(),t.audio.muteAll(),e.prev=5,e.next=8,t.ads.showInterstitialAdAsync();case 8:e.next=12;break;case 10:e.prev=10,e.t0=e.catch(5);case 12:t.ads.setAdInProcess(!1),GameSDK.isAudioEnabled()&&(t.audio.unmuteAll(),t.audio.playMusic()),t.ads.preloadInterstitialAdAsync().catch((function(){}));case 15:case"end":return e.stop()}}),e,this,[[5,10]])})));return function(){return e.apply(this,arguments)}}(),n.createConfetti=function(){var e,t,n=this.scene.gameZone.width,a=new Phaser.Geom.Rectangle(n/2-187.5,-100,375,50),i=De()(e=Mt()(t=Array(40)).call(t,0)).call(e,(function(e,t){var n;return"confetti/papers/"+xu()(n=GameCore.Utils.Number).call(n,t,4,"0")}));this.confettiSmallFallDown=new er.Z(this.scene,{rotate:{start:-720,end:0},lifespan:{min:1500,max:2e3},emitZone:{source:a,type:"random"},particleBringToTop:!0,frame:i,tint:void 0}),this.confettiSmallFallDown.setDepth(ln.Z.ON_TOP)},t}(Phaser.Events.EventEmitter),ch=oh,uh={FOOTER:12,TITLE:24,TAB_SELECTOR_LABEL:14,TOURNAMENT_BLOCK:{TITLE:20,JOIN_LABEL:16,LOW_TO_WIN:12}},lh=fn.Z.GAMEPLAY_DEFAULT,hh=lh.KEY,dh=lh.FRAME,ph=-10,fh=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n.settingsBtn=void 0,n.themeBtn=void 0,n.gameStatsButton=void 0,n.playBtn=void 0,n.hintBtn=void 0,n.undoBtn=void 0,n.scene=t,n.setSize(375,68),n.createBackground(),n.createButtons(),t.add.existing((0,Hi.Z)(n)),n}(0,f.Z)(t,e);var n=t.prototype;return n.createBackground=function(){var e=this.scene.world.isLandscape()?0:40,t=this.scene.add.image(0,0,hh,dh.FOOTER_BG);t.setWorldSize(this.width+e,this.height),this.add(t)},n.createButtons=function(){this.createSettingsBtn(),this.createGameStatsButton(),this.createPlayBtn(),this.createHintBtn(),this.createUndoBtn(),this.alignButtons()},n.createSettingsBtn=function(){var e=this;this.settingsBtn=new Wl.Z(this.scene,40,40),this.settingsBtn.setName("Settings");var t=this.scene.add.image(0,ph,hh,dh.IC_SETTINGS).setTint(16579837);t.setWorldSize(28,28);var n=this.scene.make.bitmapText({font:No.Z.PRIMARY.KEY,size:this.scene.fontSize(uh.FOOTER),text:this.scene.lang.Text.settings,origin:{x:.5,y:.5},y:14}).setTint(13355979);this.settingsBtn.add([t,n]),this.settingsBtn.onClick=function(){e.scene.screen.open(Qi.o4.SETTINGS_SCREEN)}},n.createGameStatsButton=function(){var e=this;this.gameStatsButton=new Wl.Z(this.scene,40,40),this.gameStatsButton.setName("GameStats");var t=this.scene.add.image(0,-10,hh,dh.MENU_STATISTIC).setTint(16579837);t.setWorldSize(28,28);var n=this.scene.make.bitmapText({font:No.Z.PRIMARY.KEY,size:this.scene.fontSize(uh.FOOTER),text:this.scene.lang.Text.statistics,origin:{x:.5,y:.5},y:14}).setTint(13355979);this.gameStatsButton.add([t,n]),this.gameStatsButton.onClick=function(){e.scene.screen.open(Qi.o4.GAME_STATS_SCREEN)}},n.createPlayBtn=function(){var e=this;this.playBtn=new Wl.Z(this.scene,40,40),this.playBtn.setName("Play");var t=this.scene.add.image(0,ph,hh,dh.ADD_SQUARE).setTint(16579837);t.setWorldSize(28,28);var n=this.scene.make.bitmapText({font:No.Z.PRIMARY.KEY,size:this.scene.fontSize(uh.FOOTER),text:this.scene.lang.Text.game,origin:{x:.5,y:.5},y:14}).setTint(13355979);this.playBtn.add([t,n]),this.playBtn.onClick=function(){e.scene.screen.open(Qi.o4.PLAY_SCREEN)}},n.createHintBtn=function(){var e=this;this.hintBtn=new Wl.Z(this.scene,40,40),this.hintBtn.setName("Hint");var t=this.scene.add.image(0,ph,hh,dh.IC_HINT).setTint(16579837);t.setWorldSize(28,28);var n=this.scene.make.bitmapText({font:No.Z.PRIMARY.KEY,size:this.scene.fontSize(uh.FOOTER),text:this.scene.lang.Text.hint,origin:{x:.5,y:.5},y:14}).setTint(13355979);this.hintBtn.add([t,n]),this.hintBtn.onClick=function(){e.scene.gameplay.boardGame.hint.showHint()},this.hintBtn.setDisabled(!0)},n.createUndoBtn=function(){var e=this;this.undoBtn=new Wl.Z(this.scene,40,40),this.undoBtn.setName("Undo");var t=this.scene.add.image(0,ph,hh,dh.IC_UNDO).setTint(16579837);t.setWorldSize(28,28);var n=this.scene.make.bitmapText({font:No.Z.PRIMARY.KEY,size:this.scene.fontSize(uh.FOOTER),text:this.scene.lang.Text.undo,origin:{x:.5,y:.5},y:14}).setTint(13355979);n.setCenterAlign(),this.undoBtn.add([t,n]),this.undoBtn.onClick=function(){e.scene.gameplay.boardGame.mover.undo()}},n.createThemeBtn=function(){var e=this;this.themeBtn=new Wl.Z(this.scene,40,40),this.themeBtn.setName("Theme");var t=this.scene.add.image(0,ph,hh,dh.IC_THEME).setTint(16579837);t.setWorldSize(28,28);var n=this.scene.make.bitmapText({font:No.Z.PRIMARY.KEY,size:this.scene.fontSize(uh.FOOTER),text:"Theme",origin:{x:.5,y:.5}}).setTint(13355979);this.themeBtn.add([t,n]),this.themeBtn.onClick=function(){e.scene.screen.open(Qi.o4.THEME_SCREEN)}},n.alignButtons=function(){var e=[this.settingsBtn,this.gameStatsButton,this.playBtn,this.hintBtn,this.undoBtn];this.add(e);for(var t=0;t<e.length;t++)e[t].setX(75*(t-e.length/2+.5)),e[t].setY(2)},t}(Phaser.GameObjects.Container),gh=fh,mh=n(26),vh=function(e){return e.LEFT="left",e.RIGHT="right",e.CENTER="center",e.JUSTIFY="justify",e}(vh||{}),yh=/[A-Za-z0-9 .?/:;'"]*$/,bh=function(e){function t(t){var n;return(n=e.call(this,t)||this).text=void 0,n.bmtText=void 0,n.content=void 0,n.maxLen=void 0,n.init(),n.scene.add.existing((0,Hi.Z)(n)),n.maxLen=12,n}(0,f.Z)(t,e);var n=t.prototype;return n.init=function(){this.text=this.scene.make.text({style:{fontFamily:No.Z.FONT_FAMILY}}),this.text.setHighQuality(),this.bmtText=this.scene.make.bitmapText({font:No.Z.PRIMARY.KEY}),this.setFontSize(20),this.setOrigin(.5,.5),this.setCenterAlign(),this.add([this.text,this.bmtText])},n.setFont=function(e){this.bmtText.setFont(e)},n.setFontSize=function(e){this.bmtText.setFontSize(this.scene.fontSize(e)),this.text.setFontSize(this.scene.fontSize(e)),this.setSize(this.bmtText.width,this.bmtText.height)},n.setOrigin=function(e,t){this.text.setOrigin(e,t),this.bmtText.setOrigin(e,t)},n.setText=function(e){this.content=e,this.updateText()},n.setMaxLen=function(e){this.maxLen=e,this.updateText()},n.setColor=function(e){this.text.setTint(e),this.bmtText.setTint(e)},n.setCenterAlign=function(){this.text.setAlign(vh.CENTER),this.bmtText.setCenterAlign()},n.setLeftAlign=function(){this.text.setAlign(vh.LEFT),this.bmtText.setLeftAlign()},n.setRightAlign=function(){this.text.setAlign(vh.RIGHT),this.bmtText.setRightAlign()},n.updateText=function(){var e=this.content,t=GameCore.Utils.String.removeDiacritics(e),n=GameCore.Utils.String.getShortName(t,this.maxLen);yh.test(e)?(this.bmtText.setText(n),this.text.kill(),this.bmtText.revive()):(this.text.setText(n),this.text.revive(),this.bmtText.kill())},t}(Phaser.GameObjects.Container),Ah=bh,Sh=fn.Z.GAMEPLAY_DEFAULT.KEY,Eh="----",wh=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n.avatar=void 0,n.username=void 0,n.scoreText=void 0,n.scoreIcon=void 0,n.timeText=void 0,n.moveText=void 0,n.scene=t,n.setSize(132,40),n.createBackground(),n.createAvatar(),n.createUsername(),n.createIcon(),n.createText(),n.timeText.kill(),n.moveText.kill(),n}(0,f.Z)(t,e);var n=t.prototype;return n.alignLeft=function(){this.scoreIcon.setPosition(-8,7),this.avatar.setPosition(-38,0),this.username.setOrigin(0,.5),this.username.setPosition(-14,-8),this.scoreText.setPosition(5,7),this.scoreText.setLeftAlign(),this.scoreText.setOrigin(0,.5)},n.alignRight=function(){this.scoreIcon.setPosition(8,7),this.avatar.setPosition(38,0),this.username.setOrigin(1,.5),this.username.setPosition(14,-8),this.scoreText.setPosition(-5,7),this.scoreText.setRightAlign(),this.scoreText.setOrigin(1,.5)},n.createUsername=function(){var e=new Ah(this.scene);e.setText("Your friend"),e.setFontSize(11),this.username=e,this.add(e)},n.createBackground=function(){var e=new Xl(this.scene,{key:"challenge-info-block",radius:6,border:12,width:this.width,height:this.height,y:-200});this.add(e)},n.createAvatar=function(){this.avatar=new wc(this.scene,{width:42,height:42,key:Sh,background:"blank"}),this.avatar.background.kill(),this.avatar.loadPhoto(Ui.Z.AVATAR.KEY,Ui.Z.AVATAR.FILE,100),this.avatar.setPosition(-38,0),this.add(this.avatar)},n.createIcon=function(){var e=this.scene.add.image(-6,0,Sh,"medal-star");e.setWorldSize(16,16),this.add([e]),this.scoreIcon=e},n.createText=function(){var e=this.scene.make.bitmapText({font:No.Z.PRIMARY.KEY,size:this.scene.fontSize(14),text:"0",origin:{x:.5,y:.5},y:0,x:6});this.add(e);var t=this.scene.make.bitmapText({font:No.Z.PRIMARY.KEY,size:this.scene.fontSize(14),text:"00:00",origin:{x:.5,y:.5},y:0,x:6});e.setCenterAlign(),this.add(t);var n=this.scene.make.bitmapText({font:No.Z.PRIMARY.KEY,size:this.scene.fontSize(14),text:"0",origin:{x:0,y:.5},y:18,x:6});this.add(n),this.scoreText=e,this.timeText=t,this.moveText=n},n.updateData=function(e,t,n){this.scoreText.setText(""+(null!=e?e:Eh)),this.timeText.setText(t?(0,tr.F0)(t,!1):Eh),this.moveText.setText(""+(null!=n?n:Eh))},t}(Phaser.GameObjects.Container),Th=wh,Ih=16762624,Ch=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n.leftBlock=void 0,n.rightBlock=void 0,n.scene=t,n.setSize(375,62),n.createBlocks(),n.createVSText(),n}(0,f.Z)(t,e);var n=t.prototype;return n.createBg=function(){var e=this.width,t=this.height,n=new mh.Z(this.scene,0,0,e,t,0,16579837);this.add(n)},n.createBlocks=function(){this.leftBlock=new Th(this.scene),this.leftBlock.alignRight(),this.rightBlock=new Th(this.scene),this.rightBlock.alignLeft(),this.leftBlock.setX(-90),this.leftBlock.setY(-3),this.rightBlock.setX(90),this.rightBlock.setY(-3),this.add([this.leftBlock,this.rightBlock])},n.createVSText=function(){var e=this.scene.make.bitmapText({font:No.Z.BOLD.KEY,size:this.scene.fontSize(18),text:"VS",origin:{x:.5,y:.5}});e.setTint(11632207),this.add(e),e.setTint(11222016,Ih,Ih,Ih),Phaser.Display.Align.In.Center(e,this)},n.alignChildren=function(){this.leftBlock.setX(-90),this.rightBlock.setX(90)},t}(Phaser.GameObjects.Container),kh=Ch,xh=function(e){function t(t){var n;return(n=e.call(this,t)||this).label=void 0,n.text=void 0,n.createLabel(),n.createText(),n.setTintComponents(),n.alignComponents(),n}(0,f.Z)(t,e);var n=t.prototype;return n.createLabel=function(){this.label=this.scene.make.bitmapText({font:No.Z.BOLD.KEY,size:this.scene.fontSize(16),text:"Label",origin:{x:0,y:.5}}),this.add(this.label)},n.createText=function(){this.text=this.scene.make.bitmapText({font:No.Z.BOLD.KEY,size:this.scene.fontSize(16),text:"999",origin:{x:0,y:.5}}),this.add(this.text)},n.setTintComponents=function(){this.label.setTint(15527148),this.text.setTint(15527148)},n.alignComponents=function(){Phaser.Display.Align.In.LeftCenter(this.label,this),Phaser.Display.Align.To.RightCenter(this.text,this.label,7)},t}(Phaser.GameObjects.Container),Ph=function(e){function t(t){var n;(n=e.call(this,t)||this).label.setText(t.lang.Text.moves),n.text.setOrigin(1,.5),Phaser.Display.Align.In.RightCenter(n.text,(0,Hi.Z)(n),0),Phaser.Display.Align.To.LeftCenter(n.label,n.text,-14);var a=n.label.x;return n.scene.events.on(Phaser.Scenes.Events.UPDATE,(function(){n.label.setX(a-9*(n.text.text.length-1))})),n}return(0,f.Z)(t,e),t}(xh),_h=function(e){function t(t){var n;return(n=e.call(this,t)||this).label.setText(t.lang.Text.score),n.alignComponents(),n}return(0,f.Z)(t,e),t}(xh),Oh=function(e){function t(t){var n;return(n=e.call(this,t)||this).label.kill(),n.text.setOrigin(.5,.5),Phaser.Display.Align.In.Center(n.text,(0,Hi.Z)(n)),n}return(0,f.Z)(t,e),t.prototype.alignComponents=function(){Phaser.Display.Align.In.Center(this.text,this)},t}(xh),Rh=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n.movesBlock=void 0,n.timeBlock=void 0,n.scoreBlock=void 0,n.scene=t,n.setSize(375,62),n.createContent(),n}(0,f.Z)(t,e);var n=t.prototype;return n.createContent=function(){this.createScore(),this.createTime(),this.createMoves()},n.createMoves=function(){this.movesBlock=new Ph(this.scene),this.add(this.movesBlock)},n.createTime=function(){this.timeBlock=new Oh(this.scene),this.add(this.timeBlock)},n.createScore=function(){this.scoreBlock=new _h(this.scene),this.add(this.scoreBlock)},n.alignChildren=function(){var e=this.scene.gameplay.boardGame.getHorizontalPileSpace();this.movesBlock.setX(3.4*e-this.movesBlock.width/2),this.scoreBlock.setX(3.4*-e+this.scoreBlock.width/2)},t}(Phaser.GameObjects.Container),Dh=Rh,Lh=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n.movesBlock=void 0,n.timeBlock=void 0,n.scoreBlock=void 0,n.scene=t,n.setSize(375,54),n.createContent(),n}(0,f.Z)(t,e);var n=t.prototype;return n.createContent=function(){this.createScore(),this.createTime(),this.createMoves()},n.createMoves=function(){this.movesBlock=new Ph(this.scene),this.add(this.movesBlock)},n.createTime=function(){this.timeBlock=new Oh(this.scene),this.add(this.timeBlock)},n.createScore=function(){this.scoreBlock=new _h(this.scene),this.add(this.scoreBlock)},n.alignChildren=function(){var e=this.scene.gameplay.boardGame.getHorizontalPileSpace();this.movesBlock.setX(3.4*e-this.movesBlock.width/2),this.scoreBlock.setX(3.4*-e+this.scoreBlock.width/2)},t}(Phaser.GameObjects.Container),Bh=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n._tournamentTitle=void 0,n.scene=t,n.setSize(375,62),n.createContent(),n}(0,f.Z)(t,e);var n=t.prototype;return n.createContent=function(){this.createTitle()},n.createTitle=function(){this._tournamentTitle=this.scene.make.bitmapText({font:No.Z.PRIMARY.KEY,size:this.scene.fontSize(18),text:"Tournament",origin:{x:.5,y:.5},y:-15}),this.add(this._tournamentTitle),Phaser.Display.Align.In.BottomCenter(this._tournamentTitle,this)},(0,ue.Z)(t,[{key:"tournamentTitle",get:function(){return this._tournamentTitle}}]),t}(Phaser.GameObjects.Container),Nh=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n._statBlock=void 0,n._titleBlock=void 0,n.scene=t,n.createContent(),n.setSize(375,n._titleBlock.height+n._statBlock.height),n.alignChildren(),n}(0,f.Z)(t,e);var n=t.prototype;return n.createBg=function(){var e=this.width,t=this.height,n=new mh.Z(this.scene,0,0,e,t,0,16579837);this.add(n)},n.createContent=function(){this.createTitle(),this.createStat()},n.createTitle=function(){this._titleBlock=new Bh(this.scene),this.add(this._titleBlock)},n.createStat=function(){this._statBlock=new Lh(this.scene),this.add(this._statBlock)},n.alignChildren=function(){Phaser.Display.Align.In.TopCenter(this._titleBlock,this),Phaser.Display.Align.In.BottomCenter(this._statBlock,this,0,-5)},(0,ue.Z)(t,[{key:"statBlock",get:function(){return this._statBlock}},{key:"titleBlock",get:function(){return this._titleBlock}}]),t}(Phaser.GameObjects.Container),Mh=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n.singleInfo=void 0,n.challengeInfo=void 0,n.tournamentInfo=void 0,n.scene=t,n.setSize(375,62),t.add.existing((0,Hi.Z)(n)),n.createChallengeInfo(),n.createSingleInfo(),n.createTournamentInfo(),n}(0,f.Z)(t,e);var n=t.prototype;return n.getInfoContainersWithout=function(e){var t;return Oe()(t=[this.singleInfo,this.challengeInfo,this.tournamentInfo]).call(t,(function(t){return t!==e}))},n.useChallengeInfo=function(){var e=this,t=[this.tournamentInfo];this.challengeInfo.revive(),this.singleInfo.revive(),this.scene.tweens.add({targets:this.challengeInfo,y:{from:-200,to:0},duration:500,ease:Phaser.Math.Easing.Sine.Out,onStart:function(){e.scene.gameplay.updateY(25)}}),this.scene.tweens.add({targets:this.singleInfo,y:{from:-200,to:35},duration:500,ease:Phaser.Math.Easing.Sine.Out}),this.scene.tweens.add({targets:t,y:{from:0,to:-200},duration:500,ease:Phaser.Math.Easing.Sine.In,onComplete:function(){return De()(t).call(t,(function(e){return e.kill()}))}})},n.useSingleInfo=function(){var e=this,t=this.getInfoContainersWithout(this.singleInfo);De()(t).call(t,(function(e){return e.kill()})),this.singleInfo.revive(),this.scene.tweens.add({targets:this.singleInfo,y:{from:-200,to:0},duration:500,ease:Phaser.Math.Easing.Sine.Out,onStart:function(){e.scene.gameplay.updateY(0)}}),this.scene.tweens.add({targets:t,y:{from:0,to:-200},duration:500,ease:Phaser.Math.Easing.Sine.In,onComplete:function(){return De()(t).call(t,(function(e){return e.kill()}))}})},n.useTournamentInfo=function(){var e=this,t=this.getInfoContainersWithout(this.tournamentInfo);this.tournamentInfo.revive(),this.scene.tweens.add({targets:this.tournamentInfo,y:{from:-200,to:0},duration:500,ease:Phaser.Math.Easing.Sine.Out,onStart:function(){e.scene.gameplay.updateY(25)}}),this.scene.tweens.add({targets:t,y:{from:0,to:-200},duration:500,ease:Phaser.Math.Easing.Sine.In,onComplete:function(){return De()(t).call(t,(function(e){return e.kill()}))}})},n.createChallengeInfo=function(){var e=new kh(this.scene);this.challengeInfo=e,this.add(e),this.challengeInfo.kill()},n.createSingleInfo=function(){var e=new Dh(this.scene);this.singleInfo=e,this.add(e)},n.createTournamentInfo=function(){var e=new Nh(this.scene);this.tournamentInfo=e,this.add(e),this.tournamentInfo.kill()},n.update=function(){var e=this.scene.gameplay.boardGame,t=e.getScore(),n=e.getTime(),a=e.getMoves(),i=this.singleInfo,r=i.scoreBlock,s=i.timeBlock,o=i.movesBlock;switch(r.text.setText(""+t),s.text.setText((0,tr.F0)(n,!1)),o.text.setText(""+a),oo.instance.getGameMode()){case ro.CHALLENGE_FRIENDS:var c=this.challengeInfo.leftBlock;c.scoreText.setText(""+t),c.timeText.setText((0,tr.F0)(n,!1)),c.moveText.setText(""+a);break;case ro.TOURNAMENT:var u=this.tournamentInfo.statBlock,l=u.movesBlock,h=u.timeBlock;u.scoreBlock.text.setText(""+t),h.text.setText((0,tr.F0)(n,!1)),l.text.setText(""+a)}},n.alignChildren=function(){this.singleInfo.alignChildren(),this.challengeInfo.alignChildren(),this.tournamentInfo.statBlock.alignChildren()},t}(Phaser.GameObjects.Container),Gh=Mh,Fh=n(565),Zh=n(575),Uh=function(e){function t(t){var n;return(n=e.call(this,t)||this).bg=void 0,n.createBackground(),n.createContent(),t.add.existing((0,Hi.Z)(n)),n}(0,f.Z)(t,e);var n=t.prototype;return n.createBackground=function(){this.setSize(360,120);var e=new mh.Z(this.scene,0,0,360,120,16,16119285);e.setAlpha(.9),this.add(e),this.bg=e},n.createContent=function(){this.createNewDealButton(),this.createReplayButton(),this.createCloseButton();var e=this.scene.add.line(0,0,0,0,this.width,0,3947587);e.setLineWidth(.5),e.setAlpha(.36),this.add(e)},n.createNewDealButton=function(){var e=this,t=new Wl.Z(this.scene,360,60);t.setName("NewDeal"),t.onClick=(0,a.Z)(r().mark((function t(){return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.scene.screen.close(Qi.o4.PLAY_SCREEN,{newGameStarted:!0}),!(e.scene instanceof Mm)){t.next=6;break}return t.next=4,e.scene.handlePlaySingle();case 4:return t.next=6,e.scene.gameplay.handleShowInterstitialAd();case 6:case"end":return t.stop()}}),t)})));var n=this.scene.make.bitmapText({font:No.Z.PRIMARY.KEY,size:this.scene.fontSize(18),text:this.scene.lang.Text.newDeal,origin:{x:.5,y:.5}});n.setTint(31487),t.add([n]),Phaser.Display.Align.In.TopCenter(t,this.bg,0),Phaser.Display.Align.In.Center(t,this.bg,0,-30),this.add([t])},n.createRandomDealButton=function(){var e=this,t=new Wl.Z(this.scene,360,60);t.setName("RandomDeal"),t.onClick=(0,a.Z)(r().mark((function t(){var n;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.scene.screen.close(Qi.o4.PLAY_SCREEN,{newGameStarted:!0}),!(e.scene instanceof Mm)){t.next=8;break}return n=e.scene.gameplay.boardGame.getTime(),t.next=5,e.scene.handlePlaySingleWithRandomSeed();case 5:if(!(n>6e4)){t.next=8;break}return t.next=8,e.scene.gameplay.handleShowInterstitialAd();case 8:case"end":return t.stop()}}),t)})));var n=this.scene.make.bitmapText({font:No.Z.PRIMARY.KEY,size:this.scene.fontSize(18),text:"Random Deal",origin:{x:.5,y:.5}});n.setTint(31487),t.add([n]),Phaser.Display.Align.In.Center(t,this.bg,0,30),this.add([t])},n.createReplayButton=function(){var e=this,t=new Wl.Z(this.scene,360,60);t.setName("Replay"),t.onClick=function(){e.scene instanceof Mm&&e.scene.gameplay.replayGame(),e.scene.screen.close(Qi.o4.PLAY_SCREEN,{newGameStarted:!0})};var n=this.scene.make.bitmapText({font:No.Z.PRIMARY.KEY,size:this.scene.fontSize(18),text:this.scene.lang.Text.replay,origin:{x:.5,y:.5}});n.setTint(31487),t.add([n]),Phaser.Display.Align.In.BottomCenter(t,this.bg,0),this.add([t])},n.createCloseButton=function(){var e=this,t=new Zh.Z(this.scene,360,60,16,16579837);t.setName("Close"),t.onClick=function(){e.scene.screen.close(Qi.o4.PLAY_SCREEN,{newGameStarted:!1})};var n=this.scene.make.bitmapText({font:No.Z.BOLD.KEY,size:this.scene.fontSize(18),text:this.scene.lang.Text.cancel,origin:{x:.5,y:.5}});n.setTint(31487),t.add([n]),Phaser.Display.Align.In.TopCenter(t,this.bg,0,3),Phaser.Display.Align.To.BottomCenter(t,this.bg,0,8),this.add([t])},t}(Phaser.GameObjects.Container),Wh=Uh,Hh=function(e){function t(t,n,a,i){var r;return(r=e.call(this,t,n,a,i)||this).slideInAnimation=void 0,r.fadeInAnimation=void 0,r.fadeOutAnimation=void 0,r.playContainer=void 0,r.setDepth(Qi.Ks.POPUP),r.playContainer=new Wh(t),r.add(r.playContainer),r.background.setTint(1315862),r.background.setAlpha(.5),r.background.setInteractive(),r.playContainer.setInteractive(),r}(0,f.Z)(t,e);var n=t.prototype;return n.open=function(){e.prototype.open.call(this),this.runOpenAnimation()},n.close=function(){this.runCloseAnimation()},n.runOpenAnimation=function(){var e,t,n=this;if(null==(e=this.slideInAnimation)||null==(t=e.tween)||!t.isPlaying()){this.scene.audio.playSound($i.Z.POPUP_SHOW);var a=this.scene.game.world.isLandscape()?23:13,i=this.scene.ads.getBannerHeight(),r=this.scene.gameZone.height,s=this.playContainer.height;this.slideInAnimation||(this.slideInAnimation=new Po.Z({targets:[this.playContainer],props:{y:{from:r/2,to:r/2-s/2-i-a-70,ease:Phaser.Math.Easing.Back.Out}},duration:300,onComplete:function(){n.background.once(Phaser.Input.Events.POINTER_DOWN,(function(){return n.scene.screen.close(Qi.o4.PLAY_SCREEN,{newGameStarted:!1})}))}})),this.fadeInAnimation||(this.fadeInAnimation=new bc.Z({targets:[this],duration:300,ease:Phaser.Math.Easing.Sine.InOut})),this.slideInAnimation.play(),this.fadeInAnimation.play()}},n.runCloseAnimation=function(){var t,n,a=this;null!=(t=this.fadeOutAnimation)&&null!=(n=t.tween)&&n.isPlaying()||(this.scene.audio.playSound($i.Z.POPUP_OFF),this.fadeOutAnimation||(this.fadeOutAnimation=new Fh.Z({targets:[this],props:{alpha:0},duration:300,onComplete:function(){e.prototype.close.call(a)}})),this.fadeOutAnimation.play())},t}(GameCore.Screen),zh=Hh,Yh=fn.Z.GAMEPLAY_DEFAULT.KEY,Kh=function(e){function t(t,n){var a;return(a=e.call(this,t,60,50)||this).options=void 0,a.button=void 0,a.getBackgroundByStatus=function(){var e=a.options,t=e.enable,n=e.backgroundOn,i=e.backgroundOff;return t?n:i},a.createButton=function(e){var t=a.getBackgroundByStatus();a.button=a.scene.add.image(0,0,e,t),a.add(a.button)},a.button=t.add.image(0,0,Yh,"ic_switch_off"),a.button.setWorldSize(40,25),a.add(a.button),a.options={enable:n,backgroundOn:"ic_switch_on",backgroundOff:"ic_switch_off"},a.updateStatus(n),a}(0,f.Z)(t,e);var n=t.prototype;return n.processCallback=function(e){var t=this.options.enable;this.updateStatus(!t),e(!t)},n.updateStatus=function(e){this.options.enable=e;var t=this.getBackgroundByStatus();this.button.setFrame(t)},n.logButtonEvent=function(){var e=this.getParentName(),t=this.name,n=!this.options.enable;this.scene.analytics.event(pn._.BUTTON_CLICK,{button_name:t,screen_name:e,enable:n})},t}(Wl.Z),Vh=Kh,jh=fn.Z.GAMEPLAY_DEFAULT,Xh=jh.KEY,qh=jh.FRAME,Jh=function(e){function t(t){var n;return(n=e.call(this,t)||this).bg=void 0,n.toggleButtonMap=new(ne()),n.createBackground(),n.createContent(),n.createCloseButton(),n.listenAudioEnabledChange(),t.add.existing((0,Hi.Z)(n)),n}(0,f.Z)(t,e);var n=t.prototype;return n.listenAudioEnabledChange=function(){var e=this;GameSDK.onAudioEnabledChange((function(t){var n,a;null==(n=e.toggleButtonMap.get("sound"))||n.updateStatus(t),null==(a=e.toggleButtonMap.get("sound"))||a.setDisabled(!t),e.handleSoundChanged(t)}))},n.createBackground=function(){var e=new mh.Z(this.scene,0,0,340,400,20,16579837);this.add(e),this.bg=e,this.setSize(e.width,e.height)},n.createContent=function(){var e=this.scene.make.bitmapText({font:No.Z.BOLD.KEY,size:this.scene.fontSize(20),text:this.scene.lang.Text.settings,origin:{x:.5,y:.5}});e.setTint(1907997),this.add(e),Phaser.Display.Align.In.TopCenter(e,this,0,-12);var t=this.scene.player.getPlayerSettings(),n=t.sound,a=void 0===n||n,i=t.vibrate,r=void 0===i||i,s=t.tapToMove,o=void 0===s||s,c=t.autoHints,u=void 0===c||c,l=t.autoComplete,h=void 0===l||l,d=t.drawMode3,p=void 0!==d&&d,f=qh.IC_VIBRATION,g=qh.IC_SOUND,m=qh.IC_MOVE,v=qh.IC_HINT_SETTINGS,y=qh.IC_AUTO_COMPLETE,b=qh.IC_DRAW_MODE,A=this.scene.lang.Text,S=[this.createToggleButton("sound",A.soundEffects,a,g)];this.isVibrateAvailable()&&S.push(this.createToggleButton("vibrate",A.vibration,r,f)),S.push(this.createThemeButton()),S.push(this.createToggleButton("tapToMove",A.tapToMove,o,m)),S.push(this.createToggleButton("autoHints",A.autoHints,u,v)),S.push(this.createToggleButton("autoComplete",A.autoComplete,h,y)),S.push(this.createToggleButton("drawMode3",A.drawMode3,p,b)),S.push(this.createHowToPlayButton());var E=e.y+50,w=this.scene.add.line(0,E-23,0,0,340,0,3774208,1);w.setLineWidth(.6),this.add(w);for(var T=0;T<S.length;T++)if(S[T].setY(50*T+E),T<S.length-1){var I=this.scene.add.line(0,50*T+E+23,0,0,300,0,1907997,.2);I.setLineWidth(.4),this.add(I)}this.add(S)},n.createToggleButton=function(e,t,n,a){var i=this;void 0===a&&(a="ic_sound");var r=this.scene.add.container(0,0);r.setSize(340,50),r.setName(e);var s=new Vh(this.scene,n);s.setName(e),this.toggleButtonMap.set(e,s),s.onClick=function(t){i.scene.player.setSetting(e,t),i.scene.events.emit("settings-changed",e,t),"sound"==e&&i.handleSoundChanged(t),"drawMode3"==e&&i.scene.screen.open(Qi.o4.NOTIFICATION_SCREEN,{message:i.scene.lang.Text.newSettings}),"vibrate"==e&&i.scene.vibration.performVibrating(50)};var o=this.scene.make.bitmapText({font:No.Z.PRIMARY.KEY,size:this.scene.fontSize(16),text:t,origin:{x:.5,y:.5}}),c=this.scene.add.image(0,0,Xh,a);return c.setWorldSize(24,24),o.setTint(1907997),r.add([s,o,c]),Phaser.Display.Align.In.LeftCenter(c,r,-20,0),Phaser.Display.Align.In.LeftCenter(o,r,-50,0),Phaser.Display.Align.In.RightCenter(s,r,-10,0),r},n.createThemeButton=function(){var e=this,t=new Wl.Z(this.scene,300,50);t.setName("Theme"),t.onClick=function(){e.scene.screen.close(Qi.o4.SETTINGS_SCREEN),e.scene.screen.open(Qi.o4.THEME_SCREEN)};var n=this.scene.make.bitmapText({font:No.Z.PRIMARY.KEY,size:this.scene.fontSize(16),text:this.scene.lang.Text.theme,origin:{x:.5,y:.5}});n.setTint(1907997);var a=this.scene.add.image(0,0,Xh,"ic_theme");a.setWorldSize(24,24);var i=this.scene.add.image(0,0,Xh,qh.IC_NEXT);return i.setWorldSize(16,16),Phaser.Display.Align.In.LeftCenter(n,t,-30),Phaser.Display.Align.In.RightCenter(i,t),Phaser.Display.Align.In.LeftCenter(a,t),t.add([n,a,i]),t},n.createHowToPlayButton=function(){var e=this,t=new Wl.Z(this.scene,300,50);t.setName("HowToPlay"),t.onClick=function(){e.scene.screen.close(Qi.o4.SETTINGS_SCREEN),e.scene.screen.open(Qi.o4.HOW_TO_PLAY_SCREEN)};var n=this.scene.make.bitmapText({font:No.Z.PRIMARY.KEY,size:this.scene.fontSize(16),text:this.scene.lang.Text.howToPlay+"?",origin:{x:.5,y:.5}});n.setTint(1907997);var a=this.scene.add.image(0,0,Xh,qh.IC_BOOK);a.setWorldSize(24,24);var i=this.scene.add.image(0,0,Xh,qh.IC_NEXT);return i.setWorldSize(16,16),Phaser.Display.Align.In.LeftCenter(n,t,-30),Phaser.Display.Align.In.LeftCenter(a,t),Phaser.Display.Align.In.RightCenter(i,t),t.add([n,a,i]),t},n.createSocialBlock=function(){var e=this.scene.add.container();e.setSize(300,50);var t=this.createFollowPageButton(),n=this.createJoinGroupButton();t.setX(-75),Phaser.Display.Align.In.RightCenter(n,e,16),e.add(t),e.add(n);var a=this.scene.add.line(4,0,0,0,0,44,1907997,.2);return a.setLineWidth(.4),e.add(a),e},n.createFollowPageButton=function(){var e=this,t=new Wl.Z(this.scene,150,50);t.setName("FollowPage"),t.onClick=function(){e.scene.game.facebook.followOfficialPageAsync().catch((function(){}))};var n=this.scene.make.bitmapText({font:No.Z.PRIMARY.KEY,size:this.scene.fontSize(16),text:"Follow Page",origin:{x:.5,y:.5}});n.setTint(1907997);var a=this.scene.add.image(0,0,Xh,qh.IC_FLAG);return a.setWorldSize(24,24),t.add([n,a]),Phaser.Display.Align.In.LeftCenter(a,t,0),Phaser.Display.Align.In.LeftCenter(n,t,-32),t},n.createJoinGroupButton=function(){var e=this,t=new Wl.Z(this.scene,150,50);t.setName("JoinGroup"),t.onClick=function(){e.scene.game.facebook.joinOfficialGroupAsync().catch((function(){}))};var n=this.scene.make.bitmapText({font:No.Z.PRIMARY.KEY,size:this.scene.fontSize(16),text:"Join Group",origin:{x:.5,y:.5}});n.setTint(1907997);var a=this.scene.add.image(0,0,Xh,qh.IC_GROUP);return a.setWorldSize(24,24),t.add([n,a]),Phaser.Display.Align.In.LeftCenter(a,t,0),Phaser.Display.Align.In.LeftCenter(n,t,-32),t},n.createStatisticsButton=function(){var e=this,t=new Wl.Z(this.scene,300,50);t.setName("Statistics"),t.onClick=function(){e.scene.screen.close(Qi.o4.SETTINGS_SCREEN),e.scene.screen.open(Qi.o4.GAME_STATS_SCREEN)};var n=this.scene.make.bitmapText({font:No.Z.PRIMARY.KEY,size:this.scene.fontSize(16),text:"Statistics",origin:{x:.5,y:.5}});n.setTint(1907997);var a=this.scene.add.image(0,0,Xh,qh.IC_STATISTICS);a.setWorldSize(24,24);var i=this.scene.add.image(0,0,Xh,qh.IC_NEXT);return i.setWorldSize(16,16),Phaser.Display.Align.In.LeftCenter(n,t,-30),Phaser.Display.Align.In.LeftCenter(a,t),Phaser.Display.Align.In.RightCenter(i,t),t.add([n,a,i]),t},n.handleSoundChanged=function(e){this.scene.sound.volume=e?1:0},n.createCloseButton=function(){var e=this,t=new Wl.Z(this.scene,40,40);t.setName("Close"),t.onClick=function(){e.scene.screen.close(Qi.o4.SETTINGS_SCREEN)};var n=this.scene.add.image(0,0,Xh,"ic_close_gray");n.setWorldSize(24,24),t.add(n),Phaser.Display.Align.In.TopRight(t,this.bg,-4,-6),this.add([t])},n.isVibrateAvailable=function(){var e=GameCore.Utils.Device.isDesktop(),t=GameCore.Utils.Device.isIOS();return!(e||t)},t}(Phaser.GameObjects.Container),Qh=Jh,$h=function(e){function t(t,n,a,i){var r;return(r=e.call(this,t,n,a,i)||this).slideInAnimation=void 0,r.fadeInAnimation=void 0,r.fadeOutAnimation=void 0,r.settingsContainer=void 0,r.setDepth(Qi.Ks.POPUP),r.settingsContainer=new Qh(t),r.add(r.settingsContainer),r.background.setTint(1315862),r.background.setAlpha(.5),r.background.setInteractive(),r.settingsContainer.setInteractive(),r}(0,f.Z)(t,e);var n=t.prototype;return n.open=function(){e.prototype.open.call(this),this.runOpenAnimation()},n.close=function(){this.runCloseAnimation()},n.runOpenAnimation=function(){var e=this;this.scene.audio.playSound($i.Z.POPUP_SHOW);var t=this.scene.ads.getBannerHeight();this.slideInAnimation||(this.slideInAnimation=new Po.Z({targets:[this.settingsContainer],props:{y:{from:this.height/2,to:this.height/2-this.settingsContainer.height/2-20-t,ease:Phaser.Math.Easing.Back.Out}},duration:300,onComplete:function(){e.background.once(Phaser.Input.Events.POINTER_DOWN,(function(){return e.scene.screen.close(Qi.o4.SETTINGS_SCREEN)}))}})),this.fadeInAnimation||(this.fadeInAnimation=new bc.Z({targets:[this],duration:300})),this.slideInAnimation.play(),this.fadeInAnimation.play()},n.runCloseAnimation=function(){var t=this;this.scene.audio.playSound($i.Z.POPUP_OFF),this.fadeOutAnimation||(this.fadeOutAnimation=new Fh.Z({targets:[this],props:{alpha:0},duration:300,onComplete:function(){t.setAlpha(1),e.prototype.close.call(t)}})),this.fadeOutAnimation.play()},t}(GameCore.Screen),ed=$h,td={totalGame:0,wins:0,winsWithoutUndo:0,bestScore:0,averageScore:0,bestWinningTime:0,averageWinningTime:0,mostWinningTime:0,bestWinningMoves:0,mostWinningMoves:0,currentWinningStreak:0,longestWinningStreak:0},nd=function(){function e(e){this.scene=void 0,this.draw1=void 0,this.draw3=void 0,this.scene=e;var t=e.player.getCustomData("game_stats");t&&0!=ie()(t).length?(this.draw1=(0,p.Z)({},t.draw1),this.draw3=(0,p.Z)({},t.draw3)):(this.draw1=(0,p.Z)({},td),this.draw3=(0,p.Z)({},td),this.pushGameStats())}var t=e.prototype;return t.addWin=function(e){console.log("add win: ",e.draw3,e),e.draw3?this.draw3=this.calculateNewStats(this.draw3,e):this.draw1=this.calculateNewStats(this.draw1,e),this.pushGameStats()},t.calculateNewStats=function(e,t){var n=t.score,a=t.winningMoves,i=t.winningTime,r=t.usedUndo,s=e.totalGame+1,o=e.wins+1,c=e.winsWithoutUndo+(r?0:1),u=Math.max(e.bestScore,n),l=(e.averageScore*e.wins+n)/o,h=(e.averageWinningTime*e.wins+i)/o,d=Math.min(i,e.bestWinningTime)||i,p=Math.max(i,e.mostWinningTime),f=Math.min(a,e.bestWinningMoves)||a,g=Math.max(a,e.mostWinningMoves),m=e.currentWinningStreak+1;return{totalGame:s,wins:o,winsWithoutUndo:c,bestScore:u,averageScore:l,averageWinningTime:h,bestWinningTime:d,mostWinningTime:p,bestWinningMoves:f,mostWinningMoves:g,currentWinningStreak:m,longestWinningStreak:Math.max(m,e.longestWinningStreak)}},t.addLose=function(e){console.log("add lose: ",e),e?this.draw3=(0,p.Z)({},this.draw3,{totalGame:this.draw3.totalGame+1,currentWinningStreak:0}):this.draw1=(0,p.Z)({},this.draw1,{totalGame:this.draw1.totalGame+1,currentWinningStreak:0}),this.pushGameStats()},t.pushGameStats=function(){this.scene.player.setCustomData("game_stats",{draw1:this.draw1,draw3:this.draw3})},t.getWins=function(e){return e?this.draw3.wins:this.draw1.wins},t.getDraw=function(e){return e?this.draw3:this.draw1},e}(),ad=nd,id=function(){function e(e){this.scene=void 0,this.scene=e,this.loadLevels()}var t=e.prototype;return t.loadLevels=function(){for(var e=1;e<=5;e++){var t="draw1/level"+e,n="draw3/level"+e;this.scene.cache.text.exists(t)||(this.scene.cache.text.exists(n)||(this.scene.load.text(t,"assets/levels/"+t+".txt"),this.scene.load.text(n,"assets/levels/"+n+".txt")))}this.scene.load.start()},t.isLevelLoaded=function(){var e=this.getKey(!1),t=this.getKey(!0);return!!this.scene.cache.text.get(e)&&(!!this.scene.cache.text.get(t)&&(!!this.scene.cache.text.get(e)&&!!this.scene.cache.text.get(t)))},t.getKey=function(e){var t=this.scene.gameStats.getWins(e),n=this.getLevelByWins(t);return e?"draw3/level"+n:"draw1/level"+n},t.getLevelByWins=function(e){return e<10?1:e<20?2:e<60?3:e<140?4:5},t.randomSeed=function(e){var t=e?3:1,n=this.scene.gameStats.getWins(e),a=this.getLevelByWins(n),i="draw"+t+"/level"+Phaser.Math.RND.between(1,a),r=this.scene.cache.text.get(i);if(!r)throw Error("Level data \u0111\xe2u r\u1ed3i b\u1ea1n \xeai!!!");var s=Phaser.Math.RND.pick(r.split("\n"));return console.log("Random draw"+t+" seed: "+s+", level "+a),s},t.getRandomBeginnerSeed=function(){var e=this.scene.cache.text.get("draw1/level1");if(!e)throw Error("Level data \u0111\xe2u r\u1ed3i b\u1ea1n \xeai!!!");return Phaser.Math.RND.pick(e.split("\n"))},t.getAllSeeds=function(e,t){var n="draw"+(t?3:1)+"/level"+e;return this.scene.cache.text.get(n).split("\n")},t.getDrawMode=function(){},e}(),rd=id,sd=n(76),od=n.n(sd),cd=function(e){function t(t){var n;return(n=e.call(this,t)||this).columns=void 0,n.rows=void 0,n.cellWidths=void 0,n.cellHeight=void 0,n.textGroup=void 0,n.iconGroup=void 0,n.aligns=void 0,n.tableData=void 0,n.background=void 0,n.columns=0,n.rows=0,n.tableData=[],n.aligns=[],n.cellWidths=[],n.cellHeight=0,n.textGroup=n.scene.add.group(),n.iconGroup=n.scene.add.group(),t.add.existing((0,Hi.Z)(n)),n}(0,f.Z)(t,e);var n=t.prototype;return n.setTableSize=function(e,t,n,a,i){this.columns=t,this.rows=e,this.cellWidths=n,this.cellHeight=a,this.aligns=i,this.updateTable()},n.setTableData=function(e){this.tableData=e,this.updateTable()},n.updateTable=function(){var e;this.textGroup.getChildren().forEach((function(e){return e instanceof Phaser.GameObjects.BitmapText&&e.kill()})),this.iconGroup.getChildren().forEach((function(e){return e instanceof Phaser.GameObjects.Image&&e.kill()}));var t=od()(e=this.cellWidths).call(e,(function(e,t){return e+t}),0),n=this.rows*this.cellHeight;this.setSize(t,n);var a=this.tableData;if(a)for(var i=0;i<this.rows;i++){var r=a[i];if(!r)break;var s=this.cellHeight*(.5+i)-this.height/2,o=-this.width/2,c=this.spawnIcon();c.setTexture(fn.Z.GAMEPLAY_DEFAULT.KEY,r[2]),c.setWorldSize(24,24),c.setPosition(o-22,s);for(var u=0;u<this.columns;u++)if(r[u]){var l=this.cellWidths[u],h=this.spawnText();h.setText(r[u]),1==this.aligns[u]?(h.setOrigin(1,.5),h.setPosition(o+l,s)):0==this.aligns[u]?(h.setOrigin(.5,.5),h.setPosition(o+.5*l,s)):(h.setOrigin(0,.5),h.setPosition(o,s)),o+=l}}},n.drawBorder=function(){this.drawRowBorder(),this.drawColumnBorder();var e=this.scene.add.rectangle(0,0,0,0);e.setOrigin(.5,.5),e.setStrokeStyle(1,1907997,.2),e.setSize(this.width,this.height),e.setPosition(-this.width/2,-this.height/2),this.add(e)},n.drawRowBorder=function(){for(var e=-this.height/2,t=1;t<this.rows;t++){var n=this.scene.add.line(-15,e+this.cellHeight*t,0,0,this.width+35,0,1907997,.1);n.setLineWidth(.2),this.add(n)}},n.drawColumnBorder=function(){for(var e=-this.width/2,t=1;t<this.rows;t++){e+=this.cellWidths[t-1]||0;var n=this.scene.add.line(e,0,0,0,0,this.height,1907997,.1);n.setLineWidth(.2),this.add(n)}},n.spawnText=function(){var e=this.textGroup.getFirstDead()||this.createText();return e.revive(),e},n.createText=function(){var e=this.scene.make.bitmapText({font:No.Z.PRIMARY.KEY,size:this.scene.fontSize(16),origin:{x:.5,y:.5}});return e.setTint(1907997),this.textGroup.add(e),this.add(e),e},n.spawnIcon=function(){var e=this.iconGroup.get();return e.revive(),e.clearTint(),this.add(e),e},t}(Phaser.GameObjects.Container),ud=cd,ld=43282,hd=15672868,dd=13425357,pd=303,fd=24,gd=12,md=24,vd=66,yd=1e3,bd=Phaser.Math.Easing.Quadratic.Out,Ad=ld,Sd=hd,Ed=dd,wd=function(e){function t(t){var n;return(n=e.call(this,t)||this).emptyBar=void 0,n.winRateBar=void 0,n.loseRateBar=void 0,n.cornerRadius=void 0,n.isPlayingAnimation=!1,n.updatedLoseGraphicsWidth=-1,n.setSize(pd,gd),n.cornerRadius=n.height/2,n.createEmptyBar(),n.createWinRateBar(),n.createLoseRateBar(),n}(0,f.Z)(t,e);var n=t.prototype;return n.createEmptyBar=function(){var e=this.width,t=this.height;this.emptyBar=new mh.Z(this.scene,0,0,e,t,this.cornerRadius).setFillStyle(Ed),this.add(this.emptyBar)},n.createWinRateBar=function(){var e=this.width,t=this.height;this.winRateBar=new mh.Z(this.scene,0,0,e,t,this.cornerRadius).setFillStyle(Ad).setOrigin(0,.5),this.add(this.winRateBar),Phaser.Display.Align.In.LeftCenter(this.winRateBar,this)},n.createLoseRateBar=function(){var e=this.width,t=this.height;this.loseRateBar=new mh.Z(this.scene,0,0,e/2,t,this.cornerRadius).setFillStyle(Sd).setOrigin(1,.5),this.add(this.loseRateBar),Phaser.Display.Align.In.RightCenter(this.loseRateBar,this)},n.updateWinLoseCount=function(e,t){var n=e+t;if(n<=0)return this.winRateBar.kill(),void this.loseRateBar.kill();e?this.winRateBar.revive():this.winRateBar.kill(),t?this.loseRateBar.revive():this.loseRateBar.kill(),this.bringToTop(t<e?this.loseRateBar:this.winRateBar);var a=t/n*this.width;this.updatedLoseGraphicsWidth=a},n.initAnimation=function(){this.isPlayingAnimation||(this.loseRateBar.width=2*this.cornerRadius,this.winRateBar.width=2*this.cornerRadius)},n.playAnimation=function(){var e=this;this.isPlayingAnimation||(this.isPlayingAnimation=!0,-1!==this.updatedLoseGraphicsWidth?(this.scene.tweens.addCounter({from:2*this.cornerRadius,to:this.updatedLoseGraphicsWidth,ease:bd,duration:yd,onUpdate:function(t){e.loseRateBar.width=t.getValue()},onComplete:function(){e.isPlayingAnimation=!1}}),this.scene.tweens.addCounter({from:2*this.cornerRadius,to:this.width-this.updatedLoseGraphicsWidth+2*this.cornerRadius,ease:bd,duration:yd,onUpdate:function(t){var n=t.getValue();e.winRateBar.width=n>e.width?e.width:n}})):this.isPlayingAnimation=!1)},t}(Phaser.GameObjects.Container),Td=12,Id=ld,Cd=hd,kd=16,xd=function(e){function t(t){var n;return(n=e.call(this,t)||this).winCountLabel=void 0,n.loseCountLabel=void 0,n.setSize(pd,fd),n.createWinCountLabel(),n.createLoseCountLabel(),n.alignComponents(),n}(0,f.Z)(t,e);var n=t.prototype;return n.createWinCountLabel=function(){this.winCountLabel=this.scene.make.bitmapText({font:No.Z.PRIMARY.KEY,size:this.scene.fontSize(kd),text:this.scene.lang.Text.win+": 62",origin:{x:0,y:.5}}).setTint(Id),this.add(this.winCountLabel)},n.createLoseCountLabel=function(){this.loseCountLabel=this.scene.make.bitmapText({font:No.Z.PRIMARY.KEY,size:this.scene.fontSize(kd),text:this.scene.lang.Text.loss+": 32",origin:{x:1,y:.5}}).setTint(Cd),this.add(this.loseCountLabel)},n.alignComponents=function(){Phaser.Display.Align.In.LeftCenter(this.winCountLabel,this),Phaser.Display.Align.In.RightCenter(this.loseCountLabel,this)},n.updateWinLoseCount=function(e,t){this.winCountLabel.setText(this.scene.lang.Text.win+": "+e),this.loseCountLabel.setText(this.scene.lang.Text.loss+": "+t)},t}(Phaser.GameObjects.Container),Pd=ld,_d=hd,Od=Td,Rd=function(e){function t(t){var n;return(n=e.call(this,t)||this).winRateLabel=void 0,n.loseRateLabel=void 0,n.isPlayingAnimation=!1,n.updatedRoundedWinPercentage=-1,n.updatedRoundedLosePercentage=-1,n.setSize(pd,md),n.createWinRateLabel(),n.createLoseRateLabel(),n.alignComponents(),n}(0,f.Z)(t,e);var n=t.prototype;return n.createWinRateLabel=function(){this.winRateLabel=this.scene.make.bitmapText({font:No.Z.PRIMARY.KEY,size:this.scene.fontSize(Od),text:"67%",origin:{x:0,y:.5}}).setTint(Pd),this.add(this.winRateLabel)},n.createLoseRateLabel=function(){this.loseRateLabel=this.scene.make.bitmapText({font:No.Z.PRIMARY.KEY,size:this.scene.fontSize(Od),text:"33%",origin:{x:1,y:.5}}).setTint(_d),this.add(this.loseRateLabel)},n.alignComponents=function(){Phaser.Display.Align.In.LeftCenter(this.winRateLabel,this),Phaser.Display.Align.In.RightCenter(this.loseRateLabel,this)},n.getRoundedWinLosePercentage=function(e,t){if(0===e&&0===t)return{win:0,lose:0};var n=Math.round(100*e);return{win:n,lose:100-n}},n.updateWinLoseRate=function(e,t){var n=e+t,a=n<=0?0:e/n,i=n<=0?0:t/n,r=this.getRoundedWinLosePercentage(a,i),s=r.win,o=r.lose;this.winRateLabel.setText(s+"%"),this.loseRateLabel.setText(o+"%"),this.updatedRoundedWinPercentage=s,this.updatedRoundedLosePercentage=o},n.initAnimation=function(){this.isPlayingAnimation||(this.winRateLabel.setText("0%"),this.loseRateLabel.setText("0%"))},n.playAnimation=function(){var e=this;this.isPlayingAnimation||(this.isPlayingAnimation=!0,-1!==this.updatedRoundedWinPercentage&&-1!==this.updatedRoundedLosePercentage?(this.scene.tweens.addCounter({from:0,to:this.updatedRoundedWinPercentage,ease:bd,duration:yd,onUpdate:function(t){var n=Math.round(t.getValue());e.winRateLabel.setText(n+"%")},onComplete:function(){e.isPlayingAnimation=!1}}),this.scene.tweens.addCounter({from:0,to:this.updatedRoundedLosePercentage,ease:bd,duration:yd,onUpdate:function(t){var n=Math.round(t.getValue());e.loseRateLabel.setText(n+"%")}})):this.isPlayingAnimation=!1)},t}(Phaser.GameObjects.Container),Dd=function(e){function t(t){var n;return(n=e.call(this,t)||this).countLabel=void 0,n.rateLabel=void 0,n.barChart=void 0,n.setSize(pd,vd),n.createCountLabel(),n.createRateLabel(),n.createBarChart(),n.alignComponents(),n}(0,f.Z)(t,e);var n=t.prototype;return n.setWinLoseCount=function(e,t){this.countLabel.updateWinLoseCount(e,t),this.barChart.updateWinLoseCount(e,t),this.rateLabel.updateWinLoseRate(e,t)},n.initAnimation=function(){this.barChart.initAnimation(),this.rateLabel.initAnimation()},n.playAnimation=function(){this.barChart.playAnimation(),this.rateLabel.playAnimation()},n.createCountLabel=function(){this.countLabel=new xd(this.scene),this.add(this.countLabel)},n.createRateLabel=function(){this.rateLabel=new Rd(this.scene),this.add(this.rateLabel)},n.createBarChart=function(){this.barChart=new wd(this.scene),this.add(this.barChart)},n.alignComponents=function(){Phaser.Display.Align.In.TopCenter(this.countLabel,this),Phaser.Display.Align.In.Center(this.barChart,this),Phaser.Display.Align.In.BottomCenter(this.rateLabel,this)},n.addBackground=function(){var e="win-lose-chart-background";if(!this.scene.textures.exists(e)){var t=this.width,n=this.height,a=this.scene.add.graphics();a.fillStyle(65280,.2),a.fillRect(0,0,t,n),a.generateTexture(e,t,n),a.destroy()}var i=this.scene.add.image(0,0,e);this.add(i)},t}(Phaser.GameObjects.Container),Ld=fn.Z.GAMEPLAY_DEFAULT.FRAME,Bd=function(e){function t(t){var n;return(n=e.call(this,t)||this).chart=void 0,n.tableStats=void 0,n.chart=new Dd(t),n.tableStats=new ud(t),n.tableStats.setTableSize(6,2,[135,125],45,[-1,1]),n.tableStats.drawRowBorder(),n.setSize(340,n.chart.height+n.tableStats.height),n.add([n.chart,n.tableStats]),Phaser.Display.Align.In.TopCenter(n.chart,(0,Hi.Z)(n)),Phaser.Display.Align.To.BottomCenter(n.tableStats,n.chart,15),t.add.existing((0,Hi.Z)(n)),n}return(0,f.Z)(t,e),t.prototype.setStats=function(e){var t=e.totalGame,n=e.wins,a=e.winsWithoutUndo,i=e.bestScore,r=e.averageScore,s=e.bestWinningTime,o=e.averageWinningTime,c=this.scene.lang.Text;this.chart.setWinLoseCount(n,t-n),this.tableStats.setTableData([[c.totalGame,""+t,Ld.STATS_FLASH],[c.winsWithoutUndo,""+a,Ld.STATS_CROWN],[c.bestScore,""+i,Ld.STATS_MEDAL_START],[c.avgScore,""+Math.round(r),Ld.STATS_STAR],[c.bestWinningTime,""+(0,tr.F0)(s,!1),Ld.STATS_CUP],[c.avgWinningTime,""+(0,tr.F0)(o,!1),Ld.STATS_TIMER]])},t}(Phaser.GameObjects.Container),Nd=Bd,Md=n(577),Gd=function(e){function t(t,n,a,i,r){var s;return void 0===r&&(r=10),(s=e.call(this,t)||this).borderRadius=void 0,s.numOfTabs=void 0,s.tabs=void 0,s.currentIdx=void 0,s.callback=void 0,s.borderRadius=r,s.numOfTabs=i,s.setSize(n,a),s.createBg(),s.createTabs(),s.listenInput(),t.add.existing((0,Hi.Z)(s)),s}(0,f.Z)(t,e);var n=t.prototype;return n.addLabels=function(e){this.add(e);var t=this.width/this.numOfTabs;this.placeCenter(e,0,0,t+1)},n.createBg=function(){var e=new mh.Z(this.scene,0,0,this.width+this.numOfTabs+1,this.height+2,this.borderRadius,this.themeColor);this.add([e])},n.createTabs=function(){this.tabs=[];for(var e=this.width/this.numOfTabs,t=0;t<this.numOfTabs;t++){var n=0==t?{tl:this.borderRadius,bl:this.borderRadius}:t==this.numOfTabs-1?{tr:this.borderRadius,br:this.borderRadius}:0,a=new mh.Z(this.scene,0,0,e,this.height,n,this.backgroundColor);0==t&&a.setAlpha(0),this.tabs.push(a)}this.add(this.tabs),this.placeCenter(this.tabs,0,0,e+1)},n.placeCenter=function(e,t,n,a,i){void 0===i&&(i=0);for(var r=t-(this.numOfTabs/2-.5-i)*a,s=0;s<e.length;s++)e[s].setPosition(r+s*a,n)},n.getIdx=function(e){var t=this.width/this.tabs.length;return Math.floor((e+this.width/2)/t)},n.listenInput=function(){var e=this,t=!1;this.setInteractive({useHandCursor:!0}).on(Phaser.Input.Events.POINTER_DOWN,(function(){t=!0})).on(Phaser.Input.Events.POINTER_OUT,(function(){t=!1})).on(Phaser.Input.Events.POINTER_UP,(function(n){if(t){var a=e.getLocalPoint(n.worldX,n.worldY).x;e.selectTab(e.getIdx(a))}t=!1}))},n.selectTab=function(e){if(e!=this.currentIdx){this.currentIdx=e,this.callback&&this.callback(e);for(var t=0;t<this.tabs.length;t++)this.scene.tweens.add({targets:this.tabs[t],alpha:t!==e?1:0,duration:200,ease:Phaser.Math.Easing.Sine.InOut})}},(0,ue.Z)(t,[{key:"themeColor",get:function(){return 3774208}},{key:"backgroundColor",get:function(){return 16579837}}]),t}(Phaser.GameObjects.Container),Fd=Gd,Zd=fn.Z.GAMEPLAY_DEFAULT.KEY,Ud=400,Wd=20,Hd=function(e){function t(t){var n;return(n=e.call(this,t)||this).bg=void 0,n.tab=void 0,n.gameStats=void 0,n.draw1Stat=void 0,n.draw3Stat=void 0,n.scroller=void 0,n.createBackground(),n.createTitle(),n.createTab(),n.createCloseButton(),t.add.existing((0,Hi.Z)(n)),n.createGameStats(),n.addMask(),n}(0,f.Z)(t,e);var n=t.prototype;return n.createBackground=function(){var e=new mh.Z(this.scene,0,0,340,440,20,16579837),t=this.scene.add.line(0,0,0,0,340,0,3774208,1);t.setLineWidth(.6),this.add([e,t]),this.bg=e,this.setSize(e.width,e.height),Phaser.Display.Align.In.TopCenter(t,this,0,-88)},n.createTitle=function(){var e=this.scene.make.bitmapText({font:No.Z.BOLD.KEY,size:this.scene.fontSize(20),text:this.scene.lang.Text.statistics,origin:{x:.5,y:.5}});e.setTint(1907997),this.add(e),Phaser.Display.Align.In.TopCenter(e,this,0,-12)},n.createTab=function(){var e,t=this,n=Wd,a=Ud;this.tab=new Fd(this.scene,300,30,2),this.add(this.tab),Phaser.Display.Align.In.TopCenter(this.tab,this,0,-45);var i=De()(e=[this.scene.lang.Text.draw1,this.scene.lang.Text.draw3]).call(e,(function(e){return t.scene.make.bitmapText({font:No.Z.PRIMARY.KEY,size:t.scene.fontSize(14),text:e,origin:{x:.5,y:.5}})}));this.tab.addLabels(i),this.tab.callback=function(e){i.forEach((function(t,n){return t.setTint(e==n?16579837:3774208)})),0===e?(t.scene.tweens.add({targets:t.draw1Stat,alpha:{from:0,to:1},x:{from:-n,to:0},duration:a,ease:Phaser.Math.Easing.Sine.In}),t.scene.tweens.add({targets:t.draw3Stat,alpha:{from:1,to:0},x:{from:0,to:n},duration:a,ease:Phaser.Math.Easing.Sine.Out})):(t.scene.tweens.add({targets:t.draw1Stat,alpha:{from:1,to:0},x:{from:0,to:-n},duration:a,ease:Phaser.Math.Easing.Sine.Out}),t.scene.tweens.add({targets:t.draw3Stat,alpha:{from:0,to:1},x:{from:n,to:0},duration:a,ease:Phaser.Math.Easing.Sine.In}))},this.tab.selectTab(0)},n.createGameStats=function(){var e=this.scene.add.container(0,0);this.draw1Stat=new Nd(this.scene),this.draw3Stat=new Nd(this.scene),this.draw3Stat.setX(375),e.setSize(this.draw3Stat.width,this.draw3Stat.height),e.add(this.draw1Stat),e.add(this.draw3Stat),this.add(e),Phaser.Display.Align.In.TopCenter(e,this,0,-95),this.gameStats=e;var t=new Md.Z(this.scene,{width:375,height:415,marginTop:-25,marginBottom:-160});this.add(e),this.scroller=t,this.add(t),Phaser.Display.Align.In.TopCenter(t,this,0,-90)},n.createCloseButton=function(){var e=this,t=new Wl.Z(this.scene,40,40);t.setName("Close"),t.onClick=function(){e.scene.screen.close(Qi.o4.GAME_STATS_SCREEN)};var n=this.scene.add.image(0,0,Zd,"ic_close_gray");n.setWorldSize(24,24),n.setTint(8750210),t.add(n),Phaser.Display.Align.In.TopRight(t,this.bg,-4,-4),this.add([t])},n.addMask=function(){var e=this,t=this.scene.make.graphics({fillStyle:{color:255,alpha:0},visible:!1});t.setName("MaskGraphics");var n=this.width,a=this.height;t.fillRoundedRect(-(n-10)/2,-a/2,n-10,a,0),this.gameStats.setMask(t.createGeometryMask()),this.scene.events.on("update",(function(){var n=e.getWorldPosition(),a=n.x,i=n.y;t.setPosition(a,i)}))},t}(Phaser.GameObjects.Container),zd=Hd,Yd=function(e){function t(t,n,a,i){var r;return(r=e.call(this,t,n,a,i)||this).scene=void 0,r.slideInAnimation=void 0,r.fadeInAnimation=void 0,r.fadeOutAnimation=void 0,r.gameStatsContainer=void 0,r.scene=t,r.setDepth(Qi.Ks.POPUP),r.gameStatsContainer=new zd(t),r.add(r.gameStatsContainer),r.background.setTint(1315862),r.background.setAlpha(.5),r.background.setInteractive(),r.gameStatsContainer.setInteractive(),r}(0,f.Z)(t,e);var n=t.prototype;return n.open=function(){e.prototype.open.call(this),this.updateStatistics(),this.runOpenAnimation()},n.updateStatistics=function(){var e=this.gameStatsContainer,t=e.draw1Stat,n=e.draw3Stat,a=this.scene.gameStats,i=a.draw1,r=a.draw3;t.setStats(i),n.setStats(r)},n.close=function(){this.runCloseAnimation()},n.runOpenAnimation=function(){var e,t,n=this;if(null==(e=this.slideInAnimation)||null==(t=e.tween)||!t.isPlaying()){this.scene.audio.playSound($i.Z.POPUP_SHOW);var i=this.gameStatsContainer,s=[i.draw1Stat,i.draw3Stat];s.forEach((function(e){e.chart.initAnimation()}));var o=this.scene.ads.getBannerHeight();this.slideInAnimation||(this.slideInAnimation=new Po.Z({targets:[this.gameStatsContainer],props:{y:{from:this.height/2,to:this.height/2-this.gameStatsContainer.height/2-20-o}},onComplete:function(){n.background.once(Phaser.Input.Events.POINTER_DOWN,(function(){return n.scene.screen.close(Qi.o4.GAME_STATS_SCREEN)}))},duration:300})),this.fadeInAnimation||(this.fadeInAnimation=new bc.Z({targets:[this],duration:300,ease:Phaser.Math.Easing.Sine.InOut,onComplete:function(){var e=(0,a.Z)(r().mark((function e(){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:s.forEach((function(e){e.chart.playAnimation()}));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()})),this.slideInAnimation.play(),this.fadeInAnimation.play()}},n.runCloseAnimation=function(){var t,n,a=this;null!=(t=this.fadeOutAnimation)&&null!=(n=t.tween)&&n.isPlaying()||(this.scene.audio.playSound($i.Z.POPUP_OFF),this.fadeOutAnimation||(this.fadeOutAnimation=new Fh.Z({targets:[this],props:{alpha:0},duration:300,onComplete:function(){e.prototype.close.call(a)}})),this.fadeOutAnimation.play())},t}(GameCore.Screen),Kd=Yd,Vd=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n.setBackground=function(){var e=n.scene.theme.getCurrentThemeConfig().backgroundKey;if(n.scene.load.off("filecomplete-image-"+e,n.setBackground),n.scene.textures.exists(e))return n.scene.setBackground(e),n.scene.events.emit(Ti.BACKGROUND_CHANGED,e),void n.updateBgApp();n.scene.load.once("filecomplete-image-"+e,n.setBackground)},n.updateCardStyle=function(){var e=n.scene.theme.getCurrentThemeConfig().cardFaceKey;n.scene.load.off("filecomplete-json-"+e,n.updateCardStyle),n.scene.textures.exists(e)?n.scene.gameplay.boardGame.deck.cards.forEach((function(e){return e.updateCardStyle()})):n.scene.load.once("filecomplete-json-"+e,n.updateCardStyle)},n.scene=t,n.setBackground(),n}(0,f.Z)(t,e);var n=t.prototype;return n.updateBgApp=function(){var e=this.scene.theme.getCurrentThemeResources();gn.Z.updateAppBg(e.backgroundFile)},n.changeBackground=function(e){this.scene.theme.changeBackground(e),this.setBackground(),this.scene.analytics.event(pn._.THEME_CHANGED,{theme_type:"background",theme_idx:e})},n.changeCardFace=function(e){this.scene.theme.changeCardFace(e),this.updateCardStyle(),this.scene.analytics.event(pn._.THEME_CHANGED,{theme_type:"card_face",theme_idx:e})},n.changeCardBack=function(e){this.scene.theme.changeCardBack(e),this.updateCardStyle(),this.scene.analytics.event(pn._.THEME_CHANGED,{theme_type:"card_back",theme_idx:e})},n.loadAllCardAtlas=function(){var e=this,t=this.scene.theme.getCardStyleAtlasConfigs();console.log(t),t.forEach((function(t){var n=t.key,a=t.textureURL,i=t.atlasURL;e.scene.textures.exists(n)||e.scene.load.atlas(n,a,i)})),this.scene.load.start()},n.loadAllBackgrounds=function(){var e=this;this.scene.theme.getBackgroundConfigs().forEach((function(t){var n=t.key,a=t.url;e.scene.textures.exists(n)||e.scene.load.image(n,a)})),this.scene.load.start()},t}(yu),jd=Vd,Xd=function(e){function t(t,n,a,i,r){var s;(s=e.call(this,t,n,a)||this).icon=void 0,s.border=void 0;var o=s.scene.add.image(0,0,i,r);return o.setWorldSize(n,a),s.icon=o,s.add([o]),s.createBorder1(),s.createBorder(),s}(0,f.Z)(t,e);var n=t.prototype;return n.createBorder1=function(){var e=new mh.Z(this.scene,0,0,this.width+4,this.height+4,10,16579837,0);e.setStrokeStyle(4,16579837),this.add(e)},n.createBorder=function(){var e=new mh.Z(this.scene,0,0,this.width+2,this.height+2,10,16579837,0);e.setStrokeStyle(2,3774208),this.add(e),e.kill(),this.border=e},n.showBorder=function(){this.border.revive()},n.hideBorder=function(){this.border.kill()},n.setCropByViewport=function(e){this.icon.setCropByViewport(e)},t}(Wl.Z),qd=Xd,Jd=function(e){function t(t,n,a,i,r,s){var o;return void 0===r&&(r=0),void 0===s&&(s=0),(o=e.call(this,t)||this).margin=void 0,o.viewContainer=void 0,o.items=void 0,o.currentItemInteractive=void 0,o.itemsLength=void 0,o.currentX=void 0,o.offsetLeft=void 0,o.offsetRight=void 0,o.pointerDownX=void 0,o.pointerDownY=void 0,o.lastPointerX=void 0,o.canClickItem=void 0,o.pointerDown=void 0,o.handlePointerDown=function(e){var t=e.worldX,n=e.worldY;o.pointerDown=!0,o.pointerDownX=e.worldX,o.pointerDownY=e.worldY,o.lastPointerX=e.worldX,o.canClickItem=!0,o.items.forEach((function(a){var i=a.item,r=a.onClick;r&&i.getBounds().contains(t,n)&&(i.emit(Phaser.Input.Events.GAMEOBJECT_POINTER_DOWN,e),o.currentItemInteractive={item:i,onClick:r})}))},o.handlePointerMove=function(e){if(o.pointerDown){var t=e.worldX,n=e.worldY;if(Phaser.Math.Distance.Between(o.pointerDownX,o.pointerDownY,t,n)>15&&(o.canClickItem=!1),!o.canClickItem){o.viewContainer.x+=t-o.lastPointerX,o.viewContainer.x>0&&(o.viewContainer.x=0);var a=o.itemsLength-o.width+o.offsetLeft+o.offsetRight;o.viewContainer.x<-a&&(o.viewContainer.x=-a)}if(o.currentItemInteractive){var i=o.currentItemInteractive,r=i.item;i.onClick&&!r.getBounds().contains(t,n)&&(r.emit(Phaser.Input.Events.GAMEOBJECT_POINTER_OUT,e),o.currentItemInteractive=void 0)}o.items.forEach((function(a){var i=a.item,r=a.onClick,s=a.onUpdate;r&&i.getBounds().contains(t,n)&&(i.emit(Phaser.Input.Events.GAMEOBJECT_POINTER_MOVE,e),o.currentItemInteractive={item:i,onClick:r}),s&&s()})),o.lastPointerX=t}},o.handlePointerUp=function(e){o.pointerDown=!1;var t=e.worldX,n=e.worldY;o.items.forEach((function(a){var i=a.item,r=a.onClick;r&&i.getBounds().contains(t,n)&&(i.emit(Phaser.Input.Events.GAMEOBJECT_POINTER_UP,e),o.canClickItem&&GameCore.Utils.Valid.isFunction(r)&&r())})),o.currentItemInteractive=void 0},o.handlePointerOut=function(e){if(o.pointerDown=!1,o.currentItemInteractive){var t=o.currentItemInteractive,n=t.item;t.onClick&&(n.emit(Phaser.Input.Events.GAMEOBJECT_POINTER_OUT,e),o.currentItemInteractive=void 0)}o.currentItemInteractive=void 0},o.setSize(n,a),o.margin=i,o.items=[],o.canClickItem=!0,o.pointerDown=!1,o.itemsLength=0,o.offsetLeft=r,o.offsetRight=s,o.currentX=-n/2+r,o.viewContainer=t.make.container({}),o.add(o.viewContainer),o.setInteractive(),o.listenEvents(),o}(0,f.Z)(t,e);var n=t.prototype;return n.addDebug=function(){var e=new mh.Z(this.scene,0,0,this.width,this.height,0,0);this.add(e)},n.listenEvents=function(){this.on(Phaser.Input.Events.GAMEOBJECT_POINTER_DOWN,this.handlePointerDown),this.on(Phaser.Input.Events.GAMEOBJECT_POINTER_MOVE,this.handlePointerMove),this.on(Phaser.Input.Events.GAMEOBJECT_POINTER_UP,this.handlePointerUp),this.on(Phaser.Input.Events.GAMEOBJECT_POINTER_OUT,this.handlePointerOut)},n.addItem=function(e,t,n){this.items.push({item:e,onClick:t,onUpdate:n}),this.viewContainer.add(e);var a=this.currentX+e.width/2+this.margin;e.x=a,this.itemsLength+=e.width+2*this.margin,this.currentX=a+e.width/2+this.margin},n.updateChildren=function(){this.items.forEach((function(e){var t=e.onUpdate;t&&t()}))},t}(Phaser.GameObjects.Container),Qd=Jd,$d=fn.Z.GAMEPLAY_DEFAULT.KEY,ep=fn.Z.THEME_PREVIEW,tp=0,np=40,ap=375,ip=180,rp=10,sp=20,op=20,cp=function(e){function t(t){var n;return(n=e.call(this,t)||this).bg=void 0,n.tab=void 0,n.chooseContainers=void 0,n.currentIdx=0,n.backgroundPreView=void 0,n.cardFacePreView=void 0,n.cardBackPreview=void 0,n.createBackground(),n.createTitle(),n.createTab(),n.createChooseContainer(),n.scene.world.isLandscape()&&n.addMask(),n.createBgMask(),n.createCloseButton(),t.add.existing((0,Hi.Z)(n)),n}(0,f.Z)(t,e);var n=t.prototype;return n.createBackground=function(){var e=new mh.Z(this.scene,0,0,375,250,{tl:20,tr:20,bl:20,br:20},16579837),t=this.scene.add.line(0,0,0,0,e.width,0,3774208);t.setLineWidth(.5),Phaser.Display.Align.In.TopCenter(t,e,0,-90),this.add([e,t]),this.bg=e,this.setSize(e.width,e.height),this.bg.setInteractive()},n.createTitle=function(){var e=this.scene.make.bitmapText({font:No.Z.BOLD.KEY,size:this.scene.fontSize(20),text:this.scene.lang.Text.theme,origin:{x:.5,y:.5}});e.setTint(1907997),this.add(e),Phaser.Display.Align.In.TopCenter(e,this,0,-12)},n.getFontScale=function(){switch(this.scene.lang.getCurrentLanguage()){case"id":case"es":return.9;default:return 1}},n.createTab=function(){var e,t=this;this.tab=new Fd(this.scene,303,30,3),this.add(this.tab),Phaser.Display.Align.In.TopCenter(this.tab,this,0,-45);var n=this.scene.lang.Text,a=n.background,i=n.cardFace,r=n.cardBack,s=De()(e=[a,i,r]).call(e,(function(e,n){var a=t.scene.make.bitmapText({font:No.Z.PRIMARY.KEY,size:t.scene.fontSize(14*t.getFontScale()),text:e,origin:{x:.5,y:.5}});return a.setCenterAlign(),n>0&&a.setTint(3774208),a}));this.tab.addLabels(s),this.tab.callback=function(e){s.forEach((function(t,n){return t.setTint(e==n?16579837:3774208)}));var n=t.currentIdx<e?375:-375;t.scene.tweens.add({targets:t.chooseContainers[t.currentIdx],x:t.currentIdx<e?-375:375,alpha:0,duration:200,ease:Phaser.Math.Easing.Sine.InOut}),t.scene.tweens.add({targets:t.chooseContainers[e],x:{from:n,to:0},alpha:1,duration:200,ease:Phaser.Math.Easing.Sine.InOut}),t.currentIdx=e}},n.createChooseContainer=function(){this.chooseContainers=[],this.createBackgroundChoose(),this.createCardFaceChoose(),this.createCardBackChoose(),this.chooseContainers[1].setAlpha(0),this.chooseContainers[2].setAlpha(0)},n.createBackgroundChoose=function(){var e=this,t=new Qd(this.scene,ap,ip,rp,sp,op);t.setPosition(tp,np),this.add(t);for(var n=[],a=this.scene.theme.getThemePreview().Background,i=0;i<5;i++){var r=a[i]||"blank",s=new qd(this.scene,72,112,ep.KEY,r);s.name="Background",n.push(s)}n.forEach((function(i,r){r<a.length&&(i.onClick=function(){},i.disableInteractive()),t.addItem(i,(function(){n.forEach((function(e){return e.hideBorder()})),i.showBorder(),e.scene instanceof Nm&&e.scene.themeHandler.changeBackground(r)}),(function(){var t=e.getViewport();i.setCropByViewport(t)}))})),this.chooseContainers.push(t),this.backgroundPreView=n},n.createCardFaceChoose=function(){var e=this,t=new Qd(this.scene,ap,ip,rp,sp,op);t.setPosition(tp,np),this.add(t);for(var n=[],a=this.scene.theme.getThemePreview().CardFace,i=0;i<3;i++){var r=a[i]||"blank",s=new qd(this.scene,108,112,ep.KEY,r);s.name="CardFace",n.push(s)}n.forEach((function(i,r){r<a.length&&(i.onClick=function(){},i.disableInteractive(),t.addItem(i,(function(){n.forEach((function(e){return e.hideBorder()})),i.showBorder(),e.scene instanceof Nm&&e.scene.themeHandler.changeCardFace(r)}),(function(){var t=e.getViewport();i.setCropByViewport(t)})))})),this.chooseContainers.push(t),this.cardFacePreView=n},n.createCardBackChoose=function(){var e=this,t=new Qd(this.scene,ap,ip,rp,sp,op);t.setPosition(tp,np),this.add(t);for(var n=[],a=this.scene.theme.getThemePreview().CardBack,i=0;i<5;i++){var r=a[i]||"blank",s=new qd(this.scene,76,112,ep.KEY,r);s.name="CardBack",n.push(s)}n.forEach((function(i,r){r<a.length&&(i.onClick=function(){},i.disableInteractive(),t.addItem(i,(function(){n.forEach((function(e){return e.hideBorder()})),i.showBorder(),e.scene instanceof Nm&&e.scene.themeHandler.changeCardBack(r)}),(function(){var t=e.getViewport();i.setCropByViewport(t)})))})),this.chooseContainers.push(t),this.cardBackPreview=n},n.addMask=function(){var e=this,t=this.scene.make.graphics({fillStyle:{color:255,alpha:0},visible:!1});t.setName("MaskGraphics");var n=this.width,a=this.height;t.fillRoundedRect(-(n-10)/2,-a/2,n-10,a,0),this.chooseContainers[0].setMask(t.createGeometryMask()),this.chooseContainers[1].setMask(t.createGeometryMask()),this.chooseContainers[2].setMask(t.createGeometryMask()),this.scene.events.on("update",(function(){var n=e.getWorldPosition(),a=n.x,i=n.y;t.setPosition(a,i)}))},n.createBgMask=function(){var e=this.scene.add.rectangle(-this.width/2+10,20,20,this.height-80,16579837),t=this.scene.add.rectangle(this.width/2-10,20,20,this.height-80,16579837);this.add(e),this.add(t)},n.getViewport=function(){var e=this.getWorldPosition();return{x:e.x,y:e.y+np,width:ap-sp-op,height:ip}},n.createCloseButton=function(){var e=this,t=new Wl.Z(this.scene,40,40);t.setName("Close"),t.onClick=function(){e.scene.screen.close(Qi.o4.THEME_SCREEN)};var n=this.scene.add.image(0,0,$d,"ic_close_gray");n.setWorldSize(24,24),n.setTint(8750210),t.add(n),Phaser.Display.Align.In.TopRight(t,this.bg,-4,-4),this.add([t])},t}(Phaser.GameObjects.Container),up=cp,lp=function(e){function t(t,n,a,i){var r;return(r=e.call(this,t,n,a,i)||this).scene=void 0,r.slideInAnimation=void 0,r.fadeInAnimation=void 0,r.fadeOutAnimation=void 0,r.themeContainer=void 0,r.scene=t,r.setDepth(Qi.Ks.POPUP),r.themeContainer=new up(t),r.add(r.themeContainer),r.background.setTint(1315862),r.background.setAlpha(.3),r}(0,f.Z)(t,e);var n=t.prototype;return n.open=function(){var t=this;e.prototype.open.call(this),this.themeContainer.setAlpha(1),this.scene.themeHandler.loadAllBackgrounds(),this.scene.themeHandler.loadAllCardAtlas(),this.updateSelected(),this.background.setInteractive().once(Phaser.Input.Events.POINTER_DOWN,(function(){return t.scene.screen.close(Qi.o4.GAME_STATS_SCREEN)})),this.runOpenAnimation()},n.updateSelected=function(){var e=this.scene.theme.getCurrentIdxConfig(),t=e.backgroundIdx,n=e.cardFaceIdx,a=e.cardBackIdx;this.themeContainer.backgroundPreView[t].showBorder(),this.themeContainer.cardFacePreView[n].showBorder(),this.themeContainer.cardBackPreview[a].showBorder()},n.close=function(){this.runCloseAnimation()},n.runOpenAnimation=function(){var e,t;if(null==(e=this.slideInAnimation)||null==(t=e.tween)||!t.isPlaying()){this.scene.audio.playSound($i.Z.POPUP_SHOW);var n=this.scene.ads.getBannerHeight();this.slideInAnimation||(this.slideInAnimation=new Po.Z({targets:[this.themeContainer],props:{y:{from:this.height/2,to:this.height/2-this.themeContainer.height/2-n-10,ease:Phaser.Math.Easing.Sine.Out}},duration:300})),this.fadeInAnimation||(this.fadeInAnimation=new bc.Z({ease:Phaser.Math.Easing.Sine.InOut,targets:[this],duration:300})),this.slideInAnimation.play(),this.fadeInAnimation.play()}},n.runCloseAnimation=function(){var t,n,a=this;null!=(t=this.fadeOutAnimation)&&null!=(n=t.tween)&&n.isPlaying()||(this.scene.audio.playSound($i.Z.POPUP_OFF),this.fadeOutAnimation||(this.fadeOutAnimation=new Fh.Z({targets:[this],props:{alpha:0},duration:300,onComplete:function(){e.prototype.close.call(a)}})),this.fadeOutAnimation.play())},t}(GameCore.Screen),hp=lp,dp=n(578),pp=function(e){function t(t,n,a,i){var r;return(r=e.call(this,t,n,a,i)||this).slideInAnimation=void 0,r.fadeOutAnimation=void 0,r.howToPlayContainer=void 0,r.setDepth(Qi.Ks.POPUP),r.howToPlayContainer=new dp.Z(t),r.add(r.howToPlayContainer),r.background.setTint(1315862),r.background.setAlpha(.5),r.background.setInteractive(),r}(0,f.Z)(t,e);var n=t.prototype;return n.open=function(){e.prototype.open.call(this),this.howToPlayContainer.selectStep(0),this.scene.analytics.event(pn._.TUTORIAL_BEGIN),this.runOpenAnimation()},n.close=function(){this.runCloseAnimation()},n.runOpenAnimation=function(){var e,t,n=this;null!=(e=this.slideInAnimation)&&null!=(t=e.tween)&&t.isPlaying()||(this.scene.audio.playSound($i.Z.POPUP_SHOW),this.slideInAnimation||(this.slideInAnimation=new bc.Z({targets:[this],duration:300,ease:Phaser.Math.Easing.Sine.InOut,onComplete:function(){n.scene.game.events.emit("user-interaction-ready")}})),this.slideInAnimation.play())},n.runCloseAnimation=function(){var t,n,a=this;null!=(t=this.fadeOutAnimation)&&null!=(n=t.tween)&&n.isPlaying()||(this.scene.audio.playSound($i.Z.POPUP_OFF),this.fadeOutAnimation||(this.fadeOutAnimation=new Fh.Z({targets:[this],props:{alpha:0},duration:300,onComplete:function(){e.prototype.close.call(a)}})),this.fadeOutAnimation.play())},t}(GameCore.Screen),fp=pp,gp=function(e){function t(t){var n;return(n=e.call(this,t)||this).icon=void 0,n.label=void 0,n.value=void 0,n.setSize(271,24),n.createIcon(),n.createLabel(),n.createValue(),t.add.existing((0,Hi.Z)(n)),n}(0,f.Z)(t,e);var n=t.prototype;return n.setIcon=function(e,t){this.icon.setTexture(e,t),this.icon.setWorldSize(24,24)},n.setLabel=function(e){this.label.setText(e)},n.setValue=function(e){this.value.setText(e)},n.createIcon=function(){var e=this.scene.add.image(0,0,"");e.setWorldSize(24,24),e.setTint(16579837),this.add(e),this.icon=e},n.createLabel=function(){var e=this.scene.make.bitmapText({font:No.Z.PRIMARY.KEY,size:this.scene.fontSize(16),text:"",origin:{x:0,y:.5}});e.setTint(16579837),this.add(e),this.label=e},n.createValue=function(){var e=this.scene.make.bitmapText({font:No.Z.BOLD.KEY,size:this.scene.fontSize(16),text:"",origin:{x:1,y:.5}});e.setTint(16579837),e.setRightAlign(),this.add(e),this.value=e},n.alignProperties=function(){Phaser.Display.Align.In.LeftCenter(this.icon,this),Phaser.Display.Align.To.RightCenter(this.label,this.icon,12),Phaser.Display.Align.In.RightCenter(this.value,this)},t}(Phaser.GameObjects.Container),mp=gp,vp=fn.Z.GAMEPLAY_DEFAULT,yp=vp.KEY,bp=vp.FRAME,Ap=function(e){function t(t,n,a,i){var r;return void 0===n&&(n=8),void 0===a&&(a=t.lang.Text.newGame),void 0===i&&(i=bp.ADD_SQUARE),(r=e.call(this,t)||this).icon=void 0,r.text=void 0,r.iconTextPadding=void 0,r.labelText=void 0,r.iconFrame=void 0,r.iconTextPadding=n,r.labelText=a,r.iconFrame=i,r.createIcon(),r.createLabelText(),r.updateContainerSize(),r.alignIcon(),r.alignText(),r}(0,f.Z)(t,e);var n=t.prototype;return n.getIcon=function(){return this.icon},n.getText=function(){return this.text},n.clearTint=function(){this.icon.clearTint(),this.text.clearTint()},n.createIcon=function(){this.icon=this.scene.add.image(0,0,yp,this.iconFrame),this.icon.setWorldSize(20,20),this.icon.setTint(43282),this.add(this.icon)},n.alignIcon=function(){Phaser.Display.Align.In.LeftCenter(this.icon,this)},n.createLabelText=function(){this.text=this.scene.make.bitmapText({font:No.Z.PRIMARY.KEY,size:this.scene.fontSize(16),text:this.labelText,origin:{x:.5,y:.5}}),this.text.setTint(43282),this.text.setRoundPixels(!1),this.add(this.text)},n.alignText=function(){Phaser.Display.Align.In.RightCenter(this.text,this,0,0)},n.updateContainerSize=function(){this.setSize(this.icon.width+this.iconTextPadding+this.text.width,this.icon.height>this.text.height?this.icon.height:this.text.height)},t}(Phaser.GameObjects.Container),Sp=fn.Z.GAMEPLAY_DEFAULT,Ep=Sp.KEY,wp=Sp.FRAME,Tp=143.5,Ip=function(e){function t(t){var n;return(n=e.call(this,t)||this).bg=void 0,n.score=void 0,n.time=void 0,n.bestTime=void 0,n.moves=void 0,n.draw=void 0,n.lines=[],n.buttons=[],n.createBackground(),n.createTitle(),n.createStats(),n.createNewGameButton(),n.createDevButtons(),t.add.existing((0,Hi.Z)(n)),n}(0,f.Z)(t,e);var n=t.prototype;return n.setScore=function(e){this.score.setValue(e)},n.setWinningTime=function(e){this.time.setValue(e)},n.setBestWinningTime=function(e){this.bestTime.setValue(e)},n.setMoves=function(e){this.moves.setValue(e)},n.setDraw=function(e){this.draw.setText(e)},n.createBackground=function(){this.setSize(343,374);var e=new Xl(this.scene,{key:"_awesome",radius:6,border:24,width:343,height:374});this.bg=e,this.add(e)},n.createTitle=function(){var e=this.scene.make.bitmapText({font:No.Z.BOLD.KEY,size:this.scene.fontSize(24),text:this.scene.lang.Text.awesome,origin:{x:.5,y:.5}});e.setTint(16777215),this.add(e),Phaser.Display.Align.In.TopCenter(e,this,0,-20);var t=this.scene.make.bitmapText({font:No.Z.PRIMARY.KEY,size:this.scene.fontSize(16),text:this.scene.lang.Text.draw1,origin:{x:.5,y:.5}});t.setTint(16777215),this.draw=t,this.add([t]),Phaser.Display.Align.To.BottomCenter(t,e,0,8)},n.createStats=function(){var e=[],t=this.scene.lang.Text,n=new mp(this.scene);n.setIcon(Ep,wp.MEDAL_STAR),n.setLabel(t.score),n.setValue("687"),this.score=n,e.push(n);var a=new mp(this.scene);a.setIcon(Ep,wp.ARROW_SWAP_HORIZONTAL),a.setLabel(t.moves),a.setValue("798"),this.moves=a,e.push(a);var i=new mp(this.scene);i.setIcon(Ep,wp.TIMER),i.setLabel(t.time),i.setValue("09:48"),this.time=i,e.push(i);var r=new mp(this.scene);r.setIcon(Ep,wp.CUP),r.setLabel(t.bestTime),r.setValue("05:30"),this.bestTime=r,e.push(r),this.add(e);for(var s=0;s<e.length;s++){var o=e[s];if(o.alignProperties(),Phaser.Display.Align.In.TopCenter(o,this,0,-(50*s+112)),s==e.length-1)break;var c=this.scene.add.line(0,0,0,0,271,0,16579837,.2);this.add(c),this.lines.push(c),Phaser.Display.Align.To.BottomCenter(c,o,0,12)}},n.createNewGameButton=function(){var e=this,t=new Zh.Z(this.scene,303,42,16,16777215);t.onClick=function(){e.scene instanceof Nm&&e.scene.handlePlaySingle(),e.scene.screen.close(Qi.o4.VICTORY_SCREEN)},t.setName("NewGame");var n=new Ap(this.scene,8,this.scene.lang.Text.newGame);t.add(n),Phaser.Display.Align.In.BottomCenter(t,this,0,-18),this.add([t]),this.buttons.push(t),Phaser.Display.Align.In.BottomRight(t,this,-16,-18),new Xo.Z({targets:[t],duration:1e3,props:{scale:"*=1.05"}}).play()},n.createShareButton=function(){var e=this,t=new Wl.Z(this.scene,Tp,48);t.onClick=function(){e.scene.storage.dispatch(Oc())},t.setName("Share");var n=new mh.Z(this.scene,0,0,Tp,48,16,16777215,.24),a=this.scene.add.graphics();a.lineStyle(1,16777215),a.strokeRoundedRect(-71.75,-24,Tp,48,16);var i=new Ap(this.scene,8,"Share",wp.IC_SHARE);i.clearTint(),i.getIcon().setTintFill(16777215),t.add([n,a,i]).setSize(Tp,48),Phaser.Display.Align.In.BottomLeft(t,this.bg,-16,-18),this.add([t]),this.buttons.push(t)},n.createDevButtons=function(){GameCore.Utils.Valid.isDebugger()&&this.createCloseButton()},n.createCloseButton=function(){var e=this,t=new Wl.Z(this.scene,40,40),n=this.scene.add.image(0,0,Ep,wp.IC_BG_OFF);n.setWorldSize(40,40);var a=this.scene.make.bitmapText({font:No.Z.PRIMARY.KEY,size:this.scene.fontSize(10),text:this.scene.lang.Text.newGame,origin:{x:.5,y:.5}});a.setCenterAlign(),t.add([n,a]),this.add(t),Phaser.Display.Align.In.BottomLeft(t,this,0,-200),t.onClick=function(){e.scene.screen.close(Qi.o4.VICTORY_SCREEN)}},n.hideContent=function(){[this.score,this.moves,this.time,this.bestTime].forEach((function(e){return e.setAlpha(0)})),this.lines.forEach((function(e){e.setAlpha(0),e.scaleX=0})),this.buttons.forEach((function(e){e.setAlpha(0)}))},n.runEntranceAnimationButtons=function(){var e=(0,a.Z)(r().mark((function e(){var t,n,a=this;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=De()(t=this.buttons).call(t,(function(e){return new(o())((function(t){a.scene.add.tween({targets:[e],alpha:1,duration:200,onComplete:function(){e.setDisabled(!1),t()}})}))})),e.next=3,o().all(n);case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.runEntranceAnimationRows=function(){var e=(0,a.Z)(r().mark((function e(){var t,n,a=this;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[this.score,this.moves,this.time,this.bestTime],200,n=De()(t).call(t,(function(e,t){return new(o())((function(n){a.scene.add.tween({targets:[e],duration:200,delay:200*t/2,ease:Phaser.Math.Easing.Sine.Out,props:{alpha:{from:0,to:1},y:{from:e.y+e.height/2,to:e.y}},onComplete:n})}))})),e.next=5,o().all(n);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.runEntranceAnimationLines=function(){var e=(0,a.Z)(r().mark((function e(){var t,n,a=this;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return 200,n=De()(t=this.lines).call(t,(function(e,t){return new(o())((function(n){a.scene.add.tween({targets:[e],duration:200,delay:200*t/2,props:{alpha:{from:0,to:1},scaleX:{from:0,to:1}},onComplete:n})}))})),e.next=4,o().all(n);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.runEntranceAnimationRowsLines=function(){var e=(0,a.Z)(r().mark((function e(){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o().all([this.runEntranceAnimationRows(),this.runEntranceAnimationLines()]);case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.runEntranceAnimation=function(){var e=(0,a.Z)(r().mark((function e(){var t;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.runEntranceAnimationRowsLines();case 2:return t=this.scene,e.next=5,t.gameplay.finishGame();case 5:return e.next=7,this.runEntranceAnimationButtons();case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),t}(Phaser.GameObjects.Container),Cp=Ip,kp=fn.Z.GAMEPLAY_DEFAULT,xp=kp.KEY,Pp=kp.FRAME,_p=23.5,Op=47,Rp=68.5,Dp={AXIS:0,FIRST_FROM_LEFT:_p,SECOND_FROM_LEFT:Op,THIRD_FROM_LEFT:Rp,FIRST_FROM_RIGHT:-_p,SECOND_FROM_RIGHT:-Op,THIRD_FROM_RIGHT:-Rp},Lp=function(e){function t(t){var n;return(n=e.call(this,t)||this).beamAxis=void 0,n.beamFirstFromLeft=void 0,n.beamSecondFromLeft=void 0,n.beamThirdFromLeft=void 0,n.beamFirstFromRight=void 0,n.beamSecondFromRight=void 0,n.beamThirdFromRight=void 0,n.pivot=void 0,n.setSize(375,295),n.createBeamsPivot(),n.createBeams(),n.alignBeams(),n.playAnimation(),n}(0,f.Z)(t,e);var n=t.prototype;return n.rotateBeamToAngleInDegree=function(e,t){Phaser.Actions.RotateAroundDistance([e],this.pivot,t*Math.PI/180,e.height/2+30);var n=180*Math.atan2(e.y-this.pivot.y,e.x-this.pivot.x)/Math.PI;e.angle=n+90+180},n.createBeamsPivot=function(){this.pivot=this.scene.add.image(0,0,xp,Pp.ADD_SQUARE),this.add(this.pivot),this.pivot.kill(),Phaser.Display.Align.In.Center(this.pivot,this,0,-this.height/2-30)},n.createBeams=function(){this.beamAxis=this.scene.add.image(0,0,xp,Pp.BEAM.AXIS),this.beamFirstFromLeft=this.scene.add.image(0,0,xp,Pp.BEAM.AXIS),this.beamSecondFromLeft=this.scene.add.image(0,0,xp,Pp.BEAM.AXIS),this.beamThirdFromLeft=this.scene.add.image(0,0,xp,Pp.BEAM.AXIS),this.beamFirstFromRight=this.scene.add.image(0,0,xp,Pp.BEAM.AXIS),this.beamSecondFromRight=this.scene.add.image(0,0,xp,Pp.BEAM.AXIS),this.beamThirdFromRight=this.scene.add.image(0,0,xp,Pp.BEAM.AXIS);var e=[this.beamAxis,this.beamFirstFromLeft,this.beamSecondFromLeft,this.beamThirdFromLeft,this.beamFirstFromRight,this.beamSecondFromRight,this.beamThirdFromRight];this.setWorldSizeImages(52,295,e),e.forEach((function(e){e.setAlpha(.6)})),this.add(e)},n.alignBeams=function(){this.rotateBeamToAngleInDegree(this.beamAxis,Dp.AXIS),this.rotateBeamToAngleInDegree(this.beamFirstFromLeft,Dp.FIRST_FROM_LEFT),this.rotateBeamToAngleInDegree(this.beamSecondFromLeft,Dp.SECOND_FROM_LEFT),this.rotateBeamToAngleInDegree(this.beamThirdFromLeft,Dp.THIRD_FROM_LEFT),this.rotateBeamToAngleInDegree(this.beamFirstFromRight,Dp.FIRST_FROM_RIGHT),this.rotateBeamToAngleInDegree(this.beamSecondFromRight,Dp.SECOND_FROM_RIGHT),this.rotateBeamToAngleInDegree(this.beamThirdFromRight,Dp.THIRD_FROM_RIGHT)},n.setWorldSizeImages=function(e,t,n){n.forEach((function(n){return n.setWorldSize(e,t)}))},n.playAnimation=function(){var e=this;[this.beamFirstFromLeft,this.beamSecondFromLeft,this.beamThirdFromLeft,this.beamAxis,this.beamThirdFromRight,this.beamSecondFromRight,this.beamFirstFromRight].forEach((function(t,n){e.scene.tweens.add({targets:t,props:{alpha:{from:.2,to:.6}},duration:700,delay:700*n,repeat:-1,yoyo:!0})}))},n.addBackground=function(){var e="win-beams-background";if(!this.scene.textures.exists(e)){var t=this.width,n=this.height,a=this.scene.add.graphics();a.fillStyle(65280,.2),a.fillRect(0,0,t,n),a.generateTexture(e,t,n),a.destroy()}var i=this.scene.add.image(0,0,e);this.add(i)},t}(Phaser.GameObjects.Container),Bp=n(383),Np=n.n(Bp);function Mp(e,t){var n="undefined"!==typeof C()&&x()(e)||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){var n;if(!e)return;if("string"===typeof e)return Gp(e,t);var a=E()(n=Object.prototype.toString.call(e)).call(n,8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return T()(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return Gp(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var a=0;return function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Gp(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}var Fp=fn.Z.GAMEPLAY_DEFAULT,Zp=Fp.KEY,Up=Fp.FRAME,Wp=Up.FLAG.LEFT,Hp=function(e){function t(t){var n;return(n=e.call(this,t)||this).flags=[],n.string=void 0,n.tweens=[],n.flagsData=[],n.setSize(230.5,136),n.createString(),n.createFlags(),n}(0,f.Z)(t,e);var n=t.prototype;return n.createFlags=function(){var e=this,t=this.scene.add.image(0,0,Zp,Wp+"1");t.setWorldSize(35.5,15.5),Phaser.Display.Align.In.TopLeft(t,this,-180.5,0);var n=this.scene.add.image(0,0,Zp,Wp+"2");n.setWorldSize(33.5,37),Phaser.Display.Align.In.TopLeft(n,this,-153,-2);var a=this.scene.add.image(0,0,Zp,Wp+"3");a.setWorldSize(32,38),Phaser.Display.Align.In.TopLeft(a,this,-124.5,-23);var i=this.scene.add.image(0,0,Zp,Wp+"4");i.setWorldSize(30,38.5),Phaser.Display.Align.In.TopLeft(i,this,-94,-40.25);var r=this.scene.add.image(0,0,Zp,Wp+"5");r.setWorldSize(28,38.5),Phaser.Display.Align.In.TopLeft(r,this,-63.235,-56);var s=this.scene.add.image(0,0,Zp,Wp+"6");s.setWorldSize(28.5,38.5),Phaser.Display.Align.In.TopLeft(s,this,-31.07,-68.5);var o=this.scene.add.image(0,0,Zp,Wp+"7");o.setWorldSize(29.5,38.5),Phaser.Display.Align.In.TopLeft(o,this,2,-79),this.flags=[t,n,a,i,r,s,o],this.add(Np()(this)),Np()(this).forEach((function(t){var n=t.x,a=t.y,i=t.angle;e.flagsData.push({x:n,y:a,angle:i})}))},n.createString=function(){this.string=this.scene.add.image(0,0,Zp,Up.STRING.LEFT),this.string.setWorldSize(215.5,96.5),this.add(this.string),Phaser.Display.Align.In.TopLeft(this.string,this)},n.addBackground=function(){var e="lb-background";if(!this.scene.textures.exists(e)){var t=this.width,n=this.height,a=this.scene.add.graphics();a.fillStyle(65280,.2),a.fillRect(0,0,t,n),a.generateTexture(e,t,n),a.destroy()}var i=this.scene.add.image(0,0,e);this.add(i)},n.playWavingAnimation=function(){var e,t=this;if(!(this.tweens.length>0)){for(var n,a=Mp(this.tweens);!(n=a()).done;){if(n.value.isPlaying())return}De()(e=Np()(this)).call(e,(function(e,n){var a=t.flagsData[n],i=a.x,r=a.y,s=a.angle;t.scene.add.tween({targets:e,duration:300,props:{x:{from:i,to:i-2},y:{from:r,to:r-1},angle:{from:s,to:s+5}},yoyo:!0,delay:50*n,repeat:-1})}))}},n.stopWavingAnimation=function(){var e=this;if(0!==this.tweens.length){for(var t,n=Mp(this.tweens);!(t=n()).done;){t.value.stop()}this.tweens=[],Np()(this).forEach((function(t,n){e.scene.tweens.killTweensOf(t),t.x=e.flagsData[n].x,t.y=e.flagsData[n].y,t.angle=e.flagsData[n].angle}))}},t}(Phaser.GameObjects.Container);function zp(e,t){var n="undefined"!==typeof C()&&x()(e)||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){var n;if(!e)return;if("string"===typeof e)return Yp(e,t);var a=E()(n=Object.prototype.toString.call(e)).call(n,8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return T()(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return Yp(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var a=0;return function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Yp(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}var Kp=fn.Z.GAMEPLAY_DEFAULT,Vp=Kp.KEY,jp=Kp.FRAME,Xp=jp.FLAG.RIGHT,qp=function(e){function t(t){var n;return(n=e.call(this,t)||this).flags=[],n.string=void 0,n.tweens=[],n.flagsData=[],n.setSize(218,123.5),n.createString(),n.createFlags(),n}(0,f.Z)(t,e);var n=t.prototype;return n.createFlags=function(){var e=this,t=this.scene.add.image(0,0,Vp,Xp+"1");t.setWorldSize(30.5,26),this.alignTopLeft(t,44.5,26);var n=this.scene.add.image(0,0,Vp,Xp+"2");n.setWorldSize(29,32.5),this.alignTopLeft(n,93,60.5);var a=this.scene.add.image(0,0,Vp,Xp+"3");a.setWorldSize(27,33),this.alignTopLeft(a,145.5,95.5);var i=this.scene.add.image(0,0,Vp,Xp+"4");i.setWorldSize(25.5,33.5),this.alignTopLeft(i,199,124.5);var r=this.scene.add.image(0,0,Vp,Xp+"5");r.setWorldSize(24,33.5),this.alignTopLeft(r,256.5,152);var s=this.scene.add.image(0,0,Vp,Xp+"6");s.setWorldSize(25,33.5),this.alignTopLeft(s,311,173.5);var o=this.scene.add.image(0,0,Vp,Xp+"7");o.setWorldSize(25.5,33),this.alignTopLeft(o,367.5,189.5);var c=this.scene.add.image(0,0,Vp,Xp+"8");c.setWorldSize(25.5,32),this.alignTopLeft(c,418,201,-3),this.flags=[t,n,a,i,r,s,o,c],this.add(Np()(this)),Np()(this).forEach((function(t){var n=t.x,a=t.y,i=t.angle;e.flagsData.push({x:n,y:a,angle:i})}))},n.createString=function(){this.string=this.scene.add.image(0,0,Vp,jp.STRING.RIGHT),this.string.setWorldSize(209,91.5),this.add(this.string),Phaser.Display.Align.In.TopRight(this.string,this)},n.alignTopLeft=function(e,t,n,a,i){void 0===a&&(a=0),void 0===i&&(i=0),Phaser.Display.Align.In.TopLeft(e,this,-(t-e.width)/2+a,-(n-e.height)/2+i)},n.addBackground=function(){var e="rb-background";if(!this.scene.textures.exists(e)){var t=this.width,n=this.height,a=this.scene.add.graphics();a.fillStyle(65280,.2),a.fillRect(0,0,t,n),a.generateTexture(e,t,n),a.destroy()}var i=this.scene.add.image(0,0,e);this.add(i)},n.playWavingAnimation=function(){var e,t=this;if(!(this.tweens.length>0)){for(var n,a=zp(this.tweens);!(n=a()).done;){if(n.value.isPlaying())return}De()(e=Np()(this)).call(e,(function(e,n){var a=t.flagsData[n],i=a.x,r=a.y,s=a.angle,o=t.scene.add.tween({targets:e,duration:300,props:{x:i+2,y:r-1,angle:s-5},yoyo:!0,delay:50*n,repeat:-1});t.tweens.push(o)}))}},n.stopWavingAnimation=function(){var e=this;if(0!==this.tweens.length){for(var t,n=zp(this.tweens);!(t=n()).done;){t.value.stop()}this.tweens=[],Np()(this).forEach((function(t,n){e.scene.tweens.killTweensOf(t),t.x=e.flagsData[n].x,t.y=e.flagsData[n].y,t.angle=e.flagsData[n].angle}))}},t}(Phaser.GameObjects.Container),Jp=function(e){function t(t){var n;return(n=e.call(this,t)||this).leftBunting=void 0,n.rightBunting=void 0,n.leftBuntingInitialPosition=void 0,n.rightBuntingInitialPosition=void 0,n.setSize(375,136),n.createLeftBunting(),n.createRightBunting(),n.moveBelow(n.leftBunting,n.rightBunting),n.leftBuntingInitialPosition={x:n.leftBunting.x,y:n.leftBunting.y},n.rightBuntingInitialPosition={x:n.rightBunting.x,y:n.rightBunting.y},n}(0,f.Z)(t,e);var n=t.prototype;return n.createLeftBunting=function(){var e=new Hp(this.scene);this.add(e),Phaser.Display.Align.In.TopLeft(e,this),this.leftBunting=e},n.createRightBunting=function(){var e=new qp(this.scene);this.add(e),Phaser.Display.Align.In.TopRight(e,this),this.rightBunting=e},n.hideContent=function(){this.leftBunting.setPosition(this.leftBuntingInitialPosition.x-50,this.leftBuntingInitialPosition.y+-100),this.rightBunting.setPosition(this.rightBuntingInitialPosition.x+50,this.rightBuntingInitialPosition.y+-100)},n.runEntranceAnimation=function(){var e=(0,a.Z)(r().mark((function e(){var t,n,a=this;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return 50,-100,t=new(o())((function(e){new Po.Z({targets:[a.leftBunting],ease:Phaser.Math.Easing.Back.Out,props:{y:{from:a.leftBuntingInitialPosition.y+-100,to:a.leftBuntingInitialPosition.y},x:{from:a.leftBuntingInitialPosition.x-50,to:a.leftBuntingInitialPosition.x}},duration:300,onComplete:e}).play()})),n=new(o())((function(e){new Po.Z({targets:[a.rightBunting],ease:Phaser.Math.Easing.Back.Out,props:{y:{from:a.rightBuntingInitialPosition.y+-100,to:a.rightBuntingInitialPosition.y},x:{from:a.rightBuntingInitialPosition.x+50,to:a.rightBuntingInitialPosition.x}},duration:300,onComplete:e}).play()})),e.next=6,o().all([t,n]);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),n.playWavingAnimation=function(){this.leftBunting.playWavingAnimation(),this.rightBunting.playWavingAnimation()},n.stopWavingAnimation=function(){this.leftBunting.stopWavingAnimation(),this.rightBunting.stopWavingAnimation()},t}(Phaser.GameObjects.Container),Qp={WIDTH:303,HEIGHT:126},$p={WIDTH:375,HEIGHT:68},ef=4937547,tf=.5,nf={OutOfMoves:{SCREEN:"OUT_OF_MOVES_SCREEN_FILTER",POPUP:"OUT_OF_MOVES_POPUP_FILTER"},Challenge:{SCREEN:"CHALLENGE_SCREEN_FILTER",POPUP:"CHALLENGE_POPUP_FILTER"}},af=function(e){function t(t,n,a,i,r,s){var o;return(o=e.call(this,t,n,a)||this).icon=void 0,o.text=void 0,o.createIcon(i,r),o.createText(s),o.add([o.icon,o.text]),o}(0,f.Z)(t,e);var n=t.prototype;return n.createIcon=function(e,t){this.icon=this.scene.add.image(0,-10,e,t).setTint(16579837),this.icon.setWorldSize(28,28)},n.createText=function(e){this.text=this.scene.make.bitmapText({font:No.Z.PRIMARY.KEY,size:this.scene.fontSize(uh.FOOTER),text:e,origin:{x:.5,y:.5},y:14}).setTint(13355979)},t}(Wl.Z),rf=fn.Z.GAMEPLAY_DEFAULT,sf=rf.KEY,of=rf.FRAME,cf=function(e){function t(t){var n;return(n=e.call(this,t,40,40,sf,of.IC_SETTINGS,t.lang.Text.settings)||this).setName("Setting"),n.onClick=function(){t.screen.open(Qi.o4.SETTINGS_SCREEN)},n}return(0,f.Z)(t,e),t}(af),uf=fn.Z.GAMEPLAY_DEFAULT,lf=uf.KEY,hf=uf.FRAME,df=function(e){function t(t,n){var a;return void 0===n&&(n=Qi.o4.TOURNAMENTS_SCREEN),(a=e.call(this,t,40,40,lf,hf.CUP,"Tournaments")||this).setName("Tournaments"),a}return(0,f.Z)(t,e),t}(af),pf=fn.Z.GAMEPLAY_DEFAULT,ff=pf.KEY,gf=pf.FRAME,mf=$p,vf=mf.WIDTH,yf=mf.HEIGHT,bf=function(e){function t(t,n,a){var i;return void 0===n&&(n=!1),void 0===a&&(a=Qi.o4.TOURNAMENTS_SCREEN),(i=e.call(this,t)||this).scene=void 0,i.settingsButton=void 0,i.playBtn=void 0,i.tournamentsButton=void 0,i.buttons=[],i.parentScreenKeys=void 0,i.scene=t,i.parentScreenKeys=a,i.setSize(vf,yf),n&&i.createBackgroundMask(),i.createBackground(),i.createButtons(),i}(0,f.Z)(t,e);var n=t.prototype;return n.createBackgroundMask=function(){var e=this.scene.world.getPixelRatio(),t=this.scene.gameZone,n=t.width,a=t.height,i=this.scene.ads.getBannerHeight(),r=this.scene.theme.getCurrentThemeConfig().backgroundKey,s=this.scene.add.image(0,i+this.height/2,r);s.setOrigin(.5,1),s.setWorldSize(n,a),s.setCrop(0,667*e-(76+i)/s.scaleY,this.width*e,a*e),s.setAlpha(1),this.add(s),this.scene.events.on(Ti.BACKGROUND_CHANGED,(function(e){s.setTexture(e)}))},n.createBackground=function(){var e=this,t=this.scene.gameZone.width>vf?20:0,n=new mh.Z(this.scene,0,0,this.width,this.height,t,2039583,.4);this.add(n),n.removeInteractive(),this.scene.game.events.on("game-zone-updated",(function(){var t=e.scene.gameZone.width>vf?20:0;n.setSize(e.width,e.height),n.setRadius(t)}))},n.createButtons=function(){this.buttons=[],this.createSettingsButton(),this.createPlayBtn(),this.alignButtons()},n.createSettingsButton=function(){this.settingsButton=new cf(this.scene),this.add(this.settingsButton),this.buttons.push(this.settingsButton)},n.createPlayBtn=function(){var e=(0,a.Z)(r().mark((function e(){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.playBtn=new af(this.scene,40,40,ff,gf.ADD_SQUARE,"Game"),this.playBtn.setName("Play"),this.add(this.playBtn),this.buttons.push(this.playBtn);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.createTournamentsButton=function(){this.tournamentsButton=new df(this.scene,this.parentScreenKeys),this.add(this.tournamentsButton),this.buttons.push(this.tournamentsButton)},n.alignButtons=function(){if(0!==this.buttons.length)for(var e=this.width/this.buttons.length*.8,t=0;t<this.buttons.length;++t)this.buttons[t].setX((t-this.buttons.length/2+.5)*e),this.buttons[t].setY(2)},t}(Phaser.GameObjects.Container),Af=fn.Z.GAMEPLAY_DEFAULT,Sf=Af.KEY,Ef=Af.FRAME,wf=function(e){function t(t){var n,a=(n=e.call(this,t)||this).scene.ads.getBannerHeight(),i=n.scene.game.world.isLandscape()?12:0;return n.setSize(375,a+i),n.createBackground(),n.createLogo(),n}(0,f.Z)(t,e);var n=t.prototype;return n.createBackground=function(){if(!this.scene.game.world.isLandscape()){var e=this.scene.add.image(0,0,Sf,Ef.BOTTOM_BG);e.setWorldSize(this.scene.gameZone.width,this.height),this.add(e)}},n.createLogo=function(){var e=this.scene.add.image(0,0,Sf,Ef.BOTTOM_LOGO);e.setWorldSize(207,42),this.add(e)},t}(Phaser.GameObjects.Container),Tf=function(e){function t(t,n,a,i){var r;return(r=e.call(this,t,n,a,i)||this).scene=void 0,r.fadeInAnimation=void 0,r.fadeOutAnimation=void 0,r.slideInAnimation=void 0,r.awesomeContainer=void 0,r.beams=void 0,r.bunting=void 0,r.footer=void 0,r.closed=!1,r.handleClickTournaments=function(){r.scene.time.delayedCall(100,(function(){r.closed||r.close()}))},r.setBackground=function(){var e=r.scene.theme.getCurrentThemeConfig().backgroundKey;r.background.setTexture(e);var t=r.scene.gameZone,n=t.width,a=t.height;r.background.setWorldSize(n,a),r.scene.world.isLandscape()&&r.background.setScale(r.background.scaleY,r.background.scaleY),r.scene.events.on(Ti.BACKGROUND_CHANGED,(function(e){r.background.setTexture(e),r.background.setWorldSize(n,a),r.scene.world.isLandscape()&&r.background.setScale(r.background.scaleY,r.background.scaleY),r.handleResize()}))},r.scene=t,r.setBackground(),r.handleResize(),r.createAwesomeContainer(),r.createBeams(),r.createBuntings(),r.createFooter(),r.setDepth(Qi.Ks.POPUP),gn.Z.removeObject(r.background),r}(0,f.Z)(t,e);var n=t.prototype;return n.createAwesomeContainer=function(){this.awesomeContainer=new Cp(this.scene),this.add(this.awesomeContainer)},n.createBeams=function(){this.beams=new Lp(this.scene),this.add(this.beams),Phaser.Display.Align.In.TopCenter(this.beams,this)},n.createBuntings=function(){this.bunting=new Jp(this.scene),this.add(this.bunting),Phaser.Display.Align.In.TopCenter(this.bunting,this)},n.createFooter=function(){var e=this;this.footer=new bf(this.scene,!1,Qi.o4.VICTORY_SCREEN),this.add(this.footer),this.bringToTop(this.footer),this.footer.setInteractive();var t=this.scene.ads.getBannerHeight(),n=this.scene.gameZone.width>375?-10:0;Phaser.Display.Align.In.BottomCenter(this.footer,this.background,0,-t+n),this.footer.playBtn.onClick=(0,a.Z)(r().mark((function t(){return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.scene.screen.openAsync(Qi.o4.PLAY_SCREEN);case 2:t.sent.newGameStarted&&e.scene.screen.close(Qi.o4.VICTORY_SCREEN);case 4:case"end":return t.stop()}}),t)})))},n.createBottomLogo=function(){if(!this.scene.game.world.isLandscape()){var e=new wf(this.scene);this.add(e),Phaser.Display.Align.In.BottomCenter(e,this)}},n.open=function(t){e.prototype.open.call(this,t),this.closed=!1,this.updateVictoryStats(),this.awesomeContainer.setAlpha(1),this.awesomeContainer.setInteractive(),this.background.setAlpha(1),this.runOpenAnimation(),this.scene.children.bringToTop(this.scene.gameplay.confettiSmallFallDown),this.scene.gameplay.confettiSmallFallDown.run(8,0,0)},n.close=function(){this.closed=!0,this.runCloseAnimation(),this.stopConfettiAnimation()},n.updateVictoryStats=function(){var e,t=null==(e=this.data)?void 0:e.list;if(t){var n=t.draw3,a=t.score,i=t.winningMoves,r=t.winningTime,s=this.scene.gameStats.getDraw(n).bestWinningTime;this.awesomeContainer.setScore(""+a),this.awesomeContainer.setMoves(""+i),this.awesomeContainer.setWinningTime((0,tr.F0)(r,!1)),this.awesomeContainer.setBestWinningTime((0,tr.F0)(s,!1)),n?this.awesomeContainer.setDraw(this.scene.lang.Text.draw3):this.awesomeContainer.setDraw(this.scene.lang.Text.draw1)}},n.runOpenAnimation=function(){var e=(0,a.Z)(r().mark((function e(){var t,n,i,s=this;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==(t=this.slideInAnimation)||null==(n=t.tween)||!n.isPlaying()){e.next=2;break}return e.abrupt("return");case 2:return this.scene.audio.playSound($i.Z.POPUP_SHOW),i=this.scene.ads.getBannerHeight(),this.awesomeContainer.setAlpha(0),this.awesomeContainer.y=i,this.awesomeContainer.hideContent(),this.bunting.stopWavingAnimation(),this.slideInAnimation||(this.slideInAnimation=new Po.Z({targets:[this.awesomeContainer],ease:Phaser.Math.Easing.Back.Out,props:{y:{from:i,to:-i/2},alpha:{from:0,to:1}},duration:300,onComplete:function(){var e=(0,a.Z)(r().mark((function e(){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.awesomeContainer.runEntranceAnimation();case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()})),this.fadeInAnimation||(this.fadeInAnimation=new bc.Z({targets:[this],duration:300,ease:Phaser.Math.Easing.Linear})),this.fadeInAnimation.play(),e.next=13,this.bunting.runEntranceAnimation();case 13:this.bunting.playWavingAnimation(),this.slideInAnimation.play();case 15:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.runCloseAnimation=function(){var t,n,a=this;null!=(t=this.fadeOutAnimation)&&null!=(n=t.tween)&&n.isPlaying()||(this.scene.audio.playSound($i.Z.POPUP_OFF),this.fadeOutAnimation||(this.fadeOutAnimation=new Fh.Z({targets:[this],ease:Phaser.Math.Easing.Linear,props:{alpha:0},duration:300,onComplete:function(){e.prototype.close.call(a)}})),this.fadeOutAnimation.play(),this.bunting.stopWavingAnimation())},n.stopConfettiAnimation=function(){this.scene.gameplay.confettiSmallFallDown.emitter.stop()},t}(GameCore.Screen),If=Tf,Cf=fn.Z.GAMEPLAY_DEFAULT,kf=Cf.KEY,xf=Cf.FRAME,Pf=function(e){function t(t){var n;return(n=e.call(this,t)||this).bg=void 0,n.score=void 0,n.time=void 0,n.bestTime=void 0,n.moves=void 0,n.draw=void 0,n.lines=[],n.buttons=[],n.createBackground(),n.createTitle(),n.createStats(),n.createNewGameButton(),n.createReplayButton(),n.createDevButtons(),t.add.existing((0,Hi.Z)(n)),n}(0,f.Z)(t,e);var n=t.prototype;return n.setScore=function(e){this.score.setValue(e)},n.setWinningTime=function(e){this.time.setValue(e)},n.setBestWinningTime=function(e){this.bestTime.setValue(e)},n.setMoves=function(e){this.moves.setValue(e)},n.setDraw=function(e){this.draw.setText(e)},n.createBackground=function(){this.setSize(343,374);var e=new Xl(this.scene,{key:"_outOfMoves",radius:6,border:24,width:343,height:374});this.bg=e,this.add(e),this.bg.setPipeline("Grayscale")},n.createTitle=function(){var e=this.scene.make.bitmapText({font:No.Z.BOLD.KEY,size:this.scene.fontSize(24),text:this.scene.lang.Text.outOfMoves,origin:{x:.5,y:.5}});e.setTint(16777215),this.add(e),Phaser.Display.Align.In.TopCenter(e,this,0,-20);var t=this.scene.make.bitmapText({font:No.Z.PRIMARY.KEY,size:this.scene.fontSize(16),text:this.scene.lang.Text.draw1,origin:{x:.5,y:.5}});t.setTint(16777215),this.draw=t,this.add([t]),Phaser.Display.Align.To.BottomCenter(t,e,0,8)},n.createStats=function(){var e=[],t=this.scene.lang.Text,n=new mp(this.scene);n.setIcon(kf,xf.MEDAL_STAR),n.setLabel(t.score),n.setValue("687"),this.score=n,e.push(n);var a=new mp(this.scene);a.setIcon(kf,xf.ARROW_SWAP_HORIZONTAL),a.setLabel(t.moves),a.setValue("798"),this.moves=a,e.push(a);var i=new mp(this.scene);i.setIcon(kf,xf.TIMER),i.setLabel(t.time),i.setValue("09:48"),this.time=i,e.push(i);var r=new mp(this.scene);r.setIcon(kf,xf.CUP),r.setLabel(t.bestTime),r.setValue("05:30"),this.bestTime=r,e.push(r),this.add(e);for(var s=0;s<e.length;s++){var o=e[s];if(o.alignProperties(),Phaser.Display.Align.In.TopCenter(o,this,0,-(50*s+112)),s==e.length-1)break;var c=this.scene.add.line(0,0,0,0,271,0,16579837,.2);this.add(c),this.lines.push(c),Phaser.Display.Align.To.BottomCenter(c,o,0,12)}},n.createNewGameButton=function(){var e=this,t=new Zh.Z(this.scene,143.5,48,16,16777215);t.onClick=(0,a.Z)(r().mark((function t(){return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.scene instanceof Nm&&e.scene.handlePlaySingle(),e.scene.screen.close(Qi.o4.NO_MORE_MOVES_SCREEN);case 2:case"end":return t.stop()}}),t)}))),t.setName("NewGame");var n=new Ap(this.scene,8,this.scene.lang.Text.newGame);t.add(n),Phaser.Display.Align.In.BottomRight(t,this,-16,-18),this.add([t]),this.buttons.push(t),new Xo.Z({targets:[t],duration:1e3,props:{scale:"*=1.05"}}).play()},n.createReplayButton=function(){var e=this,t=new Zh.Z(this.scene,143.5,48,16,16777215);t.button.setAlpha(.24),t.button.setStrokeStyle(1,16777215),t.onClick=function(){e.scene instanceof Nm&&(console.log("replay"),e.scene.gameplay.replayGame()),e.scene.screen.close(Qi.o4.NO_MORE_MOVES_SCREEN)},t.setName("Replay");var n=this.scene.add.graphics();n.lineStyle(1,16777215),n.strokeRoundedRect(-71.75,-24,143.5,48,16);var a=new Ap(this.scene,8,this.scene.lang.Text.replay,xf.IC_REPLAY);a.clearTint(),a.getIcon().setTintFill(16777215),t.add([n,a]),Phaser.Display.Align.In.BottomLeft(t,this,-16,-18),this.add([t]),this.buttons.push(t)},n.createDevButtons=function(){GameCore.Utils.Valid.isDebugger()&&this.createCloseButton()},n.createCloseButton=function(){var e=this,t=new Wl.Z(this.scene,40,40),n=this.scene.add.image(0,0,kf,xf.IC_BG_OFF);n.setWorldSize(40,40);var a=this.scene.make.bitmapText({font:No.Z.PRIMARY.KEY,size:this.scene.fontSize(10),text:this.scene.lang.Text.newGame,origin:{x:.5,y:.5}});a.setCenterAlign(),t.add([n,a]),this.add(t),Phaser.Display.Align.In.BottomLeft(t,this,0,-200),t.onClick=function(){e.scene.screen.close(Qi.o4.NO_MORE_MOVES_SCREEN)}},n.hideContent=function(){[this.score,this.moves,this.time,this.bestTime].forEach((function(e){return e.setAlpha(0)})),this.lines.forEach((function(e){e.setAlpha(0),e.scaleX=0})),this.buttons.forEach((function(e){e.setAlpha(0)}))},n.runEntranceAnimationButtons=function(){var e=(0,a.Z)(r().mark((function e(){var t,n,a=this;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=De()(t=this.buttons).call(t,(function(e){return new(o())((function(t){a.scene.add.tween({targets:[e],alpha:1,duration:200,onComplete:function(){e.setDisabled(!1),t()}})}))})),e.next=3,o().all(n);case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.runEntranceAnimationRows=function(){var e=(0,a.Z)(r().mark((function e(){var t,n,a=this;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[this.score,this.moves,this.time,this.bestTime],200,n=De()(t).call(t,(function(e,t){return new(o())((function(n){a.scene.add.tween({targets:[e],duration:200,delay:200*t/2,ease:Phaser.Math.Easing.Sine.Out,props:{alpha:{from:0,to:1},y:{from:e.y+e.height/2,to:e.y}},onComplete:n})}))})),e.next=5,o().all(n);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.runEntranceAnimationLines=function(){var e=(0,a.Z)(r().mark((function e(){var t,n,a=this;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return 200,n=De()(t=this.lines).call(t,(function(e,t){return new(o())((function(n){a.scene.add.tween({targets:[e],duration:200,delay:200*t/2,props:{alpha:{from:0,to:1},scaleX:{from:0,to:1}},onComplete:n})}))})),e.next=4,o().all(n);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.runEntranceAnimationRowsLines=function(){var e=(0,a.Z)(r().mark((function e(){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o().all([this.runEntranceAnimationRows(),this.runEntranceAnimationLines()]);case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.runEntranceAnimation=function(){var e=(0,a.Z)(r().mark((function e(){var t;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.runEntranceAnimationRowsLines();case 2:return t=this.scene,e.next=5,t.gameplay.finishGame();case 5:return e.next=7,this.runEntranceAnimationButtons();case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),t}(Phaser.GameObjects.Container),_f=Pf,Of=fn.Z.GAMEPLAY_DEFAULT,Rf=Of.KEY,Df=Of.FRAME,Lf=function(e){function t(t){var n;return(n=e.call(this,t)||this).leftLightning=void 0,n.middleLightning=void 0,n.rightLightning=void 0,n.initialLeftX=void 0,n.initialLeftY=void 0,n.initialMidX=void 0,n.initialMidY=void 0,n.initialRightX=void 0,n.initialRightY=void 0,n.setSize(374,416),n.createLightnings(),n.alignLightnings(),n.initialLeftX=n.leftLightning.x,n.initialLeftY=n.leftLightning.y,n.initialMidX=n.middleLightning.x,n.initialMidY=n.middleLightning.y,n.initialRightX=n.rightLightning.x,n.initialRightY=n.rightLightning.y,n}(0,f.Z)(t,e);var n=t.prototype;return n.createLightnings=function(){this.createLeftLightning(),this.createMiddleLightning(),this.createRightLightning();var e=[this.leftLightning,this.middleLightning,this.rightLightning];e.forEach((function(e){return e.setAlpha(.2)})),this.add(e)},n.createLeftLightning=function(){this.leftLightning=this.scene.add.image(0,0,Rf,Df.LIGHTNING.LEFT),this.leftLightning.setWorldSize(182.5,180)},n.createMiddleLightning=function(){this.middleLightning=this.scene.add.image(0,0,Rf,Df.LIGHTNING.MIDDLE),this.middleLightning.setWorldSize(106,125.5)},n.createRightLightning=function(){this.rightLightning=this.scene.add.image(0,0,Rf,Df.LIGHTNING.RIGHT),this.rightLightning.setWorldSize(130.5,116)},n.alignLightnings=function(){Phaser.Display.Align.In.TopLeft(this.leftLightning,this,0,-60.28),Phaser.Display.Align.In.TopRight(this.middleLightning,this,-125.92,0),Phaser.Display.Align.In.TopRight(this.rightLightning,this,-9.23,-55.4)},n.hideContent=function(){var e=0,t=-300;[this.leftLightning,this.middleLightning,this.rightLightning].forEach((function(n){n.setPosition(e,t).setAlpha(0)}))},n.runEntranceAnimation=function(){var e=(0,a.Z)(r().mark((function e(){var t,n,a,i,s,c=this;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={x:0,y:-300},n=new(o())((function(e){new Po.Z({targets:[c.leftLightning],ease:Phaser.Math.Easing.Cubic.Out,props:{x:{from:t.x,to:c.initialLeftX},y:{from:t.y,to:c.initialLeftY},alpha:{from:0,to:.2}},duration:150,onComplete:e}).play()})),a=new(o())((function(e){new Po.Z({targets:[c.rightLightning],ease:Phaser.Math.Easing.Cubic.Out,props:{x:{from:t.x,to:c.initialRightX},y:{from:t.y,to:c.initialRightY},alpha:{from:0,to:.2}},duration:250,onComplete:e}).play()})),i=new(o())((function(e){new Po.Z({targets:[c.middleLightning],ease:Phaser.Math.Easing.Cubic.Out,props:{x:{from:t.x,to:c.initialMidX},y:{from:t.y,to:c.initialMidY},alpha:{from:0,to:.2}},duration:300,onComplete:e}).play()})),e.next=6,o().all([n,i,a]);case 6:return s=[this.leftLightning,this.middleLightning,this.rightLightning],e.next=9,new(o())((function(e){c.scene.add.tween({targets:s,props:{alpha:.4},yoyo:!0,duration:100,onComplete:e})}));case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),t}(Phaser.GameObjects.Container),Bf=fn.Z.GAMEPLAY_DEFAULT,Nf=Bf.KEY,Mf=Bf.FRAME,Gf=10.4,Ff=30.5,Zf=50.5,Uf={FIRST_FROM_LEFT:Gf,SECOND_FROM_LEFT:Ff,THIRD_FROM_LEFT:Zf,FIRST_FROM_RIGHT:-Gf,SECOND_FROM_RIGHT:-Ff,THIRD_FROM_RIGHT:-Zf},Wf=function(e){function t(t){var n;return(n=e.call(this,t)||this).pivot=void 0,n.beams=[],n.setSize(375,415.5),n.createBeamsPivot(),n.createBeams(),n.playAnimation(),n}(0,f.Z)(t,e);var n=t.prototype;return n.createBeams=function(){for(var e=0,t=ie()(Uf);e<t.length;e++){var n=t[e],a=Uf[n],i=this.scene.add.image(0,0,Nf,Mf.BEAM.LOSE_AXIS);i.setWorldSize(65.5,533),this.add(i),this.beams.push(i),this.rotateBeamToAngleInDegree(i,a)}},n.playAnimation=function(){var e=this;this.beams.forEach((function(t,n){e.scene.tweens.add({targets:t,props:{alpha:{from:.2,to:.4}},duration:700,delay:700*n,repeat:-1,yoyo:!0})}))},n.createBeamsPivot=function(){this.pivot=this.scene.add.image(0,0,Nf,Mf.ADD_SQUARE),this.add(this.pivot),this.pivot.kill(),Phaser.Display.Align.In.Center(this.pivot,this,0,-this.height/2-148.2)},n.rotateBeamToAngleInDegree=function(e,t){Phaser.Actions.RotateAroundDistance([e],this.pivot,t*Math.PI/180,e.height/2);var n=180*Math.atan2(e.y-this.pivot.y,e.x-this.pivot.x)/Math.PI;e.angle=n+90+180},t}(Phaser.GameObjects.Container),Hf=function(e){function t(t,n,a,i){var r;return(r=e.call(this,t,n,a,i)||this).scene=void 0,r.fadeInAnimation=void 0,r.fadeOutAnimation=void 0,r.slideInAnimation=void 0,r.outOfMovesContainer=void 0,r.lightnings=void 0,r.beams=void 0,r.footer=void 0,r.closed=!1,r.handleClickTournaments=function(){r.scene.time.delayedCall(100,(function(){r.closed||r.close()}))},r.setBackground=function(){var e=r.scene.theme.getCurrentThemeConfig().backgroundKey;r.background.setTexture(e);var t=r.scene.gameZone,n=t.width,a=t.height;r.background.setWorldSize(n,a),r.scene.world.isLandscape()&&r.background.setScale(r.background.scaleY,r.background.scaleY),r.background.setPipeline("Grayscale"),r.scene.events.on(Ti.BACKGROUND_CHANGED,(function(e){r.background.setTexture(e),r.background.setWorldSize(n,a),r.scene.world.isLandscape()&&r.scene.world.isLandscape()&&r.background.setScale(r.background.scaleY,r.background.scaleY),r.handleResize()}))},r.scene=t,r.setBackground(),r.handleResize(),r.createOutOfMovesContainer(),r.createLightnings(),r.createBeams(),r.createFooter(),r.setDepth(Qi.Ks.POPUP),gn.Z.removeObject(r.background),r}(0,f.Z)(t,e);var n=t.prototype;return n.createBeams=function(){this.beams=new Wf(this.scene),this.add(this.beams),Phaser.Display.Align.In.TopCenter(this.beams,this)},n.createOutOfMovesContainer=function(){this.outOfMovesContainer=new _f(this.scene),this.add(this.outOfMovesContainer)},n.createLightnings=function(){this.lightnings=new Lf(this.scene),this.add(this.lightnings),Phaser.Display.Align.In.TopCenter(this.lightnings,this)},n.createFooter=function(){var e=this;this.footer=new bf(this.scene,!1,Qi.o4.NO_MORE_MOVES_SCREEN),this.add(this.footer),this.bringToTop(this.footer),this.footer.setInteractive();var t=this.scene.ads.getBannerHeight(),n=this.scene.gameZone.width>375?-10:0;Phaser.Display.Align.In.BottomCenter(this.footer,this.background,0,-t+n),this.footer.playBtn.onClick=(0,a.Z)(r().mark((function t(){return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.scene.screen.openAsync(Qi.o4.PLAY_SCREEN);case 2:t.sent.newGameStarted&&e.scene.screen.close(Qi.o4.NO_MORE_MOVES_SCREEN);case 4:case"end":return t.stop()}}),t)})))},n.createBottomLogo=function(){if(!this.scene.world.isLandscape()){var e=new wf(this.scene);this.add(e),Phaser.Display.Align.In.BottomCenter(e,this)}},n.open=function(t){e.prototype.open.call(this,t),gn.Z.openScreen(this,!0),this.updateVictoryStats(),this.outOfMovesContainer.setAlpha(1),this.outOfMovesContainer.setInteractive(),this.background.setAlpha(1),this.runOpenAnimation(),this.closed=!1},n.close=function(){this.closed=!0,this.runCloseAnimation()},n.updateVictoryStats=function(){var e,t=null==(e=this.data)?void 0:e.list;if(t){var n=t.draw3,a=t.score,i=t.winningMoves,r=t.winningTime,s=this.scene.gameStats.getDraw(n).bestWinningTime;this.outOfMovesContainer.setScore(""+a),this.outOfMovesContainer.setMoves(""+i),this.outOfMovesContainer.setWinningTime((0,tr.F0)(r,!1)),this.outOfMovesContainer.setBestWinningTime((0,tr.F0)(s,!1)),n?this.outOfMovesContainer.setDraw(this.scene.lang.Text.draw3):this.outOfMovesContainer.setDraw(this.scene.lang.Text.draw1)}},n.runOpenAnimation=function(){var e=(0,a.Z)(r().mark((function e(){var t,n,i,s=this;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==(t=this.slideInAnimation)||null==(n=t.tween)||!n.isPlaying()){e.next=2;break}return e.abrupt("return");case 2:return this.scene.audio.playSound($i.Z.POPUP_SHOW),i=this.scene.ads.getBannerHeight(),this.outOfMovesContainer.setAlpha(0),this.outOfMovesContainer.y=i,this.outOfMovesContainer.hideContent(),this.slideInAnimation||(this.slideInAnimation=new Po.Z({targets:[this.outOfMovesContainer],ease:Phaser.Math.Easing.Sine.In,props:{y:{from:i,to:-i/2},alpha:{from:0,to:1}},duration:300,onComplete:function(){var e=(0,a.Z)(r().mark((function e(){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.outOfMovesContainer.runEntranceAnimation();case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()})),this.fadeInAnimation||(this.fadeInAnimation=new bc.Z({targets:[this],duration:300,ease:Phaser.Math.Easing.Sine.In})),this.fadeInAnimation.play(),e.next=12,this.lightnings.runEntranceAnimation();case 12:this.slideInAnimation.play();case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.runCloseAnimation=function(){var t,n,a=this;null!=(t=this.fadeOutAnimation)&&null!=(n=t.tween)&&n.isPlaying()||(this.scene.audio.playSound($i.Z.POPUP_OFF),this.fadeOutAnimation||(this.fadeOutAnimation=new Fh.Z({targets:[this],ease:Phaser.Math.Easing.Sine.Out,props:{alpha:0},duration:300,onComplete:function(){gn.Z.closeScreen(a),e.prototype.close.call(a)}})),this.fadeOutAnimation.play())},t}(GameCore.Screen),zf=Hf,Yf=function(e){function t(t){var n;return(n=e.call(this,t)||this).bg=void 0,n.message=void 0,n.createBackground(),n.createMessage(),n.createOKButton(),t.add.existing((0,Hi.Z)(n)),n}(0,f.Z)(t,e);var n=t.prototype;return n.setMessage=function(e){this.message.setText(e)},n.createBackground=function(){var e=new mh.Z(this.scene,0,0,300,160,20,16579837);this.add(e),this.bg=e,this.setSize(e.width,e.height)},n.createMessage=function(){var e=this.scene.make.bitmapText({font:No.Z.PRIMARY.KEY,size:this.scene.fontSize(16),text:"Hello, world!",origin:{x:.5,y:.5}});e.setCenterAlign(),e.setTint(1907997),this.add(e),Phaser.Display.Align.In.Center(e,this,0,-24),this.message=e,this.add([e])},n.createOKButton=function(){var e=this,t=new Zh.Z(this.scene,260,40,12,3774208);t.setName("OK"),t.onClick=function(){e.scene.screen.close(Qi.o4.NOTIFICATION_SCREEN)};var n=this.scene.make.bitmapText({font:No.Z.PRIMARY.KEY,size:this.scene.fontSize(16),text:this.scene.lang.Text.ok,origin:{x:.5,y:.5}});n.setTint(16579837),Phaser.Display.Align.In.Center(n,t,0),t.add([n]),Phaser.Display.Align.In.BottomCenter(t,this.bg,0,-16),this.add([t])},t}(Phaser.GameObjects.Container),Kf=Yf,Vf=function(e){function t(t,n,a,i){var r;return(r=e.call(this,t,n,a,i)||this).slideInAnimation=void 0,r.fadeInAnimation=void 0,r.fadeOutAnimation=void 0,r.notificationContainer=void 0,r.setDepth(Qi.Ks.POPUP),r.notificationContainer=new Kf(t),r.add(r.notificationContainer),r.background.setTint(1315862),r.background.setAlpha(.5),r.background.setInteractive(),r}(0,f.Z)(t,e);var n=t.prototype;return n.open=function(t){e.prototype.open.call(this,t);var n=this.data.list.message,a=void 0===n?"":n;this.notificationContainer.setMessage(a),this.runOpenAnimation()},n.close=function(){this.runCloseAnimation()},n.runOpenAnimation=function(){var e,t;null!=(e=this.fadeInAnimation)&&null!=(t=e.tween)&&t.isPlaying()||(this.scene.audio.playSound($i.Z.POPUP_SHOW),this.fadeInAnimation||(this.fadeInAnimation=new bc.Z({targets:[this],ease:Phaser.Math.Easing.Sine.InOut,duration:300})),this.fadeInAnimation.play())},n.runCloseAnimation=function(){var t,n,a=this;null!=(t=this.fadeOutAnimation)&&null!=(n=t.tween)&&n.isPlaying()||(this.scene.audio.playSound($i.Z.POPUP_OFF),this.fadeOutAnimation||(this.fadeOutAnimation=new Fh.Z({targets:[this],props:{alpha:0},duration:300,onComplete:function(){e.prototype.close.call(a)}})),this.fadeOutAnimation.play())},t}(GameCore.Screen),jf=Vf,Xf=n(570),qf=n(563),Jf=fu.STATUS,Qf=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n.gameMode=void 0,n.updateChallengeInfoTimer=void 0,n.handleGameModeChanged=function(){n.stop(),n.start()},n.scene=t,n.init(),n}(0,f.Z)(t,e);var n=t.prototype;return n.init=function(){e.prototype.init.call(this),this.gameMode=ro.SINGLE,oo.instance.on(Ti.GAME_MODE_CHANGED,this.handleGameModeChanged)},n.start=function(){if(!this.isRunning()){switch(this.gameMode=oo.instance.getGameMode(),console.log("\ud83e\udd16 ? Start game with mode:",this.gameMode),GameCore.Configs.GlobalDebugEnabled&&(qf.Z.updateValue("game-mode","Game Mode",this.gameMode),FBInstant.context.getPlayersAsync().catch((function(){return[]})).then((function(e){qf.Z.updateValue("context-players","Context Players",e.length)})),qf.Z.updateValue("context-type","Context Type",FBInstant.context.getType())),this.gameMode){case ro.SINGLE:this.startSingleMode();break;case ro.TOURNAMENT:this.startTournamentMode();break;case ro.CHALLENGE_FRIENDS:this.startChallengeMode();break;default:this.startSingleMode()}this.setState(Jf.RUNNING)}},n.stop=function(){switch(console.log("\ud83e\udd16 ? Stop game with mode:",this.gameMode),this.gameMode){case ro.SINGLE:this.stopSingleMode();break;case ro.TOURNAMENT:this.stopTournamentMode();break;case ro.CHALLENGE_FRIENDS:this.stopChallengeMode();break;default:this.stopSingleMode()}this.setState(Jf.STOPPED)},n.startSingleMode=function(){this.scene.header.useSingleInfo()},n.stopSingleMode=function(){},n.startTournamentMode=function(){var e=(0,a.Z)(r().mark((function e(){var t,n,a,i,s,o,c,u,l;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.scene.header.useTournamentInfo(),e.next=3,this.updateTournamentInfo();case 3:return e.prev=3,n=this.scene.storage.getState(),console.log({state:n}),a=Wr(n),i=Ur(n),console.log("start tournament",{leaderboardId:a,tournamentId:i}),e.next=11,(0,Hr.H$)(a,{limit:7}).catch((function(e){return console.warn("get leader board",e,a),[]}));case 11:if(s=e.sent,console.log({leaders:s,leaderboardId:a}),!(s.length<1)){e.next=15;break}return e.abrupt("return");case 15:return o=De()(s).call(s,(function(e){return e.playerId})),e.next=18,this.scene.profile.requestProfiles(o).catch((function(e){console.warn("request profile ids",e)}));case 18:if(c=this.scene.profile.getProfiles(),console.log({profiles:c}),u=De()(s).call(s,(function(e){var t=e.playerId,n=e.score,a=e.rank,i=c[t];if(!i)return null;var r=i.name;return{playerId:t,photo:i.photo,score:n,rank:a,name:r}})),!((l=Pa()(t=Oe()(u).call(u,(function(e){return null!==e}))).call(t,(function(e,t){return t.score-e.score}))).length<1)){e.next=24;break}return e.abrupt("return");case 24:console.log({players:l}),this.scene.analytics.event(pn._.TOURNAMENT_START,{tournament_id:i,leaderboard_id:a}),e.next=34;break;case 28:if(e.prev=28,e.t0=e.catch(3),!(e.t0 instanceof Xf.Z)){e.next=32;break}return e.abrupt("return");case 32:console.warn({error:e.t0}),(0,h.tO)(e.t0);case 34:case"end":return e.stop()}}),e,this,[[3,28]])})));return function(){return e.apply(this,arguments)}}(),n.updateTournamentInfo=function(){var e=(0,a.Z)(r().mark((function e(){var t,n,a,i,s;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.scene.storage.getState(),n=Wr(t),e.next=4,(0,Hr.wF)(n);case 4:a=e.sent,i=null==a?void 0:a.name,s=GameCore.Utils.String.removeDiacritics(i||"Your tournament"),console.log("update tournament title",i),this.scene.header.tournamentInfo.titleBlock.tournamentTitle.setText(s);case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.stopTournamentMode=function(){},n.startChallengeMode=function(){var e=this;console.log("start challenge"),this.scene.header.useChallengeInfo();var t=this.scene.header.challengeInfo,n=t.leftBlock,i=t.rightBlock;n.updateData(0,0,0),i.updateData(),this.updateChallengeInfo(),this.updateChallengeInfoTimer=this.scene.time.addEvent({delay:1e4,repeat:-1,callback:function(){var t=(0,a.Z)(r().mark((function t(){var n,a,i;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.scene.storage.getState(),!(a=ps(n))){t.next=13;break}return t.prev=3,t.next=6,xs(a);case 6:i=t.sent,e.scene.storage.dispatch(Js(i)),e.updateChallengeInfo(),t.next=13;break;case 11:t.prev=11,t.t0=t.catch(3);case 13:case"end":return t.stop()}}),t,null,[[3,11]])})));return function(){return t.apply(this,arguments)}}()})},n.updateChallengeInfo=function(){var e=this.scene.header.challengeInfo,t=e.leftBlock,n=e.rightBlock,a=this.scene.storage.getState(),i=this.scene.player.getPlayer(),r=i.playerId,s=i.photo,o=i.name;t.avatar.loadPhoto(r,s,100),t.username.setText(o||"You");var c=ds(a),u=c._id,l=c.whitePlayerId,h=c.blackPlayerId,d=c.extraData,p=void 0===d?{}:d,f=r===l?h:l,g=this.scene.game.player.getConnectedPlayers()[f]||gs(a),m=g.playerId,v=g.photo,y=g.name;n.avatar.loadPhoto(m,v,100),n.username.setText(y||"Your Friend"),console.warn({matchData:c});var b=r===l?p.blackPlayerData:p.whitePlayerData;if(b){var A=b.score,S=b.moves,E=b.time;n.updateData(A,E,S)}this.saveMatchID(u)},n.saveMatchID=function(e){var t=FBInstant.context.getID();if(t&&e){var n=this.scene.player.getCustomData("match"),a=Phaser.Utils.Objects.DeepCopy(n);a[t]=e,this.scene.player.setCustomData("match",a)}},n.stopChallengeMode=function(){var e;null==(e=this.updateChallengeInfoTimer)||e.remove()},t}(yu),$f=Qf,eg=function(e){return e.WIN="win",e.LOSE="lose",e.DRAW="draw",e.WAITING_FOR_OPPONENT="waiting_for_opponent",e}(eg||{}),tg=eg,ng=fn.Z.DEFAULT,ag=ng.KEY,ig=ng.FRAME,rg=fn.Z.GAMEPLAY_DEFAULT,sg=rg.KEY,og=rg.FRAME,cg=function(e){function t(t){var n;return(n=e.call(this,t)||this)._avatar=void 0,n._username=void 0,n._crownZone=void 0,n.setSize(54,94),n.createAvatarFrame(),n.createCrownZone(),n.createText(),n.alignComponents(),n}(0,f.Z)(t,e);var n=t.prototype;return n.createAvatarFrame=function(){this._avatar=new wc(this.scene,{key:ag,background:ig.BLANK,width:64,height:64,loadDelay:100}),this._avatar.update(),this._avatar.background.kill(),this._avatar.loadPhoto(Ui.Z.AVATAR.KEY,Ui.Z.AVATAR.FILE,100),this.add(this._avatar)},n.createText=function(){this._username=this.scene.make.text({style:{fontFamily:No.Z.FONT_FAMILY},origin:{x:.5,y:.5}}),this._username.setHighQuality(),this._username.setFontSize(12),this._username.setText("Name"),this.add(this._username)},n.createCrownZone=function(){this._crownZone=this.scene.add.container(),this._crownZone.setSize(20,20),this.add(this._crownZone);var e=this.scene.add.image(0,0,sg,og.AVATAR_CROWN);e.setWorldSize(19,14),Phaser.Display.Align.In.Center(e,this._crownZone),this._crownZone.add(e)},n.alignComponents=function(){Phaser.Display.Align.In.BottomCenter(this._username,this),Phaser.Display.Align.In.TopCenter(this._crownZone,this),Phaser.Display.Align.In.Center(this._avatar,this)},n.addBackground=function(){var e="player-avatar-background";if(!this.scene.textures.exists(e)){var t=this.width,n=this.height,a=this.scene.add.graphics();a.fillStyle(65280,.2),a.fillRect(0,0,t,n),a.generateTexture(e,t,n),a.destroy()}var i=this.scene.add.image(0,0,e);this.add(i)},n.setWinner=function(e){void 0===e&&(e=!0),this._crownZone.setVisible(e)},n.hideContent=function(){this._avatar.setScale(0),this._username.setAlpha(0),this._crownZone.setAlpha(0)},n.runEntranceAnimationAvatar=function(){var e=(0,a.Z)(r().mark((function e(){var t=this;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new(o())((function(e){t.scene.add.tween({targets:t._avatar,duration:300,ease:Phaser.Math.Easing.Cubic.Out,props:{scale:{from:0,to:1}},onComplete:e})})));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),n.runEntranceAnimationUsername=function(){var e=(0,a.Z)(r().mark((function e(){var t=this;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new(o())((function(e){t.scene.add.tween({targets:t._username,duration:300,ease:Phaser.Math.Easing.Sine.Out,props:{alpha:{from:0,to:1}},onComplete:e})})));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),n.runEntranceAnimationCrown=function(){var e=(0,a.Z)(r().mark((function e(){var t=this;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new(o())((function(e){t.scene.add.tween({targets:t._crownZone,ease:Phaser.Math.Easing.Sine.Out,duration:100,props:{alpha:{from:0,to:1},y:{from:t._crownZone.y-t._crownZone.height/4,to:t._crownZone.y}},onComplete:e})})));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),n.runEntranceAnimation=function(){var e=(0,a.Z)(r().mark((function e(){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o().all([this.runEntranceAnimationAvatar(),this.runEntranceAnimationUsername()]);case 2:return e.next=4,this.runEntranceAnimationCrown();case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),(0,ue.Z)(t,[{key:"avatar",get:function(){return this._avatar}},{key:"username",get:function(){return this._username}},{key:"crownZone",get:function(){return this._crownZone}}]),t}(Phaser.GameObjects.Container),ug=16762624,lg=function(e){function t(t){var n;return(n=e.call(this,t)||this)._youAvatar=void 0,n._opponentAvatar=void 0,n._versusText=void 0,n.setSize(231,94),n.createAvatars(),n.createVersusText(),n.alignComponents(),n}(0,f.Z)(t,e);var n=t.prototype;return n.createAvatars=function(){this._youAvatar=new cg(this.scene),this._opponentAvatar=new cg(this.scene),this.add([this._youAvatar,this._opponentAvatar])},n.createVersusText=function(){this._versusText=this.scene.make.bitmapText({font:No.Z.BOLD.KEY,size:this.scene.fontSize(18),origin:{x:.5,y:.5}}),this._versusText.setText("VS"),this.setTintVersusText(),this.add(this._versusText)},n.setTintVersusText=function(e){void 0===e&&(e=!0),e?this._versusText.setTint(11222016,ug,ug,ug):this._versusText.clearTint()},n.alignComponents=function(){Phaser.Display.Align.In.Center(this._versusText,this),Phaser.Display.Align.In.LeftCenter(this._youAvatar,this,-20),Phaser.Display.Align.In.RightCenter(this._opponentAvatar,this,-20)},n.addBackground=function(){var e="avatar-zone-background";if(!this.scene.textures.exists(e)){var t=this.width,n=this.height,a=this.scene.add.graphics();a.fillStyle(65280,.2),a.fillRect(0,0,t,n),a.generateTexture(e,t,n),a.destroy()}var i=this.scene.add.image(0,0,e);this.add(i)},n.updateState=function(e){switch(e){case tg.WIN:this._youAvatar.setWinner(!0),this._opponentAvatar.setWinner(!1),this.setTintVersusText();break;case tg.LOSE:this._youAvatar.setWinner(!1),this._opponentAvatar.setWinner(!0),this.setTintVersusText(!1);break;case tg.DRAW:default:this._youAvatar.setWinner(!1),this._opponentAvatar.setWinner(!1),this.setTintVersusText()}},n.hideContent=function(){this._youAvatar.hideContent(),this._opponentAvatar.hideContent(),this._versusText.setAlpha(0)},n.runEntranceAnimationVersusText=function(){var e=(0,a.Z)(r().mark((function e(){var t=this;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new(o())((function(e){t.scene.add.tween({targets:t.versusText,duration:100,ease:Phaser.Math.Easing.Sine.Out,props:{alpha:{from:0,to:1},y:{from:t.versusText.y+t.versusText.height/4,to:t.versusText.y}},onComplete:e})})));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),n.runEntranceAnimation=function(){var e=(0,a.Z)(r().mark((function e(){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o().all([this._youAvatar.runEntranceAnimation(),this._opponentAvatar.runEntranceAnimation()]);case 2:return e.next=4,this.runEntranceAnimationVersusText();case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),(0,ue.Z)(t,[{key:"youAvatar",get:function(){return this._youAvatar}},{key:"opponentAvatar",get:function(){return this._opponentAvatar}},{key:"versusText",get:function(){return this._versusText}}]),t}(Phaser.GameObjects.Container),hg=function(e){function t(t,n,a,i,r){var s;return(s=e.call(this,t)||this).playerStat=void 0,s.opponentStat=void 0,s.setSize(231,40),s.addIcon(n),s.createLabel(a),s.createPlayerStat(i),s.createOpponentStat(r),s}(0,f.Z)(t,e);var n=t.prototype;return n.addBackground=function(){var e="avatar-zone-background";if(!this.scene.textures.exists(e)){var t=this.width,n=this.height,a=this.scene.add.graphics();a.fillStyle(65280,.2),a.fillRect(0,0,t,n),a.generateTexture(e,t,n),a.destroy()}var i=this.scene.add.image(0,0,e);this.add(i)},n.addIcon=function(e){e.setWorldSize(24,24),this.add(e),Phaser.Display.Align.In.TopCenter(e,this)},n.createLabel=function(e){var t=this.scene.make.bitmapText({font:No.Z.PRIMARY.KEY,size:this.scene.fontSize(12),text:e,origin:{x:.5,y:.5}});this.add(t),Phaser.Display.Align.In.BottomCenter(t,this)},n.createPlayerStat=function(e){var t=this.scene.make.bitmapText({font:No.Z.BOLD.KEY,size:this.scene.fontSize(16),text:e,origin:{x:0,y:.5}});this.add(t),Phaser.Display.Align.In.LeftCenter(t,this),this.playerStat=t},n.createOpponentStat=function(e){var t=this.scene.make.bitmapText({font:No.Z.BOLD.KEY,size:this.scene.fontSize(16),text:e,origin:{x:1,y:.5}});this.add(t),Phaser.Display.Align.In.RightCenter(t,this),this.opponentStat=t},n.setPlayerStat=function(e){this.playerStat.setText(e)},n.setOpponentStat=function(e){this.opponentStat.setText(e)},t}(Phaser.GameObjects.Container),dg=fn.Z.GAMEPLAY_DEFAULT,pg=dg.KEY,fg=dg.FRAME,gg=function(e){function t(t){var n;return(n=e.call(this,t)||this)._scoreStat=void 0,n._movesStat=void 0,n._timeStat=void 0,n.lines=[],n.setSize(231,170),n.createScoreStatEntry(),n.createMovesStatEntry(),n.createTimeStatEntry(),n.createLines(),n}(0,f.Z)(t,e);var n=t.prototype;return n.addBackground=function(){var e="match-statistics-background";if(!this.scene.textures.exists(e)){var t=this.width,n=this.height,a=this.scene.add.graphics();a.fillStyle(65280,.2),a.fillRect(0,0,t,n),a.generateTexture(e,t,n),a.destroy()}var i=this.scene.add.image(0,0,e);this.add(i)},n.createScoreStatEntry=function(){var e=this.scene.add.image(0,0,pg,fg.MEDAL_STAR);this._scoreStat=new hg(this.scene,e,"Score","1234","687"),this.add(this._scoreStat),Phaser.Display.Align.In.TopCenter(this._scoreStat,this)},n.createMovesStatEntry=function(){var e=this.scene.add.image(0,0,pg,fg.ARROW_SWAP_HORIZONTAL);this._movesStat=new hg(this.scene,e,"Moves","335","687"),this.add(this._movesStat),this.alignUnder(this._movesStat,this._scoreStat,0,20)},n.createTimeStatEntry=function(){var e=this.scene.add.image(0,0,pg,fg.TIMER);this._timeStat=new hg(this.scene,e,"Time","07:25","09:45"),this.add(this._timeStat),this.alignUnder(this._timeStat,this._movesStat,0,20)},n.createLines=function(){var e=this;this.list.forEach((function(t){if(t instanceof hg){var n=e.scene.add.line(0,0,0,0,231,0,16777215,.3);e.add(n),e.lines.push(n),Phaser.Display.Align.In.BottomCenter(n,t,0,10)}}))},n.alignUnder=function(e,t,n,a){void 0===n&&(n=0),void 0===a&&(a=0);var i=(e.height+t.height)/2;Phaser.Display.Align.In.Center(e,t,0+n,i+a)},n.runEntranceAnimationLines=function(){var e=(0,a.Z)(r().mark((function e(){var t,n,a=this;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return 200,n=De()(t=this.lines).call(t,(function(e,t){return new(o())((function(n){a.scene.add.tween({targets:e,duration:200,delay:200*t/2,props:{alpha:{from:0,to:1},scaleX:{from:0,to:1}},onComplete:n})}))})),e.next=4,o().all(n);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.runEntranceAnimationStats=function(){var e=(0,a.Z)(r().mark((function e(){var t,n,a=this;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[this._scoreStat,this._movesStat,this._timeStat],200,n=De()(t).call(t,(function(e,t){return new(o())((function(n){a.scene.add.tween({targets:e,duration:200,delay:200*t/2,ease:Phaser.Math.Easing.Sine.Out,props:{alpha:{from:0,to:1},y:{from:e.y+e.height/2,to:e.y}},onComplete:n})}))})),e.next=5,o().all(n);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.hideContent=function(){this.lines.forEach((function(e){e.setAlpha(0),e.scaleX=0})),[this._scoreStat,this._movesStat,this._timeStat].forEach((function(e){return e.setAlpha(0)}))},n.runEntranceAnimation=function(){var e=(0,a.Z)(r().mark((function e(){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o().all([this.runEntranceAnimationStats(),this.runEntranceAnimationLines()]);case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),(0,ue.Z)(t,[{key:"scoreStat",get:function(){return this._scoreStat}},{key:"movesStat",get:function(){return this._movesStat}},{key:"timeStat",get:function(){return this._timeStat}}]),t}(Phaser.GameObjects.Container),mg=function(e){return e.NEW_GAME="new",e.CLOSE="close",e}({}),vg=function(e){function t(t){var n;return(n=e.call(this,t,143.5,48,16,16777215)||this).closeLabel=void 0,n.newGameLabel=void 0,n._buttonState=void 0,n.setSize(143.5,48),n.setName("NewGameButton"),n.createNewGameLabel(),n.createCloseLabel(),n.switchState(mg.NEW_GAME),n.initOnClick(),n.playPulsateAnimation(),n}(0,f.Z)(t,e);var n=t.prototype;return n.createNewGameLabel=function(){this.newGameLabel=new Ap(this.scene),this.add(this.newGameLabel)},n.createCloseLabel=function(){this.closeLabel=this.scene.make.bitmapText({font:No.Z.PRIMARY.KEY,size:this.scene.fontSize(16),text:"Close",origin:{x:.5,y:.5}}).setTint(43282),this.add(this.closeLabel),Phaser.Display.Align.In.Center(this.closeLabel,this)},n.initOnClick=function(){var e=this;this.onClick=(0,a.Z)(r().mark((function t(){var n;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e._buttonState!==mg.NEW_GAME){t.next=6;break}return n=e.scene,t.next=4,null==n?void 0:n.handlePlaySingle();case 4:t.next=7;break;case 6:e.switchState(mg.NEW_GAME);case 7:e.scene.screen.close(Qi.o4.PLAY_WITH_FRIEND_GAME_OVER_SCREEN);case 8:case"end":return t.stop()}}),t)})))},n.playPulsateAnimation=function(){new Xo.Z({targets:[this],duration:1e3,props:{scale:"*=1.05"}}).play()},n.hideContent=function(){this.setDisabled(!0)},n.runEntranceAnimation=function(){var e=(0,a.Z)(r().mark((function e(){var t=this;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new(o())((function(e){t.scene.add.tween({targets:t,alpha:1,duration:200,onStart:function(){t.setDisabled(!0)},onComplete:function(){t.setDisabled(!1),e()}})})));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),n.switchState=function(e){if(e!==this._buttonState)switch(e){case mg.CLOSE:this._buttonState=mg.CLOSE,this.closeLabel.revive(),this.newGameLabel.kill();break;case mg.NEW_GAME:this._buttonState=mg.NEW_GAME,this.closeLabel.kill(),this.newGameLabel.revive()}},t}(Zh.Z),yg=143.5,bg=function(e){function t(t){var n;return(n=e.call(this,t,yg,48)||this).background=void 0,n.border=void 0,n.labelContainer=void 0,n.setName("Share"),n.setSize(yg,48),n.createBackground(),n.createBorder(),n.createLabel(),n.initOnClick(),n}(0,f.Z)(t,e);var n=t.prototype;return n.createBackground=function(){this.background=new mh.Z(this.scene,0,0,yg,48,16,16777215,.24),this.add(this.background)},n.createBorder=function(){this.border=this.scene.add.graphics(),this.border.lineStyle(1,16777215).strokeRoundedRect(-71.75,-24,yg,48,16),this.add(this.border)},n.createLabel=function(){this.labelContainer=new Ap(this.scene,8,"Share",fn.Z.GAMEPLAY_DEFAULT.FRAME.IC_SHARE),this.labelContainer.clearTint(),this.labelContainer.getIcon().setTintFill(16777215),this.add(this.labelContainer)},n.initOnClick=function(){var e=this;this.onClick=function(){e.scene.storage.dispatch(Oc())}},n.hideContent=function(){this.setDisabled(!0)},n.runEntranceAnimation=function(){var e=(0,a.Z)(r().mark((function e(){var t=this;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new(o())((function(e){t.scene.add.tween({targets:t,alpha:1,duration:200,onStart:function(){t.setDisabled(!0)},onComplete:function(){t.setDisabled(!1),e()}})})));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),t}(Wl.Z),Ag=function(e){function t(t){var n;return(n=e.call(this,t)||this)._newGameButton=void 0,n._shareButton=void 0,n._stat=void 0,n.setSize(303,244),n.createMatchStatistics(),n.createNewGameButton(),n.createShareButton(),n}(0,f.Z)(t,e);var n=t.prototype;return n.createNewGameButton=function(){var e=new vg(this.scene);this.add(e),Phaser.Display.Align.In.BottomRight(e,this),this._newGameButton=e},n.createShareButton=function(){var e=new bg(this.scene);this.add(e),Phaser.Display.Align.In.BottomLeft(e,this),this._shareButton=e},n.createMatchStatistics=function(){var e=new gg(this.scene);this.add(e),Phaser.Display.Align.In.TopCenter(e,this),this._stat=e},n.hideContent=function(){this._stat.hideContent(),this._newGameButton.hideContent(),this._shareButton.hideContent()},n.runEntranceAnimation=function(){var e=(0,a.Z)(r().mark((function e(){var t;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._stat.runEntranceAnimation();case 2:return t=this.scene,e.next=5,t.gameplay.finishGame();case 5:return e.next=7,o().all([this._newGameButton.runEntranceAnimation(),this._shareButton.runEntranceAnimation()]);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),(0,ue.Z)(t,[{key:"newGameButton",get:function(){return this._newGameButton}},{key:"shareButton",get:function(){return this._shareButton}},{key:"stat",get:function(){return this._stat}}]),t}(Phaser.GameObjects.Container),Sg="Waiting",Eg=function(e){function t(t){var n;return(n=e.call(this,t)||this).winLoseText=void 0,n.modeText=void 0,n.waitingAnimationEvent=void 0,n.waitingAnimation=void 0,n.setSize(303,60),n.createWinLoseText(),n.createModeText(),n}(0,f.Z)(t,e);var n=t.prototype;return n.createWinLoseText=function(){var e=this.scene.make.bitmapText({font:No.Z.BOLD.KEY,size:this.scene.fontSize(24),origin:{x:.5,y:.5},text:"You win"});this.add(e),Phaser.Display.Align.In.TopCenter(e,this),this.winLoseText=e},n.createModeText=function(){var e=this.scene.make.bitmapText({font:No.Z.PRIMARY.KEY,size:this.scene.fontSize(16),origin:{x:.5,y:.5},text:"Standard mode, Draw 1"});this.add(e),Phaser.Display.Align.In.BottomCenter(e,this),this.modeText=e},n.addBackground=function(){var e="popup-header-background";if(!this.scene.textures.exists(e)){var t=this.width,n=this.height,a=this.scene.add.graphics();a.fillStyle(65280,.2),a.fillRect(0,0,t,n),a.generateTexture(e,t,n),a.destroy()}var i=this.scene.add.image(0,0,e);this.add(i)},n.updateWinLoseText=function(e){switch(this.stopWaitingAnimation(),e){case tg.WIN:this.winLoseText.setText("You win");break;case tg.LOSE:this.winLoseText.setText("You lose");break;case tg.DRAW:this.winLoseText.setText("Draw");break;case tg.WAITING_FOR_OPPONENT:default:this.winLoseText.setText(Sg),this.playWaitingAnimation()}},n.playWaitingAnimation=function(){var e=this,t=0;this.waitingAnimationEvent=this.scene.time.addEvent({delay:500,repeat:-1,callback:function(){t=(t+1)%4;var n=Array(t+1).join(".");e.winLoseText.setText(Sg+n)}}),this.waitingAnimation=this.scene.add.tween({targets:this.winLoseText,alpha:.5,repeat:-1,yoyo:!0,delay:250,ease:Phaser.Math.Easing.Sine.InOut})},n.stopWaitingAnimation=function(){if(this.waitingAnimationEvent)try{this.waitingAnimationEvent.remove(),this.waitingAnimationEvent.destroy()}catch(e){console.log("cannot remove event")}if(this.waitingAnimation)try{this.waitingAnimation.remove(),this.waitingAnimation.destroy()}catch(t){console.log("cannot remove animation")}this.winLoseText.setAlpha(1)},n.updateDrawMode=function(e){this.modeText.setText("Standard mode, Draw "+e)},t}(Phaser.GameObjects.Container),wg=function(e){function t(t,n,a){var i;return(i=e.call(this,t,n,a)||this)._header=void 0,i._avatarZone=void 0,i._popupBody=void 0,i.background=void 0,i._darkFilter=void 0,i.setSize(343,486),i.createBackground(),i.createDarkFilter(),i.createHeader(),i.createAvatarZone(),i.createBody(),i}(0,f.Z)(t,e);var n=t.prototype;return n.createBackground=function(){var e=new Xl(this.scene,{key:"play-with-friend-game-over-block-background",radius:6,border:24,width:this.width,height:this.height});this.add(e),this.background=e},n.createDarkFilter=function(){var e=nf.Challenge.POPUP;if(!this.scene.textures.exists(e)){var t=this.background,n=t.width,a=t.height,i=this.scene.add.graphics();i.fillStyle(ef,tf),i.fillRoundedRect(0,0,n,a,24),i.generateTexture(e,n,a),i.destroy()}var r=this.scene.add.image(0,0,e);r.kill(),this._darkFilter=r,this.add(r)},n.createHeader=function(){this._header=new Eg(this.scene),this.add(this._header),Phaser.Display.Align.In.TopCenter(this._header,this,0,-20)},n.createAvatarZone=function(){this._avatarZone=new lg(this.scene),this.add(this._avatarZone),Phaser.Display.Align.In.TopCenter(this._avatarZone,this,0,-104)},n.createBody=function(){this._popupBody=new Ag(this.scene),this.add(this._popupBody),Phaser.Display.Align.In.BottomCenter(this._popupBody,this,0,-20)},n.hideContent=function(){this._avatarZone.hideContent(),this._popupBody.hideContent()},n.runEntranceAnimation=function(){var e=(0,a.Z)(r().mark((function e(){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._avatarZone.runEntranceAnimation();case 2:return e.next=4,this._popupBody.runEntranceAnimation();case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),(0,ue.Z)(t,[{key:"header",get:function(){return this._header}},{key:"avatarZone",get:function(){return this._avatarZone}},{key:"popupBody",get:function(){return this._popupBody}},{key:"darkFilter",get:function(){return this._darkFilter}}]),t}(Phaser.GameObjects.Container),Tg=fn.Z.GAMEPLAY_DEFAULT,Ig=Tg.KEY,Cg=Tg.FRAME,kg=function(e){function t(t){var n;return(n=e.call(this,t)||this).background=void 0,n._popup=void 0,n.setContainerSize(),n.createPopup(),n.createDevButtons(),n}(0,f.Z)(t,e);var n=t.prototype;return n.setContainerSize=function(){var e=this.scene.gameZone,t=e.width,n=e.height;this.setSize(t,n)},n.addBackground=function(){var e="challenge-result-container-background";if(!this.scene.textures.exists(e)){var t=this.width,n=this.height,a=this.scene.add.graphics();a.fillStyle(859421,1),a.fillRect(0,0,t,n),a.generateTexture(e,t,n),a.destroy()}this.background=this.scene.add.image(0,0,e),this.background.kill(),this.add(this.background)},n.createDevButtons=function(){GameCore.Utils.Valid.isDebugger()&&this.createCloseButton()},n.createCloseButton=function(){var e=this,t=new Wl.Z(this.scene,40,40),n=this.scene.add.image(0,0,Ig,Cg.IC_BG_OFF);n.setWorldSize(40,40);var a=this.scene.make.bitmapText({font:No.Z.PRIMARY.KEY,size:this.scene.fontSize(10),text:"Close",origin:{x:.5,y:.5}});a.setCenterAlign(),t.add([n,a]),this.add(t),Phaser.Display.Align.In.BottomLeft(t,this,0,-200),t.onClick=function(){e.scene.screen.close(Qi.o4.PLAY_WITH_FRIEND_GAME_OVER_SCREEN)}},n.createPopup=function(){this._popup=new wg(this.scene),this.add(this._popup),Phaser.Display.Align.In.Center(this._popup,this,0,0)},n.hideContent=function(){this._popup.hideContent()},n.runEntranceAnimation=function(){var e=(0,a.Z)(r().mark((function e(){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._popup.runEntranceAnimation();case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),(0,ue.Z)(t,[{key:"popup",get:function(){return this._popup}}]),t}(Phaser.GameObjects.Container),xg=function(e){function t(t){var n;return(n=e.call(this,t)||this)._beams=void 0,n._bunting=void 0,n.setSize(375,295),n.createBeams(),n.createBunting(),n}(0,f.Z)(t,e);var n=t.prototype;return n.createBeams=function(){this._beams=new Lp(this.scene),this.add(this._beams),Phaser.Display.Align.In.TopCenter(this._beams,this)},n.createBunting=function(){this._bunting=new Jp(this.scene),this.add(this._bunting),Phaser.Display.Align.In.TopCenter(this._bunting,this)},(0,ue.Z)(t,[{key:"beams",get:function(){return this._beams}},{key:"bunting",get:function(){return this._bunting}}]),t}(Phaser.GameObjects.Container),Pg=function(e){function t(t){var n;return(n=e.call(this,t)||this)._beams=void 0,n._lightnings=void 0,n.setSize(375,416),n.createBeams(),n.createLightnings(),n}(0,f.Z)(t,e);var n=t.prototype;return n.createBeams=function(){this._beams=new Wf(this.scene),this.add(this._beams),Phaser.Display.Align.In.TopCenter(this._beams,this)},n.createLightnings=function(){this._lightnings=new Lf(this.scene),this.add(this._lightnings),Phaser.Display.Align.In.TopCenter(this._lightnings,this)},(0,ue.Z)(t,[{key:"beams",get:function(){return this._beams}},{key:"lightnings",get:function(){return this._lightnings}}]),t}(Phaser.GameObjects.Container),_g="Waiting",Og=new(function(){function e(){this._state=void 0,this._state=tg.WIN}return(0,ue.Z)(e,[{key:"state",get:function(){return this._state},set:function(e){var t=game.globalScene.getActiveScene().screen.get(Qi.o4.PLAY_WITH_FRIEND_GAME_OVER_SCREEN);t instanceof Rg&&t.setGameOverInfo({state:e}),this._state=e}}]),e}());window.resultStateManager=Og;var Rg=function(e){function t(t,n,a,i){var r;return(r=e.call(this,t,n,a,i)||this).slideInAnimation=void 0,r.fadeInAnimation=void 0,r.fadeOutAnimation=void 0,r.playWithFriendGameOverContainer=void 0,r.winDecoration=void 0,r.loseDecoration=void 0,r.footer=void 0,r.closed=!1,r.setBackground=function(){var e=r.scene.theme.getCurrentThemeConfig().backgroundKey;r.background.setTexture(e);var t=r.scene.gameZone,n=t.width,a=t.height;r.background.setWorldSize(n,a),r.scene.world.isLandscape()&&r.background.setScale(r.background.scaleY,r.background.scaleY),r.scene.events.on(Ti.BACKGROUND_CHANGED,(function(e){r.background.setTexture(e),r.background.setWorldSize(n,a),r.scene.world.isLandscape()&&r.background.setScale(r.background.scaleY,r.background.scaleY)}))},r.handleClickTournaments=function(){r.scene.time.delayedCall(100,(function(){r.closed||r.close()}))},r.scene instanceof Nm&&r.setBackground(),r.setDepth(Qi.Ks.POPUP),r.createContainer(),r.createBanners(),r.createFooter(),r.createBottomLogo(),gn.Z.removeObject(r.background),r}(0,f.Z)(t,e);var n=t.prototype;return n.open=function(t){e.prototype.open.call(this,t),this.closed=!1,this.isGameZoneTooWide()&&(this.winDecoration.kill(),this.loseDecoration.kill()),this.background.setAlpha(1),this.runOpenAnimation(),Og.state!==tg.LOSE&&(this.playConfettiAnimation(),this.updateResultInfo())},n.close=function(){this.closed=!0,this.runCloseAnimation(),this.stopConfettiAnimation()},n.runOpenAnimation=function(){var e=(0,a.Z)(r().mark((function e(){var t,n,i,s,o=this;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==(t=this.slideInAnimation)||null==(n=t.tween)||!n.isPlaying()){e.next=2;break}return e.abrupt("return");case 2:if(this.scene.audio.playSound($i.Z.POPUP_SHOW),i=this.scene.ads.getBannerHeight(),s=i,this.playWithFriendGameOverContainer.setAlpha(0).setY(s).hideContent(),this.winDecoration.bunting.stopWavingAnimation(),this.loseDecoration.lightnings.hideContent(),this.slideInAnimation||(this.slideInAnimation=new Po.Z({targets:[this.playWithFriendGameOverContainer],props:{y:{from:s,to:-i/2-21,ease:Phaser.Math.Easing.Back.Out},alpha:{from:0,to:1}},duration:300,onComplete:function(){var e=(0,a.Z)(r().mark((function e(){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.playWithFriendGameOverContainer.runEntranceAnimation();case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()})),this.fadeInAnimation||(this.fadeInAnimation=new bc.Z({targets:[this],duration:300})),this.fadeInAnimation.play(),!this.winDecoration.active){e.next=15;break}return e.next=14,this.winDecoration.bunting.runEntranceAnimation();case 14:this.winDecoration.bunting.playWavingAnimation();case 15:if(!this.loseDecoration.active){e.next=18;break}return e.next=18,this.loseDecoration.lightnings.runEntranceAnimation();case 18:this.slideInAnimation.play();case 19:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.runCloseAnimation=function(){var t,n,a=this;null!=(t=this.fadeOutAnimation)&&null!=(n=t.tween)&&n.isPlaying()||(this.scene.audio.playSound($i.Z.POPUP_OFF),this.fadeOutAnimation||(this.fadeOutAnimation=new Fh.Z({targets:[this],props:{alpha:0},duration:300,onComplete:function(){gn.Z.closeScreen(a),e.prototype.close.call(a)}})),this.fadeOutAnimation.play())},n.createBanners=function(){this.createRibbonBanner(),this.createLightningThunderBanner()},n.createRibbonBanner=function(){this.winDecoration=new xg(this.scene),this.winDecoration.kill(),Phaser.Display.Align.In.TopCenter(this.winDecoration,this),this.add(this.winDecoration)},n.createLightningThunderBanner=function(){this.loseDecoration=new Pg(this.scene),this.loseDecoration.kill(),Phaser.Display.Align.In.TopCenter(this.loseDecoration,this),this.add(this.loseDecoration)},n.createContainer=function(){this.playWithFriendGameOverContainer=new kg(this.scene),this.add(this.playWithFriendGameOverContainer)},n.createFooter=function(){var e=this;this.footer=new bf(this.scene,!1,Qi.o4.PLAY_WITH_FRIEND_GAME_OVER_SCREEN),this.add(this.footer),this.bringToTop(this.footer),this.footer.setInteractive();var t=this.scene.ads.getBannerHeight(),n=this.scene.gameZone.width>375?-10:0;Phaser.Display.Align.In.BottomCenter(this.footer,this.background,0,-t+n),this.footer.playBtn.onClick=(0,a.Z)(r().mark((function t(){return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.scene.screen.openAsync(Qi.o4.PLAY_SCREEN);case 2:t.sent.newGameStarted&&e.scene.screen.close(Qi.o4.PLAY_WITH_FRIEND_GAME_OVER_SCREEN);case 4:case"end":return t.stop()}}),t)})))},n.createBottomLogo=function(){if(!this.scene.world.isLandscape()){var e=new wf(this.scene);Phaser.Display.Align.In.BottomCenter(e,this),this.add(e)}},n.isGameZoneTooWide=function(){return this.scene.gameZone.width>450},n.playConfettiAnimation=function(){if(this.scene instanceof Nm){var e=this.scene.gameplay.confettiSmallFallDown;this.scene.children.bringToTop(e),e.run(8,0,0)}},n.stopConfettiAnimation=function(){this.scene instanceof Nm&&this.scene.gameplay.confettiSmallFallDown.stop()},n.updateResultInfo=function(){var e=this.scene.storage.getState(),t=ss(e),n=Ss(e),a=this.scene.player.getPlayer().playerId,i=gs(e).playerId,r=(n[a]||{}).score,s=(n[i]||{}).score,o=vs(e,{playerId:a}),c=ys(e,{opponentId:i});t===bi&&(o=!0,c=!0),console.log({isPlayerFinish:o,isOpponentFinish:c});var u=ds(e);console.warn({matchData:u});var l,h=u.whitePlayerId,d=u.extraData,p=void 0===d?{}:d,f=a===h,g=f?p.blackPlayerData:p.whitePlayerData,m=(f?p.whitePlayerData:p.blackPlayerData)||{},v=m.moves,y=m.time,b=g||{},A=b.moves,S=b.time,E=o&&c,w=E&&r>s,T=E&&r<s;console.log({isPlayerWin:w,isOpponentWin:T}),l=E?w&&T?tg.DRAW:w?tg.WIN:tg.LOSE:tg.WAITING_FOR_OPPONENT,console.log({playerScore:r,opponentScore:s}),this.setGameOverInfo({state:l,playerScore:o?r:void 0,opponentScore:c?s:void 0,playerMoves:o?v:void 0,opponentMoves:c?A:void 0,playerTime:o?y:void 0,opponentTime:c?S:void 0}),this.scene.storage.dispatch(eo(!1))},n.setGameOverInfo=function(e){var t=this.playWithFriendGameOverContainer.popup,n=t.header,a=t.avatarZone,i=t.popupBody,r=a.youAvatar,s=a.opponentAvatar,o=this.scene.player.getPlayer(),c=o.playerId,u=o.photo,l=o.name;r.avatar.loadPhoto(c,u,100),r.username.setText(l);var h=this.scene.storage.getState(),d=ds(h),p=d.whitePlayerId,f=d.blackPlayerId,g=c===p?f:p,m=this.scene.game.player.getConnectedPlayers()[g]||gs(h),v=m.playerId,y=m.photo,b=m.name;if(s.avatar.loadPhoto(v,y,100),s.username.setText(b),e.state)switch(n.updateWinLoseText(e.state),a.updateState(e.state),e.state){case tg.LOSE:this.winDecoration.kill(),this.loseDecoration.revive(),this.enableDarkBackground(),this.stopConfettiAnimation();break;case tg.WIN:case tg.DRAW:this.winDecoration.revive(),this.loseDecoration.kill(),this.enableDarkBackground(!1);break;case tg.WAITING_FOR_OPPONENT:default:this.winDecoration.kill(),this.loseDecoration.kill(),this.stopConfettiAnimation(),this.enableDarkBackground(!1)}if(e.draw)n.updateDrawMode(e.draw);else{var A=this.scene.player.getPlayerSettings().drawMode3?3:1;n.updateDrawMode(A)}var S=i.stat,E=S.scoreStat,w=S.movesStat,T=S.timeStat;void 0!==e.playerScore?E.setPlayerStat(""+e.playerScore):E.setPlayerStat(_g),void 0!==e.opponentScore?E.setOpponentStat(""+e.opponentScore):E.setOpponentStat(_g),void 0!==e.playerMoves?w.setPlayerStat(""+e.playerMoves):w.setPlayerStat(_g),void 0!==e.opponentMoves?w.setOpponentStat(""+e.opponentMoves):w.setOpponentStat(_g),void 0!==e.playerTime?T.setPlayerStat((0,tr.F0)(e.playerTime,!1)):T.setPlayerStat(_g),void 0!==e.opponentTime?T.setOpponentStat((0,tr.F0)(e.opponentTime,!1)):T.setOpponentStat(_g)},n.enableDarkBackground=function(e){void 0===e&&(e=!0),gn.Z.openScreen(this,e);var t=this.playWithFriendGameOverContainer.popup.background;e?(this.background.setPipeline("Grayscale"),t.setPipeline("Grayscale")):(this.background.resetPipeline(),t.resetPipeline())},n.updateFinishingChallenge=function(){this.playWithFriendGameOverContainer.popup.popupBody.newGameButton.switchState(mg.CLOSE)},t}(GameCore.Screen),Dg=function(){function e(){this.payload=void 0}var t=e.prototype;return t.getData=function(){var e=(0,a.Z)(r().mark((function e(){var t,n,a;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.payload){e.next=2;break}return e.abrupt("return",this.payload);case 2:return e.next=4,o().all([this.getAPITournamentData(),this.getFacebookTournamentData()]);case 4:return t=e.sent,n=t[0],a=t[1],this.payload=n||a,e.abrupt("return",this.payload);case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),t.setData=function(e){this.payload=e},t.clearData=function(){this.payload=void 0},t.getAPITournamentData=function(){var e=(0,a.Z)(r().mark((function e(){var t,n,a;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=window.game.storage.getState(),n=Ur(t),e.next=4,(0,Hr.Iy)();case 4:if(0!==(a=e.sent).length){e.next=7;break}return e.abrupt("return",void 0);case 7:return e.abrupt("return",L()(a).call(a,(function(e){return e.id===n})));case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),t.getFacebookTournamentData=function(){var e=(0,a.Z)(r().mark((function e(){var t,n,a,i,s;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,window.game.facebook.getTournamentAsync();case 2:if(t=e.sent,n=t.getPayload()){e.next=6;break}return e.abrupt("return",void 0);case 6:if(a=JSON.parse(n),i=a.playerName,a.leaderboardId){e.next=10;break}return e.abrupt("return",void 0);case 10:return s={id:t.getID(),title:t.getTitle()||i+"'s Tournament",payload:a,endTime:t.getEndTime(),contextID:t.getContextID()},e.abrupt("return",s);case 12:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),e}(),Lg=new Dg,Bg=n(560),Ng=fn.Z.GAMEPLAY_DEFAULT,Mg=Ng.KEY,Gg=Ng.FRAME,Fg=function(e){function t(t){var n;return(n=e.call(this,t)||this).medalNo123=void 0,n.customizedMedal=void 0,n.rankLabel=void 0,n.rank=1,n.setSize(20,20),n.createMedal123(),n.createCustomizedMedal(),n.createRankLabel(),n}(0,f.Z)(t,e);var n=t.prototype;return n.getRank=function(){return this.rank},n.setRank=function(e){var t=function(e){return e>99?"99+":0===e?"?":e.toString()}(e);switch(this.rank=e,this.rankLabel.setText(t),this.medalNo123.kill(),this.customizedMedal.kill(),t){case"1":this.medalNo123.revive(),this.medalNo123.setFrame(Gg.GOLD),this.rankLabel.setTint(16777215);break;case"2":this.medalNo123.revive(),this.medalNo123.setFrame(Gg.SILVER),this.rankLabel.setTint(5658198);break;case"3":this.medalNo123.revive(),this.medalNo123.setFrame(Gg.BRONZE),this.rankLabel.setTint(16777215);break;default:this.customizedMedal.revive(),this.rankLabel.setTint(3774208)}},n.createMedal123=function(){this.medalNo123=this.scene.add.image(0,0,Mg,Gg.GOLD),this.medalNo123.setWorldSize(19,20.5),this.add(this.medalNo123)},n.createCustomizedMedal=function(){this.customizedMedal=this.scene.add.image(0,0,Mg,Gg.CUSTOM_MEDAL),this.customizedMedal.setWorldSize(20,20),this.add(this.customizedMedal)},n.createRankLabel=function(){this.rankLabel=this.scene.make.bitmapText({font:No.Z.PRIMARY.KEY,size:this.scene.fontSize(10),origin:{x:.5,y:.5},text:""+this.rank}),this.add(this.rankLabel)},t}(Phaser.GameObjects.Container);var Zg=fn.Z.DEFAULT,Ug=Zg.KEY,Wg=Zg.FRAME,Hg=fn.Z.GAMEPLAY_DEFAULT,zg=Hg.KEY,Yg=Hg.FRAME,Kg=function(e){function t(t,n){var a;return void 0===n&&(n=!1),(a=e.call(this,t)||this).scene=void 0,a._isPlayer=!1,a.normalPlayerBackground=void 0,a.border=void 0,a.avatar=void 0,a.username=void 0,a.score=void 0,a.medalIcon=void 0,a.scoreIcon=void 0,a.payload=void 0,a.instantPlayerVisualIndicator=!1,a.scene=t,a.setSize(303,44),a.createNormalPlayerBackground(),a.createBorder(),a.createMedalIcon(),a.createAvatar(),a.createUsername(),a.createScore(),a.createScoreIcon(),a.alignComponents(),a.isPlayer=n,a}(0,f.Z)(t,e);var n=t.prototype;return n.createNormalPlayerBackground=function(){this.normalPlayerBackground=new mh.Z(this.scene,0,0,this.width,this.height,8,16777215).setAlpha(1),this.add(this.normalPlayerBackground)},n.createBorder=function(){var e=this.scene.add.graphics();e.lineStyle(1,16777215),e.strokeRoundedRect(-this.width/2,-this.height/2,this.width,this.height,8),this.add(e),this.border=e},n.createAvatar=function(){this.avatar=new wc(this.scene,{key:Ug,background:Wg.BLANK,width:42,height:42,loadDelay:100}),this.avatar.update(),this.avatar.background.kill(),this.avatar.loadPhoto(Ui.Z.AVATAR.KEY,Ui.Z.AVATAR.FILE,100),this.add(this.avatar)},n.createUsername=function(){this.username=this.scene.make.text({style:{fontFamily:No.Z.FONT_FAMILY},origin:{x:0,y:.5}}),this.username.setHighQuality(),this.username.setFontSize(16),this.add(this.username)},n.createScore=function(){this.score=this.scene.make.bitmapText({font:No.Z.PRIMARY.KEY,size:this.scene.fontSize(14),origin:{x:1,y:.5}}),this.add(this.score),this.setScore(0)},n.createScoreIcon=function(){this.scoreIcon=this.scene.add.image(0,0,zg,Yg.MEDAL_STAR),this.scoreIcon.setWorldSize(20,20),this.add(this.scoreIcon)},n.createMedalIcon=function(){this.medalIcon=new Fg(this.scene),this.medalIcon.kill(),this.add(this.medalIcon)},n.setScore=function(e){this.score.setText(""+e)},n.setUsername=function(e){var t=GameCore.Utils.String.getShortName(e,12),n=GameCore.Utils.String.removeDiacritics(t);this.username.setText(n)},n.getTimerIcon=function(){return this.scoreIcon},n.updateData=function(e){var t,n,a=e.playerId,i=void 0===a?"10":a,r=e.name,s=void 0===r?"-----":r,o=e.photo,c=void 0===o?"":o,u=e.score,l=void 0===u?0:u,h=e.rank,d=void 0===h?0:h;this.payload&&(t=e,n=this.payload,t.playerId===n.playerId&&t.photo===n.photo&&t.score===n.score&&t.rank===n.rank&&t.name===n.name)||(this.payload=e,this.isPlayer=i===this.scene.player.getPlayerId(),this.scoreIcon.setAlpha(0),this.score.setAlpha(0),this.username.setAlpha(0),this.avatar.setAlpha(0),this.setScore(l),this.medalIcon.setRank(d),this.updateNormalPlayerBackground(d),0===l?(this.setUsername("-------"),this.avatar.loadPhoto(Ui.Z.AVATAR.KEY,Ui.Z.AVATAR.FILE,100)):(this.setUsername(s),this.avatar.loadPhoto(i,c,100)),this.medalIcon.revive(),Phaser.Display.Align.To.LeftCenter(this.scoreIcon,this.score,8),this.playRecentlyUpdatedComponentEntrancesAnimation())},n.getBackgroundColorViaRank=function(e){switch(e){case 1:return 16771094;case 2:return 16777215;case 3:return 14265494;default:return 0}},n.getBackgroundAlphaViaRank=function(e){return 1===e||2===e||3===e?.32:.25},n.updateNormalPlayerBackground=function(e){var t=this.getBackgroundColorViaRank(e),n=this.getBackgroundAlphaViaRank(e);this.normalPlayerBackground.setFillStyle(t,n)},n.alignComponents=function(){Phaser.Display.Align.In.LeftCenter(this.medalIcon,this,-8),Phaser.Display.Align.To.RightCenter(this.avatar,this.medalIcon,6),Phaser.Display.Align.To.RightCenter(this.username,this.avatar,3),Phaser.Display.Align.In.RightCenter(this.score,this,-8),Phaser.Display.Align.To.LeftCenter(this.scoreIcon,this.score,8)},n.playRecentlyUpdatedComponentEntrancesAnimation=function(){this.scene.add.tween({targets:[this.scoreIcon,this.score,this.username,this.avatar],props:{alpha:{from:0,to:1}},duration:150})},n.hideContent=function(){var e;if(this._isPlayer){this.border.kill(),this.normalPlayerBackground.revive();var t=this.getBackgroundAlphaViaRank((null==(e=this.payload)?void 0:e.rank)||1);this.normalPlayerBackground.setAlpha(t)}},n.showSpecialBackgroundAnimation=function(){var e=(0,a.Z)(r().mark((function e(){var t=this;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new(o())((function(e){var n=[t.border];t.scene.add.tween({targets:n,duration:200,onStart:function(){n.forEach((function(e){return e.revive()}))},props:{alpha:{from:0,to:.25}},onComplete:e})})));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),n.runScalingAnimation=function(){var e=(0,a.Z)(r().mark((function e(){var t=this;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new(o())((function(e){t.scene.add.tween({targets:t,duration:200,ease:Phaser.Math.Easing.Cubic.In,props:{scale:.95},onComplete:function(){t.scene.add.tween({targets:t,ease:Phaser.Math.Easing.Elastic.Out,easeParams:[.1,.45],props:{scale:1},onComplete:e})}})})));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),n.runEntranceAnimation=function(){var e=(0,a.Z)(r().mark((function e(){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._isPlayer){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,o().all([this.showSpecialBackgroundAnimation(),this.runScalingAnimation()]);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),(0,ue.Z)(t,[{key:"isPlayer",get:function(){return this._isPlayer},set:function(e){this._isPlayer=e,this._isPlayer&&this.instantPlayerVisualIndicator?(this.border.revive(),this.normalPlayerBackground.kill()):(this.border.kill(),this.normalPlayerBackground.revive())}}]),t}(Phaser.GameObjects.Container);var Vg=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n.leaders=[],n.loading=void 0,n.payload=[],n.scene=t,n.createLeaders(),n.alignLeaders(),n.createLoading(),n}(0,f.Z)(t,e);var n=t.prototype;return n.updateLeaders=function(e){(function(e,t){var n,a;if(e.length!==t.length)return!1;for(var i=Pa()(n=E()(e).call(e)).call(n,(function(e,t){return e.rank-t.rank})),r=Pa()(a=E()(t).call(t)).call(a,(function(e,t){return e.rank-t.rank})),s=0;s<i.length;s++){var o=i[s],c=r[s];if(o.playerId!==c.playerId||o.photo!==c.photo||o.score!==c.score||o.rank!==c.rank||o.name!==c.name)return!1}return!0})(this.payload,e)||(this.payload=e,this.leaders.forEach((function(t,n){t.updateData((0,p.Z)({},e[n]))})))},n.createLeaders=function(){for(var e=0;e<4;e++){var t=new Kg(this.scene);this.leaders.push(t),3===e&&(t.isPlayer=!0);var n={playerId:e.toString(),photo:"",score:0,rank:e+1,name:"player"};t.updateData(n)}this.add(this.leaders)},n.alignLeaders=function(){var e=this,t=this.leaders.length,n=t*this.leaders[0].height+8*(t-1);this.setSize(303,n),this.leaders.forEach((function(t,n){0!==n?Phaser.Display.Align.To.BottomCenter(t,e.leaders[n-1],0,8):Phaser.Display.Align.In.TopCenter(t,e)}))},n.createLoading=function(){this.loading=new Bg.Z(this.scene),this.loading.revive(),this.add(this.loading)},n.hideContent=function(){this.leaders.forEach((function(e){return e.setAlpha(0)})),this.leaders.forEach((function(e){return e.hideContent()}))},n.runEntranceAnimation=function(){var e=(0,a.Z)(r().mark((function e(){var t,n,a,i,s=this;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=De()(t=this.leaders).call(t,(function(e,t){return new(o())((function(n){s.scene.add.tween({targets:[e],duration:250,delay:250*t/2,ease:Phaser.Math.Easing.Cubic.Out,props:{alpha:{from:0,to:1},y:{from:e.y+e.height/2,to:e.y},scale:{from:.85,to:1,ease:Phaser.Math.Easing.Elastic.Out,easeParams:[.1,.45],duration:1e3}},onComplete:n})}))})),e.next=3,o().all(a);case 3:return i=De()(n=this.leaders).call(n,(function(e){return e.runEntranceAnimation()})),e.next=6,o().all(i);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),t}(Phaser.GameObjects.Container);for(var jg="This competition is over",Xg=function(e){function t(t){var n;return(n=e.call(this,t)||this).endTime=void 0,n.countdownTimer=void 0,n.timerText=void 0,n.updateCountdown=(0,a.Z)(r().mark((function e(){var t,a,i,s;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=Date.now(),a=1e3*n.endTime-t,i=Math.round(Math.abs(a)/864e5),a<0&&(a=0),0!==a){e.next=7;break}return n.timerText.setText(jg),e.abrupt("return");case 7:a>=864e5?(s=1===i,n.timerText.setText("Competition ends in "+i+" "+(s?"day":"days"))):n.timerText.setText("Competition ends in "+(0,tr.F0)(Math.abs(a),!0));case 8:case"end":return e.stop()}}),e)}))),n.setSize(375,30),n.createTimerContainer(),n.createCountdownTimer(),t.add.existing((0,Hi.Z)(n)),n}(0,f.Z)(t,e);var n=t.prototype;return n.createTimerContainer=function(){this.timerText=this.scene.make.bitmapText({font:No.Z.PRIMARY.KEY,size:this.scene.fontSize(15.5),origin:{x:.5,y:.5}}),this.timerText.setTint(16579837),this.add([this.timerText])},n.createCountdownTimer=function(){var e;void 0!=this.endTime&&(0!=this.endTime?(null==(e=this.countdownTimer)||e.destroy(),this.countdownTimer=this.scene.time.addEvent({loop:!0,delay:1e3,startAt:1e3,callback:this.updateCountdown})):this.timerText.setText(jg))},n.setCountdown=function(e){this.endTime=e,this.createCountdownTimer()},n.getRemain=function(){if(void 0!=this.endTime){var e=Date.now(),t=1e3*this.endTime-e;return t<0?0:t}},t}(Phaser.GameObjects.Container),qg=Xg,Jg=fn.Z.GAMEPLAY_DEFAULT,Qg=Jg.KEY,$g=Jg.FRAME,em=Qp,tm=uh.TOURNAMENT_BLOCK.TITLE,nm=16777215,am=em.WIDTH,im=143.5,rm=48,sm={playerId:"10",name:"???",photo:"",score:0,rank:0},om=[],cm=0;cm<4;cm++)om.push((0,p.Z)({},sm,{rank:cm+1}));var um=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n.title=void 0,n.timer=void 0,n.topLine=void 0,n.bottomLine=void 0,n.leaderList=void 0,n.rematchButton=void 0,n.newGameButton=void 0,n.lines=[],n.buttons=[],n.scene=t,n.setSize(343,418),n.createBackground(),n.createTitle(),n.createTimer(),n.createTopLine(),n.createLeaderList(),n.createBottomLine(),n.createRematchButton(),n.createNewGameButton(),n.alignComponents(),n.createCloseButton(),n}(0,f.Z)(t,e);var n=t.prototype;return n.createBackground=function(){this.setSize(this.width,this.height);var e=new Xl(this.scene,{key:"tournament-result-container",radius:6,border:24,width:this.width,height:this.height});this.add(e)},n.createTitle=function(){this.title=this.scene.make.bitmapText({font:No.Z.BOLD.KEY,size:this.scene.fontSize(tm),text:"Summer Tournament",origin:{x:.5,y:.5}}),this.add(this.title)},n.createTimer=function(){this.timer=new qg(this.scene),this.add(this.timer)},n.createTopLine=function(){this.topLine=this.scene.add.line(0,0,0,0,em.WIDTH,0,nm,.2),this.add(this.topLine),this.lines.push(this.topLine)},n.createLeaderList=function(){this.leaderList=new Vg(this.scene),this.add(this.leaderList)},n.createBottomLine=function(){this.bottomLine=this.scene.add.line(0,0,0,0,em.WIDTH,0,nm,.2),this.add(this.bottomLine),this.lines.push(this.bottomLine)},n.createRematchButton=function(){var e=this;this.rematchButton=new Wl.Z(this.scene,im,rm),this.rematchButton.onClick=function(){e.scene instanceof Nm&&e.scene.gameplay.replayGame(),e.scene.screen.close(Qi.o4.TOURNAMENTS_RESULT_SCREEN)},this.rematchButton.setName("RetryTournament");var t=new mh.Z(this.scene,0,0,im,rm,16,16777215,.24),n=this.scene.add.graphics();n.lineStyle(1,16777215),n.strokeRoundedRect(-71.75,-24,im,rm,16);var a=new Ap(this.scene,8,"Try Again",$g.IC_REPLAY);a.clearTint(),a.getIcon().setTintFill(16777215),this.rematchButton.add([t,n,a]).setSize(im,rm),this.add([this.rematchButton]),this.buttons.push(this.rematchButton)},n.createNewGameButton=function(){var e=this;this.newGameButton=new Zh.Z(this.scene,im,rm,16,16777215),this.newGameButton.onClick=(0,a.Z)(r().mark((function t(){return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.scene.handlePlayWithFriend();case 2:e.scene.screen.close(Qi.o4.TOURNAMENTS_RESULT_SCREEN);case 3:case"end":return t.stop()}}),t)}))),this.newGameButton.setName("NewGame");var t=new Ap(this.scene);this.newGameButton.add(t),this.newGameButton.setSize(im,rm),this.add([this.newGameButton]),this.buttons.push(this.newGameButton)},n.createCloseButton=function(){var e=this;if(GameCore.Utils.Valid.isDebugger()){var t=new Wl.Z(this.scene,40,40);this.add(t);var n=this.scene.add.image(0,0,Qg,$g.IC_BG_OFF);n.setWorldSize(40,40);var i=this.scene.make.bitmapText({font:No.Z.PRIMARY.KEY,size:this.scene.fontSize(10),text:"Close",origin:{x:.5,y:.5}});i.setCenterAlign(),t.add([n,i]),Phaser.Display.Align.In.TopRight(t,this,0,-0),t.onClick=(0,a.Z)(r().mark((function t(){return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.scene.screen.close(Qi.o4.TOURNAMENTS_RESULT_SCREEN);case 1:case"end":return t.stop()}}),t)})))}},n.alignComponents=function(){Phaser.Display.Align.In.TopCenter(this.title,this,0,-16),Phaser.Display.Align.To.BottomCenter(this.timer,this.title,0,6),Phaser.Display.Align.To.BottomCenter(this.topLine,this.timer,0,20),Phaser.Display.Align.To.BottomCenter(this.leaderList,this.topLine,0,20),Phaser.Display.Align.To.BottomCenter(this.bottomLine,this.leaderList,0,20),Phaser.Display.Align.To.BottomLeft(this.rematchButton,this.bottomLine,0,24),Phaser.Display.Align.To.BottomRight(this.newGameButton,this.bottomLine,0,24);var e=this.rematchButton.x,t=this.newGameButton.x;Phaser.Display.Align.In.BottomCenter(this.rematchButton,this,0,-16),Phaser.Display.Align.In.BottomCenter(this.newGameButton,this,0,-16),this.rematchButton.x=e,this.newGameButton.x=t},n.updateTitle=function(e){void 0===e&&(e="Your tournament");var t=GameCore.Utils.String.removeDiacritics(e);if(this.title.setText(t),!(this.title.width<=am))for(var n=1;n<t.length;n++)if(this.title.setText(t.substring(0,n)+"..."),this.title.width>am){this.title.setText(t.substring(0,n-1)+"...");break}},n.updateTimer=function(e){this.timer.setCountdown(e)},n.updateLeadersViaId=function(){var e=(0,a.Z)(r().mark((function e(t){var n,a,i,s,o,c,u,l,h,d,f=this;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=_()(n=[]).call(n,om),this.leaderList.loading.revive(),this.leaderList.bringToTop(this.leaderList.loading),e.prev=3,e.next=6,(0,Hr.H$)(t,{limit:4});case 6:if(i=e.sent,console.log("update tournament result",{leaders:i}),!(i.length>0)){e.next=24;break}return o=De()(i).call(i,(function(e){return e.playerId})),e.next=12,this.scene.profile.requestProfiles(o);case 12:if(c=this.scene.profile.getProfiles(),u=!1,l=Oe()(s=De()(i).call(i,(function(e){var t=e.playerId,n=e.score,a=e.rank,i=c[t];if(t===f.scene.player.getPlayerId()&&(u=!0),!i)return{playerId:t,photo:"",score:n,rank:a,name:"Player"};var r=i.name;return{playerId:t,photo:i.photo,score:n,rank:a,name:r}}))).call(s,(function(e){return null!==e})),!(l.length<1)){e.next=17;break}throw new Error("Leaderboard is empty");case 17:if(this.leaderList.revive(),l.forEach((function(e,t){a[t]=e})),u){e.next=24;break}return e.next=22,this.getCurrentPlayerLeaderDataPayload(t);case 22:h=e.sent,a[3]=(0,p.Z)({},h,{name:"You"});case 24:d=this.scene.player.getPlayerId(),a.forEach((function(e){e.playerId===d&&(e.name="You")})),console.log("update tournament result",{leadersDataPayload:a}),this.leaderList.updateLeaders(a),e.next=33;break;case 30:e.prev=30,e.t0=e.catch(3),console.warn(e.t0);case 33:return e.prev=33,this.leaderList.loading.kill(),e.finish(33);case 36:case"end":return e.stop()}}),e,this,[[3,30,33,36]])})));return function(t){return e.apply(this,arguments)}}(),n.getCurrentPlayerLeaderDataPayload=function(){var e=(0,a.Z)(r().mark((function e(t){var n,a,i,s,o,c,u;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.scene.player.getPlayer(),a=n.playerId,i=n.name,s=n.photo,e.next=3,(0,Hr.xB)(a,t);case 3:return o=e.sent,console.log({player:o}),c=o.score,u=o.rank,e.abrupt("return",{playerId:a,photo:s,score:c,rank:u,name:i});case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.hideContent=function(){this.leaderList.hideContent(),this.lines.forEach((function(e){e.setAlpha(0),e.scaleX=0})),this.buttons.forEach((function(e){return e.setAlpha(0)}))},n.runEntranceAnimationLines=function(){var e=(0,a.Z)(r().mark((function e(){var t,n,a=this;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return 200,n=De()(t=this.lines).call(t,(function(e,t){return new(o())((function(n){a.scene.add.tween({targets:[e],duration:200,delay:200*t/2,props:{alpha:{from:0,to:1},scaleX:{from:0,to:1}},onComplete:n})}))})),e.next=4,o().all(n);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.runEntranceAnimationButtons=function(){var e=(0,a.Z)(r().mark((function e(){var t,n,a=this;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=De()(t=this.buttons).call(t,(function(e){return new(o())((function(t){a.scene.add.tween({targets:e,alpha:1,duration:200,onComplete:function(){e.setDisabled(!1),t(),a.newGameButton.runPulsate()}})}))})),e.next=3,o().all(n);case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.runEntranceAnimation=function(){var e=(0,a.Z)(r().mark((function e(){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.runEntranceAnimationLines();case 2:return e.next=4,this.leaderList.runEntranceAnimation();case 4:return e.next=6,this.scene.gameplay.finishGame();case 6:return e.next=8,this.runEntranceAnimationButtons();case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),t}(Phaser.GameObjects.Container),lm=function(e){function t(t,n,a,i){var r;return(r=e.call(this,t,n,a,i)||this).scene=void 0,r.fadeInAnimation=void 0,r.fadeOutAnimation=void 0,r.slideInAnimation=void 0,r.container=void 0,r.beams=void 0,r.bunting=void 0,r.footer=void 0,r.closed=!1,r.handleClickTournaments=function(){r.scene.time.delayedCall(100,(function(){r.closed||r.close()}))},r.setBackground=function(){var e=r.scene.theme.getCurrentThemeConfig().backgroundKey;r.background.setTexture(e);var t=r.scene.gameZone,n=t.width,a=t.height;r.background.setWorldSize(n,a),r.scene.world.isLandscape()&&r.background.setScale(r.background.scaleY,r.background.scaleY),r.scene.events.on(Ti.BACKGROUND_CHANGED,(function(e){r.background.setTexture(e),r.background.setWorldSize(n,a),r.scene.world.isLandscape()&&r.background.setScale(r.background.scaleY,r.background.scaleY)}))},r.scene=t,r.setBackground(),r.createContainer(),r.createBeams(),r.createBuntings(),r.createFooter(),r.createBottomLogo(),r.setDepth(Qi.Ks.POPUP),gn.Z.removeObject(r.background),r}(0,f.Z)(t,e);var n=t.prototype;return n.createContainer=function(){this.container=new um(this.scene),this.add(this.container)},n.createBeams=function(){this.beams=new Lp(this.scene),this.add(this.beams),Phaser.Display.Align.In.TopCenter(this.beams,this)},n.createBuntings=function(){this.bunting=new Jp(this.scene),this.add(this.bunting),Phaser.Display.Align.In.TopCenter(this.bunting,this)},n.createFooter=function(){var e=this;this.footer=new bf(this.scene,!1,Qi.o4.NO_MORE_MOVES_SCREEN),this.add(this.footer),this.bringToTop(this.footer),this.footer.setInteractive();var t=this.scene.ads.getBannerHeight(),n=this.scene.gameZone.width>375?-10:0;Phaser.Display.Align.In.BottomCenter(this.footer,this.background,0,-t+n),this.footer.playBtn.onClick=(0,a.Z)(r().mark((function t(){return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.scene.screen.openAsync(Qi.o4.PLAY_SCREEN);case 2:t.sent.newGameStarted&&e.scene.screen.close(Qi.o4.TOURNAMENTS_RESULT_SCREEN);case 4:case"end":return t.stop()}}),t)})))},n.createBottomLogo=function(){if(!this.scene.world.isLandscape()){var e=new wf(this.scene);this.add(e),Phaser.Display.Align.In.BottomCenter(e,this)}},n.open=function(){var t=(0,a.Z)(r().mark((function t(n){return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.prototype.open.call(this,n),this.updateInfo(),this.container.setAlpha(1),this.container.setInteractive(),this.background.setAlpha(1),this.runOpenAnimation(),this.closed=!1,this.scene.children.bringToTop(this.scene.gameplay.confettiSmallFallDown),this.scene.gameplay.confettiSmallFallDown.run(8,0,0);case 9:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),n.updateInfo=function(){var e=(0,a.Z)(r().mark((function e(){var t,n,a;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Lg.getData().catch((function(){return{id:0,title:"Your Tournament",endTime:604800+Date.now()/1e3,contextID:""}}));case 2:if(n=e.sent){e.next=5;break}return e.abrupt("return");case 5:if(this.container.updateTitle(n.title),this.container.updateTimer(n.endTime),!(a=null==(t=n.payload)?void 0:t.leaderboardId)){e.next=11;break}return e.next=11,this.container.updateLeadersViaId(a);case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.close=function(){this.closed=!0,this.runCloseAnimation(),this.stopConfettiAnimation()},n.runOpenAnimation=function(){var e=(0,a.Z)(r().mark((function e(){var t,n,i,s=this;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==(t=this.slideInAnimation)||null==(n=t.tween)||!n.isPlaying()){e.next=2;break}return e.abrupt("return");case 2:return this.scene.audio.playSound($i.Z.POPUP_SHOW),i=this.scene.ads.getBannerHeight(),this.container.setAlpha(0),this.container.y=i,this.container.hideContent(),this.bunting.stopWavingAnimation(),this.container.newGameButton.stopPulsate(),this.slideInAnimation||(this.slideInAnimation=new Po.Z({targets:[this.container],ease:Phaser.Math.Easing.Back.Out,props:{y:{from:i,to:-i/2},alpha:{from:0,to:1}},duration:300,onComplete:function(){var e=(0,a.Z)(r().mark((function e(){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.container.runEntranceAnimation();case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()})),this.fadeInAnimation||(this.fadeInAnimation=new bc.Z({targets:[this],duration:300})),this.fadeInAnimation.play(),e.next=14,this.bunting.runEntranceAnimation();case 14:this.bunting.playWavingAnimation(),this.slideInAnimation.play();case 16:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.runCloseAnimation=function(){var t,n,a=this;null!=(t=this.fadeOutAnimation)&&null!=(n=t.tween)&&n.isPlaying()||(this.scene.audio.playSound($i.Z.POPUP_OFF),this.fadeOutAnimation||(this.fadeOutAnimation=new Fh.Z({targets:[this],props:{alpha:0},duration:300,onComplete:function(){e.prototype.close.call(a)}})),this.fadeOutAnimation.play(),this.bunting.stopWavingAnimation())},n.stopConfettiAnimation=function(){this.scene.gameplay.confettiSmallFallDown.emitter.stop()},t}(GameCore.Screen),hm=n(558),dm=143.5,pm=function(e){function t(t){var n;return(n=e.call(this,t,dm,48)||this).background=void 0,n.border=void 0,n.labelContainer=void 0,n.setName("Rematch"),n.setSize(dm,48),n.createBackground(),n.createBorder(),n.createLabel(),n}(0,f.Z)(t,e);var n=t.prototype;return n.createBackground=function(){this.background=new mh.Z(this.scene,0,0,dm,48,16,16777215,.24),this.add(this.background)},n.createBorder=function(){this.border=this.scene.add.graphics(),this.border.lineStyle(1,16777215).strokeRoundedRect(-71.75,-24,dm,48,16),this.add(this.border)},n.createLabel=function(){this.labelContainer=new Ap(this.scene,8,"Rematch",fn.Z.GAMEPLAY_DEFAULT.FRAME.ADD_SQUARE),this.labelContainer.clearTint(),this.labelContainer.getIcon().setTintFill(16777215),this.add(this.labelContainer)},n.hideContent=function(){this.setDisabled(!0)},n.runEntranceAnimation=function(){var e=(0,a.Z)(r().mark((function e(){var t=this;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new(o())((function(e){t.scene.add.tween({targets:t,alpha:1,duration:200,onStart:function(){t.setDisabled(!0)},onComplete:function(){t.setDisabled(!1),e()}})})));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),t}(Wl.Z),fm=143.5,gm=function(e){function t(t){var n;return(n=e.call(this,t,fm,48,16,16777215)||this).background=void 0,n.border=void 0,n.label=void 0,n.setName("Close"),n.setSize(fm,48),n.createBackground(),n.createBorder(),n.createLabel(),n}(0,f.Z)(t,e);var n=t.prototype;return n.createBackground=function(){this.background=new mh.Z(this.scene,0,0,fm,48,16,16777215,.24),this.add(this.background)},n.createBorder=function(){this.border=this.scene.add.graphics(),this.border.lineStyle(1,16777215).strokeRoundedRect(-71.75,-24,fm,48,16),this.add(this.border)},n.createLabel=function(){this.label=this.scene.make.bitmapText({font:No.Z.PRIMARY.KEY,size:this.scene.fontSize(16),text:"Close",origin:{x:.5,y:.5}}).setTint(43282),this.add(this.label)},n.hideContent=function(){this.setDisabled(!0)},n.runEntranceAnimation=function(){var e=(0,a.Z)(r().mark((function e(){var t=this;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new(o())((function(e){t.scene.add.tween({targets:t,alpha:1,duration:200,onStart:function(){t.setDisabled(!0)},onComplete:function(){t.setDisabled(!1),e()}})})));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),t}(Zh.Z),mm="Waiting",vm=function(){function e(){this._state=void 0,this._state=tg.WIN}return(0,ue.Z)(e,[{key:"state",get:function(){return this._state},set:function(e){var t=game.globalScene.getActiveScene().screen.get(Qi.o4.PLAY_WITH_FRIEND_GAME_OVER_SCREEN);t instanceof bm&&t.setGameOverInfo({state:e}),this._state=e}}]),e}(),ym=new vm;window.resultStateManager=ym;var bm=function(e){function t(t,n,a,i){var r;return(r=e.call(this,t,n,a,i)||this).slideInAnimation=void 0,r.fadeInAnimation=void 0,r.fadeOutAnimation=void 0,r.playWithFriendGameOverContainer=void 0,r.winDecoration=void 0,r.loseDecoration=void 0,r.footer=void 0,r.closed=!1,r.rematchBtn=void 0,r.closeBtn=void 0,r.setBackground=function(){var e=r.scene.theme.getCurrentThemeConfig().backgroundKey;r.background.setTexture(e);var t=r.scene.gameZone,n=t.width,a=t.height;r.background.setWorldSize(n,a),r.scene.world.isLandscape()&&r.background.setScale(r.background.scaleY,r.background.scaleY),r.scene.events.on(Ti.BACKGROUND_CHANGED,(function(e){r.background.setTexture(e),r.background.setWorldSize(n,a),r.scene.world.isLandscape()&&r.background.setScale(r.background.scaleY,r.background.scaleY)}))},r.handleClickTournaments=function(){r.scene.time.delayedCall(100,(function(){r.closed||r.close()}))},r.scene instanceof Nm&&r.setBackground(),r.setDepth(Qi.Ks.POPUP),r.createContainer(),r.createBanners(),r.createBottomLogo(),r.updateBody(),gn.Z.removeObject(r.background),r}(0,f.Z)(t,e);var n=t.prototype;return n.updateBody=function(){var e=this.playWithFriendGameOverContainer.popup.popupBody,t=e.newGameButton,n=e.shareButton;t.kill(),n.kill(),this.createRematchButton(),this.createCloseButton()},n.createRematchButton=function(){var e=this,t=this.playWithFriendGameOverContainer.popup,n=new pm(this.scene);t.popupBody.add(n),n.setPosition(-80,98),n.onClick=function(){try{var t=e.scene.storage.getState(),n=gs(t),a=(0,p.Z)({},n,{rematch:!0});e.scene.handlePlayWithFriend(a)}catch(i){}e.scene.screen.close(e.name)},this.rematchBtn=n},n.createCloseButton=function(){var e=this,t=this.playWithFriendGameOverContainer.popup,n=new gm(this.scene);t.popupBody.add(n),n.setPosition(80,98),n.onClick=function(){e.scene.screen.close(e.name)},this.closeBtn=n},n.open=function(t){e.prototype.open.call(this,t),this.closed=!1,this.rematchBtn.setAlpha(0),this.closeBtn.setAlpha(0),this.isGameZoneTooWide()&&(this.winDecoration.kill(),this.loseDecoration.kill()),this.background.setAlpha(1),this.runOpenAnimation(),ym.state!==tg.LOSE&&(this.playConfettiAnimation(),this.updateResultInfo(),this.clearCurrentMatchID())},n.clearCurrentMatchID=function(){var e=FBInstant.context.getID();if(e){var t=this.scene.player.getCustomData("match"),n=Phaser.Utils.Objects.DeepCopy(t);n[e]="",this.scene.player.setCustomData("match",n)}},n.close=function(){this.closed=!0,this.runCloseAnimation(),this.stopConfettiAnimation()},n.runOpenAnimation=function(){var e=(0,a.Z)(r().mark((function e(){var t,n,i,s,o=this;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==(t=this.slideInAnimation)||null==(n=t.tween)||!n.isPlaying()){e.next=2;break}return e.abrupt("return");case 2:if(this.scene.audio.playSound($i.Z.POPUP_SHOW),i=this.scene.ads.getBannerHeight(),s=i,this.playWithFriendGameOverContainer.setAlpha(0).setY(s).hideContent(),this.winDecoration.bunting.stopWavingAnimation(),this.loseDecoration.lightnings.hideContent(),this.slideInAnimation||(this.slideInAnimation=new Po.Z({targets:[this.playWithFriendGameOverContainer],props:{y:{from:s,to:-i/2,ease:Phaser.Math.Easing.Back.Out},alpha:{from:0,to:1}},duration:300,onComplete:function(){var e=(0,a.Z)(r().mark((function e(){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.playWithFriendGameOverContainer.runEntranceAnimation();case 2:o.scene.tweens.add({targets:[o.rematchBtn,o.closeBtn],alpha:1,duration:400});case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()})),this.fadeInAnimation||(this.fadeInAnimation=new bc.Z({targets:[this],duration:300})),this.fadeInAnimation.play(),!this.winDecoration.active){e.next=15;break}return e.next=14,this.winDecoration.bunting.runEntranceAnimation();case 14:this.winDecoration.bunting.playWavingAnimation();case 15:if(!this.loseDecoration.active){e.next=18;break}return e.next=18,this.loseDecoration.lightnings.runEntranceAnimation();case 18:this.slideInAnimation.play();case 19:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.runCloseAnimation=function(){var t,n,a=this;null!=(t=this.fadeOutAnimation)&&null!=(n=t.tween)&&n.isPlaying()||(this.scene.audio.playSound($i.Z.POPUP_OFF),this.fadeOutAnimation||(this.fadeOutAnimation=new Fh.Z({targets:[this],props:{alpha:0},duration:300,delay:200,onComplete:function(){gn.Z.closeScreen(a),e.prototype.close.call(a)}})),this.fadeOutAnimation.play())},n.createBanners=function(){this.createRibbonBanner(),this.createLightningThunderBanner()},n.createRibbonBanner=function(){this.winDecoration=new xg(this.scene),this.winDecoration.kill(),Phaser.Display.Align.In.TopCenter(this.winDecoration,this),this.add(this.winDecoration)},n.createLightningThunderBanner=function(){this.loseDecoration=new Pg(this.scene),this.loseDecoration.kill(),Phaser.Display.Align.In.TopCenter(this.loseDecoration,this),this.add(this.loseDecoration)},n.createContainer=function(){this.playWithFriendGameOverContainer=new kg(this.scene),this.add(this.playWithFriendGameOverContainer)},n.createFooter=function(){var e=this;this.footer=new bf(this.scene,!1,Qi.o4.PLAY_WITH_FRIEND_GAME_OVER_SCREEN),this.add(this.footer),this.bringToTop(this.footer),this.footer.setInteractive();var t=this.scene.ads.getBannerHeight(),n=this.scene.gameZone.width>375?-10:0;Phaser.Display.Align.In.BottomCenter(this.footer,this.background,0,-t+n),this.footer.tournamentsButton.onClick=function(){e.scene.events.off(Ti.GAME_START,e.handleClickTournaments),e.scene.events.once(Ti.GAME_START,e.handleClickTournaments),e.scene.screen.open(Qi.o4.TOURNAMENTS_SCREEN)},this.footer.playBtn.onClick=(0,a.Z)(r().mark((function t(){return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.scene.screen.openAsync(Qi.o4.PLAY_SCREEN);case 2:t.sent.newGameStarted&&e.scene.screen.close(Qi.o4.PLAY_WITH_FRIEND_GAME_OVER_SCREEN);case 4:case"end":return t.stop()}}),t)})))},n.createBottomLogo=function(){if(!this.scene.world.isLandscape()){var e=new wf(this.scene);Phaser.Display.Align.In.BottomCenter(e,this),this.add(e)}},n.isGameZoneTooWide=function(){return this.scene.gameZone.width>450},n.playConfettiAnimation=function(){if(this.scene instanceof Nm){var e=this.scene.gameplay.confettiSmallFallDown;this.scene.children.bringToTop(e),e.run(8,0,0)}},n.stopConfettiAnimation=function(){this.scene instanceof Nm&&this.scene.gameplay.confettiSmallFallDown.stop()},n.updateResultInfo=function(){var e=this.scene.storage.getState(),t=ss(e),n=Ss(e),a=this.scene.player.getPlayer().playerId,i=gs(e).playerId,r=(n[a]||{}).score,s=(n[i]||{}).score,o=vs(e,{playerId:a}),c=ys(e,{opponentId:i});t===bi&&(o=!0,c=!0),console.log({isPlayerFinish:o,isOpponentFinish:c});var u=ds(e);console.warn({matchData:u});var l,h=u.whitePlayerId,d=u.extraData,p=void 0===d?{}:d,f=a===h,g=f?p.blackPlayerData:p.whitePlayerData,m=(f?p.whitePlayerData:p.blackPlayerData)||{},v=m.moves,y=m.time,b=g||{},A=b.moves,S=b.time,E=o&&c,w=E&&r>s,T=E&&r<s;console.log({isPlayerWin:w,isOpponentWin:T}),l=E?w&&T?tg.DRAW:w?tg.WIN:tg.LOSE:tg.WAITING_FOR_OPPONENT,console.log({playerScore:r,opponentScore:s}),this.setGameOverInfo({state:l,playerScore:o?r:void 0,opponentScore:c?s:void 0,playerMoves:o?v:void 0,opponentMoves:c?A:void 0,playerTime:o?y:void 0,opponentTime:c?S:void 0}),this.scene.storage.dispatch(eo(!1))},n.setGameOverInfo=function(e){var t=this.playWithFriendGameOverContainer.popup,n=t.header,a=t.avatarZone,i=t.popupBody,r=a.youAvatar,s=a.opponentAvatar,o=this.scene.player.getPlayer(),c=o.playerId,u=o.photo,l=o.name;r.avatar.loadPhoto(c,u,100),r.username.setText(l);var h=this.scene.storage.getState(),d=ds(h),p=d.whitePlayerId,f=d.blackPlayerId,g=c===p?f:p,m=this.scene.game.player.getConnectedPlayers()[g]||gs(h),v=m.playerId,y=m.photo,b=m.name;if(s.avatar.loadPhoto(v||"10",y||Ui.Z.AVATAR.KEY,100),s.username.setText(b||"Your Friend"),e.state)switch(n.updateWinLoseText(e.state),a.updateState(e.state),this.rematchBtn.revive(),this.closeBtn.setX(80),e.state){case tg.LOSE:this.winDecoration.kill(),this.loseDecoration.revive(),this.enableDarkBackground(),this.stopConfettiAnimation();break;case tg.WIN:case tg.DRAW:this.winDecoration.revive(),this.loseDecoration.kill(),this.enableDarkBackground(!1);break;case tg.WAITING_FOR_OPPONENT:default:this.winDecoration.kill(),this.loseDecoration.kill(),this.stopConfettiAnimation(),this.enableDarkBackground(!1),this.rematchBtn.kill(),this.closeBtn.setX(0)}if(e.draw)n.updateDrawMode(e.draw);else{var A=this.scene.player.getPlayerSettings().drawMode3?3:1;n.updateDrawMode(A)}var S=i.stat,E=S.scoreStat,w=S.movesStat,T=S.timeStat;void 0!==e.playerScore?E.setPlayerStat(""+e.playerScore):E.setPlayerStat(mm),void 0!==e.opponentScore?E.setOpponentStat(""+e.opponentScore):E.setOpponentStat(mm),void 0!==e.playerMoves?w.setPlayerStat(""+e.playerMoves):w.setPlayerStat(mm),void 0!==e.opponentMoves?w.setOpponentStat(""+e.opponentMoves):w.setOpponentStat(mm),void 0!==e.playerTime?T.setPlayerStat((0,tr.F0)(e.playerTime,!1)):T.setPlayerStat(mm),void 0!==e.opponentTime?T.setOpponentStat((0,tr.F0)(e.opponentTime,!1)):T.setOpponentStat(mm)},n.enableDarkBackground=function(e){void 0===e&&(e=!0),gn.Z.openScreen(this,e);var t=this.playWithFriendGameOverContainer.popup.background;e?(this.background.setPipeline("Grayscale"),t.setPipeline("Grayscale")):(this.background.resetPipeline(),t.resetPipeline())},n.updateFinishingChallenge=function(){this.playWithFriendGameOverContainer.popup.popupBody.newGameButton.switchState(mg.CLOSE)},t}(GameCore.Screen),Am=function(){function e(e){var t=this;this.scene=void 0,this.fps=void 0,this.avgFps=void 0,this.avgFpsInTime=void 0,this.countTimeToUpdateFps=void 0,this.countTimeToUpdateAvgFPS=void 0,this.countTimeToTrackFPS=void 0,this.reduceCanvasCanvasCount=void 0,this.currentMaxDPR=void 0,this.maxFps=void 0,this.update=function(e,n){t.countTimeToUpdateFps+=n,t.countTimeToUpdateAvgFPS+=n,t.countTimeToTrackFPS+=n,t.countTimeToUpdateFps<500||(t.countTimeToUpdateFps-=500,t.updateFps(),t.updateAvgFps(),t.updateAvgFpsInTime())},this.tryReduceCanvas=function(){if(t.reduceCanvasCanvasCount+=1,!(t.reduceCanvasCanvasCount<=1||t.reduceCanvasCanvasCount>3)){var e;Math.abs(t.maxFps-t.getAvgFpsInTime())>2&&(t.getAvgFpsInTime()>55&&(t.currentMaxDPR+=.25),t.getAvgFpsInTime()<45&&(t.currentMaxDPR-=.25)),e=Phaser.Math.Clamp(t.currentMaxDPR,1,2.5);var n=GameCore.Utils.Device.pixelRatio();n=GameCore.Utils.Device.isDesktop()?Phaser.Math.Clamp(n,1.25,e):Phaser.Math.Clamp(n,1,e),t.scene.world.resize(n),t.scene.analytics.event("track_fps",{fps:Math.round(t.getAvgFpsInTime()),step:t.reduceCanvasCanvasCount,canvas_ratio:n})}},this.scene=e,this.countTimeToUpdateFps=0,this.countTimeToUpdateAvgFPS=this.reduceCanvasCanvasCount=0,this.currentMaxDPR=2,this.maxFps=0}var t=e.prototype;return t.getFps=function(){return this.fps},t.getAvgFps=function(){return Math.round(this.avgFps.average)},t.getAvgFpsInTime=function(){return this.avgFpsInTime.average},t.updateFps=function(){this.fps=this.scene.game.loop.actualFps},t.updateAvgFps=function(){this.avgFps.sum+=this.fps,this.avgFps.total+=1,this.avgFps.average=this.avgFps.sum/this.avgFps.total,this.avgFps.min>this.avgFps.average&&(this.avgFps.min=this.avgFps.average),this.avgFps.max<this.avgFps.average&&(this.avgFps.max=this.avgFps.average)},t.updateAvgFpsInTime=function(){this.avgFpsInTime.sum+=this.fps,this.avgFpsInTime.total+=1,this.countTimeToUpdateAvgFPS>4e3&&(this.avgFpsInTime.average=this.avgFpsInTime.sum/(this.avgFpsInTime.total||1),this.avgFpsInTime.sum=0,this.avgFpsInTime.total=0,this.countTimeToUpdateAvgFPS-=4e3,this.avgFpsInTime.min>this.avgFpsInTime.average&&(this.avgFpsInTime.min=this.avgFpsInTime.average),this.avgFpsInTime.max<this.avgFpsInTime.average&&(this.avgFpsInTime.max=this.avgFpsInTime.average),this.tryReduceCanvas(),this.maxFps=Math.max(this.getAvgFpsInTime(),this.maxFps))},t.reset=function(){this.fps=0,this.avgFps={sum:0,total:0,average:0,min:120,max:0},this.avgFpsInTime={sum:0,total:0,average:0,min:120,max:0}},t.start=function(){var e=this;this.scene.events.on(Phaser.Scenes.Events.UPDATE,this.update),this.reset(),this.scene.time.delayedCall(2e4,(function(){e.scene.analytics.event("track_fps",{fps:Math.round(e.getAvgFpsInTime()),step:10})}))},t.stop=function(){this.scene.events.off(Phaser.Scenes.Events.UPDATE,this.update)},e}(),Sm=Am,Em=function(e){try{var t=Si(e),n=window.game.player,a=t.entryPointData||{},i=a.playerId,r=a.playerName,s=a.playerPhoto;return n.getPlayer().playerId===i?Wi:new pt.Z(i,r,s).toObject()}catch(o){return console.warn(o),Wi}},wm=function(){return function(){var e=(0,a.Z)(r().mark((function e(t){var n;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=window.game.facebook,e.next=4,n.getTournamentAsync().then((function(e){t(ho(e))})).catch((function(e){console.warn(e)}));case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),console.warn(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}()},Tm=function(){return function(){var e=(0,a.Z)(r().mark((function e(t,n){var a,i,s,o,c,u,l,h,d,p,f,g;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.prev=0,a=n(),i=Si(a),s=window.game,o=s.player,c=s.facebook,u=o.getPlayer(),l=i.entryPointData,h=(l||{}).playerId,d=c.getContextID(),p=u.playerId===h,f=Em(a),p||o.updateConnectedPlayers([f]),g=f.playerId,t(mo(d,g,!0)),e.next=18;break;case 15:throw e.prev=15,e.t0=e.catch(0),new Error("processInviteMode: "+e.t0);case 18:case"end":return e.stop()}}),e,null,[[0,15]])})));return function(t,n){return e.apply(this,arguments)}}()},Im=function(){return function(){var e=(0,a.Z)(r().mark((function e(t,n){var a,i,s,o,c,u,l,h,d;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,a=n(),i=Si(a),s=window.game.player,o=s.getPlayer(),c=i.entryPointData,l=(u=c||{}).matchId,h=u.opponentId,d=u.playerId,!(o.playerId===d)){e.next=13;break}return e.next=11,t(Ao(l,h));case 11:e.next=15;break;case 13:return e.next=15,t(Ao(l,d));case 15:e.next=20;break;case 17:throw e.prev=17,e.t0=e.catch(0),new Error("processChallengeFriendMode: "+e.t0);case 20:case"end":return e.stop()}}),e,null,[[0,17]])})));return function(t,n){return e.apply(this,arguments)}}()},Cm=function(){return function(e,t){try{var n=t(),a=Si(n).entryPointData||{},i=a.playerId,r=a.playerScore;e(no(i,{score:r,level:0}));var s=Em(n),o=(0,p.Z)({},s,{score:r});e(bo(o))}catch(c){throw new Error("processMatchingGroupMode: "+c)}}},km=function(){return function(e){try{e(po())}catch(t){throw new Error("processNewUserMode: "+t)}}},xm=function(){return function(e){try{e(function(){var e=(0,a.Z)(r().mark((function e(t){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{t(Ks()),t(wo(yi))}catch(n){(0,h.tO)(n)}case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}catch(t){throw new Error("processThreadChallengeMode: "+t)}}},Pm=n(545),_m="How about diving into the game for a relaxing experience?",Om=GameCore.Configs.Notification.DailyNotificationMessages,Rm=void 0===Om?{}:Om,Dm=function(){function e(){}e.sendNewUserNotification=function(){var e=(0,a.Z)(r().mark((function e(){var t;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.getInstance(),e.abrupt("return",t.sendNewUserNotificationInstance());case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),e.sendDailyNotification=function(){var e=(0,a.Z)(r().mark((function e(){var t;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.getInstance(),e.abrupt("return",t.sendDailyNotificationInstance());case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),e.sendTestDailyNotification=function(){var e=(0,a.Z)(r().mark((function e(t){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.getInstance();case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),e.getInstance=function(){return this._instance||(this._instance=new e),this._instance};var t=e.prototype;return t.sendNewUserNotificationInstance=function(){var e=(0,a.Z)(r().mark((function e(){var t,n,a,i,s,o;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=window.game,n=t.player,a=t.facebook,i=t.rollbar,e.prev=1,n.getPlayerIsNew()){e.next=5;break}return e.abrupt("return");case 5:if(n.getPlayerASID()){e.next=8;break}return e.abrupt("return");case 8:return e.next=10,FBInstant.player.getDataAsync(["isNotificationFirstSent"]);case 10:if(e.t0=e.sent,e.t0){e.next=13;break}e.t0={};case 13:if(s=e.t0,!0!==s.isNotificationFirstSent){e.next=17;break}return e.abrupt("return");case 17:return o={message:_m,delayTime:14400,type:Pm.Z.NEW_USER_NOTIFICATION},e.next=20,a.sendNotificationAsync(o);case 20:FBInstant.player.setDataAsync({isNotificationFirstSent:!0}),e.next=26;break;case 23:e.prev=23,e.t1=e.catch(1),i.sendException(e.t1);case 26:case"end":return e.stop()}}),e,null,[[1,23]])})));return function(){return e.apply(this,arguments)}}(),t.sendDailyNotificationInstance=function(){var e=(0,a.Z)(r().mark((function e(){var t,n,a;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=window.game.rollbar,e.prev=1,n=new Date,a=n.getDay(),e.t0=a,e.next=0===e.t0?7:1===e.t0?10:2===e.t0?13:3===e.t0?16:4===e.t0?19:22;break;case 7:return e.next=9,this.sendMondayNotification();case 9:return e.abrupt("break",22);case 10:return e.next=12,this.sendTuesdayNotification();case 12:return e.abrupt("break",22);case 13:return e.next=15,this.sendWednesdayNotification();case 15:return e.abrupt("break",22);case 16:return e.next=18,this.sendThursdayNotification();case 18:return e.abrupt("break",22);case 19:return e.next=21,this.sendFridayNotification();case 21:return e.abrupt("break",22);case 22:return e.next=24,this.sendSaturdayNotification();case 24:return e.next=26,this.sendSundayNotification();case 26:e.next=31;break;case 28:e.prev=28,e.t1=e.catch(1),t.sendException(e.t1);case 31:case"end":return e.stop()}}),e,this,[[1,28]])})));return function(){return e.apply(this,arguments)}}(),t.sendMondayNotification=function(){var e=(0,a.Z)(r().mark((function e(){var t,n,a,i,s;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=window.game,n=t.facebook,a=t.rollbar,e.prev=1,s={message:null!=(i=Rm.MONDAY)?i:_m,delayTime:86400,type:Pm.Z.MONDAY_NOTIFICATION},e.next=5,n.sendNotificationAsync(s);case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),a.sendException(e.t0);case 10:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(){return e.apply(this,arguments)}}(),t.sendTuesdayNotification=function(){var e=(0,a.Z)(r().mark((function e(){var t,n,a,i,s;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=window.game,n=t.facebook,a=t.rollbar,e.prev=1,s={message:null!=(i=Rm.TUESDAY)?i:_m,delayTime:86400,type:Pm.Z.TUESDAY_NOTIFICATION},e.next=5,n.sendNotificationAsync(s);case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),a.sendException(e.t0);case 10:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(){return e.apply(this,arguments)}}(),t.sendWednesdayNotification=function(){var e=(0,a.Z)(r().mark((function e(){var t,n,a,i,s;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=window.game,n=t.facebook,a=t.rollbar,e.prev=1,s={message:null!=(i=Rm.WEDNESDAY)?i:_m,delayTime:86400,type:Pm.Z.WEDNESDAY_NOTIFICATION},e.next=5,n.sendNotificationAsync(s);case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),a.sendException(e.t0);case 10:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(){return e.apply(this,arguments)}}(),t.sendThursdayNotification=function(){var e=(0,a.Z)(r().mark((function e(){var t,n,a,i,s;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=window.game,n=t.facebook,a=t.rollbar,e.prev=1,s={message:null!=(i=Rm.THURSDAY)?i:_m,delayTime:86400,type:Pm.Z.THURSDAY_NOTIFICATION},e.next=5,n.sendNotificationAsync(s);case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),a.sendException(e.t0);case 10:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(){return e.apply(this,arguments)}}(),t.sendFridayNotification=function(){var e=(0,a.Z)(r().mark((function e(){var t,n,a,i,s;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=window.game,n=t.facebook,a=t.rollbar,e.prev=1,s={message:null!=(i=Rm.FRIDAY)?i:_m,delayTime:86400,type:Pm.Z.FRIDAY_NOTIFICATION},e.next=5,n.sendNotificationAsync(s);case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),a.sendException(e.t0);case 10:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(){return e.apply(this,arguments)}}(),t.sendSaturdayNotification=function(){var e=(0,a.Z)(r().mark((function e(){var t,n,a,i,s,o;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=window.game,n=t.facebook,a=t.rollbar,e.prev=1,s=this.findDelayTimeForNextDay(6,10),o={message:null!=(i=Rm.SATURDAY)?i:_m,delayTime:s,type:Pm.Z.SATURDAY_NOTIFICATION},e.next=6,n.sendNotificationAsync(o);case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),a.sendException(e.t0);case 11:case"end":return e.stop()}}),e,this,[[1,8]])})));return function(){return e.apply(this,arguments)}}(),t.sendSundayNotification=function(){var e=(0,a.Z)(r().mark((function e(){var t,n,a,i,s,o;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=window.game,n=t.facebook,a=t.rollbar,e.prev=1,s=this.findDelayTimeForNextDay(0,10),o={message:null!=(i=Rm.SUNDAY)?i:_m,delayTime:s,type:Pm.Z.SUNDAY_NOTIFICATION},e.next=6,n.sendNotificationAsync(o);case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),a.sendException(e.t0);case 11:case"end":return e.stop()}}),e,this,[[1,8]])})));return function(){return e.apply(this,arguments)}}(),t.findDelayTimeForNextDay=function(e,t){if(e<0||e>6)throw new Error("Invalid day for notification");if(t<0||t>23)throw new Error("Invalid hour for notification");var n=Date.now(),a=new Date(n).getDay(),i=new Date(n).getHours(),r=e,s=t;if(a===r&&i>=s){var o=3600*(168-i+s);if(o>604800)throw new Error("Notification delay time is more than 7 days");return o}var c=r<a?7-a+r:r-a;s<i&&c--;var u=3600*(24*c+(s<i?24-i+s:s-i));if(u>604800)throw new Error("Notification delay time is more than 7 days");return u},t.sendTestDailyNotificationInstance=function(){var e=(0,a.Z)(r().mark((function e(t){var n,a,i,s;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n={0:"SUNDAY",1:"MONDAY",2:"TUESDAY",3:"WEDNESDAY",4:"THURSDAY",5:"FRIDAY",6:"SATURDAY"},e.prev=1,i=_m,!(t<0||t>6)){e.next=5;break}throw new Error("Invalid day for notification. Day must be between 0 (Sunday) and 6 (Saturday)");case 5:return i=null!=(a=Rm[n[t]])?a:_m,s={message:i,delayTime:300,type:Pm.Z.GENERIC_NOTIFICATION},e.next=9,window.game.facebook.sendNotificationAsync(s);case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),console.warn(e.t0);case 14:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(t){return e.apply(this,arguments)}}(),e}();Dm._instance=void 0;var Lm=Dm,Bm=function(e){function t(){for(var t,n,i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];return(n=e.call.apply(e,_()(t=[this]).call(t,s))||this).gameplay=void 0,n.header=void 0,n.footer=void 0,n.gameStats=void 0,n.levelLoader=void 0,n.themeHandler=void 0,n.gameModeManager=void 0,n.bottomLogo=void 0,n.fpsManager=void 0,n.handleFinishingChallenge=function(){n.screen.open(Qi.o4.PLAY_WITH_FRIEND_RESULT_SCREEN)},n.create=function(){e.prototype.create.call((0,Hi.Z)(n)),n.fpsManager=new Sm((0,Hi.Z)(n)),n.fpsManager.start(),Du(),n.themeHandler=new jd((0,Hi.Z)(n)),n.gameModeManager=new $f((0,Hi.Z)(n)),n.gameStats=new ad((0,Hi.Z)(n)),n.levelLoader=new rd((0,Hi.Z)(n)),n.header=new Gh((0,Hi.Z)(n)),n.footer=new gh((0,Hi.Z)(n));var t=n.ads.getBannerHeight();Phaser.Display.Align.In.TopCenter(n.header,n.gameZone,0,0);var a=n.gameZone.width>375?-10:0;Phaser.Display.Align.In.BottomCenter(n.footer,n.gameZone,0,-t+a),n.gameplay=new ch((0,Hi.Z)(n)),n.createScreens(),n.ads.preloadInterstitialAdAsync().catch((function(){})),n.header.alignChildren();var i=n.game.globalScene;i instanceof hm.Z&&i.hideBackground(),n.game.events.on("world-resize",n.handleWorldResize),n.processStartGame()},n.handleWorldResize=function(){var e=n.ads.getBannerHeight();if(Du(),n.scaleGame(),n.createGameZone(),n.createBackground(n.background.texture.key,n.background.frame.name),n.game.events.emit("game-zone-updated"),Phaser.Display.Align.In.TopCenter(n.header,n.gameZone,0,0),n.world.isLandscape())Phaser.Display.Align.In.BottomCenter(n.footer,n.gameZone,0,-10);else{var t=n.gameZone.width>375?-10:0;Phaser.Display.Align.In.BottomCenter(n.footer,n.gameZone,0,-e+t)}n.header.alignChildren(),n.game.events.emit("footer-updated"),n.gameplay.boardGame.updatePlacementSize(),n.gameplay.boardGame.alignBoard(!0),n.themeHandler.updateCardStyle()},n.setBackground=function(e){n.createBackground(e)},n.run=function(){n.player.getPlayerIsNew()&&n.gameplay.startNewGame(),n.ads.getBannerHeight()>0&&n.createBottomLogo(),n.ads.showBannerAdAsync().catch((function(e){console.warn(e)}))},n.handlePlayWithFriend=function(){var e=(0,a.Z)(r().mark((function e(t){var a,i,s,o;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=5;break}return e.next=3,n.storage.dispatch(yo(t));case 3:case 11:e.next=15;break;case 5:if("messenger_game_list"!=n.facebook.entryPoint||!oo.instance.isChallengeMode()){e.next=13;break}return a=n.storage.getState(),i=gs(a),s=i.playerId,o=FBInstant.context.getID(),e.next=11,n.storage.dispatch(mo(o,s));case 13:return e.next=15,n.storage.dispatch(vo());case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.handleChallengeRandomFriend=(0,a.Z)(r().mark((function e(){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.storage.dispatch(vo());case 2:case"end":return e.stop()}}),e)}))),n.handlePlaySingle=(0,a.Z)(r().mark((function e(){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.storage.dispatch(po());case 2:case"end":return e.stop()}}),e)}))),n.handlePlaySingleWithRandomSeed=(0,a.Z)(r().mark((function e(){var t;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.storage.dispatch(po());case 2:t=GameCore.Utils.String.random(10),n.gameplay.startGameWithSeed(t);case 4:case"end":return e.stop()}}),e)}))),n}(0,f.Z)(t,e);var n=t.prototype;return n.preload=function(){this.events.on(Phaser.Scenes.Events.WAKE,this.run),this.events.on(Phaser.Scenes.Events.CREATE,this.run),this.events.once("player-finish-challenge",this.handleFinishingChallenge)},n.processStartGame=function(){var e=(0,a.Z)(r().mark((function e(){var t=this;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.game.globalScene.screen.open(Qi.o4.NOTIFY_SCREEN,{message:"Loading...",duration:0,loading:!0}),e.next=3,this.startGameAsync();case 3:return window.__fbGameReady=!0,setTimeout((function(){return t.facebook.attemptToSubscribeBot()}),500),e.next=7,this.storage.dispatch(function(){var e=(0,a.Z)(r().mark((function e(t,n){var a,i,s,o,c,u,l,h,d,p,f,g,m,v,y,b;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=window,i=a.game,s=a.FBInstant,o=i.player,c=n(),u=Si(c),l=o.getPlayerId(),h=s.context.getID(),d=s.context.getType(),p=u.entryPointData,g=(f=p||{}).type,m=f.playerId,v=l===m,y=mi,h&&"THREAD"==d&&(y=!0===(null==(b=window.FBInstant.context.isSizeBetween(3,null))?void 0:b.answer)?yi:g==gi?vi:"matching_group_match"===g?bi:yi),!h||g!==fi||v){e.next=17;break}return e.next=15,i.facebook.createAsync(""+m);case 15:e.sent&&(y=vi);case 17:return e.prev=17,e.next=20,i.facebook.getTournamentAsync();case 20:y=Ai,e.next=25;break;case 23:e.prev=23,e.t0=e.catch(17);case 25:i.events.emit(Ti.GAME_MODE_DETECTED),t(Ci(y));case 27:case"end":return e.stop()}}),e,null,[[17,23]])})));return function(t,n){return e.apply(this,arguments)}}());case 7:return e.next=9,this.storage.dispatch(function(){var e=(0,a.Z)(r().mark((function e(t,n){var a,i,s,o,c,u,l,h,d;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=window.game,i=a.player,s=a.analytics,a.globalScene,e.prev=1,o=n(),c=Si(o),u=Ei(o),l=i.getPlayer(),h=c.entryPointData,d=(h||{}).type,l.isUserNew&&s.event(pn._.NEW_USER),u!==Ai){e.next=13;break}return e.next=12,t(wm());case 12:return e.abrupt("return");case 13:if(u!=yi){e.next=17;break}return e.next=16,t(xm());case 16:return e.abrupt("return");case 17:if(u!==vi){e.next=25;break}if(d!==gi){e.next=22;break}return e.next=21,t(Im());case 21:return e.abrupt("return");case 22:return e.next=24,t(Tm());case 24:return e.abrupt("return");case 25:if(u!==bi){e.next=29;break}return e.next=28,t(Cm());case 28:return e.abrupt("return");case 29:if(!l.isUserNew){e.next=33;break}return e.next=32,t(km());case 32:return e.abrupt("return");case 33:if(u!==mi){e.next=37;break}return e.next=36,t(po());case 36:return e.abrupt("return");case 37:e.next=42;break;case 39:e.prev=39,e.t0=e.catch(1),console.warn(e.t0);case 42:case"end":return e.stop()}}),e,null,[[1,39]])})));return function(t,n){return e.apply(this,arguments)}}());case 9:oo.instance.isSingleMode()&&this.gameplay.saveSystem.hasSavedGame()?this.gameplay.loadSavedGame():this.gameplay.checkGameModeToStartGame(),this.game.globalScene.events.on(Ti.MATCH_GAMEPLAY_START,this.gameplay.checkGameModeToStartGame),this.game.globalScene.screen.close(Qi.o4.NOTIFY_SCREEN);case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.startGameAsync=function(){var e=(0,a.Z)(r().mark((function e(){var t,n=this;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new(o())((function(e){n.facebook.on("startgame",e)})),this.facebook.gameStarted(),e.abrupt("return",t);case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.createBottomLogo=function(){var e=new wf(this);e.setDepth(ln.Z.FOOTER_LOGO),this.add.existing(e),Phaser.Display.Align.In.BottomCenter(e,this.gameZone),this.bottomLogo=e},n.createScreens=function(){this.screen.add(Qi.o4.NO_MORE_MOVES_SCREEN,zf),this.screen.add(Qi.o4.VICTORY_SCREEN,If),this.screen.add(Qi.o4.PLAY_SCREEN,zh),this.screen.add(Qi.o4.SETTINGS_SCREEN,ed),this.screen.add(Qi.o4.GAME_STATS_SCREEN,Kd),this.screen.add(Qi.o4.THEME_SCREEN,hp),this.screen.add(Qi.o4.HOW_TO_PLAY_SCREEN,fp),this.screen.add(Qi.o4.NOTIFICATION_SCREEN,jf),this.screen.add(Qi.o4.PLAY_WITH_FRIEND_GAME_OVER_SCREEN,Rg),this.screen.add(Qi.o4.PLAY_WITH_FRIEND_RESULT_SCREEN,bm),this.screen.add(Qi.o4.TOURNAMENTS_RESULT_SCREEN,lm)},n.checkNewUser=function(){var e=this;(this.player.getPlayerIsNew()||GameCore.Configs.Tutorial.ForceUseTutorial)&&this.time.delayedCall(1e3,(function(){e.screen.open(Qi.o4.HOW_TO_PLAY_SCREEN),e.scene.scene.player.incUserGuideDisplays()}))},n.update=function(e,t){this.gameplay.update(t),this.header.update()},n.sendTestDailyNotification=function(e){Lm.sendTestDailyNotification(e)},t}(Gi.Z),Nm=Bm;var Mm=Nm,Gm=fn.Z.DEFAULT,Fm=Gm.KEY,Zm=Gm.FRAME,Um=function(e){function t(t){var n;return(n=e.call(this,t,Fm,Zm.BUTTON_YELLOW_CIRCLE)||this).scene=void 0,n.scene=t,n.button.setSize(87,68).setDisplaySize(87,68),n.setName("Home"),n.createIcon(),n}return(0,f.Z)(t,e),t.prototype.createIcon=function(){var e=this.scene.add.image(0,0,Fm,Zm.ICON_FLAT_HOME);e.setSize(43,43).setDisplaySize(43,43),this.add(e),Phaser.Display.Align.In.Center(e,this)},t}(_o.Z),Wm=Um,Hm=fn.Z.DEFAULT,zm=Hm.KEY,Ym=Hm.FRAME,Km=function(e){function t(t){var n;return(n=e.call(this,t,zm,Ym.BUTTON_GREEN)||this).scene=void 0,n.scene=t,n.button.setWorldSize(170,72),n.setName("PlayWithFriends"),n.createLabel(),n}return(0,f.Z)(t,e),t.prototype.createLabel=function(){var e=this.scene.make.bitmapText({font:No.Z.PRIMARY.KEY,size:13,text:"PLAY"}),t=10;Phaser.Display.Align.In.Center(e,this,0,-t);var n=this.scene.make.bitmapText({font:No.Z.PRIMARY.KEY,size:9,text:"WITH FRIENDS"});t=12,Phaser.Display.Align.In.Center(n,this,0,t),this.add([e,n])},t}(_o.Z),Vm=Km,jm=fn.Z.DEFAULT,Xm=jm.KEY,qm=jm.FRAME,Jm=function(e){function t(t){var n;return(n=e.call(this,t,Xm,qm.BUTTON_YELLOW_CIRCLE)||this).scene=void 0,n.scene=t,n.button.setSize(87,68).setDisplaySize(87,68),n.setName("Share"),n.createIcon(),n}return(0,f.Z)(t,e),t.prototype.createIcon=function(){var e=this.scene.add.image(0,0,Xm,qm.ICON_FLAT_SHARE);e.setSize(43,43).setDisplaySize(43,43),this.add(e),Phaser.Display.Align.In.Center(e,this)},t}(_o.Z),Qm=Jm,$m=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n.homeButton=void 0,n.playButton=void 0,n.shareButton=void 0,n.scene=t,n.setName("FooterBar"),n.createButtons(),n.alignButtons(),n.scene.add.existing((0,Hi.Z)(n)),n}(0,f.Z)(t,e);var n=t.prototype;return n.alignButtons=function(){Phaser.Display.Align.In.Center(this.homeButton,this,-140),Phaser.Display.Align.In.Center(this.playButton,this,0),Phaser.Display.Align.In.Center(this.shareButton,this,140)},n.createButtons=function(){this.createHomeButton(),this.createPlayButton(),this.createShareButton()},n.createHomeButton=function(){this.homeButton=new Wm(this.scene),this.add(this.homeButton)},n.createPlayButton=function(){this.playButton=new Vm(this.scene),this.add(this.playButton)},n.createShareButton=function(){this.shareButton=new Qm(this.scene),this.add(this.shareButton)},t}(Phaser.GameObjects.Container),ev=$m,tv=n(584),nv=(function(e){function t(t){var n;return(n=e.call(this,t,"UpdateAbleObject")||this).updateInfo=void 0,n}(0,f.Z)(t,e)}(Phaser.GameObjects.GameObject),function(e){function t(t,n){var a;return(a=e.call(this,t,n)||this).classType=void 0,a.listConfigs=void 0,a.padding=void 0,a.startObjectIndex=void 0,a.endObjectIndex=void 0,a.listObjects=void 0,a.classType=n.classType,a.listConfigs=n.listConfigs,a.padding=n.padding?n.padding:0,a.objects.classType=a.classType,a.updateConfig(a.listConfigs),a}(0,f.Z)(t,e);var n=t.prototype;return n.reset=function(){e.prototype.reset.call(this),this.killAndHideAll()},n.getChildren=function(){var e;return Oe()(e=this.listObjects).call(e,(function(e){return void 0!=e&&e.active}))},n.updateConfig=function(e){var t;this.reset(),this.listConfigs=e,this.listObjects=Mt()(t=new Array(e.length)).call(t,void 0),this.addObjectIndex(0,0);var n=this.getEndObjectIndex();this.addObjectIndex(1,n),this.startObjectIndex=this.getStartObjectIndex(),this.endObjectIndex=this.getEndObjectIndex(),this.updateMaxHeight(),this.value=this.marginTop},n.killAndHideAll=function(){var e,t=this;this.listObjects instanceof Array&&De()(e=this.listObjects).call(e,(function(e){void 0!==e&&t.objects.killAndHide(e)}))},n.setItemPosition=function(e,t){var n=e.height;e.setPosition(0,n/2+(n+this.padding)*t-this.height/2)},n.updateMaxHeight=function(){return this.maxHeight=Math.max(this.listConfigs.length*(this.objHeight+this.padding)-this.padding+this.marginBottom-this.height,0)},n.updateObject=function(e){this.objects.incY(e);var t=this.getStartObjectIndex(),n=this.getEndObjectIndex();t!=this.startObjectIndex&&(t>this.startObjectIndex?this.killObjectIndex(this.startObjectIndex,t-1):this.addObjectIndex(t,this.startObjectIndex-1),this.startObjectIndex=t),n!=this.endObjectIndex&&(n<this.endObjectIndex?this.killObjectIndex(n+1,this.endObjectIndex):this.addObjectIndex(this.endObjectIndex+1,n),this.endObjectIndex=n)},n.killObjectIndex=function(e,t){for(var n=e;n<=t;n++){var a=this.listObjects[n];a&&(this.objects.killAndHide(a),this.listObjects[n]=void 0)}},n.addObjectIndex=function(e,t){for(var n=e;n<=t;n++){var a=this.padding,i=this.listConfigs;if(n>=i.length)return;if(this.listObjects[n])console.log("position "+n+" is not empty!");else{var r=this.objects.getFirstDead(!0),s=r.height,o=s/2+(s+a)*n+this.value-this.height/2;r.updateInfo(i[n]),r.setPosition(0,o),r.setActive(!0),r.setVisible(!0),this.addAt(r),this.listObjects[n]=r}}},n.getStartObjectIndex=function(){var e=this.objHeight,t=this.padding;return Math.max(Math.floor((0-this.value)/(e+t)),0)},n.getEndObjectIndex=function(){var e=this.objHeight,t=this.padding,n=this.listConfigs,a=e+t;return Math.min(Math.floor((this.height-this.value)/a),n.length)},n.addBackground=function(){var e="scroller-background";if(!this.scene.textures.exists(e)){var t=this.width,n=this.height,a=this.scene.add.graphics();a.fillStyle(65280,.2),a.fillRect(0,0,t,n),a.generateTexture(e,t,n),a.destroy()}var i=this.scene.add.image(0,0,e);this.add(i)},(0,ue.Z)(t,[{key:"objHeight",get:function(){var e=this.objects.getChildren();return 0==e.length?this.maxHeight=0:e[0].height}}]),t}(Md.Z)),av={targets:[],props:{alpha:{duration:500,value:{start:0,from:0,to:1},ease:Phaser.Math.Easing.Cubic.Out},scale:{duration:1e3,value:{start:.8,from:.8,to:1},ease:Phaser.Math.Easing.Elastic.Out,easeParams:[.1,.45]}}},iv=function(e){function t(t){return e.call(this,av,t)||this}return(0,f.Z)(t,e),t}(zi.Z),rv={targets:[],props:{alpha:{start:0,to:1,duration:500,ease:Phaser.Math.Easing.Cubic.Out},scale:{start:.8,to:1,duration:1e3,ease:Phaser.Math.Easing.Elastic.Out,easeParams:[.1,.45]},y:{start:0,to:0,duration:500,ease:Phaser.Math.Easing.Back.Out}},delay:0},sv=function(e){function t(t){return e.call(this,rv,t)||this}return(0,f.Z)(t,e),t}(zi.Z),ov=fn.Z.DEFAULT,cv=ov.KEY,uv=ov.FRAME,lv=function(e){function t(t,n){var a;return(a=e.call(this,t)||this).button=void 0,a.avatar=void 0,a.rankIcon=void 0,a.rankText=void 0,a.username=void 0,a.score=void 0,a.scoreText=void 0,a.background=void 0,a.showPopUp=void 0,a.showItems=void 0,a.payload=void 0,a.handleChallengeFriend=function(){var e=a.payload.playerId;a.scene.storage.dispatch(go(e))},a.createBackground(),a.updateSize(),a.createAvatar(),a.createRank(),a.createUsername(),a.createScore(),a.createButton(),n&&a.updateInfo(n),a.scene.add.existing((0,Hi.Z)(a)),a}(0,f.Z)(t,e);var n=t.prototype;return n.updateInfo=function(e){this.payload=(0,p.Z)({scoreRight:!0,isHighlight:!1,useChallenge:!1},e),this.updateBackground(),this.updateAvatar(),this.updateRank(),this.updateUsername(),this.updateScore(),this.updatePosition()},n.updatePosition=function(){var e=this.payload.scoreRight,t=this.payload.useChallenge;this.button.setVisible(!!t),e?Phaser.Display.Align.To.RightCenter(this.score,this.avatar,120):Phaser.Display.Align.To.RightCenter(this.score,this.avatar,80)},n.createBackground=function(){this.background=this.scene.make.image({key:cv,frame:uv.LEADERBOARD_BG_LIGHT}),this.background.setWorldSize(264,56),this.add(this.background)},n.updateBackground=function(){var e="";e=this.payload.isHighlight?uv.LEADERBOARD_BG_LIGHT:uv.LEADERBOARD_BG_DARK,this.background.setFrame(e),this.background.setWorldSize(264,56)},n.updateSize=function(){var e=this.background,t=e.width,n=e.height;this.setSize(t,n)},n.createAvatar=function(){this.avatar=new wc(this.scene,{key:cv,frame:uv.AVATAR_FRAME_YELLOW_SMALL,background:uv.AVATAR_BG_YELLOW_SMALL,width:47.5,height:49.5,radius:40}),this.add(this.avatar),Phaser.Display.Align.In.LeftCenter(this.avatar,this,-10)},n.updateAvatar=function(){var e=this.payload,t=e.playerId,n=e.photo;this.avatar.loadPhoto(t,n)},n.createRank=function(){this.createRankIcon(1),this.createRankText(1)},n.updateRank=function(){var e=this.payload.rank;this.updateRankIcon(e),this.updateRankText(e)},n.getRankIconFrame=function(e){var t=uv.ICON_FLAG;switch(e){case 1:t=uv.ICON_CUP_GOLD;break;case 2:t=uv.ICON_CUP_SILVER;break;case 3:t=uv.ICON_CUP_COPPER}return t},n.createRankIcon=function(e){var t=this.getRankIconFrame(e);this.rankIcon=this.scene.make.image({key:cv,frame:t}),t!=uv.ICON_FLAG?this.rankIcon.setWorldSize(46,30):this.rankIcon.setWorldSize(27,27),this.add(this.rankIcon);var n=e<=3?13:16;Phaser.Display.Align.In.Center(this.rankIcon,this.avatar,0,n)},n.updateRankIcon=function(e){var t=this.getRankIconFrame(e);this.rankIcon.setFrame(t),t!=uv.ICON_FLAG?this.rankIcon.setWorldSize(46,30):this.rankIcon.setWorldSize(27,27)},n.createRankText=function(e){this.rankText=this.scene.make.bitmapText({font:No.Z.PRIMARY.KEY,size:this.scene.fontSize(15),text:""+e,origin:{x:.5,y:.5}}),this.add(this.rankText),Phaser.Display.Align.In.Center(this.rankText,this.rankIcon,0,-2)},n.updateRankText=function(e){this.rankText.setText(""+e)},n.getShortName=function(e){var t=e.substring(0,7);return t.split(" ")[0]||t},n.createUsername=function(){this.username=this.scene.make.text({text:this.getShortName("FRIEND NAME"),style:{fontFamily:No.Z.FONT_FAMILY,fontSize:"15px",fontStyle:"bold"}}),this.username.setTint(10317116),this.username.setHighQuality(),Phaser.Display.Align.In.LeftCenter(this.username,this.avatar,-53),this.add(this.username)},n.updateUsername=function(){var e=this.payload.name;this.username.setText(this.getShortName(e))},n.createScore=function(){this.score=this.scene.add.container(),this.scoreText=this.scene.make.bitmapText({font:No.Z.PRIMARY.KEY,size:this.scene.fontSize(18),text:"132500",origin:{x:.5,y:.5}}),this.scoreText.setTint(6565e3);var e=this.scene.make.image({key:cv,frame:uv.ICON_CUP_MINI});e.setWorldSize(17,18),this.score.add([this.scoreText,e]);var t=-20;Phaser.Display.Align.In.LeftCenter(this.scoreText,e,t),this.add(this.score),t=10,Phaser.Display.Align.In.Center(this.score,this,t)},n.updateScore=function(){var e=this.payload.score;this.scoreText.setText(e)},n.createButton=function(){this.button=new _o.Z(this.scene,cv,uv.BUTTON_GREEN_MINOR_MINI,54,34.5),this.button.setName("ChallengeFriend");var e=this.scene.make.bitmapText({font:No.Z.PRIMARY.KEY,size:this.scene.fontSize(18),text:"PLAY"});Phaser.Display.Align.In.Center(e,this.button,0,-2),this.button.add(e),Phaser.Display.Align.In.RightCenter(this.button,this,-2),this.add(this.button),this.button.onClick=this.handleChallengeFriend},n.runShowPopUpAnimation=function(e,t){this.scene.tweens.killTweensOf(this),this.showPopUp=new sv({targets:[this],delay:e,duration:t,props:{y:{start:this.y+70,to:this.y}}}),this.showPopUp.play()},n.runShowItemAnimation=function(e,t){var n=this.getAll();this.scene.tweens.killTweensOf(n),this.showItems=new iv({targets:n,duration:t,delay:this.scene.tweens.stagger(50,{start:e+50}),props:{scale:{duration:1e3,getStart:function(e){return.8*e.scale},getEnd:function(e){return e.scale},ease:Phaser.Math.Easing.Elastic.Out,easeParams:[.1,.45]}}}),this.showItems.play()},n.runShowUpAnimation=function(e,t){void 0===e&&(e=0),void 0===t&&(t=300);var n=100*e;this.runShowPopUpAnimation(n,t),this.runShowItemAnimation(n,t)},t}(Phaser.GameObjects.Container),hv=lv;function dv(e,t){var n="undefined"!==typeof C()&&x()(e)||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){var n;if(!e)return;if("string"===typeof e)return pv(e,t);var a=E()(n=Object.prototype.toString.call(e)).call(n,8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return T()(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return pv(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var a=0;return function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function pv(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}var fv=function(e){function t(t){var n;(n=e.call(this,t)||this).scene=void 0,n.currentPlayerId=void 0,n.scroller=void 0,n.scene=t;var a=n.scene.player;return n.currentPlayerId=a.getPlayerId(),n.createReuseScroller(),n.scene.add.existing((0,Hi.Z)(n)),n}(0,f.Z)(t,e);var n=t.prototype;return n.createReuseScroller=function(){this.scroller=new nv(this.scene,{classType:hv,listConfigs:[],width:280,height:310,padding:10,marginTop:10,marginBottom:10}),this.scene.renderer instanceof Phaser.Renderer.WebGL.WebGLRenderer&&this.scroller.createBound(fn.Z.DEFAULT.KEY,fn.Z.DEFAULT.FRAME.BLANK,40,16643027),this.scroller.createMask(),this.scroller.setPosition(0,25),this.add(this.scroller)},n.updateData=function(e){var t=this.scene.layoutManager.objects.board,n=ka()(e)||[];if(n.length<1)return this.scene.isSwitchable=!0,void t.showMessage(!0,"Leaderboard is empty!");for(var a,i=[],r=dv(Pa()(n).call(n,(function(e,t){return+t.score-+e.score})));!(a=r()).done;){var s=a.value,o=s.playerId,c=s.photo,u=s.score,l=s.name,h=s.rank;if(o){var d=this.currentPlayerId===o,p={playerId:o,photo:c,name:l,rank:h,score:u,scoreRight:this.scene.tabId===nr,useChallenge:!d&&this.scene.tabId===ar,isHighlight:d};i.push(p)}}this.scroller.updateConfig(i),this.showLeaders()},n.removeLeaders=function(){this.scroller.updateConfig([])},n.getLeaders=function(){return this.scroller.getChildren()},n.showLeaders=function(){var e=this,t=this.scene.layoutManager.objects.board,n=this.getLeaders();if(n.length<1)return this.scene.isSwitchable=!0,void t.showMessage(!0,"Leaderboard is empty!");for(var a=Math.min(n.length,6),i=0;i<a;i++){var r=n[i];r&&(r.setVisible(!0),r.runShowUpAnimation(i,300))}var s=300+100*a+250;this.scene.time.delayedCall(s,(function(){e.scene.isSwitchable=!0,e.scroller.setEnable(!0)}))},t}(Phaser.GameObjects.Container),gv=fv,mv=fn.Z.DEFAULT,vv=mv.KEY,yv=mv.FRAME,bv=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n.tabWorld=void 0,n.tabFriends=void 0,n.scene=t,n.createTabFriends(),n.createTabWorld(),n}(0,f.Z)(t,e);var n=t.prototype;return n.selectTabFriends=function(){this.tabFriends.button.setFrame(yv.LEADERBOARD_TAB_ON),this.tabWorld.button.setFrame(yv.LEADERBOARD_TAB_OFF)},n.selectTabWorld=function(){this.tabFriends.button.setFrame(yv.LEADERBOARD_TAB_OFF),this.tabWorld.button.setFrame(yv.LEADERBOARD_TAB_ON)},n.createTabFriends=function(){this.tabFriends=new _o.Z(this.scene,vv,yv.LEADERBOARD_TAB_OFF),this.tabFriends.button.setSize(85,33).setDisplaySize(85,33),this.tabFriends.setName("FriendsTab");var e=this.scene.make.bitmapText({font:No.Z.PRIMARY.KEY,size:9,text:"FRIENDS",origin:{x:.5,y:.55}});this.tabFriends.add(e),Phaser.Display.Align.In.Center(this.tabFriends,this,-55),this.add(this.tabFriends)},n.createTabWorld=function(){this.tabWorld=new _o.Z(this.scene,vv,yv.LEADERBOARD_TAB_OFF),this.tabWorld.button.setSize(85,33).setDisplaySize(85,33),this.tabWorld.setName("WorldTab");var e=this.scene.make.bitmapText({font:No.Z.PRIMARY.KEY,size:9,text:"WORLD",origin:{x:.5,y:.55}});this.tabWorld.add(e),Phaser.Display.Align.In.Center(this.tabWorld,this,55),this.add(this.tabWorld)},t}(Phaser.GameObjects.Container),Av=bv,Sv=fn.Z.DEFAULT,Ev=Sv.KEY,wv=Sv.FRAME,Tv=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n.background=void 0,n.tabs=void 0,n.leaders=void 0,n.loading=void 0,n.message=void 0,n.messageAnimation=void 0,n.scene=t,n.setSize(310,430),n.createBackground(),n.createLoading(),n.createMessage(),n.createContents(),n.createAnimation(),n.scene.add.existing((0,Hi.Z)(n)),n}(0,f.Z)(t,e);var n=t.prototype;return n.showLoading=function(e){this.loading.setVisible(e),this.showMessage(!1)},n.showMessage=function(e,t){this.message.setVisible(e),t&&(this.message.setText(t),this.messageAnimation.play())},n.createBackground=function(){this.background=new nc(this.scene,0,0,310,430),this.add(this.background)},n.createLoading=function(){this.loading=new Ji(this.scene),this.loading.setTint(12237498),this.loading.setWorldSize(113,113),this.add(this.loading),Phaser.Display.Align.In.Center(this.loading,this.background)},n.createMessage=function(){this.message=this.scene.make.bitmapText({font:No.Z.PRIMARY.KEY,size:this.scene.fontSize(18),origin:{x:.5,y:.5}}),this.message.setTint(10317116),this.add(this.message),Phaser.Display.Align.In.Center(this.message,this.background)},n.createContents=function(){this.createLeaders(),this.createTitle(),this.createTabs()},n.createLeaders=function(){this.leaders=new gv(this.scene),this.add(this.leaders),Phaser.Display.Align.In.Center(this.leaders,this.background,0,0)},n.createTitle=function(){var e=this.scene.add.container(),t=this.scene.make.image({key:Ev,frame:wv.RIBBON_SHORT});t.setWorldSize(271,81);var n=this.scene.make.bitmapText({font:No.Z.PRIMARY.KEY,size:this.scene.fontSize(30),text:"Leaderboards"});Phaser.Display.Align.In.Center(n,t,0,-10),e.add([t,n]),Phaser.Display.Align.In.TopCenter(e,this.background,0,5),this.add(e)},n.createTabs=function(){this.tabs=new Av(this.scene),this.add(this.tabs),Phaser.Display.Align.In.TopCenter(this.tabs,this.background,0,-55)},n.createAnimation=function(){this.messageAnimation=new tv.Z({targets:[this.message],duration:60,repeat:2})},t}(Phaser.GameObjects.Container),Iv=Tv,Cv=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n.screen=void 0,n.board=void 0,n.footer=void 0,n.scene=t,n.screen=t.screen,n.createObjects(),n}(0,f.Z)(t,e);var n=t.prototype;return n.createObjects=function(){this.createMainContent(),this.createFooterBar()},n.createMainContent=function(){this.board=new Iv(this.scene)},n.createFooterBar=function(){this.footer=new ev(this.scene)},t}(xo),kv=Cv,xv=function(e){function t(t){var n;return(n=e.call(this,t)||this).objects=void 0,n.objects=null,n}(0,f.Z)(t,e);var n=t.prototype;return n.alignUI=function(){if(null!==this.objects){var e=this.scene.gameZone,t=this.objects,n=t.board,a=t.footer;Phaser.Display.Align.In.Center(n,e,0,-20),Phaser.Display.Align.In.BottomCenter(a,e,0,-50)}},n.createGroups=function(){e.prototype.createGroups.call(this)},n.setUIObjects=function(t){e.prototype.setUIObjects.call(this,t),this.addUIObjectsToGroups()},n.addUIObjectsToGroups=function(){null!==this.objects&&this.addObjectForGuideUI()},n.addObjectForGuideUI=function(){this.objects},t}(uu),Pv=xv,_v=function(e){function t(){return e.apply(this,arguments)||this}return(0,f.Z)(t,e),t.prototype.alignUI=function(){e.prototype.alignUI.call(this)},t}(Pv),Ov=_v,Rv=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n.scene=t,n}(0,f.Z)(t,e);var n=t.prototype;return n.createObjects=function(){this.objects=new kv(this.scene)},n.createLayouts=function(){this.scene.world.isLandscape()?this.layout=new Ov(this.scene):this.layout=new Pv(this.scene),this.layout.setUIObjects(this.objects)},n.initUILogic=function(){var e=this.objects,t=e.footer,n=e.board;t.homeButton.onClick=this.scene.handleHomeClick,t.playButton.onClick=this.scene.handlePlayWithFriend,t.shareButton.onClick=this.scene.handleShareLeaderboard,n.tabs.tabFriends.onClick=this.scene.handleSelectFriendTab,n.tabs.tabWorld.onClick=this.scene.handleSelectWorldTab},n.updateUIState=function(){},t}(Su),Dv=Rv,Lv=GameCore.Configs.LeadersBoard,Bv=function(e){function t(){for(var t,n,a=arguments.length,i=new Array(a),r=0;r<a;r++)i[r]=arguments[r];return(n=e.call.apply(e,_()(t=[this]).call(t,i))||this).layoutManager=void 0,n.tabId=void 0,n.offset=void 0,n.isRequesting=void 0,n.isSwitchable=void 0,n.run=function(){n.layoutManager.init();var e=n.layoutManager.objects.board;n.isRequesting=!1;var t=[{selector:Mr,callback:function(t){if(n.isRequesting=t,e.showLoading(t),!1===t){var a=n.game.storage.getState(),i=Nr(a);e.leaders.updateData(i)}}}];n.handleStateChange(t),n.selectFriendTab(),n.layoutManager.start()},n.handleSelectFriendTab=function(){n.isRequesting||n.isSwitchable&&(n.isSwitchable=!1,n.selectFriendTab())},n.handleSelectWorldTab=function(){n.isRequesting||n.isSwitchable&&(n.isSwitchable=!1,n.selectWorldTab())},n.handlePlayWithFriend=function(){n.storage.dispatch(mo())},n.handleHomeClick=function(){n.scene.switch(_i.C.DASHBOARD_SCENE)},n.handleShareLeaderboard=function(){n.storage.dispatch(Bc())},n}(0,f.Z)(t,e);var n=t.prototype;return n.preload=function(){this.events.on("wake",this.run),this.events.on("create",this.run)},n.create=function(){e.prototype.create.call(this),this.gameZone.setPosition(0,0),this.createBackground(Ui.Z.BACKGROUND.KEY,"0"),this.scene.bringToTop(),this.createLayoutManager()},n.selectFriendTab=function(){var e=this.layoutManager.objects.board;this.tabId=ar,this.offset=0,e.showLoading(!0),e.leaders.removeLeaders(),e.tabs.selectTabFriends(),this.storage.dispatch(Rr(Lv.LeaderboardId,ar,Lv.Limit,this.offset))},n.selectWorldTab=function(){var e=this.layoutManager.objects.board;this.tabId=nr,this.offset=0,e.showLoading(!0),e.leaders.removeLeaders(),e.tabs.selectTabWorld(),this.storage.dispatch(Rr(Lv.LeaderboardId,nr,Lv.Limit,this.offset))},n.loadMoreTabFriend=function(){this.isRequesting||(this.offset+=Lv.Limit,this.storage.dispatch(Rr(Lv.LeaderboardId,ar,Lv.Limit,this.offset)))},n.loadMoreTabWorld=function(){this.isRequesting||(this.offset+=Lv.Limit,this.storage.dispatch(Rr(Lv.LeaderboardId,nr,Lv.Limit,this.offset)))},n.createLayoutManager=function(){this.layoutManager=new Dv(this)},t}(Gi.Z);var Nv,Mv,Gv=Bv,Fv=function(e){function t(t,n){var a;return(a=e.call(this,t,n)||this).name="LoadResourceFail",a.message=t||"Load resource fail",a.payload=n,a}return(0,f.Z)(t,e),t}((0,z.Z)(Error)),Zv=n(374),Uv=new(n.n(Zv)()),Wv=[{id:"pass-levels",title:"Pass 10 Levels",require:{level:10},reward:{diamond:100}},{id:"collect-diamonds",title:"Collect 300 diamonds",require:{diamond:300},reward:{diamond:100}},{id:"invite-friends",title:"Invite 2 friends",require:{friend:2},reward:{diamond:200}},{id:"reach-score",title:"Reach Total Scores",require:{score:1e5},reward:{diamond:200}}],Hv=function(){var e=(0,a.Z)(r().mark((function e(){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Wv);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),zv={PASS_LEVELS:{ID:"pass-levels",EVENTS:{PASS_LEVEL:"pass-level"}},COLLECT_DIAMONDS:{ID:"collect-diamonds",EVENTS:{COLLECT_DIAMONDS:"collect-diamonds"}},INVITE_FRIENDS:{ID:"invite-friends",EVENTS:{INVITED_FRIEND:"INVITED_FRIEND"}},REACH_SCORE:{ID:"reach-score",EVENTS:{ADD_SCORE:"add-score"}},EVENTS:{TASKS_RESET:"tasks-reset",NOTICE_UPDATE:"notice-update"}},Yv=(0,pe.P1)([function(e){var t;return null==(t=e.dailyTasks)?void 0:t.tasks}],(function(e){return e})),Kv=(0,pe.P1)([function(e){var t;return null==(t=e.dailyTasks)?void 0:t.process}],(function(e){return e})),Vv=(0,pe.P1)([function(e){var t;return null==(t=e.dailyTasks)?void 0:t.isRequesting}],(function(e){return e})),jv=((0,pe.P1)([function(e){var t;return null==(t=e.dailyTasks)?void 0:t.isNotice}],(function(e){return e})),GameCore.Configs.DailyTasks),Xv=function(e){return function(t){t({type:Wa,payload:{tasks:e}});var n=window.game.player.getCustomData("dailyTasks")||{},a=n.startedTime,i=void 0===a?0:a,r=n.logTasks,s=void 0===r?{}:r;t((Date.now()-i)/1e3>jv.Duration?qv(e):Jv(s))}},qv=function(e){return function(t){var n={};e.forEach((function(e){var t=e.id,a=e.require;n[t]={},ie()(a).forEach((function(e){var a;n[t]=((a={})[e]=0,a.rewarded=!1,a)}))})),window.game.player.setCustomData("dailyTasks",{logTasks:n,startedTime:Date.now()}),t(Jv(n)),Uv.emit(zv.EVENTS.TASKS_RESET)}},Jv=function(e){return{type:Ha,payload:{process:e}}},Qv=function(){var e=(window.game.player.getCustomData("dailyTasks")||{}).logTasks;return GameCore.Utils.Json.clone(e)},$v=function(){function e(e,t){var n=this;this.game=void 0,this.id=void 0,this.taskData=void 0,this.requireTypes=void 0,this.process=function(e){var t,a=e.type,i=e.value;if(!(i<1)&&(-1!==qt()(t=n.requireTypes).call(t,a)&&!n.isPassRequiredTarget(a)&&n.processMore(e))){a=e.type,i=e.value;var r=n.getCorrectValue(a,i);n.game.storage.dispatch(function(e,t,n){return function(a){var i=Qv();if(GameCore.Utils.Valid.isObject(i)){var r=i;GameCore.Utils.Object.hasOwn(r,e)&&(r[e].rewarded||(r[e][t]+=n,window.game.player.setCustomData("dailyTasks",{logTasks:r}),a({type:za,payload:{id:e,type:t,value:n}})))}}}(n.id,a,r)),n.isTaskFinished(a)&&n.game.storage.dispatch(function(e){return function(t){t({type:Ya,payload:{id:e}}),Uv.emit(zv.EVENTS.NOTICE_UPDATE)}}(n.id))}},this.game=e,this.id=t,this.init()}var t=e.prototype;return t.init=function(){var e=this,t=this.game.storage.getState(),n=Yv(t)||[];if(!((null==n?void 0:n.length)<1)){var a=null==n?void 0:L()(n).call(n,(function(t){return t.id===e.id}));a&&(this.taskData=a,this.requireTypes=ie()(this.taskData.require),this.initEvents())}},t.getDataByType=function(e){var t=this.game.storage.getState(),n=Kv(t),a={value:0,target:0};if(!n)return a;if(!GameCore.Utils.Object.hasOwn(n,this.taskData.id))return a;var i=n[this.taskData.id];if(GameCore.Utils.Valid.isObject(i)&&GameCore.Utils.Object.hasOwn(i,e)){var r=i[e];"number"===typeof r&&(a.value=r)}return a.target=this.taskData.require[e]||0,a},t.getCorrectValue=function(e,t){var n=this.getDataByType(e),a=n.value,i=n.target,r=t;return a+t>i&&(r=i-a),Math.round(r)},t.isPassRequiredTarget=function(e){var t=this.getDataByType(e);return t.value>=t.target},t.isTaskFinished=function(e){var t=this.getDataByType(e);return t.value>=t.target},e}(),ey=zv.COLLECT_DIAMONDS,ty=ey.ID,ny=ey.EVENTS,ay=function(e){function t(t){return e.call(this,t,ty)||this}(0,f.Z)(t,e);var n=t.prototype;return n.initEvents=function(){Uv.off(ny.COLLECT_DIAMONDS,this.process),Uv.on(ny.COLLECT_DIAMONDS,this.process)},n.processMore=function(){return!0},t}($v),iy=zv.INVITE_FRIENDS,ry=iy.ID,sy=iy.EVENTS,oy=function(e){function t(t){var n;return(n=e.call(this,t,ry)||this).invitedFriends=void 0,n.resetData=function(){n.invitedFriends=[]},n.resetData(),n}(0,f.Z)(t,e);var n=t.prototype;return n.initEvents=function(){var e=this;Uv.off(sy.INVITED_FRIEND,this.process),Uv.on(sy.INVITED_FRIEND,this.process),Uv.on(zv.EVENTS.TASKS_RESET,(function(){e.resetData()}))},n.processMore=function(e){var t,n=e.opponentId;return!!n&&(-1===qt()(t=this.invitedFriends).call(t,n)&&(this.invitedFriends.push(n),!0))},t}($v),cy=zv.PASS_LEVELS,uy=cy.ID,ly=cy.EVENTS,hy=function(e){function t(t){return e.call(this,t,uy)||this}(0,f.Z)(t,e);var n=t.prototype;return n.initEvents=function(){Uv.off(ly.PASS_LEVEL,this.process),Uv.on(ly.PASS_LEVEL,this.process)},n.processMore=function(){return!0},t}($v),dy=zv.REACH_SCORE,py=dy.ID,fy=dy.EVENTS,gy=function(e){function t(t){var n;return(n=e.call(this,t,py)||this).totalScore=void 0,n.lastUpdate=void 0,n.totalScore=0,n.lastUpdate=Date.now(),n}(0,f.Z)(t,e);var n=t.prototype;return n.initEvents=function(){Uv.off(fy.ADD_SCORE,this.process),Uv.on(fy.ADD_SCORE,this.process)},n.processMore=function(e){var t=e.value,n=Date.now();return n-this.lastUpdate<3e3?(this.totalScore+=t,!1):(e.value+=this.totalScore,this.totalScore=0,this.lastUpdate=n,!0)},t}($v),my=function(){function e(e){var t=this;this.game=void 0,this.eventsListener=void 0,this.init=(0,a.Z)(r().mark((function e(){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.eventsListener={},e.next=3,t.initData();case 3:t.initEvents();case 4:case"end":return e.stop()}}),e)}))),this.initData=(0,a.Z)(r().mark((function e(){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.game.storage.dispatch(function(){var e=(0,a.Z)(r().mark((function e(t,n){var a,i;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=n(),!Vv(a)){e.next=4;break}return e.abrupt("return");case 4:return t({type:Ua,payload:{}}),e.next=7,Hv();case 7:i=e.sent,t(Xv(i));case 9:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}());case 2:case"end":return e.stop()}}),e)}))),this.game=e,this.init()}var t=e.prototype;return t.getEventListener=function(e){return this.eventsListener[e]},t.initEvents=function(){this.eventsListener[zv.PASS_LEVELS.ID]=new hy(this.game),this.eventsListener[zv.REACH_SCORE.ID]=new gy(this.game),this.eventsListener[zv.INVITE_FRIENDS.ID]=new oy(this.game),this.eventsListener[zv.COLLECT_DIAMONDS.ID]=new ay(this.game)},e}(),vy=my,yy=[{name:"collect-red-gems",id:"collect-gems",require:{red:5},reward:50},{name:"collect-blue-gems",id:"collect-gems",require:{blue:5},reward:50},{name:"collect-pink-gems",id:"collect-gems",require:{pink:5},reward:50},{name:"collect-green-gems",id:"collect-gems",require:{green:5},reward:50},{name:"collect-yellow-gems",id:"collect-gems",require:{yellow:5},reward:50},{name:"collect-red-blue-gems",id:"collect-gems",require:{red:5,blue:5},reward:120},{name:"collect-red-pink-gems",id:"collect-gems",require:{red:5,pink:5},reward:120},{name:"collect-red-green-gems",id:"collect-gems",require:{red:5,green:5},reward:120},{name:"collect-red-yellow-gems",id:"collect-gems",require:{red:5,yellow:5},reward:120},{name:"collect-blue-pink-gems",id:"collect-gems",require:{blue:5,pink:5},reward:120},{name:"collect-blue-green-gems",id:"collect-gems",require:{blue:5,green:5},reward:120},{name:"collect-blue-yellow-gems",id:"collect-gems",require:{blue:5,yellow:5},reward:120},{name:"collect-pink-green-gems",id:"collect-gems",require:{pink:5,green:5},reward:120},{name:"collect-pink-yellow-gems",id:"collect-gems",require:{pink:5,yellow:5},reward:120},{name:"collect-green-yellow-gems",id:"collect-gems",require:{green:5,yellow:5},reward:120},{name:"collect-red-blue-pink-gems",id:"collect-gems",require:{red:5,blue:5,pink:5},reward:210},{name:"collect-red-blue-green-gems",id:"collect-gems",require:{red:5,blue:5,green:5},reward:210},{name:"collect-red-blue-yellow-gems",id:"collect-gems",require:{red:5,blue:5,yellow:5},reward:210},{name:"collect-red-pink-green-gems",id:"collect-gems",require:{red:5,pink:5,green:5},reward:210},{name:"collect-red-pink-yellow-gems",id:"collect-gems",require:{red:5,pink:5,yellow:5},reward:210},{name:"collect-red-green-yellow-gems",id:"collect-gems",require:{red:5,green:5,yellow:5},reward:210},{name:"collect-blue-pink-green-gems",id:"collect-gems",require:{blue:5,pink:5,green:5},reward:210},{name:"collect-blue-pink-yellow-gems",id:"collect-gems",require:{blue:5,pink:5,yellow:5},reward:210},{name:"collect-blue-green-yellow-gems",id:"collect-gems",require:{blue:5,green:5,yellow:5},reward:210},{name:"collect-pink-green-yellow-gems",id:"collect-gems",require:{pink:5,green:5,yellow:5},reward:210}],by=function(){var e=(0,a.Z)(r().mark((function e(){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",yy);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Ay=(0,pe.P1)([function(e){var t;return null==(t=e.missions)?void 0:t.missions}],(function(e){return e})),Sy=(0,pe.P1)([function(e){var t;return null==(t=e.missions)?void 0:t.isRequesting}],(function(e){return e})),Ey=((0,pe.P1)([Ay,function(e,t){return t.name}],(function(e,t){return e?"string"!==typeof t?null:GameCore.Utils.Object.hasOwn(e,t)?e[t]:null:null})),function(e){return{type:Na,payload:{missions:e}}}),wy=fn.Z.GAMEPLAY.FRAME,Ty=wy.TILE_RED,Iy=wy.TILE_BLUE,Cy=wy.TILE_PINK,ky=wy.TILE_GREEN,xy=wy.TILE_YELLOW,Py=wy.TILE_FREEZE,_y=wy.TILE_COLORFUL,Oy=wy.TILE_COLOR_CHANGE,Ry={RED:"red",BLUE:"blue",PINK:"pink",GREEN:"green",YELLOW:"yellow"},Dy={FREEZE:"freeze",COLORFUL:"colorful",COLOR_CHANGE:"color_change"},Ly=Ry.RED,By=Ry.BLUE,Ny=Ry.PINK,My=Ry.GREEN,Gy=Ry.YELLOW,Fy=Dy.FREEZE,Zy=Dy.COLORFUL,Uy=Dy.COLOR_CHANGE,Wy=((Nv={})[Ly]="r",Nv[By]="b",Nv[Ny]="p",Nv[My]="g",Nv[Gy]="y",Nv[Fy]="f",Nv[Zy]="c",Nv[Uy]="m",Nv),Hy={SIZE:37,STATUS:{READY:"ready",MOVING:"moving",CAPTURED:"captured"},FRAME:(Mv={},Mv[Ly]=Ty,Mv[By]=Iy,Mv[Ny]=Cy,Mv[My]=ky,Mv[Gy]=xy,Mv[Fy]=Py,Mv[Zy]=_y,Mv[Uy]=Oy,Mv),SETS:{SET_3:"set_3",SET_4:"set_4",SET_5:"set_5",SET_6:"set_6",SET_7:"set_7",SET_8:"set_8",SET_9:"set_9"},COLORS:Ry,SPECIALS:Dy,HASH:Wy},zy={GIFT:{ID:"ItemGift"},PAINT:{ID:"ItemPaint"},HAMMER:{ID:"ItemHammer"},SHUFFLE:{ID:"ItemShuffle"},CHANGE_COLOR:{ID:"ItemChangeColor"}},Yy={TYPES:{COLLECT_GEMS:"collect-gems",USE_ITEM:"use-item",COMBO:"combo"},EVENTS:{MISSION_START:"mission-start",MISSION_UPDATE:"mission-update",MISSION_FAILED:"mission-failed",MISSION_COMPLETED:"mission-completed"},OBJECTS:(0,p.Z)({},Hy.COLORS,Hy.SPECIALS,{PAINT:zy.PAINT.ID,HAMMER:zy.HAMMER.ID,SHUFFLE:zy.SHUFFLE.ID})},Ky=(0,pe.P1)([function(e){var t;return null==(t=e.missions)?void 0:t.mission}],(function(e){return e})),Vy=((0,pe.P1)([Ky],(function(e){return e?e.name:null})),function(){function e(e,t,n){var a=this;this.game=void 0,this.id=void 0,this.name=void 0,this.reward=void 0,this.process=function(e){var t=e.id,n=e.type,i=e.value;i<1||a.id===t&&a.isTypeRequired(n)&&a.processMore(e)&&(a.game.storage.dispatch(function(e,t,n){return{type:Ma,payload:{name:e,type:t,value:n}}}(a.name,n,i)),a.isMissionComplete()&&(Uv.emit(Yy.EVENTS.MISSION_COMPLETED,{name:a.name,reward:a.reward}),a.game.storage.dispatch(function(e){return{type:Ga,payload:{name:e}}}(a.name))))},this.id=t,this.name=n,this.game=e}var t=e.prototype;return t.start=function(){var e=this.game.storage.getState(),t=Ky(e);t&&t.name===this.name&&(this.reward=t.reward,this.initEvents())},t.getMissionData=function(){var e=this.game.storage.getState(),t=Ky(e);return t?t.name!==this.name?null:t:null},t.getDataByType=function(e){var t=this.getMissionData();if(!t)return null;var n=t.require[e];return{value:t.process[e],target:n}},t.isTypeRequired=function(e){var t=this.getDataByType(e);return!!t&&t.target>0},t.isMissionComplete=function(){var e=this.getMissionData();if(!e)return!0;var t=e.require,n=e.process,a=!0;return ie()(t).forEach((function(e){if(a){var i=t[e];n[e]<i&&(a=!1)}})),a},e}()),jy=Vy,Xy=Yy.EVENTS,qy=Yy.TYPES,Jy=function(e){function t(t,n){return e.call(this,t,qy.COLLECT_GEMS,n)||this}(0,f.Z)(t,e);var n=t.prototype;return n.initEvents=function(){Uv.off(Xy.MISSION_UPDATE,this.process),Uv.on(Xy.MISSION_UPDATE,this.process)},n.processMore=function(){return!0},t}(jy),Qy=Yy.EVENTS,$y=Yy.TYPES,eb=function(e){function t(t,n){return e.call(this,t,$y.COMBO,n)||this}(0,f.Z)(t,e);var n=t.prototype;return n.initEvents=function(){Uv.off(Qy.MISSION_UPDATE,this.process),Uv.on(Qy.MISSION_UPDATE,this.process)},n.processMore=function(e){var t=this.getMissionData();if(!t)return!1;var n=e.type;return e.value>=t.require[n]},t}(jy),tb=Yy.EVENTS,nb=Yy.TYPES,ab=function(e){function t(t,n){return e.call(this,t,nb.USE_ITEM,n)||this}(0,f.Z)(t,e);var n=t.prototype;return n.initEvents=function(){Uv.off(tb.MISSION_UPDATE,this.process),Uv.on(tb.MISSION_UPDATE,this.process)},n.processMore=function(e){return console.log("UseItem",{payload:e}),!0},t}(jy),ib=function(){function e(e){var t=this;this.game=void 0,this.listener=void 0,this.init=(0,a.Z)(r().mark((function e(){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.initData();case 2:t.initListeners(),t.initEvents();case 4:case"end":return e.stop()}}),e)}))),this.initData=(0,a.Z)(r().mark((function e(){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.game.storage.dispatch(function(){var e=(0,a.Z)(r().mark((function e(t,n){var a,i;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=n(),!Sy(a)){e.next=4;break}return e.abrupt("return");case 4:return t({type:Ba,payload:{}}),e.next=7,by();case 7:i=e.sent,t(Ey(i));case 9:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}());case 2:case"end":return e.stop()}}),e)}))),this.startListener=function(e){t.listener[e]&&t.listener[e].start()},this.game=e,this.init()}var t=e.prototype;return t.initListeners=function(){var e=this;this.listener={};var t=this.game.storage.getState(),n=Ay(t);n&&ie()(n).forEach((function(t){switch(n[t].id){case Yy.TYPES.COLLECT_GEMS:e.listener[t]=new Jy(e.game,t);break;case Yy.TYPES.COMBO:e.listener[t]=new eb(e.game,t);break;case Yy.TYPES.USE_ITEM:e.listener[t]=new ab(e.game,t)}}))},t.initEvents=function(){Uv.off(Yy.EVENTS.MISSION_START,this.startListener),Uv.on(Yy.EVENTS.MISSION_START,this.startListener)},e}(),rb=ib,sb=n(556),ob={BACKGROUND:{KEY:"background",FILE:"./assets/music/bg_music.mp3"},EFFECTS:{KEY:"effects",FILE:"./assets/sounds/effects.mp3",JSON:"./assets/sounds/effects.json",PATH:"./assets/sounds/"}},cb=GameCore.Configs.Notification.ApiUrl,ub=function(){var e=(0,a.Z)(r().mark((function e(t){var n,a;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.playerId,e.next=3,(0,at.v)("players/"+n,t,{},cb,10);case 3:return a=e.sent,e.abrupt("return",(null==a?void 0:a.data)||{});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),lb=GameCore.Configs,hb=lb.AppId,db=lb.Notification,pb=function(e){function t(){for(var t,n,i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];return(n=e.call.apply(e,_()(t=[this]).call(t,s))||this).isMusicLoaded=!1,n.processAfterUpdatePlayerProfile=function(){db.Enable&&(n.updatePlayerProfileToNotificationService(),db.DisableSendNotification||(Lm.sendNewUserNotification(),Lm.sendDailyNotification()))},n.startGame=(0,a.Z)(r().mark((function e(){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.analytics.event(pn._.APP_READY),n.storage.dispatch((0,sb.I)(_i.C.LOAD_SCENE)),n.game.globalScene.events.emit(_i.K.SWITCH,_i.C.GAME_SCENE);case 3:case"end":return e.stop()}}),e)}))),n.handleLoadMusicCompleted=function(){n.audio.initMusic(ob.BACKGROUND.KEY),!!n.game.player.getPlayerSetting("music")&&n.audio.playMusic()},n}(0,f.Z)(t,e);var n=t.prototype;return n.preload=function(){var e=this;this.facebook.progressLoading.loadingProgressFbLoadScene(),this.analytics.event(pn._.SCREEN_OPEN,{screen_name:"LoadScene"}),this.load.on("progress",(function(t){e.facebook.progressLoading.onProgress(t)})),this.load.on(Phaser.Loader.Events.FILE_LOAD_ERROR,(function(e){var t=new Fv("Load resources at LoadScene failed.");(0,h.R0)(t,{file:null==e?void 0:e.url})}));var t=this.theme.getCurrentThemeResources(),n=t.backgroundKey,a=t.backgroundFile,i=t.cardFaceKey,r=t.cardFaceTexture,s=t.cardFaceJSON;this.theme.updateCurrentCardStyle(),this.load.image(n,a),this.load.atlas({key:i,textureURL:r,atlasURL:s}),this.load.atlas({key:fn.Z.DEFAULT.KEY,textureURL:fn.Z.DEFAULT.TEXTURE,atlasURL:fn.Z.DEFAULT.JSON}),this.load.multiatlas({key:fn.Z.EFFECTS.KEY,path:fn.Z.EFFECTS.PATH,atlasURL:fn.Z.EFFECTS.JSON}),this.load.atlas({key:fn.Z.GAMEPLAY_DEFAULT.KEY,textureURL:fn.Z.GAMEPLAY_DEFAULT.TEXTURE,atlasURL:fn.Z.GAMEPLAY_DEFAULT.JSON}),this.load.atlas({key:fn.Z.CARD_BACK.KEY,textureURL:fn.Z.CARD_BACK.TEXTURE,atlasURL:fn.Z.CARD_BACK.JSON}),this.load.atlas({key:fn.Z.HOW_TO_PLAY.KEY,textureURL:fn.Z.HOW_TO_PLAY.TEXTURE,atlasURL:fn.Z.HOW_TO_PLAY.JSON}),this.load.atlas({key:fn.Z.THEME_PREVIEW.KEY,textureURL:fn.Z.THEME_PREVIEW.TEXTURE,atlasURL:fn.Z.THEME_PREVIEW.JSON}),this.load.text("draw1/level1","assets/levels/draw1/level1.txt"),this.load.text("draw3/level1","assets/levels/draw3/level1.txt"),this.loadBitmapFonts(),this.player.updateData().then(this.processAfterUpdatePlayerProfile).catch(h.tO),this.player.requestConnectedPlayers()},n.loadBitmapFonts=function(){var e=this.lang.getCurrentLanguage(),t=No.Z.PRIMARY.TEXTURE.replace("{lang}",e),n=No.Z.PRIMARY.DATA.replace("{lang}",e),a=No.Z.BOLD.TEXTURE.replace("{lang}",e),i=No.Z.BOLD.DATA.replace("{lang}",e);this.load.bitmapFont(No.Z.PRIMARY.KEY,t,n),this.load.bitmapFont(No.Z.BOLD.KEY,a,i)},n.create=function(){this.audio.initSound(),this.audio.importSoundEffectKeys(ob.EFFECTS),this.analytics.event(pn._.LOAD_COMPLETE),this.setupGlobalScene(),this.lazyLoadResource(),this.preloadAllAds(),this.startGame()},n.updatePlayerProfileToNotificationService=function(){var e=this.player.getPlayer(),t=e.playerId,n=e.name,a=e.photo,i=e.locale,r=e.ASID,s={appId:hb,playerId:t,name:n,photo:a,locale:i,ASID:r};console.info("\ud83d\ude80 > profileData",s),ub(s)},n.setupGlobalScene=function(){var e=this.scene.get(_i.C.GLOBAL_SCENE);e instanceof hm.Z&&e.setup()},n.initModules=function(){new rb(this.game),new vy(this.game)},n.lazyLoadResource=function(){var e=this;setTimeout((function(){e.scene.wake(),e.loadSounds(),e.load.once(Phaser.Loader.Events.COMPLETE,(function(){e.scene.sleep()}))}),500)},n.loadSounds=function(){this.loadSoundEffects()},n.loadSoundEffects=function(){var e=Phaser.Loader.Events.FILE_KEY_COMPLETE;this.load.once(e+"audio-"+ob.BACKGROUND.KEY,this.handleLoadMusicCompleted);for(var t=$i.Z,n=0,a=ie()($i.Z);n<a.length;n++){var i=t[a[n]];""!=i&&this.load.audio(i,[ob.EFFECTS.PATH+i+".ogg",ob.EFFECTS.PATH+i+".mp3"])}this.load.start()},n.handleShowAdWhenStartGame=function(){var e=this;if(GameCore.Configs.Ads.InterstitialAdOptions.showWhenStartGame){var t={en:"Initializing...",ru:"\u0418\u043d\u0438\u0446\u0438\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u044f...",pt:"Inicializando...",es:"Inicializando...",ar:"\u062a\u0647\u064a\u0626\u0629...",hi:"\u092a\u094d\u0930\u093e\u0930\u0902\u092d \u0915\u0930 \u0930\u0939\u093e \u0939\u0948...",zh:"\u521d\u59cb\u5316\u4e2d...",tr:"Ba\u015flat\u0131l\u0131yor...",ja:"\u521d\u671f\u5316\u4e2d...",fr:"Initialisation en cours...",id:"Menginisialisasi...",de:"Initialisierung...",it:"Inizializzazione..."}[this.lang.getCurrentLanguage()||""]||"",n=document.createElement("div");n.id="wait-ads-mask";var i=document.createElement("div");i.id="wait-ads-content",n.appendChild(i);var s=document.createElement("div");s.id="wait-ads-dual-ring",i.appendChild(s);var o=document.createElement("div");o.id="wait-ads-text",o.innerHTML=t,i.appendChild(o),document.body.appendChild(n),this.audio.muteAll(),setTimeout((0,a.Z)(r().mark((function t(){return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,e.audio.stopMusic(),e.audio.muteAll(),t.next=5,e.ads.preloadInterstitialAdAsync();case 5:return t.next=7,e.ads.showInterstitialAdAsync();case 7:t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),(0,h.tO)(t.t0);case 12:return t.prev=12,n.remove(),e.audio.unmuteAll(),e.audio.playMusic(),t.finish(12);case 17:case"end":return t.stop()}}),t,null,[[0,9,12,17]])}))),0)}},n.preloadAllAds=function(){this.ads.preloadInterstitialAdAsync().catch((function(){})),this.ads.preloadRewardedVideoAsync().catch((function(){}))},t}(Phaser.Scene),fb=pb,gb=fn.Z.DEFAULT,mb=gb.KEY,vb=gb.FRAME,yb=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n.avatar=void 0,n.crown=void 0,n.playerName=void 0,n.playerScore=void 0,n.scene=t,n.createAvatar(),n.updateSize(),n.createWinCrown(),n.createPlayerName(),n.createPlayerScore(),n.scene.add.existing((0,Hi.Z)(n)),n}(0,f.Z)(t,e);var n=t.prototype;return n.showCrown=function(e){this.crown.setVisible(e),e?(this.avatar.setFrame(vb.AVATAR_FRAME_YELLOW_BIG),this.avatar.setBackground(vb.AVATAR_BG_YELLOW_BIG)):(this.avatar.setFrame(vb.AVATAR_FRAME_BLUE_BIG),this.avatar.setBackground(vb.AVATAR_BG_BLUE_BIG))},n.setPlayerName=function(e){this.playerName.setText(e)},n.setPlayerScore=function(e){this.playerScore.setText(""+e)},n.loadPhoto=function(e,t){this.avatar.loadPhoto(e,t,60)},n.updateSize=function(){var e=this.avatar,t=e.width,n=e.height;this.setSize(t,n)},n.createAvatar=function(){this.avatar=new wc(this.scene,{key:mb,frame:vb.AVATAR_FRAME_BLUE_BIG,background:vb.AVATAR_BG_BLUE_BIG,width:89,height:89}),this.add(this.avatar)},n.createWinCrown=function(){this.crown=this.scene.make.image({key:mb,frame:vb.ICON_CROWN}),this.crown.setWorldSize(52,36),Phaser.Display.Align.In.TopCenter(this.crown,this.avatar,0,75),this.add(this.crown)},n.createPlayerName=function(){this.playerName=this.scene.make.text({style:{fontFamily:No.Z.FONT_FAMILY,fontSize:this.scene.fontSize(42)+"px",fontStyle:"bold"},origin:{x:.5,y:.5}}),this.playerName.setTint(11632207),this.playerName.setHighQuality(),Phaser.Display.Align.In.BottomCenter(this.playerName,this.avatar,0,25),this.add(this.playerName)},n.createPlayerScore=function(){this.playerScore=this.scene.make.bitmapText({size:this.scene.fontSize(30),font:No.Z.PRIMARY.KEY,origin:{x:.5,y:.5}}),this.playerScore.setTint(6762627),Phaser.Display.Align.In.BottomCenter(this.playerScore,this.playerName,0,25),this.add(this.playerScore)},t}(Phaser.GameObjects.Container),bb=yb,Ab=fn.Z.DEFAULT,Sb=Ab.KEY,Eb=Ab.FRAME,wb=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n.board=void 0,n.titleText=void 0,n.playerScore=void 0,n.opponentScore=void 0,n.buttonClose=void 0,n.buttonRestart=void 0,n.buttonShare=void 0,n.scene=t,n.createBoard(),n.createTitle(),n.createVSText(),n.createPlayers(),n.createRestartButton(),n.createShareButton(),n.scene.add.existing((0,Hi.Z)(n)),n}(0,f.Z)(t,e);var n=t.prototype;return n.createBoard=function(){this.board=new nc(this.scene,0,0,600,340),this.board.setDepth(ln.Z.BACKGROUND),this.add(this.board),Phaser.Display.Align.In.Center(this.board,this)},n.createTitle=function(){var e=this.scene.add.container(),t=this.scene.make.image({key:Sb,frame:Eb.RIBBON_FULL});t.setWorldSize(340,75),this.titleText=this.scene.make.bitmapText({font:No.Z.PRIMARY.KEY,size:this.scene.fontSize(32),origin:{x:.5,y:.5}}),Phaser.Display.Align.In.Center(this.titleText,t,0,-10),this.buttonClose=new _o.Z(this.scene,Sb,Eb.BUTTON_CLOSE,41.8,41.8),this.buttonClose.setName("Close"),Phaser.Display.Align.In.RightCenter(this.buttonClose,t,0,-3),e.setDepth(ln.Z.TILE),e.add([t,this.titleText,this.buttonClose]),this.add(e),Phaser.Display.Align.In.Center(e,this.board,0,-170)},n.createVSText=function(){var e=this.scene.make.bitmapText({font:No.Z.PRIMARY.KEY,size:this.scene.fontSize(70),text:"VS",origin:{x:.5,y:.5}});e.setTint(11632207),e.setDepth(ln.Z.TEXT),this.add(e),Phaser.Display.Align.In.Center(e,this.board,0,-45)},n.createPlayers=function(){this.playerScore=new bb(this.scene),this.playerScore.setDepth(ln.Z.ITEM),this.add(this.playerScore),Phaser.Display.Align.In.Center(this.playerScore,this.board,-100,-50),this.opponentScore=new bb(this.scene),this.opponentScore.setDepth(ln.Z.ITEM),this.add(this.opponentScore),Phaser.Display.Align.In.Center(this.opponentScore,this.board,100,-50)},n.createRestartButton=function(){this.buttonRestart=new Tc.Z(this.scene,{key:Sb,button:Eb.BUTTON_GREEN,icon:Eb.ICON_RESUME,text:"Restart"},170,72),this.buttonRestart.setName("Restart"),this.buttonRestart.setDepth(ln.Z.BUTTON),this.add(this.buttonRestart),Phaser.Display.Align.In.Center(this.buttonRestart,this.opponentScore,0,155)},n.createShareButton=function(){this.buttonShare=new Tc.Z(this.scene,{key:Sb,button:Eb.BUTTON_BLUE,icon:Eb.ICON_FLAT_SHARE,text:"Share"},153,72),this.buttonShare.setName("Restart"),this.buttonShare.setDepth(ln.Z.BUTTON),this.add(this.buttonShare),Phaser.Display.Align.In.Center(this.buttonShare,this.playerScore,0,155)},t}(Phaser.GameObjects.Container),Tb=wb,Ib=function(e){function t(){for(var t,n,a=arguments.length,i=new Array(a),r=0;r<a;r++)i[r]=arguments[r];return(n=e.call.apply(e,_()(t=[this]).call(t,i))||this).main=void 0,n.run=function(){n.getResultInfo()},n.handleClose=function(){n.scene.sleep(_i.C.RESULT_MATCH_SCENE),n.scene.run(_i.C.GAME_OVER_SCENE)},n.handleShareScore=function(){n.storage.dispatch(Gc())},n.handleRestartMatch=function(){n.storage.dispatch(fo()),n.scene.sleep(_i.C.RESULT_MATCH_SCENE),n.scene.sleep(_i.C.GAME_OVER_SCENE)},n}(0,f.Z)(t,e);var n=t.prototype;return n.preload=function(){this.events.on("wake",this.run),this.events.on("create",this.run)},n.create=function(){e.prototype.create.call(this),this.createMask(.8),this.createMain(),this.createInput()},n.getResultInfo=function(){var e=this.storage.getState(),t=Ss(e),n=ss(e),a=this.player.getPlayer(),i=a.photo,r=a.name,s=a.playerId,o=gs(e),c=o.playerId,u=o.name,l=o.photo,h=(t[s]||{}).score,d=void 0===h?0:h,p=(t[c]||{}).score,f=void 0===p?0:p,g=vs(e,{playerId:s}),m=ys(e,{opponentId:c});n===bi&&(g=!0,m=!0);var v=g&&m;this.main.playerScore.loadPhoto(s,i),this.main.opponentScore.loadPhoto(c,l),this.main.playerScore.setPlayerName(r),this.main.opponentScore.setPlayerName(u),this.main.playerScore.setPlayerScore(d),this.main.opponentScore.setPlayerScore(f),this.main.playerScore.showCrown(v&&d>f),this.main.opponentScore.showCrown(v&&f>d),g&&m?d===f?this.main.titleText.setText("Draw"):d>f?this.main.titleText.setText("You Win"):d<f&&this.main.titleText.setText("You Lose"):this.main.titleText.setText("Waiting for Opponent"),g&&m&&(d===f||(d>f?this.audio.playSound($i.Z.YOU_WIN):d<f&&this.audio.playSound($i.Z.YOU_LOSE)))},n.createMain=function(){this.main=new Tb(this),Phaser.Display.Align.In.Center(this.main,this.gameZone,0,13)},n.createInput=function(){this.main.buttonClose.onClick=this.handleClose,this.main.buttonRestart.onClick=this.handleRestartMatch,this.main.buttonShare.onClick=this.handleShareScore},t}(Gi.Z);var Cb=Ib,kb=n(499),xb=function(e){function t(){for(var t,n,a=arguments.length,i=new Array(a),r=0;r<a;r++)i[r]=arguments[r];return(n=e.call.apply(e,_()(t=[this]).call(t,i))||this).isVisible=!0,n.browserPrefixes=["moz","ms","o","","webkit"],n.visibleCallbacks=[],n.hiddenCallbacks=[],n.handleVisibilityChange=function(e){if("boolean"===typeof e)return e?n.onVisibleEvent():n.onHiddenEvent();var t=n.getBrowserPrefix(),a=n.getHiddenPropertyName(t);return document[a]?n.onHiddenEvent():n.onVisibleEvent()},n}(0,f.Z)(t,e);var n=t.prototype;return n.configure=function(){var e=this.getBrowserPrefix();this.getVisibilityEvent(e)},n.addEventVisible=function(e){this.visibleCallbacks.push(e)},n.addEventHidden=function(e){this.hiddenCallbacks.push(e)},n.isGameVisible=function(){return this.isVisible},n.getHiddenPropertyName=function(e){return e?e+"Hidden":"hidden"},n.getVisibilityEvent=function(e){return(e||"")+"visibilitychange"},n.getBrowserPrefix=function(){for(var e=0;e<this.browserPrefixes.length;e++)if(this.getHiddenPropertyName(this.browserPrefixes[e])in document)return this.browserPrefixes[e];return""},n.onVisibleEvent=function(){this.isVisible||(this.isVisible=!0,console.log("visible"),this.visibleCallbacks.forEach((function(e){e()})))},n.onHiddenEvent=function(){this.isVisible&&(this.isVisible=!1,console.log("hidden"),this.hiddenCallbacks.forEach((function(e){e()})))},t}(Phaser.Plugins.BasePlugin),Pb=xb,_b=n(533),Ob={Mobile:{Background:["bg-0","bg-1","bg-2","bg-3","bg-4"],CardFace:["card-style-0","card-style-1","card-style-2"],CardBack:["card-back-0","card-back-1","card-back-2","card-back-3","card-back-4"]},Desktop:{Background:["bg-desktop-0","bg-desktop-1","bg-desktop-2","bg-desktop-3","bg-desktop-4"],CardFace:["card-style-0","card-style-desktop-0","card-style-2"],CardBack:["card-back-0","card-back-1","card-back-2","card-back-3","card-back-4"]}},Rb={Background:{File:"./assets/images/"+GameCore.Utils.Image.getImageScale()+"x/{}.jpg"},CardFaceAtlas:{Texture:"./assets/textures/{}x/{}.png",JSON:"./assets/textures/{}x/{}.json"}},Db=Rb.Background,Lb=Rb.CardFaceAtlas,Bb=function(){if(GameCore.Utils.Device.isDesktop())return 3;var e=Math.round(GameCore.Utils.Device.pixelRatio());return Phaser.Math.Clamp(e,1,3)},Nb=function(e){function t(){for(var t,n,a=arguments.length,i=new Array(a),r=0;r<a;r++)i[r]=arguments[r];return(n=e.call.apply(e,_()(t=[this]).call(t,i))||this).events=void 0,n.device=void 0,n.backgroundIdx=void 0,n.cardFaceIdx=void 0,n.cardBackIdx=void 0,n}(0,f.Z)(t,e);var n=t.prototype;return n.init=function(t){e.prototype.init.call(this,t),this.events=new Phaser.Events.EventEmitter},n.config=function(){this.device=this.game.world.isLandscape()?"desktop":"mobile"},n.getCurrentThemeResources=function(){var e=this.getCurrentIdxConfig(),t=e.backgroundIdx,n=e.cardFaceIdx;return this.getThemeResources(t,n)},n.getThemeResources=function(e,t){var n="desktop"===this.device?Ob.Desktop:Ob.Mobile,a=n.Background[e]||n.Background[0],i=(0,_b.Z)(Db.File,[a]),r=n.CardFace[t]||n.CardFace[0];return{backgroundKey:a,backgroundFile:i,cardFaceKey:r,cardFaceTexture:(0,_b.Z)(Lb.Texture,[Bb(),r]),cardFaceJSON:(0,_b.Z)(Lb.JSON,[Bb(),r])}},n.getBackgroundConfigs=function(){var e,t="desktop"===this.device?Ob.Desktop:Ob.Mobile;return De()(e=t.Background).call(e,(function(e){return{key:e,url:(0,_b.Z)(Db.File,[e])}}))},n.getCardStyleAtlasConfigs=function(){var e,t="desktop"===this.device?Ob.Desktop:Ob.Mobile;return De()(e=t.CardFace).call(e,(function(e){return{key:e,textureURL:(0,_b.Z)(Lb.Texture,[Bb(),e]),atlasURL:(0,_b.Z)(Lb.JSON,[Bb(),e])}}))},n.getCurrentThemeConfig=function(){var e=this.backgroundIdx,t=this.cardFaceIdx,n=this.cardBackIdx;return"desktop"==this.device?{backgroundKey:Ob.Desktop.Background[e],cardFaceKey:Ob.Desktop.CardFace[t],cardBackFrame:Ob.Desktop.CardBack[n]}:{backgroundKey:Ob.Mobile.Background[e],cardFaceKey:Ob.Mobile.CardFace[t],cardBackFrame:Ob.Mobile.CardBack[n]}},n.getCurrentIdxConfig=function(){var e=this.game.player.getPlayerSettings(),t=e.backgroundDesktopIdx,n=e.cardFaceDesktopIdx,a=e.cardBackDesktopIdx,i=e.backgroundIdx,r=e.cardFaceIdx,s=e.cardBackIdx;return"desktop"==this.device?{backgroundIdx:t,cardFaceIdx:n,cardBackIdx:a}:{backgroundIdx:i,cardFaceIdx:r,cardBackIdx:s}},n.getThemePreview=function(){return"desktop"===this.device?Ob.Desktop:Ob.Mobile},n.changeBackground=function(e){"desktop"==this.device?this.game.player.setSetting("backgroundDesktopIdx",e):this.game.player.setSetting("backgroundIdx",e),this.backgroundIdx=e},n.changeCardFace=function(e){"desktop"==this.device?this.game.player.setSetting("cardFaceDesktopIdx",e):this.game.player.setSetting("cardFaceIdx",e),this.cardFaceIdx=e},n.changeCardBack=function(e){"desktop"==this.device?this.game.player.setSetting("cardBackDesktopIdx",e):this.game.player.setSetting("cardBackIdx",e),this.cardBackIdx=e},n.updateCurrentCardStyle=function(){var e=this.getCurrentIdxConfig(),t=e.backgroundIdx,n=e.cardFaceIdx,a=e.cardBackIdx;this.setCurrentStyle(t,n,a)},n.setCurrentStyle=function(e,t,n){this.backgroundIdx=e,this.cardFaceIdx=t,this.cardBackIdx=n},t}(Phaser.Plugins.BasePlugin),Mb=Nb,Gb=function(e){function t(){for(var t,n,a=arguments.length,i=new Array(a),r=0;r<a;r++)i[r]=arguments[r];return(n=e.call.apply(e,_()(t=[this]).call(t,i))||this).Text=void 0,n.Texture=void 0,n.currentLocale=void 0,n.supportedLanguages=void 0,n.data=void 0,n.options=void 0,n}(0,f.Z)(t,e);var n=t.prototype;return n.configure=function(e){this.applyOptions(e)},n.getCurrentLanguage=function(){return this.currentLocale},n.switchLanguage=function(e){void 0===e&&(e="en");var t=this.getCorrectLocale(e);this.currentLocale=t,this.Text=this.data[t].Text,this.Texture=this.data[t].Texture},n.getText=function(e){if("object"==typeof e){var t=e.key,n=e.variables,a=void 0===n?[]:n,i=e.locale,r=void 0===i?this.currentLocale:i,s=this.getCorrectLocale(r),o=this.data[s].Text[t];return this.replaceVariables(o,a)}return this.Text[e]},n.getTexture=function(e){if("object"==typeof e){var t=e.key,n=e.variables,a=void 0===n?[]:n,i=e.locale,r=void 0===i?this.currentLocale:i,s=this.getCorrectLocale(r),o=this.data[s].Texture[t];return this.replaceVariables(o,a)}return this.Texture[e]},n.isSupportLanguage=function(e){var t;return qt()(t=this.supportedLanguages).call(t,e)>=0},n.applyOptions=function(e){this.options=(0,p.Z)({},e);var t=e.data,n=e.locale,a=void 0===n?"en":n,i=e.upperCaseText,r=void 0!==i&&i;this.data=t,this.supportedLanguages=ie()(t);var s=this.getCorrectLocale(a);if(this.currentLocale=s,this.Text=t[s].Text,this.Texture=t[s].Texture,r)for(var o in this.Text)this.Text[o]=this.Text[o].toUpperCase()},n.makeText=function(e,t){var n,a=t.maxWidth,i=void 0===a?Phaser.Math.MAX_SAFE_INTEGER:a,r=t.maxHeight,s=void 0===r?Phaser.Math.MAX_SAFE_INTEGER:r,o=t.align,c=void 0===o?"center":o,u=t.drawMaxBoxDebug,l=void 0!==u&&u,h=e.make.bitmapText(t);for("center"===c?h.setCenterAlign():"left"===c?h.setLeftAlign():"right"===c&&h.setRightAlign(),qt()(n=t.text||"").call(n," ")>=0&&h.setMaxWidth(i);h.width>i||h.height>=s;)h.setFontSize(.95*h.fontSize),console.log({t:t.text,w:h.width,h:h.height});if(l&&GameCore.Utils.Valid.isDebugger()){var d=e.game.globalScene.add.graphics({lineStyle:{width:2,color:16711680}});d.setDepth(Phaser.Math.MAX_SAFE_INTEGER),e.game.globalScene.events.on(Phaser.Scenes.Events.UPDATE,(function(){if(d.clear(),h&&h.visible&&h.active){var e=h.getWorldPosition(),t=e.x,n=e.y;d.strokeRect(t-.5*i+(.5-h.originX)*h.width,n-.5*s+(.5-h.originY)*h.height,i,s)}}))}return h},n.setFontSize=function(e,t,n){var a,i=t||Phaser.Math.MAX_SAFE_INTEGER,r=n||Phaser.Math.MAX_SAFE_INTEGER;for(qt()(a=e.text||"").call(a," ")>=0&&e.setMaxWidth(i);e.width>i||e.height>=r;)e.setFontSize(.95*e.fontSize)},n.replaceVariables=function(e,t){var n=t.length;if(0==n)return e;var a=0;return e.replace(/{.*}/,(function(){return String(t[Math.min(a++,n-1)])}))},n.getCorrectLocale=function(e){var t=e.split("_")[0];return this.isSupportLanguage(t)||(t="en"),t},t}(Phaser.Plugins.BasePlugin),Fb={en:JSON.parse('{"Text":{"howToPlay":"How To Play","next":"Next","done":"Done","firstTutor":"The goal is to move call cards to the\\nfoundation. Stacking them by suit\\nfrom Aces to King. For example, A, 2, 3,\\nand so on.","secondTutor":"Cards can be moved from column to\\ncolumn. In each column, the cards are\\narranged in order from largest to\\nsmallest. Alternating red and black.","thirdTutor":"If the card below can\'t be moved, just\\nclick the card stock in the upper right\\ncorner, and more cards will be\\nprovided here to help you solve the\\nproblem!","fourthTutor":"The sorting order on each foundation\\nin the upper left corner is arranged\\naccording to: A-2-3-...-Q-K","settings":"Settings","inviteFriends":"Invite Friends","soundEffects":"Sound Effects","vibration":"Vibration","theme":"Theme","tapToMove":"Tap To Move","autoHints":"Auto Hints","autoComplete":"Auto Complete","drawMode3":"3 Draw Mode","statistics":"Statistics","draw1":"Draw 1","draw3":"Draw 3","win":"Win","loss":"Loss","matches":"matches","match":"match","winsWithoutUndo":"Wins Without Undo","bestScore":"Best Score","avgScore":"Average Score","bestWinningTime":"Best Winning Time","avgWinningTime":"Average Winning Time","awesome":"Awesome!","score":"Score","moves":"Moves","time":"Time","bestTime":"Best time","outOfMoves":"Out of moves!","newGame":"New Game","game":"Game","hint":"Hint","undo":"Undo","newSettings":"New settings will take effect\\nin the next deal!","ok":"OK","newDeal":"New Deal","replay":"Replay","cancel":"Cancel","loadingAds":"Loading ads...","loading":"Loading...","background":"Background","cardFace":"Card Face","cardBack":"Card Back","totalGame":"Total game"},"Texture":{"null":"null"}}'),ru:JSON.parse('{"Text":{"howToPlay":"\u041a\u0430\u043a \u0418\u0433\u0440\u0430\u0442\u044c","next":"\u0421\u043b\u0435\u0434\u0443\u044e\u0449\u0438\u0439","done":"\u0421\u0434\u0435\u043b\u0430\u043d\u043d\u044b\u0439","firstTutor":"\u0426\u0435\u043b\u044c \u0441\u043e\u0441\u0442\u043e\u0438\u0442 \u0432 \u0442\u043e\u043c, \u0447\u0442\u043e\u0431\u044b \u043f\u0435\u0440\u0435\u043c\u0435\u0441\u0442\u0438\u0442\u044c \u043a\u0430\u0440\u0442\u044b \\n\u0432 \u043e\u0441\u043d\u043e\u0432\u0430\u043d\u0438\u0435. \u0423\u043a\u043b\u0430\u0434\u044b\u0432\u0430\u044f \u0438\u0445 \u043f\u043e \u043c\u0430\u0441\u0442\u0438 \\n\u043e\u0442 \u0442\u0443\u0437\u0430 \u0434\u043e \u043a\u043e\u0440\u043e\u043b\u044f. \u041d\u0430\u043f\u0440\u0438\u043c\u0435\u0440, \u0410, 2, 3 \\n\u0438 \u0442\u0430\u043a \u0434\u0430\u043b\u0435\u0435.","secondTutor":"\u041a\u0430\u0440\u0442\u044b \u043c\u043e\u0436\u043d\u043e \u043f\u0435\u0440\u0435\u043c\u0435\u0449\u0430\u0442\u044c \u0438\u0437 \u0441\u0442\u043e\u043f\u043a\u0438 \u0432 \u0441\u0442\u043e\u043f\u043a\u0443. \\n\u0412 \u043a\u0430\u0436\u0434\u043e\u0439 \u0441\u0442\u043e\u043f\u043a\u0435 \u043a\u0430\u0440\u0442\u044b \u0440\u0430\u0441\u043f\u043e\u043b\u043e\u0436\u0435\u043d\u044b \u0432 \u043f\u043e\u0440\u044f\u0434\u043a\u0435 \\n\u043e\u0442 \u0441\u0430\u043c\u043e\u0439 \u0431\u043e\u043b\u044c\u0448\u043e\u0439 \u043a \u0441\u0430\u043c\u043e\u0439 \u043c\u0430\u043b\u0435\u043d\u044c\u043a\u043e\u0439.\\n\u0427\u0435\u0440\u0435\u0434\u0443\u044e\u0442\u0441\u044f \u043a\u0440\u0430\u0441\u043d\u044b\u0439 \u0438 \u0447\u0435\u0440\u043d\u044b\u0439 \u0446\u0432\u0435\u0442\u0430.","thirdTutor":"\u0415\u0441\u043b\u0438 \u043b\u0435\u0436\u0430\u0449\u0443\u044e \u043d\u0438\u0436\u0435 \u043a\u0430\u0440\u0442\u0443 \u043d\u0435\u043b\u044c\u0437\u044f \u043f\u0435\u0440\u0435\u043c\u0435\u0441\u0442\u0438\u0442\u044c, \\n\u043f\u0440\u043e\u0441\u0442\u043e \u043d\u0430\u0436\u043c\u0438\u0442\u0435 \u043d\u0430 \u0441\u0442\u043e\u043f\u043a\u0443 \u043a\u0430\u0440\u0442 \u0432 \u043f\u0440\u0430\u0432\u043e\u043c \u0432\u0435\u0440\u0445\u043d\u0435\u043c \\n\u0443\u0433\u043b\u0443, \u0438 \u0437\u0434\u0435\u0441\u044c \u0431\u0443\u0434\u0443\u0442 \u043f\u0440\u0435\u0434\u0441\u0442\u0430\u0432\u043b\u0435\u043d\u044b \\n\u0434\u043e\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u0435 \u043a\u0430\u0440\u0442\u044b, \u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u043f\u043e\u043c\u043e\u0433\u0443\u0442 \\n\u0432\u0430\u043c \u0440\u0435\u0448\u0438\u0442\u044c \u043f\u0440\u043e\u0431\u043b\u0435\u043c\u0443!","fourthTutor":"\u041f\u043e\u0440\u044f\u0434\u043e\u043a \u0441\u043e\u0440\u0442\u0438\u0440\u043e\u0432\u043a\u0438 \u043f\u043e \u043a\u0430\u0436\u0434\u043e\u043c\u0443 \u043e\u0441\u043d\u043e\u0432\u0430\u043d\u0438\u044e \\n\u0432 \u043b\u0435\u0432\u043e\u043c \u0432\u0435\u0440\u0445\u043d\u0435\u043c \u0443\u0433\u043b\u0443 \u0432\u044b\u0441\u0442\u0440\u043e\u0435\u043d \\n\u043f\u043e \u0441\u0445\u0435\u043c\u0435: A-2-3-...-Q-K","settings":"\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438","inviteFriends":"\u041f\u0440\u0438\u0433\u043b\u0430\u0441\u0438\u0442\u044c \u0414\u0440\u0443\u0437\u0435\u0439","soundEffects":"\u0417\u0432\u0443\u043a","vibration":"\u0412\u0438\u0431\u0440\u0430\u0446\u0438\u044f","theme":"\u0422\u0435\u043c\u0430","tapToMove":"\u041d\u0430\u0436\u043c\u0438\u0442\u0435, \u0447\u0442\u043e\u0431\u044b \u043f\u0435\u0440\u0435\u043c\u0435\u0441\u0442\u0438\u0442\u044c","autoHints":"\u0410\u0432\u0442\u043e\u043f\u043e\u0434\u0441\u043a\u0430\u0437\u043a\u0438","autoComplete":"\u0410\u0432\u0442\u043e\u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u0435","drawMode3":"\u0420\u0435\u0436\u0438\u043c \xab\u0415\u0449\u0435 3\xbb","statistics":"\u0421\u0442\u0430\u0442\u0438\u0441\u0442\u0438\u043a\u0430","draw1":"\u0415\u0449\u0435 1","draw3":"\u0415\u0449\u0435 3","win":"\u041f\u043e\u0431\u0435\u0434\u0430","loss":"\u041f\u0440\u043e\u0438\u0433\u0440\u044b\u0448","matches":"\u0421\u043e\u0432\u043f\u0430\u0434\u0435\u043d\u0438\u044f","match":"\u0441\u043e\u0432\u043f\u0430\u0434\u0435\u043d\u0438\u0435","winsWithoutUndo":"\u041f\u043e\u0431\u0435\u0434\u044b \u0411\u0435\u0437 \u041e\u0442\u043c\u0435\u043d\u044b","bestScore":"\u041b\u0443\u0447\u0448\u0438\u0439 \u0421\u0447\u0435\u0442","avgScore":"\u0421\u0440\u0435\u0434\u043d\u0438\u0439 \u0431\u0430\u043b\u043b","bestWinningTime":"\u041b\u0443\u0447\u0448\u0435\u0435 \u0432\u0440\u0435\u043c\u044f","avgWinningTime":"\u0421\u0440\u0435\u0434\u043d\u0435\u0435 \u0432\u0440\u0435\u043c\u044f","awesome":"\u041f\u043e\u0442\u0440\u044f\u0441\u0430\u044e\u0449\u0435!","score":"\u0421\u0447\u0435\u0442","moves":"\u0425\u043e\u0434\u044b","time":"\u0412\u0440\u0435\u043c\u044f","bestTime":"\u041b\u0443\u0447\u0448\u0435\u0435 \u0432\u0440\u0435\u043c\u044f","outOfMoves":"\u041d\u0435\u0442 \u0445\u043e\u0434\u043e\u0432!","newGame":"\u041d\u043e\u0432\u0430\u044f \u0438\u0433\u0440\u0430","game":"\u0418\u0433\u0440\u0430","hint":"\u041f\u043e\u0434\u0441\u043a\u0430\u0437\u043a\u0430","undo":"\u041e\u0442\u043c\u0435\u043d\u0438\u0442\u044c","newSettings":"\u041d\u043e\u0432\u044b\u0435 \u043d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438 \u0432\u0441\u0442\u0443\u043f\u044f\u0442 \u0432 \\n\u0441\u0438\u043b\u0443 \u0432 \u0441\u043b\u0435\u0434\u0443\u044e\u0449\u0435\u0439 \u0440\u0430\u0437\u0434\u0430\u0447\u0435!","ok":"\u0414\u0430","newDeal":"\u041d\u043e\u0432\u0430\u044f \u0440\u0430\u0437\u0434\u0430\u0447\u0430","replay":"\u041f\u043e\u0432\u0442\u043e\u0440\u0438\u0442\u044c","cancel":"\u041e\u0442\u043c\u0435\u043d\u0430","loadingAds":"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430 \u041e\u0431\u044a\u044f\u0432\u043b\u0435\u043d\u0438\u0439...","loading":"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430...","background":"\u0424\u043e\u043d","cardFace":"\u041b\u0438\u0446\u043e \u043a\u0430\u0440\u0442\u044b","cardBack":"\u0420\u0443\u0431\u0430\u0448\u043a\u0430 \u043a\u0430\u0440\u0442\u044b","totalGame":"\u041e\u0431\u0449\u0430\u044f \u0438\u0433\u0440\u0430"},"Texture":{"null":"null"}}'),pt:JSON.parse('{"Text":{"howToPlay":"Como jogar","next":"Pr\xf3ximo","done":"Pronto","firstTutor":"O objectivo \xe9 transferir as cartas para a funda\xe7\xe3o. \\nEmpilhando-as por naipe, de Ases a Rei. \\nPor exemplo, A, 2, 3, e assim por diante.","secondTutor":"As cartas podem-se mover de monte para monte. \\nEm cada monte, as cartas organizam-se \\nem ordem da maior para a menor. \\nAlternando vermelho e preto.","thirdTutor":"Se a carta abaixo n\xe3o puder ser movida,\\nbasta clicar no cart\xe3o no canto superior direito,\\ne mais cartas ser\xe3o fornecidas aqui para ajudar\\na resolver o nproblema!","fourthTutor":"A ordem de classifica\xe7\xe3o em cada \\nfunda\xe7\xe3o no canto superior esquerdo \xe9 \\norganizada de acordo com: A-2-3-...- Q-K","settings":"Defini\xe7\xf5es","inviteFriends":"Convidar amigos","soundEffects":"Efeitos de som","vibration":"Vibra\xe7\xe3o","theme":"Tema","tapToMove":"Toca para mover","autoHints":"Sugest\xf5es autom\xe1ticas","autoComplete":"Preenchimento autom\xe1tico","drawMode3":"Modo Tirar 3","statistics":"Estat\xedsticas","draw1":"Tirar 1","draw3":"Tirar 3","win":"Vit\xf3ria","loss":"Derrota","matches":"partidas","match":"partida","winsWithoutUndo":"Vit\xf3rias sem desfazer","bestScore":"Melhor pontua\xe7\xe3o","avgScore":"Pontua\xe7\xe3o m\xe9dia","bestWinningTime":"Melhor tempo vencedor","avgWinningTime":"Tempo m\xe9dio de vit\xf3ria","awesome":"Espantoso!","score":"Pontua\xe7\xe3o","moves":"Movimentos","time":"Tempo","bestTime":"Melhor tempo","outOfMoves":"N\xe3o ficam movimentos!","newGame":"Novo jogo","game":"Jogo","hint":"Dica","undo":"Desfazer","newSettings":"As novas defini\xe7\xf5es entrar\xe3o em \\nvigor na pr\xf3xima reparti\xe7\xe3o!","ok":"OK","newDeal":"Nova reparti\xe7\xe3o","replay":"Repeti\xe7\xe3o","cancel":"Cancelar","loadingAds":"A carregar an\xfancios...","loading":"A carregar...","background":"Fundo","cardFace":"Face da carta","cardBack":"Verso da carta","totalGame":"Jogo total"},"Texture":{"null":"null"}}'),es:JSON.parse('{"Text":{"howToPlay":"C\xf3mo jugar","next":"Siguiente","done":"Hecho","firstTutor":"El objetivo es mover las cartas de llamada a la base. \\nApil\xe1ndolas por palo de Ases a Rey. \\nPor ejemplo, A, 2, 3, y as\xed sucesivamente.","secondTutor":"Las cartas se pueden mover de columna en columna.\\nEn cada columna, las cartas est\xe1n dispuestas\\nen orden de mayor a menor. Alternando rojo y negro.","thirdTutor":"Si la carta que aparece a continuaci\xf3n\\nno se puede mover, haz clic en la pila de\\nla esquina superior derecha y aparecer\xe1n m\xe1s cartas\\npara ayudarle a resolver el problema.","fourthTutor":"El orden de clasificaci\xf3n en cada cimiento en \\nla esquina superior izquierda est\xe1 \\ndispuesto seg\xfan: A-2-3-...- Q-K","settings":"Configuraci\xf3n","inviteFriends":"Invita a amigos","soundEffects":"Efectos de sonido","vibration":"Vibraci\xf3n","theme":"Tema","tapToMove":"Toca para mover","autoHints":"Sugerencias autom\xe1ticas","autoComplete":"Autocompletar","drawMode3":"Modo de Triple Robo","statistics":"Estad\xedsticas","draw1":"Roba 1","draw3":"Roba 3","win":"Victoria","loss":"Derrota","matches":"partidas","match":"partido","winsWithoutUndo":"Victorias sin deshacer","bestScore":"Mejor puntuaci\xf3n","avgScore":"Puntuaci\xf3n media","bestWinningTime":"Mejor tiempo ganador","avgWinningTime":"Tiempo medio de victoria","awesome":"\xa1Alucinante!","score":"Puntuaci\xf3n","moves":"Movimientos","time":"Tiempo","bestTime":"Mejor tiempo","outOfMoves":"\xa1No quedan movimientos!","newGame":"Nueva partida","game":"Juego","hint":"Pista","undo":"Deshacer","newSettings":"Los nuevos ajustes entrar\xe1n en \\nvigor en el pr\xf3ximo reparto.","ok":"OK","newDeal":"Nuevo reparto","replay":"Repetici\xf3n","cancel":"Cancelar","loadingAds":"Cargando anuncios...","loading":"Cargando...","background":"Fondo","cardFace":"Cara de la carta","cardBack":"Dorso de la carta","totalGame":"Juego total"},"Texture":{"null":"null"}}'),hi:JSON.parse('{"Text":{"howToPlay":"\u0915\u0948\u0938\u0947 \u0916\u0947\u0932\u0947\u0902","next":"\u0905\u0917\u0932\u093e","done":"\u092a\u0942\u0930\u093e \u0939\u0941\u0906","firstTutor":"\u0932\u0915\u094d\u0937\u094d\u092f, \u0938\u092d\u0940 \u0915\u0949\u0932 \u0915\u093e\u0930\u094d\u0921\u094d\u0938 \u0915\u094b \u092b\u093e\u0909\u0902\u0921\u0947\u0936\u0928 \\n\u092e\u0947\u0902 \u0932\u0947 \u091c\u093e\u0928\u093e \u0939\u0948. \u0907\u0915\u094d\u0915\u0947 \u0938\u0947 \u092c\u093e\u0926\u0936\u093e\u0939 \\n\u0924\u0915 \u0915\u093e \u0938\u0942\u091f \u092c\u0928\u093e\u0915\u0930 \u0909\u0928\u094d\u0939\u0947\u0902 \u0938\u094d\u091f\u0948\u0915 \u0915\u0930\u0947\u0902. \u0909\u0926\u093e\u0939\u0930\u0923 \\n\u0915\u0947 \u0932\u093f\u090f, A, 2, 3 \u0914\u0930 \u0907\u0938\u0915\u0947 \u0906\u0917\u0947.","secondTutor":"\u0915\u093e\u0930\u094d\u0921\u094d\u0938 \u0915\u094b \u090f\u0915 \u0915\u0949\u0932\u092e \u0938\u0947 \u0926\u0942\u0938\u0930\u0947 \u0915\u0949\u0932\u092e \u092a\u0930 \u0932\u0947 \u091c\u093e\u092f\u093e \u091c\u093e \\n\u0938\u0915\u0924\u093e \u0939\u0948. \u0939\u0930 \u090f\u0915 \u0915\u0949\u0932\u092e \u092e\u0947\u0902, \u0915\u093e\u0930\u094d\u0921\u094d\u0938 \u0915\u094b \u0938\u092c\u0938\u0947 \u092c\u0921\u093c\u0947 \\n\u0938\u0947 \u0938\u092c\u0938\u0947 \u091b\u094b\u091f\u0947 \u0915\u094d\u0930\u092e \u092e\u0947\u0902 \u0932\u0917\u093e\u092f\u093e \\n\u091c\u093e\u0924\u093e \u0939\u0948. \u092c\u093e\u0930\u0940-\u092c\u093e\u0930\u0940 \u0938\u0947 \u0932\u093e\u0932 \u0914\u0930 \u0915\u093e\u0932\u0947.","thirdTutor":"\u0905\u0917\u0930 \u0928\u0940\u091a\u0947 \u0935\u093e\u0932\u0947 \u0915\u093e\u0930\u094d\u0921 \u0915\u094b \u0939\u093f\u0932\u093e\u092f\u093e \u0928\u0939\u0940\u0902 \u091c\u093e \u0938\u0915\u0924\u093e \\n\u0939\u0948, \u0924\u094b \u092c\u0938 \u090a\u092a\u0930\u0940 \u0926\u093e\u090f\u0902 \u0915\u094b\u0928\u0947 \u092e\u0947\u0902 \u0915\u093e\u0930\u094d\u0921 \u0938\u094d\u091f\u0949\u0915 \u092a\u0930 \\n\u0915\u094d\u0932\u093f\u0915 \u0915\u0930\u0947\u0902, \u0914\u0930 \u0938\u092e\u0938\u094d\u092f\u093e \u0915\u094b \u0939\u0932 \u0915\u0930\u0928\u0947 \u092e\u0947\u0902 \\n\u0906\u092a\u0915\u0940 \u092e\u0926\u0926 \u0915\u0947 \u0932\u093f\u090f \u092f\u0939\u093e\u0902 \u0914\u0930 \u0915\u093e\u0930\u094d\u0921 \u092a\u094d\u0930\u0926\u093e\u0928 \\n\u0915\u093f\u090f \u091c\u093e\u090f\u0902\u0917\u0947!","fourthTutor":"\u090a\u092a\u0930\u0940 \u092c\u093e\u090f\u0902 \u0915\u094b\u0928\u0947 \u092e\u0947\u0902 \u0939\u0930 \u090f\u0915 \u092b\u093e\u0909\u0902\u0921\u0947\u0936\u0928 \\n\u092a\u0930 \u0938\u0949\u0930\u094d\u091f\u093f\u0902\u0917 \u0915\u094d\u0930\u092e \u0915\u094b \u0907\u0938 \u092a\u094d\u0930\u0915\u093e\u0930 \\n\u0935\u094d\u092f\u0935\u0938\u094d\u0925\u093f\u0924 \u0915\u093f\u092f\u093e \u091c\u093e\u0924\u093e \u0939\u0948: \u201cA-2-3-...-Q-K\u201d","settings":"\u0938\u0947\u091f\u093f\u0902\u0917\u094d\u0938","inviteFriends":"\u0926\u094b\u0938\u094d\u0924\u094b\u0902 \u0915\u094b \u0907\u0928\u0935\u093e\u0907\u091f \u0915\u0930\u0947\u0902","soundEffects":"\u0938\u093e\u0909\u0902\u0921 \u0907\u095e\u0947\u0915\u094d\u091f\u094d\u0938","vibration":"\u0935\u093e\u0907\u092c\u094d\u0930\u0947\u0936\u0928","theme":"\u0925\u0940\u092e","tapToMove":"\u0932\u0947 \u091c\u093e\u0928\u0947 \u0915\u0947 \u0932\u093f\u090f \u091f\u0948\u092a \u0915\u0930\u0947\u0902","autoHints":"\u0911\u091f\u094b \u0939\u093f\u0902\u091f\u094d\u0938","autoComplete":"\u0905\u092a\u0928\u0947 \u0906\u092a \u092a\u0942\u0930\u093e \u0939\u094b \u091c\u093e\u090f","drawMode3":"3 \u0921\u094d\u0930\u0949 \u092e\u094b\u0921","statistics":"\u0906\u0902\u0915\u095c\u0947","draw1":"\u0921\u094d\u0930\u0949 1","draw3":"\u0921\u094d\u0930\u0949 3","win":"\u091c\u0940\u0924","loss":"\u0939\u093e\u0930","matches":"\u092e\u0948\u091a","match":"\u092e\u0948\u091a","winsWithoutUndo":"\u092c\u093f\u0928\u093e \u092a\u0942\u0930\u094d\u0935\u0935\u0924 \u0915\u093f\u090f \u091c\u0940\u0924","bestScore":"\u0938\u092c\u0938\u0947 \u092c\u095d\u093f\u092f\u093e \u0938\u094d\u0915\u094b\u0930","avgScore":"\u0914\u0938\u0924 \u0938\u094d\u0915\u094b\u0930","bestWinningTime":"\u0938\u092c\u0938\u0947 \u092c\u095d\u093f\u092f\u093e \u091c\u0940\u0924 \u0915\u093e \u0938\u092e\u092f","avgWinningTime":"\u0914\u0938\u0924 \u091c\u0940\u0924 \u0915\u093e \u0938\u092e\u092f","awesome":"\u0932\u093e\u091c\u0935\u093e\u092c!","score":"\u0938\u094d\u0915\u094b\u0930","moves":"\u091a\u093e\u0932\u0947\u0902","time":"\u0938\u092e\u092f","bestTime":"\u0938\u092c\u0938\u0947 \u092c\u095d\u093f\u092f\u093e \u0938\u092e\u092f","outOfMoves":"\u091a\u093e\u0932\u0947\u0902 \u0916\u0924\u094d\u092e \u0939\u094b \u0917\u0908\u0902!","newGame":"\u0928\u092f\u093e \u0917\u0947\u092e","game":"\u0917\u0947\u092e","hint":"\u0939\u093f\u0902\u091f","undo":"\u092a\u0942\u0930\u094d\u0935\u0935\u0924 \u0915\u0930\u0947\u0902","newSettings":"\u0928\u0908 \u0938\u0947\u091f\u093f\u0902\u0917\u094d\u0938 \u0905\u0917\u0932\u0940 \u0921\u0940\u0932 \\n\u092e\u0947\u0902 \u092a\u094d\u0930\u092d\u093e\u0935\u0940 \u0939\u094b\u0902\u0917\u0940!","ok":"\u0920\u0940\u0915 \u0939\u0948","newDeal":"\u0928\u0908 \u0921\u0940\u0932","replay":"\u092b\u093f\u0930 \u0938\u0947 \u092a\u094d\u0932\u0947 \u0915\u0930\u0947\u0902","cancel":"\u0915\u0948\u0902\u0938\u0932 \u0915\u0930\u0947\u0902","loadingAds":"\u0935\u093f\u091c\u094d\u091e\u093e\u092a\u0928 \u0932\u094b\u0921 \u0939\u094b \u0930\u0939\u0947 \u0939\u0948\u0902...","loading":"\u0932\u094b\u0921 \u0939\u094b \u0930\u0939\u093e \u0939\u0948...","background":"\u092c\u0948\u0915\u0917\u094d\u0930\u093e\u0909\u0902\u0921","cardFace":"\u0915\u093e\u0930\u094d\u0921 \u095e\u0947\u0938","cardBack":"\u0915\u093e\u0930\u094d\u0921 \u092c\u0948\u0915","totalGame":"\u0915\u0941\u0932 \u0916\u0947\u0932"},"Texture":{"null":"null"}}'),tr:JSON.parse('{"Text":{"howToPlay":"Nas\u0131l Oynan\u0131r?","next":"\u0130leri","done":"Bitti!","firstTutor":"Ama\xe7 t\xfcm kartlar\u0131 merkeze ta\u015f\u0131makt\u0131r.\\nKartlar\u0131 As\'tan Papaz\'a do\u011fru s\u0131ralamak gerekir.\\n\xd6rne\u011fin, A, 2, 3...","secondTutor":"Kartlar s\xfctundan s\xfctuna ta\u015f\u0131nabilir. Her s\xfctunda, \\nkartlar en b\xfcy\xfcken en k\xfc\xe7\xfc\u011fe do\u011fru d\xfczenlenir. \\nKartlar bir k\u0131rm\u0131z\u0131 bir siyah olacak \u015fekilde s\u0131ralan\u0131r.","thirdTutor":"Hi\xe7 oynayacak kart\u0131n kalmazsa sa\u011f \xfcst k\xf6\u015fedeki \\nkart destesine t\u0131klayarak yeni kart a\xe7abilir, bu kart \\nuygunsa oyuna devam edebilirsin.","fourthTutor":"Kartlar\u0131 As\'tan ba\u015flayarak sol \xfcst k\xf6\u015fedeki yerlerine \\nta\u015f\u0131yabilirsin: A-2-3-...-Q-K","settings":"Ayarlar","inviteFriends":"Arkada\u015flar\u0131n\u0131 Davet Et","soundEffects":"Ses Efektleri","vibration":"Titre\u015fim","theme":"Tema","tapToMove":"Ta\u015f\u0131mak i\xe7in Dokun","autoHints":"Otomatik \u0130pu\xe7lar\u0131","autoComplete":"Otomatik Tamamlama","drawMode3":"3 kart \xe7ekme modu","statistics":"\u0130statistikler","draw1":"1 kart \xe7ek","draw3":"3 kart \xe7ek","win":"Galibiyet","loss":"Ma\u011flubiyet","matches":"ma\xe7lar","match":"ma\xe7","winsWithoutUndo":"Geri Almadan Galibiyetler","bestScore":"En \u0130yi Skor","avgScore":"Ortalama Puan","bestWinningTime":"En iyi Kazanma S\xfcresi","avgWinningTime":"Ortalama Kazanma S\xfcresi","awesome":"M\xfcthi\u015f!","score":"Skor","moves":"Hamleler","time":"S\xfcre","bestTime":"En iyi s\xfcre","outOfMoves":"Hamle kalmad\u0131!","newGame":"Yeni Oyun","game":"Oyun","hint":"\u0130pucu","undo":"Geri al","newSettings":"Yeni ayarlar bir sonraki \\nturda uygulanacak!","ok":"TAMAM","newDeal":"Yeni Tur","replay":"Yeniden oynat","cancel":"\u0130ptal","loadingAds":"Reklam y\xfckleniyor...","loading":"Y\xfckleniyor...","background":"Arka plan","cardFace":"Kart \xf6n\xfc","cardBack":"Kart arkas\u0131","totalGame":"Toplam oyun"},"Texture":{"null":"null"}}'),ja:JSON.parse('{"Text":{"howToPlay":"\u904a\u3073\u65b9","next":"\u6b21\u3078","done":"\u7d42\u4e86","firstTutor":"\u30ab\u30fc\u30c9\u3092\u3059\u3079\u3066\u7d44\u672d\u306b\u79fb\u52d5\u3055\u305b\u308b\u306e\u304c\\n\u76ee\u7684\u3067\u3059\u3002\u30b9\u30fc\u30c8\u3054\u3068\u306b A \u304b\u3089\u30ad\u30f3\u30b0\u306e\u9806\u756a\u3067\u30ab\\n\u30fc\u30c9\u3092\u91cd\u306d\u307e\u3059\u3002\u3064\u307e\u308a\u3001A \u3092\u6700\u521d\u306b\u79fb\u52d5\u3055\u305b\u3001\u6b21\u306b 2\u30013 \\n\u3068\u7d9a\u3051\u307e\u3059\u3002","secondTutor":"\u30ab\u30fc\u30c9\u306f\u5217\u304b\u3089\u5217\u3078\u3068\u79fb\u52d5\u3055\u305b\u308b\u3053\u3068\u304c\u3067\u304d\u307e\\n\u3059\u3002\u3069\u306e\u5217\u3082\u5927\u304d\u306a\u6570\u5b57\u304b\u3089\u5c0f\u3055\u306a\u6570\u5b57\u306e\u9806\u756a\u3067\\n\u30ab\u30fc\u30c9\u3092\u914d\u7f6e\u3057\u307e\u3059\u3002\u305d\u3057\u3066\u3001\u8d64\u3068\u9ed2\u306e\u30ab\u30fc\u30c9\u3092\\n\u4ea4\u4e92\u306b\u91cd\u306d\u307e\u3059\u3002","thirdTutor":"\u4e00\u756a\u3057\u305f\u306b\u3042\u308b\u30ab\u30fc\u30c9\u3092\u79fb\u52d5\u3055\u305b\u3089\\n\u308c\u306a\u3044\u5834\u5408\u306f\u3001\u53f3\u4e0a\u9685\u306b\u3042\u308b\u30ab\u30fc\u30c9\\n\u3092\u30af\u30ea\u30c3\u30af\u3059\u308c\u3070\u3001\u3055\u3089\u306b\u30ab\u30fc\u30c9\u304c\\n\u3081\u304f\u3089\u308c\u3066\u554f\u984c\u304c\u89e3\u304d\u3084\u3059\u304f\u306a\u308a\u307e\\n\u3059\uff01","fourthTutor":"\u5de6\u4e0a\u9685\u306e\u5404\u7d44\u672d\u306e\u9806\u756a\u306f\u4ee5\u4e0b\u306e\\n\u3088\u3046\u306b\u306a\u3063\u3066\u3044\u307e\u3059\uff1a\u300cA -> 2 -> 3 -> ... -> Q -> K\u300d","settings":"\u8a2d\u5b9a","inviteFriends":"\u30d5\u30ec\u30f3\u30c9\u3092\u62db\u5f85","soundEffects":"\u52b9\u679c\u97f3","vibration":"\u632f\u52d5","theme":"\u30c6\u30fc\u30de","tapToMove":"\u30bf\u30c3\u30d7\u3057\u3066\u79fb\u52d5","autoHints":"\u81ea\u52d5\u3067\u30d2\u30f3\u30c8","autoComplete":"\u81ea\u52d5\u3067\u5b8c\u4e86","drawMode3":"3 \u30c9\u30ed\u30fc\u30e2\u30fc\u30c9","statistics":"\u7d71\u8a08","draw1":"1 \u679a\u5f15\u304d","draw3":"3 \u679a\u5f15\u304d","win":"\u52dd\u5229","loss":"\u6557\u5317","matches":"\u30de\u30c3\u30c1","match":"\u30de\u30c3\u30c1","winsWithoutUndo":"\u300c\u5143\u306b\u623b\u3059\u300d\u306a\u3057\u306e\u52dd\u5229\u6570","bestScore":"\u30d9\u30b9\u30c8\u30b9\u30b3\u30a2","avgScore":"\u5e73\u5747\u30b9\u30b3\u30a2","bestWinningTime":"\u30d9\u30b9\u30c8\u306e\u52dd\u5229\u30bf\u30a4\u30e0","avgWinningTime":"\u5e73\u5747\u306e\u52dd\u5229\u30bf\u30a4\u30e0","awesome":"\u512a\u79c0\u3060\u306d\uff01","score":"\u30b9\u30b3\u30a2","moves":"\u30e0\u30fc\u30d6","time":"\u30bf\u30a4\u30e0","bestTime":"\u30d9\u30b9\u30c8\u30bf\u30a4\u30e0","outOfMoves":"\u624b\u8a70\u307e\u308a\uff01","newGame":"\u65b0\u3057\u3044\u30b2\u30fc\u30e0","game":"\u30b2\u30fc\u30e0","hint":"\u30d2\u30f3\u30c8","undo":"\u5143\u306b\u623b\u3059","newSettings":"\u65b0\u3057\u3044\u8a2d\u5b9a\u306f\u6b21\u306e\u30b2\u30fc\u30e0\u304b\u3089\u9069\\n\u7528\u3055\u308c\u307e\u3059\uff01","ok":"OK","newDeal":"\u65b0\u3057\u3044\u30b2\u30fc\u30e0","replay":"\u30ea\u30d7\u30ec\u30a4","cancel":"\u30ad\u30e3\u30f3\u30bb\u30eb","loadingAds":"\u5e83\u544a\u3092\u8aad\u307f\u8fbc\u307f\u4e2d...","loading":"\u8aad\u307f\u8fbc\u3093\u3067\u3044\u307e\u3059...","background":"\u80cc\u666f","cardFace":"\u30ab\u30fc\u30c9\u8868","cardBack":"\u30ab\u30fc\u30c9\u88cf","totalGame":"\u30c8\u30fc\u30bf\u30eb\u30b2\u30fc\u30e0"},"Texture":{"null":"null"}}'),fr:JSON.parse('{"Text":{"howToPlay":"Comment jouer","next":"Suivant","done":"Effectu\xe9","firstTutor":"Le but du jeu est de d\xe9placer les cartes vers la fondation. \\nPour cela, empilez-les par couleur, de l\u2019As au Roi. \\nPar exemple, A, 2, 3, et ainsi de suite.","secondTutor":"Les cartes peuvent \xeatre d\xe9plac\xe9es de colonne en colonne. \\nDans chaque colonne, les cartes sont class\xe9es par ordre \\nd\xe9croissant, de la plus grande \xe0 la plus petite. \\nAlternance de rouge et de noir.","thirdTutor":"Si la carte ci-dessous ne peut pas \xeatre d\xe9plac\xe9e, il suffit de \\ncliquer sur le stock de cartes dans le coin sup\xe9rieur \\ndroit, et de nouvelles cartes appara\xeetront ici pour vous \\npermettre de r\xe9soudre le probl\xe8me !","fourthTutor":"L\u2019ordre de tri sur chaque fondation dans le coin sup\xe9rieur \\ngauche est dispos\xe9 comme suit : \xab A-2-3-...-Q-K \xbb","settings":"Param\xe8tres","inviteFriends":"Inviter des amis","soundEffects":"Effets sonores","vibration":"Vibration","theme":"Th\xe8me","tapToMove":"Appuyez pour d\xe9placer","autoHints":"Indices automatiques","autoComplete":"Compl\xe9ter automatiquement","drawMode3":"Mode 3 tirages","statistics":"Statistiques","draw1":"Tirer 1","draw3":"Tirer 3","win":"Victoire","loss":"D\xe9faite","matches":"matchs","match":"match","winsWithoutUndo":"Victoires sans annulation","bestScore":"Meilleur score","avgScore":"Score moyen","bestWinningTime":"Meilleur temps de victoire","avgWinningTime":"Temps moyen de victoire","awesome":"G\xe9nial !","score":"Score","moves":"D\xe9placements","time":"Temps","bestTime":"Meilleurs temps","outOfMoves":"\xc0 court de d\xe9placements !","newGame":"Nouveau jeu","game":"Jeu","hint":"Indice","undo":"Annuler","newSettings":"Les param\xe8tres prendront effet lors \\nde la prochaine distribution !","ok":"OK","newDeal":"Nouvelle distribution","replay":"Rejouer","cancel":"Annuler","loadingAds":"Chargement des publicit\xe9s...","loading":"Chargement...","background":"Arri\xe8re-plan","cardFace":"Recto des cartes","cardBack":"Verso des cartes","totalGame":"Jeu total"},"Texture":{"null":"null"}}'),id:JSON.parse('{"Text":{"howToPlay":"Cara Bermain","next":"Berikutnya","done":"Selesai","firstTutor":"Tujuannya adalah untuk memindahkan kartu yang ditarik\\nke fondasi. Tumpuk kartu dari As ke King.\\nMisalnya A, 2, 3, dan seterusnya.","secondTutor":"Kartu dapat dipindahkan dari satu kolom ke kolom lain.\\nDi setiap kolom, kartu disusun secara berurutan\\ndari yang terbesar hingga yang terkecil.\\nMerah dan hitam bergantian.","thirdTutor":"Jika kartu di bawah tidak dapat dipindahkan,\\ncukup klik stok kartu di pojok kanan atas,\\ndan kartu tambahan akan diberikan untuk membantumu!","fourthTutor":"Urutan pada masing-masing fondasi di pojok kiri \\natas disusun menurut: A-2-3-...-Q-K","settings":"Pengaturan","inviteFriends":"Undang Teman","soundEffects":"Efek Suara","vibration":"Getaran","theme":"Tema","tapToMove":"Ketuk untuk Memindahkan","autoHints":"Petunjuk Otomatis","autoComplete":"Selesai Otomatis","drawMode3":"Mode 3 Tarikan","statistics":"Statistik","draw1":"Tarik 1","draw3":"Tarik 3","win":"Menang","loss":"Kalah","matches":"pertandingan","match":"pertandingan","winsWithoutUndo":"Menangi tanpa Undo","bestScore":"Skor Terbaik","avgScore":"Skor Rata-Rata","bestWinningTime":"Waktu Menang Terbaik","avgWinningTime":"Waktu Menang Rata-Rata","awesome":"Istimewa!","score":"Skor","moves":"Langkah","time":"Waktu","bestTime":"Waktu terbaik","outOfMoves":"Langkah habis!","newGame":"Game Baru","game":"Game","hint":"Petunjuk","undo":"Undo","newSettings":"Pengaturan baru akan berlaku \\ndi transaksi berikutnya!","ok":"OK","newDeal":"Transaksi baru","replay":"Ulangi permainan","cancel":"Batalkan","loadingAds":"Memuat iklan ...","loading":"Memuat...","background":"Latar Belakang","cardFace":"Bagian Depan\\nKartu","cardBack":"Bagian Belakang\\nKartu","totalGame":"Permainan total"},"Texture":{"null":"null"}}'),de:JSON.parse('{"Text":{"howToPlay":"Spielanleitung","next":"Weiter","done":"Fertig","firstTutor":"Dein Ziel ist es, die Spielkarten auf den Grundstapel\\nzu bringen. Dazu musst du sie nach Farbe\\nvon Ass bis K\xf6nig sortieren.\\nZum Beispiel Ass, 2, 3 und so weiter.","secondTutor":"Die Karten k\xf6nnen von Stapel zu Stapel verschoben werden. \\nAuf jedem Stapel sind die Karten in der Reihenfolge vom \\ngr\xf6\xdften zum kleinsten angeordnet. Abwechselnd rot \\nund schwarz.","thirdTutor":"Wenn du die Karte unten nicht verschieben kannst,\\nklicke einfach auf den Kartenvorrat\\nin der oberen rechten Ecke. Dann werden dir\\nhier weitere Karten zur Verf\xfcgung gestellt,\\num das Problem zu l\xf6sen!","fourthTutor":"Die Sortierreihenfolge auf jedem Grundstapel in der oberen \\nlinken Ecke ist folgenderma\xdfen geordnet: \u201eA-2-3-...-Q-K\u201c","settings":"Einstellungen","inviteFriends":"Freunde einladen","soundEffects":"Toneffekte","vibration":"Vibration","theme":"Thema","tapToMove":"Antippen zum Bewegen","autoHints":"Automatische Tipps","autoComplete":"Auto-Vervollst\xe4ndigen","drawMode3":"3-Ziehen-Modus","statistics":"Statistiken","draw1":"Ziehe 1","draw3":"Ziehe 3","win":"Sieg","loss":"Niederlage","matches":"Matches","match":"Match","winsWithoutUndo":"Siege ohne R\xfcckg\xe4ngig machen","bestScore":"Bestes Ergebnis","avgScore":"Durchschnittliches Ergebnis","bestWinningTime":"Beste Siegzeit","avgWinningTime":"Durchschnittliche Siegzeit","awesome":"Super!","score":"Punktzahl","moves":"Z\xfcge","time":"Zeit","bestTime":"Beste Zeit","outOfMoves":"Keine Z\xfcge mehr!","newGame":"Neues Spiel","game":"Spiel","hint":"Tipp","undo":"R\xfcckg\xe4ngig\\nmachen","newSettings":"Die neuen Einstellungen werden \\nbeim n\xe4chsten Deal wirksam!","ok":"OK","newDeal":"Neuer Deal","replay":"Wiederholen","cancel":"Abbrechen","loadingAds":"Lade Werbung ...","loading":"Laden \u2026","background":"Hintergrund","cardFace":"Kartenvorderseite","cardBack":"Kartenr\xfcckseite","totalGame":"Gesamtspiel"},"Texture":{"null":"null"}}'),it:JSON.parse('{"Text":{"howToPlay":"Come si gioca","next":"Avanti","done":"Fatto","firstTutor":"L\'obiettivo \xe8 quello di spostare le carte di chiamata alla \\nfondazione. Impilandole in base al seme da Asso a Re. \\nAd esempio, A, 2, 3 e cos\xec via.","secondTutor":"Le carte possono essere spostate\\nda una colonna all\'altra. In ogni colonna,\\nle carte sono disposte in ordine\\ndalla pi\xf9 grande alla pi\xf9 piccola.\\nAlternando rosso e nero.","thirdTutor":"Se la carta in fondo al mazzo non pu\xf2 essere spostata,\\nbasta fare clic sul cartoncino nell\'angolo in alto a destra,\\nsaranno fornite qui altre carte\\nper aiutarti a risolvere il problema!","fourthTutor":"L\'ordine su ciascuna fondazione nell\'angolo in alto a \\nsinistra \xe8 disposto secondo: A-2-3-...- Regina-Re","settings":"Impostazioni","inviteFriends":"Invita gli amici","soundEffects":"Effetti sonori","vibration":"Vibrazione","theme":"Tema","tapToMove":"Tocca per spostare","autoHints":"Suggerimenti automatici","autoComplete":"Completamento automatico","drawMode3":"Modalit\xe0 pesca 3","statistics":"Statistiche","draw1":"Pesca 1","draw3":"Pesca 3","win":"Vittoria","loss":"Sconfitta","matches":"partite","match":"partita","winsWithoutUndo":"Vittorie senza annulla mossa","bestScore":"Miglior punteggio","avgScore":"Punteggio medio","bestWinningTime":"Miglior tempo","avgWinningTime":"Tempo medio di vittoria","awesome":"Fantastico!","score":"Punteggio","moves":"Mosse","time":"Tempo","bestTime":"Miglior tempo","outOfMoves":"Mosse esaurite","newGame":"Nuova partita","game":"Partita","hint":"Suggerimento","undo":"Annulla","newSettings":"Le nuove impostazioni avranno \\neffetto nella prossima partita!","ok":"OK","newDeal":"Nuova partita","replay":"Rigioca","cancel":"Annulla","loadingAds":"Caricamento annunci...","loading":"Caricamento\u2026","background":"Sfondo","cardFace":"Faccia della\\ncarta","cardBack":"Retro della\\ncarta","totalGame":"Gioco totale"},"Texture":{"null":"null"}}'),zh:JSON.parse('{"Text":{"howToPlay":"\u5982\u4f55\u6e38\u73a9","next":"\u4e0b\u4e00\u4e2a","done":"\u5b8c\u6210","firstTutor":"\u6e38\u620f\u7684\u76ee\u6807\u662f\u5c06\u6240\u6709\u724c\u79fb\u52a8\u5230\u57fa\u7840\u724c\u5bf9\u3002\u6309\u7167\u82b1\u8272\u548c\u4ece\\nA\u5230K\u7684\u987a\u5e8f\u5956\u724c\u5806\u53e0\u3002\u6bd4\u5982\uff0cA\u30012\u30013\u2026\u2026","secondTutor":"\u5361\u724c\u53ef\u4ee5\u4ece\u4e00\u680f\u79fb\u52a8\u5230\u53e6\u4e00\u680f\u3002\u5728\u6bcf\u4e00\u680f\u4e2d\uff0c\\n\u5361\u724c\u6309\u7167\u4ece\u5927\u5230\u5c0f\u7684\u987a\u5e8f\u6392\u5217\u3002\u7ea2\u9ed1\u4ea4\u66ff\u3002","thirdTutor":"\u5982\u679c\u4e0b\u65b9\u7684\u724c\u65e0\u6cd5\u79fb\u52a8\uff0c\u70b9\u51fb\u53f3\u4e0a\u89d2\u7684\u724c\u5806\u5c31\u4f1a\u53d1\u66f4\\n\u591a\u5361\u724c\u6765\u5e2e\u52a9\u4f60\u89e3\u51b3\u96be\u9898\uff01","fourthTutor":"\u5de6\u4e0a\u89d2\u5404\u57fa\u7840\u724c\u5806\u7684\u6392\\n\u5217\u987a\u5e8f\u5982\u4e0b\uff1a\u201cA-2-3-...-Q-K\u201d","settings":"\u8bbe\u7f6e","inviteFriends":"\u9080\u8bf7\u597d\u53cb","soundEffects":"\u58f0\u6548","vibration":"\u9707\u52a8","theme":"\u4e3b\u9898","tapToMove":"\u70b9\u51fb\u79fb\u52a8","autoHints":"\u81ea\u52a8\u63d0\u793a","autoComplete":"\u81ea\u52a8\u5b8c\u6210","drawMode3":"3\u5f20\u724c\u6a21\u5f0f","statistics":"\u7edf\u8ba1\u6570\u636e","draw1":"1\u5f20\u724c","draw3":"3\u5f20\u724c","win":"\u80dc\u5229","loss":"\u5931\u8d25","matches":"\u5bf9\u5c40","match":"\u5bf9\u5c40","winsWithoutUndo":"\u4e0d\u7528\u8fd8\u539f\u8d62\u5f97\u80dc\u5229","bestScore":"\u6700\u9ad8\u5206\u6570","avgScore":"\u5e73\u5747\u5206","bestWinningTime":"\u6700\u4f73\u80dc\u5229\u65f6\u95f4","avgWinningTime":"\u5e73\u5747\u80dc\u5229\u65f6\u95f4","awesome":"\u592a\u68d2\u4e86\uff01","score":"\u5206\u6570","moves":"\u6b65\u6570","time":"\u65f6\u95f4","bestTime":"\u6700\u4f73\u5b9e\u8df5","outOfMoves":"\u6ca1\u6709\u53ef\u7528\u6b65\u6570\uff01","newGame":"\u65b0\u6e38\u620f","game":"\u6e38\u620f","hint":"\u63d0\u793a","undo":"\u8fd8\u539f","newSettings":"\u65b0\u8bbe\u7f6e\u4f1a\u5728\u4e0b\u6b21\\n\u53d1\u724c\u65f6\u751f\u6548\uff01","ok":"\u786e\u5b9a","newDeal":"\u65b0\u724c","replay":"\u91cd\u65b0\u5f00\u59cb","cancel":"\u53d6\u6d88","loadingAds":"\u52a0\u8f7d\u5e7f\u544a\u4e2d\u2026\u2026","loading":"\u6b63\u5728\u8f7d\u5165\u2026\u2026","background":"\u80cc\u666f","cardFace":"\u5361\u724c\u6b63\u9762","cardBack":"\u5361\u724c\u80cc\u9762","totalGame":"\u5168\u573a\u6bd4\u8d5b"},"Texture":{"null":"null"}}')},Zb=function(e){function t(){return e.apply(this,arguments)||this}return(0,f.Z)(t,e),t.prototype.configure=function(t){e.prototype.configure.call(this,(0,p.Z)({data:Fb,locale:"en",upperCaseText:!1},t))},t}(Gb),Ub=Zb,Wb=function(e){function t(t){var n;return(n=e.call(this,{game:t,fragShader:"\nprecision mediump float;\n\nuniform sampler2D uMainSampler[%count%];\nuniform float gray;\n\nvarying vec2 outTexCoord;\nvarying float outTexId;\nvarying vec4 outTint;\nvarying vec2 fragCoord;\n\nvoid main()\n{\n    vec4 texture;\n\n    %forloop%\n\n    gl_FragColor = texture;\n    gl_FragColor.rgb = mix(gl_FragColor.rgb, vec3(0.2126 * gl_FragColor.r + 0.7152 * gl_FragColor.g + 0.0722 * gl_FragColor.b), gray);\n}",uniforms:["uProjectionMatrix","uMainSampler","gray"]})||this).gray=void 0,n.gray=.8,n}return(0,f.Z)(t,e),t.prototype.onPreRender=function(){this.set1f("gray",this.gray)},t}(Phaser.Renderer.WebGL.Pipelines.MultiPipeline),Hb=n(525),zb=function(){var e=(0,a.Z)(r().mark((function e(t){var n,i,s,c,u;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=Math.ceil(t/80),i=0,s=function(){var e=(0,a.Z)(r().mark((function e(){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,FBInstant.performHapticFeedbackAsync();case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.log("can not haptic");case 8:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(){return e.apply(this,arguments)}}();case 3:if(!(i<n)){e.next=11;break}return c=s(),u=(0,tr.qZ)(80),i+=1,e.next=9,o().all([c,u]);case 9:e.next=3;break;case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Yb=function(e){window.navigator.vibrate(0),window.navigator.vibrate(e)},Kb=function(e){try{if(!function(){var e=GameCore.Utils.Device,t=window.navigator.vibrate;return e.isAndroid()&&"function"===typeof t||e.isMobileWeb()&&"function"===typeof t}())return!1;var t=GameCore.Utils.Device;t.isAndroid()||t.isMobileWeb()?Yb(e):t.isIOS()&&zb(e).catch((function(e){return console.log(e)}))}catch(n){}},Vb=function(e){function t(){return e.apply(this,arguments)||this}return(0,f.Z)(t,e),t.prototype.performVibrating=function(e){this.game.player.getPlayerSettings().vibrate&&Kb(e)},t}(Phaser.Plugins.BasePlugin),jb=Vb,Xb=n(526),qb=["Enable"],Jb=function(e){function t(t){var n;return(n=e.call(this,t)||this).renderOnDemand=!0,n}(0,f.Z)(t,e);var i=t.prototype;return i.boot=function(){var t=(0,a.Z)(r().mark((function t(){return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.prototype.boot.call(this),this.addExtraGameObjectMethods(),this.addExtraFBInstantFunctions(),this.addPlugins(),t.next=6,this.addDevPlugins();case 6:return t.next=8,this.initAdsAsync();case 8:this.addScenes(),this.addDevScenes(),this.initWorld(),this.initManagers(),this.initStorage(),this.initLanguage(),this.initUtils(),this.initRollbar(),this.initConsole(),this.initDebugger(),this.initStatistics(),this.initParticleEditor(),this.initProfilerPlugin(),this.initAdaptivePerformance(),this.initCanvasRecorderPlugin();case 23:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),i.start=function(){e.prototype.start.call(this)},i.addExtraGameObjectMethods=function(){var e=new A(this);e.addKillRevive(),e.addKillReviveGroup(),e.addDrawDebugBox(),e.addSetWorldSize(),e.addSetWorldSizeForContainer(),e.addGetWorldPosition(),e.addCropByViewport(),e.addHighQuality(),e.addSetLineHeightForBitmapText(),e.customBitmapText()},i.addExtraFBInstantFunctions=function(){var e=new g.Z(this.facebook);this.facebook.getLocale=e.getLocale,this.facebook.shareAsync=e.shareAsync,this.facebook.inviteAsync=e.inviteAsync,this.facebook.switchAsync=e.switchAsync,this.facebook.chooseAsync=e.chooseAsync,this.facebook.createAsync=e.createAsync,this.facebook.sendMessage=e.sendMessage,this.facebook.getContextID=e.getContextID,this.facebook.getPlayerToken=e.getPlayerToken,this.facebook.matchPlayerAsync=e.matchPlayerAsync,this.facebook.getContextPlayers=e.getContextPlayers,this.facebook.setLoadingProgress=e.setLoadingProgress,this.facebook.attemptToAddShortcut=e.attemptToAddShortcut,this.facebook.attemptToSubscribeBot=e.attemptToSubscribeBot,this.facebook.postSessionScoreAsync=e.postSessionScoreAsync,this.facebook.getRewardedVideoAsync=e.getRewardedVideoAsync,this.facebook.sendNotificationAsync=e.sendNotificationAsync,this.facebook.getInterstitialAdAsync=e.getInterstitialAdAsync,this.facebook.followOfficialPageAsync=e.followOfficialPageAsync,this.facebook.joinOfficialGroupAsync=e.joinOfficialGroupAsync,this.facebook.isSupportedAPI=e.isSupportedAPI,e.injectTournament(),this.facebook.progressLoading=new y(this)},i.addPlugins=function(){this.plugins.install("Storage",ei,!0,"storage"),this.plugins.install("Rollbar",un,!0,"rollbar"),this.plugins.install("AdsManager",q,!0,"ads"),this.plugins.install("AuthManager",ye,!0,"auth"),this.plugins.install("AudioManager",ce,!0,"audio"),this.plugins.install("WorldManager",hi,!0,"world"),this.plugins.install("PlayerManager",Bt,!0,"player"),this.plugins.install("ProfileManager",jt,!0,"profile"),this.plugins.install("LanguageManager",Ub,!0,"lang"),this.plugins.install("AnalyticsManager",$,!0,"analytics"),this.plugins.install("AdaptivePerformance",xe,!0,"performance"),this.plugins.install("ThemeManager",Mb,!0,"theme"),this.plugins.install("VisibilityChangeHandler",Pb,!0,"visibility"),this.plugins.install("VibrationManager",jb,!0,"vibration"),this.plugins.installScenePlugin("textStyler",ri,"textStyler"),this.plugins.installScenePlugin("ScreenManager",Sn,"screen"),this.plugins.installScenePlugin("FrameCapture",Se,"frameCapture"),window.SpinePlugin&&this.plugins.installScenePlugin("SpinePlugin",SpinePlugin,"spine"),this.storage=this.plugins.get("Storage"),this.rollbar=this.plugins.get("Rollbar"),this.ads=this.plugins.get("AdsManager"),this.auth=this.plugins.get("AuthManager"),this.audio=this.plugins.get("AudioManager"),this.world=this.plugins.get("WorldManager"),this.player=this.plugins.get("PlayerManager"),this.lang=this.plugins.get("LanguageManager"),this.profile=this.plugins.get("ProfileManager"),this.analytics=this.plugins.get("AnalyticsManager"),this.performance=this.plugins.get("AdaptivePerformance"),this.theme=this.plugins.get("ThemeManager"),this.plugins.install("KawaseBlurFilterPlugin",kb.Z),this.vibration=this.plugins.get("VibrationManager")},i.addDevPlugins=function(){var e=(0,a.Z)(r().mark((function e(){var t,a,i,s,o,c;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(GameCore.Utils.Valid.isDebugger()){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,Promise.all([n.e(7),n.e(942)]).then(n.bind(n,509));case 4:return t=e.sent.default,e.next=7,Promise.all([n.e(498),n.e(739),n.e(530)]).then(n.bind(n,510));case 7:return a=e.sent.default,e.next=10,n.e(401).then(n.bind(n,511));case 10:return i=e.sent.default,e.next=13,Promise.all([n.e(498),n.e(123)]).then(n.bind(n,512));case 13:return s=e.sent.default,e.next=16,Promise.all([n.e(498),n.e(803)]).then(n.bind(n,513));case 16:return o=e.sent.default,e.next=19,Promise.all([n.e(498),n.e(616),n.e(613)]).then(n.bind(n,514));case 19:c=e.sent.default,this.plugins.install("Console",t,!0,"console"),this.plugins.install("Debugger",a,!0,"debugger"),this.plugins.install("Statistics",i,!0,"statistics"),this.plugins.install("Profiler",s,!0,"profiler"),this.plugins.install("ParticleEditor",o,!0,"particle-editor"),this.plugins.install("CanvasRecorder",c,!0,"canvasRecorder"),this.eruda=this.plugins.get("Console"),this.debugger=this.plugins.get("Debugger"),this.statistics=this.plugins.get("Statistics"),this.profiler=this.plugins.get("Profiler"),this.particleEditor=this.plugins.get("ParticleEditor"),this.canvasRecorder=this.plugins.get("CanvasRecorder");case 32:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),i.addScenes=function(){this.scene.add(_i.C.BOOT_SCENE,Mi,!0),this.scene.add(_i.C.LOAD_SCENE,fb,!1),this.scene.add(_i.C.GAME_SCENE,Mm,!1),this.scene.add(_i.C.GAME_OVER_SCENE,Cu,!1),this.scene.add(_i.C.DASHBOARD_SCENE,Zi,!1),this.scene.add(_i.C.LEADERBOARD_SCENE,Gv,!1),this.scene.add(_i.C.RESULT_MATCH_SCENE,Cb,!1),this.scene.add(_i.C.GLOBAL_SCENE,hm.Z,!1)},i.addDevScenes=function(){var e=(0,a.Z)(r().mark((function e(){var t,a;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(GameCore.Utils.Valid.isDebugger()){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,n.e(638).then(n.bind(n,528));case 4:return t=e.sent.default,e.next=7,n.e(557).then(n.bind(n,515));case 7:a=e.sent.default,this.scene.add(_i.C.TEST_SCENE,t,!1),this.scene.add(_i.C.ANIMATIONS_SCENE,a,!1);case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),i.initAdsAsync=function(){var e=(0,a.Z)(r().mark((function e(){var t,n,a;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=GameCore.Configs.Ads,e.next=3,this.getAdServiceInstance();case 3:(n=e.sent).setGame(this),a=(0,p.Z)({},t.InterstitialAdOptions),this.ads.configure(n,{enabled:t.Enabled,calculateSafeAreaBottom:t.CalculateSafeAreaBottom,enableRewardVideoResetInterstitial:t.EnableRewardVideoResetInterstitial,interstitialAdOptions:a,rewardAdOptions:t.RewardAdOptions,bannerAdOptions:t.BannerAdOptions});case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),i.getAdServiceInstance=function(){var e=(0,a.Z)(r().mark((function e(){var t,a,i,s;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=GameCore.Configs.Ads,a=t.AdService,!t.Mockup.Enable){e.next=6;break}return e.next=4,n.e(131).then(n.bind(n,516));case 4:return i=e.sent.default,e.abrupt("return",i);case 6:if("google"!==a){e.next=19;break}return e.prev=7,e.next=10,this.initGoogleAdInstanceAsync();case 10:if(null===(s=e.sent)){e.next=13;break}return e.abrupt("return",s);case 13:e.next=19;break;case 15:return e.prev=15,e.t0=e.catch(7),console.error("Google Ads failed to load, fallback to GameAdInstance",e.t0),e.abrupt("return",Hb.default);case 19:return e.abrupt("return",Hb.default);case 20:case"end":return e.stop()}}),e,this,[[7,15]])})));return function(){return e.apply(this,arguments)}}(),i.initGoogleAdInstanceAsync=function(){var e=(0,a.Z)(r().mark((function e(){var t,n,a,i,s,o,c,u;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("loaded"!==Xb.default.initStatus){e.next=2;break}return e.abrupt("return",Xb.default);case 2:if(t=GameCore.Configs.Ads.AdServiceConfigs.Google){e.next=6;break}return console.error("Google Ads config not found"),e.abrupt("return",null);case 6:return n=t.DataAdClient,a=t.DataAdChannel,i=t.DataAdBreakTest,s=t.DataAdFrequencyHint,o=t.DataAdHost,c=t.MaxScriptLoadRetryCount,u={dataAdClient:n,dataAdChannel:a,dataAdBreakTest:i,dataAdFrequencyHint:s,dataAdHost:o,maxScriptLoadRetryCount:c},e.prev=8,Xb.default.setGame(this),e.next=12,Xb.default.initGoogleAdsAsync(u);case 12:return e.abrupt("return",Xb.default);case 15:return e.prev=15,e.t0=e.catch(8),console.error("Google Ads failed to load, fallback to GameAdInstance",e.t0),e.abrupt("return",null);case 19:case"end":return e.stop()}}),e,this,[[8,15]])})));return function(){return e.apply(this,arguments)}}(),i.initWorld=function(){var e=this,t=GameCore.Configs.Game,n=t.AutoResize,a=t.PortraitRatio,i=t.PortraitWidth,r=t.PortraitHeight,s=t.LandscapeRatio,o=t.LandscapeWidth,c=t.LandscapeHeight,u=t.DisableLandscape,l=t.FullSizeOnLandscape,h=n,d=u,p=l,f=a,g=i,m=r,v=s,y=o,b=c;console.info("\ud83d\ude80 > portraitRatio",f),console.info("\ud83d\ude80 > landscapeRatio",v),this.world.configure({autoResize:h,portraitRatio:f,portraitWidth:g,portraitHeight:m,landscapeRatio:v,landscapeWidth:y,landscapeHeight:b,disableLandscape:d,fullSizeOnLandscape:p}),this.world.resize(t.ForcePixelRatio),this.events.on("world-resize",(function(){e.world.configure({autoResize:h,portraitRatio:f,portraitWidth:g,portraitHeight:m,landscapeRatio:v,landscapeWidth:y,landscapeHeight:b,disableLandscape:d,fullSizeOnLandscape:p}),e.world.resize(t.ForcePixelRatio)}))},i.initManagers=function(){this.theme.config()},i.initStorage=function(){var e=new Pi(this);this.storage.setInitiator(e)},i.initLanguage=function(){var e=this.facebook.getLocale();this.lang.configure({locale:e})},i.initVisibilityChangeHandler=function(){this.visibility.configure()},i.initUtils=function(){this.addPipelines(),this.removeUnusedPipelines()},i.initConsole=function(){GameCore.Utils.Valid.isDebugger()&&(GameCore.Configs.Debugger.ShowConsole&&this.eruda.configure({tool:["console","info"],defaults:{theme:"Dark"}}))},i.initDebugger=function(){if(GameCore.Utils.Valid.isDebugger()){var e=GameCore.Configs.Debugger,t=e.ShowInspector,n=e.ShowMonitoring;(t||n)&&this.debugger.configure(GameCore.Configs.Debugger)}},i.initStatistics=function(){GameCore.Utils.Valid.isDebugger()&&(GameCore.Configs.Statistics.Enable&&this.statistics.configure(GameCore.Configs.Statistics))},i.initParticleEditor=function(){GameCore.Utils.Valid.isDebugger()&&(GameCore.Configs.ParticleEditor.Enable&&this.particleEditor.configure(GameCore.Configs.ParticleEditor))},i.initProfilerPlugin=function(){GameCore.Utils.Valid.isDebugger()&&(GameCore.Configs.ProfilerPlugin.Enable&&this.profiler.configure())},i.initAdaptivePerformance=function(){var e=GameCore.Configs.Performance,t=e.Enable,n=(0,d.Z)(e,qb);if(t){var a=this.world.getPixelRatio();this.performance.configure((0,p.Z)({pixelRatio:a},n)),this.performance.active()}},i.initCanvasRecorderPlugin=function(){var e=this;if(GameCore.Utils.Valid.isDebugger()){var t=GameCore.Configs.CanvasRecorder;if(t.Enable){var n=t.Options,i=n.Type,s=n.Quality,c=n.RecordFps,u=n.SyncFps;this.canvasRecorder.configure({type:i,quality:s,syncFps:u,recordFps:c});var l=document.querySelector("canvas");if(!l)return console.error("Canvas not found");this.canvasRecorder.setCanvas(l);var h=this.canvasRecorder.getOptions(),d=this.canvasRecorder.waitNextFrame;this.canvasRecorder.waitNextFrame=(0,a.Z)(r().mark((function t(){return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!h.syncFps){t.next=5;break}return e.loop.sleep(),t.abrupt("return",new(o())((function(t){e.events.once(Phaser.Core.Events.POST_RENDER,t),e.loop.lastTime=1e3/h.recordFps,e.loop.step()})));case 5:return e.loop.wake(),t.abrupt("return",d.call(e.canvasRecorder));case 7:case"end":return t.stop()}}),t)})))}}},i.initRollbar=function(){var e=GameCore.Configs.Rollbar.Enable;console.warn({isRollbarEnabled:e}),e&&this.rollbar.setup()},i.handlePauseAudio=function(){},i.addPipelines=function(){var e=this.renderer;e instanceof Phaser.Renderer.WebGL.WebGLRenderer&&e.pipelines.add("Grayscale",new Wb(this))},i.removeUnusedPipelines=function(){var e=this.renderer;if(e instanceof Phaser.Renderer.WebGL.WebGLRenderer){var t=e.pipelines,n=Phaser.Renderer.WebGL.Pipelines;if(n)[n.ROPE_PIPELINE,n.LIGHT_PIPELINE,n.POSTFX_PIPELINE,n.POINTLIGHT_PIPELINE,n.BITMAPMASK_PIPELINE].forEach((function(e){var n;null==(n=t.get(e))||n.destroy(),t.remove(e)}))}},t}(Phaser.Game),Qb=Jb,$b=GameCore.Configs.Debugger.ShowInspector,eA={parent:"app",type:Phaser.AUTO,width:0,height:0,scale:{autoRound:!0},dom:{createContainer:!1},loader:{maxParallelDownloads:6,crossOrigin:"no-cros"},input:{gamepad:!1,keyboard:$b,touch:{capture:!0},smoothFactor:1,activePointers:1,windowEvents:!1},disableContextMenu:!0,render:{pixelArt:!1,antialias:!0,transparent:!0,desynchronized:!1,powerPreference:"high-performance",clearBeforeRender:!1,roundPixels:!1},plugins:{global:[]}};(0,h.j6)();var tA=function(){var e=(0,a.Z)(r().mark((function e(){var t;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,l();case 3:t=new Qb(eA),window.game=t,e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),(0,h.tO)(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),nA=setInterval((function(){window.__analyticsInitiated&&(window.__fbGameReady=!1,clearInterval(nA),clearInterval(window.__fbInstantLoadingTimer),GameSDK.setLoadingProgress(30),gtag("event","app_initialize",{send_to:["GA"]}),tA())}),50)},569:function(e,t,n){"use strict";n.d(t,{Z5:function(){return y},H$:function(){return b},wF:function(){return A},bh:function(){return S},Iy:function(){return E},xB:function(){return w}});var a=n(8),i=n(1),r=n(7),s=n.n(r),o=n(42),c=n.n(o),u=n(2),l=n.n(u),h=n(551),d=n(541),p=n(570),f=GameCore.Configs,g=f.AppId,m=f.OtherHost,v=f.LeadersBoard,y=function(){var e=(0,i.Z)(l().mark((function e(t){var n,i;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n={appId:g,resetScore:0,numberOfLeaders:15,timezone:"utc+0",sortOrder:"desc",statistics:"max",resettable:"manually",description:"no description"},!v.UseMock){e.next=5;break}return e.next=4,(0,d.qZ)(1e3);case 4:return e.abrupt("return",(0,a.Z)({},n,t,{_id:v.LeaderboardId,type:"app_leaderboard",description:"mockup_leaderboard",createdAt:new Date(Date.now()).toISOString(),updatedAt:new Date(Date.now()).toISOString()}));case 5:return"leaderboards",e.next=8,(0,h.v)("leaderboards",(0,a.Z)({},n,t),{},m);case 8:return i=e.sent,e.abrupt("return",(null==i?void 0:i.data)||{});case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),b=function(){var e=(0,i.Z)(l().mark((function e(t,n){var a,i,r,o,u,p,f,g,y,b,A,S;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===n&&(n={}),t){e.next=3;break}return e.abrupt("return",[]);case 3:if(a=[],!v.UseMock){e.next=9;break}return e.next=7,(0,d.qZ)(1e3);case 7:return u=(o=n).limit,p=void 0===u?10:u,f=o.offset,g=void 0===f?0:f,e.abrupt("return",s()(i=c()(r=new Array(p)).call(r,null)).call(i,(function(e,t){var n=(t+1)*(g+1),a=v.MockOptions.PlayerEntryIndex===t,i={playerId:"player-0"+n,name:"MPlayer "+n,photo:"./assets/images/others/avatar.jpg",rank:n,score:Math.floor(1e5/n+1e4*Math.random())};if(a){var r=window.game.player.getPlayer(),s=r.playerId,o=r.name,c=r.photo;i.playerId=s,i.name=o,i.photo=c}return i})));case 9:return y=GameCore.Utils.String.params(n),b="leaderboards/"+t+"/leaders",e.next=13,(0,h.U)(b+"?"+y,{},m);case 13:if((A=e.sent)&&(null==A||!A.error)){e.next=16;break}throw new Error((null==A?void 0:A.error)||"Leaderboard not found");case 16:if(!((S=(null==A?void 0:A.data)||[]).length<1)){e.next=19;break}return e.abrupt("return",a);case 19:return a=S,e.abrupt("return",a);case 21:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),A=function(){var e=(0,i.Z)(l().mark((function e(t){var n,a;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return",null);case 2:return n="leaderboards/"+t,e.next=5,(0,h.U)(""+n,{},m);case 5:if((a=e.sent)&&(null==a||!a.error)){e.next=8;break}return e.abrupt("return",null);case 8:return e.abrupt("return",null==a?void 0:a.data);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),S=function(){var e=(0,i.Z)(l().mark((function e(t,n,a){var i;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,h.v)("leaderboards/"+t+"/players/"+n,{score:a},{},m);case 2:return i=e.sent,e.abrupt("return",(null==i?void 0:i.data)||{});case 4:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}(),E=function(){var e=(0,i.Z)(l().mark((function e(){var t,n,a,i,r,s,o,c,u;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=GameCore.Utils.String.params({limit:100,type:"world_tournament_leaderboard"}),"leaderboards",e.next=4,(0,h.U)("leaderboards?"+t,{},m);case 4:if((n=e.sent)&&(null==n||!n.error)){e.next=7;break}throw new p.Z;case 7:for(a=(null==n?void 0:n.data)||[],i=[],r=0;r<a.length;r++)s=JSON.parse(a[r].description),o=new Date(a[r].createdAt).getTime(),c=Math.round((6048e5+o)/1e3),u={id:s.tournamentID,title:a[r].name,endTime:c,contextID:s.contextID,payload:{playerId:"",playerName:"",leaderboardId:a[r]._id,level:s.level}},i.push(u);return e.abrupt("return",i);case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),w=function(){var e=(0,i.Z)(l().mark((function e(t,n){var a,i,r,s,o;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=null,t){e.next=3;break}return e.abrupt("return",a);case 3:if(i=v.Prefix+"/"+n+"/players"){e.next=6;break}return e.abrupt("return",a);case 6:return r=GameCore.Utils.String.params({playerIds:t}),e.next=9,(0,h.U)(i+"?"+r,{},m);case 9:if(s=e.sent,!((o=(null==s?void 0:s.data)||[]).length<1)){e.next=13;break}return e.abrupt("return",a);case 13:return a=o[0],e.abrupt("return",a);case 15:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},540:function(e,t,n){"use strict";n.d(t,{_:function(){return a}});var a={BUTTON_CLICK:"button_click",SCREEN_OPEN:"screen_open",LOAD_START:"load_start",LOAD_COMPLETE:"load_complete",APP_READY:"app_ready",TUTORIAL_BEGIN:"tutorial_begin",TUTORIAL_STEP:"tutorial_step",TUTORIAL_COMPLETE:"tutorial_complete",MATCH_START:"match_start",MATCH_RESCUE:"match_rescue",MATCH_END:"match_end",LEVEL_START:"level_start",LEVEL_RESCUE:"level_rescue",LEVEL_CONTINUE:"level_continue",LEVEL_END:"level_end",LEVEL_GIVE_UP:"level_give_up",SHARE:"share",MESSAGE:"message",INVITE:"invite",SHORTCUT_CREATE:"shortcut_create",SHORTCUT_CREATE_POPUP:"shortcut_create_popup",BOT_SUBSCRIBE:"bot_subscribe",BOT_SUBSCRIBE_POPUP:"bot_subscribe_popup",AD_INIT:"ad_init",AD_LOAD:"ad_load",AD_LOAD_FAILED:"ad_load_failed",AD_SHOW:"ad_show",AD_SHOW_FAILED:"ad_show_failed",MISSING_AD_SHOW:"missing_ad_show",NEW_USER:"new_user",AD_IMPRESSION:"ad_impression",JOIN_GROUP:"join_group",THEME_CHANGED:"theme_changed",TOURNAMENT_SHARE:"tournament_share",TOURNAMENT_CREATE:"tournament_create",TOURNAMENT_POST_SCORE:"tournament_post_score",TOURNAMENT_START:"tournament_start",SWITCH_SOLO_CONTEXT:"switch_solo_context",PAGE_FOLLOW:"page_follow",GROUP_JOIN:"group_join"}},543:function(e,t,n){"use strict";var a=n(544),i=function(){function e(e,t,n,i){this.playerId=void 0,this.name=void 0,this.photo=void 0,this.locale=void 0,this.playerId=e,this.name=t,this.photo=n||a.Z.AVATAR.FILE,this.locale=i||"en_US"}return e.prototype.toObject=function(){return{playerId:this.playerId,name:this.name,photo:this.photo,locale:this.locale}},e}();t.Z=i},556:function(e,t,n){"use strict";n.d(t,{I:function(){return i}});var a=n(549),i=function(e){return{type:a.DW,payload:{sceneKey:e}}}},541:function(e,t,n){"use strict";n.d(t,{qZ:function(){return o},Gm:function(){return c},F0:function(){return u}});var a=n(5),i=n.n(a),r=n(15),s=n.n(r),o=function(e){return new(i())((function(t){return setTimeout(t,e)}))},c=function(e){var t=new Date(e),n=new Date;return t.getDate()===n.getDate()&&t.getMonth()===n.getMonth()&&t.getFullYear()===n.getFullYear()},u=function(e,t){void 0===t&&(t=!0);var n=new Date(e).toISOString();return t?s()(n).call(n,11,-5):s()(n).call(n,14,-5)}},537:function(e,t,n){"use strict";n.d(t,{j6:function(){return i},sw:function(){return r},Tv:function(){return s},R0:function(){return c},tO:function(){return u}});n(120),n(118),n(38),n(25);var a=!1,i=function(){var e=setInterval((function(){window.Sentry&&(clearInterval(e),console.warn({isSentryEnabled:a}))}),100)},r=function(e,t){window.Sentry&&window.Sentry.addBreadcrumb({category:e,message:t})},s=function(e){window.Sentry&&window.Sentry.setUser(e)},o=function(e){console.error(e)},c=function(e,t){e&&console.error(e)},u=function(e){e&&o(e)}},534:function(e,t){"use strict";t.Z=function(){return GameCore.Utils.Device.isDesktop()||GameCore.Utils.Device.pixelRatio()>1?2:1}},545:function(e,t){"use strict";t.Z={GENERIC_NOTIFICATION:0,NEW_USER_NOTIFICATION:1,MONDAY_NOTIFICATION:2,TUESDAY_NOTIFICATION:3,WEDNESDAY_NOTIFICATION:4,THURSDAY_NOTIFICATION:5,FRIDAY_NOTIFICATION:6,SATURDAY_NOTIFICATION:7,SUNDAY_NOTIFICATION:8}},536:function(e,t,n){"use strict";n.d(t,{Z:function(){return r}});var a=JSON.parse('{"data":["Smith","Johnson","Williams","Brown","Jones","Miller","Davis","Garcia","Rodriguez","Wilson","Martinez","Anderson","Taylor","Thomas","Hernandez","Moore","Martin","Jackson","Thompson","White","Lopez","Lee","Gonzalez","Harris","Clark","Lewis","Robinson","Walker","Perez","Hall","Young","Allen","Sanchez","Wright","King","Scott","Green","Baker","Adams","Nelson","Hill","Ramirez","Campbell","Mitchell","Roberts","Carter","Phillips","Evans","Turner","Torres","Parker","Collins","Edwards","Stewart","Flores","Morris","Nguyen","Murphy","Rivera","Cook","Rogers","Morgan","Peterson","Cooper","Reed","Bailey","Bell","Gomez","Kelly","Howard","Ward","Cox","Diaz","Richardson","Wood","Watson","Brooks","Bennett","Gray","James","Reyes","Cruz","Hughes","Price","Myers","Long","Foster","Sanders","Ross","Morales","Powell","Sullivan","Russell","Ortiz","Jenkins","Gutierrez","Perry","Butler","Barnes","Fisher","Henderson","Coleman","Simmons","Patterson","Jordan","Reynolds","Hamilton","Graham","Kim","Gonzales","Alexander","Ramos","Wallace","Griffin","West","Cole","Hayes","Chavez","Gibson","Bryant","Ellis","Stevens","Murray","Ford","Marshall","Owens","Mcdonald","Harrison","Ruiz","Kennedy","Wells","Alvarez","Woods","Mendoza","Castillo","Olson","Webb","Washington","Tucker","Freeman","Burns","Henry","Vasquez","Snyder","Simpson","Crawford","Jimenez","Porter","Mason","Shaw","Gordon","Wagner","Hunter","Romero","Hicks","Dixon","Hunt","Palmer","Robertson","Black","Holmes","Stone","Meyer","Boyd","Mills","Warren","Fox","Rose","Rice","Moreno","Schmidt","Patel","Ferguson","Nichols","Herrera","Medina","Ryan","Fernandez","Weaver","Daniels","Stephens","Gardner","Payne","Kelley","Dunn","Pierce","Arnold","Tran","Spencer","Peters","Hawkins","Grant","Hansen","Castro","Hoffman","Hart","Elliott","Cunningham","Knight","Bradley","Carroll","Hudson","Duncan","Armstrong","Berry","Andrews","Johnston","Ray","Lane","Riley","Carpenter","Perkins","Aguilar","Silva","Richards","Willis","Matthews","Chapman","Lawrence","Garza","Vargas","Watkins","Wheeler","Larson","Carlson","Harper","George","Greene","Burke","Guzman","Morrison","Munoz","Jacobs","Obrien","Lawson","Franklin","Lynch","Bishop","Carr","Salazar","Austin","Mendez","Gilbert","Jensen","Williamson","Montgomery","Harvey","Oliver","Howell","Dean","Hanson","Weber","Garrett","Sims","Burton","Fuller","Soto","Mccoy","Welch","Chen","Schultz","Walters","Reid","Fields","Walsh","Little","Fowler","Bowman","Davidson","May","Day","Schneider","Newman","Brewer","Lucas","Holland","Wong","Banks","Santos","Curtis","Pearson","Delgado","Valdez","Pena","Rios","Douglas","Sandoval","Barrett","Hopkins","Keller","Guerrero","Stanley","Bates","Alvarado","Beck","Ortega","Wade","Estrada","Contreras","Barnett","Caldwell","Santiago","Lambert","Powers","Chambers","Nunez","Craig","Leonard","Lowe","Rhodes","Byrd","Gregory","Shelton","Frazier","Becker","Maldonado","Fleming","Vega","Sutton","Cohen","Jennings","Parks","Mcdaniel","Watts","Barker","Norris","Vaughn","Vazquez","Holt","Schwartz","Steele","Benson","Neal","Dominguez","Horton","Terry","Wolfe","Hale","Lyons","Graves","Haynes","Miles","Park","Warner","Padilla","Bush","Thornton","Mccarthy","Mann","Zimmerman","Erickson","Fletcher","Mckinney","Page","Dawson","Joseph","Marquez","Reeves","Klein","Espinoza","Baldwin","Moran","Love","Robbins","Higgins","Ball","Cortez","Le","Griffith","Bowen","Sharp","Cummings","Ramsey","Hardy","Swanson","Barber","Acosta","Luna","Chandler","Blair","Daniel","Cross","Simon","Dennis","Oconnor","Quinn","Gross","Navarro","Moss","Fitzgerald","Doyle","Mclaughlin","Rojas","Rodgers","Stevenson","Singh","Yang","Figueroa","Harmon","Newton","Paul","Manning","Garner","Mcgee","Reese","Francis","Burgess","Adkins","Goodman","Curry","Brady","Christensen","Potter","Walton","Goodwin","Mullins","Molina","Webster","Fischer","Campos","Avila","Sherman","Todd","Chang","Blake","Malone","Wolf","Hodges","Juarez","Gill","Farmer","Hines","Gallagher","Duran","Hubbard","Cannon","Miranda","Wang","Saunders","Tate","Mack","Hammond","Carrillo","Townsend","Wise","Ingram","Barton","Mejia","Ayala","Schroeder","Hampton","Rowe","Parsons","Frank","Waters","Strickland","Osborne","Maxwell","Chan","Deleon","Norman","Harrington","Casey","Patton","Logan","Bowers","Mueller","Glover","Floyd","Hartman","Buchanan","Cobb","French","Kramer","Mccormick","Clarke","Tyler","Gibbs","Moody","Conner","Sparks","Mcguire","Leon","Bauer","Norton","Pope","Flynn","Hogan","Robles","Salinas","Yates","Lindsey","Lloyd","Marsh","Mcbride","Owen","Solis","Pham","Lang","Pratt","Lara","Brock","Ballard","Trujillo","Shaffer","Drake","Roman","Aguirre","Morton","Stokes","Lamb","Pacheco","Patrick","Cochran","Shepherd","Cain","Burnett","Hess","Li","Cervantes","Olsen","Briggs","Ochoa","Cabrera","Velasquez","Montoya","Roth","Meyers","Cardenas","Fuentes","Weiss","Hoover","Wilkins","Nicholson","Underwood","Short","Carson","Morrow","Colon","Holloway","Summers","Bryan","Petersen","Mckenzie","Serrano","Wilcox","Carey","Clayton","Poole","Calderon","Gallegos","Greer","Rivas","Guerra","Decker","Collier","Wall","Whitaker","Bass","Flowers","Davenport","Conley","Houston","Huff","Copeland","Hood","Monroe","Massey","Roberson","Combs","Franco","Larsen","Pittman","Randall","Skinner","Wilkinson","Kirby","Cameron","Bridges","Anthony","Richard","Kirk","Bruce","Singleton","Mathis","Bradford","Boone","Abbott","Charles","Allison","Sweeney","Atkinson","Horn","Jefferson","Rosales","York","Christian","Phelps","Farrell","Castaneda","Nash","Dickerson","Bond","Wyatt","Foley","Chase","Gates","Vincent","Mathews","Hodge","Garrison","Trevino","Villarreal","Heath","Dalton","Valencia","Callahan","Hensley","Atkins","Huffman","Roy","Boyer","Shields","Lin","Hancock","Grimes","Glenn","Cline","Delacruz","Camacho","Dillon","Parrish","Oneill","Melton","Booth","Kane","Berg","Harrell","Pitts","Savage","Wiggins","Brennan","Salas","Marks","Russo","Sawyer","Baxter","Golden","Hutchinson","Liu","Walter","Mcdowell","Wiley","Rich","Humphrey","Johns","Koch","Suarez","Hobbs","Beard","Gilmore","Ibarra","Keith","Macias","Khan","Andrade","Ware","Stephenson","Henson","Wilkerson","Dyer","Mcclure","Blackwell","Mercado","Tanner","Eaton","Clay","Barron","Beasley","Oneal","Preston","Small","Wu","Zamora","Macdonald","Vance","Snow","Mcclain","Stafford","Orozco","Barry","English","Shannon","Kline","Jacobson","Woodard","Huang","Kemp","Mosley","Prince","Merritt","Hurst","Villanueva","Roach","Nolan","Lam","Yoder","Mccullough","Lester","Santana","Valenzuela","Winters","Barrera","Leach","Orr","Berger","Mckee","Strong","Conway","Stein","Whitehead","Bullock","Escobar","Knox","Meadows","Solomon","Velez","Odonnell","Kerr","Stout","Blankenship","Browning","Kent","Lozano","Bartlett","Pruitt","Buck","Barr","Gaines","Durham","Gentry","Mcintyre","Sloan","Melendez","Rocha","Herman","Sexton","Moon","Hendricks","Rangel","Stark","Lowery","Hardin","Hull","Sellers","Ellison","Calhoun","Gillespie","Mora","Knapp","Mccall","Morse","Dorsey","Weeks","Nielsen","Livingston","Leblanc","Mclean","Bradshaw","Glass","Middleton","Buckley","Schaefer","Frost","Howe","House","Mcintosh","Ho","Pennington","Reilly","Hebert","Mcfarland","Hickman","Noble","Spears","Conrad","Arias","Galvan","Velazquez","Huynh","Frederick","Randolph","Cantu","Fitzpatrick","Mahoney","Peck","Villa","Michael","Donovan","Mcconnell","Walls","Boyle","Mayer","Zuniga","Giles","Pineda","Pace","Hurley","Mays","Mcmillan","Crosby","Ayers","Case","Bentley","Shepard","Everett","Pugh","David","Mcmahon","Dunlap","Bender","Hahn","Harding","Acevedo","Raymond","Blackburn","Duffy","Landry","Dougherty","Bautista","Shah","Potts","Arroyo","Valentine","Meza","Gould","Vaughan","Fry","Rush","Avery","Herring","Dodson","Clements","Sampson","Tapia","Bean","Lynn","Crane","Farley","Cisneros","Benton","Ashley","Mckay","Finley","Best","Blevins","Friedman","Moses","Sosa","Blanchard","Huber","Frye","Krueger","Bernard","Rosario","Rubio","Mullen","Benjamin","Haley","Chung","Moyer","Choi","Horne","Yu","Woodward","Ali","Nixon","Hayden","Rivers","Estes","Mccarty","Richmond","Stuart","Maynard","Brandt","Oconnell","Hanna","Sanford","Sheppard","Church","Burch","Levy","Rasmussen","Coffey","Ponce","Faulkner","Donaldson","Schmitt","Novak","Costa","Montes","Booker","Cordova","Waller","Arellano","Maddox","Mata","Bonilla","Stanton","Compton","Kaufman","Dudley","Mcpherson","Beltran","Dickson","Mccann","Villegas","Proctor","Hester","Cantrell","Daugherty","Cherry","Bray","Davila","Rowland","Levine","Madden","Spence","Good","Irwin","Werner","Krause","Petty","Whitney","Baird","Hooper","Pollard","Zavala","Jarvis","Holden","Haas","Hendrix","Mcgrath","Bird","Lucero","Terrell","Riggs","Joyce","Mercer","Rollins","Galloway","Duke","Odom","Andersen","Downs","Hatfield","Benitez","Archer","Huerta","Travis","Mcneil","Hinton","Zhang","Hays","Mayo","Fritz","Branch","Mooney","Ewing","Ritter","Esparza","Frey","Braun","Gay","Riddle","Haney","Kaiser","Holder","Chaney","Mcknight","Gamble","Vang","Cooley","Carney","Cowan","Forbes","Ferrell","Davies","Barajas","Shea","Osborn","Bright","Cuevas","Bolton","Murillo","Lutz","Duarte","Kidd","Key","Cooke"]}'),i=function(e){return Math.floor(Math.random()*e)},r=function(){if(!a)return"Unknown";if(!a.data)return"Unknown";var e=a.data;if(!Array.isArray(e))return"Unknown";var t=e.length;return e[i(t)]+" "+e[i(t)]}},532:function(e,t){"use strict";t.Z=function(e,t){var n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789*#%&!",a="",i=e;void 0!=t&&(i-=t.length,a+=t);for(var r=0;r<i;r++){var s=Math.floor(Math.random()*n.length);a+=n.charAt(s)}return a}},533:function(e,t){"use strict";t.Z=function(e,t){if(0==t.length)return e;for(var n=e,a=0;a<t.length;a++)n=n.replace(/{}/,""+t[a]);return n}}},t={};function n(a){var i=t[a];if(void 0!==i)return i.exports;var r=t[a]={id:a,loaded:!1,exports:{}};return e[a].call(r.exports,r,r.exports,n),r.loaded=!0,r.exports}n.m=e,n.amdO={},function(){var e=[];n.O=function(t,a,i,r){if(!a){var s=1/0;for(l=0;l<e.length;l++){a=e[l][0],i=e[l][1],r=e[l][2];for(var o=!0,c=0;c<a.length;c++)(!1&r||s>=r)&&Object.keys(n.O).every((function(e){return n.O[e](a[c])}))?a.splice(c--,1):(o=!1,r<s&&(s=r));if(o){e.splice(l--,1);var u=i();void 0!==u&&(t=u)}}return t}r=r||0;for(var l=e.length;l>0&&e[l-1][2]>r;l--)e[l]=e[l-1];e[l]=[a,i,r]}}(),n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,{a:t}),t},n.d=function(e,t){for(var a in t)n.o(t,a)&&!n.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})},n.f={},n.e=function(e){return Promise.all(Object.keys(n.f).reduce((function(t,a){return n.f[a](e,t),t}),[]))},n.u=function(e){return e+"."+{7:"84f35404a4827cf5f442",109:"89dbd0f4bcf11e674b79",123:"836bfe411e58cd5c5ff4",131:"88d9d875937219d33f63",302:"3293f619b1e638fb230f",401:"2a336d687dd476e41d62",498:"2383f9e9c9c476419f4e",530:"88385bd42476fa8ba770",557:"6df09f047576f9b57e53",613:"c52b3cdd5edfe1a28eee",616:"65725d1da1eeb9656ed5",638:"bd762fd9b604467a833a",739:"ae6adc66f12029235c4b",803:"18eef9b62d062591fcb1",942:"f5d11214c29b2c52f8dc",961:"5be70b8276ac76489cb8"}[e]+".bundle.js"},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.hmd=function(e){return(e=Object.create(e)).children||(e.children=[]),Object.defineProperty(e,"exports",{enumerable:!0,set:function(){throw new Error("ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: "+e.id)}}),e},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},function(){var e={},t="game-core:";n.l=function(a,i,r,s){if(e[a])e[a].push(i);else{var o,c;if(void 0!==r)for(var u=document.getElementsByTagName("script"),l=0;l<u.length;l++){var h=u[l];if(h.getAttribute("src")==a||h.getAttribute("data-webpack")==t+r){o=h;break}}o||(c=!0,(o=document.createElement("script")).charset="utf-8",o.timeout=120,n.nc&&o.setAttribute("nonce",n.nc),o.setAttribute("data-webpack",t+r),o.src=a),e[a]=[i];var d=function(t,n){o.onerror=o.onload=null,clearTimeout(p);var i=e[a];if(delete e[a],o.parentNode&&o.parentNode.removeChild(o),i&&i.forEach((function(e){return e(n)})),t)return t(n)},p=setTimeout(d.bind(null,void 0,{type:"timeout",target:o}),12e4);o.onerror=d.bind(null,o.onerror),o.onload=d.bind(null,o.onload),c&&document.head.appendChild(o)}}}(),n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},function(){var e;n.g.importScripts&&(e=n.g.location+"");var t=n.g.document;if(!e&&t&&(t.currentScript&&(e=t.currentScript.src),!e)){var a=t.getElementsByTagName("script");a.length&&(e=a[a.length-1].src)}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),n.p=e}(),function(){var e={757:0};n.f.j=function(t,a){var i=n.o(e,t)?e[t]:void 0;if(0!==i)if(i)a.push(i[2]);else{var r=new Promise((function(n,a){i=e[t]=[n,a]}));a.push(i[2]=r);var s=n.p+n.u(t),o=new Error;n.l(s,(function(a){if(n.o(e,t)&&(0!==(i=e[t])&&(e[t]=void 0),i)){var r=a&&("load"===a.type?"missing":a.type),s=a&&a.target&&a.target.src;o.message="Loading chunk "+t+" failed.\n("+r+": "+s+")",o.name="ChunkLoadError",o.type=r,o.request=s,i[1](o)}}),"chunk-"+t,t)}},n.O.j=function(t){return 0===e[t]};var t=function(t,a){var i,r,s=a[0],o=a[1],c=a[2],u=0;if(s.some((function(t){return 0!==e[t]}))){for(i in o)n.o(o,i)&&(n.m[i]=o[i]);if(c)var l=c(n)}for(t&&t(a);u<s.length;u++)r=s[u],n.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return n.O(l)},a=self.webpackChunkgame_core=self.webpackChunkgame_core||[];a.forEach(t.bind(null,0)),a.push=t.bind(null,a.push.bind(a))}(),n.O(void 0,[216,630,542],(function(){return n(529)})),n.O(void 0,[216,630,542],(function(){return n(530)})),n.O(void 0,[216,630,542],(function(){return n(390)})),n.O(void 0,[216,630,542],(function(){return n(391)})),n.O(void 0,[216,630,542],(function(){return n(521)})),n.O(void 0,[216,630,542],(function(){return n(447)}));var a=n.O(void 0,[216,630,542],(function(){return n(469)}));a=n.O(a)})();