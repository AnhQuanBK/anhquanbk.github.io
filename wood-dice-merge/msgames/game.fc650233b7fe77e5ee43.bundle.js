(function(){var e={474:function(){HTMLCanvasElement.prototype.toBlob||Object.defineProperty(HTMLCanvasElement.prototype,"toBlob",{value:function(e,t,n){for(var i=atob(this.toDataURL(t,n).split(",")[1]),a=i.length,s=a>>2,r=new Uint8Array(a),o=new Uint32Array(r.buffer,0,s),c=0,h=0;c<s;c++)o[c]=i.charCodeAt(h++)|i.charCodeAt(h++)<<8|i.charCodeAt(h++)<<16|i.charCodeAt(h++)<<24;for(var l=3&a;l--;)r[h]=i.charCodeAt(h++);e(new Blob([r],{type:t||"image/png"}))}})},624:function(e,t,n){"use strict";n.d(t,{J:function(){return G},Z:function(){return F}});var i=n(63),a=n(134),s=n.n(a),r=n(84),o=n.n(r),c=n(88),h=n.n(c),l=n(45),u=n.n(l),d=n(100),p=n(46),m=n.n(p),g=function(){function e(){}return e.GetLangCode=function(e){return m()(e).call(e,0,2)},e}(),f=n(133),E=n.n(f),v=function(e){return function(t){t.preventDefault();var n=document.getElementById("popup-add-shortcut");null==n||n.remove(),e()}},S=function(e){var t=document.createElement("div");return t.innerHTML=E()(e).call(e),t.firstChild},A=function(){var e=(0,i.Z)(u().mark((function e(t,n){var i,a,s;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=S('<div style="height: 50vh;width: 53vh;max-width: 95vw;position:absolute;background-color: rgba(31, 120, 136, 0.48);border-radius: 2vh;margin: auto;right: 0;left: 0;top: 0;bottom: 0;display: flex;flex-direction:column;justify-content:space-evenly;">\n            <p style="color:white;font-size:40px;text-align:center">Add shortcut for this game</p>\n            <p style="color:white;font-size:20px;text-align:center">This game wants to add a shortcut.</p>\n        </div>'),a=S('<button style="border: none;background-color: #1877f2;color: #fff;width: 90%;height: 50px;border-radius: 15px;margin-left: auto;margin-right: auto;font-size: 20px;cursor: pointer;">No</button>'),s=S('<button style="border: none;background-color: #1877f2;color: #fff;width: 90%;height: 50px;border-radius: 15px;margin-left: auto;margin-right: auto;font-size: 20px;cursor: pointer;">Yes</button>'),i&&a&&s||n({code:"CREATE_POPUP_ERROR",message:"Show popup failed"}),i.id="popup-add-shortcut",i.appendChild(a),i.appendChild(s),document.body.appendChild(i),a.addEventListener("click",v(n)),s.addEventListener("click",v(t));case 10:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),T=function(){function e(){this.isFirstCall=!0}var t=e.prototype;return t.canCreateShortcutAsync=function(){var e=(0,i.Z)(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isFirstCall){e.next=3;break}return this.isFirstCall=!1,e.abrupt("return",!0);case 3:return e.abrupt("return",!1);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),t.createShortcutAsync=function(){var e=(0,i.Z)(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new(o())((function(e,t){A(e,t)})));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),e}(),y=T,I=function(e){return function(t){t.preventDefault();var n=document.getElementById("popup-subscribe-bots");null==n||n.remove(),e()}},C=function(e){var t=document.createElement("div");return t.innerHTML=E()(e).call(e),t.firstChild},O=function(){var e=(0,i.Z)(u().mark((function e(t,n){var i,a,s;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=C('<div style="height: 50vh;width: 53vh;max-width: 95vw;position:absolute;background-color: rgba(31, 120, 136, 0.48);border-radius: 2vh;margin: auto;right: 0;left: 0;top: 0;bottom: 0;display: flex;flex-direction:column;justify-content:space-evenly;">\n            <p style="color:white;font-size:40px;text-align:center">Turn on messages from this game</p>\n            <p style="color:white;font-size:20px;text-align:center">This game wants to send messages, announcements and more.</p>\n        </div>'),a=C('<button style="border: none;background-color: #1877f2;color: #fff;width: 90%;height: 50px;border-radius: 15px;margin-left: auto;margin-right: auto;font-size: 20px;cursor: pointer;">Not Now</button>'),s=C('<button style="border: none;background-color: #1877f2;color: #fff;width: 90%;height: 50px;border-radius: 15px;margin-left: auto;margin-right: auto;font-size: 20px;cursor: pointer;">Turn On</button>'),i&&a&&s||n({code:"CREATE_POPUP_ERROR",message:"Show popup failed"}),i.id="popup-subscribe-bots",i.appendChild(a),i.appendChild(s),document.body.appendChild(i),a.addEventListener("click",I(n)),s.addEventListener("click",I(t));case 10:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),b=function(){function e(){this.isFirstCall=!0}var t=e.prototype;return t.canSubscribeBotAsync=function(){var e=(0,i.Z)(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isFirstCall){e.next=3;break}return this.isFirstCall=!1,e.abrupt("return",!0);case 3:return e.abrupt("return",!1);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),t.subscribeBotAsync=function(){var e=(0,i.Z)(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new(o())((function(e,t){O(e,t)})));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),e}(),R=b,D=n(446),_=n(123),w=n(650),P=n(448),x=GameCore.Configs,k=x.Notification,M=x.AddShortcut,L=x.SubscribeBot,N=k.GameTitle,G=(k.GameImage,function(){function e(){}var t=e.prototype;return t.createAsync=function(){var e=(0,i.Z)(u().mark((function e(t){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,GameSDK.tournament.createAsync(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t.shareAsync=function(){var e=(0,i.Z)(u().mark((function e(t){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,GameSDK.tournament.shareAsync(t);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t.joinAsync=function(){var e=(0,i.Z)(u().mark((function e(t){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,GameSDK.tournament.joinAsync(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t.postScoreAsync=function(){var e=(0,i.Z)(u().mark((function e(t){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,GameSDK.tournament.postScoreAsync(t);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t.getTournamentsAsync=function(){var e=(0,i.Z)(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,GameSDK.tournament.getTournamentsAsync();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),e}()),B=function(){function e(e){var t=this;this.facebook=void 0,this.supportedAPIs=[],this.mockSubscribeBot=void 0,this.mockAddShortcut=void 0,this.isCalledSubscribeBot=!1,this.isCalledCreateShortcut=!1,this.isCanPlayerMatch=null,this.isCanSubscribeBot=null,this.isCanCreateShortcut=null,this.attemptToAddShortcut=(0,i.Z)(u().mark((function e(){var n,i,a,s,r,o;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.isCalledCreateShortcut){e.next=2;break}return e.abrupt("return",!1);case 2:if(e.prev=2,null===t.isCanCreateShortcut&&(M.UseMock?t.isCanCreateShortcut=!0:t.isCanCreateShortcut=t.isSupportedAPI("canCreateShortcutAsync")),t.isCanCreateShortcut){e.next=6;break}return e.abrupt("return",!1);case 6:return e.next=8,GameSDK.player.getDataAsync(["lastCallCreateShortcut"]);case 8:if(e.t0=e.sent,e.t0){e.next=11;break}e.t0={};case 11:if(n=e.t0,!(i=n.lastCallCreateShortcut||0)||!(0,_.Gm)(+i)){e.next=15;break}return e.abrupt("return",!1);case 15:if(!M.UseMock){e.next=21;break}return e.next=18,t.mockAddShortcut.canCreateShortcutAsync();case 18:e.t1=e.sent,e.next=24;break;case 21:return e.next=23,GameSDK.canCreateShortcutAsync();case 23:e.t1=e.sent;case 24:if(a=e.t1,s=Date.now(),GameSDK.player.setDataAsync({lastCallCreateShortcut:s}),!a){e.next=49;break}return r=d._.SHORTCUT_CREATE,o=d._.SHORTCUT_CREATE_POPUP,t.isCalledCreateShortcut=!0,window.game.analytics.event(o),e.prev=31,e.next=34,GameCore.Utils.Valid.isValueChangeAsync(window.__fbGameReady,!0);case 34:if(!M.UseMock){e.next=39;break}return e.next=37,t.mockAddShortcut.createShortcutAsync();case 37:e.next=41;break;case 39:return e.next=41,FBInstant.createShortcutAsync();case 41:return window.game.analytics.event(r,{success:!0}),e.abrupt("return",!0);case 45:return e.prev=45,e.t2=e.catch(31),window.game.analytics.event(r,{success:!1}),e.abrupt("return",!1);case 49:return e.abrupt("return",!1);case 52:return e.prev=52,e.t3=e.catch(2),e.abrupt("return",!1);case 55:case"end":return e.stop()}}),e,null,[[2,52],[31,45]])}))),this.attemptToSubscribeBot=(0,i.Z)(u().mark((function e(){var n,i,a,s,r;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.isCalledSubscribeBot){e.next=2;break}return e.abrupt("return",!1);case 2:if(e.prev=2,null===t.isCanSubscribeBot&&(L.UseMock?t.isCanSubscribeBot=!0:t.isCanSubscribeBot=t.isSupportedAPI("player.canSubscribeBotAsync")),t.isCanSubscribeBot){e.next=6;break}return e.abrupt("return",!1);case 6:if(!L.UseMock){e.next=12;break}return e.next=9,t.mockSubscribeBot.canSubscribeBotAsync();case 9:e.t0=e.sent,e.next=15;break;case 12:return e.next=14,GameSDK.player.canSubscribeBotAsync();case 14:e.t0=e.sent;case 15:if(!e.t0){e.next=49;break}return e.next=19,GameSDK.player.getDataAsync(["lastCallSubscribeBot"]);case 19:if(e.t1=e.sent,e.t1){e.next=22;break}e.t1={};case 22:if(n=e.t1,!(i=n.lastCallSubscribeBot)||!(0,_.Gm)(+i)){e.next=26;break}return e.abrupt("return",!1);case 26:return a=Date.now(),GameSDK.player.setDataAsync({lastCallSubscribeBot:a}),s=d._.BOT_SUBSCRIBE,r=d._.BOT_SUBSCRIBE_POPUP,t.isCalledSubscribeBot=!0,window.game.analytics.event(r),e.prev=31,e.next=34,GameCore.Utils.Valid.isValueChangeAsync(window.__fbGameReady,!0);case 34:if(!L.UseMock){e.next=39;break}return e.next=37,t.mockSubscribeBot.subscribeBotAsync();case 37:e.next=41;break;case 39:return e.next=41,GameSDK.player.subscribeBotAsync();case 41:return window.game.analytics.event(s,{success:!0}),e.abrupt("return",!0);case 45:return e.prev=45,e.t2=e.catch(31),window.game.analytics.event(s,{success:!1}),e.abrupt("return",!1);case 49:return e.abrupt("return",!1);case 52:return e.prev=52,e.t3=e.catch(2),e.abrupt("return",!1);case 55:case"end":return e.stop()}}),e,null,[[2,52],[31,45]])}))),this.matchPlayerAsync=function(){var e=(0,i.Z)(u().mark((function e(n,i,a){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,null===t.isCanPlayerMatch&&(t.isCanPlayerMatch=t.isSupportedAPI("checkCanPlayerMatchAsync")),t.isCanPlayerMatch){e.next=4;break}return e.abrupt("return",!1);case 4:return e.next=6,GameSDK.checkCanPlayerMatchAsync();case 6:if(e.sent){e.next=9;break}return e.abrupt("return",!1);case 9:return e.next=11,GameSDK.matchPlayerAsync(n,i,a);case 11:return e.abrupt("return",!0);case 14:return e.prev=14,e.t0=e.catch(0),e.abrupt("return",!1);case 17:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(t,n,i){return e.apply(this,arguments)}}(),this.getTournamentAsync=(0,i.Z)(u().mark((function e(){var n,i,a;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.facebook.tournament.getTournamentsAsync();case 2:if(n=e.sent,i=GameSDK.context.getID(),!(a=s()(n).call(n,(function(e){return e.getContextID()===i})))){e.next=7;break}return e.abrupt("return",o().resolve(a));case 7:return e.abrupt("return",o().reject(new w.Z(null)));case 8:case"end":return e.stop()}}),e)}))),this.requestTournamentAsync=function(){var e=(0,i.Z)(u().mark((function e(n){var i;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.facebook.getTournamentAsync();case 3:return e.next=5,t.facebook.tournament.shareAsync({score:n});case 5:e.next=12;break;case 7:return e.prev=7,e.t0=e.catch(0),i=GameSDK.player.getName(),e.next=12,t.facebook.tournament.createAsync({initialScore:n,config:{tournamentTitle:i+"'s Tournament"}});case 12:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),this.isSupportedAPI=function(e){var n;return 0===t.supportedAPIs.length&&(t.supportedAPIs=GameSDK.getSupportedAPIs()),h()(n=t.supportedAPIs).call(n,e)},this.facebook=e,this.mockSubscribeBot=new R,this.mockAddShortcut=new y}var t=e.prototype;return t.switchAsync=function(){var e=(0,i.Z)(u().mark((function e(t){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,GameCore.Utils.Valid.isValueChangeAsync(window.__fbGameReady,!0);case 2:return e.next=4,GameSDK.context.switchAsync(t);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t.chooseAsync=function(){var e=(0,i.Z)(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,GameCore.Utils.Valid.isValueChangeAsync(window.__fbGameReady,!0);case 3:return e.next=5,GameSDK.context.chooseAsync({filters:["INCLUDE_EXISTING_CHALLENGES"],minSize:2,maxSize:2});case 5:case 15:return e.abrupt("return",GameSDK.context.getID());case 8:if(e.prev=8,e.t0=e.catch(0),!(e.t0 instanceof Object&&GameCore.Utils.Object.hasOwn(e.t0,"code"))){e.next=16;break}e.t1=e.t0.code,e.next="USER_INPUT"===e.t1?14:"SAME_CONTEXT"===e.t1?15:16;break;case 14:return e.abrupt("return",!1);case 16:return e.abrupt("return",null);case 17:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}(),t.createAsync=function(){var e=(0,i.Z)(u().mark((function e(t){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,GameCore.Utils.Valid.isValueChangeAsync(window.__fbGameReady,!0);case 3:return e.next=5,GameSDK.context.createAsync(""+t);case 5:case 15:return e.abrupt("return",GameSDK.context.getID());case 8:if(e.prev=8,e.t0=e.catch(0),!(e.t0 instanceof Object&&GameCore.Utils.Object.hasOwn(e.t0,"code"))){e.next=16;break}e.t1=e.t0.code,e.next="USER_INPUT"===e.t1?14:"SAME_CONTEXT"===e.t1?15:16;break;case 14:return e.abrupt("return",!1);case 16:return e.abrupt("return",null);case 17:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),t.getPlayerToken=function(){var e=(0,i.Z)(u().mark((function e(){var t;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,GameSDK.player.getSignedPlayerInfoAsync();case 2:return t=e.sent,e.abrupt("return",t.getSignature());case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),t.getContextPlayers=function(){var e=(0,i.Z)(u().mark((function e(t){var n,i;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,GameSDK.context.getPlayersAsync();case 3:return n=e.sent,i=[],n.forEach((function(e){var n=e.getID();if(n!==t){var a=e.getName();if(a){var s=e.getPhoto();i.push(new D.Z(n,a,s).toObject())}}})),e.abrupt("return",GameCore.Utils.Array.unique(i));case 9:return e.prev=9,e.t0=e.catch(0),e.abrupt("return",[]);case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}(),t.shareAsync=function(){var e=(0,i.Z)(u().mark((function e(t){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,GameSDK.shareAsync(t);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t.sendMessage=function(){var e=(0,i.Z)(u().mark((function e(t){var n,i,a,s,r,o;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.data,i=t.image,a=t.template,s=t.cta,r=t.text,o={data:n,image:i,action:"CUSTOM",template:a,cta:s,text:r,strategy:"IMMEDIATE",notification:"PUSH"},e.next=4,GameSDK.updateAsync(o);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t.inviteAsync=function(){var e=(0,i.Z)(u().mark((function e(t){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,GameSDK.inviteAsync(t);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t.postSessionScoreAsync=function(){var e=(0,i.Z)(u().mark((function e(t){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,GameSDK.postSessionScoreAsync(t);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t.getRewardedVideoAsync=function(){var e=(0,i.Z)(u().mark((function e(t){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,GameSDK.getRewardedVideoAsync(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t.getInterstitialAdAsync=function(){var e=(0,i.Z)(u().mark((function e(t){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,GameSDK.getInterstitialAdAsync(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t.getContextID=function(){return GameSDK.context.getID()},t.setLoadingProgress=function(e){GameSDK.setLoadingProgress(e)},t.getLocale=function(){return g.GetLangCode(GameSDK.getLocale()||"en")},t.injectTournament=function(){var e=(0,i.Z)(u().mark((function e(){var t,i;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!GameCore.Configs.Tournament.UseMock){e.next=11;break}return e.next=4,n.e(302).then(n.bind(n,645));case 4:t=e.sent.default,i=new t,this.facebook.tournament=i,GameSDK.getTournamentAsync=this.getTournamentAsync,GameSDK.tournament=i,e.next=12;break;case 11:this.facebook.tournament=new G;case 12:this.facebook.getTournamentAsync=function(){return FBInstant.getTournamentAsync()},this.facebook.requestTournamentAsync=this.requestTournamentAsync;case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),t.sendNotificationAsync=function(){var e=(0,i.Z)(u().mark((function e(t){var n,i,a;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=t.message,i=t.delayTime,a=t.type,e.next=5,FBInstant.scheduleNotificationAsync({title:N,minDelayInSeconds:i,description:n,type:null!=a?a:P.Z.GENERIC_NOTIFICATION});case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),e}(),F=B},475:function(e,t,n){"use strict";var i=n(128),a=n.n(i),s=n(46),r=n.n(s),o=function(e,t){return void 0===t&&(t=1),a()({length:Math.ceil(e.length/t)},(function(n,i){return r()(e).call(e,i*t,i*t+t)}))},c=n(85),h=n.n(c),l=n(88),u=n.n(l),d=function(e,t){return h()(e).call(e,(function(e){return!u()(t).call(t,e)}))},p=function(e){for(var t=e.length-1;t>0;t--){var n=Math.floor(Math.random()*(t+1)),i=[e[n],e[t]];e[t]=i[0],e[n]=i[1]}},m=n(86),g=n.n(m),f=function(e,t,n){return g()(n).call(n,e)===t&&null!==e&&void 0!==e},E=function(e){return h()(e).call(e,f)},v={chunk:o,difference:d,shuffle:p,unique:E},S=n(67),A=n.n(S),T=n(264),y=n.n(T),I=y()((function(e,t){if("string"===typeof e){var n=t[e.toLowerCase()];if("string"===typeof n)return n}return"?"})),C=y()((function(e){for(var t=null,n=[],i=/:([A-Z0-9?]+)/gm;null!==(t=i.exec(e));)n.push(t[1]);return n})),O=y()((function(e){for(var t=null,n=[],i=/([0-9]+[A-Z?]{1}|[A-Z?]{1})/gm;null!==(t=i.exec(e));){var a=t[0];if(a.length>=2){var s,o=a.length,c=r()(a).call(a,0,o-1),h=a[o-1],l=A()(s=new Array(+c)).call(s,h);n.push.apply(n,l)}else n.push(a)}return n})),b=function(e,t){var n=e,i=GameCore.Utils.Object.invert(t),a={},s=0,r=0;return C(n).forEach((function(e){s=0,r++,a[r]||(a[r]={}),O(e).forEach((function(e){s++,a[r][s]=I(e,i)}))})),a},R=y()((function(e,t){var n=t[e];return"string"===typeof n?""+n.toUpperCase():"?"})),D=function e(t,n,i){void 0===i&&(i=!1);var a="";if(!GameCore.Utils.Valid.isObject(t))return a;var s="",o=1;for(var c in t)if(GameCore.Utils.Object.hasOwn(t,c)){var h=t[c];if(GameCore.Utils.Valid.isObject(h))a+=":"+e(h,n,!0);else if(GameCore.Utils.Valid.isString(h)){var l=R(h,n);l===s?(o++,a=r()(a).call(a,0,-2)):o=1,a+=""+o+l,s=l}}return a=a.replace(/1([A-Z])/g,"$1")},_=function(e){try{return atob(e)}catch(t){return""}},w={decodeMap:b,encodeMap:D,hashToString:_,stringToHash:function(e){try{return btoa(e)}catch(t){return""}}},P=function(e){try{return JSON.parse(e)}catch(t){return null}},x=n(66),k=n.n(x),M=function(e){try{return k()(e,null,0)}catch(t){return""}},L=function(e){return P(M(e))},N={clone:L,decode:P,encode:M},G=function(e){var t="object"===typeof e||"function"===typeof e,n=Array.isArray(e);return null!==e&&t&&!n},B=function(e){return void 0===e||null===e},F=function e(t){if(!G(t))return t;for(var n in t){B(t[n])&&delete t[n];var i=t[n];G(i)&&(t[n]=e(i))}return t},U=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},H=n(83),V=n.n(H),Y=function(e){var t={};return V()(e).forEach((function(n){if(U(e,n)){var i=e[n];"string"===typeof i&&(t[i]=n)}})),t},Z=function(e,t){if(!Array.isArray(e))return{};var n={};return e.forEach((function(e){if(U(e,t)){var i=e[t];"string"===typeof i&&(n[i]=e)}})),n},W={clear:F,hasOwn:U,invert:Y,keyBy:Z},K=function(e){return e?e[0].toUpperCase()+r()(e).call(e,1):e},z=function(e){var t=0;if(0==e.length)return t;for(var n=0;n<e.length;n++){t=(t<<5)-t+e.charCodeAt(n),t&=t}return t},X=n(102),j=n.n(X),J=function(e){var t;return j()(t=V()(e)).call(t,(function(t,n){var i=e[n];return void 0!==i&&t.push(n+"="+i),t}),[]).join("&")},q=function(e){void 0===e&&(e="0x");for(var t=e,n=0;n<6;n++)t+="0123456789ABCDEF"[Math.floor(16*Math.random())];return t},Q=n(443),$=function(e){return e.normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/[\u0111\u0110]/g,(function(e){return"\u0111"===e?"d":"D"}))},ee=n(65),te=n.n(ee),ne=n(267),ie=n.n(ne),ae=function(e,t){var n,i=e.split(" "),a=(i.length<=1?te()(n=[]).call(n,i):[i[0],i.pop()]).join(" "),s=ie()(a).call(a," ")||0,r=s>=0?s:t;return(a.length>t?a.substring(0,r):a).substring(0,t)},se=n(272),re=n.n(se),oe=function(e){void 0===e&&(e=16);var t=function(t){return Math.floor(t).toString(e)};return t(Date.now()/1e3)+re()(" ").call(" ",e).replace(/./g,(function(){return t(Math.random()*e)}))},ce={capitalize:K,hashCode:z,params:J,toCamelCase:function(e){var t=e.replace(/[-_\s.]+(.)?/g,(function(e,t){return t?t.toUpperCase():""}));return t.substr(0,1).toLowerCase()+t.substr(1)},toUpperCamelCase:function(e){var t=e.replace(/[-_\s.]+(.)?/g,(function(e,t){return t?t.toUpperCase():""}));return t.substr(0,1).toUpperCase()+t.substr(1)},randomColor:q,random:Q.Z,removeDiacritics:$,getShortName:ae,generateObjectId:oe},he=function(e){return"boolean"===typeof e},le=function(){return!1},ue=function(e){return"function"===typeof e},de=function(e){return"number"===typeof e},pe=function(e){var t;return g()(t=["string","number","symbol"]).call(t,typeof e)>-1},me=function(e){return"string"===typeof e},ge=n(84),fe=n.n(ge),Ee=function(e,t,n){var i=n||{},a=i.timeout,s=void 0===a?1e3:a,r=i.checkInterval,o=void 0===r?100:r;return new(fe())((function(n){var i=setInterval((function(){("function"===typeof e?e():e)===("function"===typeof t?t():t)&&(clearInterval(i),n(!0))}),o);s>0&&setTimeout((function(){clearInterval(i),n(!1)}),s)}))},ve={isBoolean:he,isDebugger:le,isFunction:ue,isNumber:de,isObject:G,isPropertyKey:pe,isString:me,isValueChangeAsync:Ee},Se=function(e){var t=e.scene,n=e.key,i=e.newKey,a=t.textures.get(n).getSourceImage();if(!a)return!1;var s=Math.min(a.width,a.height);i||t.textures.removeKey(n);var r=t.textures.createCanvas(i||n,s,s),o=r.context;return o.beginPath(),o.arc(s/2,s/2,s/2,0,2*Math.PI,!1),o.clip(),r.draw((a.width-s)/2,(a.height-s)/2,a),!0},Ae=function(e){var t=e.scene,n=e.key,i=e.newKey,a=e.radius,s=e.width,r=e.height,o=t.textures.get(n).getSourceImage();if(!o)return!1;s||(s=o.width),r||(r=o.height),i||t.textures.removeKey(n);var c=t.textures.createCanvas(i||n,s,r),h=c.context,l=Math.min(s,r)/100*a/2;return h.beginPath(),h.moveTo(0+l,0),h.lineTo(0+s-l,0),h.quadraticCurveTo(0+s,0,0+s,0+l),h.lineTo(0+s,0+r-l),h.quadraticCurveTo(0+s,0+r,0+s-l,0+r),h.lineTo(0+l,0+r),h.quadraticCurveTo(0,0+r,0,0+r-l),h.lineTo(0,0+l),h.quadraticCurveTo(0,0,0+l,0),h.closePath(),h.clip(),c.draw(0,0,o),!0},Te=function(){return GameCore.Utils.Device.isDesktop()||GameCore.Utils.Device.pixelRatio()>1?2:1},ye=function(e,t){var n=e.split(","),i=n[0].match(/:(.*?);/);if(!i)return null;for(var a=i[1],s=atob(n[n.length-1]),r=s.length,o=new Uint8Array(r);r--;)o[r]=s.charCodeAt(r);return new File([o],t,{type:a})},Ie=n(131),Ce=n.n(Ie),Oe=new Image,be=function(e,t){return void 0===t&&(t=!0),new(fe())((function(n){t&&(Oe=new Image),Oe.onload=function(){n(Oe)},Oe.onerror=function(){n(null)},Oe.src=Ce().createObjectURL(e)}))},Re=n(63),De=n(45),_e=n.n(De),we=function(){var e=(0,Re.Z)(_e().mark((function e(t,n){var i;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t).then((function(e){return e.blob()})).catch((function(){return null}));case 2:if(i=e.sent){e.next=5;break}return e.abrupt("return",null);case 5:return e.abrupt("return",new File([i],n));case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),Pe=function(e){if(g()(e).call(e,".")<0)return e;for(var t=e.length-1;t>=0;t--){if("."==e[t])return e.substring(0,t);if("0"!=e[t])return e.substring(0,t+1)}return e},xe=function(e,t){var n=t||{},i=n.fractionalDigits,a=void 0===i?0:i,s=n.startAbbreviate,r=void 0===s?1e3:s,o=n.abbreviateStep,c=void 0===o?3:o,h=n.maxLength,l=void 0===h?-1:h,u=n.removeLastZero,d=void 0===u||u,p=n.suffixes,m=void 0===p?["","k","m","b","t","q"]:p,g=-1===l?99999999:l;if(e>=r){var f=Math.floor(e/Math.pow(10,c)),E=Math.floor((f.toString().length-1)/c)+1,v=(e/Math.pow(Math.pow(10,c),E)).toFixed(a),S=g-m[E].length,A=v.substring(0,S);return(d?Pe(A):A)+m[E]}var T=e.toFixed(a),y=g-m[0].length,I=T.substring(0,y);return d?Pe(I):I+m[0]},ke={Array:v,Hash:w,Json:N,Object:W,String:ce,Valid:ve,Image:{drawCircle:Se,drawBorder:Ae,getImageScale:Te,base64ToFile:ye,blobToHtmlImage:be,blobUrlToFile:we},Number:{toAbbreviatedString:xe,padStart:function(e,t,n){void 0===n&&(n="0");for(var i=e.toString(),a=i.length,s=0;s<t-a;s++)i=n+i;return i},padEnd:function(e,t,n){void 0===n&&(n="0");for(var i=e.toString(),a=i.length,s=0;s<t-a;s++)i+=n;return i}},Device:{isDesktop:function(){return!/Android|iPhone|iPad|iPod/i.test(navigator.userAgent)},isMobile:function(){return/Android|iPhone|iPad|iPod/i.test(navigator.userAgent)},isAndroid:function(){return window.__fbPlatform?"ANDROID"===window.__fbPlatform:/Android/i.test(navigator.userAgent)},isIOS:function(){return window.__fbPlatform?"IOS"===window.__fbPlatform:/iPhone|iPad|iPod/i.test(navigator.userAgent)},isMobileWeb:function(){return window.__fbPlatform?"MOBILE_WEB"===window.__fbPlatform:/mobile/i.test(navigator.userAgent)},pixelRatio:function(){return Math.round(window.devicePixelRatio)||1}},Time:{isToday:function(e){var t=new Date(e),n=new Date;return t.getDate()===n.getDate()&&t.getMonth()===n.getMonth()&&t.getFullYear()===n.getFullYear()},sleepAsync:function(e){return new(fe())((function(t){return setTimeout(t,e)}))}}},Me=n(50),Le=n(122),Ne={Game:{DisableLandscape:!0}},Ge={ENV:"production",Notification:{Enable:!1},LeadersBoard:{Prefix:"leaderboards"},Debugger:{ShowConsole:!1,ShowInspector:!1,ShowMonitoring:!1},Statistics:{Enable:!1,ShowFPSInGame:!1,ShowMemoryInGame:!1}},Be={ENV:"development",AppId:"652227222441772",ApiHost:"https://fbig-singleplay-apps-dev.sunstudio.io",OtherHost:"https://leaderboards-dev.sunstudio.io",SyncProfileFromAPI:!0,PlayerDataStoreUsingApi:!1,Notification:{Enable:!0,DisableSendNotification:!1,ApiUrl:"https://notifications.sunstudio.io",GameTitle:"Sun Studio",GameImage:"https://sunstudio.io/images/logo.png",DailyNotificationMessages:{MONDAY:"Happy Monday, Wood Dice Mergers! \ud83c\udf89 Start your week strong by merging those dice \ud83c\udfb2 and climbing up the leaderboard \ud83d\udcc8. Let's make this week a record-breaker! \ud83d\udcaa",TUESDAY:"Terrific Tuesday is here! \ud83d\ude03 Don't forget to dive into Wood Dice Merge and match those dice \ud83c\udfb2. Each move counts, and today could be your lucky day! \ud83c\udf40",WEDNESDAY:"Welcome to Wednesday, Wood Dice fans! \ud83d\udc2a Midweek is the perfect time to relax and enjoy some strategic dice merging \ud83c\udfb2. Can you beat your high score today? \ud83c\udfc6",THURSDAY:"Thrilling Thursday awaits! \ud83d\ude80 Join the fun in Wood Dice Merge and see how many dice you can merge \ud83c\udfb2. The weekend is near, but there's still plenty of time to score big! \ud83c\udf1f",FRIDAY:"Fantastic Friday has arrived! \ud83c\udf8a Wind down your week with some exciting Wood Dice Merge gameplay \ud83c\udfb2. Merge, score, and celebrate the start of the weekend! \ud83c\udf89",SATURDAY:"Superb Saturday is here! \ud83d\ude0e It's the perfect day to kick back, relax, and enjoy merging dice in Wood Dice Merge \ud83c\udfb2. How high can you go today? \ud83d\ude80",SUNDAY:"Sunny Sunday greetings, Wood Dice Mergers! \u2600\ufe0f Take a moment to enjoy your favorite game \ud83c\udfb2 and prepare for the week ahead with some high-value merges. Good luck! \ud83c\udf40"}},AddShortcut:{UseMock:!1},SubscribeBot:{UseMock:!1},PlayerMock:{id:"",signature:""},OpponentMock:{id:"",signature:""},MatchMockFailRate:5,Gameplay:{StartLevel:1,StartScore:0,StartDiamonds:0,DefaultDiamondsForNewUser:300,LevelDifficultRate:{FromUnder30:1.07,FromUnder35:1.05,FromUnder45:1.05,FromUnder200:1.1},StartAdAtLevel:2,GiftTime:10800,AwardDiamonds:100,FreeItems:!1,DelayStart:2e3,DelayLevelUp:1800,DelayFinishGame:500,EnableVibrate:!0,VibrateValue:[200,350,500],StartScoreCool:5,StartScoreGood:30,StartScoreExcellent:80,Progress:{BonusScore:5e3,Milestone:3}},Tutorial:{ForceUseTutorial:!1,NumberOfTutorial:{FirstMove:3,TargetScore:1,CurrentScore:1,ColorfulGem:1,ItemPaint:1,ItemHammer:1,ItemShuffle:1}},PlayerDataStore:"YANDEX-PlayerData.WoodDiceMerge",Game:{AutoResize:!0,PortraitRatio:450/667,PortraitWidth:375,PortraitHeight:617,LandscapeRatio:760/450,LandscapeWidth:760,LandscapeHeight:500,ForcePixelRatio:0,DisableLandscape:!1,FullSizeOnLandscape:!0},Debugger:{ShowInspector:!1,ShowMonitoring:!1,ShowConsole:!1,Expanded:!0,AutoRefresh:!0,InspectorAutoUpdate:!0,Opacity:.8,ListPlayerDevIds:[]},Statistics:{Enable:!1,DisplayMode:0,FPS:!0,MS:!0,MB:!0,Opacity:.8,ShowFPSInGame:!0,ShowMemoryInGame:!1},ParticleEditor:{Enable:!1,Opacity:.8,Expanded:!0},ProfilerPlugin:{Enable:!1},CanvasRecorder:{Enable:!1,Options:{Type:"png",Quality:.85,RecordFps:60,SyncFps:!0}},Match:{MaxRescueCount:1,RescueGamePopupTimeout:15,ContinueSingleMatchEnabled:!1,SingleMatchStore:"YANDEX-SingleMatch.WoodDiceMerge",JourneyMatchStore:"YANDEX-JourneyMatch.WoodDiceMerge",LocalSingleMatchDefault:{_id:"12345678890",status:"open",playerId:"",score:0,level:1,startedAt:0,updateAt:0,finishAt:0,data:{}},Levels:[200,450,900,1400,2100,3200,4600,5500,7500,9e3,11500,13e3,15e3,17e3,19e3,21e3,23e3,25e3,1e5]},DailyRewards:{MaxDays:6,MockTime:0,CheckInterrupt:!0},DailyTasks:{Duration:86400},Tournament:{UseMock:!1,ForcePlay:!1,UseLeaderboard:!1,TournamentContextIds:[],YourMockTournamentCount:1},LeadersBoard:{Name:null,UseMock:!1,Prefix:"leaderboards",LeaderboardId:"61c937c4b572280b304b6d3f",Limit:50,MockOptions:{PlayerEntryIndex:-1}},LanguageSupport:{en:"en"},EnableEffectSceneTransition:!0,DefaultTheme:"default",ThemeSupport:{default:"default"},Ads:{Enabled:!0,CalculateSafeAreaBottom:!0,EnableRewardVideoResetInterstitial:!1,Mockup:{Enable:!0,ErrorRate:5,GiphyApiKey:"VmjHIRsfrwCAssDS4mDo9DoImxJm1lLM"},InterstitialAdOptions:{pID:"",showWhenStartGame:!1,secondsFirstTime:30,secondsBetweenAds:30},RewardAdOptions:{pID:"",secondsFirstTime:0,secondsBetweenAds:0},BannerAdOptions:[{placementId:"123",position:"bottom",bannerWidth:320,bannerHeight:50,platform:"MOBILE",secondsReload:60},{placementId:"456",position:"right",bannerWidth:160,bannerHeight:600,platform:"DESKTOP",secondsReload:60}]},Network:{MaximumRequest:6,Timeout:15e3,Retries:3},Analytics:{GoogleAnalytics:{consoleLog:!1},FacebookAnalytics:{prefix:"fba",consoleLog:!1}},MagnetItem:{key:"magnet-item",scoreForOnePercent:4,maxMagnetPerMatch:5},Board:{cols:5,rows:5},Sentry:{errorCodes:{accepted:[],ignored:["USER_INPUT","NETWORK_FAILURE"]},errorMessages:{accepted:[],ignored:["Load image failed","Script error."]}},Rollbar:{Enable:!1,UseMockup:!1,FilterError:{Codes:{accepted:[],ignored:["USER_INPUT","NETWORK_FAILURE"]},Messages:{accepted:[],ignored:["Load image failed","Request failed to be processed","Script error."]}}},Performance:{Enable:!1,trackingSceneKeys:["DASHBOARD_SCENE","GAME_SCENE"],minQuality:1,maxQuality:2,fpsThreshold:48,checkInterval:2e3,qualityAdjustStep:.1,autoUpgradeQuality:!0,onlyUpdateWhenSwitchScene:!0}};Be=(0,Le.TS)((0,Me.Z)({},Be),Ge);var Fe=Be=(0,Le.TS)((0,Me.Z)({},Be),Ne),Ue=function(e){return function(t){try{var n=window.game,i=t.module;if(n.scene.getScenes(!0)[0].scene.key!==e)return;var a=i.default;n.scene.remove(e),n.scene.add(e,a,!0),n.scene.bringToTop(n.globalScene)}catch(r){var s;null==(s=void 0)||s.invalidate()}}},He=n(560),Ve=n.n(He),Ye=n(562),Ze=n.n(Ye),We=n(564),Ke=n.n(We),ze=n(200),Xe=!1,je=function e(t,n,i){n.forEach((function(n){if(n.name){var a=null;if(a=i?i.getByName(n.name):t.children.getByName(n.name)){if("Container"===n.type){var s=a,r=n.getAll();if(e(t,r,s),!s.hotContainer)return}var o=Ve()(n),c=["_events","_sysEvents","input","localTransform","list","displayList"],l=h()(o).call(o,(function(e){if("string"!==typeof e)return!1;if(g()(c).call(c,e)>=0)return!1;if(!a)return!1;var t=Ze()(n,e);return!(t instanceof Function)&&(!(t instanceof Phaser.Scene)&&(!(t instanceof Phaser.GameObjects.Group)&&(!(t instanceof Phaser.GameObjects.GameObject)&&t===Ze()(a,e))))}));l.length<1||l.forEach((function(e){if(a){var t=Ze()(n,e);Ze()(a,e),Ke()(a,e,t)}}))}}}))},Je={Configs:Fe,Utils:ke,LiveUpdate:{Scene:Ue,SceneObjects:function(e,t){return void 0===t&&(t=Xe),function(n){try{var i=window.game,a=n.module,s=i.scene.getScenes(!0)[0];if(s.scene.key!==e)return;Xe=t;var r=a.default,o=e+"-draft";i.scene.remove(o);var c=i.scene.add(o,r);s=i.scene.getScene(e),c.events.once(Phaser.Scenes.Events.RENDER,(0,ze.D)((function(){var e=c.children.getAll();je(s,e),i.scene.remove(o)})),50),i.scene.run(o),i.scene.bringToTop(s),i.scene.bringToTop(i.globalScene)}catch(h){}}}}};window.GameCore=Je},635:function(e,t,n){"use strict";var i=n(63),a=n(15),s=n(45),r=n.n(s),o=n(100),c=n(458),h=GameCore.Utils.Object,l=GameCore.Ads,u=l.Types,d=l.Status,p=function(e){function t(t,n){var i;return(i=e.call(this,t)||this).instance=void 0,i.placementId=void 0,i.instanceLoadFailedQueue=void 0,i.isHasTooManyInstancesError=void 0,i.instance=null,i.placementId=n,i.instanceLoadFailedQueue=[],i.isHasTooManyInstancesError=!1,i}(0,a.Z)(t,e),t.setGame=function(e){self.game=e};var n=t.prototype;return n.loadAsync=function(){var e=(0,i.Z)(r().mark((function e(){var t,n;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.status===d.IDLE){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,this.status=d.LOADING,e.next=6,this.createInstanceByType(this.type);case 6:if(this.instance=e.sent,null!==this.instance){e.next=9;break}throw new GameCore.Ads.AdError("AD_INSTANCE_NOT_INITIATED","Ad instance didn't initiated.");case 9:return e.next=11,this.instance.loadAsync();case 11:this.status=d.FILLED,t=this.getSceneName(),this.type===u.PRE_ROLL&&self.game.analytics.loadPreRollAd(t),this.type===u.INTERSTITIAL&&self.game.analytics.loadInterstitialAd(t),this.type===u.REWARDED&&self.game.analytics.loadRewardedVideoAd(t),e.next=26;break;case 18:throw e.prev=18,e.t0=e.catch(2),this.status=d.IDLE,this.instance&&this.instanceLoadFailedQueue.push(this.instance),this.instance=null,n=this.getSceneName(),self.game.analytics.loadAdFail(this.type,n,e.t0),e.t0;case 26:case"end":return e.stop()}}),e,this,[[2,18]])})));return function(){return e.apply(this,arguments)}}(),n.showAsync=function(){var e=(0,i.Z)(r().mark((function e(){var t,n;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=!1,e.prev=1,this.status===d.FILLED){e.next=4;break}throw new GameCore.Ads.AdError("AD_NOT_FILLED","Ads no fill.");case 4:if(this.status=d.SHOWING,null!==this.instance){e.next=7;break}throw new GameCore.Ads.AdError("AD_INSTANCE_NOT_INITIATED","Ad instance didn't initiated.");case 7:return this.isHasTooManyInstancesError&&self.game.analytics.event(o._.MISSING_AD_SHOW,{ad_type:this.type}),e.next=10,this.instance.showAsync();case 10:t=!0,this.status=d.IDLE,this.instance=null,e.next=19;break;case 15:throw e.prev=15,e.t0=e.catch(1),e.t0 instanceof Object&&h.hasOwn(e.t0,"code")?("ADS_NOT_LOADED"===e.t0.code?this.status=d.FILLED:(this.status=d.IDLE,this.instance=null),"USER_INPUT"===e.t0.code&&(this.status=d.IDLE,this.instance=null,t=!0)):(this.status=d.IDLE,this.instance=null),e.t0;case 19:return e.prev=19,window.focus(),n=this.getSceneName(),t?(this.type===u.PRE_ROLL&&self.game.analytics.showPreRollAd(n),this.type===u.INTERSTITIAL&&self.game.analytics.showInterstitialAd(n),this.type===u.REWARDED&&self.game.analytics.showRewardedVideoAd(n)):self.game.analytics.showAdFail(this.type,n),e.finish(19);case 24:case"end":return e.stop()}}),e,this,[[1,15,19,24]])})));return function(){return e.apply(this,arguments)}}(),n.getStatus=function(){return this.status},n.createInstanceByType=function(){var e=(0,i.Z)(r().mark((function e(t){var n;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=self.game.facebook,e.prev=1,e.t0=t,e.next=e.t0===u.REWARDED?5:e.t0===u.INTERSTITIAL||e.t0===u.PRE_ROLL?8:11;break;case 5:return e.next=7,n.getRewardedVideoAsync(this.placementId);case 7:case 10:return e.abrupt("return",e.sent);case 8:return e.next=10,n.getInterstitialAdAsync(this.placementId);case 11:case 20:return e.abrupt("return",null);case 12:e.next=21;break;case 14:if(e.prev=14,e.t1=e.catch(1),!(e.t1 instanceof Object&&h.hasOwn(e.t1,"code"))){e.next=20;break}if("ADS_TOO_MANY_INSTANCES"!==e.t1.code){e.next=20;break}return this.isHasTooManyInstancesError=!0,e.abrupt("return",this.instanceLoadFailedQueue.shift()||null);case 21:case"end":return e.stop()}}),e,this,[[1,14]])})));return function(t){return e.apply(this,arguments)}}(),n.getSceneName=function(){try{var e=self.game.globalScene;return e instanceof c.Z?e.getCurrentScene().scene.getSceneName():"unknown"}catch(t){return"unknown"}},t}(GameCore.Ads.AdInstance);t.Z=p},454:function(e,t,n){"use strict";n.d(t,{U:function(){return T},v:function(){return y}});var i=n(50),a=n(63),s=n(45),r=n.n(s),o=n(66),c=n.n(o),h=n(15),l=n(202),u=function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).name="BadRequest",i.message=t||"This request is bad",i.payload=n,i}return(0,h.Z)(t,e),t}((0,l.Z)(Error)),d=function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).name="RequestTimeout",i.message=t||"This request is timeout",i.payload=n,i}return(0,h.Z)(t,e),t}((0,l.Z)(Error)),p=n(123),m=GameCore.Configs,g=m.AppId,f=m.Network,E=function(e){if(!e.ok)throw new u(null,{response:e})},v=function(){var e=window.game.auth.getToken();return{token:e,timeout:f.Timeout,headers:{Authorization:"Bearer "+e,"Content-Type":"application/json"}}},S=function(e,t,n,i){return(0,a.Z)(r().mark((function a(){var s,o,h,l,p;return r().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,s=e+"/apps/"+g+"/"+t,o=new AbortController,n.signal=o.signal,h=setTimeout((function(){o.abort()}),n.timeout),GameCore.Utils.Valid.isObject(i)&&(n.body=c()(i)),a.next=8,fetch(s,n);case 8:return l=a.sent,clearTimeout(h),E(l),a.next=13,l.json();case 13:if(a.t0=a.sent,a.t0){a.next=16;break}a.t0={};case 16:return p=a.t0,a.abrupt("return",p);case 20:if(a.prev=20,a.t1=a.catch(0),!(a.t1 instanceof u)){a.next=24;break}return a.abrupt("return",null);case 24:if(!(a.t1 instanceof Object&&GameCore.Utils.Object.hasOwn(a.t1,"name"))){a.next=27;break}if("AbortError"!==a.t1.name){a.next=27;break}throw new d(null);case 27:throw a.t1;case 28:case"end":return a.stop()}}),a,null,[[0,20]])})))},A=function(){var e=(0,a.Z)(r().mark((function e(t,n){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.abrupt("return",t());case 4:if(e.prev=4,e.t0=e.catch(0),!(e.t0 instanceof d&&n>0)){e.next=18;break}return e.prev=7,e.next=10,(0,p.qZ)(600);case 10:return e.next=12,A(t,n-1);case 12:return e.abrupt("return",e.sent);case 15:return e.prev=15,e.t1=e.catch(7),e.abrupt("return",{});case 18:if(!(e.t0 instanceof d)){e.next=20;break}return e.abrupt("return",{});case 20:return e.abrupt("return",{});case 22:case"end":return e.stop()}}),e,null,[[0,4],[7,15]])})));return function(t,n){return e.apply(this,arguments)}}(),T=function(){var e=(0,a.Z)(r().mark((function e(t,n,a,s){var o,c;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return void 0===n&&(n={}),void 0===s&&(s=f.Retries),e.prev=2,o=(0,i.Z)({},v(),n,{method:"GET"}),c=S(a,t,o),e.next=7,A(c,s);case 7:return e.abrupt("return",e.sent);case 10:return e.prev=10,e.t0=e.catch(2),e.abrupt("return",{});case 14:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(t,n,i,a){return e.apply(this,arguments)}}(),y=function(){var e=(0,a.Z)(r().mark((function e(t,n,a,s,o){var c,h;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return void 0===a&&(a={}),void 0===o&&(o=f.Retries),e.prev=2,c=(0,i.Z)({},v(),a,{method:"POST"}),h=S(s,t,c,n),e.next=7,A(h,o);case 7:return e.abrupt("return",e.sent);case 10:return e.prev=10,e.t0=e.catch(2),e.abrupt("return",{});case 14:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(t,n,i,a,s){return e.apply(this,arguments)}}()},451:function(e,t,n){"use strict";n.d(t,{DW:function(){return c},EH:function(){return s},fJ:function(){return a},kL:function(){return i},qj:function(){return r},rh:function(){return o}});var i="CONTEXT_RECEIVED",a="CONTEXT_PROCESSED",s="CONTEXT_GAME_MODE_DETECTED",r="MESSAGES_SENT_UPDATE",o="MESSAGES_SENT_REMOVE",c="SCENE_KEY_UPDATE"},650:function(e,t,n){"use strict";var i=n(15),a=function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).name="TournamentNotFound",i.message=t||"A Tournament with current context was not found",i.payload=n,i.code="TOURNAMENT_NOT_FOUND",i}return(0,i.Z)(t,e),t}((0,n(202).Z)(Error));t.Z=a},51:function(e,t,n){"use strict";var i=n(122),a=function(){function e(e,t){if(this.scene=void 0,this.config=void 0,this.isStarted=void 0,this.tween=void 0,!(t.targets.length<1)){this.buildConfig(e,t);var n=this.config.targets[0].scene;n&&(this.scene=n,this.isStarted=!1,this.tween=n.tweens.create(this.config))}}var t=e.prototype;return t.buildConfig=function(e,t){this.config=(0,i.TS)(e,t)},t.play=function(){this.tween&&(this.isStarted&&this.tween.hasStarted?this.restart():(this.tween.play(),this.isStarted=!0))},t.restart=function(){var e;null==(e=this.tween)||e.restart()},t.stop=function(){var e;null==(e=this.tween)||e.stop()},t.remove=function(){var e;null==(e=this.tween)||e.remove()},t.next=function(e){return this.tween?(this.tween.off(Phaser.Tweens.Events.TWEEN_COMPLETE,e),this.tween.once(Phaser.Tweens.Events.TWEEN_COMPLETE,e),this.tween):null},e}();t.Z=a},633:function(e,t,n){"use strict";var i=n(44),a=n(15),s=n(51),r={targets:[],repeat:-1,yoyo:!0,duration:33,ease:Phaser.Math.Easing.Sine.InOut,props:{x:5}},o=function(e){function t(t){var n,a,s;return(s=e.call(this,r,t)||this).posX=void 0,s.handleSwitchPosition=function(){var e;s.posX=-s.posX,null==(e=s.tween)||e.updateTo("x",-s.posX)},null!=(n=s.config)&&n.props?(s.posX=s.config.props.x,null==(a=s.tween)||a.on(Phaser.Tweens.Events.TWEEN_REPEAT,s.handleSwitchPosition),s):(0,i.Z)(s)}return(0,a.Z)(t,e),t}(s.Z);t.Z=o},461:function(e,t,n){"use strict";var i=n(15),a=n(51),s={targets:[],duration:600,ease:Phaser.Math.Easing.Linear,props:{angle:{from:0,to:360}}},r=function(e){function t(t){return e.call(this,s,t)||this}return(0,i.Z)(t,e),t}(a.Z);t.Z=r},468:function(e,t,n){"use strict";var i=n(15),a=n(51),s={targets:[],duration:400,ease:n(125).Z,props:{scale:"-=0.1"}},r=function(e){function t(t){return e.call(this,s,t)||this}return(0,i.Z)(t,e),t}(a.Z);t.Z=r},634:function(e,t,n){"use strict";var i=n(15),a=n(51),s={targets:[],duration:400,ease:n(125).Z,props:{scale:"+=0.1"}},r=function(e){function t(t){return e.call(this,s,t)||this}return(0,i.Z)(t,e),t}(a.Z);t.Z=r},125:function(e,t,n){"use strict";var i=n(129),a=n.n(i)()(.48,1.57,.6,.83);t.Z=a},463:function(e,t,n){"use strict";var i=n(15),a=n(51),s={targets:[],duration:600,ease:Phaser.Math.Easing.Cubic.Out,props:{alpha:{start:0,from:0,to:1}}},r=function(e){function t(t){return e.call(this,s,t)||this}return(0,i.Z)(t,e),t}(a.Z);t.Z=r},464:function(e,t,n){"use strict";var i=n(15),a=n(51),s={targets:[],duration:600,ease:Phaser.Math.Easing.Quadratic.Out,props:{alpha:{start:1,from:1,to:0}}},r=function(e){function t(t){return e.call(this,s,t)||this}return(0,i.Z)(t,e),t}(a.Z);t.Z=r},462:function(e,t,n){"use strict";var i=n(15),a=n(51),s={targets:[],duration:300,ease:n(125).Z,props:{scale:{from:1.2,to:1}}},r=function(e){function t(t){return e.call(this,s,t)||this}return(0,i.Z)(t,e),t}(a.Z);t.Z=r},627:function(e,t,n){"use strict";var i=n(124),a=n(44),s=n(15),r=n(100),o=n(468),c=n(126),h=n(467),l=n(201),u=function(e){function t(t,n,i,s,r,l){var u;return void 0===l&&(l=!1),(u=e.call(this,t)||this).useSound=!0,u.isClicked=!1,u.scaleUp=-1,u.scaleDown=-1,u.button=void 0,u.upAnimation=void 0,u.downAnimation=void 0,u.isUsePixelPerfect=!1,u.hitArea=void 0,u.hitZone=void 0,u.scaleDownPress=void 0,u.parentName=void 0,u.handelObjectDestroy=function(){u.scene&&u.scene.events.off(Phaser.Scenes.Events.SLEEP,u.handleSceneSleep)},u.handleSceneSleep=function(){u.scene&&u.scene.tweens.killTweensOf((0,a.Z)(u))},u.handlePointerDown=function(){var e;u.isClicked||null!=(e=u.upAnimation)&&null!=(e=e.tween)&&e.isPlaying()||(u.isClicked=!0,u.runDownAnimation())},u.handleOnClick=function(e){return function(){var t,n;u.isClicked&&(null!=(t=u.upAnimation)&&null!=(t=t.tween)&&t.isPlaying()||(u.isClicked=!1,u.runUpAnimation(),null==(n=u.upAnimation)||null==(n=n.tween)||n.once(Phaser.Tweens.Events.TWEEN_COMPLETE,(function(){u.logButtonEvent(),u.addDebugData(),u.processCallback(e)}))))}},u.handlePointerOut=function(){var e;u.isClicked&&(null!=(e=u.upAnimation)&&null!=(e=e.tween)&&e.isPlaying()||(u.isClicked=!1,u.runUpAnimation()))},u.runDownAnimation=function(){var e;-1===u.scaleDown&&(u.scaleUp=u.scale,u.scaleDown=u.scaleDownPress),u.useSound&&u.scene.audio.playSound(h.Z.BUTTON_CLICK),null==(e=u.downAnimation)||e.remove(),u.downAnimation=new o.Z({targets:[(0,a.Z)(u)],duration:150,props:{scale:u.scaleDown},onUpdate:function(){u.hitZone.scale=1/u.scale}}),u.downAnimation.play()},u.runUpAnimation=function(){var e;-1!==u.scaleUp&&(null==(e=u.upAnimation)||e.remove(),u.upAnimation=new o.Z({targets:[(0,a.Z)(u)],duration:150,props:{scale:u.scaleUp},onUpdate:function(){u.hitZone.scale=1/u.scale}}),u.upAnimation.play())},u.isUsePixelPerfect=l,u.setDepth(c.Z.BUTTON),u.createButton(n,i,s,r),u.updateSize(),u.listenEvents(),u.scene.add.existing((0,a.Z)(u)),u}(0,s.Z)(t,e);var n=t.prototype;return n.listenEvents=function(){this.scene.events.on(Phaser.Scenes.Events.SLEEP,this.handleSceneSleep),this.once(Phaser.GameObjects.Events.DESTROY,this.handelObjectDestroy)},n.processCallback=function(e){var t,n,i;null==(t=this.upAnimation)||t.stop(),null==(n=this.downAnimation)||n.stop(),null==(i=this.scene)||i.tweens.killTweensOf(this),-1!==this.scaleUp&&this.setScale(this.scaleUp),e()},n.setDisabled=function(e){var t,n;e?(this.setAlpha(.5),null==(t=this.hitArea)||t.disableInteractive()):(this.setAlpha(1),null==(n=this.hitArea)||n.setInteractive())},n.createButton=function(e,t,n,i){this.button=this.scene.add.image(0,0,e,t),n&&i&&this.button.setWorldSize(n,i),this.scaleDownPress=this.scale-.1;var a=this.button,s=a.displayWidth,r=a.displayHeight;this.hitZone=this.scene.make.zone({displayWidth:s,displayHeight:r}),this.add([this.button,this.hitZone])},n.updateSize=function(){var e=this.button,t=e.width,n=e.height,i=t/100*10,a=n/100*10,s=i<10?i:10,r=a<10?a:10;this.setSize(t+s,n+r),this.hitZone.setSize(t+s,n+r)},n.addDebugData=function(){var e=this.getParentName(),t=this.name;(0,l.sw)("ui-click",e+":"+t)},n.logButtonEvent=function(){var e=this.getParentName(),t=this.name;this.scene.analytics.event(r._.BUTTON_CLICK,{button_name:t,screen_name:e})},n.getParentName=function(){if(this.parentName)return this.parentName;for(var e=this.parentContainer;e;){if(e instanceof GameCore.Screen){var t=e;return this.parentName=t.getScreenName(),this.parentName}e=e.parentContainer}return this.parentName=this.scene.getSceneName(),this.parentName},(0,i.Z)(t,[{key:"onClick",set:function(e){this.isUsePixelPerfect?(this.hitArea=this.button,this.hitArea.setInteractive({useHandCursor:!0,pixelPerfect:!0})):(this.hitArea=this.hitZone,this.updateSize(),this.hitArea.setInteractive({useHandCursor:!0})),this.hitArea.on(Phaser.Input.Events.GAMEOBJECT_POINTER_DOWN,this.handlePointerDown),this.hitArea.on(Phaser.Input.Events.GAMEOBJECT_POINTER_UP,this.handleOnClick(e)),this.hitArea.on(Phaser.Input.Events.GAMEOBJECT_POINTER_OUT,this.handlePointerOut)}},{key:"isUsePixelPerFect",get:function(){return this.isUsePixelPerfect}}]),t}(Phaser.GameObjects.Container);t.Z=u},460:function(e,t,n){"use strict";var i=n(44),a=n(15),s=n(64),r=n(461),o=s.Z.DEFAULT,c=o.KEY,h=o.FRAME,l=function(e){function t(t){var n;return(n=e.call(this,t,0,0,c,h.PRELOADER)||this).anim=void 0,n.runAnimation(),n.setWorldSize(60,60),n.scene.add.existing((0,i.Z)(n)),n}(0,a.Z)(t,e);var n=t.prototype;return n.runAnimation=function(){var e;null==(e=this.anim)||e.remove(),this.anim=new r.Z({targets:[this],repeat:-1,duration:1200}),this.anim.play()},n.setVisible=function(t){return e.prototype.setVisible.call(this,t),t?this.runAnimation():this.anim.stop(),this},t}(Phaser.GameObjects.Image);t.Z=l},632:function(e,t,n){"use strict";var i=n(50),a=n(124),s=n(44),r=n(15),o=n(87),c=n.n(o),h=n(102),l=n.n(h),u=n(67),d=n.n(u),p=n(85),m=n.n(p),g=n(46),f=n.n(g),E=n(128),v=n.n(E),S=n(101),A=n.n(S),T=n(205),y=n.n(T),I=n(126),C=n(200);function O(e,t){var n="undefined"!==typeof A()&&y()(e)||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){var n;if(!e)return;if("string"===typeof e)return b(e,t);var i=f()(n=Object.prototype.toString.call(e)).call(n,8,-1);"Object"===i&&e.constructor&&(i=e.constructor.name);if("Map"===i||"Set"===i)return v()(e);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return b(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var i=0;return function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function b(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var R=function(e){function t(t,n){var a,r;(r=e.call(this,t)||this).config=void 0,r.isEnable=void 0,r.maxHeight=void 0,r.isScrolling=void 0,r.boundTop=void 0,r.boundBottom=void 0,r.maskGraphics=void 0,r.objects=void 0,r._value=0,r.velocity=0,r.isScrollingSmooth=void 0,r.lastScrollY=void 0,r.isScrollingBack=void 0,r.scrollingBackTo=void 0,r.lastScrollYCount=0,r.hitArea=void 0,r.onScrollEvents=[],r.update=function(e,t){r.isScrollingSmooth&&r.velocity&&r.scrollingSmooth(t),r.isScrollingBack&&r.scrollingBack(t)},r.checkReachBound=function(){return r.isReachTop()||r.isReachBottom()},r.onMouseScroll=(0,C.D)((function(e,t,n){if(r.isEnable){var i;if(r.isScrolling=!0,r.checkReachBound())return r.lastScrollY=c()(i=r.lastScrollY).call(i,(function(){return 0})),void(r.isScrolling=!1);r.stopScrollingBack(),r.startScrollSmooth(-n*r.scrollSmooth/15)}}),100,{isImmediate:!0,maxWait:100}),r.onTouchScroll=function(e){if(r.isEnable){r.velocity&&r.stopScrollSmooth(),r.stopScrollingBack(),r.isScrolling=!0;var t=r.scene.game.world.getZoomRatio(),n=e.position,i=e.prevPosition,a=(n.y-i.y)/t,s=r.height*r.maxScrollOver,o=1;if(r.lastScrollY[++r.lastScrollYCount%r.lastScrollY.length]=a,r.isReachTop()&&a>=0){var c=(s-(r.value-r.marginTop))/s;o=Math.min(o,c)}if(r.isReachBottom()&&a<=0){var h=(s-(-r.maxHeight-r.value))/s;o=Math.min(o,h)}var l=a*o,u=r.maxScrollOver*r.height;r.value+l>r.marginTop+u?r.value=r.marginTop+u:r.value+l<-r.maxHeight-u?r.value=-r.maxHeight-u:r.value+=l,r.callOnScrollEvents(r.value,l)}},r.onTouchDown=function(){r.isEnable&&(r.velocity&&r.stopScrollSmooth(),r.stopScrollingBack())},r.onTouchEnd=function(){var e,t;if(r.isReachTop()&&(r.startScrollingBack(r.marginTop),r.stopScrollSmooth()),r.isReachBottom()&&(r.startScrollingBack(-r.maxHeight),r.stopScrollSmooth()),r.isScrolling){var n=l()(e=r.lastScrollY).call(e,(function(e,t){return e+t}))/r.lastScrollY.length;r.startScrollSmooth(n*r.scrollSmooth),r.lastScrollY=c()(t=r.lastScrollY).call(t,(function(){return 0}))}},r.config=(0,i.Z)({marginTop:0,marginBottom:0,acceleration:1400,maxScrollOver:.15,scrollSmooth:40,scrollingBackRate:5},n);var o=n.width,h=n.height;return r.isEnable=!1,r.maxHeight=0,r.lastScrollY=d()(a=new Array(3)).call(a,0),r.setSize(o,h),r.createGroup(),r.createInput(),r.createEvents(),r.scene.add.existing((0,s.Z)(r)),r}(0,r.Z)(t,e);var n=t.prototype;return n.onScroll=function(e){this.onScrollEvents.push(e)},n.gotoTop=function(){this.value=this.config.marginTop},n.reset=function(){this.maxHeight=0,this.isScrolling=!1,this.isScrollingBack=!1,this.isScrollingSmooth=!1,this.gotoTop(),this.setEnable(!1)},n.createDebug=function(){this.drawDebugBox(16711680,.8)},n.setEnable=function(e){this.isEnable=e,e?this.setInteractive({draggable:!0,useHandCursor:!0}):this.disableInteractive()},n.addItem=function(e){this.addAt(e),this.objects.add(e);var t=e.y+e.height+this.marginBottom-this.height/2;this.maxHeight=Math.max(this.maxHeight,t,0),this.updateObjectVisible()},n.addItems=function(e){var t=this;this.addAt(e),this.objects.addMultiple(e);var n=c()(e).call(e,(function(e){return e.y+e.height+t.marginBottom-t.height/2}));this.maxHeight=Math.max(this.maxHeight,Math.max.apply(Math,n),0),this.updateObjectVisible()},n.clearItem=function(){this.objects.clear(!0,!0),this.reset()},n.getChildren=function(){var e;return m()(e=this.objects.getChildren()).call(e,(function(e){return e.active}))},n.createBound=function(e,t,n,i){this.boundTop=this.scene.make.image({key:e,frame:t}),this.boundBottom=this.scene.make.image({key:e,frame:t}),i&&(this.boundTop.setTint(i),this.boundBottom.setTint(i)),this.boundTop.setAlpha(0,0,0,0),this.boundBottom.setAlpha(0,0,0,0),this.boundTop.setDepth(I.Z.PRIORITY),this.boundBottom.setDepth(I.Z.PRIORITY);var a=this.width,s=n,r=this.getWorldPosition(),o=r.x,c=r.y;this.boundTop.setDisplaySize(a,s),this.boundBottom.setDisplaySize(a,s),this.boundTop.setY(-this.displayHeight/2+s/2+c-this.y-1),this.boundBottom.setY(this.displayHeight/2-s/2+c-this.y+1),this.boundTop.setX(o-this.x),this.boundBottom.setX(o-this.x),this.add([this.boundTop,this.boundBottom])},n.createMask=function(){var e;null==(e=this.maskGraphics)||e.destroy(),this.maskGraphics=this.scene.make.graphics({fillStyle:{color:255,alpha:1},visible:!0}),this.maskGraphics.setName("MaskGraphics");var t=this.width,n=this.height;this.maskGraphics.fillRoundedRect(0-t/2,0-n/2,t,n,0),this.setMask(this.maskGraphics.createGeometryMask()),this.scene.events.off(Phaser.Scenes.Events.UPDATE,this.updateMask,this),this.scene.events.on(Phaser.Scenes.Events.UPDATE,this.updateMask,this)},n.updateMask=function(){var e=this.getWorldPosition(),t=e.x,n=e.y;this.maskGraphics.setPosition(t,n)},n.createGroup=function(){this.objects=this.scene.make.group({})},n.updateObject=function(e){this.objects.incY(e),this.updateObjectVisible()},n.updateObjectVisible=function(){for(var e=this.objects.getChildren(),t=0;t<e.length;t++){var n=e[t];n.y+n.height<-this.height/2||n.y-n.height>this.height/2?n.setVisible(!1):n.setVisible(!0)}},n.createInput=function(){this.setInteractive({draggable:!0,useHandCursor:!0}),this.on(Phaser.Input.Events.POINTER_WHEEL,this.onMouseScroll),this.on(Phaser.Input.Events.GAMEOBJECT_DRAG,this.onTouchScroll),this.on(Phaser.Input.Events.GAMEOBJECT_POINTER_DOWN,this.onTouchDown),this.scene.input.on(Phaser.Input.Events.POINTER_UP,this.onTouchEnd,this)},n.createEvents=function(){this.scene.events.on(Phaser.Scenes.Events.UPDATE,this.update)},n.callOnScrollEvents=function(e,t){for(var n,i=O(this.onScrollEvents);!(n=i()).done;){(0,n.value)(this,e,t)}},n.scrollingBack=function(e){var t=(this.scrollingBackTo-this.value)*e*this.scrollingBackRate/1e3;this.value+=t,Math.abs(this.scrollingBackTo-this.value)<.5&&(this.value=this.scrollingBackTo,this.stopScrollingBack()),this.callOnScrollEvents(this.value,t)},n.startScrollingBack=function(e){this.isScrollingBack=!0,this.scrollingBackTo=e},n.stopScrollingBack=function(){this.isScrollingBack=!1},n.scrollingSmooth=function(e){var t=this.velocity*e/1e3;this.value+=t;var n=Math.abs(this.velocity)/this.velocity;this.velocity-=n*this.acceleration*e/1e3,Math.abs(this.velocity)<this.acceleration*e/1e3&&this.stopScrollSmooth(),this.isReachTop()&&(this.startScrollingBack(this.marginTop),this.stopScrollSmooth()),this.isReachBottom()&&(this.startScrollingBack(-this.maxHeight),this.stopScrollSmooth()),this.callOnScrollEvents(this.value,t)},n.startScrollSmooth=function(e){this.isScrollingSmooth=!0,e&&(e*this.velocity>0?this.velocity+=e:this.velocity=e)},n.stopScrollSmooth=function(){this.isScrollingSmooth=!1,this.isScrolling=!1,this.velocity=0},n.isReachTop=function(){return this.value>this.marginTop},n.isReachBottom=function(){return-this.value>this.maxHeight},(0,a.Z)(t,[{key:"marginTop",get:function(){return this.config.marginTop}},{key:"marginBottom",get:function(){return this.config.marginBottom}},{key:"acceleration",get:function(){return this.config.acceleration}},{key:"maxScrollOver",get:function(){return this.config.maxScrollOver}},{key:"scrollSmooth",get:function(){return this.config.scrollSmooth}},{key:"scrollingBackRate",get:function(){return this.config.scrollingBackRate}},{key:"value",get:function(){return this._value},set:function(e){var t=e-this._value;this._value=e,this.updateObject(t)}}]),t}(Phaser.GameObjects.Container);t.Z=R},630:function(e,t,n){"use strict";var i=n(64).Z.EFFECTS,a=i.KEY,s=i.FRAME,r={CONFETTI_HEXAGON:{KEY:"confetti-hexagon-animation",TEXTURE:a,PREFIX:s.FX_CONFETTI_HEXAGON,FRAME_RATE:8,END:5,ZERO_PAD:0},CONFETTI_STAR_X:{KEY:"confetti-star-x",TEXTURE:a,PREFIX:s.ANIMATION_STAR_X,FRAME_RATE:4,END:4,ZERO_PAD:0},CONFETTI_STAR_Y:{KEY:"confetti-star-y",TEXTURE:a,PREFIX:s.ANIMATION_STAR_Y,FRAME_RATE:4,END:4,ZERO_PAD:0},RIBBON_A:{KEY:"animation-ribbon-a",TEXTURE:a,PREFIX:s.PREFIX_ANIMATION_RIBBON_CONFETTI_A,FRAME_RATE:16,END:3,ZERO_PAD:0},RIBBON_B:{KEY:"animation-ribbon-b",TEXTURE:a,PREFIX:s.PREFIX_ANIMATION_RIBBON_CONFETTI_B,FRAME_RATE:16,END:4,ZERO_PAD:0},RIBBON_C:{KEY:"animation-ribbon-c",TEXTURE:a,PREFIX:s.PREFIX_ANIMATION_RIBBON_CONFETTI_C,FRAME_RATE:16,END:4,ZERO_PAD:0},RIBBON_D:{KEY:"animation-ribbon-d",TEXTURE:a,PREFIX:s.PREFIX_ANIMATION_RIBBON_CONFETTI_D,FRAME_RATE:16,END:4,ZERO_PAD:0}};t.Z=r},459:function(e,t){"use strict";t.Z={TUTORIAL_BG:"tutorial-bg",OUT_OF_MOVES_BG:"out-of-moves-bg",GLOBAL_SCENE_MASK:"global-scene-mask"}},126:function(e,t){"use strict";t.Z={BACKGROUND:1,FIREWORKS:5,ITEM:10,LOGO:15,BUTTON:20,TILE:25,TEXT:30,ENCOURAGING:31,EFFECT:100,MESSAGE:33,POPUP:999,PRIORITY:80,DEBUG:90,DICE:99,PIECE:99,ON_TOP:1e4}},466:function(e,t){"use strict";t.Z={min:18,max:60}},457:function(e,t){"use strict";t.Z={PRIMARY:{KEY:"font-main",TEXTURE:"./assets/fonts/main.png",DATA:"./assets/fonts/main.xml"},DARK:{KEY:"font-dark",TEXTURE:"./assets/fonts/dark.png",DATA:"./assets/fonts/dark.xml"},NUMBER_DARK:{KEY:"number-dark",TEXTURE:"./assets/fonts/number-dark.png",DATA:"./assets/fonts/number-dark.xml"},NUMBER_YELLOW:{KEY:"number-yellow",TEXTURE:"./assets/fonts/number-yellow.png",DATA:"./assets/fonts/number-yellow.xml"},FONT_FAMILY:'-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Oxygen,Ubuntu,Cantarell,"Fira Sans","Droid Sans","Helvetica Neue",sans-serif'}},447:function(e,t){"use strict";var n={AVATAR:{KEY:"avatar",FILE:"./assets/images/others/avatar.png",CONFIG:{}},ICON_EARTH:{KEY:"icon-earth",FILE:"./assets/images/others/icon-earth.png",CONFIG:{}},BACKGROUND:{KEY:"background",FILE:"./assets/images/"+GameCore.Utils.Image.getImageScale()+"x/bg.jpg",CONFIG:{}},DESKTOP_BACKGROUND:{FILE:"./assets/images/bg.jpg"}};t.Z=n},64:function(e,t,n){"use strict";var i=n(50),a=GameCore.Utils.Image.getImageScale(),s={TUTORIAL:{KEY:"tutorial-resources",TEXTURE:"./assets/textures/"+a+"x{langcode}/tutorial-resources.png",JSON:"./assets/textures/"+a+"x{langcode}/tutorial-resources.json",FRAME:{HAND:"hand",BLANK:"blank",STEP_1:"step-1",STEP_1_1:"step-1-1",STEP_2:"step-2",STEP_2_1:"step-2-1",STEP_2_2:"step-2-2",STEP_2_3:"step-2-3",BG_TOP:"bg-top",BG_MIDDLE:"bg-middle",BG_BOTTOM:"bg-bottom",M_STEP_1:"m-step-1",M_STEP_2:"m-step-2",M_STEP_3:"m-step-3",M_STEP_4:"m-step-4",M_STEP_5:"m-step-5",M_STEP_6:"m-step-6",M_STEP_7:"m-step-7"}},DEFAULT:{KEY:"default-resources",TEXTURE:"./assets/textures/"+a+"x{langcode}/default-resources.png",JSON:"./assets/textures/"+a+"x{langcode}/default-resources.json",URL:"./assets/textures/"+a+"x{langcode}/",FRAME:{BLANK:"blank",LOGO:"title-logo",PANEL_BROWN:"panel-brown",PANEL_GREEN:"panel-green",PANEL_BOTTOM:"panel-bottom",BG_BROWN_DARK:"bg-brown-dark",BG_PURPLE_DARK:"bg-purple-dark",BG_SCORE_BROWN_DARK:"bg-score-brown",BG_PROGRESS_CIRCLE:"bg-progress-circle",BG_SMALL_CIRCLE:"bg-small-circle",LOGO_DIAMONDS_LIGHT_6:"logo/diamonds-light-6",PRELOADER:"preloader/dual-ring",LEADERBOARD_TAB_ON:"leaderboards/tab-on",LEADERBOARD_TAB_OFF:"leaderboards/tab-off",LEADERBOARD_BG_DARK:"leaderboards/bg-dark",LEADERBOARD_BG_LIGHT:"leaderboards/bg-light",LEADERBOARD_BG_OWN:"leaderboards/bg-own",LEADERBOARD_BORDER_TOP:"leaderboards/border-top",LEADERBOARD_BORDER_MIDDLE:"leaderboards/border-middle",LEADERBOARD_BORDER_BOTTOM:"leaderboards/border-bottom",AVATAR_BORDER:"avatar/border",AVATAR_BACKGROUND:"avatar/background",AVATAR_RANDOM:"avatar/avatar-random",AVATAR_INVITE:"avatar/avatar-invite",POPUP_TOP:"popup/popup-top",POPUP_MIDDLE:"popup/popup-middle",POPUP_BOTTOM:"popup/popup-botom",POPUP_TOP_WIN:"popup/popup-top-win",POPUP_TOP_LOSE:"popup/popup-top-lose",POPUP_SCORE_PANEL:"popup/score-panel",POPUP_DASHBOARD:"popup/popup",POPUP_TOP_LEVEL:"popup/popup-top-level",POPUP_MIDDLE_LEVEL:"popup/popup-middle-level",POPUP_BOTTOM_LEVEL:"popup/popup-bottom-level",BOTTOM_PANEL:"popup/bottom-panel",BOTTOM_PANEL_BOT:"popup/bottom-panel-bot",BOTTOM_PANEL_TOP:"popup/bottom-panel-top",POPUP_TOP_DARK:"popup/popup-top-dark",POPUP_MIDDLE_DARK:"popup/popup-middle-dark",POPUP_BOTTOM_DARK:"popup/popup-bottom-dark",PROGRESS_BACKGROUND:"progress/bg",PROGRESS_LEFT:"progress/progress-left",PROGRESS_MIDDLE:"progress/progress-middle",PROGRESS_RIGHT:"progress/progress-right",CIRCLE_ACTIVE:"progress/circle-active",CIRCLE_INACTIVE:"progress/circle-inactive",ICON_CUP:"icons/cup",ICON_GIFT:"icons/gift",ICON_ADS:"icons/flat-ad",ICON_SETTING:"icons/setting",ICON_RESUME:"icons/flat-resume",ICON_RESTART:"icons/restart",ICON_FLAT_HOME:"icons/flat-home",ICON_FLAT_SHARE:"icons/flat-share",ICON_CROWN:"icons/crown",ICON_CUP_GOLD:"icons/cup-gold",ICON_CUP_SILVER:"icons/cup-silver",ICON_CUP_COPPER:"icons/cup-bronze",ICON_COIN:"icons/coin",ICON_CHALLENGE_BIG:"icons/challenge-big",ICON_SOUND:"icons/sound",ICON_VIBRATE:"icons/vibrate",ICON_MUSIC:"icons/music",ICON_DOT_WOODEN:"icons/dot-wooden",ICON_BATTLE:"icons/battle",ICON_SHARE_BLUE:"icons/share-blue",ICON_CUP_BEST_SCORE:"icons/cup-best-score",ICON_BACK:"icons/back",ICON_RETRY:"icons/retry",ICON_CUP_OFF:"icons/icon-cup-off",ICON_CUP_ON:"icons/icon-cup-on",ICON_MODE_DICE_OFF:"icons/icon-mode-dice-off",ICON_MODE_DICE_ON:"icons/icon-mode-dice-on",ICON_ADVENTURE_OFF:"icons/icon-adven-off",ICON_ADVENTURE_ON:"icons/icon-adven-on",ICON_PLAY:"icons/icon-play",ICON_PLAY_SOLO:"icons/icon-playsolo",ICON_PLAY_WITH:"icons/icon-playwith",ICON_CIRCLE:"icons/circle",ICON_CIRCLE_ACTIVE:"icons/circle-active",ICON_CIRCLE_ACTIVED:"icons/circle-actived",ICON_GIFT_LEVEL:"icons/gift-level",BUTTON_CLOSE:"buttons/close",BUTTON_BLUE:"buttons/blue",BUTTON_BLUE_MEDIUM:"buttons/blue-medium",BUTTON_GREEN:"buttons/green",BUTTON_GREEN_MEDIUM:"buttons/green-medium",BUTTON_GREEN_HIGH_LIGHT:"buttons/green-high-light",BUTTON_MINOR_BUTTON:"buttons/minor-button",BUTTON_CHALLENGE:"buttons/challenge",BUTTON_SHARE:"buttons/share",MINOR_BUTTON:"buttons/minor-button",BUTTON_LIGHT:"buttons/button-light",BUTTON_DARK:"buttons/button-dark",BUTTON_GREEN_SHORT:"buttons/green-short",NO_THANK_TEXT:"texts/no-thank",TEXT_YOUR_SCORE:"texts/your-score",TEXT_SECOND_CHANCE:"texts/second-chance",TEXT_LEADER_BOARD:"texts/leaderboard",TEXT_FRIEND_LIGHT:"texts/friend-light",TEXT_FRIEND_DARK:"texts/friend-dark",TEXT_WORLD_LIGHT:"texts/world-light",TEXT_WORLD_DARK:"texts/world-dark",TEXT_PLAY:"texts/play",TEXT_JOIN:"texts/join",TEXT_INVITE:"texts/invite",TEXT_WAITING_FOR_OPPONENT:"texts/waiting-for-opponent",TEXT_YOU_WIN:"texts/text-you-win",TEXT_YOU_LOSE:"texts/text-you-lose",TEXT_SHARE:"texts/text-share",TEXT_CONTINUE:"texts/continue",TEXT_RESTART:"texts/text-restart",TEXT_SETTING:"texts/settings",TEXT_FIRST_MILESTONE:"texts/first-milestone",TEXT_NEXT_MILESTONE:"texts/next-milestone",TEXT_CONGRATULATION:"texts/congratulations",TEXT_NEXT_LEVEL:"texts/text-next-level",TEXT_LEVEL_FAIL:"texts/level-failed",TEXT_RETRY:"texts/text-retry",TEXT_MISSION:"texts/mission",TEXT_REPLAY:"texts/replay",TEXT_PLAY_WITH:"texts/play-with",TEXT_PLAY_DASHBOARD:"texts/text-play",TEXT_LEADERBOARD_EMPTY:"texts/leaderboard-empty",TEXT_LEADERBOARD_OFF:"texts/text-leaderboards-off",TEXT_LEADERBOARD_ON:"texts/text-leaderboards-on",TEXT_MODE_DICE_OFF:"texts/text-mode-dice-off",TEXT_MODE_DICE_ON:"texts/text-mode-dice-on",TEXT_ADVENTURE_OFF:"texts/text-adven-off",TEXT_ADVENTURE_ON:"texts/text-adven-on",TEXT_PLAY_SOLO:"texts/text-playsolo",TEXT_PLAY_WITH_DASHBOARD:"texts/text-playwith",TEXT_CLASSIC_MODE:"texts/text-classic-mode",TEXT_ADVENTURE_LEVEL:"texts/text-adventure",TEXT_ADVENTURE:"texts/adventure",TEXT_MODE_DICE:"texts/mode-dice",HORIZONTAL_LUCKY_BAR:"lucky-bar/horizontal-lucky-bar",HORIZONTAL_ARROW:"lucky-bar/horizontal-arrow",ARC_LUCKY_BAR:"lucky-bar/arc-lucky-bar",ARC_ARROW:"lucky-bar/arc-arrow"}},EFFECTS:{KEY:"effects-resources",PATH:"./assets/textures/"+a+"x{langcode}/effects-resources.png",JSON:"./assets/textures/"+a+"x{langcode}/effects-resources.json",FRAME:{BLANK:"blank",BG_OUT_OF_MOVE:"bg-out-of-move",GLARE_CROSS:"glare-cross",DUST:"dust",GLOW_CIRCLE:"glow-circle",FX_COMET:"comet",FX_SPARK:"spark",FX_STAR_YELLOW:"star-yellow",FX_CONFETTI_SMALL_1:"confetti/small-1",FX_CONFETTI_SMALL_2:"confetti/small-2",FX_CONFETTI_SMALL_3:"confetti/small-3",FX_CONFETTI_SMALL_4:"confetti/small-4",FX_CONFETTI_HEXAGON:"confetti/hexagon-",TEXT_COOL:"text/text_cool",TEXT_EXCELLENT:"text/text_excellent",TEXT_GOOD:"text/text_good",TEXT_OUT_OF_ROOM:"text/out-of-room",TEXT_SCORE:"text/score",TEXT_GOAL:"text/goal",TEXT_REACH:"text/reach",PREFIX_ANIMATION_RIBBON_CONFETTI_A:"ribbon/falling-confetti/confetti-a/confetti-a-",PREFIX_ANIMATION_RIBBON_CONFETTI_B:"ribbon/falling-confetti/confetti-b/confetti-b-",PREFIX_ANIMATION_RIBBON_CONFETTI_C:"ribbon/falling-confetti/confetti-c/confetti-c-",PREFIX_ANIMATION_RIBBON_CONFETTI_D:"ribbon/falling-confetti/confetti-d/confetti-d-",ANIMATION_STAR_X:"star-x/star-",ANIMATION_STAR_Y:"star-y/star-"}},ANIMATION_SCENE:{KEY:"effects-resources",PATH:"./assets/textures/"+a+"x/",JSON:"./assets/textures/"+a+"x/animation-scene-resources.json",FRAME:{BLANK:"blank",COIN:"coins/coin",ANIMATION_STAR_X:"star-x/star-",ANIMATION_STAR_Y:"star-y/star-",FX_SPARK_YELLOW:"yellow-spark",PREFIX_ANIMATION_RIBBON_CONFETTI_A:"ribbon/falling-confetti/confetti-a/confetti-a-",PREFIX_ANIMATION_RIBBON_CONFETTI_B:"ribbon/falling-confetti/confetti-b/confetti-b-",PREFIX_ANIMATION_RIBBON_CONFETTI_C:"ribbon/falling-confetti/confetti-c/confetti-c-",PREFIX_ANIMATION_RIBBON_CONFETTI_D:"ribbon/falling-confetti/confetti-d/confetti-d-"}},GAMEPLAY:{KEY:"gameplay-resources",TEXTURE:"./assets/textures/"+a+"x{langcode}/gameplay-resources.png",JSON:"./assets/textures/"+a+"x{langcode}/gameplay-resources.json",FRAME:{BLANK:"blank",GLARE:"glare",DUST:"dust",VIOLET_GLOW:"violet-glow",MASK_SMALL:"mask-small",BG_BOARD:"board",BG_PIECE:"bg-piece",BG_NEXT_PANEL:"next-panel",GLASS:"glass",BG_RED_CIRCLE:"bg-red-circle",BG_HEADER:"bg-header",BG_GREEN_DARK:"bg-green-dark",BG_BLUE_DARK:"bg-blue-dark",BG_GREEN_SQUARE:"bg-green-square",AVATAR_BORDER:"avatars/border",AVATAR_BACKGROUND:"avatars/background",PROGRESS_BG_LEFT:"progress/bg-left",PROGRESS_BG_MID:"progress/bg-mid",PROGRESS_BG_RIGHT:"progress/bg-right",PROGRESS_BAR_LEFT:"progress/bar-left",PROGRESS_BAR_MID:"progress/bar-mid",PROGRESS_BAR_RIGHT:"progress/bar-right",ITEM_BG_CIRCLE:"items/bg-circle",ITEM_BG_CIRCLE_SMALL:"items/bg-circle-small",ITEM_MAGNET:"items/magnet",BUTTON_MINOR:"buttons/minor-button",ICON_CHECK:"icons/check",ICON_SETTING:"icons/setting",ICON_CUP:"icons/cup",ICON_SOUND:"icons/sound",ICON_SOUND_OFF:"icons/sound-off",ICON_CROWN:"icons/crown",ICON_BATTLE:"icons/battle",ICON_MILESTONE:"icons/milestone",ICON_STAR:"icons/star",ICON_STAR_1:"icons/star-1",CIRCLE_1:"effects/circle-1",CIRCLE_2:"effects/circle-2",CIRCLE_3:"effects/circle-3",CIRCLE_4:"effects/circle-4",STAR:"effects/star",STAR_YELLOW:"effects/star-yellow",GLOW:"effects/glow",GLOW_BORDER:"effects/glow-border",GLARE_CIRCLE:"effects/glare-circle",GLARE_CROSS:"effects/glare-cross",TAIL:"effects/tail",GLARE_YELLOW_CIRCLE:"effects/yellow-circle",GLOW_CIRCLE:"effects/glow-circle",WHITE_CIRCLE_SMALL:"effects/white-circle-small",TEXT_NEXT_DICE:"text/text-next-dice"}},GAMEPLAY_32:{KEY:"gameplay-resources-32",TEXTURE:"./assets/textures/"+a+"x/gameplay-resources-32.png",JSON:"./assets/textures/"+a+"x/gameplay-resources-32.json",FRAME:{DICE_1:"dice/dice-1",DICE_2:"dice/dice-2",DICE_3:"dice/dice-3",DICE_4:"dice/dice-4",DICE_5:"dice/dice-5",DICE_6:"dice/dice-6",DICE_7:"dice/dice-star",DICE_8:"dice/dice-special",DICE_11:"dice/dice-11",DICE_12:"dice/dice-12",DICE_13:"dice/dice-13",DICE_14:"dice/dice-14",DICE_15:"dice/dice-15",DICE_16:"dice/dice-16",DICE_21:"dice/dice-21",DICE_22:"dice/dice-22",DICE_23:"dice/dice-23",DICE_24:"dice/dice-24",DICE_25:"dice/dice-25",DICE_26:"dice/dice-26",DICE_31:"dice/dice-31",DICE_32:"dice/dice-32",DICE_33:"dice/dice-33",DICE_34:"dice/dice-34",DICE_35:"dice/dice-35",DICE_36:"dice/dice-36",BIG_DICE_1:"dice/big-dice-1",BIG_DICE_2:"dice/big-dice-2",BIG_DICE_3:"dice/big-dice-3",BIG_DICE_4:"dice/big-dice-4",BIG_DICE_5:"dice/big-dice-5",BIG_DICE_6:"dice/big-dice-6",DICE_BLUE:"dice/dice-blue",DICE_RED:"dice/dice-red",DICE_YELLOW:"dice/dice-yellow",DOT_BLUE:"dice/dot-blue",DOT_RED:"dice/dot-red",DOT_YELLOW:"dice/dot-yellow",DICE_TRANSPARENT:"dice/dice-transparent",DICE_HIGHT_LIGHT:"dice/dice-hight-light"}},DEMO_SPINE:{KEY:"demo-spine",jsonPATH:"./assets/spines/demo/demo.json",atlasPATH:"./assets/spines/demo/demo.atlas"}};GameCore.Utils.Valid.isDebugger()&&(s.EFFECTS.FRAME=(0,i.Z)({},s.ANIMATION_SCENE.FRAME,s.EFFECTS.FRAME)),t.Z=s},203:function(e,t,n){"use strict";n.d(t,{C:function(){return a},K:function(){return s}});var i=n(101),a={BOOT_SCENE:"BOOT_SCENE",LOAD_SCENE:"LOAD_SCENE",GAME_SCENE:"GAME_SCENE",GLOBAL_SCENE:"GLOBAL_SCENE",DASHBOARD_SCENE:"DASHBOARD_SCENE",GAME_OVER_SCENE:"GAME_OVER_SCENE",LEVEL_SCENE:"LEVEL_SCENE",JOURNEY_SCENE:"JOURNEY_SCENE",TEST_SCENE:"TEST_SCENE",ANIMATIONS_SCENE:"ANIMATIONS_SCENE"},s={SWITCH:n.n(i)()("SWITCH")}},456:function(e,t,n){"use strict";n.d(t,{Ks:function(){return a},o4:function(){return i}});var i={PAUSE_SCREEN:"PAUSE_SCREEN",NOTIFY_SCREEN:"NOTIFY_SCREEN",REWARD_SCREEN:"REWARD_SCREEN",RESCUE_SCREEN:"RESCUE_SCREEN",SETTINGS_SCREEN:"SETTINGS_SCREEN",BEST_SCORE_SCREEN:"BEST_SCORE_SCREEN",RESULT_MATCH_SCREEN:"RESULT_MATCH_SCREEN",DAILY_REWARD_SCREEN:"DAILY_REWARD_SCREEN",DAILY_MISSIONS_SCREEN:"DAILY_MISSIONS_SCREEN",GAME_OVER_SCREEN:"GAME_OVER_SCREEN",RESULT_SCREEN:"RESULT_SCREEN",LEADER_BOARD_SCREEN:"LEADER_BOARD_SCREEN",REACHED_SCORE_SCREEN:"REACHED_SCORE_SCREEN",TARGET_SCORE_SCREEN:"TARGET_SCORE_SCREEN",LEVEL_SCREEN:"LEVEL_SCREEN",COLLISION_COMPLETED_SCREEN:"COLLISION_COMPLETED_SCREEN",MISSION_COLLECTION_COMPLETE_SCREEN:"MISSION_COLLECTION_COMPLETE_SCREEN",MISSION_FAIL_SCREEN:"MISSION_FAIL_SCREEN",COLLECTION_ITEMS_SCREEN:"COLLECTION_ITEMS_SCREEN",CLAIM_GIFT_SCREEN:"CLAIM_GIFT_SCREEN",LUCKY_REWARD_SCREEN:"LUCKY_REWARD_SCREEN",START_OVER_SCREEN:"START_OVER_SCREEN"},a={SCREEN:200,POPUP:300,PRIORITY:999}},467:function(e,t){"use strict";t.Z={BUTTON_CLICK:"button_click",CONGRATULATION:"congratulation",DAILY_REWARD:"daily_reward",DIAMONDS_EAT:"diamonds_eat",GAME_OVER_SCENE:"game_over_scene",GIFT_CHARGE:"gift_charge",GIFT_EXPLODE:"gift_explode",GIFT_REVEAL:"gift_reveal",START_LEVEL:"start_level",POPUP_OFF:"popup_off",POPUP_SHOW:"popup_show",SCORE_COUNTER:"score_counter",START_GAME:"start_game",YOU_LOSE:"you_lose",YOU_WIN:"you_win",DICE_PICKUP:"pickup_dice",DICE_DROP:"drop_dice",DICE_MERGE:"merge_dice",DICE_SHUFFLE:"shuffle_dices",DICE_INVALID_MOVE:"invalid_move",DICE_MAGNET_BONUS:"magnet_bonus",SCORE_REACHED:"score_reached"}},628:function(e,t,n){"use strict";var i=n(44),a=n(15),s=n(64),r=n(122),o=s.Z.EFFECTS,c=o.KEY,h=o.FRAME,l=function(e){function t(t,n){var a;return(a=e.call(this,t,c,h.BLANK)||this).config=void 0,a.emitter=void 0,a.config=n||{},a.scene.add.existing((0,i.Z)(a)),a}(0,a.Z)(t,e);var n=t.prototype;return n.createEmitters=function(){var e=h.FX_CONFETTI_SMALL_1,t=h.FX_CONFETTI_SMALL_2,n=h.FX_CONFETTI_SMALL_3,i=h.FX_CONFETTI_SMALL_4,a=1/GameCore.Utils.Image.getImageScale(),s={on:!1,particleBringToTop:!0,frame:[e,t,n,i],tint:[14223402,1021804,5420529,16702052],timeScale:1,frequency:300,maxParticles:120,gravityY:-10,speedX:{min:-100,max:100},speedY:{min:80,max:250},alpha:{start:1,end:.8},rotate:{start:0,end:1080},scale:{min:.8*a,max:2*a},angle:{min:20,max:160},lifespan:{min:8e3,max:12e3}},o=(0,r.TS)(s,this.config);this.emitter=this.createEmitter(o)},n.run=function(e,t,n){this.stop(),this.emitter.setQuantity(e),this.emitter.setPosition(t,n),this.emitter.start()},n.explode=function(e,t,n){this.emitter||this.createEmitters(),this.emitter.explode(e,t,n)},n.stop=function(){var e,t,n;null==(e=this.emitter)||e.killAll(),null==(t=this.emitter)||t.stop(),null==(n=this.emitter)||n.remove(),this.createEmitters()},t}(Phaser.GameObjects.Particles.ParticleEmitterManager);t.Z=l},629:function(e,t,n){"use strict";n.d(t,{Z:function(){return ue}});var i=n(50),a=n(44),s=n(15),r=n(64),o=n(630),c=o.Z.RIBBON_A,h=c.KEY,l=c.TEXTURE,u=c.FRAME_RATE,d=c.END,p=c.PREFIX,m=c.ZERO_PAD,g=function(e){function t(t){var n={repeat:-1,frameRate:u,frames:t.generateFrameNames(l,{prefix:p,end:d,zeroPad:m,start:1}),yoyo:!0,showOnStart:!0};return e.call(this,t,h,n)||this}return(0,s.Z)(t,e),t}(Phaser.Animations.Animation),f=o.Z.RIBBON_B,E=f.KEY,v=f.TEXTURE,S=f.FRAME_RATE,A=f.END,T=f.PREFIX,y=f.ZERO_PAD,I=function(e){function t(t){var n={repeat:-1,frameRate:S,frames:t.generateFrameNames(v,{prefix:T,end:A,zeroPad:y,start:1}),yoyo:!0,showOnStart:!0};return e.call(this,t,E,n)||this}return(0,s.Z)(t,e),t}(Phaser.Animations.Animation),C=o.Z.RIBBON_C,O=C.KEY,b=C.TEXTURE,R=C.FRAME_RATE,D=C.END,_=C.PREFIX,w=C.ZERO_PAD,P=function(e){function t(t){var n={repeat:-1,frameRate:R,frames:t.generateFrameNames(b,{prefix:_,end:D,zeroPad:w,start:1}),yoyo:!0,showOnStart:!0};return e.call(this,t,O,n)||this}return(0,s.Z)(t,e),t}(Phaser.Animations.Animation),x=o.Z.RIBBON_D,k=x.KEY,M=x.TEXTURE,L=x.FRAME_RATE,N=x.END,G=x.PREFIX,B=x.ZERO_PAD,F=function(e){function t(t){var n={repeat:-1,frameRate:L,frames:t.generateFrameNames(M,{prefix:G,end:N,zeroPad:B,start:1}),yoyo:!0,showOnStart:!0};return e.call(this,t,k,n)||this}return(0,s.Z)(t,e),t}(Phaser.Animations.Animation),U=o.Z.CONFETTI_STAR_X,H=U.KEY,V=U.TEXTURE,Y=U.FRAME_RATE,Z=U.END,W=U.PREFIX,K=U.ZERO_PAD,z=function(e){function t(t){var n={repeat:-1,frameRate:Y,frames:t.generateFrameNames(V,{prefix:W,end:Z,zeroPad:K,start:1}),yoyo:!0,showOnStart:!0};return e.call(this,t,H,n)||this}return(0,s.Z)(t,e),t}(Phaser.Animations.Animation),X=o.Z.CONFETTI_STAR_Y,j=X.KEY,J=X.TEXTURE,q=X.FRAME_RATE,Q=X.END,$=X.PREFIX,ee=X.ZERO_PAD,te=function(e){function t(t){var n={repeat:-1,frameRate:q,frames:t.generateFrameNames(J,{prefix:$,end:Q,zeroPad:ee,start:1}),showOnStart:!0};return e.call(this,t,j,n)||this}return(0,s.Z)(t,e),t}(Phaser.Animations.Animation),ne=n(87),ie=n.n(ne),ae=n(67),se=n.n(ae),re=function(e){function t(t){var n,i,a;(a=e.call(this,t)||this).scene=void 0,a.ribbon=void 0,a.graphics=void 0,a.colorUse=void 0,a.lastChange=void 0,a.currentFrame=void 0,a.isYoyo=void 0,a.isGravityChanged=void 0,a.points=void 0,a.scene=t.manager.scene;var s=a.emitter.manager,r=s.x,o=s.y;return a.points=ie()(n=se()(i=new Array(10)).call(i,null)).call(n,(function(){return{x:a.x+r,y:a.y+o}})),a.isYoyo=!1,a.isGravityChanged=!1,a.lastChange=0,a.currentFrame=-1,a.createGraphics(),a.randomRibbonUsedWhenFall(),a}(0,s.Z)(t,e);var n=t.prototype;return n.randomRibbonUsedWhenFall=function(){switch(Phaser.Math.Between(0,3)){case 0:default:this.ribbon=this.scene.anims.get(o.Z.RIBBON_A.KEY);break;case 1:this.ribbon=this.scene.anims.get(o.Z.RIBBON_B.KEY);break;case 2:this.ribbon=this.scene.anims.get(o.Z.RIBBON_C.KEY);break;case 3:this.ribbon=this.scene.anims.get(o.Z.RIBBON_D.KEY)}},n.setRibbonPosition=function(e,t){var n;ie()(n=this.points).call(n,(function(n){n.x=e,n.y=t}))},n.createGraphics=function(){var e=[8443204,2928867,12013036,16376097,15285798];this.colorUse=e[Phaser.Math.Between(0,e.length-1)],this.graphics=this.scene.add.graphics({lineStyle:{width:3,color:this.colorUse}});var t=this.emitter.manager,n=t.x,i=t.y,a=t.depth;this.graphics.setDepth(a),this.graphics.setPosition(n,i)},n.update=function(t,n,i){var a=e.prototype.update.call(this,t,n,i);return this.updateFrames(t),this.updatePoints(),this.updateGraphics(),this.updateGravity(),this.updateVelocity(),this.updateColor(),a},n.updateFrames=function(e){this.lastChange+=e,this.lastChange>=this.ribbon.msPerFrame&&(this.isYoyo?this.currentFrame--:this.currentFrame++,this.currentFrame<0&&(this.isYoyo=!1,this.currentFrame=1),this.currentFrame>=this.ribbon.frames.length&&(this.isYoyo=!0,this.currentFrame-=1),this.frame=this.ribbon.frames[this.currentFrame].frame,this.lastChange-=this.ribbon.msPerFrame)},n.updatePoints=function(){this.graphics.visible&&(this.points.shift(),this.points.push({x:this.x,y:this.y}))},n.updateGraphics=function(){this.graphics.visible&&(this.graphics.clear(),this.graphics.strokePoints(this.points))},n.updateGravity=function(){this.lifeCurrent>this.life-2e3||this.isGravityChanged||(this.isGravityChanged=!0,this.graphics.destroy(),this.emitter.setVisible(!0),this.emitter.setGravityY(45))},n.updateVelocity=function(){this.graphics.visible&&(this.lifeCurrent>this.life-1800?this.velocityX+=Phaser.Math.Between(-12,12):this.velocityX>0?this.velocityX+=Phaser.Math.Between(-10,6):this.velocityX+=Phaser.Math.Between(-6,10))},n.updateColor=function(){this.graphics.visible||(this.tint=this.colorUse)},t}(Phaser.GameObjects.Particles.Particle),oe=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n.isYoyo=void 0,n.isGravityChanged=void 0,n.lastChange=void 0,n.currentFrame=void 0,n.star=void 0,n.starX=void 0,n.starY=void 0,n.isYoyo=!1,n.isGravityChanged=!1,n.lastChange=0,n.currentFrame=-1,n.scene=t.manager.scene,n.starX=n.scene.anims.get(o.Z.CONFETTI_STAR_X.KEY),n.starY=n.scene.anims.get(o.Z.CONFETTI_STAR_Y.KEY),n.star=n.starX,n}(0,s.Z)(t,e);var n=t.prototype;return n.update=function(t,n,i){var a=e.prototype.update.call(this,t,n,i);return this.updateGravity(),this.updateVelocity(),this.updateFrameRate(),this.updateFrames(t),a},n.updateGravity=function(){this.lifeCurrent>this.life-2e3||this.isGravityChanged||(this.isGravityChanged=!0,this.emitter.setGravityY(15),this.emitter.setSpeedX(0))},n.updateVelocity=function(){this.lifeCurrent>this.life-2e3||(this.velocityX>0?this.velocityX+=Phaser.Math.Between(-6,3):this.velocityX+=Phaser.Math.Between(-3,6))},n.updateFrames=function(e){if(this.lastChange+=e,this.lastChange>=this.star.msPerFrame){var t=Phaser.Math.RND.between(0,1);this.star=t>0?this.starX:this.starY,this.isYoyo?this.currentFrame--:this.currentFrame++,this.currentFrame<0&&(this.isYoyo=!1,this.currentFrame=1,this.emitter.setAlpha(1)),this.currentFrame>=this.star.frames.length&&(this.isYoyo=!0,this.currentFrame-=1,this.emitter.setAlpha(.8)),this.frame=this.star.frames[this.currentFrame].frame,this.lastChange-=this.star.msPerFrame}},n.updateFrameRate=function(){this.lifeCurrent<this.life-2e3?this.star.msPerFrame=150:this.star.msPerFrame=Phaser.Math.RND.between(300,600)},t}(Phaser.GameObjects.Particles.Particle),ce=r.Z.EFFECTS,he=ce.KEY,le=ce.FRAME,ue=function(e){function t(t){var n;return(n=e.call(this,t,he,le.BLANK)||this).emitterConfetti=void 0,n.emitterRibbons=void 0,n.ribbonConfig=void 0,n.confettiConfig=void 0,n.width=void 0,n.height=void 0,n.emitterRibbons=[],n.emitterConfetti=[],n.createConfigs(),n.createAnimations(),n.scene.add.existing((0,a.Z)(n)),n}(0,s.Z)(t,e);var n=t.prototype;return n.createConfigs=function(){var e=1/GameCore.Utils.Image.getImageScale();this.ribbonConfig={on:!1,visible:!1,timeScale:1.5,frame:le.BLANK,particleBringToTop:!0,speedY:{min:-480,max:-560},gravityY:290,lifespan:{min:4e3,max:6e3},rotate:{start:0,end:1800,random:!0},scale:{min:.6*e,max:e},particleClass:re},this.confettiConfig={on:!1,delay:200,timeScale:2,tint:[8443204,2928867,12013036,16376097,15285798],particleBringToTop:!0,frame:le.PREFIX_ANIMATION_RIBBON_CONFETTI_A+"1",speedY:{min:-460,max:-580},gravityY:280,lifespan:{min:5e3,max:8e3},rotate:{start:0,end:1080},scale:{min:.6*e,max:e},particleClass:oe}},n.createAnimations=function(){if(!this.scene.anims.get(o.Z.CONFETTI_STAR_X.KEY)){var e=new z(this.scene.anims);this.scene.anims.add(o.Z.CONFETTI_STAR_X.KEY,e)}if(!this.scene.anims.get(o.Z.CONFETTI_STAR_Y.KEY)){var t=new te(this.scene.anims);this.scene.anims.add(o.Z.CONFETTI_STAR_Y.KEY,t)}if(!this.scene.anims.get(o.Z.RIBBON_A.KEY)){var n=new g(this.scene.anims);this.scene.anims.add(o.Z.RIBBON_A.KEY,n)}if(!this.scene.anims.get(o.Z.RIBBON_B.KEY)){var i=new I(this.scene.anims);this.scene.anims.add(o.Z.RIBBON_B.KEY,i)}if(!this.scene.anims.get(o.Z.RIBBON_C.KEY)){var a=new P(this.scene.anims);this.scene.anims.add(o.Z.RIBBON_C.KEY,a)}if(!this.scene.anims.get(o.Z.RIBBON_D.KEY)){var s=new F(this.scene.anims);this.scene.anims.add(o.Z.RIBBON_D.KEY,s)}},n.run=function(e,t,n,i){this.setPosition(e,t),this.width=n,this.height=i,this.createEmitters(),this.emitterConfetti.forEach((function(e){e.emitParticle(25)})),this.emitterRibbons.forEach((function(e){e.emitParticle(20)}))},n.stop=function(){this.emitterConfetti.forEach((function(e){e.killAll()})),this.emitterRibbons.forEach((function(e){e.killAll()})),this.kill()},n.createEmitters=function(){this.emitterRibbons=[],this.emitterConfetti=[],this.createConfettiLeftEmitter(),this.createConfettiRightEmitter(),this.createRibbonLeftEmitter(),this.createRibbonRightEmitter()},n.createConfettiLeftEmitter=function(){var e=(0,i.Z)({},this.confettiConfig,{speedX:{min:5,max:90}}),t=this.createEmitter(e);this.emitterConfetti.push(t)},n.createConfettiRightEmitter=function(){var e=this.width,t=(0,i.Z)({},this.confettiConfig,{x:e,speedX:{min:-5,max:-90}}),n=this.createEmitter(t);this.emitterConfetti.push(n)},n.createRibbonLeftEmitter=function(){var e=(0,i.Z)({},this.ribbonConfig,{speedX:{min:20,max:80},emitCallback:function(e){e.setRibbonPosition(0,0)}}),t=this.createEmitter(e);this.emitterRibbons.push(t)},n.createRibbonRightEmitter=function(){var e=this.width,t=(0,i.Z)({},this.ribbonConfig,{x:e,speedX:{min:-20,max:-80},emitCallback:function(t){t.setRibbonPosition(e,0)}}),n=this.createEmitter(t);this.emitterRibbons.push(n)},t}(Phaser.GameObjects.Particles.ParticleEmitterManager)},631:function(e,t,n){"use strict";var i=n(44),a=n(15),s=n(64).Z.EFFECTS,r=s.KEY,o=s.FRAME,c=function(e){function t(t){var n;return(n=e.call(this,t,r,o.FX_STAR_YELLOW)||this).emitZone=void 0,n.emitter=void 0,n.createEmitZone(),n.scene.add.existing((0,i.Z)(n)),n}(0,a.Z)(t,e);var n=t.prototype;return n.createEmitZone=function(){this.emitZone=new Phaser.Geom.Rectangle},n.createEmitters=function(){var e=1/GameCore.Utils.Image.getImageScale();this.emitter=this.createEmitter({on:!1,frame:o.FX_STAR_YELLOW,emitZone:{source:this.emitZone,type:"random"},timeScale:1,frequency:500,alpha:{start:1,end:0,ease:Phaser.Math.Easing.Expo.Out},scale:{start:1*e,end:0,ease:Phaser.Math.Easing.Expo.Out},lifespan:{min:800,max:1500}})},n.run=function(e,t,n,i,a){this.stop(),this.reset(),this.emitZone.setSize(i,a),this.emitZone.setPosition(t-i/2,n-a/2),this.emitter.setQuantity(e),this.emitter.start()},n.stop=function(){var e,t;null==(e=this.emitter)||e.killAll(),null==(t=this.emitter)||t.stop()},n.reset=function(){this.createEmitters()},t}(Phaser.GameObjects.Particles.ParticleEmitterManager);t.Z=c},465:function(e,t,n){"use strict";n.d(t,{Z:function(){return d}});var i=n(15),a=n(85),s=n.n(a),r=n(100),o=function(e){function t(t,n,i){var a;return(a=e.call(this,t,0,0,n,i)||this).setOrigin(0,0),a}return(0,i.Z)(t,e),t}(Phaser.GameObjects.Zone),c=n(466),h=n(203),l=n(453),u={LAYOUT_UPDATE:"layout-update"},d=function(e){function t(){var t;return(t=e.call(this,{visible:!1})||this).unsubscribeList=void 0,t.gameZone=void 0,t.background=void 0,t.handleOpenScene=function(){t.logPageviewOnOpen(),t.logEventOpen()},t.handleResize=function(){if(t.background&&t.gameZone){var e=t.world.getResizeEventData(),n=e.width,i=e.height;t.gameZone.setSize(n,i),t.background.setPosition(n/2,i/2),t.background.setDisplaySize(n,i),t.events.emit(u.LAYOUT_UPDATE)}},t.removeStateChange=function(){t.unsubscribeList.forEach((function(e){return e()}))},t}(0,i.Z)(t,e);var n=t.prototype;return n.create=function(){var e=this;this.events.on("wake",this.handleOpenScene),this.events.on("resume",this.handleOpenScene),this.events.on("create",this.handleOpenScene),this.world.events.on(l.Z.RESIZE,this.handleResize),this.scaleGame(),this.createGameZone(),this.events.on(Phaser.Scenes.Events.UPDATE,(function(){e.autoUpdateFPS()}))},n.scaleGame=function(){var e=this.getCamera("main"),t=this.world.getZoomRatio(),n=this.world.getWorldSize(),i=n.width,a=n.height;e.setZoom(t),e.centerOn(i/2,a/2)},n.createGameZone=function(){var e=this.world.getWorldSize(),t=e.width,n=e.height;this.gameZone=new o(this,t,n)},n.autoUpdateFPS=function(){this.scene.key!==h.C.GLOBAL_SCENE&&(this.tweenPlaying()||this.particlePlaying()?this.game.updateFps(c.Z.max):this.game.updateFps(c.Z.min))},n.tweenPlaying=function(){for(var e=this.tweens.getAllTweens(),t=0;t<e.length;t++)if(e[t].isPlaying())return!0;return!1},n.particlePlaying=function(){var e=this.getAllParticles();if(!e)return!0;var t=!1;return e.forEach((function(e){e.emitters.list.forEach((function(e){e.alive&&e.alive.length>0&&(t=!0)}))})),t},n.getAllParticles=function(){if(this.input.enabled&&this.scene.isActive()&&!this.scene.isPaused()){var e=this.children.list;return!e||e.length<=0?[]:s()(e).call(e,(function(e){return"ParticleEmitterManager"===e.type}))}},n.getCamera=function(e){return"main"===e?this.cameras.main:this.cameras.getCamera(e)},n.createMask=function(e){void 0===e&&(e=1),this.getCamera("main").setBackgroundColor("rgba(0, 0, 0, "+e+")")},n.fontSize=function(e){return e/2.4},n.createBackground=function(e,t,n,i){this.background?(this.background.setTexture(e),t&&this.background.setFrame(t)):this.background=this.make.image({key:e,frame:t}),this.background.setName(e);var a=this.gameZone,s=a.displayWidth,r=a.displayHeight;this.background.setDisplaySize(s,r),GameCore.Utils.Valid.isNumber(n)&&this.background.setAlpha(n),GameCore.Utils.Valid.isNumber(i)&&this.background.setTint(i),Phaser.Display.Align.In.Center(this.background,this.gameZone)},n.handleStateChange=function(e){var t=this;this.unsubscribeList=[],e.forEach((function(e){var n=e.selector,i=e.callback,a=t.storage.watch(n,i);t.unsubscribeList.push(a)})),this.events.once("sleep",this.removeStateChange),this.events.once("destroy",this.removeStateChange),this.events.once("shutdown",this.removeStateChange)},n.logPageviewOnOpen=function(){this.analytics.pageview(this.scene.key)},n.logEventOpen=function(){this.analytics.event(r._.SCREEN_OPEN,{screen_name:this.getSceneName()})},n.getSceneName=function(){return GameCore.Utils.String.toUpperCamelCase(this.scene.key.toLowerCase())},t}(Phaser.Scene)},458:function(e,t,n){"use strict";n.d(t,{Z:function(){return U}});var i=n(124),a=n(15),s=n(65),r=n.n(s),o=n(463),c=n(464),h=n(64),l=n(203),u=n(456),d=n(455),p=(0,n(452).P1)([function(e){return e.scene.currentSceneKey}],(function(e){return e})),m=n(201),g=n(465),f=n(44),E=n(457),v=n(126),S=h.Z.DEFAULT,A=S.KEY,T=S.FRAME,y=function(e){function t(t){var n;return(n=e.call(this,t,0,0)||this).fps=0,n.fpsString="FPS: %1",n.fpsText=void 0,n.background=void 0,n.lastUpdate=void 0,n.update=function(e){if(!(e-n.lastUpdate<800)){n.lastUpdate=e;var t=Math.floor(n.scene.game.loop.actualFps);n.setFps(t)}},n.createFps(),n.setDepth(v.Z.DEBUG),n.scene.add.existing((0,f.Z)(n)),n.scene.events.on(Phaser.Scenes.Events.UPDATE,n.update),n}(0,a.Z)(t,e);var n=t.prototype;return n.setFps=function(e){this.fps=e;var t=Phaser.Utils.String.Format(this.fpsString,[e]);this.fpsText.setText(t)},n.createFps=function(){this.background=this.scene.make.image({key:A,frame:T.BLANK}),this.background.setName("BG"),this.background.setTint(13801480),this.background.setWorldSize(45,25),this.fpsText=this.scene.make.bitmapText({size:this.scene.fontSize(14),text:this.fpsString,font:E.Z.PRIMARY.KEY,origin:{x:.5,y:.5}}),this.fpsText.setName("FPS Meter"),Phaser.Display.Align.In.Center(this.fpsText,this.background),this.add([this.background,this.fpsText]),this.setFps(0)},t}(Phaser.GameObjects.Container),I=y,C=function(e){function t(t){var n;if((n=e.call(this,t,0,0)||this).performance=void 0,n.memory=0,n.maxMemoryLimit=void 0,n.maxPercentThreshold=void 0,n.normalColor=3459162,n.warningColor=16768343,n.alarmColor=15812200,n.memoryString="Memory: %1MB / %2MB",n.memoryText=void 0,n.lastUpdate=void 0,n.update=function(e){if(!(e-n.lastUpdate<1e3)){n.lastUpdate=e;var t=n.performance.memory.usedJSHeapSize,i=1048576*n.maxMemoryLimit,a=Math.round(t/1048576);n.setMemory(a),n.memoryText.setTint(n.normalColor),t>n.maxPercentThreshold/100*i&&n.memoryText.setTint(n.warningColor),t>i&&n.memoryText.setTint(n.alarmColor)}},n.performance=window.performance,n.createMemory(),n.setDepth(v.Z.DEBUG),n.scene.add.existing((0,f.Z)(n)),!n.isSupport())return n.memoryText.setText("Memory: not supported!"),(0,f.Z)(n);var i=n.performance.memory.jsHeapSizeLimit;return n.maxPercentThreshold=90,n.setMaxMemory(i/1048576),n.scene.events.on(Phaser.Scenes.Events.UPDATE,n.update),n}(0,a.Z)(t,e);var n=t.prototype;return n.isSupport=function(){var e;return this.performance&&!(null==(e=this.performance)||!e.memory)},n.setMaxMemory=function(e){this.maxMemoryLimit=Math.round(e)},n.setMemory=function(e){this.memory=e;var t=Phaser.Utils.String.Format(this.memoryString,[e,this.maxMemoryLimit]);this.memoryText.setText(t)},n.createMemory=function(){this.memoryText=this.scene.make.bitmapText({size:this.scene.fontSize(14),text:this.memoryString,font:E.Z.PRIMARY.KEY,depth:2e3}),this.memoryText.setName("Memory Meter"),this.add(this.memoryText),this.setMemory(0)},t}(Phaser.GameObjects.Container),O=C,b=n(462),R=n(460),D=function(e){function t(t,n,i,a){var s;return(s=e.call(this,t,n,i,a)||this).loadingIcon=void 0,s.messageText=void 0,s.openAnimation=void 0,s.closeTimerEvent=void 0,s.addLoadingIcon(),s.addMessageText(),s.setDepth(u.Ks.PRIORITY),s.background.setAlpha(.8),s}(0,a.Z)(t,e);var n=t.prototype;return n.open=function(t){var n,i=this;e.prototype.open.call(this,t),this.scene.game.globalScene.requestBackgroundMaskUpdate(u.o4.NOTIFY_SCREEN,.8);var a=this.getData(["message","duration","loading"]),s=a[0],r=void 0===s?"":s,o=a[1],c=void 0===o?0:o,h=a[2],l=void 0!==h&&h;this.setMessage(r),this.showLoading(l),null==(n=this.closeTimerEvent)||n.remove(),c>0&&(this.closeTimerEvent=this.scene.time.addEvent({delay:c,callback:function(){i.visible&&i.scene.screen.close(i.name)}})),this.runOpenAnimation()},n.close=function(){e.prototype.close.call(this),this.scene.game.globalScene.requestBackgroundMaskUpdate(u.o4.NOTIFY_SCREEN,0)},n.addLoadingIcon=function(){this.loadingIcon=new R.Z(this.scene),this.add(this.loadingIcon),Phaser.Display.Align.In.Center(this.loadingIcon,this.zone)},n.addMessageText=function(){var e=this.scene.facebook.getLocale(),t=30;"zh"==e&&(t=80),"ar"==e?(this.messageText=this.scene.make.text({style:{fontFamily:E.Z.FONT_FAMILY,fontSize:this.scene.fontSize(t)+"px"},origin:{x:.5,y:.5}}),this.messageText.setAlign("center")):(this.messageText=this.scene.make.bitmapText({size:this.scene.fontSize(t),font:E.Z.PRIMARY.KEY,origin:{x:.5,y:.5}}),this.messageText.setCenterAlign()),this.add(this.messageText)},n.setMessage=function(e){this.messageText.setText(e)},n.showLoading=function(e){this.loadingIcon.setVisible(e);var t=!1===e?20:80;Phaser.Display.Align.In.Center(this.messageText,this.zone,0,t)},n.runOpenAnimation=function(){var e,t,n=this;null==(e=this.openAnimation)||e.stop(),null==(t=this.openAnimation)||t.remove(),this.openAnimation=new b.Z({targets:[this.messageText],props:{scale:{getStart:function(e){return e.scale-.3},getEnd:function(e){return e.scale}}},onComplete:function(){n.messageText.setScale(1)}}),this.openAnimation.play()},n.logPageviewOnOpen=function(){},n.logPageviewOnClose=function(){},t}(GameCore.Screen),_=D,w=n(209),P=n.n(w),x=function(e,t,n){if(t&&n){var i=window.game.globalScene.children.getAll(),a=!0;if(i.forEach((function(e){e instanceof GameCore.Screen&&e!==n&&e.visible&&(a=!1)})),!a)return}var s=document.getElementById("background-mask");s&&(s.style.backgroundColor="rgba(0, 0, 0, "+e+")")},k=function(){function e(){this.backgroundAlphaList=void 0,this.backgroundAlphaList=[]}var t=e.prototype;return t.requestBackgroundMaskUpdate=function(e,t){var n,i=P()(n=this.backgroundAlphaList).call(n,(function(t){return t.screenName===e}));-1===i?this.backgroundAlphaList.push({alpha:t,screenName:e}):this.backgroundAlphaList[i].alpha=t,this.updateBackgroundMask()},t.updateBackgroundMask=function(){if(0!==this.backgroundAlphaList.length){var e=1;this.backgroundAlphaList.forEach((function(t){e*=1-t.alpha})),x(1-e)}else x(0)},t.getCurrentAlpha=function(){var e=document.getElementById("background-mask");if(!e)return 0;var t=window.getComputedStyle(e).getPropertyValue("background-color").split(",")[3];return parseFloat(t)},e}(),M=n(459),L=h.Z.DEFAULT,N=L.KEY,G=L.FRAME,B=M.Z.GLOBAL_SCENE_MASK,F=function(e){function t(){for(var t,n,i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];return(n=e.call.apply(e,r()(t=[this]).call(t,a))||this).mask=void 0,n.backgroundMaskManager=void 0,n.fadeInAnim=void 0,n.fadeOutAnim=void 0,n.fpsMeter=void 0,n.memoryMeter=void 0,n.switchScene=function(e){n.currentScene.switch(e)},n.emitGameEventStartScene=function(e){var t=e.scene.key;n.updateSceneState(),n.runMaskFadeOutAnimation(),n.updateActiveSceneKey(t),n.game.events.emit(Phaser.Scenes.Events.START,t),(0,m.sw)("scene","Start scene: "+t)},n.emitGameEventSleepScene=function(e){var t=e.scene.scene.key;t!==l.C.LOAD_SCENE&&(n.runMaskFadeInAnimation(),n.game.events.emit(Phaser.Scenes.Events.SLEEP,t))},n.emitGameEventWakeScene=function(e){var t=e.scene.scene.key;t!==l.C.LOAD_SCENE&&(n.updateSceneState(),n.runMaskFadeOutAnimation(),n.updateActiveSceneKey(t),n.game.events.emit(Phaser.Scenes.Events.WAKE,t))},n.emitGameEventPauseScene=function(e){var t=e.scene.scene.key;n.game.events.emit(Phaser.Scenes.Events.PAUSE,t)},n.emitGameEventResumeScene=function(e){var t=e.scene.key;n.game.events.emit(Phaser.Scenes.Events.RESUME,t)},n.emitGameEventShutdownScene=function(e){var t=e.scene.scene.key;n.game.events.emit(Phaser.Scenes.Events.SHUTDOWN,t)},n}(0,a.Z)(t,e);var n=t.prototype;return n.init=function(){this.listenScenesEvents(),this.game.globalScene=this,this.backgroundMaskManager=new k},n.setup=function(){this.scaleGame(),this.addMask(),this.addNotifyScreen(),this.addFPS(),this.addMemory()},n.addNotifyScreen=function(){var e=this.screen.add(u.o4.NOTIFY_SCREEN,_);Phaser.Display.Align.In.Center(e,this.gameZone)},n.addMask=function(){this.mask=this.make.image({key:N,frame:G.BLANK});var e=this.gameZone,t=e.width,n=e.height;this.mask.setAlpha(0),this.mask.setOrigin(0,0),this.mask.setTint(0),this.mask.setWorldSize(t,n)},n.addFPS=function(){GameCore.Configs.Statistics.ShowFPSInGame&&(this.fpsMeter=new I(this),Phaser.Display.Align.In.TopLeft(this.fpsMeter,this.gameZone,-20,-10))},n.addMemory=function(){GameCore.Configs.Statistics.ShowMemoryInGame&&(this.memoryMeter=new O(this),Phaser.Display.Align.In.TopLeft(this.memoryMeter,this.gameZone,-45,-3))},n.updateSceneState=function(){this.setGlobalSceneOnTop()},n.setGlobalSceneOnTop=function(){this.scene.bringToTop(this)},n.requestBackgroundMaskUpdate=function(e,t){this.backgroundMaskManager.requestBackgroundMaskUpdate(e,t)},n.runMaskFadeInAnimation=function(){var e,t,n=this;this.mask&&GameCore.Configs.EnableEffectSceneTransition&&(null==(e=this.fadeInAnim)||e.remove(),null==(t=this.fadeOutAnim)||t.remove(),this.fadeInAnim=new o.Z({targets:[this.mask],duration:400,ease:Phaser.Math.Easing.Cubic.In,props:{alpha:{start:0,from:0,to:.6}},onUpdate:function(){n.requestBackgroundMaskUpdate(B,n.mask.alpha)}}),this.mask.setAlpha(0),this.requestBackgroundMaskUpdate(B,0),this.fadeInAnim.play())},n.runMaskFadeOutAnimation=function(){var e,t,n=this;this.mask&&GameCore.Configs.EnableEffectSceneTransition&&(null==(e=this.fadeInAnim)||e.remove(),null==(t=this.fadeOutAnim)||t.remove(),this.fadeOutAnim=new c.Z({targets:[this.mask],duration:400,ease:Phaser.Math.Easing.Cubic.Out,props:{alpha:{start:.6,from:.6,to:0}},onUpdate:function(){n.requestBackgroundMaskUpdate(B,n.mask.alpha)}}),this.mask.setAlpha(.6),this.requestBackgroundMaskUpdate(B,.6),this.fadeOutAnim.play())},n.listenScenesEvents=function(){var e=this;this.scene.manager.getScenes(!1).forEach((function(t){t.events.on(Phaser.Scenes.Events.CREATE,e.emitGameEventStartScene),t.events.on(Phaser.Scenes.Events.SLEEP,e.emitGameEventSleepScene),t.events.on(Phaser.Scenes.Events.WAKE,e.emitGameEventWakeScene),t.events.on(Phaser.Scenes.Events.PAUSE,e.emitGameEventPauseScene),t.events.on(Phaser.Scenes.Events.RESUME,e.emitGameEventResumeScene),t.events.on(Phaser.Scenes.Events.SHUTDOWN,e.emitGameEventShutdownScene)})),this.events.on(l.K.SWITCH,this.switchScene)},n.getActiveScene=function(){return this.scene.manager.getScenes(!0)[0]},n.getCurrentScene=function(){return this.currentScene},n.updateActiveSceneKey=function(e){e!==l.C.GLOBAL_SCENE&&this.storage.dispatch((0,d.I)(e))},n.logEventOpen=function(){},n.logPageviewOnOpen=function(){},(0,i.Z)(t,[{key:"currentScene",get:function(){var e=this.storage.getState(),t=p(e);return(t?this.scene.manager.getScene(t):this.getActiveScene()).scene}}]),t}(g.Z),U=F},583:function(e,t,n){"use strict";var i=n(201),a=n(445),s=n(50),r=n(63),o=n(15),c=n(84),h=n.n(c),l=n(45),u=n.n(l),d=n(624),p=0,m=0,g=function(){function e(e){this.game=void 0,this.progressFbTimeEvent=void 0,this.game=e}var t=e.prototype;return t.loadingProgressFbBootScene=function(){var e=this,t=100;m=30;!function n(){t<=0?clearTimeout(e.progressFbTimeEvent):e.progressFbTimeEvent=setTimeout((function(){e.game.facebook.setLoadingProgress(Math.round(m)),m+=30/t,t--,n()}),50)}()},t.finishLoadingProgressFbBootScene=function(){clearTimeout(this.progressFbTimeEvent)},t.loadingProgressFbLoadScene=function(){var e=this;(!m||m<30)&&(m=60),p=m;!function t(){e.progressFbTimeEvent=setTimeout((function(){e.game.facebook.setLoadingProgress(Math.round(m)),m+=.1,t()}),50)}()},t.onProgress=function(e){var t=100-m,n=Math.round(e*t+m);n>p&&clearTimeout(this.progressFbTimeEvent),this.game.facebook.setLoadingProgress(n)},e}(),f=g,E=function(){function e(e){this.game=void 0,this.game=e}var t=e.prototype;return t.addKillRevive=function(){var e=this;[Phaser.GameObjects.Container,Phaser.GameObjects.Image,Phaser.GameObjects.Sprite,Phaser.GameObjects.Graphics,Phaser.GameObjects.Text,Phaser.GameObjects.BitmapText,Phaser.GameObjects.Particles.ParticleEmitter,Phaser.GameObjects.Particles.ParticleEmitterManager].forEach((function(t){t.prototype.kill=e.kill,t.prototype.revive=e.revive}))},t.addKillReviveGroup=function(){Phaser.GameObjects.Group.prototype.killGroup=this.killGroup,Phaser.GameObjects.Group.prototype.reviveGroup=this.reviveGroup},t.addSetWorldSize=function(){var e=this;[Phaser.GameObjects.Image,Phaser.GameObjects.Sprite].forEach((function(t){t.prototype.setWorldSize=e.setWorldSize}))},t.addSetWorldSizeForContainer=function(){var e=this;[Phaser.GameObjects.Container].forEach((function(t){t.prototype.setWorldSize=e.setWorldSizeForContainer}))},t.addGetWorldPosition=function(){var e=this;[Phaser.GameObjects.Container,Phaser.GameObjects.Image,Phaser.GameObjects.Sprite,Phaser.GameObjects.Graphics,Phaser.GameObjects.Text,Phaser.GameObjects.BitmapText].forEach((function(t){t.prototype.getWorldPosition=e.getWorldPosition}))},t.addDrawDebugBox=function(){var e=this;[Phaser.GameObjects.Container,Phaser.GameObjects.Image,Phaser.GameObjects.Sprite,Phaser.GameObjects.Graphics,Phaser.GameObjects.Text,Phaser.GameObjects.BitmapText,Phaser.GameObjects.Zone].forEach((function(t){t.prototype.drawDebugBox=e.drawDebugBox}))},t.addHighQuality=function(){var e=this;[Phaser.GameObjects.Text].forEach((function(t){t.prototype.setHighQuality=e.setHighQuality}))},t.addSetLineHeightForBitmapText=function(){Phaser.GameObjects.BitmapText.prototype.setLineHeight=function(e){this.lineHeight=e,this.updateDisplayOrigin()}},t.kill=function(){this.setActive(!1),this.setVisible(!1)},t.revive=function(){this.setActive(!0),this.setVisible(!0)},t.killGroup=function(){this.getChildren().forEach((function(e){e.setActive(!1),e.setVisible(!1)}))},t.reviveGroup=function(){this.getChildren().forEach((function(e){e.setActive(!0),e.setVisible(!0)}))},t.setWorldSize=function(e,t){this.setSize(e,t),this.setDisplaySize(e,t)},t.setWorldSizeForContainer=function(e,t,n){void 0===n&&(n=2),this.setSize(e*n,t*n),this.setDisplaySize(e,t)},t.getWorldPosition=function(){var e=this.getWorldTransformMatrix().decomposeMatrix();return{x:e.translateX,y:e.translateY}},t.drawDebugBox=function(e,t){var n=this.x,i=this.y,a=this.width,s=this.height,r=this.depth,o=this.originX,c=this.originY,h=this.scene.add.rectangle(n,i,a,s,e,t);h.setName("Debug Box"),h.setDepth(r);var l=GameCore.Utils.Valid.isNumber;return l(o)&&l(c)&&h.setOrigin(o,c),h},t.setHighQuality=function(){return this.renderer instanceof Phaser.Renderer.WebGL.WebGLRenderer?this.setResolution(2*this.scene.game.world.getZoomRatio()):this},e}(),v=E,S=n(65),A=n.n(S),T=n(88),y=n.n(T),I=[{url:"./assets/images/others/mock1.jpg",title:"Buy lottery tickets on behalf",description:"\ud83d\udca5\ud83d\udca5\ud83d\udca5 Place an order for lottery tickets from 3 regions!!! \u2705 Fast - Convenient - Safe \u2705 Diverse products \u2705 Payment...",buttonName:"Discover more"},{url:"./assets/images/others/mock2.jpg",title:"SYSTEM-WIDE SALE UP TO 50%",description:'\ud83d\udd25 \ud835\uddec\ud835\uddd8\ud835\uddd4\ud835\udde5 \ud835\uddd8\ud835\udde1\ud835\uddd7 \ud835\udde6\ud835\uddd4\ud835\udddf\ud835\uddd8 | \ud835\udde8\ud835\udde3 \ud835\udde7\ud835\udde2 \ud835\udff1\ud835\udfec% "BIG PARTY" AUTHENTIC SPORTSWEAR SHOCKINGLY REDUCED PRICES! \ud83c\udf81 From...',buttonName:"Discover more"},{url:"./assets/images/others/mock3.jpg",title:"Register now",description:"Play safe, play fun, play 9club!",buttonName:"Register"}],C=function(){function e(){}return e.loadBannerAdAsync=function(){var e=(0,r.Z)(u().mark((function e(){var t,n,i,a,s,r,o,c,l,d;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.currentIdx=(this.currentIdx+1)%I.length,this.hideBannerAdAsync(),e.next=4,new(h())((function(e){setTimeout((function(){e()}),2e3)}));case 4:if(!document.getElementById("mock-banner-ads")){e.next=16;break}return t=I[this.currentIdx],n=t.url,i=t.buttonName,a=t.title,s=t.description,(r=document.getElementById("banner-content-text1"))&&(r.innerHTML=a),(o=document.getElementById("banner-content-text2"))&&(o.innerHTML=s),(c=document.getElementById("mock-banner-ads-avatar"))&&(c.style.background="url("+n+") center center/contain no-repeat"),(l=document.getElementById("banner-content-button"))&&(l.innerHTML=i),e.abrupt("return");case 16:d=GameCore.Utils.Device.isDesktop(),50,d?this.createDesktopBannerAd(50):this.createMobileBannerAd(50);case 19:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),e.createDesktopBannerAd=function(e){var t=this,n=I[this.currentIdx],i=n.url,a=n.buttonName,s=n.title,r=n.description,o=document.createElement("div");o.id="mock-banner-ads",o.style.width="100%",o.style.height=e+"px",o.style.bottom="var(--sab)",o.style.display="flex",o.style.position="absolute",o.style.opacity=this.currentOpacity;var c=document.createElement("div");c.id="mock-banner-ads-display-area",c.style.width="100%",c.style.height="100%",c.style.background="#323436 center center/auto no-repeat",c.style.borderRadius="10px",c.style.marginLeft="4px",c.style.marginRight="4px",c.style.display="block",c.style.alignContent="center";var h=document.createElement("div");h.id="mock-banner-ads-content",h.style.boxSizing="border-box",h.style.flexDirection="row",h.style.display="flex",h.style.position="relative",h.style.alignItems="stretch",h.style.paddingLeft="4px",h.style.paddingRight="4px",h.style.justifyContent="space-between";var l=document.createElement("div");l.id="mock-banner-ads-avatar",l.style.marginLeft="10px",l.style.width=e+"px",l.style.minWidth=e+"px",l.style.height=e+"px",l.style.display="flex",l.style.flexDirection="column",l.style.position="relative",l.style.background="url("+i+") center center/contain no-repeat",l.style.borderRadius="50%";var u=document.createElement("div");u.id="mock-banner-ads-right-content",u.style.width="100%",u.style.paddingLeft="10px",u.style.display="flex",u.style.flexDirection="row",u.style.position="relative",u.style.color="#E4E6EB",u.style.wordWrap="break-word",u.style.textAlign="left",u.style.alignContent="center",u.style.alignItems="center",u.style.fontSize="12px",u.style.fontFamily="Helvetica, Arial, sans-serif, Roboto, Helvetica, Arial, sans-serif",l.style.boxSizing="border-box";var d=document.createElement("div");d.style.flexDirection="column",d.style.display="flex",d.style.justifyContent="center",d.style.flexShrink="1",d.style.flexGrow="1",d.style.flexBasis="0",d.style.boxSizing="border-box",d.style.minWidth="0",d.innerHTML="\n            <div id='banner-content-text1' style=\"font-weight:600;line-height: 1.3333;font-size: .9375rem;text-overflow: ellipsis;-webkit-line-clamp: 1;overflow: hidden;display: -webkit-box;-webkit-box-orient: vertical;\">"+s+"</div>\n            <div id='banner-content-text2' style=\"font-weight:400;line-height: 1.2308;font-size: .8125rem;text-overflow: ellipsis;-webkit-line-clamp: 2;overflow: hidden;display: -webkit-box;-webkit-box-orient: vertical;\">"+r+"</div>";var p=document.createElement("button");p.id="banner-content-button",p.type="button",p.style.width="120px",p.style.height=e-20+"px",p.style.fontWeight="600",p.style.backgroundColor="#3963fc",p.style.border="none",p.style.color="white",p.style.borderRadius="5px",p.style.textAlign="center",p.style.display="inline-block",p.style.cursor="pointer",p.style.marginRight="10px",p.style.marginLeft="10px",p.style.flexShrink="1",p.style.boxSizing="border-box",p.style.paddingRight="2px",p.style.paddingLeft="2px",p.innerHTML=a,p.onclick=function(){"0.2"===t.currentOpacity?o.style.opacity="1":o.style.opacity="0.2",t.currentOpacity=o.style.opacity};var m=document.createElement("button");m.type="button",m.style.width=e-20+"px",m.style.height=e-20+"px",m.style.fontWeight="1000",m.style.backgroundColor="#5a5c5c",m.style.border="none",m.style.color="white",m.style.borderRadius="50%",m.style.textAlign="center",m.style.display="inline-block",m.style.cursor="pointer",m.style.marginRight="10px",m.style.marginLeft="10px",m.style.flexShrink="0",m.style.boxSizing="border-box",m.style.paddingRight="2px",m.style.paddingLeft="2px",m.innerHTML="...",document.body.appendChild(o),o.appendChild(c),c.appendChild(h),h.appendChild(l),h.appendChild(u),u.appendChild(d),u.appendChild(p),u.appendChild(m)},e.createMobileBannerAd=function(e){var t=this,n=I[this.currentIdx],i=n.url,a=n.buttonName,s=n.title,r=n.description,o=document.createElement("div");o.id="mock-banner-ads",o.style.width="100%",o.style.height=e+"px",o.style.bottom="var(--sab)",o.style.display="block",o.style.position="absolute",o.style.opacity=this.currentOpacity;var c=document.createElement("div");c.id="mock-banner-ads-display-area",c.style.background="#ffffff center center/auto no-repeat",c.style.display="block",c.style.alignContent="center";var h=document.createElement("div");h.id="mock-banner-ads-content",h.style.boxSizing="border-box",h.style.flexDirection="row",h.style.display="flex",h.style.position="relative",h.style.alignItems="stretch",h.style.justifyContent="space-between";var l=document.createElement("div");l.id="mock-banner-ads-avatar",l.style.width=e+"px",l.style.minWidth=e+"px",l.style.height=e+"px",l.style.display="flex",l.style.flexDirection="column",l.style.position="relative",l.style.background="url("+i+") center center/contain no-repeat";var u=document.createElement("div");u.id="mock-banner-ads-right-content",u.style.width="100%",u.style.paddingLeft="10px",u.style.display="flex",u.style.flexDirection="row",u.style.position="relative",u.style.color="#000",u.style.wordWrap="break-word",u.style.textAlign="left",u.style.alignContent="center",u.style.alignItems="center",u.style.fontSize="12px",u.style.fontFamily="Helvetica, Arial, sans-serif, Roboto, Helvetica, Arial, sans-serif",l.style.boxSizing="border-box";var d=document.createElement("div");d.style.flexDirection="column",d.style.display="flex",d.style.justifyContent="center",d.style.flexShrink="1",d.style.flexGrow="1",d.style.flexBasis="0",d.style.boxSizing="border-box",d.style.minWidth="0",d.innerHTML="\n            <div id='banner-content-text1' style=\"font-weight:600;line-height: 1.3333;font-size: .9375rem;text-overflow: ellipsis;-webkit-line-clamp: 1;overflow: hidden;display: -webkit-box;-webkit-box-orient: vertical;\">"+s+"</div>\n            <div id='banner-content-text2' style=\"font-weight:400;line-height: 1.2308;font-size: .8125rem;text-overflow: ellipsis;-webkit-line-clamp: 1;overflow: hidden;display: -webkit-box;-webkit-box-orient: vertical;\">"+r+"</div>";var p=document.createElement("button");p.id="banner-content-button",p.type="button",p.style.height="100%",p.style.fontWeight="600",p.style.backgroundColor="#3963fc",p.style.border="none",p.style.color="white",p.style.textAlign="center",p.style.display="inline-block",p.style.cursor="pointer",p.style.marginLeft="10px",p.style.flexShrink="1",p.style.boxSizing="border-box",p.style.paddingRight="7px",p.style.paddingLeft="7px",p.innerHTML=a,p.onclick=function(){"0.2"===t.currentOpacity?o.style.opacity="1":o.style.opacity="0.2",t.currentOpacity=o.style.opacity},document.body.appendChild(o),o.appendChild(c),c.appendChild(h),h.appendChild(l),h.appendChild(u),u.appendChild(d),u.appendChild(p)},e.hideBannerAdAsync=function(){var e=(0,r.Z)(u().mark((function e(){var t;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=document.getElementById("mock-banner-ads")){e.next=3;break}return e.abrupt("return");case 3:t.remove();case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),e}();C.currentIdx=-1,C.currentOpacity="1";var O={LOADED:"loaded",DISPLAYED:"displayed"},b=function(e){return e.IDLE="idle",e.LOADING="loading",e.FILLED="filled",e.SHOWING="showing",e}(b||{}),R=b,D=function(e){return e.REWARDED="rewarded",e.PRE_ROLL="pre-roll",e.INTERSTITIAL="interstitial",e}(D||{}),_=D,w=n(202),P=function(e){function t(t,n){var i;return(i=e.call(this,n)||this).code=void 0,i.code=t,i.message=n,i}return(0,o.Z)(t,e),t}((0,w.Z)(Error)),x=function(e){this.type=void 0,this.status=void 0,this.type=e,this.status=R.IDLE};GameCore.Ads={Types:_,Status:R,Events:O,AdError:P,AdInstance:x};var k=function(e){function t(){for(var t,n,i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];return(n=e.call.apply(e,A()(t=[this]).call(t,a))||this).events=void 0,n.enabled=void 0,n.config=void 0,n.lastInterAdShownTime=void 0,n.lastInterAdLoadedTime=void 0,n.lastRewardAdShownTime=void 0,n.interstitial=void 0,n.rewardedVideo=void 0,n.preRoll=void 0,n.safeAreaBottom=void 0,n.showingBannerAd=void 0,n.reloadBannerAdIntervals=void 0,n.bannerAdConfig=void 0,n.isHaveBannerAdOptions=void 0,n}(0,o.Z)(t,e);var n=t.prototype;return n.init=function(){this.events=new Phaser.Events.EventEmitter,this.safeAreaBottom=0,this.lastInterAdShownTime=0,this.lastInterAdLoadedTime=0,this.lastRewardAdShownTime=0,this.showingBannerAd={},this.reloadBannerAdIntervals={},this.isHaveBannerAdOptions=!0},n.calculateSafeAreaBottom=function(){try{if(!this.config.calculateSafeAreaBottom)return;this.safeAreaBottom=parseInt(getComputedStyle(document.documentElement).getPropertyValue("--sab")),isNaN(this.safeAreaBottom)&&(this.safeAreaBottom=0)}catch(e){this.safeAreaBottom=0}},n.configure=function(e,t){this.enabled=t.enabled,this.config=t,0===this.config.bannerAdOptions.length&&(this.isHaveBannerAdOptions=!1),this.setAdInstance(e),this.calculateSafeAreaBottom()},n.setAdInstance=function(e){var t=this.config,n=t.rewardAdOptions,i=t.interstitialAdOptions;this.interstitial=new e(_.INTERSTITIAL,i.pID),this.rewardedVideo=new e(_.REWARDED,n.pID),this.preRoll=new e(_.PRE_ROLL,i.pID)},n.preloadInterstitialAdAsync=function(){var e=(0,r.Z)(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.preloadAdAsync(_.INTERSTITIAL);case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.showInterstitialAdAsync=function(){var e=(0,r.Z)(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.canbeShowInterstitialAdByTime()){e.next=2;break}throw new P("INTERSTITIAL_AD_CAN_NOT_SHOW","Can't show interstitial ad");case 2:return e.next=4,this.showAdAsync(_.INTERSTITIAL);case 4:this.lastInterAdShownTime=window.performance.now()/1e3;case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.preloadPreRollAdAsync=function(){var e=(0,r.Z)(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.preloadAdAsync(_.PRE_ROLL);case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.showPreRollAdAsync=function(){var e=(0,r.Z)(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.showAdAsync(_.PRE_ROLL);case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.preloadRewardedVideoAsync=function(){var e=(0,r.Z)(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.preloadAdAsync(_.REWARDED);case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.showRewardedVideoAsync=function(){var e=(0,r.Z)(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.canbeShowRewardAd()){e.next=2;break}throw new P("REWARDED_VIDEO_CAN_NOT_SHOW","Can't show rewarded video");case 2:return e.next=4,this.showAdAsync(_.REWARDED);case 4:this.lastRewardAdShownTime=window.performance.now()/1e3;case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.getRemainingRewardTime=function(){var e=window.performance.now()/1e3,t=this.config.rewardAdOptions.secondsBetweenAds,n=e-this.lastRewardAdShownTime;return n<t?t-n:0},n.preloadAdAsync=function(){var e=(0,r.Z)(u().mark((function e(t){var n;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.enabled){e.next=2;break}throw new P("ADS_NOT_ENABLED","Ads is't enabled");case 2:if(null!==(n=this.getAdInstanceByType(t))){e.next=5;break}throw new P("AD_INSTANCE_NOT_INITIATED","The instance ads not yet initiated");case 5:return t!==_.INTERSTITIAL&&t!==_.PRE_ROLL||(this.lastInterAdLoadedTime=window.performance.now()/1e3),e.next=8,n.loadAsync();case 8:this.events.emit(O.LOADED,t);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.showAdAsync=function(){var e=(0,r.Z)(u().mark((function e(t){var n;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.enabled){e.next=2;break}throw new P("ADS_NOT_ENABLED","Ads is't enabled");case 2:if(null!==(n=this.getAdInstanceByType(t))){e.next=5;break}throw new P("AD_INSTANCE_NOT_INITIATED","The instance ads not yet initiated");case 5:return t!==_.INTERSTITIAL&&t!==_.PRE_ROLL||(this.lastInterAdShownTime=window.performance.now()/1e3),t===_.REWARDED&&(this.lastRewardAdShownTime=window.performance.now()/1e3,this.config.enableRewardVideoResetInterstitial&&(this.lastInterAdShownTime=this.lastRewardAdShownTime)),e.next=9,n.showAsync();case 9:this.events.emit(O.DISPLAYED,t);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.getAdStatus=function(e){var t=this.getAdInstanceByType(e);return t?t.getStatus():null},n.getAdInstanceByType=function(e){switch(e){case _.INTERSTITIAL:return this.interstitial;case _.REWARDED:return this.rewardedVideo;case _.PRE_ROLL:return this.preRoll;default:return null}},n.canbeShowInterstitialAd=function(){var e=this.canbeLoadInterstitialAdByTime();return e&&(e=this.canbeShowInterstitialAdByTime()),e},n.canbeLoadInterstitialAdByTime=function(){var e=window.performance.now()/1e3,t=this.config.interstitialAdOptions,n=t.secondsFirstTime,i=t.secondsBetweenAds,a=Math.floor(e-this.lastInterAdLoadedTime);return this.lastInterAdLoadedTime>0?a>=i:a>=n},n.canbeShowInterstitialAdByTime=function(){var e=window.performance.now()/1e3,t=this.config.interstitialAdOptions,n=t.secondsFirstTime,i=t.secondsBetweenAds,a=Math.floor(e-this.lastInterAdShownTime);return this.lastInterAdShownTime>0?a>=i:a>=n},n.canbeShowRewardAd=function(){var e=window.performance.now()/1e3,t=this.config.rewardAdOptions,n=t.secondsFirstTime,i=t.secondsBetweenAds,a=Math.floor(e-this.lastRewardAdShownTime);return this.lastRewardAdShownTime>0?a>=i:a>=n},n.canShowBannerAd=function(){if(!this.isHaveBannerAdOptions)return!1;for(var e=this.config.bannerAdOptions,t=GameCore.Utils.Device.isDesktop(),n=0;n<e.length;n++){var i=e[n],a=i.platform;if("ALL"==a||"DESKTOP"==a&&t||"MOBILE"==a&&!t)return this.bannerAdConfig=i,!0}return!1},n.disableBannerAds=function(){this.config.bannerAdOptions=[]},n.showBannerAdAsync=function(){var e=(0,r.Z)(u().mark((function e(){var t,n,i,a=this;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.enabled){e.next=2;break}return e.abrupt("return");case 2:if(this.canShowBannerAd()){e.next=4;break}return e.abrupt("return");case 4:if(this.reloadBannerAdIntervals=this.reloadBannerAdIntervals||{},t=this.bannerAdConfig,n=t.placementId,i=t.secondsReload,n&&""!=n){e.next=8;break}return e.abrupt("return");case 8:if(!(i>0)){e.next=14;break}if(!this.reloadBannerAdIntervals[n]){e.next=11;break}return e.abrupt("return");case 11:return this.loadBannerAdAsync(n,this.bannerAdConfig),this.reloadBannerAdIntervals[n]=setInterval((function(){a.loadBannerAdAsync(n,a.bannerAdConfig)}),1e3*i),e.abrupt("return");case 14:return this.loadBannerAdAsync(n,this.bannerAdConfig),e.abrupt("return");case 16:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.loadBannerAdAsync=function(){var e=(0,r.Z)(u().mark((function e(t,n){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.enabled){e.next=2;break}return e.abrupt("return");case 2:if(e.prev=2,!GameCore.Configs.Ads.Mockup.Enable){e.next=9;break}return e.next=7,C.loadBannerAdAsync();case 7:e.next=11;break;case 9:return e.next=11,GameSDK.loadBannerAdAsync(t,n);case 11:this.showingBannerAd[t]=!0,e.next=17;break;case 14:e.prev=14,e.t0=e.catch(2);case 17:case"end":return e.stop()}}),e,this,[[2,14]])})));return function(t,n){return e.apply(this,arguments)}}(),n.hideBannerAdAsync=function(){var e=(0,r.Z)(u().mark((function e(){var t=this;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.enabled){e.next=2;break}return e.abrupt("return");case 2:if(this.isHaveBannerAdOptions){e.next=4;break}return e.abrupt("return");case 4:if(e.prev=4,!GameCore.Configs.Ads.Mockup.Enable){e.next=11;break}return e.next=9,C.hideBannerAdAsync();case 9:e.next=15;break;case 11:return this.config.bannerAdOptions.forEach((function(e){var n=e.placementId,i=t.reloadBannerAdIntervals[n];i&&(clearInterval(i),t.reloadBannerAdIntervals[n]=null),t.showingBannerAd[n]=!1})),e.next=15,GameSDK.hideBannerAdAsync();case 15:e.next=20;break;case 17:e.prev=17,e.t0=e.catch(4);case 20:case"end":return e.stop()}}),e,this,[[4,17]])})));return function(){return e.apply(this,arguments)}}(),n.getBannerHeight=function(){var e;if(!this.enabled)return 0;if(!this.canShowBannerAd())return 0;if(!y()(e=this.bannerAdConfig.position).call(e,"bottom"))return 0;var t=(this.bannerAdConfig||{}).bannerHeight,n=(void 0===t?0:t)+this.safeAreaBottom+20;if(this.game.world){var i=this.game.world,a=i.getPixelRatio(),s=i.getZoomRatio();return this.game.world.getPhysicPixels(n,a/s)}return n},t}(Phaser.Plugins.BasePlugin),M=k,L=function(){function e(e,t,n){this.name=void 0,this.color=void 0,this.selfLog=void 0,this.options=void 0,this.name=e,this.color=n||"#FFF",this.options=t,this.selfLog=!0}var t=e.prototype;return t.event=function(e,t,n){this.processEvent(e,t,n),this.selfLog},t.pageview=function(e){var t=this.getPageByKey(e);this.processPageView(t),this.selfLog},t.levelStart=function(e,t,n){this.processLevelStart(e,t,n),this.selfLog},t.levelFail=function(e,t,n){this.processLevelFail(e,t,n),this.selfLog},t.levelRescue=function(e,t,n){this.processLevelRescue(e,t,n),this.selfLog},t.levelComplete=function(e,t,n){this.processLevelComplete(e,t,n),this.selfLog},t.loadPreRollAd=function(e){this.processLoadPreRollAd(e),this.selfLog},t.showPreRollAd=function(e){this.processShowPreRollAd(e),this.selfLog},t.loadInterstitialAd=function(e){this.processLoadInterstitialAd(e),this.selfLog},t.showInterstitialAd=function(e){this.processShowInterstitialAd(e),this.selfLog},t.loadRewardedVideoAd=function(e){this.processLoadRewardedVideoAd(e),this.selfLog},t.showRewardedVideoAd=function(e){this.processShowRewardedVideoAd(e),this.selfLog},t.receiveReward=function(e){this.processReceiveReward(e),this.selfLog},t.loadAdFail=function(e,t,n){this.processLoadAdFail(e,t,n),this.selfLog},t.showAdFail=function(e,t,n){this.processShowAdFail(e,t,n),this.selfLog},t.getPageByKey=function(e){var t=e.replace(/_/g,"-");return t=t.toLowerCase()},t.processLevelStart=function(e,t,n){},t.processLevelFail=function(e,t,n){},t.processLevelRescue=function(e,t,n){},t.processLevelComplete=function(e,t,n){},t.processLoadInterstitialAd=function(e){},t.processShowInterstitialAd=function(e){},t.processLoadPreRollAd=function(e){},t.processShowPreRollAd=function(e){},t.processLoadRewardedVideoAd=function(e){},t.processShowRewardedVideoAd=function(e){},t.processReceiveReward=function(e){},t.processLoadAdFail=function(e,t,n){},t.processShowAdFail=function(e,t,n){},e}();GameCore.Analytics={BaseAnalytics:L};var N=function(e){function t(){for(var t,n,i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];return(n=e.call.apply(e,A()(t=[this]).call(t,a))||this).analytics=void 0,n.pageview=function(e){n.isActive()&&n.analytics.forEach((function(t){t.pageview(e)}))},n}(0,o.Z)(t,e);var n=t.prototype;return n.init=function(){this.analytics=[]},n.add=function(e){this.analytics.push(e)},n.event=function(e,t,n){this.isActive()&&this.analytics.forEach((function(i){i.event(e,t,n)}))},n.levelStart=function(e,t,n){this.isActive()&&this.analytics.forEach((function(i){i.levelStart(e,t,n)}))},n.levelRescue=function(e,t,n){this.isActive()&&this.analytics.forEach((function(i){i.levelRescue(e,t,n)}))},n.levelFail=function(e,t,n){this.isActive()&&this.analytics.forEach((function(i){i.levelFail(e,t,n)}))},n.levelComplete=function(e,t,n){this.isActive()&&this.analytics.forEach((function(i){i.levelComplete(e,t,n)}))},n.loadPreRollAd=function(e){this.isActive()&&this.analytics.forEach((function(t){t.loadPreRollAd(e)}))},n.showPreRollAd=function(e){this.isActive()&&this.analytics.forEach((function(t){t.showPreRollAd(e)}))},n.loadInterstitialAd=function(e){this.isActive()&&this.analytics.forEach((function(t){t.loadInterstitialAd(e)}))},n.showInterstitialAd=function(e){this.isActive()&&this.analytics.forEach((function(t){t.showInterstitialAd(e)}))},n.loadRewardedVideoAd=function(e){this.isActive()&&this.analytics.forEach((function(t){t.loadRewardedVideoAd(e)}))},n.showRewardedVideoAd=function(e){this.isActive()&&this.analytics.forEach((function(t){t.showRewardedVideoAd(e)}))},n.receiveReward=function(e){this.isActive()&&this.analytics.forEach((function(t){t.receiveReward(e)}))},n.loadAdFail=function(e,t,n){this.isActive()&&this.analytics.forEach((function(i){i.loadAdFail(e,t,n)}))},n.showAdFail=function(e,t,n){this.isActive()&&this.analytics.forEach((function(i){i.showAdFail(e,t,n)}))},n.isActive=function(){return this.analytics.length>=1},t}(Phaser.Plugins.BasePlugin),G=N,B=n(470),F=n.n(B),U=n(83),H=n.n(U),V=function(){function e(e){var t=this;this.game=void 0,this.audios=void 0,this.volume=void 0,this.soundKeys=void 0,this.isMusicEnabled=function(){return!!t.game.player.getPlayerSetting("music")},this.isSoundEnabled=function(){return!!t.game.player.getPlayerSetting("sound")},this.game=e,this.audios=new(F()),this.soundKeys=new(F())}var t=e.prototype;return t.addSoundKeys=function(e){var t=this;H()(e).forEach((function(n){var i=e[n];"string"===typeof i&&t.soundKeys.set(n,i)}))},t.clearSoundKeys=function(){this.soundKeys.clear()},t.play=function(e,t){var n=this,i=(0,s.Z)({volume:this.volume},t||{});i.volume!==this.volume&&(i.volume*=this.volume);var a=this.audios.get(e);if(!a&&this.game.cache.audio.exists(e)){var r=this.game.sound.add(e);this.audios.set(e,r),a=r}if(a)a.play(void 0,i);else{var o=this.soundKeys.get(e);if(o)try{this.game.globalScene.load.audio(e,o),this.game.globalScene.load.on(Phaser.Loader.Events.FILE_KEY_COMPLETE+"audio-"+e,(function(){var t=n.game.sound.add(e);n.audios.set(e,t),t.play(void 0,i)})),this.game.globalScene.load.start()}catch(c){}}},t.pauseAll=function(){this.audios.forEach((function(e){e.pause()}))},t.resumeAll=function(){this.audios.forEach((function(e){e.resume()}))},t.stopAll=function(){this.audios.forEach((function(e){e.stop()}))},t.pause=function(e){var t=this.audios.get(e);t&&t.pause()},t.stop=function(e){var t=this.audios.get(e);t&&t.stop()},t.setVolume=function(e){this.volume=e},e}(),Y=V,Z=function(){function e(e,t){var n=this;this.name=void 0,this.game=void 0,this.isSprite=void 0,this.audio=void 0,this.markers=void 0,this.volume=void 0,this.isMusicEnabled=function(){return!!n.game.player.getPlayerSetting("music")},this.isSoundEnabled=function(){return!!n.game.player.getPlayerSetting("sound")},this.name=t,this.game=e,this.markers={},this.isSprite=!1,this.isSprite||(this.audio=this.game.sound.add(this.name))}var t=e.prototype;return t.play=function(e,t){var n,i,a,r=(0,s.Z)({volume:this.volume},t||{});if(r.volume!==this.volume&&(r.volume*=this.volume),!this.isSprite)return(null==(i=this.audio)?void 0:i.seek)>0?void this.audio.resume():void(null==(a=this.audio)||a.play(e,r));this.createMaker(e),null==(n=this.markers[e])||n.play(e,r)},t.pause=function(e){var t,n;this.isSprite?null==(t=this.markers[e])||t.pause():null==(n=this.audio)||n.pause()},t.stop=function(e){var t,n;this.isSprite?null==(t=this.markers[e])||t.stop():null==(n=this.audio)||n.stop()},t.setVolume=function(e){this.volume=e},t.createMaker=function(e){if(!this.markers[e])try{this.markers[e]=this.game.sound.addAudioSprite(this.name)}catch(t){}},e}(),W=Z,K=function(e){function t(){for(var t,n,i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];return(n=e.call.apply(e,A()(t=[this]).call(t,a))||this).soundManager=void 0,n.musicManager=void 0,n.isMuteAll=void 0,n.initMusic=function(e){n.musicManager=new W(n.game,e),n.setMusicVolume(1)},n.initSound=function(){n.soundManager=new Y(n.game),n.setSoundVolume(1)},n}(0,o.Z)(t,e);var n=t.prototype;return n.importSoundEffectKeys=function(e){this.soundManager.addSoundKeys(e)},n.playSound=function(e,t){try{if(!this.soundManager||this.isMuteAll||!this.game.visibility.isGameVisible())return;if(!this.soundManager.isSoundEnabled())return;this.soundManager.play(e,t)}catch(n){}},n.stopSound=function(e){try{this.soundManager.stop(e)}catch(t){}},n.playMusic=function(e){void 0===e&&(e={});try{if(!this.musicManager||this.isMuteAll||!this.game.visibility.isGameVisible())return;if(!this.musicManager.isMusicEnabled())return;this.musicManager.play("",(0,s.Z)({loop:!0,volume:.2},e))}catch(t){}},n.pauseMusic=function(){try{if(!this.musicManager)return;this.musicManager.pause("")}catch(e){}},n.stopMusic=function(){try{if(!this.musicManager)return;this.musicManager.stop("")}catch(e){}},n.pauseAllSounds=function(){try{if(!this.soundManager)return;this.soundManager.pauseAll()}catch(e){}},n.resumeAllSounds=function(){try{if(!this.soundManager)return;this.soundManager.resumeAll()}catch(e){}},n.setSoundVolume=function(e){try{if(!this.soundManager)return;this.soundManager.setVolume(e)}catch(t){}},n.setMusicVolume=function(e){try{if(!this.musicManager)return;this.musicManager.setVolume(e)}catch(t){}},n.muteAll=function(){this.isMuteAll=!0,this.game.sound.mute=!0},n.unmuteAll=function(){this.isMuteAll=!1,this.game.sound.mute=!1},t}(Phaser.Plugins.BasePlugin),z=K,X=n(124),j="AUTH_TOKEN_REQUEST",J="AUTH_TOKEN_RECEIVED",q=function(e){function t(t,n){var i;return(i=e.call(this,t)||this).payload=void 0,i.name="RequestTokenFail",i.message=t||"Request token fail",i.payload=n||{},i}return(0,o.Z)(t,e),t}((0,w.Z)(Error)),Q=n(452),$="auth",ee=(0,Q.P1)([function(e){return e[$].token}],(function(e){return e})),te=(0,Q.P1)([function(e){return e[$].isRequesting}],(function(e){return e})),ne=function(e){return{type:J,payload:{token:e}}},ie=function(e){function t(){return e.apply(this,arguments)||this}(0,o.Z)(t,e);var n=t.prototype;return n.requestToken=function(){var e=(0,r.Z)(u().mark((function e(){var t;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.game.storage,e.next=3,t.dispatch(function(){var e=(0,r.Z)(u().mark((function e(t,n){var a,s,r,o;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,a=window.game.facebook,s=n(),r=ee(s),!te(s)&&""===r){e.next=7;break}return e.abrupt("return");case 7:return t({type:j,payload:{}}),e.next=10,a.getPlayerToken();case 10:o=e.sent,t(ne(o)),e.next=25;break;case 14:if(e.prev=14,e.t0=e.catch(0),!(e.t0 instanceof Object&&GameCore.Utils.Object.hasOwn(e.t0,"code"))){e.next=19;break}if("PENDING_REQUEST"!==e.t0.code){e.next=19;break}return e.abrupt("return");case 19:if(t(ne("")),!(e.t0 instanceof Object&&GameCore.Utils.Object.hasOwn(e.t0,"message"))){e.next=24;break}if("string"!==typeof e.t0.message){e.next=24;break}return(0,i.tO)(new Error(e.t0.message)),e.abrupt("return");case 24:(0,i.tO)(new q);case 25:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(t,n){return e.apply(this,arguments)}}());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.getToken=function(){return ee(this.state)},(0,X.Z)(t,[{key:"state",get:function(){return this.game.storage.getState()}}]),t}(Phaser.Plugins.BasePlugin),ae=ie,se=function(e,t){void 0===t&&(t=1);var n=new Image;n.onload=function(){var e,n;e=this.width*t,n=this.height*t,Math.floor(n/2),Math.floor(e/2)},n.src=e},re=function(e){function t(){for(var t,n,i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];return(n=e.call.apply(e,A()(t=[this]).call(t,a))||this).width=void 0,n.height=void 0,n.renderOptions=void 0,n.canvas=void 0,n}(0,o.Z)(t,e);var n=t.prototype;return n.preload=function(e){var t=this,n=H()(e);n.length<1||(n.forEach((function(n){t.scene.load.image(n,e[n])})),this.scene.load.start())},n.capture=function(){var e=(0,r.Z)(u().mark((function e(t){var n,i,a;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.width,i=t.height,a=t.renderOptions,this.width=n,this.height=i,this.renderOptions=a,this.createCanvas(),e.next=7,this.loadImages();case 7:return this.drawObjects(),e.abrupt("return",this.snapshotFrame());case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.createCanvas=function(){this.canvas||(this.canvas=this.game.textures.createCanvas("FrameCaptureCanvas")),this.canvas.clear(),this.canvas.setSize(this.width,this.height)},n.loadImages=function(){var e=this;return new(h())((function(t,n){for(var i in e.renderOptions){var a=e.renderOptions[i],s=a.name,r=a.image;if(r)e.scene.textures.get(s).key!==s&&e.scene.load.image(s,r)}e.scene.load.on(Phaser.Loader.Events.COMPLETE,t),e.scene.load.on(Phaser.Loader.Events.FILE_LOAD_ERROR,(function(){var e=new Error("Load image failed");n(e)})),e.scene.load.start()}))},n.drawObjects=function(){for(var e in this.renderOptions){var t=this.renderOptions[e];switch(t.type){case"text":this.drawText(t);break;case"image":this.drawImage(t)}}},n.drawText=function(e){var t=this.canvas.context,n=e.x,i=e.y,a=e.font,s=e.text,r=e.fillStyle,o=e.lineWidth,c=e.textAlign;t.font=a+' nunito,-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Oxygen,Ubuntu,Cantarell,"Fira Sans","Droid Sans","Helvetica Neue",sans-serif',t.fillStyle=r||"#ffffff",o&&(t.lineWidth=o),c&&(t.textAlign=c),t.fillText(s,n,i)},n.drawImage=function(e){var t=this.canvas.context,n=e.x,i=e.y,a=e.name,s=e.frame,r=e.width,o=e.height,c=e.fallbackWithImage,h=this.scene.textures.get(a),l=h.getSourceImage(s);"__MISSING"===h.key&&c&&(l=(h=this.scene.textures.get(c)).getSourceImage()),t.drawImage(l,n,i,r,o)},n.snapshotFrame=function(){var e=this.canvas.getCanvas().toDataURL("image/jpeg",.85);return GameCore.Utils.Valid.isDebugger()&&se(e),e},t}(Phaser.Plugins.ScenePlugin),oe=re,ce=function(e){function t(t,n,i){var a;return(a=e.call(this)||this).game=void 0,a.options=void 0,a.performance=void 0,a.isRunning=!1,a.checkTimer=void 0,a.fpsHistory=void 0,a.start=function(){if(!a.isRunning){a.isRunning=!0;var e=a.options.checkInterval;a.checkTimer=e,a.fpsHistory=[],a.game.events.on(Phaser.Core.Events.POST_STEP,a.onPostStep)}},a.stop=function(){a.isRunning&&(a.isRunning=!1,a.game.events.off(Phaser.Core.Events.POST_STEP,a.onPostStep),a.options.onlyUpdateWhenSwitchScene&&a.checkFps())},a.onPostStep=function(e,t){if(a.checkTimer-=t,!(a.checkTimer>0)){var n=a.options,i=n.checkInterval,s=n.onlyUpdateWhenSwitchScene;a.checkTimer+=i,a.fpsHistory.push(a.game.loop.actualFps),!1===s&&a.fpsHistory.length>=5&&a.checkFps()}},a.game=t,a.options=i,a.performance=n,a}(0,o.Z)(t,e);var n=t.prototype;return n.checkFps=function(){if(0!==this.fpsHistory.length){var e=this.options.autoUpgradeQuality,t=!1;this.isLowFps()?t=this.performance.downgradeGraphicsQuality():e&&this.isHighFps()&&(t=this.performance.upgradeGraphicsQuality()),t&&(this.fpsHistory=[])}},n.getFpsMedian=function(){return Phaser.Math.Median(this.fpsHistory)},n.isLowFps=function(){return this.getFpsMedian()<this.options.fpsThreshold},n.isHighFps=function(){return this.getFpsMedian()>1.2*this.options.fpsThreshold},t}(Phaser.Events.EventEmitter),he=ce,le=["pixelRatio","minQuality","maxQuality","qualityAdjustStep","trackingSceneKeys"],ue=function(e){function t(){for(var t,n,i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];return(n=e.call.apply(e,A()(t=[this]).call(t,a))||this).fpsTracker=void 0,n.pixelRatio=void 0,n.minQuality=void 0,n.maxQuality=void 0,n.qualityAdjustStep=void 0,n.trackingSceneKeys=[],n.trackingScene=function(e){var t;if(y()(t=n.trackingSceneKeys).call(t,e)){var i=n.game.scene.getScene(e);i.events.once(Phaser.Scenes.Events.UPDATE,n.fpsTracker.start),i.events.once(Phaser.Scenes.Events.SLEEP,n.fpsTracker.stop)}},n}(0,o.Z)(t,e);var n=t.prototype;return n.configure=function(e){var t=e.pixelRatio,n=e.minQuality,i=e.maxQuality,s=e.qualityAdjustStep,r=e.trackingSceneKeys,o=(0,a.Z)(e,le);this.pixelRatio=t,this.minQuality=n,this.maxQuality=i,this.qualityAdjustStep=s,this.trackingSceneKeys=r,this.fpsTracker=new he(this.game,this,o)},n.active=function(){this.game.events.on(Phaser.Scenes.Events.WAKE,this.trackingScene),this.game.events.on(Phaser.Scenes.Events.START,this.trackingScene)},n.downgradeGraphicsQuality=function(){var e=this.pixelRatio;if(e<=this.minQuality)return!1;var t=+(e-this.qualityAdjustStep).toFixed(2);return!(t<this.minQuality)&&(this.pixelRatio=t,this.game.world.resize(this.pixelRatio),!0)},n.upgradeGraphicsQuality=function(){var e=this.pixelRatio;if(e>=this.maxQuality)return!1;var t=+(e+this.qualityAdjustStep).toFixed(2);return!(t>this.maxQuality)&&(this.pixelRatio=t,this.game.world.resize(this.pixelRatio),!0)},t}(Phaser.Plugins.BasePlugin),de=ue,pe={sound:!0,music:!0,vibrate:!0,language:"en",theme:GameCore.Configs.DefaultTheme},me=n(85),ge=n.n(me),fe=n(87),Ee=n.n(fe),ve=pe.sound,Se=pe.music,Ae=pe.vibrate,Te=pe.language,ye=pe.theme,Ie=function(){function e(e){this.sound=void 0,this.music=void 0,this.vibrate=void 0,this.language=void 0,this.theme=void 0;var t=e||{},n=t.sound,i=t.music,a=t.vibrate,s=t.language,r=t.theme;this.sound=GameCore.Utils.Valid.isBoolean(n)?n:ve,this.music=GameCore.Utils.Valid.isBoolean(i)?i:Se,this.vibrate=GameCore.Utils.Valid.isBoolean(a)?a:Ae,this.language=GameCore.Utils.Valid.isString(s)?s:Te,this.theme=GameCore.Utils.Valid.isString(r)?r:ye}return e.prototype.toObject=function(){return{sound:this.sound,music:this.music,vibrate:this.vibrate,language:this.language,theme:this.theme}},e}(),Ce=Ie,Oe=GameCore.Utils,be=Oe.Valid,Re=Oe.Object,De=function(){function e(e){this.score=void 0,this.settings=void 0,this.gameData=void 0,this.userGuideDisplays=void 0,this.setupDefaultData(),this.updateScore(e),this.updateSettings(e),this.updateGameData(e),this.updateUserGuideDisplays(e)}var t=e.prototype;return t.setupDefaultData=function(){this.score=0,this.settings=(0,s.Z)({},pe),this.gameData={coins:0,diamond:0,lastReceiveGift:0,dailyRewarded:{lastRewarded:0,logDays:[]},dailyTasks:{startedTime:0,logTasks:{}}},this.userGuideDisplays=0},t.updateScore=function(e){var t=e.score;!1!==be.isNumber(t)&&(this.score=t)},t.updateSettings=function(e){var t=e.settings;if(!1!==be.isObject(t)){var n=new Ce(t).toObject();this.settings=n}},t.updateGameData=function(e){var t=e.gameData;if(!1!==be.isObject(t)){if(Re.hasOwn(t,"coins")&&be.isNumber(t.coins)&&(this.gameData.coins=t.coins),Re.hasOwn(t,"diamond")&&be.isNumber(t.diamond)&&(this.gameData.diamond=t.diamond),Re.hasOwn(t,"lastReceiveGift")&&be.isNumber(t.lastReceiveGift)&&(this.gameData.lastReceiveGift=t.lastReceiveGift),Re.hasOwn(t,"dailyRewarded")&&be.isObject(t.dailyRewarded)){var n=t.dailyRewarded;Re.hasOwn(n,"lastRewarded")&&be.isNumber(n.lastRewarded)&&(this.gameData.dailyRewarded.lastRewarded=n.lastRewarded),Re.hasOwn(n,"logDays")&&Array.isArray(n.logDays)&&(this.gameData.dailyRewarded.logDays=n.logDays)}if(Re.hasOwn(t,"dailyTasks")&&be.isObject(t.dailyTasks)){var i=t.dailyTasks;Re.hasOwn(i,"startedTime")&&be.isNumber(i.startedTime)&&(this.gameData.dailyTasks.startedTime=i.startedTime),Re.hasOwn(i,"logTasks")&&be.isObject(i.logTasks)&&(this.gameData.dailyTasks.logTasks=i.logTasks)}}},t.updateUserGuideDisplays=function(e){var t=e.userGuideDisplays;!1!==be.isNumber(t)&&(this.userGuideDisplays=t)},t.toObject=function(){return{score:this.score,settings:this.settings,gameData:this.gameData,userGuideDisplays:this.userGuideDisplays}},t.convertToPlayerData=function(){var e=this.gameData,t=e.coins,n=e.diamond,i=e.dailyTasks,a=e.dailyRewarded,s=e.lastReceiveGift;return{score:this.score,settings:this.settings,customFields:{coins:t,diamond:n,dailyTasks:i,dailyRewarded:a,lastReceiveGift:s},userGuideDisplays:this.userGuideDisplays}},t.convertToFacebookData=function(e){var t=e.score,n=e.settings,i=e.customFields,a=e.userGuideDisplays;return this.updateScore({score:t}),this.updateSettings({settings:n}),this.updateGameData({gameData:i}),this.updateUserGuideDisplays({userGuideDisplays:a}),this.toObject()},e}(),_e=n(122),we=function(e){try{var t=localStorage.getItem(e);return null===t?null:GameCore.Utils.Json.decode(t)}catch(n){return null}},Pe=function(e,t){try{var n=we(e),i={};GameCore.Utils.Valid.isObject(n)&&(i=n);var a=GameCore.Utils.Json.clone(t);if(!GameCore.Utils.Valid.isObject(a))return!1;var s=GameCore.Utils.Object.clear(a),r=(0,_e.TS)(i,s),o=GameCore.Utils.Json.encode(r);return localStorage.setItem(e,o),!0}catch(c){return!1}},xe=n(454),ke=GameCore.Configs.ApiHost,Me=function(){var e=(0,r.Z)(u().mark((function e(t){var n;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,xe.v)("players?platform=ms-games",t,{},ke,10);case 2:return n=e.sent,e.abrupt("return",(null==n?void 0:n.data)||{});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Le=function(){var e=(0,r.Z)(u().mark((function e(t){var n;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,xe.v)("players/"+t+"/user-guide-displays/inc",{},{},ke);case 2:return n=e.sent,e.abrupt("return",(null==n?void 0:n.data)||{});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ne="PLAYER_RECEIVED",Ge="PLAYER_DATA_UPDATE",Be="PLAYER_SCORE_UPDATE",Fe="PLAYER_PROFILE_UPDATE",Ue="PLAYER_SETTING_UPDATE",He="PLAYER_CONNECTED_PLAYERS_UPDATE",Ve=n(446),Ye=function(e){function t(t,n){var i;return(i=e.call(this,t)||this).payload=void 0,i.name="PlayerDataNameNotSupport",i.message=t||"The name of player data is not supported",i.payload=n||{},i}return(0,o.Z)(t,e),t}((0,w.Z)(Error)),Ze=n(46),We=n.n(Ze),Ke="player",ze=(0,Q.P1)([function(e){return e[Ke]}],(function(e){return e})),Xe=(0,Q.P1)([ze],(function(e){return e.playerId})),je=(0,Q.P1)([ze],(function(e){return e.ASID})),Je=(0,Q.P1)([function(e){return e[Ke].data}],(function(e){return e})),qe=((0,Q.P1)([Je],(function(e){return e.settings})),(0,Q.P1)([function(e){return e[Ke].connectedPlayers}],(function(e){return e}))),Qe=(0,Q.P1)([qe,function(e,t){return t.limit},function(e,t){return t.offset}],(function(e,t,n){if("number"!==typeof t)return[];if("number"!==typeof n)return[];var i=H()(e);return We()(i).call(i,n,t+n)||[]})),$e=(0,Q.P1)([Je],(function(e){return e.score})),et=(0,Q.P1)([Je],(function(e){return e.customFields})),tt=GameCore.Configs,nt=tt.AppId,it=tt.Tutorial,at=tt.PlayerDataStore,st=function(e){return{type:"PLAYER_AS_NEW",payload:{isUserNew:e}}},rt=function(e,t){return function(n){var i=e.playerId,a=e.name,s=e.photo,r=e.locale;n({type:Ne,payload:{playerId:i,name:a,photo:s,locale:r,data:t||{}}})}},ot=function(e){return{type:He,payload:{connectedPlayers:e}}},ct=function(e,t){return function(){var n=(0,r.Z)(u().mark((function n(a,s){var r,o,c;return u().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,a({type:Ue,payload:{name:e,value:t}});case 3:r=s(),o=Je(r),c=new De({}).convertToFacebookData(o),FBInstant.player.setDataAsync(c),n.next=12;break;case 9:n.prev=9,n.t0=n.catch(0),(0,i.tO)(n.t0);case 12:case"end":return n.stop()}}),n,null,[[0,9]])})));return function(e,t){return n.apply(this,arguments)}}()},ht=function(e,t){return function(){var n=(0,r.Z)(u().mark((function n(a,s){var r,o,c,h,l;return u().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,o={customFields:(r={},r[e]=t,r)},n.next=4,a(ut(o));case 4:c=s(),h=Je(c),l=new De({}).convertToFacebookData(h),FBInstant.player.setDataAsync(l),n.next=15;break;case 10:if(n.prev=10,n.t0=n.catch(0),!(n.t0 instanceof Ye)){n.next=14;break}return n.abrupt("return");case 14:(0,i.tO)(n.t0);case 15:case"end":return n.stop()}}),n,null,[[0,10]])})));return function(e,t){return n.apply(this,arguments)}}()},lt=function(e){return function(){var t=(0,r.Z)(u().mark((function t(n,a){var s,r,o,c;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,s={customFields:e},t.next=4,n(ut(s));case 4:r=a(),o=Je(r),c=new De({}).convertToFacebookData(o),FBInstant.player.setDataAsync(c),t.next=16;break;case 10:if(t.prev=10,t.t0=t.catch(0),!(t.t0 instanceof Ye)){t.next=15;break}return t.abrupt("return");case 15:(0,i.tO)(t.t0);case 16:case"end":return t.stop()}}),t,null,[[0,10]])})));return function(e,n){return t.apply(this,arguments)}}()},ut=function(e){return{type:Ge,payload:{data:e}}},dt=function(e){return function(){var t=(0,r.Z)(u().mark((function t(n,a){var s,r,o;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,n({type:Be,payload:{score:e}});case 3:Me({score:e}),s=a(),r=Je(s),o=new De({}).convertToFacebookData(r),FBInstant.player.setDataAsync(o),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(0),(0,i.tO)(t.t0);case 13:case"end":return t.stop()}}),t,null,[[0,10]])})));return function(e,n){return t.apply(this,arguments)}}()},pt=function(e){function t(){return e.apply(this,arguments)||this}(0,o.Z)(t,e);var n=t.prototype;return n.checkLoggedIn=function(){this.game.storage.dispatch((function(e,t){try{var n=t(),a=Je(n).userGuideDisplays;if((void 0===a?0:a)>0)return;e(st(!0))}catch(s){(0,i.tO)(s)}}))},n.setLogged=function(){var e=(0,r.Z)(u().mark((function e(){var t;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.game.storage,e.next=3,t.dispatch(function(){var e=(0,r.Z)(u().mark((function e(t,n){var a,s,r;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a=window.game.facebook,Pe(at,{userGuideDisplays:1}),s=n(),r=Xe(s),e.next=7,Le(r);case 7:a.data.set("userGuideDisplays",1),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),(0,i.tO)(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t,n){return e.apply(this,arguments)}}());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.setAsNewUser=function(){var e=(0,r.Z)(u().mark((function e(t){var n;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.game.storage,e.next=3,n.dispatch(st(t));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.incUserGuideDisplays=function(){var e=(0,r.Z)(u().mark((function e(){var t;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.game.storage,e.next=3,t.dispatch(function(){var e=(0,r.Z)(u().mark((function e(t,n){var a,s,r,o;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!it.ForceUseTutorial){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,t(ut({userGuideDisplays:1}));case 5:a=n(),s=Xe(a),r=Je(a),o=new De({}).convertToFacebookData(r),FBInstant.player.setDataAsync(o),Le(s),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),(0,i.tO)(e.t0);case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t,n){return e.apply(this,arguments)}}());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.receiveData=function(){var e=(0,r.Z)(u().mark((function e(t,n){var i;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=this.game.storage,e.next=3,i.dispatch(rt(t,n));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}(),n.updateData=function(){var e=(0,r.Z)(u().mark((function e(){var t;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.game.storage,e.next=3,t.dispatch(function(){var e=(0,r.Z)(u().mark((function e(t,n){var a,s,r,o,c,h,l,d;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a=n(),s=ze(a),r=s.playerId,o=s.name,c=s.photo,h=s.locale,e.next=6,FBInstant.player.getASIDAsync();case 6:return l=e.sent,d={appId:nt,playerId:r,name:o,photo:c,locale:h,ASID:l},e.next=10,t({type:Fe,payload:{profile:d}});case 10:return e.next=12,Me(d);case 12:e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),(0,i.tO)(e.t0);case 17:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(t,n){return e.apply(this,arguments)}}());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.setBestScore=function(){var e=(0,r.Z)(u().mark((function e(t){var n;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.game.storage,e.next=3,n.dispatch(dt(t));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.setSetting=function(){var e=(0,r.Z)(u().mark((function e(t,n){var i;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=this.game.storage,e.next=3,i.dispatch(ct(t,n));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}(),n.setCustomData=function(){var e=(0,r.Z)(u().mark((function e(t,n){var i;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=this.game.storage,e.next=3,i.dispatch(ht(t,n));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}(),n.setMultiCustomData=function(){var e=(0,r.Z)(u().mark((function e(t){var n;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.game.storage,e.next=3,n.dispatch(lt(t));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.requestConnectedPlayers=function(){var e=(0,r.Z)(u().mark((function e(){var t;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.game.storage,e.next=3,t.dispatch(function(){var e=(0,r.Z)(u().mark((function e(t){var n,a,s,r;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,FBInstant.player.getConnectedPlayersAsync();case 3:if(a=e.sent,s=function(e){return!!e},r=ge()(n=Ee()(a).call(a,(function(e){var t=e.getID(),n=e.getName(),i=e.getPhoto();return t&&n&&i?new Ve.Z(t,n,i).toObject():null}))).call(n,s),!(r.length<1)){e.next=8;break}return e.abrupt("return");case 8:t(ot(r)),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),(0,i.tO)(e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t){return e.apply(this,arguments)}}());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.updateConnectedPlayers=function(){var e=(0,r.Z)(u().mark((function e(t){var n;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.game.storage,e.next=3,n.dispatch(ot(t));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.getPlayer=function(){return ze(this.state)},n.getPlayerId=function(){return this.getPlayer().playerId},n.getPlayerASID=function(){return je(this.state)},n.getPlayerData=function(){return this.getPlayer().data},n.getPlayerSetting=function(e){var t=this.getPlayerSettings();return"string"!==typeof e?null:GameCore.Utils.Object.hasOwn(t,e)?t[e]:GameCore.Utils.Object.hasOwn(pe,e)?pe[e]:null},n.getPlayerSettings=function(){return this.getPlayerData().settings},n.getPlayerIsNew=function(){return this.getPlayer().isUserNew},n.getDiamond=function(){var e=this.getCustomData("diamond");return GameCore.Utils.Valid.isNumber(e)?e:0},n.getBestScore=function(){return $e(this.state)},n.getCustomData=function(e){var t=et(this.state);return GameCore.Utils.Valid.isObject(t)&&GameCore.Utils.Object.hasOwn(t,e)?t[e]:null},n.getConnectedPlayers=function(){return qe(this.state)},n.getConnectedPlayerIds=function(e,t){return Qe(this.state,{limit:e,offset:t})},(0,X.Z)(t,[{key:"state",get:function(){return this.game.storage.getState()}}]),t}(Phaser.Plugins.BasePlugin),mt=pt,gt=GameCore.Configs.ApiHost,ft=function(){var e=(0,r.Z)(u().mark((function e(t){var n,i;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=GameCore.Utils.String.params(t),e.next=3,(0,xe.U)("players?"+n,{},gt);case 3:return i=e.sent,e.abrupt("return",(null==i?void 0:i.data)||[]);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Et="PROFILES_DATA_UPDATE",vt="profile",St=(0,Q.P1)([function(e){return e[vt].data}],(function(e){return e})),At=(0,Q.P1)([function(e){return e[vt].profileIds}],(function(e){return e})),Tt=function(e){return function(){var t=(0,r.Z)(u().mark((function t(n,a){var s,r,o,c;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,s=a(),r=At(s),!((o=GameCore.Utils.Array.difference(e,r)).length<1)){t.next=6;break}return t.abrupt("return");case 6:return t.next=8,ft({playerIds:o});case 8:c=t.sent,n({type:Et,payload:{data:c}}),t.next=15;break;case 12:t.prev=12,t.t0=t.catch(0),(0,i.tO)(t.t0);case 15:case"end":return t.stop()}}),t,null,[[0,12]])})));return function(e,n){return t.apply(this,arguments)}}()},yt=function(e){function t(){return e.apply(this,arguments)||this}(0,o.Z)(t,e);var n=t.prototype;return n.requestProfiles=function(){var e=(0,r.Z)(u().mark((function e(t){var n;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.game.storage,e.next=3,n.dispatch(Tt(t));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.getProfiles=function(){return St(this.state)},(0,X.Z)(t,[{key:"state",get:function(){return this.game.storage.getState()}}]),t}(Phaser.Plugins.BasePlugin),It=yt,Ct=n(66),Ot=n.n(Ct),bt=n(86),Rt=n.n(bt),Dt=n(210),_t=n.n(Dt),wt=["player","match"],Pt="null",xt=GameCore.Utils,kt=xt.Valid,Mt=xt.Object,Lt=GameCore.Configs.Rollbar,Nt=Lt.UseMockup,Gt=Lt.FilterError,Bt=function(e){function t(){for(var t,n,i=arguments.length,s=new Array(i),r=0;r<i;r++)s[r]=arguments[r];return(n=e.call.apply(e,A()(t=[this]).call(t,s))||this).enable=void 0,n.rollbar=void 0,n.events=[],n.beforeSend=function(e,t,i){Nt&&n.showPopupError(i)},n.checkIgnore=function(e,t,i){try{return!!n.isErrorIgnore(t)}catch(a){return!1}},n.showPopupError=function(e){var t,i,a,s=null==e||null==(t=e.body)||null==(t=t.trace)?void 0:t.exception;s&&n.events.push(s);var r=(null==e||null==(i=e.body)||null==(i=i.trace)?void 0:i.frames)||[];(a=n.events).push.apply(a,r);var o=document.getElementById("popup-error");o||((o=document.createElement("div")).id="popup-error",document.body.appendChild(o)),o.innerHTML='<div style="color: #fff; display: flex; flex-flow: column; align-items: center; ">\n      <pre id="json" style="overflow: auto; background-color: rgb(195 112 97 / 80%); padding: 10px; max-height: 80vh; max-width: 90vw; border: 5px solid #545454;">'+Ot()(n.events,null,2)+'</pre>\n      <button id="close" style="cursor: pointer; padding: 10px 20px; border-radius: 100px;">Close</button>\n      </div>',o.style="top: 0px; z-index: 10000; width: 100vw; max-height: 100vh; position: absolute; display: flex; align-items: center; justify-content: center;";var c=document.getElementById("close");c&&(c.onclick=n.closePopup)},n.closePopup=function(){n.events=[{}];var e=document.getElementById("popup-error");null==e||e.remove()},n.isNoneErrorEvent=function(e){if(!e||0===e.length)return!1;if(!e[0].message)return!1;return"Non-Error promise rejection captured with keys: code, message"===e[0].message},n.isErrorIgnore=function(e){if(!e||0===e.length)return!1;var t=!1,i=e[0];return i instanceof Object&&(t=n.isIgnoreByCode(i)||n.isIgnoreByMessage(i)),t},n.isIgnoreByCode=function(e){if(Mt.hasOwn(e,"code")){var t=e.code,n=Gt.Codes,i=n.accepted,a=n.ignored;if("string"===typeof t){if(Rt()(i).call(i,t)>=0)return!1;if(Rt()(a).call(a,t)>=0)return!0}}if(Mt.hasOwn(e,"name")){var s=e.name,r=Gt.Codes,o=r.accepted,c=r.ignored;if("string"===typeof s){if(Rt()(o).call(o,s)>=0)return!1;if(Rt()(c).call(c,s)>=0)return!0}}return!1},n.isIgnoreByMessage=function(e){if(Mt.hasOwn(e,"message")){var t=e.message,n=Gt.Messages,i=n.accepted,a=n.ignored;if("string"===typeof t){if(Rt()(i).call(i,t)>=0)return!1;if(Rt()(a).call(a,t)>=0)return!0}}return!1},n.addExtraState=function(){try{if(!Mt.hasOwn(window,"game"))return;if(!Mt.hasOwn(window.game,"storage"))return;if(!Mt.hasOwn(window.game.storage,"getState"))return;var e=(0,window.game.storage.getState)()||{},t=e.player,i=e.match,s=(0,a.Z)(e,wt);n.rollbar.configure({payload:{player:t,match:i,other:s}})}catch(r){}},n}(0,o.Z)(t,e);var n=t.prototype;return n.setup=function(){this.rollbar=new(_t())({accessToken:Pt,checkIgnore:this.checkIgnore,onSendCallback:this.beforeSend,captureUncaught:!0,scrubTelemetryInputs:!0,captureUnhandledRejections:!0,autoInstrument:{dom:!1,navigation:!1},payload:{environment:"production",client:{javascript:{code_version:"0"}},server:{root:"webpack:///./",branch:"master"}}}),this.enable=!0,this.sendTestException()},n.configure=function(e){this.rollbar&&this.rollbar.configure(e)},n.sendTestException=function(){if(!kt.isDebugger()){var e=FBInstant.player.getID();e&&this.rollbar.debug(new Error("Test rollbar"),{playerID:e})}},n.sendException=function(e,t){e&&this.enable&&this.rollbar&&(this.addExtraState(),this.rollbar.error(e,t))},t}(Phaser.Plugins.BasePlugin),Ft=Bt,Ut=function(e){function t(){return e.apply(this,arguments)||this}return(0,o.Z)(t,e),t.prototype.emit=function(t,n){return e.prototype.emit.call(this,t,n)},t}(Phaser.Events.EventEmitter),Ht=Ut,Vt=n(100),Yt=n(453),Zt=function(e){function t(t,n,i,a){var s;(s=e.call(this,t)||this).zone=void 0,s.background=void 0,s.setName(n),s.setVisible(!1);var r=s.scene.world.getWorldSize(),o=r.width,c=r.height;return s.setSize(i||o,a||c),s.addZone(),s.addBackground(),s.registerEvents(),s}(0,o.Z)(t,e);var n=t.prototype;return n.open=function(e){GameCore.Utils.Valid.isObject(e)&&(this.setDataEnabled(),this.setData(e)),this.setBlockInputOutsideEnabled(!0),this.scene.screen.bringToTop(this.name),this.visible||(this.setVisible(!0),this.logPageviewOnOpen(),this.logEventOpen(),this.handleResize())},n.close=function(){this.setBlockInputOutsideEnabled(!1),this.visible&&(this.setVisible(!1),this.logPageviewOnClose())},n.incY=function(e){this.y+=e,this.background.y-=e},n.incX=function(e){this.x+=e,this.background.x-=e},n.incScale=function(e){this.scale+=e,this.background.scale-=e^e*(100/e)},n.setBlockInputOutsideEnabled=function(e){this.scene.input.setTopOnly(e)},n.addZone=function(){this.zone=this.scene.add.zone(0,0,this.width,this.height),this.zone.setInteractive({}),this.add(this.zone)},n.addBackground=function(){var e="screen-background";if(!this.scene.textures.exists(e)){var t=this.width+2,n=this.height+2,i=this.scene.add.graphics();i.fillStyle(0,1),i.fillRect(0,0,t,n),i.generateTexture(e,t,n),i.destroy()}this.background=this.scene.add.image(0,0,e),this.add(this.background)},n.registerEvents=function(){this.scene.world.events.on(Yt.Z.RESIZE,this.handleResize,this)},n.handleResize=function(){var e=this.scene.world.getWorldSize(),t=e.width,n=e.height;this.setSize(t,n).setPosition(t/2,n/2),this.zone.setSize(this.width,this.height),this.background.setDisplaySize(this.width,this.height)},n.logPageviewOnOpen=function(){this.scene.analytics.pageview(this.name)},n.logPageviewOnClose=function(){this.scene.analytics.pageview(this.scene.scene.key)},n.logEventOpen=function(){this.scene.analytics.event(Vt._.SCREEN_OPEN,{screen_name:this.getScreenName()})},n.getScreenName=function(){return GameCore.Utils.String.toUpperCamelCase(this.name.toLowerCase())},t}(Phaser.GameObjects.Container),Wt=Zt,Kt={OPEN:"open",CLOSE:"close",CREATED:"created"};GameCore.Screen=Wt,GameCore.Screens={Events:Kt};var zt=function(e){function t(){for(var t,n,i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];return(n=e.call.apply(e,A()(t=[this]).call(t,a))||this).events=void 0,n}(0,o.Z)(t,e);var n=t.prototype;return n.boot=function(){this.events=new Ht,this.registryScreenFactory()},n.get=function(e){var t=this.scene.children.getByName(e);return null===t?null:t},n.add=function(e,t,n,i){var a=this.get(e);return a||(a=this.scene.add.screen(e,t,n,i),this.events.emit(GameCore.Screens.Events.CREATED,a),a)},n.open=function(e,t){var n=this.get(e);return!!n&&(n.open(t),n.emit(GameCore.Screens.Events.OPEN,n),this.events.emit(GameCore.Screens.Events.OPEN,n),!0)},n.close=function(e){var t=this.get(e);return!!t&&(t.close(),t.emit(GameCore.Screens.Events.CLOSE,t),this.events.emit(GameCore.Screens.Events.CLOSE,t),!0)},n.bringToTop=function(e){var t=this.scene.children.getByName(e);t&&this.scene.children.bringToTop(t)},n.registryScreenFactory=function(){Phaser.GameObjects.GameObjectFactory.register("screen",this.createScreen)},n.createScreen=function(e,t,n,i){var a=new t(this.scene,e,n,i);return Phaser.Display.Align.In.Center(a,this.scene.gameZone),this.existing(a),a},t}(Phaser.Plugins.ScenePlugin),Xt=zt,jt=n(406),Jt=n.n(jt),qt=n(449),Qt=n(451),$t=n(450),en={currentSceneKey:"",prevSceneKey:""};(0,$t.pV)();for(var tn,nn,an,sn,rn,on,cn,hn,ln,un={processed:!1,contextId:"",contextType:"SOLO",entryPointData:{},currentGameMode:""},dn=un,pn={data:{}},mn={token:"",isRequesting:!1},gn=((tn={})[$]=function(e,t){return void 0===e&&(e=mn),(0,$t.ZP)(e,(function(e){var n=t.payload;if(n){var i=n.token;switch(t.type){case j:e.isRequesting=!0;break;case J:e.token=i,e.isRequesting=!1}}}))},tn),fn={ASID:"",playerId:"",name:"",photo:"",locale:"",connectedPlayers:{},data:{score:0,settings:pe,userGuideDisplays:0,customFields:{}},isUserNew:!0},En=((nn={})[Ke]=function(e,t){return void 0===e&&(e=fn),(0,$t.ZP)(e,(function(n){var i=t.payload;if(i){var a=i.name,s=i.value,r=i.data,o=void 0===r?{}:r,c=i.score,h=i.connectedPlayers,l=void 0===h?[]:h,u=i.profile;switch(t.type){case Ne:var d=i.playerId,p=i.name,m=i.photo,g=i.locale,f=i.data;if(n.playerId=d,n.name=p,n.photo=m,n.locale=g,GameCore.Utils.Valid.isObject(f)){var E=f;n.data=(0,_e.TS)(e.data,E)}f.userGuideDisplays>0&&(n.isUserNew=!1);break;case Fe:var v=u.playerId,S=u.name,A=u.photo,T=u.locale,y=u.ASID;n.ASID=y,n.playerId=v,n.name=S,n.photo=A,n.locale=T;break;case Be:n.data.score=c;break;case Ue:if(!GameCore.Utils.Object.hasOwn(n.data.settings,a))break;n.data.settings[a]=s;break;case Ge:n.data=(0,_e.TS)(e.data,o),o.userGuideDisplays>0&&(n.isUserNew=!1);break;case He:if(l.length<=0)break;var I=GameCore.Utils.Object.keyBy(l,"playerId");n.connectedPlayers=(0,_e.TS)(e.connectedPlayers,I)}}}))},nn),vn=n(607),Sn=n.n(vn),An={data:{},profileIds:[]},Tn=((an={})[vt]=function(e,t){return void 0===e&&(e=An),(0,$t.ZP)(e,(function(n){var i=t.payload;if(i){var a=i.data,r=void 0===a?[]:a;if(t.type===Et){var o,c,h=GameCore.Utils.Object.keyBy(r,"playerId"),l=H()(h);n.data=(0,_e.TS)((0,s.Z)({},e.data),h),n.profileIds=A()(o=[]).call(o,new(Sn())(A()(c=[]).call(c,e.profileIds,l)))}}}))},an),yn="match",In="MATCH_GAMEPLAY_INITIALIZE",Cn="MATCH_GAMEPLAY_START",On="MATCH_GAMEPLAY_FINISH",bn="MATCH_GAMEPLAY_UPDATE",Rn="MATCH_GAMEPLAY_RESCUE",Dn="MATCH_GAMEPLAY_RESET_RESCUE",_n="MATCH_STATS_DATA_CLEAR",wn="MATCH_STATS_DATA_UPDATE",Pn="MATCH_STATS_CURRENT_UPDATE",xn="MATCH_SINGLE_CREATE_REQUEST",kn="MATCH_SINGLE_DETAIL_REQUEST",Mn="MATCH_SINGLE_MOVE_UPDATED",Ln="MATCH_SINGLE_DATA_RECEIVED",Nn="MATCH_SINGLE_DATA_CLEAR",Gn="MATCH_CHALLENGE_JOIN_REQUEST",Bn="MATCH_CHALLENGE_CREATE_REQUEST",Fn="MATCH_CHALLENGE_FINISH_REQUEST",Un="MATCH_CHALLENGE_CONTINUE_REQUEST",Hn="MATCH_CHALLENGE_DATA_RECEIVED",Vn="MATCH_CHALLENGE_DATA_CLEAR",Yn="MATCH_GROUP_CREATE_REQUEST",Zn="MATCH_GROUP_FINISH_REQUEST",Wn="MATCH_ONLINE_CREATE_REQUEST",Kn="MATCH_ONLINE_DATA_RECEIVED",zn="MATCH_JOURNEY_CREATE_REQUEST",Xn="MATCH_JOURNEY_DATA_RECEIVED",jn="MATCH_JOURNEY_MOVE_UPDATED",Jn="MATCH_JOURNEY_LEVEL_RECEIVED",qn="open",Qn="active",$n="finished",ei={mode:"",status:qn,rescued:0,startAt:0,finishAt:0},ti={single:{_id:"",data:{fen:""},playerId:"",status:qn},group:{status:qn,opponentInfo:{playerId:"",name:"",photo:""}},challenge:{_id:"",status:qn,whitePlayerId:"",blackPlayerId:"",opponentInfo:{playerId:"",name:"",photo:""}},online:{_id:"",status:qn,players:{}},journey:{_id:"",data:{fen:"",magnetPercent:0,magnetAmount:0,magnetScore:0,jsonAmount:{}},playerId:"",level:0,status:qn},updateAt:0,isRequesting:!1},ni={current:{updateAt:0},data:{updateAt:0},isRequesting:!1},ii=((sn={})[yn]=(0,qt.UY)({gameplay:function(e,t){return void 0===e&&(e=ei),(0,$t.ZP)(e,(function(n){var i=t.payload;if(i){var a=i.mode,s=i.status,r=i.rescued;switch(t.type){case In:n.status=qn,n.mode=ei.mode,n.rescued=ei.rescued,n.startAt=ei.startAt,n.finishAt=ei.finishAt,n.opponentInfo=ei.opponentInfo;break;case Cn:n.mode=a,n.status=Qn,n.rescued=r,n.startAt=Date.now();break;case bn:n.mode="string"===typeof a?a:e.mode,n.status=s||e.status;break;case On:n.status=$n,n.finishAt=Date.now();break;case Rn:n.rescued+=1;break;case Dn:n.rescued=0}}}))},match:function(e,t){return void 0===e&&(e=ti),(0,$t.ZP)(e,(function(n){var i=t.payload;if(i){var a=i.match,r=i.opponentInfo,o=i.players,c=i.level;switch(t.type){case xn:case kn:case Gn:case Fn:case Wn:case zn:n.isRequesting=!0;break;case Mn:n.single=(0,s.Z)({},e.single,a),n.updateAt=Date.now();break;case jn:n.journey=(0,s.Z)({},e.journey,a),n.updateAt=Date.now();break;case Ln:n.isRequesting=!1,n.single=a||ti.single;break;case Xn:n.isRequesting=!1,n.journey=a||ti.journey;break;case Jn:n.journey.level=c;break;case Nn:n.isRequesting=!1,n.single=ti.single;break;case"MATCH_JOURNEY_DATA_CLEAR":n.isRequesting=!1,n.journey=ti.journey;break;case Bn:case Un:n.isRequesting=!0,n.challenge.opponentInfo=r;break;case Hn:n.isRequesting=!1,n.challenge=(0,s.Z)({},a||ti.challenge),n.challenge.opponentInfo=e.challenge.opponentInfo;break;case Vn:n.isRequesting=!1,n.challenge=ti.challenge;break;case Yn:n.group.status=Qn,r&&(n.group.opponentInfo=r);break;case Zn:n.group.status=$n;break;case"MATCH_ONLINE_DATA_CLEAR":n.online.status=ti.online.status,n.online.players=ti.online.players;break;case Kn:n.online.status=Qn,n.online.players=o;break;case"MATCH_ONLINE_FINISH_REQUEST":n.online.status=$n}}}))},stats:function(e,t){return void 0===e&&(e=ni),(0,$t.ZP)(e,(function(n){var i=t.payload;if(i){var a=i.playerId,r=i.stats,o=i.match,c=i.current,h=i.players,l=i.leaders;switch(t.type){case _n:delete n.data[a],n.current=ni.current;break;case"MATCH_STATS_CONTEXT_REQUEST":n.data=ni.data,n.isRequesting=!0;break;case"MATCH_STATS_CONTEXT_RECEIVED":n.data=r,n.isRequesting=!1;break;case wn:n.data[a]=r;break;case Pn:n.current=(0,_e.TS)((0,s.Z)({},e.current),r);break;case Kn:H()(h).forEach((function(e){n.data[e]={score:0}}));break;case"MATCH_ONLINE_STATS_UPDATE":l.forEach((function(e){var t=e.playerId,i=e.score,a=e.rank;n.data[t]={score:i,rank:a}}));break;case Hn:var u=o||{},d=u.blackPlayerId,p=u.blackPlayerScore,m=u.whitePlayerId,g=u.whitePlayerScore,f=u.whitePlayerLevel,E=u.blackPlayerLevel;if(!d||!m)break;c&&(n.current=c),n.data[d]={score:p,level:E},n.data[m]={score:g,level:f}}}}))}}),sn),ai="TOURNAMENT_ACTIVE",si="TOURNAMENT_REQUEST",ri="TOURNAMENT_RECEIVED",oi={active:!1,tournamentId:null,bestSessionScore:0,isRequesting:!1},ci=((rn={}).tournament=function(e,t){return void 0===e&&(e=oi),(0,$t.ZP)(e,(function(n){var i=t.payload;if(i){var a=i.score,s=void 0===a?0:a,r=i.tournamentId;switch(t.type){case ai:n.active=!0,n.tournamentId=r;break;case si:n.isRequesting=!0;break;case ri:n.isRequesting=!1,s>e.bestSessionScore&&(n.bestSessionScore=s)}}}))},rn),hi="leaderboards",li=n(469),ui=n.n(li),di=n(127),pi=n.n(di),mi="LEADERBOARD_DATA_REQUEST",gi="LEADERBOARD_DATA_UPDATE",fi="LEADERBOARD_DATA_CLEAR",Ei={leaderboardId:"",type:"",limit:0,offset:0,leaders:{},isRequesting:!1},vi=((on={})[hi]=function(e,t){return void 0===e&&(e=Ei),(0,$t.ZP)(e,(function(n){var i=t.payload;if(i){var a=i.leaderboardId,r=i.type,o=i.limit,c=i.offset,h=i.leaders;switch(t.type){case mi:e.type!==r&&0===c&&(n.leaders=Ei.leaders),n.isRequesting=!0,n.leaderboardId=a,n.type=r,n.limit=o,n.offset=c;break;case gi:if(n.isRequesting=!1,e.type!==r)break;var l=GameCore.Utils.Json.clone((0,s.Z)({},e.leaders,h)),u=ui()(l),d=ge()(u).call(u,(function(e){return!!e.name&&!!e.photo}));pi()(d).call(d,(function(e,t){return+t.score-+e.score})),d.forEach((function(t,i){t.rank=i+1,e.leaders[t.playerId]||(n.leaders[t.playerId]=t)}));break;case fi:n.isRequesting=!1,n.type=Ei.type,n.limit=Ei.limit,n.offset=Ei.offset,n.leaders=Ei.leaders,n.leaderboardId=Ei.leaderboardId}}}))},on),Si="missions",Ai="MISSIONS_DATA_REQUEST",Ti="MISSIONS_DATA_RECEIVE",yi="MISSION_UPDATE",Ii="MISSION_COMPLETED",Ci={mission:null,missions:null,isRequesting:!1},Oi=((cn={})[Si]=function(e,t){return void 0===e&&(e=Ci),(0,$t.ZP)(e,(function(n){var i,a,s=t.payload;if(s){var r=s.name,o=s.type,c=s.value,h=s.missions;switch(t.type){case Ai:n.isRequesting=!0;break;case Ti:if(n.isRequesting=!1,h.length<1)return;n.missions={},h.forEach((function(e){n.missions[e.name]=e}));break;case"MISSION_START":if(null===e.missions)break;var l=e.missions[r];n.mission={name:r,process:{},require:l.require,reward:l.reward},H()(l.require).forEach((function(e){n.mission.process[e]=0}));break;case yi:if((null==(i=e.mission)?void 0:i.name)!==r)break;n.mission.process[o]+=c;break;case Ii:if((null==(a=e.mission)?void 0:a.name)!==r)break;n.mission=null}}}))},cn),bi="dailyTasks",Ri="DAILY_TASKS_DATA_REQUEST",Di="DAILY_TASKS_DATA_RECEIVE",_i="DAILY_TASKS_PROCESS_UPDATE",wi="DAILY_TASK_VALUE_ADD",Pi="DAILY_TASK_FINISHED",xi={tasks:[],process:[],isRequesting:!1,isNotice:!1},ki=((hn={})[bi]=function(e,t){return void 0===e&&(e=xi),(0,$t.ZP)(e,(function(n){var i=t.payload;if(i){var a=i.id,s=i.type,r=i.value,o=i.tasks,c=i.process;switch(t.type){case Ri:n.isRequesting=!0;break;case Di:n.isRequesting=!1,n.tasks=o;break;case _i:n.process=c;break;case wi:if(!e.process[a])break;n.process[a][s]+=r;break;case"DAILY_TASK_REWARDED":if(!e.process[a])break;n.process[a].rewarded=!0;break;case"DAILY_TASKS_SEEN":n.isNotice=!1;break;case Pi:n.isNotice=!0}}}))},hn),Mi={rewards:[],isRequesting:!1},Li=((ln={}).dailyRewards=function(e,t){return void 0===e&&(e=Mi),(0,$t.ZP)(e,(function(e){var n=t.payload;if(n){var i=n.rewards;switch(t.type){case"DAILY_REWARDS_REQUEST":e.isRequesting=!0;break;case"DAILY_REWARDS_RECEIVE":e.isRequesting=!1,e.rewards=i}}}))},ln),Ni=(0,qt.UY)((0,s.Z)({scene:function(e,t){return void 0===e&&(e=en),(0,$t.ZP)(e,(function(n){var i=t.payload;if(i){var a=i.sceneKey;if(t.type===Qt.DW)n.currentSceneKey=a,n.prevSceneKey=e.currentSceneKey}}))},context:function(e,t){return void 0===e&&(e=un),(0,$t.ZP)(e,(function(e){var n=t.payload;if(n){var i=n.gameMode,a=n.contextId,s=n.contextType,r=n.entryPointData;switch(t.type){case Qt.kL:e.contextId=a,e.contextType=s,e.entryPointData=r;break;case Qt.fJ:e.contextId=a,e.contextType=s,e.processed=!0;break;case Qt.EH:e.currentGameMode=i}}}))},messages:function(e,t){return void 0===e&&(e=pn),(0,$t.ZP)(e,(function(n){var i=t.payload;if(i){var a=i.opponentId;if("string"===typeof a)switch(t.type){case Qt.qj:e.data[a]?n.data[a].sent=!0:n.data[a]={sent:!0};break;case Qt.rh:e.data[a]?n.data[a].sent=!1:n.data[a]={sent:!1}}}}))}},gn,En,Tn,ii,ci,vi,Oi,ki,Li)),Gi=n(625),Bi=function(e){return(0,Gi.xC)({reducer:Ni,preloadedState:e,devTools:!0})},Fi=function(e){function t(){for(var t,n,i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];return(n=e.call.apply(e,A()(t=[this]).call(t,a))||this).store=void 0,n.initiator=void 0,n.dispatch=function(e){return n.store.dispatch(e)},n.getState=function(){return n.store.getState()},n.subscribe=function(e){return n.store.subscribe(e)},n.watch=function(e,t){var i=Jt()((function(){var t=n.getState();return e(t)}));return n.subscribe(i((function(e){t(e)})))},n}(0,o.Z)(t,e);var n=t.prototype;return n.init=function(){this.store=Bi({})},n.setInitiator=function(e){this.initiator=e},n.syncStore=function(){var e=(0,r.Z)(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.initiator.initContext(),e.next=3,this.initiator.initPlayer();case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),t}(Phaser.Plugins.BasePlugin),Ui=Fi,Hi=n(612),Vi=n.n(Hi),Yi=function(e){function t(t,n){var i;return(i=e.call(this,t,{type:"webfont",key:n.type})||this).payload=void 0,i.payload=n,i}(0,o.Z)(t,e);var n=t.prototype;return n.load=function(){var e;switch(this.payload.type){case"google":e=this.getGoogleFontConfig(this.payload);break;case"local":e=this.getLocalFontConfig(this.payload)}Vi().load(e)},n.getGoogleFontConfig=function(e){var t=this,n=e.character,i=e.fontName,a=e.fontWeight;return{google:{families:[i+":"+(void 0===a?400:a)],text:n},active:function(){t.loader.nextFile(t,!0)},timeout:15e3}},n.getLocalFontConfig=function(e){var t=this,n=e.fontName,i=e.fontType,a=document.createElement("style");document.head.appendChild(a);var s=a.sheet;if(s){var r='@font-face { font-family: "'+n+'"; src: url("assets/fonts/'+n+("opentype"===i?".otf":".ttf")+'") format("'+i+'"); }';s.insertRule(r,0)}return{custom:{families:[n]},active:function(){t.loader.nextFile(t,!0)},timeout:15e3}},t}(Phaser.Loader.File),Zi=function(e){function t(){return e.apply(this,arguments)||this}return(0,o.Z)(t,e),t.prototype.addFont=function(e){var t=new Yi(this.scene.load,e);this.scene.load.addFile(t)},t}(Phaser.Plugins.ScenePlugin),Wi=Zi,Ki=n(200),zi=function(e){function t(){return e.apply(this,arguments)||this}return(0,o.Z)(t,e),t.prototype.emit=function(t){return e.prototype.emit.call(this,t)},t}(Phaser.Events.EventEmitter),Xi=zi,ji=function(e){function t(){for(var t,n,i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];return(n=e.call.apply(e,A()(t=[this]).call(t,a))||this).events=void 0,n.previousLayout=void 0,n.resizeEventData=void 0,n.portraitRatio=void 0,n.portraitWidth=void 0,n.portraitHeight=void 0,n.landscapeRatio=void 0,n.landscapeWidth=void 0,n.landscapeHeight=void 0,n.worldWidth=void 0,n.worldHeight=void 0,n.worldRatio=void 0,n.autoResize=void 0,n.disableLandscape=void 0,n.fullSizeOnLandscape=void 0,n.currentLayout=void 0,n.forcePixelRatio=void 0,n.handleResize=(0,Ki.D)((function(){n.previousLayout=""+n.currentLayout,n.initWorldSize(),n.resize()}),300),n}(0,o.Z)(t,e);var n=t.prototype;return n.configure=function(e){this.events=new Xi;var t=e.autoResize,n=e.portraitRatio,i=e.portraitWidth,a=e.portraitHeight,s=e.landscapeWidth,r=e.landscapeHeight,o=e.landscapeRatio,c=e.disableLandscape,h=e.fullSizeOnLandscape;this.autoResize=t,this.disableLandscape=c,this.fullSizeOnLandscape=h,this.portraitRatio=n,this.portraitWidth=i,this.portraitHeight=a,this.landscapeRatio=o,this.landscapeWidth=s,this.landscapeHeight=r,this.initWorldSize(),this.addEventResize()},n.resize=function(e){var t=this;e&&e>0&&(this.forcePixelRatio=e);var n=this.getCanvasSizeFixedRatio(this.worldRatio),i=n.width,a=n.height;this.resizeCanvas(i,a),this.game.scene.scenes.forEach((function(e){var n=e.cameras.main;if(n){var i=t.getZoomRatio(),a=t.getWorldSize(),s=a.width,r=a.height;n.setZoom(i),n.centerOn(s/2,r/2)}}));var s={width:this.worldWidth,height:this.worldHeight,isLayoutChanged:!1,newLayout:this.currentLayout};this.previousLayout!==this.currentLayout&&(s.isLayoutChanged=!0,s.newLayout=this.currentLayout),this.resizeEventData=s,this.events.emit(Yt.Z.RESIZE,s)},n.getResizeEventData=function(){return this.resizeEventData},n.resizeCanvas=function(e,t){this.game.canvas.width=e,this.game.canvas.height=t,this.game.scale.resize(e,t)},n.getWorldSize=function(){return{width:this.worldWidth,height:this.worldHeight}},n.initWorldSize=function(){if(this.worldWidth=this.portraitWidth,this.worldHeight=this.portraitHeight,this.isScreenSmallerRatio(this.portraitRatio))this.worldHeight=this.worldWidth/this.getScreenRatio(),this.currentLayout="portrait";else if(!this.disableLandscape&&(this.worldWidth=this.landscapeWidth,this.worldHeight=this.landscapeHeight,this.currentLayout="landscape",this.fullSizeOnLandscape)){this.worldRatio=this.worldWidth/this.worldHeight,this.landscapeRatio=this.getScreenRatio();var e=this.getCanvasSizeFixedRatio(this.landscapeRatio),t=e.width,n=e.height,i=this.getZoomRatio();this.worldWidth=t/i,this.worldHeight=n/i}this.worldRatio=this.worldWidth/this.worldHeight},n.getZoomRatio=function(){var e=this.getWorldSize().width;return this.getCanvasSizeFixedRatio(this.worldRatio).width/e},n.getPixelRatio=function(){if(this.forcePixelRatio>0)return this.forcePixelRatio;if(GameCore.Utils.Device.isDesktop())return 2;var e=GameCore.Utils.Device.pixelRatio();return e>2&&(e=2),e},n.getPhysicPixels=function(e,t){return e*t},n.getCanvasSizeFixedRatio=function(e){var t=this.getPixelRatio(),n=this.getScreenWidth()*t,i=this.getScreenHeight()*t;return this.isScreenSmallerRatio(e)?i=n/e:n=i*e,{width:n,height:i}},n.getScreenRatio=function(){return this.getScreenWidth()/this.getScreenHeight()},n.getScreenHeight=function(){var e=document,t=e.body,n=e.documentElement,i=t.clientHeight,a=n.clientHeight;return Math.max(a,i)||0},n.getScreenWidth=function(){var e=document,t=e.body,n=e.documentElement,i=t.clientWidth,a=n.clientWidth;return Math.max(a,i)||0},n.isScreenSmallerRatio=function(e){return this.getScreenRatio()<e},n.addEventResize=function(){this.autoResize&&window.addEventListener("resize",this.handleResize)},n.isLandscape=function(){return!this.disableLandscape&&this.worldRatio>this.portraitRatio},t}(Phaser.Plugins.BasePlugin),Ji=ji,qi=function(){function e(e,t,n){this.contextId=void 0,this.contextType=void 0,this.entryPointData=void 0,this.contextId=e||dn.contextId,this.contextType=t||dn.contextType,this.entryPointData=n||dn.entryPointData}return e.prototype.toObject=function(){return{contextId:this.contextId,contextType:this.contextType,entryPointData:this.entryPointData}},e}(),Qi=function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).name="InvalidPlayerId",i.message=t||"The playerId is not valid",i.payload=n,i}return(0,o.Z)(t,e),t}((0,w.Z)(Error)),$i="share_invite",ea="challenge_friend_match",ta="matching_group_match",na=n(447),ia=new Ve.Z("10","Your Friend",na.Z.AVATAR.FILE).toObject(),aa="single",sa="challenge-friends",ra="matching-group",oa="tournaments",ca="journey",ha=(0,Q.P1)([function(e){return e.context}],(function(e){return e})),la=(0,Q.P1)([function(e){return e.context.currentGameMode}],(function(e){return e})),ua=function(e,t){return{type:Qt.fJ,payload:{contextId:e,contextType:t}}},da=function(e){return function(t){t({type:Qt.EH,payload:{gameMode:e}}),(0,i.sw)("game-mode",e)}},pa={score:"score",settings:"settings",gameData:"gameData",userGuideDisplays:"userGuideDisplays"},ma=GameCore.Configs.SyncProfileFromAPI,ga=function(e){var t=this;this.game=void 0,this.initContext=function(){var e=window.GameSDK.context.getID(),n=window.GameSDK.context.getType(),i=window.GameSDK.getEntryPointData(),a=new qi(e,n,i).toObject(),s=a.contextId,r=a.contextType,o=a.entryPointData;t.game.storage.dispatch(function(e,t,n){return{type:Qt.kL,payload:{contextId:e,contextType:t,entryPointData:n}}}(s,r,o))},this.initPlayer=(0,r.Z)(u().mark((function e(){var n,i,a,s,r;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.game.player,i=t.getPlayerInfo(),a=ui()(pa),e.next=5,FBInstant.player.getDataAsync(a);case 5:return s=e.sent,r=new De(s),e.next=11,t.maintainDataStructure(r);case 11:return r=e.sent,!0===r.toObject().settings.music&&window.game.audio.playMusic(),e.next=16,n.receiveData(i,r.convertToPlayerData());case 16:case"end":return e.stop()}}),e)}))),this.maintainDataStructure=function(){var e=(0,r.Z)(u().mark((function e(t){var n,i,a,r;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,ma){e.next=3;break}return e.abrupt("return",t);case 3:return e.next=5,FBInstant.player.getDataAsync(["isSynced","customFields"]);case 5:if(e.t0=e.sent,e.t0){e.next=8;break}e.t0={};case 8:if(n=e.t0,!0!==(n.isSynced||!1)){e.next=12;break}return e.abrupt("return",t);case 12:if(i=n.customFields||!1){e.next=15;break}return e.abrupt("return",t);case 15:return(a=t.convertToPlayerData()).customFields=i,r=new De({}).convertToFacebookData(a),e.next=20,FBInstant.player.setDataAsync((0,s.Z)({},r,{isSynced:!0}));case 20:return e.abrupt("return",new De(r));case 23:return e.prev=23,e.t1=e.catch(0),e.abrupt("return",t);case 27:case"end":return e.stop()}}),e,null,[[0,23]])})));return function(t){return e.apply(this,arguments)}}(),this.getPlayerInfo=function(){try{var e=window.GameSDK.player.getID(),t=window.GameSDK.player.getName(),n=window.GameSDK.player.getPhoto(),i=window.GameSDK.getLocale();if(!GameCore.Utils.Valid.isString(e))throw new Qi(null,{playerId:e});return GameCore.Utils.Valid.isString(t)||(t="You"),new Ve.Z(e,t,n,i).toObject()}catch(a){return new Ve.Z("123","You").toObject()}},this.game=e},fa=n(203),Ea=function(e){function t(){for(var t,n,i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];return(n=e.call.apply(e,A()(t=[this]).call(t,a))||this).Text=void 0,n.Texture=void 0,n.currentLocale=void 0,n.supportedLanguages=void 0,n.data=void 0,n.options=void 0,n}(0,o.Z)(t,e);var n=t.prototype;return n.configure=function(e){this.applyOptions(e)},n.getCurrentLanguage=function(){return this.currentLocale},n.switchLanguage=function(e){void 0===e&&(e="en");var t=this.getCorrectLocale(e);this.currentLocale=t,this.Text=this.data[t].Text,this.Texture=this.data[t].Texture},n.getText=function(e){if("object"==typeof e){var t=e.key,n=e.variables,i=void 0===n?[]:n,a=e.locale,s=void 0===a?this.currentLocale:a,r=this.getCorrectLocale(s),o=this.data[r].Text[t];return this.replaceVariables(o,i)}return this.Text[e]},n.getTexture=function(e){if("object"==typeof e){var t=e.key,n=e.variables,i=void 0===n?[]:n,a=e.locale,s=void 0===a?this.currentLocale:a,r=this.getCorrectLocale(s),o=this.data[r].Texture[t];return this.replaceVariables(o,i)}return this.Texture[e]},n.isSupportLanguage=function(e){var t;return Rt()(t=this.supportedLanguages).call(t,e)>=0},n.applyOptions=function(e){this.options=(0,s.Z)({},e);var t=e.data,n=e.locale,i=void 0===n?"en":n,a=e.upperCaseText,r=void 0!==a&&a;this.data=t,this.supportedLanguages=H()(t);var o=this.getCorrectLocale(i);if(this.currentLocale=o,this.Text=t[o].Text,this.Texture=t[o].Texture,r)for(var c in this.Text)this.Text[c]=this.Text[c].toUpperCase()},n.makeText=function(e,t){var n,i=t.maxWidth,a=void 0===i?Phaser.Math.MAX_SAFE_INTEGER:i,s=t.maxHeight,r=void 0===s?Phaser.Math.MAX_SAFE_INTEGER:s,o=t.align,c=void 0===o?"center":o,h=t.drawMaxBoxDebug,l=void 0!==h&&h,u=e.make.bitmapText(t);for("center"===c?u.setCenterAlign():"left"===c?u.setLeftAlign():"right"===c&&u.setRightAlign(),Rt()(n=t.text||"").call(n," ")>=0&&u.setMaxWidth(a);u.width>a||u.height>=r;)u.setFontSize(.95*u.fontSize);if(l&&GameCore.Utils.Valid.isDebugger()){var d=e.game.globalScene.add.graphics({lineStyle:{width:2,color:16711680}});d.setDepth(Phaser.Math.MAX_SAFE_INTEGER),e.game.globalScene.events.on(Phaser.Scenes.Events.UPDATE,(function(){if(d.clear(),u&&u.visible&&u.active){var e=u.getWorldPosition(),t=e.x,n=e.y;d.strokeRect(t-.5*a+(.5-u.originX)*u.width,n-.5*r+(.5-u.originY)*u.height,a,r)}}))}return u},n.setFontSize=function(e,t,n){var i,a=t||Phaser.Math.MAX_SAFE_INTEGER,s=n||Phaser.Math.MAX_SAFE_INTEGER;for(Rt()(i=e.text||"").call(i," ")>=0&&e.setMaxWidth(a);e.width>a||e.height>=s;)e.setFontSize(.95*e.fontSize)},n.replaceVariables=function(e,t){var n=t.length;if(0==n)return e;var i=0;return e.replace(/{.*}/,(function(){return String(t[Math.min(i++,n-1)])}))},n.getCorrectLocale=function(e){var t=e;return this.isSupportLanguage(e)||(t="en"),t},t}(Phaser.Plugins.BasePlugin),va={en:JSON.parse('{"Text":{"POP JEWELS":"POP JEWELS","DAILY_REWARDS":"DAILY REWARDS","CLAIM":"CLAIM","CLAIM_X2":"CLAIM X2","DAY_{X}":"DAY {X}","PLAY_NOW":"PLAY NOW","PLAY_WITH_FRIENDS":"PLAY WITH FRIENDS","RANK":"RANK","DAILY":"DAILY","GIFT":"GIFT","SETTINGS":"SETTINGS","LEADERBOARDS":"LEADERBOARDS","PLAY":"PLAY","WITH_FRIENDS":"WITH FRIENDS","FRIENDS":"FRIENDS","WORLD":"WORLD","DAILY_MISSION":"DAILY MISSIONS","PASS_10_LEVELS":"PASS 10 LEVELS","COLLECT_300_DIAMONDS":"COLLECT 300 DIAMONDS","INVITE_2_FRIENDS":"INVITE 2 FRIENDS","REACH_TOTAL_SCORES":"REACH TOTAL SCORES","WATCH_A_VIDEO_TO_GET_{X}_DIAMONDS!":"WATCH A VIDEO TO GET\\\\n{X} DIAMONDS!","GET_NOW":"GET NOW!","TARGET":"TARGET","MISSION":"MISSION","YOUR_SCORE":"YOUR SCORE","LEVEL":"LEVEL","REQUESTING":"REQUESTING...","LOADING_INTERSTITIAL_AD":"LOADING INTERSTITIAL AD...","HAMMER":"HAMMER","HAMMER_DESCRIPTION":"USE HAMMER TO SMASH ANY GEM","MAGIC_BOTTLE":"MAGIC BOTTLE","MAGIC_BOTTLE_DESCRIPTION":"USE MAGIC BOTTLE TO CHANGE A GEM COLOR","LEVEL_FAILED":"LEVEL FAILED","FAILED_TEXT":"YOU DID NOT REACH THE TARGET SCORE","CONTINUE":"CONTINUE","BEST_SCORE":"BEST SCORE","GLOBAL":"GLOBAL","JOIN":"JOIN","REPLAY":"REPLAY","HOME":"HOME","TODAY_RECORD":"TODAY RECORD","SHARE":"SHARE","WAITING":"WAITING","WAITING_FOR_OPPONENT":"WAITING FOR OPPONENT","RESTART":"RESTART","DRAW":"DRAW","YOU_LOSE":"YOU LOSE","YOU_WIN":"YOU WIN","VS":"VS","GUIDE_TEXT_GEM":"TAP ON TWO OR MORE GEMS OF THE SAME COLOR TO DESTROY THEM","GUIDE_TEXT_CURRENT_SCORE":"THIS IS YOUR CURRENT SCORE","GUIDE_TEXT_TARGET_SCORE":"THIS IS THE TARGET SCORE FOR EACH LEVEL YOU NEED TO PASS","GUIDE_TEXT_RAINBOW_GEM":"RAINBOW GEM CAN CLEAR THE GEMS SURROUNDING IT","GUIDE_TEXT_HAMMER":"THIS IS A HAMMER, USE IT TO SMASH ANY GEM!","GUIDE_TEXT_SHUFFLE":"THIS IS A SHUFFLE TILE, USE IT TO SHUFFLE ALL GEMS","GUIDE_TEXT_MAGIC_BOTTLE":"THIS IS A MAGIC BOTTLE, USE IT TO CHANGE A GEM COLOUR","NO_ADS_TO_DISPLAY":"NO ADS TO DISPLAY!","NO_REWARDS":"SORRY, NO REWARDS!","CANCELLED_AD":"YOU HAVE CANCELLED THE AD!","LOADING":"LOADING...","LOADING_AD":"LOADING AD ...","YOU_HAVE_JUST_RECEIVED_{X}_DIAMONDS":"YOU HAVE JUST RECEIVED\\\\n{X} DIAMONDS","CLOSE":"CLOSE","LEADERBOARD_EMPTY":"Leaderboard is empty!","MESSAGE_INVITE":"{playerName} challenges you","MESSAGE_FINISH_MATCH":"{playerName} just finished. Check them now.","MESSAGE_BEST_SCORE":"{playerName} beat your high score. Their score: {playerScore}","MESSAGE_FINISH_TURN":"{playerName} got {score} scores. So easy! Can you?","SHARE_LEADERBOARDS":"A ha, I\'m the best!","SHARE_GAME_RESULTS":"Pheww, a great match!","SHARE_BEST_SCORE":"Great! I have a best score!","TARGET_SCORE":"Target score","NO_SPACE_LEFT":"NO SPACE LEFT!","FULL":"Full","LOADING_LEVEL":"Loading level","SCORE_REACHED":"SCORE REACHED!","WELL_DONE":"WELL DONE!","Level":"Level","Completed":"Completed","COMPLETED":"COMPLETED","Next_life":"Next life","MESS_TUTORIAL_1":"Place the block in the horizontal line\\nand see what happens!","MESS_TUTORIAL_2":"Now see what happens\\nwhen you make a vertical line.","MESS_TUTORIAL_3":"You can also make a 3x3 square.\\nGive it a try!","MESS_TUTORIAL_4":"Arrange lines and squares\\nto get combo points!","COMBO":"COMBO","STREAK":"STREAK","MESS_SKIP_TUTORIAL":"Are you sure you want\\nto skip the tutorial?","MESS_START_OVER":"Are you sure to start over?","MESS_TAKE_A_BREAK_ADS":"Take a break\\nAd display in %s...","POINTS":"POINTS","ON":"ON","OFF":"OFF","ROTATE":"ROTATE","ANONYMOUS":"Anonymous"},"Texture":{"NO_THANKS":"texts/no-thank","COOL":"texts/cool","CONGRATULATIONS":"texts/congratulation","EXCELLENT":"texts/excellent","GOOD":"texts/good","GREAT":"texts/great","LOGO":"logo","CONTINUE":"texts/continue"}}'),ru:JSON.parse('{"Text":{"POP JEWELS":"\u0412\u0417\u0420\u042b\u0412\u041d\u042b\u0415 \u0421\u0410\u041c\u041e\u0426\u0412\u0415\u0422\u042b","DAILY_REWARDS":"\u0415\u0416\u0415\u0414\u041d\u0415\u0412\u041d\u042b\u0415 \u041d\u0410\u0413\u0420\u0410\u0414\u042b","CLAIM":"\u041f\u043e\u043b\u0443\u0447\u0438\u0442\u044c","CLAIM_X2":"\u041f\u043e\u043b\u0443\u0447\u0438\u0442\u044c X2","DAY_{X}":"\u0414\u0415\u041d\u042c {X}","PLAY_NOW":"\u0418\u0413\u0420\u0410\u0422\u042c \u0421\u0415\u0419\u0427\u0410\u0421","PLAY_WITH_FRIENDS":"\u0418\u0413\u0420\u0410\u0422\u042c \u0421 \u0414\u0420\u0423\u0417\u042c\u042f\u041c\u0418","RANK":"\u041c\u0415\u0421\u0422\u041e","DAILY":"\u0415\u0416\u0415\u0414\u041d\u0415\u0412\u041d\u041e","GIFT":"\u041f\u041e\u0414\u0410\u0420\u041e\u041a","SETTINGS":"\u041d\u0410\u0421\u0422\u0420\u041e\u0419\u041a\u0418","LEADERBOARDS":"\u0422\u0410\u0411\u041b\u0418\u0426\u0410 \u041b\u0418\u0414\u0415\u0420\u041e\u0412","PLAY":"\u0418\u0413\u0420\u0410\u0422\u042c","WITH_FRIENDS":"\u0421 \u0414\u0420\u0423\u0417\u042c\u042f\u041c\u0418","FRIENDS":"\u0414\u0420\u0423\u0417\u042c\u042f","WORLD":"\u0412\u0415\u0421\u042c \u041c\u0418\u0420","DAILY_MISSION":"\u0415\u0416\u0415\u0414\u041d\u0415\u0412\u041d\u042b\u0415 \u041c\u0418\u0421\u0421\u0418\u0418","PASS_10_LEVELS":"\u041f\u0420\u041e\u0419\u0414\u0418 10 \u0423\u0420\u041e\u0412\u041d\u0415\u0419","COLLECT_300_DIAMONDS":"\u0421\u041e\u0411\u0415\u0420\u0418 300 \u0410\u041b\u041c\u0410\u0417\u041e\u0412","INVITE_2_FRIENDS":"\u041f\u0420\u0418\u0413\u041b\u0410\u0421\u0418 2 \u0414\u0420\u0423\u0417\u0415\u0419","REACH_TOTAL_SCORES":"\u041d\u0410\u0411\u0415\u0420\u0418 \u041e\u0411\u0429\u0415\u0415 \u0427\u0418\u0421\u041b\u041e \u041e\u0427\u041a\u041e\u0412","WATCH_A_VIDEO_TO_GET_{X}_DIAMONDS!":"\u041f\u041e\u0421\u041c\u041e\u0422\u0420\u0418 \u0412\u0418\u0414\u0415\u041e, \u0427\u0422\u041e\u0411\u042b \u041f\u041e\u041b\u0423\u0427\u0418\u0422\u042c\\n{X} \u0410\u041b\u041c\u0410\u0417\u041e\u0412!","GET_NOW":"\u041f\u041e\u041b\u0423\u0427\u0418 \u041f\u0420\u042f\u041c\u041e \u0421\u0415\u0419\u0427\u0410\u0421!","TARGET":"\u0426\u0415\u041b\u042c","MISSION":"\u041c\u0418\u0421\u0421\u0418\u042f","YOUR_SCORE":"\u0422\u0412\u041e\u0419 \u0420\u0415\u0417\u0423\u041b\u042c\u0422\u0410\u0422","LEVEL":"\u0423\u0420\u041e\u0412\u0415\u041d\u042c","REQUESTING":"\u0417\u0410\u041f\u0420\u041e\u0421...","LOADING_INTERSTITIAL_AD":"\u0417\u0410\u0413\u0420\u0423\u0417\u041a\u0410 \u041f\u0420\u041e\u041c\u0415\u0416\u0423\u0422\u041e\u0427\u041d\u041e\u0419 \u0420\u0415\u041a\u041b\u0410\u041c\u042b...","HAMMER":"\u041c\u041e\u041b\u041e\u0422\u041e\u041a","HAMMER_DESCRIPTION":"\u0418\u0421\u041f\u041e\u041b\u042c\u0417\u0423\u0419 \u041c\u041e\u041b\u041e\u0422\u041e\u041a, \u0427\u0422\u041e\u0411\u042b \u0420\u0410\u0417\u0411\u0418\u0422\u042c \u041b\u042e\u0411\u041e\u0419 \u0421\u0410\u041c\u041e\u0426\u0412\u0415\u0422","MAGIC_BOTTLE":"\u0412\u041e\u041b\u0428\u0415\u0411\u041d\u0410\u042f \u0411\u0423\u0422\u042b\u041b\u041a\u0410","MAGIC_BOTTLE_DESCRIPTION":"\u0418\u0421\u041f\u041e\u041b\u042c\u0417\u0423\u0419 \u0412\u041e\u041b\u0428\u0415\u0411\u041d\u0423\u042e \u0411\u0423\u0422\u042b\u041b\u041a\u0423, \u0427\u0422\u041e\u0411\u042b \u0418\u0417\u041c\u0415\u041d\u0418\u0422\u042c \u0426\u0412\u0415\u0422 \u0421\u0410\u041c\u041e\u0426\u0412\u0415\u0422\u0410","LEVEL_FAILED":"\u0423\u0420\u041e\u0412\u0415\u041d\u042c \u041d\u0415 \u041f\u0420\u041e\u0419\u0414\u0415\u041d","FAILED_TEXT":"\u0422\u042b \u041d\u0415 \u041d\u0410\u0411\u0420\u0410\u041b \u041d\u0423\u0416\u041d\u041e\u0415 \u0427\u0418\u0421\u041b\u041e \u041e\u0427\u041a\u041e\u0412","CONTINUE":"\u041f\u0420\u041e\u0414\u041e\u041b\u0416\u0418\u0422\u042c","BEST_SCORE":"\u041b\u0423\u0427\u0428\u0418\u0419 \u0420\u0415\u0417\u0423\u041b\u042c\u0422\u0410\u0422","GLOBAL":"\u0412\u0415\u0421\u042c \u041c\u0418\u0420","JOIN":"\u041f\u0420\u0418\u0421\u041e\u0415\u0414\u0418\u041d\u0418\u0422\u042c\u0421\u042f","REPLAY":"\u0418\u0413\u0420\u0410\u0422\u042c \u0417\u0410\u041d\u041e\u0412\u041e","HOME":"\u0414\u041e\u041c\u041e\u0419","TODAY_RECORD":"\u0421\u0415\u0413\u041e\u0414\u041d\u042f\u0428\u041d\u0418\u0419 \u0420\u0415\u0417\u0423\u041b\u042c\u0422\u0410\u0422","SHARE":"\u041f\u041e\u0414\u0415\u041b\u0418\u0422\u042c\u0421\u042f","WAITING":"\u041e\u0416\u0418\u0414\u0410\u041d\u0418\u0415","WAITING_FOR_OPPONENT":"\u041e\u0416\u0418\u0414\u0410\u041d\u0418\u0415 \u041e\u041f\u041f\u041e\u041d\u0415\u041d\u0422\u0410","RESTART":"\u041d\u0410\u0427\u0410\u0422\u042c \u0417\u0410\u041d\u041e\u0412\u041e","DRAW":"\u0416\u0415\u0420\u0415\u0411\u042c\u0415\u0412\u041a\u0410","YOU_LOSE":"\u0422\u042b \u041f\u0420\u041e\u0418\u0413\u0420\u0410\u0415\u0428\u042c","YOU_WIN":"\u0422\u042b \u0412\u042b\u0418\u0413\u0420\u0410\u0415\u0428\u042c","VS":"\u041f\u0420\u041e\u0422\u0418\u0412","GUIDE_TEXT_GEM":"\u041d\u0410\u0416\u041c\u0418 \u041d\u0410 \u0414\u0412\u0410 \u0418\u041b\u0418 \u0411\u041e\u041b\u042c\u0428\u0415 \u0421\u0410\u041c\u041e\u0426\u0412\u0415\u0422\u0410 \u041e\u0414\u041d\u041e\u0413\u041e \u0426\u0412\u0415\u0422\u0410, \u0427\u0422\u041e\u0411\u042b \u0423\u041d\u0418\u0427\u0422\u041e\u0416\u0418\u0422\u042c \u0418\u0425","GUIDE_TEXT_CURRENT_SCORE":"\u042d\u0422\u041e \u0422\u0412\u041e\u0419 \u0422\u0415\u041a\u0423\u0429\u0418\u0419 \u0420\u0415\u0417\u0423\u041b\u042c\u0422\u0410\u0422","GUIDE_TEXT_TARGET_SCORE":"\u042d\u0422\u041e \u041d\u0415\u041e\u0411\u0425\u041e\u0414\u0418\u041c\u042b\u0419 \u0420\u0415\u0417\u0423\u041b\u042c\u0422\u0410\u0422 \u0414\u041b\u042f \u041a\u0410\u0416\u0414\u041e\u0413\u041e \u0423\u0420\u041e\u0412\u041d\u042f, \u041a\u041e\u0422\u041e\u0420\u042b\u0419 \u0422\u0415\u0411\u0415 \u041d\u0423\u0416\u041d\u041e \u041f\u0420\u041e\u0419\u0422\u0418","GUIDE_TEXT_RAINBOW_GEM":"\u0420\u0410\u0414\u0423\u0416\u041d\u042b\u0419 \u0421\u0410\u041c\u041e\u0426\u0412\u0415\u0422 \u041c\u041e\u0416\u0415\u0422 \u0423\u0411\u0420\u0410\u0422\u042c \u0421\u0410\u041c\u041e\u0426\u0412\u0415\u0422\u042b, \u041a\u041e\u0422\u041e\u0420\u042b\u0415 \u0415\u0413\u041e \u041e\u041a\u0420\u0423\u0416\u0410\u042e\u0422","GUIDE_TEXT_HAMMER":"\u042d\u0422\u041e \u041c\u041e\u041b\u041e\u0422\u041e\u041a. \u0418\u0421\u041f\u041e\u041b\u042c\u0417\u0423\u0419 \u0415\u0413\u041e, \u0427\u0422\u041e\u0411\u042b \u0420\u0410\u0417\u0411\u0418\u0422\u042c \u041b\u042e\u0411\u041e\u0419 \u0421\u0410\u041c\u041e\u0426\u0412\u0415\u0422!","GUIDE_TEXT_SHUFFLE":"\u042d\u0422\u041e \u041f\u041b\u0418\u0422\u041a\u0410 \u041f\u0415\u0420\u0415\u041c\u0415\u0428\u0418\u0412\u0410\u041d\u0418\u042f. \u0418\u0421\u041f\u041e\u041b\u042c\u0417\u0423\u0419 \u0415\u0415, \u0427\u0422\u041e\u0411\u042b \u041f\u0415\u0420\u0415\u041c\u0415\u0428\u0410\u0422\u042c \u0412\u0421\u0415 \u0421\u0410\u041c\u041e\u0426\u0412\u0415\u0422\u042b","GUIDE_TEXT_MAGIC_BOTTLE":"\u042d\u0422\u041e \u0412\u041e\u041b\u0428\u0415\u0411\u041d\u0410\u042f \u0411\u0423\u0422\u042b\u041b\u041a\u0410. \u0418\u0421\u041f\u041e\u041b\u042c\u0417\u0423\u0419 \u0415\u0415, \u0427\u0422\u041e\u0411\u042b \u0418\u0417\u041c\u0415\u041d\u0418\u0422\u042c \u0426\u0412\u0415\u0422 \u0421\u0410\u041c\u041e\u0426\u0412\u0415\u0422\u0410","NO_ADS_TO_DISPLAY":"\u041d\u0415\u0422 \u0420\u0415\u041a\u041b\u0410\u041c\u042b \u0414\u041b\u042f \u041e\u0422\u041e\u0411\u0420\u0410\u0416\u0415\u041d\u0418\u042f!","NO_REWARDS":"\u0418\u0417\u0412\u0418\u041d\u0418, \u041d\u0410\u0413\u0420\u0410\u0414 \u041d\u0415\u0422!","CANCELLED_AD":"\u0422\u042b \u041e\u0422\u041a\u0410\u0417\u0410\u041b\u0421\u042f \u041e\u0422 \u041f\u0420\u041e\u0421\u041c\u041e\u0422\u0420\u0410 \u0420\u0415\u041a\u041b\u0410\u041c\u042b!","LOADING":"\u0417\u0410\u0413\u0420\u0423\u0417\u041a\u0410...","LOADING_AD":"\u0417\u0410\u0413\u0420\u0423\u0417\u041a\u0410 \u0420\u0415\u041a\u041b\u0410\u041c\u042b...","YOU_HAVE_JUST_RECEIVED_{X}_DIAMONDS":"\u0422\u042b \u0422\u041e\u041b\u042c\u041a\u041e \u0427\u0422\u041e \u041f\u041e\u041b\u0423\u0427\u0418\u041b\\n{X} \u0410\u041b\u041c\u0410\u0417\u041e\u0412","CLOSE":"\u0417\u0430\u043a\u0440\u044b\u0442\u044c","LEADERBOARD_EMPTY":"\u043f\u0443\u0441\u0442\u043e\u0439","MESSAGE_INVITE":"{Playername} \u0431\u0440\u043e\u0441\u0430\u0435\u0442 \u0432\u044b\u0437\u043e\u0432 \u0432\u0430\u043c","MESSAGE_FINISH_MATCH":"{Playername} \u0442\u043e\u043b\u044c\u043a\u043e \u0447\u0442\u043e \u0437\u0430\u043a\u043e\u043d\u0447\u0438\u043b. \u041f\u0440\u043e\u0432\u0435\u0440\u044c\u0442\u0435 \u0438\u0445 \u0441\u0435\u0439\u0447\u0430\u0441.","MESSAGE_BEST_SCORE":"{playername} \u043f\u043e\u0431\u0435\u0434\u0438\u043b \u0432\u0430\u0448 \u0432\u044b\u0441\u043e\u043a\u0438\u0439 \u0431\u0430\u043b\u043b. \u0418\u0445 \u043e\u0446\u0435\u043d\u043a\u0430: {\u0438\u0433\u0440\u043e\u043a\u0438}","MESSAGE_FINISH_TURN":"{Playername} \u043f\u043e\u043b\u0443\u0447\u0438\u043b \u043e\u0446\u0435\u043d\u043a\u0438. \u0422\u0430\u043a \u043f\u0440\u043e\u0441\u0442\u043e! \u0422\u044b \u043c\u043e\u0436\u0435\u0448\u044c?","SHARE_LEADERBOARDS":"\u0425\u0430, \u044f \u043b\u0443\u0447\u0448\u0438\u0439!","SHARE_GAME_RESULTS":"Pheww, \u043e\u0442\u043b\u0438\u0447\u043d\u044b\u0439 \u043c\u0430\u0442\u0447!","SHARE_BEST_SCORE":"\u0411\u043e\u043b\u044c\u0448\u043e\u0439! \u0423 \u043c\u0435\u043d\u044f \u0435\u0441\u0442\u044c \u043b\u0443\u0447\u0448\u0438\u0439 \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442!","TARGET_SCORE":"\u0426\u0435\u043b\u0435\u0432\u043e\u0439 \u0441\u0447\u0435\u0442","NO_SPACE_LEFT":"\u041c\u0415\u0421\u0422\u0410 \u041d\u0415 \u041e\u0421\u0422\u0410\u041b\u041e\u0421\u042c!","FULL":"\u041f\u043e\u043b\u043d\u044b\u0439","LOADING_LEVEL":"\u0417\u0410\u0413\u0420\u0423\u0417\u041a\u0410","SCORE_REACHED":"\u0421\u0427\u0415\u0422 \u0414\u041e\u0421\u0422\u0418\u0413\u041d\u0423\u0422!","WELL_DONE":"\u041e\u0422\u041b\u0418\u0427\u041d\u041e!","Level":"\u0423\u0440\u043e\u0432\u0435\u043d\u044c","Completed":"\u0417\u0430\u0432\u0435\u0440\u0448\u0435\u043d","COMPLETED":"\u0417\u0410\u0412\u0415\u0420\u0428\u0415\u041d","Next_life":"\u0421\u043b\u0435\u0434\u0443\u044e\u0449\u0430\u044f \u0436\u0438\u0437\u043d\u044c","MESS_TUTORIAL_1":"\u041f\u043e\u043c\u0435\u0441\u0442\u0438\u0442\u0435 \u0431\u043b\u043e\u043a \u0432 \u0433\u043e\u0440\u0438\u0437\u043e\u043d\u0442\u0430\u043b\u044c\u043d\u0443\u044e \u043b\u0438\u043d\u0438\u044e \\n\u0438 \u043f\u043e\u0441\u043c\u043e\u0442\u0440\u0438\u0442\u0435, \u0447\u0442\u043e \u043f\u043e\u043b\u0443\u0447\u0438\u0442\u0441\u044f!","MESS_TUTORIAL_2":"\u0410 \u0442\u0435\u043f\u0435\u0440\u044c \u043f\u043e\u0441\u043c\u043e\u0442\u0440\u0438\u0442\u0435, \u0447\u0442\u043e \u043f\u0440\u043e\u0438\u0441\u0445\u043e\u0434\u0438\u0442 \\n\u043a\u043e\u0433\u0434\u0430 \u0432\u044b \u043f\u0440\u043e\u0432\u043e\u0434\u0438\u0442\u0435 \u0432\u0435\u0440\u0442\u0438\u043a\u0430\u043b\u044c\u043d\u0443\u044e \u043b\u0438\u043d\u0438\u044e.","MESS_TUTORIAL_3":"\u0412\u044b \u0442\u0430\u043a\u0436\u0435 \u043c\u043e\u0436\u0435\u0442\u0435 \u0441\u0434\u0435\u043b\u0430\u0442\u044c \u043a\u0432\u0430\u0434\u0440\u0430\u0442 3x3.\\n\u041f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435!","MESS_TUTORIAL_4":"\u0421\u043e\u0441\u0442\u0430\u0432\u043b\u044f\u0439\u0442\u0435 \u043b\u0438\u043d\u0438\u0438 \u0438 \u043a\u0432\u0430\u0434\u0440\u0430\u0442\u044b \\n\u0447\u0442\u043e\u0431\u044b \u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c \u043a\u043e\u043c\u0431\u043e-\u043e\u0447\u043a\u0438!","COMBO":"\u041a\u041e\u041c\u0411\u041e","STREAK":"\u0421\u0422\u0420\u0418\u041a","MESS_SKIP_TUTORIAL":"\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b, \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435\\n\u043f\u0440\u043e\u043f\u0443\u0441\u0442\u0438\u0442\u044c \u0443\u0440\u043e\u043a?","MESS_START_OVER":"\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b, \u0447\u0442\u043e \u043d\u0430\u0447\u043d\u0435\u0442\u0435 \u0441\u043d\u0430\u0447\u0430\u043b\u0430?","MESS_TAKE_A_BREAK_ADS":"\u0421\u0434\u0435\u043b\u0430\u0439\u0442\u0435 \u043f\u0435\u0440\u0435\u0440\u044b\u0432\\n\u041f\u043e\u043a\u0430\u0437 \u0440\u0435\u043a\u043b\u0430\u043c\u044b \u0432 %s...","POINTS":"\u041f\u041e\u0418\u041d\u0422\u042b","ON":"\u0412\u041a\u041b","OFF":"\u0412\u042b\u041a\u041b","ROTATE":"\u041a\u0420\u0410\u041d","ANONYMOUS":"\u0410\u043d\u043e\u043d\u0438\u043c"},"Texture":{"NO_THANKS":"texts/no-thank","COOL":"texts/cool","CONGRATULATIONS":"texts/congratulation","EXCELLENT":"texts/excellent","GOOD":"texts/good","GREAT":"texts/great","LOGO":"logo","CONTINUE":"texts/continue"}}'),ja:JSON.parse('{"Text":{"POP JEWELS":"POP JEWELS","DAILY_REWARDS":"DAILY REWARDS","CLAIM":"CLAIM","CLAIM_X2":"CLAIM X2","DAY_{X}":"DAY {X}","PLAY_NOW":"PLAY NOW","PLAY_WITH_FRIENDS":"PLAY WITH FRIENDS","RANK":"RANK","DAILY":"DAILY","GIFT":"GIFT","SETTINGS":"SETTINGS","LEADERBOARDS":"LEADERBOARDS","PLAY":"PLAY","WITH_FRIENDS":"WITH FRIENDS","FRIENDS":"FRIENDS","WORLD":"WORLD","DAILY_MISSION":"DAILY MISSIONS","PASS_10_LEVELS":"PASS 10 LEVELS","COLLECT_300_DIAMONDS":"COLLECT 300 DIAMONDS","INVITE_2_FRIENDS":"INVITE 2 FRIENDS","REACH_TOTAL_SCORES":"REACH TOTAL SCORES","WATCH_A_VIDEO_TO_GET_{X}_DIAMONDS!":"WATCH A VIDEO TO GET\\\\n{X} DIAMONDS!","GET_NOW":"GET NOW!","TARGET":"TARGET","MISSION":"MISSION","YOUR_SCORE":"YOUR SCORE","LEVEL":"\u30ec\u30d9\u30eb","REQUESTING":"REQUESTING...","LOADING_INTERSTITIAL_AD":"LOADING INTERSTITIAL AD...","HAMMER":"HAMMER","HAMMER_DESCRIPTION":"USE HAMMER TO SMASH ANY GEM","MAGIC_BOTTLE":"MAGIC BOTTLE","MAGIC_BOTTLE_DESCRIPTION":"USE MAGIC BOTTLE TO CHANGE A GEM COLOR","LEVEL_FAILED":"LEVEL FAILED","FAILED_TEXT":"YOU DID NOT REACH THE TARGET SCORE","CONTINUE":"CONTINUE","BEST_SCORE":"BEST SCORE","GLOBAL":"GLOBAL","JOIN":"JOIN","REPLAY":"REPLAY","HOME":"HOME","TODAY_RECORD":"TODAY RECORD","SHARE":"SHARE","WAITING":"WAITING","WAITING_FOR_OPPONENT":"WAITING FOR OPPONENT","RESTART":"RESTART","DRAW":"DRAW","YOU_LOSE":"YOU LOSE","YOU_WIN":"YOU WIN","VS":"VS","GUIDE_TEXT_GEM":"TAP ON TWO OR MORE GEMS OF THE SAME COLOR TO DESTROY THEM","GUIDE_TEXT_CURRENT_SCORE":"THIS IS YOUR CURRENT SCORE","GUIDE_TEXT_TARGET_SCORE":"THIS IS THE TARGET SCORE FOR EACH LEVEL YOU NEED TO PASS","GUIDE_TEXT_RAINBOW_GEM":"RAINBOW GEM CAN CLEAR THE GEMS SURROUNDING IT","GUIDE_TEXT_HAMMER":"THIS IS A HAMMER, USE IT TO SMASH ANY GEM!","GUIDE_TEXT_SHUFFLE":"THIS IS A SHUFFLE TILE, USE IT TO SHUFFLE ALL GEMS","GUIDE_TEXT_MAGIC_BOTTLE":"THIS IS A MAGIC BOTTLE, USE IT TO CHANGE A GEM COLOUR","NO_ADS_TO_DISPLAY":"\u8868\u793a\u3067\u304d\u308b\u5e83\u544a\u306f\u3042\u308a\u307e\u305b\u3093\uff01","NO_REWARDS":"\u30ea\u30ef\u30fc\u30c9\u306f\u3042\u308a\u307e\u305b\u3093\uff01","CANCELLED_AD":"\u5e83\u544a\u3092\u30ad\u30e3\u30f3\u30bb\u30eb\u3057\u307e\u3057\u305f\uff01","LOADING":"\u8aad\u307f\u8fbc\u3093\u3067\u3044\u307e\u3059...","LOADING_AD":"\u5e83\u544a\u3092\u8aad\u307f\u8fbc\u307f\u4e2d...","YOU_HAVE_JUST_RECEIVED_{X}_DIAMONDS":"YOU HAVE JUST RECEIVED\\\\n{X} DIAMONDS","CLOSE":"CLOSE","LEADERBOARD_EMPTY":"\u30ea\u30fc\u30c0\u30fc\u30dc\u30fc\u30c9\u304c\u7a7a\u3063\u307d\uff01","MESSAGE_INVITE":"{playerName} challenges you","MESSAGE_FINISH_MATCH":"{playerName} just finished. Check them now.","MESSAGE_BEST_SCORE":"{playerName} beat your high score. Their score: {playerScore}","MESSAGE_FINISH_TURN":"{playerName} got {score} scores. So easy! Can you?","SHARE_LEADERBOARDS":"A ha, I\'m the best!","SHARE_GAME_RESULTS":"Pheww, a great match!","SHARE_BEST_SCORE":"Great! I have a best score!","TARGET_SCORE":"\u76ee\u6a19\u30b9\u30b3\u30a2","NO_SPACE_LEFT":"NO SPACE LEFT!","FULL":"Full","LOADING_LEVEL":"\u30ec\u30d9\u30eb\u3092\u8aad\u307f\u8fbc\u307f\u4e2d...","SCORE_REACHED":"\u30b9\u30b3\u30a2\u9054\u6210\uff01","WELL_DONE":"\u304a\u898b\u4e8b\uff01","Level":"\u30ec\u30d9\u30eb","Completed":"\u5b8c\u4e86","COMPLETED":"\u5b8c\u4e86","Next_life":"Next life","MESS_TUTORIAL_1":"Place the block in the horizontal line\\nand see what happens!","MESS_TUTORIAL_2":"Now see what happens\\nwhen you make a vertical line.","MESS_TUTORIAL_3":"You can also make a 3x3 square.\\nGive it a try!","MESS_TUTORIAL_4":"Arrange lines and squares\\nto get combo points!","COMBO":"\u30b3\u30f3\u30dc","STREAK":"STREAK","MESS_SKIP_TUTORIAL":"Are you sure you want\\nto skip the tutorial?","MESS_START_OVER":"Are you sure to start over?","MESS_TAKE_A_BREAK_ADS":"Take a break\\nAd display in %s...","POINTS":"\u30dd\u30a4\u30f3\u30c8","ON":"\u30aa\u30f3","OFF":"\u30aa\u30d5","ROTATE":"\u56de\u8ee2\u3055\u305b\u308b","ANONYMOUS":"\u533f\u540d"},"Texture":{"NO_THANKS":"texts/no-thank","COOL":"texts/cool","CONGRATULATIONS":"texts/congratulation","EXCELLENT":"texts/excellent","GOOD":"texts/good","GREAT":"texts/great","LOGO":"logo","CONTINUE":"texts/continue"}}'),id:JSON.parse('{"Text":{"POP JEWELS":"POP JEWELS","DAILY_REWARDS":"DAILY REWARDS","CLAIM":"CLAIM","CLAIM_X2":"CLAIM X2","DAY_{X}":"DAY {X}","PLAY_NOW":"PLAY NOW","PLAY_WITH_FRIENDS":"PLAY WITH FRIENDS","RANK":"RANK","DAILY":"DAILY","GIFT":"GIFT","SETTINGS":"SETTINGS","LEADERBOARDS":"LEADERBOARDS","PLAY":"PLAY","WITH_FRIENDS":"WITH FRIENDS","FRIENDS":"FRIENDS","WORLD":"WORLD","DAILY_MISSION":"DAILY MISSIONS","PASS_10_LEVELS":"PASS 10 LEVELS","COLLECT_300_DIAMONDS":"COLLECT 300 DIAMONDS","INVITE_2_FRIENDS":"INVITE 2 FRIENDS","REACH_TOTAL_SCORES":"REACH TOTAL SCORES","WATCH_A_VIDEO_TO_GET_{X}_DIAMONDS!":"WATCH A VIDEO TO GET\\\\n{X} DIAMONDS!","GET_NOW":"GET NOW!","TARGET":"TARGET","MISSION":"MISSION","YOUR_SCORE":"YOUR SCORE","LEVEL":"LEVEL","REQUESTING":"REQUESTING...","LOADING_INTERSTITIAL_AD":"LOADING INTERSTITIAL AD...","HAMMER":"HAMMER","HAMMER_DESCRIPTION":"USE HAMMER TO SMASH ANY GEM","MAGIC_BOTTLE":"MAGIC BOTTLE","MAGIC_BOTTLE_DESCRIPTION":"USE MAGIC BOTTLE TO CHANGE A GEM COLOR","LEVEL_FAILED":"LEVEL FAILED","FAILED_TEXT":"YOU DID NOT REACH THE TARGET SCORE","CONTINUE":"CONTINUE","BEST_SCORE":"BEST SCORE","GLOBAL":"GLOBAL","JOIN":"JOIN","REPLAY":"REPLAY","HOME":"HOME","TODAY_RECORD":"TODAY RECORD","SHARE":"SHARE","WAITING":"WAITING","WAITING_FOR_OPPONENT":"WAITING FOR OPPONENT","RESTART":"RESTART","DRAW":"DRAW","YOU_LOSE":"YOU LOSE","YOU_WIN":"YOU WIN","VS":"VS","GUIDE_TEXT_GEM":"TAP ON TWO OR MORE GEMS OF THE SAME COLOR TO DESTROY THEM","GUIDE_TEXT_CURRENT_SCORE":"THIS IS YOUR CURRENT SCORE","GUIDE_TEXT_TARGET_SCORE":"THIS IS THE TARGET SCORE FOR EACH LEVEL YOU NEED TO PASS","GUIDE_TEXT_RAINBOW_GEM":"RAINBOW GEM CAN CLEAR THE GEMS SURROUNDING IT","GUIDE_TEXT_HAMMER":"THIS IS A HAMMER, USE IT TO SMASH ANY GEM!","GUIDE_TEXT_SHUFFLE":"THIS IS A SHUFFLE TILE, USE IT TO SHUFFLE ALL GEMS","GUIDE_TEXT_MAGIC_BOTTLE":"THIS IS A MAGIC BOTTLE, USE IT TO CHANGE A GEM COLOUR","NO_ADS_TO_DISPLAY":"TIDAK ADA IKLAN UNTUK\\nDITAMPILKAN!","NO_REWARDS":"MAAF, TIDAK ADA HADIAH!","CANCELLED_AD":"KAMU TELAH MEMBATALKAN\\nIKLANNYA!","LOADING":"MEMUAT...","LOADING_AD":"MEMUAT IKLAN...","YOU_HAVE_JUST_RECEIVED_{X}_DIAMONDS":"YOU HAVE JUST RECEIVED\\\\n{X} DIAMONDS","CLOSE":"CLOSE","LEADERBOARD_EMPTY":"Papan peringkat kosong!","MESSAGE_INVITE":"{playerName} challenges you","MESSAGE_FINISH_MATCH":"{playerName} just finished. Check them now.","MESSAGE_BEST_SCORE":"{playerName} beat your high score. Their score: {playerScore}","MESSAGE_FINISH_TURN":"{playerName} got {score} scores. So easy! Can you?","SHARE_LEADERBOARDS":"A ha, I\'m the best!","SHARE_GAME_RESULTS":"Pheww, a great match!","SHARE_BEST_SCORE":"Hebat! Aku dapat skor terbaik!","TARGET_SCORE":"Skor Target","NO_SPACE_LEFT":"TIDAK ADA RUANG TERSISA!","FULL":"Penuh","LOADING_LEVEL":"Memuat level...","SCORE_REACHED":"SKOR TERCAPAI!","WELL_DONE":"KERJA BAGUS!","Level":"Level","Completed":"Selesai","COMPLETED":"SELESAI","Next_life":"Kehidupan selanjutnya","MESS_TUTORIAL_1":"Tempatkan blok dalam baris horizontal\\ndan lihat apa yang terjadi!","MESS_TUTORIAL_2":"Sekarang lihat apa yang\\nterjadi saat kamu membuat baris vertikal.","MESS_TUTORIAL_3":"Kamu juga bisa membuat kotak 3x3.\\nCobalah!","MESS_TUTORIAL_4":"Atur baris dan kotak untuk\\nmendapatkan poin kombo!","COMBO":"KOMBO","STREAK":"RENTETAN","MESS_SKIP_TUTORIAL":"Yakin ingin melewati tutorial?","MESS_TAKE_A_BREAK_ADS":"Take a break\\nAd display in %s...","UPDATING_NEW_LEVELS":"MEMPERBARUI LEVEL BARU...","RESTARTING_MAP":"MEMULAI ULANG PETA...","CANCEL":"Batalkan","OK":"OK","CONFIRM_START_OVER":"KONFIRMASI MULAI ULANG","MESS_START_OVER":"Yakin ingin mulai ulang?","POINTS":"POIN","ON":"Aktif","OFF":"Nonaktif","ROTATE":"PUTAR","ANONYMOUS":"Anonim"},"Texture":{"NO_THANKS":"texts/no-thank","COOL":"texts/cool","CONGRATULATIONS":"texts/congratulation","EXCELLENT":"texts/excellent","GOOD":"texts/good","GREAT":"texts/great","LOGO":"logo","CONTINUE":"texts/continue"}}'),ar:JSON.parse('{"Text":{"POP JEWELS":"POP JEWELS","DAILY_REWARDS":"DAILY REWARDS","CLAIM":"CLAIM","CLAIM_X2":"CLAIM X2","DAY_{X}":"DAY {X}","PLAY_NOW":"PLAY NOW","PLAY_WITH_FRIENDS":"PLAY WITH FRIENDS","RANK":"RANK","DAILY":"DAILY","GIFT":"GIFT","SETTINGS":"SETTINGS","LEADERBOARDS":"LEADERBOARDS","PLAY":"PLAY","WITH_FRIENDS":"WITH FRIENDS","FRIENDS":"FRIENDS","WORLD":"WORLD","DAILY_MISSION":"DAILY MISSIONS","PASS_10_LEVELS":"PASS 10 LEVELS","COLLECT_300_DIAMONDS":"COLLECT 300 DIAMONDS","INVITE_2_FRIENDS":"INVITE 2 FRIENDS","REACH_TOTAL_SCORES":"REACH TOTAL SCORES","WATCH_A_VIDEO_TO_GET_{X}_DIAMONDS!":"WATCH A VIDEO TO GET\\\\n{X} DIAMONDS!","GET_NOW":"GET NOW!","TARGET":"TARGET","MISSION":"MISSION","YOUR_SCORE":"YOUR SCORE","LEVEL":"\u0627\u0644\u0645\u0633\u062a\u0648\u0649","REQUESTING":"REQUESTING...","LOADING_INTERSTITIAL_AD":"LOADING INTERSTITIAL AD...","HAMMER":"HAMMER","HAMMER_DESCRIPTION":"USE HAMMER TO SMASH ANY GEM","MAGIC_BOTTLE":"MAGIC BOTTLE","MAGIC_BOTTLE_DESCRIPTION":"USE MAGIC BOTTLE TO CHANGE A GEM COLOR","LEVEL_FAILED":"LEVEL FAILED","FAILED_TEXT":"YOU DID NOT REACH THE TARGET SCORE","CONTINUE":"CONTINUE","BEST_SCORE":"BEST SCORE","GLOBAL":"GLOBAL","JOIN":"JOIN","REPLAY":"REPLAY","HOME":"HOME","TODAY_RECORD":"TODAY RECORD","SHARE":"SHARE","WAITING":"WAITING","WAITING_FOR_OPPONENT":"WAITING FOR OPPONENT","RESTART":"RESTART","DRAW":"DRAW","YOU_LOSE":"YOU LOSE","YOU_WIN":"YOU WIN","VS":"VS","GUIDE_TEXT_GEM":"TAP ON TWO OR MORE GEMS OF THE SAME COLOR TO DESTROY THEM","GUIDE_TEXT_CURRENT_SCORE":"THIS IS YOUR CURRENT SCORE","GUIDE_TEXT_TARGET_SCORE":"THIS IS THE TARGET SCORE FOR EACH LEVEL YOU NEED TO PASS","GUIDE_TEXT_RAINBOW_GEM":"RAINBOW GEM CAN CLEAR THE GEMS SURROUNDING IT","GUIDE_TEXT_HAMMER":"THIS IS A HAMMER, USE IT TO SMASH ANY GEM!","GUIDE_TEXT_SHUFFLE":"THIS IS A SHUFFLE TILE, USE IT TO SHUFFLE ALL GEMS","GUIDE_TEXT_MAGIC_BOTTLE":"THIS IS A MAGIC BOTTLE, USE IT TO CHANGE A GEM COLOUR","NO_ADS_TO_DISPLAY":"\u0644\u0627 \u062a\u0648\u062c\u062f \u0625\u0639\u0644\u0627\u0646\u0627\u062a \u0644\u0644\u0639\u0631\u0636!","NO_REWARDS":"\u0639\u0630\u0631\u064b\u0627\u060c \u0644\u0627 \u062a\u0648\u062c\u062f \u062c\u0648\u0627\u0626\u0632!","CANCELLED_AD":"\u0644\u0642\u062f \u0642\u0645\u062a \u0628\u0625\u0644\u063a\u0627\u0621 \u0627\u0644\u0625\u0639\u0644\u0627\u0646!","LOADING":"\u062c\u0627\u0631\u064d \u0627\u0644\u062a\u062d\u0645\u064a\u0644...","LOADING_AD":"\u062c\u0627\u0631\u064d \u062a\u062d\u0645\u064a\u0644 \u0627\u0644\u0625\u0639\u0644\u0627\u0646...","YOU_HAVE_JUST_RECEIVED_{X}_DIAMONDS":"YOU HAVE JUST RECEIVED\\\\n{X} DIAMONDS","CLOSE":"CLOSE","LEADERBOARD_EMPTY":"\u0642\u0627\u0626\u0645\u0629 \u0627\u0644\u0645\u062a\u0635\u062f\u0631\u064a\u0646 \u0641\u0627\u0631\u063a\u0629!","MESSAGE_INVITE":"{playerName} challenges you","MESSAGE_FINISH_MATCH":"{playerName} just finished. Check them now.","MESSAGE_BEST_SCORE":"{playerName} beat your high score. Their score: {playerScore}","MESSAGE_FINISH_TURN":"{playerName} got {score} scores. So easy! Can you?","SHARE_LEADERBOARDS":"A ha, I\'m the best!","SHARE_GAME_RESULTS":"Pheww, a great match!","SHARE_BEST_SCORE":"Great! I have a best score!","TARGET_SCORE":"\u0627\u0644\u0646\u062a\u064a\u062c\u0629 \u0627\u0644\u0647\u062f\u0641","NO_SPACE_LEFT":"NO SPACE LEFT!","FULL":"Full","LOADING_LEVEL":"\u062c\u0627\u0631 \u062a\u062d\u0645\u064a\u0644 \u0627\u0644\u0645\u0633\u062a\u0648\u0649...","SCORE_REACHED":"\u062a\u0645 \u062a\u062d\u0642\u064a\u0642 \u0627\u0644\u0646\u062a\u064a\u062c\u0629!","WELL_DONE":"\u0623\u062d\u0633\u0646\u062a!","Level":"\u0627\u0644\u0645\u0633\u062a\u0648\u0649","Completed":"\u0627\u0643\u062a\u0645\u0644","COMPLETED":"\u0627\u0643\u062a\u0645\u0644","Next_life":"Next life","MESS_TUTORIAL_1":"Place the block in the horizontal line\\nand see what happens!","MESS_TUTORIAL_2":"Now see what happens\\nwhen you make a vertical line.","MESS_TUTORIAL_3":"You can also make a 3x3 square.\\nGive it a try!","MESS_TUTORIAL_4":"Arrange lines and squares\\nto get combo points!","COMBO":"COMBO","STREAK":"STREAK","MESS_SKIP_TUTORIAL":"Are you sure you want\\nto skip the tutorial?","MESS_START_OVER":"Are you sure to start over?","MESS_TAKE_A_BREAK_ADS":"Take a break\\nAd display in %s...","POINTS":"\u0646\u0642\u0627\u0637","ON":"\u062a\u0634\u063a\u064a\u0644","OFF":"\u0625\u064a\u0642\u0627\u0641\\n\u0627\u0644\u062a\u0634\u063a\u064a\u0644","ROTATE":"\u0642\u0645 \u0628\u0644\u0641\u0647","ANONYMOUS":"\u0645\u062c\u0647\u0648\u0644"},"Texture":{"NO_THANKS":"texts/no-thank","COOL":"texts/cool","CONGRATULATIONS":"texts/congratulation","EXCELLENT":"texts/excellent","GOOD":"texts/good","GREAT":"texts/great","LOGO":"logo","CONTINUE":"texts/continue"}}'),zh:JSON.parse('{"Text":{"POP JEWELS":"POP JEWELS","DAILY_REWARDS":"DAILY REWARDS","CLAIM":"CLAIM","CLAIM_X2":"CLAIM X2","DAY_{X}":"DAY {X}","PLAY_NOW":"PLAY NOW","PLAY_WITH_FRIENDS":"PLAY WITH FRIENDS","RANK":"RANK","DAILY":"DAILY","GIFT":"GIFT","SETTINGS":"SETTINGS","LEADERBOARDS":"LEADERBOARDS","PLAY":"PLAY","WITH_FRIENDS":"WITH FRIENDS","FRIENDS":"FRIENDS","WORLD":"WORLD","DAILY_MISSION":"DAILY MISSIONS","PASS_10_LEVELS":"PASS 10 LEVELS","COLLECT_300_DIAMONDS":"COLLECT 300 DIAMONDS","INVITE_2_FRIENDS":"INVITE 2 FRIENDS","REACH_TOTAL_SCORES":"REACH TOTAL SCORES","WATCH_A_VIDEO_TO_GET_{X}_DIAMONDS!":"WATCH A VIDEO TO GET\\\\n{X} DIAMONDS!","GET_NOW":"GET NOW!","TARGET":"TARGET","MISSION":"MISSION","YOUR_SCORE":"YOUR SCORE","LEVEL":"\u5173\u5361","REQUESTING":"REQUESTING...","LOADING_INTERSTITIAL_AD":"LOADING INTERSTITIAL AD...","HAMMER":"HAMMER","HAMMER_DESCRIPTION":"USE HAMMER TO SMASH ANY GEM","MAGIC_BOTTLE":"MAGIC BOTTLE","MAGIC_BOTTLE_DESCRIPTION":"USE MAGIC BOTTLE TO CHANGE A GEM COLOR","LEVEL_FAILED":"LEVEL FAILED","FAILED_TEXT":"YOU DID NOT REACH THE TARGET SCORE","CONTINUE":"CONTINUE","BEST_SCORE":"BEST SCORE","GLOBAL":"GLOBAL","JOIN":"JOIN","REPLAY":"REPLAY","HOME":"HOME","TODAY_RECORD":"TODAY RECORD","SHARE":"SHARE","WAITING":"WAITING","WAITING_FOR_OPPONENT":"WAITING FOR OPPONENT","RESTART":"RESTART","DRAW":"DRAW","YOU_LOSE":"YOU LOSE","YOU_WIN":"YOU WIN","VS":"VS","GUIDE_TEXT_GEM":"TAP ON TWO OR MORE GEMS OF THE SAME COLOR TO DESTROY THEM","GUIDE_TEXT_CURRENT_SCORE":"THIS IS YOUR CURRENT SCORE","GUIDE_TEXT_TARGET_SCORE":"THIS IS THE TARGET SCORE FOR EACH LEVEL YOU NEED TO PASS","GUIDE_TEXT_RAINBOW_GEM":"RAINBOW GEM CAN CLEAR THE GEMS SURROUNDING IT","GUIDE_TEXT_HAMMER":"THIS IS A HAMMER, USE IT TO SMASH ANY GEM!","GUIDE_TEXT_SHUFFLE":"THIS IS A SHUFFLE TILE, USE IT TO SHUFFLE ALL GEMS","GUIDE_TEXT_MAGIC_BOTTLE":"THIS IS A MAGIC BOTTLE, USE IT TO CHANGE A GEM COLOUR","NO_ADS_TO_DISPLAY":"\u6ca1\u6709\u53ef\u64ad\u653e\u7684\u5e7f\u544a\uff01","NO_REWARDS":"\u62b1\u6b49\uff0c\u6ca1\u6709\u5956\u52b1\uff01","CANCELLED_AD":"\u4f60\u5df2\u53d6\u6d88\u4e86\u5e7f\u544a\uff01","LOADING":"\u52a0\u8f7d\u4e2d\u2026\u2026","LOADING_AD":"\u52a0\u8f7d\u5e7f\u544a\u4e2d\u2026\u2026","YOU_HAVE_JUST_RECEIVED_{X}_DIAMONDS":"YOU HAVE JUST RECEIVED\\\\n{X} DIAMONDS","CLOSE":"CLOSE","LEADERBOARD_EMPTY":"\u6392\u884c\u699c\u4e3a\u7a7a\uff01","MESSAGE_INVITE":"{playerName} challenges you","MESSAGE_FINISH_MATCH":"{playerName} just finished. Check them now.","MESSAGE_BEST_SCORE":"{playerName} beat your high score. Their score: {playerScore}","MESSAGE_FINISH_TURN":"{playerName} got {score} scores. So easy! Can you?","SHARE_LEADERBOARDS":"A ha, I\'m the best!","SHARE_GAME_RESULTS":"Pheww, a great match!","SHARE_BEST_SCORE":"Great! I have a best score!","TARGET_SCORE":"\u76ee\u6807\u5206\u6570","NO_SPACE_LEFT":"NO SPACE LEFT!","FULL":"Full","LOADING_LEVEL":"\u52a0\u8f7d\u5173\u5361\u2026\u2026","SCORE_REACHED":"\u5206\u6570\u8fbe\u6210\uff01","WELL_DONE":"\u505a\u5f97\u597d\uff01","Level":"\u5173\u5361","Completed":"\u5df2\u5b8c\u6210","COMPLETED":"\u5df2\u5b8c\u6210","Next_life":"Next life","MESS_TUTORIAL_1":"Place the block in the horizontal line\\nand see what happens!","MESS_TUTORIAL_2":"Now see what happens\\nwhen you make a vertical line.","MESS_TUTORIAL_3":"You can also make a 3x3 square.\\nGive it a try!","MESS_TUTORIAL_4":"Arrange lines and squares\\nto get combo points!","COMBO":"COMBO","STREAK":"STREAK","MESS_SKIP_TUTORIAL":"Are you sure you want\\nto skip the tutorial?","MESS_START_OVER":"Are you sure to start over?","MESS_TAKE_A_BREAK_ADS":"Take a break\\nAd display in %s...","POINTS":"\u70b9\u6570","ON":"\u5f00\u542f","OFF":"\u5173\u95ed","ROTATE":"\u65cb\u8f6c","ANONYMOUS":"\u533f\u540d\u7684"},"Texture":{"NO_THANKS":"texts/no-thank","COOL":"texts/cool","CONGRATULATIONS":"texts/congratulation","EXCELLENT":"texts/excellent","GOOD":"texts/good","GREAT":"texts/great","LOGO":"logo","CONTINUE":"texts/continue"}}'),fr:JSON.parse('{"Text":{"POP JEWELS":"POP JEWELS","DAILY_REWARDS":"DAILY REWARDS","CLAIM":"CLAIM","CLAIM_X2":"CLAIM X2","DAY_{X}":"DAY {X}","PLAY_NOW":"PLAY NOW","PLAY_WITH_FRIENDS":"PLAY WITH FRIENDS","RANK":"RANK","DAILY":"DAILY","GIFT":"GIFT","SETTINGS":"SETTINGS","LEADERBOARDS":"LEADERBOARDS","PLAY":"PLAY","WITH_FRIENDS":"WITH FRIENDS","FRIENDS":"FRIENDS","WORLD":"WORLD","DAILY_MISSION":"DAILY MISSIONS","PASS_10_LEVELS":"PASS 10 LEVELS","COLLECT_300_DIAMONDS":"COLLECT 300 DIAMONDS","INVITE_2_FRIENDS":"INVITE 2 FRIENDS","REACH_TOTAL_SCORES":"REACH TOTAL SCORES","WATCH_A_VIDEO_TO_GET_{X}_DIAMONDS!":"WATCH A VIDEO TO GET\\\\n{X} DIAMONDS!","GET_NOW":"GET NOW!","TARGET":"TARGET","MISSION":"MISSION","YOUR_SCORE":"YOUR SCORE","LEVEL":"NIVEAU","REQUESTING":"REQUESTING...","LOADING_INTERSTITIAL_AD":"LOADING INTERSTITIAL AD...","HAMMER":"HAMMER","HAMMER_DESCRIPTION":"USE HAMMER TO SMASH ANY GEM","MAGIC_BOTTLE":"MAGIC BOTTLE","MAGIC_BOTTLE_DESCRIPTION":"USE MAGIC BOTTLE TO CHANGE A GEM COLOR","LEVEL_FAILED":"LEVEL FAILED","FAILED_TEXT":"YOU DID NOT REACH THE TARGET SCORE","CONTINUE":"CONTINUE","BEST_SCORE":"BEST SCORE","GLOBAL":"GLOBAL","JOIN":"JOIN","REPLAY":"REPLAY","HOME":"HOME","TODAY_RECORD":"TODAY RECORD","SHARE":"SHARE","WAITING":"WAITING","WAITING_FOR_OPPONENT":"WAITING FOR OPPONENT","RESTART":"RESTART","DRAW":"DRAW","YOU_LOSE":"YOU LOSE","YOU_WIN":"YOU WIN","VS":"VS","GUIDE_TEXT_GEM":"TAP ON TWO OR MORE GEMS OF THE SAME COLOR TO DESTROY THEM","GUIDE_TEXT_CURRENT_SCORE":"THIS IS YOUR CURRENT SCORE","GUIDE_TEXT_TARGET_SCORE":"THIS IS THE TARGET SCORE FOR EACH LEVEL YOU NEED TO PASS","GUIDE_TEXT_RAINBOW_GEM":"RAINBOW GEM CAN CLEAR THE GEMS SURROUNDING IT","GUIDE_TEXT_HAMMER":"THIS IS A HAMMER, USE IT TO SMASH ANY GEM!","GUIDE_TEXT_SHUFFLE":"THIS IS A SHUFFLE TILE, USE IT TO SHUFFLE ALL GEMS","GUIDE_TEXT_MAGIC_BOTTLE":"THIS IS A MAGIC BOTTLE, USE IT TO CHANGE A GEM COLOUR","NO_ADS_TO_DISPLAY":"AUCUNE PUBLICIT\xc9 \xc0 AFFICHER!","NO_REWARDS":"D\xc9SOL\xc9, AUCUNE R\xc9COMPENSE!","CANCELLED_AD":"VOUS AVEZ ANNUL\xc9 LA PUBLICIT\xc9!","LOADING":"CHARGEMENT...","LOADING_AD":"CHARGEMENT DE LA PUBLICIT\xc9...","YOU_HAVE_JUST_RECEIVED_{X}_DIAMONDS":"YOU HAVE JUST RECEIVED\\\\n{X} DIAMONDS","CLOSE":"CLOSE","LEADERBOARD_EMPTY":"Le classement est vide!","MESSAGE_INVITE":"{playerName} challenges you","MESSAGE_FINISH_MATCH":"{playerName} just finished. Check them now.","MESSAGE_BEST_SCORE":"{playerName} beat your high score. Their score: {playerScore}","MESSAGE_FINISH_TURN":"{playerName} got {score} scores. So easy! Can you?","SHARE_LEADERBOARDS":"A ha, I\'m the best!","SHARE_GAME_RESULTS":"Pheww, a great match!","SHARE_BEST_SCORE":"Great! I have a best score!","TARGET_SCORE":"Score cible","NO_SPACE_LEFT":"NO SPACE LEFT!","FULL":"Full","LOADING_LEVEL":"Chargement du niveau...","SCORE_REACHED":"SCORE ATTEINT!","WELL_DONE":"BIEN JOU\xc9!","Level":"Niveau","Completed":"Termin\xe9","COMPLETED":"TERMIN\xc9","Next_life":"Next life","MESS_TUTORIAL_1":"Place the block in the horizontal line\\nand see what happens!","MESS_TUTORIAL_2":"Now see what happens\\nwhen you make a vertical line.","MESS_TUTORIAL_3":"You can also make a 3x3 square.\\nGive it a try!","MESS_TUTORIAL_4":"Arrange lines and squares\\nto get combo points!","COMBO":"COMBO","STREAK":"STREAK","MESS_SKIP_TUTORIAL":"Are you sure you want\\nto skip the tutorial?","MESS_START_OVER":"Are you sure to start over?","MESS_TAKE_A_BREAK_ADS":"Take a break\\nAd display in %s...","POINTS":"POINTS","ON":"On","OFF":"OFF","ROTATE":"PIVOTER","ANONYMOUS":"Anonyme"},"Texture":{"NO_THANKS":"texts/no-thank","COOL":"texts/cool","CONGRATULATIONS":"texts/congratulation","EXCELLENT":"texts/excellent","GOOD":"texts/good","GREAT":"texts/great","LOGO":"logo","CONTINUE":"texts/continue"}}'),de:JSON.parse('{"Text":{"POP JEWELS":"POP JEWELS","DAILY_REWARDS":"DAILY REWARDS","CLAIM":"CLAIM","CLAIM_X2":"CLAIM X2","DAY_{X}":"DAY {X}","PLAY_NOW":"PLAY NOW","PLAY_WITH_FRIENDS":"PLAY WITH FRIENDS","RANK":"RANK","DAILY":"DAILY","GIFT":"GIFT","SETTINGS":"SETTINGS","LEADERBOARDS":"LEADERBOARDS","PLAY":"PLAY","WITH_FRIENDS":"WITH FRIENDS","FRIENDS":"FRIENDS","WORLD":"WORLD","DAILY_MISSION":"DAILY MISSIONS","PASS_10_LEVELS":"PASS 10 LEVELS","COLLECT_300_DIAMONDS":"COLLECT 300 DIAMONDS","INVITE_2_FRIENDS":"INVITE 2 FRIENDS","REACH_TOTAL_SCORES":"REACH TOTAL SCORES","WATCH_A_VIDEO_TO_GET_{X}_DIAMONDS!":"WATCH A VIDEO TO GET\\\\n{X} DIAMONDS!","GET_NOW":"GET NOW!","TARGET":"TARGET","MISSION":"MISSION","YOUR_SCORE":"YOUR SCORE","LEVEL":"LEVEL","REQUESTING":"REQUESTING...","LOADING_INTERSTITIAL_AD":"LOADING INTERSTITIAL AD...","HAMMER":"HAMMER","HAMMER_DESCRIPTION":"USE HAMMER TO SMASH ANY GEM","MAGIC_BOTTLE":"MAGIC BOTTLE","MAGIC_BOTTLE_DESCRIPTION":"USE MAGIC BOTTLE TO CHANGE A GEM COLOR","LEVEL_FAILED":"LEVEL FAILED","FAILED_TEXT":"YOU DID NOT REACH THE TARGET SCORE","CONTINUE":"CONTINUE","BEST_SCORE":"BEST SCORE","GLOBAL":"GLOBAL","JOIN":"JOIN","REPLAY":"REPLAY","HOME":"HOME","TODAY_RECORD":"TODAY RECORD","SHARE":"SHARE","WAITING":"WAITING","WAITING_FOR_OPPONENT":"WAITING FOR OPPONENT","RESTART":"RESTART","DRAW":"DRAW","YOU_LOSE":"YOU LOSE","YOU_WIN":"YOU WIN","VS":"VS","GUIDE_TEXT_GEM":"TAP ON TWO OR MORE GEMS OF THE SAME COLOR TO DESTROY THEM","GUIDE_TEXT_CURRENT_SCORE":"THIS IS YOUR CURRENT SCORE","GUIDE_TEXT_TARGET_SCORE":"THIS IS THE TARGET SCORE FOR EACH LEVEL YOU NEED TO PASS","GUIDE_TEXT_RAINBOW_GEM":"RAINBOW GEM CAN CLEAR THE GEMS SURROUNDING IT","GUIDE_TEXT_HAMMER":"THIS IS A HAMMER, USE IT TO SMASH ANY GEM!","GUIDE_TEXT_SHUFFLE":"THIS IS A SHUFFLE TILE, USE IT TO SHUFFLE ALL GEMS","GUIDE_TEXT_MAGIC_BOTTLE":"THIS IS A MAGIC BOTTLE, USE IT TO CHANGE A GEM COLOUR","NO_ADS_TO_DISPLAY":"KEINE WERBUNG VERF\xdcGBAR!","NO_REWARDS":"TUT UNS LEID, KEINE BELOHNUNGEN!","CANCELLED_AD":"DU HAST DIE WERBUNG\\nABGEBROCHEN!","LOADING":"LADEN...","LOADING_AD":"LADE WERBUNG...","YOU_HAVE_JUST_RECEIVED_{X}_DIAMONDS":"YOU HAVE JUST RECEIVED\\\\n{X} DIAMONDS","CLOSE":"CLOSE","LEADERBOARD_EMPTY":"Bestenliste ist leer!","MESSAGE_INVITE":"{playerName} challenges you","MESSAGE_FINISH_MATCH":"{playerName} just finished. Check them now.","MESSAGE_BEST_SCORE":"{playerName} beat your high score. Their score: {playerScore}","MESSAGE_FINISH_TURN":"{playerName} got {score} scores. So easy! Can you?","SHARE_LEADERBOARDS":"A ha, I\'m the best!","SHARE_GAME_RESULTS":"Pheww, a great match!","SHARE_BEST_SCORE":"Great! I have a best score!","TARGET_SCORE":"Zielpunktzahl","NO_SPACE_LEFT":"NO SPACE LEFT!","FULL":"Full","LOADING_LEVEL":"Lade Level...","SCORE_REACHED":"PUNKTZAHL ERREICHT!","WELL_DONE":"GUT GEMACHT!","Level":"Level","Completed":"Abgeschlossen","COMPLETED":"ABGESCHLOSSEN","Next_life":"Next life","MESS_TUTORIAL_1":"Place the block in the horizontal line\\nand see what happens!","MESS_TUTORIAL_2":"Now see what happens\\nwhen you make a vertical line.","MESS_TUTORIAL_3":"You can also make a 3x3 square.\\nGive it a try!","MESS_TUTORIAL_4":"Arrange lines and squares\\nto get combo points!","COMBO":"COMBO","STREAK":"STREAK","MESS_SKIP_TUTORIAL":"Are you sure you want\\nto skip the tutorial?","MESS_START_OVER":"Are you sure to start over?","MESS_TAKE_A_BREAK_ADS":"Take a break\\nAd display in %s...","POINTS":"PUNKTE","ON":"An","OFF":"Aus","ROTATE":"ROTIEREN","ANONYMOUS":"Anonym"},"Texture":{"NO_THANKS":"texts/no-thank","COOL":"texts/cool","CONGRATULATIONS":"texts/congratulation","EXCELLENT":"texts/excellent","GOOD":"texts/good","GREAT":"texts/great","LOGO":"logo","CONTINUE":"texts/continue"}}'),hi:JSON.parse('{"Text":{"POP JEWELS":"POP JEWELS","DAILY_REWARDS":"DAILY REWARDS","CLAIM":"CLAIM","CLAIM_X2":"CLAIM X2","DAY_{X}":"DAY {X}","PLAY_NOW":"PLAY NOW","PLAY_WITH_FRIENDS":"PLAY WITH FRIENDS","RANK":"RANK","DAILY":"DAILY","GIFT":"GIFT","SETTINGS":"SETTINGS","LEADERBOARDS":"LEADERBOARDS","PLAY":"PLAY","WITH_FRIENDS":"WITH FRIENDS","FRIENDS":"FRIENDS","WORLD":"WORLD","DAILY_MISSION":"DAILY MISSIONS","PASS_10_LEVELS":"PASS 10 LEVELS","COLLECT_300_DIAMONDS":"COLLECT 300 DIAMONDS","INVITE_2_FRIENDS":"INVITE 2 FRIENDS","REACH_TOTAL_SCORES":"REACH TOTAL SCORES","WATCH_A_VIDEO_TO_GET_{X}_DIAMONDS!":"WATCH A VIDEO TO GET\\\\n{X} DIAMONDS!","GET_NOW":"GET NOW!","TARGET":"TARGET","MISSION":"MISSION","YOUR_SCORE":"YOUR SCORE","LEVEL":"\u0932\u0947\u0935\u0932","REQUESTING":"REQUESTING...","LOADING_INTERSTITIAL_AD":"LOADING INTERSTITIAL AD...","HAMMER":"HAMMER","HAMMER_DESCRIPTION":"USE HAMMER TO SMASH ANY GEM","MAGIC_BOTTLE":"MAGIC BOTTLE","MAGIC_BOTTLE_DESCRIPTION":"USE MAGIC BOTTLE TO CHANGE A GEM COLOR","LEVEL_FAILED":"LEVEL FAILED","FAILED_TEXT":"YOU DID NOT REACH THE TARGET SCORE","CONTINUE":"CONTINUE","BEST_SCORE":"BEST SCORE","GLOBAL":"GLOBAL","JOIN":"JOIN","REPLAY":"REPLAY","HOME":"HOME","TODAY_RECORD":"TODAY RECORD","SHARE":"SHARE","WAITING":"WAITING","WAITING_FOR_OPPONENT":"WAITING FOR OPPONENT","RESTART":"RESTART","DRAW":"DRAW","YOU_LOSE":"YOU LOSE","YOU_WIN":"YOU WIN","VS":"VS","GUIDE_TEXT_GEM":"TAP ON TWO OR MORE GEMS OF THE SAME COLOR TO DESTROY THEM","GUIDE_TEXT_CURRENT_SCORE":"THIS IS YOUR CURRENT SCORE","GUIDE_TEXT_TARGET_SCORE":"THIS IS THE TARGET SCORE FOR EACH LEVEL YOU NEED TO PASS","GUIDE_TEXT_RAINBOW_GEM":"RAINBOW GEM CAN CLEAR THE GEMS SURROUNDING IT","GUIDE_TEXT_HAMMER":"THIS IS A HAMMER, USE IT TO SMASH ANY GEM!","GUIDE_TEXT_SHUFFLE":"THIS IS A SHUFFLE TILE, USE IT TO SHUFFLE ALL GEMS","GUIDE_TEXT_MAGIC_BOTTLE":"THIS IS A MAGIC BOTTLE, USE IT TO CHANGE A GEM COLOUR","NO_ADS_TO_DISPLAY":"\u0921\u093f\u0938\u094d\u092a\u094d\u0932\u0947 \u0915\u0930\u0928\u0947 \u0915\u0947 \u0932\u093f\u090f \u0915\u094b\u0908 \u0935\u093f\u091c\u094d\u091e\u093e\u092a\u0928 \u0928\u0939\u0940\u0902 \u0939\u0948\u0902!","NO_REWARDS":"\u092e\u093e\u095e \u0915\u0930\u0947\u0902, \u0915\u094b\u0908 \u0930\u093f\u0935\u0949\u0930\u094d\u0921 \u0928\u0939\u0940\u0902 \u0939\u0948\u0902!","CANCELLED_AD":"\u0906\u092a\u0928\u0947 \u0935\u093f\u091c\u094d\u091e\u093e\u092a\u0928 \u0915\u094b \u0915\u0948\u0902\u0938\u0932 \u0915\u0930 \u0926\u093f\u092f\u093e \u0939\u0948!","LOADING":"\u0932\u094b\u0921 \u0939\u094b \u0930\u0939\u093e \u0939\u0948...","LOADING_AD":"\u0935\u093f\u091c\u094d\u091e\u093e\u092a\u0928 \u0932\u094b\u0921 \u0939\u094b \u0930\u0939\u093e \u0939\u0948...","YOU_HAVE_JUST_RECEIVED_{X}_DIAMONDS":"YOU HAVE JUST RECEIVED\\\\n{X} DIAMONDS","CLOSE":"CLOSE","LEADERBOARD_EMPTY":"\u0932\u0940\u0921\u0930\u092c\u094b\u0930\u094d\u0921 \u0916\u093e\u0932\u0940 \u0939\u0948!","MESSAGE_INVITE":"{playerName} challenges you","MESSAGE_FINISH_MATCH":"{playerName} just finished. Check them now.","MESSAGE_BEST_SCORE":"{playerName} beat your high score. Their score: {playerScore}","MESSAGE_FINISH_TURN":"{playerName} got {score} scores. So easy! Can you?","SHARE_LEADERBOARDS":"A ha, I\'m the best!","SHARE_GAME_RESULTS":"Pheww, a great match!","SHARE_BEST_SCORE":"Great! I have a best score!","TARGET_SCORE":"\u091f\u093e\u0930\u0917\u0947\u091f \u0938\u094d\u0915\u094b\u0930","NO_SPACE_LEFT":"NO SPACE LEFT!","FULL":"Full","LOADING_LEVEL":"\u0932\u0947\u0935\u0932 \u0932\u094b\u0921 \u0939\u094b \u0930\u0939\u093e \u0939\u0948...","SCORE_REACHED":"\u0938\u094d\u0915\u094b\u0930 \u0924\u0915 \u092a\u0939\u0941\u0902\u091a \u0917\u090f!","WELL_DONE":"\u0905\u091a\u094d\u091b\u093e \u0915\u093f\u092f\u093e!","Level":"\u0932\u0947\u0935\u0932","Completed":"\u092a\u0942\u0930\u093e \u0939\u0941\u0906","COMPLETED":"\u092a\u0942\u0930\u093e \u0939\u0941\u0906","Next_life":"Next life","MESS_TUTORIAL_1":"Place the block in the horizontal line\\nand see what happens!","MESS_TUTORIAL_2":"Now see what happens\\nwhen you make a vertical line.","MESS_TUTORIAL_3":"You can also make a 3x3 square.\\nGive it a try!","MESS_TUTORIAL_4":"Arrange lines and squares\\nto get combo points!","COMBO":"COMBO","STREAK":"STREAK","MESS_SKIP_TUTORIAL":"Are you sure you want\\nto skip the tutorial?","MESS_START_OVER":"Are you sure to start over?","MESS_TAKE_A_BREAK_ADS":"Take a break\\nAd display in %s...","POINTS":"\u092a\u0949\u0907\u0902\u091f\u094d\u0938","ON":"\u091a\u093e\u0932\u0942","OFF":"\u092c\u0902\u0926","ROTATE":"\u0918\u0941\u092e\u093e\u090f\u0902","ANONYMOUS":"\u0905\u0928\u093e\u092e"},"Texture":{"NO_THANKS":"texts/no-thank","COOL":"texts/cool","CONGRATULATIONS":"texts/congratulation","EXCELLENT":"texts/excellent","GOOD":"texts/good","GREAT":"texts/great","LOGO":"logo","CONTINUE":"texts/continue"}}'),it:JSON.parse('{"Text":{"POP JEWELS":"POP JEWELS","DAILY_REWARDS":"DAILY REWARDS","CLAIM":"CLAIM","CLAIM_X2":"CLAIM X2","DAY_{X}":"DAY {X}","PLAY_NOW":"PLAY NOW","PLAY_WITH_FRIENDS":"PLAY WITH FRIENDS","RANK":"RANK","DAILY":"DAILY","GIFT":"GIFT","SETTINGS":"SETTINGS","LEADERBOARDS":"LEADERBOARDS","PLAY":"PLAY","WITH_FRIENDS":"WITH FRIENDS","FRIENDS":"FRIENDS","WORLD":"WORLD","DAILY_MISSION":"DAILY MISSIONS","PASS_10_LEVELS":"PASS 10 LEVELS","COLLECT_300_DIAMONDS":"COLLECT 300 DIAMONDS","INVITE_2_FRIENDS":"INVITE 2 FRIENDS","REACH_TOTAL_SCORES":"REACH TOTAL SCORES","WATCH_A_VIDEO_TO_GET_{X}_DIAMONDS!":"WATCH A VIDEO TO GET\\\\n{X} DIAMONDS!","GET_NOW":"GET NOW!","TARGET":"TARGET","MISSION":"MISSION","YOUR_SCORE":"YOUR SCORE","LEVEL":"LIVELLO","REQUESTING":"REQUESTING...","LOADING_INTERSTITIAL_AD":"LOADING INTERSTITIAL AD...","HAMMER":"HAMMER","HAMMER_DESCRIPTION":"USE HAMMER TO SMASH ANY GEM","MAGIC_BOTTLE":"MAGIC BOTTLE","MAGIC_BOTTLE_DESCRIPTION":"USE MAGIC BOTTLE TO CHANGE A GEM COLOR","LEVEL_FAILED":"LEVEL FAILED","FAILED_TEXT":"YOU DID NOT REACH THE TARGET SCORE","CONTINUE":"CONTINUE","BEST_SCORE":"BEST SCORE","GLOBAL":"GLOBAL","JOIN":"JOIN","REPLAY":"REPLAY","HOME":"HOME","TODAY_RECORD":"TODAY RECORD","SHARE":"SHARE","WAITING":"WAITING","WAITING_FOR_OPPONENT":"WAITING FOR OPPONENT","RESTART":"RESTART","DRAW":"DRAW","YOU_LOSE":"YOU LOSE","YOU_WIN":"YOU WIN","VS":"VS","GUIDE_TEXT_GEM":"TAP ON TWO OR MORE GEMS OF THE SAME COLOR TO DESTROY THEM","GUIDE_TEXT_CURRENT_SCORE":"THIS IS YOUR CURRENT SCORE","GUIDE_TEXT_TARGET_SCORE":"THIS IS THE TARGET SCORE FOR EACH LEVEL YOU NEED TO PASS","GUIDE_TEXT_RAINBOW_GEM":"RAINBOW GEM CAN CLEAR THE GEMS SURROUNDING IT","GUIDE_TEXT_HAMMER":"THIS IS A HAMMER, USE IT TO SMASH ANY GEM!","GUIDE_TEXT_SHUFFLE":"THIS IS A SHUFFLE TILE, USE IT TO SHUFFLE ALL GEMS","GUIDE_TEXT_MAGIC_BOTTLE":"THIS IS A MAGIC BOTTLE, USE IT TO CHANGE A GEM COLOUR","NO_ADS_TO_DISPLAY":"NESSUN ANNUNCIO DA VISUALIZZARE","NO_REWARDS":"SPIACENTE, NESSUNA RICOMPENSA!","CANCELLED_AD":"HAI CANCELLATO L\'ANNUNCIO!","LOADING":"CARICAMENTO...","LOADING_AD":"CARICAMENTO ANNUNCIO...","YOU_HAVE_JUST_RECEIVED_{X}_DIAMONDS":"YOU HAVE JUST RECEIVED\\\\n{X} DIAMONDS","CLOSE":"CLOSE","LEADERBOARD_EMPTY":"La classifica \xe8 vuota!","MESSAGE_INVITE":"{playerName} challenges you","MESSAGE_FINISH_MATCH":"{playerName} just finished. Check them now.","MESSAGE_BEST_SCORE":"{playerName} beat your high score. Their score: {playerScore}","MESSAGE_FINISH_TURN":"{playerName} got {score} scores. So easy! Can you?","SHARE_LEADERBOARDS":"A ha, I\'m the best!","SHARE_GAME_RESULTS":"Pheww, a great match!","SHARE_BEST_SCORE":"Great! I have a best score!","TARGET_SCORE":"Punteggio obiettivo","NO_SPACE_LEFT":"NO SPACE LEFT!","FULL":"Full","LOADING_LEVEL":"Caricamento livello...","SCORE_REACHED":"PUNTEGGIO RAGGIUNTO!","WELL_DONE":"BEN FATTO!","Level":"Livello","Completed":"Completato","COMPLETED":"COMPLETATO","Next_life":"Next life","MESS_TUTORIAL_1":"Place the block in the horizontal line\\nand see what happens!","MESS_TUTORIAL_2":"Now see what happens\\nwhen you make a vertical line.","MESS_TUTORIAL_3":"You can also make a 3x3 square.\\nGive it a try!","MESS_TUTORIAL_4":"Arrange lines and squares\\nto get combo points!","COMBO":"COMBO","STREAK":"STREAK","MESS_SKIP_TUTORIAL":"Are you sure you want\\nto skip the tutorial?","MESS_START_OVER":"Are you sure to start over?","MESS_TAKE_A_BREAK_ADS":"Take a break\\nAd display in %s...","POINTS":"PUNTI","ON":"Attivato","OFF":"Disattivato","ROTATE":"RUOTA","ANONYMOUS":"Anonimo"},"Texture":{"NO_THANKS":"texts/no-thank","COOL":"texts/cool","CONGRATULATIONS":"texts/congratulation","EXCELLENT":"texts/excellent","GOOD":"texts/good","GREAT":"texts/great","LOGO":"logo","CONTINUE":"texts/continue"}}'),pt:JSON.parse('{"Text":{"POP JEWELS":"POP JEWELS","DAILY_REWARDS":"DAILY REWARDS","CLAIM":"CLAIM","CLAIM_X2":"CLAIM X2","DAY_{X}":"DAY {X}","PLAY_NOW":"PLAY NOW","PLAY_WITH_FRIENDS":"PLAY WITH FRIENDS","RANK":"RANK","DAILY":"DAILY","GIFT":"GIFT","SETTINGS":"SETTINGS","LEADERBOARDS":"LEADERBOARDS","PLAY":"PLAY","WITH_FRIENDS":"WITH FRIENDS","FRIENDS":"FRIENDS","WORLD":"WORLD","DAILY_MISSION":"DAILY MISSIONS","PASS_10_LEVELS":"PASS 10 LEVELS","COLLECT_300_DIAMONDS":"COLLECT 300 DIAMONDS","INVITE_2_FRIENDS":"INVITE 2 FRIENDS","REACH_TOTAL_SCORES":"REACH TOTAL SCORES","WATCH_A_VIDEO_TO_GET_{X}_DIAMONDS!":"WATCH A VIDEO TO GET\\\\n{X} DIAMONDS!","GET_NOW":"GET NOW!","TARGET":"TARGET","MISSION":"MISSION","YOUR_SCORE":"YOUR SCORE","LEVEL":"N\xcdVEL","REQUESTING":"REQUESTING...","LOADING_INTERSTITIAL_AD":"LOADING INTERSTITIAL AD...","HAMMER":"HAMMER","HAMMER_DESCRIPTION":"USE HAMMER TO SMASH ANY GEM","MAGIC_BOTTLE":"MAGIC BOTTLE","MAGIC_BOTTLE_DESCRIPTION":"USE MAGIC BOTTLE TO CHANGE A GEM COLOR","LEVEL_FAILED":"LEVEL FAILED","FAILED_TEXT":"YOU DID NOT REACH THE TARGET SCORE","CONTINUE":"CONTINUE","BEST_SCORE":"BEST SCORE","GLOBAL":"GLOBAL","JOIN":"JOIN","REPLAY":"REPLAY","HOME":"HOME","TODAY_RECORD":"TODAY RECORD","SHARE":"SHARE","WAITING":"WAITING","WAITING_FOR_OPPONENT":"WAITING FOR OPPONENT","RESTART":"RESTART","DRAW":"DRAW","YOU_LOSE":"YOU LOSE","YOU_WIN":"YOU WIN","VS":"VS","GUIDE_TEXT_GEM":"TAP ON TWO OR MORE GEMS OF THE SAME COLOR TO DESTROY THEM","GUIDE_TEXT_CURRENT_SCORE":"THIS IS YOUR CURRENT SCORE","GUIDE_TEXT_TARGET_SCORE":"THIS IS THE TARGET SCORE FOR EACH LEVEL YOU NEED TO PASS","GUIDE_TEXT_RAINBOW_GEM":"RAINBOW GEM CAN CLEAR THE GEMS SURROUNDING IT","GUIDE_TEXT_HAMMER":"THIS IS A HAMMER, USE IT TO SMASH ANY GEM!","GUIDE_TEXT_SHUFFLE":"THIS IS A SHUFFLE TILE, USE IT TO SHUFFLE ALL GEMS","GUIDE_TEXT_MAGIC_BOTTLE":"THIS IS A MAGIC BOTTLE, USE IT TO CHANGE A GEM COLOUR","NO_ADS_TO_DISPLAY":"N\xc3O H\xc1 AN\xdaNCIOS PARA MOSTRAR!","NO_REWARDS":"DESCULPA, N\xc3O H\xc1 RECOMPENSAS!","CANCELLED_AD":"CANCELASTE O AN\xdaNCIO!","LOADING":"A CARREGAR...","LOADING_AD":"A CARREGAR AN\xdaNCIO...","YOU_HAVE_JUST_RECEIVED_{X}_DIAMONDS":"YOU HAVE JUST RECEIVED\\\\n{X} DIAMONDS","CLOSE":"CLOSE","LEADERBOARD_EMPTY":"A tabela de classifica\xe7\xe3o\\nest\xe1 vazia!","MESSAGE_INVITE":"{playerName} challenges you","MESSAGE_FINISH_MATCH":"{playerName} just finished. Check them now.","MESSAGE_BEST_SCORE":"{playerName} beat your high score. Their score: {playerScore}","MESSAGE_FINISH_TURN":"{playerName} got {score} scores. So easy! Can you?","SHARE_LEADERBOARDS":"A ha, I\'m the best!","SHARE_GAME_RESULTS":"Pheww, a great match!","SHARE_BEST_SCORE":"Great! I have a best score!","TARGET_SCORE":"Pontua\xe7\xe3o alvo","NO_SPACE_LEFT":"NO SPACE LEFT!","FULL":"Full","LOADING_LEVEL":"A cargar n\xedvel...","SCORE_REACHED":"PONTUA\xc7\xc3O ATINGIDA!","WELL_DONE":"BEM FEITO!","Level":"N\xedvel","Completed":"Conclu\xeddo","COMPLETED":"CONCLU\xcdDO","Next_life":"Next life","MESS_TUTORIAL_1":"Place the block in the horizontal line\\nand see what happens!","MESS_TUTORIAL_2":"Now see what happens\\nwhen you make a vertical line.","MESS_TUTORIAL_3":"You can also make a 3x3 square.\\nGive it a try!","MESS_TUTORIAL_4":"Arrange lines and squares\\nto get combo points!","COMBO":"COMBO","STREAK":"STREAK","MESS_SKIP_TUTORIAL":"Are you sure you want\\nto skip the tutorial?","MESS_START_OVER":"Are you sure to start over?","MESS_TAKE_A_BREAK_ADS":"Take a break\\nAd display in %s...","POINTS":"PONTOS","ON":"Ligado","OFF":"Desligado","ROTATE":"GIRAR","ANONYMOUS":"An\xf3nimo"},"Texture":{"NO_THANKS":"texts/no-thank","COOL":"texts/cool","CONGRATULATIONS":"texts/congratulation","EXCELLENT":"texts/excellent","GOOD":"texts/good","GREAT":"texts/great","LOGO":"logo","CONTINUE":"texts/continue"}}'),es:JSON.parse('{"Text":{"POP JEWELS":"POP JEWELS","DAILY_REWARDS":"DAILY REWARDS","CLAIM":"CLAIM","CLAIM_X2":"CLAIM X2","DAY_{X}":"DAY {X}","PLAY_NOW":"PLAY NOW","PLAY_WITH_FRIENDS":"PLAY WITH FRIENDS","RANK":"RANK","DAILY":"DAILY","GIFT":"GIFT","SETTINGS":"SETTINGS","LEADERBOARDS":"LEADERBOARDS","PLAY":"PLAY","WITH_FRIENDS":"WITH FRIENDS","FRIENDS":"FRIENDS","WORLD":"WORLD","DAILY_MISSION":"DAILY MISSIONS","PASS_10_LEVELS":"PASS 10 LEVELS","COLLECT_300_DIAMONDS":"COLLECT 300 DIAMONDS","INVITE_2_FRIENDS":"INVITE 2 FRIENDS","REACH_TOTAL_SCORES":"REACH TOTAL SCORES","WATCH_A_VIDEO_TO_GET_{X}_DIAMONDS!":"WATCH A VIDEO TO GET\\\\n{X} DIAMONDS!","GET_NOW":"GET NOW!","TARGET":"TARGET","MISSION":"MISSION","YOUR_SCORE":"YOUR SCORE","LEVEL":"Nivel","REQUESTING":"REQUESTING...","LOADING_INTERSTITIAL_AD":"LOADING INTERSTITIAL AD...","HAMMER":"HAMMER","HAMMER_DESCRIPTION":"USE HAMMER TO SMASH ANY GEM","MAGIC_BOTTLE":"MAGIC BOTTLE","MAGIC_BOTTLE_DESCRIPTION":"USE MAGIC BOTTLE TO CHANGE A GEM COLOR","LEVEL_FAILED":"LEVEL FAILED","FAILED_TEXT":"YOU DID NOT REACH THE TARGET SCORE","CONTINUE":"CONTINUE","BEST_SCORE":"BEST SCORE","GLOBAL":"GLOBAL","JOIN":"JOIN","REPLAY":"REPLAY","HOME":"HOME","TODAY_RECORD":"TODAY RECORD","SHARE":"SHARE","WAITING":"WAITING","WAITING_FOR_OPPONENT":"WAITING FOR OPPONENT","RESTART":"RESTART","DRAW":"DRAW","YOU_LOSE":"YOU LOSE","YOU_WIN":"YOU WIN","VS":"VS","GUIDE_TEXT_GEM":"TAP ON TWO OR MORE GEMS OF THE SAME COLOR TO DESTROY THEM","GUIDE_TEXT_CURRENT_SCORE":"THIS IS YOUR CURRENT SCORE","GUIDE_TEXT_TARGET_SCORE":"THIS IS THE TARGET SCORE FOR EACH LEVEL YOU NEED TO PASS","GUIDE_TEXT_RAINBOW_GEM":"RAINBOW GEM CAN CLEAR THE GEMS SURROUNDING IT","GUIDE_TEXT_HAMMER":"THIS IS A HAMMER, USE IT TO SMASH ANY GEM!","GUIDE_TEXT_SHUFFLE":"THIS IS A SHUFFLE TILE, USE IT TO SHUFFLE ALL GEMS","GUIDE_TEXT_MAGIC_BOTTLE":"THIS IS A MAGIC BOTTLE, USE IT TO CHANGE A GEM COLOUR","NO_ADS_TO_DISPLAY":"\xa1NO HAY ANUNCIOS PARA MOSTRAR!","NO_REWARDS":"LO SENTIMOS, NO HAY RECOMPENSAS","CANCELLED_AD":"\xa1HAS CANCELADO EL ANUNCIO!","LOADING":"CARGANDO...","LOADING_AD":"CARGANDO ANUNCIO...","YOU_HAVE_JUST_RECEIVED_{X}_DIAMONDS":"YOU HAVE JUST RECEIVED\\\\n{X} DIAMONDS","CLOSE":"CLOSE","LEADERBOARD_EMPTY":"\xa1La tabla de clasificaci\xf3n\\nest\xe1 vac\xeda!","MESSAGE_INVITE":"{playerName} challenges you","MESSAGE_FINISH_MATCH":"{playerName} just finished. Check them now.","MESSAGE_BEST_SCORE":"{playerName} beat your high score. Their score: {playerScore}","MESSAGE_FINISH_TURN":"{playerName} got {score} scores. So easy! Can you?","SHARE_LEADERBOARDS":"A ha, I\'m the best!","SHARE_GAME_RESULTS":"Pheww, a great match!","SHARE_BEST_SCORE":"Great! I have a best score!","TARGET_SCORE":"Puntuaci\xf3n objetivo","NO_SPACE_LEFT":"NO SPACE LEFT!","FULL":"Full","LOADING_LEVEL":"Cargando nivel...","SCORE_REACHED":"\xa1PUNTUACI\xd3N ALCANZADA!","WELL_DONE":"\xa1BIEN HECHO!","Level":"Nivel","Completed":"Completo","COMPLETED":"Completo","Next_life":"Next life","MESS_TUTORIAL_1":"Place the block in the horizontal line\\nand see what happens!","MESS_TUTORIAL_2":"Now see what happens\\nwhen you make a vertical line.","MESS_TUTORIAL_3":"You can also make a 3x3 square.\\nGive it a try!","MESS_TUTORIAL_4":"Arrange lines and squares\\nto get combo points!","COMBO":"COMBO","STREAK":"STREAK","MESS_SKIP_TUTORIAL":"Are you sure you want\\nto skip the tutorial?","MESS_START_OVER":"Are you sure to start over?","MESS_TAKE_A_BREAK_ADS":"Take a break\\nAd display in %s...","POINTS":"PUNTOS","ON":"Encendido","OFF":"Apagado","ROTATE":"GIRAR","ANONYMOUS":"An\xf3nimo"},"Texture":{"NO_THANKS":"texts/no-thank","COOL":"texts/cool","CONGRATULATIONS":"texts/congratulation","EXCELLENT":"texts/excellent","GOOD":"texts/good","GREAT":"texts/great","LOGO":"logo","CONTINUE":"texts/continue"}}'),tr:JSON.parse('{"Text":{"POP JEWELS":"POP JEWELS","DAILY_REWARDS":"DAILY REWARDS","CLAIM":"CLAIM","CLAIM_X2":"CLAIM X2","DAY_{X}":"DAY {X}","PLAY_NOW":"PLAY NOW","PLAY_WITH_FRIENDS":"PLAY WITH FRIENDS","RANK":"RANK","DAILY":"DAILY","GIFT":"GIFT","SETTINGS":"SETTINGS","LEADERBOARDS":"LEADERBOARDS","PLAY":"PLAY","WITH_FRIENDS":"WITH FRIENDS","FRIENDS":"FRIENDS","WORLD":"WORLD","DAILY_MISSION":"DAILY MISSIONS","PASS_10_LEVELS":"PASS 10 LEVELS","COLLECT_300_DIAMONDS":"COLLECT 300 DIAMONDS","INVITE_2_FRIENDS":"INVITE 2 FRIENDS","REACH_TOTAL_SCORES":"REACH TOTAL SCORES","WATCH_A_VIDEO_TO_GET_{X}_DIAMONDS!":"WATCH A VIDEO TO GET\\\\n{X} DIAMONDS!","GET_NOW":"GET NOW!","TARGET":"TARGET","MISSION":"MISSION","YOUR_SCORE":"YOUR SCORE","LEVEL":"Seviye","REQUESTING":"REQUESTING...","LOADING_INTERSTITIAL_AD":"LOADING INTERSTITIAL AD...","HAMMER":"HAMMER","HAMMER_DESCRIPTION":"USE HAMMER TO SMASH ANY GEM","MAGIC_BOTTLE":"MAGIC BOTTLE","MAGIC_BOTTLE_DESCRIPTION":"USE MAGIC BOTTLE TO CHANGE A GEM COLOR","LEVEL_FAILED":"LEVEL FAILED","FAILED_TEXT":"YOU DID NOT REACH THE TARGET SCORE","CONTINUE":"CONTINUE","BEST_SCORE":"BEST SCORE","GLOBAL":"GLOBAL","JOIN":"JOIN","REPLAY":"REPLAY","HOME":"HOME","TODAY_RECORD":"TODAY RECORD","SHARE":"SHARE","WAITING":"WAITING","WAITING_FOR_OPPONENT":"WAITING FOR OPPONENT","RESTART":"RESTART","DRAW":"DRAW","YOU_LOSE":"YOU LOSE","YOU_WIN":"YOU WIN","VS":"VS","GUIDE_TEXT_GEM":"TAP ON TWO OR MORE GEMS OF THE SAME COLOR TO DESTROY THEM","GUIDE_TEXT_CURRENT_SCORE":"THIS IS YOUR CURRENT SCORE","GUIDE_TEXT_TARGET_SCORE":"THIS IS THE TARGET SCORE FOR EACH LEVEL YOU NEED TO PASS","GUIDE_TEXT_RAINBOW_GEM":"RAINBOW GEM CAN CLEAR THE GEMS SURROUNDING IT","GUIDE_TEXT_HAMMER":"THIS IS A HAMMER, USE IT TO SMASH ANY GEM!","GUIDE_TEXT_SHUFFLE":"THIS IS A SHUFFLE TILE, USE IT TO SHUFFLE ALL GEMS","GUIDE_TEXT_MAGIC_BOTTLE":"THIS IS A MAGIC BOTTLE, USE IT TO CHANGE A GEM COLOUR","NO_ADS_TO_DISPLAY":"G\xd6R\xdcNT\xdcLENECEK REKLAM YOK!","NO_REWARDS":"\xdcZG\xdcN\xdcM, \xd6D\xdcL YOK!","CANCELLED_AD":"REKLAMI \u0130PTAL ETT\u0130N!","LOADING":"Y\xdcKLEN\u0130YOR...","LOADING_AD":"REKLAM Y\xdcKLEN\u0130YOR...","YOU_HAVE_JUST_RECEIVED_{X}_DIAMONDS":"YOU HAVE JUST RECEIVED\\\\n{X} DIAMONDS","CLOSE":"CLOSE","LEADERBOARD_EMPTY":"Liderlik tablosu bo\u015f!","MESSAGE_INVITE":"{playerName} challenges you","MESSAGE_FINISH_MATCH":"{playerName} just finished. Check them now.","MESSAGE_BEST_SCORE":"{playerName} beat your high score. Their score: {playerScore}","MESSAGE_FINISH_TURN":"{playerName} got {score} scores. So easy! Can you?","SHARE_LEADERBOARDS":"A ha, I\'m the best!","SHARE_GAME_RESULTS":"Pheww, a great match!","SHARE_BEST_SCORE":"Great! I have a best score!","TARGET_SCORE":"Hedef skor","NO_SPACE_LEFT":"NO SPACE LEFT!","FULL":"Full","LOADING_LEVEL":"Seviye y\xfckleniyor...","SCORE_REACHED":"SKORA ULA\u015eILDI!","WELL_DONE":"BRAVO!","Level":"Seviye","Completed":"Tamamland\u0131","COMPLETED":"Tamamland\u0131","Next_life":"Next life","MESS_TUTORIAL_1":"Place the block in the horizontal line\\nand see what happens!","MESS_TUTORIAL_2":"Now see what happens\\nwhen you make a vertical line.","MESS_TUTORIAL_3":"You can also make a 3x3 square.\\nGive it a try!","MESS_TUTORIAL_4":"Arrange lines and squares\\nto get combo points!","COMBO":"COMBO","STREAK":"STREAK","MESS_SKIP_TUTORIAL":"Are you sure you want\\nto skip the tutorial?","MESS_START_OVER":"Are you sure to start over?","MESS_TAKE_A_BREAK_ADS":"Take a break\\nAd display in %s...","POINTS":"PUAN","ON":"A\xe7\u0131k","OFF":"Kapal\u0131","ROTATE":"D\xd6ND\xdcR","ANONYMOUS":"Anonim"},"Texture":{"NO_THANKS":"texts/no-thank","COOL":"texts/cool","CONGRATULATIONS":"texts/congratulation","EXCELLENT":"texts/excellent","GOOD":"texts/good","GREAT":"texts/great","LOGO":"logo","CONTINUE":"texts/continue"}}')},Sa=function(e){function t(){return e.apply(this,arguments)||this}return(0,o.Z)(t,e),t.prototype.configure=function(t){e.prototype.configure.call(this,(0,s.Z)({data:va,locale:"en",upperCaseText:!1},t))},t}(Ea),Aa=Sa,Ta=GameCore.Ads.Types,ya=[Vt._.SCREEN_OPEN],Ia=(function(e){function t(t,n){var i;(i=e.call(this,"GoogleAnalytics",(0,s.Z)({},n),"#E35335")||this).game=void 0,i.trackingId=void 0,i.currentPath="/";var a=n.trackingId;i.game=t;var r=(GameCore.Configs.Analytics.GoogleAnalytics||{}).consoleLog;return i.selfLog=!!r,i.trackingId=a,i}(0,o.Z)(t,e);var n=t.prototype;n.processEvent=function(e,t,n){if(!(Rt()(ya).call(ya,e)>=0)){var i=this.formatEventName(e),a=t?(0,s.Z)({},t):{};a=n?(0,s.Z)({},a,{value:n}):a,a=(0,s.Z)({},a,{page_path:this.currentPath,send_to:"GA"}),gtag("event",i,a)}},n.processLevelStart=function(e,t,n){this.processEvent(Vt._.LEVEL_START,{level:e,score:t,level_name:n})},n.processLevelRescue=function(e,t,n){this.processEvent(Vt._.LEVEL_RESCUE,{level:e,score:t,level_name:n})},n.processLevelFail=function(e,t,n){this.processEvent(Vt._.LEVEL_END,{level:e,score:t,level_name:n,success:!1})},n.processLevelComplete=function(e,t,n){this.processEvent(Vt._.LEVEL_END,{level:e,score:t,level_name:n,success:!0})},n.processLoadPreRollAd=function(e){var t=this.getEdaType(Ta.PRE_ROLL);this.processEvent(Vt._.AD_LOAD,{ad_type:t,screen_name:""+e})},n.processShowPreRollAd=function(e){var t=this.getEdaType(Ta.PRE_ROLL);this.processEvent(Vt._.AD_SHOW,{ad_type:t,screen_name:""+e}),this.processEvent(Vt._.AD_IMPRESSION,{ad_format:t})},n.processLoadInterstitialAd=function(e){var t=this.getEdaType(Ta.INTERSTITIAL);this.processEvent(Vt._.AD_LOAD,{ad_type:t,screen_name:""+e})},n.processShowInterstitialAd=function(e){var t=this.getEdaType(Ta.INTERSTITIAL);this.processEvent(Vt._.AD_SHOW,{ad_type:t,screen_name:""+e}),this.processEvent(Vt._.AD_IMPRESSION,{ad_format:"Interstitial"})},n.processLoadRewardedVideoAd=function(e){var t=this.getEdaType(Ta.REWARDED);this.processEvent(Vt._.AD_LOAD,{ad_type:t,screen_name:""+e})},n.processShowRewardedVideoAd=function(e){var t=this.getEdaType(Ta.REWARDED);this.processEvent(Vt._.AD_SHOW,{ad_type:t,screen_name:""+e}),this.processEvent(Vt._.AD_IMPRESSION,{ad_format:"Rewarded"})},n.processLoadAdFail=function(e,t){var n=this.getEdaType(e);this.processEvent(Vt._.AD_LOAD_FAILED,{ad_type:n,screen_name:""+t})},n.processShowAdFail=function(e,t,n){var i=(null==n?void 0:n.code)||"unknown",a=this.getEdaType(e);this.processEvent(Vt._.AD_SHOW_FAILED,{ad_type:a,screen_name:""+t,code:i})},n.processPageView=function(e){var t=this.getGameplayMode(),n="/"+t+"/"+e;this.currentPath=n,document.title=this.formatPageTitle(t,e),gtag("event","page_view",{page_path:this.currentPath,send_to:["GA",this.trackingId]})},n.getGameplayMode=function(){var e=this.game.storage.getState();return la(e)},n.formatEventName=function(e){return e.toLowerCase().replace(/:/g,"_")},n.formatPageTitle=function(e,t){return this.toUpperCamelCaseWithSpace(e)+"::"+this.toUpperCamelCaseWithSpace(t)},n.toUpperCamelCaseWithSpace=function(e){var t=e.replace(/[-_\s.]+(.)?/g,(function(e,t){return t?" "+t.toUpperCase():""}));return t.substr(0,1).toUpperCase()+t.substr(1)},n.getEdaType=function(e){switch(e){case Ta.INTERSTITIAL:return"interstitial";case Ta.PRE_ROLL:return"pre_roll";case Ta.REWARDED:return"rewarded_video";default:return"unknown"}}}(GameCore.Analytics.BaseAnalytics),GameCore.Configs.Match,function(e){function t(){for(var t,n,a=arguments.length,s=new Array(a),o=0;o<a;o++)s[o]=arguments[o];return(n=e.call.apply(e,A()(t=[this]).call(t,s))||this).startGame=(0,r.Z)(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n.auth.requestToken();case 3:return e.next=5,n.storage.syncStore();case 5:return n.configureSentry(),n.configureRollbar(),e.next=9,n.detectGameMode();case 9:n.initGoogleAnalytics(),n.analytics.event(Vt._.LOAD_START),n.scene.launch(fa.C.GLOBAL_SCENE),n.scene.start(fa.C.LOAD_SCENE),n.analytics.pageview(fa.C.LOAD_SCENE),e.next=19;break;case 16:e.prev=16,e.t0=e.catch(0),(0,i.tO)(e.t0);case 19:return e.prev=19,n.facebook.progressLoading.finishLoadingProgressFbBootScene(),n.scene.sleep(fa.C.BOOT_SCENE),e.finish(19);case 23:case"end":return e.stop()}}),e,null,[[0,16,19,23]])}))),n}(0,o.Z)(t,e);var n=t.prototype;return n.create=function(){this.facebook.progressLoading.loadingProgressFbBootScene(),this.startGame()},n.configureSentry=function(){var e=this.player.getPlayer();(0,i.Tv)({id:e.playerId,username:e.name})},n.configureRollbar=function(){if(this.rollbar){var e=this.player.getPlayer();this.rollbar.configure({payload:{person:{id:e.playerId,name:e.name}}})}},n.detectGameMode=function(){var e=(0,r.Z)(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.storage.dispatch(function(){var e=(0,r.Z)(u().mark((function e(t,n){var i,a,s,r,o,c,h,l,d,p,m,g,f,E,v,S;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n(),s=ha(a),r=window.game.player,o=r.getPlayerId(),c=s.contextId,h=s.entryPointData,d=(l=h||{}).type,p=l.matchId,m=l.playerId,g=l.opponentId,f=void 0===g?ia.playerId:g,E=o===m,v=f===ia.playerId||Rt()(i=[f,m]).call(i,o)>=0,S=aa,e.prev=9,e.next=12,window.game.facebook.getTournamentAsync();case 12:S=oa,e.next=17;break;case 15:e.prev=15,e.t0=e.catch(9);case 17:c&&d===$i&&!E&&(S=sa),p&&c&&v&&d===ea&&(S=sa),c&&d===ta&&(S=ra),t(da(S));case 21:case"end":return e.stop()}}),e,null,[[9,15]])})));return function(t,n){return e.apply(this,arguments)}}());case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.initGoogleAnalytics=function(){},t}(Phaser.Scene)),Ca=Ia,Oa=n(126),ba=n(456),Ra=[{key:"level-0",mapJson:"./assets/json/levels/basemap.json"}],Da=1;Da<=134;Da++)Ra.push({key:"level-"+Da,mapJson:"./assets/json/levels/level-"+Da+".json"});var _a=Ra,wa=n(463),Pa=n(464),xa=n(462),ka=n(51),Ma={targets:[],duration:600,ease:Phaser.Math.Easing.Back.Out,props:{y:{from:250,to:0},scale:{from:.9,to:1},alpha:{start:0,from:0,to:1}}},La=function(e){function t(t){return e.call(this,Ma,t)||this}return(0,o.Z)(t,e),t}(ka.Z),Na=La,Ga=n(44),Ba=n(627),Fa=n(64),Ua=Fa.Z.DEFAULT,Ha=Ua.KEY,Va=Ua.FRAME,Ya=function(e){function t(t,n,i,a,s,r){var o;return(o=e.call(this,t,n,i)||this).top=void 0,o.mid=void 0,o.bottom=void 0,o.payload=void 0,o.buttonClose=void 0,o.title=void 0,o.titleContainer=void 0,o.payload=r,o.setSize(a,s),o.setDepth(Oa.Z.POPUP),o.createPopup(),o.scene.add.existing((0,Ga.Z)(o)),o}(0,o.Z)(t,e);var n=t.prototype;return n.createPopup=function(){this.createPopupImages(),this.updatePopupSize(),this.alignPopupImages(),this.createTitle()},n.setOnClickButtonClose=function(e){this.buttonClose.onClick=e},n.createTitle=function(){this.titleContainer=this.scene.add.container(),this.title=this.scene.make.image({key:Ha,frame:Va.BLANK}),this.title.setVisible(!1),this.buttonClose=new Ba.Z(this.scene,Ha,Va.BUTTON_CLOSE,37,36),this.buttonClose.setName("Close"),this.titleContainer.add([this.title,this.buttonClose]),Phaser.Display.Align.In.Center(this.title,this.titleContainer,0,0),Phaser.Display.Align.In.Center(this.buttonClose,this.titleContainer,this.top.width/2-30,0),this.add(this.titleContainer),Phaser.Display.Align.In.TopCenter(this.titleContainer,this,0,-15)},n.setTitle=function(e){var t=this.scene.world.getPixelRatio();this.title.setVisible(!0),this.title.setFrame(e);var n=this.title,i=n.width,a=n.height;this.title.setWorldSize(i/t,a/t)},n.setBgTop=function(e){var t,n=(null==(t=this.payload)?void 0:t.forceHeightTop)||this.width*this.top.height/this.top.width;this.top.setFrame(e),this.top.setWorldSize(this.width,n)},n.createPopupImages=function(){this.top=this.scene.add.image(0,0,Ha,Va.POPUP_TOP),this.mid=this.scene.add.image(0,0,Ha,Va.POPUP_MIDDLE),this.bottom=this.scene.add.image(0,0,Ha,Va.POPUP_BOTTOM),this.add([this.top,this.mid,this.bottom])},n.updatePopupSize=function(){var e,t=(null==(e=this.payload)?void 0:e.forceHeightTop)||this.width*this.top.height/this.top.width;this.top.setWorldSize(this.width,t-1),this.bottom.setWorldSize(this.width,this.width*this.bottom.height/this.bottom.width),this.mid.setWorldSize(this.width,this.height-this.top.displayHeight-this.bottom.displayHeight)},n.alignPopupImages=function(){Phaser.Display.Align.In.Center(this.top,this,0,-this.mid.displayHeight/2-this.top.displayHeight/2),Phaser.Display.Align.In.Center(this.mid,this),Phaser.Display.Align.In.Center(this.bottom,this,0,this.mid.displayHeight/2+this.bottom.displayHeight/2)},n.hideButtonClose=function(){this.buttonClose.setVisible(!1)},n.alignButtonClose=function(e,t){Phaser.Display.Align.In.Center(this.buttonClose,this.title,e,t)},n.setWorldSizeButtonClose=function(e,t){this.buttonClose.button.setWorldSize(e,t)},(0,X.Z)(t,[{key:"onClose",set:function(e){this.setInteractive({useHandCursor:!0}),this.on(Phaser.Input.Events.GAMEOBJECT_POINTER_DOWN,e)}}]),t}(Phaser.GameObjects.Container),Za=Ya,Wa=n(457),Ka=n(467),za=Fa.Z.DEFAULT,Xa=za.KEY,ja=za.FRAME,Ja=function(e){function t(t,n,i,a){var s;return(s=e.call(this,t,n,i,a)||this).popup=void 0,s.title=void 0,s.contents=void 0,s.backgroundContent=void 0,s.textTargetScore=void 0,s.popupShowUpAnimation=void 0,s.popupFadeOutAnimation=void 0,s.contentShowUpAnimation=void 0,s.popupFadeInMaskAnimation=void 0,s.popupFadeOutMaskAnimation=void 0,s.handleClose=function(){s.runCloseAnimation()},s.startOver=function(){(0,s.getData(["onConfirm"])[0])(),s.handleClose()},s.createPopup(),s.createTitle(),s.createContentBackground(),s.createTextTargetScore(),s.createButtons(),s.addItem(),s.setDepth(ba.Ks.POPUP),s.background.setAlpha(.5),s}(0,o.Z)(t,e);var n=t.prototype;return n.open=function(t){e.prototype.open.call(this,t),this.runOpenAnimation()},n.createContentBackground=function(){this.backgroundContent=this.scene.make.image({key:Xa,frame:ja.POPUP_DASHBOARD}),this.backgroundContent.setWorldSize(263,135),this.backgroundContent.setVisible(!1),this.popup.add(this.backgroundContent),Phaser.Display.Align.In.TopCenter(this.backgroundContent,this.popup,0,-24)},n.createTextTargetScore=function(){this.textTargetScore=this.scene.make.bitmapText({font:Wa.Z.PRIMARY.KEY,size:this.scene.fontSize(35),text:"\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b,\n\u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u043d\u0430\u0447\u0430\u0442\u044c \u0432\u0441\u0435 \u0441\u043d\u0430\u0447\u0430\u043b\u0430?",origin:{x:.5,y:.5}}),this.textTargetScore.setTint(3151375),this.textTargetScore.align=1,this.popup.add(this.textTargetScore),Phaser.Display.Align.In.Center(this.textTargetScore,this.backgroundContent,0,-30)},n.createButtons=function(){var e=new Ba.Z(this.scene,Xa,ja.BUTTON_GREEN_MEDIUM,89,41),t=new Ba.Z(this.scene,Xa,ja.BUTTON_BLUE_MEDIUM,89,41),n=this.scene.make.bitmapText({font:Wa.Z.PRIMARY.KEY,size:this.scene.fontSize(30),text:"\u0425\u041e\u0420\u041e\u0428\u041e",origin:{x:.5,y:.5}});e.add(n);var i=this.scene.make.bitmapText({font:Wa.Z.PRIMARY.KEY,size:this.scene.fontSize(30),text:"\u041e\u0442\u043c\u0435\u043d\u0430",origin:{x:.5,y:.5}});t.add(i),this.popup.add([e,t]),e.onClick=this.startOver,t.onClick=this.handleClose,this.popup.setOnClickButtonClose(this.handleClose),Phaser.Display.Align.In.Center(e,this.backgroundContent,-60,30),Phaser.Display.Align.In.Center(t,this.backgroundContent,60,30)},n.createPopup=function(){this.popup=new Za(this.scene,0,-19,290,218,{forceHeightTop:55}),this.add(this.popup),Phaser.Display.Align.In.Center(this.popup,this.zone)},n.createTitle=function(){this.title=this.scene.add.container();var e=this.scene.make.bitmapText({font:Wa.Z.PRIMARY.KEY,size:this.scene.fontSize(30),text:"\u041f\u041e\u0414\u0422\u0412\u0415\u0420\u0414\u0418\u0422\u042c \u041d\u0410\u0427\u0410\u0422\u042c \u0421\u041d\u0410\u0427\u0410\u041b\u0410",origin:{x:.5,y:.5}});e.setTint(3151375),this.title.add([e]),this.popup.add(this.title),Phaser.Display.Align.In.Center(e,this.title,-15,-5),Phaser.Display.Align.In.TopCenter(this.title,this.popup)},n.addItem=function(){this.popup.add([this.title]),this.contents=this.scene.add.group(),this.contents.addMultiple([])},n.runOpenAnimation=function(){var e;null!=(e=this.popupShowUpAnimation)&&null!=(e=e.tween)&&e.isPlaying()||(this.scene.audio.playSound(Ka.Z.POPUP_SHOW),this.runPopupEntrancesAnimation(0,300),this.runFadeInMaskAnimation(100,300),this.runPopupContentEntrancesAnimation(200,300))},n.runCloseAnimation=function(){var e;null!=(e=this.popupFadeOutAnimation)&&null!=(e=e.tween)&&e.isPlaying()||(this.runPopupExitsAnimation(50,200),this.runFadeOutMaskAnimation(0,200))},n.runPopupEntrancesAnimation=function(e,t){if(!this.popupShowUpAnimation){var n=this.popup.scale;this.popupShowUpAnimation=new Na({targets:[this.popup],delay:e,duration:t,props:{y:0,alpha:{start:1,from:1,to:1},scale:{start:0,from:0,to:n}}})}this.popupShowUpAnimation.play()},n.runPopupContentEntrancesAnimation=function(e,t){var n;null==(n=this.contentShowUpAnimation)||n.remove(),this.contentShowUpAnimation=new xa.Z({targets:this.contents.getChildren(),duration:t,delay:e,props:{alpha:{start:0,from:0,to:1}}}),this.contentShowUpAnimation.play()},n.runPopupExitsAnimation=function(e,t){var n=this;this.popupFadeOutAnimation||(this.popupFadeOutAnimation=new Pa.Z({targets:[this.popup],delay:e,duration:t,props:{scale:0},onComplete:function(){n.popup.setY(0),n.scene.screen.close(n.name)}})),this.popupFadeOutAnimation.play()},n.runFadeInMaskAnimation=function(e,t){if(!this.popupFadeInMaskAnimation){var n=this.background.alpha;this.popupFadeInMaskAnimation=new wa.Z({targets:[this.background],delay:e,duration:t,props:{alpha:{start:0,from:0,to:n}}})}this.popupFadeInMaskAnimation.play()},n.runFadeOutMaskAnimation=function(e,t){if(!this.popupFadeOutMaskAnimation){var n=this.background.alpha;this.popupFadeOutMaskAnimation=new Pa.Z({targets:[this.background],delay:e,duration:t,props:{alpha:{start:n,from:n,to:0}}})}this.popupFadeOutMaskAnimation.play()},t}(GameCore.Screen),qa=Ja,Qa=function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).name="InvalidContextId",i.message=t||"This contextId is not valid",i.payload=n,i}return(0,o.Z)(t,e),t}((0,w.Z)(Error)),$a=Qa,es={REPLAY:"replay",RESCUE:"rescue",RECEIVE_DIAMONDS:"receive-coins",GAME_OVER:"game-over"},ts="global",ns="friend",is=GameCore.Configs,as=is.ApiHost,ss=is.OtherHost,rs=is.LeadersBoard,os=rs.Prefix,cs=rs.LeaderboardId,hs=rs.Name,ls=os+"/"+cs+"/leaders",us=os+"/"+cs+"/players",ds=function(e){var t="";return cs?(e===ts?t=ls:e===ns&&(t=us),t):t},ps=function(){var e=(0,r.Z)(u().mark((function e(t){var n,i,a,r,o,c;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Ee()(t).call(t,(function(e){return e.playerId})),a=GameCore.Utils.Object.keyBy(t,"playerId"),r=GameCore.Utils.String.params({playerIds:i}),e.next=5,(0,xe.U)("players?"+r,{},as);case 5:return o=e.sent,c=Ee()(n=o.data).call(n,(function(e){var t=a[e.playerId];return(0,s.Z)({},e,{score:t.score,rank:t.rank,getScore:function(){return t.score},getFormattedScore:function(){return""},getTimestamp:function(){return(new Date).valueOf()},getRank:function(){return t.rank},getExtraData:function(){return t.extraData},getPlayer:function(){return{getName:function(){return e.name},getPhoto:function(){return e.photo},getID:function(){return e.playerId}}}})})),e.abrupt("return",c);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ms=function(){var e=(0,r.Z)(u().mark((function e(t){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===t&&(t={}),null==cs){e.next=3;break}return e.abrupt("return",gs(t));case 3:return e.abrupt("return",fs(t));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),gs=function(){var e=(0,r.Z)(u().mark((function e(t){var n,i,a,s,r;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===t&&(t={}),n=[],i=ds(ts)){e.next=5;break}return e.abrupt("return",n);case 5:return a=GameCore.Utils.String.params(t),e.next=8,(0,xe.U)(i+"?"+a,{},ss);case 8:if(s=e.sent,!((r=(null==s?void 0:s.data)||[]).length<1)){e.next=12;break}return e.abrupt("return",n);case 12:return n=r,e.abrupt("return",ps(n));case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),fs=function(){var e=(0,r.Z)(u().mark((function e(t){var n,i,a,s,r;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return void 0===t&&(t={}),i=(n=t).limit,a=n.offset,e.next=4,window.GameSDK.getLeaderboardAsync(hs);case 4:return s=e.sent,e.next=7,s.getEntriesAsync(i,a);case 7:return r=e.sent,e.abrupt("return",r);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Es=function(){var e=(0,r.Z)(u().mark((function e(t){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===t&&(t={}),null==cs){e.next=3;break}return e.abrupt("return",vs(t));case 3:return e.abrupt("return",Ss(t));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),vs=function(){var e=(0,r.Z)(u().mark((function e(t){var n,i,a,s,r;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===t&&(t={}),n=[],i=ds(ns)){e.next=5;break}return e.abrupt("return",n);case 5:return a=GameCore.Utils.String.params(t),e.next=8,(0,xe.U)(i+"?"+a,{},ss);case 8:if(s=e.sent,!((r=(null==s?void 0:s.data)||[]).length<1)){e.next=12;break}return e.abrupt("return",n);case 12:return n=r,e.abrupt("return",ps(n));case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ss=function(){var e=(0,r.Z)(u().mark((function e(t){var n,i,a,s,r;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return void 0===t&&(t={}),i=(n=t).limit,a=n.offset,e.next=4,window.GameSDK.getLeaderboardAsync(hs);case 4:return s=e.sent,e.next=7,s.getConnectedPlayerEntriesAsync(i,a);case 7:return r=e.sent,e.abrupt("return",r);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),As=(function(){var e=(0,r.Z)(u().mark((function e(t){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==cs){e.next=2;break}return e.abrupt("return",As(t));case 2:return e.abrupt("return",Ts());case 3:case"end":return e.stop()}}),e)})))}(),function(){var e=(0,r.Z)(u().mark((function e(t){var n,i,a,s,r;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=null,t){e.next=3;break}return e.abrupt("return",n);case 3:if(i=ds(ns)){e.next=6;break}return e.abrupt("return",n);case 6:return a=GameCore.Utils.String.params({playerIds:t}),e.next=9,(0,xe.U)(i+"?"+a,{},ss);case 9:if(s=e.sent,!((r=(null==s?void 0:s.data)||[]).length<1)){e.next=13;break}return e.abrupt("return",n);case 13:return e.next=15,ps(r);case 15:return n=e.sent[0],e.abrupt("return",n);case 17:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),Ts=function(){var e=(0,r.Z)(u().mark((function e(){var t,n;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,window.GameSDK.getLeaderboardAsync(hs);case 2:return t=e.sent,e.next=5,t.getPlayerEntryAsync();case 5:return n=e.sent,e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ys=function(){var e=(0,r.Z)(u().mark((function e(t,n){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(window.GameSDK.submitGameResultsAsync(n).catch((function(e){})),null==cs){e.next=5;break}if(""!==window.game.auth.getToken()){e.next=4;break}return e.abrupt("return",h().reject("Not logged in"));case 4:return e.abrupt("return",Is(t,n));case 5:return e.abrupt("return",Cs(n));case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),Is=function(){var e=(0,r.Z)(u().mark((function e(t,n){var i;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,xe.v)("leaderboards/"+cs+"/players/"+t,{score:n},{},ss);case 2:return i=e.sent,e.abrupt("return",(null==i?void 0:i.data)||{});case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),Cs=function(){var e=(0,r.Z)(u().mark((function e(t){var n;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,window.GameSDK.getLeaderboardAsync(hs);case 2:return n=e.sent,e.next=5,n.setScoreAsync(t);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Os=function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).name="NewScoreIsBad",i.message=t||"The new score is bad",i.payload=n,i}return(0,o.Z)(t,e),t}((0,w.Z)(Error)),bs=Os,Rs=function(e){return e[yn]},Ds=(0,Q.P1)([function(e){return Rs(e).gameplay.mode}],(function(e){return e})),_s=((0,Q.P1)([function(e){return Rs(e).gameplay.status}],(function(e){return e})),(0,Q.P1)([function(e){return Rs(e).gameplay.rescued}],(function(e){return e}))),ws=(0,Q.P1)([function(e){return Rs(e).gameplay.startAt}],(function(e){return e})),Ps=(0,Q.P1)([function(e){return Rs(e).gameplay.finishAt}],(function(e){return e})),xs=n(626),ks=function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).name="CurrentTournamentScoreIsNotBest",i.message=t||"The new score is not best",i.payload=n,i}return(0,o.Z)(t,e),t}((0,w.Z)(Error)),Ms=ks,Ls=GameCore.Configs.Tournament.UseLeaderboard,Ns=function(e){return{type:ai,payload:{tournamentId:e}}},Gs=function(e){return function(){var t=(0,r.Z)(u().mark((function t(n){var a,s,r,o,c,h,l,d,p;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a=window.game.facebook,s=e.playerId,r=e.playerName,o=e.score,c=e.autoStartGame,h=r+"'s Tournament",l=GameCore.Utils.String.generateObjectId(),t.next=7,a.tournament.createAsync({initialScore:o,config:{title:h,tournamentTitle:h},data:{playerId:s,playerName:r,leaderboardId:l}});case 7:return d=t.sent,p=d.getID(),c&&(n(Ns(p)),n(Yo())),t.next=12,(0,xs.Z5)({_id:l,createdBy:s,name:p,description:h,expireTime:6048e5});case 12:if(t.sent._id!==l){t.next=16;break}return t.next=16,(0,xs.aV)(l,s,o);case 16:t.next=21;break;case 18:t.prev=18,t.t0=t.catch(0),(0,i.tO)(t.t0);case 21:case"end":return t.stop()}}),t,null,[[0,18]])})));return function(e){return t.apply(this,arguments)}}()},Bs=function(e){return(0,r.Z)(u().mark((function t(){var n,i,a,s,r;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=window.game.facebook,i=e.playerId,a=e.playerName,s=e.leaderboardId,r=e.score,s&&(0,xs.aV)(s,i,r),t.next=5,n.tournament.shareAsync({score:r,data:{type:"tournament",playerId:i,playerName:a}});case 5:(0,xs.aV)(s,i,r);case 6:case"end":return t.stop()}}),t)})))},Fs=function(){var e=(0,r.Z)(u().mark((function e(){var t,n,i;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=window.game.facebook,e.next=4,t.getTournamentAsync();case 4:return n=e.sent,i=JSON.parse(n.getPayload()||"{}"),e.abrupt("return",i.leaderboardId);case 9:return e.prev=9,e.t0=e.catch(0),e.abrupt("return",null);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}(),Us=function(){var e=(0,r.Z)(u().mark((function e(){var t;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=window.game.facebook,e.next=4,t.getTournamentAsync();case 4:return e.abrupt("return",e.sent);case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",null);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),Hs=function(e){return function(){var t=(0,r.Z)(u().mark((function t(n,i){var a,s,r,o,c,h,l,d,p,m,g,f,E,v;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=null,s=window.game,r=s.player,o=s.facebook,c=s.analytics,t.prev=2,l=i(),d=Ds(l),y()(h=[aa,oa]).call(h,d)){t.next=7;break}return t.abrupt("return");case 7:return n({type:si,payload:{}}),p=r.getPlayer(),m=p.playerId,g=p.name,t.next=11,Us();case 11:if(!t.sent){t.next=23;break}if(a=Vt._.TOURNAMENT_SHARE,!Ls){t.next=21;break}return t.next=17,Fs();case 17:return f=t.sent,E={playerId:m,playerName:g,score:e,leaderboardId:f},t.next=21,n(Bs(E));case 21:t.next=28;break;case 23:if(a=Vt._.TOURNAMENT_CREATE,!Ls){t.next=28;break}return v={playerId:m,playerName:g,score:e,autoStartGame:!1},t.next=28,n(Gs(v));case 28:if(c.event(a,{success:!0}),!1!==Ls){t.next=32;break}return t.next=32,o.requestTournamentAsync(e);case 32:n(Vs(e)),t.next=40;break;case 35:if(t.prev=35,t.t0=t.catch(2),!(t.t0 instanceof Ms)){t.next=39;break}return t.abrupt("return");case 39:a&&c.event(a,{success:!1});case 40:case"end":return t.stop()}}),t,null,[[2,35]])})));return function(e,n){return t.apply(this,arguments)}}()},Vs=function(e){return{type:ri,payload:{score:e}}},Ys=function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).name="InvalidOpponentId",i.message=t||"This opponentId is not valid",i.payload=n,i}return(0,o.Z)(t,e),t}((0,w.Z)(Error)),Zs=Ys,Ws=function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).name="WideFrameRenderFail",i.message=t||"Wide frame render fail",i.payload=n,i}return(0,o.Z)(t,e),t}((0,w.Z)(Error)),Ks=Ws,zs={PASS_LEVELS:{ID:"pass-levels",EVENTS:{PASS_LEVEL:"pass-level"}},COLLECT_DIAMONDS:{ID:"collect-diamonds",EVENTS:{COLLECT_DIAMONDS:"collect-diamonds"}},INVITE_FRIENDS:{ID:"invite-friends",EVENTS:{INVITED_FRIEND:"INVITED_FRIEND"}},REACH_SCORE:{ID:"reach-score",EVENTS:{ADD_SCORE:"add-score"}},EVENTS:{TASKS_RESET:"tasks-reset",NOTICE_UPDATE:"notice-update"}},Xs=function(e,t){return t.playerId},js=((0,Q.P1)([function(e){return Rs(e).match.isRequesting}],(function(e){return e})),(0,Q.P1)([function(e){return Rs(e).match.single}],(function(e){return e}))),Js=(0,Q.P1)([function(e){return Rs(e).match.single._id}],(function(e){return e})),qs=(0,Q.P1)([function(e){return Rs(e).match.single.score}],(function(e){return e||0})),Qs=((0,Q.P1)([function(e){return Rs(e).match.single.level}],(function(e){return e||0})),(0,Q.P1)([function(e){var t;return null==(t=Rs(e).match.single.data)?void 0:t.diamond}],(function(e){return e||0})),(0,Q.P1)([function(e){var t;return null==(t=Rs(e).match.single.data)?void 0:t.fen}],(function(e){return e||null})),(0,Q.P1)([function(e){return Rs(e).match.single.status}],(function(e){return e})),(0,Q.P1)([function(e){return Rs(e).match.single.playerId}],(function(e){return e})),(0,Q.P1)([function(e){return Rs(e).match.challenge}],(function(e){return e}))),$s=(0,Q.P1)([function(e){return Rs(e).match.challenge._id}],(function(e){return e})),er=(0,Q.P1)([function(e){return Rs(e).match.challenge.status}],(function(e){return e})),tr=(0,Q.P1)([function(e){return Rs(e).match.challenge.opponentInfo}],(function(e){return e})),nr=((0,Q.P1)([function(e){return Rs(e).match.challenge.whitePlayerId}],(function(e){return e})),(0,Q.P1)([function(e){return Rs(e).match.challenge.blackPlayerId}],(function(e){return e})),(0,Q.P1)([Qs,Xs],(function(e,t){var n=e.whitePlayerId,i=e.blackPlayerId;return n!==t&&i===t?n:i!==t&&n===t?i:""})),(0,Q.P1)([Qs,Xs],(function(e,t){var n=e.whitePlayerId,i=e.blackPlayerId;return n===t?n:i===t?i:ia.playerId}))),ir=(0,Q.P1)([Qs,Xs],(function(e,t){var n=e.whitePlayerId,i=e.blackPlayerId,a=e.whitePlayerFinish,s=e.blackPlayerFinish;return t&&n===t?a:!(!t||i!==t)&&s})),ar=(0,Q.P1)([Qs,function(e,t){return t.opponentId}],(function(e,t){var n=e.whitePlayerId,i=e.blackPlayerId,a=e.whitePlayerFinish,s=e.blackPlayerFinish;return t&&n===t?a:!(!t||i!==t)&&s})),sr=(0,Q.P1)([function(e){return Rs(e).match.group.opponentInfo}],(function(e){return e})),rr=((0,Q.P1)([function(e){return Rs(e).match.online.players}],(function(e){return e})),(0,Q.P1)([function(e){return Rs(e).match.journey}],(function(e){return e}))),or=(0,Q.P1)([function(e){return Rs(e).match.journey._id}],(function(e){return e})),cr=(0,Q.P1)([function(e){return Rs(e).match.journey.level}],(function(e){return e})),hr=(0,Q.P1)([function(e){return Rs(e).stats.data}],(function(e){return e})),lr=(0,Q.P1)([function(e){return Rs(e).stats.current}],(function(e){return e})),ur=((0,Q.P1)([function(e){return Rs(e).stats.isRequesting}],(function(e){return e})),(0,Q.P1)([function(e){return e.messages.data}],(function(e){return e}))),dr=(0,Q.P1)([ur,function(e,t){return t.opponentId}],(function(e,t){return!!GameCore.Utils.Valid.isString(t)&&(!!GameCore.Utils.Object.hasOwn(e,t)&&e[t].sent)})),pr=n(414),mr=n.n(pr),gr=new(mr()),fr=gr,Er=n(351),vr=n.n(Er),Sr=function(e){if("string"!==typeof e||!e)throw new Ks(null,{imageShare:e})},Ar=function(){var e=(0,r.Z)(u().mark((function e(){var t,n,i,a,s,r,o,c,h,l;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=window.game,n=t.player,i=t.globalScene,a=n.getPlayer(),s=a.playerId,r=a.photo,o=a.data,c=(o||{}).score,h=yr({playerId:s,playerPhoto:r,playerScore:c})){e.next=7;break}return e.abrupt("return");case 7:return l={name:"share-best-score",width:952,height:492,renderOptions:h},e.next=10,i.frameCapture.capture(l);case 10:return e.abrupt("return",e.sent);case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Tr=function(){var e=(0,r.Z)(u().mark((function e(t){var n,i,a,s,r,o,c,h,l,d,p;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=window.game,i=n.player,a=n.globalScene,s=hr(t),r=i.getPlayer(),o=r.playerId,c=r.photo,h=s[o]||{},l=h.score,d=yr({playerId:o,playerPhoto:c,playerScore:l})){e.next=8;break}return e.abrupt("return");case 8:return p={name:"share-current-score",width:952,height:492,renderOptions:d},e.next=11,a.frameCapture.capture(p);case 11:return e.abrupt("return",e.sent);case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),yr=function(e){var t=e.playerId,n=void 0===t?"10":t,i=e.playerPhoto,a=void 0===i?"":i,s=e.playerScore,r=void 0===s?0:s;return"string"!==typeof n||"string"!==typeof a||"number"!==typeof r?null:{avatar:{name:""+n,type:"image",x:100,y:220,image:a,width:140,height:140,fallbackWithImage:na.Z.AVATAR.KEY},wideFrame:{name:"wide-frame-message-win",type:"image",x:0,y:0,image:"./assets/wideframes/wide-frame-message-win.png",width:952,height:492},playerScore:{type:"text",x:167,y:418,font:"600 46px",fillStyle:"#f4a528",text:""+r,textAlign:"center"}}},Ir=(function(){var e=(0,r.Z)(u().mark((function e(){var t,n,i,a,s,r,o,c,h,l,d,p,m,g,f,E,v,S,A,T;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=window.game,n=t.player,i=t.profile,a=t.globalScene,s=n.getPlayer(),r=s.playerId,o=s.name,c=s.photo,(h=n.getConnectedPlayerIds(99,0)).push(r),l=[],e.next=7,Es({playerIds:GameCore.Utils.Array.unique(h),limit:h.length});case 7:d=e.sent,p=GameCore.Utils.Object.keyBy(d,"playerId"),m={playerId:r,name:o,photo:c,score:0},GameCore.Utils.Object.hasOwn(p,r)&&(m=p[r]),l.push(m),e.t0=vr()(u()).call(u(),p);case 14:if((e.t1=e.t0()).done){e.next=27;break}if(g=e.t1.value,!GameCore.Utils.Object.hasOwn(p,g)){e.next=25;break}if(f=p[g],3!==l.length){e.next=20;break}return e.abrupt("break",27);case 20:if(f.playerId!==r){e.next=22;break}return e.abrupt("continue",14);case 22:if(!(Number(f.score)>Number(m.score))){e.next=24;break}return e.abrupt("continue",14);case 24:l.push(f);case 25:e.next=14;break;case 27:return E=GameCore.Utils.Array.unique(h),e.next=30,i.requestProfiles(E);case 30:if(v=i.getProfiles(),l.forEach((function(e,t){var n=e.playerId;if(GameCore.Utils.Object.hasOwn(v,n)){var i=v[n],a=i.name,s=i.photo;l[t].name=a,l[t].photo=s}})),l.length<3)for(S=0;S<=3-l.length;)l.push({playerId:"bot"+S,name:"???",score:0,photo:"./assets/images/others/avatar.png"}),S++;if(A=Ir({playerId:r,playerName:o,playerPhoto:c,listLeaders:l})){e.next=37;break}return e.abrupt("return");case 37:return T={name:"share-leaderboard",width:1500,height:2e3,renderOptions:A},e.next=40,a.frameCapture.capture(T);case 40:return e.abrupt("return",e.sent);case 41:case"end":return e.stop()}}),e)})))}(),function(e){var t=e.playerId,n=void 0===t?"10":t,i=e.playerPhoto,a=void 0===i?"":i,s=e.listLeaders,r=void 0===s?[]:s;if(!Array.isArray(r))return null;if("string"!==typeof n)return null;if("string"!==typeof a)return null;var o={avatar:{name:""+n,type:"image",x:490,y:258,image:a,width:525,height:525,fallbackWithImage:na.Z.AVATAR.KEY}};return r.forEach((function(e,t){var n=e.playerId,i=e.photo;o["photo_"+n]={name:""+n,type:"image",x:456,y:1235+195*t,image:i,width:124,height:124,fallbackWithImage:na.Z.AVATAR.KEY}})),o.wideFrame={name:"wide-frame-share",type:"image",x:0,y:0,image:"./assets/wideframes/wide-frame-share.png",width:1500,height:2e3},r.forEach((function(e,t){var n=e.playerId,i=e.name,a=e.score;o["name_"+n]={type:"text",x:650,y:1320+195*t,font:"600 48px",text:i,fillStyle:"#b18151"},o["score_"+n]={type:"text",x:1050,y:1320+195*t,font:"600 48px",text:a,fillStyle:"#b18151"}})),o}),Cr=function(){var e=(0,r.Z)(u().mark((function e(t){var n,i,a,s,r,o,c,h,l,d,p,m,g,f,E,v,S,A;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=window.game,i=n.player,a=n.globalScene,s=hr(t),r=i.getPlayer(),o=r.photo,c=r.playerId,h=tr(t),l=h.playerId,d=h.photo,p=ir(t,{playerId:c}),m=ar(t,{opponentId:l}),g=s[c]||{},f=g.score,E=s[l]||{},v=E.score,S=br({playerId:c,playerPhoto:o,playerScore:f,opponentId:l,opponentPhoto:d,opponentScore:v,isPlayerFinished:p,isOpponentFinished:m})){e.next=12;break}return e.abrupt("return");case 12:return A={name:"share-game-result",width:952,height:492,renderOptions:S},e.next=15,a.frameCapture.capture(A);case 15:return e.abrupt("return",e.sent);case 16:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Or=function(){var e=(0,r.Z)(u().mark((function e(t){var n,i,a,s,r,o,c,h,l,d,p,m,g,f,E;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=window.game,i=n.player,a=n.globalScene,s=hr(t),r=i.getPlayer(),o=r.photo,c=r.playerId,h=sr(t),l=h.playerId,d=h.photo,p=h.score,m=s[c]||{},g=m.score,f=br({playerId:c,playerPhoto:o,playerScore:g,opponentId:l,opponentPhoto:d,opponentScore:p})){e.next=9;break}return e.abrupt("return");case 9:return E={name:"share-group-match-result",width:952,height:492,renderOptions:f},e.next=12,a.frameCapture.capture(E);case 12:return e.abrupt("return",e.sent);case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),br=function(e){var t=e.playerId,n=void 0===t?"10":t,i=e.playerPhoto,a=void 0===i?"":i,s=e.playerScore,r=void 0===s?0:s,o=e.opponentId,c=void 0===o?"20":o,h=e.opponentPhoto,l=void 0===h?"":h,u=e.opponentScore,d=void 0===u?0:u,p=e.isPlayerFinished,m=e.isOpponentFinished;if("string"!==typeof n)return null;if("string"!==typeof a)return null;if("number"!==typeof r)return null;if("string"!==typeof c)return null;if("string"!==typeof l)return null;if("number"!==typeof d)return null;if("boolean"!==typeof p)return null;if("boolean"!==typeof m)return null;var g=r===d,f=r>d,E=p||m,v=p&&m,S={leftPhoto:{name:""+n,type:"image",x:92,y:150,image:a,width:140,height:140,fallbackWithImage:na.Z.AVATAR.KEY},rightPhoto:{name:""+c,type:"image",x:720,y:150,image:l,width:140,height:140,fallbackWithImage:na.Z.AVATAR.KEY},wideFrame:{name:"wide-frame-game-result",type:"image",x:0,y:0,image:"./assets/wideframes/wide-frame-game-result.png",width:952,height:492}};return(E||!m&&!p&&!d&&!r)&&(S.leftScoreShadow={type:"text",x:158,y:404,font:"600 46px",fillStyle:"#c4683f",text:p?""+r:"???",textAlign:"center"},S.leftScore={type:"text",x:158,y:400,font:"600 46px",fillStyle:"#f2a62e",text:p?""+r:"???",textAlign:"center"},S.rightScoreShadow={type:"text",x:790,y:404,font:"600 46px",fillStyle:"#c4683f",text:m?""+d:"???",textAlign:"center"},S.rightScore={type:"text",x:790,y:400,font:"600 46px",fillStyle:"#f2a62e",text:m?""+d:"???",textAlign:"center"}),!g&&v&&(f?S.leftCrown={name:"crown-icon",type:"image",x:118,y:82,image:"./assets/images/others/crown-icon.png",width:84,height:70}:S.rightCrown={name:"crown-icon",type:"image",x:738,y:82,image:"./assets/images/others/crown-icon.png",width:106,height:78}),S},Rr=function(){return function(){var e=(0,r.Z)(u().mark((function e(t){var n,a,s,r,o,c,h,l,d,p,m;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=window.game,a=n.player,s=n.analytics,r=n.facebook,o=n.globalScene,c=n.lang,e.prev=1,o.screen.open(ba.o4.NOTIFY_SCREEN,{message:c.Text.LOADING,loading:!0}),e.next=5,Dr();case 5:return h=e.sent,Sr(h),l=a.getPlayer(),d=l.playerId,p=l.name,m=l.photo,e.next=10,r.shareAsync({text:"Great! I have a score!",intent:"SHARE",image:h||"",data:{playerId:d,playerName:p,playerPhoto:m,type:$i}});case 10:s.event(Vt._.SHARE,{share_content_type:"Score",success:!0}),e.next=17;break;case 13:e.prev=13,e.t0=e.catch(1),s.event(Vt._.SHARE,{share_content_type:"Score",success:!1}),(0,i.tO)(e.t0);case 17:return e.prev=17,o.screen.close(ba.o4.NOTIFY_SCREEN),e.finish(17);case 20:case"end":return e.stop()}}),e,null,[[1,13,17,20]])})));return function(t){return e.apply(this,arguments)}}()},Dr=function(){var e=(0,r.Z)(u().mark((function e(){var t,n,i,a,s,r,o,c,h;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=window.game,n=t.player,i=t.globalScene,a=n.getPlayer(),s=a.playerId,r=a.photo,o=n.getBestScore(),c=_r({playerId:s,playerPhoto:r,playerScore:o})){e.next=7;break}return e.abrupt("return");case 7:return h={name:"share-score",width:952,height:492,renderOptions:c},e.next=10,i.frameCapture.capture(h);case 10:return e.abrupt("return",e.sent);case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),_r=function(e){var t=e.playerId,n=void 0===t?"10":t,i=e.playerPhoto,a=void 0===i?"":i,s=e.playerScore,r=void 0===s?0:s;return"string"!==typeof n||"string"!==typeof a||"number"!==typeof r?null:{avatar:{name:""+n,type:"image",x:100,y:220,image:a,width:140,height:140,fallbackWithImage:na.Z.AVATAR.KEY},wideFrame:{name:"wide-frame-message-win",type:"image",x:0,y:0,image:"./assets/wideframes/wide-frame-message-win.png",width:952,height:492},playerScoreShadow:{type:"text",x:167,y:418,font:"600 46px",fillStyle:"#c4683f",text:""+r,textAlign:"center"},playerScore:{type:"text",x:167,y:418,font:"600 46px",fillStyle:"#f2a62e",text:""+r,textAlign:"center"}}},wr=function(e){var t=e.contextId;if(""===t||"string"!==typeof t)throw new $a(null,{contextId:t})},Pr=function(e){var t=e.opponentId,n=e.contextId;if(""===t||"string"!==typeof t)throw new Zs(null,{opponentId:t});if(""===n||"string"!==typeof n)throw new $a(null,{contextId:n})},xr=function(e){if(null===e.imageShare)throw new Ks},kr=function(e,t){return void 0===t&&(t=!0),function(n,i){var a,s=i(),r=ur(s);if(t){var o;if(null!=(o=r[e])&&o.sent)return;n(Mr(e))}null!=(a=r[e])&&a.sent&&n(Lr(e))}},Mr=function(e){return{type:Qt.qj,payload:{opponentId:e}}},Lr=function(e){return{type:Qt.rh,payload:{opponentId:e}}},Nr=function(){var e=(0,r.Z)(u().mark((function e(t,n){var a,s;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,a=window.game.facebook,Pr({opponentId:t,contextId:n}),(s=window.game.facebook.getContextID())!==n||""===n){e.next=6;break}return e.abrupt("return",s);case 6:if("10"!==t||""===n){e.next=8;break}return e.abrupt("return",n);case 8:if(!n){e.next=12;break}return e.next=11,a.switchAsync(n);case 11:return e.abrupt("return",window.game.facebook.getContextID());case 12:e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),(0,i.tO)(e.t0);case 17:return e.abrupt("return","");case 18:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(t,n){return e.apply(this,arguments)}}(),Gr=function(e,t){return function(){var n=(0,r.Z)(u().mark((function n(a,s){var r,o,c,h,l,d,p,m,g,f,E,v,S;return u().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=window.game,o=r.player,c=r.analytics,h=r.facebook,n.prev=1,l=t.matchId,d=t.contextId,n.next=5,Nr(e,d);case 5:return p=n.sent,wr({contextId:p}),m=s(),n.next=10,Cr(m);case 10:return g=n.sent,xr({imageShare:g}),f=o.getPlayer(),E=f.name,v=f.playerId,S=window.game.lang.getText({key:"MESSAGE_INVITE",variables:[E]}),n.next=16,h.sendMessage({cta:"Play",text:S,image:g||"",template:"challenge",data:{type:ea,matchId:l,playerId:v,opponentId:e,status:Qn},action:"CUSTOM"});case 16:a(kr(e)),c.event(Vt._.MESSAGE,{message_content_type:"Invite",success:!0}),fr.emit(zs.INVITE_FRIENDS.EVENTS.INVITED_FRIEND,{type:"friend",value:1,opponentId:e}),n.next=25;break;case 21:n.prev=21,n.t0=n.catch(1),c.event(Vt._.MESSAGE,{message_content_type:"Invite",success:!1}),(0,i.tO)(n.t0);case 25:case"end":return n.stop()}}),n,null,[[1,21]])})));return function(e,t){return n.apply(this,arguments)}}()},Br=function(e,t){return function(){var n=(0,r.Z)(u().mark((function n(a,s){var r,o,c,h,l,d,p,m,g,f,E,v,S;return u().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=window.game,o=r.player,c=r.analytics,h=r.facebook,n.prev=1,l=t.matchId,d=t.contextId,n.next=5,Nr(e,d);case 5:return p=n.sent,wr({contextId:p}),m=s(),n.next=10,Cr(m);case 10:return g=n.sent,xr({imageShare:g}),f=o.getPlayer(),E=f.name,v=f.playerId,S=window.game.lang.getText({key:"MESSAGE_FINISH_MATCH",variables:[E]}),n.next=16,h.sendMessage({cta:"See result",text:S,image:g||"",template:"finished",data:{type:ea,matchId:l,playerId:v,opponentId:e,status:$n},action:"CUSTOM"});case 16:a(kr(e)),c.event(Vt._.MESSAGE,{message_content_type:"FinishMatch",success:!0}),n.next=24;break;case 20:n.prev=20,n.t0=n.catch(1),c.event(Vt._.MESSAGE,{message_content_type:"FinishMatch",success:!1}),(0,i.tO)(n.t0);case 24:case"end":return n.stop()}}),n,null,[[1,20]])})));return function(e,t){return n.apply(this,arguments)}}()},Fr=function(e,t){return function(){var n=(0,r.Z)(u().mark((function n(a,s){var r,o,c,h,l,d,p,m,g,f,E,v,S,A,T,y,I;return u().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=window.game,o=r.player,c=r.analytics,h=r.facebook,n.prev=1,l=t.matchId,d=t.contextId,n.next=5,Nr(e,d);case 5:return p=n.sent,wr({contextId:p}),m=s(),n.next=10,Cr(m);case 10:return g=n.sent,xr({imageShare:g}),f=o.getPlayer(),E=f.name,v=f.playerId,S=hr(m),A=S[v]||{},T=A.score,y=void 0===T?0:T,I=window.game.lang.getText({key:"MESSAGE_BEST_SCORE",variables:[E,y]}),n.next=18,h.sendMessage({cta:"See result",text:I,image:g||"",template:"pass_score",data:{type:ea,matchId:l,playerId:v,opponentId:e,status:$n},action:"CUSTOM"});case 18:a(kr(e)),c.event(Vt._.MESSAGE,{message_content_type:"BestScore",success:!0}),n.next=26;break;case 22:n.prev=22,n.t0=n.catch(1),c.event(Vt._.MESSAGE,{message_content_type:"BestScore",success:!1}),(0,i.tO)(n.t0);case 26:case"end":return n.stop()}}),n,null,[[1,22]])})));return function(e,t){return n.apply(this,arguments)}}()},Ur=function(e,t){return function(){var n=(0,r.Z)(u().mark((function n(a,s){var r,o,c,h,l,d,p,m,g,f,E,v,S,A;return u().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=window.game,o=r.player,c=r.analytics,h=r.facebook,n.prev=1,l=t.matchId,d=t.contextId,p=t.score,n.next=5,Nr(e,d);case 5:return m=n.sent,wr({contextId:m}),g=s(),n.next=10,Cr(g);case 10:return f=n.sent,xr({imageShare:f}),E=o.getPlayer(),v=E.name,S=E.playerId,A=window.game.lang.getText({key:"MESSAGE_FINISH_TURN",variables:[v,p]}),n.next=16,h.sendMessage({cta:"Play",text:A,image:f||"",template:"play_turn",data:{type:ea,matchId:l,playerId:S,opponentId:e,status:Qn},action:"CUSTOM"});case 16:a(kr(e)),c.event(Vt._.MESSAGE,{message_content_type:"FinishTurn",success:!0}),n.next=26;break;case 20:if(n.prev=20,n.t0=n.catch(1),c.event(Vt._.MESSAGE,{message_content_type:"FinishTurn",success:!1}),!(n.t0 instanceof $a)){n.next=25;break}return n.abrupt("return");case 25:(0,i.tO)(n.t0);case 26:case"end":return n.stop()}}),n,null,[[1,20]])})));return function(e,t){return n.apply(this,arguments)}}()},Hr=function(){var e=(0,r.Z)(u().mark((function e(t,n){var a,s,r,o,c,h,l,d,p,m;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a=window.game,s=a.player,r=a.facebook,o=s.getPlayer(),c=o.playerId,h=o.name,l=o.photo,d=lr(n),p=d.score,m={type:ta,playerId:c,playerName:h,playerPhoto:l,playerScore:p},e.next=7,r.sendMessage({cta:{default:"Play",localizations:{en_US:"Play",vi_VN:"Ch\u01a1i"}},text:{default:h+" beats your high score. Their score: "+p+".",localizations:{en_US:h+" beats your high score. Their score: "+p+".",vi_VN:h+" v\u1eeba v\u01b0\u1ee3t \u0111i\u1ec3m s\u1ed1 cao nh\u1ea5t c\u1ee7a b\u1ea1n! Ch\u01a1i l\u1ea7n n\u1eefa ch\u1ee9?"}},image:t||"",template:"play_turn",data:m,action:"CUSTOM"});case 7:e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),(0,i.tO)(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t,n){return e.apply(this,arguments)}}(),Vr=function(){var e=(0,r.Z)(u().mark((function e(t,n){var a,s,r,o,c,h,l,d,p,m;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=window.game,s=a.player,r=a.facebook,e.prev=1,o=s.getPlayer(),c=o.playerId,h=o.name,l=o.photo,d=lr(n),p=d.score,m={type:ta,playerId:c,playerName:h,playerPhoto:l,playerScore:p},e.next=7,r.sendMessage({cta:{default:"Play",localizations:{en_US:"Play",vi_VN:"Ch\u01a1i ngay"}},text:{default:h+" got "+p+" scores. So easy! Can you?",localizations:{en_US:h+" got "+p+" scores. So easy! Can you?",vi_VN:h+" \u0111\xe3 \u0111\u1ea1t "+p+" \u0111i\u1ec3m! Qu\xe1 d\u1ec5 lu\xf4n. Ch\u01a1i l\u1ea1i n\xe0o!"}},image:t||"",template:"play_turn",data:m,action:"CUSTOM"});case 7:e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),(0,i.tO)(e.t0);case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t,n){return e.apply(this,arguments)}}(),Yr=function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).name="InvalidMatchId",i.message=t||"Invalid match id",i.payload=n,i}return(0,o.Z)(t,e),t}((0,w.Z)(Error)),Zr=n(67),Wr=n.n(Zr),Kr=GameCore.Configs.ApiHost,zr=(function(){var e=(0,r.Z)(u().mark((function e(t){var n;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"single-matches",e.next=3,(0,xe.v)("single-matches",t,{},Kr);case 3:return n=e.sent,e.abrupt("return",(null==n?void 0:n.data)||{});case 5:case"end":return e.stop()}}),e)})))}(),function(){var e=(0,r.Z)(u().mark((function e(){var t;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"single-matches/active",e.next=3,(0,xe.U)("single-matches/active",{},Kr);case 3:return t=e.sent,e.abrupt("return",(null==t?void 0:t.data)||{});case 5:case"end":return e.stop()}}),e)})))}(),function(){var e=(0,r.Z)(u().mark((function e(t,n){var i,a;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i="single-matches/"+t+"/move",e.next=3,(0,xe.v)(i,n,{},Kr);case 3:return a=e.sent,e.abrupt("return",(null==a?void 0:a.data)||{});case 5:case"end":return e.stop()}}),e)})))}(),function(){var e=(0,r.Z)(u().mark((function e(t){var n,i;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="single-matches/"+t+"/finish",e.next=3,(0,xe.v)(n,{},{},Kr);case 3:return i=e.sent,e.abrupt("return",(null==i?void 0:i.data)||{});case 5:case"end":return e.stop()}}),e)})))}(),function(){var e=(0,r.Z)(u().mark((function e(t){var n;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"matches",e.next=3,(0,xe.v)("matches",{opponentPlayerId:t},{},Kr);case 3:return n=e.sent,e.abrupt("return",(null==n?void 0:n.data)||{});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),Xr=function(){var e=(0,r.Z)(u().mark((function e(t){var n,i;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="matches/"+t+"/join",e.next=3,(0,xe.v)(n,{},{},Kr);case 3:return i=e.sent,e.abrupt("return",(null==i?void 0:i.data)||{});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),jr=function(){var e=(0,r.Z)(u().mark((function e(t){var n,i;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="matches/"+t,e.next=3,(0,xe.U)(n,{},Kr);case 3:return i=e.sent,e.abrupt("return",(null==i?void 0:i.data)||{});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Jr=function(){var e=(0,r.Z)(u().mark((function e(t,n,i,a){var s,r;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s="matches/"+t+"/finish",e.next=3,(0,xe.v)(s,{matchId:t,score:n,level:i,extraData:a},{},Kr);case 3:return r=e.sent,e.abrupt("return",(null==r?void 0:r.data)||{});case 5:case"end":return e.stop()}}),e)})));return function(t,n,i,a){return e.apply(this,arguments)}}(),qr=function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).name="InvalidMatchStatus",i.message=t||"The match status is not valid",i.payload=n,i}return(0,o.Z)(t,e),t}((0,w.Z)(Error)),Qr=function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).name="InvalidOpponentId",i.message=t||"Invalid opponent id",i.payload=n,i}return(0,o.Z)(t,e),t}((0,w.Z)(Error)),$r=Qr,eo=function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).name="InvalidBlackPlayerId",i.message=t||"Invalid black player id",i.payload=n,i}return(0,o.Z)(t,e),t}((0,w.Z)(Error)),to=function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).name="InvalidRequestedMatchId",i.message=t||"The matchId in match data not matched with requested matchId",i.payload=n,i}return(0,o.Z)(t,e),t}((0,w.Z)(Error)),no=function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).name="InvalidScore",i.message=t||"The score is not valid",i.payload=n,i}return(0,o.Z)(t,e),t}((0,w.Z)(Error)),io=function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).name="InvalidWhitePlayerId",i.message=t||"Invalid white player id",i.payload=n,i}return(0,o.Z)(t,e),t}((0,w.Z)(Error)),ao=function(e){var t=e.matchId,n=e.score;if(""===t||"string"!==typeof t)throw new Yr(null,{matchId:t});if("number"!==typeof n)throw new no(null,{score:n})},so=function(e){var t=e.matchId,n=e.currentMatchId;if(""===t||"string"!==typeof t)throw new Yr(null,{matchId:t});if(""===n||"string"!==typeof n)throw new Yr(null,{currentMatchId:n});if(t!==n)throw new to(null,{matchId:t,currentMatchId:n})},ro=function(e){var t=e.matchId,n=e.currentMatchId;if(""===t||"string"!==typeof t)throw new Yr(null,{matchId:t});if(""===n||"string"!==typeof n)throw new Yr(null,{currentMatchId:n});if(t!==n)throw new to(null,{matchId:t,currentMatchId:n})},oo=function(e){var t=e.playerId,n=e.match,i=n._id,a=n.playerId,s=n.status;if(""===i||"string"!==typeof i)throw new Yr(null,{matchId:i});if("finished"===s||"string"!==typeof s)throw new qr("This match is finished",{status:s});if(a!==t)throw new Qi(null,{playerId:a,currentPlayerId:t})},co=function(e){var t=e.opponentId;if(""===t||"string"!==typeof t)throw new $r(null,{opponentId:t})},ho=function(e){var t=e.matchId;if(""===t||"string"!==typeof t)throw new Yr(null,{matchId:t})},lo=function(e){var t=e.match,n=t._id,i=t.whitePlayerId,a=t.blackPlayerId;if(""===n||"string"!==typeof n)throw new Yr(null,{matchId:n});if(""===i||"string"!==typeof i)throw new io(null,{whitePlayerId:i});if(""===a||"string"!==typeof a)throw new eo(null,{blackPlayerId:a})},uo=GameCore.Configs,po=uo.Match,mo=(uo.Network,uo.SyncProfileFromAPI),go=function(e){try{return GameCore.Utils.Hash.stringToHash(Ot()(e))}catch(t){return""}},fo=function(e){try{return JSON.parse(GameCore.Utils.Hash.hashToString(e))}catch(t){return""}},Eo=function(){return function(){var e=(0,r.Z)(u().mark((function e(t){var n,a,r,o,c,h,l;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.prev=0,n=window.game,a=n.player,r=n.globalScene,o=n.lang,r.screen.open(ba.o4.NOTIFY_SCREEN,{message:o.Text.LOADING,loading:!0}),t({type:xn,payload:{}}),c=a.getPlayerId(),h=(0,s.Z)({},po.LocalSingleMatchDefault,{status:"active",playerId:c,startedAt:Date.now(),rescued:0}),oo({playerId:c,match:h}),t(Ao(h)),mo&&((l={})[po.SingleMatchStore]=h,window.FBInstant.player.setDataAsync(l)),Pe(po.SingleMatchStore,h),e.next=20;break;case 12:if(e.prev=12,e.t0=e.catch(0),t(Ao(null)),!(e.t0 instanceof Yr)){e.next=17;break}return e.abrupt("return");case 17:if(!(e.t0 instanceof qr)){e.next=19;break}return e.abrupt("return");case 19:(0,i.tO)(e.t0);case 20:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(t){return e.apply(this,arguments)}}()},vo=function(e,t){return function(n,a){try{ao((0,s.Z)({matchId:e},t));var r=a(),o=Js(r),c=js(r);so({matchId:e,currentMatchId:o}),n({type:Mn,payload:{match:t}});var h=t.data;t.data=go(h);var l=(0,s.Z)({},c,t,{_id:o});if(mo){var u={};u[po.SingleMatchStore]=l,window.FBInstant.player.setDataAsync(u)}Pe(po.SingleMatchStore,l)}catch(d){if(d instanceof Yr)return;(0,i.tO)(d)}}},So=function(e){return function(){var t=(0,r.Z)(u().mark((function t(n,a){var r,o,c,h,l,d,p,m,g;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:t.prev=0,r=window.game.player,ho({matchId:e}),o=a(),c=Js(o),h=r.getPlayerId(),ro({matchId:e,currentMatchId:c}),n({type:"MATCH_SINGLE_FINISH_REQUEST",payload:{matchId:e}}),l=js(o),oo({playerId:h,match:l}),d=(0,s.Z)({},po.LocalSingleMatchDefault,l,{_id:e,status:"finished",playerId:h,finishAt:Date.now()}),n(Ao(d)),p=d.data,(m=(0,s.Z)({},d)).data=go(p),mo&&((g={})[po.SingleMatchStore]=m,window.FBInstant.player.setDataAsync(g)),Pe(po.SingleMatchStore,m),t.next=27;break;case 19:if(t.prev=19,t.t0=t.catch(0),n(Ao(null)),!(t.t0 instanceof Yr)){t.next=24;break}return t.abrupt("return");case 24:if(!(t.t0 instanceof qr)){t.next=26;break}return t.abrupt("return");case 26:(0,i.tO)(t.t0);case 27:case"end":return t.stop()}}),t,null,[[0,19]])})));return function(e,n){return t.apply(this,arguments)}}()},Ao=function(e){return{type:Ln,payload:{match:e}}},To=function(){return{type:Nn,payload:{}}},yo=function(e){return function(){var t=(0,r.Z)(u().mark((function t(n){var a,s,r,o,c,h;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a=window.game,s=a.profile,r=a.globalScene,o=a.lang,r.screen.open(ba.o4.NOTIFY_SCREEN,{message:o.Text.LOADING,loading:!0}),c=e.playerId,co({opponentId:c}),n({type:Bn,payload:{opponentInfo:e}}),t.next=8,zr(c);case 8:return h=t.sent,lo({match:h}),t.next=12,s.requestProfiles([c]);case 12:n(bo(h)),t.next=23;break;case 15:if(t.prev=15,t.t0=t.catch(0),n(bo(null)),!(t.t0 instanceof Yr)){t.next=20;break}return t.abrupt("return");case 20:if(!(t.t0 instanceof $r)){t.next=22;break}return t.abrupt("return");case 22:(0,i.tO)(t.t0);case 23:case"end":return t.stop()}}),t,null,[[0,15]])})));return function(e){return t.apply(this,arguments)}}()},Io=function(e){return function(){var t=(0,r.Z)(u().mark((function t(n){var a,s,r,o,c,h,l,d,p,m,g;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a=window.game,s=a.player,r=a.profile,o=a.globalScene,c=a.lang,o.screen.open(ba.o4.NOTIFY_SCREEN,{message:c.Text.LOADING,loading:!0}),ho({matchId:e}),n({type:Gn,payload:{matchId:e}}),t.next=7,Xr(e);case 7:if(h=t.sent,lo({match:h}),l=h.status,d=h.whitePlayerId,p=h.blackPlayerId,l!==Qn){t.next=16;break}return m=s.getPlayerId(),g=m===d?p:d,t.next=16,r.requestProfiles([g]);case 16:n(bo(h)),t.next=25;break;case 19:if(t.prev=19,t.t0=t.catch(0),n(bo(null)),!(t.t0 instanceof Yr)){t.next=24;break}return t.abrupt("return");case 24:(0,i.tO)(t.t0);case 25:case"end":return t.stop()}}),t,null,[[0,19]])})));return function(e){return t.apply(this,arguments)}}()},Co=function(e,t){return function(){var n=(0,r.Z)(u().mark((function n(a){var s,r,o,c,h,l,d,p,m,g,f;return u().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,s=window.game,r=s.player,o=s.globalScene,c=s.lang,o.screen.open(ba.o4.NOTIFY_SCREEN,{message:c.Text.LOADING,loading:!0}),ho({matchId:e}),a({type:Un,payload:{matchId:e,opponentInfo:t}}),n.next=7,jr(e);case 7:h=n.sent,lo({match:h}),l=h.whitePlayerId,d=h.whitePlayerScore,p=h.blackPlayerScore,m=r.getPlayerId(),g=r.getPlayerData(),f=g.score,a(bo(h,{score:m===l?d:p,bestScore:f})),n.next=23;break;case 17:if(n.prev=17,n.t0=n.catch(0),a(bo(null)),!(n.t0 instanceof Yr)){n.next=22;break}return n.abrupt("return");case 22:(0,i.tO)(n.t0);case 23:case"end":return n.stop()}}),n,null,[[0,17]])})));return function(e){return n.apply(this,arguments)}}()},Oo=function(e,t,n){return function(){var a=(0,r.Z)(u().mark((function a(s){var r,o,c,h,l;return u().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,r=window.game,o=r.globalScene,c=r.lang,o.screen.open(ba.o4.NOTIFY_SCREEN,{message:c.Text.LOADING,loading:!0}),ho({matchId:e}),s({type:Fn,payload:{matchId:e,score:t,extraData:n}}),h=n.level,a.next=8,Jr(e,t,h,n);case 8:return l=a.sent,lo({match:l}),a.next=12,s(bo(l));case 12:a.next=20;break;case 14:if(a.prev=14,a.t0=a.catch(0),s(bo(null)),!(a.t0 instanceof Yr)){a.next=19;break}return a.abrupt("return");case 19:(0,i.tO)(a.t0);case 20:case"end":return a.stop()}}),a,null,[[0,14]])})));return function(e){return a.apply(this,arguments)}}()},bo=function(e,t,n){return void 0===n&&(n=null),{type:Hn,payload:{match:e,opponentInfo:t,current:n}}},Ro=function(e){return{type:Yn,payload:{opponentInfo:e}}},Do=function(e,t){return{type:Kn,payload:{matchId:e,players:t}}},_o=function(e){return{type:Xn,payload:{match:e}}},wo=function(e,t){return function(n,a){try{ao((0,s.Z)({matchId:e},t));var r=a(),o=or(r),c=rr(r);so({matchId:e,currentMatchId:o}),n({type:jn,payload:{match:t}});var h=t.data;t.data=go(h);var l=(0,s.Z)({},c,t,{_id:o}),u=window.game.player;if(mo){var d={};d[po.JourneyMatchStore+"-"+u.getPlayerId()]=l,window.FBInstant.player.setDataAsync(d)}Pe(po.JourneyMatchStore+"-"+u.getPlayerId(),l)}catch(p){if(p instanceof Yr)return;(0,i.tO)(p)}}},Po=function(){return function(){var e=(0,r.Z)(u().mark((function e(t){var n,a,r,o,c,h,l,d,p,m;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=window.game.player,a=n.getPlayer(),r=a.playerId,e.prev=2,t({type:kn,payload:{}}),e.next=6,window.FBInstant.player.getDataAsync(["level"]);case 6:o=e.sent,c=o.level,h=we(po.JourneyMatchStore+"-"+r)||{},l=h.data,d=h.level,h.data=fo(l),c&&c!==d&&(h.data={}),c||(c=d,window.FBInstant.player.setDataAsync({level:c})),p=c||1,m=(0,s.Z)({},h,{level:p,playerId:r}),t({type:jn,payload:{match:m}}),e.next=22;break;case 19:e.prev=19,e.t0=e.catch(2),(0,i.tO)(e.t0);case 22:case"end":return e.stop()}}),e,null,[[2,19]])})));return function(t){return e.apply(this,arguments)}}()},xo=function(e){return{type:Jn,payload:{level:e}}},ko=(function(){var e=(0,r.Z)(u().mark((function e(){var t,n,i,a,s,r,o,c,h;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=window.game.player,n=t.getPlayerId(),i=po.JourneyMatchStore+"-"+n,e.next=5,window.FBInstant.player.getDataAsync([i,"level"]);case 5:if(e.t0=e.sent,e.t0){e.next=8;break}e.t0={};case 8:return a=e.t0,s=we(i)||{},r=a.level||1,o=(a[i]||{}).level||1,c=s.level||1,(h=r)<o&&(h=o),h<c&&(h=c),e.abrupt("return",h);case 17:case"end":return e.stop()}}),e)})))}(),function(e){return{type:_n,payload:{playerId:e}}}),Mo=function(e,t){return{type:wn,payload:{playerId:e,stats:t}}},Lo=function(e){return{type:Pn,payload:{stats:e}}},No=GameCore.Configs,Go=No.Match,Bo=No.SyncProfileFromAPI,Fo=function(e){var t=e.contextId;if(""===t||"string"!==typeof t)throw new $a(null,{contextId:t})},Uo=null,Ho=function(e){clearTimeout(Uo),Uo=setTimeout((function(){window.game.globalScene.screen.close(ba.o4.NOTIFY_SCREEN)}),e)},Vo=function(){return{type:In,payload:{}}},Yo=function(){return function(e){try{e(To()),e($o(oa))}catch(t){(0,i.tO)(t)}}},Zo=function(){return function(e){try{e(To()),e($o(aa))}catch(t){(0,i.tO)(t)}}},Wo=function(){return function(){var e=(0,r.Z)(u().mark((function e(t,n){var a,r,o,c,h,l,d,p,m;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,r=window.game,o=r.globalScene,c=r.lang,o.screen.open(ba.o4.NOTIFY_SCREEN,{message:c.Text.LOADING,loading:!0}),h=n(),l=Ds(h),d=js(h),!(Rt()(a=[aa,oa]).call(a,l)>=0)){e.next=14;break}if(t(To()),!Bo){e.next=13;break}return(p={})[Go.SingleMatchStore]=(0,s.Z)({},d,{data:"",rescued:0,score:0}),e.next=13,window.FBInstant.player.setDataAsync(p);case 13:t(Eo());case 14:return m=null,l===sa&&(m=tr(h),t({type:Vn,payload:{}})),t(ko()),e.next=19,t($o(l,m));case 19:e.next=24;break;case 21:e.prev=21,e.t0=e.catch(0),(0,i.tO)(e.t0);case 24:return e.prev=24,Ho(300),e.finish(24);case 27:case"end":return e.stop()}}),e,null,[[0,21,24,27]])})));return function(t,n){return e.apply(this,arguments)}}()},Ko=function(e,t){return void 0===e&&(e="10"),void 0===t&&(t=!1),function(n){try{n(zo("reset",e,t))}catch(a){(0,i.tO)(a)}}},zo=function(e,t,n){return void 0===t&&(t="10"),void 0===n&&(n=!1),function(){var a=(0,r.Z)(u().mark((function a(s){var r,o,c,h,l,d,p,m,g,f,E,v,S,A,T,y,I,C;return u().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(a.prev=0,r=window.game,o=r.player,c=r.facebook,h=r.globalScene,l=r.lang,h.screen.open(ba.o4.NOTIFY_SCREEN,{message:l.Text.LOADING,loading:!0}),d=e,p=c.contextType,t||(m=GameCore.Configs.PlayerIdMock,g=GameCore.Configs.PlayerIdMock2,t=o.getPlayerId()===m?g:m),e){a.next=15;break}return a.next=9,c.chooseAsync();case 9:if(!1!==(d=a.sent)){a.next=13;break}return n&&h.events.emit(fa.K.SWITCH,fa.C.DASHBOARD_SCENE),a.abrupt("return");case 13:a.next=25;break;case 15:if(!t||t===ia.playerId){a.next=23;break}return a.next=18,c.createAsync(t);case 18:if(!1!==(d=a.sent)){a.next=22;break}return n&&h.events.emit(fa.K.SWITCH,fa.C.DASHBOARD_SCENE),a.abrupt("return");case 22:d||"reset"===e||(d=e);case 23:p=c.contextType,s(ua(d,p));case 25:return Fo({contextId:d}),f=o.getPlayerId(),E=o.getConnectedPlayers(),a.next=30,c.getContextPlayers(f);case 30:return v=a.sent,t!==(S=ia).playerId&&E[t]?S=E[t]:1===v.length&&(S=v[0]),s(ko()),T=(A=S).playerId,y=A.name,I=A.photo,C={playerId:T,name:y,photo:I},a.next=38,s($o(sa,C));case 38:s(ua(d,p)),a.next=50;break;case 41:if(a.prev=41,a.t0=a.catch(0),!(a.t0 instanceof $a)){a.next=45;break}return a.abrupt("return");case 45:if("USER_INPUT"!==(null==a.t0?void 0:a.t0.code)){a.next=47;break}return a.abrupt("return");case 47:if("INVALID_OPERATION"!==(null==a.t0?void 0:a.t0.code)){a.next=49;break}return a.abrupt("return");case 49:(0,i.tO)(a.t0);case 50:return a.prev=50,Ho(1e3),a.finish(50);case 53:case"end":return a.stop()}}),a,null,[[0,41,50,53]])})));return function(e){return a.apply(this,arguments)}}()},Xo=function(e,t){return function(){var n=(0,r.Z)(u().mark((function n(a,s){var r,o,c,h,l,d,p,m,g,f,E,v,S,A,T,y;return u().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,r=window.game,o=r.player,c=r.profile,h=r.facebook,l=r.globalScene,d=r.lang,l.screen.open(ba.o4.NOTIFY_SCREEN,{message:d.Text.LOADING,loading:!0}),p=s(),m=o.getPlayerId(p),!((g=o.getConnectedPlayers(p)).length>0)||g[t]){n.next=9;break}return l.events.emit(fa.K.SWITCH,fa.C.DASHBOARD_SCENE),n.abrupt("return");case 9:return f=ia,n.next=12,h.getContextPlayers(m);case 12:if(E=n.sent,t===m||t===f.playerId||!g[t]){n.next=17;break}f=g[t],n.next=25;break;case 17:if(1!==E.length){n.next=21;break}f=E[0],n.next=25;break;case 21:return n.next=23,c.requestProfiles([t]);case 23:(v=c.getProfiles())[t]&&(f=v[t]);case 25:return n.next=28,a(Co(e,f));case 28:if(p=s(),nr(p,{playerId:m})!==ia.playerId){n.next=33;break}return n.next=33,a(Io(e));case 33:if(p=s(),nr(p,{playerId:m})===m||!g[t]){n.next=38;break}return a(Ko(t,!0)),n.abrupt("return");case 38:if($s(p)===e){n.next=42;break}return l.events.emit(fa.K.SWITCH,fa.C.DASHBOARD_SCENE),n.abrupt("return");case 42:if(S=er(p),A=ir(p,{playerId:m}),a(tc({mode:sa,status:S})),T=h.getContextID(),y=h.contextType,a(ua(T,y)),!A){n.next=53;break}return n.next=51,o.requestConnectedPlayers();case 51:return l.events.emit(fa.K.SWITCH,fa.C.GAME_SCENE),n.abrupt("return");case 53:l.events.emit(fa.K.SWITCH,fa.C.GAME_SCENE),n.next=59;break;case 56:n.prev=56,n.t0=n.catch(0),(0,i.tO)(n.t0);case 59:return n.prev=59,Ho(1e3),n.finish(59);case 62:case"end":return n.stop()}}),n,null,[[0,56,59,62]])})));return function(e,t){return n.apply(this,arguments)}}()},jo=function(){return function(e){try{e(Jo())}catch(t){(0,i.tO)(t)}}},Jo=function(){return function(){var e=(0,r.Z)(u().mark((function e(t,n){var a,o,c,h,l,d,p;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a=window.game,o=a.analytics,c=a.facebook,h=a.globalScene,l=c.getContextID(),d=n(),p=cr(d)||1,o.event(Vt._.MATCH_START,{game_mode:GameCore.Utils.String.toUpperCamelCase(ca),level:p}),t(Vo()),e.next=9,t(function(){var e=(0,r.Z)(u().mark((function e(t,n){var a,r,o,c,h,l,d,p;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,a=window.game.player,r=a.getPlayerId(),o=po.JourneyMatchStore+"-"+r,c=n(),h=rr(c),l=we(o)||{},!mo){e.next=17;break}return e.next=10,window.FBInstant.player.getDataAsync([o]);case 10:if(e.t0=e.sent,e.t0){e.next=13;break}e.t0={};case 13:e.t1=o,(d=e.t0[e.t1])&&(d.updateAt||0)>=(l.updateAt||0)&&(l=(0,s.Z)({},d)),d||window.FBInstant.player.setDataAsync({keyData:l});case 17:p=l.data,l.data=fo(p),l.level=h.level,oo({playerId:r,match:l}),t(_o(l)),Pe(po.JourneyMatchStore+"-"+r,l),e.next=35;break;case 25:if(e.prev=25,e.t2=e.catch(0),t(_o(null)),!(e.t2 instanceof Yr)){e.next=30;break}return e.abrupt("return");case 30:if(!(e.t2 instanceof Qi)){e.next=32;break}return e.abrupt("return");case 32:if(!(e.t2 instanceof qr)){e.next=34;break}return e.abrupt("return");case 34:(0,i.tO)(e.t2);case 35:case"end":return e.stop()}}),e,null,[[0,25]])})));return function(t,n){return e.apply(this,arguments)}}());case 9:if(d=n(),or(d)){e.next=14;break}return e.next=14,t(function(){var e=(0,r.Z)(u().mark((function e(t,n){var a,r,o,c,h,l,d,p,m;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.prev=0,a=window.game,r=a.player,o=a.globalScene,c=a.lang,o.screen.open(ba.o4.NOTIFY_SCREEN,{message:c.Text.LOADING,loading:!0}),t({type:zn,payload:{}}),h=n(),l=cr(h)||1,d=r.getPlayerId(),p=(0,s.Z)({},po.LocalSingleMatchDefault,{level:l,status:"active",playerId:d,startedAt:Date.now()}),oo({playerId:d,match:p}),t(_o(p)),mo&&((m={})[po.JourneyMatchStore+"-"+d]=p,window.FBInstant.player.setDataAsync(m)),Pe(po.JourneyMatchStore+"-"+d,p),e.next=22;break;case 14:if(e.prev=14,e.t0=e.catch(0),t(_o(null)),!(e.t0 instanceof Yr)){e.next=19;break}return e.abrupt("return");case 19:if(!(e.t0 instanceof qr)){e.next=21;break}return e.abrupt("return");case 21:(0,i.tO)(e.t0);case 22:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(t,n){return e.apply(this,arguments)}}());case 14:t({type:Cn,payload:{mode:ca,contextId:l}}),h.events.emit(fa.K.SWITCH,fa.C.JOURNEY_SCENE),e.next=25;break;case 18:if(e.prev=18,e.t0=e.catch(0),!(e.t0 instanceof Yr)){e.next=24;break}return window.game.globalScene.screen.open(ba.o4.NOTIFY_SCREEN,{message:"Sorry!, you can now\ncreate this match!",duration:2500,loading:!1}),e.abrupt("return");case 24:(0,i.tO)(e.t0);case 25:return e.prev=25,Ho(0),e.finish(25);case 28:case"end":return e.stop()}}),e,null,[[0,18,25,28]])})));return function(t,n){return e.apply(this,arguments)}}()},qo=function(){return function(){var e=(0,r.Z)(u().mark((function e(t,n){var a,s,o,c,h,l,d,p,m,g,f,E,v,S,A,T,y,I,C,O,b,R,D,_,w,P,x;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a=window.game,s=a.analytics,o=a.facebook,c=a.globalScene,h=a.lang,c.screen.open(ba.o4.NOTIFY_SCREEN,{message:h.Text.LOADING,loading:!0}),l=n(),d=Ds(l),p=lr(l),m=p.score,g=void 0===m?0:m,f=p.level,E=void 0===f?0:f,v=p.bestScore,setTimeout((function(){t(Hs(g))}),v<g?2e3:0),t(Qo(g)),e.next=11,t(ec(d,{score:g}));case 11:if(l=n(),S=ws(l),A=Ps(l),T=Math.floor((A-S)/1e3),s.event(Vt._.MATCH_END,{game_mode:GameCore.Utils.String.toUpperCamelCase(d),level:E,level_name:"level_"+E,time_played:T}),y=o.getContextID(),d===ra&&y&&t(function(){var e=(0,r.Z)(u().mark((function e(t,n){var a,s,r,o,c,h,l,d,p;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=window.game.analytics,e.prev=1,s=window.game.facebook.getContextID(),wr({contextId:s}),r=n(),o=sr(r),c=o.playerId,h=o.score,l=lr(r),d=l.score,!c||c===ia.playerId){e.next=25;break}if(!(d>h)){e.next=18;break}return e.next=13,Or(r);case 13:return p=e.sent,e.next=16,Hr(p,r);case 16:e.next=23;break;case 18:return e.next=20,Tr(r);case 20:return p=e.sent,e.next=23,Vr(p,r);case 23:e.next=30;break;case 25:return e.next=27,Tr(r);case 27:return p=e.sent,e.next=30,Vr(p,r);case 30:xr({imageShare:p}),a.event(Vt._.MESSAGE,{message_content_type:"InviteGroup",success:!0}),e.next=38;break;case 34:e.prev=34,e.t0=e.catch(1),a.event(Vt._.MESSAGE,{message_content_type:"InviteGroup",success:!0}),(0,i.tO)(e.t0);case 38:case"end":return e.stop()}}),e,null,[[1,34]])})));return function(t,n){return e.apply(this,arguments)}}()),!y||d!==sa){e.next=27;break}if(I=tr(l),(C=I.playerId)&&C!==ia.playerId){e.next=22;break}return e.abrupt("return");case 22:O=hr(l),b=O[C]||{},R=b.score,D=void 0===R?0:R,_=Qs(l),w=_._id,P=_.whitePlayerFinish,x=_.blackPlayerFinish,t(P&&x?g>D?Fr(C,{matchId:w,contextId:y}):Br(C,{matchId:w,contextId:y}):Ur(C,{matchId:w,contextId:y,score:g}));case 27:e.next=32;break;case 29:e.prev=29,e.t0=e.catch(0),(0,i.tO)(e.t0);case 32:return e.prev=32,Ho(300),e.finish(32);case 35:case"end":return e.stop()}}),e,null,[[0,29,32,35]])})));return function(t,n){return e.apply(this,arguments)}}()},Qo=function(e){return function(t){try{var n=window.game.player,a=n.getPlayerId();ys(a,e).catch((function(e){(0,i.tO)(new Error(e))}));var s=n.getPlayerData(),r=s.score,o=void 0===r?0:r,c=s.level;o<e&&n.setBestScore(e);var h={score:e,level:c};t(Mo(a,h)),t(Lo(h))}catch(l){if(l instanceof bs)return;(0,i.tO)(l)}}},$o=function(e,t){return void 0===t&&(t=null),function(){var n=(0,r.Z)(u().mark((function n(a,o){var c,h,l,d,p,m,g,f,E,v,S,A,T,y,I,C,O,b;return u().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,h=window.game,l=h.player,d=h.analytics,p=h.facebook,m=h.globalScene,g=p.getContextID(),f=0,E=o(),d.event(Vt._.MATCH_START,{game_mode:GameCore.Utils.String.toUpperCamelCase(e),level:1,level_name:"level_1"}),a(Vo()),-1===Rt()(c=[aa,oa]).call(c,e)){n.next=17;break}return n.next=10,a(function(){var e=(0,r.Z)(u().mark((function e(t){var n,a,r,o,c,h;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,n=window.game.player,t({type:kn,payload:{}}),a=n.getPlayerId(),r=we(po.SingleMatchStore)||{},!mo){e.next=16;break}return e.next=9,window.FBInstant.player.getDataAsync([po.SingleMatchStore]);case 9:if(e.t0=e.sent,e.t0){e.next=12;break}e.t0={};case 12:e.t1=po.SingleMatchStore,(o=e.t0[e.t1])&&(o.updateAt||0)>=(r.updateAt||0)&&(r=o);case 16:c=r.data,h=fo(c),r=(0,s.Z)({},r,{data:h}),oo({playerId:a,match:r}),t(Ao(r)),e.next=33;break;case 23:if(e.prev=23,e.t2=e.catch(0),t(Ao(null)),!(e.t2 instanceof Yr)){e.next=28;break}return e.abrupt("return");case 28:if(!(e.t2 instanceof Qi)){e.next=30;break}return e.abrupt("return");case 30:if(!(e.t2 instanceof qr)){e.next=32;break}return e.abrupt("return");case 32:(0,i.tO)(e.t2);case 33:case"end":return e.stop()}}),e,null,[[0,23]])})));return function(t){return e.apply(this,arguments)}}());case 10:if(E=o(),Js(E)){n.next=16;break}return n.next=16,a(Eo());case 16:f=qs(E);case 17:if(e===ra&&a(Ro(t)),e!==sa){n.next=27;break}return n.next=21,a(yo(t));case 21:E=o(),v=$s(E),S=tr(E),A=S.playerId,g||(g=window.FBInstant.context.getID()),T=dr(E,{opponentId:A}),g&&A&&!T&&a(Gr(A,{contextId:g,matchId:v}));case 27:"online"===e&&a(function(){var e=(0,r.Z)(u().mark((function e(t){var n,i,a,s,r,o,c,h;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=window.game.player,s=a.getPlayer(),r=s.playerId,o=s.name,c=s.photo,t({type:Wn,payload:{playerId:r}}),h={},Ee()(n=Wr()(i=new Array(20)).call(i,null)).call(n,(function(e,t){var n="0"+(t+1);h[n]={playerId:n,name:"MPlayer "+n,photo:"./assets/images/others/avatar.png"}})),h[r]={playerId:r,name:o,photo:c},t(Do("mock",h));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),E=o(),y=l.getPlayerData(E),I=y.score,C=void 0===I?0:I,O=js(E),b=O.rescued,a(Lo({score:f,bestScore:C})),a({type:Cn,payload:{mode:e,contextId:g,rescued:b}}),a(da(e)),m.events.emit(fa.K.SWITCH,fa.C.GAME_SCENE),n.next=45;break;case 38:if(n.prev=38,n.t0=n.catch(0),!(n.t0 instanceof Yr)){n.next=44;break}return window.game.globalScene.screen.open(ba.o4.NOTIFY_SCREEN,{message:"Sorry!, you can now\ncreate this match!",duration:2500,loading:!1}),n.abrupt("return");case 44:(0,i.tO)(n.t0);case 45:return n.prev=45,Ho(0),n.finish(45);case 48:case"end":return n.stop()}}),n,null,[[0,38,45,48]])})));return function(e,t){return n.apply(this,arguments)}}()},ec=function(e,t){return function(){var n=(0,r.Z)(u().mark((function n(i,a){var s,r,o,c,h,l,d,p,m,g,f;return u().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(r=window.game,o=r.player,r.globalScene,c=t.score,h=void 0===c?0:c,l=t.level,d=void 0===l?0:l,p=a(),!(Rt()(s=[aa,oa]).call(s,e)>=0)){n.next=7;break}return m=Js(p),n.next=7,i(So(m));case 7:if(e===ra&&(i({type:Zn,payload:{}}),g=o.getPlayerId(),i(Mo(g,t))),e!==sa){n.next=12;break}return f=$s(p),n.next=12,i(Oo(f,h,{level:d}));case 12:i({type:On,payload:{mode:e}}),fr.emit(es.GAME_OVER);case 14:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}()},tc=function(e){return function(t){var n=e.mode,a=e.status;t({type:bn,payload:{mode:n,status:a}}),(0,i.sw)("game-mode",n)}},nc=n(465),ic={targets:[],yoyo:!0,duration:120,ease:Phaser.Math.Easing.Circular.Out,props:{scale:{from:1,to:1.3}}},ac=function(e){function t(t){return e.call(this,ic,t)||this}return(0,o.Z)(t,e),t}(ka.Z),sc=function(e){function t(t,n,i){var a;return(a=e.call(this,t)||this).buttonFooter=void 0,a.textButtonFooter=void 0,a.tweenScaleButton=void 0,a.createButton(n,i),a.scene.add.existing((0,Ga.Z)(a)),a}(0,o.Z)(t,e);var n=t.prototype;return n.createButton=function(e,t){this.buttonFooter=this.scene.make.image({key:e,frame:t});var n=this.scene.world.getPixelRatio(),i=this.buttonFooter,a=i.width,s=i.height;this.buttonFooter.setWorldSize(a/n,s/n),this.add(this.buttonFooter)},n.createText=function(e,t){var n=this.scene.world.getPixelRatio();this.textButtonFooter=this.scene.make.image({key:e,frame:t});var i=this.textButtonFooter,a=i.width,s=i.height;this.textButtonFooter.setWorldSize(a/n,s/n),this.add(this.textButtonFooter),Phaser.Display.Align.In.TopCenter(this.textButtonFooter,this.buttonFooter,0,-43)},n.setFrameButton=function(e){this.buttonFooter.setFrame(e)},n.setFrameText=function(e){this.textButtonFooter.setFrame(e)},n.playTweenClickButton=function(){var e,t=this.buttonFooter.scale;null!=(e=this.tweenScaleButton)&&null!=(e=e.tween)&&e.isPlaying()||(this.tweenScaleButton=new ac({targets:[this.buttonFooter],duration:150,props:{scale:{from:t,to:t-.1}}}),this.tweenScaleButton.play())},(0,X.Z)(t,[{key:"onClick",set:function(e){this.setInteractive({useHandCursor:!0}),this.on(Phaser.Input.Events.POINTER_DOWN,e)}}]),t}(Phaser.GameObjects.Container),rc=sc,oc=Fa.Z.DEFAULT,cc=oc.KEY,hc=oc.FRAME,lc=function(e){function t(t){var n;return(n=e.call(this,t)||this).background=void 0,n.buttonModeDice=void 0,n.buttonAdventure=void 0,n.textModeDice=void 0,n.textAdventure=void 0,n.tweenScaleButton=void 0,n.createBackground(),n.createButtons(),n.scene.add.existing((0,Ga.Z)(n)),n}(0,o.Z)(t,e);var n=t.prototype;return n.createBackground=function(){var e=this.scene.make.image({key:cc,frame:hc.BOTTOM_PANEL_TOP,origin:{x:.5,y:1}});e.setDepth(Oa.Z.BACKGROUND),e.setWorldSize(375,12);var t=this.scene.make.image({key:cc,frame:hc.BOTTOM_PANEL_BOT,origin:{x:.5,y:1}});t.setDepth(Oa.Z.BACKGROUND),t.setWorldSize(375,102),this.add([t,e]),Phaser.Display.Align.In.TopCenter(e,t,0,12)},n.createButtons=function(){this.createButtonModeDice(),this.createButtonAdventure()},n.createButtonModeDice=function(){this.buttonModeDice=new rc(this.scene,cc,hc.ICON_MODE_DICE_ON),this.buttonModeDice.setSize(94,70),this.buttonModeDice.createText(cc,hc.TEXT_MODE_DICE_ON),this.add(this.buttonModeDice),Phaser.Display.Align.In.Center(this.buttonModeDice,this,-60,-61)},n.createButtonAdventure=function(){this.buttonAdventure=new rc(this.scene,cc,hc.ICON_ADVENTURE_OFF),this.buttonAdventure.setSize(94,70),this.buttonAdventure.createText(cc,hc.TEXT_ADVENTURE_OFF),this.add(this.buttonAdventure),Phaser.Display.Align.In.Center(this.buttonAdventure,this,60,-61)},n.clickButtonModeDice=function(){this.buttonModeDice.setFrameButton(hc.ICON_MODE_DICE_ON),this.buttonModeDice.setFrameText(hc.TEXT_MODE_DICE_ON),this.buttonAdventure.setFrameButton(hc.ICON_ADVENTURE_OFF),this.buttonAdventure.setFrameText(hc.TEXT_ADVENTURE_OFF),this.buttonModeDice.playTweenClickButton()},n.clickButtonAdventure=function(){this.buttonModeDice.setFrameButton(hc.ICON_MODE_DICE_OFF),this.buttonModeDice.setFrameText(hc.TEXT_MODE_DICE_OFF),this.buttonAdventure.setFrameButton(hc.ICON_ADVENTURE_ON),this.buttonAdventure.setFrameText(hc.TEXT_ADVENTURE_ON),this.buttonAdventure.playTweenClickButton()},t}(Phaser.GameObjects.Container),uc=lc,dc=Fa.Z.DEFAULT,pc=dc.KEY,mc=dc.FRAME,gc=function(e){function t(t){var n;return(n=e.call(this,t,pc,mc.MINOR_BUTTON)||this).button.setWorldSize(41,37),n.setName("Setting"),n.createIcon(),n}return(0,o.Z)(t,e),t.prototype.createIcon=function(){var e=this.scene.make.image({key:pc,frame:mc.ICON_SETTING});e.setWorldSize(25,24),this.add(e),Phaser.Display.Align.In.Center(e,this)},t}(Ba.Z),fc=gc,Ec=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n.buttonSetting=void 0,n.scene=t,n.createButtons(),n.scene.add.existing((0,Ga.Z)(n)),n}(0,o.Z)(t,e);var n=t.prototype;return n.createButtons=function(){this.createButtonSetting()},n.createButtonSetting=function(){this.buttonSetting=new fc(this.scene),this.add(this.buttonSetting),Phaser.Display.Align.In.Center(this.buttonSetting,this,-148,40)},t}(Phaser.GameObjects.Container),vc=Ec,Sc=n(460),Ac=Fa.Z.DEFAULT,Tc=Ac.KEY,yc=Ac.FRAME,Ic=function(e){function t(t){var n;return(n=e.call(this,t,Tc,yc.BUTTON_LIGHT)||this).button.setWorldSize(227,49),n.setName("PlayJourney"),n.createIcon(),n.createText(),n}(0,o.Z)(t,e);var n=t.prototype;return n.createIcon=function(){var e=this.scene.make.image({key:Tc,frame:yc.ICON_PLAY});e.setWorldSize(16,21),this.add(e),Phaser.Display.Align.In.Center(e,this,-31,0)},n.createText=function(){var e=this.scene.world.getPixelRatio(),t=this.scene.make.image({key:Tc,frame:yc.TEXT_PLAY_DASHBOARD}),n=t.width,i=t.height;t.setWorldSize(n/e,i/e),this.add(t),Phaser.Display.Align.In.Center(t,this,16,1)},t}(Ba.Z),Cc=Ic,Oc=Fa.Z.DEFAULT,bc=Oc.KEY,Rc=Oc.FRAME,Dc=function(e){function t(t){var n;return(n=e.call(this,t,bc,Rc.BUTTON_GREEN)||this).text=void 0,n.icon=void 0,n.button.setWorldSize(227,49),n.setName("PlaySolo"),n.createIcon(),n.createText(),n.alignIconAndText(),n}(0,o.Z)(t,e);var n=t.prototype;return n.createIcon=function(){this.icon=this.scene.make.image({key:bc,frame:Rc.ICON_PLAY_SOLO}),this.icon.setWorldSize(29,29),this.add(this.icon),Phaser.Display.Align.In.Center(this.icon,this,-59,1)},n.createText=function(){var e=this.scene.world.getPixelRatio();this.text=this.scene.make.image({key:bc,frame:Rc.TEXT_PLAY_SOLO});var t=this.text,n=t.width,i=t.height;this.text.setWorldSize(n/e,i/e),this.add(this.text)},n.alignIconAndText=function(){var e=this.icon.width,t=this.text.width,n=e+t;Phaser.Display.Align.In.Center(this.icon,this,-n/2+e/2-5),Phaser.Display.Align.In.Center(this.text,this,n/2-t/2+5)},t}(Ba.Z),_c=Dc,wc="board_highlight",Pc="board_merge_dice",xc="board_remove_highlight",kc="board_remove_dice_merged_highlight",Mc="board_check_game_over",Lc="handle_change_setting_sound",Nc="handle_claim_gift",Gc="best_score_screen_close",Bc="game_over_screen_close",Fc="your_score_screen_close",Uc=Fa.Z.DEFAULT,Hc=Uc.KEY,Vc=Uc.FRAME,Yc=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n.circle=void 0,n.textLevelJourney=void 0,n.scene=t,n.createCircle(),n.createText(),n.alignText(),n}(0,o.Z)(t,e);var n=t.prototype;return n.createCircle=function(){this.circle=this.scene.make.image({key:Hc,frame:Vc.CIRCLE_INACTIVE}),this.circle.setWorldSize(25,24),this.add(this.circle),Phaser.Display.Align.In.Center(this.circle,this)},n.createText=function(){this.textLevelJourney=this.scene.make.bitmapText({font:Wa.Z.PRIMARY.KEY,size:this.scene.fontSize(25),text:"0",origin:{x:.5,y:.5}}),this.add(this.textLevelJourney),Phaser.Display.Align.In.Center(this.textLevelJourney,this.circle,-1,-2.5)},n.setText=function(e){this.textLevelJourney.setText(""+e)},n.getText=function(){return parseInt(this.textLevelJourney.text)},n.changeCircleActive=function(){this.circle.setFrame(Vc.CIRCLE_ACTIVE),this.circle.setWorldSize(25,24)},n.changeCircleInactive=function(){this.circle.setFrame(Vc.CIRCLE_INACTIVE),this.circle.setWorldSize(25,24)},n.alignText=function(){},n.setItemActive=function(e){e?this.setTextLight():this.setTextDark()},n.setTextLight=function(){this.textLevelJourney.setTint(5318681)},n.setTextDark=function(){this.textLevelJourney.setTint(15975573)},t}(Phaser.GameObjects.Container),Zc=Fa.Z.DEFAULT,Wc=Zc.KEY,Kc=Zc.FRAME,zc=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n.backgroundProgress=void 0,n.iconGift=void 0,n.level=void 0,n.levelJourneyFirst=void 0,n.levelJourneySecond=void 0,n.levelJourneyThird=void 0,n.levelJourneyFourth=void 0,n.progressMid=void 0,n.progressRight=void 0,n.canClickGift=!1,n.isClaimGift=!1,n.tweenRunProgress=void 0,n.scene=t,n.createBackGround(),n.createProgressBar(),n.createLevels(),n.createTweenProgressLevel(),n.setOnClickGiftClick(),n.listenEvents(),n}(0,o.Z)(t,e);var n=t.prototype;return n.listenEvents=function(){fr.on(Nc,this.handleClaimGift.bind(this))},n.createBackGround=function(){this.backgroundProgress=this.scene.make.image({key:Wc,frame:Kc.PROGRESS_BACKGROUND}),this.backgroundProgress.setWorldSize(209,26),this.add(this.backgroundProgress),Phaser.Display.Align.In.Center(this.backgroundProgress,this,-5,-4)},n.createLevels=function(){this.levelJourneyFirst=new Yc(this.scene),this.levelJourneySecond=new Yc(this.scene),this.levelJourneyThird=new Yc(this.scene),this.levelJourneyFourth=new Yc(this.scene),this.add(this.levelJourneyFirst),this.add(this.levelJourneySecond),this.add(this.levelJourneyThird),this.add(this.levelJourneyFourth),this.iconGift=this.scene.make.image({key:Wc,frame:Kc.ICON_GIFT}),this.iconGift.setVisible(!1),this.iconGift.setWorldSize(35,40),this.add(this.iconGift),Phaser.Display.Align.In.Center(this.levelJourneyFirst,this.backgroundProgress,-91,.5),Phaser.Display.Align.In.Center(this.levelJourneySecond,this.backgroundProgress,-29.5,.5),Phaser.Display.Align.In.Center(this.levelJourneyThird,this.backgroundProgress,31.5,.5),Phaser.Display.Align.In.Center(this.levelJourneyFourth,this.backgroundProgress,93.5,.5),Phaser.Display.Align.In.Center(this.iconGift,this.backgroundProgress,98,-2)},n.updateTextLevel=function(){var e=this.scene.storage.getState();this.level=cr(e)||1;var t=this.level-(this.level-1)%4;this.levelJourneyFirst.setText(t),this.levelJourneyFirst.setItemActive(this.level>t),this.levelJourneySecond.setText(t+1),this.levelJourneySecond.setItemActive(this.level>t+1),this.levelJourneyThird.setText(t+2),this.levelJourneyThird.setItemActive(this.level>t+2),this.levelJourneyFourth.setText(t+3),this.levelJourneyFourth.setItemActive(this.level>t+3)},n.createProgressBar=function(){this.createProgressBarMid(),this.createProgressBarRight()},n.createProgressBarMid=function(){this.progressMid=this.scene.make.image({key:Wc,frame:Kc.PROGRESS_MIDDLE}),this.progressMid.setOrigin(0,.5),this.progressMid.setWorldSize(7.5,7.5),this.add(this.progressMid),Phaser.Display.Align.In.LeftCenter(this.progressMid,this.backgroundProgress,-5,1.5)},n.createProgressBarRight=function(){this.progressRight=this.scene.make.image({key:Wc,frame:Kc.PROGRESS_RIGHT}),this.progressRight.setWorldSize(7.5,7.5),this.add(this.progressRight),Phaser.Display.Align.In.RightCenter(this.progressRight,this.progressMid,7.5,0)},n.setLevelActive=function(){switch(this.level%4-1){case 2:this.levelJourneyFirst.changeCircleActive(),this.levelJourneySecond.changeCircleActive(),this.levelJourneyThird.changeCircleInactive(),this.levelJourneyFourth.changeCircleInactive();break;case 1:this.levelJourneyFirst.changeCircleActive(),this.levelJourneySecond.changeCircleInactive(),this.levelJourneyThird.changeCircleInactive(),this.levelJourneyFourth.changeCircleInactive();break;case 0:this.levelJourneyFirst.changeCircleInactive(),this.levelJourneySecond.changeCircleInactive(),this.levelJourneyThird.changeCircleInactive(),this.levelJourneyFourth.changeCircleInactive();break;case-1:this.levelJourneyFirst.changeCircleActive(),this.levelJourneySecond.changeCircleActive(),this.levelJourneyThird.changeCircleActive(),this.levelJourneyFourth.changeCircleInactive()}},n.createTweenProgressLevel=function(){this.tweenRunProgress=this.scene.tweens.addCounter({from:0,to:1,duration:5e3,paused:!0,onUpdate:function(e){e.getValue(0)}})},n.runTweenProgressLevel=function(){this.tweenRunProgress.play()},n.setOnClickGiftClick=function(){var e=this;this.iconGift.setInteractive({useHandCursor:!0}).on(Phaser.Input.Events.POINTER_DOWN,(function(){e.handleClaimGift()}))},n.handleClaimGift=function(){this.levelJourneyFirst.setText(this.levelJourneyFirst.getText()+3),this.levelJourneySecond.setText(this.levelJourneySecond.getText()+3),this.levelJourneyThird.setText(this.levelJourneyThird.getText()+3),this.progressMid.setVisible(!1),this.canClickGift=!1,this.isClaimGift=!0,this.levelJourneyFirst.alignText(),this.levelJourneySecond.alignText(),this.levelJourneyThird.alignText(),this.levelJourneyFirst.changeCircleInactive(),this.levelJourneySecond.changeCircleInactive(),this.levelJourneyThird.changeCircleInactive()},n.runAnimProgress=function(){var e=this,t=0;switch(this.level%4-1){case-1:t=150;break;case 1:t=32;break;case 2:t=92}this.scene.tweens.addCounter({delay:50,from:0,to:t,duration:300,onUpdate:function(t){var n=t.getValue(0);e.progressMid.setWorldSize(n,7.5),Phaser.Display.Align.In.RightCenter(e.progressRight,e.progressMid,7.5,0)}})},t}(Phaser.GameObjects.Container),Xc=Fa.Z.DEFAULT,jc=Xc.KEY,Jc=Xc.FRAME,qc=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n.logo=void 0,n.backGroundJourney=void 0,n.buttonPlayJourney=void 0,n.buttonPlaySolo=void 0,n.progressJourneyBar=void 0,n.tweenShowProgress=void 0,n.iconLoading=void 0,n.scene=t,n.createLogo(),n.createBackGroundJourney(),n.createProgressJourneyBar(),n.createTexts(),n.createButtons(),n.createIconLoading(),n.scene.add.existing((0,Ga.Z)(n)),n}(0,o.Z)(t,e);var n=t.prototype;return n.createLogo=function(){this.logo=this.scene.make.image({key:jc,frame:Jc.LOGO}),this.logo.setWorldSize(232,120),this.add(this.logo),Phaser.Display.Align.In.Center(this.logo,this,0,-167)},n.createBackGroundJourney=function(){this.backGroundJourney=this.scene.make.image({key:jc,frame:Jc.POPUP_DASHBOARD}),this.backGroundJourney.setVisible(!0),this.backGroundJourney.setWorldSize(303,136),this.add(this.backGroundJourney),Phaser.Display.Align.In.Center(this.backGroundJourney,this,-1,0)},n.createProgressJourneyBar=function(){this.progressJourneyBar=new zc(this.scene),this.add(this.progressJourneyBar),Phaser.Display.Align.In.Center(this.progressJourneyBar,this.backGroundJourney,0,-20)},n.createTexts=function(){this.createTextAdventure(),this.createTextClassicMode()},n.createTextAdventure=function(){var e=this.scene.world.getPixelRatio(),t=this.scene.make.image({key:jc,frame:Jc.TEXT_ADVENTURE_LEVEL}),n=t.width,i=t.height;t.setWorldSize(n/e,i/e),this.add(t),Phaser.Display.Align.In.Center(t,this.backGroundJourney,0,-50)},n.createTextClassicMode=function(){var e=this.scene.world.getPixelRatio(),t=this.scene.make.image({key:jc,frame:Jc.TEXT_CLASSIC_MODE}),n=t.width,i=t.height;t.setWorldSize(n/e,i/e),this.add(t),Phaser.Display.Align.In.Center(t,this,0,90)},n.createButtons=function(){this.createButtonPlayJourney(),this.createButtonPlaySolo()},n.createButtonPlayJourney=function(){this.buttonPlayJourney=new Cc(this.scene),this.add(this.buttonPlayJourney),Phaser.Display.Align.In.Center(this.buttonPlayJourney,this.backGroundJourney,1,23)},n.createButtonPlaySolo=function(){this.buttonPlaySolo=new _c(this.scene),this.add(this.buttonPlaySolo),Phaser.Display.Align.In.Center(this.buttonPlaySolo,this,0,131)},n.createIconLoading=function(){this.iconLoading=new Sc.Z(this.scene),this.add(this.iconLoading),Phaser.Display.Align.In.Center(this.iconLoading,this.backGroundJourney)},n.showLoading=function(){this.iconLoading.setVisible(!0),this.progressJourneyBar.setVisible(!1),this.buttonPlayJourney.setVisible(!1)},n.showContent=function(){this.iconLoading.setVisible(!1),this.progressJourneyBar.setVisible(!0),this.runAnimShow(),this.buttonPlayJourney.setVisible(!0)},n.runAnimShow=function(){var e=this;this.tweenShowProgress=this.scene.tweens.add({targets:[this.progressJourneyBar,this.buttonPlayJourney],duration:300,ease:Phaser.Math.Easing.Quartic.In,props:{scale:{from:0,to:1,start:0}},paused:!0,onComplete:function(){e.progressJourneyBar.updateTextLevel(),e.progressJourneyBar.setLevelActive(),e.progressJourneyBar.runAnimProgress()}}),this.progressJourneyBar.setScale(0).setVisible(!0),this.buttonPlayJourney.setScale(0).setVisible(!0),this.tweenShowProgress.play()},t}(Phaser.GameObjects.Container),Qc=qc,$c=Fa.Z.DEFAULT,eh=$c.KEY,th=$c.FRAME,nh=function(e){function t(t,n,i,a,s,r){var o;return(o=e.call(this,t,n,i)||this).popupTop=void 0,o.popupMiddle=void 0,o.popupBottom=void 0,o.payload=void 0,o.payload=r,o.setSize(a,s),o.createBackground(),o.setSizePopup(),o.alignPopup(),o.scene.add.existing((0,Ga.Z)(o)),o}(0,o.Z)(t,e);var n=t.prototype;return n.createBackground=function(){var e,t,n;this.popupTop=this.scene.make.image({key:eh,frame:(null==(e=this.payload)?void 0:e.frameTop)||th.POPUP_TOP}),this.add(this.popupTop),this.popupBottom=this.scene.make.image({key:eh,frame:(null==(t=this.payload)?void 0:t.frameBottom)||th.POPUP_BOTTOM}),this.add(this.popupBottom),this.popupMiddle=this.scene.make.image({key:eh,frame:(null==(n=this.payload)?void 0:n.frameMiddle)||th.POPUP_MIDDLE}),this.add(this.popupMiddle)},n.setSizePopup=function(){var e=this.width*this.popupTop.height/this.popupTop.width,t=this.width*this.popupBottom.height/this.popupBottom.width,n=this.height-e-t;this.popupTop.setWorldSize(this.width,e),this.popupBottom.setWorldSize(this.width,t),this.popupMiddle.setWorldSize(this.width,n)},n.alignPopup=function(){var e=-this.popupMiddle.displayHeight/2-this.popupTop.displayHeight/2,t=this.popupMiddle.displayHeight/2+this.popupBottom.displayHeight/2;Phaser.Display.Align.In.Center(this.popupTop,this,0,e),Phaser.Display.Align.In.Center(this.popupBottom,this,0,t),Phaser.Display.Align.In.Center(this.popupMiddle,this)},t}(Phaser.GameObjects.Container),ih=nh,ah=n(632),sh=(function(e){function t(t){var n;return(n=e.call(this,t,"UpdateAbleObject")||this).updateInfo=void 0,n}(0,o.Z)(t,e)}(Phaser.GameObjects.GameObject),function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).classType=void 0,i.listConfigs=void 0,i.padding=void 0,i.startObjectIndex=void 0,i.endObjectIndex=void 0,i.listObjects=void 0,i.classType=n.classType,i.listConfigs=n.listConfigs,i.padding=n.padding?n.padding:0,i.objects.classType=i.classType,i.updateConfig(i.listConfigs),i}(0,o.Z)(t,e);var n=t.prototype;return n.reset=function(){e.prototype.reset.call(this),this.killAndHideAll()},n.getChildren=function(){var e;return ge()(e=this.listObjects).call(e,(function(e){return void 0!=e&&e.active}))},n.updateConfig=function(e){var t;this.reset(),this.listConfigs=e,this.listObjects=Wr()(t=new Array(e.length)).call(t,void 0),this.addObjectIndex(0,0);var n=this.getEndObjectIndex();this.addObjectIndex(1,n),this.startObjectIndex=this.getStartObjectIndex(),this.endObjectIndex=this.getEndObjectIndex(),this.updateMaxHeight(),this.value=this.marginTop},n.killAndHideAll=function(){var e,t=this;this.listObjects instanceof Array&&Ee()(e=this.listObjects).call(e,(function(e){void 0!==e&&t.objects.killAndHide(e)}))},n.setItemPosition=function(e,t){var n=e.height;e.setPosition(0,n/2+(n+this.padding)*t-this.height/2)},n.updateMaxHeight=function(){return this.maxHeight=Math.max(this.listConfigs.length*(this.objHeight+this.padding)-this.padding+this.marginBottom-this.height,0)},n.updateObject=function(e){this.objects.incY(e);var t=this.getStartObjectIndex(),n=this.getEndObjectIndex();t!=this.startObjectIndex&&(t>this.startObjectIndex?this.killObjectIndex(this.startObjectIndex,t-1):this.addObjectIndex(t,this.startObjectIndex-1),this.startObjectIndex=t),n!=this.endObjectIndex&&(n<this.endObjectIndex?this.killObjectIndex(n+1,this.endObjectIndex):this.addObjectIndex(this.endObjectIndex+1,n),this.endObjectIndex=n)},n.killObjectIndex=function(e,t){for(var n=e;n<=t;n++){var i=this.listObjects[n];i&&(this.objects.killAndHide(i),this.listObjects[n]=void 0)}},n.addObjectIndex=function(e,t){for(var n=e;n<=t;n++){var i=this.padding,a=this.listConfigs;if(n>=a.length)return;var s=this.objects.getFirstDead(!0),r=s.height,o=r/2+(r+i)*n+this.value-this.height/2;s.updateInfo(a[n]),s.setPosition(0,o),s.setActive(!0),s.setVisible(!0),this.addAt(s),this.listObjects[n]=s}},n.getStartObjectIndex=function(){var e=this.objHeight,t=this.padding;return Math.max(Math.floor((0-this.value)/(e+t)),0)},n.getEndObjectIndex=function(){var e=this.objHeight,t=this.padding,n=this.listConfigs,i=e+t;return Math.min(Math.floor((this.height-this.value)/i),n.length)},(0,X.Z)(t,[{key:"objHeight",get:function(){var e=this.objects.getChildren();return 0==e.length?this.maxHeight=0:e[0].height}}]),t}(ah.Z)),rh=Fa.Z.DEFAULT,oh=rh.KEY,ch=rh.FRAME,hh=function(e){function t(t){var n;return(n=e.call(this,t,oh,ch.BUTTON_LIGHT)||this).button.setWorldSize(227,49),n.setName("PlayJourney"),n.createIcon(),n.createText(),n}(0,o.Z)(t,e);var n=t.prototype;return n.createIcon=function(){var e=this.scene.make.image({key:oh,frame:ch.ICON_PLAY});e.setWorldSize(16,21),this.add(e),Phaser.Display.Align.In.Center(e,this,-31,0)},n.createText=function(){var e=this.scene.world.getPixelRatio(),t=this.scene.make.image({key:oh,frame:ch.TEXT_PLAY_DASHBOARD}),n=t.width,i=t.height;t.setWorldSize(n/e,i/e),this.add(t),Phaser.Display.Align.In.Center(t,this,16,1)},t}(Ba.Z),lh=hh,uh=function(e){return e.PASSED="passed",e.READY="ready",e.WAITING="waiting",e}({}),dh=Fa.Z.DEFAULT,ph=dh.KEY,mh=dh.FRAME,gh=function(e){function t(t,n){var i;return(i=e.call(this,t)||this).scene=void 0,i.levelBackground=void 0,i.gift=void 0,i.levelNumber=void 0,i.level=void 0,i.tweenClick=void 0,i.payload=void 0,i.scene=t,i.init(),n&&i.updateInfo(n),i.scene.add.existing((0,Ga.Z)(i)),i}(0,o.Z)(t,e);var n=t.prototype;return n.init=function(){var e=this;this.createLevelBackground(),this.createImageGift(),this.createText(),this.updateSize(),this.alignLevelItem(),this.setInteractive(),this.on(Phaser.Input.Events.POINTER_DOWN,(function(){e.scene.audio.playSound(Ka.Z.BUTTON_CLICK),e.tweenClick&&e.tweenClick.play()}))},n.createLevelBackground=function(){this.levelBackground=this.scene.make.image({key:ph,frame:mh.ICON_CIRCLE}),this.levelBackground.setWorldSize(44,42),this.levelBackground.setVisible(!1),this.add(this.levelBackground)},n.updateSize=function(){var e=this.levelBackground,t=e.width,n=e.height;this.setSize(t,n)},n.createImageGift=function(){this.gift=this.scene.make.image({key:ph,frame:mh.ICON_GIFT_LEVEL}),this.gift.setWorldSize(19,22),this.gift.setVisible(!1),this.add(this.gift)},n.createText=function(){this.levelNumber=this.scene.make.bitmapText({text:""+this.level,font:Wa.Z.PRIMARY.KEY,size:this.scene.fontSize(30),origin:{x:.5,y:.5}}),this.levelNumber.align=1,this.add(this.levelNumber)},n.getLevel=function(){return this.level},n.updateInfoLevel=function(){switch(this.disableInteractive(),this.payload.status){case uh.PASSED:this.levelNumber.setTint(4199946),this.levelBackground.setFrame(mh.ICON_CIRCLE_ACTIVED);break;case uh.READY:this.setInteractive(),this.createTweenClick(),this.levelNumber.setTint(5708544),this.levelBackground.setFrame(mh.ICON_CIRCLE_ACTIVE);break;case uh.WAITING:this.levelNumber.setTint(16377033),this.levelBackground.setFrame(mh.ICON_CIRCLE)}},n.createTweenClick=function(){var e=this,t=this.scale;this.tweenClick=this.scene.tweens.add({targets:[this],duration:100,paused:!0,yoyo:!0,scale:{from:t,to:t-.1},onComplete:function(){e.scene.handlePlay()}})},n.updateInfo=function(e){this.payload=(0,s.Z)({},e),this.updateInfoLevel(),this.updateText(),this.updateBackground(),this.alignLevelItem()},n.updateBackground=function(){this.levelBackground.setVisible(!0)},n.updateText=function(){this.levelNumber.setText(""+this.payload.level),Phaser.Display.Align.In.Center(this.levelNumber,this.levelBackground,-1,-3)},n.alignLevelItem=function(){Phaser.Display.Align.In.Center(this.gift,this.levelBackground,14,15),Phaser.Display.Align.In.Center(this.levelNumber,this.levelBackground,-1,-3)},n.setStatus=function(e){this.payload.status=e},n.setTextLevel=function(e){this.payload.level=e,this.gift.setVisible(!1)},t}(Phaser.GameObjects.Container),fh=Fa.Z.GAMEPLAY,Eh=fh.KEY,vh=fh.FRAME,Sh=function(e){function t(t,n){var i;return(i=e.call(this,t)||this).scene=void 0,i.background=void 0,i.levelItem1=void 0,i.levelItem2=void 0,i.levelItem3=void 0,i.levelItem4=void 0,i.payload=void 0,i.scene=t,i.init(),n&&i.updateInfo(n),i.scene.add.existing((0,Ga.Z)(i)),i}(0,o.Z)(t,e);var n=t.prototype;return n.init=function(){this.createBackground(),this.updateSize(),this.createLevelItem()},n.createBackground=function(){this.background=this.scene.make.image({key:Eh,frame:vh.BG_BLUE_DARK}),this.background.setWorldSize(265,55.5),this.background.setVisible(!1),this.add(this.background)},n.updateSize=function(){var e=this.background,t=e.width,n=e.height;this.setSize(t,n)},n.updateInfo=function(e){this.payload=(0,s.Z)({levelItem2:{level:0,status:""},levelItem3:{level:0,status:""},levelItem4:{level:0,status:""}},e),this.updateLevelItem()},n.createLevelItem=function(){this.levelItem1=new gh(this.scene,{level:1,status:uh.WAITING}),this.add(this.levelItem1),Phaser.Display.Align.In.Center(this.levelItem1,this,-94,0),this.levelItem2=new gh(this.scene,{level:2,status:uh.WAITING}),this.add(this.levelItem2),this.levelItem2.setVisible(!1),Phaser.Display.Align.In.Center(this.levelItem2,this,-32,0),this.levelItem3=new gh(this.scene,{level:3,status:uh.WAITING}),this.add(this.levelItem3),this.levelItem3.setVisible(!1),Phaser.Display.Align.In.Center(this.levelItem3,this,32,0),this.levelItem4=new gh(this.scene,{level:4,status:uh.WAITING}),this.add(this.levelItem4),this.levelItem4.setVisible(!1),Phaser.Display.Align.In.Center(this.levelItem4,this,94,0)},n.updateLevelItem=function(){if(this.levelItem1.setStatus(this.payload.levelItem1.status),this.levelItem1.updateInfoLevel(),this.levelItem1.setTextLevel(this.payload.levelItem1.level),this.levelItem1.updateText(),this.levelItem2){if(""==this.payload.levelItem2.status)return this.levelItem2.setVisible(!1),this.levelItem3&&this.levelItem3.setVisible(!1),void(this.levelItem4&&this.levelItem4.setVisible(!1));this.levelItem2.setStatus(this.payload.levelItem2.status),this.levelItem2.updateInfoLevel(),this.levelItem2.setVisible(!0),this.levelItem2.setTextLevel(this.payload.levelItem2.level),this.levelItem2.updateText()}if(this.levelItem3){if(""==this.payload.levelItem3.status)return this.levelItem3.setVisible(!1),void(this.levelItem4&&this.levelItem4.setVisible(!1));this.levelItem3.setStatus(this.payload.levelItem3.status),this.levelItem3.updateInfoLevel(),this.levelItem3.setVisible(!0),this.levelItem3.setTextLevel(this.payload.levelItem3.level),this.levelItem3.updateText()}if(this.levelItem4){if(""==this.payload.levelItem4.status)return void this.levelItem4.setVisible(!1);this.levelItem4.setStatus(this.payload.levelItem4.status),this.levelItem4.updateInfoLevel(),this.levelItem4.setVisible(!0),this.levelItem4.setTextLevel(this.payload.levelItem4.level),this.levelItem4.updateText()}},t}(Phaser.GameObjects.Container),Ah=Fa.Z.DEFAULT,Th=Ah.KEY,yh=Ah.FRAME,Ih=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n.textAdventure=void 0,n.background=void 0,n.buttonPlayJourney=void 0,n.scroller=void 0,n.iconLoading=void 0,n.scene=t,n.createText(),n.createBackground(),n.createReuseScroller(),n.createButtonPlay(),n.createIconLoading(),n.scene.add.existing((0,Ga.Z)(n)),n}(0,o.Z)(t,e);var n=t.prototype;return n.createText=function(){var e=this.scene.world.getPixelRatio();this.textAdventure=this.scene.make.image({key:Th,frame:yh.TEXT_ADVENTURE_LEVEL});var t=this.textAdventure,n=t.width,i=t.height;this.textAdventure.setWorldSize(n/e,i/e),this.add(this.textAdventure),Phaser.Display.Align.In.Center(this.textAdventure,this,0,-266)},n.createBackground=function(){this.background=new ih(this.scene,0,-45,265,316,{frameTop:yh.POPUP_TOP_LEVEL,frameMiddle:yh.POPUP_MIDDLE_LEVEL,frameBottom:yh.POPUP_BOTTOM_LEVEL}),this.add(this.background)},n.createReuseScroller=function(){this.scroller=new sh(this.scene,{classType:Sh,listConfigs:[],width:265,height:280,padding:0,marginTop:0,marginBottom:0,maxScrollOver:.3,scrollingBackRate:5}),this.scene.renderer instanceof Phaser.Renderer.WebGL.WebGLRenderer&&this.scroller.createBound(Fa.Z.DEFAULT.KEY,Fa.Z.DEFAULT.FRAME.BLANK,40,1528359),this.scroller.createMask(),this.scroller.setPosition(0,0),this.add(this.scroller),Phaser.Display.Align.In.Center(this.scroller,this.background,0,-44)},n.updateData=function(){for(var e=1,t=this.scene.storage.getState(),n=cr(t)||1,i=[],a=[],s=1;s<_a.length+1;s++)a[s]=s>n?uh.WAITING:s<n?uh.PASSED:uh.READY;for(;;){var r={levelItem1:{level:0,status:""},levelItem2:{level:0,status:""},levelItem3:{level:0,status:""},levelItem4:{level:0,status:""}};if(r.levelItem1={level:e,status:a[e]},++e==_a.length){i.push(r);break}if(r.levelItem2={level:e,status:a[e]},++e==_a.length){i.push(r);break}if(r.levelItem3={level:e,status:a[e]},e==_a.length){i.push(r);break}if(++e==_a.length){i.push(r);break}r.levelItem4={level:e,status:a[e]},e++,i.push(r)}this.scroller.updateConfig(i);var o=this.scroller.getChildren()[0].height;if(this.scroller.value=-o*this.showDefaultLevel(n),n>_a.length){var c=this.scene.game,h=c.globalScene,l=c.lang;return h.screen.open(ba.o4.NOTIFY_SCREEN,{message:l.Text.LOADING,duration:3e3})}this.showLeaders()},n.showDefaultLevel=function(e){var t=Math.floor((e-1)/4);return t<3?0:t-2},n.removeLevelItems=function(){this.scroller.updateConfig([])},n.getLevelItems=function(){return this.scroller.getChildren()},n.showLeaders=function(){var e=this.getLevelItems();if(!(e.length<1)){for(var t=e.length>8?8:e.length,n=0;n<t;n++){var i=e[n];if(!i)return;i.setVisible(!0)}this.scroller.setEnable(!0)}},n.createButtonPlay=function(){this.buttonPlayJourney=new lh(this.scene),this.add(this.buttonPlayJourney),Phaser.Display.Align.In.Center(this.buttonPlayJourney,this,0,120)},n.createIconLoading=function(){this.iconLoading=new Sc.Z(this.scene),this.add(this.iconLoading),Phaser.Display.Align.In.Center(this.iconLoading,this.background)},n.showLoading=function(){this.iconLoading.setVisible(!0),this.scroller.setVisible(!1)},n.showContent=function(){this.iconLoading.setVisible(!1),this.scroller.setVisible(!0),this.updateData()},t}(Phaser.GameObjects.Container),Ch=Ih,Oh=n(128),bh=n.n(Oh),Rh=n(101),Dh=n.n(Rh),_h=n(205),wh=n.n(_h),Ph=n(123);function xh(e,t){var n="undefined"!==typeof Dh()&&wh()(e)||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){var n;if(!e)return;if("string"===typeof e)return kh(e,t);var i=We()(n=Object.prototype.toString.call(e)).call(n,8,-1);"Object"===i&&e.constructor&&(i=e.constructor.name);if("Map"===i||"Set"===i)return bh()(e);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return kh(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var i=0;return function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function kh(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var Mh=GameCore.Configs.LeadersBoard,Lh=Mh.UseMock,Nh=Mh.Limit,Gh=Mh.MockOptions,Bh=function(e,t,n,a){return void 0===n&&(n=Nh),void 0===a&&(a=0),function(){var s=(0,r.Z)(u().mark((function s(r){var o,c,h,l,d,p,m,g,f,E,v,S,A,T,y,I,C,O;return u().wrap((function(s){for(;;)switch(s.prev=s.next){case 0:if(s.prev=0,o=window.game.player,c=o.getPlayerId(),r(Uh()),r({type:mi,payload:{leaderboardId:e,type:t,limit:n,offset:a}}),!Lh){s.next=11;break}return s.next=8,(0,Ph.qZ)(1e3);case 8:return d=Ee()(h=Wr()(l=new Array(n)).call(l,null)).call(h,(function(e,t){var n=(t+1)*(a+1),i=Gh.PlayerEntryIndex===t,s={playerId:"0"+n,name:"MPlayer "+n,photo:"./assets/images/others/avatar.png",rank:n,score:Math.floor(1e5/n)};if(i){var r=window.game.player.getPlayer(),o=r.playerId,c=r.name,h=r.photo;s.playerId=o,s.name=c,s.photo=h}return s})),r(Fh(d,t)),s.abrupt("return");case 11:if(p=[],t!==ts){s.next=18;break}return s.next=15,ms({limit:n,offset:a});case 15:p=s.sent,s.next=26;break;case 18:if(t!==ns){s.next=26;break}return(m=o.getConnectedPlayerIds(n,a)).push(c),g=GameCore.Utils.Array.unique(m),s.next=24,Es({playerIds:g,limit:g.length});case 24:p=s.sent,g.forEach((function(e){var t=ge()(p).call(p,(function(t){return t.playerId===e}));t&&0!==t.length||p.push({playerId:e,score:0})}));case 26:for(f={},E=xh(p);!(v=E()).done;)S=v.value,A=S.playerId,T=S.score,y=S.rank,I=S.getPlayer(),C=I.getPhoto(),O=I.getName(),f[A]={playerId:A,name:O,photo:C,score:T,rank:y};r(Fh(f,t)),s.next=36;break;case 32:s.prev=32,s.t0=s.catch(0),r(Fh([],t)),(0,i.tO)(s.t0);case 36:case"end":return s.stop()}}),s,null,[[0,32]])})));return function(e){return s.apply(this,arguments)}}()},Fh=function(e,t){return{type:gi,payload:{leaders:e,type:t}}},Uh=function(){return{type:fi,payload:{}}},Hh=function(e){return e[hi]},Vh=((0,Q.P1)([function(e){return Hh(e).leaderboardId}],(function(e){return e})),(0,Q.P1)([function(e){return Hh(e).leaders}],(function(e){return e}))),Yh=(0,Q.P1)([function(e){return Hh(e).isRequesting}],(function(e){return e})),Zh={targets:[],props:{alpha:{duration:500,value:{start:0,from:0,to:1},ease:Phaser.Math.Easing.Cubic.Out},scale:{duration:1e3,value:{start:.8,from:.8,to:1},ease:Phaser.Math.Easing.Elastic.Out,easeParams:[.1,.45]}}},Wh=function(e){function t(t){return e.call(this,Zh,t)||this}return(0,o.Z)(t,e),t}(ka.Z),Kh={targets:[],props:{alpha:{start:0,to:1,duration:500,ease:Phaser.Math.Easing.Cubic.Out},scale:{start:.8,to:1,duration:1e3,ease:Phaser.Math.Easing.Elastic.Out,easeParams:[.1,.45]},y:{start:0,to:0,duration:500,ease:Phaser.Math.Easing.Back.Out}},delay:0},zh=function(e){function t(t){return e.call(this,Kh,t)||this}return(0,o.Z)(t,e),t}(ka.Z),Xh=function(e){function t(t,n){var i;(i=e.call(this,t)||this).payload=void 0,i.loading=void 0,i.photo=void 0,i.avtFrame=void 0,i.background=void 0,i.loadPhotoTimer=void 0,i.handleLoadPhotoAfterDelay=function(e,t){return function(){var n=i.scene.textures.get(e);n&&n.key===e?i.handleLoadComplete(e):(i.scene.load.once("filecomplete-image-"+e,i.handleLoadComplete),i.scene.load.image(e,t),i.scene.load.start())}},i.handleLoadComplete=function(e){if(i.scene){var t=i.payload,n=t.id,a=t.radius,s=void 0===a?0:a;if(n&&n===e){var r=n+"_bordered_"+s,o=s>0?r:n,c=i.scene.textures.get(o);if(c&&c.key===o)i.setPhoto(c.key);else if(0!=s&&s<100){if(!GameCore.Utils.Image.drawBorder({scene:i.scene,key:n,newKey:r,radius:s}))return void i.showLoading(!1);i.setPhoto(r)}else if(100==s){if(!GameCore.Utils.Image.drawCircle({scene:i.scene,key:n,newKey:r}))return void i.showLoading(!1);i.setPhoto(r)}else i.setPhoto(n)}}},i.handleLoadPhotoFailed=function(e){e.key===i.payload.id&&i.setDefaultAvatar(e.key)},i.scene.add.existing((0,Ga.Z)(i)),i.payload=n,i.setSize(n.width,n.height),i.createBackground(),i.createLoading(),i.createPhoto(),i.createFrame();var a=i.payload,s=a.id,r=a.url,o=a.radius;return s&&r&&i.loadPhoto(s,r,o),i.addDefaultListeners(),i}(0,o.Z)(t,e);var n=t.prototype;return n.setFrame=function(e){this.avtFrame.setFrame(e),this.avtFrame.setVisible(!0)},n.setBackground=function(e){this.background.setFrame(e),this.background.setWorldSize(this.width,this.height)},n.loadPhoto=function(e,t,n){var i;if(void 0===n&&(n=0),this.payload.id=e,this.payload.url=t,this.payload.radius=n,null==(i=this.loadPhotoTimer)||i.remove(),e&&t){var a=this.scene.textures.get(e);if(a&&a.key===e)this.handleLoadComplete(e);else{this.showLoading(!0);var s=this.payload.loadDelay||0;this.loadPhotoTimer=this.scene.time.delayedCall(s,this.handleLoadPhotoAfterDelay(e,t))}}else this.setPhoto(na.Z.AVATAR.KEY)},n.addDefaultListeners=function(){var e=this;this.scene.load.on(Phaser.Loader.Events.FILE_LOAD_ERROR,this.handleLoadPhotoFailed),this.on(Phaser.GameObjects.Events.DESTROY,(function(){var t;null==(t=e.loadPhotoTimer)||t.remove(),e.scene.load.off(Phaser.Loader.Events.FILE_LOAD_ERROR,e.handleLoadPhotoFailed)}))},n.setDefaultAvatar=function(e){this.loadPhoto(e,na.Z.AVATAR.FILE,this.payload.radius)},n.createBackground=function(){var e=this.payload,t=e.key,n=e.background;this.background=this.scene.make.image({key:t,frame:n});var i=this.payload,a=i.width,s=i.height,r=Math.min(a,s)-(this.payload.borderWidth||8);this.background.setWorldSize(r,r),this.add(this.background)},n.createLoading=function(){this.loading=new Sc.Z(this.scene),this.loading.setWorldSize(.75*this.width,.75*this.height),this.loading.setVisible(!1),this.add(this.loading)},n.createPhoto=function(){this.photo=this.scene.make.image({x:0,y:0,origin:{x:.5,y:.5},visible:!1}),this.add(this.photo)},n.createFrame=function(){var e=this.payload,t=e.key,n=e.frame,i=e.width,a=e.height;n?(this.avtFrame=this.scene.make.image({key:t,frame:n}),this.avtFrame.setWorldSize(i,a)):this.avtFrame=this.scene.make.image({x:0,y:0,origin:{x:.5,y:.5},visible:!1}),this.add(this.avtFrame)},n.showLoading=function(e){this.photo.setVisible(!e),this.loading.setVisible(e)},n.setPhoto=function(e){this.showLoading(!1),this.photo.setTexture(e),this.photo.setFrame(0);var t=this.payload,n=t.width,i=t.height,a=Math.min(n,i)-(this.payload.borderWidth||8);this.photo.setWorldSize(a,a),Phaser.Display.Align.In.Center(this.photo,this.background)},t}(Phaser.GameObjects.Container),jh=Xh,Jh=Fa.Z.DEFAULT,qh=Jh.KEY,Qh=Jh.FRAME,$h=function(e){function t(t,n){var i;return(i=e.call(this,t)||this).buttonPlay=void 0,i.buttonShare=void 0,i.avatar=void 0,i.rankIcon=void 0,i.rankText=void 0,i.bgRankText=void 0,i.username=void 0,i.score=void 0,i.scoreText=void 0,i.background=void 0,i.showPopUp=void 0,i.showItems=void 0,i.payload=void 0,i.handleChallengeFriend=function(){var e=i.payload.playerId;i.scene.storage.dispatch(Ko(e))},i.handleShare=function(){i.scene.storage.dispatch(Rr())},i.createBackground(),i.updateSize(),i.createAvatar(),i.createRank(),i.createUsername(),i.createScore(),i.createButtonShare(),i.createButtonPlay(),n&&i.updateInfo(n),i.scene.add.existing((0,Ga.Z)(i)),i}(0,o.Z)(t,e);var n=t.prototype;return n.updateInfo=function(e){this.payload=(0,s.Z)({scoreRight:!0,isHighlight:!1,useChallenge:!1,backgroundFrame:""},e),this.updateBackground(),this.updateAvatar(),this.updateRank(),this.updateUsername(),this.updateScore(),this.updateButton(),this.alignScoreAndButton()},n.createBackground=function(){this.background=this.scene.make.image({key:qh,frame:Qh.LEADERBOARD_BG_DARK}),this.background.setWorldSize(312,60),this.background.setVisible(!1),this.add(this.background)},n.updateBackground=function(){this.payload.backgroundFrame?(this.background.setVisible(!0),this.background.setFrame(this.payload.backgroundFrame||Qh.LEADERBOARD_BG_DARK),this.background.setWorldSize(312,60)):this.background.setVisible(!1)},n.updateSize=function(){var e=this.background,t=e.width,n=e.height;this.setSize(t,n)},n.createAvatar=function(){this.avatar=new jh(this.scene,{key:qh,frame:Qh.AVATAR_BORDER,background:Qh.AVATAR_BACKGROUND,width:43,height:45,radius:30,borderWidth:5}),this.add(this.avatar),Phaser.Display.Align.In.LeftCenter(this.avatar,this,-50,0)},n.updateAvatar=function(){var e=this.payload,t=e.playerId,n=e.photo;this.avatar.loadPhoto(t,n)},n.createRank=function(){this.createRankIcon(1),this.createBgRankText(),this.createRankText(1)},n.updateRank=function(){var e=this.payload.rank;if(e<0)return this.rankIcon.setVisible(!1),this.rankText.setVisible(!0),void this.rankText.setText("99+");this.updateRankIcon(e),this.updateRankText(e)},n.getRankIconFrame=function(e){var t=Qh.ICON_CUP_GOLD;switch(e){case 1:t=Qh.ICON_CUP_GOLD;break;case 2:t=Qh.ICON_CUP_SILVER;break;case 3:t=Qh.ICON_CUP_COPPER}return t},n.createRankIcon=function(e){void 0===e&&(e=0);var t=this.getRankIconFrame(e);this.rankIcon=this.scene.make.image({key:qh,frame:t}),this.rankIcon.setWorldSize(28,24),this.add(this.rankIcon),Phaser.Display.Align.In.LeftCenter(this.rankIcon,this.background,-11,6)},n.updateRankIcon=function(e){if(e>3)this.rankIcon.setVisible(!1);else{this.rankIcon.setVisible(!0);var t=this.getRankIconFrame(e);this.rankIcon.setWorldSize(30,37),this.rankIcon.setFrame(t)}},n.createBgRankText=function(){this.bgRankText=this.scene.make.image({key:qh,frame:Qh.BG_SMALL_CIRCLE}),this.bgRankText.setWorldSize(29,29),this.add(this.bgRankText),Phaser.Display.Align.In.LeftCenter(this.bgRankText,this.background,-11,1)},n.createRankText=function(e){void 0===e&&(e=0),this.rankText=this.scene.make.bitmapText({font:Wa.Z.DARK.KEY,size:this.scene.fontSize(26),text:""+e,origin:{x:.5,y:.5}}),this.add(this.rankText),Phaser.Display.Align.In.Center(this.rankText,this.bgRankText,0,4)},n.updateRankText=function(e){if(e<=3)return this.bgRankText.setVisible(!1),void this.rankText.setVisible(!1);this.bgRankText.setVisible(!0),this.rankText.setVisible(!0),this.rankText.setText(""+e)},n.getShortName=function(e){return e.substring(0,14)},n.createUsername=function(){this.username=this.scene.make.text({text:this.getShortName("FRIEND NAME"),style:{fontSize:this.scene.fontSize(42)+"px",fontStyle:"bold"}}),this.add(this.username),Phaser.Display.Align.In.Center(this.username,this.avatar,85,-1)},n.updateUsername=function(){var e=this.payload.name,t=e;"Anonymous"===e&&(t=this.scene.lang.Text.ANONYMOUS),this.username.setText(this.getShortName(t))},n.createScore=function(){this.scoreText=this.scene.make.bitmapText({text:"132500",font:Wa.Z.NUMBER_YELLOW.KEY,size:this.scene.fontSize(48)}),this.add(this.scoreText),Phaser.Display.Align.In.Center(this.scoreText,this.avatar,130,3)},n.updateScore=function(){var e=this.payload.score;this.scoreText.setText(e)},n.createButtonPlay=function(){this.buttonPlay=new Ba.Z(this.scene,qh,Qh.BUTTON_CHALLENGE,60,35),this.buttonPlay.setName("ChallengeFriend"),Phaser.Display.Align.In.RightCenter(this.buttonPlay,this,-7,2),this.buttonPlay.onClick=this.handleChallengeFriend,this.add(this.buttonPlay)},n.createButtonShare=function(){this.buttonShare=new Ba.Z(this.scene,qh,Qh.BUTTON_SHARE,60,35),this.buttonShare.setName("Share"),Phaser.Display.Align.In.RightCenter(this.buttonShare,this,-7,2),this.buttonShare.onClick=this.handleShare,this.add(this.buttonShare)},n.updateButton=function(){var e=this.payload,t=e.isHighlight;if(!e.useChallenge)return this.buttonShare.setVisible(!1),void this.buttonPlay.setVisible(!1);t?(this.buttonShare.setVisible(!0),this.buttonPlay.setVisible(!1)):(this.buttonShare.setVisible(!1),this.buttonPlay.setVisible(!0))},n.alignScoreAndButton=function(){this.payload.useChallenge?Phaser.Display.Align.In.Center(this.scoreText,this.avatar,110,3):Phaser.Display.Align.In.Center(this.scoreText,this.avatar,200,3)},n.runShowPopUpAnimation=function(e,t){this.scene.tweens.killTweensOf(this),this.showPopUp=new zh({targets:[this],delay:e,duration:t,props:{y:{start:this.y+70,to:this.y}}}),this.showPopUp.play()},n.runShowItemAnimation=function(e,t){var n=this.getAll();this.scene.tweens.killTweensOf(n),this.showItems=new Wh({targets:n,duration:t,delay:this.scene.tweens.stagger(50,{start:e+50}),props:{scale:{duration:1e3,getStart:function(e){return.8*e.scale},getEnd:function(e){return e.scale},ease:Phaser.Math.Easing.Elastic.Out,easeParams:[.1,.45]}}}),this.showItems.play()},n.runShowUpAnimation=function(e,t){void 0===e&&(e=0),void 0===t&&(t=300);var n=100*e;this.runShowPopUpAnimation(n,t),this.runShowItemAnimation(n,t)},n.setFrameBackground=function(e){this.background.setFrame(e)},t}(Phaser.GameObjects.Container),el=$h,tl=(Fa.Z.DEFAULT.FRAME,function(e){function t(t){var n;return(n=e.call(this,t)||this).myScoreBlock=void 0,n.scene=t,n.setName("FooterBar"),n.createMyScoreBlock(),n.scene.add.existing((0,Ga.Z)(n)),n}(0,o.Z)(t,e);var n=t.prototype;return n.createMyScoreBlock=function(){this.myScoreBlock=new el(this.scene),this.myScoreBlock.setVisible(!1),this.add(this.myScoreBlock),Phaser.Display.Align.In.Center(this.myScoreBlock,this)},n.updateMyScoreBlock=function(e){this.myScoreBlock.setVisible(!0),this.myScoreBlock.updateInfo(e),this.myScoreBlock.runShowUpAnimation(0,1e3)},t}(Phaser.GameObjects.Container)),nl=tl,il=n(633);function al(e,t){var n="undefined"!==typeof Dh()&&wh()(e)||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){var n;if(!e)return;if("string"===typeof e)return sl(e,t);var i=We()(n=Object.prototype.toString.call(e)).call(n,8,-1);"Object"===i&&e.constructor&&(i=e.constructor.name);if("Map"===i||"Set"===i)return bh()(e);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return sl(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var i=0;return function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function sl(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var rl=Fa.Z.DEFAULT.FRAME,ol=function(e){function t(t){var n;(n=e.call(this,t)||this).scene=void 0,n.currentPlayerId=void 0,n.scroller=void 0,n.scene=t;var i=n.scene.player;return n.currentPlayerId=i.getPlayerId(),n.createReuseScroller(),n.scene.add.existing((0,Ga.Z)(n)),n}(0,o.Z)(t,e);var n=t.prototype;return n.createReuseScroller=function(){this.scroller=new sh(this.scene,{classType:el,listConfigs:[],width:310,height:330,padding:0,marginTop:0,marginBottom:0}),this.scene.renderer instanceof Phaser.Renderer.WebGL.WebGLRenderer&&this.scroller.createBound(Fa.Z.DEFAULT.KEY,Fa.Z.DEFAULT.FRAME.BLANK,40,16643027),this.scroller.createMask(),this.scroller.setPosition(0,70),this.add(this.scroller)},n.updateData=function(e,t){var n=ui()(e)||[];if(!(n.length<1)){for(var i,a=[],s=0,r=al(pi()(n).call(n,(function(e,t){return+t.score-+e.score})));!(i=r()).done;){var o=i.value,c=o.playerId,h=o.photo,l=o.score,u=o.name,d=o.rank;if(c){var p=this.currentPlayerId===c,m=t===ts,g=t===ns,f=u,E=s>=1?rl.LEADERBOARD_BG_DARK:rl.LEADERBOARD_BG_LIGHT;"Anonymous"===u&&(f=this.scene.lang.Text.ANONYMOUS);var v={playerId:c,photo:h,name:f,rank:d,score:l,scoreRight:m,useChallenge:g,isHighlight:p,backgroundFrame:E};a.push(v),++s>=2&&(s=0)}}this.scroller.updateConfig(a),this.showLeaders()}},n.removeLeaders=function(){this.scroller.updateConfig([])},n.getLeaders=function(){return this.scroller.getChildren()},n.showLeaders=function(){var e=this,t=this.getLeaders();if(!(t.length<1)){for(var n=Math.min(t.length,6),i=0;i<n;i++){var a=t[i];a&&(a.setVisible(!0),a.runShowUpAnimation(i,300))}var s=300+100*n+250;this.scene.time.delayedCall(s,(function(){e.scroller.setEnable(!0)}))}},t}(Phaser.GameObjects.Container),cl=ol,hl=Fa.Z.DEFAULT,ll=hl.KEY,ul=hl.FRAME,dl=function(e){function t(t){var n;return(n=e.call(this,t)||this).leaders=void 0,n.buttonClose=void 0,n.loading=void 0,n.message=void 0,n.messageAnimation=void 0,n.setSize(310,430),n.createLoading(),n.createMessage(),n.createContents(),n.createAnimation(),n.scene.add.existing((0,Ga.Z)(n)),n}(0,o.Z)(t,e);var n=t.prototype;return n.showLoading=function(e){this.loading.setVisible(e),this.showMessage(!1)},n.showMessage=function(e,t){this.message.setVisible(e),t&&this.messageAnimation.play()},n.createLoading=function(){this.loading=new Sc.Z(this.scene),this.loading.setVisible(!1),this.add(this.loading)},n.createMessage=function(){this.message=this.scene.make.image({key:ll,frame:ul.TEXT_LEADERBOARD_EMPTY});var e=this.scene.world.getPixelRatio(),t=this.message,n=t.width,i=t.height;this.message.setWorldSize(n/e,i/e),this.add(this.message),Phaser.Display.Align.In.Center(this.message,this)},n.createContents=function(){this.createLeaders(),this.createBorderContent()},n.createLeaders=function(){this.leaders=new cl(this.scene),this.add(this.leaders),Phaser.Display.Align.In.Center(this.leaders,this,0,-89)},n.createContentBackground=function(){var e=this.scene.make.container({}),t=this.scene.make.image({key:ll,frame:ul.POPUP_TOP});t.setWorldSize(350,55);var n=this.scene.make.image({key:ll,frame:ul.POPUP_MIDDLE});n.setWorldSize(350,430);var i=this.scene.make.image({key:ll,frame:ul.POPUP_BOTTOM});i.setWorldSize(350,22),e.add(t),e.add(n),e.add(i),Phaser.Display.Align.In.Center(n,e),Phaser.Display.Align.In.Center(t,n,0,-n.displayHeight/2-t.displayHeight/2),Phaser.Display.Align.In.Center(i,n,0,n.displayHeight/2+i.displayHeight/2-10),this.add(e),Phaser.Display.Align.In.Center(e,this,0,6)},n.createAnimation=function(){this.messageAnimation=new il.Z({targets:[this.message],duration:60,repeat:2})},n.createBorderContent=function(){var e=this.scene.make.image({key:ll,frame:ul.LEADERBOARD_BORDER_TOP});e.setWorldSize(312,12),this.add(e),Phaser.Display.Align.In.TopCenter(e,this,0,-29);var t=this.scene.make.image({key:ll,frame:ul.LEADERBOARD_BORDER_MIDDLE});t.setWorldSize(312,370),this.add(t),Phaser.Display.Align.In.Center(t,this,0,11);var n=this.scene.make.image({key:ll,frame:ul.LEADERBOARD_BORDER_BOTTOM});n.setWorldSize(312,13),this.add(n),Phaser.Display.Align.In.Center(n,this,0,202)},t}(Phaser.GameObjects.Container),pl=dl,ml=GameCore.Configs.LeadersBoard,gl=Fa.Z.DEFAULT,fl=(gl.KEY,gl.FRAME),El=function(e){function t(t,n,i,a){var s;return(s=e.call(this,t,n,i,a)||this).scene=void 0,s.popup=void 0,s.popupShowUpAnimation=void 0,s.popupFadeOutAnimation=void 0,s.popupFadeInMaskAnimation=void 0,s.popupFadeOutMaskAnimation=void 0,s.board=void 0,s.footerBar=void 0,s.isRequesting=void 0,s.isSwitchable=void 0,s.tabId=void 0,s.offset=void 0,s.isStateChanged=void 0,s.open=function(t){var n=s.scene.game.lang;e.prototype.open.call((0,Ga.Z)(s),t),s.setVisible(!0),s.selectWorldTab(),s.runOpenAnimation(),s.board.showLoading(!0);var i=[{selector:Yh,callback:function(e){if(s.isRequesting=e,s.board.showLoading(e),s.scene.scene.isActive()&&s.visible&&!1===e){if(!s.scene)return;var t=s.scene.game.storage.getState(),i=Vh(t);s.isSwitchable=!0,i&&0!==H()(i).length?s.board.leaders.updateData(i,s.tabId):s.board.showMessage(!0,n.Text.LEADERBOARD_EMPTY);var a=lr(t),r=s.scene.player.getBestScore(),o=a.bestScore,c=void 0===o?0:o,h=s.scene.player.getPlayer(),l=i[h.playerId]||{playerId:h.playerId,name:h.name,photo:h.photo,score:r>c?r:c,rank:-1};s.footerBar.updateMyScoreBlock({playerId:l.playerId,rank:l.rank,photo:l.photo,name:l.name,score:l.score,backgroundFrame:fl.LEADERBOARD_BG_OWN,isHighlight:!0,useChallenge:!1})}}}];s.handleStateChange(i)},s.clickClose=function(){s.runCloseAnimation(),s.scene.clickButtonModeDice()},s.scene=t,s.setVisible(!1),s.createPopup(),s.createBoard(),s.createFooterBar(),s.setDepth(ba.Ks.POPUP),s.background.setAlpha(.5),s}(0,o.Z)(t,e);var n=t.prototype;return n.handleStateChange=function(e){var t=this;this.isStateChanged||(e.forEach((function(e){var n=e.selector,i=e.callback;t.scene.storage.watch(n,i)})),this.isStateChanged=!0)},n.createPopup=function(){this.popup=new Za(this.scene,0,-21,350,500,{forceHeightTop:52}),this.add(this.popup),this.popup.setTitle(fl.TEXT_LEADER_BOARD),this.popup.setOnClickButtonClose(this.clickClose),Phaser.Display.Align.In.Center(this.popup,this.zone,0,0)},n.createBoard=function(){this.board=new pl(this.scene),this.popup.add(this.board),Phaser.Display.Align.In.Center(this.board,this.popup,0,-25)},n.createFooterBar=function(){this.footerBar=new nl(this.scene),this.popup.add(this.footerBar),Phaser.Display.Align.In.Center(this.footerBar,this.popup,0,151)},n.selectWorldTab=function(){this.tabId=ts,this.offset=0,this.board.showLoading(!0),this.board.leaders.removeLeaders(),this.scene.storage.dispatch(Uh()),this.scene.storage.dispatch(Bh(ml.LeaderboardId,ts,ml.Limit,this.offset))},n.runCloseAnimation=function(){var e;null!=(e=this.popupFadeOutAnimation)&&null!=(e=e.tween)&&e.isPlaying()||(this.runPopupExitsAnimation(50,200),this.runFadeOutMaskAnimation(0,200))},n.runPopupExitsAnimation=function(e,t){var n,i=this;this.popupFadeOutAnimation||(this.popupFadeOutAnimation=new Pa.Z({targets:[this.popup],delay:e,duration:t,props:{scale:0},onComplete:function(){i.popup.setY(0),i.board.showLoading(!1),i.close()}})),null==(n=this.popupFadeOutAnimation)||n.play()},n.runOpenAnimation=function(){this.scene.audio.playSound(Ka.Z.POPUP_SHOW),this.runPopupEntrancesAnimation(0,300),this.runFadeInMaskAnimation(100,300)},n.runPopupEntrancesAnimation=function(e,t){if(!this.popupShowUpAnimation){var n=this.popup.scale;this.popupShowUpAnimation=new Na({targets:[this.popup],delay:e,duration:t,props:{y:0,alpha:{start:1,from:1,to:1},scale:{start:0,from:0,to:n}}})}this.popupShowUpAnimation.play()},n.runFadeInMaskAnimation=function(e,t){if(!this.popupFadeInMaskAnimation){var n=this.background.alpha;this.popupFadeInMaskAnimation=new wa.Z({targets:[this.background],delay:e,duration:t,props:{alpha:{start:0,from:0,to:n}}})}this.popupFadeInMaskAnimation.play()},n.runFadeOutMaskAnimation=function(e,t){if(!this.popupFadeOutMaskAnimation){var n=this.background.alpha;this.popupFadeOutMaskAnimation=new Pa.Z({targets:[this.background],delay:e,duration:t,props:{alpha:{start:n,from:n,to:0}}})}this.popupFadeOutMaskAnimation.play()},t}(GameCore.Screen),vl=El,Sl=Fa.Z.DEFAULT,Al=Sl.KEY,Tl=Sl.FRAME,yl=function(e){function t(t,n){var i;return(i=e.call(this,t)||this).onClick=void 0,i.options=void 0,i.text=void 0,i.panel=void 0,i.icon=void 0,i.animOn=void 0,i.animOff=void 0,i.setSize(n.width,n.height),i.options=n,i.createPanel(),i.createIcon(),i.createText(),i.createAnimation(),i.updateStatus(i.options.enable),i.createInput(),i}(0,o.Z)(t,e);var n=t.prototype;return n.createInput=function(){var e=this;this.setInteractive().on(Phaser.Input.Events.POINTER_DOWN,(function(){e.options.enable?e.animOff.play():e.animOn.play(),e.onClick&&e.onClick(!e.options.enable)}))},n.createPanel=function(){this.panel=this.scene.make.image({key:Al,frame:Tl.PANEL_BROWN}),this.panel.setWorldSize(this.width,this.height),this.add(this.panel),Phaser.Display.Align.In.Center(this.panel,this)},n.createIcon=function(){this.icon=this.scene.make.image({key:Al,frame:Tl.ICON_DOT_WOODEN}),this.icon.setWorldSize(28,28),this.add(this.icon),Phaser.Display.Align.In.Center(this.icon,this.panel,-this.width/2)},n.createText=function(){var e=32,t=this.scene.facebook.getLocale();"es"==t&&(e=22),"pt"==t&&(e=23),"it"==t&&(e=21),"id"==t&&(e=26),this.text=this.scene.make.text({style:{fontSize:this.scene.fontSize(e)+"px"}}),this.text.setTint(16641208),this.add(this.text)},n.createAnimation=function(){var e=this,t=this.scene.lang;this.animOn=this.scene.add.tween({targets:this.icon,duration:200,paused:!0,x:{from:-this.width/2+this.icon.displayWidth/2,to:this.width/2-this.icon.displayWidth/2},onComplete:function(){e.text.setText(t.Text.ON),e.panel.setFrame(Tl.PANEL_GREEN),e.options.enable=!0,Phaser.Display.Align.In.Center(e.text,e.panel,-(e.panel.displayWidth-e.text.width)/2+10,-2)}}),this.animOff=this.scene.add.tween({targets:this.icon,duration:200,paused:!0,x:{from:this.width/2-this.icon.displayWidth/2,to:-this.width/2+this.icon.displayWidth/2},onComplete:function(){e.text.setText(t.Text.OFF),e.panel.setFrame(Tl.PANEL_BROWN),e.options.enable=!1,Phaser.Display.Align.In.Center(e.text,e.panel,(e.panel.displayWidth-e.text.width)/2-6,-2)}})},n.updateStatus=function(e){this.options.enable=e,e?this.animOn.play():this.animOff.play()},t}(Phaser.GameObjects.Container),Il=yl,Cl=function(){var e=GameCore.Utils.Device,t=window.navigator.vibrate;return e.isAndroid()&&"function"===typeof t||e.isMobileWeb()&&"function"===typeof t},Ol=function(){var e=(0,r.Z)(u().mark((function e(t){var n,i,a,s,o;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=Math.round(t/80),i=0,a=function(){var e=(0,r.Z)(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,FBInstant.performHapticFeedbackAsync();case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0);case 8:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(){return e.apply(this,arguments)}}();case 3:if(!(i<n)){e.next=11;break}return s=a(),o=(0,Ph.qZ)(80),i+=1,e.next=9,h().all([s,o]);case 9:e.next=3;break;case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),bl=function(e){window.navigator.vibrate(0),window.navigator.vibrate(e)},Rl=function(e){try{if(!Cl())return!1;var t=GameCore.Utils.Device;t.isAndroid()||t.isMobileWeb()?bl(e):t.isIOS()&&Ol(e).catch((function(e){}))}catch(n){}},Dl=Fa.Z.DEFAULT,_l=Dl.KEY,wl=Dl.FRAME,Pl=function(e){function t(t,n,i,a){var s;return(s=e.call(this,t,n,i,a)||this).popup=void 0,s.title=void 0,s.buttonClose=void 0,s.contents=void 0,s.settingSound=void 0,s.settingVibrate=void 0,s.settingSoundContainer=void 0,s.settingMusicContainer=void 0,s.settingVibrateContainer=void 0,s.popupShowUpAnimation=void 0,s.popupFadeOutAnimation=void 0,s.contentShowUpAnimation=void 0,s.popupFadeInMaskAnimation=void 0,s.popupFadeOutMaskAnimation=void 0,s.handleClose=function(){s.runCloseAnimation()},s.handleSoundSetting=function(e){s.scene.player.setSetting("sound",e)},s.handleVibrateSetting=function(e){e&&Rl(100),s.scene.player.setSetting("vibrate",e)},s.createPopup(),s.createContentBackground(),s.createButtons(),s.addItem(),s.createInput(),s.setDepth(ba.Ks.POPUP),s.background.setAlpha(.5),s}(0,o.Z)(t,e);var n=t.prototype;return n.open=function(){e.prototype.open.call(this);var t=this.scene.player.getPlayerSettings(),n=t.sound,i=t.vibrate;this.settingSound.updateStatus(n),this.settingVibrate.updateStatus(i),this.updateVibrateButton(),this.runOpenAnimation()},n.updateVibrateButton=function(){Cl()?(this.settingVibrateContainer.revive(),Phaser.Display.Align.In.Center(this.settingSoundContainer,this.popup,0,-33),Phaser.Display.Align.In.Center(this.settingVibrateContainer,this.popup,0,28)):(this.settingVibrateContainer.kill(),Phaser.Display.Align.In.Center(this.settingSoundContainer,this.popup,0,-6))},n.createContentBackground=function(){var e=new ih(this.scene,0,0,260,145,{frameTop:wl.POPUP_TOP_DARK,frameMiddle:wl.POPUP_MIDDLE_DARK,frameBottom:wl.POPUP_BOTTOM_DARK});this.popup.add(e),Phaser.Display.Align.In.Center(e,this.popup,0,-5)},n.createInput=function(){this.settingSound.onClick=this.handleSoundSetting,this.settingVibrate.onClick=this.handleVibrateSetting},n.createPopup=function(){this.popup=new Za(this.scene,0,0,286,226),this.add(this.popup),this.popup.setTitle(wl.TEXT_SETTING),this.popup.setOnClickButtonClose(this.handleClose),Phaser.Display.Align.In.Center(this.popup,this.zone,0,10)},n.createButtons=function(){var e=this.scene.player.getPlayerSettings(),t=e.sound,n=e.vibrate;this.createSoundButton(t),this.createVibrateButton(n)},n.createVibrateButton=function(e){this.settingVibrateContainer=this.scene.make.container({});var t=this.scene.make.image({key:_l,frame:wl.ICON_VIBRATE});t.setWorldSize(41,48),this.settingVibrate=new Il(this.scene,{enable:e,width:89,height:31}),this.settingVibrate.setName("Vibrate"),this.settingVibrateContainer.add([t,this.settingVibrate]),Phaser.Display.Align.In.Center(t,this.settingVibrateContainer,-60),Phaser.Display.Align.In.Center(this.settingVibrate,this.settingVibrateContainer,35),this.popup.add(this.settingVibrateContainer),Phaser.Display.Align.In.Center(this.settingVibrateContainer,this.popup,0,28)},n.createSoundButton=function(e){this.settingSoundContainer=this.scene.make.container({});var t=this.scene.make.image({key:_l,frame:wl.ICON_SOUND});t.setWorldSize(40,35),this.settingSound=new Il(this.scene,{enable:e,width:89,height:31}),this.settingSound.setName("Sound"),this.settingSoundContainer.add([t,this.settingSound]),Phaser.Display.Align.In.Center(t,this.settingSoundContainer,-58),Phaser.Display.Align.In.Center(this.settingSound,this.settingSoundContainer,35),this.popup.add(this.settingSoundContainer),Phaser.Display.Align.In.Center(this.settingSoundContainer,this.popup,0,-33)},n.addItem=function(){this.contents=this.scene.add.group(),this.contents.addMultiple([])},n.runOpenAnimation=function(){var e;null!=(e=this.popupShowUpAnimation)&&null!=(e=e.tween)&&e.isPlaying()||(this.scene.audio.playSound(Ka.Z.POPUP_SHOW),this.runPopupEntrancesAnimation(0,300),this.runFadeInMaskAnimation(100,300),this.runPopupContentEntrancesAnimation(200,300))},n.runCloseAnimation=function(){var e;null!=(e=this.popupFadeOutAnimation)&&null!=(e=e.tween)&&e.isPlaying()||(this.runPopupExitsAnimation(50,200),this.runFadeOutMaskAnimation(0,200))},n.runPopupEntrancesAnimation=function(e,t){if(!this.popupShowUpAnimation){var n=this.popup.scale;this.popupShowUpAnimation=new Na({targets:[this.popup],delay:e,duration:t,props:{y:0,alpha:{start:1,from:1,to:1},scale:{start:0,from:0,to:n}}})}this.popupShowUpAnimation.play()},n.runPopupContentEntrancesAnimation=function(e,t){var n;null==(n=this.contentShowUpAnimation)||n.remove(),this.contentShowUpAnimation=new xa.Z({targets:this.contents.getChildren(),duration:t,delay:e,props:{alpha:{start:0,from:0,to:1}}}),this.contentShowUpAnimation.play()},n.runPopupExitsAnimation=function(e,t){var n=this;this.popupFadeOutAnimation||(this.popupFadeOutAnimation=new Pa.Z({targets:[this.popup],delay:e,duration:t,props:{scale:0},ease:Phaser.Math.Easing.Back.In,onComplete:function(){n.popup.setY(0),n.scene.screen.close(n.name)}})),this.popupFadeOutAnimation.play()},n.runFadeInMaskAnimation=function(e,t){var n=this;if(!this.popupFadeInMaskAnimation){var i=this.background.alpha;this.popupFadeInMaskAnimation=new wa.Z({targets:[this.background],delay:e,duration:t,props:{alpha:{start:0,from:0,to:i}},onUpdate:function(){n.scene.game.globalScene.requestBackgroundMaskUpdate(ba.o4.SETTINGS_SCREEN,n.background.alpha)}})}this.popupFadeInMaskAnimation.play()},n.runFadeOutMaskAnimation=function(e,t){var n=this;if(!this.popupFadeOutMaskAnimation){var i=this.background.alpha;this.popupFadeOutMaskAnimation=new Pa.Z({targets:[this.background],delay:e,duration:t,props:{alpha:{start:i,from:i,to:0}},onUpdate:function(){n.scene.game.globalScene.requestBackgroundMaskUpdate(ba.o4.SETTINGS_SCREEN,n.background.alpha)}})}this.popupFadeOutMaskAnimation.play()},t}(GameCore.Screen),xl=Pl,kl=GameCore.Configs.Network,Ml=function(e){function t(){for(var t,n,i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];return(n=e.call.apply(e,A()(t=[this]).call(t,a))||this).main=void 0,n.mainLevelContent=void 0,n.header=void 0,n.footer=void 0,n.isLoadingScreenShowed=void 0,n.run=function(){n.facebook.attemptToAddShortcut(),n.checkReceiveLevelFromFb()},n.handlePlaySingle=function(){n.storage.dispatch(Zo())},n.handlePlayWithFriend=function(){n.storage.dispatch(zo())},n.handleSettingClick=function(){n.screen.open(ba.o4.SETTINGS_SCREEN)},n.onConfirm=function(){FBInstant.player.setDataAsync({level:1}),n.storage.dispatch(xo(1)),n.loadLevelConfig(),n.mainLevelContent.updateData(),n.screen.close(ba.o4.START_OVER_SCREEN),n.screen.close(ba.o4.MISSION_COLLECTION_COMPLETE_SCREEN)},n}(0,o.Z)(t,e);var n=t.prototype;return n.preload=function(){this.events.on("wake",this.run),this.events.on("resume",this.run),this.events.on("create",this.run)},n.create=function(){e.prototype.create.call(this),this.createBackground(na.Z.BACKGROUND.KEY),this.createSettingsScreen(),this.createLeaderBoardScreen(),this.createStartOverScreen(),this.createHeaderBar(),this.createMainContent(),this.createMainLevelContent(),this.createFooterBar()},n.createSettingsScreen=function(){this.screen.add(ba.o4.SETTINGS_SCREEN,xl)},n.createLeaderBoardScreen=function(){this.screen.add(ba.o4.LEADER_BOARD_SCREEN,vl)},n.createStartOverScreen=function(){this.screen.add(ba.o4.START_OVER_SCREEN,qa)},n.createHeaderBar=function(){this.header=new vc(this),this.header.setDepth(Oa.Z.BUTTON),this.header.buttonSetting.onClick=this.handleSettingClick,Phaser.Display.Align.In.TopCenter(this.header,this.gameZone)},n.createMainContent=function(){this.main=new Qc(this),this.main.setDepth(Oa.Z.LOGO),this.main.buttonPlaySolo.onClick=this.handlePlaySingle,this.main.buttonPlayJourney.onClick=this.handlePlay.bind(this),Phaser.Display.Align.In.Center(this.main,this.gameZone)},n.createMainLevelContent=function(){this.mainLevelContent=new Ch(this),this.mainLevelContent.setDepth(Oa.Z.LOGO),this.mainLevelContent.buttonPlayJourney.onClick=this.handlePlay.bind(this),this.mainLevelContent.setVisible(!1),Phaser.Display.Align.In.Center(this.mainLevelContent,this.gameZone)},n.createFooterBar=function(){this.footer=new uc(this),this.footer.setDepth(Oa.Z.BUTTON),this.footer.buttonModeDice.onClick=this.clickButtonModeDice.bind(this),this.footer.buttonAdventure.onClick=this.clickButtonAdventure.bind(this),Phaser.Display.Align.In.BottomCenter(this.footer,this.gameZone)},n.clickButtonModeDice=function(){this.footer.clickButtonModeDice(),this.main.setVisible(!0),this.mainLevelContent.setVisible(!1)},n.clickButtonAdventure=function(){var e=(0,r.Z)(u().mark((function e(){var t,n,i;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.game,n=t.globalScene,i=t.lang,n.screen.open(ba.o4.NOTIFY_SCREEN,{message:i.Text.LOADING_LEVEL,duration:2e3}),e.next=4,this.checkReceiveLevelFromFb();case 4:n.screen.close(ba.o4.NOTIFY_SCREEN),this.footer.clickButtonAdventure(),this.main.setVisible(!1),this.mainLevelContent.setVisible(!0);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.handlePlay=function(){var e=this,t=this.storage.getState();(cr(t)||1)>_a.length-1?this.screen.open(ba.o4.START_OVER_SCREEN,{onConfirm:this.onConfirm}):(this.showLoadingScreen(),this.loadLevelConfig((function(){e.storage.dispatch(jo())})))},n.checkReceiveLevelFromFb=function(){var e=(0,r.Z)(u().mark((function e(){var t;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,t=this.storage.getState(),!cr(t)){e.next=6;break}return this.handleLoadCurrentMapComplete(),e.abrupt("return");case 6:return this.main.showLoading(),this.mainLevelContent.showLoading(),e.next=10,this.storage.dispatch(Po());case 10:this.loadLevelConfig(),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),(0,i.tO)(e.t0);case 16:case"end":return e.stop()}}),e,this,[[0,13]])})));return function(){return e.apply(this,arguments)}}(),n.loadLevelConfig=function(e){var t=this;try{var n=this.storage.getState(),a=cr(n),s=_a[a];if(!s)return void this.handleLoadCurrentMapComplete(e);var r=s.key,o=s.mapJson;if(this.cache.tilemap.exists(r))return void this.handleLoadCurrentMapComplete(e);this.load.tilemapTiledJSON(r,o),this.load.start(),this.load.off(Phaser.Loader.Events.COMPLETE),this.load.once(Phaser.Loader.Events.COMPLETE,(function(){t.handleLoadCurrentMapComplete(e)}))}catch(c){(0,i.tO)(c)}finally{this.isLoadingScreenShowed&&this.closeLoadingScreen()}},n.handleLoadCurrentMapComplete=function(e){this.main.showContent(),this.mainLevelContent.showContent(),e&&e()},n.showLoadingScreen=function(){this.isLoadingScreenShowed=!0;var e=this.game,t=e.globalScene,n=e.lang;t.screen.open(ba.o4.NOTIFY_SCREEN,{message:n.Text.LOADING_LEVEL,duration:kl,loading:!0})},n.closeLoadingScreen=function(){this.isLoadingScreenShowed=!1,this.game.globalScene.screen.close(ba.o4.NOTIFY_SCREEN)},t}(nc.Z);var Ll=Ml,Nl=n(473),Gl=n.n(Nl),Bl=n(209),Fl=n.n(Bl),Ul=n(132),Hl=n.n(Ul),Vl=Fa.Z.GAMEPLAY_32.FRAME,Yl=function(e){return e>10},Zl=n(129),Wl=n.n(Zl),Kl=Fa.Z.GAMEPLAY,zl=Kl.KEY,Xl=Kl.FRAME,jl=Fa.Z.GAMEPLAY_32.FRAME,Jl=Wl()(.3,-.6,.85,.07),ql=function(e){function t(t,n){var i;return(i=e.call(this,t,n.x,n.y,n.texture,n.frame||jl.DICE_TRANSPARENT)||this).props=void 0,i.customValue=void 0,i.tweenScaleDown=void 0,i.onComplete=void 0,i.particle=void 0,i.emitterExploreBubble=void 0,i.circleImage=void 0,i.tweenCircleImage=void 0,i.tweenJump=void 0,i.status=void 0,i.rateShaking=1,i.setWorldSize(n.width,n.height),i.props=n,n.inputEnabled&&i.setInteractive(),i.createCircleImage(),i.createTween(),i.createParticle(),i.createEmitterExploreBubble(),i.listenEvents(),i.scene.add.existing((0,Ga.Z)(i)),i}(0,o.Z)(t,e);var n=t.prototype;return n.setCustomValue=function(e){this.customValue=e;var t=function(e){var t="";switch(e){case 1:t=Vl.DICE_1;break;case 2:t=Vl.DICE_2;break;case 3:t=Vl.DICE_3;break;case 4:t=Vl.DICE_4;break;case 5:t=Vl.DICE_5;break;case 6:t=Vl.DICE_6;break;case 7:t=Vl.DICE_7;break;case 11:t=Vl.DICE_11;break;case 12:t=Vl.DICE_12;break;case 13:t=Vl.DICE_13;break;case 14:t=Vl.DICE_14;break;case 15:t=Vl.DICE_15;break;case 16:t=Vl.DICE_16;break;default:t=Vl.DICE_TRANSPARENT}return t}(e);this.setFrame(t),this.setWorldSize(this.props.width,this.props.height)},n.resetSize=function(){this.setWorldSize(this.props.width,this.props.height)},n.createTween=function(){var e=this;this.tweenScaleDown=this.scene.add.tween({delay:250,paused:!0,targets:this,scale:0,duration:200,onComplete:function(){e.onComplete&&e.onComplete()}}),this.tweenCircleImage=this.scene.add.tween({paused:!0,targets:this.circleImage,scale:{from:0,to:1.5},alpha:{from:1,to:.5},duration:250,onComplete:function(){e.circleImage.setVisible(!1),e.circleImage.setScale(0)}}),this.tweenJump=this.scene.add.tween({paused:!0,targets:this,y:this.y-10,yoyo:!0,duration:300,onComplete:function(){e.onComplete&&e.onComplete()}})},n.createCircleImage=function(){this.circleImage=this.scene.make.image({x:this.x,y:this.y,key:zl,frame:Xl.WHITE_CIRCLE_SMALL}),this.circleImage.setVisible(!1).setScale(0)},n.createParticle=function(){this.particle=this.scene.add.particles(zl),this.particle.setDepth(9999999)},n.createEmitterExploreBubble=function(){var e=new Phaser.Geom.Circle(0,0,20);this.emitterExploreBubble=this.particle.createEmitter({name:"EmitterExploreBubble",x:this.x,y:this.y,frame:[Xl.CIRCLE_1,Xl.CIRCLE_2],speed:{min:20,max:55},scale:{start:1,end:.3},gravityY:-20,maxParticles:Phaser.Math.RND.between(5,20),on:!1,lifespan:{min:500,max:2e3},emitZone:{type:"edge",source:e}})},n.listenEvents=function(){this.on(Phaser.Input.Events.POINTER_DOWN,(function(){}))},n.moveTo=function(e,t){var n=this,i=e.x,a=e.y,s=this.x,r=this.y,o=this.scale;this.scene.add.tween({x:i,y:a,scale:{from:o,to:o-.2},ease:Jl,targets:this,onUpdate:function(e){e.getValue(2)},onComplete:function(){t&&t(),n.x=s,n.y=r,n.scale=o},duration:400})},n.rescue=function(e){var t=this;if(this.customValue){var n=this.scaleX,i=this.scaleY;this.onComplete=function(){t.setCustomValue(0),t.setScale(n,i),e&&e()},this.circleImage.setVisible(!0),this.tweenCircleImage.play(),this.emitterExploreBubble.dead=[],this.emitterExploreBubble.start(),this.tweenScaleDown.play()}},n.animationJump=function(e){this.onComplete=e,this.circleImage.setVisible(!0),this.tweenCircleImage.play(),this.emitterExploreBubble.dead=[],this.emitterExploreBubble.start(),this.tweenJump.play()},n.setStatus=function(e){this.status=e},n.playShaking=function(){this.status="SHAKING"},n.stopShaking=function(){this.status="",this.rotation=0},n.preUpdate=function(){"SHAKING"===this.status&&(this.rotation+=.03*this.rateShaking,this.rotation>.2&&(this.rateShaking=-1),this.rotation<-.2&&(this.rateShaking=1))},t}(Phaser.GameObjects.Image),Ql=ql,$l=GameCore.Configs.Gameplay,eu=$l.StartScoreCool,tu=Fa.Z.GAMEPLAY,nu=tu.KEY,iu=tu.FRAME,au=Fa.Z.GAMEPLAY_32,su=au.KEY,ru=au.FRAME,ou=GameCore.Configs.Board,cu=ou.cols,hu=ou.rows,lu=function(e){function t(t,n,i){var a;return(a=e.call(this,t)||this).scene=void 0,a.maxValueDice=1,a.initDice=[],a.amountTask=0,a.mainDiceMerged=void 0,a.diceMerged=[],a.lastDiceMerged=void 0,a.pX=void 0,a.pY=void 0,a.diceSize=void 0,a.dataBoard=[],a.cellsHighlight=[],a.diceMergedHighlight=[],a.background=void 0,a.scene=t,a.setSize(n,i),a.init(),a}(0,o.Z)(t,e);var n=t.prototype;return n.init=function(){var e=this.scene.gameZone,t=e.width,n=e.height;this.pX=t/2,this.pY=n/2-54,this.createBackground(),this.initDataBoard(),this.listenEvents()},n.createBackground=function(){this.background=this.scene.make.image({key:nu,frame:iu.BG_BOARD}),this.background.setPosition(this.pX,this.pY),this.background.setWorldSize(this.width,this.height)},n.initDataBoard=function(){var e=this;this.initDice=[];var t=this.scene.gameZone.width,n=(t-this.width)/2+8,i=this.pY-this.height/2+8;this.diceSize=(this.width-16-2*(cu+1))/cu;for(var a=function(t){for(var a=[],s=i+e.diceSize/2+e.diceSize*t+1.8*(t+1),r=function(i){var r,o=n+e.diceSize/2+e.diceSize*i+2*(i+1),c=new Ql(e.scene,{x:o,y:s,width:e.diceSize,height:e.diceSize,texture:su,frame:ru.DICE_TRANSPARENT});c.setVisible(!1);var h=ge()(r=e.initDice).call(r,(function(e){return e.x===i&&e.y===t})),l=(h[0]||{value:0}).value;h&&h.length>0&&(c.setCustomValue(l),c.setVisible(!0)),a.push({x:i,y:t,pX:o,pY:s,value:l,dice:c})},o=0;o<cu;o++)r(o);e.dataBoard.push(a)},s=0;s<hu;s++)a(s)},n.listenEvents=function(){this.scene.events.on(Pc,this.handleMove.bind(this)),this.scene.events.on(wc,this.handleHighlight.bind(this)),this.scene.events.on(xc,this.handleRemoveHighlight.bind(this)),this.scene.events.on(kc,this.handleRemoveDiceMergedHighlight.bind(this)),this.scene.events.on(Mc,this.handleGameOver.bind(this))},n.handleRemoveDiceMergedHighlight=function(){for(var e=0;e<this.diceMergedHighlight.length;e++){this.diceMergedHighlight[e].setAlpha(1)}this.diceMergedHighlight=[]},n.handleHighlight=function(e){try{this.cellsHighlight=e;for(var t=0;t<e.length;t++){var n=e[t],i=n.x,a=n.y,s=this.dataBoard[a][i];s.dice.setVisible(!0),s.dice.setFrame(ru.DICE_HIGHT_LIGHT),s.dice.resetSize();var r=this.getMergeDice(e[t]);if(r&&r.length>=2)for(var o=0;o<r.length;o++){var c=r[o].dice;this.diceMergedHighlight.push(c),c.setAlpha(.8)}}}catch(h){}},n.handleMove=function(e,t,n){this.cellsHighlight=e;try{for(var i=0;i<e.length;i++){var a=e[i],s=a.x,r=a.y,o=a.value,c=this.dataBoard[r][s];c.value=o,c.dice.setVisible(!0),c.dice.setCustomValue(o)}this.handleMergeDice(e[this.amountTask],t,n)}catch(h){}},n.handleMergeDice=function(e,t,n){var i=this;if(!this.scene.isGameReplay){if(!e){var a=this.calcScore(this.diceMerged,n);return 0===a?t&&t():this.runAnimAfterMerged(this.lastDiceMerged,a,t),this.diceMerged=[],this.cellsHighlight=[],void(this.amountTask=0)}var r=e.x,o=e.y,c=e.value,h=this.dataBoard[o][r],l=h.dice;h.value=c,l.setVisible(!0),l.setCustomValue(c);var u=this.getMergeDice(e);if(!u||u.length<=1)return this.amountTask++,void this.handleMergeDice(this.cellsHighlight[this.amountTask],t,n);this.lastDiceMerged=e;for(var d=function(){var e,t=u[p],n=t.x,a=t.y,s=i.dataBoard[a][n].dice;s.setAlpha(1),i.dataBoard[a][n].value=0;var r,o=Fl()(e=i.cellsHighlight).call(e,(function(e){return e.x===n&&e.y===a}));-1!==o&&Hl()(r=i.cellsHighlight).call(r,o,1);i.scene.animDice.playAnimationMoveTo(s,h,(function(){s.setCustomValue(0),s.setVisible(!1),h.value=c+1,l.setCustomValue(c+1)}))},p=0;p<u.length;p++)d();this.scene.animDice.playAnimationMerge(l,(function(){if(!i.scene.isGameReplay){i.diceMerged.push({value:c,amount:u.length+1}),c+1>i.maxValueDice&&(i.maxValueDice=c+1>6?6:c+1);var a=i.calcScore(i.diceMerged,n);c+1!==8?i.cellsHighlight[i.amountTask]&&i.handleMergeDice((0,s.Z)({},i.cellsHighlight[i.amountTask],{value:c+1}),t,n):i.handleMergeStarDiceToRubyDice(h,e,a,t)}}))}},n.runAnimAfterMerged=function(e,t,n){var i=this;if(this.scene.isTutorialRunning)return this.diceMerged=[],void(n&&n());var a=function(){i.scene.isGameReplay||(i.scene.handleAddScore(t),i.scene.main.praise.handlePraise(e.pX,e.pY,t),i.diceMerged=[],n&&n())};if(t<eu)a();else{var s=this.scene.header.getPositionScoreByMode();this.scene.animDice.playAnimationStarToScore(e,{pX:s.x,pY:s.y},this.diceMerged,a)}this.scene.footer.itemMagnet.playAnimationStarToMagnetItem({pX:e.pX,pY:e.pY},{pX:this.scene.footer.itemMagnet.x,pY:this.scene.footer.itemMagnet.y},t)},n.handleMergeStarDiceToRubyDice=function(e,t,n,i){var a=this;this.scene.time.addEvent({delay:500,callback:function(){a.handleDiceMagic(e,t,n,i)},callbackScope:this})},n.getMergeDice=function(e){if(e.value){var t=this.getRoundDice(e),n=[];return this.getAllRoundDice(t,n,e),n}},n.getAllRoundDice=function(e,t,n){if(e&&0!==e.length){var i=e.pop();t.push(i);for(var a=this.getRoundDice(i)||[],s=0;s<a.length;s++){var r=a[s];this.checkArrayHasItem(e,r)||this.checkArrayHasItem(t,r)||n&&(!n||r.x===n.x&&r.y===n.y)||e.push(r)}this.getAllRoundDice(e,t,n)}},n.getRoundDice=function(e,t){void 0===t&&(t=!1);var n=e.x,i=e.y;if(e.value||t){var a=[],s=null,r=null,o=null,c=null;return i-1>=0&&(s={x:n,y:i-1},this.dataBoard[s.y][s.x].value===e.value&&a.push(this.dataBoard[s.y][s.x])),n-1>=0&&(r={x:n-1,y:i},this.dataBoard[r.y][r.x].value===e.value&&a.push(this.dataBoard[r.y][r.x])),n+1<=4&&(c={x:n+1,y:i},this.dataBoard[c.y][c.x].value===e.value&&a.push(this.dataBoard[c.y][c.x])),i+1<=4&&(o={x:n,y:i+1},this.dataBoard[o.y][o.x].value===e.value&&a.push(this.dataBoard[o.y][o.x])),a}},n.checkArrayHasItem=function(e,t){var n=ge()(e).call(e,(function(e){return e.x===t.x&&e.y===t.y}));return n&&n.length>0},n.handleRemoveHighlight=function(){try{for(var e=0;e<this.cellsHighlight.length;e++){var t=this.cellsHighlight[e],n=t.x,i=t.y;this.dataBoard[i]&&this.dataBoard[i][n]&&0===this.dataBoard[i][n].value&&(this.dataBoard[i][n].dice.setVisible(!0),this.dataBoard[i][n].dice.setFrame(ru.DICE_TRANSPARENT))}}catch(a){}},n.getMaxValueDice=function(){return this.maxValueDice>6?6:this.maxValueDice},n.handleDiceMagic=function(e,t,n,i){for(var a=e.x,s=e.y,r=a-1>=0?a-1:a,o=a+1<5?a+1:a,c=s+1<5?s+1:s,h=s-1>=0?s-1:s;h<=c;h++)for(var l=r;l<=o;l++){var u=this.dataBoard[h][l],d=u.dice;a===l&&s===h||(n+=u.value),u.value=0,d.rescue()}this.diceMerged=[],this.amountTask=0,this.cellsHighlight=[],this.runAnimAfterMerged(t,n,i)},n.restart=function(){this.maxValueDice=1,this.diceMerged=[];for(var e=0;e<this.dataBoard.length;e++)for(var t=this.dataBoard[e],n=0;n<t.length;n++){var i=t[n],a=i.dice;a.setCustomValue(0),a.setVisible(!1),a.setDepth(e*hu+n),i.value=0}},n.handleGameOver=function(e){var t=this;if(this.checkIsGameOver(e)){this.scene.updateStateGameOver(!0),this.scene.clearFen(),this.scene.disableInput(),this.scene.runAnimTintBackground(),this.scene.footer.disableItems();this.scene.outOfMoveLabel.playAnimationShow((function(){t.scene.header.disableItems(),t.outOfMove((function(){t.scene.time.addEvent({delay:1500,callback:function(){t.scene.handleRequestFinishGame()}})}))}))}},n.checkIsGameOver=function(e){var t=this.getDiceEmpty();if(0===t.length)return!0;for(var n=!0,i=0;i<t.length;i++){var a=this.getRoundDice(t[i],!0);if(a&&a.length+1>=e)return n=!1,!1}return n},n.getDiceSlot=function(){var e,t,n,i=this.getDiceEmpty();if(0===i.length)return 1;for(var a=0,s=0,r=0;r<i.length;r++){var o=this.getRoundDice(i[r],!0);o&&o.length>0?s++:a++}var c=A()(e=[]).call(e,Wr()(t=Array(a)).call(t,1),Wr()(n=Array(s)).call(n,2));return c[Math.floor(Math.random()*c.length)]},n.getDiceEmpty=function(){for(var e=[],t=0;t<hu;t++)for(var n=0;n<cu;n++)this.dataBoard[t][n].value||e.push(this.dataBoard[t][n]);return e},n.rescue=function(){for(var e=this,t=[],n=1;n<4;n++)for(var i=1;i<4;i++)t.push(this.dataBoard[n][i]);for(var a=t[Math.floor(Math.random()*t.length)],s=a.x,r=a.y,o=[],c=s-1;c<=s+1;c++)for(var h=r-1;h<=r+1;h++){var l=this.dataBoard[c][h],u=Math.floor(1e3*Math.random()+20);o.push({data:l,delay:u})}pi()(o).call(o,(function(e,t){return e.delay-t.delay}));for(var d=function(){var t=o[p],n=t.delay,i=t.data,a=i.dice;e.scene.time.addEvent({delay:n,callback:function(){a.rescue((function(){i.value=0,e.scene.updateMatchData()}))}})},p=0;p<o.length;p++)d()},n.outOfMove=function(e){for(var t=this,n=[200,300,400,500,600,700,800,900,1e3],i=0,a=[],s=this.dataBoard.length-1,r=0;r<=s;r++){for(var o=0;r-o>=0;){var c=this.dataBoard[r-o][4-o].dice;a.push({dice:c,delay:n[i]}),o++}i++}for(var h=1;h<=s;h++){for(var l=0;h+0>l;){var u=this.dataBoard[h][0+l].dice;a.push({dice:u,delay:n[i]}),l++}i++}for(var d=function(){var n=a[p],i=n.delay,s=n.dice,r=null;p===a.length-1&&(r=function(){e&&e()}),t.scene.time.addEvent({delay:i,callback:function(){s.animationJump(r)}})},p=0;p<a.length;p++)d()},n.calcScore=function(e,t){if(!e||0===e.length)return 0;for(var n=t||0,i=void 0===t?0:1,a=e.length,s=0;s<a;s++){var r=e[s];n+=r.value*r.amount}return n*(a+i)},n.exploreFen=function(e){var t=e.split(",");if(t&&!(t.length<this.dataBoard.length)){for(var n=1,i=0;i<t.length;i++)for(var a=t[i].split(""),s=0;s<a.length;s++){var r="x"===a[s]?0:parseInt(a[s]);this.dataBoard[i][s].value=r,this.dataBoard[i][s].dice.setCustomValue(r),this.dataBoard[i][s].dice.setVisible(!!r),r>n&&(n=r)}this.maxValueDice=n}},t}(Phaser.GameObjects.Container),uu=GameCore.Configs.Gameplay,du=uu.VibrateValue,pu=uu.StartScoreCool,mu=uu.StartScoreGood,gu=uu.StartScoreExcellent,fu=Fa.Z.EFFECTS,Eu=fu.KEY,vu=fu.FRAME,Su=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n.diceSize=void 0,n.onComplete=void 0,n.praiseFrame=void 0,n.praiseScoreText=void 0,n.scene=t,t.add.existing((0,Ga.Z)(n)),n.setVisible(!1).setAlpha(0),n.init(),n}(0,o.Z)(t,e);var n=t.prototype;return n.init=function(){this.createPraiseFrame(),this.createPraiseScoreText(),this.setPosition(100,100)},n.createPraiseFrame=function(){this.praiseFrame=this.scene.make.image({x:0,y:0,key:Eu}),this.add(this.praiseFrame),Phaser.Display.Align.In.Center(this.praiseFrame,this,0,-20)},n.createPraiseScoreText=function(){var e=this.scene.facebook.getLocale();this.praiseScoreText="ar"==e?this.scene.make.text({style:{fontFamily:Wa.Z.FONT_FAMILY,fontSize:this.scene.fontSize(30)+"px"},origin:{x:.5,y:.5}}):this.scene.make.bitmapText({font:Wa.Z.PRIMARY.KEY,size:this.scene.fontSize(30),origin:{x:.5,y:.5}}),this.add(this.praiseScoreText),Phaser.Display.Align.In.Center(this.praiseScoreText,this,0,20)},n.handlePraise=function(e,t,n){var i=this,a=this.scene.world.getPixelRatio(),s=this.scene.game.lang;n<pu?this.praiseFrame.setVisible(!1):this.praiseFrame.setVisible(!0);var r="",o=0;this.x=e,pu<=n&&n<mu?(r=vu.TEXT_COOL,o=du[0]):mu<=n&&n<gu?(r=vu.TEXT_GOOD,o=du[1]):n>=gu&&(r=vu.TEXT_EXCELLENT,o=du[2]),this.scene.player.getPlayerSettings().vibrate&&Rl(o),this.setVisible(!0),this.praiseFrame.setFrame(r);var c=this.praiseFrame,h=c.width/a,l=c.height/a;this.praiseFrame.setWorldSize(h,l),this.x-h/2<0&&(this.x=h/2),this.x+h/2>this.scene.gameZone.width&&(this.x=this.scene.gameZone.width-h/2),this.praiseScoreText.setText("+"+n+" "+s.Text.POINTS),this.scene.add.tween({targets:this,y:{from:t+20,to:t},alpha:{from:0,to:1},scale:{from:0,to:1},duration:300,onComplete:function(){i.scene.add.tween({delay:800,targets:i,y:{from:t,to:t-20},alpha:{from:1,to:0},scale:{from:1,to:1.5},duration:300})}})},t}(Phaser.GameObjects.Container),Au=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n.board=void 0,n.praise=void 0,n.scene=t,t.add.existing((0,Ga.Z)(n)),n.init(),n}(0,o.Z)(t,e);var n=t.prototype;return n.init=function(){this.createBoard(),this.createPraise()},n.createBoard=function(){this.board=new lu(this.scene,326,323)},n.createPraise=function(){this.praise=new Su(this.scene),this.praise.setDepth(Oa.Z.EFFECT)},t}(Phaser.GameObjects.Container),Tu=Au,yu=Fa.Z.GAMEPLAY,Iu=yu.KEY,Cu=yu.FRAME,Ou=function(e){function t(t){var n;return(n=e.call(this,t,Iu,Cu.BUTTON_MINOR)||this).button.setWorldSize(41,37),n.setName("Setting"),n.createIcon(),n}return(0,o.Z)(t,e),t.prototype.createIcon=function(){var e=this.scene.make.image({key:Iu,frame:Cu.ICON_SETTING});e.setWorldSize(25,24),this.add(e),Phaser.Display.Align.In.Center(e,this)},t}(Ba.Z),bu=Ou,Ru=Fa.Z.GAMEPLAY,Du=Ru.KEY,_u=Ru.FRAME,wu=function(e){function t(t){var n;return(n=e.call(this,t,Du,_u.BUTTON_MINOR)||this).icon=void 0,n.button.setWorldSize(41,37),n.setName("Sound"),n.createIcon(),n}(0,o.Z)(t,e);var n=t.prototype;return n.createIcon=function(){this.icon=this.scene.make.image({key:Du,frame:_u.ICON_SOUND}),this.icon.setWorldSize(25,21),this.add(this.icon),Phaser.Display.Align.In.Center(this.icon,this)},n.updateIconByStatus=function(e){e?this.icon.setFrame(_u.ICON_SOUND):this.icon.setFrame(_u.ICON_SOUND_OFF)},t}(Ba.Z),Pu=wu,xu=Fa.Z.GAMEPLAY,ku=xu.KEY,Mu=xu.FRAME,Lu=function(e){function t(t){var n;return(n=e.call(this,t)||this).background=void 0,n.iconCrown=void 0,n.textScore=void 0,n.scene.add.existing((0,Ga.Z)(n)),n.init(),n}(0,o.Z)(t,e);var n=t.prototype;return n.init=function(){this.createBackground(),this.createIconCrown(),this.createTextScore()},n.createBackground=function(){this.background=this.scene.make.image({key:ku,frame:Mu.BG_BLUE_DARK}),this.background.setWorldSize(123,37),this.add(this.background),Phaser.Display.Align.In.Center(this.background,this)},n.createIconCrown=function(){this.iconCrown=this.scene.make.image({key:ku,frame:Mu.ICON_CROWN}),this.iconCrown.setWorldSize(31,24),this.add(this.iconCrown),Phaser.Display.Align.In.Center(this.iconCrown,this.background,-35,-2)},n.createTextScore=function(){this.textScore=this.scene.make.bitmapText({font:Wa.Z.NUMBER_YELLOW.KEY,size:this.scene.fontSize(45),origin:{x:.5,y:.5},text:"0"}),this.add(this.textScore),Phaser.Display.Align.In.Center(this.textScore,this.background,10,3)},n.setTextScore=function(e){this.textScore.setText(String(e))},t}(Phaser.GameObjects.Container),Nu=Fa.Z.GAMEPLAY,Gu=Nu.KEY,Bu=Nu.FRAME,Fu=function(e){function t(t){var n;return(n=e.call(this,t,{key:Gu,frame:Bu.AVATAR_BORDER,background:Bu.AVATAR_BACKGROUND,width:29,height:29})||this).scene=void 0,n.scene=t,n}return(0,o.Z)(t,e),t.prototype.loadAvatar=function(e,t,n){this.loadPhoto(e,t,n)},t}(jh),Uu=Fu,Hu=Fa.Z.GAMEPLAY,Vu=Hu.KEY,Yu=Hu.FRAME,Zu=function(e){function t(t){var n;return(n=e.call(this,t)||this).background=void 0,n.textScore=void 0,n.avatar=void 0,n.backgroundAvatar=void 0,n.score=0,n.scene.add.existing((0,Ga.Z)(n)),n.init(),n}(0,o.Z)(t,e);var n=t.prototype;return n.init=function(){this.createBackground(),this.createTextScore(),this.createBgAvatar(),this.createAvatar()},n.createBackground=function(){this.background=this.scene.make.image({key:Vu,frame:Yu.BG_GREEN_DARK}),this.background.setWorldSize(108,37),this.add(this.background),Phaser.Display.Align.In.Center(this.background,this)},n.createTextScore=function(){this.textScore=this.scene.make.bitmapText({font:Wa.Z.PRIMARY.KEY,size:this.scene.fontSize(31),origin:{x:.5,y:.5},text:"0"}),this.add(this.textScore),Phaser.Display.Align.In.Center(this.textScore,this.background,-17)},n.createAvatar=function(){this.avatar=new Uu(this.scene),this.add(this.avatar),Phaser.Display.Align.In.Center(this.avatar,this.backgroundAvatar,.75,-.5)},n.createBgAvatar=function(){this.backgroundAvatar=this.scene.make.image({key:Vu,frame:Yu.BG_GREEN_SQUARE}),this.add(this.backgroundAvatar),this.backgroundAvatar.flipX=!0,this.backgroundAvatar.setWorldSize(34,33),Phaser.Display.Align.In.RightCenter(this.backgroundAvatar,this.background,-2.75)},n.updateInfo=function(){var e=this.scene.player.getPlayer(),t=e.playerId,n=e.photo;this.avatar.loadAvatar(t,n,5)},n.setTextScore=function(e){this.score=e,this.textScore.setText(String(e))},n.getCurrentScore=function(){return this.score},t}(Phaser.GameObjects.Container),Wu=Fa.Z.GAMEPLAY,Ku=Wu.KEY,zu=Wu.FRAME,Xu=function(e){function t(t){var n;return(n=e.call(this,t)||this).background=void 0,n.textScore=void 0,n.avatar=void 0,n.backgroundAvatar=void 0,n.scene.add.existing((0,Ga.Z)(n)),n.init(),n}(0,o.Z)(t,e);var n=t.prototype;return n.init=function(){this.createBackground(),this.createTextScore(),this.createBgAvatar(),this.createAvatar()},n.createBackground=function(){this.background=this.scene.make.image({key:Ku,frame:zu.BG_GREEN_DARK}),this.background.setWorldSize(110,37),this.add(this.background),Phaser.Display.Align.In.Center(this.background,this)},n.createTextScore=function(){this.textScore=this.scene.make.bitmapText({font:Wa.Z.PRIMARY.KEY,size:this.scene.fontSize(31),origin:{x:.5,y:.5},text:"2500"}),this.add(this.textScore),Phaser.Display.Align.In.Center(this.textScore,this.background,17)},n.createAvatar=function(){this.avatar=new Uu(this.scene),this.add(this.avatar),Phaser.Display.Align.In.Center(this.avatar,this.backgroundAvatar,-.75,-.5)},n.updateInfo=function(){var e=this.scene.storage.getState(),t=hr(e),n=tr(e),i=n.playerId,a=n.photo,s=(t[i]||{}).score,r=void 0===s?0:s;this.setTextScore(r),this.avatar.loadAvatar(i,a,5)},n.createBgAvatar=function(){this.backgroundAvatar=this.scene.make.image({key:Ku,frame:zu.BG_GREEN_SQUARE}),this.add(this.backgroundAvatar),this.backgroundAvatar.setWorldSize(34,33),Phaser.Display.Align.In.LeftCenter(this.backgroundAvatar,this.background,-2.75)},n.setTextScore=function(e){this.textScore.setText(String(e))},t}(Phaser.GameObjects.Container),ju=n(461),Ju=Fa.Z.GAMEPLAY,qu=Ju.KEY,Qu=Ju.FRAME,$u=function(e){function t(t,n,i){var a;return(a=e.call(this,t)||this).scene=void 0,a.leftBg=void 0,a.midBg=void 0,a.rightBg=void 0,a.leftProgress=void 0,a.midProgress=void 0,a.rightProgress=void 0,a.iconCup=void 0,a.glareCup=void 0,a.tweenRotationGlareCup=void 0,a.targetScore=void 0,a.listPoolMilestoneFrame=[],a.listMilestoneFrame=[],a.particle=void 0,a.emitter=void 0,a.progressBarFull=void 0,a.setSize(n,i),a.scene=t,a.init(),a}(0,o.Z)(t,e);var n=t.prototype;return n.init=function(){this.initBg(),this.initProgressBar(),this.createParticle(),this.createEmitter(),this.createGlareCup(),this.createTweenGlare(),this.createIconCup()},n.initBg=function(){this.leftBg=this.scene.make.image({key:qu,frame:Qu.PROGRESS_BG_LEFT}),this.midBg=this.scene.make.image({key:qu,frame:Qu.PROGRESS_BG_MID}),this.rightBg=this.scene.make.image({key:qu,frame:Qu.PROGRESS_BG_RIGHT});var e=this.leftBg,t=e.width,n=e.height,i=t*this.height/n;this.leftBg.setWorldSize(i,this.height);var a=this.rightBg,s=a.width,r=a.height,o=s*this.height/r;this.rightBg.setWorldSize(o,this.height);var c=this.width-(i+o);this.midBg.setWorldSize(c,this.height),this.add(this.leftBg),this.add(this.midBg),this.add(this.rightBg),Phaser.Display.Align.In.LeftCenter(this.leftBg,this,0,0),Phaser.Display.Align.In.Center(this.midBg,this,0,0),Phaser.Display.Align.In.RightCenter(this.rightBg,this,0,0)},n.initProgressBar=function(){this.leftProgress=this.scene.make.image({key:qu,frame:Qu.PROGRESS_BAR_LEFT}),this.midProgress=this.scene.make.image({key:qu,frame:Qu.PROGRESS_BAR_MID}),this.rightProgress=this.scene.make.image({key:qu,frame:Qu.PROGRESS_BAR_RIGHT});var e=this.leftProgress,t=e.width,n=e.height,i=t*this.height/n;this.leftProgress.setWorldSize(i,this.height);var a=this.rightProgress,s=a.width,r=a.height,o=s*this.height/r;this.rightProgress.setWorldSize(o,this.height);var c=this.width-(i+o)+3;this.midProgress.setWorldSize(c,this.height),this.add(this.leftProgress),this.add(this.midProgress),this.add(this.rightProgress),this.leftProgress.setVisible(!1),this.rightProgress.setVisible(!1),this.midProgress.setVisible(!1),Phaser.Display.Align.In.LeftCenter(this.leftProgress,this,0,0),Phaser.Display.Align.In.Center(this.midProgress,this,0,0),Phaser.Display.Align.In.RightCenter(this.rightProgress,this,0,0)},n.createIconCup=function(){this.iconCup=this.scene.make.image({key:qu,frame:Qu.ICON_CUP}),this.iconCup.setWorldSize(27,24),this.add(this.iconCup),Phaser.Display.Align.In.RightCenter(this.iconCup,this.glareCup,-9,1)},n.createGlareCup=function(){this.glareCup=this.scene.make.image({key:qu,frame:Qu.GLARE}),this.glareCup.setWorldSize(44,44),this.glareCup.setVisible(!1),this.add(this.glareCup),Phaser.Display.Align.In.RightCenter(this.glareCup,this.rightBg,40,-3)},n.createTweenGlare=function(){this.tweenRotationGlareCup=new ju.Z({targets:[this.glareCup],repeat:-1,duration:6e3})},n.createParticle=function(){this.particle=this.scene.add.particles(qu),this.add(this.particle)},n.createEmitter=function(){this.emitter=this.particle.createEmitter({x:0,y:0,scale:{min:.3,max:1},speed:{min:10,max:30},lifespan:{min:500,max:1e3},quantity:1,on:!1,frame:Qu.DUST}),this.emitter.setPosition(this.scene.gameZone.width/2-28,-3)},n.createMilestoneFrame=function(){var e=this.scene.make.image({key:qu,frame:Qu.ICON_MILESTONE});return e.setWorldSize(16,22),e},n.getMilestoneFrame=function(){var e,t=ge()(e=this.listPoolMilestoneFrame).call(e,(function(e){return!e.visible}));if(!t||0===t.length){var n=this.createMilestoneFrame();return this.listPoolMilestoneFrame.push(n),this.add(n),n}return t[0]},n.handleSetAlphaListMilestone=function(e){this.listMilestoneFrame.forEach((function(t){t.score<=e?t.frame.setAlpha(1):t.frame.setAlpha(.5)}))},n.handleSetAlphaCup=function(e){e>=this.targetScore?this.iconCup.setAlpha(1):this.iconCup.setAlpha(.5)},n.runEmitter=function(){this.emitter.start()},n.stopEmitter=function(){this.emitter.stop()},n.runAnimGlare=function(){this.glareCup.setVisible(!0),this.tweenRotationGlareCup.play()},n.stopAnimGlare=function(){this.tweenRotationGlareCup.stop(),this.glareCup.setVisible(!1)},n.hideProgressBar=function(){this.leftProgress.setVisible(!1),this.rightProgress.setVisible(!1),this.midProgress.setVisible(!1)},n.hideMilestone=function(){this.listPoolMilestoneFrame.forEach((function(e){e.setVisible(!1)}))},n.resetListMilestone=function(){this.listMilestoneFrame=[]},n.reset=function(){this.hideMilestone(),this.hideProgressBar(),this.setPercent(0),this.resetListMilestone()},n.setTargetScore=function(e){this.targetScore=e},n.getTargetScore=function(){return this.targetScore},n.setPercent=function(e){var t=e*this.width,n=this.leftProgress.displayWidth,i=this.midProgress.displayWidth,a=this.rightProgress.displayWidth;if(e>=1){if(this.progressBarFull)return;return this.progressBarFull=!0,this.leftProgress.setVisible(!0),this.midProgress.setVisible(!0),this.rightProgress.setVisible(!0),this.leftProgress.setCrop(0,0,n/this.leftProgress.scaleX,2*this.height),this.midProgress.setCrop(0,0,i/this.midProgress.scaleX,2*this.height),this.rightProgress.setCrop(0,0,a/this.rightProgress.scaleX,2*this.height),this.runAnimGlare(),void this.runEmitter()}return this.stopAnimGlare(),this.stopEmitter(),this.progressBarFull=!1,t<n?(this.leftProgress.setVisible(!0),void this.leftProgress.setCrop(0,0,t/this.leftProgress.scaleX,2*this.height)):t>n+i?(this.leftProgress.setVisible(!0),this.leftProgress.setCrop(0,0,n/this.leftProgress.scaleX,2*this.height),this.midProgress.setVisible(!0),this.midProgress.setCrop(0,0,i/this.midProgress.scaleX,2*this.height),this.rightProgress.setVisible(!0),void this.rightProgress.setCrop(0,0,(t-(n+i))/this.rightProgress.scaleX,2*this.height)):(this.leftProgress.setVisible(!0),this.leftProgress.setCrop(0,0,n/this.leftProgress.scaleX,2*this.height),this.midProgress.setVisible(!0),void this.midProgress.setCrop(0,0,(t-n)/this.midProgress.scaleX,2*this.height))},t}(Phaser.GameObjects.Container),ed=Fa.Z.GAMEPLAY,td=ed.KEY,nd=ed.FRAME,id=function(e){function t(t){var n;return(n=e.call(this,t)||this).background=void 0,n.textScore=void 0,n.score=0,n.scene.add.existing((0,Ga.Z)(n)),n.init(),n}(0,o.Z)(t,e);var n=t.prototype;return n.init=function(){this.createBackground(),this.createTextScore()},n.createBackground=function(){this.background=this.scene.make.image({key:td,frame:nd.BG_GREEN_DARK}),this.background.setWorldSize(123,37),this.add(this.background),Phaser.Display.Align.In.Center(this.background,this)},n.createTextScore=function(){this.textScore=this.scene.make.bitmapText({font:Wa.Z.PRIMARY.KEY,size:this.scene.fontSize(30),origin:{x:.5,y:.5},text:"2500"}),this.add(this.textScore),Phaser.Display.Align.In.Center(this.textScore,this.background,0,-2.5)},n.setTextScore=function(e){this.score=e,this.textScore.setText(String(e))},n.restart=function(){this.setTextScore(0)},n.getCurrentScore=function(){return this.score},t}(Phaser.GameObjects.Container),ad=Fa.Z.GAMEPLAY,sd=ad.KEY,rd=ad.FRAME,od=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n.buttonSetting=void 0,n.buttonSound=void 0,n.background=void 0,n.scoreBlock=void 0,n.bestScoreBlock=void 0,n.iconBattle=void 0,n.myScoreBlock=void 0,n.opponentScoreBlock=void 0,n.progressBar=void 0,n.scene=t,n.setSize(n.scene.gameZone.width,60),t.add.existing((0,Ga.Z)(n)),n.createBackground(),n.createButtons(),n.createBestScoreBlock(),n.createScoreBlock(),n.createMyScoreBlock(),n.createIconBattle(),n.createOpponentScoreBlock(),n.createProgressBar(),n}(0,o.Z)(t,e);var n=t.prototype;return n.createBackground=function(){this.background=this.scene.make.image({key:sd,frame:rd.BG_HEADER}),this.background.setWorldSize(this.width,this.height),this.add(this.background),Phaser.Display.Align.In.Center(this.background,this)},n.createButtons=function(){this.createButtonSound(),this.createButtonSetting()},n.createButtonSetting=function(){this.buttonSetting=new bu(this.scene),this.add(this.buttonSetting),Phaser.Display.Align.In.Center(this.buttonSetting,this.background,150,-2)},n.createButtonSound=function(){this.buttonSound=new Pu(this.scene),this.add(this.buttonSound),Phaser.Display.Align.In.Center(this.buttonSound,this.background,-150,-2)},n.createIconBattle=function(){this.iconBattle=this.scene.make.image({key:sd,frame:rd.ICON_BATTLE}),this.iconBattle.setVisible(!1),this.iconBattle.setWorldSize(27,24),this.add(this.iconBattle),Phaser.Display.Align.In.Center(this.iconBattle,this.background,0,-2)},n.createBestScoreBlock=function(){this.bestScoreBlock=new Lu(this.scene),this.bestScoreBlock.setVisible(!1),this.add(this.bestScoreBlock),Phaser.Display.Align.In.Center(this.bestScoreBlock,this.background,-63,-2)},n.createScoreBlock=function(){this.scoreBlock=new id(this.scene),this.scoreBlock.setVisible(!1),this.add(this.scoreBlock),Phaser.Display.Align.In.Center(this.scoreBlock,this.background,63,-2)},n.createMyScoreBlock=function(){this.myScoreBlock=new Zu(this.scene),this.myScoreBlock.setVisible(!1),this.add(this.myScoreBlock),Phaser.Display.Align.In.Center(this.myScoreBlock,this.background,-70,-2)},n.createOpponentScoreBlock=function(){this.opponentScoreBlock=new Xu(this.scene),this.opponentScoreBlock.setVisible(!1),this.add(this.opponentScoreBlock),Phaser.Display.Align.In.Center(this.opponentScoreBlock,this.background,70,-2)},n.createProgressBar=function(){this.progressBar=new $u(this.scene,284,13),this.add(this.progressBar),Phaser.Display.Align.In.BottomCenter(this.progressBar,this.background,-16,25)},n.disableItems=function(){this.setAlpha(.2)},n.enableItems=function(){this.setAlpha(1)},n.showItemBySinglePlayMode=function(){this.bestScoreBlock.setVisible(!0),this.scoreBlock.setVisible(!0),this.myScoreBlock.setVisible(!1),this.iconBattle.setVisible(!1),this.opponentScoreBlock.setVisible(!1)},n.showItemByFriendPlayMode=function(){this.bestScoreBlock.setVisible(!1),this.scoreBlock.setVisible(!1),this.myScoreBlock.setVisible(!0),this.iconBattle.setVisible(!0),this.opponentScoreBlock.setVisible(!0),this.myScoreBlock.updateInfo(),this.opponentScoreBlock.updateInfo()},n.setScoreSingle=function(e){this.scoreBlock.setTextScore(e)},n.setScoreMulti=function(e){this.myScoreBlock.setTextScore(e)},n.setBestScore=function(e){this.bestScoreBlock.setTextScore(e)},n.getCurrentScoreByMode=function(){var e,t=this.scene.storage.getState(),n=Ds(t);return n&&n!==aa&&Rt()(e=[ra,sa,oa]).call(e,n)>=0?this.myScoreBlock.getCurrentScore():this.scoreBlock.getCurrentScore()},n.setCurrentScoreByMode=function(e){var t,n=this.scene.storage.getState(),i=Ds(n);i&&i!==aa&&Rt()(t=[ra,sa,oa]).call(t,i)>=0?this.setScoreMulti(e):this.setScoreSingle(e)},n.setTargetScore=function(e){this.progressBar.setTargetScore(e)},n.setPercent=function(e){this.progressBar.setPercent(e)},n.updateButtonSoundByStatus=function(e){this.buttonSound.updateIconByStatus(e)},n.restart=function(){this.progressBar.reset(),this.progressBar.stopAnimGlare()},n.getPositionScoreByMode=function(){var e,t=this.scene.storage.getState(),n=Ds(t);return n&&n!==aa&&Rt()(e=[ra,sa,oa]).call(e,n)>=0?{x:105,y:25}:{x:250,y:25}},t}(Phaser.GameObjects.Container),cd=od,hd=Fa.Z.GAMEPLAY,ld=hd.KEY,ud=hd.FRAME,dd=function(){function e(e){this.scene=void 0,this.tail=void 0,this.star=void 0,this.tweenStarToMagnetItem=void 0,this.onComplete=void 0,this.path=void 0,this.pathMoveToScore=void 0,this.curve=void 0,this.amountPoint=10,this.pointsPath=[],this.targetShowStarTail=.1,this.scene=e,this.init()}var t=e.prototype;return t.init=function(){this.createTail(),this.createStar(),this.createPath()},t.createTail=function(){this.tail=this.scene.add.rope(0,0,ld,ud.TAIL,15,!1),this.tail.setDisplaySize(this.tail.width,160),this.tail.setSize(this.tail.width,160),this.tail.setAlpha(0),this.tail.setDepth(Oa.Z.ON_TOP)},t.createStar=function(){this.star=this.scene.make.image({key:ld,frame:ud.STAR_YELLOW}),this.star.setDepth(Oa.Z.ON_TOP),this.star.setVisible(!1)},t.createPath=function(){var e=this;this.pathMoveToScore={t:0,vec:new Phaser.Math.Vector2};var t=this.scene.world.getZoomRatio(),n=new Phaser.Math.Vector2(300,300),i=new Phaser.Math.Vector2(200,0),a=new Phaser.Math.Vector2(100,100);this.path={t:0,vec:new Phaser.Math.Vector2},this.curve=new Phaser.Curves.QuadraticBezier(n,i,a),this.tweenStarToMagnetItem=this.scene.add.tween({paused:!0,targets:this.path,t:1,ease:"Sine.easeInOut",duration:1e3,onUpdate:function(n){var i=n.progress;e.curve.getPoint(e.path.t,e.path.vec);var a=new Phaser.Math.Vector2(e.path.vec.x,e.path.vec.y);e.pointsPath.unshift(a),e.star.setPosition(e.path.vec.x,e.path.vec.y);var s=e.tail.points;if(i>=e.targetShowStarTail&&(e.targetShowStarTail+=.1),!(e.pointsPath.length<s.length)){for(var r=s.length,o=0;o<r;o++){var c,h,l=(null==(c=e.pointsPath[o])?void 0:c.x)||e.pointsPath[e.pointsPath.length-1].x,u=((null==(h=e.pointsPath[o])?void 0:h.y)||e.pointsPath[e.pointsPath.length-1].y)+e.star.displayHeight/4;s[o].x=l/e.tail.scaleX,s[o].y=u/e.tail.scaleY-3*t}e.tail.setAlpha(1),e.tail.setDirty()}},onComplete:function(){e.pointsPath=[],e.star.setVisible(!1),e.tail.setVisible(!1),e.tail.setAlpha(0),e.scene.footer.itemMagnet.playTweenGlare(),e.onComplete&&e.onComplete()}})},t.setOnComplete=function(e){this.onComplete=e},t.playAnimation=function(e,t){this.curve.p0=new Phaser.Math.Vector2(e.pX,e.pY),this.curve.p1=new Phaser.Math.Vector2(e.pX+200,e.pY-200),this.curve.p2=new Phaser.Math.Vector2(t.pX,t.pY),this.tail.setVisible(!0),this.star.setVisible(!0),this.targetShowStarTail=.1,this.tweenStarToMagnetItem.play()},t.stopAnimation=function(){this.star.setVisible(!1),this.tail.setVisible(!1),this.tail.setAlpha(0),this.tweenStarToMagnetItem.isPlaying()&&this.tweenStarToMagnetItem.stop()},e}(),pd=Fa.Z.GAMEPLAY,md=pd.KEY,gd=pd.FRAME,fd=function(){function e(e,t,n){this.x=void 0,this.y=void 0,this.scene=void 0,this.background=void 0,this.backgroundSmall=void 0,this.graphicProgress=void 0,this.isDisable=void 0,this.percent=void 0,this.x=t,this.y=n,this.scene=e,this.init()}var t=e.prototype;return t.init=function(){this.createBg(),this.createGraphicsProgress(),this.createBgSmall(),this.updatePercent(0)},t.createBg=function(){this.background=this.scene.make.image({x:this.x,y:this.y,key:md,frame:gd.ITEM_BG_CIRCLE}),this.background.setWorldSize(69,69)},t.createBgSmall=function(){this.backgroundSmall=this.scene.make.image({x:this.x,y:this.y,key:md,frame:gd.ITEM_BG_CIRCLE_SMALL}),this.backgroundSmall.setWorldSize(53,53)},t.createGraphicsProgress=function(){this.graphicProgress=this.scene.add.graphics(),this.graphicProgress.fillStyle(16776960,1)},t.updatePercent=function(e){var t=this;this.scene.tweens.addCounter({from:this.percent,to:e,ease:Phaser.Math.Easing.Sine.InOut,onUpdate:function(e){var n,i=360*e.getValue()/100-90;t.graphicProgress.clear(),We()(n=t.graphicProgress).call(n,t.x,t.y,30,Phaser.Math.DegToRad(i),Phaser.Math.DegToRad(-90),!0),t.graphicProgress.fillPath()},duration:200}),this.percent=e},t.restartProgress=function(){this.graphicProgress.closePath()},t.disableItem=function(){this.isDisable=!0,this.graphicProgress.fillStyle(16776960,.2),this.background.setAlpha(.2)},t.enableItem=function(){this.isDisable=!1,this.graphicProgress.fillStyle(16776960,1),this.background.setAlpha(1)},e}(),Ed=Fa.Z.GAMEPLAY,vd=Ed.KEY,Sd=Ed.FRAME,Ad=GameCore.Configs.Board,Td=Ad.cols,yd=Ad.rows,Id=GameCore.Configs.MagnetItem,Cd=Id.maxMagnetPerMatch,Od=Id.scoreForOnePercent,bd=GameCore.Configs.Gameplay.StartScoreCool,Rd=function(e){function t(t,n,i){var a;return(a=e.call(this,t,n,i)||this).scene=void 0,a.icon=void 0,a.magnetMoveIcon=void 0,a.mainItemMagnet=void 0,a.itemHighLight=[],a.targetScore=100*Od,a.glareSprite=void 0,a.tweenGlareSprite=void 0,a.isDisable=void 0,a.tweenToEnableMaxFps=void 0,a.totalScore=0,a.amountUsed=0,a.itemPercent=void 0,a.textAmount=void 0,a.bgAmount=void 0,a.animationMagnetItem=void 0,a.scene=t,a.init(),a}(0,o.Z)(t,e);var n=t.prototype;return n.init=function(){this.createItemPercent(),this.createIcon(),this.createMagnetMoveIcon(),this.createGlare(),this.createTweenGlare(),this.createAmountBg(),this.createAmountText(),this.createAnimationMagnetItem(),this.updateAmountUsed(this.amountUsed),this.listenEvents()},n.createItemPercent=function(){this.itemPercent=new fd(this.scene,this.x,this.y)},n.createIcon=function(){this.icon=this.scene.make.image({x:this.x,y:this.y,key:vd,frame:Sd.ITEM_MAGNET}),this.icon.setWorldSize(40,42)},n.createMagnetMoveIcon=function(){this.magnetMoveIcon=this.scene.make.image({x:this.x,y:this.y,key:vd,frame:Sd.ITEM_MAGNET}),this.magnetMoveIcon.setDepth(Oa.Z.ON_TOP),this.magnetMoveIcon.setWorldSize(40,42),this.magnetMoveIcon.setVisible(!1)},n.createGlare=function(){this.glareSprite=this.scene.make.sprite({x:this.x,y:this.y,key:vd,frame:Sd.GLARE_YELLOW_CIRCLE}),this.glareSprite.setVisible(!1).setScale(0)},n.createTweenGlare=function(){var e=this;this.tweenGlareSprite=this.scene.add.tween({targets:this.glareSprite,duration:300,scale:{from:0,to:1},ease:Phaser.Math.Easing.Sine.InOut,onComplete:function(){e.glareSprite.setVisible(!1).setScale(0)},paused:!0})},n.createAmountBg=function(){this.bgAmount=this.scene.make.image({x:this.x-23,y:this.y-26,key:vd,frame:Sd.BG_RED_CIRCLE}),this.bgAmount.setWorldSize(21,23)},n.createAmountText=function(){this.textAmount=this.scene.make.bitmapText({font:Wa.Z.PRIMARY.KEY,size:this.scene.fontSize(25),text:String(this.amountUsed)}),Phaser.Display.Align.In.Center(this.textAmount,this.bgAmount,-1.25,-2.5)},n.createAnimationMagnetItem=function(){this.animationMagnetItem=new dd(this.scene)},n.updateAmountUsed=function(e){this.amountUsed=e>=Cd?Cd:e,this.textAmount.setText(String(this.amountUsed)),0!==this.amountUsed?(this.icon.setAlpha(1),this.scene.updateMatchData()):this.icon.setAlpha(.5)},n.updateTotalScore=function(e){this.totalScore=e},n.updateTargetScore=function(e){this.targetScore=e},n.updatePercent=function(){var e=100*this.totalScore/this.targetScore;this.itemPercent.updatePercent(e)},n.listenEvents=function(){var e=this;this.tweenToEnableMaxFps=this.scene.add.tween({targets:[],duration:300,scale:{from:0,to:1},loop:-1,paused:!0}),this.on(Phaser.Input.Events.POINTER_DOWN,(function(){e.tweenToEnableMaxFps.play()})),this.on(Phaser.Input.Events.DRAG_START,(function(t){e.handleDragStart(t)})),this.on(Phaser.Input.Events.DRAG,(function(t){e.handleDrag(t)})),this.on(Phaser.Input.Events.DRAG_END,(function(){e.tweenToEnableMaxFps.stop(),e.handleDragEnd()}));var t=new Phaser.Geom.Circle(0,0,35);this.setInteractive(t,Phaser.Geom.Circle.Contains),this.scene.input.setDraggable(this)},n.handleDragStart=function(e){this.amountUsed<=0||(this.magnetMoveIcon.setVisible(!0),this.magnetMoveIcon.setPosition(e.worldX,e.worldY-100))},n.handleDrag=function(e){this.amountUsed<=0||(this.magnetMoveIcon.setVisible(!0),this.magnetMoveIcon.setPosition(e.worldX,e.worldY-100),this.handleCheckMagnet())},n.onCompleteMagnet=function(e){var t,n,i=this;if(this.mainItemMagnet)if(null==(t=this.mainItemMagnet)||t.dice.setAlpha(1),this.magnetMoveIcon.setVisible(!1),8!==(null==(n=this.mainItemMagnet)?void 0:n.value))if(this.scene.main.board.getMergeDice(this.mainItemMagnet).length>1)this.scene.events.emit(Pc,[this.mainItemMagnet],(function(){i.scene.updateMatchData()}),e);else{var a=this.scene.header.getPositionScoreByMode();this.scene.animDice.playAnimationStarToScore({pX:this.mainItemMagnet.pX,pY:this.mainItemMagnet.pY},{pX:a.x,pY:a.y},[],(function(){var t,n;i.scene.handleAddScore(e),i.scene.main.praise.handlePraise((null==(t=i.mainItemMagnet)?void 0:t.pX)||0,(null==(n=i.mainItemMagnet)?void 0:n.pY)||0,e)})),this.scene.updateMatchData()}else this.scene.main.board.handleMergeStarDiceToRubyDice(this.mainItemMagnet,{pX:this.mainItemMagnet.pX,pY:this.mainItemMagnet.pY},e,(function(){i.scene.updateMatchData()}))},n.handleDragEnd=function(){var e=this;if(!(this.amountUsed<=0)&&(this.magnetMoveIcon.setVisible(!1),this.updateItemHighLight(),this.mainItemMagnet)){var t=this.getAllItemsMagnet(),n=this.mainItemMagnet,i=n.pX,a=n.pY,s=n.value,r=n.dice;if(!t||t.length<=1)r.setAlpha(1);else{this.updateAmountUsed(this.amountUsed-1);for(var o=function(){var n=t[c];e.scene.animDice.playAnimationMoveTo(n.dice,{pX:i,pY:a},(function(){n.value=0,n.dice.setCustomValue(0),n.dice.setVisible(!1),r.setCustomValue(s+1),e.mainItemMagnet&&(e.mainItemMagnet.value=s+1)}))},c=0;c<t.length;c++)o();this.scene.animDice.playAnimationMerge(r,(function(){var n=(t.length+1)*s;e.onCompleteMagnet(n)}))}}},n.handleCheckMagnet=function(){var e=this.getMainItemMagnet();if(this.mainItemMagnet&&e&&e.x===this.mainItemMagnet.x&&e.y===this.mainItemMagnet.y||this.updateItemHighLight(),this.mainItemMagnet=e,this.mainItemMagnet){this.mainItemMagnet.dice.setAlpha(.8),this.saveItemHighLight(this.mainItemMagnet);var t=this.getAllItemsMagnet();if(t&&!(t.length<=1))for(var n=0;n<t.length;n++){var i=t[n].dice;this.saveItemHighLight(t[n]),i.playShaking()}}},n.saveItemHighLight=function(e){var t=e.x,n=e.y,i=this.itemHighLight.some((function(e){return t===e.x&&n===e.y}));i||this.itemHighLight.push(e)},n.updateItemHighLight=function(){this.itemHighLight.forEach((function(e){e.dice.setAlpha(1),e.dice.stopShaking()})),this.itemHighLight=[]},n.getMainItemMagnet=function(){for(var e=this.scene.main.board.dataBoard,t=0;t<yd;t++)for(var n=0;n<Td;n++){var i=e[t][n],a=i.dice;if(i.value&&a.getBounds().contains(this.magnetMoveIcon.x,this.magnetMoveIcon.y))return i}return null},n.getAllItemsMagnet=function(){if(!this.mainItemMagnet)return[];for(var e=this.scene.main.board.dataBoard,t=this.mainItemMagnet,n=t.value,i=t.x,a=t.y,s=[],r=0;r<yd;r++)for(var o=0;o<Td;o++){var c=e[r][o];n!==c.value||o===i&&r===a||s.push(c)}return s},n.playTweenGlare=function(){this.glareSprite.setVisible(!0).setScale(0),this.tweenGlareSprite.play()},n.playAnimationStarToMagnetItem=function(e,t,n){var i=this,a=function(){i.totalScore+=n;var e=100*i.totalScore/i.targetScore;e=e>360?360:e,i.itemPercent.updatePercent(e),i.totalScore>=i.targetScore&&i.scene.time.addEvent({delay:200,callback:function(){i.itemPercent.updatePercent(0);var e=Math.floor(i.totalScore/i.targetScore);i.amountUsed+=e,i.updateAmountUsed(i.amountUsed),i.totalScore-=i.targetScore*e,i.itemPercent.updatePercent(100*i.totalScore/i.targetScore),i.scene.updateMatchData()}}),i.scene.updateMatchData()};n<bd?a():(this.animationMagnetItem.playAnimation(e,t),this.animationMagnetItem.setOnComplete(a))},n.restartItemMagnet=function(){this.updateAmountUsed(0),this.totalScore=0,this.targetScore=100*Od,this.itemPercent.updatePercent(0)},n.disableItem=function(){this.isDisable=!0,this.setAlpha(.2),this.bgAmount.setAlpha(.2),this.textAmount.setAlpha(.2),this.icon.setAlpha(.2),this.itemPercent.disableItem()},n.enableItem=function(){this.isDisable=!1,this.setAlpha(1),this.bgAmount.setAlpha(1),this.textAmount.setAlpha(1),this.icon.setAlpha(1),this.itemPercent.enableItem()},t}(Phaser.GameObjects.Container),Dd=Fa.Z.GAMEPLAY,_d=Dd.KEY,wd=Dd.FRAME,Pd=Fa.Z.GAMEPLAY_32,xd=Pd.KEY,kd=Pd.FRAME,Md=function(){function e(e,t,n){this.scene=void 0,this.background=void 0,this.text=void 0,this.x=void 0,this.y=void 0,this.nextDiceItems=[],this.nextDiceValues=[],this.isDisable=void 0,this.scene=e,this.x=t,this.y=n,this.init()}var t=e.prototype;return t.init=function(){this.createText(),this.createBg(),this.createGlass(),this.initDiceFrames()},t.createBg=function(){this.background=this.scene.make.image({x:this.x,y:this.y,key:_d,frame:wd.BG_NEXT_PANEL}),this.background.setDisplaySize(75,45)},t.createGlass=function(){var e=this.scene.make.image({x:this.x,y:this.y,key:_d,frame:wd.GLASS});e.setDepth(2),e.setDisplaySize(75,45)},t.createText=function(){var e=this.scene.world.getPixelRatio();this.text=this.scene.make.image({key:_d,frame:wd.TEXT_NEXT_DICE});var t=this.text,n=t.width,i=t.height;this.text.setWorldSize(n/e,i/e),this.text.setPosition(this.x,this.y-i)},t.initDiceFrames=function(){for(var e=0;e<2;e++){var t=new Ql(this.scene,{x:0,y:0,width:30,height:30,texture:xd,frame:kd.DICE_1});t.setDepth(1),t.setVisible(!1),this.nextDiceItems.push(t)}},t.randomNextDice=function(){var e=this.scene.main.board.getMaxValueDice(),t=this.scene.main.board.getDiceSlot(),n=Phaser.Math.Between(1,t);if(e<=2)switch(n){case 1:this.nextDiceValues.push(Phaser.Math.Between(1,2));break;case 2:this.nextDiceValues.push(1),this.nextDiceValues.push(2)}else for(var i=0;i<n;i++){var a=this.randomValueExcludeNumbers(this.nextDiceValues);a<0||this.nextDiceValues.push(a)}},t.randomValueExcludeNumbers=function(e){var t=this.scene.main.board.getMaxValueDice(),n=Phaser.Math.Between(1,t);return-1!==Rt()(e).call(e,n)?this.randomValueExcludeNumbers(e):n},t.drawDiceFrames=function(){for(var e=this.nextDiceValues.length,t=0;t<e;t++){var n=this.nextDiceValues[t],i=this.nextDiceItems[t];i.setCustomValue(n),i.setVisible(!0);var a=this.getPositionByIndex(t);i.setPosition(a.x,a.y)}},t.hideDiceItems=function(){this.nextDiceItems.forEach((function(e){e.setVisible(!1)}))},t.getPositionByIndex=function(e){var t=[];switch(this.nextDiceValues.length){case 1:t=[{x:this.x,y:this.y}];break;case 2:t=[{x:this.x-15,y:this.y},{x:this.x+15,y:this.y}]}return t[e]},t.handleNextDice=function(){this.nextDiceValues=[],this.hideDiceItems(),this.randomNextDice(),this.drawDiceFrames()},t.restart=function(){this.nextDiceValues=[],this.hideDiceItems()},t.disableItem=function(){this.isDisable=!0,this.background.setAlpha(.2),this.text.setAlpha(.2),this.nextDiceItems.forEach((function(e){e.setAlpha(.2)}))},t.enableItem=function(){this.isDisable=!1,this.background.setAlpha(1),this.text.setAlpha(1),this.nextDiceItems.forEach((function(e){e.setAlpha(1)}))},e}(),Ld=n(466),Nd="tut-start",Gd="tutorial-drag-end",Bd="tutorial-tap-end",Fd=Fa.Z.GAMEPLAY,Ud=Fd.KEY,Hd=Fd.FRAME,Vd=Fa.Z.GAMEPLAY_32,Yd=Vd.KEY,Zd=Vd.FRAME,Wd=GameCore.Configs.Board,Kd=Wd.cols,zd=Wd.rows,Xd=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n.diceItems=[],n.direction=void 0,n.diceWidth=50,n.diceHeight=50,n.angleValue=void 0,n.tweenScaleUp=void 0,n.isScaleUp=void 0,n.isDragged=void 0,n.isShowing=void 0,n.dataDice=[],n.isRotating=!1,n.dataDiceRandom=[],n.tweenMoveBack=void 0,n.pointerDownX=0,n.pointerDownY=0,n.countDragTime=void 0,n.isDisable=void 0,n.amountDice=void 0,n.matrixData=[],n.diceContainer=void 0,n.pointerDownPosition=void 0,n.setDepth(Oa.Z.PIECE),t.add.existing((0,Ga.Z)(n)),n.scene=t,n.init(),n}(0,o.Z)(t,e);var n=t.prototype;return n.init=function(){this.createBackground(),this.initDiceItems(),this.createTweenScaleUp(),this.listenEvents()},n.initDiceItems=function(){this.diceContainer=this.scene.make.container({}),this.diceContainer.setDepth(Oa.Z.PIECE);for(var e=0;e<2;e++){var t=new Ql(this.scene,{x:0,y:0,width:this.diceWidth,height:this.diceHeight,texture:Yd,frame:Zd.DICE_1});t.setVisible(!1),this.diceContainer.add(t),this.diceItems.push(t)}},n.createBackground=function(){var e=this.scene.make.sprite({x:0,y:0,key:Ud,frame:Hd.BG_PIECE});e.setWorldSize(140,138),this.add(e),Phaser.Display.Align.In.Center(e,this)},n.getDataDice=function(){switch(this.amountDice=this.scene.footer.nextDice.nextDiceValues.length,this.amountDice){case 1:return this.getDataOneDice();case 2:return this.getDataTwoDice()}return[[1]]},n.getDataOneDice=function(){return this.direction="",[[this.scene.footer.nextDice.nextDiceValues[0]]]},n.getDataTwoDice=function(){this.randomDirection();var e=[],t=this.scene.footer.nextDice.nextDiceValues[0],n=this.scene.footer.nextDice.nextDiceValues[1];switch(this.direction){case"HORIZONTAL":this.angleValue=90,e.push(this.scene.footer.nextDice.nextDiceValues);break;case"VERTICAL":this.angleValue=0,e.push([t]),e.push([n])}return e},n.randomDirection=function(){var e=["HORIZONTAL","VERTICAL"];this.direction=e[Math.floor(Math.random()*e.length)]},n.getPosition=function(){var e=[{x:0,y:0}];switch(this.direction){case"HORIZONTAL":e=[{x:-this.diceWidth/2-2,y:0},{x:this.diceWidth/2+2,y:0}];break;case"VERTICAL":e=[{x:0,y:-this.diceWidth/2-2},{x:0,y:this.diceHeight/2+2}]}return e},n.hideDice=function(){this.diceContainer.setVisible(!1),this.diceItems.forEach((function(e){e.setVisible(!1)}))},n.showDice=function(e,t){var n=this;this.isShowing=!0,this.diceContainer.setVisible(!0),this.dataDice=[],this.matrixData=[];var i=0;if(e){if(this.dataDiceRandom=e,t)switch(this.amountDice=2,this.direction=t||"",this.direction){case"HORIZONTAL":this.angleValue=90;break;case"VERTICAL":this.angleValue=0}}else this.dataDiceRandom=this.getDataDice();for(var a=this.getPosition(),s=0;s<this.dataDiceRandom.length;s++){this.matrixData[s]=[];for(var r=0;r<this.dataDiceRandom[s].length;r++){var o=this.dataDiceRandom[s][r],c=this.diceItems[i],h=a[i].x,l=a[i].y;c.setPosition(0,0),c.setCustomValue(o),c.setVisible(!0),this.dataDice.push({x:r,y:s,value:o}),this.scene.animDice.playAnimationShow(c,{pX:h,pY:l}),this.matrixData[s][r]={x:r,y:s,value:o},i++}}this.scene.time.delayedCall(100,(function(){n.isShowing=!1}))},n.setContentPosition=function(e,t){this.setPosition(e,t),this.diceContainer.setPosition(e,t)},n.rotateDice=function(){var e=this;if(this.scene.audio.playSound(Ka.Z.DICE_SHUFFLE),this.dataDice=[],this.matrixData=[],!this.dataDiceRandom||this.dataDiceRandom.length<=0)this.isRotating=!1;else{for(var t=0;t<this.dataDiceRandom.length;t++){this.matrixData[t]=[];for(var n=function(){var n,a=e.dataDiceRandom[t][i];e.matrixData[t][i]={x:i,y:t,value:a};var s=ge()(n=e.diceItems).call(n,(function(e){return e.customValue===a}))[0];e.animationRotateDice(i,t,s),e.dataDice.push({x:i,y:t,value:a})},i=0;i<this.dataDiceRandom[t].length;i++)n()}this.scene.tutorialManager.isRunning()&&this.handleEventTutorialAfterTap()}},n.animationRotateDice=function(e,t,n){var i=this,a=-(this.dataDiceRandom[0].length-1)*this.diceWidth/2,s=-(this.dataDiceRandom.length-1)*this.diceHeight/2,r=a+e*this.diceWidth,o=s+t*this.diceHeight;this.scene.tweens.addCounter({from:0,to:90,ease:Phaser.Math.Easing.Back.Out,onUpdate:function(e){var t=Math.min(r,o)>=0?1:0,a=0;270!==i.angleValue&&0!==i.angleValue||(a=180);var s=i.angleValue-a+e.getValue()+180*t,c=Math.cos(s*Math.PI/180)*i.diceWidth/2,h=Math.sin(s*Math.PI/180)*i.diceHeight/2;n.setPosition(c,h)},duration:400,onComplete:function(){n.setPosition(r,o,i.diceWidth,i.diceHeight),i.isRotating=!1}})},n.createTweenScaleUp=function(){var e=this;this.tweenScaleUp=this.scene.add.tween({paused:!0,scale:1.2,targets:this.diceContainer,duration:300,onComplete:function(){e.diceContainer.setScale(1.2)}})},n.listenEvents=function(){var e=this;this.scene.input.dragTimeThreshold=30,this.on(Phaser.Input.Events.POINTER_DOWN,(function(t){e.handlePointerDown(t)})),this.on(Phaser.Input.Events.POINTER_UP,(function(t){e.handlePointerUp(t)})),this.on(Phaser.Input.Events.DRAG_START,(function(){})),this.on(Phaser.Input.Events.DRAG,(function(t){e.handleDrag(t)})),this.on(Phaser.Input.Events.DRAG_END,(function(){e.handleDragEnd()}));var t=new Phaser.Geom.Circle(0,0,70);this.setInteractive(t,Phaser.Geom.Circle.Contains),this.scene.input.setDraggable(this)},n.handlePointerDown=function(e){this.pointerDownPosition={x:e.x,y:e.y}},n.handlePointerUp=function(e){if((!this.scene.tutorialManager.isRunning()||this.scene.tutorialManager.isAlowTap())&&!this.isRotating&&!this.isShowing)if(this.isRotating=!0,!this.amountDice||this.amountDice<2)this.isRotating=!1;else if(this.isDragged)this.isRotating=!1;else if(this.angleValue+=90,360===this.angleValue&&(this.angleValue=0),!(this.dataDiceRandom.length<=1&&this.dataDiceRandom[0].length<=1)){this.pointerDownPosition=null;var t=[];switch(this.direction){case"HORIZONTAL":(t=[[],[]])[0][0]=this.dataDiceRandom[0][0],t[1][0]=this.dataDiceRandom[0][1],this.direction="VERTICAL";break;case"VERTICAL":(t=[[]])[0][0]=this.dataDiceRandom[1][0],t[0][1]=this.dataDiceRandom[0][0],this.direction="HORIZONTAL"}this.dataDiceRandom=t,this.rotateDice()}},n.handleDrag=function(e){var t;if(!this.scene.isGameScoreReached&&this.diceContainer.visible&&this.pointerDownPosition){var n=this.pointerDownPosition,i=n.x,a=n.y,s=e.x,r=e.y;if(!(Phaser.Math.Distance.Between(i,a,s,r)<10)){if(this.scene.game.updateFps(Ld.Z.max),this.scene.tutorialManager.isRunning()){if(!this.scene.tutorialManager.isAlowDrag())return;this.scene.tutorialManager.handFrame.setVisible(!1)}this.scene.events.emit(xc,!0),this.isScaleUp||(this.scene.audio.playSound(Ka.Z.DICE_PICKUP),this.diceContainer.setScale(1),this.tweenScaleUp.play(),this.isScaleUp=!0),null!=(t=this.tweenMoveBack)&&t.isPlaying()&&this.tweenMoveBack.stop();try{this.isDragged=!0;var o=this.checkOutOfThePage(e),c=o.lockX,h=o.lockY;if(c&&h)return;c?this.diceContainer.setY(e.worldY-100):h?this.diceContainer.setX(e.worldX):this.diceContainer.setPosition(e.worldX,e.worldY-100),this.scene.events.emit(kc),this.canMove();for(var l=this.getCellsHighlight(),u=0;u<l.length;u++)l[u].value=this.dataDice[u].value;this.sortCellHighlight(l),this.scene.events.emit(wc,l)}catch(d){}}}},n.checkOutOfThePage=function(e){var t=this.diceHeight,n=this.diceWidth;"VERTICAL"==this.direction&&(t*=2),"HORIZONTAL"==this.direction&&(n*=2);var i=this.scene.gameZone,a=i.width,s=i.height,r=e.worldX,o=e.worldY,c=!1,h=!1;return(r<n/2||r>a-n/2)&&(c=!0),(o+-100<t/2||o+-100>s)&&(h=!0),{lockX:c,lockY:h}},n.handleDragEnd=function(){var e=this;if(this.scene.events.emit(xc,!0),this.isScaleUp=!1,this.pointerDownX=0,this.pointerDownY=0,this.isDragged)try{this.canMove(),this.scene.audio.playSound(Ka.Z.DICE_DROP);for(var t=this.getCellsHighlight(),n=0,i=0,a=0;a<t.length;a++)t[a].value=this.dataDice[a].value;if(1===t.length&&(n=t[0].pX,i=t[0].pY),2===t.length){var s=Math.min(t[0].pX,t[1].pX),r=Math.min(t[0].pY,t[1].pY);n=s+Math.abs(t[0].pX-t[1].pX)/2,i=r+Math.abs(t[0].pY-t[1].pY)/2}this.sortCellHighlight(t),this.scene.add.tween({targets:this.diceContainer,x:n,y:i,duration:100,onComplete:function(){e.isDragged=!1,e.diceContainer.setScale(1),e.diceContainer.setVisible(!1),e.scene.events.emit(Pc,t,(function(){e.diceContainer.setPosition(e.x,e.y),e.scene.tutorialManager.isRunning()?e.handleEventTutorialAfterDragEnd():(e.hideDice(),e.showDice(),e.scene.footer.nextDice.handleNextDice(),e.scene.events.emit(Mc,e.amountDice,e.dataDiceRandom)),e.scene.updateMatchData()}))}})}catch(o){o instanceof Error&&"Invalid Move"===o.message&&this.handleInvalidMove()}},n.sortCellHighlight=function(e){pi()(e).call(e,(function(e,t){return e.value<t.value?-1:e.value>t.value?1:0}))},n.getPositionTopLeftInBoard=function(){for(var e,t=this.diceContainer.x-this.diceWidth/2*((null==(e=this.dataDiceRandom[0])?void 0:e.length)-1),n=this.diceContainer.y-this.diceHeight/2*(this.dataDiceRandom.length-1),i=-1,a=-1,s=this.scene.main.board.dataBoard,r=0;r<zd;r++)for(var o=0;o<Kd;o++)if(s[r][o].pX-this.diceWidth/2-5<=t&&s[r][o].pX+this.diceWidth/2+5>=t&&s[r][o].pY-this.diceHeight/2-5<=n&&s[r][o].pY+this.diceHeight/2+5>=n){i=o,a=r;break}return i<0||i>Kd-1||a<0||a>zd-1?null:{x:i,y:a}},n.getCellsHighlight=function(){var e=this.scene.main.board.dataBoard,t=[],n=this.getPositionTopLeftInBoard();if(null===n)return t;for(var i=0;i<this.matrixData.length;i++)for(var a=0;a<this.matrixData[i].length;a++)if(this.matrixData[i][a].value){var s=a+n.x,r=i+n.y,o=e[r]&&e[r][s]?e[r][s].pX:0,c=e[r]&&e[r][s]?e[r][s].pY:0;t.push({x:s,y:r,pX:o,pY:c,value:0})}return t},n.canMove=function(){var e=this.scene.main.board.dataBoard,t=this.getCellsHighlight();if(this.scene.tutorialManager.isRunning()){var n=this.scene.tutorialManager.getTargetPosition();if(0===t.length)throw new Error("Invalid Move");if(0===n.length)throw new Error("Invalid Move");for(var i=0;i<n.length;i++){var a=t[i];if(!t||n[i].x!==a.x||n[i].y!==a.y)throw new Error("Invalid Move")}return!1}for(var s=!0,r=0;r<t.length;r++){var o=t[r],c=o.x,h=o.y;if(!e[h]||!e[h][c]||0!==e[h][c].value){s=!1;break}}if(!s||0===t.length)throw new Error("Invalid Move");return s},n.restart=function(){this.direction="",this.amountDice=0,this.diceContainer.setVisible(!1),this.diceContainer.setPosition(this.x,this.y),this.hideDice()},n.handleInvalidMove=function(){var e=this;this.tweenMoveBack=this.scene.add.tween({targets:this.diceContainer,x:this.x,y:this.y,scale:1,duration:300,ease:Phaser.Math.Easing.Sine.InOut,onStop:function(){e.diceContainer.setScale(1),e.diceContainer.setPosition(e.x,e.y)},onComplete:function(){e.isDragged=!1,e.diceContainer.setScale(1),e.diceContainer.setPosition(e.x,e.y),e.scene.audio.playSound(Ka.Z.DICE_INVALID_MOVE)}})},n.handleEventTutorialAfterDragEnd=function(){this.scene.events.emit(Gd)},n.handleEventTutorialAfterTap=function(){this.scene.events.emit(Bd)},n.disableItem=function(){this.isDisable=!0,this.setAlpha(.2),this.diceContainer.setAlpha(.2)},n.enableItem=function(){this.isDisable=!1,this.setAlpha(1),this.diceContainer.setAlpha(1)},t}(Phaser.GameObjects.Container),jd=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n.pieces=void 0,n.itemMagnet=void 0,n.nextDice=void 0,n.pY=void 0,n.scene=t,n.setSize(n.scene.gameZone.width,60),t.add.existing((0,Ga.Z)(n)),n.init(),n}(0,o.Z)(t,e);var n=t.prototype;return n.init=function(){var e=this.scene.gameZone.height;this.pY=e-120,this.createItemMagnet(),this.createNextDice(),this.createPieces()},n.createPieces=function(){this.pieces=new Xd(this.scene),this.pieces.setContentPosition(this.scene.gameZone.width/2,this.pY)},n.createItemMagnet=function(){this.itemMagnet=new Rd(this.scene,61,this.pY-20)},n.createNextDice=function(){this.nextDice=new Md(this.scene,310,this.pY-20)},n.disableItems=function(){this.pieces.disableItem(),this.itemMagnet.disableItem(),this.nextDice.disableItem()},n.enableItems=function(){this.pieces.enableItem(),this.itemMagnet.enableItem(),this.nextDice.enableItem()},t}(Phaser.GameObjects.Container),Jd=jd,qd=Wl()(.3,-.6,.85,.07),Qd=Wl()(0,.7,.5,2),$d=Fa.Z.GAMEPLAY,ep=$d.KEY,tp=$d.FRAME,np=function(){function e(e){this.scene=void 0,this.imageStar=void 0,this.path=void 0,this.pathMoveToScore=void 0,this.curve=void 0,this.onComplete=void 0,this.glowImage=void 0,this.glowImageTween=void 0,this.glowBorder=void 0,this.glowBorderTween=void 0,this.particle=void 0,this.emitterBubble=void 0,this.emitterStar=void 0,this.starToScoreTween=void 0,this.emitterExploreScore=void 0,this.tweenEmitterExploreScore=void 0,this.glareCircle=void 0,this.glareCross=void 0,this.tweenExploreScore=void 0,this.tweenScaleGlareCross=void 0,this.animationMerge=void 0,this.particles=void 0,this.scene=e,this.init()}var t=e.prototype;return t.init=function(){this.createImageMoveToScore(),this.createGlowImage(),this.createGlowBorder(),this.createParticle(),this.createEmitter(),this.createPath(),this.createEmitterStar(),this.createTweenExploreScore(),this.createEmitterExploreScore()},t.createImageMoveToScore=function(){this.imageStar=this.scene.make.image({key:ep,frame:tp.STAR}),this.imageStar.setVisible(!1),this.imageStar.setScale(1.7)},t.createGlowImage=function(){this.glowImage=this.scene.make.image({key:ep,frame:tp.GLOW}),this.glowImage.setVisible(!1)},t.createGlowBorder=function(){this.glowBorder=this.scene.make.image({key:ep,frame:tp.GLOW_BORDER}),this.glowBorder.setVisible(!1)},t.createParticle=function(){this.particle=this.scene.add.particles(ep),this.particle.setDepth(Oa.Z.EFFECT)},t.createEmitter=function(){this.emitterBubble=this.particle.createEmitter({frame:[tp.CIRCLE_4,tp.CIRCLE_2,tp.CIRCLE_3],x:0,y:0,lifespan:2e3,speedY:{min:-50,max:-10},scale:{start:.7,end:0},alpha:{min:.1,max:.3},blendMode:"ADD",maxParticles:15,scaleX:{start:1,end:0,ease:Phaser.Math.Easing.Expo.Out},emitZone:{type:"edge",source:new Phaser.Geom.Rectangle(-25,-25,50,50),quantity:6,seamless:!0},on:!1})},t.createEmitterStar=function(){this.emitterStar=this.particle.createEmitter({name:"EmitterStar",x:0,y:0,frame:[tp.STAR,tp.CIRCLE_1,tp.CIRCLE_2],speed:{min:50,max:100},scale:{start:.7,end:0},follow:this.imageStar,on:!1,angle:{min:80,max:100},lifespan:{min:500,max:1e3}})},t.playAnimationShow=function(e,t){var n=e.scaleX,i=e.scaleY,a=t.pX,s=t.pY;e.setVisible(!0),e.setAlpha(0),this.scene.tweens.add({targets:e,x:{from:a+50,to:a},y:{from:s+100,to:s},alpha:{from:0,to:1},angle:{from:30,to:0},scaleX:{from:n-.5,to:n},scaleY:{from:i-.5,to:i},duration:600,ease:"Back.easeOut"})},t.createPath=function(){var e=this;this.pathMoveToScore={t:0,vec:new Phaser.Math.Vector2};var t=new Phaser.Math.Vector2(100,100),n=new Phaser.Math.Vector2(0,0),i=new Phaser.Math.Vector2(0,0);this.path={t:0,vec:new Phaser.Math.Vector2},this.curve=new Phaser.Curves.QuadraticBezier(t,n,i),this.starToScoreTween=this.scene.add.tween({paused:!0,targets:this.path,t:1,ease:"Sine.easeInOut",duration:1e3,onUpdate:function(){e.curve.getPoint(e.path.t,e.path.vec),e.imageStar.setPosition(e.path.vec.x,e.path.vec.y)},onComplete:function(){e.onComplete&&e.onComplete(),e.onComplete=null,e.playAnimationExploreScore(),e.emitterStar.stop(),e.imageStar.setVisible(!1)}})},t.createTweenExploreScore=function(){this.glareCircle=this.scene.make.image({key:ep,frame:tp.GLARE_CIRCLE}).setVisible(!1).setScale(0).setAlpha(0),this.glareCross=this.scene.make.image({key:ep,frame:tp.GLARE_CROSS}).setDepth(Oa.Z.EFFECT).setVisible(!1).setScale(0).setAlpha(0),this.tweenExploreScore=this.scene.add.tween({paused:!0,targets:[this.glareCircle],alpha:{from:0,to:1},scale:{from:1.5,to:2},ease:"Sine.easeInOut",duration:400,yoyo:!0}),this.tweenScaleGlareCross=this.scene.add.tween({paused:!0,targets:[this.glareCross],alpha:{from:.1,to:1},scale:{from:0,to:2},ease:"Back.easeInOut",duration:400,yoyo:!0})},t.createEmitterExploreScore=function(){var e=this;this.particles=this.scene.add.particles(ep),this.particles.setDepth(Oa.Z.EFFECT),this.emitterExploreScore=this.particles.createEmitter({frame:[tp.CIRCLE_1,tp.CIRCLE_2,tp.CIRCLE_3],speed:{min:50,max:120},x:0,y:0,on:!1,maxParticles:15,quantity:15,lifespan:2e4,delay:200}),this.tweenEmitterExploreScore=this.scene.tweens.add({targets:this.particles,scale:{from:0,to:1},duration:500,yoyo:!0,paused:!0,onComplete:function(){e.emitterExploreScore.killAll(),e.emitterExploreScore.stop()}})},t.playAnimationExploreScore=function(){this.glareCircle.setVisible(!0),this.glareCross.setVisible(!0),this.tweenExploreScore.play(),this.tweenScaleGlareCross.play(),this.emitterExploreScore.dead=[],this.emitterExploreScore.start(),this.tweenEmitterExploreScore.play()},t.playAnimationMoveTo=function(e,t,n){var i=this,a=t.pX,s=t.pY,r=e.x,o=e.y,c=e.scaleX,h=e.scaleY;this.scene.add.tween({x:a,y:s,scaleX:{from:c,to:c-.2},scaleY:{from:h,to:h-.2},ease:qd,targets:e,onComplete:function(){i.scene.audio.playSound(Ka.Z.DICE_MERGE),n&&n(),e.x=r,e.y=o,e.setScale(c,h)},duration:200})},t.playAnimationMerge=function(e,t){var n=this,i=e.scaleX,a=e.scaleY,s=e.depth,r=i,o=a;e.setDepth(Oa.Z.EFFECT),this.glowImage.setVisible(!0),this.glowImage.setDepth(Oa.Z.EFFECT),this.glowImage.setPosition(e.x,e.y),this.glowImage.setDisplaySize(3*e.displayWidth,3*e.displayHeight),this.glowBorder.setPosition(e.x,e.y),this.glowBorder.setDepth(Oa.Z.EFFECT),this.glowBorder.setDisplaySize(e.displayWidth,e.displayHeight),this.animationMerge=this.scene.add.tween({scaleX:{from:i,to:i-.1},scaleY:{from:a,to:a-.1},targets:[e,this.glowImage],onComplete:function(){n.scene.add.tween({scaleX:{from:i,to:i+.3},scaleY:{from:a,to:a+.3},targets:[e,n.glowImage],onUpdate:function(){e.angle-=.1},onComplete:function(){var i=e.angle,a=n.glowBorder,c=a.scaleX,h=a.scaleY;n.scene.add.tween({alpha:.3,targets:n.glowImage,onComplete:function(){n.glowImage.setVisible(!1),n.glowBorder.setVisible(!0),n.scene.add.tween({scaleX:{from:c,to:c+.3},scaleY:{from:h,to:h+.3},alpha:{from:1,to:.7},targets:n.glowBorder,onComplete:function(){n.glowBorder.setVisible(!1),e.setScale(r,o),t&&t()},duration:200}),n.playEmitterBubble(e)},duration:200}),n.scene.add.tween({scaleX:r,scaleY:o,angle:{from:i,to:0},ease:Qd,targets:e,duration:300,onComplete:function(){e.setDepth(s)}})},duration:200})},duration:200}),this.scene.add.tween({alpha:{from:0,to:1},targets:this.glowImage,duration:300})},t.playAnimationStarToScore=function(e,t,n,i){this.onComplete=i,this.emitterStar.setVisible(!0),this.emitterStar.start();var a=Math.abs(e.pX-t.pX);a=e.pX<=t.pX?t.pX-a:t.pX+a,this.glareCircle.setPosition(t.pX,t.pY),this.glareCross.setPosition(t.pX,t.pY),this.particles.setPosition(t.pX,t.pY),this.curve.p0=new Phaser.Math.Vector2(e.pX,e.pY),this.curve.p1=new Phaser.Math.Vector2(a,t.pY-250),this.curve.p2=new Phaser.Math.Vector2(t.pX,t.pY);var s=n&&n.length>1?3121622:16777215;this.imageStar.setVisible(!0),this.imageStar.setPosition(e.pX,e.pY),this.imageStar.setTint(s),this.imageStar.setScale(2),this.starToScoreTween.play(),this.emitterStar.setTint(s)},t.playEmitterBubble=function(e){this.emitterBubble.killAll(),this.emitterBubble.dead=[],this.emitterBubble.setPosition(e.x,e.y),this.emitterBubble.start()},t.stopAnimation=function(){var e,t,n,i;(this.imageStar.setVisible(!1),this.glowImage.setVisible(!1),this.glowBorder.setVisible(!1),null!=(e=this.starToScoreTween)&&e.isPlaying())&&(null==(n=this.starToScoreTween)||n.stop());null!=(t=this.animationMerge)&&t.isPlaying()&&(null==(i=this.animationMerge)||i.stop());this.emitterStar.setVisible(!1)},e}(),ip=Fa.Z.EFFECTS,ap=ip.KEY,sp=ip.FRAME,rp=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n.onComplete=void 0,n.background=void 0,n.outOfMoveText=void 0,n.tweenShow=void 0,n.tweenHide=void 0,n.scene=t,n.scene.add.existing((0,Ga.Z)(n)),n.init(),n}(0,o.Z)(t,e);var n=t.prototype;return n.init=function(){this.createBackground(),this.createOutOfMoveText(),this.createTweenShow(),this.createTweenHide(),this.addItemContainer()},n.createBackground=function(){this.background=this.scene.make.image({key:ap,frame:sp.BG_OUT_OF_MOVE});var e=this.scene.gameZone.width,t=e*this.background.height/this.background.width;this.background.setWorldSize(e,t)},n.createOutOfMoveText=function(){var e=this.scene.world.getPixelRatio();this.outOfMoveText=this.scene.make.image({key:ap,frame:sp.TEXT_OUT_OF_ROOM});var t=this.outOfMoveText,n=t.width,i=t.height;this.outOfMoveText.setWorldSize(n/e,i/e)},n.createTweenShow=function(){var e=this,t=this.scene.gameZone.height;this.tweenShow=this.scene.add.tween({targets:this,y:{from:t,to:t/2-45},alpha:{from:0,to:1},duration:500,paused:!0,onComplete:function(){e.tweenHide.play()}})},n.createTweenHide=function(){var e=this;this.tweenHide=this.scene.add.tween({delay:3e3,targets:this,alpha:{from:1,to:0},duration:500,paused:!0,onComplete:function(){e.onComplete&&e.onComplete(),e.onComplete=null}})},n.addItemContainer=function(){var e=this.scene.gameZone,t=e.width,n=e.height;this.setPosition(t/2,n/2),this.setVisible(!1).setAlpha(0),this.add([this.background,this.outOfMoveText]),this.setDepth(99),Phaser.Display.Align.In.Center(this.outOfMoveText,this.background,0,-3)},n.playAnimationShow=function(e){this.onComplete=e,this.setVisible(!0),this.tweenShow.play()},t}(Phaser.GameObjects.Container),op=n(125),cp=Fa.Z.DEFAULT,hp=cp.KEY,lp=cp.FRAME,up=function(e){function t(t){var n;return(n=e.call(this,t,hp,lp.BUTTON_GREEN)||this).icon=void 0,n.text=void 0,n.button.setWorldSize(252,52),n.setName("Continue"),n.createIcon(),n.createText(),n.alignIconAndText(),n}(0,o.Z)(t,e);var n=t.prototype;return n.createIcon=function(){this.icon=this.scene.make.image({key:hp,frame:lp.ICON_ADS}),this.icon.setWorldSize(30,28),this.add(this.icon)},n.createText=function(){var e=this.scene.world.getPixelRatio();this.text=this.scene.make.image({key:hp,frame:lp.TEXT_CONTINUE});var t=this.text,n=t.width,i=t.height;this.text.setWorldSize(n/e,i/e),this.add(this.text)},n.alignIconAndText=function(){var e=this.icon.width,t=this.text.width,n=e+t;Phaser.Display.Align.In.Center(this.icon,this,-n/2+e/2-5),Phaser.Display.Align.In.Center(this.text,this,n/2-t/2+5)},t}(Ba.Z),dp=Fa.Z.DEFAULT,pp=dp.KEY,mp=dp.FRAME,gp=GameCore.Configs,fp=gp.Match,Ep=(gp.Network,function(e){function t(t,n,i,a){var s;return(s=e.call(this,t,n,i,a)||this).isUseRescue=void 0,s.countdownCount=void 0,s.popup=void 0,s.skipText=void 0,s.continueButton=void 0,s.tweenContinueButton=void 0,s.continueButtonAnimation=void 0,s.textRescueTime=void 0,s.tweenTextRescueTime=void 0,s.progressCircle=void 0,s.skipTextTween=void 0,s.countdownTimer=void 0,s.bgProgress=void 0,s.popupShowUpAnimation=void 0,s.popupFadeInMaskAnimation=void 0,s.popupFadeOutMaskAnimation=void 0,s.adsTimer=void 0,s.open=function(){e.prototype.open.call((0,Ga.Z)(s)),s.runOpenAnimation()},s.close=function(){e.prototype.close.call((0,Ga.Z)(s)),s.scene.game.globalScene.requestBackgroundMaskUpdate(ba.o4.RESCUE_SCREEN,0),s.bgProgress.setVisible(!1),s.progressCircle.setVisible(!1),s.continueButton.setVisible(!1),s.skipText.setVisible(!1),s.textRescueTime.setScale(0).setAlpha(0)},s.handleShowRewardedVideoAd=(0,r.Z)(u().mark((function e(){var t,n,i,a,r;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=s.scene.game,n=t.globalScene,i=t.audio,a=t.lang,s.countdownTimer.remove(),e.prev=2,!s.isUseRescue){e.next=5;break}return e.abrupt("return");case 5:return s.scene.storage.dispatch((function(e,t){var n=t(),i=lr(n).level,a=void 0===i?0:i,s=Ds(n);window.game.analytics.event(Vt._.MATCH_RESCUE,{game_mode:GameCore.Utils.String.toUpperCamelCase(s),level:a,level_name:"level_"+a}),e({type:Rn,payload:{}})})),s.isUseRescue=!0,n.screen.open(ba.o4.NOTIFY_SCREEN,{message:a.Text.LOADING_AD,duration:0,loading:!0}),i.pauseMusic(),i.muteAll(),e.next=12,s.scene.ads.showRewardedVideoAsync();case 12:n.screen.events.off(GameCore.Screens.Events.CLOSE),fr.emit(es.RESCUE),s.scene.screen.close(s.name),s.scene.audio.playSound(Ka.Z.DAILY_REWARD),n.screen.close(ba.o4.NOTIFY_SCREEN),e.next=27;break;case 19:if(e.prev=19,e.t0=e.catch(2),!(e.t0 instanceof Object&&GameCore.Utils.Object.hasOwn(e.t0,"code"))){e.next=26;break}if("USER_INPUT"!==e.t0.code){e.next=26;break}return s.showNotifySkipAds(),e.abrupt("return");case 26:s.showNotifyNoAds();case 27:return e.prev=27,null==(r=s.adsTimer)||r.destroy(),i.unmuteAll(),i.playMusic(),s.scene.ads.preloadRewardedVideoAsync().catch(),e.finish(27);case 33:case"end":return e.stop()}}),e,null,[[2,19,27,33]])}))),s.showNotifyNoAds=function(e){if(!e||e.name===ba.o4.NOTIFY_SCREEN){var t=s.scene.game,n=t.globalScene,i=t.lang;n.screen.events.off(GameCore.Screens.Events.CLOSE),n.screen.events.once(GameCore.Screens.Events.CLOSE,s.showGameOver),n.screen.open(ba.o4.NOTIFY_SCREEN,{message:i.Text.NO_ADS_TO_DISPLAY,duration:2e3,loading:!1})}},s.showNotifySkipAds=function(){var e=s.scene.game,t=e.globalScene,n=e.lang;t.screen.events.off(GameCore.Screens.Events.CLOSE),t.screen.events.once(GameCore.Screens.Events.CLOSE,s.showGameOver),t.screen.open(ba.o4.NOTIFY_SCREEN,{message:n.Text.NO_REWARDS+"\n"+n.Text.CANCELLED_AD,duration:3e3,loading:!1})},s.showGameOver=function(e){e&&e.name!==ba.o4.NOTIFY_SCREEN||(s.countdownTimer.remove(),s.scene.screen.close(s.name),s.scene.screen.open(ba.o4.GAME_OVER_SCREEN))},s.handleSkip=function(){s.countdownTimer.remove(),s.scene.screen.close(s.name),s.scene.storage.dispatch(qo())},s.handleRunCountdown=function(){s.countdownCount-=1,s.countdownCount<=0?s.rescueTimeout():s.setTime(s.countdownCount)},s.countdownCount=fp.MaxRescueCount,s.setDepth(ba.Ks.POPUP),s.background.setAlpha(.5),s.createPopup(),s.createContent(),s}(0,o.Z)(t,e);var n=t.prototype;return n.runAnim=function(){this.tweenTextRescueTime.play(),this.skipText.setVisible(!0),this.skipTextTween.play(),this.tweenContinueButton.play()},n.updateInfo=function(){var e=this.scene.storage.getState(),t=lr(e);this.textRescueTime.setText(String(t.score||0))},n.setTime=function(e){this.textRescueTime.setText(""+e),Phaser.Display.Align.In.Center(this.textRescueTime,this.popup,0,-68)},n.createPopup=function(){this.popup=new Za(this.scene,0,-27,305,295,{forceHeightTop:48}),this.popup.setTitle(mp.TEXT_SECOND_CHANCE),this.popup.hideButtonClose(),this.add(this.popup)},n.createContent=function(){this.createTextRescueTime(),this.createBgProgressCircle(),this.createProgressCircle(),this.createContinueButton(),this.createSkipText()},n.createTextRescueTime=function(){this.textRescueTime=this.scene.make.bitmapText({font:Wa.Z.NUMBER_DARK.KEY,size:this.scene.fontSize(70),origin:{x:.5,y:.5}}),this.textRescueTime.setOrigin(.5).setScale(0).setAlpha(0),this.add(this.textRescueTime),this.tweenTextRescueTime=this.scene.tweens.add({delay:100,targets:this.textRescueTime,paused:!0,duration:200,scale:{from:0,to:1},alpha:{from:0,to:1},ease:"Power1"})},n.createProgressCircle=function(){this.progressCircle=this.scene.add.graphics(),this.add(this.progressCircle)},n.setProgressCircle=function(e){var t=Phaser.Math.DegToRad(-90),n=Phaser.Math.DegToRad(e-360-90);this.progressCircle.clear(),this.progressCircle.beginPath(),this.progressCircle.lineStyle(7,16762368),this.progressCircle.arc(0,-57.5,53.5,t,n,!0,.02),this.progressCircle.strokePath(),this.progressCircle.closePath()},n.runCountdown=function(){this.startProgressCircle();var e={delay:1e3,loop:!0,callback:this.handleRunCountdown};this.countdownTimer=this.scene.time.addEvent(e)},n.startProgressCircle=function(){var e=this;this.scene.tweens.addCounter({from:360,to:0,duration:1e3*fp.RescueGamePopupTimeout,onUpdate:function(t){var n=+t.getValue().toFixed(2);e.setProgressCircle(n)},onComplete:function(){e.setProgressCircle(360),e.progressCircle.setAlpha(1)}})},n.createBgProgressCircle=function(){this.bgProgress=this.scene.make.image({key:pp,frame:mp.BG_PROGRESS_CIRCLE}),this.bgProgress.setWorldSize(115,115),this.popup.add(this.bgProgress),Phaser.Display.Align.In.Center(this.bgProgress,this.popup,0,-30)},n.rescueTimeout=function(){this.countdownTimer.remove(),this.scene.screen.close(this.name),this.scene.storage.dispatch(qo())},n.createContinueButton=function(){this.continueButton=new up(this.scene),this.continueButton.onClick=this.handleShowRewardedVideoAd,this.continueButton.setScale(0).setAlpha(0),this.add(this.continueButton),Phaser.Display.Align.In.Center(this.continueButton,this.popup,0,75),this.tweenContinueButton=this.scene.tweens.add({paused:!0,targets:this.continueButton,ease:op.Z,props:{alpha:{from:0,to:1},scale:{from:1.2,to:1}},delay:300,duration:300})},n.createSkipText=function(){var e=this.scene.world.getPixelRatio(),t=this.scene.make.image({key:pp,frame:mp.NO_THANK_TEXT});t.setVisible(!1);var n=t.width,i=t.height;this.skipText=new Ba.Z(this.scene,pp,mp.NO_THANK_TEXT,n/e,i/e),this.skipText.setName("NoThanks"),this.add(this.skipText),this.skipText.onClick=this.handleSkip,Phaser.Display.Align.In.BottomCenter(this.skipText,this.continueButton,0,57),this.skipText.setVisible(!1).setAlpha(0),this.skipTextTween=this.scene.tweens.add({targets:this.skipText,delay:1e3,paused:!0,alpha:{from:0,to:1},ease:"Power1",duration:500})},n.runOpenAnimation=function(){var e;null!=(e=this.popupShowUpAnimation)&&null!=(e=e.tween)&&e.isPlaying()||(this.scene.audio.playSound(Ka.Z.POPUP_SHOW),this.runPopupEntrancesAnimation(0,300),this.runFadeInMaskAnimation(100,300))},n.runPopupEntrancesAnimation=function(e,t){var n=this;if(!this.popupShowUpAnimation){var i=this.popup.scale;this.popupShowUpAnimation=new Na({targets:[this.popup],delay:e,duration:t,props:{y:0,alpha:{start:1,from:1,to:1},scale:{start:0,from:0,to:i}},onComplete:function(){n.bgProgress.setVisible(!0),n.progressCircle.setVisible(!0),n.continueButton.setVisible(!0),n.skipText.setVisible(!0),n.runAnim(),n.updateInfo(),n.isUseRescue=!1,n.countdownCount=fp.RescueGamePopupTimeout,n.setTime(n.countdownCount),n.runCountdown()}})}this.popupShowUpAnimation.play()},n.runFadeInMaskAnimation=function(e,t){var n=this;if(!this.popupFadeInMaskAnimation){var i=this.background.alpha;this.popupFadeInMaskAnimation=new wa.Z({targets:[this.background],delay:e,duration:t,props:{alpha:{start:0,from:0,to:i}},onUpdate:function(){n.scene.game.globalScene.requestBackgroundMaskUpdate(ba.o4.RESCUE_SCREEN,n.background.alpha)}})}this.popupFadeInMaskAnimation.play()},n.runFadeOutMaskAnimation=function(e,t){if(!this.popupFadeOutMaskAnimation){var n=this.background.alpha;this.popupFadeOutMaskAnimation=new Pa.Z({targets:[this.background],delay:e,duration:t,props:{alpha:{start:n,from:n,to:0}}})}this.popupFadeOutMaskAnimation.play()},t}(GameCore.Screen)),vp=Ep,Sp={STATUS:{READY:"ready",RUNNING:"running",STOPPED:"stopped"}},Ap={STATUS:{READY:"ready",RUNNING:"running",STOPPED:"stopped"}}.STATUS,Tp=function(){function e(e){this.state=void 0,this.scene=void 0,this.scene=e}var t=e.prototype;return t.init=function(){this.setState(Ap.READY)},t.start=function(){this.isRunning()||this.setState(Ap.RUNNING)},t.stop=function(){this.isRunning()&&this.setState(Ap.STOPPED)},t.setState=function(e){this.state=e},t.isReady=function(){return this.state===Ap.READY},t.isRunning=function(){return this.state===Ap.RUNNING},t.isStopped=function(){return this.state===Ap.STOPPED},e}(),yp=Tp,Ip=Fa.Z.TUTORIAL,Cp=Ip.KEY,Op=Ip.FRAME,bp=function(e){function t(t,n,i){var a;return(a=e.call(this,t)||this).scene=void 0,a.bgTop=void 0,a.bgMiddle=void 0,a.bgBottom=void 0,a.scene=t,a.setSize(n,i),a.init(),a.scene.add.existing((0,Ga.Z)(a)),a}(0,o.Z)(t,e);var n=t.prototype;return n.init=function(){this.createBg(),this.updatePopupSize(),this.alignPopupImages()},n.createBg=function(){this.bgTop=this.scene.add.image(0,0,Cp,Op.BG_TOP),this.bgMiddle=this.scene.add.image(0,0,Cp,Op.BG_MIDDLE),this.bgBottom=this.scene.add.image(0,0,Cp,Op.BG_BOTTOM),this.add([this.bgTop,this.bgMiddle,this.bgBottom])},n.updatePopupSize=function(){var e=this.width*this.bgTop.height/this.bgTop.width;this.bgTop.setWorldSize(this.width,e-1),this.bgBottom.setWorldSize(this.width,this.width*this.bgBottom.height/this.bgBottom.width),this.bgMiddle.setWorldSize(this.width,this.height-this.bgTop.displayHeight-this.bgBottom.displayHeight)},n.alignPopupImages=function(){Phaser.Display.Align.In.Center(this.bgTop,this,0,-this.bgMiddle.displayHeight/2-this.bgTop.displayHeight/2),Phaser.Display.Align.In.Center(this.bgMiddle,this),Phaser.Display.Align.In.Center(this.bgBottom,this,0,this.bgMiddle.displayHeight/2+this.bgBottom.displayHeight/2)},t}(Phaser.GameObjects.Container),Rp=Fa.Z.TUTORIAL,Dp=Rp.KEY,_p=Rp.FRAME,wp=function(e){function t(t,n,i){var a;return(a=e.call(this,t,n,i)||this).scene=void 0,a.text=void 0,a.scene=t,a.createTextMessage(),a}return(0,o.Z)(t,e),t.prototype.createTextMessage=function(){var e=this.scene.world.getPixelRatio();this.text=this.scene.add.image(0,0,Dp,_p.M_STEP_1);var t=this.text,n=t.width,i=t.height;this.text.setWorldSize(n/e,i/e),this.add([this.text])},t}(bp),Pp=Fa.Z.TUTORIAL,xp=Pp.KEY,kp=Pp.FRAME,Mp=function(e){function t(t,n,i){var a;return(a=e.call(this,t,n,i)||this).scene=void 0,a.text=void 0,a.scene=t,a.createTextMessage(),a}return(0,o.Z)(t,e),t.prototype.createTextMessage=function(){var e=this.scene.world.getPixelRatio();this.text=this.scene.add.image(0,0,xp,kp.M_STEP_2);var t=this.text,n=t.width,i=t.height;this.text.setWorldSize(n/e,i/e),this.add([this.text])},t}(bp),Lp=Fa.Z.TUTORIAL,Np=(Lp.KEY,Lp.FRAME,function(){function e(e){this.scene=void 0,this.manager=void 0,this.tweenScaleDownMessFrame1=void 0,this.messFrame1=void 0,this.messFrame2=void 0,this.tweenScaleUpMessFrame2=void 0,this.tweenScaleDownMessFrame2=void 0,this.tweenHand=void 0,this.targetPosition=[{x:2,y:3}],this.scene=e.scene,this.manager=e}var t=e.prototype;return t.handleDragEnd=function(){var e=this;this.tweenScaleDownMessFrame1.play(),this.messFrame2.setVisible(!0),this.tweenScaleUpMessFrame2.play();var t=this.scene.gameZone.height;this.manager.createMask([{x:155,y:t/2-25,width:65,height:65,radius:6},{x:120,y:t-120-70,width:135,height:135,radius:70}]),this.scene.input.on(Phaser.Input.Events.POINTER_DOWN,(function(){e.tweenScaleDownMessFrame2.play(),e.scene.input.off(Phaser.Input.Events.POINTER_DOWN)}))},t.start=function(){this.initBoardData(),this.createMessage1(),this.createMessage2(),this.createMask(),this.createTweenHand(),this.manager.inputType="DRAG",this.scene.footer.pieces.showDice([[1]])},t.initBoardData=function(){for(var e=[{x:2,y:1,value:1},{x:2,y:2,value:1}],t=0;t<e.length;t++){var n=e[t],i=n.x,a=n.y,s=n.value,r=this.scene.main.board.dataBoard[a][i],o=r.dice;r.value=s,o.setCustomValue(s),o.setVisible(!0)}this.setDepthTargetDice()},t.setDepthTargetDice=function(){for(var e=0;e<this.targetPosition.length;e++){var t=this.targetPosition[e],n=t.x,i=t.y;this.scene.main.board.dataBoard[i][n].dice.setDepth(Oa.Z.DICE)}},t.createMessage1=function(){var e=this,t=this.scene.gameZone.width;this.messFrame1=new wp(this.scene,244,86),this.messFrame1.setPosition(t/2,70),this.messFrame1.setDepth(9999999),this.scene.add.tween({targets:this.messFrame1,y:{from:-50,to:70},alpha:{from:0,to:1},duration:300}),this.tweenScaleDownMessFrame1=this.scene.add.tween({paused:!0,targets:this.messFrame1,scale:{from:this.messFrame1.scale,to:0},alpha:{from:1,to:0},duration:300,onComplete:function(){e.messFrame1.setVisible(!1)}})},t.createMessage2=function(){var e=this,t=this.scene.gameZone.width;this.messFrame2=new Mp(this.scene,244,153),this.messFrame2.setPosition(t/2,230),this.messFrame2.setDepth(9999999);var n=this.messFrame2.scale;this.messFrame2.setAlpha(0).setScale(0).setVisible(!1),this.tweenScaleUpMessFrame2=this.scene.add.tween({delay:200,paused:!0,targets:this.messFrame2,scale:{from:0,to:n},alpha:{from:0,to:1},duration:300}),this.tweenScaleDownMessFrame2=this.scene.add.tween({paused:!0,targets:this.messFrame2,scale:{from:n,to:0},alpha:{from:1,to:0},duration:300,onComplete:function(){e.messFrame2.setVisible(!1),e.manager.handFrame.setVisible(!1),e.tweenHand.stop(),e.scene.tweens.killTweensOf([e.tweenHand]),e.manager.nextTutorial()}})},t.createMask=function(){var e=this.scene.gameZone.height;this.manager.createMask([{x:155,y:e/2-148,width:65,height:188,radius:6},{x:120,y:e-120-70,width:135,height:135,radius:70}])},t.createTweenHand=function(){var e=this.scene.gameZone.height,t=e-120+this.manager.handFrame.displayHeight/2;this.manager.handFrame.setVisible(!0),this.manager.handFrame.setPosition(200,t),this.tweenHand=this.scene.add.tween({repeatDelay:500,targets:this.manager.handFrame,repeat:-1,y:{from:t,to:e/2+20},duration:1500})},e}()),Gp=Np,Bp=Fa.Z.TUTORIAL,Fp=Bp.KEY,Up=Bp.FRAME,Hp=function(e){function t(t,n,i){var a;return(a=e.call(this,t,n,i)||this).scene=void 0,a.text=void 0,a.scene=t,a.createTextMessage(),a}return(0,o.Z)(t,e),t.prototype.createTextMessage=function(){var e=this.scene.world.getPixelRatio();this.text=this.scene.add.image(0,0,Fp,Up.M_STEP_3);var t=this.text,n=t.width,i=t.height;this.text.setWorldSize(n/e,i/e),this.add([this.text])},t}(bp),Vp=Fa.Z.TUTORIAL,Yp=Vp.KEY,Zp=Vp.FRAME,Wp=function(e){function t(t,n,i){var a;return(a=e.call(this,t,n,i)||this).scene=void 0,a.text=void 0,a.scene=t,a.createTextMessage(),a}return(0,o.Z)(t,e),t.prototype.createTextMessage=function(){var e=this.scene.world.getPixelRatio();this.text=this.scene.add.image(0,0,Yp,Zp.M_STEP_4);var t=this.text,n=t.width,i=t.height;this.text.setWorldSize(n/e,i/e),this.add([this.text])},t}(bp),Kp=Fa.Z.TUTORIAL,zp=Kp.KEY,Xp=Kp.FRAME,jp=function(e){function t(t,n,i){var a;return(a=e.call(this,t,n,i)||this).scene=void 0,a.text=void 0,a.scene=t,a.createTextMessage(),a}return(0,o.Z)(t,e),t.prototype.createTextMessage=function(){var e=this.scene.world.getPixelRatio();this.text=this.scene.add.image(0,0,zp,Xp.M_STEP_5);var t=this.text,n=t.width,i=t.height;this.text.setWorldSize(n/e,i/e),this.add([this.text])},t}(bp),Jp=Fa.Z.TUTORIAL,qp=Jp.KEY,Qp=Jp.FRAME,$p=function(e){function t(t,n,i){var a;return(a=e.call(this,t,n,i)||this).scene=void 0,a.text=void 0,a.scene=t,a.createTextMessage(),a}return(0,o.Z)(t,e),t.prototype.createTextMessage=function(){var e=this.scene.world.getPixelRatio();this.text=this.scene.add.image(0,0,qp,Qp.M_STEP_6);var t=this.text,n=t.width,i=t.height;this.text.setWorldSize(n/e,i/e),this.add([this.text])},t}(bp),em=Fa.Z.TUTORIAL,tm=(em.KEY,em.FRAME,function(){function e(e){var t=this;this.scene=void 0,this.manager=void 0,this.messFrame1=void 0,this.messFrame2=void 0,this.messFrame3=void 0,this.messFrame4=void 0,this.textTap=void 0,this.tweenScaleDownFrame1=void 0,this.tweenScaleUpFrame2=void 0,this.tweenScaleDownFrame2=void 0,this.tweenScaleUpFrame3=void 0,this.tweenScaleDownFrame3=void 0,this.tweenScaleUpFrame4=void 0,this.tweenTapHand=void 0,this.tweenMoveHand=void 0,this.tweenTapText=void 0,this.targetPosition=[{x:2,y:2},{x:2,y:3}],this.handleEndTutorial=(0,r.Z)(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.scene.storage.dispatch(Wo());case 2:fr.emit(es.REPLAY);case 3:case"end":return e.stop()}}),e)}))),this.scene=e.scene,this.manager=e}var t=e.prototype;return t.start=function(){this.initBoardData(),this.createMessage1(),this.createMessage2(),this.createMessage3(),this.createMessage4(),this.createMask(),this.createTweenTap()},t.initBoardData=function(){for(var e=[{x:0,y:2,value:1},{x:1,y:2,value:1},{x:3,y:3,value:2},{x:4,y:3,value:2}],t=0;t<e.length;t++){var n=e[t],i=n.x,a=n.y,s=n.value,r=this.scene.main.board.dataBoard[a][i],o=r.dice;r.value=s,o.setCustomValue(s),o.setVisible(!0)}this.setDepthTargetDice()},t.setDepthTargetDice=function(){for(var e=0;e<this.targetPosition.length;e++){var t=this.targetPosition[e],n=t.x,i=t.y;this.scene.main.board.dataBoard[i][n].dice.setDepth(Oa.Z.DICE)}},t.createMessage1=function(){var e=this,t=this.scene.gameZone.width;this.messFrame1=new Hp(this.scene,244,153),this.messFrame1.setPosition(t/2,300),this.messFrame1.setAlpha(0),this.messFrame1.setDepth(9999999),this.scene.add.tween({targets:this.messFrame1,scale:{from:0,to:this.messFrame1.scale},alpha:{from:0,to:1},duration:300,onComplete:function(){e.scene.input.on(Phaser.Input.Events.POINTER_DOWN,(function(){e.tweenScaleDownFrame1.play(),e.manager.inputType="TAP",e.scene.input.off(Phaser.Input.Events.POINTER_DOWN)}))}}),this.tweenScaleDownFrame1=this.scene.add.tween({paused:!0,targets:this.messFrame1,scale:{from:this.messFrame1.scale,to:0},alpha:{from:1,to:0},duration:300,onComplete:function(){e.textTap.setVisible(!0),e.manager.handFrame.setVisible(!0),e.scene.footer.pieces.showDice([[1,2]],"HORIZONTAL"),e.tweenScaleUpFrame2.play(),e.tweenTapText.play(),e.tweenTapHand.play()}})},t.createMessage2=function(){var e=this,t=this.scene.gameZone.width;this.messFrame2=new Wp(this.scene,244,85),this.messFrame2.setPosition(t/2,70),this.messFrame2.setAlpha(0),this.messFrame2.setDepth(9999999),this.tweenScaleUpFrame2=this.scene.add.tween({paused:!0,targets:this.messFrame2,scale:{from:0,to:this.messFrame2.scale},alpha:{from:0,to:1},duration:300}),this.tweenScaleDownFrame2=this.scene.add.tween({paused:!0,targets:this.messFrame2,scale:{from:this.messFrame2.scale,to:0},alpha:{from:1,to:0},duration:300,onComplete:function(){e.messFrame2.setVisible(!1),e.messFrame3.setVisible(!0),e.tweenScaleUpFrame3.play()}})},t.createMessage3=function(){var e=this,t=this.scene.gameZone.width;this.messFrame3=new jp(this.scene,244,87),this.messFrame3.setPosition(t/2,80),this.messFrame3.setAlpha(0).setScale(0).setVisible(!1);var n=this.messFrame3.scale;this.messFrame3.setDepth(9999999),this.tweenScaleUpFrame3=this.scene.add.tween({paused:!0,targets:this.messFrame3,scale:{from:0,to:n},alpha:{from:0,to:1},duration:300}),this.tweenScaleDownFrame3=this.scene.add.tween({paused:!0,targets:this.messFrame3,scale:{from:n,to:0},alpha:{from:1,to:0},duration:300,onComplete:function(){e.messFrame3.setVisible(!1),e.messFrame4.setVisible(!0),e.tweenScaleUpFrame4.play()}})},t.createMessage4=function(){var e=this,t=this.scene.gameZone.width;this.messFrame4=new $p(this.scene,244,152);var n=this.messFrame4.scale;this.messFrame4.setPosition(t/2,450),this.messFrame4.setAlpha(0).setScale(0).setVisible(!1),this.messFrame4.setDepth(9999999),this.tweenScaleUpFrame4=this.scene.add.tween({paused:!0,targets:this.messFrame4,scale:{from:0,to:n},alpha:{from:0,to:1},duration:300,onComplete:function(){e.scene.input.on(Phaser.Input.Events.POINTER_DOWN,(function(){e.scene.tutorialManager.stop(),e.messFrame4.setVisible(!1),e.scene.isTutorialRunning=!1,e.scene.input.off(Phaser.Input.Events.POINTER_DOWN),e.scene.analytics.event(Vt._.TUTORIAL_COMPLETE),e.handleEndTutorial()}))}})},t.createMask=function(){var e=this.scene.gameZone.height;this.manager.createMask([{x:32,y:e/2-88,width:136,height:68,radius:6},{x:157,y:e/2-88,width:60,height:128,radius:6},{x:207,y:e/2-28,width:136,height:68,radius:6},{x:120,y:e-120-70,width:135,height:135,radius:70}])},t.createTweenTap=function(){var e=this.scene.lang,t=this.scene.gameZone.height,n=t-120+this.manager.handFrame.displayHeight/2,i=this.scene.facebook.getLocale();this.textTap="ar"==i?this.scene.make.text({text:this.scene.lang.Text.ROTATE,style:{fontFamily:Wa.Z.FONT_FAMILY,fontSize:this.scene.fontSize(40)+"px"},origin:{x:.5,y:.5}}):this.scene.make.bitmapText({text:e.Text.ROTATE,font:Wa.Z.PRIMARY.KEY,size:this.scene.fontSize(40),origin:{x:.5,y:.5}}),this.textTap.setPosition(190,n-30),this.textTap.setDepth(99999),this.textTap.setVisible(!1),this.manager.handFrame.setVisible(!1),this.manager.handFrame.setPosition(200,n),this.tweenTapHand=this.scene.add.tween({delay:500,repeatDelay:500,targets:this.manager.handFrame,repeat:-1,y:{from:n,to:n-10},duration:500,paused:!0}),this.tweenMoveHand=this.scene.add.tween({repeatDelay:500,targets:this.manager.handFrame,repeat:-1,y:{from:n,to:t/2},duration:1500,paused:!0}),this.tweenTapText=this.scene.add.tween({delay:500,targets:this.textTap,yoyo:!0,repeat:-1,scale:{from:1,to:1.2},duration:500,paused:!0})},t.handleDragEnd=function(){this.tweenScaleDownFrame3.play();var e=this.scene.gameZone.height;this.manager.createMask([{x:155,y:e/2-90,width:65,height:68,radius:6},{x:120,y:e-120-70,width:135,height:135,radius:70}])},t.handleTabEnd=function(){this.textTap.setVisible(!1),this.tweenTapText.stop(),this.tweenTapHand.stop(),this.tweenMoveHand.play(),this.tweenScaleDownFrame2.play(),this.manager.inputType="DRAG"},e}()),nm=tm,im=n(459),am=Sp.STATUS,sm=Fa.Z.TUTORIAL,rm=sm.KEY,om=sm.FRAME,cm=GameCore.Configs.Tutorial,hm=im.Z.TUTORIAL_BG,lm=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n.currentStep=1,n.tutorialId=void 0,n.inputType=void 0,n.tutorialsDisplayed=[],n.handFrame=void 0,n.background=void 0,n.maskGraphics=void 0,n.stepOne=void 0,n.stepTwo=void 0,n.nextTutorial=function(){n.inputType="",n.scene.main.board.restart(),n.currentStep++,n.scene.events.emit(Nd),n.scene.analytics.event(Vt._.TUTORIAL_STEP,{step:n.currentStep})},n.handleEventDragEnd=function(){switch(n.currentStep){case 1:n.stepOne.handleDragEnd();break;case 2:n.stepTwo.handleDragEnd()}},n.handleEventTapEnd=function(){if(2===n.currentStep)n.stepTwo.handleTabEnd()},n.showTutorialWhenStart=function(){switch(n.currentStep){case 1:n.stepOne.start();break;case 2:n.stepTwo.start()}},n.scene=t,n.createBackground(),n.createHand(),n.initTutorialStep(),n}(0,o.Z)(t,e);var n=t.prototype;return n.initTutorialStep=function(){this.stepOne=new Gp(this),this.stepTwo=new nm(this)},n.start=function(){this.isRunning()||(this.setState(am.RUNNING),this.listenEvents(),this.scene.events.emit(Nd))},n.stop=function(){this.isRunning()&&(this.removeEvents(),this.scene.tweens.killTweensOf([this.background]),this.background.setVisible(!1),this.scene.game.globalScene.requestBackgroundMaskUpdate(hm,0),this.maskGraphics.setVisible(!1),this.setState(am.STOPPED))},n.displayCount=function(e){var t;return ge()(t=this.tutorialsDisplayed).call(t,(function(t){return t===e})).length},n.hasDisplayedEnough=function(e){if(!GameCore.Utils.Object.hasOwn(cm.NumberOfTutorial,e))return!0;var t=cm.NumberOfTutorial[e];return!GameCore.Utils.Valid.isNumber(t)||this.displayCount(e)>=t},n.isNothingToDisplay=function(){var e,t=this;return ge()(e=H()(cm.NumberOfTutorial)).call(e,(function(e){return!t.hasDisplayedEnough(e)})).length<1},n.listenEvents=function(){this.scene.events.on(Nd,this.showTutorialWhenStart),this.scene.events.on(Gd,this.handleEventDragEnd),this.scene.events.on(Bd,this.handleEventTapEnd)},n.removeEvents=function(){this.scene.events.off(Nd,this.showTutorialWhenStart),this.scene.events.off(Gd,this.handleEventDragEnd),this.scene.events.off(Bd,this.handleEventTapEnd)},n.createHand=function(){this.handFrame=this.scene.make.image({key:rm,frame:om.HAND,origin:{x:.5,y:.5}}),this.handFrame.setVisible(!1).setDepth(Oa.Z.ON_TOP),this.handFrame.setWorldSize(64,55)},n.createBackground=function(){this.background=this.scene.make.image({key:rm,frame:om.BLANK}),this.background.setInteractive({}),this.scene.input.setTopOnly(!1),this.background.setTint(0),this.background.setAlpha(0),this.background.setDepth(Oa.Z.BACKGROUND);var e=this.scene.gameZone,t=e.displayWidth+100,n=e.displayHeight+100;this.background.setDisplaySize(t,n),Phaser.Display.Align.In.Center(this.background,this.scene.gameZone)},n.isValidForTutorial=function(){return this.scene.game.player.getPlayerIsNew()},n.createMask=function(e){var t;if(e&&0!==e.length){null==(t=this.maskGraphics)||t.destroy(),this.maskGraphics=this.scene.make.graphics({fillStyle:{color:16711680,alpha:1}}),this.maskGraphics.setName("MaskGraphics");for(var n=0;n<e.length;n++){var i=e[n],a=i.x,s=i.y,r=i.width,o=i.height,c=i.radius;this.maskGraphics.fillRoundedRect(a,s,r,o,c)}this.background.revive(),this.background.clearMask(!0),this.background.setMask(this.maskGraphics.createGeometryMask()),this.background.mask.invertAlpha=!0,this.runShowMaskAnimation()}},n.isAlowDrag=function(){return"DRAG"===this.inputType},n.isAlowTap=function(){return"TAP"===this.inputType},n.getTargetPosition=function(){var e=[];switch(this.currentStep){case 1:e=this.stepOne.targetPosition;break;case 2:e=this.stepTwo.targetPosition}return e},n.runShowMaskAnimation=function(){var e=this,t=[this.background];this.background.setAlpha(0),this.scene.tweens.killTweensOf(t),this.scene.tweens.add({targets:t,duration:300,ease:Phaser.Math.Easing.Quadratic.Out,props:{alpha:{from:0,to:.8}},onUpdate:function(){e.scene.game.globalScene.requestBackgroundMaskUpdate(hm,e.background.alpha)}})},t}(yp),um=lm,dm=n(628),pm={JOIN:"join",INVITE:"invite",PLAY:"play"},mm=Fa.Z.DEFAULT,gm=mm.KEY,fm=mm.FRAME,Em=function(e){function t(t){var n;return(n=e.call(this,t,gm,fm.BUTTON_MINOR_BUTTON)||this).button.setWorldSize(61,54),n.setName("Home"),n.createIcon(),n}return(0,o.Z)(t,e),t.prototype.createIcon=function(){var e=this.scene.make.image({key:gm,frame:fm.ICON_FLAT_HOME});e.setWorldSize(36,33),this.add(e),Phaser.Display.Align.In.Center(e,this)},t}(Ba.Z),vm=Fa.Z.DEFAULT,Sm=vm.KEY,Am=vm.FRAME,Tm=function(e){function t(t){var n;return(n=e.call(this,t,Sm,Am.BUTTON_BLUE_MEDIUM)||this).icon=void 0,n.text=void 0,n.button.setWorldSize(121,55),n.setName("Restart"),n.createIcon(),n.createText(),n.alignIconAndText(),n}(0,o.Z)(t,e);var n=t.prototype;return n.createIcon=function(){this.icon=this.scene.make.image({key:Sm,frame:Am.ICON_RESTART}),this.icon.setWorldSize(24,23),this.add(this.icon)},n.createText=function(){var e=this.scene.world.getPixelRatio();this.text=this.scene.make.image({key:Sm,frame:Am.TEXT_RESTART});var t=this.text,n=t.width,i=t.height;this.text.setWorldSize(n/e,i/e),this.add(this.text)},n.alignIconAndText=function(){var e=this.icon.width,t=this.text.width,n=e+t;Phaser.Display.Align.In.Center(this.icon,this,-n/2+e/2-3),Phaser.Display.Align.In.Center(this.text,this,n/2-t/2+3)},t}(Ba.Z),ym=Fa.Z.DEFAULT,Im=ym.KEY,Cm=ym.FRAME,Om=function(e){function t(t){var n;return(n=e.call(this,t,Im,Cm.BUTTON_MINOR_BUTTON)||this).button.setWorldSize(61,54),n.setName("ButtonLeader"),n.createIcon(),n}return(0,o.Z)(t,e),t.prototype.createIcon=function(){var e=this.scene.make.image({key:Im,frame:Cm.ICON_CUP});e.setWorldSize(33,30),this.add(e),Phaser.Display.Align.In.Center(e,this)},t}(Ba.Z),bm=Fa.Z.DEFAULT,Rm=bm.KEY,Dm=bm.FRAME,_m=function(e){function t(t){var n;return(n=e.call(this,t)||this).popup=void 0,n.bgContent=void 0,n.avatarMe=void 0,n.textScoreMe=void 0,n.avatarOpponent=void 0,n.textScoreOpponent=void 0,n.titleFrame=void 0,n.contents=void 0,n.popupShowUpAnimation=void 0,n.contentShowUpAnimation=void 0,n.popupFadeOutAnimation=void 0,n.myInfoBlock=void 0,n.tweenMyInfoBlock=void 0,n.opponentInfoBlock=void 0,n.tweenOpponentInfoBlock=void 0,n.icon=void 0,n.tweenIcon=void 0,n.buttonRestart=void 0,n.buttonHome=void 0,n.buttonLeader=void 0,n.clickRestart=function(){n.runCloseAnimation(),n.popupFadeOutAnimation.next((0,r.Z)(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.scene.storage.dispatch(Zo());case 2:fr.emit(es.REPLAY),fr.emit(Bc);case 4:case"end":return e.stop()}}),e)}))))},n.clickLeader=function(){n.scene.screen.open(ba.o4.LEADER_BOARD_SCREEN)},n.handleClosePopup=function(){n.runCloseAnimation()},n.handleShareBestScore=function(){n.scene.storage.dispatch((0,r.Z)(u().mark((function e(){var t,n,a,s,r,o,c,h,l,d,p;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=window.game,n=t.player,a=t.analytics,s=t.facebook,r=t.globalScene,o=t.lang,e.prev=1,r.screen.open(ba.o4.NOTIFY_SCREEN,{message:o.Text.LOADING,loading:!0}),e.next=5,Ar();case 5:return c=e.sent,Sr(c),h=n.getPlayer(),l=h.playerId,d=h.name,p=h.photo,e.next=10,s.shareAsync({text:"Great! I have a best score!",intent:"SHARE",image:c||"",data:{playerId:l,playerName:d,playerPhoto:p,type:$i}});case 10:a.event(Vt._.SHARE,{share_content_type:"BestScore",success:!0}),e.next=17;break;case 13:e.prev=13,e.t0=e.catch(1),a.event(Vt._.SHARE,{share_content_type:"BestScore",success:!1}),(0,i.tO)(e.t0);case 17:return e.prev=17,r.screen.close(ba.o4.NOTIFY_SCREEN),e.finish(17);case 20:case"end":return e.stop()}}),e,null,[[1,13,17,20]])}))))},n.createPopup(),n.createBgContent(),n.createPopupContent(),n}(0,o.Z)(t,e);var n=t.prototype;return n.createPopup=function(){this.popup=new Za(this.scene,0,-99,310,333,{forceHeightTop:52}),this.popup.setOnClickButtonClose(this.clickClose.bind(this)),this.add(this.popup)},n.createBgContent=function(){this.bgContent=new ih(this.scene,0,0,256,166,{frameTop:Dm.POPUP_TOP_DARK,frameMiddle:Dm.POPUP_MIDDLE_DARK,frameBottom:Dm.POPUP_BOTTOM_DARK}),this.popup.add(this.bgContent),Phaser.Display.Align.In.Center(this.bgContent,this.popup,0,-27)},n.createPopupContent=function(){this.createMyInfoBlock(),this.createOpponentInfoBlock(),this.createIcon(),this.createButtons(),this.contents=this.scene.make.group({}),this.contents.addMultiple([this.buttonHome,this.buttonRestart,this.buttonLeader])},n.createButtons=function(){this.createButtonHome(),this.createButtonPlayWithFriend(),this.createButtonLeader()},n.createButtonHome=function(){this.buttonHome=new Em(this.scene),this.buttonHome.onClick=this.clickHome.bind(this),this.buttonHome.button.setWorldSize(60,55),this.popup.add(this.buttonHome),Phaser.Display.Align.In.Center(this.buttonHome,this.popup,-95,98)},n.clickClose=function(){var e=this;this.handleClosePopup(),this.popupFadeOutAnimation.next((0,r.Z)(u().mark((function t(){var n;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.scene.storage.dispatch,t.next=3,n(Zo());case 3:fr.emit(es.REPLAY),fr.emit(Fc);case 5:case"end":return t.stop()}}),t)}))))},n.clickHome=function(){var e=this;this.handleClosePopup(),this.popupFadeOutAnimation.next((0,r.Z)(u().mark((function t(){return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.scene.scene.switch(fa.C.DASHBOARD_SCENE),fr.emit(Bc);case 2:case"end":return t.stop()}}),t)}))))},n.createButtonPlayWithFriend=function(){this.buttonRestart=new Tm(this.scene),this.buttonRestart.onClick=this.clickRestart,this.popup.add(this.buttonRestart),Phaser.Display.Align.In.Center(this.buttonRestart,this.popup,0,98)},n.createButtonLeader=function(){this.buttonLeader=new Om(this.scene),this.buttonLeader.onClick=this.clickLeader,this.buttonLeader.button.setWorldSize(60,55),this.popup.add(this.buttonLeader),Phaser.Display.Align.In.Center(this.buttonLeader,this.popup,95,98)},n.createMyInfoBlock=function(){this.myInfoBlock=this.scene.add.container(),this.avatarMe=new jh(this.scene,{key:Rm,frame:Dm.AVATAR_BORDER,background:Dm.AVATAR_BACKGROUND,width:65,height:69,borderWidth:8}),this.myInfoBlock.add(this.avatarMe),Phaser.Display.Align.In.Center(this.avatarMe,this.myInfoBlock,5,-8);var e=this.scene.make.image({key:Rm,frame:Dm.BG_SCORE_BROWN_DARK});e.setWorldSize(103,36),this.myInfoBlock.add(e),Phaser.Display.Align.In.Center(e,this.avatarMe,3,58),this.textScoreMe=this.scene.make.bitmapText({font:Wa.Z.PRIMARY.KEY,size:this.scene.fontSize(34),text:"0",origin:{x:.5,y:.5}}),this.myInfoBlock.add(this.textScoreMe),Phaser.Display.Align.In.Center(this.textScoreMe,e,0,-2),this.popup.add(this.myInfoBlock),Phaser.Display.Align.In.Center(this.myInfoBlock,this.popup,-72,-38),this.myInfoBlock.setAlpha(0),this.tweenMyInfoBlock=this.scene.tweens.add({targets:this.myInfoBlock,paused:!0,duration:200,delay:400,scale:{from:1.5,to:1},alpha:{from:0,to:1},ease:Phaser.Math.Easing.Bounce.Out})},n.createOpponentInfoBlock=function(){this.opponentInfoBlock=this.scene.add.container(),this.avatarOpponent=new jh(this.scene,{key:Rm,frame:Dm.AVATAR_BORDER,background:Dm.AVATAR_BACKGROUND,width:65,height:69,borderWidth:8}),this.opponentInfoBlock.add(this.avatarOpponent),Phaser.Display.Align.In.Center(this.avatarOpponent,this.opponentInfoBlock,-7,-8);var e=this.scene.make.image({key:Rm,frame:Dm.BG_SCORE_BROWN_DARK});e.setWorldSize(103,36),this.opponentInfoBlock.add(e),Phaser.Display.Align.In.Center(e,this.avatarMe,-13,58),this.textScoreOpponent=this.scene.make.bitmapText({font:Wa.Z.PRIMARY.KEY,size:this.scene.fontSize(34),text:"0",origin:{x:.5,y:.5}}),this.opponentInfoBlock.add(this.textScoreOpponent),Phaser.Display.Align.In.Center(this.textScoreOpponent,e,0,-2),this.popup.add(this.opponentInfoBlock),Phaser.Display.Align.In.Center(this.opponentInfoBlock,this.popup,72,-38),this.opponentInfoBlock.setAlpha(0),this.tweenOpponentInfoBlock=this.scene.tweens.add({targets:this.opponentInfoBlock,paused:!0,duration:200,delay:500,scale:{from:1.5,to:1},alpha:{from:0,to:1},ease:Phaser.Math.Easing.Bounce.Out})},n.createIcon=function(){this.icon=this.scene.make.image({key:Rm,frame:Dm.ICON_BATTLE}),this.icon.setWorldSize(32,32);var e=this.icon.scale;this.popup.add(this.icon),Phaser.Display.Align.In.Center(this.icon,this.popup,0,-45),this.icon.setAlpha(0),this.tweenIcon=this.scene.tweens.add({targets:this.icon,paused:!0,duration:200,delay:300,scale:{from:1.5,to:e},alpha:{from:0,to:1},ease:"Power1"})},n.runCloseAnimation=function(){this.runPopupExitsAnimation(0,200)},n.runPopupExitsAnimation=function(e,t){var n,i=this;this.popupFadeOutAnimation||(this.popupFadeOutAnimation=new Pa.Z({targets:[this.popup],delay:e,duration:t,props:{scale:0},onComplete:function(){i.popup.setY(0)}})),null==(n=this.popupFadeOutAnimation)||n.play()},n.runOpenAnimation=function(){this.scene.audio.playSound(Ka.Z.POPUP_SHOW),this.runPopupEntrancesAnimation(0,300),this.runPopupContentEntrancesAnimation(200,300)},n.runPopupEntrancesAnimation=function(e,t){if(!this.popupShowUpAnimation){var n=this.popup,i=(n.y,n.scale);this.popupShowUpAnimation=new Na({targets:[this.popup],delay:e,duration:t,props:{y:0,alpha:{start:1,from:1,to:1},scale:{start:0,from:0,to:i}}})}this.popupShowUpAnimation.play()},n.runPopupContentEntrancesAnimation=function(e,t){this.contentShowUpAnimation||(this.contentShowUpAnimation=new xa.Z({targets:this.contents.getChildren(),duration:t,delay:this.scene.tweens.stagger(80,{start:e}),props:{alpha:{start:0,from:0,to:1}}})),this.contentShowUpAnimation.play()},n.updateInfo=function(){var e=this.scene.storage.getState(),t=hr(e),n=this.scene.player.getPlayer().playerId,i=tr(e).playerId,a=ir(e,{playerId:n}),s=ar(e,{opponentId:i}),r=(t[n]||{}).score,o=void 0===r?0:r,c=(t[i]||{}).score,h=void 0===c?0:c;return this.textScoreMe.setText(String(o)),this.textScoreOpponent.setText(String(h)),a&&s?o===h?(this.popup.setTitle(Dm.TEXT_WAITING_FOR_OPPONENT),void this.popup.setBgTop(Dm.POPUP_TOP)):o>h?(this.popup.setTitle(Dm.TEXT_YOU_WIN),void this.popup.setBgTop(Dm.POPUP_TOP_WIN)):o<h?(this.popup.setTitle(Dm.TEXT_YOU_LOSE),void this.popup.setBgTop(Dm.POPUP_TOP_LOSE)):void 0:(this.popup.setTitle(Dm.TEXT_WAITING_FOR_OPPONENT),void this.popup.setBgTop(Dm.POPUP_TOP))},n.loadAvatars=function(){var e=this.scene.storage.getState(),t=this.scene.player.getPlayer(),n=t.photo,i=t.playerId,a=tr(e),s=a.playerId,r=a.photo;this.avatarMe.loadPhoto(i,n,5),this.avatarOpponent.loadPhoto(s,r,5)},n.runAnim=function(){this.icon.setVisible(!0),this.myInfoBlock.setVisible(!0),this.opponentInfoBlock.setVisible(!0),this.tweenIcon.play(),this.tweenMyInfoBlock.play(),this.tweenOpponentInfoBlock.play()},t}(Phaser.GameObjects.Container),wm=_m,Pm=Fa.Z.DEFAULT,xm=Pm.KEY,km=Pm.FRAME,Mm=function(e){function t(t){var n;return(n=e.call(this,t)||this).popup=void 0,n.bgContent=void 0,n.contents=void 0,n.scoreText=void 0,n.bestScoreText=void 0,n.popupShowUpAnimation=void 0,n.contentShowUpAnimation=void 0,n.popupFadeOutAnimation=void 0,n.scoreBlock=void 0,n.bestScoreBlock=void 0,n.buttonRestart=void 0,n.buttonHome=void 0,n.payload=void 0,n.bestScore=void 0,n.currentScore=void 0,n.counterAnimation=void 0,n.scoreAnimation=void 0,n.leaders=void 0,n.clickHome=function(){n.runCloseAnimation(),n.popupFadeOutAnimation.next((function(){n.scene.scene.switch(fa.C.DASHBOARD_SCENE),fr.emit(Fc)}))},n.clickRestart=function(){n.runCloseAnimation(),n.popupFadeOutAnimation.next((0,r.Z)(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.scene.storage.dispatch(Wo());case 2:fr.emit(es.REPLAY),fr.emit(Fc);case 4:case"end":return e.stop()}}),e)}))))},n.clickLeader=function(){n.scene.screen.open(ba.o4.LEADER_BOARD_SCREEN)},n.initScore(),n.scene=t,n.createPopup(),n.createBgContent(),n.createPopupContent(),n.createScoreAnimation(),n}(0,o.Z)(t,e);var n=t.prototype;return n.createPopup=function(){this.popup=new Za(this.scene,0,-88,306,304,{forceHeightTop:52}),this.popup.setTitle(km.TEXT_YOUR_SCORE),this.setClickButtonClose(this.clickRestart),this.add(this.popup)},n.createBgContent=function(){this.bgContent=new ih(this.scene,0,0,254,120,{frameTop:km.POPUP_TOP_DARK,frameMiddle:km.POPUP_MIDDLE_DARK,frameBottom:km.POPUP_BOTTOM_DARK}),this.popup.add(this.bgContent),Phaser.Display.Align.In.Center(this.bgContent,this.popup,0,-34)},n.createPopupContent=function(){this.createScoreBlock(),this.createBestScoreBlock(),this.createButtons(),this.contents=this.scene.make.group({}),this.contents.addMultiple([this.buttonHome,this.buttonRestart])},n.setLeaders=function(e){this.leaders=e},n.createScoreBlock=function(){this.scoreBlock=this.scene.add.container();var e=this.scene.make.image({key:xm,frame:km.BG_BROWN_DARK});e.setWorldSize(176,41),this.scoreBlock.add(e),this.scoreText=this.scene.make.bitmapText({font:Wa.Z.PRIMARY.KEY,size:this.scene.fontSize(46),text:"0",origin:{x:.5,y:.5}}),this.scoreBlock.add(this.scoreText),Phaser.Display.Align.In.Center(this.scoreText,this.scoreBlock,0,-3),this.popup.add(this.scoreBlock),Phaser.Display.Align.In.Center(this.scoreBlock,this.bgContent,0,-24)},n.createBestScoreBlock=function(){this.bestScoreBlock=this.scene.add.container();var e=this.scene.make.image({key:xm,frame:km.BG_PURPLE_DARK});e.setWorldSize(176,41),this.bestScoreBlock.add(e),this.bestScoreText=this.scene.make.bitmapText({font:Wa.Z.NUMBER_YELLOW.KEY,size:this.scene.fontSize(45),text:"0",origin:{x:.5,y:.5}}),this.bestScoreBlock.add(this.bestScoreText),Phaser.Display.Align.In.Center(this.bestScoreText,this.bestScoreBlock,0,3);var t=this.scene.make.image({key:xm,frame:km.ICON_CROWN});t.setWorldSize(30,23),this.bestScoreBlock.add(t),Phaser.Display.Align.In.Center(t,this.bestScoreBlock,-54,-1),this.popup.add(this.bestScoreBlock),Phaser.Display.Align.In.Center(this.bestScoreBlock,this.bgContent,0,27)},n.createButtons=function(){this.createButtonHome(),this.createButtonRestart()},n.createButtonHome=function(){this.buttonHome=new Em(this.scene),this.buttonHome.onClick=this.clickHome,this.popup.add(this.buttonHome),Phaser.Display.Align.In.Center(this.buttonHome,this.bestScoreBlock,-80,79)},n.createButtonRestart=function(){this.buttonRestart=new Tm(this.scene),this.buttonRestart.onClick=this.clickRestart,this.popup.add(this.buttonRestart),Phaser.Display.Align.In.Center(this.buttonRestart,this.bestScoreBlock,51,79)},n.runCloseAnimation=function(){this.runPopupExitsAnimation(0,200)},n.runPopupExitsAnimation=function(e,t){var n,i=this;this.popupFadeOutAnimation||(this.popupFadeOutAnimation=new Pa.Z({targets:[this.popup],delay:e,duration:t,props:{scale:0},onComplete:function(){i.popup.setY(0)}})),null==(n=this.popupFadeOutAnimation)||n.play()},n.setBestScore=function(e){this.bestScoreText.setText(""+e)},n.runOpenAnimation=function(){this.scene.audio.playSound(Ka.Z.POPUP_SHOW),this.runPopupEntrancesAnimation(0,300),this.runPopupContentEntrancesAnimation(200,300)},n.runPopupEntrancesAnimation=function(e,t){if(!this.popupShowUpAnimation){var n=this.popup,i=(n.y,n.scale);this.popupShowUpAnimation=new Na({targets:[this.popup],delay:e,duration:t,props:{y:0,alpha:{start:1,from:1,to:1},scale:{start:0,from:0,to:i}}})}this.popupShowUpAnimation.play()},n.runPopupContentEntrancesAnimation=function(e,t){this.contentShowUpAnimation||(this.contentShowUpAnimation=new xa.Z({targets:this.contents.getChildren(),duration:t,delay:this.scene.tweens.stagger(80,{start:e}),props:{alpha:{start:0,from:0,to:1}}})),this.contentShowUpAnimation.play()},n.initScore=function(){var e=this.scene.player.getBestScore();this.bestScore=e,this.currentScore=0},n.updateScore=function(){var e=this.scene.storage.getState(),t=lr(e),n=t.score,i=t.bestScore;if(void 0===n&&void 0===i){var a=hr(e)[this.scene.player.getPlayerId()];n=(null==a?void 0:a.score)||0,i=this.scene.player.getBestScore()}this.bestScore=(i||0)<this.bestScore?this.bestScore:i||0,this.currentScore=n,this.updateData({bestScore:this.bestScore,currentScore:this.currentScore})},n.updateData=function(e){this.payload=e;var t=e.bestScore,n=e.currentScore;if(this.setBestScore(t),n<=t)return this.setCurrentScore(0),this.runScoreAnimation(),void(n>0?this.runScoreCounter():this.counterAnimation=null);this.runAnimation()},n.runAnimation=function(){this.runScoreCounter()},n.runScoreAnimation=function(){this.scoreAnimation.play()},n.createScoreAnimation=function(){this.scoreAnimation=new ac({targets:[this.scoreText],props:{scale:{from:1,to:1.3}}})},n.runScoreCounter=function(){var e,t=this,n=this.payload,i=n.bestScore,a=n.currentScore;null==(e=this.counterAnimation)||e.remove(),this.counterAnimation=this.scene.tweens.addCounter({from:0,to:a,delay:700,duration:2e3,completeDelay:300,onUpdate:function(e){var n=Math.floor(e.getValue());t.runScoreAnimation(),t.setCurrentScore(n)},onComplete:function(){t.setBestScore(i<a?a:i),t.setCurrentScore(a)}})},n.setCurrentScore=function(e){this.scoreText.setText(""+e)},n.setClickButtonClose=function(e){this.popup.setOnClickButtonClose(e)},t}(Phaser.GameObjects.Container),Lm=Mm,Nm=(GameCore.Configs.LeadersBoard,Fa.Z.DEFAULT),Gm=(Nm.KEY,Nm.FRAME),Bm=function(e){function t(t,n,i,a){var s;return(s=e.call(this,t,n,i,a)||this).scene=void 0,s.bestScore=void 0,s.confettiLeftEffect=void 0,s.confettiRightEffect=void 0,s.queueScreens=[],s.popupYourScore=void 0,s.popupResult=void 0,s.popupFadeInMaskAnimation=void 0,s.popupFadeOutMaskAnimation=void 0,s.open=function(){var t;e.prototype.open.call((0,Ga.Z)(s)),s.popupYourScore.setVisible(!1),s.runFadeInMaskAnimation(100,300),s.initScore(),s.updateScore();var n=s.scene.storage.getState(),i=Ds(n);s.showPopupBestScore(),i&&i!==aa&&Rt()(t=[ra,sa,oa]).call(t,i)>=0?s.showPopupResult():s.showPopupYourScore(),s.scene.audio.playSound(Ka.Z.GAME_OVER_SCENE)},s.onYourScoreClose=function(){s.popupYourScore.runCloseAnimation(),s.runFadeOutMaskAnimation(0,200),s.scene.time.delayedCall(300,(function(){s.close(),s.scene.storage.dispatch(Zo())}))},s.scene=t,s.createConfettiSmallAnimation(),s.createPopups(),s.listenEvents(),s.setDepth(ba.Ks.POPUP),s.background.setAlpha(.5),s}(0,o.Z)(t,e);var n=t.prototype;return n.close=function(){e.prototype.close.call(this),this.scene.game.globalScene.requestBackgroundMaskUpdate(ba.o4.GAME_OVER_SCREEN,0)},n.showQueueScreens=function(){var e=this.queueScreens.pop();if(e&&e===ba.o4.RESULT_SCREEN)this.showPopupResult()},n.showPopupBestScore=function(){var e=this.scene.storage.getState(),t=lr(e).score;t&&(t<=this.bestScore||this.scene.screen.open(ba.o4.BEST_SCORE_SCREEN,{bestScore:t}))},n.showPopupYourScore=function(){var e=this.scene.storage.getState();lr(e).score>this.bestScore||(this.popupYourScore.setVisible(!0),this.popupYourScore.runOpenAnimation(),this.popupYourScore.updateScore())},n.showPopupResult=function(){this.popupResult.setVisible(!0),this.popupResult.runOpenAnimation(),this.popupResult.updateInfo(),this.popupResult.loadAvatars(),this.popupResult.runAnim()},n.updateQueueScreens=function(){this.updateQueueResultScreen()},n.updateQueueResultScreen=function(){var e,t=this.scene.storage.getState(),n=Ds(t);if(-1!==Rt()(e=[sa,ra,oa]).call(e,n)&&$s(t)){var i=tr(t).playerId;n===ra&&i===ia.playerId||this.queueScreens.push(ba.o4.RESULT_SCREEN)}},n.createPopups=function(){this.createPopupYourScore(),this.createPopupResult()},n.listenEvents=function(){fr.on("result_screen_close",this.handleCloseResultScreen.bind(this)),fr.on(Bc,this.handleCloseScreen.bind(this)),fr.on(Fc,this.handleCloseScreen.bind(this)),fr.on(Gc,this.handleCloseBestScoreScreen.bind(this))},n.handleCloseResultScreen=function(){this.showPopupYourScore(),this.showPopupBestScore()},n.handleCloseScreen=function(){this.scene.screen.close(this.name)},n.handleCloseBestScoreScreen=function(){var e=this.scene.storage.getState(),t=lr(e).score;this.bestScore=t,this.showPopupYourScore()},n.createPopupYourScore=function(){this.popupYourScore=new Lm(this.scene),this.popupYourScore.setVisible(!1),this.popupYourScore.setClickButtonClose(this.onYourScoreClose),this.add(this.popupYourScore),Phaser.Display.Align.In.Center(this.popupYourScore,this)},n.createPopupResult=function(){this.popupResult=new wm(this.scene),this.popupResult.setVisible(!1),this.add(this.popupResult),Phaser.Display.Align.In.Center(this.popupResult,this)},n.createConfettiSmallAnimation=function(){this.confettiLeftEffect=new dm.Z(this.scene,{speedX:{min:-20,max:100},rotate:{start:-1080,end:0}}),this.confettiRightEffect=new dm.Z(this.scene,{speedX:{min:20,max:-100},rotate:{start:0,end:1080}}),this.confettiLeftEffect.setDepth(Oa.Z.ON_TOP),this.confettiRightEffect.setDepth(Oa.Z.ON_TOP)},n.updateLeaderBar=function(e){var t={playerId:this.scene.player.getPlayerId(),leaders:[]};for(var n in e){if(t.leaders.length>=3)break;var i=e[n],a=i.playerId,s=i.photo,r=i.score,o=i.rank,c=i.name;this.isLeadersHasItem(t.leaders,a)||t.leaders.push({playerId:a,photo:s,score:r,rank:o,name:c})}this.isLeadersHasItem(t.leaders,Gm.AVATAR_INVITE)||t.leaders.push({playerId:Gm.AVATAR_INVITE,photo:Gm.AVATAR_INVITE,rank:4,score:-1,name:"",type:pm.INVITE}),this.isLeadersHasItem(t.leaders,Gm.AVATAR_RANDOM)||t.leaders.push({playerId:Gm.AVATAR_RANDOM,photo:Gm.AVATAR_RANDOM,rank:4,score:-1,name:"",type:pm.JOIN})},n.isLeadersHasItem=function(e,t){if(!e||0===e.length)return!1;var n=ge()(e).call(e,(function(e){return e.playerId===t}));return n&&n.length>0},n.getLeadersExcludeIds=function(e){var t=this.scene.storage.getState(),n=Vh(t),i={};if(!e||0===e.length)return n;for(var a in n)if(Rt()(e).call(e,a)<0){var s=n[a],r=s.playerId,o=s.photo,c=s.score,h=s.rank,l=s.name;i[a]={playerId:r,photo:o,score:c,rank:h,name:l}}return i},n.initScore=function(){var e=this.scene.player.getBestScore();this.bestScore=e},n.updateScore=function(){var e=this.scene.storage.getState(),t=lr(e),n=t.score,i=t.bestScore;if(this.bestScore=i,void 0===n||void 0===i){var a=hr(e)[this.scene.player.getPlayerId()];n=(null==a?void 0:a.score)||0,i=this.scene.player.getBestScore()}this.bestScore=(i||0)<this.bestScore?this.bestScore:i||0},n.runFadeInMaskAnimation=function(e,t){var n=this;if(!this.popupFadeInMaskAnimation){var i=this.background.alpha;this.popupFadeInMaskAnimation=new wa.Z({targets:[this.background],delay:e,duration:t,props:{alpha:{start:0,from:0,to:i}},onUpdate:function(){n.scene.game.globalScene.requestBackgroundMaskUpdate(ba.o4.GAME_OVER_SCREEN,n.background.alpha)}})}this.popupFadeInMaskAnimation.play()},n.runFadeOutMaskAnimation=function(e,t){var n=this;if(!this.popupFadeOutMaskAnimation){var i=this.background.alpha;this.popupFadeOutMaskAnimation=new Pa.Z({targets:[this.background],delay:e,duration:t,props:{alpha:{start:i,from:i,to:0}},onUpdate:function(){n.scene.game.globalScene.requestBackgroundMaskUpdate(ba.o4.GAME_OVER_SCREEN,n.background.alpha)}})}this.popupFadeOutMaskAnimation.play()},t}(GameCore.Screen),Fm=Bm,Um=n(629),Hm=n(631),Vm=Fa.Z.DEFAULT,Ym=Vm.KEY,Zm=Vm.FRAME,Wm=function(e){function t(t,n,a,s){var r;return(r=e.call(this,t,n,a,s)||this).bestScoreText=void 0,r.scorePanel=void 0,r.popupShowUpAnimation=void 0,r.popupFadeOutAnimation=void 0,r.paperFireworksCelebration=void 0,r.starTwinkle=void 0,r.scene=void 0,r.open=function(t){e.prototype.open.call((0,Ga.Z)(r),t),GameSDK.showGameRating().catch(i.tO),r.setVisible(!0),r.runOpenAnimation(),r.paperFireworksCelebration.run(0,r.scene.gameZone.height,375,200),r.scene.audio.playSound(Ka.Z.CONGRATULATION),r.setBestScoreText(t.bestScore)},r.handleClosePopup=function(){r.runCloseAnimation(),r.popupFadeOutAnimation.next((function(){r.scene.screen.close(r.name)})),fr.emit(Gc)},r.setVisible(!1),r.scene=t,r.setDepth(ba.Ks.POPUP),r.createContent(),r.createConfetti(),r.createStarTwinkle(),r.background.setVisible(!1),r}(0,o.Z)(t,e);var n=t.prototype;return n.createConfetti=function(){this.paperFireworksCelebration=new Um.Z(this.scene),this.paperFireworksCelebration.setDepth(Oa.Z.ON_TOP)},n.createStarTwinkle=function(){this.starTwinkle=new Hm.Z(this.scene),this.add(this.starTwinkle)},n.createContent=function(){this.createCup(),this.createScorePanel(),this.createButtons()},n.createCup=function(){var e=this.scene.world.getPixelRatio(),t=this.scene.make.image({key:Ym,frame:Zm.ICON_CUP_BEST_SCORE}),n=t.width,i=t.height;t.setWorldSize(n/e,i/e),this.add(t),Phaser.Display.Align.In.Center(t,this,0,-107)},n.createScorePanel=function(){this.scorePanel=this.scene.add.container();var e=this.scene.make.image({key:Ym,frame:Zm.POPUP_SCORE_PANEL});e.setWorldSize(200,56),this.scorePanel.add(e),this.bestScoreText=this.scene.make.bitmapText({font:Wa.Z.NUMBER_YELLOW.KEY,size:this.scene.fontSize(85),origin:{x:.5,y:.5}}),this.bestScoreText.setText("0"),this.scorePanel.add(this.bestScoreText),this.add(this.scorePanel),Phaser.Display.Align.In.Center(e,this.scorePanel,0,0),Phaser.Display.Align.In.Center(this.bestScoreText,this.scorePanel,0,6.5),Phaser.Display.Align.In.Center(this.scorePanel,this,0,46.5)},n.createButtons=function(){this.createCloseButton()},n.createCloseButton=function(){var e=new Ba.Z(this.scene,Ym,Zm.BUTTON_CLOSE,0,0);e.button.setWorldSize(38,38),e.setName("Close"),this.add(e),e.onClick=this.handleClosePopup,Phaser.Display.Align.In.Center(e,this,137,-218)},n.setBestScoreText=function(e){this.bestScoreText.setText(""+e)},n.runCloseAnimation=function(){this.runPopupExitsAnimation(0,200)},n.runPopupExitsAnimation=function(e,t){var n,i=this;this.popupFadeOutAnimation||(this.popupFadeOutAnimation=new Pa.Z({targets:[this],delay:e,duration:t,props:{y:250,scale:0},onComplete:function(){i.setY(0)}})),null==(n=this.popupFadeOutAnimation)||n.play()},n.runOpenAnimation=function(){this.scene.audio.playSound(Ka.Z.POPUP_SHOW),this.runPopupEntrancesAnimation(0,300)},n.runPopupEntrancesAnimation=function(e,t){var n=this;if(!this.popupShowUpAnimation){var i=this.y,a=this.scale;this.popupShowUpAnimation=new Na({targets:[this],delay:e,duration:t,props:{y:{from:350,to:i},alpha:{start:1,from:1,to:1},scale:{start:0,from:0,to:a}},onComplete:function(){n.starTwinkle.run(1,0,-108,290,216)}})}this.popupShowUpAnimation.play()},t}(GameCore.Screen),Km=Wm,zm=Fa.Z.DEFAULT,Xm=zm.KEY,jm=zm.FRAME,Jm=function(e){function t(t){var n;return(n=e.call(this,t,Xm,jm.BUTTON_GREEN)||this).icon=void 0,n.text=void 0,n.button.setWorldSize(252,55),n.setName("Play Adventure"),n.createIcon(),n.createText(),n.alignIconAndText(),n}(0,o.Z)(t,e);var n=t.prototype;return n.createIcon=function(){this.icon=this.scene.make.image({key:Xm,frame:jm.ICON_CHALLENGE_BIG}),this.icon.setWorldSize(29,26),this.add(this.icon)},n.createText=function(){var e=this.scene.world.getPixelRatio();this.text=this.scene.make.image({key:Xm,frame:jm.TEXT_ADVENTURE});var t=this.text,n=t.width,i=t.height;this.text.setWorldSize(n/e,i/e),this.add(this.text),Phaser.Display.Align.In.Center(this.text,this,23)},n.alignIconAndText=function(){var e=this.icon.width,t=this.text.width,n=e+t;Phaser.Display.Align.In.Center(this.icon,this,-n/2+e/2-5),Phaser.Display.Align.In.Center(this.text,this,n/2-t/2+5)},t}(Ba.Z),qm=Fa.Z.DEFAULT,Qm=qm.KEY,$m=qm.FRAME,eg=function(e){function t(t){var n;return(n=e.call(this,t,Qm,$m.BUTTON_BLUE)||this).icon=void 0,n.text=void 0,n.button.setWorldSize(252,55),n.setName("Replay"),n.createIcon(),n.createText(),n.alignIconAndText(),n}(0,o.Z)(t,e);var n=t.prototype;return n.createIcon=function(){this.icon=this.scene.make.image({key:Qm,frame:$m.ICON_RESUME}),this.icon.setWorldSize(26,27),this.add(this.icon)},n.createText=function(){var e=this.scene.world.getPixelRatio();this.text=this.scene.make.image({key:Qm,frame:$m.TEXT_REPLAY});var t=this.text,n=t.width,i=t.height;this.text.setWorldSize(n/e,i/e),this.add(this.text)},n.alignIconAndText=function(){var e=this.icon.width,t=this.text.width,n=e+t;Phaser.Display.Align.In.Center(this.icon,this,-n/2+e/2-5),Phaser.Display.Align.In.Center(this.text,this,n/2-t/2+5)},t}(Ba.Z),tg=Fa.Z.DEFAULT,ng=tg.KEY,ig=tg.FRAME,ag=function(e){function t(t,n,i,a){var s;return(s=e.call(this,t,n,i,a)||this).popup=void 0,s.bgPopup=void 0,s.settingSoundContainer=void 0,s.settingVibrateContainer=void 0,s.settingSoundIcon=void 0,s.settingVibrateIcon=void 0,s.settingSound=void 0,s.settingVibrate=void 0,s.buttonReplay=void 0,s.buttonAdventure=void 0,s.buttonHome=void 0,s.contents=void 0,s.popupShowUpAnimation=void 0,s.popupFadeOutAnimation=void 0,s.contentShowUpAnimation=void 0,s.open=function(){e.prototype.open.call((0,Ga.Z)(s)),s.scene.game.globalScene.requestBackgroundMaskUpdate(ba.o4.SETTINGS_SCREEN,.6);var t=s.scene.player.getPlayerSettings(),n=t.sound,i=t.vibrate;s.settingSound.updateStatus(n),s.settingVibrate.updateStatus(i),s.updateVibrateButton(),s.runOpenAnimation()},s.handleClosePopup=function(){s.scene.audio.playSound(Ka.Z.POPUP_OFF,{volume:.6}),s.runCloseAnimation(),s.popupFadeOutAnimation.next((function(){s.scene.screen.close(s.name)}))},s.handleReplayGame=function(){s.runCloseAnimation(),s.popupFadeOutAnimation.next((0,r.Z)(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s.scene.screen.close(s.name),e.next=3,s.scene.storage.dispatch(Wo());case 3:fr.emit(es.REPLAY);case 4:case"end":return e.stop()}}),e)}))))},s.handlePlayAdventure=(0,r.Z)(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s.scene.screen.close(s.name),e.next=3,s.scene.storage.dispatch(jo());case 3:fr.emit(es.REPLAY);case 4:case"end":return e.stop()}}),e)}))),s.handleClickHome=function(){s.runCloseAnimation(),s.popupFadeOutAnimation.next((function(){setTimeout((function(){s.scene.screen.close(s.name),s.scene.scene.switch(fa.C.DASHBOARD_SCENE)}),100)}))},s.handleClickShare=function(){s.runCloseAnimation(),s.popupFadeOutAnimation.next((0,r.Z)(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:s.scene.screen.close(s.name),s.scene.storage.dispatch(Rr());case 2:case"end":return e.stop()}}),e)}))))},s.handleClickLeader=function(){s.runCloseAnimation(),s.popupFadeOutAnimation.next((0,r.Z)(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:s.scene.screen.close(s.name),s.scene.screen.open(ba.o4.LEADER_BOARD_SCREEN);case 2:case"end":return e.stop()}}),e)}))))},s.handleSoundSetting=function(e){s.scene.player.setSetting("sound",e),fr.emit(Lc)},s.handleVibrateSetting=function(e){s.scene.player.setSetting("vibrate",e)},s.createPopup(),s.createBgPopup(),s.createPopupContent(),s.createInput(),s.setDepth(ba.Ks.POPUP),s.background.setAlpha(.6),s}(0,o.Z)(t,e);var n=t.prototype;return n.updateVibrateButton=function(){Cl()?(this.settingVibrateContainer.revive(),Phaser.Display.Align.In.Center(this.settingSoundContainer,this.bgPopup,0,-31),Phaser.Display.Align.In.Center(this.settingVibrateContainer,this.bgPopup,0,26)):(this.settingVibrateContainer.kill(),Phaser.Display.Align.In.Center(this.settingSoundContainer,this.bgPopup,0,-6))},n.createInput=function(){this.buttonReplay.onClick=this.handleReplayGame,this.buttonAdventure.onClick=this.handlePlayAdventure,this.settingSound.onClick=this.handleSoundSetting,this.settingVibrate.onClick=this.handleVibrateSetting,this.buttonHome.onClick=this.handleClickHome},n.close=function(){e.prototype.close.call(this),this.scene.game.globalScene.requestBackgroundMaskUpdate(ba.o4.SETTINGS_SCREEN,0)},n.createPopup=function(){this.popup=new Za(this.scene,0,21,308,440,{forceHeightTop:50}),this.popup.setTitle(ig.TEXT_SETTING),this.popup.setOnClickButtonClose(this.handleClosePopup),this.add(this.popup),Phaser.Display.Align.In.Center(this.popup,this.zone)},n.createBgPopup=function(){this.bgPopup=new ih(this.scene,0,0,257,145,{frameTop:ig.POPUP_TOP_DARK,frameMiddle:ig.POPUP_MIDDLE_DARK,frameBottom:ig.POPUP_BOTTOM_DARK}),this.popup.add(this.bgPopup),Phaser.Display.Align.In.Center(this.bgPopup,this.popup,0,-72)},n.createPopupContent=function(){this.createSwitchButtons(),this.createMenuButtons(),this.createMinorButtons(),this.contents=this.scene.make.group({}),this.contents.addMultiple([this.buttonReplay,this.buttonAdventure,this.buttonHome])},n.createMenuButtons=function(){this.createButtonReplay(),this.createButtonPlayWith()},n.createButtonReplay=function(){this.buttonReplay=new eg(this.scene),this.buttonReplay.button.setWorldSize(252,53),this.popup.add(this.buttonReplay),Phaser.Display.Align.In.Center(this.buttonReplay,this.popup,0,38)},n.createButtonPlayWith=function(){this.buttonAdventure=new Jm(this.scene),this.buttonAdventure.button.setWorldSize(252,53),this.popup.add(this.buttonAdventure),Phaser.Display.Align.In.Center(this.buttonAdventure,this.popup,0,103)},n.createMinorButtons=function(){this.createButtonHome()},n.createButtonHome=function(){this.buttonHome=new Em(this.scene),this.buttonHome.button.setWorldSize(61,49),this.popup.add(this.buttonHome),Phaser.Display.Align.In.Center(this.buttonHome,this.popup,0,165)},n.createSwitchButtons=function(){var e=this.scene.player.getPlayerSettings(),t=e.sound,n=e.vibrate;this.createSoundButton(t),this.createVibrateButton(n)},n.createSoundButton=function(e){this.settingSoundContainer=this.scene.make.container({}),this.settingSoundContainer.setSize(180,30),this.settingSoundIcon=this.scene.make.image({key:ng,frame:ig.ICON_SOUND}),this.settingSoundIcon.setWorldSize(40,34),this.settingSound=new Il(this.scene,{enable:e,width:87,height:29}),Phaser.Display.Align.In.Center(this.settingSoundIcon,this.settingSoundContainer,-53,3),Phaser.Display.Align.In.Center(this.settingSound,this.settingSoundContainer,35,0),this.settingSoundContainer.add([this.settingSoundIcon,this.settingSound]),this.popup.add(this.settingSoundContainer),Phaser.Display.Align.In.Center(this.settingSoundContainer,this.bgPopup,0,-31)},n.createVibrateButton=function(e){this.settingVibrateContainer=this.scene.make.container({}),this.settingVibrateContainer.setSize(180,30),this.settingVibrateIcon=this.scene.make.image({key:ng,frame:ig.ICON_VIBRATE}),this.settingVibrateIcon.setWorldSize(43,46),this.settingVibrate=new Il(this.scene,{enable:e,width:87,height:29}),Phaser.Display.Align.In.Center(this.settingVibrateIcon,this.settingVibrateContainer,-56,-3),Phaser.Display.Align.In.Center(this.settingVibrate,this.settingVibrateContainer,35,3),this.settingVibrateContainer.add([this.settingVibrateIcon,this.settingVibrate]),this.popup.add(this.settingVibrateContainer),Phaser.Display.Align.In.Center(this.settingVibrateContainer,this.bgPopup,0,26)},n.runOpenAnimation=function(){this.scene.audio.playSound(Ka.Z.POPUP_SHOW),this.runPopupEntrancesAnimation(0,300),this.runPopupContentEntrancesAnimation(200,300)},n.runCloseAnimation=function(){this.runPopupExitsAnimation(0,200)},n.runPopupEntrancesAnimation=function(e,t){if(!this.popupShowUpAnimation){var n=this.popup,i=n.y,a=n.scale;this.popupShowUpAnimation=new Na({targets:[this.popup],delay:e,duration:t,props:{y:{from:350,to:i},alpha:{start:1,from:1,to:1},scale:{start:0,from:0,to:a}}})}this.popupShowUpAnimation.play()},n.runPopupContentEntrancesAnimation=function(e,t){this.contentShowUpAnimation||(this.contentShowUpAnimation=new xa.Z({targets:this.contents.getChildren(),duration:t,delay:this.scene.tweens.stagger(80,{start:e}),props:{alpha:{start:0,from:0,to:1}}})),this.contentShowUpAnimation.play()},n.runPopupExitsAnimation=function(e,t){var n,i=this;this.popupFadeOutAnimation||(this.popupFadeOutAnimation=new Pa.Z({targets:[this.popup],delay:e,duration:t,props:{y:250,scale:0},onComplete:function(){i.popup.setY(0)}})),null==(n=this.popupFadeOutAnimation)||n.play()},t}(GameCore.Screen),sg=GameCore.Configs,rg=sg.Gameplay,og=sg.Match.Levels,cg=function(){function e(){this.levelIndex=0,this.levels=og,this.recentLevel=void 0}var t=e.prototype;return t.increaseLevel=function(){this.levelIndex++},t.getCurrentTargetScore=function(){return this.levels[this.levelIndex]},t.getNextTargetScoreLevel=function(){return this.levels[this.levelIndex+1]},t.getCurrentIndex=function(){return this.levelIndex},t.updateCurrentLevelByScore=function(e){var t,n=Fl()(t=this.levels).call(t,(function(t){return t>e}));if(-1===n)return this.handleAutoGrantNewLevel(e);this.levelIndex=n;var i=this.levels[n-1];return this.recentLevel=i||e,this.levels[n]},t.restart=function(){this.levelIndex=0,this.recentLevel=0},t.handleAutoGrantNewLevel=function(e){var t=rg.Progress.BonusScore,n=this.levels[this.levels.length-1]+t;return this.levels.push(n),n<e?this.handleAutoGrantNewLevel(e):(this.levelIndex=this.levels.length-1,this.recentLevel=this.levels[this.levelIndex],n)},e}(),hg=function(e){function t(t,n){var i;return(i=e.call(this,t)||this).textMain=void 0,i.payload=void 0,i.chars=void 0,i.listText=[],i.tweenText=void 0,i.payload=n,i.createTextMain(),i.initListText(),i.scene.add.existing((0,Ga.Z)(i)),i}(0,o.Z)(t,e);var n=t.prototype;return n.createTextMain=function(){var e=this.payload,t=e.font,n=e.size,i=e.text;this.textMain=this.scene.make.bitmapText({font:t,size:n,origin:{x:.5,y:.5},text:i}).setVisible(!1),this.add(this.textMain)},n.initListText=function(){var e=this.payload,t=e.text,n=e.font,i=e.size;if(t){this.chars=t.split("");var a=t.length,s=0;a>15&&(s=a-15);for(var r=0,o=0;o<this.chars.length;o++){var c=this.chars[o],h=this.scene.make.bitmapText({font:n,size:i-s,origin:{x:.5,y:.5},text:c});this.listText.push(h),r+=h.width}for(var l=-r/2,u=0;u<this.chars.length;u++){var d=this.listText[u],p=d.width/2;d.setX(l+p),d.setAlpha(0),l+=d.width}this.add(this.listText)}},n.createAnim=function(){if(!this.tweenText){var e=this.payload.text;this.tweenText=this.scene.tweens.add({targets:this.listText,paused:!0,duration:150,scale:{from:0,to:1},alpha:{from:0,to:1},ease:"Back.easeOut",delay:this.scene.tweens.stagger(1700/e.length,{})})}},n.runAnim=function(){this.resetListText(),this.tweenText.play()},n.resetListText=function(){for(var e=0;e<this.listText.length;e++)this.listText[e].setScale(0).setAlpha(0)},n.restart=function(){this.resetListText()},n.start=function(e){var t=this;void 0===e&&(e=0),this.createAnim(),e?this.scene.time.addEvent({delay:e,callback:function(){t.runAnim()}}):this.runAnim()},t}(Phaser.GameObjects.Container),lg=function(e){function t(t,n){var i;return(i=e.call(this,t)||this).textMain=void 0,i.payload=void 0,i.chars=void 0,i.listText=[],i.tweenText=void 0,i.payload=n,i.createTextMain(),i.initListText(),i.scene.add.existing((0,Ga.Z)(i)),i}(0,o.Z)(t,e);var n=t.prototype;return n.createTextMain=function(){var e=this.payload,t=e.size,n=e.text;this.textMain=this.scene.make.text({style:{fontFamily:Wa.Z.FONT_FAMILY,fontSize:this.scene.fontSize(t)+"px"},origin:{x:.5,y:.5},text:n}).setAlpha(0),this.textMain.setTint(15651762),this.add(this.textMain)},n.initListText=function(){var e=this.payload,t=e.text,n=e.size;if(t){this.chars=t.split("");for(var i=0,a=0;a<this.chars.length;a++){var s=this.chars[a],r=this.scene.make.text({style:{fontFamily:Wa.Z.FONT_FAMILY,fontSize:this.scene.fontSize(n)+"px"},origin:{x:.5,y:.5},text:s});r.setTint(15651762),this.listText.push(r),i+=r.width}for(var o=-i/2,c=0;c<this.chars.length;c++){var h=this.listText[c];h.setX(o),h.setAlpha(0),o+=h.width+1}this.add(this.listText)}},n.createAnim=function(){if(!this.tweenText){var e=this.payload.text;this.tweenText=this.scene.tweens.add({targets:this.listText,paused:!0,duration:150,scale:{from:0,to:1},alpha:{from:0,to:1},ease:"Back.easeOut",delay:this.scene.tweens.stagger(1700/e.length,{})})}},n.runAnim=function(){this.textMain.setScale(0).setAlpha(0),this.tweenText.play()},n.resetListText=function(){for(var e=0;e<this.listText.length;e++)this.listText[e].setScale(0).setAlpha(0)},n.restart=function(){this.resetListText()},n.start=function(e){var t=this;void 0===e&&(e=0),this.createAnim(),e?this.scene.time.addEvent({delay:e,callback:function(){t.runAnim()}}):this.runAnim()},t}(Phaser.GameObjects.Container),ug=n(615),dg=n.n(ug),pg=function(e,t,n){return void 0===t&&(t=.1),void 0===n&&(n=.04),t*e+dg()(e)*n*e*e},mg=function(e){function t(n){var i;return(i=e.call(this,n)||this).windX=1,i.airFrictionX=.05,i.airFrictionY=.01,i._lastRotaion=0,i.rotationRate=Math.random()+t.bonusRotationRate<.5?-1:1,i.scaleXNumber=i.getRandomFloat(.1,.2),i.scaleYNumber=i.scaleXNumber,i.scaleRate=-1,i.maxScale=i.getRandomFloat(.5,1),i.deltaAlpha=0,i.airFrictionX=.01*Math.random()+(t.bonusAirFrictionX||.007),i.airFrictionY=.004*Math.random()+(t.bonusAirFrictionY||.006),i.maxScale=Math.max(i.scaleXNumber,i.maxScale),i.alpha=0,(0,Ga.Z)(i)||(0,Ga.Z)(i)}(0,o.Z)(t,e);var n=t.prototype;return n.getRandomNumberBetween=function(e,t){return Math.floor(Math.random()*(t-e+1)+e)},n.getRandomFloat=function(e,t){return Math.random()*(t-e)+e},n.setValueAirFrictionX=function(e){t.bonusAirFrictionX=e,this.airFrictionX=.01*Math.random()+(t.bonusAirFrictionX||.007)},n.setValueAirFrictionY=function(e){t.bonusAirFrictionY=e},n.setValueRotationRate=function(e){t.bonusRotationRate=e},n.reset=function(){this.scaleXNumber=this.getRandomFloat(.3,.8),this.scaleYNumber=this.scaleXNumber,this.scaleRate=-1,this.alpha=0,this.deltaAlpha=0},n.update=function(t,n,i){for(var a=e.prototype.update.call(this,t,n,i),s=.5,r=t;r>16.67;)this.velocityX-=pg(this.velocityX,s,this.airFrictionX)/60,this.velocityY-=pg(this.velocityY,s,this.airFrictionY)/60,r-=16.67;if(this.velocityX-=pg(this.velocityX,s,this.airFrictionX)*r/1e3,this.velocityY-=pg(this.velocityY,s,this.airFrictionY)*r/1e3,this._lastRotaion=this.rotation,this.lifeCurrent>3*this.life/4)this.scaleX=this.maxScale,this.scaleY=this.maxScale,this.deltaAlpha+=t/(this.life/4),this.alpha=this.deltaAlpha;else if(this.lifeCurrent>0){var o=this.scaleRate>0?this.maxScale:1;this.scaleXNumber+=o*this.scaleRate*(t/(3*this.life/4)*3),this.scaleYNumber+=o*this.scaleRate*(t/(3*this.life/4)*3),this.scaleX=this.scaleXNumber,this.scaleY=this.scaleYNumber,this.alpha=this.deltaAlpha,this.scaleX<=0&&(this.scaleRate=1),this.scaleX>=this.maxScale&&(this.scaleRate=-1)}else this.reset();return a},t}(Phaser.GameObjects.Particles.Particle);mg.bonusAirFrictionX=0,mg.bonusAirFrictionY=0,mg.bonusRotationRate=0,mg.scaleXNumber=void 0,mg.scaleYNumber=void 0,mg.bonusAirFrictionX=0,mg.bonusAirFrictionY=0,mg.bonusRotationRate=0,mg.scaleXNumber=Math.random(),mg.scaleYNumber=Math.random();var gg=mg,fg=Fa.Z.EFFECTS,Eg=fg.KEY,vg=fg.FRAME,Sg=function(e){function t(t){var n;return(n=e.call(this,t,Eg)||this).position1={x:-70,y:-180},n.emitterStar1=void 0,n.circleImage1=void 0,n.tweenShowCircle1=void 0,n.tweenHideCircle1=void 0,n.position2={x:-20,y:190},n.emitterStar2=void 0,n.circleImage2=void 0,n.tweenShowCircle2=void 0,n.tweenHideCircle2=void 0,n.position3={x:90,y:0},n.emitterStar3=void 0,n.circleImage3=void 0,n.tweenShowCircle3=void 0,n.tweenHideCircle3=void 0,n.setDepth(Oa.Z.ON_TOP+1),n.createEmitterStars(),n.createTweenCircle(),n.scene.add.existing((0,Ga.Z)(n)),n}(0,o.Z)(t,e);var n=t.prototype;return n.createEmitterStars=function(){var e=[vg.GLARE_CROSS,vg.DUST],t=[16636263,5289969,15880535];this.emitterStar1=this.createEmitter({name:"Emitter1",frame:e,tint:t,x:this.position1.x,y:this.position1.y,speed:{min:50,max:200},gravityY:40,lifespan:{min:1e3,max:4e3},maxParticles:0,on:!1,alpha:0,particleClass:gg,emitZone:{type:"edge",source:new Phaser.Geom.Circle(0,0,1)}}),this.emitterStar2=this.createEmitter({name:"Emitter1",frame:e,tint:t,x:this.position2.x,y:this.position2.y,speed:{min:100,max:200},gravityY:40,lifespan:{min:1e3,max:4e3},maxParticles:0,on:!1,alpha:0,particleClass:gg,emitZone:{type:"edge",source:new Phaser.Geom.Circle(0,0,1)}}),this.emitterStar3=this.createEmitter({name:"Emitter1",frame:e,tint:t,x:this.position3.x,y:this.position3.y,speed:{min:100,max:200},gravityY:40,lifespan:{min:1e3,max:4e3},maxParticles:0,on:!1,alpha:0,particleClass:gg,emitZone:{type:"edge",source:new Phaser.Geom.Circle(0,0,1)}})},n.createTweenCircle=function(){var e=this;this.circleImage1=this.scene.make.image({x:this.position1.x,y:this.position1.y,key:Eg,frame:vg.GLOW_CIRCLE}).setAlpha(0).setVisible(!1).setScale(0),this.tweenShowCircle1=this.scene.add.tween({paused:!0,targets:this.circleImage1,scale:{from:0,to:1},alpha:{from:0,to:1},ease:"Sine.easeInOut",duration:1e3,onComplete:function(){e.tweenHideCircle1.play()}}),this.tweenHideCircle1=this.scene.add.tween({paused:!0,targets:this.circleImage1,alpha:{from:1,to:0},ease:"Sine.easeInOut",duration:1e3,onComplete:function(){e.circleImage1.setVisible(!1),e.emitterStar1.stop()}}),this.circleImage2=this.scene.make.image({x:this.position2.x,y:this.position2.y,key:Eg,frame:vg.GLOW_CIRCLE}).setAlpha(0).setVisible(!1).setScale(0),this.tweenShowCircle2=this.scene.add.tween({paused:!0,targets:this.circleImage2,scale:{from:0,to:1},alpha:{from:0,to:1},ease:"Sine.easeInOut",duration:1e3,onComplete:function(){e.tweenHideCircle2.play()}}),this.tweenHideCircle2=this.scene.add.tween({paused:!0,targets:this.circleImage2,alpha:{from:1,to:0},ease:"Sine.easeInOut",duration:1e3,onComplete:function(){e.circleImage2.setVisible(!1),e.emitterStar2.stop()}}),this.circleImage3=this.scene.make.image({x:this.position3.x,y:this.position3.y,key:Eg,frame:vg.GLOW_CIRCLE}).setAlpha(0).setVisible(!1).setScale(0),this.tweenShowCircle3=this.scene.add.tween({paused:!0,targets:this.circleImage3,scale:{from:0,to:1},alpha:{from:0,to:1},ease:"Sine.easeInOut",duration:1e3,onComplete:function(){e.tweenHideCircle3.play()}}),this.tweenHideCircle3=this.scene.add.tween({paused:!0,targets:this.circleImage3,alpha:{from:1,to:0},ease:"Sine.easeInOut",duration:1e3,onComplete:function(){e.circleImage3.setVisible(!1),e.emitterStar3.stop()}})},n.getImages=function(){return[this.circleImage1,this.circleImage2,this.circleImage3]},n.playConfettiAnimation=function(){var e=this;this.scene.time.addEvent({delay:300,callback:function(){e.emitterStar1.flow(1e4,30),e.circleImage1.setVisible(!0),e.tweenShowCircle1.play()},callbackScope:this}),this.scene.time.addEvent({delay:800,callback:function(){e.emitterStar2.flow(1e4,25),e.circleImage2.setVisible(!0),e.tweenShowCircle2.play()},callbackScope:this}),this.scene.time.addEvent({delay:1300,callback:function(){e.emitterStar3.flow(1e4,30),e.circleImage3.setVisible(!0),e.tweenShowCircle3.play()},callbackScope:this})},t}(Phaser.GameObjects.Particles.ParticleEmitterManager),Ag=Sg,Tg=function(e){function t(t,n,i,a){var s;return(s=e.call(this,t,n,i,a)||this).scene=void 0,s.textScoreReached=void 0,s.closeTimerEvent=void 0,s.tweenBackground=void 0,s.starSuperTwinkle=void 0,s.open=function(t){e.prototype.open.call((0,Ga.Z)(s),t),s.scene.enableInput(),s.runPopupEntrancesAnimation(300,300),s.textScoreReached.restart(),s.scene.audio.playSound(Ka.Z.SCORE_REACHED)},s.close=function(){e.prototype.close.call((0,Ga.Z)(s)),s.scene.game.globalScene.requestBackgroundMaskUpdate(ba.o4.REACHED_SCORE_SCREEN,0)},s.scene=t,s.setDepth(ba.Ks.POPUP),s.background.setAlpha(0),s.createContent(),s}(0,o.Z)(t,e);var n=t.prototype;return n.runPopupEntrancesAnimation=function(e,t){var n=this;this.tweenBackground||(this.tweenBackground=this.scene.tweens.addCounter({paused:!0,from:0,to:.6,delay:e,duration:t,onUpdate:function(e){var t=e.getValue();n.background.setAlpha(t),n.scene.game.globalScene.requestBackgroundMaskUpdate(ba.o4.REACHED_SCORE_SCREEN,t)},onComplete:function(){n.textScoreReached.start(),n.starSuperTwinkle.playConfettiAnimation(),n.handleDelegate(),n.runAnim()}})),this.tweenBackground.play()},n.handleDelegate=function(){var e,t=this,n=this.getData(["duration","onClose"]),i=n[0],a=void 0===i?0:i,s=n[1];null==(e=this.closeTimerEvent)||e.remove(),a>0&&(this.closeTimerEvent=this.scene.time.addEvent({delay:a,callback:function(){t.visible&&t.scene.screen.close(t.name),s&&s()}}))},n.runAnim=function(){},n.createContent=function(){this.createText(),this.createAnim()},n.createText=function(){var e=this.scene.game.lang,t=this.scene.facebook.getLocale();this.textScoreReached="ar"==t?new lg(this.scene,{text:e.Text.SCORE_REACHED,size:this.scene.fontSize(180)}):new hg(this.scene,{text:e.Text.SCORE_REACHED,font:Wa.Z.PRIMARY.KEY,size:this.scene.fontSize(60)}),this.add(this.textScoreReached),Phaser.Display.Align.In.Center(this.textScoreReached,this)},n.createAnim=function(){this.starSuperTwinkle=new Ag(this.scene),this.add(this.starSuperTwinkle),this.add(this.starSuperTwinkle.getImages())},t}(GameCore.Screen),yg=Fa.Z.DEFAULT.FRAME,Ig=function(e){function t(t,n,i,a){var s;return(s=e.call(this,t,n,i,a)||this).scene=void 0,s.popup=void 0,s.contents=void 0,s.textTargetScore=void 0,s.textScore=void 0,s.popupShowUpAnimation=void 0,s.popupFadeOutAnimation=void 0,s.contentShowUpAnimation=void 0,s.popupFadeInMaskAnimation=void 0,s.popupFadeOutMaskAnimation=void 0,s.handleClose=function(){s.runCloseAnimation()},s.scene=t,s.createPopup(),s.createTextTargetScore(),s.createTextScore(),s.addItem(),s.setDepth(ba.Ks.POPUP),s.background.setAlpha(.5),s}(0,o.Z)(t,e);var n=t.prototype;return n.open=function(t){var n=this;e.prototype.open.call(this,t);var i=this.scene.levelManager.getCurrentTargetScore(),a=this.scene.levelManager.getCurrentIndex();this.textScore.setText(""+i),0===a?this.popup.setTitle(yg.TEXT_FIRST_MILESTONE):this.popup.setTitle(yg.TEXT_NEXT_MILESTONE);var s=this.getData(["duration"])[0];this.runOpenAnimation(),this.scene.time.delayedCall(s,(function(){n.handleClose()}))},n.createTextTargetScore=function(){var e=this.scene.game.lang;"ar"==this.scene.facebook.getLocale()?(this.textTargetScore=this.scene.make.text({text:e.Text.TARGET_SCORE,style:{fontFamily:Wa.Z.FONT_FAMILY,fontSize:this.scene.fontSize(48)+"px"},origin:{x:.5,y:.5}}),this.textTargetScore.setTint(5778458)):this.textTargetScore=this.scene.make.bitmapText({text:e.Text.TARGET_SCORE,font:Wa.Z.DARK.KEY,size:this.scene.fontSize(48),origin:{x:.5,y:.5}}),this.popup.add(this.textTargetScore),Phaser.Display.Align.In.Center(this.textTargetScore,this.popup,0,-17)},n.createTextScore=function(){this.textScore=this.scene.make.bitmapText({font:Wa.Z.DARK.KEY,size:this.scene.fontSize(100),text:"0",origin:{x:.5,y:.5}}),this.popup.add(this.textScore),Phaser.Display.Align.In.Center(this.textScore,this.popup,0,45)},n.createPopup=function(){this.popup=new Za(this.scene,0,0,310,196,{forceHeightTop:49}),this.add(this.popup),this.popup.setTitle(yg.TEXT_FIRST_MILESTONE),this.popup.hideButtonClose(),Phaser.Display.Align.In.Center(this.popup,this.zone)},n.addItem=function(){this.contents=this.scene.add.group(),this.contents.addMultiple([])},n.runOpenAnimation=function(){var e;null!=(e=this.popupShowUpAnimation)&&null!=(e=e.tween)&&e.isPlaying()||(this.scene.audio.playSound(Ka.Z.POPUP_SHOW),this.runPopupEntrancesAnimation(0,300),this.runFadeInMaskAnimation(100,300),this.runPopupContentEntrancesAnimation(200,300))},n.runCloseAnimation=function(){var e;null!=(e=this.popupFadeOutAnimation)&&null!=(e=e.tween)&&e.isPlaying()||(this.runPopupExitsAnimation(50,200),this.runFadeOutMaskAnimation(0,200))},n.runPopupEntrancesAnimation=function(e,t){if(!this.popupShowUpAnimation){var n=this.popup.scale;this.popupShowUpAnimation=new Na({targets:[this.popup],delay:e,duration:t,props:{y:0,alpha:{start:1,from:1,to:1},scale:{start:0,from:0,to:n}}})}this.popupShowUpAnimation.play()},n.runPopupContentEntrancesAnimation=function(e,t){var n;null==(n=this.contentShowUpAnimation)||n.remove(),this.contentShowUpAnimation=new xa.Z({targets:this.contents.getChildren(),duration:t,delay:e,props:{alpha:{start:0,from:0,to:1}}}),this.contentShowUpAnimation.play()},n.runPopupExitsAnimation=function(e,t){var n=this;this.popupFadeOutAnimation||(this.popupFadeOutAnimation=new Pa.Z({targets:[this.popup],delay:e,duration:t,props:{scale:0},onComplete:function(){n.popup.setY(0),n.scene.screen.close(n.name);var e=n.getData(["onClose"])[0];e&&e()}})),this.popupFadeOutAnimation.play()},n.runFadeInMaskAnimation=function(e,t){var n=this;if(!this.popupFadeInMaskAnimation){var i=this.background.alpha;this.popupFadeInMaskAnimation=new wa.Z({targets:[this.background],delay:e,duration:t,props:{alpha:{start:0,from:0,to:i}},onUpdate:function(){n.scene.game.globalScene.requestBackgroundMaskUpdate(ba.o4.TARGET_SCORE_SCREEN,n.background.alpha)}})}this.popupFadeInMaskAnimation.play()},n.runFadeOutMaskAnimation=function(e,t){var n=this;if(!this.popupFadeOutMaskAnimation){var i=this.background.alpha;this.popupFadeOutMaskAnimation=new Pa.Z({targets:[this.background],delay:e,duration:t,props:{alpha:{start:i,from:i,to:0}},onUpdate:function(){n.scene.game.globalScene.requestBackgroundMaskUpdate(ba.o4.TARGET_SCORE_SCREEN,n.background.alpha)}})}this.popupFadeOutMaskAnimation.play()},t}(GameCore.Screen),Cg=Ig,Og=Fa.Z.DEFAULT,bg=Og.KEY,Rg=Og.FRAME,Dg=function(e){function t(t,n){var i;return(i=e.call(this,t)||this).buttonPlay=void 0,i.buttonShare=void 0,i.avatar=void 0,i.rankIcon=void 0,i.rankText=void 0,i.bgRankText=void 0,i.username=void 0,i.score=void 0,i.scoreText=void 0,i.background=void 0,i.showPopUp=void 0,i.showItems=void 0,i.payload=void 0,i.handleChallengeFriend=function(){var e=i.payload.playerId;i.scene.storage.dispatch(Ko(e))},i.handleShare=function(){i.scene.storage.dispatch(Rr())},i.createBackground(),i.updateSize(),i.createAvatar(),i.createRank(),i.createUsername(),i.createScore(),i.createButtonShare(),i.createButtonPlay(),n&&i.updateInfo(n),i.scene.add.existing((0,Ga.Z)(i)),i}(0,o.Z)(t,e);var n=t.prototype;return n.updateInfo=function(e){this.payload=(0,s.Z)({scoreRight:!0,isHighlight:!1,useChallenge:!1,backgroundFrame:""},e),this.updateBackground(),this.updateAvatar(),this.updateRank(),this.updateUsername(),this.updateScore(),this.updateButton(),this.alignScoreAndButton()},n.createBackground=function(){this.background=this.scene.make.image({key:bg,frame:Rg.LEADERBOARD_BG_DARK}),this.background.setWorldSize(312,60),this.background.setVisible(!1),this.add(this.background)},n.updateBackground=function(){this.payload.backgroundFrame?(this.background.setVisible(!0),this.background.setFrame(this.payload.backgroundFrame||Rg.LEADERBOARD_BG_DARK),this.background.setWorldSize(312,60)):this.background.setVisible(!1)},n.updateSize=function(){var e=this.background,t=e.width,n=e.height;this.setSize(t,n)},n.createAvatar=function(){this.avatar=new jh(this.scene,{key:bg,frame:Rg.AVATAR_BORDER,background:Rg.AVATAR_BACKGROUND,width:43,height:45,radius:30,borderWidth:5}),this.add(this.avatar),Phaser.Display.Align.In.LeftCenter(this.avatar,this,-50,0)},n.updateAvatar=function(){var e=this.payload,t=e.playerId,n=e.photo;this.avatar.loadPhoto(t,n)},n.createRank=function(){this.createRankIcon(1),this.createBgRankText(),this.createRankText(1)},n.updateRank=function(){var e=this.payload.rank;if(e<0)return this.rankIcon.setVisible(!1),this.rankText.setVisible(!0),void this.rankText.setText("99+");this.updateRankIcon(e),this.updateRankText(e)},n.getRankIconFrame=function(e){var t=Rg.ICON_CUP_GOLD;switch(e){case 1:t=Rg.ICON_CUP_GOLD;break;case 2:t=Rg.ICON_CUP_SILVER;break;case 3:t=Rg.ICON_CUP_COPPER}return t},n.createRankIcon=function(e){void 0===e&&(e=0);var t=this.getRankIconFrame(e);this.rankIcon=this.scene.make.image({key:bg,frame:t}),this.rankIcon.setWorldSize(28,24),this.add(this.rankIcon),Phaser.Display.Align.In.LeftCenter(this.rankIcon,this.background,-11,6)},n.updateRankIcon=function(e){if(e>3)this.rankIcon.setVisible(!1);else{this.rankIcon.setVisible(!0);var t=this.getRankIconFrame(e);this.rankIcon.setWorldSize(30,37),this.rankIcon.setFrame(t)}},n.createBgRankText=function(){this.bgRankText=this.scene.make.image({key:bg,frame:Rg.BG_SMALL_CIRCLE}),this.bgRankText.setWorldSize(29,29),this.add(this.bgRankText),Phaser.Display.Align.In.LeftCenter(this.bgRankText,this.background,-11,1)},n.createRankText=function(e){void 0===e&&(e=0),this.rankText=this.scene.make.bitmapText({font:Wa.Z.DARK.KEY,size:this.scene.fontSize(26),text:""+e,origin:{x:.5,y:.5}}),this.add(this.rankText),Phaser.Display.Align.In.Center(this.rankText,this.bgRankText,0,4)},n.updateRankText=function(e){if(e<=3)return this.bgRankText.setVisible(!1),void this.rankText.setVisible(!1);this.bgRankText.setVisible(!0),this.rankText.setVisible(!0),this.rankText.setText(""+e)},n.getShortName=function(e){return e.substring(0,14)},n.createUsername=function(){this.username=this.scene.make.text({text:this.getShortName("FRIEND NAME"),style:{fontSize:this.scene.fontSize(42)+"px",fontStyle:"bold"}}),this.add(this.username),Phaser.Display.Align.In.Center(this.username,this.avatar,85,-1)},n.updateUsername=function(){var e=this.payload.name,t=e;"Anonymous"===e&&(t=this.scene.lang.Text.ANONYMOUS),this.username.setText(this.getShortName(t))},n.createScore=function(){this.scoreText=this.scene.make.bitmapText({text:"132500",font:Wa.Z.NUMBER_YELLOW.KEY,size:this.scene.fontSize(48)}),this.add(this.scoreText),Phaser.Display.Align.In.Center(this.scoreText,this.avatar,130,3)},n.updateScore=function(){var e=this.payload.score;this.scoreText.setText(e)},n.createButtonPlay=function(){this.buttonPlay=new Ba.Z(this.scene,bg,Rg.BUTTON_CHALLENGE,60,35),this.buttonPlay.setName("ChallengeFriend"),Phaser.Display.Align.In.RightCenter(this.buttonPlay,this,-7,2),this.buttonPlay.onClick=this.handleChallengeFriend,this.add(this.buttonPlay)},n.createButtonShare=function(){this.buttonShare=new Ba.Z(this.scene,bg,Rg.BUTTON_SHARE,60,35),this.buttonShare.setName("Share"),Phaser.Display.Align.In.RightCenter(this.buttonShare,this,-7,2),this.buttonShare.onClick=this.handleShare,this.add(this.buttonShare)},n.updateButton=function(){var e=this.payload,t=e.isHighlight;if(!e.useChallenge)return this.buttonShare.setVisible(!1),void this.buttonPlay.setVisible(!1);t?(this.buttonShare.setVisible(!0),this.buttonPlay.setVisible(!1)):(this.buttonShare.setVisible(!1),this.buttonPlay.setVisible(!0))},n.alignScoreAndButton=function(){this.payload.useChallenge?Phaser.Display.Align.In.Center(this.scoreText,this.avatar,110,3):Phaser.Display.Align.In.Center(this.scoreText,this.avatar,200,3)},n.runShowPopUpAnimation=function(e,t){this.scene.tweens.killTweensOf(this),this.showPopUp=new zh({targets:[this],delay:e,duration:t,props:{y:{start:this.y+70,to:this.y}}}),this.showPopUp.play()},n.runShowItemAnimation=function(e,t){var n=this.getAll();this.scene.tweens.killTweensOf(n),this.showItems=new Wh({targets:n,duration:t,delay:this.scene.tweens.stagger(50,{start:e+50}),props:{scale:{duration:1e3,getStart:function(e){return.8*e.scale},getEnd:function(e){return e.scale},ease:Phaser.Math.Easing.Elastic.Out,easeParams:[.1,.45]}}}),this.showItems.play()},n.runShowUpAnimation=function(e,t){void 0===e&&(e=0),void 0===t&&(t=300);var n=100*e;this.runShowPopUpAnimation(n,t),this.runShowItemAnimation(n,t)},n.setFrameBackground=function(e){this.background.setFrame(e)},t}(Phaser.GameObjects.Container),_g=Dg,wg=(Fa.Z.DEFAULT.FRAME,function(e){function t(t){var n;return(n=e.call(this,t)||this).myScoreBlock=void 0,n.scene=t,n.setName("FooterBar"),n.createMyScoreBlock(),n.scene.add.existing((0,Ga.Z)(n)),n}(0,o.Z)(t,e);var n=t.prototype;return n.createMyScoreBlock=function(){this.myScoreBlock=new _g(this.scene),this.myScoreBlock.setVisible(!1),this.add(this.myScoreBlock),Phaser.Display.Align.In.Center(this.myScoreBlock,this)},n.updateMyScoreBlock=function(e){this.myScoreBlock.setVisible(!0),this.myScoreBlock.updateInfo(e),this.myScoreBlock.runShowUpAnimation(0,1e3)},t}(Phaser.GameObjects.Container)),Pg=wg;function xg(e,t){var n="undefined"!==typeof Dh()&&wh()(e)||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){var n;if(!e)return;if("string"===typeof e)return kg(e,t);var i=We()(n=Object.prototype.toString.call(e)).call(n,8,-1);"Object"===i&&e.constructor&&(i=e.constructor.name);if("Map"===i||"Set"===i)return bh()(e);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return kg(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var i=0;return function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function kg(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var Mg=Fa.Z.DEFAULT.FRAME,Lg=function(e){function t(t){var n;(n=e.call(this,t)||this).scene=void 0,n.currentPlayerId=void 0,n.scroller=void 0,n.scene=t;var i=n.scene.player;return n.currentPlayerId=i.getPlayerId(),n.createReuseScroller(),n.scene.add.existing((0,Ga.Z)(n)),n}(0,o.Z)(t,e);var n=t.prototype;return n.createReuseScroller=function(){this.scroller=new sh(this.scene,{classType:_g,listConfigs:[],width:310,height:330,padding:0,marginTop:0,marginBottom:0}),this.scene.renderer instanceof Phaser.Renderer.WebGL.WebGLRenderer&&this.scroller.createBound(Fa.Z.DEFAULT.KEY,Fa.Z.DEFAULT.FRAME.BLANK,40,16643027),this.scroller.createMask(),this.scroller.setPosition(0,70),this.add(this.scroller)},n.updateData=function(e,t){var n=ui()(e)||[];if(!(n.length<1)){for(var i,a=[],s=0,r=xg(pi()(n).call(n,(function(e,t){return+t.score-+e.score})));!(i=r()).done;){var o=i.value,c=o.playerId,h=o.photo,l=o.score,u=o.name,d=o.rank;if(c){var p=this.currentPlayerId===c,m=t===ts,g=t===ns,f=s>=1?Mg.LEADERBOARD_BG_DARK:Mg.LEADERBOARD_BG_LIGHT,E=u;"Anonymous"===u&&(E=this.scene.lang.Text.ANONYMOUS);var v={playerId:c,photo:h,name:E,rank:d,score:l,scoreRight:m,useChallenge:g,isHighlight:p,backgroundFrame:f};a.push(v),++s>=2&&(s=0)}}this.scroller.updateConfig(a),this.showLeaders()}},n.removeLeaders=function(){this.scroller.updateConfig([])},n.getLeaders=function(){return this.scroller.getChildren()},n.showLeaders=function(){var e=this,t=this.getLeaders();if(!(t.length<1)){for(var n=Math.min(t.length,6),i=0;i<n;i++){var a=t[i];a&&(a.setVisible(!0),a.runShowUpAnimation(i,300))}var s=300+100*n+250;this.scene.time.delayedCall(s,(function(){e.scroller.setEnable(!0)}))}},t}(Phaser.GameObjects.Container),Ng=Lg,Gg=Fa.Z.DEFAULT,Bg=Gg.KEY,Fg=Gg.FRAME,Ug=function(e){function t(t){var n;return(n=e.call(this,t)||this).leaders=void 0,n.buttonClose=void 0,n.loading=void 0,n.message=void 0,n.messageAnimation=void 0,n.setSize(310,430),n.createLoading(),n.createMessage(),n.createContents(),n.createAnimation(),n.scene.add.existing((0,Ga.Z)(n)),n}(0,o.Z)(t,e);var n=t.prototype;return n.showLoading=function(e){this.loading.setVisible(e),this.showMessage(!1)},n.showMessage=function(e,t){this.message.setVisible(e),t&&this.messageAnimation.play()},n.createLoading=function(){this.loading=new Sc.Z(this.scene),this.loading.setVisible(!1),this.add(this.loading)},n.createMessage=function(){this.message=this.scene.make.image({ket:Bg,frame:Fg.TEXT_LEADERBOARD_EMPTY});var e=this.scene.world.getPixelRatio(),t=this.message,n=t.width,i=t.height;this.message.setWorldSize(n/e,i/e),this.add(this.message),Phaser.Display.Align.In.Center(this.message,this)},n.createContents=function(){this.createLeaders(),this.createBorderContent()},n.createLeaders=function(){this.leaders=new Ng(this.scene),this.add(this.leaders),Phaser.Display.Align.In.Center(this.leaders,this,0,-89)},n.createContentBackground=function(){var e=this.scene.make.container({}),t=this.scene.make.image({key:Bg,frame:Fg.POPUP_TOP});t.setWorldSize(350,55);var n=this.scene.make.image({key:Bg,frame:Fg.POPUP_MIDDLE});n.setWorldSize(350,430);var i=this.scene.make.image({key:Bg,frame:Fg.POPUP_BOTTOM});i.setWorldSize(350,22),e.add(t),e.add(n),e.add(i),Phaser.Display.Align.In.Center(n,e),Phaser.Display.Align.In.Center(t,n,0,-n.displayHeight/2-t.displayHeight/2),Phaser.Display.Align.In.Center(i,n,0,n.displayHeight/2+i.displayHeight/2-10),this.add(e),Phaser.Display.Align.In.Center(e,this,0,6)},n.createAnimation=function(){this.messageAnimation=new il.Z({targets:[this.message],duration:60,repeat:2})},n.createBorderContent=function(){var e=this.scene.make.image({key:Bg,frame:Fg.LEADERBOARD_BORDER_TOP});e.setWorldSize(312,12),this.add(e),Phaser.Display.Align.In.TopCenter(e,this,0,-29);var t=this.scene.make.image({key:Bg,frame:Fg.LEADERBOARD_BORDER_MIDDLE});t.setWorldSize(312,370),this.add(t),Phaser.Display.Align.In.Center(t,this,0,11);var n=this.scene.make.image({key:Bg,frame:Fg.LEADERBOARD_BORDER_BOTTOM});n.setWorldSize(312,13),this.add(n),Phaser.Display.Align.In.Center(n,this,0,202)},t}(Phaser.GameObjects.Container),Hg=Ug,Vg=GameCore.Configs.LeadersBoard,Yg=Fa.Z.DEFAULT,Zg=(Yg.KEY,Yg.FRAME),Wg=function(e){function t(t,n,i,a){var s;return(s=e.call(this,t,n,i,a)||this).popup=void 0,s.popupShowUpAnimation=void 0,s.popupFadeOutAnimation=void 0,s.popupFadeInMaskAnimation=void 0,s.popupFadeOutMaskAnimation=void 0,s.board=void 0,s.footerBar=void 0,s.isRequesting=void 0,s.isSwitchable=void 0,s.tabId=void 0,s.offset=void 0,s.isStateChanged=void 0,s.open=function(t){var n=s.scene.game.lang;e.prototype.open.call((0,Ga.Z)(s),t),s.setVisible(!0),s.selectWorldTab(),s.runOpenAnimation(),s.board.showLoading(!0);var i=[{selector:Yh,callback:function(e){if(s.isRequesting=e,s.board.showLoading(e),s.scene.scene.isActive()&&s.visible&&!1===e){if(!s.scene)return;var t=s.scene.game.storage.getState(),i=Vh(t);s.isSwitchable=!0,i&&0!==H()(i).length?s.board.leaders.updateData(i,s.tabId):s.board.showMessage(!0,n.Text.LEADERBOARD_EMPTY);var a=lr(t),r=s.scene.player.getBestScore(),o=a.bestScore,c=void 0===o?0:o,h=s.scene.player.getPlayer(),l=i[h.playerId]||{playerId:h.playerId,name:h.name,photo:h.photo,score:r>c?r:c,rank:-1};s.footerBar.updateMyScoreBlock({playerId:l.playerId,rank:l.rank,photo:l.photo,name:l.name,score:l.score,backgroundFrame:Zg.LEADERBOARD_BG_OWN,isHighlight:!0,useChallenge:!1})}}}];s.handleStateChange(i)},s.clickClose=function(){s.runCloseAnimation()},s.setVisible(!1),s.createPopup(),s.createBoard(),s.createFooterBar(),s.setDepth(ba.Ks.POPUP),s.background.setAlpha(.5),s}(0,o.Z)(t,e);var n=t.prototype;return n.handleStateChange=function(e){var t=this;this.isStateChanged||(e.forEach((function(e){var n=e.selector,i=e.callback;t.scene.storage.watch(n,i)})),this.isStateChanged=!0)},n.createPopup=function(){this.popup=new Za(this.scene,0,-21,350,500,{forceHeightTop:52}),this.add(this.popup),this.popup.setTitle(Zg.TEXT_LEADER_BOARD),this.popup.setOnClickButtonClose(this.clickClose),Phaser.Display.Align.In.Center(this.popup,this.zone,0,0)},n.createBoard=function(){this.board=new Hg(this.scene),this.popup.add(this.board),Phaser.Display.Align.In.Center(this.board,this.popup,0,-25)},n.createFooterBar=function(){this.footerBar=new Pg(this.scene),this.popup.add(this.footerBar),Phaser.Display.Align.In.Center(this.footerBar,this.popup,0,151)},n.selectWorldTab=function(){this.tabId=ts,this.offset=0,this.board.showLoading(!0),this.board.leaders.removeLeaders(),this.scene.storage.dispatch(Uh()),this.scene.storage.dispatch(Bh(Vg.LeaderboardId,ts,Vg.Limit,this.offset))},n.runCloseAnimation=function(){var e;null!=(e=this.popupFadeOutAnimation)&&null!=(e=e.tween)&&e.isPlaying()||(this.runPopupExitsAnimation(50,200),this.runFadeOutMaskAnimation(0,200))},n.runPopupExitsAnimation=function(e,t){var n,i=this;this.popupFadeOutAnimation||(this.popupFadeOutAnimation=new Pa.Z({targets:[this.popup],delay:e,duration:t,props:{scale:0},onComplete:function(){i.popup.setY(0),i.board.showLoading(!1),i.close()}})),null==(n=this.popupFadeOutAnimation)||n.play()},n.runOpenAnimation=function(){this.scene.audio.playSound(Ka.Z.POPUP_SHOW),this.runPopupEntrancesAnimation(0,300),this.runFadeInMaskAnimation(100,300)},n.runPopupEntrancesAnimation=function(e,t){if(!this.popupShowUpAnimation){var n=this.popup.scale;this.popupShowUpAnimation=new Na({targets:[this.popup],delay:e,duration:t,props:{y:0,alpha:{start:1,from:1,to:1},scale:{start:0,from:0,to:n}}})}this.popupShowUpAnimation.play()},n.runFadeInMaskAnimation=function(e,t){if(!this.popupFadeInMaskAnimation){var n=this.background.alpha;this.popupFadeInMaskAnimation=new wa.Z({targets:[this.background],delay:e,duration:t,props:{alpha:{start:0,from:0,to:n}}})}this.popupFadeInMaskAnimation.play()},n.runFadeOutMaskAnimation=function(e,t){if(!this.popupFadeOutMaskAnimation){var n=this.background.alpha;this.popupFadeOutMaskAnimation=new Pa.Z({targets:[this.background],delay:e,duration:t,props:{alpha:{start:n,from:n,to:0}}})}this.popupFadeOutMaskAnimation.play()},t}(GameCore.Screen),Kg=Wg,zg=n(448),Xg="How about diving into the game for a relaxing experience?",jg=GameCore.Configs.Notification.DailyNotificationMessages,Jg=void 0===jg?{}:jg,qg=function(){function e(){}e.sendNewUserNotification=function(){var e=(0,r.Z)(u().mark((function e(){var t;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.getInstance(),e.abrupt("return",t.sendNewUserNotificationInstance());case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),e.sendDailyNotification=function(){var e=(0,r.Z)(u().mark((function e(){var t;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.getInstance(),e.abrupt("return",t.sendDailyNotificationInstance());case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),e.sendTestDailyNotification=function(){var e=(0,r.Z)(u().mark((function e(t){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.getInstance();case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),e.getInstance=function(){return this._instance||(this._instance=new e),this._instance};var t=e.prototype;return t.sendNewUserNotificationInstance=function(){var e=(0,r.Z)(u().mark((function e(){var t,n,i,a,s,r;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=window.game,n=t.player,i=t.facebook,a=t.rollbar,e.prev=1,n.getPlayerIsNew()){e.next=5;break}return e.abrupt("return");case 5:if(n.getPlayerASID()){e.next=8;break}return e.abrupt("return");case 8:return e.next=10,FBInstant.player.getDataAsync(["isNotificationFirstSent"]);case 10:if(e.t0=e.sent,e.t0){e.next=13;break}e.t0={};case 13:if(s=e.t0,!0!==s.isNotificationFirstSent){e.next=17;break}return e.abrupt("return");case 17:return r={message:Xg,delayTime:14400,type:zg.Z.NEW_USER_NOTIFICATION},e.next=20,i.sendNotificationAsync(r);case 20:FBInstant.player.setDataAsync({isNotificationFirstSent:!0}),e.next=26;break;case 23:e.prev=23,e.t1=e.catch(1),a.sendException(e.t1);case 26:case"end":return e.stop()}}),e,null,[[1,23]])})));return function(){return e.apply(this,arguments)}}(),t.sendDailyNotificationInstance=function(){var e=(0,r.Z)(u().mark((function e(){var t,n,i;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=window.game.rollbar,e.prev=1,n=new Date,i=n.getDay(),e.t0=i,e.next=0===e.t0?7:1===e.t0?10:2===e.t0?13:3===e.t0?16:4===e.t0?19:22;break;case 7:return e.next=9,this.sendMondayNotification();case 9:return e.abrupt("break",22);case 10:return e.next=12,this.sendTuesdayNotification();case 12:return e.abrupt("break",22);case 13:return e.next=15,this.sendWednesdayNotification();case 15:return e.abrupt("break",22);case 16:return e.next=18,this.sendThursdayNotification();case 18:return e.abrupt("break",22);case 19:return e.next=21,this.sendFridayNotification();case 21:return e.abrupt("break",22);case 22:return e.next=24,this.sendSaturdayNotification();case 24:return e.next=26,this.sendSundayNotification();case 26:e.next=31;break;case 28:e.prev=28,e.t1=e.catch(1),t.sendException(e.t1);case 31:case"end":return e.stop()}}),e,this,[[1,28]])})));return function(){return e.apply(this,arguments)}}(),t.sendMondayNotification=function(){var e=(0,r.Z)(u().mark((function e(){var t,n,i,a,s;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=window.game,n=t.facebook,i=t.rollbar,e.prev=1,s={message:null!=(a=Jg.MONDAY)?a:Xg,delayTime:86400,type:zg.Z.MONDAY_NOTIFICATION},e.next=5,n.sendNotificationAsync(s);case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),i.sendException(e.t0);case 10:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(){return e.apply(this,arguments)}}(),t.sendTuesdayNotification=function(){var e=(0,r.Z)(u().mark((function e(){var t,n,i,a,s;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=window.game,n=t.facebook,i=t.rollbar,e.prev=1,s={message:null!=(a=Jg.TUESDAY)?a:Xg,delayTime:86400,type:zg.Z.TUESDAY_NOTIFICATION},e.next=5,n.sendNotificationAsync(s);case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),i.sendException(e.t0);case 10:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(){return e.apply(this,arguments)}}(),t.sendWednesdayNotification=function(){var e=(0,r.Z)(u().mark((function e(){var t,n,i,a,s;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=window.game,n=t.facebook,i=t.rollbar,e.prev=1,s={message:null!=(a=Jg.WEDNESDAY)?a:Xg,delayTime:86400,type:zg.Z.WEDNESDAY_NOTIFICATION},e.next=5,n.sendNotificationAsync(s);case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),i.sendException(e.t0);case 10:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(){return e.apply(this,arguments)}}(),t.sendThursdayNotification=function(){var e=(0,r.Z)(u().mark((function e(){var t,n,i,a,s;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=window.game,n=t.facebook,i=t.rollbar,e.prev=1,s={message:null!=(a=Jg.THURSDAY)?a:Xg,delayTime:86400,type:zg.Z.THURSDAY_NOTIFICATION},e.next=5,n.sendNotificationAsync(s);case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),i.sendException(e.t0);case 10:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(){return e.apply(this,arguments)}}(),t.sendFridayNotification=function(){var e=(0,r.Z)(u().mark((function e(){var t,n,i,a,s;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=window.game,n=t.facebook,i=t.rollbar,e.prev=1,s={message:null!=(a=Jg.FRIDAY)?a:Xg,delayTime:86400,type:zg.Z.FRIDAY_NOTIFICATION},e.next=5,n.sendNotificationAsync(s);case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),i.sendException(e.t0);case 10:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(){return e.apply(this,arguments)}}(),t.sendSaturdayNotification=function(){var e=(0,r.Z)(u().mark((function e(){var t,n,i,a,s,r;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=window.game,n=t.facebook,i=t.rollbar,e.prev=1,s=this.findDelayTimeForNextDay(6,10),r={message:null!=(a=Jg.SATURDAY)?a:Xg,delayTime:s,type:zg.Z.SATURDAY_NOTIFICATION},e.next=6,n.sendNotificationAsync(r);case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),i.sendException(e.t0);case 11:case"end":return e.stop()}}),e,this,[[1,8]])})));return function(){return e.apply(this,arguments)}}(),t.sendSundayNotification=function(){var e=(0,r.Z)(u().mark((function e(){var t,n,i,a,s,r;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=window.game,n=t.facebook,i=t.rollbar,e.prev=1,s=this.findDelayTimeForNextDay(0,10),r={message:null!=(a=Jg.SUNDAY)?a:Xg,delayTime:s,type:zg.Z.SUNDAY_NOTIFICATION},e.next=6,n.sendNotificationAsync(r);case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),i.sendException(e.t0);case 11:case"end":return e.stop()}}),e,this,[[1,8]])})));return function(){return e.apply(this,arguments)}}(),t.findDelayTimeForNextDay=function(e,t){if(e<0||e>6)throw new Error("Invalid day for notification");if(t<0||t>23)throw new Error("Invalid hour for notification");var n=Date.now(),i=new Date(n).getDay(),a=new Date(n).getHours(),s=e,r=t;if(i===s&&a>=r){var o=3600*(168-a+r);if(o>604800)throw new Error("Notification delay time is more than 7 days");return o}var c=s<i?7-i+s:s-i;r<a&&c--;var h=3600*(24*c+(r<a?24-a+r:r-a));if(h>604800)throw new Error("Notification delay time is more than 7 days");return h},t.sendTestDailyNotificationInstance=function(){var e=(0,r.Z)(u().mark((function e(t){var n,i,a,s;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n={0:"SUNDAY",1:"MONDAY",2:"TUESDAY",3:"WEDNESDAY",4:"THURSDAY",5:"FRIDAY",6:"SATURDAY"},e.prev=1,a=Xg,!(t<0||t>6)){e.next=5;break}throw new Error("Invalid day for notification. Day must be between 0 (Sunday) and 6 (Saturday)");case 5:return a=null!=(i=Jg[n[t]])?i:Xg,s={message:a,delayTime:300,type:zg.Z.GENERIC_NOTIFICATION},e.next=9,window.game.facebook.sendNotificationAsync(s);case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1);case 14:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(t){return e.apply(this,arguments)}}(),e}();qg._instance=void 0;var Qg=qg,$g=GameCore.Configs,ef=$g.Match,tf=$g.Gameplay,nf=$g.Ads,af=$g.Tutorial,sf=$g.Network,rf=im.Z.OUT_OF_MOVES_BG,of=im.Z.TUTORIAL_BG,cf=function(e){function t(){for(var t,n,a=arguments.length,s=new Array(a),o=0;o<a;o++)s[o]=arguments[o];return(n=e.call.apply(e,A()(t=[this]).call(t,s))||this).backgroundMask=void 0,n.lastTimeInputEnabled=0,n.header=void 0,n.main=void 0,n.footer=void 0,n.animDice=void 0,n.outOfMoveLabel=void 0,n.isGameOver=void 0,n.isGameReplay=void 0,n.isGameScoreReached=void 0,n.tutorialManager=void 0,n.animTintBackground=void 0,n.scoreTween=void 0,n.levelManager=void 0,n.isTutorialRunning=!1,n.run=function(){n.backgroundMask.setVisible(!1),n.ads.showBannerAdAsync().catch((function(e){})),n.checkAndAddShortcut(),n.updateSoundIcon();var e=n.storage.getState(),t=n.player.getPlayerId(),i=tr(e).playerId,a=ir(e,{playerId:t}),s=ar(e,{opponentId:i});a&&s?n.screen.open(ba.o4.GAME_OVER_SCREEN):(n.restartGame(),n.startGame())},n.create=function(){e.prototype.create.call((0,Ga.Z)(n)),n.createBackground(na.Z.BACKGROUND.KEY),n.createBackgroundMask(),n.createTutorialManager(),n.createLevelManager(),n.createHeader(),n.createMain(),n.createFooter(),n.createAnimDice(),n.createOutOfMove(),n.createScreens(),n.listenEvents(),n.preLoadAds(),n.input.setTopOnly(!0)},n.handleUpdateStatusSound=function(){var e=n.player.getPlayerSettings().sound;n.header.updateButtonSoundByStatus(e)},n.handleClickSound=function(){var e=!n.player.getPlayerSettings().sound;n.header.updateButtonSoundByStatus(e),n.player.setSetting("sound",e)},n.rescued=function(){var e=n.getLevelLogInfo(),t=e.level,i=e.score,a=e.levelName;n.analytics.levelRescue(t,i,a),n.isGameOver=!1,n.audio.playMusic(),n.main.board.rescue(),n.backgroundMask.setVisible(!1),n.game.globalScene.requestBackgroundMaskUpdate(rf,0),n.header.enableItems(),n.footer.enableItems()},n.replay=function(){n.isGameReplay=!0,n.restartGame(),n.startGame(),n.input.once(Phaser.Input.Events.POINTER_DOWN,(function(){n.isGameReplay=!1,n.input.off(Phaser.Input.Events.POINTER_DOWN)}))},n.handleCloseBannerAds=function(){n.ads.hideBannerAdAsync().catch((function(e){}))},n.handleShowInterstitialAd=(0,r.Z)(u().mark((function e(){var t,a,s;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=n.game,a=t.globalScene,s=t.lang,e.prev=1,n.audio.muteAll(),n.audio.pauseMusic(),n.ads.canbeShowInterstitialAd()){e.next=6;break}return e.abrupt("return");case 6:return a.screen.open(ba.o4.NOTIFY_SCREEN,{message:s.Text.LOADING_AD,duration:sf.Timeout,loading:!0}),e.next=9,n.ads.showInterstitialAdAsync();case 9:n.analytics.showInterstitialAd(n.getSceneName()),e.next=15;break;case 12:return e.prev=12,e.t0=e.catch(1),e.abrupt("return");case 15:return e.prev=15,a.screen.close(ba.o4.NOTIFY_SCREEN),n.audio.unmuteAll(),n.audio.playMusic(),n.ads.preloadInterstitialAdAsync().catch(i.tO),e.finish(15);case 21:case"end":return e.stop()}}),e,null,[[1,12,15,21]])}))),n}(0,o.Z)(t,e);var n=t.prototype;return n.preload=function(){var e=this;this.events.on(Phaser.Scenes.Events.WAKE,this.run),this.events.on(Phaser.Scenes.Events.CREATE,this.run),this.events.on(Phaser.Scenes.Events.SLEEP,(function(){e.handleCloseBannerAds(),e.handleResetBackgroundMask()}))},n.handleResetBackgroundMask=function(){var e=this.game.globalScene;e.requestBackgroundMaskUpdate(rf,0),e.requestBackgroundMaskUpdate(of,0)},n.createBackgroundMask=function(){var e=this.background,t=e.width,n=e.height;this.backgroundMask=this.add.rectangle(0,0,t,n,0,1),this.backgroundMask.setOrigin(0,0),this.backgroundMask.setVisible(!1)},n.preLoadAds=function(){this.ads.preloadInterstitialAdAsync().catch((function(e){})),this.ads.preloadRewardedVideoAsync().catch((function(e){}))},n.createLevelManager=function(){this.levelManager=new cg},n.createHeader=function(){this.header=new cd(this),this.header.buttonSound.onClick=this.handleClickSound.bind(this),this.header.buttonSetting.onClick=this.openSettingScreen.bind(this),Phaser.Display.Align.In.TopCenter(this.header,this.gameZone)},n.createMain=function(){this.main=new Tu(this),Phaser.Display.Align.In.Center(this.main,this.gameZone)},n.createFooter=function(){this.footer=new Jd(this)},n.createAnimDice=function(){this.animDice=new np(this)},n.createTutorialManager=function(){this.tutorialManager=new um(this)},n.openSettingScreen=function(){this.screen.open(ba.o4.SETTINGS_SCREEN)},n.runAnimTintBackground=function(){var e=this;this.animTintBackground=this.tweens.add({targets:this.backgroundMask,alpha:.55,duration:300,paused:!0,onStart:function(){e.backgroundMask.setAlpha(0),e.backgroundMask.setVisible(!0)},onUpdate:function(){e.game.globalScene.requestBackgroundMaskUpdate(rf,e.backgroundMask.alpha)}}),this.animTintBackground.play()},n.createScreens=function(){this.createSettingScreen(),this.createRescueScreen(),this.createGameOverScreen(),this.createBestScoreScreen(),this.createReachedScoreScreen(),this.createTargetScoreScreen(),this.createLeaderBoardScreen()},n.createSettingScreen=function(){this.screen.add(ba.o4.SETTINGS_SCREEN,ag)},n.createOutOfMove=function(){this.outOfMoveLabel=new rp(this)},n.updateSoundIcon=function(){var e=this.player.getPlayerSettings().sound;this.header.updateButtonSoundByStatus(e)},n.startGame=function(){var e;this.audio.playSound(Ka.Z.START_GAME),this.enableInput(),this.header.enableItems(),this.footer.enableItems();var t=this.storage.getState(),n=Ds(t);if(this.tutorialManager.isValidForTutorial()||af.ForceUseTutorial)return this.isTutorialRunning=!0,this.handleStartTutorial(),void this.player.incUserGuideDisplays();n===aa?this.handleStartGameSingleMode():Rt()(e=[ra,sa,oa]).call(e,n)>=0&&this.handleStartGameFriendMode(),this.header.setVisible(!0),this.updateLevelManager(),this.updateProgressBar(),this.openTargetScoreScreen()},n.openTargetScoreScreen=function(){this.screen.open(ba.o4.TARGET_SCORE_SCREEN,{duration:1500,onClose:this.handleStartGame.bind(this)})},n.handleStartTutorial=function(){var e=window.game.player;e.getPlayerIsNew()&&e.setLogged(),this.analytics.event(Vt._.TUTORIAL_BEGIN),this.header.setVisible(!1),this.tutorialManager.start()},n.handleStartGame=function(){var e=this.getLevelLogInfo(),t=e.level,n=e.score,i=e.levelName;this.analytics.levelStart(t,n,i),this.footer.nextDice.handleNextDice(),this.footer.pieces.showDice(),this.footer.nextDice.handleNextDice()},n.getLevelName=function(){var e,t=this.levelManager.getCurrentIndex()+1;return"target_"+Gl()(e=GameCore.Utils.Number).call(e,t,4,"0")},n.handleStartGameSingleMode=function(){var e,t=this.storage.getState(),n=lr(t),i=n.score,a=n.bestScore,s=void 0===a?0:a,r=(null==(e=js(t))?void 0:e.data)||{};if(r){var o=r.fen,c=r.magnetAmount,h=void 0===c?0:c,l=r.magnetPercent,u=void 0===l?0:l,d=r.magnetScore,p=void 0===d?0:d;o&&this.main.board.exploreFen(o),this.header.showItemBySinglePlayMode(),this.header.setScoreSingle(i),this.header.setBestScore(s),this.header.setTargetScore(this.levelManager.getCurrentTargetScore()),this.footer.itemMagnet.updateAmountUsed(h),this.footer.itemMagnet.updateTotalScore(p),this.footer.itemMagnet.itemPercent.updatePercent(u)}},n.handleStartGameFriendMode=function(){this.header.setScoreMulti(0),this.updateLevelManager(),this.updateProgressBar(),this.header.showItemByFriendPlayMode()},n.updateLevelManager=function(){var e=this.header.getCurrentScoreByMode();this.levelManager.updateCurrentLevelByScore(e)},n.updateProgressBar=function(){var e=this.header.getCurrentScoreByMode(),t=this.levelManager.getCurrentTargetScore();this.header.setTargetScore(t),this.header.setPercent(e/t)},n.listenEvents=function(){fr.on(es.RESCUE,this.rescued),fr.on(es.REPLAY,this.replay),fr.on(es.GAME_OVER,this.handleGameOver.bind(this)),fr.on(Lc,this.handleUpdateStatusSound),fr.on("board_update_fen",this.updateMatchData.bind(this)),fr.on("handle_state_change",this.handleStateChange.bind(this))},n.getFen=function(){for(var e="",t=this.main.board.dataBoard,n=0;n<t.length;n++){for(var i=t[n],a="",s=0;s<i.length;s++){var r=i[s].value;a+=r||"x"}e+=(e?",":"")+a}return e},n.createRescueScreen=function(){this.screen.add(ba.o4.RESCUE_SCREEN,vp)},n.createGameOverScreen=function(){this.screen.add(ba.o4.GAME_OVER_SCREEN,Fm)},n.createBestScoreScreen=function(){this.screen.add(ba.o4.BEST_SCORE_SCREEN,Km)},n.createReachedScoreScreen=function(){this.screen.add(ba.o4.REACHED_SCORE_SCREEN,Tg)},n.createTargetScoreScreen=function(){this.screen.add(ba.o4.TARGET_SCORE_SCREEN,Cg)},n.createLeaderBoardScreen=function(){this.screen.add(ba.o4.LEADER_BOARD_SCREEN,Kg)},n.handleGameOver=function(){this.screen.open(ba.o4.GAME_OVER_SCREEN)},n.handleRequestFinishGame=function(){var e=this,t=this.storage.getState(),n=_s(t);this.time.addEvent({delay:tf.DelayFinishGame,callback:function(){e.enableInput(),n<ef.MaxRescueCount&&nf.Enabled?e.screen.open(ba.o4.RESCUE_SCREEN):e.endGame()}})},n.checkAnimPlaying=function(){var e=this.tweens.getAllTweens();return!(!e||0===e.length)},n.disableInput=function(){this.input.enabled=!1},n.enableInput=function(){this.input.enabled=!0},n.restartGame=function(){this.updateStateGameOver(!1),this.backgroundMask.setVisible(!1),this.game.globalScene.requestBackgroundMaskUpdate(rf,0),this.isGameOver=!1,this.isGameReplay=!1,this.isGameScoreReached=!1,this.animDice.stopAnimation(),this.footer.itemMagnet.animationMagnetItem.stopAnimation(),this.main.board.restart(),this.footer.nextDice.restart(),this.footer.pieces.restart(),this.footer.itemMagnet.restartItemMagnet(),this.header.restart()},n.endGame=function(){var e=this.getLevelLogInfo(),t=e.level,n=e.score,i=e.levelName;this.analytics.levelFail(t,n,i),this.restartGame(),this.storage.dispatch(qo()),this.handleShowInterstitialAd(),this.resetRescued()},n.handleAddScore=function(e){var t=this,n=this.header.getCurrentScoreByMode()+e;this.addScoreAnimation(e),this.storage.dispatch(Lo({score:n})),n>=this.levelManager.getCurrentTargetScore()&&(this.isGameScoreReached=!0,this.time.delayedCall(500,(function(){t.handleNextLevel()})))},n.handleNextLevel=function(){if(!this.isGameOver){var e=this.getLevelLogInfo(),t=e.level,n=e.score,i=e.levelName;this.analytics.levelComplete(t,n,i);var a=this.header.getCurrentScoreByMode();this.levelManager.updateCurrentLevelByScore(a),this.screen.open(ba.o4.REACHED_SCORE_SCREEN,{duration:3e3,onClose:this.onCloseReachedScoreScreen.bind(this)})}},n.onCloseReachedScoreScreen=function(){var e=this;this.isGameScoreReached=!1,this.header.restart(),this.updateProgressBar(),this.screen.open(ba.o4.TARGET_SCORE_SCREEN,{duration:1500,onClose:function(){e.handleShowInterstitialAd()}})},n.addScoreAnimation=function(e){var t=this,n=this.header.getCurrentScoreByMode();this.scoreTween=this.tweens.addCounter({from:0,to:e,duration:300,onUpdate:function(e){var i=Math.floor(e.getValue());t.header.setCurrentScoreByMode(i+n),t.updateProgressBar()}})},n.updateMatchData=function(){if(!this.isGameOver){var e=this.getFen(),t=this.storage.getState(),n=js(t).data||{};if(Ds(t)===aa){var i=Js(t),a=lr(t).score,r=void 0===a?0:a,o=this.footer.itemMagnet.itemPercent.percent,c=this.footer.itemMagnet.amountUsed,h=this.footer.itemMagnet.totalScore,l=_s(t);this.storage.dispatch(vo(i,{score:r,rescued:l,data:(0,s.Z)({},n,{fen:e,magnetPercent:o,magnetAmount:c,magnetScore:h}),updateAt:Date.now()}))}}},n.clearFen=function(){var e=this.storage.getState(),t=js(e).data||{};if(Ds(e)===aa){var n=Js(e);this.storage.dispatch(vo(n,{score:0,data:(0,s.Z)({},t,{fen:"",magnetPercent:0,magnetAmount:0,magnetScore:0}),updateAt:Date.now()}))}},n.updateStateGameOver=function(e){this.isGameOver=e},n.update=function(e){this.input.enabled,this.input.enabled||this.checkAnimPlaying()?this.lastTimeInputEnabled=e:e-this.lastTimeInputEnabled>=3e3&&(this.input.enabled=!0,this.lastTimeInputEnabled=e)},n.checkAndAddShortcut=function(){if(!this.game.player.getPlayer().isUserNew){var e=this.storage.getState();la(e)!=oa&&this.facebook.attemptToAddShortcut()}},n.getLevelLogInfo=function(){return{level:this.levelManager.getCurrentIndex()+1,score:this.header.getCurrentScoreByMode(),levelName:this.getLevelName()}},n.resetRescued=function(){this.storage.dispatch((function(e,t){e({type:Dn,payload:{}});var n=t(),i=js(n);if(Bo){var a={};a[Go.SingleMatchStore]=(0,s.Z)({},i,{rescued:0}),window.FBInstant.player.setDataAsync(a)}Pe(Go.SingleMatchStore,{rescued:0})}))},n.sendTestDailyNotification=function(e){Qg.sendTestDailyNotification(e)},t}(nc.Z);var hf=cf,lf=n(458),uf=function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).name="LoadResourceFail",i.message=t||"Load resource fail",i.payload=n,i}return(0,o.Z)(t,e),t}((0,w.Z)(Error)),df=[{id:"pass-levels",title:"Pass 10 score goals",require:{level:10},reward:{diamond:100},logo:"dailyMission/logo-cup"},{id:"collect-diamonds",title:"Collect 300 coins",require:{diamond:300},reward:{diamond:100},logo:"dailyMission/logo-coin"},{id:"invite-friends",title:"Invite 2 friends",require:{friend:2},reward:{diamond:200},logo:"dailyMission/logo-invite"},{id:"reach-score",title:"Reach total scores",require:{score:1e5},reward:{diamond:1e3},logo:"dailyMission/logo-note"}],pf=function(){var e=(0,r.Z)(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",df);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),mf=(0,Q.P1)([function(e){var t;return null==(t=e[bi])?void 0:t.tasks}],(function(e){return e})),gf=(0,Q.P1)([function(e){var t;return null==(t=e[bi])?void 0:t.process}],(function(e){return e})),ff=(0,Q.P1)([function(e){var t;return null==(t=e[bi])?void 0:t.isRequesting}],(function(e){return e})),Ef=((0,Q.P1)([function(e){var t;return null==(t=e[bi])?void 0:t.isNotice}],(function(e){return e})),GameCore.Configs.DailyTasks),vf=function(e){return function(t){t({type:Di,payload:{tasks:e}});var n=window.game.player.getCustomData("dailyTasks")||{},i=n.startedTime,a=void 0===i?0:i,s=n.logTasks,r=void 0===s?{}:s;t((Date.now()-a)/1e3>Ef.Duration?Sf(e):Af(r))}},Sf=function(e){return function(t){var n={};e.forEach((function(e){var t=e.id,i=e.require;n[t]={},H()(i).forEach((function(e){var i;n[t]=((i={})[e]=0,i.rewarded=!1,i)}))})),window.game.player.setCustomData("dailyTasks",{logTasks:n,startedTime:Date.now()}),t(Af(n)),fr.emit(zs.EVENTS.TASKS_RESET)}},Af=function(e){return{type:_i,payload:{process:e}}},Tf=n(134),yf=n.n(Tf),If=function(){var e=(window.game.player.getCustomData("dailyTasks")||{}).logTasks;return GameCore.Utils.Json.clone(e)},Cf=function(){function e(e,t){var n=this;this.game=void 0,this.id=void 0,this.taskData=void 0,this.requireTypes=void 0,this.process=function(e){var t,i=e.type,a=e.value;if(!(a<1)&&(-1!==Rt()(t=n.requireTypes).call(t,i)&&!n.isPassRequiredTarget(i)&&n.processMore(e))){i=e.type,a=e.value;var s=n.getCorrectValue(i,a);n.game.storage.dispatch(function(e,t,n){return function(i){var a=If();if(GameCore.Utils.Valid.isObject(a)){var s=a;GameCore.Utils.Object.hasOwn(s,e)&&(s[e].rewarded||(s[e][t]+=n,window.game.player.setCustomData("dailyTasks",{logTasks:s}),i({type:wi,payload:{id:e,type:t,value:n}})))}}}(n.id,i,s)),n.isTaskFinished(i)&&n.game.storage.dispatch(function(e){return function(t){t({type:Pi,payload:{id:e}}),fr.emit(zs.EVENTS.NOTICE_UPDATE)}}(n.id))}},this.game=e,this.id=t,this.init()}var t=e.prototype;return t.init=function(){var e=this,t=this.game.storage.getState(),n=mf(t)||[];if(!((null==n?void 0:n.length)<1)){var i=null==n?void 0:yf()(n).call(n,(function(t){return t.id===e.id}));i&&(this.taskData=i,this.requireTypes=H()(this.taskData.require),this.initEvents())}},t.getDataByType=function(e){var t=this.game.storage.getState(),n=gf(t),i={value:0,target:0};if(!n)return i;if(!GameCore.Utils.Object.hasOwn(n,this.taskData.id))return i;var a=n[this.taskData.id];if(GameCore.Utils.Valid.isObject(a)&&GameCore.Utils.Object.hasOwn(a,e)){var s=a[e];"number"===typeof s&&(i.value=s)}return i.target=this.taskData.require[e]||0,i},t.getCorrectValue=function(e,t){var n=this.getDataByType(e),i=n.value,a=n.target,s=t;return i+t>a&&(s=a-i),Math.round(s)},t.isPassRequiredTarget=function(e){var t=this.getDataByType(e);return t.value>=t.target},t.isTaskFinished=function(e){var t=this.getDataByType(e);return t.value>=t.target},e}(),Of=Cf,bf=zs.COLLECT_DIAMONDS,Rf=bf.ID,Df=bf.EVENTS,_f=function(e){function t(t){return e.call(this,t,Rf)||this}(0,o.Z)(t,e);var n=t.prototype;return n.initEvents=function(){fr.off(Df.COLLECT_DIAMONDS,this.process),fr.on(Df.COLLECT_DIAMONDS,this.process)},n.processMore=function(){return!0},t}(Of),wf=_f,Pf=zs.INVITE_FRIENDS,xf=Pf.ID,kf=Pf.EVENTS,Mf=function(e){function t(t){var n;return(n=e.call(this,t,xf)||this).invitedFriends=void 0,n.resetData=function(){n.invitedFriends=[]},n.resetData(),n}(0,o.Z)(t,e);var n=t.prototype;return n.initEvents=function(){var e=this;fr.off(kf.INVITED_FRIEND,this.process),fr.on(kf.INVITED_FRIEND,this.process),fr.on(zs.EVENTS.TASKS_RESET,(function(){e.resetData()}))},n.processMore=function(e){var t,n=e.opponentId;return!!n&&(-1===Rt()(t=this.invitedFriends).call(t,n)&&(this.invitedFriends.push(n),!0))},t}(Of),Lf=Mf,Nf=zs.PASS_LEVELS,Gf=Nf.ID,Bf=Nf.EVENTS,Ff=function(e){function t(t){return e.call(this,t,Gf)||this}(0,o.Z)(t,e);var n=t.prototype;return n.initEvents=function(){fr.off(Bf.PASS_LEVEL,this.process),fr.on(Bf.PASS_LEVEL,this.process)},n.processMore=function(){return!0},t}(Of),Uf=Ff,Hf=zs.REACH_SCORE,Vf=Hf.ID,Yf=Hf.EVENTS,Zf=function(e){function t(t){var n;return(n=e.call(this,t,Vf)||this).totalScore=void 0,n.lastUpdate=void 0,n.totalScore=0,n.lastUpdate=Date.now(),n}(0,o.Z)(t,e);var n=t.prototype;return n.initEvents=function(){fr.off(Yf.ADD_SCORE,this.process),fr.on(Yf.ADD_SCORE,this.process)},n.processMore=function(e){var t=e.value,n=Date.now();return n-this.lastUpdate<3e3?(this.totalScore+=t,!1):(e.value+=this.totalScore,this.totalScore=0,this.lastUpdate=n,!0)},t}(Of),Wf=Zf,Kf=function(){function e(e){var t=this;this.game=void 0,this.eventsListener=void 0,this.init=(0,r.Z)(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.eventsListener={},e.next=3,t.initData();case 3:t.initEvents();case 4:case"end":return e.stop()}}),e)}))),this.initData=(0,r.Z)(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.game.storage.dispatch(function(){var e=(0,r.Z)(u().mark((function e(t,n){var i,a;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=n(),!ff(i)){e.next=4;break}return e.abrupt("return");case 4:return t({type:Ri,payload:{}}),e.next=7,pf();case 7:a=e.sent,t(vf(a));case 9:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}());case 2:case"end":return e.stop()}}),e)}))),this.game=e,this.init()}var t=e.prototype;return t.getEventListener=function(e){return this.eventsListener[e]},t.initEvents=function(){this.eventsListener[zs.PASS_LEVELS.ID]=new Uf(this.game),this.eventsListener[zs.REACH_SCORE.ID]=new Wf(this.game),this.eventsListener[zs.INVITE_FRIENDS.ID]=new Lf(this.game),this.eventsListener[zs.COLLECT_DIAMONDS.ID]=new wf(this.game)},e}(),zf=Kf,Xf=[{name:"collect-red-gems",id:"collect-gems",require:{red:5},reward:50},{name:"collect-blue-gems",id:"collect-gems",require:{blue:5},reward:50},{name:"collect-pink-gems",id:"collect-gems",require:{pink:5},reward:50},{name:"collect-green-gems",id:"collect-gems",require:{green:5},reward:50},{name:"collect-yellow-gems",id:"collect-gems",require:{yellow:5},reward:50},{name:"collect-red-blue-gems",id:"collect-gems",require:{red:5,blue:5},reward:120},{name:"collect-red-pink-gems",id:"collect-gems",require:{red:5,pink:5},reward:120},{name:"collect-red-green-gems",id:"collect-gems",require:{red:5,green:5},reward:120},{name:"collect-red-yellow-gems",id:"collect-gems",require:{red:5,yellow:5},reward:120},{name:"collect-blue-pink-gems",id:"collect-gems",require:{blue:5,pink:5},reward:120},{name:"collect-blue-green-gems",id:"collect-gems",require:{blue:5,green:5},reward:120},{name:"collect-blue-yellow-gems",id:"collect-gems",require:{blue:5,yellow:5},reward:120},{name:"collect-pink-green-gems",id:"collect-gems",require:{pink:5,green:5},reward:120},{name:"collect-pink-yellow-gems",id:"collect-gems",require:{pink:5,yellow:5},reward:120},{name:"collect-green-yellow-gems",id:"collect-gems",require:{green:5,yellow:5},reward:120},{name:"collect-red-blue-pink-gems",id:"collect-gems",require:{red:5,blue:5,pink:5},reward:210},{name:"collect-red-blue-green-gems",id:"collect-gems",require:{red:5,blue:5,green:5},reward:210},{name:"collect-red-blue-yellow-gems",id:"collect-gems",require:{red:5,blue:5,yellow:5},reward:210},{name:"collect-red-pink-green-gems",id:"collect-gems",require:{red:5,pink:5,green:5},reward:210},{name:"collect-red-pink-yellow-gems",id:"collect-gems",require:{red:5,pink:5,yellow:5},reward:210},{name:"collect-red-green-yellow-gems",id:"collect-gems",require:{red:5,green:5,yellow:5},reward:210},{name:"collect-blue-pink-green-gems",id:"collect-gems",require:{blue:5,pink:5,green:5},reward:210},{name:"collect-blue-pink-yellow-gems",id:"collect-gems",require:{blue:5,pink:5,yellow:5},reward:210},{name:"collect-blue-green-yellow-gems",id:"collect-gems",require:{blue:5,green:5,yellow:5},reward:210},{name:"collect-pink-green-yellow-gems",id:"collect-gems",require:{pink:5,green:5,yellow:5},reward:210}],jf=function(){var e=(0,r.Z)(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Xf);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Jf=(0,Q.P1)([function(e){var t;return null==(t=e[Si])?void 0:t.missions}],(function(e){return e})),qf=(0,Q.P1)([function(e){var t;return null==(t=e[Si])?void 0:t.isRequesting}],(function(e){return e})),Qf=((0,Q.P1)([Jf,function(e,t){return t.name}],(function(e,t){return e?"string"!==typeof t?null:GameCore.Utils.Object.hasOwn(e,t)?e[t]:null:null})),function(e){return{type:Ti,payload:{missions:e}}}),$f={TYPES:{COLLECT_GEMS:"collect-gems",USE_ITEM:"use-item",COMBO:"combo"},EVENTS:{MISSION_START:"mission-start",MISSION_UPDATE:"mission-update",MISSION_FAILED:"mission-failed",MISSION_COMPLETED:"mission-completed"}},eE=(0,Q.P1)([function(e){var t;return null==(t=e[Si])?void 0:t.mission}],(function(e){return e})),tE=((0,Q.P1)([eE],(function(e){return e?e.name:null})),function(){function e(e,t,n){var i=this;this.game=void 0,this.id=void 0,this.name=void 0,this.reward=void 0,this.process=function(e){var t=e.id,n=e.type,a=e.value;a<1||i.id===t&&i.isTypeRequired(n)&&i.processMore(e)&&(i.game.storage.dispatch(function(e,t,n){return{type:yi,payload:{name:e,type:t,value:n}}}(i.name,n,a)),i.isMissionComplete()&&(fr.emit($f.EVENTS.MISSION_COMPLETED,{name:i.name,reward:i.reward}),i.game.storage.dispatch(function(e){return{type:Ii,payload:{name:e}}}(i.name))))},this.id=t,this.name=n,this.game=e}var t=e.prototype;return t.start=function(){var e=this.game.storage.getState(),t=eE(e);t&&t.name===this.name&&(this.reward=t.reward,this.initEvents())},t.getMissionData=function(){var e=this.game.storage.getState(),t=eE(e);return t?t.name!==this.name?null:t:null},t.getDataByType=function(e){var t=this.getMissionData();if(!t)return null;var n=t.require[e];return{value:t.process[e],target:n}},t.isTypeRequired=function(e){var t=this.getDataByType(e);return!!t&&t.target>0},t.isMissionComplete=function(){var e=this.getMissionData();if(!e)return!0;var t=e.require,n=e.process,i=!0;return H()(t).forEach((function(e){if(i){var a=t[e];n[e]<a&&(i=!1)}})),i},e}()),nE=tE,iE=$f.EVENTS,aE=$f.TYPES,sE=function(e){function t(t,n){return e.call(this,t,aE.COLLECT_GEMS,n)||this}(0,o.Z)(t,e);var n=t.prototype;return n.initEvents=function(){fr.off(iE.MISSION_UPDATE,this.process),fr.on(iE.MISSION_UPDATE,this.process)},n.processMore=function(){return!0},t}(nE),rE=sE,oE=$f.EVENTS,cE=$f.TYPES,hE=function(e){function t(t,n){return e.call(this,t,cE.COMBO,n)||this}(0,o.Z)(t,e);var n=t.prototype;return n.initEvents=function(){fr.off(oE.MISSION_UPDATE,this.process),fr.on(oE.MISSION_UPDATE,this.process)},n.processMore=function(e){var t=this.getMissionData();if(!t)return!1;var n=e.type;return e.value>=t.require[n]},t}(nE),lE=hE,uE=$f.EVENTS,dE=$f.TYPES,pE=function(e){function t(t,n){return e.call(this,t,dE.USE_ITEM,n)||this}(0,o.Z)(t,e);var n=t.prototype;return n.initEvents=function(){fr.off(uE.MISSION_UPDATE,this.process),fr.on(uE.MISSION_UPDATE,this.process)},n.processMore=function(e){return!0},t}(nE),mE=pE,gE=function(){function e(e){var t=this;this.game=void 0,this.listener=void 0,this.init=(0,r.Z)(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.initData();case 2:t.initListeners(),t.initEvents();case 4:case"end":return e.stop()}}),e)}))),this.initData=(0,r.Z)(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.game.storage.dispatch(function(){var e=(0,r.Z)(u().mark((function e(t,n){var i,a;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=n(),!qf(i)){e.next=4;break}return e.abrupt("return");case 4:return t({type:Ai,payload:{}}),e.next=7,jf();case 7:a=e.sent,t(Qf(a));case 9:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}());case 2:case"end":return e.stop()}}),e)}))),this.startListener=function(e){t.listener[e]&&t.listener[e].start()},this.game=e,this.init()}var t=e.prototype;return t.initListeners=function(){var e=this;this.listener={};var t=this.game.storage.getState(),n=Jf(t);n&&H()(n).forEach((function(t){switch(n[t].id){case $f.TYPES.COLLECT_GEMS:e.listener[t]=new rE(e.game,t);break;case $f.TYPES.COMBO:e.listener[t]=new lE(e.game,t);break;case $f.TYPES.USE_ITEM:e.listener[t]=new mE(e.game,t)}}))},t.initEvents=function(){fr.off($f.EVENTS.MISSION_START,this.startListener),fr.on($f.EVENTS.MISSION_START,this.startListener)},e}(),fE=gE,EE=function(e){try{var t=ha(e),n=window.game.player,i=t.entryPointData||{},a=i.playerId,s=i.playerName,r=i.playerPhoto;return n.getPlayer().playerId===a?ia:new Ve.Z(a,s,r).toObject()}catch(o){return ia}},vE=function(){return function(e){try{window.game.facebook.getTournamentAsync().then((function(t){var n=t.getID().toString();e(Ns(n))})).catch((function(e){})),e(Yo())}catch(t){}}},SE=function(){return function(e,t){try{var n=t(),i=ha(n),a=window.game.player,s=a.getPlayer(),r=i.contextId,o=(i.entryPointData||{}).playerId,c=s.playerId===o,h=EE(n);c||a.updateConnectedPlayers([h]);var l=h.playerId;e(zo(r,l,!0))}catch(u){throw new Error("processInviteMode: "+u)}}},AE=function(){return function(e,t){try{var n=t(),i=ha(n),a=window.game.player.getPlayer(),s=i.entryPointData||{},r=s.matchId,o=s.opponentId,c=s.playerId,h=a.playerId===c;e(Xo(r,h?o:c))}catch(l){throw new Error("processChallengeFriendMode: "+l)}}},TE=function(){return function(e,t){try{var n=t(),a=ha(n).entryPointData||{},o=a.playerId,c=a.playerScore;e(Mo(o,{score:c,level:0}));var h=EE(n);e(function(e){return function(){var t=(0,r.Z)(u().mark((function t(n){var a,s,r,o,c,h;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a=window.game,s=a.facebook,r=a.globalScene,o=a.analytics,c=a.lang,r.screen.open(ba.o4.NOTIFY_SCREEN,{message:c.Text.LOADING,loading:!0}),h=s.getContextID(),Fo({contextId:h}),o.event(Vt._.JOIN_GROUP,{group_id:h}),t.next=8,n($o(ra,e));case 8:t.next=17;break;case 10:if(t.prev=10,t.t0=t.catch(0),!(t.t0 instanceof $a)){t.next=14;break}return t.abrupt("return");case 14:if("INVALID_OPERATION"!==(null==t.t0?void 0:t.t0.code)){t.next=16;break}return t.abrupt("return");case 16:(0,i.tO)(t.t0);case 17:return t.prev=17,Ho(1e3),t.finish(17);case 20:case"end":return t.stop()}}),t,null,[[0,10,17,20]])})));return function(e){return t.apply(this,arguments)}}()}((0,s.Z)({},h,{score:c})))}catch(l){throw new Error("processMatchingGroupMode: "+l)}}},yE=function(){return function(e){try{e(Zo())}catch(t){throw new Error("processNewUserMode: "+t)}}},IE=n(455),CE={BACKGROUND:{KEY:"background",FILE:"./assets/music/bg_music.mp3"},EFFECTS:{button_click:"./assets/sounds/button_click.mp3",congratulation:"./assets/sounds/congratulation.mp3",daily_reward:"./assets/sounds/daily_reward.mp3",diamonds_drop:"./assets/sounds/diamonds_drop.mp3",diamonds_eat:"./assets/sounds/diamonds_eat.mp3",fireworks_big:"./assets/sounds/fireworks_big.mp3",fireworks_small:"./assets/sounds/fireworks_small.mp3",fireworks_soar:"./assets/sounds/fireworks_soar.mp3",game_over_scene:"./assets/sounds/game_over_scene.mp3",gem_drop:"./assets/sounds/gem_drop.mp3",gem_explosive_1:"./assets/sounds/gem_explosive_1.mp3",gem_explosive_2:"./assets/sounds/gem_explosive_2.mp3",gem_explosive_3:"./assets/sounds/gem_explosive_3.mp3",gem_explosive_4:"./assets/sounds/gem_explosive_4.mp3",gem_explosive_5:"./assets/sounds/gem_explosive_5.mp3",gem_explosive_6:"./assets/sounds/gem_explosive_6.mp3",gem_explosive_freeze:"./assets/sounds/gem_explosive_freeze.mp3",gem_falling:"./assets/sounds/gem_falling.mp3",gift_charge:"./assets/sounds/gift_charge.mp3",gift_explode:"./assets/sounds/gift_explode.mp3",gift_reveal:"./assets/sounds/gift_reveal.mp3",item_active_ambience:"./assets/sounds/item_active_ambience.mp3",mission_completed:"./assets/sounds/mission_completed.mp3",mission_reward:"./assets/sounds/mission_reward.mp3",move_wrong:"./assets/sounds/move_wrong.mp3",popup_off:"./assets/sounds/popup_off.mp3",popup_show:"./assets/sounds/popup_show.mp3",score_counter:"./assets/sounds/score_counter.mp3",start_game:"./assets/sounds/start_game.mp3",start_level:"./assets/sounds/start_level.mp3",use_hammer:"./assets/sounds/use_hammer.mp3",use_paint:"./assets/sounds/use_paint.mp3",use_shuffle:"./assets/sounds/use_shuffle.mp3",you_lose:"./assets/sounds/you_lose.mp3",you_win:"./assets/sounds/you_win.mp3"}},OE=GameCore.Configs.Notification.ApiUrl,bE=function(){var e=(0,r.Z)(u().mark((function e(t){var n,i;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.playerId,e.next=3,(0,xe.v)("players/"+n,t,{},OE,10);case 3:return i=e.sent,e.abrupt("return",(null==i?void 0:i.data)||{});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),RE=GameCore.Configs,DE=RE.AppId,_E=RE.Notification,wE=function(e){function t(){for(var t,n,i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];return(n=e.call.apply(e,A()(t=[this]).call(t,a))||this).isMusicLoaded=!1,n.handleFBInstantGameStarted=function(){window.__fbGameReady=!0,window.__fbPlatform=FBInstant.getPlatform(),n.player.requestConnectedPlayers()},n.processAfterUpdatePlayerProfile=function(){_E.Enable&&(n.updatePlayerProfileToNotificationService(),_E.DisableSendNotification||(Qg.sendNewUserNotification(),Qg.sendDailyNotification()))},n.startGame=function(){n.analytics.event(Vt._.APP_READY),n.storage.dispatch((0,IE.I)(fa.C.LOAD_SCENE)),n.storage.dispatch((function(e,t){var n=window.game,i=n.player,a=n.analytics,s=n.globalScene;try{var r=t(),o=ha(r),c=la(r),h=i.getPlayer(),l=(o.entryPointData||{}).type;if(h.isUserNew&&a.event(Vt._.NEW_USER),c===oa)return void e(vE());if(c===sa){if(l===$i)return void e(SE());if(l===ea)return void e(AE())}if(c===ra)return void e(TE());if(h.isUserNew)return void e(yE());s.events.emit(fa.K.SWITCH,fa.C.DASHBOARD_SCENE)}catch(u){s.events.emit(fa.K.SWITCH,fa.C.DASHBOARD_SCENE)}}))},n.handleLoadMusicCompleted=function(){n.audio.initMusic(CE.BACKGROUND.KEY),!!n.game.player.getPlayerSetting("music")&&n.audio.playMusic()},n}(0,o.Z)(t,e);var n=t.prototype;return n.preload=function(){var e=this,t=this.getLangCode();this.facebook.progressLoading.loadingProgressFbLoadScene(),this.analytics.event(Vt._.SCREEN_OPEN,{screen_name:"LoadScene"}),this.load.on("progress",(function(t){e.facebook.progressLoading.onProgress(t)})),this.load.on(Phaser.Loader.Events.FILE_LOAD_ERROR,(function(e){var t=new uf("Load resources at LoadScene failed.");(0,i.R0)(t,{file:null==e?void 0:e.url})})),this.load.bitmapFont(Wa.Z.PRIMARY.KEY.replace(/(fonts)/g,"fonts"+t),Wa.Z.PRIMARY.TEXTURE.replace(/(fonts)/g,"fonts"+t),Wa.Z.PRIMARY.DATA.replace(/(fonts)/g,"fonts"+t)),this.load.bitmapFont(Wa.Z.DARK.KEY,Wa.Z.DARK.TEXTURE.replace(/(fonts)/g,"fonts"+t),Wa.Z.DARK.DATA.replace(/(fonts)/g,"fonts"+t)),this.load.bitmapFont(Wa.Z.NUMBER_DARK.KEY,Wa.Z.NUMBER_DARK.TEXTURE,Wa.Z.NUMBER_DARK.DATA),this.load.bitmapFont(Wa.Z.NUMBER_YELLOW.KEY,Wa.Z.NUMBER_YELLOW.TEXTURE,Wa.Z.NUMBER_YELLOW.DATA),this.load.image(na.Z.AVATAR.KEY,na.Z.AVATAR.FILE),this.load.image(na.Z.BACKGROUND.KEY,na.Z.BACKGROUND.FILE),this.load.multiatlas(Fa.Z.DEFAULT.KEY,Fa.Z.DEFAULT.JSON.replace(/{\w+}/g,t),Fa.Z.DEFAULT.URL.replace(/{\w+}/g,t)),this.load.atlas({key:Fa.Z.GAMEPLAY.KEY,textureURL:Fa.Z.GAMEPLAY.TEXTURE.replace(/{\w+}/g,t),atlasURL:Fa.Z.GAMEPLAY.JSON.replace(/{\w+}/g,t)}),this.load.atlas({key:Fa.Z.GAMEPLAY_32.KEY,textureURL:Fa.Z.GAMEPLAY_32.TEXTURE,atlasURL:Fa.Z.GAMEPLAY_32.JSON}),this.load.atlas({key:Fa.Z.EFFECTS.KEY,textureURL:Fa.Z.EFFECTS.PATH.replace(/{\w+}/g,t),atlasURL:Fa.Z.EFFECTS.JSON.replace(/{\w+}/g,t)}),this.load.atlas({key:Fa.Z.TUTORIAL.KEY,textureURL:Fa.Z.TUTORIAL.TEXTURE.replace(/{\w+}/g,t),atlasURL:Fa.Z.TUTORIAL.JSON.replace(/{\w+}/g,t)}),this.createBgElement(),this.player.updateData().then(this.processAfterUpdatePlayerProfile).catch(i.tO)},n.createBgElement=function(){var e=document.getElementById("background");e&&(e.style.display="block",e.style.backgroundImage="url("+na.Z.DESKTOP_BACKGROUND.FILE+")");var t=document.getElementById("app");t&&t.classList.remove("portrait")},n.create=function(){this.audio.initSound(),this.audio.importSoundEffectKeys(CE.EFFECTS),this.analytics.event(Vt._.LOAD_COMPLETE),this.facebook.on("startgame",this.handleFBInstantGameStarted),this.facebook.gameStarted(),this.initModules(),this.setupGlobalScene(),this.lazyLoadResource(),this.handleShowAdWhenStartGame(),this.startGame()},n.getLangCode=function(){var e="";switch(this.facebook.getLocale()){case"ru":e="/ru";break;case"pt":e="/pt";break;case"fr":e="/fr";break;case"hi":e="/hi";break;case"it":e="/it";break;case"id":e="/id";break;case"de":e="/de";break;case"ja":e="/ja";break;case"es":e="/es";break;case"zh":e="/zh";break;case"ar":e="/ar";break;case"tr":e="/tr"}return e},n.updatePlayerProfileToNotificationService=function(){var e=this.player.getPlayer(),t=e.playerId,n=e.name,i=e.photo,a=e.locale,s=e.ASID;bE({appId:DE,playerId:t,name:n,photo:i,locale:a,ASID:s})},n.setupGlobalScene=function(){var e=this.scene.get(fa.C.GLOBAL_SCENE);e instanceof lf.Z&&e.setup()},n.initModules=function(){new fE(this.game),new zf(this.game)},n.lazyLoadResource=function(){var e=this;setTimeout((function(){e.scene.wake(),e.loadSounds(),e.lazyLoadLevel(),e.load.once(Phaser.Loader.Events.COMPLETE,(function(){e.scene.sleep()}))}),1500)},n.lazyLoadLevel=function(){var e=(0,r.Z)(u().mark((function e(){var t;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,t=this.storage.getState(),0===cr(t)){e.next=5;break}return e.abrupt("return");case 5:return e.next=7,this.storage.dispatch(Po());case 7:this.loadLevelConfig(),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),(0,i.tO)(e.t0);case 13:case"end":return e.stop()}}),e,this,[[0,10]])})));return function(){return e.apply(this,arguments)}}(),n.loadLevelConfig=function(){var e=this.storage.getState(),t=cr(e),n=_a[t];if(n){var i=n.key,a=n.mapJson;this.cache.tilemap.exists(i)||(this.load.tilemapTiledJSON(i,a),this.load.start())}},n.loadSounds=function(){this.loadSoundEffects(),this.loadMusic()},n.loadSoundEffects=function(){var e=this;H()(CE.EFFECTS).forEach((function(t){e.load.audio(t,CE.EFFECTS[t])}))},n.loadMusic=function(){if(!this.isMusicLoaded){this.isMusicLoaded=!0;Phaser.Loader.Events.FILE_KEY_COMPLETE;this.load.audio(CE.BACKGROUND.KEY,CE.BACKGROUND.FILE),this.load.start()}},n.handleShowAdWhenStartGame=function(){var e=this;if(GameCore.Configs.Ads.InterstitialAdOptions.showWhenStartGame){var t={en:"Initializing...",ru:"\u0418\u043d\u0438\u0446\u0438\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u044f...",pt:"Inicializando...",es:"Inicializando...",ar:"\u062a\u0647\u064a\u0626\u0629...",hi:"\u092a\u094d\u0930\u093e\u0930\u0902\u092d \u0915\u0930 \u0930\u0939\u093e \u0939\u0948...",zh:"\u521d\u59cb\u5316\u4e2d...",tr:"Ba\u015flat\u0131l\u0131yor...",ja:"\u521d\u671f\u5316\u4e2d...",fr:"Initialisation en cours...",id:"Menginisialisasi...",de:"Initialisierung...",it:"Inizializzazione..."}[this.lang.getCurrentLanguage()||""]||"",n=document.createElement("div");n.id="wait-ads-mask";var a=document.createElement("div");a.id="wait-ads-content",n.appendChild(a);var s=document.createElement("div");s.id="wait-ads-dual-ring",a.appendChild(s);var o=document.createElement("div");o.id="wait-ads-text",o.innerHTML=t,a.appendChild(o),document.body.appendChild(n),this.audio.muteAll(),setTimeout((0,r.Z)(u().mark((function t(){return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,e.audio.stopMusic(),e.audio.muteAll(),t.next=5,e.ads.preloadInterstitialAdAsync();case 5:return t.next=7,e.ads.showInterstitialAdAsync();case 7:t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),(0,i.tO)(t.t0);case 12:return t.prev=12,n.remove(),e.audio.unmuteAll(),e.audio.playMusic(),t.finish(12);case 17:case"end":return t.stop()}}),t,null,[[0,9,12,17]])}))),0)}},t}(Phaser.Scene),PE=wE,xE=function(){function e(e){this.scene=void 0,this.currentLevel=void 0,this.scene=e,this.init()}var t=e.prototype;return t.init=function(){var e=this.scene.storage.getState(),t=cr(e)||1;this.currentLevel=t},t.setLevel=function(e){this.currentLevel=e},t.getLevel=function(){return this.currentLevel},t.getLevelConfig=function(){return _a[this.currentLevel]},t.getNextLevel=function(){return this.currentLevel+1},t.getNextLevelConfig=function(){return _a[this.currentLevel+1]},t.increaseLevel=function(){this.currentLevel++},e}(),kE=function(){function e(e){this.scene=void 0,this.map=void 0,this.scene=e,this.init()}var t=e.prototype;return t.init=function(){this.initMap()},t.initMap=function(){var e=this.scene.levelManager.getLevelConfig();this.map=this.scene.make.tilemap({key:e.key})},t.getTileMap=function(){return Ee()(this)},t.reloadMap=function(){var e,t=this.scene.levelManager.getLevelConfig();null==(e=Ee()(this))||e.destroy(),this.map=this.scene.make.tilemap({key:t.key})},e}(),ME=n(204),LE=n(618),NE=n.n(LE),GE=Fa.Z.GAMEPLAY_32.FRAME,BE=function(e){var t="";switch(e){case 1:t=GE.BIG_DICE_1;break;case 2:t=GE.BIG_DICE_2;break;case 3:t=GE.BIG_DICE_3;break;case 4:t=GE.BIG_DICE_4;break;case 5:t=GE.BIG_DICE_5;break;case 6:t=GE.BIG_DICE_6;break;case 7:t=GE.DICE_7;break;case 11:t=GE.DICE_11;break;case 12:t=GE.DICE_12;break;case 13:t=GE.DICE_13;break;case 14:t=GE.DICE_14;break;case 15:t=GE.DICE_15;break;case 16:t=GE.DICE_16;break;case 21:t=GE.DICE_21;break;case 22:t=GE.DICE_22;break;case 23:t=GE.DICE_23;break;case 24:t=GE.DICE_24;break;case 25:t=GE.DICE_25;break;case 26:t=GE.DICE_26;break;case 31:t=GE.DICE_31;break;case 32:t=GE.DICE_32;break;case 33:t=GE.DICE_33;break;case 34:t=GE.DICE_34;break;case 35:t=GE.DICE_35;break;case 36:t=GE.DICE_36;break;default:t=GE.DICE_TRANSPARENT}return t},FE=function(e){var t=0;return 10<e&&e<20?t=e-10:20<e&&e<30?t=e-20:30<e&&e<40&&(t=e-30),t},UE=Fa.Z.GAMEPLAY,HE=UE.KEY,VE=UE.FRAME,YE=Fa.Z.GAMEPLAY_32.KEY,ZE=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n.imageGem=void 0,n.imageCheck=void 0,n.text=void 0,n.particle=void 0,n.emitter=void 0,n.currentPosition=void 0,n.imageGlow=void 0,n.tweenGlow=void 0,n.imageGlowCrop=void 0,n.tweenCropMaskTopDown=void 0,n.tweenCropMaskDownBottom=void 0,n.imageStar=void 0,n.tweenShowStar=void 0,n.tweenHideStar=void 0,n.tweenShowMe=void 0,n.scene=t,n.init(),n}(0,o.Z)(t,e);var n=t.prototype;return n.init=function(){this.createImageGem(),this.createImageCheck(),this.createText(),this.createParticle(),this.createEmitter(),this.createGlow(),this.createTweenGlow(),this.createGlowCrop(),this.createStar(),this.createTweenStar(),this.createTweenShowMe()},n.createImageGem=function(){this.imageGem=this.scene.make.image({key:YE}),this.imageGem.setWorldSize(22,22),this.add(this.imageGem),Phaser.Display.Align.In.Center(this.imageGem,this,0,-6.5)},n.createImageCheck=function(){this.imageCheck=this.scene.make.image({key:HE,frame:VE.ICON_CHECK}),this.imageCheck.setWorldSize(22,17),this.imageCheck.setVisible(!1),this.add(this.imageCheck),Phaser.Display.Align.In.Center(this.imageCheck,this.imageGem)},n.createText=function(){this.text=this.scene.make.bitmapText({font:Wa.Z.PRIMARY.KEY,size:this.scene.fontSize(20),origin:{x:.5,y:.5}}),this.add(this.text),Phaser.Display.Align.In.Center(this.text,this.imageGem,0,17)},n.createParticle=function(){this.particle=this.scene.add.particles(HE).setDepth(Oa.Z.ON_TOP)},n.createEmitter=function(){var e=1/this.scene.world.getPixelRatio();this.emitter=this.particle.createEmitter({on:!1,angle:{start:0,end:360,steps:8},frame:[VE.ICON_STAR],lifespan:1e3,quantity:1,scale:{start:e,end:0,ease:"Quart.easeIn"},speed:50})},n.createGlow=function(){this.imageGlow=this.scene.make.image({key:HE,frame:VE.VIOLET_GLOW}),this.imageGlow.setVisible(!1).setScale(0).setAlpha(0),this.add(this.imageGlow),Phaser.Display.Align.In.Center(this.imageGlow,this.imageGem)},n.createTweenGlow=function(){var e=this;this.tweenGlow=this.scene.tweens.add({targets:[this.imageGlow],paused:!0,scale:{from:0,to:.6},alpha:{from:0,to:1},delay:100,duration:600,onComplete:function(){e.imageGlow.setVisible(!1).setScale(0).setAlpha(0),e.playAnimMaskCrop(),e.playAnimStar()}})},n.createGlowCrop=function(){this.imageGlowCrop=this.scene.make.image({key:HE,frame:VE.MASK_SMALL}),this.imageGlowCrop.setVisible(!1),this.imageGlowCrop.setWorldSize(this.imageGem.displayWidth,this.imageGem.displayHeight),this.add(this.imageGlowCrop),Phaser.Display.Align.In.Center(this.imageGlowCrop,this.imageGem)},n.createStar=function(){this.imageStar=this.scene.make.image({key:HE,frame:VE.ICON_STAR_1}),this.imageStar.setVisible(!1).setScale(0).setAlpha(0),this.imageStar.setWorldSize(27,26),this.add(this.imageStar),Phaser.Display.Align.In.Center(this.imageStar,this.imageGem,-10,-10)},n.createTweenStar=function(){var e=this;this.tweenHideStar=this.scene.add.tween({paused:!0,targets:[this.imageStar],scale:{from:1,to:0},alpha:{from:1,to:0},delay:100,duration:500,onComplete:function(){e.imageStar.setVisible(!1).setScale(0).setAlpha(0)}}),this.tweenShowStar=this.scene.add.tween({paused:!0,targets:[this.imageStar],scale:{from:0,to:1},alpha:{from:0,to:1},delay:100,duration:500,onComplete:function(){e.tweenHideStar.play()}})},n.createTweenShowMe=function(){this.tweenShowMe=this.scene.add.tween({paused:!0,targets:[this],alpha:{from:0,to:1},duration:200})},n.cropTopDownImageGlow=function(){var e=this;if(!this.tweenCropMaskTopDown){var t=this.imageGlowCrop.displayHeight,n=this.imageGlowCrop.displayWidth,i=this.imageGlowCrop.scaleX,a=this.imageGlowCrop.scaleY;this.tweenCropMaskTopDown=this.scene.tweens.addCounter({from:0,to:1,delay:200,duration:300,paused:!0,onUpdate:function(s){var r=s.getValue(0)*t;e.imageGlowCrop.setCrop(0,0,n/i,r/a)},onComplete:function(){e.cropDownBottomImageGlow()}})}this.tweenCropMaskTopDown.play()},n.cropDownBottomImageGlow=function(){var e=this;if(!this.tweenCropMaskDownBottom){var t=this.imageGlowCrop.displayHeight,n=this.imageGlowCrop.displayWidth,i=this.imageGlowCrop.scaleX,a=this.imageGlowCrop.scaleY;this.tweenCropMaskDownBottom=this.scene.tweens.addCounter({from:0,to:1,delay:200,duration:300,paused:!0,onUpdate:function(s){var r=s.getValue(0)*t;e.imageGlowCrop.setCrop(0,r/a,n/i,t/a)}})}this.tweenCropMaskDownBottom.play()},n.playAnimStar=function(){this.imageStar.setVisible(!0),this.tweenShowStar.play()},n.playAnimMaskCrop=function(){this.imageGlowCrop.setVisible(!0).setCrop(0,0,0,0),this.cropTopDownImageGlow()},n.setFrame=function(e){this.imageGem.setFrame(e),this.imageGem.setWorldSize(22,22)},n.getFrame=function(){return this.imageGem.frame.name},n.setText=function(e,t){this.text.setText(e+" / "+t)},n.completeMission=function(){this.imageGem.setAlpha(.3),this.text.setAlpha(.3),this.imageCheck.setVisible(!0)},n.reset=function(){this.imageGem.setAlpha(1),this.text.setAlpha(1),this.imageCheck.setVisible(!1)},n.updateCurrentPosition=function(e){this.currentPosition=e},n.runAnimCollectionItem=function(){var e=this.scene.gameZone.width/2;this.imageGlow.setVisible(!0),this.tweenGlow.play(),this.emitter.explode(8,e+this.currentPosition.x,this.currentPosition.y-45)},n.playAnimShowMe=function(){this.setVisible(!0).setAlpha(0),this.tweenShowMe.play()},n.checkCollectionItem=function(){var e=this.text.text.split("/"),t=e[0],n=e[1];parseInt(t)>=parseInt(n)&&this.completeMission()},t}(Phaser.GameObjects.Container),WE=Fa.Z.GAMEPLAY,KE=WE.KEY,zE=WE.FRAME,XE=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n.target=void 0,n.targetKeys=[],n.jsonPosition={},n.jsonAmount={},n.jsonTarget={},n.jsonCollectItem={},n.background=void 0,n.listCollectItems=[],n.scene=t,n.createBackground(),n}(0,o.Z)(t,e);var n=t.prototype;return n.createBackground=function(){this.background=this.scene.make.image({key:KE,frame:zE.BG_GREEN_DARK}),this.background.setWorldSize(187,48),this.add(this.background),Phaser.Display.Align.In.Center(this.background,this,0,-1)},n.calcPosition=function(e){for(var t=[],n=200/(e+1),i=n*(e-1)/2,a=0;a<e;a++)t.push(n*a-i);return t},n.parseTargetToJson=function(){if(!(0,ME.isObject)(this.target))for(var e=JSON.parse(this.target),t=H()(e),n=this.calcPosition(t.length),i=0;i<t.length;i++){var a=t[i],s=BE(parseInt(a));this.targetKeys.push(s),this.jsonAmount[s]=0,this.jsonTarget[s]=e[a],this.jsonPosition[s]={x:n[i],y:68};var r=this.listCollectItems[i];r||(r=new ZE(this.scene),this.add(r),this.listCollectItems.push(r)),r.updateCurrentPosition(this.jsonPosition[s]),r.setVisible(!0),r.setX(n[i]),r.setFrame(s),r.setText(0,e[a]),this.jsonCollectItem[s]=r}},n.hideListCollectItems=function(){this.listCollectItems.forEach((function(e){e.setVisible(!1),e.reset()}))},n.showListCollectItems=function(){this.listCollectItems.forEach((function(e){e.reset(),e.playAnimShowMe()}))},n.showCollectItemByKey=function(e){var t,n=ge()(t=this.listCollectItems).call(t,(function(t){return t.getFrame()===e}));n&&0!==n.length&&(n[0].reset(),n[0].playAnimShowMe(),n[0].checkCollectionItem())},n.start=function(){this.parseTargetToJson()},n.setTargets=function(e){var t,n;this.target=NE()(t=NE()(n=NE()(e).call(e,"{",'{"')).call(n,", ",', "')).call(t,":",'":')},n.collectItem=function(e){if(e in this.jsonAmount){this.jsonAmount[e]++;var t=this.jsonAmount[e],n=this.jsonTarget[e];t===n&&this.jsonCollectItem[e].completeMission(),this.jsonCollectItem[e].setText(t,n)}},n.checkCompleteMission=function(){for(var e=H()(this.jsonTarget),t=0;t<e.length;t++){var n=e[t];if(this.jsonTarget[n]>this.jsonAmount[n])return!1}return!0},n.reset=function(){this.hideListCollectItems(),this.targetKeys=[],this.jsonAmount={},this.jsonTarget={},this.jsonCollectItem={},this.jsonPosition={}},n.getPositionCollectionItem=function(e){return this.jsonPosition[e]},n.getTargetKeys=function(){return this.targetKeys},n.getJsonAmount=function(){return this.jsonAmount},n.getJsonTarget=function(){return this.jsonTarget},n.getCollectItemByKey=function(e){return this.jsonCollectItem[e]},n.updateJsonAmountByFen=function(e){this.jsonAmount=JSON.parse(Ot()(e));for(var t=H()(this.jsonTarget),n=0;n<t.length;n++){var i=t[n],a=this.jsonCollectItem[i];this.jsonTarget[i]>this.jsonAmount[i]?a.reset():a.completeMission(),a.setText(this.jsonAmount[i],this.jsonTarget[i])}},t}(Phaser.GameObjects.Container),jE=Fa.Z.GAMEPLAY,JE=jE.KEY,qE=jE.FRAME,QE=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n.buttonSetting=void 0,n.buttonSound=void 0,n.collectItems=void 0,n.background=void 0,n.scene=t,n.setSize(n.scene.gameZone.width,60),t.add.existing((0,Ga.Z)(n)),n.createBackground(),n.createButtons(),n.createCollectItems(),n}(0,o.Z)(t,e);var n=t.prototype;return n.createBackground=function(){this.background=this.scene.make.image({key:JE,frame:qE.BG_HEADER}),this.background.setWorldSize(this.width,this.height),this.add(this.background),Phaser.Display.Align.In.Center(this.background,this)},n.createCollectItems=function(){this.collectItems=new XE(this.scene),this.add(this.collectItems),Phaser.Display.Align.In.Center(this.collectItems,this,0,0)},n.createButtons=function(){this.createButtonSound(),this.createButtonSetting()},n.createButtonSetting=function(){this.buttonSetting=new bu(this.scene),this.add(this.buttonSetting),Phaser.Display.Align.In.Center(this.buttonSetting,this.background,150,-2)},n.createButtonSound=function(){this.buttonSound=new Pu(this.scene),this.add(this.buttonSound),Phaser.Display.Align.In.Center(this.buttonSound,this.background,-150,-2)},n.updateButtonSoundByStatus=function(e){this.buttonSound.updateIconByStatus(e)},n.disableItems=function(){this.setAlpha(.2)},n.enableItems=function(){this.setAlpha(1)},n.start=function(){switch(this.scene.targetMissionManager.getTargetType()){case"score":this.targetScore();break;case"collect":this.targetCollect()}},n.targetScore=function(){var e=parseInt(this.scene.targetMissionManager.getTargetValue());(0,ME.isArray)(e)||this.collectItems.setVisible(!1)},n.targetCollect=function(){this.collectItems.reset();var e=this.scene.targetMissionManager.getTargetValue();this.collectItems.setTargets(e),this.collectItems.setVisible(!0),this.collectItems.start()},n.restart=function(){this.collectItems.reset()},t}(Phaser.GameObjects.Container),$E=QE,ev=Fa.Z.GAMEPLAY,tv=ev.KEY,nv=ev.FRAME,iv=Fa.Z.GAMEPLAY_32,av=iv.KEY,sv=iv.FRAME,rv=Wl()(.3,-.6,.85,.07),ov=function(e){function t(t,n){var i;return(i=e.call(this,t,n.x,n.y,n.texture,n.frame||sv.DICE_TRANSPARENT)||this).props=void 0,i.customValue=void 0,i.tweenScaleDown=void 0,i.onComplete=void 0,i.particle=void 0,i.emitterExploreBubble=void 0,i.circleImage=void 0,i.tweenCircleImage=void 0,i.tweenJump=void 0,i.status=void 0,i.rateShaking=1,i.numberOfSpots=[],i.imageEffect=void 0,i.setWorldSize(n.width,n.height),i.props=n,n.inputEnabled&&i.setInteractive(),i.createCircleImage(),i.createImageEffect(),i.createTween(),i.createParticle(),i.createEmitterExploreBubble(),i.scene.add.existing((0,Ga.Z)(i)),i}(0,o.Z)(t,e);var n=t.prototype;return n.setCustomValue=function(e){this.customValue=e;var t=BE(e);this.setFrame(t),this.setWorldSize(this.props.width,this.props.height)},n.drawSpots=function(e){for(var t=FE(e),n=function(e){var t="";return 10<e&&e<20?t=GE.DOT_BLUE:20<e&&e<30?t=GE.DOT_RED:30<e&&e<40&&(t=GE.DOT_YELLOW),t}(e),i=0;i<t;i++){var a=this.numberOfSpots[i];a||(a=this.spawnSpots(n),this.numberOfSpots.push(a)),a.setVisible(!0),a.setDepth(this.depth+1)}},n.alignSpot=function(e){for(var t=function(e){var t=[{x:0,y:-1}];switch(e){case 1:t=[{x:0,y:-1}];break;case 2:t=[{x:12,y:-13},{x:-12,y:11}];break;case 3:t=[{x:12,y:-14},{x:0,y:-1},{x:-12,y:12}];break;case 4:t=[{x:-12,y:-14},{x:12,y:-14},{x:-12,y:12},{x:12,y:12}];break;case 5:t=[{x:-12,y:-14},{x:12,y:-14},{x:0,y:-1},{x:-12,y:12},{x:12,y:12}];break;case 6:t=[{x:-12,y:-14},{x:12,y:-14},{x:-12,y:-1},{x:12,y:-1},{x:-12,y:12},{x:12,y:12}]}return t}(FE(e)),n=0;n<t.length;n++){var i=t[n],a=this.numberOfSpots[n];Phaser.Display.Align.In.Center(a,this,i.x,i.y)}},n.spawnSpots=function(e){var t=this.scene.make.image({key:av,frame:e});return t.setWorldSize(13,12),t},n.resetSize=function(){this.setWorldSize(this.props.width,this.props.height)},n.createTween=function(){var e=this;this.tweenScaleDown=this.scene.add.tween({delay:250,paused:!0,targets:this,scale:0,duration:200,onComplete:function(){e.onComplete&&e.onComplete()}}),this.tweenCircleImage=this.scene.add.tween({paused:!0,targets:this.circleImage,scale:{from:0,to:1.5},alpha:{from:1,to:.5},duration:250,onComplete:function(){e.circleImage.setVisible(!1),e.circleImage.setScale(0)}}),this.tweenJump=this.scene.add.tween({paused:!0,targets:this,y:this.y-10,yoyo:!0,duration:300,onComplete:function(){e.onComplete&&e.onComplete()}})},n.createCircleImage=function(){this.circleImage=this.scene.make.image({x:this.x,y:this.y,key:tv,frame:nv.WHITE_CIRCLE_SMALL}),this.circleImage.setVisible(!1).setScale(0)},n.createImageEffect=function(){this.imageEffect=this.scene.make.image({x:this.x,y:this.y,key:av}),this.imageEffect.setVisible(!1)},n.createParticle=function(){this.particle=this.scene.add.particles(tv),this.particle.setDepth(9999999)},n.createEmitterExploreBubble=function(){var e=new Phaser.Geom.Circle(0,0,20);this.emitterExploreBubble=this.particle.createEmitter({name:"EmitterExploreBubble",x:this.x,y:this.y,frame:[nv.CIRCLE_1,nv.CIRCLE_2],speed:{min:20,max:55},scale:{start:1,end:.3},gravityY:-20,maxParticles:Phaser.Math.RND.between(5,20),on:!1,lifespan:{min:500,max:2e3},emitZone:{type:"edge",source:e}})},n.resetImageEffect=function(){this.imageEffect.setVisible(!1),this.imageEffect.setAlpha(1),this.imageEffect.setFrame(this.frame.name),this.imageEffect.setWorldSize(this.props.width,this.props.height),this.imageEffect.setPosition(this.x,this.y),this.imageEffect.setDepth(this.depth+1)},n.moveTo=function(e,t){var n=this,i=e.x,a=e.y,s=this.x,r=this.y,o=this.scale;this.scene.add.tween({x:i,y:a,scale:{from:o,to:o-.2},ease:rv,targets:this,onUpdate:function(e){e.getValue(2)},onComplete:function(){t&&t(),n.x=s,n.y=r,n.scale=o},duration:400})},n.rescue=function(e){var t=this;if(this.customValue){var n=this.scaleX,i=this.scaleY;this.onComplete=function(){t.setCustomValue(0),t.setScale(n,i),e&&e()},this.circleImage.setVisible(!0),this.tweenCircleImage.play(),this.emitterExploreBubble.dead=[],this.emitterExploreBubble.start(),this.tweenScaleDown.play()}},n.animationJump=function(e){this.onComplete=e,this.circleImage.setVisible(!0),this.tweenCircleImage.play(),this.emitterExploreBubble.dead=[],this.emitterExploreBubble.start(),this.tweenJump.play()},n.setStatus=function(e){this.status=e},n.playShaking=function(){this.status="SHAKING"},n.stopShaking=function(){this.status="",this.rotation=0},n.preUpdate=function(){"SHAKING"===this.status&&(this.rotation+=.03*this.rateShaking,this.rotation>.2&&(this.rateShaking=-1),this.rotation<-.2&&(this.rateShaking=1))},t}(Phaser.GameObjects.Image),cv=ov,hv=n(634),lv=n(468),uv=function(){function e(e){this.scene=void 0,this.tweenScaleUp=void 0,this.tweenScaleDown=void 0,this.tweenMoveTo=void 0,this.target=void 0,this.handleOnComplete=void 0,this.playing=void 0,this.path=void 0,this.scene=e,this.path=new Phaser.Curves.Path}var t=e.prototype;return t.runScaleUpAnimation=function(e,t){var n;null==(n=this.tweenScaleUp)||n.remove(),this.tweenScaleUp||(this.tweenScaleUp=new hv.Z({targets:[this.target],delay:e,duration:t,props:{scale:"+=0.05"}})),this.tweenScaleUp.play()},t.runScaleDownAnimation=function(e,t){var n;null==(n=this.tweenScaleDown)||n.remove(),this.tweenScaleDown||(this.tweenScaleDown=new lv.Z({targets:[this.target],delay:e,duration:t,props:{scale:"-=0.15"}})),this.tweenScaleDown.play()},t.runAnimMoveToPosition=function(e,t,n,i){var a=this;this.playing=!0;var s=this.target.x,r=this.target.y;this.path.startPoint=new Phaser.Math.Vector2(s,r);for(var o=Math.abs(n-s)/2,c=Math.abs(i-r),h=Phaser.Math.Between(1,2),l=[],u=1;u<4;u++){var d=-1;u%2==0&&(d=1);var p=(o-d*Phaser.Math.Between(o/4,o/3))*h,m=r-u*(c/4);l.push(new Phaser.Math.Vector2(p,m))}l.push(new Phaser.Math.Vector2(n,i)),this.path.splineTo(l),this.path.lineTo(n,i);var g=new Phaser.Curves.Spline(l);this.tweenMoveTo=this.scene.add.tween({delay:e,targets:this.path,t:{from:0,to:1},ease:"Sine.easeInOut",duration:t,onUpdate:function(e){var t=e.getValue(0),n=g.getPoint(t);a.target.setPosition(n.x,n.y)},onComplete:function(){a.playing=!1,a.handleOnComplete&&a.handleOnComplete()}})},t.runGemMoveToPosition=function(e,t,n,i){var a=this;this.playing=!0;var s=this.target.x,r=this.target.y;this.path.startPoint=new Phaser.Math.Vector2(s,r);for(var o=this.scene.gameZone.width/2,c=Math.abs(n-s)+o-50,h=Math.abs(i-r),l=[],u=1;u<4;u++){var d=-1;u%2==0&&(d=1);var p=1.5*(c-d*Phaser.Math.Between(c/8,c/7)),m=r-u*(h/4);l.push(new Phaser.Math.Vector2(p,m))}l.push(new Phaser.Math.Vector2(n,i)),this.path.splineTo(l),this.path.lineTo(n,i);var g=new Phaser.Curves.Spline(l);return this.tweenMoveTo=this.scene.add.tween({delay:e,targets:this.path,t:{from:0,to:1},ease:"Sine.easeInOut",duration:t,onUpdate:function(e){var t=e.getValue(0),n=1-t+.1,i=g.getPoint(t);a.target.setAlpha(n),a.target.setPosition(i.x,i.y)},onComplete:function(){a.playing=!1,a.handleOnComplete&&a.handleOnComplete()}}),this.tweenMoveTo},t.setTarget=function(e){this.target=e},(0,X.Z)(e,[{key:"onComplete",set:function(e){this.handleOnComplete=e}},{key:"isPlaying",get:function(){return this.playing}}]),e}(),dv=function(){function e(e){this.scene=void 0,this.listAnimCollectionItem=[],this.scene=e}var t=e.prototype;return t.handleShowEffect=function(e){for(var t=this,n=this.scene.header.collectItems.getTargetKeys(),i=this.scene.header.collectItems.getJsonAmount(),a=this.scene.header.collectItems.getJsonTarget(),s=0,r=function(){var r=n[o],c=ge()(e).call(e,(function(e){return BE(e.value)===r}));i[r]+c.length>=a[r]&&s++,t.showEffect(c)},o=0;o<n.length;o++)r();s===H()(a).length&&this.scene.setLevelCompleted(!0),this.scene.time.delayedCall(2e3,(function(){t.scene.handleCollectionItemsComplete()}))},t.showEffect=function(e){for(var t=this,n=e.length,i=this.scene.main.board.dataBoard,a=function(){var a=e[s],r=a.x,o=a.y,c=a.value,h=BE(c),l=i[o][r].dice,u=l.imageEffect,d=t.scene.gameZone.width/2,p=t.scene.header.collectItems.getPositionCollectionItem(h),m=d+p.x,g=p.y-24,f=t.getFreeAnim();l.resetImageEffect(),u.setVisible(!0),f.setTarget(u),f.onComplete=function(){(n--,u.setVisible(!1),t.scene.header.collectItems.collectItem(h),n<=0)&&(t.scene.header.collectItems.getCollectItemByKey(h).runAnimCollectionItem(),t.scene.updateMatchData())},f.runScaleUpAnimation(0,300),f.runScaleDownAnimation(450,400),f.runAnimMoveToPosition(700,Phaser.Math.Between(500,1e3),m,g)},s=0;s<n;s++)a()},t.getFreeAnim=function(){var e=new uv(this.scene);return this.listAnimCollectionItem.push(e),e},e}(),pv=dv,mv=Fa.Z.GAMEPLAY,gv=mv.KEY,fv=mv.FRAME,Ev=Fa.Z.GAMEPLAY_32,vv=Ev.KEY,Sv=Ev.FRAME,Av=GameCore.Configs.Board,Tv=Av.cols,yv=Av.rows,Iv=function(e){function t(t,n,i){var a;return(a=e.call(this,t)||this).scene=void 0,a.maxValueDice=1,a.initDice=[],a.amountTask=0,a.mainDiceMerged=void 0,a.diceMerged=[],a.lastDiceMerged=void 0,a.collectionEffect=void 0,a.pX=void 0,a.pY=void 0,a.diceSize=void 0,a.dataBoard=[],a.cellsHighlight=[],a.diceMergedHighlight=[],a.background=void 0,a.scene=t,a.setSize(n,i),a.collectionEffect=new pv(a.scene),a.init(),a}(0,o.Z)(t,e);var n=t.prototype;return n.init=function(){var e=this.scene.gameZone,t=e.width,n=e.height;this.pX=t/2,this.pY=n/2-54,this.createBackground(),this.initDataBoard(),this.listenEvents()},n.createBackground=function(){this.background=this.scene.make.image({key:gv,frame:fv.BG_BOARD}),this.background.setPosition(this.pX,this.pY),this.background.setWorldSize(this.width,this.height)},n.initDataBoard=function(){var e=this;this.initDice=[];var t=this.scene.gameZone.width,n=(t-this.width)/2+8,i=this.pY-this.height/2+8;this.diceSize=(this.width-16-2*(Tv+1))/Tv;for(var a=function(t){for(var a=[],s=i+e.diceSize/2+e.diceSize*t+1.8*(t+1),r=function(i){var r,o=n+e.diceSize/2+e.diceSize*i+2*(i+1),c=new cv(e.scene,{x:o,y:s,width:e.diceSize,height:e.diceSize,texture:vv,frame:Sv.DICE_TRANSPARENT});c.setVisible(!1);var h=ge()(r=e.initDice).call(r,(function(e){return e.x===i&&e.y===t})),l=(h[0]||{value:0}).value;h&&h.length>0&&(c.setCustomValue(l),c.setVisible(!0)),a.push({x:i,y:t,pX:o,pY:s,value:l,dice:c})},o=0;o<Tv;o++)r(o);e.dataBoard.push(a)},s=0;s<yv;s++)a(s)},n.listenEvents=function(){this.scene.events.on(Pc,this.handleMove.bind(this)),this.scene.events.on(wc,this.handleHighlight.bind(this)),this.scene.events.on(xc,this.handleRemoveHighlight.bind(this)),this.scene.events.on(kc,this.handleRemoveDiceMergedHighlight.bind(this)),this.scene.events.on(Mc,this.handleGameOver.bind(this))},n.handleRemoveDiceMergedHighlight=function(){for(var e=0;e<this.diceMergedHighlight.length;e++){this.diceMergedHighlight[e].setAlpha(1)}this.diceMergedHighlight=[]},n.handleHighlight=function(e){try{this.cellsHighlight=e;for(var t=0;t<e.length;t++){var n=e[t],i=n.x,a=n.y,s=this.dataBoard[a][i];s.dice.setVisible(!0),s.dice.setFrame(Sv.DICE_HIGHT_LIGHT),s.dice.resetSize();var r=this.getMergeDice(e[t]);if(r&&r.length>=2)for(var o=0;o<r.length;o++){var c=r[o].dice;this.diceMergedHighlight.push(c),c.setAlpha(.8)}}}catch(h){}},n.handleMove=function(e,t,n){this.cellsHighlight=e;try{for(var i=0;i<e.length;i++){var a=e[i],s=a.x,r=a.y,o=a.value,c=this.dataBoard[r][s];c.value=o,c.dice.setVisible(!0),c.dice.setCustomValue(o)}this.handleMergeDice(e[this.amountTask],t,n)}catch(h){}},n.handleMergeDice=function(e,t,n){var i=this;if(!this.scene.isGameReplay){if(!e){var a=this.calcScore(this.diceMerged,n);return 0===a?t&&t():this.runAnimAfterMerged(this.lastDiceMerged,a,t),this.diceMerged=[],this.cellsHighlight=[],void(this.amountTask=0)}var r=e.x,o=e.y,c=e.value,h=this.dataBoard[o][r],l=h.dice,u=c%10===7?7:c;h.value=u,l.setVisible(!0),l.setCustomValue(u);var d=this.getMergeDice(e);if(!d||d.length<=1)return this.amountTask++,void this.handleMergeDice(this.cellsHighlight[this.amountTask],t,n);this.lastDiceMerged=e;var p=[];Yl(c)&&p.push((0,s.Z)({},h));for(var m=function(){var e,t=d[g],n=t.x,a=t.y,r=t.value,o=i.dataBoard[a][n].dice;Yl(r)&&p.push((0,s.Z)({},d[g])),o.setAlpha(1),i.dataBoard[a][n].value=0;var u,m=Fl()(e=i.cellsHighlight).call(e,(function(e){return e.x===n&&e.y===a}));-1!==m&&Hl()(u=i.cellsHighlight).call(u,m,1);i.scene.animDice.playAnimationMoveTo(o,h,(function(){o.setCustomValue(0),o.setVisible(!1),h.value=c+1,l.setCustomValue(c+1)}))},g=0;g<d.length;g++)m();this.handleAnimSpecialDice(p),this.scene.animDice.playAnimationMerge(l,(function(){if(!i.scene.isGameReplay){i.diceMerged.push({value:u%10,amount:d.length+1-p.length}),c+1>i.maxValueDice&&(i.maxValueDice=c+1>6?6:c+1);var a=i.calcScore(i.diceMerged,n);c+1!==8?i.cellsHighlight[i.amountTask]&&i.handleMergeDice((0,s.Z)({},i.cellsHighlight[i.amountTask],{value:c+1}),t,n):i.handleMergeStarDiceToRubyDice(h,e,a,t)}}))}},n.runAnimAfterMerged=function(e,t,n){var i=this;i.scene.isGameReplay||(i.scene.main.praise.handlePraise(e.pX,e.pY,t),i.diceMerged=[],n&&n()),this.scene.footer.itemMagnet.playAnimationStarToMagnetItem({pX:e.pX,pY:e.pY},{pX:this.scene.footer.itemMagnet.x,pY:this.scene.footer.itemMagnet.y},t)},n.handleAnimSpecialDice=function(e){e&&0!==e.length&&this.collectionEffect.handleShowEffect(e)},n.handleMergeStarDiceToRubyDice=function(e,t,n,i){var a=this;this.scene.time.addEvent({delay:500,callback:function(){a.handleDiceMagic(e,t,n,i)},callbackScope:this})},n.getMergeDice=function(e){if(e.value){var t=this.getRoundDice(e),n=[];return this.getAllRoundDice(t,n,e),n}},n.getAllRoundDice=function(e,t,n){if(e&&0!==e.length){var i=e.pop();t.push(i);for(var a=this.getRoundDice(i)||[],s=0;s<a.length;s++){var r=a[s];this.checkArrayHasItem(e,r)||this.checkArrayHasItem(t,r)||n&&(!n||r.x===n.x&&r.y===n.y)||e.push(r)}this.getAllRoundDice(e,t,n)}},n.getRoundDice=function(e,t){void 0===t&&(t=!1);var n=e.x,i=e.y;if(e.value||t){var a=[],s=null,r=null,o=null,c=null;return i-1>=0&&(s={x:n,y:i-1},this.isAroundDice(this.dataBoard[s.y][s.x].value,e.value)&&a.push(this.dataBoard[s.y][s.x])),n-1>=0&&(r={x:n-1,y:i},this.isAroundDice(this.dataBoard[r.y][r.x].value,e.value)&&a.push(this.dataBoard[r.y][r.x])),n+1<=4&&(c={x:n+1,y:i},this.isAroundDice(this.dataBoard[c.y][c.x].value,e.value)&&a.push(this.dataBoard[c.y][c.x])),i+1<=4&&(o={x:n,y:i+1},this.isAroundDice(this.dataBoard[o.y][o.x].value,e.value)&&a.push(this.dataBoard[o.y][o.x])),a}},n.isAroundDice=function(e,t){if(e===t)return!0;var n=0;10<=e&&e<=19?n=10:20<=e&&e<=29?n=20:30<=e&&e<=39&&(n=30);var i=0;return 10<=t&&t<=19?i=10:20<=t&&t<=29?i=20:30<=t&&t<=39&&(i=30),e-n===t-i},n.checkArrayHasItem=function(e,t){var n=ge()(e).call(e,(function(e){return e.x===t.x&&e.y===t.y}));return n&&n.length>0},n.handleRemoveHighlight=function(){try{for(var e=0;e<this.cellsHighlight.length;e++){var t=this.cellsHighlight[e],n=t.x,i=t.y;this.dataBoard[i]&&this.dataBoard[i][n]&&0===this.dataBoard[i][n].value&&(this.dataBoard[i][n].dice.setVisible(!0),this.dataBoard[i][n].dice.setFrame(Sv.DICE_TRANSPARENT))}}catch(a){}},n.getMaxValueDice=function(){return this.maxValueDice>6?6:this.maxValueDice},n.handleDiceMagic=function(e,t,n,i){for(var a=this,r=e.x,o=e.y,c=r-1>=0?r-1:r,h=r+1<5?r+1:r,l=o+1<5?o+1:o,u=[],d=o-1>=0?o-1:o;d<=l;d++)for(var p=c;p<=h;p++){var m=this.dataBoard[d][p],g=m.dice,f=m.value;Yl(f)&&u.push((0,s.Z)({},m)),r===p&&o===d||(n+=m.value),m.value=0,g.rescue()}this.handleAnimSpecialDice(u),this.diceMerged=[],this.amountTask=0,this.cellsHighlight=[],this.scene.time.delayedCall(200,(function(){a.runAnimAfterMerged(t,n,i)}))},n.restart=function(){this.maxValueDice=1,this.diceMerged=[];for(var e=0;e<this.dataBoard.length;e++)for(var t=this.dataBoard[e],n=0;n<t.length;n++){var i=t[n],a=i.dice;a.setCustomValue(0),a.setVisible(!1),a.setDepth(e*yv+n),i.value=0}},n.handleGameOver=function(e){var t=this;if(this.checkIsGameOver(e)){this.scene.updateStateGameOver(!0),this.scene.clearFen(),this.scene.disableInput(),this.scene.footer.disableItems();this.scene.outOfMoveLabel.playAnimationShow((function(){t.scene.header.disableItems(),t.outOfMove((function(){t.scene.time.addEvent({delay:1500,callback:function(){t.scene.handleRequestFinishGame()}})}))}))}},n.checkIsGameOver=function(e){var t=this.getDiceEmpty();if(0===t.length)return!0;for(var n=!0,i=0;i<t.length;i++){var a=this.getRoundDice(t[i],!0);if(a&&a.length+1>=e)return n=!1,!1}return n},n.getDiceSlot=function(){var e,t,n,i=this.getDiceEmpty();if(0===i.length)return 1;for(var a=0,s=0,r=0;r<i.length;r++){var o=this.getRoundDice(i[r],!0);o&&o.length>0?s++:a++}var c=A()(e=[]).call(e,Wr()(t=Array(a)).call(t,1),Wr()(n=Array(s)).call(n,2));return c[Math.floor(Math.random()*c.length)]},n.getDiceEmpty=function(){for(var e=[],t=0;t<yv;t++)for(var n=0;n<Tv;n++)this.dataBoard[t][n].value||e.push(this.dataBoard[t][n]);return e},n.rescue=function(){for(var e=this,t=[],n=1;n<4;n++)for(var i=1;i<4;i++)t.push(this.dataBoard[n][i]);for(var a=t[Math.floor(Math.random()*t.length)],s=a.x,r=a.y,o=[],c=s-1;c<=s+1;c++)for(var h=r-1;h<=r+1;h++){var l=this.dataBoard[c][h],u=Math.floor(1e3*Math.random()+20);o.push({data:l,delay:u})}pi()(o).call(o,(function(e,t){return e.delay-t.delay}));for(var d=function(){var t=o[p],n=t.delay,i=t.data,a=i.dice;e.scene.time.addEvent({delay:n,callback:function(){a.rescue((function(){i.value=0}))}})},p=0;p<o.length;p++)d()},n.outOfMove=function(e){for(var t=this,n=[200,300,400,500,600,700,800,900,1e3],i=0,a=[],s=this.dataBoard.length-1,r=0;r<=s;r++){for(var o=0;r-o>=0;){var c=this.dataBoard[r-o][4-o].dice;a.push({dice:c,delay:n[i]}),o++}i++}for(var h=1;h<=s;h++){for(var l=0;h+0>l;){var u=this.dataBoard[h][0+l].dice;a.push({dice:u,delay:n[i]}),l++}i++}for(var d=function(){var n=a[p],i=n.delay,s=n.dice,r=null;p===a.length-1&&(r=function(){e&&e()}),t.scene.time.addEvent({delay:i,callback:function(){s.animationJump(r)}})},p=0;p<a.length;p++)d()},n.calcScore=function(e,t){if(!e||0===e.length)return 0;for(var n=t||0,i=void 0===t?0:1,a=e.length,s=0;s<a;s++){var r=e[s];n+=r.value*r.amount}return n*(a+i)},n.exploreFen=function(e){var t=e.split(",");if(t&&!(t.length<this.dataBoard.length)){for(var n=1,i=0;i<t.length;i++)for(var a=t[i].split("-"),s=0;s<a.length;s++){var r="x"===a[s]?0:parseInt(a[s]);this.dataBoard[i][s].value=r,this.dataBoard[i][s].dice.setCustomValue(r),this.dataBoard[i][s].dice.setVisible(!!r),r>n&&(n=r)}this.maxValueDice=n}},t}(Phaser.GameObjects.Container),Cv=GameCore.Configs.Gameplay,Ov=Cv.VibrateValue,bv=Cv.StartScoreCool,Rv=Cv.StartScoreGood,Dv=Cv.StartScoreExcellent,_v=Fa.Z.EFFECTS,wv=_v.KEY,Pv=_v.FRAME,xv=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n.diceSize=void 0,n.onComplete=void 0,n.praiseFrame=void 0,n.praiseScoreText=void 0,n.scene=t,t.add.existing((0,Ga.Z)(n)),n.setVisible(!1).setAlpha(0),n.init(),n}(0,o.Z)(t,e);var n=t.prototype;return n.init=function(){this.createPraiseFrame(),this.createPraiseScoreText(),this.setPosition(100,100)},n.createPraiseFrame=function(){this.praiseFrame=this.scene.make.image({x:0,y:0,key:wv}),this.add(this.praiseFrame),Phaser.Display.Align.In.Center(this.praiseFrame,this,0,-20)},n.createPraiseScoreText=function(){var e=this.scene.facebook.getLocale();this.praiseScoreText="ar"==e?this.scene.make.text({style:{fontFamily:Wa.Z.FONT_FAMILY,fontSize:this.scene.fontSize(30)+"px"},origin:{x:.5,y:.5}}):this.scene.make.bitmapText({font:Wa.Z.PRIMARY.KEY,size:this.scene.fontSize(30),origin:{x:.5,y:.5}}),this.add(this.praiseScoreText),Phaser.Display.Align.In.Center(this.praiseScoreText,this,0,20)},n.handlePraise=function(e,t,n){var i=this,a=this.scene.world.getPixelRatio(),s=this.scene.game.lang;n<bv?this.praiseFrame.setVisible(!1):this.praiseFrame.setVisible(!0);var r="",o=0;this.x=e,bv<=n&&n<Rv?(r=Pv.TEXT_COOL,o=Ov[0]):Rv<=n&&n<Dv?(r=Pv.TEXT_GOOD,o=Ov[1]):n>=Dv&&(r=Pv.TEXT_EXCELLENT,o=Ov[2]),this.scene.player.getPlayerSettings().vibrate&&Rl(o),this.setVisible(!0),this.praiseFrame.setFrame(r);var c=this.praiseFrame,h=c.width/a,l=c.height/a;this.praiseFrame.setWorldSize(h,l),this.x-h/2<0&&(this.x=h/2),this.x+h/2>this.scene.gameZone.width&&(this.x=this.scene.gameZone.width-h/2),this.praiseScoreText.setText("+"+n+" "+s.Text.POINTS),this.scene.add.tween({targets:this,y:{from:t+20,to:t},alpha:{from:0,to:1},scale:{from:0,to:1},duration:300,onComplete:function(){i.scene.add.tween({delay:800,targets:i,y:{from:t,to:t-20},alpha:{from:1,to:0},scale:{from:1,to:1.5},duration:300})}})},t}(Phaser.GameObjects.Container),kv=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n.board=void 0,n.praise=void 0,n.scene=t,t.add.existing((0,Ga.Z)(n)),n.init(),n}(0,o.Z)(t,e);var n=t.prototype;return n.init=function(){this.createBoard(),this.createPraise()},n.createBoard=function(){this.board=new Iv(this.scene,326,323)},n.createPraise=function(){this.praise=new xv(this.scene),this.praise.setDepth(Oa.Z.EFFECT)},t}(Phaser.GameObjects.Container),Mv=kv,Lv=function(){function e(){this.targetType=void 0,this.targetValue=void 0,this.init()}var t=e.prototype;return t.init=function(){},t.setTargetType=function(e){this.targetType=e},t.setTargetValue=function(e){this.targetValue=e},t.getTargetType=function(){return this.targetType},t.getTargetValue=function(){return this.targetValue},e}(),Nv=Fa.Z.GAMEPLAY,Gv=Nv.KEY,Bv=Nv.FRAME,Fv=function(){function e(e){this.scene=void 0,this.tail=void 0,this.star=void 0,this.tweenStarToMagnetItem=void 0,this.onComplete=void 0,this.path=void 0,this.pathMoveToScore=void 0,this.curve=void 0,this.amountPoint=10,this.pointsPath=[],this.targetShowStarTail=.1,this.scene=e,this.init()}var t=e.prototype;return t.init=function(){this.createTail(),this.createStar(),this.createPath()},t.createTail=function(){this.tail=this.scene.add.rope(0,0,Gv,Bv.TAIL,15,!1),this.tail.setDisplaySize(this.tail.width,160),this.tail.setSize(this.tail.width,160),this.tail.setAlpha(0),this.tail.setDepth(Oa.Z.ON_TOP)},t.createStar=function(){this.star=this.scene.make.image({key:Gv,frame:Bv.STAR_YELLOW}),this.star.setDepth(Oa.Z.EFFECT),this.star.setVisible(!1)},t.createPath=function(){var e=this;this.pathMoveToScore={t:0,vec:new Phaser.Math.Vector2};var t=this.scene.world.getZoomRatio(),n=new Phaser.Math.Vector2(300,300),i=new Phaser.Math.Vector2(200,0),a=new Phaser.Math.Vector2(100,100);this.path={t:0,vec:new Phaser.Math.Vector2},this.curve=new Phaser.Curves.QuadraticBezier(n,i,a),this.tweenStarToMagnetItem=this.scene.add.tween({paused:!0,targets:this.path,t:1,ease:"Sine.easeInOut",duration:1e3,onUpdate:function(n){var i=n.progress;e.curve.getPoint(e.path.t,e.path.vec);var a=new Phaser.Math.Vector2(e.path.vec.x,e.path.vec.y);e.pointsPath.unshift(a),e.star.setPosition(e.path.vec.x,e.path.vec.y),e.star.setVisible(!0);var s=e.tail.points;if(i>=e.targetShowStarTail&&(e.targetShowStarTail+=.1),!(e.pointsPath.length<s.length)){for(var r=s.length,o=0;o<r;o++){var c,h,l=(null==(c=e.pointsPath[o])?void 0:c.x)||e.pointsPath[e.pointsPath.length-1].x,u=((null==(h=e.pointsPath[o])?void 0:h.y)||e.pointsPath[e.pointsPath.length-1].y)+e.star.displayHeight/4;s[o].x=l/e.tail.scaleX,s[o].y=u/e.tail.scaleY-3*t}e.tail.setAlpha(1),e.tail.setDirty()}},onComplete:function(){e.pointsPath=[],e.star.setVisible(!1),e.tail.setVisible(!1),e.tail.setAlpha(0),e.scene.footer.itemMagnet.playTweenGlare(),e.onComplete&&e.onComplete()}})},t.setOnComplete=function(e){this.onComplete=e},t.playAnimation=function(e,t){this.curve.p0=new Phaser.Math.Vector2(e.pX,e.pY),this.curve.p1=new Phaser.Math.Vector2(e.pX+200,e.pY-200),this.curve.p2=new Phaser.Math.Vector2(t.pX,t.pY),this.tail.setVisible(!0),this.targetShowStarTail=.1,this.tweenStarToMagnetItem.play()},t.stopAnimation=function(){this.star.setVisible(!1),this.tail.setVisible(!1),this.tail.setAlpha(0),this.tweenStarToMagnetItem.isPlaying()&&this.tweenStarToMagnetItem.stop()},e}(),Uv=Fa.Z.GAMEPLAY,Hv=Uv.KEY,Vv=Uv.FRAME,Yv=function(){function e(e,t,n){this.x=void 0,this.y=void 0,this.scene=void 0,this.background=void 0,this.backgroundSmall=void 0,this.graphicProgress=void 0,this.isDisable=void 0,this.percent=void 0,this.x=t,this.y=n,this.scene=e,this.init()}var t=e.prototype;return t.init=function(){this.createBg(),this.createGraphicsProgress(),this.createBgSmall(),this.updatePercent(0)},t.createBg=function(){this.background=this.scene.make.image({x:this.x,y:this.y,key:Hv,frame:Vv.ITEM_BG_CIRCLE}),this.background.setWorldSize(69,69)},t.createBgSmall=function(){this.backgroundSmall=this.scene.make.image({x:this.x,y:this.y,key:Hv,frame:Vv.ITEM_BG_CIRCLE_SMALL}),this.backgroundSmall.setWorldSize(53,53)},t.createGraphicsProgress=function(){this.graphicProgress=this.scene.add.graphics(),this.graphicProgress.fillStyle(16776960,1)},t.updatePercent=function(e){var t=this;this.scene.tweens.addCounter({from:this.percent,to:e,ease:Phaser.Math.Easing.Sine.InOut,onUpdate:function(e){var n,i=360*e.getValue()/100-90;t.graphicProgress.clear(),We()(n=t.graphicProgress).call(n,t.x,t.y,30,Phaser.Math.DegToRad(i),Phaser.Math.DegToRad(-90),!0),t.graphicProgress.fillPath()},duration:200}),this.percent=e},t.restartProgress=function(){this.graphicProgress.closePath()},t.disableItem=function(){this.isDisable=!0,this.graphicProgress.setAlpha(.2),this.background.setAlpha(.2)},t.enableItem=function(){this.isDisable=!1,this.graphicProgress.setAlpha(1),this.background.setAlpha(1)},e}(),Zv=Fa.Z.GAMEPLAY,Wv=Zv.KEY,Kv=Zv.FRAME,zv=GameCore.Configs.Board,Xv=zv.cols,jv=zv.rows,Jv=GameCore.Configs.MagnetItem,qv=Jv.maxMagnetPerMatch,Qv=Jv.scoreForOnePercent,$v=GameCore.Configs.Gameplay.StartScoreCool,eS=function(e){function t(t,n,i){var a;return(a=e.call(this,t,n,i)||this).scene=void 0,a.icon=void 0,a.magnetMoveIcon=void 0,a.mainItemMagnet=void 0,a.itemHighLight=[],a.targetScore=100*Qv,a.glareSprite=void 0,a.tweenGlareSprite=void 0,a.isDisable=void 0,a.tweenToEnableMaxFps=void 0,a.totalScore=0,a.amountUsed=0,a.itemPercent=void 0,a.textAmount=void 0,a.bgAmount=void 0,a.animationMagnetItem=void 0,a.scene=t,a.init(),a}(0,o.Z)(t,e);var n=t.prototype;return n.init=function(){this.createItemPercent(),this.createIcon(),this.createMagnetMoveIcon(),this.createGlare(),this.createTweenGlare(),this.createAmountBg(),this.createAmountText(),this.createAnimationMagnetItem(),this.updateAmountUsed(this.amountUsed),this.listenEvents()},n.createItemPercent=function(){this.itemPercent=new Yv(this.scene,this.x,this.y)},n.createIcon=function(){this.icon=this.scene.make.image({x:this.x,y:this.y,key:Wv,frame:Kv.ITEM_MAGNET}),this.icon.setWorldSize(40,42)},n.createMagnetMoveIcon=function(){this.magnetMoveIcon=this.scene.make.image({x:this.x,y:this.y,key:Wv,frame:Kv.ITEM_MAGNET}),this.magnetMoveIcon.setDepth(Oa.Z.ON_TOP),this.magnetMoveIcon.setWorldSize(40,42),this.magnetMoveIcon.setVisible(!1)},n.createGlare=function(){this.glareSprite=this.scene.make.image({x:this.x,y:this.y,key:Wv,frame:Kv.GLARE_YELLOW_CIRCLE}),this.glareSprite.setVisible(!1).setScale(0)},n.createTweenGlare=function(){var e=this;this.tweenGlareSprite=this.scene.add.tween({targets:this.glareSprite,duration:300,scale:{from:0,to:1},ease:Phaser.Math.Easing.Sine.InOut,onComplete:function(){e.glareSprite.setVisible(!1).setScale(0)},paused:!0})},n.createAmountBg=function(){this.bgAmount=this.scene.make.image({x:this.x-23,y:this.y-26,key:Wv,frame:Kv.BG_RED_CIRCLE}),this.bgAmount.setWorldSize(21,23)},n.createAmountText=function(){this.textAmount=this.scene.make.bitmapText({font:Wa.Z.PRIMARY.KEY,size:this.scene.fontSize(25),text:String(this.amountUsed)}),Phaser.Display.Align.In.Center(this.textAmount,this.bgAmount,-1.25,-2.5)},n.createAnimationMagnetItem=function(){this.animationMagnetItem=new Fv(this.scene)},n.updateAmountUsed=function(e){this.amountUsed=e>=qv?qv:e,this.textAmount.setText(String(this.amountUsed)),0!==this.amountUsed?(this.icon.setAlpha(1),this.scene.updateMatchData()):this.icon.setAlpha(.5)},n.updateTotalScore=function(e){this.totalScore=e},n.updateTargetScore=function(e){this.targetScore=e},n.updatePercent=function(){var e=100*this.totalScore/this.targetScore;this.itemPercent.updatePercent(e)},n.listenEvents=function(){var e=this;this.tweenToEnableMaxFps=this.scene.add.tween({targets:[],duration:300,scale:{from:0,to:1},loop:-1,paused:!0}),this.on(Phaser.Input.Events.POINTER_DOWN,(function(){e.tweenToEnableMaxFps.play()})),this.on(Phaser.Input.Events.DRAG_START,(function(t){e.handleDragStart(t)})),this.on(Phaser.Input.Events.DRAG,(function(t){e.handleDrag(t)})),this.on(Phaser.Input.Events.DRAG_END,(function(){e.tweenToEnableMaxFps.stop(),e.handleDragEnd()}));var t=new Phaser.Geom.Circle(0,0,35);this.setInteractive(t,Phaser.Geom.Circle.Contains),this.scene.input.setDraggable(this)},n.handleDragStart=function(e){this.amountUsed<=0||(this.magnetMoveIcon.setVisible(!0),this.magnetMoveIcon.setPosition(e.worldX,e.worldY-100))},n.handleDrag=function(e){this.amountUsed<=0||(this.magnetMoveIcon.setVisible(!0),this.magnetMoveIcon.setPosition(e.worldX,e.worldY-100),this.handleCheckMagnet())},n.onCompleteMagnet=function(e){var t,n,i=this;this.mainItemMagnet&&(null==(t=this.mainItemMagnet)||t.dice.setAlpha(1),this.magnetMoveIcon.setVisible(!1),8!==(null==(n=this.mainItemMagnet)?void 0:n.value)?this.scene.main.board.getMergeDice(this.mainItemMagnet).length>1?this.scene.events.emit(Pc,[this.mainItemMagnet],(function(){i.scene.updateMatchData()}),e):(this.scene.animDice.playAnimationStarToScore({pX:this.mainItemMagnet.pX,pY:this.mainItemMagnet.pY},{pX:this.scene.header.x,pY:this.scene.header.y},[],(function(){var t,n;i.scene.main.praise.handlePraise((null==(t=i.mainItemMagnet)?void 0:t.pX)||0,(null==(n=i.mainItemMagnet)?void 0:n.pY)||0,e)})),this.scene.updateMatchData()):this.scene.main.board.handleMergeStarDiceToRubyDice(this.mainItemMagnet,{pX:this.mainItemMagnet.pX,pY:this.mainItemMagnet.pY},e,(function(){i.scene.updateMatchData()})))},n.handleDragEnd=function(){var e=this;if(!(this.amountUsed<=0)&&(this.magnetMoveIcon.setVisible(!1),this.updateItemHighLight(),this.mainItemMagnet)){var t=this.getAllItemsMagnet(),n=this.mainItemMagnet,i=n.pX,a=n.pY,r=n.value,o=n.dice;if(!t||t.length<=1)o.setAlpha(1);else{this.updateAmountUsed(this.amountUsed-1);for(var c=[],h=function(){var n=t[l],r=n.dice,h=n.value;(function(e){return e>10})(h)&&c.push((0,s.Z)({},n)),e.scene.animDice.playAnimationMoveTo(r,{pX:i,pY:a},(function(){n.value=0,n.dice.setCustomValue(0),n.dice.setVisible(!1),o.setCustomValue(h+1),e.mainItemMagnet&&(e.mainItemMagnet.value=h+1)}))},l=0;l<t.length;l++)h();this.scene.main.board.handleAnimSpecialDice(c),this.scene.animDice.playAnimationMerge(o,(function(){var n=(t.length+1)*r;e.onCompleteMagnet(n)}))}}},n.handleCheckMagnet=function(){var e=this.getMainItemMagnet();if(this.mainItemMagnet&&e&&e.x===this.mainItemMagnet.x&&e.y===this.mainItemMagnet.y||this.updateItemHighLight(),this.mainItemMagnet=e,this.mainItemMagnet){this.mainItemMagnet.dice.setAlpha(.8),this.saveItemHighLight(this.mainItemMagnet);var t=this.getAllItemsMagnet();if(t&&!(t.length<=1))for(var n=0;n<t.length;n++){var i=t[n].dice;this.saveItemHighLight(t[n]),i.playShaking()}}},n.saveItemHighLight=function(e){var t=e.x,n=e.y,i=this.itemHighLight.some((function(e){return t===e.x&&n===e.y}));i||this.itemHighLight.push(e)},n.updateItemHighLight=function(){this.itemHighLight.forEach((function(e){e.dice.setAlpha(1),e.dice.stopShaking()})),this.itemHighLight=[]},n.getMainItemMagnet=function(){for(var e=this.scene.main.board.dataBoard,t=0;t<jv;t++)for(var n=0;n<Xv;n++){var i=e[t][n],a=i.dice;if(i.value&&a.getBounds().contains(this.magnetMoveIcon.x,this.magnetMoveIcon.y))return i}return null},n.getAllItemsMagnet=function(){if(!this.mainItemMagnet)return[];for(var e=this.scene.main.board.dataBoard,t=this.mainItemMagnet,n=t.value,i=t.x,a=t.y,s=[],r=0;r<jv;r++)for(var o=0;o<Xv;o++){var c=e[r][o];n!==c.value||o===i&&r===a||s.push(c)}return s},n.playTweenGlare=function(){this.glareSprite.setVisible(!0).setScale(0),this.tweenGlareSprite.play()},n.playAnimationStarToMagnetItem=function(e,t,n){var i=this,a=function(){i.totalScore+=n;var e=100*i.totalScore/i.targetScore;e=e>360?360:e,i.itemPercent.updatePercent(e),i.totalScore>=i.targetScore&&i.scene.time.addEvent({delay:200,callback:function(){i.itemPercent.updatePercent(0);var e=Math.floor(i.totalScore/i.targetScore);i.amountUsed+=e,i.updateAmountUsed(i.amountUsed),i.totalScore-=i.targetScore*e,i.itemPercent.updatePercent(100*i.totalScore/i.targetScore)}})};n<$v?a():(this.animationMagnetItem.playAnimation(e,t),this.animationMagnetItem.setOnComplete(a))},n.restartItemMagnet=function(){this.updateAmountUsed(0),this.totalScore=0,this.targetScore=100*Qv,this.itemPercent.updatePercent(0)},n.disableItem=function(){this.isDisable=!0,this.setAlpha(.2),this.bgAmount.setAlpha(.2),this.textAmount.setAlpha(.2),this.icon.setAlpha(.2),this.itemPercent.disableItem()},n.enableItem=function(){this.isDisable=!1,this.setAlpha(1),this.bgAmount.setAlpha(1),this.textAmount.setAlpha(1),this.icon.setAlpha(1),this.itemPercent.enableItem()},t}(Phaser.GameObjects.Container);function tS(e,t){var n="undefined"!==typeof Dh()&&wh()(e)||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){var n;if(!e)return;if("string"===typeof e)return nS(e,t);var i=We()(n=Object.prototype.toString.call(e)).call(n,8,-1);"Object"===i&&e.constructor&&(i=e.constructor.name);if("Map"===i||"Set"===i)return bh()(e);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return nS(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var i=0;return function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function nS(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var iS=Fa.Z.GAMEPLAY,aS=iS.KEY,sS=iS.FRAME,rS=Fa.Z.GAMEPLAY_32,oS=rS.KEY,cS=rS.FRAME,hS=function(){function e(e,t,n){this.scene=void 0,this.background=void 0,this.text=void 0,this.x=void 0,this.y=void 0,this.nextDiceItems=[],this.nextDiceValues=[],this.isDisable=void 0,this.listDataDice=[],this.scene=e,this.x=t,this.y=n,this.init()}var t=e.prototype;return t.init=function(){this.createText(),this.createBg(),this.initDiceFrames()},t.createBg=function(){this.background=this.scene.make.image({x:this.x,y:this.y,key:aS,frame:sS.BG_NEXT_PANEL}),this.background.setDisplaySize(75,45)},t.createText=function(){var e=this.scene.world.getPixelRatio();this.text=this.scene.make.image({key:aS,frame:sS.TEXT_NEXT_DICE});var t=this.text,n=t.width,i=t.height;this.text.setWorldSize(n/e,i/e),this.text.setPosition(this.x,this.y-i)},t.initDiceFrames=function(){for(var e=0;e<2;e++){var t=new cv(this.scene,{x:0,y:0,width:30,height:30,texture:oS,frame:cS.DICE_1});t.setVisible(!1),this.nextDiceItems.push(t)}},t.randomNextDice=function(e){var t,n,i=A()(t=[]).call(t,We()(n=this.listDataDice).call(n,2));if(e)for(var a=null==e?void 0:e.split(","),s=0;s<a.length;s++){var r=parseInt(a[s]);this.nextDiceValues.push(r)}else if(i&&i.length>0){var o=i[0],c=null==o?void 0:o.split(",");if(c)for(var h=0;h<c.length;h++){var l=parseInt(c[h]);this.nextDiceValues.push(l)}}else{var u=this.scene.main.board.getMaxValueDice(),d=this.scene.main.board.getDiceSlot(),p=Phaser.Math.Between(1,d);if(u<=2)switch(p){case 1:this.nextDiceValues.push(Phaser.Math.Between(1,2));break;case 2:this.nextDiceValues.push(1),this.nextDiceValues.push(2)}else for(var m=0;m<p;m++){var g=this.randomValueExcludeNumbers(this.nextDiceValues);g<0||this.nextDiceValues.push(g)}}},t.randomValueExcludeNumbers=function(e){var t=this.scene.main.board.getMaxValueDice(),n=Phaser.Math.Between(1,t);if(1===Phaser.Math.Between(0,1)){var i=this.getTargetValues();n=parseInt(i[Math.floor(Math.random()*i.length)])}return-1!==Rt()(e).call(e,n)?this.randomValueExcludeNumbers(e):n},t.getTargetValues=function(){for(var e,t=this.scene.targetMissionManager.getTargetValue(),n=[],i=tS((t=We()(t).call(t,1,-1)).split(","));!(e=i()).done;){var a=e.value.split(":")[0];n.push(a)}return n},t.drawDiceFrames=function(){for(var e=this.nextDiceValues.length,t=0;t<e;t++){var n=this.nextDiceValues[t],i=this.nextDiceItems[t];i.setCustomValue(n),i.setVisible(!0);var a=this.getPositionByIndex(t);i.setPosition(a.x,a.y)}},t.hideDiceItems=function(){this.nextDiceItems.forEach((function(e){e.setVisible(!1)}))},t.getPositionByIndex=function(e){var t=[];switch(this.nextDiceValues.length){case 1:t=[{x:this.x,y:this.y}];break;case 2:t=[{x:this.x-15,y:this.y},{x:this.x+15,y:this.y}]}return t[e]},t.handleNextDice=function(e){this.nextDiceValues=[],this.hideDiceItems(),this.randomNextDice(e),this.drawDiceFrames()},t.restart=function(){this.nextDiceValues=[],this.hideDiceItems()},t.disableItem=function(){this.isDisable=!0,this.background.setAlpha(.2),this.text.setAlpha(.2),this.nextDiceItems.forEach((function(e){e.setAlpha(.2)}))},t.enableItem=function(){this.isDisable=!1,this.background.setAlpha(1),this.text.setAlpha(1),this.nextDiceItems.forEach((function(e){e.setAlpha(1)}))},e}(),lS=Fa.Z.GAMEPLAY,uS=lS.KEY,dS=lS.FRAME,pS=Fa.Z.GAMEPLAY_32,mS=pS.KEY,gS=pS.FRAME,fS=GameCore.Configs.Board,ES=fS.cols,vS=fS.rows,SS=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n.diceItems=[],n.direction=void 0,n.diceWidth=50,n.diceHeight=50,n.angleValue=void 0,n.tweenScaleUp=void 0,n.isScaleUp=void 0,n.isDragged=void 0,n.isShowing=void 0,n.dataDice=[],n.isRotating=!1,n.dataDiceRandom=[],n.tweenMoveBack=void 0,n.pointerDownX=0,n.pointerDownY=0,n.countDragTime=void 0,n.isDisable=void 0,n.amountDice=void 0,n.matrixData=[],n.diceContainer=void 0,n.pointerDownPosition=void 0,n.setDepth(Oa.Z.PIECE),t.add.existing((0,Ga.Z)(n)),n.scene=t,n.init(),n}(0,o.Z)(t,e);var n=t.prototype;return n.init=function(){this.createBackground(),this.initDiceItems(),this.createTweenScaleUp(),this.listenEvents()},n.initDiceItems=function(){this.diceContainer=this.scene.make.container({}),this.diceContainer.setDepth(Oa.Z.PIECE);for(var e=0;e<2;e++){var t=new cv(this.scene,{x:0,y:0,width:this.diceWidth,height:this.diceHeight,texture:mS,frame:gS.DICE_1});t.setVisible(!1),this.diceContainer.add(t),this.diceItems.push(t)}},n.createBackground=function(){var e=this.scene.make.sprite({x:0,y:0,key:uS,frame:dS.BG_PIECE});e.setWorldSize(140,138),this.add(e),Phaser.Display.Align.In.Center(e,this)},n.getDataDice=function(){switch(this.amountDice=this.scene.footer.nextDice.nextDiceValues.length,this.amountDice){case 1:return this.getDataOneDice();case 2:return this.getDataTwoDice()}return[[1]]},n.getDataOneDice=function(){return this.direction="",[[this.scene.footer.nextDice.nextDiceValues[0]]]},n.getDataTwoDice=function(){this.randomDirection();var e=[],t=this.scene.footer.nextDice.nextDiceValues[0],n=this.scene.footer.nextDice.nextDiceValues[1];switch(this.direction){case"HORIZONTAL":this.angleValue=90,e.push(this.scene.footer.nextDice.nextDiceValues);break;case"VERTICAL":this.angleValue=0,e.push([t]),e.push([n])}return e},n.randomDirection=function(){var e=["HORIZONTAL","VERTICAL"];this.direction=e[Math.floor(Math.random()*e.length)]},n.getPosition=function(){var e=[{x:0,y:0}];switch(this.direction){case"HORIZONTAL":e=[{x:-this.diceWidth/2-2,y:0},{x:this.diceWidth/2+2,y:0}];break;case"VERTICAL":e=[{x:0,y:-this.diceWidth/2-2},{x:0,y:this.diceHeight/2+2}]}return e},n.hideDice=function(){this.diceContainer.setVisible(!1),this.diceItems.forEach((function(e){e.setVisible(!1)}))},n.showDice=function(e,t){var n=this;this.isShowing=!0,this.diceContainer.setVisible(!0),this.dataDice=[],this.matrixData=[];var i=0;if(e){if(this.dataDiceRandom=e,t)switch(this.amountDice=2,this.direction=t||"",this.direction){case"HORIZONTAL":this.angleValue=90;break;case"VERTICAL":this.angleValue=0}}else this.dataDiceRandom=this.getDataDice();for(var a=this.getPosition(),s=0;s<this.dataDiceRandom.length;s++){this.matrixData[s]=[];for(var r=0;r<this.dataDiceRandom[s].length;r++){var o=this.dataDiceRandom[s][r],c=this.diceItems[i],h=a[i].x,l=a[i].y;c.setPosition(0,0),c.setCustomValue(o),c.setVisible(!0),this.dataDice.push({x:r,y:s,value:o}),this.scene.animDice.playAnimationShow(c,{pX:h,pY:l}),this.matrixData[s][r]={x:r,y:s,value:o},i++}}this.scene.time.delayedCall(100,(function(){n.isShowing=!1}))},n.setContentPosition=function(e,t){this.setPosition(e,t),this.diceContainer.setPosition(e,t)},n.rotateDice=function(){var e=this;if(this.scene.audio.playSound(Ka.Z.DICE_SHUFFLE),this.dataDice=[],this.matrixData=[],!this.dataDiceRandom||this.dataDiceRandom.length<=0)this.isRotating=!1;else for(var t=0;t<this.dataDiceRandom.length;t++){this.matrixData[t]=[];for(var n=function(){var n,a=e.dataDiceRandom[t][i];e.matrixData[t][i]={x:i,y:t,value:a};var s=ge()(n=e.diceItems).call(n,(function(e){return e.customValue===a}))[0];e.animationRotateDice(i,t,s),e.dataDice.push({x:i,y:t,value:a})},i=0;i<this.dataDiceRandom[t].length;i++)n()}},n.animationRotateDice=function(e,t,n){var i=this,a=-(this.dataDiceRandom[0].length-1)*this.diceWidth/2,s=-(this.dataDiceRandom.length-1)*this.diceHeight/2,r=a+e*this.diceWidth,o=s+t*this.diceHeight;this.scene.tweens.addCounter({from:0,to:90,ease:Phaser.Math.Easing.Back.Out,onUpdate:function(e){var t=Math.min(r,o)>=0?1:0,a=0;270!==i.angleValue&&0!==i.angleValue||(a=180);var s=i.angleValue-a+e.getValue()+180*t,c=Math.cos(s*Math.PI/180)*i.diceWidth/2,h=Math.sin(s*Math.PI/180)*i.diceHeight/2;n.setPosition(c,h)},duration:400,onComplete:function(){n.setPosition(r,o,i.diceWidth,i.diceHeight),i.isRotating=!1}})},n.createTweenScaleUp=function(){var e=this;this.tweenScaleUp=this.scene.add.tween({paused:!0,scale:1.2,targets:this.diceContainer,duration:300,onComplete:function(){e.diceContainer.setScale(1.2)}})},n.listenEvents=function(){var e=this;this.on(Phaser.Input.Events.POINTER_DOWN,(function(t){e.handlePointerDown(t)})),this.on(Phaser.Input.Events.POINTER_UP,(function(t){e.handlePointerUp(t)})),this.on(Phaser.Input.Events.DRAG_START,(function(){e.countDragTime=0})),this.on(Phaser.Input.Events.DRAG,(function(t){e.handleDrag(t)})),this.on(Phaser.Input.Events.DRAG_END,(function(){e.handleDragEnd()}));var t=new Phaser.Geom.Circle(0,0,70);this.setInteractive(t,Phaser.Geom.Circle.Contains),this.scene.input.setDraggable(this)},n.handlePointerDown=function(e){this.pointerDownPosition={x:e.x,y:e.y}},n.handlePointerUp=function(e){if(!this.isRotating&&!this.isShowing)if(this.isRotating=!0,!this.amountDice||this.amountDice<2)this.isRotating=!1;else if(this.isDragged)this.isRotating=!1;else if(this.angleValue+=90,360===this.angleValue&&(this.angleValue=0),!(this.dataDiceRandom.length<=1&&this.dataDiceRandom[0].length<=1)){this.pointerDownPosition=null;var t=[];switch(this.direction){case"HORIZONTAL":(t=[[],[]])[0][0]=this.dataDiceRandom[0][0],t[1][0]=this.dataDiceRandom[0][1],this.direction="VERTICAL";break;case"VERTICAL":(t=[[]])[0][0]=this.dataDiceRandom[1][0],t[0][1]=this.dataDiceRandom[0][0],this.direction="HORIZONTAL"}this.dataDiceRandom=t,this.rotateDice()}},n.handleDrag=function(e){var t;if(this.diceContainer.visible&&this.pointerDownPosition){var n=this.pointerDownPosition,i=n.x,a=n.y,s=e.x,r=e.y;if(!(Phaser.Math.Distance.Between(i,a,s,r)<10)){this.scene.game.updateFps(Ld.Z.max),this.scene.events.emit(xc,!0),this.isScaleUp||(this.scene.audio.playSound(Ka.Z.DICE_PICKUP),this.diceContainer.setScale(1),this.tweenScaleUp.play(),this.isScaleUp=!0),null!=(t=this.tweenMoveBack)&&t.isPlaying()&&this.tweenMoveBack.stop();try{this.isDragged=!0;var o=this.checkOutOfThePage(e),c=o.lockX,h=o.lockY;if(c&&h)return;c?this.diceContainer.setY(e.worldY-100):h?this.diceContainer.setX(e.worldX):this.diceContainer.setPosition(e.worldX,e.worldY-100),this.scene.events.emit(kc),this.canMove();for(var l=this.getCellsHighlight(),u=0;u<l.length;u++)l[u].value=this.dataDice[u].value;this.sortCellHighlight(l),this.scene.events.emit(wc,l)}catch(d){}}}},n.checkOutOfThePage=function(e){var t=this.diceHeight,n=this.diceWidth;"VERTICAL"==this.direction&&(t*=2),"HORIZONTAL"==this.direction&&(n*=2);var i=this.scene.gameZone,a=i.width,s=i.height,r=e.worldX,o=e.worldY,c=!1,h=!1;return(r<n/2||r>a-n/2)&&(c=!0),(o+-100<t/2||o+-100>s)&&(h=!0),{lockX:c,lockY:h}},n.handleDragEnd=function(){var e=this;if(this.scene.events.emit(xc,!0),this.isScaleUp=!1,this.pointerDownX=0,this.pointerDownY=0,this.isDragged)try{this.canMove(),this.scene.audio.playSound(Ka.Z.DICE_DROP);for(var t=this.getCellsHighlight(),n=0,i=0,a=0;a<t.length;a++)t[a].value=this.dataDice[a].value;if(1===t.length&&(n=t[0].pX,i=t[0].pY),2===t.length){var s=Math.min(t[0].pX,t[1].pX),r=Math.min(t[0].pY,t[1].pY);n=s+Math.abs(t[0].pX-t[1].pX)/2,i=r+Math.abs(t[0].pY-t[1].pY)/2}this.sortCellHighlight(t),this.scene.add.tween({targets:this.diceContainer,x:n,y:i,duration:100,onComplete:function(){e.isDragged=!1,e.diceContainer.setScale(1),e.diceContainer.setVisible(!1),e.scene.events.emit(Pc,t,(function(){e.diceContainer.setPosition(e.x,e.y),e.hideDice(),e.showDice(),e.scene.footer.nextDice.handleNextDice(),e.scene.events.emit(Mc,e.amountDice,e.dataDiceRandom),e.scene.updateMatchData()}))}})}catch(o){o instanceof Error&&"Invalid Move"===o.message&&this.handleInvalidMove()}},n.sortCellHighlight=function(e){pi()(e).call(e,(function(e,t){return e.value<t.value?-1:e.value>t.value?1:0}))},n.getPositionTopLeftInBoard=function(){for(var e,t=this.diceContainer.x-this.diceWidth/2*((null==(e=this.dataDiceRandom[0])?void 0:e.length)-1),n=this.diceContainer.y-this.diceHeight/2*(this.dataDiceRandom.length-1),i=-1,a=-1,s=this.scene.main.board.dataBoard,r=0;r<vS;r++)for(var o=0;o<ES;o++)if(s[r][o].pX-this.diceWidth/2-5<=t&&s[r][o].pX+this.diceWidth/2+5>=t&&s[r][o].pY-this.diceHeight/2-5<=n&&s[r][o].pY+this.diceHeight/2+5>=n){i=o,a=r;break}return i<0||i>ES-1||a<0||a>vS-1?null:{x:i,y:a}},n.getCellsHighlight=function(){var e=this.scene.main.board.dataBoard,t=[],n=this.getPositionTopLeftInBoard();if(null===n)return t;for(var i=0;i<this.matrixData.length;i++)for(var a=0;a<this.matrixData[i].length;a++)if(this.matrixData[i][a].value){var s=a+n.x,r=i+n.y,o=e[r]&&e[r][s]?e[r][s].pX:0,c=e[r]&&e[r][s]?e[r][s].pY:0;t.push({x:s,y:r,pX:o,pY:c,value:0})}return t},n.canMove=function(){for(var e=this.scene.main.board.dataBoard,t=this.getCellsHighlight(),n=!0,i=0;i<t.length;i++){var a=t[i],s=a.x,r=a.y;if(!e[r]||!e[r][s]||0!==e[r][s].value){n=!1;break}}if(!n||0===t.length)throw new Error("Invalid Move");return n},n.restart=function(){this.direction="",this.amountDice=0,this.diceContainer.setVisible(!1),this.diceContainer.setPosition(this.x,this.y),this.hideDice()},n.handleInvalidMove=function(){var e=this;this.tweenMoveBack=this.scene.add.tween({targets:this.diceContainer,x:this.x,y:this.y,scale:1,duration:300,ease:Phaser.Math.Easing.Sine.InOut,onStop:function(){e.diceContainer.setScale(1),e.diceContainer.setPosition(e.x,e.y)},onComplete:function(){e.isDragged=!1,e.diceContainer.setScale(1),e.diceContainer.setPosition(e.x,e.y),e.scene.audio.playSound(Ka.Z.DICE_INVALID_MOVE)}})},n.handleEventTutorialAfterDragEnd=function(){this.scene.events.emit(Gd)},n.handleEventTutorialAfterTap=function(){this.scene.events.emit(Bd)},n.disableItem=function(){this.isDisable=!0,this.setAlpha(.2),this.diceContainer.setAlpha(.2)},n.enableItem=function(){this.isDisable=!1,this.setAlpha(1),this.diceContainer.setAlpha(1)},t}(Phaser.GameObjects.Container),AS=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n.pieces=void 0,n.itemMagnet=void 0,n.nextDice=void 0,n.pY=void 0,n.scene=t,n.setSize(n.scene.gameZone.width,60),t.add.existing((0,Ga.Z)(n)),n.init(),n}(0,o.Z)(t,e);var n=t.prototype;return n.init=function(){var e=this.scene.gameZone.height;this.pY=e-120,this.createItemMagnet(),this.createNextDice(),this.createPieces()},n.createPieces=function(){this.pieces=new SS(this.scene),this.pieces.setContentPosition(this.scene.gameZone.width/2,this.pY)},n.createItemMagnet=function(){this.itemMagnet=new eS(this.scene,61,this.pY-20)},n.createNextDice=function(){this.nextDice=new hS(this.scene,310,this.pY-20)},n.disableItems=function(){this.pieces.disableItem(),this.itemMagnet.disableItem(),this.nextDice.disableItem()},n.enableItems=function(){this.pieces.enableItem(),this.itemMagnet.enableItem(),this.nextDice.enableItem()},t}(Phaser.GameObjects.Container),TS=AS,yS=Fa.Z.DEFAULT,IS=yS.KEY,CS=yS.FRAME,OS=function(e){function t(t){var n;return(n=e.call(this,t,IS,CS.BUTTON_GREEN)||this).icon=void 0,n.text=void 0,n.button.setWorldSize(252,55),n.setName("Play Dice Mode"),n.createIcon(),n.createText(),n.alignIconAndText(),n}(0,o.Z)(t,e);var n=t.prototype;return n.createIcon=function(){this.icon=this.scene.make.image({key:IS,frame:CS.ICON_CHALLENGE_BIG}),this.icon.setWorldSize(29,26),this.add(this.icon),Phaser.Display.Align.In.Center(this.icon,this,-59)},n.createText=function(){var e=this.scene.world.getPixelRatio();this.text=this.scene.make.image({key:IS,frame:CS.TEXT_MODE_DICE});var t=this.text,n=t.width,i=t.height;this.text.setWorldSize(n/e,i/e),this.add(this.text),Phaser.Display.Align.In.Center(this.text,this,21)},n.alignIconAndText=function(){var e=this.icon.width,t=this.text.width,n=e+t;Phaser.Display.Align.In.Center(this.icon,this,-n/2+e/2-5),Phaser.Display.Align.In.Center(this.text,this,n/2-t/2+5)},t}(Ba.Z),bS=Fa.Z.DEFAULT,RS=bS.KEY,DS=bS.FRAME,_S=function(e){function t(t){var n;return(n=e.call(this,t,RS,DS.BUTTON_MINOR_BUTTON)||this).button.setWorldSize(61,54),n.setName("Home"),n.createIcon(),n}return(0,o.Z)(t,e),t.prototype.createIcon=function(){var e=this.scene.make.image({key:RS,frame:DS.ICON_FLAT_HOME});e.setWorldSize(36,33),this.add(e),Phaser.Display.Align.In.Center(e,this)},t}(Ba.Z),wS=Fa.Z.DEFAULT,PS=wS.KEY,xS=wS.FRAME,kS=function(e){function t(t){var n;return(n=e.call(this,t,PS,xS.BUTTON_BLUE)||this).icon=void 0,n.text=void 0,n.button.setWorldSize(252,55),n.setName("Replay"),n.createIcon(),n.createText(),n.alignIconAndText(),n}(0,o.Z)(t,e);var n=t.prototype;return n.createIcon=function(){this.icon=this.scene.make.image({key:PS,frame:xS.ICON_RESUME}),this.icon.setWorldSize(26,27),this.add(this.icon)},n.createText=function(){var e=this.scene.world.getPixelRatio();this.text=this.scene.make.image({key:PS,frame:xS.TEXT_REPLAY});var t=this.text,n=t.width,i=t.height;this.text.setWorldSize(n/e,i/e),this.add(this.text)},n.alignIconAndText=function(){var e=this.icon.width,t=this.text.width,n=e+t;Phaser.Display.Align.In.Center(this.icon,this,-n/2+e/2-5),Phaser.Display.Align.In.Center(this.text,this,n/2-t/2+5)},t}(Ba.Z),MS=Fa.Z.DEFAULT,LS=MS.KEY,NS=MS.FRAME,GS=function(e){function t(t,n,i,a){var s;return(s=e.call(this,t,n,i,a)||this).scene=void 0,s.popup=void 0,s.bgPopup=void 0,s.settingSoundContainer=void 0,s.settingVibrateContainer=void 0,s.settingSoundIcon=void 0,s.settingVibrateIcon=void 0,s.settingSound=void 0,s.settingVibrate=void 0,s.buttonReplay=void 0,s.buttonDiceMode=void 0,s.buttonHome=void 0,s.contents=void 0,s.popupShowUpAnimation=void 0,s.popupFadeOutAnimation=void 0,s.contentShowUpAnimation=void 0,s.open=function(){e.prototype.open.call((0,Ga.Z)(s)),s.scene.game.globalScene.requestBackgroundMaskUpdate(ba.o4.SETTINGS_SCREEN,.6);var t=s.scene.player.getPlayerSettings(),n=t.sound,i=t.vibrate;s.settingSound.updateStatus(n),s.settingVibrate.updateStatus(i),s.updateVibrateButton(),s.runOpenAnimation()},s.handleClosePopup=function(){s.scene.audio.playSound(Ka.Z.POPUP_OFF,{volume:.6}),s.runCloseAnimation(),s.popupFadeOutAnimation.next((function(){s.scene.screen.close(s.name)}))},s.handleReplayGame=function(){s.runCloseAnimation(),s.popupFadeOutAnimation.next((0,r.Z)(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:s.scene.screen.close(s.name),s.scene.handleRetryLevel();case 2:case"end":return e.stop()}}),e)}))))},s.handleDiceMode=(0,r.Z)(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.scene.storage.dispatch(Zo());case 2:s.scene.screen.close(s.name);case 3:case"end":return e.stop()}}),e)}))),s.handleClickHome=function(){s.runCloseAnimation(),s.popupFadeOutAnimation.next((function(){setTimeout((function(){s.scene.screen.close(s.name),s.scene.scene.switch(fa.C.DASHBOARD_SCENE)}),100)}))},s.handleClickShare=function(){s.runCloseAnimation(),s.popupFadeOutAnimation.next((0,r.Z)(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:s.scene.screen.close(s.name),s.scene.storage.dispatch(Rr());case 2:case"end":return e.stop()}}),e)}))))},s.handleClickLeader=function(){s.runCloseAnimation(),s.popupFadeOutAnimation.next((0,r.Z)(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:s.scene.screen.close(s.name),s.scene.screen.open(ba.o4.LEADER_BOARD_SCREEN);case 2:case"end":return e.stop()}}),e)}))))},s.handleSoundSetting=function(e){s.scene.player.setSetting("sound",e),fr.emit(Lc)},s.handleVibrateSetting=function(e){s.scene.player.setSetting("vibrate",e)},s.scene=t,s.createPopup(),s.createBgPopup(),s.createPopupContent(),s.createInput(),s.setDepth(ba.Ks.POPUP),s.background.setAlpha(.6),s}(0,o.Z)(t,e);var n=t.prototype;return n.updateVibrateButton=function(){Cl()?(this.settingVibrateContainer.revive(),Phaser.Display.Align.In.Center(this.settingSoundContainer,this.bgPopup,0,-31),Phaser.Display.Align.In.Center(this.settingVibrateContainer,this.bgPopup,0,26)):(this.settingVibrateContainer.kill(),Phaser.Display.Align.In.Center(this.settingSoundContainer,this.bgPopup,0,-6))},n.createInput=function(){this.buttonReplay.onClick=this.handleReplayGame,this.buttonDiceMode.onClick=this.handleDiceMode,this.settingSound.onClick=this.handleSoundSetting,this.settingVibrate.onClick=this.handleVibrateSetting,this.buttonHome.onClick=this.handleClickHome},n.close=function(){e.prototype.close.call(this),this.scene.game.globalScene.requestBackgroundMaskUpdate(ba.o4.SETTINGS_SCREEN,0)},n.createPopup=function(){this.popup=new Za(this.scene,0,21,308,440,{forceHeightTop:50}),this.popup.setTitle(NS.TEXT_SETTING),this.popup.setOnClickButtonClose(this.handleClosePopup),this.add(this.popup),Phaser.Display.Align.In.Center(this.popup,this.zone)},n.createBgPopup=function(){this.bgPopup=new ih(this.scene,0,0,257,145,{frameTop:NS.POPUP_TOP_DARK,frameMiddle:NS.POPUP_MIDDLE_DARK,frameBottom:NS.POPUP_BOTTOM_DARK}),this.popup.add(this.bgPopup),Phaser.Display.Align.In.Center(this.bgPopup,this.popup,0,-72)},n.createPopupContent=function(){this.createSwitchButtons(),this.createMenuButtons(),this.createMinorButtons(),this.contents=this.scene.make.group({}),this.contents.addMultiple([this.buttonReplay,this.buttonDiceMode,this.buttonHome])},n.createMenuButtons=function(){this.createButtonReplay(),this.createButtonPlayWith()},n.createButtonReplay=function(){this.buttonReplay=new kS(this.scene),this.buttonReplay.button.setWorldSize(252,53),this.popup.add(this.buttonReplay),Phaser.Display.Align.In.Center(this.buttonReplay,this.popup,0,38)},n.createButtonPlayWith=function(){this.buttonDiceMode=new OS(this.scene),this.buttonDiceMode.button.setWorldSize(252,53),this.popup.add(this.buttonDiceMode),Phaser.Display.Align.In.Center(this.buttonDiceMode,this.popup,0,103)},n.createMinorButtons=function(){this.createButtonHome()},n.createButtonHome=function(){this.buttonHome=new _S(this.scene),this.buttonHome.button.setWorldSize(61,49),this.popup.add(this.buttonHome),Phaser.Display.Align.In.Center(this.buttonHome,this.popup,0,165)},n.createSwitchButtons=function(){var e=this.scene.player.getPlayerSettings(),t=e.sound,n=e.vibrate;this.createSoundButton(t),this.createVibrateButton(n)},n.createSoundButton=function(e){this.settingSoundContainer=this.scene.make.container({}),this.settingSoundContainer.setSize(180,30),this.settingSoundIcon=this.scene.make.image({key:LS,frame:NS.ICON_SOUND}),this.settingSoundIcon.setWorldSize(40,34),this.settingSound=new Il(this.scene,{enable:e,width:87,height:29}),Phaser.Display.Align.In.Center(this.settingSoundIcon,this.settingSoundContainer,-53,3),Phaser.Display.Align.In.Center(this.settingSound,this.settingSoundContainer,35,0),this.settingSoundContainer.add([this.settingSoundIcon,this.settingSound]),this.popup.add(this.settingSoundContainer),Phaser.Display.Align.In.Center(this.settingSoundContainer,this.bgPopup,0,-31)},n.createVibrateButton=function(e){this.settingVibrateContainer=this.scene.make.container({}),this.settingVibrateContainer.setSize(180,30),this.settingVibrateIcon=this.scene.make.image({key:LS,frame:NS.ICON_VIBRATE}),this.settingVibrateIcon.setWorldSize(43,46),this.settingVibrate=new Il(this.scene,{enable:e,width:87,height:29}),Phaser.Display.Align.In.Center(this.settingVibrateIcon,this.settingVibrateContainer,-56,-3),Phaser.Display.Align.In.Center(this.settingVibrate,this.settingVibrateContainer,35,3),this.settingVibrateContainer.add([this.settingVibrateIcon,this.settingVibrate]),this.popup.add(this.settingVibrateContainer),Phaser.Display.Align.In.Center(this.settingVibrateContainer,this.bgPopup,0,26)},n.runOpenAnimation=function(){this.scene.audio.playSound(Ka.Z.POPUP_SHOW),this.runPopupEntrancesAnimation(0,300),this.runPopupContentEntrancesAnimation(200,300)},n.runCloseAnimation=function(){this.runPopupExitsAnimation(0,200)},n.runPopupEntrancesAnimation=function(e,t){if(!this.popupShowUpAnimation){var n=this.popup,i=n.y,a=n.scale;this.popupShowUpAnimation=new Na({targets:[this.popup],delay:e,duration:t,props:{y:{from:350,to:i},alpha:{start:1,from:1,to:1},scale:{start:0,from:0,to:a}}})}this.popupShowUpAnimation.play()},n.runPopupContentEntrancesAnimation=function(e,t){this.contentShowUpAnimation||(this.contentShowUpAnimation=new xa.Z({targets:this.contents.getChildren(),duration:t,delay:this.scene.tweens.stagger(80,{start:e}),props:{alpha:{start:0,from:0,to:1}}})),this.contentShowUpAnimation.play()},n.runPopupExitsAnimation=function(e,t){var n,i=this;this.popupFadeOutAnimation||(this.popupFadeOutAnimation=new Pa.Z({targets:[this.popup],delay:e,duration:t,props:{y:250,scale:0},onComplete:function(){i.popup.setY(0)}})),null==(n=this.popupFadeOutAnimation)||n.play()},t}(GameCore.Screen),BS=Wl()(.3,-.6,.85,.07),FS=Wl()(0,.7,.5,2),US=Fa.Z.GAMEPLAY,HS=US.KEY,VS=US.FRAME,YS=function(){function e(e){this.scene=void 0,this.imageStar=void 0,this.path=void 0,this.pathMoveToScore=void 0,this.curve=void 0,this.onComplete=void 0,this.glowImage=void 0,this.glowImageTween=void 0,this.glowBorder=void 0,this.glowBorderTween=void 0,this.particle=void 0,this.emitterBubble=void 0,this.emitterStar=void 0,this.starToScoreTween=void 0,this.emitterExploreScore=void 0,this.tweenEmitterExploreScore=void 0,this.glareCircle=void 0,this.glareCross=void 0,this.tweenExploreScore=void 0,this.tweenScaleGlareCross=void 0,this.animationMerge=void 0,this.scene=e,this.init()}var t=e.prototype;return t.init=function(){this.createImageMoveToScore(),this.createGlowImage(),this.createGlowBorder(),this.createParticle(),this.createEmitter(),this.createPath(),this.createEmitterStar(),this.createTweenExploreScore(),this.createEmitterExploreScore()},t.createImageMoveToScore=function(){this.imageStar=this.scene.make.image({key:HS,frame:VS.STAR}),this.imageStar.setVisible(!1),this.imageStar.setScale(1.7)},t.createGlowImage=function(){this.glowImage=this.scene.make.image({key:HS,frame:VS.GLOW}),this.glowImage.setVisible(!1)},t.createGlowBorder=function(){this.glowBorder=this.scene.make.image({key:HS,frame:VS.GLOW_BORDER}),this.glowBorder.setVisible(!1)},t.createParticle=function(){this.particle=this.scene.add.particles(HS),this.particle.setDepth(Oa.Z.EFFECT)},t.createEmitter=function(){this.emitterBubble=this.particle.createEmitter({frame:[VS.CIRCLE_4,VS.CIRCLE_2,VS.CIRCLE_3],x:0,y:0,lifespan:2e3,speedY:{min:-50,max:-10},scale:{start:.7,end:0},alpha:{min:.1,max:.3},blendMode:"ADD",maxParticles:15,scaleX:{start:1,end:0,ease:Phaser.Math.Easing.Expo.Out},emitZone:{type:"edge",source:new Phaser.Geom.Rectangle(-25,-25,50,50),quantity:6,seamless:!0},on:!1})},t.createEmitterStar=function(){this.emitterStar=this.particle.createEmitter({name:"EmitterStar",x:0,y:0,frame:[VS.STAR,VS.CIRCLE_1,VS.CIRCLE_2],speed:{min:50,max:100},scale:{start:.7,end:0},follow:this.imageStar,on:!1,angle:{min:80,max:100},lifespan:{min:500,max:1e3}})},t.playAnimationShow=function(e,t){var n=e.scaleX,i=e.scaleY,a=t.pX,s=t.pY;e.setVisible(!0),e.setAlpha(0),this.scene.tweens.add({targets:e,x:{from:a+50,to:a},y:{from:s+100,to:s},alpha:{from:0,to:1},angle:{from:30,to:0},scaleX:{from:n-.5,to:n},scaleY:{from:i-.5,to:i},duration:600,ease:"Back.easeOut"})},t.createPath=function(){var e=this;this.pathMoveToScore={t:0,vec:new Phaser.Math.Vector2};var t=new Phaser.Math.Vector2(100,100),n=new Phaser.Math.Vector2(0,0),i=new Phaser.Math.Vector2(0,0);this.path={t:0,vec:new Phaser.Math.Vector2},this.curve=new Phaser.Curves.QuadraticBezier(t,n,i),this.starToScoreTween=this.scene.add.tween({paused:!0,targets:this.path,t:1,ease:"Sine.easeInOut",duration:1e3,onUpdate:function(){e.curve.getPoint(e.path.t,e.path.vec),e.imageStar.setPosition(e.path.vec.x,e.path.vec.y)},onComplete:function(){e.onComplete&&e.onComplete(),e.onComplete=null,e.playAnimationExploreScore(),e.emitterStar.stop(),e.imageStar.setVisible(!1)}})},t.createTweenExploreScore=function(){var e,t,n=this.scene.gameZone.width/2;this.glareCircle=this.scene.make.image({x:n,y:45,key:HS,frame:VS.GLARE_CIRCLE}).setVisible(!1).setScale(0).setAlpha(0),this.glareCross=this.scene.make.image({x:n,y:45,key:HS,frame:VS.GLARE_CROSS}).setDepth(Oa.Z.EFFECT).setVisible(!1).setScale(0).setAlpha(0),null==(e=this.tweenExploreScore)||e.stop(),this.tweenExploreScore=this.scene.add.tween({paused:!0,targets:[this.glareCircle],alpha:{from:0,to:1},scale:{from:1.5,to:2},ease:"Sine.easeInOut",duration:400,yoyo:!0}),null==(t=this.tweenScaleGlareCross)||t.stop(),this.tweenScaleGlareCross=this.scene.add.tween({paused:!0,targets:[this.glareCross],alpha:{from:.1,to:1},scale:{from:0,to:2},ease:"Back.easeInOut",duration:400,yoyo:!0})},t.createEmitterExploreScore=function(){var e=this,t=this.scene.gameZone.width/2,n=this.scene.add.particles(HS);n.setPosition(t,45),n.setDepth(Oa.Z.EFFECT),this.emitterExploreScore=n.createEmitter({frame:[VS.CIRCLE_1,VS.CIRCLE_2,VS.CIRCLE_3],speed:{min:50,max:120},x:0,y:0,on:!1,maxParticles:15,quantity:15,lifespan:2e4,delay:200}),this.tweenEmitterExploreScore=this.scene.tweens.add({targets:n,scale:{from:0,to:1},duration:500,yoyo:!0,paused:!0,onComplete:function(){e.emitterExploreScore.killAll(),e.emitterExploreScore.stop()}})},t.playAnimationExploreScore=function(){this.glareCircle.setVisible(!0),this.glareCross.setVisible(!0),this.tweenExploreScore.play(),this.tweenScaleGlareCross.play(),this.emitterExploreScore.dead=[],this.emitterExploreScore.start(),this.tweenEmitterExploreScore.play()},t.playAnimationMoveTo=function(e,t,n){var i=this,a=t.pX,s=t.pY,r=e.x,o=e.y,c=e.scaleX,h=e.scaleY;this.scene.add.tween({x:a,y:s,scaleX:{from:c,to:c-.2},scaleY:{from:h,to:h-.2},ease:BS,targets:e,onComplete:function(){i.scene.audio.playSound(Ka.Z.DICE_MERGE),e.x=r,e.y=o,e.setScale(c,h),n&&n()},duration:200})},t.playAnimationMerge=function(e,t){var n=this,i=e.scaleX,a=e.scaleY,s=e.depth,r=i,o=a;e.setDepth(Oa.Z.EFFECT),this.glowImage.setVisible(!0),this.glowImage.setDepth(Oa.Z.EFFECT),this.glowImage.setPosition(e.x,e.y),this.glowImage.setDisplaySize(3*e.displayWidth,3*e.displayHeight),this.glowBorder.setPosition(e.x,e.y),this.glowBorder.setDepth(Oa.Z.EFFECT),this.glowBorder.setDisplaySize(e.displayWidth,e.displayHeight),this.animationMerge=this.scene.add.tween({scaleX:{from:i,to:i-.1},scaleY:{from:a,to:a-.1},targets:[e,this.glowImage],onComplete:function(){n.scene.add.tween({scaleX:{from:i,to:i+.3},scaleY:{from:a,to:a+.3},targets:[e,n.glowImage],onUpdate:function(){e.angle-=.1},onComplete:function(){var i=e.angle,a=n.glowBorder,c=a.scaleX,h=a.scaleY;n.scene.add.tween({alpha:.3,targets:n.glowImage,onComplete:function(){n.glowImage.setVisible(!1),n.glowBorder.setVisible(!0),n.scene.add.tween({scaleX:{from:c,to:c+.3},scaleY:{from:h,to:h+.3},alpha:{from:1,to:.7},targets:n.glowBorder,onComplete:function(){n.glowBorder.setVisible(!1),e.setScale(r,o),t&&t()},duration:200}),n.playEmitterBubble(e)},duration:200}),n.scene.add.tween({scaleX:r,scaleY:o,angle:{from:i,to:0},ease:FS,targets:e,duration:300,onComplete:function(){e.setDepth(s)}})},duration:200})},duration:200}),this.scene.add.tween({alpha:{from:0,to:1},targets:this.glowImage,duration:300})},t.playAnimationStarToScore=function(e,t,n,i){this.onComplete=i,this.emitterStar.setVisible(!0),this.emitterStar.start();var a=Math.abs(e.pX-t.pX);a=e.pX<=t.pX?t.pX-a:t.pX+a,this.curve.p0=new Phaser.Math.Vector2(e.pX,e.pY),this.curve.p1=new Phaser.Math.Vector2(a,t.pY-250),this.curve.p2=new Phaser.Math.Vector2(t.pX,t.pY);var s=n&&n.length>1?3121622:16777215;this.imageStar.setVisible(!0),this.imageStar.setPosition(e.pX,e.pY),this.imageStar.setTint(s),this.imageStar.setScale(2),this.starToScoreTween.play(),this.emitterStar.setTint(s)},t.playEmitterBubble=function(e){this.emitterBubble.killAll(),this.emitterBubble.dead=[],this.emitterBubble.setPosition(e.x,e.y),this.emitterBubble.start()},t.stopAnimation=function(){var e,t,n,i;(this.imageStar.setVisible(!1),this.glowImage.setVisible(!1),this.glowBorder.setVisible(!1),null!=(e=this.starToScoreTween)&&e.isPlaying())&&(null==(n=this.starToScoreTween)||n.stop());null!=(t=this.animationMerge)&&t.isPlaying()&&(null==(i=this.animationMerge)||i.stop());this.emitterStar.setVisible(!1)},e}(),ZS=Fa.Z.EFFECTS,WS=ZS.KEY,KS=ZS.FRAME,zS=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n.onComplete=void 0,n.background=void 0,n.outOfMoveText=void 0,n.tweenShow=void 0,n.tweenHide=void 0,n.scene=t,n.scene.add.existing((0,Ga.Z)(n)),n.init(),n}(0,o.Z)(t,e);var n=t.prototype;return n.init=function(){this.createBackground(),this.createOutOfMoveText(),this.createTweenShow(),this.createTweenHide(),this.addItemContainer()},n.createBackground=function(){this.background=this.scene.make.image({key:WS,frame:KS.BG_OUT_OF_MOVE});var e=this.scene.gameZone.width,t=e*this.background.height/this.background.width;this.background.setWorldSize(e,t)},n.createOutOfMoveText=function(){var e=this.scene.world.getPixelRatio();this.outOfMoveText=this.scene.make.image({key:WS,frame:KS.TEXT_OUT_OF_ROOM});var t=this.outOfMoveText,n=t.width,i=t.height;this.outOfMoveText.setWorldSize(n/e,i/e)},n.createTweenShow=function(){var e=this,t=this.scene.gameZone.height;this.tweenShow=this.scene.add.tween({targets:this,y:{from:t,to:t/2-45},alpha:{from:0,to:1},duration:500,paused:!0,onComplete:function(){e.tweenHide.play()}})},n.createTweenHide=function(){var e=this;this.tweenHide=this.scene.add.tween({delay:3e3,targets:this,alpha:{from:1,to:0},duration:500,paused:!0,onComplete:function(){e.onComplete&&e.onComplete(),e.onComplete=null}})},n.addItemContainer=function(){var e=this.scene.gameZone,t=e.width,n=e.height;this.setPosition(t/2,n/2),this.setVisible(!1).setAlpha(0),this.add([this.background,this.outOfMoveText]),this.setDepth(99)},n.playAnimationShow=function(e){this.onComplete=e,this.setVisible(!0),this.tweenShow.play()},t}(Phaser.GameObjects.Container),XS=function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).name="InvalidTileMap",i.message=t||"This tile is not valid",i.payload=n,i}return(0,o.Z)(t,e),t}((0,w.Z)(Error)),jS=Fa.Z.GAMEPLAY_32.KEY,JS=function(e){function t(t,n,i,a){var s;return(s=e.call(this,t,n,i,a)||this).scene=void 0,s.textWellDone=void 0,s.listTargetFrame=[],s.listAnim=[],s.closeTimerEvent=void 0,s.tweenBackground=void 0,s.open=function(t){e.prototype.open.call((0,Ga.Z)(s),t),s.runPopupEntrancesAnimation(0,300)},s.close=function(){e.prototype.close.call((0,Ga.Z)(s)),s.scene.game.globalScene.requestBackgroundMaskUpdate(ba.o4.COLLECTION_ITEMS_SCREEN,0)},s.scene=t,s.setDepth(ba.Ks.POPUP),s.background.setAlpha(0),s.createContent(),s}(0,o.Z)(t,e);var n=t.prototype;return n.handleDelegate=function(){var e,t=this,n=this.getData(["duration","onClose"]),i=n[0],a=void 0===i?0:i,s=n[1];null==(e=this.closeTimerEvent)||e.remove(),a>0&&(this.closeTimerEvent=this.scene.time.addEvent({delay:a,callback:function(){t.visible&&t.scene.screen.close(t.name),s&&s()}}))},n.runAnim=function(){},n.createContent=function(){this.createText()},n.createText=function(){var e=this.scene.game.lang,t=this.scene.facebook.getLocale();this.textWellDone="ar"==t?new lg(this.scene,{text:e.Text.WELL_DONE,size:this.scene.fontSize(180)}):new hg(this.scene,{text:e.Text.WELL_DONE,font:Wa.Z.PRIMARY.KEY,size:this.scene.fontSize(80)}),this.add(this.textWellDone),Phaser.Display.Align.In.Center(this.textWellDone,this)},n.createTargetItems=function(){var e=this.scene.header.collectItems.getTargetKeys();if(e&&0!==e.length){for(var t=0;t<3;t++){var n=this.scene.make.image({key:jS});n.setWorldSize(30,30),n.setFrame(e[t]||e[0]),n.setVisible(!1).setAlpha(0),this.listTargetFrame.push(n)}this.add(this.listTargetFrame)}},n.updateTargetItems=function(){var e=this.scene.header.collectItems.getTargetKeys();if(e&&0!==e.length)for(var t=0;t<3;t++){var n=this.listTargetFrame[t];n.setWorldSize(30,30),n.setFrame(e[t]||e[0]),n.setVisible(!1).setAlpha(0)}},n.createAnimTargetItems=function(){for(var e=[100,500,700],t=[-120,0,120],n=[-100,-150,-100],i=[.7,1,.7],a=0;a<3;a++){this.listTargetFrame[a].setAlpha(0).setVisible(!0);var s=this.scene.add.tween({targets:this.listTargetFrame[a],delay:e[a],x:{from:0,to:t[a]},y:{from:300,to:n[a]},alpha:{from:0,to:1},scale:{from:0,to:i[a]},rotation:{from:-180,to:0},duration:500});this.listAnim.push(s)}},n.playAnimTargetItems=function(){for(var e=0;e<3;e++){this.listTargetFrame[e].setAlpha(0).setVisible(!0),this.listAnim[e].play()}},n.runPopupEntrancesAnimation=function(e,t){var n=this;this.listTargetFrame.forEach((function(e){e.setAlpha(0)})),this.textWellDone.restart(),this.tweenBackground||(this.tweenBackground=this.scene.tweens.addCounter({paused:!0,from:0,to:.6,delay:e,duration:t,onUpdate:function(e){var t=e.getValue();n.background.setAlpha(t),n.scene.game.globalScene.requestBackgroundMaskUpdate(ba.o4.COLLECTION_ITEMS_SCREEN,n.background.alpha)},onComplete:function(){n.textWellDone.start(),0===n.listTargetFrame.length?(n.createTargetItems(),n.createAnimTargetItems()):(n.updateTargetItems(),n.playAnimTargetItems()),n.handleDelegate(),n.runAnim()}})),this.background.setAlpha(0),this.tweenBackground.play()},t}(GameCore.Screen),qS=Fa.Z.DEFAULT,QS=qS.KEY,$S=qS.FRAME,eA=function(e){function t(t,n,i,a){var s;return(s=e.call(this,t,n,i,a)||this).scene=void 0,s.popup=void 0,s.buttonBack=void 0,s.buttonContinue=void 0,s.contents=void 0,s.textLevel=void 0,s.textLevelComplete=void 0,s.listTargets=[],s.popupShowUpAnimation=void 0,s.popupFadeOutAnimation=void 0,s.contentShowUpAnimation=void 0,s.popupFadeInMaskAnimation=void 0,s.popupFadeOutMaskAnimation=void 0,s.onConfirm=function(){FBInstant.player.setDataAsync({level:1}),s.scene.storage.dispatch(xo(1)),s.scene.levelManager.setLevel(1),s.scene.screen.close(ba.o4.START_OVER_SCREEN),s.scene.screen.close(ba.o4.MISSION_COLLECTION_COMPLETE_SCREEN),s.scene.preloadCurrentLevel(),s.scene.load.off(Phaser.Loader.Events.COMPLETE),s.scene.load.once(Phaser.Loader.Events.COMPLETE,(function(){var e=s.scene.game.globalScene;s.scene.mapManager.reloadMap(),s.scene.handleRetryLevel(),e.screen.close(ba.o4.NOTIFY_SCREEN)})),s.scene.load.off(Phaser.Loader.Events.FILE_LOAD_ERROR),s.scene.load.once(Phaser.Loader.Events.FILE_LOAD_ERROR,s.scene.handleLoadCurrentMapError.bind((0,Ga.Z)(s)))},s.scene=t,s.createPopup(),s.createTexts(),s.createButtons(),s.setDepth(ba.Ks.POPUP),s.background.setAlpha(.5),s}(0,o.Z)(t,e);var n=t.prototype;return n.open=function(){e.prototype.open.call(this),this.updateInfo(),this.runOpenAnimation()},n.updateInfo=function(){var e=this.scene.game.lang,t=this.scene.levelManager.getLevel()-1;this.textLevel.setText(e.Text.Level+" "+t)},n.createPopup=function(){this.popup=new Za(this.scene,0,0,290,234,{forceHeightTop:49}),this.add(this.popup),this.popup.setTitle($S.TEXT_CONGRATULATION),this.popup.hideButtonClose(),Phaser.Display.Align.In.Center(this.popup,this.zone,0,-20)},n.createTexts=function(){this.createTextLevel(),this.createTextLevelComplete()},n.createTextLevel=function(){"ar"==this.scene.facebook.getLocale()?(this.textLevel=this.scene.make.text({style:{fontFamily:Wa.Z.FONT_FAMILY,fontSize:this.scene.fontSize(45)+"px"},origin:{x:.5,y:.5}}),this.textLevel.setTint(5778458)):this.textLevel=this.scene.make.bitmapText({font:Wa.Z.DARK.KEY,size:this.scene.fontSize(45),origin:{x:.5,y:.5}}),this.popup.add(this.textLevel),Phaser.Display.Align.In.Center(this.textLevel,this.popup,0,-20)},n.createTextLevelComplete=function(){var e=this.scene.game.lang;"ar"==this.scene.facebook.getLocale()?(this.textLevelComplete=this.scene.make.text({text:e.Text.Completed,style:{fontFamily:Wa.Z.FONT_FAMILY,fontSize:this.scene.fontSize(50)+"px"},origin:{x:.5,y:.5}}),this.textLevelComplete.setTint(5778458)):this.textLevelComplete=this.scene.make.bitmapText({font:Wa.Z.DARK.KEY,size:this.scene.fontSize(50),text:e.Text.Completed,origin:{x:.5,y:.5}}),this.popup.add(this.textLevelComplete),Phaser.Display.Align.In.Center(this.textLevelComplete,this.popup,0,15)},n.createTargetItems=function(){var e=this.scene.header.collectItems.getTargetKeys();if(e&&0!==e.length){for(var t=this.calcPosition(e.length),n=0;n<e.length;n++){var i=this.scene.make.image({key:Fa.Z.GAMEPLAY.KEY});i.setWorldSize(50,50),i.setFrame(e[n]||e[0]),i.setX(t[n]),this.listTargets.push(i)}this.popup.add(this.listTargets)}},n.clickButtonClose=function(){var e=this;this.runCloseAnimation(),this.scene.time.delayedCall(300,(function(){e.scene.scene.switch(fa.C.DASHBOARD_SCENE)}))},n.updateTargetItems=function(){var e=this.scene.header.collectItems.getTargetKeys();if(e&&0!==e.length){this.popup.remove(this.listTargets);for(var t=this.calcPosition(e.length),n=0;n<e.length;n++){var i=this.listTargets[n];i||(i=this.scene.make.image({key:Fa.Z.GAMEPLAY.KEY}),this.listTargets.push(i)),i.setWorldSize(50,50),i.setFrame(e[n]||e[0]),i.setX(t[n])}this.popup.add(this.listTargets)}},n.calcPosition=function(e){for(var t=[],n=310/(e+1),i=n*(e-1)/2,a=0;a<e;a++)t.push(n*a-i);return t},n.createButtons=function(){this.createButtonBack(),this.createButtonContinue()},n.createButtonBack=function(){var e=this.scene.make.image({key:QS,frame:$S.ICON_BACK});e.setWorldSize(30,30),this.buttonBack=new Ba.Z(this.scene,QS,$S.BUTTON_MINOR_BUTTON,62,54),this.buttonBack.setName("Back"),this.buttonBack.add(e),this.popup.add(this.buttonBack),this.buttonBack.onClick=this.clickButtonBack.bind(this),Phaser.Display.Align.In.Center(this.buttonBack,this.popup,-90,72)},n.clickButtonBack=function(){var e=this;this.runCloseAnimation(),this.scene.time.delayedCall(300,(function(){e.scene.clearFen(),e.scene.scene.switch(fa.C.DASHBOARD_SCENE)}))},n.createButtonContinue=function(){var e=this.scene.world.getPixelRatio(),t=this.scene.make.image({key:QS,frame:$S.TEXT_NEXT_LEVEL}),n=t.width,i=t.height;t.setWorldSize(n/e,i/e),this.buttonContinue=new Ba.Z(this.scene,QS,$S.BUTTON_GREEN,178,54),this.buttonContinue.setName("Continue"),this.buttonContinue.add(t),this.popup.add(this.buttonContinue),this.buttonContinue.onClick=this.clickButtonContinue.bind(this),Phaser.Display.Align.In.Center(this.buttonContinue,this.popup,33,72)},n.clickButtonContinue=function(){var e=this;this.scene.levelManager.getLevel()>_a.length-1?this.scene.screen.open(ba.o4.START_OVER_SCREEN,{onConfirm:this.onConfirm}):(this.runCloseAnimation(),this.scene.time.delayedCall(300,(function(){e.scene.analytics.levelStart(e.scene.levelManager.getLevel()),e.scene.clearFen(),e.scene.startGame()})))},n.runOpenAnimation=function(){var e;null!=(e=this.popupShowUpAnimation)&&null!=(e=e.tween)&&e.isPlaying()||(this.scene.audio.playSound(Ka.Z.POPUP_SHOW),this.runPopupEntrancesAnimation(0,300),this.runFadeInMaskAnimation(100,300))},n.runCloseAnimation=function(){var e;null!=(e=this.popupFadeOutAnimation)&&null!=(e=e.tween)&&e.isPlaying()||(this.runPopupExitsAnimation(50,200),this.runFadeOutMaskAnimation(0,200))},n.runPopupEntrancesAnimation=function(e,t){if(!this.popupShowUpAnimation){var n=this.popup.scale;this.popupShowUpAnimation=new Na({targets:[this.popup],delay:e,duration:t,props:{y:0,alpha:{start:1,from:1,to:1},scale:{start:0,from:0,to:n}}})}this.popupShowUpAnimation.play()},n.runPopupContentEntrancesAnimation=function(e,t){var n;null==(n=this.contentShowUpAnimation)||n.remove(),this.contentShowUpAnimation=new xa.Z({targets:this.contents.getChildren(),duration:t,delay:e,props:{alpha:{start:0,from:0,to:1}}}),this.contentShowUpAnimation.play()},n.runPopupExitsAnimation=function(e,t){var n=this;this.popupFadeOutAnimation||(this.popupFadeOutAnimation=new Pa.Z({targets:[this.popup],delay:e,duration:t,props:{scale:0},onComplete:function(){n.popup.setY(0),n.scene.screen.close(n.name)}})),this.popupFadeOutAnimation.play()},n.runFadeInMaskAnimation=function(e,t){var n=this;if(!this.popupFadeInMaskAnimation){var i=this.background.alpha;this.popupFadeInMaskAnimation=new wa.Z({targets:[this.background],delay:e,duration:t,props:{alpha:{start:0,from:0,to:i}},onUpdate:function(){n.scene.game.globalScene.requestBackgroundMaskUpdate(ba.o4.MISSION_COLLECTION_COMPLETE_SCREEN,n.background.alpha)}})}this.popupFadeInMaskAnimation.play()},n.runFadeOutMaskAnimation=function(e,t){var n=this;if(!this.popupFadeOutMaskAnimation){var i=this.background.alpha;this.popupFadeOutMaskAnimation=new Pa.Z({targets:[this.background],delay:e,duration:t,props:{alpha:{start:i,from:i,to:0}},onUpdate:function(){n.scene.game.globalScene.requestBackgroundMaskUpdate(ba.o4.MISSION_COLLECTION_COMPLETE_SCREEN,n.background.alpha)}})}this.popupFadeOutMaskAnimation.play()},t}(GameCore.Screen),tA=Fa.Z.DEFAULT,nA=tA.KEY,iA=tA.FRAME,aA=function(e){function t(t){var n;return(n=e.call(this,t,nA,iA.BUTTON_GREEN)||this).icon=void 0,n.text=void 0,n.button.setWorldSize(178,54),n.setName("Retry"),n.createIcon(),n.createText(),n.alignIconAndText(),n.scene.add.existing((0,Ga.Z)(n)),n}(0,o.Z)(t,e);var n=t.prototype;return n.createIcon=function(){this.icon=this.scene.make.image({key:nA,frame:iA.ICON_RETRY}),this.icon.setWorldSize(33,35),this.add(this.icon)},n.createText=function(){var e=this.scene.world.getPixelRatio();this.text=this.scene.make.image({key:nA,frame:iA.TEXT_RETRY});var t=this.text,n=t.width,i=t.height;this.text.setWorldSize(n/e,i/e),this.add(this.text)},n.alignIconAndText=function(){var e=this.icon.width,t=this.text.width,n=e+t;Phaser.Display.Align.In.Center(this.icon,this,-n/2+e/2-5),Phaser.Display.Align.In.Center(this.text,this,n/2-t/2+5)},t}(Ba.Z),sA=Fa.Z.DEFAULT,rA=sA.KEY,oA=sA.FRAME,cA=function(e){function t(t,n,i,a){var s;return(s=e.call(this,t,n,i,a)||this).scene=void 0,s.popup=void 0,s.buttonBack=void 0,s.buttonRetry=void 0,s.contents=void 0,s.textLevelFail=void 0,s.popupShowUpAnimation=void 0,s.popupFadeOutAnimation=void 0,s.contentShowUpAnimation=void 0,s.popupFadeInMaskAnimation=void 0,s.popupFadeOutMaskAnimation=void 0,s.scene=t,s.createPopup(),s.createTexts(),s.createButtons(),s.setDepth(ba.Ks.POPUP),s.background.setAlpha(.5),s}(0,o.Z)(t,e);var n=t.prototype;return n.open=function(){e.prototype.open.call(this),this.scene.enableInput(),this.runOpenAnimation()},n.createPopup=function(){this.popup=new Za(this.scene,0,0,290,234),this.popup.setOnClickButtonClose(this.clickButtonClose.bind(this)),this.popup.setTitle(oA.TEXT_YOU_LOSE),this.popup.hideButtonClose(),this.add(this.popup),Phaser.Display.Align.In.Center(this.popup,this.zone,0,-20)},n.createTexts=function(){this.createTextLevelFail()},n.createTextLevelFail=function(){var e=this.scene.world.getPixelRatio();this.textLevelFail=this.scene.make.image({key:rA,frame:oA.TEXT_LEVEL_FAIL});var t=this.textLevelFail,n=t.width,i=t.height;this.textLevelFail.setWorldSize(n/e,i/e),this.popup.add(this.textLevelFail),Phaser.Display.Align.In.Center(this.textLevelFail,this.popup,0,-10)},n.createButtons=function(){this.createButtonBack(),this.createButtonRetry()},n.createButtonBack=function(){var e=this.scene.make.image({key:rA,frame:oA.ICON_BACK});e.setWorldSize(30,30),this.buttonBack=new Ba.Z(this.scene,rA,oA.BUTTON_MINOR_BUTTON,62,54),this.buttonBack.setName("Back"),this.buttonBack.add(e),this.popup.add(this.buttonBack),this.buttonBack.onClick=this.clickButtonBack.bind(this),Phaser.Display.Align.In.Center(this.buttonBack,this.popup,-90,72)},n.clickButtonBack=function(){var e=this;this.runCloseAnimation(),this.scene.time.delayedCall(300,(function(){e.scene.clearFen(),e.scene.scene.switch(fa.C.DASHBOARD_SCENE)}))},n.createButtonRetry=function(){this.buttonRetry=new aA(this.scene),this.popup.add(this.buttonRetry),this.buttonRetry.onClick=this.clickButtonRetry.bind(this),Phaser.Display.Align.In.Center(this.buttonRetry,this.popup,33,72)},n.clickButtonClose=function(){var e=this;this.runCloseAnimation(),this.scene.time.delayedCall(300,(function(){e.scene.clearFen(),e.scene.scene.switch(fa.C.DASHBOARD_SCENE)}))},n.clickButtonRetry=function(){var e=this;this.runCloseAnimation(),this.scene.time.delayedCall(300,(function(){e.scene.handleRetryLevel()}))},n.runOpenAnimation=function(){var e;null!=(e=this.popupShowUpAnimation)&&null!=(e=e.tween)&&e.isPlaying()||(this.scene.audio.playSound(Ka.Z.POPUP_SHOW),this.runPopupEntrancesAnimation(0,300),this.runFadeInMaskAnimation(100,300))},n.runCloseAnimation=function(){var e;null!=(e=this.popupFadeOutAnimation)&&null!=(e=e.tween)&&e.isPlaying()||(this.runPopupExitsAnimation(50,200),this.runFadeOutMaskAnimation(0,200))},n.runPopupEntrancesAnimation=function(e,t){if(!this.popupShowUpAnimation){var n=this.popup.scale;this.popupShowUpAnimation=new Na({targets:[this.popup],delay:e,duration:t,props:{y:0,alpha:{start:1,from:1,to:1},scale:{start:0,from:0,to:n}}})}this.popupShowUpAnimation.play()},n.runPopupContentEntrancesAnimation=function(e,t){var n;null==(n=this.contentShowUpAnimation)||n.remove(),this.contentShowUpAnimation=new xa.Z({targets:this.contents.getChildren(),duration:t,delay:e,props:{alpha:{start:0,from:0,to:1}}}),this.contentShowUpAnimation.play()},n.runPopupExitsAnimation=function(e,t){var n=this;this.popupFadeOutAnimation||(this.popupFadeOutAnimation=new Pa.Z({targets:[this.popup],delay:e,duration:t,props:{scale:0},onComplete:function(){n.popup.setY(0),n.scene.screen.close(n.name)}})),this.popupFadeOutAnimation.play()},n.runFadeInMaskAnimation=function(e,t){var n=this;if(!this.popupFadeInMaskAnimation){var i=this.background.alpha;this.popupFadeInMaskAnimation=new wa.Z({targets:[this.background],delay:e,duration:t,props:{alpha:{start:0,from:0,to:i}},onUpdate:function(){n.scene.game.globalScene.requestBackgroundMaskUpdate(ba.o4.MISSION_FAIL_SCREEN,n.background.alpha)}})}this.popupFadeInMaskAnimation.play()},n.runFadeOutMaskAnimation=function(e,t){var n=this;if(!this.popupFadeOutMaskAnimation){var i=this.background.alpha;this.popupFadeOutMaskAnimation=new Pa.Z({targets:[this.background],delay:e,duration:t,props:{alpha:{start:i,from:i,to:0}},onUpdate:function(){n.scene.game.globalScene.requestBackgroundMaskUpdate(ba.o4.MISSION_FAIL_SCREEN,n.background.alpha)}})}this.popupFadeOutMaskAnimation.play()},t}(GameCore.Screen),hA=Fa.Z.GAMEPLAY_32.KEY,lA=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n.imageGem=void 0,n.text=void 0,n.scene=t,n.init(),n}(0,o.Z)(t,e);var n=t.prototype;return n.init=function(){this.createImageGem(),this.createText()},n.createImageGem=function(){this.imageGem=this.scene.make.image({key:hA}),this.imageGem.setWorldSize(35,35),this.add(this.imageGem),Phaser.Display.Align.In.Center(this.imageGem,this,0,-10.5)},n.createText=function(){this.text=this.scene.make.bitmapText({font:Wa.Z.DARK.KEY,size:this.scene.fontSize(48),origin:{x:.5,y:.5},text:"0"}),this.add(this.text),Phaser.Display.Align.In.Center(this.text,this,0,38)},n.updateGem=function(e){this.imageGem.setFrame(e),this.imageGem.setWorldSize(35,35)},n.updateText=function(e){this.text.setText("x"+e)},n.getFrame=function(){return this.imageGem.frame.name},t}(Phaser.GameObjects.Container),uA=Fa.Z.DEFAULT.FRAME,dA=Fa.Z.GAMEPLAY_32.KEY,pA=function(e){function t(t,n,i,a){var s;return(s=e.call(this,t,n,i,a)||this).scene=void 0,s.popup=void 0,s.listItems=[],s.targetImages=[],s.popupShowUpAnimation=void 0,s.popupFadeOutAnimation=void 0,s.listAnimCollectionItem=[],s.popupFadeInMaskAnimation=void 0,s.popupFadeOutMaskAnimation=void 0,s.handleClose=function(){s.runCloseAnimation()},s.scene=t,s.createPopup(),s.setDepth(ba.Ks.POPUP),s.background.setAlpha(.5),s}(0,o.Z)(t,e);var n=t.prototype;return n.open=function(t){var n=this;e.prototype.open.call(this,t);var i=this.getData(["duration"])[0];this.hideAllCollectionItems(),this.createCollectionItems(),this.alginCollectionItems(),this.runOpenAnimation(),this.scene.time.delayedCall(i,(function(){n.handleClose()}))},n.createCollectionItems=function(){for(var e=this.getData(["jsonTarget"])[0],t=H()(e),n=0;n<t.length;n++){var i=t[n],a=this.getCollectionItemFree(n);a.updateGem(i),a.updateText(e[i])}},n.getCollectionItemFree=function(e){var t=this.listItems[e];return t||(t=new lA(this.scene),this.popup.add(t),this.listItems.push(t)),t.setVisible(!0),t},n.alginCollectionItems=function(){var e;this.targetImages=[];for(var t=ge()(e=this.listItems).call(e,(function(e){return e.visible})),n=t.length,i=263/(n+1)+5,a=-i*(n-1)/2,s=0;s<n;s++){var r=t[s];Phaser.Display.Align.In.Center(r,this.popup,a+i*s);var o=r.getFrame(),c=this.scene.make.image({key:dA,frame:o});c.setDepth(Oa.Z.ON_TOP),c.setWorldSize(22,22),c.setVisible(!1),this.targetImages.push(c),Phaser.Display.Align.In.Center(c,this.popup,a+i*s+this.scene.gameZone.width/2,this.scene.gameZone.height/2)}},n.hideAllCollectionItems=function(){for(var e=0;e<this.listItems.length;e++){this.listItems[e].setVisible(!1)}},n.moveGemsToCollectItems=function(){var e=this;this.resetPositionTargetImages();for(var t=this.scene.header.collectItems,n=t.getTargetKeys(),i=this.scene.gameZone.width/2,a=function(a){var s=n[a],r=t.getPositionCollectionItem(s),o=i+r.x,c=r.y-46;e.targetImages[a].setAlpha(1),e.targetImages[a].setVisible(!0);var h=e.getFreeAnim(),l=Phaser.Math.Between(500,1e3);h.setTarget(e.targetImages[a]),h.runGemMoveToPosition(0,l,o,c).on(Phaser.Tweens.Events.TWEEN_COMPLETE,(function(){e.scene.header.collectItems.showCollectItemByKey(s),e.targetImages[a].setVisible(!1)}))},s=0;s<n.length;s++)a(s)},n.resetPositionTargetImages=function(){for(var e,t=ge()(e=this.listItems).call(e,(function(e){return e.visible})),n=263/(t.length+1)+5,i=-n*(t.length-1)/2,a=0;a<t.length;a++){var s;this.targetImages[a]&&(null==(s=this.targetImages[a])||s.setVisible(!1),Phaser.Display.Align.In.Center(this.targetImages[a],this.popup,i+n*a+this.scene.gameZone.width/2,this.scene.gameZone.height/2))}},n.getFreeAnim=function(){var e=new uv(this.scene);return this.listAnimCollectionItem.push(e),e},n.createPopup=function(){this.popup=new Za(this.scene,0,0,280,166,{forceHeightTop:49}),this.popup.setTitle(uA.TEXT_MISSION),this.popup.hideButtonClose(),this.add(this.popup),Phaser.Display.Align.In.Center(this.popup,this.zone)},n.runOpenAnimation=function(){var e;null!=(e=this.popupShowUpAnimation)&&null!=(e=e.tween)&&e.isPlaying()||(this.scene.audio.playSound(Ka.Z.POPUP_SHOW),this.runPopupEntrancesAnimation(0,300),this.runFadeInMaskAnimation(100,300))},n.runCloseAnimation=function(){var e;null!=(e=this.popupFadeOutAnimation)&&null!=(e=e.tween)&&e.isPlaying()||(this.runPopupExitsAnimation(50,200),this.runFadeOutMaskAnimation(0,200))},n.runPopupEntrancesAnimation=function(e,t){if(!this.popupShowUpAnimation){var n=this.popup,i=(n.y,n.scale);this.popupShowUpAnimation=new Na({targets:[this.popup],delay:e,duration:t,props:{y:0,alpha:{start:1,from:1,to:1},scale:{start:0,from:0,to:i}}})}this.popupShowUpAnimation.play()},n.runPopupExitsAnimation=function(e,t){var n=this;this.popupFadeOutAnimation||(this.popupFadeOutAnimation=new Pa.Z({targets:[this.popup],delay:e,duration:t,props:{scale:0},onComplete:function(){n.popup.setY(0),n.scene.screen.close(n.name),n.moveGemsToCollectItems(),n.scene.startGameAfterCollectionItemsScreenClose()}})),this.popupFadeOutAnimation.play()},n.runFadeInMaskAnimation=function(e,t){var n=this;if(!this.popupFadeInMaskAnimation){var i=this.background.alpha;this.popupFadeInMaskAnimation=new wa.Z({targets:[this.background],delay:e,duration:t,props:{alpha:{start:0,from:0,to:i}},onUpdate:function(){n.scene.game.globalScene.requestBackgroundMaskUpdate(ba.o4.COLLECTION_ITEMS_SCREEN,n.background.alpha)}})}this.popupFadeInMaskAnimation.play()},n.runFadeOutMaskAnimation=function(e,t){var n=this;if(!this.popupFadeOutMaskAnimation){var i=this.background.alpha;this.popupFadeOutMaskAnimation=new Pa.Z({targets:[this.background],delay:e,duration:t,props:{alpha:{start:i,from:i,to:0}},onUpdate:function(){n.scene.game.globalScene.requestBackgroundMaskUpdate(ba.o4.COLLECTION_ITEMS_SCREEN,n.background.alpha)}})}this.popupFadeOutMaskAnimation.play()},t}(GameCore.Screen),mA=pA,gA=Fa.Z.DEFAULT,fA=gA.KEY,EA=gA.FRAME,vA=function(e){function t(t,n,i,a){var s;return(s=e.call(this,t,n,i,a)||this).scene=void 0,s.gift=void 0,s.open=function(){e.prototype.open.call((0,Ga.Z)(s)),s.scene.game.globalScene.requestBackgroundMaskUpdate(ba.o4.CLAIM_GIFT_SCREEN,.6)},s.scene=t,s.createBackground(),s.setDepth(ba.Ks.POPUP),s.background.setAlpha(.6),s}(0,o.Z)(t,e);var n=t.prototype;return n.close=function(){e.prototype.close.call(this),this.scene.game.globalScene.requestBackgroundMaskUpdate(ba.o4.CLAIM_GIFT_SCREEN,0)},n.createBackground=function(){var e=this;this.gift=this.scene.make.image({key:fA,frame:EA.ICON_GIFT}),this.gift.setInteractive({useHandCursor:!0}).on(Phaser.Input.Events.POINTER_DOWN,(function(){fr.emit(Nc),e.scene.screen.close(e.name),e.scene.screen.open(ba.o4.COLLISION_COMPLETED_SCREEN,{duration:3e3,onClose:function(){var t=(0,r.Z)(u().mark((function t(){return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.scene.isLevelComplete=!1,e.scene.screen.open(ba.o4.MISSION_COLLECTION_COMPLETE_SCREEN);case 2:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()})})),this.add(this.gift)},t}(GameCore.Screen),SA=Fa.Z.DEFAULT,AA=SA.KEY,TA=SA.FRAME,yA=function(e){function t(t,n){var i;return(i=e.call(this,t)||this).buttonPlay=void 0,i.buttonShare=void 0,i.avatar=void 0,i.rankIcon=void 0,i.rankText=void 0,i.bgRankText=void 0,i.username=void 0,i.score=void 0,i.scoreText=void 0,i.background=void 0,i.showPopUp=void 0,i.showItems=void 0,i.payload=void 0,i.handleChallengeFriend=function(){var e=i.payload.playerId;i.scene.storage.dispatch(Ko(e))},i.handleShare=function(){i.scene.storage.dispatch(Rr())},i.createBackground(),i.updateSize(),i.createAvatar(),i.createRank(),i.createUsername(),i.createScore(),i.createButtonShare(),i.createButtonPlay(),n&&i.updateInfo(n),i.scene.add.existing((0,Ga.Z)(i)),i}(0,o.Z)(t,e);var n=t.prototype;return n.updateInfo=function(e){this.payload=(0,s.Z)({scoreRight:!0,isHighlight:!1,useChallenge:!1,backgroundFrame:""},e),this.updateBackground(),this.updateAvatar(),this.updateRank(),this.updateUsername(),this.updateScore(),this.updateButton(),this.alignScoreAndButton()},n.createBackground=function(){this.background=this.scene.make.image({key:AA,frame:TA.LEADERBOARD_BG_DARK}),this.background.setWorldSize(312,60),this.background.setVisible(!1),this.add(this.background)},n.updateBackground=function(){this.payload.backgroundFrame?(this.background.setVisible(!0),this.background.setFrame(this.payload.backgroundFrame||TA.LEADERBOARD_BG_DARK),this.background.setWorldSize(312,60)):this.background.setVisible(!1)},n.updateSize=function(){var e=this.background,t=e.width,n=e.height;this.setSize(t,n)},n.createAvatar=function(){this.avatar=new jh(this.scene,{key:AA,frame:TA.AVATAR_BORDER,background:TA.AVATAR_BACKGROUND,width:43,height:45,radius:30,borderWidth:5}),this.add(this.avatar),Phaser.Display.Align.In.LeftCenter(this.avatar,this,-50,0)},n.updateAvatar=function(){var e=this.payload,t=e.playerId,n=e.photo;this.avatar.loadPhoto(t,n)},n.createRank=function(){this.createRankIcon(1),this.createBgRankText(),this.createRankText(1)},n.updateRank=function(){var e=this.payload.rank;if(e<0)return this.rankIcon.setVisible(!1),this.rankText.setVisible(!0),void this.rankText.setText("99+");this.updateRankIcon(e),this.updateRankText(e)},n.getRankIconFrame=function(e){var t=TA.ICON_CUP_GOLD;switch(e){case 1:t=TA.ICON_CUP_GOLD;break;case 2:t=TA.ICON_CUP_SILVER;break;case 3:t=TA.ICON_CUP_COPPER}return t},n.createRankIcon=function(e){void 0===e&&(e=0);var t=this.getRankIconFrame(e);this.rankIcon=this.scene.make.image({key:AA,frame:t}),this.rankIcon.setWorldSize(28,24),this.add(this.rankIcon),Phaser.Display.Align.In.LeftCenter(this.rankIcon,this.background,-11,6)},n.updateRankIcon=function(e){if(e>3)this.rankIcon.setVisible(!1);else{this.rankIcon.setVisible(!0);var t=this.getRankIconFrame(e);this.rankIcon.setWorldSize(30,37),this.rankIcon.setFrame(t)}},n.createBgRankText=function(){this.bgRankText=this.scene.make.image({key:AA,frame:TA.BG_SMALL_CIRCLE}),this.bgRankText.setWorldSize(29,29),this.add(this.bgRankText),Phaser.Display.Align.In.LeftCenter(this.bgRankText,this.background,-11,1)},n.createRankText=function(e){void 0===e&&(e=0),this.rankText=this.scene.make.bitmapText({font:Wa.Z.DARK.KEY,size:this.scene.fontSize(26),text:""+e,origin:{x:.5,y:.5}}),this.add(this.rankText),Phaser.Display.Align.In.Center(this.rankText,this.bgRankText,0,4)},n.updateRankText=function(e){if(e<=3)return this.bgRankText.setVisible(!1),void this.rankText.setVisible(!1);this.bgRankText.setVisible(!0),this.rankText.setVisible(!0),this.rankText.setText(""+e)},n.getShortName=function(e){return e.substring(0,14)},n.createUsername=function(){this.username=this.scene.make.text({text:this.getShortName("FRIEND NAME"),style:{fontSize:this.scene.fontSize(42)+"px",fontStyle:"bold"}}),this.add(this.username),Phaser.Display.Align.In.Center(this.username,this.avatar,85,-1)},n.updateUsername=function(){var e=this.payload.name,t=e;"Anonymous"===e&&(t=this.scene.lang.Text.ANONYMOUS),this.username.setText(this.getShortName(t))},n.createScore=function(){this.scoreText=this.scene.make.bitmapText({text:"132500",font:Wa.Z.NUMBER_YELLOW.KEY,size:this.scene.fontSize(48)}),this.add(this.scoreText),Phaser.Display.Align.In.Center(this.scoreText,this.avatar,130,3)},n.updateScore=function(){var e=this.payload.score;this.scoreText.setText(e)},n.createButtonPlay=function(){this.buttonPlay=new Ba.Z(this.scene,AA,TA.BUTTON_CHALLENGE,60,35),this.buttonPlay.setName("ChallengeFriend"),Phaser.Display.Align.In.RightCenter(this.buttonPlay,this,-7,2),this.buttonPlay.onClick=this.handleChallengeFriend,this.add(this.buttonPlay)},n.createButtonShare=function(){this.buttonShare=new Ba.Z(this.scene,AA,TA.BUTTON_SHARE,60,35),this.buttonShare.setName("Share"),Phaser.Display.Align.In.RightCenter(this.buttonShare,this,-7,2),this.buttonShare.onClick=this.handleShare,this.add(this.buttonShare)},n.updateButton=function(){var e=this.payload,t=e.isHighlight;if(!e.useChallenge)return this.buttonShare.setVisible(!1),void this.buttonPlay.setVisible(!1);t?(this.buttonShare.setVisible(!0),this.buttonPlay.setVisible(!1)):(this.buttonShare.setVisible(!1),this.buttonPlay.setVisible(!0))},n.alignScoreAndButton=function(){this.payload.useChallenge?Phaser.Display.Align.In.Center(this.scoreText,this.avatar,110,3):Phaser.Display.Align.In.Center(this.scoreText,this.avatar,200,3)},n.runShowPopUpAnimation=function(e,t){this.scene.tweens.killTweensOf(this),this.showPopUp=new zh({targets:[this],delay:e,duration:t,props:{y:{start:this.y+70,to:this.y}}}),this.showPopUp.play()},n.runShowItemAnimation=function(e,t){var n=this.getAll();this.scene.tweens.killTweensOf(n),this.showItems=new Wh({targets:n,duration:t,delay:this.scene.tweens.stagger(50,{start:e+50}),props:{scale:{duration:1e3,getStart:function(e){return.8*e.scale},getEnd:function(e){return e.scale},ease:Phaser.Math.Easing.Elastic.Out,easeParams:[.1,.45]}}}),this.showItems.play()},n.runShowUpAnimation=function(e,t){void 0===e&&(e=0),void 0===t&&(t=300);var n=100*e;this.runShowPopUpAnimation(n,t),this.runShowItemAnimation(n,t)},n.setFrameBackground=function(e){this.background.setFrame(e)},t}(Phaser.GameObjects.Container),IA=yA,CA=(Fa.Z.DEFAULT.FRAME,function(e){function t(t){var n;return(n=e.call(this,t)||this).myScoreBlock=void 0,n.scene=t,n.setName("FooterBar"),n.createMyScoreBlock(),n.scene.add.existing((0,Ga.Z)(n)),n}(0,o.Z)(t,e);var n=t.prototype;return n.createMyScoreBlock=function(){this.myScoreBlock=new IA(this.scene),this.myScoreBlock.setVisible(!1),this.add(this.myScoreBlock),Phaser.Display.Align.In.Center(this.myScoreBlock,this)},n.updateMyScoreBlock=function(e){this.myScoreBlock.setVisible(!0),this.myScoreBlock.updateInfo(e),this.myScoreBlock.runShowUpAnimation(0,1e3)},t}(Phaser.GameObjects.Container)),OA=CA;function bA(e,t){var n="undefined"!==typeof Dh()&&wh()(e)||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){var n;if(!e)return;if("string"===typeof e)return RA(e,t);var i=We()(n=Object.prototype.toString.call(e)).call(n,8,-1);"Object"===i&&e.constructor&&(i=e.constructor.name);if("Map"===i||"Set"===i)return bh()(e);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return RA(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var i=0;return function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function RA(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var DA,_A=Fa.Z.DEFAULT.FRAME,wA=function(e){function t(t){var n;(n=e.call(this,t)||this).scene=void 0,n.currentPlayerId=void 0,n.scroller=void 0,n.scene=t;var i=n.scene.player;return n.currentPlayerId=i.getPlayerId(),n.createReuseScroller(),n.scene.add.existing((0,Ga.Z)(n)),n}(0,o.Z)(t,e);var n=t.prototype;return n.createReuseScroller=function(){this.scroller=new sh(this.scene,{classType:IA,listConfigs:[],width:310,height:330,padding:0,marginTop:0,marginBottom:0}),this.scene.renderer instanceof Phaser.Renderer.WebGL.WebGLRenderer&&this.scroller.createBound(Fa.Z.DEFAULT.KEY,Fa.Z.DEFAULT.FRAME.BLANK,40,16643027),this.scroller.createMask(),this.scroller.setPosition(0,70),this.add(this.scroller)},n.updateData=function(e,t){var n=ui()(e)||[];if(!(n.length<1)){for(var i,a=[],s=0,r=bA(pi()(n).call(n,(function(e,t){return+t.score-+e.score})));!(i=r()).done;){var o=i.value,c=o.playerId,h=o.photo,l=o.score,u=o.name,d=o.rank;if(c){var p=this.currentPlayerId===c,m=t===ts,g=t===ns,f=s>=1?_A.LEADERBOARD_BG_DARK:_A.LEADERBOARD_BG_LIGHT,E=u;"Anonymous"===u&&(E=this.scene.lang.Text.ANONYMOUS);var v={playerId:c,photo:h,name:E,rank:d,score:l,scoreRight:m,useChallenge:g,isHighlight:p,backgroundFrame:f};a.push(v),++s>=2&&(s=0)}}this.scroller.updateConfig(a),this.showLeaders()}},n.removeLeaders=function(){this.scroller.updateConfig([])},n.getLeaders=function(){return this.scroller.getChildren()},n.showLeaders=function(){var e=this,t=this.getLeaders();if(!(t.length<1)){for(var n=Math.min(t.length,6),i=0;i<n;i++){var a=t[i];a&&(a.setVisible(!0),a.runShowUpAnimation(i,300))}var s=300+100*n+250;this.scene.time.delayedCall(s,(function(){e.scroller.setEnable(!0)}))}},t}(Phaser.GameObjects.Container),PA=wA,xA=Fa.Z.DEFAULT,kA=xA.KEY,MA=xA.FRAME,LA=function(e){function t(t){var n;return(n=e.call(this,t)||this).leaders=void 0,n.buttonClose=void 0,n.loading=void 0,n.message=void 0,n.messageAnimation=void 0,n.setSize(310,430),n.createLoading(),n.createMessage(),n.createContents(),n.createAnimation(),n.scene.add.existing((0,Ga.Z)(n)),n}(0,o.Z)(t,e);var n=t.prototype;return n.showLoading=function(e){this.loading.setVisible(e),this.showMessage(!1)},n.showMessage=function(e,t){this.message.setVisible(e),t&&this.messageAnimation.play()},n.createLoading=function(){this.loading=new Sc.Z(this.scene),this.loading.setVisible(!1),this.add(this.loading)},n.createMessage=function(){this.message=this.scene.make.image({ket:kA,frame:MA.TEXT_LEADERBOARD_EMPTY});var e=this.scene.world.getPixelRatio(),t=this.message,n=t.width,i=t.height;this.message.setWorldSize(n/e,i/e),this.add(this.message),Phaser.Display.Align.In.Center(this.message,this)},n.createContents=function(){this.createLeaders(),this.createBorderContent()},n.createLeaders=function(){this.leaders=new PA(this.scene),this.add(this.leaders),Phaser.Display.Align.In.Center(this.leaders,this,0,-89)},n.createContentBackground=function(){var e=this.scene.make.container({}),t=this.scene.make.image({key:kA,frame:MA.POPUP_TOP});t.setWorldSize(350,55);var n=this.scene.make.image({key:kA,frame:MA.POPUP_MIDDLE});n.setWorldSize(350,430);var i=this.scene.make.image({key:kA,frame:MA.POPUP_BOTTOM});i.setWorldSize(350,22),e.add(t),e.add(n),e.add(i),Phaser.Display.Align.In.Center(n,e),Phaser.Display.Align.In.Center(t,n,0,-n.displayHeight/2-t.displayHeight/2),Phaser.Display.Align.In.Center(i,n,0,n.displayHeight/2+i.displayHeight/2-10),this.add(e),Phaser.Display.Align.In.Center(e,this,0,6)},n.createAnimation=function(){this.messageAnimation=new il.Z({targets:[this.message],duration:60,repeat:2})},n.createBorderContent=function(){var e=this.scene.make.image({key:kA,frame:MA.LEADERBOARD_BORDER_TOP});e.setWorldSize(312,12),this.add(e),Phaser.Display.Align.In.TopCenter(e,this,0,-29);var t=this.scene.make.image({key:kA,frame:MA.LEADERBOARD_BORDER_MIDDLE});t.setWorldSize(312,370),this.add(t),Phaser.Display.Align.In.Center(t,this,0,11);var n=this.scene.make.image({key:kA,frame:MA.LEADERBOARD_BORDER_BOTTOM});n.setWorldSize(312,13),this.add(n),Phaser.Display.Align.In.Center(n,this,0,202)},t}(Phaser.GameObjects.Container),NA=LA,GA=GameCore.Configs.LeadersBoard,BA=Fa.Z.DEFAULT,FA=(BA.KEY,BA.FRAME),UA=function(e){function t(t,n,i,a){var s;return(s=e.call(this,t,n,i,a)||this).popup=void 0,s.popupShowUpAnimation=void 0,s.popupFadeOutAnimation=void 0,s.popupFadeInMaskAnimation=void 0,s.popupFadeOutMaskAnimation=void 0,s.board=void 0,s.footerBar=void 0,s.isRequesting=void 0,s.isSwitchable=void 0,s.tabId=void 0,s.offset=void 0,s.isStateChanged=void 0,s.open=function(t){var n=s.scene.game.lang;e.prototype.open.call((0,Ga.Z)(s),t),s.setVisible(!0),s.selectWorldTab(),s.runOpenAnimation(),s.board.showLoading(!0);var i=[{selector:Yh,callback:function(e){if(s.isRequesting=e,s.board.showLoading(e),s.scene.scene.isActive()&&s.visible&&!1===e){if(!s.scene)return;var t=s.scene.game.storage.getState(),i=Vh(t);s.isSwitchable=!0,i&&0!==H()(i).length?s.board.leaders.updateData(i,s.tabId):s.board.showMessage(!0,n.Text.LEADERBOARD_EMPTY);var a=lr(t),r=s.scene.player.getBestScore(),o=a.bestScore,c=void 0===o?0:o,h=s.scene.player.getPlayer(),l=i[h.playerId]||{playerId:h.playerId,name:h.name,photo:h.photo,score:r>c?r:c,rank:-1};s.footerBar.updateMyScoreBlock({playerId:l.playerId,rank:l.rank,photo:l.photo,name:l.name,score:l.score,backgroundFrame:FA.LEADERBOARD_BG_OWN,isHighlight:!0,useChallenge:!1})}}}];s.handleStateChange(i)},s.clickClose=function(){s.runCloseAnimation()},s.setVisible(!1),s.createPopup(),s.createBoard(),s.createFooterBar(),s.setDepth(ba.Ks.POPUP),s.background.setAlpha(.5),s}(0,o.Z)(t,e);var n=t.prototype;return n.handleStateChange=function(e){var t=this;this.isStateChanged||(e.forEach((function(e){var n=e.selector,i=e.callback;t.scene.storage.watch(n,i)})),this.isStateChanged=!0)},n.createPopup=function(){this.popup=new Za(this.scene,0,-21,350,500,{forceHeightTop:52}),this.add(this.popup),this.popup.setTitle(FA.TEXT_LEADER_BOARD),this.popup.setOnClickButtonClose(this.clickClose),Phaser.Display.Align.In.Center(this.popup,this.zone,0,0)},n.createBoard=function(){this.board=new NA(this.scene),this.popup.add(this.board),Phaser.Display.Align.In.Center(this.board,this.popup,0,-25)},n.createFooterBar=function(){this.footerBar=new OA(this.scene),this.popup.add(this.footerBar),Phaser.Display.Align.In.Center(this.footerBar,this.popup,0,151)},n.selectWorldTab=function(){this.tabId=ts,this.offset=0,this.board.showLoading(!0),this.board.leaders.removeLeaders(),this.scene.storage.dispatch(Uh()),this.scene.storage.dispatch(Bh(GA.LeaderboardId,ts,GA.Limit,this.offset))},n.runCloseAnimation=function(){var e;null!=(e=this.popupFadeOutAnimation)&&null!=(e=e.tween)&&e.isPlaying()||(this.runPopupExitsAnimation(50,200),this.runFadeOutMaskAnimation(0,200))},n.runPopupExitsAnimation=function(e,t){var n,i=this;this.popupFadeOutAnimation||(this.popupFadeOutAnimation=new Pa.Z({targets:[this.popup],delay:e,duration:t,props:{scale:0},onComplete:function(){i.popup.setY(0),i.board.showLoading(!1),i.close()}})),null==(n=this.popupFadeOutAnimation)||n.play()},n.runOpenAnimation=function(){this.scene.audio.playSound(Ka.Z.POPUP_SHOW),this.runPopupEntrancesAnimation(0,300),this.runFadeInMaskAnimation(100,300)},n.runPopupEntrancesAnimation=function(e,t){if(!this.popupShowUpAnimation){var n=this.popup.scale;this.popupShowUpAnimation=new Na({targets:[this.popup],delay:e,duration:t,props:{y:0,alpha:{start:1,from:1,to:1},scale:{start:0,from:0,to:n}}})}this.popupShowUpAnimation.play()},n.runFadeInMaskAnimation=function(e,t){if(!this.popupFadeInMaskAnimation){var n=this.background.alpha;this.popupFadeInMaskAnimation=new wa.Z({targets:[this.background],delay:e,duration:t,props:{alpha:{start:0,from:0,to:n}}})}this.popupFadeInMaskAnimation.play()},n.runFadeOutMaskAnimation=function(e,t){if(!this.popupFadeOutMaskAnimation){var n=this.background.alpha;this.popupFadeOutMaskAnimation=new Pa.Z({targets:[this.background],delay:e,duration:t,props:{alpha:{start:n,from:n,to:0}}})}this.popupFadeOutMaskAnimation.play()},t}(GameCore.Screen),HA=UA,VA=GameCore.Configs,YA=VA.Match,ZA=VA.Network,WA=function(e){function t(){for(var t,n,a=arguments.length,s=new Array(a),o=0;o<a;o++)s[o]=arguments[o];return(n=e.call.apply(e,A()(t=[this]).call(t,s))||this).levelManager=void 0,n.mapManager=void 0,n.targetMissionManager=void 0,n.header=void 0,n.main=void 0,n.footer=void 0,n.isGameOver=void 0,n.isLevelComplete=void 0,n.isGameReplay=void 0,n.animDice=void 0,n.outOfMoveLabel=void 0,n.run=function(){n.updateSoundIcon(),n.restartGame(),n.startGame()},n.create=function(){e.prototype.create.call((0,Ga.Z)(n)),n.createBackground(na.Z.BACKGROUND.KEY),n.createLevelManager(),n.createMapManager(),n.createTargetMissionManager(),n.createOutOfMove(),n.createHeader(),n.createMain(),n.createFooter(),n.createAnimDice(),n.createScreens(),n.createInput(),n.preLoadAds(),n.listenEvents()},n.handleUpdateStatusSound=function(){var e=n.player.getPlayerSettings().sound;n.header.updateButtonSoundByStatus(e)},n.handleClickSound=function(){var e=!n.player.getPlayerSettings().sound;n.header.updateButtonSoundByStatus(e),n.player.setSetting("sound",e)},n.handleShowInterstitialAd=(0,r.Z)(u().mark((function e(){var t,a,s;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=n.game,a=t.globalScene,s=t.lang,e.prev=1,n.audio.pauseMusic(),n.ads.canbeShowInterstitialAd()){e.next=5;break}return e.abrupt("return");case 5:return a.screen.open(ba.o4.NOTIFY_SCREEN,{message:s.Text.LOADING_AD,duration:ZA.Timeout,loading:!0}),e.next=8,n.ads.showInterstitialAdAsync();case 8:n.analytics.showInterstitialAd(n.getSceneName()),e.next=14;break;case 11:return e.prev=11,e.t0=e.catch(1),e.abrupt("return");case 14:return e.prev=14,a.screen.close(ba.o4.NOTIFY_SCREEN),n.audio.playMusic(),n.ads.preloadInterstitialAdAsync().catch(i.tO),n.audio.playMusic(),e.finish(14);case 20:case"end":return e.stop()}}),e,null,[[1,11,14,20]])}))),n}(0,o.Z)(t,e);var n=t.prototype;return n.preload=function(){this.events.on(Phaser.Scenes.Events.WAKE,this.run),this.events.on(Phaser.Scenes.Events.CREATE,this.run)},n.updateSoundIcon=function(){var e=this.player.getPlayerSettings().sound;this.header.updateButtonSoundByStatus(e)},n.listenEvents=function(){fr.on(Lc,this.handleUpdateStatusSound)},n.preLoadAds=function(){this.ads.preloadInterstitialAdAsync(),this.ads.preloadRewardedVideoAsync()},n.createLevelManager=function(){this.levelManager=new xE(this)},n.createMapManager=function(){this.mapManager=new kE(this)},n.createTargetMissionManager=function(){this.targetMissionManager=new Lv},n.createOutOfMove=function(){this.outOfMoveLabel=new zS(this)},n.createHeader=function(){this.header=new $E(this),Phaser.Display.Align.In.TopCenter(this.header,this.gameZone)},n.createMain=function(){this.main=new Mv(this)},n.createFooter=function(){this.footer=new TS(this),Phaser.Display.Align.In.BottomCenter(this.footer,this.gameZone)},n.createAnimDice=function(){this.animDice=new YS(this)},n.createInput=function(){this.header.buttonSound.onClick=this.handleClickSound.bind(this),this.header.buttonSetting.onClick=this.openSettingScreen.bind(this)},n.openSettingScreen=function(){this.screen.open(ba.o4.SETTINGS_SCREEN)},n.createScreens=function(){this.createSettingScreen(),this.createCollectionCompletedScreen(),this.createMissionCollectionCompleteScreen(),this.createMissionFailScreen(),this.createCollectionItemsScreen(),this.createClaimGiftScreen(),this.createLeaderBoardScreen(),this.createStartOverScreen()},n.createStartOverScreen=function(){this.screen.add(ba.o4.START_OVER_SCREEN,qa)},n.createSettingScreen=function(){this.screen.add(ba.o4.SETTINGS_SCREEN,GS)},n.createCollectionCompletedScreen=function(){this.screen.add(ba.o4.COLLISION_COMPLETED_SCREEN,JS)},n.createMissionCollectionCompleteScreen=function(){this.screen.add(ba.o4.MISSION_COLLECTION_COMPLETE_SCREEN,eA)},n.createMissionFailScreen=function(){this.screen.add(ba.o4.MISSION_FAIL_SCREEN,cA)},n.createCollectionItemsScreen=function(){this.screen.add(ba.o4.COLLECTION_ITEMS_SCREEN,mA)},n.createClaimGiftScreen=function(){this.screen.add(ba.o4.CLAIM_GIFT_SCREEN,vA)},n.createLeaderBoardScreen=function(){this.screen.add(ba.o4.LEADER_BOARD_SCREEN,HA)},n.disableInput=function(){this.input.enabled=!1},n.enableInput=function(){this.input.enabled=!0},n.updateStateGameOver=function(e){this.isGameOver=e},n.handleRetryLevel=function(){this.analytics.levelStart(this.levelManager.getLevel(),void 0,this.getLevelName()),this.restartGame(),this.clearFen(),this.startGame()},n.restartGame=function(){this.updateStateGameOver(!1),this.isGameOver=!1,this.isGameReplay=!1,this.animDice.stopAnimation(),this.header.restart(),this.main.board.restart(),this.footer.nextDice.restart(),this.footer.pieces.restart(),this.footer.itemMagnet.restartItemMagnet(),this.footer.itemMagnet.animationMagnetItem.stopAnimation()},n.handleLoadFen=function(){var e,t=this.storage.getState(),n=(null==(e=rr(t))?void 0:e.data)||{},i=n.fen,a=n.magnetAmount,s=void 0===a?0:a,r=n.magnetPercent,o=void 0===r?0:r,c=n.magnetScore,h=void 0===c?0:c,l=n.jsonAmount,u=n.listDataDice;u&&(this.footer.nextDice.listDataDice=u),i?this.main.board.exploreFen(i):(this.loadBoardByMap(),this.loadPiecesByMap()),this.footer.itemMagnet.updateAmountUsed(s),this.footer.itemMagnet.updateTotalScore(h),this.footer.itemMagnet.itemPercent.updatePercent(o),l&&0!==H()(l).length&&this.header.collectItems.updateJsonAmountByFen(l)},n.handleCheckFenAmountJsonComplete=function(){var e=this;this.header.collectItems.checkCompleteMission()&&this.time.delayedCall(3e3,(function(){e.handleCollectionItemsComplete()}))},n.loadBoardByMap=function(){for(var e=this.mapManager.getTileMap().layers,t=e.length,n="",i=0;i<t;i++)for(var a=e[i].data,s=0;s<a.length;s++){for(var r=a[s],o=0;o<r.length;o++){var c=r[o],h=c.index;c.index<0&&(h="x"),n+=h+"-"}n=We()(n).call(n,0,-1)+","}this.main.board.exploreFen(We()(n).call(n,0,-1))},n.loadPiecesByMap=function(){var e,t=[],n=this.mapManager.getTileMap().getObjectLayer("spawnOrder");if(n){for(var i=n.objects,a=0;a<i.length;a++){var s=i[a].type;t[a]=s}this.footer.nextDice.listDataDice=A()(e=[]).call(e,t)}},n.startGame=function(){try{this.background.setTint(16777215),this.audio.playSound(Ka.Z.START_GAME),this.enableInput(),this.updateLevelManager(),this.mapManager.reloadMap(),this.loadTargetByMap(),this.header.enableItems(),this.header.setVisible(!0),this.header.start(),this.footer.enableItems(),this.handleLoadFen(),this.handleCheckFenAmountJsonComplete(),this.openCollectionItemsScreen()}catch(e){e instanceof XS&&this.handleInvalidTileMap()}},n.handleInvalidTileMap=function(){var e=this.game,t=e.globalScene,n=e.lang;t.screen.open(ba.o4.NOTIFY_SCREEN,{message:n.Text.LOADING_LEVEL,duration:ZA,loading:!0});var i=this.levelManager.getLevelConfig();if(i){var a=i.key,s=i.mapJson;this.cache.tilemap.exists(a)?this.handleLoadNewLevel():(this.load.tilemapTiledJSON(a,s),this.load.start(),this.load.off(Phaser.Loader.Events.COMPLETE),this.load.once(Phaser.Loader.Events.COMPLETE,this.handleLoadNewLevel.bind(this)))}},n.handleLoadNewLevel=function(){this.game.globalScene.screen.close(ba.o4.NOTIFY_SCREEN),this.mapManager.reloadMap(),this.clearFen(),this.restartGame(),this.startGame()},n.updateLevelManager=function(){var e=this.storage.getState(),t=cr(e);this.levelManager.setLevel(t)},n.loadTargetByMap=function(){var e=this.mapManager.getTileMap().properties;if(!e||!(0,ME.isArray)(e)||e.length<2)throw new XS;var t=e[0].value,n=e[1].value;this.targetMissionManager.setTargetValue(t),this.targetMissionManager.setTargetType(n)},n.openCollectionItemsScreen=function(){var e=this,t=this.header.collectItems.getJsonTarget();this.header.collectItems.hideListCollectItems(),this.disableInput(),this.time.delayedCall(500,(function(){e.enableInput(),e.screen.open(ba.o4.COLLECTION_ITEMS_SCREEN,{jsonTarget:t,duration:1500})}))},n.startGameAfterCollectionItemsScreenClose=function(){if(this.footer.nextDice.listDataDice)return this.footer.nextDice.handleNextDice(this.footer.nextDice.listDataDice[0]),this.footer.pieces.hideDice(),this.footer.pieces.showDice(),void this.footer.nextDice.handleNextDice(this.footer.nextDice.listDataDice[1]);this.footer.nextDice.handleNextDice(),this.footer.pieces.hideDice(),this.footer.pieces.showDice(),this.footer.nextDice.handleNextDice()},n.getFen=function(){for(var e="",t=this.main.board.dataBoard,n=0;n<t.length;n++){for(var i=t[n],a="",s=0;s<i.length;s++){var r=i[s].value;a+=r?r+"-":"x-"}e+=(e?",":"")+We()(a).call(a,0,-1)}return e},n.preloadNextLevel=function(){var e=this.levelManager.getNextLevelConfig();if(e){var t=e.key,n=e.mapJson;this.cache.tilemap.exists(t)||(this.load.tilemapTiledJSON(t,n),this.load.start())}},n.preloadCurrentLevel=function(){var e=this.levelManager.getLevelConfig();if(e){var t=e.key,n=e.mapJson;this.cache.tilemap.exists(t)?this.handleLoadCurrentMapComplete():(this.load.tilemapTiledJSON(t,n),this.load.start())}},n.handleLoadCurrentMapComplete=function(){var e=this.game.globalScene;this.mapManager.reloadMap(),e.screen.close(ba.o4.NOTIFY_SCREEN)},n.handleLoadCurrentMapError=function(e){var t=this.game.globalScene,n=new uf("Load resources at LoadScene failed.");(0,i.R0)(n,{file:null==e?void 0:e.url}),t.screen.close(ba.o4.NOTIFY_SCREEN)},n.clearFen=function(){var e=this.storage.getState(),t=or(e),n=rr(e).data||{},i=lr(e).score,a=void 0===i?0:i,r=this.levelManager.getLevel();this.storage.dispatch(wo(t,{score:a,data:(0,s.Z)({},n,{fen:"",jsonAmount:{},magnetPercent:0,magnetAmount:0,magnetScore:0}),level:r,updateAt:Date.now()}))},n.updateMatchData=function(){var e,t,n;if(!this.isGameOver){var i=this.getFen(),a=this.storage.getState(),r=rr(a).data||{},o=or(a);if(Ds(a)===ca){var c=lr(a).score,h=void 0===c?0:c,l=this.footer.itemMagnet.itemPercent.percent,u=this.footer.itemMagnet.amountUsed,d=this.footer.itemMagnet.totalScore,p=this.header.collectItems.getJsonAmount();this.footer.nextDice.listDataDice=A()(e=[]).call(e,We()(t=this.footer.nextDice.listDataDice).call(t,1));var m=A()(n=[]).call(n,this.footer.nextDice.listDataDice),g=this.levelManager.getLevel();this.storage.dispatch(wo(o,{score:h,data:(0,s.Z)({},r,{fen:i,magnetPercent:l,magnetAmount:u,magnetScore:d,jsonAmount:(0,s.Z)({},p),listDataDice:m}),_id:o,level:g,updateAt:Date.now()}))}}},n.setLevelCompleted=function(e){this.isLevelComplete=e},n.getLevelName=function(){var e,t=this.levelManager.getLevel();return"journey_"+Gl()(e=GameCore.Utils.Number).call(e,t,4,"0")},n.handleCollectionItemsComplete=function(){var e=this;if(this.header.collectItems.checkCompleteMission()){var t=this.levelManager.getLevel();this.analytics.levelComplete(t,void 0,this.getLevelName()),this.handleNextLevel(),t>_a.length-1&&this.time.delayedCall(2e3,(function(){var t=e.game,n=t.globalScene,i=t.lang;n.screen.open(ba.o4.NOTIFY_SCREEN,{message:i.Text.LOADING,duration:2e3}),e.time.delayedCall(1e3,(function(){e.scene.switch(fa.C.DASHBOARD_SCENE)}))})),this.screen.open(ba.o4.COLLISION_COMPLETED_SCREEN,{duration:3e3,onClose:function(){var t=(0,r.Z)(u().mark((function t(){return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.isLevelComplete=!1,t.next=3,e.handleShowInterstitialAd().catch(i.tO);case 3:e.screen.open(ba.o4.MISSION_COLLECTION_COMPLETE_SCREEN);case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()})}},n.handleNextLevel=function(){var e=this.levelManager.getNextLevelConfig();if(!e)return this.levelManager.increaseLevel(),void FBInstant.player.setDataAsync({level:this.levelManager.getLevel()});var t=e.key;this.cache.tilemap.exists(t)?this.handleLoadMapComplete():(this.preloadNextLevel(),this.load.off(Phaser.Loader.Events.COMPLETE),this.load.once(Phaser.Loader.Events.COMPLETE,this.handleLoadMapComplete.bind(this)))},n.updateLevelLocalStorage=function(){var e=this.levelManager.getLevel()||1,t=this.player.getPlayerId();Pe(YA.JourneyMatchStore+"-"+t,{level:e})},n.handleLoadMapComplete=function(){var e=(0,r.Z)(u().mark((function e(){var t;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,this.levelManager.increaseLevel(),t=this.levelManager.getLevel(),e.next=6,FBInstant.player.setDataAsync({level:t}).then((function(e){})).catch((function(e){}));case 6:if(!(t>_a.length-1)){e.next=9;break}return e.abrupt("return");case 9:Pe(YA.JourneyMatchStore+"-"+this.player.getPlayerId(),{level:t}),this.mapManager.reloadMap(),this.clearFen(),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0);case 17:case"end":return e.stop()}}),e,this,[[0,14]])})));return function(){return e.apply(this,arguments)}}(),n.endGame=function(){this.restartGame(),this.storage.dispatch(qo())},n.handleRequestFinishGame=function(){this.isGameOver=!0,this.analytics.levelFail(this.levelManager.getLevel(),void 0,this.getLevelName()),this.handleShowInterstitialAd().catch(i.tO),this.screen.open(ba.o4.MISSION_FAIL_SCREEN)},n.getLevelLogInfo=function(){return{level:this.levelManager.getLevel(),levelName:this.getLevelName()}},t}(nc.Z),KA=WA;null==(DA=void 0)||DA.accept(GameCore.LiveUpdate.Scene(fa.C.JOURNEY_SCENE));var zA=function(e){function t(){for(var t,n,i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];return(n=e.call.apply(e,A()(t=[this]).call(t,a))||this).isVisible=!0,n.browserPrefixes=["moz","ms","o","","webkit"],n.visibleCallbacks=[],n.hiddenCallbacks=[],n.handleVisibilityChange=function(e){if("boolean"===typeof e)return e?n.onVisibleEvent():n.onHiddenEvent();var t=n.getBrowserPrefix(),i=n.getHiddenPropertyName(t);return document[i]?n.onHiddenEvent():n.onVisibleEvent()},n}(0,o.Z)(t,e);var n=t.prototype;return n.configure=function(){var e=this,t=this.getBrowserPrefix(),n=this.getVisibilityEvent(t);document.addEventListener(n,this.handleVisibilityChange,!1),document.addEventListener("focus",(function(){e.handleVisibilityChange(!0)}),!1),document.addEventListener("blur",(function(){e.handleVisibilityChange(!1)}),!1),window.addEventListener("focus",(function(){e.handleVisibilityChange(!0)}),!1),window.addEventListener("blur",(function(){e.handleVisibilityChange(!1)}),!1)},n.addEventVisible=function(e){this.visibleCallbacks.push(e)},n.addEventHidden=function(e){this.hiddenCallbacks.push(e)},n.isGameVisible=function(){return this.isVisible},n.getHiddenPropertyName=function(e){return e?e+"Hidden":"hidden"},n.getVisibilityEvent=function(e){return(e||"")+"visibilitychange"},n.getBrowserPrefix=function(){for(var e=0;e<this.browserPrefixes.length;e++)if(this.getHiddenPropertyName(this.browserPrefixes[e])in document)return this.browserPrefixes[e];return""},n.onVisibleEvent=function(){this.isVisible||(this.isVisible=!0,this.visibleCallbacks.forEach((function(e){e()})))},n.onHiddenEvent=function(){this.isVisible&&(this.isVisible=!1,this.hiddenCallbacks.forEach((function(e){e()})))},t}(Phaser.Plugins.BasePlugin),XA=zA,jA=n(635),JA=["Enable"],qA=function(e){function t(){return e.apply(this,arguments)||this}(0,o.Z)(t,e);var i=t.prototype;return i.boot=function(){var t=(0,r.Z)(u().mark((function t(){return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.prototype.boot.call(this),this.addExtraGameObjectMethods(),this.addExtraFBInstantFunctions(),this.addPlugins(),t.next=6,this.addDevPlugins();case 6:return t.next=8,this.initAdsAsync();case 8:this.addScenes(),this.addDevScenes(),this.initWorld(),this.initStorage(),this.initLanguage(),this.initVisibilityChangeHandler(),this.initUtils(),this.initRollbar(),this.initConsole(),this.initDebugger(),this.initStatistics(),this.initParticleEditor(),this.initProfilerPlugin(),this.initAdaptivePerformance(),this.initCanvasRecorderPlugin();case 23:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),i.start=function(){e.prototype.start.call(this)},i.updateFps=function(e){void 0===e&&(e=60),this.getFps()!==e&&this.setFps(e)},i.getFps=function(){return this.scene.game&&this.scene.game.loop&&this.scene.game.loop.raf?this.scene.game.loop.raf.fps:5},i.setFps=function(e){this.scene.game&&this.scene.game.loop&&this.scene.game.loop.raf&&"function"===typeof this.scene.game.loop.raf.updateFps&&this.scene.game.loop.raf.updateFps(e)},i.addExtraGameObjectMethods=function(){var e=new v(this);e.addKillRevive(),e.addKillReviveGroup(),e.addDrawDebugBox(),e.addSetWorldSize(),e.addSetWorldSizeForContainer(),e.addGetWorldPosition(),e.addHighQuality(),e.addSetLineHeightForBitmapText()},i.addExtraFBInstantFunctions=function(){var e=new d.Z(this.facebook);this.facebook.getLocale=e.getLocale,this.facebook.shareAsync=e.shareAsync,this.facebook.inviteAsync=e.inviteAsync,this.facebook.switchAsync=e.switchAsync,this.facebook.chooseAsync=e.chooseAsync,this.facebook.createAsync=e.createAsync,this.facebook.sendMessage=e.sendMessage,this.facebook.getContextID=e.getContextID,this.facebook.getPlayerToken=e.getPlayerToken,this.facebook.matchPlayerAsync=e.matchPlayerAsync,this.facebook.getContextPlayers=e.getContextPlayers,this.facebook.setLoadingProgress=e.setLoadingProgress,this.facebook.attemptToAddShortcut=e.attemptToAddShortcut,this.facebook.attemptToSubscribeBot=e.attemptToSubscribeBot,this.facebook.postSessionScoreAsync=e.postSessionScoreAsync,this.facebook.getRewardedVideoAsync=e.getRewardedVideoAsync,this.facebook.sendNotificationAsync=e.sendNotificationAsync,this.facebook.getInterstitialAdAsync=e.getInterstitialAdAsync,this.facebook.isSupportedAPI=e.isSupportedAPI,e.injectTournament(),this.facebook.progressLoading=new f(this)},i.addPlugins=function(){this.plugins.install("Storage",Ui,!0,"storage"),this.plugins.install("Rollbar",Ft,!0,"rollbar"),this.plugins.install("AdsManager",M,!0,"ads"),this.plugins.install("AuthManager",ae,!0,"auth"),this.plugins.install("AudioManager",z,!0,"audio"),this.plugins.install("WorldManager",Ji,!0,"world"),this.plugins.install("PlayerManager",mt,!0,"player"),this.plugins.install("ProfileManager",It,!0,"profile"),this.plugins.install("LanguageManager",Aa,!0,"lang"),this.plugins.install("AnalyticsManager",G,!0,"analytics"),this.plugins.install("AdaptivePerformance",de,!0,"performance"),this.plugins.install("VisibilityChangeHandler",XA,!0,"visibility"),this.plugins.installScenePlugin("textStyler",Wi,"textStyler"),this.plugins.installScenePlugin("ScreenManager",Xt,"screen"),this.plugins.installScenePlugin("FrameCapture",oe,"frameCapture"),window.SpinePlugin&&this.plugins.installScenePlugin("SpinePlugin",SpinePlugin,"spine"),this.storage=this.plugins.get("Storage"),this.rollbar=this.plugins.get("Rollbar"),this.ads=this.plugins.get("AdsManager"),this.auth=this.plugins.get("AuthManager"),this.audio=this.plugins.get("AudioManager"),this.world=this.plugins.get("WorldManager"),this.player=this.plugins.get("PlayerManager"),this.lang=this.plugins.get("LanguageManager"),this.profile=this.plugins.get("ProfileManager"),this.analytics=this.plugins.get("AnalyticsManager"),this.performance=this.plugins.get("AdaptivePerformance"),this.visibility=this.plugins.get("VisibilityChangeHandler")},i.addDevPlugins=function(){var e=(0,r.Z)(u().mark((function e(){var t,i,a,s,r,o;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(GameCore.Utils.Valid.isDebugger()){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,Promise.all([n.e(7),n.e(942)]).then(n.bind(n,636));case 4:return t=e.sent.default,e.next=7,Promise.all([n.e(498),n.e(739),n.e(530)]).then(n.bind(n,637));case 7:return i=e.sent.default,e.next=10,n.e(401).then(n.bind(n,638));case 10:return a=e.sent.default,e.next=13,Promise.all([n.e(498),n.e(123)]).then(n.bind(n,639));case 13:return s=e.sent.default,e.next=16,Promise.all([n.e(498),n.e(803)]).then(n.bind(n,640));case 16:return r=e.sent.default,e.next=19,Promise.all([n.e(498),n.e(616),n.e(613)]).then(n.bind(n,641));case 19:o=e.sent.default,this.plugins.install("Console",t,!0,"console"),this.plugins.install("Debugger",i,!0,"debugger"),this.plugins.install("Statistics",a,!0,"statistics"),this.plugins.install("Profiler",s,!0,"profiler"),this.plugins.install("ParticleEditor",r,!0,"particle-editor"),this.plugins.install("CanvasRecorder",o,!0,"canvasRecorder"),this.eruda=this.plugins.get("Console"),this.debugger=this.plugins.get("Debugger"),this.statistics=this.plugins.get("Statistics"),this.profiler=this.plugins.get("Profiler"),this.particleEditor=this.plugins.get("ParticleEditor"),this.canvasRecorder=this.plugins.get("CanvasRecorder");case 32:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),i.addScenes=function(){this.scene.add(fa.C.BOOT_SCENE,Ca,!0),this.scene.add(fa.C.LOAD_SCENE,PE,!1),this.scene.add(fa.C.GAME_SCENE,hf,!1),this.scene.add(fa.C.DASHBOARD_SCENE,Ll,!1),this.scene.add(fa.C.JOURNEY_SCENE,KA,!1),this.scene.add(fa.C.GLOBAL_SCENE,lf.Z,!1)},i.addDevScenes=function(){var e=(0,r.Z)(u().mark((function e(){var t,i;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(GameCore.Utils.Valid.isDebugger()){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,n.e(638).then(n.bind(n,642));case 4:return t=e.sent.default,e.next=7,n.e(291).then(n.bind(n,643));case 7:i=e.sent.default,this.scene.add(fa.C.TEST_SCENE,t,!1),this.scene.add(fa.C.ANIMATIONS_SCENE,i,!1);case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),i.initAdsAsync=function(){var e=(0,r.Z)(u().mark((function e(){var t,i,a,r;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=GameCore.Configs.Ads,jA.Z.setGame(this),i=jA.Z,!t.Mockup.Enable){e.next=8;break}return e.next=6,n.e(131).then(n.bind(n,644));case 6:a=e.sent.default,i=a;case 8:r=(0,s.Z)({},t.InterstitialAdOptions),this.ads.configure(i,{enabled:t.Enabled,calculateSafeAreaBottom:t.CalculateSafeAreaBottom,enableRewardVideoResetInterstitial:t.EnableRewardVideoResetInterstitial,interstitialAdOptions:r,rewardAdOptions:t.RewardAdOptions,bannerAdOptions:t.BannerAdOptions});case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),i.initWorld=function(){var e=GameCore.Configs.Game,t=e.AutoResize,n=e.PortraitRatio,i=e.PortraitWidth,a=e.PortraitHeight,s=e.LandscapeRatio,r=e.LandscapeWidth,o=e.LandscapeHeight,c=t,h=e.DisableLandscape,l=e.FullSizeOnLandscape,u=n,d=i,p=a,m=s,g=r,f=o;this.world.configure({autoResize:c,portraitRatio:u,portraitWidth:d,portraitHeight:p,landscapeRatio:m,landscapeWidth:g,landscapeHeight:f,disableLandscape:h,fullSizeOnLandscape:l}),this.world.resize(e.ForcePixelRatio)},i.initStorage=function(){var e=new ga(this);this.storage.setInitiator(e)},i.initLanguage=function(){var e=this.facebook.getLocale();this.lang.configure({locale:e,upperCaseText:!0})},i.initVisibilityChangeHandler=function(){this.visibility.configure()},i.initUtils=function(){this.handlePauseAudio()},i.initConsole=function(){GameCore.Utils.Valid.isDebugger()&&(GameCore.Configs.Debugger.ShowConsole&&this.eruda.configure({tool:["console","info"],defaults:{theme:"Dark"}}))},i.initDebugger=function(){if(GameCore.Utils.Valid.isDebugger()){var e=GameCore.Configs.Debugger,t=e.ShowInspector,n=e.ShowMonitoring;(t||n)&&this.debugger.configure(GameCore.Configs.Debugger)}},i.initStatistics=function(){GameCore.Utils.Valid.isDebugger()&&(GameCore.Configs.Statistics.Enable&&this.statistics.configure(GameCore.Configs.Statistics))},i.initParticleEditor=function(){GameCore.Utils.Valid.isDebugger()&&(GameCore.Configs.ParticleEditor.Enable&&this.particleEditor.configure(GameCore.Configs.ParticleEditor))},i.initProfilerPlugin=function(){GameCore.Utils.Valid.isDebugger()&&(GameCore.Configs.ProfilerPlugin.Enable&&this.profiler.configure())},i.initAdaptivePerformance=function(){var e=GameCore.Configs.Performance,t=e.Enable,n=(0,a.Z)(e,JA);if(t){var i=this.world.getPixelRatio();this.performance.configure((0,s.Z)({pixelRatio:i},n)),this.performance.active()}},i.initCanvasRecorderPlugin=function(){var e=this;if(GameCore.Utils.Valid.isDebugger()){var t=GameCore.Configs.CanvasRecorder;if(t.Enable){var n=t.Options,i=n.Type,a=n.Quality,s=n.RecordFps,o=n.SyncFps;this.canvasRecorder.configure({type:i,quality:a,syncFps:o,recordFps:s});var c=document.querySelector("canvas");if(c){this.canvasRecorder.setCanvas(c);var l=this.canvasRecorder.getOptions(),d=this.canvasRecorder.waitNextFrame;this.canvasRecorder.waitNextFrame=(0,r.Z)(u().mark((function t(){return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!l.syncFps){t.next=5;break}return e.loop.sleep(),t.abrupt("return",new(h())((function(t){e.events.once(Phaser.Core.Events.POST_RENDER,t),e.loop.lastTime=1e3/l.recordFps,e.loop.step()})));case 5:return e.loop.wake(),t.abrupt("return",d.call(e.canvasRecorder));case 7:case"end":return t.stop()}}),t)})))}}}},i.initRollbar=function(){GameCore.Configs.Rollbar.Enable&&this.rollbar.setup()},i.handlePauseAudio=function(){var e=this;this.sound.pauseOnBlur=!1,this.visibility.addEventVisible((function(){e.audio.playMusic(),e.audio.resumeAllSounds()})),this.visibility.addEventHidden((function(){e.audio.pauseMusic(),e.audio.pauseAllSounds()}))},i.removeUnusedPipelines=function(){var e=this.renderer;if(e instanceof Phaser.Renderer.WebGL.WebGLRenderer){var t=e.pipelines,n=Phaser.Renderer.WebGL.Pipelines;if(n)[n.ROPE_PIPELINE,n.LIGHT_PIPELINE,n.POSTFX_PIPELINE,n.POINTLIGHT_PIPELINE,n.BITMAPMASK_PIPELINE].forEach((function(e){var n;null==(n=t.get(e))||n.destroy(),t.remove(e)}))}},t}(Phaser.Game),QA=qA,$A=GameCore.Configs.Debugger.ShowInspector,eT={parent:"app",type:Phaser.AUTO,width:0,height:0,scale:{autoRound:!0},dom:{createContainer:!1},loader:{maxParallelDownloads:6,crossOrigin:"no-cros"},input:{gamepad:!1,keyboard:$A,touch:{capture:!0},smoothFactor:1,activePointers:1,windowEvents:!1},disableContextMenu:!0,render:{pixelArt:!1,antialias:!0,antialiasGL:!0,transparent:!0,desynchronized:!1,clearBeforeRender:!1,roundPixels:!1,mipmapFilter:"LINER"},plugins:{global:[]}};(0,i.j6)();var tT=setInterval((function(){window.__analyticsInitiated&&(window.__fbGameReady=!1,clearInterval(tT),clearInterval(window.__fbInstantLoadingTimer),GameSDK.setLoadingProgress(30),gtag("event","app_initialize",{send_to:["GA"]}),function(){try{var e=new QA(eT);window.game=e}catch(t){(0,i.tO)(t)}}())}),50)},626:function(e,t,n){"use strict";n.d(t,{H$:function(){return v},Z5:function(){return E},aV:function(){return S},xB:function(){return A}});var i=n(50),a=n(63),s=n(87),r=n.n(s),o=n(67),c=n.n(o),h=n(45),l=n.n(h),u=n(454),d=n(123),p=GameCore.Configs,m=p.AppId,g=p.OtherHost,f=p.LeadersBoard,E=function(){var e=(0,a.Z)(l().mark((function e(t){var n,a;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n={appId:m,resetScore:0,numberOfLeaders:15,timezone:"utc+0",sortOrder:"desc",statistics:"max",resettable:"manually",description:"no description"},!f.UseMock){e.next=5;break}return e.next=4,(0,d.qZ)(1e3);case 4:return e.abrupt("return",(0,i.Z)({},n,t,{_id:f.LeaderboardId,type:"app_leaderboard",description:"mockup_leaderboard",createdAt:new Date(Date.now()).toISOString(),updatedAt:new Date(Date.now()).toISOString()}));case 5:return"leaderboards",e.next=8,(0,u.v)("leaderboards",(0,i.Z)({},n,t),{},g);case 8:return a=e.sent,e.abrupt("return",(null==a?void 0:a.data)||{});case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),v=function(){var e=(0,a.Z)(l().mark((function e(t,n){var i,a,s,o,h,p,m,E,v,S,A,T;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===n&&(n={}),i=[],!f.UseMock){e.next=7;break}return e.next=5,(0,d.qZ)(1e3);case 5:return h=(o=n).limit,p=void 0===h?10:h,m=o.offset,E=void 0===m?0:m,e.abrupt("return",r()(a=c()(s=new Array(p)).call(s,null)).call(a,(function(e,t){var n=(t+1)*(E+1),i=f.MockOptions.PlayerEntryIndex===t,a={playerId:"player-0"+n,name:"MPlayer "+n,photo:"./assets/images/others/avatar.jpg",rank:n,score:Math.floor(1e5/n+1e4*Math.random())};if(i){var s=window.game.player.getPlayer(),r=s.playerId,o=s.name,c=s.photo;a.playerId=r,a.name=o,a.photo=c}return a})));case 7:return v=GameCore.Utils.String.params(n),S="leaderboards/"+t+"/leaders",e.next=11,(0,u.U)(S+"?"+v,{},g);case 11:if((A=e.sent)&&(null==A||!A.error)){e.next=14;break}throw new Error((null==A?void 0:A.error)||"Leaderboard not found");case 14:if(!((T=(null==A?void 0:A.data)||[]).length<1)){e.next=17;break}return e.abrupt("return",i);case 17:return i=T,e.abrupt("return",i);case 19:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),S=function(){var e=(0,a.Z)(l().mark((function e(t,n,i){var a;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,u.v)("leaderboards/"+t+"/players/"+n,{score:i},{},g);case 2:return a=e.sent,e.abrupt("return",(null==a?void 0:a.data)||{});case 4:case"end":return e.stop()}}),e)})));return function(t,n,i){return e.apply(this,arguments)}}(),A=function(){var e=(0,a.Z)(l().mark((function e(t,n){var i,a,s,r,o;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=null,t){e.next=3;break}return e.abrupt("return",i);case 3:if(a=f.Prefix+"/"+n+"/players"){e.next=6;break}return e.abrupt("return",i);case 6:return s=GameCore.Utils.String.params({playerIds:t}),e.next=9,(0,u.U)(a+"?"+s,{},g);case 9:if(r=e.sent,!((o=(null==r?void 0:r.data)||[]).length<1)){e.next=13;break}return e.abrupt("return",i);case 13:return i=o[0],e.abrupt("return",i);case 15:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},100:function(e,t,n){"use strict";n.d(t,{_:function(){return i}});var i={BUTTON_CLICK:"button_click",SCREEN_OPEN:"screen_open",LOAD_START:"load_start",LOAD_COMPLETE:"load_complete",APP_READY:"app_ready",TUTORIAL_BEGIN:"tutorial_begin",TUTORIAL_STEP:"tutorial_step",TUTORIAL_COMPLETE:"tutorial_complete",MATCH_START:"match_start",MATCH_RESCUE:"match_rescue",MATCH_END:"match_end",LEVEL_START:"level_start",LEVEL_RESCUE:"level_rescue",LEVEL_END:"level_end",SHARE:"share",MESSAGE:"message",INVITE:"invite",SHORTCUT_CREATE:"shortcut_create",SHORTCUT_CREATE_POPUP:"shortcut_create_popup",BOT_SUBSCRIBE:"bot_subscribe",BOT_SUBSCRIBE_POPUP:"bot_subscribe_popup",AD_LOAD:"ad_load",AD_LOAD_FAILED:"ad_load_failed",AD_SHOW:"ad_show",AD_SHOW_FAILED:"ad_show_failed",MISSING_AD_SHOW:"missing_ad_show",NEW_USER:"new_user",AD_IMPRESSION:"ad_impression",JOIN_GROUP:"join_group",TOURNAMENT_SHARE:"tournament_share",TOURNAMENT_CREATE:"tournament_create",TOURNAMENT_POST_SCORE:"tournament_post_score"}},446:function(e,t,n){"use strict";var i=n(447),a=function(){function e(e,t,n,a){this.playerId=void 0,this.name=void 0,this.photo=void 0,this.locale=void 0,this.playerId=e,this.name=t,this.photo=n||i.Z.AVATAR.FILE,this.locale=a||"en_US"}return e.prototype.toObject=function(){return{playerId:this.playerId,name:this.name,photo:this.photo,locale:this.locale}},e}();t.Z=a},453:function(e,t){"use strict";t.Z={RESIZE:"resize",CHANGE_LAYOUT:"change-layout"}},455:function(e,t,n){"use strict";n.d(t,{I:function(){return a}});var i=n(451),a=function(e){return{type:i.DW,payload:{sceneKey:e}}}},123:function(e,t,n){"use strict";n.d(t,{Gm:function(){return r},qZ:function(){return s}});var i=n(84),a=n.n(i),s=(n(46),function(e){return new(a())((function(t){return setTimeout(t,e)}))}),r=function(e){var t=new Date(e),n=new Date;return t.getDate()===n.getDate()&&t.getMonth()===n.getMonth()&&t.getFullYear()===n.getFullYear()}},201:function(e,t,n){"use strict";n.d(t,{R0:function(){return r},Tv:function(){return s},j6:function(){return i},sw:function(){return a},tO:function(){return o}});n(445),n(130),n(66),n(86);var i=function(){var e=setInterval((function(){window.Sentry&&clearInterval(e)}),100)},a=function(e,t){window.Sentry&&window.Sentry.addBreadcrumb({category:e,message:t})},s=function(e){window.Sentry&&window.Sentry.setUser(e)},r=function(e,t){},o=function(e){}},448:function(e,t){"use strict";t.Z={GENERIC_NOTIFICATION:0,NEW_USER_NOTIFICATION:1,MONDAY_NOTIFICATION:2,TUESDAY_NOTIFICATION:3,WEDNESDAY_NOTIFICATION:4,THURSDAY_NOTIFICATION:5,FRIDAY_NOTIFICATION:6,SATURDAY_NOTIFICATION:7,SUNDAY_NOTIFICATION:8}},623:function(e,t,n){"use strict";n.d(t,{Z:function(){return s}});var i=JSON.parse('{"data":["Smith","Johnson","Williams","Brown","Jones","Miller","Davis","Garcia","Rodriguez","Wilson","Martinez","Anderson","Taylor","Thomas","Hernandez","Moore","Martin","Jackson","Thompson","White","Lopez","Lee","Gonzalez","Harris","Clark","Lewis","Robinson","Walker","Perez","Hall","Young","Allen","Sanchez","Wright","King","Scott","Green","Baker","Adams","Nelson","Hill","Ramirez","Campbell","Mitchell","Roberts","Carter","Phillips","Evans","Turner","Torres","Parker","Collins","Edwards","Stewart","Flores","Morris","Nguyen","Murphy","Rivera","Cook","Rogers","Morgan","Peterson","Cooper","Reed","Bailey","Bell","Gomez","Kelly","Howard","Ward","Cox","Diaz","Richardson","Wood","Watson","Brooks","Bennett","Gray","James","Reyes","Cruz","Hughes","Price","Myers","Long","Foster","Sanders","Ross","Morales","Powell","Sullivan","Russell","Ortiz","Jenkins","Gutierrez","Perry","Butler","Barnes","Fisher","Henderson","Coleman","Simmons","Patterson","Jordan","Reynolds","Hamilton","Graham","Kim","Gonzales","Alexander","Ramos","Wallace","Griffin","West","Cole","Hayes","Chavez","Gibson","Bryant","Ellis","Stevens","Murray","Ford","Marshall","Owens","Mcdonald","Harrison","Ruiz","Kennedy","Wells","Alvarez","Woods","Mendoza","Castillo","Olson","Webb","Washington","Tucker","Freeman","Burns","Henry","Vasquez","Snyder","Simpson","Crawford","Jimenez","Porter","Mason","Shaw","Gordon","Wagner","Hunter","Romero","Hicks","Dixon","Hunt","Palmer","Robertson","Black","Holmes","Stone","Meyer","Boyd","Mills","Warren","Fox","Rose","Rice","Moreno","Schmidt","Patel","Ferguson","Nichols","Herrera","Medina","Ryan","Fernandez","Weaver","Daniels","Stephens","Gardner","Payne","Kelley","Dunn","Pierce","Arnold","Tran","Spencer","Peters","Hawkins","Grant","Hansen","Castro","Hoffman","Hart","Elliott","Cunningham","Knight","Bradley","Carroll","Hudson","Duncan","Armstrong","Berry","Andrews","Johnston","Ray","Lane","Riley","Carpenter","Perkins","Aguilar","Silva","Richards","Willis","Matthews","Chapman","Lawrence","Garza","Vargas","Watkins","Wheeler","Larson","Carlson","Harper","George","Greene","Burke","Guzman","Morrison","Munoz","Jacobs","Obrien","Lawson","Franklin","Lynch","Bishop","Carr","Salazar","Austin","Mendez","Gilbert","Jensen","Williamson","Montgomery","Harvey","Oliver","Howell","Dean","Hanson","Weber","Garrett","Sims","Burton","Fuller","Soto","Mccoy","Welch","Chen","Schultz","Walters","Reid","Fields","Walsh","Little","Fowler","Bowman","Davidson","May","Day","Schneider","Newman","Brewer","Lucas","Holland","Wong","Banks","Santos","Curtis","Pearson","Delgado","Valdez","Pena","Rios","Douglas","Sandoval","Barrett","Hopkins","Keller","Guerrero","Stanley","Bates","Alvarado","Beck","Ortega","Wade","Estrada","Contreras","Barnett","Caldwell","Santiago","Lambert","Powers","Chambers","Nunez","Craig","Leonard","Lowe","Rhodes","Byrd","Gregory","Shelton","Frazier","Becker","Maldonado","Fleming","Vega","Sutton","Cohen","Jennings","Parks","Mcdaniel","Watts","Barker","Norris","Vaughn","Vazquez","Holt","Schwartz","Steele","Benson","Neal","Dominguez","Horton","Terry","Wolfe","Hale","Lyons","Graves","Haynes","Miles","Park","Warner","Padilla","Bush","Thornton","Mccarthy","Mann","Zimmerman","Erickson","Fletcher","Mckinney","Page","Dawson","Joseph","Marquez","Reeves","Klein","Espinoza","Baldwin","Moran","Love","Robbins","Higgins","Ball","Cortez","Le","Griffith","Bowen","Sharp","Cummings","Ramsey","Hardy","Swanson","Barber","Acosta","Luna","Chandler","Blair","Daniel","Cross","Simon","Dennis","Oconnor","Quinn","Gross","Navarro","Moss","Fitzgerald","Doyle","Mclaughlin","Rojas","Rodgers","Stevenson","Singh","Yang","Figueroa","Harmon","Newton","Paul","Manning","Garner","Mcgee","Reese","Francis","Burgess","Adkins","Goodman","Curry","Brady","Christensen","Potter","Walton","Goodwin","Mullins","Molina","Webster","Fischer","Campos","Avila","Sherman","Todd","Chang","Blake","Malone","Wolf","Hodges","Juarez","Gill","Farmer","Hines","Gallagher","Duran","Hubbard","Cannon","Miranda","Wang","Saunders","Tate","Mack","Hammond","Carrillo","Townsend","Wise","Ingram","Barton","Mejia","Ayala","Schroeder","Hampton","Rowe","Parsons","Frank","Waters","Strickland","Osborne","Maxwell","Chan","Deleon","Norman","Harrington","Casey","Patton","Logan","Bowers","Mueller","Glover","Floyd","Hartman","Buchanan","Cobb","French","Kramer","Mccormick","Clarke","Tyler","Gibbs","Moody","Conner","Sparks","Mcguire","Leon","Bauer","Norton","Pope","Flynn","Hogan","Robles","Salinas","Yates","Lindsey","Lloyd","Marsh","Mcbride","Owen","Solis","Pham","Lang","Pratt","Lara","Brock","Ballard","Trujillo","Shaffer","Drake","Roman","Aguirre","Morton","Stokes","Lamb","Pacheco","Patrick","Cochran","Shepherd","Cain","Burnett","Hess","Li","Cervantes","Olsen","Briggs","Ochoa","Cabrera","Velasquez","Montoya","Roth","Meyers","Cardenas","Fuentes","Weiss","Hoover","Wilkins","Nicholson","Underwood","Short","Carson","Morrow","Colon","Holloway","Summers","Bryan","Petersen","Mckenzie","Serrano","Wilcox","Carey","Clayton","Poole","Calderon","Gallegos","Greer","Rivas","Guerra","Decker","Collier","Wall","Whitaker","Bass","Flowers","Davenport","Conley","Houston","Huff","Copeland","Hood","Monroe","Massey","Roberson","Combs","Franco","Larsen","Pittman","Randall","Skinner","Wilkinson","Kirby","Cameron","Bridges","Anthony","Richard","Kirk","Bruce","Singleton","Mathis","Bradford","Boone","Abbott","Charles","Allison","Sweeney","Atkinson","Horn","Jefferson","Rosales","York","Christian","Phelps","Farrell","Castaneda","Nash","Dickerson","Bond","Wyatt","Foley","Chase","Gates","Vincent","Mathews","Hodge","Garrison","Trevino","Villarreal","Heath","Dalton","Valencia","Callahan","Hensley","Atkins","Huffman","Roy","Boyer","Shields","Lin","Hancock","Grimes","Glenn","Cline","Delacruz","Camacho","Dillon","Parrish","Oneill","Melton","Booth","Kane","Berg","Harrell","Pitts","Savage","Wiggins","Brennan","Salas","Marks","Russo","Sawyer","Baxter","Golden","Hutchinson","Liu","Walter","Mcdowell","Wiley","Rich","Humphrey","Johns","Koch","Suarez","Hobbs","Beard","Gilmore","Ibarra","Keith","Macias","Khan","Andrade","Ware","Stephenson","Henson","Wilkerson","Dyer","Mcclure","Blackwell","Mercado","Tanner","Eaton","Clay","Barron","Beasley","Oneal","Preston","Small","Wu","Zamora","Macdonald","Vance","Snow","Mcclain","Stafford","Orozco","Barry","English","Shannon","Kline","Jacobson","Woodard","Huang","Kemp","Mosley","Prince","Merritt","Hurst","Villanueva","Roach","Nolan","Lam","Yoder","Mccullough","Lester","Santana","Valenzuela","Winters","Barrera","Leach","Orr","Berger","Mckee","Strong","Conway","Stein","Whitehead","Bullock","Escobar","Knox","Meadows","Solomon","Velez","Odonnell","Kerr","Stout","Blankenship","Browning","Kent","Lozano","Bartlett","Pruitt","Buck","Barr","Gaines","Durham","Gentry","Mcintyre","Sloan","Melendez","Rocha","Herman","Sexton","Moon","Hendricks","Rangel","Stark","Lowery","Hardin","Hull","Sellers","Ellison","Calhoun","Gillespie","Mora","Knapp","Mccall","Morse","Dorsey","Weeks","Nielsen","Livingston","Leblanc","Mclean","Bradshaw","Glass","Middleton","Buckley","Schaefer","Frost","Howe","House","Mcintosh","Ho","Pennington","Reilly","Hebert","Mcfarland","Hickman","Noble","Spears","Conrad","Arias","Galvan","Velazquez","Huynh","Frederick","Randolph","Cantu","Fitzpatrick","Mahoney","Peck","Villa","Michael","Donovan","Mcconnell","Walls","Boyle","Mayer","Zuniga","Giles","Pineda","Pace","Hurley","Mays","Mcmillan","Crosby","Ayers","Case","Bentley","Shepard","Everett","Pugh","David","Mcmahon","Dunlap","Bender","Hahn","Harding","Acevedo","Raymond","Blackburn","Duffy","Landry","Dougherty","Bautista","Shah","Potts","Arroyo","Valentine","Meza","Gould","Vaughan","Fry","Rush","Avery","Herring","Dodson","Clements","Sampson","Tapia","Bean","Lynn","Crane","Farley","Cisneros","Benton","Ashley","Mckay","Finley","Best","Blevins","Friedman","Moses","Sosa","Blanchard","Huber","Frye","Krueger","Bernard","Rosario","Rubio","Mullen","Benjamin","Haley","Chung","Moyer","Choi","Horne","Yu","Woodward","Ali","Nixon","Hayden","Rivers","Estes","Mccarty","Richmond","Stuart","Maynard","Brandt","Oconnell","Hanna","Sanford","Sheppard","Church","Burch","Levy","Rasmussen","Coffey","Ponce","Faulkner","Donaldson","Schmitt","Novak","Costa","Montes","Booker","Cordova","Waller","Arellano","Maddox","Mata","Bonilla","Stanton","Compton","Kaufman","Dudley","Mcpherson","Beltran","Dickson","Mccann","Villegas","Proctor","Hester","Cantrell","Daugherty","Cherry","Bray","Davila","Rowland","Levine","Madden","Spence","Good","Irwin","Werner","Krause","Petty","Whitney","Baird","Hooper","Pollard","Zavala","Jarvis","Holden","Haas","Hendrix","Mcgrath","Bird","Lucero","Terrell","Riggs","Joyce","Mercer","Rollins","Galloway","Duke","Odom","Andersen","Downs","Hatfield","Benitez","Archer","Huerta","Travis","Mcneil","Hinton","Zhang","Hays","Mayo","Fritz","Branch","Mooney","Ewing","Ritter","Esparza","Frey","Braun","Gay","Riddle","Haney","Kaiser","Holder","Chaney","Mcknight","Gamble","Vang","Cooley","Carney","Cowan","Forbes","Ferrell","Davies","Barajas","Shea","Osborn","Bright","Cuevas","Bolton","Murillo","Lutz","Duarte","Kidd","Key","Cooke"]}'),a=function(e){return Math.floor(Math.random()*e)},s=function(){if(!i)return"Unknown";if(!i.data)return"Unknown";var e=i.data;if(!Array.isArray(e))return"Unknown";var t=e.length;return e[a(t)]+" "+e[a(t)]}},443:function(e,t){"use strict";t.Z=function(e,t){var n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789*#%&!",i="",a=e;void 0!=t&&(a-=t.length,i+=t);for(var s=0;s<a;s++){var r=Math.floor(67*Math.random());i+=n.charAt(r)}return i}}},t={};function n(i){var a=t[i];if(void 0!==a)return a.exports;var s=t[i]={id:i,loaded:!1,exports:{}};return e[i].call(s.exports,s,s.exports,n),s.loaded=!0,s.exports}n.m=e,n.amdO={},function(){var e=[];n.O=function(t,i,a,s){if(!i){var r=1/0;for(l=0;l<e.length;l++){i=e[l][0],a=e[l][1],s=e[l][2];for(var o=!0,c=0;c<i.length;c++)(!1&s||r>=s)&&Object.keys(n.O).every((function(e){return n.O[e](i[c])}))?i.splice(c--,1):(o=!1,s<r&&(r=s));if(o){e.splice(l--,1);var h=a();void 0!==h&&(t=h)}}return t}s=s||0;for(var l=e.length;l>0&&e[l-1][2]>s;l--)e[l]=e[l-1];e[l]=[i,a,s]}}(),n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,{a:t}),t},n.d=function(e,t){for(var i in t)n.o(t,i)&&!n.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},n.f={},n.e=function(e){return Promise.all(Object.keys(n.f).reduce((function(t,i){return n.f[i](e,t),t}),[]))},n.u=function(e){return e+"."+{7:"0e604acde91b5ff9ea74",109:"1993c1f565871af2c719",123:"3da98d54583b551529a4",131:"fbd4f5106acb939d3724",291:"0e3792d6733c443ca4da",302:"b47e0d36e0ec32b79915",401:"8ae6b73c68c57c7a9496",498:"28cf76bf566c82335024",530:"ad78dca7dd7d76a05fc0",613:"f216abe480a8357db022",616:"bd27dbdf7406334abacd",638:"2eaee5da0413665d98bc",739:"3362042642e991cf360f",803:"edac77e1470628340950",942:"a59af1a94b48da80d649",961:"e72e88daab98b761f6f7"}[e]+".bundle.js"},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.hmd=function(e){return(e=Object.create(e)).children||(e.children=[]),Object.defineProperty(e,"exports",{enumerable:!0,set:function(){throw new Error("ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: "+e.id)}}),e},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},function(){var e={},t="game-core:";n.l=function(i,a,s,r){if(e[i])e[i].push(a);else{var o,c;if(void 0!==s)for(var h=document.getElementsByTagName("script"),l=0;l<h.length;l++){var u=h[l];if(u.getAttribute("src")==i||u.getAttribute("data-webpack")==t+s){o=u;break}}o||(c=!0,(o=document.createElement("script")).charset="utf-8",o.timeout=120,n.nc&&o.setAttribute("nonce",n.nc),o.setAttribute("data-webpack",t+s),o.src=i),e[i]=[a];var d=function(t,n){o.onerror=o.onload=null,clearTimeout(p);var a=e[i];if(delete e[i],o.parentNode&&o.parentNode.removeChild(o),a&&a.forEach((function(e){return e(n)})),t)return t(n)},p=setTimeout(d.bind(null,void 0,{type:"timeout",target:o}),12e4);o.onerror=d.bind(null,o.onerror),o.onload=d.bind(null,o.onload),c&&document.head.appendChild(o)}}}(),n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e},function(){var e;n.g.importScripts&&(e=n.g.location+"");var t=n.g.document;if(!e&&t&&(t.currentScript&&(e=t.currentScript.src),!e)){var i=t.getElementsByTagName("script");if(i.length)for(var a=i.length-1;a>-1&&!e;)e=i[a--].src}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),n.p=e}(),function(){var e={757:0};n.f.j=function(t,i){var a=n.o(e,t)?e[t]:void 0;if(0!==a)if(a)i.push(a[2]);else{var s=new Promise((function(n,i){a=e[t]=[n,i]}));i.push(a[2]=s);var r=n.p+n.u(t),o=new Error;n.l(r,(function(i){if(n.o(e,t)&&(0!==(a=e[t])&&(e[t]=void 0),a)){var s=i&&("load"===i.type?"missing":i.type),r=i&&i.target&&i.target.src;o.message="Loading chunk "+t+" failed.\n("+s+": "+r+")",o.name="ChunkLoadError",o.type=s,o.request=r,a[1](o)}}),"chunk-"+t,t)}},n.O.j=function(t){return 0===e[t]};var t=function(t,i){var a,s,r=i[0],o=i[1],c=i[2],h=0;if(r.some((function(t){return 0!==e[t]}))){for(a in o)n.o(o,a)&&(n.m[a]=o[a]);if(c)var l=c(n)}for(t&&t(i);h<r.length;h++)s=r[h],n.o(e,s)&&e[s]&&e[s][0](),e[s]=0;return n.O(l)},i=self.webpackChunkgame_core=self.webpackChunkgame_core||[];i.forEach(t.bind(null,0)),i.push=t.bind(null,i.push.bind(i))}(),n.O(void 0,[216,630,542],(function(){return n(646)})),n.O(void 0,[216,630,542],(function(){return n(647)})),n.O(void 0,[216,630,542],(function(){return n(474)})),n.O(void 0,[216,630,542],(function(){return n(475)})),n.O(void 0,[216,630,542],(function(){return n(648)})),n.O(void 0,[216,630,542],(function(){return n(567)})),n.O(void 0,[216,630,542],(function(){return n(649)}));var i=n.O(void 0,[216,630,542],(function(){return n(583)}));i=n.O(i)})();