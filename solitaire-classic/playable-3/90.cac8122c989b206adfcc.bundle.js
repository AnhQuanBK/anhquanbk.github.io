"use strict";(self.webpackChunkgame_core=self.webpackChunkgame_core||[]).push([[90],{628:function(e,t,n){n.d(t,{J:function(){return B},Z:function(){return N}});var i=n(619),a=n(46),s=n.n(a),r=n(2),o=n.n(r),c=n(19),h=n.n(c),u=n(0),l=n.n(u),d=n(630),p=n(181),f=n.n(p),g=function(e){return function(t){t.preventDefault();var n=document.getElementById("popup-add-shortcut");null==n||n.remove(),e()}},m=function(e){var t=document.createElement("div");return t.innerHTML=f()(e).call(e),t.firstChild},v=function(){var e=(0,i.Z)(l().mark((function e(t,n){var i,a,s;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=m('<div style="height: 50vh;width: 53vh;max-width: 95vw;position:absolute;background-color: rgba(31, 120, 136, 0.48);border-radius: 2vh;margin: auto;right: 0;left: 0;top: 0;bottom: 0;display: flex;flex-direction:column;justify-content:space-evenly;">\n            <p style="color:white;font-size:40px;text-align:center">Add shortcut for this game</p>\n            <p style="color:white;font-size:20px;text-align:center">This game wants to add a shortcut.</p>\n        </div>'),a=m('<button style="border: none;background-color: #1877f2;color: #fff;width: 90%;height: 50px;border-radius: 15px;margin-left: auto;margin-right: auto;font-size: 20px;cursor: pointer;">No</button>'),s=m('<button style="border: none;background-color: #1877f2;color: #fff;width: 90%;height: 50px;border-radius: 15px;margin-left: auto;margin-right: auto;font-size: 20px;cursor: pointer;">Yes</button>'),i&&a&&s||n({code:"CREATE_POPUP_ERROR",message:"Show popup failed"}),i.id="popup-add-shortcut",i.appendChild(a),i.appendChild(s),document.body.appendChild(i),a.addEventListener("click",g(n)),s.addEventListener("click",g(t));case 10:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),y=function(){function e(){this.isFirstCall=!0}var t=e.prototype;return t.canCreateShortcutAsync=function(){var e=(0,i.Z)(l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isFirstCall){e.next=3;break}return this.isFirstCall=!1,e.abrupt("return",!0);case 3:return e.abrupt("return",!1);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),t.createShortcutAsync=function(){var e=(0,i.Z)(l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new(o())((function(e,t){v(e,t)})));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),e}(),A=y,E=function(e){return function(t){t.preventDefault();var n=document.getElementById("popup-subscribe-bots");null==n||n.remove(),e()}},T=function(e){var t=document.createElement("div");return t.innerHTML=f()(e).call(e),t.firstChild},C=function(){var e=(0,i.Z)(l().mark((function e(t,n){var i,a,s;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=T('<div style="height: 50vh;width: 53vh;max-width: 95vw;position:absolute;background-color: rgba(31, 120, 136, 0.48);border-radius: 2vh;margin: auto;right: 0;left: 0;top: 0;bottom: 0;display: flex;flex-direction:column;justify-content:space-evenly;">\n            <p style="color:white;font-size:40px;text-align:center">Turn on messages from this game</p>\n            <p style="color:white;font-size:20px;text-align:center">This game wants to send messages, announcements and more.</p>\n        </div>'),a=T('<button style="border: none;background-color: #1877f2;color: #fff;width: 90%;height: 50px;border-radius: 15px;margin-left: auto;margin-right: auto;font-size: 20px;cursor: pointer;">Not Now</button>'),s=T('<button style="border: none;background-color: #1877f2;color: #fff;width: 90%;height: 50px;border-radius: 15px;margin-left: auto;margin-right: auto;font-size: 20px;cursor: pointer;">Turn On</button>'),i&&a&&s||n({code:"CREATE_POPUP_ERROR",message:"Show popup failed"}),i.id="popup-subscribe-bots",i.appendChild(a),i.appendChild(s),document.body.appendChild(i),a.addEventListener("click",E(n)),s.addEventListener("click",E(t));case 10:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),S=function(){function e(){this.isFirstCall=!0}var t=e.prototype;return t.canSubscribeBotAsync=function(){var e=(0,i.Z)(l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isFirstCall){e.next=3;break}return this.isFirstCall=!1,e.abrupt("return",!0);case 3:return e.abrupt("return",!1);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),t.subscribeBotAsync=function(){var e=(0,i.Z)(l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new(o())((function(e,t){C(e,t)})));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),e}(),b=S,I=n(633),w=n(629),_=n(631),x=n(635),P=GameCore.Configs,k=P.Notification,O=P.AddShortcut,L=P.SubscribeBot,R=k.GameTitle,B=(k.GameImage,function(){function e(){}var t=e.prototype;return t.createAsync=function(){var e=(0,i.Z)(l().mark((function e(t){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,GameSDK.tournament.createAsync(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t.shareAsync=function(){var e=(0,i.Z)(l().mark((function e(t){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,GameSDK.tournament.shareAsync(t);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t.joinAsync=function(){var e=(0,i.Z)(l().mark((function e(t){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,GameSDK.tournament.joinAsync(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t.postScoreAsync=function(){var e=(0,i.Z)(l().mark((function e(t){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,GameSDK.tournament.postScoreAsync(t);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t.getTournamentsAsync=function(){var e=(0,i.Z)(l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,GameSDK.tournament.getTournamentsAsync();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),e}()),D=function(){function e(e){var t=this;this.facebook=void 0,this.supportedAPIs=[],this.mockSubscribeBot=void 0,this.mockAddShortcut=void 0,this.isCalledSubscribeBot=!1,this.isCalledCreateShortcut=!1,this.isCanPlayerMatch=null,this.isCanSubscribeBot=null,this.isCanCreateShortcut=null,this.attemptToAddShortcut=(0,i.Z)(l().mark((function e(){var n,i,a,s,r,o;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.isCalledCreateShortcut){e.next=2;break}return e.abrupt("return",!1);case 2:if(e.prev=2,null===t.isCanCreateShortcut&&(O.UseMock?t.isCanCreateShortcut=!0:t.isCanCreateShortcut=t.isSupportedAPI("canCreateShortcutAsync")),t.isCanCreateShortcut){e.next=6;break}return e.abrupt("return",!1);case 6:return e.next=8,GameSDK.player.getDataAsync(["lastCallCreateShortcut"]);case 8:if(e.t0=e.sent,e.t0){e.next=11;break}e.t0={};case 11:if(n=e.t0,!(i=n.lastCallCreateShortcut||0)||!(0,w.Gm)(+i)){e.next=15;break}return e.abrupt("return",!1);case 15:if(!O.UseMock){e.next=21;break}return e.next=18,t.mockAddShortcut.canCreateShortcutAsync();case 18:e.t1=e.sent,e.next=24;break;case 21:return e.next=23,GameSDK.canCreateShortcutAsync();case 23:e.t1=e.sent;case 24:if(a=e.t1,s=Date.now(),GameSDK.player.setDataAsync({lastCallCreateShortcut:s}),!a){e.next=49;break}return r=d._.SHORTCUT_CREATE,o=d._.SHORTCUT_CREATE_POPUP,t.isCalledCreateShortcut=!0,window.game.analytics.event(o),e.prev=31,e.next=34,GameCore.Utils.Valid.isValueChangeAsync(window.__fbGameReady,!0);case 34:if(!O.UseMock){e.next=39;break}return e.next=37,t.mockAddShortcut.createShortcutAsync();case 37:e.next=41;break;case 39:return e.next=41,FBInstant.createShortcutAsync();case 41:return window.game.analytics.event(r,{success:!0}),e.abrupt("return",!0);case 45:return e.prev=45,e.t2=e.catch(31),window.game.analytics.event(r,{success:!1}),e.abrupt("return",!1);case 49:return e.abrupt("return",!1);case 52:return e.prev=52,e.t3=e.catch(2),e.abrupt("return",!1);case 55:case"end":return e.stop()}}),e,null,[[2,52],[31,45]])}))),this.attemptToSubscribeBot=(0,i.Z)(l().mark((function e(){var n,i,a,s,r;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.isCalledSubscribeBot){e.next=2;break}return e.abrupt("return",!1);case 2:if(e.prev=2,null===t.isCanSubscribeBot&&(L.UseMock?t.isCanSubscribeBot=!0:t.isCanSubscribeBot=t.isSupportedAPI("player.canSubscribeBotAsync")),t.isCanSubscribeBot){e.next=6;break}return e.abrupt("return",!1);case 6:if(!L.UseMock){e.next=12;break}return e.next=9,t.mockSubscribeBot.canSubscribeBotAsync();case 9:e.t0=e.sent,e.next=15;break;case 12:return e.next=14,GameSDK.player.canSubscribeBotAsync();case 14:e.t0=e.sent;case 15:if(!e.t0){e.next=49;break}return e.next=19,GameSDK.player.getDataAsync(["lastCallSubscribeBot"]);case 19:if(e.t1=e.sent,e.t1){e.next=22;break}e.t1={};case 22:if(n=e.t1,!(i=n.lastCallSubscribeBot)||!(0,w.Gm)(+i)){e.next=26;break}return e.abrupt("return",!1);case 26:return a=Date.now(),GameSDK.player.setDataAsync({lastCallSubscribeBot:a}),s=d._.BOT_SUBSCRIBE,r=d._.BOT_SUBSCRIBE_POPUP,t.isCalledSubscribeBot=!0,window.game.analytics.event(r),e.prev=31,e.next=34,GameCore.Utils.Valid.isValueChangeAsync(window.__fbGameReady,!0);case 34:if(!L.UseMock){e.next=39;break}return e.next=37,t.mockSubscribeBot.subscribeBotAsync();case 37:e.next=41;break;case 39:return e.next=41,GameSDK.player.subscribeBotAsync();case 41:return window.game.analytics.event(s,{success:!0}),e.abrupt("return",!0);case 45:return e.prev=45,e.t2=e.catch(31),window.game.analytics.event(s,{success:!1}),e.abrupt("return",!1);case 49:return e.abrupt("return",!1);case 52:return e.prev=52,e.t3=e.catch(2),e.abrupt("return",!1);case 55:case"end":return e.stop()}}),e,null,[[2,52],[31,45]])}))),this.matchPlayerAsync=function(){var e=(0,i.Z)(l().mark((function e(n,i,a){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,null===t.isCanPlayerMatch&&(t.isCanPlayerMatch=t.isSupportedAPI("checkCanPlayerMatchAsync")),t.isCanPlayerMatch){e.next=4;break}return e.abrupt("return",!1);case 4:return e.next=6,GameSDK.checkCanPlayerMatchAsync();case 6:if(e.sent){e.next=9;break}return e.abrupt("return",!1);case 9:return e.next=11,GameSDK.matchPlayerAsync(n,i,a);case 11:return e.abrupt("return",!0);case 14:return e.prev=14,e.t0=e.catch(0),e.abrupt("return",!1);case 17:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(t,n,i){return e.apply(this,arguments)}}(),this.getTournamentAsync=(0,i.Z)(l().mark((function e(){var n,i,a;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.facebook.tournament.getTournamentsAsync();case 2:if(n=e.sent,i=GameSDK.context.getID(),!(a=s()(n).call(n,(function(e){return e.getContextID()===i})))){e.next=7;break}return e.abrupt("return",o().resolve(a));case 7:return e.abrupt("return",o().reject(new _.Z(null)));case 8:case"end":return e.stop()}}),e)}))),this.requestTournamentAsync=function(){var e=(0,i.Z)(l().mark((function e(n){var i;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.facebook.getTournamentAsync();case 3:return e.next=5,t.facebook.tournament.shareAsync({score:n});case 5:e.next=12;break;case 7:return e.prev=7,e.t0=e.catch(0),i=GameSDK.player.getName(),e.next=12,t.facebook.tournament.createAsync({initialScore:n,config:{tournamentTitle:i+"'s Tournament"}});case 12:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),this.isSupportedAPI=function(e){var n;return 0===t.supportedAPIs.length&&(t.supportedAPIs=GameSDK.getSupportedAPIs()),h()(n=t.supportedAPIs).call(n,e)},this.facebook=e,this.mockSubscribeBot=new b,this.mockAddShortcut=new A}var t=e.prototype;return t.switchAsync=function(){var e=(0,i.Z)(l().mark((function e(t){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,GameCore.Utils.Valid.isValueChangeAsync(window.__fbGameReady,!0);case 2:return e.next=4,GameSDK.context.switchAsync(t);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t.chooseAsync=function(){var e=(0,i.Z)(l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,GameCore.Utils.Valid.isValueChangeAsync(window.__fbGameReady,!0);case 3:return e.next=5,GameSDK.context.chooseAsync({filters:["INCLUDE_EXISTING_CHALLENGES"],minSize:2,maxSize:2});case 5:case 15:return e.abrupt("return",GameSDK.context.getID());case 8:if(e.prev=8,e.t0=e.catch(0),!(e.t0 instanceof Object&&GameCore.Utils.Object.hasOwn(e.t0,"code"))){e.next=16;break}e.t1=e.t0.code,e.next="USER_INPUT"===e.t1?14:"SAME_CONTEXT"===e.t1?15:16;break;case 14:return e.abrupt("return",!1);case 16:return e.abrupt("return",null);case 17:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}(),t.createAsync=function(){var e=(0,i.Z)(l().mark((function e(t){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,GameCore.Utils.Valid.isValueChangeAsync(window.__fbGameReady,!0);case 3:return e.next=5,GameSDK.context.createAsync(""+t);case 5:case 15:return e.abrupt("return",GameSDK.context.getID());case 8:if(e.prev=8,e.t0=e.catch(0),!(e.t0 instanceof Object&&GameCore.Utils.Object.hasOwn(e.t0,"code"))){e.next=16;break}e.t1=e.t0.code,e.next="USER_INPUT"===e.t1?14:"SAME_CONTEXT"===e.t1?15:16;break;case 14:return e.abrupt("return",!1);case 16:return e.abrupt("return",null);case 17:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),t.getPlayerToken=function(){var e=(0,i.Z)(l().mark((function e(){var t;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,GameSDK.player.getSignedPlayerInfoAsync();case 2:return t=e.sent,e.abrupt("return",t.getSignature());case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),t.getContextPlayers=function(){var e=(0,i.Z)(l().mark((function e(t){var n,i;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,GameSDK.context.getPlayersAsync();case 3:return n=e.sent,i=[],n.forEach((function(e){var n=e.getID();if(n!==t){var a=e.getName();if(a){var s=e.getPhoto();i.push(new I.Z(n,a,s).toObject())}}})),e.abrupt("return",GameCore.Utils.Array.unique(i));case 9:return e.prev=9,e.t0=e.catch(0),e.abrupt("return",[]);case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}(),t.shareAsync=function(){var e=(0,i.Z)(l().mark((function e(t){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,GameSDK.shareAsync(t);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t.sendMessage=function(){var e=(0,i.Z)(l().mark((function e(t){var n,i,a,s,r,o;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.data,i=t.image,a=t.template,s=t.cta,r=t.text,o={data:n,image:i,action:"CUSTOM",template:a,cta:s,text:r,strategy:"IMMEDIATE",notification:"PUSH"},e.next=4,GameSDK.updateAsync(o);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t.inviteAsync=function(){var e=(0,i.Z)(l().mark((function e(t){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,GameSDK.inviteAsync(t);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t.postSessionScoreAsync=function(){var e=(0,i.Z)(l().mark((function e(t){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,GameSDK.postSessionScoreAsync(t);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t.getRewardedVideoAsync=function(){var e=(0,i.Z)(l().mark((function e(t){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,GameSDK.getRewardedVideoAsync(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t.getInterstitialAdAsync=function(){var e=(0,i.Z)(l().mark((function e(t){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,GameSDK.getInterstitialAdAsync(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t.getContextID=function(){return GameSDK.context.getID()},t.setLoadingProgress=function(e){GameSDK.setLoadingProgress(e)},t.getLocale=function(){return GameSDK.getLocale()||"en"},t.injectTournament=function(){var e=(0,i.Z)(l().mark((function e(){var t,i;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!GameCore.Configs.Tournament.UseMock){e.next=11;break}return e.next=4,n.e(302).then(n.bind(n,611));case 4:t=e.sent.default,i=new t,this.facebook.tournament=i,GameSDK.getTournamentAsync=this.getTournamentAsync,GameSDK.tournament=i,e.next=12;break;case 11:this.facebook.tournament=new B;case 12:this.facebook.getTournamentAsync=function(){return FBInstant.getTournamentAsync()},this.facebook.requestTournamentAsync=this.requestTournamentAsync;case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),t.sendNotificationAsync=function(){var e=(0,i.Z)(l().mark((function e(t){var n,i,a;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=t.message,i=t.delayTime,a=t.type,e.next=5,FBInstant.scheduleNotificationAsync({title:R,minDelayInSeconds:i,description:n,type:null!=a?a:x.Z.GENERIC_NOTIFICATION});case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),e}(),N=D},559:function(e,t,n){n.r(t);var i=n(619),a=n(621),s=n(19),r=n.n(s),o=n(101),c=n.n(o),h=n(0),u=n.n(h),l=n(630),d=n(652),p=GameCore.Utils.Object,f=GameCore.Ads,g=f.Types,m=f.Status,v="msgames",y=function(e){function t(t,n){var i;return(i=e.call(this,t)||this).instance=void 0,i.placementId=void 0,i.instanceLoadFailedQueue=void 0,i.isHasTooManyInstancesError=void 0,i.instance=null,i.placementId=n,i.instanceLoadFailedQueue=[],i.isHasTooManyInstancesError=!1,i}(0,a.Z)(t,e),t.setGame=function(e){self.game=e};var n=t.prototype;return n.loadAsync=function(){var e=(0,i.Z)(u().mark((function e(){var t,n,i;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.status===m.IDLE){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,this.status=m.LOADING,e.next=6,this.createInstanceByType(this.type);case 6:if(this.instance=e.sent,null!==this.instance){e.next=9;break}throw new GameCore.Ads.AdError("AD_INSTANCE_NOT_INITIATED","Ad instance didn't initiated.");case 9:return e.next=11,this.instance.loadAsync();case 11:this.status=m.FILLED,t=this.getSceneName(),this.type===g.PRE_ROLL&&self.game.analytics.loadPreRollAd(t,v),this.type===g.INTERSTITIAL&&self.game.analytics.loadInterstitialAd(t,v),this.type===g.REWARDED&&self.game.analytics.loadRewardedVideoAd(t,v),e.next=25;break;case 18:throw e.prev=18,e.t0=e.catch(2),this.status=m.IDLE,this.instance&&this.instanceLoadFailedQueue.push(this.instance),this.instance=null,this.isAdTypeValid(this.type)&&(n=this.getSceneName(),i={type:this.type,placement:n,adService:v},self.game.analytics.loadAdFail(i)),e.t0;case 25:case"end":return e.stop()}}),e,this,[[2,18]])})));return function(){return e.apply(this,arguments)}}(),n.showAsync=function(){var e=(0,i.Z)(u().mark((function e(){var t,n,i,a;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=!1,null,e.prev=2,this.status===m.FILLED){e.next=5;break}throw new GameCore.Ads.AdError("AD_NOT_FILLED","Ads no fill.");case 5:if(this.status=m.SHOWING,null!==this.instance){e.next=8;break}throw new GameCore.Ads.AdError("AD_INSTANCE_NOT_INITIATED","Ad instance didn't initiated.");case 8:return this.isHasTooManyInstancesError&&self.game.analytics.event(l._.MISSING_AD_SHOW,{ad_type:this.type}),e.next=11,this.instance.showAsync();case 11:t=!0,this.status=m.IDLE,this.instance=null,e.next=21;break;case 16:throw e.prev=16,e.t0=e.catch(2),e.t0 instanceof Object&&p.hasOwn(e.t0,"code")?("ADS_NOT_LOADED"===e.t0.code?this.status=m.FILLED:(this.status=m.IDLE,this.instance=null),"USER_INPUT"===e.t0.code&&(this.status=m.IDLE,this.instance=null,t=!0)):(this.status=m.IDLE,this.instance=null),e.t0,e.t0;case 21:return e.prev=21,window.focus(),n=this.getSceneName(),t?(this.type===g.PRE_ROLL&&self.game.analytics.showPreRollAd(n,v),this.type===g.INTERSTITIAL&&self.game.analytics.showInterstitialAd(n,v),this.type===g.REWARDED&&self.game.analytics.showRewardedVideoAd(n,v)):this.isAdTypeValid(this.type)&&(i=this.getSceneName(),a={type:this.type,placement:i,adService:v},self.game.analytics.showAdFail(a)),e.finish(21);case 26:case"end":return e.stop()}}),e,this,[[2,16,21,26]])})));return function(){return e.apply(this,arguments)}}(),n.getStatus=function(){return this.status},n.createInstanceByType=function(){var e=(0,i.Z)(u().mark((function e(t){var n;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=self.game.facebook,e.prev=1,e.t0=t,e.next=e.t0===g.REWARDED?5:e.t0===g.INTERSTITIAL||e.t0===g.PRE_ROLL?8:11;break;case 5:return e.next=7,n.getRewardedVideoAsync(this.placementId);case 7:case 10:return e.abrupt("return",e.sent);case 8:return e.next=10,n.getInterstitialAdAsync(this.placementId);case 11:case 20:return e.abrupt("return",null);case 12:e.next=21;break;case 14:if(e.prev=14,e.t1=e.catch(1),!(e.t1 instanceof Object&&p.hasOwn(e.t1,"code"))){e.next=20;break}if("ADS_TOO_MANY_INSTANCES"!==e.t1.code){e.next=20;break}return this.isHasTooManyInstancesError=!0,e.abrupt("return",this.instanceLoadFailedQueue.shift()||null);case 21:case"end":return e.stop()}}),e,this,[[1,14]])})));return function(t){return e.apply(this,arguments)}}(),n.getSceneName=function(){try{var e=self.game.globalScene;return e instanceof d.Z?e.getCurrentScene().scene.getSceneName():"unknown"}catch(t){return"unknown"}},n.isAdTypeValid=function(e){var t;return r()(t=c()(g)).call(t,e)},t}(GameCore.Ads.AdInstance);t.default=y},560:function(e,t,n){n.r(t);var i,a=n(619),s=n(627),r=n(626),o=n(621),c=n(2),h=n.n(c),u=n(19),l=n.n(u),d=n(101),p=n.n(d),f=n(0),g=n.n(f),m=n(630),v=n(652),y=GameCore,A=y.Utils.Object,E=y.Ads,T=E.Types,C=E.Status,S="not-loaded",b="loading",I="loaded",w="google",_=function(e){function t(n,i){var a;return(a=e.call(this,n)||this).instance=void 0,a.instance=null,a.status=C.IDLE,window.setInterstitialPlacementType=t.setInterstitialPlacementType,window.setRewardedPlacementType=t.setRewardedPlacementType,window.setPreRollPlacementType=t.setPreRollPlacementType,t.childAdInstances.push((0,r.Z)(a)),t.isPreloadConfigReady&&(a.status=C.FILLED),a}(0,o.Z)(t,e),t.initGoogleAdsAsync=function(){var e=(0,a.Z)(g().mark((function e(n){return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("loaded"!==t.initStatus){e.next=3;break}return e.abrupt("return");case 3:t._initStatus=b,t.adsByGoogleConfig=n,t.loadScriptElementAsync(n);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t.configGoogleAdsOnInit=function(){var e=(0,a.Z)(g().mark((function e(){return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:window.adsbygoogle=window.adsbygoogle||[],window.adBreak=function(e){adsbygoogle.push(e)},window.adConfig=function(e){adsbygoogle.push(e)},t._initStatus=I,t.runPreloadAdConfig();case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),t.runPreloadAdConfig=function(){var e=(0,a.Z)(g().mark((function e(){return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preloadPromise=new(h())((function(e,n){window.adConfig({preloadAdBreaks:"on",onReady:function(){t.isPreloadConfigReady=!0,t.handlePostPreloadAdComplete(),e()}}),setTimeout((function(){t.isPreloadConfigReady||n(new Error("Failed to preload ad config in time."))}),1e4)})),e.abrupt("return",t.preloadPromise);case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),t.loadScriptElementAsync=function(e){return new(h())((function(n,i){!function a(s){var r=e.maxScriptLoadRetryCount,o=document.createElement("script");try{t.assignAdsByGoogleScriptProperties(o,e)}catch(h){t._initStatus=S,i(new Error("Invalid adConfig."))}if(o.onload=function(){t.configGoogleAdsOnInit(),n(!0)},o.onerror=function(){s<r?setTimeout((function(){a(s+1)}),12e4):(t._initStatus=S,i(new Error("Failed to load Google Ads script.")))},document.head.appendChild(o),!!!document.getElementById("adsByGoogleFunctionScript")){var c=document.createElement("script");c.text="window.adsbygoogle = window.adsbygoogle || []; var adBreak = adConfig = function(o) {adsbygoogle.push(o);}",c.id="adsByGoogleFunctionScript",document.head.appendChild(c)}}(0)}))},t.assignAdsByGoogleScriptProperties=function(e,t){var n=t.dataAdClient,i=t.dataAdHost,a=t.dataAdChannel,s=t.dataAdBreakTest,r=t.dataAdFrequencyHint;if(!n&&!i)throw new Error("dataAdClient or dataAdHost is required.");e.async=!0,e.setAttribute("data-ad-frequency-hint",r+"s"),n&&e.setAttribute("data-ad-client",n),a&&e.setAttribute("data-ad-channel",a),i&&e.setAttribute("data-ad-host",i),s&&e.setAttribute("data-adbreak-test","on");var o="";if(n||i){o="?";var c=[];n&&c.push("client="+n),i&&c.push("host="+i),o+=c.join("&")}e.src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"+o,e.crossOrigin="anonymous"};var n=t.prototype;return n.makeAdInstance=function(){var e=this;return{getPlacementID:function(){return""},loadAsync:function(){return e.preloadAdPlacement()},showAsync:function(){return e.createAdPlacement()}}},n.preloadAdPlacement=function(){return t._initStatus!==I?h().reject(new Error("Google Ads not initiated.")):t.isPreloadConfigReady?h().resolve():t.preloadPromise?t.preloadPromise:t.runPreloadAdConfig()},n.createAdPlacement=function(){switch(this.type){case T.PRE_ROLL:return this.createAdPlacementPreroll();case T.REWARDED:return this.createAdPlacementRewarded();case T.INTERSTITIAL:return this.createAdPlacementInterstitial();default:return h().reject(new GameCore.Ads.AdError("UNSUPPORTED_AD_TYPE","Unsupported."))}},n.createAdPlacementPreroll=function(){return new(h())((function(e,n){window.adBreak({type:t.preRollPlacementType,name:"prerollAd",adBreakDone:function(t){switch(t.breakStatus){case"dismissed":case"viewed":return void e();default:return void n(new GameCore.Ads.AdError(t.breakStatus,t.breakType))}}})}))},n.createAdPlacementInterstitial=function(){return new(h())((function(e,n){window.adBreak({type:t.interstitialPlacementType,name:"interstitialAd",beforeAd:function(){self.game.ads.hideBannerAdAsync()},adBreakDone:function(t){switch(self.game.ads.showBannerAdAsync(),t.breakStatus){case"dismissed":case"viewed":return void e();default:return void n(new GameCore.Ads.AdError(t.breakStatus,t.breakType))}}})}))},n.createAdPlacementRewarded=function(){return new(h())((function(e,n){window.adBreak({type:t.rewardedPlacementType,name:"rewardedAd",beforeReward:function(e){self.game.ads.hideBannerAdAsync(),e()},adViewed:function(){},adDismissed:function(){},adBreakDone:function(t){switch(self.game.ads.showBannerAdAsync(),t.breakStatus){case"dismissed":return void n(new GameCore.Ads.AdError("USER_INPUT","User dismissed."));case"viewed":return void e();default:return void n(new GameCore.Ads.AdError(t.breakStatus,t.breakType))}}})}))},t.setGame=function(e){self.game=e},n.getStatus=function(){return this.status},n.loadAsync=function(){var e=(0,a.Z)(g().mark((function e(){var n,i,a;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,t.isPreloadConfigReady&&null==this.instance){e.next=3;break}return e.abrupt("return");case 3:if(this.instance=this.makeAdInstance(),null!==this.instance){e.next=6;break}throw new GameCore.Ads.AdError("AD_INSTANCE_NOT_INITIATED","Ad instance didn't initiated.");case 6:return e.next=8,this.instance.loadAsync();case 8:n=this.getSceneName(),this.type===T.PRE_ROLL&&self.game.analytics.loadPreRollAd(n,w),this.type===T.INTERSTITIAL&&self.game.analytics.loadInterstitialAd(n,w),this.type===T.REWARDED&&self.game.analytics.loadRewardedVideoAd(n,w),e.next=18;break;case 14:throw e.prev=14,e.t0=e.catch(0),this.isAdTypeValid(this.type)&&(i=this.getSceneName(),a={type:this.type,placement:i,adService:w},self.game.analytics.loadAdFail(a)),e.t0;case 18:case"end":return e.stop()}}),e,this,[[0,14]])})));return function(){return e.apply(this,arguments)}}(),n.showAsync=function(){var e=(0,a.Z)(g().mark((function e(){var t,n,i,a;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=!1,e.prev=1,this.status===C.FILLED){e.next=4;break}throw new GameCore.Ads.AdError("AD_NOT_FILLED","Ads no fill.");case 4:if(this.status=C.SHOWING,null!==this.instance){e.next=8;break}return e.next=8,this.loadAsync();case 8:if(null!==this.instance){e.next=10;break}throw new GameCore.Ads.AdError("AD_INSTANCE_NOT_INITIATED","Ad instance didn't initiated.");case 10:return e.next=12,this.instance.showAsync();case 12:t=!0,this.handlePostShowAdStatus(),this.instance=null,e.next=27;break;case 17:if(e.prev=17,e.t0=e.catch(1),!(e.t0 instanceof Object&&A.hasOwn(e.t0,"code"))){e.next=24;break}if("noAdPreloaded"!==e.t0.code){e.next=22;break}return e.abrupt("return");case 22:"USER_INPUT"===e.t0.code&&(t=!0),"frequencyCapped"===e.t0.code&&self.game.analytics.event(m._.MISSING_AD_SHOW,{ad_type:this.type});case 24:throw this.handlePostShowAdStatus(),this.instance=null,e.t0;case 27:return e.prev=27,window.focus(),n=this.getSceneName(),t?(this.type===T.PRE_ROLL&&self.game.analytics.showPreRollAd(n,w),this.type===T.INTERSTITIAL&&self.game.analytics.showInterstitialAd(n,w),this.type===T.REWARDED&&self.game.analytics.showRewardedVideoAd(n,w)):this.isAdTypeValid(this.type)&&(i=this.getSceneName(),a={type:this.type,placement:i,adService:w},self.game.analytics.showAdFail(a)),e.finish(27);case 32:case"end":return e.stop()}}),e,this,[[1,17,27,32]])})));return function(){return e.apply(this,arguments)}}(),n.getSceneName=function(){try{var e=self.game.globalScene;return e instanceof v.Z?e.getCurrentScene().scene.getSceneName():"unknown"}catch(t){return"unknown"}},n.isAdTypeValid=function(e){var t;return l()(t=p()(T)).call(t,e)},n.handlePostShowAdStatus=function(){t.isPreloadConfigReady?this.status=C.FILLED:this.status=C.IDLE},t.handlePostPreloadAdComplete=function(){t.childAdInstances.forEach((function(e){e.status=C.FILLED}))},(0,s.Z)(t,null,[{key:"initStatus",get:function(){return t._initStatus}}]),t}(GameCore.Ads.AdInstance);i=_,_.childAdInstances=[],_._initStatus=S,_.isPreloadConfigReady=!1,_.adsByGoogleConfig=void 0,_.preloadPromise=void 0,_.preRollPlacementType="preroll",_.interstitialPlacementType="next",_.rewardedPlacementType="reward",_.setInterstitialPlacementType=function(e){i.interstitialPlacementType=e},_.setRewardedPlacementType=function(e){i.rewardedPlacementType=e},_.setPreRollPlacementType=function(e){i.preRollPlacementType=e},t.default=_},641:function(e,t,n){n.d(t,{U:function(){return T},v:function(){return C}});var i=n(616),a=n(619),s=n(0),r=n.n(s),o=n(33),c=n.n(o),h=n(621),u=n(632),l=function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).name="BadRequest",i.message=t||"This request is bad",i.payload=n,i}return(0,h.Z)(t,e),t}((0,u.Z)(Error)),d=function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).name="RequestTimeout",i.message=t||"This request is timeout",i.payload=n,i}return(0,h.Z)(t,e),t}((0,u.Z)(Error)),p=n(629),f=GameCore.Configs,g=f.AppId,m=f.Network,v=function(e){if(!e.ok)throw new l(null,{response:e})},y=function(){var e=window.game.auth.getToken();return{token:e,timeout:m.Timeout,headers:{Authorization:"Bearer "+e,"Content-Type":"application/json"}}},A=function(e,t,n,i){return(0,a.Z)(r().mark((function a(){var s,o,h,u,p;return r().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,s=e+"/apps/"+g+"/"+t,o=new AbortController,n.signal=o.signal,h=setTimeout((function(){o.abort()}),n.timeout),GameCore.Utils.Valid.isObject(i)&&(n.body=c()(i)),a.next=8,fetch(s,n);case 8:return u=a.sent,clearTimeout(h),v(u),a.next=13,u.json();case 13:if(a.t0=a.sent,a.t0){a.next=16;break}a.t0={};case 16:return p=a.t0,a.abrupt("return",p);case 20:if(a.prev=20,a.t1=a.catch(0),!(a.t1 instanceof l)){a.next=24;break}return a.abrupt("return",null);case 24:if(!(a.t1 instanceof Object&&GameCore.Utils.Object.hasOwn(a.t1,"name"))){a.next=27;break}if("AbortError"!==a.t1.name){a.next=27;break}throw new d(null);case 27:throw a.t1;case 28:case"end":return a.stop()}}),a,null,[[0,20]])})))},E=function(){var e=(0,a.Z)(r().mark((function e(t,n){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.abrupt("return",t());case 4:if(e.prev=4,e.t0=e.catch(0),!(e.t0 instanceof d&&n>0)){e.next=18;break}return e.prev=7,e.next=10,(0,p.qZ)(600);case 10:return e.next=12,E(t,n-1);case 12:return e.abrupt("return",e.sent);case 15:return e.prev=15,e.t1=e.catch(7),e.abrupt("return",{});case 18:if(!(e.t0 instanceof d)){e.next=20;break}return e.abrupt("return",{});case 20:return e.abrupt("return",{});case 22:case"end":return e.stop()}}),e,null,[[0,4],[7,15]])})));return function(t,n){return e.apply(this,arguments)}}(),T=function(){var e=(0,a.Z)(r().mark((function e(t,n,a,s){var o,c;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return void 0===n&&(n={}),void 0===s&&(s=m.Retries),e.prev=2,o=(0,i.Z)({},y(),n,{method:"GET"}),c=A(a,t,o),e.next=7,E(c,s);case 7:return e.abrupt("return",e.sent);case 10:return e.prev=10,e.t0=e.catch(2),e.abrupt("return",{});case 14:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(t,n,i,a){return e.apply(this,arguments)}}(),C=function(){var e=(0,a.Z)(r().mark((function e(t,n,a,s,o){var c,h;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return void 0===a&&(a={}),void 0===o&&(o=m.Retries),e.prev=2,c=(0,i.Z)({},y(),a,{method:"POST"}),h=A(s,t,c,n),e.next=7,E(h,o);case 7:return e.abrupt("return",e.sent);case 10:return e.prev=10,e.t0=e.catch(2),e.abrupt("return",{});case 14:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(t,n,i,a,s){return e.apply(this,arguments)}}()},639:function(e,t,n){n.d(t,{kL:function(){return i},fJ:function(){return a},EH:function(){return s},qj:function(){return r},rh:function(){return o},DW:function(){return c}});var i="CONTEXT_RECEIVED",a="CONTEXT_PROCESSED",s="CONTEXT_GAME_MODE_DETECTED",r="MESSAGES_SENT_UPDATE",o="MESSAGES_SENT_REMOVE",c="SCENE_KEY_UPDATE"},650:function(e,t,n){var i=n(621),a=function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).name="LeaderboardNotFound",i.message=t||"Leaderboard not found",i.payload=n,i}return(0,i.Z)(t,e),t}((0,n(632).Z)(Error));t.Z=a},631:function(e,t,n){var i=n(621),a=function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).name="TournamentNotFound",i.message=t||"A Tournament with current context was not found",i.payload=n,i.code="TOURNAMENT_NOT_FOUND",i}return(0,i.Z)(t,e),t}((0,n(632).Z)(Error));t.Z=a},656:function(e,t,n){var i=n(615),a=function(){function e(e,t){if(this.scene=void 0,this.config=void 0,this.isStarted=void 0,this.tween=void 0,!(t.targets.length<1)){this.buildConfig(e,t);var n=this.config.targets[0].scene;n&&(this.scene=n,this.isStarted=!1,this.tween=n.tweens.create(this.config))}}var t=e.prototype;return t.buildConfig=function(e,t){this.config=(0,i.TS)(e,t)},t.play=function(){this.tween&&(this.isStarted&&this.tween.hasStarted?this.restart():(this.isStarted||this.tween.hasStarted||this.tween.play(),this.isStarted=!0))},t.restart=function(){var e;null==(e=this.tween)||e.restart()},t.stop=function(){var e;null==(e=this.tween)||e.stop()},t.remove=function(){var e;null==(e=this.tween)||e.remove()},t.next=function(e){return this.tween?(this.tween.off(Phaser.Tweens.Events.TWEEN_COMPLETE,e),this.tween.once(Phaser.Tweens.Events.TWEEN_COMPLETE,e),this.tween):null},e}();t.Z=a},661:function(e,t,n){var i=n(621),a=n(656),s={targets:[],yoyo:!0,repeat:-1,duration:600,repeatDelay:50,ease:n(662).Z,easeParams:[0,.9],props:{scale:{from:1,to:1.2}}},r=function(e){function t(t){return e.call(this,s,t)||this}return(0,i.Z)(t,e),t}(a.Z);t.Z=r},674:function(e,t,n){var i=n(626),a=n(621),s=n(656),r={targets:[],repeat:-1,yoyo:!0,duration:33,ease:Phaser.Math.Easing.Sine.InOut,props:{x:5}},o=function(e){function t(t){var n,a,s;return(s=e.call(this,r,t)||this).posX=void 0,s.handleSwitchPosition=function(){var e;s.posX=-s.posX,null==(e=s.tween)||e.updateTo("x",-s.posX)},null!=(n=s.config)&&n.props?(s.posX=s.config.props.x,null==(a=s.tween)||a.on(Phaser.Tweens.Events.TWEEN_REPEAT,s.handleSwitchPosition),s):(0,i.Z)(s)}return(0,a.Z)(t,e),t}(s.Z);t.Z=o},673:function(e,t,n){var i=n(621),a=n(656),s={targets:[],duration:400,ease:n(655).Z,props:{scale:"+=0.1"}},r=function(e){function t(t){return e.call(this,s,t)||this}return(0,i.Z)(t,e),t}(a.Z);t.Z=r},662:function(e,t,n){var i=n(481),a=n.n(i)()(.55,.47,.43,.91);t.Z=a},655:function(e,t,n){var i=n(481),a=n.n(i)()(.48,1.57,.6,.83);t.Z=a},657:function(e,t,n){var i=n(621),a=n(656),s={targets:[],duration:600,ease:Phaser.Math.Easing.Cubic.Out,props:{alpha:{start:0,from:0,to:1}}},r=function(e){function t(t){return e.call(this,s,t)||this}return(0,i.Z)(t,e),t}(a.Z);t.Z=r},664:function(e,t,n){var i=n(621),a=n(656),s={targets:[],duration:600,ease:Phaser.Math.Easing.Back.Out,props:{y:{from:500,to:0}}},r=function(e){function t(t){return e.call(this,s,t)||this}return(0,i.Z)(t,e),t}(a.Z);t.Z=r},658:function(e,t,n){var i=n(621),a=n(656),s={targets:[],duration:600,ease:Phaser.Math.Easing.Quadratic.Out,props:{alpha:{start:1,from:1,to:0}}},r=function(e){function t(t){return e.call(this,s,t)||this}return(0,i.Z)(t,e),t}(a.Z);t.Z=r},654:function(e,t,n){var i=n(621),a=n(656),s={targets:[],duration:300,ease:n(655).Z,props:{scale:{from:1.2,to:1}}},r=function(e){function t(t){return e.call(this,s,t)||this}return(0,i.Z)(t,e),t}(a.Z);t.Z=r},668:function(e,t,n){n.d(t,{Z:function(){return p}});var i=n(627),a=n(626),s=n(621),r=n(630),o=n(656),c={targets:[],duration:400,ease:n(655).Z,props:{scale:"-=0.1"}},h=function(e){function t(t){return e.call(this,c,t)||this}return(0,s.Z)(t,e),t}(o.Z),u=n(644),l=n(646),d=n(624),p=function(e){function t(t,n,i,s,r,o){var c;return void 0===o&&(o=!1),(c=e.call(this,t)||this).useSound=!0,c.isClicked=!1,c.scaleUp=-1,c.scaleDown=-1,c.button=void 0,c.upAnimation=void 0,c.downAnimation=void 0,c.isUsePixelPerfect=!1,c.hitArea=void 0,c.hitZone=void 0,c.scaleDownPress=void 0,c.parentName=void 0,c.handelObjectDestroy=function(){c.scene&&c.scene.events.off(Phaser.Scenes.Events.SLEEP,c.handleSceneSleep)},c.handleSceneSleep=function(){c.scene&&c.scene.tweens.killTweensOf((0,a.Z)(c))},c.handlePointerDown=function(){var e,t;c.isClicked||null!=(e=c.upAnimation)&&null!=(t=e.tween)&&t.isPlaying()||(c.isClicked=!0,c.runDownAnimation())},c.handleOnClick=function(e){return function(){var t,n,i,a;c.isClicked&&(null!=(t=c.upAnimation)&&null!=(n=t.tween)&&n.isPlaying()||(c.isClicked=!1,c.runUpAnimation(),null==(i=c.upAnimation)||null==(a=i.tween)||a.once(Phaser.Tweens.Events.TWEEN_COMPLETE,(function(){c.logButtonEvent(),c.addDebugData(),c.processCallback(e)}))))}},c.handlePointerOut=function(){var e,t;c.isClicked&&(null!=(e=c.upAnimation)&&null!=(t=e.tween)&&t.isPlaying()||(c.isClicked=!1,c.runUpAnimation()))},c.runDownAnimation=function(){var e;-1===c.scaleDown&&(c.scaleUp=c.scale,c.scaleDown=c.scaleDownPress),c.useSound&&c.scene.audio.playSound(l.Z.BUTTON_CLICK),null==(e=c.downAnimation)||e.remove(),c.downAnimation=new h({targets:[(0,a.Z)(c)],duration:150,props:{scale:c.scaleDown},onUpdate:function(){c.hitZone.scale=1/c.scale}}),c.downAnimation.play()},c.runUpAnimation=function(){var e;-1!==c.scaleUp&&(null==(e=c.upAnimation)||e.remove(),c.upAnimation=new h({targets:[(0,a.Z)(c)],duration:150,props:{scale:c.scaleUp},onUpdate:function(){c.hitZone.scale=1/c.scale}}),c.upAnimation.play())},c.isUsePixelPerfect=o,c.setDepth(u.Z.BUTTON),c.createButton(n,i,s,r),c.updateSize(),c.listenEvents(),c.scene.add.existing((0,a.Z)(c)),c}(0,s.Z)(t,e);var n=t.prototype;return n.listenEvents=function(){this.scene.events.on(Phaser.Scenes.Events.SLEEP,this.handleSceneSleep),this.once(Phaser.GameObjects.Events.DESTROY,this.handelObjectDestroy)},n.processCallback=function(e){var t,n,i;null==(t=this.upAnimation)||t.stop(),null==(n=this.downAnimation)||n.stop(),null==(i=this.scene)||i.tweens.killTweensOf(this),-1!==this.scaleUp&&this.setScale(this.scaleUp),e()},n.setDisabled=function(e){var t,n;e?(this.setAlpha(.5),null==(t=this.hitArea)||t.disableInteractive()):(this.setAlpha(1),null==(n=this.hitArea)||n.setInteractive())},n.createButton=function(e,t,n,i){this.button=this.scene.add.image(0,0,e,t),n&&i&&this.button.setWorldSize(n,i),this.scaleDownPress=this.scale-.1;var a=this.button,s=a.displayWidth,r=a.displayHeight;this.hitZone=this.scene.make.zone({displayWidth:s,displayHeight:r}),this.add([this.button,this.hitZone])},n.updateSize=function(){var e=this.button,t=e.width,n=e.height,i=t/100*10,a=n/100*10,s=i<10?i:10,r=a<10?a:10;this.setSize(t+s,n+r),this.hitZone.setSize(t+s,n+r)},n.addDebugData=function(){var e=this.getParentName(),t=this.name;(0,d.sw)("ui-click",e+":"+t)},n.logButtonEvent=function(){var e=this.getParentName(),t=this.name;this.scene.analytics.event(r._.BUTTON_CLICK,{button_name:t,screen_name:e})},n.getParentName=function(){if(this.parentName)return this.parentName;for(var e=this.parentContainer;e;){if(e instanceof GameCore.Screen){var t=e;return this.parentName=t.getScreenName(),this.parentName}e=e.parentContainer}return this.parentName=this.scene.getSceneName(),this.parentName},(0,i.Z)(t,[{key:"onClick",set:function(e){this.isUsePixelPerfect?(this.hitArea=this.button,this.hitArea.setInteractive({useHandCursor:!0,pixelPerfect:!0})):(this.hitArea=this.hitZone,this.updateSize(),this.hitArea.setInteractive({useHandCursor:!0})),this.hitArea.on(Phaser.Input.Events.GAMEOBJECT_POINTER_DOWN,this.handlePointerDown),this.hitArea.on(Phaser.Input.Events.GAMEOBJECT_POINTER_UP,this.handleOnClick(e)),this.hitArea.on(Phaser.Input.Events.GAMEOBJECT_POINTER_OUT,this.handlePointerOut)}},{key:"isUsePixelPerFect",get:function(){return this.isUsePixelPerfect}}]),t}(Phaser.GameObjects.Container)},660:function(e,t,n){var i=n(627),a=n(626),s=n(621),r=n(630),o=n(644),c=n(624),h=n(661),u=function(e){function t(t,n,i){var s;return(s=e.call(this,t)||this).useSound=!0,s.isClicked=!1,s.scaleUp=-1,s.scaleDownPress=void 0,s.parentName=void 0,s.disable=void 0,s.handelObjectDestroy=function(){s.scene&&s.scene.events.off(Phaser.Scenes.Events.SLEEP,s.handleSceneSleep)},s.handleSceneSleep=function(){s.scene&&s.scene.tweens.killTweensOf((0,a.Z)(s))},s.handlePointerDown=function(){s.isClicked||(s.animButtonDown(),s.isClicked=!0)},s.handleOnClick=function(e){return function(){s.isClicked&&(s.isClicked=!1,s.animButtonUp(),s.logButtonEvent(),s.addDebugData(),s.processCallback(e))}},s.handlePointerOut=function(){s.isClicked&&(s.isClicked=!1,s.animButtonUp())},s.buttonsPulsateAnimation=void 0,s.setDepth(o.Z.BUTTON),s.setSize(n,i),s.listenEvents(),s.scene.add.existing((0,a.Z)(s)),s}(0,s.Z)(t,e);var n=t.prototype;return n.listenEvents=function(){this.scene.events.on(Phaser.Scenes.Events.SLEEP,this.handleSceneSleep),this.once(Phaser.GameObjects.Events.DESTROY,this.handelObjectDestroy)},n.animButtonDown=function(){var e=this;this.scene.add.tween({targets:this,alpha:.75,duration:100,ease:Phaser.Math.Easing.Sine.Out,onStart:function(t){e.disable&&t.remove()},onUpdate:function(t){e.disable&&t.remove()}})},n.animButtonUp=function(){var e=this;this.scene.add.tween({targets:this,alpha:1,duration:200,ease:Phaser.Math.Easing.Sine.In,onStart:function(t){e.disable&&t.remove()},onUpdate:function(t){e.disable&&t.remove()}})},n.processCallback=function(e){-1!==this.scaleUp&&this.setScale(this.scaleUp),e()},n.setDisabled=function(e){this.disable!=e&&(this.disable=e,e?(this.setAlpha(.5),this.disableInteractive()):(this.setAlpha(1),this.setInteractive()))},n.addDebugData=function(){var e=this.getParentName(),t=this.name;(0,c.sw)("ui-click",e+":"+t)},n.logButtonEvent=function(){var e=this.getParentName(),t=this.name;this.scene.analytics.event(r._.BUTTON_CLICK,{button_name:t,screen_name:e})},n.getParentName=function(){if(this.parentName)return this.parentName;for(var e=this.parentContainer;e;){if(e instanceof GameCore.Screen){var t=e;return this.parentName=t.getScreenName(),this.parentName}e=e.parentContainer}return this.parentName=this.scene.getSceneName(),this.parentName},n.runPulsate=function(){var e,t;null==(e=this.buttonsPulsateAnimation)||e.remove(),this.buttonsPulsateAnimation=new h.Z({targets:[this],props:{scale:{from:1,to:1.05},duration:500}}),null==(t=this.buttonsPulsateAnimation)||t.play()},n.stopPulsate=function(){var e;null==(e=this.buttonsPulsateAnimation)||e.stop(),this.setScale(1)},n.cancelButtonClick=function(){this.isClicked&&(this.isClicked=!1,this.animButtonUp())},(0,i.Z)(t,[{key:"onClick",set:function(e){this.setInteractive({useHandCursor:!0}),this.on(Phaser.Input.Events.GAMEOBJECT_POINTER_DOWN,this.handlePointerDown),this.on(Phaser.Input.Events.GAMEOBJECT_POINTER_UP,this.handleOnClick(e)),this.on(Phaser.Input.Events.GAMEOBJECT_POINTER_OUT,this.handlePointerOut)}}]),t}(Phaser.GameObjects.Container);t.Z=u},671:function(e,t,n){var i=n(621),a=n(651),s=function(e){function t(t,n,i,a){var s;return(s=e.call(this,t,n.key,n.button,i,a)||this).payload=void 0,s.payload=n,s.createIcon(),s.createText(),s}(0,i.Z)(t,e);var n=t.prototype;return n.createIcon=function(){var e=this.scene.add.image(0,0,this.payload.key,this.payload.icon);e.setWorldSize(43,43),this.add(e),Phaser.Display.Align.In.LeftCenter(e,this,-25)},n.createText=function(){var e=this.payload.text,t=this.scene.make.bitmapText({font:a.Z.PRIMARY.KEY,size:this.scene.fontSize(24),text:e,origin:{x:.2,y:.5}});this.add(t)},t}(n(668).Z);t.Z=s},653:function(e,t,n){n.d(t,{Z:function(){return c}});var i=n(626),a=n(621),s=n(643).Z.GAMEPLAY_DEFAULT,r=s.KEY,o=s.FRAME,c=function(e){function t(t){var n;return(n=e.call(this,t)||this).icons=[],n.canPlayAnimation=!1,n.timeline=void 0,n.setSize(188,32),n.createIcons(),n.runAnimation(),n.scene.add.existing((0,i.Z)(n)),n}(0,a.Z)(t,e);var n=t.prototype;return n.createIcons=function(){var e=this.scene.add.image(0,0,r,o.LOADING_CLUB),t=this.scene.add.image(0,0,r,o.LOADING_DIAMOND),n=this.scene.add.image(0,0,r,o.LOADING_HEART),i=this.scene.add.image(0,0,r,o.LOADING_SPADE);e.setWorldSize(32,32),t.setWorldSize(32,32),n.setWorldSize(32,32),i.setWorldSize(32,32),this.icons=[e,t,n,i],this.add(this.icons),this.alignIcons()},n.alignIcons=function(){var e=this;this.icons.forEach((function(t,n){var i=-(e.icons.length-1)/2*40+40*n;t.setX(i)}))},n.runAnimation=function(){var e,t=this;if(this.canPlayAnimation){var n=1/this.scene.world.getPixelRatio();null==(e=this.timeline)||e.stop();var i=function(){t.icons.forEach((function(e){return e.setScale(.8*n)}))},a=this.scene.tweens.createTimeline({loop:-1,onStart:i,onLoop:i});this.icons.forEach((function(e,t){a.add({targets:e,duration:150,ease:Phaser.Math.Easing.Sine.Out,yoyo:!0,offset:150*t,props:{scale:{from:.8*n,to:1.1*n}}})})),a.play(),this.timeline=a}},n.stopAnimation=function(){var e;null==(e=this.timeline)||e.stop()},n.setVisible=function(t){return e.prototype.setVisible.call(this,t),this.canPlayAnimation=t,t?this.runAnimation():this.stopAnimation(),this},n.setTint=function(e){return this.icons.forEach((function(t){return t.setTint(e)})),this},t}(Phaser.GameObjects.Container)},666:function(e,t,n){n.d(t,{Z:function(){return d}});var i=n(627),a=n(621),s=n(10),r=n.n(s),o=n(35),c=n.n(o),h=n(3),u=n.n(h),l=n(665),d=(function(e){function t(t){var n;return(n=e.call(this,t,"UpdateAbleObject")||this).updateInfo=void 0,n}(0,a.Z)(t,e)}(Phaser.GameObjects.GameObject),function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).classType=void 0,i.listConfigs=void 0,i.padding=void 0,i.startObjectIndex=void 0,i.endObjectIndex=void 0,i.listObjects=void 0,i.classType=n.classType,i.listConfigs=n.listConfigs,i.padding=n.padding?n.padding:0,i.objects.classType=i.classType,i.updateConfig(i.listConfigs),i}(0,a.Z)(t,e);var n=t.prototype;return n.reset=function(){e.prototype.reset.call(this),this.killAndHideAll()},n.getChildren=function(){var e;return r()(e=this.listObjects).call(e,(function(e){return void 0!=e&&e.active}))},n.updateConfig=function(e){var t;this.reset(),this.listConfigs=e,this.listObjects=c()(t=new Array(e.length)).call(t,void 0),this.addObjectIndex(0,0);var n=this.getEndObjectIndex();this.addObjectIndex(1,n),this.startObjectIndex=this.getStartObjectIndex(),this.endObjectIndex=this.getEndObjectIndex(),this.updateMaxHeight(),this.value=this.marginTop},n.killAndHideAll=function(){var e,t=this;this.listObjects instanceof Array&&u()(e=this.listObjects).call(e,(function(e){void 0!==e&&t.objects.killAndHide(e)}))},n.setItemPosition=function(e,t){var n=e.height;e.setPosition(0,n/2+(n+this.padding)*t-this.height/2)},n.updateMaxHeight=function(){return this.maxValue=Math.max(this.listConfigs.length*(this.objHeight+this.padding)-this.padding+this.marginBottom-this.height,0)},n.updateObject=function(t){e.prototype.updateObject.call(this,t);for(var n=this.getStartObjectIndex(),i=this.getEndObjectIndex(),a=this.startObjectIndex;a<=this.endObjectIndex;a++)(a<n||a>i)&&this.killObjectIndex(a,a);for(var s=n;s<=i;s++)(s<this.startObjectIndex||s>this.endObjectIndex)&&this.addObjectIndex(s,s);this.startObjectIndex=n,this.endObjectIndex=i},n.killObjectIndex=function(e,t){for(var n=e;n<=t;n++){var i=this.listObjects[n];i&&(this.objects.killAndHide(i),this.listObjects[n]=void 0)}},n.addObjectIndex=function(e,t){for(var n=e;n<=t;n++){var i=this.padding,a=this.listConfigs;if(n>=a.length)return;var s=this.objects.getFirstDead(!0),r=s.height,o=r/2+(r+i)*n+this.value-this.height/2;s.updateInfo(a[n]),s.setPosition(0,o),s.setActive(!0),s.setVisible(!0),this.addAt(s),this.listObjects[n]=s}},n.getStartObjectIndex=function(){var e=this.objHeight,t=this.padding;return Math.max(Math.floor((0-this.value)/(e+t)),0)},n.getEndObjectIndex=function(){var e=this.objHeight,t=this.padding,n=this.listConfigs,i=e+t;return Math.min(Math.floor((this.height-this.value)/i),n.length)},(0,i.Z)(t,[{key:"objHeight",get:function(){var e=this.objects.getChildren();return 0==e.length?this.maxValue=0:e[0].height}}]),t}(l.Z))},665:function(e,t,n){n.d(t,{Z:function(){return k}});var i=n(616),a=n(627),s=n(626),r=n(621),o=n(3),c=n.n(o),h=n(39),u=n.n(h),l=n(35),d=n.n(l),p=n(10),f=n.n(p),g=n(8),m=n.n(g),v=n(25),y=n.n(v),A=n(26),E=n.n(A),T=n(29),C=n.n(T),S=n(644),b=n(620),I=n(660),w=function(e){function t(t,n,i,a,s){var r;return(r=e.call(this,t)||this).imageTop=void 0,r.imageBottom=void 0,r.paddingTop=0,r.paddingBottom=0,r.setSize(a,s),r.createImage(n,i),r}(0,r.Z)(t,e);var n=t.prototype;return n.createImage=function(e,t){this.imageTop=this.scene.add.image(0,0,e,t),this.imageBottom=this.scene.add.image(0,0,e,t),this.imageTop.setOrigin(.5,0),this.imageBottom.setOrigin(.5,1),this.imageTop.setWorldSize(3.5,200),this.imageBottom.setWorldSize(3.5,200),this.updateSizeImages()},n.setHeightBar=function(e){this.setSize(this.width,e),this.updateSizeImages(),this.input&&this.input.hitArea.setTo(0,0,this.width,this.height)},n.setPadding=function(e,t){this.paddingTop=e,this.paddingBottom=t},n.updateSizeImages=function(){var e=this.scene.world.getPixelRatio();this.imageTop.setPosition(0,-this.height/2),this.imageTop.setCrop(0,0,this.width*e,this.height/2*e),this.imageBottom.setCrop(0,this.imageBottom.frame.height-this.height/2*e,this.width*e,this.height/2*e),this.imageBottom.setPosition(0,this.height/2),this.add([this.imageTop,this.imageBottom])},t}(Phaser.GameObjects.Container),_=n(643);function x(e,t){var n="undefined"!==typeof E()&&C()(e)||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){var n;if(!e)return;if("string"===typeof e)return P(e,t);var i=m()(n=Object.prototype.toString.call(e)).call(n,8,-1);"Object"===i&&e.constructor&&(i=e.constructor.name);if("Map"===i||"Set"===i)return y()(e);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return P(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var i=0;return function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function P(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var k=function(e){function t(t,n){var a,r;(r=e.call(this,t)||this).config=void 0,r.isEnable=void 0,r.minValue=void 0,r.maxValue=void 0,r.isScrolling=void 0,r.boundTop=void 0,r.boundBottom=void 0,r.maskGraphics=void 0,r.scrollerBar=void 0,r.objects=void 0,r._value=0,r.velocity=0,r.isScrollingSmooth=void 0,r.lastScrollY=void 0,r.isScrollingBack=void 0,r.scrollingBackTo=void 0,r.lastScrollYCount=0,r.hitArea=void 0,r.onScrollEvents=[],r.isGameObjectDragged=void 0,r.dragGameObject=function(e,t){!r.isGameObjectDragged&&e.getDistanceX()+e.getDistanceY()<20||(r.isGameObjectDragged=!0,r.onTouchScroll()(e),t instanceof I.Z&&t.cancelButtonClick())},r.updateObjectVisible=function(){for(var e=r.objects.getChildren(),t=0;t<e.length;t++){var n=e[t];n.y+n.height/2<-r.height/2||n.y-n.height/2>r.height/2?n.setVisible(!1):n.active&&n.setVisible(!0)}},r.update=function(e,t){r.isScrollingSmooth&&r.velocity&&r.scrollingSmooth(t),r.isScrollingBack&&r.scrollingBack(t)},r.checkReachBound=function(){return r.isReachTop()||r.isReachBottom()},r.onMouseScroll=(0,b.D)((function(e,t,n){if(r.isEnable){var i;if(r.isScrolling=!0,r.checkReachBound())return r.lastScrollY=c()(i=r.lastScrollY).call(i,(function(){return 0})),void(r.isScrolling=!1);r.stopScrollingBack(),r.startScrollSmooth(-n*r.scrollSmooth/15)}}),100,{isImmediate:!0,maxWait:100}),r.onTouchScroll=function(e){return void 0===e&&(e=!1),function(t){if(r.isEnable){r.velocity&&r.stopScrollSmooth(),r.stopScrollingBack(),r.isScrolling=!0;var n=r.scene.game.world.getZoomRatio(),i=t.position,a=t.prevPosition,s=(i.y-a.y)/n,o=r.height*r.maxScrollOver,c=1;if(r.isReachTop()&&s>=0){var h=(o+(-r.minValue-r.value))/o;c=Math.min(c,h)}if(r.isReachBottom()&&s<=0){var u=(o-(-r.maxValue-r.value))/o;c=Math.min(c,u)}var l=r.maxScrollOver*r.height;if(e&&r.scrollerBar){var d=r.scrollerBar,p=d.paddingTop,f=d.paddingBottom,g=r.maxValue-r.minValue+r.height,m=r.height-p-f,v=m-m/g*m;s*=-1*((r.maxValue-r.minValue)/v),l=0}r.lastScrollY[++r.lastScrollYCount%r.lastScrollY.length]=s;var y=s*c;r.value+y>-r.minValue+l?r.value=-r.minValue+l:r.value+y<-r.maxValue-l?r.value=-r.maxValue-l:r.value+=y,r.callOnScrollEvents(r.value,y)}}},r.onTouchDown=function(){r.isEnable&&(r.isGameObjectDragged=!1,r.velocity&&r.stopScrollSmooth(),r.stopScrollingBack())},r.onTouchEnd=function(){var e,t;if(r.input.enabled&&(r.isGameObjectDragged=!1,r.isReachTop()&&(r.startScrollingBack(-r.minValue),r.stopScrollSmooth()),r.isReachBottom()&&(r.startScrollingBack(-r.maxValue),r.stopScrollSmooth()),r.isScrolling)){var n=u()(e=r.lastScrollY).call(e,(function(e,t){return e+t}))/r.lastScrollY.length;r.startScrollSmooth(n*r.scrollSmooth),r.lastScrollY=c()(t=r.lastScrollY).call(t,(function(){return 0}))}},r.config=(0,i.Z)({marginTop:0,marginBottom:0,maxScrollOver:.15,acceleration:.05,scrollSmooth:45,scrollingBackRate:5},n);var o=r.config,h=o.width,l=o.height,p=o.marginTop;return r.isEnable=!1,r.minValue=-p,r.maxValue=0,r.lastScrollY=d()(a=new Array(3)).call(a,0),r.isGameObjectDragged=!1,r.setSize(h,l),r.createGroup(),r.createInput(),r.createEvents(),r.scene.add.existing((0,s.Z)(r)),r}(0,r.Z)(t,e);var n=t.prototype;return n.onScroll=function(e){this.onScrollEvents.push(e)},n.gotoTop=function(){this.value=this.config.marginTop},n.reset=function(){this.minValue=-this.config.marginTop,this.maxValue=0,this.isScrolling=!1,this.isScrollingBack=!1,this.isScrollingSmooth=!1,this.updateScrollerBar(),this.gotoTop(),this.setEnable(!1)},n.createDebug=function(){this.drawDebugBox(16711680,.8)},n.setEnable=function(e){this.isEnable=e,e?this.setInteractive({draggable:!0,useHandCursor:!0}):this.disableInteractive()},n.addItem=function(e){this.addAt(e),this.objects.add(e);var t=e.y,n=e.height,i=t-n/2-this.marginTop+this.height/2,a=t+n/2+this.marginBottom-this.height/2;this.minValue=Math.min(this.minValue,i,0),this.maxValue=Math.max(this.maxValue,a,0),this.updateScrollerBar(),this.updateObjectVisible(),this.addDragEventForObject(e)},n.addItems=function(e){var t=this;this.addAt(e),this.objects.addMultiple(e);var n=c()(e).call(e,(function(e){return e.y-e.height/2-t.marginBottom+t.height/2})),i=c()(e).call(e,(function(e){return e.y+e.height/2+t.marginBottom-t.height/2}));this.minValue=Math.min(this.minValue,Math.max.apply(Math,n),0),this.maxValue=Math.max(this.maxValue,Math.max.apply(Math,i),0),this.updateScrollerBar(),this.updateObjectVisible(),e.forEach((function(e){t.addDragEventForObject(e)}))},n.addDragEventForObject=function(e){var t=this;e.input&&(e.input.draggable=!0,e.on(Phaser.Input.Events.GAMEOBJECT_DRAG,(function(n){t.dragGameObject(n,e)})),e.on(Phaser.Input.Events.POINTER_WHEEL,this.onMouseScroll))},n.clearItem=function(){this.objects.clear(!0,!0),this.reset()},n.getChildren=function(){var e;return f()(e=this.objects.getChildren()).call(e,(function(e){return e.active}))},n.createBound=function(e,t,n,i){this.boundTop=this.scene.make.image({key:e,frame:t}),this.boundBottom=this.scene.make.image({key:e,frame:t}),this.boundTop.setTint(i),this.boundBottom.setTint(i),this.boundTop.setAlpha(1,1,0,0),this.boundBottom.setAlpha(0,0,1,1),this.boundTop.setDepth(S.Z.PRIORITY),this.boundBottom.setDepth(S.Z.PRIORITY);var a=this.width,s=n,r=this.getWorldPosition(),o=r.x,c=r.y;this.boundTop.setDisplaySize(a,s),this.boundBottom.setDisplaySize(a,s),this.boundTop.setY(-this.displayHeight/2+s/2+c-this.y-1),this.boundBottom.setY(this.displayHeight/2-s/2+c-this.y+1),this.boundTop.setX(o-this.x),this.boundBottom.setX(o-this.x),this.add([this.boundTop,this.boundBottom])},n.createScrollerBar=function(e,t){void 0===e&&(e=0),void 0===t&&(t=0);var n=_.Z.GAMEPLAY_DEFAULT_LANDSCAPE,i=n.KEY,a=n.FRAME;this.scrollerBar=new w(this.scene,i,a.SCROLLER,3.5,69);var s=this.height,r=this.scrollerBar.height;this.scrollerBar.setPosition(this.width/2-6,-s/2+r/2),this.scrollerBar.setPadding(e,t),this.add(this.scrollerBar),this.scrollerBar.setInteractive({useHandCursor:!0,draggable:!0}),this.scrollerBar.on(Phaser.Input.Events.GAMEOBJECT_DRAG,this.onTouchScroll(!0)),this.scrollerBar.on(Phaser.Input.Events.GAMEOBJECT_POINTER_DOWN,this.onTouchDown),this.updateScrollerBar()},n.updateScrollerBar=function(){if(this.scrollerBar){var e=this.scrollerBar,t=e.paddingTop,n=e.paddingBottom,i=Phaser.Math.Clamp(this.value/-this.maxValue,0,1),a=this.maxValue-this.minValue+this.height,s=this.height-t-n,r=s/a*s,o=s-r;this.maxValue-this.marginBottom<=0?this.scrollerBar.kill():(this.scrollerBar.revive(),this.scrollerBar.setHeightBar(r),this.scrollerBar.setY(-this.height/2+r/2+o*i+t))}},n.createMask=function(){var e;null==(e=this.maskGraphics)||e.destroy(),this.maskGraphics=this.scene.make.graphics({fillStyle:{color:255,alpha:1},visible:!0}),this.maskGraphics.setName("MaskGraphics");var t=this.width,n=this.height;this.maskGraphics.fillRoundedRect(0-t/2,0-n/2,t,n,0),this.setMask(this.maskGraphics.createGeometryMask()),this.scene.events.off(Phaser.Scenes.Events.UPDATE,this.updateMask,this),this.scene.events.on(Phaser.Scenes.Events.UPDATE,this.updateMask,this)},n.updateMask=function(){var e=this.getWorldPosition(),t=e.x,n=e.y;this.maskGraphics.setPosition(t,n)},n.createGroup=function(){this.objects=this.scene.make.group({})},n.updateObject=function(e){this.objects.incY(e),this.updateObjectVisible()},n.createInput=function(){this.setInteractive({draggable:!0,useHandCursor:!0}),this.on(Phaser.Input.Events.POINTER_WHEEL,this.onMouseScroll),this.on(Phaser.Input.Events.GAMEOBJECT_DRAG,this.onTouchScroll()),this.on(Phaser.Input.Events.GAMEOBJECT_POINTER_DOWN,this.onTouchDown),this.scene.input.on(Phaser.Input.Events.POINTER_UP,this.onTouchEnd,this)},n.createEvents=function(){this.scene.events.on(Phaser.Scenes.Events.UPDATE,this.update)},n.callOnScrollEvents=function(e,t){for(var n,i=x(this.onScrollEvents);!(n=i()).done;){(0,n.value)(this,e,t)}},n.scrollingBack=function(e){var t=(this.scrollingBackTo-this.value)*e*this.scrollingBackRate/1e3;this.value+=t,Math.abs(this.scrollingBackTo-this.value)<.5&&(this.value=this.scrollingBackTo,this.stopScrollingBack()),this.callOnScrollEvents(this.value,t)},n.startScrollingBack=function(e){this.isScrollingBack=!0,this.scrollingBackTo=e},n.stopScrollingBack=function(){this.isScrollingBack=!1},n.scrollingSmooth=function(e){var t=this.velocity*e/1e3;this.value+=t;var n=Math.abs(this.velocity)/this.velocity;this.isReachTop()&&(this.startScrollingBack(-this.minValue),this.stopScrollSmooth()),this.isReachBottom()&&(this.startScrollingBack(-this.maxValue),this.stopScrollSmooth()),this.callOnScrollEvents(this.value,t),Math.abs(this.velocity)<1?this.stopScrollSmooth():this.velocity-=Math.abs(this.velocity)*this.acceleration*n},n.startScrollSmooth=function(e){this.isScrollingSmooth=!0,e&&(e*this.velocity>0?this.velocity+=e:this.velocity=e)},n.stopScrollSmooth=function(){this.isScrollingSmooth=!1,this.isScrolling=!1,this.velocity=0,this.callOnScrollEvents(this.value,0)},n.isReachTop=function(){return this.value>-this.minValue},n.isReachBottom=function(){return-this.value>this.maxValue},(0,a.Z)(t,[{key:"marginTop",get:function(){return this.config.marginTop}},{key:"marginBottom",get:function(){return this.config.marginBottom}},{key:"acceleration",get:function(){return this.config.acceleration}},{key:"maxScrollOver",get:function(){return this.config.maxScrollOver}},{key:"scrollSmooth",get:function(){return this.config.scrollSmooth}},{key:"scrollingBackRate",get:function(){return this.config.scrollingBackRate}},{key:"value",get:function(){return this._value},set:function(e){var t=e-this._value;this._value=e,this.updateScrollerBar(),this.updateObject(t)}}]),t}(Phaser.GameObjects.Container)},644:function(e,t){t.Z={BACKGROUND:1,FOOTER_LOGO:2,FIREWORKS:5,ITEM:10,LOGO:15,BUTTON:20,TILE:25,TEXT:30,ENCOURAGING:31,EFFECT:32,MESSAGE:33,POPUP:40,PRIORITY:80,DEBUG:90,ON_TOP:1e4}},651:function(e,t){t.Z={ATLAS:{KEY:"fonts-{{locale}}",TEXTURE:"./assets/fonts/{{locale}}/fonts.png",JSON:"./assets/fonts/fonts.json"},PRIMARY:{KEY:"primary-{{locale}}",TEXTURE:"./assets/fonts/{{locale}}/primary.png",DATA:"./assets/fonts/{{locale}}/primary.xml"},BOLD:{KEY:"bold-{{locale}}",TEXTURE:"./assets/fonts/{{locale}}/bold.png",DATA:"./assets/fonts/{{locale}}/bold.xml"},BOLD_SHADOW:{KEY:"bold-shadow-{{locale}}",TEXTURE:"./assets/fonts/{{locale}}/bold-shadow.png",DATA:"./assets/fonts/{{locale}}/bold-shadow.xml"},BOLD_SHADOW_BLUR:{KEY:"bold-shadow-blur-{{locale}}",TEXTURE:"./assets/fonts/{{locale}}/bold-shadow-blur.png",DATA:"./assets/fonts/{{locale}}/bold-shadow-blur.xml"},FONT_FAMILY:"sf-pro"}},634:function(e,t){var n={AVATAR:{KEY:"avatar",FILE:"./assets/images/others/avatar.png",CONFIG:{}},ICON_EARTH:{KEY:"icon-earth",FILE:"./assets/images/others/icon-earth.png",CONFIG:{}},BACKGROUND:{KEY:"background",FILE:"./assets/images/"+GameCore.Utils.Image.getImageScale()+"x/bg.jpg",CONFIG:{}}};t.Z=n},643:function(e,t,n){var i=n(616),a=GameCore.Utils.Image.getImageScale(),s=GameCore.world.isLandscape()?"desktop":a+"x",r={TUTORIAL:{KEY:"tutorial-resources",TEXTURE:"./assets/textures/"+a+"x/tutorial-resources.png",JSON:"./assets/textures/"+a+"x/tutorial-resources.json",FRAME:{TIP:"tip",HAND:"hand",BLANK:"blank",AVATAR_CAT:"avatar-cat",POPUP_TALK:"talk-popup",FIRST_MOVE:"first-move",CURRENT_SCORE:"current-score",TARGET_SCORE:"target-score",HAMMER_ITEM:"hammer-item",PAINT_ITEM:"paint-item",SHUFFLE_ITEM:"shuffle-item",COLORFUL_GEM_1:"colorful-gem-1",COLORFUL_GEM_2:"colorful-gem-2"}},GAMEPLAY_DEFAULT:{KEY:"gameplay-default",TEXTURE:"./assets/textures/"+a+"x/gameplay-default-8bit.png",JSON:"./assets/textures/"+a+"x/gameplay-default-8bit.json",PATH:"./assets/textures/"+a+"x/",FRAME:{PRELOADER:"preloader/dual-ring",BLANK:"blank",STATS_CROWN:"crown",STATS_STAR:"star",STATS_CUP:"stats_cup",STATS_MEDAL_START:"stats_medal_star",STATS_TIMER:"stats_timer",STATS_FLASH:"flash",CUP:"cup",IC_LEFT_HAND:"ic_left_hand",IC_LANGUAGE:"ic_language",IC_THEME_SELECT:"ic_theme_select",IC_DONE:"ic_done",IC_BACK:"ic_back",IC_BACK_2:"ic_back_2",IC_SETTINGS:"footer/ico-settings",IC_STATISTICS_FOOTER:"footer/ico-statistics",IC_PLAY:"footer/ico-new",IC_HINT:"footer/ico-hint",IC_UNDO:"footer/ico-undo",IC_TOURNAMENTS:"footer/ico-tour",COUNTER:"footer/counter",IC_ADS:"footer/ad",FOUNDATION_SLOT:"stack",IC_FOUNDATION_2:"stack_2",IC_SLOT:"card_slot",IC_SHARE:"ic_share",IC_THEME:"ic_theme",IC_THEME_2:"ic_theme_2",IC_INVITE:"ic_invite",IC_FLAG:"flag",IC_SOUND:"ic_sound",IC_MOVE:"ic_move",IC_STATISTICS:"ic_statistics",IC_NEXT:"ic_next",IC_GROUP:"ico_group",IC_FOLLOW:"ico_follow",IC_BOOK:"ic_book",IC_REPLAY:"ic_replay",IC_RECYCLE:"ic_recycle",IC_NEXT_LV:"ic_next_lv",IC_CLOSE:"close",IC_JOURNEY:"ic_journey",IC_JOURNEY_GLOW:"ic_journey_glow",JOURNEY_BG:"journey_bg",IC_VIBRATION:"vibration",IC_HINT_SETTINGS:"ic_hint_settings",IC_LEFT_HAND_SETTINGS:"ic_lefthand_settings",IC_DRAW_MODE:"ic_draw_mode",IC_AUTO_COMPLETE:"ic_auto_complete",ADD_SQUARE:"add-square",TIMER:"stats_timer",MEDAL_STAR_SHADOW:"medal-star-shadow",MEDAL_STAR:"medal-star",NO_TOURNAMENT:"no-tournament",IC_BG_OFF:"avatar/avatar_bg",ARROW_SWAP_HORIZONTAL:"arrow-swap-horizontal",AVATAR_CROWN:"avatar_crown",WIN_BANNER:"win_banner",LOSE_BANNER:"lose_banner",FLAG:{LEFT:"flags/left/",RIGHT:"flags/right/"},STRING:{LEFT:"string/left",RIGHT:"string/right"},SPADE:"spade",HEART:"heart",HAND:"hand",LOADING_CLUB:"loading_club",LOADING_DIAMOND:"loading_diamond",LOADING_HEART:"loading_heart",LOADING_SPADE:"loading_spade",BOTTOM_BG:"bottom_bg",BOTTOM_LOGO:"bottom_logo",FOOTER_BG:"footer/rectangle",STOCK_BG:"stock-bg",AVATAR:{BG:"avatar/avatar_bg",BG_2:"avatar/avatar_bg_2",BLUE:"avatar/avatar_blue",ELLIPSE_BG:"avatar/avatar_ellipse_bg",ORANGE:"avatar/avatar_orange",RECTANGLE:"avatar/rectangle",VS:"avatar/vs",LEADER_NORMAL:"avatar/leader_normal",LEADER_YOU:"avatar/leader_you",LEADER_RESULT_NORMAL:"avatar/leader_result_normal",LEADER_RESULT_YOU:"avatar/leader_result_you",LEADER_BG:"avatar/leader_bg",LEADER_RESULT_BG:"avatar/avatar_result_bg"},STEP:{IN_PROCESS_STEP:"steps/in_process_step",COMING_STEP:"steps/coming_step"},MISSION_MEDAL:"mission_medal",IC_VERIFY:"ic_verify",MISSION_HEADER_COMPLETED:"mission_header_completed",MISSION_HEADER_FAILED:"mission_header_failed",SETTINGS_TEXT:{TITLE:"text/text_settings_title",THEME:"text/text_theme",STATISTIC:"text/text_statistic",PLAY_MODE:"text/text_play_mode",PERSONAL:"text/text_personalization"},NEW_GAME_POPUP:{BACKGROUND:"new_game/background",BACKGROUND_2:"new_game/background_2",LINE:"new_game/line",IC_NEW_GAME:"new_game/icon_new_game",IC_REPLAY:"new_game/icon_replay",IC_WITH_FRIEND:"new_game/icon_with_friend",TEXT_NEW_DEAL:"new_game/new_deal",TEXT_REPLAY:"new_game/replay",TEXT_WITH_FRIEND:"new_game/with_friend",IC_JOURNEY:"new_game/ic_journey"},BTN_NEW_GAME:"btn-new game",BTN_SHARE:"btn-share",BTN_AUTO_COMPLETE:"btn-auto-complete",VICTORY:"victory",SUB_RIBBON:"sub-ribbon",WIN_RIBBON:"win-ribbon",DRAW_RIBBON:"draw-ribbon",IC_VERSUS:"vs",AVATAR_BLUE:"avatar_blue",AVATAR_ORANGE:"avatar_orange",AVATAR_WIN:"avatar_win",AVATAR_SHINE:"avatar_shine",IC_BEST_TIME:"ico-besttime",IC_NEW:"ico-new",BUTTON_DONE:"settings/btn_done",BUTTON_BACK:"settings/btn_back",BTN_NEXT:"btn-NEXT",BG_SETTINGS_BOTTOM:"settings/bottom_bar_settings",BG_SETTINGS_TOP:"settings/top_bar_settings",BG_SETTING_SEPERATE_NOTE:"settings/bar_title",SETTING_LINE_DIVIDE:"settings/setting_line_divine",BG_SELECT_ACTIVE_2:"settings/bg_select_active2",BG_SELECT_ACTIVE_3:"settings/bg_select_active3",BTN_BACKGROUND_INACTIVE:"settings/btn_background_inactive",BG_SELECT_THEME:"settings/bg_select_theme",BG_PROGRESS:"settings/bg_progress",BG_PROGRESS_LOSE:"settings/bg_progress_lose",BG_PROGRESS_WIN:"settings/bg_progress_win",BG_NOTIFICATION:"settings/frame_alert",HOW_TO_PLAY:{BACKGROUND:"how-to-play/background",IC_NEXT:"how-to-play/ic_next",IC_X:"how-to-play/ic_x",BUTTON_NEXT:"how-to-play/next_btn",PAGE_ACTIVE:"how-to-play/page_active",PAGE_INACTIVE:"how-to-play/page_inactive"},TOURNAMENT:{HEADER:"tournament/top_bg",BG_INFO:"bg_info",BLOCK_BACKGROUND:"tournament/board",BLOCK_FOOTER:"tournament/block_bottom",BUTTON_CREATE:"tournament/btn-create-tournament",IC_STAR:"tournament/icons/star",IC_1ST:"tournament/icons/badge-1st",IC_2ND:"tournament/icons/badge-2nd",IC_3RD:"tournament/icons/badge-3rd",IC_NORMAL:"tournament/icons/badge-normal",IC_BACK:"tournament/icons/back",IC_QUESTION:"tournament/icons/ic_tour_info",BUTTON_INFO:"tournament/icons/btn_tour_info",IC_CLOCK:"tournament/icons/ic_best_time",TIME_BACKGROUND:"tournament/duration",JOIN_BUTTON:"tournament/btn_orange",IC_CUP:"tournament/icons/ic-tour",IC_1ST_BG:"tournament/result/badge-1st",IC_2ND_BG:"tournament/result/badge-2nd",IC_3RD_BG:"tournament/result/badge-3rd",IC_NORMAL_BIG:"tournament/result/badge-normal",BUTTON_REPLAY:"tournament/result/btn-replay",IC_REPLAY:"tournament/result/ico_replay"}}},GAMEPLAY_DEFAULT_LANDSCAPE:{KEY:"gameplay-default",TEXTURE:"./assets/textures/"+a+"x/gameplay-default-landscape-8bit.png",JSON:"./assets/textures/"+a+"x/gameplay-default-landscape-8bit.json",FRAME:{BLANK:"blank",STATS_CROWN:"crown",STATS_STAR:"star",STATS_CUP:"stats_cup",STATS_MEDAL_START:"stats_medal_star",STATS_TIMER:"stats_timer",STATS_FLASH:"flash",MENU_STATISTIC:"menu_statistics",CUP:"cup",IC_LEFT_HAND:"ic_left_hand",IC_LANGUAGE:"ic_language",IC_THEME_SELECT:"ic_theme_select",IC_DONE:"ic_done",IC_BACK:"ic_back",IC_SETTINGS:"footer/ico-settings",IC_STATISTICS_FOOTER:"footer/ico-statistics",IC_PLAY:"footer/ico-new",IC_HINT:"footer/ico-hint",IC_UNDO:"footer/ico-undo",IC_TOURNAMENTS:"footer/ico-tour",COUNTER:"footer/counter",IC_ADS:"footer/ad",FOUNDATION_SLOT:"stack",IC_FOUNDATION_2:"stack_2",IC_SLOT:"card_slot",IC_SHARE:"ic_share",IC_THEME:"ic_theme",IC_THEME_2:"ic_theme_2",IC_INVITE:"ic_invite",IC_FLAG:"flag",IC_SOUND:"ic_sound",IC_MOVE:"ic_move",IC_STATISTICS:"ic_statistics",IC_NEXT:"ic_next",IC_GROUP:"ico_group",IC_FOLLOW:"ico_follow",IC_BOOK:"ic_book",IC_REPLAY:"ic_replay",IC_RECYCLE:"ic_recycle",IC_NEXT_LV:"ic_next_lv",IC_VIBRATION:"vibration",IC_HINT_SETTINGS:"ic_hint_settings",IC_DRAW_MODE:"ic_draw_mode",IC_AUTO_COMPLETE:"ic_auto_complete",ADD_SQUARE:"add-square",TIMER:"timer",MEDAL_STAR_SHADOW:"medal-star-shadow",MEDAL_STAR:"medal-star",NO_TOURNAMENT:"no-tournament",IC_BG_OFF:"avatar/avatar_bg",ARROW_SWAP_HORIZONTAL:"arrow-swap-horizontal",AVATAR_CROWN:"avatar_crown",WIN_BANNER:"win_banner",LOSE_BANNER:"lose_banner",FLAG:{LEFT:"flags/left/",RIGHT:"flags/right/"},STRING:{LEFT:"string/left",RIGHT:"string/right"},SPADE:"spade",HEART:"heart",HAND:"hand",LOADING_CLUB:"loading_club",LOADING_DIAMOND:"loading_diamond",LOADING_HEART:"loading_heart",LOADING_SPADE:"loading_spade",BOTTOM_BG:"bottom_bg",BOTTOM_LOGO:"bottom_logo",FOOTER_BG:"footer/rectangle",STOCK_BG:"stock-bg",AVATAR:{BG:"avatar/avatar_bg",BLUE:"avatar/avatar_blue",ELLIPSE_BG:"avatar/avatar_ellipse_bg",ORANGE:"avatar/avatar_orange",RECTANGLE:"avatar/rectangle",VS:"avatar/vs",LEADER_NORMAL:"avatar/leader_normal",LEADER_YOU:"avatar/leader_you",LEADER_BG:"avatar/leader_bg"},STEP:{IN_PROCESS_STEP:"steps/in_process_step",COMING_STEP:"steps/coming_step"},MISSION_MEDAL:"mission_medal",IC_VERIFY:"ic_verify",MISSION_HEADER_COMPLETED:"mission_header_completed",MISSION_HEADER_FAILED:"mission_header_failed",SETTINGS_TEXT:{TITLE:"text/text_settings_title",THEME:"text/text_theme",STATISTIC:"text/text_statistic",PLAY_MODE:"text/text_play_mode",PERSONAL:"text/text_personalization"},NEW_GAME_POPUP:{BACKGROUND:"new_game/background",BACKGROUND_2:"new_game/background_2",LINE:"new_game/line",IC_NEW_GAME:"new_game/icon_new_game",IC_REPLAY:"new_game/icon_replay",IC_WITH_FRIEND:"new_game/icon_with_friend",TEXT_NEW_DEAL:"new_game/new_deal",TEXT_REPLAY:"new_game/replay",TEXT_WITH_FRIEND:"new_game/with_friend",IC_JOURNEY:"new_game/ic_journey"},RESTART_POPUP:{BACKGROUND:"restart/bg",BUTTON_BACK:"restart/btn-back",BUTTON_OK:"restart/btn-ok",IC_BACK:"restart/ic_back",IC_OK:"restart/ic_done",TEXT_TITLE:"restart/title",TEXT_DESCRIPTION:"restart/text"},BTN_NEW_GAME:"btn-new game",BTN_SHARE:"btn-share",BTN_AUTO_COMPLETE:"btn-auto-complete",VICTORY:"victory",SUB_RIBBON:"sub-ribbon",WIN_RIBBON:"win-ribbon",DRAW_RIBBON:"draw-ribbon",IC_VERSUS:"vs",AVATAR_BLUE:"avatar_blue",AVATAR_ORANGE:"avatar_orange",AVATAR_WIN:"avatar_win",AVATAR_SHINE:"avatar_shine",IC_BEST_TIME:"ico-besttime",IC_NEW:"ico-new",IC_CLOSE:"close",BUTTON_DONE:"settings/btn_done",BUTTON_BACK:"settings/btn_back",BTN_NEXT:"btn-NEXT",SCROLLER:"scroller",BG_SETTINGS_BOTTOM:"settings/bottom_bar_settings",BG_SETTINGS_TOP:"settings/top_bg",BG_SETTING_SEPERATE_NOTE:"settings/bar_title",BG_TOP_LARGE:"settings/top_bg_large",BG_SETTINGS:"settings/bg-settings",BG_SELECT_ACTIVE_2:"settings/bg_select_active2",BG_SELECT_ACTIVE_3:"settings/bg_select_active3",BTN_BACKGROUND_INACTIVE:"settings/btn_background_inactive",BG_SELECT_THEME:"settings/bg_select_theme",BG_PROGRESS:"settings/bg_progress",BG_PROGRESS_LOSE:"settings/bg_progress_lose",BG_PROGRESS_WIN:"settings/bg_progress_win",BG_NOTIFICATION:"settings/frame_alert",HOW_TO_PLAY:{BACKGROUND:"how-to-play/background",IC_NEXT:"how-to-play/ic_next",IC_X:"how-to-play/ic_x",BUTTON_NEXT:"how-to-play/next_btn",PAGE_ACTIVE:"how-to-play/page_active",PAGE_INACTIVE:"how-to-play/page_inactive"},TOURNAMENT:{HEADER:"tournament/top_bg",BACKGROUND:"tournament/background",BOTTOM_BAR:"tournament/bar_bottom",BG_INFO:"tournament/bg_info",IC_STAR:"tournament/icons/star",IC_1ST:"tournament/icons/badge-1st",IC_2ND:"tournament/icons/badge-2nd",IC_3RD:"tournament/icons/badge-3rd",IC_NORMAL:"tournament/icons/badge-normal",IC_BACK:"tournament/icons/back",BUTTON_INFO:"tournament/icons/btn_tour_info",IC_CLOCK:"tournament/icons/ic_best_time",TIME_BACKGROUND:"tournament/duration",JOIN_BUTTON:"tournament/btn_orange",IC_CUP:"tournament/icons/ic-tour",IC_1ST_BG:"tournament/result/badge-1st",IC_2ND_BG:"tournament/result/badge-2nd",IC_3RD_BG:"tournament/result/badge-3rd",IC_NORMAL_BIG:"tournament/result/badge-normal",BUTTON_REPLAY:"tournament/result/btn-replay",IC_REPLAY:"tournament/result/ico_replay",BACK_BUTTON:"tournament/back_btn",BLOCK_BACKGROUND:"tournament/shadow",BUTTON_CREATE:"tournament/btn-create-tournament"},RESULT:{BACKGROUND_SOLO:"result/bg-result-solo",BACKGROUND_FRIEND:"result/bg-result-friend",BOTTOM_BAR:"result/bar_bottom"}}},JOURNEY:{KEY:"journey",TEXTURE:"./assets/textures/"+a+"x/journey.png",JSON:"./assets/textures/"+a+"x/journey.json",FRAME:{BLANK:"blank",AWESOME_SCREEN:{LB_FRAME:"awesome-screen/frame",TITLE:"awesome-screen/title",RECTANGLE_TITLE:"awesome-screen/rectangle_title",IC_GO_TO_MAP:"awesome-screen/ic_go-to-map",LINE:"awesome-screen/line"},MISSION_BAR:{BACKGROUND:"mission-bar/bg",LINE:"mission-bar/line",CHECKER:"mission-bar/checker"},PATH_Y1:"path y1",PATH_Y2:"path y2",PATH_Y3:"path y3",PATH_Y0:"path y0",PATH_G1:"path g1",PATH_G2:"path g2",PATH_G3:"path g3",PATH_G0:"path g0",LV_ACTIVE_FX:"lv-active_fx",LV_ACTIVE:"lv-active",LV_PASSED:"lv-passed",LV_PASSED_BG:"lv-passed_bg1",LV_TWO_CARDS_PASS:"lv-special",LV_TWO_CARDS_PASS_LOCK:"lv-special_2",ICO_SPECIAL_LOCKED:"ico-special lv locked",ICO_LOCK:"ico-lock",IC_SETTINGS:"btn-setting",BTN_PLAY:"btn-play",ICN_PLAY:"icn_play",BG_BAR_TOP:"bars_02_top_bar",BG_BAR_BOT:"bars_02_bot_bar"}},JOURNEY_LANDSCAPE:{KEY:"journey",TEXTURE:"./assets/textures/"+a+"x/journey-landscape.png",JSON:"./assets/textures/"+a+"x/journey-landscape.json",FRAME:{BLANK:"blank",AWESOME_SCREEN:{LB_FRAME:"awesome-screen/frame",TITLE:"awesome-screen/title",RECTANGLE_TITLE:"awesome-screen/rectangle_title",BOT_BAR:"awesome-screen/bot_bar",IC_GO_TO_MAP:"awesome-screen/ic_go_to_map",LINE:"awesome-screen/line"},MISSION_BAR:{LINE:"mission-bar/line",CHECKER:"mission-bar/checker"},BACKGROUND:"frame_big",PATH_Y1:"path y1",PATH_Y2:"path y2",PATH_Y3:"path y3",PATH_Y0:"path y0",PATH_G1:"path g1",PATH_G2:"path g2",PATH_G3:"path g3",PATH_G0:"path g0",LV_ACTIVE_FX:"lv-active_fx",LV_ACTIVE:"lv-active",LV_PASSED:"lv-passed",LV_PASSED_BG:"lv-passed_bg1",LV_TWO_CARDS_ACTIVE:"lv-special",LV_TWO_CARDS_LOOKED:"card_lock",LV_TWO_CARDS_PASSED:"lv-special_2",ICO_SPECIAL_LOCKED:"ico-special lv locked",ICO_SPECIAL_ACTIVE:"K_unlock",ICO_SPECIAL_PASSED:"K_tick",ICO_LOCKED:"ico-lock",BTN_PLAY:"btn-play",ICN_PLAY:"icn_play",BG_BAR_TOP:"bars_02_top_bar"}},CARD_BACK:{KEY:"card-back",TEXTURE:"./assets/textures/"+s+"/card-back.png",JSON:"./assets/textures/"+s+"/card-back.json"},HOW_TO_PLAY:{KEY:"how-to-play",TEXTURE:"./assets/textures/"+a+"x/how-to-play.jpg",JSON:"./assets/textures/"+a+"x/how-to-play.json"},HOW_TO_PLAY_LANDSCAPE:{KEY:"how-to-play",TEXTURE:"./assets/textures/"+a+"x/how-to-play-landscape.jpg",JSON:"./assets/textures/"+a+"x/how-to-play-landscape.json"},THEME_PREVIEW:{KEY:"theme-preview",TEXTURE:"./assets/textures/"+a+"x/theme-preview.png",JSON:"./assets/textures/"+a+"x/theme-preview.json"},DEFAULT:{KEY:"gameplay-default",TEXTURE:"./assets/textures/"+a+"x/default-resources.png",JSON:"./assets/textures/"+a+"x/default-resources.json",FRAME:{LINE:"line",BLANK:"blank",LOGO:"title-logo",GEMS:"title-gems",TEXT_LOADING:"loading",BOTTOM_BG:"bottom-bg",BOTTOM_LINE:"bottom-line",TOP_BG_LONG:"top-bg-long",BLOCK_LEADER_BLUE:"block-blue-bg",BLOCK_LEADER_YELLOW:"block-yellow-bg",PRELOADER:"preloader/dual-ring",LEADERBOARD_TAB_ON:"leaderboards/tab-on",LEADERBOARD_TAB_OFF:"leaderboards/tab-off",LEADERBOARD_BG_DARK:"leaderboards/bg-dark",LEADERBOARD_BG_LIGHT:"leaderboards/bg-light",MISSION_ICON_BG:"dailyMission/bg-icon",MISSION_BLOCK_BG:"dailyMission/bg-block",MISSION_CLOCK_BG:"dailyMission/bg-clock",DAILY_DAY_BG:"dailyRewards/bg",DAILY_DAY_LABEL:"dailyRewards/label",DAILY_DAY_BG_WAIT:"dailyRewards/bg-wait",DAILY_DAY_BG_OPEN:"dailyRewards/bg-open",DAILY_DAY_TITLE_GREY:"dailyRewards/title-grey",DAILY_DAY_TITLE_GREEN:"dailyRewards/title-green",DAILY_DAY_TITLE_ORANGE:"dailyRewards/title-orange",RIBBON_LONG:"ribbon/long",RIBBON_FULL:"ribbon/long-full",RIBBON_SHORT:"ribbon/short",RIBBON_SMALL:"ribbon/small",AVATAR_BG_BLUE:"avatar/blue-bg",AVATAR_FRAME_BLUE:"avatar/blue-frame",AVATAR_BG_BLUE_SMALL:"avatar/blue-bg-small",AVATAR_FRAME_BLUE_SMALL:"avatar/blue-frame-small",AVATAR_BG_BLUE_BIG:"avatar/blue-bg-big",AVATAR_FRAME_BLUE_BIG:"avatar/blue-frame-big",AVATAR_BG_YELLOW:"avatar/yellow-bg",AVATAR_FRAME_YELLOW:"avatar/yellow-frame",AVATAR_BG_YELLOW_SMALL:"avatar/yellow-bg-small",AVATAR_FRAME_YELLOW_SMALL:"avatar/yellow-frame-small",AVATAR_BG_YELLOW_BIG:"avatar/yellow-bg-big",AVATAR_FRAME_YELLOW_BIG:"avatar/yellow-frame-big",THE_CAT:"logo/cat",SAD_CAT:"logo/sad-cat",LOGO_GIFT:"logo/gift",LOGO_GIFT_ADS:"logo/gift-ad",LOGO_GIFT_WHITE:"logo/gift_white",LOGO_DIAMONDS_LIGHT_2:"logo/diamonds-light-2",LOGO_DIAMONDS_LIGHT_3:"logo/diamonds-light-3",LOGO_DIAMONDS_LIGHT_4:"logo/diamonds-light-4",LOGO_DIAMONDS_LIGHT_5:"logo/diamonds-light-5",LOGO_DIAMONDS_LIGHT_6:"logo/diamonds-light-6",LOGO_ADS_DIAMONDS:"logo/ads-diamonds",POPUP_TOP_LEFT:"popup/top-left",POPUP_TOP_MID:"popup/top-middle",POPUP_TOP_RIGHT:"popup/top-right",POPUP_MID_LEFT:"popup/middle-left",POPUP_MID_MID:"popup/middle-middle",POPUP_MID_RIGHT:"popup/middle-right",POPUP_BOTTOM_LEFT:"popup/bottom-left",POPUP_BOTTOM_MID:"popup/bottom-middle",POPUP_BOTTOM_RIGHT:"popup/bottom-right",PROGRESS_BG_LEFT:"progress/bg-left",PROGRESS_BG_MID:"progress/bg-mid",PROGRESS_BG_RIGHT:"progress/bg-right",PROGRESS_BAR_LEFT:"progress/bar-left",PROGRESS_BAR_MID:"progress/bar-mid",PROGRESS_BAR_RIGHT:"progress/bar-right",ICON_DOT:"icons/dot",ICON_CUP:"icons/cup",ICON_GIFT:"icons/gift",ICON_PLUS:"icons/plus",ICON_RANK:"icons/rank",ICON_FLAG:"icons/flag",ICON_CLOCK:"icons/clock",ICON_DAILY:"icons/daily",ICON_ADS:"icons/flat-ad",ICON_CHECK:"icons/check",ICON_CANCEL:"icons/cancel",ICON_SETTING:"icons/setting",ICON_RESUME:"icons/flat-resume",ICON_VIB_ON:"icons/flat-vib-on",ICON_VIB_OFF:"icons/flat-vib-off",ICON_MUSIC_ON:"icons/flat-music-on",ICON_MUSIC_OFF:"icons/flat-music-off",ICON_SOUND_ON:"icons/flat-sound-on",ICON_SOUND_OFF:"icons/flat-sound-off",ICON_FLAT_HOME:"icons/flat-home",ICON_FLAT_RANK:"icons/flat-rank",ICON_FLAT_SHARE:"icons/flat-share",ICON_CROWN:"icons/crown",ICON_CUP_MINI:"icons/cup-mini",ICON_CUP_GOLD:"icons/cup-gold",ICON_CUP_SILVER:"icons/cup-silver",ICON_CUP_COPPER:"icons/cup-bronze",ICON_DIAMOND:"icons/diamond",ICON_DIAMOND_SMALL:"icons/diamond-small",ICON_DIAMOND_GREY:"icons/diamond-grey",ICON_DIAMOND_LIGHT:"icons/diamond-light",BUTTON_CLOSE:"buttons/close",BUTTON_RED_LONG:"buttons/red-long",BUTTON_YELLOW_LONG:"buttons/yellow-long",BUTTON_YELLOW_CIRCLE:"buttons/yellow-circle",BUTTON_BLUE:"buttons/blue",BUTTON_BLUE_SHORT:"buttons/blue-short",BUTTON_BLUE_LONG:"buttons/blue-long",BUTTON_BLUE_CIRCLE:"buttons/blue-circle",BUTTON_GREEN:"buttons/green",BUTTON_GREEN_SHORT:"buttons/green-short",BUTTON_GREEN_LONG:"buttons/green-long",BUTTON_GREEN_MINOR:"buttons/green-minor",BUTTON_GREEN_CIRCLE:"buttons/green-circle",BUTTON_GREEN_MINOR_MINI:"buttons/green-minor-mini",NO_THANK_TEXT:"texts/no-thank",HORIZONTAL_LUCKY_BAR:"lucky-bar/horizontal-lucky-bar",HORIZONTAL_ARROW:"lucky-bar/horizontal-arrow",ARC_LUCKY_BAR:"lucky-bar/arc-lucky-bar",ARC_ARROW:"lucky-bar/arc-arrow"}},EFFECTS:{KEY:"effects-resources",PATH:"./assets/textures/"+a+"x/",JSON:"./assets/textures/"+a+"x/effects-resources.json",FRAME:{BLANK:"blank",FX_COMET:"comet",FX_SPARK:"spark",FX_CIRCLE:"circle",FX_CIRCLE_LIGHT:"circle-light",FX_GLOW_LIGHT:"glow-light",FX_GLOW_SMALL:"glow-small",FX_STAR_WHITE:"star-white",FX_STAR_YELLOW:"star-yellow",TEXT_COOL:"texts/cool",TEXT_GOOD:"texts/good",TEXT_GREAT:"texts/great",TEXT_EXCELLENT:"texts/excellent",TEXT_CONGRATULATION:"texts/congratulation",FX_CONFETTI_SMALL_1:"confetti/small-1",FX_CONFETTI_SMALL_2:"confetti/small-2",FX_CONFETTI_SMALL_3:"confetti/small-3",FX_CONFETTI_SMALL_4:"confetti/small-4",FX_CONFETTI_HEXAGON:"confetti/hexagon-",FX_FIREWORKS_SMALL:"fireworks/small",FX_FIREWORKS_BIG_0:"fireworks/big-explosive-0",FX_FIREWORKS_BIG_1:"fireworks/big-explosive-1",FX_FIREWORKS_SOAR_LINE:"fireworks/soar-line",FX_FIREWORKS_SOAR_CIRCLE:"fireworks/soar-circle",FX_HIGHLIGHT:"fx-items/highlight",FX_PAINT_EXPLOSIVE:"fx-items/paint-explosive-",FX_RED_EXPLOSIVE:"fx-gems/red-explosive-",FX_BLUE_EXPLOSIVE:"fx-gems/blue-explosive-",FX_PINK_EXPLOSIVE:"fx-gems/pink-explosive-",FX_GREEN_EXPLOSIVE:"fx-gems/green-explosive-",FX_YELLOW_EXPLOSIVE:"fx-gems/yellow-explosive-",FX_COLORFUL:"fx-gems/colorful-",FX_COLOR_CHANGE:"fx-gems/color-change-",FX_FREEZE_EXPLOSIVE:"fx-gems/freeze-explosive-",FX_COLORFUL_EXPLOSIVE:"fx-gems/colorful-explosive-",ANIMATION_STAR_X:"star-x/star-",ANIMATION_STAR_Y:"star-y/star-",FX_CONFETTI_RIBBON:"ribbon/ribbon",PREFIX_ANIMATION_RIBBON_CONFETTI_A:"ribbon/falling-confetti/confetti-a/confetti-a-",PREFIX_ANIMATION_RIBBON_CONFETTI_B:"ribbon/falling-confetti/confetti-b/confetti-b-",PREFIX_ANIMATION_RIBBON_CONFETTI_C:"ribbon/falling-confetti/confetti-c/confetti-c-",PREFIX_ANIMATION_RIBBON_CONFETTI_D:"ribbon/falling-confetti/confetti-d/confetti-d-"}},TOURNAMENT_BANNER:{KEY:"tournament-banner",TEXTURE:"./assets/textures/"+a+"x/tournament-banner.jpg",JSON:"./assets/textures/"+a+"x/tournament-banner.json",FRAME:{BANNER_1:"banner-1",BANNER_2:"banner-2",BANNER_3:"banner-3",BANNER_4:"banner-4",BANNER_5:"banner-5",BANNER_6:"banner-6"}},ANIMATION_SCENE:{KEY:"effects-resources",PATH:"./assets/textures/"+a+"x/",JSON:"./assets/textures/"+a+"x/animation-scene-resources.json",FRAME:{BLANK:"blank",COIN:"coins/coin",COIN_SMALL:"coins/coin-small",COIN_SMALL_GREY:"coins/coin-small-grey",ANIMATION_STAR_X:"star-x/star-",ANIMATION_STAR_Y:"star-y/star-",FX_SPARK_YELLOW:"yellow-spark",FX_CONFETTI_RIBBON:"ribbon/ribbon",PREFIX_ANIMATION_RIBBON_CONFETTI_A:"ribbon/falling-confetti/confetti-a/confetti-a-",PREFIX_ANIMATION_RIBBON_CONFETTI_B:"ribbon/falling-confetti/confetti-b/confetti-b-",PREFIX_ANIMATION_RIBBON_CONFETTI_C:"ribbon/falling-confetti/confetti-c/confetti-c-",PREFIX_ANIMATION_RIBBON_CONFETTI_D:"ribbon/falling-confetti/confetti-d/confetti-d-",FX_CONFETTI_SMALL_1:"confetti/small-1",FX_CONFETTI_SMALL_2:"confetti/small-2",FX_CONFETTI_SMALL_3:"confetti/small-3",FX_CONFETTI_SMALL_4:"confetti/small-4",FX_CONFETTI_HEXAGON:"confetti/hexagon-"}},GAMEPLAY:{KEY:"gameplay-resources",TEXTURE:"./assets/textures/"+a+"x/gameplay-resources.png",JSON:"./assets/textures/"+a+"x/gameplay-resources.json",FRAME:{BLANK:"blank",BIG_TOP:"bg-top",BIG_PLAYER:"bg-player",BIG_CIRCLE:"big-circle",BUTTON_PLUS:"buttons/plus",BUTTON_SETTING:"buttons/setting",AVATAR_BLUE_BG:"avatars/bg-blue-mini",AVATAR_BLUE_FRAME:"avatars/frame-blue-mini",PROGRESS_BG_LEFT:"progress/bg-left",PROGRESS_BG_MID:"progress/bg-mid",PROGRESS_BG_RIGHT:"progress/bg-right",PROGRESS_BAR_LEFT:"progress/bar-left",PROGRESS_BAR_MID:"progress/bar-mid",PROGRESS_BAR_RIGHT:"progress/bar-right",ITEM_GIFT:"items/gift",ITEM_PAINT:"items/paint",ITEM_HAMMER:"items/hammer",ITEM_SHUFFLE:"items/shuffle",ITEM_BG_COIN:"items/bg-coin",ITEM_BG_ITEM:"items/bg-item",ICON_PLUS:"icons/plus",ICON_CHECK:"icons/check",ICON_CLOCK:"icons/clock",ICON_DIAMOND:"icons/diamond",ICON_DIAMOND_SMALL:"icons/diamond-small",ICON_CUP_SUPERMINI:"icons/cup-supermini",TILE_RED:"gems/red",TILE_BLUE:"gems/blue",TILE_PINK:"gems/pink",TILE_GREEN:"gems/green",TILE_YELLOW:"gems/yellow",TILE_FREEZE:"gems/freeze",TILE_COLORFUL:"gems/colorful",TILE_COLOR_CHANGE:"gems/change"}},DEMO_SPINE:{KEY:"demo-spine",jsonPATH:"./assets/spines/demo/demo.json",atlasPATH:"./assets/spines/demo/demo.atlas"},LANGUAGES:{KEY:"languages",TEXTURE:"./assets/textures/"+a+"x/languages.png",JSON:"./assets/textures/"+a+"x/languages.json",FRAME:{CHECK:"check",UNCHECK:"uncheck"}}};GameCore.Utils.Valid.isDebugger()&&(r.EFFECTS.FRAME=(0,i.Z)({},r.ANIMATION_SCENE.FRAME,r.EFFECTS.FRAME)),t.Z=r},645:function(e,t,n){n.d(t,{C:function(){return a},K:function(){return s}});var i=n(26),a={BOOT_SCENE:"BOOT_SCENE",LOAD_SCENE:"LOAD_SCENE",GAME_SCENE:"GAME_SCENE",GLOBAL_SCENE:"GLOBAL_SCENE",DASHBOARD_SCENE:"DASHBOARD_SCENE",GAME_OVER_SCENE:"GAME_OVER_SCENE",LEADERBOARD_SCENE:"LEADERBOARD_SCENE",RESULT_MATCH_SCENE:"RESULT_MATCH_SCENE",TEST_SCENE:"TEST_SCENE",ANIMATIONS_SCENE:"ANIMATIONS_SCENE"},s={SWITCH:n.n(i)()("SWITCH")}},648:function(e,t,n){n.d(t,{o4:function(){return i},Ks:function(){return a}});var i={PAUSE_SCREEN:"PAUSE_SCREEN",NOTIFY_SCREEN:"NOTIFY_SCREEN",REWARD_SCREEN:"REWARD_SCREEN",RESCUE_SCREEN:"RESCUE_SCREEN",SETTINGS_SCREEN:"SETTINGS_SCREEN",BEST_SCORE_SCREEN:"BEST_SCORE_SCREEN",DAILY_REWARD_SCREEN:"DAILY_REWARD_SCREEN",DAILY_MISSIONS_SCREEN:"DAILY_MISSIONS_SCREEN",LUCKY_REWARD_SCREEN:"LUCKY_REWARD_SCREEN",NO_MORE_MOVES_SCREEN:"NO_MORE_MOVES_SCREEN",VICTORY_SCREEN:"VICTORY_SCREEN",PLAY_SCREEN:"PLAY_SCREEN",GAME_STATS_SCREEN:"GAME_STATS_SCREEN",THEME_SCREEN:"THEME_SCREEN",HOW_TO_PLAY_SCREEN:"HOW_TO_PLAY_SCREEN",MISSION_COMPLETED_SCREEN:"MISSION_COMPLETED_SCREEN",NOTIFICATION_SCREEN:"NOTIFICATION_SCREEN",TOURNAMENTS_SCREEN:"TOURNAMENTS_SCREEN",PLAY_WITH_FRIEND_GAME_OVER_SCREEN:"PLAY_WITH_FRIEND_GAME_OVER_SCREEN",TOURNAMENTS_RESULT_SCREEN:"TOURNAMENT_RESULT_SCREEN",WAITING_JOURNEY_SCREEN:"WAITING_JOURNEY_SCREEN",JOURNEY_SCREEN:"JOURNEY_SCREEN",MISSION_WELCOME_SCREEN:"MISSION_WELCOME_SCREEN",WELL_DONE_SCREEN:"WELL_DONE_SCREEN",CONFIRM_RESTART_SCREEN:"CONFIRM_RESTART_SCREEN",OUT_OF_MISSIONS_SCREEN:"OUT_OF_MISSIONS_SCREEN",PLAY_WITH_FRIEND_WELCOME:"PLAY_WITH_FRIEND_WELCOME",LANGUAGES_SCREEN:"LANGUAGES_SCREEN"},a={SCREEN:200,POPUP:300,PRIORITY:999}},646:function(e,t){t.Z={BUTTON_CLICK:"button_click",POPUP_OFF:"popup_out",POPUP_SHOW:"popup_in",AUTO_COMPLETE:"auto_complete",CARD_MOVE:"card_move",FINISH_1:"finish1",FINISH_2:"finish2",FINISH_3:"finish3",FINISH_4:"finish4",FINISH_5:"finish5",FINISH_6:"finish6",FINISH_7:"finish7",FINISH_8:"finish8",FINISH_9:"finish9",FINISH_10:"finish10",FINISH_11:"finish11",FINISH_12:"finish12",FINISH_13:"finish13",HINT:"hint",NO_MOVE:"no_move",SHUFFLE:"shuffle",UNDO:"undo",WON:"won",DIAMONDS_EAT:"",FIREWORKS_SOAR:"",FIREWORKS_BIG:"",FIREWORKS_SMALL:"",DAILY_REWARD:"",GAME_OVER_SCENE:"",SCORE_COUNTER:"",CONGRATULATION:"",YOU_WIN:"",YOU_LOSE:"",GIFT_CHARGE:"",GIFT_REVEAL:"",GIFT_EXPLODE:""}},672:function(e,t,n){var i=n(626),a=n(621),s=n(643).Z.EFFECTS,r=s.KEY,o=s.FRAME,c=function(e){function t(t){var n;return(n=e.call(this,t)||this).halo=void 0,n.star=void 0,n.createStar(),n.createHalo(),n.scene.add.existing((0,i.Z)(n)),n}(0,a.Z)(t,e);var n=t.prototype;return n.run=function(){this.runStarAnimation(),this.runHaloAnimation()},n.createStar=function(){this.star=this.scene.make.image({key:r,frame:o.FX_STAR_YELLOW,visible:!1}),this.star.setWorldSize(35,35),this.add(this.star)},n.createHalo=function(){this.halo=this.scene.make.image({key:r,frame:o.FX_CIRCLE,visible:!1}),this.halo.setWorldSize(162,162),this.add(this.halo)},n.runStarAnimation=function(){var e=this;this.scene.tweens.killTweensOf(this.star),this.star.setVisible(!0);var t=1/GameCore.Utils.Image.getImageScale();this.scene.tweens.add({targets:[this.star],duration:400,ease:Phaser.Math.Easing.Quintic.Out,props:{scaleX:{start:16*t,to:0},scaleY:{start:10*t,to:0}},onComplete:function(){e.star.setVisible(!1)}})},n.runHaloAnimation=function(){var e=this;this.scene.tweens.killTweensOf(this.halo),this.halo.setScale(0),this.halo.setVisible(!0),this.scene.tweens.add({targets:[this.halo],duration:200,ease:Phaser.Math.Easing.Cubic.Out,props:{scale:{from:0,to:8},alpha:{from:1,to:0}},onComplete:function(){e.halo.setVisible(!1)}})},t}(Phaser.GameObjects.Container);t.Z=c},663:function(e,t,n){var i=n(626),a=n(621),s=n(643),r=n(615),o=s.Z.EFFECTS,c=o.KEY,h=o.FRAME,u=function(e){function t(t,n){var a;return(a=e.call(this,t,c,h.BLANK)||this).config=void 0,a.emitter=void 0,a.config=n||{},a.scene.add.existing((0,i.Z)(a)),a}(0,a.Z)(t,e);var n=t.prototype;return n.createEmitters=function(){var e=h.FX_CONFETTI_SMALL_1,t=h.FX_CONFETTI_SMALL_2,n=h.FX_CONFETTI_SMALL_3,i=h.FX_CONFETTI_SMALL_4,a=1/GameCore.Utils.Image.getImageScale(),s={on:!1,particleBringToTop:!0,frame:[e,t,n,i],tint:[14223402,1021804,5420529,16702052],timeScale:1,frequency:400,maxParticles:120,gravityY:-10,speedX:{min:-100,max:100},speedY:{min:80,max:250},alpha:{start:1,end:0,ease:Phaser.Math.Easing.Expo.In},rotate:{start:0,end:1080},scale:{min:.6*a,max:1.6*a},angle:{min:20,max:160},lifespan:{min:8e3,max:12e3}},o=(0,r.TS)(s,this.config);this.emitter=this.createEmitter(o)},n.run=function(e,t,n){this.stop(),this.emitter.setQuantity(e),this.emitter.setPosition(t,n),this.emitter.start()},n.explode=function(e,t,n){this.emitter||this.createEmitters(),this.emitter.explode(e,t,n)},n.stop=function(){var e,t,n;null==(e=this.emitter)||e.killAll(),null==(t=this.emitter)||t.stop(),null==(n=this.emitter)||n.remove(),this.createEmitters()},t}(Phaser.GameObjects.Particles.ParticleEmitterManager);t.Z=u},670:function(e,t,n){var i=n(626),a=n(621),s=n(643).Z.EFFECTS,r=s.KEY,o=s.FRAME,c=function(e){function t(t){var n;return(n=e.call(this,t,r,o.FX_STAR_YELLOW)||this).emitZone=void 0,n.emitter=void 0,n.createEmitZone(),n.scene.add.existing((0,i.Z)(n)),n}(0,a.Z)(t,e);var n=t.prototype;return n.createEmitZone=function(){this.emitZone=new Phaser.Geom.Rectangle},n.createEmitters=function(){var e=1/GameCore.Utils.Image.getImageScale();this.emitter=this.createEmitter({on:!1,frame:o.FX_STAR_YELLOW,emitZone:{source:this.emitZone,type:"random"},timeScale:1,frequency:100,alpha:{start:1,end:0,ease:Phaser.Math.Easing.Expo.Out},scale:{start:1*e,end:0,ease:Phaser.Math.Easing.Expo.Out},lifespan:{min:800,max:1500}})},n.run=function(e,t,n,i,a){this.stop(),this.reset(),this.emitZone.setSize(i,a),this.emitZone.setPosition(t-i/2,n-a/2),this.emitter.setQuantity(e),this.emitter.start()},n.stop=function(){var e,t;null==(e=this.emitter)||e.killAll(),null==(t=this.emitter)||t.stop()},n.reset=function(){this.createEmitters()},t}(Phaser.GameObjects.Particles.ParticleEmitterManager);t.Z=c},344:function(e,t,n){n.r(t),n.d(t,{default:function(){return ON}});var i=n(625),a=n(616),s=n(619),r=n(621),o=n(2),c=n.n(o),h=n(0),u=n.n(h),l=n(628),d=0,p=0,f=function(){function e(e){this.game=void 0,this.progressFbTimeEvent=void 0,this.game=e}var t=e.prototype;return t.loadingProgressFbBootScene=function(){var e=this,t=100;p=30;!function n(){t<=0?clearTimeout(e.progressFbTimeEvent):e.progressFbTimeEvent=setTimeout((function(){e.game.facebook.setLoadingProgress(Math.round(p)),p+=30/t,t--,n()}),50)}()},t.finishLoadingProgressFbBootScene=function(){clearTimeout(this.progressFbTimeEvent)},t.loadingProgressFbLoadScene=function(){var e=this;(!p||p<30)&&(p=60),d=p;!function t(){e.progressFbTimeEvent=setTimeout((function(){e.game.facebook.setLoadingProgress(Math.round(p)),p+=.1,t()}),50)}()},t.onProgress=function(e){var t=100-p,n=Math.round(e*t+p);n>d&&clearTimeout(this.progressFbTimeEvent),this.game.facebook.setLoadingProgress(n)},e}(),g=n(110),m=n.n(g);function v(e,t){if(1==t.length)return t[0].color;e=Phaser.Math.Clamp(e,0,1);for(var n=t[0].color,i=0;i<t.length-1;i++){var a=t[i],s=t[i+1];if(e>=a.at&&e<=s.at){var r=Phaser.Display.Color.IntegerToColor(a.color),o=Phaser.Display.Color.IntegerToColor(s.color),c=Phaser.Display.Color.Interpolate.ColorWithColor(r,o,100,100*e);return Phaser.Display.Color.GetColor(c.r,c.g,c.b)}a.at,n=a.color}return n}var y=function(){function e(e){this.game=void 0,this.game=e}var t=e.prototype;return t.addKillRevive=function(){var e=this;[Phaser.GameObjects.Container,Phaser.GameObjects.Image,Phaser.GameObjects.Sprite,Phaser.GameObjects.Graphics,Phaser.GameObjects.Text,Phaser.GameObjects.BitmapText,Phaser.GameObjects.Particles.ParticleEmitter,Phaser.GameObjects.Particles.ParticleEmitterManager,Phaser.GameObjects.Rectangle,Phaser.GameObjects.Shape].forEach((function(t){t.prototype.kill=e.kill,t.prototype.revive=e.revive}))},t.addKillReviveGroup=function(){Phaser.GameObjects.Group.prototype.killGroup=this.killGroup,Phaser.GameObjects.Group.prototype.reviveGroup=this.reviveGroup},t.addSetWorldSize=function(){var e=this;[Phaser.GameObjects.Image,Phaser.GameObjects.Sprite].forEach((function(t){t.prototype.setWorldSize=e.setWorldSize}))},t.addSetWorldSizeForContainer=function(){var e=this;[Phaser.GameObjects.Container].forEach((function(t){t.prototype.setWorldSize=e.setWorldSizeForContainer}))},t.addGetWorldPosition=function(){var e=this;[Phaser.GameObjects.Container,Phaser.GameObjects.Image,Phaser.GameObjects.Sprite,Phaser.GameObjects.Graphics,Phaser.GameObjects.Text,Phaser.GameObjects.BitmapText].forEach((function(t){t.prototype.getWorldPosition=e.getWorldPosition}))},t.addDrawDebugBox=function(){var e=this;[Phaser.GameObjects.Container,Phaser.GameObjects.Image,Phaser.GameObjects.Sprite,Phaser.GameObjects.Graphics,Phaser.GameObjects.Text,Phaser.GameObjects.BitmapText,Phaser.GameObjects.Zone].forEach((function(t){t.prototype.drawDebugBox=e.drawDebugBox}))},t.addHighQuality=function(){var e=this;[Phaser.GameObjects.Text].forEach((function(t){t.prototype.setHighQuality=e.setHighQuality}))},t.addGradientHorizontalTint=function(){var e=this;[Phaser.GameObjects.BitmapText].forEach((function(t){t.prototype.setGradientHorizontalTint=e.setGradientHorizontalTint,t.prototype.setGradientVerticalTint=e.setGradientVerticalTint,t.prototype.clearGradientTint=e.clearGradientTint}))},t.addRadius=function(){var e=this;[Phaser.GameObjects.BitmapText].forEach((function(t){m()(t.prototype,"radius",{set:function(e){this._radius=e,this._dirty=!0},get:function(){return this._radius}}),t.prototype.setRadius=e.setRadius,t.prototype.clearRadius=e.clearRadius,t.prototype._originalGetTextBounds=t.prototype.getTextBounds,t.prototype.getTextBounds=e.getTextBounds}))},t.addSetLineHeightForBitmapText=function(){Phaser.GameObjects.BitmapText.prototype.setLineHeight=function(e){this.lineHeight=e,this.updateDisplayOrigin()}},t.kill=function(){this.setActive(!1),this.setVisible(!1)},t.revive=function(){this.setActive(!0),this.setVisible(!0)},t.killGroup=function(){this.getChildren().forEach((function(e){e.setActive(!1),e.setVisible(!1)}))},t.reviveGroup=function(){this.getChildren().forEach((function(e){e.setActive(!0),e.setVisible(!0)}))},t.setWorldSize=function(e,t){this.setSize(e,t),this.setDisplaySize(e,t)},t.setWorldSizeForContainer=function(e,t,n){void 0===n&&(n=2),this.setSize(e*n,t*n),this.setDisplaySize(e,t)},t.getWorldPosition=function(){var e=this.getWorldTransformMatrix().decomposeMatrix();return{x:e.translateX,y:e.translateY}},t.drawDebugBox=function(e,t){var n=this.x,i=this.y,a=this.width,s=this.height,r=this.depth,o=this.originX,c=this.originY,h=this.scene.add.rectangle(n,i,a,s,e,t);h.setName("Debug Box"),h.setDepth(r);var u=GameCore.Utils.Valid.isNumber;return u(o)&&u(c)&&h.setOrigin(o,c),h},t.setHighQuality=function(){return this.renderer instanceof Phaser.Renderer.WebGL.WebGLRenderer?this.setResolution(2*this.scene.game.world.getZoomRatio()):this},t.setGradientHorizontalTint=function(e){var t=this.getTextBounds().characters;if(0==t.length)return this;for(var n=t[t.length-1].r,i=0,a=0;a<t.length;a++){var s=i/n,r=(i=t[a].r)/n,o=v(s,e),c=v(r,e);this.setCharacterTint(a,1,!1,o,c,o,c)}return this},t.setGradientVerticalTint=function(e,t){void 0===t&&(t=!0);for(var n=[],i=this.getTextBounds().characters,a=0;a<i.length;a++){for(var s=i[a],r=t?s.line:0;!n[r];)n.push({minY:9999999,maxY:-9999999});var o=n[r],c=o.minY,h=o.maxY,u=s.y+s.h,l=s.y;c>l&&(n[r].minY=l),h<u&&(n[r].maxY=u)}for(var d=0;d<i.length;d++){var p=i[d],f=n[t?p.line:0],g=f.minY,m=f.maxY,y=p.y+p.h,A=(m-p.y)/(m-g),E=v((m-y)/(m-g),e),T=v(A,e);this.setCharacterTint(d,1,!1,T,T,E,E)}return this},t.clearGradientTint=function(){return this.setCharacterTint(0,this.text.length,!1,16777215),this},t.setRadius=function(e){return this.radius=e,this._dirty=!0,this},t.clearRadius=function(){return this.radius=void 0,this},t.getTextBounds=function(e){var t=this._bounds,n=void 0!=this.radius&&0!=this.radius&&(this._dirty||e||this.scaleX!==t.scaleX||this.scaleY!==t.scaleY);if(t=this._originalGetTextBounds(e),n)for(var i=0;i<t.characters.length;i++){var a=t.characters[i],s=this.radius,r=(a.x-this.displayOriginX+a.w/2)/s,o=Math.cos(r),c=Math.sin(r);a.curve={r:s,rotation:r,cos:o,sin:c}}return t},e}(),A=y,E=n(8),T=n.n(E),C=n(25),S=n.n(C),b=n(26),I=n.n(b),w=n(29),_=n.n(w),x=n(4),P=n.n(x),k=n(118),O=n.n(k),L=n(46),R=n.n(L),B=n(33),D=n.n(B),N=[{url:"./assets/images/others/mock1.jpg",title:"Buy lottery tickets on behalf",description:"\ud83d\udca5\ud83d\udca5\ud83d\udca5 Place an order for lottery tickets from 3 regions!!! \u2705 Fast - Convenient - Safe \u2705 Diverse products \u2705 Payment...",buttonName:"Discover more"},{url:"./assets/images/others/mock2.jpg",title:"SYSTEM-WIDE SALE UP TO 50%",description:'\ud83d\udd25 \ud835\uddec\ud835\uddd8\ud835\uddd4\ud835\udde5 \ud835\uddd8\ud835\udde1\ud835\uddd7 \ud835\udde6\ud835\uddd4\ud835\udddf\ud835\uddd8 | \ud835\udde8\ud835\udde3 \ud835\udde7\ud835\udde2 \ud835\udff1\ud835\udfec% "BIG PARTY" AUTHENTIC SPORTSWEAR SHOCKINGLY REDUCED PRICES! \ud83c\udf81 From...',buttonName:"Discover more"},{url:"./assets/images/others/mock3.jpg",title:"Register now",description:"Play safe, play fun, play 9club!",buttonName:"Register"}],M=function(){function e(){}return e.loadBannerAdAsync=function(){var e=(0,s.Z)(u().mark((function e(){var t,n,i,a,s,r,o,h,l,d;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.currentIdx=(this.currentIdx+1)%N.length,this.hideBannerAdAsync(),e.next=4,new(c())((function(e){setTimeout((function(){e()}),2e3)}));case 4:if(!document.getElementById("mock-banner-ads")){e.next=16;break}return t=N[this.currentIdx],n=t.url,i=t.buttonName,a=t.title,s=t.description,(r=document.getElementById("banner-content-text1"))&&(r.innerHTML=a),(o=document.getElementById("banner-content-text2"))&&(o.innerHTML=s),(h=document.getElementById("mock-banner-ads-avatar"))&&(h.style.background="url("+n+") center center/contain no-repeat"),(l=document.getElementById("banner-content-button"))&&(l.innerHTML=i),e.abrupt("return");case 16:d=GameCore.Utils.Device.isDesktop(),50,d?this.createDesktopBannerAd(50):this.createMobileBannerAd(50);case 19:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),e.createDesktopBannerAd=function(e){var t=this,n=N[this.currentIdx],i=n.url,a=n.buttonName,s=n.title,r=n.description,o=document.createElement("div");o.id="mock-banner-ads",o.style.width="100%",o.style.height=e+"px",o.style.bottom="var(--sab)",o.style.display="flex",o.style.position="absolute",o.style.opacity=this.currentOpacity;var c=document.createElement("div");c.id="mock-banner-ads-display-area",c.style.width="100%",c.style.height="100%",c.style.background="#323436 center center/auto no-repeat",c.style.borderRadius="10px",c.style.marginLeft="4px",c.style.marginRight="4px",c.style.display="block",c.style.alignContent="center";var h=document.createElement("div");h.id="mock-banner-ads-content",h.style.boxSizing="border-box",h.style.flexDirection="row",h.style.display="flex",h.style.position="relative",h.style.alignItems="stretch",h.style.paddingLeft="4px",h.style.paddingRight="4px",h.style.justifyContent="space-between";var u=document.createElement("div");u.id="mock-banner-ads-avatar",u.style.marginLeft="10px",u.style.width=e+"px",u.style.minWidth=e+"px",u.style.height=e+"px",u.style.display="flex",u.style.flexDirection="column",u.style.position="relative",u.style.background="url("+i+") center center/contain no-repeat",u.style.borderRadius="50%";var l=document.createElement("div");l.id="mock-banner-ads-right-content",l.style.width="100%",l.style.paddingLeft="10px",l.style.display="flex",l.style.flexDirection="row",l.style.position="relative",l.style.color="#E4E6EB",l.style.wordWrap="break-word",l.style.textAlign="left",l.style.alignContent="center",l.style.alignItems="center",l.style.fontSize="12px",l.style.fontFamily="Helvetica, Arial, sans-serif, Roboto, Helvetica, Arial, sans-serif",u.style.boxSizing="border-box";var d=document.createElement("div");d.style.flexDirection="column",d.style.display="flex",d.style.justifyContent="center",d.style.flexShrink="1",d.style.flexGrow="1",d.style.flexBasis="0",d.style.boxSizing="border-box",d.style.minWidth="0",d.innerHTML="\n            <div id='banner-content-text1' style=\"font-weight:600;line-height: 1.3333;font-size: .9375rem;text-overflow: ellipsis;-webkit-line-clamp: 1;overflow: hidden;display: -webkit-box;-webkit-box-orient: vertical;\">"+s+"</div>\n            <div id='banner-content-text2' style=\"font-weight:400;line-height: 1.2308;font-size: .8125rem;text-overflow: ellipsis;-webkit-line-clamp: 2;overflow: hidden;display: -webkit-box;-webkit-box-orient: vertical;\">"+r+"</div>";var p=document.createElement("button");p.id="banner-content-button",p.type="button",p.style.width="120px",p.style.height=e-20+"px",p.style.fontWeight="600",p.style.backgroundColor="#3963fc",p.style.border="none",p.style.color="white",p.style.borderRadius="5px",p.style.textAlign="center",p.style.display="inline-block",p.style.cursor="pointer",p.style.marginRight="10px",p.style.marginLeft="10px",p.style.flexShrink="1",p.style.boxSizing="border-box",p.style.paddingRight="2px",p.style.paddingLeft="2px",p.innerHTML=a,p.onclick=function(){"0.2"===t.currentOpacity?o.style.opacity="1":o.style.opacity="0.2",t.currentOpacity=o.style.opacity};var f=document.createElement("button");f.type="button",f.style.width=e-20+"px",f.style.height=e-20+"px",f.style.fontWeight="1000",f.style.backgroundColor="#5a5c5c",f.style.border="none",f.style.color="white",f.style.borderRadius="50%",f.style.textAlign="center",f.style.display="inline-block",f.style.cursor="pointer",f.style.marginRight="10px",f.style.marginLeft="10px",f.style.flexShrink="0",f.style.boxSizing="border-box",f.style.paddingRight="2px",f.style.paddingLeft="2px",f.innerHTML="...",document.body.appendChild(o),o.appendChild(c),c.appendChild(h),h.appendChild(u),h.appendChild(l),l.appendChild(d),l.appendChild(p),l.appendChild(f)},e.createMobileBannerAd=function(e){var t=this,n=N[this.currentIdx],i=n.url,a=n.buttonName,s=n.title,r=n.description,o=document.createElement("div");o.id="mock-banner-ads",o.style.width="100%",o.style.height=e+"px",o.style.bottom="var(--sab)",o.style.display="block",o.style.position="absolute",o.style.opacity=this.currentOpacity;var c=document.createElement("div");c.id="mock-banner-ads-display-area",c.style.background="#ffffff center center/auto no-repeat",c.style.display="block",c.style.alignContent="center";var h=document.createElement("div");h.id="mock-banner-ads-content",h.style.boxSizing="border-box",h.style.flexDirection="row",h.style.display="flex",h.style.position="relative",h.style.alignItems="stretch",h.style.justifyContent="space-between";var u=document.createElement("div");u.id="mock-banner-ads-avatar",u.style.width=e+"px",u.style.minWidth=e+"px",u.style.height=e+"px",u.style.display="flex",u.style.flexDirection="column",u.style.position="relative",u.style.background="url("+i+") center center/contain no-repeat";var l=document.createElement("div");l.id="mock-banner-ads-right-content",l.style.width="100%",l.style.paddingLeft="10px",l.style.display="flex",l.style.flexDirection="row",l.style.position="relative",l.style.color="#000",l.style.wordWrap="break-word",l.style.textAlign="left",l.style.alignContent="center",l.style.alignItems="center",l.style.fontSize="12px",l.style.fontFamily="Helvetica, Arial, sans-serif, Roboto, Helvetica, Arial, sans-serif",u.style.boxSizing="border-box";var d=document.createElement("div");d.style.flexDirection="column",d.style.display="flex",d.style.justifyContent="center",d.style.flexShrink="1",d.style.flexGrow="1",d.style.flexBasis="0",d.style.boxSizing="border-box",d.style.minWidth="0",d.innerHTML="\n            <div id='banner-content-text1' style=\"font-weight:600;line-height: 1.3333;font-size: .9375rem;text-overflow: ellipsis;-webkit-line-clamp: 1;overflow: hidden;display: -webkit-box;-webkit-box-orient: vertical;\">"+s+"</div>\n            <div id='banner-content-text2' style=\"font-weight:400;line-height: 1.2308;font-size: .8125rem;text-overflow: ellipsis;-webkit-line-clamp: 1;overflow: hidden;display: -webkit-box;-webkit-box-orient: vertical;\">"+r+"</div>";var p=document.createElement("button");p.id="banner-content-button",p.type="button",p.style.height="100%",p.style.fontWeight="600",p.style.backgroundColor="#3963fc",p.style.border="none",p.style.color="white",p.style.textAlign="center",p.style.display="inline-block",p.style.cursor="pointer",p.style.marginLeft="10px",p.style.flexShrink="1",p.style.boxSizing="border-box",p.style.paddingRight="7px",p.style.paddingLeft="7px",p.innerHTML=a,p.onclick=function(){"0.2"===t.currentOpacity?o.style.opacity="1":o.style.opacity="0.2",t.currentOpacity=o.style.opacity},document.body.appendChild(o),o.appendChild(c),c.appendChild(h),h.appendChild(u),h.appendChild(l),l.appendChild(d),l.appendChild(p)},e.hideBannerAdAsync=function(){var e=(0,s.Z)(u().mark((function e(){var t;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=document.getElementById("mock-banner-ads")){e.next=3;break}return e.abrupt("return");case 3:t.remove();case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),e}();M.currentIdx=-1,M.currentOpacity="1";var G={LOADED:"loaded",DISPLAYED:"displayed"},Z=function(e){return e.IDLE="idle",e.LOADING="loading",e.FILLED="filled",e.SHOWING="showing",e}(Z||{}),F=Z,U=function(e){return e.REWARDED="rewarded",e.PRE_ROLL="pre-roll",e.INTERSTITIAL="interstitial",e.BANNER="banner",e}(U||{}),z=U,W=n(632),Y=function(e){function t(t,n){var i;return(i=e.call(this,n)||this).code=void 0,i.code=t,i.message=n,i}return(0,r.Z)(t,e),t}((0,W.Z)(Error)),H=function(e){this.type=void 0,this.status=void 0,this.type=e,this.status=F.IDLE};function K(e,t){var n="undefined"!==typeof I()&&_()(e)||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){var n;if(!e)return;if("string"===typeof e)return j(e,t);var i=T()(n=Object.prototype.toString.call(e)).call(n,8,-1);"Object"===i&&e.constructor&&(i=e.constructor.name);if("Map"===i||"Set"===i)return S()(e);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return j(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var i=0;return function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function j(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}GameCore.Ads={Types:z,Status:F,Events:G,AdError:Y,AdInstance:H};var V=function(e){function t(){for(var t,n,i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];return(n=e.call.apply(e,P()(t=[this]).call(t,a))||this).events=void 0,n.enabled=void 0,n.config=void 0,n.lastInterAdShownTime=void 0,n.lastInterAdLoadedTime=void 0,n.lastRewardAdShownTime=void 0,n.interstitial=void 0,n.rewardedVideo=void 0,n.preRoll=void 0,n.fallbackInterstitial=void 0,n.fallbackRewardedVideo=void 0,n.fallbackPreRoll=void 0,n.safeAreaBottom=void 0,n.showingBannerAd=void 0,n.reloadBannerAdIntervals=void 0,n.bannerAdConfigs=void 0,n.isHaveBannerAdOptions=void 0,n.isFallbackReady=void 0,n.isFallbackInitialized=void 0,n.isBannerAdsShown=void 0,n.adInProcessFlag=void 0,n}(0,r.Z)(t,e);var i=t.prototype;return i.init=function(){this.events=new Phaser.Events.EventEmitter,this.safeAreaBottom=0,this.lastInterAdShownTime=0,this.lastInterAdLoadedTime=0,this.lastRewardAdShownTime=0,this.showingBannerAd={},this.reloadBannerAdIntervals={},this.bannerAdConfigs=[],this.isHaveBannerAdOptions=!0,this.isFallbackReady=!1,this.isFallbackInitialized=!1,this.isBannerAdsShown=!1},i.calculateSafeAreaBottom=function(){try{if(!this.config.calculateSafeAreaBottom)return;this.safeAreaBottom=O()(getComputedStyle(document.documentElement).getPropertyValue("--sab")),isNaN(this.safeAreaBottom)&&(this.safeAreaBottom=0)}catch(e){this.safeAreaBottom=0}},i.configure=function(e,t){this.enabled=t.enabled,this.config=t,this.setAdInstance(e),this.setBannerAdConfigStatus(),this.calculateSafeAreaBottom()},i.setBannerAdConfigStatus=function(){for(var e,t=this.config.bannerAdOptions,n=GameCore.Utils.Device.isDesktop(),i=K(t);!(e=i()).done;){var a=e.value,s=a.platform,r="ALL"==s||"DESKTOP"==s&&n||"MOBILE"==s&&!n;this.bannerAdConfigs.push({config:a,canShow:r}),r&&(this.isHaveBannerAdOptions=!0)}},i.setAdInstance=function(e){var t=this.config,n=t.rewardAdOptions,i=t.interstitialAdOptions;this.interstitial=new e(z.INTERSTITIAL,i.pID),this.rewardedVideo=new e(z.REWARDED,n.pID),this.preRoll=new e(z.PRE_ROLL,i.pID)},i.setFallbackAdInstance=function(e){var t=this.config,n=t.rewardAdOptions,i=t.interstitialAdOptions;this.fallbackInterstitial=new e(z.INTERSTITIAL,i.pID),this.fallbackRewardedVideo=new e(z.REWARDED,n.pID),this.fallbackPreRoll=new e(z.PRE_ROLL,i.pID)},i.preloadInterstitialAdAsync=function(){var e=(0,s.Z)(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.preloadAdAsync(z.INTERSTITIAL);case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),i.showInterstitialAdAsync=function(){var e=(0,s.Z)(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.canbeShowInterstitialAdByTime()){e.next=2;break}throw new Y("INTERSTITIAL_AD_CAN_NOT_SHOW","Can't show interstitial ad");case 2:return e.next=4,this.showAdAsync(z.INTERSTITIAL);case 4:this.lastInterAdShownTime=window.performance.now()/1e3;case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),i.preloadPreRollAdAsync=function(){var e=(0,s.Z)(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.preloadAdAsync(z.PRE_ROLL);case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),i.showPreRollAdAsync=function(){var e=(0,s.Z)(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.showAdAsync(z.PRE_ROLL);case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),i.preloadRewardedVideoAsync=function(){var e=(0,s.Z)(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.preloadAdAsync(z.REWARDED);case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),i.showRewardedVideoAsync=function(){var e=(0,s.Z)(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.canbeShowRewardAd()){e.next=2;break}throw new Y("REWARDED_VIDEO_CAN_NOT_SHOW","Can't show rewarded video");case 2:return e.next=4,this.showAdAsync(z.REWARDED);case 4:this.lastRewardAdShownTime=window.performance.now()/1e3;case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),i.getRemainingRewardTime=function(){var e=window.performance.now()/1e3,t=this.config.rewardAdOptions.secondsBetweenAds,n=e-this.lastRewardAdShownTime;return n<t?t-n:0},i.preloadAdAsync=function(){var e=(0,s.Z)(u().mark((function e(t){var n,i;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.enabled){e.next=2;break}throw new Y("ADS_NOT_ENABLED","Ads is't enabled");case 2:return e.next=4,this.preloadMainAdService(t);case 4:if(!0!==(n=e.sent)){e.next=7;break}return e.abrupt("return");case 7:if(this.isFallbackReady){e.next=9;break}throw n;case 9:return e.next=11,this.preloadFallbackAdService(t);case 11:if(!0!==(i=e.sent)){e.next=14;break}return e.abrupt("return");case 14:throw i;case 15:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),i.preloadMainAdService=function(e){var t=this;return new(c())((function(n){var i=!1;t.preloadAdInstanceAsync(e,!1).then((function(){i=!0})).catch((function(e){t.isFallbackReady||t.initFallbackAdsService().catch((function(){t.isFallbackReady=!1})),i=e})).finally((function(){n(i)}))}))},i.preloadFallbackAdService=function(e){var t=this;return new(c())((function(n){var i=!1;t.isFallbackReady||n(new Y("FALLBACK_NOT_READY","Fallback ads not ready")),t.preloadAdInstanceAsync(e,!0).then((function(){i=!0})).catch((function(e){i=e})).finally((function(){n(i)}))}))},i.preloadAdInstanceAsync=function(){var e=(0,s.Z)(u().mark((function e(t,n){var i,a=this;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===n&&(n=!1),null!==(i=this.getAdInstanceByType(t,n))){e.next=4;break}throw new Y("AD_INSTANCE_NOT_INITIATED","The instance ads not yet initiated");case 4:if(i.getStatus()!==F.LOADING){e.next=8;break}return e.next=7,new(c())((function(e){a.events.once(G.LOADED,e)}));case 7:return e.abrupt("return");case 8:return t!==z.INTERSTITIAL&&t!==z.PRE_ROLL||(this.lastInterAdLoadedTime=window.performance.now()/1e3),e.next=11,i.loadAsync();case 11:this.events.emit(G.LOADED,t);case 12:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}(),i.showAdAsync=function(){var e=(0,s.Z)(u().mark((function e(t){var n,i;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.enabled){e.next=2;break}throw new Y("ADS_NOT_ENABLED","Ads is't enabled");case 2:return e.next=4,this.showMainAdService(t);case 4:if(!0!==(n=e.sent)){e.next=7;break}return e.abrupt("return");case 7:if(!this.isUserCancelledAdError(n)&&this.isAdFallbackReadyToShow(t)){e.next=9;break}throw n;case 9:return e.next=11,this.showFallbackAdService(t);case 11:if(!0!==(i=e.sent)){e.next=14;break}return e.abrupt("return");case 14:throw i;case 15:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),i.showMainAdService=function(e){var t=this;return new(c())((function(n){var i=!1;t.showAdInstanceAsync(e,!1).then((function(){i=!0})).catch((function(e){i=e,t.isUserCancelledAdError(e)||t.isFallbackReady||t.initFallbackAdsService().catch((function(){t.isFallbackReady=!1}))})).finally((function(){n(i)}))}))},i.showFallbackAdService=function(e){var t=this;return new(c())((function(n){var i=!1;t.isFallbackReady||n(new Y("FALLBACK_NOT_READY","Fallback ads not ready")),t.showAdInstanceAsync(e,!0).then((function(){i=!0})).catch((function(e){i=e})).finally((function(){n(i)}))}))},i.showAdInstanceAsync=function(){var e=(0,s.Z)(u().mark((function e(t,n){var i;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===n&&(n=!1),null!==(i=this.getAdInstanceByType(t,n))){e.next=4;break}throw new Y("AD_INSTANCE_NOT_INITIATED","The instance ads not yet initiated");case 4:return t!==z.INTERSTITIAL&&t!==z.PRE_ROLL||(this.lastInterAdShownTime=window.performance.now()/1e3),t===z.REWARDED&&(this.lastRewardAdShownTime=window.performance.now()/1e3,this.config.enableRewardVideoResetInterstitial&&(this.lastInterAdShownTime=this.lastRewardAdShownTime)),e.next=8,i.showAsync();case 8:this.events.emit(G.DISPLAYED,t);case 9:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}(),i.getAdStatus=function(e){var t=this.getAdInstanceByType(e);return t?t.getStatus():null},i.getAdInstanceByType=function(e,t){if(void 0===t&&(t=!1),t)switch(e){case z.INTERSTITIAL:return this.fallbackInterstitial;case z.REWARDED:return this.fallbackRewardedVideo;case z.PRE_ROLL:return this.fallbackPreRoll;default:return null}switch(e){case z.INTERSTITIAL:return this.interstitial;case z.REWARDED:return this.rewardedVideo;case z.PRE_ROLL:return this.preRoll;default:return null}},i.canbeShowInterstitialAd=function(){var e=this.canbeLoadInterstitialAdByTime();return e&&(e=this.canbeShowInterstitialAdByTime()),e},i.canbeLoadInterstitialAdByTime=function(){var e=window.performance.now()/1e3,t=this.config.interstitialAdOptions,n=t.secondsFirstTime,i=t.secondsBetweenAds,a=Math.floor(e-this.lastInterAdLoadedTime);return this.lastInterAdLoadedTime>0?a>=i:a>=n},i.canbeShowInterstitialAdByTime=function(){var e=window.performance.now()/1e3,t=this.config.interstitialAdOptions,n=t.secondsFirstTime,i=t.secondsBetweenAds,a=Math.floor(e-this.lastInterAdShownTime);return this.lastInterAdShownTime>0?a>=i:a>=n},i.canbeShowRewardAd=function(){var e=window.performance.now()/1e3,t=this.config.rewardAdOptions,n=t.secondsFirstTime,i=t.secondsBetweenAds,a=Math.floor(e-this.lastRewardAdShownTime);return this.lastRewardAdShownTime>0?a>=i:a>=n},i.getEnabledBannerAds=function(){if(!this.isHaveBannerAdOptions)return[];for(var e,t=[],n=K(this.bannerAdConfigs);!(e=n()).done;){var i=e.value,a=i.config;i.canShow&&t.push(a)}return t},i.disableBannerAds=function(){this.config.bannerAdOptions=[]},i.showBannerAdAsync=function(){var e=(0,s.Z)(u().mark((function e(){var t;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.enabled){e.next=2;break}return e.abrupt("return");case 2:if(!this.isBannerAdsShown){e.next=5;break}return e.next=5,this.hideBannerAdAsync();case 5:if(0!==(t=this.getEnabledBannerAds()).length){e.next=8;break}return e.abrupt("return");case 8:return this.reloadBannerAdIntervals=this.reloadBannerAdIntervals||{},this.loadBannerAdAsync("",t),e.abrupt("return");case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),i.loadBannerAdAsync=function(){var e=(0,s.Z)(u().mark((function e(t,n){var i,a,s=this;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.enabled){e.next=2;break}return e.abrupt("return");case 2:if(i=this.getSceneName(),a=GameCore.Configs.Ads,e.prev=4,"msgames"===a.AdService){e.next=7;break}throw new Y("BANNER_ADS_NOT_SUPPORTED","Banner ads not supported");case 7:if(!a.Mockup.Enable){e.next=12;break}return e.next=10,M.loadBannerAdAsync();case 10:e.next=14;break;case 12:return e.next=14,GameSDK.loadBannerAdAsync(t,n);case 14:this.isBannerAdsShown=!0,n.forEach((function(e){var t=e.placementId,n=e.position,r=e.bannerWidth,o=e.bannerHeight;if(t&&""!==t){var c=n+":"+r+"x"+o;s.showingBannerAd[t]=!0,window.game.analytics.showBannerAd(c,i,a.AdService)}})),e.next=23;break;case 18:e.prev=18,e.t0=e.catch(4),this.isBannerAdsShown=!1,n.forEach((function(e){var t=e.position+":"+e.bannerWidth+"x"+e.bannerHeight,n={type:z.BANNER,placement:i,bannerPosition:t,adService:a.AdService};window.game.analytics.showAdFail(n)}));case 23:case"end":return e.stop()}}),e,this,[[4,18]])})));return function(t,n){return e.apply(this,arguments)}}(),i.hideBannerAdAsync=function(){var e=(0,s.Z)(u().mark((function e(){var t;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.enabled){e.next=2;break}return e.abrupt("return");case 2:if(this.isHaveBannerAdOptions){e.next=4;break}return e.abrupt("return");case 4:if(this.isBannerAdsShown=!1,e.prev=5,"msgames"===(t=GameCore.Configs.Ads).AdService){e.next=9;break}throw new Y("BANNER_ADS_NOT_SUPPORTED","Banner ads not supported");case 9:if(!t.Mockup.Enable){e.next=14;break}return e.next=12,M.hideBannerAdAsync();case 12:e.next=16;break;case 14:return e.next=16,GameSDK.hideBannerAdAsync();case 16:e.next=21;break;case 18:e.prev=18,e.t0=e.catch(5);case 21:case"end":return e.stop()}}),e,this,[[5,18]])})));return function(){return e.apply(this,arguments)}}(),i.getBannerHeight=function(){if(!this.enabled)return 0;if(!this.isBannerAdsShown)return 0;var e=this.getBottomBannerConfig();if(!e)return 0;var t=e.bannerHeight,n=(void 0===t?0:t)+this.safeAreaBottom+20;if(this.game.world){var i=this.game.world,a=i.getPixelRatio(),s=i.getZoomRatio();return this.game.world.getPhysicPixels(n,a/s)}return n},i.getBottomBannerConfig=function(){var e=this.getEnabledBannerAds();return 0===e.length?null:R()(e).call(e,(function(e){return"bottom"===e.position}))||null},i.getSceneName=function(){try{var e=self.game.globalScene;return this.globalSceneTypeCheck(e)?e.getCurrentScene().scene.getSceneName():"unknown"}catch(t){return"unknown"}},i.globalSceneTypeCheck=function(e){return"getCurrentScene"in e&&"function"===typeof e.getCurrentScene},i.initFallbackAdsService=function(){var e=(0,s.Z)(u().mark((function e(){var t,n;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=GameCore.Configs.Ads,!this.isFallbackInitialized){e.next=3;break}return e.abrupt("return");case 3:return this.isFallbackInitialized=!0,e.next=6,this.getFallbackAdServiceInstance();case 6:n=e.sent,"none"!==t.FallbackService&&null!==n&&(this.isFallbackReady=!0,this.setFallbackAdInstance(n));case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),i.getFallbackAdServiceInstance=function(){var e=(0,s.Z)(u().mark((function e(){var t,i,a;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=GameCore.Configs.Ads.FallbackService,e.next=3,Promise.resolve().then(n.bind(n,559));case 3:if(i=e.sent.default,"google"!==t){e.next=16;break}return e.prev=5,e.next=8,this.initGoogleAdInstanceAsync();case 8:if(null===(a=e.sent)){e.next=11;break}return e.abrupt("return",a);case 11:e.next=16;break;case 13:e.prev=13,e.t0=e.catch(5);case 16:return e.abrupt("return",i);case 17:case"end":return e.stop()}}),e,this,[[5,13]])})));return function(){return e.apply(this,arguments)}}(),i.initGoogleAdInstanceAsync=function(){var e=(0,s.Z)(u().mark((function e(){var t,i,a,s,r,o,c,h,l;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=GameCore.Configs.Ads.AdServiceConfigs.Google){e.next=3;break}return e.abrupt("return",null);case 3:return i=t.DataAdChannel,a=t.DataAdClient,s=t.DataAdHost,r=t.DataAdBreakTest,o=t.DataAdFrequencyHint,c=t.MaxScriptLoadRetryCount,e.next=6,Promise.resolve().then(n.bind(n,560));case 6:if("loaded"!==(h=e.sent.default).initStatus){e.next=9;break}return e.abrupt("return",h);case 9:return l={dataAdClient:a,dataAdChannel:i,dataAdHost:s,dataAdBreakTest:r,dataAdFrequencyHint:o,maxScriptLoadRetryCount:c},e.prev=10,h.setGame(this.game),e.next=14,h.initGoogleAdsAsync(l);case 14:return e.abrupt("return",h);case 17:return e.prev=17,e.t0=e.catch(10),e.abrupt("return",null);case 21:case"end":return e.stop()}}),e,this,[[10,17]])})));return function(){return e.apply(this,arguments)}}(),i.isUserCancelledAdError=function(e){if(e instanceof Y&&"USER_INPUT"===e.code)return!0;try{var t=JSON.parse(D()(e));return"code"in t&&"USER_INPUT"===t.code}catch(e){return!1}},i.isAdFallbackReadyToShow=function(e){if(!this.isFallbackReady)return!1;var t=this.getAdInstanceByType(e,!0);return!!t&&t.getStatus()===F.FILLED},i.setAdInProcess=function(e){this.adInProcessFlag=e},i.isAdInProcess=function(){return this.adInProcessFlag},t}(Phaser.Plugins.BasePlugin),J=V,X=function(){function e(e,t,n){this.name=void 0,this.color=void 0,this.selfLog=void 0,this.options=void 0,this.name=e,this.color=n||"#FFF",this.options=t,this.selfLog=!0}var t=e.prototype;return t.event=function(e,t,n){this.processEvent(e,t,n),this.selfLog},t.pageview=function(e){var t=this.getPageByKey(e);this.processPageView(t),this.selfLog},t.levelStart=function(e,t,n){this.processLevelStart(e,t,n),this.selfLog},t.levelFail=function(e,t,n){this.processLevelFail(e,t,n),this.selfLog},t.levelRescue=function(e,t,n){this.processLevelRescue(e,t,n),this.selfLog},t.levelComplete=function(e,t,n){this.processLevelComplete(e,t,n),this.selfLog},t.loadPreRollAd=function(e,t){this.processLoadPreRollAd(e,t),this.selfLog},t.showPreRollAd=function(e,t){this.processShowPreRollAd(e,t),this.selfLog},t.loadInterstitialAd=function(e,t){this.processLoadInterstitialAd(e,t),this.selfLog},t.showInterstitialAd=function(e,t){this.processShowInterstitialAd(e,t),this.selfLog},t.loadRewardedVideoAd=function(e,t){this.processLoadRewardedVideoAd(e,t),this.selfLog},t.showRewardedVideoAd=function(e,t){this.processShowRewardedVideoAd(e,t),this.selfLog},t.showBannerAd=function(e,t,n){this.processShowBannerAd(e,t,n),this.selfLog},t.receiveReward=function(e){this.processReceiveReward(e),this.selfLog},t.loadAdFail=function(e){this.processLoadAdFail(e),this.selfLog},t.showAdFail=function(e){this.processShowAdFail(e),this.selfLog},t.getPageByKey=function(e){var t=e.replace(/_/g,"-");return t=t.toLowerCase()},t.processLevelStart=function(e,t,n){},t.processLevelFail=function(e,t,n){},t.processLevelRescue=function(e,t,n){},t.processLevelComplete=function(e,t,n){},t.processLoadInterstitialAd=function(e,t){},t.processShowInterstitialAd=function(e,t){},t.processLoadPreRollAd=function(e,t){},t.processShowPreRollAd=function(e,t){},t.processLoadRewardedVideoAd=function(e,t){},t.processShowRewardedVideoAd=function(e,t){},t.processShowBannerAd=function(e,t,n){},t.processReceiveReward=function(e){},t.processLoadAdFail=function(e){},t.processShowAdFail=function(e){},e}();GameCore.Analytics={BaseAnalytics:X};var q=function(e){function t(){for(var t,n,i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];return(n=e.call.apply(e,P()(t=[this]).call(t,a))||this).analytics=void 0,n.pageview=function(e){n.isActive()&&n.analytics.forEach((function(t){t.pageview(e)}))},n}(0,r.Z)(t,e);var n=t.prototype;return n.init=function(){this.analytics=[]},n.add=function(e){this.analytics.push(e)},n.event=function(e,t,n){this.isActive()&&this.analytics.forEach((function(i){i.event(e,t,n)}))},n.levelStart=function(e,t,n){this.isActive()&&this.analytics.forEach((function(i){i.levelStart(e,t,n)}))},n.levelRescue=function(e,t,n){this.isActive()&&this.analytics.forEach((function(i){i.levelRescue(e,t,n)}))},n.levelFail=function(e,t,n){this.isActive()&&this.analytics.forEach((function(i){i.levelFail(e,t,n)}))},n.levelComplete=function(e,t,n){this.isActive()&&this.analytics.forEach((function(i){i.levelComplete(e,t,n)}))},n.loadPreRollAd=function(e,t){this.isActive()&&this.analytics.forEach((function(n){n.loadPreRollAd(e,t)}))},n.showPreRollAd=function(e,t){this.isActive()&&this.analytics.forEach((function(n){n.showPreRollAd(e,t)}))},n.loadInterstitialAd=function(e,t){this.isActive()&&this.analytics.forEach((function(n){n.loadInterstitialAd(e,t)}))},n.showInterstitialAd=function(e,t){this.isActive()&&this.analytics.forEach((function(n){n.showInterstitialAd(e,t)}))},n.loadRewardedVideoAd=function(e,t){this.isActive()&&this.analytics.forEach((function(n){n.loadRewardedVideoAd(e,t)}))},n.showRewardedVideoAd=function(e,t){this.isActive()&&this.analytics.forEach((function(n){n.showRewardedVideoAd(e,t)}))},n.showBannerAd=function(e,t,n){this.isActive()&&this.analytics.forEach((function(i){i.showBannerAd(e,t,n)}))},n.receiveReward=function(e){this.isActive()&&this.analytics.forEach((function(t){t.receiveReward(e)}))},n.loadAdFail=function(e){this.isActive()&&this.analytics.forEach((function(t){t.loadAdFail(e)}))},n.showAdFail=function(e){this.isActive()&&this.analytics.forEach((function(t){t.showAdFail(e)}))},n.isActive=function(){return this.analytics.length>=1},t}(Phaser.Plugins.BasePlugin),Q=q,$=function(){function e(e,t){var n=this;this.name=void 0,this.game=void 0,this.isSprite=void 0,this.audio=void 0,this.markers=void 0,this.volume=void 0,this.isMusicEnabled=function(){return!!n.game.player.getPlayerSetting("music")},this.isSoundEnabled=function(){return!!n.game.player.getPlayerSetting("sound")},this.name=t,this.game=e,this.markers={},this.isSprite=!1,this.isSprite||(this.audio=this.game.sound.add(this.name))}var t=e.prototype;return t.play=function(e,t){var n,i,s,r=(0,a.Z)({volume:this.volume},t||{});if(r.volume!==this.volume&&(r.volume*=this.volume),!this.isSprite)return(null==(i=this.audio)?void 0:i.seek)>0?void this.audio.resume():void(null==(s=this.audio)||s.play(e,r));this.createMaker(e),null==(n=this.markers[e])||n.play(e,r)},t.pause=function(e){var t,n;this.isSprite?null==(t=this.markers[e])||t.pause():null==(n=this.audio)||n.pause()},t.stop=function(e){var t,n;this.isSprite?null==(t=this.markers[e])||t.stop():null==(n=this.audio)||n.stop()},t.setVolume=function(e){this.volume=e},t.createMaker=function(e){if(!this.markers[e])try{this.markers[e]=this.game.sound.addAudioSprite(this.name)}catch(t){}},e}(),ee=n(81),te=n.n(ee),ne=n(23),ie=n.n(ne),ae=function(){function e(e){var t=this;this.game=void 0,this.audios=void 0,this.volume=void 0,this.soundKeys=void 0,this.isMusicEnabled=function(){return!!t.game.player.getPlayerSetting("music")},this.isSoundEnabled=function(){return!!t.game.player.getPlayerSetting("sound")},this.game=e,this.audios=new(te()),this.soundKeys=new(te())}var t=e.prototype;return t.addSoundKeys=function(e){var t=this;ie()(e).forEach((function(n){var i=e[n];"string"===typeof i&&t.soundKeys.set(n,i)}))},t.clearSoundKeys=function(){this.soundKeys.clear()},t.play=function(e,t){var n=this,i=(0,a.Z)({volume:this.volume},t||{});i.volume!==this.volume&&(i.volume*=this.volume);var s=this.audios.get(e);if(!s&&this.game.cache.audio.exists(e)){var r=this.game.sound.add(e);this.audios.set(e,r),s=r}if(s)s.play(void 0,i);else{var o=this.soundKeys.get(e);if(o)try{this.game.globalScene.load.audio(e,o),this.game.globalScene.load.on(Phaser.Loader.Events.FILE_KEY_COMPLETE+"audio-"+e,(function(){var t=n.game.sound.add(e);n.audios.set(e,t),t.play(void 0,i)})),this.game.globalScene.load.start()}catch(c){}}},t.pauseAll=function(){this.audios.forEach((function(e){e.pause()}))},t.resumeAll=function(){this.audios.forEach((function(e){e.resume()}))},t.stopAll=function(){this.audios.forEach((function(e){e.stop()}))},t.pause=function(e){var t=this.audios.get(e);t&&t.pause()},t.stop=function(e){var t=this.audios.get(e);t&&t.stop()},t.setVolume=function(e){this.volume=e},e}(),se=ae,re=function(e){function t(){for(var t,n,i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];return(n=e.call.apply(e,P()(t=[this]).call(t,a))||this).soundManager=void 0,n.musicManager=void 0,n.isMuteAll=void 0,n.initMusic=function(e){n.musicManager=new $(n.game,e),n.setMusicVolume(1)},n.initSound=function(){n.soundManager=new se(n.game),n.setSoundVolume(1)},n}(0,r.Z)(t,e);var n=t.prototype;return n.init=function(t){e.prototype.init.call(this,t),this.initSound()},n.importSoundEffectKeys=function(e){this.soundManager.addSoundKeys(e)},n.playSound=function(e,t){try{if(!this.soundManager||this.isMuteAll||!this.game.visibility.isGameVisible())return;if(!this.soundManager.isSoundEnabled())return;this.soundManager.play(e,t)}catch(n){}},n.stopSound=function(e){try{this.soundManager.stop(e)}catch(t){}},n.playMusic=function(e){void 0===e&&(e={});try{if(!this.musicManager||this.isMuteAll||!this.game.visibility.isGameVisible())return;if(!this.musicManager.isMusicEnabled())return;this.musicManager.play("",(0,a.Z)({loop:!0,volume:.2},e))}catch(t){}},n.pauseMusic=function(){try{if(!this.musicManager)return;this.musicManager.pause("")}catch(e){}},n.stopMusic=function(){try{if(!this.musicManager)return;this.musicManager.stop("")}catch(e){}},n.pauseAllSounds=function(){try{if(!this.soundManager)return;this.soundManager.pauseAll()}catch(e){}},n.resumeAllSounds=function(){try{if(!this.soundManager)return;this.soundManager.resumeAll()}catch(e){}},n.setSoundVolume=function(e){try{if(!this.soundManager)return;this.soundManager.setVolume(e)}catch(t){}},n.setMusicVolume=function(e){try{if(!this.musicManager)return;this.musicManager.setVolume(e)}catch(t){}},n.muteAll=function(){this.isMuteAll=!0,this.game.sound.mute=!0},n.unmuteAll=function(){this.isMuteAll=!1,this.game.sound.mute=!1},t}(Phaser.Plugins.BasePlugin),oe=re,ce=n(627),he=n(624),ue="AUTH_TOKEN_REQUEST",le="AUTH_TOKEN_RECEIVED",de=function(e){function t(t,n){var i;return(i=e.call(this,t)||this).payload=void 0,i.name="RequestTokenFail",i.message=t||"Request token fail",i.payload=n||{},i}return(0,r.Z)(t,e),t}((0,W.Z)(Error)),pe=n(640),fe="auth",ge=(0,pe.P1)([function(e){return e[fe].token}],(function(e){return e})),me=(0,pe.P1)([function(e){return e[fe].isRequesting}],(function(e){return e})),ve=function(e){return{type:le,payload:{token:e}}},ye=function(e){function t(){return e.apply(this,arguments)||this}(0,r.Z)(t,e);var n=t.prototype;return n.requestToken=function(){var e=(0,s.Z)(u().mark((function e(){var t;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.game.storage,e.next=3,t.dispatch(function(){var e=(0,s.Z)(u().mark((function e(t,n){var i,a,s,r;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,i=window.game.facebook,a=n(),s=ge(a),!me(a)&&""===s){e.next=7;break}return e.abrupt("return");case 7:return t({type:ue,payload:{}}),e.next=10,i.getPlayerToken();case 10:r=e.sent,t(ve(r)),e.next=25;break;case 14:if(e.prev=14,e.t0=e.catch(0),!(e.t0 instanceof Object&&GameCore.Utils.Object.hasOwn(e.t0,"code"))){e.next=19;break}if("PENDING_REQUEST"!==e.t0.code){e.next=19;break}return e.abrupt("return");case 19:if(t(ve("")),!(e.t0 instanceof Object&&GameCore.Utils.Object.hasOwn(e.t0,"message"))){e.next=24;break}if("string"!==typeof e.t0.message){e.next=24;break}return(0,he.tO)(new Error(e.t0.message)),e.abrupt("return");case 24:(0,he.tO)(new de);case 25:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(t,n){return e.apply(this,arguments)}}());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.getToken=function(){return ge(this.state)},(0,ce.Z)(t,[{key:"state",get:function(){return this.game.storage.getState()}}]),t}(Phaser.Plugins.BasePlugin),Ae=ye,Ee=function(e,t){void 0===t&&(t=1);var n=new Image;n.onload=function(){var e,n;e=this.width*t,n=this.height*t,Math.floor(n/2),Math.floor(e/2)},n.src=e},Te=function(e){function t(){for(var t,n,i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];return(n=e.call.apply(e,P()(t=[this]).call(t,a))||this).width=void 0,n.height=void 0,n.renderOptions=void 0,n.canvas=void 0,n}(0,r.Z)(t,e);var n=t.prototype;return n.preload=function(e){var t=this,n=ie()(e);n.length<1||(n.forEach((function(n){t.scene.load.image(n,e[n])})),this.scene.load.start())},n.capture=function(){var e=(0,s.Z)(u().mark((function e(t){var n,i,a;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.width,i=t.height,a=t.renderOptions,this.width=n,this.height=i,this.renderOptions=a,this.createCanvas(),e.next=7,this.loadImages();case 7:return this.drawObjects(),e.abrupt("return",this.snapshotFrame());case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.createCanvas=function(){this.canvas||(this.canvas=this.game.textures.createCanvas("FrameCaptureCanvas")),this.canvas.clear(),this.canvas.setSize(this.width,this.height)},n.loadImages=function(){var e=[];for(var t in this.renderOptions){var n=this.renderOptions[t],i=n.name,a=n.image,s=n.fallbackWithImage;if(a)if(this.scene.textures.get(i).key!==i&&""!==i){var r=this.loadImage(i,a,s);e.push(r)}}return this.scene.load.start(),c().all(e)},n.loadImage=function(e,t,n){var i=this;return this.scene.load.image(e,t),new(c())((function(t,a){var s=Phaser.Loader.Events.FILE_KEY_COMPLETE+"image-"+e,r=Phaser.Loader.Events.FILE_LOAD_ERROR,o=function e(n){i.scene.load.off(s,e),i.scene.load.off(r,c),t()},c=function c(h){if(h.key===e)if(i.scene.load.off(s,o),i.scene.load.off(r,c),n)t();else{var u=new Error("Load image failed");a(u)}};i.scene.load.on(s,o),i.scene.load.on(r,c)}))},n.drawObjects=function(){for(var e in this.renderOptions){var t=this.renderOptions[e];switch(t.type){case"text":this.drawText(t);break;case"image":this.drawImage(t)}}},n.drawText=function(e){var t=this.canvas.context,n=e.x,i=e.y,a=e.font,s=e.text,r=e.fillStyle,o=e.lineWidth,c=e.textAlign;t.font=a+' "Be Vietnam Pro",nunito,-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Oxygen,Ubuntu,Cantarell,"Fira Sans","Droid Sans","Helvetica Neue",sans-serif',t.fillStyle=r||"#ffffff",o&&(t.lineWidth=o),c&&(t.textAlign=c),t.fillText(s,n,i)},n.drawImage=function(e){var t=this.canvas.context,n=e.x,i=e.y,a=e.name,s=e.frame,r=e.width,o=e.height,c=e.fallbackWithImage,h=this.scene.textures.get(a),u=h.getSourceImage(s);"__MISSING"===h.key&&c&&(u=(h=this.scene.textures.get(c)).getSourceImage()),t.drawImage(u,n,i,r,o)},n.snapshotFrame=function(){var e=this.canvas.getCanvas().toDataURL("image/jpeg",.85);return GameCore.Utils.Valid.isDebugger()&&Ee(e),e},t}(Phaser.Plugins.ScenePlugin),Ce=Te,Se=n(19),be=n.n(Se),Ie=function(e){function t(t,n,i){var a;return(a=e.call(this)||this).game=void 0,a.options=void 0,a.performance=void 0,a.isRunning=!1,a.checkTimer=void 0,a.fpsHistory=void 0,a.start=function(){if(!a.isRunning){a.isRunning=!0;var e=a.options.checkInterval;a.checkTimer=e,a.fpsHistory=[],a.game.events.on(Phaser.Core.Events.POST_STEP,a.onPostStep)}},a.stop=function(){a.isRunning&&(a.isRunning=!1,a.game.events.off(Phaser.Core.Events.POST_STEP,a.onPostStep),a.options.onlyUpdateWhenSwitchScene&&a.checkFps())},a.onPostStep=function(e,t){if(a.checkTimer-=t,!(a.checkTimer>0)){var n=a.options,i=n.checkInterval,s=n.onlyUpdateWhenSwitchScene;a.checkTimer+=i,a.fpsHistory.push(a.game.loop.actualFps),!1===s&&a.fpsHistory.length>=5&&a.checkFps()}},a.game=t,a.options=i,a.performance=n,a}(0,r.Z)(t,e);var n=t.prototype;return n.checkFps=function(){if(0!==this.fpsHistory.length){var e=this.options.autoUpgradeQuality,t=!1;this.isLowFps()?t=this.performance.downgradeGraphicsQuality():e&&this.isHighFps()&&(t=this.performance.upgradeGraphicsQuality()),t&&(this.fpsHistory=[])}},n.getFpsMedian=function(){return Phaser.Math.Median(this.fpsHistory)},n.isLowFps=function(){return this.getFpsMedian()<this.options.fpsThreshold},n.isHighFps=function(){return this.getFpsMedian()>1.2*this.options.fpsThreshold},t}(Phaser.Events.EventEmitter),we=Ie,_e=["pixelRatio","minQuality","maxQuality","qualityAdjustStep","trackingSceneKeys"],xe=function(e){function t(){for(var t,n,i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];return(n=e.call.apply(e,P()(t=[this]).call(t,a))||this).fpsTracker=void 0,n.pixelRatio=void 0,n.minQuality=void 0,n.maxQuality=void 0,n.qualityAdjustStep=void 0,n.trackingSceneKeys=[],n.trackingScene=function(e){var t;if(be()(t=n.trackingSceneKeys).call(t,e)){var i=n.game.scene.getScene(e);i.events.once(Phaser.Scenes.Events.UPDATE,n.fpsTracker.start),i.events.once(Phaser.Scenes.Events.SLEEP,n.fpsTracker.stop)}},n}(0,r.Z)(t,e);var n=t.prototype;return n.configure=function(e){var t=e.pixelRatio,n=e.minQuality,a=e.maxQuality,s=e.qualityAdjustStep,r=e.trackingSceneKeys,o=(0,i.Z)(e,_e);this.pixelRatio=t,this.minQuality=n,this.maxQuality=a,this.qualityAdjustStep=s,this.trackingSceneKeys=r,this.fpsTracker=new we(this.game,this,o)},n.active=function(){this.game.events.on(Phaser.Scenes.Events.WAKE,this.trackingScene),this.game.events.on(Phaser.Scenes.Events.START,this.trackingScene)},n.downgradeGraphicsQuality=function(){var e=this.pixelRatio;if(e<=this.minQuality)return!1;var t=+(e-this.qualityAdjustStep).toFixed(2);return!(t<this.minQuality)&&(this.pixelRatio=t,this.game.world.resize(this.pixelRatio),!0)},n.upgradeGraphicsQuality=function(){var e=this.pixelRatio;if(e>=this.maxQuality)return!1;var t=+(e+this.qualityAdjustStep).toFixed(2);return!(t>this.maxQuality)&&(this.pixelRatio=t,this.game.world.resize(this.pixelRatio),!0)},t}(Phaser.Plugins.BasePlugin),Pe=xe,ke={sound:!0,music:!0,vibrate:!0,vibrate2:!1,language:"en",theme:GameCore.Configs.DefaultTheme,tapToMove:!0,autoHints:!0,autoComplete:!0,drawMode3:!1,leftHanded:!1,backgroundIdx:0,cardFaceIdx:0,cardBackIdx:0,backgroundDesktopIdx:0,cardFaceDesktopIdx:0,cardBackDesktopIdx:0,largeWidthLayout:!1,modifiedOptions:[]},Oe=n(10),Le=n.n(Oe),Re=n(3),Be=n.n(Re),De=ke.sound,Ne=ke.music,Me=ke.vibrate,Ge=ke.vibrate2,Ze=ke.language,Fe=ke.theme,Ue=ke.tapToMove,ze=ke.autoHints,We=ke.autoComplete,Ye=ke.drawMode3,He=ke.backgroundIdx,Ke=ke.cardFaceIdx,je=ke.cardBackIdx,Ve=ke.backgroundDesktopIdx,Je=ke.cardFaceDesktopIdx,Xe=ke.cardBackDesktopIdx,qe=ke.largeWidthLayout,Qe=ke.modifiedOptions,$e=ke.leftHanded,et=function(){function e(e){this.sound=void 0,this.music=void 0,this.vibrate=void 0,this.vibrate2=void 0,this.language=void 0,this.theme=void 0,this.tapToMove=void 0,this.autoHints=void 0,this.autoComplete=void 0,this.drawMode3=void 0,this.leftHanded=void 0,this.backgroundIdx=void 0,this.cardFaceIdx=void 0,this.cardBackIdx=void 0,this.backgroundDesktopIdx=void 0,this.cardFaceDesktopIdx=void 0,this.cardBackDesktopIdx=void 0,this.largeWidthLayout=void 0,this.modifiedOptions=void 0;var t=e||{},n=t.sound,i=t.music,a=t.vibrate,s=t.vibrate2,r=t.language,o=t.theme,c=t.tapToMove,h=t.autoHints,u=t.autoComplete,l=t.drawMode3,d=t.backgroundIdx,p=t.cardFaceIdx,f=t.cardBackIdx,g=t.backgroundDesktopIdx,m=t.cardFaceDesktopIdx,v=t.cardBackDesktopIdx,y=t.largeWidthLayout,A=t.modifiedOptions,E=t.leftHanded;this.sound=GameCore.Utils.Valid.isBoolean(n)?n:De,this.music=GameCore.Utils.Valid.isBoolean(i)?i:Ne,this.vibrate=GameCore.Utils.Valid.isBoolean(a)?a:Me,this.vibrate2=GameCore.Utils.Valid.isBoolean(s)?s:Ge,this.language=GameCore.Utils.Valid.isString(r)?r:Ze,this.theme=GameCore.Utils.Valid.isString(o)?o:Fe,this.tapToMove=GameCore.Utils.Valid.isBoolean(c)?c:Ue,this.autoHints=GameCore.Utils.Valid.isBoolean(h)?h:ze,this.autoComplete=GameCore.Utils.Valid.isBoolean(u)?u:We,this.drawMode3=GameCore.Utils.Valid.isBoolean(l)?l:Ye,this.leftHanded=GameCore.Utils.Valid.isBoolean(E)?E:$e,this.backgroundIdx=GameCore.Utils.Valid.isNumber(d)?d:He,this.cardFaceIdx=GameCore.Utils.Valid.isNumber(p)?p:Ke,this.cardBackIdx=GameCore.Utils.Valid.isNumber(f)?f:je,this.backgroundDesktopIdx=GameCore.Utils.Valid.isNumber(g)?g:Ve,this.cardFaceDesktopIdx=GameCore.Utils.Valid.isNumber(m)?m:Je,this.cardBackDesktopIdx=GameCore.Utils.Valid.isNumber(v)?v:Xe,this.modifiedOptions=Array.isArray(A)?A:Qe,this.largeWidthLayout=GameCore.Utils.Valid.isBoolean(y)?y:qe}return e.prototype.toObject=function(){return{sound:this.sound,music:this.music,vibrate:this.vibrate,vibrate2:this.vibrate2,language:this.language,theme:this.theme,tapToMove:this.tapToMove,autoHints:this.autoHints,autoComplete:this.autoComplete,drawMode3:this.drawMode3,backgroundIdx:this.backgroundIdx,cardFaceIdx:this.cardFaceIdx,cardBackIdx:this.cardBackIdx,backgroundDesktopIdx:this.backgroundDesktopIdx,cardFaceDesktopIdx:this.cardFaceDesktopIdx,cardBackDesktopIdx:this.cardBackDesktopIdx,largeWidthLayout:this.largeWidthLayout,modifiedOptions:this.modifiedOptions,leftHanded:this.leftHanded}},e}(),tt=et,nt=GameCore.Utils,it=nt.Valid,at=nt.Object,st=function(){function e(e){this.score=void 0,this.settings=void 0,this.gameData=void 0,this.userGuideDisplays=void 0,this.setupDefaultData(),this.updateScore(e),this.updateSettings(e),this.updateGameData(e),this.updateUserGuideDisplays(e)}var t=e.prototype;return t.setupDefaultData=function(){this.score=0,this.settings=(0,a.Z)({},ke),this.gameData={coins:0,diamond:0,lastReceiveGift:0,dailyRewarded:{lastRewarded:0,logDays:[]},dailyTasks:{startedTime:0,logTasks:{}},countItems:{undoCount:5,hintCount:5,lastTimeUpdate:0},game_stats:{},tournaments:[],journeyLevel:1,journeyLevel2:1,numberOfTrophy:0,journeySeason:"journey-season-1",dailyNotificationLastSent:0},this.userGuideDisplays=0},t.updateScore=function(e){var t=e.score;!1!==it.isNumber(t)&&(this.score=t)},t.updateSettings=function(e){var t=e.settings;if(!1!==it.isObject(t)){var n=new tt(t).toObject();this.settings=n}},t.updateGameData=function(e){var t=e.gameData;if(!1!==it.isObject(t)){if(at.hasOwn(t,"coins")&&it.isNumber(t.coins)&&(this.gameData.coins=t.coins),at.hasOwn(t,"diamond")&&it.isNumber(t.diamond)&&(this.gameData.diamond=t.diamond),at.hasOwn(t,"lastReceiveGift")&&it.isNumber(t.lastReceiveGift)&&(this.gameData.lastReceiveGift=t.lastReceiveGift),at.hasOwn(t,"dailyRewarded")&&it.isObject(t.dailyRewarded)){var n=t.dailyRewarded;at.hasOwn(n,"lastRewarded")&&it.isNumber(n.lastRewarded)&&(this.gameData.dailyRewarded.lastRewarded=n.lastRewarded),at.hasOwn(n,"logDays")&&Array.isArray(n.logDays)&&(this.gameData.dailyRewarded.logDays=n.logDays)}if(at.hasOwn(t,"dailyTasks")&&it.isObject(t.dailyTasks)){var i=t.dailyTasks;at.hasOwn(i,"startedTime")&&it.isNumber(i.startedTime)&&(this.gameData.dailyTasks.startedTime=i.startedTime),at.hasOwn(i,"logTasks")&&it.isObject(i.logTasks)&&(this.gameData.dailyTasks.logTasks=i.logTasks)}if(at.hasOwn(t,"journeyLevel")&&it.isNumber(t.journeyLevel)&&(this.gameData.journeyLevel=t.journeyLevel),at.hasOwn(t,"journeyLevel2")&&it.isNumber(t.journeyLevel2)&&(this.gameData.journeyLevel2=t.journeyLevel2),at.hasOwn(t,"journeySeason")&&it.isString(t.journeySeason)&&(this.gameData.journeySeason=t.journeySeason),at.hasOwn(t,"numberOfTrophy")&&it.isNumber(t.numberOfTrophy)&&(this.gameData.numberOfTrophy=t.numberOfTrophy),at.hasOwn(t,"countItems")&&it.isObject(t.countItems)){var a=t.countItems;at.hasOwn(a,"undoCount")&&it.isNumber(a.undoCount)&&(this.gameData.countItems.undoCount=a.undoCount),at.hasOwn(a,"hintCount")&&it.isNumber(a.hintCount)&&(this.gameData.countItems.hintCount=a.hintCount),at.hasOwn(a,"lastTimeUpdate")&&it.isNumber(a.lastTimeUpdate)&&(this.gameData.countItems.lastTimeUpdate=a.lastTimeUpdate)}at.hasOwn(t,"game_stats")&&it.isObject(t.game_stats)&&(this.gameData.game_stats=t.game_stats),at.hasOwn(t,"tournaments")&&Array.isArray(t.tournaments)&&(this.gameData.tournaments=t.tournaments),at.hasOwn(t,"dailyNotificationLastSent")&&it.isNumber(t.dailyNotificationLastSent)&&(this.gameData.dailyNotificationLastSent=t.dailyNotificationLastSent)}},t.updateUserGuideDisplays=function(e){var t=e.userGuideDisplays;!1!==it.isNumber(t)&&(this.userGuideDisplays=t)},t.toObject=function(){return{score:this.score,settings:this.settings,gameData:this.gameData,userGuideDisplays:this.userGuideDisplays}},t.convertToPlayerData=function(){var e=this.gameData,t=e.coins,n=e.diamond,i=e.dailyTasks,a=e.dailyRewarded,s=e.lastReceiveGift,r=e.countItems,o=e.game_stats,c=e.tournaments,h=e.journeyLevel,u=e.journeyLevel2,l=e.numberOfTrophy,d=e.journeySeason,p=e.dailyNotificationLastSent;return{score:this.score,settings:this.settings,customFields:{coins:t,diamond:n,dailyTasks:i,dailyRewarded:a,lastReceiveGift:s,countItems:r,game_stats:o,tournaments:c,journeyLevel:h,journeyLevel2:u,numberOfTrophy:l,journeySeason:d,dailyNotificationLastSent:p},userGuideDisplays:this.userGuideDisplays}},t.convertToFacebookData=function(e){var t=e.score,n=e.settings,i=e.customFields,a=e.userGuideDisplays;return this.updateScore({score:t}),this.updateSettings({settings:n}),this.updateGameData({gameData:i}),this.updateUserGuideDisplays({userGuideDisplays:a}),this.toObject()},e}(),rt=n(641),ot=GameCore.Configs.ApiHost,ct=function(){var e=(0,s.Z)(u().mark((function e(t){var n;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,rt.v)("players?platform=ms-games",t,{},ot,10);case 2:return n=e.sent,e.abrupt("return",(null==n?void 0:n.data)||{});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ht=function(){var e=(0,s.Z)(u().mark((function e(t){var n;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,rt.v)("players/"+t+"/user-guide-displays/inc",{},{},ot);case 2:return n=e.sent,e.abrupt("return",(null==n?void 0:n.data)||{});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ut="PLAYER_RECEIVED",lt="PLAYER_DATA_UPDATE",dt="PLAYER_SCORE_UPDATE",pt="PLAYER_PROFILE_UPDATE",ft="PLAYER_SETTING_UPDATE",gt="PLAYER_CONNECTED_PLAYERS_UPDATE",mt=n(633),vt=function(e){function t(t,n){var i;return(i=e.call(this,t)||this).payload=void 0,i.name="PlayerDataNameNotSupport",i.message=t||"The name of player data is not supported",i.payload=n||{},i}return(0,r.Z)(t,e),t}((0,W.Z)(Error)),yt="player",At=(0,pe.P1)([function(e){return e[yt]}],(function(e){return e})),Et=(0,pe.P1)([At],(function(e){return e.playerId})),Tt=(0,pe.P1)([At],(function(e){return e.ASID})),Ct=(0,pe.P1)([function(e){return e[yt].data}],(function(e){return e})),St=((0,pe.P1)([Ct],(function(e){return e.settings})),(0,pe.P1)([function(e){return e[yt].connectedPlayers}],(function(e){return e}))),bt=(0,pe.P1)([St,function(e,t){return t.limit},function(e,t){return t.offset}],(function(e,t,n){if("number"!==typeof t)return[];if("number"!==typeof n)return[];var i=ie()(e);return T()(i).call(i,n,t+n)||[]})),It=(0,pe.P1)([Ct],(function(e){return e.score})),wt=(0,pe.P1)([Ct],(function(e){return e.customFields})),_t=(0,pe.P1)([wt],(function(e){return void 0===(null==e?void 0:e.tournaments)?[]:e.tournaments})),xt=GameCore.Configs,Pt=xt.AppId,kt=xt.Tutorial,Ot=function(e,t){return function(n){var i=e.playerId,a=e.name,s=e.photo,r=e.locale;n({type:ut,payload:{playerId:i,name:a,photo:s,locale:r,data:t||{}}})}},Lt=function(e){return{type:gt,payload:{connectedPlayers:e}}},Rt=function(e,t){return function(){var n=(0,s.Z)(u().mark((function n(i,a){var s,r,o;return u().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,i({type:ft,payload:{name:e,value:t}});case 3:s=a(),r=Ct(s),o=new st({}).convertToFacebookData(r),FBInstant.player.setDataAsync(o),n.next=13;break;case 10:n.prev=10,n.t0=n.catch(0),(0,he.tO)(n.t0);case 13:case"end":return n.stop()}}),n,null,[[0,10]])})));return function(e,t){return n.apply(this,arguments)}}()},Bt=function(e,t){return function(){var n=(0,s.Z)(u().mark((function n(i,a){var s,r,o,c,h;return u().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,r={customFields:(s={},s[e]=t,s)},n.next=4,i(Nt(r));case 4:o=a(),c=Ct(o),h=new st({}).convertToFacebookData(c),FBInstant.player.setDataAsync(h),n.next=15;break;case 10:if(n.prev=10,n.t0=n.catch(0),!(n.t0 instanceof vt)){n.next=14;break}return n.abrupt("return");case 14:(0,he.tO)(n.t0);case 15:case"end":return n.stop()}}),n,null,[[0,10]])})));return function(e,t){return n.apply(this,arguments)}}()},Dt=function(e){return function(){var t=(0,s.Z)(u().mark((function t(n,i){var a,s,r,o;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a={customFields:e},t.next=4,n(Nt(a));case 4:s=i(),r=Ct(s),o=new st({}).convertToFacebookData(r),FBInstant.player.setDataAsync(o),t.next=16;break;case 10:if(t.prev=10,t.t0=t.catch(0),!(t.t0 instanceof vt)){t.next=15;break}return t.abrupt("return");case 15:(0,he.tO)(t.t0);case 16:case"end":return t.stop()}}),t,null,[[0,10]])})));return function(e,n){return t.apply(this,arguments)}}()},Nt=function(e){return{type:lt,payload:{data:e}}},Mt=function(e){return function(){var t=(0,s.Z)(u().mark((function t(n,i){var a,s,r;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,n({type:dt,payload:{score:e}});case 3:ct({score:e}),a=i(),s=Ct(a),r=new st({}).convertToFacebookData(s),FBInstant.player.setDataAsync(r),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(0),(0,he.tO)(t.t0);case 13:case"end":return t.stop()}}),t,null,[[0,10]])})));return function(e,n){return t.apply(this,arguments)}}()},Gt=function(e){function t(){return e.apply(this,arguments)||this}(0,r.Z)(t,e);var n=t.prototype;return n.incUserGuideDisplays=function(){var e=(0,s.Z)(u().mark((function e(){var t;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.game.storage,e.next=3,t.dispatch(function(){var e=(0,s.Z)(u().mark((function e(t,n){var i,a,s,r;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!kt.ForceUseTutorial){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,t(Nt({userGuideDisplays:1}));case 5:i=n(),a=Et(i),s=Ct(i),r=new st({}).convertToFacebookData(s),FBInstant.player.setDataAsync(r),ht(a),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),(0,he.tO)(e.t0);case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t,n){return e.apply(this,arguments)}}());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.receiveData=function(){var e=(0,s.Z)(u().mark((function e(t,n){var i;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=this.game.storage,e.next=3,i.dispatch(Ot(t,n));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}(),n.updateData=function(){var e=(0,s.Z)(u().mark((function e(){var t;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.game.storage,e.next=3,t.dispatch(function(){var e=(0,s.Z)(u().mark((function e(t,n){var i,a,s,r,o,c,h,l;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,i=n(),a=At(i),s=a.playerId,r=a.name,o=a.photo,c=a.locale,e.next=6,FBInstant.player.getASIDAsync();case 6:return h=e.sent,l={appId:Pt,playerId:s,name:r,photo:o,locale:c,ASID:h},e.next=10,t({type:pt,payload:{profile:l}});case 10:return e.next=12,ct(l);case 12:e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),(0,he.tO)(e.t0);case 17:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(t,n){return e.apply(this,arguments)}}());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.setBestScore=function(){var e=(0,s.Z)(u().mark((function e(t){var n;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.game.storage,e.next=3,n.dispatch(Mt(t));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.setSetting=function(){var e=(0,s.Z)(u().mark((function e(t,n){var i;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=this.game.storage,e.next=3,i.dispatch(Rt(t,n));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}(),n.setCustomData=function(){var e=(0,s.Z)(u().mark((function e(t,n){var i;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=this.game.storage,e.next=3,i.dispatch(Bt(t,n));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}(),n.setMultiCustomData=function(){var e=(0,s.Z)(u().mark((function e(t){var n;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.game.storage,e.next=3,n.dispatch(Dt(t));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.requestConnectedPlayers=function(){var e=(0,s.Z)(u().mark((function e(){var t;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.game.storage,e.next=3,t.dispatch(function(){var e=(0,s.Z)(u().mark((function e(t){var n,i,a,s;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,FBInstant.player.getConnectedPlayersAsync();case 3:if(i=e.sent,a=function(e){return!!e},s=Le()(n=Be()(i).call(i,(function(e){var t=e.getID(),n=e.getName(),i=e.getPhoto();return t&&n&&i?new mt.Z(t,n,i).toObject():null}))).call(n,a),!(s.length<1)){e.next=8;break}return e.abrupt("return");case 8:t(Lt(s)),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),(0,he.tO)(e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t){return e.apply(this,arguments)}}());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.updateConnectedPlayers=function(){var e=(0,s.Z)(u().mark((function e(t){var n;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.game.storage,e.next=3,n.dispatch(Lt(t));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.joinTournament=function(){var e=(0,s.Z)(u().mark((function e(t){var n,i,a;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=this.getTournaments(),!R()(i).call(i,(function(e){return e.leaderboardId===t.leaderboardId}))){e.next=3;break}return e.abrupt("return");case 3:return a=P()(n=[]).call(n,i,[t]),e.next=6,this.setMultiCustomData({tournaments:a});case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.getPlayer=function(){return At(this.state)},n.getPlayerId=function(){return this.getPlayer().playerId},n.getPlayerASID=function(){return Tt(this.state)},n.getPlayerData=function(){return this.getPlayer().data},n.getPlayerSetting=function(e){var t=this.getPlayerSettings();return"string"!==typeof e?null:GameCore.Utils.Object.hasOwn(t,e)?t[e]:GameCore.Utils.Object.hasOwn(ke,e)?ke[e]:null},n.getPlayerSettings=function(){return this.getPlayerData().settings},n.getPlayerIsNew=function(){return this.getPlayer().isUserNew},n.getDiamond=function(){var e=this.getCustomData("diamond");return GameCore.Utils.Valid.isNumber(e)?e:0},n.getJourneyLevel=function(){var e=this.getCustomData("journeyLevel");return GameCore.Utils.Valid.isNumber(e)?e:1},n.getJourneyLevel2=function(){var e=this.getCustomData("journeyLevel2");return GameCore.Utils.Valid.isNumber(e)?e:1},n.getNumberOfTrophy=function(){var e=this.getCustomData("numberOfTrophy");return GameCore.Utils.Valid.isNumber(e)?e:0},n.getPlayingJourneySeason=function(){var e=this.game.player.getCustomData("journeySeason");return GameCore.Utils.Valid.isString(e)?e:"journey-season-1"},n.getBestScore=function(){return It(this.state)},n.getCustomData=function(e){var t=wt(this.state);return GameCore.Utils.Valid.isObject(t)&&GameCore.Utils.Object.hasOwn(t,e)?t[e]:null},n.getConnectedPlayers=function(){return St(this.state)},n.getConnectedPlayerIds=function(e,t){return bt(this.state,{limit:e,offset:t})},n.getTournaments=function(){return _t(this.state)},n.getCountItems=function(){return this.getCustomData("countItems")},(0,ce.Z)(t,[{key:"state",get:function(){return this.game.storage.getState()}}]),t}(Phaser.Plugins.BasePlugin),Zt=Gt,Ft=n(35),Ut=n.n(Ft),zt=GameCore.Configs.ApiHost,Wt=function(){var e=(0,s.Z)(u().mark((function e(t){var n,i;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=GameCore.Utils.String.params(t),e.next=3,(0,rt.U)("players?"+n,{},zt);case 3:return i=e.sent,e.abrupt("return",(null==i?void 0:i.data)||[]);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Yt="PROFILES_DATA_UPDATE",Ht="profile",Kt=(0,pe.P1)([function(e){return e[Ht].data}],(function(e){return e})),jt=(0,pe.P1)([function(e){return e[Ht].profileIds}],(function(e){return e})),Vt=GameCore.Configs,Jt=Vt.Tournament,Xt=Vt.LeadersBoard,qt=function(e){return function(){var t=(0,s.Z)(u().mark((function t(n,i){var a,s,r,o,c,h;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,a=i(),s=jt(a),!((r=GameCore.Utils.Array.difference(e,s)).length<1)){t.next=6;break}return t.abrupt("return");case 6:return t.next=8,Wt({playerIds:r});case 8:o=t.sent,Jt.UseMock&&Xt.UseMock&&(o=Be()(c=Ut()(h=new Array(r.length)).call(h,null)).call(c,(function(e,t){var n=t+1;return{playerId:"player-0"+n,name:"MPlayer "+n,photo:"./assets/images/others/avatar.jpg",rank:n,score:Math.floor(17*Math.random()*1e3/n)}}))),n({type:Yt,payload:{data:o}}),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(0),(0,he.tO)(t.t0);case 16:case"end":return t.stop()}}),t,null,[[0,13]])})));return function(e,n){return t.apply(this,arguments)}}()},Qt=function(e){function t(){return e.apply(this,arguments)||this}(0,r.Z)(t,e);var n=t.prototype;return n.requestProfiles=function(){var e=(0,s.Z)(u().mark((function e(t){var n;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.game.storage,e.next=3,n.dispatch(qt(t));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.getProfiles=function(){return Kt(this.state)},(0,ce.Z)(t,[{key:"state",get:function(){return this.game.storage.getState()}}]),t}(Phaser.Plugins.BasePlugin),$t=Qt,en=n(21),tn=n.n(en),nn=n(182),an=n.n(nn),sn=["player","match"],rn="null",on=GameCore.Utils,cn=on.Valid,hn=on.Object,un=GameCore.Configs.Rollbar,ln=un.UseMockup,dn=un.FilterError,pn=function(e){function t(){for(var t,n,a=arguments.length,s=new Array(a),r=0;r<a;r++)s[r]=arguments[r];return(n=e.call.apply(e,P()(t=[this]).call(t,s))||this).enable=void 0,n.rollbar=void 0,n.events=[],n.beforeSend=function(e,t,i){ln&&n.showPopupError(i)},n.checkIgnore=function(e,t,i){try{return!!n.isErrorIgnore(t)}catch(a){return!1}},n.showPopupError=function(e){var t,i,a,s,r,o=null==e||null==(t=e.body)||null==(i=t.trace)?void 0:i.exception;o&&n.events.push(o);var c=(null==e||null==(a=e.body)||null==(s=a.trace)?void 0:s.frames)||[];(r=n.events).push.apply(r,c);var h=document.getElementById("popup-error");h||((h=document.createElement("div")).id="popup-error",document.body.appendChild(h)),h.innerHTML='<div style="color: #fff; display: flex; flex-flow: column; align-items: center; ">\n      <pre id="json" style="overflow: auto; background-color: rgb(195 112 97 / 80%); padding: 10px; max-height: 80vh; max-width: 90vw; border: 5px solid #545454;">'+D()(n.events,null,2)+'</pre>\n      <button id="close" style="cursor: pointer; padding: 10px 20px; border-radius: 100px;">Close</button>\n      </div>',h.style="top: 0px; z-index: 10000; width: 100vw; max-height: 100vh; position: absolute; display: flex; align-items: center; justify-content: center;";var u=document.getElementById("close");u&&(u.onclick=n.closePopup)},n.closePopup=function(){n.events=[{}];var e=document.getElementById("popup-error");null==e||e.remove()},n.isNoneErrorEvent=function(e){if(!e||0===e.length)return!1;if(!e[0].message)return!1;return"Non-Error promise rejection captured with keys: code, message"===e[0].message},n.isErrorIgnore=function(e){if(!e||0===e.length)return!1;var t=!1,i=e[0];return i instanceof Object&&(t=n.isIgnoreByCode(i)||n.isIgnoreByMessage(i)),t},n.isIgnoreByCode=function(e){if(hn.hasOwn(e,"code")){var t=e.code,n=dn.Codes,i=n.accepted,a=n.ignored;if("string"===typeof t){if(tn()(i).call(i,t)>=0)return!1;if(tn()(a).call(a,t)>=0)return!0}}if(hn.hasOwn(e,"name")){var s=e.name,r=dn.Codes,o=r.accepted,c=r.ignored;if("string"===typeof s){if(tn()(o).call(o,s)>=0)return!1;if(tn()(c).call(c,s)>=0)return!0}}return!1},n.isIgnoreByMessage=function(e){if(hn.hasOwn(e,"message")){var t=e.message,n=dn.Messages,i=n.accepted,a=n.ignored;if("string"===typeof t){if(tn()(i).call(i,t)>=0)return!1;if(tn()(a).call(a,t)>=0)return!0}}return!1},n.addExtraState=function(){try{if(!hn.hasOwn(window,"game"))return;if(!hn.hasOwn(window.game,"storage"))return;if(!hn.hasOwn(window.game.storage,"getState"))return;var e=(0,window.game.storage.getState)()||{},t=e.player,a=e.match,s=(0,i.Z)(e,sn);n.rollbar.configure({payload:{player:t,match:a,other:s}})}catch(r){}},n}(0,r.Z)(t,e);var n=t.prototype;return n.setup=function(){this.rollbar=new(an())({accessToken:rn,checkIgnore:this.checkIgnore,onSendCallback:this.beforeSend,captureUncaught:!0,scrubTelemetryInputs:!0,captureUnhandledRejections:!0,autoInstrument:{dom:!1,navigation:!1},payload:{environment:"production",client:{javascript:{code_version:"2"}},server:{root:"webpack:///./",branch:"master"}}}),this.enable=!0,this.sendTestException()},n.configure=function(e){this.rollbar&&this.rollbar.configure(e)},n.sendTestException=function(){if(!cn.isDebugger()){var e=FBInstant.player.getID();e&&this.rollbar.debug(new Error("Test rollbar"),{playerID:e})}},n.sendException=function(e,t){e&&this.enable&&this.rollbar&&(this.addExtraState(),this.rollbar.error(e,t))},t}(Phaser.Plugins.BasePlugin),fn=pn,gn=n(644),mn=function(e){function t(){return e.apply(this,arguments)||this}return(0,r.Z)(t,e),t.prototype.emit=function(t,n){return e.prototype.emit.call(this,t,n)},t}(Phaser.Events.EventEmitter),vn=mn,yn=n(630),An=n(643),En=n(642),Tn=function(e){function t(t,n,i,a){var s;(s=e.call(this,t)||this).zone=void 0,s.background=void 0,s.setName(n),s.setVisible(!1);var r=s.scene.world.getWorldSize(),o=r.width,c=r.height;return s.setSize(i||o,a||c),s.addZone(),s.addBackground(),En.Z.registerObject(s.background),s}(0,r.Z)(t,e);var n=t.prototype;return n.open=function(e){GameCore.Utils.Valid.isObject(e)&&(this.setDataEnabled(),this.setData(e)),this.setBlockInputOutsideEnabled(!0),this.scene.screen.screensLayer.bringToTop(this),this.visible||(this.setVisible(!0),this.logPageviewOnOpen(),this.logEventOpen())},n.close=function(){this.visible&&(this.setVisible(!1),this.logPageviewOnClose())},n.incY=function(e){this.y+=e,this.background.y-=e},n.incX=function(e){this.x+=e,this.background.x-=e},n.incScale=function(e){this.scale+=e,this.background.scale-=e^e*(100/e)},n.setBlockInputOutsideEnabled=function(e){this.scene.input.setTopOnly(e)},n.addZone=function(){this.zone=this.scene.add.zone(0,0,this.width,this.height),this.zone.setInteractive({}),this.add(this.zone)},n.addBackground=function(){this.background=this.scene.add.image(0,0,An.Z.GAMEPLAY_DEFAULT.KEY,"blank"),this.background.setWorldSize(this.width,this.height),this.add(this.background)},n.handleResize=function(){var e=this.scene.world.getWorldSize(),t=e.width,n=e.height;this.setSize(t,n).setPosition(t/2,n/2),this.zone.setSize(this.width,this.height),this.background.setDisplaySize(this.width,this.height)},n.logPageviewOnOpen=function(){this.scene.analytics.pageview(this.name)},n.logPageviewOnClose=function(){this.scene.analytics.pageview(this.scene.scene.key)},n.logEventOpen=function(){this.scene.analytics.event(yn._.SCREEN_OPEN,{screen_name:this.getScreenName()})},n.getScreenName=function(){return GameCore.Utils.String.toUpperCamelCase(this.name.toLowerCase())},t}(Phaser.GameObjects.Container),Cn=Tn,Sn={OPEN:"open",CLOSE:"close",CREATED:"created"};GameCore.Screen=Cn,GameCore.Screens={Events:Sn};var bn=function(e){function t(){for(var t,n,i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];return(n=e.call.apply(e,P()(t=[this]).call(t,a))||this).events=void 0,n.screensLayer=void 0,n.screenOpenState={},n}(0,r.Z)(t,e);var n=t.prototype;return n.boot=function(){this.events=new vn,this.registryScreenFactory(),this.screensLayer=this.scene.add.layer(),this.screensLayer.setDepth(gn.Z.POPUP)},n.get=function(e){var t=this.screensLayer.getByName(e);return null===t?null:t},n.add=function(e,t,n,i){var a=this.get(e);return a||(a=this.scene.add.screen(e,t,n,i),this.screensLayer.add(a),this.events.emit(GameCore.Screens.Events.CREATED,a),this.screenOpenState[e]=!1,a)},n.open=function(e,t){var n=this.get(e);return!!n&&(!this.screenOpenState[e]&&(this.screenOpenState[e]=!0,n.open(t),n.emit(GameCore.Screens.Events.OPEN,n),this.events.emit(GameCore.Screens.Events.OPEN,n),!0))},n.close=function(e){var t=this.get(e);return!!t&&(!!this.screenOpenState[e]&&(this.screenOpenState[e]=!1,t.close(),t.emit(GameCore.Screens.Events.CLOSE,t),this.events.emit(GameCore.Screens.Events.CLOSE,t),!0))},n.bringToTop=function(e){var t=this.scene.children.getByName(e);t&&this.scene.children.bringToTop(t)},n.registryScreenFactory=function(){Phaser.GameObjects.GameObjectFactory.register("screen",this.createScreen)},n.createScreen=function(e,t,n,i){var a=new t(this.scene,e,n,i);return Phaser.Display.Align.In.Center(a,this.scene.gameZone),this.existing(a),a},t}(Phaser.Plugins.ScenePlugin),In=bn,wn=n(454),_n=n.n(wn),xn=n(637),Pn=n(639),kn=n(638),On={currentSceneKey:"",prevSceneKey:""};(0,kn.pV)();var Ln,Rn,Bn,Dn,Nn,Mn,Gn,Zn,Fn,Un={processed:!1,contextId:"",contextType:"SOLO",entryPointData:{},currentGameMode:""},zn=Un,Wn={data:{}},Yn={token:"",isRequesting:!1},Hn=((Ln={})[fe]=function(e,t){return void 0===e&&(e=Yn),(0,kn.ZP)(e,(function(e){var n=t.payload;if(n){var i=n.token;switch(t.type){case ue:e.isRequesting=!0;break;case le:e.token=i,e.isRequesting=!1}}}))},Ln),Kn=n(615),jn={ASID:"",playerId:"",name:"",photo:"",locale:"",connectedPlayers:{},data:{score:0,settings:ke,userGuideDisplays:0,customFields:{coins:0,diamond:0,lastReceiveGift:0,dailyRewarded:{lastRewarded:0,logDays:[]},dailyTasks:{startedTime:0,logTasks:{}},game_stats:{},tournaments:[],countItems:{undoCount:5,hintCount:5,lastTimeUpdate:0},journeyLevel:1,journeyLevel2:1,numberOfTrophy:0,journeySeason:"journey-season-1",dailyNotificationLastSent:0}},isUserNew:!0},Vn=((Rn={})[yt]=function(e,t){return void 0===e&&(e=jn),(0,kn.ZP)(e,(function(n){var i=t.payload;if(i){var a=i.name,s=i.value,r=i.data,o=void 0===r?{}:r,c=i.score,h=i.connectedPlayers,u=void 0===h?[]:h,l=i.profile;switch(t.type){case ut:var d=i.playerId,p=i.name,f=i.photo,g=i.locale,m=i.data;if(n.playerId=d,n.name=p,n.photo=f,n.locale=g,GameCore.Utils.Valid.isObject(m)){var v=m;n.data=(0,Kn.TS)(e.data,v)}m.userGuideDisplays>0&&(n.isUserNew=!1);break;case pt:var y=l.playerId,A=l.name,E=l.photo,T=l.locale,C=l.ASID;n.ASID=C,n.playerId=y,n.name=A,n.photo=E,n.locale=T;break;case dt:n.data.score=c;break;case ft:n.data.settings[a]=s;break;case lt:n.data=(0,Kn.TS)(e.data,o),o.userGuideDisplays>0&&(n.isUserNew=!1);break;case gt:if(u.length<=0)break;var S=GameCore.Utils.Object.keyBy(u,"playerId");n.connectedPlayers=(0,Kn.TS)(e.connectedPlayers,S)}}}))},Rn),Jn=n(593),Xn=n.n(Jn),qn={data:{},profileIds:[]},Qn=((Bn={})[Ht]=function(e,t){return void 0===e&&(e=qn),(0,kn.ZP)(e,(function(n){var i=t.payload;if(i){var s=i.data,r=void 0===s?[]:s;if(t.type===Yt){var o,c,h=GameCore.Utils.Object.keyBy(r,"playerId"),u=ie()(h);n.data=(0,Kn.TS)((0,a.Z)({},e.data),h),n.profileIds=P()(o=[]).call(o,new(Xn())(P()(c=[]).call(c,e.profileIds,u)))}}}))},Bn),$n="match",ei="MATCH_GAMEPLAY_INITIALIZE",ti="MATCH_GAMEPLAY_START",ni="MATCH_GAMEPLAY_FINISH",ii="MATCH_GAMEPLAY_UPDATE",ai="MATCH_STATS_DATA_CLEAR",si="MATCH_STATS_DATA_UPDATE",ri="MATCH_STATS_CURRENT_UPDATE",oi="MATCH_SINGLE_CREATE_REQUEST",ci="MATCH_SINGLE_DETAIL_REQUEST",hi="MATCH_SINGLE_DATA_RECEIVED",ui="MATCH_SINGLE_DATA_CLEAR",li="MATCH_CHALLENGE_JOIN_REQUEST",di="MATCH_CHALLENGE_CREATE_REQUEST",pi="MATCH_CHALLENGE_FINISH_REQUEST",fi="MATCH_CHALLENGE_CONTINUE_REQUEST",gi="MATCH_CHALLENGE_DATA_RECEIVED",mi="MATCH_CHALLENGE_DATA_CLEAR",vi="MATCH_GROUP_CREATE_REQUEST",yi="MATCH_GROUP_FINISH_REQUEST",Ai="MATCH_ONLINE_CREATE_REQUEST",Ei="MATCH_ONLINE_DATA_RECEIVED",Ti="open",Ci="active",Si="finished",bi={mode:"",status:Ti,rescued:0,startAt:0,finishAt:0},Ii={single:{_id:"",data:{fen:""},playerId:"",status:Ti},group:{status:Ti,opponentInfo:{playerId:"",name:"",photo:""}},challenge:{_id:"",status:Ti,whitePlayerId:"",blackPlayerId:"",opponentInfo:{playerId:"",name:"",photo:""}},online:{_id:"",status:Ti,players:{}},updateAt:0,isRequesting:!1},wi={current:{updateAt:0},data:{updateAt:0},isRequesting:!1},_i=((Dn={})[$n]=(0,xn.UY)({gameplay:function(e,t){return void 0===e&&(e=bi),(0,kn.ZP)(e,(function(n){var i=t.payload;if(i){var a=i.mode,s=i.status;switch(t.type){case ei:n.status=Ti,n.mode=bi.mode,n.rescued=bi.rescued,n.startAt=bi.startAt,n.finishAt=bi.finishAt,n.opponentInfo=bi.opponentInfo;break;case ti:n.mode=a,n.status=Ci,n.rescued=bi.rescued,n.startAt=Date.now();break;case ii:n.mode="string"===typeof a?a:e.mode,n.status=s||e.status;break;case ni:n.status=Si,n.finishAt=Date.now();break;case"MATCH_GAMEPLAY_RESCUE":n.rescued+=1}}}))},match:function(e,t){return void 0===e&&(e=Ii),(0,kn.ZP)(e,(function(n){var i=t.payload;if(i){var s=i.match,r=i.opponentInfo,o=i.players;switch(t.type){case oi:case ci:case li:case pi:case Ai:n.isRequesting=!0;break;case"MATCH_SINGLE_MOVE_UPDATED":n.single=(0,a.Z)({},e.single,s),n.updateAt=Date.now();break;case hi:n.isRequesting=!1,n.single=s||Ii.single;break;case ui:n.isRequesting=!1,n.single=Ii.single;break;case di:case fi:n.isRequesting=!0,n.challenge.opponentInfo=r;break;case gi:n.isRequesting=!1,n.challenge=(0,a.Z)({},s||Ii.challenge),n.challenge.opponentInfo=e.challenge.opponentInfo;break;case mi:n.isRequesting=!1,n.challenge=Ii.challenge;break;case vi:n.group.status=Ci,r&&(n.group.opponentInfo=r);break;case yi:n.group.status=Si;break;case"MATCH_ONLINE_DATA_CLEAR":n.online.status=Ii.online.status,n.online.players=Ii.online.players;break;case Ei:n.online.status=Ci,n.online.players=o;break;case"MATCH_ONLINE_FINISH_REQUEST":n.online.status=Si}}}))},stats:function(e,t){return void 0===e&&(e=wi),(0,kn.ZP)(e,(function(n){var i=t.payload;if(i){var s=i.playerId,r=i.stats,o=i.match,c=i.current,h=i.players,u=i.leaders;switch(t.type){case ai:delete n.data[s],n.current=wi.current;break;case"MATCH_STATS_CONTEXT_REQUEST":n.data=wi.data,n.isRequesting=!0;break;case"MATCH_STATS_CONTEXT_RECEIVED":n.data=r,n.isRequesting=!1;break;case si:n.data[s]=r;break;case ri:n.current=(0,Kn.TS)((0,a.Z)({},e.current),r);break;case Ei:ie()(h).forEach((function(e){n.data[e]={score:0}}));break;case"MATCH_ONLINE_STATS_UPDATE":u.forEach((function(e){var t=e.playerId,i=e.score,a=e.rank;n.data[t]={score:i,rank:a}}));break;case gi:var l=o||{},d=l.blackPlayerId,p=l.blackPlayerScore,f=l.whitePlayerId,g=l.whitePlayerScore,m=l.whitePlayerLevel,v=l.blackPlayerLevel;if(!d||!f)break;c&&(n.current=c),n.data[d]={score:p,level:v},n.data[f]={score:g,level:m}}}}))}}),Dn),xi="tournament",Pi="TOURNAMENT_ACTIVE",ki="TOURNAMENT_REQUEST",Oi="TOURNAMENT_RECEIVED",Li={active:!1,tournamentId:null,leaderboardId:null,bestSessionScore:0,isRequesting:!1},Ri=((Nn={})[xi]=function(e,t){return void 0===e&&(e=Li),(0,kn.ZP)(e,(function(n){var i=t.payload;if(i){var a=i.score,s=void 0===a?0:a,r=i.tournamentId,o=i.leaderboardId;switch(t.type){case Pi:n.active=!0,n.tournamentId=r,n.leaderboardId=o;break;case ki:n.isRequesting=!0;break;case Oi:n.isRequesting=!1,s>e.bestSessionScore&&(n.bestSessionScore=s)}}}))},Nn),Bi="leaderboards",Di=n(101),Ni=n.n(Di),Mi=n(80),Gi=n.n(Mi),Zi="LEADERBOARD_DATA_REQUEST",Fi="LEADERBOARD_DATA_UPDATE",Ui="LEADERBOARD_DATA_CLEAR",zi={leaderboardId:"",type:"",limit:0,offset:0,leaders:{},isRequesting:!1},Wi=((Mn={})[Bi]=function(e,t){return void 0===e&&(e=zi),(0,kn.ZP)(e,(function(n){var i=t.payload;if(i){var s=i.leaderboardId,r=i.type,o=i.limit,c=i.offset,h=i.leaders;switch(t.type){case Zi:e.type!==r&&0===c&&(n.leaders=zi.leaders),n.isRequesting=!0,n.leaderboardId=s,n.type=r,n.limit=o,n.offset=c;break;case Fi:if(n.isRequesting=!1,e.type!==r)break;var u=GameCore.Utils.Json.clone((0,a.Z)({},e.leaders,h)),l=Ni()(u),d=Le()(l).call(l,(function(e){return!!e.name&&!!e.photo}));Gi()(d).call(d,(function(e,t){return+t.score-+e.score})),d.forEach((function(t,i){t.rank=i+1,e.leaders[t.playerId]||(n.leaders[t.playerId]=t)}));break;case Ui:n.isRequesting=!1,n.type=zi.type,n.limit=zi.limit,n.offset=zi.offset,n.leaders=zi.leaders,n.leaderboardId=zi.leaderboardId}}}))},Mn),Yi="missions",Hi="MISSIONS_DATA_REQUEST",Ki="MISSIONS_DATA_RECEIVE",ji="MISSION_UPDATE",Vi="MISSION_COMPLETED",Ji={mission:null,missions:null,isRequesting:!1},Xi=((Gn={})[Yi]=function(e,t){return void 0===e&&(e=Ji),(0,kn.ZP)(e,(function(n){var i,a,s=t.payload;if(s){var r=s.name,o=s.type,c=s.value,h=s.missions;switch(t.type){case Hi:n.isRequesting=!0;break;case Ki:if(n.isRequesting=!1,h.length<1)return;n.missions={},h.forEach((function(e){n.missions[e.name]=e}));break;case"MISSION_START":if(null===e.missions)break;var u=e.missions[r];n.mission={name:r,process:{},require:u.require,reward:u.reward},ie()(u.require).forEach((function(e){n.mission.process[e]=0}));break;case ji:if((null==(i=e.mission)?void 0:i.name)!==r)break;n.mission.process[o]+=c;break;case Vi:if((null==(a=e.mission)?void 0:a.name)!==r)break;n.mission=null}}}))},Gn),qi="dailyTasks",Qi="DAILY_TASKS_DATA_REQUEST",$i="DAILY_TASKS_DATA_RECEIVE",ea="DAILY_TASKS_PROCESS_UPDATE",ta="DAILY_TASK_VALUE_ADD",na="DAILY_TASK_FINISHED",ia={tasks:[],process:[],isRequesting:!1,isNotice:!1},aa=((Zn={})[qi]=function(e,t){return void 0===e&&(e=ia),(0,kn.ZP)(e,(function(n){var i=t.payload;if(i){var a=i.id,s=i.type,r=i.value,o=i.tasks,c=i.process;switch(t.type){case Qi:n.isRequesting=!0;break;case $i:n.isRequesting=!1,n.tasks=o;break;case ea:n.process=c;break;case ta:if(!e.process[a])break;n.process[a][s]+=r;break;case"DAILY_TASK_REWARDED":if(!e.process[a])break;n.process[a].rewarded=!0;break;case"DAILY_TASKS_SEEN":n.isNotice=!1;break;case na:n.isNotice=!0}}}))},Zn),sa={rewards:[],isRequesting:!1},ra=((Fn={}).dailyRewards=function(e,t){return void 0===e&&(e=sa),(0,kn.ZP)(e,(function(e){var n=t.payload;if(n){var i=n.rewards;switch(t.type){case"DAILY_REWARDS_REQUEST":e.isRequesting=!0;break;case"DAILY_REWARDS_RECEIVE":e.isRequesting=!1,e.rewards=i}}}))},Fn),oa=(0,xn.UY)((0,a.Z)({scene:function(e,t){return void 0===e&&(e=On),(0,kn.ZP)(e,(function(n){var i=t.payload;if(i){var a=i.sceneKey;if(t.type===Pn.DW)n.currentSceneKey=a,n.prevSceneKey=e.currentSceneKey}}))},context:function(e,t){return void 0===e&&(e=Un),(0,kn.ZP)(e,(function(e){var n=t.payload;if(n){var i=n.gameMode,a=n.contextId,s=n.contextType,r=n.entryPointData;switch(t.type){case Pn.kL:e.contextId=a,e.contextType=s,e.entryPointData=r;break;case Pn.fJ:e.contextId=a,e.contextType=s,e.processed=!0;break;case Pn.EH:e.currentGameMode=i}}}))},messages:function(e,t){return void 0===e&&(e=Wn),(0,kn.ZP)(e,(function(n){var i=t.payload;if(i){var a=i.opponentId;if("string"===typeof a)switch(t.type){case Pn.qj:e.data[a]?n.data[a].sent=!0:n.data[a]={sent:!0};break;case Pn.rh:e.data[a]?n.data[a].sent=!1:n.data[a]={sent:!1}}}}))}},Hn,Vn,Qn,_i,Ri,Wi,Xi,aa,ra)),ca=n(636),ha=function(e){return(0,ca.xC)({reducer:oa,preloadedState:e,devTools:!0})},ua=function(e){function t(){for(var t,n,i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];return(n=e.call.apply(e,P()(t=[this]).call(t,a))||this).store=void 0,n.initiator=void 0,n.dispatch=function(e){return n.store.dispatch(e)},n.getState=function(){return n.store.getState()},n.subscribe=function(e){return n.store.subscribe(e)},n.watch=function(e,t){var i=_n()((function(){var t=n.getState();return e(t)}));return n.subscribe(i((function(e){t(e)})))},n}(0,r.Z)(t,e);var n=t.prototype;return n.init=function(){this.store=ha({})},n.setInitiator=function(e){this.initiator=e},n.syncStore=function(){var e=(0,s.Z)(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.initiator.initContext(),e.next=3,this.initiator.initPlayer();case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.initPlayerManually=function(){var e=(0,s.Z)(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.initiator.initPlayer();case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),t}(Phaser.Plugins.BasePlugin),la=ua,da=n(557),pa=n.n(da),fa=function(e){function t(t,n){var i;return(i=e.call(this,t,{type:"webfont",key:n.type})||this).payload=void 0,i.payload=n,i}(0,r.Z)(t,e);var n=t.prototype;return n.load=function(){var e;switch(this.payload.type){case"google":e=this.getGoogleFontConfig(this.payload);break;case"local":e=this.getLocalFontConfig(this.payload)}pa().load(e)},n.getGoogleFontConfig=function(e){var t=this,n=e.character,i=e.fontName,a=e.fontWeight;return{google:{families:[i+":"+(void 0===a?400:a)],text:n},active:function(){t.loader.nextFile(t,!0)},timeout:15e3}},n.getLocalFontConfig=function(e){var t=this,n=e.fontName,i=e.fontType,a=document.createElement("style");document.head.appendChild(a);var s=a.sheet;if(s){var r="";switch(i){case"opentype":case"woff":r=".woff";break;case"truetype":r=".ttf"}var o='@font-face { font-family: "'+n+'"; src: url("assets/fonts/'+n+r+'") format("'+i+'"); }';s.insertRule(o,0)}return{custom:{families:[n]},active:function(){t.loader.nextFile(t,!0)},timeout:15e3}},t}(Phaser.Loader.File),ga=function(e){function t(){return e.apply(this,arguments)||this}return(0,r.Z)(t,e),t.prototype.addFont=function(e){var t=new fa(this.scene.load,e);this.scene.load.addFile(t)},t}(Phaser.Plugins.ScenePlugin),ma=ga,va=n(620),ya=function(e){function t(){return e.apply(this,arguments)||this}return(0,r.Z)(t,e),t.prototype.emit=function(t){return e.prototype.emit.call(this,t)},t}(Phaser.Events.EventEmitter),Aa=ya,Ea={RESIZE:"resize",CHANGE_LAYOUT:"change-layout"},Ta=function(e){function t(){for(var t,n,i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];return(n=e.call.apply(e,P()(t=[this]).call(t,a))||this).events=void 0,n.previousLayout=void 0,n.resizeEventData=void 0,n.portraitRatio=void 0,n.portraitWidth=void 0,n.portraitHeight=void 0,n.landscapeRatio=void 0,n.landscapeWidth=void 0,n.landscapeHeight=void 0,n.worldWidth=void 0,n.worldHeight=void 0,n.worldRatio=void 0,n.autoResize=void 0,n.disableLandscape=void 0,n.fullSizeOnLandscape=void 0,n.currentLayout=void 0,n.forcePixelRatio=void 0,n.handleResize=(0,va.D)((function(){n.previousLayout=""+n.currentLayout,n.resize(),n.game.events.emit("world-resize")}),300),n}(0,r.Z)(t,e);var n=t.prototype;return n.configure=function(e){this.events=new Aa;var t=e.autoResize,n=e.portraitRatio,i=e.portraitWidth,a=e.portraitHeight,s=e.landscapeWidth,r=e.landscapeHeight,o=e.landscapeRatio,c=e.disableLandscape,h=e.fullSizeOnLandscape;this.autoResize=t,this.disableLandscape=c,this.fullSizeOnLandscape=h,this.portraitRatio=n,this.portraitWidth=i,this.portraitHeight=a,this.landscapeRatio=o,this.landscapeWidth=s,this.landscapeHeight=r,this.initWorldSize(),this.addEventResize()},n.resize=function(e){var t=this;e&&e>0&&(this.forcePixelRatio=e);var n=this.getCanvasSizeFixedRatio(this.worldRatio),i=n.width,a=n.height;this.resizeCanvas(i,a),this.game.scene.scenes.forEach((function(e){var n=e.cameras.main;if(n){var i=t.getZoomRatio(),a=t.getWorldSize(),s=a.width,r=a.height;n.setZoom(i),n.centerOn(s/2,r/2)}}));var s={width:this.worldWidth,height:this.worldHeight,isLayoutChanged:!1,newLayout:this.currentLayout};this.previousLayout!==this.currentLayout&&(s.isLayoutChanged=!0,s.newLayout=this.currentLayout),this.resizeEventData=s,this.events.emit(Ea.RESIZE,s)},n.resizeCanvas=function(e,t){this.game.canvas.width=e,this.game.canvas.height=t,this.game.scale.resize(e,t)},n.getWorldSize=function(){return{width:this.worldWidth,height:this.worldHeight}},n.initWorldSize=function(){if(this.worldWidth=this.portraitWidth,this.worldHeight=this.portraitHeight,this.isScreenSmallerRatio(this.portraitRatio))this.worldHeight=this.worldWidth/this.getScreenRatio();else if(!this.disableLandscape&&!this.isScreenSmallerRatio(this.landscapeRatio)){var e=this.getScreenWidth(),t=this.getScreenHeight();if(this.landscapeRatio=Math.max(Math.min(e/(t-0),2.111111111111111),1.22),this.worldHeight=this.landscapeHeight,this.worldWidth=this.worldHeight*this.landscapeRatio,this.fullSizeOnLandscape){this.worldRatio=this.worldWidth/this.worldHeight,this.landscapeRatio=this.getScreenRatio();var n=this.getCanvasSizeFixedRatio(this.landscapeRatio),i=n.width,a=n.height,s=this.getZoomRatio();this.worldWidth=i/s,this.worldHeight=a/s}}this.worldRatio=this.worldWidth/this.worldHeight},n.getZoomRatio=function(){var e=this.getWorldSize().width;return this.getCanvasSizeFixedRatio(this.worldRatio).width/e},n.getPixelRatio=function(){if(this.forcePixelRatio>0)return this.forcePixelRatio;if(GameCore.Utils.Device.isDesktop())return 2;var e=GameCore.Utils.Device.pixelRatio();return e=e>2.44?2.88:e>2?2:Math.round(e)},n.getPixelRatioForCanvas=function(){var e=GameCore.Utils.Device.pixelRatio();if(this.forcePixelRatio>0&&(e=this.forcePixelRatio),GameCore.Utils.Device.isDesktop())return Math.min(2,1200/(this.getScreenHeight()-0));var t=Math.max(1,e),n=1080/this.getScreenWidth();return t>2&&(t=Math.min(Math.round(2*t)/2,n)),t},n.getPhysicPixels=function(e,t){return e*t},n.getCanvasSizeFixedRatio=function(e){var t=this.getPixelRatioForCanvas(),n=this.getScreenWidth()*t,i=this.getScreenHeight()*t;return this.isLandscape()&&(i=(this.getScreenHeight()-0)*t),this.isScreenSmallerRatio(e)?i=n/e:n=i*e,{width:n,height:i}},n.getScreenRatio=function(){return this.getScreenWidth()/this.getScreenHeight()},n.getScreenHeight=function(){var e=document,t=e.body,n=e.documentElement,i=t.clientHeight,a=n.clientHeight;return Math.max(a,i)||0},n.getScreenWidth=function(){var e=document,t=e.body,n=e.documentElement,i=t.clientWidth,a=n.clientWidth;return Math.max(a,i)||0},n.isScreenSmallerRatio=function(e){var t=this.getScreenWidth(),n=this.getScreenHeight();return GameCore.Utils.Device.isDesktop()?t/(n-0)<e:t/n<e},n.addEventResize=function(){this.autoResize&&window.addEventListener("resize",this.handleResize)},n.isLandscape=function(){return!this.disableLandscape&&this.worldRatio>this.portraitRatio},t}(Phaser.Plugins.BasePlugin),Ca=Ta,Sa=function(){function e(e,t,n){this.contextId=void 0,this.contextType=void 0,this.entryPointData=void 0,this.contextId=e||zn.contextId,this.contextType=t||zn.contextType,this.entryPointData=n||zn.entryPointData}return e.prototype.toObject=function(){return{contextId:this.contextId,contextType:this.contextType,entryPointData:this.entryPointData}},e}(),ba=function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).name="InvalidPlayerId",i.message=t||"The playerId is not valid",i.payload=n,i}return(0,r.Z)(t,e),t}((0,W.Z)(Error)),Ia="share_invite",wa="challenge_friend_match",_a="matching_group_match",xa=n(634),Pa=new mt.Z("10","Your Friend",xa.Z.AVATAR.FILE).toObject(),ka="single",Oa="challenge-friends",La="matching-group",Ra="tournaments",Ba=(0,pe.P1)([function(e){return e.context}],(function(e){return e})),Da=(0,pe.P1)([function(e){return e.context.currentGameMode}],(function(e){return e})),Na=function(e,t){return{type:Pn.fJ,payload:{contextId:e,contextType:t}}},Ma=function(e){return function(t){t({type:Pn.EH,payload:{gameMode:e}}),(0,he.sw)("game-mode",e)}},Ga={score:"score",settings:"settings",gameData:"gameData",userGuideDisplays:"userGuideDisplays"},Za={sound:"sound",music:"music",vibrate:"vibrate",language:"language",theme:"theme",tapToMove:"tapToMove",autoHints:"autoHints",autoComplete:"autoComplete",drawMode3:"drawMode3",largeWidthLayout:"largeWidthLayout",backgroundIdx:"backgroundIdx",cardFaceIdx:"cardFaceIdx",cardBackIdx:"cardBackIdx",backgroundDesktopIdx:"backgroundDesktopIdx",cardFaceDesktopIdx:"cardFaceDesktopIdx",cardBackDesktopIdx:"cardBackDesktopIdx",modifiedOptions:"modifiedOptions"},Fa=GameCore.Configs.SyncProfileFromAPI,Ua=function(e){var t=this;this.game=void 0,this.initContext=function(){var e=window.GameSDK.context.getID(),n=window.GameSDK.context.getType(),i=window.GameSDK.getEntryPointData(),a=new Sa(e,n,i).toObject(),s=a.contextId,r=a.contextType,o=a.entryPointData;t.game.storage.dispatch(function(e,t,n){return{type:Pn.kL,payload:{contextId:e,contextType:t,entryPointData:n}}}(s,r,o))},this.initPlayer=(0,s.Z)(u().mark((function e(){var n,i,a,s,r,o,c,h,l,d,p;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.game.player,i=t.getPlayerInfo(),a=Ni()(Ga),e.next=5,FBInstant.player.getDataAsync(a);case 5:return s=e.sent,r=new st(s),e.next=11,t.maintainDataStructure(r);case 11:return r=e.sent,!0===r.toObject().settings.music&&window.game.audio.playMusic(),o=r.convertToPlayerData(),c=o.settings.modifiedOptions,h=ke.autoComplete,l=ke.tapToMove,d=ke.autoHints,ke.largeWidthLayout,p=ke.vibrate,be()(c).call(c,Za.autoComplete)||(o.settings.autoMoveToFoundation=h),be()(c).call(c,Za.autoHints)||(o.settings.autoHints=d),be()(c).call(c,Za.tapToMove)||(o.settings.tapToMove=l),be()(c).call(c,Za.vibrate)||(o.settings.vibrate=p),o.settings.largeWidthLayout=!1,e.next=24,n.receiveData(i,o);case 24:case"end":return e.stop()}}),e)}))),this.maintainDataStructure=function(){var e=(0,s.Z)(u().mark((function e(t){var n,i,s,r;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,Fa){e.next=3;break}return e.abrupt("return",t);case 3:return e.next=5,FBInstant.player.getDataAsync(["isSynced","customFields"]);case 5:if(e.t0=e.sent,e.t0){e.next=8;break}e.t0={};case 8:if(n=e.t0,!0!==(n.isSynced||!1)){e.next=12;break}return e.abrupt("return",t);case 12:if(i=n.customFields||!1){e.next=15;break}return e.abrupt("return",t);case 15:return(s=t.convertToPlayerData()).customFields=i,r=new st({}).convertToFacebookData(s),e.next=20,FBInstant.player.setDataAsync((0,a.Z)({},r,{isSynced:!0}));case 20:return e.abrupt("return",new st(r));case 23:return e.prev=23,e.t1=e.catch(0),e.abrupt("return",t);case 27:case"end":return e.stop()}}),e,null,[[0,23]])})));return function(t){return e.apply(this,arguments)}}(),this.getPlayerInfo=function(){try{var e=window.GameSDK.player.getID(),t=window.GameSDK.player.getName(),n=window.GameSDK.player.getPhoto(),i=window.GameSDK.getLocale();if(!GameCore.Utils.Valid.isString(e))throw new ba(null,{playerId:e});return GameCore.Utils.Valid.isString(t)||(t="You"),new mt.Z(e,t,n,i).toObject()}catch(a){return new mt.Z("123","You").toObject()}},this.game=e},za=n(645),Wa=GameCore.Ads.Types,Ya=[yn._.BUTTON_CLICK,yn._.SCREEN_OPEN],Ha=function(e){function t(t,n,i){var a;return(a=e.call(this,"FacebookAnalytics",{prefix:n},"#0F52BA")||this).game=void 0,a.game=t,a.selfLog=!!i,a}(0,r.Z)(t,e);var n=t.prototype;return n.processEvent=function(e,t,n){var i;if(!(tn()(Ya).call(Ya,e)>=0)){var a=this.getEventName(e),s={};Be()(i=ie()(t||{})).call(i,(function(e){t&&"string"===typeof t[e]&&(s[e]=t[e])})),FBInstant.logEvent(a,n,s)}},n.processPageView=function(e){},n.processLevelStart=function(e,t,n){this.processEvent(yn._.LEVEL_START,{level:e,score:t,level_name:n})},n.processLevelRescue=function(e,t,n){this.processEvent(yn._.LEVEL_RESCUE,{level:e,score:t,level_name:n})},n.processLevelFail=function(e,t,n){this.processEvent(yn._.LEVEL_END,{level:e,score:t,level_name:n,success:!1})},n.processLevelComplete=function(e,t,n){this.processEvent(yn._.LEVEL_END,{level:e,score:t,level_name:n,success:!0})},n.processLoadInterstitialAd=function(e){var t=this.getEdaType(Wa.INTERSTITIAL);this.processEvent(yn._.AD_LOAD,{ad_type:t,screen_name:""+e})},n.processShowInterstitialAd=function(e){var t=this.getEdaType(Wa.INTERSTITIAL);this.processEvent(yn._.AD_SHOW,{ad_type:t,screen_name:""+e})},n.processLoadRewardedVideoAd=function(e){var t=this.getEdaType(Wa.REWARDED);this.processEvent(yn._.AD_LOAD,{ad_type:t,screen_name:""+e})},n.processShowRewardedVideoAd=function(e){var t=this.getEdaType(Wa.REWARDED);this.processEvent(yn._.AD_SHOW,{ad_type:t,screen_name:""+e})},n.processLoadAdFail=function(e){var t=e.type,n=e.placement,i=this.getEdaType(t);this.processEvent(yn._.AD_LOAD_FAILED,{ad_type:i,screen_name:""+n})},n.processShowAdFail=function(e){var t=e.type,n=e.placement,i=this.getEdaType(t);this.processEvent(yn._.AD_SHOW_FAILED,{ad_type:i,screen_name:""+n})},n.getEventName=function(e){return this.options.prefix+"_"+e},n.getEdaType=function(e){switch(e){case Wa.INTERSTITIAL:return"interstitial";case Wa.REWARDED:return"rewarded_video";case Wa.BANNER:return"banner";case Wa.PRE_ROLL:return"pre_roll";default:return"unknown"}},t}(GameCore.Analytics.BaseAnalytics),Ka=GameCore.Ads.Types,ja=[yn._.SCREEN_OPEN,"button_click","match_start","match_end","scroll"],Va=(function(e){function t(t,n){var i;(i=e.call(this,"GoogleAnalytics",(0,a.Z)({},n),"#E35335")||this).game=void 0,i.trackingId=void 0,i.currentPath="/";var s=n.trackingId;i.game=t;var r=(GameCore.Configs.Analytics.GoogleAnalytics||{}).consoleLog;return i.selfLog=!!r,i.trackingId=s,i}(0,r.Z)(t,e);var n=t.prototype;n.processEvent=function(e,t,n){if(!(tn()(ja).call(ja,e)>=0)){var i=this.formatEventName(e),s=t?(0,a.Z)({},t):{};s=n?(0,a.Z)({},s,{value:n}):s,s=(0,a.Z)({},s,{page_path:this.currentPath,send_to:"GA"}),gtag("event",i,s)}},n.processLevelStart=function(e,t,n){this.processEvent(yn._.LEVEL_START,{level:e,score:t,level_name:n})},n.processLevelRescue=function(e,t,n){this.processEvent(yn._.LEVEL_RESCUE,{level:e,score:t,level_name:n})},n.processLevelFail=function(e,t,n){this.processEvent(yn._.LEVEL_END,{level:e,score:t,level_name:n,success:!1})},n.processLevelComplete=function(e,t,n){this.processEvent(yn._.LEVEL_END,{level:e,score:t,level_name:n,success:!0})},n.processLoadPreRollAd=function(e,t){var n=this.getEdaType(Ka.PRE_ROLL);this.processEvent(yn._.AD_LOAD,{ad_type:n,screen_name:""+e,ad_service:""+t})},n.processShowPreRollAd=function(e,t){var n=this.getEdaType(Ka.PRE_ROLL);this.processEvent(yn._.AD_SHOW,{ad_type:n,screen_name:""+e,ad_service:""+t}),this.processEvent(yn._.AD_IMPRESSION,{ad_format:n})},n.processLoadInterstitialAd=function(e,t){var n=this.getEdaType(Ka.INTERSTITIAL);this.processEvent(yn._.AD_LOAD,{ad_type:n,screen_name:""+e,ad_service:""+t})},n.processShowInterstitialAd=function(e,t){var n=this.getEdaType(Ka.INTERSTITIAL);this.processEvent(yn._.AD_SHOW,{ad_type:n,screen_name:""+e,ad_service:""+t}),this.processEvent(yn._.AD_IMPRESSION,{ad_format:"Interstitial"})},n.processLoadRewardedVideoAd=function(e,t){var n=this.getEdaType(Ka.REWARDED);this.processEvent(yn._.AD_LOAD,{ad_type:n,screen_name:""+e,ad_service:""+t})},n.processShowRewardedVideoAd=function(e,t){var n=this.getEdaType(Ka.REWARDED);this.processEvent(yn._.AD_SHOW,{ad_type:n,screen_name:""+e,ad_service:""+t}),this.processEvent(yn._.AD_IMPRESSION,{ad_format:"Rewarded"})},n.processShowBannerAd=function(e,t,n){var i=this.getEdaType(Ka.BANNER);this.processEvent(yn._.AD_SHOW,{ad_type:i,banner_position:""+e,screen_name:""+t,ad_service:""+n})},n.processLoadAdFail=function(e){var t=e.type,n=e.placement,i=e.adService,a=this.getEdaType(t);this.processEvent(yn._.AD_LOAD_FAILED,{ad_type:a,screen_name:""+n,ad_service:""+i})},n.processShowAdFail=function(e){var t=e.type,n=e.placement,i=e.adService,a=e.bannerPosition,s={ad_type:this.getEdaType(t),screen_name:""+n,ad_service:""+i};t===Ka.BANNER&&(s.banner_position=""+a),this.processEvent(yn._.AD_SHOW_FAILED,s)},n.processPageView=function(e){var t=this.getGameplayMode(),n="/"+t+"/"+e;this.currentPath=n,document.title=this.formatPageTitle(t,e),this.processEvent("page_view")},n.getGameplayMode=function(){var e=this.game.storage.getState();return Da(e)},n.formatEventName=function(e){return e.toLowerCase().replace(/:/g,"_")},n.formatPageTitle=function(e,t){return this.toUpperCamelCaseWithSpace(e)+"::"+this.toUpperCamelCaseWithSpace(t)},n.toUpperCamelCaseWithSpace=function(e){var t=e.replace(/[-_\s.]+(.)?/g,(function(e,t){return t?" "+t.toUpperCase():""}));return t.substr(0,1).toUpperCase()+t.substr(1)},n.getEdaType=function(e){switch(e){case Ka.INTERSTITIAL:return"interstitial";case Ka.PRE_ROLL:return"pre_roll";case Ka.REWARDED:return"rewarded_video";case Ka.BANNER:return"banner";default:return"unknown"}}}(GameCore.Analytics.BaseAnalytics),function(e){function t(){for(var t,n,i=arguments.length,a=new Array(i),r=0;r<i;r++)a[r]=arguments[r];return(n=e.call.apply(e,P()(t=[this]).call(t,a))||this).startGame=(0,s.Z)(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n.auth.requestToken();case 3:return e.next=5,n.storage.syncStore();case 5:return n.configureSentry(),n.configureRollbar(),e.next=9,n.detectGameMode();case 9:n.handleYTAudioSync(),n.initGoogleAnalytics(),n.analytics.event(yn._.LOAD_START),n.scene.launch(za.C.GLOBAL_SCENE),n.scene.start(za.C.LOAD_SCENE),n.analytics.pageview(za.C.LOAD_SCENE),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(0),(0,he.tO)(e.t0);case 20:return e.prev=20,n.facebook.progressLoading.finishLoadingProgressFbBootScene(),n.scene.sleep(za.C.BOOT_SCENE),e.finish(20);case 24:case"end":return e.stop()}}),e,null,[[0,17,20,24]])}))),n}(0,r.Z)(t,e);var n=t.prototype;return n.create=function(){this.facebook.progressLoading.loadingProgressFbBootScene(),this.startGame()},n.configureSentry=function(){var e=this.player.getPlayer();(0,he.Tv)({id:e.playerId,username:e.name})},n.configureRollbar=function(){if(this.rollbar){var e=this.player.getPlayer();this.rollbar.configure({payload:{person:{id:e.playerId,name:e.name}}})}},n.detectGameMode=function(){var e=(0,s.Z)(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.storage.dispatch(function(){var e=(0,s.Z)(u().mark((function e(t,n){var i,a,s,r,o,c,h,l,d,p,f,g,m,v,y,A,E;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n(),s=Ba(a),r=window.game.player,o=r.getPlayerId(),c=s.contextId,h=s.entryPointData,d=(l=h||{}).type,p=l.matchId,f=l.playerId,g=l.opponentId,m=void 0===g?Pa.playerId:g,v=o===f,y=m===Pa.playerId,A=y||be()(i=[m,f]).call(i,o),E=ka,e.prev=10,e.next=13,window.game.facebook.getTournamentAsync();case 13:E=Ra,e.next=18;break;case 16:e.prev=16,e.t0=e.catch(10);case 18:c&&d===Ia&&!v&&(E=Oa),p&&c&&A&&d===wa&&(E=Oa),c&&d===_a&&(E=La),t(Ma(E));case 22:case"end":return e.stop()}}),e,null,[[10,16]])})));return function(t,n){return e.apply(this,arguments)}}());case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.initGoogleAnalytics=function(){},n.initFacebookAnalytics=function(){var e=GameCore.Configs.Analytics.FacebookAnalytics||{},t=e.prefix,n=e.consoleLog;"string"===typeof t&&this.analytics.add(new Ha(this.game,t,n))},n.handleYTAudioSync=function(){var e=window.game.audio;window.GameSDK.isAudioEnabled()||(e.muteAll(),e.pauseAllSounds(),e.pauseMusic())},t}(Phaser.Scene)),Ja=Va,Xa=n(659),qa=function(e){function t(){for(var t,n,i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];return(n=e.call.apply(e,P()(t=[this]).call(t,a))||this).run=function(){n.scene.switch(za.C.GAME_SCENE),n.facebook.attemptToAddShortcut()},n}(0,r.Z)(t,e);var n=t.prototype;return n.preload=function(){this.events.on("wake",this.run),this.events.on("resume",this.run),this.events.on("create",this.run)},n.create=function(){e.prototype.create.call(this)},t}(Xa.Z);var Qa=qa,$a=n(626),es=n(656),ts={targets:[],duration:600,ease:Phaser.Math.Easing.Linear,props:{angle:{from:0,to:360}}},ns=function(e){function t(t){return e.call(this,ts,t)||this}return(0,r.Z)(t,e),t}(es.Z),is=An.Z.GAMEPLAY_DEFAULT,as=is.KEY,ss=is.FRAME,rs=function(e){function t(t){var n;return(n=e.call(this,t,0,0,as,ss.PRELOADER)||this).anim=void 0,n.runAnimation(),n.setWorldSize(56.5,56.5),n.scene.add.existing((0,$a.Z)(n)),n}(0,r.Z)(t,e);var n=t.prototype;return n.runAnimation=function(){var e;null==(e=this.anim)||e.remove(),this.anim=new ns({targets:[this],repeat:-1,duration:1200}),this.anim.play()},n.setVisible=function(t){return e.prototype.setVisible.call(this,t),t?this.runAnimation():this.anim.stop(),this},t}(Phaser.GameObjects.Image),os=rs,cs=n(648),hs=n(646),us=n(663),ls=n(629),ds="global",ps="friend",fs=GameCore.Configs,gs=fs.ApiHost,ms=fs.OtherHost,vs=fs.LeadersBoard,ys=vs.Prefix,As=vs.LeaderboardId,Es=vs.Name,Ts=ys+"/"+As+"/leaders",Cs=ys+"/"+As+"/players",Ss=function(e){var t="";return As?(e===ds?t=Ts:e===ps&&(t=Cs),t):t},bs=function(){var e=(0,s.Z)(u().mark((function e(t){var n,i,s,r,o,c;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Be()(t).call(t,(function(e){return e.playerId})),s=GameCore.Utils.Object.keyBy(t,"playerId"),r=GameCore.Utils.String.params({playerIds:i}),e.next=5,(0,rt.U)("players?"+r,{},gs);case 5:return o=e.sent,c=Be()(n=o.data).call(n,(function(e){var t=s[e.playerId];return(0,a.Z)({},e,{score:t.score,rank:t.rank,getScore:function(){return t.score},getFormattedScore:function(){return""},getTimestamp:function(){return(new Date).valueOf()},getRank:function(){return t.rank},getExtraData:function(){return t.extraData},getPlayer:function(){return{getName:function(){return e.name},getPhoto:function(){return e.photo},getID:function(){return e.playerId}}}})})),e.abrupt("return",c);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Is=function(){var e=(0,s.Z)(u().mark((function e(t){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===t&&(t={}),null==As){e.next=3;break}return e.abrupt("return",ws(t));case 3:return e.abrupt("return",_s(t));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ws=function(){var e=(0,s.Z)(u().mark((function e(t){var n,i,a,s,r;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===t&&(t={}),n=[],i=Ss(ds)){e.next=5;break}return e.abrupt("return",n);case 5:return a=GameCore.Utils.String.params(t),e.next=8,(0,rt.U)(i+"?"+a,{},ms);case 8:if(s=e.sent,!((r=(null==s?void 0:s.data)||[]).length<1)){e.next=12;break}return e.abrupt("return",n);case 12:return n=r,e.abrupt("return",bs(n));case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),_s=function(){var e=(0,s.Z)(u().mark((function e(t){var n,i,a,s,r;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return void 0===t&&(t={}),i=(n=t).limit,a=n.offset,e.next=4,window.GameSDK.getLeaderboardAsync(Es);case 4:return s=e.sent,e.next=7,s.getEntriesAsync(i,a);case 7:return r=e.sent,e.abrupt("return",r);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),xs=function(){var e=(0,s.Z)(u().mark((function e(t){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===t&&(t={}),null==As){e.next=3;break}return e.abrupt("return",Ps(t));case 3:return e.abrupt("return",ks(t));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ps=function(){var e=(0,s.Z)(u().mark((function e(t){var n,i,a,s,r;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===t&&(t={}),n=[],i=Ss(ps)){e.next=5;break}return e.abrupt("return",n);case 5:return a=GameCore.Utils.String.params(t),e.next=8,(0,rt.U)(i+"?"+a,{},ms);case 8:if(s=e.sent,!((r=(null==s?void 0:s.data)||[]).length<1)){e.next=12;break}return e.abrupt("return",n);case 12:return n=r,e.abrupt("return",bs(n));case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ks=function(){var e=(0,s.Z)(u().mark((function e(t){var n,i,a,s,r;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return void 0===t&&(t={}),i=(n=t).limit,a=n.offset,e.next=4,window.GameSDK.getLeaderboardAsync(Es);case 4:return s=e.sent,e.next=7,s.getConnectedPlayerEntriesAsync(i,a);case 7:return r=e.sent,e.abrupt("return",r);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Os=(function(){var e=(0,s.Z)(u().mark((function e(t){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==As){e.next=2;break}return e.abrupt("return",Os(t));case 2:return e.abrupt("return",Ls());case 3:case"end":return e.stop()}}),e)})))}(),function(){var e=(0,s.Z)(u().mark((function e(t){var n,i,a,s,r;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=null,t){e.next=3;break}return e.abrupt("return",n);case 3:if(i=Ss(ps)){e.next=6;break}return e.abrupt("return",n);case 6:return a=GameCore.Utils.String.params({playerIds:t}),e.next=9,(0,rt.U)(i+"?"+a,{},ms);case 9:if(s=e.sent,!((r=(null==s?void 0:s.data)||[]).length<1)){e.next=13;break}return e.abrupt("return",n);case 13:return e.next=15,bs(r);case 15:return n=e.sent[0],e.abrupt("return",n);case 17:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),Ls=function(){var e=(0,s.Z)(u().mark((function e(){var t,n;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,window.GameSDK.getLeaderboardAsync(Es);case 2:return t=e.sent,e.next=5,t.getPlayerEntryAsync();case 5:return n=e.sent,e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Rs=function(){var e=(0,s.Z)(u().mark((function e(t,n){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(window.GameSDK.submitGameResultsAsync(n).catch((function(e){})),null==As){e.next=5;break}if(""!==window.game.auth.getToken()){e.next=4;break}return e.abrupt("return",c().reject("Not logged in"));case 4:return e.abrupt("return",Bs(t,n));case 5:return e.abrupt("return",Ds(n));case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),Bs=function(){var e=(0,s.Z)(u().mark((function e(t,n){var i;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,rt.v)("leaderboards/"+As+"/players/"+t,{score:n},{},ms);case 2:return i=e.sent,e.abrupt("return",(null==i?void 0:i.data)||{});case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),Ds=function(){var e=(0,s.Z)(u().mark((function e(t){var n;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,window.GameSDK.getLeaderboardAsync(Es);case 2:return n=e.sent,e.next=5,n.setScoreAsync(t);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();function Ns(e,t){var n="undefined"!==typeof I()&&_()(e)||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){var n;if(!e)return;if("string"===typeof e)return Ms(e,t);var i=T()(n=Object.prototype.toString.call(e)).call(n,8,-1);"Object"===i&&e.constructor&&(i=e.constructor.name);if("Map"===i||"Set"===i)return S()(e);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return Ms(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var i=0;return function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Ms(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var Gs=GameCore.Configs.LeadersBoard,Zs=Gs.UseMock,Fs=Gs.Limit,Us=Gs.MockOptions,zs=function(e,t,n,i){return void 0===n&&(n=Fs),void 0===i&&(i=0),function(){var a=(0,s.Z)(u().mark((function a(s){var r,o,c,h,l,d,p,f,g,m,v,y,A,E,T,C,S,b;return u().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(a.prev=0,r=window.game.player,o=r.getPlayerId(),s(Ys()),s({type:Zi,payload:{leaderboardId:e,type:t,limit:n,offset:i}}),!Zs){a.next=11;break}return a.next=8,(0,ls.qZ)(1e3);case 8:return l=Be()(c=Ut()(h=new Array(n)).call(h,null)).call(c,(function(e,t){var n=(t+1)*(i+1),a=Us.PlayerEntryIndex===t,s={playerId:"0"+n,name:"MPlayer "+n,photo:"./assets/images/others/avatar.png",rank:n,score:Math.floor(1e5/n)};if(a){var r=window.game.player.getPlayer(),o=r.playerId,c=r.name,h=r.photo;s.playerId=o,s.name=c,s.photo=h}return s})),s(Ws(l,t)),a.abrupt("return");case 11:if(d=[],t!==ds){a.next=18;break}return a.next=15,Is({limit:n,offset:i});case 15:d=a.sent,a.next=26;break;case 18:if(t!==ps){a.next=26;break}return(p=r.getConnectedPlayerIds(n,i)).push(o),f=GameCore.Utils.Array.unique(p),a.next=24,xs({playerIds:f,limit:f.length});case 24:d=a.sent,f.forEach((function(e){var t=Le()(d).call(d,(function(t){return t.playerId===e}));t&&0!==t.length||d.push({playerId:e,score:0})}));case 26:for(g={},m=Ns(d);!(v=m()).done;)y=v.value,A=y.playerId,E=y.score,T=y.rank,C=y.getPlayer(),S=C.getPhoto(),b=C.getName(),g[A]={playerId:A,name:b,photo:S,score:E,rank:T};s(Ws(g,t)),a.next=36;break;case 32:a.prev=32,a.t0=a.catch(0),s(Ws([],t)),(0,he.tO)(a.t0);case 36:case"end":return a.stop()}}),a,null,[[0,32]])})));return function(e){return a.apply(this,arguments)}}()},Ws=function(e,t){return{type:Fi,payload:{leaders:e,type:t}}},Ys=function(){return{type:Ui,payload:{}}},Hs=function(e){return e[Bi]},Ks=((0,pe.P1)([function(e){return Hs(e).leaderboardId}],(function(e){return e})),(0,pe.P1)([function(e){return Hs(e).leaders}],(function(e){return e}))),js=(0,pe.P1)([function(e){return Hs(e).isRequesting}],(function(e){return e})),Vs=function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).name="InvalidContextId",i.message=t||"This contextId is not valid",i.payload=n,i}return(0,r.Z)(t,e),t}((0,W.Z)(Error)),Js=function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).name="NewScoreIsBad",i.message=t||"The new score is bad",i.payload=n,i}return(0,r.Z)(t,e),t}((0,W.Z)(Error)),Xs=function(e){return e[xi]},qs=((0,pe.P1)([function(e){return Xs(e).active}],(function(e){return e})),(0,pe.P1)([function(e){return Xs(e).tournamentId}],(function(e){return e}))),Qs=((0,pe.P1)([function(e){return Xs(e).bestSessionScore}],(function(e){return e})),(0,pe.P1)([function(e){return Xs(e).isRequesting}],(function(e){return e})),(0,pe.P1)([function(e){return Xs(e).leaderboardId}],(function(e){return e}))),$s=function(e){return e[$n]},er=(0,pe.P1)([function(e){return $s(e).gameplay.mode}],(function(e){return e})),tr=((0,pe.P1)([function(e){return $s(e).gameplay.status}],(function(e){return e})),(0,pe.P1)([function(e){return $s(e).gameplay.rescued}],(function(e){return e})),(0,pe.P1)([function(e){return $s(e).gameplay.startAt}],(function(e){return e})),(0,pe.P1)([function(e){return $s(e).gameplay.finishAt}],(function(e){return e})),n(649));function nr(e,t){var n="undefined"!==typeof I()&&_()(e)||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){var n;if(!e)return;if("string"===typeof e)return ir(e,t);var i=T()(n=Object.prototype.toString.call(e)).call(n,8,-1);"Object"===i&&e.constructor&&(i=e.constructor.name);if("Map"===i||"Set"===i)return S()(e);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return ir(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var i=0;return function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function ir(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var ar=GameCore.Configs.Tournament.UseLeaderboard,sr=function(e,t){return void 0===t&&(t=""),{type:Pi,payload:{tournamentId:e,leaderboardId:t}}},rr=function(e){return function(){var t=(0,s.Z)(u().mark((function t(n){var i,a,s,r,o,c,h,l,d,p;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,i=window.game.facebook,a=e.playerId,s=e.playerName,r=e.score,o=e.level,c=e.autoStartGame,h=s+"'s Tournament",l=GameCore.Utils.String.generateObjectId(),t.next=7,i.tournament.createAsync({initialScore:r,config:{title:h,tournamentTitle:h},data:{playerId:a,playerName:s,leaderboardId:l,level:o}});case 7:return d=t.sent,p=d.getID(),c&&n(sr(p,l)),t.next=12,(0,tr.Z5)({_id:l,createdBy:a,name:h,description:D()({contextID:p,tournamentID:p}),type:"tournament_leaderboard",expireTime:604800});case 12:if(t.sent._id!==l){t.next=16;break}return t.next=16,(0,tr.bh)(l,a,r);case 16:window.game.player.joinTournament({leaderboardId:l,endTime:d.getEndTime(),level:o}),e.success=!0,t.next=24;break;case 20:throw t.prev=20,t.t0=t.catch(0),e.success=!1,t.t0;case 24:case"end":return t.stop()}}),t,null,[[0,20]])})));return function(e){return t.apply(this,arguments)}}()},or=function(e){return(0,s.Z)(u().mark((function t(){var n,i,a,s,r;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=window.game.facebook,i=e.playerId,a=e.playerName,s=e.score,r={score:s,data:{type:"tournament",playerId:i,playerName:a}},t.next=5,n.tournament.shareAsync(r);case 5:case"end":return t.stop()}}),t)})))},cr=(function(){var e=(0,s.Z)(u().mark((function e(){var t,n,i,a,s,r,o,c,h;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=window.game.facebook,e.next=4,t.getTournamentAsync();case 4:if(n=e.sent,null!=(i=JSON.parse(n.getPayload()||"{}")).leaderboardId){e.next=21;break}return e.next=9,(0,tr.Iy)();case 9:a=e.sent,s=n.getContextID(),r={payload:{}},o=nr(a);case 13:if((c=o()).done){e.next=20;break}if((h=c.value).contextID!==s){e.next=18;break}return r=h,e.abrupt("return",r.payload.leaderboardId);case 18:e.next=13;break;case 20:return e.abrupt("return",r.payload.leaderboardId||"");case 21:return e.abrupt("return",i.leaderboardId);case 24:return e.prev=24,e.t0=e.catch(0),e.abrupt("return",null);case 27:case"end":return e.stop()}}),e,null,[[0,24]])})))}(),function(e){return function(){var t=(0,s.Z)(u().mark((function t(n,i){var a,s,r,o;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(s=window.game.globalScene,r=i(),o=er(r),be()(a=[ka,Ra]).call(a,o)){t.next=5;break}return t.abrupt("return");case 5:if(n({type:ki,payload:{}}),s.screen.open(cs.o4.NOTIFY_SCREEN,{message:"loading",loading:!0}),!ar){t.next=12;break}return t.next=10,pr(e,r);case 10:t.next=14;break;case 12:return t.next=14,mr(e);case 14:s.screen.close(cs.o4.NOTIFY_SCREEN),n(vr(e));case 16:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}),hr=0,ur=!1,lr=0,dr=!1,pr=function(){var e=(0,s.Z)(u().mark((function e(t,n){var i,a,s,r,o,c,h,l,d,p;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=window.game,a=i.player,s=i.facebook,r=a.getPlayer(),o=r.playerId,c=r.name,h=a.getBestScore(),e.prev=3,e.next=6,s.getTournamentAsync();case 6:if(l=Qs(n),!gr(t,h)){e.next=15;break}return hr+=1,d={playerId:o,playerName:c,score:t,leaderboardId:l},e.next=12,window.game.storage.dispatch(or(d)).then((function(){ur=!0}));case 12:ur=!0,e.next=17;break;case 15:return e.next=17,s.tournament.postScoreAsync(t);case 17:e.next=28;break;case 19:if(e.prev=19,e.t0=e.catch(3),"TOURNAMENT_NOT_FOUND"!==(null==e.t0?void 0:e.t0.code)){e.next=28;break}if(fr(t,h)){e.next=24;break}return e.abrupt("return");case 24:return lr+=1,p={playerId:o,playerName:c,score:t,autoStartGame:!1},e.next=28,window.game.storage.dispatch(rr(p)).then((function(){dr=!0})).catch((function(){}));case 28:return e.prev=28,e.finish(28);case 30:case"end":return e.stop()}}),e,null,[[3,19,28,30]])})));return function(t,n){return e.apply(this,arguments)}}(),fr=function(e,t){return!window.game.player.getPlayerIsNew()&&e>t||!(dr||lr>1)&&Math.random()<.5},gr=function(){return!(ur||hr>1)},mr=function(){var e=(0,s.Z)(u().mark((function e(t){var n,i,a,s;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=window.game,i=n.player,a=n.facebook,s=i.getBestScore(),e.prev=2,e.next=5,a.getTournamentAsync();case 5:if(!gr(t,s)){e.next=12;break}return hr+=1,e.next=9,a.tournament.shareAsync({score:t});case 9:ur=!0,e.next=14;break;case 12:return e.next=14,a.tournament.postScoreAsync(t);case 14:e.next=24;break;case 16:if(e.prev=16,e.t0=e.catch(2),"TOURNAMENT_NOT_FOUND"!==e.t0.code){e.next=24;break}if(fr(t,s)){e.next=21;break}return e.abrupt("return");case 21:return lr+=1,e.next=24,a.tournament.createAsync(t).then((function(){dr=!0})).catch((function(e){}));case 24:case"end":return e.stop()}}),e,null,[[2,16]])})));return function(t){return e.apply(this,arguments)}}(),vr=function(e){return{type:Oi,payload:{score:e}}},yr=function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).name="InvalidMatchId",i.message=t||"Invalid match id",i.payload=n,i}return(0,r.Z)(t,e),t}((0,W.Z)(Error)),Ar=function(e,t){return t.playerId},Er=function(e){return $s(e).match.challenge},Tr=((0,pe.P1)([function(e){return $s(e).match.isRequesting}],(function(e){return e})),(0,pe.P1)([function(e){return $s(e).match.single}],(function(e){return e}))),Cr=(0,pe.P1)([function(e){return $s(e).match.single._id}],(function(e){return e})),Sr=(0,pe.P1)([function(e){return $s(e).match.single.score}],(function(e){return e||0})),br=((0,pe.P1)([function(e){return $s(e).match.single.level}],(function(e){return e||0})),(0,pe.P1)([function(e){var t;return null==(t=$s(e).match.single.data)?void 0:t.diamond}],(function(e){return e||0})),(0,pe.P1)([function(e){var t;return null==(t=$s(e).match.single.data)?void 0:t.fen}],(function(e){return e||null})),(0,pe.P1)([function(e){return $s(e).match.single.status}],(function(e){return e})),(0,pe.P1)([function(e){return $s(e).match.single.playerId}],(function(e){return e})),(0,pe.P1)([Er],(function(e){return e}))),Ir=(0,pe.P1)([function(e){return $s(e).match.challenge._id}],(function(e){return e})),wr=(0,pe.P1)([function(e){return $s(e).match.challenge.status}],(function(e){return e})),_r=(0,pe.P1)([function(e){return $s(e).match.challenge.opponentInfo}],(function(e){return e})),xr=((0,pe.P1)([function(e){return $s(e).match.challenge.whitePlayerId}],(function(e){return e})),(0,pe.P1)([function(e){return $s(e).match.challenge.blackPlayerId}],(function(e){return e})),(0,pe.P1)([br,Ar],(function(e,t){var n=e.whitePlayerId,i=e.blackPlayerId;return n!==t&&i===t?n:i!==t&&n===t?i:""})),(0,pe.P1)([br,Ar],(function(e,t){var n=e.whitePlayerId,i=e.blackPlayerId;return n===t?n:i===t?i:Pa.playerId}))),Pr=(0,pe.P1)([br,Ar],(function(e,t){var n=e.whitePlayerId,i=e.blackPlayerId,a=e.whitePlayerFinish,s=e.blackPlayerFinish;return t&&n===t?a:!(!t||i!==t)&&s})),kr=(0,pe.P1)([br,function(e,t){return t.opponentId}],(function(e,t){var n=e.whitePlayerId,i=e.blackPlayerId,a=e.whitePlayerFinish,s=e.blackPlayerFinish;return t&&n===t?a:!(!t||i!==t)&&s})),Or=(0,pe.P1)([Er],(function(e){return e.extraData})),Lr=(0,pe.P1)([function(e){return $s(e).match.group.opponentInfo}],(function(e){return e})),Rr=((0,pe.P1)([function(e){return $s(e).match.online.players}],(function(e){return e})),(0,pe.P1)([function(e){return $s(e).match.journey}],(function(e){return e})),(0,pe.P1)([function(e){return $s(e).match.journey._id}],(function(e){return e})),(0,pe.P1)([function(e){return $s(e).match.journey.level}],(function(e){return e})),(0,pe.P1)([function(e){return $s(e).match.challenge.matchResultFromMessage}],(function(e){return e})),(0,pe.P1)([function(e){return $s(e).stats.data}],(function(e){return e}))),Br=(0,pe.P1)([function(e){return $s(e).stats.current}],(function(e){return e})),Dr=((0,pe.P1)([function(e){return $s(e).stats.isRequesting}],(function(e){return e})),function(e){try{var t=localStorage.getItem(e);return null===t?null:GameCore.Utils.Json.decode(t)}catch(n){return null}}),Nr=function(e,t){try{var n=Dr(e),i={};GameCore.Utils.Valid.isObject(n)&&(i=n);var a=GameCore.Utils.Json.clone(t);if(!GameCore.Utils.Valid.isObject(a))return!1;var s=GameCore.Utils.Object.clear(a),r=(0,Kn.TS)(i,s),o=GameCore.Utils.Json.encode(r);return localStorage.setItem(e,o),!0}catch(c){return!1}},Mr=GameCore.Configs.ApiHost,Gr=(function(){var e=(0,s.Z)(u().mark((function e(t){var n;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"single-matches",e.next=3,(0,rt.v)("single-matches",t,{},Mr);case 3:return n=e.sent,e.abrupt("return",(null==n?void 0:n.data)||{});case 5:case"end":return e.stop()}}),e)})))}(),function(){var e=(0,s.Z)(u().mark((function e(){var t;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"single-matches/active",e.next=3,(0,rt.U)("single-matches/active",{},Mr);case 3:return t=e.sent,e.abrupt("return",(null==t?void 0:t.data)||{});case 5:case"end":return e.stop()}}),e)})))}(),function(){var e=(0,s.Z)(u().mark((function e(t,n){var i,a;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i="single-matches/"+t+"/move",e.next=3,(0,rt.v)(i,n,{},Mr);case 3:return a=e.sent,e.abrupt("return",(null==a?void 0:a.data)||{});case 5:case"end":return e.stop()}}),e)})))}(),function(){var e=(0,s.Z)(u().mark((function e(t){var n,i;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="single-matches/"+t+"/finish",e.next=3,(0,rt.v)(n,{},{},Mr);case 3:return i=e.sent,e.abrupt("return",(null==i?void 0:i.data)||{});case 5:case"end":return e.stop()}}),e)})))}(),function(){var e=(0,s.Z)(u().mark((function e(t,n){var i;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"matches",e.next=3,(0,rt.v)("matches",{opponentPlayerId:t,extraData:n},{},Mr);case 3:return i=e.sent,e.abrupt("return",(null==i?void 0:i.data)||{});case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),Zr=function(){var e=(0,s.Z)(u().mark((function e(t){var n,i;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="matches/"+t+"/join",e.next=3,(0,rt.v)(n,{},{},Mr);case 3:return i=e.sent,e.abrupt("return",(null==i?void 0:i.data)||{});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Fr=function(){var e=(0,s.Z)(u().mark((function e(t){var n,i;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="matches/"+t,e.next=3,(0,rt.U)(n,{},Mr);case 3:return i=e.sent,e.abrupt("return",(null==i?void 0:i.data)||{});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ur=function(){var e=(0,s.Z)(u().mark((function e(t,n,i,a){var s,r;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s="matches/"+t+"/finish",e.next=3,(0,rt.v)(s,{matchId:t,score:n,level:i,extraData:a},{},Mr);case 3:return r=e.sent,e.abrupt("return",(null==r?void 0:r.data)||{});case 5:case"end":return e.stop()}}),e)})));return function(t,n,i,a){return e.apply(this,arguments)}}(),zr=function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).name="InvalidMatchStatus",i.message=t||"The match status is not valid",i.payload=n,i}return(0,r.Z)(t,e),t}((0,W.Z)(Error)),Wr=function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).name="InvalidOpponentId",i.message=t||"Invalid opponent id",i.payload=n,i}return(0,r.Z)(t,e),t}((0,W.Z)(Error)),Yr=function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).name="InvalidBlackPlayerId",i.message=t||"Invalid black player id",i.payload=n,i}return(0,r.Z)(t,e),t}((0,W.Z)(Error)),Hr=function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).name="InvalidRequestedMatchId",i.message=t||"The matchId in match data not matched with requested matchId",i.payload=n,i}return(0,r.Z)(t,e),t}((0,W.Z)(Error)),Kr=function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).name="InvalidWhitePlayerId",i.message=t||"Invalid white player id",i.payload=n,i}return(0,r.Z)(t,e),t}((0,W.Z)(Error)),jr=function(e){var t=e.matchId,n=e.currentMatchId;if(""===t||"string"!==typeof t)throw new yr(null,{matchId:t});if(""===n||"string"!==typeof n)throw new yr(null,{currentMatchId:n});if(t!==n)throw new Hr(null,{matchId:t,currentMatchId:n})},Vr=function(e){var t=e.playerId,n=e.match,i=n._id,a=n.playerId,s=n.status;if(""===i||"string"!==typeof i)throw new yr(null,{matchId:i});if("finished"===s||"string"!==typeof s)throw new zr("This match is finished",{status:s});if(a!==t)throw new ba(null,{playerId:a,currentPlayerId:t})},Jr=function(e){var t=e.opponentId;if(""===t||"string"!==typeof t)throw new Wr(null,{opponentId:t})},Xr=function(e){var t=e.matchId;if(""===t||"string"!==typeof t)throw new yr(null,{matchId:t})},qr=function(e){var t=e.match,n=t._id,i=t.whitePlayerId,a=t.blackPlayerId;if(""===n||"string"!==typeof n)throw new yr(null,{matchId:n});if(""===i||"string"!==typeof i)throw new Kr(null,{whitePlayerId:i});if(""===a||"string"!==typeof a)throw new Yr(null,{blackPlayerId:a})},Qr=GameCore.Configs.Match,$r=function(e){try{return GameCore.Utils.Hash.stringToHash(D()(e))}catch(t){return""}},eo=function(e){try{return JSON.parse(GameCore.Utils.Hash.hashToString(e))}catch(t){return""}},to=function(){return function(){var e=(0,s.Z)(u().mark((function e(t){var n,i,s,r;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.prev=0,n=window.game,i=n.player,n.globalScene.screen.open(cs.o4.NOTIFY_SCREEN,{message:"loading",loading:!0}),t({type:oi,payload:{}}),s=i.getPlayerId(),r=(0,a.Z)({},Qr.LocalSingleMatchDefault,{status:"active",playerId:s,startedAt:Date.now()}),Vr({playerId:s,match:r}),t(io(r)),Nr(Qr.SingleMatchStore,r),e.next=19;break;case 11:if(e.prev=11,e.t0=e.catch(0),t(io(null)),!(e.t0 instanceof yr)){e.next=16;break}return e.abrupt("return");case 16:if(!(e.t0 instanceof zr)){e.next=18;break}return e.abrupt("return");case 18:(0,he.tO)(e.t0);case 19:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t){return e.apply(this,arguments)}}()},no=function(e){return function(){var t=(0,s.Z)(u().mark((function t(n,i){var s,r,o,c,h,l,d,p;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:t.prev=0,s=window.game.player,Xr({matchId:e}),r=i(),o=Cr(r),c=s.getPlayerId(),jr({matchId:e,currentMatchId:o}),n({type:"MATCH_SINGLE_FINISH_REQUEST",payload:{matchId:e}}),h=Tr(r),Vr({playerId:c,match:h}),l=(0,a.Z)({},Qr.LocalSingleMatchDefault,h,{_id:e,status:"finished",playerId:c,finishAt:Date.now()}),n(io(l)),d=l.data,(p=(0,a.Z)({},l)).data=$r(d),Nr(Qr.SingleMatchStore,p),t.next=26;break;case 18:if(t.prev=18,t.t0=t.catch(0),n(io(null)),!(t.t0 instanceof yr)){t.next=23;break}return t.abrupt("return");case 23:if(!(t.t0 instanceof zr)){t.next=25;break}return t.abrupt("return");case 25:(0,he.tO)(t.t0);case 26:case"end":return t.stop()}}),t,null,[[0,18]])})));return function(e,n){return t.apply(this,arguments)}}()},io=function(e){return{type:hi,payload:{match:e}}},ao=function(){return{type:ui,payload:{}}},so=function(e,t){return function(){var n=(0,s.Z)(u().mark((function n(i){var a,s,r,o;return u().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,a=window.game,s=a.profile,a.globalScene.screen.open(cs.o4.NOTIFY_SCREEN,{message:"loading",loading:!0}),r=e.playerId,Jr({opponentId:r}),i({type:di,payload:{opponentInfo:e,extraData:t}}),n.next=8,Gr(r,t);case 8:return o=n.sent,qr({match:o}),n.next=12,s.requestProfiles([r]);case 12:i(ho(o)),n.next=23;break;case 15:if(n.prev=15,n.t0=n.catch(0),i(ho(null)),!(n.t0 instanceof yr)){n.next=20;break}return n.abrupt("return");case 20:if(!(n.t0 instanceof Wr)){n.next=22;break}return n.abrupt("return");case 22:(0,he.tO)(n.t0);case 23:case"end":return n.stop()}}),n,null,[[0,15]])})));return function(e){return n.apply(this,arguments)}}()},ro=function(e){return function(){var t=(0,s.Z)(u().mark((function t(n){var i,a,s,r,o,c,h,l,d;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,i=window.game,a=i.player,s=i.profile,i.globalScene.screen.open(cs.o4.NOTIFY_SCREEN,{message:"loading",loading:!0}),Xr({matchId:e}),n({type:li,payload:{matchId:e}}),t.next=7,Zr(e);case 7:if(r=t.sent,qr({match:r}),o=r.status,c=r.whitePlayerId,h=r.blackPlayerId,o!==Ci){t.next=16;break}return l=a.getPlayerId(),d=l===c?h:c,t.next=16,s.requestProfiles([d]);case 16:n(ho(r)),t.next=25;break;case 19:if(t.prev=19,t.t0=t.catch(0),n(ho(null)),!(t.t0 instanceof yr)){t.next=24;break}return t.abrupt("return");case 24:(0,he.tO)(t.t0);case 25:case"end":return t.stop()}}),t,null,[[0,19]])})));return function(e){return t.apply(this,arguments)}}()},oo=function(e,t){return function(){var n=(0,s.Z)(u().mark((function n(i){var a,s,r,o,c,h,l,d,p;return u().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,a=window.game,s=a.player,a.globalScene.screen.open(cs.o4.NOTIFY_SCREEN,{message:"loading",loading:!0}),Xr({matchId:e}),i({type:fi,payload:{matchId:e,opponentInfo:t}}),n.next=7,Fr(e);case 7:r=n.sent,qr({match:r}),o=r.whitePlayerId,c=r.whitePlayerScore,h=r.blackPlayerScore,l=s.getPlayerId(),d=s.getPlayerData(),p=d.score,i(ho(r,{score:l===o?c:h,bestScore:p})),n.next=23;break;case 17:if(n.prev=17,n.t0=n.catch(0),i(ho(null)),!(n.t0 instanceof yr)){n.next=22;break}return n.abrupt("return");case 22:(0,he.tO)(n.t0);case 23:case"end":return n.stop()}}),n,null,[[0,17]])})));return function(e){return n.apply(this,arguments)}}()},co=function(e,t,n){return function(){var i=(0,s.Z)(u().mark((function i(a){var s,r;return u().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.prev=0,Xr({matchId:e}),a({type:pi,payload:{matchId:e,score:t,extraData:n}}),s=n.level,i.next=6,Ur(e,t,s,n);case 6:return r=i.sent,qr({match:r}),i.next=10,a(ho(r));case 10:i.next=18;break;case 12:if(i.prev=12,i.t0=i.catch(0),a(ho(null)),!(i.t0 instanceof yr)){i.next=17;break}return i.abrupt("return");case 17:(0,he.tO)(i.t0);case 18:case"end":return i.stop()}}),i,null,[[0,12]])})));return function(e){return i.apply(this,arguments)}}()},ho=function(e,t,n){return void 0===n&&(n=null),{type:gi,payload:{match:e,opponentInfo:t,current:n}}},uo=function(e){return{type:vi,payload:{opponentInfo:e}}},lo=function(e,t){return{type:Ei,payload:{matchId:e,players:t}}},po=function(e){return{type:ai,payload:{playerId:e}}},fo=function(e,t){return{type:si,payload:{playerId:e,stats:t}}},go=function(e){return{type:ri,payload:{stats:e}}},mo=function(e){return e.GAME_MODE_CHANGED="game-mode-changed",e.BACKGROUND_CHANGED="background-changed",e.GAME_START="game-start",e.BOARD_STATE_CHANGED="board-state-changed",e}(mo||{}),vo=mo,yo=function(e){return e.SINGLE="single",e.CHALLENGE_FRIENDS="challenge-friends",e.TOURNAMENT="tournaments",e.JOURNEY="journey",e}(yo||{}),Ao=yo,Eo=function(e){function t(){var t;return(t=e.call(this)||this).gameMode=void 0,t.autoPlaySingleMode=void 0,t.friendsChallenged=void 0,t.isGameLoadedInTournament=!1,GameCore.Configs.Gameplay.ForceJourneyMode?t.gameMode=Ao.JOURNEY:t.gameMode=Ao.SINGLE,t.autoPlaySingleMode=!0,t.friendsChallenged=[],t}(0,r.Z)(t,e);var n=t.prototype;return n.setGameMode=function(e){this.gameMode=e,this.emit(vo.GAME_MODE_CHANGED)},n.getGameMode=function(){return this.gameMode},n.isSingleMode=function(){return this.gameMode==Ao.SINGLE},n.isChallengeMode=function(){return this.gameMode==Ao.CHALLENGE_FRIENDS},n.isTournamentMode=function(){return this.gameMode===Ao.TOURNAMENT},n.isJourneyMode=function(){return this.gameMode===Ao.JOURNEY},(0,ce.Z)(t,null,[{key:"instance",get:function(){return this._instance||(this._instance=new t)}}]),t}(Phaser.Events.EventEmitter);Eo._instance=void 0;var To=Eo,Co=(0,pe.P1)([function(e){return e.messages.data}],(function(e){return e})),So=(0,pe.P1)([Co,function(e,t){return t.opponentId}],(function(e,t){return!!GameCore.Utils.Valid.isString(t)&&(!!GameCore.Utils.Object.hasOwn(e,t)&&e[t].sent)})),bo=function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).name="InvalidOpponentId",i.message=t||"This opponentId is not valid",i.payload=n,i}return(0,r.Z)(t,e),t}((0,W.Z)(Error)),Io=bo,wo=function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).name="WideFrameRenderFail",i.message=t||"Wide frame render fail",i.payload=n,i}return(0,r.Z)(t,e),t}((0,W.Z)(Error)),_o={PASS_LEVELS:{ID:"pass-levels",EVENTS:{PASS_LEVEL:"pass-level"}},COLLECT_DIAMONDS:{ID:"collect-diamonds",EVENTS:{COLLECT_DIAMONDS:"collect-diamonds"}},INVITE_FRIENDS:{ID:"invite-friends",EVENTS:{INVITED_FRIEND:"INVITED_FRIEND"}},REACH_SCORE:{ID:"reach-score",EVENTS:{ADD_SCORE:"add-score"}},EVENTS:{TASKS_RESET:"tasks-reset",NOTICE_UPDATE:"notice-update"}},xo=n(442),Po=new(n.n(xo)()),ko=n(179),Oo=n.n(ko),Lo=function(e){if("string"!==typeof e||!e)throw new wo(null,{imageShare:e})},Ro=(function(){var e=(0,s.Z)(u().mark((function e(){var t,n,i,a,s,r,o,c;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=window.game,n=t.player,i=t.globalScene,a=n.getPlayer(),s=a.playerId,r=a.photo,o=Ro({playerId:s,playerPhoto:r})){e.next=6;break}return e.abrupt("return");case 6:return c={name:"share-best-score",width:750,height:1e3,renderOptions:o},e.next=9,i.frameCapture.capture(c);case 9:return e.abrupt("return",e.sent);case 10:case"end":return e.stop()}}),e)})))}(),function(e){var t=e.playerId,n=void 0===t?"10":t,i=e.playerPhoto;if("string"!==typeof n)return null;if("string"!==typeof(void 0===i?"":i))return null;return{wideFrame:{name:"wide-frame-share",type:"image",x:0,y:0,image:"./assets/wideframes/wide-frame-share.jpg",width:750,height:1e3}}}),Bo=function(){return(0,s.Z)(u().mark((function e(){var t,n,i,a,s,r,o,c,h,l;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=window.game,n=t.player,i=t.analytics,a=t.facebook,s=t.globalScene,e.prev=1,s.screen.open(cs.o4.NOTIFY_SCREEN,{message:"loading",loading:!0}),e.next=5,Do();case 5:return r=e.sent,Lo(r),o=n.getPlayer(),c=o.playerId,h=o.name,l=o.photo,e.next=10,a.shareAsync({text:"Great! I have a best score!",intent:"SHARE",image:r||"",data:{playerId:c,playerName:h,playerPhoto:l,type:Ia}});case 10:i.event(yn._.SHARE,{share_content_type:"BestScore",success:!0}),e.next=17;break;case 13:e.prev=13,e.t0=e.catch(1),i.event(yn._.SHARE,{share_content_type:"BestScore",success:!1}),(0,he.tO)(e.t0);case 17:return e.prev=17,s.screen.close(cs.o4.NOTIFY_SCREEN),e.finish(17);case 20:case"end":return e.stop()}}),e,null,[[1,13,17,20]])})))},Do=function(){var e=(0,s.Z)(u().mark((function e(){var t,n,i,a,s,r,o,c,h,l;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=window.game,n=t.player,i=t.globalScene,a=n.getPlayer(),s=a.playerId,r=a.photo,o=a.data,c=(o||{}).score,h=No({playerId:s,playerPhoto:r,playerScore:c})){e.next=7;break}return e.abrupt("return");case 7:return l={name:"share-best-score",width:952,height:492,renderOptions:h},e.next=10,i.frameCapture.capture(l);case 10:return e.abrupt("return",e.sent);case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),No=(function(){var e=(0,s.Z)(u().mark((function e(t){var n,i,a,s,r,o,c,h,l,d,p;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=window.game,i=n.player,a=n.globalScene,s=Rr(t),r=i.getPlayer(),o=r.playerId,c=r.photo,h=s[o]||{},l=h.score,d=No({playerId:o,playerPhoto:c,playerScore:l})){e.next=8;break}return e.abrupt("return");case 8:return p={name:"share-current-score",width:952,height:492,renderOptions:d},e.next=11,a.frameCapture.capture(p);case 11:return e.abrupt("return",e.sent);case 12:case"end":return e.stop()}}),e)})))}(),function(e){var t=e.playerId,n=void 0===t?"10":t,i=e.playerPhoto,a=void 0===i?"":i,s=e.playerScore,r=void 0===s?0:s;return"string"!==typeof n||"string"!==typeof a||"number"!==typeof r?null:{avatar:{name:""+n,type:"image",x:48,y:93,image:a,width:205,height:205,fallbackWithImage:xa.Z.AVATAR.KEY},wideFrame:{name:"wide-frame-message-win",type:"image",x:0,y:0,image:"./assets/wideframes/wide-frame-message-win.png",width:952,height:492},playerScore:{type:"text",x:150,y:365,font:"600 60px",fillStyle:"#ffd10d",text:""+r,textAlign:"center"}}}),Mo=function(){return(0,s.Z)(u().mark((function e(){var t,n,i,a,s,r,o,c,h,l;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=window.game,n=t.player,i=t.analytics,a=t.facebook,s=t.globalScene,e.prev=1,s.screen.open(cs.o4.NOTIFY_SCREEN,{message:"loading",loading:!0}),e.next=5,Go();case 5:return r=e.sent,Lo(r),o=n.getPlayer(),c=o.playerId,h=o.name,l=o.photo,e.next=10,a.shareAsync({text:"A ha, I'm the best!",intent:"CHALLENGE",image:r||"",data:{playerId:c,playerName:h,playerPhoto:l,type:Ia}});case 10:i.event(yn._.SHARE,{share_content_type:"Leaderboard",success:!0}),e.next=17;break;case 13:e.prev=13,e.t0=e.catch(1),i.event(yn._.SHARE,{share_content_type:"Leaderboard",success:!1}),(0,he.tO)(e.t0);case 17:return e.prev=17,s.screen.close(cs.o4.NOTIFY_SCREEN),e.finish(17);case 20:case"end":return e.stop()}}),e,null,[[1,13,17,20]])})))},Go=function(){var e=(0,s.Z)(u().mark((function e(){var t,n,i,a,s,r,o,c,h,l,d,p,f,g,m,v,y,A,E,T;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=window.game,n=t.player,i=t.profile,a=t.globalScene,s=n.getPlayer(),r=s.playerId,o=s.name,c=s.photo,(h=n.getConnectedPlayerIds(99,0)).push(r),l=[],e.next=7,xs({playerIds:GameCore.Utils.Array.unique(h),limit:h.length});case 7:d=e.sent,p=GameCore.Utils.Object.keyBy(d,"playerId"),f={playerId:r,name:o,photo:c,score:0},GameCore.Utils.Object.hasOwn(p,r)&&(f=p[r]),l.push(f),e.t0=Oo()(u()).call(u(),p);case 14:if((e.t1=e.t0()).done){e.next=27;break}if(g=e.t1.value,!GameCore.Utils.Object.hasOwn(p,g)){e.next=25;break}if(m=p[g],3!==l.length){e.next=20;break}return e.abrupt("break",27);case 20:if(m.playerId!==r){e.next=22;break}return e.abrupt("continue",14);case 22:if(!(Number(m.score)>Number(f.score))){e.next=24;break}return e.abrupt("continue",14);case 24:l.push(m);case 25:e.next=14;break;case 27:return v=GameCore.Utils.Array.unique(h),e.next=30,i.requestProfiles(v);case 30:if(y=i.getProfiles(),l.forEach((function(e,t){var n=e.playerId;if(GameCore.Utils.Object.hasOwn(y,n)){var i=y[n],a=i.name,s=i.photo;l[t].name=a,l[t].photo=s}})),l.length<3)for(A=0;A<=3-l.length;)l.push({playerId:"bot"+A,name:"???",score:0,photo:"./assets/images/others/avatar.png"}),A++;if(E=Zo({playerId:r,playerName:o,playerPhoto:c,listLeaders:l})){e.next=37;break}return e.abrupt("return");case 37:return T={name:"share-leaderboard",width:1500,height:2e3,renderOptions:E},e.next=40,a.frameCapture.capture(T);case 40:return e.abrupt("return",e.sent);case 41:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Zo=function(e){var t=e.playerId,n=void 0===t?"10":t,i=e.playerPhoto,a=void 0===i?"":i,s=e.listLeaders,r=void 0===s?[]:s;if(!Array.isArray(r))return null;if("string"!==typeof n)return null;if("string"!==typeof a)return null;var o={avatar:{name:""+n,type:"image",x:510,y:278,image:a,width:510,height:510,fallbackWithImage:xa.Z.AVATAR.KEY}};return r.forEach((function(e,t){var n=e.playerId,i=e.photo;o["photo_"+n]={name:""+n,type:"image",x:436,y:1294+180*t,image:i,width:96,height:96,fallbackWithImage:xa.Z.AVATAR.KEY}})),o.wideFrame={name:"wide-frame-share",type:"image",x:0,y:0,image:"./assets/wideframes/wide-frame-share.jpg",width:1500,height:2e3},r.forEach((function(e,t){var n=e.playerId,i=e.name,a=e.score;o["name_"+n]={type:"text",x:600,y:1360+180*t,font:"600 48px",text:i,fillStyle:"#b18151"},o["score_"+n]={type:"text",x:1e3,y:1360+180*t,font:"600 48px",text:a,fillStyle:"#b18151"}})),o},Fo=function(){return function(){var e=(0,s.Z)(u().mark((function e(t,n){var i,a,s,r,o,c,h,l,d,p,f;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=window.game,a=i.player,s=i.analytics,r=i.facebook,o=i.globalScene,e.prev=1,o.screen.open(cs.o4.NOTIFY_SCREEN,{message:"loading",loading:!0}),c=n(),e.next=6,Uo(c);case 6:return h=e.sent,Lo(h),l=a.getPlayer(),d=l.playerId,p=l.name,f=l.photo,e.next=11,r.shareAsync({text:"Pheww, a great match!",intent:"SHARE",image:h||"",data:{playerId:d,playerName:p,playerPhoto:f,type:Ia}});case 11:s.event(yn._.SHARE,{share_content_type:"MatchResult",success:!0}),e.next=18;break;case 14:e.prev=14,e.t0=e.catch(1),s.event(yn._.SHARE,{share_content_type:"MatchResult",success:!1}),(0,he.tO)(e.t0);case 18:return e.prev=18,o.screen.close(cs.o4.NOTIFY_SCREEN),e.finish(18);case 21:case"end":return e.stop()}}),e,null,[[1,14,18,21]])})));return function(t,n){return e.apply(this,arguments)}}()},Uo=function(){var e=(0,s.Z)(u().mark((function e(t){var n,i,a,s,r,o,c,h,l,d,p,f,g,m,v,y,A,E;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=window.game,i=n.player,a=n.globalScene,s=Rr(t),r=i.getPlayer(),o=r.photo,c=r.playerId,h=_r(t),l=h.playerId,d=h.photo,p=Pr(t,{playerId:c}),f=kr(t,{opponentId:l}),g=s[c]||{},m=g.score,v=s[l]||{},y=v.score,A=Wo({playerId:c,playerPhoto:o,playerScore:m,opponentId:l,opponentPhoto:d,opponentScore:y,isPlayerFinished:p,isOpponentFinished:f})){e.next=12;break}return e.abrupt("return");case 12:return E={name:"share-game-result",width:952,height:492,renderOptions:A},e.next=15,a.frameCapture.capture(E);case 15:return e.abrupt("return",e.sent);case 16:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),zo=(function(){var e=(0,s.Z)(u().mark((function e(t){var n,i,a,s,r,o,c,h,l,d,p,f,g,m,v,y,A,E,T;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=window.game,a=i.player,s=i.globalScene,r=Rr(t),o=a.getPlayer(),c=o.photo,h=o.playerId,e.next=5,window.FBInstant.player.getConnectedPlayersAsync();case 5:if(l=e.sent,d=zo(),p=(null==(n=R()(l).call(l,(function(e){return e.getID()===d})))?void 0:n.getPhoto())||xa.Z.AVATAR.FILE,f=Pr(t,{playerId:h}),g=kr(t,{opponentId:d}),m=r[h]||{},v=m.score,y=r[d]||{},A=y.score,E=Wo({playerId:h,playerPhoto:c,playerScore:v,opponentId:d,opponentPhoto:p,opponentScore:A,isPlayerFinished:f,isOpponentFinished:g})){e.next=16;break}return e.abrupt("return");case 16:return T={name:"share-game-result",width:952,height:492,renderOptions:E},e.next=19,s.frameCapture.capture(T);case 19:return e.abrupt("return",e.sent);case 20:case"end":return e.stop()}}),e)})))}(),function(){var e=window.game.player,t=window.FBInstant.getEntryPointData()||{},n=t.playerId,i=t.opponentId;return n==e.getPlayerId()?i:n}),Wo=(function(){var e=(0,s.Z)(u().mark((function e(t){var n,i,a,s,r,o,c,h,l,d,p,f,g,m,v;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=window.game,i=n.player,a=n.globalScene,s=Rr(t),r=i.getPlayer(),o=r.photo,c=r.playerId,h=Lr(t),l=h.playerId,d=h.photo,p=h.score,f=s[c]||{},g=f.score,m=Wo({playerId:c,playerPhoto:o,playerScore:g,opponentId:l,opponentPhoto:d,opponentScore:p})){e.next=9;break}return e.abrupt("return");case 9:return v={name:"share-group-match-result",width:952,height:492,renderOptions:m},e.next=12,a.frameCapture.capture(v);case 12:return e.abrupt("return",e.sent);case 13:case"end":return e.stop()}}),e)})))}(),function(e){var t=e.playerId,n=void 0===t?"10":t,i=e.playerPhoto,a=void 0===i?"":i,s=e.playerScore,r=void 0===s?0:s,o=e.opponentId,c=void 0===o?"20":o,h=e.opponentPhoto,u=void 0===h?"":h,l=e.opponentScore,d=void 0===l?0:l,p=e.isPlayerFinished,f=e.isOpponentFinished;if("string"!==typeof n)return null;if("string"!==typeof a)return null;if("number"!==typeof r)return null;if("string"!==typeof c)return null;if("string"!==typeof u)return null;if("number"!==typeof d)return null;if("boolean"!==typeof p)return null;if("boolean"!==typeof f)return null;var g=r===d,m=r>d,v=p||f,y=p&&f,A={leftPhoto:{name:""+(y&&!m?c:n),type:"image",x:90,y:158,image:a,width:215,height:215,fallbackWithImage:xa.Z.AVATAR.KEY},rightPhoto:{name:""+(y&&!m?n:c),type:"image",x:675,y:60,image:u,width:215,height:215,fallbackWithImage:xa.Z.AVATAR.KEY},wideFrame:{name:"wide-frame-game-result",type:"image",x:0,y:0,image:"./assets/wideframes/wide-frame-game-result.png",width:952,height:492}};return!v||!g&&y||(A.leftScoreShadow={type:"text",x:197,y:106,font:"600 50px",fillStyle:"#c4683f",text:p?""+r:"???",textAlign:"center"},A.leftScore={type:"text",x:197,y:106,font:"600 50px",fillStyle:"#f2a62e",text:p?""+r:"???",textAlign:"center"},A.rightScoreShadow={type:"text",x:782,y:355,font:"600 50px",fillStyle:"#c4683f",text:f?""+d:"???",textAlign:"center"},A.rightScore={type:"text",x:782,y:355,font:"600 50px",fillStyle:"#f2a62e",text:f?""+d:"???",textAlign:"center"}),!g&&y&&(A.leftCrown={name:"crown-icon",type:"image",x:-75,y:14,image:"./assets/images/others/crown-icon.png",width:548,height:489}),A}),Yo=function(e){var t=e.contextId;if(""===t||"string"!==typeof t)throw new Vs(null,{contextId:t})},Ho=function(e){var t=e.opponentId,n=e.contextId;if(""===t||"string"!==typeof t)throw new Io(null,{opponentId:t});if(""===n||"string"!==typeof n)throw new Vs(null,{contextId:n})},Ko=function(e){if(null===e.imageShare)throw new wo},jo=function(e,t){return void 0===t&&(t=!0),function(n,i){var a,s=i(),r=Co(s);if(t){var o;if(null!=(o=r[e])&&o.sent)return;n(Vo(e))}null!=(a=r[e])&&a.sent&&n(Jo(e))}},Vo=function(e){return{type:Pn.qj,payload:{opponentId:e}}},Jo=function(e){return{type:Pn.rh,payload:{opponentId:e}}},Xo=function(){var e=(0,s.Z)(u().mark((function e(t,n){var i,a;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,i=window.game.facebook,Ho({opponentId:t,contextId:n}),(a=FBInstant.context.getID())!==n||""===n){e.next=6;break}return e.abrupt("return",a);case 6:if("10"!==t||""===n){e.next=8;break}return e.abrupt("return",n);case 8:if(!n){e.next=12;break}return e.next=11,i.switchAsync(n);case 11:return e.abrupt("return",FBInstant.context.getID());case 12:e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),(0,he.tO)(e.t0);case 17:return e.abrupt("return","");case 18:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(t,n){return e.apply(this,arguments)}}(),qo=function(e,t){return function(){var n=(0,s.Z)(u().mark((function n(i,a){var s,r,o,c,h,l,d,p,f,g,m,v,y,A;return u().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return s=window.game,r=s.player,o=s.analytics,c=s.facebook,n.prev=1,h=t.matchId,l=t.contextId,d=t.seed,p=t.draw3,n.next=5,Xo(e,l);case 5:return f=n.sent,Yo({contextId:f}),g=a(),n.next=10,Uo(g);case 10:return m=n.sent,Ko({imageShare:m}),v=r.getPlayer(),y=v.name,A=v.playerId,n.next=15,c.sendMessage({cta:{default:"Play",localizations:{en_US:"Play",vi_VN:"Ch\u01a1i ngay"}},text:{default:y+" challenges you",localizations:{en_US:y+" challenges you",vi_VN:y+" th\u1eed th\xe1ch b\u1ea1n trong tr\u1eadn \u0111\u1ea5u n\xe0y. Ch\u01a1i ngay!"}},image:m||"",template:"challenge",data:{type:wa,matchId:h,playerId:A,opponentId:e,status:Ci,seed:d,draw3:p}});case 15:i(jo(e)),o.event(yn._.MESSAGE,{message_content_type:"Invite",success:!0}),Po.emit(_o.INVITE_FRIENDS.EVENTS.INVITED_FRIEND,{type:"friend",value:1,opponentId:e}),n.next=24;break;case 20:n.prev=20,n.t0=n.catch(1),o.event(yn._.MESSAGE,{message_content_type:"Invite",success:!1}),(0,he.tO)(n.t0);case 24:case"end":return n.stop()}}),n,null,[[1,20]])})));return function(e,t){return n.apply(this,arguments)}}()},Qo=(function(){var e=(0,s.Z)(u().mark((function e(t,n){var i,a,s,r,o,c,h,l,d,p;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,i=window.game,a=i.player,s=i.facebook,r=a.getPlayer(),o=r.playerId,c=r.name,h=r.photo,l=Br(n),d=l.score,p={type:_a,playerId:o,playerName:c,playerPhoto:h,playerScore:d},e.next=7,s.sendMessage({cta:{default:"Play",localizations:{en_US:"Play",vi_VN:"Ch\u01a1i"}},text:{default:c+" beats your high score. Their score: "+d+".",localizations:{en_US:c+" beats your high score. Their score: "+d+".",vi_VN:c+" v\u1eeba v\u01b0\u1ee3t \u0111i\u1ec3m s\u1ed1 cao nh\u1ea5t c\u1ee7a b\u1ea1n! Ch\u01a1i l\u1ea7n n\u1eefa ch\u1ee9?"}},image:t||"",template:"play_turn",data:p});case 7:e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),(0,he.tO)(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})))}(),function(){var e=(0,s.Z)(u().mark((function e(t,n){var i,a,s,r,o,c,h,l,d,p;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=window.game,a=i.player,s=i.facebook,e.prev=1,r=a.getPlayer(),o=r.playerId,c=r.name,h=r.photo,l=Br(n),d=l.score,p={type:_a,playerId:o,playerName:c,playerPhoto:h,playerScore:d},e.next=7,s.sendMessage({cta:{default:"Play",localizations:{en_US:"Play",vi_VN:"Ch\u01a1i ngay"}},text:{default:c+" got "+d+" scores. So easy! Can you?",localizations:{en_US:c+" got "+d+" scores. So easy! Can you?",vi_VN:c+" \u0111\xe3 \u0111\u1ea1t "+d+" \u0111i\u1ec3m! Qu\xe1 d\u1ec5 lu\xf4n. Ch\u01a1i l\u1ea1i n\xe0o!"}},image:t||"",template:"play_turn",data:p});case 7:e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),(0,he.tO)(e.t0);case 12:case"end":return e.stop()}}),e,null,[[1,9]])})))}(),function(e){var t=e.contextId;if(""===t||"string"!==typeof t)throw new Vs(null,{contextId:t})}),$o=null,ec=function(e){clearTimeout($o),$o=setTimeout((function(){window.game.globalScene.screen.close(cs.o4.NOTIFY_SCREEN)}),e)},tc=function(e){return function(t){try{if(t(ao()),e){var n=e.getPayload(),i=e.getID();if(n){var a=JSON.parse(n).leaderboardId;t(sr(i.toString(),a))}}t(hc(Ra))}catch(s){(0,he.tO)(s)}}},nc=function(){return function(){var e=(0,s.Z)(u().mark((function e(t){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{t(ao()),GameCore.Configs.Gameplay.ForceJourneyMode?t(hc("journey")):t(hc(ka))}catch(n){(0,he.tO)(n)}case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},ic=function(e,t){return void 0===e&&(e="10"),void 0===t&&(t=!1),function(n){try{n(ac("reset",e,t))}catch(i){(0,he.tO)(i)}}},ac=function(e,t,n){return void 0===t&&(t="10"),void 0===n&&(n=!1),function(){var i=(0,s.Z)(u().mark((function i(a){var s,r,o,c,h,l,d,p,f,g,m,v,y,A,E,T,C,S;return u().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(i.prev=0,s=window.game,r=s.player,o=s.facebook,(c=s.globalScene).screen.open(cs.o4.NOTIFY_SCREEN,{message:"loading",loading:!0}),h=e,l=o.contextType,t||(d=GameCore.Configs.PlayerIdMock,p=GameCore.Configs.PlayerIdMock2,t=r.getPlayerId()===d?p:d),e){i.next=30;break}return i.next=9,o.chooseAsync();case 9:if(!1!==(h=i.sent)){i.next=18;break}if(n&&c.events.emit(za.K.SWITCH,za.C.DASHBOARD_SCENE),!To.instance.autoPlaySingleMode){i.next=17;break}return i.next=15,lc();case 15:return a(nc()),i.abrupt("return");case 17:return i.abrupt("return");case 18:return i.prev=18,i.next=21,window.game.facebook.getTournamentAsync();case 21:return f=i.sent,a(tc(f)),i.abrupt("return");case 26:i.prev=26,i.t0=i.catch(18);case 28:i.next=40;break;case 30:if(!t||t===Pa.playerId){i.next=38;break}return i.next=33,o.createAsync(t);case 33:if(!1!==(h=i.sent)){i.next=37;break}return n&&c.events.emit(za.K.SWITCH,za.C.DASHBOARD_SCENE),i.abrupt("return");case 37:h||"reset"===e||(h=e);case 38:l=o.contextType,a(Na(h,l));case 40:return Qo({contextId:h}),g=r.getPlayerId(),m=r.getConnectedPlayers(),i.next=45,o.getContextPlayers(g);case 45:return v=i.sent,t!==(y=Pa).playerId&&m[t]?y=m[t]:1===v.length&&(y=v[0]),a(po()),E=(A=y).playerId,T=A.name,C=A.photo,S={playerId:E,name:T,photo:C},i.next=53,a(hc(Oa,S));case 53:a(Na(h,l)),i.next=65;break;case 56:if(i.prev=56,i.t1=i.catch(0),!(i.t1 instanceof Vs)){i.next=60;break}return i.abrupt("return");case 60:if("USER_INPUT"!==(null==i.t1?void 0:i.t1.code)){i.next=62;break}return i.abrupt("return");case 62:if("INVALID_OPERATION"!==(null==i.t1?void 0:i.t1.code)){i.next=64;break}return i.abrupt("return");case 64:(0,he.tO)(i.t1);case 65:return i.prev=65,ec(10),i.finish(65);case 68:case"end":return i.stop()}}),i,null,[[0,56,65,68],[18,26]])})));return function(e){return i.apply(this,arguments)}}()},sc=function(e){return function(){var t=(0,s.Z)(u().mark((function t(n){var i,a,s,r,o;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,i=window.game,a=i.facebook,s=i.globalScene,r=i.analytics,s.screen.open(cs.o4.NOTIFY_SCREEN,{message:"loading",loading:!0}),o=a.getContextID(),Qo({contextId:o}),r.event(yn._.JOIN_GROUP,{group_id:o}),t.next=8,n(hc(La,e));case 8:t.next=17;break;case 10:if(t.prev=10,t.t0=t.catch(0),!(t.t0 instanceof Vs)){t.next=14;break}return t.abrupt("return");case 14:if("INVALID_OPERATION"!==(null==t.t0?void 0:t.t0.code)){t.next=16;break}return t.abrupt("return");case 16:(0,he.tO)(t.t0);case 17:return t.prev=17,ec(100),t.finish(17);case 20:case"end":return t.stop()}}),t,null,[[0,10,17,20]])})));return function(e){return t.apply(this,arguments)}}()},rc=function(e,t){return function(){var n=(0,s.Z)(u().mark((function n(i,a){var s,r,o,c,h,l,d,p,f,g,m,v,y,A,E;return u().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,s=window.game,r=s.player,o=s.profile,c=s.facebook,(h=s.globalScene).screen.open(cs.o4.NOTIFY_SCREEN,{message:"loading",loading:!0}),l=a(),d=r.getPlayerId(l),!((p=r.getConnectedPlayers(l)).length>0)||p[t]){n.next=10;break}return i(dc({mode:ka})),h.events.emit(za.K.SWITCH,za.C.GAME_SCENE),n.abrupt("return");case 10:return f=Pa,n.next=13,c.getContextPlayers(d);case 13:if(g=n.sent,t===d||t===f.playerId||!p[t]){n.next=18;break}f=p[t],n.next=26;break;case 18:if(1!==g.length){n.next=22;break}f=g[0],n.next=26;break;case 22:return n.next=24,o.requestProfiles([t]);case 24:(m=o.getProfiles())[t]&&(f=m[t]);case 26:return n.next=28,i(oo(e,f));case 28:if(l=a(),xr(l,{playerId:d})!==Pa.playerId){n.next=33;break}return n.next=33,i(ro(e));case 33:if(l=a(),xr(l,{playerId:d})===d||!p[t]){n.next=38;break}return i(ic(t,!0)),n.abrupt("return");case 38:if(Ir(l)===e){n.next=42;break}return h.events.emit(za.K.SWITCH,za.C.DASHBOARD_SCENE),n.abrupt("return");case 42:v=wr(l),y=Pr(l,{playerId:d}),A=c.getContextID(),E=c.contextType,i(Na(A,E)),i(dc(y?{mode:ka}:{mode:Oa,status:v})),h.events.emit(za.K.SWITCH,za.C.GAME_SCENE),y&&setTimeout((function(){window.game.scene.getScene(za.C.GAME_SCENE).events.emit("player-finish-challenge")}),1e3),n.next=55;break;case 52:n.prev=52,n.t0=n.catch(0),(0,he.tO)(n.t0);case 55:return n.prev=55,ec(500),n.finish(55);case 58:case"end":return n.stop()}}),n,null,[[0,52,55,58]])})));return function(e,t){return n.apply(this,arguments)}}()},oc=function(e){return function(t){try{var n=window.game.player,i=n.getPlayerId();Rs(i,e).catch((function(e){(0,he.tO)(new Error(e))}));var a=n.getPlayerData(),s=a.score,r=void 0===s?0:s,o=a.level;r<e&&n.setBestScore(e);var c={score:e,level:o};t(fo(i,c)),t(go(c))}catch(h){if(h instanceof Js)return;(0,he.tO)(h)}}},cc=function(){var e=window.game.cache.text.get("draw1/level1");if(!e)throw Error("Level data \u0111\xe2u r\u1ed3i b\u1ea1n \xeai!!!");return Phaser.Math.RND.pick(e.split("\n"))},hc=function(e,t){return void 0===t&&(t=null),function(){var n=(0,s.Z)(u().mark((function n(i,a){var r,o,c,h,l,d,p,f,g,m,v,y,A,E,T,C,S,b;return u().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,o=window.game,c=o.player,h=o.analytics,l=o.facebook,d=o.globalScene,p=l.getContextID(),f=0,g=a(),h.event(yn._.MATCH_START,{game_mode:GameCore.Utils.String.toUpperCamelCase(e),level:1,level_name:"level_1"}),i({type:ei,payload:{}}),!tn()(r=[ka,Ra]).call(r,e)){n.next=16;break}return n.next=10,i((function(e){try{var t=window.game.player;e({type:ci,payload:{}});var n=t.getPlayerId(),i=Dr(Qr.SingleMatchStore)||{},a=i.data;i.data=eo(a),Vr({playerId:n,match:i}),e(io(i))}catch(s){if(e(io(null)),s instanceof yr)return;if(s instanceof ba)return;if(s instanceof zr)return;(0,he.tO)(s)}}));case 10:if(g=a(),Cr(g)){n.next=15;break}return n.next=15,i(to());case 15:f=Sr(g);case 16:if(e===La&&i(uo(t)),e!==Oa){n.next=29;break}return m=cc(),v=window.game.player.getPlayerSettings().drawMode3,y={seed:m,draw3:v},n.next=23,i(so(t,y));case 23:g=a(),A=Ir(g),E=_r(g),T=E.playerId,p||(p=window.FBInstant.context.getID()),C=So(g,{opponentId:T}),p&&T&&!C&&i(qo(T,{contextId:p,matchId:A,seed:m,draw3:v}));case 29:"online"===e&&i(function(){var e=(0,s.Z)(u().mark((function e(t){var n,i,a,s,r,o,c,h;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=window.game.player,s=a.getPlayer(),r=s.playerId,o=s.name,c=s.photo,t({type:Ai,payload:{playerId:r}}),h={},Be()(n=Ut()(i=new Array(20)).call(i,null)).call(n,(function(e,t){var n="0"+(t+1);h[n]={playerId:n,name:"MPlayer "+n,photo:"./assets/images/others/avatar.png"}})),h[r]={playerId:r,name:o,photo:c},t(lo("mock",h));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),S=c.getPlayerData(g),b=S.score,i(go({score:f,bestScore:void 0===b?0:b})),i({type:ti,payload:{mode:e,contextId:p}}),To.instance.setGameMode(e),i(Ma(e)),d.events.emit(za.K.SWITCH,za.C.GAME_SCENE),n.next=45;break;case 38:if(n.prev=38,n.t0=n.catch(0),!(n.t0 instanceof yr)){n.next=44;break}return window.game.globalScene.screen.open(cs.o4.NOTIFY_SCREEN,{message:"canNowCreateThisMatch",duration:2500,loading:!1}),n.abrupt("return");case 44:(0,he.tO)(n.t0);case 45:return n.prev=45,ec(0),n.finish(45);case 48:case"end":return n.stop()}}),n,null,[[0,38,45,48]])})));return function(e,t){return n.apply(this,arguments)}}()},uc=function(e,t){return function(){var n=(0,s.Z)(u().mark((function n(i,s){var r,o,c,h,l,d,p,f,g,m,v,y,A,E,T,C,S,b,I,w,_;return u().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(o=window.game.player,c=t.score,h=void 0===c?0:c,l=t.level,d=void 0===l?0:l,p=t.time,f=void 0===p?0:p,g=t.moves,m=void 0===g?0:g,v=s(),!(tn()(r=[ka,Ra]).call(r,e)>=0)){n.next=7;break}return y=Cr(v),n.next=7,i(no(y));case 7:if(e!==Ra){n.next=12;break}if(!(A=Qs(v))){n.next=12;break}return n.next=12,(0,tr.bh)(A,o.getPlayerId(),h);case 12:if(e===La&&(i({type:yi,payload:{}}),E=o.getPlayerId(),i(fo(E,t))),e!==Oa){n.next=23;break}return T=Ir(v),C=br(v),S=C.whitePlayerId,b=C.extraData,I=window.game.player.getPlayerId(),w=I===S,_=(0,a.Z)({},b),w?_.whitePlayerData={score:h,time:f,moves:m}:_.blackPlayerData={score:h,time:f,moves:m},n.next=23,i(co(T,h,(0,a.Z)({level:d},_)));case 23:i({type:ni,payload:{mode:e}});case 24:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}()},lc=function(){var e=(0,s.Z)(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("SOLO"!=window.FBInstant.context.getType()){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,new(c())((function(e){try{if("SOLO"==window.FBInstant.context.getType())return e();var t=setInterval((function(){"SOLO"==window.FBInstant.context.getType()&&(clearInterval(t),e())}),200),n=function(){var n=(0,s.Z)(u().mark((function n(){return u().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,window.FBInstant.context.switchAsync("SOLO",!0);case 3:window.game.analytics.event(yn._.SWITCH_SOLO_CONTEXT,{success:!0}),n.next=11;break;case 6:n.prev=6,n.t0=n.catch(0),window.game.analytics.event(yn._.SWITCH_SOLO_CONTEXT,{success:!1}),clearInterval(t),e();case 11:case"end":return n.stop()}}),n,null,[[0,6]])})));return function(){return n.apply(this,arguments)}}();n()}catch(i){e()}})).then((function(){}));case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),dc=function(e){return function(t){var n=e.mode,i=e.status;t({type:ii,payload:{mode:n,status:i}}),To.instance.setGameMode(n),(0,he.sw)("game-mode",n)}},pc=n(664),fc=function(e){var t=e?e.split("_"):[],n=t.length>0?t[0]:"en";switch(n){case"id":case"in":n="id"}return n},gc=n(651),mc=function(e){function t(t,n){var i;(i=e.call(this,t)||this).payload=void 0,i.loading=void 0,i.photo=void 0,i.avtFrame=void 0,i.background=void 0,i.loadPhotoTimer=void 0,i.handleLoadPhotoAfterDelay=function(e,t){return function(){var n=i.scene.textures.get(e);n&&n.key===e?i.handleLoadComplete(e):(i.scene.load.once("filecomplete-image-"+e,i.handleLoadComplete),i.scene.load.image(e,t),i.scene.load.start())}},i.handleLoadComplete=function(e){if(i.scene){var t=i.payload,n=t.id,a=t.radius,s=void 0===a?0:a;if(n&&n===e){var r=n+"_bordered_"+s,o=s>0?r:n,c=i.scene.textures.get(o);if(c&&c.key===o)i.setPhoto(c.key);else if(0!=s&&s<100){if(!GameCore.Utils.Image.drawBorder({scene:i.scene,key:n,newKey:r,radius:s}))return void i.showLoading(!1);i.setPhoto(r)}else if(100==s){if(!GameCore.Utils.Image.drawCircle({scene:i.scene,key:n,newKey:r}))return void i.showLoading(!1);i.setPhoto(r)}else i.setPhoto(n)}}},i.handleLoadPhotoFailed=function(e){e.key===i.payload.id&&i.setDefaultAvatar(e.key)},i.scene.add.existing((0,$a.Z)(i)),i.payload=n,i.setSize(n.width,n.height),i.createBackground(),i.createLoading(),i.createPhoto(),i.createFrame();var a=i.payload,s=a.id,r=a.url,o=a.radius;return s&&r&&i.loadPhoto(s,r,o),i.addDefaultListeners(),i}(0,r.Z)(t,e);var n=t.prototype;return n.setFrame=function(e){this.avtFrame.setFrame(e),this.avtFrame.setVisible(!0)},n.setBackground=function(e){this.background.setFrame(e)},n.loadPhoto=function(e,t,n){var i;if(void 0===n&&(n=0),e=e||xa.Z.AVATAR.KEY,t=t||xa.Z.AVATAR.FILE,this.payload.id=e,this.payload.url=t,this.payload.radius=n,null==(i=this.loadPhotoTimer)||i.remove(),e&&t){var a=this.scene.textures.get(e);if(a&&a.key===e)this.handleLoadComplete(e);else{this.showLoading(!0);var s=this.payload.loadDelay||0;this.loadPhotoTimer=this.scene.time.delayedCall(s,this.handleLoadPhotoAfterDelay(e,t))}}else this.setPhoto(xa.Z.AVATAR.KEY)},n.addDefaultListeners=function(){var e=this;this.scene.load.on(Phaser.Loader.Events.FILE_LOAD_ERROR,this.handleLoadPhotoFailed),this.on(Phaser.GameObjects.Events.DESTROY,(function(){var t;null==(t=e.loadPhotoTimer)||t.remove(),e.scene.load.off(Phaser.Loader.Events.FILE_LOAD_ERROR,e.handleLoadPhotoFailed)}))},n.setDefaultAvatar=function(e){this.loadPhoto(e,xa.Z.AVATAR.FILE,this.payload.radius)},n.createBackground=function(){var e=this.payload,t=e.key,n=e.background;this.background=this.scene.make.image({key:t,frame:n}),this.background.setWorldSize(this.payload.backgroundWidth||this.width,this.payload.backgroundHeight||this.height),this.add(this.background)},n.createLoading=function(){this.loading=new os(this.scene),this.loading.setWorldSize(.75*this.width,.75*this.height),this.loading.setVisible(!1),this.add(this.loading)},n.createPhoto=function(){this.photo=this.scene.make.image({x:0,y:0,origin:{x:.5,y:.5},visible:!1}),this.add(this.photo)},n.createFrame=function(){var e=this.payload,t=e.key,n=e.frame,i=e.width,a=e.height;n?(this.avtFrame=this.scene.make.image({key:t,frame:n}),this.avtFrame.setWorldSize(i,a)):this.avtFrame=this.scene.make.image({x:0,y:0,origin:{x:.5,y:.5},visible:!1}),this.add(this.avtFrame)},n.showLoading=function(e){this.photo.setVisible(!e),this.loading.setVisible(e)},n.setPhoto=function(e){this.showLoading(!1),this.photo.setTexture(e),this.photo.setFrame(0);var t=this.payload,n=t.width,i=t.height,a=Math.min(n,i)-3;this.photo.setWorldSize(this.payload.photoWidth||a,this.payload.photoHeight||a),Phaser.Display.Align.In.Center(this.photo,this.background)},n.addBackground=function(){var e="avatar-background";if(!this.scene.textures.exists(e)){var t=this.width,n=this.height,i=this.scene.add.graphics();i.fillStyle(65280,.2),i.fillRect(0,0,t,n),i.generateTexture(e,t,n),i.destroy()}var a=this.scene.add.image(0,0,e);this.add(a)},t}(Phaser.GameObjects.Container),vc=mc,yc=An.Z.DEFAULT,Ac=yc.KEY,Ec=yc.FRAME,Tc=function(e){function t(t){var n;return(n=e.call(this,t,{key:Ac,frame:Ec.AVATAR_FRAME_BLUE,background:Ec.AVATAR_BG_BLUE,width:60,height:60})||this).scene=void 0,n.scene=t,n}return(0,r.Z)(t,e),t.prototype.setHighlight=function(e){e?this.avtFrame.setFrame(Ec.AVATAR_FRAME_YELLOW):this.avtFrame.setFrame(Ec.AVATAR_FRAME_BLUE)},t}(vc),Cc=Tc,Sc=An.Z.DEFAULT,bc=Sc.KEY,Ic=Sc.FRAME,wc=function(e){function t(t,n){var i;return(i=e.call(this,t)||this).scene=void 0,i.payload=void 0,i.avatar=void 0,i.block=void 0,i.rankIcon=void 0,i.rankText=void 0,i.playerScore=void 0,i.label=void 0,i.scene=t,i.createBlock(),i.createAvatar(),i.createRankIcon(),i.createRankText(),i.createLabel(),i.createPlayerScore(),n&&i.updateInfo(n),i.scene.add.existing((0,$a.Z)(i)),i}(0,r.Z)(t,e);var n=t.prototype;return n.updateInfo=function(e){this.payload=e,this.updateAvatar(),this.updateRankIcon(),this.updateRankText(),this.updatePlayerScore()},n.setLabel=function(e){this.label.setText(e)},n.setRank=function(e){this.rankText.setText(e)},n.setScore=function(e){this.playerScore.setText(e)},n.setHighlight=function(e){e?(this.y-=6,this.scale+=.1,this.label.scale+=.15,this.block.setFrame(Ic.BLOCK_LEADER_YELLOW)):(this.y+=6,this.scale-=.1,this.label.scale-=.15,this.block.setFrame(Ic.BLOCK_LEADER_BLUE)),this.avatar.setHighlight(e)},n.createBlock=function(){this.block=this.scene.make.image({key:bc,frame:Ic.BLOCK_LEADER_BLUE}),this.block.setWorldSize(79,99),this.add(this.block)},n.createAvatar=function(){this.avatar=new Cc(this.scene),Phaser.Display.Align.In.TopCenter(this.avatar,this.block,0,this.avatar.displayHeight/2-4),this.add(this.avatar)},n.updateAvatar=function(){var e=this.payload,t=e.playerId,n=e.photo;this.avatar.loadPhoto(t,n,50)},n.getRankFrame=function(){var e=Ic.ICON_FLAG;switch(this.payload.rank){case 1:e=Ic.ICON_CUP_GOLD;break;case 2:e=Ic.ICON_CUP_SILVER;break;case 3:e=Ic.ICON_CUP_COPPER}return e},n.createRankIcon=function(){var e=Ic.ICON_FLAG;this.rankIcon=this.scene.make.image({key:bc,frame:e}),e!=Ic.ICON_FLAG?this.rankIcon.setWorldSize(46,30):this.rankIcon.setWorldSize(27,27),Phaser.Display.Align.In.Center(this.rankIcon,this.block,0,-15),this.add(this.rankIcon)},n.updateRankIcon=function(){var e=this.getRankFrame();this.rankIcon.setFrame(e),e!=Ic.ICON_FLAG?this.rankIcon.setWorldSize(46,30):this.rankIcon.setWorldSize(27,27),Phaser.Display.Align.In.Center(this.rankIcon,this.block,0,-15)},n.createRankText=function(){this.rankText=this.scene.make.bitmapText({font:gc.Z.PRIMARY.KEY,size:this.scene.fontSize(18),origin:{x:.5,y:.5},text:"1"}),Phaser.Display.Align.In.Center(this.rankText,this.rankIcon,0,-2),this.add(this.rankText)},n.updateRankText=function(){this.rankText.setText(this.payload.rank.toString())},n.createLabel=function(){this.label=this.scene.make.bitmapText({font:gc.Z.PRIMARY.KEY,size:this.scene.fontSize(14),origin:{x:.5,y:0},text:"Play"}),Phaser.Display.Align.In.BottomCenter(this.label,this.block,0,-10),this.add(this.label)},n.createPlayerScore=function(){this.playerScore=this.scene.make.bitmapText({font:gc.Z.PRIMARY.KEY,size:this.scene.fontSize(18),origin:{x:.5,y:.5},text:"132500"}),this.playerScore.setTint(5582186),Phaser.Display.Align.In.Center(this.playerScore,this.block,0,5),this.add(this.playerScore)},n.updatePlayerScore=function(){this.playerScore.setText(Math.floor(this.payload.score).toString())},(0,ce.Z)(t,[{key:"onClick",set:function(e){var t=this.block,n=t.width,i=t.height;this.setSize(n,i+this.avatar.height),this.setInteractive({useHandCursor:!0}),this.off(Phaser.Input.Events.GAMEOBJECT_POINTER_DOWN),this.on(Phaser.Input.Events.GAMEOBJECT_POINTER_DOWN,e)}}]),t}(Phaser.GameObjects.Container),_c=wc,xc=function(e){function t(t,n){var i;return(i=e.call(this,t)||this).scene=void 0,i.payload=void 0,i.leaderBlocks=void 0,i.entrancesAnimation=void 0,i.listLeaderBlocks=void 0,i.handleChallengeFriend=function(e){return function(){i.scene.storage.dispatch(ic(e))}},i.handleShareLeaderboard=function(){i.scene.audio.playSound(hs.Z.BUTTON_CLICK),i.scene.storage.dispatch(Mo())},i.handleMatchingGroup=(0,s.Z)(u().mark((function e(){var t,n,a,s,r,o,c,h,l;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=i.scene,n=t.player,a=t.storage,s=t.game,r=t.facebook,e.prev=1,s.globalScene.screen.open(cs.o4.NOTIFY_SCREEN,{message:"loading",loading:!0}),o=n.getPlayer(),c="global","en"===(h=fc(o.locale))&&(c="en"),"in"===h&&(c="in"),e.next=10,r.matchPlayerAsync(c,!0,!0);case 10:if(l=e.sent,s.globalScene.screen.close(cs.o4.NOTIFY_SCREEN),l){e.next=14;break}return e.abrupt("return");case 14:a.dispatch(sc()),e.next=21;break;case 17:e.prev=17,e.t0=e.catch(1),s.globalScene.screen.close(cs.o4.NOTIFY_SCREEN),e.t0 instanceof Error&&(0,he.tO)(e.t0);case 21:case"end":return e.stop()}}),e,null,[[1,17]])}))),i.scene=t,i.setName("LeadersBar"),i.listLeaderBlocks=[],i.createLeaderBlocks(),i.createEntrancesAnimation(),n&&i.updateInfo(n),i.scene.add.existing((0,$a.Z)(i)),i}(0,r.Z)(t,e);var n=t.prototype;return n.updateInfo=function(e){var t=this;this.payload=e;var n,i=!1,a=this.payload,s=a.playerId;(a.leaders.forEach((function(e){var n,a=t.leaderBlocks.getFirstDead(!0);a.updateInfo(e),-1===e.score?(a.setRank(""),a.setLabel("Join"),a.setScore("Global"),a.onClick=t.handleMatchingGroup):e.playerId===s?(a.setLabel("Share"),a.setHighlight(!0),a.onClick=t.handleShareLeaderboard):a.onClick=t.handleChallengeFriend(e.playerId),t.add(a),a.setVisible(!0),a.setActive(!0),tn()(n=t.listLeaderBlocks).call(n,a)<0&&(i=!0)})),this.alignBlocks(),i)&&(this.listLeaderBlocks=Le()(n=this.leaderBlocks.getChildren()).call(n,(function(e){return e.active})),this.createEntrancesAnimation());this.runAnimation()},n.killAndHideAll=function(){var e=this;this.removeAll(!1),this.leaderBlocks.getChildren().forEach((function(t){return e.leaderBlocks.killAndHide(t)}))},n.runAnimation=function(){this.leaderBlocks.setAlpha(0),this.entrancesAnimation.play()},n.createEntrancesAnimation=function(){this.entrancesAnimation=new pc.Z({targets:this.listLeaderBlocks,delay:this.scene.tweens.stagger(50,{start:400}),props:{y:{from:100,to:0},alpha:{from:0,to:1}}})},n.alignBlocks=function(){var e=-(this.leaderBlocks.getLength()-1)/2*95;this.leaderBlocks.setX(e,95)},n.createLeaderBlocks=function(){this.leaderBlocks=this.scene.add.group({classType:_c})},t}(Phaser.GameObjects.Container),Pc=xc,kc=n(668),Oc=An.Z.DEFAULT,Lc=Oc.KEY,Rc=Oc.FRAME,Bc=function(e){function t(t){var n;return(n=e.call(this,t,Lc,Rc.BUTTON_YELLOW_CIRCLE,100.05,78.2)||this).scene=void 0,n.setName("Home"),n.scene=t,n.createIcon(),n}return(0,r.Z)(t,e),t.prototype.createIcon=function(){var e=this.scene.make.image({key:Lc,frame:Rc.ICON_FLAT_HOME});e.setSize(43,43).setDisplaySize(43,43),Phaser.Display.Align.In.Center(e,this.button),this.add(e)},t}(kc.Z),Dc=Bc,Nc=An.Z.DEFAULT,Mc=Nc.KEY,Gc=Nc.FRAME,Zc=function(e){function t(t){var n;return(n=e.call(this,t,Mc,Gc.BUTTON_GREEN_SHORT,176,77.05)||this).scene=void 0,n.setName("PlayWithFriends"),n.scene=t,n.createLabel(),n}return(0,r.Z)(t,e),t.prototype.createLabel=function(){var e=this.scene.make.bitmapText({font:gc.Z.PRIMARY.KEY,size:this.scene.fontSize(30),text:"PLAY"});Phaser.Display.Align.In.Center(e,this.button,0,-12);var t=this.scene.make.bitmapText({font:gc.Z.PRIMARY.KEY,size:this.scene.fontSize(18),text:"WITH FRIENDS"});Phaser.Display.Align.In.Center(t,this.button,0,11),this.add([e,t])},t}(kc.Z),Fc=Zc,Uc=An.Z.DEFAULT,zc=Uc.KEY,Wc=Uc.FRAME,Yc=function(e){function t(t){var n;return(n=e.call(this,t,zc,Wc.BUTTON_YELLOW_CIRCLE,100.05,78.2)||this).scene=void 0,n.setName("Rank"),n.scene=t,n.createIcon(),n}return(0,r.Z)(t,e),t.prototype.createIcon=function(){var e=this.scene.make.image({key:zc,frame:Wc.ICON_FLAT_RANK});e.setSize(43,43).setDisplaySize(43,43),Phaser.Display.Align.In.Center(e,this.button),this.add(e)},t}(kc.Z),Hc=Yc,Kc=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n.homeButton=void 0,n.rankButton=void 0,n.pwfButton=void 0,n.entrancesAnimation=void 0,n.runAnimation=function(){n.entrancesAnimation.play()},n.scene=t,n.setName("FooterBar"),n.createHomeButton(),n.createRankButton(),n.createPlayWithFriendsButton(),n.createEntrancesAnimation(),n.alignIcons(),n.scene.add.existing((0,$a.Z)(n)),n}(0,r.Z)(t,e);var n=t.prototype;return n.createEntrancesAnimation=function(){this.entrancesAnimation=new pc.Z({targets:[this],delay:800,props:{y:"-=5",alpha:{start:0,from:0,to:1}}})},n.alignIcons=function(){Phaser.Display.Align.In.Center(this.homeButton,this,-130,-6),Phaser.Display.Align.In.Center(this.pwfButton,this,0,-6),Phaser.Display.Align.In.Center(this.rankButton,this,130,-6)},n.createHomeButton=function(){this.homeButton=new Dc(this.scene),this.add(this.homeButton)},n.createRankButton=function(){this.rankButton=new Hc(this.scene),this.add(this.rankButton)},n.createPlayWithFriendsButton=function(){this.pwfButton=new Fc(this.scene),this.add(this.pwfButton)},t}(Phaser.GameObjects.Container),jc=Kc,Vc=n(661),Jc={targets:[],yoyo:!0,duration:120,ease:Phaser.Math.Easing.Circular.Out,props:{scale:{from:1,to:1.3}}},Xc=function(e){function t(t){return e.call(this,Jc,t)||this}return(0,r.Z)(t,e),t}(es.Z),qc=An.Z.DEFAULT,Qc=qc.KEY,$c=qc.FRAME,eh=function(e){function t(t,n,i,a,s){var r;return(r=e.call(this,t,n,i)||this).barTopLeft=void 0,r.barTopMid=void 0,r.barTopRight=void 0,r.barMidLeft=void 0,r.barMidBg=void 0,r.barMidRight=void 0,r.barBottomLeft=void 0,r.barBottomMid=void 0,r.barBottomRight=void 0,r.setSize(a,s),r.setDepth(gn.Z.POPUP),r.createPopup(),r.scene.add.existing((0,$a.Z)(r)),r}(0,r.Z)(t,e);var n=t.prototype;return n.createPopup=function(){this.createPopupImages(),this.updatePopupSize(),this.alignPopupImages()},n.createPopupImages=function(){this.barTopLeft=this.scene.add.image(0,0,Qc,$c.POPUP_TOP_LEFT),this.barTopMid=this.scene.add.image(0,0,Qc,$c.POPUP_TOP_MID),this.barTopRight=this.scene.add.image(0,0,Qc,$c.POPUP_TOP_RIGHT),this.barMidLeft=this.scene.add.image(0,0,Qc,$c.POPUP_MID_LEFT),this.barMidBg=this.scene.add.image(0,0,Qc,$c.POPUP_MID_MID),this.barMidRight=this.scene.add.image(0,0,Qc,$c.POPUP_MID_RIGHT),this.barBottomLeft=this.scene.add.image(0,0,Qc,$c.POPUP_BOTTOM_LEFT),this.barBottomMid=this.scene.add.image(0,0,Qc,$c.POPUP_BOTTOM_MID),this.barBottomRight=this.scene.add.image(0,0,Qc,$c.POPUP_BOTTOM_RIGHT),this.barTopLeft.setWorldSize(65,48),this.barTopMid.setWorldSize(65,48),this.barTopRight.setWorldSize(65,48),this.barMidLeft.setWorldSize(65,48),this.barMidBg.setWorldSize(65,48),this.barMidRight.setWorldSize(65,48),this.barBottomLeft.setWorldSize(65,48),this.barBottomMid.setWorldSize(65,48),this.barBottomRight.setWorldSize(65,48),this.add([this.barTopRight,this.barTopMid,this.barBottomLeft,this.barBottomRight,this.barMidLeft,this.barMidRight,this.barTopLeft,this.barBottomMid,this.barMidBg])},n.updatePopupSize=function(){this.barTopMid.setWorldSize(this.width-129,this.barTopMid.height),this.barMidLeft.setWorldSize(this.barMidLeft.width,this.height-95),this.barMidBg.setWorldSize(this.width-129,this.height-95),this.barMidRight.setWorldSize(this.barMidRight.width,this.height-95),this.barBottomMid.setWorldSize(this.width-129,this.barBottomMid.height)},n.alignPopupImages=function(){Phaser.Display.Align.In.TopLeft(this.barTopLeft,this),Phaser.Display.Align.In.TopCenter(this.barTopMid,this),Phaser.Display.Align.In.TopRight(this.barTopRight,this),Phaser.Display.Align.In.LeftCenter(this.barMidLeft,this),Phaser.Display.Align.In.Center(this.barMidBg,this),Phaser.Display.Align.In.RightCenter(this.barMidRight,this),Phaser.Display.Align.In.BottomLeft(this.barBottomLeft,this),Phaser.Display.Align.In.BottomCenter(this.barBottomMid,this),Phaser.Display.Align.In.BottomRight(this.barBottomRight,this)},(0,ce.Z)(t,[{key:"onClose",set:function(e){this.setInteractive({useHandCursor:!0}),this.on(Phaser.Input.Events.GAMEOBJECT_POINTER_DOWN,e)}}]),t}(Phaser.GameObjects.Container),th=eh,nh=function(e){function t(t,n){var i;return(i=e.call(this,t)||this).payload=void 0,i.mainText=void 0,i.shadowText=void 0,i.payload=n,i.createMainText(),i.createShadowText(),i.updateSize(),i.moveDown(i.shadowText),i.scene.add.existing((0,$a.Z)(i)),i}(0,r.Z)(t,e);var n=t.prototype;return n.setText=function(e){this.mainText.setText(e),this.shadowText.setText(e),this.updateSize()},n.setTintText=function(e,t,n,i){this.mainText.setTint(e,t,n,i)},n.setDropShadow=function(e,t,n,i){void 0===i&&(i=1),this.shadowText.setVisible(!0),this.shadowText.setTint(n),this.shadowText.setAlpha(i),Phaser.Display.Align.In.Center(this.shadowText,this.mainText,e,t)},n.updateSize=function(){var e=this.mainText,t=e.width,n=e.height;this.setSize(t,n)},n.createMainText=function(){this.mainText=this.scene.make.bitmapText({font:this.payload.font,size:this.payload.size,origin:{x:.5,y:.5}}),this.add(this.mainText)},n.createShadowText=function(){this.shadowText=this.scene.make.bitmapText({font:this.payload.font,size:this.payload.size,origin:{x:.5,y:.5},visible:!1}),this.add(this.shadowText)},t}(Phaser.GameObjects.Container),ih=nh,ah=n(670),sh=An.Z.DEFAULT,rh=sh.KEY,oh=sh.FRAME,ch=function(e){function t(t){var n;return(n=e.call(this,t)||this).cat=void 0,n.effect=void 0,n.runStarTwinkle=function(){var e=n.cat,t=e.x,i=e.y,a=e.displayWidth,s=e.displayHeight,r=i-20;n.effect.run(1,t,r,a,s)},n.createEffect(),n.createCat(),n.runCatAnimation(),n.scene.add.existing((0,$a.Z)(n)),n}(0,r.Z)(t,e);var n=t.prototype;return n.createCat=function(){this.cat=this.scene.make.image({key:rh,frame:oh.THE_CAT,origin:{x:.5,y:1}}),this.cat.setWorldSize(204.5,112.5),this.cat.setY(this.cat.height/2),this.add(this.cat)},n.createEffect=function(){this.effect=new ah.Z(this.scene),this.add(this.effect)},n.runCatAnimation=function(){new Vc.Z({targets:[this.cat],duration:1e3,props:{scale:"+=0.02"}}).play()},t}(Phaser.GameObjects.Container),hh=ch,uh=An.Z.DEFAULT,lh=uh.KEY,dh=uh.FRAME,ph=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n.bestScore=void 0,n.payload=void 0,n.theCat=void 0,n.popup=void 0,n.ribbon=void 0,n.yourScoreText=void 0,n.bestScoreText=void 0,n.currentScoreText=void 0,n.entrancesAnimation=void 0,n.scoreAnimation=void 0,n.counterAnimation=void 0,n.scene=t,n.bestScore=0,n.createPopup(),n.createTheCat(),n.createRibbon(),n.createYourScoreText(),n.createCurrentScore(),n.createBestScore(),n.createScoreAnimation(),n.createEntrancesAnimation(),n.scene.add.existing((0,$a.Z)(n)),n}(0,r.Z)(t,e);var n=t.prototype;return n.updateData=function(e){this.payload=e;var t=e.bestScore,n=e.currentScore;if(n<=t)return this.setBestScore(t),this.setCurrentScore(n),void this.runScoreAnimation();this.runAnimation()},n.runAnimation=function(){var e=this;this.runScoreCounter(),this.scene.time.delayedCall(1300,(function(){e.entrancesAnimation.play(),e.scene.audio.playSound(hs.Z.SCORE_COUNTER)}))},n.runScoreCounter=function(){var e,t=this,n=this.payload,i=n.bestScore,a=n.currentScore;null==(e=this.counterAnimation)||e.remove(),this.counterAnimation=this.scene.tweens.addCounter({from:0,to:a,delay:500,duration:2e3,completeDelay:300,onUpdate:function(e){var n=Math.floor(e.getValue());t.runScoreAnimation(),t.setCurrentScore(n)},onComplete:function(){t.bestScore=i,t.setBestScore(i),t.setCurrentScore(a),t.counterAnimation.remove()}})},n.runScoreAnimation=function(){this.scoreAnimation.play()},n.setBestScore=function(e){this.bestScoreText.setText("Best score: "+e)},n.setCurrentScore=function(e){this.currentScoreText.setText(""+e)},n.createPopup=function(){this.popup=new th(this.scene,0,0,284,240),this.add(this.popup)},n.createTheCat=function(){this.theCat=new hh(this.scene),Phaser.Display.Align.In.TopCenter(this.theCat,this.popup),this.add(this.theCat)},n.createRibbon=function(){this.ribbon=this.scene.make.image({key:lh,frame:dh.RIBBON_LONG}),this.ribbon.setSize(341,80).setDisplaySize(341,80),Phaser.Display.Align.In.Center(this.ribbon,this.theCat,0,93),this.add(this.ribbon)},n.createYourScoreText=function(){this.yourScoreText=this.scene.make.bitmapText({font:gc.Z.PRIMARY.KEY,size:this.scene.fontSize(30),origin:{x:.5,y:.5},text:"Your score"}),Phaser.Display.Align.In.Center(this.yourScoreText,this.ribbon,0,-10),this.add(this.yourScoreText)},n.createCurrentScore=function(){this.currentScoreText=new ih(this.scene,{font:gc.Z.PRIMARY.KEY,size:this.scene.fontSize(60)}),this.currentScoreText.setTintText(15779090,15779090,15704623,15704623),this.currentScoreText.setDropShadow(0,2,8804140),Phaser.Display.Align.In.Center(this.currentScoreText,this.popup,0,30),this.add(this.currentScoreText)},n.createBestScore=function(){this.bestScoreText=this.scene.make.bitmapText({font:gc.Z.PRIMARY.KEY,size:this.scene.fontSize(24),origin:{x:.5,y:.5},text:"Best score: "+this.bestScore}),this.bestScoreText.setTint(10494183),Phaser.Display.Align.In.BottomCenter(this.bestScoreText,this.popup,0,-25),this.add(this.bestScoreText)},n.createEntrancesAnimation=function(){this.entrancesAnimation=new Vc.Z({targets:[this],repeat:0,duration:200,props:{scale:"+=0.03"}})},n.createScoreAnimation=function(){this.scoreAnimation=new Xc({targets:[this.currentScoreText],props:{scale:{from:1,to:1.3}}})},t}(Phaser.GameObjects.Container),fh=ph,gh=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n.bestScoreBlock=void 0,n.scene=t,n.createBestScoreBlock(),n.scene.add.existing((0,$a.Z)(n)),n}return(0,r.Z)(t,e),t.prototype.createBestScoreBlock=function(){this.bestScoreBlock=new fh(this.scene),this.add(this.bestScoreBlock)},t}(Phaser.GameObjects.Container),mh=gh,vh=n(673),yh=n(657),Ah={targets:[],duration:600,ease:Phaser.Math.Easing.Back.Out,props:{y:{from:250,to:0},scale:{from:.9,to:1},alpha:{start:0,from:0,to:1}}},Eh=function(e){function t(t){return e.call(this,Ah,t)||this}return(0,r.Z)(t,e),t}(es.Z),Th=n(671),Ch=n(672),Sh=An.Z.DEFAULT,bh=Sh.KEY,Ih=Sh.FRAME,wh=function(e){function t(t,n,i,a){var s;return(s=e.call(this,t,n,i,a)||this).avatar=void 0,s.scoreText=void 0,s.shareButton=void 0,s.bigStarExplosive=void 0,s.open=function(t){e.prototype.open.call((0,$a.Z)(s),t);var n=s.getData("bestScore");s.setBestScore(n);var i=s.scene.player.getPlayer();s.avatar.loadPhoto(i.playerId,i.photo),s.runOpenAnimation(),s.scene.audio.playSound(hs.Z.CONGRATULATION)},s.handleClose=function(){s.scene.screen.close(s.name)},s.handleShareBestScore=function(){s.scene.storage.dispatch(Bo())},s.runBigStarExplosive=function(){Phaser.Display.Align.In.Center(s.bigStarExplosive,s.scoreText),s.bigStarExplosive.run()},s.setDepth(cs.Ks.POPUP),s.background.setAlpha(.8),s.createObjects(),s}(0,r.Z)(t,e);var n=t.prototype;return n.createObjects=function(){this.createTitle(),this.createClose(),this.createBestScoreTitle(),this.createPlayerAvatar(),this.createGlowEffect(),this.createBestScoreNumber(),this.createShareButton(),this.createStarTwinkleEffect(),this.createBigStarExplosive()},n.setBestScore=function(e){this.scoreText.setText(""+e)},n.createTitle=function(){var e=this.scene.make.image({key:bh,frame:Ih.RIBBON_SMALL});e.setSize(162,36).setDisplaySize(162,36);var t=-90;Phaser.Display.Align.In.TopCenter(e,this.zone,0,t);var n=this.scene.make.bitmapText({font:gc.Z.PRIMARY.KEY,size:10,text:"Today Record"});t=-5,Phaser.Display.Align.In.Center(n,e,0,t),this.add([e,n])},n.createClose=function(){var e=new kc.Z(this.scene,bh,Ih.BUTTON_CLOSE,38,38);e.setName("Close"),this.add(e),Phaser.Display.Align.In.TopRight(e,this.zone,-60,-50),e.onClick=this.handleClose},n.createBestScoreTitle=function(){var e=this.scene.make.bitmapText({font:gc.Z.PRIMARY.KEY,size:22,text:"bestScore"});this.add(e),e.setTint(13256697),Phaser.Display.Align.In.TopCenter(e,this.zone,0,-130)},n.createBestScoreNumber=function(){this.scoreText=new ih(this.scene,{font:gc.Z.PRIMARY.KEY,size:40}),this.add(this.scoreText),this.scoreText.setTintText(15911443,15911443,15902254,15902254),this.scoreText.setDropShadow(0,2,12871743),Phaser.Display.Align.In.TopCenter(this.scoreText,this.zone,0,-230)},n.createPlayerAvatar=function(){this.avatar=new vc(this.scene,{key:bh,frame:Ih.AVATAR_FRAME_YELLOW_BIG,background:Ih.AVATAR_BG_YELLOW_BIG,width:89,height:89}),this.avatar.background.setSize(89,95).setDisplaySize(89,95),this.avatar.photo.setSize(89,95).setDisplaySize(89,95),this.avatar.avtFrame.setSize(89,95).setDisplaySize(89,95),this.add(this.avatar),Phaser.Display.Align.In.Center(this.avatar,this.zone,0,20)},n.createGlowEffect=function(){var e=An.Z.EFFECTS,t=e.KEY,n=e.FRAME,i=this.scene.make.image({key:t,frame:n.FX_GLOW_LIGHT});i.setWorldSize(246,246),this.add(i),this.moveDown(i),Phaser.Display.Align.In.Center(i,this.avatar),this.scene.tweens.add({targets:[i],duration:6e3,repeat:-1,props:{angle:360,scale:{value:"+=0.01",yoyo:!0,duration:800,ease:Phaser.Math.Easing.Sine.InOut}}})},n.createShareButton=function(){this.shareButton=new Th.Z(this.scene,{key:bh,button:Ih.BUTTON_BLUE,icon:Ih.ICON_FLAT_SHARE,text:"Share"},168,82.8),this.shareButton.setName("Share"),this.add(this.shareButton),Phaser.Display.Align.In.BottomCenter(this.shareButton,this.zone,0,-80),this.shareButton.onClick=this.handleShareBestScore},n.createStarTwinkleEffect=function(){var e=new ah.Z(this.scene),t=this.scoreText,n=t.x,i=t.y;e.run(2,n,i,300,120)},n.createBigStarExplosive=function(){this.bigStarExplosive=new Ch.Z(this.scene)},n.runOpenAnimation=function(){this.runBigStarExplosive(),this.runScoreEntrancesAnimation(),this.runAvatarEntrancesAnimation(),this.runShareEntrancesAnimation()},n.runScoreEntrancesAnimation=function(){this.scene.tweens.killTweensOf(this.scoreText),new Eh({targets:[this.scoreText],duration:300,props:{y:{from:0,to:this.scoreText.y}}}).play()},n.runAvatarEntrancesAnimation=function(){this.scene.tweens.killTweensOf(this.avatar);var e=this.avatar.scale;new vh.Z({targets:[this.avatar],duration:400,props:{scale:{from:0,to:e}}}).play()},n.runShareEntrancesAnimation=function(){this.scene.tweens.killTweensOf(this.shareButton),this.shareButton.setAlpha(0),new yh.Z({targets:[this.shareButton],delay:300}).play()},t}(GameCore.Screen),_h=wh,xh=GameCore.Configs.LeadersBoard,Ph=function(e){function t(){for(var t,n,i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];return(n=e.call.apply(e,P()(t=[this]).call(t,a))||this).bestScore=void 0,n.currentScore=void 0,n.loading=void 0,n.leadersBar=void 0,n.footerBar=void 0,n.main=void 0,n.confettiLeftEffect=void 0,n.confettiRightEffect=void 0,n.run=function(){n.updateLeaders(),n.updateScore(),n.explodeConfettiEffect(),n.main.bestScoreBlock.counterAnimation&&n.main.bestScoreBlock.counterAnimation.state!==Phaser.Tweens.REMOVED?n.main.bestScoreBlock.counterAnimation.on(Phaser.Tweens.Events.TWEEN_COMPLETE,(function(){n.handleShowBestScorePopup(),n.handleShowResultChallengePopup()})):n.time.delayedCall(800,(function(){n.handleShowBestScorePopup(),n.handleShowResultChallengePopup()})),n.footerBar.setAlpha(0),n.footerBar.runAnimation(),n.audio.pauseMusic(),n.audio.playSound(hs.Z.GAME_OVER_SCENE)},n.runConfettiEffect=function(){var e=n.gameZone.displayWidth;n.confettiLeftEffect.stop(),n.confettiRightEffect.stop(),n.children.bringToTop(n.confettiLeftEffect),n.children.bringToTop(n.confettiRightEffect),n.confettiLeftEffect.run(1,0,-100),n.confettiRightEffect.run(1,0+e,-100),n.tweens.addCounter({delay:1e4,from:100,to:0,ease:Phaser.Math.Easing.Cubic.Out,duration:400,onUpdate:function(e){var t,i,a=e.getValue()/100;null==(t=n.confettiLeftEffect.emitter)||t.setAlpha(a),null==(i=n.confettiRightEffect.emitter)||i.setAlpha(a)},onComplete:function(){var e,t;null==(e=n.confettiLeftEffect.emitter)||e.setAlpha(1),null==(t=n.confettiRightEffect.emitter)||t.setAlpha(1),n.confettiLeftEffect.stop(),n.confettiRightEffect.stop()}})},n.explodeConfettiEffect=function(){var e=n.gameZone.displayWidth,t=-100,i=e;n.tweens.addCounter({repeat:3,duration:500,onStart:function(){n.confettiLeftEffect.explode(6,0,t),n.confettiRightEffect.explode(6,0+i,t)},onRepeat:function(){n.confettiLeftEffect.explode(6,0,t),n.confettiRightEffect.explode(6,0+i,t)},completeDelay:7e3,onComplete:function(){n.tweens.addCounter({from:100,to:0,ease:Phaser.Math.Easing.Cubic.Out,duration:400,onUpdate:function(e){var t,i,a=e.getValue()/100;null==(t=n.confettiLeftEffect.emitter)||t.setAlpha(a),null==(i=n.confettiRightEffect.emitter)||i.setAlpha(a)},onComplete:function(){var e,t;null==(e=n.confettiLeftEffect.emitter)||e.setAlpha(1),null==(t=n.confettiRightEffect.emitter)||t.setAlpha(1),n.confettiLeftEffect.stop(),n.confettiRightEffect.stop()}})}})},n.handlePlayWithFriend=function(){n.storage.dispatch(ac())},n.handleHomeClick=function(){n.scene.switch(za.C.DASHBOARD_SCENE)},n.handleLeaderboardClick=function(){n.scene.switch(za.C.LEADERBOARD_SCENE)},n}(0,r.Z)(t,e);var n=t.prototype;return n.preload=function(){var e=this;this.events.on("resume",(function(){e.updateScore()})),this.events.on("sleep",(function(){e.storage.dispatch(ao())})),this.events.on("wake",this.run),this.events.on("create",this.run)},n.create=function(){e.prototype.create.call(this),this.createBackground(xa.Z.BACKGROUND.KEY);var t=this.player.getBestScore();this.bestScore=t,this.currentScore=0,this.createLoading(),this.createMain(),this.createLeadersBar(),this.createFooterBar(),this.createBestScoreScreen(),this.createConfettiSmallAnimation()},n.updateLeaders=function(){var e=this;this.leadersBar.killAndHideAll();var t=[{selector:js,callback:function(t){if(!1===t){var n=window.game.player.getPlayerId(),i=e.getLeadersExcludeIds([n]);e.updateLeaderBar(i)}e.loading.setVisible(t)}}];this.handleStateChange(t),this.storage.dispatch(zs(xh.LeaderboardId,ps,20))},n.getLeadersExcludeIds=function(e){var t=this.storage.getState(),n=Ks(t),i={};if(!e||0===e.length)return n;for(var a in n)if(tn()(e).call(e,a)<0){var s=n[a],r=s.playerId,o=s.photo,c=s.score,h=s.rank;i[a]={playerId:r,photo:o,score:c,rank:h}}return i},n.updateScore=function(){var e=this.storage.getState(),t=Br(e),n=t.score,i=void 0===n?0:n,a=t.bestScore,s=void 0===a?0:a;this.bestScore=s<this.bestScore?this.bestScore:s,this.currentScore=i,this.main.bestScoreBlock.updateData({bestScore:this.bestScore,currentScore:this.currentScore})},n.createLoading=function(){this.loading=new os(this),Phaser.Display.Align.In.Center(this.loading,this.gameZone,0,120)},n.createMain=function(){this.bestScore=0,this.main=new mh(this),Phaser.Display.Align.In.TopCenter(this.main,this.gameZone,0,-230),this.main.bestScoreBlock.theCat.runStarTwinkle()},n.createLeadersBar=function(){this.leadersBar=new Pc(this),Phaser.Display.Align.In.Center(this.leadersBar,this.gameZone,0,120)},n.updateLeaderBar=function(e){var t={playerId:this.player.getPlayerId(),leaders:[]};for(var n in e){if(t.leaders.length>=3)break;var i=e[n],a=i.playerId,s=i.photo,r=i.score,o=i.rank;t.leaders.push({playerId:a,photo:s,score:r,rank:o})}t.leaders.push({playerId:xa.Z.ICON_EARTH.KEY,photo:xa.Z.ICON_EARTH.FILE,rank:4,score:-1}),this.leadersBar.updateInfo(t)},n.createFooterBar=function(){this.footerBar=new jc(this),Phaser.Display.Align.In.BottomCenter(this.footerBar,this.gameZone,0,-70),this.footerBar.homeButton.onClick=this.handleHomeClick,this.footerBar.pwfButton.onClick=this.handlePlayWithFriend,this.footerBar.rankButton.onClick=this.handleLeaderboardClick},n.createBestScoreScreen=function(){this.screen.add(cs.o4.BEST_SCORE_SCREEN,_h)},n.createConfettiSmallAnimation=function(){this.confettiLeftEffect=new us.Z(this,{speedX:{min:-20,max:100},rotate:{start:-1080,end:0}}),this.confettiRightEffect=new us.Z(this,{speedX:{min:20,max:-100},rotate:{start:0,end:1080}}),this.confettiLeftEffect.setDepth(gn.Z.EFFECT),this.confettiRightEffect.setDepth(gn.Z.EFFECT)},n.handleShowBestScorePopup=function(){var e;this.currentScore>this.bestScore&&this.storage.dispatch(go({bestScore:this.currentScore}));var t=this.storage.getState(),n=er(t),i=tn()(e=[ka,Ra]).call(e,n)>=0;this.currentScore>this.bestScore&&i&&(this.screen.open(cs.o4.BEST_SCORE_SCREEN,{bestScore:this.currentScore}),this.runConfettiEffect())},n.handleShowResultChallengePopup=function(){var e,t=this.storage.getState(),n=er(t);if(-1!==tn()(e=[Oa,La]).call(e,n)&&Ir(t)){var i=_r(t).playerId;n===La&&i===Pa.playerId||(this.scene.pause(za.C.GAME_OVER_SCENE),this.scene.launch(za.C.RESULT_MATCH_SCENE))}},t}(Xa.Z);var kh=Ph,Oh={DEPTH:{REMAINING_STOCK:12,HINT:25,CARD:10,CARD_SLOT:9},FOUNDATION_Y:70,VERTICAL_PILE_SPACE:21,MAX_HORIZONTAL_PILE_SPACE:62,MIN_VERTICAL_PILE_SPACE:18,MIN_VERTICAL_FACING_DOWN_CARD_SPACE:8,MAX_VERTICAL_FACING_DOWN_CARD_SPACE:10.5,SPACE_BETWEEN_PILE_AND_FOUNDATION:85,CARD_WIDTH:49,CARD_HEIGHT:72,NUMBER_OF_TARGET:4,NUMBER_OF_PILE:7,AUTO_MOVE_TIME:400,CARD_MOVE_TIME:300},Lh=function(){var e=window.game.player.getPlayerSettings(),t=window.game.world.isLandscape();return t&&e.largeWidthLayout?66/49:t?1.15:1},Rh=function(){var e=Lh();Oh.CARD_WIDTH=49*e,Oh.CARD_HEIGHT=72*e,Oh.VERTICAL_PILE_SPACE=21*e,Oh.MAX_VERTICAL_FACING_DOWN_CARD_SPACE=10.5*e},Bh=function(e){Oh.FOUNDATION_Y=e},Dh=Oh,Nh=n(660),Mh=n(39),Gh=n.n(Mh),Zh=n(123),Fh=n.n(Zh),Uh=n(87),zh=n.n(Uh),Wh=An.Z.GAMEPLAY_DEFAULT,Yh=Wh.KEY,Hh=Wh.FRAME,Kh=function(e){function t(t,n){var i;(i=e.call(this,t,0,0,Yh,Hh.IC_SLOT)||this).placement=void 0;var a=Dh.CARD_WIDTH,s=Dh.CARD_HEIGHT,r=Dh.DEPTH;return i.placement=n,i.setInteractive(),i.disableInteractive(),i.setWorldSize(a,s),i.setInteractive({useHandCursor:!0}),i.setDepth(r.CARD_SLOT),i.scene.add.existing((0,$a.Z)(i)),i}(0,r.Z)(t,e);var n=t.prototype;return n.onClick=function(e){var t=!1;this.on(Phaser.Input.Events.GAMEOBJECT_POINTER_DOWN,(function(){t=!0})),this.on(Phaser.Input.Events.GAMEOBJECT_POINTER_UP,(function(){t&&e(),t=!1})),this.on(Phaser.Input.Events.GAMEOBJECT_POINTER_OUT,(function(){t=!1}))},n.offClick=function(){this.off(Phaser.Input.Events.GAMEOBJECT_POINTER_DOWN),this.off(Phaser.Input.Events.GAMEOBJECT_POINTER_UP),this.off(Phaser.Input.Events.GAMEOBJECT_POINTER_OUT)},n.updateSize=function(){var e=Dh.CARD_WIDTH,t=Dh.CARD_HEIGHT;Dh.DEPTH;this.setWorldSize(e,t)},t}(Phaser.GameObjects.Image),jh=Kh,Vh=function(e){function t(t){var n;return(n=e.call(this)||this).boardGame=void 0,n.slot=void 0,n.cards=void 0,n.x=void 0,n.y=void 0,n.name=void 0,n.idx=void 0,n.boardGame=t,n.cards=[],n.slot=new jh(t.scene,(0,$a.Z)(n)),n.setIdx(-1),n}(0,r.Z)(t,e);var n=t.prototype;return n.setName=function(e){this.name=e},n.setIdx=function(e){this.idx=e},n.getIdx=function(){return this.idx},n.getname=function(){return this.name},n.setPosition=function(e,t){this.x=e,this.y=t,this.slot.setPosition(e,t)},n.addCard=function(e,t){if(e.scene.gameplay.cardsLayer.bringToTop(e.bg),e.scene.gameplay.cardsLayer.bringToTop(e),e.setPlacement(this),t){var n=this.getPlacingPosition(this.cards.length),i=n.x,a=n.y;e.moveTo(i,a,300)}this.cards.push(e)},n.pickTopCards=function(e){var t,n=this.cards.length;return 0==n?[]:zh()(t=this.cards).call(t,Math.max(n-e,0))},n.getLastCard=function(){return this.cards[this.cards.length-1]},n.getPlacingPosition=function(e){return{x:this.x,y:this.y}},n.canBePlace=function(e){return!1},n.update=function(e){},n.clear=function(){this.cards=[]},n.isEmpty=function(){return 0===this.cards.length},n.pickAllCards=function(){var e;return zh()(e=this.cards).call(e,0)},n.updateSlotSize=function(){this.slot.updateSize()},t}(Phaser.Events.EventEmitter),Jh=function(e){return e.Stock="stock",e.Waste="waste",e.Pile="pile",e.Foundation="foundation",e}(Jh||{}),Xh=Jh;function qh(e,t){var n="undefined"!==typeof I()&&_()(e)||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){var n;if(!e)return;if("string"===typeof e)return Qh(e,t);var i=T()(n=Object.prototype.toString.call(e)).call(n,8,-1);"Object"===i&&e.constructor&&(i=e.constructor.name);if("Map"===i||"Set"===i)return S()(e);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return Qh(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var i=0;return function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Qh(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var $h=function(e){function t(t){var n;return(n=e.call(this,t)||this).slot.kill(),n.setName(Xh.Waste),n}(0,r.Z)(t,e);var n=t.prototype;return n.alignBeforeAdd=function(){for(var e,t=this.boardGame.scene.player.getPlayerSettings(),n=this.x,i=this.y,a=this.cards.length,s=qh(this.cards);!(e=s()).done;){e.value.disableInteractive()}if(!(a<=2))for(var r=0;r<a;r++)if(this.cards.length-r<3){var o=r-this.cards.length+2;t.largeWidthLayout?this.cards[r].moveTo(n,i+32*o,200):this.cards[r].moveTo(n+16*o,i,200)}},n.align=function(){for(var e=this.cards.length,t=0;t<e;t++){var n=this.getPlacingPosition(t),i=n.x,a=n.y;this.cards[t].moveTo(i,a,200),t==e-1?this.cards[t].setInteractive():this.cards[t].disableInteractive()}},n.addCard=function(t,n){e.prototype.addCard.call(this,t,!1);var i=this.boardGame.scene.player.getPlayerSettings(),a=this.boardGame.scene.world.isLandscape();n&&this.align(),t.setFacingWithFlippingAnim(!0,!(i.largeWidthLayout&&a)),t.setInteractive()},n.getPlacingPosition=function(e){var t=this.boardGame.scene.player.getPlayerSettings(),n=this.boardGame.scene.world.isLandscape(),i=this.x,a=this.y,s=this.cards.length,r=e==s?2:Math.max(s>3?e-s+3:e,0);return n&&t.largeWidthLayout?{x:i,y:a+32*r}:{x:i+16*r,y:a}},n.removeAllCards=function(){var e;return zh()(e=this.cards).call(e,0)},n.clear=function(){this.cards=[]},n.canBePlace=function(e){return!1},t}(Vh),eu=$h,tu=function(e){return e[e.ACE=401]="ACE",e[e.TWO=402]="TWO",e[e.THREE=403]="THREE",e[e.FOUR=404]="FOUR",e[e.FIVE=405]="FIVE",e[e.SIX=406]="SIX",e[e.SEVEN=407]="SEVEN",e[e.EIGHT=408]="EIGHT",e[e.NINE=409]="NINE",e[e.TEN=410]="TEN",e[e.JACK=411]="JACK",e[e.QUEEN=412]="QUEEN",e[e.KING=413]="KING",e}(tu||{}),nu=function(e){return e[e.ACE=301]="ACE",e[e.TWO=302]="TWO",e[e.THREE=303]="THREE",e[e.FOUR=304]="FOUR",e[e.FIVE=305]="FIVE",e[e.SIX=306]="SIX",e[e.SEVEN=307]="SEVEN",e[e.EIGHT=308]="EIGHT",e[e.NINE=309]="NINE",e[e.TEN=310]="TEN",e[e.JACK=311]="JACK",e[e.QUEEN=312]="QUEEN",e[e.KING=313]="KING",e}(nu||{}),iu=function(e){return e[e.ACE=201]="ACE",e[e.TWO=202]="TWO",e[e.THREE=203]="THREE",e[e.FOUR=204]="FOUR",e[e.FIVE=205]="FIVE",e[e.SIX=206]="SIX",e[e.SEVEN=207]="SEVEN",e[e.EIGHT=208]="EIGHT",e[e.NINE=209]="NINE",e[e.TEN=210]="TEN",e[e.JACK=211]="JACK",e[e.QUEEN=212]="QUEEN",e[e.KING=213]="KING",e}(iu||{}),au=function(e){return e[e.ACE=101]="ACE",e[e.TWO=102]="TWO",e[e.THREE=103]="THREE",e[e.FOUR=104]="FOUR",e[e.FIVE=105]="FIVE",e[e.SIX=106]="SIX",e[e.SEVEN=107]="SEVEN",e[e.EIGHT=108]="EIGHT",e[e.NINE=109]="NINE",e[e.TEN=110]="TEN",e[e.JACK=111]="JACK",e[e.QUEEN=112]="QUEEN",e[e.KING=113]="KING",e}(au||{}),su=function(e){return e[e.ACE=1]="ACE",e[e.TWO=2]="TWO",e[e.THREE=3]="THREE",e[e.FOUR=4]="FOUR",e[e.FIVE=5]="FIVE",e[e.SIX=6]="SIX",e[e.SEVEN=7]="SEVEN",e[e.EIGHT=8]="EIGHT",e[e.NINE=9]="NINE",e[e.TEN=10]="TEN",e[e.JACK=11]="JACK",e[e.QUEEN=12]="QUEEN",e[e.KING=13]="KING",e}(su||{}),ru=function(){var e=(0,s.Z)(u().mark((function e(t,n){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new(c())((function(e){t.time.delayedCall(n,e)})));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),ou=ru,cu=function(e){function t(t){var n;return(n=e.call(this,t)||this).spaceBetweenFacingUpCards=Dh.VERTICAL_PILE_SPACE,n.setName(Xh.Pile),n}(0,r.Z)(t,e);var n=t.prototype;return n.updateCardPosition=function(e){if(0!==this.cards.length){var t=e||this.cards.length;this.updateSpaceBetweenFacingUpCards(t);for(var n=Dh.CARD_MOVE_TIME,i=this.y,a=1;a<t;a++){var s=this.getVerticalSpace(a,t),r=this.cards[a];if(r){var o=i+s;r.moveTo(this.x,o,n),i=o}}}},n.getVerticalSpace=function(e,t){void 0===e&&(e=0);var n=t||this.cards.length,i=this.getSpaceBetweenFacingDownCards(n),a=this.getSpaceBetweenFacingUpCards();return e<this.getIdxCardValidToMove(n)+1?i:a},n.getSpaceBetweenFacingDownCards=function(e){var t=Dh.MAX_VERTICAL_FACING_DOWN_CARD_SPACE,n=e||this.cards.length,i=this.boardGame.getMaxHeightTableau(),a=this.getIdxCardValidToMove(n)+1;if(0===a)return t;var s=i-(n-a)*this.spaceBetweenFacingUpCards;return s/a>t?t:s/a},n.getSpaceBetweenFacingUpCards=function(){return this.spaceBetweenFacingUpCards},n.updateSpaceBetweenFacingUpCards=function(e){var t=Dh.VERTICAL_PILE_SPACE,n=Dh.MIN_VERTICAL_FACING_DOWN_CARD_SPACE;this.spaceBetweenFacingUpCards=t;var i=e||this.cards.length;if(!(this.getSpaceBetweenFacingDownCards(i)>=Dh.MIN_VERTICAL_FACING_DOWN_CARD_SPACE)){var a=this.getIdxCardValidToMove()+1,s=this.cards.length-a;if(0!==s){var r=(this.boardGame.getMaxHeightTableau()-a*n)/s;this.spaceBetweenFacingUpCards=r}}},n.getIdxCardValidToMove=function(e){for(var t=this.cards,n=0,i=0;i<t.length;i++){if(t[i].isFacingUp())return n;n+=1}return void 0===e?n:n+(e-t.length)},n.addCardByDeal=function(){var t=(0,s.Z)(u().mark((function t(n,i,a){return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.prototype.addCard.call(this,n,i),this.cards.length===a&&this.cards.length>this.boardGame.getBoundNumberOfCards()&&this.updateCardPosition(),t.next=5,ou(this.boardGame.scene,Dh.CARD_MOVE_TIME);case 5:case"end":return t.stop()}}),t,this)})));return function(e,n,i){return t.apply(this,arguments)}}(),n.getPlacingPosition=function(){for(var e=this.x,t=this.y,n=0;n<this.cards.length;n++)this.cards[n].isFacingUp()?t+=this.boardGame.getVerticalSpacePile():t+=.5*this.boardGame.getVerticalSpacePile();return{x:e,y:t}},n.getSubCards=function(e){var t,n,i=Fh()(t=this.cards).call(t,(function(t){return t===e}));return T()(n=this.cards).call(n,i)},n.pickSubCards=function(e){var t,n,i=Fh()(t=this.cards).call(t,(function(t){return t===e}));return zh()(n=this.cards).call(n,i)},n.getFacingUpCards=function(){var e,t;if(0===this.cards.length)return[];var n=Fh()(e=this.cards).call(e,(function(e){return e.isFacingUp()}));return n<0?[]:T()(t=this.cards).call(t,n)},n.faceUpLast=function(){var e=this.cards.length;if(e>0){var t=this.cards[e-1];if(t.isFacingUp())return;return t.setFacingWithFlippingAnim(!0),t.setInteractive(),t}this.slot.setInteractive()},n.faceDownLast=function(){var e=this.cards.length;if(e>0){var t=this.cards[e-1];return t.setFacingWithFlippingAnim(!1),t.disableInteractive(),t}this.slot.setInteractive()},n.canBePlace=function(e){var t=GameCore.Configs.Gameplay.EditMode;if(GameCore.Utils.Valid.isDebugger()&&t)return!0;var n=e.getTag(),i=n%100,a=Math.floor((n-i)/300);if(0===this.cards.length)return n%100===su.KING;var s=this.cards[this.cards.length-1].getTag(),r=s%100;return a!=Math.floor((s-r)/300)&&i==r-1},n.canBeHint=function(e){var t=e.getTag(),n=t%100,i=Math.floor((t-n)/300);if(0===this.cards.length)return t%100===su.KING;var a=this.cards[this.cards.length-1].getTag(),s=a%100;return i!=Math.floor((a-s)/300)&&n==s-1},n.isLastCard=function(e){return this.cards[this.cards.length-1]===e},n.clear=function(){this.cards=[]},t}(Vh),hu=cu,uu=An.Z.GAMEPLAY_DEFAULT,lu=(uu.KEY,uu.FRAME),du=function(e){function t(t){var n;return(n=e.call(this,t)||this).cards=[],n.createAce(),n.setName(Xh.Foundation),n}(0,r.Z)(t,e);var n=t.prototype;return n.createAce=function(){var e=Dh.CARD_WIDTH,t=Dh.CARD_HEIGHT;Dh.DEPTH;this.slot.setFrame(lu.FOUNDATION_SLOT),this.slot.setWorldSize(e,t)},n.setPosition=function(t,n){e.prototype.setPosition.call(this,t,n)},n.canBePlace=function(e){var t=e.getTag(),n=t%100,i=(t-n)/100;if(0===this.cards.length)return t%100===su.ACE;var a=this.cards[this.cards.length-1].getTag(),s=a%100;return i==(a-s)/100&&n==s+1},n.isFull=function(){return 13===this.cards.length},t}(Vh),pu=function(e){return e[e.NONE=0]="NONE",e[e.DEALING=1]="DEALING",e[e.IDLE=2]="IDLE",e[e.PLAYING=3]="PLAYING",e[e.AUTO_COMPLETING=4]="AUTO_COMPLETING",e[e.OUT_OF_MOVE=5]="OUT_OF_MOVE",e[e.GAME_OVER=6]="GAME_OVER",e}({}),fu=An.Z.GAMEPLAY_DEFAULT,gu=fu.KEY,mu=fu.FRAME,vu=function(e){function t(t){var n;return(n=e.call(this,t)||this).hand=void 0,n.handScaleDefault=1,n.name="TutorialHand",n.addHand(),n.hand.scale,n.scene.add.existing((0,$a.Z)(n)),n}(0,r.Z)(t,e);var n=t.prototype;return n.addHand=function(){this.hand=this.scene.make.image({key:gu,frame:mu.HAND,origin:{x:.5,y:.5}}),this.hand.setWorldSize(65.5,55.5),this.handScaleDefault=this.hand.scale,this.resetHandPosition(),this.add(this.hand)},n.doubleTap=function(e,t,n){var i=this;this.setHandPositionOnDoubleClick(),this.scene.tweens.add({delay:e,targets:[this.hand],ease:Phaser.Math.Easing.Cubic.In,props:{scale:{duration:100,from:this.handScaleDefault,to:.8*this.handScaleDefault},angle:{from:0,value:-10,duration:100}},loop:1,yoyo:!0,onComplete:function(){t&&i.hide(),n&&n()}})},n.tapAndHold=function(e,t){this.scene.tweens.add({delay:e,targets:[this.hand],ease:Phaser.Math.Easing.Cubic.Out,props:{scale:{duration:200,from:this.handScaleDefault,to:.8*this.handScaleDefault},angle:{from:0,value:-10,duration:200}},onComplete:t})},n.unHold=function(e,t,n){var i=this;this.scene.tweens.add({delay:e,targets:[this.hand],ease:Phaser.Math.Easing.Cubic.Out,props:{scale:{duration:200,from:.8*this.handScaleDefault,to:this.handScaleDefault},angle:{from:-10,value:0,duration:200}},onComplete:function(){t&&i.hide(),n&&n()}})},n.show=function(){this.hand.setVisible(!0)},n.hide=function(){this.hand.setVisible(!1)},n.preDestroy=function(){this.scene.tweens.killTweensOf(this.hand)},n.kill=function(){e.prototype.kill.call(this),this.resetHandPosition()},n.setHandPositionOnDoubleClick=function(){this.hand.setPosition(5,5)},n.resetHandPosition=function(){this.hand.setPosition(20,20)},t}(Phaser.GameObjects.Container),yu=vu,Au=An.Z.CARD_BACK,Eu=Dh.DEPTH,Tu=function(){function e(e){this.boardGame=void 0,this.bg=void 0,this.hintLayer=void 0,this.hintContainer=void 0,this.group=void 0,this.hintTween=void 0,this.hand=void 0,this.running=!1,this.boardGame=e,this.hintLayer=e.scene.add.container(),this.hintLayer.setDepth(Eu.HINT),this.hintLayer.setVisible(!1),this.group=e.scene.add.group({defaultKey:An.Z.GAMEPLAY_DEFAULT.KEY}),this.createBg(),this.createContainer(),this.createTutorialHand()}var t=e.prototype;return t.createBg=function(){var e=this.boardGame.scene.add.image(0,0,An.Z.GAMEPLAY_DEFAULT.KEY,"blank"),t=this.boardGame.scene.world.getWorldSize(),n=t.width,i=t.height;e.setOrigin(0,0),e.setWorldSize(n,i),e.setAlpha(.5),e.setTint(1315862),this.bg=e,En.Z.registerObject(e),this.hintLayer.add(e)},t.createContainer=function(){this.hintContainer=this.boardGame.scene.add.container(),this.hintLayer.add(this.hintContainer)},t.fadeInHint=function(){this.running=!0,this.hintLayer.revive(),this.boardGame.scene.tweens.add({targets:[this.hintLayer],alpha:{from:0,to:1},duration:300})},t.fadeOutHint=function(){var e=this;this.boardGame.scene.tweens.add({targets:[this.hintLayer],alpha:{from:1,to:0},duration:300,onComplete:function(){e.hintLayer.kill(),e.running=!1}})},t.showDealerHint=function(){var e=this;if(this.canShowHint()){if(this.boardGame.stock.cards.length>0){var t=this.createCardBack();this.hintContainer.add([t])}var n=this.createHintGlow(),i=this.boardGame.stock.getPlacingPosition(0),a=i.x,s=i.y;this.hintContainer.add(n),this.hintContainer.setPosition(a,s),this.hintContainer.add(this.hand),this.hand.revive();var r=this.boardGame.scene.footer.hintBtn;r.setDisabled(!0),this.hintTween=this.boardGame.scene.tweens.addCounter({duration:800,onStart:function(){e.hand.doubleTap(0,!1)},onComplete:function(){e.hintContainer.getAll().forEach((function(t){return e.group.killAndHide(t)})),e.hintContainer.removeAll(),e.hand.kill(),e.fadeOutHint(),r.setDisabled(!1)}}),this.fadeInHint()}},t.canShowHint=function(){var e;return!this.running&&((null==(e=this.hintTween)||!e.isPlaying())&&!(this.hintTween&&this.hintTween.countdown>0))},t.showMoveHintAnimation=function(e,t){var n=this;if(this.canShowHint()){this.running=!0;var i=e.getWorldPosition(),a=i.x,s=i.y,r=t.getPlacingPosition(t.cards.length),o=r.x,c=r.y;if(e.placement instanceof hu)for(var h=e.placement.getSubCards(e),u=0;u<h.length;u++){var l=this.createHintCard(h[u].frame.name);l.setY(this.boardGame.getVerticalSpacePile()*u);var d=this.createHintGlow();d.setY(this.boardGame.getVerticalSpacePile()*u),this.hintContainer.add([d,l])}else{var p=this.createHintCard(e.frame.name),f=this.createHintGlow();this.hintContainer.add([f,p])}this.hintContainer.add(this.hand),this.boardGame.scene.tweens.killTweensOf(this.hand),this.hand.revive(),this.hand.tapAndHold(0),this.hintContainer.revive();var g=this.boardGame.scene.footer.hintBtn;g.setDisabled(!0),this.hintTween=this.boardGame.scene.tweens.add({targets:this.hintContainer,x:{start:a,from:a,to:o},y:{start:s,from:s,to:c},delay:300,duration:600,completeDelay:500,ease:Phaser.Math.Easing.Sine.Out,onComplete:function(){n.hand.unHold(0,!1,(function(){n.hintContainer.getAll().forEach((function(e){return n.group.killAndHide(e)})),n.hintContainer.removeAll(),n.hand.kill(),n.fadeOutHint(),g.setDisabled(!1)}))}}),this.fadeInHint()}},t.createHintGlow=function(){var e=Lh(),t=this.group.get();return t.setTexture(An.Z.GAMEPLAY_DEFAULT.KEY,"hint"),t.setWorldSize(60*e,82*e),t.revive(),t},t.createHintCard=function(e){var t=this.boardGame.scene.theme.getCurrentThemeConfig().cardFaceKey,n=this.group.get();n.setTexture(t),n.revive(),n.setFrame(e);var i=Dh.CARD_WIDTH,a=Dh.CARD_HEIGHT;return n.setWorldSize(i,a),n},t.createCardBack=function(){var e=this.boardGame.scene.theme.getCurrentThemeConfig().cardBackFrame,t=this.group.get();t.setTexture(Au.KEY,e),t.revive();var n=Dh.CARD_WIDTH,i=Dh.CARD_HEIGHT;return t.setWorldSize(n,i),t},t.createTutorialHand=function(){this.hand=new yu(this.boardGame.scene),this.hand.kill(),this.hintLayer.add(this.hand)},e}(),Cu=Tu,Su=function(){function e(e){this.scene=void 0,this.boardGame=void 0,this.availableHints=void 0,this.outOfMove=void 0,this.hintAnimation=void 0,this.hintClicked=void 0,this.timeToAutoHint=void 0,this.boardGame=e,this.scene=e.scene,this.outOfMove=!0,this.hintClicked=0,this.timeToAutoHint=0,this.hintAnimation=new Cu(e)}var t=e.prototype;return t.getAvailableDestinations=function(e){var t=this.boardGame,n=t.piles,i=t.foundations,a=[],s=e.placement;return s instanceof hu&&!s.isLastCard(e)||a.push.apply(a,Le()(i).call(i,(function(t){return t.canBePlace(e)}))),a.push.apply(a,Le()(n).call(n,(function(t){return t.canBePlace(e)}))),a},t.canHint=function(){return this.findMovable().length>0},t.showHint=function(){var e=(0,s.Z)(u().mark((function e(){var t,n;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.boardGame.isOutOfMove()){e.next=3;break}return this.boardGame.outOfMove(),e.abrupt("return");case 3:if(this.scene.vibration.performVibrating(20),this.boardGame.isIdle()&&(this.boardGame.boardState=pu.PLAYING),this.boardGame.boardState===pu.PLAYING){e.next=7;break}return e.abrupt("return");case 7:if(this.boardGame.scene.audio.playSound(hs.Z.HINT),this.hintClicked+=1,t=this.findMovable(),this.resetAutoHintTime(),!(t.length>0)){e.next=15;break}return n=t[0],this.hintAnimation.showMoveHintAnimation(n,this.getAvailableDestinations(n)[0]),e.abrupt("return");case 15:if(!(this.boardGame.stock.cards.length>0||this.boardGame.waste.cards.length>0&&!this.outOfMove)){e.next=18;break}return this.hintAnimation.showDealerHint(),e.abrupt("return");case 18:this.boardGame.outOfMove();case 19:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),t.findMovable=function(){var e,t,n,i,a,s,r=[],o=this.boardGame,c=T()(e=o.waste.cards).call(e,-1),h=Be()(t=o.piles).call(t,(function(e){return e.cards[e.cards.length-1]})),u=Be()(n=o.piles).call(n,(function(e){var t,n=Fh()(t=e.cards).call(t,(function(e){return e.isFacingUp()}));return e.cards[n]})),l=Be()(i=o.foundations).call(i,(function(e){return e.cards[e.cards.length-1]})),d=Be()(l).call(l,(function(e,t){return e?e.getTag()+1:100*(t+1)+1})),p=P()(a=[]).call(a,c,h),f=R()(p).call(p,(function(e){return e&&e.getTag()%100==1}));f&&r.push(f);for(var g=function(e){var t,n=u[e];if(!n)return"continue";var i=tn()(t=o.piles[e].cards).call(t,n);if(n&&i>=1){var a;if(u[e]===h[e])if(tn()(d).call(d,n.getTag())>=0)return r.push(n),"continue";var s=R()(a=o.piles).call(a,(function(e){return e.canBePlace(n)}));s&&r.push(n)}},m=0;m<u.length;m++)g(m);for(var v=0;v<p.length;v++){var y=p[v];if(y)tn()(d).call(d,y.getTag())>=0&&r.push(y)}for(var A=function(e){var t,n=u[e];if(!n)return"continue";if(n.isKing()&&0==tn()(t=o.piles[e].cards).call(t,n))return"continue";if(n){var i,a=R()(i=o.piles).call(i,(function(e){return e.canBePlace(n)}));a&&r.push(n)}},E=0;E<u.length;E++)A(E);var C,S=c[c.length-1];S&&(R()(C=o.piles).call(C,(function(e){return e.canBePlace(S)}))&&r.push(S));var b=Be()(s=o.piles).call(s,(function(e){return e.getFacingUpCards()}));return b.forEach((function(e){e.forEach((function(t,n){var i;R()(i=o.piles).call(i,(function(e){return e.canBePlace(t)}))&&n>0&&tn()(d).call(d,e[n-1].getTag())>=0&&r.push(t)}))})),r},t.autoPlayStep=function(){var e=this.findMovable();if(e.length>0){var t=e[0];return this.boardGame.mover.handleClickOnCard(t),void(this.outOfMove=!1)}this.boardGame.stock.cards.length>0||this.boardGame.waste.cards.length>0&&!this.outOfMove?this.boardGame.mover.deal():this.boardGame.outOfMove()},t.resetAutoHintTime=function(){this.timeToAutoHint=0},t.clear=function(){this.hintClicked=0},t.update=function(e){this.boardGame.isPlaying()&&(this.boardGame.scene.player.getPlayerSettings().autoHints?this.timeToAutoHint+=e:this.timeToAutoHint=0,this.timeToAutoHint>15e3&&this.showHint())},e}(),bu=Su,Iu=n(79),wu=n.n(Iu),_u=function(e){function t(t,n){var i;return(i=e.call(this,t,0,0,An.Z.GAMEPLAY_DEFAULT.KEY,"card-bg")||this).parent=void 0,i.updateFromParent=function(){i.setPosition(i.parent.x,i.parent.y+1.5),i.setDisplaySize(144*i.parent.displayWidth/141,219*i.parent.displayHeight/207),i.setVisible(i.parent.visible)},i.parent=n,i.setDepth(Dh.DEPTH.CARD_SLOT),i.updateFromParent(),t.add.existing((0,$a.Z)(i)),i}return(0,r.Z)(t,e),t}(Phaser.GameObjects.Image),xu=_u,Pu={MOVE_CARD_FROM_FOUNDATION_TO_TABLEAU:"move cards from foundation to tableau",OPEN_CARD:"open card"},ku=function(e){return e.ACE="one",e.TWO="two",e.THREE="three",e.FOUR="four",e.FIVE="five",e.SIX="six",e.SEVEN="seven",e.EIGHT="eight",e.NINE="nine",e.TEN="ten",e.JACK="jack",e.QUEEN="queen",e.KING="king",e.ANY="any",e}({}),Ou=function(e){return e.SPADE="spade",e.CLUB="club",e.DIAMOND="diamond",e.HEART="heart",e.ANY="any",e}({}),Lu=function(e){return e.TIME="time",e.MOVES="moves",e.STOCK_RECYCLES="stock-recycle",e.NONE="none",e}({}),Ru=function(e){return e.COMPLETE_GAME="complete-game",e.COMPLETE_ALMOST_FINISHED_GAME="complete-almost-finished-game",e.OPEN_ONE_CARD="open-one-card",e.MOVE_CARDS_TO_FOUNDATION="move-cards-to-foundation",e.MOVE_SAME_SUIT_CARDS_TO_FOUNDATION="move-same-suit-cards-to-foundation",e.MOVE_ONE_CARD_FROM_STOCK_TO_TABLEAU="move-one-card-from-stock-to-tableau",e}({}),Bu=function(){function e(e,t){this.scene=void 0,this.gameObject=void 0,this.config=void 0,this.events=void 0,this.EVENTS={START_JUMP:"START_JUMP",LAND:"LAND"},this.timeline=void 0,this.onCompleteFunction=void 0,this.scene=e.scene,this.gameObject=e,this.events=new Phaser.Events.EventEmitter,this.config=(0,a.Z)({widthExpand:0,heightExpand:0,jumpHeight:20},t)}var t=e.prototype;return t.setWidthExpand=function(e){this.config.widthExpand=e},t.setHeightExpand=function(e){this.config.heightExpand=e},t.setJumpHeight=function(e){this.config.jumpHeight=e},t.run=function(){var e=(0,s.Z)(u().mark((function e(){var t=this;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.stop(),e.abrupt("return",new(c())((function(e){var n=t.config,i=n.widthExpand,a=n.heightExpand,s=n.jumpHeight,r=t.gameObject,o=r.displayWidth,c=r.displayHeight,h=r.y;t.onCompleteFunction=function(){t.gameObject.setDisplaySize(o,c),t.gameObject.setY(h),e(),t.timeline=void 0};var u=t.scene.tweens.createTimeline({onComplete:t.onCompleteFunction}),l=[t.gameObject];u.add({targets:l,props:{displayWidth:o+i/2,displayHeight:c-a/2,y:h+a/4},ease:Phaser.Math.Easing.Back.Out,duration:150}),u.add({targets:l,props:{displayWidth:o,displayHeight:c,y:h},ease:Phaser.Math.Easing.Sine.In,duration:100,onComplete:function(){t.events.emit(t.EVENTS.START_JUMP)}}),u.add({targets:l,props:{displayWidth:{value:o-i,ease:Phaser.Math.Easing.Sine.InOut,duration:150,yoyo:!0},displayHeight:{value:c+a,ease:Phaser.Math.Easing.Sine.InOut,duration:150,yoyo:!0},y:h-s},ease:Phaser.Math.Easing.Cubic.Out,duration:300}),u.add({targets:l,props:{displayWidth:o+i/4,displayHeight:c-a/4,y:h-s-a/8},ease:Phaser.Math.Easing.Sine.InOut,duration:50}),u.add({targets:l,props:{displayWidth:{value:o-i,ease:Phaser.Math.Easing.Cubic.In,duration:200},displayHeight:{value:c+a,ease:Phaser.Math.Easing.Cubic.In,duration:200},y:h-a/2},ease:Phaser.Math.Easing.Cubic.In,duration:300}),u.add({targets:l,props:{displayWidth:o,displayHeight:c,y:h},ease:Phaser.Math.Easing.Cubic.Out,duration:100,onComplete:function(){t.events.emit(t.EVENTS.LAND)}}),u.add({targets:l,props:{displayWidth:o+i/2,displayHeight:c-a/2,y:h+a/4},ease:Phaser.Math.Easing.Back.Out,duration:150}),u.add({targets:l,props:{displayWidth:o,displayHeight:c,y:h},ease:Phaser.Math.Easing.Back.Out,duration:150}),u.play(),t.timeline=u})));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),t.stop=function(){this.timeline&&(this.timeline.stop(),this.onCompleteFunction(this.timeline))},e}(),Du=Bu,Nu=function(){function e(e,t){this.scene=void 0,this.gameObject=void 0,this.config=void 0,this.events=void 0,this.timeline=void 0,this.onCompleteFunction=void 0,this.scene=e.scene,this.gameObject=e,this.events=new Phaser.Events.EventEmitter,this.config=(0,a.Z)({rangeX:20,count:4,durationMaxEachCircle:80,accelerate:1.3},t)}var t=e.prototype;return t.setRangeX=function(e){this.config.rangeX=e},t.setCount=function(e){this.config.count=e},t.run=function(){var e=(0,s.Z)(u().mark((function e(){var t=this;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.stop(),e.abrupt("return",new(c())((function(e){var n=t.config,i=n.rangeX,a=n.count,s=n.durationMaxEachCircle,r=n.accelerate,o=t.gameObject.x;if(t.onCompleteFunction=function(){t.gameObject.setX(o),e(),t.timeline=void 0},0!=i){for(var c=t.scene.tweens.createTimeline({onComplete:t.onCompleteFunction}),h=[t.gameObject],u=0;u<a+1;u++){var l=u/2,d=o+i*(u%2==0?1:-1)/Math.pow(r,l),p=o+i*(u%2==0?-1:1)/Math.pow(r,l);0==u&&(d=o),u==a&&(p=o);var f=s*Math.abs(p-d)/(2*i);c.add({targets:h,props:{x:{from:d,to:p}},ease:Phaser.Math.Easing.Quadratic.InOut,duration:f})}c.play(),t.timeline=c}else e()})));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),t.stop=function(){this.timeline&&(this.timeline.stop(),this.onCompleteFunction(this.timeline))},e}(),Mu=Nu,Gu=An.Z.CARD_BACK,Zu=function(e){function t(t,n){var i;return(i=e.call(this,t,0,0,"")||this).scene=void 0,i.bg=void 0,i.tag=void 0,i.facingUp=void 0,i.oldX=void 0,i.oldY=void 0,i.shakePosition=void 0,i.jumpAttention=void 0,i.facingTween=void 0,i.movingTween=void 0,i.moves=void 0,i.placement=void 0,i.setFacing=function(e){i.facingUp=e,e?i.setCardFace():i.setCardBack()},i.scene=t,i.createBackground(),i.tag=n,i.moves=[],i.facingUp=!1,t.add.existing((0,$a.Z)(i)),i.addBehavior(),i}(0,r.Z)(t,e);var n=t.prototype;return n.createBackground=function(){var e=new xu(this.scene,this);this.bg=e,this.scene.events.on(Phaser.Scenes.Events.POST_UPDATE,e.updateFromParent)},n.updateCardStyle=function(){this.setFacing(this.facingUp),this.input||(this.setInteractive({useHandCursor:!0,draggable:!0}),this.disableInteractive()),this.updateSize()},n.setPlacement=function(e){this.placement=e},n.shake=function(){var e,t;this.isMoving()||(null==(e=this.shakePosition)||e.setRangeX(.1*this.displayWidth),null==(t=this.shakePosition)||t.run())},n.jump=function(){var e,t,n,i;this.isMoving()||(null==(e=this.jumpAttention)||e.setWidthExpand(.2*this.displayWidth),null==(t=this.jumpAttention)||t.setHeightExpand(.17*this.displayHeight),null==(n=this.jumpAttention)||n.setJumpHeight(.44*this.displayHeight),null==(i=this.jumpAttention)||i.run())},n.setFacingWithFlippingAnim=function(e,t){var n,i,a=this;void 0===t&&(t=!0),this.facingUp!==e&&(this.facingUp=e,null==(n=this.facingTween)||n.remove(),this.updateSize(),e&&this.scene.events.emit(Pu.OPEN_CARD,this),this.facingTween=this.scene.tweens.add(((i={targets:this})[t?"scaleX":"scaleY"]=0,i.yoyo=!0,i.duration=150,i.onYoyo=function(){a.setFacing(e)},i.onComplete=function(){if(To.instance.getGameMode()===Ao.JOURNEY){var t=a.scene.journey.getCurrentMission();e&&"open-one-card"===t.type&&a.isMatchWithJourneyMissionCardStats(t.cardStats)&&setTimeout((function(){a.scene.gameplay.cardsLayer.bringToTop(a),a.jump()}),200)}},i)))},n.isFacingUp=function(){return this.facingUp},n.getTag=function(){return this.tag},n.isAce=function(){return this.tag%100===su.ACE},n.isJack=function(){return this.tag%100===su.JACK},n.isQueen=function(){return this.tag%100===su.QUEEN},n.isKing=function(){return this.tag%100===su.KING},n.isCardValue=function(e){return this.tag%100===e},n.isTheSameCardSuit=function(e){var t=this.isClub,n=this.isDiamond,i=this.isHeart,a=this.isSpade;switch(e){case Ou.CLUB:return t;case Ou.DIAMOND:return n;case Ou.HEART:return i;case Ou.SPADE:return a;case Ou.ANY:return!0;default:return!1}},n.isTheSameCardRank=function(e){switch(e){case ku.ACE:return this.isAce();case ku.TWO:return this.isCardValue(su.TWO);case ku.THREE:return this.isCardValue(su.THREE);case ku.FOUR:return this.isCardValue(su.FOUR);case ku.FIVE:return this.isCardValue(su.FIVE);case ku.SIX:return this.isCardValue(su.SIX);case ku.SEVEN:return this.isCardValue(su.SEVEN);case ku.EIGHT:return this.isCardValue(su.EIGHT);case ku.NINE:return this.isCardValue(su.NINE);case ku.TEN:return this.isCardValue(su.TEN);case ku.JACK:return this.isJack();case ku.QUEEN:return this.isQueen();case ku.KING:return this.isKing();case ku.ANY:return!0;default:return!1}},n.moveTo=function(e,t,n){var i,a,s,r=this;void 0===n&&(n=0),e==this.x&&t==this.y||(null==(i=this.movingTween)||i.remove(),null==(a=this.shakePosition)||a.stop(),null==(s=this.jumpAttention)||s.stop(),this.movingTween=this.scene.tweens.add({targets:this,x:e,y:t,duration:n,ease:Phaser.Math.Easing.Sine.Out,onComplete:function(){r.setPosition(e,t)}}))},n.isMoving=function(){return this.movingTween&&(this.movingTween.isPlaying()||!this.movingTween.hasStarted)},n.reset=function(){var e,t;null==(e=this.movingTween)||e.remove(),null==(t=this.facingTween)||t.remove(),this.updateSize(),this.disableInteractive(),this.setFacing(!1)},n.setCardFace=function(){var e=this.scene.theme.getCurrentThemeConfig().cardFaceKey;this.setTexture(e,""+this.tag)},n.setCardBack=function(){var e=this.scene.theme.getCurrentThemeConfig().cardBackFrame;this.setTexture(Gu.KEY,e)},n.updateSize=function(){var e=Dh.CARD_WIDTH,t=Dh.CARD_HEIGHT;this.setWorldSize(e,t)},n.addBehavior=function(){var e=this;this.shakePosition=new Mu(this,{rangeX:7,count:4,accelerate:1.5,durationMaxEachCircle:90}),this.jumpAttention=new Du(this,{widthExpand:10,heightExpand:15,jumpHeight:32}),this.jumpAttention.events.on(this.jumpAttention.EVENTS.LAND,(function(){var t=(e.tag-e.tag%100)/100-1;e.scene.gameplay.boardGame.suitCircleExplosive.explode(t,30,e.x,e.y+12)}))},n.isMatchWithJourneyMissionCardStats=function(e){for(var t=0;t<e.length;t++){var n=e[t],i=this.isTheSameCardSuit(n.cardSuit);if(this.isTheSameCardRank(n.cardRank)&&i)return!0}return!1},(0,ce.Z)(t,[{key:"isSpade",get:function(){return this.tag>=au.ACE&&this.tag<=au.KING}},{key:"isClub",get:function(){return this.tag>=iu.ACE&&this.tag<=iu.KING}},{key:"isDiamond",get:function(){return this.tag>=nu.ACE&&this.tag<=nu.KING}},{key:"isHeart",get:function(){return this.tag>=tu.ACE&&this.tag<=tu.KING}}]),t}(Phaser.GameObjects.Image),Fu=Zu,Uu=function(){if(GameCore.Utils.Device.isDesktop())return 2;var e=GameCore.Utils.Device.pixelRatio();return e=e>2.44?2.88:e>2?2:Math.round(e)},zu=1/Uu(),Wu=An.Z.GAMEPLAY_DEFAULT.KEY,Yu=function(e){function t(t){var n;return(n=e.call(this,t,Wu)||this).emitZone=void 0,n.particleEmitters=void 0,n.particleEmitters=[],n.emitZone=new Phaser.Geom.Rectangle(-15,-20,30,40),n.createSuitEmitter("suit_spades"),n.createSuitEmitter("suit_clubs"),n.createSuitEmitter("suit_diamonds"),n.createSuitEmitter("suit_heart"),n.scene.add.existing((0,$a.Z)(n)),n.setDepth(1e3),n}(0,r.Z)(t,e);var n=t.prototype;return n.createSuitEmitter=function(e){this.particleEmitters.push(this.createEmitter({on:!1,frame:e,emitZone:{source:this.emitZone,type:"random"},speed:40,frequency:100,alpha:{start:1,end:0,ease:Phaser.Math.Easing.Expo.Out},scale:.5*zu,lifespan:1200,rotate:{start:0,end:40,random:!0}}))},n.explode=function(e,t,n,i){this.particleEmitters[e].explode(t,n,i)},t}(Phaser.GameObjects.Particles.ParticleEmitterManager),Hu=Yu,Ku=An.Z.GAMEPLAY_DEFAULT,ju=Ku.KEY,Vu=Ku.FRAME,Ju=function(e){function t(t){var n;return(n=e.call(this,t)||this).restartIcon=void 0,n.remainContainer=void 0,n.remainText=void 0,n.slot.input.cursor="pointer",n.createRecycle(),n.createStockCountText(),n.setName(Xh.Stock),n}(0,r.Z)(t,e);var n=t.prototype;return n.createRecycle=function(){var e=this.boardGame.scene;this.restartIcon=e.add.image(0,0,ju,Vu.IC_RECYCLE),e.world.isLandscape()?this.restartIcon.setWorldSize(41,41):this.restartIcon.setWorldSize(25,25)},n.createStockCountText=function(){var e=this.boardGame.scene,t=e.add.container();t.setDepth(Dh.DEPTH.REMAINING_STOCK),this.remainText=e.make.bitmapText({font:gc.Z.PRIMARY.KEY,size:e.fontSize(12),origin:{x:.5,y:.5},text:"0"}),this.remainText.setCenterAlign(),this.remainText.setTint(16579837),this.remainText.setPosition(9,-9),this.remainText.setIgnoreLanguage();var n=e.add.image(9,-9,ju,Vu.STOCK_BG);n.setWorldSize(18,18),t.add([n,this.remainText]),this.remainContainer=t,this.remainContainer.kill()},n.setPosition=function(t,n){e.prototype.setPosition.call(this,t,n),this.restartIcon.setPosition(t,n);var i=this.slot,a=.5*i.width-4,s=.5*i.height-3;this.remainContainer.setPosition(t-a,n+s)},n.addCard=function(t,n){e.prototype.addCard.call(this,t,n);var i=this.boardGame.scene.player.getPlayerSettings(),a=this.boardGame.scene.world.isLandscape();t.setFacingWithFlippingAnim(!1,!(a&&i.largeWidthLayout)),t.disableInteractive()},n.canBePlace=function(e){return!1},n.clear=function(){this.cards=[]},n.update=function(t){e.prototype.update.call(this,t),this.cards.length>0?(this.remainContainer.revive(),this.remainText.setText(""+this.cards.length)):this.remainContainer.kill()},t}(Vh),Xu=Ju;function qu(e,t){var n="undefined"!==typeof I()&&_()(e)||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){var n;if(!e)return;if("string"===typeof e)return Qu(e,t);var i=T()(n=Object.prototype.toString.call(e)).call(n,8,-1);"Object"===i&&e.constructor&&(i=e.constructor.name);if("Map"===i||"Set"===i)return S()(e);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return Qu(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var i=0;return function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Qu(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var $u=Phaser.Input.Events,el=$u.GAMEOBJECT_DOWN,tl=$u.DRAG,nl=$u.POINTER_UP,il=function(){function e(e){var t=this;this.boardGame=void 0,this.undos=void 0,this.picked=void 0,this.dragX=void 0,this.dragY=void 0,this.pickedPlacement=void 0,this.suitExplosive=void 0,this.undoClicked=void 0,this.handlePointerDown=function(e,n){if(!t.isPicked()&&n instanceof Fu){var i;t.boardGame.boardState=pu.PLAYING;var a=n;if(a.isMoving())return;var s=tn()(i=a.placement.cards).call(i,a);t.pickCard(a.placement,a.placement.cards.length-s)}},this.isDragged=void 0,this.dragPicked=function(e,n,i,a){!t.isDragged&&e.getDistanceX()+e.getDistanceY()<15||(t.isDragged=!0,t.dragX=i,t.dragY=a)},this.handlePointerUp=function(e){if(t.isPicked()){var n=t.picked[0],i=t.findFirstDestination(e,t.picked),a=!1;if(i?t.movePickedToNewPlacement(i):a=!0,!t.isDragged&&e.upTime-e.downTime<1e3){if(t.donePick(),t.boardGame.scene.player.getPlayerSettings().tapToMove){if(n.isMoving())return;t.handleClickOnCard(n)}}else t.donePick(a);t.boardGame.hint.resetAutoHintTime()}},this.deal=function(){var e,n=t.boardGame.draw3?3:1;if(!t.boardGame.stock.isEmpty()||!t.boardGame.waste.isEmpty()){t.boardGame.isPlaying()&&t.boardGame.scene.audio.playSound(hs.Z.CARD_MOVE);var i=wu()(e=t.boardGame.stock.pickTopCards(n)).call(e);if(i.length>0){for(var a,s=qu(i);!(a=s()).done;){var r=a.value;t.boardGame.waste.addCard(r,!0)}t.undos.push({type:"deal",numOfCards:i.length,srcName:t.boardGame.stock.getname(),srcIdx:t.boardGame.stock.getIdx(),destName:t.boardGame.waste.getname(),destIdx:t.boardGame.waste.getIdx()}),t.boardGame.hint.canHint()&&(t.boardGame.hint.outOfMove=!1),t.boardGame.stock.isEmpty()&&t.boardGame.hint.outOfMove&&t.boardGame.outOfMove()}else{t.boardGame.increaseStockRecycleCount(),t.boardGame.scene.vibration.performVibrating(20);var o=t.boardGame.waste.pickAllCards();wu()(o).call(o);for(var c,h=qu(o);!(c=h()).done;){var u=c.value;t.boardGame.stock.addCard(u,!0)}t.undos.push({type:"deal",numOfCards:o.length,srcName:t.boardGame.waste.getname(),srcIdx:t.boardGame.waste.getIdx(),destName:t.boardGame.stock.getname(),destIdx:t.boardGame.stock.getIdx()}),t.boardGame.hint.outOfMove=!0}t.boardGame.increaseMovesAndSaveBoard()}},this.boardGame=e,this.undos=[],this.picked=[],this.undoClicked=0,this.suitExplosive=new Hu(e.scene)}var t=e.prototype;return t.enableInput=function(){var e=this,t=this.boardGame.scene;t.input.on(el,this.handlePointerDown),t.input.on(tl,this.dragPicked),t.input.on(nl,this.handlePointerUp),this.boardGame.stock.slot.onClick((function(){e.boardGame.boardState=pu.PLAYING,e.deal()}))},t.disableInput=function(){var e=this.boardGame.scene;e.input.off(el,this.handlePointerDown),e.input.off(tl,this.dragPicked),e.input.off(nl,this.handlePointerUp),this.boardGame.stock.slot.offClick()},t.isPicked=function(){return this.picked.length>0},t.movePickedToNewPlacement=function(e){for(var t,n=this,i=qu(this.picked);!(t=i()).done;){var a=t.value;e.addCard(a,!0),e instanceof hu&&e.updateCardPosition(e.cards.length)}this.pickedPlacement instanceof hu&&this.pickedPlacement.updateCardPosition();var s=this.pickedPlacement instanceof hu&&!!this.pickedPlacement.faceUpLast();if(s&&this.boardGame.increaseScore(5),e instanceof du){this.boardGame.increaseScore(10),this.boardGame.isPlaying()&&this.boardGame.scene.audio.playSound("finish"+e.cards.length,{delay:.1});var r=e.getPlacingPosition(0),o=r.x,c=r.y,h=e.cards[0].getTag(),u=(h-h%100)/100-1,l=this.picked[0];this.boardGame.scene.time.delayedCall(400,(function(){if(n.suitExplosive.explode(u,12,o,c),To.instance.getGameMode()===Ao.JOURNEY){var e=n.boardGame.scene.journey.getCurrentMission();"move-same-suit-cards-to-foundation"===e.type&&l.isMatchWithJourneyMissionCardStats(e.cardStats)&&l.jump()}}))}else this.boardGame.isPlaying()&&this.boardGame.scene.audio.playSound(hs.Z.CARD_MOVE);this.pickedPlacement instanceof eu&&e instanceof hu&&(this.boardGame.increaseScore(5),this.boardGame.scene.events.emit(Pu.MOVE_CARD_FROM_FOUNDATION_TO_TABLEAU,this.picked)),this.pickedPlacement instanceof du&&this.boardGame.decreaseScore(10),this.undos.push({type:"move",numOfCards:this.picked.length,srcName:this.pickedPlacement.getname(),srcIdx:this.pickedPlacement.getIdx(),destName:e.getname(),destIdx:e.getIdx(),faceLast:!!s}),this.pickedPlacement instanceof eu&&this.boardGame.waste.align(),this.picked=[],this.boardGame.increaseMovesAndSaveBoard(),this.boardGame.checkGameWin(),this.boardGame.updateFoundationCardsInteractive()},t.unMovePickedToPlacement=function(e,t){e instanceof hu&&t&&e.faceDownLast();for(var n,i=qu(this.picked);!(n=i()).done;){var a=n.value;e.addCard(a,!0),e instanceof hu&&e.updateCardPosition(e.cards.length)}t&&this.boardGame.decreaseScore(5),e instanceof du&&this.boardGame.increaseScore(10),this.pickedPlacement instanceof hu&&e instanceof eu&&this.boardGame.decreaseScore(5),this.pickedPlacement instanceof du&&this.boardGame.decreaseScore(10),this.picked=[],this.boardGame.increaseMovesAndSaveBoard(),this.boardGame.updateFoundationCardsInteractive()},t.pickCard=function(e,t){this.pickedPlacement=e,this.picked=e.pickTopCards(t),this.isDragged=!1},t.donePick=function(e){if(this.isPicked()){for(var t,n=qu(this.picked);!(t=n()).done;){var i=t.value;this.pickedPlacement.addCard(i,this.isDragged)}e&&this.pickedPlacement instanceof hu&&this.pickedPlacement.updateCardPosition(),this.picked=[],this.isDragged=!1}},t.findFirstDestination=function(e,t){if(1==t.length){var n=this.detectFoundation(e,t[0]);if(n)return n}return this.detectPile(e,t[0])},t.detectFoundation=function(e,t){var n,i=Le()(n=this.boardGame.foundations).call(n,(function(e){return Phaser.Geom.Intersects.RectangleToRectangle(t.getBounds(),e.slot.getBounds())&&e.canBePlace(t)}));if(2==i.length)return e.worldX-i[0].x<i[1].x-e.worldX?i[0]:i[1];if(1==i.length){if(i[0]==this.pickedPlacement)return;return i[0]}},t.detectPile=function(e,t){var n,i=this,a=Le()(n=this.boardGame.piles).call(n,(function(e){var n,a=(null==(n=e.getLastCard())?void 0:n.getBounds())||e.slot.getBounds();return e!==i.pickedPlacement&&Phaser.Geom.Intersects.RectangleToRectangle(t.getBounds(),a)&&e.canBePlace(t)}));return 2==a.length?(e.worldX,a[0].x,a[1].x,e.worldX,a[1]):1==a.length?a[0]:void 0},t.getAvailableDestinations=function(){var e=this,t=this.boardGame,n=t.piles,i=t.foundations,a=[];return 1==this.picked.length&&a.push.apply(a,Le()(i).call(i,(function(t){return t!==e.pickedPlacement&&t.canBePlace(e.picked[0])}))),a.push.apply(a,Le()(n).call(n,(function(t){return t!==e.pickedPlacement&&t.canBePlace(e.picked[0])}))),a},t.handleClickOnCard=function(e){var t;if(!this.isPicked()){var n=tn()(t=e.placement.cards).call(t,e);this.pickCard(e.placement,e.placement.cards.length-n);var i=this.getAvailableDestinations();if(0!==i.length)this.movePickedToNewPlacement(i[0]),this.donePick();else{this.boardGame.scene.audio.playSound(hs.Z.NO_MOVE);for(var a,s=qu(this.picked);!(a=s()).done;){a.value.shake()}this.donePick()}}},t.isCanUndo=function(){return this.boardGame.boardState!==pu.GAME_OVER&&0!=this.undos.length},t.undo=function(){if(this.boardGame.boardState!==pu.GAME_OVER){var e=this.undos.pop();if(e){this.boardGame.scene.audio.playSound(hs.Z.UNDO),this.boardGame.boardState=pu.PLAYING,this.undoClicked+=1;var t=e.numOfCards,n=e.srcName,i=e.srcIdx,a=e.destName,s=e.destIdx,r=e.faceLast,o=void 0!==r&&r,c=this.getPlacement(n,i),h=this.getPlacement(a,s);if("deal"===e.type){var u=h.pickTopCards(t);h instanceof Xu&&wu()(u).call(u);for(var l,d=qu(u);!(l=d()).done;){var p=l.value;c.addCard(p,!0)}this.boardGame.waste.align(),this.boardGame.increaseMovesAndSaveBoard()}else"move"===e.type&&(this.pickCard(h,t),this.unMovePickedToPlacement(c,o),this.donePick(),this.boardGame.hint.outOfMove=!1);this.boardGame.decreaseScore(2),h instanceof hu&&h.updateCardPosition(),this.boardGame.checkAutoCompleted()}}},t.clear=function(){this.undos=[],this.undoClicked=0},t.update=function(){if(this.isDragged)for(var e=0;e<this.picked.length;e++){var t,n=this.picked[e];n.setPosition(this.dragX,this.dragY+e*this.boardGame.getVerticalSpacePile()),n.scene.gameplay.cardsLayer.bringToTop(n),null==(t=n.jumpAttention)||t.stop()}},t.getPlacement=function(e,t){if(e===Xh.Stock)return this.boardGame.stock;if(e===Xh.Waste)return this.boardGame.waste;if(e===Xh.Pile)return this.boardGame.piles[t];if(e===Xh.Foundation)return this.boardGame.foundations[t];throw new Error("Placement not found!!!")},e}(),al=il,sl=function(){function e(){this.strSeed=void 0,this.intSeed=void 0}var t=e.prototype;return t.generateSeed=function(){return GameCore.Utils.String.random(10)},t.shuffle=function(e){var t,n,i,a,s,r=Be()(t=Ut()(n=new Array(52)).call(n,0)).call(t,(function(e,t){return t})),o=this.shuffles(r,e),c=this.shuffles(o,wu()(i=e.split("")).call(i).join("").toLowerCase());return this.shuffles(c,T()(a=wu()(s=e.split("")).call(s).join("")).call(a,0,10).toUpperCase())},t.shuffles=function(e,t){if(this.setSeed(t)){for(var n=T()(e).call(e,0),i=n.length,a=this.genMap(i),s=i-1;s>0;s--)n[s]=zh()(n).call(n,a[i-1-s],1,n[s])[0];return n}return e},t.genMap=function(e){for(var t=new Array(e),n=0;n<e;n++)t[n]=(this.intSeed=(9301*this.intSeed+49297)%233280)/233280*e|0;return t=this.modifyIfNoZero(t)},t.modifyIfNoZero=function(e){for(var t=!1,n=0;n<e.length;n++)0===e[n]&&(t=!0);return!1===t&&(e[e[e.length-1]]=0),e},t.setSeed=function(e){var t,n=Be()(t=String(this.strSeed=e).split("")).call(t,(function(e){return e.charCodeAt(0)})).join("");return this.intSeed=Number(n),!0},e}(),rl=sl,ol=function(){function e(e){this.boardGame=void 0,this.cards=void 0,this.boardGame=e,this.cards=[]}var t=e.prototype;return t.init=function(){var e=this,t=this.boardGame.scene;this.cards.push(new Fu(t,iu.ACE),new Fu(t,iu.TWO),new Fu(t,iu.THREE),new Fu(t,iu.FOUR),new Fu(t,iu.FIVE),new Fu(t,iu.SIX),new Fu(t,iu.SEVEN),new Fu(t,iu.EIGHT),new Fu(t,iu.NINE),new Fu(t,iu.TEN),new Fu(t,iu.JACK),new Fu(t,iu.QUEEN),new Fu(t,iu.KING)),this.cards.push(new Fu(t,nu.ACE),new Fu(t,nu.TWO),new Fu(t,nu.THREE),new Fu(t,nu.FOUR),new Fu(t,nu.FIVE),new Fu(t,nu.SIX),new Fu(t,nu.SEVEN),new Fu(t,nu.EIGHT),new Fu(t,nu.NINE),new Fu(t,nu.TEN),new Fu(t,nu.JACK),new Fu(t,nu.QUEEN),new Fu(t,nu.KING)),this.cards.push(new Fu(t,tu.ACE),new Fu(t,tu.TWO),new Fu(t,tu.THREE),new Fu(t,tu.FOUR),new Fu(t,tu.FIVE),new Fu(t,tu.SIX),new Fu(t,tu.SEVEN),new Fu(t,tu.EIGHT),new Fu(t,tu.NINE),new Fu(t,tu.TEN),new Fu(t,tu.JACK),new Fu(t,tu.QUEEN),new Fu(t,tu.KING)),this.cards.push(new Fu(t,au.ACE),new Fu(t,au.TWO),new Fu(t,au.THREE),new Fu(t,au.FOUR),new Fu(t,au.FIVE),new Fu(t,au.SIX),new Fu(t,au.SEVEN),new Fu(t,au.EIGHT),new Fu(t,au.NINE),new Fu(t,au.TEN),new Fu(t,au.JACK),new Fu(t,au.QUEEN),new Fu(t,au.KING));var n=this.boardGame.stock.getPlacingPosition(0),i=n.x,a=n.y;this.cards.forEach((function(t){t.updateCardStyle(),t.setFacing(!1),t.kill(),t.setPosition(i,a),t.setDepth(10),e.boardGame.gameplay.cardsLayer.add(t.bg),e.boardGame.gameplay.cardsLayer.add(t)}))},t.reset=function(){var e=this.boardGame.stock.getPlacingPosition(0),t=e.x,n=e.y;this.cards.forEach((function(e){e.reset(),e.revive(),e.moveTo(t,n,200)}))},t.align=function(){var e=this.boardGame.stock.getPlacingPosition(0),t=e.x,n=e.y;this.cards.forEach((function(e){e.reset(),e.setPosition(t,n,200)}))},t.alignCurrentDeck=function(){for(var e=this.boardGame,t=e.stock,n=e.waste,i=e.foundations,a=0;a<t.cards.length;a++){var s=t.getPlacingPosition(a),r=s.x,o=s.y;t.cards[a].setPosition(r,o,200)}for(var c=0;c<n.cards.length;c++){var h=n.getPlacingPosition(c),u=h.x,l=h.y;n.cards[c].setPosition(u,l,200)}for(var d=0;d<i.length;d++)for(var p=i[d],f=0;f<p.cards.length;f++){var g=p.getPlacingPosition(f),m=g.x,v=g.y;p.cards[f].setPosition(m,v,200)}},t.getDeck=function(e){var t=this;return Be()(e).call(e,(function(e){return t.cards[e]}))},t.getCards=function(e){var t=this;return Be()(e).call(e,(function(e){return t.cards[e]}))},t.getCardsNew=function(e){var t=this,n=[3,0,1,2];return Be()(e).call(e,(function(e){var i=13*n[e.suit-1]+e.value-1;return t.cards[i]}))},e}(),cl=ol,hl=function(e){function t(t){var n;return(n=e.call(this,t)||this).angle2=void 0,n}(0,r.Z)(t,e);var n=t.prototype;return n.fire=function(t,n){e.prototype.fire.call(this,t,n);var i=this.emitter,a=i.x,s=i.y;t||(t=a.defaultValue),n||(n=s.defaultValue);var r=Phaser.Math.Distance.Between(0,0,this.velocityX,this.velocityY),o=Math.atan2(this.y-n,this.x-t);this.velocityX=r*Math.cos(o),this.velocityY=r*Math.sin(o),this.rotation=o,this.angle2=o},n.update=function(t,n,i){var a=e.prototype.update.call(this,t,n,i);return this.rotation=this.angle2,a},t}(Phaser.GameObjects.Particles.Particle),ul=hl,ll=1/Uu(),dl=An.Z.GAMEPLAY_DEFAULT.KEY,pl=function(e){function t(t){var n;return(n=e.call(this,t,dl)||this).emitZone=void 0,n.particleEmitters=void 0,n.particleEmitters=[],n.emitZone=new Phaser.Geom.Circle(0,0,30),n.createSuitEmitter("suit_spades"),n.createSuitEmitter("suit_clubs"),n.createSuitEmitter("suit_diamonds"),n.createSuitEmitter("suit_heart"),n.scene.add.existing((0,$a.Z)(n)),n.setDepth(1e3),n}(0,r.Z)(t,e);var n=t.prototype;return n.createSuitEmitter=function(e){this.particleEmitters.push(this.createEmitter({on:!1,frame:e,emitZone:{source:this.emitZone,type:"random"},speed:{min:30,max:60},frequency:100,alpha:{start:1,end:0,ease:Phaser.Math.Easing.Expo.Out},scale:.5*ll,lifespan:1700,rotate:{start:0,end:360,random:!0},particleClass:ul}))},n.explode=function(e,t,n,i){this.particleEmitters[e].explode(t,n,i)},t}(Phaser.GameObjects.Particles.ParticleEmitterManager),fl=pl,gl=An.Z.GAMEPLAY_DEFAULT,ml=gl.KEY,vl=gl.FRAME,yl=function(e){function t(t){var n;(n=e.call(this)||this).scene=void 0,n.gameplay=void 0,n.shuffler=void 0,n.draw3=void 0,n.deck=void 0,n.stock=void 0,n.waste=void 0,n.piles=void 0,n.foundations=void 0,n.hint=void 0,n.mover=void 0,n._boardState=void 0,n.autoCompleteBtn=void 0,n.canAutoComplete=void 0,n.score=void 0,n.time=void 0,n.timeToDecreaseScore=void 0,n.timeToSaveBoardData=void 0,n.moves=void 0,n.stockRecycleCount=void 0,n.updateScoreTimer=void 0,n.timer=void 0,n.lastGame=void 0,n.suitCircleExplosive=void 0,n.handleAutoCompleteClick=function(){n.autoCompleteBtn.kill(),n.mover.disableInput(),n.boardState=pu.AUTO_COMPLETING,n.timer.paused=!1,n.gameplay.scene.footer.hintBtn.setDisabled(!0),n.gameplay.scene.footer.playBtn.setDisabled(!0),n.scene.audio.playSound(hs.Z.AUTO_COMPLETE)},n.autoPlayBtn=void 0,n.autoPlayStepBtn=void 0,n.playWithFriendGameOverButton=void 0,n.tournamentResultButton=void 0,n.editModeButton=void 0,n.outOfMoveButton=void 0,n.gameWonButton=void 0,n.journeyButton=void 0,n.challengeResultButton=void 0,n.notifyScreenButton=void 0,n.missionWelcomeButton=void 0,n.missionCompletedButton=void 0,n.changeLanguageButton=void 0,n.gameplay=t,n.scene=t.scene,n.suitCircleExplosive=new fl(t.scene),n.shuffler=new rl,n.deck=new cl((0,$a.Z)(n)),n.stock=new Xu((0,$a.Z)(n)),n.waste=new eu((0,$a.Z)(n)),n.piles=[],n.foundations=[],n.score=0,n.time=0,n.moves=0,n.stockRecycleCount=0,n.timeToDecreaseScore=0,n.timeToSaveBoardData=0,n.mover=new al((0,$a.Z)(n)),n.hint=new bu((0,$a.Z)(n));for(var i=0;i<7;i++){var a=new hu((0,$a.Z)(n));a.setIdx(i),n.piles.push(a)}for(var s=0;s<4;s++){var r=new du((0,$a.Z)(n));r.setIdx(s),n.foundations.push(r)}return n.alignBoard(),n.draw3=!1,n.boardState=pu.NONE,n.canAutoComplete=!1,n.listenEvents(),n.addTimer(),n.createAutoWinButton(),GameCore.Utils.Valid.isDebugger()&&n.createDevBtn(),n.scene.screen.events.on(GameCore.Screens.Events.OPEN,(function(){n.boardState===pu.PLAYING&&(n.boardState=pu.IDLE)})),n.deck.init(),n}(0,r.Z)(t,e);var n=t.prototype;return n.increaseScore=function(e){var t=this;this.score+=e,this.updateScoreTimer&&!this.updateScoreTimer.hasDispatched||(this.updateScoreTimer=this.scene.time.delayedCall(500,(function(){t.scene.storage.dispatch(go({score:t.score,time:t.time,moves:t.moves}))})))},n.decreaseScore=function(e){this.score=Math.max(0,this.score-e)},n.increaseMovesAndSaveBoard=function(){this.hint.resetAutoHintTime(),this.moves+=1,this.gameplay.saveSystem.saveCurrentBoardData()},n.increaseStockRecycleCount=function(){this.stockRecycleCount+=1},n.getScore=function(){return this.score},n.getTime=function(){return Math.round(this.time)},n.getMoves=function(){return this.moves},n.getStockRecycleCount=function(){return this.stockRecycleCount},n.getFoundationsCardsCount=function(){var e;return Gh()(e=this.foundations).call(e,(function(e,t){return e+t.cards.length}),0)},n.getFoundationCardSuitCounts=function(){var e=0,t=0,n=0,i=0;return this.foundations.forEach((function(a){a.cards.forEach((function(a){var s=a.isSpade,r=a.isHeart,o=a.isClub,c=a.isDiamond;s&&e++,r&&t++,o&&n++,c&&i++}))})),{spadeCount:e,heartCount:t,clubCount:n,diamondCount:i}},n.getFoundationCardRankCounts=function(){var e=0,t=0,n=0,i=0,a=0,s=0,r=0,o=0,c=0,h=0,u=0,l=0,d=0;return this.foundations.forEach((function(p){p.cards.forEach((function(p){p.isCardValue(su.ACE)?e++:p.isCardValue(su.TWO)?t++:p.isCardValue(su.THREE)?n++:p.isCardValue(su.FOUR)?i++:p.isCardValue(su.FIVE)?a++:p.isCardValue(su.SIX)?s++:p.isCardValue(su.SEVEN)?r++:p.isCardValue(su.EIGHT)?o++:p.isCardValue(su.NINE)?c++:p.isCardValue(su.TEN)?h++:p.isCardValue(su.JACK)?u++:p.isCardValue(su.QUEEN)?l++:p.isCardValue(su.KING)&&d++}))})),{aceCount:e,twoCount:t,threeCount:n,fourCount:i,fiveCount:a,sixCount:s,sevenCount:r,eightCount:o,nineCount:c,tenCount:h,jackCount:u,queenCount:l,kingCount:d}},n.addTimer=function(){var e=this;this.timer=this.scene.time.addEvent({delay:50,repeat:-1,callback:function(){e.boardState===pu.AUTO_COMPLETING?(e.hint.autoPlayStep(),e.scene.vibration.performVibrating(20)):e.timer.paused=!0},paused:!0})},n.getBoundNumberOfCards=function(){var e=this.getMaxHeightTableau(),t=Dh.CARD_HEIGHT,n=Dh.VERTICAL_PILE_SPACE;return Math.floor((e-t/2)/n)+1},n.placeCenter=function(e,t,n,i,a){void 0===a&&(a=0);for(var s=e.length,r=t-(s/2-.5-a)*i,o=0;o<s;o++)e[o].setPosition(r+o*i,n)},n.startGame=function(){var e=(0,s.Z)(u().mark((function e(t){var n,i,a,s,r,o;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isDealing()){e.next=2;break}return e.abrupt("return");case 2:return this.clearOldBoard(),this.scene.events.emit(vo.GAME_START),To.instance.isJourneyMode()?(o=this.scene.journey,this.scene.analytics.event(yn._.JOURNEY_START,{mission_id:o.getSeason(),seed:t,level:o.getCurrentLevel()})):(n=this.scene.gameStats.getDraw(this.draw3),i=n.totalGame,a=n.wins,s=this.scene.levelLoader.getLevelByWins(a),r=To.instance.getGameMode(),this.scene.analytics.event(yn._.LEVEL_START,{game_mode:GameCore.Utils.String.toUpperCamelCase(r),total_game:i,difficulty:s,seed:t,level:a})),e.next=7,this.dealingWithSeed(t);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.dealingWithSeed=function(){var e=(0,s.Z)(u().mark((function e(t){var n,i,a,s,r,o,c=this;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.boardState=pu.DEALING,this.deck.reset(),n=this.shuffler.shuffle(t),(i=this.deck.getDeck(n)).forEach((function(e){return e.revive()})),e.next=7,ou(this.scene,300);case 7:this.scene.audio.playSound(hs.Z.SHUFFLE),a=0;case 9:if(!(a<7)){e.next=24;break}s=a;case 11:if(!(s<7)){e.next=21;break}if(!(r=i.pop())){e.next=18;break}return this.piles[s].addCard(r,!0),s%2==0&&this.scene.vibration.performVibrating(10),e.next=18,ou(this.scene,30);case 18:s++,e.next=11;break;case 21:a++,e.next=9;break;case 24:return i.forEach((function(e){return c.stock.addCard(e,!1)})),e.next=27,ou(this.scene,100);case 27:for(o=0;o<7;o++)this.piles[o].faceUpLast();return e.next=30,ou(this.scene,400);case 30:this.updateAfterDeal();case 31:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.continueGame=function(){var e=(0,s.Z)(u().mark((function e(t){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.scene.analytics.event(yn._.LEVEL_CONTINUE),!this.isDealing()){e.next=3;break}return e.abrupt("return");case 3:return this.clearOldBoard(),e.next=6,this.dealingWithLastBoard(t);case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.dealingWithLastBoard=function(){var e=(0,s.Z)(u().mark((function e(t){var n,i,a,s,r,o,c,h,l,d,p,f,g,m,v,y,A,E,T,C,S,b,I=this;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.boardState=pu.DEALING,this.lastGame=t,n=t.stock,i=t.waste,a=t.piles,s=t.faceBackOfPiles,r=t.foundations,o=t.score,c=t.time,h=t.moves,l=t.draw3,d=t.movesData,this.deck.reset(),e.next=6,ou(this.scene,300);case 6:for(this.score=o,this.time=c,this.moves=h,this.draw3=l,p=this.deck.getCards(n),f=this.deck.getCards(i),g=Be()(a).call(a,(function(e){return I.deck.getCards(e)})),m=Be()(r).call(r,(function(e){return I.deck.getCards(e)})),this.scene.audio.playSound(hs.Z.SHUFFLE),v=0;v<p.length;v++)this.stock.addCard(p[v],!1);y=0;case 17:if(!(y<m.length)){e.next=32;break}A=m[y],E=0;case 20:if(!(E<A.length)){e.next=29;break}return this.foundations[y].addCard(A[E],!0),A[E].setFacingWithFlippingAnim(!0),A[E].setInteractive(),e.next=26,ou(this.scene,30);case 26:E++,e.next=20;break;case 29:y++,e.next=17;break;case 32:T=0;case 33:if(!(T<g.length)){e.next=47;break}C=g[T],S=0;case 36:if(!(S<C.length)){e.next=44;break}return this.piles[T].addCardByDeal(C[S],!0,C.length),S>=s[T]&&(C[S].setFacingWithFlippingAnim(!0),C[S].setInteractive()),e.next=41,ou(this.scene,30);case 41:S++,e.next=36;break;case 44:T++,e.next=33;break;case 47:b=0;case 48:if(!(b<f.length)){e.next=55;break}return this.waste.addCard(f[b],!0),e.next=52,ou(this.scene,30);case 52:b++,e.next=48;break;case 55:return e.next=57,ou(this.scene,400);case 57:this.mover.undos=d,this.updateAfterDeal();case 59:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.initGameWithBoardState=function(){var e=(0,s.Z)(u().mark((function e(t){var n,i,a,s,r,o,c,h,l,d,p,f,g,m,v,y,A,E,T,C=this;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(To.instance.isJourneyMode()?(n=this.scene.journey,this.scene.analytics.event(yn._.JOURNEY_START,{mission_id:n.getSeason(),seed:t.seed,level:n.getCurrentLevel()})):this.scene.analytics.event(yn._.LEVEL_CONTINUE),!this.isDealing()){e.next=3;break}return e.abrupt("return");case 3:if(t.currentState){e.next=5;break}return e.abrupt("return");case 5:return this.clearOldBoard(),this.boardState=pu.DEALING,i=t.draw3,a=t.currentState,s=a.stock,r=a.waste,o=a.tableau,c=a.foundations,this.deck.reset(),e.next=12,ou(this.scene,300);case 12:for(this.score=0,this.time=0,this.moves=0,this.draw3=i,h=this.deck.getCardsNew(s),l=this.deck.getCardsNew(r),d=Be()(o).call(o,(function(e){return C.deck.getCardsNew(e)})),p=Be()(c).call(c,(function(e){return C.deck.getCardsNew(e)})),this.scene.audio.playSound(hs.Z.SHUFFLE),f=0;f<h.length;f++)this.stock.addCard(h[f],!1);g=0;case 23:if(!(g<p.length)){e.next=38;break}m=p[g],v=0;case 26:if(!(v<m.length)){e.next=35;break}return this.foundations[g].addCard(m[v],!0),m[v].setFacingWithFlippingAnim(!0),m[v].setInteractive(),e.next=32,ou(this.scene,30);case 32:v++,e.next=26;break;case 35:g++,e.next=23;break;case 38:y=0;case 39:if(!(y<d.length)){e.next=53;break}A=d[y],E=0;case 42:if(!(E<A.length)){e.next=50;break}return this.piles[y].addCardByDeal(A[E],!0,A.length),o[y][E].faceUp&&(A[E].setFacingWithFlippingAnim(!0),A[E].setInteractive()),e.next=47,ou(this.scene,30);case 47:E++,e.next=42;break;case 50:y++,e.next=39;break;case 53:T=0;case 54:if(!(T<l.length)){e.next=61;break}return this.waste.addCard(l[T],!0),e.next=58,ou(this.scene,30);case 58:T++,e.next=54;break;case 61:return e.next=63,ou(this.scene,400);case 63:this.mover.undos=[],this.updateAfterDeal();case 65:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.initGameWithBoard=function(){var e=(0,s.Z)(u().mark((function e(t){var n,i,a,s,r,o,c,h,l,d,p,f,g,m,v,y,A,E=this;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.scene.analytics.event(yn._.LEVEL_CONTINUE),!this.isDealing()){e.next=3;break}return e.abrupt("return");case 3:return this.clearOldBoard(),this.boardState=pu.DEALING,n=t.stock,i=t.waste,a=t.tableau,s=t.foundations,r=t.draw3,this.deck.reset(),e.next=9,ou(this.scene,300);case 9:for(this.score=0,this.time=0,this.moves=0,this.draw3=r,o=this.deck.getCardsNew(n),c=this.deck.getCardsNew(i),h=Be()(a).call(a,(function(e){return E.deck.getCardsNew(e)})),l=Be()(s).call(s,(function(e){return E.deck.getCardsNew(e)})),this.scene.audio.playSound(hs.Z.SHUFFLE),d=0;d<o.length;d++)this.stock.addCard(o[d],!1);p=0;case 20:if(!(p<l.length)){e.next=35;break}f=l[p],g=0;case 23:if(!(g<f.length)){e.next=32;break}return this.foundations[p].addCard(f[g],!0),f[g].setFacingWithFlippingAnim(!0),f[g].setInteractive(),e.next=29,ou(this.scene,30);case 29:g++,e.next=23;break;case 32:p++,e.next=20;break;case 35:m=0;case 36:if(!(m<h.length)){e.next=50;break}v=h[m],y=0;case 39:if(!(y<v.length)){e.next=47;break}return this.piles[m].addCardByDeal(v[y],!0,v.length),a[m][y].faceUp&&(v[y].setFacingWithFlippingAnim(!0),v[y].setInteractive()),e.next=44,ou(this.scene,30);case 44:y++,e.next=39;break;case 47:m++,e.next=36;break;case 50:A=0;case 51:if(!(A<c.length)){e.next=58;break}return this.waste.addCard(c[A],!0),e.next=55,ou(this.scene,30);case 55:A++,e.next=51;break;case 58:return e.next=60,ou(this.scene,400);case 60:this.mover.undos=[],this.updateAfterDeal();case 62:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.updateAfterDeal=function(){this.boardState=pu.IDLE,this.gameplay.scene.footer.hintBtn.setDisabled(!1),this.checkGameWin(),this.updateFoundationCardsInteractive(),this.mover.enableInput()},n.checkAutoCompleted=function(){if(this.scene.player.getPlayerSettings().autoComplete){var e,t=0===Le()(e=this.piles).call(e,(function(e){return e.cards.length>0&&!e.cards[0].isFacingUp()})).length;this.draw3&&(this.waste.cards.length>0||this.stock.cards.length>0)&&(t=!1),t?(this.canAutoComplete=!0,this.showAutoCompleteButton(!0)):(this.canAutoComplete=!1,this.showAutoCompleteButton(!1))}else this.showAutoCompleteButton(!1)},n.checkGameWin=function(){this.isGameWon()?this.handleGameWon():(this.isIdle()||this.isPlaying())&&this.checkAutoCompleted()},n.isGameWon=function(){var e;return!R()(e=this.foundations).call(e,(function(e){return!e.isFull()}))},n.outOfMove=function(){this.boardState=pu.GAME_OVER,this.gameplay.handleGameOver(!1),this.gameplay.saveSystem.clearLastGame()},n.clearOldBoard=function(){this.boardState=pu.NONE,this.canAutoComplete=!1,this.moves=0,this.time=0,this.score=0,this.stockRecycleCount=0,this.mover.disableInput(),this.gameplay.scene.footer.hintBtn.setDisabled(!0),this.gameplay.boardGame.showAutoCompleteButton(!1),this.waste.clear(),this.piles.forEach((function(e){return e.clear()})),this.foundations.forEach((function(e){return e.clear()})),this.stock.clear(),this.mover.clear(),this.hint.clear(),this.deck.reset()},n.handleGameWon=function(){this.showAutoCompleteButton(!1),this.gameplay.scene.footer.hintBtn.setDisabled(!0),this.increaseScore(Math.round(7e5/this.time*1e3)),this.scene.audio.playSound(hs.Z.WON),this.gameplay.saveSystem.clearLastGame(),this.boardState=pu.GAME_OVER,this.gameplay.handleGameOver(!0)},n.update=function(e){(this.isPlaying()||this.isAutoCompleting())&&(this.time+=e,this.timeToDecreaseScore+=e,this.timeToDecreaseScore>1e4&&(this.decreaseScore(2),this.timeToDecreaseScore-=1e4)),this.isPlaying()&&(this.timeToSaveBoardData+=e,this.timeToSaveBoardData>2e3&&(this.gameplay.saveSystem.saveCurrentBoardData(),this.timeToSaveBoardData-=1e3)),this.stock.update(e),this.mover.update(),this.hint.update(e),this.mover.isPicked()&&this.hint.resetAutoHintTime(),this.scene.footer.undoBtn.setDisabled(0==this.mover.undos.length||this.isAutoCompleting()),this.scene.footer.playBtn.setDisabled(this.isDealing()||this.isAutoCompleting())},n.isDealing=function(){return this.boardState==pu.DEALING},n.isPlaying=function(){return this.boardState==pu.PLAYING},n.isAutoCompleting=function(){return this.boardState==pu.AUTO_COMPLETING},n.isIdle=function(){return this.boardState==pu.IDLE},n.isOutOfMove=function(){return this.boardState==pu.OUT_OF_MOVE},n.isGameOver=function(){return this.boardState==pu.GAME_OVER},n.isNone=function(){return this.boardState==pu.NONE},n.createDevBtn=function(){if(GameCore.Utils.Valid.isDebugger()){this.createAutoPlay(),this.createAutoStepPlay(),this.createOutOfMoveButton(),this.createGameWonButton(),this.createChallengeResultButton(),this.createNotifyScreenButton(),this.createEditModeButton(),this.createMissionCompletedScreenButton(),this.createChangeLanguageButton();var e=this.scene.ads.getBannerHeight(),t=this.scene.world.getWorldSize(),n=t.width,i=t.height;Phaser.Actions.GridAlign([this.autoPlayBtn,this.autoPlayStepBtn,this.outOfMoveButton,this.gameWonButton,this.challengeResultButton,this.notifyScreenButton,this.editModeButton,this.missionCompletedButton,this.changeLanguageButton],{width:n>375?1:10,height:n>375?10:1,cellWidth:32,cellHeight:-40,x:100,y:i-120-e+5})}},n.createAutoPlay=function(){var e,t=this;this.autoPlayBtn=new Nh.Z(this.scene,30,30);var n=this.scene.add.image(0,0,ml,vl.IC_BG_OFF);n.setWorldSize(30,30);var i=this.scene.make.bitmapText({font:gc.Z.PRIMARY.KEY,size:this.scene.fontSize(10),text:"Auto\nPlay",origin:{x:.5,y:.5}});i.setCenterAlign(),i.setIgnoreLanguage(!0,"en"),null==(e=this.autoPlayBtn)||e.add([n,i]);var a=this.scene.time.addEvent({delay:50,repeat:-1,callback:function(){if(t.isIdle()&&(t.boardState=pu.PLAYING),!t.isPlaying()||t.canAutoComplete)return a.paused=!0,void i.setText("Auto\nPlay");t.hint.autoPlayStep()},paused:!0});this.autoPlayBtn.onClick=function(){a.paused?(i.setText("Stop"),a.paused=!1):(i.setText("Auto\nPlay"),a.paused=!0)}},n.createAutoStepPlay=function(){var e,t=this;this.autoPlayStepBtn=new Nh.Z(this.scene,30,30);var n=this.scene.add.image(0,0,ml,vl.IC_BG_OFF);n.setWorldSize(30,30);var i=this.scene.make.bitmapText({font:gc.Z.PRIMARY.KEY,size:this.scene.fontSize(10),text:"Step",origin:{x:.5,y:.5}});i.setCenterAlign(),i.setIgnoreLanguage(!0,"en"),null==(e=this.autoPlayStepBtn)||e.add([n,i]),this.autoPlayStepBtn.onClick=function(){t.isIdle()&&(t.boardState=pu.PLAYING),t.isPlaying()&&t.hint.autoPlayStep()}},n.createOutOfMoveButton=function(){var e,t=this;this.outOfMoveButton=new Nh.Z(this.scene,30,30);var n=this.scene.add.image(0,0,ml,vl.IC_BG_OFF);n.setWorldSize(30,30);var i=this.scene.make.bitmapText({font:gc.Z.PRIMARY.KEY,size:this.scene.fontSize(10),text:"Out of\nMove",origin:{x:.5,y:.5}});i.setIgnoreLanguage(!0,"en"),i.setCenterAlign(),null==(e=this.outOfMoveButton)||e.add([n,i]),this.outOfMoveButton.onClick=function(){t.outOfMove()}},n.createGameWonButton=function(){var e,t=this;this.gameWonButton=new Nh.Z(this.scene,30,30);var n=this.scene.add.image(0,0,ml,vl.IC_BG_OFF);n.setWorldSize(30,30);var i=this.scene.make.bitmapText({font:gc.Z.PRIMARY.KEY,size:this.scene.fontSize(10),text:"Won",origin:{x:.5,y:.5}});i.setCenterAlign(),i.setIgnoreLanguage(!0,"en"),null==(e=this.gameWonButton)||e.add([n,i]),this.gameWonButton.onClick=(0,s.Z)(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.handleGameWon();case 1:case"end":return e.stop()}}),e)})))},n.createChallengeResultButton=function(){var e=this;this.challengeResultButton=new Nh.Z(this.scene,30,30);var t=this.scene.add.image(0,0,ml,vl.IC_BG_OFF);t.setWorldSize(30,30);var n=this.scene.make.bitmapText({font:gc.Z.PRIMARY.KEY,size:this.scene.fontSize(10),text:"CHRe",origin:{x:.5,y:.5}});n.setIgnoreLanguage(!0,"en"),n.setCenterAlign(),this.challengeResultButton.add([t,n]),this.challengeResultButton.onClick=(0,s.Z)(u().mark((function t(){return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.scene.screen.open(cs.o4.PLAY_WITH_FRIEND_GAME_OVER_SCREEN);case 1:case"end":return t.stop()}}),t)})))},n.createNotifyScreenButton=function(){var e=this;this.notifyScreenButton=new Nh.Z(this.scene,30,30);var t=this.scene.add.image(0,0,ml,vl.IC_BG_OFF);t.setWorldSize(30,30);var n=this.scene.make.bitmapText({font:gc.Z.PRIMARY.KEY,size:this.scene.fontSize(10),text:"NTF",origin:{x:.5,y:.5}});n.setIgnoreLanguage(!0,"en"),n.setCenterAlign(),this.notifyScreenButton.add([t,n]),this.notifyScreenButton.onClick=(0,s.Z)(u().mark((function t(){return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.scene.game.globalScene.screen.open(cs.o4.NOTIFY_SCREEN,{message:"creatingTournament",duration:5e3,loading:!0});case 3:case"end":return t.stop()}}),t)})))},n.createEditModeButton=function(){var e=GameCore.Configs.Gameplay.EditMode;this.editModeButton=new Nh.Z(this.scene,30,30);var t=this.scene.add.image(0,0,ml,vl.IC_BG_OFF);t.setWorldSize(30,30);var n=this.scene.make.bitmapText({font:gc.Z.PRIMARY.KEY,size:this.scene.fontSize(10),text:"Edit: off",origin:{x:.5,y:.5}});n.setIgnoreLanguage(!0,"en"),n.setMaxWidth(35),n.setCenterAlign(),this.editModeButton.add([t,n]),this.editModeButton.onClick=(0,s.Z)(u().mark((function t(){return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e=!e,GameCore.Configs.Gameplay.EditMode=e,n.setText("Edit: "+(e?"on":"off"));case 3:case"end":return t.stop()}}),t)})))},n.createMissionWelcomeScreenButton=function(){var e=this;this.missionWelcomeButton=new Nh.Z(this.scene,30,30);var t=this.scene.add.image(0,0,ml,vl.IC_BG_OFF);t.setWorldSize(30,30);var n=this.scene.make.bitmapText({font:gc.Z.PRIMARY.KEY,size:this.scene.fontSize(10),text:"MWC",origin:{x:.5,y:.5}});n.setIgnoreLanguage(!0,"en"),n.setCenterAlign(),this.missionWelcomeButton.add([t,n]),Phaser.Display.Align.In.BottomRight(this.missionWelcomeButton,this.scene.gameZone,0,-120),this.missionWelcomeButton.onClick=(0,s.Z)(u().mark((function t(){return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.scene.screen.open(cs.o4.MISSION_WELCOME_SCREEN);case 1:case"end":return t.stop()}}),t)})))},n.createMissionCompletedScreenButton=function(){var e=this;this.missionCompletedButton=new Nh.Z(this.scene,30,30);var t=this.scene.add.image(0,0,ml,vl.IC_BG_OFF);t.setWorldSize(30,30);var n=this.scene.make.bitmapText({font:gc.Z.PRIMARY.KEY,size:this.scene.fontSize(10),text:"MC",origin:{x:.5,y:.5}});n.setIgnoreLanguage(!0,"en"),n.setCenterAlign(),this.missionCompletedButton.add([t,n]),Phaser.Display.Align.In.BottomRight(this.missionCompletedButton,this.scene.gameZone,0,-160),this.missionCompletedButton.onClick=(0,s.Z)(u().mark((function t(){var n;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n={description:{key:"solveAlmostFinishGame"},stats:{key:"journeyLimitCards"},level:11,completed:!0},e.scene.screen.open(cs.o4.MISSION_COMPLETED_SCREEN,n);case 2:case"end":return t.stop()}}),t)})))},n.createChangeLanguageButton=function(){var e=this;this.changeLanguageButton=new Nh.Z(this.scene,30,30);var t=this.scene.add.image(0,0,ml,vl.IC_BG_OFF);t.setWorldSize(30,30);var n=this.scene.make.bitmapText({font:gc.Z.PRIMARY.KEY,size:this.scene.fontSize(10),text:"Change\nLanguage",origin:{x:.5,y:.5}});n.setIgnoreLanguage(!0,"en"),n.setCenterAlign(),this.changeLanguageButton.add([t,n]);var i=["ru","en","tr","zh","de","es","id","it","ja","pt","fr"],a=tn()(i).call(i,this.scene.player.getPlayerSettings().language||"en");this.changeLanguageButton.onClick=(0,s.Z)(u().mark((function t(){var n;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a++,n=i[a%i.length],e.scene.lang.changeLanguage(n),e.scene.player.setSetting("language",n);case 4:case"end":return t.stop()}}),t)}))),this.changeLanguageButton.setDepth(1e4)},n.getVerticalSpacePile=function(){return Dh.VERTICAL_PILE_SPACE},n.updateFoundationCardsInteractive=function(){this.foundations.forEach((function(e){e.cards.forEach((function(t,n){n<e.cards.length-1?t.disableInteractive():t.setInteractive()}))}))},n.getCurrentBoard=function(){var e,t,n,i,a;return{seed:this.gameplay.getSeed(),stock:Be()(e=this.stock.cards).call(e,(function(e){return Al(e.getTag())})),waste:Be()(t=this.waste.cards).call(t,(function(e){return Al(e.getTag())})),piles:Be()(n=this.piles).call(n,(function(e){var t;return Be()(t=e.cards).call(t,(function(e){return Al(e.getTag())}))})),faceBackOfPiles:Be()(i=this.piles).call(i,(function(e){var t;return Fh()(t=e.cards).call(t,(function(e){return e.isFacingUp()}))})),foundations:Be()(a=this.foundations).call(a,(function(e){var t;return Be()(t=e.cards).call(t,(function(e){return Al(e.getTag())}))})),score:this.getScore(),time:this.getTime(),moves:this.getMoves(),draw3:this.draw3,movesData:this.mover.undos,updatedAt:(new Date).getTime()}},n.saveCurrentBoard=function(){this.lastGame=this.getCurrentBoard()},(0,ce.Z)(t,[{key:"boardState",get:function(){return this._boardState},set:function(e){this._boardState=e,this.scene.events.emit(vo.BOARD_STATE_CHANGED,this.boardState)}}]),t}(Phaser.Events.EventEmitter);function Al(e){var t=e%100,n=(e-t)/100;return 13*(1==n?3:n-2)+t-1}var El=yl,Tl=An.Z.GAMEPLAY_DEFAULT,Cl=Tl.KEY,Sl=Tl.FRAME,bl=function(e){function t(t,n){var i;return(i=e.call(this,t)||this).icon=void 0,i.text=void 0,i.config=void 0,i.config=(0,a.Z)({iconTextPadding:8,text:"newGame",font:gc.Z.BOLD_SHADOW.KEY,iconFrame:Sl.IC_NEW,iconWidth:20,iconHeight:21},n),i.createIcon(),i.createLabelText(),i.updateContainerSize(),i.alignIcon(),i.alignText(),i.text.on("textChanged",(function(){i.updateContainerSize(),i.alignIcon(),i.alignText()})),i}(0,r.Z)(t,e);var n=t.prototype;return n.getIcon=function(){return this.icon},n.getText=function(){return this.text},n.clearTint=function(){this.icon.clearTint(),this.text.clearTint()},n.createIcon=function(){var e=this.config,t=e.iconWidth,n=void 0===t?20:t,i=e.iconHeight,a=void 0===i?21:i,s=e.iconFrame,r=void 0===s?Sl.IC_NEW:s,o=e.iconKey,c=void 0===o?Cl:o;this.icon=this.scene.add.image(0,0,c,r),this.icon.setWorldSize(n,a),this.add(this.icon)},n.alignIcon=function(){Phaser.Display.Align.In.LeftCenter(this.icon,this,0,-1)},n.createLabelText=function(){var e=this.config,t=e.text,n=void 0===t?"newGame":t,i=e.fontSize,a=void 0===i?21:i,s=e.font;this.text=this.scene.make.bitmapText({font:s,size:this.scene.fontSize(a),text:n,origin:{x:.5,y:.5}}),this.add(this.text)},n.alignText=function(){Phaser.Display.Align.In.RightCenter(this.text,this,0,0)},n.updateContainerSize=function(){var e=this.config.iconTextPadding,t=void 0===e?8:e;this.setSize(this.icon.width+t+this.text.width,this.icon.height>this.text.height?this.icon.height:this.text.height)},t}(Phaser.GameObjects.Container),Il=267,wl=48,_l=An.Z.GAMEPLAY_DEFAULT,xl=_l.KEY,Pl=_l.FRAME,kl=function(e){function t(t){return e.call(this,t)||this}(0,r.Z)(t,e);var n=t.prototype;return n.getMaxHeightTableau=function(){var e=To.instance.isChallengeMode()?55:0,t=this.scene.footer;return t.y-t.height/2-this.piles[0].y-Dh.CARD_HEIGHT/2-e},n.createAutoWinButton=function(){var e=Il,t=wl,n=new Nh.Z(this.scene,e,t);n.setName("AutoComplete");var i=this.scene.add.image(0,0,xl,Pl.BTN_AUTO_COMPLETE);i.setWorldSize(265,46),n.onClick=this.handleAutoCompleteClick;var a=new bl(this.scene,{iconTextPadding:8,text:"autoComplete",font:gc.Z.BOLD_SHADOW.KEY,fontSize:22,iconKey:An.Z.GAMEPLAY_DEFAULT.KEY,iconFrame:An.Z.GAMEPLAY_DEFAULT.FRAME.IC_DONE,iconWidth:20,iconHeight:16.5});a.text.setCenterAlign().setMaxSize(200,30),n.add([i,a]),Phaser.Display.Align.To.TopCenter(n,this.scene.footer,0,24),new Vc.Z({targets:[n],duration:500,props:{scale:"*=0.98"}}).play(),n.kill(),this.autoCompleteBtn=n},n.listenEvents=function(){var e=this;this.scene.events.on("settings-changed",(function(t){t==Za.autoComplete&&e.checkAutoCompleted(),"leftHanded"==t&&e.alignBoard(!0)}))},n.alignBoard=function(e){void 0===e&&(e=!1);var t=Lh(),n=this.scene.world.getWorldSize().width/2,i=Dh.FOUNDATION_Y+30*t,a=this.getHorizontalPileSpace();this.scene.player.getPlayerSettings().leftHanded?(this.placeCenter(this.foundations,n,i,a,1.5),this.placeCenter([this.waste],n,i,a,-1.8),this.placeCenter([this.stock],n,i,a,-3)):(this.placeCenter(this.foundations,n,i,a,-1.5),this.placeCenter([this.waste],n,i,a,1.2),this.placeCenter([this.stock],n,i,a,3));var s=Dh.SPACE_BETWEEN_PILE_AND_FOUNDATION;this.placeCenter(this.piles,n,i+s,a),e?this.deck.alignCurrentDeck():this.deck.align()},n.getHorizontalPileSpace=function(){var e=Math.floor((this.scene.gameZone.width-7*Dh.CARD_WIDTH)/8)+Dh.CARD_WIDTH;return Math.min(e,Dh.MAX_HORIZONTAL_PILE_SPACE)},n.placeCenter=function(e,t,n,i,a){void 0===a&&(a=0);for(var s=e.length,r=t-(s/2-.5-a)*i,o=0;o<s;o++)e[o].setPosition(r+o*i,n)},n.showAutoCompleteButton=function(e){if(void 0===e&&(e=!0),e){var t=To.instance.isChallengeMode()?40:0;this.autoCompleteBtn.revive(),Phaser.Display.Align.To.TopCenter(this.autoCompleteBtn,this.scene.footer,0,24+t),this.scene.footer.journeyButton.kill()}else{this.autoCompleteBtn.kill();var n=this.boardState;n!==pu.GAME_OVER&&n!==pu.AUTO_COMPLETING&&this.scene.footer.journeyButton.revive()}},t}(El),Ol=kl,Ll=135,Rl=36,Bl=An.Z.GAMEPLAY_DEFAULT_LANDSCAPE,Dl=Bl.KEY,Nl=Bl.FRAME,Ml=function(e){function t(t){return e.call(this,t)||this}(0,r.Z)(t,e);var n=t.prototype;return n.getMaxHeightTableau=function(){var e=To.instance.isChallengeMode()?45:0,t=this.scene.footer;return t.y-t.height/2-this.piles[0].y-Dh.CARD_HEIGHT/2-e},n.createAutoWinButton=function(){var e=Ll,t=Rl,n=new Nh.Z(this.scene,e,t);n.setName("AutoComplete");var i=this.scene.add.image(0,0,Dl,Nl.BTN_AUTO_COMPLETE);i.setWorldSize(133,34),n.onClick=this.handleAutoCompleteClick;var a=new bl(this.scene,{iconTextPadding:5,text:"autoComplete",fontSize:12,iconKey:An.Z.GAMEPLAY_DEFAULT.KEY,iconFrame:An.Z.GAMEPLAY_DEFAULT.FRAME.IC_DONE,iconWidth:15.5,iconHeight:13.5});a.text.setCenterAlign().setMaxSize(100,20),n.add([i,a]),new Vc.Z({targets:[n],duration:500,props:{scale:"*=0.98"}}).play(),n.kill(),this.autoCompleteBtn=n},n.listenEvents=function(){var e=this;this.scene.events.on("settings-changed",(function(t){if(t==Za.autoComplete&&e.checkAutoCompleted(),t==Za.largeWidthLayout){if(Rh(),e.scene.header.alignChildren(),e.updateSlotSize(),e.alignBoard(),e.isDealing()||!e.lastGame)return;e.clearOldBoard(),e.dealingWithLastBoard(e.lastGame)}}))},n.alignBoard=function(){this.scene.player.getPlayerSettings().largeWidthLayout?this.alignBoardWithLagerWidth():this.alignBoardWidthSmallWidth(),this.waste.align(),this.deck.align()},n.alignBoardWithLagerWidth=function(){var e=Dh.CARD_WIDTH,t=Lh(),n=this.scene.world.getWorldSize().width,i=n/2,a=Dh.FOUNDATION_Y+30*t,s=this.getHorizontalPileSpace(),r=a+25,o=s-e,c=7*Dh.CARD_WIDTH+6*o,h=Math.max((n-c)/2/(1+178/116),e/2+2);this.placeCenter(this.piles,i,a,s),this.waste.setPosition(n-h,r),this.stock.setPosition(n-h,r+172);for(var u=0;u<this.foundations.length;u++)this.foundations[u].setPosition(h,r+u*(Dh.CARD_HEIGHT+10))},n.alignBoardWidthSmallWidth=function(){var e=Lh(),t=this.scene.world.getWorldSize().width/2,n=Dh.FOUNDATION_Y+30*e,i=this.getHorizontalPileSpace();this.placeCenter(this.foundations,t,n,i,-1.5),this.placeCenter([this.waste],t,n,i,1.2),this.placeCenter([this.stock],t,n,i,3);var a=Dh.SPACE_BETWEEN_PILE_AND_FOUNDATION*e;this.placeCenter(this.piles,t,n+a,i)},n.getHorizontalPileSpace=function(){var e=window.game.player.getPlayerSettings().largeWidthLayout?1.18:1,t=Math.floor((this.scene.gameZone.width-7*Dh.CARD_WIDTH)/8)+Dh.CARD_WIDTH;return Math.min(t,Dh.MAX_HORIZONTAL_PILE_SPACE*e)},n.placeCenter=function(e,t,n,i,a){void 0===a&&(a=0);for(var s=e.length,r=t-(s/2-.5-a)*i,o=0;o<s;o++)e[o].setPosition(r+o*i,n)},n.showAutoCompleteButton=function(e){if(void 0===e&&(e=!0),e){var t=To.instance.isChallengeMode()?35:0;this.autoCompleteBtn.revive(),Phaser.Display.Align.To.TopCenter(this.autoCompleteBtn,this.scene.footer,0,12+t)}else this.autoCompleteBtn.kill()},n.updateSlotSize=function(){var e;P()(e=[]).call(e,this.piles,[this.waste,this.stock],this.foundations).forEach((function(e){return e.updateSlotSize()}))},t}(El),Gl=Ml,Zl=GameCore.world.isLandscape()?Gl:Ol,Fl=function(){function e(){this.stock=void 0,this.waste=void 0,this.tableau=void 0,this.foundations=void 0,this.shuffler=void 0,this.turn1=void 0,this.totalMoves=0,this.outOfMove=void 0,this.turn3Seeds=[],this.turn1Seeds=[],this.shuffler=new rl,this.turn1=!0}var t=e.prototype;return t.intBoard=function(e){var t=this;this.stock=[],this.waste=[],this.tableau=[],this.foundations=[];for(var n=0;n<7;n++)this.tableau.push([]);for(var i=0;i<4;i++)this.foundations.push([]);this.stock=[201,202,203,204,205,206,207,208,209,210,211,212,213,301,302,303,304,305,306,307,308,309,310,311,312,313,401,402,403,404,405,406,407,408,409,410,411,412,413,101,102,103,104,105,106,107,108,109,110,111,112,113],this.stock=Be()(e).call(e,(function(e){return t.stock[e]}));for(var a=0;a<7;a++)for(var s=a;s<7;s++)this.tableau[s].push((this.stock.pop()||0)+1e3);for(var r=0;r<7;r++){var o=this.tableau[r];o[o.length-1]=this.faceUp(o[o.length-1])}},t.printBoard=function(){},t.faceUp=function(e){return e-1e3},t.isFaceUp=function(e){return e<1e3},t.findFoundation=function(e){for(var t=0;t<4;t++){var n=this.foundations[t][this.foundations[t].length-1];if(n&&Math.abs(e-n)<=13&&e%100==n%100+1)return this.foundations[t]}},t.findColum=function(e){for(var t=0;t<7;t++){var n=this.tableau[t][this.tableau[t].length-1];if(!n&&e%100==13)return this.tableau[t];if(n&&(e/2>120&&n/2<120||e/2<120&&n/2>120)&&e%100+1==n%100)return this.tableau[t]}},t.getMovable=function(){var e,t,n,i,a,s=this,r=[],o=T()(e=this.waste).call(e,-1),c=Be()(t=this.tableau).call(t,(function(e){return e.at(-1)||0})),h=Be()(n=this.tableau).call(n,(function(e){return e[Fh()(e).call(e,(function(e){return s.isFaceUp(e)}))]||0})),u=Be()(i=this.foundations).call(i,(function(e){return e.at(-1)||0})),l=Be()(u).call(u,(function(e,t){return e?e+1:100*(t+1)+1})),d=P()(a=[]).call(a,o,c),p=R()(d).call(d,(function(e){return e%100==1}));if(p){var f=tn()(l).call(l,p);r.push({card:p,dest:this.foundations[f]})}for(var g=0;g<h.length;g++){var m,v=h[g],y=tn()(m=this.tableau[g]).call(m,v);if(v&&y>=1){if(h[g]==c[g]){var A=tn()(l).call(l,v);if(A>=0){r.push({card:v,dest:this.foundations[A]});continue}}var E=this.findColum(v);E&&r.push({card:v,dest:E})}}for(var C=0;C<d.length;C++){var S=d[C];if(S){var b=tn()(l).call(l,S);b>=0&&r.push({card:S,dest:this.foundations[b]})}}for(var I=0;I<h.length;I++){var w,_=h[I];if(_&&_%100==13)if(0==tn()(w=this.tableau[I]).call(w,_))continue;if(_){var x=this.findColum(_);x&&r.push({card:_,dest:x})}}var k=o.at(-1);if(k){var O=this.findColum(k);O&&r.push({card:k,dest:O})}return Le()(r).call(r,(function(e,t,n){return Fh()(n).call(n,(function(t){return t===e}))===t}))},t.findPos=function(e){if(this.waste.at(-1)==e)return this.waste;for(var t=0;t<7;t++){var n;if(be()(n=this.tableau[t]).call(n,e))return this.tableau[t]}for(var i=0;i<4;i++){var a;if(be()(a=this.foundations[i]).call(a,e))return this.tableau[i]}return[]},t.solve=function(){var e;for(this.totalMoves=0;this.move();)this.totalMoves+=1;return!R()(e=this.foundations).call(e,(function(e){return e.length<13}))},t.move=function(){var e,t=this.getMovable();if(t.length>0){var n=t[Math.floor(Math.random()*t.length)],i=n.card,a=n.dest,s=this.findPos(i),r=tn()(s).call(s,i);return a.push.apply(a,zh()(s).call(s,r)),s[s.length-1]>1e3&&(s[s.length-1]-=1e3),this.outOfMove=!1,!0}if(this.turn1){var o=this.stock.pop();if(o)return o>1e3&&(o-=1e3),this.waste.push(o),!0}else{var c,h,u=zh()(c=this.stock).call(c,-3);if(u.length>0)return(h=this.waste).push.apply(h,wu()(u).call(u)),!0}return this.waste.length>0&&!this.outOfMove&&(this.stock=wu()(e=this.waste).call(e),this.waste=[],this.outOfMove=!0,!0)},t.generateMap=function(e,t){if(void 0===e&&(e=0),void 0===t&&(t=!0),0!=e){this.turn1=t;for(var n,i,a=[],s=0;s<e;s++){for(var r=this.shuffler.generateSeed(),o=0,c=0,h=0;h<50;h++)o+=+this.solveSeed(r),c=(this.totalMoves+c*h)/(h+1);o/50==1&&a.push({seed:r,totalMoves:c,winRate:o/50})}if(t)(n=this.turn1Seeds).push.apply(n,a);else(i=this.turn3Seeds).push.apply(i,a)}},t.generateMapByRate=function(e,t,n,i){if(0!=e){this.turn1=t;for(var a,s,r=[],o=0;o<e;o++){for(var c=this.shuffler.generateSeed(),h=0,u=0,l=0;l<100;l++){this.solveSeed(c)&&(u=(this.totalMoves+u*h)/(h+1),h+=1)}var d=h/100;d>=n&&d<i&&r.push({seed:c,totalMoves:u,winRate:h/100})}if(t)(a=this.turn1Seeds).push.apply(a,r);else(s=this.turn3Seeds).push.apply(s,r)}},t.solveSeed=function(e){var t=this.shuffler.shuffle(e);return this.intBoard(t),!!this.solve()},t.testMaps=function(e,t){this.turn1=!t;for(var n,i,a=[],s=0;s<e.length;s++){var r=e[s],o=this.shuffler.shuffle(r);this.intBoard(o);for(var c=0,h=0,u=0;u<100;u++)c+=+this.solveSeed(r),h=(this.totalMoves+h*u)/(u+1);c/100==1&&a.push({seed:r,totalMoves:h,winRate:c/100})}t?(n=this.turn3Seeds).push.apply(n,a):(i=this.turn1Seeds).push.apply(i,a)},e}(),Ul=Fl,zl=function(){function e(e){this.gameplay=void 0,this.gameplay=e}var t=e.prototype;return t.saveCurrentBoardData=function(){var e=this.gameplay.boardGame;if(!To.instance.isJourneyMode()&&!e.mover.isPicked()){var t=e.getCurrentBoard();Nr("current-board",{boardData:t})}},t.clearLastGame=function(){!function(e){try{return localStorage.removeItem(e),!0}catch(t){return!1}}("current-board")},t.getLastGameData=function(){var e=Dr("current-board");if(e){var t=e.boardData;if(this.isBoardDataValid(t))return t}},t.isBoardDataValid=function(e){var t,n=GameCore.Utils.Valid;if(!n.isObject(e))return!1;var i=e.piles,a=e.foundations,s=e.waste,r=e.stock,o=e.movesData,c=e.score,h=e.time,u=e.moves,l=e.seed;if(!n.isNumber(c))return!1;if(!n.isNumber(h))return!1;if(!n.isNumber(u))return!1;if(!n.isString(l))return!1;var d=void 0!==i,p=void 0!==a,f=void 0!==s,g=void 0!==r,m=void 0!==o,v=void 0!==l,y=0;return P()(t=[]).call(t,i,a,[s,r]).forEach((function(e){return y+=e.length})),!!(d&&p&&f&&g&&m&&v&&52==y)},e}(),Wl=zl,Yl=function(e){function t(t){var n;return(n=e.call(this)||this).scene=void 0,n.boardGame=void 0,n.solver=void 0,n.seed=void 0,n.saveSystem=void 0,n.confettiSmallFallDown=void 0,n.cardsLayer=void 0,n.startGameCount=void 0,n.finishGame=(0,s.Z)(u().mark((function e(){var t;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.boardGame.isGameOver()){e.next=2;break}return e.abrupt("return");case 2:return n.saveSystem.clearLastGame(),e.next=5,n.handleShowInterstitialAd();case 5:return t=n.boardGame.getScore(),e.next=8,n.scene.storage.dispatch(cr(t));case 8:case"end":return e.stop()}}),e)}))),n.finishJourneyGame=(0,s.Z)(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.boardGame.isGameOver()){e.next=2;break}return e.abrupt("return");case 2:return n.saveSystem.clearLastGame(),e.next=5,n.handleShowInterstitialAd();case 5:case"end":return e.stop()}}),e)}))),n.showNotifyNoAds=function(e){e&&e.name!==cs.o4.NOTIFY_SCREEN||n.scene.game.globalScene.screen.open(cs.o4.NOTIFY_SCREEN,{message:"noAdsToDisplay",duration:2e3,loading:!1})},n.showNotifySkipAds=function(){n.scene.game.globalScene.screen.open(cs.o4.NOTIFY_SCREEN,{message:"Sorry, No Rewards!\nYou have cancelled the ad!",duration:3e3,loading:!1})},n.scene=t,n.startGameCount=0,n.cardsLayer=t.add.layer(),n.cardsLayer.setDepth(Dh.DEPTH.CARD),n.solver=new Ul,n.boardGame=new Zl((0,$a.Z)(n)),n.saveSystem=new Wl((0,$a.Z)(n)),n.createConfetti(),n}(0,r.Z)(t,e);var n=t.prototype;return n.getSeed=function(){return this.seed},n.startJourneyMode=function(){var e=(0,s.Z)(u().mark((function e(){var t,n;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.boardGame.showAutoCompleteButton(!1),this.boardGame.clearOldBoard(),To.instance.isJourneyMode()||To.instance.setGameMode(Ao.JOURNEY),this.saveSystem.clearLastGame(),(t=this.scene.journeyLevelMechanicManager.getMissionDescription())&&this.scene.header.journeyInfo&&this.scene.header.journeyInfo.setDescription(t),e.next=8,this.playMissionWelcomeAnimation();case 8:n=this.scene.journey.getCurrentMission(),this.handleJourneyMission(n);case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.handleJourneyMission=function(e){if(e){var t=e.boardData;t.currentState?this.boardGame.initGameWithBoardState(t):(this.seed=t.seed,this.boardGame.draw3=!1,this.boardGame.startGame(t.seed))}else this.startNewGame()},n.startNewGame=function(){var e=(0,s.Z)(u().mark((function e(){var t,n,i=this;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!GameCore.Configs.Gameplay.ForceJourneyMode){e.next=4;break}return this.scene.journey.setIsPlayingCurrentLevel(),this.startJourneyMode(),e.abrupt("return");case 4:if(this.tryCreateShortcut(),this.startGameCount+=1,this.saveSystem.clearLastGame(),this.scene.levelLoader.isLevelLoaded()){e.next=10;break}return this.scene.time.delayedCall(500,(function(){return i.startNewGame()})),e.abrupt("return");case 10:if(!this.boardGame.isDealing()){e.next=12;break}return e.abrupt("return");case 12:t=this.scene.player.getPlayerSettings().drawMode3,n=this.scene.levelLoader.randomSeed(t),this.seed=n,this.boardGame.draw3=t,this.boardGame.startGame(n),this.scene.checkNewUser();case 18:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.checkGameplayBeforeStartNewGame=function(){if(!this.boardGame.isGameWon()&&this.boardGame.getMoves()>0){this.scene.gameStats.addLose(this.boardGame.draw3);var e=this.scene.gameStats.getDraw(this.boardGame.draw3),t=e.totalGame,n=e.wins;this.scene.analytics.event(yn._.LEVEL_GIVE_UP,{total_game:t,wins:n,score:this.boardGame.getScore(),moves:this.boardGame.getMoves(),time_played:Math.floor(this.boardGame.getTime()/1e3),draw3:this.boardGame.draw3})}},n.playMissionWelcomeAnimation=function(){var e=(0,s.Z)(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.scene.screen.open(cs.o4.MISSION_WELCOME_SCREEN),e.next=3,ou(this.scene,1e3);case 3:this.scene.screen.close(cs.o4.MISSION_WELCOME_SCREEN);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.startGameWith=function(e,t){this.seed=t,this.boardGame.draw3=e,this.boardGame.startGame(t)},n.replayGame=function(){if(this.boardGame.boardState!==pu.DEALING)if(this.seed)if(To.instance.isJourneyMode()){var e=this.scene.journey.getCurrentMission();this.handleJourneyMission(e)}else this.boardGame.startGame(this.seed);else this.startNewGame()},n.getGameOverScreenKey=function(e){return To.instance.isChallengeMode()?cs.o4.PLAY_WITH_FRIEND_GAME_OVER_SCREEN:To.instance.isTournamentMode()?cs.o4.TOURNAMENTS_RESULT_SCREEN:To.instance.isJourneyMode()?cs.o4.MISSION_COMPLETED_SCREEN:e?cs.o4.VICTORY_SCREEN:cs.o4.NO_MORE_MOVES_SCREEN},n.handleGameOver=function(){var e=(0,s.Z)(u().mark((function e(t){var n,i,a,r,o,c,h,l,d,p,f,g,m,v,y,A,E,T,C,S,b,I,w,_,x,P,k,O,L,R,B,D,N,M,G,Z,F,U,z,W,Y,H,K;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.boardGame.mover.disableInput(),e.next=3,this.showWellDoneScreen(t);case 3:if(i=this.scene,a=i.journey,r=i.gameStats,o=i.levelLoader,c=i.storage,h=i.analytics,l=i.screen,d=this.boardGame.draw3,p=this.boardGame.getScore(),f=this.boardGame.getTime(),g=this.boardGame.getMoves(),m=this.getSeed(),v=this.boardGame.mover.undoClicked>0,null==(n=this.boardGame.updateScoreTimer)||n.remove(),y=Math.floor(f/1e3),A=c.getState(),E=Ir(A),T=r.getDraw(this.boardGame.draw3),C=T.totalGame,S=T.wins,b=o.getLevelByWins(S),I=To.instance.isJourneyMode(),w=To.instance.getGameMode(),I){e.next=26;break}if(t?r.addWin({draw3:d,score:p,winningMoves:g,winningTime:f,usedUndo:v}):r.addLose(this.boardGame.draw3),!E){e.next=25;break}return e.next=23,Fr(E);case 23:_=e.sent,c.dispatch(ho(_));case 25:c.dispatch(go({level:S,score:p,time:f,moves:g,total_game:C,difficulty:b,seed:m,time_played:y,success:t,draw3:this.boardGame.draw3}));case 26:return e.next=28,c.dispatch(function(){var e=(0,s.Z)(u().mark((function e(t,n){var i,a,s,r,o,c,h,l,d,p,f,g,m,v,y,A,E,T,C;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,i=window.game,a=i.analytics,i.facebook,s=n(),r=er(s),o=Br(s),c=o.score,h=void 0===c?0:c,l=o.level,d=void 0===l?0:l,p=o.time,f=void 0===p?0:p,g=o.moves,m=void 0===g?0:g,v=o.total_game,y=o.difficulty,A=o.seed,E=o.time_played,T=o.success,C=o.draw3,To.instance.isJourneyMode()||t(oc(h)),e.next=11,t(uc(r,{score:h,level:d,time:f,moves:m}));case 11:s=n(),a.event(yn._.MATCH_END,{game_mode:GameCore.Utils.String.toUpperCamelCase(r),total_game:v,difficulty:y,level:d,level_name:"level_"+d,score:h,moves:m,time_played:E,success:T,draw3:C,seed:A}),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(0),(0,he.tO)(e.t0);case 18:case"end":return e.stop()}}),e,null,[[0,15]])})));return function(t,n){return e.apply(this,arguments)}}());case 28:x=r.getDraw(this.boardGame.draw3),P=x.bestScore,k=x.bestWinningTime,O=x.bestWinningMoves,L=this.getGameOverScreenKey(t),R={score:p,bestScore:P,winningMoves:g,bestWinningMoves:O,winningTime:f,bestWinningTime:k,draw3:this.boardGame.draw3},B=this.getJourneyGameOverScreenData(t),D=I?B:R,l.open(L,D),N=this.scene.player.getPlayerSettings(),M=N.modifiedOptions,G=N.largeWidthLayout,Z=N.autoComplete,F=N.vibrate,U=be()(M).call(M,Za.largeWidthLayout),z=be()(M).call(M,Za.vibrate),W=be()(M).call(M,Za.autoComplete),Y=U?""+G:"default",H=z?""+F:"default",K=W?""+Z:"default",I?h.event(yn._.JOURNEY_END,{level:a.getCurrentLevel(),mission_id:a.getSeason(),time_played:y,moves:g,seed:m,success:t,mode2_option:Y,auto_complete_option:K,vibrate_option:H}):h.event(yn._.LEVEL_END,{game_mode:GameCore.Utils.String.toUpperCamelCase(w),total_game:C,difficulty:b,level:S,score:p,moves:g,time_played:y,success:t,draw3:this.boardGame.draw3,seed:m,mode2_option:Y,auto_complete_option:K,vibrate_option:H}),I&&t&&a.incrementLevel();case 43:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.getJourneyGameOverScreenData=function(e){var t,n=this.scene,i=n.journeyLevelMechanicManager,a=n.journey;return{description:null!=(t=i.getMissionDescription())?t:{key:""},stats:i.getMissionLimit(),level:a.getCurrentLevel(),completed:e}},n.showWellDoneScreen=function(){var e=(0,s.Z)(u().mark((function e(t){var n;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(To.instance.getGameMode()!==Ao.JOURNEY||!t){e.next=6;break}if("move-same-suit-cards-to-foundation"!==(n=this.boardGame.scene.journey.getCurrentMission()).type&&"open-one-card"!==n.type){e.next=6;break}return e.next=6,ou(this.scene,2e3);case 6:return this.scene.screen.open(cs.o4.WELL_DONE_SCREEN,{wellDone:t}),e.next=9,ou(this.scene,2e3);case 9:return this.scene.screen.close(cs.o4.WELL_DONE_SCREEN),e.next=12,ou(this.scene,300);case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.startGame=function(){if(To.instance.isChallengeMode()){var e=this.scene.storage.getState(),t=this.scene.player.getPlayerId();if(!Pr(e,{playerId:t})){var n=window.FBInstant.getEntryPointData();if(n){var i=n.draw3,a=n.seed;if(void 0!=i&&void 0!=a)return void this.startGameWith(i,a)}}}if(To.instance.isTournamentMode()){var s=this.scene.levelLoader.getRandomBeginnerSeed();this.startGameWith(!1,s)}else{var r=this.saveSystem.getLastGameData();r&&!GameCore.Configs.Gameplay.ForceJourneyMode?(this.seed=r.seed,this.boardGame.continueGame(r)):this.startNewGame()}},n.tryCreateShortcut=function(){this.startGameCount>=1&&this.scene.game.facebook.attemptToAddShortcut()},n.startGameWithSeed=function(e){this.boardGame.boardState!==pu.DEALING&&(this.seed=e,this.boardGame.startGame(e))},n.update=function(e){this.boardGame.update(e)},n.handleShowInterstitialAd=function(){var e=(0,s.Z)(u().mark((function e(){var t;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=this.scene).ads.canbeShowInterstitialAd()){e.next=16;break}return t.ads.setAdInProcess(!0),t.audio.pauseAllSounds(),t.audio.pauseMusic(),t.audio.muteAll(),e.prev=6,e.next=9,t.ads.showInterstitialAdAsync();case 9:e.next=13;break;case 11:e.prev=11,e.t0=e.catch(6);case 13:t.ads.setAdInProcess(!1),GameSDK.isAudioEnabled()&&(t.audio.unmuteAll(),t.audio.resumeAllSounds(),t.audio.playMusic()),t.ads.preloadInterstitialAdAsync().catch((function(){}));case 16:case"end":return e.stop()}}),e,this,[[6,11]])})));return function(){return e.apply(this,arguments)}}(),n.showRewardVideo=function(){var e=(0,s.Z)(u().mark((function e(){var t,n,i,a,s;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.scene.game,n=t.globalScene,i=t.audio,a=t.ads,s=t.analytics,e.prev=1,n.screen.open(cs.o4.NOTIFY_SCREEN,{message:"loadingAds",duration:0,loading:!0}),a.setAdInProcess(!0),i.pauseAllSounds(),i.pauseMusic(),i.muteAll(),e.next=9,new(c())((function(e,t){a.getAdStatus(GameCore.Ads.Types.REWARDED)===GameCore.Ads.Status.LOADING?a.events.once(GameCore.Ads.Events.LOADED,e):a.preloadRewardedVideoAsync().then(e).catch(t)}));case 9:return e.next=11,a.showRewardedVideoAsync();case 11:return s.showRewardedVideoAd(this.scene.getSceneName()),a.preloadRewardedVideoAsync().catch((function(e){})),n.screen.events.off(GameCore.Screens.Events.CLOSE),n.screen.close(cs.o4.NOTIFY_SCREEN),e.abrupt("return",!0);case 18:if(e.prev=18,e.t0=e.catch(1),!(e.t0 instanceof Object&&GameCore.Utils.Object.hasOwn(e.t0,"code"))){e.next=24;break}if("USER_INPUT"!==e.t0.code){e.next=24;break}return this.showNotifySkipAds(),e.abrupt("return",!1);case 24:return this.showNotifyNoAds(),e.abrupt("return",!1);case 26:return e.prev=26,a.setAdInProcess(!1),GameSDK.isAudioEnabled()&&(i.unmuteAll(),i.resumeAllSounds(),i.playMusic()),e.finish(26);case 30:case"end":return e.stop()}}),e,this,[[1,18,26,30]])})));return function(){return e.apply(this,arguments)}}(),n.createConfetti=function(){var e,t,n=this.scene.gameZone.height,i=new Phaser.Geom.Rectangle(-187.5,-n/2-100,375,50),a=Be()(e=Ut()(t=Array(32)).call(t,0)).call(e,(function(e,t){return"confetti/papers/Layer "+(t+1)}));this.confettiSmallFallDown=new us.Z(this.scene,{rotate:{start:-720,end:0},lifespan:{min:1500,max:2e3},emitZone:{source:i,type:"random"},particleBringToTop:!0,frame:a,tint:void 0})},t}(Phaser.Events.EventEmitter),Hl=Yl,Kl={FOOTER:13,TITLE:26,TAB_SELECTOR_LABEL:14,TOURNAMENT_BLOCK:{TITLE:20,JOIN_LABEL:16,LOW_TO_WIN:12}},jl=An.Z.GAMEPLAY_DEFAULT,Vl=jl.KEY,Jl=jl.FRAME,Xl=GameCore.Configs.Gameplay.ItemCount,ql=function(e){function t(t,n,i){var a;return(a=e.call(this,t,n,i)||this).subIcon=void 0,a.countItemText=void 0,a.countItem=0,a.createItemCountContent(),a}(0,r.Z)(t,e);var n=t.prototype;return n.createItemCountContent=function(){this.subIcon=this.scene.make.image({key:Vl,frame:Jl.COUNTER}),this.subIcon.setWorldSize(17.5,17.5),this.countItemText=this.scene.add.bitmapText(0,0,gc.Z.PRIMARY.KEY,"0",this.scene.fontSize(13)),this.countItemText.setTint(274714),Phaser.Display.Align.In.TopCenter(this.subIcon,this,10,12),Phaser.Display.Align.In.Center(this.countItemText,this.subIcon)},n.addItemCountContent=function(){Xl.Enable&&this.add([this.subIcon,this.countItemText])},n.updateCountItem=function(e){0==e?(this.subIcon.setFrame(Jl.IC_ADS),this.subIcon.setWorldSize(15.5,13),this.countItemText.setVisible(!1)):(this.subIcon.setFrame(Jl.COUNTER),this.subIcon.setWorldSize(17.5,17.5),this.countItemText.setVisible(!0),this.countItemText.setText(e.toString()),Phaser.Display.Align.In.Center(this.countItemText,this.subIcon))},n.resetCountItem=function(e){this.countItem=e,this.updateCountItem(e)},n.decreaseCountItem=function(){0!==this.countItem&&(this.countItem-=1,this.updateCountItem(this.countItem))},n.getCountItem=function(){return this.countItem},t}(Nh.Z),Ql=ql,$l={WIDTH:375,HEIGHT:72,HIT_ZONE_BUTTON:{WIDTH:75,HEIGHT:50}},ed=function(e){return e.VERTICAL="vertical",e.HORIZONTAL="horizontal",e}({}),td=function(e){function t(t,n){var i;return(i=e.call(this,t)||this).config=void 0,i.setSize(n.width,n.height),i.config=n,i.createImage(),i.scene.add.existing((0,$a.Z)(i)),i}return(0,r.Z)(t,e),t.prototype.createImage=function(){var e=this.config,t=e.key,n=e.frame,i=e.symmetricType,a=void 0===i?ed.HORIZONTAL:i,s=e.width,r=e.height,o=this.scene.add.image(0,0,t,n),c=this.scene.add.image(0,0,t,n);this.add([o,c]),a==ed.HORIZONTAL?(o.setOrigin(1,.5),o.setWorldSize(s/2,r),c.setOrigin(0,.5).setFlipX(!0),c.setWorldSize(s/2,r)):a==ed.VERTICAL&&(o.setOrigin(.5,1),o.setWorldSize(s,r/2),c.setOrigin(.5,0).setFlipY(!0),c.setWorldSize(s,r/2))},t}(Phaser.GameObjects.Container),nd=GameCore.Configs.Gameplay.ItemCount,id=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n.settingsBtn=void 0,n.themeBtn=void 0,n.tournamentsButton=void 0,n.statisticsButton=void 0,n.playBtn=void 0,n.hintBtn=void 0,n.undoBtn=void 0,n.journeyButton=void 0,n.handleHint=(0,s.Z)(u().mark((function e(){var t,i;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(nd.Enable){e.next=3;break}return n.showHint(),e.abrupt("return");case 3:if(0!==n.hintBtn.getCountItem()){e.next=7;break}return n.claimHint(),e.abrupt("return");case 7:n.showHint(),n.hintBtn.decreaseCountItem(),t=n.hintBtn.getCountItem(),i=n.scene.player.getCountItems(),n.updatePlayerCountItems(i.undoCount,t,i.lastTimeUpdate);case 12:case"end":return e.stop()}}),e)}))),n.handleUndo=function(){if(nd.Enable){var e=n.scene.gameplay.boardGame.mover;if(0!==n.undoBtn.getCountItem()){if(e.isCanUndo()){n.undoBtn.decreaseCountItem();var t=n.undoBtn.getCountItem(),i=n.scene.player.getCountItems();n.updatePlayerCountItems(t,i.hintCount,i.lastTimeUpdate),n.undo()}}else n.claimUndo()}else n.undo()},n.updateCountItems=(0,s.Z)(u().mark((function e(){var t,i,a;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(nd.Enable){e.next=2;break}return e.abrupt("return");case 2:if((t=n.scene.player.getCountItems())&&(!t||(0,ls.Gm)(t.lastTimeUpdate))&&!GameCore.Configs.Gameplay.ItemCount.ForceResetDaily){e.next=7;break}return e.next=6,n.resetCountItems();case 6:return e.abrupt("return");case 7:i=t.undoCount,a=t.hintCount,n.undoBtn.resetCountItem(i),n.hintBtn.resetCountItem(a);case 11:case"end":return e.stop()}}),e)}))),n.resetCountItems=(0,s.Z)(u().mark((function e(){var t,i;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=GameCore.Configs.Gameplay.ItemCount.UndoCount,i=GameCore.Configs.Gameplay.ItemCount.HintCount,n.undoBtn.resetCountItem(t),n.hintBtn.resetCountItem(i),e.next=6,n.updatePlayerCountItems(t,i,(new Date).getTime());case 6:case"end":return e.stop()}}),e)}))),n.scene=t,n.listenEventsBoardChange(),n}(0,r.Z)(t,e);var n=t.prototype;return n.showHint=function(){this.scene.gameplay.boardGame.hint.showHint()},n.claimHint=function(){var e=(0,s.Z)(u().mark((function e(){var t;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.scene.gameplay.boardGame.hint.hintAnimation.canShowHint()){e.next=2;break}return e.abrupt("return",c().resolve());case 2:return e.next=4,this.scene.gameplay.showRewardVideo();case 4:e.sent&&(t=this.scene.player.getCountItems(),this.updatePlayerCountItems(t.undoCount,nd.HintClaim,t.lastTimeUpdate),this.hintBtn.resetCountItem(nd.HintClaim),this.showHint());case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.undo=function(){this.scene.gameplay.boardGame.mover.undo()},n.claimUndo=function(){var e=(0,s.Z)(u().mark((function e(){var t;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.scene.gameplay.showRewardVideo();case 2:e.sent&&(t=this.scene.player.getCountItems(),this.updatePlayerCountItems(nd.UndoClaim,t.hintCount,t.lastTimeUpdate),this.undoBtn.resetCountItem(nd.UndoClaim),this.undo());case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.updatePlayerCountItems=function(){var e=(0,s.Z)(u().mark((function e(t,n,i){var a;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a={undoCount:t,hintCount:n,lastTimeUpdate:i},this.scene.player.setCustomData("countItems",a);case 2:case"end":return e.stop()}}),e,this)})));return function(t,n,i){return e.apply(this,arguments)}}(),n.alignButtons=function(){for(var e=[this.settingsBtn,this.statisticsButton,this.playBtn,this.hintBtn,this.undoBtn],t=this.width/5,n=0;n<e.length;n++)e[n].setX((n-e.length/2+.5)*t),e[n].setY(2)},n.listenEventsBoardChange=function(){var e=this;this.scene.events.on(vo.BOARD_STATE_CHANGED,(function(t){[e.settingsBtn,e.statisticsButton].forEach((function(e){e.setDisabled(t==pu.AUTO_COMPLETING)}))}))},t}(Phaser.GameObjects.Container),ad=id,sd=An.Z.GAMEPLAY_DEFAULT,rd=sd.KEY,od=sd.FRAME,cd=function(e){function t(t){var n;(n=e.call(this,t,75,75)||this).scene=void 0,n.timerText=void 0,n.fadeTween=void 0,n.isFadeOut=!1,n.jumpAttention=void 0,n.isShouldJump=!0,n.forceHide=!1,n.handleJourney=function(){var e=n.scene.gameplay.boardGame.boardState;e!==pu.DEALING&&e!==pu.NONE&&(n.scene.screen.close(cs.o4.PLAY_SCREEN),n.scene.screen.get(cs.o4.JOURNEY_SCREEN)?n.scene.screen.open(cs.o4.JOURNEY_SCREEN):(n.scene.game.globalScene.screen.open(cs.o4.NOTIFY_SCREEN,{message:"loading",duration:0,loading:!0}),n.waitingForJourneyScreenLoaded().then((function(){n.scene.game.globalScene.screen.close(cs.o4.NOTIFY_SCREEN),n.scene.screen.open(cs.o4.JOURNEY_SCREEN)}))))},n.scene=t,n.setName("JourneyIcon"),GameCore.Configs.Gameplay.ForceJourneyMode?n.kill():n.revive();var i=n.scene.add.image(0,0,rd,od.IC_JOURNEY_GLOW);i.setWorldSize(75,75);var a=n.scene.add.image(0,0,rd,od.IC_JOURNEY);a.setWorldSize(45,41.5);var s=n.scene.add.image(0,0,rd,od.JOURNEY_BG);s.setWorldSize(47.5,14.5),s.setPosition(0,23);var r=n.scene.make.bitmapText({x:s.x,y:s.y+2,font:gc.Z.PRIMARY.KEY,size:n.scene.fontSize(11.5),origin:{x:.5,y:.5}}).setTint(13355979);return r.setTranslationParameters({d:"1",h:"1",m:"1",s:"1"}),r.setText("dhms"),r.setMaxSize(40,100,!0),n.timerText=r,n.jumpAttention=new Du(a,{widthExpand:10,heightExpand:12,jumpHeight:25}),n.scene.tweens.addCounter({from:0,to:1,duration:1e4,loop:-1,onLoop:function(){n.isShouldJump&&n.runAnimationAttention()},onUpdate:function(){i.setPosition(a.x,a.y)}}),n.scene.tweens.addCounter({from:0,to:360,duration:5e3,loop:-1,onUpdate:function(e){var t=e.getValue();i.setPosition(a.x,a.y),i.setAngle(t)}}),n.onClick=n.handleJourney,n.add([i,a,s,r]),n.listenEventUpdate(),n}(0,r.Z)(t,e);var n=t.prototype;return n.fadeIn=function(){var e;this.isFadeOut&&(this.isFadeOut=!1,null==(e=this.fadeTween)||e.remove(),this.fadeTween=this.scene.add.tween({targets:this,alpha:1,duration:300*(1-this.alpha),ease:Phaser.Math.Easing.Sine.Out}))},n.fadeOut=function(){var e;this.isFadeOut||(this.isFadeOut=!0,null==(e=this.fadeTween)||e.remove(),this.fadeTween=this.scene.add.tween({targets:this,alpha:0,duration:300*this.alpha,ease:Phaser.Math.Easing.Sine.Out}))},n.updateButton=function(){var e=1e3*this.scene.journey.getTimeEnd()-Date.now(),t=Math.floor(Math.abs(e)/864e5);e-=864e5*t;var n=Math.floor(Math.abs(e)/36e5);e-=36e5*n;var i=Math.floor(Math.abs(e)/6e4);e-=6e4*i;var a=Math.round(e/1e3);e<0&&(e=0,this.scene.journey.updateJourney());for(var s=[t,n,i,a],r=["d","h","m","s"],o="",c=0,h=0;h<r.length&&(0==c&&0==s[h]&&h<3||(c+=1,o+=r[h],this.timerText.setTranslationParameter(r[h],s[h]),!(c>=2)));h++);this.timerText.setText(o);var u=this.scene.gameplay.boardGame,l=this.getWorldPosition(),d=!this.forceHide,p=!0;switch(To.instance.getGameMode()){case Ao.CHALLENGE_FRIENDS:this.setPosition(-150,-130);break;case Ao.JOURNEY:d=!1;break;default:this.setPosition(-150,-80)}this.scene.journey.getCurrentLevel()>this.scene.journey.getLevelCount()&&(d=!1);for(var f=0;f<2;f++){var g=u.piles[f];if(0!=g.cards.length){var m=g.getPlacingPosition();l.y-m.y<50&&(d=!1),l.y-m.y<80&&(p=!1)}}d?this.fadeIn():this.fadeOut(),this.isShouldJump=p},n.listenEventUpdate=function(){var e=this;this.scene.events.on(Phaser.Scenes.Events.UPDATE,(function(){e.updateButton()}))},n.runAnimationAttention=function(){this.jumpAttention.run()},n.waitingForJourneyScreenLoaded=function(){var e=(0,s.Z)(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.scene.screen.get(cs.o4.JOURNEY_SCREEN)){e.next=5;break}return e.next=3,(0,ls.qZ)(100);case 3:e.next=0;break;case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),t}(Nh.Z),hd=cd,ud=An.Z.GAMEPLAY_DEFAULT,ld=ud.KEY,dd=ud.FRAME,pd=-10,fd=$l.WIDTH,gd=$l.HEIGHT,md=$l.HIT_ZONE_BUTTON,vd=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=t,n.listenEvents(),n}(0,r.Z)(t,e);var n=t.prototype;return n.init=function(){this.setSize(fd,gd),this.createBackground(),this.createButtons(),this.scene.add.existing(this),this.updateCountItems()},n.createBackground=function(){var e=new td(this.scene,{width:this.width,height:this.height,key:ld,frame:dd.FOOTER_BG,symmetricType:ed.HORIZONTAL});this.add(e)},n.createButtons=function(){this.createSettingsBtn(),this.createStatisticsButton(),this.createPlayBtn(),this.createHintBtn(),this.createUndoBtn(),this.createJourneyButton();var e=[this.settingsBtn,this.statisticsButton,this.playBtn,this.hintBtn,this.undoBtn,this.journeyButton];this.add(e),this.alignButtons()},n.createSettingsBtn=function(){var e=this;this.settingsBtn=new Nh.Z(this.scene,md.WIDTH,md.HEIGHT),this.settingsBtn.setName("Settings");var t=this.scene.add.image(0,pd,ld,dd.IC_SETTINGS).setTint(16579837);t.setWorldSize(26,26.5);var n=this.scene.add.bitmapText(0,15,gc.Z.PRIMARY.KEY,"settings",this.scene.fontSize(13));n.setTint(12437947).setOrigin(.5),n.setMaxSize(70,20),this.settingsBtn.add([t,n]),this.settingsBtn.onClick=function(){e.scene.screen.open(cs.o4.SETTINGS_SCREEN)}},n.createStatisticsButton=function(){var e=this;this.statisticsButton=new Nh.Z(this.scene,md.WIDTH,md.HEIGHT),this.statisticsButton.setName("Statistics");var t=GameCore.Configs.Gameplay.ForceJourneyMode?{frame:dd.IC_THEME_2,text:"theme",w:80/2.88,h:79/2.88}:{frame:dd.IC_STATISTICS_FOOTER,text:"statistics",w:26,h:26.5},n=this.scene.add.image(0,pd,ld,t.frame).setTint(16579837);n.setWorldSize(t.w,t.h);var i=this.scene.add.bitmapText(0,15,gc.Z.PRIMARY.KEY,t.text,this.scene.fontSize(13));i.setTint(12437947).setOrigin(.5),i.setMaxSize(70,20),this.statisticsButton.add([n,i]),this.statisticsButton.onClick=function(){GameCore.Configs.Gameplay.ForceJourneyMode?e.scene.screen.open(cs.o4.THEME_SCREEN):e.scene.screen.open(cs.o4.GAME_STATS_SCREEN)}},n.createPlayBtn=function(){var e=this;this.playBtn=new Nh.Z(this.scene,md.WIDTH,md.HEIGHT),this.playBtn.setName("Play");var t=this.scene.add.image(0,pd,ld,dd.IC_PLAY).setTint(16579837);t.setWorldSize(26,26.5);var n=this.scene.add.bitmapText(0,15,gc.Z.PRIMARY.KEY,"new",this.scene.fontSize(13));n.setTint(12437947).setOrigin(.5),n.setMaxSize(55,20),this.playBtn.add([t,n]),this.playBtn.onClick=function(){e.scene.header.playFadeOutChallengeInfoAnimation(),e.scene.screen.open(cs.o4.PLAY_SCREEN)}},n.createHintBtn=function(){this.hintBtn=new Ql(this.scene,md.WIDTH,md.HEIGHT),this.hintBtn.setName("Hint");var e=this.scene.add.image(0,pd,ld,dd.IC_HINT).setTint(16579837);e.setWorldSize(20,27);var t=this.scene.add.bitmapText(0,15,gc.Z.PRIMARY.KEY,"hint",this.scene.fontSize(13));t.setTint(12437947).setOrigin(.5),this.hintBtn.add([e,t]),this.hintBtn.addItemCountContent(),t.setMaxSize(70,20),this.hintBtn.onClick=this.handleHint,this.hintBtn.setDisabled(!0)},n.createUndoBtn=function(){this.undoBtn=new Ql(this.scene,md.WIDTH,md.HEIGHT),this.undoBtn.setName("Undo");var e=this.scene.add.image(0,pd,ld,dd.IC_UNDO).setTint(16579837);e.setWorldSize(31,25.5);var t=this.scene.add.bitmapText(0,15,gc.Z.PRIMARY.KEY,"undo",this.scene.fontSize(13));t.setCenterAlign().setTint(12437947).setOrigin(.5),this.undoBtn.add([e,t]),this.undoBtn.addItemCountContent(),t.setMaxSize(70,25),this.undoBtn.onClick=this.handleUndo},n.createThemeBtn=function(){var e=this;this.themeBtn=new Nh.Z(this.scene,md.WIDTH,md.HEIGHT),this.themeBtn.setName("Theme");var t=this.scene.add.image(0,pd,ld,dd.IC_THEME).setTint(16579837);t.setWorldSize(28,28);var n=this.scene.make.bitmapText({font:gc.Z.PRIMARY.KEY,size:this.scene.fontSize(Kl.FOOTER),text:"Theme",origin:{x:.5,y:.5}}).setTint(13355979);this.themeBtn.add([t,n]),this.themeBtn.onClick=function(){e.scene.screen.open(cs.o4.THEME_SCREEN)}},n.createJourneyButton=function(){this.journeyButton=new hd(this.scene)},n.alignButtons=function(){var e=this.scene.player.getPlayerSettings().leftHanded,t=[this.settingsBtn,this.statisticsButton,this.playBtn,this.hintBtn,this.undoBtn];e&&(t=wu()(t).call(t));for(var n=this.width/5,i=0;i<t.length;i++)t[i].setX((i-t.length/2+.5)*n),t[i].setY(2);this.journeyButton.setPosition(t[0].x+10,t[0].y-100)},n.listenEvents=function(){var e=this;this.scene.events.on("settings-changed",(function(t){"leftHanded"==t&&e.alignButtons()}))},t}(ad),yd=vd,Ad=An.Z.GAMEPLAY_DEFAULT,Ed=Ad.KEY,Td=Ad.FRAME,Cd=function(e){function t(t){var n;(n=e.call(this,t,100,100)||this).timerText=void 0,n.fadeTween=void 0,n.isFadeOut=!1,n.jumpAttention=void 0,n.isShouldJump=!0,n.forceHide=!1,n.handleJourney=function(){var e=n.scene.gameplay.boardGame.boardState;e!==pu.DEALING&&e!==pu.NONE&&(n.scene.screen.close(cs.o4.PLAY_SCREEN),n.scene.screen.get(cs.o4.JOURNEY_SCREEN)?n.scene.screen.open(cs.o4.JOURNEY_SCREEN):(n.scene.game.globalScene.screen.open(cs.o4.NOTIFY_SCREEN,{message:"loading",duration:0,loading:!0}),n.waitingForJourneyScreenLoaded().then((function(){n.scene.game.globalScene.screen.close(cs.o4.NOTIFY_SCREEN),n.scene.screen.open(cs.o4.JOURNEY_SCREEN)}))))},n.scene=t,n.setName("JourneyIcon"),GameCore.Configs.Gameplay.ForceJourneyMode?n.kill():n.revive();var i=n.scene.add.image(0,0,Ed,Td.IC_JOURNEY_GLOW);i.setWorldSize(100,100);var a=n.scene.add.image(0,0,Ed,Td.IC_JOURNEY);a.setWorldSize(59,55);var s=n.scene.add.image(0,0,Ed,Td.JOURNEY_BG);s.setWorldSize(69.5,22),s.setPosition(0,32);var r=n.scene.make.bitmapText({x:s.x,y:s.y+2,font:gc.Z.PRIMARY.KEY,size:n.scene.fontSize(12),origin:{x:.5,y:.5}}).setTint(13355979);return r.setTranslationParameters({d:"1",h:"1",m:"1",s:"1"}),r.setText("dhms"),r.setMaxSize(63,100,!0),n.timerText=r,n.jumpAttention=new Du(a,{widthExpand:10,heightExpand:15,jumpHeight:30}),n.scene.tweens.addCounter({from:0,to:1,duration:1e4,loop:-1,onLoop:function(){n.isShouldJump&&n.runAnimationAttention()},onUpdate:function(){i.setPosition(a.x,a.y)}}),n.scene.tweens.addCounter({from:0,to:360,duration:5e3,loop:-1,onUpdate:function(e){var t=e.getValue();i.setPosition(a.x,a.y),i.setAngle(t)}}),n.onClick=n.handleJourney,n.add([i,a,s,r]),n.listenEventUpdate(),n}(0,r.Z)(t,e);var n=t.prototype;return n.fadeIn=function(){var e;this.isFadeOut&&(this.isFadeOut=!1,null==(e=this.fadeTween)||e.remove(),this.fadeTween=this.scene.add.tween({targets:this,alpha:1,duration:300*(1-this.alpha),ease:Phaser.Math.Easing.Sine.Out}))},n.fadeOut=function(){var e;this.isFadeOut||(this.isFadeOut=!0,null==(e=this.fadeTween)||e.remove(),this.fadeTween=this.scene.add.tween({targets:this,alpha:0,duration:300*this.alpha,ease:Phaser.Math.Easing.Sine.Out}))},n.updateButton=function(){var e=1e3*this.scene.journey.getTimeEnd()-Date.now(),t=Math.floor(Math.abs(e)/864e5);e-=864e5*t;var n=Math.floor(Math.abs(e)/36e5);e-=36e5*n;var i=Math.floor(Math.abs(e)/6e4);e-=6e4*i;var a=Math.round(e/1e3);e<0&&(e=0,this.scene.journey.updateJourney());for(var s=[t,n,i,a],r=["d","h","m","s"],o="",c=0,h=0;h<r.length&&(0==c&&0==s[h]||(c+=1,o+=r[h],this.timerText.setTranslationParameter(r[h],s[h]),!(c>=3)));h++);this.timerText.setText(o);var u=this.scene.gameplay.boardGame,l=this.getWorldPosition(),d=!this.forceHide,p=!0;if(To.instance.getGameMode()===Ao.JOURNEY)d=!1;else this.setPosition(-255,-15);this.scene.journey.getCurrentLevel()>this.scene.journey.getLevelCount()&&(d=!1);for(var f=0;f<1;f++){var g=u.piles[f];if(0!=g.cards.length){var m=g.getPlacingPosition();l.y-m.y<60&&(d=!1),l.y-m.y<90&&(p=!1)}}d?this.fadeIn():this.fadeOut(),this.isShouldJump=p},n.listenEventUpdate=function(){var e=this;this.scene.events.on(Phaser.Scenes.Events.UPDATE,(function(){e.updateButton()}))},n.runAnimationAttention=function(){this.jumpAttention.run()},n.waitingForJourneyScreenLoaded=function(){var e=(0,s.Z)(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.scene.screen.get(cs.o4.JOURNEY_SCREEN)){e.next=5;break}return e.next=3,(0,ls.qZ)(100);case 3:e.next=0;break;case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),t}(Nh.Z),Sd=Cd,bd=An.Z.GAMEPLAY_DEFAULT_LANDSCAPE,Id=bd.KEY,wd=bd.FRAME,_d=-10,xd=12,Pd=70,kd=50,Od=function(e){function t(t){return e.call(this,t)||this}(0,r.Z)(t,e);var n=t.prototype;return n.init=function(){this.setSize(413,56),this.createBackground(),this.createButtons(),this.scene.add.existing(this),this.updateCountItems()},n.createBackground=function(){var e=new td(this.scene,{width:this.width,height:this.height,key:Id,frame:wd.FOOTER_BG,symmetricType:ed.HORIZONTAL});this.add(e)},n.createButtons=function(){this.createSettingsBtn(),this.createStatisticsButton(),this.createPlayBtn(),this.createHintBtn(),this.createUndoBtn(),this.createJourneyButton();var e=[this.settingsBtn,this.statisticsButton,this.playBtn,this.hintBtn,this.undoBtn,this.journeyButton];this.add(e),this.alignButtons()},n.createSettingsBtn=function(){var e=this;this.settingsBtn=new Nh.Z(this.scene,Pd,this.height),this.settingsBtn.setName("Settings");var t=this.scene.add.image(0,_d,Id,wd.IC_SETTINGS).setTint(16579837);t.setWorldSize(23.5,24);var n=this.scene.add.bitmapText(0,xd,gc.Z.PRIMARY.KEY,"settings",this.scene.fontSize(xd));n.setMaxSize(75,20,!0),n.setTint(12437947).setOrigin(.5),this.settingsBtn.add([t,n]),this.settingsBtn.onClick=function(){e.scene.screen.open(cs.o4.SETTINGS_SCREEN)}},n.createStatisticsButton=function(){var e=this;this.statisticsButton=new Nh.Z(this.scene,Pd,kd),this.statisticsButton.setName("Statistics");var t=GameCore.Configs.Gameplay.ForceJourneyMode?{frame:wd.IC_THEME_2,text:"theme",w:25,h:24.5}:{frame:wd.IC_STATISTICS_FOOTER,text:"statistics",w:23,h:24},n=this.scene.add.image(0,_d,Id,t.frame).setTint(16579837);n.setWorldSize(t.w,t.h);var i=this.scene.add.bitmapText(0,xd,gc.Z.PRIMARY.KEY,t.text,this.scene.fontSize(xd));i.setMaxSize(75,20,!0),i.setTint(12437947).setOrigin(.5),this.statisticsButton.add([n,i]),this.statisticsButton.onClick=function(){GameCore.Configs.Gameplay.ForceJourneyMode?e.scene.screen.open(cs.o4.THEME_SCREEN):e.scene.screen.open(cs.o4.GAME_STATS_SCREEN)}},n.createPlayBtn=function(){var e=this;this.playBtn=new Nh.Z(this.scene,Pd,kd),this.playBtn.setName("Play");var t=this.scene.add.image(0,_d,Id,wd.IC_PLAY).setTint(16579837);t.setWorldSize(23.5,24);var n=this.scene.add.bitmapText(0,xd,gc.Z.PRIMARY.KEY,"new",this.scene.fontSize(xd));n.setMaxSize(75,20,!0),n.setTint(12437947).setOrigin(.5),this.playBtn.add([t,n]),this.playBtn.onClick=function(){e.scene.header.playFadeOutChallengeInfoAnimation(),e.scene.screen.open(cs.o4.PLAY_SCREEN)}},n.createHintBtn=function(){this.hintBtn=new Ql(this.scene,Pd,kd),this.hintBtn.setName("Hint");var e=this.scene.add.image(0,_d,Id,wd.IC_HINT).setTint(16579837);e.setWorldSize(18.5,24.5);var t=this.scene.add.bitmapText(0,xd,gc.Z.PRIMARY.KEY,"hint",this.scene.fontSize(xd));t.setMaxSize(75,20,!0),t.setTint(12437947).setOrigin(.5),this.hintBtn.add([e,t]),this.hintBtn.addItemCountContent(),this.hintBtn.onClick=this.handleHint,this.hintBtn.setDisabled(!0)},n.createUndoBtn=function(){this.undoBtn=new Ql(this.scene,Pd,kd),this.undoBtn.setName("Undo");var e=this.scene.add.image(0,_d,Id,wd.IC_UNDO).setTint(16579837);e.setWorldSize(28,23.5);var t=this.scene.add.bitmapText(0,xd,gc.Z.PRIMARY.KEY,"undo",this.scene.fontSize(xd));t.setCenterAlign(),t.setMaxSize(75,20,!1),t.setTint(12437947).setOrigin(.5),this.undoBtn.add([e,t]),this.undoBtn.addItemCountContent(),this.undoBtn.onClick=this.handleUndo},n.createJourneyButton=function(){this.journeyButton=new Sd(this.scene)},n.createThemeBtn=function(){var e=this;this.themeBtn=new Nh.Z(this.scene,Pd,kd),this.themeBtn.setName("Theme");var t=this.scene.add.image(0,_d,Id,wd.IC_THEME).setTint(16579837);t.setWorldSize(28,28);var n=this.scene.make.bitmapText({font:gc.Z.PRIMARY.KEY,size:this.scene.fontSize(Kl.FOOTER),text:"theme",origin:{x:.5,y:.5}}).setTint(13355979);this.themeBtn.add([t,n]),this.themeBtn.onClick=function(){e.scene.screen.open(cs.o4.THEME_SCREEN)}},t}(ad),Ld=Od,Rd=GameCore.world.isLandscape()?Ld:yd,Bd="...",Dd=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n.avatar=void 0,n.scoreText=void 0,n.nameText=void 0,n.timeText=void 0,n.moveText=void 0,n.background=void 0,n.scene=t,n.createBackground(),n.createAvatar(),n.createText(),n.timeText.kill(),n.moveText.kill(),n.timeText.setIgnoreLanguage(),n.scoreText.setIgnoreLanguage(),n.moveText.setIgnoreLanguage(),n}(0,r.Z)(t,e);var n=t.prototype;return n.setAvatarFrame=function(e){this.avatar&&this.avatar.avtFrame&&this.avatar.avtFrame.setFrame(e)},n.updateData=function(e,t,n){this.scoreText.setText(""+(null!=e?e:Bd)),this.timeText.setText(t?(0,ls.F0)(t,!1):Bd),this.moveText.setText(""+(null!=n?n:Bd))},t}(Phaser.GameObjects.Container),Nd=Dd,Md=An.Z.GAMEPLAY_DEFAULT,Gd=Md.KEY,Zd=Md.FRAME,Fd=function(e){function t(t){var n;return(n=e.call(this,t)||this).setSize(124,40),n}(0,r.Z)(t,e);var n=t.prototype;return n.alignLeft=function(){this.nameText.setOrigin(1,.5),Phaser.Display.Align.In.RightCenter(this.avatar,this.background,15),Phaser.Display.Align.In.LeftCenter(this.scoreText,this.background,-5,1),Phaser.Display.Align.To.LeftCenter(this.nameText,this.avatar,2),this.nameText.setAlign("left"),this.scoreText.setLeftAlign(),this.scoreText.setOrigin(0,.5)},n.alignRight=function(){this.nameText.setOrigin(0,.5),Phaser.Display.Align.In.LeftCenter(this.avatar,this.background,15),Phaser.Display.Align.In.RightCenter(this.scoreText,this.background,-5,1),Phaser.Display.Align.To.RightCenter(this.nameText,this.avatar,2),this.nameText.setAlign("right"),this.scoreText.setRightAlign(),this.scoreText.setOrigin(1,.5)},n.createBackground=function(){var e=this.scene.add.image(0,0,Gd,Zd.AVATAR.RECTANGLE);e.setWorldSize(139,24),this.add(e),this.background=e},n.createAvatar=function(){this.avatar=new vc(this.scene,{width:34,height:34,key:Gd,background:Zd.AVATAR.BG,frame:Zd.AVATAR.BLUE}),this.avatar.loadPhoto(xa.Z.AVATAR.KEY,xa.Z.AVATAR.FILE,75),this.add(this.avatar)},n.createText=function(){var e=this.scene.make.bitmapText({font:gc.Z.PRIMARY.KEY,size:this.scene.fontSize(14),text:"0",origin:{x:.5,y:.5},y:0,x:6});this.add(e);var t=this.scene.add.text(0,0,"name",{color:"#c1ccc0",fontFamily:gc.Z.FONT_FAMILY});t.setFontSize(this.scene.fontSize(13)),t.setHighQuality(),t.setOrigin(.5),t.setIgnoreLanguage(),this.add(t);var n=this.scene.make.bitmapText({font:gc.Z.PRIMARY.KEY,size:this.scene.fontSize(14),text:"00:00",origin:{x:.5,y:.5},y:0,x:6});e.setCenterAlign(),this.add(n);var i=this.scene.make.bitmapText({font:gc.Z.PRIMARY.KEY,size:this.scene.fontSize(14),text:"0",origin:{x:0,y:.5},y:18,x:6});this.add(i),this.scoreText=e,this.timeText=n,this.moveText=i,this.nameText=t},t}(Nd),Ud=Fd,zd=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n.leftBlock=void 0,n.rightBlock=void 0,n.scene=t,n}return(0,r.Z)(t,e),t}(Phaser.GameObjects.Container),Wd=zd,Yd=100,Hd=An.Z.GAMEPLAY_DEFAULT,Kd=Hd.KEY,jd=Hd.FRAME,Vd=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n.scene=t,n.setSize(375,62),n.createBlocks(),n.createVSText(),n}(0,r.Z)(t,e);var n=t.prototype;return n.createBlocks=function(){this.leftBlock=new Ud(this.scene),this.leftBlock.alignRight(),this.leftBlock.setAvatarFrame(jd.AVATAR.BLUE),this.rightBlock=new Ud(this.scene),this.rightBlock.alignLeft(),this.rightBlock.setAvatarFrame(jd.AVATAR.ORANGE),this.leftBlock.setX(-100),this.rightBlock.setX(Yd),this.add([this.leftBlock,this.rightBlock])},n.createVSText=function(){var e=this.scene.add.image(0,0,Kd,jd.IC_VERSUS);e.setWorldSize(50.5,17.5),this.add(e),Phaser.Display.Align.In.Center(e,this)},n.alignChildren=function(){this.leftBlock.setX(-100),this.rightBlock.setX(Yd)},t}(Wd),Jd=Vd,Xd=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n.tournamentTitle=void 0,n.background=void 0,n.scene=t,n.createBackground(),n.createTitle(),n}return(0,r.Z)(t,e),t}(Phaser.GameObjects.Container),qd=An.Z.GAMEPLAY_DEFAULT,Qd=qd.KEY,$d=qd.FRAME,ep=function(e){function t(t){return e.call(this,t)||this}(0,r.Z)(t,e);var n=t.prototype;return n.createBackground=function(){this.background=this.scene.add.image(0,0,Qd,$d.TOURNAMENT.BG_INFO),this.background.setWorldSize(375,88/2.88),this.add(this.background),this.setSize(this.background.width,this.background.height)},n.createTitle=function(){this.tournamentTitle=this.scene.make.bitmapText({font:gc.Z.PRIMARY.KEY,size:this.scene.fontSize(16),text:"Tournament",origin:{x:.5,y:.5},y:-15}),this.tournamentTitle.setIgnoreLanguage(),this.add(this.tournamentTitle),Phaser.Display.Align.In.Center(this.tournamentTitle,this,0,1)},t}(Xd),tp=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n.statBlock=void 0,n.titleBlock=void 0,n.scene=t,n.init(),n}(0,r.Z)(t,e);var n=t.prototype;return n.createContent=function(){this.createTitle(),this.createStat()},n.setTitle=function(e){this.titleBlock.tournamentTitle.setText(e).setGradientVerticalTint([{at:0,color:15718001},{at:1,color:16646084}])},t}(Phaser.GameObjects.Container),np=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n.movesBlock=void 0,n.timeBlock=void 0,n.scoreBlock=void 0,n.scene=t,n.createContent(),n}return(0,r.Z)(t,e),t.prototype.createContent=function(){this.createScore(),this.createTime(),this.createMoves()},t}(Phaser.GameObjects.Container),ip=np,ap=function(e){function t(t){var n;return(n=e.call(this,t)||this).text=void 0,n.createText(),n.setTintComponents(),n}(0,r.Z)(t,e);var n=t.prototype;return n.setTintComponents=function(){this.text.setTint(14014166)},n.setValue=function(e){this.text.setTranslationParameters(e)},t}(Phaser.GameObjects.Container),sp=function(e){function t(t){return e.call(this,t)||this}return(0,r.Z)(t,e),t.prototype.createText=function(){this.text=this.scene.make.bitmapText({font:gc.Z.PRIMARY.KEY,size:this.scene.fontSize(16),origin:{x:1,y:.5}}),this.text.setTranslationParameter("moves","10"),this.text.setText("headerMoves"),this.text.setMaxSize(95,15),this.add(this.text)},t}(ap),rp=function(e){function t(t){return e.call(this,t)||this}(0,r.Z)(t,e);var n=t.prototype;return n.createText=function(){this.text=this.scene.make.bitmapText({font:gc.Z.PRIMARY.KEY,size:this.scene.fontSize(16),origin:{x:0,y:.5}}),this.text.setTranslationParameter("score","10"),this.text.setText("headerScore"),this.text.setMaxSize(95,15),this.add(this.text)},n.alignComponents=function(){Phaser.Display.Align.To.RightCenter(this.text,this)},t}(ap),op=function(e){function t(t){return e.call(this,t)||this}return(0,r.Z)(t,e),t.prototype.createText=function(){this.text=this.scene.make.bitmapText({font:gc.Z.PRIMARY.KEY,size:this.scene.fontSize(16),origin:{x:.5,y:.5}}),this.text.setTranslationParameter("time","10"),this.text.setText("headerTime"),this.text.setMaxSize(110,15),this.add(this.text)},t}(ap),cp=function(e){function t(t){var n;return(n=e.call(this,t)||this).setSize(375,62),n}(0,r.Z)(t,e);var n=t.prototype;return n.createMoves=function(){this.movesBlock=new sp(this.scene),this.add(this.movesBlock)},n.createTime=function(){this.timeBlock=new op(this.scene),this.add(this.timeBlock)},n.createScore=function(){this.scoreBlock=new rp(this.scene),this.add(this.scoreBlock)},n.alignChildren=function(){var e=this.scene.gameplay.boardGame.getHorizontalPileSpace();this.movesBlock.setX(3.4*e-this.movesBlock.width/2),this.scoreBlock.setX(3.4*-e+this.scoreBlock.width/2)},t}(ip),hp=cp,up=function(e){function t(t){return e.call(this,t)||this}(0,r.Z)(t,e);var n=t.prototype;return n.init=function(){this.createContent(),this.setSize(375,this.titleBlock.height+this.statBlock.height),this.alignChildren()},n.createTitle=function(){this.titleBlock=new ep(this.scene),this.add(this.titleBlock)},n.createStat=function(){this.statBlock=new hp(this.scene),this.add(this.statBlock)},n.alignChildren=function(){Phaser.Display.Align.In.TopCenter(this.titleBlock,this),Phaser.Display.Align.In.BottomCenter(this.statBlock,this,0,-15)},t}(tp),lp=16646084,dp=15718001,pp=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n.background=void 0,n.missionDescriptionWithLimit=void 0,n.missionDescriptionWithoutLimit=void 0,n.verticalLine=void 0,n.missionLimit=void 0,n.isEnablingLimit=!0,n.scene=t,n.createBackground(),n.createMissionDescriptionWithLimit(),n.createMissionDescriptionWithoutLimit(),n.createVerticalLine(),n.createMissionLimit(),n.alignComponents(),n.enableLimit(!0),n}(0,r.Z)(t,e);var n=t.prototype;return n.updateInfo=function(){var e=this.scene.journeyLevelMechanicManager,t=e.getMissionDescription(),n=e.getMissionLimit();t&&this.setDescription(t),n?(this.setLimit(n),this.enableLimit(!0)):this.enableLimit(!1)},n.enableLimit=function(e){this.isEnablingLimit=e,this.missionLimit.setVisible(e),this.verticalLine.setVisible(e),this.missionDescriptionWithLimit.setVisible(e),this.missionDescriptionWithoutLimit.setVisible(!e)},n.getIsEnablingLimit=function(){return this.isEnablingLimit},n.setDescription=function(e){var t=this,n=e.key,i=e.interpolations;this.missionDescriptionWithLimit.setText(n),this.missionDescriptionWithoutLimit.setText(n),this.missionDescriptionWithLimit.setTranslationParameters((0,a.Z)({},i)),this.missionDescriptionWithoutLimit.setTranslationParameters((0,a.Z)({},i));var s=function(){t.missionDescriptionWithLimit.setGradientVerticalTint([{at:0,color:dp},{at:1,color:lp}]),t.missionDescriptionWithoutLimit.setGradientVerticalTint([{at:0,color:dp},{at:1,color:lp}])};s(),this.missionDescriptionWithLimit.on("textChanged",(function(){s()})),this.missionDescriptionWithoutLimit.on("textChanged",(function(){s()}))},n.getDescription=function(){return this.missionDescriptionWithLimit.text},n.getLimit=function(){return this.missionLimit.text},t}(Phaser.GameObjects.Container),fp=An.Z.JOURNEY,gp=fp.KEY,mp=fp.FRAME,vp=16646084,yp=15718001,Ap=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=t,n}(0,r.Z)(t,e);var n=t.prototype;return n.setLimit=function(e){var t=e.key,n=e.interpolations,i=void 0===n?{}:n;this.missionLimit.setText(t),this.missionLimit.setTranslationParameters((0,a.Z)({ws:"\n"},i)),this.missionLimit.setGradientVerticalTint([{at:0,color:yp},{at:1,color:vp}])},n.createBackground=function(){this.background=this.scene.add.image(0,0,gp,mp.MISSION_BAR.BACKGROUND),this.background.setWorldSize(375,52),this.add(this.background),this.setSize(this.background.width,this.background.height)},n.createMissionDescriptionWithLimit=function(){this.missionDescriptionWithLimit=this.scene.make.bitmapText({font:gc.Z.PRIMARY.KEY,size:this.scene.fontSize(15),text:"moveOneCard",origin:{x:0,y:.5}}).setGradientVerticalTint([{at:0,color:yp},{at:1,color:vp}]),this.missionDescriptionWithLimit.setMaxSize(209,50),this.add(this.missionDescriptionWithLimit)},n.createMissionDescriptionWithoutLimit=function(){this.missionDescriptionWithoutLimit=this.scene.make.bitmapText({font:gc.Z.PRIMARY.KEY,size:this.scene.fontSize(15),text:"moveOneCard",origin:{x:.5,y:.5}}).setCenterAlign().setGradientVerticalTint([{at:0,color:yp},{at:1,color:vp}]),this.missionDescriptionWithoutLimit.setMaxSize(260,50),this.add(this.missionDescriptionWithoutLimit)},n.createVerticalLine=function(){this.verticalLine=this.scene.add.image(0,0,gp,mp.MISSION_BAR.LINE),this.verticalLine.setWorldSize(2,40),this.add(this.verticalLine)},n.createMissionLimit=function(){this.missionLimit=this.scene.make.bitmapText({font:gc.Z.PRIMARY.KEY,size:this.scene.fontSize(15),origin:{x:.5,y:.5}}).setCenterAlign().setGradientVerticalTint([{at:0,color:yp},{at:1,color:vp}]),this.missionLimit.setMaxSize(100,50),this.missionLimit.setTranslationParameters({ws:"\n",moves:"2/192"}),this.missionLimit.setText("journeyLimitMoves"),this.add(this.missionLimit)},n.alignComponents=function(){var e=this;Phaser.Display.Align.In.LeftCenter(this.missionDescriptionWithLimit,this,-18),Phaser.Display.Align.In.Center(this.missionDescriptionWithoutLimit,this),Phaser.Display.Align.In.RightCenter(this.verticalLine,this,-125);e.missionLimit.setPosition(e.verticalLine.x+60,e.verticalLine.y)},t}(pp),Ep=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n.singleInfo=void 0,n.challengeInfo=void 0,n.tournamentInfo=void 0,n.journeyInfo=void 0,n.fadeInChallengeInfoTween=void 0,n.fadeOutChallengeInfoTween=void 0,n.scene=t,n.init(),n.scene.add.existing((0,$a.Z)(n)),n}(0,r.Z)(t,e);var n=t.prototype;return n.getAllHeaderInfos=function(){return this.journeyInfo?[this.singleInfo,this.challengeInfo,this.tournamentInfo,this.journeyInfo]:[this.singleInfo,this.challengeInfo,this.tournamentInfo]},n.getInfoContainersWithout=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var i=this.getAllHeaderInfos();return Le()(i).call(i,(function(e){return!be()(t).call(t,e)}))},n.playFadeInChallengeInfoAnimation=function(e){var t;void 0===e&&(e=300),To.instance.getGameMode()===Ao.CHALLENGE_FRIENDS&&(this.challengeInfo.setAlpha(0),null==(t=this.fadeInChallengeInfoTween)||t.remove(),this.fadeInChallengeInfoTween=this.scene.tweens.add({targets:this.challengeInfo,alpha:{from:0,to:1},duration:e,ease:Phaser.Math.Easing.Sine.Out}))},n.playFadeOutChallengeInfoAnimation=function(e){var t;void 0===e&&(e=300),To.instance.getGameMode()===Ao.CHALLENGE_FRIENDS&&(null==(t=this.fadeOutChallengeInfoTween)||t.remove(),this.fadeOutChallengeInfoTween=this.scene.tweens.add({targets:this.challengeInfo,alpha:{from:1,to:0},duration:e,ease:Phaser.Math.Easing.Sine.Out}))},n.update=function(){var e=this.scene.gameplay.boardGame,t=e.getScore(),n=e.getTime(),i=e.getMoves(),a=""+t,s=(0,ls.F0)(n,!1),r=""+i,o=this.scene.journeyLevelMechanicManager;switch(To.instance.getGameMode()){case Ao.SINGLE:var c=this.singleInfo,h=c.scoreBlock,u=c.timeBlock,l=c.movesBlock;h.setValue({score:a}),u.setValue({time:s}),l.setValue({moves:r});break;case Ao.CHALLENGE_FRIENDS:var d=this.challengeInfo.rightBlock;d.scoreText.setText(a),d.timeText.setText(s),d.moveText.setText(r);var p=this.singleInfo,f=p.scoreBlock,g=p.timeBlock,m=p.movesBlock;f.setValue({score:a}),g.setValue({time:s}),m.setValue({moves:r});break;case Ao.TOURNAMENT:var v=this.tournamentInfo.statBlock,y=v.movesBlock,A=v.timeBlock;v.scoreBlock.setValue({score:a}),A.setValue({time:s}),y.setValue({moves:r});break;case Ao.JOURNEY:if(e.isGameOver())return;if(!this.journeyInfo)return;var E=o.getMissionLimit();E?(this.journeyInfo.setLimit(E),this.journeyInfo.enableLimit(!0)):this.journeyInfo.enableLimit(!1),e.isPlaying()&&this.checkJourneyWinOrLose()}},n.checkJourneyWinOrLose=function(){var e=this.scene.journeyLevelMechanicManager;e.isWithinLimit()?this.scene.gameplay.boardGame.isGameOver()||e.isMissionCompleted()&&this.scene.gameplay.boardGame.handleGameWon():this.scene.gameplay.boardGame.outOfMove()},n.alignChildren=function(){this.singleInfo.alignChildren(),this.challengeInfo.alignChildren(),this.tournamentInfo.statBlock.alignChildren()},t}(Phaser.GameObjects.Container),Tp=Ep,Cp=function(e){function t(t){return e.call(this,t)||this}(0,r.Z)(t,e);var n=t.prototype;return n.init=function(){this.setSize(375,62),this.createChallengeInfo(),this.createSingleInfo(),this.createTournamentInfo()},n.useChallengeInfo=function(){var e=this.getInfoContainersWithout(this.challengeInfo,this.singleInfo);this.challengeInfo.revive(),this.singleInfo.revive(),this.challengeInfo.setY(this.getChallengeFriendBlockY()),this.playFadeInChallengeInfoAnimation(),Bh(45),this.scene.gameplay.boardGame.alignBoard(),this.scene.tweens.add({targets:this.singleInfo,y:{from:-200,to:-10},duration:500,ease:Phaser.Math.Easing.Sine.Out}),this.scene.tweens.add({targets:e,y:{from:0,to:-200},duration:500,ease:Phaser.Math.Easing.Sine.In,onComplete:function(){return e.forEach((function(e){return e.kill()}))}})},n.getChallengeFriendBlockY=function(){var e=this.scene.footer;return e.y-e.displayHeight-30},n.useSingleInfo=function(){var e=this,t=this.getInfoContainersWithout(this.singleInfo);t.forEach((function(e){return e.kill()})),this.singleInfo.revive(),this.scene.tweens.add({targets:this.singleInfo,y:{from:-200,to:-10},duration:500,ease:Phaser.Math.Easing.Sine.Out,onStart:function(){Bh(45),e.scene.gameplay.boardGame.alignBoard()}}),this.scene.tweens.add({targets:t,y:{from:0,to:-200},duration:500,ease:Phaser.Math.Easing.Sine.In,onComplete:function(){return t.forEach((function(e){return e.kill()}))}})},n.useTournamentInfo=function(){var e=this,t=this.getInfoContainersWithout(this.tournamentInfo);this.tournamentInfo.revive(),this.scene.tweens.add({targets:this.tournamentInfo,y:{from:-200,to:20},duration:500,ease:Phaser.Math.Easing.Sine.Out,onStart:function(){Bh(70),e.scene.gameplay.boardGame.alignBoard()}}),this.scene.tweens.add({targets:t,y:{from:0,to:-200},duration:500,ease:Phaser.Math.Easing.Sine.In,onComplete:function(){return t.forEach((function(e){return e.kill()}))}})},n.useMissionInfo=function(){var e=this;if(this.journeyInfo){var t=this.getInfoContainersWithout(this.journeyInfo);this.journeyInfo.updateInfo(),this.scene.tweens.add({targets:this.journeyInfo,y:{from:-200,to:6},duration:500,ease:Phaser.Math.Easing.Sine.Out,onStart:function(){var t;null==(t=e.journeyInfo)||t.revive(),Bh(80),e.scene.gameplay.boardGame.alignBoard()}}),this.scene.tweens.add({targets:t,y:{from:0,to:-200},duration:500,ease:Phaser.Math.Easing.Sine.In,onComplete:function(){return t.forEach((function(e){return e.kill()}))}})}},n.createChallengeInfo=function(){var e=new Jd(this.scene);this.challengeInfo=e,this.add(e),this.challengeInfo.kill()},n.createSingleInfo=function(){var e=new hp(this.scene);this.singleInfo=e,this.add(e)},n.createTournamentInfo=function(){var e=new up(this.scene);this.tournamentInfo=e,this.add(e),this.tournamentInfo.kill()},n.createJourneyInfo=function(){this.journeyInfo=new Ap(this.scene),this.add(this.journeyInfo),this.journeyInfo.kill()},t}(Tp),Sp=Cp,bp=An.Z.GAMEPLAY_DEFAULT_LANDSCAPE,Ip=bp.KEY,wp=bp.FRAME,_p=function(e){function t(t){var n;return(n=e.call(this,t)||this).setSize(124,40),n}(0,r.Z)(t,e);var n=t.prototype;return n.alignLeft=function(){this.nameText.setOrigin(1,.5),Phaser.Display.Align.In.RightCenter(this.avatar,this.background,10),Phaser.Display.Align.In.LeftCenter(this.scoreText,this.background,-5,1),Phaser.Display.Align.To.LeftCenter(this.nameText,this.avatar,2),this.nameText.setAlign("left"),this.scoreText.setLeftAlign(),this.scoreText.setOrigin(0,.5)},n.alignRight=function(){this.nameText.setOrigin(0,.5),Phaser.Display.Align.In.LeftCenter(this.avatar,this.background,10),Phaser.Display.Align.In.RightCenter(this.scoreText,this.background,-5,1),Phaser.Display.Align.To.RightCenter(this.nameText,this.avatar,2),this.nameText.setAlign("right"),this.scoreText.setRightAlign(),this.scoreText.setOrigin(1,.5)},n.createBackground=function(){var e=this.scene.add.image(0,0,Ip,wp.AVATAR.RECTANGLE);e.setWorldSize(140,22.5),this.add(e),this.background=e},n.createAvatar=function(){this.avatar=new vc(this.scene,{width:30.5,height:30.5,key:Ip,background:wp.AVATAR.BG,frame:wp.AVATAR.BLUE}),this.avatar.loadPhoto(xa.Z.AVATAR.KEY,xa.Z.AVATAR.FILE,0),this.add(this.avatar)},n.createText=function(){var e=this.scene.make.bitmapText({font:gc.Z.PRIMARY.KEY,size:this.scene.fontSize(13),text:"0",origin:{x:.5,y:.5},y:0,x:6});this.add(e);var t=this.scene.add.text(0,0,"name",{color:"#c1ccc0",fontFamily:gc.Z.FONT_FAMILY});t.setFontSize(this.scene.fontSize(11)),t.setHighQuality(),t.setOrigin(.5),t.setIgnoreLanguage(),this.add(t);var n=this.scene.make.bitmapText({font:gc.Z.PRIMARY.KEY,size:this.scene.fontSize(11),text:"00:00",origin:{x:.5,y:.5},y:0,x:6});e.setCenterAlign(),this.add(n);var i=this.scene.make.bitmapText({font:gc.Z.PRIMARY.KEY,size:this.scene.fontSize(11),text:"0",origin:{x:0,y:.5},y:18,x:6});this.add(i),this.scoreText=e,this.timeText=n,this.moveText=i,this.nameText=t},t}(Nd),xp=_p,Pp=100,kp=An.Z.GAMEPLAY_DEFAULT_LANDSCAPE,Op=kp.KEY,Lp=kp.FRAME,Rp=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n.scene=t,n.setSize(375,62),n.createBlocks(),n.createVSText(),n}(0,r.Z)(t,e);var n=t.prototype;return n.createBlocks=function(){this.leftBlock=new xp(this.scene),this.leftBlock.alignRight(),this.leftBlock.setAvatarFrame(Lp.AVATAR.BLUE),this.rightBlock=new xp(this.scene),this.rightBlock.alignLeft(),this.rightBlock.setAvatarFrame(Lp.AVATAR.ORANGE),this.leftBlock.setX(-100),this.rightBlock.setX(Pp),this.add([this.leftBlock,this.rightBlock])},n.createVSText=function(){var e=this.scene.add.image(0,0,Op,Lp.AVATAR.VS);e.setWorldSize(47,14.5),this.add(e),Phaser.Display.Align.In.Center(e,this)},n.alignChildren=function(){this.leftBlock.setX(-100),this.rightBlock.setX(Pp)},t}(Wd),Bp=Rp,Dp=An.Z.GAMEPLAY_DEFAULT_LANDSCAPE,Np=Dp.KEY,Mp=Dp.FRAME,Gp=function(e){function t(t){return e.call(this,t)||this}(0,r.Z)(t,e);var n=t.prototype;return n.createBackground=function(){this.background=this.scene.add.image(0,0,Np,Mp.TOURNAMENT.BG_INFO),this.background.setWorldSize(543,25),this.add(this.background),this.setSize(this.background.width,this.background.height)},n.createTitle=function(){this.tournamentTitle=this.scene.make.bitmapText({font:gc.Z.PRIMARY.KEY,size:this.scene.fontSize(12),text:"Tournament",origin:{x:.5,y:.5}}),this.tournamentTitle.setIgnoreLanguage(),this.add(this.tournamentTitle),Phaser.Display.Align.In.Center(this.tournamentTitle,this)},t}(Xd),Zp=function(e){function t(t){return e.call(this,t)||this}return(0,r.Z)(t,e),t.prototype.createText=function(){this.text=this.scene.make.bitmapText({font:gc.Z.PRIMARY.KEY,size:this.scene.fontSize(12),origin:{x:1,y:.5}}),this.text.setTranslationParameter("moves","10"),this.text.setText("headerMoves"),this.add(this.text),this.text.setMaxSize(100,15)},t}(ap),Fp=function(e){function t(t){return e.call(this,t)||this}return(0,r.Z)(t,e),t.prototype.createText=function(){this.text=this.scene.make.bitmapText({font:gc.Z.PRIMARY.KEY,size:this.scene.fontSize(12),origin:{x:0,y:.5}}),this.text.setTranslationParameter("score","10"),this.text.setText("headerScore"),this.add(this.text),this.text.setMaxSize(100,15)},t}(ap),Up=function(e){function t(t){return e.call(this,t)||this}return(0,r.Z)(t,e),t.prototype.createText=function(){this.text=this.scene.make.bitmapText({font:gc.Z.PRIMARY.KEY,size:this.scene.fontSize(12),origin:{x:.5,y:.5}}),this.text.setTranslationParameter("time","10"),this.text.setText("headerTime"),this.add(this.text),this.text.setMaxSize(100,15)},t}(ap),zp=function(e){function t(t){var n;return(n=e.call(this,t)||this).setSize(333,15),n}(0,r.Z)(t,e);var n=t.prototype;return n.createMoves=function(){this.movesBlock=new Zp(this.scene),this.add(this.movesBlock)},n.createTime=function(){this.timeBlock=new Up(this.scene),this.add(this.timeBlock)},n.createScore=function(){this.scoreBlock=new Fp(this.scene),this.add(this.scoreBlock)},n.alignChildren=function(){this.movesBlock.setX(this.width/2-this.movesBlock.width/2),this.scoreBlock.setX(-this.width/2+this.scoreBlock.width/2)},t}(ip),Wp=zp,Yp=function(e){function t(t){return e.call(this,t)||this}(0,r.Z)(t,e);var n=t.prototype;return n.init=function(){this.createContent(),this.setSize(375,this.titleBlock.height+this.statBlock.height),this.alignChildren()},n.createTitle=function(){this.titleBlock=new Gp(this.scene),this.add(this.titleBlock)},n.createStat=function(){this.statBlock=new Wp(this.scene),this.add(this.statBlock)},n.alignChildren=function(){Phaser.Display.Align.In.TopCenter(this.titleBlock,this,0,-2),Phaser.Display.Align.To.BottomCenter(this.statBlock,this.titleBlock,0,4)},t}(tp),Hp=An.Z.JOURNEY_LANDSCAPE,Kp=Hp.KEY,jp=Hp.FRAME,Vp=16646084,Jp=15718001,Xp=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=t,n}(0,r.Z)(t,e);var n=t.prototype;return n.setLimit=function(e){var t=e.key,n=e.interpolations,i=void 0===n?{}:n;this.missionLimit.setText(t),this.missionLimit.setTranslationParameters((0,a.Z)({ws:": "},i)),this.missionLimit.setGradientVerticalTint([{at:0,color:Jp},{at:1,color:Vp}])},n.createBackground=function(){this.background=this.scene.add.image(0,0,An.Z.GAMEPLAY_DEFAULT_LANDSCAPE.KEY,An.Z.GAMEPLAY_DEFAULT_LANDSCAPE.FRAME.TOURNAMENT.BG_INFO),this.background.setWorldSize(543,25),this.add(this.background),this.setSize(this.background.width,this.background.height)},n.createMissionDescriptionWithLimit=function(){this.missionDescriptionWithLimit=this.scene.make.bitmapText({font:gc.Z.PRIMARY.KEY,size:this.scene.fontSize(13),text:"moveOneCard",origin:{x:0,y:.5}}).setGradientVerticalTint([{at:0,color:Jp},{at:1,color:Vp}]),this.missionDescriptionWithLimit.setMaxSize(350,24),this.add(this.missionDescriptionWithLimit)},n.createMissionDescriptionWithoutLimit=function(){this.missionDescriptionWithoutLimit=this.scene.make.bitmapText({font:gc.Z.PRIMARY.KEY,size:this.scene.fontSize(13),text:"moveOneCard",origin:{x:.5,y:.5}}).setCenterAlign().setGradientVerticalTint([{at:0,color:Jp},{at:1,color:Vp}]),this.missionDescriptionWithoutLimit.setMaxSize(400,24),this.add(this.missionDescriptionWithoutLimit)},n.createVerticalLine=function(){this.verticalLine=this.scene.add.image(0,0,Kp,jp.MISSION_BAR.LINE),this.verticalLine.setWorldSize(2.5,16),this.add(this.verticalLine)},n.createMissionLimit=function(){this.missionLimit=this.scene.make.bitmapText({font:gc.Z.PRIMARY.KEY,size:this.scene.fontSize(13),origin:{x:.5,y:.5}}).setCenterAlign().setGradientVerticalTint([{at:0,color:Jp},{at:1,color:Vp}]),this.missionLimit.setMaxSize(115,30,!0),this.missionLimit.setTranslationParameters({ws:": ",moves:"2/192"}),this.missionLimit.setText("journeyLimitMoves"),this.add(this.missionLimit)},n.alignComponents=function(){var e=this;Phaser.Display.Align.In.LeftCenter(this.missionDescriptionWithLimit,this.background,-40,1),Phaser.Display.Align.In.Center(this.missionDescriptionWithoutLimit,this,1),Phaser.Display.Align.In.RightCenter(this.verticalLine,this,-200);e.missionLimit.setPosition(e.verticalLine.x+65,e.verticalLine.y+2)},t}(pp),qp=function(e){function t(t){return e.call(this,t)||this}(0,r.Z)(t,e);var n=t.prototype;return n.init=function(){this.setSize(375,30),this.createChallengeInfo(),this.createSingleInfo(),this.createTournamentInfo()},n.useChallengeInfo=function(){var e=this.getInfoContainersWithout(this.challengeInfo,this.singleInfo);this.challengeInfo.revive(),this.singleInfo.revive(),this.challengeInfo.setY(this.getChallengeFriendBlockY()),this.playFadeInChallengeInfoAnimation(),Bh(37),this.scene.gameplay.boardGame.alignBoard(),this.scene.tweens.add({targets:this.singleInfo,y:{from:-200,to:0},duration:500,ease:Phaser.Math.Easing.Sine.Out}),this.scene.tweens.add({targets:e,y:{from:0,to:-200},duration:500,ease:Phaser.Math.Easing.Sine.In,onComplete:function(){return e.forEach((function(e){return e.kill()}))}})},n.getChallengeFriendBlockY=function(){var e=this.scene.footer;return e.y-e.displayHeight-15},n.useSingleInfo=function(){var e=this,t=this.getInfoContainersWithout(this.singleInfo);t.forEach((function(e){return e.kill()})),this.singleInfo.revive(),this.scene.tweens.add({targets:this.singleInfo,y:{from:-200,to:0},duration:500,ease:Phaser.Math.Easing.Sine.Out,onStart:function(){Bh(37),e.scene.gameplay.boardGame.alignBoard()}}),this.scene.tweens.add({targets:t,y:{from:0,to:-200},duration:500,ease:Phaser.Math.Easing.Sine.In,onComplete:function(){return t.forEach((function(e){return e.kill()}))}})},n.useTournamentInfo=function(){var e=this,t=this.getInfoContainersWithout(this.tournamentInfo);this.tournamentInfo.revive(),this.scene.tweens.add({targets:this.tournamentInfo,y:{from:-200,to:3.1},duration:500,ease:Phaser.Math.Easing.Sine.Out,onStart:function(){Bh(55),e.scene.gameplay.boardGame.alignBoard()}}),this.scene.tweens.add({targets:t,y:{from:0,to:-200},duration:500,ease:Phaser.Math.Easing.Sine.In,onComplete:function(){return t.forEach((function(e){return e.kill()}))}})},n.useMissionInfo=function(){var e=this;if(this.journeyInfo){var t=this.getInfoContainersWithout(this.journeyInfo);this.journeyInfo.updateInfo(),this.journeyInfo.setPosition(0,-200),this.scene.tweens.add({targets:this.journeyInfo,y:{from:-200,to:-2.5},duration:500,ease:Phaser.Math.Easing.Sine.Out,onStart:function(){var t;null==(t=e.journeyInfo)||t.revive(),Bh(40),e.scene.gameplay.boardGame.alignBoard()}}),this.scene.tweens.add({targets:t,y:{from:0,to:-200},duration:500,ease:Phaser.Math.Easing.Sine.In,onComplete:function(){return t.forEach((function(e){return e.kill()}))}})}},n.createChallengeInfo=function(){var e=new Bp(this.scene);this.challengeInfo=e,this.add(e),this.challengeInfo.kill()},n.createSingleInfo=function(){var e=new Wp(this.scene);this.singleInfo=e,this.add(e)},n.createTournamentInfo=function(){var e=new Yp(this.scene);this.tournamentInfo=e,this.add(e),this.tournamentInfo.kill()},n.createJourneyInfo=function(){this.journeyInfo=new Xp(this.scene),this.add(this.journeyInfo),this.journeyInfo.kill()},t}(Tp),Qp=qp,$p=GameCore.world.isLandscape()?Qp:Sp,ef=n(658),tf=function(e){return e.NEW_DEAL="NEW_DEAL",e.REPLAY="REPLAY",e}({}),nf=function(e){function t(t){var n;return(n=e.call(this,t)||this).background=void 0,n.buttonHeight=void 0,n.buttons=[],n.cropBackground=void 0,n.handleChallengeFriend=function(){n.scene.screen.close(cs.o4.PLAY_SCREEN),n.scene instanceof eR&&(n.scene.journey.isPlayingCurrentLevel()&&n.scene.journey.setIsPlayingCurrentLevel(!1),n.scene.closeResultScreens(),n.scene.handlePlayWithFriend())},n.handleNewDeal=(0,s.Z)(u().mark((function e(){var t;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.scene.screen.close(cs.o4.PLAY_SCREEN),!(n.scene instanceof eR)){e.next=10;break}return n.scene.journey.isPlayingCurrentLevel()&&n.scene.journey.setIsPlayingCurrentLevel(!1),n.scene.closeResultScreens(),t=n.scene.gameplay.boardGame.getTime(),e.next=7,n.scene.handlePlaySingle();case 7:if(!(t>6e4)){e.next=10;break}return e.next=10,n.scene.gameplay.handleShowInterstitialAd();case 10:case"end":return e.stop()}}),e)}))),n.handleReplay=function(){n.scene.screen.close(cs.o4.PLAY_SCREEN),n.scene instanceof eR&&(n.scene.gameplay.replayGame(),n.scene.closeResultScreens())},n.handleJourney=function(){n.scene.screen.close(cs.o4.PLAY_SCREEN),n.scene.screen.get(cs.o4.JOURNEY_SCREEN)?n.scene.screen.open(cs.o4.JOURNEY_SCREEN):(n.scene.game.globalScene.screen.open(cs.o4.NOTIFY_SCREEN,{message:"loading",duration:0,loading:!0}),n.waitingForJourneyScreenLoaded().then((function(){n.scene.game.globalScene.screen.close(cs.o4.NOTIFY_SCREEN),n.scene.screen.open(cs.o4.JOURNEY_SCREEN)})))},n.setSizeContainer(),n.createCropBackground(),n.createBackground(),n.buttonHeight=n.getButtonHeight(),n.createContent(),n.alignButtons(),t.add.existing((0,$a.Z)(n)),n.y=n.calculateY(),n}(0,r.Z)(t,e);var n=t.prototype;return n.waitingForJourneyScreenLoaded=function(){var e=(0,s.Z)(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.scene.screen.get(cs.o4.JOURNEY_SCREEN)){e.next=5;break}return e.next=3,(0,ls.qZ)(100);case 3:e.next=0;break;case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.openConfirmRestartScreen=function(e){this.scene.screen.open(cs.o4.CONFIRM_RESTART_SCREEN,{buttonType:e})},t}(Phaser.GameObjects.Container),af=nf,sf={},rf=function(e){var t=window.game.world.getPixelRatio(),n=window.game.world.getPixelRatioForCanvas(),i=window.game.world.getZoomRatio(),a=window.game.world.getWorldSize(),s=window.game.world.getScreenWidth(),r=window.game.world.getScreenHeight(),o=window.game.ads.getBannerHeight(),c=e.scene,h=e.key,u=e.newKey,l=(e.radius,e.alpha,e.offsetX),d=e.y,p=e.arrowSize,f=e.offsetY,g=e.width*t,m=e.height*t,v=(e.border||0)*t,y=c.textures.get(h).getSourceImage();if(GameCore.world.isLandscape()?(y.width=window.game.world.getPhysicPixels(s,n/i)*t,y.height=window.game.world.getPhysicPixels(r,n/i)*t,f+=o):(y.width=a.width*t,y.height=a.height*t),!y)return!1;if(c.textures.exists(u))return!0;var A=v,E=p*t,T=c.textures.createCanvas(u||h,g,m);T.setFilter(Phaser.Textures.FilterMode.LINEAR);var C=T.context,S=sf[h];S||((S=document.createElement("canvas")).width=y.width,S.height=y.height,S.getContext("2d").drawImage(y,l,f-d*t,y.width,y.height));return C.beginPath(),C.moveTo(A,0),C.lineTo(g-A,0),C.quadraticCurveTo(g,0,g,0+A),C.lineTo(g,0+m-A-E),C.quadraticCurveTo(g,0+m-E,g-A,0+m-E),C.lineTo(g/2+E,0+m-E),C.lineTo(g/2,0+m),C.lineTo(g/2-E,0+m-E),C.lineTo(A,0+m-E),C.quadraticCurveTo(0,0+m-E,0,0+m-A-E),C.lineTo(0,0+A),C.quadraticCurveTo(0,0,A,0),C.closePath(),C.clip(),T.draw(-y.width/2+g/2,-y.height/2+m/2,S),!0},of=function(e){function t(t,n){var i,a=n.key,s=n.width,r=n.height,o=n.border,c=n.radius,h=n.y,u=void 0===h?0:h,l=n.alpha,d=void 0===l?.15:l,p=n.offsetX,f=void 0===p?0:p,g=n.offsetY,m=void 0===g?0:g,v=n.arrowSize,y=void 0===v?12.5:v,A=t.theme.getCurrentThemeConfig().backgroundKey,E=A+a;return i=e.call(this,t,0,0,E)||this,rf({scene:t,key:A,newKey:E,radius:c,border:o,width:s,height:r,alpha:d,y:u,offsetX:f,offsetY:m,arrowSize:y}),i.setTexture(E),i.scene.events.on(vo.BACKGROUND_CHANGED,(function(e){var n=e+a;rf({scene:t,key:e,newKey:n,radius:c,border:o,width:s,height:r,alpha:d,y:u,offsetX:f,offsetY:m,arrowSize:y}),i.setTexture(n),i.setWorldSize(s,r)})),i.setWorldSize(s,r),i}return(0,r.Z)(t,e),t}(Phaser.GameObjects.Image),cf=of,hf=An.Z.GAMEPLAY_DEFAULT,uf=hf.KEY,lf=hf.FRAME,df=function(e){function t(t){return e.call(this,t)||this}(0,r.Z)(t,e);var n=t.prototype;return n.setSizeContainer=function(){GameCore.Configs.Gameplay.ForceJourneyMode?this.setSize(1058/2.88,356/2.88):this.setSize(368,181)},n.createBackground=function(){var e=GameCore.Configs.Gameplay.ForceJourneyMode?lf.NEW_GAME_POPUP.BACKGROUND_2:lf.NEW_GAME_POPUP.BACKGROUND,t=new td(this.scene,{width:this.width,height:this.height,key:uf,frame:e,symmetricType:ed.HORIZONTAL});this.background=t,this.add(t)},n.calculateY=function(){var e=this.scene.gameZone.height,t=this.scene.footer;return t.y-t.height/2-e/2-this.height/2-4},n.createCropBackground=function(){this.cropBackground=new cf(this.scene,{key:"play-container-background",radius:0,border:10,width:this.width,height:this.height,y:this.calculateY(),offsetX:0,offsetY:0,arrowSize:12.5}),this.add(this.cropBackground)},n.createContent=function(){this.createJourneyButton(),GameCore.Configs.Gameplay.ForceJourneyMode||this.createNewDealButton(),this.createReplayButton()},n.getButtonHeight=function(){return 62.75},n.createJourneyButton=function(){var e=new Nh.Z(this.scene,360,this.buttonHeight);e.setName("Journey"),e.onClick=this.handleJourney;var t=this.scene.add.image(0,0,uf,lf.NEW_GAME_POPUP.IC_JOURNEY);t.setWorldSize(23.5,27);var n=this.scene.make.bitmapText({font:gc.Z.BOLD_SHADOW_BLUR.KEY,size:this.scene.fontSize(20),text:"journey",origin:{x:.5,y:.5}}).setTint(16777215,16777215,12833246,12833246);n.setCenterAlign().setMaxSize(140,40),e.add([t,n]),Phaser.Display.Align.In.Center(t,e,-65),Phaser.Display.Align.In.Center(n,e,25),this.add([e]),this.buttons.push(e)},n.createChallengeButton=function(){var e=new Nh.Z(this.scene,360,this.buttonHeight);e.setName("ChallengeFriend"),e.onClick=this.handleChallengeFriend;var t=this.scene.add.image(0,0,uf,lf.NEW_GAME_POPUP.IC_WITH_FRIEND);t.setWorldSize(30,25.5);var n=this.scene.make.bitmapText({font:gc.Z.BOLD_SHADOW_BLUR.KEY,size:this.scene.fontSize(20),text:"withFriends",origin:{x:.5,y:.5}}).setTint(16777215,16777215,12833246,12833246);n.setMaxSize(140,40),e.add([t,n]),Phaser.Display.Align.In.Center(t,e,-65),Phaser.Display.Align.In.Center(n,e,25,2.5),this.add([e]),this.buttons.push(e)},n.createNewDealButton=function(){var e=new Nh.Z(this.scene,360,this.buttonHeight);e.setName("NewDeal"),e.onClick=this.handleNewDeal;var t=this.scene.add.image(0,0,uf,lf.NEW_GAME_POPUP.IC_NEW_GAME);t.setWorldSize(26,26.5);var n=this.scene.make.bitmapText({font:gc.Z.BOLD_SHADOW_BLUR.KEY,size:this.scene.fontSize(20),text:"newDeal",origin:{x:.5,y:.5}}).setTint(16777215,16777215,12833246,12833246);n.setCenterAlign().setMaxSize(140,40),e.add([t,n]),Phaser.Display.Align.In.Center(t,e,-65),Phaser.Display.Align.In.Center(n,e,25,2),this.add([e]),this.buttons.push(e)},n.createReplayButton=function(){var e=new Nh.Z(this.scene,360,this.buttonHeight);e.setName("replay"),e.onClick=this.handleReplay;var t=this.scene.add.image(0,0,uf,lf.NEW_GAME_POPUP.IC_REPLAY);t.setWorldSize(26,26.5);var n=this.scene.make.bitmapText({font:gc.Z.BOLD_SHADOW_BLUR.KEY,size:this.scene.fontSize(20),text:"replay",origin:{x:.5,y:.5}}).setTint(16777215,16777215,12833246,12833246);n.setCenterAlign().setMaxSize(140,40),e.add([t,n]),Phaser.Display.Align.In.Center(t,e,-65),Phaser.Display.Align.In.Center(n,e,25),this.add([e]),this.buttons.push(e)},n.alignButtons=function(){for(var e=0;e<this.buttons.length;e++){var t=this.buttons[e];Phaser.Display.Align.In.TopCenter(t,this.background,0,-this.buttonHeight*e+6.5*e)}},t}(af),pf=df,ff=function(e){function t(t,n,i,a){var s;return(s=e.call(this,t,n,i,a)||this).playContainer=void 0,s.setDepth(cs.Ks.POPUP),s}return(0,r.Z)(t,e),t}(GameCore.Screen),gf=ff,mf=function(e){function t(t,n,i,a){var s;return(s=e.call(this,t,n,i,a)||this).fadeInAnimation=void 0,s.fadeOutAnimation=void 0,s.playContainer=void 0,s.playContainer=new pf(t),s.add(s.playContainer),s.background.setTint(1315862),s.background.setAlpha(1e-4),s.background.setInteractive(),s.playContainer.setInteractive(),s}(0,r.Z)(t,e);var n=t.prototype;return n.open=function(){e.prototype.open.call(this),this.runOpenAnimation()},n.close=function(){this.runCloseAnimation()},n.runOpenAnimation=function(){var e,t,n=this;null!=(e=this.fadeInAnimation)&&null!=(t=e.tween)&&t.isPlaying()||(this.scene.audio.playSound(hs.Z.POPUP_SHOW),this.fadeInAnimation||(this.fadeInAnimation=new yh.Z({targets:[this],duration:300,ease:Phaser.Math.Easing.Sine.InOut,onComplete:function(){n.background.once(Phaser.Input.Events.POINTER_DOWN,(function(){return n.scene.screen.close(cs.o4.PLAY_SCREEN)}))}})),this.fadeInAnimation.play())},n.runCloseAnimation=function(){var t,n,i=this;null!=(t=this.fadeOutAnimation)&&null!=(n=t.tween)&&n.isPlaying()||(this.scene.audio.playSound(hs.Z.POPUP_OFF),this.fadeOutAnimation||(this.fadeOutAnimation=new ef.Z({targets:[this],props:{alpha:0},duration:300,onComplete:function(){i.scene.scene.get(za.C.GAME_SCENE).header.playFadeInChallengeInfoAnimation(),e.prototype.close.call(i)}})),this.fadeOutAnimation.play())},t}(gf),vf=mf,yf=An.Z.GAMEPLAY_DEFAULT_LANDSCAPE,Af=yf.KEY,Ef=yf.FRAME,Tf=function(e){function t(t){return e.call(this,t)||this}(0,r.Z)(t,e);var n=t.prototype;return n.setSizeContainer=function(){GameCore.Configs.Gameplay.ForceJourneyMode?this.setSize(213,96.5):this.setSize(213,136)},n.createBackground=function(){var e=GameCore.Configs.Gameplay.ForceJourneyMode?Ef.NEW_GAME_POPUP.BACKGROUND_2:Ef.NEW_GAME_POPUP.BACKGROUND,t=new td(this.scene,{width:this.width,height:this.height,key:Af,frame:e,symmetricType:ed.HORIZONTAL});this.add(t),this.background=t,this.setSize(t.width,t.height)},n.calculateY=function(){var e=this.scene.gameZone.height,t=this.scene.footer;return t.y-t.height/2-e/2-this.height/2+4},n.createCropBackground=function(){this.cropBackground=new cf(this.scene,{key:"play-container-background",radius:0,border:10,width:this.width,height:this.height,y:this.calculateY(),offsetX:0,offsetY:0,arrowSize:15}),this.add(this.cropBackground)},n.createContent=function(){this.createJourneyButton(),GameCore.Configs.Gameplay.ForceJourneyMode||this.createNewDealButton(),this.createReplayButton()},n.getButtonHeight=function(){return 38.875},n.createJourneyButton=function(){var e=new Nh.Z(this.scene,this.width-52,this.buttonHeight);e.setName("Journey"),e.onClick=this.handleJourney;var t=this.scene.add.image(0,0,Af,Ef.NEW_GAME_POPUP.IC_JOURNEY);t.setWorldSize(22,25);var n=this.scene.make.bitmapText({font:gc.Z.BOLD_SHADOW_BLUR.KEY,size:this.scene.fontSize(12),text:"journey",origin:{x:.5,y:.5}}).setTint(16777215,16777215,12833246,12833246);n.setMaxSize(95,25,!0),e.add([t,n]),Phaser.Display.Align.In.Center(t,e,-45),Phaser.Display.Align.In.Center(n,e,15),this.add([e]),this.buttons.push(e)},n.createChallengeButton=function(){var e=new Nh.Z(this.scene,this.width-52,this.buttonHeight);e.setName("ChallengeFriend"),e.onClick=this.handleChallengeFriend;var t=this.scene.add.image(0,0,Af,Ef.NEW_GAME_POPUP.IC_WITH_FRIEND);t.setWorldSize(26,22);var n=this.scene.make.bitmapText({font:gc.Z.BOLD_SHADOW_BLUR.KEY,size:this.scene.fontSize(12),text:"withFriends",origin:{x:.5,y:.5}}).setTint(16777215,16777215,12833246,12833246);n.setMaxSize(95,25,!0),e.add([t,n]),Phaser.Display.Align.In.Center(t,e,-45),Phaser.Display.Align.In.Center(n,e,15),this.add([e]),this.buttons.push(e)},n.createNewDealButton=function(){var e=new Nh.Z(this.scene,this.width-52,this.buttonHeight);e.setName("NewDeal"),e.onClick=this.handleNewDeal;var t=this.scene.add.image(0,0,Af,Ef.NEW_GAME_POPUP.IC_NEW_GAME);t.setWorldSize(22.5,23);var n=this.scene.make.bitmapText({font:gc.Z.BOLD_SHADOW_BLUR.KEY,size:this.scene.fontSize(12),text:"newDeal",origin:{x:.5,y:.5}}).setTint(16777215,16777215,12833246,12833246);n.setCenterAlign().setMaxSize(95,25),e.add([t,n]),Phaser.Display.Align.In.Center(t,e,-45),Phaser.Display.Align.In.Center(n,e,15),this.add([e]),this.buttons.push(e)},n.createReplayButton=function(){var e=new Nh.Z(this.scene,this.width-52,this.buttonHeight);e.setName("replay"),e.onClick=this.handleReplay;var t=this.scene.add.image(0,0,Af,Ef.NEW_GAME_POPUP.IC_REPLAY);t.setWorldSize(22.5,23);var n=this.scene.make.bitmapText({font:gc.Z.BOLD_SHADOW_BLUR.KEY,size:this.scene.fontSize(12),text:"replay",origin:{x:.5,y:.5}}).setTint(16777215,16777215,12833246,12833246);n.setMaxSize(95,25,!0),e.add([t,n]),Phaser.Display.Align.In.Center(t,e,-45),Phaser.Display.Align.In.Center(n,e,15),this.add([e]),this.buttons.push(e)},n.alignButtons=function(){for(var e=0;e<this.buttons.length;e++){var t=this.buttons[e];Phaser.Display.Align.In.TopCenter(t,this.background,0,-this.buttonHeight*e-(3+1.5*e))}},t}(af),Cf=Tf,Sf=function(e){function t(t,n,i,a){var s;return(s=e.call(this,t,n,i,a)||this).fadeInAnimation=void 0,s.fadeOutAnimation=void 0,s.playContainer=void 0,s.playContainer=new Cf(t),s.add(s.playContainer),s.background.setTint(1315862),s.background.setAlpha(1e-4),s.background.setInteractive(),s.playContainer.setInteractive(),s}(0,r.Z)(t,e);var n=t.prototype;return n.open=function(){e.prototype.open.call(this),this.runOpenAnimation()},n.close=function(){this.runCloseAnimation()},n.runOpenAnimation=function(){var e,t,n=this;null!=(e=this.fadeInAnimation)&&null!=(t=e.tween)&&t.isPlaying()||(this.scene.audio.playSound(hs.Z.POPUP_SHOW),this.fadeInAnimation||(this.fadeInAnimation=new yh.Z({targets:[this],duration:300,ease:Phaser.Math.Easing.Sine.InOut,onComplete:function(){n.background.once(Phaser.Input.Events.POINTER_DOWN,(function(){return n.scene.screen.close(cs.o4.PLAY_SCREEN)}))}})),this.fadeInAnimation.play())},n.runCloseAnimation=function(){var t,n,i=this;null!=(t=this.fadeOutAnimation)&&null!=(n=t.tween)&&n.isPlaying()||(this.scene.audio.playSound(hs.Z.POPUP_OFF),this.fadeOutAnimation||(this.fadeOutAnimation=new ef.Z({targets:[this],props:{alpha:0},duration:300,onComplete:function(){i.scene.scene.get(za.C.GAME_SCENE).header.playFadeInChallengeInfoAnimation(),e.prototype.close.call(i)}})),this.fadeOutAnimation.play())},t}(gf),bf=Sf,If=GameCore.world.isLandscape()?bf:vf,wf={totalGame:0,wins:0,winsWithoutUndo:0,bestScore:0,averageScore:0,bestWinningTime:0,averageWinningTime:0,mostWinningTime:0,bestWinningMoves:0,mostWinningMoves:0,currentWinningStreak:0,longestWinningStreak:0},_f=function(){function e(e){this.scene=void 0,this.draw1=void 0,this.draw3=void 0,this.scene=e;var t=e.player.getCustomData("game_stats");t&&0!=ie()(t).length?(this.draw1=(0,a.Z)({},t.draw1),this.draw3=(0,a.Z)({},t.draw3)):(this.draw1=(0,a.Z)({},wf),this.draw3=(0,a.Z)({},wf),this.pushGameStats())}var t=e.prototype;return t.addWin=function(e){e.draw3?this.draw3=this.calculateNewStats(this.draw3,e):this.draw1=this.calculateNewStats(this.draw1,e),this.pushGameStats()},t.calculateNewStats=function(e,t){var n=t.score,i=t.winningMoves,a=t.winningTime,s=t.usedUndo,r=e.totalGame+1,o=e.wins+1,c=e.winsWithoutUndo+(s?0:1),h=Math.max(e.bestScore,n),u=(e.averageScore*e.wins+n)/o,l=(e.averageWinningTime*e.wins+a)/o,d=Math.min(a,e.bestWinningTime)||a,p=Math.max(a,e.mostWinningTime),f=Math.min(i,e.bestWinningMoves)||i,g=Math.max(i,e.mostWinningMoves),m=e.currentWinningStreak+1;return{totalGame:r,wins:o,winsWithoutUndo:c,bestScore:h,averageScore:u,averageWinningTime:l,bestWinningTime:d,mostWinningTime:p,bestWinningMoves:f,mostWinningMoves:g,currentWinningStreak:m,longestWinningStreak:Math.max(m,e.longestWinningStreak)}},t.addLose=function(e){e?this.draw3=(0,a.Z)({},this.draw3,{totalGame:this.draw3.totalGame+1,currentWinningStreak:0}):this.draw1=(0,a.Z)({},this.draw1,{totalGame:this.draw1.totalGame+1,currentWinningStreak:0}),this.pushGameStats()},t.pushGameStats=function(){this.scene.player.setCustomData("game_stats",{draw1:this.draw1,draw3:this.draw3})},t.getWins=function(e){return e?this.draw3.wins:this.draw1.wins},t.getDraw=function(e){return e?this.draw3:this.draw1},e}(),xf=_f,Pf=n(635),kf="How about diving into the game for a relaxing experience?",Of=GameCore.Configs.Notification.DailyNotificationMessages,Lf=void 0===Of?{}:Of,Rf=function(){function e(){}e.sendNewUserNotification=function(){var e=(0,s.Z)(u().mark((function e(){var t;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.getInstance(),e.abrupt("return",t.sendNewUserNotificationInstance());case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),e.sendDailyNotification=function(){var e=(0,s.Z)(u().mark((function e(){var t;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.getInstance(),e.abrupt("return",t.sendDailyNotificationInstance());case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),e.sendTestDailyNotification=function(){var e=(0,s.Z)(u().mark((function e(t){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.getInstance();case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),e.getInstance=function(){return this._instance||(this._instance=new e),this._instance};var t=e.prototype;return t.sendNewUserNotificationInstance=function(){var e=(0,s.Z)(u().mark((function e(){var t,n,i,a,s,r;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=window.game,n=t.player,i=t.facebook,a=t.rollbar,e.prev=1,n.getPlayerIsNew()){e.next=5;break}return e.abrupt("return");case 5:if(n.getPlayerASID()){e.next=8;break}return e.abrupt("return");case 8:return e.next=10,FBInstant.player.getDataAsync(["isNotificationFirstSent"]);case 10:if(e.t0=e.sent,e.t0){e.next=13;break}e.t0={};case 13:if(s=e.t0,!0!==s.isNotificationFirstSent){e.next=17;break}return e.abrupt("return");case 17:return r={message:kf,delayTime:14400,type:Pf.Z.NEW_USER_NOTIFICATION},e.next=20,i.sendNotificationAsync(r);case 20:FBInstant.player.setDataAsync({isNotificationFirstSent:!0}),e.next=26;break;case 23:e.prev=23,e.t1=e.catch(1),a.sendException(e.t1);case 26:case"end":return e.stop()}}),e,null,[[1,23]])})));return function(){return e.apply(this,arguments)}}(),t.sendDailyNotificationInstance=function(){var e=(0,s.Z)(u().mark((function e(){var t,n,i;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=window.game.rollbar,e.prev=1,n=new Date,i=n.getDay(),e.t0=i,e.next=0===e.t0?7:1===e.t0?10:2===e.t0?13:3===e.t0?16:4===e.t0?19:22;break;case 7:return e.next=9,this.sendMondayNotification();case 9:return e.abrupt("break",22);case 10:return e.next=12,this.sendTuesdayNotification();case 12:return e.abrupt("break",22);case 13:return e.next=15,this.sendWednesdayNotification();case 15:return e.abrupt("break",22);case 16:return e.next=18,this.sendThursdayNotification();case 18:return e.abrupt("break",22);case 19:return e.next=21,this.sendFridayNotification();case 21:return e.abrupt("break",22);case 22:return e.next=24,this.sendSaturdayNotification();case 24:return e.next=26,this.sendSundayNotification();case 26:e.next=31;break;case 28:e.prev=28,e.t1=e.catch(1),t.sendException(e.t1);case 31:case"end":return e.stop()}}),e,this,[[1,28]])})));return function(){return e.apply(this,arguments)}}(),t.sendMondayNotification=function(){var e=(0,s.Z)(u().mark((function e(){var t,n,i,a,s;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=window.game,n=t.facebook,i=t.rollbar,e.prev=1,s={message:null!=(a=Lf.MONDAY)?a:kf,delayTime:86400,type:Pf.Z.MONDAY_NOTIFICATION},e.next=5,n.sendNotificationAsync(s);case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),i.sendException(e.t0);case 10:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(){return e.apply(this,arguments)}}(),t.sendTuesdayNotification=function(){var e=(0,s.Z)(u().mark((function e(){var t,n,i,a,s;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=window.game,n=t.facebook,i=t.rollbar,e.prev=1,s={message:null!=(a=Lf.TUESDAY)?a:kf,delayTime:86400,type:Pf.Z.TUESDAY_NOTIFICATION},e.next=5,n.sendNotificationAsync(s);case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),i.sendException(e.t0);case 10:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(){return e.apply(this,arguments)}}(),t.sendWednesdayNotification=function(){var e=(0,s.Z)(u().mark((function e(){var t,n,i,a,s;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=window.game,n=t.facebook,i=t.rollbar,e.prev=1,s={message:null!=(a=Lf.WEDNESDAY)?a:kf,delayTime:86400,type:Pf.Z.WEDNESDAY_NOTIFICATION},e.next=5,n.sendNotificationAsync(s);case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),i.sendException(e.t0);case 10:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(){return e.apply(this,arguments)}}(),t.sendThursdayNotification=function(){var e=(0,s.Z)(u().mark((function e(){var t,n,i,a,s;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=window.game,n=t.facebook,i=t.rollbar,e.prev=1,s={message:null!=(a=Lf.THURSDAY)?a:kf,delayTime:86400,type:Pf.Z.THURSDAY_NOTIFICATION},e.next=5,n.sendNotificationAsync(s);case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),i.sendException(e.t0);case 10:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(){return e.apply(this,arguments)}}(),t.sendFridayNotification=function(){var e=(0,s.Z)(u().mark((function e(){var t,n,i,a,s;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=window.game,n=t.facebook,i=t.rollbar,e.prev=1,s={message:null!=(a=Lf.FRIDAY)?a:kf,delayTime:86400,type:Pf.Z.FRIDAY_NOTIFICATION},e.next=5,n.sendNotificationAsync(s);case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),i.sendException(e.t0);case 10:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(){return e.apply(this,arguments)}}(),t.sendSaturdayNotification=function(){var e=(0,s.Z)(u().mark((function e(){var t,n,i,a,s,r;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=window.game,n=t.facebook,i=t.rollbar,e.prev=1,s=this.findDelayTimeForNextDay(6,10),r={message:null!=(a=Lf.SATURDAY)?a:kf,delayTime:s,type:Pf.Z.SATURDAY_NOTIFICATION},e.next=6,n.sendNotificationAsync(r);case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),i.sendException(e.t0);case 11:case"end":return e.stop()}}),e,this,[[1,8]])})));return function(){return e.apply(this,arguments)}}(),t.sendSundayNotification=function(){var e=(0,s.Z)(u().mark((function e(){var t,n,i,a,s,r;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=window.game,n=t.facebook,i=t.rollbar,e.prev=1,s=this.findDelayTimeForNextDay(0,10),r={message:null!=(a=Lf.SUNDAY)?a:kf,delayTime:s,type:Pf.Z.SUNDAY_NOTIFICATION},e.next=6,n.sendNotificationAsync(r);case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),i.sendException(e.t0);case 11:case"end":return e.stop()}}),e,this,[[1,8]])})));return function(){return e.apply(this,arguments)}}(),t.findDelayTimeForNextDay=function(e,t){if(e<0||e>6)throw new Error("Invalid day for notification");if(t<0||t>23)throw new Error("Invalid hour for notification");var n=Date.now(),i=new Date(n).getDay(),a=new Date(n).getHours(),s=e,r=t;if(i===s&&a>=r){var o=3600*(168-a+r);if(o>604800)throw new Error("Notification delay time is more than 7 days");return o}var c=s<i?7-i+s:s-i;r<a&&c--;var h=3600*(24*c+(r<a?24-a+r:r-a));if(h>604800)throw new Error("Notification delay time is more than 7 days");return h},t.sendTestDailyNotificationInstance=function(){var e=(0,s.Z)(u().mark((function e(t){var n,i,a,s;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n={0:"SUNDAY",1:"MONDAY",2:"TUESDAY",3:"WEDNESDAY",4:"THURSDAY",5:"FRIDAY",6:"SATURDAY"},e.prev=1,a=kf,!(t<0||t>6)){e.next=5;break}throw new Error("Invalid day for notification. Day must be between 0 (Sunday) and 6 (Saturday)");case 5:return a=null!=(i=Lf[n[t]])?i:kf,s={message:a,delayTime:300,type:Pf.Z.GENERIC_NOTIFICATION},e.next=9,window.game.facebook.sendNotificationAsync(s);case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1);case 14:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(t){return e.apply(this,arguments)}}(),e}();Rf._instance=void 0;var Bf=Rf,Df=function(){function e(e){this.scene=void 0,this.scene=e,this.loadLevels()}var t=e.prototype;return t.loadLevels=function(){for(var e=1;e<=5;e++){var t="draw1/level"+e,n="draw3/level"+e;this.scene.cache.text.exists(t)||(this.scene.cache.text.exists(n)||(this.scene.load.text(t,"assets/levels/"+t+".txt"),this.scene.load.text(n,"assets/levels/"+n+".txt")))}this.scene.load.start()},t.isLevelLoaded=function(){var e=this.getKey(!1),t=this.getKey(!0);return!!this.scene.cache.text.get(e)&&(!!this.scene.cache.text.get(t)&&(!!this.scene.cache.text.get(e)&&!!this.scene.cache.text.get(t)))},t.getKey=function(e){var t=this.scene.gameStats.getWins(e),n=this.getLevelByWins(t);return e?"draw3/level"+n:"draw1/level"+n},t.getLevelByWins=function(e){return e<10?1:e<20?2:e<60?3:e<140?4:5},t.randomSeed=function(e){var t=e?3:1,n=this.scene.gameStats.getWins(e),i=this.getLevelByWins(n),a="draw"+t+"/level"+Phaser.Math.RND.between(1,i),s=this.scene.cache.text.get(a);if(!s)throw Error("Level data \u0111\xe2u r\u1ed3i b\u1ea1n \xeai!!!");return Phaser.Math.RND.pick(s.split("\n"))},t.getRandomBeginnerSeed=function(){var e=this.scene.cache.text.get("draw1/level1");if(!e)throw Error("Level data \u0111\xe2u r\u1ed3i b\u1ea1n \xeai!!!");return Phaser.Math.RND.pick(e.split("\n"))},t.getAllSeeds=function(e,t){var n="draw"+(t?3:1)+"/level"+e;return this.scene.cache.text.get(n).split("\n")},t.getDrawMode=function(){},e}(),Nf=Df,Mf=n(98),Gf=function(e){function t(t){var n;return(n=e.call(this,t)||this).columns=void 0,n.rows=void 0,n.cellWidths=void 0,n.cellHeight=void 0,n.textGroup=void 0,n.iconGroup=void 0,n.aligns=void 0,n.tableData=void 0,n.iconSizes=[],n.background=void 0,n.columns=0,n.rows=0,n.tableData=[],n.aligns=[],n.cellWidths=[],n.cellHeight=0,n.textGroup=n.scene.add.group({classType:Phaser.GameObjects.BitmapText}),n.iconGroup=n.scene.add.group({classType:Phaser.GameObjects.Image}),t.add.existing((0,$a.Z)(n)),n}(0,r.Z)(t,e);var n=t.prototype;return n.setTableSize=function(e,t,n,i,a){this.columns=t,this.rows=e,this.cellWidths=n,this.cellHeight=i,this.aligns=a,this.updateTable()},n.setIconSizeData=function(e){this.iconSizes=e},n.setTableData=function(e){this.tableData=e,this.updateTable()},n.updateTable=function(){var e;this.textGroup.getChildren().forEach((function(e){return e instanceof Phaser.GameObjects.BitmapText&&e.kill()})),this.iconGroup.getChildren().forEach((function(e){return e instanceof Phaser.GameObjects.Image&&e.kill()}));var t=Gh()(e=this.cellWidths).call(e,(function(e,t){return e+t}),0),n=this.rows*this.cellHeight;this.setSize(t,n);var i=this.tableData;if(i)for(var a=0;a<this.rows;a++){var s=i[a];if(!s)break;var r=this.cellHeight*(.5+a)-this.height/2,o=-this.width/2,c=this.spawnIcon();c.setTexture(An.Z.GAMEPLAY_DEFAULT.KEY,s[2]),c.setWorldSize(this.iconSizes[a][0],this.iconSizes[a][1]),c.setPosition(o-22,r);for(var h=0;h<this.columns;h++)if(s[h]){var u=this.cellWidths[h],l=this.spawnText();h==this.columns-1&&l.setIgnoreLanguage(),l.setText(s[h]),0==h?l.setTint(16777215):1==h&&l.setTint(16382878),1==this.aligns[h]?(l.setOrigin(1,.5),l.setPosition(o+u,r)):0==this.aligns[h]?(l.setOrigin(.5,.5),l.setPosition(o+.5*u,r)):(l.setOrigin(0,.5),l.setPosition(o,r)),o+=u}}},n.drawBorder=function(){this.drawRowBorder(),this.drawColumnBorder();var e=this.scene.add.rectangle(0,0,0,0);e.setOrigin(.5,.5),e.setStrokeStyle(1,1907997,.2),e.setSize(this.width,this.height),e.setPosition(-this.width/2,-this.height/2),this.add(e)},n.drawRowBorder=function(){var e=this.scene.world.getWorldSize().width;this.scene.world.isLandscape()&&(e=400);for(var t=-this.height/2,n=0;n<this.rows;n++){var i=this.scene.add.line(-15,t+this.cellHeight*n,0,0,e,0,1398577,1);i.setLineWidth(.8),this.add(i)}},n.drawColumnBorder=function(){for(var e=-this.width/2,t=1;t<this.rows;t++){e+=this.cellWidths[t-1]||0;var n=this.scene.add.line(e,0,0,0,0,this.height,1907997,.1);n.setLineWidth(.2),this.add(n)}},n.spawnText=function(){var e=this.textGroup.getFirstDead()||this.createText();return e.revive(),e},n.spawnIcon=function(){var e=this.iconGroup.get();return e.revive(),e.clearTint(),this.add(e),e},t}(Phaser.GameObjects.Container),Zf=Gf,Ff=function(e){function t(t){return e.call(this,t)||this}return(0,r.Z)(t,e),t.prototype.createText=function(){var e=this.scene.make.bitmapText({font:gc.Z.PRIMARY.KEY,size:this.scene.fontSize(16),origin:{x:.5,y:.5}});return e.setMaxSize(220,40),this.textGroup.add(e),this.add(e),e},t}(Zf),Uf=Ff,zf=340,Wf=24,Yf=12,Hf=24,Kf=66,jf=1e3,Vf=Phaser.Math.Easing.Quadratic.Out,Jf=An.Z.GAMEPLAY_DEFAULT,Xf=Jf.KEY,qf=Jf.FRAME,Qf=function(e){function t(t){var n;return(n=e.call(this,t)||this).emptyBar=void 0,n.winRateBar=void 0,n.loseRateBar=void 0,n.isPlayingAnimation=!1,n.totalCount=0,n.winCount=0,n.loseCount=0,n.progressTween=void 0,n.setSize(zf,Yf),n.createEmptyBar(),n.createWinRateBar(),n.createLoseRateBar(),n}(0,r.Z)(t,e);var n=t.prototype;return n.createEmptyBar=function(){this.emptyBar=this.scene.add.image(0,0,Xf,qf.BG_PROGRESS),this.emptyBar.setWorldSize(342.5,14),this.add(this.emptyBar)},n.createWinRateBar=function(){this.winRateBar=this.scene.add.image(0,0,Xf,qf.BG_PROGRESS_WIN),this.winRateBar.setWorldSize(341,12.5),this.add(this.winRateBar)},n.createLoseRateBar=function(){this.loseRateBar=this.scene.add.image(0,0,Xf,qf.BG_PROGRESS_LOSE),this.loseRateBar.setWorldSize(341,12.5),this.add(this.loseRateBar)},n.updateWinLoseCount=function(e,t){if(this.winCount=e,this.loseCount=t,this.totalCount=e+t,this.totalCount<=0)return this.winRateBar.kill(),void this.loseRateBar.kill();e?this.winRateBar.revive():this.winRateBar.kill(),t?this.loseRateBar.revive():this.loseRateBar.kill(),this.bringToTop(t<e?this.loseRateBar:this.winRateBar)},n.initAnimation=function(){this.isPlayingAnimation||(this.winRateBar.setCrop(0,0,0,0),this.loseRateBar.setCrop(0,0,0,0))},n.playAnimation=function(){var e=this;this.isPlayingAnimation||(this.isPlayingAnimation=!0,this.progressTween=this.scene.tweens.addCounter({from:0,to:1,duration:jf,ease:Vf,onUpdate:function(t){var n=t.getValue(),i=n*e.winCount,a=n*e.loseCount;e.updateWinProgress(i),e.updateLoseProgress(a)},onComplete:function(){e.updateLoseProgress(e.loseCount),e.updateWinProgress(e.winCount),e.isPlayingAnimation=!1}}))},n.updateWinProgress=function(e){var t=1,n=this.totalCount-1;t=e>=n?1+.2*(e-n):e/Math.max(1,this.totalCount-1)*1;var i=e/this.totalCount;t=t>i?i:t;var a=this.scene.world.getPixelRatio(),s=341*t;this.winRateBar.setCrop(0,0,s*a,12.5*a)},n.updateLoseProgress=function(e){var t=1,n=this.totalCount-1;t=e>=n?1+.2*(e-n):e/Math.max(1,this.totalCount-1)*1;var i=e/this.totalCount;t=t>i?i:t;var a=this.scene.world.getPixelRatio(),s=341*t;this.loseRateBar.setCrop((341-s)*a,0,341*a,12.5*a)},n.reset=function(){var e;null==(e=this.progressTween)||e.remove(),this.isPlayingAnimation=!1},t}(Phaser.GameObjects.Container),$f=5366845,eg=15672868,tg=16,ng=16,ig=$f,ag=eg,sg=tg,rg=function(e){function t(t){var n;return(n=e.call(this,t)||this).winText=void 0,n.loseText=void 0,n.winCountLabel=void 0,n.loseCountLabel=void 0,n.setSize(zf,Wf),n.createWinCountLabel(),n.createLoseCountLabel(),n.setIgnoreLanguage(),n}(0,r.Z)(t,e);var n=t.prototype;return n.createWinCountLabel=function(){var e=this;this.winText=this.scene.make.bitmapText({font:gc.Z.BOLD.KEY,size:this.scene.fontSize(sg),text:"win",origin:{x:0,y:.5}}),this.winText.setMaxSize(120,20),this.winCountLabel=this.scene.make.bitmapText({font:gc.Z.BOLD.KEY,size:this.scene.fontSize(sg),text:"62",origin:{x:0,y:.5}}).setTint(ig),this.add([this.winText,this.winCountLabel]);var t=function(){Phaser.Display.Align.In.LeftCenter(e.winText,e),e.winText.x-=e.x,e.winText.y-=e.y,Phaser.Display.Align.In.RightCenter(e.winCountLabel,e.winText,20)};t(),this.winText.on("textChanged",(function(){t()}))},n.createLoseCountLabel=function(){var e=this;this.loseText=this.scene.make.bitmapText({font:gc.Z.BOLD.KEY,size:this.scene.fontSize(sg),text:"lose",origin:{x:1,y:.5}}),this.loseText.setMaxSize(120,20),this.loseCountLabel=this.scene.make.bitmapText({font:gc.Z.BOLD.KEY,size:this.scene.fontSize(sg),text:"32",origin:{x:1,y:.5}}).setTint(ag),this.add([this.loseText,this.loseCountLabel]);Phaser.Display.Align.In.RightCenter(e.loseCountLabel,e),e.loseCountLabel.x-=e.x,e.loseCountLabel.y-=e.y,Phaser.Display.Align.In.RightCenter(e.loseText,e.loseCountLabel)},n.updateWinLoseCount=function(e,t){this.winCountLabel.setText(""+e),this.loseCountLabel.setText(""+t);var n=this.loseCountLabel.width,i=this.loseCountLabel.x-n;this.loseText.x=i},n.setIgnoreLanguage=function(){this.loseCountLabel.setIgnoreLanguage(),this.winCountLabel.setIgnoreLanguage()},t}(Phaser.GameObjects.Container),og=ng,cg=function(e){function t(t){var n;return(n=e.call(this,t)||this).winRateLabel=void 0,n.loseRateLabel=void 0,n.isPlayingAnimation=!1,n.updatedRoundedWinPercentage=-1,n.updatedRoundedLosePercentage=-1,n.setSize(zf,Hf),n.createWinRateLabel(),n.createLoseRateLabel(),n.alignComponents(),n.setIgnoreLanguage(),n}(0,r.Z)(t,e);var n=t.prototype;return n.createWinRateLabel=function(){this.winRateLabel=this.scene.make.bitmapText({font:gc.Z.BOLD.KEY,size:this.scene.fontSize(og),text:"67%",origin:{x:0,y:.5}}),this.add(this.winRateLabel)},n.createLoseRateLabel=function(){this.loseRateLabel=this.scene.make.bitmapText({font:gc.Z.BOLD.KEY,size:this.scene.fontSize(og),text:"33%",origin:{x:1,y:.5}}),this.add(this.loseRateLabel)},n.alignComponents=function(){Phaser.Display.Align.In.LeftCenter(this.winRateLabel,this),Phaser.Display.Align.In.RightCenter(this.loseRateLabel,this)},n.getRoundedWinLosePercentage=function(e,t){if(0===e&&0===t)return{win:0,lose:0};var n=Math.round(100*e);return{win:n,lose:100-n}},n.setIgnoreLanguage=function(){this.winRateLabel.setIgnoreLanguage(),this.loseRateLabel.setIgnoreLanguage()},n.updateWinLoseRate=function(e,t){var n=e+t,i=n<=0?0:e/n,a=n<=0?0:t/n,s=this.getRoundedWinLosePercentage(i,a),r=s.win,o=s.lose;this.winRateLabel.setText(r+"%"),this.loseRateLabel.setText(o+"%"),this.updatedRoundedWinPercentage=r,this.updatedRoundedLosePercentage=o},n.initAnimation=function(){this.isPlayingAnimation||(this.winRateLabel.setText("0%"),this.loseRateLabel.setText("0%"))},n.playAnimation=function(){var e=this;this.isPlayingAnimation||(this.isPlayingAnimation=!0,-1!==this.updatedRoundedWinPercentage&&-1!==this.updatedRoundedLosePercentage?(this.scene.tweens.addCounter({from:0,to:this.updatedRoundedWinPercentage,ease:Vf,duration:jf,onUpdate:function(t){var n=Math.round(t.getValue());e.winRateLabel.setText(n+"%")},onComplete:function(){e.isPlayingAnimation=!1}}),this.scene.tweens.addCounter({from:0,to:this.updatedRoundedLosePercentage,ease:Vf,duration:jf,onUpdate:function(t){var n=Math.round(t.getValue());e.loseRateLabel.setText(n+"%")}})):this.isPlayingAnimation=!1)},t}(Phaser.GameObjects.Container),hg=function(e){function t(t){var n;return(n=e.call(this,t)||this).countLabel=void 0,n.rateLabel=void 0,n.barChart=void 0,n.setSize(zf,Kf),n.createCountLabel(),n.createRateLabel(),n.createBarChart(),n.alignComponents(),n}(0,r.Z)(t,e);var n=t.prototype;return n.setWinLoseCount=function(e,t){this.countLabel.updateWinLoseCount(e,t),this.barChart.updateWinLoseCount(e,t),this.rateLabel.updateWinLoseRate(e,t)},n.initAnimation=function(){this.barChart.initAnimation(),this.rateLabel.initAnimation()},n.playAnimation=function(){this.barChart.playAnimation(),this.rateLabel.playAnimation()},n.createCountLabel=function(){this.countLabel=new rg(this.scene),this.add(this.countLabel)},n.createRateLabel=function(){this.rateLabel=new cg(this.scene),this.add(this.rateLabel)},n.createBarChart=function(){this.barChart=new Qf(this.scene),this.add(this.barChart)},n.alignComponents=function(){Phaser.Display.Align.In.TopCenter(this.countLabel,this),Phaser.Display.Align.In.Center(this.barChart,this),Phaser.Display.Align.In.BottomCenter(this.rateLabel,this)},n.addBackground=function(){var e="win-lose-chart-background";if(!this.scene.textures.exists(e)){var t=this.width,n=this.height,i=this.scene.add.graphics();i.fillStyle(65280,.2),i.fillRect(0,0,t,n),i.generateTexture(e,t,n),i.destroy()}var a=this.scene.add.image(0,0,e);this.add(a)},t}(Phaser.GameObjects.Container),ug=An.Z.GAMEPLAY_DEFAULT.FRAME,lg=function(e){function t(t){var n;return(n=e.call(this,t)||this).chart=void 0,n.tableStats=void 0,n.chart=new hg(t),n.tableStats=new Uf(t),n.tableStats.setTableSize(6,2,[155,148],52.5,[-1,1]),n.tableStats.drawRowBorder(),n.setSize(340,n.chart.height+n.tableStats.height),n.add([n.chart,n.tableStats]),Phaser.Display.Align.In.TopCenter(n.chart,(0,$a.Z)(n)),Phaser.Display.Align.To.BottomCenter(n.tableStats,n.chart,15,10),t.add.existing((0,$a.Z)(n)),n}return(0,r.Z)(t,e),t.prototype.setStats=function(e){var t=e.totalGame,n=e.wins,i=e.winsWithoutUndo,a=e.bestScore,s=e.averageScore,r=e.bestWinningTime,o=e.averageWinningTime;this.chart.setWinLoseCount(n,t-n);this.tableStats.setIconSizeData([[23,23.5],[24,19],[18,27],[23.5,23],[19,26.5],[22.5,27]]),this.tableStats.setTableData([["totalGame",""+t,ug.STATS_FLASH],["winsWithoutUndo",""+i,ug.STATS_CROWN],["bestScore",""+a,ug.STATS_MEDAL_START],["avgScore",""+Math.round(s),ug.STATS_STAR],["bestWinningTime",""+(0,ls.F0)(r,!1),ug.STATS_CUP],["avgWinningTime",""+(0,ls.F0)(o,!1),ug.STATS_TIMER]])},t}(Phaser.GameObjects.Container),dg=lg,pg=An.Z.GAMEPLAY_DEFAULT,fg=pg.KEY,gg=pg.FRAME,mg=function(e){function t(t,n,i,a){var s;return(s=e.call(this,t)||this).numOfTabs=void 0,s.tabs=void 0,s.currentIdx=void 0,s.callback=void 0,s.numOfTabs=a,s.setSize(n,i),s.createTabs(),s.listenInput(),t.add.existing((0,$a.Z)(s)),s}(0,r.Z)(t,e);var n=t.prototype;return n.getCurrentIdx=function(){return this.currentIdx},n.addLabels=function(e){this.add(e);var t=this.width/this.numOfTabs;this.placeCenter(e,0,1.25,t+2)},n.createTabs=function(){var e=this.scene.add.image(0,0,fg,gg.BTN_BACKGROUND_INACTIVE);e.setWorldSize(this.width,this.height),this.add(e),this.tabs=[];for(var t=this.width/this.numOfTabs,n=0;n<this.numOfTabs;n++){var i=this.scene.add.image(0,0,fg,this.getTabFrame());i.setWorldSize(t,this.height+2.5),this.tabs.push(i)}this.add(this.tabs),this.placeCenter(this.tabs,0,-this.height/2+(this.height+2.5)/2,t+2)},n.getTabFrame=function(){return 3==this.numOfTabs?gg.BG_SELECT_ACTIVE_3:gg.BG_SELECT_ACTIVE_2},n.placeCenter=function(e,t,n,i,a){void 0===a&&(a=0);for(var s=t-(this.numOfTabs/2-.5-a)*i,r=0;r<e.length;r++)e[r].setPosition(s+r*i,n)},n.getIdx=function(e){var t=this.width/this.tabs.length;return Math.floor((e+this.width/2)/t)},n.listenInput=function(){var e=this,t=!1;this.setInteractive({useHandCursor:!0}).on(Phaser.Input.Events.POINTER_DOWN,(function(){t=!0})).on(Phaser.Input.Events.POINTER_OUT,(function(){t=!1})).on(Phaser.Input.Events.POINTER_UP,(function(n){if(t){var i=e.getLocalPoint(n.worldX,n.worldY).x;e.selectTab(e.getIdx(i))}t=!1}))},n.selectTab=function(e){if(e!=this.currentIdx){this.currentIdx=e,this.callback&&this.callback(e);for(var t=0;t<this.tabs.length;t++)this.scene.tweens.add({targets:this.tabs[t],alpha:t==e?1:0,duration:200,ease:Phaser.Math.Easing.Sine.InOut})}},(0,ce.Z)(t,[{key:"themeColor",get:function(){return 3774208}},{key:"backgroundColor",get:function(){return 16579837}}]),t}(Phaser.GameObjects.Container),vg=mg,yg=An.Z.GAMEPLAY_DEFAULT,Ag=yg.KEY,Eg=yg.FRAME,Tg=function(e){function t(t){var n,i=(n=e.call(this,t)||this).scene.ads.getBannerHeight(),a=n.scene.game.world.isLandscape()?12:0;return n.setSize(375,i+a),n.createBackground(),n.createLogo(),0==i&&n.kill(),n}(0,r.Z)(t,e);var n=t.prototype;return n.createBackground=function(){if(!this.scene.game.world.isLandscape()){var e=new td(this.scene,{key:Ag,frame:Eg.BOTTOM_BG,width:this.scene.gameZone.width,height:this.height,symmetricType:ed.HORIZONTAL});this.add(e),e.setInteractive()}},n.createLogo=function(){var e=this.scene.add.image(0,0,Ag,Eg.BOTTOM_LOGO);e.setWorldSize(289,25),this.add(e)},t}(Phaser.GameObjects.Container),Cg=An.Z.GAMEPLAY_DEFAULT,Sg=Cg.KEY,bg=Cg.FRAME,Ig=function(e){function t(t){var n;return(n=e.call(this,t,146,50.5)||this).setName("BackButton"),n.createBackground(),n.createContents(),n}(0,r.Z)(t,e);var n=t.prototype;return n.createBackground=function(){var e=this.scene.make.image({key:Sg,frame:bg.BUTTON_BACK});e.setWorldSize(this.width,this.height),this.add(e)},n.createContents=function(){var e=new bl(this.scene,{iconTextPadding:8,text:"back",fontSize:22,iconKey:An.Z.GAMEPLAY_DEFAULT.KEY,iconFrame:An.Z.GAMEPLAY_DEFAULT.FRAME.IC_BACK,iconWidth:18,iconHeight:17});this.add(e),e.text.setMaxSize(100,35,!0)},t}(Nh.Z),wg=Ig,_g=An.Z.GAMEPLAY_DEFAULT,xg=_g.KEY,Pg=_g.FRAME,kg=function(e){function t(t){var n;return(n=e.call(this,t,29.5,27)||this).createButton(),n}return(0,r.Z)(t,e),t.prototype.createButton=function(){var e=this.scene.make.image({key:xg,frame:Pg.IC_CLOSE});e.setWorldSize(this.width,this.height),this.add(e)},t}(Nh.Z),Og=An.Z.GAMEPLAY_DEFAULT,Lg=Og.KEY,Rg=Og.FRAME,Bg=function(e){function t(t){var n;return(n=e.call(this,t)||this).bg=void 0,n.tab=void 0,n.gameStats=void 0,n.draw1Stat=void 0,n.draw3Stat=void 0,n.closeButton=void 0,n.createBackground(),n.createTitle(),n.createCloseButton(),n.createGameStats(),n.createTab(),n.createBackButton(),n.createBottomLogo(),t.add.existing((0,$a.Z)(n)),n}(0,r.Z)(t,e);var n=t.prototype;return n.createBackground=function(){var e=this.scene.world.getWorldSize(),t=e.width,n=e.height;GameCore.world.isLandscape()&&(t=400),n*=1;var i=new Mf.Z(this.scene,0,0,t,n,0,1665080);this.add(i),this.bg=i,this.setSize(i.width,i.height)},n.createTitle=function(){var e=new td(this.scene,{width:this.bg.width,height:137,key:Lg,frame:Rg.TOURNAMENT.HEADER,symmetricType:ed.HORIZONTAL}),t=this.scene.make.bitmapText({font:gc.Z.BOLD_SHADOW_BLUR.KEY,size:this.scene.fontSize(26),text:"STATISTICS",origin:{x:.5,y:.5}});t.setMaxSize(220,40),t.setTint(16449487,16449487,15913325,15913325),this.add([e,t]),Phaser.Display.Align.In.TopCenter(e,this,0,40),Phaser.Display.Align.In.TopCenter(t,e,0,-60)},n.createCloseButton=function(){var e=this;this.closeButton=new kg(this.scene),this.add(this.closeButton),Phaser.Display.Align.In.TopLeft(this.closeButton,this,-16,-16),this.closeButton.onClick=function(){e.scene.screen.close(cs.o4.GAME_STATS_SCREEN)}},n.createTab=function(){var e,t=this;this.tab=new vg(this.scene,333,31,2),this.add(this.tab),Phaser.Display.Align.In.TopCenter(this.tab,this,0,-55);var n=Be()(e=["draw1Mode","draw3Mode"]).call(e,(function(e,n){var i=t.scene.make.bitmapText({font:gc.Z.BOLD.KEY,size:t.scene.fontSize(14),text:e,origin:{x:.5,y:.5}});return i.setCenterAlign(),i.setMaxSize(160,30),i}));this.tab.addLabels(n),this.tab.callback=function(e){n.forEach((function(t,n){return t.setTint(e==n?3239751:12306616)})),0===e?(t.scene.tweens.add({targets:t.draw1Stat,alpha:1,x:{from:-375,to:0},duration:200,ease:Phaser.Math.Easing.Sine.InOut}),t.scene.tweens.add({targets:t.draw3Stat,alpha:0,x:{from:0,to:375},duration:200,ease:Phaser.Math.Easing.Sine.InOut})):(t.scene.tweens.add({targets:t.draw1Stat,alpha:0,x:{from:0,to:-375},duration:200,ease:Phaser.Math.Easing.Sine.InOut}),t.scene.tweens.add({targets:t.draw3Stat,alpha:1,x:{from:375,to:0},duration:200,ease:Phaser.Math.Easing.Sine.InOut}))},this.tab.selectTab(0),this.draw1Stat.alpha=1,this.draw3Stat.alpha=0},n.createGameStats=function(){var e=this.scene.add.container(0,0);this.draw1Stat=new dg(this.scene),this.draw3Stat=new dg(this.scene),this.draw3Stat.setAlpha(0),e.setSize(this.draw3Stat.width,this.draw3Stat.height),e.add(this.draw1Stat),e.add(this.draw3Stat),this.add(e),Phaser.Display.Align.In.TopCenter(e,this,0,-116),this.gameStats=e},n.createBackButton=function(){var e=this,t=new td(this.scene,{width:this.bg.width,height:95,key:Lg,frame:Rg.BG_SETTINGS_BOTTOM,symmetricType:ed.HORIZONTAL}),n=new wg(this.scene);n.onClick=function(){e.scene.screen.close(cs.o4.GAME_STATS_SCREEN)},this.add([t,n]);var i=this.scene.ads.getBannerHeight();Phaser.Display.Align.In.BottomCenter(t,this,0,-i),Phaser.Display.Align.In.TopCenter(n,t,0,-21)},n.createBottomLogo=function(){var e=new Tg(this.scene);this.add(e),Phaser.Display.Align.In.BottomCenter(e,this)},n.onScreenClose=function(){this.draw1Stat.chart.barChart.reset(),this.draw3Stat.chart.barChart.reset()},t}(Phaser.GameObjects.Container),Dg=Bg,Ng=function(e){function t(t,n,i,a){var s;return(s=e.call(this,t,n,i,a)||this).scene=void 0,s.slideInAnimation=void 0,s.slideOutAnimation=void 0,s.fadeInAnimation=void 0,s.gameStatsContainer=void 0,s.scene=t,s.setDepth(cs.Ks.POPUP),s.gameStatsContainer=new Dg(t),s.add(s.gameStatsContainer),s.background.setAlpha(0),s.gameStatsContainer.setInteractive(),s}(0,r.Z)(t,e);var n=t.prototype;return n.open=function(){e.prototype.open.call(this),this.updateStatistics(),this.runOpenAnimation()},n.updateStatistics=function(){var e=this.gameStatsContainer,t=e.draw1Stat,n=e.draw3Stat,i=this.scene.gameStats,a=i.draw1,s=i.draw3;t.setStats(a),n.setStats(s)},n.close=function(){this.runCloseAnimation(),this.gameStatsContainer.onScreenClose()},n.runOpenAnimation=function(){var e,t,n=this;if(null==(e=this.slideInAnimation)||null==(t=e.tween)||!t.isPlaying()){this.scene.audio.playSound(hs.Z.POPUP_SHOW);var i=this.gameStatsContainer,a=[i.draw1Stat,i.draw3Stat];a.forEach((function(e){e.chart.initAnimation()})),this.slideInAnimation||(this.slideInAnimation=new pc.Z({targets:[this.gameStatsContainer],props:{x:{from:+this.width/2+this.gameStatsContainer.width/2,to:0,ease:Phaser.Math.Easing.Sine.Out},y:{from:this.height/2-this.gameStatsContainer.height/2,to:this.height/2-this.gameStatsContainer.height/2,ease:Phaser.Math.Easing.Sine.Out}},onComplete:function(){n.background.once(Phaser.Input.Events.POINTER_DOWN,(function(){return n.scene.screen.close(cs.o4.GAME_STATS_SCREEN)}))},duration:300})),this.fadeInAnimation||(this.fadeInAnimation=new yh.Z({targets:[this],duration:300,ease:Phaser.Math.Easing.Sine.InOut,onComplete:function(){var e=(0,s.Z)(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a.forEach((function(e){e.chart.playAnimation()}));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()})),this.slideInAnimation.play(),this.fadeInAnimation.play()}},n.runCloseAnimation=function(){var t,n,i=this;null!=(t=this.slideOutAnimation)&&null!=(n=t.tween)&&n.isPlaying()||(this.scene.audio.playSound(hs.Z.POPUP_OFF),this.slideOutAnimation||(this.slideOutAnimation=new pc.Z({targets:[this.gameStatsContainer],props:{y:{from:this.height/2-this.gameStatsContainer.height/2,to:this.height/2-this.gameStatsContainer.height/2},x:{from:0,to:this.width/2+this.gameStatsContainer.width/2,ease:Phaser.Math.Easing.Sine.Out}},duration:300,onComplete:function(){i.setAlpha(1),e.prototype.close.call(i)}})),this.slideOutAnimation.play())},t}(GameCore.Screen),Mg=Ng,Gg=function(e){function t(t){return e.call(this,t)||this}return(0,r.Z)(t,e),t.prototype.createText=function(){var e=this.scene.make.bitmapText({font:gc.Z.PRIMARY.KEY,size:this.scene.fontSize(12),origin:{x:.5,y:.5}});return e.setMaxSize(140,25),this.textGroup.add(e),this.add(e),e},t}(Zf),Zg=Gg,Fg=214,Ug=24,zg=12,Wg=24,Yg=55,Hg=1e3,Kg=Phaser.Math.Easing.Quadratic.Out,jg=An.Z.GAMEPLAY_DEFAULT,Vg=jg.KEY,Jg=jg.FRAME,Xg=function(e){function t(t){var n;return(n=e.call(this,t)||this).emptyBar=void 0,n.winRateBar=void 0,n.loseRateBar=void 0,n.isPlayingAnimation=!1,n.totalCount=0,n.winCount=0,n.loseCount=0,n.progressTween=void 0,n.setSize(Fg,zg),n.createEmptyBar(),n.createWinRateBar(),n.createLoseRateBar(),n}(0,r.Z)(t,e);var n=t.prototype;return n.createEmptyBar=function(){this.emptyBar=this.scene.add.image(0,0,Vg,Jg.BG_PROGRESS),this.emptyBar.setWorldSize(214,13.5),this.add(this.emptyBar)},n.createWinRateBar=function(){this.winRateBar=this.scene.add.image(0,0,Vg,Jg.BG_PROGRESS_WIN),this.winRateBar.setWorldSize(212.5,12),this.add(this.winRateBar)},n.createLoseRateBar=function(){this.loseRateBar=this.scene.add.image(0,0,Vg,Jg.BG_PROGRESS_LOSE),this.loseRateBar.setWorldSize(212.5,12),this.add(this.loseRateBar)},n.updateWinLoseCount=function(e,t){if(this.winCount=e,this.loseCount=t,this.totalCount=e+t,this.totalCount<=0)return this.winRateBar.kill(),void this.loseRateBar.kill();e?this.winRateBar.revive():this.winRateBar.kill(),t?this.loseRateBar.revive():this.loseRateBar.kill(),this.bringToTop(t<e?this.loseRateBar:this.winRateBar)},n.initAnimation=function(){this.isPlayingAnimation||(this.winRateBar.setCrop(0,0,0,0),this.loseRateBar.setCrop(0,0,0,0))},n.playAnimation=function(){var e=this;this.isPlayingAnimation||(this.isPlayingAnimation=!0,this.progressTween=this.scene.tweens.addCounter({from:0,to:1,duration:Hg,ease:Kg,onUpdate:function(t){var n=t.getValue(),i=n*e.winCount,a=n*e.loseCount;e.updateWinProgress(i),e.updateLoseProgress(a)},onComplete:function(){e.updateLoseProgress(e.loseCount),e.updateWinProgress(e.winCount),e.isPlayingAnimation=!1}}))},n.updateWinProgress=function(e){var t=1,n=this.totalCount-1;t=e>=n?1+.2*(e-n):e/Math.max(1,this.totalCount-1)*1;var i=e/this.totalCount;t=t>i?i:t;var a=this.scene.world.getPixelRatio(),s=212.5*t;this.winRateBar.setCrop(0,0,s*a,12*a)},n.updateLoseProgress=function(e){var t=1,n=this.totalCount-1;t=e>=n?1+.2*(e-n):e/Math.max(1,this.totalCount-1)*1;var i=e/this.totalCount;t=t>i?i:t;var a=this.scene.world.getPixelRatio(),s=212.5*t;this.loseRateBar.setCrop((212.5-s)*a,0,212.5*a,12*a)},n.reset=function(){var e;null==(e=this.progressTween)||e.remove(),this.isPlayingAnimation=!1},t}(Phaser.GameObjects.Container),qg=5366845,Qg=15672868,$g=12,em=12,tm=qg,nm=Qg,im=$g,am=function(e){function t(t){var n;return(n=e.call(this,t)||this).winText=void 0,n.loseText=void 0,n.winCountLabel=void 0,n.loseCountLabel=void 0,n.setSize(Fg,Ug),n.createWinCountLabel(),n.createLoseCountLabel(),n.setIgnoreLanguage(),n}(0,r.Z)(t,e);var n=t.prototype;return n.createWinCountLabel=function(){var e=this;this.winText=this.scene.make.bitmapText({font:gc.Z.BOLD.KEY,size:this.scene.fontSize(im),text:"win",origin:{x:0,y:.5}}),this.winText.setMaxSize(90,15),this.winCountLabel=this.scene.make.bitmapText({font:gc.Z.BOLD.KEY,size:this.scene.fontSize(im),text:"62",origin:{x:0,y:.5}}).setTint(tm),this.add([this.winText,this.winCountLabel]);var t=function(){Phaser.Display.Align.In.LeftCenter(e.winText,e),e.winText.x-=e.x,e.winText.y-=e.y,Phaser.Display.Align.In.RightCenter(e.winCountLabel,e.winText,15)};t(),this.winText.on("textChanged",(function(){t()}))},n.createLoseCountLabel=function(){this.loseText=this.scene.make.bitmapText({font:gc.Z.BOLD.KEY,size:this.scene.fontSize(im),text:"lose",origin:{x:1,y:.5}}),this.loseText.setMaxSize(90,15),this.loseCountLabel=this.scene.make.bitmapText({font:gc.Z.BOLD.KEY,size:this.scene.fontSize(im),text:"32",origin:{x:1,y:.5}}).setTint(nm),this.add([this.loseText,this.loseCountLabel]),Phaser.Display.Align.In.RightCenter(this.loseCountLabel,this),Phaser.Display.Align.In.RightCenter(this.loseText,this.loseCountLabel,-10)},n.updateWinLoseCount=function(e,t){this.winCountLabel.setText(""+e),this.loseCountLabel.setText(""+t);var n=this.loseCountLabel.width,i=this.loseCountLabel.x-n;this.loseText.x=i},n.setIgnoreLanguage=function(){this.loseCountLabel.setIgnoreLanguage(),this.winCountLabel.setIgnoreLanguage()},t}(Phaser.GameObjects.Container),sm=em,rm=function(e){function t(t){var n;return(n=e.call(this,t)||this).winRateLabel=void 0,n.loseRateLabel=void 0,n.isPlayingAnimation=!1,n.updatedRoundedWinPercentage=-1,n.updatedRoundedLosePercentage=-1,n.setSize(Fg,Wg),n.createWinRateLabel(),n.createLoseRateLabel(),n.alignComponents(),n.setIgnoreLanguage(),n}(0,r.Z)(t,e);var n=t.prototype;return n.createWinRateLabel=function(){this.winRateLabel=this.scene.make.bitmapText({font:gc.Z.BOLD.KEY,size:this.scene.fontSize(sm),text:"67%",origin:{x:0,y:.5}}),this.add(this.winRateLabel)},n.createLoseRateLabel=function(){this.loseRateLabel=this.scene.make.bitmapText({font:gc.Z.BOLD.KEY,size:this.scene.fontSize(sm),text:"33%",origin:{x:1,y:.5}}),this.add(this.loseRateLabel)},n.alignComponents=function(){Phaser.Display.Align.In.LeftCenter(this.winRateLabel,this),Phaser.Display.Align.In.RightCenter(this.loseRateLabel,this)},n.getRoundedWinLosePercentage=function(e,t){if(0===e&&0===t)return{win:0,lose:0};var n=Math.round(100*e);return{win:n,lose:100-n}},n.setIgnoreLanguage=function(){this.winRateLabel.setIgnoreLanguage(),this.loseRateLabel.setIgnoreLanguage()},n.updateWinLoseRate=function(e,t){var n=e+t,i=n<=0?0:e/n,a=n<=0?0:t/n,s=this.getRoundedWinLosePercentage(i,a),r=s.win,o=s.lose;this.winRateLabel.setText(r+"%"),this.loseRateLabel.setText(o+"%"),this.updatedRoundedWinPercentage=r,this.updatedRoundedLosePercentage=o},n.initAnimation=function(){this.isPlayingAnimation||(this.winRateLabel.setText("0%"),this.loseRateLabel.setText("0%"))},n.playAnimation=function(){var e=this;this.isPlayingAnimation||(this.isPlayingAnimation=!0,-1!==this.updatedRoundedWinPercentage&&-1!==this.updatedRoundedLosePercentage?(this.scene.tweens.addCounter({from:0,to:this.updatedRoundedWinPercentage,ease:Kg,duration:Hg,onUpdate:function(t){var n=Math.round(t.getValue());e.winRateLabel.setText(n+"%")},onComplete:function(){e.isPlayingAnimation=!1}}),this.scene.tweens.addCounter({from:0,to:this.updatedRoundedLosePercentage,ease:Kg,duration:Hg,onUpdate:function(t){var n=Math.round(t.getValue());e.loseRateLabel.setText(n+"%")}})):this.isPlayingAnimation=!1)},t}(Phaser.GameObjects.Container),om=function(e){function t(t){var n;return(n=e.call(this,t)||this).countLabel=void 0,n.rateLabel=void 0,n.barChart=void 0,n.setSize(Fg,Yg),n.createCountLabel(),n.createRateLabel(),n.createBarChart(),n.alignComponents(),n}(0,r.Z)(t,e);var n=t.prototype;return n.setWinLoseCount=function(e,t){this.countLabel.updateWinLoseCount(e,t),this.barChart.updateWinLoseCount(e,t),this.rateLabel.updateWinLoseRate(e,t)},n.initAnimation=function(){this.barChart.initAnimation(),this.rateLabel.initAnimation()},n.playAnimation=function(){this.barChart.playAnimation(),this.rateLabel.playAnimation()},n.createCountLabel=function(){this.countLabel=new am(this.scene),this.add(this.countLabel)},n.createRateLabel=function(){this.rateLabel=new rm(this.scene),this.add(this.rateLabel)},n.createBarChart=function(){this.barChart=new Xg(this.scene),this.add(this.barChart)},n.alignComponents=function(){Phaser.Display.Align.In.TopCenter(this.countLabel,this),Phaser.Display.Align.In.Center(this.barChart,this),Phaser.Display.Align.In.BottomCenter(this.rateLabel,this)},n.addBackground=function(){var e="win-lose-chart-background";if(!this.scene.textures.exists(e)){var t=this.width,n=this.height,i=this.scene.add.graphics();i.fillStyle(65280,.2),i.fillRect(0,0,t,n),i.generateTexture(e,t,n),i.destroy()}var a=this.scene.add.image(0,0,e);this.add(a)},t}(Phaser.GameObjects.Container),cm=An.Z.GAMEPLAY_DEFAULT.FRAME,hm=function(e){function t(t){var n;return(n=e.call(this,t)||this).chart=void 0,n.tableStats=void 0,n.chart=new om(t),n.tableStats=new Zg(t),n.tableStats.setTableSize(6,2,[95,88],32.5,[-1,1]),n.tableStats.drawRowBorder(),n.setSize(239,n.chart.height+n.tableStats.height),n.add([n.chart,n.tableStats]),Phaser.Display.Align.In.TopCenter(n.chart,(0,$a.Z)(n)),Phaser.Display.Align.To.BottomCenter(n.tableStats,n.chart,15,15),t.add.existing((0,$a.Z)(n)),n}return(0,r.Z)(t,e),t.prototype.setStats=function(e){var t=e.totalGame,n=e.wins,i=e.winsWithoutUndo,a=e.bestScore,s=e.averageScore,r=e.bestWinningTime,o=e.averageWinningTime;this.chart.setWinLoseCount(n,t-n);this.tableStats.setIconSizeData([[16,17],[17,14.5],[13,19.5],[15.5,16],[13.5,19.5],[16,19.5]]),this.tableStats.setTableData([["totalGame",""+t,cm.STATS_FLASH],["winsWithoutUndo",""+i,cm.STATS_CROWN],["bestScore",""+a,cm.STATS_MEDAL_START],["avgScore",""+Math.round(s),cm.STATS_STAR],["bestWinningTime",""+(0,ls.F0)(r,!1),cm.STATS_CUP],["avgWinningTime",""+(0,ls.F0)(o,!1),cm.STATS_TIMER]])},t}(Phaser.GameObjects.Container),um=hm,lm=An.Z.GAMEPLAY_DEFAULT_LANDSCAPE,dm=lm.KEY,pm=lm.FRAME,fm=function(e){function t(t){var n;return(n=e.call(this,t,81.5,33.5)||this).setName("BackButton"),n.createBackground(),n.createContents(),n}(0,r.Z)(t,e);var n=t.prototype;return n.createBackground=function(){var e=this.scene.make.image({key:dm,frame:pm.BUTTON_BACK});e.setWorldSize(this.width,this.height),this.add(e)},n.createContents=function(){var e=new bl(this.scene,{iconTextPadding:5,text:"back",fontSize:12,iconKey:dm,iconFrame:pm.IC_BACK,iconWidth:13.5,iconHeight:12.5});e.text.setMaxSize(55,20,!0),this.add(e),Phaser.Display.Align.In.Center(e,this,0,-1)},t}(Nh.Z),gm=fm,mm=function(e){function t(t,n){var i;return(i=e.call(this,t)||this).config=void 0,i.setSize(n.width,n.height),i.config=n,i.createImage(),i.scene.add.existing((0,$a.Z)(i)),i}return(0,r.Z)(t,e),t.prototype.createImage=function(){var e=this.config,t=e.key,n=e.frame,i=e.width,a=e.height,s=this.scene.add.image(0,0,t,n);s.setOrigin(1,1),s.setWorldSize(i/2,a/2);var r=this.scene.add.image(0,0,t,n);r.setOrigin(0,1).setFlipX(!0),r.setWorldSize(i/2,a/2);var o=this.scene.add.image(0,0,t,n);o.setOrigin(1,0).setFlipY(!0),o.setWorldSize(i/2,a/2);var c=this.scene.add.image(0,0,t,n);c.setOrigin(0,0).setFlip(!0,!0),c.setWorldSize(i/2,a/2),this.add([s,r,o,c])},t}(Phaser.GameObjects.Container),vm=15,ym=An.Z.GAMEPLAY_DEFAULT_LANDSCAPE,Am=ym.KEY,Em=ym.FRAME,Tm=function(e){function t(t){var n;return(n=e.call(this,t,15,15)||this).createButton(),n}return(0,r.Z)(t,e),t.prototype.createButton=function(){var e=this.scene.make.image({key:Am,frame:Em.IC_CLOSE});e.setWorldSize(13,13.5),this.add(e)},t}(Nh.Z),Cm=An.Z.GAMEPLAY_DEFAULT_LANDSCAPE,Sm=Cm.KEY,bm=Cm.FRAME,Im={WIDTH:234,HEIGHT:62},wm={WIDTH:234,HEIGHT:46.5},_m=function(e){function t(t){var n;return(n=e.call(this,t)||this).tab=void 0,n.gameStats=void 0,n.draw1Stat=void 0,n.draw3Stat=void 0,n.closeButton=void 0,n.createBackground(),n.createTitle(),n.createCloseButton(),n.createGameStats(),n.createTab(),n.addMask(),n.createBackButton(),n.y=n.calculateY(),t.add.existing((0,$a.Z)(n)),n}(0,r.Z)(t,e);var n=t.prototype;return n.createBackground=function(){var e=new mm(this.scene,{width:239,height:388,key:Sm,frame:bm.BG_SETTINGS});this.add(e),this.setSize(e.width,e.height)},n.createTitle=function(){var e=new td(this.scene,{width:Im.WIDTH,height:Im.HEIGHT,key:Sm,frame:bm.BG_TOP_LARGE,symmetricType:ed.HORIZONTAL}),t=this.scene.make.bitmapText({font:gc.Z.BOLD_SHADOW_BLUR.KEY,size:this.scene.fontSize(15),text:"STATISTICS",origin:{x:.5,y:.5}});t.setMaxSize(150,25),t.setTint(16449487,16449487,15913325,15913325),this.add([e,t]),Phaser.Display.Align.In.TopCenter(e,this,0,-1.5),Phaser.Display.Align.In.TopCenter(t,e,0,-10)},n.createCloseButton=function(){var e=this;this.closeButton=new Tm(this.scene),this.add(this.closeButton),Phaser.Display.Align.In.TopRight(this.closeButton,this,-6.5,-11.5),this.closeButton.onClick=function(){e.scene.screen.close(cs.o4.GAME_STATS_SCREEN)}},n.createTab=function(){var e,t=this;this.tab=new vg(this.scene,227,20,2),this.add(this.tab),Phaser.Display.Align.In.TopCenter(this.tab,this,0,-32);var n=Be()(e=["draw1Mode","draw3Mode"]).call(e,(function(e,n){var i=t.scene.make.bitmapText({font:gc.Z.BOLD.KEY,size:t.scene.fontSize(10),text:e,origin:{x:.5,y:.5}});return i.setMaxSize(100,20),i}));this.tab.addLabels(n),this.tab.callback=function(e){n.forEach((function(t,n){return t.setTint(e==n?3239751:12306616)})),0===e?(t.scene.tweens.add({targets:t.draw1Stat,alpha:1,x:{from:-375,to:0},duration:200,ease:Phaser.Math.Easing.Sine.InOut}),t.scene.tweens.add({targets:t.draw3Stat,alpha:0,x:{from:0,to:375},duration:200,ease:Phaser.Math.Easing.Sine.InOut})):(t.scene.tweens.add({targets:t.draw1Stat,alpha:0,x:{from:0,to:-375},duration:200,ease:Phaser.Math.Easing.Sine.InOut}),t.scene.tweens.add({targets:t.draw3Stat,alpha:1,x:{from:375,to:0},duration:200,ease:Phaser.Math.Easing.Sine.InOut}))},this.tab.selectTab(0),this.draw1Stat.alpha=1,this.draw3Stat.alpha=0},n.createGameStats=function(){var e=this.scene.add.container(0,0);this.draw1Stat=new um(this.scene),this.draw3Stat=new um(this.scene),this.draw3Stat.setAlpha(0),e.setSize(this.draw3Stat.width,this.draw3Stat.height),e.add(this.draw1Stat),e.add(this.draw3Stat),this.add(e),Phaser.Display.Align.In.TopCenter(e,this,0,-Im.HEIGHT-15),this.gameStats=e},n.createBackButton=function(){var e=this,t=new td(this.scene,{width:wm.WIDTH,height:wm.HEIGHT,key:Sm,frame:bm.BG_SETTINGS_BOTTOM,symmetricType:ed.HORIZONTAL}),n=new gm(this.scene);n.onClick=function(){e.scene.screen.close(cs.o4.GAME_STATS_SCREEN)},this.add([t,n]),Phaser.Display.Align.In.BottomCenter(t,this,0,-1),Phaser.Display.Align.In.Center(n,t,0,2)},n.addMask=function(){var e=this,t=this.scene.make.graphics({fillStyle:{color:255,alpha:0},visible:!1});t.setName("MaskGraphics");var n=this.width,i=this.height;t.fillRoundedRect(-(n-10)/2,-i/2,n-10,i,0),this.gameStats.setMask(t.createGeometryMask()),this.scene.events.on("update",(function(){var n=e.getWorldPosition(),i=n.x,a=n.y;t.setPosition(i,a)}))},n.onScreenClose=function(){this.draw1Stat.chart.barChart.reset(),this.draw3Stat.chart.barChart.reset()},n.calculateY=function(){var e=this.scene.gameZone.height,t=this.scene.footer;return t.y-t.height/2-e/2-this.height/2-vm},t}(Phaser.GameObjects.Container),xm=_m,Pm=function(e){function t(t,n,i,a){var s;return(s=e.call(this,t,n,i,a)||this).scene=void 0,s.fadeInAnimation=void 0,s.gameStatsContainer=void 0,s.fadeOutAnimation=void 0,s.scene=t,s.setDepth(cs.Ks.POPUP),s.gameStatsContainer=new xm(t),s.add(s.gameStatsContainer),s.background.setTint(1315862),s.background.setAlpha(.5),s.gameStatsContainer.setInteractive(),s}(0,r.Z)(t,e);var n=t.prototype;return n.open=function(){e.prototype.open.call(this),this.updateStatistics(),this.runOpenAnimation()},n.updateStatistics=function(){var e=this.gameStatsContainer,t=e.draw1Stat,n=e.draw3Stat,i=this.scene.gameStats,a=i.draw1,s=i.draw3;t.setStats(a),n.setStats(s)},n.close=function(){this.runCloseAnimation(),this.gameStatsContainer.onScreenClose()},n.runOpenAnimation=function(){var e,t;if(null==(e=this.fadeInAnimation)||null==(t=e.tween)||!t.isPlaying()){this.scene.audio.playSound(hs.Z.POPUP_SHOW);var n=this.gameStatsContainer,i=[n.draw1Stat,n.draw3Stat];i.forEach((function(e){e.chart.initAnimation()})),this.fadeInAnimation||(this.fadeInAnimation=new yh.Z({targets:[this],duration:300,onComplete:function(){var e=(0,s.Z)(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i.forEach((function(e){e.chart.playAnimation()}));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()})),this.fadeInAnimation.play()}},n.runCloseAnimation=function(){var t,n,i=this;null!=(t=this.fadeOutAnimation)&&null!=(n=t.tween)&&n.isPlaying()||(this.scene.audio.playSound(hs.Z.POPUP_OFF),this.fadeOutAnimation||(this.fadeOutAnimation=new ef.Z({targets:[this],props:{alpha:0},duration:300,onComplete:function(){e.prototype.close.call(i)}})),this.fadeOutAnimation.play())},t}(GameCore.Screen),km=Pm,Om=GameCore.world.isLandscape()?km:Mg,Lm=Om,Rm={STATUS:{READY:"ready",RUNNING:"running",STOPPED:"stopped"}},Bm=Rm.STATUS,Dm=function(){function e(e){this.state=void 0,this.scene=void 0,this.scene=e}var t=e.prototype;return t.init=function(){this.setState(Bm.READY)},t.start=function(){this.isRunning()||this.setState(Bm.RUNNING)},t.stop=function(){this.isRunning()&&this.setState(Bm.STOPPED)},t.setState=function(e){this.state=e},t.isReady=function(){return this.state===Bm.READY},t.isRunning=function(){return this.state===Bm.RUNNING},t.isStopped=function(){return this.state===Bm.STOPPED},e}(),Nm=Dm,Mm=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n.setBackground=function(){var e=n.scene.theme.getCurrentThemeConfig().backgroundKey;if(n.scene.load.off("filecomplete-image-"+e,n.setBackground),n.scene.textures.exists(e))return n.scene.setBackground(e),n.scene.events.emit(vo.BACKGROUND_CHANGED,e),void n.updateBgApp();n.scene.load.once("filecomplete-image-"+e,n.setBackground)},n.updateCardStyle=function(){var e=n.scene.theme.getCurrentThemeConfig().cardFaceKey;n.scene.load.off("filecomplete-json-"+e,n.updateCardStyle),n.scene.textures.exists(e)?n.scene.gameplay.boardGame.deck.cards.forEach((function(e){return e.updateCardStyle()})):n.scene.load.once("filecomplete-json-"+e,n.updateCardStyle)},n.scene=t,n.setBackground(),n}(0,r.Z)(t,e);var n=t.prototype;return n.updateBgApp=function(){var e=this.scene.theme.getCurrentThemeResources();En.Z.updateAppBg(e.backgroundFile)},n.changeBackground=function(e){this.scene.theme.changeBackground(e),this.setBackground(),this.scene.analytics.event(yn._.THEME_CHANGED,{theme_type:"background",theme_idx:e})},n.changeCardFace=function(e){this.scene.theme.changeCardFace(e),this.updateCardStyle(),this.scene.analytics.event(yn._.THEME_CHANGED,{theme_type:"card_face",theme_idx:e})},n.changeCardBack=function(e){this.scene.theme.changeCardBack(e),this.updateCardStyle(),this.scene.analytics.event(yn._.THEME_CHANGED,{theme_type:"card_back",theme_idx:e})},n.loadAllCardAtlas=function(){var e=this;this.scene.theme.getCardStyleAtlasConfigs().forEach((function(t){var n=t.key,i=t.textureURL,a=t.atlasURL;e.scene.textures.exists(n)||e.scene.load.atlas(n,i,a)})),this.scene.load.start()},n.loadAllBackgrounds=function(){var e=this;this.scene.theme.getBackgroundConfigs().forEach((function(t){var n=t.key,i=t.url;e.scene.textures.exists(n)||e.scene.load.image(n,i)})),this.scene.load.start()},t}(Nm),Gm=Mm,Zm=An.Z.GAMEPLAY_DEFAULT,Fm=Zm.KEY,Um=Zm.FRAME,zm=function(e){function t(t,n,i,a,s,r,o,c){var h;void 0===r&&(r=!0),(h=e.call(this,t,n,i)||this).border=void 0,h.tick=void 0,h.margin=14,h.margin=r?26:16,h.createBorder();var u=h.scene.add.image(0,0,a,s);return u.setWorldSize(o||n,c||i),h.add([u]),r&&h.createBorder1(),h.createTick(),h}(0,r.Z)(t,e);var n=t.prototype;return n.createBorder1=function(){var e=new Mf.Z(this.scene,0,0,this.width+4,this.height+4,10,16579837,0);e.setStrokeStyle(4,16579837),this.add(e)},n.createBorder=function(){var e=this.scene.add.image(0,0,Fm,Um.BG_SELECT_THEME);e.setWorldSize(this.width+this.margin,this.height+this.margin),this.add(e),e.kill(),this.border=e},n.createTick=function(){this.tick=this.scene.add.image(0,0,An.Z.GAMEPLAY_DEFAULT.KEY,An.Z.GAMEPLAY_DEFAULT.FRAME.IC_THEME_SELECT),this.tick.setWorldSize(29,31),this.add(this.tick);var e=28==this.margin?-10:-8;Phaser.Display.Align.In.BottomRight(this.tick,this.border,e,e-1),this.tick.kill()},n.showBorder=function(){this.border.revive(),this.tick.revive()},n.hideBorder=function(){this.border.kill(),this.tick.kill()},t}(Nh.Z),Wm=zm,Ym=function(e){function t(t,n,i,a,s,r,o,c){var h;return void 0===s&&(s=0),void 0===r&&(r=0),void 0===o&&(o=3),void 0===c&&(c=[]),(h=e.call(this,t)||this).margin=void 0,h.viewContainer=void 0,h.items=void 0,h.currentItemInteractive=void 0,h.itemsLength=void 0,h.currentY=void 0,h.offsetTop=void 0,h.offsetBottom=void 0,h.pointerDownX=void 0,h.pointerDownY=void 0,h.lastPointerY=void 0,h.canClickItem=void 0,h.pointerDown=void 0,h.itemsPerRow=void 0,h.distancesInRow=void 0,h.handlePointerDown=function(e){var t=e.worldX,n=e.worldY;h.pointerDown=!0,h.pointerDownX=e.worldX,h.pointerDownY=e.worldY,h.lastPointerY=e.worldY,h.canClickItem=!0,h.items.forEach((function(i){var a=i.item,s=i.onClick;s&&a.getBounds().contains(t,n)&&(a.emit(Phaser.Input.Events.GAMEOBJECT_POINTER_DOWN,e),h.currentItemInteractive={item:a,onClick:s})}))},h.handlePointerMove=function(e){if(h.pointerDown){var t=e.worldX,n=e.worldY;if(Phaser.Math.Distance.Between(h.pointerDownX,h.pointerDownY,t,n)>15&&(h.canClickItem=!1),!h.canClickItem){var i=Math.max(0,h.itemsLength-h.height+h.offsetTop+h.offsetBottom);h.viewContainer.y+=n-h.lastPointerY,h.viewContainer.y=Phaser.Math.Clamp(h.viewContainer.y,-i,0)}if(h.currentItemInteractive){var a=h.currentItemInteractive,s=a.item;a.onClick&&!s.getBounds().contains(t,n)&&(s.emit(Phaser.Input.Events.GAMEOBJECT_POINTER_OUT,e),h.currentItemInteractive=void 0)}h.items.forEach((function(i){var a=i.item,s=i.onClick;s&&a.getBounds().contains(t,n)&&(a.emit(Phaser.Input.Events.GAMEOBJECT_POINTER_MOVE,e),h.currentItemInteractive={item:a,onClick:s})})),h.lastPointerY=n}},h.handleMouseScroll=function(e,t,n){var i=Math.max(0,h.itemsLength-h.height+h.offsetTop+h.offsetBottom);h.viewContainer.y+=-1*n/5,h.viewContainer.y=Phaser.Math.Clamp(h.viewContainer.y,-i,0)},h.handlePointerUp=function(e){h.pointerDown=!1;var t=e.worldX,n=e.worldY;h.items.forEach((function(i){var a=i.item,s=i.onClick;s&&a.getBounds().contains(t,n)&&(a.emit(Phaser.Input.Events.GAMEOBJECT_POINTER_UP,e),h.canClickItem&&GameCore.Utils.Valid.isFunction(s)&&s())})),h.currentItemInteractive=void 0},h.handlePointerOut=function(e){if(h.pointerDown=!1,h.currentItemInteractive){var t=h.currentItemInteractive,n=t.item;t.onClick&&(n.emit(Phaser.Input.Events.GAMEOBJECT_POINTER_OUT,e),h.currentItemInteractive=void 0)}h.currentItemInteractive=void 0},h.setSize(n,i),h.margin=a,h.items=[],h.canClickItem=!0,h.pointerDown=!1,h.itemsLength=0,h.offsetTop=s,h.offsetBottom=r,h.currentY=-i/2+s,h.itemsPerRow=o,h.distancesInRow=c,0==c.length&&(h.distancesInRow=[-h.width/3+8,0,h.width/3-8]),h.viewContainer=t.make.container({}),h.add(h.viewContainer),h.setInteractive(),h.listenEvents(),h}(0,r.Z)(t,e);var n=t.prototype;return n.listenEvents=function(){this.on(Phaser.Input.Events.GAMEOBJECT_POINTER_DOWN,this.handlePointerDown),this.on(Phaser.Input.Events.GAMEOBJECT_POINTER_MOVE,this.handlePointerMove),this.on(Phaser.Input.Events.GAMEOBJECT_POINTER_UP,this.handlePointerUp),this.on(Phaser.Input.Events.GAMEOBJECT_POINTER_OUT,this.handlePointerOut),this.on(Phaser.Input.Events.GAMEOBJECT_POINTER_WHEEL,this.handleMouseScroll)},n.addItem=function(e,t){this.items.push({item:e,onClick:t}),this.viewContainer.add(e);var n=(this.items.length-1)%this.itemsPerRow,i=n+1==this.itemsPerRow,a=this.currentY+e.height/2+this.margin;e.y=a,e.x=this.distancesInRow[n],i&&(this.itemsLength+=e.height+2*this.margin,this.currentY=a+e.height/2+this.margin)},t}(Phaser.GameObjects.Container),Hm=Ym,Km=An.Z.GAMEPLAY_DEFAULT,jm=Km.KEY,Vm=Km.FRAME,Jm=An.Z.THEME_PREVIEW,Xm=function(e){function t(t){var n;return(n=e.call(this,t)||this).bgTitle=void 0,n.title=void 0,n.bg=void 0,n.tab=void 0,n.chooseContainers=void 0,n.currentIdx=0,n.backgroundPreView=void 0,n.cardFacePreView=void 0,n.cardBackPreview=void 0,n.closeButton=void 0,n.createBackground(),n.createTitle(),n.createCloseButton(),n.createTab(),n.createChooseContainer(),n.createBackButton(),n.createBottomLogo(),n.alignContainers(),n.tab.selectTab(0),t.add.existing((0,$a.Z)(n)),n}(0,r.Z)(t,e);var n=t.prototype;return n.createBackground=function(){var e=this.scene.world.getWorldSize(),t=e.width,n=e.height;this.scene.world.isLandscape()&&(t=400),n*=1;var i=new Mf.Z(this.scene,0,0,t,n,0,1665080);this.add(i),this.bg=i,this.setSize(i.width,i.height)},n.createTitle=function(){var e=new td(this.scene,{width:this.bg.width,height:137,key:jm,frame:Vm.TOURNAMENT.HEADER,symmetricType:ed.HORIZONTAL}),t=this.scene.make.bitmapText({font:gc.Z.BOLD_SHADOW_BLUR.KEY,size:this.scene.fontSize(26),text:"THEME",origin:{x:.5,y:.5}});t.setMaxSize(220,40),t.setTint(16449487,16449487,15913325,15913325),this.add([e,t]),Phaser.Display.Align.In.TopCenter(e,this,0,40),Phaser.Display.Align.In.TopCenter(t,e,0,-60),this.bgTitle=e,this.title=t},n.createCloseButton=function(){var e=this;this.closeButton=new kg(this.scene),this.add(this.closeButton),Phaser.Display.Align.In.TopLeft(this.closeButton,this,-16,-16),this.closeButton.onClick=function(){e.scene.screen.close(cs.o4.THEME_SCREEN)}},n.createTab=function(){var e,t=this;this.tab=new vg(this.scene,339,31,3),this.add(this.tab),Phaser.Display.Align.In.TopCenter(this.tab,this,0,-55);var n=Be()(e=["background","cardFace","cardBack"]).call(e,(function(e,n){var i=t.scene.make.bitmapText({font:gc.Z.BOLD.KEY,size:t.scene.fontSize(14),text:e,origin:{x:.5,y:.5}});return i.setCenterAlign(),i.setMaxSize(110,30),i}));this.tab.addLabels(n),this.tab.callback=function(e){n.forEach((function(t,n){return t.setTint(e==n?3239751:12306616)}));var i=t.currentIdx<e?375:-375;t.scene.tweens.add({targets:t.chooseContainers[t.currentIdx],x:t.currentIdx<e?-375:375,alpha:0,duration:200,ease:Phaser.Math.Easing.Sine.InOut}),t.scene.tweens.add({targets:t.chooseContainers[e],x:{from:i,to:0},alpha:1,duration:200,ease:Phaser.Math.Easing.Sine.InOut}),t.currentIdx=e}},n.createChooseContainer=function(){this.chooseContainers=[],this.createBackgroundChoose(),this.createCardFaceChoose(),this.createCardBackChoose(),this.chooseContainers[1].setAlpha(0),this.chooseContainers[2].setAlpha(0)},n.createBackgroundChoose=function(){var e=this,t=new Hm(this.scene,this.bg.width,this.bg.height/1.25,16,0,100,3,[-121.5,0,121.5]);this.add(t),Phaser.Display.Align.In.TopCenter(t,this,0,-110);for(var n=[],i=this.scene.theme.getThemePreview().Background,a=0;a<i.length;a++){var s=i[a]||"blank",r=new Wm(this.scene,92,135,Jm.KEY,s);r.name="Background",n.push(r)}n.forEach((function(a,s){s<i.length&&(a.onClick=function(){},a.disableInteractive()),t.addItem(a,(function(){n.forEach((function(e){return e.hideBorder()})),a.showBorder(),e.scene instanceof eR&&e.scene.themeHandler.changeBackground(s)}))})),this.chooseContainers.push(t),this.backgroundPreView=n},n.createCardFaceChoose=function(){var e=this,t=new Hm(this.scene,this.bg.width,this.bg.height/1.25,16,0,100,3,[-121.5,0,121.5]);this.add(t),Phaser.Display.Align.In.TopCenter(t,this,0,-110);for(var n=[],i=this.scene.theme.getThemePreview().CardFace,a=0;a<i.length;a++){var s=i[a]||"blank",r=new Wm(this.scene,92,135,Jm.KEY,s,!1,93,114);r.name="CardFace",n.push(r)}n.forEach((function(a,s){s<i.length&&(a.onClick=function(){},a.disableInteractive(),t.addItem(a,(function(){n.forEach((function(e){return e.hideBorder()})),a.showBorder(),e.scene instanceof eR&&e.scene.themeHandler.changeCardFace(s)})))})),this.chooseContainers.push(t),this.cardFacePreView=n},n.createCardBackChoose=function(){var e=this,t=new Hm(this.scene,this.bg.width,this.bg.height/1.25,16,0,100,3,[-121.5,0,121.5]);this.add(t),Phaser.Display.Align.In.TopCenter(t,this,0,-110);for(var n=[],i=this.scene.theme.getThemePreview().CardBack,a=0;a<i.length;a++){var s=i[a]||"blank",r=new Wm(this.scene,92,135,Jm.KEY,s,!1);r.name="CardBack",n.push(r)}n.forEach((function(a,s){s<i.length&&(a.onClick=function(){},a.disableInteractive(),t.addItem(a,(function(){n.forEach((function(e){return e.hideBorder()})),a.showBorder(),e.scene instanceof eR&&e.scene.themeHandler.changeCardBack(s)})))})),this.chooseContainers.push(t),this.cardBackPreview=n},n.createBgMask=function(){var e=this.scene.add.rectangle(-this.width/2+10,20,20,this.height-80,16579837),t=this.scene.add.rectangle(this.width/2-10,20,20,this.height-80,16579837);this.add(e),this.add(t)},n.createBackButton=function(){var e=this,t=new td(this.scene,{width:this.bg.width,height:95,key:jm,frame:Vm.BG_SETTINGS_BOTTOM,symmetricType:ed.HORIZONTAL}),n=new wg(this.scene);n.onClick=function(){e.scene.screen.close(cs.o4.THEME_SCREEN)},this.add([t,n]);var i=this.scene.ads.getBannerHeight();Phaser.Display.Align.In.BottomCenter(t,this,0,-i),Phaser.Display.Align.In.TopCenter(n,t,0,-21)},n.alignContainers=function(){this.bringToTop(this.bgTitle),this.bringToTop(this.title),this.bringToTop(this.tab),this.bringToTop(this.closeButton)},n.createBottomLogo=function(){var e=new Tg(this.scene);this.add(e),Phaser.Display.Align.In.BottomCenter(e,this)},t}(Phaser.GameObjects.Container),qm=Xm,Qm=function(e){function t(t,n,i,a){var s;return(s=e.call(this,t,n,i,a)||this).scene=void 0,s.slideInAnimation=void 0,s.slideOutAnimation=void 0,s.fadeInAnimation=void 0,s.themeContainer=void 0,s.scene=t,s.setDepth(cs.Ks.POPUP),s.themeContainer=new qm(t),s.add(s.themeContainer),s.background.setAlpha(0),s}(0,r.Z)(t,e);var n=t.prototype;return n.open=function(){e.prototype.open.call(this),this.themeContainer.setAlpha(1),this.scene.themeHandler.loadAllBackgrounds(),this.scene.themeHandler.loadAllCardAtlas(),this.updateSelected(),this.runOpenAnimation()},n.updateSelected=function(){var e=this.scene.theme.getCurrentIdxConfig(),t=e.backgroundIdx,n=e.cardFaceIdx,i=e.cardBackIdx;this.themeContainer.backgroundPreView[t].showBorder(),this.themeContainer.cardFacePreView[n].showBorder(),this.themeContainer.cardBackPreview[i].showBorder()},n.close=function(){this.runCloseAnimation()},n.runOpenAnimation=function(){var e,t;null!=(e=this.slideInAnimation)&&null!=(t=e.tween)&&t.isPlaying()||(this.scene.audio.playSound(hs.Z.POPUP_SHOW),this.slideInAnimation||(this.slideInAnimation=new pc.Z({targets:[this.themeContainer],props:{x:{from:+this.width/2+this.themeContainer.width/2,to:0,ease:Phaser.Math.Easing.Sine.Out},y:{from:this.height/2-this.themeContainer.height/2,to:this.height/2-this.themeContainer.height/2,ease:Phaser.Math.Easing.Sine.Out}},duration:300})),this.fadeInAnimation||(this.fadeInAnimation=new yh.Z({ease:Phaser.Math.Easing.Sine.InOut,targets:[this],duration:300})),this.slideInAnimation.play(),this.fadeInAnimation.play())},n.runCloseAnimation=function(){var t,n,i=this;null!=(t=this.slideOutAnimation)&&null!=(n=t.tween)&&n.isPlaying()||(this.scene.audio.playSound(hs.Z.POPUP_OFF),this.slideOutAnimation||(this.slideOutAnimation=new pc.Z({targets:[this.themeContainer],props:{y:{from:this.height/2-this.themeContainer.height/2,to:this.height/2-this.themeContainer.height/2},x:{from:0,to:this.width/2+this.themeContainer.width/2,ease:Phaser.Math.Easing.Sine.Out}},duration:300,onComplete:function(){i.setAlpha(1),e.prototype.close.call(i)}})),this.slideOutAnimation.play())},t}(GameCore.Screen),$m=Qm,ev=An.Z.GAMEPLAY_DEFAULT_LANDSCAPE,tv=ev.KEY,nv=ev.FRAME,iv=function(e){function t(t,n,i,a,s,r,o,c){var h;void 0===r&&(r=!0),(h=e.call(this,t,n,i)||this).border=void 0,h.tick=void 0,h.margin=14,h.margin=r?15.6:9.6,h.createBorder();var u=h.scene.add.image(0,0,a,s);return u.setWorldSize(o||n,c||i),h.add([u]),r&&h.createBorder1(),h.createTick(),h}(0,r.Z)(t,e);var n=t.prototype;return n.createBorder1=function(){var e=new Mf.Z(this.scene,0,0,this.width+2.4,this.height+2.4,6,16579837,0);e.setStrokeStyle(2.4,16579837),this.add(e)},n.createBorder=function(){var e=this.scene.add.image(0,1,tv,nv.BG_SELECT_THEME);e.setWorldSize(this.width+this.margin,this.height+this.margin),this.add(e),e.kill(),this.border=e},n.createTick=function(){this.tick=this.scene.add.image(0,0,An.Z.GAMEPLAY_DEFAULT.KEY,An.Z.GAMEPLAY_DEFAULT.FRAME.IC_THEME_SELECT),this.tick.setWorldSize(19,20),this.add(this.tick);var e=16.8==this.margin?-6:-4.8;Phaser.Display.Align.In.BottomRight(this.tick,this.border,e,e-1),this.tick.kill()},n.showBorder=function(){this.border.revive(),this.tick.revive()},n.hideBorder=function(){this.border.kill(),this.tick.kill()},t}(Nh.Z),av=iv,sv=An.Z.GAMEPLAY_DEFAULT_LANDSCAPE,rv=sv.KEY,ov=sv.FRAME,cv=An.Z.THEME_PREVIEW,hv={WIDTH:234,HEIGHT:62},uv={WIDTH:234,HEIGHT:46.5},lv=.6,dv={WIDTH:92*lv,HEIGHT:81},pv=hv.WIDTH-25,fv=function(e){function t(t){var n;return(n=e.call(this,t)||this).bgTitle=void 0,n.title=void 0,n.tab=void 0,n.chooseContainers=void 0,n.currentIdx=0,n.backgroundPreView=void 0,n.cardFacePreView=void 0,n.cardBackPreview=void 0,n.closeButton=void 0,n.createBackground(),n.createTitle(),n.createCloseButton(),n.createTab(),n.createChooseContainer(),n.addMask(),n.createBackButton(),n.alignContainers(),n.tab.selectTab(0),n.y=n.calculateY(),t.add.existing((0,$a.Z)(n)),n}(0,r.Z)(t,e);var n=t.prototype;return n.createBackground=function(){var e=new mm(this.scene,{width:239,height:388,key:rv,frame:ov.BG_SETTINGS});this.add(e),this.setSize(e.width,e.height)},n.createTitle=function(){var e=new td(this.scene,{width:hv.WIDTH,height:hv.HEIGHT,key:rv,frame:ov.BG_TOP_LARGE,symmetricType:ed.HORIZONTAL}),t=this.scene.make.bitmapText({font:gc.Z.BOLD_SHADOW_BLUR.KEY,size:this.scene.fontSize(15),text:"THEME",origin:{x:.5,y:.5}});t.setMaxSize(150,25),t.setTint(16449487,16449487,15913325,15913325),this.add([e,t]),Phaser.Display.Align.In.TopCenter(e,this,0,-1.5),Phaser.Display.Align.In.TopCenter(t,e,0,-10),this.bgTitle=e,this.title=t},n.createCloseButton=function(){var e=this;this.closeButton=new Tm(this.scene),this.add(this.closeButton),Phaser.Display.Align.In.TopRight(this.closeButton,this,-6.5,-11.5),this.closeButton.onClick=function(){e.scene.screen.close(cs.o4.THEME_SCREEN)}},n.createTab=function(){var e,t=this;this.tab=new vg(this.scene,227,20,3),this.add(this.tab),Phaser.Display.Align.In.TopCenter(this.tab,this,0,-32);var n=Be()(e=["background","cardFace","cardBack"]).call(e,(function(e){var n=t.scene.make.bitmapText({font:gc.Z.BOLD.KEY,size:t.scene.fontSize(10),text:e,origin:{x:.5,y:.5}});return n.setCenterAlign(),n.setMaxSize(75,18),n}));this.tab.addLabels(n),this.tab.callback=function(e){n.forEach((function(t,n){return t.setTint(e==n?3239751:12306616)}));var i=t.currentIdx<e?375:-375;t.scene.tweens.add({targets:t.chooseContainers[t.currentIdx],x:t.currentIdx<e?-375:375,alpha:0,duration:200,ease:Phaser.Math.Easing.Sine.InOut}),t.scene.tweens.add({targets:t.chooseContainers[e],x:{from:i,to:0},alpha:1,duration:200,ease:Phaser.Math.Easing.Sine.InOut}),t.currentIdx=e}},n.createChooseContainer=function(){this.chooseContainers=[],this.createBackgroundChoose(),this.createCardFaceChoose(),this.createCardBackChoose(),this.chooseContainers[1].setAlpha(0),this.chooseContainers[2].setAlpha(0)},n.createBackgroundChoose=function(){var e=this,t=new Hm(this.scene,this.width,this.height/1.25,9.6,0,60,3,[-pv/2+dv.WIDTH/2,0,pv/2-dv.WIDTH/2]);this.add(t),Phaser.Display.Align.In.TopCenter(t,this,0,-hv.HEIGHT);for(var n=[],i=this.scene.theme.getThemePreview().Background,a=0;a<i.length;a++){var s=i[a]||"blank",r=new av(this.scene,dv.WIDTH,dv.HEIGHT,cv.KEY,s);r.name="Background",n.push(r)}n.forEach((function(a,s){s<i.length&&(a.onClick=function(){},a.disableInteractive()),t.addItem(a,(function(){n.forEach((function(e){return e.hideBorder()})),a.showBorder(),e.scene instanceof eR&&e.scene.themeHandler.changeBackground(s)}))})),this.chooseContainers.push(t),this.backgroundPreView=n},n.createCardFaceChoose=function(){var e=this,t=new Hm(this.scene,this.width,this.height/1.25,9.6,0,60,3,[-pv/2+92*lv/2,0,pv/2-92*lv/2]);this.add(t),Phaser.Display.Align.In.TopCenter(t,this,0,-hv.HEIGHT);for(var n=[],i=this.scene.theme.getThemePreview().CardFace,a=0;a<i.length;a++){var s=i[a]||"blank",r=new av(this.scene,92*lv,81,cv.KEY,s,!1,55.8,114*lv);r.name="CardFace",n.push(r)}n.forEach((function(a,s){s<i.length&&(a.onClick=function(){},a.disableInteractive(),t.addItem(a,(function(){n.forEach((function(e){return e.hideBorder()})),a.showBorder(),e.scene instanceof eR&&e.scene.themeHandler.changeCardFace(s)})))})),this.chooseContainers.push(t),this.cardFacePreView=n},n.createCardBackChoose=function(){var e=this,t=new Hm(this.scene,this.width,this.height/1.25,9.6,0,60,3,[-pv/2+dv.WIDTH/2,0,pv/2-dv.WIDTH/2]);this.add(t),Phaser.Display.Align.In.TopCenter(t,this,0,-hv.HEIGHT);for(var n=[],i=this.scene.theme.getThemePreview().CardBack,a=0;a<i.length;a++){var s=i[a]||"blank",r=new av(this.scene,dv.WIDTH,dv.HEIGHT,cv.KEY,s,!1);r.name="CardBack",n.push(r)}n.forEach((function(a,s){s<i.length&&(a.onClick=function(){},a.disableInteractive(),t.addItem(a,(function(){n.forEach((function(e){return e.hideBorder()})),a.showBorder(),e.scene instanceof eR&&e.scene.themeHandler.changeCardBack(s)})))})),this.chooseContainers.push(t),this.cardBackPreview=n},n.addMask=function(){var e=this,t=this.scene.make.graphics({fillStyle:{color:255,alpha:0},visible:!1});t.setName("MaskGraphics");var n=this.width,i=this.height;t.fillRoundedRect(-(n-10)/2,-i/2,n-10,i,0),this.chooseContainers[0].setMask(t.createGeometryMask()),this.chooseContainers[1].setMask(t.createGeometryMask()),this.chooseContainers[2].setMask(t.createGeometryMask()),this.scene.events.on("update",(function(){var n=e.getWorldPosition(),i=n.x,a=n.y;t.setPosition(i,a)}))},n.createBgMask=function(){var e=this.scene.add.rectangle(-this.width/2+10,20,20,this.height-80,16579837),t=this.scene.add.rectangle(this.width/2-10,20,20,this.height-80,16579837);this.add(e),this.add(t)},n.createBackButton=function(){var e=this,t=new td(this.scene,{width:uv.WIDTH,height:uv.HEIGHT,key:rv,frame:ov.BG_SETTINGS_BOTTOM,symmetricType:ed.HORIZONTAL}),n=new gm(this.scene);n.onClick=function(){e.scene.screen.close(cs.o4.THEME_SCREEN)},this.add([t,n]),Phaser.Display.Align.In.BottomCenter(t,this,0,-1),Phaser.Display.Align.In.Center(n,t,0,2)},n.alignContainers=function(){this.bringToTop(this.bgTitle),this.bringToTop(this.title),this.bringToTop(this.tab),this.bringToTop(this.closeButton)},n.calculateY=function(){var e=this.scene.gameZone.height,t=this.scene.footer;return t.y-t.height/2-e/2-this.height/2-vm},t}(Phaser.GameObjects.Container),gv=fv,mv=function(e){function t(t,n,i,a){var s;return(s=e.call(this,t,n,i,a)||this).scene=void 0,s.fadeInAnimation=void 0,s.themeContainer=void 0,s.fadeOutAnimation=void 0,s.scene=t,s.setDepth(cs.Ks.POPUP),s.themeContainer=new gv(t),s.add(s.themeContainer),s.background.setTint(1315862),s.background.setAlpha(.5),s}(0,r.Z)(t,e);var n=t.prototype;return n.open=function(){e.prototype.open.call(this),this.themeContainer.setAlpha(1),this.scene.themeHandler.loadAllBackgrounds(),this.scene.themeHandler.loadAllCardAtlas(),this.updateSelected(),this.runOpenAnimation()},n.updateSelected=function(){var e=this.scene.theme.getCurrentIdxConfig(),t=e.backgroundIdx,n=e.cardFaceIdx,i=e.cardBackIdx;this.themeContainer.backgroundPreView[t].showBorder(),this.themeContainer.cardFacePreView[n].showBorder(),this.themeContainer.cardBackPreview[i].showBorder()},n.close=function(){this.runCloseAnimation()},n.runOpenAnimation=function(){var e,t;null!=(e=this.fadeInAnimation)&&null!=(t=e.tween)&&t.isPlaying()||(this.scene.audio.playSound(hs.Z.POPUP_SHOW),this.fadeInAnimation||(this.fadeInAnimation=new yh.Z({targets:[this],duration:300})),this.fadeInAnimation.play())},n.runCloseAnimation=function(){var t,n,i=this;null!=(t=this.fadeOutAnimation)&&null!=(n=t.tween)&&n.isPlaying()||(this.scene.audio.playSound(hs.Z.POPUP_OFF),this.fadeOutAnimation||(this.fadeOutAnimation=new ef.Z({targets:[this],props:{alpha:0},duration:300,onComplete:function(){e.prototype.close.call(i)}})),this.fadeOutAnimation.play())},t}(GameCore.Screen),vv=mv,yv=GameCore.world.isLandscape()?vv:$m,Av=yv,Ev=An.Z.GAMEPLAY_DEFAULT,Tv=Ev.KEY,Cv=Ev.FRAME,Sv=function(e){function t(t){var n;return(n=e.call(this,t,146,50.5)||this).text=void 0,n.icon=void 0,n.setName("NextButton"),n.createBackground(),n.createContents(),n}(0,r.Z)(t,e);var n=t.prototype;return n.setText=function(e){this.text.text=e},n.setIcon=function(e,t,n,i){this.icon.setTexture(e,t),this.icon.setWorldSize(n,i)},n.createBackground=function(){var e=this.scene.make.image({key:Tv,frame:Cv.HOW_TO_PLAY.BUTTON_NEXT});e.setWorldSize(this.width,this.height),this.add(e)},n.createContents=function(){var e=new bl(this.scene,{iconTextPadding:8,text:"next",fontSize:22,iconKey:Tv,iconFrame:Cv.HOW_TO_PLAY.IC_NEXT,iconWidth:15.5,iconHeight:15});e.text.setMaxSize(110,35,!0),this.add(e),this.text=e.text,this.icon=e.icon},t}(Nh.Z),bv=Sv,Iv=An.Z.GAMEPLAY_DEFAULT,wv=Iv.KEY,_v=Iv.FRAME,xv=function(e){function t(t,n){var i;(i=e.call(this,t)||this).numberOfPage=void 0,i.pages=void 0;var a=13*n+5*(n-1);return i.setSize(a,13.5),i.numberOfPage=n,i.createPages(),i.alignPages(5),i.setPage(0),i}(0,r.Z)(t,e);var n=t.prototype;return n.setPage=function(e){e>this.pages.length-1&&(e=this.pages.length-1),this.pages.forEach((function(e){return e.setFrame(_v.HOW_TO_PLAY.PAGE_INACTIVE)})),this.pages[e].setFrame(_v.HOW_TO_PLAY.PAGE_ACTIVE)},n.createPages=function(){this.pages=[];for(var e=0;e<this.numberOfPage;e++){var t=this.scene.add.image(0,0,wv,_v.HOW_TO_PLAY.PAGE_INACTIVE);t.setWorldSize(13,13.5),this.pages.push(t)}this.add(this.pages)},n.alignPages=function(e){var t=this,n=this.pages[0].displayWidth;this.pages.forEach((function(i,a){Phaser.Display.Align.In.LeftCenter(i,t,-(n+e)*a)}))},t}(Phaser.GameObjects.Container),Pv=xv,kv=An.Z.HOW_TO_PLAY,Ov=(An.Z.DEFAULT,An.Z.GAMEPLAY_DEFAULT),Lv=Ov.KEY,Rv=Ov.FRAME,Bv=[{description:"firstTutor",frame:"how_to_play_1"},{description:"secondTutor",frame:"how_to_play_2"},{description:"thirdTutor",frame:"how_to_play_3"},{description:"fourthTutor",frame:"how_to_play_4"}],Dv=function(e){function t(t){var n;return(n=e.call(this,t)||this).nextButton=void 0,n.currentStep=void 0,n.stepContainers=void 0,n.stepImages=void 0,n.pagination=void 0,n.handleNextStep=function(){n.currentStep==Bv.length-1?(n.scene.screen.close(cs.o4.HOW_TO_PLAY_SCREEN),n.scene.analytics.event(yn._.TUTORIAL_COMPLETE)):(n.selectStep(n.currentStep+1),n.scene.analytics.event(yn._.TUTORIAL_STEP,{step:n.currentStep}))},n.setSize(341,464),n.currentStep=0,n.createStepImages(),n.createBackground(),n.createContent(),n.createNextButton(),n.createPagination(),n.createCloseButton(),n.selectStep(0),t.add.existing((0,$a.Z)(n)),n}(0,r.Z)(t,e);var n=t.prototype;return n.selectStep=function(e){e>=Bv.length&&(e=Bv.length-1),e==Bv.length-1?(this.nextButton.setText("done"),this.nextButton.setIcon(Ov.KEY,Ov.FRAME.IC_DONE,20,16.5)):(this.nextButton.setText("next"),this.nextButton.setIcon(Lv,Rv.HOW_TO_PLAY.IC_NEXT,15.5,15)),this.stepContainers.forEach((function(e){return e.kill()})),this.stepContainers[e].revive(),this.stepImages.forEach((function(e){return e.kill()})),this.stepImages[e].revive(),this.pagination.setPage(e),this.currentStep=e},n.createStepImages=function(){var e=this;this.stepImages=[];for(var t=function(t){var n=e.scene.add.container();n.setSize(300*1.005,200*1.005),Phaser.Display.Align.In.Center(n,e,0,22);var i=Bv[t].frame,a=e.scene.add.image(0,0,kv.KEY,i);if(a.setWorldSize(300*1.005,200*1.005),n.add(a),0===t){var s=e.scene.make.bitmapText({font:gc.Z.BOLD.KEY,size:e.scene.fontSize(16),text:"foundations",origin:{x:.5,y:.5}});s.setMaxSize(120,100,!0),n.add([s]);var r=function(){s.setPosition(a.x-s.width/2-20,a.y-75)};r(),s.on("textChanged",(function(){r()}))}e.stepImages.push(n)},n=0;n<Bv.length;n++)t(n);this.add(this.stepImages)},n.createBackground=function(){var e=new td(this.scene,{width:this.width,height:this.height,key:Lv,frame:Rv.HOW_TO_PLAY.BACKGROUND,symmetricType:ed.HORIZONTAL});this.add(e)},n.createContent=function(){var e=this,t=this.scene.make.bitmapText({font:gc.Z.BOLD_SHADOW_BLUR.KEY,size:this.scene.fontSize(26),text:"HOWTOPLAY",origin:{x:.5,y:.5}});t.setMaxSize(280,40),t.setTint(16449487,16449487,15913325,15913325),this.add(t),Phaser.Display.Align.In.TopCenter(t,this,0,-17),this.stepContainers=[];for(var n=0;n<Bv.length;n++){var i=Bv[n].description,a=this.createStepContainer(i);this.stepContainers.push(a)}var s=function(){for(var t=0;t<e.stepContainers.length;t++){var n=0;n<e.stepContainers[t].height&&(n=e.stepContainers[t].height);var i=(100-n)/2+55;Phaser.Display.Align.In.TopCenter(e.stepContainers[t],e,0,-i)}};s(),this.stepContainers[3].on("textChanged",(function(){s()})),this.add(this.stepContainers)},n.createPagination=function(){this.pagination=new Pv(this.scene,4),this.add(this.pagination),Phaser.Display.Align.To.TopCenter(this.pagination,this.nextButton,0,12)},n.createStepContainer=function(e){var t=this.scene.make.bitmapText({font:gc.Z.PRIMARY.KEY,size:this.scene.fontSize(16),text:e,origin:{x:.5,y:0}});return t.setTint(16777215),t.setCenterAlign(),t.setMaxSize(320,95),t},n.createNextButton=function(){var e=new bv(this.scene);e.onClick=this.handleNextStep,Phaser.Display.Align.In.BottomCenter(e,this,0,-20),this.add(e),this.nextButton=e},n.createCloseButton=function(){var e=this,t=new Nh.Z(this.scene,40,40);t.setName("Close"),t.onClick=function(){e.scene.screen.close(cs.o4.HOW_TO_PLAY_SCREEN)};var n=this.scene.add.image(0,0,Lv,Rv.HOW_TO_PLAY.IC_X);n.setWorldSize(16.5,17),t.add(n),Phaser.Display.Align.In.TopRight(t,this,1,-8),this.add([t])},t}(Phaser.GameObjects.Container),Nv=Dv,Mv=function(e){function t(t,n,i,a){var s;return(s=e.call(this,t,n,i,a)||this).slideInAnimation=void 0,s.fadeOutAnimation=void 0,s.howToPlayContainer=void 0,s.setDepth(cs.Ks.POPUP),s.howToPlayContainer=new Nv(t),s.add(s.howToPlayContainer),s.background.setTint(1315862),s.background.setAlpha(.5),s.background.setInteractive(),s}(0,r.Z)(t,e);var n=t.prototype;return n.open=function(){e.prototype.open.call(this),this.howToPlayContainer.selectStep(0),this.scene.analytics.event(yn._.TUTORIAL_BEGIN),this.runOpenAnimation()},n.close=function(){this.runCloseAnimation()},n.runOpenAnimation=function(){var e,t;null!=(e=this.slideInAnimation)&&null!=(t=e.tween)&&t.isPlaying()||(this.scene.audio.playSound(hs.Z.POPUP_SHOW),this.slideInAnimation||(this.slideInAnimation=new yh.Z({targets:[this],duration:300,ease:Phaser.Math.Easing.Sine.InOut})),this.slideInAnimation.play())},n.runCloseAnimation=function(){var t,n,i=this;null!=(t=this.fadeOutAnimation)&&null!=(n=t.tween)&&n.isPlaying()||(this.scene.audio.playSound(hs.Z.POPUP_OFF),this.fadeOutAnimation||(this.fadeOutAnimation=new ef.Z({targets:[this],props:{alpha:0},duration:300,onComplete:function(){e.prototype.close.call(i)}})),this.fadeOutAnimation.play())},t}(GameCore.Screen),Gv=Mv,Zv=An.Z.GAMEPLAY_DEFAULT_LANDSCAPE,Fv=Zv.KEY,Uv=Zv.FRAME,zv=function(e){function t(t){var n;return(n=e.call(this,t,101.5,33.5)||this).text=void 0,n.icon=void 0,n.setName("NextButton"),n.createBackground(),n.createContents(),n}(0,r.Z)(t,e);var n=t.prototype;return n.setText=function(e){this.text.text=e},n.setIcon=function(e,t,n,i){this.icon.setTexture(e,t),this.icon.setWorldSize(n,i)},n.createBackground=function(){var e=this.scene.make.image({key:Fv,frame:Uv.HOW_TO_PLAY.BUTTON_NEXT});e.setWorldSize(this.width,this.height),this.add(e)},n.createContents=function(){var e=new bl(this.scene,{iconTextPadding:5,text:"next",fontSize:12,iconKey:Fv,iconFrame:Uv.HOW_TO_PLAY.IC_NEXT,iconWidth:20,iconHeight:12.5});e.text.setMaxSize(80,20,!0),this.add(e),this.text=e.text,this.icon=e.icon},t}(Nh.Z),Wv=zv,Yv=An.Z.GAMEPLAY_DEFAULT,Hv=Yv.KEY,Kv=Yv.FRAME,jv=function(e){function t(t,n){var i;(i=e.call(this,t)||this).numberOfPage=void 0,i.pages=void 0;var a=9*n+2*(n-1);return i.setSize(a,9),i.numberOfPage=n,i.createPages(),i.alignPages(2),i.setPage(0),i}(0,r.Z)(t,e);var n=t.prototype;return n.setPage=function(e){e>this.pages.length-1&&(e=this.pages.length-1),this.pages.forEach((function(e){return e.setFrame(Kv.HOW_TO_PLAY.PAGE_INACTIVE)})),this.pages[e].setFrame(Kv.HOW_TO_PLAY.PAGE_ACTIVE)},n.createPages=function(){this.pages=[];for(var e=0;e<this.numberOfPage;e++){var t=this.scene.add.image(0,0,Hv,Kv.HOW_TO_PLAY.PAGE_INACTIVE);t.setWorldSize(9,9),this.pages.push(t)}this.add(this.pages)},n.alignPages=function(e){var t=this,n=this.pages[0].displayWidth;this.pages.forEach((function(i,a){Phaser.Display.Align.In.LeftCenter(i,t,-(n+e)*a)}))},t}(Phaser.GameObjects.Container),Vv=jv,Jv=An.Z.HOW_TO_PLAY,Xv=An.Z.GAMEPLAY_DEFAULT_LANDSCAPE,qv=Xv.KEY,Qv=Xv.FRAME,$v=[{description:"firstTutor",frame:"how_to_play_1"},{description:"secondTutor",frame:"how_to_play_2"},{description:"thirdTutor",frame:"how_to_play_3"},{description:"fourthTutor",frame:"how_to_play_4"}],ey=function(e){function t(t){var n;return(n=e.call(this,t)||this).nextButton=void 0,n.currentStep=void 0,n.stepContainers=void 0,n.stepImages=void 0,n.pagination=void 0,n.handleNextStep=function(){n.currentStep==$v.length-1?(n.scene.screen.close(cs.o4.HOW_TO_PLAY_SCREEN),n.scene.analytics.event(yn._.TUTORIAL_COMPLETE)):(n.selectStep(n.currentStep+1),n.scene.analytics.event(yn._.TUTORIAL_STEP,{step:n.currentStep}))},n.setSize(239,388),n.currentStep=0,n.createStepImages(),n.createBackground(),n.createContent(),n.createNextButton(),n.createPagination(),n.createCloseButton(),n.selectStep(0),n.y=n.calculateY(),t.add.existing((0,$a.Z)(n)),n}(0,r.Z)(t,e);var n=t.prototype;return n.selectStep=function(e){e>=$v.length&&(e=$v.length-1),e==$v.length-1?(this.nextButton.setText("done"),this.nextButton.setIcon(qv,Qv.IC_DONE,15,12.5)):(this.nextButton.setText("next"),this.nextButton.setIcon(qv,Qv.HOW_TO_PLAY.IC_NEXT,13,12.5)),this.stepContainers.forEach((function(e){return e.kill()})),this.stepContainers[e].revive(),this.stepImages.forEach((function(e){return e.kill()})),this.stepImages[e].revive(),this.pagination.setPage(e),this.currentStep=e},n.createStepImages=function(){var e=this;this.stepImages=[];for(var t=function(t){var n=e.scene.add.container();n.setSize(224*1.005,141*1.005),Phaser.Display.Align.In.Center(n,e,0,25);var i=$v[t].frame,a=e.scene.add.image(0,0,Jv.KEY,i);if(a.setWorldSize(224*1.005,141*1.005),n.add(a),0===t){var s=e.scene.make.bitmapText({font:gc.Z.BOLD.KEY,size:e.scene.fontSize(11),text:"foundations",origin:{x:.5,y:.5}});s.setMaxSize(80,100,!0),n.add([s]);var r=function(){s.setPosition(a.x-s.width/2-8,a.y-50)};r(),s.on("textChanged",(function(){r()}))}e.stepImages.push(n)},n=0;n<$v.length;n++)t(n);this.add(this.stepImages)},n.createBackground=function(){var e=new td(this.scene,{width:this.width,height:this.height,key:qv,frame:Qv.HOW_TO_PLAY.BACKGROUND,symmetricType:ed.HORIZONTAL});this.add(e)},n.createContent=function(){var e=this,t=this.scene.make.bitmapText({font:gc.Z.BOLD_SHADOW_BLUR.KEY,size:this.scene.fontSize(15),text:"HOWTOPLAY",origin:{x:.5,y:.5}});t.setMaxSize(190,20),t.setTint(16449487,16449487,15913325,15913325),this.add(t),Phaser.Display.Align.In.TopCenter(t,this,0,-14.5),this.stepContainers=[];for(var n=0;n<$v.length;n++){var i=$v[n].description,a=this.createStepContainer(i);this.stepContainers.push(a)}var s=function(){for(var t=0;t<e.stepContainers.length;t++)Phaser.Display.Align.In.TopCenter(e.stepContainers[t],e,0,-35)};s(),this.stepContainers[3].on("textChanged",(function(){s()})),this.add(this.stepContainers)},n.createPagination=function(){this.pagination=new Vv(this.scene,4),this.add(this.pagination),Phaser.Display.Align.To.TopCenter(this.pagination,this.nextButton,0,15)},n.createStepContainer=function(e){var t=this.scene.add.container();t.setSize(this.width,110);var n=this.scene.make.bitmapText({font:gc.Z.PRIMARY.KEY,size:this.scene.fontSize(12),text:e,origin:{x:.5,y:.5}});return n.setMaxSize(220,90),n.setTint(16777215),n.setCenterAlign(),t.add([n]),t},n.createNextButton=function(){var e=new Wv(this.scene);e.onClick=this.handleNextStep,Phaser.Display.Align.In.BottomCenter(e,this,0,-26),this.add(e),this.nextButton=e},n.createCloseButton=function(){var e=this,t=new Nh.Z(this.scene,25,25);t.setName("Close"),t.onClick=function(){e.scene.screen.close(cs.o4.HOW_TO_PLAY_SCREEN)};var n=this.scene.add.image(0,0,qv,Qv.HOW_TO_PLAY.IC_X);n.setWorldSize(13,13.5),t.add(n),Phaser.Display.Align.In.TopRight(t,this,-5,-7),this.add([t])},n.calculateY=function(){var e=this.scene.gameZone.height,t=this.scene.footer;return t.y-t.height/2-e/2-this.height/2-vm},t}(Phaser.GameObjects.Container),ty=ey,ny=function(e){function t(t,n,i,a){var s;return(s=e.call(this,t,n,i,a)||this).slideInAnimation=void 0,s.fadeOutAnimation=void 0,s.howToPlayContainer=void 0,s.setDepth(cs.Ks.POPUP),s.howToPlayContainer=new ty(t),s.add(s.howToPlayContainer),s.background.setTint(1315862),s.background.setAlpha(.5),s.background.setInteractive(),s}(0,r.Z)(t,e);var n=t.prototype;return n.open=function(){e.prototype.open.call(this),this.howToPlayContainer.selectStep(0),this.scene.analytics.event(yn._.TUTORIAL_BEGIN),this.runOpenAnimation()},n.close=function(){this.runCloseAnimation()},n.runOpenAnimation=function(){var e,t;null!=(e=this.slideInAnimation)&&null!=(t=e.tween)&&t.isPlaying()||(this.scene.audio.playSound(hs.Z.POPUP_SHOW),this.slideInAnimation||(this.slideInAnimation=new yh.Z({targets:[this],duration:300,ease:Phaser.Math.Easing.Sine.InOut})),this.slideInAnimation.play())},n.runCloseAnimation=function(){var t,n,i=this;null!=(t=this.fadeOutAnimation)&&null!=(n=t.tween)&&n.isPlaying()||(this.scene.audio.playSound(hs.Z.POPUP_OFF),this.fadeOutAnimation||(this.fadeOutAnimation=new ef.Z({targets:[this],props:{alpha:0},duration:300,onComplete:function(){e.prototype.close.call(i)}})),this.fadeOutAnimation.play())},t}(GameCore.Screen),iy=ny,ay=GameCore.world.isLandscape()?iy:Gv,sy=An.Z.GAMEPLAY_DEFAULT,ry=sy.KEY,oy=sy.FRAME,cy=function(e){function t(t,n,i,a,s){var r;return void 0===s&&(s="horizontal"),(r=e.call(this,t)||this).gradientPoints=[],r.backgrounds=[],r.orientation=void 0,r.orientation=s,r.setSize(n,i),r.setGradientPoints(a),r}(0,r.Z)(t,e);var n=t.prototype;return n.setGradientPoints=function(e){var t=0;t=0===e.length||1===e.length?0:e.length-1,this.gradientPoints=e;var n=this.backgrounds.length;t>n?this.addBackgrounds(t-n):t<n&&this.killLastBackgrounds(n-t),this.updateBackgrounds(),this.alignBackgrounds()},n.updateBackgrounds=function(){var e=this;0!==this.backgrounds.length&&this.gradientPoints.forEach((function(t,n){if(n!==e.gradientPoints.length-1){var i=e.gradientPoints[n+1],a=e.backgrounds[n];t.tint2||(t.tint2=t.tint1),t.alpha2||(t.alpha2=t.alpha1),i.tint2||(i.tint2=i.tint1),i.alpha2||(i.alpha2=i.alpha1),a.revive(),"horizontal"===e.orientation?(a.setTint(t.tint1,i.tint1,t.tint2,i.tint2),a.setAlpha(t.alpha1,i.alpha1,t.alpha2,i.alpha2),a.setWorldSize(e.width*(i.position-t.position),e.height)):(a.setTint(t.tint1,t.tint2,i.tint1,i.tint2),a.setAlpha(t.alpha1,t.alpha2,i.alpha1,i.alpha2),a.setWorldSize(e.width,e.height*(i.position-t.position)))}}))},n.addBackgrounds=function(e){if(!(e<=0))for(var t=0;t<e;t++){var n=this.scene.add.image(0,0,ry,oy.BLANK);"horizontal"===this.orientation?n.setOrigin(0,.5):n.setOrigin(.5,0),this.backgrounds.push(n),this.add(n)}},n.killLastBackgrounds=function(e){if(!(e<=0))for(var t=0;t<e;t++)this.backgrounds[this.backgrounds.length-1-t].kill()},n.alignBackgrounds=function(){var e=this;0!==this.backgrounds.length&&("horizontal"===this.orientation?(Phaser.Display.Align.In.LeftCenter(this.backgrounds[0],this),this.backgrounds.forEach((function(t,n){if(0!==n){var i=e.backgrounds[n-1];Phaser.Display.Align.To.RightCenter(t,i)}}))):(Phaser.Display.Align.In.TopCenter(this.backgrounds[0],this),this.backgrounds.forEach((function(t,n){if(0!==n){var i=e.backgrounds[n-1];Phaser.Display.Align.To.BottomCenter(t,i)}}))))},t}(Phaser.GameObjects.Container),hy=cy,uy=[{position:0,tint1:0,alpha1:0},{position:.25,tint1:0,alpha1:.28},{position:.75,tint1:0,alpha1:.28},{position:1,tint1:0,alpha1:0}],ly=[{position:0,tint1:0,alpha1:0},{position:.25,tint1:0,alpha1:.1},{position:.75,tint1:0,alpha1:.1},{position:1,tint1:0,alpha1:0}],dy=[{position:0,tint1:16777215,alpha1:0},{position:.35,tint1:16777215,alpha1:.25},{position:.65,tint1:16777215,alpha1:.25},{position:1,tint1:16777215,alpha1:0}],py=function(e){function t(t,n,i){var a;return(a=e.call(this,t)||this).background=void 0,a.icon=void 0,a.label=void 0,a.value=void 0,a.setSize(n,i),a.createBackground(),a.createIcon(),a.createLabel(),a.createValue(),t.add.existing((0,$a.Z)(a)),a.value.setIgnoreLanguage(),a}(0,r.Z)(t,e);var n=t.prototype;return n.setIcon=function(e,t,n,i){this.icon.setTexture(e,t),this.icon.setWorldSize(n||24,i||24)},n.setLabel=function(e){this.label.setText(e)},n.setValue=function(e){this.value.setText(e)},n.updateBackgroundGradient=function(e){var t=e?uy:ly;this.background.setGradientPoints(t)},n.createBackground=function(){this.background=new hy(this.scene,this.width,this.height,ly),this.add(this.background)},t}(Phaser.GameObjects.Container),fy=py,gy=function(e){function t(t,n,i){return e.call(this,t,n,i)||this}(0,r.Z)(t,e);var n=t.prototype;return n.createIcon=function(){var e=this.scene.add.image(0,0,"");e.setWorldSize(19.5,22.5),e.setTint(16579837),this.add(e),this.icon=e},n.createLabel=function(){var e=this.scene.make.bitmapText({font:gc.Z.PRIMARY.KEY,size:this.scene.fontSize(19),text:"",origin:{x:0,y:.5}});e.setTint(16579837),e.setMaxSize(135,30),this.add(e),this.label=e},n.createValue=function(){var e=this.scene.make.bitmapText({font:gc.Z.PRIMARY.KEY,size:this.scene.fontSize(19),text:"",origin:{x:0,y:.5}});e.setTint(16580252),e.setRightAlign(),this.add(e),this.value=e},n.alignProperties=function(){Phaser.Display.Align.In.LeftCenter(this.icon,this,-64),Phaser.Display.Align.To.RightCenter(this.label,this.icon,11,2),Phaser.Display.Align.In.LeftCenter(this.value,this,-239,2)},t}(fy),my=gy,vy=function(e){function t(t){var n;return(n=e.call(this,t)||this).score=void 0,n.time=void 0,n.bestTime=void 0,n.moves=void 0,n}(0,r.Z)(t,e);var n=t.prototype;return n.setScore=function(e){this.score.setValue(e)},n.setWinningTime=function(e){this.time.setValue(e)},n.setBestWinningTime=function(e){this.bestTime.setValue(e)},n.setMoves=function(e){this.moves.setValue(e)},n.hideContent=function(){[this.score,this.moves,this.time,this.bestTime].forEach((function(e){return e.setAlpha(0)}))},n.runEntranceAnimationRows=function(){var e=(0,s.Z)(u().mark((function e(){var t,n,i=this;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[this.score,this.moves,this.time,this.bestTime],200,n=Be()(t).call(t,(function(e,t){return new(c())((function(n){i.scene.add.tween({targets:[e],duration:200,delay:200*t/2,ease:Phaser.Math.Easing.Sine.Out,props:{alpha:{from:0,to:1},y:{from:e.y+e.height/2,to:e.y}},onComplete:n})}))})),e.next=5,c().all(n);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),t}(Phaser.GameObjects.Container),yy=An.Z.GAMEPLAY_DEFAULT,Ay=yy.KEY,Ey=yy.FRAME,Ty=function(e){function t(t){var n;return(n=e.call(this,t)||this).setSize(375,224),n.createStats(),n}return(0,r.Z)(t,e),t.prototype.createStats=function(){var e=[],t=this.height/4,n=new my(this.scene,this.width,t);n.setIcon(Ay,Ey.MEDAL_STAR_SHADOW,19.5,22.5),n.setLabel("score"),n.setValue("687"),this.score=n,e.push(n);var i=new my(this.scene,this.width,t);i.setIcon(Ay,Ey.ARROW_SWAP_HORIZONTAL,20,22),i.setLabel("moves"),i.setValue("798"),this.moves=i,e.push(i);var a=new my(this.scene,this.width,t);a.setIcon(Ay,Ey.TIMER,19,22.5),a.setLabel("time"),a.setValue("09:48"),this.time=a,e.push(a);var s=new my(this.scene,this.width,t);s.setIcon(Ay,Ey.IC_BEST_TIME,18,25),s.setLabel("bestTime"),s.setValue("05:30"),this.bestTime=s,e.push(s),this.add(e);for(var r=0;r<e.length;r++){var o=e[r];o.updateBackgroundGradient(r%2==0),o.alignProperties(),Phaser.Display.Align.In.TopCenter(o,this,0,-r*t)}},t}(vy),Cy=function(e){function t(t,n,i){var a;return(a=e.call(this,t,n,i)||this).setName("NewGame"),a.createContent(),a}return(0,r.Z)(t,e),t}(Nh.Z),Sy=Cy,by=An.Z.GAMEPLAY_DEFAULT_LANDSCAPE,Iy=by.KEY,wy=by.FRAME,_y=function(e){function t(t,n,i){return e.call(this,t,n,i)||this}return(0,r.Z)(t,e),t.prototype.createContent=function(){var e=this.scene.make.image({key:Iy,frame:wy.BTN_NEW_GAME});e.setWorldSize(this.width,this.height);var t=new bl(this.scene);t.text.setMaxSize(120,35,!0),this.add([e,t])},t}(Sy),xy=_y,Py=function(e){function t(t){var n;return(n=e.call(this,t)||this).buttons=[],n.newGameButton=void 0,n.shareButton=void 0,n.setSizeContainer(),n.createNewGameButton(),n}(0,r.Z)(t,e);var n=t.prototype;return n.hideContent=function(){this.buttons.forEach((function(e){e.setAlpha(0)}))},n.runEntranceAnimationButtons=function(){var e=(0,s.Z)(u().mark((function e(){var t,n,i=this;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.newGameButton.stopPulsate(),n=Be()(t=this.buttons).call(t,(function(e){return new(c())((function(t){i.scene.add.tween({targets:[e],alpha:1,duration:200,onComplete:function(){e.setDisabled(!1),t(),i.newGameButton.runPulsate()}})}))})),e.next=4,c().all(n);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),t}(Phaser.GameObjects.Container),ky=function(e){function t(t,n,i){var a;return(a=e.call(this,t,n,i)||this).setName("Share"),a.createContent(),a}return(0,r.Z)(t,e),t}(Nh.Z),Oy=ky,Ly=An.Z.GAMEPLAY_DEFAULT,Ry=Ly.KEY,By=Ly.FRAME,Dy=function(e){function t(t,n,i){return e.call(this,t,n,i)||this}return(0,r.Z)(t,e),t.prototype.createContent=function(){var e=this.scene.make.image({key:Ry,frame:By.BTN_SHARE});e.setWorldSize(this.width,this.height);var t=new bl(this.scene,{iconTextPadding:8,text:"Share",iconFrame:By.IC_SHARE,iconWidth:18.5,iconHeight:22});t.text.setMaxSize(90,35,!0),this.add([e,t])},t}(Oy),Ny=function(e){function t(t){return e.call(this,t)||this}(0,r.Z)(t,e);var n=t.prototype;return n.setSizeContainer=function(){this.setSize(375,48)},n.createNewGameButton=function(){var e=new xy(this.scene,161,48);this.add(e),this.buttons.push(e),this.newGameButton=e,Phaser.Display.Align.In.Center(e,this)},n.createShareButton=function(){var e=new Dy(this.scene,123.5,48);this.shareButton=e,Phaser.Display.Align.In.LeftCenter(e,this,-36),this.add([e]),this.buttons.push(e)},t}(Py),My="global",Gy="friends",Zy="you",Fy=375,Uy={WIDTH:375,HEIGHT:105.5},zy=4,Wy={WIDTH:303,HEIGHT:126},Yy={WIDTH:375,HEIGHT:72},Hy=function(e){function t(t){var n;return(n=e.call(this,t)||this).stats=void 0,n.draw=void 0,n.footer=void 0,n.title=void 0,n.handleNewGame=(0,s.Z)(u().mark((function e(){var t;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n.scene instanceof eR)){e.next=7;break}return t=n.scene.gameplay.boardGame.getTime(),e.next=4,n.scene.handlePlaySingle();case 4:if(!(t>6e4)){e.next=7;break}return e.next=7,n.scene.gameplay.handleShowInterstitialAd();case 7:n.scene.screen.close(cs.o4.VICTORY_SCREEN);case 8:case"end":return e.stop()}}),e)}))),n.handleShare=(0,s.Z)(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.scene.storage.dispatch(Bo());case 1:case"end":return e.stop()}}),e)}))),n.setSizeContainer(),n.createTitle(),n.createStats(),n.createFooter(),n.createDevButtons(),n.align(),t.add.existing((0,$a.Z)(n)),n}(0,r.Z)(t,e);var n=t.prototype;return n.setScore=function(e){this.stats.setScore(e)},n.setWinningTime=function(e){this.stats.setWinningTime(e)},n.setBestWinningTime=function(e){this.stats.setBestWinningTime(e)},n.setMoves=function(e){this.stats.setMoves(e)},n.setDraw=function(e){this.draw.setText(e)},n.createDevButtons=function(){GameCore.Utils.Valid.isDebugger()&&this.createCloseButton()},n.hideContent=function(){this.stats.hideContent(),this.footer.hideContent()},n.runEntranceAnimationRows=function(){var e=(0,s.Z)(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c().all([this.stats.runEntranceAnimationRows()]);case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.runEntranceAnimation=function(){var e=(0,s.Z)(u().mark((function e(){var t;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.runEntranceAnimationRows();case 2:return t=this.scene,e.next=5,t.gameplay.finishGame();case 5:return e.next=7,this.footer.runEntranceAnimationButtons();case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),t}(Phaser.GameObjects.Container),Ky=Hy,jy=An.Z.GAMEPLAY_DEFAULT,Vy=jy.KEY,Jy=jy.FRAME,Xy=Yy.HEIGHT,qy=function(e){function t(t){return e.call(this,t)||this}(0,r.Z)(t,e);var n=t.prototype;return n.setSizeContainer=function(){var e=this.scene.gameZone,t=(e.width,e.height);this.setSize(375,t)},n.createTitle=function(){var e=this.scene.add.container(0,0);this.add(e),e.setSize(375,129),this.title=e;var t=this.scene.add.image(0,0,Vy,Jy.VICTORY);t.setWorldSize(333.5,223);var n=this.scene.make.bitmapText({font:gc.Z.BOLD_SHADOW_BLUR.KEY,size:this.scene.fontSize(40),text:"victory",origin:{x:.5,y:.5}});n.setRadius(1e3),n.setMaxSize(205,60),n.setGradientHorizontalTint([{at:0,color:16315097},{at:.5,color:16777215},{at:1,color:16315097}]),e.add([t,n]),Phaser.Display.Align.In.Center(t,e,0,-23.5),Phaser.Display.Align.In.Center(n,t,0,43.5);var i=this.scene.make.bitmapText({font:gc.Z.PRIMARY.KEY,size:this.scene.fontSize(20),text:"standModeDraw1",origin:{x:.5,y:.5}});i.setTint(16777215),i.setMaxSize(330,35),this.draw=i,this.add([i])},n.createStats=function(){this.stats=new Ty(this.scene),this.add(this.stats)},n.createFooter=function(){this.footer=new Ny(this.scene),this.footer.newGameButton.onClick=this.handleNewGame,this.add(this.footer)},n.createCloseButton=function(){var e=this,t=new Nh.Z(this.scene,40,40),n=this.scene.add.image(0,0,Vy,Jy.IC_BG_OFF);n.setWorldSize(40,40);var i=this.scene.make.bitmapText({font:gc.Z.PRIMARY.KEY,size:this.scene.fontSize(10),text:"Close",origin:{x:.5,y:.5}});i.setCenterAlign(),t.add([n,i]),this.add(t),Phaser.Display.Align.In.BottomLeft(t,this,0,-200),t.onClick=function(){e.scene.screen.close(cs.o4.VICTORY_SCREEN)}},n.align=function(){this.width;var e=this.height-this.scene.ads.getBannerHeight()-Xy,t=this.title.height+this.draw.height+this.stats.height+this.footer.height,n=1,i=Math.max((e-(t+177))/2,0);n=(e-t)/177,n=Math.max(Math.min(n,1),.2),Phaser.Display.Align.In.TopCenter(this.title,this,0,-50*n-i),Phaser.Display.Align.To.BottomCenter(this.draw,this.title,0,17*n),Phaser.Display.Align.To.BottomCenter(this.stats,this.draw,0,30*n),Phaser.Display.Align.To.BottomCenter(this.footer,this.stats,0,40*n)},t}(Ky),Qy=qy,$y=function(e){function t(t,n,i,a,s,r){var o;return(o=e.call(this,t,n,i)||this).icon=void 0,o.text=void 0,o.createIcon(a,s),o.createText(r),o.add([o.icon,o.text]),o}(0,r.Z)(t,e);var n=t.prototype;return n.createIcon=function(e,t){this.icon=this.scene.add.image(0,-10,e,t).setTint(16579837),this.icon.setWorldSize(28,28)},n.createText=function(e){this.text=this.scene.make.bitmapText({font:gc.Z.PRIMARY.KEY,size:this.scene.fontSize(Kl.FOOTER),text:e,origin:{x:.5,y:.5},y:14}).setTint(13355979)},t}(Nh.Z),eA=An.Z.GAMEPLAY_DEFAULT,tA=eA.KEY,nA=eA.FRAME,iA=function(e){function t(t,n,i){var a;return(a=e.call(this,t,n||40,i||40,tA,nA.IC_SETTINGS,"settings")||this).setName("Setting"),a.onClick=function(){t.screen.open(cs.o4.SETTINGS_SCREEN)},a.text.setMaxSize(150,30),a}return(0,r.Z)(t,e),t}($y),aA=An.Z.GAMEPLAY_DEFAULT,sA=aA.KEY,rA=aA.FRAME,oA=function(e){function t(t,n,i){var a;return(a=e.call(this,t,n||40,i||40,sA,rA.IC_PLAY,"new")||this).setName("NewDeal"),a}return(0,r.Z)(t,e),t}($y),cA=An.Z.GAMEPLAY_DEFAULT,hA=cA.KEY,uA=cA.FRAME,lA=function(e){function t(t,n,i){var a;return(a=e.call(this,t,n||40,i||40,hA,uA.IC_STATISTICS_FOOTER,"statistics")||this).setName("Statistics"),a}return(0,r.Z)(t,e),t}($y),dA=$l.WIDTH,pA=$l.HEIGHT,fA=$l.HIT_ZONE_BUTTON,gA=An.Z.GAMEPLAY_DEFAULT,mA=gA.KEY,vA=gA.FRAME,yA=function(e){function t(t,n,i){var a;return void 0===n&&(n=!1),void 0===i&&(i=cs.o4.TOURNAMENTS_SCREEN),(a=e.call(this,t)||this).scene=void 0,a.settingsButton=void 0,a.newDealButton=void 0,a.statisticsButton=void 0,a.buttons=[],a.parentScreenKeys=void 0,a.scene=t,a.parentScreenKeys=i,a.setSize(dA,pA),n&&a.createBackgroundMask(),a.createBackground(),a.createButtons(),a}(0,r.Z)(t,e);var n=t.prototype;return n.createBackgroundMask=function(){var e=this.scene.world.getPixelRatio(),t=this.scene.gameZone,n=t.width,i=t.height,a=this.scene.ads.getBannerHeight(),s=this.scene.theme.getCurrentThemeConfig().backgroundKey,r=this.scene.add.image(0,a+this.height/2,s);r.setOrigin(.5,1),r.setWorldSize(n,i),r.setCrop(0,667*e-(76+a)/r.scaleY,this.width*e,i*e),r.setAlpha(1),this.add(r),this.scene.events.on(vo.BACKGROUND_CHANGED,(function(e){r.setTexture(e)}))},n.createBackground=function(){var e=new td(this.scene,{width:this.width,height:this.height,key:mA,frame:vA.FOOTER_BG,symmetricType:ed.HORIZONTAL});this.add(e),e.removeInteractive()},n.createButtons=function(){this.buttons=[],this.createSettingsButton(),this.createNewDealButton(),this.createStatisticsButton(),this.alignButtons()},n.createSettingsButton=function(){this.settingsButton=new iA(this.scene,fA.WIDTH,fA.HEIGHT),this.add(this.settingsButton),this.buttons.push(this.settingsButton)},n.createNewDealButton=function(){this.newDealButton=new oA(this.scene,fA.WIDTH,fA.HEIGHT),this.add(this.newDealButton),GameCore.Configs.Gameplay.ForceJourneyMode?this.newDealButton.kill():this.buttons.push(this.newDealButton)},n.createStatisticsButton=function(){this.statisticsButton=new lA(this.scene,fA.WIDTH,fA.HEIGHT),this.add(this.statisticsButton),GameCore.Configs.Gameplay.ForceJourneyMode?this.statisticsButton.kill():this.buttons.push(this.statisticsButton)},n.alignButtons=function(){if(0!==this.buttons.length)for(var e=this.width/this.buttons.length,t=0;t<this.buttons.length;++t)this.buttons[t].setX((t-this.buttons.length/2+.5)*e),this.buttons[t].setY(2)},t}(Phaser.GameObjects.Container),AA=function(e){function t(t,n,i,a){var r;return(r=e.call(this,t,n,i,a)||this).scene=void 0,r.fadeInAnimation=void 0,r.fadeOutAnimation=void 0,r.slideInAnimation=void 0,r.victoryContainer=void 0,r.footer=void 0,r.closed=!1,r.handleNewDeal=(0,s.Z)(u().mark((function e(){var t;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r.scene.screen.close(cs.o4.PLAY_SCREEN),!(r.scene instanceof eR)){e.next=9;break}return r.scene.journey.isPlayingCurrentLevel()&&r.scene.journey.setIsPlayingCurrentLevel(!1),t=r.scene.gameplay.boardGame.getTime(),e.next=6,r.scene.handlePlaySingle();case 6:if(!(t>6e4)){e.next=9;break}return e.next=9,r.scene.gameplay.handleShowInterstitialAd();case 9:case"end":return e.stop()}}),e)}))),r.setBackground=function(){var e=r.scene.theme.getCurrentThemeConfig().backgroundKey;r.background.setTexture(e);var t=r.scene.gameZone,n=t.width,i=t.height;r.background.setWorldSize(n,i),r.scene.world.isLandscape()&&r.background.setScale(r.background.scaleY,r.background.scaleY),r.scene.events.on(vo.BACKGROUND_CHANGED,(function(e){r.background.setTexture(e),r.background.setWorldSize(n,i),r.scene.world.isLandscape()&&r.background.setScale(r.background.scaleY,r.background.scaleY)}))},r.scene=t,r.setBackground(),r.createVictoryContainer(),r.createFooter(),r.createBottomLogo(),r.setDepth(cs.Ks.POPUP),En.Z.removeObject(r.background),r}(0,r.Z)(t,e);var n=t.prototype;return n.createVictoryContainer=function(){this.victoryContainer=new Qy(this.scene),this.add(this.victoryContainer)},n.createFooter=function(){var e=this;this.footer=new yA(this.scene,!1,cs.o4.VICTORY_SCREEN),this.add(this.footer),this.bringToTop(this.footer),this.footer.setInteractive();var t=this.scene.ads.getBannerHeight(),n=this.scene.gameZone.width>375?-10:0;Phaser.Display.Align.In.BottomCenter(this.footer,this.background,0,-t+n),this.footer.statisticsButton.onClick=function(){e.scene.screen.open(cs.o4.GAME_STATS_SCREEN)},this.footer.newDealButton.onClick=function(){e.scene.screen.open(cs.o4.PLAY_SCREEN)}},n.createBottomLogo=function(){if(!this.scene.game.world.isLandscape()){var e=new Tg(this.scene);this.add(e),Phaser.Display.Align.In.BottomCenter(e,this)}},n.open=function(t){e.prototype.open.call(this,t),this.closed=!1,this.updateVictoryStats(),this.victoryContainer.setAlpha(1),this.victoryContainer.setInteractive(),this.background.setAlpha(1),this.runOpenAnimation(),this.add(this.scene.gameplay.confettiSmallFallDown),this.scene.sys.updateList.add(this.scene.gameplay.confettiSmallFallDown),this.scene.gameplay.confettiSmallFallDown.run(10,0,0)},n.close=function(){this.closed=!0,this.runCloseAnimation(),this.stopConfettiAnimation()},n.updateVictoryStats=function(){var e,t=null==(e=this.data)?void 0:e.list;if(t){var n=t.draw3,i=t.score,a=t.winningMoves,s=t.winningTime,r=this.scene.gameStats.getDraw(n).bestWinningTime;this.victoryContainer.setScore(""+i),this.victoryContainer.setMoves(""+a),this.victoryContainer.setWinningTime((0,ls.F0)(s,!1)),this.victoryContainer.setBestWinningTime((0,ls.F0)(r,!1)),this.victoryContainer.setDraw(n?"standModeDraw3":"standModeDraw1")}},n.runOpenAnimation=function(){var e=(0,s.Z)(u().mark((function e(){var t,n,i,a=this;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==(t=this.slideInAnimation)||null==(n=t.tween)||!n.isPlaying()){e.next=2;break}return e.abrupt("return");case 2:this.scene.audio.playSound(hs.Z.POPUP_SHOW),i=this.scene.ads.getBannerHeight(),this.victoryContainer.setAlpha(0),this.victoryContainer.y=i,this.victoryContainer.hideContent(),this.slideInAnimation||(this.slideInAnimation=new pc.Z({targets:[this.victoryContainer],ease:Phaser.Math.Easing.Back.Out,props:{y:{from:i,to:0},alpha:{from:0,to:1}},duration:300,onComplete:function(){var e=(0,s.Z)(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.victoryContainer.runEntranceAnimation();case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()})),this.fadeInAnimation||(this.fadeInAnimation=new yh.Z({targets:[this],duration:300,ease:Phaser.Math.Easing.Linear})),this.fadeInAnimation.play(),this.slideInAnimation.play();case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.runCloseAnimation=function(){var t,n,i=this;null!=(t=this.fadeOutAnimation)&&null!=(n=t.tween)&&n.isPlaying()||(this.scene.audio.playSound(hs.Z.POPUP_OFF),this.fadeOutAnimation||(this.fadeOutAnimation=new ef.Z({targets:[this],ease:Phaser.Math.Easing.Linear,props:{alpha:0},duration:300,onComplete:function(){e.prototype.close.call(i)}})),this.fadeOutAnimation.play())},n.stopConfettiAnimation=function(){this.scene.gameplay.confettiSmallFallDown.emitter.stop()},t}(GameCore.Screen),EA=AA,TA=function(e){function t(t,n,i){return e.call(this,t,n,i)||this}(0,r.Z)(t,e);var n=t.prototype;return n.createIcon=function(){var e=this.scene.add.image(0,0,"");e.setWorldSize(19.5,22.5),e.setTint(16579837),this.add(e),this.icon=e},n.createLabel=function(){var e=this.scene.make.bitmapText({font:gc.Z.PRIMARY.KEY,size:this.scene.fontSize(12),text:"",origin:{x:0,y:.5}});e.setTint(16579837),this.add(e),e.setMaxSize(100,20),this.label=e},n.createValue=function(){var e=this.scene.make.bitmapText({font:gc.Z.PRIMARY.KEY,size:this.scene.fontSize(12),text:"",origin:{x:1,y:.5}});e.setTint(16580252),e.setRightAlign(),this.add(e),this.value=e},n.alignProperties=function(){Phaser.Display.Align.In.LeftCenter(this.icon,this,-25),Phaser.Display.Align.In.LeftCenter(this.label,this,-48,1),Phaser.Display.Align.In.RightCenter(this.value,this,-25,1)},t}(fy),CA=TA,SA=An.Z.GAMEPLAY_DEFAULT_LANDSCAPE,bA=SA.KEY,IA=SA.FRAME,wA=function(e){function t(t){var n;return(n=e.call(this,t)||this).setSize(236,138),n.createStats(),n}return(0,r.Z)(t,e),t.prototype.createStats=function(){var e=[],t=this.height/4,n=new CA(this.scene,this.width,t);n.setIcon(bA,IA.MEDAL_STAR_SHADOW,16.5,19.5),n.setLabel("score"),n.setValue("687"),this.score=n,e.push(n);var i=new CA(this.scene,this.width,t);i.setIcon(bA,IA.ARROW_SWAP_HORIZONTAL,17,19),i.setLabel("moves"),i.setValue("798"),this.moves=i,e.push(i);var a=new CA(this.scene,this.width,t);a.setIcon(bA,IA.TIMER,16,19.5),a.setLabel("time"),a.setValue("09:48"),this.time=a,e.push(a);var s=new CA(this.scene,this.width,t);s.setIcon(bA,IA.IC_BEST_TIME,13.5,19.5),s.setLabel("bestTime"),s.setValue("05:30"),this.bestTime=s,e.push(s),this.add(e);for(var r=0;r<e.length;r++){var o=e[r];o.updateBackgroundGradient(r%2==0),o.alignProperties(),Phaser.Display.Align.In.TopCenter(o,this,0,-r*t)}},t}(vy),_A=An.Z.GAMEPLAY_DEFAULT_LANDSCAPE,xA=_A.KEY,PA=_A.FRAME,kA=function(e){function t(t,n,i){return e.call(this,t,n,i)||this}return(0,r.Z)(t,e),t.prototype.createContent=function(){var e=this.scene.make.image({key:xA,frame:PA.BTN_NEW_GAME});e.setWorldSize(this.width,this.height);var t=new bl(this.scene,{iconTextPadding:5,fontSize:12,iconKey:xA,iconFrame:PA.IC_NEW,iconWidth:13,iconHeight:14.5});this.add([e,t]),t.text.setMaxSize(80,20,!0),Phaser.Display.Align.In.Center(t,this,0,-1)},t}(Sy),OA=kA,LA=An.Z.GAMEPLAY_DEFAULT_LANDSCAPE,RA=LA.KEY,BA=LA.FRAME,DA=function(e){function t(t,n,i){return e.call(this,t,n,i)||this}return(0,r.Z)(t,e),t.prototype.createContent=function(){var e=this.scene.make.image({key:RA,frame:BA.BTN_SHARE});e.setWorldSize(this.width,this.height);var t=new bl(this.scene,{iconTextPadding:5,fontSize:12,text:"share",iconKey:RA,iconFrame:BA.IC_SHARE,iconWidth:13.5,iconHeight:16.5});t.text.setMaxSize(70,20,!0),this.add([e,t]),Phaser.Display.Align.In.Center(t,this,0,-1)},t}(Oy),NA=An.Z.GAMEPLAY_DEFAULT_LANDSCAPE,MA=NA.KEY,GA=NA.FRAME,ZA=function(e){function t(t){return e.call(this,t)||this}(0,r.Z)(t,e);var n=t.prototype;return n.setSizeContainer=function(){var e=new td(this.scene,{width:234,height:55,key:MA,frame:GA.RESULT.BOTTOM_BAR});this.add(e),this.setSize(e.width,e.height)},n.createNewGameButton=function(){var e=new OA(this.scene,113,33.5);this.add(e),this.buttons.push(e),this.newGameButton=e,Phaser.Display.Align.In.Center(e,this,0,1)},n.createShareButton=function(){var e=new DA(this.scene,95,33.5);this.shareButton=e,Phaser.Display.Align.In.LeftCenter(e,this,-10,1),this.add([e]),this.buttons.push(e)},t}(Py),FA=An.Z.GAMEPLAY_DEFAULT_LANDSCAPE,UA=FA.KEY,zA=FA.FRAME,WA=function(e){function t(t){return e.call(this,t)||this}(0,r.Z)(t,e);var n=t.prototype;return n.setSizeContainer=function(){var e=new td(this.scene,{width:239,height:315.5,key:UA,frame:zA.RESULT.BACKGROUND_SOLO});this.add(e),this.setSize(e.width,e.height)},n.createTitle=function(){var e=this.scene.add.container(0,0);this.add(e),e.setSize(163.5,84.5),this.title=e;var t=this.scene.add.image(0,0,UA,zA.VICTORY);t.setWorldSize(163.5,84.5);var n=this.scene.make.bitmapText({font:gc.Z.BOLD_SHADOW_BLUR.KEY,size:this.scene.fontSize(17),text:"victory",origin:{x:.5,y:.5}});n.setRadius(500),n.setMaxSize(110,30),n.setGradientHorizontalTint([{at:0,color:16315097},{at:.5,color:16777215},{at:1,color:16315097}]),e.add([t,n]),Phaser.Display.Align.In.Center(n,t,0,7);var i=this.scene.make.bitmapText({font:gc.Z.PRIMARY.KEY,size:this.scene.fontSize(12),text:"standModeDraw1",origin:{x:.5,y:.5}});i.setTint(16777215),i.setMaxSize(200,20),this.draw=i,this.add([i])},n.createStats=function(){this.stats=new wA(this.scene),this.add(this.stats)},n.createFooter=function(){this.footer=new ZA(this.scene),this.footer.newGameButton.onClick=this.handleNewGame,this.add(this.footer)},n.createCloseButton=function(){var e=this,t=new Nh.Z(this.scene,40,40),n=this.scene.add.image(0,0,UA,zA.IC_BG_OFF);n.setWorldSize(40,40);var i=this.scene.make.bitmapText({font:gc.Z.PRIMARY.KEY,size:this.scene.fontSize(10),text:"Close",origin:{x:.5,y:.5}});i.setCenterAlign(),t.add([n,i]),this.add(t),Phaser.Display.Align.In.BottomLeft(t,this,50,-200),t.onClick=function(){e.scene.screen.close(cs.o4.VICTORY_SCREEN)}},n.align=function(){Phaser.Display.Align.In.TopCenter(this.title,this,0,36),Phaser.Display.Align.In.TopCenter(this.draw,this,0,-60),Phaser.Display.Align.To.BottomCenter(this.stats,this.draw,0,20),Phaser.Display.Align.In.BottomCenter(this.footer,this,0,-5)},t}(Ky),YA=WA,HA=function(e){function t(t,n,i,a){var s;return(s=e.call(this,t,n,i,a)||this).scene=void 0,s.fadeInAnimation=void 0,s.fadeOutAnimation=void 0,s.slideInAnimation=void 0,s.victoryContainer=void 0,s.setBackground=function(){s.background.setTint(1315862),s.background.setAlpha(.5)},s.scene=t,s.setBackground(),s.createVictoryContainer(),s.setDepth(cs.Ks.POPUP),s}(0,r.Z)(t,e);var n=t.prototype;return n.createVictoryContainer=function(){this.victoryContainer=new YA(this.scene),this.add(this.victoryContainer)},n.open=function(t){e.prototype.open.call(this,t),this.updateVictoryStats(),this.victoryContainer.setAlpha(1),this.victoryContainer.setInteractive(),this.runOpenAnimation(),this.add(this.scene.gameplay.confettiSmallFallDown),this.scene.sys.updateList.add(this.scene.gameplay.confettiSmallFallDown),this.scene.gameplay.confettiSmallFallDown.run(10,0,0)},n.close=function(){this.runCloseAnimation(),this.stopConfettiAnimation()},n.updateVictoryStats=function(){var e,t=null==(e=this.data)?void 0:e.list;if(t){var n=t.draw3,i=t.score,a=t.winningMoves,s=t.winningTime,r=this.scene.gameStats.getDraw(n).bestWinningTime;this.victoryContainer.setScore(""+i),this.victoryContainer.setMoves(""+a),this.victoryContainer.setWinningTime((0,ls.F0)(s,!1)),this.victoryContainer.setBestWinningTime((0,ls.F0)(r,!1)),this.victoryContainer.setDraw(n?"standModeDraw3":"standModeDraw1")}},n.runOpenAnimation=function(){var e=(0,s.Z)(u().mark((function e(){var t,n,i,a=this;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==(t=this.slideInAnimation)||null==(n=t.tween)||!n.isPlaying()){e.next=2;break}return e.abrupt("return");case 2:this.scene.audio.playSound(hs.Z.POPUP_SHOW),i=this.scene.ads.getBannerHeight(),this.victoryContainer.setAlpha(0),this.victoryContainer.y=i,this.victoryContainer.hideContent(),this.slideInAnimation||(this.slideInAnimation=new pc.Z({targets:[this.victoryContainer],ease:Phaser.Math.Easing.Back.Out,props:{y:{from:i,to:0},alpha:{from:0,to:1}},duration:300,onComplete:function(){var e=(0,s.Z)(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.victoryContainer.runEntranceAnimation();case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()})),this.fadeInAnimation||(this.fadeInAnimation=new yh.Z({targets:[this],duration:300,ease:Phaser.Math.Easing.Linear})),this.fadeInAnimation.play(),this.slideInAnimation.play();case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.runCloseAnimation=function(){var t,n,i=this;null!=(t=this.fadeOutAnimation)&&null!=(n=t.tween)&&n.isPlaying()||(this.scene.audio.playSound(hs.Z.POPUP_OFF),this.fadeOutAnimation||(this.fadeOutAnimation=new ef.Z({targets:[this],ease:Phaser.Math.Easing.Linear,props:{alpha:0},duration:300,onComplete:function(){e.prototype.close.call(i)}})),this.fadeOutAnimation.play())},n.stopConfettiAnimation=function(){this.scene.gameplay.confettiSmallFallDown.emitter.stop()},t}(GameCore.Screen),KA=HA,jA=GameCore.world.isLandscape()?KA:EA,VA=function(e){function t(t,n,i){var a;return(a=e.call(this,t,n,i)||this).setName("ReplayButton"),a.createContent(),a}return(0,r.Z)(t,e),t}(Nh.Z),JA=An.Z.GAMEPLAY_DEFAULT,XA=JA.KEY,qA=JA.FRAME,QA=function(e){function t(t,n,i){return e.call(this,t,n,i)||this}return(0,r.Z)(t,e),t.prototype.createContent=function(){var e=new bl(this.scene,{iconTextPadding:8,text:"replay",fontSize:22,iconKey:XA,iconFrame:qA.TOURNAMENT.IC_REPLAY,iconWidth:16,iconHeight:17});e.text.setMaxSize(84,35),e.text.setCenterAlign();var t=this.scene.make.image({key:XA,frame:qA.TOURNAMENT.BUTTON_REPLAY});t.setWorldSize(this.width,this.height),this.add([t,e]),Phaser.Display.Align.In.Center(e,this)},t}(VA),$A=function(e){function t(t){var n;return(n=e.call(this,t)||this).buttons=[],n.newGameButton=void 0,n.replayButton=void 0,n.setSizeContainer(),n.createNewGameButton(),n.createReplayButton(),n}(0,r.Z)(t,e);var n=t.prototype;return n.hideContent=function(){this.buttons.forEach((function(e){e.setAlpha(0)}))},n.runEntranceAnimationButtons=function(){var e=(0,s.Z)(u().mark((function e(){var t,n,i=this;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.newGameButton.stopPulsate(),n=Be()(t=this.buttons).call(t,(function(e){return new(c())((function(t){i.scene.add.tween({targets:[e],alpha:1,duration:200,onComplete:function(){e.setDisabled(!1),t(),i.newGameButton.runPulsate()}})}))})),e.next=4,c().all(n);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),t}(Phaser.GameObjects.Container),eE=function(e){function t(t){return e.call(this,t)||this}(0,r.Z)(t,e);var n=t.prototype;return n.setSizeContainer=function(){this.setSize(375,48)},n.createNewGameButton=function(){var e=new xy(this.scene,161,48);this.add([e]),this.buttons.push(e),this.newGameButton=e,Phaser.Display.Align.In.RightCenter(e,this,-36)},n.createReplayButton=function(){var e=new QA(this.scene,123.5,48);this.replayButton=e,Phaser.Display.Align.In.LeftCenter(e,this,-36),this.add([e]),this.buttons.push(e)},t}($A),tE=function(e){function t(t){var n;return(n=e.call(this,t)||this).stats=void 0,n.draw=void 0,n.footer=void 0,n.title=void 0,n.handleNewGame=(0,s.Z)(u().mark((function e(){var t;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n.scene instanceof eR)){e.next=8;break}return t=n.scene.gameplay.boardGame.getTime(),n.scene.gameplay.boardGame.clearOldBoard(),e.next=5,n.scene.handlePlaySingle();case 5:if(!(t>6e4)){e.next=8;break}return e.next=8,n.scene.gameplay.handleShowInterstitialAd();case 8:n.scene.screen.close(cs.o4.NO_MORE_MOVES_SCREEN);case 9:case"end":return e.stop()}}),e)}))),n.handleReplay=(0,s.Z)(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.scene instanceof eR&&n.scene.gameplay.replayGame(),n.scene.screen.close(cs.o4.NO_MORE_MOVES_SCREEN);case 2:case"end":return e.stop()}}),e)}))),n.setSizeContainer(),n.createTitle(),n.createStats(),n.createFooter(),n.createDevButtons(),n.align(),t.add.existing((0,$a.Z)(n)),n}(0,r.Z)(t,e);var n=t.prototype;return n.setScore=function(e){this.stats.setScore(e)},n.setWinningTime=function(e){this.stats.setWinningTime(e)},n.setBestWinningTime=function(e){this.stats.setBestWinningTime(e)},n.setMoves=function(e){this.stats.setMoves(e)},n.setDraw=function(e){this.draw.setText(e)},n.createDevButtons=function(){GameCore.Utils.Valid.isDebugger()&&this.createCloseButton()},n.hideContent=function(){this.stats.hideContent(),this.footer.hideContent()},n.runEntranceAnimationRows=function(){var e=(0,s.Z)(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c().all([this.stats.runEntranceAnimationRows()]);case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.runEntranceAnimation=function(){var e=(0,s.Z)(u().mark((function e(){var t;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.runEntranceAnimationRows();case 2:return t=this.scene,e.next=5,t.gameplay.finishGame();case 5:return e.next=7,this.footer.runEntranceAnimationButtons();case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),t}(Phaser.GameObjects.Container),nE=tE,iE=An.Z.GAMEPLAY_DEFAULT,aE=iE.KEY,sE=iE.FRAME,rE=Yy.HEIGHT,oE=function(e){function t(t){return e.call(this,t)||this}(0,r.Z)(t,e);var n=t.prototype;return n.setSizeContainer=function(){var e=this.scene.gameZone,t=(e.width,e.height);this.setSize(375,t)},n.createTitle=function(){var e=this.scene.add.container(0,0);this.add(e),e.setSize(375,129),this.title=e;var t=this.scene.add.image(0,0,aE,sE.SPADE);t.setWorldSize(23.5,26.5);var n=this.scene.make.bitmapText({font:gc.Z.BOLD_SHADOW_BLUR.KEY,size:this.scene.fontSize(34),text:"outOfMoves",origin:{x:.5,y:.5}});n.setCenterAlign().setMaxSize(300,50,!0);var i=this.scene.add.image(0,0,aE,sE.HEART);i.setWorldSize(22,26),n.setTint(16777215,16777215,12833246,12833246),e.add([t,n,i]),Phaser.Display.Align.In.Center(n,e,0,35);var a=function(){Phaser.Display.Align.To.LeftCenter(t,n,3,-2),Phaser.Display.Align.To.RightCenter(i,n,2,-2)};a();var s=this.scene.make.bitmapText({font:gc.Z.PRIMARY.KEY,size:this.scene.fontSize(20),text:"standModeDraw1",origin:{x:.5,y:.5}});s.setTint(16777215),s.setMaxSize(330,30),this.draw=s,n.on("textChanged",(function(){a()})),this.add([s])},n.createStats=function(){this.stats=new Ty(this.scene),this.add(this.stats)},n.createFooter=function(){this.footer=new eE(this.scene),this.footer.newGameButton.onClick=this.handleNewGame,this.footer.replayButton.onClick=this.handleReplay,this.add(this.footer)},n.createCloseButton=function(){var e=this,t=new Nh.Z(this.scene,40,40),n=this.scene.add.image(0,0,aE,sE.IC_BG_OFF);n.setWorldSize(40,40);var i=this.scene.make.bitmapText({font:gc.Z.PRIMARY.KEY,size:this.scene.fontSize(10),text:"Close",origin:{x:.5,y:.5}});i.setCenterAlign(),t.add([n,i]),this.add(t),Phaser.Display.Align.In.BottomLeft(t,this,0,-200),t.onClick=function(){e.scene.screen.close(cs.o4.VICTORY_SCREEN)}},n.align=function(){this.width;var e=this.height-this.scene.ads.getBannerHeight()-rE,t=this.title.height+this.draw.height+this.stats.height+this.footer.height,n=1,i=Math.max((e-(t+122))/2,0);n=(e-t)/122,n=Math.max(Math.min(n,1),.2),Phaser.Display.Align.In.TopCenter(this.title,this,0,-25*n-i),Phaser.Display.Align.To.BottomCenter(this.draw,this.title,0,17*n),Phaser.Display.Align.To.BottomCenter(this.stats,this.draw,0,30*n),Phaser.Display.Align.To.BottomCenter(this.footer,this.stats,0,25*n)},t}(nE),cE=oE,hE=function(e){function t(t,n,i,a){var r;return(r=e.call(this,t,n,i,a)||this).scene=void 0,r.fadeInAnimation=void 0,r.fadeOutAnimation=void 0,r.slideInAnimation=void 0,r.outOfMovesContainer=void 0,r.footer=void 0,r.closed=!1,r.handleNewDeal=(0,s.Z)(u().mark((function e(){var t;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r.scene.screen.close(cs.o4.PLAY_SCREEN),!(r.scene instanceof eR)){e.next=9;break}return r.scene.journey.isPlayingCurrentLevel()&&r.scene.journey.setIsPlayingCurrentLevel(!1),t=r.scene.gameplay.boardGame.getTime(),e.next=6,r.scene.handlePlaySingle();case 6:if(!(t>6e4)){e.next=9;break}return e.next=9,r.scene.gameplay.handleShowInterstitialAd();case 9:case"end":return e.stop()}}),e)}))),r.setBackground=function(){var e=r.scene.theme.getCurrentThemeConfig().backgroundKey;r.background.setTexture(e);var t=r.scene.gameZone,n=t.width,i=t.height;r.background.setWorldSize(n,i),r.scene.world.isLandscape()&&r.background.setScale(r.background.scaleY,r.background.scaleY),r.scene.events.on(vo.BACKGROUND_CHANGED,(function(e){r.background.setTexture(e),r.background.setWorldSize(n,i),r.scene.world.isLandscape()&&r.scene.world.isLandscape()&&r.background.setScale(r.background.scaleY,r.background.scaleY)}))},r.scene=t,r.setBackground(),r.createOutOfMovesContainer(),r.createFooter(),r.createBottomLogo(),r.setDepth(cs.Ks.POPUP),En.Z.removeObject(r.background),r}(0,r.Z)(t,e);var n=t.prototype;return n.createOutOfMovesContainer=function(){this.outOfMovesContainer=new cE(this.scene),this.add(this.outOfMovesContainer)},n.createFooter=function(){var e=this;this.footer=new yA(this.scene,!1,cs.o4.NO_MORE_MOVES_SCREEN),this.add(this.footer),this.bringToTop(this.footer),this.footer.setInteractive();var t=this.scene.ads.getBannerHeight(),n=this.scene.gameZone.width>375?-10:0;Phaser.Display.Align.In.BottomCenter(this.footer,this.background,0,-t+n),this.footer.statisticsButton.onClick=function(){e.scene.screen.open(cs.o4.GAME_STATS_SCREEN)},this.footer.newDealButton.onClick=function(){e.scene.screen.open(cs.o4.PLAY_SCREEN)}},n.createBottomLogo=function(){if(!this.scene.world.isLandscape()){var e=new Tg(this.scene);this.add(e),Phaser.Display.Align.In.BottomCenter(e,this)}},n.open=function(t){e.prototype.open.call(this,t),En.Z.openScreen(this,!0),this.updateVictoryStats(),this.outOfMovesContainer.setAlpha(1),this.outOfMovesContainer.setInteractive(),this.background.setAlpha(1),this.runOpenAnimation(),this.closed=!1},n.close=function(){this.closed=!0,this.runCloseAnimation()},n.updateVictoryStats=function(){var e,t=null==(e=this.data)?void 0:e.list;if(t){var n=t.draw3,i=t.score,a=t.winningMoves,s=t.winningTime,r=this.scene.gameStats.getDraw(n).bestWinningTime;this.outOfMovesContainer.setScore(""+i),this.outOfMovesContainer.setMoves(""+a),this.outOfMovesContainer.setWinningTime((0,ls.F0)(s,!1)),this.outOfMovesContainer.setBestWinningTime((0,ls.F0)(r,!1)),this.outOfMovesContainer.setDraw(n?"standModeDraw3":"standModeDraw1")}},n.runOpenAnimation=function(){var e=(0,s.Z)(u().mark((function e(){var t,n,i,a=this;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==(t=this.slideInAnimation)||null==(n=t.tween)||!n.isPlaying()){e.next=2;break}return e.abrupt("return");case 2:this.scene.audio.playSound(hs.Z.POPUP_SHOW),i=this.scene.ads.getBannerHeight(),this.outOfMovesContainer.setAlpha(0),this.outOfMovesContainer.y=i,this.outOfMovesContainer.hideContent(),this.slideInAnimation||(this.slideInAnimation=new pc.Z({targets:[this.outOfMovesContainer],ease:Phaser.Math.Easing.Sine.In,props:{y:{from:i,to:0},alpha:{from:0,to:1}},duration:300,onComplete:function(){var e=(0,s.Z)(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.outOfMovesContainer.runEntranceAnimation();case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()})),this.fadeInAnimation||(this.fadeInAnimation=new yh.Z({targets:[this],duration:300,ease:Phaser.Math.Easing.Sine.In})),this.fadeInAnimation.play(),this.slideInAnimation.play();case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.runCloseAnimation=function(){var t,n,i=this;null!=(t=this.fadeOutAnimation)&&null!=(n=t.tween)&&n.isPlaying()||(this.scene.audio.playSound(hs.Z.POPUP_OFF),this.fadeOutAnimation||(this.fadeOutAnimation=new ef.Z({targets:[this],ease:Phaser.Math.Easing.Sine.Out,props:{alpha:0},duration:300,onComplete:function(){En.Z.closeScreen(i),e.prototype.close.call(i)}})),this.fadeOutAnimation.play())},t}(GameCore.Screen),uE=hE,lE=An.Z.GAMEPLAY_DEFAULT_LANDSCAPE,dE=lE.KEY,pE=lE.FRAME,fE=function(e){function t(t,n,i){return e.call(this,t,n,i)||this}return(0,r.Z)(t,e),t.prototype.createContent=function(){var e=new bl(this.scene,{iconTextPadding:5,text:"replay",fontSize:12,iconKey:dE,iconFrame:pE.TOURNAMENT.IC_REPLAY,iconWidth:13,iconHeight:14.5});e.text.setMaxSize(70,20),e.text.setCenterAlign();var t=this.scene.make.image({key:dE,frame:pE.TOURNAMENT.BUTTON_REPLAY});t.setWorldSize(this.width,this.height),this.add([t,e]),Phaser.Display.Align.In.Center(e,this,0,-1)},t}(VA),gE=An.Z.GAMEPLAY_DEFAULT_LANDSCAPE,mE=gE.KEY,vE=gE.FRAME,yE=function(e){function t(t){return e.call(this,t)||this}(0,r.Z)(t,e);var n=t.prototype;return n.setSizeContainer=function(){var e=new td(this.scene,{width:234,height:55,key:mE,frame:vE.RESULT.BOTTOM_BAR});this.add(e),this.setSize(e.width,e.height)},n.createNewGameButton=function(){var e=new OA(this.scene,113,33.5);this.add([e]),this.buttons.push(e),this.newGameButton=e,Phaser.Display.Align.In.RightCenter(e,this,-10,1)},n.createReplayButton=function(){var e=new fE(this.scene,95,33);this.replayButton=e,Phaser.Display.Align.In.LeftCenter(e,this,-10,1),this.add([e]),this.buttons.push(e)},t}($A),AE=An.Z.GAMEPLAY_DEFAULT_LANDSCAPE,EE=AE.KEY,TE=AE.FRAME,CE=function(e){function t(t){return e.call(this,t)||this}(0,r.Z)(t,e);var n=t.prototype;return n.setSizeContainer=function(){var e=new td(this.scene,{width:239,height:315.5,key:EE,frame:TE.RESULT.BACKGROUND_SOLO});this.add(e),this.setSize(e.width,e.height)},n.createTitle=function(){var e=this.scene.add.container(0,0);this.add(e),e.setSize(375,35),this.title=e;var t=this.scene.add.image(0,0,EE,TE.SPADE);t.setWorldSize(13,15.5);var n=this.scene.make.bitmapText({font:gc.Z.BOLD_SHADOW_BLUR.KEY,size:this.scene.fontSize(19),text:"outOfMoves",origin:{x:.5,y:.5}});n.setCenterAlign().setMaxSize(180,30);var i=this.scene.add.image(0,0,EE,TE.HEART);i.setWorldSize(12.5,15),n.setTint(16777215,16777215,12833246,12833246),e.add([t,n,i]),Phaser.Display.Align.To.LeftCenter(t,n,3,-1),Phaser.Display.Align.To.RightCenter(i,n,2,-1);var a=this.scene.make.bitmapText({font:gc.Z.PRIMARY.KEY,size:this.scene.fontSize(12),text:"standModeDraw1",origin:{x:.5,y:.5}});a.setMaxSize(200,20),a.setTint(16777215),this.draw=a,this.add([a]),n.on("textChanged",(function(){Phaser.Display.Align.To.LeftCenter(t,n,3,-1),Phaser.Display.Align.To.RightCenter(i,n,2,-1)}))},n.createStats=function(){this.stats=new wA(this.scene),this.add(this.stats)},n.createFooter=function(){this.footer=new yE(this.scene),this.footer.newGameButton.onClick=this.handleNewGame,this.footer.replayButton.onClick=this.handleReplay,this.add(this.footer)},n.createCloseButton=function(){var e=this,t=new Nh.Z(this.scene,40,40),n=this.scene.add.image(0,0,EE,TE.IC_BG_OFF);n.setWorldSize(40,40);var i=this.scene.make.bitmapText({font:gc.Z.PRIMARY.KEY,size:this.scene.fontSize(10),text:"Close",origin:{x:.5,y:.5}});i.setCenterAlign(),t.add([n,i]),this.add(t),Phaser.Display.Align.In.BottomLeft(t,this,50,-200),t.onClick=function(){e.scene.screen.close(cs.o4.VICTORY_SCREEN)}},n.align=function(){Phaser.Display.Align.In.TopCenter(this.title,this,0,-17),Phaser.Display.Align.To.BottomCenter(this.draw,this.title,0,10),Phaser.Display.Align.To.BottomCenter(this.stats,this.draw,0,17),Phaser.Display.Align.In.BottomCenter(this.footer,this,0,-5)},t}(nE),SE=CE,bE=function(e){function t(t,n,i,a){var s;return(s=e.call(this,t,n,i,a)||this).scene=void 0,s.fadeInAnimation=void 0,s.fadeOutAnimation=void 0,s.slideInAnimation=void 0,s.outOfMovesContainer=void 0,s.closed=!1,s.handleClickTournaments=function(){s.scene.time.delayedCall(100,(function(){s.closed||s.scene.screen.close(s.name)}))},s.setBackground=function(){s.background.setTint(1315862),s.background.setAlpha(.5)},s.scene=t,s.setBackground(),s.createOutOfMovesContainer(),s.setDepth(cs.Ks.POPUP),s}(0,r.Z)(t,e);var n=t.prototype;return n.createOutOfMovesContainer=function(){this.outOfMovesContainer=new SE(this.scene),this.add(this.outOfMovesContainer)},n.open=function(t){e.prototype.open.call(this,t),En.Z.openScreen(this,!0),this.updateVictoryStats(),this.outOfMovesContainer.setAlpha(1),this.outOfMovesContainer.setInteractive(),this.runOpenAnimation(),this.closed=!1},n.close=function(){this.closed=!0,this.runCloseAnimation()},n.updateVictoryStats=function(){var e,t=null==(e=this.data)?void 0:e.list;if(t){var n=t.draw3,i=t.score,a=t.winningMoves,s=t.winningTime,r=this.scene.gameStats.getDraw(n).bestWinningTime;this.outOfMovesContainer.setScore(""+i),this.outOfMovesContainer.setMoves(""+a),this.outOfMovesContainer.setWinningTime((0,ls.F0)(s,!1)),this.outOfMovesContainer.setBestWinningTime((0,ls.F0)(r,!1)),this.outOfMovesContainer.setDraw(n?"standModeDraw3":"standModeDraw1")}},n.runOpenAnimation=function(){var e=(0,s.Z)(u().mark((function e(){var t,n,i,a=this;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==(t=this.slideInAnimation)||null==(n=t.tween)||!n.isPlaying()){e.next=2;break}return e.abrupt("return");case 2:this.scene.audio.playSound(hs.Z.POPUP_SHOW),i=this.scene.ads.getBannerHeight(),this.outOfMovesContainer.setAlpha(0),this.outOfMovesContainer.y=i,this.outOfMovesContainer.hideContent(),this.slideInAnimation||(this.slideInAnimation=new pc.Z({targets:[this.outOfMovesContainer],ease:Phaser.Math.Easing.Sine.In,props:{y:{from:i,to:0},alpha:{from:0,to:1}},duration:300,onComplete:function(){var e=(0,s.Z)(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.outOfMovesContainer.runEntranceAnimation();case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()})),this.fadeInAnimation||(this.fadeInAnimation=new yh.Z({targets:[this],duration:300,ease:Phaser.Math.Easing.Sine.In})),this.fadeInAnimation.play(),this.slideInAnimation.play();case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.runCloseAnimation=function(){var t,n,i=this;null!=(t=this.fadeOutAnimation)&&null!=(n=t.tween)&&n.isPlaying()||(this.scene.audio.playSound(hs.Z.POPUP_OFF),this.fadeOutAnimation||(this.fadeOutAnimation=new ef.Z({targets:[this],ease:Phaser.Math.Easing.Sine.Out,props:{alpha:0},duration:300,onComplete:function(){En.Z.closeScreen(i),e.prototype.close.call(i)}})),this.fadeOutAnimation.play())},t}(GameCore.Screen),IE=bE,wE=GameCore.world.isLandscape()?IE:uE,_E=An.Z.GAMEPLAY_DEFAULT,xE=_E.KEY,PE=_E.FRAME,kE=function(e){function t(t){var n;return(n=e.call(this,t,130,48.5)||this).setName("OkButton"),n.createBackground(),n.createContents(),n}(0,r.Z)(t,e);var n=t.prototype;return n.createBackground=function(){var e=this.scene.make.image({key:xE,frame:PE.BUTTON_DONE});e.setWorldSize(this.width,this.height),this.add(e)},n.createContents=function(){var e=new bl(this.scene,{iconTextPadding:8,text:"ok",fontSize:22,iconKey:xE,iconFrame:PE.IC_DONE,iconWidth:20,iconHeight:16.5});e.text.setMaxSize(85,35),this.add(e)},t}(Nh.Z),OE=kE,LE=An.Z.GAMEPLAY_DEFAULT,RE=LE.KEY,BE=LE.FRAME,DE=function(e){function t(t){var n;return(n=e.call(this,t)||this).background=void 0,n.message=void 0,n.setSize(341,163.5),n.createBackground(),n.createMessage(),n.createOKButton(),t.add.existing((0,$a.Z)(n)),n}(0,r.Z)(t,e);var n=t.prototype;return n.setMessage=function(e){this.message.setText(e)},n.createBackground=function(){var e=new td(this.scene,{width:this.width,height:this.height,key:RE,frame:BE.BG_NOTIFICATION,symmetricType:ed.HORIZONTAL});this.add(e),this.background=e},n.createMessage=function(){var e=this.scene.make.bitmapText({font:gc.Z.PRIMARY.KEY,size:this.scene.fontSize(20),text:"Hello, world!",origin:{x:.5,y:.5}});e.setCenterAlign(),e.setMaxSize(320,80),Phaser.Display.Align.In.Center(e,this,0,-30),this.message=e,this.add(e)},n.createOKButton=function(){var e=this,t=new OE(this.scene);t.onClick=function(){e.scene.screen.close(cs.o4.NOTIFICATION_SCREEN)},Phaser.Display.Align.In.BottomCenter(t,this.background,0,-16),this.add([t])},t}(Phaser.GameObjects.Container),NE=DE,ME=function(e){function t(t,n,i,a){var s;return(s=e.call(this,t,n,i,a)||this).slideInAnimation=void 0,s.fadeInAnimation=void 0,s.fadeOutAnimation=void 0,s.notificationContainer=void 0,s.setDepth(cs.Ks.POPUP),s.notificationContainer=new NE(t),s.add(s.notificationContainer),s.background.setTint(1315862),s.background.setAlpha(.5),s.background.setInteractive(),s}(0,r.Z)(t,e);var n=t.prototype;return n.open=function(t){e.prototype.open.call(this,t);var n=this.data.list.message,i=void 0===n?"":n;this.notificationContainer.setMessage(i),this.runOpenAnimation()},n.close=function(){this.runCloseAnimation()},n.runOpenAnimation=function(){var e,t;null!=(e=this.fadeInAnimation)&&null!=(t=e.tween)&&t.isPlaying()||(this.scene.audio.playSound(hs.Z.POPUP_SHOW),this.fadeInAnimation||(this.fadeInAnimation=new yh.Z({targets:[this],ease:Phaser.Math.Easing.Sine.InOut,duration:300})),this.fadeInAnimation.play())},n.runCloseAnimation=function(){var t,n,i=this;null!=(t=this.fadeOutAnimation)&&null!=(n=t.tween)&&n.isPlaying()||(this.scene.audio.playSound(hs.Z.POPUP_OFF),this.fadeOutAnimation||(this.fadeOutAnimation=new ef.Z({targets:[this],props:{alpha:0},duration:300,onComplete:function(){e.prototype.close.call(i)}})),this.fadeOutAnimation.play())},t}(GameCore.Screen),GE=ME,ZE=An.Z.GAMEPLAY_DEFAULT_LANDSCAPE,FE=ZE.KEY,UE=ZE.FRAME,zE=function(e){function t(t){var n;return(n=e.call(this,t,81.5,33.5)||this).setName("OkButton"),n.createBackground(),n.createContents(),n}(0,r.Z)(t,e);var n=t.prototype;return n.createBackground=function(){var e=this.scene.make.image({key:FE,frame:UE.RESTART_POPUP.BUTTON_OK});e.setWorldSize(this.width,this.height),this.add(e)},n.createContents=function(){var e=new bl(this.scene,{iconTextPadding:5,text:"ok",fontSize:12,iconKey:FE,iconFrame:UE.RESTART_POPUP.IC_OK,iconWidth:15,iconHeight:12.5});e.text.setMaxSize(50,20),this.add(e)},t}(Nh.Z),WE=zE,YE=An.Z.GAMEPLAY_DEFAULT_LANDSCAPE,HE=YE.KEY,KE=YE.FRAME,jE=function(e){function t(t){var n;return(n=e.call(this,t)||this).background=void 0,n.message=void 0,n.setSize(216,104),n.createBackground(),n.createMessage(),n.createOKButton(),t.add.existing((0,$a.Z)(n)),n}(0,r.Z)(t,e);var n=t.prototype;return n.setMessage=function(e){this.message.setText(e)},n.createBackground=function(){var e=new td(this.scene,{width:this.width,height:this.height,key:HE,frame:KE.BG_NOTIFICATION,symmetricType:ed.HORIZONTAL});this.add(e),this.background=e},n.createMessage=function(){var e=this.scene.make.bitmapText({font:gc.Z.PRIMARY.KEY,size:this.scene.fontSize(12),text:"Hello, world!",origin:{x:.5,y:.5}});e.setCenterAlign(),e.setMaxSize(200,50),Phaser.Display.Align.In.Center(e,this,0,-25),this.message=e,this.add(e)},n.createOKButton=function(){var e=this,t=new WE(this.scene);t.onClick=function(){e.scene.screen.close(cs.o4.NOTIFICATION_SCREEN)},Phaser.Display.Align.In.BottomCenter(t,this.background,0,-16),this.add([t])},t}(Phaser.GameObjects.Container),VE=jE,JE=function(e){function t(t,n,i,a){var s;return(s=e.call(this,t,n,i,a)||this).slideInAnimation=void 0,s.fadeInAnimation=void 0,s.fadeOutAnimation=void 0,s.notificationContainer=void 0,s.setDepth(cs.Ks.POPUP),s.notificationContainer=new VE(t),s.add(s.notificationContainer),s.background.setTint(1315862),s.background.setAlpha(.5),s.background.setInteractive(),s}(0,r.Z)(t,e);var n=t.prototype;return n.open=function(t){e.prototype.open.call(this,t);var n=this.data.list.message,i=void 0===n?"":n;this.notificationContainer.setMessage(i),this.runOpenAnimation()},n.close=function(){this.runCloseAnimation()},n.runOpenAnimation=function(){var e,t;null!=(e=this.fadeInAnimation)&&null!=(t=e.tween)&&t.isPlaying()||(this.scene.audio.playSound(hs.Z.POPUP_SHOW),this.fadeInAnimation||(this.fadeInAnimation=new yh.Z({targets:[this],ease:Phaser.Math.Easing.Sine.InOut,duration:300})),this.fadeInAnimation.play())},n.runCloseAnimation=function(){var t,n,i=this;null!=(t=this.fadeOutAnimation)&&null!=(n=t.tween)&&n.isPlaying()||(this.scene.audio.playSound(hs.Z.POPUP_OFF),this.fadeOutAnimation||(this.fadeOutAnimation=new ef.Z({targets:[this],props:{alpha:0},duration:300,onComplete:function(){e.prototype.close.call(i)}})),this.fadeOutAnimation.play())},t}(GameCore.Screen),XE=JE,qE=GameCore.world.isLandscape()?XE:GE,QE=n(650),$E=Rm.STATUS,eT=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n.gameMode=void 0,n.handleGameModeChanged=function(){n.stop(),n.start()},n.scene=t,n.init(),n}(0,r.Z)(t,e);var n=t.prototype;return n.init=function(){e.prototype.init.call(this),GameCore.Configs.Gameplay.ForceJourneyMode?this.gameMode=Ao.JOURNEY:this.gameMode=Ao.SINGLE,To.instance.on(vo.GAME_MODE_CHANGED,this.handleGameModeChanged)},n.start=function(){if(!this.isRunning()){switch(this.gameMode=To.instance.getGameMode(),this.gameMode){case Ao.SINGLE:this.startSingleMode();break;case Ao.TOURNAMENT:this.startTournamentMode();break;case Ao.CHALLENGE_FRIENDS:this.startChallengeMode();break;case Ao.JOURNEY:this.startJourneyMode();break;default:this.stopChallengeMode(),this.stopTournamentMode(),this.stopJourneyMode()}this.setState($E.RUNNING)}},n.stop=function(){switch(this.gameMode){case Ao.SINGLE:this.stopSingleMode();break;case Ao.TOURNAMENT:this.stopTournamentMode();break;case Ao.CHALLENGE_FRIENDS:this.stopChallengeMode();break;case Ao.JOURNEY:this.stopJourneyMode()}this.setState($E.STOPPED)},n.startSingleMode=function(){this.scene.header.useSingleInfo()},n.stopSingleMode=function(){},n.startTournamentMode=function(){var e=(0,s.Z)(u().mark((function e(){var t,n,i,a,s,r,o,c;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.scene.header.useTournamentInfo(),e.next=3,this.updateTournamentInfo();case 3:return e.prev=3,n=this.scene.storage.getState(),i=Qs(n),a=qs(n),e.next=11,(0,tr.H$)(i,{limit:7}).catch((function(e){return[]}));case 11:if(!((s=e.sent).length<1)){e.next=15;break}return e.abrupt("return");case 15:return r=Be()(s).call(s,(function(e){return e.playerId})),e.next=18,this.scene.profile.requestProfiles(r).catch((function(e){}));case 18:if(o=this.scene.profile.getProfiles(),c=Be()(s).call(s,(function(e){var t=e.playerId,n=e.score,i=e.rank,a=o[t];if(!a)return null;var s=a.name;return{playerId:t,photo:a.photo,score:n,rank:i,name:s}})),!(Gi()(t=Le()(c).call(c,(function(e){return null!==e}))).call(t,(function(e,t){return t.score-e.score})).length<1)){e.next=24;break}return e.abrupt("return");case 24:this.scene.analytics.event(yn._.TOURNAMENT_START,{tournament_id:a,leaderboard_id:i}),e.next=34;break;case 28:if(e.prev=28,e.t0=e.catch(3),!(e.t0 instanceof QE.Z)){e.next=32;break}return e.abrupt("return");case 32:(0,he.tO)(e.t0);case 34:case"end":return e.stop()}}),e,this,[[3,28]])})));return function(){return e.apply(this,arguments)}}(),n.updateTournamentInfo=function(){var e=(0,s.Z)(u().mark((function e(){var t,n,i,a,s;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.scene.storage.getState(),n=Qs(t),e.next=4,(0,tr.wF)(n);case 4:i=e.sent,a=null==i?void 0:i.name,s=GameCore.Utils.String.removeDiacritics(a||"Your tournament"),this.scene.header.tournamentInfo.setTitle(s);case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.stopTournamentMode=function(){},n.startChallengeMode=function(){this.playPLayWithFriendWelcomeAnimation(),this.scene.header.useChallengeInfo();var e=this.scene.header.challengeInfo,t=e.leftBlock,n=e.rightBlock;n.updateData(0,0,0),t.updateData();var i=this.scene.storage.getState(),a=this.scene.player.getPlayer(),s=a.playerId,r=a.photo,o=a.name;n.avatar.loadPhoto(s,r,40),n.nameText.setText(o);var c=_r(i),h=c.playerId,u=c.photo,l=c.name;t.avatar.loadPhoto(h,u,40),h==Pa.playerId?(t.nameText.setText("yourFriend"),t.nameText.setIgnoreLanguage(!1)):(t.nameText.setText(l),t.nameText.setIgnoreLanguage(!0));var d=br(i),p=d.whitePlayerId,f=d.extraData,g=void 0===f?{}:f,m=s===p?g.blackPlayerData:g.whitePlayerData;if(m){var v=m.score,y=m.moves,A=m.time;t.updateData(v,A,y)}},n.playPLayWithFriendWelcomeAnimation=function(){var e=(0,s.Z)(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ou(this.scene,500);case 2:return this.scene.screen.open(cs.o4.PLAY_WITH_FRIEND_WELCOME),e.next=5,ou(this.scene,1200);case 5:this.scene.screen.close(cs.o4.PLAY_WITH_FRIEND_WELCOME);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.stopChallengeMode=function(){},n.startJourneyMode=function(){this.scene.header.useMissionInfo(),this.scene.journey.setIsPlayingCurrentLevel(!0)},n.stopJourneyMode=function(){this.scene.journey.setIsPlayingCurrentLevel(!1)},t}(Nm),tT=eT,nT=function(e){function t(t,n){var i;return(i=e.call(this,t,0,0,gc.Z.BOLD_SHADOW_BLUR.KEY,n,t.fontSize(Kl.TITLE))||this).setOrigin(.5,.5),i.setTint(16449487,16449487,15913325,15913325),i.setMaxSize(280,40),i}return(0,r.Z)(t,e),t}(Phaser.GameObjects.BitmapText),iT=Uy,aT=iT.WIDTH,sT=iT.HEIGHT,rT=An.Z.GAMEPLAY_DEFAULT,oT=rT.KEY,cT=rT.FRAME,hT=function(e){function t(t){var n;return(n=e.call(this,t)||this).background=void 0,n.closeButton=void 0,n.setSize(aT,sT),n.createBackground(),n.createTitle(),n.createCloseButton(),n}(0,r.Z)(t,e);var n=t.prototype;return n.createBackground=function(){this.background=new td(this.scene,{width:this.width,height:this.height,key:oT,frame:cT.TOURNAMENT.HEADER,symmetricType:ed.HORIZONTAL}),this.add(this.background)},n.createTitle=function(){var e=new nT(this.scene,"TOURNAMENTS");this.add(e),Phaser.Display.Align.In.TopCenter(e,this,0,-20)},n.createCloseButton=function(){var e=this;this.closeButton=new kg(this.scene),this.add(this.closeButton),Phaser.Display.Align.In.TopLeft(this.closeButton,this,-16,-16),this.closeButton.onClick=function(){e.scene.screen.close(cs.o4.TOURNAMENTS_SCREEN)}},t}(Phaser.GameObjects.Container),uT=hT,lT=n(463),dT=n.n(lT);function pT(e,t){var n="undefined"!==typeof I()&&_()(e)||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){var n;if(!e)return;if("string"===typeof e)return fT(e,t);var i=T()(n=Object.prototype.toString.call(e)).call(n,8,-1);"Object"===i&&e.constructor&&(i=e.constructor.name);if("Map"===i||"Set"===i)return S()(e);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return fT(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var i=0;return function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function fT(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}for(var gT=zy,mT={playerId:"10",name:"???",photo:"",score:0,rank:0},vT=[],yT=0;yT<gT;yT++)vT.push((0,a.Z)({},mT,{rank:yT+1}));var AT=function(){function e(e,t,n){void 0===n&&(n=gT),this.scene=void 0,this.leaderboardId=void 0,this.maxLeaderCount=gT,this.scene=e,this.leaderboardId=t,this.maxLeaderCount=n}var t=e.prototype;return t.updateLeaderboardId=function(e){this.leaderboardId=e},t.getLeaderPayloadPlaceholders=function(){var e;return P()(e=[]).call(e,vT)},t.getRawLeadersAsync=function(){var e=(0,s.Z)(u().mark((function e(){var t;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.leaderboardId){e.next=2;break}return e.abrupt("return",[]);case 2:return e.next=4,(0,tr.H$)(this.leaderboardId,{limit:this.maxLeaderCount});case 4:return t=e.sent,e.abrupt("return",Le()(t).call(t,(function(e){return null!==e&&void 0!==e})));case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),t.getRawLeadersProfileIds=function(e){for(var t,n=[],i=pT(e);!(t=i()).done;){var a=t.value;if(a){var s=a.playerId;s&&n.push(s)}}return n},t.getProfilesDataAsync=function(){var e=(0,s.Z)(u().mark((function e(t){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.scene.profile.requestProfiles(t);case 2:return e.abrupt("return",this.scene.profile.getProfiles());case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),t.parseRawLeadersIntoPayloadsAsync=function(){var e=(0,s.Z)(u().mark((function e(t){var n,i,a,s,r,o,c,h,l,d,p,f,g,m;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.getRawLeadersProfileIds(t),e.next=3,this.getProfilesDataAsync(n);case 3:i=e.sent,a=[],s=pT(t);case 6:if((r=s()).done){e.next=15;break}if(o=r.value){e.next=10;break}return e.abrupt("continue",13);case 10:c=o.playerId,h=o.score,l=o.rank,(d=i[c])?(p=d.name,f=d.photo,g={playerId:c,photo:f,score:h,rank:l,name:p},a.push(g)):(m={playerId:c,photo:"",score:h,rank:l,name:"Player"},a.push(m));case 13:e.next=6;break;case 15:return e.abrupt("return",a);case 16:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),t.isPlayerInLeaderPayloads=function(e){for(var t,n=this.scene.player.getPlayer().playerId,i=pT(e);!(t=i()).done;){if(t.value.playerId===n)return!0}return!1},t.getYouLeaderPayloadPlaceholder=function(){var e=this.scene.player.getPlayer();return{playerId:e.playerId,photo:e.photo,score:0,rank:0,name:"You"}},t.getYouLeaderPayloadAsync=function(){var e=(0,s.Z)(u().mark((function e(){var t,n,i,a,s,r;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.leaderboardId){e.next=2;break}return e.abrupt("return",null);case 2:return t=this.scene.player.getPlayer(),n=t.playerId,i=t.photo,e.next=5,(0,tr.xB)(n,this.leaderboardId);case 5:if(a=e.sent){e.next=8;break}return e.abrupt("return",null);case 8:return s=a.score,r=a.rank,e.abrupt("return",{playerId:n,photo:i,score:s,rank:r,name:"You"});case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),t.getProcessedLeaderPayloadAsync=function(){var e=(0,s.Z)(u().mark((function e(){var t,n,i,a,s,r,o,h,l,d=this;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.getLeaderPayloadPlaceholders(),n=t.length,e.next=4,c().all([this.getRawLeadersAsync(),this.getYouLeaderPayloadAsync()]);case 4:return i=e.sent,a=i[0],s=i[1],e.next=9,this.parseRawLeadersIntoPayloadsAsync(a);case 9:if(r=e.sent,o=r.length,r.forEach((function(e,n){t[n]=e})),this.isPlayerInLeaderPayloads(r))r.forEach((function(e){e.playerId===d.scene.player.getPlayerId()&&(e.name="You")}));else for(t[h=o<n?o:n-1]=s||this.getYouLeaderPayloadPlaceholder(),l=h+1;l<n;l++)t[l].rank=0;return e.abrupt("return",t);case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),e}(),ET=n(653),TT=An.Z.GAMEPLAY_DEFAULT,CT=TT.KEY,ST=TT.FRAME,bT=function(e){function t(t){var n;return(n=e.call(this,t)||this).medalNo123=void 0,n.customizedMedal=void 0,n.rankLabel=void 0,n.rank=1,n.setSize(18.5,26),n.createMedal123(),n.createCustomizedMedal(),n.createRankLabel(),n}(0,r.Z)(t,e);var n=t.prototype;return n.getRank=function(){return this.rank},n.setRank=function(e){var t=function(e){return e>99?"99+":0===e?"?":e.toString()}(e);switch(this.rank=e,this.rankLabel.setText(t),this.medalNo123.kill(),this.customizedMedal.kill(),t){case"1":this.medalNo123.revive(),this.medalNo123.setFrame(ST.TOURNAMENT.IC_1ST).setWorldSize(15.5,25),this.rankLabel.kill();break;case"2":this.medalNo123.revive(),this.medalNo123.setFrame(ST.TOURNAMENT.IC_2ND).setWorldSize(16,26),this.rankLabel.kill();break;case"3":this.medalNo123.revive(),this.medalNo123.setFrame(ST.TOURNAMENT.IC_3RD).setWorldSize(15.5,25.5),this.rankLabel.kill();break;default:this.customizedMedal.revive(),this.rankLabel.revive()}},n.createMedal123=function(){this.medalNo123=this.scene.add.image(0,0,CT,ST.TOURNAMENT.IC_1ST),this.medalNo123.setWorldSize(15.5,25),this.add(this.medalNo123)},n.createCustomizedMedal=function(){this.customizedMedal=this.scene.add.image(0,0,CT,ST.TOURNAMENT.IC_NORMAL),this.customizedMedal.setWorldSize(18.5,19),this.add(this.customizedMedal)},n.createRankLabel=function(){this.rankLabel=this.scene.make.bitmapText({font:gc.Z.BOLD.KEY,size:this.scene.fontSize(10),origin:{x:.5,y:.5},text:""+this.rank}).setTint(1525537),this.add(this.rankLabel)},t}(Phaser.GameObjects.Container);var IT=bT,wT=An.Z.DEFAULT,_T=(wT.KEY,wT.FRAME,13813441),xT=[{position:0,tint1:0,alpha1:0},{position:1,tint1:0,alpha1:.28}],PT=[{position:0,tint1:0,alpha1:0},{position:1,tint1:0,alpha1:.16}],kT=[{position:0,tint1:16777215,alpha1:0},{position:1,tint1:16777215,alpha1:.28}],OT=function(e){function t(t,n){var i;return void 0===n&&(n=!1),(i=e.call(this,t)||this).scene=void 0,i._isPlayer=!1,i.background=void 0,i.avatar=void 0,i.score=void 0,i.medalIcon=void 0,i.payload=void 0,i.scene=t,i.setSize(162.5,28),i.createBackground(),i.createMedalIcon(),i.createAvatar(),i.createScore(),i.alignComponents(),i.isPlayer=n,i}(0,r.Z)(t,e);var n=t.prototype;return n.getScoreWidth=function(){return this.score.width},n.updateStyle=function(e,t){t||this.isPlayer?(this.background.setGradientPoints(kT),this.avatar.setFrame(An.Z.GAMEPLAY_DEFAULT.FRAME.AVATAR.LEADER_YOU),this.score.setTint(16383467)):(this.avatar.setFrame(An.Z.GAMEPLAY_DEFAULT.FRAME.AVATAR.LEADER_NORMAL),this.score.setTint(_T),e%2==0?this.background.setGradientPoints(PT):this.background.setGradientPoints(xT))},n.createBackground=function(){this.background=new hy(this.scene,this.width,this.height,PT),this.add(this.background)},n.createAvatar=function(){var e=An.Z.GAMEPLAY_DEFAULT,t=e.KEY,n=e.FRAME;this.avatar=new vc(this.scene,{key:t,background:n.AVATAR.LEADER_BG,frame:n.AVATAR.LEADER_YOU,width:21,height:21,backgroundWidth:18,backgroundHeight:18,photoWidth:19,photoHeight:19,loadDelay:100}),this.avatar.update(),this.avatar.loadPhoto(xa.Z.AVATAR.KEY,xa.Z.AVATAR.FILE),this.add(this.avatar)},n.createScore=function(){this.score=this.scene.make.bitmapText({font:gc.Z.BOLD.KEY,size:this.scene.fontSize(14),origin:{x:1,y:.5}}).setTint(_T),this.add(this.score),this.setScore(0)},n.createMedalIcon=function(){this.medalIcon=new IT(this.scene),this.medalIcon.kill(),this.add(this.medalIcon)},n.setScore=function(e){this.score.setText(0===e?"?":""+e)},n.updateData=function(e,t){var n=e.playerId,i=void 0===n?"10":n,a=(e.name,e.photo),s=void 0===a?"":a,r=e.score,o=void 0===r?0:r,c=e.rank,h=void 0===c?0:c;this.payload=e,this.isPlayer=i===this.scene.player.getPlayerId(),this.score.setAlpha(0),this.avatar.setAlpha(0),this.setScore(o),0!==o||this.isPlayer?(this.avatar.loadPhoto(i,s,59),this.medalIcon.setRank(h)):(this.avatar.loadPhoto(xa.Z.AVATAR.KEY,xa.Z.AVATAR.FILE,59),this.medalIcon.setRank(0)),this.updateStyle(t,this.isPlayer),this.medalIcon.revive(),this.playRecentlyUpdatedComponentEntrancesAnimation()},n.alignComponents=function(){Phaser.Display.Align.In.RightCenter(this.score,this,-14),Phaser.Display.Align.In.RightCenter(this.avatar,this,-55),Phaser.Display.Align.In.RightCenter(this.medalIcon,this.avatar,-30),Phaser.Display.Align.In.RightCenter(this.background,this)},n.alignComponentsByScoreWidth=function(e){Phaser.Display.Align.In.RightCenter(this.avatar,this.background,-e-25),Phaser.Display.Align.In.RightCenter(this.medalIcon,this.avatar,-30)},n.playRecentlyUpdatedComponentEntrancesAnimation=function(){this.scene.add.tween({targets:[this.score,this.avatar],props:{alpha:{from:0,to:1}},duration:150})},(0,ce.Z)(t,[{key:"isPlayer",get:function(){return this._isPlayer},set:function(e){this._isPlayer=e,this._isPlayer&&this.updateStyle(0,this._isPlayer)}}]),t}(Phaser.GameObjects.Container);var LT=zy,RT=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n.leaders=[],n.loading=void 0,n.payload=[],n.scene=t,n.createLeaders(),n.alignLeaders(),n.createLoading(),n.resetData(),n.listenEvents(),n}(0,r.Z)(t,e);var n=t.prototype;return n.updateLeaders=function(e){this.payload=e;var t=0;this.leaders.forEach((function(n,i){n.updateData((0,a.Z)({},e[i]),i),e[i].score.toString().length>4&&n.getScoreWidth()>t&&(t=n.getScoreWidth())})),0!=t&&this.leaders.forEach((function(e){e.alignComponentsByScoreWidth(t)}))},n.createLeaders=function(){for(var e=0;e<LT;e++){var t=new OT(this.scene);this.leaders.push(t),e===LT-1&&(t.isPlayer=!0)}this.add(this.leaders)},n.resetData=function(){for(var e=0;e<this.leaders.length;e++){var t=this.leaders[e],n={playerId:e.toString(),photo:"",score:0,rank:e+1,name:"player"};t.updateData(n,e)}},n.alignLeaders=function(){var e=this,t=this.leaders.length,n=t*this.leaders[0].height+0*(t-1);this.setSize(149,n),this.leaders.forEach((function(t,n){0!==n?Phaser.Display.Align.To.BottomCenter(t,e.leaders[n-1],0,0):Phaser.Display.Align.In.TopRight(t,e)}))},n.createLoading=function(){this.loading=new ET.Z(this.scene),this.loading.revive(),this.add(this.loading),this.loading.setScale(.8),Phaser.Display.Align.In.LeftCenter(this.loading,this,15)},n.listenEvents=function(){var e=this;this.scene.events.on("tournament-close",(function(){e.loading.kill()}))},n.hideContent=function(){this.leaders.forEach((function(e){return e.setAlpha(0)}))},n.showContent=function(){this.leaders.forEach((function(e){return e.setAlpha(1)}))},t}(Phaser.GameObjects.Container);var BT=An.Z.DEFAULT,DT=(BT.KEY,BT.FRAME,An.Z.TOURNAMENT_BANNER),NT=DT.KEY,MT=DT.FRAME,GT=function(e){function t(t){var n;return(n=e.call(this,t)||this).background=void 0,n.leaderList=void 0,n.setSize(337,120),n.createBackground(),n.createLeaderList(),n.alignComponents(),n}(0,r.Z)(t,e);var n=t.prototype;return n.updateBackground=function(e){e=void 0==e?0:e%6;var t=MT.BANNER_1;0==e?t=MT.BANNER_1:1==e?t=MT.BANNER_2:2==e?t=MT.BANNER_3:3==e?t=MT.BANNER_4:4==e?t=MT.BANNER_5:5==e&&(t=MT.BANNER_6),this.background.setFrame(t)},n.alignComponents=function(){Phaser.Display.Align.In.Center(this.background,this),Phaser.Display.Align.In.RightCenter(this.leaderList,this)},n.createBackground=function(){this.background=this.scene.add.image(0,0,NT,MT.BANNER_1),this.background.setWorldSize(this.width,this.height),this.add(this.background)},n.createLeaderList=function(){this.leaderList=new RT(this.scene),this.add(this.leaderList)},t}(Phaser.GameObjects.Container),ZT=GT,FT=An.Z.GAMEPLAY_DEFAULT,UT=FT.KEY,zT=FT.FRAME,WT=function(e){function t(t,n){var i;return(i=e.call(this,t)||this).createContent(),i}return(0,r.Z)(t,e),t.prototype.createContent=function(){var e=new bl(this.scene,{iconTextPadding:8,text:"join",fontSize:22,iconKey:UT,iconFrame:zT.TOURNAMENT.IC_CUP,iconWidth:24.5,iconHeight:24.5});e.text.setMaxSize(80,35,!0),this.add(e)},t}(Phaser.GameObjects.Container),YT=WT,HT=An.Z.GAMEPLAY_DEFAULT,KT=HT.KEY,jT=HT.FRAME,VT=function(e){function t(t,n){var i;return(i=e.call(this,t)||this).createContent(),i}return(0,r.Z)(t,e),t.prototype.createContent=function(){var e=new bl(this.scene,{iconTextPadding:5,text:"continue",fontSize:20,iconKey:KT,iconFrame:jT.TOURNAMENT.IC_CUP,iconWidth:24.5,iconHeight:24.5});e.text.setMaxSize(90,35,!0),this.add(e)},t}(Phaser.GameObjects.Container),JT=VT,XT=An.Z.GAMEPLAY_DEFAULT,qT=XT.KEY,QT=XT.FRAME,$T=function(e){return e.JOIN="join",e.CONTINUE="continue",e}({}),eC=function(e){function t(t){var n;return(n=e.call(this,t,123,48)||this)._buttonState=$T.JOIN,n.joinLabel=void 0,n.continueLabel=void 0,n.setName("JoinButton"),n.createBackground(),n.createContent(),n.playAnimation(),n}(0,r.Z)(t,e);var n=t.prototype;return n.createBackground=function(){var e=this.scene.add.image(0,0,qT,QT.TOURNAMENT.JOIN_BUTTON);e.setWorldSize(this.width,this.height),this.add(e)},n.createContent=function(){this.joinLabel=new YT(this.scene,this.displayWidth),this.continueLabel=new JT(this.scene,this.displayWidth),this.continueLabel.kill(),this.add([this.joinLabel,this.continueLabel])},n.playAnimation=function(){new Vc.Z({targets:this.getAll(),duration:1e3,props:{scale:"*=1.05"}}).play()},n.switchState=function(e){if(e!==this._buttonState)switch(e){case $T.JOIN:this._buttonState=$T.JOIN,this.joinLabel.revive(),this.continueLabel.kill();break;case $T.CONTINUE:this._buttonState=$T.CONTINUE,this.joinLabel.kill(),this.continueLabel.revive()}},(0,ce.Z)(t,[{key:"buttonState",get:function(){return this._buttonState}}]),t}(Nh.Z),tC=eC,nC="HMS",iC="DAY",aC="NO_COMPETITION",sC=An.Z.GAMEPLAY_DEFAULT,rC=sC.KEY,oC=sC.FRAME,cC=117.5,hC=19.5,uC=function(e){function t(t){var n;return(n=e.call(this,t)||this).endTime=void 0,n.countdownTimer=void 0,n.timeText=void 0,n.background=void 0,n.clockIcon=void 0,n.updateCountdown=(0,s.Z)(u().mark((function e(){var t,i,a;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=Date.now(),i=1e3*n.endTime-t,a=Math.round(Math.abs(i)/864e5),i<0&&(i=0),0!==i){e.next=8;break}return n.timeText.setText("noCompetitionMessage"),n.updateContainer(aC),e.abrupt("return");case 8:a>=1?(1===a?n.timeText.setText("endInDay"):n.timeText.setText("endInDays"),n.timeText.setTranslationParameter("v",a),n.updateContainer(iC)):(n.timeText.setText("endInMs"),n.timeText.setTranslationParameter("v",(0,ls.F0)(Math.abs(i),!0)),n.updateContainer(nC));case 9:case"end":return e.stop()}}),e)}))),n.setSize(cC,hC),n.createBackground(),n.createClockIcon(),n.createTimeText(),n.createCountdownTimer(),n.alignComponents(),n}(0,r.Z)(t,e);var n=t.prototype;return n.alignComponents=function(){Phaser.Display.Align.In.Center(this.background,this),Phaser.Display.Align.In.LeftCenter(this.clockIcon,this.background,-7,0),Phaser.Display.Align.To.RightCenter(this.timeText,this.clockIcon,3,1)},n.createBackground=function(){this.background=this.scene.add.image(0,0,rC,oC.TOURNAMENT.TIME_BACKGROUND).setTint(0).setOrigin(0,.5),this.background.setWorldSize(this.width,this.height),this.add(this.background)},n.createClockIcon=function(){this.clockIcon=this.scene.add.image(0,0,rC,oC.TOURNAMENT.IC_CLOCK),this.clockIcon.setWorldSize(11,12.5),this.add(this.clockIcon)},n.createTimeText=function(){this.timeText=this.scene.make.bitmapText({font:gc.Z.BOLD.KEY,size:this.scene.fontSize(13),origin:{x:.5,y:.5},text:"End in 10 days"}),this.add(this.timeText)},n.createCountdownTimer=function(){var e;if(void 0!=this.endTime){if(0==this.endTime)return this.timeText.setText("noCompetitionMessage"),void this.updateContainer(aC);null==(e=this.countdownTimer)||e.destroy(),this.countdownTimer=this.scene.time.addEvent({loop:!0,delay:1e3,startAt:1e3,callback:this.updateCountdown})}},n.setCountdown=function(e){this.endTime=e,this.createCountdownTimer()},n.getRemain=function(){if(void 0!=this.endTime){var e=Date.now(),t=1e3*this.endTime-e;return t<0?0:t}},n.updateContainer=function(e){if(e===aC)this.setSize(cC+30,hC),this.background.setWorldSize(this.width,this.height),this.timeText.setFontSize(this.scene.fontSize(12)),this.timeText.setMaxSize(130,18),Phaser.Display.Align.In.Center(this.timeText,this.background),this.clockIcon.kill();else if(this.setSize(cC,hC),this.background.setWorldSize(this.width,this.height),this.clockIcon.revive(),e==nC)this.timeText.setFontSize(this.scene.fontSize(12.5)),this.timeText.setMaxSize(90,18,!0),Phaser.Display.Align.In.LeftCenter(this.clockIcon,this.background,-7,0),Phaser.Display.Align.To.RightCenter(this.timeText,this.clockIcon,3,1);else{this.timeText.setFontSize(this.scene.fontSize(13)),this.timeText.setMaxSize(90,18,!0);var t=(this.width-this.clockIcon.displayWidth-this.timeText.width)/3;Phaser.Display.Align.In.LeftCenter(this.clockIcon,this.background,-t,0),Phaser.Display.Align.To.RightCenter(this.timeText,this.clockIcon,t-1,1)}},t}(Phaser.GameObjects.Container),lC=uC,dC=function(e){function t(t){var n;return(n=e.call(this,t)||this).title=void 0,n.timerContainer=void 0,n.joinButton=void 0,n.setSize(338,73),n.createTitle(),n.createTimeContainer(),n.createJoinButton(),n.alignComponents(),n}(0,r.Z)(t,e);var n=t.prototype;return n.alignComponents=function(){Phaser.Display.Align.In.LeftCenter(this.title,this,-15,-13),Phaser.Display.Align.In.LeftCenter(this.timerContainer,this,-15,13),Phaser.Display.Align.In.RightCenter(this.joinButton,this,-10)},n.createTitle=function(){this.title=this.scene.add.bitmapText(0,0,gc.Z.BOLD_SHADOW_BLUR.KEY,"Tournament A",this.scene.fontSize(20)),this.updateTitle(function(e){void 0===e&&(e=!1);var t=new Date,n=e?Phaser.Math.RND.between(0,11):t.getMonth();return n<3?"Spring":n<6?"Summer":n<9?"Autumn":"Winter"}(!0)+" Tournament"),this.add(this.title)},n.createTimeContainer=function(){this.timerContainer=new lC(this.scene),this.add(this.timerContainer)},n.createJoinButton=function(){this.joinButton=new tC(this.scene),this.add(this.joinButton)},n.updateTitle=function(e){var t=GameCore.Utils.String.removeDiacritics(e);if(this.title.setText(t),this.title.width>175)for(var n=1;n<t.length;n++)if(this.title.setText(t.substring(0,n)+"..."),this.title.width>175){this.title.setText(t.substring(0,n-1)+"...");break}},t}(Phaser.GameObjects.Container),pC=dC;for(var fC=An.Z.GAMEPLAY_DEFAULT,gC=fC.KEY,mC=fC.FRAME,vC=zy,yC={playerId:"10",name:"???",photo:"",score:0,rank:0},AC=[],EC=0;EC<vC;EC++)AC.push((0,a.Z)({},yC,{rank:EC+1}));var TC=function(e){function t(t){var n;return(n=e.call(this,t)||this).background=void 0,n.starIcon=void 0,n.payload=void 0,n.leaderListApiService=void 0,n.header=void 0,n.footer=void 0,n.setSize(345,202),n.createHeader(),n.createBackground(),n.createFooter(),n.createStar(),n.alignComponents(),n.createLeaderListApiService(),n.scene.add.existing((0,$a.Z)(n)),n}(0,r.Z)(t,e);var n=t.prototype;return n.createBackground=function(){this.background=this.scene.make.image({key:gC,frame:mC.TOURNAMENT.BLOCK_BACKGROUND}),this.background.setWorldSize(344,204.5),this.add(this.background)},n.createHeader=function(){this.header=new ZT(this.scene),this.add(this.header)},n.createFooter=function(){this.footer=new pC(this.scene),this.add(this.footer)},n.createStar=function(){this.starIcon=this.scene.add.image(0,0,gC,mC.TOURNAMENT.IC_STAR),this.starIcon.setWorldSize(35.5,35.5),this.add(this.starIcon)},n.alignComponents=function(){Phaser.Display.Align.In.Center(this.background,this,0,2.25),Phaser.Display.Align.In.TopCenter(this.header,this,0,-2.5),Phaser.Display.Align.In.BottomCenter(this.footer,this,0,-1.5),Phaser.Display.Align.In.TopLeft(this.starIcon,this,5,1)},n.createLeaderListApiService=function(){this.leaderListApiService=new AT(this.scene,void 0)},n.updateInfo=function(){var e=(0,s.Z)(u().mark((function e(t){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.payload=t,e.next=4,this.fetchLeaderboardData().catch((function(e){}));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.fetchLeaderboardData=function(){var e=(0,s.Z)(u().mark((function e(){var t,n,i,a,s;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((t=this.header.leaderList).bringToTop(t.loading),e.prev=2,this.payload.payload){e.next=5;break}throw new Error("Payload is empty");case 5:if(n=this.payload.idRequest,!this.payload.payload.leaderboard){e.next=11;break}t.showContent(),t.updateLeaders(this.payload.payload.leaderboard),e.next=26;break;case 11:if(t.loading.revive(),t.hideContent(),a=null==(i=this.payload.payload)?void 0:i.leaderboardId){e.next=16;break}throw new Error("Leaderboard ID is not defined");case 16:return this.leaderListApiService.updateLeaderboardId(a),e.next=19,this.leaderListApiService.getProcessedLeaderPayloadAsync();case 19:if(s=e.sent,this.payload.idRequest==n){e.next=22;break}return e.abrupt("return");case 22:t.revive(),t.updateLeaders(s),this.payload.payload.leaderboard=s,t.showContent();case 26:e.next=32;break;case 28:e.prev=28,e.t0=e.catch(2),this.payload.payload&&n==this.payload.idRequest&&(this.payload.payload.leaderboard=void 0);case 32:return e.prev=32,this.payload.payload&&n==this.payload.idRequest&&t.loading.kill(),e.finish(32);case 35:case"end":return e.stop()}}),e,this,[[2,28,32,35]])})));return function(){return e.apply(this,arguments)}}(),t}(Phaser.GameObjects.Container),CC=function(){function e(){this.payload=void 0}var t=e.prototype;return t.getData=function(){var e=(0,s.Z)(u().mark((function e(){var t,n,i;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.payload){e.next=2;break}return e.abrupt("return",this.payload);case 2:return e.next=4,c().all([this.getAPITournamentData(),this.getFacebookTournamentData()]);case 4:return t=e.sent,n=t[0],i=t[1],this.payload=n||i,e.abrupt("return",this.payload);case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),t.setData=function(e){this.payload=e},t.clearData=function(){this.payload=void 0},t.getAPITournamentData=function(){var e=(0,s.Z)(u().mark((function e(){var t,n,i;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=window.game.storage.getState(),n=qs(t),e.next=4,(0,tr.Iy)();case 4:if(0!==(i=e.sent).length){e.next=7;break}return e.abrupt("return",void 0);case 7:return e.abrupt("return",R()(i).call(i,(function(e){return e.id===n})));case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),t.getFacebookTournamentData=function(){var e=(0,s.Z)(u().mark((function e(){var t,n,i,a,s;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,window.game.facebook.getTournamentAsync();case 2:if(t=e.sent,n=t.getPayload()){e.next=6;break}return e.abrupt("return",void 0);case 6:if(i=JSON.parse(n),a=i.playerName,i.leaderboardId){e.next=10;break}return e.abrupt("return",void 0);case 10:return s={id:t.getID(),title:t.getTitle()||a+"'s Tournament",payload:i,endTime:t.getEndTime(),contextID:t.getContextID()},e.abrupt("return",s);case 12:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),e}(),SC=new CC,bC=An.Z.GAMEPLAY_DEFAULT,IC=bC.KEY,wC=bC.FRAME,_C=function(e){function t(t){var n;return(n=e.call(this,t)||this).handleJoinTournament=(0,s.Z)(u().mark((function e(){var t,i,a,s,r,o,c,h;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return SC.setData(n.payload),a=n.payload.id,s=n.payload.endTime,r=(null==(t=n.payload.payload)?void 0:t.leaderboardId)||"",o=(null==(i=n.payload.payload)?void 0:i.level)||1,e.prev=6,e.next=9,n.scene.facebook.tournament.joinAsync(a.toString());case 9:n.scene.storage.dispatch(sr(a.toString(),r)),n.scene.storage.dispatch(tc()),c={leaderboardId:r,endTime:s,level:o},n.scene.player.joinTournament(c),n.scene.screen.close(cs.o4.TOURNAMENTS_SCREEN),null==(h=n.scene)||h.gameplay.startNewGame(),e.next=25;break;case 18:if(e.prev=18,e.t0=e.catch(6),SC.clearData(),"USER_INPUT"!==(null==e.t0?void 0:e.t0.code)){e.next=24;break}return e.abrupt("return");case 24:throw e.t0;case 25:case"end":return e.stop()}}),e,null,[[6,18]])}))),n.createDebugButton(),n.handleInput(),t.events.on(Phaser.Scenes.Events.UPDATE,(function(){var e;null!=(e=t.screen.get(cs.o4.TOURNAMENTS_SCREEN))&&e.visible&&n.updateJoinButton()})),n}(0,r.Z)(t,e);var n=t.prototype;return n.updateInfo=function(){var e=(0,s.Z)(u().mark((function e(t){var n,i,a,s;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.payload=t,this.payload.idRequest=(new Date).getTime(),a=0;try{a=(9301*dT()(String(t.id))+49297)%6}catch(r){}return s=void 0==(null==(n=t.payload)?void 0:n.image)?a:null==(i=t.payload)?void 0:i.image,this.header.updateBackground(s),this.footer.updateTitle(t.title),this.updateTimer(t.endTime),e.next=10,this.fetchLeaderboardData().catch((function(e){}));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.updateTimer=function(e){this.footer.timerContainer.setCountdown(e)},n.createDebugButton=function(){var e=this;if(GameCore.Utils.Valid.isDebugger()){var t=new Nh.Z(this.scene,35,35),n=this.scene.add.image(0,0,IC,wC.IC_BG_OFF);n.setWorldSize(35,35);var i=this.scene.make.bitmapText({font:gc.Z.PRIMARY.KEY,size:this.scene.fontSize(10),text:"PL",origin:{x:.5,y:.5}});i.setCenterAlign(),t.add([n,i]),this.add(t),Phaser.Display.Align.In.TopLeft(t,this,10,-40),t.onClick=function(){if(!e.isCurrentTournamentBeingPlayed()){var t=e.scene.storage.getState();qs(t)}}}},n.handleInput=function(){var e=this,t=this.footer.joinButton;t.onClick=(0,s.Z)(u().mark((function n(){return u().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(t.buttonState!==$T.JOIN){n.next=18;break}return n.prev=1,e.scene.game.globalScene.screen.open(cs.o4.NOTIFY_SCREEN,{message:"joiningTournament",loading:!0}),n.next=5,(0,ls.qZ)(500);case 5:return n.next=7,e.handleJoinTournament();case 7:PC(100),n.next=13;break;case 10:n.prev=10,n.t0=n.catch(1),window.game.globalScene.screen.open(cs.o4.NOTIFY_SCREEN,{message:"cannotJoin",duration:3e3,loading:!1});case 13:return n.prev=13,e.updateTextPlay(),n.finish(13);case 16:n.next=19;break;case 18:e.scene.screen.close(cs.o4.TOURNAMENTS_SCREEN);case 19:e.updateTextPlay();case 20:case"end":return n.stop()}}),n,null,[[1,10,13,16]])})))},n.updateJoinButton=function(){var e=this.footer.joinButton;0===this.footer.timerContainer.getRemain()?e.setDisabled(!0):e.setDisabled(!1),this.updateTextPlay()},n.isThisTournamentIdIdenticalToCurrentTournament=function(){var e=this.scene.storage.getState(),t=qs(e);return GameCore.Utils.Valid.isNumber(t)?t===this.payload.id:!!GameCore.Utils.Valid.isString(t)&&t===""+this.payload.id},n.isCurrentTournamentBeingPlayed=function(){return this.isThisTournamentIdIdenticalToCurrentTournament()&&To.instance.isTournamentMode()},n.updateTextPlay=function(){this.footer.joinButton.switchState(this.isCurrentTournamentBeingPlayed()?$T.CONTINUE:$T.JOIN)},t}(TC),xC=null,PC=function(e){xC&&clearTimeout(xC),xC=setTimeout((function(){window.game.globalScene.screen.close(cs.o4.NOTIFY_SCREEN)}),e)},kC=n(666),OC=function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).name="TournamentPayloadInvalid",i.message=t||"The tournament payload invalid",i.payload=n,i}return(0,r.Z)(t,e),t}((0,W.Z)(Error)),LC=An.Z.GAMEPLAY_DEFAULT,RC=LC.KEY,BC=LC.FRAME,DC=function(e){function t(t){var n;return(n=e.call(this,t,269,46)||this).setName("CreateNewTournament"),n.createBackground(),n.createContents(),n}(0,r.Z)(t,e);var n=t.prototype;return n.createBackground=function(){var e=this.scene.make.image({key:RC,frame:BC.TOURNAMENT.BUTTON_CREATE});e.setWorldSize(this.width,this.height),this.add(e)},n.createContents=function(){var e=new bl(this.scene,{iconTextPadding:8,text:"createTournament",fontSize:20,iconKey:RC,iconFrame:BC.IC_NEW,iconWidth:20,iconHeight:21});e.text.setMaxSize(220,35,!0),this.add(e)},t}(Nh.Z),NC=An.Z.GAMEPLAY_DEFAULT,MC=NC.KEY,GC=NC.FRAME,ZC=function(e){function t(t,n,i,a){var r;return(r=e.call(this,t,n,i)||this).illustration=void 0,r.createNewTournamentButton=void 0,r.payload=void 0,r.scrollerManager=void 0,r.handleCreateTournament=(0,s.Z)(u().mark((function e(){var t,n,i,a,s;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.scene.game.globalScene,e.prev=1,SC.clearData(),n=r.scene.player.getPlayer(),i=n.playerId,a=n.name,s={playerId:i,playerName:a,score:0,autoStartGame:!0,success:!0,image:1+Math.floor(3*Math.random())},t.screen.open(cs.o4.NOTIFY_SCREEN,{message:"creatingTournament",loading:!0}),e.next=8,(0,ls.qZ)(500);case 8:return e.next=10,lc();case 10:return e.next=12,r.scene.storage.dispatch(rr(s));case 12:return e.next=14,SC.getData();case 14:return r.scene.storage.dispatch(tc()),e.next=17,r.updateTournaments();case 17:r.scene.screen.close(cs.o4.TOURNAMENTS_SCREEN),r.scene.gameplay.startNewGame(),UC(0),e.next=29;break;case 23:if(e.prev=23,e.t0=e.catch(1),"USER_INPUT"!==(null==e.t0?void 0:e.t0.code)){e.next=28;break}return UC(0),e.abrupt("return");case 28:t.screen.open(cs.o4.NOTIFY_SCREEN,{message:"cannotCreateTournament",duration:2e3,loading:!1});case 29:case"end":return e.stop()}}),e,null,[[1,23]])}))),r.updateTournaments=(0,s.Z)(u().mark((function e(){var t,n,i;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=(0,$a.Z)(r),n=t.scrollerManager,i=n.tournamentsContainer,n.forceLoadData=!0,i.updateScrollerIdx(r.scrollerManager),e.next=6,i.updateContainer();case 6:n.scroller.setEnable(!0);case 7:case"end":return e.stop()}}),e)}))),r.scrollerManager=a,r.setSize(311,280),r.createIllustration(),r.createText(),r.createButton(),r}(0,r.Z)(t,e);var n=t.prototype;return n.addBackground=function(){var e="no-tournament-block-background";if(!this.scene.textures.exists(e)){var t=this.width,n=this.height,i=this.scene.add.graphics();i.fillStyle(65280,.2),i.fillRect(0,0,t,n),i.generateTexture(e,t,n),i.destroy()}var a=this.scene.add.image(0,0,e);this.add(a)},n.createIllustration=function(){var e=new td(this.scene,{width:188.5,height:182,key:MC,frame:GC.NO_TOURNAMENT,symmetricType:ed.HORIZONTAL});this.add(e),this.illustration=e,Phaser.Display.Align.In.TopCenter(e,this)},n.createText=function(){var e=this.scene.make.bitmapText({font:gc.Z.BOLD.KEY,size:this.scene.fontSize(14),text:"youHaveNoTournaments",origin:{x:.5,y:.5}}).setTint(16579837);e.setMaxSize(350,20),this.add(e),this.alignUnder(e,this.illustration)},n.createButton=function(){var e=this;this.createNewTournamentButton=new DC(this.scene),this.add(this.createNewTournamentButton),this.createNewTournamentButton.onClick=function(){e.handleCreateTournament()},Phaser.Display.Align.In.BottomCenter(this.createNewTournamentButton,this)},n.alignUnder=function(e,t){var n=(e.height+t.height)/2;Phaser.Display.Align.In.Center(e,t,0,n+10)},t}(Phaser.GameObjects.Container),FC=null,UC=function(e){FC&&clearTimeout(FC),FC=setTimeout((function(){window.game.globalScene.screen.close(cs.o4.NOTIFY_SCREEN)}),e)},zC=function(){function e(e,t,n){this.scene=void 0,this.name=void 0,this.scroller=void 0,this.tournamentsContainer=void 0,this.noTournamentBlock=void 0,this.loadData=!1,this.debugNoTournament=!1,this.scene=e.scene,this.tournamentsContainer=e,this.scroller=t,this.name=n||"",this.createNoTournamentBlock()}var t=e.prototype;return t.createNoTournamentBlock=function(){var e=this;this.noTournamentBlock=new ZC(this.scene,0,0,this),this.tournamentsContainer.add(this.noTournamentBlock),this.tournamentsContainer.bringToTop(this.noTournamentBlock),this.noTournamentBlock.kill(),this.scene.events.on(Phaser.Scenes.Events.UPDATE,(function(){e.noTournamentBlock.active&&Phaser.Display.Align.In.Center(e.noTournamentBlock,e.scroller)}))},t.setMask=function(e){this.scroller.setMask(e),this.noTournamentBlock.setMask(e)},t.updateScroller=function(){var e=this.getListData();if(e.length<1)return this.scroller.setEnable(!1),this.noTournamentBlock.revive(),void this.scroller.updateConfig(e);this.noTournamentBlock.kill(),this.scroller.setEnable(!0),this.scroller.updateConfig(e),this.scroller.onTouchEnd()},t.parseResponsesIntoTournaments=function(){var e=[];return this.filterTournament().forEach((function(t){try{var n=t.getID(),i=t.getPayload();if(!i)return;var a=JSON.parse(i),s=a.playerName;if(!a.leaderboardId)throw new OC(null,a);var r={id:n,title:t.getTitle()||s+"'s Tournament",payload:a,endTime:t.getEndTime(),contextID:t.getContextID()};e.push(r)}catch(o){}})),e},(0,ce.Z)(e,[{key:"forceLoadData",get:function(){return this.loadData},set:function(e){this.loadData=e}},{key:"forceNoTournament",get:function(){return this.debugNoTournament&&!this.loadData},set:function(e){this.debugNoTournament=e}}]),e}(),WC=function(e){function t(t,n,i){var a;return(a=e.call(this,t,n,i)||this).noTournamentBlock.createNewTournamentButton.kill(),a}(0,r.Z)(t,e);var n=t.prototype;return n.getListData=function(){return this.forceNoTournament?[]:this.tournamentsContainer.getWorldTournamentsData()},n.filterTournament=function(){var e=this.tournamentsContainer.getTournaments();return Le()(e).call(e,(function(e){return!!e.getPayload()}))},t}(zC),YC=function(e){function t(t,n,i){var a;return(a=e.call(this,t,n,i)||this).noTournamentBlock.createNewTournamentButton.kill(),a}(0,r.Z)(t,e);var n=t.prototype;return n.getListData=function(){return this.forceNoTournament?[]:this.parseResponsesIntoTournaments()},n.filterTournament=function(){var e=this.scene.player.getPlayerId(),t=this.tournamentsContainer.getTournaments();return Le()(t).call(t,(function(t){var n=t.getPayload();if(!n)return!1;try{var i=JSON.parse(n);return i.playerId&&e!=i.playerId}catch(a){return!1}}))},t}(zC),HC=An.Z.GAMEPLAY_DEFAULT,KC=HC.KEY,jC=HC.FRAME,VC=function(e){function t(t,n,i){var a;return(a=e.call(this,t,n,i)||this).noTournamentBlock.createNewTournamentButton.revive(),a.forceNoTournament=!1,GameCore.Utils.Valid.isDebugger()&&a.createDebugButton(),a}(0,r.Z)(t,e);var n=t.prototype;return n.getListData=function(){return this.forceNoTournament?[]:this.parseResponsesIntoTournaments()},n.filterTournament=function(){var e=this.scene.player.getPlayerId(),t=this.tournamentsContainer.getTournaments(),n=Le()(t).call(t,(function(t){var n=t.getPayload();if(!n)return!1;try{var i=JSON.parse(n);return i.playerId&&e===i.playerId}catch(a){return!1}}));return n},n.createDebugButton=function(){var e=this,t=new Nh.Z(this.scene,40,40),n=this.scene.add.image(0,0,KC,jC.IC_BG_OFF);n.setWorldSize(40,40);var i=this.scene.make.bitmapText({font:gc.Z.PRIMARY.KEY,size:this.scene.fontSize(10),text:"Create\na new",origin:{x:.5,y:.5}});i.setCenterAlign(),t.add([n,i]),this.scroller.add(t),Phaser.Display.Align.In.TopLeft(t,this.scroller,0,35),t.onClick=function(){e.noTournamentBlock.handleCreateTournament()}},t}(zC),JC=function(e){function t(t,n,i,a,s,r){var o;return(o=e.call(this,t,n,i)||this).icon=void 0,o.text=void 0,o.createIcon(a,s),o.createText(r),o.add([o.icon,o.text]),o}(0,r.Z)(t,e);var n=t.prototype;return n.createIcon=function(e,t){this.icon=this.scene.add.image(0,-10,e,t).setTint(16579837),this.icon.setWorldSize(28,28)},n.createText=function(e){this.text=this.scene.make.bitmapText({font:gc.Z.PRIMARY.KEY,size:this.scene.fontSize(Kl.FOOTER),text:e,origin:{x:.5,y:.5},y:14}).setTint(13355979),this.text.setMaxSize(120,20)},t}(Nh.Z),XC=JC,qC=An.Z.GAMEPLAY_DEFAULT,QC=qC.KEY,$C=qC.FRAME,eS=function(e){function t(t,n,i){var a;return(a=e.call(this,t,n||40,i||40,QC,$C.IC_SETTINGS,"settings")||this).setName("Setting"),a.onClick=function(){t.screen.open(cs.o4.SETTINGS_SCREEN)},a}return(0,r.Z)(t,e),t}(XC),tS=An.Z.GAMEPLAY_DEFAULT,nS=tS.KEY,iS=tS.FRAME,aS=function(e){function t(t){var n;return(n=e.call(this,t,40,40,nS,iS.CUP,"tournaments")||this).onClick=function(){},n}return(0,r.Z)(t,e),t}(XC),sS=An.Z.GAMEPLAY_DEFAULT,rS=sS.KEY,oS=sS.FRAME,cS=function(e){function t(t,n,i){var a;return(a=e.call(this,t,n||40,i||40,rS,oS.IC_BACK,"Back to Game")||this).setName("Game"),a.onClick=function(){t.screen.close(cs.o4.TOURNAMENTS_SCREEN)},a}return(0,r.Z)(t,e),t}(XC),hS=An.Z.GAMEPLAY_DEFAULT,uS=hS.KEY,lS=hS.FRAME,dS=$l.WIDTH,pS=$l.HEIGHT,fS=$l.HIT_ZONE_BUTTON,gS=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n.settingsButton=void 0,n.tournamentsButton=void 0,n.gameButton=void 0,n.buttons=[],n.background=void 0,n.scene=t,n.setSize(dS,pS),n.createBackgroundMask(),n.createBackground(),n.createButtons(),n}(0,r.Z)(t,e);var n=t.prototype;return n.createBackgroundMask=function(){var e=this.scene.theme.getThemeDefaultConfig().backgroundKey,t=this.scene.add.image(0,0,e);t.setOrigin(.5,1),this.add(t),this.background=t,this.updateBackgroundMask()},n.updateBackgroundMask=function(){var e=this.scene.world.isLandscape()?20:0,t=this.scene.world.getPixelRatio(),n=this.scene.ads.getBannerHeight(),i=this.background,a=this.scene.gameZone,s=a.width,r=a.height;i.setWorldSize(s,r),i.setCrop(0,i.frame.height-(this.height+n)/i.scaleY-e*t,this.width*t,(this.height+n)/i.scaleY+e*t),i.setY(n+this.height/2+e)},n.createBackground=function(){var e=this.scene.world.isLandscape()?0:40,t=this.scene.add.image(0,0,uS,lS.FOOTER_BG);t.setWorldSize(this.width+e,this.height),this.add(t),t.removeInteractive()},n.createButtons=function(){this.buttons=[],this.createSettingsButton(),this.createGameButton(),this.alignButtons()},n.createSettingsButton=function(){this.settingsButton=new eS(this.scene,fS.WIDTH,fS.HEIGHT),this.add(this.settingsButton),this.buttons.push(this.settingsButton)},n.createTournamentsButton=function(){this.tournamentsButton=new aS(this.scene),this.add(this.tournamentsButton),this.buttons.push(this.tournamentsButton)},n.createGameButton=function(){this.gameButton=new cS(this.scene,fS.WIDTH,fS.HEIGHT),this.add(this.gameButton),this.buttons.push(this.gameButton)},n.alignButtons=function(){if(0!==this.buttons.length)for(var e=this.width/this.buttons.length,t=0;t<this.buttons.length;++t)this.buttons[t].setX((t-this.buttons.length/2+.5)*e),this.buttons[t].setY(2)},t}(Phaser.GameObjects.Container),mS=gS,vS=Fy,yS=Uy,AS=Gy,ES=My,TS=Zy,CS=[ES,AS,TS],SS=function(e){function t(t){var n;return(n=e.call(this,t)||this).header=void 0,n.footer=void 0,n.tab=void 0,n.scrollers=[],n.scrollerManagers=[],n.tabNames=CS,n.currentIdx=0,n.tournaments=[],n.worldTournament=[],n.loading=void 0,n.updateContainer=(0,s.Z)(u().mark((function e(){var t,i;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=n.tab.getCurrentIdx(),n.loading.revive(),n.scrollers.forEach((function(e,t){e.setEnable(!1),e.kill()})),e.next=5,n.loadTournament();case 5:return e.next=7,n.loadWorldTournament();case 7:if(n.loading.kill(),n.scrollerManagers.forEach((function(e){e.updateScroller(),e.scroller.revive()})),null==(t=n.scrollers[i])||t.setEnable(!0),!GameCore.Utils.Device.isMobile()){e.next=12;break}return e.abrupt("return");case 12:n.scrollers.forEach((function(e,t){t!==i&&e.setEnable(!1)}));case 13:case"end":return e.stop()}}),e)}))),n.setSizeContainer(),t.world.isLandscape()||n.createHeaderBackground(),n.createHeader(),n.createFooter(),n.createTabSelector(),n.createScrollers(),t.world.isLandscape()&&n.addMask(),n.createLoading(),n.tab.selectTab(0),n}(0,r.Z)(t,e);var n=t.prototype;return n.createHeaderBackground=function(){var e=this,t=this.scene.world.getPixelRatio(),n=this.scene.gameZone,i=n.width,a=n.height,s=this.scene.theme.getThemeDefaultConfig().backgroundKey,r=this.scene.add.image(0,-a/2,s);r.setOrigin(.5,0),r.setWorldSize(i,a);var o=yS.HEIGHT/r.scaleY;r.setCrop(0,0,this.width*t,o),r.setAlpha(1),this.add(r),this.scene.events.on(Phaser.Scenes.Events.UPDATE,(function(){r.y=-e.y-a/2}))},n.getWorldTournamentsData=function(){return this.worldTournament},n.getTournaments=function(){return this.tournaments},n.setSizeContainer=function(){var e=this.scene.gameZone,t=e.width,n=e.height;this.setSize(t,n)},n.createHeader=function(){this.header=new uT(this.scene),this.add(this.header),this.bringToTop(this.header),this.header.setInteractive(),Phaser.Display.Align.In.TopCenter(this.header,this,0)},n.createTabSelector=function(){var e=this;this.tab=new vg(this.scene,339.5,31,3),this.add(this.tab),Phaser.Display.Align.In.BottomCenter(this.tab,this.header,0,-15);var t=Be()(CS).call(CS,(function(t,n){var i=e.scene.make.bitmapText({font:gc.Z.BOLD.KEY,size:e.scene.fontSize(14),text:t,origin:{x:.5,y:.5}});return i.setMaxSize(110,30),i}));this.tab.addLabels(t),this.tab.callback=function(n){t.forEach((function(e,t){return e.setTint(n==t?3239751:12306616)}));var i=e.currentIdx<n?375:-375;e.scene.tweens.add({targets:e.getContainers(e.currentIdx),x:-i,alpha:0,duration:200,ease:Phaser.Math.Easing.Sine.InOut}),e.scrollers[e.currentIdx].setEnable(!1),e.scrollers[n].setEnable(!0),e.scene.tweens.add({targets:e.getContainers(n),x:{from:i,to:0},alpha:1,duration:200,ease:Phaser.Math.Easing.Sine.InOut}),e.currentIdx=n}},n.getContainers=function(e){return[this.scrollers[e],this.scrollerManagers[e].noTournamentBlock]},n.createScrollers=function(){var e=this;this.scrollers=[],this.scrollerManagers=[],CS.forEach((function(t){e.createScroller(t)})),this.scrollers.forEach((function(e,t){e.setX(vS*t),t>0&&e.setAlpha(0)}))},n.createScroller=function(e){var t=this.scene.gameZone.height-this.header.height-this.scene.ads.getBannerHeight()-this.footer.height+30,n=new kC.Z(this.scene,{classType:_C,listConfigs:[],width:375,height:t,padding:10,marginTop:23,marginBottom:30});this.add(n),this.sendToBack(n),n.setEnable(!0),Phaser.Display.Align.To.BottomCenter(n,this.header,0,-15),this.scrollers.push(n);var i=this.createScrollerManager(n,e);i&&this.scrollerManagers.push(i)},n.createScrollerManager=function(e,t){switch(t){case ES:return new WC(this,e,t);case AS:return new YC(this,e,t);case TS:return new VC(this,e,t);default:return null}},n.distanceBetweenTabBottomAndFooterTop=function(){return this.footer.y-this.tab.y-(this.footer.height+this.tab.height)/2},n.updateScrollerIdx=function(e){for(var t=0;t<this.scrollerManagers.length;t++)e===this.scrollerManagers[t]&&(this.currentIdx=t)},n.loadTournament=function(){var e=(0,s.Z)(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.scene.facebook.tournament.getTournamentsAsync();case 3:this.tournaments=e.sent,e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),this.tournaments=[];case 10:case"end":return e.stop()}}),e,this,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),n.loadWorldTournament=function(){var e=(0,s.Z)(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,tr.Iy)();case 3:this.worldTournament=e.sent,e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),this.worldTournament=[];case 10:case"end":return e.stop()}}),e,this,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),n.createFooter=function(){this.footer=new mS(this.scene),this.add(this.footer),this.bringToTop(this.footer),this.footer.setInteractive();var e=this.scene.ads.getBannerHeight(),t=this.scene.gameZone.width>375?-10:0;Phaser.Display.Align.In.BottomCenter(this.footer,this,0,-e+t),this.footer.updateBackgroundMask()},n.addMask=function(){var e=this,t=this.scene.make.graphics({fillStyle:{color:255,alpha:0},visible:!1});t.setName("MaskGraphics");var n=this.tab.x,i=(this.footer.y-this.footer.height/2+(this.tab.y+this.tab.height/2))/2,a=this.distanceBetweenTabBottomAndFooterTop()-3-8,s=n-200,r=i-a/2+3;t.fillRoundedRect(s,r,400,a,0),this.scrollerManagers.forEach((function(e){e.setMask(t.createGeometryMask())})),this.scene.events.on(Phaser.Scenes.Events.UPDATE,(function(){var n=e.getWorldPosition(),i=n.x,a=n.y;t.setPosition(i,a)}))},n.createLoading=function(){var e=new ET.Z(this.scene);e.setVisible(!0),e.setScale(1.3),this.add(e),this.loading=e},t}(Phaser.GameObjects.Container),bS=SS,IS=function(e){function t(t,n,i,a){var s;return(s=e.call(this,t,n,i,a)||this).fadeInAnimation=void 0,s.fadeOutAnimation=void 0,s.tournamentsContainer=void 0,s.setBackground=function(){var e=s.scene.theme.getThemeDefaultConfig().backgroundKey;s.background.setTexture(e);var t=s.scene.gameZone,n=t.width,i=t.height;s.background.setWorldSize(n,i),s.scene.world.isLandscape()&&s.background.setScale(s.background.scaleY,s.background.scaleY)},s.setDepth(cs.Ks.POPUP),s.tournamentsContainer=new bS(t),s.add(s.tournamentsContainer),s.setBackground(),s.createBottomLogo(),En.Z.removeObject(s.background),s}(0,r.Z)(t,e);var n=t.prototype;return n.createBottomLogo=function(){if(!this.scene.world.isLandscape()){var e=new Tg(this.scene);this.add(e),Phaser.Display.Align.In.BottomCenter(e,this)}},n.open=function(){e.prototype.open.call(this),this.setBlockInputOutsideEnabled(!0),this.tournamentsContainer.setAlpha(1),this.tournamentsContainer.updateContainer(),this.runOpenAnimation()},n.close=function(){this.runCloseAnimation()},n.runOpenAnimation=function(){var e=this;this.scene.audio.playSound(hs.Z.POPUP_SHOW),this.scene.time.delayedCall(100,(function(){En.Z.openScreen(e,!1)})),this.fadeInAnimation||(this.fadeInAnimation=new yh.Z({targets:[this],duration:300})),this.fadeInAnimation.play()},n.runCloseAnimation=function(){var t,n,i=this;null!=(t=this.fadeOutAnimation)&&null!=(n=t.tween)&&n.isPlaying()||(this.scene.time.delayedCall(100,(function(){En.Z.closeScreen(i)})),this.scene.audio.playSound(hs.Z.POPUP_OFF),this.fadeOutAnimation||(this.fadeOutAnimation=new ef.Z({targets:[this],props:{alpha:0},duration:300,onComplete:function(){i.scene.events.emit("tournament-close"),e.prototype.close.call(i)}})),this.fadeOutAnimation.play())},t}(GameCore.Screen),wS=IS,_S=function(e){function t(t,n){var i;return(i=e.call(this,t,0,0,gc.Z.BOLD_SHADOW_BLUR.KEY,n,t.fontSize(15))||this).setOrigin(.5,.5),i.setTint(16449487,16449487,15913325,15913325),i.setMaxSize(180,25),i}return(0,r.Z)(t,e),t}(Phaser.GameObjects.BitmapText),xS=An.Z.GAMEPLAY_DEFAULT_LANDSCAPE,PS=xS.KEY,kS=xS.FRAME,OS=function(e){function t(t){var n;return(n=e.call(this,t)||this).background=void 0,n.closeButton=void 0,n.setSize(234,62),n.createBackground(),n.createTitle(),n.createCloseButton(),n}(0,r.Z)(t,e);var n=t.prototype;return n.createBackground=function(){this.background=new td(this.scene,{width:this.width,height:this.height,key:PS,frame:kS.TOURNAMENT.HEADER,symmetricType:ed.HORIZONTAL}),this.add(this.background)},n.createTitle=function(){var e=new _S(this.scene,"TOURNAMENTS");this.add(e),Phaser.Display.Align.In.TopCenter(e,this,0,-11)},n.createCloseButton=function(){var e=this;this.closeButton=new Tm(this.scene),this.add(this.closeButton),Phaser.Display.Align.In.TopRight(this.closeButton,this,-5,-10),this.closeButton.onClick=function(){e.scene.screen.close(cs.o4.TOURNAMENTS_SCREEN)}},t}(Phaser.GameObjects.Container),LS=OS,RS=An.Z.GAMEPLAY_DEFAULT_LANDSCAPE,BS=RS.KEY,DS=RS.FRAME,NS=function(e){function t(t){var n;return(n=e.call(this,t)||this).medalNo123=void 0,n.customizedMedal=void 0,n.rankLabel=void 0,n.rank=1,n.setSize(9,17.5),n.createMedal123(),n.createCustomizedMedal(),n.createRankLabel(),n}(0,r.Z)(t,e);var n=t.prototype;return n.getRank=function(){return this.rank},n.setRank=function(e){var t=function(e){return e>99?"99+":0===e?"?":e.toString()}(e);this.rank=e;var n=this.rank>9?6.5:7.5;switch(this.rankLabel.setText(t),this.rankLabel.setFontSize(this.scene.fontSize(n)),this.medalNo123.kill(),this.customizedMedal.kill(),t){case"1":this.medalNo123.revive(),this.medalNo123.setFrame(DS.TOURNAMENT.IC_1ST).setWorldSize(9,15),this.rankLabel.kill();break;case"2":this.medalNo123.revive(),this.medalNo123.setFrame(DS.TOURNAMENT.IC_2ND).setWorldSize(9,15.5),this.rankLabel.kill();break;case"3":this.medalNo123.revive(),this.medalNo123.setFrame(DS.TOURNAMENT.IC_3RD).setWorldSize(9,15.5),this.rankLabel.kill();break;default:this.customizedMedal.revive(),this.rankLabel.revive(),Phaser.Display.Align.In.Center(this.rankLabel,this.customizedMedal,0,.25)}},n.createMedal123=function(){this.medalNo123=this.scene.add.image(0,0,BS,DS.TOURNAMENT.IC_1ST),this.medalNo123.setWorldSize(9,15),this.add(this.medalNo123)},n.createCustomizedMedal=function(){this.customizedMedal=this.scene.add.image(0,0,BS,DS.TOURNAMENT.IC_NORMAL),this.customizedMedal.setWorldSize(18/1.65,19/1.65),this.add(this.customizedMedal)},n.createRankLabel=function(){this.rankLabel=this.scene.make.bitmapText({font:gc.Z.BOLD.KEY,size:this.scene.fontSize(6.5),origin:{x:.5,y:.5},text:""+this.rank}).setTint(1525537),this.rankLabel.setIgnoreLanguage(),this.add(this.rankLabel)},t}(Phaser.GameObjects.Container);var MS=NS,GS=An.Z.GAMEPLAY_DEFAULT_LANDSCAPE,ZS=GS.KEY,FS=GS.FRAME,US=13813441,zS=[{position:0,tint1:0,alpha1:0},{position:1,tint1:0,alpha1:.28}],WS=[{position:0,tint1:0,alpha1:0},{position:1,tint1:0,alpha1:.16}],YS=[{position:0,tint1:16777215,alpha1:0},{position:1,tint1:16777215,alpha1:.28}],HS=function(e){function t(t,n){var i;return void 0===n&&(n=!1),(i=e.call(this,t)||this).scene=void 0,i._isPlayer=!1,i.background=void 0,i.avatar=void 0,i.score=void 0,i.medalIcon=void 0,i.payload=void 0,i.scene=t,i.setSize(93,17.5),i.createBackground(),i.createMedalIcon(),i.createAvatar(),i.createScore(),i.alignComponents(),i.isPlayer=n,i}(0,r.Z)(t,e);var n=t.prototype;return n.getScoreWidth=function(){return this.score.width},n.updateStyle=function(e,t){t||this.isPlayer?(this.background.setGradientPoints(YS),this.avatar.setFrame(FS.AVATAR.LEADER_YOU),this.score.setTint(16383467)):(this.avatar.setFrame(FS.AVATAR.LEADER_NORMAL),this.score.setTint(US),e%2==0?this.background.setGradientPoints(WS):this.background.setGradientPoints(zS))},n.createBackground=function(){this.background=new hy(this.scene,this.width,this.height,WS),this.add(this.background)},n.createAvatar=function(){this.avatar=new vc(this.scene,{key:ZS,background:FS.AVATAR.LEADER_BG,frame:FS.AVATAR.LEADER_YOU,width:12.5,height:12.5,backgroundWidth:11,backgroundHeight:11,photoWidth:10.5,photoHeight:10.5,loadDelay:100}),this.avatar.update(),this.avatar.loadPhoto(xa.Z.AVATAR.KEY,xa.Z.AVATAR.FILE),this.add(this.avatar)},n.createScore=function(){this.score=this.scene.make.bitmapText({font:gc.Z.BOLD.KEY,size:this.scene.fontSize(10),origin:{x:1,y:.5}}).setTint(US),this.add(this.score),this.setScore(0)},n.createMedalIcon=function(){this.medalIcon=new MS(this.scene),this.medalIcon.kill(),this.add(this.medalIcon)},n.setScore=function(e){this.score.setText(0===e?"?":""+e)},n.updateData=function(e,t){var n=e.playerId,i=void 0===n?"10":n,a=(e.name,e.photo),s=void 0===a?"":a,r=e.score,o=void 0===r?0:r,c=e.rank,h=void 0===c?0:c;this.payload=e,this.isPlayer=i===this.scene.player.getPlayerId(),this.score.setAlpha(0),this.avatar.setAlpha(0),this.setScore(o),0!==o||this.isPlayer?(this.avatar.loadPhoto(i,s,59),this.medalIcon.setRank(h)):(this.avatar.loadPhoto(xa.Z.AVATAR.KEY,xa.Z.AVATAR.FILE,59),this.medalIcon.setRank(0)),this.updateStyle(t,this.isPlayer),this.medalIcon.revive(),this.playRecentlyUpdatedComponentEntrancesAnimation()},n.alignComponents=function(){Phaser.Display.Align.In.RightCenter(this.score,this,-10),Phaser.Display.Align.In.RightCenter(this.avatar,this,-55),Phaser.Display.Align.In.RightCenter(this.medalIcon,this.avatar,-19),Phaser.Display.Align.In.RightCenter(this.background,this)},n.alignComponentsByScoreWidth=function(e){Phaser.Display.Align.In.RightCenter(this.avatar,this.background,-e-20),Phaser.Display.Align.In.RightCenter(this.medalIcon,this.avatar,-19)},n.playRecentlyUpdatedComponentEntrancesAnimation=function(){this.scene.add.tween({targets:[this.score,this.avatar],props:{alpha:{from:0,to:1}},duration:150})},(0,ce.Z)(t,[{key:"isPlayer",get:function(){return this._isPlayer},set:function(e){this._isPlayer=e,this._isPlayer&&this.updateStyle(0,this._isPlayer)}}]),t}(Phaser.GameObjects.Container);var KS=zy,jS=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n.leaders=[],n.loading=void 0,n.payload=[],n.scene=t,n.createLeaders(),n.alignLeaders(),n.createLoading(),n.resetData(),n.listenEvents(),n}(0,r.Z)(t,e);var n=t.prototype;return n.updateLeaders=function(e){this.payload=e;var t=0;this.leaders.forEach((function(n,i){n.updateData((0,a.Z)({},e[i]),i),e[i].score.toString().length>4&&n.getScoreWidth()>t&&(t=n.getScoreWidth())})),0!=t&&this.leaders.forEach((function(e){e.alignComponentsByScoreWidth(t)}))},n.createLeaders=function(){for(var e=0;e<KS;e++){var t=new HS(this.scene);this.leaders.push(t),e===KS-1&&(t.isPlayer=!0)}this.add(this.leaders)},n.resetData=function(){for(var e=0;e<this.leaders.length;e++){var t=this.leaders[e],n={playerId:e.toString(),photo:"",score:0,rank:e+1,name:"player"};t.updateData(n,e)}},n.hideContent=function(){this.leaders.forEach((function(e){return e.setAlpha(0)}))},n.showContent=function(){this.leaders.forEach((function(e){return e.setAlpha(1)}))},n.alignLeaders=function(){var e=this,t=this.leaders.length,n=t*this.leaders[0].height+0*(t-1);this.setSize(149,n),this.leaders.forEach((function(t,n){0!==n?Phaser.Display.Align.To.BottomCenter(t,e.leaders[n-1],0,0):Phaser.Display.Align.In.TopRight(t,e)}))},n.createLoading=function(){this.loading=new ET.Z(this.scene),this.loading.revive(),this.loading.setScale(.5),this.add(this.loading),Phaser.Display.Align.In.LeftCenter(this.loading,this,-10)},n.listenEvents=function(){var e=this;this.scene.events.on("tournament-close",(function(){e.loading.kill()}))},t}(Phaser.GameObjects.Container);var VS=An.Z.TOURNAMENT_BANNER,JS=VS.KEY,XS=VS.FRAME,qS=function(e){function t(t){var n;return(n=e.call(this,t)||this).background=void 0,n.leaderList=void 0,n.setSize(217,76),n.createBackground(),n.createLeaderList(),n.alignComponents(),n}(0,r.Z)(t,e);var n=t.prototype;return n.updateBackground=function(e){e=void 0==e?0:e%6;var t=XS.BANNER_1;0==e?t=XS.BANNER_1:1==e?t=XS.BANNER_2:2==e?t=XS.BANNER_3:3==e?t=XS.BANNER_4:4==e?t=XS.BANNER_5:5==e&&(t=XS.BANNER_6),this.background.setFrame(t),this.background.setWorldSize(this.width,this.height)},n.alignComponents=function(){Phaser.Display.Align.In.Center(this.background,this),Phaser.Display.Align.In.RightCenter(this.leaderList,this)},n.createBackground=function(){this.background=this.scene.add.image(0,0,JS,XS.BANNER_1),this.background.setWorldSize(this.width,this.height),this.add(this.background)},n.createLeaderList=function(){this.leaderList=new jS(this.scene),this.add(this.leaderList)},t}(Phaser.GameObjects.Container),QS=qS,$S=An.Z.GAMEPLAY_DEFAULT,eb=$S.KEY,tb=$S.FRAME,nb=function(e){return e.JOIN="join",e.CONTINUE="continue",e}({}),ib=function(e){function t(t){var n;return(n=e.call(this,t,67.5,33.5)||this)._buttonState=nb.JOIN,n.joinLabel=void 0,n.continueLabel=void 0,n.setName("JoinButton"),n.createBackground(),n.createContent(),n.playAnimation(),n}(0,r.Z)(t,e);var n=t.prototype;return n.createBackground=function(){var e=this.scene.add.image(0,0,eb,tb.TOURNAMENT.JOIN_BUTTON);e.setWorldSize(this.width,this.height),this.add(e)},n.createContent=function(){this.joinLabel=new bl(this.scene,{iconTextPadding:5,text:"join",fontSize:12,iconKey:eb,iconFrame:tb.TOURNAMENT.IC_CUP,iconWidth:12,iconHeight:12.5}),this.joinLabel.text.setMaxSize(45,20,!0),Phaser.Display.Align.In.Center(this.joinLabel,this,0,-1.5),this.continueLabel=this.scene.make.bitmapText({font:gc.Z.BOLD_SHADOW.KEY,size:this.scene.fontSize(12),text:"continue",origin:{x:.5,y:.5}}),this.continueLabel.setMaxSize(65,20),Phaser.Display.Align.In.Center(this.continueLabel,this,0,-1.5),this.continueLabel.kill(),this.add([this.joinLabel,this.continueLabel])},n.playAnimation=function(){new Vc.Z({targets:this.getAll(),duration:1e3,props:{scale:"*=1.05"}}).play()},n.switchState=function(e){if(e!==this._buttonState)switch(e){case nb.JOIN:this._buttonState=nb.JOIN,this.joinLabel.revive(),this.continueLabel.kill();break;case nb.CONTINUE:this._buttonState=nb.CONTINUE,this.joinLabel.kill(),this.continueLabel.revive()}},(0,ce.Z)(t,[{key:"buttonState",get:function(){return this._buttonState}}]),t}(Nh.Z),ab=ib,sb=An.Z.GAMEPLAY_DEFAULT_LANDSCAPE,rb=sb.KEY,ob=sb.FRAME,cb=81,hb=14.5,ub="HMS",lb="DAY",db="NO_COMPETITION",pb=function(e){function t(t){var n;return(n=e.call(this,t)||this).endTime=void 0,n.countdownTimer=void 0,n.timeText=void 0,n.background=void 0,n.clockIcon=void 0,n.updateCountdown=(0,s.Z)(u().mark((function e(){var t,i,a;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=Date.now(),i=1e3*n.endTime-t,a=Math.round(Math.abs(i)/864e5),i<0&&(i=0),0!==i){e.next=8;break}return n.timeText.setText("noCompetitionMessage"),n.updateContainer(db),e.abrupt("return");case 8:a>=1?(1===a?n.timeText.setText("endInDay"):n.timeText.setText("endInDays"),n.timeText.setTranslationParameter("v",a),n.updateContainer(lb)):(n.timeText.setText("endInMs"),n.timeText.setTranslationParameter("v",(0,ls.F0)(Math.abs(i),!0)),n.updateContainer(ub));case 9:case"end":return e.stop()}}),e)}))),n.setSize(cb,hb),n.createBackground(),n.createClockIcon(),n.createTimeText(),n.createCountdownTimer(),n.alignComponents(),n}(0,r.Z)(t,e);var n=t.prototype;return n.alignComponents=function(){Phaser.Display.Align.In.Center(this.background,this),Phaser.Display.Align.In.LeftCenter(this.clockIcon,this.background,-3,-1.5),Phaser.Display.Align.To.RightCenter(this.timeText,this.clockIcon,1,1)},n.createBackground=function(){this.background=this.scene.add.image(0,0,rb,ob.TOURNAMENT.TIME_BACKGROUND).setTint(0).setOrigin(0,.5),this.background.setWorldSize(this.width,this.height),this.add(this.background)},n.createClockIcon=function(){this.clockIcon=this.scene.add.image(0,0,rb,ob.TOURNAMENT.IC_CLOCK),this.clockIcon.setWorldSize(6,7),this.add(this.clockIcon)},n.createTimeText=function(){this.timeText=this.scene.make.bitmapText({font:gc.Z.BOLD.KEY,size:this.scene.fontSize(10),origin:{x:.5,y:.5},text:"End in 10 days"}),this.add(this.timeText)},n.createCountdownTimer=function(){var e;if(void 0!=this.endTime){if(0==this.endTime)return this.timeText.setText("noCompetitionMessage"),void this.updateContainer(db);null==(e=this.countdownTimer)||e.destroy(),this.countdownTimer=this.scene.time.addEvent({loop:!0,delay:1e3,startAt:1e3,callback:this.updateCountdown})}},n.setCountdown=function(e){this.endTime=e,this.createCountdownTimer()},n.getRemain=function(){if(void 0!=this.endTime){var e=Date.now(),t=1e3*this.endTime-e;return t<0?0:t}},n.updateContainer=function(e){if(e==db)this.setSize(cb+25,hb+2),this.timeText.setMaxSize(100,15,!0),this.background.setWorldSize(this.width,this.height),this.timeText.setFontSize(this.scene.fontSize(8)),Phaser.Display.Align.In.Center(this.timeText,this.background),this.clockIcon.kill();else if(this.setSize(cb,hb),this.background.setWorldSize(this.width,this.height),this.clockIcon.revive(),e==ub)this.timeText.setFontSize(this.scene.fontSize(8)),this.timeText.setMaxSize(60,13,!0),Phaser.Display.Align.In.LeftCenter(this.clockIcon,this.background,-5,0),Phaser.Display.Align.To.RightCenter(this.timeText,this.clockIcon,3,1);else{this.timeText.setFontSize(this.scene.fontSize(9)),this.timeText.setMaxSize(65,13,!0);var t=(this.width-this.clockIcon.displayWidth-this.timeText.width)/3;Phaser.Display.Align.In.LeftCenter(this.clockIcon,this.background,-t,0),Phaser.Display.Align.To.RightCenter(this.timeText,this.clockIcon,t-1,1)}},t}(Phaser.GameObjects.Container),fb=pb,gb=function(e){function t(t){var n;return(n=e.call(this,t)||this).title=void 0,n.timerContainer=void 0,n.joinButton=void 0,n.setSize(220,46),n.createTitle(),n.createTimeContainer(),n.createJoinButton(),n.alignComponents(),n}(0,r.Z)(t,e);var n=t.prototype;return n.alignComponents=function(){Phaser.Display.Align.In.LeftCenter(this.title,this,-12,-13),Phaser.Display.Align.In.LeftCenter(this.timerContainer,this,-12,5),Phaser.Display.Align.In.RightCenter(this.joinButton,this,-8)},n.createTitle=function(){this.title=this.scene.add.bitmapText(0,0,gc.Z.BOLD_SHADOW_BLUR.KEY,"Tournament A",this.scene.fontSize(12)),this.updateTitle(function(e){void 0===e&&(e=!1);var t=new Date,n=e?Phaser.Math.RND.between(0,11):t.getMonth();return n<3?"Spring":n<6?"Summer":n<9?"Autumn":"Winter"}(!0)+" Tournament"),this.title.setIgnoreLanguage(),this.add(this.title)},n.createTimeContainer=function(){this.timerContainer=new fb(this.scene),this.add(this.timerContainer)},n.createJoinButton=function(){this.joinButton=new ab(this.scene),this.add(this.joinButton)},n.updateTitle=function(e){var t=GameCore.Utils.String.removeDiacritics(e);if(this.title.setText(t),this.title.width>125)for(var n=1;n<t.length;n++)if(this.title.setText(t.substring(0,n)+"..."),this.title.width>125){this.title.setText(t.substring(0,n-1)+"...");break}},t}(Phaser.GameObjects.Container),mb=gb;for(var vb=An.Z.GAMEPLAY_DEFAULT_LANDSCAPE,yb=vb.KEY,Ab=vb.FRAME,Eb=zy,Tb={playerId:"10",name:"???",photo:"",score:0,rank:0},Cb=[],Sb=0;Sb<Eb;Sb++)Cb.push((0,a.Z)({},Tb,{rank:Sb+1}));var bb=function(e){function t(t){var n;return(n=e.call(this,t)||this).shadowBackground=void 0,n.starIcon=void 0,n.payload=void 0,n.leaderListApiService=void 0,n.header=void 0,n.footer=void 0,n.setSize(220,126),n.createHeader(),n.createShadowBackground(),n.createFooter(),n.createStar(),n.alignComponents(),n.createLeaderListApiService(),n.scene.add.existing((0,$a.Z)(n)),n}(0,r.Z)(t,e);var n=t.prototype;return n.createShadowBackground=function(){this.shadowBackground=new td(this.scene,{width:this.width,height:this.height,key:An.Z.GAMEPLAY_DEFAULT_LANDSCAPE.KEY,frame:An.Z.GAMEPLAY_DEFAULT_LANDSCAPE.FRAME.TOURNAMENT.BLOCK_BACKGROUND,symmetricType:ed.HORIZONTAL}),this.add(this.shadowBackground)},n.createHeader=function(){this.header=new QS(this.scene),this.add(this.header)},n.createFooter=function(){this.footer=new mb(this.scene),this.add(this.footer)},n.createStar=function(){this.starIcon=this.scene.add.image(0,0,yb,Ab.TOURNAMENT.IC_STAR),this.starIcon.setWorldSize(21,21.5),this.add(this.starIcon)},n.alignComponents=function(){Phaser.Display.Align.In.Center(this.shadowBackground,this),Phaser.Display.Align.In.TopCenter(this.header,this,0,-1),Phaser.Display.Align.In.BottomCenter(this.footer,this,0,-1.5),Phaser.Display.Align.In.TopLeft(this.starIcon,this,5,1)},n.createLeaderListApiService=function(){this.leaderListApiService=new AT(this.scene,void 0)},n.updateInfo=function(){var e=(0,s.Z)(u().mark((function e(t){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.payload=t,e.next=4,this.fetchLeaderboardData().catch((function(e){}));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.fetchLeaderboardData=function(){var e=(0,s.Z)(u().mark((function e(){var t,n,i,a,s;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((t=this.header.leaderList).bringToTop(t.loading),e.prev=2,this.payload.payload){e.next=5;break}throw new Error("Payload is empty");case 5:if(n=this.payload.idRequest,!this.payload.payload.leaderboard){e.next=11;break}t.showContent(),t.updateLeaders(this.payload.payload.leaderboard),e.next=26;break;case 11:if(t.loading.revive(),t.hideContent(),a=null==(i=this.payload.payload)?void 0:i.leaderboardId){e.next=16;break}throw new Error("Leaderboard ID is not defined");case 16:return this.leaderListApiService.updateLeaderboardId(a),e.next=19,this.leaderListApiService.getProcessedLeaderPayloadAsync();case 19:if(s=e.sent,this.payload.idRequest==n){e.next=22;break}return e.abrupt("return");case 22:t.revive(),t.updateLeaders(s),this.payload.payload.leaderboard=s,t.showContent();case 26:e.next=32;break;case 28:e.prev=28,e.t0=e.catch(2),this.payload.payload&&n==this.payload.idRequest&&(this.payload.payload.leaderboard=void 0);case 32:return e.prev=32,this.payload.payload&&n==this.payload.idRequest&&t.loading.kill(),e.finish(32);case 35:case"end":return e.stop()}}),e,this,[[2,28,32,35]])})));return function(){return e.apply(this,arguments)}}(),t}(Phaser.GameObjects.Container),Ib=An.Z.GAMEPLAY_DEFAULT,wb=Ib.KEY,_b=Ib.FRAME,xb=function(e){function t(t){var n;return(n=e.call(this,t)||this).handleJoinTournament=(0,s.Z)(u().mark((function e(){var t,i,a,s,r,o,c,h;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return SC.setData(n.payload),a=n.payload.id,s=n.payload.endTime,r=(null==(t=n.payload.payload)?void 0:t.leaderboardId)||"",o=(null==(i=n.payload.payload)?void 0:i.level)||1,e.prev=6,e.next=9,n.scene.facebook.tournament.joinAsync(a.toString());case 9:n.scene.storage.dispatch(sr(a.toString(),r)),n.scene.storage.dispatch(tc()),c={leaderboardId:r,endTime:s,level:o},n.scene.player.joinTournament(c),n.scene.screen.close(cs.o4.TOURNAMENTS_SCREEN),null==(h=n.scene)||h.gameplay.startNewGame(),e.next=25;break;case 18:if(e.prev=18,e.t0=e.catch(6),SC.clearData(),"USER_INPUT"!==(null==e.t0?void 0:e.t0.code)){e.next=24;break}return e.abrupt("return");case 24:throw e.t0;case 25:case"end":return e.stop()}}),e,null,[[6,18]])}))),n.createDebugButton(),n.handleInput(),t.events.on(Phaser.Scenes.Events.UPDATE,(function(){var e;null!=(e=t.screen.get(cs.o4.TOURNAMENTS_SCREEN))&&e.visible&&n.updateJoinButton()})),n}(0,r.Z)(t,e);var n=t.prototype;return n.updateInfo=function(){var e=(0,s.Z)(u().mark((function e(t){var n,i,a,s;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.payload=t,this.payload.idRequest=(new Date).getTime(),a=0;try{a=(9301*dT()(String(t.id))+49297)%6}catch(r){}return s=void 0==(null==(n=t.payload)?void 0:n.image)?a:null==(i=t.payload)?void 0:i.image,this.header.updateBackground(s),this.footer.updateTitle(t.title),this.updateTimer(t.endTime),e.next=10,this.fetchLeaderboardData().catch((function(e){}));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.updateTimer=function(e){this.footer.timerContainer.setCountdown(e)},n.createDebugButton=function(){var e=this;if(GameCore.Utils.Valid.isDebugger()){var t=new Nh.Z(this.scene,20,20),n=this.scene.add.image(0,0,wb,_b.IC_BG_OFF);n.setWorldSize(20,20);var i=this.scene.make.bitmapText({font:gc.Z.PRIMARY.KEY,size:this.scene.fontSize(10),text:"PL",origin:{x:.5,y:.5}});i.setCenterAlign(),t.add([n,i]),this.add(t),Phaser.Display.Align.In.TopLeft(t,this,10,-40),t.onClick=function(){if(!e.isCurrentTournamentBeingPlayed()){var t=e.scene.storage.getState();qs(t)}}}},n.handleInput=function(){var e=this,t=this.footer.joinButton;t.onClick=(0,s.Z)(u().mark((function n(){return u().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(t.buttonState!==nb.JOIN){n.next=18;break}return n.prev=1,e.scene.game.globalScene.screen.open(cs.o4.NOTIFY_SCREEN,{message:"joiningTournament",loading:!0}),n.next=5,(0,ls.qZ)(500);case 5:return n.next=7,e.handleJoinTournament();case 7:kb(100),n.next=13;break;case 10:n.prev=10,n.t0=n.catch(1),window.game.globalScene.screen.open(cs.o4.NOTIFY_SCREEN,{message:"cannotJoin",duration:3e3,loading:!1});case 13:return n.prev=13,e.updateTextPlay(),n.finish(13);case 16:n.next=19;break;case 18:e.scene.screen.close(cs.o4.TOURNAMENTS_SCREEN);case 19:e.updateTextPlay();case 20:case"end":return n.stop()}}),n,null,[[1,10,13,16]])})))},n.updateJoinButton=function(){var e=this.footer.joinButton;0===this.footer.timerContainer.getRemain()?e.setDisabled(!0):e.setDisabled(!1),this.updateTextPlay()},n.isThisTournamentIdIdenticalToCurrentTournament=function(){var e=this.scene.storage.getState(),t=qs(e);return GameCore.Utils.Valid.isNumber(t)?t===this.payload.id:!!GameCore.Utils.Valid.isString(t)&&t===""+this.payload.id},n.isCurrentTournamentBeingPlayed=function(){return this.isThisTournamentIdIdenticalToCurrentTournament()&&To.instance.isTournamentMode()},n.updateTextPlay=function(){this.footer.joinButton.switchState(this.isCurrentTournamentBeingPlayed()?nb.CONTINUE:nb.JOIN)},t}(bb),Pb=null,kb=function(e){Pb&&clearTimeout(Pb),Pb=setTimeout((function(){window.game.globalScene.screen.close(cs.o4.NOTIFY_SCREEN)}),e)},Ob=function(e){function t(t){var n;return(n=e.call(this,t,269/1.5,46/1.5)||this).setName("CreateNewTournament"),n.createBackground(),n.createContents(),n}(0,r.Z)(t,e);var n=t.prototype;return n.createBackground=function(){var e=this.scene.make.image({key:An.Z.GAMEPLAY_DEFAULT_LANDSCAPE.KEY,frame:An.Z.GAMEPLAY_DEFAULT_LANDSCAPE.FRAME.TOURNAMENT.BUTTON_CREATE});e.setWorldSize(this.width,this.height),this.add(e)},n.createContents=function(){var e=new bl(this.scene,{iconTextPadding:8,fontSize:13,text:"createTournament",iconKey:An.Z.GAMEPLAY_DEFAULT_LANDSCAPE.KEY,iconFrame:An.Z.GAMEPLAY_DEFAULT_LANDSCAPE.FRAME.IC_NEW,iconWidth:13,iconHeight:14.5});e.text.setMaxSize(150,25,!0),this.add(e)},t}(Nh.Z),Lb=An.Z.GAMEPLAY_DEFAULT,Rb=Lb.KEY,Bb=Lb.FRAME,Db=function(e){function t(t,n,i,a){var r;return(r=e.call(this,t,n,i)||this).illustration=void 0,r.createNewTournamentButton=void 0,r.payload=void 0,r.scrollerManager=void 0,r.handleCreateTournament=(0,s.Z)(u().mark((function e(){var t,n,i,a,s;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.scene.game.globalScene,e.prev=1,n=r.scene.player.getPlayer(),i=n.playerId,a=n.name,s={playerId:i,playerName:a,score:0,autoStartGame:!0,success:!0,image:1+Math.floor(3*Math.random())},t.screen.open(cs.o4.NOTIFY_SCREEN,{message:"creatingTournament",loading:!0}),e.next=7,(0,ls.qZ)(500);case 7:return e.next=9,lc();case 9:return e.next=11,r.scene.storage.dispatch(rr(s));case 11:return r.scene.storage.dispatch(tc()),e.next=14,r.updateTournaments();case 14:r.scene.screen.close(cs.o4.TOURNAMENTS_SCREEN),r.scene.gameplay.startNewGame(),Mb(0),e.next=26;break;case 20:if(e.prev=20,e.t0=e.catch(1),"USER_INPUT"!==(null==e.t0?void 0:e.t0.code)){e.next=25;break}return Mb(0),e.abrupt("return");case 25:t.screen.open(cs.o4.NOTIFY_SCREEN,{message:"cannotCreateTournament",duration:2e3,loading:!1});case 26:case"end":return e.stop()}}),e,null,[[1,20]])}))),r.updateTournaments=(0,s.Z)(u().mark((function e(){var t,n,i;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=(0,$a.Z)(r),n=t.scrollerManager,i=n.tournamentsContainer,n.forceLoadData=!0,i.updateScrollerIdx(r.scrollerManager),e.next=6,i.updateContainer();case 6:n.scroller.setEnable(!0);case 7:case"end":return e.stop()}}),e)}))),r.scrollerManager=a,r.setSize(311/1.5,280/1.5),r.createIllustration(),r.createText(),r.createButton(),r}(0,r.Z)(t,e);var n=t.prototype;return n.addBackground=function(){var e="no-tournament-block-background";if(!this.scene.textures.exists(e)){var t=this.width,n=this.height,i=this.scene.add.graphics();i.fillStyle(65280,.2),i.fillRect(0,0,t,n),i.generateTexture(e,t,n),i.destroy()}var a=this.scene.add.image(0,0,e);this.add(a)},n.createIllustration=function(){var e=new td(this.scene,{key:Rb,frame:Bb.NO_TOURNAMENT,width:125.6,height:121.3});this.add(e),this.illustration=e,Phaser.Display.Align.In.TopCenter(e,this)},n.createText=function(){var e=this.scene.make.bitmapText({font:gc.Z.BOLD.KEY,size:this.scene.fontSize(10),text:"youHaveNoTournaments",origin:{x:.5,y:.5}}).setTint(16579837);e.setMaxSize(200,20),this.add(e),this.alignUnder(e,this.illustration)},n.createButton=function(){var e=this;this.createNewTournamentButton=new Ob(this.scene),this.add(this.createNewTournamentButton),this.createNewTournamentButton.onClick=function(){e.handleCreateTournament()},Phaser.Display.Align.In.BottomCenter(this.createNewTournamentButton,this)},n.alignUnder=function(e,t){var n=(e.height+t.height)/2;Phaser.Display.Align.In.Center(e,t,0,n+10)},t}(Phaser.GameObjects.Container),Nb=null,Mb=function(e){Nb&&clearTimeout(Nb),Nb=setTimeout((function(){window.game.globalScene.screen.close(cs.o4.NOTIFY_SCREEN)}),e)},Gb=function(){function e(e,t,n){this.scene=void 0,this.name=void 0,this.scroller=void 0,this.tournamentsContainer=void 0,this.noTournamentBlock=void 0,this.loadData=!1,this.debugNoTournament=!1,this.scene=e.scene,this.tournamentsContainer=e,this.scroller=t,this.name=n||"",this.createNoTournamentBlock()}var t=e.prototype;return t.createNoTournamentBlock=function(){var e=this;this.noTournamentBlock=new Db(this.scene,0,0,this),this.tournamentsContainer.add(this.noTournamentBlock),this.tournamentsContainer.bringToTop(this.noTournamentBlock),this.noTournamentBlock.kill(),this.scene.events.on(Phaser.Scenes.Events.UPDATE,(function(){e.noTournamentBlock.active&&Phaser.Display.Align.In.Center(e.noTournamentBlock,e.scroller)}))},t.setMask=function(e){this.scroller.setMask(e),this.noTournamentBlock.setMask(e)},t.updateScroller=function(){var e=this.getListData();if(e.length<1)return this.scroller.setEnable(!1),this.noTournamentBlock.revive(),void this.scroller.updateConfig(e);this.noTournamentBlock.kill(),this.scroller.setEnable(!0),this.scroller.updateConfig(e),this.scroller.onTouchEnd()},t.parseResponsesIntoTournaments=function(){var e=[];return this.filterTournament().forEach((function(t){try{var n=t.getID(),i=t.getPayload();if(!i)return;var a=JSON.parse(i),s=a.playerName;if(!a.leaderboardId)throw new OC(null,a);var r={id:n,title:t.getTitle()||s+"'s Tournament",payload:a,endTime:t.getEndTime(),contextID:t.getContextID()};e.push(r)}catch(o){}})),e},(0,ce.Z)(e,[{key:"forceLoadData",get:function(){return this.loadData},set:function(e){this.loadData=e}},{key:"forceNoTournament",get:function(){return this.debugNoTournament&&!this.loadData},set:function(e){this.debugNoTournament=e}}]),e}(),Zb=function(e){function t(t,n,i){var a;return(a=e.call(this,t,n,i)||this).noTournamentBlock.createNewTournamentButton.kill(),a}(0,r.Z)(t,e);var n=t.prototype;return n.getListData=function(){return this.forceNoTournament?[]:this.tournamentsContainer.getWorldTournamentsData()},n.filterTournament=function(){var e=this.tournamentsContainer.getTournaments();return Le()(e).call(e,(function(e){return!!e.getPayload()}))},t}(Gb),Fb=function(e){function t(t,n,i){var a;return(a=e.call(this,t,n,i)||this).noTournamentBlock.createNewTournamentButton.kill(),a}(0,r.Z)(t,e);var n=t.prototype;return n.getListData=function(){return this.forceNoTournament?[]:this.parseResponsesIntoTournaments()},n.filterTournament=function(){var e=this.scene.player.getPlayerId(),t=this.tournamentsContainer.getTournaments();return Le()(t).call(t,(function(t){var n=t.getPayload();if(!n)return!1;try{var i=JSON.parse(n);return i.playerId&&e!=i.playerId}catch(a){return!1}}))},t}(Gb),Ub=function(e){function t(t,n,i){var a;return(a=e.call(this,t,n,i)||this).noTournamentBlock.createNewTournamentButton.revive(),a.forceNoTournament=!1,a}(0,r.Z)(t,e);var n=t.prototype;return n.getListData=function(){return this.forceNoTournament?[]:this.parseResponsesIntoTournaments()},n.filterTournament=function(){var e=this.scene.player.getPlayerId(),t=this.tournamentsContainer.getTournaments(),n=Le()(t).call(t,(function(t){var n=t.getPayload();if(!n)return!1;try{var i=JSON.parse(n);return i.playerId&&e===i.playerId}catch(a){return!1}}));return n},t}(Gb),zb=An.Z.GAMEPLAY_DEFAULT_LANDSCAPE,Wb=zb.KEY,Yb=zb.FRAME,Hb=function(e){function t(t){var n;return(n=e.call(this,t)||this).backButton=void 0,n.createBackground(),n.createBackButton(),n}(0,r.Z)(t,e);var n=t.prototype;return n.createBackground=function(){var e=new td(this.scene,{width:234,height:46.5,key:Wb,frame:Yb.TOURNAMENT.BOTTOM_BAR,symmetricType:ed.HORIZONTAL});e.setInteractive(),this.add(e),this.setSize(e.width,e.height)},n.createBackButton=function(){var e=this;this.backButton=new Nh.Z(this.scene,130.5,33.5);var t=new bl(this.scene,{iconTextPadding:5,text:"backToGame",fontSize:12,iconKey:Wb,iconFrame:Yb.TOURNAMENT.IC_BACK,iconWidth:13.5,iconHeight:12.5});t.text.setMaxSize(105,25,!0);var n=this.scene.add.image(0,0,Wb,Yb.TOURNAMENT.BACK_BUTTON);n.setWorldSize(130.5,33.5),this.backButton.add([n,t]),Phaser.Display.Align.In.Center(t,this.backButton,0,-1),this.add(this.backButton),Phaser.Display.Align.In.Center(this.backButton,this,0,2),this.backButton.onClick=function(){e.scene.screen.close(cs.o4.TOURNAMENTS_SCREEN)}},t}(Phaser.GameObjects.Container),Kb=Hb,jb=Gy,Vb=My,Jb=Zy,Xb=[Vb,jb,Jb],qb=An.Z.GAMEPLAY_DEFAULT_LANDSCAPE,Qb=qb.KEY,$b=qb.FRAME,eI=function(e){function t(t){var n;return(n=e.call(this,t)||this).header=void 0,n.footer=void 0,n.tab=void 0,n.scrollers=[],n.scrollerManagers=[],n.tabNames=Xb,n.currentIdx=0,n.tournaments=[],n.worldTournament=[],n.loading=void 0,n.updateContainer=(0,s.Z)(u().mark((function e(){var t,i;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=n.tab.getCurrentIdx(),n.loading.revive(),n.scrollers.forEach((function(e,t){e.setEnable(!1),e.kill()})),e.next=5,n.loadTournament();case 5:return e.next=7,n.loadWorldTournament();case 7:if(n.loading.kill(),n.scrollerManagers.forEach((function(e){e.updateScroller(),e.scroller.revive()})),null==(t=n.scrollers[i])||t.setEnable(!0),!GameCore.Utils.Device.isMobile()){e.next=12;break}return e.abrupt("return");case 12:n.scrollers.forEach((function(e,t){t!==i&&e.setEnable(!1)}));case 13:case"end":return e.stop()}}),e)}))),n.setSizeContainer(),n.createHeader(),n.createTabSelector(),n.createFooter(),n.createScrollers(),n.add([n.header,n.tab,n.footer]),n.createLoading(),n.addMask(),n.addMaskHitZone(),n.tab.selectTab(0),n}(0,r.Z)(t,e);var n=t.prototype;return n.getWorldTournamentsData=function(){return this.worldTournament},n.getTournaments=function(){return this.tournaments},n.setSizeContainer=function(){var e=new td(this.scene,{width:239,height:388,key:Qb,frame:$b.TOURNAMENT.BACKGROUND});this.add(e),this.setSize(e.width,e.height)},n.createHeader=function(){this.header=new LS(this.scene),this.bringToTop(this.header),this.header.setInteractive(),Phaser.Display.Align.In.TopCenter(this.header,this,0,-1.5)},n.createFooter=function(){this.footer=new Kb(this.scene),this.footer.setInteractive(),Phaser.Display.Align.In.BottomCenter(this.footer,this,0,-5)},n.createTabSelector=function(){var e=this;this.tab=new vg(this.scene,227,20,3),Phaser.Display.Align.In.BottomCenter(this.tab,this.header,0,-10);var t=Be()(Xb).call(Xb,(function(t,n){var i=e.scene.make.bitmapText({font:gc.Z.BOLD.KEY,size:e.scene.fontSize(10),text:t,origin:{x:.5,y:.5}});return i.setMaxSize(70,20),i}));this.tab.addLabels(t),this.tab.callback=function(n){t.forEach((function(e,t){return e.setTint(n==t?3239751:12306616)}));var i=e.currentIdx<n?e.width:-e.width;e.scene.tweens.add({targets:e.getContainers(e.currentIdx),x:-i,alpha:0,duration:200,ease:Phaser.Math.Easing.Sine.InOut}),e.scrollers[e.currentIdx].setEnable(!1),e.scrollers[n].setEnable(!0),e.scene.tweens.add({targets:e.getContainers(n),x:{from:i,to:0},alpha:1,duration:200,ease:Phaser.Math.Easing.Sine.InOut}),e.currentIdx=n}},n.getContainers=function(e){return[this.scrollers[e],this.scrollerManagers[e].noTournamentBlock]},n.createScrollers=function(){var e=this;this.scrollers=[],this.scrollerManagers=[],Xb.forEach((function(t){e.createScroller(t)})),this.scrollers.forEach((function(e,t){e.setX(239*t),t>0&&e.setAlpha(0)}))},n.createScroller=function(e){var t=this.height-this.footer.height-this.header.height,n=new kC.Z(this.scene,{classType:xb,listConfigs:[],width:this.width,height:t,padding:10,marginTop:8,marginBottom:30});n.createScrollerBar(2,4),this.add(n),n.setEnable(!0),Phaser.Display.Align.To.BottomCenter(n,this.header,0,-3),this.scrollers.push(n);var i=this.createScrollerManager(n,e);i&&this.scrollerManagers.push(i)},n.createScrollerManager=function(e,t){switch(t){case Vb:return new Zb(this,e,t);case jb:return new Fb(this,e,t);case Jb:return new Ub(this,e,t);default:return null}},n.distanceBetweenTabBottomAndFooterTop=function(){return this.footer.y-this.header.y-(this.footer.height+this.header.height)/2},n.updateScrollerIdx=function(e){for(var t=0;t<this.scrollerManagers.length;t++)e===this.scrollerManagers[t]&&(this.currentIdx=t)},n.loadTournament=function(){var e=(0,s.Z)(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.scene.facebook.tournament.getTournamentsAsync();case 3:this.tournaments=e.sent,e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),this.tournaments=[];case 10:case"end":return e.stop()}}),e,this,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),n.loadWorldTournament=function(){var e=(0,s.Z)(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,tr.Iy)();case 3:this.worldTournament=e.sent,e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),this.worldTournament=[];case 10:case"end":return e.stop()}}),e,this,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),n.addMask=function(){var e=this,t=this.scene.make.graphics({fillStyle:{color:255,alpha:0},visible:!1});t.setName("MaskGraphics");var n=this.tab.x,i=(this.footer.y-this.footer.height/2+(this.header.y+this.header.height/2))/2,a=this.width-6,s=this.distanceBetweenTabBottomAndFooterTop()+4,r=n-a/2,o=i-s/2;t.fillRoundedRect(r,o,a,s,0),this.scrollerManagers.forEach((function(e){e.setMask(t.createGeometryMask())})),this.scene.events.on(Phaser.Scenes.Events.UPDATE,(function(){var n=e.getWorldPosition(),i=n.x,a=n.y;t.setPosition(i,a)}))},n.addMaskHitZone=function(){var e=this.scene.world.getWorldSize().height-this.height,t=this.scene.add.zone(0,0,this.width,e/2);t.setInteractive(),Phaser.Display.Align.In.TopCenter(t,this,0,t.height),this.add(t);var n=this.scene.add.zone(0,0,this.width,e/2);n.setInteractive(),Phaser.Display.Align.To.BottomCenter(n,this.footer),this.add(n)},n.createLoading=function(){var e=new ET.Z(this.scene);e.setVisible(!0),this.add(e),this.loading=e},t}(Phaser.GameObjects.Container),tI=eI,nI=function(e){function t(t,n,i,a){var s;return(s=e.call(this,t,n,i,a)||this).fadeInAnimation=void 0,s.fadeOutAnimation=void 0,s.tournamentsContainer=void 0,s.setBackground=function(){s.background.setTint(1315862),s.background.setAlpha(.5)},s.setDepth(cs.Ks.POPUP),s.tournamentsContainer=new tI(t),s.add(s.tournamentsContainer),s.setBackground(),s}(0,r.Z)(t,e);var n=t.prototype;return n.open=function(){e.prototype.open.call(this),this.setBlockInputOutsideEnabled(!0),this.tournamentsContainer.setAlpha(1),this.tournamentsContainer.updateContainer(),this.runOpenAnimation()},n.close=function(){this.runCloseAnimation()},n.runOpenAnimation=function(){var e=this;this.scene.audio.playSound(hs.Z.POPUP_SHOW),this.scene.time.delayedCall(100,(function(){En.Z.openScreen(e,!1)})),this.fadeInAnimation||(this.fadeInAnimation=new yh.Z({targets:[this],duration:300})),this.fadeInAnimation.play()},n.runCloseAnimation=function(){var t,n,i=this;null!=(t=this.fadeOutAnimation)&&null!=(n=t.tween)&&n.isPlaying()||(this.scene.time.delayedCall(100,(function(){En.Z.closeScreen(i)})),this.scene.audio.playSound(hs.Z.POPUP_OFF),this.fadeOutAnimation||(this.fadeOutAnimation=new ef.Z({targets:[this],props:{alpha:0},duration:300,onComplete:function(){i.scene.events.emit("tournament-close"),e.prototype.close.call(i)}})),this.fadeOutAnimation.play())},t}(GameCore.Screen),iI=nI,aI=GameCore.world.isLandscape()?iI:wS,sI=function(e){function t(t){var n;return(n=e.call(this,t)||this)._avatar=void 0,n._username=void 0,n._shine=void 0,n._shineAnimation=void 0,n.setSizeContainer(),n.createShine(),n.createAvatarFrame(),n.createText(),n.alignComponents(),n}(0,r.Z)(t,e);var n=t.prototype;return n.hideContent=function(){this._avatar.setScale(0),this._username.setAlpha(0),this._shine.setAlpha(0),this.stopShineAnimation()},n.runEntranceAnimationAvatar=function(){var e=(0,s.Z)(u().mark((function e(){var t=this;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new(c())((function(e){t.scene.add.tween({targets:t._avatar,duration:300,ease:Phaser.Math.Easing.Cubic.Out,props:{scale:{from:0,to:1}},onComplete:e})})));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),n.runEntranceAnimationUsername=function(){var e=(0,s.Z)(u().mark((function e(){var t=this;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new(c())((function(e){t.scene.add.tween({targets:t._username,duration:300,ease:Phaser.Math.Easing.Sine.Out,props:{alpha:{from:0,to:1}},onComplete:e})})));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),n.runShineAnimation=function(){var e;null==(e=this._shineAnimation)||e.stop(),this._shineAnimation=this.scene.add.tween({targets:this._shine,angle:360,duration:5e3,loop:-1})},n.stopShineAnimation=function(){var e;null==(e=this._shineAnimation)||e.stop()},n.runEntranceAnimationWin=function(){var e=(0,s.Z)(u().mark((function e(){var t,n=this;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.scene.world.getPixelRatio(),e.abrupt("return",new(c())((function(e){n.scene.add.tween({targets:n._shine,ease:Phaser.Math.Easing.Sine.Out,duration:100,props:{alpha:{from:0,to:.5},scale:{from:0,to:1/t}},onComplete:e})})));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.runEntranceAnimation=function(){var e=(0,s.Z)(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c().all([this.runEntranceAnimationAvatar(),this.runEntranceAnimationUsername()]);case 2:return e.next=4,this.runEntranceAnimationWin();case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),(0,ce.Z)(t,[{key:"avatar",get:function(){return this._avatar}},{key:"username",get:function(){return this._username}}]),t}(Phaser.GameObjects.Container),rI=An.Z.GAMEPLAY_DEFAULT,oI=rI.KEY,cI=rI.FRAME,hI=function(e){function t(t){return e.call(this,t)||this}(0,r.Z)(t,e);var n=t.prototype;return n.setSizeContainer=function(){this.setSize(54,120)},n.createShine=function(){this._shine=this.scene.add.image(0,0,oI,cI.AVATAR_SHINE),this._shine.setWorldSize(225,201),this.add(this._shine)},n.createAvatarFrame=function(){this._avatar=new vc(this.scene,{key:oI,background:cI.BLANK,frame:cI.AVATAR_BLUE,width:80,height:80,loadDelay:100}),this._avatar.update(),this._avatar.background.kill(),this._avatar.loadPhoto(xa.Z.AVATAR.KEY,xa.Z.AVATAR.FILE,75),this.add(this._avatar)},n.createText=function(){this._username=this.scene.make.text({style:{fontFamily:gc.Z.FONT_FAMILY},origin:{x:.5,y:.5}}),this._username.setHighQuality(),this._username.setFontSize(17),this._username.setText("Name"),this.username.setIgnoreLanguage(),this.add(this._username)},n.alignComponents=function(){Phaser.Display.Align.In.BottomCenter(this._username,this,0,3),Phaser.Display.Align.In.Center(this._avatar,this)},n.setWinner=function(e){void 0===e&&(e=!0),this._shine.setVisible(e),1==e&&(this._avatar.setFrame(cI.AVATAR_WIN),this.runShineAnimation())},t}(sI),uI=function(e){return e.WIN="win",e.LOSE="lose",e.DRAW="draw",e.WAITING_FOR_OPPONENT="waiting_for_opponent",e}(uI||{}),lI=uI,dI=function(e){function t(t){var n;return(n=e.call(this,t)||this)._youAvatar=void 0,n._opponentAvatar=void 0,n._versusText=void 0,n.setSizeContainer(),n.createAvatars(),n.createVersusText(),n.alignComponents(),n}(0,r.Z)(t,e);var n=t.prototype;return n.hideContent=function(){this._youAvatar.hideContent(),this._opponentAvatar.hideContent(),this._versusText.setAlpha(0)},n.runEntranceAnimationVersusText=function(){var e=(0,s.Z)(u().mark((function e(){var t=this;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new(c())((function(e){t.scene.add.tween({targets:t.versusText,duration:100,ease:Phaser.Math.Easing.Sine.Out,props:{alpha:{from:0,to:1},y:{from:t.versusText.y+t.versusText.height/4,to:t.versusText.y}},onComplete:e})})));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),n.runEntranceAnimation=function(){var e=(0,s.Z)(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c().all([this._youAvatar.runEntranceAnimation(),this._opponentAvatar.runEntranceAnimation()]);case 2:return e.next=4,this.runEntranceAnimationVersusText();case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),(0,ce.Z)(t,[{key:"youAvatar",get:function(){return this._youAvatar}},{key:"opponentAvatar",get:function(){return this._opponentAvatar}},{key:"versusText",get:function(){return this._versusText}}]),t}(Phaser.GameObjects.Container),pI=An.Z.GAMEPLAY_DEFAULT,fI=pI.KEY,gI=pI.FRAME,mI=function(e){function t(t){return e.call(this,t)||this}(0,r.Z)(t,e);var n=t.prototype;return n.setSizeContainer=function(){this.setSize(375,100)},n.createAvatars=function(){this._youAvatar=new hI(this.scene),this._opponentAvatar=new hI(this.scene),this._youAvatar.avatar.setFrame(gI.AVATAR_ORANGE),this.add([this._youAvatar,this._opponentAvatar])},n.createVersusText=function(){this._versusText=this.scene.add.image(0,0,fI,gI.IC_VERSUS),this._versusText.setWorldSize(70.5,23.5),this.add(this._versusText)},n.alignComponents=function(){Phaser.Display.Align.In.Center(this._versusText,this),Phaser.Display.Align.In.Center(this._youAvatar,this._versusText,95),Phaser.Display.Align.In.Center(this._opponentAvatar,this._versusText,-95)},n.addBackground=function(){var e="avatar-zone-background";if(!this.scene.textures.exists(e)){var t=this.width,n=this.height,i=this.scene.add.graphics();i.fillStyle(65280,.2),i.fillRect(0,0,t,n),i.generateTexture(e,t,n),i.destroy()}var a=this.scene.add.image(0,0,e);this.add(a)},n.updateState=function(e){switch(e){case lI.WIN:this._youAvatar.setWinner(!0),this._opponentAvatar.setWinner(!1);break;case lI.LOSE:this._youAvatar.setWinner(!1),this._opponentAvatar.setWinner(!0);break;case lI.DRAW:default:this._youAvatar.setWinner(!1),this._opponentAvatar.setWinner(!1)}},t}(dI),vI=function(e){function t(t){var n;return(n=e.call(this,t)||this).winLoseText=void 0,n.cardChain=void 0,n.ribbon=void 0,n.waitingAnimationEvent=void 0,n.waitingAnimation=void 0,n.spade=void 0,n.heart=void 0,n.setSize(303,110),n.addRibbon(),n.addSpadeAndHeart(),n.createWinLoseText(),n}(0,r.Z)(t,e);var n=t.prototype;return n.playWaitingAnimation=function(){var e=this,t=0;this.winLoseText.setTranslationParameters({dots:""}),this.winLoseText.setText("waitingLoading"),this.waitingAnimationEvent=this.scene.time.addEvent({delay:500,repeat:-1,callback:function(){t=(t+1)%4;var n=Array(t+1).join(".");e.winLoseText.setTranslationParameters({dots:n})}}),this.waitingAnimation=this.scene.add.tween({targets:this.winLoseText,alpha:.5,repeat:-1,yoyo:!0,delay:250,ease:Phaser.Math.Easing.Sine.InOut})},n.stopWaitingAnimation=function(){if(this.waitingAnimationEvent)try{this.waitingAnimationEvent.remove(),this.waitingAnimationEvent.destroy()}catch(e){}if(this.waitingAnimation)try{this.waitingAnimation.remove(),this.waitingAnimation.destroy()}catch(t){}this.winLoseText.setAlpha(1),this.cardChain.stopAnimation()},t}(Phaser.GameObjects.Container),yI=function(e){function t(t,n){var i;return(i=e.call(this,t)||this).chain=void 0,i.timeline=void 0,i.config=void 0,i.config=(0,a.Z)({cardWidth:36.75,cardHeight:54,radius:100},n),i.createCards(),i.align(),i}(0,r.Z)(t,e);var n=t.prototype;return n.createCards=function(){var e=this.config,t=e.cardWidth,n=e.cardHeight,i=this.scene.theme.getCurrentThemeConfig().cardFaceKey,a=this.scene.add.image(0,0,i,"201"),s=this.scene.add.image(0,0,i,"401"),r=this.scene.add.image(0,0,i,"101"),o=this.scene.add.image(0,0,i,"301");this.chain=[a,s,r,o],this.chain.forEach((function(e){e.setWorldSize(t,n)})),this.add(this.chain)},n.revive=function(){e.prototype.revive.call(this);var t=this.config,n=t.cardWidth,i=t.cardHeight,a=this.scene.theme.getCurrentThemeConfig().cardFaceKey;this.chain[0].setTexture(a,"201").setWorldSize(n,i),this.chain[1].setTexture(a,"401").setWorldSize(n,i),this.chain[2].setTexture(a,"101").setWorldSize(n,i),this.chain[3].setTexture(a,"301").setWorldSize(n,i)},n.align=function(){var e=this.config.radius,t=this.chain.length;if(!(t<=1))for(var n=0;n<this.chain.length;n++){var i=this.chain[n],a=60/(t-1)*n-30,s=Math.cos((a-90)*Math.PI/180),r=Math.sin((a-90)*Math.PI/180);i.setAngle(a),i.setPosition(s*e,r*e+85)}},n.playAnimation=function(e,t){var n=this,i=8750469,a=16777215,s=e||100,r=t||110;this.align(),this.chain.forEach((function(e){e.setTint(i)}));for(var o=this.scene.tweens.createTimeline({loop:-1}),c=function(e){var t=n.chain[e],c=t.angle,h=Math.cos((c-90)*Math.PI/180),u=Math.sin((c-90)*Math.PI/180),l=h*s,d=h*r,p=u*s+85,f=u*r+85;o.add({targets:{value:0},value:1,duration:500,ease:Phaser.Math.Easing.Sine.Out,onUpdate:function(e){n.bringToTop(t);var s=e.getValue(),r=Phaser.Display.Color.IntegerToColor(i),o=Phaser.Display.Color.IntegerToColor(a),c=Phaser.Display.Color.Interpolate.ColorWithColor(r,o,100,100*s),h=Phaser.Display.Color.GetColor(c.r,c.g,c.b);t.x=Phaser.Math.Linear(l,d,s),t.y=Phaser.Math.Linear(p,f,s),t.setTint(h)}});o.add({targets:{value:0},value:1,duration:500,ease:Phaser.Math.Easing.Sine.In,onUpdate:function(e){n.bringToTop(t);var s=e.getValue(),r=Phaser.Display.Color.IntegerToColor(a),o=Phaser.Display.Color.IntegerToColor(i),c=Phaser.Display.Color.Interpolate.ColorWithColor(r,o,100,100*s),h=Phaser.Display.Color.GetColor(c.r,c.g,c.b);t.x=Phaser.Math.Linear(d,l,s),t.y=Phaser.Math.Linear(f,p,s),t.setTint(h)}})},h=0;h<this.chain.length;h++)c(h);this.timeline=o,o.play()},n.stopAnimation=function(){var e;null==(e=this.timeline)||e.stop()},t}(Phaser.GameObjects.Container),AI=yI,EI=An.Z.GAMEPLAY_DEFAULT,TI=EI.KEY,CI=EI.FRAME,SI=function(e){function t(t){return e.call(this,t)||this}(0,r.Z)(t,e);var n=t.prototype;return n.createWinLoseText=function(){var e=this.scene.make.bitmapText({font:gc.Z.BOLD_SHADOW_BLUR.KEY,size:this.scene.fontSize(27),origin:{x:.5,y:.5},text:"youWin"});this.add(e),Phaser.Display.Align.In.TopCenter(e,this,0,-65),this.winLoseText=e},n.addRibbon=function(){this.cardChain=new AI(this.scene);var e=this.scene.add.image(0,0,An.Z.GAMEPLAY_DEFAULT.KEY,CI.SUB_RIBBON);e.setWorldSize(177,45),this.ribbon=e,this.add([this.cardChain,e])},n.addSpadeAndHeart=function(){var e=this.scene.add.image(0,0,TI,CI.SPADE);e.setWorldSize(23.5,26.5);var t=this.scene.add.image(0,0,TI,CI.HEART);t.setWorldSize(22,26),this.add([e,t]),this.spade=e,this.heart=t},n.updateWinLoseText=function(e){var t=this;switch(this.stopWaitingAnimation(),e){case lI.WIN:this.winLoseText.setFont(gc.Z.BOLD_SHADOW_BLUR.KEY),this.winLoseText.setFontSize(this.scene.fontSize(24)),this.winLoseText.setText("youWin"),this.winLoseText.setMaxSize(125,30),this.winLoseText.clearTint(),this.winLoseText.setGradientHorizontalTint([{at:0,color:16315097},{at:.5,color:16777215},{at:1,color:16315097}]),this.winLoseText.setRadius(1e3),this.ribbon.setVisible(!0),this.spade.setVisible(!1),this.heart.setVisible(!1),this.ribbon.setTexture(An.Z.GAMEPLAY_DEFAULT.KEY,CI.WIN_RIBBON),this.ribbon.setWorldSize(252,241),this.ribbon.setPosition(0,8),this.cardChain.kill();break;case lI.LOSE:this.winLoseText.setFont(gc.Z.BOLD_SHADOW_BLUR.KEY),this.winLoseText.setFontSize(this.scene.fontSize(34)),this.winLoseText.setText("youLose"),this.winLoseText.setMaxSize(300,40),this.winLoseText.clearGradientTint(),this.winLoseText.setTint(16777215,16777215,12833246,12833246),this.winLoseText.clearRadius(),this.spade.setVisible(!0),this.heart.setVisible(!0),Phaser.Display.Align.To.LeftCenter(this.spade,this.winLoseText,3,-2),Phaser.Display.Align.To.RightCenter(this.heart,this.winLoseText,2,-2),this.winLoseText.on("textChanged",(function(){Phaser.Display.Align.To.LeftCenter(t.spade,t.winLoseText,3,-2),Phaser.Display.Align.To.RightCenter(t.heart,t.winLoseText,2,-2)})),this.ribbon.setVisible(!1),this.cardChain.kill();break;case lI.DRAW:this.winLoseText.setFont(gc.Z.BOLD_SHADOW_BLUR.KEY),this.winLoseText.setFontSize(this.scene.fontSize(24)),this.winLoseText.setText("draw"),this.winLoseText.setMaxSize(125,30),this.winLoseText.x+=4,this.winLoseText.clearTint(),this.winLoseText.setGradientHorizontalTint([{at:0,color:16315097},{at:.5,color:16777215},{at:1,color:16315097}]),this.winLoseText.setRadius(1e3),this.ribbon.setVisible(!0),this.spade.setVisible(!1),this.heart.setVisible(!1),this.ribbon.setTexture(An.Z.GAMEPLAY_DEFAULT.KEY,CI.DRAW_RIBBON),this.ribbon.setWorldSize(230,241),this.ribbon.setPosition(0,6),this.cardChain.kill();break;case lI.WAITING_FOR_OPPONENT:default:this.winLoseText.setFont(gc.Z.BOLD.KEY),this.winLoseText.setFontSize(this.scene.fontSize(18)),this.winLoseText.setText("WAITING"),this.winLoseText.setMaxSize(140,30),this.winLoseText.clearTint(),this.winLoseText.clearGradientTint(),this.winLoseText.setRadius(1e3),this.ribbon.setVisible(!0),this.spade.setVisible(!1),this.heart.setVisible(!1),this.ribbon.setTexture(An.Z.GAMEPLAY_DEFAULT.KEY,CI.SUB_RIBBON),this.ribbon.setWorldSize(177,45),this.ribbon.setPosition(0,28),this.cardChain.revive(),this.playWaitingAnimation(),this.cardChain.playAnimation()}e!=lI.LOSE&&this.winLoseText.off("textChanged")},t}(vI),bI=function(e){function t(t){var n;return(n=e.call(this,t)||this).newGameButton=void 0,n.shareButton=void 0,n.setSizeContainer(),n.createNewGameButton(),n.createShareButton(),n}(0,r.Z)(t,e);var n=t.prototype;return n.hideContent=function(){this.newGameButton.hideContent(),this.shareButton.hideContent()},n.runEntranceAnimation=function(){var e=(0,s.Z)(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c().all([this.newGameButton.runEntranceAnimation(),this.shareButton.runEntranceAnimation()]);case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),t}(Phaser.GameObjects.Container),II=function(e){return e.NEW_GAME="new",e.CLOSE="close",e}({}),wI=function(e){function t(t,n,i){var a;return(a=e.call(this,t,n,i)||this).closeLabel=void 0,a.newGameLabel=void 0,a._buttonState=void 0,a.setName("NewGameButton"),a.createBackground(),a.createNewGameLabel(),a.createCloseLabel(),a.switchState(II.NEW_GAME),a.initOnClick(),a.playPulsateAnimation(),a}(0,r.Z)(t,e);var n=t.prototype;return n.initOnClick=function(){var e=this;this.onClick=(0,s.Z)(u().mark((function t(){var n;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e._buttonState!==II.NEW_GAME){t.next=6;break}return n=e.scene,t.next=4,n.handlePlayWithFriend();case 4:t.next=7;break;case 6:e.scene.time.delayedCall(300,(function(){e.switchState(II.NEW_GAME)}));case 7:e.scene.screen.close(cs.o4.PLAY_WITH_FRIEND_GAME_OVER_SCREEN);case 8:case"end":return t.stop()}}),t)})))},n.playPulsateAnimation=function(){new Vc.Z({targets:[this],duration:1e3,props:{scale:"*=1.05"}}).play()},n.hideContent=function(){this.setAlpha(0)},n.runEntranceAnimation=function(){var e=(0,s.Z)(u().mark((function e(){var t=this;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new(c())((function(e){t.scene.add.tween({targets:t,alpha:1,duration:200,onComplete:function(){t.setDisabled(!1),e()}})})));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),n.switchState=function(e){if(e!==this._buttonState)switch(e){case II.CLOSE:this._buttonState=II.CLOSE,this.closeLabel.revive(),this.newGameLabel.kill();break;case II.NEW_GAME:this._buttonState=II.NEW_GAME,this.closeLabel.kill(),this.newGameLabel.revive()}},t}(Nh.Z),_I=An.Z.GAMEPLAY_DEFAULT,xI=_I.KEY,PI=_I.FRAME,kI=(function(e){e.NEW_GAME="new",e.CLOSE="close"}({}),function(e){function t(t){return e.call(this,t,161,48)||this}(0,r.Z)(t,e);var n=t.prototype;return n.createBackground=function(){var e=this.scene.make.image({key:xI,frame:PI.BTN_NEW_GAME});e.setWorldSize(this.width,this.height),this.add(e)},n.createNewGameLabel=function(){this.newGameLabel=new bl(this.scene),this.newGameLabel.text.setMaxSize(110,30),this.add(this.newGameLabel)},n.createCloseLabel=function(){this.closeLabel=this.scene.make.bitmapText({font:gc.Z.BOLD_SHADOW.KEY,size:this.scene.fontSize(21),text:"close",origin:{x:.5,y:.5}}),this.closeLabel.setMaxSize(130,30),this.add(this.closeLabel),Phaser.Display.Align.In.Center(this.closeLabel,this)},t}(wI)),OI=function(e){function t(t,n,i){var a;return(a=e.call(this,t,n,i)||this).labelContainer=void 0,a.setName("Share"),a.createBackground(),a.createLabel(),a.initOnClick(),a}(0,r.Z)(t,e);var n=t.prototype;return n.initOnClick=function(){var e=this;this.onClick=function(){e.scene.storage.dispatch(Fo())}},n.hideContent=function(){this.setAlpha(0)},n.runEntranceAnimation=function(){var e=(0,s.Z)(u().mark((function e(){var t=this;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new(c())((function(e){t.scene.add.tween({targets:t,alpha:1,duration:200,onComplete:function(){t.setDisabled(!1),e()}})})));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),t}(Nh.Z),LI=An.Z.GAMEPLAY_DEFAULT,RI=LI.KEY,BI=LI.FRAME,DI=function(e){function t(t){return e.call(this,t,123.5,48)||this}(0,r.Z)(t,e);var n=t.prototype;return n.createBackground=function(){var e=this.scene.make.image({key:RI,frame:BI.BTN_SHARE});e.setWorldSize(this.width,this.height),this.add(e)},n.createLabel=function(){this.labelContainer=new bl(this.scene,{iconTextPadding:8,text:"share",iconFrame:An.Z.GAMEPLAY_DEFAULT.FRAME.IC_SHARE}),this.labelContainer.text.setMaxSize(92,30),this.labelContainer.icon.setWorldSize(18.5,22),this.add(this.labelContainer)},t}(OI),NI=function(e){function t(t){return e.call(this,t)||this}(0,r.Z)(t,e);var n=t.prototype;return n.setSizeContainer=function(){this.setSize(375,48)},n.createNewGameButton=function(){var e=new kI(this.scene);this.add(e),Phaser.Display.Align.In.RightCenter(e,this,-30),this.newGameButton=e},n.createShareButton=function(){var e=new DI(this.scene);this.add(e),Phaser.Display.Align.In.LeftCenter(e,this,-30),this.shareButton=e},t}(bI),MI=function(e){function t(t,n,i,a,s,r,o){var c;return(c=e.call(this,t)||this).playerStat=void 0,c.opponentStat=void 0,c.background=void 0,c.setSize(r,o),c.createBackground(),c.addIcon(n),c.createLabel(i),c.createOpponentStat(s),c.createPlayerStat(a),c.setIgnoreLanguage(),c}(0,r.Z)(t,e);var n=t.prototype;return n.updateBackgroundAlpha=function(e){var t=e?uy:ly;this.background.setGradientPoints(t)},n.createBackground=function(){this.background=new hy(this.scene,this.width,this.height,ly),this.add(this.background)},n.setPlayerStat=function(e,t){void 0===t&&(t=!1),this.playerStat.setIgnoreLanguage(!t),this.playerStat.setText(e)},n.setOpponentStat=function(e,t){void 0===t&&(t=!1),this.opponentStat.setIgnoreLanguage(!t),this.opponentStat.setText(e)},n.setIgnoreLanguage=function(){this.playerStat.setIgnoreLanguage(),this.opponentStat.setIgnoreLanguage()},t}(Phaser.GameObjects.Container),GI=function(e){function t(t,n,i,a,s,r,o){return e.call(this,t,n,i,a,s,r,o)||this}(0,r.Z)(t,e);var n=t.prototype;return n.addIcon=function(e){this.add(e),Phaser.Display.Align.In.Center(e,this,0,-7)},n.createLabel=function(e){var t=this.scene.make.bitmapText({font:gc.Z.PRIMARY.KEY,size:this.scene.fontSize(13),text:e,origin:{x:.5,y:.5}});t.setMaxSize(70,20),this.add(t),Phaser.Display.Align.In.Center(t,this,0,13.5)},n.createPlayerStat=function(e){var t=this.scene.make.bitmapText({font:gc.Z.PRIMARY.KEY,size:this.scene.fontSize(20),text:e,origin:{x:.5,y:.5}}).setTint(16577118);this.add(t),Phaser.Display.Align.In.Center(t,this,95),this.playerStat=t},n.createOpponentStat=function(e){var t=this.scene.make.bitmapText({font:gc.Z.PRIMARY.KEY,size:this.scene.fontSize(20),text:e,origin:{x:.5,y:.5}});this.add(t),Phaser.Display.Align.In.Center(t,this,-95),this.opponentStat=t},t}(MI),ZI=function(e){function t(t){var n;return(n=e.call(this,t)||this)._scoreStat=void 0,n._movesStat=void 0,n._timeStat=void 0,n.stats=[],n.setSizeContainer(),n.createScoreStatEntry(),n.createMovesStatEntry(),n.createTimeStatEntry(),n.stats=[n._scoreStat,n._movesStat,n._timeStat],n.updateStatBackgrounds(),n.alignContent(),n}(0,r.Z)(t,e);var n=t.prototype;return n.updateStatBackgrounds=function(){this.stats.forEach((function(e,t){e.updateBackgroundAlpha(t%2==0)}))},n.alignContent=function(){var e=this,t=this.height/3;this.stats.forEach((function(n,i){Phaser.Display.Align.In.TopCenter(n,e,0,-i*t)}))},n.runEntranceAnimationStats=function(){var e=(0,s.Z)(u().mark((function e(){var t,n,i=this;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[this._scoreStat,this._movesStat,this._timeStat],200,n=Be()(t).call(t,(function(e,t){return new(c())((function(n){i.scene.add.tween({targets:e,duration:200,delay:200*t/2,ease:Phaser.Math.Easing.Sine.Out,props:{alpha:{from:0,to:1},y:{from:e.y+e.height/2,to:e.y}},onComplete:n})}))})),e.next=5,c().all(n);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.hideContent=function(){[this._scoreStat,this._movesStat,this._timeStat].forEach((function(e){return e.setAlpha(0)}))},n.runEntranceAnimation=function(){var e=(0,s.Z)(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c().all([this.runEntranceAnimationStats()]);case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),(0,ce.Z)(t,[{key:"scoreStat",get:function(){return this._scoreStat}},{key:"movesStat",get:function(){return this._movesStat}},{key:"timeStat",get:function(){return this._timeStat}}]),t}(Phaser.GameObjects.Container),FI=An.Z.GAMEPLAY_DEFAULT,UI=FI.KEY,zI=FI.FRAME,WI=function(e){function t(t){return e.call(this,t)||this}(0,r.Z)(t,e);var n=t.prototype;return n.setSizeContainer=function(){this.setSize(375,170)},n.createScoreStatEntry=function(){var e=this.scene.add.image(0,0,UI,zI.MEDAL_STAR_SHADOW);e.setWorldSize(19.5,22.5),this._scoreStat=new GI(this.scene,e,"score","1234","687",this.width,this.height/3),this.add(this._scoreStat)},n.createMovesStatEntry=function(){var e=this.scene.add.image(0,0,UI,zI.ARROW_SWAP_HORIZONTAL);e.setWorldSize(20,22),this._movesStat=new GI(this.scene,e,"moves","335","687",this.width,this.height/3),this.add(this._movesStat)},n.createTimeStatEntry=function(){var e=this.scene.add.image(0,0,UI,zI.TIMER);e.setWorldSize(19,22.5),this._timeStat=new GI(this.scene,e,"time","07:25","09:45",this.width,this.height/3),this.add(this._timeStat)},t}(ZI),YI=function(e){function t(t,n,i){var a;return(a=e.call(this,t,n,i)||this).header=void 0,a.avatarZone=void 0,a.stat=void 0,a.footer=void 0,a.modeText=void 0,a.setSizeContainer(),a.createHeader(),a.createModeText(),a.createAvatarZone(),a.createMatchStatistics(),a.createFooter(),a.align(),a}(0,r.Z)(t,e);var n=t.prototype;return n.showModeText=function(e){this.modeText.setVisible(e)},n.hideContent=function(){this.avatarZone.hideContent(),this.stat.hideContent(),this.footer.hideContent()},n.runEntranceAnimation=function(){var e=(0,s.Z)(u().mark((function e(){var t;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.avatarZone.runEntranceAnimation();case 2:return e.next=4,this.stat.runEntranceAnimation();case 4:return t=this.scene,e.next=7,t.gameplay.finishGame();case 7:return e.next=9,this.footer.runEntranceAnimation();case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.updateDrawMode=function(e){this.modeText.setText(1==e?"standModeDraw1":"standModeDraw3")},t}(Phaser.GameObjects.Container),HI=Yy.HEIGHT,KI=function(e){function t(t,n,i){return e.call(this,t,n,i)||this}(0,r.Z)(t,e);var n=t.prototype;return n.setSizeContainer=function(){var e=this.scene.gameZone,t=e.width,n=e.height;this.setSize(t,n)},n.createHeader=function(){this.header=new SI(this.scene),this.add(this.header)},n.createModeText=function(){var e=this.scene.make.bitmapText({font:gc.Z.PRIMARY.KEY,size:this.scene.fontSize(16),origin:{x:.5,y:.5},text:"standModeDraw1"});e.setMaxSize(330,30),this.add(e),Phaser.Display.Align.In.TopCenter(e,this),this.modeText=e},n.createMatchStatistics=function(){var e=new WI(this.scene);this.add(e),this.stat=e},n.createFooter=function(){var e=this;this.footer=new NI(this.scene),this.footer.shareButton.onClick=function(){e.scene.storage.dispatch(Fo())},this.add(this.footer)},n.createAvatarZone=function(){this.avatarZone=new mI(this.scene),this.add(this.avatarZone)},n.align=function(){this.width;var e=this.height-this.scene.ads.getBannerHeight()-HI,t=this.header.height+this.modeText.height+this.avatarZone.height+this.stat.height+this.footer.height,n=1,i=Math.max((e-(+t+152))/2,0);n=(e-t)/152,n=Math.max(Math.min(n,1),.2),this.modeText.setVisible(!0),Phaser.Display.Align.In.TopCenter(this.header,this,0,-14*n-i),Phaser.Display.Align.To.BottomCenter(this.modeText,this.header,0,8*n),Phaser.Display.Align.To.BottomCenter(this.avatarZone,this.modeText,0,8*n),Phaser.Display.Align.To.BottomCenter(this.stat,this.avatarZone,0,42*n),Phaser.Display.Align.To.BottomCenter(this.footer,this.stat,0,40*n)},t}(YI),jI=function(e){function t(t){var n;return(n=e.call(this,t)||this).background=void 0,n._popup=void 0,n.setContainerSize(),n.createPopup(),n.createDevButtons(),n}(0,r.Z)(t,e);var n=t.prototype;return n.setContainerSize=function(){var e=this.scene.gameZone,t=e.width,n=e.height;this.setSize(t,n)},n.addBackground=function(){var e="challenge-result-container-background";if(!this.scene.textures.exists(e)){var t=this.width,n=this.height,i=this.scene.add.graphics();i.fillStyle(859421,1),i.fillRect(0,0,t,n),i.generateTexture(e,t,n),i.destroy()}this.background=this.scene.add.image(0,0,e),this.background.kill(),this.add(this.background)},n.createDevButtons=function(){GameCore.Utils.Valid.isDebugger()&&this.createCloseButton()},n.hideContent=function(){this._popup.hideContent()},n.runEntranceAnimation=function(){var e=(0,s.Z)(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._popup.runEntranceAnimation();case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),(0,ce.Z)(t,[{key:"popup",get:function(){return this._popup}}]),t}(Phaser.GameObjects.Container),VI=An.Z.GAMEPLAY_DEFAULT,JI=VI.KEY,XI=VI.FRAME,qI=function(e){function t(t){return e.call(this,t)||this}(0,r.Z)(t,e);var n=t.prototype;return n.createCloseButton=function(){var e=this,t=new Nh.Z(this.scene,40,40),n=this.scene.add.image(0,0,JI,XI.IC_BG_OFF);n.setWorldSize(40,40);var i=this.scene.make.bitmapText({font:gc.Z.PRIMARY.KEY,size:this.scene.fontSize(10),text:"Close",origin:{x:.5,y:.5}});i.setCenterAlign(),t.add([n,i]),this.add(t),Phaser.Display.Align.In.BottomLeft(t,this,0,-200),t.onClick=function(){e.scene.screen.close(cs.o4.PLAY_WITH_FRIEND_GAME_OVER_SCREEN)}},n.createPopup=function(){this._popup=new KI(this.scene),this.add(this._popup),Phaser.Display.Align.In.Center(this._popup,this,0,0)},t}(jI),QI=An.Z.GAMEPLAY_DEFAULT,$I=QI.KEY,ew=QI.FRAME,tw=function(e){return e.NEW_GAME="new",e.CLOSE="close",e}({}),nw=function(e){function t(t){return e.call(this,t,113,33.5)||this}(0,r.Z)(t,e);var n=t.prototype;return n.createBackground=function(){var e=this.scene.make.image({key:$I,frame:ew.BTN_NEW_GAME});e.setWorldSize(this.width,this.height),this.add(e)},n.createNewGameLabel=function(){var e=new bl(this.scene,{iconTextPadding:5,fontSize:12,iconKey:$I,iconFrame:ew.IC_NEW,iconWidth:13,iconHeight:14.5});this.add([e]),e.text.setMaxSize(90,20),this.newGameLabel=e,Phaser.Display.Align.In.Center(e,this,0,-1)},n.createCloseLabel=function(){this.closeLabel=this.scene.make.bitmapText({font:gc.Z.BOLD_SHADOW.KEY,size:this.scene.fontSize(12),text:"close",origin:{x:.5,y:.5}}),this.closeLabel.setMaxSize(100,20),this.add(this.closeLabel),Phaser.Display.Align.In.Center(this.closeLabel,this)},t}(wI),iw="waiting",aw=new(function(){function e(){this._state=void 0,this._state=lI.WIN}return(0,ce.Z)(e,[{key:"state",get:function(){return this._state},set:function(e){var t=game.globalScene.getActiveScene().screen.get(cs.o4.PLAY_WITH_FRIEND_GAME_OVER_SCREEN);t instanceof sw&&t.setGameOverInfo({state:e}),this._state=e}}]),e}());window.resultStateManager=aw;for(var sw=function(e){function t(t,n,i,a){var s;return(s=e.call(this,t,n,i,a)||this).playWithFriendGameOverContainer=void 0,s.closed=!1,s.scene instanceof eR&&s.setBackground(),s.setDepth(cs.Ks.POPUP),s.createContainer(),s}(0,r.Z)(t,e);var n=t.prototype;return n.open=function(t){e.prototype.open.call(this,t),this.closed=!1,this.runOpenAnimation(),aw.state!==lI.LOSE&&(this.playConfettiAnimation(),this.updateResultInfo())},n.playConfettiAnimation=function(){if(this.scene instanceof eR){var e=this.scene.gameplay.confettiSmallFallDown;this.add(this.scene.gameplay.confettiSmallFallDown),this.scene.sys.updateList.add(this.scene.gameplay.confettiSmallFallDown),e.run(8,0,0)}},n.stopConfettiAnimation=function(){this.scene instanceof eR&&this.scene.gameplay.confettiSmallFallDown.stop()},n.updateResultInfo=function(){var e=this.scene.storage.getState(),t=er(e),n=Rr(e),i=this.scene.player.getPlayer().playerId,a=_r(e).playerId,s=(n[i]||{}).score,r=(n[a]||{}).score,o=Pr(e,{playerId:i}),c=kr(e,{opponentId:a});t===La&&(o=!0,c=!0);var h,u,l=br(e),d=l.whitePlayerId,p=l.extraData,f=void 0===p?{}:p,g=i===d,m=g?f.blackPlayerData:f.whitePlayerData,v=(g?f.whitePlayerData:f.blackPlayerData)||{},y=v.moves,A=v.time,E=m||{},T=E.moves,C=E.time,S=o&&c,b=S&&s<r;h=S?S&&s>r?lI.WIN:b?lI.LOSE:lI.DRAW:lI.WAITING_FOR_OPPONENT,this.setGameOverInfo({state:h,playerScore:o?s:void 0,opponentScore:c?r:void 0,playerMoves:o?y:void 0,opponentMoves:c?T:void 0,playerTime:o?A:void 0,opponentTime:c?C:void 0}),this.scene.storage.dispatch((void 0===(u=!1)&&(u=!1),{type:"MATCH_RESUTL_FROM_MESSAGE",payload:{matchResultFromMessage:u}}))},n.setGameOverInfo=function(e){var t=this.playWithFriendGameOverContainer.popup,n=t.header,i=t.avatarZone,a=t.stat,s=i.youAvatar,r=i.opponentAvatar,o=this.scene.player.getPlayer(),c=o.playerId,h=o.photo,u=o.name;s.avatar.loadPhoto(c,h,70),s.username.setText(u);var l=this.scene.storage.getState(),d=_r(l),p=d.playerId,f=d.photo,g=d.name;if(r.avatar.loadPhoto(p,f,70),p==Pa.playerId?(r.username.setText("yourFriend"),r.username.setIgnoreLanguage(!1)):(r.username.setText(g),r.username.setIgnoreLanguage(!0)),e.state)switch(n.updateWinLoseText(e.state),i.updateState(e.state),e.state){case lI.LOSE:this.enableDarkBackground(),this.stopConfettiAnimation();break;case lI.WIN:case lI.DRAW:this.enableDarkBackground(!1);break;case lI.WAITING_FOR_OPPONENT:default:this.stopConfettiAnimation(),this.enableDarkBackground(!1)}if(e.draw)t.updateDrawMode(e.draw);else{var m=this.scene.player.getPlayerSettings().drawMode3?3:1;t.updateDrawMode(m)}var v=a.scoreStat,y=a.movesStat,A=a.timeStat;void 0!==e.playerScore?v.setPlayerStat(""+e.playerScore):v.setPlayerStat(iw,!0),void 0!==e.opponentScore?v.setOpponentStat(""+e.opponentScore):v.setOpponentStat(iw,!0),void 0!==e.playerMoves?y.setPlayerStat(""+e.playerMoves):y.setPlayerStat(iw,!0),void 0!==e.opponentMoves?y.setOpponentStat(""+e.opponentMoves):y.setOpponentStat(iw,!0),void 0!==e.playerTime?A.setPlayerStat((0,ls.F0)(e.playerTime,!1)):A.setPlayerStat(iw,!0),void 0!==e.opponentTime?A.setOpponentStat((0,ls.F0)(e.opponentTime,!1)):A.setOpponentStat(iw,!0)},n.enableDarkBackground=function(e){void 0===e&&(e=!0),En.Z.openScreen(this,e)},n.updateFinishingChallenge=function(){this.playWithFriendGameOverContainer.popup.footer.newGameButton.switchState(tw.CLOSE)},t}(GameCore.Screen),rw=function(e){function t(t,n,i,a){var s;return(s=e.call(this,t,n,i,a)||this).slideInAnimation=void 0,s.fadeInAnimation=void 0,s.fadeOutAnimation=void 0,s.footer=void 0,s.createFooter(),s.createBottomLogo(),En.Z.removeObject(s.background),s}(0,r.Z)(t,e);var n=t.prototype;return n.close=function(){this.closed=!0,this.runCloseAnimation(),this.stopConfettiAnimation()},n.runOpenAnimation=function(){var e=(0,s.Z)(u().mark((function e(){var t,n,i,a,r=this;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==(t=this.slideInAnimation)||null==(n=t.tween)||!n.isPlaying()){e.next=2;break}return e.abrupt("return");case 2:this.scene.audio.playSound(hs.Z.POPUP_SHOW),i=this.scene.ads.getBannerHeight(),a=i,this.playWithFriendGameOverContainer.setAlpha(0).setY(a).hideContent(),this.slideInAnimation||(this.slideInAnimation=new pc.Z({targets:[this.playWithFriendGameOverContainer],props:{y:{from:a,to:0,ease:Phaser.Math.Easing.Back.Out},alpha:{from:0,to:1}},duration:300,onComplete:function(){var e=(0,s.Z)(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.playWithFriendGameOverContainer.runEntranceAnimation();case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()})),this.fadeInAnimation||(this.fadeInAnimation=new yh.Z({targets:[this],duration:300})),this.fadeInAnimation.play(),this.slideInAnimation.play();case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.runCloseAnimation=function(){var t,n,i=this;null!=(t=this.fadeOutAnimation)&&null!=(n=t.tween)&&n.isPlaying()||(this.scene.audio.playSound(hs.Z.POPUP_OFF),this.fadeOutAnimation||(this.fadeOutAnimation=new ef.Z({targets:[this],props:{alpha:0},duration:300,onComplete:function(){En.Z.closeScreen(i),e.prototype.close.call(i)}})),this.fadeOutAnimation.play())},n.setBackground=function(){var e=this,t=this.scene.theme.getCurrentThemeConfig().backgroundKey;this.background.setTexture(t);var n=this.scene.gameZone,i=n.width,a=n.height;this.background.setWorldSize(i,a),this.scene.world.isLandscape()&&this.background.setScale(this.background.scaleY,this.background.scaleY),this.scene.events.on(vo.BACKGROUND_CHANGED,(function(t){e.background.setTexture(t),e.background.setWorldSize(i,a),e.scene.world.isLandscape()&&e.background.setScale(e.background.scaleY,e.background.scaleY)}))},n.createContainer=function(){this.playWithFriendGameOverContainer=new qI(this.scene),this.add(this.playWithFriendGameOverContainer)},n.createFooter=function(){this.footer=new yA(this.scene,!1,cs.o4.PLAY_WITH_FRIEND_GAME_OVER_SCREEN),this.add(this.footer),this.bringToTop(this.footer),this.footer.setInteractive();var e=this.scene.ads.getBannerHeight(),t=this.scene.gameZone.width>375?-10:0;Phaser.Display.Align.In.BottomCenter(this.footer,this.background,0,-e+t)},n.createBottomLogo=function(){if(!this.scene.world.isLandscape()){var e=new Tg(this.scene);Phaser.Display.Align.In.BottomCenter(e,this),this.add(e)}},t}(sw),ow=An.Z.GAMEPLAY_DEFAULT_LANDSCAPE,cw=ow.KEY,hw=ow.FRAME,uw=function(e){function t(t){return e.call(this,t)||this}(0,r.Z)(t,e);var n=t.prototype;return n.setSizeContainer=function(){this.setSize(54,120)},n.createShine=function(){this._shine=this.scene.add.image(0,0,cw,hw.AVATAR_SHINE),this._shine.setWorldSize(145.5,149.5),this.add(this._shine)},n.createAvatarFrame=function(){this._avatar=new vc(this.scene,{key:cw,background:hw.BLANK,frame:hw.AVATAR_BLUE,width:52,height:52,loadDelay:100}),this._avatar.update(),this._avatar.background.kill(),this._avatar.loadPhoto(xa.Z.AVATAR.KEY,xa.Z.AVATAR.FILE,75),this.add(this._avatar)},n.createText=function(){this._username=this.scene.make.text({style:{fontFamily:gc.Z.FONT_FAMILY},origin:{x:.5,y:.5}}),this._username.setHighQuality(),this._username.setFontSize(12),this._username.setText("Name"),this._username.setIgnoreLanguage(),this.add(this._username)},n.alignComponents=function(){Phaser.Display.Align.In.Center(this._avatar,this,0,-4),Phaser.Display.Align.To.BottomCenter(this._username,this._avatar,0,4)},n.setWinner=function(e){void 0===e&&(e=!0),this._shine.setVisible(e),1==e&&(this._avatar.setFrame(hw.AVATAR_WIN),this.runShineAnimation())},t}(sI),lw=An.Z.GAMEPLAY_DEFAULT_LANDSCAPE,dw=lw.KEY,pw=lw.FRAME,fw=function(e){function t(t){return e.call(this,t)||this}(0,r.Z)(t,e);var n=t.prototype;return n.setSizeContainer=function(){this.setSize(375,100)},n.createAvatars=function(){this._youAvatar=new uw(this.scene),this._opponentAvatar=new uw(this.scene),this._youAvatar.avatar.setFrame(pw.AVATAR_ORANGE),this.add([this._youAvatar,this._opponentAvatar])},n.createVersusText=function(){this._versusText=this.scene.add.image(0,0,dw,pw.IC_VERSUS),this._versusText.setWorldSize(44.5,12),this.add(this._versusText)},n.alignComponents=function(){Phaser.Display.Align.In.Center(this._versusText,this),Phaser.Display.Align.In.Center(this._youAvatar,this._versusText,65),Phaser.Display.Align.In.Center(this._opponentAvatar,this._versusText,-65)},n.updateState=function(e){switch(this._youAvatar.avatar.setBackground(pw.AVATAR_ORANGE),this._opponentAvatar.avatar.setBackground(pw.AVATAR_ORANGE),e){case lI.WIN:this._youAvatar.setWinner(!0),this._opponentAvatar.setWinner(!1);break;case lI.LOSE:this._youAvatar.setWinner(!1),this._opponentAvatar.setWinner(!0);break;case lI.DRAW:default:this._youAvatar.setWinner(!1),this._opponentAvatar.setWinner(!1)}},t}(dI),gw=An.Z.GAMEPLAY_DEFAULT_LANDSCAPE,mw=gw.KEY,vw=gw.FRAME,yw=function(e){function t(t){return e.call(this,t)||this}(0,r.Z)(t,e);var n=t.prototype;return n.createWinLoseText=function(){var e=this.scene.make.bitmapText({font:gc.Z.BOLD_SHADOW_BLUR.KEY,size:this.scene.fontSize(27),origin:{x:.5,y:.5},text:"youWin"});this.add(e),this.winLoseText=e},n.addRibbon=function(){this.cardChain=new AI(this.scene,{cardWidth:31.85,cardHeight:72*.65,radius:.65/.75*100});var e=this.scene.add.image(0,0,mw,vw.SUB_RIBBON);e.setWorldSize(177,45),this.ribbon=e,this.add([this.cardChain,e])},n.addSpadeAndHeart=function(){var e=this.scene.add.image(0,0,mw,vw.SPADE);e.setWorldSize(13,15.5);var t=this.scene.add.image(0,0,mw,vw.HEART);t.setWorldSize(12.5,15),this.add([e,t]),this.spade=e,this.heart=t},n.updateWinLoseText=function(e){var t=this;switch(this.stopWaitingAnimation(),e){case lI.WIN:this.winLoseText.setFont(gc.Z.BOLD_SHADOW_BLUR.KEY),this.winLoseText.setFontSize(this.scene.fontSize(20)),this.winLoseText.setMaxSize(110,40,!0),this.winLoseText.setRadius(500),this.winLoseText.setText("youWin"),this.winLoseText.clearTint(),this.winLoseText.setGradientHorizontalTint([{at:0,color:16315097},{at:.5,color:16777215},{at:1,color:16315097}]),this.winLoseText.setPosition(0,27),this.ribbon.setVisible(!0),this.spade.setVisible(!1),this.heart.setVisible(!1),this.ribbon.setTexture(mw,vw.WIN_RIBBON),this.ribbon.setWorldSize(195.5,123),this.cardChain.kill();break;case lI.LOSE:this.winLoseText.setFont(gc.Z.BOLD_SHADOW_BLUR.KEY),this.winLoseText.setFontSize(this.scene.fontSize(20)),this.winLoseText.setText("youLose"),this.winLoseText.setMaxSize(120,40,!0),this.winLoseText.clearGradientTint(),this.winLoseText.setTint(16777215,16777215,12833246,12833246),this.winLoseText.clearRadius(),this.winLoseText.setPosition(0,47),this.spade.setVisible(!0),this.heart.setVisible(!0),Phaser.Display.Align.To.LeftCenter(this.spade,this.winLoseText,3,-1),Phaser.Display.Align.To.RightCenter(this.heart,this.winLoseText,2,-1),this.winLoseText.on("textChanged",(function(){Phaser.Display.Align.To.LeftCenter(t.spade,t.winLoseText,3,-1),Phaser.Display.Align.To.RightCenter(t.heart,t.winLoseText,2,-1)})),this.ribbon.setVisible(!1),this.cardChain.kill();break;case lI.DRAW:this.winLoseText.setFont(gc.Z.BOLD_SHADOW_BLUR.KEY),this.winLoseText.setFontSize(this.scene.fontSize(20)),this.winLoseText.setMaxSize(105,40,!0),this.winLoseText.setText("draw"),this.winLoseText.clearTint(),this.winLoseText.setGradientHorizontalTint([{at:0,color:16315097},{at:.5,color:16777215},{at:1,color:16315097}]),this.winLoseText.setRadius(500),this.winLoseText.setPosition(1,30),this.ribbon.setVisible(!0),this.spade.setVisible(!1),this.heart.setVisible(!1),this.ribbon.setTexture(mw,vw.DRAW_RIBBON),this.ribbon.setWorldSize(166.5,111.5),this.ribbon.setPosition(-5,18),this.cardChain.kill();break;case lI.WAITING_FOR_OPPONENT:default:this.winLoseText.setFont(gc.Z.BOLD.KEY),this.winLoseText.setFontSize(this.scene.fontSize(16)),this.winLoseText.setText("WAITING"),this.winLoseText.setMaxSize(120,40,!0),this.winLoseText.clearTint(),this.winLoseText.clearGradientTint(),this.winLoseText.setRadius(500),this.winLoseText.setPosition(0,37),this.ribbon.setVisible(!0),this.spade.setVisible(!1),this.heart.setVisible(!1),this.ribbon.setTexture(mw,vw.SUB_RIBBON),this.ribbon.setWorldSize(159,43),this.ribbon.setPosition(0,42),this.cardChain.revive(),this.cardChain.setPosition(0,5),this.playWaitingAnimation(),this.cardChain.playAnimation(65/.75,71.5/.75)}e!=lI.LOSE&&this.winLoseText.off("textChanged")},t}(vI),Aw=An.Z.GAMEPLAY_DEFAULT_LANDSCAPE,Ew=Aw.KEY,Tw=Aw.FRAME,Cw=function(e){function t(t){return e.call(this,t,95,33.5)||this}(0,r.Z)(t,e);var n=t.prototype;return n.createBackground=function(){var e=this.scene.make.image({key:Ew,frame:Tw.BTN_SHARE});e.setWorldSize(this.width,this.height),this.add(e)},n.createLabel=function(){var e=new bl(this.scene,{iconTextPadding:5,fontSize:12,text:"share",iconKey:Ew,iconFrame:Tw.IC_SHARE,iconWidth:13.5,iconHeight:16.5});e.text.setMaxSize(72,20),this.add([e]),this.labelContainer=e,Phaser.Display.Align.In.Center(e,this)},t}(OI),Sw=An.Z.GAMEPLAY_DEFAULT_LANDSCAPE,bw=Sw.KEY,Iw=Sw.FRAME,ww=function(e){function t(t){return e.call(this,t)||this}(0,r.Z)(t,e);var n=t.prototype;return n.setSizeContainer=function(){var e=new td(this.scene,{width:234,height:55,key:bw,frame:Iw.RESULT.BOTTOM_BAR});this.add(e),this.setSize(e.width,e.height)},n.createNewGameButton=function(){var e=new nw(this.scene);this.add(e),this.newGameButton=e,Phaser.Display.Align.In.RightCenter(e,this,-10,1)},n.createShareButton=function(){var e=new Cw(this.scene);this.add(e),this.shareButton=e,Phaser.Display.Align.In.LeftCenter(e,this,-10,1)},t}(bI),_w=function(e){function t(t,n,i,a,s,r,o){return e.call(this,t,n,i,a,s,r,o)||this}(0,r.Z)(t,e);var n=t.prototype;return n.addIcon=function(e){this.add(e),Phaser.Display.Align.In.Center(e,this,0,-4)},n.createLabel=function(e){var t=this.scene.make.bitmapText({font:gc.Z.PRIMARY.KEY,size:this.scene.fontSize(9),text:e,origin:{x:.5,y:.5}});this.add(t),t.setMaxSize(50,10),Phaser.Display.Align.In.Center(t,this,0,10)},n.createPlayerStat=function(e){var t=this.scene.make.bitmapText({font:gc.Z.PRIMARY.KEY,size:this.scene.fontSize(12),text:e,origin:{x:.5,y:.5}}).setTint(16577118);this.add(t),Phaser.Display.Align.In.Center(t,this,63),this.playerStat=t},n.createOpponentStat=function(e){var t=this.scene.make.bitmapText({font:gc.Z.PRIMARY.KEY,size:this.scene.fontSize(12),text:e,origin:{x:.5,y:.5}});this.add(t),Phaser.Display.Align.In.Center(t,this,-63),this.opponentStat=t},t}(MI),xw=An.Z.GAMEPLAY_DEFAULT_LANDSCAPE,Pw=xw.KEY,kw=xw.FRAME,Ow=function(e){function t(t){return e.call(this,t)||this}(0,r.Z)(t,e);var n=t.prototype;return n.setSizeContainer=function(){this.setSize(234.5,103.5)},n.createScoreStatEntry=function(){var e=this.scene.add.image(0,0,Pw,kw.MEDAL_STAR_SHADOW);e.setWorldSize(16.5,19.5),this._scoreStat=new _w(this.scene,e,"score","1234","687",this.width,this.height/3),this.add(this._scoreStat)},n.createMovesStatEntry=function(){var e=this.scene.add.image(0,0,Pw,kw.ARROW_SWAP_HORIZONTAL);e.setWorldSize(17,19),this._movesStat=new _w(this.scene,e,"moves","335","687",this.width,this.height/3),this.add(this._movesStat)},n.createTimeStatEntry=function(){var e=this.scene.add.image(0,0,Pw,kw.TIMER);e.setWorldSize(16,19.5),this._timeStat=new _w(this.scene,e,"time","07:25","09:45",this.width,this.height/3),this.add(this._timeStat)},t}(ZI),Lw=An.Z.GAMEPLAY_DEFAULT_LANDSCAPE,Rw=Lw.KEY,Bw=Lw.FRAME,Dw=function(e){function t(t,n,i){return e.call(this,t,n,i)||this}(0,r.Z)(t,e);var n=t.prototype;return n.setSizeContainer=function(){var e=new td(this.scene,{width:239,height:362.5,key:Rw,frame:Bw.RESULT.BACKGROUND_FRIEND});this.add(e),this.setSize(e.width,e.height)},n.createHeader=function(){this.header=new yw(this.scene),this.add(this.header)},n.createModeText=function(){var e=this.scene.make.bitmapText({font:gc.Z.PRIMARY.KEY,size:this.scene.fontSize(12),origin:{x:.5,y:.5},text:"standModeDraw1"});e.setMaxSize(200,20),this.add(e),Phaser.Display.Align.In.TopCenter(e,this),this.modeText=e},n.createMatchStatistics=function(){var e=new Ow(this.scene);this.add(e),this.stat=e},n.createFooter=function(){this.footer=new ww(this.scene),this.add(this.footer)},n.createAvatarZone=function(){this.avatarZone=new fw(this.scene),this.add(this.avatarZone)},n.align=function(){this.modeText.setVisible(!0),Phaser.Display.Align.To.TopCenter(this.header,this,0,-40),Phaser.Display.Align.In.TopCenter(this.modeText,this,0,-60),Phaser.Display.Align.In.TopCenter(this.avatarZone,this,0,-75),Phaser.Display.Align.In.Center(this.stat,this,0,42.5),Phaser.Display.Align.In.BottomCenter(this.footer,this,0,-5)},t}(YI),Nw=An.Z.GAMEPLAY_DEFAULT,Mw=Nw.KEY,Gw=Nw.FRAME,Zw=function(e){function t(t){return e.call(this,t)||this}(0,r.Z)(t,e);var n=t.prototype;return n.createCloseButton=function(){var e=this,t=new Nh.Z(this.scene,40,40),n=this.scene.add.image(0,0,Mw,Gw.IC_BG_OFF);n.setWorldSize(40,40);var i=this.scene.make.bitmapText({font:gc.Z.PRIMARY.KEY,size:this.scene.fontSize(10),text:"Close",origin:{x:.5,y:.5}});i.setCenterAlign(),t.add([n,i]),this.add(t),Phaser.Display.Align.In.BottomLeft(t,this,-200,-200),t.onClick=function(){e.scene.screen.close(cs.o4.PLAY_WITH_FRIEND_GAME_OVER_SCREEN)}},n.createPopup=function(){this._popup=new Dw(this.scene),this.add(this._popup),Phaser.Display.Align.In.Center(this._popup,this,0,0)},t}(jI),Fw=function(e){function t(t,n,i,a){var s;return(s=e.call(this,t,n,i,a)||this).slideInAnimation=void 0,s.fadeInAnimation=void 0,s.fadeOutAnimation=void 0,s}(0,r.Z)(t,e);var n=t.prototype;return n.close=function(){this.closed=!0,this.runCloseAnimation(),this.stopConfettiAnimation()},n.runOpenAnimation=function(){var e=(0,s.Z)(u().mark((function e(){var t,n,i,a,r=this;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==(t=this.slideInAnimation)||null==(n=t.tween)||!n.isPlaying()){e.next=2;break}return e.abrupt("return");case 2:this.scene.audio.playSound(hs.Z.POPUP_SHOW),i=this.scene.ads.getBannerHeight(),a=i,this.playWithFriendGameOverContainer.setAlpha(0).setY(a).hideContent(),this.slideInAnimation||(this.slideInAnimation=new pc.Z({targets:[this.playWithFriendGameOverContainer],props:{y:{from:a,to:0,ease:Phaser.Math.Easing.Back.Out},alpha:{from:0,to:1}},duration:300,onComplete:function(){var e=(0,s.Z)(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.playWithFriendGameOverContainer.runEntranceAnimation();case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()})),this.fadeInAnimation||(this.fadeInAnimation=new yh.Z({targets:[this],duration:300})),this.fadeInAnimation.play(),this.slideInAnimation.play();case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.runCloseAnimation=function(){var t,n,i=this;null!=(t=this.fadeOutAnimation)&&null!=(n=t.tween)&&n.isPlaying()||(this.scene.audio.playSound(hs.Z.POPUP_OFF),this.fadeOutAnimation||(this.fadeOutAnimation=new ef.Z({targets:[this],props:{alpha:0},duration:300,onComplete:function(){En.Z.closeScreen(i),e.prototype.close.call(i)}})),this.fadeOutAnimation.play())},n.setBackground=function(){this.background.setTint(1315862),this.background.setAlpha(.5)},n.createContainer=function(){this.playWithFriendGameOverContainer=new Zw(this.scene),this.add(this.playWithFriendGameOverContainer)},n.createBottomLogo=function(){if(!this.scene.world.isLandscape()){var e=new Tg(this.scene);Phaser.Display.Align.In.BottomCenter(e,this),this.add(e)}},t}(sw),Uw=GameCore.world.isLandscape()?Fw:rw,zw=function(e){function t(t){var n;return(n=e.call(this,t)||this).endTime=void 0,n.countdownTimer=void 0,n.timerText=void 0,n.updateCountdown=(0,s.Z)(u().mark((function e(){var t,i,a;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=Date.now(),i=1e3*n.endTime-t,a=Math.round(Math.abs(i)/864e5),i<0&&(i=0),0!==i){e.next=7;break}return n.timerText.setText("noCompetitionMessage"),e.abrupt("return");case 7:i=1e3,(a=0)>=1?(1===a?n.timerText.setText("competitionEndInDay"):n.timerText.setText("competitionEndInDays"),n.timerText.setTranslationParameter("count",a)):(n.timerText.setText("competitionEndInMs"),n.timerText.setTranslationParameter("ms",(0,ls.F0)(Math.abs(i),!0)));case 10:case"end":return e.stop()}}),e)}))),n.setSizeContainer(),n.createTimerContainer(),n.createCountdownTimer(),t.add.existing((0,$a.Z)(n)),n}(0,r.Z)(t,e);var n=t.prototype;return n.createCountdownTimer=function(){var e;void 0!=this.endTime&&(0!=this.endTime?(null==(e=this.countdownTimer)||e.destroy(),this.countdownTimer=this.scene.time.addEvent({loop:!0,delay:1e3,startAt:1e3,callback:this.updateCountdown})):this.timerText.setText("noCompetitionMessage"))},n.setCountdown=function(e){this.endTime=e,this.createCountdownTimer()},n.getRemain=function(){if(void 0!=this.endTime){var e=Date.now(),t=1e3*this.endTime-e;return t<0?0:t}},t}(Phaser.GameObjects.Container),Ww=zw,Yw=function(e){function t(t){return e.call(this,t)||this}(0,r.Z)(t,e);var n=t.prototype;return n.setSizeContainer=function(){this.setSize(375,30)},n.createTimerContainer=function(){this.timerText=this.scene.make.bitmapText({font:gc.Z.PRIMARY.KEY,size:this.scene.fontSize(20),origin:{x:.5,y:.5}}),this.timerText.setTint(15790071),this.timerText.setMaxSize(350,30),this.add([this.timerText])},t}(Ww),Hw=Yw,Kw=function(e){function t(t){var n;return(n=e.call(this,t)||this).buttons=[],n.newGameButton=void 0,n.replayButton=void 0,n.setSizeContainer(),n.createNewGameButton(),n.createReplayButton(),n.buttons=[n.newGameButton,n.replayButton],n}(0,r.Z)(t,e);var n=t.prototype;return n.hideContent=function(){this.buttons.forEach((function(e){e.setAlpha(0)}))},n.runEntranceAnimationButtons=function(){var e=(0,s.Z)(u().mark((function e(){var t,n,i=this;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.newGameButton.stopPulsate(),n=Be()(t=this.buttons).call(t,(function(e){return new(c())((function(t){i.scene.add.tween({targets:[e],alpha:1,duration:200,onComplete:function(){e.setDisabled(!1),t(),i.newGameButton.runPulsate()}})}))})),e.next=4,c().all(n);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),t}(Phaser.GameObjects.Container),jw=function(e){function t(t){return e.call(this,t)||this}(0,r.Z)(t,e);var n=t.prototype;return n.setSizeContainer=function(){this.setSize(375,48)},n.createNewGameButton=function(){this.newGameButton=new xy(this.scene,161,48),this.add(this.newGameButton),Phaser.Display.Align.In.RightCenter(this.newGameButton,this,-36)},n.createReplayButton=function(){this.replayButton=new QA(this.scene,123.5,48),this.add(this.replayButton),Phaser.Display.Align.In.LeftCenter(this.replayButton,this,-36)},t}(Kw),Vw={playerId:"10",name:"???",photo:"",score:0,rank:0},Jw=[],Xw=0;Xw<4;Xw++)Jw.push((0,a.Z)({},Vw,{rank:Xw+1}));var qw=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n.title=void 0,n.timer=void 0,n.leaderList=void 0,n.footer=void 0,n.handleReplay=function(){n.scene instanceof eR&&n.scene.gameplay.replayGame(),n.scene.screen.close(cs.o4.TOURNAMENTS_RESULT_SCREEN)},n.handleNewGame=(0,s.Z)(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.scene.handlePlayWithFriend();case 2:n.scene.screen.close(cs.o4.TOURNAMENTS_RESULT_SCREEN);case 3:case"end":return e.stop()}}),e)}))),n.scene=t,n.setSizeContainer(),n.createTitle(),n.createTimer(),n.createLeaderList(),n.createFooter(),n.alignComponents(),n.createDevButtons(),n}(0,r.Z)(t,e);var n=t.prototype;return n.createDevButtons=function(){GameCore.Utils.Valid.isDebugger()&&this.createCloseButton()},n.updateTitle=function(e){void 0===e&&(e="Your tournament");var t=GameCore.Utils.String.removeDiacritics(e).toUpperCase();this.title.setText(t),this.title.setCenterAlign()},n.updateTimer=function(e){this.timer.setCountdown(e)},n.updateLeadersViaId=function(){var e=(0,s.Z)(u().mark((function e(t){var n,i,s,r,o,c,h,l,d,p,f=this;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=P()(n=[]).call(n,Jw),this.leaderList.loading.revive(),this.leaderList.bringToTop(this.leaderList.loading),e.prev=3,e.next=6,(0,tr.H$)(t,{limit:4});case 6:if(!((s=e.sent).length>0)){e.next=24;break}return o=Be()(s).call(s,(function(e){return e.playerId})),e.next=12,this.scene.profile.requestProfiles(o);case 12:if(c=this.scene.profile.getProfiles(),h=!1,l=Le()(r=Be()(s).call(s,(function(e){var t=e.playerId,n=e.score,i=e.rank,a=c[t];if(t===f.scene.player.getPlayerId()&&(h=!0),!a)return{playerId:t,photo:"",score:n,rank:i,name:"Player"};var s=a.name;return{playerId:t,photo:a.photo,score:n,rank:i,name:s}}))).call(r,(function(e){return null!==e})),!(l.length<1)){e.next=17;break}throw new Error("Leaderboard is empty");case 17:if(this.leaderList.revive(),l.forEach((function(e,t){i[t]=e})),h){e.next=24;break}return e.next=22,this.getCurrentPlayerLeaderDataPayload(t);case 22:d=e.sent,i[3]=(0,a.Z)({},d,{name:"You"});case 24:p=this.scene.player.getPlayerId(),i.forEach((function(e){e.playerId===p&&(e.name="You")})),this.leaderList.updateLeaders(i),e.next=33;break;case 30:e.prev=30,e.t0=e.catch(3);case 33:return e.prev=33,this.leaderList.loading.kill(),e.finish(33);case 36:case"end":return e.stop()}}),e,this,[[3,30,33,36]])})));return function(t){return e.apply(this,arguments)}}(),n.getCurrentPlayerLeaderDataPayload=function(){var e=(0,s.Z)(u().mark((function e(t){var n,i,a,s,r,o,c;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.scene.player.getPlayer(),i=n.playerId,a=n.name,s=n.photo,e.next=3,(0,tr.xB)(i,t);case 3:return r=e.sent,o=r.score,c=r.rank,e.abrupt("return",{playerId:i,photo:s,score:o,rank:c,name:a});case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.hideContent=function(){this.leaderList.hideContent(),this.footer.hideContent()},n.runEntranceAnimation=function(){var e=(0,s.Z)(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.leaderList.runEntranceAnimation();case 2:return e.next=4,this.scene.gameplay.finishGame();case 4:return e.next=6,this.footer.runEntranceAnimationButtons();case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),t}(Phaser.GameObjects.Container),Qw=function(e){function t(t){var n;return(n=e.call(this,t)||this).medalNo123=void 0,n.customizedMedal=void 0,n.rankLabel=void 0,n.rank=1,n.setSizeContainer(),n.createMedal123(),n.createCustomizedMedal(),n.createRankLabel(),n.setIgnoreLanguages(),n}(0,r.Z)(t,e);var n=t.prototype;return n.getRank=function(){return this.rank},n.setIgnoreLanguages=function(){this.rankLabel.setIgnoreLanguage()},n.getCorrectRankText=function(e){return e>99?"99+":0===e?"?":e.toString()},t}(Phaser.GameObjects.Container),$w=An.Z.GAMEPLAY_DEFAULT,e_=$w.KEY,t_=$w.FRAME,n_=function(e){function t(t){return e.call(this,t)||this}(0,r.Z)(t,e);var n=t.prototype;return n.setRank=function(e){var t=this.getCorrectRankText(e);switch(this.rank=e,this.rankLabel.setText(t),this.medalNo123.kill(),this.customizedMedal.kill(),t){case"1":this.medalNo123.revive(),this.medalNo123.setFrame(t_.TOURNAMENT.IC_1ST_BG),this.rankLabel.kill(),Phaser.Display.Align.In.Center(this.rankLabel,this.customizedMedal,0,7);break;case"2":this.medalNo123.revive(),this.medalNo123.setFrame(t_.TOURNAMENT.IC_2ND_BG),this.rankLabel.kill(),Phaser.Display.Align.In.Center(this.rankLabel,this.customizedMedal,0,7);break;case"3":this.medalNo123.revive(),this.medalNo123.setFrame(t_.TOURNAMENT.IC_3RD_BG),this.rankLabel.kill(),Phaser.Display.Align.In.Center(this.rankLabel,this.customizedMedal,0,7);break;default:this.customizedMedal.revive(),this.rankLabel.revive(),this.rankLabel.setTint(1066013),Phaser.Display.Align.In.Center(this.rankLabel,this.customizedMedal)}},n.setSizeContainer=function(){this.setSize(23,37)},n.createMedal123=function(){this.medalNo123=this.scene.add.image(0,0,e_,t_.TOURNAMENT.IC_1ST),this.medalNo123.setWorldSize(46/3,74/3),this.add(this.medalNo123)},n.createCustomizedMedal=function(){this.customizedMedal=this.scene.add.image(0,0,e_,t_.TOURNAMENT.IC_NORMAL_BIG),this.customizedMedal.setWorldSize(23,23.5),this.add(this.customizedMedal)},n.createRankLabel=function(){this.rankLabel=this.scene.make.bitmapText({font:gc.Z.BOLD.KEY,size:this.scene.fontSize(16),origin:{x:.5,y:.5},text:""+this.rank}).setTint(1525537),this.add(this.rankLabel)},t}(Qw),i_=function(e){function t(t,n){var i;return void 0===n&&(n=!1),(i=e.call(this,t)||this).scene=void 0,i._isPlayer=!1,i.background=void 0,i.avatar=void 0,i.username=void 0,i.score=void 0,i.medalIcon=void 0,i.scoreIcon=void 0,i.payload=void 0,i.instantPlayerVisualIndicator=!1,i.scene=t,i.setSizeContainer(),i.createBackground(),i.createMedalIcon(),i.createAvatar(),i.createUsername(),i.createScore(),i.createScoreIcon(),i.alignComponents(),i.setIgnoreLanguages(),i.isPlayer=n,i}(0,r.Z)(t,e);var n=t.prototype;return n.setIgnoreLanguages=function(){this.score.setIgnoreLanguage()},n.createBackground=function(){this.background=new hy(this.scene,this.width,this.height,ly),this.add(this.background)},n.setScore=function(e){this.score.setText(""+e)},n.setUsername=function(e,t){void 0===t&&(t=!0);var n=GameCore.Utils.String.getShortName(e,12);this.username.setText(n),this.username.setIgnoreLanguage(t)},n.updateData=function(e,t){var n,i,a=e.playerId,s=void 0===a?"10":a,r=e.name,o=void 0===r?"???":r,c=e.photo,h=void 0===c?"":c,u=e.score,l=void 0===u?0:u,d=e.rank,p=void 0===d?0:d;this.payload&&(n=e,i=this.payload,n.playerId===i.playerId&&n.photo===i.photo&&n.score===i.score&&n.rank===i.rank&&n.name===i.name)||(this.payload=e,this.isPlayer=s===this.scene.player.getPlayerId(),this.score.setAlpha(0),this.username.setAlpha(0),this.avatar.setAlpha(0),this.setScore(l),this.medalIcon.setRank(p),0===l?(this.setUsername("waitingDots",!1),this.avatar.loadPhoto(xa.Z.AVATAR.KEY,xa.Z.AVATAR.FILE,60)):(this.setUsername(o),this.avatar.loadPhoto(s,h,60)),this.medalIcon.revive(),this.updateStyle(t,this.isPlayer),this.playRecentlyUpdatedComponentEntrancesAnimation())},n.playRecentlyUpdatedComponentEntrancesAnimation=function(){this.scene.add.tween({targets:[this.score,this.username,this.avatar],props:{alpha:{from:0,to:1}},duration:150})},n.hideContent=function(){this._isPlayer},n.runScalingAnimation=function(){var e=(0,s.Z)(u().mark((function e(){var t=this;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new(c())((function(e){t.scene.add.tween({targets:t,duration:200,ease:Phaser.Math.Easing.Cubic.In,props:{scale:.95},onComplete:function(){t.scene.add.tween({targets:t,ease:Phaser.Math.Easing.Elastic.Out,easeParams:[.1,.45],props:{scale:1},onComplete:e})}})})));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),n.runEntranceAnimation=function(){var e=(0,s.Z)(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._isPlayer){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,c().all([this.runScalingAnimation()]);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),(0,ce.Z)(t,[{key:"isPlayer",get:function(){return this._isPlayer},set:function(e){this._isPlayer=e,this._isPlayer&&this.updateStyle(0,this._isPlayer)}}]),t}(Phaser.GameObjects.Container);var a_=An.Z.GAMEPLAY_DEFAULT,s_=a_.KEY,r_=a_.FRAME,o_=15461098,c_=function(e){function t(t,n){return void 0===n&&(n=!1),e.call(this,t,n)||this}(0,r.Z)(t,e);var n=t.prototype;return n.updateStyle=function(e,t){t||this.isPlayer?(this.avatar.setFrame(r_.AVATAR.LEADER_YOU),this.score.setTint(16510057).setFont(gc.Z.BOLD.KEY).setFontSize(this.scene.fontSize(21)),this.scoreIcon.setTint(16510057),Phaser.Display.Align.To.LeftCenter(this.scoreIcon,this.score,7,-2),this.username.setTint(16184823),this.background.setGradientPoints(dy)):(this.avatar.setFrame(r_.AVATAR.LEADER_NORMAL),this.score.setTint(o_).setFont(gc.Z.PRIMARY.KEY).setFontSize(this.scene.fontSize(20)),this.scoreIcon.setTint(o_),Phaser.Display.Align.To.LeftCenter(this.scoreIcon,this.score,7,-2),this.username.setTint(15985647),e%2==0?this.background.setGradientPoints(uy):this.background.setGradientPoints(ly)),3===e?Phaser.Display.Align.In.LeftCenter(this.medalIcon,this.background,-33):Phaser.Display.Align.In.TopLeft(this.medalIcon,this.background,-33,1)},n.setSizeContainer=function(){this.setSize(375,57)},n.createAvatar=function(){this.avatar=new vc(this.scene,{key:s_,background:r_.AVATAR.BG,frame:r_.AVATAR.LEADER_NORMAL,width:35,height:35,backgroundWidth:31,backgroundHeight:31,photoWidth:33,photoHeight:33,loadDelay:100}),this.avatar.update(),this.avatar.loadPhoto(xa.Z.AVATAR.KEY,xa.Z.AVATAR.FILE,100),this.add(this.avatar)},n.createUsername=function(){this.username=this.scene.make.text({style:{fontFamily:gc.Z.FONT_FAMILY},origin:{x:0,y:.5}}),this.username.setHighQuality(),this.username.setFontSize(16),this.add(this.username)},n.createScore=function(){this.score=this.scene.make.bitmapText({font:gc.Z.PRIMARY.KEY,size:this.scene.fontSize(16),origin:{x:1,y:.5}}),this.add(this.score),this.setScore(0)},n.createScoreIcon=function(){this.scoreIcon=this.scene.add.image(0,0,s_,r_.MEDAL_STAR),this.scoreIcon.setWorldSize(18,20.5),this.add(this.scoreIcon)},n.createMedalIcon=function(){this.medalIcon=new n_(this.scene),this.medalIcon.kill(),this.add(this.medalIcon)},n.alignComponents=function(){Phaser.Display.Align.In.LeftCenter(this.medalIcon,this,-33),Phaser.Display.Align.To.RightCenter(this.avatar,this.medalIcon,8),Phaser.Display.Align.To.RightCenter(this.username,this.avatar,8),Phaser.Display.Align.In.RightCenter(this.score,this,-38)},t}(i_),h_=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n.leaders=[],n.loading=void 0,n.payload=[],n.scene=t,n.createLeaders(),n.alignLeaders(),n.createLoading(),n}(0,r.Z)(t,e);var n=t.prototype;return n.updateLeaders=function(e){(function(e,t){var n,i;if(e.length!==t.length)return!1;for(var a=Gi()(n=T()(e).call(e)).call(n,(function(e,t){return e.rank-t.rank})),s=Gi()(i=T()(t).call(t)).call(i,(function(e,t){return e.rank-t.rank})),r=0;r<a.length;r++){var o=a[r],c=s[r];if(o.playerId!==c.playerId||o.photo!==c.photo||o.score!==c.score||o.rank!==c.rank||o.name!==c.name)return!1}return!0})(this.payload,e)||(this.payload=e,this.leaders.forEach((function(t,n){t.updateData((0,a.Z)({},e[n]),n)})))},n.alignLeaders=function(){var e=this,t=this.leaders.length,n=t*this.leaders[0].height+0*(t-1);this.setSize(375,n),this.leaders.forEach((function(t,n){0!==n?Phaser.Display.Align.To.BottomCenter(t,e.leaders[n-1],0,0):Phaser.Display.Align.In.TopCenter(t,e)}))},n.createLoading=function(){this.loading=new ET.Z(this.scene),this.loading.revive(),this.add(this.loading)},n.hideContent=function(){this.leaders.forEach((function(e){return e.setAlpha(0)})),this.leaders.forEach((function(e){return e.hideContent()}))},n.runEntranceAnimation=function(){var e=(0,s.Z)(u().mark((function e(){var t,n,i,a,s=this;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Be()(t=this.leaders).call(t,(function(e,t){return new(c())((function(n){s.scene.add.tween({targets:[e],duration:250,delay:250*t/2,ease:Phaser.Math.Easing.Cubic.Out,props:{alpha:{from:0,to:1},y:{from:e.y+e.height/2,to:e.y},scale:{from:.85,to:1,ease:Phaser.Math.Easing.Elastic.Out,easeParams:[.1,.45],duration:1e3}},onComplete:n})}))})),e.next=3,c().all(i);case 3:return a=Be()(n=this.leaders).call(n,(function(e){return e.runEntranceAnimation()})),e.next=6,c().all(a);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),t}(Phaser.GameObjects.Container);var u_=function(e){function t(t){return e.call(this,t)||this}return(0,r.Z)(t,e),t.prototype.createLeaders=function(){for(var e=0;e<4;e++){var t=new c_(this.scene);this.leaders.push(t),3===e&&(t.isPlayer=!0);var n={playerId:e.toString(),photo:"",score:0,rank:e+1,name:"player"};t.updateData(n,e)}this.add(this.leaders)},t}(h_),l_=An.Z.GAMEPLAY_DEFAULT,d_=l_.KEY,p_=l_.FRAME,f_=Yy,g_=Wy.WIDTH,m_=f_.HEIGHT,v_=function(e){function t(t){return e.call(this,t)||this}(0,r.Z)(t,e);var n=t.prototype;return n.setSizeContainer=function(){var e=this.scene.gameZone.height;this.setSize(375,e)},n.createTitle=function(){this.title=this.scene.make.bitmapText({font:gc.Z.BOLD_SHADOW_BLUR.KEY,size:this.scene.fontSize(25),text:"Summer Tournament",origin:{x:.5,y:.5}}).setTint(16449487,16449487,15913325,15913325).setMaxWidth(g_),this.add(this.title)},n.createTimer=function(){this.timer=new Hw(this.scene),this.add(this.timer)},n.createLeaderList=function(){this.leaderList=new u_(this.scene),this.add(this.leaderList)},n.createFooter=function(){this.footer=new jw(this.scene),this.add(this.footer),this.footer.replayButton.onClick=this.handleReplay,this.footer.newGameButton.onClick=this.handleNewGame},n.createCloseButton=function(){var e=this;if(GameCore.Utils.Valid.isDebugger()){var t=new Nh.Z(this.scene,40,40);this.add(t);var n=this.scene.add.image(0,0,d_,p_.IC_BG_OFF);n.setWorldSize(40,40);var i=this.scene.make.bitmapText({font:gc.Z.PRIMARY.KEY,size:this.scene.fontSize(10),text:"Close",origin:{x:.5,y:.5}});i.setCenterAlign(),t.add([n,i]),Phaser.Display.Align.In.TopRight(t,this,-20,-80),t.onClick=(0,s.Z)(u().mark((function t(){return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.scene.screen.close(cs.o4.TOURNAMENTS_RESULT_SCREEN);case 1:case"end":return t.stop()}}),t)})))}},n.alignComponents=function(){this.width;var e=this.height-this.scene.ads.getBannerHeight()-m_,t=this.title.height+this.timer.height+this.leaderList.height+this.footer.height,n=1,i=Math.max((e-(t+218))/2,0);n=(e-t)/218,n=Math.max(Math.min(n,1),.2),Phaser.Display.Align.In.TopCenter(this.title,this,0,-73*n-i),this.title.x-=this.x,this.title.y-=this.y,Phaser.Display.Align.To.BottomCenter(this.timer,this.title,0,2*n),Phaser.Display.Align.To.BottomCenter(this.leaderList,this.timer,0,43*n),Phaser.Display.Align.To.BottomCenter(this.footer,this.leaderList,0,50*n)},t}(qw),y_=function(e){function t(t,n,i,a){var s;return(s=e.call(this,t,n,i,a)||this).scene=void 0,s.container=void 0,s.closed=!1,s.scene=t,s.setBackground(),s.createContainer(),s.setDepth(cs.Ks.POPUP),s}(0,r.Z)(t,e);var n=t.prototype;return n.open=function(){var t=(0,s.Z)(u().mark((function t(n){return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.prototype.open.call(this,n),this.updateInfo(),this.container.setAlpha(1),this.container.setInteractive(),this.runOpenAnimation(),this.closed=!1,this.add(this.scene.gameplay.confettiSmallFallDown),this.scene.sys.updateList.add(this.scene.gameplay.confettiSmallFallDown),this.scene.gameplay.confettiSmallFallDown.run(8,0,0);case 9:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),n.updateInfo=function(){var e=(0,s.Z)(u().mark((function e(){var t,n,i;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,SC.getData().catch((function(){return{id:0,title:"Your Tournament",endTime:604800+Date.now()/1e3,contextID:""}}));case 2:if(n=e.sent){e.next=5;break}return e.abrupt("return");case 5:if(this.container.updateTitle(n.title),this.container.updateTimer(n.endTime),this.container.alignComponents(),!(i=null==(t=n.payload)?void 0:t.leaderboardId)){e.next=12;break}return e.next=12,this.container.updateLeadersViaId(i);case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.close=function(){e.prototype.close.call(this)},n.stopConfettiAnimation=function(){this.scene.gameplay.confettiSmallFallDown.emitter.stop()},t}(GameCore.Screen),A_=function(e){function t(t,n,i,a){var s;return(s=e.call(this,t,n,i,a)||this).fadeInAnimation=void 0,s.fadeOutAnimation=void 0,s.slideInAnimation=void 0,s.footer=void 0,s.setBackground(),s.createFooter(),s.createBottomLogo(),En.Z.removeObject(s.background),s}(0,r.Z)(t,e);var n=t.prototype;return n.close=function(){this.closed=!0,this.runCloseAnimation(),this.stopConfettiAnimation()},n.createContainer=function(){this.container=new v_(this.scene),this.add(this.container)},n.createFooter=function(){this.footer=new yA(this.scene,!1,cs.o4.NO_MORE_MOVES_SCREEN),this.add(this.footer),this.bringToTop(this.footer),this.footer.setInteractive();var e=this.scene.ads.getBannerHeight(),t=this.scene.gameZone.width>375?-10:0;Phaser.Display.Align.In.BottomCenter(this.footer,this.background,0,-e+t)},n.createBottomLogo=function(){if(!this.scene.world.isLandscape()){var e=new Tg(this.scene);this.add(e),Phaser.Display.Align.In.BottomCenter(e,this)}},n.runOpenAnimation=function(){var e=(0,s.Z)(u().mark((function e(){var t,n,i,a=this;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==(t=this.slideInAnimation)||null==(n=t.tween)||!n.isPlaying()){e.next=2;break}return e.abrupt("return");case 2:this.scene.audio.playSound(hs.Z.POPUP_SHOW),i=this.scene.ads.getBannerHeight(),this.container.setAlpha(0),this.container.y=i,this.container.hideContent(),this.container.footer.newGameButton.stopPulsate(),this.slideInAnimation||(this.slideInAnimation=new pc.Z({targets:[this.container],ease:Phaser.Math.Easing.Back.Out,props:{y:{from:i,to:0},alpha:{from:0,to:1}},duration:300,onComplete:function(){var e=(0,s.Z)(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.container.runEntranceAnimation();case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()})),this.fadeInAnimation||(this.fadeInAnimation=new yh.Z({targets:[this],duration:300})),this.fadeInAnimation.play(),this.slideInAnimation.play();case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.runCloseAnimation=function(){var t,n,i=this;null!=(t=this.fadeOutAnimation)&&null!=(n=t.tween)&&n.isPlaying()||(this.scene.audio.playSound(hs.Z.POPUP_OFF),this.fadeOutAnimation||(this.fadeOutAnimation=new ef.Z({targets:[this],props:{alpha:0},duration:300,onComplete:function(){e.prototype.close.call(i)}})),this.fadeOutAnimation.play())},n.setBackground=function(){var e=this,t=this.scene.theme.getCurrentThemeConfig().backgroundKey;this.background.setAlpha(1),this.background.setTexture(t);var n=this.scene.gameZone,i=n.width,a=n.height;this.background.setWorldSize(i,a),this.scene.world.isLandscape()&&this.background.setScale(this.background.scaleY,this.background.scaleY),this.scene.events.on(vo.BACKGROUND_CHANGED,(function(t){e.background.setTexture(t),e.background.setWorldSize(i,a),e.scene.world.isLandscape()&&e.background.setScale(e.background.scaleY,e.background.scaleY)}))},t}(y_),E_=function(e){function t(t){return e.call(this,t)||this}(0,r.Z)(t,e);var n=t.prototype;return n.setSizeContainer=function(){this.setSize(375,30)},n.createTimerContainer=function(){this.timerText=this.scene.make.bitmapText({font:gc.Z.PRIMARY.KEY,size:this.scene.fontSize(12),origin:{x:.5,y:.5}}),this.timerText.setTint(15790071),this.timerText.setMaxSize(200,20),this.add([this.timerText])},t}(Ww),T_=E_,C_=An.Z.GAMEPLAY_DEFAULT_LANDSCAPE,S_=C_.KEY,b_=C_.FRAME,I_=function(e){function t(t){return e.call(this,t)||this}(0,r.Z)(t,e);var n=t.prototype;return n.setSizeContainer=function(){var e=new td(this.scene,{width:234,height:55,key:S_,frame:b_.RESULT.BOTTOM_BAR});this.add(e),this.setSize(e.width,e.height)},n.createNewGameButton=function(){this.newGameButton=new OA(this.scene,113,33.5),this.add(this.newGameButton),Phaser.Display.Align.In.RightCenter(this.newGameButton,this,-10,1)},n.createReplayButton=function(){this.replayButton=new fE(this.scene,95,33),this.add(this.replayButton),Phaser.Display.Align.In.LeftCenter(this.replayButton,this,-10,1)},t}(Kw),w_=An.Z.GAMEPLAY_DEFAULT_LANDSCAPE,__=w_.KEY,x_=w_.FRAME,P_=function(e){function t(t){return e.call(this,t)||this}(0,r.Z)(t,e);var n=t.prototype;return n.setRank=function(e){var t=this.getCorrectRankText(e);switch(this.rank=e,this.rankLabel.setText(t),this.medalNo123.kill(),this.customizedMedal.kill(),t){case"1":this.medalNo123.revive(),this.medalNo123.setFrame(x_.TOURNAMENT.IC_1ST_BG),this.medalNo123.setWorldSize(15.5,26.5),this.rankLabel.setTint(7158563),Phaser.Display.Align.In.Center(this.rankLabel,this.customizedMedal,0,5);break;case"2":this.medalNo123.revive(),this.medalNo123.setFrame(x_.TOURNAMENT.IC_2ND_BG),this.medalNo123.setWorldSize(16,27),this.rankLabel.setTint(4408131),Phaser.Display.Align.In.Center(this.rankLabel,this.customizedMedal,0,5);break;case"3":this.medalNo123.revive(),this.medalNo123.setFrame(x_.TOURNAMENT.IC_3RD_BG),this.medalNo123.setWorldSize(16,27),this.rankLabel.setTint(6369568),Phaser.Display.Align.In.Center(this.rankLabel,this.customizedMedal,0,5);break;default:this.customizedMedal.revive(),this.rankLabel.setTint(1066013),Phaser.Display.Align.In.Center(this.rankLabel,this.customizedMedal)}},n.setSizeContainer=function(){this.setSize(16,27)},n.createMedal123=function(){this.medalNo123=this.scene.add.image(0,0,__,x_.TOURNAMENT.IC_1ST),this.add(this.medalNo123)},n.createCustomizedMedal=function(){this.customizedMedal=this.scene.add.image(0,0,__,x_.TOURNAMENT.IC_NORMAL_BIG),this.customizedMedal.setWorldSize(20.5,21.5),this.add(this.customizedMedal)},n.createRankLabel=function(){this.rankLabel=this.scene.make.bitmapText({font:gc.Z.BOLD.KEY,size:this.scene.fontSize(12),origin:{x:.5,y:.5},text:""+this.rank}).setTint(1525537),this.add(this.rankLabel)},t}(Qw),k_=An.Z.GAMEPLAY_DEFAULT_LANDSCAPE,O_=k_.KEY,L_=k_.FRAME,R_=15461098,B_=function(e){function t(t,n){return void 0===n&&(n=!1),e.call(this,t,n)||this}(0,r.Z)(t,e);var n=t.prototype;return n.updateStyle=function(e,t){t||this.isPlayer?(this.avatar.setFrame(L_.AVATAR.LEADER_YOU),this.score.setTint(16510057).setFont(gc.Z.BOLD.KEY).setFontSize(this.scene.fontSize(14)),this.scoreIcon.setTint(16510057),Phaser.Display.Align.To.LeftCenter(this.scoreIcon,this.score,7),this.username.setTint(16184823),this.background.setGradientPoints(dy)):(this.avatar.setFrame(L_.AVATAR.LEADER_NORMAL),this.score.setTint(R_).setFont(gc.Z.PRIMARY.KEY).setFontSize(this.scene.fontSize(13)),this.scoreIcon.setTint(R_),Phaser.Display.Align.To.LeftCenter(this.scoreIcon,this.score,7),this.username.setTint(15985647),e%2==0?this.background.setGradientPoints(uy):this.background.setGradientPoints(ly)),3===e?Phaser.Display.Align.In.LeftCenter(this.medalIcon,this.background,-12.5):Phaser.Display.Align.In.TopLeft(this.medalIcon,this.background,-12.5,1)},n.setSizeContainer=function(){this.setSize(234.5,34.5)},n.createAvatar=function(){this.avatar=new vc(this.scene,{key:O_,background:L_.AVATAR.LEADER_BG,frame:L_.AVATAR.LEADER_YOU,width:24,height:24,backgroundWidth:22,backgroundHeight:22,photoWidth:22.8,photoHeight:22.8,loadDelay:100}),this.avatar.update(),this.avatar.loadPhoto(xa.Z.AVATAR.KEY,xa.Z.AVATAR.FILE,100),this.add(this.avatar)},n.createUsername=function(){this.username=this.scene.make.text({style:{fontFamily:gc.Z.FONT_FAMILY},origin:{x:0,y:.5}}),this.username.setHighQuality(),this.username.setFontSize(12),this.add(this.username)},n.createScore=function(){this.score=this.scene.make.bitmapText({font:gc.Z.PRIMARY.KEY,size:this.scene.fontSize(16),origin:{x:1,y:.5}}),this.add(this.score),this.setScore(0)},n.createScoreIcon=function(){this.scoreIcon=this.scene.add.image(0,0,O_,L_.MEDAL_STAR_SHADOW),this.scoreIcon.setWorldSize(16.5,19.5),this.add(this.scoreIcon)},n.createMedalIcon=function(){this.medalIcon=new P_(this.scene),this.medalIcon.kill(),this.add(this.medalIcon)},n.alignComponents=function(){Phaser.Display.Align.In.LeftCenter(this.medalIcon,this,-15),Phaser.Display.Align.To.RightCenter(this.avatar,this.medalIcon,4),Phaser.Display.Align.To.RightCenter(this.username,this.avatar,8),Phaser.Display.Align.In.RightCenter(this.score,this,-12)},t}(i_),D_=function(e){function t(t){return e.call(this,t)||this}return(0,r.Z)(t,e),t.prototype.createLeaders=function(){for(var e=0;e<4;e++){var t=new B_(this.scene);this.leaders.push(t),3===e&&(t.isPlayer=!0);var n={playerId:e.toString(),photo:"",score:0,rank:e+1,name:"player"};t.updateData(n,e)}this.add(this.leaders)},t}(h_),N_=An.Z.GAMEPLAY_DEFAULT_LANDSCAPE,M_=N_.KEY,G_=N_.FRAME,Z_=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=t,n.setSizeContainer(),n.createTitle(),n.createTimer(),n.createLeaderList(),n.createFooter(),n.alignComponents(),n}(0,r.Z)(t,e);var n=t.prototype;return n.setSizeContainer=function(){var e=new td(this.scene,{width:239,height:315.5,key:M_,frame:G_.RESULT.BACKGROUND_SOLO});this.add(e),this.setSize(e.width,e.height)},n.createTitle=function(){this.title=this.scene.make.bitmapText({font:gc.Z.BOLD_SHADOW_BLUR.KEY,size:this.scene.fontSize(16),text:"Summer Tournament",origin:{x:.5,y:.5}}).setTint(16449487,16449487,15913325,15913325).setMaxWidth(230),this.title.setIgnoreLanguage(),this.add(this.title)},n.createTimer=function(){this.timer=new T_(this.scene),this.add(this.timer)},n.createLeaderList=function(){this.leaderList=new D_(this.scene),this.add(this.leaderList)},n.createFooter=function(){this.footer=new I_(this.scene),this.add(this.footer),this.footer.replayButton.onClick=this.handleReplay,this.footer.newGameButton.onClick=this.handleNewGame},n.createCloseButton=function(){var e=this;if(GameCore.Utils.Valid.isDebugger()){var t=new Nh.Z(this.scene,40,40);this.add(t);var n=this.scene.add.image(0,0,M_,G_.IC_BG_OFF);n.setWorldSize(40,40);var i=this.scene.make.bitmapText({font:gc.Z.PRIMARY.KEY,size:this.scene.fontSize(10),text:"Close",origin:{x:.5,y:.5}});i.setCenterAlign(),t.add([n,i]),Phaser.Display.Align.In.TopRight(t,this,50,-80),t.onClick=(0,s.Z)(u().mark((function t(){return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.scene.screen.close(cs.o4.TOURNAMENTS_RESULT_SCREEN);case 1:case"end":return t.stop()}}),t)})))}},n.alignComponents=function(){var e=this;Phaser.Display.Align.In.TopCenter(this.title,this,0,-25),Phaser.Display.Align.In.TopCenter(this.timer,this,0,-55),Phaser.Display.Align.In.TopCenter(this.leaderList,this,0,-92.5),Phaser.Display.Align.In.BottomCenter(this.footer,this,0,-5);[this.title,this.timer,this.leaderList,this.footer].forEach((function(t){t.x-=e.x,t.y-=e.y}))},t}(qw),F_=function(e){function t(t,n,i,a){var s;return(s=e.call(this,t,n,i,a)||this).fadeInAnimation=void 0,s.fadeOutAnimation=void 0,s.slideInAnimation=void 0,s}(0,r.Z)(t,e);var n=t.prototype;return n.createContainer=function(){this.container=new Z_(this.scene),this.add(this.container)},n.runOpenAnimation=function(){var e=(0,s.Z)(u().mark((function e(){var t,n,i,a=this;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==(t=this.slideInAnimation)||null==(n=t.tween)||!n.isPlaying()){e.next=2;break}return e.abrupt("return");case 2:this.scene.audio.playSound(hs.Z.POPUP_SHOW),i=this.scene.ads.getBannerHeight(),this.container.setAlpha(0),this.container.y=i,this.container.hideContent(),this.container.footer.newGameButton.stopPulsate(),this.slideInAnimation||(this.slideInAnimation=new pc.Z({targets:[this.container],ease:Phaser.Math.Easing.Back.Out,props:{y:{from:i,to:0},alpha:{from:0,to:1}},duration:300,onComplete:function(){var e=(0,s.Z)(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.container.runEntranceAnimation();case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()})),this.fadeInAnimation||(this.fadeInAnimation=new yh.Z({targets:[this],duration:300})),this.fadeInAnimation.play(),this.slideInAnimation.play();case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.close=function(){this.closed=!0,this.runCloseAnimation(),this.stopConfettiAnimation()},n.runCloseAnimation=function(){var t,n,i=this;null!=(t=this.fadeOutAnimation)&&null!=(n=t.tween)&&n.isPlaying()||(this.scene.audio.playSound(hs.Z.POPUP_OFF),this.fadeOutAnimation||(this.fadeOutAnimation=new ef.Z({targets:[this],props:{alpha:0},duration:300,onComplete:function(){e.prototype.close.call(i)}})),this.fadeOutAnimation.play())},n.setBackground=function(){this.background.setTint(1315862),this.background.setAlpha(.5)},t}(y_),U_=GameCore.world.isLandscape()?F_:A_,z_=An.Z.JOURNEY,W_=z_.KEY,Y_=z_.FRAME,H_=function(e){function t(t){var n;return(n=e.call(this,t)||this).leftIcon=void 0,n.rightIcon=void 0,n.title=void 0,n.setSize(375,27),n.createIcons(),n.createTitle(),n.align(),n.title.on("textChanged",(function(){n.align()})),n}(0,r.Z)(t,e);var n=t.prototype;return n.createIcons=function(){this.leftIcon=this.scene.add.image(0,0,W_,Y_.AWESOME_SCREEN.RECTANGLE_TITLE),this.leftIcon.setWorldSize(12,12.5),this.rightIcon=this.scene.add.image(0,0,W_,Y_.AWESOME_SCREEN.RECTANGLE_TITLE),this.rightIcon.setWorldSize(12,12.5),this.add([this.leftIcon,this.rightIcon])},n.createTitle=function(){this.title=this.scene.make.bitmapText({font:gc.Z.BOLD_SHADOW_BLUR.KEY,size:this.scene.fontSize(24),origin:{x:.5,y:.5}}),this.title.setTranslationParameters({levelNumber:"1"}),this.title.setText("levelXChallenge"),this.title.setMaxSize(350,30),this.title.setTint(16449487,16449487,15913325,15913325),this.add(this.title)},n.align=function(){Phaser.Display.Align.To.RightCenter(this.rightIcon,this.title,5),Phaser.Display.Align.To.LeftCenter(this.leftIcon,this.title,5)},n.setLevel=function(e){this.title.setTranslationParameters({levelNumber:e.toString()}),this.align()},t}(Phaser.GameObjects.Container),K_=An.Z.JOURNEY,j_=K_.KEY,V_=K_.FRAME,J_=function(e){function t(t){var n;return(n=e.call(this,t)||this).background=void 0,n.missionText=void 0,n.levelLabel=void 0,n.updateSize(),n.createBackground(),n.createLevelLabel(),n.createMissionText(),n}(0,r.Z)(t,e);var n=t.prototype;return n.updateInfo=function(e,t){var n=e.key,i=e.interpolations,a=void 0===i?{}:i;this.missionText.setText(n),this.missionText.setTranslationParameters(a),this.levelLabel.setLevel(t)},n.updateSize=function(){this.setSize(374,130)},n.createBackground=function(){this.background=this.scene.add.image(0,0,j_,V_.AWESOME_SCREEN.LB_FRAME),this.background.setWorldSize(374,142.5),this.add(this.background)},n.createLevelLabel=function(){this.levelLabel=new H_(this.scene),this.add(this.levelLabel),Phaser.Display.Align.In.Center(this.levelLabel,this,0,-20)},n.createMissionText=function(){this.missionText=this.scene.make.bitmapText({font:gc.Z.BOLD_SHADOW_BLUR.KEY,size:this.scene.fontSize(20),text:"Having full stack for 1 tablue",origin:{x:.5,y:.5}}),this.missionText.setCenterAlign(),this.missionText.setMaxSize(360,30),this.add(this.missionText),Phaser.Display.Align.In.Center(this.missionText,this,0,21)},t}(Phaser.GameObjects.Container),X_=function(e){function t(t,n,i,a){var s;return(s=e.call(this,t,n,i,a)||this).fadeInAnimation=void 0,s.fadeOutAnimation=void 0,s.container=void 0,s.setBackground=function(){var e=s.scene.theme.getCurrentThemeConfig().backgroundKey;s.background.setTexture(e);var t=s.scene.gameZone,n=t.width,i=t.height;s.background.setWorldSize(n,i),s.background.setVisible(!1)},s.setDepth(cs.Ks.POPUP),s.setBackground(),s.createContainer(),s.scene.events.on(vo.BACKGROUND_CHANGED,s.setBackground),s}(0,r.Z)(t,e);var n=t.prototype;return n.createContainer=function(){this.container=new J_(this.scene),this.add(this.container)},n.open=function(){e.prototype.open.call(this),this.setBlockInputOutsideEnabled(!0),this.updateData(),this.container.setAlpha(1),this.runOpenAnimation()},n.close=function(){this.runCloseAnimation()},n.updateData=function(){if(this.scene instanceof eR){var e=this.scene.journeyLevelMechanicManager.getMissionDescription(),t=this.scene.journey.getCurrentLevel();e&&this.container.updateInfo(e,t)}},n.runOpenAnimation=function(){this.scene.audio.playSound(hs.Z.POPUP_SHOW),this.fadeInAnimation||(this.fadeInAnimation=new yh.Z({targets:[this],duration:300})),this.fadeInAnimation.play()},n.runCloseAnimation=function(){var t,n,i=this;null!=(t=this.fadeOutAnimation)&&null!=(n=t.tween)&&n.isPlaying()||(this.scene.audio.playSound(hs.Z.POPUP_OFF),this.fadeOutAnimation||(this.fadeOutAnimation=new ef.Z({targets:[this],props:{alpha:0},duration:300,onComplete:function(){e.prototype.close.call(i)}})),this.fadeOutAnimation.play())},t}(GameCore.Screen),q_=An.Z.JOURNEY_LANDSCAPE,Q_=q_.KEY,$_=q_.FRAME,ex=function(e){function t(t){var n;return(n=e.call(this,t)||this).leftIcon=void 0,n.rightIcon=void 0,n.title=void 0,n.setSize(375,27),n.createIcons(),n.createTitle(),n.align(),n.title.on("textChanged",(function(){n.align()})),n}(0,r.Z)(t,e);var n=t.prototype;return n.createIcons=function(){this.leftIcon=this.scene.add.image(0,0,Q_,$_.AWESOME_SCREEN.RECTANGLE_TITLE),this.leftIcon.setWorldSize(13.5,14),this.rightIcon=this.scene.add.image(0,0,Q_,$_.AWESOME_SCREEN.RECTANGLE_TITLE),this.rightIcon.setWorldSize(13.5,14),this.add([this.leftIcon,this.rightIcon])},n.createTitle=function(){this.title=this.scene.make.bitmapText({font:gc.Z.BOLD_SHADOW_BLUR.KEY,size:this.scene.fontSize(18),origin:{x:.5,y:.5}}),this.title.setTranslationParameters({levelNumber:"1"}),this.title.setText("levelXChallenge"),this.title.setMaxSize(375,25),this.title.setTint(16449487,16449487,15913325,15913325),this.add(this.title)},n.align=function(){Phaser.Display.Align.To.RightCenter(this.rightIcon,this.title,6.5),Phaser.Display.Align.To.LeftCenter(this.leftIcon,this.title,6.5)},n.setLevel=function(e){this.title.setTranslationParameters({levelNumber:e.toString()}),this.align()},t}(Phaser.GameObjects.Container),tx=An.Z.JOURNEY_LANDSCAPE,nx=tx.KEY,ix=tx.FRAME,ax=function(e){function t(t){var n;return(n=e.call(this,t)||this).background=void 0,n.missionText=void 0,n.levelLabel=void 0,n.updateSize(),n.createBackground(),n.createLevelLabel(),n.createMissionText(),n}(0,r.Z)(t,e);var n=t.prototype;return n.updateInfo=function(e,t){var n=e.key,i=e.interpolations,a=void 0===i?{}:i;this.missionText.setText(n),this.missionText.setTranslationParameters(a),this.levelLabel.setLevel(t)},n.updateSize=function(){this.setSize(374,130)},n.createBackground=function(){this.background=this.scene.add.image(0,0,nx,ix.BACKGROUND),this.background.setWorldSize(735.5,86),this.add(this.background)},n.createLevelLabel=function(){this.levelLabel=new ex(this.scene),this.add(this.levelLabel),Phaser.Display.Align.In.Center(this.levelLabel,this,0,-13)},n.createMissionText=function(){this.missionText=this.scene.make.bitmapText({font:gc.Z.BOLD_SHADOW_BLUR.KEY,size:this.scene.fontSize(16),text:"Having full stack for 1 tablue",origin:{x:.5,y:.5}}),this.missionText.setCenterAlign(),this.missionText.setMaxSize(350,20),this.add(this.missionText),Phaser.Display.Align.In.Center(this.missionText,this,0,16)},t}(Phaser.GameObjects.Container),sx=function(e){function t(t,n,i,a){var s;return(s=e.call(this,t,n,i,a)||this).fadeInAnimation=void 0,s.fadeOutAnimation=void 0,s.container=void 0,s.setBackground=function(){var e=s.scene.theme.getCurrentThemeConfig().backgroundKey;s.background.setTexture(e);var t=s.scene.gameZone,n=t.width,i=t.height;s.background.setWorldSize(n,i),s.background.setVisible(!1)},s.setDepth(cs.Ks.POPUP),s.setBackground(),s.createContainer(),s.scene.events.on(vo.BACKGROUND_CHANGED,s.setBackground),s}(0,r.Z)(t,e);var n=t.prototype;return n.createContainer=function(){this.container=new ax(this.scene),this.add(this.container)},n.open=function(){e.prototype.open.call(this),this.setBlockInputOutsideEnabled(!0),this.updateData(),this.container.setAlpha(1),this.runOpenAnimation()},n.close=function(){this.runCloseAnimation()},n.updateData=function(){if(this.scene instanceof eR){var e=this.scene.journeyLevelMechanicManager.getMissionDescription(),t=this.scene.journey.getCurrentLevel();e&&this.container.updateInfo(e,t)}},n.runOpenAnimation=function(){this.scene.audio.playSound(hs.Z.POPUP_SHOW),this.fadeInAnimation||(this.fadeInAnimation=new yh.Z({targets:[this],duration:300})),this.fadeInAnimation.play()},n.runCloseAnimation=function(){var t,n,i=this;null!=(t=this.fadeOutAnimation)&&null!=(n=t.tween)&&n.isPlaying()||(this.scene.audio.playSound(hs.Z.POPUP_OFF),this.fadeOutAnimation||(this.fadeOutAnimation=new ef.Z({targets:[this],props:{alpha:0},duration:300,onComplete:function(){e.prototype.close.call(i)}})),this.fadeOutAnimation.play())},t}(GameCore.Screen),rx=GameCore.world.isLandscape()?sx:X_,ox=n(183),cx=n.n(ox),hx=An.Z.JOURNEY,ux=hx.KEY,lx=hx.FRAME,dx=function(e){function t(t){var n;return(n=e.call(this,t)||this).journeyName=void 0,n.settingButton=void 0,n.closeButton=void 0,n.background=void 0,n.setSize(375,49),n.createBackground(),n.createSettingButton(),n.createCloseButton(),n.createJourneyName(),n}(0,r.Z)(t,e);var n=t.prototype;return n.setJourneyName=function(e){GameCore.Configs.Gameplay.ForceJourneyMode?this.journeyName.setText("journey"):(this.journeyName.setText("journeySeasonX"),this.journeyName.setTranslationParameter("seasonId",e))},n.updateUI=function(){var e=this.scene.journey.getSeasonId();this.setJourneyName(e)},n.createBackground=function(){this.background=new td(this.scene,{width:375,height:53.5,key:ux,frame:lx.BG_BAR_TOP,symmetricType:ed.HORIZONTAL}),this.add(this.background)},n.createSettingButton=function(){var e=this;this.settingButton=new Nh.Z(this.scene,26.5,27);var t=this.scene.make.image({key:ux,frame:lx.IC_SETTINGS});t.setWorldSize(this.settingButton.width,this.settingButton.height),this.settingButton.add(t),this.add(this.settingButton),Phaser.Display.Align.In.RightCenter(this.settingButton,this,-17.3),this.settingButton.onClick=function(){e.scene.screen.open(cs.o4.SETTINGS_SCREEN)}},n.createCloseButton=function(){var e=this;this.closeButton=new kg(this.scene),this.add(this.closeButton),Phaser.Display.Align.In.LeftCenter(this.closeButton,this,-13),this.closeButton.onClick=function(){e.scene.screen.close(cs.o4.JOURNEY_SCREEN)}},n.createJourneyName=function(){this.journeyName=this.scene.make.bitmapText({font:gc.Z.BOLD_SHADOW_BLUR.KEY,origin:{x:.5,y:.5},size:this.scene.fontSize(21)}),this.journeyName.setMaxSize(280,35),this.setJourneyName(1),this.journeyName.setTint(16449487,16449487,15913325,15913325),this.add(this.journeyName)},t}(Phaser.GameObjects.Container),px=An.Z.JOURNEY,fx=px.KEY,gx=px.FRAME,mx=function(e){function t(t){var n;return(n=e.call(this,t,198.5,62)||this).icon=void 0,n.levelText=void 0,n.setName("JourneyPlayButton"),n.createBackground(),n.createContent(),n.levelText.on("textChanged",(function(){n.align()})),n}(0,r.Z)(t,e);var n=t.prototype;return n.createBackground=function(){var e=this.scene.make.image({key:fx,frame:gx.BTN_PLAY});e.setWorldSize(this.width,this.height),this.add(e)},n.setLevel=function(e){this.levelText.setTranslationParameter("v",e),this.align()},n.createContent=function(){this.icon=this.scene.add.image(0,0,fx,gx.ICN_PLAY),this.icon.setWorldSize(16,27),this.levelText=this.scene.make.bitmapText({font:gc.Z.BOLD_SHADOW.KEY,size:this.scene.fontSize(27),origin:{x:.5,y:.5}}),this.levelText.setMaxSize(150,40),this.levelText.setTranslationParameter("v",1),this.levelText.setText("levelV"),this.add([this.icon,this.levelText])},n.align=function(){Phaser.Display.Align.In.Center(this.levelText,this,13,-2),this.levelText.x-=this.x,this.levelText.y-=this.y,Phaser.Display.Align.In.LeftCenter(this.icon,this.levelText,22,-1)},t}(Nh.Z),vx=An.Z.JOURNEY,yx=vx.KEY,Ax=vx.FRAME,Ex=function(e){function t(t){var n;return(n=e.call(this,t)||this).playButton=void 0,n.backButton=void 0,n.background=void 0,n.backgroundMask=void 0,n.setSize(375,95),n.createBackgroundMask(),n.createBackground(),n.createPlayButton(),n.createBackButton(),n}(0,r.Z)(t,e);var n=t.prototype;return n.updateUI=function(){var e=this.scene.journey.outOfMissions();this.playButton.setVisible(!e),this.backButton.setVisible(e)},n.createBackground=function(){this.background=new td(this.scene,{width:this.width,height:this.height,key:yx,frame:Ax.BG_BAR_BOT,symmetricType:ed.HORIZONTAL}),this.background.setInteractive(),Phaser.Display.Align.In.TopCenter(this.background,this),this.add(this.background)},n.createBackgroundMask=function(){var e=this.scene.theme.getThemeDefaultConfig().backgroundKey,t=this.scene.add.image(0,0,e);t.setOrigin(.5,1),this.add(t),this.backgroundMask=t,this.updateBackgroundMask()},n.updateBackgroundMask=function(){var e=this.scene.world.isLandscape()?20:0,t=this.scene.world.getPixelRatio(),n=this.scene.ads.getBannerHeight(),i=this.backgroundMask,a=this.scene.gameZone,s=a.width,r=a.height;i.setWorldSize(s,r),i.setCrop(0,i.frame.height-(this.height+n)/i.scaleY-e*t,this.width*t,r*t),i.setY(n+this.height/2+e)},n.createPlayButton=function(){this.playButton=new mx(this.scene),this.add(this.playButton),Phaser.Display.Align.In.BottomCenter(this.playButton,this,0,-12)},n.createBackButton=function(){var e=this,t=new wg(this.scene);t.onClick=function(){e.scene.screen.close(cs.o4.JOURNEY_SCREEN)},this.add(t),this.backButton=t,Phaser.Display.Align.In.TopCenter(this.backButton,this,0,-21)},n.setLevel=function(e){this.playButton.setLevel(e)},t}(Phaser.GameObjects.Container),Tx=n(669),Cx=An.Z.JOURNEY,Sx=(Cx.KEY,Cx.FRAME,function(e){function t(t){var n;return(n=e.call(this,t)||this).endTime=void 0,n.countdownTimer=void 0,n.timerText=void 0,n.onTimeOut=void 0,n.updateCountdown=(0,s.Z)(u().mark((function e(){var t,i,a,s,r,o;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=Date.now(),i=1e3*n.endTime-t,a=Math.floor(Math.abs(i)/864e5),i-=864e5*a,s=Math.floor(Math.abs(i)/36e5),i-=36e5*s,r=Math.floor(Math.abs(i)/6e4),i-=6e4*r,o=Math.round(i/1e3),i<0&&(i=0,n.onTimeOut&&n.onTimeOut()),n.timerText.setTranslationParameters({d:a.toString(),h:s.toString(),m:r.toString(),s:o.toString()});case 11:case"end":return e.stop()}}),e)}))),n.setSize(375,30),n.createBackground(),n.createTimerContainer(),n.createCountdownTimer(),t.add.existing((0,$a.Z)(n)),n}(0,r.Z)(t,e);var n=t.prototype;return n.createBackground=function(){var e=405021,t=[{position:0,tint1:e,alpha1:.05},{position:.25,tint1:e,alpha1:.5},{position:.4,tint1:e,alpha1:1},{position:.5,tint1:e,alpha1:1},{position:.6,tint1:e,alpha1:1},{position:.75,tint1:e,alpha1:.5},{position:1,tint1:e,alpha1:.05}],n=new hy(this.scene,367.5,24.5,t,"horizontal");n.setInteractive(),this.setSize(n.width,n.height),this.add(n)},n.createTimerContainer=function(){this.timerText=this.scene.make.bitmapText({font:gc.Z.PRIMARY.KEY,size:this.scene.fontSize(15.5),origin:{x:.5,y:.5}}),this.timerText.setTint(14602143),this.timerText.setTranslationParameters({d:"2",h:"8",m:"28",s:"8"}),this.timerText.setMaxSize(350,25),this.timerText.setText("timeLeftdhms"),Phaser.Display.Align.In.Center(this.timerText,this,0,2),this.add([this.timerText])},n.createCountdownTimer=function(){var e;void 0!=this.endTime&&(null==(e=this.countdownTimer)||e.destroy(),this.countdownTimer=this.scene.time.addEvent({loop:!0,delay:1e3,startAt:1e3,callback:this.updateCountdown}))},n.setCountdown=function(e){this.endTime=e,this.createCountdownTimer()},n.getRemain=function(){if(void 0!=this.endTime){var e=Date.now(),t=1e3*this.endTime-e;return t<0?0:t}},t}(Phaser.GameObjects.Container)),bx=Sx,Ix=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n.handleIncreaseSeason=function(){var e=n.scene.journey;e.increaseSeason()&&(n.resetJourneyData(),n.updateData(e.getCurrentLevel(),e.getTimeEnd()))},n.handlePlay=function(){n.scene.journey.isPlayingCurrentLevel()||(n.scene.journey.setIsPlayingCurrentLevel(),n.scene.gameplay.startJourneyMode()),n.scene.closeResultScreens()},n.scene=t,n.setContainerSize(),n}return(0,r.Z)(t,e),t.prototype.resetJourneyData=function(){var e=this.scene.journey;e.isPlayingCurrentLevel()||(e.resetNewSeason(),e.setIsPlayingCurrentLevel(!1))},t}(Phaser.GameObjects.Container),wx=function(e){function t(t){var n;return(n=e.call(this,t)||this).levelScroller=void 0,n.header=void 0,n.timeCounter=void 0,n.footer=void 0,n.loading=void 0,n.updateData=function(){var e=(0,s.Z)(u().mark((function e(t,i){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(cx()(t)){e.next=2;break}return e.abrupt("return");case 2:return n.loading.revive(),n.footer.setLevel(t),n.levelScroller.setLevelEnableMax(t),e.next=7,n.levelScroller.updateLevelScroller();case 7:n.loading.kill(),n.timeCounter&&n.timeCounter.setCountdown(i),n.footer.updateUI(),n.header.updateUI();case 11:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),n.createLevelScroller(),n.createHeader(),GameCore.Configs.Gameplay.ForceJourneyMode||n.createTimerCounter(),n.createFooter(),n.createLoading(),n}(0,r.Z)(t,e);var n=t.prototype;return n.checkForSeasonUpdate=function(){this.scene.journey.canUpdateNewSeason(new Date)&&this.handleIncreaseSeason()},n.createHeader=function(){this.header=new dx(this.scene),this.add(this.header),Phaser.Display.Align.In.TopCenter(this.header,this)},n.createTimerCounter=function(){this.timeCounter=new bx(this.scene),this.add(this.timeCounter),Phaser.Display.Align.In.TopCenter(this.timeCounter,this,0,-46)},n.createFooter=function(){this.footer=new Ex(this.scene),this.add(this.footer);var e=this.scene.ads.getBannerHeight();Phaser.Display.Align.In.BottomCenter(this.footer,this,0,-e),this.footer.playButton.onClick=this.handlePlay,this.footer.updateBackgroundMask()},n.createLevelScroller=function(){this.levelScroller=new Tx.Z(this.scene),this.add(this.levelScroller),this.levelScroller.setLevelEnableMax(this.scene.journey.getCurrentLevel()),this.levelScroller.updateLevelScroller()},n.setContainerSize=function(){var e=this.scene.gameZone,t=e.width,n=e.height;this.setSize(t,n)},n.createLoading=function(){var e=new ET.Z(this.scene);e.setVisible(!0),e.setScale(1.3),this.add(e),this.loading=e},t}(Ix),_x=function(e){function t(t,n,i,a){var r;return(r=e.call(this,t,n,i,a)||this).fadeInAnimation=void 0,r.fadeOutAnimation=void 0,r.container=void 0,r.updateContainer=(0,s.Z)(u().mark((function e(){var t,n,i;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r.visible){e.next=2;break}return e.abrupt("return");case 2:return t=r.scene.journey,e.next=5,t.updateJourney();case 5:n=t.getCurrentLevel(),i=t.getTimeEnd(),r.container.updateData(n,i);case 8:case"end":return e.stop()}}),e)}))),r.setBackground=function(){var e=r.scene.theme.getThemeDefaultConfig().backgroundKey;r.background.setTexture(e);var t=r.scene.gameZone,n=t.width,i=t.height;r.background.setWorldSize(n,i),r.scene.world.isLandscape()&&r.background.setScale(r.background.scaleY,r.background.scaleY)},r.setDepth(cs.Ks.POPUP),r.setBackground(),r.createContainer(),r.createBottomLogo(),r}(0,r.Z)(t,e);var n=t.prototype;return n.createContainer=function(){var e=this;this.container=new wx(this.scene),this.add(this.container),this.container.timeCounter&&(this.container.timeCounter.onTimeOut=function(){return e.updateContainer()})},n.createBottomLogo=function(){if(!this.scene.world.isLandscape()){var e=new Tg(this.scene);this.add(e),Phaser.Display.Align.In.BottomCenter(e,this)}},n.open=function(){e.prototype.open.call(this),this.setBlockInputOutsideEnabled(!0),this.container.setAlpha(1),this.updateContainer(),this.runOpenAnimation()},n.close=function(){this.runCloseAnimation()},n.runOpenAnimation=function(){this.scene.audio.playSound(hs.Z.POPUP_SHOW),this.fadeInAnimation||(this.fadeInAnimation=new yh.Z({targets:[this],duration:300})),this.fadeInAnimation.play()},n.runCloseAnimation=function(){var t,n,i=this;null!=(t=this.fadeOutAnimation)&&null!=(n=t.tween)&&n.isPlaying()||(this.scene.audio.playSound(hs.Z.POPUP_OFF),this.fadeOutAnimation||(this.fadeOutAnimation=new ef.Z({targets:[this],props:{alpha:0},duration:300,onComplete:function(){e.prototype.close.call(i)}})),this.fadeOutAnimation.play())},t}(GameCore.Screen),xx=An.Z.JOURNEY_LANDSCAPE,Px=xx.KEY,kx=xx.FRAME,Ox=function(e){function t(t){var n;return(n=e.call(this,t)||this).journeyName=void 0,n.closeButton=void 0,n.background=void 0,n.createBackground(),n.createCloseButton(),n.createJourneyName(),n}(0,r.Z)(t,e);var n=t.prototype;return n.setJourneyName=function(e){GameCore.Configs.Gameplay.ForceJourneyMode?this.journeyName.setText("journey"):(this.journeyName.setText("journeySeasonX"),this.journeyName.setTranslationParameter("seasonId",e))},n.updateUI=function(){var e=this.scene.journey.getSeasonId();this.setJourneyName(e)},n.createBackground=function(){this.background=new td(this.scene,{width:234,height:37.5,key:Px,frame:kx.BG_BAR_TOP,symmetricType:ed.HORIZONTAL}),this.add(this.background),this.setSize(this.background.width,this.background.height)},n.createCloseButton=function(){var e=this;this.closeButton=new Tm(this.scene),this.add(this.closeButton),Phaser.Display.Align.In.RightCenter(this.closeButton,this,-5),this.closeButton.onClick=function(){e.scene.screen.close(cs.o4.JOURNEY_SCREEN)}},n.createJourneyName=function(){this.journeyName=this.scene.make.bitmapText({font:gc.Z.BOLD_SHADOW_BLUR.KEY,origin:{x:.5,y:.5},size:this.scene.fontSize(15)}),this.journeyName.setMaxSize(190,20),this.setJourneyName(1),this.journeyName.setTint(16449487,16449487,15913325,15913325),this.add(this.journeyName)},t}(Phaser.GameObjects.Container),Lx=An.Z.JOURNEY_LANDSCAPE,Rx=Lx.KEY,Bx=Lx.FRAME,Dx=function(e){function t(t){var n;return(n=e.call(this,t,91.5,33.5)||this).icon=void 0,n.levelText=void 0,n.setName("JourneyPlayButton"),n.createBackground(),n.createContent(),n.levelText.on("textChanged",(function(){n.align()})),n}(0,r.Z)(t,e);var n=t.prototype;return n.createBackground=function(){var e=this.scene.make.image({key:Rx,frame:Bx.BTN_PLAY});e.setWorldSize(this.width,this.height),this.add(e)},n.setLevel=function(e){this.levelText.setTranslationParameter("v",e),this.align()},n.createContent=function(){this.icon=this.scene.add.image(0,0,Rx,Bx.ICN_PLAY),this.icon.setWorldSize(8,13.5),this.levelText=this.scene.make.bitmapText({font:gc.Z.BOLD_SHADOW.KEY,size:this.scene.fontSize(13),origin:{x:.5,y:.5}}),this.levelText.setMaxSize(65,20),this.levelText.setTranslationParameter("v",1),this.levelText.setText("levelV"),this.add([this.icon,this.levelText])},n.align=function(){Phaser.Display.Align.In.Center(this.levelText,this,8,-1),this.levelText.x-=this.x,this.levelText.y-=this.y,Phaser.Display.Align.In.LeftCenter(this.icon,this.levelText,13,-1)},t}(Nh.Z),Nx=An.Z.GAMEPLAY_DEFAULT_LANDSCAPE,Mx=Nx.KEY,Gx=Nx.FRAME,Zx=function(e){function t(t){var n;return(n=e.call(this,t)||this).playButton=void 0,n.backButton=void 0,n.background=void 0,n.setSize(235,46.5),n.createBackground(),n.createPlayButton(),n.createBackButton(),n}(0,r.Z)(t,e);var n=t.prototype;return n.updateUI=function(){var e=this.scene.journey.outOfMissions();this.playButton.setVisible(!e),this.backButton.setVisible(e)},n.createBackground=function(){this.background=new td(this.scene,{width:this.width,height:this.height,key:Mx,frame:Gx.TOURNAMENT.BOTTOM_BAR,symmetricType:ed.HORIZONTAL}),this.background.setInteractive(),Phaser.Display.Align.In.TopCenter(this.background,this),this.add(this.background)},n.createPlayButton=function(){this.playButton=new Dx(this.scene),this.add(this.playButton),Phaser.Display.Align.In.Center(this.playButton,this,0,3.5)},n.createBackButton=function(){var e=this,t=new gm(this.scene);t.onClick=function(){e.scene.screen.close(cs.o4.JOURNEY_SCREEN)},this.add(t),this.backButton=t,Phaser.Display.Align.In.Center(this.backButton,this,0,3.5)},n.setLevel=function(e){this.playButton.setLevel(e)},t}(Phaser.GameObjects.Container),Fx=An.Z.JOURNEY,Ux=(Fx.KEY,Fx.FRAME,function(e){function t(t){var n;return(n=e.call(this,t)||this).endTime=void 0,n.countdownTimer=void 0,n.timerText=void 0,n.onTimeOut=void 0,n.updateCountdown=(0,s.Z)(u().mark((function e(){var t,i,a,s,r,o;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=Date.now(),i=1e3*n.endTime-t,a=Math.floor(Math.abs(i)/864e5),i-=864e5*a,s=Math.floor(Math.abs(i)/36e5),i-=36e5*s,r=Math.floor(Math.abs(i)/6e4),i-=6e4*r,o=Math.round(i/1e3),i<0&&(i=0,n.onTimeOut&&n.onTimeOut()),n.timerText.setTranslationParameters({d:a.toString(),h:s.toString(),m:r.toString(),s:o.toString()});case 11:case"end":return e.stop()}}),e)}))),n.setSize(235,17),n.createBackground(),n.createTimerContainer(),n.createCountdownTimer(),t.add.existing((0,$a.Z)(n)),n}(0,r.Z)(t,e);var n=t.prototype;return n.createBackground=function(){var e=405021,t=[{position:0,tint1:e,alpha1:.05},{position:.25,tint1:e,alpha1:.5},{position:.4,tint1:e,alpha1:1},{position:.5,tint1:e,alpha1:1},{position:.6,tint1:e,alpha1:1},{position:.75,tint1:e,alpha1:.5},{position:1,tint1:e,alpha1:.05}],n=new hy(this.scene,this.width,this.height,t,"horizontal");n.setInteractive(),this.setSize(n.width,n.height),this.add(n)},n.createTimerContainer=function(){var e=this;this.timerText=this.scene.make.bitmapText({font:gc.Z.PRIMARY.KEY,size:this.scene.fontSize(11),origin:{x:0,y:.5}}),this.timerText.setTint(14602143),this.timerText.setTranslationParameters({d:"2",h:"8",m:"28",s:"8"}),this.timerText.setMaxSize(220,17),this.timerText.setText("timeLeftdhms"),Phaser.Display.Align.In.Center(this.timerText,this,0,1.5),this.timerText.on("textChanged",(function(){Phaser.Display.Align.In.Center(e.timerText,e,0,1.5),e.timerText.x-=e.x,e.timerText.y-=e.y})),this.add([this.timerText])},n.createCountdownTimer=function(){var e;void 0!=this.endTime&&(null==(e=this.countdownTimer)||e.destroy(),this.countdownTimer=this.scene.time.addEvent({loop:!0,delay:1e3,startAt:1e3,callback:this.updateCountdown}))},n.setCountdown=function(e){this.endTime=e,this.createCountdownTimer()},n.getRemain=function(){if(void 0!=this.endTime){var e=Date.now(),t=1e3*this.endTime-e;return t<0?0:t}},t}(Phaser.GameObjects.Container)),zx=Ux,Wx=function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).levelConfigMap=[],i.levelEnableMax=void 0,i.levelStars=void 0,i.isFastScroll=!1,i.updateLevelScroller=function(){i.levelConfigMap=i.scene.journey.getCurrentSeasonMissions(),i.clearItem(),i.updateLevelButtonContainers(i.levelConfigMap),i.setEnable(!0),i.value=i.getCorrectValue(),i.updateMinValue(),i.value>-i.minValue&&(i.value=-i.minValue),i.value<-i.maxValue&&(i.value=-i.maxValue)},i}(0,r.Z)(t,e);var n=t.prototype;return n.setLevelEnableMax=function(e){this.levelEnableMax=e||1},n.clearItem=function(){this.reset(),this.objects.clear(!1,!1)},n.updateLevelButtonContainers=function(e){var t=this.getConfigButtonContainers(e,this.levelEnableMax);this.updateConfig(t)},n.getConfigButtonContainers=function(e,t){for(var n=GameCore.Configs.LevelScroller.limitLevelButtonInContainer,i=[],a=[],s=1,r=GameCore.Configs.Gameplay.ForceJourneyMode,o=r?this.scene.journey.getLevelCountInForceMode():e.length;s<=o;s++){var c=!0;t&&(c=s<=t);var h,u={config:{level:r?s:e[s-1].level,key:r?"":e[s-1].key},enable:c};if(a.push(u),s%n===0)i.unshift({index:s/n,payloadLevelButtons:P()(h=[]).call(h,a)}),a=[]}return a.length>0&&(i.unshift({index:s,payloadLevelButtons:a}),s++),i},n.getIndexButtonContainer=function(e){var t=GameCore.Configs.LevelScroller.limitLevelButtonInContainer;return Math.ceil(e/t)},n.getCorrectValue=function(e){var t;void 0===e&&(e=!1);var n=GameCore.Configs.LevelScroller.limitLevelButtonInContainer,i=this.objHeight,a=this.padding,s=[0,46,47,0,40,50],r=e?this.levelEnableMax:this.scene.journey.getCurrentLevel(),o=this.listObjects.length-this.getIndexButtonContainer(r),c=r%n;c=0===c?6:c;var h=-(o*i)-5+Gh()(t=T()(s).call(s,0,c)).call(t,(function(e,t){return e+t}),0);return h-=0!==o?a*o:0},n.enableAllLevel=function(){var e=this.value,t=this.scene.journey.getCurrentLevel(),n=this.getConfigButtonContainers(this.levelConfigMap,t);this.updateConfig(n),this.setEnable(!0),this.value=e},n.updateMinValue=function(){var e=GameCore.Configs.LevelScroller.limitLevelButtonInContainer,t=-70,n=GameCore.Configs.Gameplay.ForceJourneyMode?this.scene.journey.getLevelCountInForceMode():this.levelConfigMap.length;t+=this.objHeight*((this.listObjects.length*e-n)/e),this.minValue=t},n.fastScroll=function(e){this.isScrollingBack||(this.isScrolling=!0,this.isScrollingSmooth=!0,this.isFastScroll=!0,this.velocity=2500*e)},n.stopFastScroll=function(e){this.isFastScroll&&(this.isFastScroll=!1,this.velocity=50*e)},t}(kC.Z),Yx=Wx,Hx=n(662),Kx=An.Z.JOURNEY_LANDSCAPE,jx=Kx.KEY,Vx=Kx.FRAME,Jx=function(e){function t(t){var n;return(n=e.call(this,t,jx,Vx.LV_PASSED_BG,29,29.5)||this).payload=void 0,n.overlay=void 0,n.text=void 0,n.levelRoundContainer=void 0,n.levelRoundTween=void 0,n.handleClick=function(){var e;n.payload.enable&&null!=(e=n.payload.config)&&e.level},n.payload={enable:!1,config:{level:0}},n.scene=t,n.setName("Level"),n.createUI(),n.align(),n}(0,r.Z)(t,e);var n=t.prototype;return n.createUI=function(){this.createLevelRound(),this.createButtonOverlay(),this.createText(),this.sendToBack(this.levelRoundContainer)},n.createButtonOverlay=function(){this.overlay=this.scene.make.image({key:jx,frame:Vx.LV_ACTIVE}),this.overlay.setWorldSize(50.5,53),this.overlay.kill(),this.add(this.overlay)},n.createText=function(){this.text=this.scene.make.bitmapText({font:gc.Z.BOLD_SHADOW.KEY,origin:{x:.5,y:.5},size:this.scene.fontSize(15)}),this.text.setIgnoreLanguage(),this.text.kill(),this.add(this.text)},n.createLevelRound=function(){this.levelRoundContainer=this.scene.add.container();var e=this.scene.make.image({key:jx,frame:Vx.LV_ACTIVE_FX,alpha:1});e.setWorldSize(52,52),this.levelRoundContainer.add([e]),this.add(this.levelRoundContainer)},n.align=function(){Phaser.Display.Align.In.Center(this.text,this.button),Phaser.Display.Align.In.Center(this.levelRoundContainer,this.overlay,0,-2)},n.setConfig=function(e){this.payload.config=e},n.setEnable=function(e){this.payload.enable=e},n.setPayload=function(e,t){void 0===t&&(t=!0),this.setConfig(e),this.setEnable(t)},n.updateOverlay=function(){var e,t,n,i,a=this.scene.journey.getCurrentLevel();if(this.overlay.revive(),this.payload.enable)if(a==(null==(t=this.payload.config)?void 0:t.level)){switch(null==(n=this.payload.config)?void 0:n.key){case"two-cards":this.overlay.setFrame(Vx.LV_TWO_CARDS_ACTIVE),this.overlay.setWorldSize(52,55.5);break;case"king":this.overlay.setFrame(Vx.ICO_SPECIAL_ACTIVE),this.overlay.setWorldSize(57,53);break;default:this.overlay.setFrame(Vx.LV_ACTIVE),this.overlay.setWorldSize(50.5,53)}var s;if(this.payload.config.key)this.levelRoundContainer.kill(),this.text.kill();else wu()(s=this.levelRoundContainer).call(s),this.text.revive()}else switch(null==(i=this.payload.config)?void 0:i.key){case"two-cards":this.overlay.setFrame(Vx.LV_TWO_CARDS_PASSED),this.overlay.setWorldSize(52.5,56);break;case"king":this.overlay.setFrame(Vx.ICO_SPECIAL_PASSED),this.overlay.setWorldSize(57,57);break;default:this.overlay.setFrame(Vx.LV_PASSED),this.overlay.setWorldSize(22,23)}else switch(null==(e=this.payload.config)?void 0:e.key){case"two-cards":this.overlay.setFrame(Vx.LV_TWO_CARDS_LOOKED),this.overlay.setWorldSize(86,95);break;case"king":this.overlay.setFrame(Vx.ICO_SPECIAL_LOCKED),this.overlay.setWorldSize(57,53);break;default:this.overlay.setFrame(Vx.ICO_LOCKED),this.overlay.setWorldSize(22,22)}},n.updateLevelButton=function(){var e,t;this.scene.journey.getCurrentLevel()===(null==(e=this.payload.config)?void 0:e.level)?(this.levelRoundContainer.revive(),this.button.setVisible(!1),this.runAnimation(),this.text.revive()):(this.text.kill(),this.button.setVisible(!0),this.levelRoundContainer.kill(),null==(t=this.levelRoundTween)||t.remove(),this.levelRoundTween=void 0);this.updateOverlay(),this.payload.config?(this.text.setText(""+this.payload.config.level),this.payload.config.level<100?this.text.setFontSize(this.scene.fontSize(15)):this.payload.config.level<1e3?this.text.setFontSize(this.scene.fontSize(12)):this.text.setFontSize(this.scene.fontSize(10))):(this.button.setSize(36.5,35),this.text.kill()),this.align()},n.updateEnable=function(e){this.setEnable(e),this.updateLevelButton()},n.runAnimation=function(){var e,t=1/this.scene.world.getPixelRatio();null==(e=this.levelRoundTween)||e.remove(),this.levelRoundTween=void 0,this.levelRoundTween=this.scene.tweens.add({targets:this.levelRoundContainer,scale:{start:t,from:t,to:1.4,delay:30,duration:1e3,ease:Hx.Z},alpha:{start:1,from:1,to:0,delay:100,duration:930},loop:-1})},t}(kc.Z),Xx=Jx,qx=n(667),Qx=An.Z.JOURNEY_LANDSCAPE,$x=Qx.KEY,eP=(Qx.FRAME,[{x:73/4,y:25,sizeOff:{width:36.5,height:6.5},sizeOn:{width:36.5,height:5.5}},{x:58,y:4,sizeOff:{width:49,height:47},sizeOn:{width:48,height:46.5}},{x:58,y:-48,sizeOff:{width:47,height:48.5},sizeOn:{width:46.5,height:48}},{x:0,y:-70,sizeOff:{width:73,height:6.5},sizeOn:{width:73,height:5.5}},{x:-60,y:-90,sizeOff:{width:49,height:47},sizeOn:{width:48,height:46.5}},{x:-61,y:-138,sizeOff:{width:47,height:48.5},sizeOn:{width:46.5,height:48}},{x:-73/4,y:-159,sizeOff:{width:36.5,height:6.5},sizeOn:{width:36.5,height:5.5}}]),tP=function(e){function t(t){var n;return(n=e.call(this,t)||this).paths=[],n.setSize(208.5,184),n.createPaths(),n.scene.add.existing((0,$a.Z)(n)),n}(0,r.Z)(t,e);var n=t.prototype;return n.createPaths=function(){for(var e,t=0;t<eP.length;t++){var n=t==eP.length-1||t%3==0?3:t%3,i=new qx.Z(this.scene,{enable:!1,key:$x,frameOff:"path g"+n,frameOn:"path y"+n,sizeOff:eP[t].sizeOff,sizeOn:eP[t].sizeOn});i.setVisible(!1),i.setPosition(eP[t].x,eP[t].y+this.height/2),i.flipX=t>=3,this.paths.push(i)}this.add(P()(e=[]).call(e,this.paths))},n.updatePathStart=function(e){e?(this.paths[1].options=(0,a.Z)({},this.paths[1].options,{frameOff:"path g0",frameOn:"path y0",sizeOff:{width:84,height:48},sizeOn:{width:84,height:48}}),this.paths[1].setEnable(this.paths[1].options.enable),this.paths[1].setPosition(40,+this.height/2),this.paths[0].setVisible(!1)):(this.paths[1].options=(0,a.Z)({},this.paths[1].options,{frameOff:"path g1",frameOn:"path y1",sizeOff:eP[1].sizeOff,sizeOn:eP[1].sizeOn}),this.paths[1].setEnable(this.paths[1].options.enable),this.paths[1].setPosition(eP[1].x,eP[1].y+this.height/2),this.paths[0].setVisible(!0))},t}(Phaser.GameObjects.Container),nP=tP,iP=[{x:30,y:-1},{x:76,y:-47},{x:30,y:-94},{x:-26,y:-94},{x:-79,y:-134},{x:-34,y:-184}],aP=function(e){function t(t){var n;return(n=e.call(this,t)||this).background=void 0,n.buttons=[],n.payload=void 0,n.pathContainer=void 0,n.heightContainer=0,n.init(),n}(0,r.Z)(t,e);var n=t.prototype;return n.init=function(){this.payload={index:-1,payloadLevelButtons:[]},this.createPathContainers(),this.setSize(208.5,this.heightContainer),this.addNewButtons(GameCore.Configs.LevelScroller.limitLevelButtonInContainer)},n.clear=function(){this.buttons=[]},n.createPathContainers=function(){this.pathContainer=new nP(this.scene),this.pathContainer.setPosition(0,this.heightContainer),this.heightContainer=this.pathContainer.height;var e=-this.heightContainer/5;this.pathContainer.setPosition(0,e),this.add(this.pathContainer)},n.addNewButtons=function(e){for(var t=0;t<e;t++){var n=new Xx(this.scene);this.buttons.push(n),this.add(n)}},n.setButtons=function(e){this.removeAll(),this.add(this.buttons),this.buttons=e},n.updateButtons=function(){if(-1!==this.payload.index){for(var e=GameCore.Configs.LevelScroller.limitLevelButtonInContainer,t=this.heightContainer/2-14.5,n=0;n<this.buttons.length&&(this.buttons[n]&&iP[n]);n++)this.buttons[n].setPosition(iP[n].x,iP[n].y+t),0==n&&this.isIncludeLevel1()&&this.buttons[n].setPosition(0,t);for(var i=0;i<this.buttons.length;i++)this.buttons[i].kill();for(var a=0;a<this.pathContainer.paths.length;a++)this.pathContainer.paths[a].setVisible(!1);for(var s=0;s<this.payload.payloadLevelButtons.length;s++){var r=this.payload.payloadLevelButtons[s];this.buttons[s].revive(),this.buttons[s].setPayload(r.config,r.enable),this.buttons[s].updateLevelButton(),this.pathContainer.paths[s].setEnable(r.enable),this.pathContainer.paths[s].setVisible(!0)}this.payload.payloadLevelButtons.length==e&&this.pathContainer.paths[6].setVisible(!0),this.isLastItem()&&(this.pathContainer.paths[6].visible=!1);var o=this.scene.journey.getCurrentLevel();this.pathContainer.paths[6].setEnable(this.getMaxLevel()<o),this.pathContainer.updatePathStart(1==this.payload.index&&this.isIncludeLevel1())}},n.updateInfo=function(e){this.payload=e,this.updateButtons()},n.setVisible=function(t){return e.prototype.setVisible.call(this,t),this},n.isIncludeLevel1=function(){for(var e=this.payload.payloadLevelButtons,t=0;t<e.length;t++)if(1==e[t].config.level)return!0;return!1},n.isLastItem=function(){var e=this.payload.payloadLevelButtons,t=this.scene.journey.getCurrentSeasonMissions(),n=GameCore.Configs.Gameplay.ForceJourneyMode?this.scene.journey.getLevelCountInForceMode():t.length,i=GameCore.Configs.LevelScroller.limitLevelButtonInContainer;return e.length>0&&Math.ceil(e[0].config.level/i)==Math.ceil(n/i)},n.getMaxLevel=function(){var e=this.payload.payloadLevelButtons;return e[e.length-1].config.level||1},t}(Phaser.GameObjects.Container),sP=aP,rP=An.Z.GAMEPLAY_DEFAULT_LANDSCAPE,oP=rP.KEY,cP=rP.FRAME,hP=function(e){function t(t){var n;return(n=e.call(this,t)||this).levelScroller=void 0,n.header=void 0,n.timeCounter=void 0,n.footer=void 0,n.loading=void 0,n.updateData=function(){var e=(0,s.Z)(u().mark((function e(t,i){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(cx()(t)){e.next=2;break}return e.abrupt("return");case 2:return n.loading.revive(),n.footer.setLevel(t),n.levelScroller.setLevelEnableMax(t),e.next=7,n.levelScroller.updateLevelScroller();case 7:n.loading.kill(),n.timeCounter&&n.timeCounter.setCountdown(i),n.footer.updateUI(),n.header.updateUI();case 11:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),n.createHeader(),n.createFooter(),n.createLevelScroller(),GameCore.Configs.Gameplay.ForceJourneyMode?n.add([n.header,n.footer]):(n.createTimerCounter(),n.add([n.header,n.timeCounter,n.footer])),n.createLoading(),n.addMaskHitZone(),n}(0,r.Z)(t,e);var n=t.prototype;return n.createHeader=function(){this.header=new Ox(this.scene),Phaser.Display.Align.In.TopCenter(this.header,this,0,-1.5)},n.createTimerCounter=function(){this.timeCounter=new zx(this.scene),Phaser.Display.Align.To.BottomCenter(this.timeCounter,this.header,0,-4)},n.createFooter=function(){this.footer=new Zx(this.scene),Phaser.Display.Align.In.BottomCenter(this.footer,this,0,-5),this.footer.playButton.onClick=this.handlePlay},n.createLevelScroller=function(){var e=this.width,t=this.height;this.levelScroller=new Yx(this.scene,{classType:sP,listConfigs:[],width:e,height:t-this.footer.height-this.header.height+40,marginTop:0,marginBottom:80}),this.levelScroller.createScrollerBar(4,41),this.levelScroller.setPosition(0,11),this.add(this.levelScroller),this.levelScroller.setLevelEnableMax(this.scene.journey.getCurrentLevel()),this.levelScroller.updateLevelScroller(),this.levelScroller.createMask()},n.setContainerSize=function(){var e=new td(this.scene,{width:239,height:388,key:oP,frame:cP.TOURNAMENT.BACKGROUND});this.add(e),this.setSize(e.width,e.height)},n.createLoading=function(){var e=new ET.Z(this.scene);e.setVisible(!0),e.setScale(1.3),this.add(e),this.loading=e},n.addMaskHitZone=function(){var e=this.scene.world.getWorldSize().height-this.height,t=this.scene.add.zone(0,0,this.width,e/2);t.setInteractive(),Phaser.Display.Align.In.TopCenter(t,this,0,t.height),this.add(t);var n=this.scene.add.zone(0,0,this.width,e/2);n.setInteractive(),Phaser.Display.Align.To.BottomCenter(n,this.footer),this.add(n)},t}(Ix),uP=function(e){function t(t,n,i,a){var r;return(r=e.call(this,t,n,i,a)||this).fadeInAnimation=void 0,r.fadeOutAnimation=void 0,r.container=void 0,r.updateContainer=(0,s.Z)(u().mark((function e(){var t,n,i;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r.visible){e.next=2;break}return e.abrupt("return");case 2:return t=r.scene.journey,e.next=5,t.updateJourney();case 5:n=t.getCurrentLevel(),i=t.getTimeEnd(),r.container.updateData(n,i);case 8:case"end":return e.stop()}}),e)}))),r.setBackground=function(){r.background.setTint(1315862),r.background.setAlpha(.5)},r.setDepth(cs.Ks.POPUP),r.setBackground(),r.createContainer(),r}(0,r.Z)(t,e);var n=t.prototype;return n.createContainer=function(){var e=this;this.container=new hP(this.scene),this.add(this.container),this.container.timeCounter&&(this.container.timeCounter.onTimeOut=function(){return e.updateContainer()})},n.open=function(){e.prototype.open.call(this),this.setBlockInputOutsideEnabled(!0),this.container.setAlpha(1),this.updateContainer(),this.runOpenAnimation()},n.close=function(){this.runCloseAnimation()},n.runOpenAnimation=function(){this.scene.audio.playSound(hs.Z.POPUP_SHOW),this.fadeInAnimation||(this.fadeInAnimation=new yh.Z({targets:[this],duration:300})),this.fadeInAnimation.play()},n.runCloseAnimation=function(){var t,n,i=this;null!=(t=this.fadeOutAnimation)&&null!=(n=t.tween)&&n.isPlaying()||(this.scene.audio.playSound(hs.Z.POPUP_OFF),this.fadeOutAnimation||(this.fadeOutAnimation=new ef.Z({targets:[this],props:{alpha:0},duration:300,onComplete:function(){e.prototype.close.call(i)}})),this.fadeOutAnimation.play())},t}(GameCore.Screen),lP=GameCore.world.isLandscape()?uP:_x,dP=function(){function e(e){this.scene=void 0,this.scene=e}var t=e.prototype;return t.initData=function(){},t.getMissionDescription=function(){return{key:"solveThisDeal"}},t.isDescriptionCompleted=function(){return this.scene.gameplay.boardGame.isGameWon()},t.getMissionLimit=function(){return null},e}(),pP=function(){function e(e){this.scene=void 0,this.scene=e}var t=e.prototype;return t.initData=function(){},t.getMissionDescription=function(){return{key:"solveAlmostFinishGame",interpolations:{}}},t.isDescriptionCompleted=function(){return this.scene.gameplay.boardGame.isGameWon()},t.getMissionLimit=function(){return null},e}();function fP(e){switch(e){case Ou.CLUB:return"\u2663";case Ou.HEART:return"\u2665";case Ou.DIAMOND:return"\u2666";case Ou.SPADE:return"\u2660";default:return"x"}}function gP(e){switch(e){case ku.ACE:return"A";case ku.TWO:return"2";case ku.THREE:return"3";case ku.FOUR:return"4";case ku.FIVE:return"5";case ku.SIX:return"6";case ku.SEVEN:return"7";case ku.EIGHT:return"8";case ku.NINE:return"9";case ku.TEN:return"10";case ku.JACK:return"J";case ku.QUEEN:return"Q";case ku.KING:return"K";case ku.ANY:return"?";default:throw new Error("Invalid card rank: "+e)}}var mP=function(){function e(e){this.scene=void 0,this.openedCard=!1,this.wantedCardStat=null,this.scene=e,this.wantedCardStat=null}var t=e.prototype;return t.initData=function(){this.openedCard=!1,this.wantedCardStat=this.getCardStat()},t.getCardStat=function(){var e=this.scene.journey.getCurrentMission();if(!e)return null;var t=e.cardStats;return 0===t.length?null:t[0]},t.getMissionDescription=function(){if(!this.wantedCardStat)return null;var e=this.wantedCardStat,t=e.cardSuit;return{key:"revealRankOfSuit",interpolations:{rank:gP(e.cardRank),suit:fP(t)}}},t.isDescriptionCompleted=function(){var e=this;if(!this.wantedCardStat)return!1;var t=this.wantedCardStat,n=t.cardSuit,i=t.cardRank;return this.scene.events.off(Pu.OPEN_CARD),this.scene.events.on(Pu.OPEN_CARD,(function(t){var a=t.isTheSameCardSuit(n),s=t.isTheSameCardRank(i);a&&s&&(e.openedCard=!0)})),this.openedCard},t.getMissionLimit=function(){return null},e}(),vP=function(){function e(e){this.scene=void 0,this.wantedCount=0,this.scene=e,this.wantedCount=0}var t=e.prototype;return t.initData=function(){this.wantedCount=this.getStatCount()},t.getStatCount=function(){var e,t,n=null!=(e=null==(t=this.scene.journey.getCurrentMission())?void 0:t.cardStats)?e:[];return 0===n.length?0:Gh()(n).call(n,(function(e,t){return e+t.count}),0)},t.getMissionDescription=function(){var e=this.wantedCount;return 1==e?{key:"moveOneCard",interpolations:{}}:{key:"moveManyCards",interpolations:{count:e.toString()}}},t.isDescriptionCompleted=function(){return this.scene.gameplay.boardGame.getFoundationsCardsCount()>=this.wantedCount},t.getMissionLimit=function(){return{key:"journeyLimitCards",interpolations:{formattedCounter:this.scene.gameplay.boardGame.getFoundationsCardsCount()+"/"+this.wantedCount}}},e}();var yP=function(){function e(e){this.scene=void 0,this.requiredSpadeCount=0,this.requiredHeartCount=0,this.requiredDiamondCount=0,this.requiredClubCount=0,this.scene=e,this.requiredSpadeCount=0,this.requiredHeartCount=0,this.requiredDiamondCount=0,this.requiredClubCount=0}var t=e.prototype;return t.initData=function(){var e=this.scene.journey.getCurrentMission();if(e){var t=function(e){var t=0,n=0,i=0,a=0,s=0;return e.forEach((function(e){var r=e.cardSuit,o=e.count;switch(r){case Ou.SPADE:t+=o;break;case Ou.HEART:n+=o;break;case Ou.DIAMOND:a+=o;break;case Ou.CLUB:i+=o;break;case Ou.ANY:s+=o}})),{spadeCount:t,heartCount:n,clubCount:i,diamondCount:a,anyCount:s}}(e.cardStats),n=t.spadeCount,i=t.heartCount,a=t.clubCount,s=t.diamondCount;this.requiredSpadeCount=n,this.requiredHeartCount=i,this.requiredDiamondCount=s,this.requiredClubCount=a}},t.getMissionDescription=function(){return this.scene.journey.getCurrentMission()?this.moveCardsToFoundationMissionDescription(this.requiredSpadeCount,this.requiredHeartCount,this.requiredClubCount,this.requiredDiamondCount):null},t.isDescriptionCompleted=function(){if(!this.scene.journey.getCurrentMission())return!1;var e=this.scene.gameplay.boardGame.getFoundationCardSuitCounts(),t=e.spadeCount,n=e.heartCount,i=e.clubCount,a=e.diamondCount;return t>=this.requiredSpadeCount&&n>=this.requiredHeartCount&&i>=this.requiredClubCount&&a>=this.requiredDiamondCount},t.moveCardsToFoundationMissionDescription=function(e,t,n,i){var a={spade:e,heart:t,club:n,diamond:i},s=[];for(var r in a)if(a[r]>0){var o=a[r],c=fP(r);s.push({count:o,suit:c})}var h=s[0],u=s[1];switch(s.length){case 1:return{key:1===h.count?"moveOneCardOfSuit":"moveXCardsOfSuit",interpolations:{count:h.count.toString(),suit:h.suit}};case 2:return{key:1===h.count&&1===u.count?"moveOneCardsOfSuit1AndOneCardOfSuit2":1===h.count?"moveOneCardOfSuit1AndYCardsOfSuit2":1===u.count?"moveXCardsOfSuit1AndOneCardOfSuit2":"moveOneCardsOfSuit1AndOneCardOfSuit2",interpolations:{count1:h.count.toString(),suit1:h.suit,count2:u.count.toString(),suit2:u.suit}};default:return null}},t.getMissionLimit=function(){if(!this.scene.journey.getCurrentMission())return null;var e=this.scene.gameplay.boardGame.getFoundationCardSuitCounts(),t=e.spadeCount,n=e.heartCount,i=e.clubCount,a=e.diamondCount,s=0,r=0;return this.requiredSpadeCount>0&&(s+=this.requiredSpadeCount,r+=t),this.requiredHeartCount>0&&(s+=this.requiredHeartCount,r+=n),this.requiredDiamondCount>0&&(s+=this.requiredDiamondCount,r+=a),this.requiredClubCount>0&&(s+=this.requiredClubCount,r+=i),{key:"journeyLimitCards",interpolations:{formattedCounter:r+"/"+s}}},e}();function AP(e,t){var n="undefined"!==typeof I()&&_()(e)||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){var n;if(!e)return;if("string"===typeof e)return EP(e,t);var i=T()(n=Object.prototype.toString.call(e)).call(n,8,-1);"Object"===i&&e.constructor&&(i=e.constructor.name);if("Map"===i||"Set"===i)return S()(e);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return EP(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var i=0;return function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function EP(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var TP=function(){function e(e){this.scene=void 0,this.completed=!1,this.scene=e}var t=e.prototype;return t.initData=function(){this.completed=!1},t.getMissionDescription=function(){var e=this.scene.journey.getCurrentMission();if(!e)return null;var t=e.cardStats;if(1!==t.length)return null;var n=t[0],i=n.cardSuit,a=n.cardRank,s=fP(i);return{key:"moveRankOfSuitToFoundation",interpolations:{rank:gP(a),suitEmoji:s}}},t.isDescriptionCompleted=function(){var e=this.scene.journey.getCurrentMission();if(!e)return!1;var t=e.cardStats;if(1!==t.length)return!1;for(var n,i=t[0],a=i.cardSuit,s=i.cardRank,r=AP(this.scene.gameplay.boardGame.foundations);!(n=r()).done;)for(var o,c=AP(n.value.cards);!(o=c()).done;){var h=o.value;if(h.isTheSameCardSuit(a)&&h.isTheSameCardRank(s))return this.completed=!0,!0}return!1},t.getMissionLimit=function(){return this.scene.journey.getCurrentMission()?{key:"journeyLimitCards",interpolations:{formattedCounter:(this.completed?1:0)+"/1"}}:null},e}();var CP=function(){function e(e){this.scene=void 0,this.requiredAceCount=0,this.requiredTwoCount=0,this.requiredThreeCount=0,this.requiredFourCount=0,this.requiredFiveCount=0,this.requiredSixCount=0,this.requiredSevenCount=0,this.requiredEightCount=0,this.requiredNineCount=0,this.requiredTenCount=0,this.requiredJackCount=0,this.requiredQueenCount=0,this.requiredKingCount=0,this.scene=e,this.initData()}var t=e.prototype;return t.initData=function(){var e=this.scene.journey.getCurrentMission();if(e){var t=function(e){var t=0,n=0,i=0,a=0,s=0,r=0,o=0,c=0,h=0,u=0,l=0,d=0,p=0;return e.forEach((function(e){var f=e.cardRank,g=e.count;switch(f){case ku.ACE:t+=g;break;case ku.TWO:n+=g;break;case ku.THREE:i+=g;break;case ku.FOUR:a+=g;break;case ku.FIVE:s+=g;break;case ku.SIX:r+=g;break;case ku.SEVEN:o+=g;break;case ku.EIGHT:c+=g;break;case ku.NINE:h+=g;break;case ku.TEN:u+=g;break;case ku.JACK:l+=g;break;case ku.QUEEN:d+=g;break;case ku.KING:p+=g}})),{aceCount:t,twoCount:n,threeCount:i,fourCount:a,fiveCount:s,sixCount:r,sevenCount:o,eightCount:c,nineCount:h,tenCount:u,jackCount:l,queenCount:d,kingCount:p}}(e.cardStats),n=t.aceCount,i=t.twoCount,a=t.threeCount,s=t.fourCount,r=t.fiveCount,o=t.sixCount,c=t.sevenCount,h=t.eightCount,u=t.nineCount,l=t.tenCount,d=t.jackCount,p=t.queenCount,f=t.kingCount;this.requiredAceCount=n,this.requiredTwoCount=i,this.requiredThreeCount=a,this.requiredFourCount=s,this.requiredFiveCount=r,this.requiredSixCount=o,this.requiredSevenCount=c,this.requiredEightCount=h,this.requiredNineCount=u,this.requiredTenCount=l,this.requiredJackCount=d,this.requiredQueenCount=p,this.requiredKingCount=f}},t.getMissionDescription=function(){return this.scene.journey.getCurrentMission()?this.moveCardsToFoundationMissionDescription(this.requiredAceCount,this.requiredTwoCount,this.requiredThreeCount,this.requiredFourCount,this.requiredFiveCount,this.requiredSixCount,this.requiredSevenCount,this.requiredEightCount,this.requiredNineCount,this.requiredTenCount,this.requiredJackCount,this.requiredQueenCount,this.requiredKingCount):null},t.isDescriptionCompleted=function(){if(!this.scene.journey.getCurrentMission())return!1;var e=this.scene.gameplay.boardGame.getFoundationCardRankCounts(),t=e.aceCount,n=e.twoCount,i=e.threeCount,a=e.fourCount,s=e.fiveCount,r=e.sixCount,o=e.sevenCount,c=e.eightCount,h=e.nineCount,u=e.tenCount,l=e.jackCount,d=e.queenCount,p=e.kingCount;return t>=this.requiredAceCount&&n>=this.requiredTwoCount&&i>=this.requiredThreeCount&&a>=this.requiredFourCount&&s>=this.requiredFiveCount&&r>=this.requiredSixCount&&o>=this.requiredSevenCount&&c>=this.requiredEightCount&&h>=this.requiredNineCount&&u>=this.requiredTenCount&&l>=this.requiredJackCount&&d>=this.requiredQueenCount&&p>=this.requiredKingCount},t.moveCardsToFoundationMissionDescription=function(e,t,n,i,a,s,r,o,c,h,u,l,d){var p={ace:e,two:t,three:n,four:i,five:a,six:s,seven:r,eight:o,nine:c,ten:h,jack:u,queen:l,king:d},f=[];for(var g in p)if(p[g]>0){var m=p[g],v=gP(g);f.push({count:m,rank:v})}var y=f[0],A=f[1];switch(f.length){case 1:return{key:1===y.count?"moveOneCardOfRank":"moveXCardsOfRank",interpolations:{count:y.count.toString(),rank:y.rank}};case 2:return{key:1===y.count&&1===A.count?"moveOneCardsOfRank1AndOneCardOfRank2":1===y.count?"moveOneCardOfRank1AndYCardsOfRank2":1===A.count?"moveXCardsOfRank1AndOneCardOfRank2":"moveOneCardsOfRank1AndOneCardOfRank2",interpolations:{count1:y.count.toString(),suit1:y.rank,count2:A.count.toString(),suit2:A.rank}};default:return null}},t.getMissionLimit=function(){if(!this.scene.journey.getCurrentMission())return null;var e=this.scene.gameplay.boardGame.getFoundationCardRankCounts(),t=e.aceCount,n=e.twoCount,i=e.threeCount,a=e.fourCount,s=e.fiveCount,r=e.sixCount,o=e.sevenCount,c=e.eightCount,h=e.nineCount,u=e.tenCount,l=e.jackCount,d=e.queenCount,p=e.kingCount,f=0,g=0;return this.requiredAceCount>0&&(f+=this.requiredAceCount,g+=t),this.requiredTwoCount>0&&(f+=this.requiredTwoCount,g+=n),this.requiredThreeCount>0&&(f+=this.requiredThreeCount,g+=i),this.requiredFourCount>0&&(f+=this.requiredFourCount,g+=a),this.requiredFiveCount>0&&(f+=this.requiredFiveCount,g+=s),this.requiredSixCount>0&&(f+=this.requiredSixCount,g+=r),this.requiredSevenCount>0&&(f+=this.requiredSevenCount,g+=o),this.requiredEightCount>0&&(f+=this.requiredEightCount,g+=c),this.requiredNineCount>0&&(f+=this.requiredNineCount,g+=h),this.requiredTenCount>0&&(f+=this.requiredTenCount,g+=u),this.requiredJackCount>0&&(f+=this.requiredJackCount,g+=l),this.requiredQueenCount>0&&(f+=this.requiredQueenCount,g+=d),this.requiredKingCount>0&&(f+=this.requiredKingCount,g+=p),{key:"journeyLimitCards",interpolations:{formattedCounter:g+"/"+f}}},e}(),SP=function(){function e(e){this.scene=void 0,this.sameSuitSubStrategy=void 0,this.sameRankSubStrategy=void 0,this.sameSuitRankSubStrategy=void 0,this.currentSubStrategy=null,this.scene=e,this.sameSuitSubStrategy=new yP(e),this.sameRankSubStrategy=new CP(e),this.sameSuitRankSubStrategy=new TP(e)}var t=e.prototype;return t.getCurrentSubStrategy=function(){var e=this.scene.journey.getCurrentMission();if(!e)return null;var t=e.cardStats;if(1===t.length){var n=t[0],i=n.cardSuit,a=n.cardRank,s=n.count;if("any"!==i&&"any"!==a&&1===s)return this.sameSuitRankSubStrategy;if("any"===i&&"any"!==a)return this.sameRankSubStrategy}return this.sameSuitSubStrategy},t.initData=function(){var e;this.currentSubStrategy=this.getCurrentSubStrategy(),null==(e=this.currentSubStrategy)||e.initData()},t.getMissionDescription=function(){var e;return(null==(e=this.currentSubStrategy)?void 0:e.getMissionDescription())||null},t.isDescriptionCompleted=function(){var e;return(null==(e=this.currentSubStrategy)?void 0:e.isDescriptionCompleted())||!1},t.getMissionLimit=function(){var e;return(null==(e=this.currentSubStrategy)?void 0:e.getMissionLimit())||null},e}();function bP(e,t){var n="undefined"!==typeof I()&&_()(e)||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){var n;if(!e)return;if("string"===typeof e)return IP(e,t);var i=T()(n=Object.prototype.toString.call(e)).call(n,8,-1);"Object"===i&&e.constructor&&(i=e.constructor.name);if("Map"===i||"Set"===i)return S()(e);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return IP(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var i=0;return function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function IP(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var wP=function(){function e(e){this.scene=void 0,this.wasStockCardMovedToTableau=!1,this.wantedCardStat=null,this.scene=e,this.wantedCardStat=null}var t=e.prototype;return t.initData=function(){this.wasStockCardMovedToTableau=!1,this.wantedCardStat=this.getCardStat()},t.getCardStat=function(){var e=this.scene.journey.getCurrentMission();if(!e)return null;var t=e.cardStats;return 0===t.length?null:t[0]},t.getMissionDescription=function(){if(!this.wantedCardStat)return null;var e=this.wantedCardStat,t=e.cardSuit;return{key:"revealRankOfSuitToTableau",interpolations:{rank:gP(e.cardRank),suit:fP(t)}}},t.isDescriptionCompleted=function(){var e=this;if(!this.wantedCardStat)return!1;var t=this.wantedCardStat,n=t.cardSuit,i=t.cardRank;return this.scene.events.off(Pu.MOVE_CARD_FROM_FOUNDATION_TO_TABLEAU),this.scene.events.on(Pu.MOVE_CARD_FROM_FOUNDATION_TO_TABLEAU,(function(t){for(var a,s=bP(t);!(a=s()).done;){var r=a.value,o=r.isTheSameCardSuit(n),c=r.isTheSameCardRank(i);o&&c&&(e.wasStockCardMovedToTableau=!0)}})),this.wasStockCardMovedToTableau},t.getMissionLimit=function(){return null},e}(),_P=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n.gameCompletionStrategy=void 0,n.almostFinishedGameStrategy=void 0,n.revealCardStrategy=void 0,n.cardsToFoundationStrategy=void 0,n.sameSuitCardsToFoundationStrategy=void 0,n.cardStockToTableauStrategy=void 0,n.strategies=[],n.scene=t,n.createStrategies(),n}(0,r.Z)(t,e);var n=t.prototype;return n.createStrategies=function(){this.gameCompletionStrategy=new dP(this.scene),this.almostFinishedGameStrategy=new pP(this.scene),this.revealCardStrategy=new mP(this.scene),this.cardsToFoundationStrategy=new vP(this.scene),this.sameSuitCardsToFoundationStrategy=new SP(this.scene),this.cardStockToTableauStrategy=new wP(this.scene),this.strategies=[this.gameCompletionStrategy,this.almostFinishedGameStrategy,this.revealCardStrategy,this.cardsToFoundationStrategy,this.sameSuitCardsToFoundationStrategy,this.cardStockToTableauStrategy]},n.getCurrentStrategy=function(){var e=this.scene.journey.getCurrentMission();if(!e)return null;switch(e.type){case Ru.COMPLETE_GAME:return this.gameCompletionStrategy;case Ru.COMPLETE_ALMOST_FINISHED_GAME:return this.almostFinishedGameStrategy;case Ru.OPEN_ONE_CARD:return this.revealCardStrategy;case Ru.MOVE_CARDS_TO_FOUNDATION:return this.cardsToFoundationStrategy;case Ru.MOVE_SAME_SUIT_CARDS_TO_FOUNDATION:return this.sameSuitCardsToFoundationStrategy;case Ru.MOVE_ONE_CARD_FROM_STOCK_TO_TABLEAU:return this.cardStockToTableauStrategy;default:return null}},n.getMissionDescription=function(){var e=this.getCurrentStrategy();return e?(e.initData(),e.getMissionDescription()):null},n.getMissionLimit=function(e){void 0===e&&(e=!1);var t=this.scene.journey.getCurrentMission();if(!t)return null;var n=t.cardStats,i=t.limitMechanic;if(this.getStatCount(n)>1){var a=this.getCurrentStrategy();return a?a.getMissionLimit():null}if(!i)return null;var s=i.type,r=this.scene.gameplay.boardGame,o=r.getTime(),c=r.getMoves(),h=r.getStockRecycleCount();switch(s){case Lu.TIME:var u=this.getFormattedCounter(i,o);return e?{key:"withinLimit",interpolations:{formattedCounter:u}}:{key:"journeyLimitTime",interpolations:{time:u}};case Lu.MOVES:var l=this.getFormattedCounter(i,c);return e?{key:"withinLimit",interpolations:{formattedCounter:l}}:{key:"journeyLimitMoves",interpolations:{moves:l}};case Lu.STOCK_RECYCLES:var d=this.getFormattedCounter(i,h);return e?{key:"withinLimit",interpolations:{formattedCounter:d}}:{key:"journeyLimitRecycle",interpolations:{recycles:d}};default:return null}},n.isMissionCompleted=function(){return this.isDescriptionCompleted()&&this.isWithinLimit()},n.isDescriptionCompleted=function(){if(!this.scene.journey.getCurrentMission())return!1;var e=this.getCurrentStrategy();return!e||e.isDescriptionCompleted()},n.isWithinLimit=function(){var e=this.scene.journey.getCurrentMission();if(!e)return!0;var t=e.limitMechanic,n=t.type,i=t.value,a=this.scene.gameplay.boardGame,s=a.getTime(),r=a.getMoves(),o=a.getStockRecycleCount();switch(n){case Lu.TIME:return s<=i;case Lu.MOVES:return r<=i;case Lu.STOCK_RECYCLES:return o<=i;case Lu.NONE:default:return!0}},n.getFormattedCounter=function(e,t){var n=e.type,i=e.value;if(n===Lu.TIME){var a=i-t;return(0,ls.F0)(a>0?a:0,!1)}return t+(this.scene.world.isLandscape()?"/":":")+i},n.getStatCount=function(e){return Gh()(e).call(e,(function(e,t){return e+t.count}),0)},t}(Nm),xP=An.Z.GAMEPLAY_DEFAULT,PP=xP.KEY,kP=xP.FRAME,OP=function(e){function t(t){var n;return(n=e.call(this,t)||this).background=void 0,n.wellDoneLetterBitmapTexts=[],n.outOfMovesLetterBitmapTexts=[],n.wellDoneBitmapText=void 0,n.outOfMovesBitmapText=void 0,n.cards=[],n.cardInitialProps=[],n.isPlayingAnimation=!1,n.isWellDone=!0,n.setSize(300,300),n.createRawTexts(),n.createBackground(),n.createWellDoneLetterBitmapTexts(),n.createOutOfMovesLetterBitmapTexts(),n.createCards(),n.alignComponents(),n.createDevButtons(),n}(0,r.Z)(t,e);var n=t.prototype;return n.enableWellDone=function(e){void 0===e&&(e=!0),this.isWellDone=e},n.createBackground=function(){this.background=new Mf.Z(this.scene,0,0,this.width,this.height,20,16579837,0),this.add(this.background)},n.createRawTexts=function(){this.wellDoneBitmapText=this.scene.make.bitmapText({font:gc.Z.BOLD.KEY,size:this.scene.fontSize(30),text:"wellDone",origin:{x:.5,y:.5}}),this.wellDoneBitmapText.setMaxSize(360,500,!0),this.wellDoneBitmapText.setPosition(187.5,333.5),this.wellDoneBitmapText.setDepth(1e12),this.wellDoneBitmapText.kill(),this.outOfMovesBitmapText=this.scene.make.bitmapText({font:gc.Z.BOLD.KEY,size:this.scene.fontSize(30),text:"outOfMoves",origin:{x:.5,y:.5}}),this.outOfMovesBitmapText.setMaxSize(360,500,!0),this.outOfMovesBitmapText.setPosition(187.5,333.5),this.outOfMovesBitmapText.setDepth(1e12),this.outOfMovesBitmapText.kill(),this.scene.add.existing(this.outOfMovesBitmapText),this.scene.add.existing(this.wellDoneBitmapText)},n.createWellDoneLetterBitmapTexts=function(){var e=this;this.createBitmapTextsFromString(this.scene.i18n.t("wellDone"),this.wellDoneLetterBitmapTexts),this.wellDoneLetterBitmapTexts.forEach((function(t){t.setFontSize(e.wellDoneBitmapText.fontSize)}))},n.createOutOfMovesLetterBitmapTexts=function(){var e=this;this.createBitmapTextsFromString(this.scene.i18n.t("outOfMoves"),this.outOfMovesLetterBitmapTexts),this.outOfMovesLetterBitmapTexts.forEach((function(t){t.setFontSize(e.getFontSizeWithLanguage(e.scene.lang.language))}))},n.createBitmapTextsFromString=function(e,t){for(var n=e.split(""),i=0;i<Math.max(n.length,t.length);i++){if(i>=t.length){var a=this.scene.make.bitmapText({font:gc.Z.BOLD.KEY,size:this.scene.fontSize(30),origin:{x:.5,y:.5},text:""});a.setIgnoreLanguage(),a.setAlpha(0),t.push(a),this.add(a)}i>=n.length?(t[i].kill(),t[i].setText("")):(t[i].revive(),t[i].setText(n[i]))}},n.createCards=function(){var e=this.scene.theme.getCurrentThemeConfig().cardFaceKey,t=this.scene.add.image(0,0,e,"101"),n=this.scene.add.image(0,0,e,"201"),i=this.scene.add.image(0,0,e,"301"),a=this.scene.add.image(0,0,e,"401");this.cards.push(t,n,i,a),this.cards.forEach((function(e){return e.setWorldSize(49,72)})),this.add(this.cards)},n.alignComponents=function(){[this.wellDoneLetterBitmapTexts,this.outOfMovesLetterBitmapTexts].forEach((function(e){var t=[];(e=Le()(e).call(e,(function(e){return e.active&&e.visible}))).forEach((function(n,i){if(0!=e[i].text.length)if(0==i){var a=e[i].getTextBounds().characters[0];a&&t.push(a.w/2)}else{var s=e[i-1].getTextBounds().characters[0],r=e[i].getTextBounds().characters[0];if(s&&r){var o=" "==e[i-1].text?10:s.w,c=" "==e[i].text?10:r.w;t.push(t[i-1]+o/2+1+c/2)}}}));var n=-t[t.length-1]/2-5;e.forEach((function(i,a){var s=-(e.length-1)/2*25+25*a;i.setX(s),i.setX(n+t[a])}))}))},n.createDevButtons=function(){GameCore.Utils.Valid.isDebugger()&&this.createCloseButton()},n.createCloseButton=function(){var e=this,t=new Nh.Z(this.scene,40,40),n=this.scene.add.image(0,0,PP,kP.IC_BG_OFF);n.setWorldSize(40,40);var i=this.scene.make.bitmapText({font:gc.Z.PRIMARY.KEY,size:this.scene.fontSize(10),text:"X",origin:{x:.5,y:.5}});i.setCenterAlign(),t.add([n,i]),Phaser.Display.Align.To.TopRight(t,this),t.onClick=function(){e.isPlayingAnimation||e.scene.screen.close(cs.o4.WELL_DONE_SCREEN)},this.add(t)},n.hideContent=function(){[this.wellDoneLetterBitmapTexts,this.outOfMovesLetterBitmapTexts].forEach((function(e){e.forEach((function(e){e.setAlpha(0),e.setAngle(10)}))})),this.cards.forEach((function(e){e.setAlpha(0),e.setPosition(0,333.5)}))},n.runEntranceAnimationText=function(){var e=(0,s.Z)(u().mark((function e(){var t,n,i=this;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return 100,this.createWellDoneLetterBitmapTexts(),this.createOutOfMovesLetterBitmapTexts(),this.alignComponents(),t=this.isWellDone?this.wellDoneLetterBitmapTexts:this.outOfMovesLetterBitmapTexts,n=Be()(t).call(t,(function(e,t){return new(c())((function(n){i.scene.add.tween({targets:e,duration:100,delay:100*t/2,ease:Phaser.Math.Easing.Cubic.Out,props:{alpha:1,angle:0,scale:{from:.6,to:1,ease:Phaser.Math.Easing.Elastic.Out,easeParams:[.1,.45],duration:1e3}},onComplete:n})}))})),e.next=8,c().all(n);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.runEntranceAnimationCards=function(){var e=(0,s.Z)(u().mark((function e(){var t,n,i,a,s,r=this;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=800,a=Be()(t=this.cards).call(t,(function(e,t){var n=r.cardInitialProps[t],a=t*i/4,s=new(c())((function(t){r.scene.add.tween({targets:e,duration:i,delay:a,ease:Phaser.Math.Easing.Back.Out,easeParams:[2.7],props:{alpha:1,y:n.y,scale:{from:.6*n.scale,to:1.1*n.scale,ease:Phaser.Math.Easing.Elastic.Out,easeParams:[.1,.45],duration:i}},onComplete:t})})),o=new(c())((function(t){r.scene.add.tween({targets:e,duration:i,delay:a,ease:Phaser.Math.Easing.Quadratic.Out,props:{x:n.x},onComplete:t})})),h=new(c())((function(t){r.scene.add.tween({targets:e,duration:i,delay:a,ease:Phaser.Math.Easing.Quadratic.Out,props:{x:n.x},onComplete:t})}));return c().all([s,o,h])})),e.next=4,c().all(a);case 4:return s=Be()(n=this.cards).call(n,(function(e,t){var n=r.cardInitialProps[t];return new(c())((function(t){r.scene.add.tween({targets:e,ease:Phaser.Math.Easing.Elastic.Out,easeParams:[.1,.45],duration:i,props:{scale:n.scale},onComplete:t})}))})),e.next=7,c().all(s);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.runEntranceAnimation=function(){var e=(0,s.Z)(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isPlayingAnimation){e.next=2;break}return e.abrupt("return");case 2:return this.isPlayingAnimation=!0,e.next=5,this.runEntranceAnimationText();case 5:this.isPlayingAnimation=!1;case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.getFontSizeWithLanguage=function(e){switch(e){case"es":return 22;case"pt":return 24;case"fr":return 20;default:return 30}},t}(Phaser.GameObjects.Container),LP=function(e){function t(t,n,i,a){var s;return(s=e.call(this,t,n,i,a)||this).slideInAnimation=void 0,s.fadeInAnimation=void 0,s.fadeOutAnimation=void 0,s.container=void 0,s.setDepth(cs.Ks.POPUP),s.container=new OP(t),s.add(s.container),s.background.setTint(1315862),s.background.setAlpha(.5),s}(0,r.Z)(t,e);var n=t.prototype;return n.open=function(t){e.prototype.open.call(this,t),this.container.setAlpha(1),this.background.setAlpha(.5),this.container.setInteractive();var n=(null!=t?t:{}).wellDone;this.container.enableWellDone("boolean"!==typeof n||n),this.runOpenAnimation()},n.close=function(){this.runCloseAnimation()},n.runOpenAnimation=function(){var e=(0,s.Z)(u().mark((function e(){var t,n,i,a=this;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==(t=this.slideInAnimation)||null==(n=t.tween)||!n.isPlaying()){e.next=2;break}return e.abrupt("return");case 2:this.scene.audio.playSound(hs.Z.POPUP_SHOW),i=this.scene.ads.getBannerHeight(),this.container.hideContent(),this.slideInAnimation||(this.slideInAnimation=new pc.Z({targets:[this.container],props:{y:{from:i,to:-i/2,ease:Phaser.Math.Easing.Back.Out}},duration:300,onComplete:function(){var e=(0,s.Z)(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.container.runEntranceAnimation();case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()})),this.fadeInAnimation||(this.fadeInAnimation=new yh.Z({targets:[this],duration:300})),this.slideInAnimation.play(),this.fadeInAnimation.play();case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.runCloseAnimation=function(){var t,n,i=this;null!=(t=this.fadeOutAnimation)&&null!=(n=t.tween)&&n.isPlaying()||(this.scene.audio.playSound(hs.Z.POPUP_OFF),this.fadeOutAnimation||(this.fadeOutAnimation=new ef.Z({targets:[this],ease:Phaser.Math.Easing.Linear,props:{alpha:0},duration:300,onComplete:function(){e.prototype.close.call(i)}})),this.fadeOutAnimation.play())},t}(GameCore.Screen),RP=An.Z.GAMEPLAY_DEFAULT.KEY,BP=function(e){function t(t,n){var i;return(i=e.call(this,t,60,50)||this).options=void 0,i.button=void 0,i.getBackgroundByStatus=function(){var e=i.options,t=e.enable,n=e.backgroundOn,a=e.backgroundOff;return t?n:a},i.createButton=function(e){var t=i.getBackgroundByStatus();i.button=i.scene.add.image(0,0,e,t),i.add(i.button)},i.button=t.add.image(0,0,RP,"ic_switch_off"),i.button.setWorldSize(69.5,30),i.add(i.button),i.options={enable:n,backgroundOn:"ic_switch_on",backgroundOff:"ic_switch_off"},i.updateStatus(n),i}(0,r.Z)(t,e);var n=t.prototype;return n.processCallback=function(e){var t=this.options.enable;this.updateStatus(!t),e(!t)},n.updateStatus=function(e){this.options.enable=e;var t=this.getBackgroundByStatus();this.button.setFrame(t)},n.logButtonEvent=function(){var e=this.getParentName(),t=this.name,n=!this.options.enable;this.scene.analytics.event(yn._.BUTTON_CLICK,{button_name:t,screen_name:e,enable:n})},t}(Nh.Z),DP=BP,NP=function(e){if("string"!==typeof e||!e)throw new wo(null,{imageShare:e})},MP=function(){return(0,s.Z)(u().mark((function e(){var t,n,i,a,s,r,o,c,h,l;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=window.game,n=t.player,i=t.analytics,a=t.facebook,s=t.globalScene,e.prev=1,s.screen.open(cs.o4.NOTIFY_SCREEN,{message:"loading",loading:!0}),e.next=5,Do();case 5:return r=e.sent,NP(r),o=n.getPlayer(),c=o.playerId,h=o.name,l=o.photo,e.next=10,a.inviteAsync({template:Ia,text:{default:"Great! I have a best score!",localizations:{en_US:"Great! I have a best score!",vi_VN:"Th\u1eadt tuy\u1ec7t! M\xecnh v\u1eeba ph\xe1 k\u1ef7 l\u1ee5c n\xe0y!"}},image:r||"",data:{playerId:c,playerName:h,playerPhoto:l,type:Ia}});case 10:i.event(yn._.INVITE,{invite_content_type:"BestScore",success:!0}),e.next=17;break;case 13:e.prev=13,e.t0=e.catch(1),i.event(yn._.INVITE,{invite_content_type:"BestScore",success:!1}),(0,he.tO)(e.t0);case 17:return e.prev=17,s.screen.close(cs.o4.NOTIFY_SCREEN),e.finish(17);case 20:case"end":return e.stop()}}),e,null,[[1,13,17,20]])})))},GP=n(665),ZP=An.Z.GAMEPLAY_DEFAULT,FP=ZP.KEY,UP=ZP.FRAME,zP=function(e){function t(t){var n;return(n=e.call(this,t,145,48)||this).setName("DoneButton"),n.createBackground(),n.createContents(),n}(0,r.Z)(t,e);var n=t.prototype;return n.createBackground=function(){var e=this.scene.make.image({key:FP,frame:UP.BUTTON_DONE});e.setWorldSize(this.width,this.height),this.add(e)},n.createContents=function(){var e=new bl(this.scene,{iconTextPadding:8,text:"done",fontSize:22,iconKey:An.Z.GAMEPLAY_DEFAULT.KEY,iconFrame:An.Z.GAMEPLAY_DEFAULT.FRAME.IC_DONE,iconWidth:20,iconHeight:16.5});this.add(e),e.text.setMaxSize(100,35)},t}(Nh.Z),WP=zP,YP=function(){var e=GameCore.Utils.Device,t=window.navigator.vibrate;return e.isAndroid()&&"function"===typeof t||e.isMobileWeb()&&"function"===typeof t},HP=function(){var e=(0,s.Z)(u().mark((function e(t){var n,i,a,r,o;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=Math.ceil(t/80),i=0,a=function(){var e=(0,s.Z)(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,FBInstant.performHapticFeedbackAsync();case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0);case 8:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(){return e.apply(this,arguments)}}();case 3:if(!(i<n)){e.next=11;break}return r=a(),o=(0,ls.qZ)(80),i+=1,e.next=9,c().all([r,o]);case 9:e.next=3;break;case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),KP=function(e){window.navigator.vibrate(0),window.navigator.vibrate(e)},jP=function(e){try{if(!YP())return!1;var t=GameCore.Utils.Device;t.isAndroid()||t.isMobileWeb()?KP(e):t.isIOS()&&HP(e).catch((function(e){}))}catch(n){}},VP=An.Z.GAMEPLAY_DEFAULT,JP=VP.KEY,XP=VP.FRAME,qP=34,QP=function(e){function t(t){var n;return(n=e.call(this,t)||this).bg=void 0,n.scroller=void 0,n.toggleButtonMap=new(te()),n.closeButton=void 0,n.createBackground(),n.createScroller(),n.createHeader(),n.createCloseButton(),n.createMainButtons(),n.createDoneButton(),n.createBottomLogo(),n.listenAudioEnabledChange(),t.add.existing((0,$a.Z)(n)),n}(0,r.Z)(t,e);var n=t.prototype;return n.listenAudioEnabledChange=function(){var e=this;GameSDK.onAudioEnabledChange((function(t){var n,i,a,s;null==(n=e.toggleButtonMap.get(Za.sound))||n.updateStatus(t),null==(i=e.toggleButtonMap.get(Za.music))||i.updateStatus(t),null==(a=e.toggleButtonMap.get(Za.sound))||a.setDisabled(!t),null==(s=e.toggleButtonMap.get(Za.music))||s.setDisabled(!t)}))},n.createBackground=function(){var e=this.scene.world.getWorldSize(),t=e.width,n=e.height,i=this.scene.add.image(0,0,JP,XP.BLANK);i.setWorldSize(t,n),i.setTint(1665080),this.add(i),this.bg=i,this.setSize(i.width,i.height)},n.createHeader=function(){var e=new td(this.scene,{width:this.bg.width,height:64,key:JP,frame:XP.BG_SETTINGS_TOP,symmetricType:ed.HORIZONTAL});e.setInteractive();var t=this.scene.make.bitmapText({font:gc.Z.BOLD_SHADOW_BLUR.KEY,size:this.scene.fontSize(26),text:"SETTINGS",origin:{x:.5,y:.5}});t.setMaxSize(200,40),t.setTint(16449487,16449487,15913325,15913325),this.add([e,t]),Phaser.Display.Align.In.TopCenter(e,this),Phaser.Display.Align.In.Center(t,e)},n.createCloseButton=function(){var e=this;this.closeButton=new kg(this.scene),this.add(this.closeButton),Phaser.Display.Align.In.TopLeft(this.closeButton,this,-16,-16),this.closeButton.onClick=function(){e.scene.screen.close(cs.o4.SETTINGS_SCREEN)}},n.createScroller=function(){var e=this.scene.ads.getBannerHeight();this.scroller=new GP.Z(this.scene,{width:this.bg.width,height:this.bg.height-64-95-e}),Phaser.Display.Align.In.TopCenter(this.scroller,this,0,-64),this.add(this.scroller)},n.createMainButtons=function(){var e,t=this.scene.player.getPlayerSettings(),n=t.sound,i=void 0===n||n,a=t.tapToMove,s=void 0===a||a,r=t.autoHints,o=void 0===r||r,c=t.autoComplete,h=void 0===c||c,u=t.drawMode3,l=void 0!==u&&u,d=t.leftHanded,p=void 0!==d&&d,f=t.vibrate,g=void 0!==f&&f,m=this.createToggleButton(Za.sound,"soundEffects",i,"ic_sound",31.5,27),v=this.createToggleButton(Za.vibrate,"vibration",g,"ic_vibrate",92/2.88,82/2.88),y=this.createToggleButton(Za.tapToMove,"tapToMove",s,"ic_move",21.5,33),A=this.createToggleButton(Za.autoComplete,"autoComplete",h,"ic_auto_complete",27.5,28.5),E=this.createToggleButton(Za.autoHints,"autoHints",o,"ic_hint_settings",32,31.5),T=this.createSeparateNode("personalization"),C=this.createLanguageButton(),S=this.createToggleButton("leftHanded","leftHandedMode",p,"ic_lefthand_settings",22.22,30.5),b=this.createHowToPlayButton();GameCore.Configs.Gameplay.ForceJourneyMode?e=[m,v,y,A,E,T,C,S,b]:e=[m,v,y,A,E,this.createSeparateNode("playMode"),this.createToggleButton(Za.drawMode3,"drawMode3",l,"ic_draw_mode",34.5,28.5),T,C,S,this.createThemeButton(),b];for(var I=[],w=e[0].height/2-this.scroller.height/2,_=0;_<e.length;_++)if(e[_].name!=Za.vibrate||YP()){if(e[_].setPosition(0,w),_<e.length-1&&"separateNode"!=e[_+1].name){var x=5==_||9==_?26:25,P=this.scene.add.image(0,w+x,JP,XP.BLANK);P.setWorldSize(this.bg.width,2),P.setTint(1333293),P.setAlpha(0,0,1,1),I.push(P)}e[_+1]&&(w+=e[_].height)}this.scroller.addItems(e),this.scroller.addItems(I),this.scroller.setEnable(!0)},n.createToggleButton=function(e,t,n,i,a,s){var r=this;void 0===i&&(i="ic_sound"),void 0===a&&(a=24),void 0===s&&(s=24);var o=this.scene.add.container(0,0);o.setSize(375,54);var c=new DP(this.scene,n);this.toggleButtonMap.set(e,c),c.setName(e),c.onClick=function(t){r.scene.player.setSetting(e,t),r.scene.events.emit("settings-changed",e,t),e==Za.sound&&r.handleSoundChanged(t),e==Za.drawMode3&&r.scene.screen.open(cs.o4.NOTIFICATION_SCREEN,{message:"newSettings"}),e==Za.vibrate&&r.scene.vibration.performVibrating(50);var n=r.scene.player.getPlayerSettings().modifiedOptions,i=GameCore.Utils.Json.clone(n);be()(i).call(i,e)||i.push(e),r.scene.player.setSetting(Za.modifiedOptions,i)},"leftHanded"==e&&this.scene.events.on(vo.BOARD_STATE_CHANGED,(function(e){e==pu.DEALING?c.setDisabled(!0):c.setDisabled(!1)}));var h=this.scene.make.bitmapText({font:gc.Z.PRIMARY.KEY,size:this.scene.fontSize(18),text:t,origin:{x:0,y:.5}});h.setMaxSize(220,40);var u=this.scene.add.image(0,0,JP,i);return u.setWorldSize(a,s),h.setTint(16777215),o.add([c,h,u]),Phaser.Display.Align.In.Center(u,o,-o.width/2+qP,0),Phaser.Display.Align.In.LeftCenter(h,o,-62),Phaser.Display.Align.In.RightCenter(c,o,-20,0),"sound"==e&&(u.x+=2),o},n.updateToggleButtons=function(){var e,t,n,i,a,s,r,o,c=this.scene.player.getPlayerSettings(),h=c.sound,u=void 0===h||h,l=c.tapToMove,d=void 0===l||l,p=c.autoHints,f=void 0===p||p,g=c.autoComplete,m=void 0===g||g,v=c.drawMode3,y=void 0!==v&&v,A=c.leftHanded,E=void 0!==A&&A;null==(e=this.toggleButtonMap.get("sound"))||e.updateStatus(u),null==(t=this.toggleButtonMap.get("tapToMove"))||t.updateStatus(d),null==(n=this.toggleButtonMap.get("drawMode3"))||n.updateStatus(y),null==(i=this.toggleButtonMap.get("autoHints"))||i.updateStatus(f),null==(a=this.toggleButtonMap.get("quickPlay"))||a.updateStatus(!1),null==(s=this.toggleButtonMap.get("leftHanded"))||s.updateStatus(E),null==(r=this.toggleButtonMap.get("autoComplete"))||r.updateStatus(m),null==(o=this.toggleButtonMap.get("leftHanded"))||o.updateStatus(E)},n.createThemeButton=function(){var e=this,t=new Nh.Z(this.scene,375,54);t.setName("Theme");var n=function(){var t=(0,s.Z)(u().mark((function t(){return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.scene.screen.get(cs.o4.THEME_SCREEN)){t.next=5;break}return t.next=3,(0,ls.qZ)(100);case 3:t.next=0;break;case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();t.onClick=function(){e.scene.screen.get(cs.o4.THEME_SCREEN)?e.scene.screen.open(cs.o4.THEME_SCREEN):(e.scene.game.globalScene.screen.open(cs.o4.NOTIFY_SCREEN,{message:"loading",duration:0,loading:!0}),n().then((function(){e.scene.game.globalScene.screen.close(cs.o4.NOTIFY_SCREEN),e.scene.screen.open(cs.o4.THEME_SCREEN)})))};var i=this.scene.make.bitmapText({font:gc.Z.PRIMARY.KEY,size:this.scene.fontSize(18),text:"theme",origin:{x:0,y:.5}});i.setMaxSize(220,40),i.setTint(16777215);var a=this.scene.add.image(0,0,JP,"ic_theme");a.setWorldSize(27.5,27);var r=this.scene.add.image(0,0,JP,XP.IC_NEXT);return r.setWorldSize(14.5,24),Phaser.Display.Align.In.Center(a,t,-t.width/2+qP,0),Phaser.Display.Align.In.LeftCenter(i,t,-62),Phaser.Display.Align.In.RightCenter(r,t,-15),t.add([i,a,r]),t},n.createLanguageButton=function(){var e=this,t=new Nh.Z(this.scene,375,54);t.setName("Language"),t.onClick=function(){e.scene.screen.open(cs.o4.LANGUAGES_SCREEN)};var n=this.scene.make.bitmapText({font:gc.Z.PRIMARY.KEY,size:this.scene.fontSize(18),text:"language",origin:{x:0,y:.5}});n.setMaxSize(220,40),n.setTint(16777215);var i=this.scene.add.image(0,0,JP,"ic_language");i.setWorldSize(92/2.88,76/2.88);var a=this.scene.add.image(0,0,JP,XP.IC_NEXT);return a.setWorldSize(14.5,24),Phaser.Display.Align.In.Center(i,t,-t.width/2+qP,0),Phaser.Display.Align.In.LeftCenter(n,t,-62),Phaser.Display.Align.In.RightCenter(a,t,-15),t.add([n,i,a]),t},n.createHowToPlayButton=function(){var e=this,t=new Nh.Z(this.scene,375,54);t.setName("HowToPlay"),t.onClick=function(){e.scene.screen.close(cs.o4.SETTINGS_SCREEN),e.scene.screen.open(cs.o4.HOW_TO_PLAY_SCREEN)};var n=this.scene.make.bitmapText({font:gc.Z.PRIMARY.KEY,size:this.scene.fontSize(18),text:"howToPlay",origin:{x:0,y:.5}});n.setMaxSize(220,40),n.setTint(16777215);var i=this.scene.add.image(0,0,JP,XP.IC_BOOK);i.setWorldSize(27.5,28);var a=this.scene.add.image(0,0,JP,XP.IC_NEXT);return a.setWorldSize(14.5,24),Phaser.Display.Align.In.Center(i,t,-t.width/2+qP,0),Phaser.Display.Align.In.LeftCenter(n,t,-62),Phaser.Display.Align.In.RightCenter(a,t,-15),t.add([n,i,a]),t},n.createInviteButton=function(){var e=this,t=new Nh.Z(this.scene,375,54);t.setName("Invite"),t.onClick=function(){e.scene.storage.dispatch(MP())};var n=this.scene.make.bitmapText({font:gc.Z.PRIMARY.KEY,size:this.scene.fontSize(18),text:"inviteFriends",origin:{x:0,y:.5}});n.setMaxSize(220,40),n.setTint(16777215);var i=this.scene.add.image(0,0,JP,XP.IC_INVITE);i.setWorldSize(34,28);var a=this.scene.add.image(0,0,JP,XP.IC_NEXT);return a.setWorldSize(14.5,24),t.add([n,i,a]),Phaser.Display.Align.In.Center(i,t,-t.width/2+qP+4,0),Phaser.Display.Align.In.LeftCenter(n,t,-62),Phaser.Display.Align.In.RightCenter(a,t,-15),t},n.createStatisticsButton=function(){var e=this,t=new Nh.Z(this.scene,375,54);t.setName("Statistics"),t.onClick=function(){e.scene.screen.open(cs.o4.GAME_STATS_SCREEN)};var n=this.scene.make.bitmapText({font:gc.Z.PRIMARY.KEY,size:this.scene.fontSize(18),text:"statistics",origin:{x:0,y:.5}});n.setMaxSize(220,40),n.setTint(16777215);var i=this.scene.add.image(0,0,JP,XP.IC_STATISTICS);i.setWorldSize(27.5,27);var a=this.scene.add.image(0,0,JP,XP.IC_NEXT);return a.setWorldSize(14.5,24),Phaser.Display.Align.In.Center(i,t,-t.width/2+qP,0),Phaser.Display.Align.In.LeftCenter(n,t,-62),Phaser.Display.Align.In.RightCenter(a,t,-15),t.add([n,i,a]),t},n.createSeparateNode=function(e){var t=this.scene.add.container(0,0);t.setSize(375,55.5);var n=new td(this.scene,{width:this.bg.width,height:55.5,key:JP,frame:XP.BG_SETTING_SEPERATE_NOTE,symmetricType:ed.HORIZONTAL}),i=this.scene.make.bitmapText({font:gc.Z.BOLD.KEY,size:this.scene.fontSize(22),text:e,origin:{x:0,y:.5}});return i.setMaxSize(250,40),i.setTint(12704660),t.setName("separateNode"),t.add([n,i]),Phaser.Display.Align.In.LeftCenter(i,t,-31),t},n.handleSoundChanged=function(e){this.scene.sound.volume=e?1:0},n.createDoneButton=function(){var e=this,t=new td(this.scene,{width:this.bg.width,height:95,key:JP,frame:XP.BG_SETTINGS_BOTTOM,symmetricType:ed.HORIZONTAL});t.setInteractive();var n=new WP(this.scene);n.onClick=function(){e.scene.screen.close(cs.o4.SETTINGS_SCREEN)},this.add([t,n]);var i=this.scene.ads.getBannerHeight();Phaser.Display.Align.In.BottomCenter(t,this,0,-i),Phaser.Display.Align.In.TopCenter(n,t,0,-21)},n.createBottomLogo=function(){var e=new Tg(this.scene);this.add(e),Phaser.Display.Align.In.BottomCenter(e,this)},n.resetScroller=function(){this.scroller.gotoTop()},t}(Phaser.GameObjects.Container),$P=QP,ek=function(e){function t(t,n,i,a){var s;return(s=e.call(this,t,n,i,a)||this).slideInAnimation=void 0,s.slideOutAnimation=void 0,s.fadeInAnimation=void 0,s.fadeOutAnimation=void 0,s.settingsContainer=void 0,s.setDepth(cs.Ks.POPUP),s.settingsContainer=new $P(t),s.add(s.settingsContainer),s.background.setTint(1315862),s.background.setAlpha(.5),s}(0,r.Z)(t,e);var n=t.prototype;return n.open=function(){e.prototype.open.call(this),this.runOpenAnimation(),this.updateSettings()},n.close=function(){this.runCloseAnimation()},n.updateSettings=function(){this.settingsContainer.updateToggleButtons()},n.runOpenAnimation=function(){this.scene.audio.playSound(hs.Z.POPUP_SHOW),this.slideInAnimation||(this.slideInAnimation=new pc.Z({targets:[this.settingsContainer],props:{y:{from:this.height/2,to:this.height/2-this.settingsContainer.height/2,ease:Phaser.Math.Easing.Sine.Out}},duration:300})),this.fadeInAnimation||(this.fadeInAnimation=new yh.Z({targets:[this],duration:300})),this.slideInAnimation.play(),this.fadeInAnimation.play()},n.runCloseAnimation=function(){var t=this;this.scene.audio.playSound(hs.Z.POPUP_OFF),this.slideOutAnimation||(this.slideOutAnimation=new pc.Z({targets:[this.settingsContainer],props:{y:{from:this.height/2-this.settingsContainer.height/2,to:this.height/2,ease:Phaser.Math.Easing.Sine.Out}},duration:300})),this.fadeOutAnimation||(this.fadeOutAnimation=new ef.Z({targets:[this],props:{alpha:0},duration:300,onComplete:function(){t.settingsContainer.resetScroller(),t.setAlpha(1),e.prototype.close.call(t)}})),this.slideOutAnimation.play(),this.fadeOutAnimation.play()},t}(GameCore.Screen),tk=ek,nk=An.Z.GAMEPLAY_DEFAULT_LANDSCAPE.KEY,ik=function(e){function t(t,n){var i;return(i=e.call(this,t,35.5,15.5)||this).options=void 0,i.button=void 0,i.getBackgroundByStatus=function(){var e=i.options,t=e.enable,n=e.backgroundOn,a=e.backgroundOff;return t?n:a},i.createButton=function(e){var t=i.getBackgroundByStatus();i.button=i.scene.add.image(0,0,e,t),i.add(i.button)},i.button=t.add.image(0,0,nk,"ic_switch_off"),i.button.setWorldSize(35.5,15.5),i.add(i.button),i.options={enable:n,backgroundOn:"ic_switch_on",backgroundOff:"ic_switch_off"},i.updateStatus(n),i}(0,r.Z)(t,e);var n=t.prototype;return n.processCallback=function(e){var t=this.options.enable;this.updateStatus(!t),e(!t)},n.updateStatus=function(e){this.options.enable=e;var t=this.getBackgroundByStatus();this.button.setFrame(t)},n.logButtonEvent=function(){var e=this.getParentName(),t=this.name,n=!this.options.enable;this.scene.analytics.event(yn._.BUTTON_CLICK,{button_name:t,screen_name:e,enable:n})},t}(Nh.Z),ak=ik,sk=An.Z.GAMEPLAY_DEFAULT_LANDSCAPE,rk=sk.KEY,ok=sk.FRAME,ck=function(e){function t(t){var n;return(n=e.call(this,t,81.5,33.5)||this).setName("DoneButton"),n.createBackground(),n.createContents(),n}(0,r.Z)(t,e);var n=t.prototype;return n.createBackground=function(){var e=this.scene.make.image({key:rk,frame:ok.BUTTON_DONE});e.setWorldSize(this.width,this.height),this.add(e)},n.createContents=function(){var e=new bl(this.scene,{iconTextPadding:5,text:"done",fontSize:12,iconKey:rk,iconFrame:ok.IC_DONE,iconWidth:15,iconHeight:12.5});e.text.setMaxSize(50,20),this.add(e),Phaser.Display.Align.In.Center(e,this,0,-1)},t}(Nh.Z),hk=ck,uk=An.Z.GAMEPLAY_DEFAULT_LANDSCAPE,lk=uk.KEY,dk=uk.FRAME,pk=18,fk={WIDTH:232,HEIGHT:33},gk={WIDTH:234,HEIGHT:37},mk={WIDTH:234,HEIGHT:46.5},vk=12,yk=function(e){function t(t){var n;return(n=e.call(this,t)||this).scroller=void 0,n.toggleButtonMap=new(te()),n.closeButton=void 0,n.createBackground(),n.createScroller(),n.createHeader(),n.createCloseButton(),n.createMainButtons(),n.createDoneButton(),n.y=n.calculateY(),n.listenAudioEnabledChange(),t.add.existing((0,$a.Z)(n)),n}(0,r.Z)(t,e);var n=t.prototype;return n.listenAudioEnabledChange=function(){var e=this;GameSDK.onAudioEnabledChange((function(t){var n,i,a,s;null==(n=e.toggleButtonMap.get(Za.sound))||n.updateStatus(t),null==(i=e.toggleButtonMap.get(Za.music))||i.updateStatus(t),null==(a=e.toggleButtonMap.get(Za.sound))||a.setDisabled(!t),null==(s=e.toggleButtonMap.get(Za.music))||s.setDisabled(!t)}))},n.createBackground=function(){var e=new mm(this.scene,{width:239,height:388,key:lk,frame:dk.BG_SETTINGS});this.add(e),this.setSize(e.width,e.height)},n.createHeader=function(){var e=new td(this.scene,{width:gk.WIDTH,height:gk.HEIGHT,key:lk,frame:dk.BG_SETTINGS_TOP,symmetricType:ed.HORIZONTAL});e.setInteractive();var t=this.scene.make.bitmapText({font:gc.Z.BOLD_SHADOW_BLUR.KEY,size:this.scene.fontSize(15),text:"SETTINGS",origin:{x:.5,y:.5}});t.setMaxSize(150,25),t.setTint(16449487,16449487,15913325,15913325),this.add([e,t]),Phaser.Display.Align.In.TopCenter(e,this,0,-1.5),Phaser.Display.Align.In.Center(t,e)},n.createScroller=function(){this.scroller=new GP.Z(this.scene,{width:this.width,height:this.height-gk.HEIGHT-mk.HEIGHT}),this.scroller.createScrollerBar(0,1),Phaser.Display.Align.In.TopCenter(this.scroller,this,0,-gk.HEIGHT),this.add(this.scroller)},n.createMainButtons=function(){var e,t=this.scene.player.getPlayerSettings(),n=t.sound,i=void 0===n||n,a=t.tapToMove,s=void 0===a||a,r=t.autoHints,o=void 0===r||r,c=t.autoComplete,h=void 0===c||c,u=t.drawMode3,l=void 0!==u&&u,d=this.createToggleButton(Za.sound,"soundEffects",i,"ic_sound",18.5,16),p=this.createToggleButton(Za.tapToMove,"tapToMove",s,"ic_move",13,20.5),f=this.createToggleButton(Za.autoComplete,"autoComplete",h,"ic_auto_complete",16.5,17),g=this.createToggleButton(Za.autoHints,"autoHints",o,"ic_hint_settings",19.5,19.5),m=this.createSeparateNode("personalization"),v=this.createLanguageButton(),y=this.createHowToPlayButton();GameCore.Configs.Gameplay.ForceJourneyMode?e=[d,p,f,g,m,v,y]:e=[d,p,f,g,this.createSeparateNode("playMode"),this.createToggleButton(Za.drawMode3,"drawMode3",l,"ic_draw_mode",19,16),m,v,this.createThemeButton(),y];for(var A=[],E=fk.HEIGHT/2-this.scroller.height/2,T=0;T<e.length;T++){if(e[T].setPosition(0,E),T<e.length-1&&"separateNode"!=e[T+1].name){var C=fk.HEIGHT/2,S=this.scene.add.image(0,E+C,lk,dk.BLANK);S.setWorldSize(fk.WIDTH,2),S.setTint(1333293),S.setAlpha(0,0,1,1),A.push(S)}e[T+1]&&(E+=e[T].height)}this.scroller.addItems(e),this.scroller.addItems(A),this.scroller.setEnable(!0)},n.createToggleButton=function(e,t,n,i,a,s){var r=this;void 0===i&&(i="ic_sound"),void 0===a&&(a=24),void 0===s&&(s=24);var o=this.scene.add.container(0,0);o.setSize(fk.WIDTH,fk.HEIGHT);var c=new ak(this.scene,n);this.toggleButtonMap.set(e,c),c.setName(e),c.onClick=function(t){e==Za.largeWidthLayout&&r.scene instanceof eR&&r.scene.gameplay.boardGame.saveCurrentBoard(),r.scene.player.setSetting(e,t),r.scene.events.emit("settings-changed",e,t),e==Za.sound&&r.handleSoundChanged(t),e==Za.drawMode3&&r.scene.screen.open(cs.o4.NOTIFICATION_SCREEN,{message:"newSettings"});var n=r.scene.player.getPlayerSettings().modifiedOptions,i=GameCore.Utils.Json.clone(n);be()(i).call(i,e)||i.push(e),r.scene.player.setSetting(Za.modifiedOptions,i)},e==Za.largeWidthLayout&&this.scene.events.on(vo.BOARD_STATE_CHANGED,(function(e){e==pu.DEALING?c.setDisabled(!0):c.setDisabled(!1)}));var h=this.scene.make.bitmapText({font:gc.Z.PRIMARY.KEY,size:this.scene.fontSize(vk),text:t,origin:{x:0,y:.5}});h.setMaxSize(150,25);var u=this.scene.add.image(0,0,lk,i);return u.setWorldSize(a,s),h.setTint(16777215),o.add([c,h,u]),Phaser.Display.Align.In.Center(u,o,-o.width/2+pk,0),Phaser.Display.Align.In.LeftCenter(h,o,-32),Phaser.Display.Align.In.RightCenter(c,o,-10,0),o},n.updateToggleButtons=function(){var e,t,n,i,a,s,r,o=this.scene.player.getPlayerSettings(),c=o.sound,h=void 0===c||c,u=o.tapToMove,l=void 0===u||u,d=o.autoHints,p=void 0===d||d,f=o.autoComplete,g=void 0===f||f,m=o.drawMode3,v=void 0!==m&&m;null==(e=this.toggleButtonMap.get("sound"))||e.updateStatus(h),null==(t=this.toggleButtonMap.get("tapToMove"))||t.updateStatus(l),null==(n=this.toggleButtonMap.get("drawMode3"))||n.updateStatus(v),null==(i=this.toggleButtonMap.get("autoHints"))||i.updateStatus(p),null==(a=this.toggleButtonMap.get("quickPlay"))||a.updateStatus(!1),null==(s=this.toggleButtonMap.get("leftHanded"))||s.updateStatus(!0),null==(r=this.toggleButtonMap.get("autoComplete"))||r.updateStatus(g)},n.createThemeButton=function(){var e=this,t=new Nh.Z(this.scene,fk.WIDTH,fk.HEIGHT);t.setName("Theme"),t.onClick=function(){e.scene.screen.open(cs.o4.THEME_SCREEN)};var n=this.scene.make.bitmapText({font:gc.Z.PRIMARY.KEY,size:this.scene.fontSize(vk),text:"theme",origin:{x:0,y:.5}});n.setMaxSize(150,25),n.setTint(16777215);var i=this.scene.add.image(0,0,lk,"ic_theme");i.setWorldSize(15.5,15.5);var a=this.scene.add.image(0,0,lk,dk.IC_NEXT);return a.setWorldSize(9,15.5),Phaser.Display.Align.In.Center(i,t,-t.width/2+pk,0),Phaser.Display.Align.In.LeftCenter(n,t,-32),Phaser.Display.Align.In.RightCenter(a,t,-10),t.add([n,i,a]),t},n.createLanguageButton=function(){var e=this,t=new Nh.Z(this.scene,fk.WIDTH,fk.HEIGHT);t.setName("Language"),t.onClick=function(){e.scene.screen.open(cs.o4.LANGUAGES_SCREEN)};var n=this.scene.make.bitmapText({font:gc.Z.PRIMARY.KEY,size:this.scene.fontSize(vk),text:"language",origin:{x:0,y:.5}});n.setMaxSize(150,25),n.setTint(16777215);var i=this.scene.add.image(0,0,lk,"ic_language");i.setWorldSize(19,16);var a=this.scene.add.image(0,0,lk,dk.IC_NEXT);return a.setWorldSize(9,15.5),Phaser.Display.Align.In.Center(i,t,-t.width/2+pk,0),Phaser.Display.Align.In.LeftCenter(n,t,-32),Phaser.Display.Align.In.RightCenter(a,t,-10),t.add([n,i,a]),t},n.createHowToPlayButton=function(){var e=this,t=new Nh.Z(this.scene,fk.WIDTH,fk.HEIGHT);t.setName("HowToPlay"),t.onClick=function(){e.scene.screen.close(cs.o4.SETTINGS_SCREEN),e.scene.screen.open(cs.o4.HOW_TO_PLAY_SCREEN)};var n=this.scene.make.bitmapText({font:gc.Z.PRIMARY.KEY,size:this.scene.fontSize(vk),text:"howToPlay",origin:{x:0,y:.5}});n.setMaxSize(150,25),n.setTint(16777215);var i=this.scene.add.image(0,0,lk,dk.IC_BOOK);i.setWorldSize(16.5,17);var a=this.scene.add.image(0,0,lk,dk.IC_NEXT);return a.setWorldSize(9,15.5),Phaser.Display.Align.In.Center(i,t,-t.width/2+pk,0),Phaser.Display.Align.In.LeftCenter(n,t,-32),Phaser.Display.Align.In.RightCenter(a,t,-10),t.add([n,i,a]),t},n.createInviteButton=function(){var e=this,t=new Nh.Z(this.scene,fk.WIDTH,fk.HEIGHT);t.setName("Invite"),t.onClick=function(){e.scene.storage.dispatch(MP())};var n=this.scene.make.bitmapText({font:gc.Z.PRIMARY.KEY,size:this.scene.fontSize(vk),text:"inviteFriends",origin:{x:0,y:.5}});n.setMaxSize(150,25),n.setTint(16777215);var i=this.scene.add.image(0,0,lk,dk.IC_INVITE);i.setWorldSize(19,16);var a=this.scene.add.image(0,0,lk,dk.IC_NEXT);return a.setWorldSize(9,15.5),t.add([n,i,a]),Phaser.Display.Align.In.Center(i,t,-t.width/2+pk,0),Phaser.Display.Align.In.LeftCenter(n,t,-32),Phaser.Display.Align.In.RightCenter(a,t,-10),t},n.createStatisticsButton=function(){var e=this,t=new Nh.Z(this.scene,fk.WIDTH,fk.HEIGHT);t.setName("Statistics"),t.onClick=function(){e.scene.screen.open(cs.o4.GAME_STATS_SCREEN)};var n=this.scene.make.bitmapText({font:gc.Z.PRIMARY.KEY,size:this.scene.fontSize(vk),text:"statistics",origin:{x:0,y:.5}});n.setMaxSize(150,25),n.setTint(16777215);var i=this.scene.add.image(0,0,lk,dk.IC_STATISTICS);i.setWorldSize(16,16);var a=this.scene.add.image(0,0,lk,dk.IC_NEXT);return a.setWorldSize(9,15.5),Phaser.Display.Align.In.Center(i,t,-t.width/2+pk,0),Phaser.Display.Align.In.LeftCenter(n,t,-32),Phaser.Display.Align.In.RightCenter(a,t,-10),t.add([n,i,a]),t},n.createSeparateNode=function(e){var t=this.scene.add.container(0,0);t.setSize(fk.WIDTH,fk.HEIGHT);var n=new td(this.scene,{width:fk.WIDTH,height:fk.HEIGHT+2,key:lk,frame:dk.BG_SETTING_SEPERATE_NOTE,symmetricType:ed.HORIZONTAL}),i=this.scene.make.bitmapText({font:gc.Z.BOLD.KEY,size:this.scene.fontSize(15),text:e,origin:{x:0,y:.5}});return i.setMaxSize(150,25),i.setTint(12704660),t.add([n,i]),t.setName("separateNode"),Phaser.Display.Align.In.LeftCenter(i,t,-9),t},n.handleSoundChanged=function(e){this.scene.sound.volume=e?1:0},n.createDoneButton=function(){var e=this,t=new td(this.scene,{width:mk.WIDTH,height:mk.HEIGHT,key:lk,frame:dk.BG_SETTINGS_BOTTOM,symmetricType:ed.HORIZONTAL});t.setInteractive();var n=new hk(this.scene);n.onClick=function(){e.scene.screen.close(cs.o4.SETTINGS_SCREEN)},this.add([t,n]),Phaser.Display.Align.In.BottomCenter(t,this,0,-1),Phaser.Display.Align.In.Center(n,t,0,3)},n.createCloseButton=function(){var e=this;this.closeButton=new Tm(this.scene),this.add(this.closeButton),Phaser.Display.Align.In.TopRight(this.closeButton,this,-6.5,-11.5),this.closeButton.onClick=function(){e.scene.screen.close(cs.o4.SETTINGS_SCREEN)}},n.resetScroller=function(){this.scroller.gotoTop()},n.calculateY=function(){var e=this.scene.gameZone.height,t=this.scene.footer;return t.y-t.height/2-e/2-this.height/2-vm},t}(Phaser.GameObjects.Container),Ak=yk,Ek=function(e){function t(t,n,i,a){var s;return(s=e.call(this,t,n,i,a)||this).fadeInAnimation=void 0,s.fadeOutAnimation=void 0,s.settingsContainer=void 0,s.setDepth(cs.Ks.POPUP),s.settingsContainer=new Ak(t),s.add(s.settingsContainer),s.background.setTint(1315862),s.background.setAlpha(.5),s}(0,r.Z)(t,e);var n=t.prototype;return n.open=function(){e.prototype.open.call(this),this.runOpenAnimation(),this.updateSettings()},n.close=function(){this.runCloseAnimation()},n.updateSettings=function(){this.settingsContainer.updateToggleButtons()},n.runOpenAnimation=function(){this.scene.audio.playSound(hs.Z.POPUP_SHOW),this.fadeInAnimation||(this.fadeInAnimation=new yh.Z({targets:[this],duration:300})),this.fadeInAnimation.play()},n.runCloseAnimation=function(){var t=this;this.scene.audio.playSound(hs.Z.POPUP_OFF),this.fadeOutAnimation||(this.fadeOutAnimation=new ef.Z({targets:[this],props:{alpha:0},duration:300,onComplete:function(){t.settingsContainer.resetScroller(),t.setAlpha(1),e.prototype.close.call(t)}})),this.fadeOutAnimation.play()},t}(GameCore.Screen),Tk=Ek,Ck=GameCore.world.isLandscape()?Tk:tk,Sk=An.Z.GAMEPLAY_DEFAULT,bk=Sk.KEY,Ik=Sk.FRAME,wk=function(e){function t(t){var n;return(n=e.call(this,t,131.5,51)||this).setName("BackButton"),n.createBackground(),n.createContents(),n}(0,r.Z)(t,e);var n=t.prototype;return n.createBackground=function(){var e=this.scene.make.image({key:bk,frame:Ik.BUTTON_BACK});e.setWorldSize(this.width,this.height),this.add(e)},n.createContents=function(){var e=this.scene.make.image({key:bk,frame:Ik.IC_BACK});e.setWorldSize(18,17);var t=this.scene.add.bitmapText(0,0,gc.Z.BOLD_SHADOW.KEY,"back",this.scene.fontSize(22));this.add([e,t]),Phaser.Display.Align.In.Center(e,this,-30,-2),Phaser.Display.Align.In.Center(t,this,12)},t}(Nh.Z),_k=wk,xk=An.Z.GAMEPLAY_DEFAULT,Pk=(xk.KEY,xk.FRAME,function(e){function t(t){var n;return(n=e.call(this,t)||this).headerText=void 0,n.descriptionText=void 0,n.okButton=void 0,n.backButton=void 0,n.createHeaderText(),n.createDescriptionText(),n.createOkButton(),n.createBackButton(),n.alignContents(),n}(0,r.Z)(t,e);var n=t.prototype;return n.updateUI=function(){this.descriptionText.setVisible(!To.instance.isJourneyMode()),this.alignContents()},n.setDisableButtons=function(e){void 0===e&&(e=!0),this.okButton.setDisabled(e),this.backButton.setDisabled(e)},n.createHeaderText=function(){this.headerText=this.scene.add.bitmapText(0,0,gc.Z.BOLD_SHADOW_BLUR.KEY,"ARE YOU SURE\nYOU WANT TO RESTART?",this.scene.fontSize(26)),this.headerText.setCenterAlign(),this.headerText.setTint(16449487,16449487,15913325,15913325),this.add(this.headerText)},n.createDescriptionText=function(){this.descriptionText=this.scene.add.bitmapText(0,0,gc.Z.PRIMARY.KEY,"Quitting or create new game will be\ncounted as loss in your statistics",this.scene.fontSize(15)),this.descriptionText.setTint(16514299).setOrigin(.5).setCenterAlign(),this.add(this.descriptionText)},n.createOkButton=function(){this.okButton=new OE(this.scene),this.add(this.okButton)},n.createBackButton=function(){this.backButton=new _k(this.scene),this.add(this.backButton)},n.alignContents=function(){To.instance.isJourneyMode()?(Phaser.Display.Align.In.Center(this.headerText,this,0,-65),Phaser.Display.Align.In.Center(this.okButton,this,-80,10),Phaser.Display.Align.In.Center(this.backButton,this,80,10)):(Phaser.Display.Align.In.Center(this.headerText,this,0,-100),Phaser.Display.Align.In.Center(this.descriptionText,this,0,-30),Phaser.Display.Align.In.Center(this.okButton,this,-80,50),Phaser.Display.Align.In.Center(this.backButton,this,80,50))},t}(Phaser.GameObjects.Container)),kk=Pk,Ok=An.Z.GAMEPLAY_DEFAULT,Lk=(Ok.KEY,Ok.FRAME,function(e){return e.NEW_DEAL="NEW_DEAL",e.REPLAY="REPLAY",e}({})),Rk=function(e){function t(t,n,i,a){var s;return(s=e.call(this,t,n,i,a)||this).slideInAnimation=void 0,s.fadeInAnimation=void 0,s.fadeOutAnimation=void 0,s.container=void 0,s.buttonType=Lk.NEW_DEAL,s.handleOkClick=function(){s.container.setDisableButtons(!0),s.scene.screen.close(cs.o4.CONFIRM_RESTART_SCREEN);var e=s.scene.screen.get(cs.o4.PLAY_SCREEN).playContainer;s.buttonType===Lk.NEW_DEAL?e.handleNewDeal():s.buttonType===Lk.REPLAY&&e.handleReplay()},s.handleBackClick=function(){s.container.setDisableButtons(!0),s.scene.screen.close(cs.o4.CONFIRM_RESTART_SCREEN)},s.setDepth(cs.Ks.POPUP),s.background.kill(),s.createBackground(),s.createContainer(),s.createInputs(),s}(0,r.Z)(t,e);var n=t.prototype;return n.createBackground=function(){var e=[{position:0,tint1:0,alpha1:.05},{position:.2,tint1:0,alpha1:.27},{position:.35,tint1:0,alpha1:.6},{position:.65,tint1:0,alpha1:.6},{position:.8,tint1:0,alpha1:.27},{position:1,tint1:0,alpha1:.05}],t=this.scene.world.getWorldSize(),n=t.width,i=t.height,a=new hy(this.scene,n,i,e,"vertical");this.add(a)},n.open=function(t){e.prototype.open.call(this,t),this.scene.screen.close(cs.o4.PLAY_SCREEN),t&&t.buttonType&&(this.buttonType=t.buttonType),this.container.updateUI(),this.runOpenAnimation()},n.close=function(){this.runCloseAnimation()},n.createContainer=function(){this.container=new kk(this.scene),this.add(this.container)},n.createInputs=function(){this.container.okButton.onClick=this.handleOkClick,this.container.backButton.onClick=this.handleBackClick},n.runOpenAnimation=function(){var e,t,n=this;if(null==(e=this.slideInAnimation)||null==(t=e.tween)||!t.isPlaying()){this.scene.audio.playSound(hs.Z.POPUP_SHOW);var i=this.scene.gameZone.height;this.slideInAnimation||(this.slideInAnimation=new pc.Z({targets:[this.container],props:{y:{from:.3*i,to:0,ease:Phaser.Math.Easing.Back.Out}},duration:300,onComplete:function(){n.container.setDisableButtons(!1)}})),this.fadeInAnimation||(this.fadeInAnimation=new yh.Z({targets:[this],duration:300,ease:Phaser.Math.Easing.Sine.InOut})),this.slideInAnimation.play(),this.fadeInAnimation.play()}},n.runCloseAnimation=function(){var t,n,i=this;null!=(t=this.fadeOutAnimation)&&null!=(n=t.tween)&&n.isPlaying()||(this.scene.audio.playSound(hs.Z.POPUP_OFF),this.fadeOutAnimation||(this.fadeOutAnimation=new ef.Z({targets:[this],props:{alpha:0},duration:300,onComplete:function(){e.prototype.close.call(i)}})),this.fadeOutAnimation.play())},t}(GameCore.Screen),Bk=Rk,Dk=An.Z.GAMEPLAY_DEFAULT,Nk=Dk.KEY,Mk=Dk.FRAME,Gk=function(e){function t(t){var n;return(n=e.call(this,t,131.5,51)||this).setName("BackButton"),n.createBackground(),n.createContents(),n}(0,r.Z)(t,e);var n=t.prototype;return n.createBackground=function(){var e=this.scene.make.image({key:Nk,frame:Mk.BUTTON_BACK});e.setWorldSize(this.width,this.height),this.add(e)},n.createContents=function(){var e=this.scene.make.image({key:Nk,frame:Mk.IC_BACK_2});e.setWorldSize(18,17);var t=this.scene.add.bitmapText(0,0,gc.Z.BOLD_SHADOW.KEY,"back",this.scene.fontSize(22));this.add([e,t]),Phaser.Display.Align.In.Center(e,this,-30,-2),Phaser.Display.Align.In.Center(t,this,12)},t}(Nh.Z),Zk=Gk,Fk=An.Z.GAMEPLAY_DEFAULT_LANDSCAPE,Uk=(Fk.KEY,Fk.FRAME,function(e){function t(t){var n;return(n=e.call(this,t)||this).headerText=void 0,n.descriptionText=void 0,n.okButton=void 0,n.backButton=void 0,n.createHeaderText(),n.createDescriptionText(),n.createOkButton(),n.createBackButton(),n.alignContents(),n}(0,r.Z)(t,e);var n=t.prototype;return n.updateUI=function(){this.descriptionText.setVisible(!To.instance.isJourneyMode()),this.alignContents()},n.setDisableButtons=function(e){void 0===e&&(e=!0),this.okButton.setDisabled(e),this.backButton.setDisabled(e)},n.createHeaderText=function(){this.headerText=this.scene.add.bitmapText(0,0,gc.Z.BOLD_SHADOW_BLUR.KEY,"ARE YOU SURE\nYOU WANT TO RESTART?",this.scene.fontSize(26)),this.headerText.setCenterAlign(),this.headerText.setTint(16449487,16449487,15913325,15913325),this.add(this.headerText)},n.createDescriptionText=function(){this.descriptionText=this.scene.add.bitmapText(0,0,gc.Z.PRIMARY.KEY,"Quitting or create new game will be\ncounted as loss in your statistics",this.scene.fontSize(15)),this.descriptionText.setTint(16514299).setOrigin(.5).setCenterAlign(),this.add(this.descriptionText)},n.createOkButton=function(){this.okButton=new WE(this.scene),this.add(this.okButton)},n.createBackButton=function(){this.backButton=new Zk(this.scene),this.add(this.backButton)},n.alignContents=function(){To.instance.isJourneyMode()?(Phaser.Display.Align.In.Center(this.headerText,this,0,-65),Phaser.Display.Align.In.Center(this.okButton,this,-80,10),Phaser.Display.Align.In.Center(this.backButton,this,80,10)):(Phaser.Display.Align.In.Center(this.headerText,this,0,-100),Phaser.Display.Align.In.Center(this.descriptionText,this,0,-30),Phaser.Display.Align.In.Center(this.okButton,this,-80,50),Phaser.Display.Align.In.Center(this.backButton,this,80,50))},t}(Phaser.GameObjects.Container)),zk=Uk,Wk=An.Z.GAMEPLAY_DEFAULT,Yk=(Wk.KEY,Wk.FRAME,function(e){function t(t,n,i,a){var s;return(s=e.call(this,t,n,i,a)||this).slideInAnimation=void 0,s.fadeInAnimation=void 0,s.fadeOutAnimation=void 0,s.container=void 0,s.buttonType=tf.NEW_DEAL,s.handleOkClick=function(){s.container.setDisableButtons(!0),s.scene.screen.close(cs.o4.CONFIRM_RESTART_SCREEN);var e=s.scene.screen.get(cs.o4.PLAY_SCREEN).playContainer;s.buttonType===tf.NEW_DEAL?e.handleNewDeal():s.buttonType===tf.REPLAY&&e.handleReplay()},s.handleBackClick=function(){s.container.setDisableButtons(!0),s.scene.screen.close(cs.o4.CONFIRM_RESTART_SCREEN)},s.setDepth(cs.Ks.POPUP),s.background.kill(),s.createBackground(),s.createContainer(),s.createInputs(),s}(0,r.Z)(t,e);var n=t.prototype;return n.createBackground=function(){var e=[{position:0,tint1:0,alpha1:.05},{position:.2,tint1:0,alpha1:.27},{position:.35,tint1:0,alpha1:.6},{position:.65,tint1:0,alpha1:.6},{position:.8,tint1:0,alpha1:.27},{position:1,tint1:0,alpha1:.05}],t=this.scene.world.getWorldSize(),n=t.width,i=t.height,a=new hy(this.scene,n,i,e,"vertical");this.add(a)},n.open=function(t){e.prototype.open.call(this,t),this.scene.screen.close(cs.o4.PLAY_SCREEN),t&&t.buttonType&&(this.buttonType=t.buttonType),this.container.updateUI(),this.runOpenAnimation()},n.close=function(){this.runCloseAnimation()},n.createContainer=function(){this.container=new zk(this.scene),this.add(this.container)},n.createInputs=function(){this.container.okButton.onClick=this.handleOkClick,this.container.backButton.onClick=this.handleBackClick},n.runOpenAnimation=function(){var e,t,n=this;if(null==(e=this.slideInAnimation)||null==(t=e.tween)||!t.isPlaying()){this.scene.audio.playSound(hs.Z.POPUP_SHOW);var i=this.scene.gameZone.height;this.slideInAnimation||(this.slideInAnimation=new pc.Z({targets:[this.container],props:{y:{from:.3*i,to:0,ease:Phaser.Math.Easing.Back.Out}},duration:300,onComplete:function(){n.container.setDisableButtons(!1)}})),this.fadeInAnimation||(this.fadeInAnimation=new yh.Z({targets:[this],duration:300,ease:Phaser.Math.Easing.Sine.InOut})),this.slideInAnimation.play(),this.fadeInAnimation.play()}},n.runCloseAnimation=function(){var t,n,i=this;null!=(t=this.fadeOutAnimation)&&null!=(n=t.tween)&&n.isPlaying()||(this.scene.audio.playSound(hs.Z.POPUP_OFF),this.fadeOutAnimation||(this.fadeOutAnimation=new ef.Z({targets:[this],props:{alpha:0},duration:300,onComplete:function(){e.prototype.close.call(i)}})),this.fadeOutAnimation.play())},t}(GameCore.Screen)),Hk=Yk,Kk=GameCore.world.isLandscape()?Hk:Bk,jk=An.Z.JOURNEY,Vk=jk.KEY,Jk=jk.FRAME,Xk=function(e){function t(t){var n;return(n=e.call(this,t)||this).levelCompleted=void 0,n.description=void 0,n.createBackground(),n.createStats(),n}(0,r.Z)(t,e);var n=t.prototype;return n.createBackground=function(){var e=this.scene.add.image(0,0,Vk,Jk.AWESOME_SCREEN.LB_FRAME);e.setWorldSize(375,142.5),this.add(e),this.setSize(e.width,e.height)},n.setDescription=function(e){var t=e.key,n=e.interpolations,i=void 0===n?{}:n;this.description.setText(t),this.description.setTranslationParameters(i)},n.createStats=function(){this.levelCompleted=this.scene.make.bitmapText({font:gc.Z.BOLD_SHADOW_BLUR.KEY,size:this.scene.fontSize(22),origin:{x:.5,y:.5}}),this.levelCompleted.setCenterAlign().setMaxSize(350,50),this.levelCompleted.setTranslationParameter("v",1),this.levelCompleted.setText("levelVComplete"),this.add(this.levelCompleted),Phaser.Display.Align.In.TopCenter(this.levelCompleted,this,0,-39),this.description=this.scene.make.bitmapText({font:gc.Z.PRIMARY.KEY,size:this.scene.fontSize(16),text:"journeyResultDescription",origin:{x:.5,y:.5}}),this.description.setMaxSize(320,20),this.add(this.description),Phaser.Display.Align.In.TopCenter(this.description,this,0,-76)},n.hideContent=function(){[this.levelCompleted,this.description].forEach((function(e){return e.setAlpha(0)}))},n.runEntranceAnimationRows=function(){var e=(0,s.Z)(u().mark((function e(){var t,n,i=this;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[this.levelCompleted,this.description],200,n=Be()(t).call(t,(function(e,t){return new(c())((function(n){i.scene.add.tween({targets:[e],duration:200,delay:200*t/2,ease:Phaser.Math.Easing.Sine.Out,props:{alpha:{from:0,to:1},y:{from:e.y+e.height/2,to:e.y}},onComplete:n})}))})),e.next=5,c().all(n);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.setLevel=function(e,t){void 0===t&&(t=!0),this.levelCompleted.setTranslationParameter("v",e),t?this.levelCompleted.setText("levelVComplete"):this.levelCompleted.setText("levelVFailed")},t}(Phaser.GameObjects.Container),qk=An.Z.JOURNEY,Qk=qk.KEY,$k=qk.FRAME,eO=function(e){function t(t){var n;return(n=e.call(this,t)||this).leftIcon=void 0,n.rightIcon=void 0,n.title=void 0,n.setSize(375,27),n.createIcons(),n.createTitle(),n.align(),n.title.on("textChanged",(function(){n.align()})),n}(0,r.Z)(t,e);var n=t.prototype;return n.createIcons=function(){this.leftIcon=this.scene.add.image(0,0,Qk,$k.AWESOME_SCREEN.RECTANGLE_TITLE),this.leftIcon.setWorldSize(12,12.5),this.rightIcon=this.scene.add.image(0,0,Qk,$k.AWESOME_SCREEN.RECTANGLE_TITLE),this.rightIcon.setWorldSize(12,12.5),this.add([this.leftIcon,this.rightIcon])},n.createTitle=function(){this.title=this.scene.make.bitmapText({font:gc.Z.BOLD_SHADOW_BLUR.KEY,size:this.scene.fontSize(24),text:"solitaire_challenge",origin:{x:.5,y:.5}}),this.title.setMaxSize(330,35),this.title.setTint(16449487,16449487,15913325,15913325),this.add(this.title)},n.align=function(){Phaser.Display.Align.To.RightCenter(this.rightIcon,this.title,5),Phaser.Display.Align.To.LeftCenter(this.leftIcon,this.title,5)},t}(Phaser.GameObjects.Container),tO=function(e){function t(t,n,i){var a;return(a=e.call(this,t,n,i)||this).handleNextLevel=(0,s.Z)(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a.scene.journey.outOfMissions()){e.next=5;break}a.scene instanceof eR&&(a.scene.journey.setIsPlayingCurrentLevel(),a.scene.gameplay.startJourneyMode()),e.next=12;break;case 5:return a.scene.screen.open(cs.o4.OUT_OF_MISSIONS_SCREEN),e.next=8,ou(a.scene,2e3);case 8:if(a.scene.screen.close(cs.o4.OUT_OF_MISSIONS_SCREEN),!(a.scene instanceof eR)){e.next=12;break}return e.next=12,a.scene.handlePlaySingle();case 12:a.scene.screen.close(cs.o4.MISSION_COMPLETED_SCREEN);case 13:case"end":return e.stop()}}),e)}))),a.setName("NextLevel"),a.onClick=a.handleNextLevel,a.createContent(),a}return(0,r.Z)(t,e),t}(Nh.Z),nO=tO,iO=An.Z.GAMEPLAY_DEFAULT,aO=iO.KEY,sO=iO.FRAME,rO=function(e){function t(t,n,i){return e.call(this,t,n,i)||this}return(0,r.Z)(t,e),t.prototype.createContent=function(){var e=new bl(this.scene,{iconTextPadding:8,text:"nextLevel",iconWidth:19,iconHeight:21,iconFrame:An.Z.GAMEPLAY_DEFAULT.FRAME.IC_NEXT_LV});e.text.setMaxSize(165,25);var t=this.scene.make.image({key:aO,frame:sO.BTN_NEXT});t.setWorldSize(this.width,this.height),this.add([t,e])},t}(nO),oO=rO,cO=function(e){function t(t,n,i){var a;return(a=e.call(this,t,n,i)||this).setName("GoToMap"),a.onClick=(0,s.Z)(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a.scene.screen.open(cs.o4.JOURNEY_SCREEN);case 1:case"end":return e.stop()}}),e)}))),a.createContent(),a}return(0,r.Z)(t,e),t}(Nh.Z),hO=An.Z.JOURNEY,uO=hO.KEY,lO=hO.FRAME,dO=function(e){function t(t,n,i){return e.call(this,t,n,i)||this}return(0,r.Z)(t,e),t.prototype.createContent=function(){var e=this,t=this.scene.add.container(),n=this.scene.make.bitmapText({font:gc.Z.PRIMARY.KEY,size:this.scene.fontSize(17),text:"goToMap",origin:{x:.5,y:.5}});n.setMaxSize(200,30);var i=this.scene.add.image(0,0,uO,lO.AWESOME_SCREEN.LINE),a=this.scene.add.image(0,0,uO,lO.AWESOME_SCREEN.IC_GO_TO_MAP);a.setWorldSize(31/2.88,47/2.88);var s=function(){t.setSize(a.width+6+n.width,a.height>n.height?a.height:n.height),i.setWorldSize(n.width,3.125),Phaser.Display.Align.In.LeftCenter(a,t),Phaser.Display.Align.In.RightCenter(n,t),Phaser.Display.Align.In.BottomCenter(i,n,0),e.setSize(t.width,e.height)};s(),n.on("textChanged",(function(){s()})),t.add([n,i,a]),this.add(t)},t}(cO),pO=An.Z.JOURNEY,fO=(pO.KEY,pO.FRAME,Yy.HEIGHT),gO=function(e){function t(t){var n;return(n=e.call(this,t)||this).awesomeImage=void 0,n.title=void 0,n.stats=void 0,n.nextLevelButton=void 0,n.goToMapButton=void 0,n.awesome=void 0,n.handleNextLevel=(0,s.Z)(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.scene.journey.outOfMissions()){e.next=5;break}n.scene instanceof eR&&(n.scene.journey.setIsPlayingCurrentLevel(),n.scene.gameplay.startJourneyMode()),e.next=12;break;case 5:return n.scene.screen.open(cs.o4.OUT_OF_MISSIONS_SCREEN),e.next=8,ou(n.scene,2e3);case 8:if(n.scene.screen.close(cs.o4.OUT_OF_MISSIONS_SCREEN),!(n.scene instanceof eR)){e.next=12;break}return e.next=12,n.scene.handlePlaySingle();case 12:n.scene.screen.close(cs.o4.MISSION_COMPLETED_SCREEN);case 13:case"end":return e.stop()}}),e)}))),n.setSizeContainer(),n.createTitle(),n.createBody(),n.createNextLevelButton(),n.createGoToMapButton(),n.createDevButtons(),n.align(),t.add.existing((0,$a.Z)(n)),n}(0,r.Z)(t,e);var n=t.prototype;return n.setLevel=function(e){this.stats.setLevel(e)},n.setSizeContainer=function(){var e=this.scene.gameZone,t=e.width,n=e.height;this.setSize(t,n)},n.createTitle=function(){this.awesome=this.scene.add.container(),this.awesome.setSize(300,132),this.add(this.awesome);var e=this.scene.add.image(0,0,An.Z.GAMEPLAY_DEFAULT.KEY,An.Z.GAMEPLAY_DEFAULT.FRAME.VICTORY);e.setWorldSize(333.5,223);var t=this.scene.make.bitmapText({font:gc.Z.BOLD_SHADOW_BLUR.KEY,size:this.scene.fontSize(32),text:"awesome",origin:{x:.5,y:.5}});t.setRadius(1e3),t.setMaxSize(220,50),t.setGradientHorizontalTint([{at:0,color:16315097},{at:.5,color:16777215},{at:1,color:16315097}]),this.awesome.add([e,t]),Phaser.Display.Align.In.Center(e,this.awesome,0,-23.5),Phaser.Display.Align.In.Center(t,e,0,43.5);var n=new eO(this.scene);this.title=n,this.add([n])},n.createBody=function(){this.stats=new Xk(this.scene),this.add(this.stats)},n.createNextLevelButton=function(){this.nextLevelButton=new oO(this.scene,203,48),this.nextLevelButton.onClick=this.handleNextLevel,this.add(this.nextLevelButton),Phaser.Display.Align.In.TopCenter(this.nextLevelButton,this)},n.createGoToMapButton=function(){this.goToMapButton=new dO(this.scene,170,20),this.goToMapButton.setName("GoToMap"),this.add([this.goToMapButton]),Phaser.Display.Align.In.BottomCenter(this.goToMapButton,this)},n.runEntranceAnimationButtons=function(){var e=(0,s.Z)(u().mark((function e(){var t,n,i=this;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.nextLevelButton.stopPulsate(),n=Be()(t=[this.nextLevelButton,this.goToMapButton]).call(t,(function(e){return new(c())((function(t){i.scene.add.tween({targets:[e],alpha:1,duration:200,onComplete:function(){e.setDisabled(!1),t(),i.nextLevelButton.runPulsate()}})}))})),e.next=4,c().all(n);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.align=function(){this.width;var e=this.height-this.scene.ads.getBannerHeight()-fO,t=this.awesome.height+this.title.height+this.stats.height+this.nextLevelButton.height+this.goToMapButton.height,n=1,i=Math.max((e-(t+205))/2,0);n=(e-t)/205,n=Math.max(Math.min(n,1),.2),Phaser.Display.Align.In.TopCenter(this.awesome,this,0,-45*n-i),Phaser.Display.Align.To.BottomCenter(this.title,this.awesome,0,30*n),Phaser.Display.Align.To.BottomCenter(this.stats,this.title,0,25*n),Phaser.Display.Align.To.BottomCenter(this.nextLevelButton,this.stats,0,40*n),Phaser.Display.Align.To.BottomCenter(this.goToMapButton,this.nextLevelButton,0,25*n)},n.createDevButtons=function(){GameCore.Utils.Valid.isDebugger()&&this.createCloseButton()},n.createCloseButton=function(){var e=this,t=new Nh.Z(this.scene,40,40),n=this.scene.add.image(0,0,An.Z.GAMEPLAY_DEFAULT.KEY,An.Z.GAMEPLAY_DEFAULT.FRAME.IC_BG_OFF);n.setWorldSize(40,40);var i=this.scene.make.bitmapText({font:gc.Z.PRIMARY.KEY,size:this.scene.fontSize(10),text:"Close",origin:{x:.5,y:.5}});i.setCenterAlign(),t.add([n,i]),this.add(t),Phaser.Display.Align.In.BottomLeft(t,this,0,-200),t.onClick=function(){e.scene.screen.close(cs.o4.MISSION_COMPLETED_SCREEN)}},n.hideContent=function(){this.stats.hideContent(),this.nextLevelButton.setAlpha(0),this.goToMapButton.setAlpha(0)},n.runEntranceAnimationRows=function(){var e=(0,s.Z)(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c().all([this.stats.runEntranceAnimationRows()]);case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.runEntranceAnimation=function(){var e=(0,s.Z)(u().mark((function e(){var t;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.runEntranceAnimationRows();case 2:return t=this.scene,e.next=5,t.gameplay.finishJourneyGame();case 5:return e.next=7,this.runEntranceAnimationButtons();case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),t}(Phaser.GameObjects.Container),mO=gO,vO=function(e){function t(t,n,i){var a;return(a=e.call(this,t,n,i)||this).handleReplay=(0,s.Z)(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a.scene instanceof eR&&(a.scene.journey.setIsPlayingCurrentLevel(),a.scene.gameplay.replayGame()),a.scene.screen.close(cs.o4.MISSION_COMPLETED_SCREEN);case 2:case"end":return e.stop()}}),e)}))),a.setName("ReplayButton"),a.onClick=a.handleReplay,a.createContent(),a}return(0,r.Z)(t,e),t}(Nh.Z),yO=An.Z.GAMEPLAY_DEFAULT,AO=yO.KEY,EO=yO.FRAME,TO=function(e){function t(t,n,i){return e.call(this,t,n,i)||this}return(0,r.Z)(t,e),t.prototype.createContent=function(){var e=new bl(this.scene,{iconTextPadding:8,text:"replay",fontSize:18,iconKey:AO,iconFrame:EO.TOURNAMENT.IC_REPLAY,iconWidth:16,iconHeight:17});e.text.setMaxSize(90,30),e.text.setCenterAlign();var t=this.scene.make.image({key:AO,frame:EO.TOURNAMENT.BUTTON_REPLAY});t.setWorldSize(this.width,this.height),this.add([t,e]),Phaser.Display.Align.In.Center(e,this)},t}(vO),CO=function(e){function t(t){var n;return(n=e.call(this,t)||this).buttons=[],n.replayButton=void 0,n.shareButton=void 0,n.setSizeContainer(),n.createReplayButton(),n}(0,r.Z)(t,e);var n=t.prototype;return n.setSizeContainer=function(){this.setSize(375,48)},n.createReplayButton=function(){var e=new TO(this.scene,123.5,48);this.add(e),this.buttons.push(e),this.replayButton=e},n.hideContent=function(){this.buttons.forEach((function(e){e.setAlpha(0)}))},n.runEntranceAnimationButtons=function(){var e=(0,s.Z)(u().mark((function e(){var t,n,i=this;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.replayButton.stopPulsate(),n=Be()(t=this.buttons).call(t,(function(e){return new(c())((function(t){i.scene.add.tween({targets:[e],alpha:1,duration:200,onComplete:function(){e.setDisabled(!1),t(),i.replayButton.runPulsate()}})}))})),e.next=4,c().all(n);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),t}(Phaser.GameObjects.Container),SO=An.Z.GAMEPLAY_DEFAULT,bO=SO.KEY,IO=SO.FRAME,wO=Yy.HEIGHT,_O=function(e){function t(t){var n;return(n=e.call(this,t)||this).stats=void 0,n.footer=void 0,n.title=void 0,n.setSizeContainer(),n.createTitle(),n.createStats(),n.createFooter(),n.createDevButtons(),n.align(),t.add.existing((0,$a.Z)(n)),n}(0,r.Z)(t,e);var n=t.prototype;return n.updateInfo=function(e,t){this.stats.setLevel(e,!1),this.stats.setDescription(t)},n.setSizeContainer=function(){var e=this.scene.gameZone.height;this.setSize(375,e)},n.createTitle=function(){var e=this.scene.add.container(0,0);this.add(e),e.setSize(375,129),this.title=e;var t=this.scene.add.image(0,0,bO,IO.SPADE);t.setWorldSize(23.5,26.5);var n=this.scene.make.bitmapText({font:gc.Z.BOLD_SHADOW_BLUR.KEY,size:this.scene.fontSize(34),text:"missionFailed",origin:{x:.5,y:.5}});n.setMaxSize(245,100,!0);var i=this.scene.add.image(0,0,bO,IO.HEART);i.setWorldSize(22,26),n.setTint(16449487,16449487,15913325,15913325),e.add([t,n,i]),Phaser.Display.Align.In.Center(n,e,0,35);var a=function(){Phaser.Display.Align.To.LeftCenter(t,n,3,-2),Phaser.Display.Align.To.RightCenter(i,n,2,-2)};a(),n.on("textChanged",(function(){a()}))},n.createStats=function(){this.stats=new Xk(this.scene),this.add(this.stats)},n.createFooter=function(){var e=this;this.footer=new CO(this.scene),this.footer.replayButton.onClick=(0,s.Z)(u().mark((function t(){return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.scene instanceof eR&&(e.scene.journey.setIsPlayingCurrentLevel(),e.scene.gameplay.replayGame()),e.scene.screen.close(cs.o4.MISSION_COMPLETED_SCREEN);case 2:case"end":return t.stop()}}),t)}))),this.add(this.footer)},n.createDevButtons=function(){GameCore.Utils.Valid.isDebugger()&&this.createCloseButton()},n.createCloseButton=function(){var e=this,t=new Nh.Z(this.scene,40,40),n=this.scene.add.image(0,0,bO,IO.IC_BG_OFF);n.setWorldSize(40,40);var i=this.scene.make.bitmapText({font:gc.Z.PRIMARY.KEY,size:this.scene.fontSize(10),text:"Close",origin:{x:.5,y:.5}});i.setCenterAlign(),t.add([n,i]),this.add(t),Phaser.Display.Align.In.BottomLeft(t,this,0,-200),t.onClick=function(){e.scene.screen.close(cs.o4.MISSION_COMPLETED_SCREEN)}},n.hideContent=function(){this.stats.hideContent(),this.footer.hideContent()},n.runEntranceAnimationRows=function(){var e=(0,s.Z)(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c().all([this.stats.runEntranceAnimationRows()]);case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.runEntranceAnimation=function(){var e=(0,s.Z)(u().mark((function e(){var t;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.runEntranceAnimationRows();case 2:return t=this.scene,e.next=5,t.gameplay.finishJourneyGame();case 5:return e.next=7,this.footer.runEntranceAnimationButtons();case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.align=function(){this.width;var e=this.height-this.scene.ads.getBannerHeight()-wO,t=this.title.height+this.stats.height+this.footer.height,n=25,i=40+2*(n=Math.min(n,40)),a=1,s=Math.max((e-(t+i))/2,0);a=(e-t)/i,a=Math.max(Math.min(a,1),.2),Phaser.Display.Align.In.TopCenter(this.title,this,0,-10*a-s),Phaser.Display.Align.To.BottomCenter(this.stats,this.title,0,30*a),Phaser.Display.Align.To.BottomCenter(this.footer,this.stats,0,n*a)},t}(Phaser.GameObjects.Container),xO=function(e){function t(t,n,i,a){var s;return(s=e.call(this,t,n,i,a)||this).fadeInAnimation=void 0,s.fadeOutAnimation=void 0,s.slideInAnimation=void 0,s.awesomeContainer=void 0,s.failedContainer=void 0,s.footer=void 0,s.closed=!1,s.completed=!0,s.setBackground=function(){var e=s.scene.theme.getCurrentThemeConfig().backgroundKey;s.background.setTexture(e);var t=s.scene.gameZone,n=t.width,i=t.height;s.background.setWorldSize(n,i),s.scene.world.isLandscape()&&s.background.setScale(s.background.scaleY,s.background.scaleY),s.scene.events.on(vo.BACKGROUND_CHANGED,(function(e){s.background.setTexture(e),s.background.setWorldSize(n,i),s.scene.world.isLandscape()&&s.background.setScale(s.background.scaleY,s.background.scaleY)}))},s.scene=t,s.setBackground(),s.createContainers(),s.createFooter(),s.createBottomLogo(),s.setDepth(cs.Ks.POPUP),En.Z.removeObject(s.background),s}(0,r.Z)(t,e);var n=t.prototype;return n.createContainers=function(){this.createAwesomeContainer(),this.createFailedContainer(),this.awesomeContainer.setVisible(this.completed),this.failedContainer.setVisible(!this.completed)},n.createAwesomeContainer=function(){this.awesomeContainer=new mO(this.scene),this.add(this.awesomeContainer)},n.createFailedContainer=function(){this.failedContainer=new _O(this.scene),this.add(this.failedContainer)},n.createFooter=function(){var e=this;this.footer=new yA(this.scene,!1,cs.o4.MISSION_COMPLETED_SCREEN),this.add(this.footer),this.bringToTop(this.footer),this.footer.setInteractive();var t=this.scene.ads.getBannerHeight(),n=this.scene.gameZone.width>375?-10:0;Phaser.Display.Align.In.BottomCenter(this.footer,this.background,0,-t+n),this.footer.statisticsButton.onClick=function(){e.scene.screen.open(cs.o4.GAME_STATS_SCREEN)},this.footer.newDealButton.onClick=function(){e.scene.screen.open(cs.o4.PLAY_SCREEN)}},n.createBottomLogo=function(){if(!this.scene.game.world.isLandscape()){var e=new Tg(this.scene);this.add(e),Phaser.Display.Align.In.BottomCenter(e,this)}},n.open=function(t){e.prototype.open.call(this,t),this.closed=!1,this.updateData(),this.awesomeContainer.setVisible(this.completed),this.failedContainer.setVisible(!this.completed),this.awesomeContainer.setAlpha(this.completed?1:0),this.failedContainer.setAlpha(this.completed?0:1),this.background.setAlpha(1),this.runOpenAnimation(),this.completed&&(this.add(this.scene.gameplay.confettiSmallFallDown),this.scene.sys.updateList.add(this.scene.gameplay.confettiSmallFallDown),this.scene.gameplay.confettiSmallFallDown.run(10,0,0))},n.close=function(){this.closed=!0,this.runCloseAnimation(),this.stopConfettiAnimation()},n.updateData=function(){var e,t=null==(e=this.data)?void 0:e.list;if(t){var n=t.description,i=(t.stats,t.completed),a=t.level;a&&(this.awesomeContainer.setLevel(a),this.failedContainer.updateInfo(a,n)),this.completed=null!=i&&i,this.scene.journey.setIsPlayingCurrentLevel(!1)}},n.runOpenAnimation=function(){var e=(0,s.Z)(u().mark((function e(){var t,n,i,a;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==(t=this.slideInAnimation)||null==(n=t.tween)||!n.isPlaying()){e.next=2;break}return e.abrupt("return");case 2:this.scene.audio.playSound(hs.Z.POPUP_SHOW),i=this.scene.ads.getBannerHeight(),(a=[this.awesomeContainer,this.failedContainer]).forEach((function(e){e.setAlpha(0),e.y=i,e.hideContent()})),this.slideInAnimation||(this.slideInAnimation=new pc.Z({targets:a,ease:Phaser.Math.Easing.Back.Out,props:{y:{from:i,to:0},alpha:{from:0,to:1}},duration:300,onComplete:function(){var e=(0,s.Z)(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c().all(Be()(a).call(a,(function(e){return e.runEntranceAnimation()})));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()})),this.fadeInAnimation||(this.fadeInAnimation=new yh.Z({targets:[this],duration:300,ease:Phaser.Math.Easing.Linear})),this.fadeInAnimation.play(),this.slideInAnimation.play();case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.runCloseAnimation=function(){var t,n,i=this;null!=(t=this.fadeOutAnimation)&&null!=(n=t.tween)&&n.isPlaying()||(this.scene.audio.playSound(hs.Z.POPUP_OFF),this.fadeOutAnimation||(this.fadeOutAnimation=new ef.Z({targets:[this],ease:Phaser.Math.Easing.Linear,props:{alpha:0},duration:300,onComplete:function(){e.prototype.close.call(i)}})),this.fadeOutAnimation.play())},n.stopConfettiAnimation=function(){this.completed&&this.scene.gameplay.confettiSmallFallDown.emitter.stop()},t}(GameCore.Screen),PO=xO,kO=An.Z.JOURNEY,OO=kO.KEY,LO=kO.FRAME,RO=function(e){function t(t){var n;return(n=e.call(this,t)||this).levelCompleted=void 0,n.description=void 0,n.createBackground(),n.createStats(),n}(0,r.Z)(t,e);var n=t.prototype;return n.createBackground=function(){var e=this.scene.add.image(0,0,OO,LO.AWESOME_SCREEN.LB_FRAME);e.setWorldSize(234.5,65.5),this.add(e),this.setSize(e.width,e.height)},n.setDescription=function(e){var t=e.key,n=e.interpolations,i=void 0===n?{}:n;this.description.setText(t),this.description.setTranslationParameters(i)},n.createStats=function(){this.levelCompleted=this.scene.make.bitmapText({font:gc.Z.BOLD_SHADOW_BLUR.KEY,size:this.scene.fontSize(14),origin:{x:.5,y:.5}}),this.levelCompleted.setMaxSize(210,20),this.levelCompleted.setTranslationParameter("v",1),this.levelCompleted.setText("levelVComplete"),this.add(this.levelCompleted),Phaser.Display.Align.In.TopCenter(this.levelCompleted,this,0,-15),this.description=this.scene.make.bitmapText({font:gc.Z.PRIMARY.KEY,size:this.scene.fontSize(12),text:"journeyResultDescription",origin:{x:.5,y:.5}}),this.description.setCenterAlign().setMaxSize(210,40),this.add(this.description),Phaser.Display.Align.In.TopCenter(this.description,this,0,-37)},n.hideContent=function(){[this.levelCompleted,this.description].forEach((function(e){return e.setAlpha(0)}))},n.runEntranceAnimationRows=function(){var e=(0,s.Z)(u().mark((function e(){var t,n,i=this;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[this.levelCompleted,this.description],200,n=Be()(t).call(t,(function(e,t){return new(c())((function(n){i.scene.add.tween({targets:[e],duration:200,delay:200*t/2,ease:Phaser.Math.Easing.Sine.Out,props:{alpha:{from:0,to:1},y:{from:e.y+e.height/2,to:e.y}},onComplete:n})}))})),e.next=5,c().all(n);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.setLevel=function(e,t){void 0===t&&(t=!0),this.levelCompleted.setTranslationParameter("v",e),t?this.levelCompleted.setText("levelVComplete"):this.levelCompleted.setText("levelVFailed")},t}(Phaser.GameObjects.Container),BO=An.Z.JOURNEY,DO=BO.KEY,NO=BO.FRAME,MO=function(e){function t(t){var n;return(n=e.call(this,t)||this).leftIcon=void 0,n.rightIcon=void 0,n.title=void 0,n.setSize(375,27),n.createIcons(),n.createTitle(),n.align(),n.title.on("textChanged",(function(){n.align()})),n}(0,r.Z)(t,e);var n=t.prototype;return n.createIcons=function(){this.leftIcon=this.scene.add.image(0,0,DO,NO.AWESOME_SCREEN.RECTANGLE_TITLE),this.leftIcon.setWorldSize(12,12.5),this.rightIcon=this.scene.add.image(0,0,DO,NO.AWESOME_SCREEN.RECTANGLE_TITLE),this.rightIcon.setWorldSize(12,12.5),this.add([this.leftIcon,this.rightIcon])},n.createTitle=function(){this.title=this.scene.make.bitmapText({font:gc.Z.BOLD_SHADOW_BLUR.KEY,size:this.scene.fontSize(14),text:"solitaireChallenge",origin:{x:.5,y:.5}}),this.title.setMaxSize(190,20),this.title.setTint(16449487,16449487,15913325,15913325),this.add(this.title)},n.align=function(){Phaser.Display.Align.To.RightCenter(this.rightIcon,this.title,7),Phaser.Display.Align.To.LeftCenter(this.leftIcon,this.title,7)},t}(Phaser.GameObjects.Container),GO=An.Z.GAMEPLAY_DEFAULT_LANDSCAPE,ZO=GO.KEY,FO=GO.FRAME,UO=function(e){function t(t,n,i){return e.call(this,t,n,i)||this}return(0,r.Z)(t,e),t.prototype.createContent=function(){var e=new bl(this.scene,{iconTextPadding:5,text:"nextLevel",fontSize:12,iconKey:ZO,iconFrame:FO.IC_NEXT_LV,iconWidth:13.5,iconHeight:14});e.text.setCenterAlign().setMaxSize(80,25,!1);var t=this.scene.make.image({key:ZO,frame:FO.BTN_NEXT});t.setWorldSize(this.width,this.height),this.add([t,e]),Phaser.Display.Align.In.Center(e,this,0,-1)},t}(nO),zO=UO,WO=An.Z.JOURNEY_LANDSCAPE,YO=WO.KEY,HO=WO.FRAME,KO=function(e){function t(t,n,i){return e.call(this,t,n,i)||this}return(0,r.Z)(t,e),t.prototype.createContent=function(){var e=this,t=this.scene.add.container(),n=this.scene.make.bitmapText({font:gc.Z.PRIMARY.KEY,size:this.scene.fontSize(12),text:"goToMap",origin:{x:.5,y:.5}});n.setMaxSize(120,20);var i=this.scene.add.image(0,0,YO,HO.AWESOME_SCREEN.LINE),a=this.scene.add.image(0,0,YO,HO.AWESOME_SCREEN.IC_GO_TO_MAP);a.setWorldSize(9.5,14);var s=function(){t.setSize(a.width+6+n.width,a.height>n.height?a.height:n.height),i.setWorldSize(n.width,2.5),Phaser.Display.Align.In.LeftCenter(a,t),Phaser.Display.Align.In.RightCenter(n,t),Phaser.Display.Align.In.BottomCenter(i,n),e.setSize(t.width,e.height)};s(),n.on("textChanged",(function(){s()})),t.add([n,i,a]),this.add(t)},t}(cO),jO=An.Z.GAMEPLAY_DEFAULT_LANDSCAPE,VO=jO.KEY,JO=jO.FRAME,XO=function(e){function t(t){var n;return(n=e.call(this,t)||this).title=void 0,n.stats=void 0,n.awesome=void 0,n.goToMapButton=void 0,n.nextLevelButton=void 0,n.createBackground(),n.createTitle(),n.createBody(),n.createDevButtons(),n.createNextLevelButton(),n.createGotoMapButton(),t.add.existing((0,$a.Z)(n)),n}(0,r.Z)(t,e);var n=t.prototype;return n.setLevel=function(e){this.stats.setLevel(e)},n.createBackground=function(){var e=new td(this.scene,{width:239,height:315.5,key:VO,frame:JO.RESULT.BACKGROUND_SOLO,symmetricType:ed.HORIZONTAL});this.add(e),this.setSize(e.width,e.height)},n.createTitle=function(){this.awesome=this.scene.add.container(),this.awesome.setSize(163.5,84.5),this.add(this.awesome);var e=this.scene.add.image(0,0,VO,JO.VICTORY);e.setWorldSize(163.5,84.5);var t=this.scene.make.bitmapText({font:gc.Z.BOLD_SHADOW_BLUR.KEY,size:this.scene.fontSize(17),text:"awesome",origin:{x:.5,y:.5}});t.setRadius(500),t.setMaxSize(110,30,!0),t.setGradientHorizontalTint([{at:0,color:16315097},{at:.5,color:16777215},{at:1,color:16315097}]),this.awesome.add([e,t]),Phaser.Display.Align.In.Center(t,e,0,8);var n=new MO(this.scene);this.title=n,this.add([n]),Phaser.Display.Align.In.TopCenter(this.awesome,this,0,30),Phaser.Display.Align.In.TopCenter(this.title,this,0,-72)},n.createBody=function(){this.stats=new RO(this.scene),this.add(this.stats),Phaser.Display.Align.In.Center(this.stats,this)},n.createGotoMapButton=function(){var e=new td(this.scene,{width:234,height:41.5,key:An.Z.JOURNEY_LANDSCAPE.KEY,frame:An.Z.JOURNEY_LANDSCAPE.FRAME.AWESOME_SCREEN.BOT_BAR});this.goToMapButton=new KO(this.scene,120,15),this.add([e,this.goToMapButton]),Phaser.Display.Align.In.BottomCenter(e,this,0,-5),Phaser.Display.Align.In.Center(this.goToMapButton,e)},n.createNextLevelButton=function(){this.nextLevelButton=new zO(this.scene,113,33.5),this.add(this.nextLevelButton),Phaser.Display.Align.In.BottomCenter(this.nextLevelButton,this,0,-67)},n.createDevButtons=function(){GameCore.Utils.Valid.isDebugger()&&this.createCloseButton()},n.createCloseButton=function(){var e=this,t=new Nh.Z(this.scene,30,30),n=this.scene.add.image(0,0,VO,JO.IC_BG_OFF);n.setWorldSize(30,30);var i=this.scene.make.bitmapText({font:gc.Z.PRIMARY.KEY,size:this.scene.fontSize(10),text:"Close",origin:{x:.5,y:.5}});i.setCenterAlign(),t.add([n,i]),this.add(t),Phaser.Display.Align.In.BottomLeft(t,this,40,-200),t.onClick=function(){e.scene.screen.close(cs.o4.MISSION_COMPLETED_SCREEN)}},n.hideContent=function(){this.stats.hideContent();[this.nextLevelButton,this.goToMapButton].forEach((function(e){return e.setAlpha(0)}))},n.runEntranceAnimationRows=function(){var e=(0,s.Z)(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c().all([this.stats.runEntranceAnimationRows()]);case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.runEntranceAnimation=function(){var e=(0,s.Z)(u().mark((function e(){var t,n,i=this;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.runEntranceAnimationRows();case 2:return this.nextLevelButton.stopPulsate(),n=Be()(t=[this.nextLevelButton,this.goToMapButton]).call(t,(function(e){return new(c())((function(t){i.scene.add.tween({targets:[e],alpha:1,duration:200,onComplete:function(){e.setDisabled(!1),t(),i.nextLevelButton.runPulsate()}})}))})),e.next=6,c().all(n);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),t}(Phaser.GameObjects.Container),qO=XO,QO=An.Z.GAMEPLAY_DEFAULT_LANDSCAPE,$O=QO.KEY,eL=QO.FRAME,tL=function(e){function t(t,n,i){return e.call(this,t,n,i)||this}return(0,r.Z)(t,e),t.prototype.createContent=function(){var e=new bl(this.scene,{iconTextPadding:5,text:"replay",fontSize:12,iconKey:$O,iconFrame:eL.TOURNAMENT.IC_REPLAY,iconWidth:13,iconHeight:14.5});e.text.setMaxSize(70,25),e.text.setCenterAlign();var t=this.scene.make.image({key:$O,frame:eL.TOURNAMENT.BUTTON_REPLAY});t.setWorldSize(this.width,this.height),this.add([t,e]),Phaser.Display.Align.In.Center(e,this,0,-1)},t}(vO),nL=An.Z.GAMEPLAY_DEFAULT_LANDSCAPE,iL=nL.KEY,aL=nL.FRAME,sL=function(e){function t(t){var n;return(n=e.call(this,t)||this).stats=void 0,n.title=void 0,n.replayButton=void 0,n.createBackground(),n.createTitle(),n.createStats(),n.createReplayButton(),n.createDevButtons(),t.add.existing((0,$a.Z)(n)),n}(0,r.Z)(t,e);var n=t.prototype;return n.updateInfo=function(e,t){this.stats.setLevel(e,!1),this.stats.setDescription(t)},n.createBackground=function(){var e=new td(this.scene,{width:239,height:315.5,key:iL,frame:aL.RESULT.BACKGROUND_SOLO});this.add(e),this.setSize(e.width,e.height)},n.createTitle=function(){var e=this.scene.add.container(0,0);this.add(e),e.setSize(375,15),e.setSize(375,35),this.title=e;var t=this.scene.add.image(0,0,iL,aL.SPADE);t.setWorldSize(13,15.5);var n=this.scene.make.bitmapText({font:gc.Z.BOLD_SHADOW_BLUR.KEY,size:this.scene.fontSize(19),text:"missionFailed",origin:{x:.5,y:.5}});n.setMaxSize(180,20);var i=this.scene.add.image(0,0,iL,aL.HEART);i.setWorldSize(12.5,15),n.setTint(16777215,16777215,12833246,12833246),e.add([t,n,i]);var a=function(){Phaser.Display.Align.To.LeftCenter(t,n,3,-1),Phaser.Display.Align.To.RightCenter(i,n,2,-1)};a(),n.on("textChanged",(function(){a()})),Phaser.Display.Align.In.TopCenter(this.title,this,0,-60)},n.createStats=function(){this.stats=new RO(this.scene),this.add(this.stats)},n.createReplayButton=function(){this.replayButton=new tL(this.scene,95,33),this.add(this.replayButton),Phaser.Display.Align.In.Center(this.replayButton,this,0,80)},n.createDevButtons=function(){GameCore.Utils.Valid.isDebugger()&&this.createCloseButton()},n.createCloseButton=function(){var e=this,t=new Nh.Z(this.scene,40,40),n=this.scene.add.image(0,0,iL,aL.IC_BG_OFF);n.setWorldSize(40,40);var i=this.scene.make.bitmapText({font:gc.Z.PRIMARY.KEY,size:this.scene.fontSize(10),text:"Close",origin:{x:.5,y:.5}});i.setCenterAlign(),t.add([n,i]),this.add(t),Phaser.Display.Align.In.BottomLeft(t,this,40,-200),t.onClick=function(){e.scene.screen.close(cs.o4.MISSION_COMPLETED_SCREEN)}},n.hideContent=function(){this.stats.hideContent(),this.replayButton.setAlpha(0)},n.runEntranceAnimationRows=function(){var e=(0,s.Z)(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c().all([this.stats.runEntranceAnimationRows()]);case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.runEntranceAnimation=function(){var e=(0,s.Z)(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.runEntranceAnimationRows();case 2:return e.next=4,this.runEntranceAnimationButtons();case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.runEntranceAnimationButtons=function(){var e=(0,s.Z)(u().mark((function e(){var t,n,i=this;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.replayButton.stopPulsate(),n=Be()(t=[this.replayButton]).call(t,(function(e){return new(c())((function(t){i.scene.add.tween({targets:[e],alpha:1,duration:200,onComplete:function(){e.setDisabled(!1),t(),i.replayButton.runPulsate()}})}))})),e.next=4,c().all(n);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),t}(Phaser.GameObjects.Container),rL=function(e){function t(t,n,i,a){var s;return(s=e.call(this,t,n,i,a)||this).scene=void 0,s.fadeInAnimation=void 0,s.fadeOutAnimation=void 0,s.slideInAnimation=void 0,s.awesomeContainer=void 0,s.failedContainer=void 0,s.closed=!1,s.completed=!0,s.handleClickTournaments=function(){s.scene.time.delayedCall(100,(function(){s.closed||s.scene.screen.close(s.name)}))},s.setBackground=function(){s.background.setTint(1315862),s.background.setAlpha(.5)},s.scene=t,s.setBackground(),s.createContainers(),s.setDepth(cs.Ks.POPUP),s}(0,r.Z)(t,e);var n=t.prototype;return n.createContainers=function(){this.createAwesomeContainer(),this.createFailedContainer(),this.awesomeContainer.setVisible(this.completed),this.failedContainer.setVisible(!this.completed)},n.createAwesomeContainer=function(){this.awesomeContainer=new qO(this.scene),this.add(this.awesomeContainer)},n.createFailedContainer=function(){this.failedContainer=new sL(this.scene),this.add(this.failedContainer)},n.open=function(t){e.prototype.open.call(this,t),this.closed=!1,this.updateData(),this.awesomeContainer.setVisible(this.completed),this.failedContainer.setVisible(!this.completed),this.awesomeContainer.setAlpha(this.completed?1:0),this.failedContainer.setAlpha(this.completed?0:1),this.runOpenAnimation(),this.completed&&(this.add(this.scene.gameplay.confettiSmallFallDown),this.scene.sys.updateList.add(this.scene.gameplay.confettiSmallFallDown),this.scene.gameplay.confettiSmallFallDown.run(10,0,0))},n.close=function(){this.closed=!0,this.runCloseAnimation(),this.stopConfettiAnimation()},n.updateData=function(){var e,t=null==(e=this.data)?void 0:e.list;if(t){var n=t.description,i=(t.stats,t.completed),a=t.level;a&&(this.awesomeContainer.setLevel(a),this.failedContainer.updateInfo(a,n)),this.completed=null!=i&&i,this.scene.journey.setIsPlayingCurrentLevel(!1)}},n.runOpenAnimation=function(){var e=(0,s.Z)(u().mark((function e(){var t,n,i,a;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==(t=this.slideInAnimation)||null==(n=t.tween)||!n.isPlaying()){e.next=2;break}return e.abrupt("return");case 2:this.scene.audio.playSound(hs.Z.POPUP_SHOW),i=this.scene.ads.getBannerHeight(),(a=[this.awesomeContainer,this.failedContainer]).forEach((function(e){e.setAlpha(0),e.y=i,e.hideContent()})),this.slideInAnimation||(this.slideInAnimation=new pc.Z({targets:a,ease:Phaser.Math.Easing.Back.Out,props:{y:{from:i,to:0},alpha:{from:0,to:1}},duration:300,onComplete:function(){var e=(0,s.Z)(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c().all(Be()(a).call(a,(function(e){return e.runEntranceAnimation()})));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()})),this.fadeInAnimation||(this.fadeInAnimation=new yh.Z({targets:[this],duration:300,ease:Phaser.Math.Easing.Linear})),this.fadeInAnimation.play(),this.slideInAnimation.play();case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.runCloseAnimation=function(){var t,n,i=this;null!=(t=this.fadeOutAnimation)&&null!=(n=t.tween)&&n.isPlaying()||(this.scene.audio.playSound(hs.Z.POPUP_OFF),this.fadeOutAnimation||(this.fadeOutAnimation=new ef.Z({targets:[this],ease:Phaser.Math.Easing.Linear,props:{alpha:0},duration:300,onComplete:function(){e.prototype.close.call(i)}})),this.fadeOutAnimation.play())},n.stopConfettiAnimation=function(){this.completed&&this.scene.gameplay.confettiSmallFallDown.emitter.stop()},t}(GameCore.Screen),oL=rL,cL=GameCore.world.isLandscape()?oL:PO,hL=An.Z.GAMEPLAY_DEFAULT,uL=hL.KEY,lL=hL.FRAME,dL=function(e){function t(t){var n;return(n=e.call(this,t)||this).background=void 0,n.outOfMissionsLetterBitmapTexts=[],n.isPlayingAnimation=!1,n.outOfMissionsBitmapText=void 0,n.setSize(300,300),n.createRawTexts(),n.createBackground(),n.createOutOfMissionsLetterBitmapTexts(),n.alignComponents(),n.createDevButtons(),n}(0,r.Z)(t,e);var n=t.prototype;return n.createBackground=function(){this.background=new Mf.Z(this.scene,0,0,this.width,this.height,20,16579837,0),this.add(this.background)},n.createRawTexts=function(){this.outOfMissionsBitmapText=this.scene.make.bitmapText({font:gc.Z.BOLD_SHADOW_BLUR.KEY,size:this.scene.fontSize(30),text:"youWinTheTrophy",origin:{x:.5,y:.5}});var e=this.scene.world.isLandscape()?360:335;this.outOfMissionsBitmapText.setMaxSize(e,500,!0),this.outOfMissionsBitmapText.setPosition(187.5,353.5),this.outOfMissionsBitmapText.setDepth(1e12),this.outOfMissionsBitmapText.kill(),this.scene.add.existing(this.outOfMissionsBitmapText)},n.createOutOfMissionsLetterBitmapTexts=function(){var e=this;this.createBitmapTextsFromString(this.scene.i18n.t("youWinTheTrophy"),this.outOfMissionsLetterBitmapTexts),this.outOfMissionsLetterBitmapTexts.forEach((function(t){t.setFontSize(e.outOfMissionsBitmapText.fontSize)}))},n.createBitmapTextsFromString=function(e,t){for(var n=e.split(""),i=0;i<Math.max(n.length,t.length);i++){if(i>=t.length){var a=this.scene.make.bitmapText({font:gc.Z.BOLD_SHADOW_BLUR.KEY,size:this.scene.fontSize(30),origin:{x:.5,y:.5},text:""});a.setIgnoreLanguage(),a.setAlpha(0),t.push(a),this.add(a)}i>=n.length?(t[i].kill(),t[i].setText("")):(t[i].revive(),t[i].setText(n[i]))}},n.getCharacterDistance=function(){if(this.scene.world.isLandscape())return 25;switch(this.scene.lang.language){case"de":case"fr":return 4}return 25},n.alignComponents=function(){var e=this.getCharacterDistance();[this.outOfMissionsLetterBitmapTexts].forEach((function(t){var n=[];(t=Le()(t).call(t,(function(e){return e.active&&e.visible}))).forEach((function(i,a){if(0!=t[a].text.length)if(0==a){var s=t[a].getTextBounds().characters[0];s&&n.push(s.w/2)}else{var r=t[a-1].getTextBounds().characters[0],o=t[a].getTextBounds().characters[0];if(r&&o){var c=Math.min(e/2,9),h=" "==t[a-1].text?c:r.w,u=" "==t[a].text?c:o.w;n.push(n[a-1]+h/2+1+u/2)}}}));var i=-n[n.length-1]/2-5;t.forEach((function(a,s){var r=e*(-(t.length-1)/2)+e*s;a.setX(r),a.setX(i+n[s])}))}))},n.createDevButtons=function(){GameCore.Utils.Valid.isDebugger()&&this.createCloseButton()},n.createCloseButton=function(){var e=this,t=new Nh.Z(this.scene,40,40),n=this.scene.add.image(0,0,uL,lL.IC_BG_OFF);n.setWorldSize(40,40);var i=this.scene.make.bitmapText({font:gc.Z.PRIMARY.KEY,size:this.scene.fontSize(10),text:"X",origin:{x:.5,y:.5}});i.setCenterAlign(),t.add([n,i]),Phaser.Display.Align.To.TopRight(t,this),t.onClick=function(){e.isPlayingAnimation||e.scene.screen.close(cs.o4.OUT_OF_MISSIONS_SCREEN)},this.add(t)},n.hideContent=function(){this.outOfMissionsLetterBitmapTexts.forEach((function(e){e.setAlpha(0),e.setAngle(10)}))},n.runEntranceAnimationText=function(){var e=(0,s.Z)(u().mark((function e(){var t,n,i=this;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return 100,this.createRawTexts(),this.createOutOfMissionsLetterBitmapTexts(),this.alignComponents(),t=this.outOfMissionsLetterBitmapTexts,n=Be()(t).call(t,(function(e,t){return new(c())((function(n){i.scene.add.tween({targets:e,duration:100,delay:100*t/2,ease:Phaser.Math.Easing.Cubic.Out,props:{alpha:1,angle:0,scale:{from:.6,to:1,ease:Phaser.Math.Easing.Elastic.Out,easeParams:[.1,.45],duration:1e3}},onComplete:n})}))})),e.next=8,c().all(n);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.runEntranceAnimation=function(){var e=(0,s.Z)(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isPlayingAnimation){e.next=2;break}return e.abrupt("return");case 2:return this.isPlayingAnimation=!0,e.next=5,this.runEntranceAnimationText();case 5:this.isPlayingAnimation=!1;case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),t}(Phaser.GameObjects.Container),pL=function(e){function t(t,n,i,a){var s;return(s=e.call(this,t,n,i,a)||this).slideInAnimation=void 0,s.fadeInAnimation=void 0,s.fadeOutAnimation=void 0,s.container=void 0,s.setDepth(cs.Ks.POPUP),s.container=new dL(t),s.add(s.container),s.background.setTint(1315862),s.background.setAlpha(.5),s}(0,r.Z)(t,e);var n=t.prototype;return n.open=function(t){e.prototype.open.call(this,t),this.container.setAlpha(1),this.background.setAlpha(.8),this.container.setInteractive(),this.runOpenAnimation()},n.close=function(){this.runCloseAnimation()},n.runOpenAnimation=function(){var e=(0,s.Z)(u().mark((function e(){var t,n,i,a=this;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==(t=this.slideInAnimation)||null==(n=t.tween)||!n.isPlaying()){e.next=2;break}return e.abrupt("return");case 2:this.scene.audio.playSound(hs.Z.POPUP_SHOW),i=this.scene.ads.getBannerHeight(),this.container.hideContent(),this.slideInAnimation||(this.slideInAnimation=new pc.Z({targets:[this.container],props:{y:{from:i,to:-i/2,ease:Phaser.Math.Easing.Back.Out}},duration:300,onComplete:function(){var e=(0,s.Z)(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.container.runEntranceAnimation();case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()})),this.fadeInAnimation||(this.fadeInAnimation=new yh.Z({targets:[this],duration:300})),this.slideInAnimation.play(),this.fadeInAnimation.play();case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.runCloseAnimation=function(){var t,n,i=this;null!=(t=this.fadeOutAnimation)&&null!=(n=t.tween)&&n.isPlaying()||(this.scene.audio.playSound(hs.Z.POPUP_OFF),this.fadeOutAnimation||(this.fadeOutAnimation=new ef.Z({targets:[this],props:{alpha:0},duration:300,onComplete:function(){e.prototype.close.call(i)}})),this.fadeOutAnimation.play())},t}(GameCore.Screen),fL=An.Z.GAMEPLAY_DEFAULT,gL=fL.KEY,mL=fL.FRAME,vL=function(e){function t(t){var n;return(n=e.call(this,t)||this).youAvatar=void 0,n.opponentAvatar=void 0,n._versusText=void 0,n.setSize(375,100),n.createAvatars(),n.createVersusText(),n.alignComponents(),n}(0,r.Z)(t,e);var n=t.prototype;return n.createAvatars=function(){this.youAvatar=new hI(this.scene),this.opponentAvatar=new hI(this.scene),this.youAvatar.avatar.setFrame(mL.AVATAR_ORANGE),this.youAvatar.setWinner(!1),this.opponentAvatar.setWinner(!1),this.add([this.youAvatar,this.opponentAvatar])},n.createVersusText=function(){this._versusText=this.scene.add.image(0,0,gL,mL.IC_VERSUS),this._versusText.setWorldSize(70.5,23.5),this.add(this._versusText)},n.alignComponents=function(){Phaser.Display.Align.In.Center(this._versusText,this),Phaser.Display.Align.In.Center(this.youAvatar,this._versusText,95),Phaser.Display.Align.In.Center(this.opponentAvatar,this._versusText,-95)},t}(Phaser.GameObjects.Container),yL=vL,AL=function(e){function t(t,n,i,a){var s;return(s=e.call(this,t,n,i,a)||this).fadeInAnimation=void 0,s.fadeOutAnimation=void 0,s.container=void 0,s.setDepth(cs.Ks.POPUP),s.background.kill(),s.createContainer(),s}(0,r.Z)(t,e);var n=t.prototype;return n.open=function(t){e.prototype.open.call(this,t),this.runOpenAnimation(),this.updateInfo()},n.updateInfo=function(){var e=this.container,t=e.youAvatar,n=e.opponentAvatar,i=this.scene.player.getPlayer(),a=i.playerId,s=i.photo,r=i.name;t.avatar.loadPhoto(a,s,70),t.username.setText(r);var o=this.scene.storage.getState(),c=_r(o),h=c.playerId,u=c.photo,l=c.name;n.avatar.loadPhoto(h,u,70),h==Pa.playerId?(n.username.setText("yourFriend"),n.username.setIgnoreLanguage(!1)):(n.username.setText(l),n.username.setIgnoreLanguage(!0))},n.close=function(){this.runCloseAnimation()},n.createContainer=function(){this.container=new yL(this.scene),this.add(this.container)},n.runOpenAnimation=function(){this.scene.audio.playSound(hs.Z.POPUP_SHOW),this.fadeInAnimation||(this.fadeInAnimation=new yh.Z({targets:[this],duration:300,ease:Phaser.Math.Easing.Sine.InOut})),this.fadeInAnimation.play()},n.runCloseAnimation=function(){var t,n,i=this;null!=(t=this.fadeOutAnimation)&&null!=(n=t.tween)&&n.isPlaying()||(this.scene.audio.playSound(hs.Z.POPUP_OFF),this.fadeOutAnimation||(this.fadeOutAnimation=new ef.Z({targets:[this],props:{alpha:0},duration:300,onComplete:function(){e.prototype.close.call(i)}})),this.fadeOutAnimation.play())},t}(GameCore.Screen),EL=AL,TL=n(654),CL=function(e){function t(t,n,i,a){var s;return(s=e.call(this,t,n,i,a)||this).loadingIcon=void 0,s.messageText=void 0,s.openAnimation=void 0,s.closeTimerEvent=void 0,s.addLoadingIcon(),s.addMessageText(),s.setDepth(cs.Ks.PRIORITY),s.background.setAlpha(.5),s.background.setTint(1315862),s}(0,r.Z)(t,e);var n=t.prototype;return n.open=function(t){var n,i=this;e.prototype.open.call(this,t);var a=this.getData(["message","duration","loading"]),s=a[0],r=void 0===s?"":s,o=a[1],c=void 0===o?0:o,h=a[2],u=void 0!==h&&h;this.setMessage(r),this.showLoading(u),null==(n=this.closeTimerEvent)||n.remove(),c>0&&(this.closeTimerEvent=this.scene.time.addEvent({delay:c,callback:function(){i.visible&&i.scene.screen.close(i.name)}})),this.runOpenAnimation()},n.addLoadingIcon=function(){this.loadingIcon=new ET.Z(this.scene),this.add(this.loadingIcon),Phaser.Display.Align.In.Center(this.loadingIcon,this.zone)},n.addMessageText=function(){this.messageText=this.scene.make.bitmapText({size:this.scene.fontSize(20),font:gc.Z.PRIMARY.KEY,origin:{x:.5,y:.5}}),this.messageText.setCenterAlign(),this.add(this.messageText)},n.setMessage=function(e){this.messageText.setText(e)},n.showLoading=function(e){this.loadingIcon.setVisible(e);var t=!1===e?10:40;Phaser.Display.Align.In.Center(this.messageText,this.zone,0,t)},n.runOpenAnimation=function(){var e,t;null==(e=this.openAnimation)||e.stop(),null==(t=this.openAnimation)||t.remove(),this.openAnimation=new TL.Z({targets:[this.messageText,this.loadingIcon],props:{scale:{getStart:function(e){return e.scale-.3},getEnd:function(e){return e.scale}}}}),this.openAnimation.play()},n.logPageviewOnOpen=function(){},n.logPageviewOnClose=function(){},t}(GameCore.Screen),SL=CL,bL=n(652),IL=An.Z.LANGUAGES,wL=An.Z.GAMEPLAY_DEFAULT,_L=function(e){function t(t,n){var i;(i=e.call(this,t,350,54)||this).languageCode=void 0,i.flag=void 0,i.languageName=void 0,i.iconUncheck=void 0,i.iconCheck=void 0,i.setName("Language-"+n),i.languageCode=n;var a=1/t.world.getPixelRatio(),r=i.scene.add.image(0,0,IL.KEY,"name/"+n);r.setScale(a),r.setWorldSize(r.displayWidth,r.displayHeight);var o=i.scene.add.image(0,0,IL.KEY,"flags/"+n);o.setWorldSize(101/2.88,69/2.88);var c=i.scene.add.image(0,0,wL.KEY,"bg_check");c.setWorldSize(75/2.88,75/2.88);var h=i.scene.add.image(0,0,wL.KEY,"ico_checked");return h.setWorldSize(94/2.88,76/2.88),Phaser.Display.Align.In.LeftCenter(o,(0,$a.Z)(i)),Phaser.Display.Align.To.RightCenter(r,o,12),Phaser.Display.Align.In.RightCenter(c,(0,$a.Z)(i)),Phaser.Display.Align.In.Center(h,c,0,-3),i.flag=o,i.iconCheck=h,i.iconUncheck=c,i.languageName=r,i.add([o,r,c,h]),i.setUncheck(),i.scene.lang.language===i.languageCode&&i.setCheck(),i.onClick=(0,s.Z)(u().mark((function e(){var t,n;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=i.scene.player,t.getPlayerSettings().language!=i.languageCode){e.next=4;break}return e.abrupt("return");case 4:return(n=i.scene.game.globalScene).screen.open(cs.o4.NOTIFY_SCREEN,{message:"loading",loading:!0}),e.next=8,i.scene.lang.changeLanguage(i.languageCode);case 8:n.screen.close(cs.o4.NOTIFY_SCREEN),i.scene.player.setSetting("language",i.languageCode);case 10:case"end":return e.stop()}}),e)}))),i.listenEventLanguageChanged(),i}(0,r.Z)(t,e);var n=t.prototype;return n.setCheck=function(){this.iconCheck.revive()},n.setUncheck=function(){this.iconCheck.kill()},n.listenEventLanguageChanged=function(){var e=this;this.scene.i18n.on("languageChanged",(function(){e.scene.lang.language===e.languageCode?e.setCheck():e.setUncheck()}))},t}(Nh.Z),xL=_L,PL=An.Z.GAMEPLAY_DEFAULT,kL=PL.KEY,OL=PL.FRAME,LL=function(e){function t(t){var n;return(n=e.call(this,t)||this).bg=void 0,n.scroller=void 0,n.closeButton=void 0,n.createBackground(),n.createScroller(),n.createHeader(),n.createCloseButton(),n.createMainButtons(),n.createBackButton(),n.createBottomLogo(),t.add.existing((0,$a.Z)(n)),n}(0,r.Z)(t,e);var n=t.prototype;return n.createBackground=function(){var e=this.scene.world.getWorldSize(),t=e.width,n=e.height,i=this.scene.add.image(0,0,kL,OL.BLANK);i.setWorldSize(t,n),i.setTint(1665080),this.add(i),this.bg=i,this.setSize(i.width,i.height)},n.createHeader=function(){var e=new td(this.scene,{width:this.bg.width,height:64,key:kL,frame:OL.BG_SETTINGS_TOP,symmetricType:ed.HORIZONTAL});e.setInteractive();var t=this.scene.make.bitmapText({font:gc.Z.BOLD_SHADOW_BLUR.KEY,size:this.scene.fontSize(26),text:"LANGUAGES",origin:{x:.5,y:.5}});t.setMaxSize(220,40),t.setTint(16449487,16449487,15913325,15913325),this.add([e,t]),Phaser.Display.Align.In.TopCenter(e,this),Phaser.Display.Align.In.Center(t,e)},n.createCloseButton=function(){var e=this;this.closeButton=new kg(this.scene),this.add(this.closeButton),Phaser.Display.Align.In.TopLeft(this.closeButton,this,-16,-16),this.closeButton.onClick=function(){e.scene.screen.close(cs.o4.LANGUAGES_SCREEN)}},n.createScroller=function(){var e=this.scene.ads.getBannerHeight();this.scroller=new GP.Z(this.scene,{width:this.bg.width,height:this.bg.height-64-95-e}),Phaser.Display.Align.In.TopCenter(this.scroller,this,0,-64),this.add(this.scroller)},n.createMainButtons=function(){for(var e=[],t=this.scene.lang.supportedLanguages,n=0;n<t.length;n++){var i=this.createLanguageButton(t[n]);e.push(i)}for(var a=[],s=e[0].height/2-this.scroller.height/2,r=0;r<e.length;r++){if(e[r].setPosition(0,s),r<e.length-1){var o=this.scene.add.image(0,s+25,kL,OL.BLANK);o.setWorldSize(this.bg.width,2),o.setTint(1333293),o.setAlpha(0,0,1,1),a.push(o)}e[r+1]&&(s+=e[r].height)}this.scroller.addItems(e),this.scroller.addItems(a),this.scroller.setEnable(!0)},n.createLanguageButton=function(e){return new xL(this.scene,e)},n.createBackButton=function(){var e=this,t=new td(this.scene,{width:this.bg.width,height:95,key:kL,frame:OL.BG_SETTINGS_BOTTOM,symmetricType:ed.HORIZONTAL}),n=new wg(this.scene);n.onClick=function(){e.scene.screen.close(cs.o4.LANGUAGES_SCREEN)},this.add([t,n]);var i=this.scene.ads.getBannerHeight();Phaser.Display.Align.In.BottomCenter(t,this,0,-i),Phaser.Display.Align.In.TopCenter(n,t,0,-21)},n.createBottomLogo=function(){var e=new Tg(this.scene);this.add(e),Phaser.Display.Align.In.BottomCenter(e,this)},n.resetScroller=function(){this.scroller.gotoTop()},t}(Phaser.GameObjects.Container),RL=LL,BL=function(e){function t(t,n,i,a){var s;return(s=e.call(this,t,n,i,a)||this).slideInAnimation=void 0,s.slideOutAnimation=void 0,s.fadeInAnimation=void 0,s.fadeOutAnimation=void 0,s.settingsContainer=void 0,s.setDepth(cs.Ks.POPUP),s.settingsContainer=new RL(t),s.add(s.settingsContainer),s.background.setTint(1315862),s.background.setAlpha(.5),s}(0,r.Z)(t,e);var n=t.prototype;return n.open=function(){e.prototype.open.call(this),this.runOpenAnimation()},n.close=function(){this.runCloseAnimation()},n.runOpenAnimation=function(){this.scene.audio.playSound(hs.Z.POPUP_SHOW),this.slideInAnimation||(this.slideInAnimation=new pc.Z({targets:[this.settingsContainer],props:{y:{from:this.height/2,to:this.height/2-this.settingsContainer.height/2,ease:Phaser.Math.Easing.Sine.Out}},duration:300})),this.fadeInAnimation||(this.fadeInAnimation=new yh.Z({targets:[this],duration:300})),this.slideInAnimation.play(),this.fadeInAnimation.play()},n.runCloseAnimation=function(){var t=this;this.scene.audio.playSound(hs.Z.POPUP_OFF),this.slideOutAnimation||(this.slideOutAnimation=new pc.Z({targets:[this.settingsContainer],props:{y:{from:this.height/2-this.settingsContainer.height/2,to:this.height/2,ease:Phaser.Math.Easing.Sine.Out}},duration:300})),this.fadeOutAnimation||(this.fadeOutAnimation=new ef.Z({targets:[this],props:{alpha:0},duration:300,onComplete:function(){t.settingsContainer.resetScroller(),t.setAlpha(1),e.prototype.close.call(t)}})),this.slideOutAnimation.play(),this.fadeOutAnimation.play()},t}(GameCore.Screen),DL=BL,NL=An.Z.LANGUAGES,ML=An.Z.GAMEPLAY_DEFAULT_LANDSCAPE,GL=function(e){function t(t,n){var i;(i=e.call(this,t,210,33)||this).languageCode=void 0,i.flag=void 0,i.languageName=void 0,i.iconUncheck=void 0,i.iconCheck=void 0,i.setName("Language-"+n),i.languageCode=n;var a=1/t.world.getPixelRatio(),r=i.scene.add.image(0,0,NL.KEY,"name/"+n);r.setScale(.65*a),r.setWorldSize(r.displayWidth,r.displayHeight);var o=i.scene.add.image(0,0,NL.KEY,"flags/"+n);o.setWorldSize(25.25,17.25);var c=i.scene.add.image(0,0,ML.KEY,"bg_check");c.setWorldSize(16.5,16.5);var h=i.scene.add.image(0,0,ML.KEY,"ico_checked");return h.setWorldSize(20,16.5),Phaser.Display.Align.In.LeftCenter(o,(0,$a.Z)(i)),Phaser.Display.Align.To.RightCenter(r,o,10),Phaser.Display.Align.In.RightCenter(c,(0,$a.Z)(i)),Phaser.Display.Align.In.Center(h,c,0,-3),i.flag=o,i.iconCheck=h,i.iconUncheck=c,i.languageName=r,i.add([o,r,c,h]),i.setUncheck(),i.scene.lang.language===i.languageCode&&i.setCheck(),i.onClick=(0,s.Z)(u().mark((function e(){var t,n;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=i.scene.player,t.getPlayerSettings().language!=i.languageCode){e.next=4;break}return e.abrupt("return");case 4:return(n=i.scene.game.globalScene).screen.open(cs.o4.NOTIFY_SCREEN,{message:"loading",loading:!0}),e.next=8,i.scene.lang.changeLanguage(i.languageCode);case 8:n.screen.close(cs.o4.NOTIFY_SCREEN),i.scene.player.setSetting("language",i.languageCode);case 10:case"end":return e.stop()}}),e)}))),i.listenEventLanguageChanged(),i}(0,r.Z)(t,e);var n=t.prototype;return n.setCheck=function(){this.iconCheck.revive()},n.setUncheck=function(){this.iconCheck.kill()},n.listenEventLanguageChanged=function(){var e=this;this.scene.i18n.on("languageChanged",(function(){e.scene.lang.language===e.languageCode?e.setCheck():e.setUncheck()}))},t}(Nh.Z),ZL=GL,FL=An.Z.GAMEPLAY_DEFAULT_LANDSCAPE,UL=FL.KEY,zL=FL.FRAME,WL=232,YL=33,HL={WIDTH:234,HEIGHT:37},KL={WIDTH:234,HEIGHT:46.5},jL=function(e){function t(t){var n;return(n=e.call(this,t)||this).scroller=void 0,n.closeButton=void 0,n.createBackground(),n.createScroller(),n.createHeader(),n.createCloseButton(),n.createMainButtons(),n.createBackButton(),n.y=n.calculateY(),t.add.existing((0,$a.Z)(n)),n}(0,r.Z)(t,e);var n=t.prototype;return n.createBackground=function(){var e=new mm(this.scene,{width:239,height:388,key:UL,frame:zL.BG_SETTINGS});this.add(e),this.setSize(e.width,e.height)},n.createHeader=function(){var e=new td(this.scene,{width:HL.WIDTH,height:HL.HEIGHT,key:UL,frame:zL.BG_SETTINGS_TOP,symmetricType:ed.HORIZONTAL});e.setInteractive();var t=this.scene.make.bitmapText({font:gc.Z.BOLD_SHADOW_BLUR.KEY,size:this.scene.fontSize(15),text:"LANGUAGES",origin:{x:.5,y:.5}});t.setMaxSize(150,25),t.setTint(16449487,16449487,15913325,15913325),this.add([e,t]),Phaser.Display.Align.In.TopCenter(e,this,0,-1.5),Phaser.Display.Align.In.Center(t,e)},n.createScroller=function(){this.scroller=new GP.Z(this.scene,{width:this.width,height:this.height-HL.HEIGHT-KL.HEIGHT}),this.scroller.createScrollerBar(0,1),Phaser.Display.Align.In.TopCenter(this.scroller,this,0,-HL.HEIGHT),this.add(this.scroller)},n.createMainButtons=function(){for(var e=[],t=this.scene.lang.supportedLanguages,n=0;n<t.length;n++){var i=this.createLanguageButton(t[n]);e.push(i)}for(var a=[],s=YL/2-this.scroller.height/2,r=0;r<e.length;r++){if(e[r].setPosition(0,s),r<e.length-1){var o=YL/2,c=this.scene.add.image(0,s+o,UL,zL.BLANK);c.setWorldSize(WL,2),c.setTint(1333293),c.setAlpha(0,0,1,1),a.push(c)}e[r+1]&&(s+=e[r].height)}this.scroller.addItems(e),this.scroller.addItems(a),this.scroller.setEnable(!0)},n.createLanguageButton=function(e){return new ZL(this.scene,e)},n.createBackButton=function(){var e=this,t=new td(this.scene,{width:KL.WIDTH,height:KL.HEIGHT,key:UL,frame:zL.BG_SETTINGS_BOTTOM,symmetricType:ed.HORIZONTAL}),n=new gm(this.scene);n.onClick=function(){e.scene.screen.close(cs.o4.LANGUAGES_SCREEN)},this.add([t,n]),Phaser.Display.Align.In.BottomCenter(t,this,0,-1),Phaser.Display.Align.In.Center(n,t,0,2)},n.createCloseButton=function(){var e=this;this.closeButton=new Tm(this.scene),this.add(this.closeButton),Phaser.Display.Align.In.TopRight(this.closeButton,this,-6.5,-11.5),this.closeButton.onClick=function(){e.scene.screen.close(cs.o4.LANGUAGES_SCREEN)}},n.resetScroller=function(){this.scroller.gotoTop()},n.calculateY=function(){var e=this.scene.gameZone.height,t=this.scene.footer;return t.y-t.height/2-e/2-this.height/2-vm},t}(Phaser.GameObjects.Container),VL=jL,JL=function(e){function t(t,n,i,a){var s;return(s=e.call(this,t,n,i,a)||this).fadeInAnimation=void 0,s.fadeOutAnimation=void 0,s.LanguagesContainer=void 0,s.setDepth(cs.Ks.POPUP),s.LanguagesContainer=new VL(t),s.add(s.LanguagesContainer),s.background.setTint(1315862),s.background.setAlpha(.5),s}(0,r.Z)(t,e);var n=t.prototype;return n.open=function(){e.prototype.open.call(this),this.runOpenAnimation()},n.close=function(){this.runCloseAnimation()},n.runOpenAnimation=function(){this.scene.audio.playSound(hs.Z.POPUP_SHOW),this.fadeInAnimation||(this.fadeInAnimation=new yh.Z({targets:[this],duration:300})),this.fadeInAnimation.play()},n.runCloseAnimation=function(){var t=this;this.scene.audio.playSound(hs.Z.POPUP_OFF),this.fadeOutAnimation||(this.fadeOutAnimation=new ef.Z({targets:[this],props:{alpha:0},duration:300,onComplete:function(){t.LanguagesContainer.resetScroller(),t.setAlpha(1),e.prototype.close.call(t)}})),this.fadeOutAnimation.play()},t}(GameCore.Screen),XL=JL,qL=GameCore.world.isLandscape()?XL:DL,QL=An.Z.GAMEPLAY_DEFAULT,$L=(QL.KEY,QL.FRAME,function(e){function t(){for(var t,n,i=arguments.length,a=new Array(i),r=0;r<i;r++)a[r]=arguments[r];return(n=e.call.apply(e,P()(t=[this]).call(t,a))||this).gameplay=void 0,n.header=void 0,n.footer=void 0,n.gameStats=void 0,n.levelLoader=void 0,n.themeHandler=void 0,n.gameModeManager=void 0,n.journeyLevelMechanicManager=void 0,n.bottomLogo=void 0,n.handleFinishingChallenge=function(){n.screen.open(cs.o4.PLAY_WITH_FRIEND_GAME_OVER_SCREEN),n.screen.get(cs.o4.PLAY_WITH_FRIEND_GAME_OVER_SCREEN).updateFinishingChallenge()},n.create=function(){e.prototype.create.call((0,$a.Z)(n)),Rh(),n.themeHandler=new Gm((0,$a.Z)(n)),n.gameModeManager=new tT((0,$a.Z)(n)),n.journeyLevelMechanicManager=new _P((0,$a.Z)(n)),n.gameStats=new xf((0,$a.Z)(n)),n.levelLoader=new Nf((0,$a.Z)(n)),n.header=new $p((0,$a.Z)(n)),n.footer=new Rd((0,$a.Z)(n)),n.footer.init();var t=n.ads.getBannerHeight();Phaser.Display.Align.In.TopCenter(n.header,n.gameZone,0,0),n.world.isLandscape()?Phaser.Display.Align.In.BottomCenter(n.footer,n.gameZone,0,-10):Phaser.Display.Align.In.BottomCenter(n.footer,n.gameZone,0,-t),n.gameplay=new Hl((0,$a.Z)(n)),n.createScreens(),GameCore.Configs.Gameplay.ForceJourneyMode&&n.handleAfterLoadJourneyTexture(),n.ads.preloadInterstitialAdAsync().catch((function(){})),n.header.alignChildren(),n.processStartGame();var i=n.game.globalScene;i instanceof bL.Z&&i.hideBackground()},n.setBackground=function(e){n.createBackground(e)},n.run=function(){n.player.getPlayerIsNew()&&n.gameplay.startNewGame(),n.createBottomLogo(),n.ads.showBannerAdAsync().catch((function(e){}))},n.handlePlayWithFriend=(0,s.Z)(u().mark((function e(){var t,i;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.storage.dispatch(function(){var e=(0,s.Z)(u().mark((function e(t){var n,i,a,s,r,o,c,h,l,d,p,f,g,m,v,y;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,n=window.game,i=n.player,a=n.facebook,n.globalScene.screen.open(cs.o4.NOTIFY_SCREEN,{message:"loading",loading:!0}),s=i.getPlayerId(),r=i.getConnectedPlayerIds(100,0),o=i.getConnectedPlayers(100,0),0==(c=Le()(r).call(r,(function(e){var t;return tn()(t=To.instance.friendsChallenged).call(t,e)<0&&e!=s}))).length&&(c.push.apply(c,r),To.instance.friendsChallenged=[]),h="",l="",d=a.contextType,p=null,c.length>0&&(f=Phaser.Math.RND.between(0,c.length-1),h=c[f],o[h]&&(p=o[h],To.instance.friendsChallenged.push(h))),!h||"string"!==typeof h){e.next=18;break}return e.next=17,a.createAsync(h);case 17:l=e.sent;case 18:if(p&&l){e.next=22;break}return e.next=21,t(ac());case 21:return e.abrupt("return");case 22:return Qo({contextId:l}),t(po()),m=(g=p).name,v=g.photo,y={playerId:h,name:m,photo:v},e.next=28,t(hc(Oa,y));case 28:t(Na(l,d)),ec(100),e.next=38;break;case 32:if(e.prev=32,e.t0=e.catch(0),ec(100),!(e.t0 instanceof Vs)){e.next=37;break}return e.abrupt("return");case 37:(0,he.tO)(e.t0);case 38:return e.prev=38,e.finish(38);case 40:case"end":return e.stop()}}),e,null,[[0,32,38,40]])})));return function(t){return e.apply(this,arguments)}}());case 2:if(!To.instance.isChallengeMode()){e.next=11;break}if(t=n.storage.getState(),void 0==(null==(i=Or(t))?void 0:i.draw3)||void 0==(null==i?void 0:i.seed)){e.next=10;break}return n.gameplay.startGameWith(i.draw3,i.seed),e.abrupt("return");case 10:case 11:n.gameplay.startNewGame();case 12:case"end":return e.stop()}}),e)}))),n.handlePlaySingle=(0,s.Z)(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,lc();case 2:return e.next=4,n.storage.dispatch(nc());case 4:n.gameplay.checkGameplayBeforeStartNewGame(),n.gameplay.startNewGame();case 6:case"end":return e.stop()}}),e)}))),n.closeResultScreens=function(){n.screen.close(cs.o4.MISSION_COMPLETED_SCREEN),n.screen.close(cs.o4.VICTORY_SCREEN),n.screen.close(cs.o4.NO_MORE_MOVES_SCREEN),n.screen.close(cs.o4.JOURNEY_SCREEN)},n}(0,r.Z)(t,e);var n=t.prototype;return n.preload=function(){this.events.on(Phaser.Scenes.Events.WAKE,this.run),this.events.on(Phaser.Scenes.Events.CREATE,this.run),this.events.once("player-finish-challenge",this.handleFinishingChallenge)},n.processStartGame=function(){var e=this;this.showLoading(),this.gameModeManager.start(),this.header.setVisible(!1),this.time.delayedCall(500,(function(){e.gameplay.startGame(),e.header.setVisible(!0)}))},n.showLoading=function(){var e=this,t=new ET.Z(this);t.setDepth(gn.Z.ON_TOP),t.setVisible(!0),t.setScale(1.3),this.add.existing(t),Phaser.Display.Align.In.Center(t,this.gameZone,0,0),this.time.delayedCall(500,(function(){e.tweens.add({targets:[t],alpha:0,duration:300})}))},n.createBottomLogo=function(){if(!this.world.isLandscape()){var e=new Tg(this);e.setDepth(gn.Z.FOOTER_LOGO),this.add.existing(e),Phaser.Display.Align.In.BottomCenter(e,this.gameZone),this.bottomLogo=e}},n.createScreens=function(){this.screen.add(cs.o4.NO_MORE_MOVES_SCREEN,wE),this.screen.add(cs.o4.SETTINGS_SCREEN,Ck),this.screen.add(cs.o4.VICTORY_SCREEN,jA),this.screen.add(cs.o4.PLAY_SCREEN,If),this.screen.add(cs.o4.GAME_STATS_SCREEN,Lm),this.screen.add(cs.o4.HOW_TO_PLAY_SCREEN,ay),this.screen.add(cs.o4.NOTIFICATION_SCREEN,qE),this.screen.add(cs.o4.TOURNAMENTS_SCREEN,aI),this.screen.add(cs.o4.PLAY_WITH_FRIEND_GAME_OVER_SCREEN,Uw),this.screen.add(cs.o4.TOURNAMENTS_RESULT_SCREEN,U_),this.screen.add(cs.o4.WELL_DONE_SCREEN,LP),this.screen.add(cs.o4.CONFIRM_RESTART_SCREEN,Kk),this.screen.add(cs.o4.PLAY_WITH_FRIEND_WELCOME,EL),this.screen.add(cs.o4.WAITING_JOURNEY_SCREEN,SL),this.screen.add(cs.o4.LANGUAGES_SCREEN,qL)},n.handleAfterLoadJourneyTexture=function(){this.screen.get(cs.o4.JOURNEY_SCREEN)||(this.createJourneyModeScreens(),this.header.createJourneyInfo())},n.handleAfterLoadThemePreviewTexture=function(){this.screen.get(cs.o4.THEME_SCREEN)||this.createThemeScreens()},n.createJourneyModeScreens=function(){this.screen.add(cs.o4.JOURNEY_SCREEN,lP),this.screen.add(cs.o4.MISSION_WELCOME_SCREEN,rx),this.screen.add(cs.o4.OUT_OF_MISSIONS_SCREEN,pL),this.screen.add(cs.o4.MISSION_COMPLETED_SCREEN,cL)},n.createThemeScreens=function(){this.screen.add(cs.o4.THEME_SCREEN,Av)},n.checkNewUser=function(){var e=this;(this.player.getPlayerIsNew()||GameCore.Configs.Tutorial.ForceUseTutorial)&&this.time.delayedCall(1e3,(function(){e.screen.open(cs.o4.HOW_TO_PLAY_SCREEN),e.scene.scene.player.incUserGuideDisplays()}))},n.update=function(e,t){this.gameplay.update(t),this.header.update()},n.sendTestDailyNotification=function(e){Bf.sendTestDailyNotification(e)},t}(Xa.Z)),eR=$L;var tR=eR,nR=An.Z.DEFAULT,iR=nR.KEY,aR=nR.FRAME,sR=function(e){function t(t){var n;return(n=e.call(this,t,iR,aR.BUTTON_YELLOW_CIRCLE)||this).scene=void 0,n.scene=t,n.button.setSize(87,68).setDisplaySize(87,68),n.setName("Home"),n.createIcon(),n}return(0,r.Z)(t,e),t.prototype.createIcon=function(){var e=this.scene.add.image(0,0,iR,aR.ICON_FLAT_HOME);e.setSize(43,43).setDisplaySize(43,43),this.add(e),Phaser.Display.Align.In.Center(e,this)},t}(kc.Z),rR=sR,oR=An.Z.DEFAULT,cR=oR.KEY,hR=oR.FRAME,uR=function(e){function t(t){var n;return(n=e.call(this,t,cR,hR.BUTTON_GREEN)||this).scene=void 0,n.scene=t,n.button.setWorldSize(170,72),n.setName("PlayWithFriends"),n.createLabel(),n}return(0,r.Z)(t,e),t.prototype.createLabel=function(){var e=this.scene.make.bitmapText({font:gc.Z.PRIMARY.KEY,size:13,text:"PLAY"}),t=10;Phaser.Display.Align.In.Center(e,this,0,-t);var n=this.scene.make.bitmapText({font:gc.Z.PRIMARY.KEY,size:9,text:"WITH FRIENDS"});t=12,Phaser.Display.Align.In.Center(n,this,0,t),this.add([e,n])},t}(kc.Z),lR=uR,dR=An.Z.DEFAULT,pR=dR.KEY,fR=dR.FRAME,gR=function(e){function t(t){var n;return(n=e.call(this,t,pR,fR.BUTTON_YELLOW_CIRCLE)||this).scene=void 0,n.scene=t,n.button.setSize(87,68).setDisplaySize(87,68),n.setName("Share"),n.createIcon(),n}return(0,r.Z)(t,e),t.prototype.createIcon=function(){var e=this.scene.add.image(0,0,pR,fR.ICON_FLAT_SHARE);e.setSize(43,43).setDisplaySize(43,43),this.add(e),Phaser.Display.Align.In.Center(e,this)},t}(kc.Z),mR=gR,vR=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n.homeButton=void 0,n.playButton=void 0,n.shareButton=void 0,n.scene=t,n.setName("FooterBar"),n.createButtons(),n.alignButtons(),n.scene.add.existing((0,$a.Z)(n)),n}(0,r.Z)(t,e);var n=t.prototype;return n.alignButtons=function(){Phaser.Display.Align.In.Center(this.homeButton,this,-140),Phaser.Display.Align.In.Center(this.playButton,this,0),Phaser.Display.Align.In.Center(this.shareButton,this,140)},n.createButtons=function(){this.createHomeButton(),this.createPlayButton(),this.createShareButton()},n.createHomeButton=function(){this.homeButton=new rR(this.scene),this.add(this.homeButton)},n.createPlayButton=function(){this.playButton=new lR(this.scene),this.add(this.playButton)},n.createShareButton=function(){this.shareButton=new mR(this.scene),this.add(this.shareButton)},t}(Phaser.GameObjects.Container),yR=vR,AR=n(674),ER={targets:[],props:{alpha:{duration:500,value:{start:0,from:0,to:1},ease:Phaser.Math.Easing.Cubic.Out},scale:{duration:1e3,value:{start:.8,from:.8,to:1},ease:Phaser.Math.Easing.Elastic.Out,easeParams:[.1,.45]}}},TR=function(e){function t(t){return e.call(this,ER,t)||this}return(0,r.Z)(t,e),t}(es.Z),CR={targets:[],props:{alpha:{start:0,to:1,duration:500,ease:Phaser.Math.Easing.Cubic.Out},scale:{start:.8,to:1,duration:1e3,ease:Phaser.Math.Easing.Elastic.Out,easeParams:[.1,.45]},y:{start:0,to:0,duration:500,ease:Phaser.Math.Easing.Back.Out}},delay:0},SR=function(e){function t(t){return e.call(this,CR,t)||this}return(0,r.Z)(t,e),t}(es.Z),bR=An.Z.DEFAULT,IR=bR.KEY,wR=bR.FRAME,_R=function(e){function t(t,n){var i;return(i=e.call(this,t)||this).button=void 0,i.avatar=void 0,i.rankIcon=void 0,i.rankText=void 0,i.username=void 0,i.score=void 0,i.scoreText=void 0,i.background=void 0,i.showPopUp=void 0,i.showItems=void 0,i.payload=void 0,i.handleChallengeFriend=function(){var e=i.payload.playerId;i.scene.storage.dispatch(ic(e))},i.createBackground(),i.updateSize(),i.createAvatar(),i.createRank(),i.createUsername(),i.createScore(),i.createButton(),n&&i.updateInfo(n),i.scene.add.existing((0,$a.Z)(i)),i}(0,r.Z)(t,e);var n=t.prototype;return n.updateInfo=function(e){this.payload=(0,a.Z)({scoreRight:!0,isHighlight:!1,useChallenge:!1},e),this.updateBackground(),this.updateAvatar(),this.updateRank(),this.updateUsername(),this.updateScore(),this.updatePosition()},n.updatePosition=function(){var e=this.payload.scoreRight,t=this.payload.useChallenge;this.button.setVisible(!!t),e?Phaser.Display.Align.To.RightCenter(this.score,this.avatar,120):Phaser.Display.Align.To.RightCenter(this.score,this.avatar,80)},n.createBackground=function(){this.background=this.scene.make.image({key:IR,frame:wR.LEADERBOARD_BG_LIGHT}),this.background.setWorldSize(264,56),this.add(this.background)},n.updateBackground=function(){var e="";e=this.payload.isHighlight?wR.LEADERBOARD_BG_LIGHT:wR.LEADERBOARD_BG_DARK,this.background.setFrame(e),this.background.setWorldSize(264,56)},n.updateSize=function(){var e=this.background,t=e.width,n=e.height;this.setSize(t,n)},n.createAvatar=function(){this.avatar=new vc(this.scene,{key:IR,frame:wR.AVATAR_FRAME_YELLOW_SMALL,background:wR.AVATAR_BG_YELLOW_SMALL,width:47.5,height:49.5,radius:40}),this.add(this.avatar),Phaser.Display.Align.In.LeftCenter(this.avatar,this,-10)},n.updateAvatar=function(){var e=this.payload,t=e.playerId,n=e.photo;this.avatar.loadPhoto(t,n)},n.createRank=function(){this.createRankIcon(1),this.createRankText(1)},n.updateRank=function(){var e=this.payload.rank;this.updateRankIcon(e),this.updateRankText(e)},n.getRankIconFrame=function(e){var t=wR.ICON_FLAG;switch(e){case 1:t=wR.ICON_CUP_GOLD;break;case 2:t=wR.ICON_CUP_SILVER;break;case 3:t=wR.ICON_CUP_COPPER}return t},n.createRankIcon=function(e){var t=this.getRankIconFrame(e);this.rankIcon=this.scene.make.image({key:IR,frame:t}),t!=wR.ICON_FLAG?this.rankIcon.setWorldSize(46,30):this.rankIcon.setWorldSize(27,27),this.add(this.rankIcon);var n=e<=3?13:16;Phaser.Display.Align.In.Center(this.rankIcon,this.avatar,0,n)},n.updateRankIcon=function(e){var t=this.getRankIconFrame(e);this.rankIcon.setFrame(t),t!=wR.ICON_FLAG?this.rankIcon.setWorldSize(46,30):this.rankIcon.setWorldSize(27,27)},n.createRankText=function(e){this.rankText=this.scene.make.bitmapText({font:gc.Z.PRIMARY.KEY,size:this.scene.fontSize(15),text:""+e,origin:{x:.5,y:.5}}),this.add(this.rankText),Phaser.Display.Align.In.Center(this.rankText,this.rankIcon,0,-2)},n.updateRankText=function(e){this.rankText.setText(""+e)},n.getShortName=function(e){var t=e.substring(0,7);return t.split(" ")[0]||t},n.createUsername=function(){this.username=this.scene.make.text({text:this.getShortName("FRIEND NAME"),style:{fontFamily:gc.Z.FONT_FAMILY,fontSize:"15px",fontStyle:"bold"}}),this.username.setTint(10317116),this.username.setHighQuality(),Phaser.Display.Align.In.LeftCenter(this.username,this.avatar,-53),this.add(this.username)},n.updateUsername=function(){var e=this.payload.name;this.username.setText(this.getShortName(e))},n.createScore=function(){this.score=this.scene.add.container(),this.scoreText=this.scene.make.bitmapText({font:gc.Z.PRIMARY.KEY,size:this.scene.fontSize(18),text:"132500",origin:{x:.5,y:.5}}),this.scoreText.setTint(6565e3);var e=this.scene.make.image({key:IR,frame:wR.ICON_CUP_MINI});e.setWorldSize(17,18),this.score.add([this.scoreText,e]);var t=-20;Phaser.Display.Align.In.LeftCenter(this.scoreText,e,t),this.add(this.score),t=10,Phaser.Display.Align.In.Center(this.score,this,t)},n.updateScore=function(){var e=this.payload.score;this.scoreText.setText(e)},n.createButton=function(){this.button=new kc.Z(this.scene,IR,wR.BUTTON_GREEN_MINOR_MINI,54,34.5),this.button.setName("ChallengeFriend");var e=this.scene.make.bitmapText({font:gc.Z.PRIMARY.KEY,size:this.scene.fontSize(18),text:"PLAY"});Phaser.Display.Align.In.Center(e,this.button,0,-2),this.button.add(e),Phaser.Display.Align.In.RightCenter(this.button,this,-2),this.add(this.button),this.button.onClick=this.handleChallengeFriend},n.runShowPopUpAnimation=function(e,t){this.scene.tweens.killTweensOf(this),this.showPopUp=new SR({targets:[this],delay:e,duration:t,props:{y:{start:this.y+70,to:this.y}}}),this.showPopUp.play()},n.runShowItemAnimation=function(e,t){var n=this.getAll();this.scene.tweens.killTweensOf(n),this.showItems=new TR({targets:n,duration:t,delay:this.scene.tweens.stagger(50,{start:e+50}),props:{scale:{duration:1e3,getStart:function(e){return.8*e.scale},getEnd:function(e){return e.scale},ease:Phaser.Math.Easing.Elastic.Out,easeParams:[.1,.45]}}}),this.showItems.play()},n.runShowUpAnimation=function(e,t){void 0===e&&(e=0),void 0===t&&(t=300);var n=100*e;this.runShowPopUpAnimation(n,t),this.runShowItemAnimation(n,t)},t}(Phaser.GameObjects.Container),xR=_R;function PR(e,t){var n="undefined"!==typeof I()&&_()(e)||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){var n;if(!e)return;if("string"===typeof e)return kR(e,t);var i=T()(n=Object.prototype.toString.call(e)).call(n,8,-1);"Object"===i&&e.constructor&&(i=e.constructor.name);if("Map"===i||"Set"===i)return S()(e);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return kR(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var i=0;return function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function kR(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var OR=function(e){function t(t){var n;(n=e.call(this,t)||this).scene=void 0,n.currentPlayerId=void 0,n.scroller=void 0,n.scene=t;var i=n.scene.player;return n.currentPlayerId=i.getPlayerId(),n.createReuseScroller(),n.scene.add.existing((0,$a.Z)(n)),n}(0,r.Z)(t,e);var n=t.prototype;return n.createReuseScroller=function(){this.scroller=new kC.Z(this.scene,{classType:xR,listConfigs:[],width:280,height:310,padding:10,marginTop:10,marginBottom:10}),this.scene.renderer instanceof Phaser.Renderer.WebGL.WebGLRenderer&&this.scroller.createBound(An.Z.DEFAULT.KEY,An.Z.DEFAULT.FRAME.BLANK,40,16643027),this.scroller.createMask(),this.scroller.setPosition(0,25),this.add(this.scroller)},n.updateData=function(e){var t=Ni()(e)||[];if(t.length<1)return this.scene.isSwitchable=!0,void this.scene.board.showMessage(!0,"Leaderboard is empty!");for(var n,i=[],a=PR(Gi()(t).call(t,(function(e,t){return+t.score-+e.score})));!(n=a()).done;){var s=n.value,r=s.playerId,o=s.photo,c=s.score,h=s.name,u=s.rank;if(r){var l=this.currentPlayerId===r,d={playerId:r,photo:o,name:h,rank:u,score:c,scoreRight:this.scene.tabId===ds,useChallenge:!l&&this.scene.tabId===ps,isHighlight:l};i.push(d)}}this.scroller.updateConfig(i),this.showLeaders()},n.removeLeaders=function(){this.scroller.updateConfig([])},n.getLeaders=function(){return this.scroller.getChildren()},n.showLeaders=function(){var e=this,t=this.getLeaders();if(t.length<1)return this.scene.isSwitchable=!0,void this.scene.board.showMessage(!0,"Leaderboard is empty!");for(var n=Math.min(t.length,6),i=0;i<n;i++){var a=t[i];a&&(a.setVisible(!0),a.runShowUpAnimation(i,300))}var s=300+100*n+250;this.scene.time.delayedCall(s,(function(){e.scene.isSwitchable=!0,e.scroller.setEnable(!0)}))},t}(Phaser.GameObjects.Container),LR=OR,RR=An.Z.DEFAULT,BR=RR.KEY,DR=RR.FRAME,NR=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n.tabWorld=void 0,n.tabFriends=void 0,n.scene=t,n.createTabFriends(),n.createTabWorld(),n}(0,r.Z)(t,e);var n=t.prototype;return n.selectTabFriends=function(){this.tabFriends.button.setFrame(DR.LEADERBOARD_TAB_ON),this.tabWorld.button.setFrame(DR.LEADERBOARD_TAB_OFF)},n.selectTabWorld=function(){this.tabFriends.button.setFrame(DR.LEADERBOARD_TAB_OFF),this.tabWorld.button.setFrame(DR.LEADERBOARD_TAB_ON)},n.createTabFriends=function(){this.tabFriends=new kc.Z(this.scene,BR,DR.LEADERBOARD_TAB_OFF),this.tabFriends.button.setSize(85,33).setDisplaySize(85,33),this.tabFriends.setName("FriendsTab");var e=this.scene.make.bitmapText({font:gc.Z.PRIMARY.KEY,size:9,text:"FRIENDS",origin:{x:.5,y:.55}});this.tabFriends.add(e),Phaser.Display.Align.In.Center(this.tabFriends,this,-55),this.add(this.tabFriends)},n.createTabWorld=function(){this.tabWorld=new kc.Z(this.scene,BR,DR.LEADERBOARD_TAB_OFF),this.tabWorld.button.setSize(85,33).setDisplaySize(85,33),this.tabWorld.setName("WorldTab");var e=this.scene.make.bitmapText({font:gc.Z.PRIMARY.KEY,size:9,text:"WORLD",origin:{x:.5,y:.55}});this.tabWorld.add(e),Phaser.Display.Align.In.Center(this.tabWorld,this,55),this.add(this.tabWorld)},t}(Phaser.GameObjects.Container),MR=NR,GR=An.Z.DEFAULT,ZR=GR.KEY,FR=GR.FRAME,UR=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n.background=void 0,n.tabs=void 0,n.leaders=void 0,n.loading=void 0,n.message=void 0,n.messageAnimation=void 0,n.scene=t,n.setSize(310,430),n.createBackground(),n.createLoading(),n.createMessage(),n.createContents(),n.createAnimation(),n.scene.add.existing((0,$a.Z)(n)),n}(0,r.Z)(t,e);var n=t.prototype;return n.showLoading=function(e){this.loading.setVisible(e),this.showMessage(!1)},n.showMessage=function(e,t){this.message.setVisible(e),t&&(this.message.setText(t),this.messageAnimation.play())},n.createBackground=function(){this.background=new th(this.scene,0,0,310,430),this.add(this.background)},n.createLoading=function(){this.loading=new os(this.scene),this.loading.setTint(12237498),this.loading.setWorldSize(113,113),this.add(this.loading),Phaser.Display.Align.In.Center(this.loading,this.background)},n.createMessage=function(){this.message=this.scene.make.bitmapText({font:gc.Z.PRIMARY.KEY,size:this.scene.fontSize(18),origin:{x:.5,y:.5}}),this.message.setTint(10317116),this.add(this.message),Phaser.Display.Align.In.Center(this.message,this.background)},n.createContents=function(){this.createLeaders(),this.createTitle(),this.createTabs()},n.createLeaders=function(){this.leaders=new LR(this.scene),this.add(this.leaders),Phaser.Display.Align.In.Center(this.leaders,this.background,0,0)},n.createTitle=function(){var e=this.scene.add.container(),t=this.scene.make.image({key:ZR,frame:FR.RIBBON_SHORT});t.setWorldSize(271,81);var n=this.scene.make.bitmapText({font:gc.Z.PRIMARY.KEY,size:this.scene.fontSize(30),text:"Leaderboards"});Phaser.Display.Align.In.Center(n,t,0,-10),e.add([t,n]),Phaser.Display.Align.In.TopCenter(e,this.background,0,5),this.add(e)},n.createTabs=function(){this.tabs=new MR(this.scene),this.add(this.tabs),Phaser.Display.Align.In.TopCenter(this.tabs,this.background,0,-55)},n.createAnimation=function(){this.messageAnimation=new AR.Z({targets:[this.message],duration:60,repeat:2})},t}(Phaser.GameObjects.Container),zR=UR,WR=GameCore.Configs.LeadersBoard,YR=function(e){function t(){for(var t,n,i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];return(n=e.call.apply(e,P()(t=[this]).call(t,a))||this).board=void 0,n.footerBar=void 0,n.tabId=void 0,n.offset=void 0,n.isRequesting=void 0,n.isSwitchable=void 0,n.run=function(){n.isRequesting=!1;var e=[{selector:js,callback:function(e){if(n.isRequesting=e,n.board.showLoading(e),!1===e){var t=n.game.storage.getState(),i=Ks(t);n.board.leaders.updateData(i)}}}];n.handleStateChange(e),n.selectFriendTab()},n.handleSelectFriendTab=function(){n.isRequesting||n.isSwitchable&&(n.isSwitchable=!1,n.selectFriendTab())},n.handleSelectWorldTab=function(){n.isRequesting||n.isSwitchable&&(n.isSwitchable=!1,n.selectWorldTab())},n.handlePlayWithFriend=function(){n.storage.dispatch(ac())},n.handleHomeClick=function(){n.scene.switch(za.C.DASHBOARD_SCENE)},n.handleShareLeaderboard=function(){n.storage.dispatch(Mo())},n}(0,r.Z)(t,e);var n=t.prototype;return n.preload=function(){this.events.on("wake",this.run),this.events.on("create",this.run)},n.create=function(){e.prototype.create.call(this),this.gameZone.setPosition(0,0),this.createBackground(xa.Z.BACKGROUND.KEY,"0"),this.scene.bringToTop(),this.createBoard(),this.createFooterBar()},n.selectFriendTab=function(){this.tabId=ps,this.offset=0,this.board.showLoading(!0),this.board.leaders.removeLeaders(),this.board.tabs.selectTabFriends(),this.storage.dispatch(zs(WR.LeaderboardId,ps,WR.Limit,this.offset))},n.selectWorldTab=function(){this.tabId=ds,this.offset=0,this.board.showLoading(!0),this.board.leaders.removeLeaders(),this.board.tabs.selectTabWorld(),this.storage.dispatch(zs(WR.LeaderboardId,ds,WR.Limit,this.offset))},n.loadMoreTabFriend=function(){this.isRequesting||(this.offset+=WR.Limit,this.storage.dispatch(zs(WR.LeaderboardId,ps,WR.Limit,this.offset)))},n.loadMoreTabWorld=function(){this.isRequesting||(this.offset+=WR.Limit,this.storage.dispatch(zs(WR.LeaderboardId,ds,WR.Limit,this.offset)))},n.createBoard=function(){this.board=new zR(this),Phaser.Display.Align.In.Center(this.board,this.gameZone,0,-20),this.board.tabs.tabWorld.onClick=this.handleSelectWorldTab,this.board.tabs.tabFriends.onClick=this.handleSelectFriendTab},n.createFooterBar=function(){this.footerBar=new yR(this),Phaser.Display.Align.In.BottomCenter(this.footerBar,this.gameZone,0,-50),this.footerBar.homeButton.onClick=this.handleHomeClick,this.footerBar.playButton.onClick=this.handlePlayWithFriend,this.footerBar.shareButton.onClick=this.handleShareLeaderboard},t}(Xa.Z);var HR,KR,jR=YR,VR=function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).name="LoadResourceFail",i.message=t||"Load resource fail",i.payload=n,i}return(0,r.Z)(t,e),t}((0,W.Z)(Error)),JR=[{id:"pass-levels",title:"Pass 10 Levels",require:{level:10},reward:{diamond:100}},{id:"collect-diamonds",title:"Collect 300 diamonds",require:{diamond:300},reward:{diamond:100}},{id:"invite-friends",title:"Invite 2 friends",require:{friend:2},reward:{diamond:200}},{id:"reach-score",title:"Reach Total Scores",require:{score:1e5},reward:{diamond:200}}],XR=function(){var e=(0,s.Z)(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",JR);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),qR=(0,pe.P1)([function(e){var t;return null==(t=e[qi])?void 0:t.tasks}],(function(e){return e})),QR=(0,pe.P1)([function(e){var t;return null==(t=e[qi])?void 0:t.process}],(function(e){return e})),$R=(0,pe.P1)([function(e){var t;return null==(t=e[qi])?void 0:t.isRequesting}],(function(e){return e})),eB=((0,pe.P1)([function(e){var t;return null==(t=e[qi])?void 0:t.isNotice}],(function(e){return e})),GameCore.Configs.DailyTasks),tB=function(e){return function(t){t({type:$i,payload:{tasks:e}});var n=window.game.player.getCustomData("dailyTasks")||{},i=n.startedTime,a=void 0===i?0:i,s=n.logTasks,r=void 0===s?{}:s;t((Date.now()-a)/1e3>eB.Duration?nB(e):iB(r))}},nB=function(e){return function(t){var n={};e.forEach((function(e){var t=e.id,i=e.require;n[t]={},ie()(i).forEach((function(e){var i;n[t]=((i={})[e]=0,i.rewarded=!1,i)}))})),window.game.player.setCustomData("dailyTasks",{logTasks:n,startedTime:Date.now()}),t(iB(n)),Po.emit(_o.EVENTS.TASKS_RESET)}},iB=function(e){return{type:ea,payload:{process:e}}},aB=function(){var e=(window.game.player.getCustomData("dailyTasks")||{}).logTasks;return GameCore.Utils.Json.clone(e)},sB=function(){function e(e,t){var n=this;this.game=void 0,this.id=void 0,this.taskData=void 0,this.requireTypes=void 0,this.process=function(e){var t,i=e.type,a=e.value;if(!(a<1)&&(-1!==tn()(t=n.requireTypes).call(t,i)&&!n.isPassRequiredTarget(i)&&n.processMore(e))){i=e.type,a=e.value;var s=n.getCorrectValue(i,a);n.game.storage.dispatch(function(e,t,n){return function(i){var a=aB();if(GameCore.Utils.Valid.isObject(a)){var s=a;GameCore.Utils.Object.hasOwn(s,e)&&(s[e].rewarded||(s[e][t]+=n,window.game.player.setCustomData("dailyTasks",{logTasks:s}),i({type:ta,payload:{id:e,type:t,value:n}})))}}}(n.id,i,s)),n.isTaskFinished(i)&&n.game.storage.dispatch(function(e){return function(t){t({type:na,payload:{id:e}}),Po.emit(_o.EVENTS.NOTICE_UPDATE)}}(n.id))}},this.game=e,this.id=t,this.init()}var t=e.prototype;return t.init=function(){var e=this,t=this.game.storage.getState(),n=qR(t)||[];if(!((null==n?void 0:n.length)<1)){var i=null==n?void 0:R()(n).call(n,(function(t){return t.id===e.id}));i&&(this.taskData=i,this.requireTypes=ie()(this.taskData.require),this.initEvents())}},t.getDataByType=function(e){var t=this.game.storage.getState(),n=QR(t),i={value:0,target:0};if(!n)return i;if(!GameCore.Utils.Object.hasOwn(n,this.taskData.id))return i;var a=n[this.taskData.id];if(GameCore.Utils.Valid.isObject(a)&&GameCore.Utils.Object.hasOwn(a,e)){var s=a[e];"number"===typeof s&&(i.value=s)}return i.target=this.taskData.require[e]||0,i},t.getCorrectValue=function(e,t){var n=this.getDataByType(e),i=n.value,a=n.target,s=t;return i+t>a&&(s=a-i),Math.round(s)},t.isPassRequiredTarget=function(e){var t=this.getDataByType(e);return t.value>=t.target},t.isTaskFinished=function(e){var t=this.getDataByType(e);return t.value>=t.target},e}(),rB=_o.COLLECT_DIAMONDS,oB=rB.ID,cB=rB.EVENTS,hB=function(e){function t(t){return e.call(this,t,oB)||this}(0,r.Z)(t,e);var n=t.prototype;return n.initEvents=function(){Po.off(cB.COLLECT_DIAMONDS,this.process),Po.on(cB.COLLECT_DIAMONDS,this.process)},n.processMore=function(){return!0},t}(sB),uB=_o.INVITE_FRIENDS,lB=uB.ID,dB=uB.EVENTS,pB=function(e){function t(t){var n;return(n=e.call(this,t,lB)||this).invitedFriends=void 0,n.resetData=function(){n.invitedFriends=[]},n.resetData(),n}(0,r.Z)(t,e);var n=t.prototype;return n.initEvents=function(){var e=this;Po.off(dB.INVITED_FRIEND,this.process),Po.on(dB.INVITED_FRIEND,this.process),Po.on(_o.EVENTS.TASKS_RESET,(function(){e.resetData()}))},n.processMore=function(e){var t,n=e.opponentId;return!!n&&(-1===tn()(t=this.invitedFriends).call(t,n)&&(this.invitedFriends.push(n),!0))},t}(sB),fB=_o.PASS_LEVELS,gB=fB.ID,mB=fB.EVENTS,vB=function(e){function t(t){return e.call(this,t,gB)||this}(0,r.Z)(t,e);var n=t.prototype;return n.initEvents=function(){Po.off(mB.PASS_LEVEL,this.process),Po.on(mB.PASS_LEVEL,this.process)},n.processMore=function(){return!0},t}(sB),yB=_o.REACH_SCORE,AB=yB.ID,EB=yB.EVENTS,TB=function(e){function t(t){var n;return(n=e.call(this,t,AB)||this).totalScore=void 0,n.lastUpdate=void 0,n.totalScore=0,n.lastUpdate=Date.now(),n}(0,r.Z)(t,e);var n=t.prototype;return n.initEvents=function(){Po.off(EB.ADD_SCORE,this.process),Po.on(EB.ADD_SCORE,this.process)},n.processMore=function(e){var t=e.value,n=Date.now();return n-this.lastUpdate<3e3?(this.totalScore+=t,!1):(e.value+=this.totalScore,this.totalScore=0,this.lastUpdate=n,!0)},t}(sB),CB=function(){function e(e){var t=this;this.game=void 0,this.eventsListener=void 0,this.init=(0,s.Z)(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.eventsListener={},e.next=3,t.initData();case 3:t.initEvents();case 4:case"end":return e.stop()}}),e)}))),this.initData=(0,s.Z)(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.game.storage.dispatch(function(){var e=(0,s.Z)(u().mark((function e(t,n){var i,a;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=n(),!$R(i)){e.next=4;break}return e.abrupt("return");case 4:return t({type:Qi,payload:{}}),e.next=7,XR();case 7:a=e.sent,t(tB(a));case 9:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}());case 2:case"end":return e.stop()}}),e)}))),this.game=e,this.init()}var t=e.prototype;return t.getEventListener=function(e){return this.eventsListener[e]},t.initEvents=function(){this.eventsListener[_o.PASS_LEVELS.ID]=new vB(this.game),this.eventsListener[_o.REACH_SCORE.ID]=new TB(this.game),this.eventsListener[_o.INVITE_FRIENDS.ID]=new pB(this.game),this.eventsListener[_o.COLLECT_DIAMONDS.ID]=new hB(this.game)},e}(),SB=CB,bB=[{name:"collect-red-gems",id:"collect-gems",require:{red:5},reward:50},{name:"collect-blue-gems",id:"collect-gems",require:{blue:5},reward:50},{name:"collect-pink-gems",id:"collect-gems",require:{pink:5},reward:50},{name:"collect-green-gems",id:"collect-gems",require:{green:5},reward:50},{name:"collect-yellow-gems",id:"collect-gems",require:{yellow:5},reward:50},{name:"collect-red-blue-gems",id:"collect-gems",require:{red:5,blue:5},reward:120},{name:"collect-red-pink-gems",id:"collect-gems",require:{red:5,pink:5},reward:120},{name:"collect-red-green-gems",id:"collect-gems",require:{red:5,green:5},reward:120},{name:"collect-red-yellow-gems",id:"collect-gems",require:{red:5,yellow:5},reward:120},{name:"collect-blue-pink-gems",id:"collect-gems",require:{blue:5,pink:5},reward:120},{name:"collect-blue-green-gems",id:"collect-gems",require:{blue:5,green:5},reward:120},{name:"collect-blue-yellow-gems",id:"collect-gems",require:{blue:5,yellow:5},reward:120},{name:"collect-pink-green-gems",id:"collect-gems",require:{pink:5,green:5},reward:120},{name:"collect-pink-yellow-gems",id:"collect-gems",require:{pink:5,yellow:5},reward:120},{name:"collect-green-yellow-gems",id:"collect-gems",require:{green:5,yellow:5},reward:120},{name:"collect-red-blue-pink-gems",id:"collect-gems",require:{red:5,blue:5,pink:5},reward:210},{name:"collect-red-blue-green-gems",id:"collect-gems",require:{red:5,blue:5,green:5},reward:210},{name:"collect-red-blue-yellow-gems",id:"collect-gems",require:{red:5,blue:5,yellow:5},reward:210},{name:"collect-red-pink-green-gems",id:"collect-gems",require:{red:5,pink:5,green:5},reward:210},{name:"collect-red-pink-yellow-gems",id:"collect-gems",require:{red:5,pink:5,yellow:5},reward:210},{name:"collect-red-green-yellow-gems",id:"collect-gems",require:{red:5,green:5,yellow:5},reward:210},{name:"collect-blue-pink-green-gems",id:"collect-gems",require:{blue:5,pink:5,green:5},reward:210},{name:"collect-blue-pink-yellow-gems",id:"collect-gems",require:{blue:5,pink:5,yellow:5},reward:210},{name:"collect-blue-green-yellow-gems",id:"collect-gems",require:{blue:5,green:5,yellow:5},reward:210},{name:"collect-pink-green-yellow-gems",id:"collect-gems",require:{pink:5,green:5,yellow:5},reward:210}],IB=function(){var e=(0,s.Z)(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",bB);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),wB=(0,pe.P1)([function(e){var t;return null==(t=e[Yi])?void 0:t.missions}],(function(e){return e})),_B=(0,pe.P1)([function(e){var t;return null==(t=e[Yi])?void 0:t.isRequesting}],(function(e){return e})),xB=((0,pe.P1)([wB,function(e,t){return t.name}],(function(e,t){return e?"string"!==typeof t?null:GameCore.Utils.Object.hasOwn(e,t)?e[t]:null:null})),function(e){return{type:Ki,payload:{missions:e}}}),PB=An.Z.GAMEPLAY.FRAME,kB=PB.TILE_RED,OB=PB.TILE_BLUE,LB=PB.TILE_PINK,RB=PB.TILE_GREEN,BB=PB.TILE_YELLOW,DB=PB.TILE_FREEZE,NB=PB.TILE_COLORFUL,MB=PB.TILE_COLOR_CHANGE,GB={RED:"red",BLUE:"blue",PINK:"pink",GREEN:"green",YELLOW:"yellow"},ZB={FREEZE:"freeze",COLORFUL:"colorful",COLOR_CHANGE:"color_change"},FB=GB.RED,UB=GB.BLUE,zB=GB.PINK,WB=GB.GREEN,YB=GB.YELLOW,HB=ZB.FREEZE,KB=ZB.COLORFUL,jB=ZB.COLOR_CHANGE,VB=((HR={})[FB]="r",HR[UB]="b",HR[zB]="p",HR[WB]="g",HR[YB]="y",HR[HB]="f",HR[KB]="c",HR[jB]="m",HR),JB={SIZE:37,STATUS:{READY:"ready",MOVING:"moving",CAPTURED:"captured"},FRAME:(KR={},KR[FB]=kB,KR[UB]=OB,KR[zB]=LB,KR[WB]=RB,KR[YB]=BB,KR[HB]=DB,KR[KB]=NB,KR[jB]=MB,KR),SETS:{SET_3:"set_3",SET_4:"set_4",SET_5:"set_5",SET_6:"set_6",SET_7:"set_7",SET_8:"set_8",SET_9:"set_9"},COLORS:GB,SPECIALS:ZB,HASH:VB},XB={GIFT:{ID:"ItemGift"},PAINT:{ID:"ItemPaint"},HAMMER:{ID:"ItemHammer"},SHUFFLE:{ID:"ItemShuffle"},CHANGE_COLOR:{ID:"ItemChangeColor"}},qB={TYPES:{COLLECT_GEMS:"collect-gems",USE_ITEM:"use-item",COMBO:"combo"},EVENTS:{MISSION_START:"mission-start",MISSION_UPDATE:"mission-update",MISSION_FAILED:"mission-failed",MISSION_COMPLETED:"mission-completed"},OBJECTS:(0,a.Z)({},JB.COLORS,JB.SPECIALS,{PAINT:XB.PAINT.ID,HAMMER:XB.HAMMER.ID,SHUFFLE:XB.SHUFFLE.ID})},QB=(0,pe.P1)([function(e){var t;return null==(t=e[Yi])?void 0:t.mission}],(function(e){return e})),$B=((0,pe.P1)([QB],(function(e){return e?e.name:null})),function(){function e(e,t,n){var i=this;this.game=void 0,this.id=void 0,this.name=void 0,this.reward=void 0,this.process=function(e){var t=e.id,n=e.type,a=e.value;a<1||i.id===t&&i.isTypeRequired(n)&&i.processMore(e)&&(i.game.storage.dispatch(function(e,t,n){return{type:ji,payload:{name:e,type:t,value:n}}}(i.name,n,a)),i.isMissionComplete()&&(Po.emit(qB.EVENTS.MISSION_COMPLETED,{name:i.name,reward:i.reward}),i.game.storage.dispatch(function(e){return{type:Vi,payload:{name:e}}}(i.name))))},this.id=t,this.name=n,this.game=e}var t=e.prototype;return t.start=function(){var e=this.game.storage.getState(),t=QB(e);t&&t.name===this.name&&(this.reward=t.reward,this.initEvents())},t.getMissionData=function(){var e=this.game.storage.getState(),t=QB(e);return t?t.name!==this.name?null:t:null},t.getDataByType=function(e){var t=this.getMissionData();if(!t)return null;var n=t.require[e];return{value:t.process[e],target:n}},t.isTypeRequired=function(e){var t=this.getDataByType(e);return!!t&&t.target>0},t.isMissionComplete=function(){var e=this.getMissionData();if(!e)return!0;var t=e.require,n=e.process,i=!0;return ie()(t).forEach((function(e){if(i){var a=t[e];n[e]<a&&(i=!1)}})),i},e}()),eD=$B,tD=qB.EVENTS,nD=qB.TYPES,iD=function(e){function t(t,n){return e.call(this,t,nD.COLLECT_GEMS,n)||this}(0,r.Z)(t,e);var n=t.prototype;return n.initEvents=function(){Po.off(tD.MISSION_UPDATE,this.process),Po.on(tD.MISSION_UPDATE,this.process)},n.processMore=function(){return!0},t}(eD),aD=qB.EVENTS,sD=qB.TYPES,rD=function(e){function t(t,n){return e.call(this,t,sD.COMBO,n)||this}(0,r.Z)(t,e);var n=t.prototype;return n.initEvents=function(){Po.off(aD.MISSION_UPDATE,this.process),Po.on(aD.MISSION_UPDATE,this.process)},n.processMore=function(e){var t=this.getMissionData();if(!t)return!1;var n=e.type;return e.value>=t.require[n]},t}(eD),oD=qB.EVENTS,cD=qB.TYPES,hD=function(e){function t(t,n){return e.call(this,t,cD.USE_ITEM,n)||this}(0,r.Z)(t,e);var n=t.prototype;return n.initEvents=function(){Po.off(oD.MISSION_UPDATE,this.process),Po.on(oD.MISSION_UPDATE,this.process)},n.processMore=function(e){return!0},t}(eD),uD=function(){function e(e){var t=this;this.game=void 0,this.listener=void 0,this.init=(0,s.Z)(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.initData();case 2:t.initListeners(),t.initEvents();case 4:case"end":return e.stop()}}),e)}))),this.initData=(0,s.Z)(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.game.storage.dispatch(function(){var e=(0,s.Z)(u().mark((function e(t,n){var i,a;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=n(),!_B(i)){e.next=4;break}return e.abrupt("return");case 4:return t({type:Hi,payload:{}}),e.next=7,IB();case 7:a=e.sent,t(xB(a));case 9:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}());case 2:case"end":return e.stop()}}),e)}))),this.startListener=function(e){t.listener[e]&&t.listener[e].start()},this.game=e,this.init()}var t=e.prototype;return t.initListeners=function(){var e=this;this.listener={};var t=this.game.storage.getState(),n=wB(t);n&&ie()(n).forEach((function(t){switch(n[t].id){case qB.TYPES.COLLECT_GEMS:e.listener[t]=new iD(e.game,t);break;case qB.TYPES.COMBO:e.listener[t]=new rD(e.game,t);break;case qB.TYPES.USE_ITEM:e.listener[t]=new hD(e.game,t)}}))},t.initEvents=function(){Po.off(qB.EVENTS.MISSION_START,this.startListener),Po.on(qB.EVENTS.MISSION_START,this.startListener)},e}(),lD=uD,dD=function(e){try{var t=Ba(e),n=window.game.player,i=t.entryPointData||{},a=i.playerId,s=i.playerName,r=i.playerPhoto;return n.getPlayer().playerId===a?Pa:new mt.Z(a,s,r).toObject()}catch(o){return Pa}},pD=function(){return function(e){try{window.game.facebook.getTournamentAsync().then((function(t){e(tc(t))})).catch((function(e){}))}catch(t){}}},fD=function(){return function(e,t){try{var n=t(),i=Ba(n),a=window.game.player,s=a.getPlayer(),r=i.contextId,o=(i.entryPointData||{}).playerId,c=s.playerId===o,h=dD(n);c||a.updateConnectedPlayers([h]);var u=h.playerId;e(ac(r,u,!0))}catch(l){throw new Error("processInviteMode: "+l)}}},gD=function(){return function(e,t){try{var n=t(),i=Ba(n),a=window.game.player.getPlayer(),s=i.entryPointData||{},r=s.matchId,o=s.opponentId,c=s.playerId,h=a.playerId===c;e(rc(r,h?o:c))}catch(u){throw new Error("processChallengeFriendMode: "+u)}}},mD=function(){return function(e,t){try{var n=t(),i=Ba(n).entryPointData||{},s=i.playerId,r=i.playerScore;e(fo(s,{score:r,level:0}));var o=dD(n),c=(0,a.Z)({},o,{score:r});e(sc(c))}catch(h){throw new Error("processMatchingGroupMode: "+h)}}},vD=function(){return function(e){try{e(nc())}catch(t){throw new Error("processNewUserMode: "+t)}}},yD=n(647),AD={BACKGROUND:{KEY:"background",FILE:"./assets/music/bg_music.mp3"},EFFECTS:{KEY:"effects",FILE:"./assets/sounds/effects.mp3",JSON:"./assets/sounds/effects.json",PATH:"./assets/sounds/"}},ED=GameCore.Configs.Notification.ApiUrl,TD=function(){var e=(0,s.Z)(u().mark((function e(t){var n,i;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.playerId,e.next=3,(0,rt.v)("players/"+n,t,{},ED,10);case 3:return i=e.sent,e.abrupt("return",(null==i?void 0:i.data)||{});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();function CD(e,t){var n="undefined"!==typeof I()&&_()(e)||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){var n;if(!e)return;if("string"===typeof e)return SD(e,t);var i=T()(n=Object.prototype.toString.call(e)).call(n,8,-1);"Object"===i&&e.constructor&&(i=e.constructor.name);if("Map"===i||"Set"===i)return S()(e);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return SD(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var i=0;return function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function SD(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var bD=GameCore.Configs,ID=bD.AppId,wD=bD.Notification,_D=bD.Gameplay,xD=[hs.Z.SHUFFLE],PD=function(e){function t(){for(var t,n,i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];return(n=e.call.apply(e,P()(t=[this]).call(t,a))||this).loadAtlas32bitParameterQueues=[],n.i18nPromise=void 0,n.handleFBInstantGameStarted=function(){window.__fbGameReady=!0,window.__fbPlatform=FBInstant.getPlatform(),n.player.requestConnectedPlayers()},n.processAfterUpdatePlayerProfile=function(){wD.DisableSendNotification||(Bf.sendNewUserNotification(),Bf.sendDailyNotification())},n.startGame=function(){n.analytics.event(yn._.APP_READY),n.storage.dispatch((0,yD.I)(za.C.LOAD_SCENE)),n.storage.dispatch((function(e,t){var n=window.game,i=n.player,a=n.analytics,s=n.globalScene;try{var r=t(),o=Ba(r),c=Da(r),h=i.getPlayer(),u=(o.entryPointData||{}).type;if(h.isUserNew&&a.event(yn._.NEW_USER),c===Ra)return void e(pD());if(c===Oa){if(u===Ia)return void e(fD());if(u===wa)return void e(gD())}if(c===La)return void e(mD());if(h.isUserNew)return void e(vD());if(c===ka)return void e(nc());s.events.emit(za.K.SWITCH,za.C.DASHBOARD_SCENE)}catch(l){s.events.emit(za.K.SWITCH,za.C.DASHBOARD_SCENE)}}))},n.handleLoadMusicCompleted=function(){n.audio.initMusic(AD.BACKGROUND.KEY),!!n.game.player.getPlayerSetting("music")&&n.audio.playMusic()},n}(0,r.Z)(t,e);var n=t.prototype;return n.preload=function(){var e,t=this;this.facebook.progressLoading.loadingProgressFbLoadScene(),this.analytics.event(yn._.SCREEN_OPEN,{screen_name:"LoadScene"}),this.load.on("progress",(function(e){t.facebook.progressLoading.onProgress(e)})),this.load.on(Phaser.Loader.Events.FILE_LOAD_ERROR,(function(e){var t=new VR("Load resources at LoadScene failed.");(0,he.R0)(t,{file:null==e?void 0:e.url})}));var n=this.theme.getCurrentThemeResources(),i=n.backgroundKey,a=n.backgroundFile,s=n.cardFaceKey,r=n.cardFaceTexture,o=n.cardFaceJSON,c=this.theme.getThemeResources(0,0),h=c.backgroundKey,u=c.backgroundFile;this.theme.updateCurrentCardStyle(),this.load.image(i,a),this.load.image(h,u),this.load.atlas({key:s,textureURL:r,atlasURL:o}),this.load.multiatlas({key:An.Z.EFFECTS.KEY,path:An.Z.EFFECTS.PATH,atlasURL:An.Z.EFFECTS.JSON});var l=this.world.isLandscape()?An.Z.JOURNEY_LANDSCAPE:An.Z.JOURNEY;if(_D.ForceJourneyMode&&this.load.atlas({key:l.KEY,textureURL:l.TEXTURE,atlasURL:l.JSON}),this.world.isLandscape()?(this.load.atlas({key:An.Z.GAMEPLAY_DEFAULT_LANDSCAPE.KEY,textureURL:An.Z.GAMEPLAY_DEFAULT_LANDSCAPE.TEXTURE,atlasURL:An.Z.GAMEPLAY_DEFAULT_LANDSCAPE.JSON}),this.load.atlas({key:An.Z.HOW_TO_PLAY_LANDSCAPE.KEY,textureURL:An.Z.HOW_TO_PLAY_LANDSCAPE.TEXTURE,atlasURL:An.Z.HOW_TO_PLAY_LANDSCAPE.JSON})):(this.load.atlas({key:An.Z.HOW_TO_PLAY.KEY,textureURL:An.Z.HOW_TO_PLAY.TEXTURE,atlasURL:An.Z.HOW_TO_PLAY.JSON}),this.load.multiatlas({key:An.Z.GAMEPLAY_DEFAULT.KEY,atlasURL:An.Z.GAMEPLAY_DEFAULT.JSON,path:An.Z.GAMEPLAY_DEFAULT.PATH})),this.load.atlas({key:An.Z.CARD_BACK.KEY,textureURL:An.Z.CARD_BACK.TEXTURE,atlasURL:An.Z.CARD_BACK.JSON}),this.load.atlas({key:An.Z.LANGUAGES.KEY,textureURL:An.Z.LANGUAGES.TEXTURE,atlasURL:An.Z.LANGUAGES.JSON}),this.load.text("draw1/level1","assets/levels/draw1/level1.txt"),this.load.text("draw3/level1","assets/levels/draw3/level1.txt"),GameCore.Configs.Gameplay.ForceJourneyMode){var d=this.journey.getSeasonConfigPlayerCurrentlyIn(new Date)||{id:"",levelsUrl:""};this.load.json(d.id,d.levelsUrl)}this.textStyler.addFont({type:"local",fontType:"woff",fontName:gc.Z.FONT_FAMILY});var p=this.player.getPlayerSetting("language"),f=null==(e=FBInstant.getLocale())?void 0:e.split("_")[0],g=["ru","en","tr","zh","de","es","id","it","ja","pt","fr"],m=p||f||"en";be()(g).call(g,m)||(m="en"),this.i18nPromise=this.lang.initI18n(this,{language:m,fallbackLanguage:"en",supportLanguages:g,atlasFonts:[{atlasKey:gc.Z.ATLAS.KEY,fonts:[gc.Z.PRIMARY.KEY,gc.Z.BOLD.KEY,gc.Z.BOLD_SHADOW.KEY,gc.Z.BOLD_SHADOW_BLUR.KEY]}]});for(var v,y=CD(xD);!(v=y()).done;){var A=v.value;""!=A&&this.load.audio(A,[AD.EFFECTS.PATH+A+".ogg",AD.EFFECTS.PATH+A+".mp3"])}this.player.updateData().then(this.processAfterUpdatePlayerProfile).catch(he.tO)},n.create=function(){var e=(0,s.Z)(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.i18nPromise;case 2:return this.audio.initSound(),this.audio.importSoundEffectKeys(AD.EFFECTS),this.analytics.event(yn._.LOAD_COMPLETE),e.next=7,this.handleShowAdWhenStartGame();case 7:this.facebook.on("startgame",this.handleFBInstantGameStarted),this.facebook.gameStarted(),this.journey.updateJourney(!0),this.setupGlobalScene(),this.lazyLoadResource(),this.startGame();case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.updatePlayerProfileToNotificationService=function(){var e=this.player.getPlayer(),t=e.playerId,n=e.name,i=e.photo,a=e.locale,s=e.ASID;TD({appId:ID,playerId:t,name:n,photo:i,locale:a,ASID:s})},n.setupGlobalScene=function(){var e=this.scene.get(za.C.GLOBAL_SCENE);e instanceof bL.Z&&e.setup()},n.initModules=function(){new lD(this.game),new SB(this.game)},n.lazyLoadResource=function(){var e=this;setTimeout((function(){var t=e.world.isLandscape()?An.Z.JOURNEY_LANDSCAPE:An.Z.JOURNEY;e.scene.wake(),e.loadSounds(),e.load32bitTextures(),_D.ForceJourneyMode||e.load.atlas({key:t.KEY,textureURL:t.TEXTURE,atlasURL:t.JSON}),e.load.atlas({key:An.Z.THEME_PREVIEW.KEY,textureURL:An.Z.THEME_PREVIEW.TEXTURE,atlasURL:An.Z.THEME_PREVIEW.JSON}),e.load.on(Phaser.Loader.Events.FILE_COMPLETE,(function(n){if(!_D.ForceJourneyMode&&n==t.KEY){var i=e.scene.get(za.C.GAME_SCENE);i&&i.handleAfterLoadJourneyTexture()}if(n===An.Z.THEME_PREVIEW.KEY){var a=e.scene.get(za.C.GAME_SCENE);a&&a.handleAfterLoadThemePreviewTexture()}})),e.load.once(Phaser.Loader.Events.COMPLETE,(function(){e.scene.sleep(),e.load.off(Phaser.Loader.Events.FILE_COMPLETE)}))}),1e3)},n.loadSounds=function(){var e=Phaser.Loader.Events.FILE_KEY_COMPLETE;this.load.once(e+"audio-"+AD.BACKGROUND.KEY,this.handleLoadMusicCompleted);for(var t=hs.Z,n=0,i=ie()(hs.Z);n<i.length;n++){var a=t[i[n]];""!=a&&(be()(xD).call(xD,a)||this.load.audio(a,[AD.EFFECTS.PATH+a+".ogg",AD.EFFECTS.PATH+a+".mp3"]))}this.load.start()},n.loadWideframesResource=function(){this.frameCapture.preload({"wide-frame-share":"./assets/wideframes/wide-frame-share.jpg","wide-frame-message-win":"./assets/wideframes/wide-frame-message-win.png","wide-frame-game-result":"./assets/wideframes/wide-frame-game-result.png"})},n.handleShowAdWhenStartGame=function(){var e=this;if(!GameCore.Configs.Ads.InterstitialAdOptions.showWhenStartGame)return c().resolve();var t=this.time.now,n=GameCore.Utils.Device.isDesktop()?4e3:7e3;GameCore.Utils.Valid.isDebugger()&&(n=0);var i=Math.max(n-t,10),a={en:"Initializing...",ru:"\u0418\u043d\u0438\u0446\u0438\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u044f...",pt:"Inicializando...",es:"Inicializando...",ar:"\u062a\u0647\u064a\u0626\u0629...",hi:"\u092a\u094d\u0930\u093e\u0930\u0902\u092d \u0915\u0930 \u0930\u0939\u093e \u0939\u0948...",zh:"\u521d\u59cb\u5316\u4e2d...",tr:"Ba\u015flat\u0131l\u0131yor...",ja:"\u521d\u671f\u5316\u4e2d...",fr:"Initialisation en cours...",id:"Menginisialisasi...",de:"Initialisierung...",it:"Inizializzazione..."}[this.lang.language||""]||"",r=document.createElement("div");r.id="wait-ads-mask";var o=document.createElement("div");o.id="wait-ads-content",r.appendChild(o);var h=document.createElement("div");h.id="wait-ads-dual-ring",o.appendChild(h);var l=document.createElement("div");return l.id="wait-ads-text",l.innerHTML=a,o.appendChild(l),document.body.appendChild(r),this.audio.muteAll(),new(c())((function(t){setTimeout((0,s.Z)(u().mark((function n(){return u().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,e.audio.stopMusic(),e.audio.muteAll(),n.next=5,e.ads.preloadPreRollAdAsync();case 5:return n.next=7,e.ads.showPreRollAdAsync();case 7:n.next=12;break;case 9:n.prev=9,n.t0=n.catch(0),(0,he.tO)(n.t0);case 12:return n.prev=12,r.remove(),e.ads.preloadInterstitialAdAsync().catch((function(){})),e.audio.unmuteAll(),e.audio.playMusic(),t(),n.finish(12);case 19:case"end":return n.stop()}}),n,null,[[0,9,12,19]])}))),i)}))},n.loadBitmapFontFromAtlas=function(e,t,n,i,a,s){var r=this,o=e+"_data";return this.load.xml(o,i),this.load.once(Phaser.Loader.Events.COMPLETE,(function(){Phaser.GameObjects.BitmapText.ParseFromAtlas(r,e,t,n,o,a,s)})),this.load},n.load32bitTextures=function(){var e=this.world.isLandscape();this.loadAtlas32bitParameterQueues=[],e?this.loadAtlas32bit(An.Z.GAMEPLAY_DEFAULT_LANDSCAPE.KEY,An.Z.GAMEPLAY_DEFAULT_LANDSCAPE.TEXTURE,An.Z.GAMEPLAY_DEFAULT_LANDSCAPE.JSON):this.loadMultiAtlas32bit(An.Z.GAMEPLAY_DEFAULT.KEY,An.Z.GAMEPLAY_DEFAULT.JSON,An.Z.GAMEPLAY_DEFAULT.PATH)},n.loadImage32bit=function(e,t){var n=t.replace("8bit","32bit"),i=e+"-32bit";this.load.image(i,n),this.addEventOverride32BitTexture(i,e)},n.loadAtlas32bit=function(e,t,n){var i=t.replace("8bit","32bit"),a=n.replace("8bit","32bit"),s=e+"-32bit";this.load.atlas({key:s,textureURL:i,atlasURL:a}),this.addEventOverride32BitTexture(s,e)},n.loadMultiAtlas32bit=function(e,t,n){var i=t.replace("8bit","32bit"),a=n.replace("8bit","32bit"),s=e+"-32bit";this.load.multiatlas(s,i,a),this.addEventOverride32BitTexture(s,e)},n.addEventOverride32BitTexture=function(e,t){var n=this;this.load.on(Phaser.Loader.Events.FILE_COMPLETE,(function(i){if(i==e&&n.textures.exists(e)&&n.textures.exists(t)){var a=n.textures.get(e);if(n.textures.get(t).copy(a),0!==n.loadAtlas32bitParameterQueues.length){var s=n.loadAtlas32bitParameterQueues.shift();s&&n.loadAtlas32bit(s.key,s.texture,s.json)}}}))},t}(Phaser.Scene),kD=PD,OD=An.Z.DEFAULT,LD=OD.KEY,RD=OD.FRAME,BD=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n.avatar=void 0,n.crown=void 0,n.playerName=void 0,n.playerScore=void 0,n.scene=t,n.createAvatar(),n.updateSize(),n.createWinCrown(),n.createPlayerName(),n.createPlayerScore(),n.scene.add.existing((0,$a.Z)(n)),n}(0,r.Z)(t,e);var n=t.prototype;return n.showCrown=function(e){this.crown.setVisible(e),e?this.avatar.setFrame(RD.AVATAR_FRAME_YELLOW_BIG):this.avatar.setFrame(RD.AVATAR_FRAME_BLUE_BIG)},n.setPlayerName=function(e){this.playerName.setText(e)},n.setPlayerScore=function(e){this.playerScore.setText(""+e)},n.loadPhoto=function(e,t){this.avatar.loadPhoto(e,t,60)},n.updateSize=function(){var e=this.avatar,t=e.width,n=e.height;this.setSize(t,n)},n.createAvatar=function(){this.avatar=new vc(this.scene,{key:LD,frame:RD.AVATAR_FRAME_BLUE_BIG,background:RD.AVATAR_BG_BLUE_BIG,width:89,height:89}),this.add(this.avatar)},n.createWinCrown=function(){this.crown=this.scene.make.image({key:LD,frame:RD.ICON_CROWN}),this.crown.setWorldSize(52,36),Phaser.Display.Align.In.TopCenter(this.crown,this.avatar,0,75),this.add(this.crown)},n.createPlayerName=function(){this.playerName=this.scene.make.text({style:{fontFamily:gc.Z.FONT_FAMILY,fontSize:this.scene.fontSize(42)+"px",fontStyle:"bold"},origin:{x:.5,y:.5}}),this.playerName.setTint(11632207),this.playerName.setHighQuality(),Phaser.Display.Align.In.BottomCenter(this.playerName,this.avatar,0,25),this.add(this.playerName)},n.createPlayerScore=function(){this.playerScore=this.scene.make.bitmapText({size:this.scene.fontSize(30),font:gc.Z.PRIMARY.KEY,origin:{x:.5,y:.5}}),this.playerScore.setTint(6762627),Phaser.Display.Align.In.BottomCenter(this.playerScore,this.playerName,0,25),this.add(this.playerScore)},t}(Phaser.GameObjects.Container),DD=BD,ND=An.Z.DEFAULT,MD=ND.KEY,GD=ND.FRAME,ZD=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n.board=void 0,n.titleText=void 0,n.playerScore=void 0,n.opponentScore=void 0,n.buttonClose=void 0,n.buttonRestart=void 0,n.buttonShare=void 0,n.scene=t,n.createBoard(),n.createTitle(),n.createVSText(),n.createPlayers(),n.createRestartButton(),n.createShareButton(),n.scene.add.existing((0,$a.Z)(n)),n}(0,r.Z)(t,e);var n=t.prototype;return n.createBoard=function(){this.board=new th(this.scene,0,0,600,340),this.board.setDepth(gn.Z.BACKGROUND),this.add(this.board),Phaser.Display.Align.In.Center(this.board,this)},n.createTitle=function(){var e=this.scene.add.container(),t=this.scene.make.image({key:MD,frame:GD.RIBBON_FULL});t.setWorldSize(340,75),this.titleText=this.scene.make.bitmapText({font:gc.Z.PRIMARY.KEY,size:this.scene.fontSize(32),origin:{x:.5,y:.5}}),Phaser.Display.Align.In.Center(this.titleText,t,0,-10),this.buttonClose=new kc.Z(this.scene,MD,GD.BUTTON_CLOSE,41.8,41.8),this.buttonClose.setName("Close"),Phaser.Display.Align.In.RightCenter(this.buttonClose,t,0,-3),e.setDepth(gn.Z.TILE),e.add([t,this.titleText,this.buttonClose]),this.add(e),Phaser.Display.Align.In.Center(e,this.board,0,-170)},n.createVSText=function(){var e=this.scene.make.bitmapText({font:gc.Z.PRIMARY.KEY,size:this.scene.fontSize(70),text:"VS",origin:{x:.5,y:.5}});e.setTint(11632207),e.setDepth(gn.Z.TEXT),this.add(e),Phaser.Display.Align.In.Center(e,this.board,0,-45)},n.createPlayers=function(){this.playerScore=new DD(this.scene),this.playerScore.setDepth(gn.Z.ITEM),this.add(this.playerScore),Phaser.Display.Align.In.Center(this.playerScore,this.board,-100,-50),this.opponentScore=new DD(this.scene),this.opponentScore.setDepth(gn.Z.ITEM),this.add(this.opponentScore),Phaser.Display.Align.In.Center(this.opponentScore,this.board,100,-50)},n.createRestartButton=function(){this.buttonRestart=new Th.Z(this.scene,{key:MD,button:GD.BUTTON_GREEN,icon:GD.ICON_RESUME,text:"Restart"},170,72),this.buttonRestart.setName("Restart"),this.buttonRestart.setDepth(gn.Z.BUTTON),this.add(this.buttonRestart),Phaser.Display.Align.In.Center(this.buttonRestart,this.opponentScore,0,155)},n.createShareButton=function(){this.buttonShare=new Th.Z(this.scene,{key:MD,button:GD.BUTTON_BLUE,icon:GD.ICON_FLAT_SHARE,text:"Share"},153,72),this.buttonShare.setName("Restart"),this.buttonShare.setDepth(gn.Z.BUTTON),this.add(this.buttonShare),Phaser.Display.Align.In.Center(this.buttonShare,this.playerScore,0,155)},t}(Phaser.GameObjects.Container),FD=ZD,UD=function(e){function t(){for(var t,n,i=arguments.length,a=new Array(i),r=0;r<i;r++)a[r]=arguments[r];return(n=e.call.apply(e,P()(t=[this]).call(t,a))||this).main=void 0,n.run=function(){n.getResultInfo()},n.handleClose=function(){n.scene.sleep(za.C.RESULT_MATCH_SCENE),n.scene.run(za.C.GAME_OVER_SCENE)},n.handleShareScore=function(){n.storage.dispatch(Fo())},n.handleRestartMatch=function(){n.storage.dispatch(function(){var e=(0,s.Z)(u().mark((function e(t,n){var i,a,s,r;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,window.game.globalScene.screen.open(cs.o4.NOTIFY_SCREEN,{message:"loading",loading:!0}),a=n(),s=er(a),tn()(i=[ka,Ra]).call(i,s)>=0&&(t(ao()),t(to())),r=null,s===Oa&&(r=_r(a),t({type:mi,payload:{}})),t(po()),e.next=11,t(hc(s,r));case 11:e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),(0,he.tO)(e.t0);case 16:return e.prev=16,ec(300),e.finish(16);case 19:case"end":return e.stop()}}),e,null,[[0,13,16,19]])})));return function(t,n){return e.apply(this,arguments)}}()),n.scene.sleep(za.C.RESULT_MATCH_SCENE),n.scene.sleep(za.C.GAME_OVER_SCENE)},n}(0,r.Z)(t,e);var n=t.prototype;return n.preload=function(){this.events.on("wake",this.run),this.events.on("create",this.run)},n.create=function(){e.prototype.create.call(this),this.createMask(.8),this.createMain(),this.createInput()},n.getResultInfo=function(){var e=this.storage.getState(),t=Rr(e),n=er(e),i=this.player.getPlayer(),a=i.photo,s=i.name,r=i.playerId,o=_r(e),c=o.playerId,h=o.name,u=o.photo,l=(t[r]||{}).score,d=void 0===l?0:l,p=(t[c]||{}).score,f=void 0===p?0:p,g=Pr(e,{playerId:r}),m=kr(e,{opponentId:c});n===La&&(g=!0,m=!0);var v=g&&m;this.main.playerScore.loadPhoto(r,a),this.main.opponentScore.loadPhoto(c,u),this.main.playerScore.setPlayerName(s),this.main.opponentScore.setPlayerName(h),this.main.playerScore.setPlayerScore(d),this.main.opponentScore.setPlayerScore(f),this.main.playerScore.showCrown(v&&d>f),this.main.opponentScore.showCrown(v&&f>d),g&&m?d===f?this.main.titleText.setText("Draw"):d>f?this.main.titleText.setText("You Win"):d<f&&this.main.titleText.setText("You Lose"):this.main.titleText.setText("Waiting for Opponent"),g&&m&&(d===f||(d>f?this.audio.playSound(hs.Z.YOU_WIN):d<f&&this.audio.playSound(hs.Z.YOU_LOSE)))},n.createMain=function(){this.main=new FD(this),Phaser.Display.Align.In.Center(this.main,this.gameZone,0,13)},n.createInput=function(){this.main.buttonClose.onClick=this.handleClose,this.main.buttonRestart.onClick=this.handleRestartMatch,this.main.buttonShare.onClick=this.handleShareScore},t}(Xa.Z);var zD=UD,WD=n(564),YD=n(348),HD=function(e){function t(){for(var t,n,i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];return(n=e.call.apply(e,P()(t=[this]).call(t,a))||this).config=void 0,n.promisesLoadFonts={},n.promisesLoadAtlas={},n.promisesLoadXml={},n}(0,r.Z)(t,e);var n=t.prototype;return n.getFontKey=function(e,t){return e.replace("{{locale}}",t||this.language)},n.initI18n=function(e,t){var n=this;this.config=(0,a.Z)({fallbackLanguage:"en",fontKeys:[],atlasFonts:[],supportLanguages:["en"]},t);var i=[new(c())((function(t){e.i18n.initialize({fallbackLng:n.config.fallbackLanguage,loadPath:"assets/i18n/{{lng}}/{{ns}}.json",debug:GameCore.Utils.Valid.isDebugger(),languages:n.config.supportLanguages,interpolation:{escapeValue:!1}},(function(){n.changeLanguage(n.config.language).then((function(){t()}))}))}))];return new(c())((function(e){c().all(i).then((function(){return e()}))}))},n.changeLanguage=function(e){var t;if(!be()(t=this.supportedLanguages).call(t,e))return c().resolve();var n=this.preloadLanguageResource(this.game.globalScene,e);return new(c())((function(t){n.then((function(){YD.ZP.changeLanguage(e).then((function(){t()})).catch((function(){t()}))})).catch((function(){t()})).finally((function(){}))}))},n.preloadLanguageResource=function(e,t){var n=this,i=this.config,a=i.fontKeys,s=i.atlasFonts,r=[];return Be()(a).call(a,(function(i){return r.push(n.preloadBitmapFont(e,i,t))})),Be()(s).call(s,(function(i){var a=i.atlasKey,s=i.fonts;r.push(n.preloadAtlas(e,a,t)),Be()(s).call(s,(function(i){return r.push(n.preloadBitmapFontFromAtlas(e,i,a,t))}))})),e.load.start(),r.push(YD.ZP.loadLanguages(t)),new(c())((function(e){c().all(r).then((function(){return e()}))}))},n.preloadBitmapFont=function(e,t,n){var i=this,a=t.replace("-{{locale}}",""),s=this.getFontKey(t,n);if(this.game.cache.bitmapFont.exists(s))return c().resolve();if(void 0!==this.promisesLoadFonts[s])return this.promisesLoadFonts[s];var r="assets/fonts/"+n+"/"+a+".png",o="assets/fonts/"+n+"/"+a+".xml";e.load.bitmapFont(s,r,o);var h=new(c())((function(t){var n=e.tweens.addCounter({duration:100,loop:-1,onLoop:function(){i.game.cache.bitmapFont.exists(s)&&(n.remove(),t())}})}));return this.promisesLoadFonts[a]=h,h},n.preloadBitmapFontFromAtlas=function(e,t,n,i){var a=this,s=t.replace("-{{locale}}",""),r=this.getFontKey(t,i),o=n.replace("-{{locale}}",i),h=r+"_data",u="assets/fonts/"+i+"/"+s+".xml";if(this.game.cache.xml.exists(h)&&this.game.textures.exists(o))return c().resolve();if(void 0!==this.promisesLoadXml[h])return this.promisesLoadXml[h];e.load.xml(h,u);var l=new(c())((function(n){var i=e.tweens.addCounter({duration:50,loop:-1,onLoop:function(){if(a.game.cache.xml.exists(h)&&a.game.textures.exists(o)){i.remove(),a.game.cache.bitmapFont.exists(t)||Phaser.GameObjects.BitmapText.ParseFromAtlas(e,t,o,s,h);Phaser.GameObjects.BitmapText.ParseFromAtlas(e,r,o,s,h);n()}}})}));return this.promisesLoadXml[h]=l,l},n.preloadAtlas=function(e,t,n){var i=this,a=t.replace("-{{locale}}",n),s=t.replace("-{{locale}}",""),r="assets/fonts/"+n+"/"+s+".png",o="assets/fonts/"+n+"/"+s+".json";if(this.game.textures.exists(a))return c().resolve();if(void 0!==this.promisesLoadAtlas[a])return this.promisesLoadAtlas[a];e.load.atlas(a,r,o);var h=new(c())((function(t){var n=e.tweens.addCounter({duration:50,loop:-1,onLoop:function(){i.game.textures.exists(a)&&(n.remove(),t())}})}));return this.promisesLoadAtlas[a]=h,h},(0,ce.Z)(t,[{key:"supportedLanguages",get:function(){var e;return P()(e=[]).call(e,this.config.supportLanguages)}},{key:"fallbackLanguage",get:function(){return this.config.fallbackLanguage}},{key:"language",get:function(){return YD.ZP.language}},{key:"languageIndex",get:function(){var e;return tn()(e=this.supportedLanguages).call(e,this.language)}}]),t}(Phaser.Plugins.BasePlugin),KD=HD,jD=n(559),VD=n(618),JD={Mobile:{Background:["bg-0","bg-1","bg-2","bg-3","bg-4","bg-5"],CardFace:["card-style-3","card-style-0","card-style-1","card-style-2"],CardBack:["card-back-0","card-back-1","card-back-2","card-back-3","card-back-4"]},Desktop:{Background:["bg-desktop-0","bg-desktop-1","bg-desktop-2","bg-desktop-3","bg-desktop-4"],CardFace:["card-style-3","card-style-0","card-style-1","card-style-2","card-style-desktop-0"],CardBack:["card-back-0","card-back-1","card-back-2","card-back-3","card-back-4"]}},XD=Uu(),qD=GameCore.world.isLandscape()?"desktop":XD+"x",QD={Background:{File:"./assets/images/"+XD+"x/{}.jpg"},CardFaceAtlas:{Texture:"./assets/textures/"+qD+"/{}.png",JSON:"./assets/textures/"+qD+"/{}.json"}},$D=QD.Background,eN=QD.CardFaceAtlas,tN=function(e){function t(){for(var t,n,i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];return(n=e.call.apply(e,P()(t=[this]).call(t,a))||this).events=void 0,n.device=void 0,n.backgroundIdx=void 0,n.cardFaceIdx=void 0,n.cardBackIdx=void 0,n}(0,r.Z)(t,e);var n=t.prototype;return n.init=function(t){e.prototype.init.call(this,t),this.events=new Phaser.Events.EventEmitter},n.config=function(){this.device=this.game.world.isLandscape()?"desktop":"mobile"},n.getCurrentThemeResources=function(){var e=this.getCurrentIdxConfig(),t=e.backgroundIdx,n=e.cardFaceIdx;return this.getThemeResources(t,n)},n.getThemeResources=function(e,t){var n="desktop"===this.device?JD.Desktop:JD.Mobile,i=n.Background[e]||n.Background[0],a=(0,VD.Z)($D.File,[i]),s=n.CardFace[t]||n.CardFace[0];return{backgroundKey:i,backgroundFile:a,cardFaceKey:s,cardFaceTexture:(0,VD.Z)(eN.Texture,[s]),cardFaceJSON:(0,VD.Z)(eN.JSON,[s])}},n.getBackgroundConfigs=function(){var e,t="desktop"===this.device?JD.Desktop:JD.Mobile;return Be()(e=t.Background).call(e,(function(e){return{key:e,url:(0,VD.Z)($D.File,[e])}}))},n.getCardStyleAtlasConfigs=function(){var e,t="desktop"===this.device?JD.Desktop:JD.Mobile;return Be()(e=t.CardFace).call(e,(function(e){return{key:e,textureURL:(0,VD.Z)(eN.Texture,[e]),atlasURL:(0,VD.Z)(eN.JSON,[e])}}))},n.getCurrentThemeConfig=function(){var e=this.backgroundIdx,t=this.cardFaceIdx,n=this.cardBackIdx;return"desktop"==this.device?{backgroundKey:JD.Desktop.Background[e],cardFaceKey:JD.Desktop.CardFace[t],cardBackFrame:JD.Desktop.CardBack[n]}:{backgroundKey:JD.Mobile.Background[e],cardFaceKey:JD.Mobile.CardFace[t],cardBackFrame:JD.Mobile.CardBack[n]}},n.getThemeDefaultConfig=function(){return"desktop"==this.device?{backgroundKey:JD.Desktop.Background[0],cardFaceKey:JD.Desktop.CardFace[0],cardBackFrame:JD.Desktop.CardBack[0]}:{backgroundKey:JD.Mobile.Background[0],cardFaceKey:JD.Mobile.CardFace[0],cardBackFrame:JD.Mobile.CardBack[0]}},n.getCurrentIdxConfig=function(){var e=this.game.player.getPlayerSettings(),t=e.backgroundDesktopIdx,n=e.cardFaceDesktopIdx,i=e.cardBackDesktopIdx,a=e.backgroundIdx,s=e.cardFaceIdx,r=e.cardBackIdx;return"desktop"==this.device?{backgroundIdx:t,cardFaceIdx:n,cardBackIdx:i}:{backgroundIdx:a,cardFaceIdx:s,cardBackIdx:r}},n.getThemePreview=function(){return"desktop"===this.device?JD.Desktop:JD.Mobile},n.changeBackground=function(e){"desktop"==this.device?this.game.player.setSetting("backgroundDesktopIdx",e):this.game.player.setSetting("backgroundIdx",e),this.backgroundIdx=e},n.changeCardFace=function(e){"desktop"==this.device?this.game.player.setSetting("cardFaceDesktopIdx",e):this.game.player.setSetting("cardFaceIdx",e),this.cardFaceIdx=e},n.changeCardBack=function(e){"desktop"==this.device?this.game.player.setSetting("cardBackDesktopIdx",e):this.game.player.setSetting("cardBackIdx",e),this.cardBackIdx=e},n.updateCurrentCardStyle=function(){var e=this.getCurrentIdxConfig(),t=e.backgroundIdx,n=e.cardFaceIdx,i=e.cardBackIdx;this.setCurrentStyle(t,n,i)},n.setCurrentStyle=function(e,t,n){this.backgroundIdx=e,this.cardFaceIdx=t,this.cardBackIdx=n},t}(Phaser.Plugins.BasePlugin),nN=tN,iN=function(e){function t(t){var n;return(n=e.call(this,{game:t,fragShader:"\nprecision mediump float;\n\nuniform sampler2D uMainSampler[%count%];\nuniform float gray;\n\nvarying vec2 outTexCoord;\nvarying float outTexId;\nvarying vec4 outTint;\nvarying vec2 fragCoord;\n\nvoid main()\n{\n    vec4 texture;\n\n    %forloop%\n\n    gl_FragColor = texture;\n    gl_FragColor.rgb = mix(gl_FragColor.rgb, vec3(0.2126 * gl_FragColor.r + 0.7152 * gl_FragColor.g + 0.0722 * gl_FragColor.b), gray);\n}",uniforms:["uProjectionMatrix","uMainSampler","gray"]})||this).gray=void 0,n.gray=.8,n}return(0,r.Z)(t,e),t.prototype.onPreRender=function(){this.set1f("gray",this.gray)},t}(Phaser.Renderer.WebGL.Pipelines.MultiPipeline);var aN={UPDATE_NEW_LEVEL:"update-new-level"},sN=JSON.parse('[{"id":"journey-season-1","count":52,"startTime":"2023-01-01T17:00:00.000Z","endTime":"2023-01-08T17:00:00.000Z","levelsUrl":"assets/levels/journey/season_1.json"},{"id":"journey-season-2","count":52,"startTime":"2023-01-08T17:00:00.000Z","endTime":"2023-01-15T17:00:00.000Z","levelsUrl":"assets/levels/journey/season_2.json"},{"id":"journey-season-3","count":52,"startTime":"2023-01-15T17:00:00.000Z","endTime":"2023-01-22T17:00:00.000Z","levelsUrl":"assets/levels/journey/season_3.json"},{"id":"journey-season-4","count":52,"startTime":"2023-01-22T17:00:00.000Z","endTime":"2023-01-29T17:00:00.000Z","levelsUrl":"assets/levels/journey/season_4.json"},{"id":"journey-season-5","count":52,"startTime":"2023-01-29T17:00:00.000Z","endTime":"2023-02-05T17:00:00.000Z","levelsUrl":"assets/levels/journey/season_5.json"},{"id":"journey-season-6","count":52,"startTime":"2023-02-05T17:00:00.000Z","endTime":"2023-02-12T17:00:00.000Z","levelsUrl":"assets/levels/journey/season_6.json"},{"id":"journey-season-7","count":52,"startTime":"2023-02-12T17:00:00.000Z","endTime":"2023-02-19T17:00:00.000Z","levelsUrl":"assets/levels/journey/season_7.json"},{"id":"journey-season-8","count":52,"startTime":"2023-02-19T17:00:00.000Z","endTime":"2023-02-26T17:00:00.000Z","levelsUrl":"assets/levels/journey/season_8.json"},{"id":"journey-season-9","count":52,"startTime":"2023-02-26T17:00:00.000Z","endTime":"2023-03-05T17:00:00.000Z","levelsUrl":"assets/levels/journey/season_9.json"},{"id":"journey-season-10","count":52,"startTime":"2023-03-05T17:00:00.000Z","endTime":"2023-03-12T17:00:00.000Z","levelsUrl":"assets/levels/journey/season_10.json"},{"id":"journey-season-11","count":52,"startTime":"2023-03-12T17:00:00.000Z","endTime":"2023-03-19T17:00:00.000Z","levelsUrl":"assets/levels/journey/season_11.json"},{"id":"journey-season-12","count":52,"startTime":"2023-03-19T17:00:00.000Z","endTime":"2023-03-26T17:00:00.000Z","levelsUrl":"assets/levels/journey/season_12.json"},{"id":"journey-season-13","count":52,"startTime":"2023-03-26T17:00:00.000Z","endTime":"2023-04-02T17:00:00.000Z","levelsUrl":"assets/levels/journey/season_13.json"},{"id":"journey-season-14","count":52,"startTime":"2023-04-02T17:00:00.000Z","endTime":"2023-04-09T17:00:00.000Z","levelsUrl":"assets/levels/journey/season_14.json"},{"id":"journey-season-15","count":52,"startTime":"2023-04-09T17:00:00.000Z","endTime":"2023-04-16T17:00:00.000Z","levelsUrl":"assets/levels/journey/season_15.json"},{"id":"journey-season-16","count":52,"startTime":"2023-04-16T17:00:00.000Z","endTime":"2023-04-23T17:00:00.000Z","levelsUrl":"assets/levels/journey/season_16.json"},{"id":"journey-season-17","count":52,"startTime":"2023-04-23T17:00:00.000Z","endTime":"2023-04-30T17:00:00.000Z","levelsUrl":"assets/levels/journey/season_17.json"},{"id":"journey-season-18","count":52,"startTime":"2023-04-30T17:00:00.000Z","endTime":"2023-05-07T17:00:00.000Z","levelsUrl":"assets/levels/journey/season_18.json"},{"id":"journey-season-19","count":52,"startTime":"2023-05-07T17:00:00.000Z","endTime":"2023-05-14T17:00:00.000Z","levelsUrl":"assets/levels/journey/season_19.json"},{"id":"journey-season-20","count":52,"startTime":"2023-05-14T17:00:00.000Z","endTime":"2023-05-21T17:00:00.000Z","levelsUrl":"assets/levels/journey/season_20.json"},{"id":"journey-season-21","count":52,"startTime":"2023-05-21T17:00:00.000Z","endTime":"2023-05-28T17:00:00.000Z","levelsUrl":"assets/levels/journey/season_21.json"},{"id":"journey-season-22","count":52,"startTime":"2023-05-28T17:00:00.000Z","endTime":"2023-06-04T17:00:00.000Z","levelsUrl":"assets/levels/journey/season_22.json"},{"id":"journey-season-23","count":52,"startTime":"2023-06-04T17:00:00.000Z","endTime":"2023-06-11T17:00:00.000Z","levelsUrl":"assets/levels/journey/season_23.json"},{"id":"journey-season-24","count":52,"startTime":"2023-06-11T17:00:00.000Z","endTime":"2023-06-18T17:00:00.000Z","levelsUrl":"assets/levels/journey/season_24.json"},{"id":"journey-season-25","count":52,"startTime":"2023-06-18T17:00:00.000Z","endTime":"2023-06-25T17:00:00.000Z","levelsUrl":"assets/levels/journey/season_25.json"},{"id":"journey-season-26","count":52,"startTime":"2023-06-25T17:00:00.000Z","endTime":"2023-07-02T17:00:00.000Z","levelsUrl":"assets/levels/journey/season_26.json"},{"id":"journey-season-27","count":52,"startTime":"2023-07-02T17:00:00.000Z","endTime":"2023-07-09T17:00:00.000Z","levelsUrl":"assets/levels/journey/season_27.json"},{"id":"journey-season-28","count":52,"startTime":"2023-07-09T17:00:00.000Z","endTime":"2023-07-16T17:00:00.000Z","levelsUrl":"assets/levels/journey/season_28.json"},{"id":"journey-season-29","count":52,"startTime":"2023-07-16T17:00:00.000Z","endTime":"2023-07-23T17:00:00.000Z","levelsUrl":"assets/levels/journey/season_29.json"},{"id":"journey-season-30","count":52,"startTime":"2023-07-23T17:00:00.000Z","endTime":"2023-07-30T17:00:00.000Z","levelsUrl":"assets/levels/journey/season_30.json"},{"id":"journey-season-31","count":52,"startTime":"2023-07-30T17:00:00.000Z","endTime":"2023-08-06T17:00:00.000Z","levelsUrl":"assets/levels/journey/season_31.json"},{"id":"journey-season-32","count":52,"startTime":"2023-08-06T17:00:00.000Z","endTime":"2023-08-13T17:00:00.000Z","levelsUrl":"assets/levels/journey/season_32.json"},{"id":"journey-season-33","count":52,"startTime":"2023-08-13T17:00:00.000Z","endTime":"2023-08-20T17:00:00.000Z","levelsUrl":"assets/levels/journey/season_33.json"},{"id":"journey-season-34","count":52,"startTime":"2023-08-20T17:00:00.000Z","endTime":"2023-08-27T17:00:00.000Z","levelsUrl":"assets/levels/journey/season_34.json"},{"id":"journey-season-35","count":52,"startTime":"2023-08-27T17:00:00.000Z","endTime":"2023-09-03T17:00:00.000Z","levelsUrl":"assets/levels/journey/season_35.json"},{"id":"journey-season-36","count":52,"startTime":"2023-09-03T17:00:00.000Z","endTime":"2023-09-10T17:00:00.000Z","levelsUrl":"assets/levels/journey/season_36.json"},{"id":"journey-season-37","count":52,"startTime":"2023-09-10T17:00:00.000Z","endTime":"2023-09-17T17:00:00.000Z","levelsUrl":"assets/levels/journey/season_37.json"},{"id":"journey-season-38","count":52,"startTime":"2023-09-17T17:00:00.000Z","endTime":"2023-09-24T17:00:00.000Z","levelsUrl":"assets/levels/journey/season_38.json"},{"id":"journey-season-39","count":52,"startTime":"2023-09-24T17:00:00.000Z","endTime":"2023-10-01T17:00:00.000Z","levelsUrl":"assets/levels/journey/season_39.json"},{"id":"journey-season-40","count":52,"startTime":"2023-10-01T17:00:00.000Z","endTime":"2023-10-08T17:00:00.000Z","levelsUrl":"assets/levels/journey/season_40.json"},{"id":"journey-season-41","count":52,"startTime":"2023-10-08T17:00:00.000Z","endTime":"2023-10-15T17:00:00.000Z","levelsUrl":"assets/levels/journey/season_41.json"},{"id":"journey-season-42","count":52,"startTime":"2023-10-15T17:00:00.000Z","endTime":"2023-10-22T17:00:00.000Z","levelsUrl":"assets/levels/journey/season_42.json"},{"id":"journey-season-43","count":52,"startTime":"2023-10-22T17:00:00.000Z","endTime":"2023-10-29T17:00:00.000Z","levelsUrl":"assets/levels/journey/season_43.json"},{"id":"journey-season-44","count":52,"startTime":"2023-10-29T17:00:00.000Z","endTime":"2023-11-05T17:00:00.000Z","levelsUrl":"assets/levels/journey/season_44.json"},{"id":"journey-season-45","count":52,"startTime":"2023-11-05T17:00:00.000Z","endTime":"2023-11-12T17:00:00.000Z","levelsUrl":"assets/levels/journey/season_45.json"},{"id":"journey-season-46","count":52,"startTime":"2023-11-12T17:00:00.000Z","endTime":"2023-11-19T17:00:00.000Z","levelsUrl":"assets/levels/journey/season_46.json"},{"id":"journey-season-47","count":52,"startTime":"2023-11-19T17:00:00.000Z","endTime":"2023-11-26T17:00:00.000Z","levelsUrl":"assets/levels/journey/season_47.json"},{"id":"journey-season-48","count":52,"startTime":"2023-11-26T17:00:00.000Z","endTime":"2023-12-03T17:00:00.000Z","levelsUrl":"assets/levels/journey/season_48.json"},{"id":"journey-season-49","count":52,"startTime":"2023-12-03T17:00:00.000Z","endTime":"2023-12-10T17:00:00.000Z","levelsUrl":"assets/levels/journey/season_49.json"},{"id":"journey-season-50","count":52,"startTime":"2023-12-10T17:00:00.000Z","endTime":"2023-12-17T17:00:00.000Z","levelsUrl":"assets/levels/journey/season_50.json"},{"id":"journey-season-51","count":52,"startTime":"2023-12-17T17:00:00.000Z","endTime":"2023-12-24T17:00:00.000Z","levelsUrl":"assets/levels/journey/season_51.json"},{"id":"journey-season-52","count":52,"startTime":"2023-12-24T17:00:00.000Z","endTime":"2023-12-31T17:00:00.000Z","levelsUrl":"assets/levels/journey/season_52.json"},{"id":"journey-season-53","count":52,"startTime":"2023-12-24T17:00:00.000Z","endTime":"2023-12-31T17:00:00.000Z","levelsUrl":"assets/levels/journey/season_53.json"}]'),rN={level:2,type:Ru.COMPLETE_GAME,boardData:{seed:"9TJfXCcEA1",draw3:!1},limitMechanic:{type:Lu.MOVES,value:520},cardStats:[]},oN=GameCore.Configs.Gameplay,cN="journey-season-",hN=function(e){function t(){for(var t,n,i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];return(n=e.call.apply(e,P()(t=[this]).call(t,a))||this).config=void 0,n.currentLevel=1,n.season=cN+"1",n.events=void 0,n.playingCurrentLevel=!1,n.promisePreloadSeason={},n.loadedSeason={},n.forceJourneyMode=oN.ForceJourneyMode,n}(0,r.Z)(t,e);var n=t.prototype;return n.init=function(t){e.prototype.init.call(this,t),this.events=new Phaser.Events.EventEmitter;var n=this.getAllSeasonConfigs();this.configure(n["journey-season-1"])},n.configure=function(e){this.config=e},n.preloadLevelDataAsync=function(){var e=(0,s.Z)(u().mark((function e(t){var n,i,a;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.id,!be()(n=ie()(this.promisePreloadSeason)).call(n,i)&&(this.promisePreloadSeason[i]=this.preloadLevel(t.levelsUrl)),e.next=5,this.promisePreloadSeason[i];case 5:if(a=e.sent){e.next=12;break}return delete this.promisePreloadSeason[i],this.promisePreloadSeason[i]=this.preloadLevel(t.levelsUrl),e.abrupt("return",this.promisePreloadSeason[i]);case 12:return this.loadedSeason[i]=a,e.abrupt("return",a);case 14:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.preloadLevel=function(){var e=(0,s.Z)(u().mark((function e(t){var n,i;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(""+t,{method:"GET"});case 3:return i=e.sent,e.next=6,i.json();case 6:n=e.sent,e.next=12;break;case 9:return e.prev=9,e.t0=e.catch(0),e.abrupt("return",void 0);case 12:return e.abrupt("return",n);case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}(),n.getKeyLevel=function(e){return"season_"+e},n.canUpdateNewSeason=function(e){var t=this.getSeasonConfigPlayerCurrentlyIn(e);return!!t&&t.id!==this.getSeason()},n.getSeasonConfigPlayerCurrentlyIn=function(e){var t=this.getAllSeasonConfigs(),n=this.game.player.getJourneyLevel2(),i=this.forceJourneyMode?Math.floor((n/52+1)%52):(0,ls.uW)(e),a=cN+i;return t[a]?t[a]:null},n.getAllSeasonConfigs=function(){for(var e={},t=(0,ls.H8)(),n=0;n<sN.length;n++){var i=sN[n].id,s=O()(i.split("-")[2]);e[i]=(0,a.Z)({},sN[n],{startTime:(0,ls.wu)(s,t),endTime:(0,ls.Hx)(s,t)})}return e},n.resetNewSeason=function(){this.setCurrentLevel(1)},n.getSeason=function(){return this.season=this.config.id,this.season},n.getCurrentSeasonConfig=function(){return this.config},n.increaseSeason=function(){var e=function(e){var t=e.match(/(\d+)/);return t?O()(t[1],10):null}(this.getSeason());if(null===e)return!1;var t=cN+(e+1);return!!this.getAllSeasonConfigs()[t]&&this.setSeason(t)},n.setSeason=function(e){return!this.isPlayingCurrentLevel()&&(this.game.player.setCustomData("journeySeason",e),!0)},n.getTimeStart=function(){return this.config.startTime.getTime()/1e3},n.getTimeEnd=function(){return this.config.endTime.getTime()/1e3},n.getCurrentLevel=function(){return this.currentLevel},n.getLevelCountInForceMode=function(){return 1e3},n.getLevelCount=function(){var e;if(this.forceJourneyMode)return this.getLevelCountInForceMode();var t=(null!=(e=this.config)?e:{}).count;return void 0===t?52:t},n.setCurrentLevel=function(e){if(!cx()(e))return!1;if(e>this.getLevelCount()){var t=this.game.player.getNumberOfTrophy();this.game.player.setCustomData("numberOfTrophy",t+1)}return!(e<1)&&(this.currentLevel=e,this.events.emit(aN.UPDATE_NEW_LEVEL,e),this.forceJourneyMode?this.game.player.setCustomData("journeyLevel2",this.currentLevel):(this.game.player.setCustomData("journeyLevel",this.currentLevel),this.game.player.setCustomData("journeySeason",this.config.id)),!0)},n.outOfMissions=function(){return this.currentLevel>this.getLevelCount()},n.isCurrentLevelTheLast=function(){return this.getCurrentLevel()===this.getLevelCount()},n.incrementLevel=function(){return this.setCurrentLevel(this.currentLevel+1)},n.getConfig=function(){return this.config},n.isPlayingCurrentLevel=function(){return this.playingCurrentLevel},n.setIsPlayingCurrentLevel=function(e){void 0===e&&(e=!0),this.playingCurrentLevel!==e&&(this.playingCurrentLevel=e)},n.getCurrentSeasonMissions=function(){var e=this.getSeason(),t=this.loadedSeason[e];return null!=t?t:[]},n.getCurrentSeasonMissionsAsync=function(){var e=(0,s.Z)(u().mark((function e(t){var n;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.preloadLevelDataAsync(t);case 3:return n=e.sent,e.abrupt("return",n);case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return");case 10:case"end":return e.stop()}}),e,this,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),n.getJourneyName=function(){var e=this.config.id.split("-");return"Journey Season "+e[e.length-1]},n.getSeasonId=function(){var e=this.config.id.split("-");return O()(e[e.length-1])},n.getCurrentMission=function(){var e,t;return this.forceJourneyMode?null!=(e=this.getCurrentSeasonMissions()[(this.currentLevel-1)%52])?e:rN:null!=(t=this.getCurrentSeasonMissions()[this.currentLevel-1])?t:rN},n.updateJourney=function(){var e=(0,s.Z)(u().mark((function e(t){var n,i;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===t&&(t=!1),n=this.game.player,e.prev=2,this.config=this.getSeasonConfigPlayerCurrentlyIn(new Date)||this.config,!t||!this.forceJourneyMode){e.next=8;break}this.handleOnStart(),e.next=10;break;case 8:return e.next=10,this.preloadLevelDataAsync(this.config);case 10:e.next=15;break;case 12:return e.prev=12,e.t0=e.catch(2),e.abrupt("return");case 15:this.forceJourneyMode?this.currentLevel=n.getJourneyLevel2():(i=n.getPlayingJourneySeason(),this.currentLevel=i!=this.config.id?1:n.getJourneyLevel());case 16:case"end":return e.stop()}}),e,this,[[2,12]])})));return function(t){return e.apply(this,arguments)}}(),n.handleOnStart=function(){var e=this.game.cache.json.get(this.config.id);this.promisePreloadSeason[this.config.id]=c().resolve(e),this.loadedSeason[this.config.id]=e},t}(Phaser.Plugins.BasePlugin),uN=function(e){function t(){return e.apply(this,arguments)||this}return(0,r.Z)(t,e),t.prototype.performVibrating=function(e){this.game.player.getPlayerSettings().vibrate&&jP(e)},t}(Phaser.Plugins.BasePlugin),lN=uN,dN=function(e){function t(){for(var t,n,i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];return(n=e.call.apply(e,P()(t=[this]).call(t,a))||this).isVisible=!0,n.browserPrefixes=["moz","ms","o","","webkit"],n.visibleCallbacks=[],n.hiddenCallbacks=[],n.handleVisibilityChange=function(e){if("boolean"===typeof e)return e?n.onVisibleEvent():n.onHiddenEvent();var t=n.getBrowserPrefix(),i=n.getHiddenPropertyName(t);return document[i]?n.onHiddenEvent():n.onVisibleEvent()},n}(0,r.Z)(t,e);var n=t.prototype;return n.configure=function(){var e=this,t=this.getBrowserPrefix(),n=this.getVisibilityEvent(t);document.addEventListener(n,this.handleVisibilityChange,!1),document.addEventListener("focus",(function(){e.handleVisibilityChange(!0)}),!1),document.addEventListener("blur",(function(){e.handleVisibilityChange(!1)}),!1),window.addEventListener("focus",(function(){e.handleVisibilityChange(!0)}),!1),window.addEventListener("blur",(function(){e.handleVisibilityChange(!1)}),!1)},n.addEventVisible=function(e){this.visibleCallbacks.push(e)},n.addEventHidden=function(e){this.hiddenCallbacks.push(e)},n.isGameVisible=function(){return this.isVisible},n.getHiddenPropertyName=function(e){return e?e+"Hidden":"hidden"},n.getVisibilityEvent=function(e){return(e||"")+"visibilitychange"},n.getBrowserPrefix=function(){for(var e=0;e<this.browserPrefixes.length;e++)if(this.getHiddenPropertyName(this.browserPrefixes[e])in document)return this.browserPrefixes[e];return""},n.onVisibleEvent=function(){this.isVisible||(this.isVisible=!0,this.visibleCallbacks.forEach((function(e){e()})))},n.onHiddenEvent=function(){this.isVisible&&(this.isVisible=!1,this.hiddenCallbacks.forEach((function(e){e()})))},t}(Phaser.Plugins.BasePlugin),pN=dN,fN=n(560),gN=n(458),mN=n.n(gN),vN=function(e){if((this._i18nFontKey||this.font)&&this.setFont(this._i18nFontKey||this.font),e!==this._i18nKey&&(this._i18nKey=e.toString()||""),this._isIgnoreLanguage)return this._setText(e);var t=this._setText(YD.ZP.t(this._i18nKey,this._interpolations)||"");return this.refontSize&&this.refontSize(),this.emit("textChanged",e),t},yN=function(e,t,n){if(be()(e).call(e,"{{locale}}")){e!==this._i18nFontKey&&(this._i18nFontKey=e.toString()||"");var i=this._baseLocale||this.scene.lang.language,a=e.replace("{{locale}}",i);return this._setFont(a,t,n)}},AN={get:function(){return this._interpolations},set:function(e){this._interpolations=e,this.setText(this._i18nKey)}},EN=function(e){this._interpolations||(this._interpolations={}),this._interpolations=(0,a.Z)({},this._interpolations,e),this.setText(this._i18nKey)},TN=function(e,t){this._interpolations||(this._interpolations={}),this._interpolations[e]=t,this.setText(this._i18nKey)},CN=function(e){e in this._interpolations&&delete this._interpolations[e],this.setText(this._i18nKey)},SN=function(e,t){this._isIgnoreLanguage=void 0==e||e,this._baseLocale=t,this.setText(this._i18nKey)},bN=function(e,t,n,i){var a=this;if((!this._maxWidth||!this._maxHeight||!this._baseFontSize)&&GameCore.Utils.Valid.isDebugger()&&GameCore.Configs.Debugger.ShowBoxBitmapText){var s=this.scene.add.rectangle(0,0,10,10);s.setStrokeStyle(1,16711680,1),this.scene.events.on(Phaser.Scenes.Events.UPDATE,(function(){s.setPosition(a.x,a.y),s.setOrigin(a.originX,a.originY),s.setSize(a._maxWidth,a._maxHeight),a.parentContainer&&a.parentContainer.add(s)}))}this._maxWidth=e||this._maxWidth||Phaser.Math.MAX_SAFE_INTEGER,this._maxHeight=t||this._maxHeight||Phaser.Math.MAX_SAFE_INTEGER,this._baseFontSize=i||this.fontSize,this.setMaxWidth(this._maxWidth,n?Phaser.Math.MAX_SAFE_INTEGER:void 0),this.setText(this._i18nKey)},IN=function(){if(this._maxWidth&&this._maxHeight&&this._baseFontSize){var e=this._maxWidth,t=this._maxHeight,n=this._baseFontSize,i=this.wordWrapCharCode===Phaser.Math.MAX_SAFE_INTEGER;this.setFontSize(n);for(var a=0;this.width>e||this.height>t||this.getTextBounds().lines.lengths.length>1&&i;)if(this.setFontSize(.95*this.fontSize),(a+=1)>1e3){this.setFontSize(n);break}}},wN=function(e,t){e.prototype.setText!==vN&&(e.prototype._setText=e.prototype.setText,e.prototype._setFont=e.prototype.setFont,e.prototype.setText=vN,e.prototype.setFont=yN,m()(e.prototype,"interpolations",AN),e.prototype.setTranslationParameter=TN,e.prototype.setTranslationParameters=EN,e.prototype.clearTranslationParameter=CN,e.prototype.setIgnoreLanguage=SN);var n=Phaser.GameObjects.GameObjectCreator;if(n){var i=n.prototype[t];i&&(delete n.prototype[t],n.register("_"+t,i),n.register(t,(function(e,n){void 0===n&&(n=!1);var i=this.scene.make["_"+t](e,n);return i.interpolations=e.interpolations,i})))}var a=Phaser.GameObjects.GameObjectFactory;if(a){var s=a.prototype[t];s&&(delete a.prototype[t],a.register("_"+t,s))}},_N={extendText:function(){var e=Phaser.GameObjects.Text;e&&wN(e,"text");var t=Phaser.GameObjects.GameObjectFactory;t&&t.register("text",(function(e,t,n,i,a){var s=this.scene.add._text(e,t,n,i);return s.interpolations=a,s}))},extendBitmapText:function(){var e=Phaser.GameObjects.BitmapText;e&&(wN(e,"bitmapText"),e.prototype.setMaxSize=bN,e.prototype.refontSize=IN);var t=Phaser.GameObjects.GameObjectFactory;t&&t.register("bitmapText",(function(e,t,n,i,a,s){var r=this.scene.add._bitmapText(e,t,n,i,a);return r.interpolations=s,r}))},extendDynamicBitmapText:function(){var e=Phaser.GameObjects.DynamicBitmapText;e&&wN(e,"dynamicBitmapText");var t=Phaser.GameObjects.GameObjectFactory;t&&t.register("dynamicBitmapText",(function(e,t,n,i,a,s){var r=this.scene.add._dynamicBitmapText(e,t,n,i,a);return r.interpolations=s,r}))}},xN=function(e){function t(){for(var t,n,i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];return(n=e.call.apply(e,P()(t=[this]).call(t,a))||this).languageChangedBound=void 0,n}(0,r.Z)(t,e),t.staticConstructor=function(){_N.extendText(),_N.extendBitmapText()};var n=t.prototype;return n.boot=function(){var e=this.systems.events;e.on("shutdown",this.shutdown,this),e.on("shutdown",this.shutdown,this),this.languageChangedBound=this.languageChanged.bind(this),this.on("languageChanged",this.languageChangedBound)},n.initialize=function(e,t){YD.ZP.use(new(mN())(null,e)),e?YD.ZP.init(e,t):YD.ZP.init(t)},n.use=function(e){return YD.ZP.use(e)},n.t=function(e,t){return YD.ZP.t(e,t)},n.exists=function(e,t){return YD.ZP.exists(e,t)},n.loadResources=function(e){YD.ZP.loadResources(e)},n.createInstance=function(e,t){return YD.ZP.createInstance(e,t)},n.cloneInstance=function(e,t){return YD.ZP.cloneInstance(e,t)},n.getFixedT=function(e,t){return YD.ZP.getFixedT(e,t)},n.changeLanguage=function(e,t){return YD.ZP.changeLanguage(e,t)},n.loadNamespaces=function(e,t){return YD.ZP.loadNamespaces(e,t)},n.loadLanguages=function(e,t){return YD.ZP.loadLanguages(e,t)},n.reloadResources=function(e,t){return YD.ZP.reloadResources(e,t)},n.setDefaultNamespace=function(e){YD.ZP.setDefaultNamespace(e)},n.dir=function(e){return YD.ZP.dir(e)},n.on=function(e,t){YD.ZP.on(e,t)},n.off=function(e,t){YD.ZP.off(e,t)},n.getResource=function(e,t,n,i){YD.ZP.getResource(e,t,n,i)},n.addResource=function(e,t,n,i,a){YD.ZP.addResource(e,t,n,i,a)},n.addResources=function(e,t,n){YD.ZP.addResources(e,t,n)},n.addResourceBundle=function(e,t,n,i,a){YD.ZP.addResourceBundle(e,t,n,i,a)},n.hasResourceBundle=function(e,t){return YD.ZP.hasResourceBundle(e,t)},n.getResourceBundle=function(e,t){return YD.ZP.getResourceBundle(e,t)},n.removeResourceBundle=function(e,t){YD.ZP.removeResourceBundle(e,t)},n.recursiveUpdateText=function(e){var t=this;e instanceof Phaser.GameObjects.Text||e instanceof Phaser.GameObjects.BitmapText?e.setText(e._i18nKey):e instanceof Phaser.GameObjects.Container||e instanceof Phaser.GameObjects.Layer?e.list.forEach((function(e){t.recursiveUpdateText(e)})):e.children&&e.children.length>0&&e.children.each((function(e){t.recursiveUpdateText(e)}))},n.shutdown=function(){this.off("languageChanged",this.languageChangedBound);var e=this.systems.events;e.off("shutdown",this.shutdown,this,!1),e.off("shutdown",this.shutdown,this,!1)},n.languageChanged=function(){this.recursiveUpdateText(this.scene)},(0,ce.Z)(t,[{key:"language",get:function(){return YD.ZP.language}},{key:"languages",get:function(){return YD.ZP.languages}},{key:"format",get:function(){return YD.ZP.format}},{key:"options",get:function(){return YD.ZP.options}},{key:"isInitialized",get:function(){return YD.ZP.isInitialized}}]),t}(Phaser.Plugins.ScenePlugin);xN.staticConstructor();var PN=["Enable"],kN=function(e){function t(){return e.apply(this,arguments)||this}(0,r.Z)(t,e);var o=t.prototype;return o.boot=function(){var t=(0,s.Z)(u().mark((function t(){return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.prototype.boot.call(this),this.addExtraGameObjectMethods(),this.addExtraFBInstantFunctions(),this.addPlugins(),t.next=6,this.addDevPlugins();case 6:return t.next=8,this.initAdsAsync();case 8:this.addScenes(),this.addDevScenes(),this.initWorld(),this.initManagers(),this.initStorage(),this.initVisibilityChangeHandler(),this.initUtils(),this.initRollbar(),this.initConsole(),this.initDebugger(),this.initStatistics(),this.initParticleEditor(),this.initProfilerPlugin(),this.initAdaptivePerformance(),this.initCanvasRecorderPlugin();case 23:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),o.start=function(){e.prototype.start.call(this)},o.addExtraGameObjectMethods=function(){var e=new A(this);e.addKillRevive(),e.addKillReviveGroup(),e.addDrawDebugBox(),e.addSetWorldSize(),e.addSetWorldSizeForContainer(),e.addGetWorldPosition(),e.addHighQuality(),e.addGradientHorizontalTint(),e.addRadius(),e.addSetLineHeightForBitmapText()},o.addExtraFBInstantFunctions=function(){var e=new l.Z(this.facebook);this.facebook.getLocale=e.getLocale,this.facebook.shareAsync=e.shareAsync,this.facebook.inviteAsync=e.inviteAsync,this.facebook.switchAsync=e.switchAsync,this.facebook.chooseAsync=e.chooseAsync,this.facebook.createAsync=e.createAsync,this.facebook.sendMessage=e.sendMessage,this.facebook.getContextID=e.getContextID,this.facebook.getPlayerToken=e.getPlayerToken,this.facebook.matchPlayerAsync=e.matchPlayerAsync,this.facebook.getContextPlayers=e.getContextPlayers,this.facebook.setLoadingProgress=e.setLoadingProgress,this.facebook.attemptToAddShortcut=e.attemptToAddShortcut,this.facebook.attemptToSubscribeBot=e.attemptToSubscribeBot,this.facebook.postSessionScoreAsync=e.postSessionScoreAsync,this.facebook.getRewardedVideoAsync=e.getRewardedVideoAsync,this.facebook.sendNotificationAsync=e.sendNotificationAsync,this.facebook.getInterstitialAdAsync=e.getInterstitialAdAsync,this.facebook.isSupportedAPI=e.isSupportedAPI,e.injectTournament(),this.facebook.progressLoading=new f(this)},o.addPlugins=function(){this.plugins.install("Storage",la,!0,"storage"),this.plugins.install("Rollbar",fn,!0,"rollbar"),this.plugins.install("AdsManager",J,!0,"ads"),this.plugins.install("AuthManager",Ae,!0,"auth"),this.plugins.install("AudioManager",oe,!0,"audio"),this.plugins.install("WorldManager",Ca,!0,"world"),this.plugins.install("PlayerManager",Zt,!0,"player"),this.plugins.install("ProfileManager",$t,!0,"profile"),this.plugins.install("AnalyticsManager",Q,!0,"analytics"),this.plugins.install("AdaptivePerformance",Pe,!0,"performance"),this.plugins.install("ThemeManager",nN,!0,"theme"),this.plugins.install("JourneyManager",hN,!0,"journey"),this.plugins.install("VibrationManager",lN,!0,"vibration"),this.plugins.install("VisibilityChangeHandler",pN,!0,"visibility"),this.plugins.install("LanguageManager",KD,!0,"lang"),this.plugins.installScenePlugin("textStyler",ma,"textStyler"),this.plugins.installScenePlugin("ScreenManager",In,"screen"),this.plugins.installScenePlugin("FrameCapture",Ce,"frameCapture"),this.plugins.installScenePlugin("I18n",xN,"i18n"),window.SpinePlugin&&this.plugins.installScenePlugin("SpinePlugin",SpinePlugin,"spine"),this.storage=this.plugins.get("Storage"),this.rollbar=this.plugins.get("Rollbar"),this.ads=this.plugins.get("AdsManager"),this.auth=this.plugins.get("AuthManager"),this.audio=this.plugins.get("AudioManager"),this.world=this.plugins.get("WorldManager"),this.theme=this.plugins.get("ThemeManager"),this.player=this.plugins.get("PlayerManager"),this.lang=this.plugins.get("LanguageManager"),this.profile=this.plugins.get("ProfileManager"),this.analytics=this.plugins.get("AnalyticsManager"),this.performance=this.plugins.get("AdaptivePerformance"),this.plugins.install("KawaseBlurFilterPlugin",WD.Z),this.visibility=this.plugins.get("VisibilityChangeHandler")},o.addDevPlugins=function(){var e=(0,s.Z)(u().mark((function e(){var t,i,a,s,r,o;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(GameCore.Utils.Valid.isDebugger()){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,Promise.all([n.e(7),n.e(942)]).then(n.bind(n,601));case 4:return t=e.sent.default,e.next=7,Promise.all([n.e(498),n.e(739),n.e(530)]).then(n.bind(n,602));case 7:return i=e.sent.default,e.next=10,n.e(401).then(n.bind(n,603));case 10:return a=e.sent.default,e.next=13,Promise.all([n.e(498),n.e(123)]).then(n.bind(n,604));case 13:return s=e.sent.default,e.next=16,Promise.all([n.e(498),n.e(803)]).then(n.bind(n,605));case 16:return r=e.sent.default,e.next=19,Promise.all([n.e(498),n.e(616),n.e(613)]).then(n.bind(n,607));case 19:o=e.sent.default,this.plugins.install("Console",t,!0,"console"),this.plugins.install("Debugger",i,!0,"debugger"),this.plugins.install("Statistics",a,!0,"statistics"),this.plugins.install("Profiler",s,!0,"profiler"),this.plugins.install("ParticleEditor",r,!0,"particle-editor"),this.plugins.install("CanvasRecorder",o,!0,"canvasRecorder"),this.eruda=this.plugins.get("Console"),this.debugger=this.plugins.get("Debugger"),this.statistics=this.plugins.get("Statistics"),this.profiler=this.plugins.get("Profiler"),this.particleEditor=this.plugins.get("ParticleEditor"),this.canvasRecorder=this.plugins.get("CanvasRecorder");case 32:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),o.addScenes=function(){this.scene.add(za.C.BOOT_SCENE,Ja,!0),this.scene.add(za.C.LOAD_SCENE,kD,!1),this.scene.add(za.C.GAME_SCENE,tR,!1),this.scene.add(za.C.GAME_OVER_SCENE,kh,!1),this.scene.add(za.C.DASHBOARD_SCENE,Qa,!1),this.scene.add(za.C.LEADERBOARD_SCENE,jR,!1),this.scene.add(za.C.RESULT_MATCH_SCENE,zD,!1),this.scene.add(za.C.GLOBAL_SCENE,bL.Z,!1)},o.addDevScenes=function(){var e=(0,s.Z)(u().mark((function e(){var t,i;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(GameCore.Utils.Valid.isDebugger()){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,n.e(638).then(n.bind(n,608));case 4:return t=e.sent.default,e.next=7,n.e(557).then(n.bind(n,609));case 7:i=e.sent.default,this.scene.add(za.C.TEST_SCENE,t,!1),this.scene.add(za.C.ANIMATIONS_SCENE,i,!1);case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),o.initAdsAsync=function(){var e=(0,s.Z)(u().mark((function e(){var t,n,i;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=GameCore.Configs.Ads,e.next=3,this.getAdServiceInstance();case 3:(n=e.sent).setGame(this),i=(0,a.Z)({},t.InterstitialAdOptions),this.ads.configure(n,{enabled:t.Enabled,calculateSafeAreaBottom:t.CalculateSafeAreaBottom,enableRewardVideoResetInterstitial:t.EnableRewardVideoResetInterstitial,interstitialAdOptions:i,rewardAdOptions:t.RewardAdOptions,bannerAdOptions:t.BannerAdOptions});case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),o.getAdServiceInstance=function(){var e=(0,s.Z)(u().mark((function e(){var t,i,a,s;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=GameCore.Configs.Ads,i=t.AdService,!t.Mockup.Enable){e.next=6;break}return e.next=4,n.e(131).then(n.bind(n,610));case 4:return a=e.sent.default,e.abrupt("return",a);case 6:if("google"!==i){e.next=19;break}return e.prev=7,e.next=10,this.initGoogleAdInstanceAsync();case 10:if(null===(s=e.sent)){e.next=13;break}return e.abrupt("return",s);case 13:e.next=19;break;case 15:return e.prev=15,e.t0=e.catch(7),e.abrupt("return",jD.default);case 19:return e.abrupt("return",jD.default);case 20:case"end":return e.stop()}}),e,this,[[7,15]])})));return function(){return e.apply(this,arguments)}}(),o.initGoogleAdInstanceAsync=function(){var e=(0,s.Z)(u().mark((function e(){var t,n,i,a,s,r,o,c;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("loaded"!==fN.default.initStatus){e.next=2;break}return e.abrupt("return",fN.default);case 2:if(t=GameCore.Configs.Ads.AdServiceConfigs.Google){e.next=6;break}return e.abrupt("return",null);case 6:return n=t.DataAdClient,i=t.DataAdChannel,a=t.DataAdBreakTest,s=t.DataAdFrequencyHint,r=t.DataAdHost,o=t.MaxScriptLoadRetryCount,c={dataAdClient:n,dataAdChannel:i,dataAdBreakTest:a,dataAdFrequencyHint:s,dataAdHost:r,maxScriptLoadRetryCount:o},e.prev=8,fN.default.setGame(this),e.next=12,fN.default.initGoogleAdsAsync(c);case 12:return e.abrupt("return",fN.default);case 15:return e.prev=15,e.t0=e.catch(8),e.abrupt("return",null);case 19:case"end":return e.stop()}}),e,this,[[8,15]])})));return function(){return e.apply(this,arguments)}}(),o.initWorld=function(){var e=GameCore.Configs.Game,t=e.AutoResize,n=e.PortraitRatio,i=e.PortraitWidth,a=e.PortraitHeight,s=e.LandscapeRatio,r=e.LandscapeWidth,o=e.LandscapeHeight,c=t,h=e.DisableLandscape,u=e.FullSizeOnLandscape,l=n,d=i,p=a,f=s,g=r,m=o;this.world.configure({autoResize:c,portraitRatio:l,portraitWidth:d,portraitHeight:p,landscapeRatio:f,landscapeWidth:g,landscapeHeight:m,disableLandscape:h,fullSizeOnLandscape:u}),this.world.resize(e.ForcePixelRatio)},o.initManagers=function(){this.theme.config()},o.initStorage=function(){var e=new Ua(this);this.storage.setInitiator(e)},o.initVisibilityChangeHandler=function(){this.visibility.configure()},o.initUtils=function(){this.handlePauseAudio(),this.addPipelines(),this.removeUnusedPipelines()},o.initConsole=function(){GameCore.Utils.Valid.isDebugger()&&(GameCore.Configs.Debugger.ShowConsole&&this.eruda.configure({tool:["console","info"],defaults:{theme:"Dark"}}))},o.initDebugger=function(){if(GameCore.Utils.Valid.isDebugger()){var e=GameCore.Configs.Debugger,t=e.ShowInspector,n=e.ShowMonitoring;(t||n)&&this.debugger.configure(GameCore.Configs.Debugger)}},o.initStatistics=function(){GameCore.Utils.Valid.isDebugger()&&(GameCore.Configs.Statistics.Enable&&this.statistics.configure(GameCore.Configs.Statistics))},o.initParticleEditor=function(){GameCore.Utils.Valid.isDebugger()&&(GameCore.Configs.ParticleEditor.Enable&&this.particleEditor.configure(GameCore.Configs.ParticleEditor))},o.initProfilerPlugin=function(){GameCore.Utils.Valid.isDebugger()&&(GameCore.Configs.ProfilerPlugin.Enable&&this.profiler.configure())},o.initAdaptivePerformance=function(){var e=GameCore.Configs.Performance,t=e.Enable,n=(0,i.Z)(e,PN);if(t){var s=this.world.getPixelRatio();this.performance.configure((0,a.Z)({pixelRatio:s},n)),this.performance.active()}},o.initCanvasRecorderPlugin=function(){var e=this;if(GameCore.Utils.Valid.isDebugger()){var t=GameCore.Configs.CanvasRecorder;if(t.Enable){var n=t.Options,i=n.Type,a=n.Quality,r=n.RecordFps,o=n.SyncFps;this.canvasRecorder.configure({type:i,quality:a,syncFps:o,recordFps:r});var h=document.querySelector("canvas");if(h){this.canvasRecorder.setCanvas(h);var l=this.canvasRecorder.getOptions(),d=this.canvasRecorder.waitNextFrame;this.canvasRecorder.waitNextFrame=(0,s.Z)(u().mark((function t(){return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!l.syncFps){t.next=5;break}return e.loop.sleep(),t.abrupt("return",new(c())((function(t){e.events.once(Phaser.Core.Events.POST_RENDER,t),e.loop.lastTime=1e3/l.recordFps,e.loop.step()})));case 5:return e.loop.wake(),t.abrupt("return",d.call(e.canvasRecorder));case 7:case"end":return t.stop()}}),t)})))}}}},o.initRollbar=function(){GameCore.Configs.Rollbar.Enable&&this.rollbar.setup()},o.handlePauseAudio=function(){var e=this;this.sound.pauseOnBlur=!1,this.visibility.addEventVisible((function(){e.audio.playMusic(),e.audio.resumeAllSounds()})),this.visibility.addEventHidden((function(){e.audio.pauseMusic(),e.audio.pauseAllSounds()}))},o.addPipelines=function(){var e=this.renderer;e instanceof Phaser.Renderer.WebGL.WebGLRenderer&&e.pipelines.add("Grayscale",new iN(this))},o.removeUnusedPipelines=function(){var e=this.renderer;if(e instanceof Phaser.Renderer.WebGL.WebGLRenderer){var t=e.pipelines,n=Phaser.Renderer.WebGL.Pipelines;if(n)[n.ROPE_PIPELINE,n.LIGHT_PIPELINE,n.POSTFX_PIPELINE,n.POINTLIGHT_PIPELINE,n.BITMAPMASK_PIPELINE].forEach((function(e){var n;null==(n=t.get(e))||n.destroy(),t.remove(e)}))}},t}(Phaser.Game),ON=kN},659:function(e,t,n){n.d(t,{Z:function(){return r}});var i=n(621),a=n(630),s=function(e){function t(t,n,i){var a;return(a=e.call(this,t,0,0,n,i)||this).setOrigin(0,0),a}return(0,i.Z)(t,e),t}(Phaser.GameObjects.Zone),r=function(e){function t(){var t;return(t=e.call(this,{visible:!1})||this).unsubscribeList=void 0,t.gameZone=void 0,t.background=void 0,t.handleOpenScene=function(){t.logPageviewOnOpen(),t.logEventOpen()},t.removeStateChange=function(){t.unsubscribeList.forEach((function(e){return e()}))},t}(0,i.Z)(t,e);var n=t.prototype;return n.create=function(){this.events.on("wake",this.handleOpenScene),this.events.on("resume",this.handleOpenScene),this.events.on("create",this.handleOpenScene),this.scaleGame(),this.createGameZone()},n.scaleGame=function(){var e=this.getCamera("main"),t=this.world.getZoomRatio(),n=this.world.getWorldSize(),i=n.width,a=n.height;e.setZoom(t),e.centerOn(i/2,a/2)},n.createGameZone=function(){var e=this.world.getWorldSize(),t=e.width,n=e.height;this.gameZone=new s(this,t,n)},n.getCamera=function(e){return"main"===e?this.cameras.main:this.cameras.getCamera(e)},n.createMask=function(e){void 0===e&&(e=1),this.getCamera("main").setBackgroundColor("rgba(0, 0, 0, "+e+")")},n.fontSize=function(e){return Math.round(e/1.01)},n.createBackground=function(e,t,n,i){var a=this;this.background?(this.background.setTexture(e),t&&this.background.setFrame(t)):(this.background=this.make.image({key:e,frame:t}),this.world.isLandscape()&&this.game.events.on("world-resize",(function(){a.createBackground(a.background.texture.key,a.background.frame.name,a.background.alpha,a.background.tint)}))),this.background.setName(e);var s=this.gameZone,r=s.displayWidth,o=s.displayHeight;if(this.background.setDisplaySize(r,o),this.world.isLandscape()){var c=this.world.getScreenWidth(),h=this.world.getScreenHeight(),u=this.world.getPixelRatioForCanvas(),l=this.world.getZoomRatio(),d=window.game.world.getPhysicPixels(c,u/l),p=window.game.world.getPhysicPixels(h,u/l);this.background.setSize(d,p),this.background.setDisplaySize(d,p)}if(GameCore.Utils.Valid.isNumber(n)&&this.background.setAlpha(n),GameCore.Utils.Valid.isNumber(i)&&this.background.setTint(i),this.world.isLandscape()){var f=this.ads.getBannerHeight();Phaser.Display.Align.In.Center(this.background,this.gameZone,0,f/2)}else Phaser.Display.Align.In.Center(this.background,this.gameZone)},n.handleStateChange=function(e){var t=this;this.unsubscribeList=[],e.forEach((function(e){var n=e.selector,i=e.callback,a=t.storage.watch(n,i);t.unsubscribeList.push(a)})),this.events.once("sleep",this.removeStateChange),this.events.once("destroy",this.removeStateChange),this.events.once("shutdown",this.removeStateChange)},n.logPageviewOnOpen=function(){this.analytics.pageview(this.scene.key)},n.logEventOpen=function(){this.analytics.event(a._.SCREEN_OPEN,{screen_name:this.getSceneName()})},n.getSceneName=function(){return GameCore.Utils.String.toUpperCamelCase(this.scene.key.toLowerCase())},t}(Phaser.Scene)},642:function(e,t,n){var i,a=n(19),s=n.n(a),r=n(10),o=n.n(r),c=n(8),h=n.n(c),u=n(25),l=n.n(u),d=n(26),p=n.n(d),f=n(29),g=n.n(f);function m(e,t){var n="undefined"!==typeof p()&&g()(e)||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){var n;if(!e)return;if("string"===typeof e)return v(e,t);var i=h()(n=Object.prototype.toString.call(e)).call(n,8,-1);"Object"===i&&e.constructor&&(i=e.constructor.name);if("Map"===i||"Set"===i)return l()(e);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return v(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var i=0;return function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function v(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var y=function(){function e(){}return e.registerObject=function(t){var n;s()(n=e.objects).call(n,t)||e.objects.push(t)},e.removeObject=function(t){var n;e.objects=o()(n=e.objects).call(n,(function(e){return e!==t}))},e.openScreen=function(t,n){e.openingScreens.push({screen:t,grayscale:n})},e.closeScreen=function(t){var n;e.openingScreens=o()(n=e.openingScreens).call(n,(function(e){return e.screen!==t}))},e.updateGrayScale=function(){var t=e.openingScreens,n=!1;t.length>0&&(n=t[t.length-1].grayscale),n!=this.previousGrayscale&&(this.previousGrayscale=n,this.setGrayScaleForAppBg(n))},e.setGrayScaleForAppBg=function(e){if(window.game.world.isLandscape()){var t=document.getElementById("app-bg");t&&(t.style.filter=e?"grayscale(0.8)":"")}},e.updateAppBg=function(e){if(window.game.world.isLandscape()){var t=document.getElementById("app-bg");if(t){var n=new Image;n.src=e,n.onload=function(){t.style.backgroundImage="url("+e+")"}}}},e}();i=y,y.objects=[],y.openingScreens=[],y.currentAlpha=0,y.updateBgMask=function(){for(var e,t=1,n=m(i.objects);!(e=n()).done;){var a=e.value,s=a.scene;s&&s.scene.isActive(s.scene.key)&&(a.parentContainer?a.parentContainer.visible&&a.visible&&(t*=1-a.alpha*a.parentContainer.alpha):a.visible&&(t*=1-a.alpha))}var r=1-t;i.currentAlpha!=r&&(i.currentAlpha=r,function(e){var t=document.getElementById("app-mask");t&&(t.style.background="rgb(20 20 22 / "+e+")")}(r))},y.previousGrayscale=!1,t.Z=y},667:function(e,t,n){n.d(t,{Z:function(){return r}});var i=n(616),a=n(621),s=n(643).Z.JOURNEY.KEY,r=function(e){function t(t,n){var a;return(a=e.call(this,t,0,0,s)||this).options=void 0,a.options=(0,i.Z)({key:s},n),a.setEnable(n.enable),a}return(0,a.Z)(t,e),t.prototype.setEnable=function(e){this.options.enable=e,e?(this.setFrame(this.options.frameOn),this.setWorldSize(this.options.sizeOn.width,this.options.sizeOn.height)):(this.setFrame(this.options.frameOff),this.setWorldSize(this.options.sizeOff.width,this.options.sizeOff.height))},t}(Phaser.GameObjects.Image)},669:function(e,t,n){n.d(t,{Z:function(){return _}});var i=n(621),a=n(4),s=n.n(a),r=n(39),o=n.n(r),c=n(8),h=n.n(c),u=n(666),l=n(79),d=n.n(l),p=n(662),f=n(668),g=n(651),m=n(643).Z.JOURNEY,v=m.KEY,y=m.FRAME,A=function(e){function t(t){var n;return(n=e.call(this,t,v,y.LV_PASSED_BG,47.5,48)||this).payload=void 0,n.overlay=void 0,n.text=void 0,n.levelRoundContainer=void 0,n.levelRoundTween=void 0,n.handleClick=function(){var e;n.payload.enable&&null!=(e=n.payload.config)&&e.level},n.payload={enable:!1,config:{level:0}},n.scene=t,n.setName("Level"),n.createUI(),n.align(),n}(0,i.Z)(t,e);var n=t.prototype;return n.createUI=function(){this.createLevelRound(),this.createButtonOverlay(),this.createText(),this.sendToBack(this.levelRoundContainer)},n.createButtonOverlay=function(){this.overlay=this.scene.make.image({key:v,frame:y.LV_ACTIVE}),this.overlay.setWorldSize(78,82),this.overlay.kill(),this.add(this.overlay)},n.createText=function(){this.text=this.scene.make.bitmapText({font:g.Z.BOLD_SHADOW.KEY,origin:{x:.5,y:.5},size:this.scene.fontSize(23)}),this.text.setIgnoreLanguage(),this.text.kill(),this.add(this.text)},n.createLevelRound=function(){this.levelRoundContainer=this.scene.add.container();var e=this.scene.make.image({key:v,frame:y.LV_ACTIVE_FX,alpha:1});e.setWorldSize(80.5,80.5),this.levelRoundContainer.add([e]),this.add(this.levelRoundContainer)},n.align=function(){Phaser.Display.Align.In.Center(this.text,this.button),Phaser.Display.Align.In.Center(this.levelRoundContainer,this.overlay,0,-2)},n.setConfig=function(e){this.payload.config=e},n.setEnable=function(e){this.payload.enable=e},n.setPayload=function(e,t){void 0===t&&(t=!0),this.setConfig(e),this.setEnable(t)},n.updateOverlay=function(){var e,t,n,i,a=this.scene.journey.getCurrentLevel();if(this.overlay.revive(),this.payload.enable)if(a==(null==(t=this.payload.config)?void 0:t.level)){switch(null==(n=this.payload.config)?void 0:n.key){case"two-cards":this.overlay.setFrame(y.LV_TWO_CARDS_PASS),this.overlay.setWorldSize(86,95);break;case"king":this.overlay.setFrame(y.ICO_SPECIAL_LOCKED),this.overlay.setWorldSize(86,95);break;default:this.overlay.setFrame(y.LV_ACTIVE),this.overlay.setWorldSize(78,82)}var s;if(this.payload.config.key)this.levelRoundContainer.kill(),this.text.kill();else d()(s=this.levelRoundContainer).call(s),this.text.revive()}else switch(null==(i=this.payload.config)?void 0:i.key){case"two-cards":this.overlay.setFrame(y.LV_TWO_CARDS_PASS_LOCK),this.overlay.setWorldSize(86,95);break;case"king":this.overlay.setFrame(y.ICO_SPECIAL_LOCKED),this.overlay.setWorldSize(86,95);break;default:this.overlay.setFrame(y.LV_PASSED),this.overlay.setWorldSize(38,37.5)}else switch(null==(e=this.payload.config)?void 0:e.key){case"two-cards":this.overlay.setFrame(y.LV_TWO_CARDS_PASS),this.overlay.setWorldSize(86,95);break;case"king":this.overlay.setFrame(y.ICO_SPECIAL_LOCKED),this.overlay.setWorldSize(91,80.5);break;default:this.overlay.setFrame(y.ICO_LOCK),this.overlay.setWorldSize(36.5,36.38)}},n.updateLevelButton=function(){var e,t;this.scene.journey.getCurrentLevel()===(null==(e=this.payload.config)?void 0:e.level)?(this.levelRoundContainer.revive(),this.button.setVisible(!1),this.runAnimation(),this.text.revive()):(this.text.kill(),this.button.setVisible(!0),this.levelRoundContainer.kill(),null==(t=this.levelRoundTween)||t.remove(),this.levelRoundTween=void 0);this.updateOverlay(),this.payload.config?(this.text.setText(""+this.payload.config.level),this.payload.config.level<100?this.text.setFontSize(this.scene.fontSize(23)):this.payload.config.level<1e3?this.text.setFontSize(this.scene.fontSize(19)):this.text.setFontSize(this.scene.fontSize(15))):(this.button.setSize(36.5,35),this.text.kill()),this.align()},n.updateEnable=function(e){this.setEnable(e),this.updateLevelButton()},n.runAnimation=function(){var e,t=1/this.scene.world.getPixelRatio();null==(e=this.levelRoundTween)||e.remove(),this.levelRoundTween=void 0,this.levelRoundTween=this.scene.tweens.add({targets:this.levelRoundContainer,scale:{start:t,from:t,to:1.4,delay:30,duration:1e3,ease:p.Z},alpha:{start:1,from:1,to:0,delay:100,duration:930},loop:-1})},t}(f.Z),E=n(616),T=n(626),C=n(667),S=[{x:28.625,y:36,sizeOff:{width:57.25,height:9.5},sizeOn:{width:57.25,height:8}},{x:95,y:0,sizeOff:{width:81,height:80},sizeOn:{width:81,height:80}},{x:95,y:-80,sizeOff:{width:82,height:79.5},sizeOn:{width:82,height:79.5}},{x:0,y:-115,sizeOff:{width:114.5,height:9.5},sizeOn:{width:114.5,height:8}},{x:-98,y:-151,sizeOff:{width:81,height:80},sizeOn:{width:81,height:80}},{x:-98,y:-233,sizeOff:{width:82,height:79.5},sizeOn:{width:82,height:79.5}},{x:-28.625,y:-268,sizeOff:{width:57.25,height:9.5},sizeOn:{width:57.25,height:8}}],b=function(e){function t(t){var n;return(n=e.call(this,t)||this).paths=[],n.setSize(208.5,304),n.createPaths(),n.scene.add.existing((0,T.Z)(n)),n}(0,i.Z)(t,e);var n=t.prototype;return n.createPaths=function(){for(var e,t=0;t<S.length;t++){var n=t==S.length-1||t%3==0?3:t%3,i=new C.Z(this.scene,{enable:!1,frameOff:"path g"+n,frameOn:"path y"+n,sizeOff:S[t].sizeOff,sizeOn:S[t].sizeOn});i.setVisible(!1),i.setPosition(S[t].x,S[t].y+this.height/2),i.flipX=t>=3,this.paths.push(i)}this.add(s()(e=[]).call(e,this.paths))},n.updatePathStart=function(e){e?(this.paths[1].options=(0,E.Z)({},this.paths[1].options,{frameOff:"path g0",frameOn:"path y0",sizeOff:{width:135,height:80},sizeOn:{width:135,height:80}}),this.paths[1].setEnable(this.paths[1].options.enable),this.paths[1].setPosition(68,152),this.paths[0].setVisible(!1)):(this.paths[1].options=(0,E.Z)({},this.paths[1].options,{frameOff:"path g1",frameOn:"path y1",sizeOff:S[1].sizeOff,sizeOn:S[1].sizeOn}),this.paths[1].setEnable(this.paths[1].options.enable),this.paths[1].setPosition(S[1].x,S[1].y+this.height/2),this.paths[0].setVisible(!0))},t}(Phaser.GameObjects.Container),I=[{x:47,y:-10},{x:132,y:-75},{x:47,y:-156},{x:-45,y:-158},{x:-132,y:-217},{x:-56,y:-300}],w=function(e){function t(t){var n;return(n=e.call(this,t)||this).background=void 0,n.buttons=[],n.payload=void 0,n.pathContainer=void 0,n.heightContainer=0,n.init(),n}(0,i.Z)(t,e);var n=t.prototype;return n.init=function(){this.payload={index:-1,payloadLevelButtons:[]},this.createPathContainers(),this.setSize(208.5,this.heightContainer),this.addNewButtons(GameCore.Configs.LevelScroller.limitLevelButtonInContainer)},n.clear=function(){this.buttons=[]},n.createPathContainers=function(){this.pathContainer=new b(this.scene),this.pathContainer.setPosition(0,this.heightContainer),this.heightContainer=this.pathContainer.height;var e=-this.heightContainer/5;this.pathContainer.setPosition(0,e),this.add(this.pathContainer)},n.addNewButtons=function(e){for(var t=0;t<e;t++){var n=new A(this.scene);this.buttons.push(n),this.add(n)}},n.setButtons=function(e){this.removeAll(),this.add(this.buttons),this.buttons=e},n.updateButtons=function(){if(-1!==this.payload.index){for(var e=GameCore.Configs.LevelScroller.limitLevelButtonInContainer,t=this.heightContainer/2-22.5,n=0;n<this.buttons.length&&(this.buttons[n]&&I[n]);n++)this.buttons[n].setPosition(I[n].x,I[n].y+t),0==n&&this.isIncludeLevel1()&&this.buttons[n].setPosition(0,t);for(var i=0;i<this.buttons.length;i++)this.buttons[i].kill();for(var a=0;a<this.pathContainer.paths.length;a++)this.pathContainer.paths[a].setVisible(!1);for(var s=0;s<this.payload.payloadLevelButtons.length;s++){var r=this.payload.payloadLevelButtons[s];this.buttons[s].revive(),this.buttons[s].setPayload(r.config,r.enable),this.buttons[s].updateLevelButton(),this.pathContainer.paths[s].setEnable(r.enable),this.pathContainer.paths[s].setVisible(!0)}this.payload.payloadLevelButtons.length==e&&this.pathContainer.paths[6].setVisible(!0),this.isLastItem()&&(this.pathContainer.paths[6].visible=!1);var o=this.scene.journey.getCurrentLevel();this.pathContainer.paths[6].setEnable(this.getMaxLevel()<o),this.pathContainer.updatePathStart(1==this.payload.index&&this.isIncludeLevel1())}},n.updateInfo=function(e){this.payload=e,this.updateButtons()},n.setVisible=function(t){return e.prototype.setVisible.call(this,t),this},n.isIncludeLevel1=function(){for(var e=this.payload.payloadLevelButtons,t=0;t<e.length;t++)if(1==e[t].config.level)return!0;return!1},n.isLastItem=function(){var e=this.payload.payloadLevelButtons,t=this.scene.journey.getCurrentSeasonMissions(),n=GameCore.Configs.Gameplay.ForceJourneyMode?this.scene.journey.getLevelCountInForceMode():t.length,i=GameCore.Configs.LevelScroller.limitLevelButtonInContainer;return e.length>0&&Math.ceil(e[0].config.level/i)==Math.ceil(n/i)},n.getMaxLevel=function(){var e=this.payload.payloadLevelButtons;return e[e.length-1].config.level||1},t}(Phaser.GameObjects.Container),_=function(e){function t(t){var n,i=t.world.getWorldSize(),a=i.width,s=i.height,r=t.ads.getBannerHeight();return(n=e.call(this,t,{classType:w,listConfigs:[],width:a,height:s,marginTop:0,marginBottom:r+111+40})||this).levelConfigMap=[],n.levelEnableMax=void 0,n.levelStars=void 0,n.isFastScroll=!1,n.updateLevelScroller=function(){n.levelConfigMap=n.scene.journey.getCurrentSeasonMissions(),n.clearItem(),n.updateLevelButtonContainers(n.levelConfigMap),n.setEnable(!0),n.value=n.getCorrectValue(),n.updateMinValue(),n.value>-n.minValue&&(n.value=-n.minValue),n.value<-n.maxValue&&(n.value=-n.maxValue)},n}(0,i.Z)(t,e);var n=t.prototype;return n.setLevelEnableMax=function(e){this.levelEnableMax=e||1},n.clearItem=function(){this.reset(),this.objects.clear(!1,!1)},n.updateLevelButtonContainers=function(e){var t=this.getConfigButtonContainers(e,this.levelEnableMax);this.updateConfig(t)},n.getConfigButtonContainers=function(e,t){for(var n=GameCore.Configs.LevelScroller.limitLevelButtonInContainer,i=[],a=[],r=1,o=GameCore.Configs.Gameplay.ForceJourneyMode,c=o?this.scene.journey.getLevelCountInForceMode():e.length;r<=c;r++){var h=!0;t&&(h=r<=t);var u,l={config:{level:o?r:e[r-1].level,key:o?"":e[r-1].key},enable:h};if(a.push(l),r%n===0)i.unshift({index:r/n,payloadLevelButtons:s()(u=[]).call(u,a)}),a=[]}return a.length>0&&(i.unshift({index:r,payloadLevelButtons:a}),r++),i},n.getIndexButtonContainer=function(e){var t=GameCore.Configs.LevelScroller.limitLevelButtonInContainer;return Math.ceil(e/t)},n.getCorrectValue=function(e){var t;void 0===e&&(e=!1);var n=GameCore.Configs.LevelScroller.limitLevelButtonInContainer,i=this.objHeight,a=this.padding,s=[0,65,81,2,59,83],r=e?this.levelEnableMax:this.scene.journey.getCurrentLevel(),c=this.listObjects.length-this.getIndexButtonContainer(r),u=r%n;u=0===u?6:u;var l=-(c*i)-5+o()(t=h()(s).call(s,0,u)).call(t,(function(e,t){return e+t}),0);return l-=0!==c?a*c:0},n.enableAllLevel=function(){var e=this.value,t=this.scene.journey.getCurrentLevel(),n=this.getConfigButtonContainers(this.levelConfigMap,t);this.updateConfig(n),this.setEnable(!0),this.value=e},n.updateMinValue=function(){var e=GameCore.Configs.LevelScroller.limitLevelButtonInContainer,t=-170,n=GameCore.Configs.Gameplay.ForceJourneyMode?this.scene.journey.getLevelCountInForceMode():this.levelConfigMap.length;t+=this.objHeight*((this.listObjects.length*e-n)/e),this.minValue=t},n.fastScroll=function(e){this.isScrollingBack||(this.isScrolling=!0,this.isScrollingSmooth=!0,this.isFastScroll=!0,this.velocity=2500*e)},n.stopFastScroll=function(e){this.isFastScroll&&(this.isFastScroll=!1,this.velocity=50*e)},t}(u.Z)},652:function(e,t,n){n.d(t,{Z:function(){return D}});var i=n(627),a=n(621),s=n(4),r=n.n(s),o=n(657),c=n(658),h=n(643),u=n(645),l=n(648),d=n(647),p=(0,n(640).P1)([function(e){return e.scene.currentSceneKey}],(function(e){return e})),f=n(624),g=n(659),m=n(626),v=n(651),y=n(644),A=h.Z.DEFAULT,E=A.KEY,T=A.FRAME,C=function(e){function t(t){var n;return(n=e.call(this,t,0,0)||this).fps=0,n.fpsString="%1, %2, %3, %4",n.fpsText=void 0,n.background=void 0,n.lastUpdate=void 0,n.update=function(e){if(!(e-n.lastUpdate<800)){n.lastUpdate=e;var t=Math.floor(n.scene.game.loop.actualFps);n.setFps(t)}},n.createFps(),n.setDepth(y.Z.DEBUG),n.scene.add.existing((0,m.Z)(n)),n.scene.events.on(Phaser.Scenes.Events.UPDATE,n.update),n}(0,a.Z)(t,e);var n=t.prototype;return n.setFps=function(e){var t=this.scene.world.getPixelRatio(),n=this.scene.world.getPixelRatioForCanvas();this.fps=e;var i=Phaser.Utils.String.Format(this.fpsString,[e,t,n,window.devicePixelRatio]);this.fpsText.setIgnoreLanguage(),this.fpsText.setText(i)},n.createFps=function(){this.background=this.scene.make.image({key:E,frame:T.BLANK}),this.background.setName("BG"),this.background.setTint(13801480),this.background.setWorldSize(45,25),this.fpsText=this.scene.make.bitmapText({size:this.scene.fontSize(14),text:this.fpsString,font:v.Z.PRIMARY.KEY,origin:{x:0,y:.5}}),this.fpsText.setLeftAlign(),this.fpsText.setName("FPS Meter"),Phaser.Display.Align.In.LeftCenter(this.fpsText,this.background,-5),this.add([this.background,this.fpsText]),this.setFps(0)},t}(Phaser.GameObjects.Container),S=C,b=function(e){function t(t){var n;if((n=e.call(this,t,0,0)||this).performance=void 0,n.memory=0,n.maxMemoryLimit=void 0,n.maxPercentThreshold=void 0,n.normalColor=3459162,n.warningColor=16768343,n.alarmColor=15812200,n.memoryString="Memory: %1MB / %2MB",n.memoryText=void 0,n.lastUpdate=void 0,n.update=function(e){if(!(e-n.lastUpdate<1e3)){n.lastUpdate=e;var t=n.performance.memory.usedJSHeapSize,i=1048576*n.maxMemoryLimit,a=Math.round(t/1048576);n.setMemory(a),n.memoryText.setTint(n.normalColor),t>n.maxPercentThreshold/100*i&&n.memoryText.setTint(n.warningColor),t>i&&n.memoryText.setTint(n.alarmColor)}},n.performance=window.performance,n.createMemory(),n.setDepth(y.Z.DEBUG),n.scene.add.existing((0,m.Z)(n)),!n.isSupport())return n.memoryText.setText("Memory: not supported!"),(0,m.Z)(n);var i=n.performance.memory.jsHeapSizeLimit;return n.maxPercentThreshold=90,n.setMaxMemory(i/1048576),n.scene.events.on(Phaser.Scenes.Events.UPDATE,n.update),n}(0,a.Z)(t,e);var n=t.prototype;return n.isSupport=function(){var e;return this.performance&&!(null==(e=this.performance)||!e.memory)},n.setMaxMemory=function(e){this.maxMemoryLimit=Math.round(e)},n.setMemory=function(e){this.memory=e;var t=Phaser.Utils.String.Format(this.memoryString,[e,this.maxMemoryLimit]);this.memoryText.setText(t)},n.createMemory=function(){this.memoryText=this.scene.make.bitmapText({size:this.scene.fontSize(14),text:this.memoryString,font:v.Z.PRIMARY.KEY,depth:2e3}),this.memoryText.setName("Memory Meter"),this.add(this.memoryText),this.setMemory(0)},t}(Phaser.GameObjects.Container),I=b,w=n(654),_=n(653),x=function(e){function t(t,n,i,a){var s;return(s=e.call(this,t,n,i,a)||this).loadingIcon=void 0,s.messageText=void 0,s.openAnimation=void 0,s.closeTimerEvent=void 0,s.addLoadingIcon(),s.addMessageText(),s.setDepth(l.Ks.PRIORITY),s.background.setAlpha(.5),s.background.setTint(1315862),s}(0,a.Z)(t,e);var n=t.prototype;return n.open=function(t){var n,i=this;e.prototype.open.call(this,t);var a=this.getData(["message","duration","loading"]),s=a[0],r=void 0===s?"":s,o=a[1],c=void 0===o?0:o,h=a[2],u=void 0!==h&&h;this.setMessage(r),this.showLoading(u),null==(n=this.closeTimerEvent)||n.remove(),c>0&&(this.closeTimerEvent=this.scene.time.addEvent({delay:c,callback:function(){i.visible&&i.scene.screen.close(i.name)}})),this.runOpenAnimation()},n.addLoadingIcon=function(){this.loadingIcon=new _.Z(this.scene),this.add(this.loadingIcon),Phaser.Display.Align.In.Center(this.loadingIcon,this.zone)},n.addMessageText=function(){this.messageText=this.scene.make.bitmapText({size:this.scene.fontSize(20),font:v.Z.PRIMARY.KEY,text:"loading",origin:{x:.5,y:.5}}),this.messageText.setCenterAlign(),this.add(this.messageText)},n.setMessage=function(e){this.messageText.setText(e)},n.showLoading=function(e){this.loadingIcon.setVisible(e);var t=!1===e?10:40;Phaser.Display.Align.In.Center(this.messageText,this.zone,0,t)},n.runOpenAnimation=function(){var e,t;null==(e=this.openAnimation)||e.stop(),null==(t=this.openAnimation)||t.remove(),this.openAnimation=new w.Z({targets:[this.messageText,this.loadingIcon],props:{scale:{getStart:function(e){return e.scale-.3},getEnd:function(e){return e.scale}}}}),this.openAnimation.play()},n.logPageviewOnOpen=function(){},n.logPageviewOnClose=function(){},t}(GameCore.Screen),P=x,k=n(642),O=h.Z.DEFAULT,L=O.KEY,R=O.FRAME,B=function(e){function t(){for(var t,n,i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];return(n=e.call.apply(e,r()(t=[this]).call(t,a))||this).mask=void 0,n.fadeInAnim=void 0,n.fadeOutAnim=void 0,n.fpsMeter=void 0,n.memoryMeter=void 0,n.switchScene=function(e){n.currentScene.switch(e)},n.emitGameEventStartScene=function(e){var t=e.scene.key;n.updateSceneState(),n.runMaskFadeOutAnimation(),n.updateActiveSceneKey(t),n.game.events.emit(Phaser.Scenes.Events.START,t),(0,f.sw)("scene","Start scene: "+t)},n.emitGameEventSleepScene=function(e){var t=e.scene.scene.key;t!==u.C.LOAD_SCENE&&(n.runMaskFadeInAnimation(),n.game.events.emit(Phaser.Scenes.Events.SLEEP,t))},n.emitGameEventWakeScene=function(e){var t=e.scene.scene.key;t!==u.C.LOAD_SCENE&&(n.updateSceneState(),n.runMaskFadeOutAnimation(),n.updateActiveSceneKey(t),n.game.events.emit(Phaser.Scenes.Events.WAKE,t))},n.emitGameEventPauseScene=function(e){var t=e.scene.scene.key;n.game.events.emit(Phaser.Scenes.Events.PAUSE,t)},n.emitGameEventResumeScene=function(e){var t=e.scene.key;n.game.events.emit(Phaser.Scenes.Events.RESUME,t)},n.emitGameEventShutdownScene=function(e){var t=e.scene.scene.key;n.game.events.emit(Phaser.Scenes.Events.SHUTDOWN,t)},n}(0,a.Z)(t,e);var n=t.prototype;return n.init=function(){this.listenScenesEvents(),this.game.globalScene=this},n.setup=function(){this.scaleGame(),this.addMask(),this.addNotifyScreen(),this.addFPS(),this.addMemory(),this.showBackground()},n.addNotifyScreen=function(){var e=this.screen.add(l.o4.NOTIFY_SCREEN,P);Phaser.Display.Align.In.Center(e,this.gameZone)},n.addMask=function(){this.mask=this.make.image({key:L,frame:R.BLANK});var e=this.gameZone,t=e.width,n=e.height;this.mask.setAlpha(0),this.mask.setOrigin(0,0),this.mask.setTint(859421),this.mask.setWorldSize(t,n)},n.addFPS=function(){GameCore.Configs.Statistics.ShowFPSInGame&&(this.fpsMeter=new S(this),Phaser.Display.Align.In.TopLeft(this.fpsMeter,this.gameZone,-20,-10))},n.addMemory=function(){GameCore.Configs.Statistics.ShowMemoryInGame&&(this.memoryMeter=new I(this),Phaser.Display.Align.In.TopLeft(this.memoryMeter,this.gameZone,-45,-3))},n.updateSceneState=function(){this.setGlobalSceneOnTop()},n.setGlobalSceneOnTop=function(){this.scene.bringToTop(this)},n.runMaskFadeInAnimation=function(){var e,t;this.mask&&GameCore.Configs.EnableEffectSceneTransition&&(null==(e=this.fadeInAnim)||e.remove(),null==(t=this.fadeOutAnim)||t.remove(),this.fadeInAnim=new o.Z({targets:[this.mask],duration:400,ease:Phaser.Math.Easing.Cubic.In,props:{alpha:{start:0,from:0,to:.6}}}),this.mask.setAlpha(0),this.fadeInAnim.play())},n.runMaskFadeOutAnimation=function(){var e,t;this.mask&&GameCore.Configs.EnableEffectSceneTransition&&(null==(e=this.fadeInAnim)||e.remove(),null==(t=this.fadeOutAnim)||t.remove(),this.fadeOutAnim=new c.Z({targets:[this.mask],duration:400,ease:Phaser.Math.Easing.Cubic.Out,props:{alpha:{start:.6,from:.6,to:0}}}),this.mask.setAlpha(1),this.fadeOutAnim.play())},n.listenScenesEvents=function(){var e=this;this.scene.manager.getScenes(!1).forEach((function(t){t.events.on(Phaser.Scenes.Events.CREATE,e.emitGameEventStartScene),t.events.on(Phaser.Scenes.Events.SLEEP,e.emitGameEventSleepScene),t.events.on(Phaser.Scenes.Events.WAKE,e.emitGameEventWakeScene),t.events.on(Phaser.Scenes.Events.PAUSE,e.emitGameEventPauseScene),t.events.on(Phaser.Scenes.Events.RESUME,e.emitGameEventResumeScene),t.events.on(Phaser.Scenes.Events.SHUTDOWN,e.emitGameEventShutdownScene)})),this.events.on(u.K.SWITCH,this.switchScene),this.world.isLandscape()&&this.events.on(Phaser.Scenes.Events.RENDER,k.Z.updateBgMask)},n.getActiveScene=function(){return this.scene.manager.getScenes(!0)[0]},n.getCurrentScene=function(){return this.currentScene},n.updateActiveSceneKey=function(e){e!==u.C.GLOBAL_SCENE&&this.storage.dispatch((0,d.I)(e))},n.logEventOpen=function(){},n.logPageviewOnOpen=function(){},n.showBackground=function(){var e=this.theme.getCurrentThemeConfig().backgroundKey;this.createBackground(e);var t=this.theme.getCurrentThemeResources();k.Z.updateAppBg(t.backgroundFile)},n.hideBackground=function(){this.background.kill()},(0,i.Z)(t,[{key:"currentScene",get:function(){var e=this.storage.getState(),t=p(e);return(t?this.scene.manager.getScene(t):this.getActiveScene()).scene}}]),t}(g.Z),D=B},649:function(e,t,n){n.d(t,{Z5:function(){return A},H$:function(){return E},wF:function(){return T},bh:function(){return C},Iy:function(){return S},xB:function(){return b}});var i=n(616),a=n(619),s=n(3),r=n.n(s),o=n(35),c=n.n(o),h=n(0),u=n.n(h),l=n(641),d=n(629),p=n(650),f=GameCore.Configs,g=f.AppId,m=f.OtherHost,v=f.LeadersBoard,y=f.Tournament,A=function(){var e=(0,a.Z)(u().mark((function e(t){var n,a;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n={appId:g,resetScore:0,numberOfLeaders:15,timezone:"utc+0",sortOrder:"desc",statistics:"max",resettable:"manually",description:"no description"},!v.UseMock){e.next=5;break}return e.next=4,(0,d.qZ)(1e3);case 4:return e.abrupt("return",(0,i.Z)({},n,t,{_id:v.LeaderboardId,type:"app_leaderboard",description:"mockup_leaderboard",createdAt:new Date(Date.now()).toISOString(),updatedAt:new Date(Date.now()).toISOString()}));case 5:return"leaderboards",e.next=8,(0,l.v)("leaderboards",(0,i.Z)({},n,t),{},m);case 8:return a=e.sent,e.abrupt("return",(null==a?void 0:a.data)||{});case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),E=function(){var e=(0,a.Z)(u().mark((function e(t,n){var i,a,s,o,h,p,f,g,A,E,T;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===n&&(n={}),t){e.next=3;break}return e.abrupt("return",[]);case 3:if(i=[],!y.UseMock){e.next=9;break}return e.next=7,(0,d.qZ)(1e3);case 7:return h=(o=n).limit,void 0===h?Math.floor(10*Math.random()):h,p=o.offset,f=void 0===p?0:p,e.abrupt("return",r()(a=c()(s=new Array(Math.floor(10*Math.random()))).call(s,null)).call(a,(function(e,t){var n=(t+1)*(f+1),i=v.MockOptions.PlayerEntryIndex===t,a={playerId:"player-0"+n,name:"MPlayer "+n,photo:"./assets/images/others/avatar.jpg",rank:n,score:Math.floor(1e5/n+1e4*Math.random())};if(i){var s=window.game.player.getPlayer(),r=s.playerId,o=s.name,c=s.photo;a.playerId=r,a.name=o,a.photo=c}return a})));case 9:return g=GameCore.Utils.String.params(n),A="leaderboards/"+t+"/leaders",e.next=13,(0,l.U)(A+"?"+g,{},m);case 13:if((E=e.sent)&&(null==E||!E.error)){e.next=16;break}throw new Error((null==E?void 0:E.error)||"Leaderboard not found");case 16:if(!((T=(null==E?void 0:E.data)||[]).length<1)){e.next=19;break}return e.abrupt("return",i);case 19:return i=T,e.abrupt("return",i);case 21:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),T=function(){var e=(0,a.Z)(u().mark((function e(t){var n,i;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return",null);case 2:return n="leaderboards/"+t,e.next=5,(0,l.U)(""+n,{},m);case 5:if((i=e.sent)&&(null==i||!i.error)){e.next=8;break}return e.abrupt("return",null);case 8:return e.abrupt("return",null==i?void 0:i.data);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),C=function(){var e=(0,a.Z)(u().mark((function e(t,n,i){var a;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,l.v)("leaderboards/"+t+"/players/"+n,{score:i},{},m);case 2:return a=e.sent,e.abrupt("return",(null==a?void 0:a.data)||{});case 4:case"end":return e.stop()}}),e)})));return function(t,n,i){return e.apply(this,arguments)}}(),S=function(){var e=(0,a.Z)(u().mark((function e(){var t,n,i,a,s,r,o,c,h;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=GameCore.Utils.String.params({limit:100,type:"world_tournament_leaderboard"}),"leaderboards",e.next=4,(0,l.U)("leaderboards?"+t,{},m);case 4:if((n=e.sent)&&(null==n||!n.error)){e.next=7;break}throw new p.Z;case 7:for(i=(null==n?void 0:n.data)||[],a=[],s=0;s<i.length;s++)r=JSON.parse(i[s].description),o=new Date(i[s].createdAt).getTime(),c=Math.round((6048e5+o)/1e3),h={id:r.tournamentID,title:i[s].name,endTime:c,contextID:r.contextID,payload:{playerId:"",playerName:"",leaderboardId:i[s]._id,level:r.level,image:r.image}},a.push(h);return e.abrupt("return",a);case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),b=function(){var e=(0,a.Z)(u().mark((function e(t,n){var i,a,s,r,o;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=null,t){e.next=3;break}return e.abrupt("return",i);case 3:if(a=v.Prefix+"/"+n+"/players"){e.next=6;break}return e.abrupt("return",i);case 6:return s=GameCore.Utils.String.params({playerIds:t}),e.next=9,(0,l.U)(a+"?"+s,{},m);case 9:if(r=e.sent,!((o=(null==r?void 0:r.data)||[]).length<1)){e.next=13;break}return e.abrupt("return",i);case 13:return i=o[0],e.abrupt("return",i);case 15:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},630:function(e,t,n){n.d(t,{_:function(){return i}});var i={BUTTON_CLICK:"button_click",SCREEN_OPEN:"screen_open",LOAD_START:"load_start",LOAD_COMPLETE:"load_complete",APP_READY:"app_ready",TUTORIAL_BEGIN:"tutorial_begin",TUTORIAL_STEP:"tutorial_step",TUTORIAL_COMPLETE:"tutorial_complete",MATCH_START:"match_start",MATCH_RESCUE:"match_rescue",MATCH_END:"match_end",LEVEL_START:"level_start",JOURNEY_START:"journey_start",JOURNEY_END:"journey_end",LEVEL_RESCUE:"level_rescue",LEVEL_CONTINUE:"level_continue",LEVEL_END:"level_end",LEVEL_GIVE_UP:"level_give_up",SHARE:"share",MESSAGE:"message",INVITE:"invite",SHORTCUT_CREATE:"shortcut_create",SHORTCUT_CREATE_POPUP:"shortcut_create_popup",BOT_SUBSCRIBE:"bot_subscribe",BOT_SUBSCRIBE_POPUP:"bot_subscribe_popup",AD_LOAD:"ad_load",AD_LOAD_FAILED:"ad_load_failed",AD_SHOW:"ad_show",AD_SHOW_FAILED:"ad_show_failed",MISSING_AD_SHOW:"missing_ad_show",NEW_USER:"new_user",AD_IMPRESSION:"ad_impression",JOIN_GROUP:"join_group",THEME_CHANGED:"theme_changed",TOURNAMENT_SHARE:"tournament_share",TOURNAMENT_CREATE:"tournament_create",TOURNAMENT_POST_SCORE:"tournament_post_score",TOURNAMENT_START:"tournament_start",SWITCH_SOLO_CONTEXT:"switch_solo_context",PAGE_FOLLOW:"page_follow",GROUP_JOIN:"group_join"}},633:function(e,t,n){var i=n(634),a=function(){function e(e,t,n,a){this.playerId=void 0,this.name=void 0,this.photo=void 0,this.locale=void 0,this.playerId=e,this.name=t,this.photo=n||i.Z.AVATAR.FILE,this.locale=a||"en_US"}return e.prototype.toObject=function(){return{playerId:this.playerId,name:this.name,photo:this.photo,locale:this.locale}},e}();t.Z=a},647:function(e,t,n){n.d(t,{I:function(){return a}});var i=n(639),a=function(e){return{type:i.DW,payload:{sceneKey:e}}}},629:function(e,t,n){n.d(t,{qZ:function(){return o},Gm:function(){return c},F0:function(){return h},uW:function(){return u},wu:function(){return l},Hx:function(){return d},H8:function(){return p}});var i=n(2),a=n.n(i),s=n(8),r=n.n(s),o=function(e){return new(a())((function(t){return setTimeout(t,e)}))},c=function(e){var t=new Date(e),n=new Date;return t.getDate()===n.getDate()&&t.getMonth()===n.getMonth()&&t.getFullYear()===n.getFullYear()},h=function(e,t){void 0===t&&(t=!0);var n=new Date(e).toISOString();return t?r()(n).call(n,11,-5):r()(n).call(n,14,-5)},u=function(e){var t=new Date(e);t.setHours(0,0,0,0);var n=new Date(t.getFullYear(),0,1);return t.setDate(t.getDate()+4-(t.getDay()||7)),Math.ceil(((t.valueOf()-n.valueOf())/864e5+1)/7)},l=function(e,t){var n=new Date(t,0,1),i=7*(e-1),a=new Date(n);return a.setDate(n.getDate()+i-n.getDay()+1),a},d=function(e,t){var n=l(e,t),i=new Date(n);return i.setDate(n.getDate()+7),i.getFullYear()>t||53===e?new Date(t+1,0,1):i},p=function(){return(new Date).getFullYear()}},635:function(e,t){t.Z={GENERIC_NOTIFICATION:0,NEW_USER_NOTIFICATION:1,MONDAY_NOTIFICATION:2,TUESDAY_NOTIFICATION:3,WEDNESDAY_NOTIFICATION:4,THURSDAY_NOTIFICATION:5,FRIDAY_NOTIFICATION:6,SATURDAY_NOTIFICATION:7,SUNDAY_NOTIFICATION:8}}}]);