(function(){var e={446:function(){HTMLCanvasElement.prototype.toBlob||Object.defineProperty(HTMLCanvasElement.prototype,"toBlob",{value:function(e,t,n){for(var i=atob(this.toDataURL(t,n).split(",")[1]),a=i.length,r=a>>2,s=new Uint8Array(a),o=new Uint32Array(s.buffer,0,r),c=0,u=0;c<r;c++)o[c]=i.charCodeAt(u++)|i.charCodeAt(u++)<<8|i.charCodeAt(u++)<<16|i.charCodeAt(u++)<<24;for(var l=3&a;l--;)s[u]=i.charCodeAt(u++);e(new Blob([s],{type:t||"image/png"}))}})},603:function(e,t,n){"use strict";n.d(t,{J:function(){return D},Z:function(){return L}});var i=n(65),a=n(200),r=n.n(a),s=n(66),o=n.n(s),c=n(53),u=n.n(c),l=n(45),h=n.n(l),d=n(83),p=n(205),f=n.n(p),m=function(e){return function(t){t.preventDefault();var n=document.getElementById("popup-add-shortcut");null==n||n.remove(),e()}},g=function(e){var t=document.createElement("div");return t.innerHTML=f()(e).call(e),t.firstChild},v=function(){var e=(0,i.Z)(h().mark((function e(t,n){var i,a,r;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=g('<div style="height: 50vh;width: 53vh;max-width: 95vw;position:absolute;background-color: rgba(31, 120, 136, 0.48);border-radius: 2vh;margin: auto;right: 0;left: 0;top: 0;bottom: 0;display: flex;flex-direction:column;justify-content:space-evenly;">\n            <p style="color:white;font-size:40px;text-align:center">Add shortcut for this game</p>\n            <p style="color:white;font-size:20px;text-align:center">This game wants to add a shortcut.</p>\n        </div>'),a=g('<button style="border: none;background-color: #1877f2;color: #fff;width: 90%;height: 50px;border-radius: 15px;margin-left: auto;margin-right: auto;font-size: 20px;cursor: pointer;">No</button>'),r=g('<button style="border: none;background-color: #1877f2;color: #fff;width: 90%;height: 50px;border-radius: 15px;margin-left: auto;margin-right: auto;font-size: 20px;cursor: pointer;">Yes</button>'),i&&a&&r||n({code:"CREATE_POPUP_ERROR",message:"Show popup failed"}),i.id="popup-add-shortcut",i.appendChild(a),i.appendChild(r),document.body.appendChild(i),a.addEventListener("click",m(n)),r.addEventListener("click",m(t));case 10:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),y=function(){function e(){this.isFirstCall=!0}var t=e.prototype;return t.canCreateShortcutAsync=function(){var e=(0,i.Z)(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isFirstCall){e.next=3;break}return this.isFirstCall=!1,e.abrupt("return",!0);case 3:return e.abrupt("return",!1);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),t.createShortcutAsync=function(){var e=(0,i.Z)(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new(o())((function(e,t){v(e,t)})));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),e}(),E=y,A=function(e){return function(t){t.preventDefault();var n=document.getElementById("popup-subscribe-bots");null==n||n.remove(),e()}},S=function(e){var t=document.createElement("div");return t.innerHTML=f()(e).call(e),t.firstChild},T=function(){var e=(0,i.Z)(h().mark((function e(t,n){var i,a,r;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=S('<div style="height: 50vh;width: 53vh;max-width: 95vw;position:absolute;background-color: rgba(31, 120, 136, 0.48);border-radius: 2vh;margin: auto;right: 0;left: 0;top: 0;bottom: 0;display: flex;flex-direction:column;justify-content:space-evenly;">\n            <p style="color:white;font-size:40px;text-align:center">Turn on messages from this game</p>\n            <p style="color:white;font-size:20px;text-align:center">This game wants to send messages, announcements and more.</p>\n        </div>'),a=S('<button style="border: none;background-color: #1877f2;color: #fff;width: 90%;height: 50px;border-radius: 15px;margin-left: auto;margin-right: auto;font-size: 20px;cursor: pointer;">Not Now</button>'),r=S('<button style="border: none;background-color: #1877f2;color: #fff;width: 90%;height: 50px;border-radius: 15px;margin-left: auto;margin-right: auto;font-size: 20px;cursor: pointer;">Turn On</button>'),i&&a&&r||n({code:"CREATE_POPUP_ERROR",message:"Show popup failed"}),i.id="popup-subscribe-bots",i.appendChild(a),i.appendChild(r),document.body.appendChild(i),a.addEventListener("click",A(n)),r.addEventListener("click",A(t));case 10:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),b=function(){function e(){this.isFirstCall=!0}var t=e.prototype;return t.canSubscribeBotAsync=function(){var e=(0,i.Z)(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isFirstCall){e.next=3;break}return this.isFirstCall=!1,e.abrupt("return",!0);case 3:return e.abrupt("return",!1);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),t.subscribeBotAsync=function(){var e=(0,i.Z)(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new(o())((function(e,t){T(e,t)})));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),e}(),I=b,w=n(426),C=n(194),x=n(631),O=n(428),_=GameCore.Configs,R=_.Notification,P=_.AddShortcut,k=_.SubscribeBot,M=R.GameTitle,D=(R.GameImage,function(){function e(){}var t=e.prototype;return t.createAsync=function(){var e=(0,i.Z)(h().mark((function e(t){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,GameSDK.tournament.createAsync(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t.shareAsync=function(){var e=(0,i.Z)(h().mark((function e(t){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,GameSDK.tournament.shareAsync(t);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t.joinAsync=function(){var e=(0,i.Z)(h().mark((function e(t){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,GameSDK.tournament.joinAsync(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t.postScoreAsync=function(){var e=(0,i.Z)(h().mark((function e(t){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,GameSDK.tournament.postScoreAsync(t);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t.getTournamentsAsync=function(){var e=(0,i.Z)(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,GameSDK.tournament.getTournamentsAsync();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),e}()),N=function(){function e(e){var t=this;this.facebook=void 0,this.supportedAPIs=[],this.mockSubscribeBot=void 0,this.mockAddShortcut=void 0,this.isCalledSubscribeBot=!1,this.isCalledCreateShortcut=!1,this.isCanPlayerMatch=null,this.isCanSubscribeBot=null,this.isCanCreateShortcut=null,this.attemptToAddShortcut=(0,i.Z)(h().mark((function e(){var n,i,a,r,s,o;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.isCalledCreateShortcut){e.next=2;break}return e.abrupt("return",!1);case 2:if(e.prev=2,null===t.isCanCreateShortcut&&(P.UseMock?t.isCanCreateShortcut=!0:t.isCanCreateShortcut=t.isSupportedAPI("canCreateShortcutAsync")),t.isCanCreateShortcut){e.next=6;break}return e.abrupt("return",!1);case 6:return e.next=8,GameSDK.player.getDataAsync(["lastCallCreateShortcut"]);case 8:if(e.t0=e.sent,e.t0){e.next=11;break}e.t0={};case 11:if(n=e.t0,!(i=n.lastCallCreateShortcut||0)||!(0,C.Gm)(+i)){e.next=15;break}return e.abrupt("return",!1);case 15:if(!P.UseMock){e.next=21;break}return e.next=18,t.mockAddShortcut.canCreateShortcutAsync();case 18:e.t1=e.sent,e.next=24;break;case 21:return e.next=23,GameSDK.canCreateShortcutAsync();case 23:e.t1=e.sent;case 24:if(a=e.t1,r=Date.now(),GameSDK.player.setDataAsync({lastCallCreateShortcut:r}),!a){e.next=49;break}return s=d._.SHORTCUT_CREATE,o=d._.SHORTCUT_CREATE_POPUP,t.isCalledCreateShortcut=!0,window.game.analytics.event(o),e.prev=31,e.next=34,GameCore.Utils.Valid.isValueChangeAsync(window.__fbGameReady,!0);case 34:if(!P.UseMock){e.next=39;break}return e.next=37,t.mockAddShortcut.createShortcutAsync();case 37:e.next=41;break;case 39:return e.next=41,FBInstant.createShortcutAsync();case 41:return window.game.analytics.event(s,{success:!0}),e.abrupt("return",!0);case 45:return e.prev=45,e.t2=e.catch(31),window.game.analytics.event(s,{success:!1}),e.abrupt("return",!1);case 49:return e.abrupt("return",!1);case 52:return e.prev=52,e.t3=e.catch(2),e.abrupt("return",!1);case 55:case"end":return e.stop()}}),e,null,[[2,52],[31,45]])}))),this.attemptToSubscribeBot=(0,i.Z)(h().mark((function e(){var n,i,a,r,s;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.isCalledSubscribeBot){e.next=2;break}return e.abrupt("return",!1);case 2:if(e.prev=2,null===t.isCanSubscribeBot&&(k.UseMock?t.isCanSubscribeBot=!0:t.isCanSubscribeBot=t.isSupportedAPI("player.canSubscribeBotAsync")),t.isCanSubscribeBot){e.next=6;break}return e.abrupt("return",!1);case 6:if(!k.UseMock){e.next=12;break}return e.next=9,t.mockSubscribeBot.canSubscribeBotAsync();case 9:e.t0=e.sent,e.next=15;break;case 12:return e.next=14,GameSDK.player.canSubscribeBotAsync();case 14:e.t0=e.sent;case 15:if(!e.t0){e.next=49;break}return e.next=19,GameSDK.player.getDataAsync(["lastCallSubscribeBot"]);case 19:if(e.t1=e.sent,e.t1){e.next=22;break}e.t1={};case 22:if(n=e.t1,!(i=n.lastCallSubscribeBot)||!(0,C.Gm)(+i)){e.next=26;break}return e.abrupt("return",!1);case 26:return a=Date.now(),GameSDK.player.setDataAsync({lastCallSubscribeBot:a}),r=d._.BOT_SUBSCRIBE,s=d._.BOT_SUBSCRIBE_POPUP,t.isCalledSubscribeBot=!0,window.game.analytics.event(s),e.prev=31,e.next=34,GameCore.Utils.Valid.isValueChangeAsync(window.__fbGameReady,!0);case 34:if(!k.UseMock){e.next=39;break}return e.next=37,t.mockSubscribeBot.subscribeBotAsync();case 37:e.next=41;break;case 39:return e.next=41,GameSDK.player.subscribeBotAsync();case 41:return window.game.analytics.event(r,{success:!0}),e.abrupt("return",!0);case 45:return e.prev=45,e.t2=e.catch(31),window.game.analytics.event(r,{success:!1}),e.abrupt("return",!1);case 49:return e.abrupt("return",!1);case 52:return e.prev=52,e.t3=e.catch(2),e.abrupt("return",!1);case 55:case"end":return e.stop()}}),e,null,[[2,52],[31,45]])}))),this.matchPlayerAsync=function(){var e=(0,i.Z)(h().mark((function e(n,i,a){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,null===t.isCanPlayerMatch&&(t.isCanPlayerMatch=t.isSupportedAPI("checkCanPlayerMatchAsync")),t.isCanPlayerMatch){e.next=4;break}return e.abrupt("return",!1);case 4:return e.next=6,GameSDK.checkCanPlayerMatchAsync();case 6:if(e.sent){e.next=9;break}return e.abrupt("return",!1);case 9:return e.next=11,GameSDK.matchPlayerAsync(n,i,a);case 11:return e.abrupt("return",!0);case 14:return e.prev=14,e.t0=e.catch(0),e.abrupt("return",!1);case 17:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(t,n,i){return e.apply(this,arguments)}}(),this.getTournamentAsync=(0,i.Z)(h().mark((function e(){var n,i,a;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.facebook.tournament.getTournamentsAsync();case 2:if(n=e.sent,i=GameSDK.context.getID(),!(a=r()(n).call(n,(function(e){return e.getContextID()===i})))){e.next=7;break}return e.abrupt("return",o().resolve(a));case 7:return e.abrupt("return",o().reject(new x.Z(null)));case 8:case"end":return e.stop()}}),e)}))),this.requestTournamentAsync=function(){var e=(0,i.Z)(h().mark((function e(n){var i;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.facebook.getTournamentAsync();case 3:return e.next=5,t.facebook.tournament.shareAsync({score:n});case 5:e.next=12;break;case 7:return e.prev=7,e.t0=e.catch(0),i=GameSDK.player.getName(),e.next=12,t.facebook.tournament.createAsync({initialScore:n,config:{tournamentTitle:i+"'s Tournament"}});case 12:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),this.isSupportedAPI=function(e){var n;return 0===t.supportedAPIs.length&&(t.supportedAPIs=GameSDK.getSupportedAPIs()),u()(n=t.supportedAPIs).call(n,e)},this.facebook=e,this.mockSubscribeBot=new I,this.mockAddShortcut=new E}var t=e.prototype;return t.switchAsync=function(){var e=(0,i.Z)(h().mark((function e(t){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,GameCore.Utils.Valid.isValueChangeAsync(window.__fbGameReady,!0);case 2:return e.next=4,GameSDK.context.switchAsync(t);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t.chooseAsync=function(){var e=(0,i.Z)(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,GameCore.Utils.Valid.isValueChangeAsync(window.__fbGameReady,!0);case 3:return e.next=5,GameSDK.context.chooseAsync({filters:["INCLUDE_EXISTING_CHALLENGES"],minSize:2,maxSize:2});case 5:case 15:return e.abrupt("return",GameSDK.context.getID());case 8:if(e.prev=8,e.t0=e.catch(0),!(e.t0 instanceof Object&&GameCore.Utils.Object.hasOwn(e.t0,"code"))){e.next=16;break}e.t1=e.t0.code,e.next="USER_INPUT"===e.t1?14:"SAME_CONTEXT"===e.t1?15:16;break;case 14:return e.abrupt("return",!1);case 16:return e.abrupt("return",null);case 17:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}(),t.createAsync=function(){var e=(0,i.Z)(h().mark((function e(t){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,GameCore.Utils.Valid.isValueChangeAsync(window.__fbGameReady,!0);case 3:return e.next=5,GameSDK.context.createAsync(""+t);case 5:case 15:return e.abrupt("return",GameSDK.context.getID());case 8:if(e.prev=8,e.t0=e.catch(0),!(e.t0 instanceof Object&&GameCore.Utils.Object.hasOwn(e.t0,"code"))){e.next=16;break}e.t1=e.t0.code,e.next="USER_INPUT"===e.t1?14:"SAME_CONTEXT"===e.t1?15:16;break;case 14:return e.abrupt("return",!1);case 16:return e.abrupt("return",null);case 17:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),t.getPlayerToken=function(){var e=(0,i.Z)(h().mark((function e(){var t;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,GameSDK.player.getSignedPlayerInfoAsync();case 2:return t=e.sent,e.abrupt("return",t.getSignature());case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),t.getContextPlayers=function(){var e=(0,i.Z)(h().mark((function e(t){var n,i;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,GameSDK.context.getPlayersAsync();case 3:return n=e.sent,i=[],n.forEach((function(e){var n=e.getID();if(n!==t){var a=e.getName();if(a){var r=e.getPhoto();i.push(new w.Z(n,a,r).toObject())}}})),e.abrupt("return",GameCore.Utils.Array.unique(i));case 9:return e.prev=9,e.t0=e.catch(0),e.abrupt("return",[]);case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}(),t.shareAsync=function(){var e=(0,i.Z)(h().mark((function e(t){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,GameSDK.shareAsync(t);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t.sendMessage=function(){var e=(0,i.Z)(h().mark((function e(t){var n,i,a,r,s,o;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.data,i=t.image,a=t.template,r=t.cta,s=t.text,o={data:n,image:i,action:"CUSTOM",template:a,cta:r,text:s,strategy:"IMMEDIATE",notification:"PUSH"},e.next=4,GameSDK.updateAsync(o);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t.inviteAsync=function(){var e=(0,i.Z)(h().mark((function e(t){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,GameSDK.inviteAsync(t);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t.postSessionScoreAsync=function(){var e=(0,i.Z)(h().mark((function e(t){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,GameSDK.postSessionScoreAsync(t);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t.getRewardedVideoAsync=function(){var e=(0,i.Z)(h().mark((function e(t){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,GameSDK.getRewardedVideoAsync(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t.getInterstitialAdAsync=function(){var e=(0,i.Z)(h().mark((function e(t){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,GameSDK.getInterstitialAdAsync(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t.getContextID=function(){return GameSDK.context.getID()},t.setLoadingProgress=function(e){GameSDK.setLoadingProgress(e)},t.getLocale=function(){return GameSDK.getLocale()||"en"},t.injectTournament=function(){var e=(0,i.Z)(h().mark((function e(){var t,i;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!GameCore.Configs.Tournament.UseMock){e.next=11;break}return e.next=4,n.e(783).then(n.bind(n,627));case 4:t=e.sent.default,i=new t,this.facebook.tournament=i,GameSDK.getTournamentAsync=this.getTournamentAsync,GameSDK.tournament=i,e.next=12;break;case 11:this.facebook.tournament=new D;case 12:this.facebook.getTournamentAsync=function(){return FBInstant.getTournamentAsync()},this.facebook.requestTournamentAsync=this.requestTournamentAsync;case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),t.sendNotificationAsync=function(){var e=(0,i.Z)(h().mark((function e(t){var n,i,a;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=t.message,i=t.delayTime,a=t.type,e.next=5,FBInstant.scheduleNotificationAsync({title:M,minDelayInSeconds:i,description:n,type:null!=a?a:O.Z.GENERIC_NOTIFICATION});case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),e}(),L=N},447:function(e,t,n){"use strict";var i=n(100),a=n.n(i),r=n(52),s=n.n(r),o=function(e,t){return void 0===t&&(t=1),a()({length:Math.ceil(e.length/t)},(function(n,i){return s()(e).call(e,i*t,i*t+t)}))},c=n(124),u=n.n(c),l=n(53),h=n.n(l),d=function(e,t){return u()(e).call(e,(function(e){return!h()(t).call(t,e)}))},p=function(e){for(var t=e.length-1;t>0;t--){var n=Math.floor(Math.random()*(t+1)),i=[e[n],e[t]];e[t]=i[0],e[n]=i[1]}},f=n(98),m=n.n(f),g=function(e,t,n){return m()(n).call(n,e)===t&&null!==e&&void 0!==e},v=function(e){return u()(e).call(e,g)},y={chunk:o,difference:d,shuffle:p,unique:v},E=n(99),A=n.n(E),S=n(261),T=n.n(S),b=T()((function(e,t){if("string"===typeof e){var n=t[e.toLowerCase()];if("string"===typeof n)return n}return"?"})),I=T()((function(e){for(var t=null,n=[],i=/:([A-Z0-9?]+)/gm;null!==(t=i.exec(e));)n.push(t[1]);return n})),w=T()((function(e){for(var t=null,n=[],i=/([0-9]+[A-Z?]{1}|[A-Z?]{1})/gm;null!==(t=i.exec(e));){var a=t[0];if(a.length>=2){var r,o=a.length,c=s()(a).call(a,0,o-1),u=a[o-1],l=A()(r=new Array(+c)).call(r,u);n.push.apply(n,l)}else n.push(a)}return n})),C=function(e,t){var n=e,i=GameCore.Utils.Object.invert(t),a={},r=0,s=0;return I(n).forEach((function(e){r=0,s++,a[s]||(a[s]={}),w(e).forEach((function(e){r++,a[s][r]=b(e,i)}))})),a},x=T()((function(e,t){var n=t[e];return"string"===typeof n?""+n.toUpperCase():"?"})),O=function e(t,n,i){void 0===i&&(i=!1);var a="";if(!GameCore.Utils.Valid.isObject(t))return a;var r="",o=1;for(var c in t)if(GameCore.Utils.Object.hasOwn(t,c)){var u=t[c];if(GameCore.Utils.Valid.isObject(u))a+=":"+e(u,n,!0);else if(GameCore.Utils.Valid.isString(u)){var l=x(u,n);l===r?(o++,a=s()(a).call(a,0,-2)):o=1,a+=""+o+l,r=l}}return a=a.replace(/1([A-Z])/g,"$1")},_=function(e){try{return atob(e)}catch(t){return""}},R={decodeMap:C,encodeMap:O,hashToString:_,stringToHash:function(e){try{return btoa(e)}catch(t){return""}}},P=function(e){try{return JSON.parse(e)}catch(t){return null}},k=n(67),M=n.n(k),D=function(e){try{return M()(e,null,0)}catch(t){return""}},N=function(e){return P(D(e))},L={clone:N,decode:P,encode:D},B=n(467),G=n.n(B),U=function(e){return G()({},e)},F=function(e){var t="object"===typeof e||"function"===typeof e,n=Array.isArray(e);return null!==e&&t&&!n},Z=function(e){return void 0===e||null===e},H=function e(t){if(!F(t))return t;for(var n in t){Z(t[n])&&delete t[n];var i=t[n];F(i)&&(t[n]=e(i))}return t},Y=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},z=n(97),V=n.n(z),W=function(e){var t={};return V()(e).forEach((function(n){if(Y(e,n)){var i=e[n];"string"===typeof i&&(t[i]=n)}})),t},K=function(e,t){if(!Array.isArray(e))return{};var n={};return e.forEach((function(e){if(Y(e,t)){var i=e[t];"string"===typeof i&&(n[i]=e)}})),n},j=function e(t,n){for(var i in n)F(t[i])&&F(n[i])?e(t[i],n[i]):t[i]=n[i];return t},X={clone:U,clear:H,hasOwn:Y,invert:W,keyBy:K,merge:j},q=function(e){return e?e[0].toUpperCase()+s()(e).call(e,1):e},J=function(e){var t=0;if(0==e.length)return t;for(var n=0;n<e.length;n++){t=(t<<5)-t+e.charCodeAt(n),t&=t}return t},Q=n(102),$=n.n(Q),ee=function(e){var t;return $()(t=V()(e)).call(t,(function(t,n){var i=e[n];return void 0!==i&&t.push(n+"="+i),t}),[]).join("&")},te=function(e){void 0===e&&(e="0x");for(var t=e,n=0;n<6;n++)t+="0123456789ABCDEF"[Math.floor(16*Math.random())];return t},ne=n(423),ie=function(e){return e.normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/[\u0111\u0110]/g,(function(e){return"\u0111"===e?"d":"D"}))},ae=n(84),re=n.n(ae),se=n(468),oe=n.n(se),ce=function(e,t){var n,i=e.split(" "),a=(i.length<=1?re()(n=[]).call(n,i):[i[0],i.pop()]).join(" "),r=oe()(a).call(a," ")||0,s=r>=0?r:t;return(a.length>t?a.substring(0,s):a).substring(0,t)},ue=n(268),le=n.n(ue),he=function(e){void 0===e&&(e=16);var t=function(t){return Math.floor(t).toString(e)};return t(Date.now()/1e3)+le()(" ").call(" ",e).replace(/./g,(function(){return t(Math.random()*e)}))},de={capitalize:q,hashCode:J,params:ee,toCamelCase:function(e){var t=e.replace(/[-_\s.]+(.)?/g,(function(e,t){return t?t.toUpperCase():""}));return t.substr(0,1).toLowerCase()+t.substr(1)},toUpperCamelCase:function(e){var t=e.replace(/[-_\s.]+(.)?/g,(function(e,t){return t?t.toUpperCase():""}));return t.substr(0,1).toUpperCase()+t.substr(1)},randomColor:te,random:ne.Z,removeDiacritics:ie,getShortName:ce,generateObjectId:he},pe=function(e){return"boolean"===typeof e},fe=function(){return!1},me=function(e){return"function"===typeof e},ge=function(e){return"number"===typeof e},ve=function(e){var t;return m()(t=["string","number","symbol"]).call(t,typeof e)>-1},ye=function(e){return"string"===typeof e},Ee=n(66),Ae=n.n(Ee),Se=function(e,t,n){var i=n||{},a=i.timeout,r=void 0===a?1e3:a,s=i.checkInterval,o=void 0===s?100:s;return new(Ae())((function(n){var i=setInterval((function(){("function"===typeof e?e():e)===("function"===typeof t?t():t)&&(clearInterval(i),n(!0))}),o);r>0&&setTimeout((function(){clearInterval(i),n(!1)}),r)}))},Te={isBoolean:pe,isDebugger:fe,isFunction:me,isNumber:ge,isObject:F,isPropertyKey:ve,isString:ye,isValueChangeAsync:Se},be=function(e){var t=e.scene,n=e.key,i=e.newKey,a=t.textures.get(n).getSourceImage();if(!a)return!1;var r=Math.min(a.width,a.height);i||t.textures.removeKey(n);var s=t.textures.createCanvas(i||n,r,r),o=s.context;return o.beginPath(),o.arc(r/2,r/2,r/2,0,2*Math.PI,!1),o.clip(),s.draw((a.width-r)/2,(a.height-r)/2,a),!0},Ie=function(e){var t=e.scene,n=e.key,i=e.newKey,a=e.radius,r=e.width,s=e.height,o=t.textures.get(n).getSourceImage();if(!o)return!1;r||(r=o.width),s||(s=o.height),i||t.textures.removeKey(n);var c=t.textures.createCanvas(i||n,r,s),u=c.context,l=Math.min(r,s)/100*a/2;return u.beginPath(),u.moveTo(0+l,0),u.lineTo(0+r-l,0),u.quadraticCurveTo(0+r,0,0+r,0+l),u.lineTo(0+r,0+s-l),u.quadraticCurveTo(0+r,0+s,0+r-l,0+s),u.lineTo(0+l,0+s),u.quadraticCurveTo(0,0+s,0,0+s-l),u.lineTo(0,0+l),u.quadraticCurveTo(0,0,0+l,0),u.closePath(),u.clip(),c.draw(0,0,o),!0},we=function(){return GameCore.Utils.Device.isDesktop()||GameCore.Utils.Device.pixelRatio()>1?2:1},Ce=function(e,t){var n=e.split(","),i=n[0].match(/:(.*?);/);if(!i)return null;for(var a=i[1],r=atob(n[n.length-1]),s=r.length,o=new Uint8Array(s);s--;)o[s]=r.charCodeAt(s);return new File([o],t,{type:a})},xe=n(289),Oe=n.n(xe),_e=new Image,Re=function(e,t){return void 0===t&&(t=!0),new(Ae())((function(n){t&&(_e=new Image),_e.onload=function(){n(_e)},_e.onerror=function(){n(null)},_e.src=Oe().createObjectURL(e)}))},Pe=n(65),ke=n(45),Me=n.n(ke),De=function(){var e=(0,Pe.Z)(Me().mark((function e(t,n){var i;return Me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t).then((function(e){return e.blob()})).catch((function(){return null}));case 2:if(i=e.sent){e.next=5;break}return e.abrupt("return",null);case 5:return e.abrupt("return",new File([i],n));case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),Ne=function(e){if(m()(e).call(e,".")<0)return e;for(var t=e.length-1;t>=0;t--){if("."==e[t])return e.substring(0,t);if("0"!=e[t])return e.substring(0,t+1)}return e},Le=function(e,t){var n=t||{},i=n.fractionalDigits,a=void 0===i?0:i,r=n.startAbbreviate,s=void 0===r?1e3:r,o=n.abbreviateStep,c=void 0===o?3:o,u=n.maxLength,l=void 0===u?-1:u,h=n.removeLastZero,d=void 0===h||h,p=n.suffixes,f=void 0===p?["","k","m","b","t","q"]:p,m=-1===l?99999999:l;if(e>=s){var g=Math.floor(e/Math.pow(10,c)),v=Math.floor((g.toString().length-1)/c)+1,y=(e/Math.pow(Math.pow(10,c),v)).toFixed(a),E=m-f[v].length,A=y.substring(0,E);return(d?Ne(A):A)+f[v]}var S=e.toFixed(a),T=m-f[0].length,b=S.substring(0,T);return d?Ne(b):b+f[0]},Be={Array:y,Hash:R,Json:L,Object:X,String:de,Valid:Te,Image:{drawCircle:be,drawBorder:Ie,getImageScale:we,base64ToFile:Ce,blobToHtmlImage:Re,blobUrlToFile:De},Number:{toAbbreviatedString:Le,padStart:function(e,t,n){void 0===n&&(n="0");for(var i=e.toString(),a=i.length,r=0;r<t-a;r++)i=n+i;return i},padEnd:function(e,t,n){void 0===n&&(n="0");for(var i=e.toString(),a=i.length,r=0;r<t-a;r++)i+=n;return i},random:function(e,t){var n=t?Math.random()>.5?1:-1:1;return Math.floor(Math.random()*e)*n}},Device:{isDesktop:function(){return!/Android|iPhone|iPad|iPod/i.test(navigator.userAgent)},isMobile:function(){return/Android|iPhone|iPad|iPod/i.test(navigator.userAgent)},isAndroid:function(){return window.__fbPlatform?"ANDROID"===window.__fbPlatform:/Android/i.test(navigator.userAgent)},isIOS:function(){return window.__fbPlatform?"IOS"===window.__fbPlatform:/iPhone|iPad|iPod/i.test(navigator.userAgent)},isMobileWeb:function(){return window.__fbPlatform?"MOBILE_WEB"===window.__fbPlatform:/mobile/i.test(navigator.userAgent)},pixelRatio:function(){return Math.round(window.devicePixelRatio)||1}},Time:{isToday:function(e){var t=new Date(e),n=new Date;return t.getDate()===n.getDate()&&t.getMonth()===n.getMonth()&&t.getFullYear()===n.getFullYear()},sleepAsync:function(e){return new(Ae())((function(t){return setTimeout(t,e)}))}}},Ge=n(82),Ue=n(122),Fe={},Ze={ENV:"production",AppId:"9nktr6nbxjk7",ApiHost:"https://fbig-singleplay-apps.citigo.site",OtherHost:"https://fbig-leaderboards.citigo.site",SyncProfileFromAPI:!1,Ads:{Enabled:!0},LeadersBoard:{LeaderboardId:"666fb1b893f336369ac33cb4"},Rollbar:{Enable:!1},Notification:{Enable:!0},Debugger:{ShowConsole:!1,ShowInspector:!1,ShowMonitoring:!1},Statistics:{Enable:!1,ShowFPSInGame:!1,ShowMemoryInGame:!1}},He={ENV:"development",AppId:"9nktr6nbxjk7",ApiHost:"https://fbig-singleplay-apps-dev.sunstudio.io",OtherHost:"https://leaderboards-dev.sunstudio.io",SyncProfileFromAPI:!0,Notification:{Enable:!0,DisableSendNotification:!1,ApiUrl:"https://notifications.sunstudio.io",GameTitle:"Pop Jewels Master",GameImage:"https://static-tt.citigo.site/fbig-singleplay-apps/pop-jewels-banner.jpg",DailyNotificationMessages:{MONDAY:"Start the week with a pop! Match gems and unlock rewards today in Pop Jewels Master. Let's make Monday sparkle! \ud83d\udc8e",TUESDAY:"Tuesday treasure awaits! Match 3 or more gems to clear the board and claim your daily bonus. Pop now! \ud83d\udca5",WEDNESDAY:"Halfway through the week! Need a break? Come pop some gems and relax with Pop Jewels Master. Your gems are calling! \ud83d\udd37",THURSDAY:"Thursday challenge: Can you create a super combo today? Jump in and match those gems for big rewards! \u2728",FRIDAY:"Finish the week strong! Match gems and get your weekend boost. It's time for some jewel-popping fun! \ud83d\udc8e\ud83c\udf89",SATURDAY:"Saturday special! New rewards are waiting. Pop some gems and start the weekend with a win in Pop Jewels Master! \ud83c\udfae",SUNDAY:"Sunday Funday! Unwind by matching gems and collecting bonuses. Get ready for a relaxing day with Pop Jewel Master! \ud83c\udf1f"}},AddShortcut:{UseMock:!1},SubscribeBot:{UseMock:!1},PlayerMock:{id:"",signature:""},OpponentMock:{id:"",signature:""},MatchMockFailRate:5,Gameplay:{StartLevel:1,StartScore:0,StartDiamonds:0,BlitzTimeLimit:9e4,BlitzBonusTimePerGem:0,ResetBlitzTimerEachLevel:!1,BlitzRescueTime:3e4,LevelDifficultRate:{FromUnder30:1.07,FromUnder35:1.05,FromUnder45:1.05,FromUnder200:1.1},StartAdAtLevel:1,GiftTime:600,AwardDiamonds:100,FreeItems:!1,DelayStart:2e3,DelayLevelUp:1800,DelayFinishGame:2900,EnableVibrate:!0},Tutorial:{ForceUseTutorial:!1,NumberOfTutorial:{FirstMove:3,TargetScore:1,CurrentScore:1,ColorfulGem:1,ItemPaint:1,ItemHammer:1,ItemShuffle:1}},PlayerDataStore:"playerData",Game:{AutoResize:!0,PortraitRatio:375/667,PortraitWidth:375,PortraitHeight:667,LandscapeRatio:760/450,LandscapeWidth:760,LandscapeHeight:500,ForcePixelRatio:0,DisableLandscape:!0,FullSizeOnLandscape:!1},Debugger:{ShowInspector:!1,ShowMonitoring:!1,ShowConsole:!1,Expanded:!0,AutoRefresh:!0,InspectorAutoUpdate:!0,Opacity:.8,ListPlayerDevIds:[]},Statistics:{Enable:!1,DisplayMode:0,FPS:!0,MS:!0,MB:!0,Opacity:.8,ShowFPSInGame:!0,ShowMemoryInGame:!1},ParticleEditor:{Enable:!1,Opacity:.8,Expanded:!0},ProfilerPlugin:{Enable:!1},CanvasRecorder:{Enable:!1,Options:{Type:"png",Quality:.85,RecordFps:60,SyncFps:!0}},Match:{MaxRescueCount:1,RescueGamePopupTimeout:15,ContinueSingleMatchEnabled:!0,SingleMatchStore:"singleMatch",LocalSingleMatchDefault:{_id:"12345678890",status:"open",playerId:"",score:0,level:1,startedAt:0,updateAt:0,finishAt:0,data:{}}},DailyRewards:{MaxDays:6,MockTime:0,CheckInterrupt:!0},DailyTasks:{Duration:86400},Tournament:{UseMock:!1,ForcePlay:!1,UseLeaderboard:!1,TournamentContextIds:[],YourMockTournamentCount:1},LeadersBoard:{Name:"GlobalLeaderboard",UseMock:!1,Prefix:"leaderboards",LeaderboardId:"666fb1b893f336369ac33cb4",Limit:50,MockOptions:{PlayerEntryIndex:-1}},LanguageSupport:{en:"en"},EnableEffectSceneTransition:!1,DefaultTheme:"default",ThemeSupport:{default:"default"},Ads:{Enabled:!0,AdService:"msgames",FallbackService:"google",AdServiceConfigs:{Google:{DataAdClient:"ca-pub-2993382360222769",DataAdFrequencyHint:30,DataAdBreakTest:!1,DataAdChannel:"2397623771"}},CalculateSafeAreaBottom:!0,EnableRewardVideoResetInterstitial:!1,Mockup:{Enable:!1,ErrorRate:5,GiphyApiKey:""},InterstitialAdOptions:{pID:"",showWhenStartGame:!1,secondsFirstTime:30,secondsBetweenAds:30},RewardAdOptions:{pID:"",secondsFirstTime:0,secondsBetweenAds:0},BannerAdOptions:[{placementId:"123",position:"bottom",bannerWidth:320,bannerHeight:50,platform:"MOBILE",secondsReload:60},{placementId:"456",position:"right",bannerWidth:160,bannerHeight:600,platform:"DESKTOP",secondsReload:60}]},Network:{MaximumRequest:6,Timeout:15e3,Retries:3},Analytics:{GoogleAnalytics:{consoleLog:!1},FacebookAnalytics:{prefix:"fba",consoleLog:!1}},Sentry:{errorCodes:{accepted:[],ignored:["USER_INPUT","NETWORK_FAILURE"]},errorMessages:{accepted:[],ignored:["Load image failed","Script error."]}},Rollbar:{Enable:!1,UseMockup:!1,FilterError:{Codes:{accepted:[],ignored:["USER_INPUT","NETWORK_FAILURE"]},Messages:{accepted:[],ignored:["Load image failed","Request failed to be processed","Script error."]}}},Performance:{Enable:!1,trackingSceneKeys:["DASHBOARD_SCENE","GAME_SCENE"],minQuality:1,maxQuality:2,fpsThreshold:48,checkInterval:2e3,qualityAdjustStep:.1,autoUpgradeQuality:!0,onlyUpdateWhenSwitchScene:!0}};He=(0,Ue.TS)((0,Ge.Z)({},He),Ze);var Ye=He=(0,Ue.TS)((0,Ge.Z)({},He),Fe),ze=function(e){return function(t){try{var n=window.game,i=t.module;if(n.scene.getScenes(!0)[0].scene.key!==e)return;var a=i.default;n.scene.remove(e),n.scene.add(e,a,!0),n.scene.bringToTop(n.globalScene)}catch(s){var r;null==(r=void 0)||r.invalidate()}}},Ve=n(538),We=n.n(Ve),Ke=n(540),je=n.n(Ke),Xe=n(542),qe=n.n(Xe),Je=n(192),Qe=!1,$e=function e(t,n,i){n.forEach((function(n){if(n.name){var a=null;if(a=i?i.getByName(n.name):t.children.getByName(n.name)){if("Container"===n.type){var r=a,s=n.getAll();if(e(t,s,r),!r.hotContainer)return}var o=We()(n),c=["_events","_sysEvents","input","localTransform","list","displayList"],l=u()(o).call(o,(function(e){if("string"!==typeof e)return!1;if(m()(c).call(c,e)>=0)return!1;if(!a)return!1;var t=je()(n,e);return!(t instanceof Function)&&(!(t instanceof Phaser.Scene)&&(!(t instanceof Phaser.GameObjects.Group)&&(!(t instanceof Phaser.GameObjects.GameObject)&&t===je()(a,e))))}));l.length<1||l.forEach((function(e){if(a){var t=je()(n,e);je()(a,e),qe()(a,e,t)}}))}}}))},et={Configs:Ye,Utils:Be,LiveUpdate:{Scene:ze,SceneObjects:function(e,t){return void 0===t&&(t=Qe),function(n){try{var i=window.game,a=n.module,r=i.scene.getScenes(!0)[0];if(r.scene.key!==e)return;Qe=t;var s=a.default,o=e+"-draft";i.scene.remove(o);var c=i.scene.add(o,s);r=i.scene.getScene(e),c.events.once(Phaser.Scenes.Events.RENDER,(0,Je.D)((function(){var e=c.children.getAll();$e(r,e),i.scene.remove(o)})),50),i.scene.run(o),i.scene.bringToTop(r),i.scene.bringToTop(i.globalScene)}catch(u){}}}}};window.GameCore=et},600:function(e,t,n){"use strict";n.r(t);var i=n(65),a=n(5),r=n(53),s=n.n(r),o=n(126),c=n.n(o),u=n(45),l=n.n(u),h=n(83),d=n(198),p=GameCore.Utils.Object,f=GameCore.Ads,m=f.Types,g=f.Status,v="msgames",y=function(e){function t(t,n){var i;return(i=e.call(this,t)||this).instance=void 0,i.placementId=void 0,i.instanceLoadFailedQueue=void 0,i.isHasTooManyInstancesError=void 0,i.instance=null,i.placementId=n,i.instanceLoadFailedQueue=[],i.isHasTooManyInstancesError=!1,i}(0,a.Z)(t,e),t.setGame=function(e){self.game=e};var n=t.prototype;return n.loadAsync=function(){var e=(0,i.Z)(l().mark((function e(){var t,n,i;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.status===g.IDLE){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,this.status=g.LOADING,e.next=6,this.createInstanceByType(this.type);case 6:if(this.instance=e.sent,null!==this.instance){e.next=9;break}throw new GameCore.Ads.AdError("AD_INSTANCE_NOT_INITIATED","Ad instance didn't initiated.");case 9:return e.next=11,this.instance.loadAsync();case 11:this.status=g.FILLED,t=this.getSceneName(),this.type===m.PRE_ROLL&&self.game.analytics.loadPreRollAd(t,v),this.type===m.INTERSTITIAL&&self.game.analytics.loadInterstitialAd(t,v),this.type===m.REWARDED&&self.game.analytics.loadRewardedVideoAd(t,v),e.next=25;break;case 18:throw e.prev=18,e.t0=e.catch(2),this.status=g.IDLE,this.instance&&this.instanceLoadFailedQueue.push(this.instance),this.instance=null,this.isAdTypeValid(this.type)&&(n=this.getSceneName(),i={type:this.type,placement:n,adService:v},self.game.analytics.loadAdFail(i)),e.t0;case 25:case"end":return e.stop()}}),e,this,[[2,18]])})));return function(){return e.apply(this,arguments)}}(),n.showAsync=function(){var e=(0,i.Z)(l().mark((function e(){var t,n,i,a;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=!1,null,e.prev=2,this.status===g.FILLED){e.next=5;break}throw new GameCore.Ads.AdError("AD_NOT_FILLED","Ads no fill.");case 5:if(this.status=g.SHOWING,null!==this.instance){e.next=8;break}throw new GameCore.Ads.AdError("AD_INSTANCE_NOT_INITIATED","Ad instance didn't initiated.");case 8:return this.isHasTooManyInstancesError&&self.game.analytics.event(h._.MISSING_AD_SHOW,{ad_type:this.type}),e.next=11,this.instance.showAsync();case 11:t=!0,this.status=g.IDLE,this.instance=null,e.next=21;break;case 16:throw e.prev=16,e.t0=e.catch(2),e.t0 instanceof Object&&p.hasOwn(e.t0,"code")?("ADS_NOT_LOADED"===e.t0.code?this.status=g.FILLED:(this.status=g.IDLE,this.instance=null),"USER_INPUT"===e.t0.code&&(this.status=g.IDLE,this.instance=null,t=!0)):(this.status=g.IDLE,this.instance=null),e.t0,e.t0;case 21:return e.prev=21,window.focus(),n=this.getSceneName(),t?(this.type===m.PRE_ROLL&&self.game.analytics.showPreRollAd(n,v),this.type===m.INTERSTITIAL&&self.game.analytics.showInterstitialAd(n,v),this.type===m.REWARDED&&self.game.analytics.showRewardedVideoAd(n,v)):this.isAdTypeValid(this.type)&&(i=this.getSceneName(),a={type:this.type,placement:i,adService:v},self.game.analytics.showAdFail(a)),e.finish(21);case 26:case"end":return e.stop()}}),e,this,[[2,16,21,26]])})));return function(){return e.apply(this,arguments)}}(),n.getStatus=function(){return this.status},n.createInstanceByType=function(){var e=(0,i.Z)(l().mark((function e(t){var n;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=self.game.facebook,e.prev=1,e.t0=t,e.next=e.t0===m.REWARDED?5:e.t0===m.INTERSTITIAL||e.t0===m.PRE_ROLL?8:11;break;case 5:return e.next=7,n.getRewardedVideoAsync(this.placementId);case 7:case 10:return e.abrupt("return",e.sent);case 8:return e.next=10,n.getInterstitialAdAsync(this.placementId);case 11:case 20:return e.abrupt("return",null);case 12:e.next=21;break;case 14:if(e.prev=14,e.t1=e.catch(1),!(e.t1 instanceof Object&&p.hasOwn(e.t1,"code"))){e.next=20;break}if("ADS_TOO_MANY_INSTANCES"!==e.t1.code){e.next=20;break}return this.isHasTooManyInstancesError=!0,e.abrupt("return",this.instanceLoadFailedQueue.shift()||null);case 21:case"end":return e.stop()}}),e,this,[[1,14]])})));return function(t){return e.apply(this,arguments)}}(),n.getSceneName=function(){try{var e=self.game.globalScene;return e instanceof d.Z?e.getCurrentScene().scene.getSceneName():"unknown"}catch(t){return"unknown"}},n.isAdTypeValid=function(e){var t;return s()(t=c()(m)).call(t,e)},t}(GameCore.Ads.AdInstance);t.default=y},601:function(e,t,n){"use strict";n.r(t);var i,a=n(65),r=n(96),s=n(21),o=n(5),c=n(66),u=n.n(c),l=n(53),h=n.n(l),d=n(126),p=n.n(d),f=n(45),m=n.n(f),g=n(83),v=n(198),y=GameCore,E=y.Utils.Object,A=y.Ads,S=A.Types,T=A.Status,b="not-loaded",I="loading",w="loaded",C="google",x=function(e){function t(n,i){var a;return(a=e.call(this,n)||this).instance=void 0,a.instance=null,a.status=T.IDLE,window.setInterstitialPlacementType=t.setInterstitialPlacementType,window.setRewardedPlacementType=t.setRewardedPlacementType,window.setPreRollPlacementType=t.setPreRollPlacementType,t.childAdInstances.push((0,s.Z)(a)),t.isPreloadConfigReady&&(a.status=T.FILLED),a}(0,o.Z)(t,e),t.initGoogleAdsAsync=function(){var e=(0,a.Z)(m().mark((function e(n){return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("loaded"!==t.initStatus){e.next=3;break}return e.abrupt("return");case 3:t._initStatus=I,t.adsByGoogleConfig=n,t.loadScriptElementAsync(n);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t.configGoogleAdsOnInit=function(){var e=(0,a.Z)(m().mark((function e(){return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:window.adsbygoogle=window.adsbygoogle||[],window.adBreak=function(e){adsbygoogle.push(e)},window.adConfig=function(e){adsbygoogle.push(e)},t._initStatus=w,t.runPreloadAdConfig();case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),t.runPreloadAdConfig=function(){var e=(0,a.Z)(m().mark((function e(){return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preloadPromise=new(u())((function(e,n){window.adConfig({preloadAdBreaks:"on",onReady:function(){t.isPreloadConfigReady=!0,t.handlePostPreloadAdComplete(),e()}}),setTimeout((function(){t.isPreloadConfigReady||n(new Error("Failed to preload ad config in time."))}),1e4)})),e.abrupt("return",t.preloadPromise);case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),t.loadScriptElementAsync=function(e){return new(u())((function(n,i){var a=e.dataAdClient,r=e.dataAdHost,s=e.dataAdChannel,o=e.dataAdBreakTest,c=e.dataAdFrequencyHint;if(!a&&!r)return t._initStatus=b,void i(new Error("dataAdClient or dataAdHost is required."));var u=document.createElement("script");u.async=!0,u.setAttribute("data-ad-frequency-hint",c+"s"),a&&u.setAttribute("data-ad-client",a),s&&u.setAttribute("data-ad-channel",s),r&&u.setAttribute("data-ad-host",r),o&&u.setAttribute("data-adbreak-test","on");var l="";if(a||r){l="?";var h=[];a&&h.push("client="+a),r&&h.push("host="+r),l+=h.join("&")}u.src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"+l,u.crossOrigin="anonymous",u.onload=function(){t.configGoogleAdsOnInit(),n(!0)},u.onerror=function(){t._initStatus=b,i(new Error("Failed to load Google Ads script."))};var d=document.createElement("script");d.text="window.adsbygoogle = window.adsbygoogle || []; var adBreak = adConfig = function(o) {adsbygoogle.push(o);}",document.head.appendChild(u),document.head.appendChild(d)}))};var n=t.prototype;return n.makeAdInstance=function(){var e=this;return{getPlacementID:function(){return""},loadAsync:function(){return e.preloadAdPlacement()},showAsync:function(){return e.createAdPlacement()}}},n.preloadAdPlacement=function(){return t._initStatus!==w?u().reject(new Error("Google Ads not initiated.")):t.isPreloadConfigReady?u().resolve():t.preloadPromise?t.preloadPromise:t.runPreloadAdConfig()},n.createAdPlacement=function(){switch(this.type){case S.PRE_ROLL:return this.createAdPlacementPreroll();case S.REWARDED:return this.createAdPlacementRewarded();case S.INTERSTITIAL:return this.createAdPlacementInterstitial();default:return u().reject(new GameCore.Ads.AdError("UNSUPPORTED_AD_TYPE","Unsupported."))}},n.createAdPlacementPreroll=function(){return new(u())((function(e,n){window.adBreak({type:t.preRollPlacementType,name:"prerollAd",adBreakDone:function(t){switch(t.breakStatus){case"dismissed":case"viewed":return void e();default:return void n(new GameCore.Ads.AdError(t.breakStatus,t.breakType))}}})}))},n.createAdPlacementInterstitial=function(){return new(u())((function(e,n){window.adBreak({type:t.interstitialPlacementType,name:"interstitialAd",beforeAd:function(){self.game.ads.hideBannerAdAsync()},adBreakDone:function(t){switch(self.game.ads.showBannerAdAsync(),t.breakStatus){case"dismissed":case"viewed":return void e();default:return void n(new GameCore.Ads.AdError(t.breakStatus,t.breakType))}}})}))},n.createAdPlacementRewarded=function(){return new(u())((function(e,n){window.adBreak({type:t.rewardedPlacementType,name:"rewardedAd",beforeReward:function(e){self.game.ads.hideBannerAdAsync(),e()},adViewed:function(){},adDismissed:function(){},adBreakDone:function(t){switch(self.game.ads.showBannerAdAsync(),t.breakStatus){case"dismissed":return void n(new GameCore.Ads.AdError("USER_INPUT","User dismissed."));case"viewed":return void e();default:return void n(new GameCore.Ads.AdError(t.breakStatus,t.breakType))}}})}))},t.setGame=function(e){self.game=e},n.getStatus=function(){return this.status},n.loadAsync=function(){var e=(0,a.Z)(m().mark((function e(){var n,i,a;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,t.isPreloadConfigReady){e.next=3;break}return e.abrupt("return");case 3:if(this.instance=this.makeAdInstance(),null!==this.instance){e.next=6;break}throw new GameCore.Ads.AdError("AD_INSTANCE_NOT_INITIATED","Ad instance didn't initiated.");case 6:return e.next=8,this.instance.loadAsync();case 8:n=this.getSceneName(),this.type===S.PRE_ROLL&&self.game.analytics.loadPreRollAd(n,C),this.type===S.INTERSTITIAL&&self.game.analytics.loadInterstitialAd(n,C),this.type===S.REWARDED&&self.game.analytics.loadRewardedVideoAd(n,C),e.next=18;break;case 14:throw e.prev=14,e.t0=e.catch(0),this.isAdTypeValid(this.type)&&(i=this.getSceneName(),a={type:this.type,placement:i,adService:C},self.game.analytics.loadAdFail(a)),e.t0;case 18:case"end":return e.stop()}}),e,this,[[0,14]])})));return function(){return e.apply(this,arguments)}}(),n.showAsync=function(){var e=(0,a.Z)(m().mark((function e(){var t,n,i,a;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=!1,e.prev=1,this.status===T.FILLED){e.next=4;break}throw new GameCore.Ads.AdError("AD_NOT_FILLED","Ads no fill.");case 4:if(this.status=T.SHOWING,null!==this.instance){e.next=8;break}return e.next=8,this.loadAsync();case 8:if(null!==this.instance){e.next=10;break}throw new GameCore.Ads.AdError("AD_INSTANCE_NOT_INITIATED","Ad instance didn't initiated.");case 10:return e.next=12,this.instance.showAsync();case 12:t=!0,this.handlePostShowAdStatus(),this.instance=null,e.next=27;break;case 17:if(e.prev=17,e.t0=e.catch(1),!(e.t0 instanceof Object&&E.hasOwn(e.t0,"code"))){e.next=24;break}if("noAdPreloaded"!==e.t0.code){e.next=22;break}return e.abrupt("return");case 22:"USER_INPUT"===e.t0.code&&(t=!0),"frequencyCapped"===e.t0.code&&self.game.analytics.event(g._.MISSING_AD_SHOW,{ad_type:this.type});case 24:throw this.handlePostShowAdStatus(),this.instance=null,e.t0;case 27:return e.prev=27,window.focus(),n=this.getSceneName(),t?(this.type===S.PRE_ROLL&&self.game.analytics.showPreRollAd(n,C),this.type===S.INTERSTITIAL&&self.game.analytics.showInterstitialAd(n,C),this.type===S.REWARDED&&self.game.analytics.showRewardedVideoAd(n,C)):this.isAdTypeValid(this.type)&&(i=this.getSceneName(),a={type:this.type,placement:i,adService:C},self.game.analytics.showAdFail(a)),e.finish(27);case 32:case"end":return e.stop()}}),e,this,[[1,17,27,32]])})));return function(){return e.apply(this,arguments)}}(),n.getSceneName=function(){try{var e=self.game.globalScene;return e instanceof v.Z?e.getCurrentScene().scene.getSceneName():"unknown"}catch(t){return"unknown"}},n.isAdTypeValid=function(e){var t;return h()(t=p()(S)).call(t,e)},n.handlePostShowAdStatus=function(){t.isPreloadConfigReady?this.status=T.FILLED:this.status=T.IDLE},t.handlePostPreloadAdComplete=function(){t.childAdInstances.forEach((function(e){e.status=T.FILLED}))},(0,r.Z)(t,null,[{key:"initStatus",get:function(){return t._initStatus}}]),t}(GameCore.Ads.AdInstance);i=x,x.childAdInstances=[],x._initStatus=b,x.isPreloadConfigReady=!1,x.adsByGoogleConfig=void 0,x.preloadPromise=void 0,x.preRollPlacementType="preroll",x.interstitialPlacementType="next",x.rewardedPlacementType="reward",x.setInterstitialPlacementType=function(e){i.interstitialPlacementType=e},x.setRewardedPlacementType=function(e){i.rewardedPlacementType=e},x.setPreRollPlacementType=function(e){i.preRollPlacementType=e},t.default=x},606:function(e,t,n){"use strict";n.d(t,{U:function(){return S},v:function(){return T}});var i=n(82),a=n(65),r=n(45),s=n.n(r),o=n(67),c=n.n(o),u=n(5),l=n(195),h=function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).name="BadRequest",i.message=t||"This request is bad",i.payload=n,i}return(0,u.Z)(t,e),t}((0,l.Z)(Error)),d=function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).name="RequestTimeout",i.message=t||"This request is timeout",i.payload=n,i}return(0,u.Z)(t,e),t}((0,l.Z)(Error)),p=n(194),f=GameCore.Configs,m=f.AppId,g=f.Network,v=function(e){if(!e.ok)throw new h(null,{response:e})},y=function(){var e=window.game.auth.getToken();return{token:e,timeout:g.Timeout,headers:{Authorization:"Bearer "+e,"Content-Type":"application/json"}}},E=function(e,t,n,i){return(0,a.Z)(s().mark((function a(){var r,o,u,l,p;return s().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,r=e+"/apps/"+m+"/"+t,o=new AbortController,n.signal=o.signal,u=setTimeout((function(){o.abort()}),n.timeout),GameCore.Utils.Valid.isObject(i)&&(n.body=c()(i)),a.next=8,fetch(r,n);case 8:return l=a.sent,clearTimeout(u),v(l),a.next=13,l.json();case 13:if(a.t0=a.sent,a.t0){a.next=16;break}a.t0={};case 16:return p=a.t0,a.abrupt("return",p);case 20:if(a.prev=20,a.t1=a.catch(0),!(a.t1 instanceof h)){a.next=24;break}return a.abrupt("return",null);case 24:if(!(a.t1 instanceof Object&&GameCore.Utils.Object.hasOwn(a.t1,"name"))){a.next=27;break}if("AbortError"!==a.t1.name){a.next=27;break}throw new d(null);case 27:throw a.t1;case 28:case"end":return a.stop()}}),a,null,[[0,20]])})))},A=function(){var e=(0,a.Z)(s().mark((function e(t,n){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.abrupt("return",t());case 4:if(e.prev=4,e.t0=e.catch(0),!(e.t0 instanceof d&&n>0)){e.next=18;break}return e.prev=7,e.next=10,(0,p.qZ)(600);case 10:return e.next=12,A(t,n-1);case 12:return e.abrupt("return",e.sent);case 15:return e.prev=15,e.t1=e.catch(7),e.abrupt("return",{});case 18:if(!(e.t0 instanceof d)){e.next=20;break}return e.abrupt("return",{});case 20:return e.abrupt("return",{});case 22:case"end":return e.stop()}}),e,null,[[0,4],[7,15]])})));return function(t,n){return e.apply(this,arguments)}}(),S=function(){var e=(0,a.Z)(s().mark((function e(t,n,a,r){var o,c;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return void 0===n&&(n={}),void 0===r&&(r=g.Retries),e.prev=2,o=(0,i.Z)({},y(),n,{method:"GET"}),c=E(a,t,o),e.next=7,A(c,r);case 7:return e.abrupt("return",e.sent);case 10:return e.prev=10,e.t0=e.catch(2),e.abrupt("return",{});case 14:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(t,n,i,a){return e.apply(this,arguments)}}(),T=function(){var e=(0,a.Z)(s().mark((function e(t,n,a,r,o){var c,u;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return void 0===a&&(a={}),void 0===o&&(o=g.Retries),e.prev=2,c=(0,i.Z)({},y(),a,{method:"POST"}),u=E(r,t,c,n),e.next=7,A(u,o);case 7:return e.abrupt("return",e.sent);case 10:return e.prev=10,e.t0=e.catch(2),e.abrupt("return",{});case 14:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(t,n,i,a,r){return e.apply(this,arguments)}}()},631:function(e,t,n){"use strict";var i=n(5),a=function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).name="TournamentNotFound",i.message=t||"A Tournament with current context was not found",i.payload=n,i.code="TOURNAMENT_NOT_FOUND",i}return(0,i.Z)(t,e),t}((0,n(195).Z)(Error));t.Z=a},38:function(e,t,n){"use strict";var i=n(122),a=function(){function e(e,t){if(this.scene=void 0,this.config=void 0,this.isStarted=void 0,this.tween=void 0,!(t.targets.length<1)){this.buildConfig(e,t);var n=this.config.targets[0].scene;n&&(this.scene=n,this.isStarted=!1,this.tween=n.tweens.create(this.config))}}var t=e.prototype;return t.buildConfig=function(e,t){this.config=(0,i.TS)(e,t)},t.play=function(){this.tween&&(this.isStarted&&this.tween.hasStarted?this.restart():(this.tween.play(),this.isStarted=!0))},t.restart=function(){var e;null==(e=this.tween)||e.restart()},t.stop=function(){var e;null==(e=this.tween)||e.stop()},t.remove=function(){var e;null==(e=this.tween)||e.remove()},t.next=function(e){return this.tween?(this.tween.off(Phaser.Tweens.Events.TWEEN_COMPLETE,e),this.tween.once(Phaser.Tweens.Events.TWEEN_COMPLETE,e),this.tween):null},e}();t.Z=a},613:function(e,t,n){"use strict";var i=n(21),a=n(5),r=n(38),s={targets:[],repeat:-1,yoyo:!0,duration:33,ease:Phaser.Math.Easing.Sine.InOut,props:{x:5}},o=function(e){function t(t){var n,a,r;return(r=e.call(this,s,t)||this).posX=void 0,r.handleSwitchPosition=function(){var e;r.posX=-r.posX,null==(e=r.tween)||e.updateTo("x",-r.posX)},null!=(n=r.config)&&n.props?(r.posX=r.config.props.x,null==(a=r.tween)||a.on(Phaser.Tweens.Events.TWEEN_REPEAT,r.handleSwitchPosition),r):(0,i.Z)(r)}return(0,a.Z)(t,e),t}(r.Z);t.Z=o},436:function(e,t,n){"use strict";var i=n(5),a=n(38),r={targets:[],duration:600,ease:Phaser.Math.Easing.Linear,props:{angle:{from:0,to:360}}},s=function(e){function t(t){return e.call(this,r,t)||this}return(0,i.Z)(t,e),t}(a.Z);t.Z=s},444:function(e,t,n){"use strict";var i=n(5),a=n(38),r={targets:[],duration:400,ease:n(199).Z,props:{scale:"-=0.1"}},s=function(e){function t(t){return e.call(this,r,t)||this}return(0,i.Z)(t,e),t}(a.Z);t.Z=s},608:function(e,t,n){"use strict";var i=n(5),a=n(38),r={targets:[],duration:400,ease:n(199).Z,props:{scale:"+=0.1"}},s=function(e){function t(t){return e.call(this,r,t)||this}return(0,i.Z)(t,e),t}(a.Z);t.Z=s},199:function(e,t,n){"use strict";var i=n(184),a=n.n(i)()(.48,1.57,.6,.83);t.Z=a},438:function(e,t,n){"use strict";var i=n(5),a=n(38),r={targets:[],duration:600,ease:Phaser.Math.Easing.Cubic.Out,props:{alpha:{start:0,from:0,to:1}}},s=function(e){function t(t){return e.call(this,r,t)||this}return(0,i.Z)(t,e),t}(a.Z);t.Z=s},616:function(e,t,n){"use strict";var i=n(5),a=n(38),r={targets:[],duration:600,ease:Phaser.Math.Easing.Back.Out,props:{y:{from:500,to:0}}},s=function(e){function t(t){return e.call(this,r,t)||this}return(0,i.Z)(t,e),t}(a.Z);t.Z=s},439:function(e,t,n){"use strict";var i=n(5),a=n(38),r={targets:[],duration:600,ease:Phaser.Math.Easing.Quadratic.Out,props:{alpha:{start:1,from:1,to:0}}},s=function(e){function t(t){return e.call(this,r,t)||this}return(0,i.Z)(t,e),t}(a.Z);t.Z=s},437:function(e,t,n){"use strict";var i=n(5),a=n(38),r={targets:[],duration:300,ease:n(199).Z,props:{scale:{from:1.2,to:1}}},s=function(e){function t(t){return e.call(this,r,t)||this}return(0,i.Z)(t,e),t}(a.Z);t.Z=s},607:function(e,t,n){"use strict";var i=n(21),a=n(5),r=n(38),s={targets:[],duration:1e3,ease:Phaser.Math.Easing.Quadratic.InOut,props:{scale:.2}},o=function(e){function t(t){var n,a;(a=e.call(this,s,t)||this).spline=void 0,a.createCounter=function(e,t){var n=a.config.onCurveUpdate,i="function"===typeof n?n:null;t.forEach((function(t,n){if(a.scene){var r=e.data[n],s=r.duration,o=r.delay,c=new Phaser.Math.Vector2;a.scene.tweens.addCounter({delay:o,duration:s,ease:Phaser.Math.Easing.Quadratic.InOut,onUpdate:function(e){a.spline.getPoint(e.getValue(),c),t.x=c.x,t.y=c.y,i&&i(t)}})}}))};var r=a.config.curve;return r?(a.spline=new Phaser.Curves.Spline(r),null==(n=a.tween)||n.on(Phaser.Tweens.Events.TWEEN_START,a.createCounter),a):(0,i.Z)(a)}return(0,a.Z)(t,e),t}(r.Z);t.Z=o},443:function(e,t,n){"use strict";var i=n(96),a=n(21),r=n(5),s=n(83),o=n(444),c=n(123),u=n(442),l=n(193),h=function(e){function t(t,n,i,r,s,l){var h;return void 0===l&&(l=!1),(h=e.call(this,t)||this).useSound=!0,h.isClicked=!1,h.scaleUp=-1,h.scaleDown=-1,h.button=void 0,h.upAnimation=void 0,h.downAnimation=void 0,h.isUsePixelPerfect=!1,h.hitArea=void 0,h.hitZone=void 0,h.scaleDownPress=void 0,h.parentName=void 0,h.handelObjectDestroy=function(){h.scene&&h.scene.events.off(Phaser.Scenes.Events.SLEEP,h.handleSceneSleep)},h.handleSceneSleep=function(){h.scene&&h.scene.tweens.killTweensOf((0,a.Z)(h))},h.handlePointerDown=function(){var e;h.isClicked||null!=(e=h.upAnimation)&&null!=(e=e.tween)&&e.isPlaying()||(h.isClicked=!0,h.runDownAnimation())},h.handleOnClick=function(e){return function(){var t,n;h.isClicked&&(null!=(t=h.upAnimation)&&null!=(t=t.tween)&&t.isPlaying()||(h.isClicked=!1,h.runUpAnimation(),null==(n=h.upAnimation)||null==(n=n.tween)||n.once(Phaser.Tweens.Events.TWEEN_COMPLETE,(function(){h.logButtonEvent(),h.addDebugData(),h.processCallback(e)}))))}},h.handlePointerOut=function(){var e;h.isClicked&&(null!=(e=h.upAnimation)&&null!=(e=e.tween)&&e.isPlaying()||(h.isClicked=!1,h.runUpAnimation()))},h.runDownAnimation=function(){var e;-1===h.scaleDown&&(h.scaleUp=h.scale,h.scaleDown=h.scaleDownPress),h.useSound&&h.scene.audio.playSound(u.Z.BUTTON_CLICK),null==(e=h.downAnimation)||e.remove(),h.downAnimation=new o.Z({targets:[(0,a.Z)(h)],duration:150,props:{scale:h.scaleDown},onUpdate:function(){h.hitZone.scale=1/h.scale}}),h.downAnimation.play()},h.runUpAnimation=function(){var e;-1!==h.scaleUp&&(null==(e=h.upAnimation)||e.remove(),h.upAnimation=new o.Z({targets:[(0,a.Z)(h)],duration:150,props:{scale:h.scaleUp},onUpdate:function(){h.hitZone.scale=1/h.scale}}),h.upAnimation.play())},h.isUsePixelPerfect=l,h.setDepth(c.Z.BUTTON),h.createButton(n,i,r,s),h.updateSize(),h.listenEvents(),h.scene.add.existing((0,a.Z)(h)),h}(0,r.Z)(t,e);var n=t.prototype;return n.listenEvents=function(){this.scene.events.on(Phaser.Scenes.Events.SLEEP,this.handleSceneSleep),this.once(Phaser.GameObjects.Events.DESTROY,this.handelObjectDestroy)},n.processCallback=function(e){var t,n,i;null==(t=this.upAnimation)||t.stop(),null==(n=this.downAnimation)||n.stop(),null==(i=this.scene)||i.tweens.killTweensOf(this),-1!==this.scaleUp&&this.setScale(this.scaleUp),e()},n.setDisabled=function(e){var t,n;e?(this.setAlpha(.5),null==(t=this.hitArea)||t.disableInteractive()):(this.setAlpha(1),null==(n=this.hitArea)||n.setInteractive())},n.createButton=function(e,t,n,i){this.button=this.scene.add.image(0,0,e,t),n&&i&&this.button.setWorldSize(n,i),this.scaleDownPress=this.scale-.1;var a=this.button,r=a.displayWidth,s=a.displayHeight;this.hitZone=this.scene.make.zone({displayWidth:r,displayHeight:s}),this.add([this.button,this.hitZone])},n.updateSize=function(){var e=this.button,t=e.width,n=e.height,i=t/100*10,a=n/100*10,r=i<10?i:10,s=a<10?a:10;this.setSize(t+r,n+s),this.hitZone.setSize(t+r,n+s)},n.addDebugData=function(){var e=this.getParentName(),t=this.name;(0,l.sw)("ui-click",e+":"+t)},n.logButtonEvent=function(){var e=this.getParentName(),t=this.name;this.scene.analytics.event(s._.BUTTON_CLICK,{button_name:t,screen_name:e})},n.getParentName=function(){if(this.parentName)return this.parentName;for(var e=this.parentContainer;e;){if(e instanceof GameCore.Screen){var t=e;return this.parentName=t.getScreenName(),this.parentName}e=e.parentContainer}return this.parentName=this.scene.getSceneName(),this.parentName},(0,i.Z)(t,[{key:"onClick",set:function(e){this.isUsePixelPerfect?(this.hitArea=this.button,this.hitArea.setInteractive({useHandCursor:!0,pixelPerfect:!0})):(this.hitArea=this.hitZone,this.updateSize(),this.hitArea.setInteractive({useHandCursor:!0})),this.hitArea.on(Phaser.Input.Events.GAMEOBJECT_POINTER_DOWN,this.handlePointerDown),this.hitArea.on(Phaser.Input.Events.GAMEOBJECT_POINTER_UP,this.handleOnClick(e)),this.hitArea.on(Phaser.Input.Events.GAMEOBJECT_POINTER_OUT,this.handlePointerOut)}},{key:"isUsePixelPerFect",get:function(){return this.isUsePixelPerfect}}]),t}(Phaser.GameObjects.Container);t.Z=h},617:function(e,t,n){"use strict";var i=n(5),a=n(197),r=function(e){function t(t,n,i,a){var r;return(r=e.call(this,t,n.key,n.button,i,a)||this).payload=void 0,r.payload=n,r.createIcon(),r.createText(),r}(0,i.Z)(t,e);var n=t.prototype;return n.createIcon=function(){var e=this.scene.add.image(0,0,this.payload.key,this.payload.icon);e.setWorldSize(43,43),this.add(e),Phaser.Display.Align.In.LeftCenter(e,this,-25)},n.createText=function(){var e=this.payload.text,t=this.scene.make.bitmapText({font:a.Z.PRIMARY.KEY,size:this.scene.fontSize(24),text:e,origin:{x:.2,y:.5}});this.add(t)},t}(n(443).Z);t.Z=r},435:function(e,t,n){"use strict";var i=n(21),a=n(5),r=n(32),s=n(436),o=r.Z.DEFAULT,c=o.KEY,u=o.FRAME,l=function(e){function t(t){var n;return(n=e.call(this,t,0,0,c,u.PRELOADER)||this).anim=void 0,n.runAnimation(),n.setWorldSize(113,113),n.scene.add.existing((0,i.Z)(n)),n}(0,a.Z)(t,e);var n=t.prototype;return n.runAnimation=function(){var e;null==(e=this.anim)||e.remove(),this.anim=new s.Z({targets:[this],repeat:-1,duration:1200}),this.anim.play()},n.setVisible=function(t){return e.prototype.setVisible.call(this,t),t?this.runAnimation():this.anim.stop(),this},t}(Phaser.GameObjects.Image);t.Z=l},620:function(e,t,n){"use strict";var i=n(82),a=n(96),r=n(21),s=n(5),o=n(125),c=n.n(o),u=n(102),l=n.n(u),h=n(99),d=n.n(h),p=n(124),f=n.n(p),m=n(52),g=n.n(m),v=n(100),y=n.n(v),E=n(101),A=n.n(E),S=n(127),T=n.n(S),b=n(123),I=n(192);function w(e,t){var n="undefined"!==typeof A()&&T()(e)||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){var n;if(!e)return;if("string"===typeof e)return C(e,t);var i=g()(n=Object.prototype.toString.call(e)).call(n,8,-1);"Object"===i&&e.constructor&&(i=e.constructor.name);if("Map"===i||"Set"===i)return y()(e);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return C(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var i=0;return function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function C(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var x=function(e){function t(t,n){var a,s;(s=e.call(this,t)||this).config=void 0,s.isEnable=void 0,s.maxHeight=void 0,s.isScrolling=void 0,s.boundTop=void 0,s.boundBottom=void 0,s.maskGraphics=void 0,s.objects=void 0,s._value=0,s.velocity=0,s.isScrollingSmooth=void 0,s.lastScrollY=void 0,s.isScrollingBack=void 0,s.scrollingBackTo=void 0,s.lastScrollYCount=0,s.hitArea=void 0,s.onScrollEvents=[],s.update=function(e,t){s.isScrollingSmooth&&s.velocity&&s.scrollingSmooth(t),s.isScrollingBack&&s.scrollingBack(t)},s.checkReachBound=function(){return s.isReachTop()||s.isReachBottom()},s.onMouseScroll=(0,I.D)((function(e,t,n){if(s.isEnable){var i;if(s.isScrolling=!0,s.checkReachBound())return s.lastScrollY=c()(i=s.lastScrollY).call(i,(function(){return 0})),void(s.isScrolling=!1);s.stopScrollingBack(),s.startScrollSmooth(-n*s.scrollSmooth/15)}}),100,{isImmediate:!0,maxWait:100}),s.onTouchScroll=function(e){if(s.isEnable){s.velocity&&s.stopScrollSmooth(),s.stopScrollingBack(),s.isScrolling=!0;var t=s.scene.game.world.getZoomRatio(),n=e.position,i=e.prevPosition,a=(n.y-i.y)/t,r=s.height*s.maxScrollOver,o=1;if(s.lastScrollY[++s.lastScrollYCount%s.lastScrollY.length]=a,s.isReachTop()&&a>=0){var c=(r-(s.value-s.marginTop))/r;o=Math.min(o,c)}if(s.isReachBottom()&&a<=0){var u=(r-(-s.maxHeight-s.value))/r;o=Math.min(o,u)}var l=a*o,h=s.maxScrollOver*s.height;s.value+l>s.marginTop+h?s.value=s.marginTop+h:s.value+l<-s.maxHeight-h?s.value=-s.maxHeight-h:s.value+=l,s.callOnScrollEvents(s.value,l)}},s.onTouchDown=function(){s.isEnable&&(s.velocity&&s.stopScrollSmooth(),s.stopScrollingBack())},s.onTouchEnd=function(){var e,t;if(s.isReachTop()&&(s.startScrollingBack(s.marginTop),s.stopScrollSmooth()),s.isReachBottom()&&(s.startScrollingBack(-s.maxHeight),s.stopScrollSmooth()),s.isScrolling){var n=l()(e=s.lastScrollY).call(e,(function(e,t){return e+t}))/s.lastScrollY.length;s.startScrollSmooth(n*s.scrollSmooth),s.lastScrollY=c()(t=s.lastScrollY).call(t,(function(){return 0}))}},s.config=(0,i.Z)({marginTop:0,marginBottom:0,acceleration:1400,maxScrollOver:.15,scrollSmooth:40,scrollingBackRate:5},n);var o=n.width,u=n.height;return s.isEnable=!1,s.maxHeight=0,s.lastScrollY=d()(a=new Array(3)).call(a,0),s.setSize(o,u),s.createGroup(),s.createInput(),s.createEvents(),s.scene.add.existing((0,r.Z)(s)),s}(0,s.Z)(t,e);var n=t.prototype;return n.onScroll=function(e){this.onScrollEvents.push(e)},n.gotoTop=function(){this.value=this.config.marginTop},n.reset=function(){this.maxHeight=0,this.isScrolling=!1,this.isScrollingBack=!1,this.isScrollingSmooth=!1,this.gotoTop(),this.setEnable(!1)},n.createDebug=function(){this.drawDebugBox(16711680,.8)},n.setEnable=function(e){this.isEnable=e,e?this.setInteractive({draggable:!0,useHandCursor:!0}):this.disableInteractive()},n.addItem=function(e){this.addAt(e),this.objects.add(e);var t=e.y+e.height+this.marginBottom-this.height/2;this.maxHeight=Math.max(this.maxHeight,t,0),this.updateObjectVisible()},n.addItems=function(e){var t=this;this.addAt(e),this.objects.addMultiple(e);var n=c()(e).call(e,(function(e){return e.y+e.height+t.marginBottom-t.height/2}));this.maxHeight=Math.max(this.maxHeight,Math.max.apply(Math,n),0),this.updateObjectVisible()},n.clearItem=function(){this.objects.clear(!0,!0),this.reset()},n.getChildren=function(){var e;return f()(e=this.objects.getChildren()).call(e,(function(e){return e.active}))},n.createBound=function(e,t,n,i){this.boundTop=this.scene.make.image({key:e,frame:t}),this.boundBottom=this.scene.make.image({key:e,frame:t}),this.boundTop.setTint(i),this.boundBottom.setTint(i),this.boundTop.setAlpha(1,1,0,0),this.boundBottom.setAlpha(0,0,1,1),this.boundTop.setDepth(b.Z.PRIORITY),this.boundBottom.setDepth(b.Z.PRIORITY);var a=this.width,r=n,s=this.getWorldPosition(),o=s.x,c=s.y;this.boundTop.setDisplaySize(a,r),this.boundBottom.setDisplaySize(a,r),this.boundTop.setY(-this.displayHeight/2+r/2+c-this.y-1),this.boundBottom.setY(this.displayHeight/2-r/2+c-this.y+1),this.boundTop.setX(o-this.x),this.boundBottom.setX(o-this.x),this.add([this.boundTop,this.boundBottom])},n.createMask=function(){var e;null==(e=this.maskGraphics)||e.destroy(),this.maskGraphics=this.scene.make.graphics({fillStyle:{color:255,alpha:1},visible:!0}),this.maskGraphics.setName("MaskGraphics");var t=this.width,n=this.height;this.maskGraphics.fillRoundedRect(0-t/2,0-n/2,t,n,0),this.setMask(this.maskGraphics.createGeometryMask()),this.scene.events.off(Phaser.Scenes.Events.UPDATE,this.updateMask,this),this.scene.events.on(Phaser.Scenes.Events.UPDATE,this.updateMask,this)},n.updateMask=function(){var e=this.getWorldPosition(),t=e.x,n=e.y;this.maskGraphics.setPosition(t,n)},n.createGroup=function(){this.objects=this.scene.make.group({})},n.updateObject=function(e){this.objects.incY(e),this.updateObjectVisible()},n.updateObjectVisible=function(){for(var e=this.objects.getChildren(),t=0;t<e.length;t++){var n=e[t];n.y+n.height<-this.height/2||n.y-n.height>this.height/2?n.setVisible(!1):n.setVisible(!0)}},n.createInput=function(){this.setInteractive({draggable:!0,useHandCursor:!0}),this.on(Phaser.Input.Events.POINTER_WHEEL,this.onMouseScroll),this.on(Phaser.Input.Events.GAMEOBJECT_DRAG,this.onTouchScroll),this.on(Phaser.Input.Events.GAMEOBJECT_POINTER_DOWN,this.onTouchDown),this.scene.input.on(Phaser.Input.Events.POINTER_UP,this.onTouchEnd,this)},n.createEvents=function(){this.scene.events.on(Phaser.Scenes.Events.UPDATE,this.update)},n.callOnScrollEvents=function(e,t){for(var n,i=w(this.onScrollEvents);!(n=i()).done;){(0,n.value)(this,e,t)}},n.scrollingBack=function(e){var t=(this.scrollingBackTo-this.value)*e*this.scrollingBackRate/1e3;this.value+=t,Math.abs(this.scrollingBackTo-this.value)<.5&&(this.value=this.scrollingBackTo,this.stopScrollingBack()),this.callOnScrollEvents(this.value,t)},n.startScrollingBack=function(e){this.isScrollingBack=!0,this.scrollingBackTo=e},n.stopScrollingBack=function(){this.isScrollingBack=!1},n.scrollingSmooth=function(e){var t=this.velocity*e/1e3;this.value+=t;var n=Math.abs(this.velocity)/this.velocity;this.velocity-=n*this.acceleration*e/1e3,Math.abs(this.velocity)<this.acceleration*e/1e3&&this.stopScrollSmooth(),this.isReachTop()&&(this.startScrollingBack(this.marginTop),this.stopScrollSmooth()),this.isReachBottom()&&(this.startScrollingBack(-this.maxHeight),this.stopScrollSmooth()),this.callOnScrollEvents(this.value,t)},n.startScrollSmooth=function(e){this.isScrollingSmooth=!0,e&&(e*this.velocity>0?this.velocity+=e:this.velocity=e)},n.stopScrollSmooth=function(){this.isScrollingSmooth=!1,this.isScrolling=!1,this.velocity=0},n.isReachTop=function(){return this.value>this.marginTop},n.isReachBottom=function(){return-this.value>this.maxHeight},(0,a.Z)(t,[{key:"marginTop",get:function(){return this.config.marginTop}},{key:"marginBottom",get:function(){return this.config.marginBottom}},{key:"acceleration",get:function(){return this.config.acceleration}},{key:"maxScrollOver",get:function(){return this.config.maxScrollOver}},{key:"scrollSmooth",get:function(){return this.config.scrollSmooth}},{key:"scrollingBackRate",get:function(){return this.config.scrollingBackRate}},{key:"value",get:function(){return this._value},set:function(e){var t=e-this._value;this._value=e,this.updateObject(t)}}]),t}(Phaser.GameObjects.Container);t.Z=x},123:function(e,t){"use strict";t.Z={BACKGROUND:1,FIREWORKS:5,ITEM:10,LOGO:15,BUTTON:20,TILE:25,TEXT:30,ENCOURAGING:31,EFFECT:32,MESSAGE:33,POPUP:40,PRIORITY:80,DEBUG:90,ON_TOP:1e4}},197:function(e,t){"use strict";t.Z={PRIMARY:{KEY:"notoSans",TEXTURE:{en:"./assets/fonts/bebas.png",ru:"./assets/fonts/bebas.png",ja:"./assets/fonts/MochiyPopOne-Regular-JA.png",id:"./assets/fonts/bebas.png"},DATA:{en:"./assets/fonts/bebas.xml",ru:"./assets/fonts/bebas.xml",ja:"./assets/fonts/MochiyPopOne-Regular-JA.xml",id:"./assets/fonts/bebas.xml"}},TEXT_FONT:"Bebas",FONT_FAMILY:'-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Oxygen,Ubuntu,Cantarell,"Fira Sans","Droid Sans","Helvetica Neue",sans-serif'}},427:function(e,t){"use strict";var n={AVATAR:{KEY:"avatar",FILE:"./assets/images/others/avatar.png",CONFIG:{}},ICON_EARTH:{KEY:"icon-earth",FILE:"./assets/images/others/icon-earth.png",CONFIG:{}},BACKGROUND:{KEY:"background",FILE:"./assets/images/"+GameCore.Utils.Image.getImageScale()+"x/bg.jpg",CONFIG:{}},DESKTOP_BACKGROUND:{FILE:"./assets/images/bg.jpg"}};t.Z=n},32:function(e,t,n){"use strict";var i=n(82),a=GameCore.Utils.Image.getImageScale(),r={TUTORIAL:{KEY:"tutorial-resources",TEXTURE:"./assets/textures/"+a+"x/tutorial-resources.png",JSON:"./assets/textures/"+a+"x/tutorial-resources.json",FRAME:{TIP:"tip",HAND:"hand",BLANK:"blank",AVATAR_CAT:"avatar-cat",POPUP_TALK:"talk-popup",FIRST_MOVE:"first-move",CURRENT_SCORE:"current-score",TARGET_SCORE:"target-score",HAMMER_ITEM:"hammer-item",PAINT_ITEM:"paint-item",SHUFFLE_ITEM:"shuffle-item",COLORFUL_GEM_1:"colorful-gem-1",COLORFUL_GEM_2:"colorful-gem-2"}},DEFAULT:{KEY:"default-resources",TEXTURE:"./assets/textures/"+a+"x/default-resources.png",JSON:"./assets/textures/"+a+"x/default-resources.json",TEXTURE_32_BIT:"./assets/textures/"+a+"x/default-resources-32bit.png",FRAME:{LINE:"line",BLANK:"blank",TEXT_LOADING:"loading",BOTTOM_BG:"bottom-bg",BOTTOM_LINE:"bottom-line",BOTTOM_HORIZONTAL_LINE:"bottom-horizontal-line",TOP_BG_LONG:"top-bg-long",BLOCK_LEADER_BLUE:"block-blue-bg",BLOCK_LEADER_YELLOW:"block-yellow-bg",PRELOADER:"preloader/dual-ring",LEADERBOARD_TAB_ON:"leaderboards/tab-on",LEADERBOARD_TAB_OFF:"leaderboards/tab-off",LEADERBOARD_BG_DARK:"leaderboards/bg-dark",LEADERBOARD_BG_LIGHT:"leaderboards/bg-light",MISSION_ICON_BG:"dailyMission/bg-icon",MISSION_BLOCK_BG:"dailyMission/bg-block",MISSION_CLOCK_BG:"dailyMission/bg-clock",MISSION_CLOCK_BG_EXTENDED:"dailyMission/bg-clock-extended",DAILY_DAY_BG:"dailyRewards/bg",DAILY_DAY_LABEL:"dailyRewards/label",DAILY_DAY_BG_WAIT:"dailyRewards/bg-wait",DAILY_DAY_BG_OPEN:"dailyRewards/bg-open",DAILY_DAY_TITLE_GREY:"dailyRewards/title-grey",DAILY_DAY_TITLE_GREEN:"dailyRewards/title-green",DAILY_DAY_TITLE_ORANGE:"dailyRewards/title-orange",RIBBON_LONG:"ribbon/long",RIBBON_FULL:"ribbon/long-full",RIBBON_SHORT:"ribbon/short",RIBBON_SMALL:"ribbon/small",AVATAR_BG_BLUE:"avatar/blue-bg",AVATAR_FRAME_BLUE:"avatar/blue-frame",AVATAR_BG_BLUE_SMALL:"avatar/blue-bg-small",AVATAR_FRAME_BLUE_SMALL:"avatar/blue-frame-small",AVATAR_BG_BLUE_BIG:"avatar/blue-bg-big",AVATAR_FRAME_BLUE_BIG:"avatar/blue-frame-big",AVATAR_BG_YELLOW:"avatar/yellow-bg",AVATAR_FRAME_YELLOW:"avatar/yellow-frame",AVATAR_BG_YELLOW_SMALL:"avatar/yellow-bg-small",AVATAR_FRAME_YELLOW_SMALL:"avatar/yellow-frame-small",AVATAR_BG_YELLOW_BIG:"avatar/yellow-bg-big",AVATAR_FRAME_YELLOW_BIG:"avatar/yellow-frame-big",THE_CAT:"logo/cat",SAD_CAT:"logo/sad-cat",LOGO_GIFT:"logo/gift",LOGO_GIFT_ADS:"logo/gift-ad",LOGO_GIFT_WHITE:"logo/gift_white",LOGO_DIAMONDS_LIGHT_2:"logo/diamonds-light-2",LOGO_DIAMONDS_LIGHT_3:"logo/diamonds-light-3",LOGO_DIAMONDS_LIGHT_4:"logo/diamonds-light-4",LOGO_DIAMONDS_LIGHT_5:"logo/diamonds-light-5",LOGO_DIAMONDS_LIGHT_6:"logo/diamonds-light-6",LOGO_ADS_DIAMONDS:"logo/ads-diamonds",POPUP_TOP_LEFT:"popup/top-left",POPUP_TOP_MID:"popup/top-middle",POPUP_TOP_RIGHT:"popup/top-right",POPUP_MID_LEFT:"popup/middle-left",POPUP_MID_MID:"popup/middle-middle",POPUP_MID_RIGHT:"popup/middle-right",POPUP_BOTTOM_LEFT:"popup/bottom-left",POPUP_BOTTOM_MID:"popup/bottom-middle",POPUP_BOTTOM_RIGHT:"popup/bottom-right",PROGRESS_BG_LEFT:"progress/bg-left",PROGRESS_BG_MID:"progress/bg-mid",PROGRESS_BG_RIGHT:"progress/bg-right",PROGRESS_BAR_LEFT:"progress/bar-left",PROGRESS_BAR_MID:"progress/bar-mid",PROGRESS_BAR_RIGHT:"progress/bar-right",ICON_DOT:"icons/dot",ICON_CUP:"icons/cup",ICON_GIFT:"icons/gift",ICON_PLUS:"icons/plus",ICON_RANK:"icons/rank",ICON_TOURNAMENT:"icons/tournament",ICON_FLAG:"icons/flag",ICON_CLOCK:"icons/clock",ICON_DAILY:"icons/daily",ICON_ADS:"icons/flat-ad",ICON_CHECK:"icons/check",ICON_CANCEL:"icons/cancel",ICON_SETTING:"icons/setting",ICON_RESUME:"icons/flat-resume",ICON_VIB_ON:"icons/flat-vib-on",ICON_VIB_OFF:"icons/flat-vib-off",ICON_MUSIC_ON:"icons/flat-music-on",ICON_MUSIC_OFF:"icons/flat-music-off",ICON_SOUND_ON:"icons/flat-sound-on",ICON_SOUND_OFF:"icons/flat-sound-off",ICON_FLAT_HOME:"icons/flat-home",ICON_FLAT_RANK:"icons/flat-rank",ICON_FLAT_SHARE:"icons/flat-share",ICON_CROWN:"icons/crown",ICON_CUP_MINI:"icons/cup-mini",ICON_CUP_GOLD:"icons/cup-gold",ICON_CUP_SILVER:"icons/cup-silver",ICON_CUP_COPPER:"icons/cup-bronze",ICON_DIAMOND:"icons/diamond",ICON_DIAMOND_SMALL:"icons/diamond-small",ICON_DIAMOND_GREY:"icons/diamond-grey",ICON_DIAMOND_LIGHT:"icons/diamond-light",ICON_LOGIN:"icons/flat-login",BUTTON_CLOSE:"buttons/close",BUTTON_RED_LONG:"buttons/red-long",BUTTON_YELLOW_LONG:"buttons/yellow-long",BUTTON_YELLOW_CIRCLE:"buttons/yellow-circle",BUTTON_BLUE:"buttons/blue",BUTTON_BLUE_SHORT:"buttons/blue-short",BUTTON_BLUE_LONG:"buttons/blue-long",BUTTON_BLUE_CIRCLE:"buttons/blue-circle",BUTTON_GREEN:"buttons/green",BUTTON_GREEN_SHORT:"buttons/green-short",BUTTON_GREEN_LONG:"buttons/green-long",BUTTON_GREEN_MINOR:"buttons/green-minor",BUTTON_GREEN_CIRCLE:"buttons/green-circle",BUTTON_GREEN_MINOR_MINI:"buttons/green-minor-mini",BUTTON_PURPLE_SHORT:"buttons/purple-short",NO_THANK_TEXT:"texts/no-thank",NO_THANK_TEXT_JA:"texts/no-thank-ja",HORIZONTAL_LUCKY_BAR:"lucky-bar/horizontal-lucky-bar",HORIZONTAL_ARROW:"lucky-bar/horizontal-arrow",ARC_LUCKY_BAR:"lucky-bar/arc-lucky-bar",ARC_ARROW:"lucky-bar/arc-arrow",TOURNAMENT_POPUP_TOP_LEFT:"tournament/popup/top-left",TOURNAMENT_POPUP_TOP_MID:"tournament/popup/top-middle",TOURNAMENT_POPUP_TOP_RIGHT:"tournament/popup/top-right",TOURNAMENT_POPUP_MID_LEFT:"tournament/popup/middle-left",TOURNAMENT_POPUP_MID:"tournament/popup/middle",TOURNAMENT_POPUP_MID_RIGHT:"tournament/popup/middle-right",TOURNAMENT_POPUP_BOTTOM_LEFT:"tournament/popup/bottom-left",TOURNAMENT_POPUP_BOTTOM_MID:"tournament/popup/bottom-middle",TOURNAMENT_POPUP_BOTTOM_RIGHT:"tournament/popup/bottom-right",TOURNAMENT_PLAY_BUTTON:"tournament/button",TOURNAMENT_CREATE_BUTTON:"tournament/button-big",TOURNAMENT_CREATE_ICON:"tournament/icon-create",TOURNAMENT_CUP_ICON:"tournament/cup",TOURNAMENT_PALM_ICON:"tournament/palm",TOURNAMENT_CLOCK_ICON:"tournament/clock",TOURNAMENT_LINE:"tournament/line",TOURNAMENT_USER_BG:"tournament/uer-bar",TOURNAMENT_GOLD_RANK:"tournament/gold",TOURNAMENT_SILVER_RANK:"tournament/silver",TOURNAMENT_BRONZE_RANK:"tournament/bronze",TOURNAMENT_DOT:"tournament/dot"}},TITLE:{KEY:"title-resources",TEXTURE:"./assets/textures/"+a+"x/title-resources.png",JSON:"./assets/textures/"+a+"x/title-resources.json",TEXTURE_32_BIT:"./assets/textures/"+a+"x/title-resources-32bit.png",FRAME:{TITLE_LOGO:"title-logo",TITLE_LOGO_JA:"title-logo-ja",TITLE_GEMS:"title-gems"}},EFFECTS:{KEY:"effects-resources",PATH:"./assets/textures/"+a+"x/",JSON:"./assets/textures/"+a+"x/effects-resources.json",TEXTURES_32BIT_1x:["./assets/textures/"+a+"x/effects-resources-32bit-0.png"],TEXTURES_32BIT_2x:["./assets/textures/"+a+"x/effects-resources-32bit-0.png","./assets/textures/"+a+"x/effects-resources-32bit-1.png"],FRAME:{BLANK:"blank",FX_COMET:"comet",FX_SPARK:"spark",FX_CIRCLE:"circle",FX_CIRCLE_LIGHT:"circle-light",FX_GLOW_LIGHT:"glow-light",FX_GLOW_SMALL:"glow-small",FX_STAR_WHITE:"star-white",FX_STAR_YELLOW:"star-yellow",TEXT_COOL:"texts/cool",TEXT_GOOD:"texts/good",TEXT_GREAT:"texts/great",TEXT_EXCELLENT:"texts/excellent",TEXT_CONGRATULATION:"texts/congratulation",TEXT_COOL_JA:"texts/cool-ja",TEXT_GOOD_JA:"texts/good-ja",TEXT_GREAT_JA:"texts/great-ja",TEXT_EXCELLENT_JA:"texts/excellent-ja",TEXT_CONGRATULATION_JA:"texts/congratulation-ja",FX_CONFETTI_SMALL_1:"confetti/small-1",FX_CONFETTI_SMALL_2:"confetti/small-2",FX_CONFETTI_SMALL_3:"confetti/small-3",FX_CONFETTI_SMALL_4:"confetti/small-4",FX_CONFETTI_HEXAGON:"confetti/hexagon-",FX_FIREWORKS_SMALL:"fireworks/small",FX_FIREWORKS_BIG_0:"fireworks/big-explosive-0",FX_FIREWORKS_BIG_1:"fireworks/big-explosive-1",FX_FIREWORKS_SOAR_LINE:"fireworks/soar-line",FX_FIREWORKS_SOAR_CIRCLE:"fireworks/soar-circle",FX_HIGHLIGHT:"fx-items/highlight",FX_PAINT_EXPLOSIVE:"fx-items/paint-explosive-",FX_RED_EXPLOSIVE:"fx-gems/red-explosive-",FX_BLUE_EXPLOSIVE:"fx-gems/blue-explosive-",FX_PINK_EXPLOSIVE:"fx-gems/pink-explosive-",FX_GREEN_EXPLOSIVE:"fx-gems/green-explosive-",FX_YELLOW_EXPLOSIVE:"fx-gems/yellow-explosive-",FX_COLORFUL:"fx-gems/colorful-",FX_COLOR_CHANGE:"fx-gems/color-change-",FX_FREEZE_EXPLOSIVE:"fx-gems/freeze-explosive-",FX_COLORFUL_EXPLOSIVE:"fx-gems/colorful-explosive-"}},ANIMATION_SCENE:{KEY:"effects-resources",PATH:"./assets/textures/"+a+"x/",JSON:"./assets/textures/"+a+"x/animation-scene-resources.json",FRAME:{BLANK:"blank",COIN:"coins/coin",COIN_SMALL:"coins/coin-small",COIN_SMALL_GREY:"coins/coin-small-grey",ANIMATION_STAR_X:"star-x/star-",ANIMATION_STAR_Y:"star-y/star-",FX_SPARK_YELLOW:"yellow-spark",FX_CONFETTI_RIBBON:"ribbon/ribbon",PREFIX_ANIMATION_RIBBON_CONFETTI_A:"ribbon/falling-confetti/confetti-a/confetti-a-",PREFIX_ANIMATION_RIBBON_CONFETTI_B:"ribbon/falling-confetti/confetti-b/confetti-b-",PREFIX_ANIMATION_RIBBON_CONFETTI_C:"ribbon/falling-confetti/confetti-c/confetti-c-",PREFIX_ANIMATION_RIBBON_CONFETTI_D:"ribbon/falling-confetti/confetti-d/confetti-d-"}},GAMEPLAY:{KEY:"gameplay-resources",TEXTURE:"./assets/textures/"+a+"x/gameplay-resources.png",JSON:"./assets/textures/"+a+"x/gameplay-resources.json",FRAME:{BLANK:"blank",BIG_TOP:"bg-top",BIG_PLAYER:"bg-player",BIG_CIRCLE:"big-circle",BG_DIAMOND_BAR:"bg-diamond-bar",BUTTON_PLUS:"buttons/plus",BUTTON_SETTING:"buttons/setting",AVATAR_BLUE_BG:"avatars/bg-blue-mini",AVATAR_BLUE_FRAME:"avatars/frame-blue-mini",PROGRESS_BG_LEFT:"progress/bg-left",PROGRESS_BG_MID:"progress/bg-mid",PROGRESS_BG_RIGHT:"progress/bg-right",PROGRESS_BAR_LEFT:"progress/bar-left",PROGRESS_BAR_MID:"progress/bar-mid",PROGRESS_BAR_RIGHT:"progress/bar-right",ITEM_GIFT:"items/gift",ITEM_PAINT:"items/paint",ITEM_HAMMER:"items/hammer",ITEM_SHUFFLE:"items/shuffle",ITEM_BG_COIN:"items/bg-coin",ITEM_BG_ITEM:"items/bg-item",ICON_PLUS:"icons/plus",ICON_CHECK:"icons/check",ICON_CLOCK:"icons/clock",ICON_DIAMOND:"icons/diamond",ICON_DIAMOND_SMALL:"icons/diamond-small",ICON_CUP_SUPERMINI:"icons/cup-supermini",TILE_RED:"gems/red",TILE_BLUE:"gems/blue",TILE_PINK:"gems/pink",TILE_GREEN:"gems/green",TILE_YELLOW:"gems/yellow",TILE_FREEZE:"gems/freeze",TILE_COLORFUL:"gems/colorful",TILE_COLOR_CHANGE:"gems/change"}},DEMO_SPINE:{KEY:"demo-spine",jsonPATH:"./assets/spines/demo/demo.json",atlasPATH:"./assets/spines/demo/demo.atlas"}};GameCore.Utils.Valid.isDebugger()&&(r.EFFECTS.FRAME=(0,i.Z)({},r.ANIMATION_SCENE.FRAME,r.EFFECTS.FRAME)),t.Z=r},431:function(e,t,n){"use strict";n.d(t,{C:function(){return a},K:function(){return r}});var i=n(101),a={BOOT_SCENE:"BOOT_SCENE",LOAD_SCENE:"LOAD_SCENE",GAME_SCENE:"GAME_SCENE",GLOBAL_SCENE:"GLOBAL_SCENE",DASHBOARD_SCENE:"DASHBOARD_SCENE",GAME_OVER_SCENE:"GAME_OVER_SCENE",LEADERBOARD_SCENE:"LEADERBOARD_SCENE",TOURNAMENT_SCENE:"TOURNAMENT_SCENE",RESULT_MATCH_SCENE:"RESULT_MATCH_SCENE",TEST_SCENE:"TEST_SCENE",ANIMATIONS_SCENE:"ANIMATIONS_SCENE"},r={SWITCH:n.n(i)()("SWITCH")}},432:function(e,t,n){"use strict";n.d(t,{Ks:function(){return r},Xs:function(){return s},o4:function(){return a}});var i=n(433),a={PAUSE_SCREEN:"PAUSE_SCREEN",NOTIFY_SCREEN:"NOTIFY_SCREEN",REWARD_SCREEN:"REWARD_SCREEN",RESCUE_SCREEN:"RESCUE_SCREEN",SETTINGS_SCREEN:"SETTINGS_SCREEN",BEST_SCORE_SCREEN:"BEST_SCORE_SCREEN",DAILY_REWARD_SCREEN:"DAILY_REWARD_SCREEN",DAILY_MISSIONS_SCREEN:"DAILY_MISSIONS_SCREEN",LUCKY_REWARD_SCREEN:"LUCKY_REWARD_SCREEN"},r={SCREEN:200,POPUP:300,PRIORITY:999},s=i.Z},442:function(e,t){"use strict";t.Z={BUTTON_CLICK:"button_click",CONGRATULATION:"congratulation",CLOCK_TICK:"clock_tick",DAILY_REWARD:"daily_reward",DIAMONDS_DROP:"diamonds_drop",DIAMONDS_EAT:"diamonds_eat",FIREWORKS_BIG:"fireworks_big",FIREWORKS_SOAR:"fireworks_soar",FIREWORKS_SMALL:"fireworks_small",GEM_DROP:"gem_drop",GAME_OVER_SCENE:"game_over_scene",GEM_EXPLOSIVE_1:"gem_explosive_1",GEM_EXPLOSIVE_2:"gem_explosive_2",GEM_EXPLOSIVE_3:"gem_explosive_3",GEM_EXPLOSIVE_4:"gem_explosive_4",GEM_EXPLOSIVE_5:"gem_explosive_5",GEM_EXPLOSIVE_6:"gem_explosive_6",GEM_EXPLOSIVE_FREEZE:"gem_explosive_freeze",GEM_FALLING:"gem_falling",GIFT_CHARGE:"gift_charge",GIFT_EXPLODE:"gift_explode",GIFT_REVEAL:"gift_reveal",ITEM_ACTIVE_AMBIENCE:"item_active_ambience",MISSION_COMPLETED:"mission_completed",MISSION_REWARD:"mission_reward",MOVE_WRONG:"move_wrong",START_LEVEL:"start_level",POPUP_OFF:"popup_off",POPUP_SHOW:"popup_show",SCORE_COUNTER:"score_counter",START_GAME:"start_game",USE_HAMMER:"use_hammer",USE_PAINT:"use_paint",USE_SHUFFLE:"use_shuffle",YOU_LOSE:"you_lose",YOU_WIN:"you_win"}},618:function(e,t,n){"use strict";var i=n(21),a=n(5),r=n(32).Z.EFFECTS,s=r.KEY,o=r.FRAME,c=function(e){function t(t){var n;return(n=e.call(this,t)||this).halo=void 0,n.star=void 0,n.createStar(),n.createHalo(),n.scene.add.existing((0,i.Z)(n)),n}(0,a.Z)(t,e);var n=t.prototype;return n.run=function(){this.runStarAnimation(),this.runHaloAnimation()},n.createStar=function(){this.star=this.scene.make.image({key:s,frame:o.FX_STAR_YELLOW,visible:!1}),this.star.setWorldSize(35,35),this.add(this.star)},n.createHalo=function(){this.halo=this.scene.make.image({key:s,frame:o.FX_CIRCLE,visible:!1}),this.halo.setWorldSize(162,162),this.add(this.halo)},n.runStarAnimation=function(){var e=this;this.scene.tweens.killTweensOf(this.star),this.star.setVisible(!0);var t=1/GameCore.Utils.Image.getImageScale();this.scene.tweens.add({targets:[this.star],duration:400,ease:Phaser.Math.Easing.Quintic.Out,props:{scaleX:{start:16*t,to:0},scaleY:{start:10*t,to:0}},onComplete:function(){e.star.setVisible(!1)}})},n.runHaloAnimation=function(){var e=this;this.scene.tweens.killTweensOf(this.halo),this.halo.setScale(0),this.halo.setVisible(!0),this.scene.tweens.add({targets:[this.halo],duration:200,ease:Phaser.Math.Easing.Cubic.Out,props:{scale:{from:0,to:8},alpha:{from:1,to:0}},onComplete:function(){e.halo.setVisible(!1)}})},t}(Phaser.GameObjects.Container);t.Z=c},609:function(e,t,n){"use strict";var i=n(21),a=n(5),r=n(32).Z.EFFECTS,s=r.KEY,o=r.FRAME,c=function(e){function t(t){var n;return(n=e.call(this,t,s,o.FX_COMET)||this).emitZone=void 0,n.emitter=void 0,n.createEmitZone(),n.scene.add.existing((0,i.Z)(n)),n}(0,a.Z)(t,e);var n=t.prototype;return n.createEmitZone=function(){this.emitZone=new Phaser.Geom.Rectangle},n.createEmitters=function(){var e=1/GameCore.Utils.Image.getImageScale();this.emitter=this.createEmitter({on:!1,frame:o.FX_COMET,emitZone:{source:this.emitZone,type:"random"},speed:20,timeScale:1,frequency:100,alpha:{start:1,end:0,ease:Phaser.Math.Easing.Expo.Out},scale:{start:2*e,end:.1*e,ease:Phaser.Math.Easing.Expo.Out},lifespan:2666})},n.run=function(e,t,n,i,a){this.stop(),this.reset(),this.emitZone.setSize(i,a),this.emitZone.setPosition(t-i/2,n-a/2),this.emitter.setQuantity(e),this.emitter.start()},n.explode=function(e,t,n){this.emitter||this.reset(),this.emitter.explode(e,t,n)},n.stop=function(){var e,t;null==(e=this.emitter)||e.killAll(),null==(t=this.emitter)||t.stop()},n.reset=function(){this.createEmitters()},t}(Phaser.GameObjects.Particles.ParticleEmitterManager);t.Z=c},619:function(e,t,n){"use strict";var i=n(21),a=n(5),r=n(32),s=n(122),o=r.Z.EFFECTS,c=o.KEY,u=o.FRAME,l=function(e){function t(t,n){var a;return(a=e.call(this,t,c,u.FX_CONFETTI_SMALL_1)||this).config=void 0,a.emitter=void 0,a.config=n||{},a.scene.add.existing((0,i.Z)(a)),a}(0,a.Z)(t,e);var n=t.prototype;return n.createEmitters=function(){var e=u.FX_CONFETTI_SMALL_1,t=u.FX_CONFETTI_SMALL_2,n=u.FX_CONFETTI_SMALL_3,i=u.FX_CONFETTI_SMALL_4,a=1/GameCore.Utils.Image.getImageScale(),r={on:!1,particleBringToTop:!0,frame:[e,t,n,i],tint:[14223402,1021804,5420529,16702052],timeScale:1,frequency:300,maxParticles:120,gravityY:-10,speedX:{min:-100,max:100},speedY:{min:80,max:250},alpha:{start:1,end:.8},rotate:{start:0,end:1080},scale:{min:.8*a,max:2*a},angle:{min:20,max:160},lifespan:{min:8e3,max:12e3}},o=(0,s.TS)(r,this.config);this.emitter=this.createEmitter(o)},n.run=function(e,t,n){this.stop(),this.emitter.setQuantity(e),this.emitter.setPosition(t,n),this.emitter.start()},n.explode=function(e,t,n){this.emitter||this.createEmitters(),this.emitter.explode(e,t,n)},n.stop=function(){var e,t,n;null==(e=this.emitter)||e.killAll(),null==(t=this.emitter)||t.stop(),null==(n=this.emitter)||n.remove(),this.createEmitters()},t}(Phaser.GameObjects.Particles.ParticleEmitterManager);t.Z=l},612:function(e,t,n){"use strict";var i=n(21),a=n(5),r=n(32).Z.DEFAULT,s=r.KEY,o=r.FRAME,c=function(e){function t(t){var n;return(n=e.call(this,t,s,o.ICON_DIAMOND)||this).emitter=void 0,n.createEmitters(),n.setActive(!1),n.setVisible(!1),n.scene.add.existing((0,i.Z)(n)),n}(0,a.Z)(t,e);var n=t.prototype;return n.createEmitters=function(){var e=1/GameCore.Utils.Image.getImageScale();this.emitter=this.createEmitter({on:!1,frame:o.ICON_DIAMOND,gravityY:160,angle:{min:-180,max:0},speed:{min:50,max:200},scale:{min:.3*e,max:1*e},alpha:{start:1,end:0,ease:Phaser.Math.Easing.Expo.In},lifespan:1500})},n.explode=function(e,t,n){this.setActive(!0),this.setVisible(!0),this.emitter.explode(e,t,n)},t}(Phaser.GameObjects.Particles.ParticleEmitterManager);t.Z=c},615:function(e,t,n){"use strict";var i=n(21),a=n(5),r=n(32).Z.EFFECTS,s=r.KEY,o=r.FRAME,c=function(e){function t(t){var n;return(n=e.call(this,t,s,o.FX_SPARK)||this).deathZone=void 0,n.emitter=void 0,n.createDeathZone(),n.createEmitters(),n.setActive(!1),n.setVisible(!1),n.scene.add.existing((0,i.Z)(n)),n}(0,a.Z)(t,e);var n=t.prototype;return n.createDeathZone=function(){this.deathZone=new Phaser.Geom.Circle},n.createEmitters=function(){var e=1/GameCore.Utils.Image.getImageScale();this.emitter=this.createEmitter({on:!1,frame:o.FX_SPARK,speed:{min:10,max:1200},scale:{start:1.33*e,end:0},alpha:{start:1,end:0,ease:Phaser.Math.Easing.Expo.Out},deathZone:{source:this.deathZone,type:"onLeave"},lifespan:3e3})},n.explode=function(e,t,n,i){this.setActive(!0),this.setVisible(!0),this.deathZone.radius=i,this.deathZone.setPosition(t,n),this.emitter.explode(e,t,n)},t}(Phaser.GameObjects.Particles.ParticleEmitterManager);t.Z=c},611:function(e,t,n){"use strict";var i=n(21),a=n(5),r=n(32).Z.EFFECTS,s=r.KEY,o=r.FRAME,c=function(e){function t(t){var n;return(n=e.call(this,t,s,o.FX_STAR_YELLOW)||this).emitZone=void 0,n.emitter=void 0,n.createEmitZone(),n.scene.add.existing((0,i.Z)(n)),n}(0,a.Z)(t,e);var n=t.prototype;return n.createEmitZone=function(){this.emitZone=new Phaser.Geom.Rectangle},n.createEmitters=function(){var e=1/GameCore.Utils.Image.getImageScale();this.emitter=this.createEmitter({on:!1,frame:o.FX_STAR_YELLOW,emitZone:{source:this.emitZone,type:"random"},timeScale:1,frequency:100,alpha:{start:1,end:0,ease:Phaser.Math.Easing.Expo.Out},scale:{start:1*e,end:0,ease:Phaser.Math.Easing.Expo.Out},lifespan:{min:800,max:1500}})},n.run=function(e,t,n,i,a){this.stop(),this.reset(),this.emitZone.setSize(i,a),this.emitZone.setPosition(t-i/2,n-a/2),this.emitter.setQuantity(e),this.emitter.start()},n.stop=function(){var e,t;null==(e=this.emitter)||e.killAll(),null==(t=this.emitter)||t.stop()},n.reset=function(){this.createEmitters()},t}(Phaser.GameObjects.Particles.ParticleEmitterManager);t.Z=c},614:function(e,t,n){"use strict";var i=n(21),a=n(5),r=n(32).Z.EFFECTS,s=r.KEY,o=r.FRAME,c=function(e){function t(t){var n;return(n=e.call(this,t,s,o.FX_COMET)||this).emitZone=void 0,n.emitter=void 0,n.createEmitZone(),n.createEmitters(),n.scene.add.existing((0,i.Z)(n)),n}(0,a.Z)(t,e);var n=t.prototype;return n.createEmitZone=function(){this.emitZone=new Phaser.Geom.Rectangle},n.createEmitters=function(){var e=1/GameCore.Utils.Image.getImageScale();this.emitter=this.createEmitter({on:!1,frame:o.FX_COMET,emitZone:{source:this.emitZone,type:"random"},deathZone:{source:this.emitZone,type:"onLeave"},timeScale:1,frequency:150,speedY:{min:-20,max:-60},alpha:{start:1,end:0,ease:Phaser.Math.Easing.Cubic.Out},scale:{start:1*e,end:0,ease:Phaser.Math.Easing.Cubic.Out},lifespan:{min:1500,max:2500}})},n.run=function(e,t,n,i,a){this.stop(),this.emitZone.setSize(i,a),this.emitZone.setPosition(t-i/2,n-a/2),this.emitter.setQuantity(e),this.emitter.start()},n.stop=function(){var e,t;null==(e=this.emitter)||e.killAll(),null==(t=this.emitter)||t.stop()},t}(Phaser.GameObjects.Particles.ParticleEmitterManager);t.Z=c},610:function(e,t,n){"use strict";var i=n(21),a=n(5),r=n(32).Z.EFFECTS,s=r.KEY,o=r.FRAME,c=function(e){function t(t){var n;return(n=e.call(this,t,s,o.FX_STAR_YELLOW)||this).emitZone=void 0,n.emitter=void 0,n.scene=t,n.createEmitZone(),n.scene.add.existing((0,i.Z)(n)),n}(0,a.Z)(t,e);var n=t.prototype;return n.createEmitZone=function(){this.emitZone=new Phaser.Geom.Rectangle},n.createEmitters=function(){var e=1/GameCore.Utils.Image.getImageScale();this.emitter=this.createEmitter({on:!1,frame:o.FX_STAR_WHITE,emitZone:{source:this.emitZone,type:"random"},timeScale:1,frequency:80,maxParticles:15,scale:{start:0,end:1*e,ease:Phaser.Math.Easing.Bounce.Out},lifespan:400})},n.run=function(e,t,n,i,a){this.stop(),this.reset(),this.emitZone.setSize(i,a),this.emitZone.setPosition(t-i/2,n-a/2),this.emitter.setQuantity(e),this.emitter.start()},n.explode=function(e,t,n,i,a){this.stop(),this.reset(),this.emitZone.setSize(i,a),this.emitZone.setPosition(-i/2,-a/2),this.emitter.explode(e,t,n)},n.stop=function(){var e,t;null==(e=this.emitter)||e.killAll(),null==(t=this.emitter)||t.stop()},n.reset=function(){this.createEmitters()},t}(Phaser.GameObjects.Particles.ParticleEmitterManager);t.Z=c},441:function(e,t){"use strict";t.Z={LAYOUT_UPDATE:"layout-update"}},440:function(e,t,n){"use strict";n.d(t,{Z:function(){return c}});var i=n(5),a=n(83),r=function(e){function t(t,n,i){var a;return(a=e.call(this,t,0,0,n,i)||this).setOrigin(0,0),a}return(0,i.Z)(t,e),t}(Phaser.GameObjects.Zone),s=n(196),o=n(441),c=function(e){function t(){var t;return(t=e.call(this,{visible:!1})||this).unsubscribeList=void 0,t.gameZone=void 0,t.background=void 0,t.handleOpenScene=function(){t.logPageviewOnOpen(),t.logEventOpen()},t.handleResize=function(){if(t.background&&t.gameZone){var e=t.world.getResizeEventData(),n=e.width,i=e.height;t.gameZone.setSize(n,i),t.background.setPosition(n/2,i/2),t.background.setDisplaySize(n,i),t.events.emit(o.Z.LAYOUT_UPDATE)}},t.removeStateChange=function(){t.unsubscribeList.forEach((function(e){return e()}))},t}(0,i.Z)(t,e);var n=t.prototype;return n.create=function(){this.events.on("wake",this.handleOpenScene),this.events.on("resume",this.handleOpenScene),this.events.on("create",this.handleOpenScene),this.world.events.on(s.Z.RESIZE,this.handleResize),this.scaleGame(),this.createGameZone()},n.scaleGame=function(){var e=this.getCamera("main"),t=this.world.getZoomRatio(),n=this.world.getWorldSize(),i=n.width,a=n.height;e.setZoom(t),e.centerOn(i/2,a/2)},n.createGameZone=function(){var e=this.world.getWorldSize(),t=e.width,n=e.height;this.gameZone=new r(this,t,n)},n.getCamera=function(e){return"main"===e?this.cameras.main:this.cameras.getCamera(e)},n.createMask=function(e){void 0===e&&(e=1),this.getCamera("main").setBackgroundColor("rgba(0, 0, 0, "+e+")")},n.fontSize=function(e){var t=1;return"ja"===this.lang.getCurrentLanguage()&&(t=1.4),e/t},n.createBackground=function(e,t,n,i){this.background?(this.background.setTexture(e),t&&this.background.setFrame(t)):this.background=this.make.image({key:e,frame:t}),this.background.setName(e);var a=this.gameZone,r=a.displayWidth,s=a.displayHeight;this.background.setDisplaySize(r,s),GameCore.Utils.Valid.isNumber(n)&&this.background.setAlpha(n),GameCore.Utils.Valid.isNumber(i)&&this.background.setTint(i),Phaser.Display.Align.In.Center(this.background,this.gameZone)},n.handleStateChange=function(e){var t=this;this.unsubscribeList=[],e.forEach((function(e){var n=e.selector,i=e.callback,a=t.stateStorage.watch(n,i);t.unsubscribeList.push(a)})),this.events.once("sleep",this.removeStateChange),this.events.once("destroy",this.removeStateChange),this.events.once("shutdown",this.removeStateChange)},n.logPageviewOnOpen=function(){this.analytics.pageview(this.scene.key)},n.logEventOpen=function(){this.analytics.event(a._.SCREEN_OPEN,{screen_name:this.getSceneName()})},n.getSceneName=function(){return GameCore.Utils.String.toUpperCamelCase(this.scene.key.toLowerCase())},t}(Phaser.Scene)},198:function(e,t,n){"use strict";n.d(t,{Z:function(){return N}});var i=n(96),a=n(5),r=n(84),s=n.n(r),o=n(438),c=n(439),u=n(32),l=n(431),h=n(432),d=n(193),p=n(440),f=n(21),m=n(197),g=n(123),v=u.Z.DEFAULT,y=v.KEY,E=v.FRAME,A=function(e){function t(t){var n;return(n=e.call(this,t,0,0)||this).fps=0,n.fpsString="FPS: %1",n.fpsText=void 0,n.background=void 0,n.lastUpdate=void 0,n.update=function(e){if(!(e-n.lastUpdate<800)){n.lastUpdate=e;var t=Math.floor(n.scene.game.loop.actualFps);n.setFps(t)}},n.createFps(),n.setDepth(g.Z.DEBUG),n.scene.add.existing((0,f.Z)(n)),n.scene.events.on(Phaser.Scenes.Events.UPDATE,n.update),n}(0,a.Z)(t,e);var n=t.prototype;return n.setFps=function(e){this.fps=e;var t=Phaser.Utils.String.Format(this.fpsString,[e]);this.fpsText.setText(t)},n.createFps=function(){this.background=this.scene.make.image({key:y,frame:E.BLANK}),this.background.setName("BG"),this.background.setTint(13801480),this.background.setWorldSize(45,25),this.fpsText=this.scene.make.bitmapText({size:this.scene.fontSize(14),text:this.fpsString,font:m.Z.PRIMARY.KEY,origin:{x:.5,y:.5}}),this.fpsText.setName("FPS Meter"),Phaser.Display.Align.In.Center(this.fpsText,this.background),this.add([this.background,this.fpsText]),this.setFps(0)},t}(Phaser.GameObjects.Container),S=function(e){function t(t){var n;if((n=e.call(this,t,0,0)||this).performance=void 0,n.memory=0,n.maxMemoryLimit=void 0,n.maxPercentThreshold=void 0,n.normalColor=3459162,n.warningColor=16768343,n.alarmColor=15812200,n.memoryString="Memory: %1MB / %2MB",n.memoryText=void 0,n.lastUpdate=void 0,n.update=function(e){if(!(e-n.lastUpdate<1e3)){n.lastUpdate=e;var t=n.performance.memory.usedJSHeapSize,i=1048576*n.maxMemoryLimit,a=Math.round(t/1048576);n.setMemory(a),n.memoryText.setTint(n.normalColor),t>n.maxPercentThreshold/100*i&&n.memoryText.setTint(n.warningColor),t>i&&n.memoryText.setTint(n.alarmColor)}},n.performance=window.performance,n.createMemory(),n.setDepth(g.Z.DEBUG),n.scene.add.existing((0,f.Z)(n)),!n.isSupport())return n.memoryText.setText("Memory: not supported!"),(0,f.Z)(n);var i=n.performance.memory.jsHeapSizeLimit;return n.maxPercentThreshold=90,n.setMaxMemory(i/1048576),n.scene.events.on(Phaser.Scenes.Events.UPDATE,n.update),n}(0,a.Z)(t,e);var n=t.prototype;return n.isSupport=function(){var e;return this.performance&&!(null==(e=this.performance)||!e.memory)},n.setMaxMemory=function(e){this.maxMemoryLimit=Math.round(e)},n.setMemory=function(e){this.memory=e;var t=Phaser.Utils.String.Format(this.memoryString,[e,this.maxMemoryLimit]);this.memoryText.setText(t)},n.createMemory=function(){this.memoryText=this.scene.make.bitmapText({size:this.scene.fontSize(14),text:this.memoryString,font:m.Z.PRIMARY.KEY,depth:2e3}),this.memoryText.setName("Memory Meter"),this.add(this.memoryText),this.setMemory(0)},t}(Phaser.GameObjects.Container),T=n(437),b=n(435),I=function(e){function t(t,n,i,a){var r;return(r=e.call(this,t,n,i,a)||this).loadingIcon=void 0,r.messageText=void 0,r.openAnimation=void 0,r.closeTimerEvent=void 0,r.addLoadingIcon(),r.addMessageText(),r.setDepth(h.Ks.PRIORITY),r.background.setAlpha(.8),r}(0,a.Z)(t,e);var n=t.prototype;return n.open=function(t){var n,i=this;e.prototype.open.call(this,t);var a=this.getData(["message","duration","loading"]),r=a[0],s=void 0===r?"":r,o=a[1],c=void 0===o?0:o,u=a[2],l=void 0!==u&&u;this.setMessage(s),this.showLoading(l),null==(n=this.closeTimerEvent)||n.remove(),c>0&&(this.closeTimerEvent=this.scene.time.addEvent({delay:c,callback:function(){if(i.visible){i.scene.screen.close(i.name);var e=i.scene.game.globalScene;e instanceof D&&e.requestBackgroundMaskUpdate(h.o4.NOTIFY_SCREEN,0)}}})),this.runOpenAnimation()},n.close=function(){if(this.visible){e.prototype.close.call(this);var t=this.scene.game.globalScene;t instanceof D&&t.requestBackgroundMaskUpdate(h.o4.NOTIFY_SCREEN,0)}},n.addLoadingIcon=function(){this.loadingIcon=new b.Z(this.scene),this.add(this.loadingIcon),Phaser.Display.Align.In.Center(this.loadingIcon,this.zone)},n.addMessageText=function(){this.messageText=this.scene.make.bitmapText({size:this.scene.fontSize(30),font:m.Z.PRIMARY.KEY,origin:{x:.5,y:.5}}),this.messageText.setCenterAlign(),this.add(this.messageText)},n.setMessage=function(e){this.messageText.setText(e)},n.showLoading=function(e){this.loadingIcon.setVisible(e);var t=!1===e?20:80;Phaser.Display.Align.In.Center(this.messageText,this.zone,0,t)},n.runOpenAnimation=function(){var e,t,n=this.scene.game.globalScene;n instanceof D&&n.requestBackgroundMaskUpdate(h.o4.NOTIFY_SCREEN,this.background.alpha),null==(e=this.openAnimation)||e.stop(),null==(t=this.openAnimation)||t.remove(),this.openAnimation=new T.Z({targets:[this.messageText,this.loadingIcon],props:{scale:{getStart:function(e){return e.scale-.3},getEnd:function(e){return e.scale}}}}),this.openAnimation.play()},n.logPageviewOnOpen=function(){},n.logPageviewOnClose=function(){},t}(GameCore.Screen),w=n(590),C=n.n(w),x=n(434),O=function(){function e(){this.backgroundAlphaList=void 0,this.backgroundAlphaList=[]}var t=e.prototype;return t.requestBackgroundMaskUpdate=function(e,t){var n,i=C()(n=this.backgroundAlphaList).call(n,(function(t){return t.screenName===e}));-1===i?this.backgroundAlphaList.push({alpha:t,screenName:e}):this.backgroundAlphaList[i].alpha=t,this.updateBackgroundMask()},t.updateBackgroundMask=function(){if(0!==this.backgroundAlphaList.length){var e=1;this.backgroundAlphaList.forEach((function(t){e*=1-t.alpha})),(0,x.Z)(1-e)}else(0,x.Z)(0)},e}(),_=n(196),R=u.Z.DEFAULT,P=R.KEY,k=R.FRAME,M=function(e){function t(){for(var t,n,i=arguments.length,a=new Array(i),r=0;r<i;r++)a[r]=arguments[r];return(n=e.call.apply(e,s()(t=[this]).call(t,a))||this).mask=void 0,n.fadeInAnim=void 0,n.fadeOutAnim=void 0,n.fpsMeter=void 0,n.memoryMeter=void 0,n.backgroundMaskManager=void 0,n.switchScene=function(e){n.currentScene.switch(e)},n.emitGameEventStartScene=function(e){var t=e.scene.key;n.updateSceneState(),n.runMaskFadeOutAnimation(),n.updateActiveSceneKey(t),n.game.events.emit(Phaser.Scenes.Events.START,t),(0,d.sw)("scene","Start scene: "+t)},n.emitGameEventSleepScene=function(e){var t=e.scene.scene.key;t!==l.C.LOAD_SCENE&&(n.runMaskFadeInAnimation(),n.game.events.emit(Phaser.Scenes.Events.SLEEP,t))},n.emitGameEventWakeScene=function(e){var t=e.scene.scene.key;t!==l.C.LOAD_SCENE&&(n.updateSceneState(),n.runMaskFadeOutAnimation(),n.updateActiveSceneKey(t),n.game.events.emit(Phaser.Scenes.Events.WAKE,t))},n.emitGameEventPauseScene=function(e){var t=e.scene.scene.key;n.game.events.emit(Phaser.Scenes.Events.PAUSE,t)},n.emitGameEventResumeScene=function(e){var t=e.scene.scene.key;n.updateActiveSceneKey(t),n.game.events.emit(Phaser.Scenes.Events.RESUME,t)},n.emitGameEventShutdownScene=function(e){var t=e.scene.scene.key;n.game.events.emit(Phaser.Scenes.Events.SHUTDOWN,t)},n}(0,a.Z)(t,e);var n=t.prototype;return n.init=function(){this.listenScenesEvents(),this.game.globalScene=this,this.backgroundMaskManager=new O},n.setup=function(){this.scaleGame(),this.addMask(),this.addNotifyScreen(),this.addFPS(),this.addMemory(),this.addSceneStorage(),this.listenToEvents()},n.listenToEvents=function(){this.game.world.events.on(_.Z.RESIZE,this.game.ads.handleWorldResize)},n.addNotifyScreen=function(){var e=this.screen.add(h.o4.NOTIFY_SCREEN,I);Phaser.Display.Align.In.Center(e,this.gameZone)},n.addMask=function(){this.mask=this.make.image({key:P,frame:k.BLANK});var e=this.gameZone,t=e.width,n=e.height;this.mask.setAlpha(0),this.mask.setOrigin(0,0),this.mask.setTint(0),this.mask.setWorldSize(t,n)},n.addFPS=function(){GameCore.Configs.Statistics.ShowFPSInGame&&(this.fpsMeter=new A(this),Phaser.Display.Align.In.TopLeft(this.fpsMeter,this.gameZone,-20,-10))},n.addMemory=function(){GameCore.Configs.Statistics.ShowMemoryInGame&&(this.memoryMeter=new S(this),Phaser.Display.Align.In.TopLeft(this.memoryMeter,this.gameZone,-45,-3))},n.addSceneStorage=function(){this.storage.addStorage("scenes",{currentSceneKey:null})},n.updateSceneState=function(){this.setGlobalSceneOnTop()},n.setGlobalSceneOnTop=function(){this.scene.bringToTop(this)},n.runMaskFadeInAnimation=function(){var e,t;this.mask&&GameCore.Configs.EnableEffectSceneTransition&&(null==(e=this.fadeInAnim)||e.remove(),null==(t=this.fadeOutAnim)||t.remove(),this.fadeInAnim=new o.Z({targets:[this.mask],duration:400,ease:Phaser.Math.Easing.Cubic.In,props:{alpha:{start:0,from:0,to:.6}}}),this.mask.setAlpha(0),this.fadeInAnim.play())},n.runMaskFadeOutAnimation=function(){var e,t;this.mask&&GameCore.Configs.EnableEffectSceneTransition&&(null==(e=this.fadeInAnim)||e.remove(),null==(t=this.fadeOutAnim)||t.remove(),this.fadeOutAnim=new c.Z({targets:[this.mask],duration:400,ease:Phaser.Math.Easing.Cubic.Out,props:{alpha:{start:.6,from:.6,to:0}}}),this.mask.setAlpha(1),this.fadeOutAnim.play())},n.listenScenesEvents=function(){var e=this;this.scene.manager.getScenes(!1).forEach((function(t){t.events.on(Phaser.Scenes.Events.CREATE,e.emitGameEventStartScene),t.events.on(Phaser.Scenes.Events.SLEEP,e.emitGameEventSleepScene),t.events.on(Phaser.Scenes.Events.WAKE,e.emitGameEventWakeScene),t.events.on(Phaser.Scenes.Events.PAUSE,e.emitGameEventPauseScene),t.events.on(Phaser.Scenes.Events.RESUME,e.emitGameEventResumeScene),t.events.on(Phaser.Scenes.Events.SHUTDOWN,e.emitGameEventShutdownScene)})),this.events.on(l.K.SWITCH,this.switchScene)},n.getActiveScene=function(){return this.scene.manager.getScenes(!0)[0]},n.getCurrentScene=function(){return this.currentScene},n.requestBackgroundMaskUpdate=function(e,t){this.backgroundMaskManager.requestBackgroundMaskUpdate(e,t)},n.recalculateBackgroundMask=function(){this.backgroundMaskManager.updateBackgroundMask()},n.updateActiveSceneKey=function(e){e!==l.C.GLOBAL_SCENE&&this.storage.setStorageData("scenes","currentSceneKey",e)},n.logEventOpen=function(){},n.logPageviewOnOpen=function(){},(0,i.Z)(t,[{key:"currentScene",get:function(){var e=this.storage.getStorageData("scenes","currentSceneKey");return e?this.scene.manager.getScene(e).scene:this.getActiveScene().scene}}]),t}(p.Z),D=M,N=M},561:function(e,t,n){"use strict";var i=n(193),a=n(425),r=n(82),s=n(65),o=n(5),c=n(66),u=n.n(c),l=n(45),h=n.n(l),d=n(603),p=0,f=0,m=function(){function e(e){this.game=void 0,this.progressFbTimeEvent=void 0,this.game=e}var t=e.prototype;return t.loadingProgressFbBootScene=function(){var e=this,t=100;f=30;!function n(){t<=0?clearTimeout(e.progressFbTimeEvent):e.progressFbTimeEvent=setTimeout((function(){e.game.facebook.setLoadingProgress(Math.round(f)),f+=30/t,t--,n()}),50)}()},t.finishLoadingProgressFbBootScene=function(){clearTimeout(this.progressFbTimeEvent)},t.loadingProgressFbLoadScene=function(){var e=this;(!f||f<30)&&(f=60),p=f;!function t(){e.progressFbTimeEvent=setTimeout((function(){e.game.facebook.setLoadingProgress(Math.round(f)),f+=.1,t()}),50)}()},t.onProgress=function(e){var t=100-f,n=Math.round(e*t+f);n>p&&clearTimeout(this.progressFbTimeEvent),this.game.facebook.setLoadingProgress(n)},e}(),g=m,v=function(){function e(e){this.game=void 0,this.game=e}var t=e.prototype;return t.addKillRevive=function(){var e=this;[Phaser.GameObjects.Container,Phaser.GameObjects.Image,Phaser.GameObjects.Sprite,Phaser.GameObjects.Graphics,Phaser.GameObjects.Text,Phaser.GameObjects.BitmapText,Phaser.GameObjects.Particles.ParticleEmitter,Phaser.GameObjects.Particles.ParticleEmitterManager].forEach((function(t){t.prototype.kill=e.kill,t.prototype.revive=e.revive}))},t.addKillReviveGroup=function(){Phaser.GameObjects.Group.prototype.killGroup=this.killGroup,Phaser.GameObjects.Group.prototype.reviveGroup=this.reviveGroup},t.addSetWorldSize=function(){var e=this;[Phaser.GameObjects.Image,Phaser.GameObjects.Sprite].forEach((function(t){t.prototype.setWorldSize=e.setWorldSize}))},t.addSetWorldSizeForContainer=function(){var e=this;[Phaser.GameObjects.Container].forEach((function(t){t.prototype.setWorldSize=e.setWorldSizeForContainer}))},t.addGetWorldPosition=function(){var e=this;[Phaser.GameObjects.Container,Phaser.GameObjects.Image,Phaser.GameObjects.Sprite,Phaser.GameObjects.Graphics,Phaser.GameObjects.Text,Phaser.GameObjects.BitmapText].forEach((function(t){t.prototype.getWorldPosition=e.getWorldPosition}))},t.addDrawDebugBox=function(){var e=this;[Phaser.GameObjects.Container,Phaser.GameObjects.Image,Phaser.GameObjects.Sprite,Phaser.GameObjects.Graphics,Phaser.GameObjects.Text,Phaser.GameObjects.BitmapText,Phaser.GameObjects.Zone].forEach((function(t){t.prototype.drawDebugBox=e.drawDebugBox}))},t.addHighQuality=function(){var e=this;[Phaser.GameObjects.Text].forEach((function(t){t.prototype.setHighQuality=e.setHighQuality}))},t.addSetLineHeightForBitmapText=function(){Phaser.GameObjects.BitmapText.prototype.setLineHeight=function(e){this.lineHeight=e,this.updateDisplayOrigin()}},t.kill=function(){this.setActive(!1),this.setVisible(!1)},t.revive=function(){this.setActive(!0),this.setVisible(!0)},t.killGroup=function(){this.getChildren().forEach((function(e){e.setActive(!1),e.setVisible(!1)}))},t.reviveGroup=function(){this.getChildren().forEach((function(e){e.setActive(!0),e.setVisible(!0)}))},t.setWorldSize=function(e,t){this.setSize(e,t),this.setDisplaySize(e,t)},t.setWorldSizeForContainer=function(e,t,n){void 0===n&&(n=2),this.setSize(e*n,t*n),this.setDisplaySize(e,t)},t.getWorldPosition=function(){var e=this.getWorldTransformMatrix().decomposeMatrix();return{x:e.translateX,y:e.translateY}},t.drawDebugBox=function(e,t){var n=this.x,i=this.y,a=this.width,r=this.height,s=this.depth,o=this.originX,c=this.originY,u=this.scene.add.rectangle(n,i,a,r,e,t);u.setName("Debug Box"),u.setDepth(s);var l=GameCore.Utils.Valid.isNumber;return l(o)&&l(c)&&u.setOrigin(o,c),u},t.setHighQuality=function(){return this.renderer instanceof Phaser.Renderer.WebGL.WebGLRenderer?this.setResolution(2*this.scene.game.world.getZoomRatio()):this},e}(),y=v,E=n(52),A=n.n(E),S=n(100),T=n.n(S),b=n(101),I=n.n(b),w=n(127),C=n.n(w),x=n(84),O=n.n(x),_=n(200),R=n.n(_),P=[{url:"./assets/images/others/mock1.jpg",title:"Buy lottery tickets on behalf",description:"\ud83d\udca5\ud83d\udca5\ud83d\udca5 Place an order for lottery tickets from 3 regions!!! \u2705 Fast - Convenient - Safe \u2705 Diverse products \u2705 Payment...",buttonName:"Discover more"},{url:"./assets/images/others/mock2.jpg",title:"SYSTEM-WIDE SALE UP TO 50%",description:'\ud83d\udd25 \ud835\uddec\ud835\uddd8\ud835\uddd4\ud835\udde5 \ud835\uddd8\ud835\udde1\ud835\uddd7 \ud835\udde6\ud835\uddd4\ud835\udddf\ud835\uddd8 | \ud835\udde8\ud835\udde3 \ud835\udde7\ud835\udde2 \ud835\udff1\ud835\udfec% "BIG PARTY" AUTHENTIC SPORTSWEAR SHOCKINGLY REDUCED PRICES! \ud83c\udf81 From...',buttonName:"Discover more"},{url:"./assets/images/others/mock3.jpg",title:"Register now",description:"Play safe, play fun, play 9club!",buttonName:"Register"}],k=function(){function e(){}return e.loadBannerAdAsync=function(){var e=(0,s.Z)(h().mark((function e(){var t,n,i,a,r,s,o,c,l,d;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.currentIdx=(this.currentIdx+1)%P.length,this.hideBannerAdAsync(),e.next=4,new(u())((function(e){setTimeout((function(){e()}),2e3)}));case 4:if(!document.getElementById("mock-banner-ads")){e.next=16;break}return t=P[this.currentIdx],n=t.url,i=t.buttonName,a=t.title,r=t.description,(s=document.getElementById("banner-content-text1"))&&(s.innerHTML=a),(o=document.getElementById("banner-content-text2"))&&(o.innerHTML=r),(c=document.getElementById("mock-banner-ads-avatar"))&&(c.style.background="url("+n+") center center/contain no-repeat"),(l=document.getElementById("banner-content-button"))&&(l.innerHTML=i),e.abrupt("return");case 16:d=GameCore.Utils.Device.isDesktop(),50,d?this.createDesktopBannerAd(50):this.createMobileBannerAd(50);case 19:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),e.createDesktopBannerAd=function(e){var t=this,n=P[this.currentIdx],i=n.url,a=n.buttonName,r=n.title,s=n.description,o=document.createElement("div");o.id="mock-banner-ads",o.style.width="100%",o.style.height=e+"px",o.style.bottom="var(--sab)",o.style.display="flex",o.style.position="absolute",o.style.opacity=this.currentOpacity;var c=document.createElement("div");c.id="mock-banner-ads-display-area",c.style.width="100%",c.style.height="100%",c.style.background="#323436 center center/auto no-repeat",c.style.borderRadius="10px",c.style.marginLeft="4px",c.style.marginRight="4px",c.style.display="block",c.style.alignContent="center";var u=document.createElement("div");u.id="mock-banner-ads-content",u.style.boxSizing="border-box",u.style.flexDirection="row",u.style.display="flex",u.style.position="relative",u.style.alignItems="stretch",u.style.paddingLeft="4px",u.style.paddingRight="4px",u.style.justifyContent="space-between";var l=document.createElement("div");l.id="mock-banner-ads-avatar",l.style.marginLeft="10px",l.style.width=e+"px",l.style.minWidth=e+"px",l.style.height=e+"px",l.style.display="flex",l.style.flexDirection="column",l.style.position="relative",l.style.background="url("+i+") center center/contain no-repeat",l.style.borderRadius="50%";var h=document.createElement("div");h.id="mock-banner-ads-right-content",h.style.width="100%",h.style.paddingLeft="10px",h.style.display="flex",h.style.flexDirection="row",h.style.position="relative",h.style.color="#E4E6EB",h.style.wordWrap="break-word",h.style.textAlign="left",h.style.alignContent="center",h.style.alignItems="center",h.style.fontSize="12px",h.style.fontFamily="Helvetica, Arial, sans-serif, Roboto, Helvetica, Arial, sans-serif",l.style.boxSizing="border-box";var d=document.createElement("div");d.style.flexDirection="column",d.style.display="flex",d.style.justifyContent="center",d.style.flexShrink="1",d.style.flexGrow="1",d.style.flexBasis="0",d.style.boxSizing="border-box",d.style.minWidth="0",d.innerHTML="\n            <div id='banner-content-text1' style=\"font-weight:600;line-height: 1.3333;font-size: .9375rem;text-overflow: ellipsis;-webkit-line-clamp: 1;overflow: hidden;display: -webkit-box;-webkit-box-orient: vertical;\">"+r+"</div>\n            <div id='banner-content-text2' style=\"font-weight:400;line-height: 1.2308;font-size: .8125rem;text-overflow: ellipsis;-webkit-line-clamp: 2;overflow: hidden;display: -webkit-box;-webkit-box-orient: vertical;\">"+s+"</div>";var p=document.createElement("button");p.id="banner-content-button",p.type="button",p.style.width="120px",p.style.height=e-20+"px",p.style.fontWeight="600",p.style.backgroundColor="#3963fc",p.style.border="none",p.style.color="white",p.style.borderRadius="5px",p.style.textAlign="center",p.style.display="inline-block",p.style.cursor="pointer",p.style.marginRight="10px",p.style.marginLeft="10px",p.style.flexShrink="1",p.style.boxSizing="border-box",p.style.paddingRight="2px",p.style.paddingLeft="2px",p.innerHTML=a,p.onclick=function(){"0.2"===t.currentOpacity?o.style.opacity="1":o.style.opacity="0.2",t.currentOpacity=o.style.opacity};var f=document.createElement("button");f.type="button",f.style.width=e-20+"px",f.style.height=e-20+"px",f.style.fontWeight="1000",f.style.backgroundColor="#5a5c5c",f.style.border="none",f.style.color="white",f.style.borderRadius="50%",f.style.textAlign="center",f.style.display="inline-block",f.style.cursor="pointer",f.style.marginRight="10px",f.style.marginLeft="10px",f.style.flexShrink="0",f.style.boxSizing="border-box",f.style.paddingRight="2px",f.style.paddingLeft="2px",f.innerHTML="...",document.body.appendChild(o),o.appendChild(c),c.appendChild(u),u.appendChild(l),u.appendChild(h),h.appendChild(d),h.appendChild(p),h.appendChild(f)},e.createMobileBannerAd=function(e){var t=this,n=P[this.currentIdx],i=n.url,a=n.buttonName,r=n.title,s=n.description,o=document.createElement("div");o.id="mock-banner-ads",o.style.width="100%",o.style.height=e+"px",o.style.bottom="var(--sab)",o.style.display="block",o.style.position="absolute",o.style.opacity=this.currentOpacity;var c=document.createElement("div");c.id="mock-banner-ads-display-area",c.style.background="#ffffff center center/auto no-repeat",c.style.display="block",c.style.alignContent="center";var u=document.createElement("div");u.id="mock-banner-ads-content",u.style.boxSizing="border-box",u.style.flexDirection="row",u.style.display="flex",u.style.position="relative",u.style.alignItems="stretch",u.style.justifyContent="space-between";var l=document.createElement("div");l.id="mock-banner-ads-avatar",l.style.width=e+"px",l.style.minWidth=e+"px",l.style.height=e+"px",l.style.display="flex",l.style.flexDirection="column",l.style.position="relative",l.style.background="url("+i+") center center/contain no-repeat";var h=document.createElement("div");h.id="mock-banner-ads-right-content",h.style.width="100%",h.style.paddingLeft="10px",h.style.display="flex",h.style.flexDirection="row",h.style.position="relative",h.style.color="#000",h.style.wordWrap="break-word",h.style.textAlign="left",h.style.alignContent="center",h.style.alignItems="center",h.style.fontSize="12px",h.style.fontFamily="Helvetica, Arial, sans-serif, Roboto, Helvetica, Arial, sans-serif",l.style.boxSizing="border-box";var d=document.createElement("div");d.style.flexDirection="column",d.style.display="flex",d.style.justifyContent="center",d.style.flexShrink="1",d.style.flexGrow="1",d.style.flexBasis="0",d.style.boxSizing="border-box",d.style.minWidth="0",d.innerHTML="\n            <div id='banner-content-text1' style=\"font-weight:600;line-height: 1.3333;font-size: .9375rem;text-overflow: ellipsis;-webkit-line-clamp: 1;overflow: hidden;display: -webkit-box;-webkit-box-orient: vertical;\">"+r+"</div>\n            <div id='banner-content-text2' style=\"font-weight:400;line-height: 1.2308;font-size: .8125rem;text-overflow: ellipsis;-webkit-line-clamp: 1;overflow: hidden;display: -webkit-box;-webkit-box-orient: vertical;\">"+s+"</div>";var p=document.createElement("button");p.id="banner-content-button",p.type="button",p.style.height="100%",p.style.fontWeight="600",p.style.backgroundColor="#3963fc",p.style.border="none",p.style.color="white",p.style.textAlign="center",p.style.display="inline-block",p.style.cursor="pointer",p.style.marginLeft="10px",p.style.flexShrink="1",p.style.boxSizing="border-box",p.style.paddingRight="7px",p.style.paddingLeft="7px",p.innerHTML=a,p.onclick=function(){"0.2"===t.currentOpacity?o.style.opacity="1":o.style.opacity="0.2",t.currentOpacity=o.style.opacity},document.body.appendChild(o),o.appendChild(c),c.appendChild(u),u.appendChild(l),u.appendChild(h),h.appendChild(d),h.appendChild(p)},e.hideBannerAdAsync=function(){var e=(0,s.Z)(h().mark((function e(){var t;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=document.getElementById("mock-banner-ads")){e.next=3;break}return e.abrupt("return");case 3:t.remove();case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),e}();k.currentIdx=-1,k.currentOpacity="1";var M={LOADED:"loaded",DISPLAYED:"displayed",BANNER_AD_VISIBLE_CHANGE:"banner_ad_visible_change"},D=function(e){return e.IDLE="idle",e.LOADING="loading",e.FILLED="filled",e.SHOWING="showing",e}(D||{}),N=D,L=function(e){return e.REWARDED="rewarded",e.PRE_ROLL="pre-roll",e.INTERSTITIAL="interstitial",e.BANNER="banner",e}(L||{}),B=L,G=n(195),U=function(e){function t(t,n){var i;return(i=e.call(this,n)||this).code=void 0,i.code=t,i.message=n,i}return(0,o.Z)(t,e),t}((0,G.Z)(Error)),F=function(e){this.type=void 0,this.status=void 0,this.type=e,this.status=N.IDLE},Z=n(192);function H(e,t){var n="undefined"!==typeof I()&&C()(e)||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){var n;if(!e)return;if("string"===typeof e)return Y(e,t);var i=A()(n=Object.prototype.toString.call(e)).call(n,8,-1);"Object"===i&&e.constructor&&(i=e.constructor.name);if("Map"===i||"Set"===i)return T()(e);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return Y(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var i=0;return function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Y(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}GameCore.Ads={Types:B,Status:N,Events:M,AdError:U,AdInstance:F};var z=function(e){function t(){for(var t,n,i=arguments.length,a=new Array(i),r=0;r<i;r++)a[r]=arguments[r];return(n=e.call.apply(e,O()(t=[this]).call(t,a))||this).events=void 0,n.enabled=void 0,n.config=void 0,n.lastInterAdShownTime=void 0,n.lastInterAdLoadedTime=void 0,n.lastRewardAdShownTime=void 0,n.interstitial=void 0,n.rewardedVideo=void 0,n.preRoll=void 0,n.fallbackInterstitial=void 0,n.fallbackRewardedVideo=void 0,n.fallbackPreRoll=void 0,n.safeAreaBottom=void 0,n.showingBannerAd=void 0,n.reloadBannerAdIntervals=void 0,n.bannerAdConfigs=void 0,n.isHaveBannerAdOptions=void 0,n.isProcessingResize=void 0,n.isFallbackReady=void 0,n.isFallbackInitialized=void 0,n.isBannerAdsShown=void 0,n.handleWorldResize=(0,Z.D)((0,s.Z)(h().mark((function e(){var t;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.enabled){e.next=2;break}return e.abrupt("return");case 2:if(!n.isProcessingResize){e.next=4;break}return e.abrupt("return");case 4:if(n.isProcessingResize=!0,0!==(t=n.getEnabledBannerAds()).length){e.next=11;break}return e.next=9,n.hideBannerAdAsync();case 9:return n.isProcessingResize=!1,e.abrupt("return");case 11:return e.prev=11,e.next=14,n.hideBannerAdAsync();case 14:return e.next=16,n.loadBannerAdAsync("",t);case 16:e.next=20;break;case 18:e.prev=18,e.t0=e.catch(11);case 20:return e.prev=20,n.isProcessingResize=!1,e.finish(20);case 23:case"end":return e.stop()}}),e,null,[[11,18,20,23]])}))),200),n}(0,o.Z)(t,e);var i=t.prototype;return i.init=function(){this.events=new Phaser.Events.EventEmitter,this.safeAreaBottom=0,this.lastInterAdShownTime=0,this.lastInterAdLoadedTime=0,this.lastRewardAdShownTime=0,this.showingBannerAd={},this.reloadBannerAdIntervals={},this.bannerAdConfigs=[],this.isHaveBannerAdOptions=!0,this.isProcessingResize=!1,this.isFallbackReady=!1,this.isFallbackInitialized=!1,this.isBannerAdsShown=!1},i.calculateSafeAreaBottom=function(){try{if(!this.config.calculateSafeAreaBottom)return;this.safeAreaBottom=parseInt(getComputedStyle(document.documentElement).getPropertyValue("--sab")),isNaN(this.safeAreaBottom)&&(this.safeAreaBottom=0)}catch(e){this.safeAreaBottom=0}},i.configure=function(e,t){this.enabled=t.enabled,this.config=t,this.setAdInstance(e),this.setBannerAdConfigStatus(),this.calculateSafeAreaBottom()},i.setBannerAdConfigStatus=function(){for(var e,t=this.config.bannerAdOptions,n=GameCore.Utils.Device.isDesktop(),i=H(t);!(e=i()).done;){var a=e.value,r=a.platform,s="ALL"==r||"DESKTOP"==r&&n||"MOBILE"==r&&!n;this.bannerAdConfigs.push({config:a,canShow:s}),s&&(this.isHaveBannerAdOptions=!0)}},i.setAdInstance=function(e){var t=this.config,n=t.rewardAdOptions,i=t.interstitialAdOptions;this.interstitial=new e(B.INTERSTITIAL,i.pID),this.rewardedVideo=new e(B.REWARDED,n.pID),this.preRoll=new e(B.PRE_ROLL,i.pID)},i.setFallbackAdInstance=function(e){var t=this.config,n=t.rewardAdOptions,i=t.interstitialAdOptions;this.fallbackInterstitial=new e(B.INTERSTITIAL,i.pID),this.fallbackRewardedVideo=new e(B.REWARDED,n.pID),this.fallbackPreRoll=new e(B.PRE_ROLL,i.pID)},i.preloadInterstitialAdAsync=function(){var e=(0,s.Z)(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.preloadAdAsync(B.INTERSTITIAL);case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),i.showInterstitialAdAsync=function(){var e=(0,s.Z)(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.canbeShowInterstitialAdByTime()){e.next=2;break}throw new U("INTERSTITIAL_AD_CAN_NOT_SHOW","Can't show interstitial ad");case 2:return e.next=4,this.showAdAsync(B.INTERSTITIAL);case 4:this.lastInterAdShownTime=window.performance.now()/1e3;case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),i.preloadPreRollAdAsync=function(){var e=(0,s.Z)(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.preloadAdAsync(B.PRE_ROLL);case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),i.showPreRollAdAsync=function(){var e=(0,s.Z)(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.showAdAsync(B.PRE_ROLL);case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),i.preloadRewardedVideoAsync=function(){var e=(0,s.Z)(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.preloadAdAsync(B.REWARDED);case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),i.showRewardedVideoAsync=function(){var e=(0,s.Z)(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.canbeShowRewardAd()){e.next=2;break}throw new U("REWARDED_VIDEO_CAN_NOT_SHOW","Can't show rewarded video");case 2:return e.next=4,this.showAdAsync(B.REWARDED);case 4:this.lastRewardAdShownTime=window.performance.now()/1e3;case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),i.getRemainingRewardTime=function(){var e=window.performance.now()/1e3,t=this.config.rewardAdOptions.secondsBetweenAds,n=e-this.lastRewardAdShownTime;return n<t?t-n:0},i.preloadAdAsync=function(){var e=(0,s.Z)(h().mark((function e(t){var n,i;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.enabled){e.next=2;break}throw new U("ADS_NOT_ENABLED","Ads is't enabled");case 2:return e.next=4,this.preloadMainAdService(t);case 4:if(!0!==(n=e.sent)){e.next=7;break}return e.abrupt("return");case 7:if(this.isFallbackReady){e.next=9;break}throw n;case 9:return e.next=11,this.preloadFallbackAdService(t);case 11:if(!0!==(i=e.sent)){e.next=14;break}return e.abrupt("return");case 14:throw i;case 15:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),i.preloadMainAdService=function(e){var t=this;return new(u())((function(n){var i=!1;t.preloadAdInstanceAsync(e,!1).then((function(){i=!0})).catch((function(e){t.isFallbackReady||t.initFallbackAdsService().catch((function(){t.isFallbackReady=!1})),i=e})).finally((function(){n(i)}))}))},i.preloadFallbackAdService=function(e){var t=this;return new(u())((function(n){var i=!1;t.isFallbackReady||n(new U("FALLBACK_NOT_READY","Fallback ads not ready")),t.preloadAdInstanceAsync(e,!0).then((function(){i=!0})).catch((function(e){i=e})).finally((function(){n(i)}))}))},i.preloadAdInstanceAsync=function(){var e=(0,s.Z)(h().mark((function e(t,n){var i,a=this;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===n&&(n=!1),null!==(i=this.getAdInstanceByType(t,n))){e.next=4;break}throw new U("AD_INSTANCE_NOT_INITIATED","The instance ads not yet initiated");case 4:if(i.getStatus()!==N.LOADING){e.next=8;break}return e.next=7,new(u())((function(e){a.events.once(M.LOADED,e)}));case 7:return e.abrupt("return");case 8:return t!==B.INTERSTITIAL&&t!==B.PRE_ROLL||(this.lastInterAdLoadedTime=window.performance.now()/1e3),e.next=11,i.loadAsync();case 11:this.events.emit(M.LOADED,t);case 12:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}(),i.showAdAsync=function(){var e=(0,s.Z)(h().mark((function e(t){var n,i;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.enabled){e.next=2;break}throw new U("ADS_NOT_ENABLED","Ads is't enabled");case 2:return e.next=4,this.showMainAdService(t);case 4:if(!0!==(n=e.sent)){e.next=7;break}return e.abrupt("return");case 7:if(!this.isUserCancelledAdError(n)&&this.isAdFallbackReadyToShow(t)){e.next=9;break}throw n;case 9:return e.next=11,this.showFallbackAdService(t);case 11:if(!0!==(i=e.sent)){e.next=14;break}return e.abrupt("return");case 14:throw i;case 15:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),i.showMainAdService=function(e){var t=this;return new(u())((function(n){var i=!1;t.showAdInstanceAsync(e,!1).then((function(){i=!0})).catch((function(e){i=e,t.isUserCancelledAdError(e)||t.isFallbackReady||t.initFallbackAdsService().catch((function(){t.isFallbackReady=!1}))})).finally((function(){n(i)}))}))},i.showFallbackAdService=function(e){var t=this;return new(u())((function(n){var i=!1;t.isFallbackReady||n(new U("FALLBACK_NOT_READY","Fallback ads not ready")),t.showAdInstanceAsync(e,!0).then((function(){i=!0})).catch((function(e){i=e})).finally((function(){n(i)}))}))},i.showAdInstanceAsync=function(){var e=(0,s.Z)(h().mark((function e(t,n){var i;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===n&&(n=!1),null!==(i=this.getAdInstanceByType(t,n))){e.next=4;break}throw new U("AD_INSTANCE_NOT_INITIATED","The instance ads not yet initiated");case 4:return t!==B.INTERSTITIAL&&t!==B.PRE_ROLL||(this.lastInterAdShownTime=window.performance.now()/1e3),t===B.REWARDED&&(this.lastRewardAdShownTime=window.performance.now()/1e3,this.config.enableRewardVideoResetInterstitial&&(this.lastInterAdShownTime=this.lastRewardAdShownTime)),e.next=8,i.showAsync();case 8:this.events.emit(M.DISPLAYED,t);case 9:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}(),i.getAdStatus=function(e){var t=this.getAdInstanceByType(e);return t?t.getStatus():null},i.getAdInstanceByType=function(e,t){if(void 0===t&&(t=!1),t)switch(e){case B.INTERSTITIAL:return this.fallbackInterstitial;case B.REWARDED:return this.fallbackRewardedVideo;case B.PRE_ROLL:return this.fallbackPreRoll;default:return null}switch(e){case B.INTERSTITIAL:return this.interstitial;case B.REWARDED:return this.rewardedVideo;case B.PRE_ROLL:return this.preRoll;default:return null}},i.canbeShowInterstitialAd=function(){var e=this.canbeLoadInterstitialAdByTime();return e&&(e=this.canbeShowInterstitialAdByTime()),e},i.canbeLoadInterstitialAdByTime=function(){var e=window.performance.now()/1e3,t=this.config.interstitialAdOptions,n=t.secondsFirstTime,i=t.secondsBetweenAds,a=Math.floor(e-this.lastInterAdLoadedTime);return this.lastInterAdLoadedTime>0?a>=i:a>=n},i.canbeShowInterstitialAdByTime=function(){var e=window.performance.now()/1e3,t=this.config.interstitialAdOptions,n=t.secondsFirstTime,i=t.secondsBetweenAds,a=Math.floor(e-this.lastInterAdShownTime);return this.lastInterAdShownTime>0?a>=i:a>=n},i.canbeShowRewardAd=function(){var e=window.performance.now()/1e3,t=this.config.rewardAdOptions,n=t.secondsFirstTime,i=t.secondsBetweenAds,a=Math.floor(e-this.lastRewardAdShownTime);return this.lastRewardAdShownTime>0?a>=i:a>=n},i.getEnabledBannerAds=function(){if(!this.isHaveBannerAdOptions)return[];for(var e,t=[],n=GameCore.Utils.Device.isDesktop(),i=H(this.bannerAdConfigs);!(e=i()).done;){var a=e.value,r=a.config;if(a.canShow){if("DESKTOP"==r.platform&&n){var s=r.bannerWidth;if(!GameCore.Configs.Game.DisableLandscape){this.game.world.isLandscape()&&t.push(r);continue}var o=GameCore.Configs.Game,c=o.PortraitWidth,u=o.PortraitHeight,l=document.getElementById("app");if(!l||!(l instanceof HTMLDivElement))continue;(l.clientWidth-c*(l.clientHeight/u))/2-50<s||t.push(r);continue}t.push(r)}}return t},i.disableBannerAds=function(){this.config.bannerAdOptions=[]},i.showBannerAdAsync=function(){var e=(0,s.Z)(h().mark((function e(){var t;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.enabled){e.next=2;break}return e.abrupt("return");case 2:if(!this.isBannerAdsShown){e.next=5;break}return e.next=5,this.hideBannerAdAsync();case 5:if(this.isDeviceHaveSpaceToShowBanner()){e.next=7;break}return e.abrupt("return");case 7:if(0!==(t=this.getEnabledBannerAds()).length){e.next=10;break}return e.abrupt("return");case 10:return this.reloadBannerAdIntervals=this.reloadBannerAdIntervals||{},this.loadBannerAdAsync("",t),e.abrupt("return");case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),i.loadBannerAdAsync=function(){var e=(0,s.Z)(h().mark((function e(t,n){var i,a,r=this;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.enabled){e.next=2;break}return e.abrupt("return");case 2:if(i=this.getSceneName(),a=GameCore.Configs.Ads,e.prev=4,"msgames"===a.AdService){e.next=7;break}throw new U("BANNER_ADS_NOT_SUPPORTED","Banner ads not supported");case 7:if(!a.Mockup.Enable){e.next=12;break}return e.next=10,k.loadBannerAdAsync();case 10:e.next=14;break;case 12:return e.next=14,GameSDK.loadBannerAdAsync(t,n);case 14:this.isBannerAdsShown=!0,n.forEach((function(e){var t=e.placementId,n=e.position,s=e.bannerWidth,o=e.bannerHeight;if(t&&""!==t){var c=n+":"+s+"x"+o;r.showingBannerAd[t]=!0,window.game.analytics.showBannerAd(c,i,a.AdService)}})),this.events.emit(M.BANNER_AD_VISIBLE_CHANGE,!0),e.next=26;break;case 19:throw e.prev=19,e.t0=e.catch(4),this.isBannerAdsShown=!1,n.forEach((function(e){var t=e.position,n=e.bannerWidth,r=e.bannerHeight,s=e.placementId;if(s&&""!==s){var o=t+":"+n+"x"+r,c={type:B.BANNER,placement:i,bannerPosition:o,adService:a.AdService};window.game.analytics.showAdFail(c)}})),this.events.emit(M.BANNER_AD_VISIBLE_CHANGE,!1),e.t0;case 26:case"end":return e.stop()}}),e,this,[[4,19]])})));return function(t,n){return e.apply(this,arguments)}}(),i.hideBannerAdAsync=function(){var e=(0,s.Z)(h().mark((function e(){var t,n=this;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.enabled){e.next=2;break}return e.abrupt("return");case 2:if(this.isHaveBannerAdOptions){e.next=4;break}return e.abrupt("return");case 4:if(this.isBannerAdsShown=!1,e.prev=5,"msgames"===(t=GameCore.Configs.Ads).AdService){e.next=9;break}throw new U("BANNER_ADS_NOT_SUPPORTED","Banner ads not supported");case 9:if(this.config.bannerAdOptions.forEach((function(e){var t=e.placementId,i=n.reloadBannerAdIntervals[t];i&&(clearInterval(i),n.reloadBannerAdIntervals[t]=null),n.showingBannerAd[t]=!1})),!t.Mockup.Enable){e.next=16;break}return e.next=14,k.hideBannerAdAsync();case 14:e.next=18;break;case 16:return e.next=18,GameSDK.hideBannerAdAsync();case 18:this.events.emit(M.BANNER_AD_VISIBLE_CHANGE,!1),e.next=24;break;case 21:e.prev=21,e.t0=e.catch(5);case 24:case"end":return e.stop()}}),e,this,[[5,21]])})));return function(){return e.apply(this,arguments)}}(),i.isDeviceHaveSpaceToShowBanner=function(){return!0},i.getSafeAreaBottom=function(){return this.cssPixelsToWorldPixels(this.safeAreaBottom)},i.cssPixelsToWorldPixels=function(e){if(this.game.world){var t=this.game.world,n=t.getZoomRatio(),i=t.getPixelRatio();return this.game.world.getPhysicPixels(e,i/n)}return e},i.getBannerHeight=function(){if(!this.enabled)return 0;if(!this.isDeviceHaveSpaceToShowBanner())return 0;if(!this.isBannerAdsShown)return 0;var e=this.getBottomBannerConfig();if(!e)return 0;var t=e.bannerHeight,n=(void 0===t?0:t)+this.safeAreaBottom+20;if(this.game.world){var i=this.game.world,a=i.getPixelRatio(),r=i.getZoomRatio();return this.game.world.getPhysicPixels(n,a/r)}return n},i.getBottomBannerConfig=function(){var e=this.getEnabledBannerAds();return 0===e.length?null:R()(e).call(e,(function(e){return"bottom"===e.position}))||null},i.getSceneName=function(){try{var e=self.game.globalScene;return this.globalSceneTypeCheck(e)?e.getCurrentScene().scene.getSceneName():"unknown"}catch(t){return"unknown"}},i.globalSceneTypeCheck=function(e){return"getCurrentScene"in e&&"function"===typeof e.getCurrentScene},i.initFallbackAdsService=function(){var e=(0,s.Z)(h().mark((function e(){var t,n;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=GameCore.Configs.Ads,!this.isFallbackInitialized){e.next=3;break}return e.abrupt("return");case 3:return this.isFallbackInitialized=!0,e.next=6,this.getFallbackAdServiceInstance();case 6:n=e.sent,"none"!==t.FallbackService&&null!==n&&(this.isFallbackReady=!0,this.setFallbackAdInstance(n));case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),i.getFallbackAdServiceInstance=function(){var e=(0,s.Z)(h().mark((function e(){var t,i,a;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=GameCore.Configs.Ads.FallbackService,e.next=3,Promise.resolve().then(n.bind(n,600));case 3:if(i=e.sent.default,"google"!==t){e.next=16;break}return e.prev=5,e.next=8,this.initGoogleAdInstanceAsync();case 8:if(null===(a=e.sent)){e.next=11;break}return e.abrupt("return",a);case 11:e.next=16;break;case 13:e.prev=13,e.t0=e.catch(5);case 16:return e.abrupt("return",i);case 17:case"end":return e.stop()}}),e,this,[[5,13]])})));return function(){return e.apply(this,arguments)}}(),i.initGoogleAdInstanceAsync=function(){var e=(0,s.Z)(h().mark((function e(){var t,i,a,r,s,o,c,u;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=GameCore.Configs.Ads.AdServiceConfigs.Google){e.next=3;break}return e.abrupt("return",null);case 3:return i=t.DataAdChannel,a=t.DataAdClient,r=t.DataAdHost,s=t.DataAdBreakTest,o=t.DataAdFrequencyHint,e.next=6,Promise.resolve().then(n.bind(n,601));case 6:if("loaded"!==(c=e.sent.default).initStatus){e.next=9;break}return e.abrupt("return",c);case 9:return u={dataAdClient:a,dataAdChannel:i,dataAdHost:r,dataAdBreakTest:s,dataAdFrequencyHint:o},e.prev=10,c.setGame(this.game),e.next=14,c.initGoogleAdsAsync(u);case 14:return e.abrupt("return",c);case 17:return e.prev=17,e.t0=e.catch(10),e.abrupt("return",null);case 21:case"end":return e.stop()}}),e,this,[[10,17]])})));return function(){return e.apply(this,arguments)}}(),i.isUserCancelledAdError=function(e){return e instanceof U&&"USER_INPUT"===e.code},i.isAdFallbackReadyToShow=function(e){if(!this.isFallbackReady)return!1;var t=this.getAdInstanceByType(e,!0);return!!t&&t.getStatus()===N.FILLED},t}(Phaser.Plugins.BasePlugin),V=z,W=function(){function e(e,t,n){this.name=void 0,this.color=void 0,this.selfLog=void 0,this.options=void 0,this.name=e,this.color=n||"#FFF",this.options=t,this.selfLog=!0}var t=e.prototype;return t.event=function(e,t,n){this.processEvent(e,t,n),this.selfLog},t.pageview=function(e){var t=this.getPageByKey(e);this.processPageView(t),this.selfLog},t.levelStart=function(e,t,n){this.processLevelStart(e,t,n),this.selfLog},t.levelFail=function(e,t,n){this.processLevelFail(e,t,n),this.selfLog},t.levelRescue=function(e,t,n){this.processLevelRescue(e,t,n),this.selfLog},t.levelComplete=function(e,t,n){this.processLevelComplete(e,t,n),this.selfLog},t.loadPreRollAd=function(e,t){this.processLoadPreRollAd(e,t),this.selfLog},t.showPreRollAd=function(e,t){this.processShowPreRollAd(e,t),this.selfLog},t.loadInterstitialAd=function(e,t){this.processLoadInterstitialAd(e,t),this.selfLog},t.showInterstitialAd=function(e,t){this.processShowInterstitialAd(e,t),this.selfLog},t.loadRewardedVideoAd=function(e,t){this.processLoadRewardedVideoAd(e,t),this.selfLog},t.showRewardedVideoAd=function(e,t){this.processShowRewardedVideoAd(e,t),this.selfLog},t.showBannerAd=function(e,t,n){this.processShowBannerAd(e,t,n),this.selfLog},t.receiveReward=function(e){this.processReceiveReward(e),this.selfLog},t.loadAdFail=function(e){this.processLoadAdFail(e),this.selfLog},t.showAdFail=function(e){this.processShowAdFail(e),this.selfLog},t.finishDailyTask=function(e,t){this.processFinishDailyTask(e,t),this.selfLog},t.getPageByKey=function(e){var t=e.replace(/_/g,"-");return t=t.toLowerCase()},t.processLevelStart=function(e,t,n){},t.processLevelFail=function(e,t,n){},t.processLevelRescue=function(e,t,n){},t.processLevelComplete=function(e,t,n){},t.processLoadInterstitialAd=function(e,t){},t.processShowInterstitialAd=function(e,t){},t.processLoadPreRollAd=function(e,t){},t.processShowPreRollAd=function(e,t){},t.processLoadRewardedVideoAd=function(e,t){},t.processShowRewardedVideoAd=function(e,t){},t.processShowBannerAd=function(e,t,n){},t.processReceiveReward=function(e){},t.processLoadAdFail=function(e){},t.processShowAdFail=function(e){},t.processFinishDailyTask=function(e,t){},e}();GameCore.Analytics={BaseAnalytics:W};var K=function(e){function t(){for(var t,n,i=arguments.length,a=new Array(i),r=0;r<i;r++)a[r]=arguments[r];return(n=e.call.apply(e,O()(t=[this]).call(t,a))||this).analytics=void 0,n.pageview=function(e){n.isActive()&&n.analytics.forEach((function(t){t.pageview(e)}))},n}(0,o.Z)(t,e);var n=t.prototype;return n.init=function(){this.analytics=[]},n.add=function(e){this.analytics.push(e)},n.event=function(e,t,n){this.isActive()&&this.analytics.forEach((function(i){i.event(e,t,n)}))},n.levelStart=function(e,t,n){this.isActive()&&this.analytics.forEach((function(i){i.levelStart(e,t,n)}))},n.levelRescue=function(e,t,n){this.isActive()&&this.analytics.forEach((function(i){i.levelRescue(e,t,n)}))},n.levelFail=function(e,t,n){this.isActive()&&this.analytics.forEach((function(i){i.levelFail(e,t,n)}))},n.levelComplete=function(e,t,n){this.isActive()&&this.analytics.forEach((function(i){i.levelComplete(e,t,n)}))},n.loadPreRollAd=function(e,t){this.isActive()&&this.analytics.forEach((function(n){n.loadPreRollAd(e,t)}))},n.showPreRollAd=function(e,t){this.isActive()&&this.analytics.forEach((function(n){n.showPreRollAd(e,t)}))},n.loadInterstitialAd=function(e,t){this.isActive()&&this.analytics.forEach((function(n){n.loadInterstitialAd(e,t)}))},n.showInterstitialAd=function(e,t){this.isActive()&&this.analytics.forEach((function(n){n.showInterstitialAd(e,t)}))},n.loadRewardedVideoAd=function(e,t){this.isActive()&&this.analytics.forEach((function(n){n.loadRewardedVideoAd(e,t)}))},n.showRewardedVideoAd=function(e,t){this.isActive()&&this.analytics.forEach((function(n){n.showRewardedVideoAd(e,t)}))},n.showBannerAd=function(e,t,n){this.isActive()&&this.analytics.forEach((function(i){i.showBannerAd(e,t,n)}))},n.receiveReward=function(e){this.isActive()&&this.analytics.forEach((function(t){t.receiveReward(e)}))},n.loadAdFail=function(e){this.isActive()&&this.analytics.forEach((function(t){t.loadAdFail(e)}))},n.showAdFail=function(e){this.isActive()&&this.analytics.forEach((function(t){t.showAdFail(e)}))},n.finishDailyTask=function(e,t){this.isActive()&&this.analytics.forEach((function(n){n.finishDailyTask(e,t)}))},n.isActive=function(){return this.analytics.length>=1},t}(Phaser.Plugins.BasePlugin),j=K,X=n(588),q=n.n(X),J=n(97),Q=n.n(J),$=function(){function e(e){var t=this;this.game=void 0,this.audios=void 0,this.volume=void 0,this.soundKeys=void 0,this.isMusicEnabled=function(){return!!t.game.player.getPlayerSetting("music")},this.isSoundEnabled=function(){return!!t.game.player.getPlayerSetting("sound")},this.game=e,this.audios=new(q()),this.soundKeys=new(q())}var t=e.prototype;return t.addSoundKeys=function(e){var t=this;Q()(e).forEach((function(n){var i=e[n];"string"===typeof i&&t.soundKeys.set(n,i)}))},t.clearSoundKeys=function(){this.soundKeys.clear()},t.play=function(e,t){var n=this,i=(0,r.Z)({volume:this.volume},t||{});i.volume!==this.volume&&(i.volume*=this.volume);var a=this.audios.get(e);if(!a&&this.game.cache.audio.exists(e)){var s=this.game.sound.add(e);this.audios.set(e,s),a=s}if(a)a.play(void 0,i);else{var o=this.soundKeys.get(e);if(o)try{this.game.globalScene.load.audio(e,o),this.game.globalScene.load.on(Phaser.Loader.Events.FILE_KEY_COMPLETE+"audio-"+e,(function(){var t=n.game.sound.add(e);n.audios.set(e,t),t.play(void 0,i)})),this.game.globalScene.load.start()}catch(c){}}},t.pauseAll=function(){this.audios.forEach((function(e){e.pause()}))},t.resumeAll=function(){this.audios.forEach((function(e){e.resume()}))},t.stopAll=function(){this.audios.forEach((function(e){e.stop()}))},t.pause=function(e){var t=this.audios.get(e);t&&t.pause()},t.stop=function(e){var t=this.audios.get(e);t&&t.stop()},t.setVolume=function(e){this.volume=e},e}(),ee=$,te=function(){function e(e,t){var n=this;this.name=void 0,this.game=void 0,this.isSprite=void 0,this.audio=void 0,this.markers=void 0,this.volume=void 0,this.isMusicEnabled=function(){return!!n.game.player.getPlayerSetting("music")},this.isSoundEnabled=function(){return!!n.game.player.getPlayerSetting("sound")},this.name=t,this.game=e,this.markers={},this.isSprite=!1,this.isSprite||(this.audio=this.game.sound.add(this.name))}var t=e.prototype;return t.play=function(e,t){var n,i,a,s=(0,r.Z)({volume:this.volume},t||{});if(s.volume!==this.volume&&(s.volume*=this.volume),!this.isSprite)return(null==(i=this.audio)?void 0:i.seek)>0?void this.audio.resume():void(null==(a=this.audio)||a.play(e,s));this.createMaker(e),null==(n=this.markers[e])||n.play(e,s)},t.pause=function(e){var t,n;this.isSprite?null==(t=this.markers[e])||t.pause():null==(n=this.audio)||n.pause()},t.stop=function(e){var t,n;this.isSprite?null==(t=this.markers[e])||t.stop():null==(n=this.audio)||n.stop()},t.setVolume=function(e){this.volume=e},t.createMaker=function(e){if(!this.markers[e])try{this.markers[e]=this.game.sound.addAudioSprite(this.name)}catch(t){}},e}(),ne=te,ie=function(e){function t(){for(var t,n,i=arguments.length,a=new Array(i),r=0;r<i;r++)a[r]=arguments[r];return(n=e.call.apply(e,O()(t=[this]).call(t,a))||this).soundManager=void 0,n.musicManager=void 0,n.isMuteAll=void 0,n.initMusic=function(e){n.musicManager=new ne(n.game,e),n.setMusicVolume(1)},n.initSound=function(){n.soundManager=new ee(n.game),n.setSoundVolume(1)},n}(0,o.Z)(t,e);var n=t.prototype;return n.importSoundEffectKeys=function(e){this.soundManager.addSoundKeys(e)},n.playSound=function(e,t){try{if(!this.soundManager||this.isMuteAll||!this.game.visibility.isGameVisible())return;if(!this.soundManager.isSoundEnabled())return;this.soundManager.play(e,t)}catch(n){}},n.stopSound=function(e){try{this.soundManager.stop(e)}catch(t){}},n.playMusic=function(e){void 0===e&&(e={});try{if(!this.musicManager||this.isMuteAll||!this.game.visibility.isGameVisible())return;if(!this.musicManager.isMusicEnabled())return;this.musicManager.play("",(0,r.Z)({loop:!0,volume:.2},e))}catch(t){}},n.pauseMusic=function(){try{if(!this.musicManager)return;this.musicManager.pause("")}catch(e){}},n.stopMusic=function(){try{if(!this.musicManager)return;this.musicManager.stop("")}catch(e){}},n.pauseAllSounds=function(){try{if(!this.soundManager)return;this.soundManager.pauseAll()}catch(e){}},n.resumeAllSounds=function(){try{if(!this.soundManager)return;this.soundManager.resumeAll()}catch(e){}},n.setSoundVolume=function(e){try{if(!this.soundManager)return;this.soundManager.setVolume(e)}catch(t){}},n.setMusicVolume=function(e){try{if(!this.musicManager)return;this.musicManager.setVolume(e)}catch(t){}},n.muteAll=function(){this.isMuteAll=!0,this.game.sound.mute=!0},n.unmuteAll=function(){this.isMuteAll=!1,this.game.sound.mute=!1},t}(Phaser.Plugins.BasePlugin),ae=ie,re=n(96),se="AUTH_TOKEN_REQUEST",oe="AUTH_TOKEN_RECEIVED",ce=function(e){function t(t,n){var i;return(i=e.call(this,t)||this).payload=void 0,i.name="RequestTokenFail",i.message=t||"Request token fail",i.payload=n||{},i}return(0,o.Z)(t,e),t}((0,G.Z)(Error)),ue=n(605),le="auth",he=(0,ue.P1)([function(e){return e[le].token}],(function(e){return e})),de=(0,ue.P1)([function(e){return e[le].isRequesting}],(function(e){return e})),pe=function(e){return{type:oe,payload:{token:e}}},fe=function(e){function t(){return e.apply(this,arguments)||this}(0,o.Z)(t,e);var n=t.prototype;return n.requestToken=function(){var e=(0,s.Z)(h().mark((function e(){var t;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.game.stateStorage,e.next=3,t.dispatch(function(){var e=(0,s.Z)(h().mark((function e(t,n){var a,r,s,o;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,a=window.game.facebook,r=n(),s=he(r),!de(r)&&""===s){e.next=7;break}return e.abrupt("return");case 7:return t({type:se,payload:{}}),e.next=10,a.getPlayerToken();case 10:o=e.sent,t(pe(o)),e.next=25;break;case 14:if(e.prev=14,e.t0=e.catch(0),!(e.t0 instanceof Object&&GameCore.Utils.Object.hasOwn(e.t0,"code"))){e.next=19;break}if("PENDING_REQUEST"!==e.t0.code){e.next=19;break}return e.abrupt("return");case 19:if(t(pe("")),!(e.t0 instanceof Object&&GameCore.Utils.Object.hasOwn(e.t0,"message"))){e.next=24;break}if("string"!==typeof e.t0.message){e.next=24;break}return(0,i.tO)(new Error(e.t0.message)),e.abrupt("return");case 24:(0,i.tO)(new ce);case 25:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(t,n){return e.apply(this,arguments)}}());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.getToken=function(){return he(this.state)},(0,re.Z)(t,[{key:"state",get:function(){return this.game.stateStorage.getState()}}]),t}(Phaser.Plugins.BasePlugin),me=fe,ge=function(e,t){void 0===t&&(t=1);var n=new Image;n.onload=function(){var e,n;e=this.width*t,n=this.height*t,Math.floor(n/2),Math.floor(e/2)},n.src=e},ve=function(e){function t(){for(var t,n,i=arguments.length,a=new Array(i),r=0;r<i;r++)a[r]=arguments[r];return(n=e.call.apply(e,O()(t=[this]).call(t,a))||this).width=void 0,n.height=void 0,n.renderOptions=void 0,n.canvas=void 0,n}(0,o.Z)(t,e);var n=t.prototype;return n.preload=function(e){var t=this,n=Q()(e);n.length<1||(n.forEach((function(n){t.scene.load.image(n,e[n])})),this.scene.load.start())},n.capture=function(){var e=(0,s.Z)(h().mark((function e(t){var n,i,a;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.width,i=t.height,a=t.renderOptions,this.width=n,this.height=i,this.renderOptions=a,this.createCanvas(),e.prev=5,e.next=8,this.loadImages();case 8:e.next=13;break;case 10:e.prev=10,e.t0=e.catch(5);case 13:return this.drawObjects(),e.abrupt("return",this.snapshotFrame());case 15:case"end":return e.stop()}}),e,this,[[5,10]])})));return function(t){return e.apply(this,arguments)}}(),n.createCanvas=function(){this.canvas||(this.canvas=this.game.textures.createCanvas("FrameCaptureCanvas")),this.canvas.clear(),this.canvas.setSize(this.width,this.height)},n.loadImages=function(){var e=[];for(var t in this.renderOptions){var n=this.renderOptions[t],i=n.name,a=n.image,r=n.fallbackWithImage;if(a)if(this.scene.textures.get(i).key!==i&&""!==i){var s=this.loadImage(i,a,r);e.push(s)}}return this.scene.load.start(),u().all(e)},n.loadImage=function(e,t,n){var i=this;return this.scene.load.image(e,t),new(u())((function(t,a){var r=Phaser.Loader.Events.FILE_KEY_COMPLETE+"image-"+e,s=Phaser.Loader.Events.FILE_LOAD_ERROR,o=function e(n){i.scene.load.off(r,e),i.scene.load.off(s,c),t()},c=function c(u){if(u.key===e)if(i.scene.load.off(r,o),i.scene.load.off(s,c),n)t();else{var l=new Error("Load image failed");a(l)}};i.scene.load.on(r,o),i.scene.load.on(s,c)}))},n.drawObjects=function(){for(var e in this.renderOptions){var t=this.renderOptions[e];switch(t.type){case"text":this.drawText(t);break;case"image":this.drawImage(t)}}},n.drawText=function(e){var t=this.canvas.context,n=e.x,i=e.y,a=e.font,r=e.text,s=e.fillStyle,o=e.lineWidth,c=e.textAlign;t.font=a+' nunito,-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Oxygen,Ubuntu,Cantarell,"Fira Sans","Droid Sans","Helvetica Neue",sans-serif',t.fillStyle=s||"#ffffff",o&&(t.lineWidth=o),c&&(t.textAlign=c),t.fillText(r,n,i)},n.drawImage=function(e){var t=this.canvas.context,n=e.x,i=e.y,a=e.name,r=e.frame,s=e.width,o=e.height,c=e.fallbackWithImage,u=this.scene.textures.get(a),l=u.getSourceImage(r);"__MISSING"===u.key&&c&&(l=(u=this.scene.textures.get(c)).getSourceImage()),t.drawImage(l,n,i,s,o)},n.snapshotFrame=function(){var e=this.canvas.getCanvas().toDataURL("image/jpeg",.85);return GameCore.Utils.Valid.isDebugger()&&ge(e),e},t}(Phaser.Plugins.ScenePlugin),ye=ve,Ee=n(53),Ae=n.n(Ee),Se=function(e){function t(t,n,i){var a;return(a=e.call(this)||this).game=void 0,a.options=void 0,a.performance=void 0,a.isRunning=!1,a.checkTimer=void 0,a.fpsHistory=void 0,a.start=function(){if(!a.isRunning){a.isRunning=!0;var e=a.options.checkInterval;a.checkTimer=e,a.fpsHistory=[],a.game.events.on(Phaser.Core.Events.POST_STEP,a.onPostStep)}},a.stop=function(){a.isRunning&&(a.isRunning=!1,a.game.events.off(Phaser.Core.Events.POST_STEP,a.onPostStep),a.options.onlyUpdateWhenSwitchScene&&a.checkFps())},a.onPostStep=function(e,t){if(a.checkTimer-=t,!(a.checkTimer>0)){var n=a.options,i=n.checkInterval,r=n.onlyUpdateWhenSwitchScene;a.checkTimer+=i,a.fpsHistory.push(a.game.loop.actualFps),!1===r&&a.fpsHistory.length>=5&&a.checkFps()}},a.game=t,a.options=i,a.performance=n,a}(0,o.Z)(t,e);var n=t.prototype;return n.checkFps=function(){if(0!==this.fpsHistory.length){var e=this.options.autoUpgradeQuality,t=!1;this.isLowFps()?t=this.performance.downgradeGraphicsQuality():e&&this.isHighFps()&&(t=this.performance.upgradeGraphicsQuality()),t&&(this.fpsHistory=[])}},n.getFpsMedian=function(){return Phaser.Math.Median(this.fpsHistory)},n.isLowFps=function(){return this.getFpsMedian()<this.options.fpsThreshold},n.isHighFps=function(){return this.getFpsMedian()>1.2*this.options.fpsThreshold},t}(Phaser.Events.EventEmitter),Te=Se,be=["pixelRatio","minQuality","maxQuality","qualityAdjustStep","trackingSceneKeys"],Ie=function(e){function t(){for(var t,n,i=arguments.length,a=new Array(i),r=0;r<i;r++)a[r]=arguments[r];return(n=e.call.apply(e,O()(t=[this]).call(t,a))||this).fpsTracker=void 0,n.pixelRatio=void 0,n.minQuality=void 0,n.maxQuality=void 0,n.qualityAdjustStep=void 0,n.trackingSceneKeys=[],n.trackingScene=function(e){var t;if(Ae()(t=n.trackingSceneKeys).call(t,e)){var i=n.game.scene.getScene(e);i.events.once(Phaser.Scenes.Events.UPDATE,n.fpsTracker.start),i.events.once(Phaser.Scenes.Events.SLEEP,n.fpsTracker.stop)}},n}(0,o.Z)(t,e);var n=t.prototype;return n.configure=function(e){var t=e.pixelRatio,n=e.minQuality,i=e.maxQuality,r=e.qualityAdjustStep,s=e.trackingSceneKeys,o=(0,a.Z)(e,be);this.pixelRatio=t,this.minQuality=n,this.maxQuality=i,this.qualityAdjustStep=r,this.trackingSceneKeys=s,this.fpsTracker=new Te(this.game,this,o)},n.active=function(){this.game.events.on(Phaser.Scenes.Events.WAKE,this.trackingScene),this.game.events.on(Phaser.Scenes.Events.START,this.trackingScene)},n.downgradeGraphicsQuality=function(){var e=this.pixelRatio;if(e<=this.minQuality)return!1;var t=+(e-this.qualityAdjustStep).toFixed(2);return!(t<this.minQuality)&&(this.pixelRatio=t,this.game.world.resize(this.pixelRatio),!0)},n.upgradeGraphicsQuality=function(){var e=this.pixelRatio;if(e>=this.maxQuality)return!1;var t=+(e+this.qualityAdjustStep).toFixed(2);return!(t>this.maxQuality)&&(this.pixelRatio=t,this.game.world.resize(this.pixelRatio),!0)},t}(Phaser.Plugins.BasePlugin),we=Ie,Ce={sound:!0,music:!0,vibrate:!0,language:"en",theme:GameCore.Configs.DefaultTheme},xe=n(124),Oe=n.n(xe),_e=n(125),Re=n.n(_e),Pe=Ce.sound,ke=Ce.music,Me=Ce.vibrate,De=Ce.language,Ne=Ce.theme,Le=function(){function e(e){this.sound=void 0,this.music=void 0,this.vibrate=void 0,this.language=void 0,this.theme=void 0;var t=e||{},n=t.sound,i=t.music,a=t.vibrate,r=t.language,s=t.theme;this.sound=GameCore.Utils.Valid.isBoolean(n)?n:Pe,this.music=GameCore.Utils.Valid.isBoolean(i)?i:ke,this.vibrate=GameCore.Utils.Valid.isBoolean(a)?a:Me,this.language=GameCore.Utils.Valid.isString(r)?r:De,this.theme=GameCore.Utils.Valid.isString(s)?s:Ne}return e.prototype.toObject=function(){return{sound:this.sound,music:this.music,vibrate:this.vibrate,language:this.language,theme:this.theme}},e}(),Be=Le,Ge=GameCore.Utils,Ue=Ge.Valid,Fe=Ge.Object,Ze=function(){function e(e){this.score=void 0,this.settings=void 0,this.gameData=void 0,this.userGuideDisplays=void 0,this.setupDefaultData(),this.updateScore(e),this.updateSettings(e),this.updateGameData(e),this.updateUserGuideDisplays(e)}var t=e.prototype;return t.setupDefaultData=function(){this.score=0,this.settings=(0,r.Z)({},Ce),this.gameData={coins:0,diamond:0,lastReceiveGift:0,blitzHighScore:0,normalSaveData:{level:0,score:0,fen:"",updateAt:0},dailyRewarded:{lastRewarded:0,logDays:[]},dailyTasks:{startedTime:0,logTasks:{}}},this.userGuideDisplays=0},t.updateScore=function(e){var t=e.score;!1!==Ue.isNumber(t)&&(this.score=t)},t.updateSettings=function(e){var t=e.settings;if(!1!==Ue.isObject(t)){var n=new Be(t).toObject();this.settings=n}},t.updateGameData=function(e){var t=e.gameData;if(!1!==Ue.isObject(t)){if(Fe.hasOwn(t,"coins")&&Ue.isNumber(t.coins)&&(this.gameData.coins=t.coins),Fe.hasOwn(t,"diamond")&&Ue.isNumber(t.diamond)&&(this.gameData.diamond=t.diamond),Fe.hasOwn(t,"blitzHighScore")&&Ue.isNumber(t.blitzHighScore)&&(this.gameData.blitzHighScore=t.blitzHighScore),Fe.hasOwn(t,"lastReceiveGift")&&Ue.isNumber(t.lastReceiveGift)&&(this.gameData.lastReceiveGift=t.lastReceiveGift),Fe.hasOwn(t,"dailyRewarded")&&Ue.isObject(t.dailyRewarded)){var n=t.dailyRewarded;Fe.hasOwn(n,"lastRewarded")&&Ue.isNumber(n.lastRewarded)&&(this.gameData.dailyRewarded.lastRewarded=n.lastRewarded),Fe.hasOwn(n,"logDays")&&Array.isArray(n.logDays)&&(this.gameData.dailyRewarded.logDays=n.logDays)}if(Fe.hasOwn(t,"dailyTasks")&&Ue.isObject(t.dailyTasks)){var i=t.dailyTasks;Fe.hasOwn(i,"startedTime")&&Ue.isNumber(i.startedTime)&&(this.gameData.dailyTasks.startedTime=i.startedTime),Fe.hasOwn(i,"logTasks")&&Ue.isObject(i.logTasks)&&(this.gameData.dailyTasks.logTasks=i.logTasks)}if(Fe.hasOwn(t,"normalSaveData")&&Ue.isObject(t.normalSaveData)){var a=t.normalSaveData;Fe.hasOwn(a,"level")&&Ue.isNumber(a.level)&&(this.gameData.normalSaveData.level=a.level),Fe.hasOwn(a,"score")&&Ue.isNumber(a.score)&&(this.gameData.normalSaveData.score=a.score),Fe.hasOwn(a,"fen")&&Ue.isString(a.fen)&&(this.gameData.normalSaveData.fen=a.fen),Fe.hasOwn(a,"updateAt")&&Ue.isNumber(a.updateAt)&&(this.gameData.normalSaveData.updateAt=a.updateAt)}}},t.updateUserGuideDisplays=function(e){var t=e.userGuideDisplays;!1!==Ue.isNumber(t)&&(this.userGuideDisplays=t)},t.toObject=function(){return{score:this.score,settings:this.settings,gameData:this.gameData,userGuideDisplays:this.userGuideDisplays}},t.convertToPlayerData=function(){var e=this.gameData,t=e.coins,n=e.diamond,i=e.dailyTasks,a=e.dailyRewarded,r=e.lastReceiveGift,s=e.blitzHighScore,o=e.normalSaveData;return{score:this.score,settings:this.settings,customFields:{coins:t,diamond:n,blitzHighScore:s,normalSaveData:o,dailyTasks:i,dailyRewarded:a,lastReceiveGift:r},userGuideDisplays:this.userGuideDisplays}},t.convertToFacebookData=function(e){var t=e.score,n=e.settings,i=e.customFields,a=e.userGuideDisplays;return this.updateScore({score:t}),this.updateSettings({settings:n}),this.updateGameData({gameData:i}),this.updateUserGuideDisplays({userGuideDisplays:a}),this.toObject()},e}(),He=n(606),Ye=GameCore.Configs.ApiHost,ze=function(){var e=(0,s.Z)(h().mark((function e(t){var n;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,He.v)("players?platform=ms-games",t,{},Ye,10);case 2:return n=e.sent,e.abrupt("return",(null==n?void 0:n.data)||{});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ve=function(){var e=(0,s.Z)(h().mark((function e(t){var n;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,He.v)("players/"+t+"/user-guide-displays/inc",{},{},Ye);case 2:return n=e.sent,e.abrupt("return",(null==n?void 0:n.data)||{});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),We="PLAYER_RECEIVED",Ke="PLAYER_DATA_UPDATE",je="PLAYER_SCORE_UPDATE",Xe="PLAYER_PROFILE_UPDATE",qe="PLAYER_SETTING_UPDATE",Je="PLAYER_CONNECTED_PLAYERS_UPDATE",Qe=n(426),$e=function(e){function t(t,n){var i;return(i=e.call(this,t)||this).payload=void 0,i.name="PlayerDataNameNotSupport",i.message=t||"The name of player data is not supported",i.payload=n||{},i}return(0,o.Z)(t,e),t}((0,G.Z)(Error)),et="player",tt=(0,ue.P1)([function(e){return e[et]}],(function(e){return e})),nt=(0,ue.P1)([tt],(function(e){return e.playerId})),it=(0,ue.P1)([tt],(function(e){return e.ASID})),at=(0,ue.P1)([function(e){return e[et].data}],(function(e){return e})),rt=((0,ue.P1)([at],(function(e){return e.settings})),(0,ue.P1)([function(e){return e[et].connectedPlayers}],(function(e){return e}))),st=(0,ue.P1)([rt,function(e,t){return t.limit},function(e,t){return t.offset}],(function(e,t,n){if("number"!==typeof t)return[];if("number"!==typeof n)return[];var i=Q()(e);return A()(i).call(i,n,t+n)||[]})),ot=(0,ue.P1)([at],(function(e){return e.score})),ct=(0,ue.P1)([at],(function(e){return GameCore.Utils.Json.clone(e.customFields)})),ut=GameCore.Configs,lt=ut.AppId,ht=ut.Tutorial,dt=function(e,t){return function(n){var i=e.playerId,a=e.name,r=e.photo,s=e.locale;n({type:We,payload:{playerId:i,name:a,photo:r,locale:s,data:t||{}}})}},pt=function(e){return{type:Je,payload:{connectedPlayers:e}}},ft=function(e,t){return function(){var n=(0,s.Z)(h().mark((function n(a,r){var s,o,c;return h().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,a({type:qe,payload:{name:e,value:t}});case 3:s=r(),o=at(s),c=new Ze({}).convertToFacebookData(o),FBInstant.player.setDataAsync(c),n.next=12;break;case 9:n.prev=9,n.t0=n.catch(0),(0,i.tO)(n.t0);case 12:case"end":return n.stop()}}),n,null,[[0,9]])})));return function(e,t){return n.apply(this,arguments)}}()},mt=function(e,t){return function(){var n=(0,s.Z)(h().mark((function n(a,r){var s,o,c,u,l;return h().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,o={customFields:(s={},s[e]=t,s)},n.next=4,a(vt(o));case 4:c=r(),u=at(c),l=new Ze({}).convertToFacebookData(u),FBInstant.player.setDataAsync(l),n.next=15;break;case 10:if(n.prev=10,n.t0=n.catch(0),!(n.t0 instanceof $e)){n.next=14;break}return n.abrupt("return");case 14:(0,i.tO)(n.t0);case 15:case"end":return n.stop()}}),n,null,[[0,10]])})));return function(e,t){return n.apply(this,arguments)}}()},gt=function(e){return function(){var t=(0,s.Z)(h().mark((function t(n,a){var r,s,o,c;return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,r={customFields:e},t.next=4,n(vt(r));case 4:s=a(),o=at(s),c=new Ze({}).convertToFacebookData(o),FBInstant.player.setDataAsync(c),t.next=16;break;case 10:if(t.prev=10,t.t0=t.catch(0),!(t.t0 instanceof $e)){t.next=15;break}return t.abrupt("return");case 15:(0,i.tO)(t.t0);case 16:case"end":return t.stop()}}),t,null,[[0,10]])})));return function(e,n){return t.apply(this,arguments)}}()},vt=function(e){return{type:Ke,payload:{data:e}}},yt=function(e){return function(){var t=(0,s.Z)(h().mark((function t(n,a){var r,s,o;return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,n({type:je,payload:{score:e}});case 3:ze({score:e}),r=a(),s=at(r),o=new Ze({}).convertToFacebookData(s),FBInstant.player.setDataAsync(o),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(0),(0,i.tO)(t.t0);case 13:case"end":return t.stop()}}),t,null,[[0,10]])})));return function(e,n){return t.apply(this,arguments)}}()},Et=function(e){function t(){return e.apply(this,arguments)||this}(0,o.Z)(t,e);var n=t.prototype;return n.incUserGuideDisplays=function(){var e=(0,s.Z)(h().mark((function e(){var t;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.game.stateStorage,e.next=3,t.dispatch(function(){var e=(0,s.Z)(h().mark((function e(t,n){var a,r,s,o;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!ht.ForceUseTutorial){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,t(vt({userGuideDisplays:1}));case 5:a=n(),r=nt(a),s=at(a),o=new Ze({}).convertToFacebookData(s),FBInstant.player.setDataAsync(o),Ve(r),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),(0,i.tO)(e.t0);case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t,n){return e.apply(this,arguments)}}());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.receiveData=function(){var e=(0,s.Z)(h().mark((function e(t,n){var i;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=this.game.stateStorage,e.next=3,i.dispatch(dt(t,n));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}(),n.updateData=function(){var e=(0,s.Z)(h().mark((function e(){var t;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.game.stateStorage,e.next=3,t.dispatch(function(){var e=(0,s.Z)(h().mark((function e(t,n){var a,r,s,o,c,u,l,d;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a=n(),r=tt(a),s=r.playerId,o=r.name,c=r.photo,u=r.locale,e.next=6,FBInstant.player.getASIDAsync();case 6:return l=e.sent,d={appId:lt,playerId:s,name:o,photo:c,locale:u,ASID:l},e.next=10,t({type:Xe,payload:{profile:d}});case 10:return e.next=12,ze(d);case 12:e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),(0,i.tO)(e.t0);case 17:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(t,n){return e.apply(this,arguments)}}());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.setBestScore=function(){var e=(0,s.Z)(h().mark((function e(t){var n;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.game.stateStorage,e.next=3,n.dispatch(yt(t));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.setSetting=function(){var e=(0,s.Z)(h().mark((function e(t,n){var i;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=this.game.stateStorage,e.next=3,i.dispatch(ft(t,n));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}(),n.setCustomData=function(){var e=(0,s.Z)(h().mark((function e(t,n){var i;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=this.game.stateStorage,e.next=3,i.dispatch(mt(t,n));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}(),n.setMultiCustomData=function(){var e=(0,s.Z)(h().mark((function e(t){var n;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.game.stateStorage,e.next=3,n.dispatch(gt(t));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.requestConnectedPlayers=function(){var e=(0,s.Z)(h().mark((function e(){var t;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.game.stateStorage,e.next=3,t.dispatch(function(){var e=(0,s.Z)(h().mark((function e(t){var n,a,r,s;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,FBInstant.player.getConnectedPlayersAsync();case 3:if(a=e.sent,r=function(e){return!!e},s=Oe()(n=Re()(a).call(a,(function(e){var t=e.getID(),n=e.getName(),i=e.getPhoto();return t&&n&&i?new Qe.Z(t,n,i).toObject():null}))).call(n,r),!(s.length<1)){e.next=8;break}return e.abrupt("return");case 8:t(pt(s)),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),(0,i.tO)(e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t){return e.apply(this,arguments)}}());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.updateConnectedPlayers=function(){var e=(0,s.Z)(h().mark((function e(t){var n;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.game.stateStorage,e.next=3,n.dispatch(pt(t));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.getPlayer=function(){return tt(this.state)},n.getPlayerId=function(){return this.getPlayer().playerId},n.getPlayerASID=function(){return it(this.state)},n.getPlayerData=function(){return this.getPlayer().data},n.getPlayerDataByKey=function(e){var t=this.getPlayerData();return GameCore.Utils.Object.hasOwn(t,e)?t[e]:null},n.getPlayerSetting=function(e){var t=this.getPlayerSettings();return"string"!==typeof e?null:GameCore.Utils.Object.hasOwn(t,e)?t[e]:GameCore.Utils.Object.hasOwn(Ce,e)?Ce[e]:null},n.getPlayerSettings=function(){return this.getPlayerData().settings},n.getPlayerIsNew=function(){return this.getPlayer().isUserNew},n.getDiamond=function(){var e=this.getCustomData("diamond");return GameCore.Utils.Valid.isNumber(e)?e:0},n.getBestScore=function(){return ot(this.state)},n.getBlitzHighScore=function(){var e=ct(this.state);if(!GameCore.Utils.Valid.isObject(e))return 0;var t=e.blitzHighScore;return GameCore.Utils.Valid.isNumber(t)?t:0},n.getCustomData=function(e){var t=ct(this.state);return GameCore.Utils.Valid.isObject(t)&&GameCore.Utils.Object.hasOwn(t,e)?t[e]:null},n.getConnectedPlayers=function(){return rt(this.state)},n.getConnectedPlayerIds=function(e,t){return st(this.state,{limit:e,offset:t})},(0,re.Z)(t,[{key:"state",get:function(){return this.game.stateStorage.getState()}}]),t}(Phaser.Plugins.BasePlugin),At=Et,St=GameCore.Utils,Tt=St.Object,bt=St.Valid,It=function(e){function t(){return e.apply(this,arguments)||this}return(0,o.Z)(t,e),t.prototype.initDefaultData=function(){e.prototype.initDefaultData.call(this)},t}(function(){function e(e){this.playerId=void 0,this.name=void 0,this.photo=void 0,this.locale=void 0,this.initDefaultData(),Tt.hasOwn(e,"playerId")&&bt.isString(e.playerId)&&(this.playerId=e.playerId),Tt.hasOwn(e,"name")&&bt.isString(e.name)&&(this.name=e.name),Tt.hasOwn(e,"photo")&&bt.isString(e.photo)&&(this.photo=e.photo),Tt.hasOwn(e,"locale")&&bt.isString(e.locale)&&(this.locale=e.locale)}var t=e.prototype;return t.initDefaultData=function(){this.playerId="0000",this.name="unknown",this.photo="",this.locale="en_US"},t.toObject=function(){return{playerId:this.playerId,name:this.name,photo:this.photo,locale:this.locale}},e}()),wt=It,Ct=GameCore.Utils,xt=GameCore.Configs.ApiHost,Ot=function(){var e=(0,s.Z)(h().mark((function e(t){var n,i;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=GameCore.Utils.String.params(t),e.next=3,(0,He.U)("players?"+n,{},xt);case 3:if(i=e.sent,Ct.Object.hasOwn(i,"data")){e.next=6;break}return e.abrupt("return",[]);case 6:if(Array.isArray(i.data)){e.next=8;break}return e.abrupt("return",[]);case 8:return e.abrupt("return",i.data);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),_t=GameCore.Utils,Rt=function(e){function t(){return e.apply(this,arguments)||this}(0,o.Z)(t,e);var n=t.prototype;return n.init=function(){this.game.storage.addStorage("profile",{profiles:{}})},n.requestProfiles=function(){var e=(0,s.Z)(h().mark((function e(t){var n,i,a,r,s;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=this.game.storage,i=Q()(n.getStorageData("profile","profiles")),!((a=GameCore.Utils.Array.difference(t,i)).length<1)){e.next=5;break}return e.abrupt("return");case 5:return e.next=7,Ot({playerIds:a});case 7:if(r=e.sent,this.validateProfilesResponse(r)){e.next=11;break}return e.abrupt("return");case 11:s=this.convertToProfiles(r),n.setStorageData("profile","profiles",s);case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.getProfiles=function(){return this.game.storage.getStorageData("profile","profiles")},n.validateProfilesResponse=function(e){return!!Array.isArray(e)&&!(e.length<1)},n.convertToProfiles=function(e){var t={};return e.forEach((function(e){_t.Object.hasOwn(e,"playerId")&&"string"===typeof e.playerId&&(t[e.playerId]=new wt(e).toObject())})),t},t}(Phaser.Plugins.BasePlugin),Pt=Rt,kt=function(e){function t(){return e.apply(this,arguments)||this}return(0,o.Z)(t,e),t.prototype.emit=function(t,n){return e.prototype.emit.call(this,t,n)},t}(Phaser.Events.EventEmitter),Mt=kt,Dt=n(83),Nt=n(196),Lt=function(e){function t(t,n,i,a){var r;(r=e.call(this,t)||this).zone=void 0,r.background=void 0,r.setName(n),r.setVisible(!1);var s=r.scene.world.getWorldSize(),o=s.width,c=s.height;return r.setSize(i||o,a||c),r.addZone(),r.addBackground(),r.registerEvents(),r}(0,o.Z)(t,e);var n=t.prototype;return n.open=function(e){GameCore.Utils.Valid.isObject(e)&&(this.setDataEnabled(),this.setData(e)),this.setBlockInputOutsideEnabled(!0),this.scene.screen.bringToTop(this.name),this.visible||(this.setVisible(!0),this.logPageviewOnOpen(),this.logEventOpen(),this.handleResize())},n.close=function(){this.setBlockInputOutsideEnabled(!1),this.visible&&(this.setVisible(!1),this.logPageviewOnClose())},n.incY=function(e){this.y+=e,this.background.y-=e},n.incX=function(e){this.x+=e,this.background.x-=e},n.incScale=function(e){this.scale+=e,this.background.scale-=e^e*(100/e)},n.setBlockInputOutsideEnabled=function(e){this.scene.input.setTopOnly(e)},n.addZone=function(){this.zone=this.scene.add.zone(0,0,this.width,this.height),this.zone.setInteractive({}),this.add(this.zone)},n.addBackground=function(){var e="screen-background";if(!this.scene.textures.exists(e)){var t=this.width+2,n=this.height+2,i=this.scene.add.graphics();i.fillStyle(0,1),i.fillRect(0,0,t,n),i.generateTexture(e,t,n),i.destroy()}this.background=this.scene.add.image(0,0,e),this.add(this.background)},n.registerEvents=function(){this.scene.world.events.on(Nt.Z.RESIZE,this.handleResize,this)},n.handleResize=function(){var e=this.scene.world.getWorldSize(),t=e.width,n=e.height;this.setSize(t,n).setPosition(t/2,n/2),this.zone.setSize(this.width,this.height),this.background.setDisplaySize(this.width,this.height)},n.logPageviewOnOpen=function(){this.scene.analytics.pageview(this.name)},n.logPageviewOnClose=function(){this.scene.analytics.pageview(this.scene.scene.key)},n.logEventOpen=function(){this.scene.analytics.event(Dt._.SCREEN_OPEN,{screen_name:this.getScreenName()})},n.getScreenName=function(){return GameCore.Utils.String.toUpperCamelCase(this.name.toLowerCase())},t}(Phaser.GameObjects.Container),Bt=n(433);GameCore.Screen=Lt,GameCore.Screens={Events:Bt.Z};var Gt,Ut,Ft,Zt,Ht,Yt,zt,Vt=function(e){function t(){for(var t,n,i=arguments.length,a=new Array(i),r=0;r<i;r++)a[r]=arguments[r];return(n=e.call.apply(e,O()(t=[this]).call(t,a))||this).events=void 0,n}(0,o.Z)(t,e);var n=t.prototype;return n.boot=function(){this.events=new Mt,this.registryScreenFactory()},n.get=function(e){var t=this.scene.children.getByName(e);return null===t?null:t},n.add=function(e,t,n,i){var a=this.get(e);return a||(a=this.scene.add.screen(e,t,n,i),this.events.emit(GameCore.Screens.Events.CREATED,a),a)},n.open=function(e,t){var n=this.get(e);return!!n&&(n.open(t),n.emit(GameCore.Screens.Events.OPEN,n),this.events.emit(GameCore.Screens.Events.OPEN,n),!0)},n.close=function(e){var t=this.get(e);return!!t&&(t.close(),t.emit(GameCore.Screens.Events.CLOSE,t),this.events.emit(GameCore.Screens.Events.CLOSE,t),!0)},n.bringToTop=function(e){var t=this.scene.children.getByName(e);t&&this.scene.children.bringToTop(t)},n.registryScreenFactory=function(){Phaser.GameObjects.GameObjectFactory.register("screen",this.createScreen)},n.createScreen=function(e,t,n,i){var a=new t(this.scene,e,n,i);return Phaser.Display.Align.In.Center(a,this.scene.gameZone),this.existing(a),a},t}(Phaser.Plugins.ScenePlugin),Wt=Vt,Kt=n(397),jt=n.n(Kt),Xt=n(429),qt=n(430),Jt={token:"",isRequesting:!1},Qt=(Gt={},Gt[le]=function(e,t){return void 0===e&&(e=Jt),(0,qt.ZP)(e,(function(e){var n=t.payload;if(n){var i=n.token;switch(t.type){case se:e.isRequesting=!0;break;case oe:e.token=i,e.isRequesting=!1}}}))},Gt),$t=n(122),en={ASID:"",playerId:"",name:"",photo:"",locale:"",connectedPlayers:{},data:{score:0,settings:Ce,userGuideDisplays:0,customFields:{}},isUserNew:!0},tn=(Ut={},Ut[et]=function(e,t){return void 0===e&&(e=en),(0,qt.ZP)(e,(function(n){var i=t.payload;if(i){var a=i.name,r=i.value,s=i.data,o=void 0===s?{}:s,c=i.score,u=i.connectedPlayers,l=void 0===u?[]:u,h=i.profile;switch(t.type){case We:var d=i.playerId,p=i.name,f=i.photo,m=i.locale,g=i.data;if(n.playerId=d,n.name=p,n.photo=f,n.locale=m,GameCore.Utils.Valid.isObject(g)){var v=g;n.data=(0,$t.TS)(e.data,v)}g.userGuideDisplays>0&&(n.isUserNew=!1);break;case Xe:var y=h.playerId,E=h.name,A=h.photo,S=h.locale,T=h.ASID;n.ASID=T,n.playerId=y,n.name=E,n.photo=A,n.locale=S;break;case je:n.data.score=c;break;case qe:if(!GameCore.Utils.Object.hasOwn(n.data.settings,a))break;n.data.settings[a]=r;break;case Ke:n.data=(0,$t.TS)(e.data,o),o.userGuideDisplays>0&&(n.isUserNew=!1);break;case Je:if(l.length<=0)break;var b=GameCore.Utils.Object.keyBy(l,"playerId");n.connectedPlayers=(0,$t.TS)(e.connectedPlayers,b)}}}))},Ut),nn={active:!1,tournamentId:null,bestSessionScore:0,isRequesting:!1},an=(Ft={},Ft.tournament=function(e,t){return void 0===e&&(e=nn),(0,qt.ZP)(e,(function(n){var i=t.payload;if(i){var a=i.score,r=void 0===a?0:a,s=i.tournamentId;switch(t.type){case"TOURNAMENT_ACTIVE":n.active=!0,n.tournamentId=s;break;case"TOURNAMENT_REQUEST":n.isRequesting=!0;break;case"TOURNAMENT_RECEIVED":n.isRequesting=!1,r>e.bestSessionScore&&(n.bestSessionScore=r)}}}))},Ft),rn="leaderboards",sn=n(126),on=n.n(sn),cn=n(203),un=n.n(cn),ln="LEADERBOARD_DATA_REQUEST",hn="LEADERBOARD_DATA_UPDATE",dn={leaderboardId:"",type:"",limit:0,offset:0,leaders:{},isRequesting:!1},pn=(Zt={},Zt[rn]=function(e,t){return void 0===e&&(e=dn),(0,qt.ZP)(e,(function(n){var i=t.payload;if(i){var a=i.leaderboardId,s=i.type,o=i.limit,c=i.offset,u=i.leaders;switch(t.type){case ln:e.type!==s&&0===c&&(n.leaders=dn.leaders),n.isRequesting=!0,n.leaderboardId=a,n.type=s,n.limit=o,n.offset=c;break;case hn:if(n.isRequesting=!1,e.type!==s)break;var l=GameCore.Utils.Json.clone((0,r.Z)({},e.leaders,u)),h=on()(l),d=Oe()(h).call(h,(function(e){return!!e.name&&!!e.photo}));un()(d).call(d,(function(e,t){return+t.score-+e.score})),d.forEach((function(t,i){t.rank=i+1,e.leaders[t.playerId]||(n.leaders[t.playerId]=t)}));break;case"LEADERBOARD_DATA_CLEAR":n.isRequesting=!1,n.type=dn.type,n.limit=dn.limit,n.offset=dn.offset,n.leaders=dn.leaders,n.leaderboardId=dn.leaderboardId}}}))},Zt),fn="missions",mn="MISSIONS_DATA_REQUEST",gn="MISSIONS_DATA_RECEIVE",vn="MISSION_START",yn="MISSION_UPDATE",En="MISSION_COMPLETED",An={mission:null,missions:null,isRequesting:!1},Sn=(Ht={},Ht[fn]=function(e,t){return void 0===e&&(e=An),(0,qt.ZP)(e,(function(n){var i,a,r=t.payload;if(r){var s=r.name,o=r.type,c=r.value,u=r.missions;switch(t.type){case mn:n.isRequesting=!0;break;case gn:if(n.isRequesting=!1,u.length<1)return;n.missions={},u.forEach((function(e){n.missions[e.name]=e}));break;case vn:if(null===e.missions)break;var l=e.missions[s];n.mission={name:s,process:{},require:l.require,reward:l.reward},Q()(l.require).forEach((function(e){n.mission.process[e]=0}));break;case yn:if((null==(i=e.mission)?void 0:i.name)!==s)break;n.mission.process[o]+=c;break;case En:if((null==(a=e.mission)?void 0:a.name)!==s)break;n.mission=null}}}))},Ht),Tn="dailyTasks",bn="DAILY_TASKS_DATA_REQUEST",In="DAILY_TASKS_DATA_RECEIVE",wn="DAILY_TASKS_PROCESS_UPDATE",Cn="DAILY_TASK_VALUE_ADD",xn="DAILY_TASK_REWARDED",On="DAILY_TASKS_SEEN",_n="DAILY_TASK_FINISHED",Rn={tasks:[],process:[],isRequesting:!1,isNotice:!1},Pn=(Yt={},Yt[Tn]=function(e,t){return void 0===e&&(e=Rn),(0,qt.ZP)(e,(function(n){var i=t.payload;if(i){var a=i.id,r=i.type,s=i.value,o=i.tasks,c=i.process;switch(t.type){case bn:n.isRequesting=!0;break;case In:n.isRequesting=!1,n.tasks=o;break;case wn:n.process=c;break;case Cn:if(!e.process[a])break;n.process[a][r]+=s;break;case xn:if(!e.process[a])break;n.process[a].rewarded=!0;break;case On:n.isNotice=!1;break;case _n:n.isNotice=!0}}}))},Yt),kn="dailyRewards",Mn="DAILY_REWARDS_REQUEST",Dn="DAILY_REWARDS_RECEIVE",Nn={rewards:[],isRequesting:!1},Ln=(zt={},zt[kn]=function(e,t){return void 0===e&&(e=Nn),(0,qt.ZP)(e,(function(e){var n=t.payload;if(n){var i=n.rewards;switch(t.type){case Mn:e.isRequesting=!0;break;case Dn:e.isRequesting=!1,e.rewards=i}}}))},zt),Bn=(0,Xt.UY)((0,r.Z)({},Qt,tn,an,pn,Sn,Pn,Ln)),Gn=Bn,Un=n(604),Fn=function(e){return(0,Un.xC)({reducer:Gn,preloadedState:e,devTools:!0})},Zn=function(e){function t(){for(var t,n,i=arguments.length,a=new Array(i),r=0;r<i;r++)a[r]=arguments[r];return(n=e.call.apply(e,O()(t=[this]).call(t,a))||this).store=void 0,n.initiator=void 0,n.dispatch=function(e){return n.store.dispatch(e)},n.getState=function(){return n.store.getState()},n.subscribe=function(e){return n.store.subscribe(e)},n.watch=function(e,t){var i=jt()((function(){var t=n.getState();return e(t)}));return n.subscribe(i((function(e){t(e)})))},n}(0,o.Z)(t,e);var n=t.prototype;return n.init=function(){this.store=Fn({})},n.setInitiator=function(e){this.initiator=e},n.syncStore=function(){var e=(0,s.Z)(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.initiator.initContext(),e.next=3,this.initiator.initPlayer();case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.initPlayerManually=function(){var e=(0,s.Z)(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.initiator.initPlayer();case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),t}(Phaser.Plugins.BasePlugin),Hn=Zn,Yn=n(589),zn=n.n(Yn),Vn=function(e){function t(t,n){var i;return(i=e.call(this,t,{type:"webfont",key:n.type})||this).payload=void 0,i.payload=n,i}(0,o.Z)(t,e);var n=t.prototype;return n.load=function(){var e;switch(this.payload.type){case"google":e=this.getGoogleFontConfig(this.payload);break;case"local":e=this.getLocalFontConfig(this.payload)}zn().load(e)},n.getGoogleFontConfig=function(e){var t=this,n=e.character,i=e.fontName,a=e.fontWeight;return{google:{families:[i+":"+(void 0===a?400:a)],text:n},active:function(){t.loader.nextFile(t,!0)},timeout:15e3}},n.getLocalFontConfig=function(e){var t=this,n=e.fontName,i=e.fontType,a=document.createElement("style");document.head.appendChild(a);var r=a.sheet;if(r){var s='@font-face { font-family: "'+n+'"; src: url("assets/fonts/'+n+("opentype"===i?".otf":".ttf")+'") format("'+i+'"); }';r.insertRule(s,0)}return{custom:{families:[n]},active:function(){t.loader.nextFile(t,!0)},timeout:15e3}},t}(Phaser.Loader.File),Wn=Vn,Kn=function(e){function t(){return e.apply(this,arguments)||this}return(0,o.Z)(t,e),t.prototype.addFont=function(e){var t=new Wn(this.scene.load,e);this.scene.load.addFile(t)},t}(Phaser.Plugins.ScenePlugin),jn=Kn,Xn=function(e){function t(){return e.apply(this,arguments)||this}return(0,o.Z)(t,e),t.prototype.emit=function(t){return e.prototype.emit.call(this,t)},t}(Phaser.Events.EventEmitter),qn=Xn,Jn=function(e){function t(){for(var t,n,i=arguments.length,a=new Array(i),r=0;r<i;r++)a[r]=arguments[r];return(n=e.call.apply(e,O()(t=[this]).call(t,a))||this).events=void 0,n.previousLayout=void 0,n.resizeEventData=void 0,n.portraitRatio=void 0,n.portraitWidth=void 0,n.portraitHeight=void 0,n.landscapeRatio=void 0,n.landscapeWidth=void 0,n.landscapeHeight=void 0,n.worldWidth=void 0,n.worldHeight=void 0,n.worldRatio=void 0,n.autoResize=void 0,n.disableLandscape=void 0,n.fullSizeOnLandscape=void 0,n.currentLayout=void 0,n.forcePixelRatio=void 0,n.handleResize=(0,Z.D)((function(){n.previousLayout=""+n.currentLayout,n.initWorldSize(),n.resize()}),300),n}(0,o.Z)(t,e);var n=t.prototype;return n.configure=function(e){this.events=new qn;var t=e.autoResize,n=e.portraitRatio,i=e.portraitWidth,a=e.portraitHeight,r=e.landscapeWidth,s=e.landscapeHeight,o=e.landscapeRatio,c=e.disableLandscape,u=e.fullSizeOnLandscape;this.autoResize=t,this.disableLandscape=c,this.fullSizeOnLandscape=u,this.portraitRatio=n,this.portraitWidth=i,this.portraitHeight=a,this.landscapeRatio=o,this.landscapeWidth=r,this.landscapeHeight=s,this.initWorldSize(),this.addEventResize()},n.resize=function(e){var t=this;e&&e>0&&(this.forcePixelRatio=e);var n=this.getCanvasSizeFixedRatio(this.worldRatio),i=n.width,a=n.height;this.resizeCanvas(i,a),this.game.scene.scenes.forEach((function(e){var n=e.cameras.main;if(n){var i=t.getZoomRatio(),a=t.getWorldSize(),r=a.width,s=a.height;n.setZoom(i),n.centerOn(r/2,s/2)}}));var r={width:this.worldWidth,height:this.worldHeight,isLayoutChanged:!1,newLayout:this.currentLayout};this.previousLayout!==this.currentLayout&&(r.isLayoutChanged=!0,r.newLayout=this.currentLayout),this.resizeEventData=r,this.events.emit(Nt.Z.RESIZE,r)},n.getResizeEventData=function(){return this.resizeEventData},n.resizeCanvas=function(e,t){this.game.canvas.width=e,this.game.canvas.height=t,this.game.scale.resize(e,t)},n.getWorldSize=function(){return{width:this.worldWidth,height:this.worldHeight}},n.initWorldSize=function(){if(this.worldWidth=this.portraitWidth,this.worldHeight=this.portraitHeight,this.isScreenSmallerRatio(this.portraitRatio))this.worldHeight=this.worldWidth/this.getScreenRatio(),this.currentLayout="portrait";else if(!this.disableLandscape&&(this.worldWidth=this.landscapeWidth,this.worldHeight=this.landscapeHeight,this.currentLayout="landscape",this.fullSizeOnLandscape)){this.worldRatio=this.worldWidth/this.worldHeight,this.landscapeRatio=this.getScreenRatio();var e=this.getCanvasSizeFixedRatio(this.landscapeRatio),t=e.width,n=e.height,i=this.getZoomRatio();this.worldWidth=t/i,this.worldHeight=n/i}this.worldRatio=this.worldWidth/this.worldHeight},n.getZoomRatio=function(){var e=this.getWorldSize().width;return this.getCanvasSizeFixedRatio(this.worldRatio).width/e},n.getPixelRatio=function(){if(this.forcePixelRatio>0)return this.forcePixelRatio;if(GameCore.Utils.Device.isDesktop())return 2;var e=GameCore.Utils.Device.pixelRatio();return e>2&&(e=2),e},n.getPhysicPixels=function(e,t){return e*t},n.getCanvasSizeFixedRatio=function(e){var t=this.getPixelRatio(),n=this.getScreenWidth()*t,i=this.getScreenHeight()*t;return this.isScreenSmallerRatio(e)?i=n/e:n=i*e,{width:n,height:i}},n.getScreenRatio=function(){return this.getScreenWidth()/this.getScreenHeight()},n.getScreenHeight=function(){var e=document,t=e.body,n=e.documentElement,i=t.clientHeight,a=n.clientHeight;return Math.max(a,i)||0},n.getScreenWidth=function(){var e=document,t=e.body,n=e.documentElement,i=t.clientWidth,a=n.clientWidth;return Math.max(a,i)||0},n.isScreenSmallerRatio=function(e){return this.getScreenRatio()<e},n.addEventResize=function(){this.autoResize&&window.addEventListener("resize",this.handleResize)},n.isLandscape=function(){return!this.disableLandscape&&this.worldRatio>this.portraitRatio},t}(Phaser.Plugins.BasePlugin),Qn=Jn,$n={score:"score",settings:"settings",gameData:"gameData",userGuideDisplays:"userGuideDisplays"},ei={processed:!1,contextId:"",contextType:"SOLO",entryPointData:{},contextGameMode:"",sessionContextType:""},ti=function(){function e(e,t,n){this.contextId=void 0,this.contextType=void 0,this.entryPointData=void 0,this.contextId=e||ei.contextId,this.contextType=t||ei.contextType,this.entryPointData=n||ei.entryPointData}return e.prototype.toObject=function(){return{contextId:this.contextId,contextType:this.contextType,entryPointData:this.entryPointData}},e}(),ni=ti,ii=function(e){function t(t){var n;return(n=e.call(this,t)||this).code=void 0,n.code="CREATE_MATCH_FAILED",n}return(0,o.Z)(t,e),t}((0,G.Z)(Error)),ai=ii,ri=function(e){function t(t){var n;return(n=e.call(this,t)||this).name="PlayerIdNotValid",n.message=t||"Player id is not valid",n}return(0,o.Z)(t,e),t}(ai),si=ri,oi=GameCore.Configs.SyncProfileFromAPI,ci=function(e){var t=this;this.game=void 0,this.initContext=function(){var e=window.GameSDK.context.getID(),n=window.GameSDK.context.getType(),i=window.GameSDK.getEntryPointData(),a=new ni(e,n,i).toObject(),r=a.contextId,s=a.contextType,o=a.entryPointData;t.game.gameContext.receiveContext(r,s,o)},this.initPlayer=(0,s.Z)(h().mark((function e(){var n,i,a,r,s;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.game.player,i=t.getPlayerInfo(),a=on()($n),e.next=5,FBInstant.player.getDataAsync(a);case 5:return r=e.sent,s=new Ze(r),e.next=11,t.maintainDataStructure(s);case 11:return s=e.sent,!0===s.toObject().settings.music&&window.game.audio.playMusic(),e.next=16,n.receiveData(i,s.convertToPlayerData());case 16:case"end":return e.stop()}}),e)}))),this.maintainDataStructure=function(){var e=(0,s.Z)(h().mark((function e(t){var n,i,a,s;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,oi){e.next=3;break}return e.abrupt("return",t);case 3:return e.next=5,FBInstant.player.getDataAsync(["isSynced","customFields"]);case 5:if(e.t0=e.sent,e.t0){e.next=8;break}e.t0={};case 8:if(n=e.t0,!0!==(n.isSynced||!1)){e.next=12;break}return e.abrupt("return",t);case 12:if(i=n.customFields||!1){e.next=15;break}return e.abrupt("return",t);case 15:return(a=t.convertToPlayerData()).customFields=i,s=new Ze({}).convertToFacebookData(a),e.next=20,FBInstant.player.setDataAsync((0,r.Z)({},s,{isSynced:!0}));case 20:return e.abrupt("return",new Ze(s));case 23:return e.prev=23,e.t1=e.catch(0),e.abrupt("return",t);case 27:case"end":return e.stop()}}),e,null,[[0,23]])})));return function(t){return e.apply(this,arguments)}}(),this.getPlayerInfo=function(){try{var e=window.GameSDK.player.getID(),t=window.GameSDK.player.getName(),n=window.GameSDK.player.getPhoto(),i=window.GameSDK.getLocale();if(!GameCore.Utils.Valid.isString(e))throw new si;return GameCore.Utils.Valid.isString(t)||(t="You"),new Qe.Z(e,t,n,i).toObject()}catch(a){return new Qe.Z("123","You").toObject()}},this.game=e},ui=n(431),li=n(98),hi=n.n(li),di=function(e){function t(){for(var t,n,i=arguments.length,a=new Array(i),r=0;r<i;r++)a[r]=arguments[r];return(n=e.call.apply(e,O()(t=[this]).call(t,a))||this).Text=void 0,n.Texture=void 0,n.currentLocale=void 0,n.supportedLanguages=void 0,n.data=void 0,n.options=void 0,n}(0,o.Z)(t,e);var n=t.prototype;return n.configure=function(e){this.applyOptions(e)},n.getCurrentLanguage=function(){return this.currentLocale},n.switchLanguage=function(e){void 0===e&&(e="en");var t=this.getCorrectLocale(e);this.currentLocale=t,this.Text=this.data[t].Text,this.Texture=this.data[t].Texture},n.getText=function(e){if("object"==typeof e){var t=e.key,n=e.variables,i=void 0===n?[]:n,a=e.locale,r=void 0===a?this.currentLocale:a,s=this.getCorrectLocale(r),o=this.data[s].Text[t];return this.replaceVariables(o,i)}return this.Text[e]},n.getTexture=function(e){if("object"==typeof e){var t=e.key,n=e.variables,i=void 0===n?[]:n,a=e.locale,r=void 0===a?this.currentLocale:a,s=this.getCorrectLocale(r),o=this.data[s].Texture[t];return this.replaceVariables(o,i)}return this.Texture[e]},n.isSupportLanguage=function(e){var t;return hi()(t=this.supportedLanguages).call(t,e)>=0},n.applyOptions=function(e){this.options=(0,r.Z)({},e);var t=e.data,n=e.locale,i=void 0===n?"en":n,a=e.upperCaseText,s=void 0!==a&&a;this.data=t,this.supportedLanguages=Q()(t);var o=this.getCorrectLocale(i);if(this.currentLocale=o,this.Text=t[o].Text,this.Texture=t[o].Texture,s)for(var c in this.Text)this.Text[c]=this.Text[c].toUpperCase()},n.makeText=function(e,t){var n,i=t.maxWidth,a=void 0===i?Phaser.Math.MAX_SAFE_INTEGER:i,r=t.maxHeight,s=void 0===r?Phaser.Math.MAX_SAFE_INTEGER:r,o=t.align,c=void 0===o?"center":o,u=t.drawMaxBoxDebug,l=void 0!==u&&u,h=e.make.bitmapText(t);for("center"===c?h.setCenterAlign():"left"===c?h.setLeftAlign():"right"===c&&h.setRightAlign(),hi()(n=t.text||"").call(n," ")>=0&&h.setMaxWidth(a);h.width>a||h.height>=s;)h.setFontSize(.95*h.fontSize);if(l&&GameCore.Utils.Valid.isDebugger()){var d=e.game.globalScene.add.graphics({lineStyle:{width:2,color:16711680}});d.setDepth(Phaser.Math.MAX_SAFE_INTEGER),e.game.globalScene.events.on(Phaser.Scenes.Events.UPDATE,(function(){if(d.clear(),h&&h.visible&&h.active){var e=h.getWorldPosition(),t=e.x,n=e.y;d.strokeRect(t-.5*a+(.5-h.originX)*h.width,n-.5*s+(.5-h.originY)*h.height,a,s)}}))}return h},n.setFontSize=function(e,t,n){var i,a=t||Phaser.Math.MAX_SAFE_INTEGER,r=n||Phaser.Math.MAX_SAFE_INTEGER;for(hi()(i=e.text||"").call(i," ")>=0&&e.setMaxWidth(a);e.width>a||e.height>=r;)e.setFontSize(.95*e.fontSize)},n.replaceVariables=function(e,t){var n=t.length;if(0==n)return e;var i=0;return e.replace(/{.*}/,(function(){return String(t[Math.min(i++,n-1)])}))},n.getCorrectLocale=function(e){var t=e;return this.isSupportLanguage(e)||(t="en"),t},t}(Phaser.Plugins.BasePlugin),pi=JSON.parse('{"Text":{"PLAY_NOW":"PLAY NOW","RANK":"RANK","DAILY":"DAILY","GIFT":"GIFT","SETTINGS":"SETTINGS","GUIDE_1_TAP":"TAP ON TWO OR MORE GEMS OF THE SAME COLOR TO DESTROY THEM","GUIDE_2_SCORE":"THIS IS YOUR CURRENT SCORE","GUIDE_3_TARGET_SCORE":"THIS IS THE TARGET SCORE FOR EACH LEVEL YOU NEED TO PASS","LEVEL":"LEVEL","TARGET":"TARGET","REPLAY":"REPLAY","PLAY_WITH_FRIENDS":"PLAY WITH FRIENDS","PLAY":"PLAY","WITH_FRIENDS":"WITH_FRIENDS","HOME":"HOME","DAILY_REWARDS":"DAILY REWARDS","DAY_X":"DAY {X}","CLAIM":"CLAIM","CLAIM_X2":"CLAIM X2","CANCELLED_AD":"SORRY, NO REWARDS!\\nYOU HAVE CANCELLED\\nTHE AD!","LOADING":"LOADING...","WATCH_A_VIDEO":"WATCH A VIDEO TO GET\\n{X} DIAMONDS","GET_NOW":"GET NOW!","NO_THANKS":"NO THANKS!","LOADING_ADS":"LOADING ADS...","NO_ADS":"NO ADS TO DISPLAY!","DAILY_MISSIONS":"DAILY MISSIONS","DAILY_MISSION_COMPLETED":"DAILY MISSION COMPLETED","GEM_BONUS":"GEM BONUS","PASS_X_LEVELS":"PASS {X} LEVELS","FINISH_X_BLITZ_GAME":"FINISH {X} BLITZ MODE GAMES","FINISH_X_GEM_BONUS":"FINISH {X} MISSIONS","EAT_X_RED_GEMS":"BREAK {X} RED GEMS","EAT_X_GREEN_GEMS":"BREAK {X} GREEN GEMS","EAT_X_BLUE_GEMS":"BREAK {X} BLUE GEMS","EAT_X_YELLOW_GEMS":"BREAK {X} YELLOW GEMS","EAT_X_PURPLE_GEMS":"BREAK {X} PINK GEMS","DESTROY_X_ICE":"DESTROY {X} ICE BLOCKS","USE_X_COLORFUL":"USE {X} COLORFUL GEMS","USE_HAMMER_TASK":"USE THE HAMMER ITEM","USE_SHUFFLE_TASK":"USE THE SHUFFLE ITEM","USE_COLOR_TASK":"USE THE MAGIC BOTTLE","EAT_GEM_COMBO_X":"BREAK {X} GEMS IN ONE TOUCH","EAT_X_COLOR_CHANGE":"BREAK {X} COLOR CHANGE GEMS","COLLECT_300":"COLLECT 300 DIAMONDS","INVITE_2":"INVITE 2 FRIENDS","REACH_TOTAL":"REACH TOTAL SCORES","LEADERBOARDS":"LEADERBOARDS","FRIENDS":"FRIENDS","WORLD":"WORLD","HAMMER":"HAMMER","USE_HAMMER":"USE HAMMER TO SMASH\\nANY GEM","MAGIC_BOTTLE":"MAGIC BOTTLE","USE_MAGIC":"USE MAGIC BOTTLE TO \\nCHANGE A GEM COLOR","CONGRATULATIONS":"CONGRATULATIONS !","GOOD":"GOOD !","EXCELLENT":"EXCELLENT !","COOL":"COOL !","GREAT":"GREAT !","LOADING_INTER_AD":"Loading interstitial ad...","LEVEL_FAILED":"LEVEL FAILED","YOU_DID_NOT_REACH":"YOU DID NOT REACH THE TARGET SCORE","YOUR_SCORE":"YOUR SCORE","BEST_SCORE":"BEST SCORE","GLOBAL":"GLOBAL","JOIN":"JOIN","CONTINUE":"CONTINUE","TODAY_RECORD":"TODAY RECORD","SHARE":"SHARE","WAITING":"WAITING","WAITING_OPPONENT":"WAITING FOR OPPONENT","DRAW":"DRAW","YOU_WIN":"YOU WIN","YOU_LOSE":"YOU LOSE","RESTART":"RESTART","A_HA":"A ha, I\'m the best!","PHEWW":"Pheww, a great match!","DIAMOND":"DIAMOND","LB_IS_EMPTY":"Leaderboard is empty!","YOU_RECEIVED_X_DIAMONDS":"You have just received\\n{X} diamonds","MISSION":"Mission","REQUESTING":"requesting...","MILESTONE":"MILESTONE","DAY":"DAY","BLITZ_MODE":"BLITZ MODE","HIGH_SCORE":"HIGH SCORE","TUTORIAL_COLORFUL_GEM":"Rainbow gem can clear the gems surrounding it","EXTEND_BLITZ_TIME":"Extra 30","BLITZ_OUT_OF_TIME":"SORRY. TIME IS UP!","JOIN_LB_SUCCESS":"YOU HAVE JOINED\\nTHE LEADERBOARD","JOIN_LB_FAIL":"FAILED TO JOIN\\nTHE LEADERBOARD","LOGIN":"CLAIM YOUR SPOT","COUNTDOWN_DAY_X":"ENDS IN {X} DAYS","ENDING_SOON":"ENDING SOON","LOADING_NO_DOTS":"LOADING","BLITZ_HS_SHARE":"I reached {X} score in Blitz Mode. Can you do better? Come and play with me.","NORMAL_HS_SHARE":"I reached {X} score in Classic Mode. Can you do better? Come and play with me."},"Texture":{"NO_THANK":"texts/no-thank","COOL":"texts/cool","GOOD":"texts/good","GREAT":"texts/great","EXCELLENT":"texts/excellent","CONGRATULATION":"texts/congratulation","LOGO":"title-logo","DAILY_MISSION_COMPLETE":"texts/daily-mission-completed"}}'),fi=JSON.parse('{"Text":{"PLAY_NOW":"\u0418\u0413\u0420\u0410\u0422\u042c \u0421\u0415\u0419\u0427\u0410\u0421","RANK":"\u041c\u0415\u0421\u0422\u041e","DAILY":"\u0415\u0416\u0415\u0414\u041d\u0415\u0412\u041d\u041e","GIFT":"\u041f\u041e\u0414\u0410\u0420\u041e\u041a","SETTINGS":"\u041d\u0410\u0421\u0422\u0420\u041e\u0419\u041a\u0418","GUIDE_1_TAP":"\u041d\u0410\u0416\u041c\u0418 \u041d\u0410 \u0414\u0412\u0410 \u0418\u041b\u0418 \u0411\u041e\u041b\u042c\u0428\u0415 \u0421\u0410\u041c\u041e\u0426\u0412\u0415\u0422\u0410 \u041e\u0414\u041d\u041e\u0413\u041e \u0426\u0412\u0415\u0422\u0410, \u0427\u0422\u041e\u0411\u042b \u0423\u041d\u0418\u0427\u0422\u041e\u0416\u0418\u0422\u042c \u0418\u0425","GUIDE_2_SCORE":"\u042d\u0422\u041e \u0422\u0412\u041e\u0419 \u0422\u0415\u041a\u0423\u0429\u0418\u0419 \u0420\u0415\u0417\u0423\u041b\u042c\u0422\u0410\u0422","GUIDE_3_TARGET_SCORE":"\u042d\u0422\u041e \u041d\u0415\u041e\u0411\u0425\u041e\u0414\u0418\u041c\u042b\u0419 \u0420\u0415\u0417\u0423\u041b\u042c\u0422\u0410\u0422 \u0414\u041b\u042f \u041a\u0410\u0416\u0414\u041e\u0413\u041e \u0423\u0420\u041e\u0412\u041d\u042f, \u041a\u041e\u0422\u041e\u0420\u042b\u0419 \u0422\u0415\u0411\u0415 \u041d\u0423\u0416\u041d\u041e \u041f\u0420\u041e\u0419\u0422\u0418","LEVEL":"\u0423\u0420\u041e\u0412\u0415\u041d\u042c","TARGET":"\u0426\u0415\u041b\u042c","REPLAY":"\u0418\u0413\u0420\u0410\u0422\u042c \u0417\u0410\u041d\u041e\u0412\u041e","PLAY_WITH_FRIENDS":"\u0418\u0413\u0420\u0410\u0422\u042c \u0421 \u0414\u0420\u0423\u0417\u042c\u042f\u041c\u0418","PLAY":"\u0418\u0413\u0420\u0410\u0422\u042c","WITH_FRIENDS":"\u0421 \u0414\u0420\u0423\u0417\u042c\u042f\u041c\u0418","HOME":"\u0414\u041e\u041c\u041e\u0419","DAILY_REWARDS":"\u0415\u0416\u0415\u0414\u041d\u0415\u0412\u041d\u042b\u0415 \u041d\u0410\u0413\u0420\u0410\u0414\u042b","DAY_X":"\u0414\u0415\u041d\u042c {X}","CLAIM":"\u041f\u043e\u043b\u0443\u0447\u0438\u0442\u044c","CLAIM_X2":"\u041f\u043e\u043b\u0443\u0447\u0438\u0442\u044c X2","CANCELLED_AD":"\u0418\u0417\u0412\u0418\u041d\u0418, \u041d\u0410\u0413\u0420\u0410\u0414 \u041d\u0415\u0422!\\n\u0422\u042b \u041e\u0422\u041a\u0410\u0417\u0410\u041b\u0421\u042f \u041e\u0422\\n\u041f\u0420\u041e\u0421\u041c\u041e\u0422\u0420\u0410 \u0420\u0415\u041a\u041b\u0410\u041c\u042b!","LOADING":"\u0417\u0410\u0413\u0420\u0423\u0417\u041a\u0410...","WATCH_A_VIDEO":"\u041f\u041e\u0421\u041c\u041e\u0422\u0420\u0418 \u0412\u0418\u0414\u0415\u041e, \u0427\u0422\u041e\u0411\u042b \u041f\u041e\u041b\u0423\u0427\u0418\u0422\u042c\\n{X} \u0410\u041b\u041c\u0410\u0417\u041e\u0412!","GET_NOW":"\u041f\u043e\u043b\u0443\u0447\u0438\u0442\u044c!","NO_THANKS":"Texture only","LOADING_ADS":"\u041f\u041e\u041b\u0423\u0427\u0418\u0422\u042c \u0421\u0415\u0419\u0427\u0410\u0421","NO_ADS":"\u041d\u0415\u0422 \u0420\u0415\u041a\u041b\u0410\u041c\u042b \u0414\u041b\u042f \u041e\u0422\u041e\u0411\u0420\u0410\u0416\u0415\u041d\u0418\u042f!","DAILY_MISSIONS":"\u0415\u0416\u0415\u0414\u041d\u0415\u0412\u041d\u042b\u0415 \u041c\u0418\u0421\u0421\u0418\u0418","DAILY_MISSION_COMPLETED":"\u0415\u0416\u0415\u0414\u041d\u0415\u0412\u041d\u0410\u042f \u041c\u0418\u0421\u0421\u0418\u042f \u0412\u042b\u041f\u041e\u041b\u041d\u0415\u041d\u0410","GEM_BONUS":"\u0411\u041e\u041d\u0423\u0421 \u0417\u0410 \u041a\u0410\u041c\u041d\u0418","PASS_X_LEVELS":"\u041f\u0420\u041e\u0419\u0414\u0418\u0422\u0415 {X} \u0423\u0420\u041e\u0412\u041d\u042f","FINISH_X_BLITZ_GAME":"\u0417\u0410\u0412\u0415\u0420\u0428\u0418\u0422\u0415 {X} \u0418\u0413\u0420\u042b \u0412 \u0411\u041b\u0418\u0426","FINISH_X_GEM_BONUS":"\u0417\u0410\u0412\u0415\u0420\u0428\u0418\u0422\u0415 {X} \u0417\u0410\u0414\u0410\u041d\u0418\u0419","EAT_X_RED_GEMS":"\u0420\u0410\u0417\u0411\u0415\u0419\u0422\u0415 {X} \u041a\u0420\u0410\u0421\u041d\u042b\u0425 \u041a\u0410\u041c\u041d\u0415\u0419","EAT_X_GREEN_GEMS":"\u0420\u0410\u0417\u0411\u0415\u0419\u0422\u0415 {X} \u0417\u0415\u041b\u0401\u041d\u042b\u0425 \u041a\u0410\u041c\u041d\u0415\u0419","EAT_X_BLUE_GEMS":"\u0420\u0410\u0417\u0411\u0415\u0419\u0422\u0415 {X} \u0421\u0418\u041d\u0418\u0425 \u041a\u0410\u041c\u041d\u0415\u0419","EAT_X_YELLOW_GEMS":"\u0420\u0410\u0417\u0411\u0415\u0419\u0422\u0415 {X} \u0416\u0401\u041b\u0422\u042b\u0425 \u041a\u0410\u041c\u041d\u0415\u0419","EAT_X_PURPLE_GEMS":"\u0420\u0410\u0417\u0411\u0415\u0419\u0422\u0415 {X} \u0424\u0418\u041e\u041b\u0415\u0422\u041e\u0412\u042b\u0425 \u041a\u0410\u041c\u041d\u0415\u0419","DESTROY_X_ICE":"\u0420\u0410\u0417\u0420\u0423\u0428\u042c\u0422\u0415 {X} \u041b\u0415\u0414\u042f\u041d\u042b\u0425 \u0411\u041b\u041e\u041a\u0410","USE_X_COLORFUL":"\u0418\u0421\u041f\u041e\u041b\u042c\u0417\u0423\u0419\u0422\u0415 {X} \u0426\u0412\u0415\u0422\u041d\u042b\u0425 \u041a\u0410\u041c\u041d\u0415\u0419","USE_HAMMER_TASK":"\u0418\u0421\u041f\u041e\u041b\u042c\u0417\u0423\u0419\u0422\u0415 \u041c\u041e\u041b\u041e\u0422\u041e\u041a","USE_SHUFFLE_TASK":"\u0418\u0421\u041f\u041e\u041b\u042c\u0417\u0423\u0419\u0422\u0415 \u041f\u0420\u0415\u0414\u041c\u0415\u0422 \u0421\u041c\u0415\u0428.","USE_COLOR_TASK":"\u0418\u0421\u041f\u041e\u041b\u042c\u0417\u0423\u0419\u0422\u0415 \u0426\u0412\u0415\u0422. \u0417\u0415\u041b\u042c\u0415","EAT_GEM_COMBO_X":"\u0420\u0410\u0417\u0411\u0415\u0419\u0422\u0415 {X} \u041a\u0410\u041c\u041d\u042f \u041e\u0414\u041d\u0418\u041c \u041a\u0410\u0421\u0410\u041d\u0418\u0415\u041c","EAT_X_COLOR_CHANGE":"\u0420\u0410\u0417\u0411\u0415\u0419\u0422\u0415 {X} \u041a\u0410\u041c\u041d\u0415\u0419, \u041c\u0415\u041d\u042f\u042e\u0429\u0418\u0425 \u0426\u0412\u0415\u0422","COLLECT_300":"\u0421\u041e\u0411\u0415\u0420\u0418 300 \u0410\u041b\u041c\u0410\u0417\u041e\u0412","INVITE_2":"\u041f\u0420\u0418\u0413\u041b\u0410\u0421\u0418 2 \u0414\u0420\u0423\u0417\u0415\u0419","REACH_TOTAL":"\u041d\u0410\u0411\u0415\u0420\u0418 \u041e\u0411\u0429\u0415\u0415 \u0427\u0418\u0421\u041b\u041e \u041e\u0427\u041a\u041e\u0412","LEADERBOARDS":"\u0422\u0410\u0411\u041b\u0418\u0426\u0410 \u041b\u0418\u0414\u0415\u0420\u041e\u0412","FRIENDS":"\u0414\u0420\u0423\u0417\u042c\u042f","WORLD":"\u0412\u0415\u0421\u042c \u041c\u0418\u0420","HAMMER":"\u041c\u041e\u041b\u041e\u0422\u041e\u041a","USE_HAMMER":"\u0418\u0421\u041f\u041e\u041b\u042c\u0417\u0423\u0419 \u041c\u041e\u041b\u041e\u0422\u041e\u041a, \u0427\u0422\u041e\u0411\u042b \u0420\u0410\u0417\u0411\u0418\u0422\u042c \u041b\u042e\u0411\u041e\u0419 \u0421\u0410\u041c\u041e\u0426\u0412\u0415\u0422","MAGIC_BOTTLE":"\u0412\u041e\u041b\u0428\u0415\u0411\u041d\u0410\u042f \u0411\u0423\u0422\u042b\u041b\u041a\u0410","USE_MAGIC":"\u0418\u0421\u041f\u041e\u041b\u042c\u0417\u0423\u0419 \u0412\u041e\u041b\u0428\u0415\u0411\u041d\u0423\u042e \u0411\u0423\u0422\u042b\u041b\u041a\u0423, \u0427\u0422\u041e\u0411\u042b \u0418\u0417\u041c\u0415\u041d\u0418\u0422\u042c \u0426\u0412\u0415\u0422 \u0421\u0410\u041c\u041e\u0426\u0412\u0415\u0422\u0410","CONGRATULATIONS":"Texture only","GOOD":"Texture only","EXCELLENT":"Texture only","COOL":"Texture only","GREAT":"Texture only","LOADING_INTER_AD":"\u0417\u0410\u0413\u0420\u0423\u0417\u041a\u0410 \u041f\u0420\u041e\u041c\u0415\u0416\u0423\u0422\u041e\u0427\u041d\u041e\u0419 \u0420\u0415\u041a\u041b\u0410\u041c\u042b...","LEVEL_FAILED":"\u0423\u0420\u041e\u0412\u0415\u041d\u042c \u041d\u0415 \u041f\u0420\u041e\u0419\u0414\u0415\u041d","YOU_DID_NOT_REACH":"\u0422\u042b \u041d\u0415 \u041d\u0410\u0411\u0420\u0410\u041b \u041d\u0423\u0416\u041d\u041e\u0415 \u0427\u0418\u0421\u041b\u041e \u041e\u0427\u041a\u041e\u0412","YOUR_SCORE":"\u0420\u0415\u0417\u0423\u041b\u042c\u0422\u0410\u0422","BEST_SCORE":"\u041b\u0423\u0427\u0428\u0418\u0419 \u0420\u0415\u0417\u0423\u041b\u042c\u0422\u0410\u0422","GLOBAL":"\u0412\u0415\u0421\u042c \u041c\u0418\u0420","JOIN":"\u041f\u0420\u0418\u0421\u041e\u0415\u0414\u0418\u041d\u0418\u0422\u042c\u0421\u042f","CONTINUE":"\u041f\u0420\u041e\u0414\u041e\u041b\u0416\u0418\u0422\u042c","TODAY_RECORD":"\u0421\u0415\u0413\u041e\u0414\u041d\u042f\u0428\u041d\u0418\u0419 \u0420\u0415\u0417\u0423\u041b\u042c\u0422\u0410\u0422","SHARE":"\u041f\u041e\u0414\u0415\u041b\u0418\u0422\u042c\u0421\u042f","WAITING":"\u041e\u0416\u0418\u0414\u0410\u041d\u0418\u0415","WAITING_OPPONENT":"\u041e\u0416\u0418\u0414\u0410\u041d\u0418\u0415 \u041e\u041f\u041f\u041e\u041d\u0415\u041d\u0422\u0410","DRAW":"\u0416\u0415\u0420\u0415\u0411\u042c\u0415\u0412\u041a\u0410","YOU_WIN":"\u0422\u042b \u0412\u042b\u0418\u0413\u0420\u0410\u0415\u0428\u042c","YOU_LOSE":"\u0422\u042b \u041f\u0420\u041e\u0418\u0413\u0420\u0410\u0415\u0428\u042c","RESTART":"\u041d\u0410\u0427\u0410\u0422\u042c \u0417\u0410\u041d\u041e\u0412\u041e","A_HA":"\u0425\u0430, \u044f \u043b\u0443\u0447\u0448\u0438\u0439!","PHEWW":"Pheww, \u043e\u0442\u043b\u0438\u0447\u043d\u044b\u0439 \u043c\u0430\u0442\u0447!","DIAMOND":"\u0410\u041b\u041c\u0410\u0417","LB_IS_EMPTY":"\u043f\u0443\u0441\u0442\u043e\u0439","YOU_RECEIVED_X_DIAMONDS":"\u0422\u042b \u0422\u041e\u041b\u042c\u041a\u041e \u0427\u0422\u041e \u041f\u041e\u041b\u0423\u0427\u0418\u041b\\n{X} \u0410\u041b\u041c\u0410\u0417\u041e\u0412","MISSION":"\u041c\u0418\u0421\u0421\u0418\u042f","REQUESTING":"\u0417\u0410\u041f\u0420\u041e\u0421...","MILESTONE":"\u0432\u0435\u0445\u0430","DAY":"\u0414\u0415\u041d\u042c","BLITZ_MODE":"\u0411\u041b\u0418\u0426-\u0420\u0415\u0416\u0418\u041c","HIGH_SCORE":"\u0412\u042b\u0421\u041e\u041a\u0418\u0419 \u0420\u0415\u0417\u0423\u041b\u042c\u0422\u0410\u0422","TUTORIAL_COLORFUL_GEM":"\u0420\u0410\u0414\u0423\u0416\u041d\u042b\u0419 \u041a\u0410\u041c\u0415\u041d\u042c \u041c\u041e\u0416\u0415\u0422 \u041e\u0427\u0418\u0421\u0422\u0418\u0422\u042c \u041e\u041a\u0420\u0423\u0416\u0410\u042e\u0429\u0418\u0415 \u0415\u0413\u041e \u041a\u0410\u041c\u041d\u0418.","EXTEND_BLITZ_TIME":"\u041f\u0420\u041e\u0414\u041b\u0418\u0422\u042c \u0412\u0420\u0415\u041c\u042f","BLITZ_OUT_OF_TIME":"\u0418\u0417\u0412\u0418\u041d\u0418\u0422\u0415. \u0412\u0420\u0415\u041c\u042f \u0412\u042b\u0428\u041b\u041e!","JOIN_LB_SUCCESS":"\u0412\u044b \u043f\u0440\u0438\u0441\u043e\u0435\u0434\u0438\u043d\u0438\u043b\u0438\u0441\\n\u043a \u0442\u0430\u0431\u043b\u0438\u0446\u0435 \u043b\u0438\u0434\u0435\u0440\u043e\u0432","JOIN_LB_FAIL":"\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u0432\u043e\u0439\u0442\u0438\\n\u0432 \u0442\u0430\u0431\u043b\u0438\u0446\u0443 \u043b\u0438\u0434\u0435\u0440\u043e\u0432","LOGIN":"\u0417\u0410\u0419\u041c\u0418\u0422\u0415 \u0421\u0412\u041e\u0401 \u041c\u0415\u0421\u0422\u041e","COUNTDOWN_DAY_X":"\u041e\u0421\u0422\u0410\u041b\u041e\u0421\u042c {X} \u0414\u041d\u042f","ENDING_SOON":"\u0421\u041a\u041e\u0420\u041e \u0417\u0410\u041a\u041e\u041d\u0427\u0418\u0422\u0421\u042f","LOADING_NO_DOTS":"\u0417\u0410\u0413\u0420\u0423\u0417\u041a\u0410","BLITZ_HS_SHARE":"\u042f \u043d\u0430\u0431\u0440\u0430\u043b {X} \u043e\u0447\u043a\u043e\u0432 \u0432 \u0440\u0435\u0436\u0438\u043c\u0435 \u0411\u043b\u0438\u0446. \u0421\u043c\u043e\u0436\u0435\u0448\u044c \u043b\u0443\u0447\u0448\u0435? \u041f\u0440\u0438\u0445\u043e\u0434\u0438 \u0438 \u043f\u043e\u0438\u0433\u0440\u0430\u0439 \u0441\u043e \u043c\u043d\u043e\u0439.","NORMAL_HS_SHARE":"\u042f \u043d\u0430\u0431\u0440\u0430\u043b {X} \u043e\u0447\u043a\u043e\u0432 \u0432 \u043a\u043b\u0430\u0441\u0441\u0438\u0447\u0435\u0441\u043a\u043e\u043c \u0440\u0435\u0436\u0438\u043c\u0435. \u0421\u043c\u043e\u0436\u0435\u0448\u044c \u043b\u0443\u0447\u0448\u0435? \u041f\u0440\u0438\u0445\u043e\u0434\u0438 \u0438 \u043f\u043e\u0438\u0433\u0440\u0430\u0439 \u0441\u043e \u043c\u043d\u043e\u0439."},"Texture":{"NO_THANK":"texts/no-thank-ru","COOL":"texts/cool-ru","GOOD":"texts/good-ru","GREAT":"texts/great-ru","EXCELLENT":"texts/excellent-ru","CONGRATULATION":"texts/congratulation-ru","LOGO":"title-logo-ru","DAILY_MISSION_COMPLETE":"texts/daily-mission-completed-ru"}}'),mi=JSON.parse('{"Text":{"PLAY_NOW":"\u4eca\u3059\u3050\u30d7\u30ec\u30a4","RANK":"\u30e9\u30f3\u30af","DAILY":"\u6bce\u65e5","GIFT":"\u30ae\u30d5\u30c8","SETTINGS":"\u8a2d\u5b9a","GUIDE_1_TAP":"\u540c\u3058\u8272\u306e\u30b8\u30a7\u30e0\u3092\\n2\u3064\u4ee5\u4e0a\u30bf\u30c3\u30d7\u3059\u308b\\n\u3068\u7834\u58ca\u3067\u304d\u307e\u3059","GUIDE_2_SCORE":"\u73fe\u5728\u306e\u30b9\u30b3\u30a2\u306f\u3053\u3061\u3089\u3067\u3059","GUIDE_3_TARGET_SCORE":"\u3053\u308c\u304c\u5404\u30ec\u30d9\u30eb\u306e\u30af\u30ea\u30a2\u306b\\n\u5fc5\u8981\u306a\u76ee\u6a19\u30b9\u30b3\u30a2\u3067\u3059","LEVEL":"\u30ec\u30d9\u30eb","TARGET":"\u76ee\u6a19","REPLAY":"\u30ea\u30d7\u30ec\u30a4","PLAY_WITH_FRIENDS":"\u53cb\u9054\u3068\u904a\u3076","PLAY":"\u30d7\u30ec\u30a4","WITH_FRIENDS":"\u53cb\u9054\u3068","HOME":"\u30db\u30fc\u30e0","DAILY_REWARDS":"1\u65e5\u3042\u305f\u308a\u306e\u5831\u916c","DAY_X":"{X}\u65e5\u76ee","CLAIM":"\u7372\u5f97","CLAIM_X2":"2\u500d\u7372\u5f97","CANCELLED_AD":"\u7533\u3057\u8a33\u3042\u308a\u307e\u305b\u3093\u304c\\n\u5831\u916c\u306f\u3042\u308a\u307e\u305b\u3093\uff01\\n\u3042\u306a\u305f\u306f\u5e83\u544a\u3092\\n\u30ad\u30e3\u30f3\u30bb\u30eb\u3057\u307e\u3057\u305f\uff01","LOADING":"\u8aad\u307f\u8fbc\u307f\u4e2d","WATCH_A_VIDEO":"\u52d5\u753b\u306e\u8996\u8074\u3067\\n\u30c0\u30a4\u30e4\u30e2\u30f3\u30c9 {X}\u500b\u3092\u7372\u5f97","GET_NOW":"\u4eca\u3059\u3050\u5165\u624b\uff01","NO_THANKS":"\u7d50\u69cb\u3067\u3059\uff01","LOADING_ADS":"\u5e83\u544a\u3092\u8aad\u307f\u8fbc\u307f\u4e2d...","NO_ADS":"\u8868\u793a\u3059\u308b\u5e83\u544a\u306f\u3042\u308a\u307e\u305b\u3093\uff01","DAILY_MISSIONS":"\u6bce\u65e5\u306e\u30df\u30c3\u30b7\u30e7\u30f3","DAILY_MISSION_COMPLETED":"\u30c7\u30a4\u30ea\u30fc\u30df\u30c3\u30b7\u30e7\u30f3\u5b8c\u4e86","GEM_BONUS":"\u30b8\u30a7\u30e0\u30dc\u30fc\u30ca\u30b9","PASS_X_LEVELS":"{X}\u306e\u30ec\u30d9\u30eb\u3092\u30af\u30ea\u30a2","FINISH_X_BLITZ_GAME":"\u30d6\u30ea\u30c3\u30c4\u30e2\u30fc\u30c9{X}\u56de\u30af\u30ea\u30a2","FINISH_X_GEM_BONUS":"\u30b8\u30a7\u30e0\u30dc\u30fc\u30ca\u30b9\u3092{X}\u3064\u5b8c\u4e86","EAT_X_RED_GEMS":"\u8d64\u3044\u5b9d\u77f3\u3092{X}\u3064\u58ca\u3059","EAT_X_GREEN_GEMS":"\u7dd1\u306e\u5b9d\u77f3\u3092{X}\u3064\u58ca\u3059","EAT_X_BLUE_GEMS":"\u9752\u3044\u5b9d\u77f3\u3092{X}\u3064\u58ca\u3059","EAT_X_YELLOW_GEMS":"\u9ec4\u8272\u3044\u5b9d\u77f3\u3092{X}\u3064\u58ca\u3059","EAT_X_PURPLE_GEMS":"\u7d2b\u306e\u5b9d\u77f3\u3092{X}\u3064\u58ca\u3059","DESTROY_X_ICE":"\u6c37\u306e\u30d6\u30ed\u30c3\u30af\u3092{X}\u3064\u58ca\u3059","USE_X_COLORFUL":"\u30ab\u30e9\u30d5\u30eb\u306a\u5b9d\u77f3\u3092{X}\u3064\u4f7f\u3046","USE_HAMMER_TASK":"\u30cf\u30f3\u30de\u30fc\u3092\u4f7f\u3046","USE_SHUFFLE_TASK":"\u30b7\u30e3\u30c3\u30d5\u30eb\u3092\u4f7f\u3046","USE_COLOR_TASK":"\u30ab\u30e9\u30fc\u30dd\u30fc\u30b7\u30e7\u30f3\u3092\u4f7f\u3046","EAT_GEM_COMBO_X":"1\u56de\u3067{X}\u3064\u306e\u5b9d\u77f3\u3092\u58ca\u3059","EAT_X_COLOR_CHANGE":"\u8272\u5909\u308f\u308a\u5b9d\u77f3\u3092{X}\u3064\u58ca\u3059","COLLECT_300":"\u30c0\u30a4\u30e4\u30e2\u30f3\u30c9\u3092300\u500b\u96c6\u3081\u308b","INVITE_2":"2\u4eba\u306e\u53cb\u9054\u3092\u62db\u5f85","REACH_TOTAL":"\u5408\u8a08\u30b9\u30b3\u30a2\u306b\u5230\u9054","LEADERBOARDS":"\u30ea\u30fc\u30c0\u30fc\u30dc\u30fc\u30c9","FRIENDS":"\u53cb\u9054","WORLD":"\u4e16\u754c","HAMMER":"\u30cf\u30f3\u30de\u30fc","USE_HAMMER":"\u30cf\u30f3\u30de\u30fc\u3092\u4f7f\u3063\u3066  \\n\u30b8\u30a7\u30e0\u3092\u7834\u58ca","MAGIC_BOTTLE":"\u30de\u30b8\u30c3\u30af\u30dc\u30c8\u30eb","USE_MAGIC":"\u30de\u30b8\u30c3\u30af\u30dc\u30c8\u30eb\u3092\u4f7f\u3063\u3066   \\n\u30b8\u30a7\u30e0\u306e\u8272\u3092\u5909\u3048\u308b","CONGRATULATIONS":"\u304a\u3081\u3067\u3068\u3046\u3054\u3056\u3044\u307e\u3059\uff01","GOOD":"\u826f\u3044\uff01","EXCELLENT":"\u7d20\u6674\u3089\u3057\u3044\uff01","COOL":"\u304b\u3063\u3053\u3044\u3044 !","GREAT":"\u6700\u9ad8\uff01","LOADING_INTER_AD":"\u30a4\u30f3\u30bf\u30fc\u30b9\u30c6\u30a3\u30b7\u30e3\u30eb\u5e83\u544a\u3092\u8aad\u307f\u8fbc\u307f\u4e2d...","LEVEL_FAILED":"\u30ec\u30d9\u30eb\u30af\u30ea\u30a2\u5931\u6557","YOU_DID_NOT_REACH":"\u76ee\u6a19\u30b9\u30b3\u30a2\u306b\u9054\u3057\u307e\u305b\u3093\u3067\u3057\u305f","YOUR_SCORE":"\u3042\u306a\u305f\u306e\u30b9\u30b3\u30a2","BEST_SCORE":"\u30d9\u30b9\u30c8\u30b9\u30b3\u30a2","GLOBAL":"\u30b0\u30ed\u30fc\u30d0\u30eb","JOIN":"\u53c2\u52a0","CONTINUE":"\u30b3\u30f3\u30c6\u30a3\u30cb\u30e5\u30fc","TODAY_RECORD":"\u4eca\u65e5\u306e\u8a18\u9332","SHARE":"\u5171\u6709","WAITING":"\u5f85\u6a5f\u4e2d","WAITING_OPPONENT":"\u5bfe\u6226\u76f8\u624b\u3092\u5f85\u3063\u3066\u3044\u307e\u3059","DRAW":"\u5f15\u304d\u5206\u3051","YOU_WIN":"\u52dd\u3061\u307e\u3057\u305f","YOU_LOSE":"\u8ca0\u3051\u307e\u3057\u305f","RESTART":"\u30ea\u30b9\u30bf\u30fc\u30c8","A_HA":"\u3042\u3042\u3001\u79c1\u306f\u6700\u9ad8 !","PHEWW":"\u3075\u3045\u3001\u7d20\u6674\u3089\u3057\u3044\u8a66\u5408\u3060\u3063\u305f\uff01","DIAMOND":"\u30c0\u30a4\u30e4\u30e2\u30f3\u30c9","LB_IS_EMPTY":"\u30ea\u30fc\u30c0\u30fc\u30dc\u30fc\u30c9\u304c\u7a7a\u3067\u3059\uff01","YOU_RECEIVED_X_DIAMONDS":"{X} \u500b\u306e\u30c0\u30a4\u30e4\u30e2\u30f3\u30c9\\n\u3092\u53d7\u3051\u53d6\u308a\u307e\u3057\u305f","MISSION":"\u30df\u30c3\u30b7\u30e7\u30f3","REQUESTING":"\u30ea\u30af\u30a8\u30b9\u30c8\u3057\u3066\u3044\u307e\u3059...","MILESTONE":"\u30de\u30a4\u30eb\u30b9\u30c8\u30fc\u30f3","DAY":"\u65e5","BLITZ_MODE":"\u30d6\u30ea\u30c3\u30c4\u30e2\u30fc\u30c9","HIGH_SCORE":"\u30cf\u30a4\u30b9\u30b3\u30a2","TUTORIAL_COLORFUL_GEM":"\u30ec\u30a4\u30f3\u30dc\u30fc\u30b8\u30a7\u30e0\u306f\u5468\u56f2\u306e\u30b8\u30a7\u30e0\u3092\u6d88\u3059\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002","EXTEND_BLITZ_TIME":"\u6642\u9593\u5ef6\u9577","BLITZ_OUT_OF_TIME":"\u3059\u307f\u307e\u305b\u3093\u3002\u6642\u9593\u5207\u308c\u3067\u3059\uff01","JOIN_LB_SUCCESS":"\u30ea\u30fc\u30c0\u30fc\u30dc\u30fc\u30c9\\n\u306b\u53c2\u52a0\u3057\u307e\u3057\u305f","JOIN_LB_FAIL":"\u30ea\u30fc\u30c0\u30fc\u30dc\u30fc\u30c9\u306b\\n\u53c2\u52a0\u3067\u304d\u307e\u305b\u3093\u3067\u3057\u305f","LOGIN":"\u3042\u306a\u305f\u306e\u30b9\u30dd\u30c3\u30c8\\n\u3092\u4e3b\u5f35\u3059\u308b","COUNTDOWN_DAY_X":"{X}\u65e5\u3067\u7d42\u4e86\u3057\u307e\u3059","ENDING_SOON":"\u3082\u3046\u3059\u3050\u7d42\u4e86\u3057\u307e\u3059","LOADING_NO_DOTS":"\u8aad\u307f\u8fbc\u307f\u4e2d","BLITZ_HS_SHARE":"\u30d6\u30ea\u30c3\u30c4\u30e2\u30fc\u30c9\u3067{X}\u30b9\u30b3\u30a2\u3092\u9054\u6210\u3057\u307e\u3057\u305f\u3002\u3042\u306a\u305f\u306f\u3082\u3063\u3068\u9ad8\u3044\u30b9\u30b3\u30a2\u3092\u53d6\u308c\u307e\u3059\u304b\uff1f\u4e00\u7dd2\u306b\u30d7\u30ec\u30a4\u3057\u307e\u3057\u3087\u3046\u3002","NORMAL_HS_SHARE":"\u30af\u30e9\u30b7\u30c3\u30af\u30e2\u30fc\u30c9\u3067{X}\u30b9\u30b3\u30a2\u3092\u9054\u6210\u3057\u307e\u3057\u305f\u3002\u3042\u306a\u305f\u306f\u3082\u3063\u3068\u9ad8\u3044\u30b9\u30b3\u30a2\u3092\u53d6\u308c\u307e\u3059\u304b\uff1f\u4e00\u7dd2\u306b\u30d7\u30ec\u30a4\u3057\u307e\u3057\u3087\u3046\u3002"},"Texture":{"NO_THANK":"texts/no-thank-ja","COOL":"texts/cool-ja","GOOD":"texts/good-ja","GREAT":"texts/great-ja","EXCELLENT":"texts/excellent-ja","CONGRATULATION":"texts/congratulation-ja","LOGO":"title-logo-ja","DAILY_MISSION_COMPLETE":"texts/daily-mission-completed-ja"}}'),gi=JSON.parse('{"Text":{"PLAY_NOW":"MAINKAN SEKARANG","RANK":"PERINGKAT","DAILY":"HARIAN","GIFT":"HADIAH","SETTINGS":"PENGATURAN","GUIDE_1_TAP":"KETUK PADA DUA ATAU LEBIH PERMATA BERWARNA SAMA UNTUK MENGHANCURKANNYA","GUIDE_2_SCORE":"INI ADALAH SKORMU SEKARANG","GUIDE_3_TARGET_SCORE":"INI ADALAH SKOR TARGET UNTUK SETIAP LEVEL YANG DIPERLUKAN UNTUK MENYELESAIKAN LEVEL","LEVEL":"LEVEL","TARGET":"TARGET","REPLAY":"MAINKAN ULANG","PLAY_WITH_FRIENDS":"MAIN DENGAN TEMAN","PLAY":"MAIN","WITH_FRIENDS":"DENGAN TEMAN","HOME":"HALAMAN UTAMA","DAILY_REWARDS":"HADIAH HARIAN","DAY_X":"HARI {X}","CLAIM":"KLAIM","CLAIM_X2":"KLAIM X2","CANCELLED_AD":"MAAF, TIDAK ADA HADIAH!\\nKAMU MEMBATALKAN\\nIKLANNYA!","LOADING":"MEMULAI ...","WATCH_A_VIDEO":"TONTON VIDEO UNTUK\\nMENDAPATKAN {X} BERLIAN","GET_NOW":"DAPATKAN\\nSEKARANG!","NO_THANKS":"TIDAK, TERIMA KASIH!","LOADING_ADS":"MEMULAI IKLAN ...","NO_ADS":"TIDAK ADA IKLAN\\nUNTUK DITAMPILKAN!","DAILY_MISSIONS":"MISI HARIAN","DAILY_MISSION_COMPLETED":"MISI HARIAN SELESAI","GEM_BONUS":"BONUS PERMATA","PASS_X_LEVELS":"LEWATI {X} LEVEL","FINISH_X_BLITZ_GAME":"SELESAI {X} MODE KILAT","FINISH_X_GEM_BONUS":"SELESAIKAN {X} BONUS PERMATA","EAT_X_RED_GEMS":"PECAHKAN {X} PERMATA MERAH","EAT_X_GREEN_GEMS":"PECAHKAN {X} PERMATA HIJAU","EAT_X_BLUE_GEMS":"PECAHKAN {X} PERMATA BIRU","EAT_X_YELLOW_GEMS":"PECAHKAN {X} PERMATA KUNING","EAT_X_PURPLE_GEMS":"PECAHKAN {X} PERMATA UNGU","DESTROY_X_ICE":"HANCURKAN {X} BLOK ES","USE_X_COLORFUL":"PAKAI {X} PERMATA WARNA-WARNI","USE_HAMMER_TASK":"GUNAKAN ITEM PALU","USE_SHUFFLE_TASK":"GUNAKAN ITEM ACAK","USE_COLOR_TASK":"GUNAKAN RAMUAN WARNA","EAT_GEM_COMBO_X":"PECAHKAN {X} PERMATA SENTUH","EAT_X_COLOR_CHANGE":"PECAHKAN {X} PERMATA WARNA","COLLECT_300":"KUMPULKAN 300 BERLIAN","INVITE_2":"UNDANG 2 TEMAN","REACH_TOTAL":"CAPAI SKOR TOTAL","LEADERBOARDS":"PAPAN PERINGKAT","FRIENDS":"TEMAN","WORLD":"DUNIA","HAMMER":"PALU","USE_HAMMER":"GUNAKAN PALU UNTUK MENGHANCURKAN  PERMATA APA PUN","MAGIC_BOTTLE":"BOTOL AJAIB","USE_MAGIC":"GUNAKAN BOTOL AJAIB UNTUK\\nMENGUBAH WARNA SATU PERMATA","CONGRATULATIONS":"SELAMAT !","GOOD":"BAGUS !","EXCELLENT":"LUAR BIASA !","COOL":"KEREN !","GREAT":"HEBAT !","LOADING_INTER_AD":"Memulai iklan pengantara ...","LEVEL_FAILED":"LEVEL GAGAL","YOU_DID_NOT_REACH":"KAMU TIDAK MENCAPAI SKOR TARGET","YOUR_SCORE":"SKOR KAMU","BEST_SCORE":"SKOR TERBAIK","GLOBAL":"GLOBAL","JOIN":"GABUNG","CONTINUE":"Lanjut","TODAY_RECORD":"REKOR HARI INI","SHARE":"BAGIKAN","WAITING":"MENUNGGU","WAITING_OPPONENT":"MENUNGGU LAWAN","DRAW":"SERI","YOU_WIN":"KAMU MENANG","YOU_LOSE":"KAMU KALAH","RESTART":"MULAI ULANG","A_HA":"A ha, akulah yang terbaik!","PHEWW":"Fiuh, pertandingan hebat!","DIAMOND":"BERLIAN","LB_IS_EMPTY":"Papan peringkat kosong!","YOU_RECEIVED_X_DIAMONDS":"Kamu baru saja menerima\\n{100} berlian","MISSION":"Misi","REQUESTING":"meminta ...","MILESTONE":"TONGGAK PENCAPAIAN","DAY":"HARI","BLITZ_MODE":"MODE KILAT","HIGH_SCORE":"SKOR TERTINGGI","TUTORIAL_COLORFUL_GEM":"PERMATA PELANGI DAPAT MEMBERSIHKAN PERMATA DI SEKITARNYA.","EXTEND_BLITZ_TIME":"PERPANJANG WAKTU","BLITZ_OUT_OF_TIME":"MAAF. WAKTU HABIS!","JOIN_LB_SUCCESS":"ANDA TELAH BERGABUNG\\nDENGAN PAPAN PERINGKAT","JOIN_LB_FAIL":"GAGAL BERGABUNG\\nDENGAN PAPAN PERINGKAT","LOGIN":"KLAIM TEMPATMU","COUNTDOWN_DAY_X":"TERSISA {X} HARI","ENDING_SOON":"SEGERA BERAKHIR","LOADING_NO_DOTS":"MEMULAI","BLITZ_HS_SHARE":"Saya mencapai skor {X} dalam Mode Blitz. Bisakah kamu melakukannya lebih baik? Ayo bermain bersama saya.","NORMAL_HS_SHARE":"Saya mencapai skor {X} dalam Mode Klasik. Bisakah kamu melakukannya lebih baik? Ayo bermain bersama saya."},"Texture":{"NO_THANK":"texts/no-thank-id","COOL":"texts/cool-id","GOOD":"texts/good-id","GREAT":"texts/great-id","EXCELLENT":"texts/excellent-id","CONGRATULATION":"texts/congratulation-id","LOGO":"title-logo-id","DAILY_MISSION_COMPLETE":"texts/daily-mission-completed-id"}}'),vi={en:pi,ru:fi,ja:mi,id:gi},yi=vi,Ei=function(e){function t(){return e.apply(this,arguments)||this}return(0,o.Z)(t,e),t.prototype.configure=function(t){e.prototype.configure.call(this,(0,r.Z)({data:yi,locale:"en",upperCaseText:!1},t))},t}(di),Ai=Ei,Si=GameCore.Ads.Types,Ti=[Dt._.SCREEN_OPEN],bi=function(e){function t(t,n){var i;(i=e.call(this,"GoogleAnalytics",(0,r.Z)({},n),"#E35335")||this).game=void 0,i.trackingId=void 0,i.currentPath="/";var a=n.trackingId;i.game=t;var s=(GameCore.Configs.Analytics.GoogleAnalytics||{}).consoleLog;return i.selfLog=!!s,i.trackingId=a,i}(0,o.Z)(t,e);var n=t.prototype;return n.processEvent=function(e,t,n){if(!(hi()(Ti).call(Ti,e)>=0)){var i=this.formatEventName(e),a=t?(0,r.Z)({},t):{};a=n?(0,r.Z)({},a,{value:n}):a,a=(0,r.Z)({},a,{page_path:this.currentPath,send_to:"GA"}),gtag("event",i,a)}},n.processLevelStart=function(e,t,n){this.processEvent(Dt._.LEVEL_START,{level:e,score:t,level_name:n})},n.processLevelRescue=function(e,t,n){this.processEvent(Dt._.LEVEL_RESCUE,{level:e,score:t,level_name:n})},n.processLevelFail=function(e,t,n){this.processEvent(Dt._.LEVEL_END,{level:e,score:t,level_name:n,success:!1})},n.processLevelComplete=function(e,t,n){this.processEvent(Dt._.LEVEL_END,{level:e,score:t,level_name:n,success:!0})},n.processLoadPreRollAd=function(e,t){var n=this.getEdaType(Si.PRE_ROLL);this.processEvent(Dt._.AD_LOAD,{ad_type:n,screen_name:""+e,ad_service:""+t})},n.processShowPreRollAd=function(e,t){var n=this.getEdaType(Si.PRE_ROLL);this.processEvent(Dt._.AD_SHOW,{ad_type:n,screen_name:""+e,ad_service:""+t}),this.processEvent(Dt._.AD_IMPRESSION,{ad_format:n})},n.processLoadInterstitialAd=function(e,t){var n=this.getEdaType(Si.INTERSTITIAL);this.processEvent(Dt._.AD_LOAD,{ad_type:n,screen_name:""+e,ad_service:""+t})},n.processShowInterstitialAd=function(e,t){var n=this.getEdaType(Si.INTERSTITIAL);this.processEvent(Dt._.AD_SHOW,{ad_type:n,screen_name:""+e,ad_service:""+t}),this.processEvent(Dt._.AD_IMPRESSION,{ad_format:"Interstitial"})},n.processLoadRewardedVideoAd=function(e,t){var n=this.getEdaType(Si.REWARDED);this.processEvent(Dt._.AD_LOAD,{ad_type:n,screen_name:""+e,ad_service:""+t})},n.processShowRewardedVideoAd=function(e,t){var n=this.getEdaType(Si.REWARDED);this.processEvent(Dt._.AD_SHOW,{ad_type:n,screen_name:""+e,ad_service:""+t}),this.processEvent(Dt._.AD_IMPRESSION,{ad_format:"Rewarded"})},n.processShowBannerAd=function(e,t,n){var i=this.getEdaType(Si.BANNER);this.processEvent(Dt._.AD_SHOW,{ad_type:i,banner_position:""+e,screen_name:""+t,ad_service:""+n})},n.processLoadAdFail=function(e){var t=e.type,n=e.placement,i=e.adService,a=this.getEdaType(t);this.processEvent(Dt._.AD_LOAD_FAILED,{ad_type:a,screen_name:""+n,ad_service:""+i})},n.processShowAdFail=function(e){var t=e.type,n=e.placement,i=e.adService,a=e.bannerPosition,r={ad_type:this.getEdaType(t),screen_name:""+n,ad_service:""+i};t===Si.BANNER&&(r.banner_position=""+a),this.processEvent(Dt._.AD_SHOW_FAILED,r)},n.processFinishDailyTask=function(e,t){this.processEvent(Dt._.FINISH_DAILY_TASK,{task_type:e,task_value:""+t})},n.processPageView=function(e){var t=this.getContextGameMode(),n="/"+t+"/"+e;this.currentPath=n,document.title=this.formatPageTitle(t,e),gtag("event","page_view",{page_path:this.currentPath,send_to:["GA",this.trackingId]})},n.getContextGameMode=function(){return this.game.storage.getStorageData("context","contextGameMode")},n.formatEventName=function(e){return e.toLowerCase().replace(/:/g,"_")},n.formatPageTitle=function(e,t){return this.toUpperCamelCaseWithSpace(e)+"::"+this.toUpperCamelCaseWithSpace(t)},n.toUpperCamelCaseWithSpace=function(e){var t=e.replace(/[-_\s.]+(.)?/g,(function(e,t){return t?" "+t.toUpperCase():""}));return t.substr(0,1).toUpperCase()+t.substr(1)},n.getEdaType=function(e){switch(e){case Si.INTERSTITIAL:return"interstitial";case Si.PRE_ROLL:return"pre_roll";case Si.REWARDED:return"rewarded_video";case Si.BANNER:return"banner";default:return"unknown"}},t}(GameCore.Analytics.BaseAnalytics),Ii=bi,wi="G-ZERRF1MM3Q",Ci="null",xi=function(e){function t(){for(var t,n,a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=e.call.apply(e,O()(t=[this]).call(t,r))||this).startGame=(0,s.Z)(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n.auth.requestToken();case 3:return e.next=5,n.stateStorage.syncStore();case 5:return n.configureSentry(),n.configureRollbar(),e.next=9,n.detectGameMode();case 9:n.initGoogleAnalytics(),n.analytics.event(Dt._.LOAD_START),n.scene.launch(ui.C.GLOBAL_SCENE),n.scene.start(ui.C.LOAD_SCENE),n.analytics.pageview(ui.C.LOAD_SCENE),e.next=19;break;case 16:e.prev=16,e.t0=e.catch(0),(0,i.tO)(e.t0);case 19:return e.prev=19,n.facebook.progressLoading.finishLoadingProgressFbBootScene(),n.scene.sleep(ui.C.BOOT_SCENE),e.finish(19);case 23:case"end":return e.stop()}}),e,null,[[0,16,19,23]])}))),n}(0,o.Z)(t,e);var n=t.prototype;return n.create=function(){this.facebook.progressLoading.loadingProgressFbBootScene(),this.startGame()},n.configureSentry=function(){var e=this.player.getPlayer();(0,i.Tv)({id:e.playerId,username:e.name})},n.configureRollbar=function(){if(this.rollbar){var e=this.player.getPlayer();this.rollbar.configure({payload:{person:{id:e.playerId,name:e.name}}})}},n.detectGameMode=function(){var e=(0,s.Z)(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.gameContext.detectContextSessionType();case 2:this.gameContext.detectContextGameMode();case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.initGoogleAnalytics=function(){var e=this.player.getPlayerId();this.analytics.add(new Ii(this.game,{userId:e,trackingId:Ci,measuringId:wi,version:"21"}))},t}(Phaser.Scene),Oi=xi,_i=n(123),Ri=n(427),Pi=n(432),ki={PASS_LEVELS:{ID:"pass-levels",EVENTS:{PASS_LEVEL:"pass-level"}},PLAY_BLITZ:{ID:"play-blitz",EVENTS:{PLAY_BLITZ:"play-blitz"}},FINISH_GEM_BONUS:{ID:"finish-gem-bonus",EVENTS:{FINISH_GEM_BONUS:"finish-mission"}},EAT_GEMS_RED:{ID:"eat-gems-red",EVENTS:{EAT_GEMS_RED:"eat-gems-red"}},EAT_GEMS_GREEN:{ID:"eat-gems-green",EVENTS:{EAT_GEMS_GREEN:"eat-gems-green"}},EAT_GEMS_BLUE:{ID:"eat-gems-blue",EVENTS:{EAT_GEMS_BLUE:"eat-gems-blue"}},EAT_GEMS_YELLOW:{ID:"eat-gems-yellow",EVENTS:{EAT_GEMS_YELLOW:"eat-gems-yellow"}},EAT_GEMS_PINK:{ID:"eat-gems-pink",EVENTS:{EAT_GEMS_PINK:"eat-gems-pink"}},DESTROY_ICE:{ID:"destroy-ice",EVENTS:{DESTROY_ICE:"destroy-ice"}},USE_COLORFUL:{ID:"use-colorful",EVENTS:{USE_COLORFUL:"use-colorful"}},EAT_COLOR_CHANGE:{ID:"eat-color-change",EVENTS:{EAT_COLOR_CHANGE:"eat-color-change"}},EAT_BIG_GEM_COMBO:{ID:"eat-big-gem-combo",EVENTS:{EAT_BIG_GEM_COMBO:"eat-big-gem-combo"}},USE_SHUFFLE:{ID:"use-shuffle",EVENTS:{USE_SHUFFLE:"use-shuffle"}},USE_HAMMER:{ID:"use-hammer",EVENTS:{USE_HAMMER:"use-hammer"}},USE_COLOR_POTION:{ID:"use-color-potion",EVENTS:{USE_COLOR_POTION:"use-color-potion"}},COLLECT_DIAMONDS:{ID:"collect-diamonds",EVENTS:{COLLECT_DIAMONDS:"collect-diamonds"}},REACH_SCORE:{ID:"reach-score",EVENTS:{ADD_SCORE:"add-score"}},EVENTS:{TASKS_RESET:"tasks-reset",NOTICE_UPDATE:"notice-update",TASK_FINISHED:"task-finished"}},Mi=n(406),Di=n.n(Mi),Ni=new(Di()),Li=Ni,Bi=n(440),Gi=n(21),Ui=n(32),Fi=n(442),Zi=Ui.Z.EFFECTS,Hi=Zi.KEY,Yi=Zi.FRAME,zi=Fi.Z.FIREWORKS_SMALL,Vi=Fi.Z.FIREWORKS_BIG,Wi=Fi.Z.FIREWORKS_SOAR,Ki=function(e){function t(t){var n;return(n=e.call(this,t,0,0)||this).soar=void 0,n.fireworks1=void 0,n.fireworks2=void 0,n.colors={red:16462401,blue:1863148,pink:15271420,green:183084,yellow:16631323},n.runSoarExplosiveAnimation=function(){n.setAlpha(0),n.setScale(0),n.soar.setOrigin(.5,.5),n.soar.setFrame(Yi.FX_FIREWORKS_SOAR_CIRCLE),n.scene.tweens.add({targets:[(0,Gi.Z)(n)],duration:200,ease:Phaser.Math.Easing.Cubic.Out,props:{alpha:{from:0,to:1},scale:{from:0,to:Phaser.Math.RND.between(.8,1)/n.scene.world.getZoomRatio()}},onComplete:n.runFireworkExplosiveAnimation})},n.runFireworkExplosiveAnimation=function(){n.fireworks1.setAlpha(0),n.fireworks1.setScale(.1),n.fireworks1.setVisible(!0),n.scene.tweens.add({targets:[n.fireworks1],duration:600,ease:Phaser.Math.Easing.Sine.Out,props:{alpha:{from:0,to:1,duration:300},scale:{from:.1,to:Phaser.Math.RND.between(.6,.8)}}}),n.fireworks2.setVisible(!0),n.fireworks2.setScale(.1),n.scene.tweens.add({targets:[n.fireworks2],duration:800,ease:Phaser.Math.Easing.Cubic.Out,props:{scale:{from:.1,to:Phaser.Math.RND.between(.5,.6)}}}),n.runExistAnimation()},n.runExistAnimation=function(){n.scene.tweens.add({targets:[(0,Gi.Z)(n)],duration:600,delay:400,ease:Phaser.Math.Easing.Cubic.Out,props:{alpha:0},onComplete:function(){n.setAlpha(1),n.soar.setVisible(!1),n.fireworks1.setVisible(!1),n.fireworks2.setVisible(!1),n.kill()}})},n.kill(),n.createObjects(),n.setDepth(_i.Z.FIREWORKS),n.scene.add.existing((0,Gi.Z)(n)),n}(0,o.Z)(t,e);var n=t.prototype;return n.createObjects=function(){this.soar=this.scene.make.image({key:Hi,frame:Yi.FX_FIREWORKS_SOAR_LINE,visible:!1}),this.fireworks1=this.scene.make.image({key:Hi,frame:Yi.FX_FIREWORKS_BIG_0,visible:!1}),this.fireworks2=this.scene.make.image({key:Hi,frame:Yi.FX_FIREWORKS_BIG_1,visible:!1}),this.add([this.soar,this.fireworks2,this.fireworks1])},n.playExplosiveSound=function(){var e,t=Phaser.Math.RND.between(0,100);e=t<30?Wi:t<70?Vi:zi,this.scene.audio.playSound(e)},n.randomColor=function(){var e=on()(this.colors),t=Phaser.Math.RND.between(0,e.length-1),n=e[t];this.fireworks1.setTint(n),n=e[t=Phaser.Math.RND.between(0,e.length-1)],this.fireworks2.setAlpha(.5),this.fireworks2.setTint(n)},n.fire=function(e,t,n){this.setVisible(!0),this.setPosition(e,t),this.runFireworkAnimation(n),this.playExplosiveSound()},n.runFireworkAnimation=function(e){if(this.scene){var t=Phaser.Math.RND.between(-120,120);this.setAlpha(.6),this.soar.setVisible(!0),this.soar.setOrigin(.5,.1),this.soar.setFrame(Yi.FX_FIREWORKS_SOAR_LINE),this.scene.tweens.add({targets:[this],duration:600,ease:Phaser.Math.Easing.Sine.Out,props:{y:e+t,alpha:{from:.6,to:.2},scale:{from:.1,to:1/this.scene.world.getZoomRatio()}},onComplete:this.runSoarExplosiveAnimation})}},t}(Phaser.GameObjects.Container),ji=Ki,Xi=Ui.Z.DEFAULT,qi=Xi.KEY,Ji=Xi.FRAME,Qi=function(e){function t(t,n){var i;return(i=e.call(this,t,0,0,qi,Ji.ICON_DIAMOND)||this).onUpdate=void 0,i.onComplete=void 0,i.positions=void 0,i.visibleAnimation=void 0,i.eatAnimation=void 0,i.setWorldSize(25,24),i.positions=n,i.setVisible(!1),i.setDepth(_i.Z.PRIORITY),i.createAnimation(),i.scene.add.existing((0,Gi.Z)(i)),i}(0,o.Z)(t,e);var n=t.prototype;return n.createAnimation=function(){var e=this,t=this.positions,n=t.from,i=t.to,a=1/GameCore.Utils.Image.getImageScale();this.visibleAnimation=this.scene.add.tween({targets:this,duration:1e3,paused:!0,props:{alpha:{duration:500,ease:Phaser.Math.Easing.Cubic.Out,value:{from:0,to:1}},x:{getStart:function(){return n.x}},y:{ease:Phaser.Math.Easing.Bounce.Out,value:{getStart:function(){return n.y},getEnd:function(){return n.y+100}}},scale:{duration:400,ease:Phaser.Math.Easing.Cubic.Out,value:{from:2*a,to:a}}},onStart:function(){e.setVisible(!0),e.scene.audio.playSound(Fi.Z.DIAMONDS_EAT)},onComplete:function(){e.eatAnimation.play()}}),this.eatAnimation=this.scene.add.tween({targets:this,duration:500,delay:50,ease:"Circ.easeOut",paused:!0,props:{x:{getEnd:function(){return i.x}},y:{getEnd:function(){return i.y}}},onUpdate:function(){"function"===typeof e.onUpdate&&e.onUpdate()},onComplete:function(){e.destroy(),"function"===typeof e.onComplete&&e.onComplete()}})},n.run=function(){this.visibleAnimation.play()},t}(Phaser.GameObjects.Image),$i=Qi,ea=function(){function e(e){this.scene=void 0,this.group=void 0,this.scene=e,this.createGroup()}var t=e.prototype;return t.getAll=function(){return this.group.getChildren()},t.createGroup=function(){this.group=this.scene.add.group()},e}(),ta=ea,na=n(38),ia=n(184),aa=n.n(ia),ra=aa()(.55,.47,.43,.91),sa=ra,oa={targets:[],yoyo:!0,repeat:-1,duration:600,repeatDelay:50,ease:sa,easeParams:[0,.9],props:{scale:{from:1,to:1.2}}},ca=function(e){function t(t){return e.call(this,oa,t)||this}return(0,o.Z)(t,e),t}(na.Z),ua=ca,la=n(613),ha=n(444),da=n(438),pa=n(439),fa=n(437),ma=n(607),ga=n(443),va=Ui.Z.TUTORIAL,ya=va.KEY,Ea=va.FRAME,Aa=function(e){function t(t){var n;return(n=e.call(this,t)||this).hand=void 0,n.name="TapTutorialHand",n.addHand(),n.scene.add.existing((0,Gi.Z)(n)),n}(0,o.Z)(t,e);var n=t.prototype;return n.addHand=function(){this.hand=this.scene.make.image({key:ya,frame:Ea.HAND,origin:{x:.5,y:.5}}),this.hand.setWorldSize(65.5,55.5),this.add(this.hand)},n.playAnimation=function(e,t){var n,i=this;void 0===e&&(e=0),void 0===t&&(t=800);var a=1/GameCore.Utils.Image.getImageScale();this.hand.angle=30,null==(n=this.scene)||n.tweens.add({delay:e,targets:[this.hand],ease:Phaser.Math.Easing.Cubic.Out,props:{alpha:{start:0,value:1,duration:200},scale:{duration:400,start:1.6*a,to:1.2*a},angle:{from:30,value:0,duration:400}},onComplete:function(){var e;null==(e=i.scene)||e.tweens.add({targets:[i.hand],delay:200,duration:200,ease:Phaser.Math.Easing.Cubic.Out,props:{alpha:0},onComplete:function(){i.hand.x=0,i.hand.y=0,i.hand.scale=a,i.playAnimation(t)}})}})},n.stopAnimation=function(){this.scene.tweens.killTweensOf(this.hand)},n.preDestroy=function(){this.scene.tweens.killTweensOf(this.hand)},t}(Phaser.GameObjects.Container),Sa=n(197),Ta=n(609),ba=n(615),Ia=n(614),wa=n(198),Ca=GameCore.Configs.Network,xa=Ui.Z.DEFAULT,Oa=xa.KEY,_a=xa.FRAME,Ra=function(e){function t(t,n,i,a){var r;return(r=e.call(this,t,n,i,a)||this).rewardValue=void 0,r.onReward=void 0,r.hand=void 0,r.viewAdButton=void 0,r.skipButton=void 0,r.giftIcon=void 0,r.giftIconWhite=void 0,r.currencyIcon=void 0,r.currencyText=void 0,r.popupContents=void 0,r.cometTwinkle=void 0,r.starTwinkleUp=void 0,r.sparksExplosive=void 0,r.popupFadeOutAnimation=void 0,r.backgroundFadeInAnimation=void 0,r.contentShowUpAnimation=void 0,r.giftEntrancesAnimation=void 0,r.giftAttentionAnimation=void 0,r.iconAttentionAnimation=void 0,r.giftShakeAnimation=void 0,r.giftOpenAnimation=void 0,r.adsTimer=void 0,r.open=function(t){e.prototype.open.call((0,Gi.Z)(r),t);var n=r.getData("awardDiamonds");r.setRewardValue(n),r.runOpenAnimation()},r.handleClosePopup=function(){r.runCloseAnimation()},r.handleShowRewardedVideoAd=(0,s.Z)(h().mark((function e(){var t,n,i,a;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.scene,n=t.audio,i=t.game,e.prev=1,r.viewAdButton.setDisabled(!0),i.globalScene.screen.open(Pi.o4.NOTIFY_SCREEN,{message:r.scene.lang.Text.LOADING_ADS,duration:0,loading:!0}),n.pauseMusic(),n.muteAll(),e.next=8,new(u())((function(e,t){var n;null==(n=r.adsTimer)||n.remove(),r.adsTimer=r.scene.time.delayedCall(Ca.Timeout,t),r.scene.ads.getAdStatus(GameCore.Ads.Types.REWARDED)===GameCore.Ads.Status.LOADING?r.scene.ads.events.once(GameCore.Ads.Events.LOADED,e):r.scene.ads.preloadRewardedVideoAsync().then(e).catch(t)}));case 8:return e.next=10,r.scene.ads.showRewardedVideoAsync();case 10:i.globalScene.screen.close(Pi.o4.NOTIFY_SCREEN),r.starTwinkleUp.stop(),r.scene.audio.playSound(Fi.Z.DAILY_REWARD),r.popupContents.killGroup(),r.runTheGiftEntrancesAnimation(0,1500),e.next=24;break;case 17:if(e.prev=17,e.t0=e.catch(1),!(e.t0 instanceof Object&&GameCore.Utils.Object.hasOwn(e.t0,"code"))){e.next=23;break}if("USER_INPUT"!==e.t0.code){e.next=23;break}return r.showNotifySkipAds(),e.abrupt("return");case 23:r.showNotifyNoAds();case 24:return e.prev=24,null==(a=r.adsTimer)||a.destroy(),n.unmuteAll(),n.playMusic(),r.scene.ads.preloadRewardedVideoAsync().catch((function(){})),r.viewAdButton.setDisabled(!1),e.finish(24);case 31:case"end":return e.stop()}}),e,null,[[1,17,24,31]])}))),r.handleTheGiftClick=function(){r.setTheGiftClickable(!1),r.logButtonEvent("OpenGift"),r.hand.kill(),r.giftIconWhite.revive(),r.scene.tweens.killTweensOf(r.giftIcon),Phaser.Display.Align.In.Center(r.giftIconWhite,r.giftIcon),r.scene.audio.playSound(Fi.Z.GIFT_CHARGE),r.runShakeTheGift(),r.runOpenTheGift()},r.showNotifyNoAds=function(e){e&&e.name!==Pi.o4.NOTIFY_SCREEN||r.scene.game.globalScene.screen.open(Pi.o4.NOTIFY_SCREEN,{message:r.scene.lang.Text.NO_ADS,duration:1200,loading:!1})},r.showNotifySkipAds=function(){r.scene.game.globalScene.screen.open(Pi.o4.NOTIFY_SCREEN,{message:r.scene.lang.Text.CANCELLED_AD,duration:1500,loading:!1})},r.runCloseAnimation=function(){r.runExitsAnimation(0,200)},r.setDepth(Pi.Ks.POPUP),r.background.setAlpha(.8),r.createViewAdsButton(),r.createSkipButton(),r.createCurrencyIcon(),r.createCurrencyText(),r.createEffects(),r.createGiftIcon(),r.createHand(),r.createContentsGroup(),r}(0,o.Z)(t,e);var n=t.prototype;return n.setTheGiftClickable=function(e){e?this.giftIcon.setInteractive():this.giftIcon.disableInteractive()},n.logButtonEvent=function(e){var t=this.getScreenName();this.scene.analytics.event(Dt._.BUTTON_CLICK,{button_name:e,screen_name:t})},n.runOpenAnimation=function(){this.revive(),this.hand.kill(),this.popupContents.reviveGroup(),this.starTwinkleUp.stop(),this.runBackgroundEntrancesAnimation(0,200),this.runPopupContentEntrancesAnimation(100,400),this.runLogoAttentionAnimation(500)},n.runBackgroundEntrancesAnimation=function(e,t){if(!this.backgroundFadeInAnimation){var n=this.scene.game.globalScene;this.backgroundFadeInAnimation=new da.Z({targets:[this.background],delay:e,duration:t,props:{alpha:{start:0,to:.8}},onUpdate:function(e,t){n instanceof wa.Z&&n.requestBackgroundMaskUpdate(Pi.o4.REWARD_SCREEN,t.alpha)}})}this.backgroundFadeInAnimation.play()},n.runPopupContentEntrancesAnimation=function(e,t){var n;null==(n=this.contentShowUpAnimation)||n.remove(),this.contentShowUpAnimation=new fa.Z({targets:this.popupContents.getChildren(),duration:t,delay:this.scene.tweens.stagger(100,{start:e}),props:{scale:{getStart:function(e){return e.scale-.3},getEnd:function(e){return e.scale}},alpha:{start:0,from:0,to:1}}}),this.contentShowUpAnimation.play()},n.runLogoAttentionAnimation=function(e){var t=this.currencyIcon,n=t.x,i=t.y,a=t.width,r=t.height;this.starTwinkleUp.run(1,n,i,a,r),this.iconAttentionAnimation||(this.iconAttentionAnimation=new ua({targets:[this.currencyIcon],delay:e,props:{scale:"+=0.05"}})),this.iconAttentionAnimation.play()},n.runTheGiftEntrancesAnimation=function(e,t){var n,i=this;this.giftIcon.revive(),this.giftIcon.setAlpha(1),Phaser.Display.Align.In.TopRight(this.giftIcon,this.zone),null==(n=this.giftEntrancesAnimation)||n.remove();var a=this.giftIcon,r=a.x,s=a.y,o=this.currencyText,c={x:r,y:s},u={x:o.x,y:o.y},l=1/GameCore.Utils.Image.getImageScale();this.giftEntrancesAnimation=new ma.Z({targets:[this.giftIcon],delay:e,duration:t,curve:[[c.x,c.y],[c.x-80,c.y+80],[u.x,u.y]],props:{scale:{start:.5*l,to:l},angle:{start:20,to:0}},onCurveUpdate:function(e){var t=e.x+Phaser.Math.RND.between(-40,40),n=e.y+Phaser.Math.RND.between(-40,40);i.cometTwinkle.explode(1,t,n)},onComplete:function(){i.scene.audio.playSound(Fi.Z.GIFT_REVEAL);i.starTwinkleUp.setScale(1.5);var e=i.giftIcon,t=e.x,n=e.y,a=e.width,r=e.height;i.starTwinkleUp.run(1,t,n,a/1.5,r/1.5),i.moveTo(i.starTwinkleUp,i.length-1),i.runTheGiftAttentionAnimation()}}),this.giftEntrancesAnimation.play()},n.runTheGiftAttentionAnimation=function(){this.giftAttentionAnimation||(this.giftAttentionAnimation=new ua({targets:[this.giftIcon],props:{scale:"+=0.05"}})),this.hand.revive(),this.hand.playAnimation(),Phaser.Display.Align.In.Center(this.hand,this.giftIcon,20,20),this.setTheGiftClickable(!0),this.giftAttentionAnimation.play()},n.runShakeTheGift=function(){this.giftShakeAnimation||(this.giftShakeAnimation=new la.Z({targets:[this.giftIcon,this.giftIconWhite],duration:22})),this.giftShakeAnimation.play()},n.runOpenTheGift=function(){var e=this;if(!this.giftOpenAnimation){var t=1/GameCore.Utils.Image.getImageScale();this.giftOpenAnimation=new ha.Z({targets:[this.giftIcon,this.giftIconWhite],duration:1500,props:{alpha:0,scale:t},onUpdate:function(){e.giftIconWhite.setAlpha(1)},onComplete:function(){e.giftShakeAnimation.stop(),e.giftIcon.kill(),e.giftIconWhite.kill(),e.sparksExplosive.explode(100,e.giftIcon.x,e.giftIcon.y,230),e.scene.audio.playSound(Fi.Z.GIFT_EXPLODE),e.onReward(e.rewardValue),e.scene.time.delayedCall(500,e.runCloseAnimation)}})}this.giftOpenAnimation.play()},n.runExitsAnimation=function(e,t){var n=this;if(!this.popupFadeOutAnimation){var i=this.scene.game.globalScene;this.popupFadeOutAnimation=new pa.Z({targets:this.getAll(),delay:e,duration:t,props:{alpha:{start:.8,to:0}},onComplete:function(){n.scene.screen.close(n.name)},onUpdate:function(){i instanceof wa.Z&&i.requestBackgroundMaskUpdate(Pi.o4.REWARD_SCREEN,n.background.alpha*n.alpha)}})}this.popupFadeOutAnimation.play()},n.createHand=function(){this.hand=new Aa(this.scene),this.add(this.hand)},n.createContentsGroup=function(){this.popupContents=this.scene.make.group({}),this.popupContents.addMultiple([this.currencyIcon,this.currencyText,this.viewAdButton,this.skipButton])},n.createCurrencyIcon=function(){this.currencyIcon=this.scene.add.image(0,0,Oa,_a.LOGO_GIFT_ADS),this.currencyIcon.setWorldSize(150,150),Phaser.Display.Align.In.Center(this.currencyIcon,this.zone,0,-80),this.add(this.currencyIcon)},n.createCurrencyText=function(){this.currencyText=this.scene.make.bitmapText({size:this.scene.fontSize(22),font:Sa.Z.PRIMARY.KEY,origin:{x:.5,y:.5}}),this.currencyText.setCenterAlign(),this.setRewardValue(0),this.add(this.currencyText)},n.setRewardValue=function(e){this.rewardValue=e,this.currencyText.setText(this.scene.lang.getText({key:"WATCH_A_VIDEO",variables:[e]})),Phaser.Display.Align.In.BottomCenter(this.currencyText,this.currencyIcon,0,60)},n.createViewAdsButton=function(){this.viewAdButton=new ga.Z(this.scene,Oa,_a.BUTTON_BLUE_LONG,232,69),this.viewAdButton.setName("ViewAd"),this.viewAdButton.onClick=this.handleShowRewardedVideoAd;var e=this.scene.add.image(0,0,Oa,_a.ICON_ADS);e.setWorldSize(37,34),Phaser.Display.Align.In.Center(e,this.viewAdButton);var t=70,n=30;if("id"===this.scene.lang.getCurrentLanguage())t=50,n=18;e.setX(this.viewAdButton.x-t),this.viewAdButton.add(e);var i=this.scene.lang.getCurrentLanguage(),a=this.scene.make.bitmapText({size:this.scene.fontSize(n),text:this.scene.lang.Text.GET_NOW,font:Sa.Z.PRIMARY.KEY}),r="id"===i?30:15;Phaser.Display.Align.In.Center(a,this.viewAdButton,r,0),this.viewAdButton.add(a),Phaser.Display.Align.In.Center(this.viewAdButton,this.zone,0,100),this.add(this.viewAdButton)},n.createSkipButton=function(){var e=this.scene.lang.getCurrentLanguage(),t="ja"===e?125:"id"===e?161.5:129,n="ja"===e?31:"id"===e?16.5:25;this.skipButton=new ga.Z(this.scene,Oa,this.scene.lang.Texture.NO_THANK,t,n),this.skipButton.setName("NoThanks"),this.skipButton.onClick=this.handleClosePopup,Phaser.Display.Align.In.BottomCenter(this.skipButton,this.viewAdButton,0,50),this.add(this.skipButton)},n.createGiftIcon=function(){this.giftIconWhite=this.scene.make.image({key:Oa,frame:_a.LOGO_GIFT_WHITE,visible:!1}),this.giftIconWhite.setWorldSize(150,150),this.giftIconWhite.setDepth(_i.Z.PRIORITY),this.add(this.giftIconWhite),this.giftIcon=this.scene.make.image({key:Oa,frame:_a.LOGO_GIFT,visible:!1}),this.giftIcon.setInteractive({useHandCursor:!0}),this.giftIcon.setWorldSize(150,150),this.giftIcon.on(Phaser.Input.Events.GAMEOBJECT_POINTER_DOWN,this.handleTheGiftClick),this.setTheGiftClickable(!1),this.add(this.giftIcon)},n.createEffects=function(){this.cometTwinkle=new Ta.Z(this.scene),this.starTwinkleUp=new Ia.Z(this.scene),this.sparksExplosive=new ba.Z(this.scene),this.add([this.cometTwinkle,this.starTwinkleUp,this.sparksExplosive])},t}(GameCore.Screen),Pa=Ra,ka=function(e){function t(t,n,i,a,r){var s;return(s=e.call(this,t,n,i)||this).label=void 0,a&&r&&s.button.setWorldSize(a,r),s.createLabel(),s}(0,o.Z)(t,e);var n=t.prototype;return n.setLabel=function(e){this.label.setText(e)},n.createLabel=function(){this.label=this.scene.make.bitmapText({font:Sa.Z.PRIMARY.KEY,size:this.scene.fontSize(18),origin:{x:.5,y:.5}}),this.label.setAlpha(.45),this.add(this.label),Phaser.Display.Align.In.BottomCenter(this.label,this.button,0,12)},t}(ga.Z),Ma=(0,ue.P1)([function(e){var t;return null==(t=e[Tn])?void 0:t.tasks}],(function(e){return e})),Da=(0,ue.P1)([function(e){var t;return null==(t=e[Tn])?void 0:t.process}],(function(e){return e})),Na=(0,ue.P1)([function(e){var t;return null==(t=e[Tn])?void 0:t.isRequesting}],(function(e){return e})),La=(0,ue.P1)([function(e){var t;return null==(t=e[Tn])?void 0:t.isNotice}],(function(e){return e})),Ba=Ui.Z.DEFAULT,Ga=Ba.KEY,Ua=Ba.FRAME,Fa=function(e){function t(t){var n;return(n=e.call(this,t,Ga,Ua.ICON_DAILY,60,60)||this).noticeIcon=void 0,n.checkNotice=function(){var e=n.scene.stateStorage.getState(),t=La(e)||!1;n.noticeIcon.setVisible(t)},n.setName(n.scene.lang.Text.DAILY),n.useSound=!1,n.setLabel(n.scene.lang.Text.DAILY),n.drawNoticeIcon(),n}return(0,o.Z)(t,e),t.prototype.drawNoticeIcon=function(){this.noticeIcon=this.scene.make.image({key:Ga,frame:Ua.ICON_DOT}),this.noticeIcon.setWorldSize(15,16),this.add(this.noticeIcon),Phaser.Display.Align.In.TopRight(this.noticeIcon,this.button,4,4)},t}(ka),Za=Fa,Ha=Ui.Z.DEFAULT,Ya=Ha.KEY,za=Ha.FRAME,Va=function(e){function t(t){var n;return(n=e.call(this,t,Ya,za.ICON_GIFT,60,60)||this).checkUseable=function(){},n.setName(n.scene.lang.Text.GIFT),n.setLabel(n.scene.lang.Text.GIFT),n}return(0,o.Z)(t,e),t}(ka),Wa=Ui.Z.DEFAULT,Ka=Wa.KEY,ja=Wa.FRAME,Xa=function(e){function t(t){var n;return(n=e.call(this,t,Ka,ja.ICON_SETTING,60,60)||this).setName("Setting"),n.useSound=!1,n.setLabel(n.scene.lang.Text.SETTINGS),n}return(0,o.Z)(t,e),t}(ka),qa=Ui.Z.DEFAULT,Ja=qa.KEY,Qa=qa.FRAME,$a=function(e){function t(t){var n;return(n=e.call(this,t,Ja,Qa.ICON_RANK,60,60)||this).setName("Rank"),n.setLabel(n.scene.lang.Text.RANK),n}return(0,o.Z)(t,e),t}(ka),er=Ui.Z.DEFAULT,tr=er.KEY,nr=er.FRAME,ir=function(e){function t(t){var n;return(n=e.call(this,t)||this).rankIcon=void 0,n.giftIcon=void 0,n.dailyIcon=void 0,n.settingIcon=void 0,n.buttons=void 0,n.lines=void 0,n.background=void 0,n.createBackground(),n.createLines(),n.createButtons(),n.createHorizontalLine(),n.alignLines(),n.alignButtons(),n.scene.add.existing((0,Gi.Z)(n)),n}(0,o.Z)(t,e);var n=t.prototype;return n.alignLines=function(){var e=-(this.lines.getLength()-1)/2*95;this.lines.setX(e,95)},n.alignButtons=function(){var e=-(this.buttons.getLength()-1)/2*95;this.buttons.setX(e,95),this.buttons.setY(-55)},n.createBackground=function(){this.background=this.scene.make.image({key:tr,frame:nr.BOTTOM_BG,origin:{x:.5,y:1}}),this.background.setY(86),this.background.setDepth(_i.Z.BACKGROUND),this.background.setWorldSize(375,171),this.add(this.background)},n.createLines=function(){this.lines=this.scene.make.group({key:tr,frame:nr.BOTTOM_LINE,repeat:2,setOrigin:{x:.5,y:1}});var e=this.lines.getChildren();e.forEach((function(e){e.setWorldSize(1,85)})),this.add(e)},n.createHorizontalLine=function(){var e=this.scene.make.image({key:tr,frame:nr.BOTTOM_LINE,origin:{x:.5,y:1}});e.setWorldSize(375,1),this.add(e)},n.createButtons=function(){this.buttons=this.scene.add.group(),this.createRankButton(),this.createDailyButton(),this.createGiftButton(),this.createSettingsButton()},n.createRankButton=function(){this.rankIcon=new $a(this.scene),this.add(this.rankIcon),this.buttons.add(this.rankIcon)},n.createDailyButton=function(){this.dailyIcon=new Za(this.scene),this.add(this.dailyIcon),this.buttons.add(this.dailyIcon)},n.createGiftButton=function(){this.giftIcon=new Va(this.scene),this.add(this.giftIcon),this.buttons.add(this.giftIcon)},n.createSettingsButton=function(){this.settingIcon=new Xa(this.scene),this.add(this.settingIcon),this.buttons.add(this.settingIcon)},t}(Phaser.GameObjects.Container),ar=function(e){function t(t,n,i){var a;return(a=e.call(this,t)||this).maxValue=void 0,a.key=void 0,a.frames=void 0,a.bar=void 0,a.icon=void 0,a.button=void 0,a.value=void 0,a.key=n,a.frames=i,a.maxValue=1e4,a.createBar(),a.createValue(),a.createIcon(),a.createButton(),a.alignObject(),a.scene.add.existing((0,Gi.Z)(a)),a}(0,o.Z)(t,e);var n=t.prototype;return n.setValue=function(e){var t=""+e;e>=this.maxValue&&(t=Math.floor(e/1e3)+"k"),this.value.setText(t)},n.alignObject=function(){var e=this.bar,t=e.width,n=e.height;this.setSize(t,n),Phaser.Display.Align.In.Center(this.value,this.bar,2,-2),Phaser.Display.Align.In.LeftCenter(this.icon,this.bar),this.button&&Phaser.Display.Align.In.RightCenter(this.button,this.bar)},n.createBar=function(){this.bar=this.scene.add.image(0,0,this.key,this.frames.background),this.bar.setY(4),this.add(this.bar)},n.createValue=function(){this.value=this.scene.make.bitmapText({font:Sa.Z.PRIMARY.KEY,size:this.scene.fontSize(20),origin:{x:.5,y:.5}}),this.setValue(0),this.add(this.value)},n.createIcon=function(){this.icon=this.scene.add.image(0,0,this.key,this.frames.icon),this.add(this.icon)},n.createButton=function(){this.frames.button&&this.scene.ads.enabled&&(this.button=this.scene.add.image(0,0,this.key,this.frames.button),this.add(this.button))},n.logButtonEvent=function(){var e=this.getParentName(),t=this.name;this.scene.analytics.event(Dt._.BUTTON_CLICK,{button_name:t,screen_name:e})},n.getParentName=function(){for(var e=this.parentContainer;e;){if(e instanceof GameCore.Screen)return e.getScreenName();e=e.parentContainer}return this.scene.getSceneName()},(0,re.Z)(t,[{key:"onClick",set:function(e){var t=this;this.scene.ads.enabled&&(this.off(Phaser.Input.Events.GAMEOBJECT_POINTER_DOWN),this.setInteractive({useHandCursor:!0}),this.on(Phaser.Input.Events.GAMEOBJECT_POINTER_DOWN,(function(){t.logButtonEvent(),e(),t.scene.audio.playSound(Fi.Z.BUTTON_CLICK)})))}}]),t}(Phaser.GameObjects.Container),rr=Ui.Z.DEFAULT,sr=rr.KEY,or=rr.FRAME,cr=function(e){function t(t){var n,i;return(i=e.call(this,t,sr,{background:or.TOP_BG_LONG,icon:or.ICON_DIAMOND,button:or.ICON_PLUS})||this).setName("DiamondBar"),i.bar.setWorldSize(105,39),i.icon.setWorldSize(25,24),null==(n=i.button)||n.setWorldSize(18.5,20),i.alignObject(),Phaser.Display.Align.In.LeftCenter(i.icon,i.bar,3,-2),i.button&&Phaser.Display.Align.In.RightCenter(i.button,i.bar,3),i}return(0,o.Z)(t,e),t}(ar),ur=Ui.Z.DEFAULT,lr=ur.KEY,hr=ur.FRAME,dr=function(e){function t(t){var n;return(n=e.call(this,t,lr,{background:hr.TOP_BG_LONG,icon:hr.ICON_CUP})||this).setName("ScoreBar"),n.maxValue=1e6,n.bar.setWorldSize(105,39),n.icon.setWorldSize(34,28),n.alignObject(),n}return(0,o.Z)(t,e),t.prototype.alignObject=function(){e.prototype.alignObject.call(this),Phaser.Display.Align.In.Center(this.value,this.bar,13,-2)},t}(ar),pr=function(e){function t(t){var n;(n=e.call(this,t)||this).scoreBar=void 0,n.diamondBar=void 0;var i=n.scene.gameZone.width;return n.setSize(i,50),n.createScoreBar(),n.createDiamondBar(),n.scene.add.existing((0,Gi.Z)(n)),n}(0,o.Z)(t,e);var n=t.prototype;return n.createScoreBar=function(){this.scoreBar=new dr(this.scene),this.add(this.scoreBar)},n.createDiamondBar=function(){this.diamondBar=new cr(this.scene),this.add(this.diamondBar)},t}(Phaser.GameObjects.Container),fr=n(99),mr=n.n(fr),gr={targets:[],duration:600,ease:Phaser.Math.Easing.Back.Out,props:{y:{from:250,to:0},scale:{from:.9,to:1},alpha:{start:0,from:0,to:1}}},vr=function(e){function t(t){return e.call(this,gr,t)||this}return(0,o.Z)(t,e),t}(na.Z),yr=Ui.Z.DEFAULT,Er=yr.KEY,Ar=yr.FRAME,Sr=function(e){function t(t,n,i,a,r){var s;return(s=e.call(this,t,n,i)||this).barTopLeft=void 0,s.barTopMid=void 0,s.barTopRight=void 0,s.barMidLeft=void 0,s.barMidBg=void 0,s.barMidRight=void 0,s.barBottomLeft=void 0,s.barBottomMid=void 0,s.barBottomRight=void 0,s.setSize(a,r),s.setDepth(_i.Z.POPUP),s.createPopup(),s.scene.add.existing((0,Gi.Z)(s)),s}(0,o.Z)(t,e);var n=t.prototype;return n.createPopup=function(){this.createPopupImages(),this.updatePopupSize(),this.alignPopupImages()},n.createPopupImages=function(){this.barTopLeft=this.scene.add.image(0,0,Er,Ar.POPUP_TOP_LEFT),this.barTopMid=this.scene.add.image(0,0,Er,Ar.POPUP_TOP_MID),this.barTopRight=this.scene.add.image(0,0,Er,Ar.POPUP_TOP_RIGHT),this.barMidLeft=this.scene.add.image(0,0,Er,Ar.POPUP_MID_LEFT),this.barMidBg=this.scene.add.image(0,0,Er,Ar.POPUP_MID_MID),this.barMidRight=this.scene.add.image(0,0,Er,Ar.POPUP_MID_RIGHT),this.barBottomLeft=this.scene.add.image(0,0,Er,Ar.POPUP_BOTTOM_LEFT),this.barBottomMid=this.scene.add.image(0,0,Er,Ar.POPUP_BOTTOM_MID),this.barBottomRight=this.scene.add.image(0,0,Er,Ar.POPUP_BOTTOM_RIGHT),this.barTopLeft.setWorldSize(65,48),this.barTopMid.setWorldSize(65,48),this.barTopRight.setWorldSize(65,48),this.barMidLeft.setWorldSize(65,48),this.barMidBg.setWorldSize(65,48),this.barMidRight.setWorldSize(65,48),this.barBottomLeft.setWorldSize(65,48),this.barBottomMid.setWorldSize(65,48),this.barBottomRight.setWorldSize(65,48),this.add([this.barTopRight,this.barTopMid,this.barBottomLeft,this.barBottomRight,this.barMidLeft,this.barMidRight,this.barTopLeft,this.barBottomMid,this.barMidBg])},n.updatePopupSize=function(){this.barTopMid.setWorldSize(this.width-129,this.barTopMid.height),this.barMidLeft.setWorldSize(this.barMidLeft.width,this.height-95),this.barMidBg.setWorldSize(this.width-129,this.height-95),this.barMidRight.setWorldSize(this.barMidRight.width,this.height-95),this.barBottomMid.setWorldSize(this.width-129,this.barBottomMid.height)},n.alignPopupImages=function(){Phaser.Display.Align.In.TopLeft(this.barTopLeft,this),Phaser.Display.Align.In.TopCenter(this.barTopMid,this),Phaser.Display.Align.In.TopRight(this.barTopRight,this),Phaser.Display.Align.In.LeftCenter(this.barMidLeft,this),Phaser.Display.Align.In.Center(this.barMidBg,this),Phaser.Display.Align.In.RightCenter(this.barMidRight,this),Phaser.Display.Align.In.BottomLeft(this.barBottomLeft,this),Phaser.Display.Align.In.BottomCenter(this.barBottomMid,this),Phaser.Display.Align.In.BottomRight(this.barBottomRight,this)},(0,re.Z)(t,[{key:"onClose",set:function(e){this.setInteractive({useHandCursor:!0}),this.on(Phaser.Input.Events.GAMEOBJECT_POINTER_DOWN,e)}}]),t}(Phaser.GameObjects.Container),Tr=n(611),br=Ui.Z.DEFAULT,Ir=br.KEY,wr=br.FRAME,Cr=function(e){function t(t){var n;return(n=e.call(this,t)||this).cat=void 0,n.effect=void 0,n.runStarTwinkle=function(){var e=n.cat,t=e.x,i=e.y,a=e.displayWidth,r=e.displayHeight,s=i-20;n.effect.run(1,t,s,a,r)},n.createEffect(),n.createCat(),n.runCatAnimation(),n.scene.add.existing((0,Gi.Z)(n)),n}(0,o.Z)(t,e);var n=t.prototype;return n.createCat=function(){this.cat=this.scene.make.image({key:Ir,frame:wr.THE_CAT,origin:{x:.5,y:1}}),this.cat.setWorldSize(204.5,112.5),this.cat.setY(this.cat.height/2),this.add(this.cat)},n.createEffect=function(){this.effect=new Tr.Z(this.scene),this.add(this.effect)},n.runCatAnimation=function(){new ua({targets:[this.cat],duration:1e3,props:{scale:"+=0.02"}}).play()},t}(Phaser.GameObjects.Container),xr=n(67),Or=n.n(xr),_r=n(592),Rr=n.n(_r),Pr=[{id:"pass-levels",title:"Pass 5 Levels",require:{level:5},reward:{diamond:100}},{id:"play-blitz",title:"Finish 1 Blitz Mode Game",require:{game:1},reward:{diamond:100}},{id:"finish-gem-bonus",title:"Finish 10 Gem Bonus",require:{mission:10},reward:{diamond:100}},{id:"reach-score",title:"Reach Total Scores of 10000",require:{score:1e4},reward:{diamond:100}},{id:"eat-gems-red",title:"Break 100 Red Gems",require:{gems:100},reward:{diamond:100}},{id:"eat-gems-green",title:"Break 100 Green Gems",require:{gems:100},reward:{diamond:100}},{id:"eat-gems-blue",title:"Break 100 Blue Gems",require:{gems:100},reward:{diamond:100}},{id:"eat-gems-yellow",title:"Break 100 Yellow Gems",require:{gems:100},reward:{diamond:100}},{id:"eat-gems-pink",title:"Break 100 Pink Gems",require:{gems:100},reward:{diamond:100}},{id:"destroy-ice",title:"Destroy 3 Ice Blocks",require:{ice:3},reward:{diamond:100}},{id:"use-colorful",title:"Use 3 Colorful Gems",require:{colorful:3},reward:{diamond:100}},{id:"eat-color-change",title:"Break 3 Color Change Gems",require:{gems:3},reward:{diamond:100}},{id:"use-hammer",title:"Use the Hammer Item",require:{hammer:1},reward:{diamond:150}},{id:"use-shuffle",title:"Use the Shuffle Item",require:{shuffle:1},reward:{diamond:150}},{id:"use-color-potion",title:"Use the Color Potion",require:{potion:1},reward:{diamond:200}}],kr=[{id:"pass-levels",title:"Pass 30 Levels",require:{level:30},reward:{diamond:300}},{id:"play-blitz",title:"Finish 3 Blitz Mode Games",require:{game:3},reward:{diamond:300}},{id:"finish-gem-bonus",title:"Finish 40 Missions",require:{mission:40},reward:{diamond:300}},{id:"reach-score",title:"Reach Total Scores of 75000",require:{score:75e3},reward:{diamond:300}},{id:"eat-gems-red",title:"Break 400 Red Gems",require:{gems:400},reward:{diamond:300}},{id:"eat-gems-green",title:"Break 400 Green Gems",require:{gems:400},reward:{diamond:300}},{id:"eat-gems-blue",title:"Break 400 Blue Gems",require:{gems:400},reward:{diamond:300}},{id:"eat-gems-yellow",title:"Break 250 Yellow Gems",require:{gems:400},reward:{diamond:300}},{id:"eat-gems-pink",title:"Break 250 Pink Gems",require:{gems:400},reward:{diamond:300}},{id:"destroy-ice",title:"Destroy 10 Ice Blocks",require:{ice:10},reward:{diamond:300}},{id:"use-colorful",title:"Use 10 Colorful Gems",require:{colorful:10},reward:{diamond:300}},{id:"eat-color-change",title:"Break 10 Color Change Gems",require:{gems:10},reward:{diamond:100}},{id:"eat-big-gem-combo",title:"Break 20 Gems in one touch",require:{gemCombo:20},reward:{diamond:300}}],Mr=[{id:"pass-levels",title:"Pass 15 Levels",require:{level:15},reward:{diamond:200}},{id:"play-blitz",title:"Finish 2 Blitz Mode Games",require:{game:2},reward:{diamond:200}},{id:"finish-gem-bonus",title:"Finish 25 Missions",require:{mission:25},reward:{diamond:200}},{id:"reach-score",title:"Reach Total Scores of 30000",require:{score:3e4},reward:{diamond:200}},{id:"eat-gems-red",title:"Break 250 Red Gems",require:{gems:250},reward:{diamond:200}},{id:"eat-gems-green",title:"Break 250 Green Gems",require:{gems:250},reward:{diamond:200}},{id:"eat-gems-blue",title:"Break 250 Blue Gems",require:{gems:250},reward:{diamond:200}},{id:"eat-gems-yellow",title:"Break 250 Yellow Gems",require:{gems:250},reward:{diamond:200}},{id:"eat-gems-pink",title:"Break 250 Pink Gems",require:{gems:250},reward:{diamond:200}},{id:"destroy-ice",title:"Destroy 6 Ice Blocks",require:{ice:6},reward:{diamond:200}},{id:"use-colorful",title:"Use 6 Colorful Gems",require:{colorful:6},reward:{diamond:200}},{id:"eat-color-change",title:"Break 6 Color Change Gems",require:{gems:6},reward:{diamond:200}},{id:"eat-big-gem-combo",title:"Break 15 Gems in one touch",require:{gemCombo:15},reward:{diamond:200}}],Dr=function(){var e=(0,s.Z)(h().mark((function e(){var t,n,i;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[],n=new(Rr()),i=function(e,t){for(var i=[];i.length<t;){var a=e[Math.floor(Math.random()*e.length)];n.has(a.id)||(i.push(a),n.add(a.id))}return i},t.push.apply(t,i(Pr,2)),t.push.apply(t,i(Mr,2)),t.push.apply(t,i(kr,1)),e.abrupt("return",t);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Nr=function(e){try{var t=localStorage.getItem(e);return null===t?null:GameCore.Utils.Json.decode(t)}catch(n){return null}},Lr=(GameCore.Configs.DailyTasks,"Pop Jewels Master"),Br=function(e){return function(t){var n=window.game.player.getCustomData("dailyTasks"),i=Hr(),a=n||{},r=a.startedTime,s=void 0===r?0:r,o=a.logTasks,c=void 0===o?{}:o,u=new Date,l=new Date(s),h=!1;u.getTime()-l.getTime()>864e5?h=!0:h=u.getDay()!==l.getDay();var d=!i||0===i.length;h||d?(t({type:In,payload:{tasks:e}}),Zr(e),t(Gr(e))):(t({type:In,payload:{tasks:i}}),t(Ur(c)))}},Gr=function(e){return function(t){var n={};e.forEach((function(e){var t=e.id,i=e.require;n[t]={},Q()(i).forEach((function(e){var i;n[t]=((i={})[e]=0,i.rewarded=!1,i)}))})),window.game.player.setCustomData("dailyTasks",{logTasks:n,startedTime:Date.now()}),t(Ur(n)),Li.emit(ki.EVENTS.TASKS_RESET)}},Ur=function(e){return{type:wn,payload:{process:e}}},Fr=function(){return function(e){e({type:On,payload:{}}),Li.emit(ki.EVENTS.NOTICE_UPDATE)}},Zr=function(e){!function(e){try{return localStorage.removeItem(e),!0}catch(t){return!1}}(Lr+"_DailyTasks"),function(e,t){try{var n=Nr(e),i={};GameCore.Utils.Valid.isObject(n)&&(i=n);var a=GameCore.Utils.Json.clone(t);if(!GameCore.Utils.Valid.isObject(a))return!1;var r=GameCore.Utils.Object.clear(a),s=(0,$t.TS)(i,r),o=GameCore.Utils.Json.encode(s);return localStorage.setItem(e,o),!0}catch(c){return!1}}(Lr+"_DailyTasks",{tasks:e})},Hr=function(){try{var e=Nr(Lr+"_DailyTasks");if(!e)return null;var t=JSON.parse(Or()(e));return t.tasks&&Array.isArray(t.tasks)?t.tasks:null}catch(n){return null}},Yr=n(194),zr=function(e){function t(t,n){var i;(i=e.call(this,t)||this).payload=void 0,i.process=void 0,i.minProcess=void 0,i.maxProcess=void 0,i.progressBoxLeft=void 0,i.progressBoxBg=void 0,i.progressBoxRight=void 0,i.progressBarLeft=void 0,i.progressBarBg=void 0,i.progressBarRight=void 0,i.progressAnimation=void 0,i.payload=n;var a=n.width;return i.setSize(a,16),i.process=0,i.minProcess=0,i.maxProcess=1,i.createProgressBox(),i.createProgressBar(),i.createContainer(),i}(0,o.Z)(t,e);var n=t.prototype;return n.setProcess=function(e,t){void 0===t&&(t=!1),this.process=this.getCorrectValue(e),this.scene&&!t?this.runProcessAnimation(e):this.updateProcess()},n.updateProcess=function(){var e=this.progressBarBg.displayHeight,t=this.getDisplayWidthByProcess(this.process);this.progressBarBg.setWorldSize(t,e);var n=this.progressBarBg.x;this.progressBarRight.setX(n+t)},n.getCorrectValue=function(e){var t=e;return isFinite(t)||(t=0),t<this.minProcess&&(t=this.minProcess),t>this.maxProcess&&(t=this.maxProcess),t},n.getDisplayWidthByProcess=function(e){return(this.width-17)*e},n.runProcessAnimation=function(e){var t,n=this;null==(t=this.progressAnimation)||t.stop(1),this.progressAnimation=this.scene.add.tween({targets:[this.progressBarBg],duration:300,ease:Phaser.Math.Easing.Quadratic.InOut,props:{displayWidth:function(){var t=n.getCorrectValue(e);return n.getDisplayWidthByProcess(t)}},onStart:function(){var e=n.progressBarBg.displayHeight,t=n.getDisplayWidthByProcess(n.process);n.progressBarBg.setWorldSize(t,e)},onUpdate:function(){var e=n.progressBarBg,t=e.x,i=e.displayWidth;n.progressBarRight.setX(t+i)},onComplete:function(){n.updateProcess()}})},n.createProgressBox=function(){var e=this.payload,t=e.key,n=e.frames;this.progressBoxLeft=this.scene.make.image({key:t,frame:n.PROGRESS_BG_LEFT}),this.progressBoxLeft.setOrigin(0,.5),this.progressBoxLeft.setWorldSize(11,16),this.progressBoxRight=this.scene.make.image({key:t,frame:n.PROGRESS_BG_RIGHT}),this.progressBoxRight.setOrigin(0,.5),this.progressBoxRight.setWorldSize(11,16),this.progressBoxBg=this.scene.make.image({key:t,frame:n.PROGRESS_BG_MID}),this.progressBoxBg.setOrigin(0,.5),this.progressBoxBg.setWorldSize(11,16);var i=this.progressBoxBg.displayHeight,a=this.displayWidth,r=this.progressBoxLeft.displayWidth,s=this.progressBoxRight.displayWidth;this.progressBoxLeft.setWorldSize(r,i),this.progressBoxRight.setWorldSize(s,i),this.progressBoxBg.setWorldSize(a-(r+s),i),Phaser.Display.Align.In.Center(this.progressBoxBg,this,0,0),Phaser.Display.Align.In.LeftCenter(this.progressBoxLeft,this,0,0),Phaser.Display.Align.In.RightCenter(this.progressBoxRight,this,0,0)},n.createProgressBar=function(){var e=this.payload,t=e.key,n=e.frames;this.progressBarLeft=this.scene.make.image({key:t,frame:n.PROGRESS_BAR_LEFT}),this.progressBarLeft.setOrigin(0,.5),this.progressBarLeft.setWorldSize(11,16),this.progressBarRight=this.scene.make.image({key:t,frame:n.PROGRESS_BAR_RIGHT}),this.progressBarRight.setOrigin(0,.5),this.progressBarRight.setWorldSize(11,16),this.progressBarBg=this.scene.make.image({key:t,frame:n.PROGRESS_BAR_MID}),this.progressBarBg.setOrigin(0,.5),this.progressBarBg.setWorldSize(11,16);Phaser.Display.Align.In.LeftCenter(this.progressBarBg,this,-5.8),Phaser.Display.Align.In.LeftCenter(this.progressBarLeft,this,-1),Phaser.Display.Align.In.LeftCenter(this.progressBarRight,this,-1),this.setProcess(0,!0)},n.createContainer=function(){this.add([this.progressBoxBg,this.progressBoxLeft,this.progressBoxRight,this.progressBarBg,this.progressBarLeft,this.progressBarRight]),this.scene.add.existing(this)},t}(Phaser.GameObjects.Container),Vr=zr,Wr=function(){var e=(window.game.player.getCustomData("dailyTasks")||{}).logTasks;return GameCore.Utils.Json.clone(e)},Kr=Ui.Z.DEFAULT,jr=Kr.KEY,Xr=Kr.FRAME,qr=function(e){function t(t,n,i){var a;return(a=e.call(this,t)||this).payload=void 0,a.process=void 0,a.isCompleted=void 0,a.background=void 0,a.titleText=void 0,a.processText=void 0,a.progressBar=void 0,a.claimButton=void 0,a.rewardedIcon=void 0,a.handleOnClaim=function(e){return function(){a.updateClaimButton();var t=a.payload,n=t.id,i=t.reward,r=t.require;a.scene.stateStorage.dispatch(function(e){return function(t){var n=Wr();if(GameCore.Utils.Valid.isObject(n)){var i=n;GameCore.Utils.Object.hasOwn(i,e)&&(i[e].rewarded=!0,window.game.player.setCustomData("dailyTasks",{logTasks:i}),t({type:xn,payload:{id:e}}))}}}(n)),Q()(i).forEach((function(t){var n=i[t];e(t,n)}));var s=r[Q()(r)[0]]||0;a.scene.analytics.finishDailyTask(n,s)}},a.updateData=function(){var e,t,n=a.getProcessValue(),i=n.current,r=n.target,s=i/r;a.progressBar.setProcess(s,!0),a.setProcessText(i,r),a.isCompleted=i>=r&&!(null!=(e=a.process)&&e.rewarded),a.claimButton.setDisabled(!a.isCompleted),null!=(t=a.process)&&t.rewarded&&a.updateClaimButton()},a.updateClaimButton=function(){a.rewardedIcon=a.scene.make.image({key:jr,frame:Xr.ICON_CHECK}),a.rewardedIcon.setWorldSize(25.5,26),a.add(a.rewardedIcon),Phaser.Display.Align.In.Center(a.rewardedIcon,a.claimButton),a.claimButton.kill()},a.payload=n,a.process=i,a.setName("Task: "+n.id),a.createBackground(),a.updateSize(),a.createTitle(),a.createProcessBar(),a.createProcessStatus(),a.createClaimButton(),a.updateData(),a}(0,o.Z)(t,e);var n=t.prototype;return n.setProcess=function(e){this.process=e,this.updateData()},n.getId=function(){return this.payload.id},n.getProcessValue=function(){var e=this,t=this.payload.require,n=Q()(t),i=0,a=0;return n.forEach((function(n){i=t[n]||0;var r=e.process[n];a="number"===typeof r?r:0})),{current:a,target:i}},n.setProcessText=function(e,t){this.processText.setText(e+" / "+t)},n.createBackground=function(){this.background=this.scene.make.image({key:jr,frame:Xr.MISSION_BLOCK_BG}),this.background.setWorldSize(262,55),this.add(this.background)},n.updateSize=function(){var e=this.background,t=e.width,n=e.height;this.setSize(t,n)},n.createTitle=function(){var e=this.payload.title;this.titleText=this.scene.make.bitmapText({font:Sa.Z.PRIMARY.KEY,size:this.scene.fontSize(17),text:e,origin:{x:0,y:.5}}),this.titleText.setTint(11436629),this.add(this.titleText),Phaser.Display.Align.In.LeftCenter(this.titleText,this,-10,-10)},n.createProcessBar=function(){this.progressBar=new Vr(this.scene,{width:170,key:jr,frames:Xr}),this.add(this.progressBar),Phaser.Display.Align.In.LeftCenter(this.progressBar,this,-10,10)},n.createProcessStatus=function(){this.processText=this.scene.make.bitmapText({font:Sa.Z.PRIMARY.KEY,size:this.scene.fontSize(15),origin:{x:.5,y:.5}}),this.add(this.processText),Phaser.Display.Align.In.Center(this.processText,this.progressBar,0,0)},n.createClaimButton=function(){this.claimButton=new ga.Z(this.scene,jr,Xr.BUTTON_GREEN_MINOR,62.5,38.5);var e="Claim:"+GameCore.Utils.String.toUpperCamelCase(this.payload.id);this.claimButton.setName(e),this.createRewardIcon(),this.createRewardValue(),this.add(this.claimButton),Phaser.Display.Align.In.RightCenter(this.claimButton,this,-6)},n.createRewardIcon=function(){var e=this.scene.make.image({key:jr,frame:Xr.ICON_DIAMOND_SMALL});e.setWorldSize(19,18),this.claimButton.add(e),Phaser.Display.Align.In.Center(e,this.claimButton,-15)},n.createRewardValue=function(){var e=this.payload.reward,t=this.scene.make.bitmapText({font:Sa.Z.PRIMARY.KEY,size:this.scene.fontSize(16),text:""+e.diamond,origin:{x:0,y:.5}});this.claimButton.add(t),Phaser.Display.Align.In.Center(t,this.claimButton,10,-1)},(0,re.Z)(t,[{key:"onClaim",set:function(e){this.claimButton.onClick=this.handleOnClaim(e),this.updateData()}}]),t}(Phaser.GameObjects.Container),Jr=Ui.Z.DEFAULT,Qr=Jr.KEY,$r=Jr.FRAME,es=(GameCore.Configs.DailyTasks,function(e){function t(t,n,i,a){var r;return(r=e.call(this,t,n,i,a)||this).onReward=void 0,r.missionsData=void 0,r.missionProcess=void 0,r.startedTime=void 0,r.popup=void 0,r.missionBlocks=void 0,r.countdownTimer=void 0,r.countdownText=void 0,r.countdownContainer=void 0,r.backgroundFadeInAnimation=void 0,r.popupShowUpAnimation=void 0,r.popupExitsAnimation=void 0,r.contentShowUpAnimation=void 0,r.dailyMissionDeadline=void 0,r.handleClosePopup=function(){r.scene.stateStorage.dispatch(Fr()),r.runCloseAnimation()},r.handleOnClaim=function(e,t){r.claimReward(e,t)},r.resetTaskData=(0,s.Z)(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.startedTime=Date.now(),e.next=3,r.scene.stateStorage.dispatch(Gr(r.missionsData));case 3:r.updateTasksData(),r.createMissionBlocks();case 5:case"end":return e.stop()}}),e)}))),r.requestNewTasks=(0,s.Z)(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r.scene.player.setCustomData("dailyTasks",{startedTime:0});case 1:case"end":return e.stop()}}),e)}))),r.updateTasksData=function(){var e=r.scene,t=e.player,n=e.stateStorage.getState(),i=Ma(n)||[],a=Da(n)||{},s=(t.getCustomData("dailyTasks")||{}).startedTime,o=void 0===s?0:s;r.missionsData=i,r.missionProcess=a,r.startedTime=o},r.updateCountdown=(0,s.Z)(h().mark((function e(){var t,n;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r.startedTime){e.next=2;break}return e.abrupt("return");case 2:if(t=Date.now(),!((n=r.dailyMissionDeadline-t)<0)){e.next=8;break}return n=0,e.next=8,r.resetTaskData();case 8:r.countdownText.setText(""+(0,Yr.F0)(n,!0));case 9:case"end":return e.stop()}}),e)}))),r.createPopup(),r.createPopupContents(),r.createDebugTools(),r.setDepth(Pi.Ks.POPUP),r.background.setAlpha(.8),r}(0,o.Z)(t,e);var n=t.prototype;return n.open=function(t){e.prototype.open.call(this,t),this.scene.stateStorage.dispatch(Fr()),this.updateTasksData(),this.setDailyMissionDeadline(),this.createCountdownTimer(),this.createMissionBlocks(),this.runOpenAnimation()},n.claimReward=function(e,t){"function"===typeof this.onReward&&(this.onReward(e,t),this.updateTasksData(),this.updateMissionBlocks(),this.scene.audio.playSound(Fi.Z.DAILY_REWARD))},n.runOpenAnimation=function(){this.setVisible(!0),this.scene.audio.playSound(Fi.Z.POPUP_SHOW),this.runBackgroundEntrancesAnimation(0,300),this.runPopupEntrancesAnimation(200,500),this.runPopupContentEntrancesAnimation(400,400)},n.runCloseAnimation=function(){this.scene.audio.playSound(Fi.Z.POPUP_OFF,{volume:.6}),this.runPopupExitsAnimation(0,200)},n.runBackgroundEntrancesAnimation=function(e,t){var n;if(!this.backgroundFadeInAnimation){var i=this.scene.game.globalScene;this.backgroundFadeInAnimation=new da.Z({targets:[this.background],delay:e,duration:t,props:{alpha:{start:0,from:0,to:.8}},onUpdate:function(e,t){i instanceof wa.Z&&i.requestBackgroundMaskUpdate(Pi.o4.DAILY_MISSIONS_SCREEN,t.alpha)}})}null==(n=this.backgroundFadeInAnimation)||n.play()},n.runPopupEntrancesAnimation=function(e,t){var n,i;if(!this.popupShowUpAnimation)return this.popupShowUpAnimation=new vr({targets:[this.popup],delay:e,duration:t,props:{y:{from:350,to:this.popup.y},scale:{start:0,from:0,to:1},alpha:{start:1,from:1,to:1}}}),void(null==(i=this.popupShowUpAnimation)||i.play());null==(n=this.popupShowUpAnimation)||n.play()},n.runPopupContentEntrancesAnimation=function(e,t){var n,i,a=this.missionBlocks.getChildren();a.length<1||(this.missionBlocks.setAlpha(0),null==(n=this.contentShowUpAnimation)||n.remove(),this.contentShowUpAnimation=new fa.Z({targets:a,duration:t,delay:this.scene.tweens.stagger(80,{start:e}),props:{alpha:{from:0,to:1}}}),null==(i=this.contentShowUpAnimation)||i.play())},n.runPopupExitsAnimation=function(e,t){var n,i,a=this;if(!this.popupExitsAnimation)return this.popupExitsAnimation=new pa.Z({targets:[this.popup],delay:e,duration:t,props:{y:250,scale:0},onComplete:function(){a.scene.screen.close(a.name);var e=a.scene.game.globalScene;e instanceof wa.Z&&e.requestBackgroundMaskUpdate(Pi.o4.DAILY_MISSIONS_SCREEN,0)}}),void(null==(i=this.popupExitsAnimation)||i.play());null==(n=this.popupExitsAnimation)||n.play()},n.createDebugTools=function(){if(GameCore.Utils.Valid.isDebugger()){var e=new ga.Z(this.scene,Qr,$r.ICON_CANCEL);e.button.setSize(21,23),e.button.setDisplaySize(21,23),e.setName("Reset"),e.onClick=this.resetTaskData,this.add(e),Phaser.Display.Align.In.TopLeft(e,this.zone,-60,-90);var t=new ga.Z(this.scene,Qr,$r.ICON_PLUS);t.button.setSize(20,20),t.button.setDisplaySize(20,20),t.setName("New Task"),t.onClick=this.requestNewTasks,this.add(t),Phaser.Display.Align.In.TopLeft(t,this.zone,-30,-90)}},n.createPopup=function(){this.popup=new Sr(this.scene,0,0,284,450),this.add(this.popup),Phaser.Display.Align.In.Center(this.popup,this.zone,0,15)},n.createPopupContents=function(){this.createCat(),this.createTitle(),this.createCountdown()},n.createCat=function(){var e=new Cr(this.scene);this.popup.add(e),Phaser.Display.Align.In.TopCenter(e,this.popup,0,35)},n.createTitle=function(){var e=this.scene.add.container(),t=this.scene.make.image({key:Qr,frame:$r.RIBBON_LONG});t.setWorldSize(341,79.5);var n=this.scene.make.bitmapText({font:Sa.Z.PRIMARY.KEY,size:this.scene.fontSize(30),text:this.scene.lang.Text.DAILY_MISSIONS});Phaser.Display.Align.In.Center(n,t,0,-10);var i=new ga.Z(this.scene,Qr,$r.BUTTON_CLOSE);i.button.setWorldSize(37.5,37.5),i.setName("Close"),i.useSound=!1,i.onClick=this.handleClosePopup,Phaser.Display.Align.In.RightCenter(i,t,-5,-5),e.add([t,n,i]),this.popup.add(e),Phaser.Display.Align.In.TopCenter(e,this.popup,0,-55)},n.createCountdown=function(){this.countdownContainer=this.scene.add.container();var e=this.scene.make.image({key:Qr,frame:$r.MISSION_CLOCK_BG});e.setWorldSize(96,27);var t=this.scene.make.image({key:Qr,frame:$r.ICON_CLOCK});t.setWorldSize(26,28),Phaser.Display.Align.In.LeftCenter(t,e,6),this.countdownText=this.scene.make.bitmapText({font:Sa.Z.PRIMARY.KEY,size:this.scene.fontSize(20),text:"00:00:00"}),this.countdownText.setTint(11436629),Phaser.Display.Align.In.Center(this.countdownText,e,10,-1.3),this.countdownContainer.add([e,t,this.countdownText]),this.popup.add(this.countdownContainer),Phaser.Display.Align.In.TopCenter(this.countdownContainer,this.popup,0,-98)},n.createCountdownTimer=function(){var e;null==(e=this.countdownTimer)||e.destroy(),this.countdownTimer=this.scene.time.addEvent({loop:!0,delay:1e3,startAt:1e3,callback:this.updateCountdown})},n.createMissionBlocks=function(){var e,t,n=this;null==(e=this.missionBlocks)||e.destroy(!0);var i=this.missionsData.length,a=mr()(t=new Array(i)).call(t,null);this.missionBlocks=this.scene.add.group({maxSize:i}),a.forEach((function(e,t){var i=n.creatMissionBlock(t);null!==i&&n.missionBlocks.add(i)})),this.missionBlocks.setX(0),this.missionBlocks.setY(-65,58)},n.creatMissionBlock=function(e){var t=this.missionsData[e].id;if(!GameCore.Utils.Object.hasOwn(this.missionProcess,t))return null;var n=this.missionProcess[t];if(!GameCore.Utils.Valid.isObject(n))return null;var i=new qr(this.scene,this.missionsData[e],n);return i.onClaim=this.handleOnClaim,this.popup.add(i),i},n.updateMissionBlocks=function(){var e=this;this.missionBlocks.getChildren().forEach((function(t){if(t instanceof qr){var n=t.getId();if(!GameCore.Utils.Object.hasOwn(e.missionProcess,n))return;var i=e.missionProcess[n];if(!GameCore.Utils.Valid.isObject(i))return;t.setProcess(i)}}))},n.setDailyMissionDeadline=function(){var e=new Date,t=new Date(e.getFullYear(),e.getMonth(),e.getDate()+1);this.dailyMissionDeadline=t.getTime()},t}(GameCore.Screen)),ts=es,ns=n(435),is=[{id:1,type:"diamond",value:50},{id:2,type:"diamond",value:75},{id:3,type:"diamond",value:100},{id:4,type:"diamond",value:125},{id:5,type:"diamond",value:150},{id:6,type:"diamond",value:200}],as=function(){var e=(0,s.Z)(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",is);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),rs={REWARDED:"rewarded",SKIPPED:"skipped",READY:"ready",WAITING:"waiting"},ss=(0,ue.P1)([function(e){var t;return null==(t=e[kn])?void 0:t.rewards}],(function(e){return e})),os=(0,ue.P1)([function(e){var t;return null==(t=e[kn])?void 0:t.isRequesting}],(function(e){return e})),cs=GameCore.Configs.DailyRewards,us=function(e){return function(t){var n,i=window.game.player.getCustomData("dailyRewarded")||{},a=i.logDays,s=void 0===a?[]:a,o=i.lastRewarded,c=void 0===o?0:o,u=new Date,l=new Date(c),h=new Date(l.toDateString()),d=Math.abs(u.valueOf()-h.valueOf()),p=Math.floor(d/864e5)>1,f=cs.CheckInterrupt&&p||s.length>=cs.MaxDays,m=f?[!1]:O()(n=[]).call(n,s,[!1]);ls(m);var g=Re()(e).call(e,(function(e,t){var n=t<m.length,i=m.length===t+1,a=!1===m[t],s=rs.WAITING;return i?s=rs.READY:f?s=rs.WAITING:n&&a?s=rs.SKIPPED:n&&(s=rs.REWARDED),(0,r.Z)({},e,{status:s})}));t({type:Dn,payload:{rewards:g}})}},ls=function(e,t){void 0===t&&(t=!1),window.game.player.setCustomData("dailyRewarded",{logDays:e,lastRewarded:t?0:Date.now()})},hs=Ui.Z.DEFAULT,ds=hs.KEY,ps=hs.FRAME,fs=function(e){function t(t,n){var i;return(i=e.call(this,t)||this).payload=void 0,i.background=void 0,i.blockBg=void 0,i.titleBg=void 0,i.titleText=void 0,i.iconStatus=void 0,i.currencyIcon=void 0,i.currencyText=void 0,i.label=void 0,i.starTwinkleUp=void 0,i.pulsateBubbleAnimation=void 0,i.payload=n,i.setName("Day: "+n.day),i.draw(),i.setStatus(),i}(0,o.Z)(t,e);var n=t.prototype;return n.setStatus=function(){switch(this.payload.status){case rs.READY:this.setStatusReady(),this.runAnimations();break;case rs.SKIPPED:this.setStatusSkipped();break;case rs.REWARDED:this.setStatusRewarded();break;default:this.setStatusWaiting()}},n.setStatusReady=function(){this.blockBg.setVisible(!1),this.titleBg.setFrame(ps.DAILY_DAY_TITLE_ORANGE),this.setCurrentIconByDay(this.payload.day)},n.setStatusRewarded=function(){this.iconStatus.setVisible(!0),this.blockBg.setFrame(ps.DAILY_DAY_BG_OPEN),this.titleBg.setFrame(ps.DAILY_DAY_TITLE_GREEN),this.iconStatus.setFrame(ps.ICON_CHECK),this.setCurrentIconByDay(this.payload.day)},n.setStatusSkipped=function(){this.iconStatus.setVisible(!0),this.blockBg.setFrame(ps.DAILY_DAY_BG_OPEN),this.titleBg.setFrame(ps.DAILY_DAY_TITLE_GREEN),this.iconStatus.setFrame(ps.ICON_CANCEL),this.setCurrentIconByDay(this.payload.day)},n.setStatusWaiting=function(){this.setCurrentIconByDay(this.payload.day)},n.setCurrentIconByDay=function(e){var t=ps.ICON_DIAMOND_LIGHT;switch(e){case 1:t=ps.ICON_DIAMOND_LIGHT,this.currencyIcon.setFrame(t),this.currencyIcon.setWorldSize(38.5,36.5);break;case 2:t=ps.LOGO_DIAMONDS_LIGHT_2,this.currencyIcon.setFrame(t),this.currencyIcon.setWorldSize(52,38);break;case 3:t=ps.LOGO_DIAMONDS_LIGHT_3,this.currencyIcon.setFrame(t),this.currencyIcon.setWorldSize(60,40.5);break;case 4:t=ps.LOGO_DIAMONDS_LIGHT_4,this.currencyIcon.setFrame(t),this.currencyIcon.setWorldSize(55,53.5);break;case 5:t=ps.LOGO_DIAMONDS_LIGHT_5,this.currencyIcon.setFrame(t),this.currencyIcon.setWorldSize(62.5,54);break;case 6:t=ps.LOGO_DIAMONDS_LIGHT_6,this.currencyIcon.setFrame(t),this.currencyIcon.setWorldSize(64,53)}},n.draw=function(){this.createBackground(),this.updateBlockSize(),this.createBlockBG(),this.createTitleBg(),this.createTitleText(),this.createLabel(),this.createCurrencyText(),this.createCurrencyIcon(),this.createIconStatus()},n.createBackground=function(){this.background=this.scene.make.image({key:ds,frame:ps.DAILY_DAY_BG}),this.background.setWorldSize(82,102),this.add(this.background)},n.updateBlockSize=function(){var e=this.background,t=e.width,n=e.height;this.setSize(t,n)},n.createBlockBG=function(){this.blockBg=this.scene.make.image({key:ds,frame:ps.DAILY_DAY_BG_WAIT}),this.blockBg.setWorldSize(76,69),this.add(this.blockBg),Phaser.Display.Align.In.BottomCenter(this.blockBg,this.background,0,-4)},n.createTitleBg=function(){this.titleBg=this.scene.make.image({key:ds,frame:ps.DAILY_DAY_TITLE_GREY}),this.titleBg.setWorldSize(68,25),this.add(this.titleBg),Phaser.Display.Align.In.TopCenter(this.titleBg,this,0,-1)},n.createTitleText=function(){var e=this.payload.day;this.titleText=this.scene.make.bitmapText({font:Sa.Z.PRIMARY.KEY,size:this.scene.fontSize(16),text:this.scene.lang.Text.DAY+" "+e,origin:{x:.5,y:.5}}),this.add(this.titleText),Phaser.Display.Align.In.Center(this.titleText,this.titleBg)},n.createCurrencyIcon=function(){this.currencyIcon=this.scene.make.image({key:ds,frame:ps.ICON_DIAMOND_GREY}),this.currencyIcon.setWorldSize(38.5,36.5),this.add(this.currencyIcon),Phaser.Display.Align.In.Center(this.currencyIcon,this.background)},n.createIconStatus=function(){this.iconStatus=this.scene.make.image({key:ds,frame:ps.ICON_DOT}),this.iconStatus.setVisible(!1),this.iconStatus.setWorldSize(15,16),this.add(this.iconStatus),Phaser.Display.Align.In.Center(this.iconStatus,this.currencyIcon,20,10)},n.createLabel=function(){this.label=this.scene.make.image({key:ds,frame:ps.DAILY_DAY_LABEL}),this.label.setWorldSize(73,19),this.add(this.label),Phaser.Display.Align.In.BottomCenter(this.label,this.background,0,-5)},n.createCurrencyText=function(){var e=this.payload.value;this.currencyText=this.scene.make.bitmapText({font:Sa.Z.PRIMARY.KEY,size:this.scene.fontSize(14),text:"+"+e,origin:{x:.5,y:.5}}),this.add(this.currencyText),Phaser.Display.Align.In.Center(this.currencyText,this.label,-2,-1)},n.runAnimations=function(){this.runSparksIdle()},n.runSparksIdle=function(){this.starTwinkleUp||(this.starTwinkleUp=new Ia.Z(this.scene),this.starTwinkleUp.emitter.setFrequency(100),this.add(this.starTwinkleUp));var e=this.currencyIcon,t=e.x,n=e.y,i=e.width,a=e.height;this.starTwinkleUp.run(1,t,n,i,a)},n.runPulsateBubbleAnimation=function(){this.pulsateBubbleAnimation||(this.pulsateBubbleAnimation=new ua({targets:[this.currencyIcon],props:{scale:"+=0.04"}})),this.pulsateBubbleAnimation.play()},t}(Phaser.GameObjects.Container),ms=Ui.Z.DEFAULT,gs=ms.KEY,vs=ms.FRAME,ys=GameCore.Configs,Es=ys.Network,As=ys.DailyRewards,Ss={id:0,type:"diamond",value:0},Ts=function(e){function t(t,n,i,a){var r;return(r=e.call(this,t,n,i,a)||this).onReward=void 0,r.onSkipAd=void 0,r.onNoAd=void 0,r.logDays=void 0,r.rewardsData=void 0,r.popup=void 0,r.loading=void 0,r.dayBlocks=void 0,r.claimButton=void 0,r.claimButton2X=void 0,r.backgroundFadeInAnimation=void 0,r.popupShowUpAnimation=void 0,r.popupExitsAnimation=void 0,r.contentShowUpAnimation=void 0,r.adsTimer=void 0,r.handleClosePopup=function(){r.runCloseAnimation()},r.handleOnClaim=function(){var e=r.getCurrentRewardValue();r.claimReward(e)},r.handleOnClaimX2=(0,s.Z)(h().mark((function e(){var t,n,i,a,s;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.scene,n=t.audio,i=t.game,e.prev=1,r.claimButton.setDisabled(!0),r.claimButton2X.setDisabled(!0),i.globalScene.screen.open(Pi.o4.NOTIFY_SCREEN,{message:r.scene.lang.Text.LOADING,duration:0,loading:!0}),n.pauseMusic(),n.muteAll(),e.next=9,new(u())((function(e,t){var n;null==(n=r.adsTimer)||n.remove(),r.adsTimer=r.scene.time.delayedCall(Es.Timeout,t),r.scene.ads.getAdStatus(GameCore.Ads.Types.REWARDED)===GameCore.Ads.Status.LOADING?r.scene.ads.events.once(GameCore.Ads.Events.LOADED,e):r.scene.ads.preloadRewardedVideoAsync().then(e).catch(t)}));case 9:return e.next=11,r.scene.ads.showRewardedVideoAsync();case 11:i.globalScene.screen.close(Pi.o4.NOTIFY_SCREEN),a=r.getCurrentRewardValue(),r.claimReward(2*a),e.next=23;break;case 16:if(e.prev=16,e.t0=e.catch(1),!(e.t0 instanceof Object&&GameCore.Utils.Object.hasOwn(e.t0,"code"))){e.next=22;break}if("USER_INPUT"!==e.t0.code){e.next=22;break}return r.onSkipAd(),e.abrupt("return");case 22:r.onNoAd();case 23:return e.prev=23,null==(s=r.adsTimer)||s.destroy(),n.unmuteAll(),n.playMusic(),r.scene.ads.preloadRewardedVideoAsync().catch((function(){})),r.claimButton.setDisabled(!1),r.claimButton2X.setDisabled(!1),e.finish(23);case 31:case"end":return e.stop()}}),e,null,[[1,16,23,31]])}))),r.updateRewardsData=(0,s.Z)(h().mark((function e(){var t,n,i,a,o,c,u,l,d;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.scene,i=n.stateStorage,a=n.player,e.next=3,i.dispatch(function(){var e=(0,s.Z)(h().mark((function e(t,n){var i,a;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=n(),!os(i)){e.next=4;break}return e.abrupt("return");case 4:return t({type:Mn,payload:{}}),e.next=7,as();case 7:a=e.sent,t(us(a));case 9:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}());case 3:if(o=i.getState(),!((null==(c=ss(o)||[])?void 0:c.length)<1)){e.next=7;break}return e.abrupt("return");case 7:r.rewardsData=c,u=a.getCustomData("dailyRewarded"),l=(u||{}).logDays,d=void 0===l?[]:l,r.logDays=O()(t=[]).call(t,d);case 11:case"end":return e.stop()}}),e)}))),r.checkOpenable=(0,s.Z)(h().mark((function e(){var t,n,i,a,s,o,c;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=r.scene.player,n=t.getCustomData("dailyRewarded"),a=(i=n||{}).logDays,s=void 0===a?[]:a,o=i.lastRewarded,c=void 0===o?0:o,!(s.length>As.MaxDays)){e.next=5;break}return e.abrupt("return",!0);case 5:if(!(As.MockTime>0)){e.next=9;break}if(!(Date.now()-c>=1e3*As.MockTime)){e.next=9;break}return e.abrupt("return",!0);case 9:if(!(0,Yr.Gm)(c)){e.next=11;break}return e.abrupt("return",!1);case 11:return e.abrupt("return",!0);case 12:case"end":return e.stop()}}),e)}))),r.rewardsData=[],r.createPopup(),r.createPopupContents(),r.setDepth(Pi.Ks.POPUP),r.background.setAlpha(.8),r}(0,o.Z)(t,e);var n=t.prototype;return n.open=function(){var t=(0,s.Z)(h().mark((function t(){return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.checkOpenable();case 2:if(t.sent){t.next=5;break}return t.abrupt("return");case 5:return e.prototype.open.call(this),t.next=8,this.updateRewardsData();case 8:this.createDayBlocks(),this.runOpenAnimation();case 10:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),n.claimReward=function(e){var t;"function"===typeof this.onReward&&((null==(t=this.logDays)?void 0:t.length)<1||(this.logDays[this.logDays.length-1]=!0,ls(this.logDays),this.onReward(e),this.scene.audio.playSound(Fi.Z.DAILY_REWARD),this.runCloseAnimation()))},n.getCurrentRewardValue=function(){var e,t=R()(e=this.rewardsData).call(e,(function(e){return e.status===rs.READY}));return(null==t?void 0:t.value)||0},n.getRewardByDay=function(e){var t;return R()(t=this.rewardsData).call(t,(function(t){return t.id===e}))||Ss},n.runOpenAnimation=function(){this.setVisible(!0),this.scene.audio.playSound(Fi.Z.POPUP_SHOW),this.runBackgroundEntrancesAnimation(0,300),this.runPopupEntrancesAnimation(150,400),this.runPopupContentEntrancesAnimation(300,300)},n.runCloseAnimation=function(){this.scene.audio.playSound(Fi.Z.POPUP_OFF,{volume:.6}),this.runPopupExitsAnimation(0,200)},n.runBackgroundEntrancesAnimation=function(e,t){if(!this.backgroundFadeInAnimation){var n=this.scene.game.globalScene;this.backgroundFadeInAnimation=new da.Z({targets:[this.background],delay:e,duration:t,props:{alpha:{getStart:function(){return 0},getEnd:function(){return.8}}},onUpdate:function(e,t){n instanceof wa.Z&&n.requestBackgroundMaskUpdate(Pi.o4.DAILY_REWARD_SCREEN,t.alpha)}})}this.backgroundFadeInAnimation.play()},n.runPopupEntrancesAnimation=function(e,t){this.popupShowUpAnimation||(this.popupShowUpAnimation=new vr({targets:[this.popup],delay:e,duration:t,props:{scale:{start:0,from:0,to:1},alpha:{start:1,from:1,to:1}}})),this.popupShowUpAnimation.play()},n.runPopupContentEntrancesAnimation=function(e,t){var n,i=this.dayBlocks.getChildren();i.length<1||(null==(n=this.contentShowUpAnimation)||n.remove(),this.contentShowUpAnimation=new fa.Z({targets:i,duration:t,delay:this.scene.tweens.stagger(150,{start:e}),props:{alpha:{start:0,from:0,to:1}}}),this.contentShowUpAnimation.play())},n.runPopupExitsAnimation=function(e,t){var n=this;this.popupExitsAnimation||(this.popupExitsAnimation=new pa.Z({targets:[this.popup],delay:e,duration:t,props:{y:250,scale:0},onComplete:function(){n.scene.screen.close(n.name);var e=n.scene.game.globalScene;e instanceof wa.Z&&e.requestBackgroundMaskUpdate(Pi.o4.DAILY_REWARD_SCREEN,0)}})),this.dayBlocks.destroy(!0,!0),this.popupExitsAnimation.play()},n.createPopup=function(){this.popup=new Sr(this.scene,0,0,310,390),this.add(this.popup),Phaser.Display.Align.In.Center(this.popup,this.zone)},n.createPopupContents=function(){this.createTitle(),this.createLoading(),this.createClaimButton(),this.createClaimX2Button()},n.createTitle=function(){var e=this.scene.add.container(),t=30,n=-10;if("ru"===this.scene.lang.getCurrentLanguage())t=27,n=-7;var i=this.scene.make.image({key:gs,frame:vs.RIBBON_SHORT});i.setWorldSize(271,81);var a=this.scene.make.bitmapText({font:Sa.Z.PRIMARY.KEY,size:this.scene.fontSize(t),text:this.scene.lang.Text.DAILY_REWARDS});Phaser.Display.Align.In.Center(a,i,0,n);var r=new ga.Z(this.scene,gs,vs.BUTTON_CLOSE,38,38);r.setName("Close"),r.useSound=!1,r.onClick=this.handleClosePopup,Phaser.Display.Align.In.RightCenter(r,i,35,15),e.add([i,a,r]),this.popup.add(e),Phaser.Display.Align.In.TopCenter(e,this.popup)},n.createLoading=function(){this.loading=new ns.Z(this.scene),this.loading.setVisible(!1),this.loading.setTint(12237498),this.popup.add(this.loading),Phaser.Display.Align.In.Center(this.loading,this.popup)},n.createDayBlocks=function(){var e,t,n=this;null==(e=this.dayBlocks)||e.destroy(!0,!0);var i=As.MaxDays;this.dayBlocks=this.scene.make.group({maxSize:i}),mr()(t=new Array(i)).call(t,null).forEach((function(e,t){var i=n.createDayBlock(t+1);n.dayBlocks.add(i)})),Phaser.Actions.GridAlign(this.dayBlocks.getChildren(),{width:3,height:2,cellWidth:92,cellHeight:112,x:-88,y:-75})},n.createDayBlock=function(e){var t=this.getRewardByDay(e),n=t.type,i=t.value,a=t.status,r=void 0===a?"":a,s=new fs(this.scene,{day:e,type:n,value:i,status:r});return s.setAlpha(0),this.popup.add(s),s},n.createClaimButton=function(){this.claimButton=new ga.Z(this.scene,gs,vs.BUTTON_BLUE_CIRCLE,79,68),this.claimButton.setName("Claim");var e=22,t=-3;if("ru"===this.scene.lang.getCurrentLanguage())e=20,t=-1;var n=this.scene.make.bitmapText({font:Sa.Z.PRIMARY.KEY,size:this.scene.fontSize(e),text:this.scene.lang.Text.CLAIM,origin:{x:.5,y:.5}});this.claimButton.add(n),Phaser.Display.Align.In.Center(n,this.claimButton,0,t),this.popup.add(this.claimButton),Phaser.Display.Align.In.BottomCenter(this.claimButton,this.popup,-86,-30),this.claimButton.onClick=this.handleOnClaim},n.createClaimX2Button=function(){this.claimButton2X=new ga.Z(this.scene,gs,vs.BUTTON_GREEN_SHORT,161,68),this.claimButton2X.setName("ClaimX2");var e=22,t=-38,n=24,i=-3;if("ru"===this.scene.lang.getCurrentLanguage())e=20,t=-42,n=22,i=-1;var a=this.scene.make.bitmapText({font:Sa.Z.PRIMARY.KEY,size:this.scene.fontSize(e),text:this.scene.lang.Text.CLAIM_X2,origin:{x:0,y:.5}}),r=this.scene.make.image({key:gs,frame:vs.ICON_ADS});r.setWorldSize(37,34),Phaser.Display.Align.In.Center(r,this.claimButton2X,t,-2),Phaser.Display.Align.In.Center(a,this.claimButton2X,n,i),this.claimButton2X.add([a,r]),this.popup.add(this.claimButton2X),Phaser.Display.Align.In.BottomCenter(this.claimButton2X,this.popup,52,-30),this.claimButton2X.onClick=this.handleOnClaimX2},t}(GameCore.Screen),bs=Ts,Is=Ui.Z.DEFAULT.KEY,ws=function(e){function t(t,n){var i;return(i=e.call(this,t,Is,n.backgroundOn)||this).options=void 0,i.icon=void 0,i.getFrameByStatus=function(){var e=i.options,t=e.enable,n=e.frameOn,a=e.frameOff;return t?n:a},i.getBackgroundByStatus=function(){var e=i.options,t=e.enable,n=e.backgroundOn,a=e.backgroundOff;return t?n:a},i.createButton=function(e){var t=i.getBackgroundByStatus();i.button=i.scene.add.image(0,0,e,t),i.add(i.button)},i.options=n,i.createIcon(),i}(0,o.Z)(t,e);var n=t.prototype;return n.processCallback=function(e){var t=this.options.enable;this.updateStatus(!t),e(!t)},n.updateStatus=function(e){this.options.enable=e;var t=this.getFrameByStatus();this.icon.setFrame(t);var n=this.getBackgroundByStatus();this.button.setFrame(n)},n.createIcon=function(){var e=this.getFrameByStatus();this.icon=this.scene.make.image({key:Is,frame:e}),this.add(this.icon),Phaser.Display.Align.In.Center(this.icon,this.button)},n.logButtonEvent=function(){var e=this.getParentName(),t=this.name,n=!this.options.enable;this.scene.analytics.event(Dt._.BUTTON_CLICK,{button_name:t,screen_name:e,enable:n})},t}(ga.Z),Cs=function(){var e=GameCore.Utils.Device,t=window.navigator.vibrate;return e.isAndroid()&&"function"===typeof t||e.isMobileWeb()&&"function"===typeof t},xs=function(){var e=(0,s.Z)(h().mark((function e(t){var n,i,a,r,o;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=Math.round(t/80),i=0,a=function(){var e=(0,s.Z)(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,FBInstant.performHapticFeedbackAsync();case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0);case 8:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(){return e.apply(this,arguments)}}();case 3:if(!(i<n)){e.next=11;break}return r=a(),o=(0,Yr.qZ)(80),i+=1,e.next=9,u().all([r,o]);case 9:e.next=3;break;case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Os=function(e){window.navigator.vibrate(0),window.navigator.vibrate(e)},_s=function(e){try{if(!Cs())return!1;var t=GameCore.Utils.Device;t.isAndroid()||t.isMobileWeb()?Os(e):t.isIOS()&&xs(e).catch((function(e){}))}catch(n){}},Rs=Ui.Z.DEFAULT,Ps=Rs.KEY,ks=Rs.FRAME,Ms=function(e){function t(t,n,i,a){var r;return(r=e.call(this,t,n,i,a)||this).popup=void 0,r.title=void 0,r.buttonClose=void 0,r.contents=void 0,r.settingMusic=void 0,r.settingSound=void 0,r.settingVibrate=void 0,r.popupShowUpAnimation=void 0,r.popupFadeOutAnimation=void 0,r.contentShowUpAnimation=void 0,r.handleClose=function(){r.runCloseAnimation()},r.handleMusicSetting=function(e){r.scene.player.setSetting("music",e),e?r.scene.audio.playMusic():r.scene.audio.pauseMusic()},r.handleSoundSetting=function(e){r.scene.player.setSetting("sound",e)},r.handleVibrateSetting=function(e){r.scene.player.setSetting("vibrate",e)},r.createPopup(),r.createTitle(),r.createButtons(),r.addItem(),r.arrangeItems(),r.createInput(),r.setDepth(Pi.Ks.POPUP),r.background.setAlpha(.8),r}(0,o.Z)(t,e);var n=t.prototype;return n.open=function(){e.prototype.open.call(this);var t=this.scene.player.getPlayerSettings(),n=t.music,i=t.sound,a=t.vibrate;if(this.settingMusic.updateStatus(n),this.settingSound.updateStatus(i),this.settingVibrate.updateStatus(a),!Cs()){this.settingVibrate.setVisible(!1);Phaser.Display.Align.In.Center(this.settingMusic,this.popup,-65,5),Phaser.Display.Align.In.Center(this.settingSound,this.popup,65,5)}this.runOpenAnimation()},n.createInput=function(){this.buttonClose.useSound=!1,this.buttonClose.onClick=this.handleClose,this.settingMusic.onClick=this.handleMusicSetting,this.settingSound.onClick=this.handleSoundSetting,this.settingVibrate.onClick=this.handleVibrateSetting},n.createPopup=function(){this.popup=new Sr(this.scene,0,0,310,180),this.add(this.popup),Phaser.Display.Align.In.Center(this.popup,this.zone)},n.createTitle=function(){this.title=this.scene.add.container();var e=this.scene.make.image({key:Ps,frame:ks.RIBBON_SHORT});e.setWorldSize(271,81);var t=this.scene.make.bitmapText({font:Sa.Z.PRIMARY.KEY,size:this.scene.fontSize(30),text:this.scene.lang.Text.SETTINGS,origin:{x:.5,y:.5}});Phaser.Display.Align.In.Center(t,e,0,-10),this.buttonClose=new ga.Z(this.scene,Ps,ks.BUTTON_CLOSE,38,38),this.buttonClose.setName("Close"),Phaser.Display.Align.In.RightCenter(this.buttonClose,e,-5,-5),this.title.add([e,t,this.buttonClose])},n.createButtons=function(){var e=this.scene.player.getPlayerSettings(),t=e.music,n=e.sound,i=e.vibrate;this.createMusicButton(t),this.createVibrateButton(i),this.createSoundButton(n)},n.createMusicButton=function(e){this.settingMusic=new ws(this.scene,{enable:e,frameOn:ks.ICON_MUSIC_ON,frameOff:ks.ICON_MUSIC_OFF,backgroundOn:ks.BUTTON_GREEN_CIRCLE,backgroundOff:ks.BUTTON_GREEN_CIRCLE}),this.settingMusic.setName("Music"),this.settingMusic.icon.setWorldSize(43,43),this.settingMusic.button.setWorldSize(70,70)},n.createVibrateButton=function(e){this.settingVibrate=new ws(this.scene,{enable:e,frameOn:ks.ICON_VIB_ON,frameOff:ks.ICON_VIB_OFF,backgroundOn:ks.BUTTON_GREEN_CIRCLE,backgroundOff:ks.BUTTON_GREEN_CIRCLE}),this.settingVibrate.setName("Vibrate"),this.settingVibrate.icon.setWorldSize(43,43),this.settingVibrate.button.setWorldSize(70,70)},n.createSoundButton=function(e){this.settingSound=new ws(this.scene,{enable:e,frameOn:ks.ICON_SOUND_ON,frameOff:ks.ICON_SOUND_OFF,backgroundOn:ks.BUTTON_GREEN_CIRCLE,backgroundOff:ks.BUTTON_GREEN_CIRCLE}),this.settingSound.setName("Sound"),this.settingSound.icon.setWorldSize(43,43),this.settingSound.button.setWorldSize(70,70)},n.addItem=function(){this.popup.add([this.title,this.settingVibrate,this.settingMusic,this.settingSound]),this.contents=this.scene.add.group(),this.contents.addMultiple([this.settingVibrate,this.settingMusic,this.settingSound])},n.arrangeItems=function(){Phaser.Display.Align.In.TopCenter(this.title,this.popup);Phaser.Display.Align.In.Center(this.settingVibrate,this.popup,0,5),Phaser.Display.Align.In.Center(this.settingSound,this.popup,-90,5),Phaser.Display.Align.In.Center(this.settingMusic,this.popup,90,5)},n.runOpenAnimation=function(){var e;if(null==(e=this.popupShowUpAnimation)||null==(e=e.tween)||!e.isPlaying()){this.scene.audio.playSound(Fi.Z.POPUP_SHOW);var t=this.scene.game.globalScene;t instanceof wa.Z&&t.requestBackgroundMaskUpdate(Pi.o4.SETTINGS_SCREEN,this.background.alpha),this.runPopupEntrancesAnimation(0,400),this.runPopupContentEntrancesAnimation(200,300)}},n.runCloseAnimation=function(){var e;null!=(e=this.popupFadeOutAnimation)&&null!=(e=e.tween)&&e.isPlaying()||(this.scene.audio.playSound(Fi.Z.POPUP_OFF,{volume:.6}),this.runPopupExitsAnimation(0,200))},n.runPopupEntrancesAnimation=function(e,t){if(!this.popupShowUpAnimation){var n=this.popup,i=n.y,a=n.scale;this.popupShowUpAnimation=new vr({targets:[this.popup],delay:e,duration:t,props:{y:{from:350,to:i},alpha:{start:1,from:1,to:1},scale:{start:0,from:0,to:a}}})}this.popupShowUpAnimation.play()},n.runPopupContentEntrancesAnimation=function(e,t){var n;null==(n=this.contentShowUpAnimation)||n.remove(),this.contentShowUpAnimation=new fa.Z({targets:this.contents.getChildren(),duration:t,delay:e,props:{alpha:{start:0,from:0,to:1}}}),this.contentShowUpAnimation.play()},n.runPopupExitsAnimation=function(e,t){var n=this;this.popupFadeOutAnimation||(this.popupFadeOutAnimation=new pa.Z({targets:[this.popup],delay:e,duration:t,props:{y:250,scale:0},onComplete:function(){n.popup.setY(0),n.scene.screen.close(n.name);var e=n.scene.game.globalScene;e instanceof wa.Z&&e.requestBackgroundMaskUpdate(Pi.o4.SETTINGS_SCREEN,0)}})),this.popupFadeOutAnimation.play()},t}(GameCore.Screen),Ds=Ms,Ns=Ui.Z.TITLE,Ls=Ns.KEY,Bs=Ns.FRAME,Gs=function(e){function t(t,n,i){var a;return(a=e.call(this,t,n,i)||this).logo=void 0,a.gems=void 0,a.logoAnimation=void 0,a.gemsAnimation=void 0,a.drawGems(),a.drawLogo(),a.setDepth(_i.Z.LOGO),a.runAnimations(),t.add.existing((0,Gi.Z)(a)),a}(0,o.Z)(t,e);var n=t.prototype;return n.drawLogo=function(){var e=this.scene.lang.getCurrentLanguage();switch(this.logo=this.scene.add.image(0,0,Ls,this.scene.lang.Texture.LOGO),e){case"ja":this.logo.setWorldSize(232,226);break;case"id":this.logo.setWorldSize(229.5,226);break;case"en":this.logo.setWorldSize(210,239);break;case"ru":this.logo.setWorldSize(352,233);break;default:this.logo.setWorldSize(210,231)}this.add(this.logo)},n.drawGems=function(){this.gems=this.scene.add.image(0,0,Ls,Bs.TITLE_GEMS),this.gems.setOrigin(.5,.8),this.gems.setWorldSize(233,84.5),this.add(this.gems)},n.runAnimations=function(){this.runLogoAnimation(),this.runGemsAnimation()},n.runLogoAnimation=function(){this.logoAnimation||(this.logoAnimation=new ua({targets:[this.logo],duration:1400,repeatDelay:200,props:{scale:"+=0.03"}})),this.logoAnimation.play()},n.runGemsAnimation=function(){this.gemsAnimation||(this.gemsAnimation=new ua({targets:[this.gems],duration:1500,repeatDelay:200,props:{scale:"+=0.1"}})),this.gemsAnimation.play()},t}(Phaser.GameObjects.Container),Us=Ui.Z.DEFAULT,Fs=Us.KEY,Zs=Us.FRAME,Hs=function(e){function t(t){var n;return(n=e.call(this,t,Fs,Zs.BUTTON_PURPLE_SHORT)||this).button.setWorldSize(170,61),n.setName("PlayBlitz"),n.createText(),n}return(0,o.Z)(t,e),t.prototype.createText=function(){var e=this.scene.make.bitmapText({font:Sa.Z.PRIMARY.KEY,size:this.scene.fontSize(26),text:this.scene.lang.Text.BLITZ_MODE,origin:{x:.5,y:.5}});this.add(e),Phaser.Display.Align.In.Center(e,this.button,0,-6)},t}(ga.Z),Ys=Ui.Z.DEFAULT,zs=Ys.KEY,Vs=Ys.FRAME,Ws=function(e){function t(t){var n;return(n=e.call(this,t,zs,Vs.BUTTON_BLUE_SHORT)||this).button.setWorldSize(170,70.5),n.setName("PlaySingle"),n.createText(),n}return(0,o.Z)(t,e),t.prototype.createText=function(){var e=this.scene.lang.getCurrentLanguage(),t=this.scene.make.bitmapText({font:Sa.Z.PRIMARY.KEY,size:this.scene.fontSize("id"===e?21:26),text:this.scene.lang.Text.PLAY_NOW,origin:{x:.5,y:.5}});this.add(t)},t}(ga.Z),Ks=Ws,js=function(e){function t(t){var n;return(n=e.call(this,t)||this).logo=void 0,n.playSingleButton=void 0,n.playBlitzButton=void 0,n.createLogo(),n.createPlaySingleButton(),n.createPlayBlitzButton(),n.scene.add.existing((0,Gi.Z)(n)),n}(0,o.Z)(t,e);var n=t.prototype;return n.createLogo=function(){this.logo=new Gs(this.scene,0,0),this.add(this.logo)},n.createPlaySingleButton=function(){this.playSingleButton=new Ks(this.scene),this.add(this.playSingleButton)},n.createPlayBlitzButton=function(){this.playBlitzButton=new Hs(this.scene),this.add(this.playBlitzButton),Phaser.Display.Align.In.Center(this.playBlitzButton,this,0,135)},t}(Phaser.GameObjects.Container),Xs=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n.screen=void 0,n.header=void 0,n.main=void 0,n.footer=void 0,n.diamonds=void 0,n.fireworks=void 0,n.rewardScreen=void 0,n.settingsScreen=void 0,n.dailyRewardsScreen=void 0,n.dailyMissionScreen=void 0,n.scene=t,n.screen=t.screen,n.createObjects(),n}(0,o.Z)(t,e);var n=t.prototype;return n.createObjects=function(){this.createHeaderBar(),this.createMainContent(),this.createFooterBar()},n.createHeaderBar=function(){this.header=new pr(this.scene),this.header.setDepth(_i.Z.BUTTON)},n.createMainContent=function(){this.main=new js(this.scene),this.main.setDepth(_i.Z.LOGO)},n.createFooterBar=function(){this.footer=new ir(this.scene),this.footer.setDepth(_i.Z.BUTTON)},n.createSettingsScreen=function(){this.settingsScreen=this.screen.add(Pi.o4.SETTINGS_SCREEN,Ds)},n.createRewardScreen=function(){return this.screen.add(Pi.o4.REWARD_SCREEN,Pa)},n.createDailyMissionScreen=function(){return this.screen.add(Pi.o4.DAILY_MISSIONS_SCREEN,ts)},n.createDailyRewardsScreen=function(){return this.screen.add(Pi.o4.DAILY_REWARD_SCREEN,bs)},n.createFirework=function(){this.fireworks||(this.fireworks=this.scene.add.group());var e=this.fireworks.getFirstDead();if(e instanceof ji)return e.revive(),e;var t=new ji(this.scene);return this.fireworks.add(t),t},n.createDiamondDrop=function(e){this.diamonds||(this.diamonds=this.scene.add.group());var t=this.diamonds.getFirstDead();if(t instanceof $i)return t.positions=e,t;var n=new $i(this.scene,e);return n.setDepth(_i.Z.ON_TOP),this.diamonds.add(n),n},t}(ta),qs=function(){function e(e){this.scene=void 0,this.objects=void 0,this.allUI=void 0,this.groups=void 0,this.scene=e,this.objects=null,this.createGroups()}var t=e.prototype;return t.setUIObjects=function(e){this.objects=e,this.allUI.addMultiple(this.objects.getAll())},t.createGroups=function(){this.groups={},this.allUI=this.scene.add.group(),this.groups.allUI=this.allUI},t.killAllUI=function(){this.allUI.killGroup()},t.reviveAllUI=function(){this.allUI.reviveGroup()},e}(),Js=function(e){function t(t){var n;return(n=e.call(this,t)||this).objects=void 0,n.guideUI=void 0,n.objects=null,n}(0,o.Z)(t,e);var n=t.prototype;return n.alignUI=function(){if(null!==this.objects){var e=this.scene.gameZone,t=this.objects,n=t.header,i=t.main,a=t.footer;i.setPosition(0,0),Phaser.Display.Align.In.Center(i.logo,i,0,-110),Phaser.Display.Align.In.Center(i.playSingleButton,i,0,160),Phaser.Display.Align.In.Center(i.playBlitzButton,i,0,80),i.setScale(1),n.setPosition(0,0),n.setSize(e.width,50),Phaser.Display.Align.In.TopLeft(n.scoreBar,n,-25,-15),Phaser.Display.Align.In.TopRight(n.diamondBar,n,-25,-15),Phaser.Display.Align.In.BottomCenter(a,e),Phaser.Display.Align.In.Center(i,e),Phaser.Display.Align.In.TopCenter(n,e)}},n.createGroups=function(){e.prototype.createGroups.call(this),this.guideUI=this.scene.add.group(),this.groups.guideUI=this.guideUI},n.setUIObjects=function(t){e.prototype.setUIObjects.call(this,t),this.addUIObjectsToGroups()},n.addUIObjectsToGroups=function(){null!==this.objects&&this.addObjectForGuideUI()},n.addObjectForGuideUI=function(){this.objects},t}(qs),Qs=Js,$s=function(e){function t(){return e.apply(this,arguments)||this}return(0,o.Z)(t,e),t.prototype.alignUI=function(){if(null!==this.objects){var e=this.scene.gameZone,t=this.objects,n=t.header,i=t.main,a=t.footer;i.setPosition(0,0),Phaser.Display.Align.In.Center(i.logo,i,0,-110),Phaser.Display.Align.In.Center(i.playSingleButton,i,0,160),Phaser.Display.Align.In.Center(i.playBlitzButton,i,0,80),i.setScale(.8),n.setPosition(0,0),n.setSize(e.width,50),Phaser.Display.Align.In.TopLeft(n.scoreBar,n,-100,-15),Phaser.Display.Align.In.TopRight(n.diamondBar,n,-100,-15),Phaser.Display.Align.In.BottomCenter(a,e),Phaser.Display.Align.In.Center(i,e),Phaser.Display.Align.In.TopCenter(n,e)}},t}(Qs),eo=$s,to={STATUS:{READY:"ready",RUNNING:"running",STOPPED:"stopped"}},no=to.STATUS,io=function(){function e(e){this.state=void 0,this.scene=void 0,this.scene=e}var t=e.prototype;return t.init=function(){this.setState(no.READY)},t.start=function(){this.isRunning()||this.setState(no.RUNNING)},t.stop=function(){this.isRunning()&&this.setState(no.STOPPED)},t.setState=function(e){this.state=e},t.isReady=function(){return this.state===no.READY},t.isRunning=function(){return this.state===no.RUNNING},t.isStopped=function(){return this.state===no.STOPPED},e}(),ao=io,ro=n(441),so=to.STATUS,oo=function(e){function t(t){var n;return(n=e.call(this,t)||this).layout=void 0,n.objects=void 0,n.changeLayout=function(){n.scene.world.getResizeEventData().isLayoutChanged?(n.createLayouts(),n.layout.setUIObjects(n.objects),n.layout.alignUI()):n.layout.alignUI()},n.scene=t,n.createObjects(),n.createLayouts(),n.registerEvents(),n}(0,o.Z)(t,e);var n=t.prototype;return n.registerEvents=function(){this.scene.events.on(ro.Z.LAYOUT_UPDATE,this.changeLayout)},n.init=function(){this.initUILogic(),this.layout.alignUI(),this.setState(so.READY)},n.start=function(){this.isRunning()||(this.updateUIState(),this.setState(so.RUNNING))},n.stop=function(){this.isRunning()&&this.setState(so.STOPPED)},t}(ao),co=GameCore.Configs.Gameplay,uo=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n.scene=t,n}(0,o.Z)(t,e);var n=t.prototype;return n.createObjects=function(){this.objects=new Xs(this.scene)},n.createLayouts=function(){this.scene.world.isLandscape()?this.layout=new eo(this.scene):this.layout=new Qs(this.scene),this.layout.setUIObjects(this.objects)},n.initUILogic=function(){var e=this.objects,t=e.header,n=e.main,i=e.footer;t.diamondBar.onClick=this.scene.handleDiamondBarClick,n.playSingleButton.onClick=this.scene.handlePlaySingle,n.playBlitzButton.onClick=this.scene.handlePlayBlitz,i.rankIcon.onClick=this.scene.handleRankIconClick,i.dailyIcon.onClick=this.scene.handleDailyIconClick,i.giftIcon.onClick=this.scene.handleGiftIconClick,i.settingIcon.onClick=this.scene.handleSettingClick},n.updateUIState=function(){var e,t=this.objects.footer;null==(e=t.dailyIcon)||e.checkNotice(),Li.off(ki.EVENTS.NOTICE_UPDATE,t.dailyIcon.checkNotice),Li.on(ki.EVENTS.NOTICE_UPDATE,t.dailyIcon.checkNotice)},n.showSettingScreen=function(){this.objects.settingsScreen||this.objects.createSettingsScreen(),this.scene.screen.open(Pi.o4.SETTINGS_SCREEN)},n.showDailyRewardScreen=function(){var e=this,t=this.objects.dailyRewardsScreen;t||((t=this.objects.createDailyRewardsScreen()).onNoAd=this.scene.showNotifyNoAds,t.onSkipAd=this.scene.showNotifySkipAds,t.onReward=function(t){e.scene.eatDiamond(t)}),this.scene.screen.open(Pi.o4.DAILY_REWARD_SCREEN)},n.showDailyMissionScreen=function(){var e=this,t=this.objects.dailyMissionScreen;t||((t=this.objects.createDailyMissionScreen()).onReward=function(t,n){"diamond"===t&&e.scene.eatDiamond(n)},this.objects.dailyMissionScreen=t),this.scene.screen.open(Pi.o4.DAILY_MISSIONS_SCREEN)},n.showRewardScreen=function(e){var t=this,n=this.objects.rewardScreen;n||((n=this.objects.createRewardScreen()).onReward=function(){var n=(0,s.Z)(h().mark((function n(i){return h().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(t.scene.eatDiamond(i),e){n.next=3;break}return n.abrupt("return");case 3:return n.next=5,t.scene.player.setCustomData("lastReceiveGift",Date.now());case 5:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()),this.scene.screen.open(Pi.o4.REWARD_SCREEN,{awardDiamonds:co.AwardDiamonds})},t}(oo),lo=uo,ho=(GameCore.Configs.Gameplay,function(e){function t(){for(var t,n,i=arguments.length,a=new Array(i),r=0;r<i;r++)a[r]=arguments[r];return(n=e.call.apply(e,O()(t=[this]).call(t,a))||this).fireworks=void 0,n.currentDiamond=void 0,n.timerFireworks=void 0,n.timerDailyRewards=void 0,n.layoutManager=void 0,n.run=function(){var e;n.layoutManager.init(),n.currentDiamond=0,n.updateCurrentBestScore(),n.updateCurrentDiamond(),null==(e=n.timerDailyRewards)||e.remove(),n.timerDailyRewards=n.time.delayedCall(300,(function(){n.layoutManager.showDailyRewardScreen()})),n.facebook.attemptToAddShortcut(),n.layoutManager.start(),n.timerFireworks&&n.timerFireworks.remove(),n.fireFireworks(),n.audio.playMusic()},n.eatDiamond=function(e){n.createDiamondsEffect(10,e);var t=n.player.getDiamond();n.player.setCustomData("diamond",t+e),Li.emit(ki.COLLECT_DIAMONDS.EVENTS.COLLECT_DIAMONDS,{type:"diamond",value:e})},n.fireFireworks=function(){var e=n.gameZone,t=e.width,i=e.height,a=n.layoutManager.objects.main.logo.getWorldPosition().y;n.timerFireworks=n.tweens.addCounter({duration:300,repeat:Phaser.Math.RND.between(2,4),onRepeat:function(){var e=n.layoutManager.objects.createFirework();e.randomColor();var r=Phaser.Math.RND.between(20,t-20);e.fire(r,i,a)},completeDelay:1e3,onComplete:n.fireFireworks})},n.showNotifyNoAds=function(){n.game.globalScene.screen.open(Pi.o4.NOTIFY_SCREEN,{message:n.lang.Text.NO_ADS,duration:1200,loading:!1})},n.showNotifySkipAds=function(){n.game.globalScene.screen.open(Pi.o4.NOTIFY_SCREEN,{message:n.lang.Text.CANCELLED_AD,duration:1500,loading:!1})},n.handlePlaySingle=(0,s.Z)(h().mark((function e(){var t;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=n.player.getPlayerId(),e.next=4,n.match.single.start.processAsync({playerId:t});case 4:n.scene.switch(ui.C.GAME_SCENE),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])}))),n.handlePlayBlitz=(0,s.Z)(h().mark((function e(){var t;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=n.player.getPlayerId(),e.next=4,n.match.blitz.start.processAsync({playerId:t});case 4:n.scene.switch(ui.C.GAME_SCENE),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])}))),n.handleSettingClick=function(){n.layoutManager.showSettingScreen()},n.handleRankIconClick=function(){n.scene.switch(ui.C.LEADERBOARD_SCENE)},n.handleDailyIconClick=function(){n.layoutManager.showDailyMissionScreen()},n.handleGiftIconClick=function(){n.layoutManager.showRewardScreen(!0)},n.handleDiamondBarClick=function(){n.layoutManager.showRewardScreen(!1)},n}(0,o.Z)(t,e);var n=t.prototype;return n.updateCurrentBestScore=function(){var e,t,n=this.player.getBestScore(),i=this.player.getPlayerId(),a=null!=(e=null==(t=this.match.getMatchState().profiles[i])?void 0:t.bestScore)?e:0,r=n>a?n:a;this.layoutManager.objects.header.scoreBar.setValue(r)},n.updateCurrentDiamond=function(){var e=this.player.getDiamond();this.setDiamond(e)},n.preload=function(){var e=this;this.events.on("wake",this.run),this.events.on("resume",this.run),this.events.on("create",this.run),this.events.on(Phaser.Scenes.Events.PAUSE,(function(){var t;null==(t=e.timerDailyRewards)||t.remove()})),this.events.on(Phaser.Scenes.Events.SLEEP,(function(){var t;null==(t=e.timerDailyRewards)||t.remove()}))},n.create=function(){e.prototype.create.call(this),this.createBackground(Ri.Z.BACKGROUND.KEY),this.createLayoutManager(),this.fireworks=this.add.group(),this.fireFireworks()},n.createLayoutManager=function(){this.layoutManager=new lo(this)},n.createDiamondsEffect=function(e,t){var n=this,i=this.layoutManager.objects,a=i.header,r=i.main,s=a.diamondBar.getWorldPosition(),o=s.x,c=s.y,u=r.logo.getWorldPosition(),l=u.x,h=u.y,d=0;this.tweens.addCounter({duration:1e3/e,repeat:e,repeatDelay:30,onRepeat:function(){var i=Phaser.Math.RND.between(l-60,l+60),r=n.layoutManager.objects.createDiamondDrop({from:{x:i,y:h-80},to:{x:o-40,y:c+7}});r.onUpdate=function(){a.setDepth(_i.Z.ON_TOP)},r.onComplete=function(){var i=n.currentDiamond+Math.floor(t/e);n.setDiamond(i),++d>=e&&a.setDepth(_i.Z.ITEM)},r.run()}})},n.setDiamond=function(e){var t=this.layoutManager.objects.header,n=e<0?0:e;this.currentDiamond=n,t.diamondBar.setValue(n)},t}(Bi.Z));var po=ho,fo=new Qe.Z("10","Your Friend",Ri.Z.AVATAR.FILE).toObject(),mo=n(619),go=function(e){return e[rn]},vo=(0,ue.P1)([function(e){return go(e).leaders}],(function(e){return e})),yo=(0,ue.P1)([function(e){return go(e).isRequesting}],(function(e){return e})),Eo=function(e){return e.SINGLE="single",e.BLITZ="blitz",e.ONLINE="online",e.TOURNAMENT="tournament",e.MATCHING_GROUP="matching-group",e.CHALLENGE_FRIEND="challenge-friend",e}(Eo||{}),Ao=Eo,So=n(616),To=Ui.Z.DEFAULT,bo=To.KEY,Io=To.FRAME,wo=function(e){function t(t){var n;return(n=e.call(this,t,bo,Io.BUTTON_YELLOW_CIRCLE,100.05,78.2)||this).scene=void 0,n.setName("Home"),n.scene=t,n.createIcon(),n}return(0,o.Z)(t,e),t.prototype.createIcon=function(){var e=this.scene.make.image({key:bo,frame:Io.ICON_FLAT_HOME});e.setSize(43,43).setDisplaySize(43,43),Phaser.Display.Align.In.Center(e,this.button),this.add(e)},t}(ga.Z),Co=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n.homeButton=void 0,n.entrancesAnimation=void 0,n.runAnimation=function(){n.entrancesAnimation.play()},n.scene=t,n.setName("FooterBar"),n.createHomeButton(),n.createEntrancesAnimation(),n.alignIcons(),n.scene.add.existing((0,Gi.Z)(n)),n}(0,o.Z)(t,e);var n=t.prototype;return n.createEntrancesAnimation=function(){this.entrancesAnimation=new So.Z({targets:[this],delay:800,props:{y:"-=5",alpha:{start:0,from:0,to:1}}})},n.alignIcons=function(){Phaser.Display.Align.In.Center(this.homeButton,this,0,-6)},n.createHomeButton=function(){this.homeButton=new wo(this.scene),this.add(this.homeButton)},t}(Phaser.GameObjects.Container),xo={targets:[],yoyo:!0,duration:120,ease:Phaser.Math.Easing.Circular.Out,props:{scale:{from:1,to:1.3}}},Oo=function(e){function t(t){return e.call(this,xo,t)||this}return(0,o.Z)(t,e),t}(na.Z),_o=function(e){function t(t,n){var i;return(i=e.call(this,t)||this).payload=void 0,i.mainText=void 0,i.shadowText=void 0,i.payload=n,i.createMainText(),i.createShadowText(),i.updateSize(),i.moveDown(i.shadowText),i.scene.add.existing((0,Gi.Z)(i)),i}(0,o.Z)(t,e);var n=t.prototype;return n.setText=function(e){this.mainText.setText(e),this.shadowText.setText(e),this.updateSize()},n.setTintText=function(e,t,n,i){this.mainText.setTint(e,t,n,i)},n.setDropShadow=function(e,t,n,i){void 0===i&&(i=1),this.shadowText.setVisible(!0),this.shadowText.setTint(n),this.shadowText.setAlpha(i),Phaser.Display.Align.In.Center(this.shadowText,this.mainText,e,t)},n.updateSize=function(){var e=this.mainText,t=e.width,n=e.height;this.setSize(t,n)},n.createMainText=function(){this.mainText=this.scene.make.bitmapText({font:this.payload.font,size:this.payload.size,origin:{x:.5,y:.5}}),this.add(this.mainText)},n.createShadowText=function(){this.shadowText=this.scene.make.bitmapText({font:this.payload.font,size:this.payload.size,origin:{x:.5,y:.5},visible:!1}),this.add(this.shadowText)},t}(Phaser.GameObjects.Container),Ro=Ui.Z.DEFAULT,Po=Ro.KEY,ko=Ro.FRAME,Mo=function(e){function t(t){var n;return(n=e.call(this,t)||this).bestScore=void 0,n.payload=void 0,n.theCat=void 0,n.popup=void 0,n.ribbon=void 0,n.yourScoreText=void 0,n.bestScoreText=void 0,n.currentScoreText=void 0,n.entrancesAnimation=void 0,n.scoreAnimation=void 0,n.counterAnimation=void 0,n.scene=t,n.bestScore=0,n.createPopup(),n.createTheCat(),n.createRibbon(),n.createYourScoreText(),n.createCurrentScore(),n.createBestScore(),n.createScoreAnimation(),n.createEntrancesAnimation(),n.scene.add.existing((0,Gi.Z)(n)),n}(0,o.Z)(t,e);var n=t.prototype;return n.updateData=function(e){this.payload=e;var t=e.bestScore,n=e.currentScore,i=e.scorePopupCallback;if(this.setBestScore(t),n<=t)return this.setCurrentScore(n),void this.runScoreAnimation();this.runAnimation(i)},n.runAnimation=function(e){var t=this;this.runScoreCounter(e),this.scene.time.delayedCall(1300,(function(){t.entrancesAnimation.play(),t.scene.audio.playSound(Fi.Z.SCORE_COUNTER)}))},n.runScoreCounter=function(e){var t,n=this,i=this.payload,a=i.bestScore,r=i.currentScore;null==(t=this.counterAnimation)||t.remove(),this.counterAnimation=this.scene.tweens.addCounter({from:0,to:r,delay:500,duration:2e3,completeDelay:300,onUpdate:function(e){var t=Math.floor(e.getValue());n.runScoreAnimation(),n.setCurrentScore(t)},onComplete:function(){n.bestScore=a,n.setBestScore(r),n.setCurrentScore(r),n.counterAnimation.remove(),e()}})},n.runScoreAnimation=function(){this.scoreAnimation.play()},n.setBestScore=function(e){this.bestScoreText.setText(this.scene.lang.Text.BEST_SCORE+": "+e)},n.setCurrentScore=function(e){this.currentScoreText.setText(""+e)},n.createPopup=function(){this.popup=new Sr(this.scene,0,0,284,240),this.add(this.popup)},n.createTheCat=function(){this.theCat=new Cr(this.scene),Phaser.Display.Align.In.TopCenter(this.theCat,this.popup),this.add(this.theCat)},n.createRibbon=function(){this.ribbon=this.scene.make.image({key:Po,frame:ko.RIBBON_LONG}),this.ribbon.setSize(341,80).setDisplaySize(341,80),Phaser.Display.Align.In.Center(this.ribbon,this.theCat,0,93),this.add(this.ribbon)},n.createYourScoreText=function(){this.yourScoreText=this.scene.make.bitmapText({font:Sa.Z.PRIMARY.KEY,size:this.scene.fontSize(30),origin:{x:.5,y:.5},text:this.scene.lang.Text.YOUR_SCORE}),Phaser.Display.Align.In.Center(this.yourScoreText,this.ribbon,0,-10),this.add(this.yourScoreText)},n.createCurrentScore=function(){this.currentScoreText=new _o(this.scene,{font:Sa.Z.PRIMARY.KEY,size:this.scene.fontSize(60)}),this.currentScoreText.setTintText(15779090,15779090,15704623,15704623),this.currentScoreText.setDropShadow(0,2,8804140),Phaser.Display.Align.In.Center(this.currentScoreText,this.popup,0,30),this.add(this.currentScoreText)},n.createBestScore=function(){this.bestScoreText=this.scene.make.bitmapText({font:Sa.Z.PRIMARY.KEY,size:this.scene.fontSize(24),origin:{x:.5,y:.5},text:this.scene.lang.Text.BEST_SCORE+": "+this.bestScore}),this.bestScoreText.setTint(10494183),Phaser.Display.Align.In.BottomCenter(this.bestScoreText,this.popup,0,-25),this.add(this.bestScoreText)},n.createEntrancesAnimation=function(){this.entrancesAnimation=new ua({targets:[this],repeat:0,duration:200,props:{scale:"+=0.03"}})},n.createScoreAnimation=function(){this.scoreAnimation=new Oo({targets:[this.currentScoreText],props:{scale:{from:1,to:1.3}}})},t}(Phaser.GameObjects.Container),Do=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n.bestScoreBlock=void 0,n.scene=t,n.createBestScoreBlock(),n.scene.add.existing((0,Gi.Z)(n)),n}return(0,o.Z)(t,e),t.prototype.createBestScoreBlock=function(){this.bestScoreBlock=new Mo(this.scene),this.add(this.bestScoreBlock)},t}(Phaser.GameObjects.Container),No=n(608),Lo=function(e){function t(t,n){var i;(i=e.call(this,t)||this).payload=void 0,i.loading=void 0,i.photo=void 0,i.avtFrame=void 0,i.background=void 0,i.loadPhotoTimer=void 0,i.handleLoadPhotoAfterDelay=function(e,t){return function(){var n=i.scene.textures.get(e);n&&n.key===e?i.handleLoadComplete(e):(i.scene.load.once("filecomplete-image-"+e,i.handleLoadComplete),i.scene.load.image(e,t),i.scene.load.start())}},i.handleLoadComplete=function(e){if(i.scene){var t=i.payload,n=t.id,a=t.radius,r=void 0===a?0:a;if(n&&n===e){var s=i.getPhotoId(),o=i.scene.textures.get(s);if(o&&o.key===s)i.setPhoto(o.key);else if(0!=r&&r<100){if(!GameCore.Utils.Image.drawBorder({scene:i.scene,key:n,newKey:s,radius:r}))return void i.showLoading(!1);i.setPhoto(s)}else if(100==r){if(!GameCore.Utils.Image.drawCircle({scene:i.scene,key:n,newKey:s}))return void i.showLoading(!1);i.setPhoto(s)}else i.setPhoto(n)}}},i.handleLoadPhotoFailed=function(e){e.key===i.payload.id&&i.setDefaultAvatar(e.key)},i.scene.add.existing((0,Gi.Z)(i)),i.payload=n,i.setSize(n.width,n.height),i.createBackground(),i.createLoading(),i.createPhoto(),i.createFrame();var a=i.payload,r=a.id,s=a.url,o=a.radius;return r&&s&&i.loadPhoto(r,s,o),i.addDefaultListeners(),i}(0,o.Z)(t,e);var n=t.prototype;return n.setFrame=function(e){this.avtFrame.setFrame(e),this.avtFrame.setVisible(!0)},n.setBackground=function(e){this.background.setFrame(e)},n.getPhotoId=function(){var e=this.payload,t=e.id,n=e.radius,i=void 0===n?0:n;return t?i>0?t+"_bordered_"+i:t:Ri.Z.AVATAR.KEY},n.loadPhoto=function(e,t,n){var i;if(void 0===n&&(n=0),this.payload.id=e,this.payload.url=t,this.payload.radius=n,null==(i=this.loadPhotoTimer)||i.remove(),e&&t){var a=this.scene.textures.get(e);if(a&&a.key===e)this.handleLoadComplete(e);else{this.showLoading(!0);var r=this.payload.loadDelay||0;this.loadPhotoTimer=this.scene.time.delayedCall(r,this.handleLoadPhotoAfterDelay(e,t))}}else this.setPhoto(Ri.Z.AVATAR.KEY)},n.addDefaultListeners=function(){var e=this;this.scene.load.on(Phaser.Loader.Events.FILE_LOAD_ERROR,this.handleLoadPhotoFailed),this.on(Phaser.GameObjects.Events.DESTROY,(function(){var t;null==(t=e.loadPhotoTimer)||t.remove(),e.scene.load.off(Phaser.Loader.Events.FILE_LOAD_ERROR,e.handleLoadPhotoFailed)}))},n.setDefaultAvatar=function(e){this.loadPhoto(e,Ri.Z.AVATAR.FILE,this.payload.radius)},n.createBackground=function(){var e=this.payload,t=e.key,n=e.background;this.background=this.scene.make.image({key:t,frame:n}),this.background.setWorldSize(this.width,this.height),this.add(this.background)},n.createLoading=function(){this.loading=new ns.Z(this.scene),this.loading.setWorldSize(.75*this.width,.75*this.height),this.loading.setVisible(!1),this.add(this.loading)},n.createPhoto=function(){this.photo=this.scene.make.image({x:0,y:0,origin:{x:.5,y:.5},visible:!1}),this.add(this.photo)},n.createFrame=function(){var e=this.payload,t=e.key,n=e.frame,i=e.width,a=e.height;n?(this.avtFrame=this.scene.make.image({key:t,frame:n}),this.avtFrame.setWorldSize(i,a)):this.avtFrame=this.scene.make.image({x:0,y:0,origin:{x:.5,y:.5},visible:!1}),this.add(this.avtFrame)},n.showLoading=function(e){this.photo.setVisible(!e),this.loading.setVisible(e)},n.setPhoto=function(e){this.showLoading(!1),this.photo.setTexture(e),this.photo.setFrame(0);var t=Math.max(this.width,this.height)-7;this.photo.setWorldSize(t,t),Phaser.Display.Align.In.Center(this.photo,this.background)},t}(Phaser.GameObjects.Container),Bo=n(617),Go=n(618),Uo=n(348),Fo=n.n(Uo),Zo=function(e){return e.SOLO="solo",e.TOURNAMENT="tournament",e.SHARE_INVITE="share_invite",e.MATCHING_GROUP="matching_group_match",e.CHALLENGE_FRIEND="challenge_friend_match",e}(Zo||{}),Ho=Zo,Yo=Ho,zo=function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).name="WideFrameRenderFail",i.message=t||"Wide frame render fail",i.payload=n,i}return(0,o.Z)(t,e),t}((0,G.Z)(Error)),Vo="global",Wo="friend",Ko=GameCore.Configs,jo=Ko.ApiHost,Xo=Ko.OtherHost,qo=Ko.LeadersBoard,Jo=qo.Prefix,Qo=qo.LeaderboardId,$o=qo.Name,ec=Jo+"/"+Qo+"/leaders",tc=Jo+"/"+Qo+"/players",nc=function(e){var t="";return Qo?(e===Vo?t=ec:e===Wo&&(t=tc),t):t},ic=function(){var e=(0,s.Z)(h().mark((function e(t){var n,i,a,s,o,c;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Re()(t).call(t,(function(e){return e.playerId})),a=GameCore.Utils.Object.keyBy(t,"playerId"),s=GameCore.Utils.String.params({playerIds:i}),e.next=5,(0,He.U)("players?"+s,{},jo);case 5:return o=e.sent,c=Re()(n=o.data).call(n,(function(e){var t=a[e.playerId];return(0,r.Z)({},e,{score:t.score,rank:t.rank,getScore:function(){return t.score},getFormattedScore:function(){return""},getTimestamp:function(){return(new Date).valueOf()},getRank:function(){return t.rank},getExtraData:function(){return t.extraData},getPlayer:function(){return{getName:function(){return e.name},getPhoto:function(){return e.photo},getID:function(){return e.playerId}}}})})),e.abrupt("return",c);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ac=function(){var e=(0,s.Z)(h().mark((function e(t){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===t&&(t={}),null==Qo){e.next=3;break}return e.abrupt("return",rc(t));case 3:return e.abrupt("return",sc(t));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),rc=function(){var e=(0,s.Z)(h().mark((function e(t){var n,i,a,r,s;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===t&&(t={}),n=[],i=nc(Vo)){e.next=5;break}return e.abrupt("return",n);case 5:return a=GameCore.Utils.String.params(t),e.next=8,(0,He.U)(i+"?"+a,{},Xo);case 8:if(r=e.sent,!((s=(null==r?void 0:r.data)||[]).length<1)){e.next=12;break}return e.abrupt("return",n);case 12:return n=s,e.abrupt("return",ic(n));case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),sc=function(){var e=(0,s.Z)(h().mark((function e(t){var n,i,a,r,s;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return void 0===t&&(t={}),i=(n=t).limit,a=n.offset,e.next=4,window.GameSDK.getLeaderboardAsync($o);case 4:return r=e.sent,e.next=7,r.getEntriesAsync(i,a);case 7:return s=e.sent,e.abrupt("return",s);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),oc=function(){var e=(0,s.Z)(h().mark((function e(t){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===t&&(t={}),null==Qo){e.next=3;break}return e.abrupt("return",cc(t));case 3:return e.abrupt("return",uc(t));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),cc=function(){var e=(0,s.Z)(h().mark((function e(t){var n,i,a,r,s;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===t&&(t={}),n=[],i=nc(Wo)){e.next=5;break}return e.abrupt("return",n);case 5:return a=GameCore.Utils.String.params(t),e.next=8,(0,He.U)(i+"?"+a,{},Xo);case 8:if(r=e.sent,!((s=(null==r?void 0:r.data)||[]).length<1)){e.next=12;break}return e.abrupt("return",n);case 12:return n=s,e.abrupt("return",ic(n));case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),uc=function(){var e=(0,s.Z)(h().mark((function e(t){var n,i,a,r,s;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return void 0===t&&(t={}),i=(n=t).limit,a=n.offset,e.next=4,window.GameSDK.getLeaderboardAsync($o);case 4:return r=e.sent,e.next=7,r.getConnectedPlayerEntriesAsync(i,a);case 7:return s=e.sent,e.abrupt("return",s);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),lc=(function(){var e=(0,s.Z)(h().mark((function e(t){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==Qo){e.next=2;break}return e.abrupt("return",lc(t));case 2:return e.abrupt("return",hc());case 3:case"end":return e.stop()}}),e)})))}(),function(){var e=(0,s.Z)(h().mark((function e(t){var n,i,a,r,s;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=null,t){e.next=3;break}return e.abrupt("return",n);case 3:if(i=nc(Wo)){e.next=6;break}return e.abrupt("return",n);case 6:return a=GameCore.Utils.String.params({playerIds:t}),e.next=9,(0,He.U)(i+"?"+a,{},Xo);case 9:if(r=e.sent,!((s=(null==r?void 0:r.data)||[]).length<1)){e.next=13;break}return e.abrupt("return",n);case 13:return e.next=15,ic(s);case 15:return n=e.sent[0],e.abrupt("return",n);case 17:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),hc=function(){var e=(0,s.Z)(h().mark((function e(){var t,n;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,window.GameSDK.getLeaderboardAsync($o);case 2:return t=e.sent,e.next=5,t.getPlayerEntryAsync();case 5:return n=e.sent,e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),dc=function(){var e=(0,s.Z)(h().mark((function e(t,n){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,null==Qo){e.next=5;break}if(""!==window.game.auth.getToken()){e.next=4;break}return e.abrupt("return",u().reject("Not logged in"));case 4:pc(t,n);case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,n){return e.apply(this,arguments)}}(),pc=function(){var e=(0,s.Z)(h().mark((function e(t,n){var i;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,He.v)("leaderboards/"+Qo+"/players/"+t,{score:n},{},Xo);case 2:return i=e.sent,e.abrupt("return",(null==i?void 0:i.data)||{});case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),fc=function(){var e=(0,s.Z)(h().mark((function e(){var t;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Qo){e.next=2;break}return e.abrupt("return",{});case 2:return e.next=4,(0,He.U)("leaderboards/"+Qo,{},Xo);case 4:return t=e.sent,e.abrupt("return",(null==t?void 0:t.data)||{});case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),mc=function(e){if("string"!==typeof e||!e)throw new zo(null,{imageShare:e})},gc=(function(){var e=(0,s.Z)(h().mark((function e(){var t,n,i,a,r,s,o,c,u,l,d,p,f,m,g,v,y,E,A;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=window.game,n=t.player,i=t.globalScene,a=window.game.match.getMatchState(),r=a.profiles,s=a.customData,o=a.mode,c=void 0===o?Ao.SINGLE:o,u=n.getPlayer(),l=u.playerId,d=u.photo,p=r[l]||{},f=p.bestScore,m=void 0===f?0:f,g=p.blitzHighScore,v=void 0===g?0:g,y=c===Ao.BLITZ||c===Ao.TOURNAMENT&&s.tournamentGameplayMode===Ao.BLITZ,E=vc({playerId:l,playerPhoto:d,playerScore:y?v:m})){e.next=12;break}return e.abrupt("return");case 12:return A={name:"share-best-score",width:952,height:492,renderOptions:E},e.next=15,i.frameCapture.capture(A);case 15:return e.abrupt("return",e.sent);case 16:case"end":return e.stop()}}),e)})))}(),function(){var e=(0,s.Z)(h().mark((function e(){var t,n,i,a,r,s,o,c,u,l,d,p,f;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=window.game,n=t.player,i=t.match,a=t.globalScene,r=i.getMatchState(),s=r.profiles,o=n.getPlayer(),c=o.playerId,u=o.photo,l=s[c]||{},d=l.score,p=vc({playerId:c,playerPhoto:u,playerScore:d})){e.next=9;break}return e.abrupt("return");case 9:return f={name:"share-current-score",width:952,height:492,renderOptions:p},e.next=12,a.frameCapture.capture(f);case 12:return e.abrupt("return",e.sent);case 13:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()),vc=function(e){var t=e.playerId,n=void 0===t?"10":t,i=e.playerPhoto,a=void 0===i?"":i,r=e.playerScore,s=void 0===r?0:r;return"string"!==typeof n||"string"!==typeof a||"number"!==typeof s?null:{avatar:{name:""+n,type:"image",x:634,y:118,image:a,width:240,height:240,fallbackWithImage:Ri.Z.AVATAR.KEY},wideFrame:{name:"wide-frame-message-win",type:"image",x:0,y:0,image:"./assets/wideframes/wide-frame-message-win.png",width:952,height:492},playerScoreShadow:{type:"text",x:760,y:454,font:"600 70px",fillStyle:"#c4683f",text:""+s,textAlign:"center"},playerScore:{type:"text",x:760,y:450,font:"600 70px",fillStyle:"#f2a62e",text:""+s,textAlign:"center"}}},yc=function(){var e=(0,s.Z)(h().mark((function e(){var t,n,i,a,r,s,o,c,u,l,d,p,f,m,g,v,y,E,A,S;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=window.game,n=t.player,i=t.profile,a=t.globalScene,r=n.getPlayer(),s=r.playerId,o=r.name,c=r.photo,(u=n.getConnectedPlayerIds(99,0)).push(s),l=[],e.next=7,oc({playerIds:GameCore.Utils.Array.unique(u),limit:u.length});case 7:d=e.sent,p=GameCore.Utils.Object.keyBy(d,"playerId"),f={playerId:s,name:o,photo:c,score:0},GameCore.Utils.Object.hasOwn(p,s)&&(f=p[s]),l.push(f),e.t0=Fo()(h()).call(h(),p);case 14:if((e.t1=e.t0()).done){e.next=27;break}if(m=e.t1.value,!GameCore.Utils.Object.hasOwn(p,m)){e.next=25;break}if(g=p[m],3!==l.length){e.next=20;break}return e.abrupt("break",27);case 20:if(g.playerId!==s){e.next=22;break}return e.abrupt("continue",14);case 22:if(!(Number(g.score)>Number(f.score))){e.next=24;break}return e.abrupt("continue",14);case 24:l.push(g);case 25:e.next=14;break;case 27:return v=GameCore.Utils.Array.unique(u),e.next=30,i.requestProfiles(v);case 30:if(y=i.getProfiles(),l.forEach((function(e,t){var n=e.playerId;if(GameCore.Utils.Object.hasOwn(y,n)){var i=y[n],a=i.name,r=i.photo;l[t].name=a,l[t].photo=r}})),l.length<3)for(E=0;E<=3-l.length;)l.push({playerId:"bot"+E,name:"???",score:0,photo:"./assets/images/others/avatar.png"}),E++;if(A=Ec({playerId:s,playerName:o,playerPhoto:c,listLeaders:l})){e.next=37;break}return e.abrupt("return");case 37:return S={name:"share-leaderboard",width:1500,height:2e3,renderOptions:A},e.next=40,a.frameCapture.capture(S);case 40:return e.abrupt("return",e.sent);case 41:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Ec=function(e){var t=e.playerId,n=void 0===t?"10":t,i=e.playerPhoto,a=void 0===i?"":i,r=e.listLeaders,s=void 0===r?[]:r;if(!Array.isArray(s))return null;if("string"!==typeof n)return null;if("string"!==typeof a)return null;var o={avatar:{name:""+n,type:"image",x:510,y:278,image:a,width:510,height:510,fallbackWithImage:Ri.Z.AVATAR.KEY}};return s.forEach((function(e,t){var n=e.playerId,i=e.photo;o["photo_"+n]={name:""+n,type:"image",x:436,y:1294+180*t,image:i,width:96,height:96,fallbackWithImage:Ri.Z.AVATAR.KEY}})),o.wideFrame={name:"wide-frame-share",type:"image",x:0,y:0,image:"./assets/wideframes/wide-frame-share.png",width:1500,height:2e3},s.forEach((function(e,t){var n=e.playerId,i=e.name,a=e.score;o["name_"+n]={type:"text",x:600,y:1360+180*t,font:"600 48px",text:i,fillStyle:"#b18151"},o["score_"+n]={type:"text",x:1e3,y:1360+180*t,font:"600 48px",text:a,fillStyle:"#b18151"}})),o},Ac=function(){var e=(0,s.Z)(h().mark((function e(){var t,n,i,a,r,s,o,c,u,l,d,p,f,m,g,v,y,E,A;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=window.game,n=t.match,i=t.globalScene,a=n.getMatchState(),r=a.profiles,s=a.customData,o=s.playerId,c=s.opponentId,o&&c){e.next=6;break}return e.abrupt("return");case 6:if(u=r[o],l=r[c],d=u.photo,p=u.score,f=u.finished,m=l.photo,g=l.score,v=void 0===g?0:g,y=l.finished,E=Sc({playerId:o,playerPhoto:d,playerScore:p,opponentId:c,opponentPhoto:m,opponentScore:v,isPlayerFinished:f,isOpponentFinished:y})){e.next=15;break}return e.abrupt("return");case 15:return A={name:"share-game-result",width:952,height:492,renderOptions:E},e.next=18,i.frameCapture.capture(A);case 18:return e.abrupt("return",e.sent);case 19:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Sc=(function(){var e=(0,s.Z)(h().mark((function e(){var t,n,i,a,r,s,o,c,u,l,d,p,f,m,g;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=window.game,n=t.player,i=t.globalScene,a=t.match,r=a.getMatchState(),s=n.getPlayer(),o=s.photo,c=s.playerId,u=r.customData.opponentId){e.next=6;break}throw new Error("Expected opponentId");case 6:if(l=r.profiles[u],d=l.photo,p=l.score,f=r.profiles[c].score,m=Sc({playerId:c,playerPhoto:o,playerScore:f,opponentId:u,opponentPhoto:d,opponentScore:p})){e.next=12;break}return e.abrupt("return");case 12:return g={name:"share-group-match-result",width:952,height:492,renderOptions:m},e.next=15,i.frameCapture.capture(g);case 15:return e.abrupt("return",e.sent);case 16:case"end":return e.stop()}}),e)})))}(),function(e){var t=e.playerId,n=void 0===t?"10":t,i=e.playerPhoto,a=void 0===i?"":i,r=e.playerScore,s=void 0===r?0:r,o=e.opponentId,c=void 0===o?"20":o,u=e.opponentPhoto,l=void 0===u?"":u,h=e.opponentScore,d=void 0===h?0:h,p=e.isPlayerFinished,f=e.isOpponentFinished;if("string"!==typeof n)return null;if("string"!==typeof a)return null;if("number"!==typeof s)return null;if("string"!==typeof c)return null;if("string"!==typeof l)return null;if("number"!==typeof d)return null;if("boolean"!==typeof p)return null;if("boolean"!==typeof f)return null;var m=s===d,g=s>d,v=p||f,y=p&&f,E={leftPhoto:{name:""+n,type:"image",x:56,y:140,image:a,width:220,height:220,fallbackWithImage:Ri.Z.AVATAR.KEY},rightPhoto:{name:""+c,type:"image",x:690,y:140,image:l,width:220,height:220,fallbackWithImage:Ri.Z.AVATAR.KEY},wideFrame:{name:"wide-frame-game-result",type:"image",x:0,y:0,image:"./assets/wideframes/wide-frame-game-result.png",width:952,height:492}};return v&&(E.leftScoreShadow={type:"text",x:162,y:444,font:"600 70px",fillStyle:"#c4683f",text:p?""+s:"???",textAlign:"center"},E.leftScore={type:"text",x:162,y:440,font:"600 70px",fillStyle:"#f2a62e",text:p?""+s:"???",textAlign:"center"},E.rightScoreShadow={type:"text",x:796,y:444,font:"600 70px",fillStyle:"#c4683f",text:f?""+d:"???",textAlign:"center"},E.rightScore={type:"text",x:796,y:440,font:"600 70px",fillStyle:"#f2a62e",text:f?""+d:"???",textAlign:"center"}),!m&&y&&(g?E.leftCrown={name:"crown-icon",type:"image",x:112,y:72,image:"./assets/images/others/crown-icon.png",width:106,height:78}:E.rightCrown={name:"crown-icon",type:"image",x:750,y:72,image:"./assets/images/others/crown-icon.png",width:106,height:78}),E}),Tc=function(){return window.game.match.getMatchState().mode===Ao.BLITZ},bc=Ui.Z.DEFAULT,Ic=bc.KEY,wc=bc.FRAME,Cc=function(e){function t(t,n,a,r){var o;return(o=e.call(this,t,n,a,r)||this).avatar=void 0,o.scoreText=void 0,o.shareButton=void 0,o.bigStarExplosive=void 0,o.open=function(t){e.prototype.open.call((0,Gi.Z)(o),t);var n=o.getData("bestScore");o.setBestScore(n);var i=o.scene.player.getPlayer();o.avatar.loadPhoto(i.playerId,i.photo,60),o.runOpenAnimation(),o.scene.audio.playSound(Fi.Z.CONGRATULATION)},o.handleClose=function(){o.scene.screen.close(o.name);var e=o.scene.game.globalScene;e instanceof wa.Z&&e.requestBackgroundMaskUpdate(Pi.o4.BEST_SCORE_SCREEN,0)},o.handleShareBestScore=function(){o.scene.stateStorage.dispatch((0,s.Z)(h().mark((function e(){var t,n,a,r,s,o,c,u,l,d,p;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=window.game,n=t.player,a=t.analytics,r=t.facebook,s=t.globalScene,o=t.lang,e.prev=1,s.screen.open(Pi.o4.NOTIFY_SCREEN,{message:o.Text.LOADING,loading:!0}),c=Tc(),u=o.getCurrentLanguage(),l=c?n.getBlitzHighScore():n.getBestScore(),d=c?"BLITZ_HS_SHARE":"NORMAL_HS_SHARE",p=o.getText({key:d,variables:[l],locale:u}),e.next=10,r.shareAsync({text:p,intent:"SHARE",image:"",data:{playerId:"",playerName:"",playerPhoto:"",type:Yo.SHARE_INVITE}});case 10:a.event(Dt._.SHARE,{share_content_type:"BestScore",success:!0}),e.next=17;break;case 13:e.prev=13,e.t0=e.catch(1),a.event(Dt._.SHARE,{share_content_type:"BestScore",success:!1}),(0,i.tO)(e.t0);case 17:return e.prev=17,s.screen.close(Pi.o4.NOTIFY_SCREEN),e.finish(17);case 20:case"end":return e.stop()}}),e,null,[[1,13,17,20]])}))))},o.runBigStarExplosive=function(){Phaser.Display.Align.In.Center(o.bigStarExplosive,o.scoreText),o.bigStarExplosive.run()},o.setDepth(Pi.Ks.POPUP),o.background.setAlpha(.8),o.createObjects(),o}(0,o.Z)(t,e);var n=t.prototype;return n.createObjects=function(){this.createTitle(),this.createClose(),this.createBestScoreTitle(),this.createPlayerAvatar(),this.createGlowEffect(),this.createBestScoreNumber(),this.createStarTwinkleEffect(),this.createBigStarExplosive()},n.setBestScore=function(e){this.scoreText.setText(""+e)},n.createTitle=function(){var e=this.scene.make.image({key:Ic,frame:wc.RIBBON_SMALL});e.setSize(162,36);var t=-90;Phaser.Display.Align.In.TopCenter(e,this.zone,0,t);var n=34;if("ru"===this.scene.lang.getCurrentLanguage())n=30;var i=this.scene.make.bitmapText({font:Sa.Z.PRIMARY.KEY,size:this.scene.fontSize(n),text:this.scene.lang.Text.TODAY_RECORD});t=-8,Phaser.Display.Align.In.Center(i,e,0,t),this.add([e,i])},n.createClose=function(){var e=new ga.Z(this.scene,Ic,wc.BUTTON_CLOSE,38,38);e.setName("Close"),this.add(e),Phaser.Display.Align.In.TopRight(e,this.zone,-10,-50),e.onClick=this.handleClose},n.createBestScoreTitle=function(){var e=this.scene.make.bitmapText({font:Sa.Z.PRIMARY.KEY,size:this.scene.fontSize(52.8),text:this.scene.lang.Text.BEST_SCORE});this.add(e),e.setTint(13256697),Phaser.Display.Align.In.TopCenter(e,this.zone,0,-130)},n.createBestScoreNumber=function(){this.scoreText=new _o(this.scene,{font:Sa.Z.PRIMARY.KEY,size:40}),this.add(this.scoreText),this.scoreText.setTintText(15911443,15911443,15902254,15902254),this.scoreText.setDropShadow(0,2,12871743),Phaser.Display.Align.In.TopCenter(this.scoreText,this.zone,0,-230)},n.createPlayerAvatar=function(){this.avatar=new Lo(this.scene,{key:Ic,frame:wc.AVATAR_FRAME_YELLOW_BIG,background:wc.AVATAR_BG_YELLOW_BIG,width:95,height:95}),this.add(this.avatar),Phaser.Display.Align.In.Center(this.avatar,this.zone,0,30)},n.createGlowEffect=function(){var e=Ui.Z.EFFECTS,t=e.KEY,n=e.FRAME,i=this.scene.make.image({key:t,frame:n.FX_GLOW_LIGHT});i.setWorldSize(246,246),this.add(i),this.moveDown(i),Phaser.Display.Align.In.Center(i,this.avatar),this.scene.tweens.add({targets:[i],duration:6e3,repeat:-1,props:{angle:360,scale:{value:"+=0.01",yoyo:!0,duration:800,ease:Phaser.Math.Easing.Sine.InOut}}})},n.createShareButton=function(){this.shareButton=new Bo.Z(this.scene,{key:Ic,button:wc.BUTTON_BLUE,icon:wc.ICON_FLAT_SHARE,text:this.scene.lang.Text.SHARE},168,82.8),this.shareButton.setName("Share"),this.add(this.shareButton),Phaser.Display.Align.In.BottomCenter(this.shareButton,this.zone,0,-80),this.shareButton.onClick=this.handleShareBestScore},n.createStarTwinkleEffect=function(){var e=new Tr.Z(this.scene),t=this.scoreText,n=t.x,i=t.y;e.run(2,n,i,300,120)},n.createBigStarExplosive=function(){this.bigStarExplosive=new Go.Z(this.scene)},n.runOpenAnimation=function(){var e=this.scene.game.globalScene;e instanceof wa.Z&&e.requestBackgroundMaskUpdate(Pi.o4.BEST_SCORE_SCREEN,this.background.alpha),this.runBigStarExplosive(),this.runScoreEntrancesAnimation(),this.runAvatarEntrancesAnimation()},n.runScoreEntrancesAnimation=function(){this.scene.tweens.killTweensOf(this.scoreText),new vr({targets:[this.scoreText],duration:300,props:{y:{from:0,to:this.scoreText.y}}}).play()},n.runAvatarEntrancesAnimation=function(){var e=this;this.scene.tweens.killTweensOf(this.avatar);var t=this.avatar.scale;new No.Z({targets:[this.avatar],duration:400,props:{scale:{from:0,to:t}},onComplete:function(){e.handleShareBestScore()}}).play()},n.runShareEntrancesAnimation=function(){this.scene.tweens.killTweensOf(this.shareButton),this.shareButton.setAlpha(0),new da.Z({targets:[this.shareButton],delay:300}).play()},t}(GameCore.Screen),xc=Cc,Oc=function(e){var t=e?e.split("_"):[],n=t.length>0?t[0]:"en_US";switch(n){case"id":case"in":n="id"}return n},_c=Ui.Z.DEFAULT,Rc=_c.KEY,Pc=_c.FRAME,kc=function(e){function t(t){var n;return(n=e.call(this,t,{key:Rc,frame:Pc.AVATAR_FRAME_BLUE,background:Pc.AVATAR_BG_BLUE,width:60,height:60,radius:8})||this).scene=void 0,n.scene=t,n}return(0,o.Z)(t,e),t.prototype.setHighlight=function(e){e?(this.background.setFrame(Pc.AVATAR_BG_YELLOW),this.avtFrame.setFrame(Pc.AVATAR_FRAME_YELLOW)):(this.background.setFrame(Pc.AVATAR_BG_BLUE),this.avtFrame.setFrame(Pc.AVATAR_FRAME_BLUE))},t}(Lo),Mc=Ui.Z.DEFAULT,Dc=Mc.KEY,Nc=Mc.FRAME,Lc=function(e){function t(t,n){var i;return(i=e.call(this,t)||this).scene=void 0,i.payload=void 0,i.avatar=void 0,i.block=void 0,i.rankIcon=void 0,i.rankText=void 0,i.playerScore=void 0,i.label=void 0,i.scene=t,i.createBlock(),i.createAvatar(),i.createRankIcon(),i.createRankText(),i.createLabel(),i.createPlayerScore(),n&&i.updateInfo(n),i.scene.add.existing((0,Gi.Z)(i)),i}(0,o.Z)(t,e);var n=t.prototype;return n.updateInfo=function(e){this.payload=e,this.updateAvatar(),this.updateRankIcon(),this.updateRankText(),this.updatePlayerScore()},n.setLabel=function(e){this.label.setText(e)},n.setRank=function(e){this.rankText.setText(e)},n.setScore=function(e){this.playerScore.setText(e)},n.setHighlight=function(e){e?(this.y-=6,this.scale+=.1,this.label.scale+=.15,this.block.setFrame(Nc.BLOCK_LEADER_YELLOW)):(this.y+=6,this.scale-=.1,this.label.scale-=.15,this.block.setFrame(Nc.BLOCK_LEADER_BLUE)),this.avatar.setHighlight(e)},n.createBlock=function(){this.block=this.scene.make.image({key:Dc,frame:Nc.BLOCK_LEADER_BLUE}),this.block.setWorldSize(79,99),this.add(this.block)},n.createAvatar=function(){this.avatar=new kc(this.scene),Phaser.Display.Align.In.TopCenter(this.avatar,this.block,0,this.avatar.displayHeight/2-4),this.add(this.avatar)},n.updateAvatar=function(){var e=this.payload,t=e.playerId,n=e.photo;this.avatar.loadPhoto(t,n,50)},n.getRankFrame=function(){var e=Nc.ICON_FLAG;switch(this.payload.rank){case 1:e=Nc.ICON_CUP_GOLD;break;case 2:e=Nc.ICON_CUP_SILVER;break;case 3:e=Nc.ICON_CUP_COPPER}return e},n.createRankIcon=function(){var e=Nc.ICON_FLAG;this.rankIcon=this.scene.make.image({key:Dc,frame:e}),e!=Nc.ICON_FLAG?this.rankIcon.setWorldSize(46,30):this.rankIcon.setWorldSize(27,27),Phaser.Display.Align.In.Center(this.rankIcon,this.block,0,-15),this.add(this.rankIcon)},n.updateRankIcon=function(){var e=this.getRankFrame();this.rankIcon.setFrame(e),e!=Nc.ICON_FLAG?this.rankIcon.setWorldSize(46,30):this.rankIcon.setWorldSize(27,27),Phaser.Display.Align.In.Center(this.rankIcon,this.block,0,-15)},n.createRankText=function(){this.rankText=this.scene.make.bitmapText({font:Sa.Z.PRIMARY.KEY,size:this.scene.fontSize(18),origin:{x:.5,y:.5},text:"1"}),Phaser.Display.Align.In.Center(this.rankText,this.rankIcon,0,-2),this.add(this.rankText)},n.updateRankText=function(){this.rankText.setText(this.payload.rank.toString())},n.createLabel=function(){this.label=this.scene.make.bitmapText({font:Sa.Z.PRIMARY.KEY,size:this.scene.fontSize(14),origin:{x:.5,y:0},text:this.scene.lang.Text.PLAY}),Phaser.Display.Align.In.BottomCenter(this.label,this.block,0,-10),this.add(this.label)},n.createPlayerScore=function(){this.playerScore=this.scene.make.bitmapText({font:Sa.Z.PRIMARY.KEY,size:this.scene.fontSize(18),origin:{x:.5,y:.5},text:"132500"}),this.playerScore.setTint(5582186),Phaser.Display.Align.In.Center(this.playerScore,this.block,0,5),this.add(this.playerScore)},n.updatePlayerScore=function(){this.playerScore.setText(Math.floor(this.payload.score).toString())},(0,re.Z)(t,[{key:"onClick",set:function(e){var t=this.block,n=t.width,i=t.height;this.setSize(n,i+this.avatar.height),this.setInteractive({useHandCursor:!0}),this.off(Phaser.Input.Events.GAMEOBJECT_POINTER_DOWN),this.on(Phaser.Input.Events.GAMEOBJECT_POINTER_DOWN,e)}}]),t}(Phaser.GameObjects.Container),Bc=function(e){function t(t,n){var a;return(a=e.call(this,t)||this).scene=void 0,a.payload=void 0,a.leaderBlocks=void 0,a.entrancesAnimation=void 0,a.listLeaderBlocks=void 0,a.handleChallengeFriend=function(e){return function(){a.scene.match.context.choose.processAsync({playerId:e,fallbackSingleMode:!1})}},a.handleShareLeaderboard=function(){a.scene.audio.playSound(Fi.Z.BUTTON_CLICK),a.scene.stateStorage.dispatch((0,s.Z)(h().mark((function e(){var t,n,a,r,s,o,c,u,l,d,p;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=window.game,n=t.player,a=t.analytics,r=t.facebook,s=t.globalScene,o=t.lang,e.prev=1,s.screen.open(Pi.o4.NOTIFY_SCREEN,{message:o.Text.LOADING,loading:!0}),e.next=5,yc();case 5:return c=e.sent,mc(c),u=n.getPlayer(),l=u.playerId,d=u.name,p=u.photo,e.next=10,r.shareAsync({text:"A ha, I'm the best!",intent:"CHALLENGE",image:c||"",data:{playerId:l,playerName:d,playerPhoto:p,type:Yo.SHARE_INVITE}});case 10:a.event(Dt._.SHARE,{share_content_type:"Leaderboard",success:!0}),e.next=17;break;case 13:e.prev=13,e.t0=e.catch(1),a.event(Dt._.SHARE,{share_content_type:"Leaderboard",success:!1}),(0,i.tO)(e.t0);case 17:return e.prev=17,s.screen.close(Pi.o4.NOTIFY_SCREEN),e.finish(17);case 20:case"end":return e.stop()}}),e,null,[[1,13,17,20]])}))))},a.handleMatchingGroup=(0,s.Z)(h().mark((function e(){var t,n,r,s,o,c,u,l;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.scene,n=t.player,r=t.game,s=t.facebook,e.prev=1,r.globalScene.screen.open(Pi.o4.NOTIFY_SCREEN,{message:a.scene.lang.Text.LOADING,loading:!0}),o=n.getPlayer(),c="global","en"===(u=Oc(o.locale))&&(c="en"),"in"===u&&(c="in"),e.next=10,s.matchPlayerAsync(c,!0,!0);case 10:if(l=e.sent,r.globalScene.screen.close(Pi.o4.NOTIFY_SCREEN),l){e.next=14;break}return e.abrupt("return");case 14:a.scene.match.group.start.processAsync({locale:s.getLocale(),playerId:n.getPlayerId()}),e.next=21;break;case 17:e.prev=17,e.t0=e.catch(1),r.globalScene.screen.close(Pi.o4.NOTIFY_SCREEN),e.t0 instanceof Error&&(0,i.tO)(e.t0);case 21:case"end":return e.stop()}}),e,null,[[1,17]])}))),a.handleLogin=(0,s.Z)(h().mark((function e(){var t,n;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.scene.game.globalScene.screen.open(Pi.o4.NOTIFY_SCREEN,{message:a.scene.lang.Text.LOADING,duration:0,loading:!0}),e.prev=1,e.next=4,GameSDK.player.signInManuallyAsync();case 4:if(e.sent){e.next=7;break}throw new Error("Failed to login");case 7:return t=GameSDK.player.getID(),n=a.scene.player.getBestScore(),e.next=11,dc(t,n);case 11:a.scene.game.globalScene.screen.close(Pi.o4.NOTIFY_SCREEN),a.scene.game.globalScene.screen.open(Pi.o4.NOTIFY_SCREEN,{message:a.scene.lang.Text.JOIN_LB_SUCCESS,duration:1e3,loading:!1}),a.handlePlaySingle(),a.scene.analytics.event(Dt._.LOG_IN,{success:!0}),e.next=21;break;case 17:e.prev=17,e.t0=e.catch(1),a.scene.analytics.event(Dt._.LOG_IN,{success:!1}),a.scene.game.globalScene.screen.open(Pi.o4.NOTIFY_SCREEN,{message:a.scene.lang.Text.JOIN_LB_FAIL,duration:1e3,loading:!1});case 21:case"end":return e.stop()}}),e,null,[[1,17]])}))),a.handlePlaySingle=(0,s.Z)(h().mark((function e(){var t,n,i,r;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=a.scene,n=t.match,i=t.player,r=i.getPlayerId(),e.next=5,n.single.start.processAsync({playerId:r});case 5:a.scene.scene.switch(ui.C.GAME_SCENE),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])}))),a.scene=t,a.setName("LeadersBar"),a.listLeaderBlocks=[],a.createLeaderBlocks(),a.createEntrancesAnimation(),n&&a.updateInfo(n),a.scene.add.existing((0,Gi.Z)(a)),a}(0,o.Z)(t,e);var n=t.prototype;return n.updateInfo=function(e){var t=this;this.payload=e;var n,i=!1,a=this.payload,r=a.playerId;(a.leaders.forEach((function(e){var n,a=t.leaderBlocks.getFirstDead(!0);a.updateInfo(e),-1===e.score?(a.setRank(""),a.setLabel(t.scene.lang.Text.JOIN),a.setScore(t.scene.lang.Text.GLOBAL)):e.playerId===r&&(a.setLabel(t.scene.lang.Text.SHARE),a.setHighlight(!0)),a.onClick=function(){GameSDK.player.isGuest()?t.handleLogin():t.handlePlaySingle()},t.add(a),a.setVisible(!0),a.setActive(!0),hi()(n=t.listLeaderBlocks).call(n,a)<0&&(i=!0)})),this.alignBlocks(),i)&&(this.listLeaderBlocks=Oe()(n=this.leaderBlocks.getChildren()).call(n,(function(e){return e.active})),this.createEntrancesAnimation());this.runAnimation()},n.killAndHideAll=function(){var e=this;this.removeAll(!1),this.leaderBlocks.getChildren().forEach((function(t){return e.leaderBlocks.killAndHide(t)}))},n.runAnimation=function(){this.leaderBlocks.setAlpha(0),this.entrancesAnimation.play()},n.createEntrancesAnimation=function(){this.entrancesAnimation=new So.Z({targets:this.listLeaderBlocks,delay:this.scene.tweens.stagger(50,{start:400}),props:{y:{from:100,to:0},alpha:{from:0,to:1}}})},n.alignBlocks=function(){var e=-(this.leaderBlocks.getLength()-1)/2*95;this.leaderBlocks.setX(e,95)},n.createLeaderBlocks=function(){this.leaderBlocks=this.scene.add.group({classType:Lc})},n.isBlitzGameplay=function(){return this.scene.match.getMatchState().mode===Ao.BLITZ},t}(Phaser.GameObjects.Container),Gc=Bc,Uc=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n.screen=void 0,n.main=void 0,n.footer=void 0,n.leadersBar=void 0,n.bestScoreScreen=void 0,n.scene=t,n.screen=t.screen,n.createObjects(),n}(0,o.Z)(t,e);var n=t.prototype;return n.createObjects=function(){this.createMainContent(),this.createLeadersBar(),this.createFooterBar()},n.createMainContent=function(){this.main=new Do(this.scene),this.main.setDepth(_i.Z.LOGO)},n.createLeadersBar=function(){this.leadersBar=new Gc(this.scene)},n.createFooterBar=function(){this.footer=new Co(this.scene),this.footer.setDepth(_i.Z.BUTTON)},n.createBestScoreScreen=function(){return this.screen.add(Pi.o4.BEST_SCORE_SCREEN,xc)},t}(ta),Fc=Uc,Zc=function(e){function t(t){var n;return(n=e.call(this,t)||this).objects=void 0,n.guideUI=void 0,n.objects=null,n}(0,o.Z)(t,e);var n=t.prototype;return n.alignUI=function(){if(null!==this.objects){var e=this.scene.gameZone,t=this.objects,n=t.main,i=t.footer,a=t.leadersBar;Phaser.Display.Align.In.TopCenter(n,e,0,-230),Phaser.Display.Align.In.Center(a,e,0,120),Phaser.Display.Align.In.BottomCenter(i,e,0,-70)}},n.createGroups=function(){e.prototype.createGroups.call(this),this.guideUI=this.scene.add.group(),this.groups.guideUI=this.guideUI},n.setUIObjects=function(t){e.prototype.setUIObjects.call(this,t),this.addUIObjectsToGroups()},n.addUIObjectsToGroups=function(){null!==this.objects&&this.addObjectForGuideUI()},n.addObjectForGuideUI=function(){this.objects},t}(qs),Hc=Zc,Yc=function(e){function t(){return e.apply(this,arguments)||this}return(0,o.Z)(t,e),t.prototype.alignUI=function(){e.prototype.alignUI.call(this)},t}(Hc),zc=Yc,Vc=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n.scene=t,n}(0,o.Z)(t,e);var n=t.prototype;return n.createObjects=function(){this.objects=new Fc(this.scene)},n.createLayouts=function(){this.scene.world.isLandscape()?this.layout=new zc(this.scene):this.layout=new Hc(this.scene);var e=this.objects.footer;e.setAlpha(0),e.runAnimation(),this.layout.setUIObjects(this.objects)},n.initUILogic=function(){this.objects.footer.homeButton.onClick=this.scene.handleHomeClick},n.updateUIState=function(){this.alignFooterBar()},n.alignFooterBar=function(){var e=this.objects.footer,t=this.scene.gameZone,n=this.scene.ads.getSafeAreaBottom();Phaser.Display.Align.In.BottomCenter(e,t,0,-40-n)},t}(oo),Wc=Vc;function Kc(e,t){var n="undefined"!==typeof I()&&C()(e)||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){var n;if(!e)return;if("string"===typeof e)return jc(e,t);var i=A()(n=Object.prototype.toString.call(e)).call(n,8,-1);"Object"===i&&e.constructor&&(i=e.constructor.name);if("Map"===i||"Set"===i)return T()(e);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return jc(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var i=0;return function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function jc(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var Xc=GameCore.Configs.LeadersBoard,qc=Xc.UseMock,Jc=Xc.Limit,Qc=Xc.MockOptions,$c=function(e,t,n,a){return void 0===n&&(n=Jc),void 0===a&&(a=0),function(){var r=(0,s.Z)(h().mark((function r(s,o){var c,u,l,d,p,f,m,g,v,y,E,A,S,T,b,I,w,C;return h().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(r.prev=0,c=window.game.player,u=c.getPlayerId(),s({type:ln,payload:{leaderboardId:e,type:t,limit:n,offset:a}}),!qc){r.next=10;break}return r.next=7,(0,Yr.qZ)(1e3);case 7:return p=Re()(l=mr()(d=new Array(n)).call(d,null)).call(l,(function(e,t){var n=(t+1)*(a+1),i=Qc.PlayerEntryIndex===t,r={playerId:"0"+n,name:"MPlayer "+n,photo:"./assets/images/others/avatar.png",rank:n,score:Math.floor(1e5/n)};if(i){var s=window.game.player.getPlayer(),o=s.playerId,c=s.name,u=s.photo;r.playerId=o,r.name=c,r.photo=u}return r})),s(eu(p,t)),r.abrupt("return");case 10:if(f=[],t!==Vo){r.next=17;break}return r.next=14,ac({limit:n,offset:a});case 14:f=r.sent,r.next=24;break;case 17:if(t!==Wo){r.next=24;break}return(m=c.getConnectedPlayerIds(n,a)).push(u),g=GameCore.Utils.Array.unique(m),r.next=23,oc({playerIds:g,limit:g.length});case 23:f=r.sent;case 24:for(v={},y=Kc(f);!(E=y()).done;)A=E.value,S=A.playerId,T=A.score,b=A.rank,I=A.getPlayer(),w=I.getPhoto(),C=I.getName(),v[S]={playerId:S,name:C,photo:w,score:T,rank:b};s(eu(v,t)),r.next=34;break;case 30:r.prev=30,r.t0=r.catch(0),s(eu([],t)),(0,i.tO)(r.t0);case 34:case"end":return r.stop()}}),r,null,[[0,30]])})));return function(e,t){return r.apply(this,arguments)}}()},eu=function(e,t){return{type:hn,payload:{leaders:e,type:t}}},tu=GameCore.Configs,nu=tu.LeadersBoard,iu=tu.Network,au=function(e){function t(){for(var t,n,i=arguments.length,a=new Array(i),r=0;r<i;r++)a[r]=arguments[r];return(n=e.call.apply(e,O()(t=[this]).call(t,a))||this).bestScore=void 0,n.currentScore=void 0,n.loading=void 0,n.layoutManager=void 0,n.confettiLeftEffect=void 0,n.confettiRightEffect=void 0,n.adsTimer=void 0,n.run=(0,s.Z)(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.layoutManager.init(),e.next=3,n.handleShowInterstitialAd();case 3:return n.updateLeaders(),n.updateScore(),n.explodeConfettiEffect(),n.audio.pauseMusic(),n.audio.playSound(Fi.Z.GAME_OVER_SCENE),n.layoutManager.start(),e.next=11,n.handleFinishingMatchFlow();case 11:case"end":return e.stop()}}),e)}))),n.showScorePopupCallback=function(){n.handleShowBestScorePopup(),n.handleShowResultChallengePopup()},n.handleFinishingMatchFlow=(0,s.Z)(h().mark((function e(){var t,i;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=n.match.getMatchState(),i=t.mode,e.t0=i,e.next=e.t0===Ao.SINGLE?5:e.t0===Ao.BLITZ?8:e.t0===Ao.CHALLENGE_FRIEND?12:e.t0===Ao.MATCHING_GROUP?15:17;break;case 5:return e.next=7,n.match.single.finish.processAsync();case 7:case 11:case 14:return e.abrupt("break",17);case 8:return n.sendFinishedBlitzDailyTaskEvent(),e.next=11,n.match.blitz.finish.processAsync();case 12:return e.next=14,n.match.challenge.finish.processAsync({playerId:n.player.getPlayerId(),playerScore:n.currentScore});case 15:return e.next=17,n.match.group.finish.processAsync();case 17:case"end":return e.stop()}}),e)}))),n.runConfettiEffect=function(){var e=n.gameZone.displayWidth;n.confettiLeftEffect.stop(),n.confettiRightEffect.stop(),n.children.bringToTop(n.confettiLeftEffect),n.children.bringToTop(n.confettiRightEffect),n.confettiLeftEffect.run(1,0,-100),n.confettiRightEffect.run(1,0+e,-100),n.tweens.addCounter({delay:1e4,from:100,to:0,ease:Phaser.Math.Easing.Cubic.Out,duration:400,onUpdate:function(e){var t,i,a=e.getValue()/100;null==(t=n.confettiLeftEffect.emitter)||t.setAlpha(a),null==(i=n.confettiRightEffect.emitter)||i.setAlpha(a)},onComplete:function(){var e,t;null==(e=n.confettiLeftEffect.emitter)||e.setAlpha(1),null==(t=n.confettiRightEffect.emitter)||t.setAlpha(1),n.confettiLeftEffect.stop(),n.confettiRightEffect.stop()}})},n.explodeConfettiEffect=function(){var e=n.gameZone.displayWidth,t=-100,i=e;n.tweens.addCounter({repeat:3,duration:500,onStart:function(){n.confettiLeftEffect.explode(6,0,t),n.confettiRightEffect.explode(6,0+i,t)},onRepeat:function(){n.confettiLeftEffect.explode(6,0,t),n.confettiRightEffect.explode(6,0+i,t)},completeDelay:7e3,onComplete:function(){n.tweens.addCounter({from:100,to:0,ease:Phaser.Math.Easing.Cubic.Out,duration:400,onUpdate:function(e){var t,i,a=e.getValue()/100;null==(t=n.confettiLeftEffect.emitter)||t.setAlpha(a),null==(i=n.confettiRightEffect.emitter)||i.setAlpha(a)},onComplete:function(){var e,t;null==(e=n.confettiLeftEffect.emitter)||e.setAlpha(1),null==(t=n.confettiRightEffect.emitter)||t.setAlpha(1),n.confettiLeftEffect.stop(),n.confettiRightEffect.stop()}})}})},n.handleTournamentsClick=function(){n.scene.switch(ui.C.TOURNAMENT_SCENE)},n.handleHomeClick=function(){n.scene.switch(ui.C.DASHBOARD_SCENE)},n.handleLeaderboardClick=function(){n.scene.switch(ui.C.LEADERBOARD_SCENE)},n.handleShowInterstitialAd=(0,s.Z)(h().mark((function e(){var t,i;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.isBlitzGameplay()){e.next=2;break}return e.abrupt("return");case 2:if(n.audio.stopMusic(),n.audio.pauseAllSounds(),n.audio.muteAll(),t=null,!n.ads.canbeShowInterstitialAd()){e.next=23;break}return e.prev=7,t=n.game.globalScene.time.delayedCall(200,(function(){n.game.globalScene.screen.open(Pi.o4.NOTIFY_SCREEN,{message:n.lang.Text.LOADING,duration:0,loading:!0})})),e.next=11,new(u())((function(e,t){var i;null==(i=n.adsTimer)||i.remove(),n.adsTimer=n.time.delayedCall(iu.Timeout,t),n.ads.getAdStatus(GameCore.Ads.Types.INTERSTITIAL)===GameCore.Ads.Status.LOADING?n.ads.events.once(GameCore.Ads.Events.LOADED,e):n.ads.preloadInterstitialAdAsync().then(e).catch(t)}));case 11:return e.next=13,n.ads.showInterstitialAdAsync();case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(7);case 18:return e.prev=18,null==(i=t)||i.remove(),n.ads.preloadInterstitialAdAsync().catch((function(){})),n.game.globalScene.screen.close(Pi.o4.NOTIFY_SCREEN),e.finish(18);case 23:n.audio.unmuteAll();case 24:case"end":return e.stop()}}),e,null,[[7,15,18,23]])}))),n}(0,o.Z)(t,e);var n=t.prototype;return n.preload=function(){var e=this;this.events.on("resume",(function(){e.updateScore()})),this.events.on("wake",this.run),this.events.on("create",this.run)},n.create=function(){e.prototype.create.call(this),this.createBackground(Ri.Z.BACKGROUND.KEY),this.bestScore=0,this.currentScore=0,this.createLoading(),this.createLayoutManager(),this.createConfettiSmallAnimation()},n.updateLeaders=function(){var e=this;this.layoutManager.objects.leadersBar.killAndHideAll();var t=[{selector:yo,callback:function(t){if(!1===t){var n=window.game.player.getPlayerId(),i=e.getLeadersExcludeIds([n]);e.updateLeaderBar(i)}e.loading.setVisible(t)}}];this.handleStateChange(t),this.stateStorage.dispatch($c(nu.LeaderboardId,Wo,20))},n.getLeadersExcludeIds=function(e){var t=this.stateStorage.getState(),n=vo(t),i={};if(!e||0===e.length)return n;for(var a in n)if(hi()(e).call(e,a)<0){var r=n[a],s=r.playerId,o=r.photo,c=r.score,u=r.rank;i[a]={playerId:s,photo:o,score:c,rank:u}}return i},n.updateScore=function(){var e=this.match.getMatchState().profiles[this.player.getPlayerId()].score,t=void 0===e?0:e,n=this.player.getBestScore()||0,i=this.player.getBlitzHighScore()||0,a=this.isBlitzGameplay()?i:n;this.bestScore=a,this.currentScore=t,this.layoutManager.objects.main.bestScoreBlock.updateData({bestScore:this.bestScore,currentScore:this.currentScore,scorePopupCallback:this.showScorePopupCallback})},n.createLoading=function(){this.loading=new ns.Z(this),Phaser.Display.Align.In.Center(this.loading,this.gameZone,0,120)},n.updateLeaderBar=function(e){var t=this.player.getPlayerId(),n=this.layoutManager.objects.leadersBar,i={playerId:t,leaders:[]};for(var a in e){if(i.leaders.length>=3)break;var r=e[a],s=r.playerId,o=r.photo,c=r.score,u=r.rank;i.leaders.push({playerId:s,photo:o,score:c,rank:u})}n.updateInfo(i)},n.createLayoutManager=function(){this.layoutManager=new Wc(this)},n.createConfettiSmallAnimation=function(){this.confettiLeftEffect=new mo.Z(this,{speedX:{min:-20,max:100},rotate:{start:-1080,end:0}}),this.confettiRightEffect=new mo.Z(this,{speedX:{min:20,max:-100},rotate:{start:0,end:1080}}),this.confettiLeftEffect.setDepth(_i.Z.EFFECT),this.confettiRightEffect.setDepth(_i.Z.EFFECT)},n.handleShowBestScorePopup=function(){this.currentScore,this.bestScore;var e=this.match.getMatchState().mode,t=e===Ao.SINGLE||e===Ao.BLITZ;if(this.currentScore>this.bestScore&&t){var n=this.layoutManager.objects,i=n.bestScoreScreen;i||(i=n.createBestScoreScreen()),this.screen.open(Pi.o4.BEST_SCORE_SCREEN,{bestScore:this.currentScore}),this.runConfettiEffect()}},n.handleShowResultChallengePopup=function(){var e=this.match.getMatchState(),t=this.match.getMatchState().mode;if((t===Ao.CHALLENGE_FRIEND||t===Ao.MATCHING_GROUP)&&e.id){var n=e.customData.opponentId;t===Ao.MATCHING_GROUP&&n===fo.playerId||(this.scene.pause(ui.C.GAME_OVER_SCENE),this.scene.launch(ui.C.RESULT_MATCH_SCENE))}},n.isBlitzGameplay=function(){return this.match.getMatchState().mode===Ao.BLITZ},n.sendFinishedBlitzDailyTaskEvent=function(){if(this.isBlitzGameplay()){var e=ki.PLAY_BLITZ.EVENTS.PLAY_BLITZ;Li.emit(e,{type:"game",value:1})}},t}(Bi.Z);var ru,su,ou,cu,uu,lu=au,hu=function(){function e(e){var t=this;this.scene=void 0,this.bonusScore=void 0,this.fadeInAnimation=void 0,this.fadeOutAnimation=void 0,this.bonusScoreAnimation=void 0,this.bonusScoreText=void 0,this.runAnimation=function(){var e;t.bonusScoreText.setVisible(!0),t.runFadeInAnimations(),t.runBonusScoreAnimations(),null==(e=t.bonusScoreAnimation)||e.next(t.eatScore)},this.eatScore=function(){var e;t.scene.eatScore(t.bonusScore),t.runFadeOutAnimations(),null==(e=t.fadeOutAnimation)||e.next(t.hideScore)},this.hideScore=function(){t.bonusScoreText.setVisible(!1)},this.scene=e,this.createText()}var t=e.prototype;return t.setBonusScore=function(e){this.bonusScore=e,this.bonusScoreText.setText(""+e)},t.createText=function(){var e=this.scene.gameZone.width;this.bonusScoreText=this.scene.make.bitmapText({font:Sa.Z.PRIMARY.KEY,size:this.scene.fontSize(36),depth:_i.Z.TEXT,origin:{x:.5,y:.5},visible:!1,x:e/2,y:200})},t.runBonusScoreAnimations=function(){this.bonusScoreAnimation||(this.bonusScoreAnimation=new Oo({targets:[this.bonusScoreText],duration:250,props:{scale:1.8}})),this.bonusScoreAnimation.play()},t.runFadeInAnimations=function(){this.fadeInAnimation||(this.fadeInAnimation=new da.Z({targets:[this.bonusScoreText],duration:50})),this.fadeInAnimation.play()},t.runFadeOutAnimations=function(){this.fadeOutAnimation||(this.fadeOutAnimation=new pa.Z({targets:[this.bonusScoreText],duration:200})),this.fadeOutAnimation.play()},e}(),du=hu,pu={COOL:"cool",GOOD:"good",GREAT:"great",TEXT_EXCELLENT:"very-excellent",CONGRATULATION:"congratulation"},fu=Ui.Z.EFFECTS,mu=fu.KEY,gu=(fu.FRAME,function(){function e(e){var t=this;this.scene=void 0,this.originScale=void 0,this.isPlayTextTween=void 0,this.mushPlayCongratulationTween=void 0,this.textTween=void 0,this.endTween=void 0,this.congratulationTween=void 0,this.textImage=void 0,this.runAnimation=function(e){t.textTween||e===pu.CONGRATULATION||t.createTextAnimation();var n=t.scene.lang.getCurrentLanguage();switch(e){case pu.COOL:t.textImage.setFrame(t.scene.lang.Texture.COOL),"ja"===n||"id"===n?t.textImage.setWorldSize(226,74.5):t.textImage.setWorldSize(165,75),t.playTextAnimation();break;case pu.GOOD:t.textImage.setFrame(t.scene.lang.Texture.GOOD),"ja"===n||"id"===n?t.textImage.setWorldSize(179,75.5):t.textImage.setWorldSize(179,76),t.playTextAnimation();break;case pu.GREAT:t.textImage.setFrame(t.scene.lang.Texture.GREAT),"ja"===n||"id"===n?t.textImage.setWorldSize(191.5,82):t.textImage.setWorldSize(192,82),t.playTextAnimation();break;case pu.TEXT_EXCELLENT:t.textImage.setFrame(t.scene.lang.Texture.EXCELLENT),"ja"===n||"id"===n?t.textImage.setWorldSize(255,84.5):t.textImage.setWorldSize(255,85),t.playTextAnimation();break;case pu.CONGRATULATION:var i;if(null!=(i=t.congratulationTween)&&i.isPlaying())return;if(t.isPlayTextTween)return void(t.mushPlayCongratulationTween=!0);t.playCongratulationAnimation()}},this.playTextAnimation=function(){t.isPlayTextTween=!0,t.textImage.setVisible(!0),t.textTween.restart()},this.playCongratulationAnimation=function(){t.scene.lang.getCurrentLanguage();t.textImage.setFrame(t.scene.lang.Texture.CONGRATULATION),t.textImage.setVisible(!0),t.textImage.setWorldSize(306,99),t.congratulationTween?t.congratulationTween.restart():t.createCongratulationTween()},this.alignText=function(){var e=t.textImage.displayHeight/2-220;Phaser.Display.Align.In.TopCenter(t.textImage,t.scene.gameZone,0,e),t.textImage.x=t.scene.gameZone.width/2},this.createEndAnimation=function(){t.endTween=t.scene.add.tween({targets:t.textImage,duration:300,delay:100,props:{alpha:{from:1,to:0}},onComplete:function(){t.mushPlayCongratulationTween?t.playCongratulationAnimation():t.textImage.setVisible(!1)}})},this.scene=e,this.createText()}var t=e.prototype;return t.createText=function(){this.textImage=this.scene.add.sprite(0,0,mu,this.scene.lang.Texture.CONGRATULATION),this.textImage.setVisible(!1),this.originScale=1/GameCore.Utils.Image.getImageScale(),this.textImage.setDepth(_i.Z.ENCOURAGING),this.alignText()},t.createCongratulationTween=function(){var e=this,t=.8*this.originScale;this.congratulationTween=this.scene.add.tween({targets:this.textImage,completeDelay:200,props:{alpha:{duration:150,value:{from:0,to:1}},scale:{delay:100,duration:450,ease:"Bounce.easeOut",value:{from:t,to:this.originScale}}},onStart:function(){var n,i;null==(n=e.endTween)||n.stop(),null==(i=e.textTween)||i.stop(),e.textImage.setScale(t),e.textImage.setFrame(e.scene.lang.Texture.CONGRATULATION)},onComplete:function(){e.mushPlayCongratulationTween=!1,e.endTween?e.endTween.restart():e.createEndAnimation()}})},t.createTextAnimation=function(){var e=this;this.textTween=this.scene.add.tween({targets:this.textImage,props:{scale:{delay:0,duration:350,ease:Phaser.Math.Easing.Back.Out,value:{from:.5*this.originScale,to:this.originScale}},alpha:{repeat:4,delay:500,duration:120,value:{from:1,to:0}}},onComplete:function(){e.isPlayTextTween=!1,e.endTween?e.endTween.restart():e.createEndAnimation()}})},e}()),vu=gu,yu=function(){function e(e){var t=this;this.scene=void 0,this.posX=void 0,this.posY=void 0,this.totalScoreAnimation=void 0,this.totalScoreText=void 0,this.runAnimation=function(e,n){var i=t.scene.boardManager.boardContainer;t.posX=i.x+e,t.posY=i.y+n,t.posX<40?t.posX=40:t.posX>330&&(t.posX=330),t.runTotalScoreAnimation()},this.scene=e,this.createTexts()}var t=e.prototype;return t.setTotalScore=function(e){this.totalScoreText.setText(""+e)},t.createTexts=function(){this.totalScoreText=new _o(this.scene,{font:Sa.Z.PRIMARY.KEY,size:this.scene.fontSize(50)}),this.totalScoreText.setDropShadow(0,1,2368548),this.totalScoreText.setDepth(_i.Z.TEXT),this.totalScoreText.kill()},t.runTotalScoreAnimation=function(){var e,t=this;this.totalScoreText.revive(),this.totalScoreText.setAlpha(1),this.totalScoreText.setScale(.2),this.totalScoreText.setPosition(this.posX,this.posY),null==(e=this.totalScoreAnimation)||e.remove(),this.totalScoreAnimation=this.scene.tweens.add({targets:[this.totalScoreText],ease:Phaser.Math.Easing.Cubic.Out,props:{x:{duration:400,getStart:function(){return t.posX}},y:{duration:400,getStart:function(){return t.posY},getEnd:function(){return t.posY-70}},scale:{ease:Phaser.Math.Easing.Back.Out,value:{from:.2,to:1}},alpha:{value:{from:1,to:0},delay:900,duration:300}},onComplete:function(){var e;t.scene&&(null==(e=t.totalScoreText)||e.kill())}})},e}(),Eu=yu,Au=Ui.Z.EFFECTS,Su={COLORFUL:{KEY:"colorful-animation",TEXTURE:Au.KEY,PREFIX:Au.FRAME.FX_COLORFUL,FRAME_RATE:30,END:17,ZERO_PAD:1},COLOR_CHANGE:{KEY:"color-change-animation",TEXTURE:Au.KEY,PREFIX:Au.FRAME.FX_COLOR_CHANGE,FRAME_RATE:18,END:18,ZERO_PAD:1},PAINT_EXPLOSIVE:{KEY:"paint-explosive-animation",TEXTURE:Au.KEY,PREFIX:Au.FRAME.FX_PAINT_EXPLOSIVE,FRAME_RATE:18,END:12,ZERO_PAD:1},FREEZE_EXPLOSIVE:{KEY:"freeze-explosive-animation",TEXTURE:Au.KEY,PREFIX:Au.FRAME.FX_FREEZE_EXPLOSIVE,FRAME_RATE:30,END:9,ZERO_PAD:1},COLORFUL_EXPLOSIVE:{KEY:"colorful-explosive-animation",TEXTURE:Au.KEY,PREFIX:Au.FRAME.FX_COLORFUL_EXPLOSIVE,FRAME_RATE:30,END:9,ZERO_PAD:1},RED_EXPLOSIVE:{KEY:"red-explosive-animation",TEXTURE:Au.KEY,PREFIX:Au.FRAME.FX_RED_EXPLOSIVE,FRAME_RATE:28,END:9,ZERO_PAD:1},BLUE_EXPLOSIVE:{KEY:"blue-explosive-animation",TEXTURE:Au.KEY,PREFIX:Au.FRAME.FX_BLUE_EXPLOSIVE,FRAME_RATE:28,END:9,ZERO_PAD:1},PINK_EXPLOSIVE:{KEY:"pink-explosive-animation",TEXTURE:Au.KEY,PREFIX:Au.FRAME.FX_PINK_EXPLOSIVE,FRAME_RATE:28,END:9,ZERO_PAD:1},GREEN_EXPLOSIVE:{KEY:"green-explosive-animation",TEXTURE:Au.KEY,PREFIX:Au.FRAME.FX_GREEN_EXPLOSIVE,FRAME_RATE:28,END:9,ZERO_PAD:1},YELLOW_EXPLOSIVE:{KEY:"yellow-explosive-animation",TEXTURE:Au.KEY,PREFIX:Au.FRAME.FX_YELLOW_EXPLOSIVE,FRAME_RATE:28,END:9,ZERO_PAD:1}},Tu=Su,bu=Tu.BLUE_EXPLOSIVE,Iu=bu.KEY,wu=bu.TEXTURE,Cu=bu.FRAME_RATE,xu=bu.END,Ou=bu.PREFIX,_u=bu.ZERO_PAD,Ru=function(e){function t(t){var n={repeat:0,frameRate:Cu,frames:t.generateFrameNames(wu,{prefix:Ou,end:xu,zeroPad:_u}),showOnStart:!0,hideOnComplete:!0,skipMissedFrames:!0};return e.call(this,t,Iu,n)||this}return(0,o.Z)(t,e),t}(Phaser.Animations.Animation),Pu=Ru,ku=Tu.COLORFUL_EXPLOSIVE,Mu=ku.KEY,Du=ku.TEXTURE,Nu=ku.FRAME_RATE,Lu=ku.END,Bu=ku.PREFIX,Gu=ku.ZERO_PAD,Uu=function(e){function t(t){var n={repeat:0,frameRate:Nu,frames:t.generateFrameNames(Du,{prefix:Bu,end:Lu,zeroPad:Gu}),showOnStart:!0,hideOnComplete:!0,skipMissedFrames:!0};return e.call(this,t,Mu,n)||this}return(0,o.Z)(t,e),t}(Phaser.Animations.Animation),Fu=Uu,Zu=Tu.GREEN_EXPLOSIVE,Hu=Zu.KEY,Yu=Zu.TEXTURE,zu=Zu.FRAME_RATE,Vu=Zu.END,Wu=Zu.PREFIX,Ku=Zu.ZERO_PAD,ju=function(e){function t(t){var n={repeat:0,frameRate:zu,frames:t.generateFrameNames(Yu,{prefix:Wu,end:Vu,zeroPad:Ku}),showOnStart:!0,hideOnComplete:!0,skipMissedFrames:!0};return e.call(this,t,Hu,n)||this}return(0,o.Z)(t,e),t}(Phaser.Animations.Animation),Xu=ju,qu=Tu.PAINT_EXPLOSIVE,Ju=qu.KEY,Qu=qu.TEXTURE,$u=qu.FRAME_RATE,el=qu.END,tl=qu.PREFIX,nl=qu.ZERO_PAD,il=function(e){function t(t){var n={repeat:0,frameRate:$u,frames:t.generateFrameNames(Qu,{prefix:tl,end:el,zeroPad:nl}),showOnStart:!0,hideOnComplete:!0,skipMissedFrames:!0};return e.call(this,t,Ju,n)||this}return(0,o.Z)(t,e),t}(Phaser.Animations.Animation),al=il,rl=Tu.PINK_EXPLOSIVE,sl=rl.KEY,ol=rl.TEXTURE,cl=rl.FRAME_RATE,ul=rl.END,ll=rl.PREFIX,hl=rl.ZERO_PAD,dl=function(e){function t(t){var n={repeat:0,frameRate:cl,frames:t.generateFrameNames(ol,{prefix:ll,end:ul,zeroPad:hl}),showOnStart:!0,hideOnComplete:!0,skipMissedFrames:!0};return e.call(this,t,sl,n)||this}return(0,o.Z)(t,e),t}(Phaser.Animations.Animation),pl=dl,fl=Tu.RED_EXPLOSIVE,ml=fl.KEY,gl=fl.TEXTURE,vl=fl.FRAME_RATE,yl=fl.END,El=fl.PREFIX,Al=fl.ZERO_PAD,Sl=function(e){function t(t){var n={repeat:0,frameRate:vl,frames:t.generateFrameNames(gl,{prefix:El,end:yl,zeroPad:Al}),showOnStart:!0,hideOnComplete:!0,skipMissedFrames:!0};return e.call(this,t,ml,n)||this}return(0,o.Z)(t,e),t}(Phaser.Animations.Animation),Tl=Sl,bl=Tu.YELLOW_EXPLOSIVE,Il=bl.KEY,wl=bl.TEXTURE,Cl=bl.FRAME_RATE,xl=bl.END,Ol=bl.PREFIX,_l=bl.ZERO_PAD,Rl=function(e){function t(t){var n={repeat:0,frameRate:Cl,frames:t.generateFrameNames(wl,{prefix:Ol,end:xl,zeroPad:_l}),showOnStart:!0,hideOnComplete:!0,skipMissedFrames:!0};return e.call(this,t,Il,n)||this}return(0,o.Z)(t,e),t}(Phaser.Animations.Animation),Pl=Rl,kl=Tu.COLOR_CHANGE,Ml=kl.KEY,Dl=kl.TEXTURE,Nl=kl.FRAME_RATE,Ll=kl.END,Bl=kl.PREFIX,Gl=kl.ZERO_PAD,Ul=function(e){function t(t){var n={repeat:-1,frameRate:Nl,frames:t.generateFrameNames(Dl,{prefix:Bl,end:Ll,zeroPad:Gl}),showOnStart:!0,hideOnComplete:!0};return e.call(this,t,Ml,n)||this}return(0,o.Z)(t,e),t}(Phaser.Animations.Animation),Fl=Ul,Zl=Tu.COLORFUL,Hl=Zl.KEY,Yl=Zl.TEXTURE,zl=Zl.FRAME_RATE,Vl=Zl.END,Wl=Zl.PREFIX,Kl=Zl.ZERO_PAD,jl=function(e){function t(t){var n={repeat:-1,frameRate:zl,frames:t.generateFrameNames(Yl,{prefix:Wl,end:Vl,zeroPad:Kl}),showOnStart:!0,hideOnComplete:!0};return e.call(this,t,Hl,n)||this}return(0,o.Z)(t,e),t}(Phaser.Animations.Animation),Xl=jl,ql=Ui.Z.GAMEPLAY.FRAME,Jl=ql.TILE_RED,Ql=ql.TILE_BLUE,$l=ql.TILE_PINK,eh=ql.TILE_GREEN,th=ql.TILE_YELLOW,nh=ql.TILE_FREEZE,ih=ql.TILE_COLORFUL,ah=ql.TILE_COLOR_CHANGE,rh={RED:"red",BLUE:"blue",PINK:"pink",GREEN:"green",YELLOW:"yellow"},sh={FREEZE:"freeze",COLORFUL:"colorful",COLOR_CHANGE:"color_change"},oh=rh.RED,ch=rh.BLUE,uh=rh.PINK,lh=rh.GREEN,hh=rh.YELLOW,dh=sh.FREEZE,ph=sh.COLORFUL,fh=sh.COLOR_CHANGE,mh=((ru={})[oh]="r",ru[ch]="b",ru[uh]="p",ru[lh]="g",ru[hh]="y",ru[dh]="f",ru[ph]="c",ru[fh]="m",ru),gh={SIZE:37,EVENTS:{FIRST_INTERACTION:"first_interaction",ADD_TIME:"add_time",GRAVITY_ANIMATION_FINISHED:"gravity_animation_finished"},STATUS:{READY:"ready",MOVING:"moving",CAPTURED:"captured"},FRAME:(su={},su[oh]=Jl,su[ch]=Ql,su[uh]=$l,su[lh]=eh,su[hh]=th,su[dh]=nh,su[ph]=ih,su[fh]=ah,su),SETS:{SET_3:"set_3",SET_4:"set_4",SET_5:"set_5",SET_6:"set_6",SET_7:"set_7",SET_8:"set_8",SET_9:"set_9"},COLORS:rh,SPECIALS:sh,HASH:mh},vh=Ui.Z.EFFECTS,yh=vh.KEY,Eh=vh.FRAME,Ah=function(e){function t(t){var n;return(n=e.call(this,t,0,0,yh,Eh.FX_FIREWORKS_SMALL)||this).bonusPosY=void 0,n.colors={red:16462401,blue:1863148,pink:15271420,green:183084,yellow:16631323},n.bonusPosY=100,n.kill(),n.setWorldSize(49,49.5),n.setDepth(_i.Z.FIREWORKS),n.scene.add.existing((0,Gi.Z)(n)),n}(0,o.Z)(t,e);var n=t.prototype;return n.randomColor=function(){var e=on()(this.colors),t=e[Phaser.Math.RND.between(0,e.length-1)];this.setTintFill(t)},n.setColor=function(e){this.setTintFill(this.colors[e])},n.fire=function(e,t,n){this.revive(),this.setPosition(e,t),this.runFireworkAnimation(n),this.scene.audio.playSound(Fi.Z.FIREWORKS_SOAR,{volume:.2})},n.runFireworkAnimation=function(e){var t=this;if(this.scene){var n=1/GameCore.Utils.Image.getImageScale(),i=Phaser.Math.RND.between(0,this.bonusPosY);this.scene.tweens.add({targets:[this],duration:300,ease:Phaser.Math.Easing.Circular.Out,props:{angle:{repeat:-1,value:360},scale:{yoyo:!0,value:.8*n}}}),this.scene.tweens.add({targets:[this],duration:800,ease:Phaser.Math.Easing.Circular.Out,props:{y:e+i},onComplete:function(){t.scene.tweens.killTweensOf(t),t.kill()}})}},t}(Phaser.GameObjects.Sprite),Sh=GameCore.Configs.Gameplay,Th=Ui.Z.GAMEPLAY,bh=Ui.Z.EFFECTS,Ih=gh.STATUS,wh=[Fi.Z.GEM_EXPLOSIVE_1,Fi.Z.GEM_EXPLOSIVE_2,Fi.Z.GEM_EXPLOSIVE_3,Fi.Z.GEM_EXPLOSIVE_4,Fi.Z.GEM_EXPLOSIVE_5,Fi.Z.GEM_EXPLOSIVE_6],Ch=function(e){function t(t,n,i){var a;return(a=e.call(this,t,0,0)||this).scene=void 0,a.scaleUp=1,a.scaleDown=1,a.eatScore=0,a.row=void 0,a.column=void 0,a.color=void 0,a.frame=void 0,a.tileType=void 0,a.block=void 0,a.highlight=void 0,a.score=void 0,a.firework=void 0,a.unselectAnimation=void 0,a.selectAnimation=void 0,a.highlightTween=void 0,a.soundTimer=void 0,a.explosiveTimer=void 0,a.hideHighlight=function(){var e;a.highlight||a.drawHighlight(),null==(e=a.highlightTween)||e.remove(),a.highlight.setAlpha(0),a.highlight.setVisible(!1)},a.explosive=function(e,t,n){var i,r;void 0===e&&(e=0),void 0===n&&(n=!0),a.scene&&(null==(i=a.explosiveTimer)||i.remove(),a.explosiveTimer=a.scene.time.addEvent({delay:e,callback:function(){n&&a.eatScoreAnimation(),a.startVibrate(),a.explosiveAnimation(),a.fireworksAnimation()}}),null==(r=a.soundTimer)||r.remove(),a.soundTimer=a.scene.time.addEvent({delay:e-300,callback:function(){a.playSoundByIndex(t)}}))},a.handleOnSelect=function(){a.removeEvents(),a.block.once(Phaser.Input.Events.GAMEOBJECT_POINTER_OUT,a.handleOnUnselect),a.block.once(Phaser.Input.Events.GAMEOBJECT_POINTER_UP,a.handleOnUnselect),a.runSelectAnimation()},a.handleOnUnselect=function(){a.runUnselectAnimation()},a.eatScoreAnimation=function(){a.scene&&a.score&&a.runShowScoreAnimation()},a.getExplosiveAnimationKey=function(){return Tu.BLUE_EXPLOSIVE.KEY},a.explosiveAnimation=function(){if(a.block&&a.block.anims){var e=a.getExplosiveAnimationKey();a.block.once(Phaser.Animations.Events.ANIMATION_COMPLETE,(function(){a.hideHighlight(),a.removeTile(),a.block.revive(),a.block.setTexture(Th.KEY),a.block.setFrame(a.frame),a.block.setDisplaySize(37,37)})),a.block.anims.play(e,!0)}},a.runUnselectAnimation=function(){a.scene&&(a.unselectAnimation||(a.unselectAnimation=new No.Z({targets:[(0,Gi.Z)(a)],duration:100,props:{scale:a.scaleUp}})),a.unselectAnimation.play())},a.scene=t,i&&(a.color=i,a.tileType=i),a.scaleUp=a.scale,a.scaleDown=a.scale-.1,a.setDepth(_i.Z.TILE),n&&(a.frame=n,a.drawBlock(n)),a.scene.add.existing((0,Gi.Z)(a)),a.setState(Ih.READY),a}(0,o.Z)(t,e);var n=t.prototype;return n.show=function(){this.setVisible(!0),this.block.setVisible(!0),this.setVisible(!0)},n.setRow=function(e){this.row=e},n.setColumn=function(e){this.column=e},n.setEatScore=function(e){var t=this.scene.tileManager.scoreTextGroup.getMatching("visible",!1);t.length<1?this.createScoreText():this.score=t[0],this.eatScore=e,this.score.setAlpha(0),this.score.setVisible(!0),this.score.setText(""+e)},n.removeEvents=function(){this.block.off(Phaser.Input.Events.GAMEOBJECT_POINTER_UP,this.handleOnUnselect),this.block.off(Phaser.Input.Events.GAMEOBJECT_POINTER_OUT,this.handleOnUnselect)},n.createInput=function(){this.block.off(Phaser.Input.Events.GAMEOBJECT_POINTER_DOWN,this.handleOnSelect),this.block.on(Phaser.Input.Events.GAMEOBJECT_POINTER_DOWN,this.handleOnSelect)},n.showHighlight=function(e,t){var n;void 0===e&&(e=-1),void 0===t&&(t=0),this.scene&&(this.scene.boardManager.boardContainer.bringToTop(this),this.highlight||this.drawHighlight(),null!=(n=this.highlightTween)&&n.isPlaying()||this.runHighlightAnimations(e,t))},n.playSoundByIndex=function(e){if(!(e<0)&&wh[e]){var t=wh[e]||wh[wh.length-1];this.scene.audio.playSound(t)}},n.fireworksAnimation=function(){if(this.scene){var e=this.scene,t=e.levelHandler,n=e.tileManager,i=e.currentScore,a=e.boardManager,r=e.layoutManager;if(!(i<t.targetScore)&&n.isEndBoard){var s=this.x,o=this.y,c=this.color,u=a.boardContainer,l=u.x+s,h=u.y+o,d=r.objects.header.topBar.y+100;this.firework||(this.firework=new Ah(this.scene),this.firework.setColor(c)),this.firework.setVisible(!0),this.firework.fire(l,h,d)}}},n.enableTile=function(){this.revive(),this.setState(gh.STATUS.READY)},n.removeTile=function(){this.scene&&this.scene.tileManager.removeTileFromBoard(this)},n.drawBlock=function(e){this.block=this.scene.make.sprite({key:Th.KEY,frame:e}),this.block.setDisplaySize(37,37),this.add(this.block)},n.drawHighlight=function(){this.highlight=this.scene.add.image(0,0,bh.KEY,bh.FRAME.FX_HIGHLIGHT),this.highlight.setWorldSize(40,40),this.highlight.setVisible(!1),this.add(this.highlight)},n.createScoreText=function(){this.score=this.scene.make.bitmapText({font:Sa.Z.PRIMARY.KEY,size:this.scene.fontSize(26),origin:{x:.5,y:.5}}),this.score.setVisible(!1),this.score.setDepth(_i.Z.TEXT),this.scene.tileManager.scoreTextGroup.add(this.score)},n.runHighlightAnimations=function(e,t){var n,i=this;null==(n=this.highlightTween)||n.remove(),this.scene.tweens.killTweensOf(this.highlight),this.highlightTween=this.scene.tweens.add({targets:this.highlight,duration:130,repeat:e,delay:t,ease:Phaser.Math.Easing.Cubic.InOut,props:{alpha:{from:.3,to:1}},onStart:function(){i.highlight.setAlpha(0),i.highlight.setVisible(!0),i.moveUp(i.highlight)},onComplete:this.hideHighlight})},n.runShowScoreAnimation=function(){var e=this;this.add(this.score),Phaser.Display.Align.In.Center(this.score,this.block);var t=this.score.getWorldPosition(),n=t.x,i=t.y;this.remove(this.score),this.score.setPosition(n,i),this.scene.tweens.killTweensOf(this.score),this.scene.tweens.add({targets:this.score,duration:400,ease:Phaser.Math.Easing.Cubic.InOut,props:{y:"-=3",alpha:{from:0,to:.8}},onComplete:function(){e.scene&&e.runEatScoreAnimation()}})},n.runEatScoreAnimation=function(){var e=this,t=this.scene.layoutManager.objects.header.topBar.currentScoreBar.getWorldPosition(),n=t.x,i=t.y;this.scene.tweens.add({targets:this.score,duration:600,ease:Phaser.Math.Easing.Cubic.InOut,props:{x:n,y:i,alpha:{duration:100,delay:370,value:0}},onComplete:function(){var t;e.score.setVisible(!1),null==(t=e.scene)||t.eatScore(e.eatScore)}})},n.runBlitzSpawnAnimation=function(e,t){var n=this;void 0===t&&(t=0),this.scene.tweens.add({targets:this,duration:300,delay:t,ease:Phaser.Math.Easing.Cubic.Out,props:{x:e.x,y:e.y,alpha:1},onComplete:function(){n.scene.audio.playSound(Fi.Z.GEM_DROP,{volume:.5})},onStop:function(){n.setPosition(e.x,e.y),n.setAlpha(1)}})},n.runSelectAnimation=function(){this.scene&&(this.selectAnimation||(this.selectAnimation=new ha.Z({targets:[this],duration:100,yoyo:!0,props:{scale:{start:this.scaleUp,from:this.scaleUp,to:this.scaleDown}}})),this.selectAnimation.play())},n.isReady=function(){return this.state===Ih.READY},n.isMoving=function(){return this.state===Ih.MOVING},n.isCaptured=function(){return this.state===Ih.CAPTURED},n.startVibrate=function(){try{if(!Sh.EnableVibrate)return;if(!this.scene.player.getPlayerSetting("vibrate"))return;return void _s(50)}catch(e){(0,i.tO)(e)}},t}(Phaser.GameObjects.Container),xh=Ui.Z.GAMEPLAY.FRAME,Oh=gh.SPECIALS,_h=function(e){function t(t,n,i){var a;return(a=e.call(this,t,xh.TILE_FREEZE,Oh.FREEZE)||this).getExplosiveAnimationKey=function(){return Tu.FREEZE_EXPLOSIVE.KEY},a.handleStartExplosive=function(){var e=a.scene.boardManager.boardContainer;a.scene.audio.playSound(Fi.Z.GEM_EXPLOSIVE_FREEZE),e.moveTo((0,Gi.Z)(a),e.count("visible",!0)-1)},a.setName("FreezeTile"),a.setRow(n),a.setColumn(i),a.block.removeInteractive(),a.block.off(Phaser.Input.Events.GAMEOBJECT_POINTER_DOWN),a.block.once(Phaser.Animations.Events.ANIMATION_START,a.handleStartExplosive),a}return(0,o.Z)(t,e),t.prototype.sendDestroyIceEvent=function(){var e=ki.DESTROY_ICE.EVENTS;Li.emit(e.DESTROY_ICE,{type:"ice",value:1})},t}(Ch),Rh=_h,Ph=Tu.FREEZE_EXPLOSIVE,kh=Ph.KEY,Mh=Ph.TEXTURE,Dh=Ph.FRAME_RATE,Nh=Ph.END,Lh=Ph.PREFIX,Bh=Ph.ZERO_PAD,Gh=function(e){function t(t){var n={repeat:0,frameRate:Dh,frames:t.generateFrameNames(Mh,{prefix:Lh,end:Nh,zeroPad:Bh}),showOnStart:!0,hideOnComplete:!0,skipMissedFrames:!0};return e.call(this,t,kh,n)||this}return(0,o.Z)(t,e),t}(Phaser.Animations.Animation),Uh=Gh,Fh=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n.moveDuration=250,n.shuffleDuration=500,n.isMoveTilesCompleted=void 0,n.moveRowsTween=void 0,n.moveColumnsTween=void 0,n.scene=t,n.isMoveTilesCompleted=!1,n.createAnimations(),n}(0,o.Z)(t,e);var n=t.prototype;return n.createAnimations=function(){var e=Tu.COLORFUL,t=Tu.COLOR_CHANGE,n=Tu.RED_EXPLOSIVE,i=Tu.BLUE_EXPLOSIVE,a=Tu.PINK_EXPLOSIVE,r=Tu.GREEN_EXPLOSIVE,s=Tu.YELLOW_EXPLOSIVE,o=Tu.FREEZE_EXPLOSIVE,c=Tu.COLORFUL_EXPLOSIVE,u=Tu.PAINT_EXPLOSIVE,l=new Xl(this.scene.anims),h=new Fl(this.scene.anims),d=new Uh(this.scene.anims),p=new Fu(this.scene.anims),f=new Tl(this.scene.anims),m=new Pu(this.scene.anims),g=new pl(this.scene.anims),v=new Xu(this.scene.anims),y=new Pl(this.scene.anims),E=new al(this.scene.anims);this.scene.anims.add(e.KEY,l),this.scene.anims.add(t.KEY,h),this.scene.anims.add(o.KEY,d),this.scene.anims.add(c.KEY,p),this.scene.anims.add(n.KEY,f),this.scene.anims.add(i.KEY,m),this.scene.anims.add(a.KEY,g),this.scene.anims.add(r.KEY,v),this.scene.anims.add(s.KEY,y),this.scene.anims.add(u.KEY,E)},n.moveEase=function(e){var t=1.70158;return 2.70158*e*e*e-t*e*e},n.startBoard=function(e){var t=this,n=[],i={},a=0;return e.forEach((function(e){n.push({x:e.x,y:e.y,scale:e.scale}),e.alpha=0,e.y=e.y+100;var t=e.color;i[t]||(i[t]=50*a+1,a+=1)})),this.scene.time.addEvent({repeat:0,delay:10*this.scene.levelHandler.getConfigs().rows*this.scene.levelHandler.getConfigs().columns+200,callback:function(){t.scene.audio.playSound(Fi.Z.GEM_FALLING)}}),this.scene.tweens.add({targets:e,props:{alpha:{value:{getEnd:function(e,t,i,a){return n[a].scale}},duration:400},y:{value:{getEnd:function(e,t,i,a){return n[a].y}},duration:500}},ease:Phaser.Math.Easing.Back.Out,delay:function(n,a,r){var s=n.row,o=n.column,c=s*t.scene.levelHandler.getConfigs().columns+o,u=e.length-c-1;return i[n.color]+10*u}})},n.endBoard=function(e){var t=this,n=e.length,i=this.scene,a=i.levelHandler,r=i.currentScore>=a.targetScore;e.forEach((function(e,t){var n=250*t+400,i=r?-1:1;t>=10?(n=100*t+2e3,e.explosive(n,i,!1)):e.explosive(n,i,!1),e.showHighlight(0,n-400)}));var s=10;return this.scene.tweens.addCounter({repeat:n+1,duration:250,onRepeat:function(e){s<0?e.setTimeScale(1.6):(t.scene.runBonusScoreAnimation(200*s),s--)}})},n.capturing=function(e,t,n){return e.forEach((function(e,i){var a=100*i,r=n?i:-1;e.explosive(a+t,r),e instanceof Rh||e.showHighlight(0,a)})),this.scene.time.addEvent({delay:100*e.length+t+150})},n.moveRows=function(e,t){var n,i=this;void 0===t&&(t=0);var a=e.tile,r=e.fromRow,s=e.toRow;if(r&&s){var o=s*gh.SIZE-r*gh.SIZE;null!=(n=this.moveRowsTween)&&n.isPlaying()&&this.moveRowsTween.stop(),this.isMoveTilesCompleted=!1,this.scene.tweens.killTweensOf(a),this.moveRowsTween=this.scene.tweens.add({targets:a,props:{y:{value:a.y+o,delay:t,duration:this.moveDuration,ease:this.moveEase}},onUpdate:function(){i.isMoveTilesCompleted=!1},onComplete:function(){i.isMoveTilesCompleted=!0}})}},n.moveColumns=function(e,t){var n,i=this;void 0===t&&(t=0);var a=e.tile,r=e.fromColumn,s=e.toColumn;if(r&&s){var o=s*gh.SIZE-r*gh.SIZE;null!=(n=this.moveColumnsTween)&&n.isPlaying()&&this.moveColumnsTween.stop(),this.isMoveTilesCompleted=!1,this.scene.tweens.killTweensOf(a),this.moveColumnsTween=this.scene.tweens.add({targets:a,props:{x:{value:a.x+o,delay:t,duration:this.moveDuration,ease:this.moveEase}},onUpdate:function(){i.isMoveTilesCompleted=!1},onComplete:function(){i.isMoveTilesCompleted=!0}})}},n.moveRowsDuringShuffle=function(){var e=(0,s.Z)(h().mark((function e(t){var n,i,a,r,s,o=this;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=t.tile,a=t.fromRow,r=t.toRow,a&&r){e.next=3;break}return e.abrupt("return");case 3:return s=r*gh.SIZE-a*gh.SIZE,null!=(n=this.moveRowsTween)&&n.isPlaying()&&this.moveRowsTween.stop(),this.scene.tweens.killTweensOf(i),e.abrupt("return",new(u())((function(e){o.moveRowsTween=o.scene.tweens.add({targets:i,props:{y:{value:i.y+s,delay:Phaser.Math.FloatBetween(0,500),duration:o.shuffleDuration,ease:Phaser.Math.Easing.Quadratic.InOut}},onUpdate:function(){o.isMoveTilesCompleted=!1},onComplete:function(){o.isMoveTilesCompleted=!0,e()}})})));case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.moveColsDuringShuffle=function(){var e=(0,s.Z)(h().mark((function e(t){var n,i,a,r,s,o=this;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=t.tile,a=t.fromColumn,r=t.toColumn,a&&r){e.next=3;break}return e.abrupt("return");case 3:return s=r*gh.SIZE-a*gh.SIZE,null!=(n=this.moveColumnsTween)&&n.isPlaying()&&this.moveColumnsTween.stop(),this.scene.tweens.killTweensOf(i),e.abrupt("return",new(u())((function(e){o.moveColumnsTween=o.scene.tweens.add({targets:i,props:{x:{value:i.x+s,delay:Phaser.Math.FloatBetween(0,500),duration:o.shuffleDuration,ease:Phaser.Math.Easing.Quadratic.InOut}},onUpdate:function(){o.isMoveTilesCompleted=!1},onComplete:function(){o.isMoveTilesCompleted=!0,e()}})})));case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),t}(ao),Zh=Fh,Hh={STATUS:{READY:"ready",RUNNING:"running",STOPPED:"stopped"}},Yh={NORMAL:"normal",FALL_DOWN:"fall-down",FLY_UP:"fly-up",PUSH_LEFT:"push-left",PUSH_RIGHT:"push-right",PUT_ROWS_MIDDLE:"put-rows-middle",PUT_COLUMNS_MIDDLE:"put-columns-middle",FLY_UP_PUSH_LEFT:"fly-up-push-left",FLY_UP_PUSH_RIGHT:"fly-up-push-right",FALL_DOWN_PUSH_LEFT:"fall-down-push-left",FALL_DOWN_PUSH_RIGHT:"fall-down-push-right",FLY_UP_PUT_COLUMNS_MIDDLE:"fly-up-put-columns-middle",FALL_DOWN_PUT_COLUMNS_MIDDLE:"fall-down-put-columns-middle"},zh=Hh.STATUS,Vh=gh.SETS,Wh=Vh.SET_3,Kh=Vh.SET_4,jh=Vh.SET_5,Xh=Vh.SET_6,qh=Vh.SET_7,Jh=Vh.SET_8,Qh=Vh.SET_9,$h=GameCore.Configs.Match,ed=function(e){(0,o.Z)(n,e);var t=n.prototype;function n(t){var n;return(n=e.call(this,t)||this).scene=void 0,n.tileMap={},n.boardMap={},n.boardContainer=void 0,n.scene=t,n.boardContainer=n.scene.make.container({}),n}return t.registerEvents=function(){this.unregisterEvents(),this.scene.world.events.on(Nt.Z.RESIZE,this.alignBoard,this)},t.unregisterEvents=function(){this.scene.world.events.off(Nt.Z.RESIZE,this.alignBoard,this)},t.init=function(){this.clearBoard(),this.setState(zh.READY)},t.start=function(){this.isRunning()||(this.loadSavedBoard(),this.generateBoard(),this.registerEvents(),this.setState(zh.RUNNING))},t.stop=function(){this.isRunning()&&(this.setState(zh.STOPPED),this.unregisterEvents())},t.loadSavedBoard=function(){if(this.scene.gameplayMode===Ao.SINGLE&&$h.ContinueSingleMatchEnabled){var e=this.scene.levelHandler.getFen();e&&this.loadBoardByFen(e)}},t.loadBoardByFen=function(e){var t=this.scene.tileManager;for(var n in this.tileMap=GameCore.Utils.Hash.decodeMap(e,gh.HASH),this.tileMap){var i=this.tileMap[n];if(GameCore.Utils.Valid.isObject(i))for(var a in i){var r=i[a],s=t.createTileByType(r,+n,+a);this.setTileToMap(s,+n,+a)}}},t.clearBoard=function(){this.tileMap={},this.boardMap={},this.boardContainer.removeAll()},t.generateBoard=function(){this.generateTiles(),this.placeBoard(),this.alignBoard()},t.generateTiles=function(){var e,t=this.scene,n=t.tileManager,i=t.levelHandler,a=(t.gameplayMode,i.getConfigs()),r=a.rows,s=a.columns,o=a.colors,c=a.specials,u=a.sets,l=r*s;if(!(Q()(this.boardMap).length>0)){var h=Q()(u),d=Q()(c),p=O()(e=[]).call(e,o,d),f=[],m={};h.forEach((function(e){for(var t=u[e]||0,n=0;n<t;n++)f.push(e)})),GameCore.Utils.Array.shuffle(f),d.forEach((function(e){m[e]=c[e]}));var g=0,v="red";if(this.scene.isBlitzGameplay())for(var y,E,S=un()(y=O()(E=[]).call(E,o)).call(y,(function(){return.5-Math.random()})),T=S.length>3?A()(S).call(S,0,3):o,b=[],I=70;I<l;I++){var w=this.getPositionByIndex(I),C=w.row,x=w.column;if(!this.boardMap[C]||!this.boardMap[C][x]){var _=this.getRandomTileId(T,b);if(this.createTilesForBlitzModeBottom(I,10,_),v=_,b.push(_),b.length>=T.length)break}}for(var R=0;R<l;R++){var P=this.getPositionByIndex(R),k=P.row,M=P.column;if(!this.boardMap[k]||!this.boardMap[k][M]){var D=this.getRandomTileId(p,[v]),N=m[D]||0;if(N>0&&!(1===k||k===r)&&!(1===M||M===s)){var L=n.createTileByType(D,k,M);this.setTileToMap(L,k,M),m[D]=N-1,v=D}else{D=this.getRandomTileId(o,[v]);var B=[];if(this.findSameColor(k,M,B,D),Phaser.Math.RND.between(0,100)>60){hi()(B).call(B,D)>=0&&(D=this.getRandomTileId(o,B)),v=D;var G=f[g],U=this.getSetCount(G);if(U>0)if(this.createTilesBySet(R,U,D)){g++;continue}}v=D;var F=n.createTileByType(D,k,M);this.setTileToMap(F,k,M)}}}}},t.getSetCount=function(e){switch(e){case Wh:return 3;case Kh:return 4;case jh:return 5;case Xh:return 6;case qh:return 7;case Jh:return 8;case Qh:return 9;default:return 0}},t.getRandomTileId=function(e,t){if(e.length<=t.length)return e[Phaser.Math.RND.between(0,e.length-1)];var n=GameCore.Utils.Array.difference(e,t),i=n.length-1;return n[Phaser.Math.RND.between(0,i)]},t.createTilesBySet=function(e,t,n){var i=this,a=this.scene.tileManager,r=[],s=this.getPositionByIndex(e),o=s.row,c=s.column;return this.findEmptySlot(o,c,r,t),!(r.length<t)&&(r.forEach((function(e){var t=e.row,r=e.column,s=a.createTileByType(n,t,r);i.setTileToMap(s,t,r)})),!0)},t.createTilesForBlitzModeBottom=function(e,t,n){var i=this,a=this.scene.tileManager,r=[],s=this.getPositionByIndex(e),o=s.row,c=s.column;return this.findEmptySlotForBlitzModeBottom(o,c,r,t),r.forEach((function(e){var t=e.row,r=e.column,s=a.createTileByType(n,t,r);i.setTileToMap(s,t,r)})),!0},t.findSameColor=function(e,t,n,i,a,r){if(void 0===a&&(a=2),void 0===r&&(r=!1),!(a<1)){var s=this.scene.levelHandler.getConfigs(),o=s.rows,c=s.columns;if(!(e<1||t<1)&&!(e>o||t>c)){if(r){if(!(e in this.boardMap))return;if(!(t in this.boardMap[e]))return;var u=this.boardMap[e][t];n.push(u.color)}this.findSameColor(e,t-1,n,i,a-1,!0),this.findSameColor(e-1,t,n,i,a-1,!0),this.findSameColor(e-1,t+1,n,i,a-1,!0)}}},t.findEmptySlotForBlitzModeBottom=function(e,t,n,i){if(!(n.length>=i)){var a=this.scene.levelHandler.getConfigs(),r=a.rows,s=a.columns;if(!(e<8||t<1))if(!(e>r||t>s))if(!(e in this.boardMap)||!(t in this.boardMap[e]))if(!Ae()(n).call(n,{row:e,column:t}))n.push({row:e,column:t}),Phaser.Math.RND.between(0,100)>=30?this.findEmptySlotForBlitzModeBottom(e,t+1,n,i):this.findEmptySlotForBlitzModeBottom(e+1,t,n,i)}},t.findEmptySlot=function(e,t,n,i){if(!(n.length>=i)){var a=this.scene.levelHandler.getConfigs(),r=a.rows,s=a.columns;if(!(e<1||t<1))if(!(e>r||t>s))if(!(e in this.boardMap)||!(t in this.boardMap[e]))n.push({row:e,column:t}),Phaser.Math.RND.between(0,100)>=40?this.findEmptySlot(e,t+1,n,i):this.findEmptySlot(e+1,t,n,i)}},t.getTilesByMap=function(){var e=[];for(var t in this.boardMap){var n=this.boardMap[t];for(var i in n){var a=this.boardMap[t][i];e.push(a)}}return e},t.placeBoard=function(){var e=this.scene.levelHandler.getConfigs(),t=e.rows,n=e.columns,i=this.getTilesByMap();Phaser.Actions.GridAlign(i,{width:n,height:t,cellWidth:gh.SIZE,cellHeight:gh.SIZE,x:-n*gh.SIZE/2,y:-t*gh.SIZE})},t.alignBoard=function(){var e=this.scene.ads.getBannerHeight();Phaser.Display.Align.In.BottomCenter(this.boardContainer,this.scene.gameZone,gh.SIZE,20-e)},t.getPositionByIndex=function(e){var t=this.scene.levelHandler.getConfigs().columns;return{row:Math.floor(e/t)+1,column:e%t+1}},t.getTileByIndex=function(e){var t=this.getPositionByIndex(e),n=t.row,i=t.column;return this.boardMap[n][i]},t.setTileToMap=function(e,t,n){var i=this.scene.tileManager;this.tileMap[t]||(this.tileMap[t]={}),this.boardMap[t]||(this.boardMap[t]={}),e.setRow(t),e.setColumn(n),this.tileMap[t][n]=e.color;var a=this.boardMap[t][n];a&&i.removeTileFromBoard(a),this.boardMap[t][n]=e,this.boardContainer.add(e),i.addTile(e)},t.tileSwap=function(e){var t=e.fromRow,n=e.toRow,i=e.fromColumn,a=e.toColumn,r=this.boardMap[n][a],s=this.boardMap[t][i];r.setRow(t),r.setColumn(i),s.setRow(n),s.setColumn(a),this.boardMap[n][a]=s,this.boardMap[t][i]=r,this.tileMap[n][a]=s.color,this.tileMap[t][i]=r.color},t.processGravityModesForTileMap=function(){switch(this.scene.levelHandler.getConfigs().mode){case Yh.FALL_DOWN:case Yh.PUT_COLUMNS_MIDDLE:case Yh.PUT_ROWS_MIDDLE:case Yh.FALL_DOWN_PUT_COLUMNS_MIDDLE:return this.processGravityModeFallingDown(this.tileMap);case Yh.FALL_DOWN_PUSH_LEFT:var e=this.processGravityModeFallingDown(this.tileMap);return this.processGravityModePushLeft(e);case Yh.FALL_DOWN_PUSH_RIGHT:var t=this.processGravityModeFallingDown(this.tileMap);return this.processGravityModePushRight(t);case Yh.PUSH_LEFT:return this.processGravityModePushLeft(this.tileMap);case Yh.PUSH_RIGHT:return this.processGravityModePushRight(this.tileMap);case Yh.FLY_UP:case Yh.FLY_UP_PUT_COLUMNS_MIDDLE:return this.processGravityModeFlyUp(this.tileMap);case Yh.FLY_UP_PUSH_LEFT:var n=this.processGravityModeFlyUp(this.tileMap);return this.processGravityModePushLeft(n);case Yh.FLY_UP_PUSH_RIGHT:var i=this.processGravityModeFlyUp(this.tileMap);return this.processGravityModePushRight(i);default:return this.tileMap}},t.processGravityModeFlyUp=function(e){var t={};for(var n in e){var i=e[n],a=[];for(var r in i){var s=i[r];"?"!==s&&a.push(s)}var o=Q()(i).length-a.length;t[n]||(t[n]={});for(var c=1,u=0;u<o;u++)t[n][c]="?",c++;for(var l=0;l<a.length;l++)t[n][c]=a[l],c++}return t},t.processGravityModeFallingDown=function(e){var t={};for(var n in e){var i=e[n],a=[];for(var r in i){var s=i[r];"?"!==s&&a.push(s)}var o=Q()(i).length-a.length;t[n]||(t[n]={});for(var c=1,u=0;u<a.length;u++)t[n][c]=a[u],c++;for(var l=0;l<o;l++)t[n][c]="?",c++}return t},t.processGravityModePushLeft=function(e){for(var t={},n=this.scene.levelHandler.getConfigs(),i=n.rows,a=n.columns,r=1;r<=i;r++){t[r]||(t[r]={});for(var s=1;s<=a;s++)t[r][s]||(t[r][s]="?")}for(var o=1;o<=a;o++){for(var c=[],u=1;u<=i;u++){var l=e[u][o];"?"!==l&&c.push(l)}for(var h=i-c.length+1,d=0;d<c.length;d++)t[h][o]=c[d],h++}return t},t.processGravityModePushRight=function(e){for(var t={},n=this.scene.levelHandler.getConfigs(),i=n.rows,a=n.columns,r=1;r<=i;r++){t[r]||(t[r]={});for(var s=1;s<=a;s++)t[r][s]||(t[r][s]="?")}for(var o=1;o<=a;o++){for(var c=[],u=1;u<=i;u++){var l=e[u][o];"?"!==l&&c.push(l)}for(var h=1,d=0;d<c.length;d++)t[h][o]=c[d],h++}return t},n}(ao),td=ed,nd={GIFT:{ID:"ItemGift"},PAINT:{ID:"ItemPaint"},HAMMER:{ID:"ItemHammer"},SHUFFLE:{ID:"ItemShuffle"},CHANGE_COLOR:{ID:"ItemChangeColor"}},id=n(436),ad=Ui.Z.GAMEPLAY,rd=ad.KEY,sd=ad.FRAME,od=function(){function e(e){this.scene=void 0,this.fadeInAnimation=void 0,this.rotateAnimation=void 0,this.hammer=void 0,this.onCompleted=void 0,this.scene=e}var t=e.prototype;return t.runAnimation=function(e,t){var n;this.addToAScene(),this.hammer.revive(),this.hammer.setAlpha(1),this.hammer.setPosition(e+35,t),this.runFadeInAnimation(),this.runRotateAnimation(),"function"===typeof this.onCompleted&&(null==(n=this.rotateAnimation)||n.next(this.onCompleted))},t.addToAScene=function(){var e=this.scene.boardManager.boardContainer;this.createHammer(),e.exists(this.hammer)||e.add(this.hammer);var t=e.count("visible",!0);e.moveTo(this.hammer,t)},t.createHammer=function(){if(!this.scene.children.exists(this.hammer)){this.hammer=this.scene.add.image(0,0,rd,sd.ITEM_HAMMER),this.hammer.setFlipX(!0),this.hammer.setAngle(50),this.hammer.setOrigin(1,1),this.hammer.setWorldSize(29.5,37.5);var e=1/GameCore.Utils.Image.getImageScale();this.hammer.setScale(1.2*e),this.hammer.setDepth(_i.Z.ITEM),this.hammer.kill()}},t.runFadeInAnimation=function(){var e,t;this.hammer.setVisible(!0),null==(e=this.fadeInAnimation)||e.remove(),this.fadeInAnimation=new da.Z({targets:[this.hammer]}),null==(t=this.fadeInAnimation)||t.play()},t.runRotateAnimation=function(){var e,t,n=this;null==(e=this.rotateAnimation)||e.remove(),this.rotateAnimation=new id.Z({targets:[this.hammer],ease:Phaser.Math.Easing.Back.In,duration:500,props:{angle:-20},onComplete:function(){n.hammer.kill()}}),null==(t=this.rotateAnimation)||t.play()},e}(),cd={targets:[],props:{alpha:{duration:500,value:{start:0,from:0,to:1},ease:Phaser.Math.Easing.Cubic.Out},scale:{duration:1e3,value:{start:.8,from:.8,to:1},ease:Phaser.Math.Easing.Elastic.Out,easeParams:[.1,.45]}}},ud=function(e){function t(t){return e.call(this,cd,t)||this}return(0,o.Z)(t,e),t}(na.Z),ld=GameCore.Configs.Gameplay,hd=Ui.Z.GAMEPLAY,dd=hd.KEY,pd=hd.FRAME,fd=function(e){function t(t,n,i,a){var r;return(r=e.call(this,t)||this).scene=void 0,r.isActive=!0,r.value=void 0,r.autoRunUpAnimation=!0,r.item=void 0,r.bg=void 0,r.bar=void 0,r.icon=void 0,r.diamond=void 0,r.showItemAnimation=void 0,r.bubbleAnimation=void 0,r.shakeAnimation=void 0,r.scene=t,r.createBg(),r.createItem(n,i,a),r.createBar(),r.createIcon(),r.createDiamond(),r.createAnimations(),r.setDepth(_i.Z.ITEM),r.scene.add.existing((0,Gi.Z)(r)),r}(0,o.Z)(t,e);var n=t.prototype;return n.activeItem=function(){this.isActive=!0,this.showItemAnimation.play(),this.bg.setVisible(!1),this.bar.setVisible(!1),this.icon.setVisible(!1),this.diamond.setVisible(!1)},n.deactivateItem=function(){this.isActive=!1,this.bg.setVisible(!0),this.bar.setVisible(!ld.FreeItems),this.icon.setVisible(!ld.FreeItems),this.diamond.setVisible(!ld.FreeItems)},n.createBg=function(){var e=Ui.Z.GAMEPLAY,t=e.KEY,n=e.FRAME;this.bg=this.scene.add.image(0,0,t,n.ITEM_BG_ITEM),this.bg.setWorldSize(50,50),this.add(this.bg)},n.createItem=function(e,t,n){this.item=this.scene.add.image(0,0,dd,e),this.item.setWorldSize(t,n),Phaser.Display.Align.In.Center(this.item,this.bg),this.add(this.item)},n.createBar=function(){this.bar=this.scene.add.image(0,0,dd,pd.ITEM_BG_COIN),this.bar.setWorldSize(47,17),Phaser.Display.Align.In.BottomCenter(this.bar,this.bg,0,15),this.add(this.bar)},n.createIcon=function(){this.icon=this.scene.add.image(0,0,dd,pd.ICON_DIAMOND_SMALL),this.icon.setWorldSize(10,10),Phaser.Display.Align.In.RightCenter(this.icon,this.bar,-4),this.add(this.icon)},n.createDiamond=function(){this.diamond=this.scene.make.bitmapText({font:Sa.Z.PRIMARY.KEY,size:this.scene.fontSize(16),origin:{x:.5,y:.5}}),this.setDiamond(0),this.add(this.diamond)},n.setDiamond=function(e){this.value=e,this.diamond.setText("-"+e),this.icon.setVisible(!0);var t=this.icon.width+6;Phaser.Display.Align.In.RightCenter(this.diamond,this.bar,-t)},n.createAnimations=function(){var e=1/GameCore.Utils.Image.getImageScale();this.showItemAnimation=new ud({targets:[this.item],props:{scale:{duration:1e3,value:{start:.8*e,from:.8*e,to:e},ease:Phaser.Math.Easing.Elastic.Out,easeParams:[.1,.45]}}}),this.bubbleAnimation=new ua({targets:[this.item],props:{scale:{from:e,to:1.2*e}}}),this.shakeAnimation=new la.Z({targets:[this.diamond],repeat:3,props:{x:4}})},(0,re.Z)(t,[{key:"onClick",set:function(e){var t=this.bg,n=t.width,i=t.height,a=this.item.height;this.setSize(n,i+a),this.setInteractive({useHandCursor:!0}),this.on(Phaser.Input.Events.GAMEOBJECT_POINTER_UP,e)}}]),t}(Phaser.GameObjects.Container),md=fd,gd="FirstMove",vd="TargetScore",yd="CurrentScore",Ed="ColorfulGem",Ad="ItemPaint",Sd="ItemHammer",Td="ItemShuffle",bd="tut-start",Id="tut-setup-completed",wd="tut-gems-eat",Cd="tut-gems-dropped",xd=nd.HAMMER.ID,Od=Ui.Z.GAMEPLAY.FRAME,_d=function(e){function t(t){var n;return(n=e.call(this,t,Od.ITEM_HAMMER,29.5,37.5)||this).scene=void 0,n.isRunning=!1,n.hammerAnimation=void 0,n.handleUseItem=function(){if(!n.isRunning){var e=n.scene,t=e.itemManager,i=e.tutorialManager,a=e.tileManager;if(n.isActive){if(i.tutorialId===Sd)return;t.deactivateItem(xd)}else{if(!t.activeItem(xd))return n.scene.audio.playSound(Fi.Z.MOVE_WRONG),void n.shakeAnimation.play();a.removeSuggestionsTiles()}}},n.hitTile=function(e){return function(){var t=n.scene,i=t.tileManager,a=t.itemManager;i.isSelectable=!0,i.tilesCapturing([e],!1,0,300),i.isSelectable=!1,n.scene.audio.playSound(Fi.Z.USE_HAMMER),n.scene.time.addEvent({delay:1e3,callback:function(){n.isRunning=!1,a.deactivateItem(xd),i.isSelectable=!0,i.suggestionsEatableTiles();var e=ki.USE_HAMMER.EVENTS.USE_HAMMER;Li.emit(e,{type:"hammer",value:1})}})}},n.scene=t,n.setDiamond(45),n.createAnimations(),n.onClick=n.handleUseItem,n}(0,o.Z)(t,e);var n=t.prototype;return n.activeItem=function(){e.prototype.activeItem.call(this),this.bubbleAnimation.play(),this.scene.audio.pauseMusic()},n.deactivateItem=function(){e.prototype.deactivateItem.call(this),this.bubbleAnimation.stop(),this.scene.audio.playMusic()},n.createAnimations=function(){e.prototype.createAnimations.call(this),this.hammerAnimation=new od(this.scene)},n.useItem=function(e){if(this.scene.audio.stopSound(Fi.Z.ITEM_ACTIVE_AMBIENCE),!this.isActive||this.isRunning)return!1;this.isRunning=!0;var t=this.scene,n=t.tileManager,i=t.boardManager.boardContainer;n.isSelectable=!1;var a=e.x,r=e.y,s=i.count("visible",!0);return i.moveTo(e,s-1),this.hammerAnimation.onCompleted=this.hitTile(e),this.hammerAnimation.runAnimation(a,r),!0},t}(md),Rd=Ui.Z.GAMEPLAY.KEY,Pd=function(){function e(e){this.scene=void 0,this.paint=void 0,this.scene=e}var t=e.prototype;return t.runAnimation=function(e,t){return this.addToAScene(),this.paint.revive(),this.paint.setPosition(e,t),this.paint.anims.play(Tu.PAINT_EXPLOSIVE.KEY),this.paint.setWorldSize(134,133),this.scene.audio.playSound(Fi.Z.USE_PAINT),this.paint},t.addToAScene=function(){var e=this.scene.boardManager.boardContainer;if(e.exists(this.paint)){var t=e.count("visible",!0);e.moveTo(this.paint,t)}else this.createPaint(),e.add(this.paint)},t.createPaint=function(){var e;null==(e=this.paint)||e.destroy(),this.paint=this.scene.add.sprite(0,0,Rd),this.paint.kill(),this.paint.setDepth(_i.Z.ITEM)},e}(),kd=nd.PAINT.ID,Md=Ui.Z.GAMEPLAY.FRAME,Dd=function(e){function t(t){var n;return(n=e.call(this,t,Md.ITEM_PAINT,31.5,33)||this).scene=void 0,n.isRunning=void 0,n.paintAnimation=void 0,n.maxRowsAround=1,n.maxColumnsAround=1,n.handleUseItem=function(){if(!n.isRunning){var e=n.scene,t=e.itemManager,i=e.tutorialManager,a=e.tileManager;if(n.isActive){if(i.tutorialId===Ad)return;t.deactivateItem(kd)}else{if(!t.activeItem(kd))return n.scene.audio.playSound(Fi.Z.MOVE_WRONG),void n.shakeAnimation.play();a.removeSuggestionsTiles()}}},n.scene=t,n.isRunning=!1,n.setDiamond(100),n.createAnimations(),n.onClick=n.handleUseItem,n}(0,o.Z)(t,e);var n=t.prototype;return n.activeItem=function(){e.prototype.activeItem.call(this),this.bubbleAnimation.play(),this.scene.audio.pauseMusic()},n.deactivateItem=function(){e.prototype.deactivateItem.call(this),this.bubbleAnimation.stop(),this.scene.audio.playMusic()},n.createAnimations=function(){e.prototype.createAnimations.call(this),this.paintAnimation=new Pd(this.scene)},n.useItem=function(e){var t=this;if(this.scene.audio.stopSound(Fi.Z.ITEM_ACTIVE_AMBIENCE),!this.isActive||this.isRunning)return!1;this.isRunning=!0;var n=this.scene,i=n.tileManager,a=n.itemManager;i.isSelectable=!1;var r=i.getTilesAround(e,this.maxRowsAround,this.maxColumnsAround),s=e.x,o=e.y,c=e.tileType;return this.paintAnimation.runAnimation(s,o).once(Phaser.Animations.Events.ANIMATION_COMPLETE,(function(){i.tilesChangeColor(c,r),a.deactivateItem(kd),i.isSelectable=!0,i.suggestionsEatableTiles(),t.isRunning=!1;var e=ki.USE_COLOR_POTION.EVENTS.USE_COLOR_POTION;Li.emit(e,{type:"potion",value:1})})),!0},t}(md),Nd={TYPES:{COLLECT_GEMS:"collect-gems",USE_ITEM:"use-item",COMBO:"combo"},EVENTS:{MISSION_START:"mission-start",MISSION_UPDATE:"mission-update",MISSION_FAILED:"mission-failed",MISSION_COMPLETED:"mission-completed"},OBJECTS:(0,r.Z)({},gh.COLORS,gh.SPECIALS,{PAINT:nd.PAINT.ID,HAMMER:nd.HAMMER.ID,SHUFFLE:nd.SHUFFLE.ID})},Ld={REPLAY:"replay",RESCUE:"rescue",PAUSE:"pause-game",RESUME:"resume-game",LEVEL_END:"level-end",BLITZ_GAME_BEGIN:"blitz-game-begin",BLITZ_GAME_RESCUE:"blitz-game-rescue",RECEIVE_DIAMONDS:"receive-coins"},Bd=Hh.STATUS,Gd=GameCore.Configs.Gameplay,Ud=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n.itemTitle=void 0,n.itemDescription=void 0,n.items={},n.itemActive="",n.currentHideableObjects=[],n.itemUI=void 0,n.scene=t,n.itemUI=n.scene.add.group(),n.createItems(),n.createItemTitle(),n.createItemDescription(),n.currentHideableObjects=[],n}(0,o.Z)(t,e);var n=t.prototype;return n.init=function(){for(var e in this.items)this.deactivateItem(e);this.setState(Bd.READY)},n.activeItem=function(e){if(!this.isRunning())return!1;var t=this.scene,n=t.tileManager,i=t.tutorialManager;if(!this.items[e])return!1;if(this.itemActive&&this.itemActive!==e)return!1;if(this.scene.currentDiamond<this.items[e].value&&!Gd.FreeItems)return!1;var a=i.tutorialId===e;if(!n.isUseableItem&&!a)return!1;for(var r in this.items)this.deactivateItem(r,!1);return this.itemActive=e,this.items[e].activeItem(),this.showMask(),this.itemActive!==nd.HAMMER.ID&&this.itemActive!==nd.PAINT.ID||this.pauseBlitzTimer(),!0},n.deactivateItem=function(e,t){void 0===t&&(t=!0),this.items[e]&&(this.itemActive="",this.items[e].deactivateItem(),this.scene.audio.stopSound(Fi.Z.ITEM_ACTIVE_AMBIENCE),this.scene.updateMove(),t&&this.hideMask(),t&&(e!==nd.HAMMER.ID&&e!==nd.PAINT.ID||this.resumeBlitzTimer()))},n.getActiveItem=function(){if(this.isRunning()&&this.items[this.itemActive])return this.items[this.itemActive]},n.showMask=function(){var e,t=this;if(-1!==hi()(e=[nd.HAMMER.ID,nd.PAINT.ID]).call(e,this.itemActive)){switch(this.scene.tweens.killTweensOf(this.currentHideableObjects),this.scene.tweens.killTweensOf([this.itemTitle,this.itemDescription,this.scene.background]),this.itemUI.killGroup(),this.itemActive){case nd.HAMMER.ID:this.items[nd.HAMMER.ID].setVisible(!0),this.scene.audio.playSound(Fi.Z.ITEM_ACTIVE_AMBIENCE,{volume:.4,loop:!0});break;case nd.PAINT.ID:this.items[nd.PAINT.ID].setVisible(!0),this.scene.audio.playSound(Fi.Z.ITEM_ACTIVE_AMBIENCE,{volume:.4,loop:!0})}this.currentHideableObjects=this.itemUI.getMatching("visible",!1);var n=this.scene.layoutManager.objects,i=n.opponentInfo,a=n.diamondBar;this.currentHideableObjects.push(a),this.scene.gameplayMode===Ao.CHALLENGE_FRIEND&&this.currentHideableObjects.push(i),this.currentHideableObjects.forEach((function(e){e.setVisible(!0)})),this.scene.add.tween({targets:this.currentHideableObjects,duration:400,ease:Phaser.Math.Easing.Quadratic.Out,props:{alpha:0},onComplete:function(){t.currentHideableObjects.forEach((function(e){e.setVisible(!1)}))}});var r=this.scene.game.globalScene;switch(this.scene.add.tween({targets:[this.scene.background],duration:400,ease:Phaser.Math.Easing.Quadratic.Out,props:{alpha:.2},onUpdate:function(){r instanceof wa.Z&&r.requestBackgroundMaskUpdate("ITEM",1-t.scene.background.alpha)}}),this.itemTitle.setVisible(!0),this.itemDescription.setVisible(!0),this.itemActive){case nd.HAMMER.ID:this.itemTitle.setText(this.scene.lang.Text.HAMMER),this.itemDescription.setFontSize(this.scene.fontSize(28)),this.itemDescription.setText(this.scene.lang.Text.USE_HAMMER);break;case nd.PAINT.ID:"ja"===this.scene.lang.getCurrentLanguage()?this.itemDescription.setFontSize(this.scene.fontSize(28)):this.itemDescription.setFontSize(this.scene.fontSize(25)),this.itemTitle.setText(this.scene.lang.Text.MAGIC_BOTTLE),this.itemDescription.setText(this.scene.lang.Text.USE_MAGIC)}this.itemTitle.setAlpha(0),this.itemDescription.setAlpha(0),this.scene.add.tween({targets:[this.itemTitle,this.itemDescription],duration:400,ease:Phaser.Math.Easing.Quadratic.Out,props:{alpha:1}})}},n.hideMask=function(){var e,t,n=this,i=this.scene.layoutManager.objects.opponentInfo;this.scene.gameplayMode!==Ao.CHALLENGE_FRIEND?this.currentHideableObjects=Oe()(t=this.currentHideableObjects).call(t,(function(e){return e!==i})):i.setVisible(!0);this.scene.tweens.killTweensOf(this.currentHideableObjects),this.scene.tweens.killTweensOf([this.itemTitle,this.itemDescription,this.scene.background]),this.scene.add.tween({targets:[this.itemTitle,this.itemDescription],duration:400,ease:Phaser.Math.Easing.Quadratic.In,props:{alpha:0},onComplete:function(){n.itemTitle.setVisible(!1),n.itemDescription.setVisible(!1),n.itemTitle.setText(""),n.itemDescription.setText("")}}),this.itemUI.reviveGroup();var a=this.scene.game.globalScene;this.scene.add.tween({targets:O()(e=[this.scene.background]).call(e,this.currentHideableObjects),duration:400,ease:Phaser.Math.Easing.Quadratic.In,props:{alpha:1},onUpdate:function(){a instanceof wa.Z&&a.requestBackgroundMaskUpdate("ITEM",1-n.scene.background.alpha)}})},n.applyItem=function(e){if(!this.isRunning())return!1;var t=this.getActiveItem();if(!t)return!1;var n=!1;switch(this.itemActive){case nd.HAMMER.ID:if(e instanceof Rh)return!1;t instanceof _d&&(n=t.useItem(e));break;case nd.PAINT.ID:if(e instanceof Rh)return!1;t instanceof Dd&&(n=t.useItem(e));break;default:return!1}if(n){var i,a=this.scene.tutorialManager.tutorialId,r=Sd,s=Ad,o=Td;a&&-1!==hi()(i=[r,s,o]).call(i,a)||this.scene.useDiamond(t.value),this.scene.missionsManager.updateMission(Nd.TYPES.USE_ITEM,this.itemActive,1)}return n},n.createItemTitle=function(){var e=this.scene.lang.getCurrentLanguage();this.itemTitle=this.scene.make.bitmapText({font:Sa.Z.PRIMARY.KEY,size:this.scene.fontSize(35),text:"Title",origin:{x:.5,y:.5},visible:!1}),this.itemTitle.setTint(16705563);var t=-95;"id"===e&&(t=-80),Phaser.Display.Align.In.TopCenter(this.itemTitle,this.scene.gameZone,0,t)},n.createItemDescription=function(){var e=this.scene.lang.getCurrentLanguage();this.itemDescription=this.scene.make.bitmapText({font:Sa.Z.PRIMARY.KEY,size:this.scene.fontSize(28),text:"Description",origin:{x:.5,y:.5},visible:!1}),this.itemDescription.setMaxWidth(250),this.itemDescription.setCenterAlign();var t=-180;"id"===e&&(t=-165),Phaser.Display.Align.In.TopCenter(this.itemDescription,this.scene.gameZone,0,t)},n.createItems=function(){var e=this.scene.layoutManager.objects;this.items[nd.GIFT.ID]=e.giftItem,this.items[nd.PAINT.ID]=e.paintItem,this.items[nd.HAMMER.ID]=e.hammerItem,this.items[nd.SHUFFLE.ID]=e.shuffleItem,this.itemUI.addMultiple([e.giftItem,e.paintItem,e.hammerItem,e.shuffleItem,e.diamondBar])},n.resumeBlitzTimer=function(){var e=this;this.scene.isBlitzGameplay()&&this.scene.time.delayedCall(400,(function(){e.scene.events.emit(Ld.RESUME)}))},n.pauseBlitzTimer=function(){this.scene.isBlitzGameplay()&&this.scene.events.emit(Ld.PAUSE,{hideTimer:!0})},t}(ao),Fd=Ud,Zd=gh.SETS,Hd=Zd.SET_3,Yd=Zd.SET_4,zd=Zd.SET_5,Vd=Zd.SET_6,Wd=Zd.SET_7,Kd=Zd.SET_8,jd=Zd.SET_9,Xd=gh.COLORS,qd=Xd.RED,Jd=Xd.BLUE,Qd=Xd.PINK,$d=Xd.GREEN,ep=Xd.YELLOW,tp=gh.SPECIALS,np=tp.FREEZE,ip=tp.COLORFUL,ap=tp.COLOR_CHANGE,rp=O()(ou=[{mode:Yh.NORMAL,colors:[qd,Jd,Qd,$d,ep],specials:(cu={},cu[np]=1,cu[ip]=1,cu[ap]=1,cu),sets:(uu={},uu[Hd]=1,uu[Yd]=1,uu[zd]=1,uu[Vd]=1,uu[Wd]=1,uu[Kd]=1,uu[jd]=1,uu),rows:10,columns:10,eatableSize:2,scorePerItem:5,targetScore:0}]).call(ou,[{mode:"fall-down-push-left",colors:["red","blue","pink","green","yellow"],specials:{},sets:{set_3:10,set_5:2,set_7:1},rows:10,columns:10,eatableSize:2,scorePerItem:5,targetScore:1200},{mode:"fall-down-push-left",colors:["red","blue","pink","green","yellow"],specials:{colorful:2},sets:{set_3:8,set_4:4,set_5:2,set_6:1},rows:10,columns:10,eatableSize:2,scorePerItem:5,targetScore:3e3},{mode:"fall-down-push-left",colors:["red","blue","pink","green","yellow"],specials:{colorful:2,freeze:2},sets:{set_3:8,set_4:7,set_5:2},rows:10,columns:10,eatableSize:2,scorePerItem:5,targetScore:5e3},{mode:"fall-down-push-left",colors:["red","blue","pink","green","yellow"],specials:{freeze:2,colorful:2,color_change:2},sets:{set_3:9,set_4:5,set_5:1},rows:10,columns:10,eatableSize:2,scorePerItem:5,targetScore:7500},{mode:"fall-down-push-left",colors:["red","blue","pink","green","yellow"],specials:{freeze:2,colorful:1,color_change:2},sets:{set_3:6,set_4:4,set_6:1},rows:10,columns:10,eatableSize:2,scorePerItem:5,targetScore:1e4},{mode:"fall-down-push-left",colors:["red","blue","pink","green","yellow"],specials:{freeze:3,colorful:1,color_change:2},sets:{set_3:6,set_4:3,set_5:1},rows:10,columns:10,eatableSize:2,scorePerItem:5,targetScore:12500},{mode:"fall-down-push-left",colors:["red","blue","pink","green","yellow"],specials:{freeze:3,colorful:3,color_change:5},sets:{set_3:6,set_4:3,set_5:1},rows:10,columns:10,eatableSize:2,scorePerItem:5,targetScore:15e3},{mode:"fall-down-push-left",colors:["red","blue","pink","green","yellow"],specials:{freeze:3,colorful:1,color_change:1},sets:{set_3:8,set_4:2,set_5:1},rows:10,columns:10,eatableSize:2,scorePerItem:5,targetScore:18e3},{mode:"fall-down-push-left",colors:["red","blue","pink","green","yellow"],specials:{freeze:1,colorful:3,color_change:2},sets:{set_3:8,set_4:1,set_6:1},rows:10,columns:10,eatableSize:2,scorePerItem:5,targetScore:2e4},{mode:"fall-down-push-left",colors:["red","blue","pink","green","yellow"],specials:{freeze:1,colorful:2,color_change:4},sets:{set_3:7,set_4:1,set_5:1},rows:10,columns:10,eatableSize:2,scorePerItem:5,targetScore:22e3},{mode:"fall-down-push-left",colors:["red","blue","pink","green","yellow"],specials:{freeze:5,colorful:2,color_change:3},sets:{set_3:6,set_4:1,set_5:1},rows:10,columns:10,eatableSize:2,scorePerItem:5,targetScore:25e3},{mode:"fall-down-push-left",colors:["red","blue","pink","green","yellow"],specials:{freeze:2,colorful:1,color_change:5},sets:{set_3:8,set_5:1},rows:10,columns:10,eatableSize:2,scorePerItem:5,targetScore:27500},{mode:"fall-down-push-left",colors:["red","blue","pink","green","yellow"],specials:{freeze:3,colorful:6,color_change:5},sets:{set_3:10,set_4:1},rows:10,columns:10,eatableSize:2,scorePerItem:5,targetScore:3e4},{mode:"fall-down-push-left",colors:["red","blue","pink","green","yellow"],specials:{freeze:6,colorful:1,color_change:3},sets:{set_3:10,set_4:1},rows:10,columns:10,eatableSize:2,scorePerItem:5,targetScore:33e3},{mode:"fall-down-push-left",colors:["red","blue","pink","green","yellow"],specials:{freeze:8,colorful:3,color_change:4},sets:{set_3:10,set_4:1},rows:10,columns:10,eatableSize:2,scorePerItem:5,targetScore:36e3},{mode:"fall-down-push-left",colors:["red","blue","pink","green","yellow"],specials:{freeze:4,colorful:3,color_change:5},sets:{set_3:10,set_4:1},rows:10,columns:10,eatableSize:2,scorePerItem:5,targetScore:38500},{mode:"fall-down-push-left",colors:["red","blue","pink","green","yellow"],specials:{freeze:2,colorful:7,color_change:7},sets:{set_3:10,set_4:1},rows:10,columns:10,eatableSize:2,scorePerItem:5,targetScore:41e3},{mode:"fall-down-push-left",colors:["red","blue","pink","green","yellow"],specials:{freeze:4,colorful:4,color_change:8},sets:{set_3:10,set_4:1},rows:10,columns:10,eatableSize:2,scorePerItem:5,targetScore:44e3},{mode:"fall-down-push-left",colors:["red","blue","pink","green","yellow"],specials:{freeze:5,colorful:5,color_change:4},sets:{set_3:10,set_4:1},rows:10,columns:10,eatableSize:2,scorePerItem:5,targetScore:46500},{mode:"fall-down-push-left",colors:["red","blue","pink","green","yellow"],specials:{freeze:8,colorful:3,color_change:7},sets:{set_3:10,set_4:1},rows:10,columns:10,eatableSize:2,scorePerItem:5,targetScore:5e4},{mode:"fall-down-push-left",colors:["red","blue","pink","green","yellow"],specials:{freeze:7,colorful:4,color_change:4},sets:{set_3:8,set_5:1},rows:10,columns:10,eatableSize:2,scorePerItem:5,targetScore:52500},{mode:"fall-down-push-left",colors:["red","blue","pink","green","yellow"],specials:{freeze:8,colorful:5,color_change:4},sets:{set_3:8,set_5:1},rows:10,columns:10,eatableSize:2,scorePerItem:5,targetScore:55e3},{mode:"fall-down-push-left",colors:["red","blue","pink","green","yellow"],specials:{freeze:4,colorful:8,color_change:6},sets:{set_3:8,set_5:1},rows:10,columns:10,eatableSize:2,scorePerItem:5,targetScore:58e3},{mode:"fall-down-push-left",colors:["red","blue","pink","green","yellow"],specials:{freeze:6,colorful:5,color_change:8},sets:{set_3:8,set_5:1},rows:10,columns:10,eatableSize:2,scorePerItem:5,targetScore:61e3},{mode:"fall-down-push-left",colors:["red","blue","pink","green","yellow"],specials:{freeze:7,colorful:5,color_change:5},sets:{set_3:8,set_5:1},rows:10,columns:10,eatableSize:2,scorePerItem:5,targetScore:63500},{mode:"fall-down-push-left",colors:["red","blue","pink","green","yellow"],specials:{freeze:5,colorful:7,color_change:7},sets:{set_3:8,set_5:1},rows:10,columns:10,eatableSize:2,scorePerItem:5,targetScore:66500},{mode:"fall-down-push-left",colors:["red","blue","pink","green","yellow"],specials:{freeze:5,colorful:7,color_change:1},sets:{set_3:8,set_5:1},rows:10,columns:10,eatableSize:2,scorePerItem:5,targetScore:69e3},{mode:"fall-down-push-left",colors:["red","blue","pink","green","yellow"],specials:{freeze:4,colorful:10,color_change:6},sets:{set_3:8,set_5:1},rows:10,columns:10,eatableSize:2,scorePerItem:5,targetScore:72e3},{mode:"fall-down-push-left",colors:["red","blue","pink","green","yellow"],specials:{freeze:4,colorful:10,color_change:6},sets:{set_3:8,set_5:1},rows:10,columns:10,eatableSize:2,scorePerItem:5,targetScore:75e3},{mode:"fall-down-push-left",colors:["red","blue","pink","green","yellow"],specials:{freeze:11,colorful:4,color_change:5},sets:{set_3:8,set_5:1},rows:10,columns:10,eatableSize:2,scorePerItem:5,targetScore:78e3},{mode:"fall-down-push-left",colors:["red","blue","pink","green","yellow"],specials:{freeze:11,colorful:4,color_change:5},sets:{set_3:8,set_5:1},rows:10,columns:10,eatableSize:2,scorePerItem:5,targetScore:80500}]),sp=GameCore.Configs,op=sp.Gameplay,cp=sp.Match,up=function(){function e(e){this.scene=void 0,this.level=0,this.targetScore=0,this.isPlayerDataLoaded=!1,this.gameLevel=void 0,this.levelConfig=void 0,this.fen=void 0,this.scene=e,this.gameLevel=rp}var t=e.prototype;return t.init=function(){cp.ContinueSingleMatchEnabled||(this.fen=void 0),this.handleLoadFenFromPlayerData(),this.level=op.StartLevel,this.setConfig(this.level)},t.getConfigs=function(){return this.levelConfig},t.getConfigByLevel=function(e){return this.gameLevel[e]||null},t.up=function(e){if(e<this.targetScore)return!1;var t=this.canLevelUp(this.level),n=t>=rp.length-1;return t===this.level?!!n&&(this.level+=1,this.setConfig(this.level),!0):(this.level=t,this.setConfig(t),!0)},t.canLevelUp=function(e){var t=e+1;return!!this.gameLevel[t]?t:e},t.calcByDifficult=function(e,t){var n=1,i=op.LevelDifficultRate;return e<=30?n=i.FromUnder30:e<=35?n=i.FromUnder35:e<=45?n=i.FromUnder45:e>45&&(n=i.FromUnder200),100*Math.round(t*n/100)},t.setConfig=function(e){var t=this.scene,n=t.currentScore;t.gameplayMode;if(this.scene.isBlitzGameplay())this.setBlitzConfig();else{var i=rp.length-1,a=e>i,r=a?i:e;this.levelConfig=this.gameLevel[r];var s=this.levelConfig.targetScore,o=void 0===s?0:s,c=(n>o?n:o)+2e3;this.targetScore=this.calcByDifficult(r,a?c:o),this.scene.setTargetScore(this.targetScore)}},t.setBlitzConfig=function(){this.targetScore=0;var e=(0,r.Z)({},this.gameLevel[1],{targetScore:0});this.levelConfig=e},t.saveLevel=function(e,t){this.fen={level:this.level,score:e,fen:t,updateAt:Date.now()},this.scene.player.setCustomData("normalSaveData",{level:this.level,score:e,fen:t,updateAt:this.fen.updateAt})},t.getFen=function(){var e;return(null==(e=this.fen)?void 0:e.fen)||""},t.getFenScore=function(){var e;return(null==(e=this.fen)?void 0:e.score)||0},t.getFenLevel=function(){var e;return(null==(e=this.fen)?void 0:e.level)||0},t.clearFen=function(){this.fen=void 0,this.scene.player.setCustomData("normalSaveData",{level:0,score:0,fen:"",updateAt:0})},t.handleLoadFenFromPlayerData=function(){var e;if(!this.isPlayerDataLoaded&&this.scene.gameplayMode===Ao.SINGLE){var t=this.scene.player.getCustomData("normalSaveData");if(t&&GameCore.Utils.Valid.isObject(t)){var n=t.level,i=t.score,a=t.fen,r=t.updateAt;!GameCore.Utils.Valid.isNumber(n)||n<0||!GameCore.Utils.Valid.isNumber(i)||i<0||GameCore.Utils.Valid.isString(a)&&(!GameCore.Utils.Valid.isNumber(r)||r<=0||null!=(e=this.fen)&&e.updateAt&&this.fen.updateAt>=r||(this.fen={level:n,score:i,fen:a,updateAt:r},this.isPlayerDataLoaded=!0))}}},e}(),lp=(0,ue.P1)([function(e){var t;return null==(t=e[fn])?void 0:t.mission}],(function(e){return e})),hp=(0,ue.P1)([function(e){var t;return null==(t=e[fn])?void 0:t.missions}],(function(e){return e})),dp=(0,ue.P1)([function(e){var t;return null==(t=e[fn])?void 0:t.isRequesting}],(function(e){return e})),pp=Hh.STATUS,fp=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n.timer=void 0,n.requireData=void 0,n.missionIds=void 0,n.startMission=function(e){var t=n.getRandomMissionId(e);return!!t&&(n.scene.stateStorage.dispatch({type:vn,payload:{name:t}}),Li.emit(Nd.EVENTS.MISSION_START,t),!0)},n.updateMission=function(e,t,i){n.isRunning()&&(Li.emit(Nd.EVENTS.MISSION_UPDATE,{id:e,type:t,value:i}),n.updateMissionBlock())},n.missionFailed=function(e){var t;null==(t=n.timer)||t.remove(),n.nextMission(e)},n.missionCompleted=function(e){var t;if(null==(t=n.timer)||t.stop(),n.isRunning()){var i=e.name,a=e.reward;if(GameCore.Utils.Valid.isString(i)&&GameCore.Utils.Valid.isNumber(a)){var r=n.getMissionBlock();n.updateMissionBlock(),n.scene.audio.playSound(Fi.Z.MISSION_COMPLETED),r.runRewardAnimation(a),Li.emit(ki.FINISH_GEM_BONUS.EVENTS.FINISH_GEM_BONUS,{type:"mission",value:1}),Li.emit(ki.REACH_SCORE.EVENTS.ADD_SCORE,{type:"score",value:a}),n.handleAddScoreTaskForBlitzMode(a),n.nextMission(i)}}},n.scene=t,n}(0,o.Z)(t,e);var n=t.prototype;return n.init=function(){this.setupData()&&(this.listenEvents(),this.setState(pp.READY))},n.setupData=function(){var e=this,t=this.scene.stateStorage.getState(),n=hp(t);return!!n&&(this.missionIds=[],this.requireData={},Q()(n).forEach((function(t){e.missionIds.push(t);var i=n[t].require;Q()(i).forEach((function(n){var i;e.requireData[n]?hi()(i=e.requireData[n]).call(i,t)>=0||e.requireData[n].push(t):e.requireData[n]=[t]}))})),!0)},n.listenEvents=function(){Li.off(Nd.EVENTS.MISSION_FAILED,this.missionFailed),Li.off(Nd.EVENTS.MISSION_COMPLETED,this.missionCompleted),Li.on(Nd.EVENTS.MISSION_FAILED,this.missionFailed),Li.on(Nd.EVENTS.MISSION_COMPLETED,this.missionCompleted)},n.start=function(){this.isReady()&&(this.isRunning()||(this.startMission()?(this.updateMissionBlock(),this.startCountdown(),this.setState(pp.RUNNING)):this.getMissionBlock().showRequesting(!0)))},n.stop=function(){this.isRunning()&&this.setState(pp.STOPPED)},n.getMissionBlock=function(){return this.scene.layoutManager.objects.header.topBar.missionBlock},n.startCountdown=function(){var e,t=this,n=Phaser.Math.RND.between(20,40);null==(e=this.timer)||e.stop();var i=0,a=this.getMissionBlock();this.timer=this.scene.tweens.addCounter({duration:1e3,repeat:n,onRepeat:function(){i++,n-i===2&&a.runTimeOutAnimation()},onComplete:function(){var e=t.scene.stateStorage.getState(),n=lp(e);Li.emit(Nd.EVENTS.MISSION_FAILED,null==n?void 0:n.name)}})},n.updateMissionBlock=function(){var e=this.scene.stateStorage.getState(),t=lp(e);t&&this.getMissionBlock().updateInfo(t)},n.getRandomMissionId=function(e){var t,n,i=this.scene.levelHandler.getConfigs(),a=i.colors,r=i.specials,s=Re()(t=Q()(r)).call(t,(function(e){return e})),o=O()(n=[]).call(n,a,s),c=Phaser.Math.RND.between(0,this.missionIds.length-1),u=Phaser.Math.RND.between(0,o.length-1),l=o[u];if(!l)return this.missionIds[c];var h=this.requireData[l]||[];return h.length<1?this.missionIds[c]:(e&&(h=Oe()(h).call(h,(function(t){return t!==e}))||[]),h.length<1?this.missionIds[c]:h[u])},n.nextMission=function(e){var t=this;this.scene.time.delayedCall(1200,(function(){var n=t.startMission(e);(t.startCountdown(),n)?t.updateMissionBlock():t.getMissionBlock().showRequesting(!0)}))},n.handleAddScoreTaskForBlitzMode=function(e){if(this.scene.isBlitzGameplay()){var t=ki.PLAY_BLITZ.EVENTS;Li.emit(t.PLAY_BLITZ,{type:"score",value:e})}},t}(ao),mp=fp,gp=n(344),vp=n.n(gp),yp=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n.delayModeTimer=void 0,n.checkApplyModeTimer=void 0,n.processGravityMode=function(e){var t,i;void 0===e&&(e=0);var a=n.scene,r=a.modeManager,s=a.animationManager;null==(t=n.delayModeTimer)||t.remove(),null==(i=n.checkApplyModeTimer)||i.remove(),s.isMoveTilesCompleted=!1,n.delayModeTimer=n.scene.time.addEvent({delay:e,callback:function(){var e;null==(e=n.checkApplyModeTimer)||e.remove(),r.applyMode(),n.checkApplyModeTimer=n.scene.time.addEvent({delay:50,repeat:40,callback:function(){s.isMoveTilesCompleted&&(n.checkApplyModeTimer.remove(),n.processAfterGravityMode())}})}})},n.applyMode=function(){var e=n.scene,t=e.levelHandler,i=e.animationManager,a=(e.gameplayMode,t.getConfigs().mode),r=i.moveDuration-50,s=a;switch(n.scene.isBlitzGameplay()&&(s=Yh.FALL_DOWN),n.scene.time.delayedCall(r-150,(function(){n.scene.audio.playSound(Fi.Z.GEM_DROP,{volume:.5})})),s){case Yh.NORMAL:break;case Yh.FALL_DOWN:n.tilesFallDown(0);break;case Yh.FLY_UP:n.tilesFlyUp(0);break;case Yh.PUSH_LEFT:n.tilesPushLeft(0);break;case Yh.PUSH_RIGHT:n.tilesPushRight(0);break;case Yh.FALL_DOWN_PUSH_LEFT:n.tilesFallDown(0),n.tilesPushLeft(r);break;case Yh.FLY_UP_PUSH_RIGHT:n.tilesFlyUp(0),n.tilesPushRight(r);break;case Yh.FALL_DOWN_PUSH_RIGHT:n.tilesFallDown(0),n.tilesPushRight(r);break;case Yh.FLY_UP_PUSH_LEFT:n.tilesFlyUp(0),n.tilesPushLeft(r);break;case Yh.PUT_COLUMNS_MIDDLE:n.tilesPutColumnsMiddle(0);break;case Yh.PUT_ROWS_MIDDLE:n.tilesPutRowsMiddle(0);break;case Yh.FALL_DOWN_PUT_COLUMNS_MIDDLE:n.tilesFallDown(0),n.tilesPutColumnsMiddle(r);break;case Yh.FLY_UP_PUT_COLUMNS_MIDDLE:n.tilesFlyUp(0),n.tilesPutColumnsMiddle(r)}},n.scene=t,n}(0,o.Z)(t,e);var n=t.prototype;return n.processAfterGravityMode=function(){var e=this.scene.tileManager;this.scene.isBlitzGameplay()&&e.spawnExtraTilesForBlitz(),this.scene.events.emit(gh.EVENTS.GRAVITY_ANIMATION_FINISHED),this.scene.tileManager.checkIfBlitzTimerOver()||(e.isSelectable=!0)},n.getTiles=function(){var e=this.scene.boardManager.boardMap,t=[];for(var n in e)for(var i in e[n]){var a=e[n][i];t.push(a)}return t},n.tilesFlyUp=function(e){var t=this;void 0===e&&(e=0);var n=this.scene,i=n.boardManager,a=n.animationManager,r=this.getTiles(),s=0;r.forEach((function(n){var r=n.row,o=n.column;if(!n.isCaptured()){var c=t.getEmptySpacesAbove(r,o);c<1||(s++,a.moveRows({tile:n,fromRow:r,toRow:r-c},e),i.tileSwap({fromRow:r,toRow:r-c,fromColumn:o,toColumn:o}))}})),0===s&&(a.isMoveTilesCompleted=!0)},n.tilesFallDown=function(e){var t=this;void 0===e&&(e=0);var n=this.scene,i=n.boardManager,a=n.animationManager,r=this.getTiles();vp()(r).call(r);var s=0;r.forEach((function(n){var r=n.row,o=n.column;if(!n.isCaptured()){var c=t.getEmptySpacesBlow(r,o);c<1||(s++,a.moveRows({tile:n,fromRow:r,toRow:r+c},e),i.tileSwap({fromRow:r,toRow:r+c,fromColumn:o,toColumn:o}))}})),0===s&&(a.isMoveTilesCompleted=!0)},n.tilesPushLeft=function(e){var t=this;void 0===e&&(e=0);var n=this.scene,i=n.boardManager,a=n.animationManager,r=this.getTiles(),s=0;r.forEach((function(n){var r=n.row,o=n.column;if(!n.isCaptured()){var c=t.getEmptySpacesLeft(r,o);c<1||(s++,a.moveColumns({tile:n,fromColumn:o,toColumn:o-c},e),i.tileSwap({fromRow:r,toRow:r,fromColumn:o,toColumn:o-c}))}})),0===s&&(a.isMoveTilesCompleted=!0)},n.tilesPushRight=function(e){var t=this;void 0===e&&(e=0);var n=this.scene,i=n.boardManager,a=n.animationManager,r=this.getTiles();vp()(r).call(r);var s=0;r.forEach((function(n){var r=n.row,o=n.column;if(!n.isCaptured()){var c=t.getEmptySpacesRight(r,o);c<1||(s++,a.moveColumns({tile:n,fromColumn:o,toColumn:o+c},e),i.tileSwap({fromRow:r,toRow:r,fromColumn:o,toColumn:o+c}))}})),0===s&&(a.isMoveTilesCompleted=!0)},n.tilesPutColumnsMiddle=function(e){var t=this;void 0===e&&(e=0);var n=this.scene,i=n.boardManager,a=n.animationManager,r=this.getTiles(),s=0;r.forEach((function(n){var r=n.row,o=n.column;if(!n.isCaptured()){var c=t.getEmptySpacesMiddleLeft(r,o);c<1||(s++,a.moveColumns({tile:n,fromColumn:o,toColumn:o-c},e),i.tileSwap({fromRow:r,toRow:r,fromColumn:o,toColumn:o-c}))}})),vp()(r).call(r),r.forEach((function(n){var r=n.row,o=n.column;if(!n.isCaptured()){var c=t.getEmptySpacesMiddleRight(r,o);c<1||(s++,a.moveColumns({tile:n,fromColumn:o,toColumn:o+c},e),i.tileSwap({fromRow:r,toRow:r,fromColumn:o,toColumn:o+c}))}})),0===s&&(a.isMoveTilesCompleted=!0)},n.tilesPutRowsMiddle=function(e){var t=this;void 0===e&&(e=0);var n=this.scene,i=n.boardManager,a=n.animationManager,r=this.getTiles(),s=0;r.forEach((function(n){var r=n.row,o=n.column;if(!n.isCaptured()){var c=t.getEmptySpacesMiddleAbove(r,o);c<1||(s++,a.moveRows({tile:n,fromRow:r,toRow:r-c},e),i.tileSwap({fromRow:r,toRow:r-c,fromColumn:o,toColumn:o}))}})),vp()(r).call(r),r.forEach((function(n){var r=n.row,o=n.column;if(!n.isCaptured()){var c=t.getEmptySpacesMiddleBelow(r,o);c<1||(s++,a.moveRows({tile:n,fromRow:r,toRow:r+c},e),i.tileSwap({fromRow:r,toRow:r+c,fromColumn:o,toColumn:o}))}})),0===s&&(a.isMoveTilesCompleted=!0)},n.getEmptySpacesAbove=function(e,t,n){if(void 0===n&&(n=0),this.isEmptySpaceAbove(e,t)){n++;var i=e-1;return this.getEmptySpacesAbove(i,t,n)}return n},n.getEmptySpacesBlow=function(e,t,n){if(void 0===n&&(n=0),this.isEmptySpaceBlow(e,t)){n++;var i=e+1;return this.getEmptySpacesBlow(i,t,n)}return n},n.getEmptySpacesLeft=function(e,t,n){if(void 0===n&&(n=0),this.isEmptySpaceLeft(e,t)){n++;var i=t-1;return this.getEmptySpacesLeft(e,i,n)}return n},n.getEmptySpacesRight=function(e,t,n){if(void 0===n&&(n=0),this.isEmptySpaceRight(e,t)){n++;var i=t+1;return this.getEmptySpacesRight(e,i,n)}return n},n.getEmptySpacesMiddleLeft=function(e,t,n){if(void 0===n&&(n=0),this.isEmptySpaceMiddleLeft(e,t)){n++;var i=t-1;return this.getEmptySpacesMiddleLeft(e,i,n)}return n},n.getEmptySpacesMiddleRight=function(e,t,n){if(void 0===n&&(n=0),this.isEmptySpaceMiddleRight(e,t)){n++;var i=t+1;return this.getEmptySpacesMiddleRight(e,i,n)}return n},n.getEmptySpacesMiddleAbove=function(e,t,n){if(void 0===n&&(n=0),this.isEmptySpaceMiddleAbove(e,t)){n++;var i=e-1;return this.getEmptySpacesMiddleAbove(i,t,n)}return n},n.getEmptySpacesMiddleBelow=function(e,t,n){if(void 0===n&&(n=0),this.isEmptySpaceMiddleBelow(e,t)){n++;var i=e+1;return this.getEmptySpacesMiddleBelow(i,t,n)}return n},n.isEmptySpaceAbove=function(e,t){var n=e-1,i=this.scene.boardManager.boardMap;return!!i[n]&&(!!i[n][t]&&i[n][t].isCaptured())},n.isEmptySpaceBlow=function(e,t){var n=e+1,i=this.scene.boardManager.boardMap;return!!i[n]&&(!!i[n][t]&&i[n][t].isCaptured())},n.isEmptySpaceLeft=function(e,t){var n=t-1,i=this.scene.boardManager.boardMap;return!!i[e]&&(!!i[e][n]&&i[e][n].isCaptured())},n.isEmptySpaceRight=function(e,t){var n=t+1,i=this.scene.boardManager.boardMap;return!!i[e]&&(!!i[e][n]&&i[e][n].isCaptured())},n.isEmptySpaceMiddleLeft=function(e,t){var n=t-1;if(n<this.scene.levelHandler.getConfigs().columns/2)return!1;var i=this.scene.boardManager.boardMap;return!!i[e]&&(!!i[e][n]&&i[e][n].isCaptured())},n.isEmptySpaceMiddleRight=function(e,t){var n=t+1;if(n>this.scene.levelHandler.getConfigs().columns/2)return!1;var i=this.scene.boardManager.boardMap;return!!i[e]&&(!!i[e][n]&&i[e][n].isCaptured())},n.isEmptySpaceMiddleAbove=function(e,t){var n=e-1;if(n<this.scene.levelHandler.getConfigs().rows/2)return!1;var i=this.scene.boardManager.boardMap;return!!i[n]&&(!!i[n][t]&&i[n][t].isCaptured())},n.isEmptySpaceMiddleBelow=function(e,t){var n=e+1;if(n>this.scene.levelHandler.getConfigs().rows/2)return!1;var i=this.scene.boardManager.boardMap;return!!i[n]&&(!!i[n][t]&&i[n][t].isCaptured())},t}(ao),Ep=Ui.Z.GAMEPLAY.FRAME,Ap=gh.COLORS,Sp=function(e){function t(t,n,i){var a;return(a=e.call(this,t,Ep.TILE_BLUE,Ap.BLUE)||this).getExplosiveAnimationKey=function(){return Tu.BLUE_EXPLOSIVE.KEY},a.setName("BlueTile"),a.setRow(n),a.setColumn(i),a}return(0,o.Z)(t,e),t}(Ch),Tp=Ui.Z.GAMEPLAY,bp=Tp.KEY,Ip=Tp.FRAME,wp=gh.COLORS,Cp=gh.SPECIALS,xp=function(e){function t(t,n,i){var a;(a=e.call(this,t,Ip.TILE_COLOR_CHANGE,Cp.COLOR_CHANGE)||this).effect=void 0,a.background=void 0,a.getExplosiveAnimationKey=function(){switch(a.color){case wp.RED:return Tu.RED_EXPLOSIVE.KEY;case wp.BLUE:return Tu.BLUE_EXPLOSIVE.KEY;case wp.PINK:return Tu.PINK_EXPLOSIVE.KEY;case wp.GREEN:return Tu.GREEN_EXPLOSIVE.KEY;case wp.YELLOW:return Tu.YELLOW_EXPLOSIVE.KEY;default:return Tu.BLUE_EXPLOSIVE.KEY}},a.handleStartExplosive=function(){var e,t;null==(e=a.effect)||e.setVisible(!1),null==(t=a.background)||t.setVisible(!1)},a.setName("ColorChangeTile"),a.setRow(n),a.setColumn(i),a.createEffect();var r=a.randomColor();return a.setColor(r),a.block.off(Phaser.Animations.Events.ANIMATION_START,a.handleStartExplosive),a.block.on(Phaser.Animations.Events.ANIMATION_START,a.handleStartExplosive),a}(0,o.Z)(t,e);var n=t.prototype;return n.enableTile=function(){e.prototype.enableTile.call(this),this.block.setVisible(!0),this.effect.setVisible(!0),this.background.setVisible(!0)},n.createEffect=function(){this.effect=this.scene.make.sprite({key:bp,frame:Ip.TILE_COLOR_CHANGE}),this.effect.anims.playReverse(Tu.COLOR_CHANGE.KEY),this.effect.setWorldSize(37,37),this.effect.setRotation(1),this.scene.add.tween({repeat:-1,ease:Phaser.Math.Easing.Cubic.InOut,targets:[this.effect],duration:15e3,props:{angle:{from:0,to:360}}}),this.add(this.effect)},n.randomColor=function(){var e=this.scene.levelHandler.getConfigs().colors;return e[Phaser.Math.RND.between(0,e.length-1)]},n.setColor=function(e){this.isCaptured()||(this.background&&this.remove(this.background,!0),this.color=e,this.background=this.scene.add.image(0,0,bp,gh.FRAME[e]),this.block.setAlpha(.75),this.background.setVisible(!0),this.background.setWorldSize(36,36),this.effect.setVisible(!0),this.add(this.background),this.moveTo(this.background,0),this.moveTo(this.block,1),this.moveTo(this.effect,2))},t}(Ch),Op=Ui.Z.GAMEPLAY,_p=Op.KEY,Rp=Op.FRAME,Pp=gh.SPECIALS,kp=function(e){function t(t,n,i){var a;return(a=e.call(this,t,Rp.TILE_COLORFUL,Pp.COLORFUL)||this).effect=void 0,a.getExplosiveAnimationKey=function(){return Tu.COLORFUL_EXPLOSIVE.KEY},a.handleStartExplosive=function(){var e,t=a.scene.boardManager.boardContainer,n=t.count("visible",!0);t.moveTo((0,Gi.Z)(a),n-1),null==(e=a.effect)||e.setVisible(!1)},a.setName("ColorfulTile"),a.setRow(n),a.setColumn(i),a.createEffect(),a.block.once(Phaser.Animations.Events.ANIMATION_START,a.handleStartExplosive),a}(0,o.Z)(t,e);var n=t.prototype;return n.createEffect=function(){this.effect=this.scene.make.sprite({key:_p,frame:Rp.TILE_COLORFUL}),this.effect.setWorldSize(gh.SIZE,gh.SIZE),this.effect.anims.play(Tu.COLORFUL.KEY),this.add(this.effect)},n.removeTile=function(){var t;e.prototype.removeTile.call(this),null==(t=this.effect)||t.setVisible(!0)},n.sendUseColorfulEvent=function(){var e=ki.USE_COLORFUL.EVENTS;Li.emit(e.USE_COLORFUL,{type:"colorful",value:1})},t}(Ch),Mp=kp,Dp=function(e){function t(t,n,i){var a;return(a=e.call(this,t,void 0,"?")||this).setName("EmptyTile"),a.setRow(n),a.setColumn(i),a.setState(gh.STATUS.CAPTURED),a}return(0,o.Z)(t,e),t.prototype.enableTile=function(){},t}(Ch),Np=Ui.Z.GAMEPLAY.FRAME,Lp=gh.COLORS,Bp=function(e){function t(t,n,i){var a;return(a=e.call(this,t,Np.TILE_GREEN,Lp.GREEN)||this).getExplosiveAnimationKey=function(){return Tu.GREEN_EXPLOSIVE.KEY},a.setName("GreenTile"),a.setRow(n),a.setColumn(i),a}return(0,o.Z)(t,e),t}(Ch),Gp=Ui.Z.GAMEPLAY.FRAME,Up=gh.COLORS,Fp=function(e){function t(t,n,i){var a;return(a=e.call(this,t,Gp.TILE_PINK,Up.PINK)||this).getExplosiveAnimationKey=function(){return Tu.PINK_EXPLOSIVE.KEY},a.setName("PinkTile"),a.setRow(n),a.setColumn(i),a}return(0,o.Z)(t,e),t}(Ch),Zp=Ui.Z.GAMEPLAY.FRAME,Hp=gh.COLORS,Yp=function(e){function t(t,n,i){var a;return(a=e.call(this,t,Zp.TILE_RED,Hp.RED)||this).getExplosiveAnimationKey=function(){return Tu.RED_EXPLOSIVE.KEY},a.setName("RedTile"),a.setRow(n),a.setColumn(i),a}return(0,o.Z)(t,e),t}(Ch),zp=Ui.Z.GAMEPLAY.FRAME,Vp=gh.COLORS,Wp=function(e){function t(t,n,i){var a;return(a=e.call(this,t,zp.TILE_YELLOW,Vp.YELLOW)||this).getExplosiveAnimationKey=function(){return Tu.YELLOW_EXPLOSIVE.KEY},a.setName("YellowTile"),a.setRow(n),a.setColumn(i),a}return(0,o.Z)(t,e),t}(Ch),Kp={NOT_ENOUGH_SCORE:"YOU DID NOT REACH THE TARGET SCORE",BLITZ_OUT_OF_TIME:"SORRY. TIME IS UP!"};function jp(e,t){var n="undefined"!==typeof I()&&C()(e)||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){var n;if(!e)return;if("string"===typeof e)return Xp(e,t);var i=A()(n=Object.prototype.toString.call(e)).call(n,8,-1);"Object"===i&&e.constructor&&(i=e.constructor.name);if("Map"===i||"Set"===i)return T()(e);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return Xp(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var i=0;return function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Xp(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var qp=Hh.STATUS,Jp=gh.COLORS,Qp=Jp.RED,$p=Jp.BLUE,ef=Jp.PINK,tf=Jp.GREEN,nf=Jp.YELLOW,af=gh.SPECIALS,rf=af.FREEZE,sf=af.COLORFUL,of=af.COLOR_CHANGE,cf=GameCore.Configs.Gameplay,uf=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n.isSelectable=!1,n.isUseableItem=!1,n.isFirstInteraction=!0,n.isCapturingAnimationRunning=!1,n.isBlitzTimerOver=!1,n.firstTilePosition=void 0,n.isEndBoard=!1,n.tilesHighlight=[],n.suggestionsDelay=5e3,n.suggestionsTimer=void 0,n.freezeCheckTimer=void 0,n.delayEnableItemTimer=void 0,n.tilesGroup=void 0,n.scoreTextGroup=void 0,n.addEventsTile=function(e){e.block&&(e.block.setInteractive({useHandCursor:!0}),e.block.off(Phaser.Input.Events.GAMEOBJECT_POINTER_DOWN),e.block.on(Phaser.Input.Events.GAMEOBJECT_POINTER_DOWN,n.tileSelect(e)),e.createInput())},n.tileSelect=function(e){return function(){var t=n.scene,i=t.itemManager,a=t.missionsManager;if(n.isSelectable){if(n.removeSuggestionsTiles(),n.emitInteraction(),""!==i.itemActive)if(i.applyItem(e))return;var r=[],s=e.color,o=-1;switch(s){case sf:o=10,r=n.getTilesAround(e,1,1);break;case rf:break;default:r=n.captureTilesSameColor(e)}if(r.length<1)return n.scene.audio.playSound(Fi.Z.MOVE_WRONG),void n.suggestionsEatableTiles();n.sendUseColorfulGemEvent(s),n.tilesCapturing(r,!0,o,200),a.updateMission(Nd.TYPES.COMBO,s,r.length),a.updateMission(Nd.TYPES.COLLECT_GEMS,s,r.length)}}},n.updateAfterMoved=function(e){var t;if(n.scene&&!(e[0]instanceof Rh)){var i=null==(t=e[0])?void 0:t.color;n.updateColorChangeTiles(i)}},n.scene=t,n.createGroup(),n}(0,o.Z)(t,e);var n=t.prototype;return n.init=function(){this.isSelectable=!1,this.isUseableItem=!1,this.isCapturingAnimationRunning=!1,this.isBlitzTimerOver=!1,this.isFirstInteraction=!0,this.firstTilePosition=new Phaser.Math.Vector2(0,0),this.hideTexts(),this.removeSuggestionsTiles(),this.clearTiles(),this.setState(qp.READY)},n.start=function(){this.isRunning()||(this.isSelectable=!1,this.isUseableItem=!1,this.isFirstInteraction=!0,this.showUpTilesAnimation(),this.setState(qp.RUNNING))},n.stop=function(){this.isRunning()&&(this.isSelectable=!1,this.isUseableItem=!1,this.hideTexts(),this.removeSuggestionsTiles(),this.setState(qp.STOPPED))},n.createGroup=function(){this.scoreTextGroup=this.scene.add.group(),this.tilesGroup=this.scene.make.group({active:!1,runChildUpdate:!1})},n.hideTexts=function(){this.scoreTextGroup.setVisible(!1);var e=this.scoreTextGroup.getChildren();this.scene.tweens.killTweensOf(e)},n.getTiles=function(){var e;return this.scene&&null!=(e=this.tilesGroup)&&e.scene?this.tilesGroup.getMatching("visible",!0):[]},n.getLocalFirstTilePosition=function(){var e=this.scene.boardManager.boardMap;if(e&&e[1]&&e[1][1]){var t=e[1][1],n=t.x,i=t.y;this.firstTilePosition=new Phaser.Math.Vector2(n,i)}},n.clearTiles=function(){var e=this,t=this.scene.boardManager;this.tilesGroup&&this.tilesGroup.children.each((function(n){n.setVisible(!1),e.tilesGroup.killAndHide(n),t.boardContainer.remove(n)}))},n.getTileExits=function(e){var t=this.tilesGroup.getMatching("tileType",e);return t.length<1?null:R()(t).call(t,(function(e){return!1===e.visible}))||null},n.createTileByType=function(e,t,n){var i=this.getTileExits(e);if(i)return i.enableTile(),i.setRow(t),i.setColumn(n),i;switch(e){case Qp:return new Yp(this.scene,t,n);case ef:return new Fp(this.scene,t,n);case $p:return new Sp(this.scene,t,n);case tf:return new Bp(this.scene,t,n);case nf:return new Wp(this.scene,t,n);case rf:return new Rh(this.scene,t,n);case sf:return new Mp(this.scene,t,n);case of:return new xp(this.scene,t,n);default:return new Dp(this.scene,t,n)}},n.addTile=function(e){this.tilesGroup.add(e),this.addEventsTile(e)},n.tileCapture=function(e){e.setState(gh.STATUS.CAPTURED)},n.removeTileFromBoard=function(e){if(e){var t=this.scene.boardManager,n=t.boardContainer,i=t.tileMap,a=e.row,r=e.column;i[a]&&i[a][r]&&(i[a][r]="?"),e.setVisible(!1),n.remove(e),this.tilesGroup.killAndHide(e)}},n.removeTileFromTileMap=function(e){var t=this.scene.boardManager.tileMap,n=e.row,i=e.column;t[n]&&t[n][i]&&(t[n][i]="?")},n.showUpTilesAnimation=function(){var e,t=this,n=O()(e=[]).call(e,this.getTiles());this.scene.animationManager.startBoard(n).once(Phaser.Tweens.Events.TWEEN_COMPLETE,(function(){t.scene.tweens.killTweensOf(n),n.forEach((function(e){e.setAlpha(1)})),t.suggestionsEatableTiles(),t.isSelectable=!0,t.isUseableItem=!0,t.getLocalFirstTilePosition(),t.scene.events.emit(Cd)}))},n.isCanMove=function(){if(!this.isRunning())return!1;var e=!0;if(this.tilesGroup.countActive()<1)return!1;for(var t,n=jp(this.getTiles());!(t=n()).done;){var i=t.value;if(!i.isCaptured())if(this.getTilesSameColor(i).length>1){e=!1;break}}return!e},n.processNextLevel=function(){for(var e,t=this,n=this.getTiles(),i=[],a=jp(n);!(e=a()).done;){var r=e.value;r.isCaptured()||i.push(r)}this.isEndBoard=!0,this.isSelectable=!1,this.isUseableItem=!1,this.scene.events.emit(Ld.LEVEL_END),this.scene.time.addEvent({delay:800,callback:function(){if(i.length<=0)return t.scene.runBonusScoreAnimation(2e3),Li.emit(ki.REACH_SCORE.EVENTS.ADD_SCORE,{type:"score",value:2e3}),void t.scene.time.addEvent({delay:1400,callback:function(){t.isEndBoard=!1,t.scene.levelUp()}});var e=t.scene.animationManager.endBoard(i);i.length<10&&i.length>0&&Li.emit(ki.REACH_SCORE.EVENTS.ADD_SCORE,{type:"score",value:2e3-200*i.length}),e.once(Phaser.Tweens.Events.TWEEN_COMPLETE,(function(){i.forEach((function(e){t.tileCapture(e),t.removeTileFromBoard(e)})),t.scene.time.addEvent({delay:600,callback:function(){t.isEndBoard=!1,t.scene.levelUp()}})}))}})},n.getTilesCanCapture=function(){for(var e,t=this.scene.levelHandler.getConfigs().eatableSize,n=[],i=jp(this.getTiles());!(e=i()).done;){var a=e.value;if(!a.isCaptured()){var r=this.getTilesSameColor(a);r.length<t||n.push(r)}}return n},n.getBoundOfTiles=function(e){var t=this.scene.gameZone,n=t.displayWidth,i=t.displayHeight,a=n,r=i,s=10,o=1,c=10,u=1,l=gh.SIZE,h=gh.SIZE;e.forEach((function(e){var t=e.x,n=e.y,i=e.row,l=e.column;t<a&&(a=t),n<r&&(r=n),i<s&&(s=i),i>o&&(o=i),l<c&&(c=l),l>u&&(u=l)})),l*=u-c+1,h*=o-s+1;l+=2,h+=2,a=(c-1)*gh.SIZE+2;var d=this.scene.levelHandler.getConfigs().rows,p=this.scene.ads.getBannerHeight()+18;return{x:a,y:r=i-p-(d-s+1)*gh.SIZE,width:l,height:h}},n.suggestionsEatableTiles=function(){var e,t=this;null==(e=this.suggestionsTimer)||e.remove(),this.removeSuggestionsTiles();var n=this.scene.levelHandler.getConfigs().eatableSize;this.suggestionsTimer=this.scene.time.addEvent({delay:this.suggestionsDelay,callback:function(){if(t.isRunning()){t.removeSuggestionsTiles();var e=t.getTilesCanCapture();if(!(e.length<1)){var i=Phaser.Math.RND.between(0,e.length-1);t.tilesHighlight=e[i],t.tilesHighlight.length<n||t.showHighlightTiles(t.tilesHighlight)}}}})},n.removeSuggestionsTiles=function(){this.tilesHighlight.length<1||(this.hideHighlightTiles(this.tilesHighlight),this.tilesHighlight=[])},n.showHighlightTiles=function(e){e.forEach((function(e){e.showHighlight()}))},n.hideHighlightTiles=function(e){e.forEach((function(e){e.hideHighlight()}))},n.emitInteraction=function(){if(this.isFirstInteraction)return this.scene.events.emit(gh.EVENTS.FIRST_INTERACTION),void(this.isFirstInteraction=!1)},n.captureTilesSameColor=function(e){var t=this.scene.levelHandler,n=this.getTilesSameColor(e),i=t.getConfigs().eatableSize;return n.length<i?[]:n},n.getTilesSameColor=function(e){var t=[],n=e.color,i=e.row,a=e.column;return this.findTilesSameColor(i,a,n,t),t},n.findTilesSameColor=function(e,t,n,i){var a=this.scene,r=a.boardManager,s=a.levelHandler.getConfigs(),o=s.rows,c=s.columns;if(!(e<1||t<1)&&!(e>o||t>c)){var u=r.boardMap[e][t];u.isCaptured()||this.isSameColor(n,u)&&(hi()(i).call(i,u)>=0||(i.push(u),this.findTilesSameColor(e-1,t,n,i),this.findTilesSameColor(e,t+1,n,i),this.findTilesSameColor(e+1,t,n,i),this.findTilesSameColor(e,t-1,n,i)))}},n.isSameColor=function(e,t){return e===t.color&&!(t instanceof Rh)||t instanceof Mp},n.getTilesAround=function(e,t,n){var i=[],a=e.row,r=e.column,s=a+t,o=r+n,c=a-t,u=r-n;return this.findTilesAround({row:a,column:r,maxRow:s,maxColumn:o,minRow:c,minColumn:u},i),i},n.findTilesAround=function(e,t){var n=this.scene.boardManager.boardMap,i=e.row,a=e.column,s=e.maxRow,o=e.maxColumn,c=e.minRow,u=e.minColumn;if(n[i]&&n[i][a]&&!(i<c||a<u)&&!(i>s||a>o)){var l=n[i][a];l.isCaptured()||hi()(t).call(t,l)>=0||(t.push(l),this.findTilesAround((0,r.Z)({},e,{row:i-1}),t),this.findTilesAround((0,r.Z)({},e,{column:a+1}),t),this.findTilesAround((0,r.Z)({},e,{row:i+1}),t),this.findTilesAround((0,r.Z)({},e,{column:a-1}),t))}},n.tilesChangeColor=function(e,t){var n=this,i=this.scene.boardManager;t.forEach((function(t){var a=t.row,r=t.column,s=t.x,o=t.y,c=n.createTileByType(e,a,r);i.setTileToMap(c,a,r),c.setX(s),c.setY(o),n.removeTileFromBoard(t)}))},n.spawnExtraTilesForBlitz=function(){var e=this.scene,t=e.boardManager,n=e.levelHandler,i=t.boardMap,a=t.boardContainer,r=n.getConfigs().colors,s=this.findFreeSpacesInBoard();if(0!==s.length)for(var o=0;o<s.length;o++){var c=s[s.length-1-o],u=c.row,l=c.column,h=r[Phaser.Math.RND.between(0,r.length-1)],d=this.createTileByType(h,u,l);this.addTile(d),i[u][l]=d;var p=this.firstTilePosition,f=p.x,m=p.y;d.setAlpha(0),a.add(d);var g=new Phaser.Math.Vector2(f+37*(l-1),m+37*(u-1));d.setPosition(g.x,g.y-100),d.runBlitzSpawnAnimation(g,50*o)}},n.findFreeSpacesInBoard=function(){for(var e=this.scene.boardManager.boardMap,t=[],n=Q()(e).length,i=Q()(e[1]).length,a=1;a<=n;a++)for(var r=1;r<=i;r++){e[a][r].isCaptured()&&t.push({row:a,column:r})}return t},n.updateColorChangeTiles=function(e){var t=this.scene.levelHandler.getConfigs(),n=t.colors,i=t.specials,a=e;if(i[e]){var r=Phaser.Math.RND.between(0,n.length-1);a=n[r]}this.getTiles().forEach((function(e){e instanceof xp&&e.setColor(a)}))},n.updateFreezeTiles=function(e){var t,n=this;void 0===e&&(e=!1);var i=this.scene,a=i.levelHandler,r=i.animationManager,s=a.getConfigs().rows;null==(t=this.freezeCheckTimer)||t.remove(),this.freezeCheckTimer=this.scene.time.addEvent({delay:r.moveDuration,callback:function(){if(n.isRunning()){var t=n.getTiles(),i=[];t.forEach((function(e){e instanceof Rh&&(e.isCaptured()||e.row<s&&e.row>1||i.push(e))})),i.length<1?e&&!n.isEndBoard&&n.processNextLevel():(e&&(n.isSelectable=!0),n.tilesCapturing(i,!1,100),n.isSelectable=!1)}}})},n.tilesCapturing=function(e,t,n,i,a){var r,s=this;if(void 0===t&&(t=!0),void 0===n&&(n=-1),void 0===i&&(i=0),void 0===a&&(a=!1),this.isSelectable||a){this.isCapturingAnimationRunning=!0,this.isSelectable=!1,this.isUseableItem=!1;var o=this.scene,c=o.modeManager,u=o.animationManager,l=o.levelHandler;this.scene.isBlitzGameplay()&&this.scene.events.emit(gh.EVENTS.ADD_TIME,e.length*cf.BlitzBonusTimePerGem),null==(r=this.delayEnableItemTimer)||r.remove();var h=l.getConfigs().scorePerItem,d=e.length,p=h*d;n>-1&&(p=n),this.sendDailyTaskEventsOnCapture(e),e.forEach((function(e){s.tileCapture(e),e.setEatScore(p),s.removeTileFromTileMap(e),s.scene.addPendingEatGemScore(p),s.scene.addPendingDailyMissionScore(p)}));var f=u.capturing(e,300,t);c.processGravityMode(100*e.length-1+i),f.callback=function(){s.updateAfterMoved(e),s.isCanMove()?s.checkIfBlitzTimerOver()||(s.updateFreezeTiles(),s.suggestionsEatableTiles(),s.isSelectable=!0,s.delayEnableItemTimer=s.scene.time.addEvent({delay:300,callback:function(){s.isUseableItem=!0,s.scene.events.emit(wd)}})):s.updateFreezeTiles(!0)},this.scene.time.addEvent({delay:1e3,callback:function(){s.showEncouragingText(d)}}),this.scene.time.addEvent({delay:100*e.length-1+i,callback:function(){if(e.length>1){s.isCapturingAnimationRunning=!1,s.handlePostCaptureAnimation();var t=e[0];if(!t)return;var n=p*d,i=t.x,a=t.y;s.scene.runTotalScoreAnimation(n,i,a)}}})}},n.showEncouragingText=function(e){e<=4||(e<=6?this.scene.runEncouragingAnimation(pu.COOL):e<=8?this.scene.runEncouragingAnimation(pu.GOOD):e<=9?this.scene.runEncouragingAnimation(pu.GREAT):e>9&&this.scene.runEncouragingAnimation(pu.TEXT_EXCELLENT))},n.handlePostCaptureAnimation=function(){if(!this.isCapturingAnimationRunning&&this.scene.isBlitzGameplay()&&this.isBlitzTimerOver){var e=this.scene.levelHandler.level;this.scene.die(e,Kp.BLITZ_OUT_OF_TIME)}},n.handleBlitzTimerOver=function(){this.isBlitzTimerOver=!0,this.handlePostCaptureAnimation()},n.checkIfBlitzTimerOver=function(){return this.isBlitzTimerOver&&this.scene.isBlitzGameplay()},n.sendUseColorfulGemEvent=function(e){if(e===sf){var t=ki.USE_COLORFUL.EVENTS.USE_COLORFUL;Li.emit(t,{type:"gems",value:1})}},n.sendDailyTaskEventsOnCapture=function(e){var t=0,n=0,i=0,a=0,r=0,s=0,o=0,c=ki.EAT_GEMS_BLUE.EVENTS.EAT_GEMS_BLUE,u=ki.EAT_GEMS_GREEN.EVENTS.EAT_GEMS_GREEN,l=ki.EAT_GEMS_PINK.EVENTS.EAT_GEMS_PINK,h=ki.EAT_GEMS_RED.EVENTS.EAT_GEMS_RED,d=ki.EAT_GEMS_YELLOW.EVENTS.EAT_GEMS_YELLOW,p=ki.DESTROY_ICE.EVENTS.DESTROY_ICE,f=ki.EAT_COLOR_CHANGE.EVENTS.EAT_COLOR_CHANGE,m=ki.EAT_BIG_GEM_COMBO.EVENTS.EAT_BIG_GEM_COMBO;e.forEach((function(e){if(e instanceof xp)o++;else switch(e.color){case Qp:t++;break;case $p:n++;break;case ef:i++;break;case tf:a++;break;case nf:r++;break;case rf:s++}}));var g=t+n+i+a+r+o;t>0&&Li.emit(h,{type:"gems",value:t}),n>0&&Li.emit(c,{type:"gems",value:n}),i>0&&Li.emit(l,{type:"gems",value:i}),a>0&&Li.emit(u,{type:"gems",value:a}),r>0&&Li.emit(d,{type:"gems",value:r}),s>0&&Li.emit(p,{type:"ice",value:s}),o>0&&Li.emit(f,{type:"gems",value:o}),g>0&&Li.emit(m,{type:"gemCombo",value:g})},t}(ao),lf=uf,hf=Ui.Z.TUTORIAL,df=hf.KEY,pf=hf.FRAME,ff=function(e){function t(t){var n;return(n=e.call(this,t)||this).theCat=void 0,n.popover=void 0,n.description=void 0,n.name="PopoverTutorial",n.createAvatarCat(),n.createPopover(),n.createDescription(),n.scene.add.existing((0,Gi.Z)(n)),n}(0,o.Z)(t,e);var n=t.prototype;return n.createAvatarCat=function(){this.theCat=this.scene.make.image({key:df,frame:pf.AVATAR_CAT,origin:{x:.95,y:0}}),this.theCat.setWorldSize(126,126.5),this.add(this.theCat)},n.createPopover=function(){this.popover=this.scene.make.image({key:df,frame:pf.POPUP_TALK,origin:{x:0,y:0}}),this.popover.setWorldSize(219.5,124),this.add(this.popover)},n.createDescription=function(){this.description=this.scene.make.bitmapText({font:Sa.Z.PRIMARY.KEY,size:this.scene.fontSize(20)}),this.description.setTint(11632977),this.description.setCenterAlign(),this.add(this.description)},n.updateData=function(e,t){this.theCat.setVisible(!0),this.popover.setVisible(!0),this.description.setText(t),this.description.setVisible(!0),this.description.setMaxWidth(e),Phaser.Display.Align.In.Center(this.description,this.popover,15,-5)},n.playAnimation=function(e){var t;void 0===e&&(e=0),this.setAlpha(0),null==(t=this.scene)||t.tweens.add({delay:e,targets:this,duration:200,ease:Phaser.Math.Easing.Cubic.Out,alpha:1})},n.stopAnimation=function(){this.scene.tweens.killTweensOf(this)},n.preDestroy=function(){this.scene.tweens.killTweensOf(this)},t}(Phaser.GameObjects.Container),mf=function(){function e(e){var t=this;this.manager=void 0,this.startGuideFirstFeature=function(){var e=t.manager.scene,n=e.boardManager,i=e.tileManager;i.isSelectable=!1,i.isUseableItem=!1;var a=n.getTileByIndex(14),r=n.getTileByIndex(36);t.createHighlightTiles([a,r]),t.createDescription([a,r],{text:t.manager.scene.lang.Text.TUTORIAL_COLORFUL_GEM,popoverWidth:160});var s=n.getTileByIndex(25);t.createHandAtTile(s),s.block.once(Phaser.Input.Events.GAMEOBJECT_POINTER_DOWN,t.handleUseGem(s))},this.handleUseGem=function(e){return function(){t.manager.hand.kill(),t.manager.popover.kill(),t.manager.background.kill();var n=t.manager.scene.tileManager;n.isSelectable=!0,n.tileSelect(e)()}},this.closeTutorial=function(){t.manager.stopTutorial()},this.manager=e}var t=e.prototype;return t.setup=function(){this.loadCustomBoard(),this.manager.scene.events.once(Cd,this.startGuideFirstFeature)},t.loadCustomBoard=function(){this.manager.scene.boardManager.loadBoardByFen(":P2GRYPBRPR:2P2G2YPGBG:BGYBRC2PYB:YRYBGBGP2Y:P2YP3YRBG:YBG2RPGPRP:3GBRBRCRP:3RPG2BGYR:PBY2P3RPY:RPYG2YBGBP")},t.createHandAtTile=function(e){var t=e.getWorldTransformMatrix().decomposeMatrix(),n=t.translateX,i=t.translateY,a=n+gh.SIZE/2,r=i+gh.SIZE/2;this.manager.hand.setPosition(a,r),this.manager.hand.revive(),this.manager.hand.stopAnimation(),this.manager.hand.playAnimation(300)},t.createHighlightTiles=function(e){var t=this.manager.scene.tileManager.getBoundOfTiles(e),n=t.x,i=t.y,a=t.width,r=t.height;this.manager.createMask(n,i,a,r)},t.createDescription=function(e,t){var n=this.manager.scene.tileManager,i=t.text,a=t.popoverWidth;this.manager.popover.updateData(a,i);var r=n.getBoundOfTiles(e),s=r.y,o=r.height;this.manager.popover.setY(s-80-o),this.manager.popover.revive(),this.manager.popover.stopAnimation(),this.manager.popover.playAnimation(300)},e}(),gf=mf,vf=function(){function e(e){var t=this;this.manager=void 0,this.handleOnCloseTutorial=function(){t.manager.stopTutorial();var e=t.manager.scene.tileManager;e.isSelectable=!0,e.isUseableItem=!0,t.manager.startTutorial(vd).then((function(e){e||t.manager.stopTutorial()}))},this.manager=e}var t=e.prototype;return t.setup=function(){var e=this.manager.scene.tileManager;e.isSelectable=!1,e.isUseableItem=!1,this.createHighlight(),this.createDescription(),this.manager.background.once(Phaser.Input.Events.GAMEOBJECT_POINTER_DOWN,this.handleOnCloseTutorial)},t.createHighlight=function(){this.manager.createMask(146,-3,85,85,40)},t.createDescription=function(){var e=this.manager.scene,t=this.manager.scene.lang.Text.GUIDE_2_SCORE;this.manager.popover.updateData(140,t);var n=e.layoutManager.objects.header.topBar.currentScoreBar.getWorldPosition().y;this.manager.popover.setY(n+60),this.manager.popover.setActive(!0),this.manager.popover.setVisible(!0),this.manager.popover.stopAnimation(),this.manager.popover.playAnimation(300)},e}(),yf=vf,Ef=function(){function e(e){var t=this;this.manager=void 0,this.tiles=void 0,this.updateUI=function(){t.createHighlightTiles(!1),t.createHandAtCenterTitles(),t.alignDescription()},this.handleOnTileClicked=function(e){var n=t.manager,i=n.scene.tileManager;i.isSelectable=!0,i.tileSelect(e)(),n.hand.kill(),n.popover.kill(),n.stopTutorial(),t.manager.scene.world.events.off(Nt.Z.RESIZE,t.updateUI)},this.manager=e}var t=e.prototype;return t.setup=function(){var e,t=this,n=this.manager.scene,i=n.tileManager,a=n.levelHandler,r=i.getTilesCanCapture();if(r.length<1)this.manager.stop();else{var s=on()(gh.SPECIALS),o=a.getConfigs().eatableSize,c=Oe()(r).call(r,(function(e){return!R()(e).call(e,(function(e){return hi()(s).call(s,e.color)>=0}))})),u=un()(c).call(c,(function(e,t){return t.length-e.length}))[0];(null==u?void 0:u.length)<o?this.manager.stop():(i.isSelectable=!1,i.isUseableItem=!1,null==(e=i.suggestionsTimer)||e.remove(),i.showHighlightTiles(u),this.tiles=u,this.createHighlightTiles(),this.createHandAtCenterTitles(),this.manager.displayCount(gd)<1&&this.createDescription(),u.forEach((function(e){e.block.once(Phaser.Input.Events.GAMEOBJECT_POINTER_DOWN,(function(){u.forEach((function(e){e.block.off(Phaser.Input.Events.GAMEOBJECT_POINTER_DOWN)})),t.handleOnTileClicked(e)}))})),this.manager.scene.world.events.on(Nt.Z.RESIZE,this.updateUI))}},t.createHighlightTiles=function(e){void 0===e&&(e=!0);var t=this.manager.scene.tileManager.getBoundOfTiles(this.tiles),n=t.x,i=t.y,a=t.width,r=t.height;this.manager.createMask(n,i,a,r,10,e)},t.createHandAtCenterTitles=function(){var e;un()(e=this.tiles).call(e,(function(e,t){return e.row-t.row+e.column-t.column}));var t=Math.floor(this.tiles.length/2),n=this.tiles[t].getWorldPosition(),i=n.x,a=n.y,r=i+gh.SIZE/2,s=a+gh.SIZE/2;this.manager.hand.setPosition(r,s),this.manager.hand.revive(),this.manager.hand.stopAnimation(),this.manager.hand.playAnimation(300)},t.createDescription=function(){var e=this.manager.scene.lang.Text.GUIDE_1_TAP;this.manager.popover.updateData(170,e),this.manager.popover.revive(),this.alignDescription(),this.manager.popover.stopAnimation(),this.manager.popover.playAnimation(300)},t.alignDescription=function(){if(this.manager.popover.active){var e=this.manager.scene.tileManager.getBoundOfTiles(this.tiles),t=e.y,n=e.height;this.manager.popover.setY(t-100-n),this.manager.popover.y<0&&this.manager.popover.setY(5)}},e}(),Af=Ef,Sf=function(){function e(e){var t=this;this.manager=void 0,this.startGuide=function(){var e=t.manager.scene,n=e.tileManager,i=e.layoutManager,a=e.currentDiamond,r=i.objects.hammerItem;n.isSelectable=!1,n.isUseableItem=!1,t.createHighlightItem(),t.createHandAtItem(),t.createDescription(),a<r.value&&e.eatDiamond(r.value),r.once(Phaser.Input.Events.GAMEOBJECT_POINTER_UP,t.handleOnUseItem)},this.handleOnUseItem=function(){var e=t.manager.scene,n=e.boardManager,i=e.tileManager,a=n.getTileByIndex(26);if(a){var r=i.getTilesCanCapture();Oe()(r).call(r,(function(e){return R()(e).call(e,(function(e){return e.color===gh.COLORS.RED}))})).length<1?t.manager.stopTutorial():(t.manager.popover.kill(),t.createHandAtTile(a),t.manager.background.setVisible(!1),a.block.once(Phaser.Input.Events.GAMEOBJECT_POINTER_DOWN,t.handleUseHammer(a)))}else t.manager.stop()},this.handleUseHammer=function(e){return function(){t.manager.scene.itemManager.applyItem(e),t.manager.hand.kill(),t.closeTutorial()}},this.closeTutorial=function(){t.manager.stopTutorial()},this.manager=e}var t=e.prototype;return t.setup=function(){this.loadCustomBoard(),this.manager.scene.events.once(Cd,this.startGuide)},t.loadCustomBoard=function(){this.manager.scene.boardManager.loadBoardByFen(":BGPY3BYGY:B2PYBYRYGY:BYBYRB2PGB:2YB5RYP:2GB5RYG:PGYB3RBYG:BRGYGRYBGB:2GBP2G2PCB:GYCBPGYGPY:BPY2BPRPGP")},t.createHighlightItem=function(){var e=this.manager.scene.layoutManager.objects.hammerItem,t=e.x,n=e.y;this.manager.createMask(t-30,n-30,60,70)},t.createHandAtItem=function(){var e=this.manager.scene.layoutManager.objects.hammerItem,t=e.x,n=e.y;this.manager.hand.setPosition(t+20,n+20),this.manager.hand.revive(),this.manager.hand.stopAnimation(),this.manager.hand.playAnimation(300)},t.createDescription=function(){var e=this.manager.scene.layoutManager.objects.hammerItem;this.manager.popover.updateData(160,"This is a Hammer, use it to smash any gem!"),this.manager.popover.setY(e.y+55),this.manager.popover.revive(),this.manager.popover.stopAnimation(),this.manager.popover.playAnimation(300)},t.createHandAtTile=function(e){var t=e.getWorldTransformMatrix().decomposeMatrix(),n=t.translateX,i=t.translateY,a=n+gh.SIZE/2,r=i+gh.SIZE/2;this.manager.hand.setPosition(a,r),this.manager.hand.revive(),this.manager.hand.stopAnimation(),this.manager.hand.playAnimation(300)},e}(),Tf=Sf,bf=function(){function e(e){var t=this;this.manager=void 0,this.startGuide=function(){var e=t.manager.scene,n=e.tileManager,i=e.layoutManager,a=e.currentDiamond,r=i.objects.paintItem;n.isSelectable=!1,n.isUseableItem=!1,t.createHighlightItem(),t.createHandAtItem(),t.createDescription(),a<r.value&&e.eatDiamond(r.value),r.once(Phaser.Input.Events.GAMEOBJECT_POINTER_UP,t.handleOnUseItem)},this.handleOnUseItem=function(){var e=t.manager.scene,n=e.tileManager,i=e.boardManager,a=n.getTilesCanCapture(),r=Oe()(a).call(a,(function(e){return R()(e).call(e,(function(e){return e.color===gh.COLORS.YELLOW}))}));if((null==r?void 0:r.length)<1)t.manager.stop();else{t.manager.popover.kill(),t.manager.background.kill();var s=i.getTileByIndex(45);t.createHandAtTile(s),s.block.once(Phaser.Input.Events.GAMEOBJECT_POINTER_DOWN,t.handleUsePaint(s))}},this.handleUsePaint=function(e){return function(){t.manager.scene.itemManager.applyItem(e),t.manager.hand.kill(),t.closeTutorial()}},this.manager=e}var t=e.prototype;return t.setup=function(){this.loadCustomBoard(),this.manager.scene.events.once(Cd,this.startGuide)},t.loadCustomBoard=function(){this.manager.scene.boardManager.loadBoardByFen(":PRPRBGRYRP:PBRY2BR2GB:GPRB2RGBGR:2GP3YBPBP:GBP3Y2RPB:RGR3YGRPR:YBG4YGYG:PYBGRPBRPG:PBRYGRBGBR:BGR2GPBRBP")},t.createHighlightItem=function(){var e=this.manager.scene.layoutManager.objects.paintItem,t=e.x,n=e.y;this.manager.createMask(t-30,n-30,60,70)},t.createHandAtItem=function(){var e=this.manager.scene.layoutManager.objects.paintItem,t=e.x,n=e.y;this.manager.hand.setPosition(t+20,n+20),this.manager.hand.setActive(!0),this.manager.hand.setVisible(!0),this.manager.hand.stopAnimation(),this.manager.hand.playAnimation(300)},t.createDescription=function(){var e=this.manager.scene.layoutManager.objects.paintItem;this.manager.popover.updateData(160,"This is a Magic bottle, use it to change a gem colour"),this.manager.popover.setY(e.y+55),this.manager.popover.revive(),this.manager.popover.stopAnimation(),this.manager.popover.playAnimation(300)},t.createHandAtTile=function(e){var t=e.getWorldTransformMatrix().decomposeMatrix(),n=t.translateX,i=t.translateY,a=n+gh.SIZE/2,r=i+gh.SIZE/2;this.manager.hand.setPosition(a,r),this.manager.hand.revive(),this.manager.hand.stopAnimation(),this.manager.hand.playAnimation(300)},t.closeTutorial=function(){this.manager.stopTutorial()},e}(),If=bf,wf=function(){function e(e){var t=this;this.manager=void 0,this.disableUseItem=function(){t.manager.tutorialId="";var e=t.manager.scene.tileManager;e.isSelectable=!1,e.isUseableItem=!1},this.startGuide=function(){var e=t.manager.scene,n=e.tileManager,i=e.layoutManager,a=e.currentDiamond,r=i.objects.shuffleItem;t.manager.tutorialId=Td,n.isSelectable=!1,n.isUseableItem=!1,t.createHighlight(),t.createHandAtItem(),t.createDescription(),a<r.value&&e.eatDiamond(r.value),r.once(Phaser.Input.Events.GAMEOBJECT_POINTER_UP,t.handleOnUseItem)},this.handleOnUseItem=function(){t.manager.hand.kill(),t.manager.popover.kill(),t.manager.stopTutorial()},this.manager=e}var t=e.prototype;return t.setup=function(){this.loadCustomBoard(),this.manager.scene.events.once(Id,this.disableUseItem),this.manager.scene.events.once(Cd,this.startGuide)},t.loadCustomBoard=function(){this.manager.scene.boardManager.loadBoardByFen(":BPBPRBPRGB:PYGBGRYGRG:YGYPBCBRGY:PRBGRYGPBG:YGPRPRBRGR:GRGCGBRBYB:RPYGBRBPGY:GRGYPBGYPB:YPBGYGYGRP:RGRBPBPRYB")},t.createHighlight=function(){var e=this.manager.scene.layoutManager.objects.shuffleItem,t=e.x,n=e.y;this.manager.createMask(t-30,n-30,60,70)},t.createHandAtItem=function(){var e=this.manager.scene.layoutManager.objects.shuffleItem,t=e.x,n=e.y;this.manager.hand.setPosition(t+20,n+20),this.manager.hand.revive(),this.manager.hand.stopAnimation(),this.manager.hand.playAnimation(300)},t.createDescription=function(){var e=this.manager.scene.layoutManager.objects.shuffleItem;this.manager.popover.updateData(160,"This is a Shuffle tile, use it to shuffle all gems"),this.manager.popover.setY(e.y+55),this.manager.popover.revive(),this.manager.popover.stopAnimation(),this.manager.popover.playAnimation(300)},e}(),Cf=wf,xf=function(){function e(e){var t=this;this.manager=void 0,this.handleOnCloseTutorial=function(){t.manager.stopTutorial();var e=t.manager.scene.tileManager;e.isSelectable=!0,e.isUseableItem=!0,t.manager.startTutorial(gd).then((function(e){e||t.manager.stopTutorial()}))},this.manager=e}var t=e.prototype;return t.setup=function(){var e=this.manager.scene.tileManager;e.isSelectable=!1,e.isUseableItem=!1,this.createHighlight(),this.createDescription(),this.manager.background.once(Phaser.Input.Events.GAMEOBJECT_POINTER_DOWN,this.handleOnCloseTutorial)},t.createHighlight=function(){this.manager.createMask(50,0,95,50)},t.createDescription=function(){var e=this.manager.scene,t=this.manager.scene.lang.Text.GUIDE_3_TARGET_SCORE;this.manager.popover.updateData(170,t);var n=e.layoutManager.objects.header.topBar.targetScoreBar.getWorldPosition().y;this.manager.popover.setY(n+30),this.manager.popover.setActive(!0),this.manager.popover.setVisible(!0),this.manager.popover.stopAnimation(),this.manager.popover.playAnimation(300)},e}(),Of=xf,_f=n(434),Rf=Hh.STATUS,Pf=Ui.Z.TUTORIAL,kf=Pf.KEY,Mf=Pf.FRAME,Df=GameCore.Configs.Tutorial,Nf=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n.tutorialId=void 0,n.tutorialsDisplayed=[],n.hand=void 0,n.popover=void 0,n.background=void 0,n.maskGraphics=void 0,n.tutFirstMove=void 0,n.tutTargetScore=void 0,n.tutCurrentScore=void 0,n.tutColorfulGem=void 0,n.tutItemPaint=void 0,n.tutItemHammer=void 0,n.tutItemShuffle=void 0,n.showTutorialWhenStart=function(){var e=n.scene.levelHandler;1===e.level&&n.scene.analytics.event(Dt._.TUTORIAL_BEGIN),2===e.level&&n.startTutorial(Ed),3===e.level&&n.startTutorial(Sd),4===e.level&&n.startTutorial(Td),5===e.level&&n.startTutorial(Ad)},n.showTutorialWhenGemsDropped=function(){1===n.scene.levelHandler.level&&n.startTutorial(gd)},n.showTutorialWhenGemsMove=function(){1===n.scene.levelHandler.level&&n.startTutorial(yd).then((function(e){e||n.startTutorial(gd).then((function(e){e||n.stopTutorial()}))}))},n.startTutorial=function(){var e=(0,s.Z)(h().mark((function e(t){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.isRunning()){e.next=2;break}return e.abrupt("return",!1);case 2:if(!n.isNothingToDisplay()){e.next=4;break}return e.abrupt("return",!1);case 4:if(!n.hasDisplayedEnough(t)){e.next=6;break}return e.abrupt("return",!1);case 6:n.background.kill(),e.t0=t,e.next=e.t0===gd?10:e.t0===yd?13:e.t0===vd?16:e.t0===Ed?19:e.t0===Ad?22:e.t0===Sd?25:e.t0===Td?28:31;break;case 10:return n.tutFirstMove=new Af((0,Gi.Z)(n)),n.tutFirstMove.setup(),e.abrupt("break",32);case 13:return n.tutCurrentScore=new yf((0,Gi.Z)(n)),n.tutCurrentScore.setup(),e.abrupt("break",32);case 16:return n.tutTargetScore=new Of((0,Gi.Z)(n)),n.tutTargetScore.setup(),e.abrupt("break",32);case 19:return n.tutColorfulGem=new gf((0,Gi.Z)(n)),n.tutColorfulGem.setup(),e.abrupt("break",32);case 22:return n.tutItemPaint=new If((0,Gi.Z)(n)),n.tutItemPaint.setup(),e.abrupt("break",32);case 25:return n.tutItemHammer=new Tf((0,Gi.Z)(n)),n.tutItemHammer.setup(),e.abrupt("break",32);case 28:return n.tutItemShuffle=new Cf((0,Gi.Z)(n)),n.tutItemShuffle.setup(),e.abrupt("break",32);case 31:return e.abrupt("return",!1);case 32:if(n.isRunning()){e.next=34;break}return e.abrupt("return",!1);case 34:return n.tutorialId=t,n.tutorialsDisplayed.push(n.tutorialId),n.scene.events.emit(Id),n.scene.analytics.event(Dt._.TUTORIAL_STEP,{step:n.tutorialId}),e.abrupt("return",!0);case 39:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.updateBackgroundSize=function(){var e=n.scene.gameZone,t=e.displayWidth+100,i=e.displayHeight+100;n.background.setDisplaySize(t,i),Phaser.Display.Align.In.Center(n.background,n.scene.gameZone)},n.scene=t,n.createBackground(),n.createHand(),n.createPopover(),n}(0,o.Z)(t,e);var n=t.prototype;return n.init=function(){this.hand.kill(),this.popover.kill(),this.background.kill(),this.removeEvents(),this.setState(Rf.READY)},n.start=function(){this.isRunning()||(this.isValidForTutorial()||Df.ForceUseTutorial)&&(this.scene.player.incUserGuideDisplays(),this.setState(Rf.RUNNING),this.listenEvents(),this.scene.events.emit(bd))},n.stop=function(){this.isRunning()&&(this.removeEvents(),this.scene.tweens.killTweensOf([this.background,this.hand]),this.setState(Rf.STOPPED))},n.displayCount=function(e){var t;return Oe()(t=this.tutorialsDisplayed).call(t,(function(t){return t===e})).length},n.hasDisplayedEnough=function(e){if(!GameCore.Utils.Object.hasOwn(Df.NumberOfTutorial,e))return!0;var t=Df.NumberOfTutorial[e];return!GameCore.Utils.Valid.isNumber(t)||this.displayCount(e)>=t},n.isNothingToDisplay=function(){var e,t=this;return Oe()(e=Q()(Df.NumberOfTutorial)).call(e,(function(e){return!t.hasDisplayedEnough(e)})).length<1},n.listenEvents=function(){this.scene.events.on(bd,this.showTutorialWhenStart),this.scene.events.on(wd,this.showTutorialWhenGemsMove),this.scene.events.on(Cd,this.showTutorialWhenGemsDropped),this.scene.world.events.on(Nt.Z.RESIZE,this.updateBackgroundSize)},n.removeEvents=function(){this.scene.events.off(bd,this.showTutorialWhenStart),this.scene.events.off(wd,this.showTutorialWhenGemsMove),this.scene.events.off(Cd,this.showTutorialWhenGemsDropped),this.scene.world.events.off(Nt.Z.RESIZE,this.updateBackgroundSize)},n.stopTutorial=function(){this.tutorialId="",this.hand.kill(),this.popover.kill(),this.background.kill(),(0,_f.Z)(0),this.isNothingToDisplay()&&this.scene.analytics.event(Dt._.TUTORIAL_COMPLETE)},n.isValidForTutorial=function(){return this.scene.game.player.getPlayer().isUserNew},n.createHand=function(){this.hand=new Aa(this.scene),this.hand.kill(),this.hand.setDepth(_i.Z.PRIORITY)},n.createPopover=function(){this.popover=new ff(this.scene),this.popover.kill(),this.popover.setDepth(_i.Z.PRIORITY),Phaser.Display.Align.In.Center(this.popover,this.scene.gameZone,-50,-150)},n.createBackground=function(){this.background=this.scene.make.image({key:kf,frame:Mf.BLANK}),this.background.setInteractive({}),this.scene.input.setTopOnly(!1),this.background.setTint(0),this.background.setAlpha(.8),this.background.setDepth(_i.Z.PRIORITY),this.updateBackgroundSize()},n.createMask=function(e,t,n,i,a,r){var s;void 0===a&&(a=10),void 0===r&&(r=!0),null==(s=this.maskGraphics)||s.destroy(),this.maskGraphics=this.scene.make.graphics({fillStyle:{color:16711680,alpha:1}}),this.maskGraphics.setName("MaskGraphics"),this.maskGraphics.fillRoundedRect(e,t,n,i,a),this.background.revive(),this.background.clearMask(!0),this.background.setMask(this.maskGraphics.createGeometryMask()),this.background.mask.invertAlpha=!0,r&&this.runShowMaskAnimation()},n.runShowMaskAnimation=function(){var e=[this.background];this.background.setAlpha(0),this.scene.tweens.killTweensOf(e),this.scene.tweens.add({targets:e,duration:300,ease:Phaser.Math.Easing.Quadratic.Out,props:{alpha:{from:0,to:.8}},onUpdate:function(e,t){(0,_f.Z)(t.alpha)}})},t}(ao),Lf=Nf,Bf=Ui.Z.DEFAULT,Gf=Bf.KEY,Uf=Bf.FRAME,Ff=function(e){function t(t,n,i,a){var r;return(r=e.call(this,t,n,i,a)||this).popup=void 0,r.line=void 0,r.title=void 0,r.replayButton=void 0,r.homeButton=void 0,r.settingMusic=void 0,r.settingSound=void 0,r.settingVibrate=void 0,r.contents=void 0,r.popupShowUpAnimation=void 0,r.popupFadeOutAnimation=void 0,r.contentShowUpAnimation=void 0,r.open=function(){e.prototype.open.call((0,Gi.Z)(r));var t=r.scene.player.getPlayerSettings(),n=t.music,i=t.sound,a=t.vibrate;if(r.settingMusic.updateStatus(n),r.settingSound.updateStatus(i),r.settingVibrate.updateStatus(a),!Cs()){r.settingVibrate.setVisible(!1);Phaser.Display.Align.In.Center(r.settingMusic,r.settingVibrate,-80),Phaser.Display.Align.In.Center(r.settingSound,r.settingVibrate,80)}r.runOpenAnimation()},r.handleClosePopup=function(){r.scene.audio.playSound(Fi.Z.POPUP_OFF,{volume:.6}),r.runCloseAnimation();var e=r.scene.game.scene.getScene(ui.C.GAME_SCENE);e instanceof av&&e.events.emit(Ld.RESUME),r.popupFadeOutAnimation.next((function(){r.scene.screen.close(r.name);var e=r.scene.game.globalScene;e instanceof wa.Z&&e.requestBackgroundMaskUpdate(Pi.o4.PAUSE_SCREEN,0)}))},r.handleReplayGame=(0,s.Z)(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r.scene instanceof av&&r.scene.levelHandler.clearFen(),r.runCloseAnimation(),r.popupFadeOutAnimation.next((0,s.Z)(h().mark((function e(){var t,n,i,a,s,o;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r.scene.screen.close(r.name),(t=r.scene.game.globalScene)instanceof wa.Z&&t.requestBackgroundMaskUpdate(Pi.o4.PAUSE_SCREEN,0),n=r.scene,i=n.match,a=n.player,s=i.getMatchState(),o=s.mode,e.t0=o,e.next=e.t0===Ao.SINGLE?8:e.t0===Ao.BLITZ?13:e.t0===Ao.TOURNAMENT?18:e.t0===Ao.CHALLENGE_FRIEND?21:22;break;case 8:return e.next=10,i.single.finish.processAsync();case 10:return e.next=12,i.single.start.processAsync({playerId:a.getPlayerId()});case 12:return e.abrupt("break",22);case 13:return e.next=15,i.blitz.finish.processAsync();case 15:return e.next=17,i.blitz.start.processAsync({playerId:a.getPlayerId()});case 17:return e.abrupt("break",22);case 18:return e.next=20,i.single.start.processAsync({playerId:a.getPlayerId()});case 20:case 21:return e.abrupt("break",22);case 22:Li.emit(Ld.REPLAY);case 23:case"end":return e.stop()}}),e)}))));case 3:case"end":return e.stop()}}),e)}))),r.handleGotoDashboard=function(){r.runCloseAnimation(),r.popupFadeOutAnimation.next((function(){r.scene.screen.close(r.name);var e=r.scene.game.globalScene;e instanceof wa.Z&&e.requestBackgroundMaskUpdate(Pi.o4.PAUSE_SCREEN,0),r.scene.scene.switch(ui.C.DASHBOARD_SCENE)}))},r.handleMusicSetting=function(e){r.scene.player.setSetting("music",e),e?r.scene.audio.playMusic():r.scene.audio.pauseMusic()},r.handleSoundSetting=function(e){r.scene.player.setSetting("sound",e)},r.handleVibrateSetting=function(e){r.scene.player.setSetting("vibrate",e)},r.createPopup(),r.createPopupContent(),r.createInput(),r.setDepth(Pi.Ks.POPUP),r.background.setAlpha(.6),r}(0,o.Z)(t,e);var n=t.prototype;return n.createInput=function(){this.replayButton.onClick=this.handleReplayGame,this.homeButton.onClick=this.handleGotoDashboard,this.settingMusic.onClick=this.handleMusicSetting,this.settingSound.onClick=this.handleSoundSetting,this.settingVibrate.onClick=this.handleVibrateSetting},n.createPopup=function(){this.popup=new Sr(this.scene,0,0,310,370),this.add(this.popup),Phaser.Display.Align.In.Center(this.popup,this.zone)},n.createPopupContent=function(){this.createTitle(),this.createMenuButtons(),this.createLine(),this.createFooterButtons(),this.popup.add([this.line,this.title,this.replayButton,this.homeButton,this.settingMusic,this.settingSound,this.settingVibrate]),this.contents=this.scene.make.group({}),this.contents.addMultiple([this.replayButton,this.homeButton,this.settingMusic,this.settingVibrate,this.settingSound])},n.createTitle=function(){this.title=this.scene.add.container();var e=this.scene.make.image({key:Gf,frame:Uf.RIBBON_SHORT});e.setWorldSize(271,81);var t=this.scene.make.bitmapText({font:Sa.Z.PRIMARY.KEY,size:this.scene.fontSize(30),text:this.scene.lang.Text.SETTINGS,origin:{x:.5,y:.5}});Phaser.Display.Align.In.Center(t,e,0,-10);var n=new ga.Z(this.scene,Gf,Uf.BUTTON_CLOSE,38,38);n.setName("Close"),n.useSound=!1,n.onClick=this.handleClosePopup,Phaser.Display.Align.In.RightCenter(n,e,-5,-5),this.title.add([e,t,n]),Phaser.Display.Align.In.TopCenter(this.title,this.popup)},n.createMenuButtons=function(){this.replayButton=new ga.Z(this.scene,Gf,Uf.BUTTON_BLUE_LONG,232,76.94),this.replayButton.setName("Replay");var e=this.scene.make.bitmapText({font:Sa.Z.PRIMARY.KEY,size:this.scene.fontSize(30),text:this.scene.lang.Text.REPLAY});Phaser.Display.Align.In.Center(e,this.replayButton),this.replayButton.add(e),Phaser.Display.Align.In.Center(this.replayButton,this.popup,0,-80),this.homeButton=new ga.Z(this.scene,Gf,Uf.BUTTON_RED_LONG,231,68),this.homeButton.setName("Home");var t=this.scene.make.bitmapText({font:Sa.Z.PRIMARY.KEY,size:this.scene.fontSize(28),text:this.scene.lang.Text.HOME});Phaser.Display.Align.In.Center(t,this.homeButton),this.homeButton.add(t),Phaser.Display.Align.In.Center(this.homeButton,this.popup,0,10)},n.createLine=function(){this.line=this.scene.make.image({key:Gf,frame:Uf.LINE}),this.line.setWorldSize(228.5,2),Phaser.Display.Align.In.BottomCenter(this.line,this.popup,0,-100)},n.createFooterButtons=function(){var e=this.scene.player.getPlayerSettings(),t=e.sound,n=e.vibrate,i=e.music;this.createMusicButton(i),this.createVibrateButton(n),this.createSoundButton(t);var a=this.popup.height;this.settingVibrate.setPosition(0,a/2-65);Phaser.Display.Align.In.BottomCenter(this.settingMusic,this.settingVibrate,-75),Phaser.Display.Align.In.BottomCenter(this.settingSound,this.settingVibrate,75)},n.createMusicButton=function(e){this.settingMusic=new ws(this.scene,{enable:e,frameOn:Uf.ICON_MUSIC_ON,frameOff:Uf.ICON_MUSIC_OFF,backgroundOn:Uf.BUTTON_GREEN_CIRCLE,backgroundOff:Uf.BUTTON_GREEN_CIRCLE}),this.settingMusic.setName("Music"),this.settingMusic.icon.setWorldSize(43,43),this.settingMusic.button.setWorldSize(70,70)},n.createVibrateButton=function(e){this.settingVibrate=new ws(this.scene,{enable:e,frameOn:Uf.ICON_VIB_ON,frameOff:Uf.ICON_VIB_OFF,backgroundOn:Uf.BUTTON_GREEN_CIRCLE,backgroundOff:Uf.BUTTON_GREEN_CIRCLE}),this.settingVibrate.setName("Vibrate"),this.settingVibrate.icon.setWorldSize(43,43),this.settingVibrate.button.setWorldSize(70,70)},n.createSoundButton=function(e){this.settingSound=new ws(this.scene,{enable:e,frameOn:Uf.ICON_SOUND_ON,frameOff:Uf.ICON_SOUND_OFF,backgroundOn:Uf.BUTTON_GREEN_CIRCLE,backgroundOff:Uf.BUTTON_GREEN_CIRCLE}),this.settingSound.setName("Sound"),this.settingSound.icon.setWorldSize(43,43),this.settingSound.button.setWorldSize(70,70)},n.runOpenAnimation=function(){this.scene.audio.playSound(Fi.Z.POPUP_SHOW);var e=this.scene.game.globalScene;e instanceof wa.Z&&e.requestBackgroundMaskUpdate(Pi.o4.PAUSE_SCREEN,this.background.alpha),this.runPopupEntrancesAnimation(0,300),this.runPopupContentEntrancesAnimation(200,300)},n.runCloseAnimation=function(){this.runPopupExitsAnimation(0,200)},n.runPopupEntrancesAnimation=function(e,t){if(!this.popupShowUpAnimation){var n=this.popup,i=n.y,a=n.scale;this.popupShowUpAnimation=new vr({targets:[this.popup],delay:e,duration:t,props:{y:{from:350,to:i},alpha:{start:1,from:1,to:1},scale:{start:0,from:0,to:a}}})}this.popupShowUpAnimation.play()},n.runPopupContentEntrancesAnimation=function(e,t){this.contentShowUpAnimation||(this.contentShowUpAnimation=new fa.Z({targets:this.contents.getChildren(),duration:t,delay:this.scene.tweens.stagger(80,{start:e}),props:{alpha:{start:0,from:0,to:1}}})),this.contentShowUpAnimation.play()},n.runPopupExitsAnimation=function(e,t){var n,i=this;this.popupFadeOutAnimation||(this.popupFadeOutAnimation=new pa.Z({targets:[this.popup],delay:e,duration:t,props:{y:250,scale:0},onComplete:function(){i.popup.setY(0)}})),null==(n=this.popupFadeOutAnimation)||n.play()},t}(GameCore.Screen),Zf=Ff,Hf=Ui.Z.DEFAULT,Yf=Hf.KEY,zf=Hf.FRAME,Vf=GameCore.Configs,Wf=Vf.Network,Kf=Vf.Match,jf=function(e){function t(t,n,i,a){var r;return(r=e.call(this,t,n,i,a)||this).isUseRescue=void 0,r.countdownText=void 0,r.countdownTimer=void 0,r.countdownCount=void 0,r.progressColor=0,r.progressTween=void 0,r.progressCircle=void 0,r.progressAngle=void 0,r.progressSize=void 0,r.progressRadius=void 0,r.skipText=void 0,r.continueText=void 0,r.nonCapitalizedText=void 0,r.continueButton=void 0,r.continueButtonAnimation=void 0,r.adsTimer=void 0,r.open=function(){e.prototype.open.call((0,Gi.Z)(r)),r.isUseRescue=!1,r.progressColor=4249855,r.countdownCount=Kf.RescueGamePopupTimeout,r.setTime(r.countdownCount),r.setContinueText(),r.runCountdown(),r.runContinueButtonAnimation(),r.scene.audio.playSound(Fi.Z.POPUP_SHOW);var t=r.scene.game.globalScene;t instanceof wa.Z&&t.requestBackgroundMaskUpdate(Pi.o4.RESCUE_SCREEN,r.background.alpha)},r.handleShowRewardedVideoAd=(0,s.Z)(h().mark((function e(){var t,n,i,a,s,o,c,l,d;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=r.scene.game,n=t.globalScene,i=t.audio,e.prev=1,!r.isUseRescue){e.next=4;break}return e.abrupt("return");case 4:return s=r.scene.match,o=null!=(a=s.getMatchState().mode)?a:"",c=s.getMatchState().customData.level,r.scene.analytics.event(Dt._.MATCH_RESCUE,{game_mode:GameCore.Utils.String.toUpperCamelCase(o),level:c,level_name:"level_"+c}),r.isUseRescue=!0,r.progressTween.pause(),r.countdownTimer.remove(),n.screen.open(Pi.o4.NOTIFY_SCREEN,{message:r.scene.lang.Text.LOADING_ADS,duration:0,loading:!0}),i.pauseMusic(),i.muteAll(),e.next=16,new(u())((function(e,t){var n;null==(n=r.adsTimer)||n.remove(),r.adsTimer=r.scene.time.delayedCall(Wf.Timeout,t),r.scene.ads.getAdStatus(GameCore.Ads.Types.REWARDED)===GameCore.Ads.Status.LOADING?r.scene.ads.events.once(GameCore.Ads.Events.LOADED,e):r.scene.ads.preloadRewardedVideoAsync().then(e).catch(t)}));case 16:return e.next=18,r.scene.ads.showRewardedVideoAsync();case 18:n.screen.events.off(GameCore.Screens.Events.CLOSE),Li.emit(Ld.RESCUE),i.playSound(Fi.Z.DAILY_REWARD),n.screen.close(Pi.o4.NOTIFY_SCREEN),e.next=31;break;case 24:if(e.prev=24,e.t0=e.catch(1),!(e.t0 instanceof Object&&GameCore.Utils.Object.hasOwn(e.t0,"code"))){e.next=30;break}if("USER_INPUT"!==e.t0.code){e.next=30;break}return r.showNotifySkipAds(),e.abrupt("return");case 30:r.showNotifyNoAds();case 31:return e.prev=31,null==(l=r.adsTimer)||l.destroy(),i.unmuteAll(),i.playMusic(),r.scene.ads.preloadRewardedVideoAsync().catch((function(){})),r.scene.screen.close(r.name),(d=r.scene.game.globalScene)instanceof wa.Z&&d.requestBackgroundMaskUpdate(Pi.o4.RESCUE_SCREEN,0),e.finish(31);case 40:case"end":return e.stop()}}),e,null,[[1,24,31,40]])}))),r.showNotifyNoAds=function(e){if(!e||e.name===Pi.o4.NOTIFY_SCREEN){var t=r.scene.game.globalScene;t.screen.events.off(GameCore.Screens.Events.CLOSE),t.screen.events.once(GameCore.Screens.Events.CLOSE,r.showGameOver),t.screen.open(Pi.o4.NOTIFY_SCREEN,{message:r.scene.lang.Text.NO_ADS,duration:2e3,loading:!1})}},r.showNotifySkipAds=function(){var e=r.scene.game.globalScene;e.screen.events.off(GameCore.Screens.Events.CLOSE),e.screen.events.once(GameCore.Screens.Events.CLOSE,r.showGameOver),e.screen.open(Pi.o4.NOTIFY_SCREEN,{message:r.scene.lang.Text.CANCELLED_AD,duration:3e3,loading:!1})},r.showGameOver=function(e){if(!e||e.name===Pi.o4.NOTIFY_SCREEN){r.countdownTimer.remove(),r.progressTween.pause(),r.scene.screen.close(r.name);var t=r.scene.game.globalScene;t instanceof wa.Z&&t.requestBackgroundMaskUpdate(Pi.o4.RESCUE_SCREEN,0),r.finishGame()}},r.handleSkip=function(){r.countdownTimer.remove(),r.progressTween.pause(),r.scene.screen.close(r.name);var e=r.scene.game.globalScene;e instanceof wa.Z&&e.requestBackgroundMaskUpdate(Pi.o4.RESCUE_SCREEN,0),r.finishGame()},r.handleRunCountdown=function(){if(r.countdownCount-=1,5===r.countdownCount&&(r.progressColor=15812177),r.countdownCount<=0)return r.countdownTimer.remove(),r.progressTween.complete(),void r.rescueTimeout();r.setTime(r.countdownCount)},r.progressColor=0,r.progressAngle=-90,r.progressSize=15,r.progressRadius=70,r.countdownCount=Kf.MaxRescueCount,r.setDepth(Pi.Ks.POPUP),r.background.setAlpha(.8),r.createContent(),r}(0,o.Z)(t,e);var n=t.prototype;return n.setContinueText=function(){var e=this.scene.game.scene.getScene(ui.C.GAME_SCENE);e instanceof av&&(e.isBlitzGameplay()?(this.continueText.setText(this.scene.lang.Text.EXTEND_BLITZ_TIME),"en"===this.scene.lang.getCurrentLanguage()?(Phaser.Display.Align.In.Center(this.nonCapitalizedText,this.continueText,45,3.6),this.nonCapitalizedText.setVisible(!0)):this.nonCapitalizedText.setVisible(!1)):(this.continueText.setText(this.scene.lang.Text.CONTINUE),this.nonCapitalizedText.setVisible(!1)))},n.createContent=function(){this.createProgressCircle(),this.createCountdown(),this.createContinueButton(),this.createSkipText()},n.createCountdown=function(){this.countdownText=this.scene.make.bitmapText({size:this.scene.fontSize(75),font:Sa.Z.PRIMARY.KEY,origin:{x:.5,y:.5}}),this.add(this.countdownText),this.countdownText.setCenterAlign(),this.setTime(this.countdownCount)},n.runCountdown=function(){var e={delay:1e3,loop:!0,callback:this.handleRunCountdown};this.countdownTimer=this.scene.time.addEvent(e),this.startProgressCircle()},n.setProgressCircle=function(e){var t=this.countdownText,n=t.x,i=t.y,a=Phaser.Math.DegToRad(e-360+this.progressAngle),r=Phaser.Math.DegToRad(this.progressAngle);this.progressCircle.clear(),this.progressCircle.beginPath(),this.progressCircle.lineStyle(this.progressSize,this.progressColor),this.progressCircle.arc(n+2,i+5,this.progressRadius,a,r,!0,.02),this.progressCircle.strokePath(),this.progressCircle.closePath()},n.setTime=function(e){this.countdownText.setText(""+e),Phaser.Display.Align.In.Center(this.countdownText,this.zone,0,-115)},n.createProgressCircle=function(){this.progressCircle=this.scene.add.graphics(),this.add(this.progressCircle)},n.startProgressCircle=function(){var e=this;this.progressTween=this.scene.tweens.addCounter({from:360,to:0,duration:1e3*Kf.RescueGamePopupTimeout,onUpdate:function(t){var n=+t.getValue().toFixed(2);e.setProgressCircle(n)}})},n.createContinueButton=function(){this.continueButton=new ga.Z(this.scene,Yf,zf.BUTTON_BLUE_LONG,232,68),this.continueButton.setName("Continue"),this.add(this.continueButton),this.continueButton.onClick=this.handleShowRewardedVideoAd;var e=this.scene.add.image(0,0,Yf,zf.ICON_ADS);Phaser.Display.Align.In.Center(e,this.continueButton),e.setWorldSize(36.5,33.5),e.setX(this.continueButton.x-70),this.continueButton.add(e);var t=28;switch(this.scene.lang.getCurrentLanguage()){case"id":case"ru":t=23}this.continueText=this.scene.make.bitmapText({size:this.scene.fontSize(t),text:this.scene.lang.Text.CONTINUE,font:Sa.Z.PRIMARY.KEY,origin:{x:.35,y:.55}}),this.nonCapitalizedText=this.scene.make.bitmapText({size:this.scene.fontSize(20),text:"S",font:Sa.Z.PRIMARY.KEY,origin:{x:.35,y:.55}}),this.continueButton.add(this.continueText),this.continueButton.add(this.nonCapitalizedText),this.nonCapitalizedText.setVisible(!1),Phaser.Display.Align.In.Center(this.continueButton,this.zone,0,30)},n.createSkipText=function(){var e=this.scene.lang.getCurrentLanguage(),t="ja"===e?125:"id"===e?161.5:129,n="ja"===e?31:"id"===e?16.5:25;this.skipText=new ga.Z(this.scene,Yf,this.scene.lang.Texture.NO_THANK,t,n),this.skipText.setName("NoThanks"),this.add(this.skipText),this.skipText.onClick=this.handleSkip,Phaser.Display.Align.In.BottomCenter(this.skipText,this.continueButton,0,60)},n.rescueTimeout=function(){this.scene.screen.close(this.name);var e=this.scene.game.globalScene;e instanceof wa.Z&&e.requestBackgroundMaskUpdate(Pi.o4.RESCUE_SCREEN,0),this.finishGame()},n.runContinueButtonAnimation=function(){var e;this.continueButtonAnimation||(this.continueButtonAnimation=new ua({targets:[this.continueButton],props:{scale:"-=0.02"}})),null==(e=this.continueButtonAnimation)||e.play()},n.finishGame=function(){this.scene.game.globalScene.events.emit(ui.K.SWITCH,ui.C.GAME_OVER_SCENE)},t}(GameCore.Screen),Xf=jf,qf=Ui.Z.GAMEPLAY,Jf=qf.KEY,Qf=qf.FRAME,$f=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n.title=void 0,n.score=void 0,n.scoreAnimation=void 0,n.scene=t,n.createBar(),n.createTitle(),n.createScoreText(),n.createScoreAnimation(),n}(0,o.Z)(t,e);var n=t.prototype;return n.setLevelTitle=function(e){if(this.scene.isBlitzGameplay())return this.title.setText(""),void Phaser.Display.Align.In.Center(this.score,this,0,-1);this.title.setText("LV."+e),Phaser.Display.Align.In.Center(this.score,this,0,8)},n.setScore=function(e){var t=""+e;e>99999&&(t=Math.floor(e/1e3)+"k"),this.score.setText(t),this.scoreAnimation.play()},n.createBar=function(){var e=this.scene.make.image({key:Jf,frame:Qf.BIG_CIRCLE});e.setSize(71,71).setDisplaySize(71,71),this.add(e);var t=e.width,n=e.height;this.setSize(t,n)},n.createTitle=function(){var e=this.scene.lang.getCurrentLanguage(),t=this.scene.make.bitmapText({font:Sa.Z.PRIMARY.KEY,size:this.scene.fontSize("ja"===e?12:14),text:"LV.X",origin:{x:.5,y:.5}});this.add(t),this.title=t,Phaser.Display.Align.In.Center(t,this,0,-14)},n.createScoreText=function(){this.score=this.scene.make.bitmapText({font:Sa.Z.PRIMARY.KEY,size:this.scene.fontSize(24),text:"0",origin:{x:.5,y:.5}}),this.add(this.score),Phaser.Display.Align.In.Center(this.score,this,0,8)},n.createScoreAnimation=function(){this.scoreAnimation=new Oo({targets:[this.score]})},t}(Phaser.GameObjects.Container),em=n(610),tm=Ui.Z.GAMEPLAY,nm=tm.KEY,im=tm.FRAME,am=function(e){function t(t,n,i){var a;return(a=e.call(this,t)||this).scene=void 0,a.objectType=void 0,a.payload=void 0,a.icon=void 0,a.checkIcon=void 0,a.requireText=void 0,a.scene=t,a.objectType=n,a.payload=i,a.createIcon(),a.createCheckIcon(),a.createRequireText(),a}(0,o.Z)(t,e);var n=t.prototype;return n.updateCount=function(e){e<=0?(this.checkIcon.revive(),this.requireText.kill()):(this.checkIcon.kill(),this.requireText.revive(),this.requireText.setText(""+e))},n.createIcon=function(){this.icon=this.scene.make.image({key:nm,frame:this.payload.icon}),this.icon.setWorldSize(18.5,18.5),this.add(this.icon)},n.createRequireText=function(){var e=this.scene.fontSize(19.2);this.requireText=new _o(this.scene,{font:Sa.Z.PRIMARY.KEY,size:e}),this.requireText.setDropShadow(.5,.5,8158332),this.requireText.setText(""+this.payload.require),this.add(this.requireText),Phaser.Display.Align.In.Center(this.requireText,this.icon,6,5)},n.createCheckIcon=function(){this.checkIcon=this.scene.make.image({key:nm,frame:im.ICON_CHECK,visible:!1}),this.checkIcon.setWorldSize(13,13),this.add(this.checkIcon),Phaser.Display.Align.In.Center(this.checkIcon,this.icon,6,5)},t}(Phaser.GameObjects.Container),rm=Ui.Z.GAMEPLAY.FRAME,sm=Nd.OBJECTS,om=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n.missionName=void 0,n.currentReward=void 0,n.score=void 0,n.title=void 0,n.label=void 0,n.objects=void 0,n.circleLight=void 0,n.cometTwinkle=void 0,n.starWhiteTwinkle=void 0,n.rewardAnimation=void 0,n.circleLightAnimation=void 0,n.requireObjectsAnimation=void 0,n.scene=t,n.createTitle(),n.createLabel(),n.createScore(),n.createGroup(),n.createCircleLight(),n.createCircleLightAnimation(),n.createEffects(),n.scene.add.existing((0,Gi.Z)(n)),n}(0,o.Z)(t,e);var n=t.prototype;return n.showRequesting=function(e){this.label.setVisible(e),this.objects&&this.objects.killGroup()},n.updateInfo=function(e){var t=e.name,n=e.require,i=e.process;this.showRequesting(!1),this.createRequireObjects(n,i),this.alignRequireObjects(),this.missionName!==t&&(this.missionName=t,this.runRequireObjectsAnimation())},n.createRequireObjects=function(e,t){var n=this;this.scene.tweens.killTweensOf(this.objects.getChildren());var i=Q()(e),a=0;i.forEach((function(i){var r=n.getIconObjectByType(i);if(null!==r){a=(a=e[i]-t[i])<0?0:a;var s=n.objects.getMatching("type",i);if(s.length>0){var o=s[0];return o.revive(),o.setAlpha(1),o.setScale(1),void o.updateCount(a)}var c=new am(n.scene,i,{icon:r,require:a});n.add(c),n.objects.add(c)}}))},n.alignRequireObjects=function(){this.objects.setY(3);var e=this.getActiveObjects(),t=-(e.length-1)/2*30;Phaser.Actions.SetX(e,t,30)},n.getIconObjectByType=function(e){switch(e){case sm.RED:return rm.TILE_RED;case sm.BLUE:return rm.TILE_BLUE;case sm.GREEN:return rm.TILE_GREEN;case sm.PINK:return rm.TILE_PINK;case sm.YELLOW:return rm.TILE_YELLOW;case sm.PAINT:return rm.ITEM_PAINT;case sm.HAMMER:return rm.ITEM_HAMMER;case sm.SHUFFLE:return rm.ITEM_SHUFFLE;default:return null}},n.getActiveObjects=function(){return this.objects.getMatching("active",!0)},n.runRequireObjectsAnimation=function(){var e,t=this.getActiveObjects();this.scene.tweens.killTweensOf(t),null==(e=this.requireObjectsAnimation)||e.remove(),this.requireObjectsAnimation=new ud({targets:t,duration:1e3,delay:this.scene.tweens.stagger(50,{}),ease:Phaser.Math.Easing.Elastic.Out,easeParams:[.1,.45],props:{scale:{start:.8,to:1}}}),this.requireObjectsAnimation.play()},n.runRewardAnimation=function(e){var t,n,i=this;if(null!=(t=this.rewardAnimation)&&null!=(t=t.tween)&&t.isPlaying())return this.currentReward+=e,void this.score.setText(""+this.currentReward);this.currentReward=e,this.score.setText(""+this.currentReward),this.score.setAlpha(1),this.score.setScale(1),this.score.setVisible(!0),this.resetScorePosition();var a=this.scene.layoutManager.objects.header.topBar.currentScoreBar.getWorldPosition(),r=a.x,s=a.y,o=this.score,c={x:o.x,y:o.y},u={x:r,y:s};null==(n=this.rewardAnimation)||n.remove(),this.rewardAnimation=new ma.Z({targets:[this.score],duration:Phaser.Math.RND.between(1e3,2500),curve:[[c.x,c.y],[c.x+Phaser.Math.RND.between(0,30),c.y+Phaser.Math.RND.between(40,80)],[u.x,u.y]],props:{scale:{start:1,to:.5}},onComplete:function(){var e;null==(e=i.scene)||e.eatScore(i.currentReward),i.currentReward=0,i.score.setVisible(!1),i.runStarTouchAnimation()},onCurveUpdate:function(e){var t=e.x+Phaser.Math.RND.between(-10,10),n=e.y+Phaser.Math.RND.between(-10,10);i.cometTwinkle.explode(1,t,n),i.scene.audio.playSound(Fi.Z.MISSION_REWARD,{volume:.6})}}),this.rewardAnimation.play()},n.runStarTouchAnimation=function(){var e=this.score,t=e.x,n=e.y,i=this.scene.layoutManager.objects.header.topBar.currentScoreBar,a=i.width,r=i.height,s=n+2;this.circleLight.setPosition(t,s),this.circleLightAnimation.play(),this.starWhiteTwinkle.run(1,t,s,a,r)},n.runTimeOutAnimation=function(){var e=this.getActiveObjects();this.scene.tweens.killTweensOf(e),this.scene.tweens.add({targets:e,yoyo:!0,repeat:3,duration:400,ease:Phaser.Math.Easing.Quadratic.InOut,props:{alpha:0}})},n.createTitle=function(){this.title=this.scene.make.bitmapText({font:Sa.Z.PRIMARY.KEY,size:this.scene.fontSize(16),text:this.scene.lang.Text.GEM_BONUS,origin:{x:.5,y:.5}}),this.add(this.title),Phaser.Display.Align.In.Center(this.title,this,0,-18)},n.createLabel=function(){this.label=this.scene.make.bitmapText({font:Sa.Z.PRIMARY.KEY,size:this.scene.fontSize(12),text:this.scene.lang.Text.REQUESTING,origin:{x:.5,y:.5}}),this.label.setTint(1095418),this.add(this.label),new pa.Z({targets:[this.label],yoyo:!0,repeat:-1,props:{alpha:{start:.8,to:.2}}}).play()},n.createScore=function(){this.score=this.scene.make.bitmapText({font:Sa.Z.PRIMARY.KEY,size:this.scene.fontSize(32),visible:!1,alpha:.9,depth:_i.Z.EFFECT,origin:{x:.5,y:.5}})},n.resetScorePosition=function(){var e=this.getWorldTransformMatrix().decomposeMatrix(),t=e.translateX,n=e.translateY;this.score.setPosition(t,n)},n.createGroup=function(){this.objects=this.scene.add.group()},n.createCircleLight=function(){var e=Ui.Z.EFFECTS,t=e.KEY,n=e.FRAME;this.circleLight=this.scene.make.image({key:t,frame:n.FX_CIRCLE_LIGHT}),this.circleLight.setWorldSize(75.5,75),this.circleLight.kill()},n.createCircleLightAnimation=function(){var e=this;this.circleLightAnimation=new No.Z({targets:[this.circleLight],duration:800,ease:Phaser.Math.Easing.Cubic.Out,props:{scale:2.5,alpha:0},onActive:function(){e.circleLight.revive()},completeDelay:300,onComplete:function(){e.circleLight.kill(),e.starWhiteTwinkle.stop()}})},n.createEffects=function(){this.cometTwinkle=new Ta.Z(this.scene),this.cometTwinkle.setDepth(_i.Z.PRIORITY),this.starWhiteTwinkle=new em.Z(this.scene),this.starWhiteTwinkle.setDepth(_i.Z.PRIORITY)},t}(Phaser.GameObjects.Container),cm=om,um=Ui.Z.GAMEPLAY,lm=um.KEY,hm=um.FRAME,dm=function(e){function t(t,n,i){var a;return(a=e.call(this,t,lm,hm.BUTTON_SETTING,n,i)||this).scene=void 0,a.handlePauseGame=function(){var e=a.scene,t=e.tileManager,n=e.layoutManager,i=e.itemManager;t.isSelectable&&""===i.itemActive&&(a.scene.events.emit(Ld.PAUSE),n.showPauseScreen())},a.scene=t,a.useSound=!1,a.setName("Pause"),a.onClick=a.handlePauseGame,a}return(0,o.Z)(t,e),t}(ga.Z),pm=Ui.Z.GAMEPLAY,fm=pm.KEY,mm=pm.FRAME,gm=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n.progressBar=void 0,n.scoreText=void 0,n.scene=t,n.createProgressBar(),n.createScore(),n.scene.add.existing((0,Gi.Z)(n)),n}(0,o.Z)(t,e);var n=t.prototype;return n.setScore=function(e){var t=""+e;e>99999&&(t=Math.floor(e/1e3)+"k"),this.scoreText.setText(this.scene.lang.Text.TARGET+": "+t)},n.setProcess=function(e){this.progressBar.setProcess(e,!0)},n.createProgressBar=function(){this.progressBar=new Vr(this.scene,{width:90,key:fm,frames:mm}),this.add(this.progressBar),Phaser.Display.Align.In.Center(this.progressBar,this,0,10)},n.createScore=function(){this.scoreText=this.scene.make.bitmapText({font:Sa.Z.PRIMARY.KEY,size:this.scene.fontSize(16),origin:{x:.5,y:.5}}),Phaser.Display.Align.In.TopCenter(this.scoreText,this.progressBar,0,10),this.add(this.scoreText),this.setScore(0)},t}(Phaser.GameObjects.Container),vm=Ui.Z.GAMEPLAY,ym=(vm.KEY,vm.FRAME,function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n.highScoreText=void 0,n.scoreText=void 0,n.score=void 0,n.scene=t,n.createHighScoreText(),n.createScore(),n.score=0,n.scene.add.existing((0,Gi.Z)(n)),n}(0,o.Z)(t,e);var n=t.prototype;return n.setScore=function(e){var t=""+e;this.score=e,e>99999&&(t=Math.floor(e/1e3)+"k"),this.scoreText.setText(""+t)},n.createScore=function(){this.scoreText=this.scene.make.bitmapText({font:Sa.Z.PRIMARY.KEY,size:this.scene.fontSize(16),origin:{x:.5,y:.5}}),Phaser.Display.Align.In.Center(this.scoreText,this,0,10),this.add(this.scoreText),this.setScore(0)},n.createHighScoreText=function(){var e=18;if("ru"===this.scene.lang.getCurrentLanguage())e=14;this.highScoreText=this.scene.make.bitmapText({font:Sa.Z.PRIMARY.KEY,size:this.scene.fontSize(e),origin:{x:.5,y:.5},text:this.scene.lang.Text.HIGH_SCORE}),Phaser.Display.Align.In.Center(this.highScoreText,this,0,-10),this.add(this.highScoreText)},t}(Phaser.GameObjects.Container)),Em=Ui.Z.GAMEPLAY,Am=Em.KEY,Sm=Em.FRAME,Tm=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n.background=void 0,n.targetScoreBar=void 0,n.blitzHighScoreBar=void 0,n.currentScoreBar=void 0,n.missionBlock=void 0,n.scene=t,n.createBackground(),n.createSettingButton(),n.createTargetScoreBar(),n.createBlitzHighScoreBar(),n.createCurrentScoreBar(),n.createMissionBlock(),n.scene.add.existing((0,Gi.Z)(n)),n}(0,o.Z)(t,e);var n=t.prototype;return n.createBackground=function(){this.background=this.scene.make.image({key:Am,frame:Sm.BIG_TOP,origin:{x:.5,y:.5}}),this.background.setWorldSize(364,80),this.setSize(364,80),this.add(this.background)},n.createSettingButton=function(){var e=new dm(this.scene,35,35);this.add(e),Phaser.Display.Align.In.LeftCenter(e,this.background,-5,-15)},n.createTargetScoreBar=function(){this.targetScoreBar=new gm(this.scene),this.add(this.targetScoreBar),Phaser.Display.Align.In.Center(this.targetScoreBar,this.background,-90,-15)},n.createBlitzHighScoreBar=function(){this.blitzHighScoreBar=new ym(this.scene),this.add(this.blitzHighScoreBar),Phaser.Display.Align.In.Center(this.blitzHighScoreBar,this.background,-90,-15)},n.createCurrentScoreBar=function(){this.currentScoreBar=new $f(this.scene),this.add(this.currentScoreBar),Phaser.Display.Align.In.Center(this.currentScoreBar,this.background)},n.createMissionBlock=function(){this.missionBlock=new cm(this.scene),this.add(this.missionBlock),Phaser.Display.Align.In.Center(this.missionBlock,this.background,110,-8)},n.handleBlitzGameplay=function(){this.targetScoreBar.setVisible(!1),this.blitzHighScoreBar.setVisible(!0)},n.handleNormalGameplay=function(){this.targetScoreBar.setVisible(!0),this.blitzHighScoreBar.setVisible(!1)},t}(Phaser.GameObjects.Container),bm=function(e){function t(t){var n;(n=e.call(this,t)||this).scene=void 0,n.topBar=void 0,n.scene=t,n.createTopBar();var i=n.topBar,a=i.width,r=i.height;return n.setSize(a,r),t.add.existing((0,Gi.Z)(n)),n}(0,o.Z)(t,e);var n=t.prototype;return n.createTopBar=function(){this.topBar=new Tm(this.scene),this.topBar.setDepth(_i.Z.ITEM),this.add(this.topBar)},n.handleBlitzGameplay=function(){this.topBar.handleBlitzGameplay()},n.handleNormalGameplay=function(){this.topBar.handleNormalGameplay()},t}(Phaser.GameObjects.Container),Im=nd.CHANGE_COLOR.ID,wm=Ui.Z.GAMEPLAY,Cm=wm.KEY,xm=wm.FRAME,Om=gh.COLORS,_m=gh.SPECIALS,Rm=Om.RED,Pm=Om.BLUE,km=Om.PINK,Mm=Om.GREEN,Dm=Om.YELLOW,Nm=_m.FREEZE,Lm=_m.COLORFUL,Bm=_m.COLOR_CHANGE,Gm=function(e){function t(t){var n;return(n=e.call(this,t,xm.TILE_COLOR_CHANGE,37,37)||this).scene=void 0,n.index=void 0,n.colors=void 0,n.color=void 0,n.activeItem=function(){e.prototype.activeItem.call((0,Gi.Z)(n)),n.setAlpha(1)},n.deactivateItem=function(){e.prototype.deactivateItem.call((0,Gi.Z)(n)),n.setAlpha(.015)},n.scene=t,n.item.setTexture(Cm),n.item.setFrame(xm.TILE_COLOR_CHANGE),n.index=0,n.colors=[Rm,Pm,km,Mm,Dm,Nm,Lm,Bm],n.setDiamond(0),n.onClick=function(){n.scene.itemManager.activeItem(Im)&&n.nextColor()},n.on(Phaser.Input.Events.GAMEOBJECT_POINTER_DOWN,n.activeItem),n.on(Phaser.Input.Events.GAMEOBJECT_POINTER_MOVE,(function(e){e.wasTouch&&(n.active&&(n.deactivateItem(),n.scene.itemManager.deactivateItem(Im)))})),n.on(Phaser.Input.Events.POINTER_WHEEL,(function(){n.scene.itemManager.deactivateItem(Im)})),n}(0,o.Z)(t,e);var n=t.prototype;return n.nextColor=function(){this.color=this.colors[this.index],this.index+=1,this.index>=this.colors.length&&(this.index=0),this.item.setTexture(Cm),this.item.setFrame(gh.FRAME[this.color])},n.useItem=function(e){return this.scene.tileManager.tilesChangeColor(this.color,[e]),this.scene.updateMove(),!0},t}(md),Um=n(612),Fm=nd.GIFT.ID,Zm=Ui.Z.GAMEPLAY.FRAME,Hm=GameCore.Configs.Gameplay,Ym=function(e){function t(t){var n;return(n=e.call(this,t,Zm.ITEM_GIFT,31,32)||this).scene=void 0,n.giftTime=void 0,n.timer=void 0,n.messageReceived=void 0,n.showMessageAnimation=void 0,n.handleReceiveGift=function(){var e=(0,s.Z)(h().mark((function e(t){var i,a,r,s,o,c,u;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=n.scene,a=i.player,r=i.gameZone,s=r.width,o=r.height,c=Date.now(),n.scene.eatDiamond(t),(u=new Um.Z(n.scene)).setDepth(_i.Z.PRIORITY),u.explode(20,s/2,o/2),n.runShowMessage(),e.next=10,a.setCustomData("lastReceiveGift",c);case 10:n.checkUseable();case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.handleGameSceneResume=function(){n.scene.itemManager.deactivateItem(Fm)},n.scene=t,n.giftTime=1e3*Hm.GiftTime,n.onClick=function(){var e=n.scene.tileManager;e.isUseableItem&&(e.removeSuggestionsTiles(),n.useGiftItem(),n.deactivateItem())},n.createMessageReceived(),n}(0,o.Z)(t,e);var n=t.prototype;return n.setDiamond=function(t){e.prototype.setDiamond.call(this,t),this.diamond.setText(this.scene.lang.Text.LOADING)},n.activeItem=function(){e.prototype.activeItem.call(this),this.icon.setVisible(!1)},n.deactivateItem=function(){e.prototype.deactivateItem.call(this),this.icon.setVisible(!1),this.bar.setVisible(!0),this.diamond.setVisible(!0)},n.checkUseable=function(){var e=this.scene.player,t=Date.now(),n=e.getCustomData("lastReceiveGift"),i=0;if(GameCore.Utils.Valid.isNumber(n)&&(i=n),t-i<this.giftTime)return this.disableItem(),void this.startCountdown(i);this.enableItem()},n.enableItem=function(){var e;this.setLabel(this.scene.lang.Text.GIFT),this.setInteractive(),null==(e=this.bubbleAnimation)||e.play()},n.disableItem=function(){var e;this.disableInteractive(),null==(e=this.bubbleAnimation)||e.stop()},n.startCountdown=function(e){var t=this;this.stopCountdown(),this.setLabel(this.scene.lang.Text.GIFT),this.timer=this.scene.time.addEvent({loop:!0,delay:1e3,startAt:1e3,callback:function(){var n=Date.now()-e,i=t.giftTime-n;if(i<=0)t.enableItem();else{var a=(0,Yr.F0)(i,!0);t.setLabel(a)}}})},n.stopCountdown=function(){var e;null==(e=this.timer)||e.remove()},n.setLabel=function(e){this.icon.setVisible(!1),this.diamond.setCenterAlign(),this.diamond.setText(e),Phaser.Display.Align.In.Center(this.diamond,this.bar)},n.useGiftItem=function(){var e=this.scene.itemManager;this.isActive?e.deactivateItem(Fm):(e.activeItem(Fm),this.useItem())},n.useItem=function(){var e=this;return!!this.isActive&&(this.scene.screen.events.once(Pi.Xs.OPEN,(function(t){t.onReward=e.handleReceiveGift})),this.scene.screen.events.once(Pi.Xs.CLOSE,this.handleGameSceneResume),this.scene.layoutManager.showRewardScreen(Hm.AwardDiamonds),!0)},n.createMessageReceived=function(){this.messageReceived=this.scene.make.bitmapText({font:Sa.Z.PRIMARY.KEY,size:this.scene.fontSize(24),visible:!1,text:this.scene.lang.getText({key:"YOU_RECEIVED_X_DIAMONDS",variables:[Hm.AwardDiamonds]}),origin:{x:.5,y:.5}}),this.messageReceived.setCenterAlign(),this.messageReceived.setDepth(_i.Z.MESSAGE)},n.runShowMessage=function(){var e=this;this.messageReceived.revive();var t=this.scene.isBlitzGameplay()?-200:-150;Phaser.Display.Align.In.TopCenter(this.messageReceived,this.scene.gameZone,0,t),this.showMessageAnimation||(this.showMessageAnimation=new ud({targets:[this.messageReceived],delay:500,duration:800,completeDelay:1500,onComplete:function(){e.messageReceived.kill()}})),this.showMessageAnimation.play()},t}(md),zm=Ym,Vm=n(595),Wm=n.n(Vm),Km=nd.SHUFFLE.ID,jm=Ui.Z.GAMEPLAY.FRAME,Xm=function(e){function t(t){var n;return(n=e.call(this,t,jm.ITEM_SHUFFLE,28,28.5)||this).scene=void 0,n.isRunning=!1,n.costTimer=void 0,n.handleUseItem=function(){if(!n.isRunning){var e=n.scene.itemManager;if(n.isActive)e.deactivateItem(Km);else{if(!e.activeItem(Km))return n.scene.audio.playSound(Fi.Z.MOVE_WRONG),void n.shakeAnimation.play();n.scene.useDiamond(n.value),n.useItem()}}},n.useItem=function(){var e=n.scene,t=e.tileManager,i=e.itemManager;n.isRunning=!0,t.isSelectable=!1,t.isUseableItem=!1,n.scene.audio.playSound(Fi.Z.USE_SHUFFLE),t.removeSuggestionsTiles(),n.runShuffle().then((function(){i.deactivateItem(Km),t.updateFreezeTiles(),t.suggestionsEatableTiles(),n.scene.time.delayedCall(10,(function(){t.isSelectable=!0,t.isUseableItem=!0,n.isRunning=!1}))}));var a=ki.USE_SHUFFLE.EVENTS.USE_SHUFFLE;Li.emit(a,{type:"shuffle",value:1})},n.runShuffle=(0,s.Z)(h().mark((function e(){var t,i;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.getTilesAlive(),i=n.shuffleTiles(),e.next=4,n.shuffleAnimation(t,i);case 4:n.updateTilesPosition(t,i);case 5:case"end":return e.stop()}}),e)}))),n.scene=t,n.setDiamond(25),n.onClick=n.handleUseItem,n}(0,o.Z)(t,e);var n=t.prototype;return n.getTilesAlive=function(){var e=this.scene.tileManager.getTiles(),t=[];return e.forEach((function(e){e.isCaptured()||e instanceof Rh||t.push(e)})),t},n.shuffleTiles=function(){var e=this.getTilesAlive();GameCore.Utils.Array.unique(e);var t=[];return e.forEach((function(e){var n=e.row,i=e.column;t.push({row:n,column:i})})),GameCore.Utils.Array.shuffle(t),t},n.shuffleAnimation=function(){var e=(0,s.Z)(h().mark((function e(t,n){var i,a;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=this.scene.animationManager,a=Wm()(t).call(t,(function(e,t){var a=e.row,r=e.column,s=n[t],o=s.row,c=s.column,u=[];return a!==o&&(u[0]=i.moveRowsDuringShuffle({tile:e,fromRow:a,toRow:o})),r!==c&&(u[1]=i.moveColsDuringShuffle({tile:e,fromColumn:r,toColumn:c})),u})),e.next=4,u().all(a);case 4:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}(),n.updateTilesPosition=function(e,t){var n=this.scene.boardManager;e.forEach((function(e,i){var a=e.row,r=e.column,s=t[i],o=s.row,c=s.column;a===o&&r===c||n.tileSwap({fromRow:a,toRow:o,fromColumn:r,toColumn:c})}))},t}(md),qm=Xm,Jm={targets:[],duration:600,ease:Phaser.Math.Easing.Back.Out,props:{}},Qm=function(e){function t(t){return e.call(this,Jm,t)||this}return(0,o.Z)(t,e),t}(na.Z),$m=Ui.Z.DEFAULT,eg=$m.KEY,tg=$m.FRAME,ng=function(e){function t(t){var n;return(n=e.call(this,t)||this).cat=void 0,n.createEffect(),n.createCat(),n.runCatAnimation(),n.scene.add.existing((0,Gi.Z)(n)),n}(0,o.Z)(t,e);var n=t.prototype;return n.createCat=function(){this.cat=this.scene.make.image({key:eg,frame:tg.SAD_CAT,origin:{x:.5,y:1}}),this.cat.setWorldSize(100,117),this.cat.setY(this.cat.height/2),this.add(this.cat)},n.createEffect=function(){},n.runCatAnimation=function(){new ua({targets:[this.cat],duration:1e3,props:{scale:"-=0.02"}}).play()},t}(Phaser.GameObjects.Container),ig=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n.sadCat=void 0,n.board=void 0,n.titleText=void 0,n.descriptionText=void 0,n.boardAnimation=void 0,n.theCatAnimation=void 0,n.textsAnimation=void 0,n.existAnimation=void 0,n.localizedReasonText={},n.runAnimation=function(e){n.scene.tweens.killTweensOf(n.getAll()),n.setVisible(!0),n.setReason(e),n.runBoardAnimation(),n.runCatAnimation(),n.runTextsAnimation()},n.runExistAnimation=function(){if(!n.existAnimation){var e=n.getAll();n.existAnimation=new Qm({targets:e,duration:400,ease:Phaser.Math.Easing.Cubic.In,props:{y:{getStart:function(e){return e.y},getEnd:function(e){return e.y+150}},alpha:{value:0,delay:250,duration:150}},onComplete:function(){Phaser.Actions.IncY(e,-150),n.setVisible(!1)}})}n.existAnimation.play()},n.scene=t,n.setVisible(!1),n.initLocalization(),n.createBoard(),n.createTitleText(),n.createDescriptionText(),n.createTheCat(),n.scene.add.existing((0,Gi.Z)(n)),n}(0,o.Z)(t,e);var n=t.prototype;return n.initLocalization=function(){var e;this.localizedReasonText=((e={})[Kp.NOT_ENOUGH_SCORE]=this.scene.lang.Text.YOU_DID_NOT_REACH,e[Kp.BLITZ_OUT_OF_TIME]=this.scene.lang.Text.BLITZ_OUT_OF_TIME,e)},n.setReason=function(e){e||(e=Kp.NOT_ENOUGH_SCORE);var t=this.localizedReasonText[e]||e;this.descriptionText.setText(t)},n.createBoard=function(){this.board=new Sr(this.scene,0,0,600,102),this.board.setDepth(_i.Z.BACKGROUND),this.add(this.board)},n.createTheCat=function(){this.sadCat=new ng(this.scene),this.sadCat.setDepth(_i.Z.LOGO),this.add(this.sadCat),Phaser.Display.Align.In.Center(this.sadCat,this.board,-140,-19)},n.createTitleText=function(){this.titleText=this.scene.make.bitmapText({font:Sa.Z.PRIMARY.KEY,size:this.scene.fontSize(22),depth:_i.Z.TEXT,origin:{x:.5,y:.5},text:this.scene.lang.Text.LEVEL_FAILED}),this.add(this.titleText),this.titleText.setTint(12010469),Phaser.Display.Align.In.Center(this.titleText,this.board,35,-20)},n.createDescriptionText=function(){this.descriptionText=this.scene.make.bitmapText({font:Sa.Z.PRIMARY.KEY,size:this.scene.fontSize(20),depth:_i.Z.TEXT,origin:{x:.5,y:.5},text:this.scene.lang.Text.YOU_DID_NOT_REACH}),this.add(this.descriptionText),this.descriptionText.setTint(11632977),Phaser.Display.Align.In.Center(this.descriptionText,this.board,35,10)},n.runBoardAnimation=function(){if(!this.boardAnimation){var e=this.board.y;this.boardAnimation=new Qm({targets:[this.board],duration:300,props:{y:{start:e+80,to:e},alpha:{start:0,from:0,to:1}}})}this.boardAnimation.play()},n.runCatAnimation=function(){if(!this.theCatAnimation){var e=this.sadCat.x;this.theCatAnimation=new Qm({targets:[this.sadCat],ease:Phaser.Math.Easing.Elastic.Out,easeParams:[.6,1],delay:150,duration:800,props:{alpha:{start:0,from:0,to:1},scale:{start:.3,to:1},x:{start:e-80,to:e}}})}this.theCatAnimation.play()},n.runTextsAnimation=function(){this.titleText.setAlpha(0),this.descriptionText.setAlpha(0),this.textsAnimation||(this.textsAnimation=new Qm({targets:[this.titleText,this.descriptionText],duration:500,delay:this.scene.tweens.stagger(200,{start:200}),props:{y:{getEnd:function(e){return e.y}},alpha:{start:0,from:0,to:1}},completeDelay:1e3,onComplete:this.runExistAnimation})),this.textsAnimation.play()},t}(Phaser.GameObjects.Container),ag=Ui.Z.GAMEPLAY,rg=ag.KEY,sg=ag.FRAME,og=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n.avatar=void 0,n.cup=void 0,n.background=void 0,n.playerName=void 0,n.playerScore=void 0,n.waitingText=void 0,n.scene=t,n.createBackground(),n.createAvatar(),n.createPlayerName(),n.createPlayerScore(),n.createWaitingText(),n.createCup(),n.scene.add.existing((0,Gi.Z)(n)),n}(0,o.Z)(t,e);var n=t.prototype;return n.setScore=function(e){this.playerScore.setText(""+e)},n.updateInfo=function(e,t,n,i){this.playerName.setText(t),this.avatar.loadPhoto(e,n,50),i?(this.setScore(i),this.playerScore.setVisible(!0),this.waitingText.setVisible(!1)):(this.playerScore.setVisible(!1),this.waitingText.setVisible(!0))},n.createBackground=function(){this.background=this.scene.make.image({key:rg,frame:sg.BIG_PLAYER}),this.background.setWorldSize(107,44.5),this.add(this.background)},n.createAvatar=function(){this.avatar=new Lo(this.scene,{key:rg,frame:sg.AVATAR_BLUE_FRAME,background:sg.AVATAR_BLUE_BG,width:38,height:39.5}),this.add(this.avatar),Phaser.Display.Align.In.LeftCenter(this.avatar,this.background,-5)},n.createPlayerName=function(){this.playerName=this.scene.make.text({style:{fontFamily:Sa.Z.FONT_FAMILY,fontSize:this.scene.fontSize(24)+"px"},alpha:.8,origin:{x:.5,y:.5}}),this.playerName.setHighQuality(),Phaser.Display.Align.In.Center(this.playerName,this.background,20,-10),this.add(this.playerName)},n.createPlayerScore=function(){this.playerScore=this.scene.make.bitmapText({font:Sa.Z.PRIMARY.KEY,size:this.scene.fontSize(14),origin:{x:0,y:.5}}),this.add(this.playerScore),Phaser.Display.Align.In.Center(this.playerScore,this.background,8,8)},n.createWaitingText=function(){this.waitingText=this.scene.make.bitmapText({font:Sa.Z.PRIMARY.KEY,size:this.scene.fontSize(12),origin:{x:0,y:.5},text:this.scene.lang.Text.WAITING}),this.waitingText.setAlpha(.6),this.add(this.waitingText),Phaser.Display.Align.In.Center(this.waitingText,this.background,24,8)},n.createCup=function(){this.cup=this.scene.make.image({key:rg,frame:sg.ICON_CUP_SUPERMINI}),this.cup.setWorldSize(11.5,12.5),this.add(this.cup),Phaser.Display.Align.In.Center(this.cup,this.background,-2,8)},t}(Phaser.GameObjects.Container),cg=og,ug={targets:[],duration:200,repeat:5,props:{alpha:{start:1,to:.1}}},lg=function(e){function t(t){return e.call(this,ug,t)||this}return(0,o.Z)(t,e),t}(na.Z),hg=function(e){function t(t){var n;(n=e.call(this,t,0,0,Sa.Z.PRIMARY.KEY)||this).scene=void 0,n.flickerAnimation=void 0,n.scene=t;var i=n.scene.fontSize(14);return n.setFontSize(i),n.setOrigin(.5,.5),n.setNotifyText(n.scene.lang.Text.LOADING_INTER_AD),n.setVisible(!1),n.scene.add.existing((0,Gi.Z)(n)),n}(0,o.Z)(t,e);var n=t.prototype;return n.show=function(){this.setVisible(!0),this.runTextAnimation()},n.setNotifyText=function(e){this.setText(e)},n.runTextAnimation=function(){var e,t=this;this.flickerAnimation||(this.flickerAnimation=new lg({targets:[this],yoyo:!0,duration:300,repeat:3,ease:"Sine.easeInOut",onStart:function(){t.setVisible(!0)},onComplete:function(){t.setVisible(!1)}})),null==(e=this.flickerAnimation)||e.play()},t}(Phaser.GameObjects.BitmapText),dg=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n.theCat=void 0,n.board=void 0,n.levelText=void 0,n.scoreTargetText=void 0,n.boardAnimation=void 0,n.theCatAnimation=void 0,n.textsAnimation=void 0,n.existAnimation=void 0,n.runAnimation=function(){n.scene.tweens.killTweensOf(n.getAll()),n.setVisible(!0),n.runBoardAnimation(),n.runCatAnimation(),n.runTextsAnimation()},n.runExistAnimation=function(){if(!n.existAnimation){var e=n.getAll();n.existAnimation=new Qm({targets:e,duration:300,ease:Phaser.Math.Easing.Back.In,props:{y:{getStart:function(e){return e.y},getEnd:function(e){return e.y+-150}}},onComplete:function(){Phaser.Actions.IncY(e,150),n.setVisible(!1)}})}n.existAnimation.play()},n.scene=t,n.createBoard(),n.createLevelText(),n.createTargetText(),n.createTheCat(),n.scene.add.existing((0,Gi.Z)(n)),n}(0,o.Z)(t,e);var n=t.prototype;return n.setLevel=function(e){this.scene.isBlitzGameplay()?this.levelText.setText(this.scene.lang.Text.BLITZ_MODE):this.levelText.setText(this.scene.lang.Text.MILESTONE+" "+e)},n.setScoreTarget=function(e){this.scene.isBlitzGameplay()?this.scoreTargetText.setText(this.scene.lang.Text.HIGH_SCORE+": "+e):this.scoreTargetText.setText(this.scene.lang.Text.TARGET+": "+e)},n.createBoard=function(){this.board=new Sr(this.scene,0,0,600,102),this.board.setDepth(_i.Z.BACKGROUND),this.add(this.board)},n.createTheCat=function(){this.theCat=new Cr(this.scene),this.theCat.setDepth(_i.Z.LOGO),this.add(this.theCat),Phaser.Display.Align.In.Center(this.theCat,this.board,-140,-17)},n.createLevelText=function(){this.levelText=this.scene.make.bitmapText({font:Sa.Z.PRIMARY.KEY,size:this.scene.fontSize(22),depth:_i.Z.TEXT,origin:{x:.5,y:.5}}),this.add(this.levelText),this.levelText.setTint(12010469),Phaser.Display.Align.In.Center(this.levelText,this.board,25,-20)},n.createTargetText=function(){var e=26;if("ru"===this.scene.lang.getCurrentLanguage())e=22;this.scoreTargetText=this.scene.make.bitmapText({font:Sa.Z.PRIMARY.KEY,size:this.scene.fontSize(e),depth:_i.Z.TEXT,origin:{x:.5,y:.5}}),this.add(this.scoreTargetText),this.scoreTargetText.setTint(11632977),Phaser.Display.Align.In.Center(this.scoreTargetText,this.board,25,10)},n.runBoardAnimation=function(){if(!this.boardAnimation){var e=this.board.y;this.boardAnimation=new Qm({targets:[this.board],duration:300,props:{y:{start:e+80,to:e}}})}this.boardAnimation.play()},n.runCatAnimation=function(){if(!this.theCatAnimation){var e=this.theCat.x;this.theCatAnimation=new Qm({targets:[this.theCat],ease:Phaser.Math.Easing.Elastic.Out,easeParams:[.1,.75],delay:150,duration:600,props:{alpha:{start:0,from:0,to:1},scale:{start:.3,to:1},x:{start:e+-80,to:e}}})}this.theCatAnimation.play()},n.runTextsAnimation=function(){this.levelText.setAlpha(0),this.scoreTargetText.setAlpha(0),this.textsAnimation||(this.textsAnimation=new Qm({targets:[this.levelText,this.scoreTargetText],duration:500,delay:this.scene.tweens.stagger(100,{start:200}),props:{x:{start:-200,to:20},alpha:{start:0,from:0,to:1}},completeDelay:600,onComplete:this.runExistAnimation})),this.textsAnimation.play()},t}(Phaser.GameObjects.Container),pg=Ui.Z.GAMEPLAY,fg=pg.KEY,mg=pg.FRAME,gg=function(e){function t(t){var n,i;return(i=e.call(this,t,fg,{background:mg.BG_DIAMOND_BAR,icon:mg.ICON_DIAMOND})||this).setName("DiamondBar"),i.bar.setWorldSize(72,21),i.icon.setWorldSize(22.4,21.2),null==(n=i.button)||n.setWorldSize(18.5,20),i.alignObject(),Phaser.Display.Align.In.LeftCenter(i.icon,i.bar,3,-2),i.button&&Phaser.Display.Align.In.RightCenter(i.button,i.bar,3),i}return(0,o.Z)(t,e),t}(ar),vg=gg,yg=Ui.Z.GAMEPLAY,Eg=yg.KEY,Ag=yg.FRAME,Sg="play",Tg="pause",bg=GameCore.Configs.Gameplay.BlitzTimeLimit,Ig=function(e){function t(t){var n;return(n=e.call(this,t,0,0)||this).scene=void 0,n.clockIcon=void 0,n.clockText=void 0,n.playtimeClockOriginScale=void 0,n.remainingTime=void 0,n.bonusTime=void 0,n.runningOutAnimation=void 0,n.clockTwitchAnimation=void 0,n.gameOverDelay=void 0,n.updateClockCallback=void 0,n.addTime=function(e){n.bonusTime+=e},n.updateClock=function(e){if(n.state!==Tg){if(n.remainingTime<=0&&n.bonusTime<=0)return n.pauseClock(),n.scene.tileManager.isEndBoard?void(n.remainingTime=10):void n.scene.time.delayedCall(50,(function(){n.scene.tileManager.isEndBoard?n.remainingTime=10:n.scene.tileManager.handleBlitzTimerOver()}));n.handleTimeChange(e),n.setClockText(n.remainingTime),n.updateClockCallback&&n.updateClockCallback()}},n.scene=t,n.updateClockCallback=null,n.gameOverDelay=null,n.state=Tg,n.remainingTime=0,n.bonusTime=0,n.createContents(),n.playtimeClockOriginScale=n.scale,n.scene.add.existing((0,Gi.Z)(n)),n}(0,o.Z)(t,e);var n=t.prototype;return n.createContents=function(){this.createClockImage(),this.createClockText()},n.addEvents=function(){},n.removeEvents=function(){},n.startClock=function(e){this.state=Sg,this.remainingTime=e,this.bonusTime=0,this.setClockText(this.remainingTime)},n.handleTimeChange=function(e){var t=10*e,n=Math.min(this.bonusTime,t);this.remainingTime=this.remainingTime+n-e,this.bonusTime-=n,this.remainingTime<0&&(this.remainingTime=0),this.remainingTime>bg&&(this.remainingTime=bg,this.bonusTime=0)},n.setClockText=function(e){var t=Math.floor(e),n=Math.floor(t/1e3),i=Math.floor(t%1e3/10),a=n<10?"0"+n:n,r=i<10?"0"+i:""+i;this.clockText.setText(a+":"+r)},n.pauseClock=function(){this.state!==Tg&&(this.state=Tg)},n.resumeClock=function(){this.state!==Sg&&(this.state=Sg)},n.createClockText=function(){var e=18;if("ja"===this.scene.lang.getCurrentLanguage())e=15;this.clockText=this.scene.make.bitmapText({text:"00:00",font:Sa.Z.PRIMARY.KEY,size:this.scene.fontSize(e),origin:{x:.5,y:.5}}),Phaser.Display.Align.In.RightCenter(this.clockText,this,17,-3),this.add(this.clockText)},n.createClockImage=function(){this.clockIcon=this.scene.make.image({key:Eg,frame:Ag.ICON_CLOCK}),this.clockIcon.setWorldSize(23,24),Phaser.Display.Align.In.LeftCenter(this.clockIcon,this,42,-1),this.add(this.clockIcon)},n.getRemainingTime=function(){return this.remainingTime},n.setRemainingTime=function(e){this.remainingTime=e},n.runRunningOutAnimation=function(){if(!this.runningOutAnimation)return this.runningOutAnimation=this.scene.tweens.add({targets:this,ease:Phaser.Math.Easing.Cubic.InOut,props:{scale:{duration:500,value:1.6*this.playtimeClockOriginScale}},yoyo:!0}),this.runClockTwitchAnimation(),void this.scene.audio.playSound(Fi.Z.CLOCK_TICK);this.runningOutAnimation.isPlaying()||(this.runningOutAnimation.restart(),this.runClockTwitchAnimation(),this.scene.audio.playSound(Fi.Z.CLOCK_TICK))},n.runClockTwitchAnimation=function(){var e;null==(e=this.clockTwitchAnimation)||e.stop(),this.clockTwitchAnimation=this.scene.tweens.createTimeline({loop:1}),this.clockTwitchAnimation.add({targets:this.clockIcon,ease:Phaser.Math.Easing.Linear,props:{angle:{duration:75,value:-25}}}),this.clockTwitchAnimation.add({targets:this.clockIcon,ease:Phaser.Math.Easing.Linear,props:{angle:{duration:150,value:25}}}),this.clockTwitchAnimation.add({targets:this.clockIcon,ease:Phaser.Math.Easing.Linear,props:{angle:{duration:75,value:0}}}),this.clockTwitchAnimation.play()},n.resetAnimation=function(){var e,t;null==(e=this.runningOutAnimation)||e.stop(),null==(t=this.clockTwitchAnimation)||t.stop(),this.setScale(this.playtimeClockOriginScale),this.clockIcon.setAngle(0)},t}(Phaser.GameObjects.Container),wg=Ui.Z.GAMEPLAY,Cg=wg.KEY,xg=wg.FRAME,Og=GameCore.Configs.Gameplay,_g=Og.BlitzTimeLimit,Rg=Og.ResetBlitzTimerEachLevel,Pg=Og.BlitzRescueTime,kg=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n.playtimeClock=void 0,n.progressBar=void 0,n.isStarted=!1,n.isRunningOut=!1,n.updateClockCallback=function(){var e=n.playtimeClock.getRemainingTime(),t=e/_g>0?e/_g:0;n.isRunningOut=e<=1e4,n.progressBar.setProcess(t,!0),n.isRunningOut&&n.playtimeClock.runRunningOutAnimation()},n.addTime=function(e){e<=0||(n.playtimeClock.addTime(e),n.scene.tileManager.isBlitzTimerOver=!1,n.updateClockCallback())},n.addRescueTime=function(){if(!Rg){var e=Pg>_g?_g:Pg;n.playtimeClock.setRemainingTime(e),n.playtimeClock.setClockText(e),n.updateClockCallback(),n.isStarted=!1}},n.scene=t,n.createProgressBar(),n.createPlaytimeClock(),n.addPersistentEvents(),n.addEvents(),n.scene.add.existing((0,Gi.Z)(n)),n}(0,o.Z)(t,e);var n=t.prototype;return n.resetTimerToMax=function(){this.playtimeClock.setClockText(_g),this.progressBar.setProcess(1,!0),this.playtimeClock.setRemainingTime(_g),this.playtimeClock.pauseClock(),this.playtimeClock.resetAnimation()},n.initTimer=function(){Rg&&this.resetTimerToMax(),this.isStarted=!1,this.isRunningOut=!1,this.playtimeClock.updateClockCallback=this.updateClockCallback},n.pauseTimer=function(e){void 0===e&&(e={}),e&&e.hideTimer&&this.setVisible(!1),this.isStarted&&this.playtimeClock.pauseClock()},n.stopTimer=function(){this.isStarted&&(this.pauseTimer(),this.isRunningOut=!1,this.isStarted=!1)},n.resumeTimer=function(){this.visible||this.setVisible(!0),this.isStarted&&this.playtimeClock.resumeClock()},n.addPersistentEvents=function(){this.scene.events.on(Ld.BLITZ_GAME_BEGIN,this.resetTimerToMax,this),this.scene.events.on(Ld.BLITZ_GAME_RESCUE,this.addRescueTime,this)},n.addEvents=function(){this.removeEvents(),this.scene.events.on(gh.EVENTS.FIRST_INTERACTION,this.startTimer,this),this.scene.events.on(gh.EVENTS.ADD_TIME,this.addTime,this),this.scene.events.on(Ld.PAUSE,this.pauseTimer,this),this.scene.events.on(Ld.RESUME,this.resumeTimer,this),this.scene.events.on(Ld.LEVEL_END,this.stopTimer,this),this.scene.events.on(Ld.RESCUE,this.addRescueTime,this)},n.removeEvents=function(){this.scene.events.off(gh.EVENTS.FIRST_INTERACTION,this.startTimer,this),this.scene.events.off(gh.EVENTS.ADD_TIME,this.addTime,this),this.scene.events.off(Ld.PAUSE,this.pauseTimer,this),this.scene.events.off(Ld.RESUME,this.resumeTimer,this),this.scene.events.off(Ld.LEVEL_END,this.stopTimer,this),this.scene.events.off(Ld.RESCUE,this.addRescueTime,this)},n.startTimer=function(){var e=Rg?_g:this.playtimeClock.getRemainingTime();this.playtimeClock.startClock(e),this.isStarted=!0},n.createPlaytimeClock=function(){this.playtimeClock=new Ig(this.scene),Phaser.Display.Align.In.Center(this.playtimeClock,this.progressBar,4,-20),this.add(this.playtimeClock)},n.createProgressBar=function(){this.progressBar=new Vr(this.scene,{width:150,key:Cg,frames:xg}),this.add(this.progressBar)},n.kill=function(){this.removeEvents(),e.prototype.kill.call(this)},n.revive=function(){this.addEvents(),e.prototype.revive.call(this)},n.updateClock=function(e){this.playtimeClock.updateClock(e)},t}(Phaser.GameObjects.Container),Mg=Ui.Z.GAMEPLAY,Dg=Mg.KEY,Ng=Mg.FRAME,Lg=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n.header=void 0,n.diamondBar=void 0,n.opponentInfo=void 0,n.showAdNotify=void 0,n.gameOverBoard=void 0,n.startLevelBoard=void 0,n.blitzTimer=void 0,n.giftItem=void 0,n.paintItem=void 0,n.hammerItem=void 0,n.shuffleItem=void 0,n.changeColor=void 0,n.gameOverTool=void 0,n.nextLevelTool=void 0,n.scene=t,n.createObjects(),n}(0,o.Z)(t,e);var n=t.prototype;return n.createObjects=function(){this.createHeader(),this.createDiamondBar(),this.createOpponentInfo(),this.createShowAdNotify(),this.createGameOverBoard(),this.createStartLevelBoard(),this.createBlitzTimer(),this.createGiftItem(),this.createPaintItem(),this.createHammerItem(),this.createShuffleItem(),this.createDevTools()},n.createHeader=function(){this.header=new bm(this.scene),this.group.add(this.header)},n.createDiamondBar=function(){this.diamondBar=new vg(this.scene),this.diamondBar.setScale(.9),this.group.add(this.diamondBar)},n.createOpponentInfo=function(){this.opponentInfo=new cg(this.scene),this.group.add(this.opponentInfo),this.opponentInfo.setDepth(_i.Z.ITEM),this.opponentInfo.kill()},n.createShowAdNotify=function(){this.showAdNotify=new hg(this.scene),this.group.add(this.showAdNotify)},n.createGameOverBoard=function(){this.gameOverBoard=new ig(this.scene),this.group.add(this.gameOverBoard),this.gameOverBoard.setDepth(_i.Z.POPUP)},n.createStartLevelBoard=function(){this.startLevelBoard=new dg(this.scene),this.group.add(this.startLevelBoard),this.startLevelBoard.setDepth(_i.Z.POPUP)},n.createBlitzTimer=function(){this.blitzTimer=new kg(this.scene),this.group.add(this.blitzTimer),this.blitzTimer.setDepth(_i.Z.ITEM)},n.createGiftItem=function(){this.giftItem=new zm(this.scene),this.group.add(this.giftItem)},n.createPaintItem=function(){this.paintItem=new Dd(this.scene),this.group.add(this.paintItem)},n.createHammerItem=function(){this.hammerItem=new _d(this.scene),this.group.add(this.hammerItem)},n.createShuffleItem=function(){this.shuffleItem=new qm(this.scene),this.group.add(this.shuffleItem)},n.createDevTools=function(){GameCore.Utils.Valid.isDebugger()&&(this.createChangeColorItem(),this.createGameOverButton(),this.createNextLevelButton())},n.createChangeColorItem=function(){this.changeColor=new Gm(this.scene),this.group.add(this.changeColor)},n.createGameOverButton=function(){this.gameOverTool=new ga.Z(this.scene,Dg,Ng.BUTTON_SETTING),this.group.add(this.gameOverTool),this.gameOverTool.setAlpha(.02),this.gameOverTool.setName("GameOver"),this.gameOverTool.button.setTint(6291256)},n.createNextLevelButton=function(){this.nextLevelTool=new ga.Z(this.scene,Dg,Ng.BUTTON_PLUS),this.group.add(this.nextLevelTool),this.nextLevelTool.setAlpha(.02),this.nextLevelTool.setName("NextLevel"),this.nextLevelTool.button.setTint(6291256)},n.updateUI=function(e){this.blitzTimer.updateClock(e)},n.handleBlitzGameplay=function(){this.header.handleBlitzGameplay(),this.blitzTimer.initTimer(),this.blitzTimer.revive()},n.handleNormalGameplay=function(){this.header.handleNormalGameplay(),this.blitzTimer.kill()},t}(ta),Bg=Lg,Gg=function(e){function t(t){var n;return(n=e.call(this,t)||this).objects=void 0,n.guideUI=void 0,n.objects=null,n}(0,o.Z)(t,e);var n=t.prototype;return n.alignUI=function(){if(null!==this.objects){var e=this.scene.gameZone;Phaser.Display.Align.In.TopCenter(this.objects.header,e),Phaser.Display.Align.In.TopCenter(this.objects.diamondBar,e,0,-80),Phaser.Display.Align.In.TopCenter(this.objects.opponentInfo,e,0,-135),Phaser.Display.Align.In.TopCenter(this.objects.showAdNotify,e,0,-200),Phaser.Display.Align.In.Center(this.objects.gameOverBoard,e,0,25),Phaser.Display.Align.In.Center(this.objects.startLevelBoard,e,0,25),GameCore.Utils.Valid.isDebugger()&&(Phaser.Display.Align.In.Center(this.objects.changeColor,e,0,-90),Phaser.Display.Align.In.TopCenter(this.objects.gameOverTool,e,-80,-100),Phaser.Display.Align.In.TopCenter(this.objects.nextLevelTool,e,80,-100)),Phaser.Display.Align.In.TopCenter(this.objects.blitzTimer,e,0,-150),Phaser.Display.Align.In.TopCenter(this.objects.giftItem,e,-148,-50),Phaser.Display.Align.In.TopCenter(this.objects.paintItem,e,-148,-130),Phaser.Display.Align.In.TopCenter(this.objects.hammerItem,e,148,-50),Phaser.Display.Align.In.TopCenter(this.objects.shuffleItem,e,148,-130)}},n.createGroups=function(){e.prototype.createGroups.call(this),this.guideUI=this.scene.add.group(),this.groups.guideUI=this.guideUI},n.setUIObjects=function(t){e.prototype.setUIObjects.call(this,t),this.addUIObjectsToGroups()},n.addUIObjectsToGroups=function(){null!==this.objects&&this.addObjectForGuideUI()},n.addObjectForGuideUI=function(){this.objects},t}(qs),Ug=Gg,Fg=function(e){function t(){return e.apply(this,arguments)||this}(0,o.Z)(t,e);var n=t.prototype;return n.alignUI=function(){if(null!==this.objects){var e=this.scene.gameZone;Phaser.Display.Align.In.TopCenter(this.objects.header,e),Phaser.Display.Align.In.TopCenter(this.objects.diamondBar,e,0,-80),Phaser.Display.Align.In.TopCenter(this.objects.opponentInfo,e,0,-115),Phaser.Display.Align.In.TopCenter(this.objects.showAdNotify,e,0,-200),Phaser.Display.Align.In.Center(this.objects.gameOverBoard,e,0,25),Phaser.Display.Align.In.Center(this.objects.startLevelBoard,e,0,25),GameCore.Utils.Valid.isDebugger()&&(Phaser.Display.Align.In.TopLeft(this.objects.changeColor,this.objects.header,120,0),Phaser.Display.Align.In.TopLeft(this.objects.gameOverTool,this.objects.header,120,-80),Phaser.Display.Align.In.TopLeft(this.objects.nextLevelTool,this.objects.header,120,-160)),Phaser.Display.Align.In.TopCenter(this.objects.blitzTimer,e,0,-150),Phaser.Display.Align.In.TopLeft(this.objects.giftItem,this.objects.header,65,0),Phaser.Display.Align.In.TopLeft(this.objects.paintItem,this.objects.header,65,-80),Phaser.Display.Align.In.TopRight(this.objects.hammerItem,this.objects.header,65,0),Phaser.Display.Align.In.TopRight(this.objects.shuffleItem,this.objects.header,65,-80),this.adjustBoardContainer()}},n.adjustBoardContainer=function(){this.scene instanceof av&&this.scene.boardManager.boardContainer.setScale(.85)},t}(Ug),Zg=Fg,Hg=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=t,n}(0,o.Z)(t,e);var n=t.prototype;return n.createObjects=function(){this.objects=new Bg(this.scene)},n.createLayouts=function(){this.scene.world.isLandscape()?this.layout=new Zg(this.scene):this.layout=new Ug(this.scene),this.layout.setUIObjects(this.objects)},n.init=function(){e.prototype.init.call(this),this.handleGameplayType(),this.objects.opponentInfo.kill()},n.initUILogic=function(){var e=this;GameCore.Utils.Valid.isDebugger()&&(this.objects.gameOverTool.onClick=function(){var t=e.scene.levelHandler.level;e.scene.die(t)},this.objects.nextLevelTool.onClick=function(){var t=e.scene.levelHandler.targetScore;e.scene.setScore(t),e.scene.levelUp()})},n.updateUIState=function(){this.objects.giftItem.checkUseable(),this.scene.gameplayMode===Ao.CHALLENGE_FRIEND&&this.showAvatarInChallengeMode(),this.handleGameplayType()},n.handleGameplayType=function(){this.scene.isBlitzGameplay()?this.objects.handleBlitzGameplay():this.objects.handleNormalGameplay()},n.showAvatarInChallengeMode=function(){var e=this.scene,t=e.match,n=e.layoutManager.objects,i=t.getMatchState(),a=i.id,r=i.customData,s=r.playerId,o=r.opponentId;if(a&&s&&o){var c=i.profiles[o];n.opponentInfo.revive(),n.opponentInfo.updateInfo(c.id,c.name,c.photo,c.score),n.opponentInfo.alpha=1}else n.opponentInfo.kill},n.showPauseScreen=function(){var e=this.scene.screen;e.get(Pi.o4.PAUSE_SCREEN)||e.add(Pi.o4.PAUSE_SCREEN,Zf),e.open(Pi.o4.PAUSE_SCREEN)},n.showRewardScreen=function(e){var t=this.scene.screen;t.get(Pi.o4.REWARD_SCREEN)||t.add(Pi.o4.REWARD_SCREEN,Pa),t.open(Pi.o4.REWARD_SCREEN,{awardDiamonds:e})},n.showRescueScreen=function(){var e=this.scene.screen;e.get(Pi.o4.RESCUE_SCREEN)||e.add(Pi.o4.RESCUE_SCREEN,Xf),e.open(Pi.o4.RESCUE_SCREEN)},n.updateUI=function(e){this.isRunning()&&this.updateBlitzTimer(e)},n.updateBlitzTimer=function(e){this.scene.isBlitzGameplay()&&this.objects.blitzTimer.updateClock(e)},t}(oo),Yg=Hg,zg=n(428),Vg="How about diving into the game for a relaxing experience?",Wg=GameCore.Configs.Notification.DailyNotificationMessages,Kg=void 0===Wg?{}:Wg,jg=function(){function e(){}e.sendNewUserNotification=function(){var e=(0,s.Z)(h().mark((function e(){var t;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.getInstance(),e.abrupt("return",t.sendNewUserNotificationInstance());case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),e.sendDailyNotification=function(){var e=(0,s.Z)(h().mark((function e(){var t;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.getInstance(),e.abrupt("return",t.sendDailyNotificationInstance());case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),e.sendTestDailyNotification=function(){var e=(0,s.Z)(h().mark((function e(t){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.getInstance();case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),e.getInstance=function(){return this._instance||(this._instance=new e),this._instance};var t=e.prototype;return t.sendNewUserNotificationInstance=function(){var e=(0,s.Z)(h().mark((function e(){var t,n,i,a,r,s;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=window.game,n=t.player,i=t.facebook,a=t.rollbar,e.prev=1,n.getPlayerIsNew()){e.next=5;break}return e.abrupt("return");case 5:if(n.getPlayerASID()){e.next=8;break}return e.abrupt("return");case 8:return e.next=10,FBInstant.player.getDataAsync(["isNotificationFirstSent"]);case 10:if(e.t0=e.sent,e.t0){e.next=13;break}e.t0={};case 13:if(r=e.t0,!0!==r.isNotificationFirstSent){e.next=17;break}return e.abrupt("return");case 17:return s={message:Vg,delayTime:14400,type:zg.Z.NEW_USER_NOTIFICATION},e.next=20,i.sendNotificationAsync(s);case 20:FBInstant.player.setDataAsync({isNotificationFirstSent:!0}),e.next=26;break;case 23:e.prev=23,e.t1=e.catch(1),a.sendException(e.t1);case 26:case"end":return e.stop()}}),e,null,[[1,23]])})));return function(){return e.apply(this,arguments)}}(),t.sendDailyNotificationInstance=function(){var e=(0,s.Z)(h().mark((function e(){var t,n,i;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=window.game.rollbar,e.prev=1,n=new Date,i=n.getDay(),e.t0=i,e.next=0===e.t0?7:1===e.t0?10:2===e.t0?13:3===e.t0?16:4===e.t0?19:22;break;case 7:return e.next=9,this.sendMondayNotification();case 9:return e.abrupt("break",22);case 10:return e.next=12,this.sendTuesdayNotification();case 12:return e.abrupt("break",22);case 13:return e.next=15,this.sendWednesdayNotification();case 15:return e.abrupt("break",22);case 16:return e.next=18,this.sendThursdayNotification();case 18:return e.abrupt("break",22);case 19:return e.next=21,this.sendFridayNotification();case 21:return e.abrupt("break",22);case 22:return e.next=24,this.sendSaturdayNotification();case 24:return e.next=26,this.sendSundayNotification();case 26:e.next=31;break;case 28:e.prev=28,e.t1=e.catch(1),t.sendException(e.t1);case 31:case"end":return e.stop()}}),e,this,[[1,28]])})));return function(){return e.apply(this,arguments)}}(),t.sendMondayNotification=function(){var e=(0,s.Z)(h().mark((function e(){var t,n,i,a,r;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=window.game,n=t.facebook,i=t.rollbar,e.prev=1,r={message:null!=(a=Kg.MONDAY)?a:Vg,delayTime:86400,type:zg.Z.MONDAY_NOTIFICATION},e.next=5,n.sendNotificationAsync(r);case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),i.sendException(e.t0);case 10:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(){return e.apply(this,arguments)}}(),t.sendTuesdayNotification=function(){var e=(0,s.Z)(h().mark((function e(){var t,n,i,a,r;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=window.game,n=t.facebook,i=t.rollbar,e.prev=1,r={message:null!=(a=Kg.TUESDAY)?a:Vg,delayTime:86400,type:zg.Z.TUESDAY_NOTIFICATION},e.next=5,n.sendNotificationAsync(r);case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),i.sendException(e.t0);case 10:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(){return e.apply(this,arguments)}}(),t.sendWednesdayNotification=function(){var e=(0,s.Z)(h().mark((function e(){var t,n,i,a,r;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=window.game,n=t.facebook,i=t.rollbar,e.prev=1,r={message:null!=(a=Kg.WEDNESDAY)?a:Vg,delayTime:86400,type:zg.Z.WEDNESDAY_NOTIFICATION},e.next=5,n.sendNotificationAsync(r);case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),i.sendException(e.t0);case 10:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(){return e.apply(this,arguments)}}(),t.sendThursdayNotification=function(){var e=(0,s.Z)(h().mark((function e(){var t,n,i,a,r;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=window.game,n=t.facebook,i=t.rollbar,e.prev=1,r={message:null!=(a=Kg.THURSDAY)?a:Vg,delayTime:86400,type:zg.Z.THURSDAY_NOTIFICATION},e.next=5,n.sendNotificationAsync(r);case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),i.sendException(e.t0);case 10:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(){return e.apply(this,arguments)}}(),t.sendFridayNotification=function(){var e=(0,s.Z)(h().mark((function e(){var t,n,i,a,r;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=window.game,n=t.facebook,i=t.rollbar,e.prev=1,r={message:null!=(a=Kg.FRIDAY)?a:Vg,delayTime:86400,type:zg.Z.FRIDAY_NOTIFICATION},e.next=5,n.sendNotificationAsync(r);case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),i.sendException(e.t0);case 10:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(){return e.apply(this,arguments)}}(),t.sendSaturdayNotification=function(){var e=(0,s.Z)(h().mark((function e(){var t,n,i,a,r,s;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=window.game,n=t.facebook,i=t.rollbar,e.prev=1,r=this.findDelayTimeForNextDay(6,10),s={message:null!=(a=Kg.SATURDAY)?a:Vg,delayTime:r,type:zg.Z.SATURDAY_NOTIFICATION},e.next=6,n.sendNotificationAsync(s);case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),i.sendException(e.t0);case 11:case"end":return e.stop()}}),e,this,[[1,8]])})));return function(){return e.apply(this,arguments)}}(),t.sendSundayNotification=function(){var e=(0,s.Z)(h().mark((function e(){var t,n,i,a,r,s;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=window.game,n=t.facebook,i=t.rollbar,e.prev=1,r=this.findDelayTimeForNextDay(0,10),s={message:null!=(a=Kg.SUNDAY)?a:Vg,delayTime:r,type:zg.Z.SUNDAY_NOTIFICATION},e.next=6,n.sendNotificationAsync(s);case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),i.sendException(e.t0);case 11:case"end":return e.stop()}}),e,this,[[1,8]])})));return function(){return e.apply(this,arguments)}}(),t.findDelayTimeForNextDay=function(e,t){if(e<0||e>6)throw new Error("Invalid day for notification");if(t<0||t>23)throw new Error("Invalid hour for notification");var n=Date.now(),i=new Date(n).getDay(),a=new Date(n).getHours(),r=e,s=t;if(i===r&&a>=s){var o=3600*(168-a+s);if(o>604800)throw new Error("Notification delay time is more than 7 days");return o}var c=r<i?7-i+r:r-i;s<a&&c--;var u=3600*(24*c+(s<a?24-a+s:s-a));if(u>604800)throw new Error("Notification delay time is more than 7 days");return u},t.sendTestDailyNotificationInstance=function(){var e=(0,s.Z)(h().mark((function e(t){var n,i,a,r;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n={0:"SUNDAY",1:"MONDAY",2:"TUESDAY",3:"WEDNESDAY",4:"THURSDAY",5:"FRIDAY",6:"SATURDAY"},e.prev=1,a=Vg,!(t<0||t>6)){e.next=5;break}throw new Error("Invalid day for notification. Day must be between 0 (Sunday) and 6 (Saturday)");case 5:return a=null!=(i=Kg[n[t]])?i:Vg,r={message:a,delayTime:300,type:zg.Z.GENERIC_NOTIFICATION},e.next=9,window.game.facebook.sendNotificationAsync(r);case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1);case 14:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(t){return e.apply(this,arguments)}}(),e}();jg._instance=void 0;var Xg=jg,qg=Ui.Z.DEFAULT.KEY,Jg=function(){function e(e){var t=this;this.scene=void 0,this.textContainer=void 0,this.missionCompleteText=void 0,this.missionNameText=void 0,this.showTextAnimation=void 0,this.showDailyMissionCompleteText=function(e){if(e&&t.scene.scene.isActive()){var n=e.title;t.missionNameText.setText(n),t.textContainer.setVisible(!0);var i=t.scene.isBlitzGameplay()?-200:-150;Phaser.Display.Align.In.TopCenter(t.textContainer,t.scene.gameZone,0,i),t.showTextAnimation||(t.showTextAnimation=new ud({targets:[t.textContainer],delay:500,duration:800,completeDelay:1500,onComplete:function(){t.textContainer.setVisible(!1)}})),t.showTextAnimation.play()}},this.scene=e,this.createTexts(),this.createContainer()}var t=e.prototype;return t.createTexts=function(){this.createMissionCompleteText(),this.createMissionNameText()},t.createContainer=function(){this.textContainer=this.scene.add.container(0,0),this.textContainer.add(this.missionCompleteText),this.textContainer.add(this.missionNameText),this.textContainer.setDepth(_i.Z.MESSAGE),this.textContainer.setVisible(!1),this.missionCompleteText.setY(-20),this.missionNameText.setY(0)},t.createMissionCompleteText=function(){this.missionCompleteText=this.scene.make.image({key:qg,frame:this.scene.lang.Texture.DAILY_MISSION_COMPLETE});var e=196,t=34;switch(this.scene.lang.getCurrentLanguage()){case"ru":e=250,t=31;break;case"id":e=157;break;case"ja":e=237,t=38}this.missionCompleteText.setWorldSize(e,t)},t.createMissionNameText=function(){this.missionNameText=this.scene.make.bitmapText({font:Sa.Z.PRIMARY.KEY,size:this.scene.fontSize(18),origin:{x:.5,y:.5},text:this.scene.lang.Text.PASS_X_LEVELS}),this.missionNameText.setCenterAlign()},e}(),Qg=GameCore.Configs,$g=Qg.Match,ev=Qg.Gameplay,tv=Qg.Ads,nv=Qg.Network,iv=function(e){function t(){for(var t,n,i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return(n=e.call.apply(e,O()(t=[this]).call(t,a))||this).prevScore=0,n.gameplayMode=void 0,n.currentScore=0,n.currentDiamond=0,n.prevTargetScore=0,n.pendingEatGemScore=0,n.pendingDailyMissionScore=0,n.isReachTargetScore=!1,n.losingReason=null,n.updateBlitzHighScoreTimer=null,n.fireworks=void 0,n.bonusScoreAnimation=void 0,n.totalScoreAnimation=void 0,n.encouragingAnimation=void 0,n.dailyMissionNoticeAnimation=void 0,n.levelHandler=void 0,n.tileManager=void 0,n.modeManager=void 0,n.itemManager=void 0,n.boardManager=void 0,n.layoutManager=void 0,n.tutorialManager=void 0,n.missionsManager=void 0,n.animationManager=void 0,n.saveTimer=void 0,n.adsTimer=void 0,n.create=function(){e.prototype.create.call((0,Gi.Z)(n)),n.createBackground(Ri.Z.BACKGROUND.KEY),n.createHandler(),n.createManager(),n.fireworks=n.add.group(),n.createAnimations(),n.listenEvents()},n.run=function(){n.startGame(),n.checkAndAddShortcut(),n.isBlitzGameplay()&&n.events.emit(Ld.BLITZ_GAME_BEGIN),n.time.addEvent({delay:1e3,callback:function(){n.ads.showBannerAdAsync().catch((function(e){}))}}),n.audio.setMusicVolume(1),n.audio.playMusic()},n.eatDiamond=function(e){Li.emit(ki.COLLECT_DIAMONDS.EVENTS.COLLECT_DIAMONDS,{type:"diamond",value:e}),n.setDiamond(n.currentDiamond+e)},n.eatScore=function(e){n.currentScore+=e,n.pendingEatGemScore-=e,n.pendingEatGemScore<0&&(n.pendingEatGemScore=0);var t=n.levelHandler.targetScore;n.currentScore>=t&&!n.isReachTargetScore&&(n.runEncouragingAnimation(pu.CONGRATULATION),n.audio.playSound(Fi.Z.CONGRATULATION)),n.setScore(n.currentScore),n.setBlitzHighScore()},n.die=function(e,t){var i;n.tileManager.isSelectable=!1,n.tileManager.isUseableItem=!1,n.losingReason=t||Kp.NOT_ENOUGH_SCORE,n.clearMove(),n.runGameOverAnimation(t),n.analytics.levelFail(e,n.currentScore);var a=null!=(i=n.match.getMatchState().profiles[n.player.getPlayerId()].rescued)?i:0;n.updateReachScoreTask(),n.time.addEvent({delay:ev.DelayFinishGame,callback:function(){var e=a<$g.MaxRescueCount;tv.Enabled&&e?n.layoutManager.showRescueScreen():n.endGame()}})},n.rescued=function(){n.runStartLevelAnimation(),n.handleProfileDataOnRescue(),n.isBlitzGameplay()&&(n.events.emit(Ld.BLITZ_GAME_RESCUE),n.losingReason===Kp.BLITZ_OUT_OF_TIME)?n.time.addEvent({delay:ev.DelayStart,callback:function(){n.tileManager.isSelectable=!0,n.tileManager.isUseableItem=!0,n.tileManager.isFirstInteraction=!0,n.tileManager.isBlitzTimerOver=!1,n.updateMove()}}):(n.setScore(n.prevScore),n.initManager(),n.time.addEvent({delay:ev.DelayStart,callback:function(){n.startManager(),n.updateMove()}}))},n.replay=function(){n.clearMove();var e=n.match.getMatchState();n.gameplayMode=e.mode,n.isBlitzGameplay()&&n.events.emit(Ld.BLITZ_GAME_BEGIN),n.startGame()},n.levelUp=(0,s.Z)(h().mark((function e(){var t,i,a,r;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.stopManager(),t=n.levelHandler,i=t.targetScore,a=t.level,n.levelHandler.up(n.currentScore)){e.next=6;break}return n.die(a),e.abrupt("return");case 6:if(Li.emit(ki.PASS_LEVELS.EVENTS.PASS_LEVEL,{type:"level",value:1}),n.updateReachScoreTask(),n.analytics.levelComplete(a,n.currentScore),n.clearMove(!0),n.prevTargetScore=i,n.prevScore=n.currentScore,n.setScore(n.currentScore),r=a+1,!(n.ads.canbeShowInterstitialAd()&&r>=ev.StartAdAtLevel)){e.next=17;break}return e.next=17,n.handleShowAdWhenNextLevel();case 17:n.fireFireworks(),n.runStartLevelAnimation(),n.time.addEvent({delay:ev.DelayLevelUp,callback:n.handleNextLevel});case 20:case"end":return e.stop()}}),e)}))),n.handleNextLevel=function(){n.initManager(),n.startManager(),n.updateMove(),n.handleSendLevelCompleteMessage(),n.handlePostTournamentScore(),n.resetRescueCountEachLevel();var e=n.levelHandler.level;n.analytics.levelStart(e,n.currentScore)},n.handleSendLevelCompleteMessage=function(){if(n.match.getMatchState().mode===Ao.CHALLENGE_FRIEND)n.facebook.getContextID()},n.handleShowAdWhenNextLevel=(0,s.Z)(h().mark((function e(){var t,i;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n.levelHandler.level>=ev.StartAdAtLevel)){e.next=24;break}if(n.audio.pauseMusic(),n.audio.muteAll(),t=null,!n.ads.canbeShowInterstitialAd()){e.next=22;break}return e.prev=6,t=n.game.globalScene.time.delayedCall(200,(function(){n.game.globalScene.screen.open(Pi.o4.NOTIFY_SCREEN,{message:n.lang.Text.LOADING,duration:0,loading:!0})})),e.next=10,new(u())((function(e,t){var i;null==(i=n.adsTimer)||i.remove(),n.adsTimer=n.time.delayedCall(nv.Timeout,t),n.ads.getAdStatus(GameCore.Ads.Types.INTERSTITIAL)===GameCore.Ads.Status.LOADING?n.ads.events.once(GameCore.Ads.Events.LOADED,e):n.ads.preloadInterstitialAdAsync().then(e).catch(t)}));case 10:return e.next=12,n.ads.showInterstitialAdAsync();case 12:e.next=17;break;case 14:e.prev=14,e.t0=e.catch(6);case 17:return e.prev=17,null==(i=t)||i.remove(),n.ads.preloadInterstitialAdAsync().catch((function(){})),n.game.globalScene.screen.close(Pi.o4.NOTIFY_SCREEN),e.finish(17);case 22:n.audio.unmuteAll(),n.audio.playMusic();case 24:case"end":return e.stop()}}),e,null,[[6,14,17,22]])}))),n.handleSleepGameScene=function(){n.updateBlitzHighScoreTimer&&(n.updateBlitzHighScoreTimer.remove(),n.updateBlitzHighScoreTimer=null),n.sound.stopAll()},n.updateScore=(0,Z.D)((function(){var e,t=n.player.getPlayerId(),i=n.match.getMatchState().profiles,a=i[t];n.storage.setStorageData("match","profiles",(0,r.Z)({},i,((e={})[t]=(0,r.Z)({},a,{score:n.currentScore,diamond:n.currentDiamond}),e))),n.storage.setStorageData("match","customData",{level:n.levelHandler.level})}),1e3),n.updateMove=function(e){var t;void 0===e&&(e=!1),$g.ContinueSingleMatchEnabled&&(n.gameplayMode!==Ao.SINGLE&&n.gameplayMode!==Ao.BLITZ||(null==(t=n.saveTimer)||t.remove(),n.saveTimer=n.time.addEvent({delay:e?0:1500,callback:function(){var e;if(n.tileManager.isCanMove()){var t=n.boardManager.processGravityModesForTileMap(),i=GameCore.Utils.Hash.encodeMap(t,gh.HASH),a=n.match.getMatchState(),s=n.player.getPlayerId(),o=n.levelHandler.level,c=n.currentDiamond,u=a.profiles[s];n.gameplayMode===Ao.SINGLE&&n.levelHandler.saveLevel(n.currentScore+n.pendingEatGemScore,i),n.storage.setStorageData("match","profiles",(0,r.Z)({},a.profiles,((e={})[s]=(0,r.Z)({},u,{score:n.currentScore+n.pendingEatGemScore,diamond:c,fen:i}),e))),n.storage.setStorageData("match","customData",{level:o})}}})))},n.clearMove=function(e){var t;void 0===e&&(e=!1);var i=n.levelHandler.level,a=n.match.getMatchState(),s=a.profiles,o=n.player.getPlayerId(),c=s[o];n.storage.setStorageData("match","customData",{level:i}),n.storage.setStorageData("match","profiles",(0,r.Z)({},a.profiles,((t={})[o]=(0,r.Z)({},c,{score:n.currentScore,diamond:n.currentDiamond}),t))),n.gameplayMode===Ao.SINGLE&&(e?n.levelHandler.saveLevel(n.currentScore,""):n.levelHandler.clearFen())},n}(0,o.Z)(t,e);var n=t.prototype;return n.preload=function(){this.events.on(Phaser.Scenes.Events.WAKE,this.run),this.events.on(Phaser.Scenes.Events.CREATE,this.run),this.events.on(Phaser.Scenes.Events.SLEEP,this.handleSleepGameScene)},n.createHandler=function(){this.levelHandler=new up(this)},n.initHandler=function(){this.levelHandler.init(),this.initBlitzHighScore()},n.createManager=function(){this.layoutManager=new Yg(this),this.tileManager=new lf(this),this.modeManager=new yp(this),this.itemManager=new Fd(this),this.boardManager=new td(this),this.tutorialManager=new Lf(this),this.missionsManager=new mp(this),this.animationManager=new Zh(this)},n.initManager=function(){this.boardManager.init(),this.tileManager.init(),this.modeManager.init(),this.itemManager.init(),this.tutorialManager.init(),this.missionsManager.init(),this.animationManager.init(),this.layoutManager.init()},n.stopManager=function(){this.boardManager.stop(),this.tileManager.stop(),this.modeManager.stop(),this.itemManager.stop(),this.tutorialManager.stop(),this.missionsManager.stop(),this.animationManager.stop(),this.layoutManager.stop()},n.startManager=function(){this.tutorialManager.start(),this.boardManager.start(),this.tileManager.start(),this.modeManager.start(),this.itemManager.start(),this.missionsManager.start(),this.animationManager.start(),this.layoutManager.start()},n.listenEvents=function(){var e=this;Li.on(Ld.RESCUE,this.rescued),Li.on(Ld.REPLAY,this.replay),this.events.on(gh.EVENTS.GRAVITY_ANIMATION_FINISHED,(function(){e.updateMove(!0)})),Li.on(ki.EVENTS.TASK_FINISHED,this.dailyMissionNoticeAnimation.showDailyMissionCompleteText)},n.startGame=function(){var e=this,t=this.match.getMatchState();this.gameplayMode=t.mode,this.prevScore=ev.StartScore,this.prevTargetScore=0,this.pendingEatGemScore=0,this.pendingDailyMissionScore=0,this.initHandler(),this.initManager();var n=this.player.getDiamond(),i=ev.StartDiamonds;if("number"===typeof n&&n>ev.StartDiamonds&&(i=n),this.gameplayMode===Ao.SINGLE&&$g.ContinueSingleMatchEnabled){var a=this.levelHandler.getFenLevel();if(a>0){var r=this.levelHandler.getFenScore();this.prevScore=r,this.levelHandler.level=a,this.levelHandler.setConfig(a)}}this.setDiamond(i),this.setScore(this.prevScore),this.runStartLevelAnimation(),this.audio.playSound(Fi.Z.START_GAME),this.time.addEvent({delay:ev.DelayStart,callback:function(){e.startManager();var t=e.levelHandler.level;e.analytics.levelStart(t,e.currentScore),e.checkContinueSingleMatch()}})},n.checkContinueSingleMatch=function(){this.gameplayMode===Ao.SINGLE&&(this.tileManager.isCanMove()||this.tileManager.updateFreezeTiles(!0))},n.createAnimations=function(){this.bonusScoreAnimation=new du(this),this.totalScoreAnimation=new Eu(this),this.encouragingAnimation=new vu(this),this.dailyMissionNoticeAnimation=new Jg(this)},n.runStartLevelAnimation=function(){var e=this.levelHandler,t=e.targetScore,n=e.level,i=this.layoutManager.objects,a=i.startLevelBoard,r=i.header,s=t;this.isBlitzGameplay()&&(s=r.topBar.blitzHighScoreBar.score),this.setLevelTitle(this.levelHandler.level),a.setLevel(n),a.setScoreTarget(s),n>1&&this.audio.playSound(Fi.Z.START_LEVEL),a.runAnimation()},n.runGameOverAnimation=function(e){this.audio.playSound(Fi.Z.YOU_LOSE),this.layoutManager.objects.gameOverBoard.runAnimation(e)},n.runBonusScoreAnimation=function(e){this.bonusScoreAnimation.setBonusScore(e),this.bonusScoreAnimation.runAnimation()},n.runTotalScoreAnimation=function(e,t,n){this.totalScoreAnimation.setTotalScore(e),this.totalScoreAnimation.runAnimation(t,n)},n.runEncouragingAnimation=function(e){this.encouragingAnimation.runAnimation(e),this.fireFireworks()},n.createFirework=function(){var e=new ji(this);return this.fireworks.add(e),e},n.fireFireworks=function(){var e=this,t=this.layoutManager.objects.header.topBar;this.tweens.addCounter({duration:300,repeat:Phaser.Math.RND.between(3,6),onRepeat:function(){var n=e.fireworks.getMatching("visible",!1),i=n[0];n.length<1&&(i=e.createFirework()),i.randomColor();var a=Phaser.Math.RND.between(50,e.gameZone.width-50);i.fire(a,e.gameZone.height,t.y+100)}})},n.setScore=function(e){var t=this.layoutManager.objects.header.topBar,n=t.currentScoreBar,i=t.targetScoreBar;n.setScore(e),this.currentScore=e,this.updateScore();var a=this.levelHandler.targetScore;this.isReachTargetScore=this.currentScore>=a;var r=Phaser.Math.Percent(this.currentScore,this.prevTargetScore,a);i.setProcess(r)},n.addPendingEatGemScore=function(e){this.pendingEatGemScore+=e},n.addPendingDailyMissionScore=function(e){this.pendingDailyMissionScore+=e},n.setLevelTitle=function(e){this.layoutManager.objects.header.topBar.currentScoreBar.setLevelTitle(e)},n.useDiamond=function(e){var t=this.currentDiamond-e,n=t<0?0:t;this.setDiamond(n)},n.setDiamond=function(e){this.currentDiamond=e,this.player.setCustomData("diamond",e),this.match.getMatchState().profiles[this.player.getPlayerId()].diamond=e,this.layoutManager.objects.diamondBar.setValue(e)},n.setTargetScore=function(e){this.layoutManager.objects.header.topBar.targetScoreBar.setScore(e)},n.initBlitzHighScore=function(){if(this.isBlitzGameplay()){var e=this.layoutManager.objects.header.topBar.blitzHighScoreBar,t=this.player.getCustomData("blitzHighScore");"number"===typeof t&&t>=0?e.setScore(t):e.setScore(0)}},n.setBlitzHighScore=function(){if(this.isBlitzGameplay()){var e=this.layoutManager.objects.header.topBar.blitzHighScoreBar;this.currentScore<e.score||e.setScore(this.currentScore)}},n.endGame=function(){this.clearMove(),this.prevTargetScore=0,this.game.globalScene.events.emit(ui.K.SWITCH,ui.C.GAME_OVER_SCENE)},n.handlePostTournamentScore=function(){var e=(0,s.Z)(h().mark((function e(){var t,n,i;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.match.getMatchState(),n=t.mode,i=t.customData.tournamentGameplayMode,n===Ao.TOURNAMENT&&i===Ao.SINGLE){e.next=5;break}return e.abrupt("return");case 5:return e.prev=5,e.next=8,FBInstant.tournament.postScoreAsync(this.currentScore);case 8:e.next=13;break;case 10:e.prev=10,e.t0=e.catch(5);case 13:case"end":return e.stop()}}),e,this,[[5,10]])})));return function(){return e.apply(this,arguments)}}(),n.resetRescueCountEachLevel=function(){var e,t=this.match.getMatchState(),n=this.player.getPlayerId(),i=t.profiles[n];this.storage.setStorageData("match","profiles",(0,r.Z)({},t.profiles,((e={})[n]=(0,r.Z)({},i,{rescued:0}),e)))},n.handleProfileDataOnRescue=function(){var e,t,n=this.match.getMatchState(),i=this.player.getPlayerId(),a=n.profiles[i],s=null!=(e=a.rescued)?e:0;this.storage.setStorageData("match","profiles",(0,r.Z)({},n.profiles,((t={})[i]=(0,r.Z)({},a,{fen:"",rescued:s+1}),t)))},n.checkAndAddShortcut=function(){this.game.player.getPlayer().isUserNew||this.match.getMatchState().mode!=Ao.TOURNAMENT&&this.facebook.attemptToAddShortcut()},n.update=function(e,t){this.layoutManager.updateUI(t)},n.isBlitzGameplay=function(){if(this.gameplayMode===Ao.BLITZ)return!0;if(this.gameplayMode===Ao.TOURNAMENT&&this.match.getMatchState().customData.tournamentGameplayMode===Ao.BLITZ)return!0;return!1},n.updateReachScoreTask=function(){Li.emit(ki.REACH_SCORE.EVENTS.ADD_SCORE,{type:"score",value:this.pendingDailyMissionScore}),this.pendingDailyMissionScore=0},n.sendTestDailyNotification=function(e){Xg.sendTestDailyNotification(e)},t}(Bi.Z),av=iv;var rv=av,sv=Ui.Z.DEFAULT,ov=sv.KEY,cv=sv.FRAME,uv=function(e){function t(t){var n;return(n=e.call(this,t,ov,cv.BUTTON_YELLOW_CIRCLE)||this).scene=void 0,n.scene=t,n.button.setSize(87,68).setDisplaySize(87,68),n.setName("Home"),n.createIcon(),n}return(0,o.Z)(t,e),t.prototype.createIcon=function(){var e=this.scene.add.image(0,0,ov,cv.ICON_FLAT_HOME);e.setSize(43,43).setDisplaySize(43,43),this.add(e),Phaser.Display.Align.In.Center(e,this)},t}(ga.Z),lv=uv,hv=Ui.Z.DEFAULT,dv=hv.KEY,pv=hv.FRAME,fv=function(e){function t(t){var n;return(n=e.call(this,t,dv,pv.BUTTON_YELLOW_CIRCLE)||this).scene=void 0,n.scene=t,n.button.setSize(87,68).setDisplaySize(87,68),n.setName("Share"),n.createIcon(),n}return(0,o.Z)(t,e),t.prototype.createIcon=function(){var e=this.scene.add.image(0,0,dv,pv.ICON_FLAT_SHARE);e.setSize(39,39).setDisplaySize(39,39),this.add(e),Phaser.Display.Align.In.Center(e,this,-2,-1)},t}(ga.Z),mv=Ui.Z.DEFAULT,gv=mv.KEY,vv=mv.FRAME,yv=function(e){function t(t){var n;return(n=e.call(this,t,gv,vv.BUTTON_GREEN)||this).scene=void 0,n.scene=t,n.button.setWorldSize(170,72),n.setName("Login"),n.createLabel(),n}return(0,o.Z)(t,e),t.prototype.createLabel=function(){var e=25;switch(this.scene.lang.getCurrentLanguage()){case"ru":e=20;break;case"ja":e=23}var t=this.scene.make.bitmapText({font:Sa.Z.PRIMARY.KEY,size:this.scene.fontSize(e),text:this.scene.lang.Text.LOGIN});t.setCenterAlign(),Phaser.Display.Align.In.Center(t,this),this.add(t)},t}(ga.Z),Ev=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n.homeButton=void 0,n.loginButton=void 0,n.shareButton=void 0,n.scene=t,n.setName("FooterBar"),n.createButtons(),n.scene.add.existing((0,Gi.Z)(n)),n}(0,o.Z)(t,e);var n=t.prototype;return n.setLayout=function(e){this.loginButton.setVisible(e),e?(this.homeButton.x=-140,this.shareButton.x=140):(this.homeButton.x=-70,this.shareButton.x=70)},n.createButtons=function(){this.createHomeButton(),this.createLoginButton(),this.createShareButton()},n.createHomeButton=function(){this.homeButton=new lv(this.scene),this.add(this.homeButton)},n.createLoginButton=function(){this.loginButton=new yv(this.scene),this.add(this.loginButton)},n.createShareButton=function(){this.shareButton=new fv(this.scene),this.add(this.shareButton)},t}(Phaser.GameObjects.Container),Av=Ev,Sv=n(598),Tv=n.n(Sv),bv=n(620),Iv=(function(e){function t(t){var n;return(n=e.call(this,t,"UpdateAbleObject")||this).updateInfo=void 0,n}(0,o.Z)(t,e)}(Phaser.GameObjects.GameObject),function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).classType=void 0,i.listConfigs=void 0,i.padding=void 0,i.startObjectIndex=void 0,i.endObjectIndex=void 0,i.listObjects=void 0,i.classType=n.classType,i.listConfigs=n.listConfigs,i.padding=n.padding?n.padding:0,i.objects.classType=i.classType,i.updateConfig(i.listConfigs),i}(0,o.Z)(t,e);var n=t.prototype;return n.reset=function(){e.prototype.reset.call(this),this.killAndHideAll()},n.getChildren=function(){var e;return Oe()(e=this.listObjects).call(e,(function(e){return void 0!=e&&e.active}))},n.updateConfig=function(e){var t;this.reset(),this.listConfigs=e,this.listObjects=mr()(t=new Array(e.length)).call(t,void 0),this.addObjectIndex(0,0);var n=this.getEndObjectIndex();this.addObjectIndex(1,n),this.startObjectIndex=this.getStartObjectIndex(),this.endObjectIndex=this.getEndObjectIndex(),this.updateMaxHeight(),this.value=this.marginTop},n.killAndHideAll=function(){var e,t=this;this.listObjects instanceof Array&&Re()(e=this.listObjects).call(e,(function(e){void 0!==e&&t.objects.killAndHide(e)}))},n.setItemPosition=function(e,t){var n=e.height;e.setPosition(0,n/2+(n+this.padding)*t-this.height/2)},n.updateMaxHeight=function(){return this.maxHeight=Math.max(this.listConfigs.length*(this.objHeight+this.padding)-this.padding+this.marginBottom-this.height,0)},n.updateObject=function(e){this.objects.incY(e);var t=this.getStartObjectIndex(),n=this.getEndObjectIndex();t!=this.startObjectIndex&&(t>this.startObjectIndex?this.killObjectIndex(this.startObjectIndex,t-1):this.addObjectIndex(t,this.startObjectIndex-1),this.startObjectIndex=t),n!=this.endObjectIndex&&(n<this.endObjectIndex?this.killObjectIndex(n+1,this.endObjectIndex):this.addObjectIndex(this.endObjectIndex+1,n),this.endObjectIndex=n)},n.killObjectIndex=function(e,t){for(var n=e;n<=t;n++){var i=this.listObjects[n];i&&(this.objects.killAndHide(i),this.listObjects[n]=void 0)}},n.addObjectIndex=function(e,t){for(var n=e;n<=t;n++){var i=this.padding,a=this.listConfigs;if(n>=a.length)return;var r=this.objects.getFirstDead(!0),s=r.height,o=s/2+(s+i)*n+this.value-this.height/2;r.updateInfo(a[n]),r.setPosition(0,o),r.setActive(!0),r.setVisible(!0),this.addAt(r),this.listObjects[n]=r}},n.getStartObjectIndex=function(){var e=this.objHeight,t=this.padding;return Math.max(Math.floor((0-this.value)/(e+t)),0)},n.getEndObjectIndex=function(){var e=this.objHeight,t=this.padding,n=this.listConfigs,i=e+t;return Math.min(Math.floor((this.height-this.value)/i),n.length)},(0,re.Z)(t,[{key:"objHeight",get:function(){var e=this.objects.getChildren();return 0==e.length?this.maxHeight=0:e[0].height}}]),t}(bv.Z)),wv={targets:[],props:{alpha:{start:0,to:1,duration:500,ease:Phaser.Math.Easing.Cubic.Out},scale:{start:.8,to:1,duration:1e3,ease:Phaser.Math.Easing.Elastic.Out,easeParams:[.1,.45]},y:{start:0,to:0,duration:500,ease:Phaser.Math.Easing.Back.Out}},delay:0},Cv=function(e){function t(t){return e.call(this,wv,t)||this}return(0,o.Z)(t,e),t}(na.Z),xv=Ui.Z.DEFAULT,Ov=xv.KEY,_v=xv.FRAME,Rv=function(e){function t(t,n){var i;return(i=e.call(this,t)||this).button=void 0,i.avatar=void 0,i.rankIcon=void 0,i.rankText=void 0,i.username=void 0,i.score=void 0,i.scoreText=void 0,i.background=void 0,i.showPopUp=void 0,i.showItems=void 0,i.payload=void 0,i.handleChallengeFriend=function(){i.scene.match.context.choose.processAsync({playerId:i.payload.playerId,fallbackSingleMode:!1})},i.createBackground(),i.updateSize(),i.createAvatar(),i.createRank(),i.createUsername(),i.createScore(),i.createButton(),n&&i.updateInfo(n),i.scene.add.existing((0,Gi.Z)(i)),i}(0,o.Z)(t,e);var n=t.prototype;return n.updateInfo=function(e){this.payload=(0,r.Z)({scoreRight:!0,isHighlight:!1,useChallenge:!1},e),this.updateBackground(),this.updateAvatar(),this.updateRank(),this.updateUsername(),this.updateScore(),this.updatePosition()},n.updatePosition=function(){var e=this.payload.scoreRight,t=this.payload.useChallenge;this.button.setVisible(!!t),e?Phaser.Display.Align.To.RightCenter(this.score,this.avatar,120):Phaser.Display.Align.To.RightCenter(this.score,this.avatar,80)},n.createBackground=function(){this.background=this.scene.make.image({key:Ov,frame:_v.LEADERBOARD_BG_LIGHT}),this.background.setWorldSize(264,56),this.add(this.background)},n.updateBackground=function(){var e="";e=this.payload.isHighlight?_v.LEADERBOARD_BG_LIGHT:_v.LEADERBOARD_BG_DARK,this.background.setFrame(e),this.background.setWorldSize(264,56)},n.updateSize=function(){var e=this.background,t=e.width,n=e.height;this.setSize(t,n)},n.createAvatar=function(){this.avatar=new Lo(this.scene,{key:Ov,frame:_v.AVATAR_FRAME_YELLOW_SMALL,background:_v.AVATAR_BG_YELLOW_SMALL,width:47.5,height:49.5}),this.add(this.avatar),Phaser.Display.Align.In.LeftCenter(this.avatar,this,-10)},n.updateAvatar=function(){var e=this.payload,t=e.playerId,n=e.photo;this.avatar.loadPhoto(t,n,40)},n.createRank=function(){this.createRankIcon(1),this.createRankText(1)},n.updateRank=function(){var e=this.payload.rank;this.updateRankIcon(e),this.updateRankText(e)},n.getRankIconFrame=function(e){var t=_v.ICON_FLAG;switch(e){case 1:t=_v.ICON_CUP_GOLD;break;case 2:t=_v.ICON_CUP_SILVER;break;case 3:t=_v.ICON_CUP_COPPER}return t},n.createRankIcon=function(e){var t=this.getRankIconFrame(e);this.rankIcon=this.scene.make.image({key:Ov,frame:t}),t!=_v.ICON_FLAG?this.rankIcon.setWorldSize(36,23):this.rankIcon.setWorldSize(27,27),this.add(this.rankIcon);var n=e<=3?22:28;Phaser.Display.Align.In.Center(this.rankIcon,this.avatar,0,n)},n.updateRankIcon=function(e){var t=this.getRankIconFrame(e);this.rankIcon.setFrame(t),t!=_v.ICON_FLAG?this.rankIcon.setWorldSize(46,30):this.rankIcon.setWorldSize(27,27)},n.createRankText=function(e){this.rankText=this.scene.make.bitmapText({font:Sa.Z.PRIMARY.KEY,size:this.scene.fontSize(15),text:""+e,origin:{x:.5,y:.5}}),this.add(this.rankText),Phaser.Display.Align.In.Center(this.rankText,this.rankIcon,0,-2)},n.updateRankText=function(e){this.rankText.setText(""+e)},n.getShortName=function(e){var t=e.substring(0,7);return t.split(" ")[0]||t},n.createUsername=function(){this.username=this.scene.make.text({text:this.getShortName("FRIEND NAME"),style:{fontFamily:Sa.Z.FONT_FAMILY,fontSize:"15px",fontStyle:"bold"}}),this.username.setTint(10317116),this.username.setHighQuality(),Phaser.Display.Align.In.LeftCenter(this.username,this.avatar,-53),this.add(this.username)},n.updateUsername=function(){var e=this.payload.name;this.username.setText(this.getShortName(e))},n.createScore=function(){this.score=this.scene.add.container(),this.scoreText=this.scene.make.bitmapText({font:Sa.Z.PRIMARY.KEY,size:this.scene.fontSize(18),text:"132500",origin:{x:.5,y:.5}}),this.scoreText.setTint(6565e3);var e=this.scene.make.image({key:Ov,frame:_v.ICON_CUP_MINI});e.setWorldSize(17,18),this.score.add([this.scoreText,e]);var t=-20;Phaser.Display.Align.In.LeftCenter(this.scoreText,e,t),this.add(this.score),t=10,Phaser.Display.Align.In.Center(this.score,this,t)},n.updateScore=function(){var e=this.payload.score;this.scoreText.setText(e)},n.createButton=function(){this.button=new ga.Z(this.scene,Ov,_v.BUTTON_GREEN_MINOR_MINI,54,34.5),this.button.setName("ChallengeFriend");var e=this.scene.make.bitmapText({font:Sa.Z.PRIMARY.KEY,size:this.scene.fontSize(18),text:this.scene.lang.Text.PLAY});Phaser.Display.Align.In.Center(e,this.button,0,-2),this.button.add(e),Phaser.Display.Align.In.RightCenter(this.button,this,-2),this.add(this.button),this.button.onClick=this.handleChallengeFriend},n.runShowPopUpAnimation=function(e,t){this.scene.tweens.killTweensOf(this),this.showPopUp=new Cv({targets:[this],delay:e,duration:t,props:{y:{start:this.y+70,to:this.y}}}),this.showPopUp.play()},n.runShowItemAnimation=function(e,t){var n=this.getAll();this.scene.tweens.killTweensOf(n),this.showItems=new ud({targets:n,duration:t,delay:this.scene.tweens.stagger(50,{start:e+50}),props:{scale:{duration:1e3,getStart:function(e){return.8*e.scale},getEnd:function(e){return e.scale},ease:Phaser.Math.Easing.Elastic.Out,easeParams:[.1,.45]}}}),this.showItems.play()},n.runShowUpAnimation=function(e,t){void 0===e&&(e=0),void 0===t&&(t=300);var n=100*e;this.runShowPopUpAnimation(n,t),this.runShowItemAnimation(n,t)},t}(Phaser.GameObjects.Container);function Pv(e,t){var n="undefined"!==typeof I()&&C()(e)||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){var n;if(!e)return;if("string"===typeof e)return kv(e,t);var i=A()(n=Object.prototype.toString.call(e)).call(n,8,-1);"Object"===i&&e.constructor&&(i=e.constructor.name);if("Map"===i||"Set"===i)return T()(e);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return kv(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var i=0;return function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function kv(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var Mv=function(e){function t(t){var n;(n=e.call(this,t)||this).scene=void 0,n.currentPlayerId=void 0,n.scroller=void 0,n.scene=t;var i=n.scene.player;return n.currentPlayerId=i.getPlayerId(),n.createReuseScroller(),n.scene.add.existing((0,Gi.Z)(n)),n}(0,o.Z)(t,e);var n=t.prototype;return n.createReuseScroller=function(){this.scroller=new Iv(this.scene,{classType:Rv,listConfigs:[],width:280,height:335,padding:10,marginTop:10,marginBottom:10}),this.scene.renderer instanceof Phaser.Renderer.WebGL.WebGLRenderer&&this.scroller.createBound(Ui.Z.DEFAULT.KEY,Ui.Z.DEFAULT.FRAME.BLANK,40,16643027),this.scroller.createMask(),this.scroller.setPosition(0,0),this.add(this.scroller)},n.updateData=function(e){var t=this.scene.layoutManager.objects.board,n=on()(e)||[];if(n.length<1)return this.scene.isSwitchable=!0,void t.showMessage(!0,this.scene.lang.Text.LB_IS_EMPTY);for(var i,a=[],r=Pv(un()(n).call(n,(function(e,t){return+t.score-+e.score})));!(i=r()).done;){var s=i.value,o=s.playerId,c=s.photo,u=s.score,l=s.name,h=s.rank;if(o){var d=this.currentPlayerId===o,p={playerId:o,photo:c,name:l,rank:h,score:u,scoreRight:this.scene.tabId===Vo,useChallenge:!d&&this.scene.tabId===Wo,isHighlight:d};a.push(p)}}this.scroller.updateConfig(a),this.showLeaders()},n.removeLeaders=function(){this.scroller.updateConfig([])},n.getLeaders=function(){return this.scroller.getChildren()},n.showLeaders=function(){var e=this,t=this.scene.layoutManager.objects.board,n=this.getLeaders();if(n.length<1)return this.scene.isSwitchable=!0,void t.showMessage(!0,this.scene.lang.Text.LB_IS_EMPTY);for(var i=Math.min(n.length,6),a=0;a<i;a++){var r=n[a];r&&(r.setVisible(!0),r.runShowUpAnimation(a,300))}var s=300+100*i+250;this.scene.time.delayedCall(s,(function(){e.scene.isSwitchable=!0,e.scroller.setEnable(!0)}))},t}(Phaser.GameObjects.Container),Dv=Mv,Nv=Ui.Z.DEFAULT,Lv=(Nv.KEY,Nv.FRAME,function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n.scene=t,n}return(0,o.Z)(t,e),t}(Phaser.GameObjects.Container)),Bv=Ui.Z.DEFAULT,Gv=Bv.KEY,Uv=Bv.FRAME,Fv=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n.background=void 0,n.tabs=void 0,n.leaders=void 0,n.loading=void 0,n.message=void 0,n.messageAnimation=void 0,n.countdownContainer=void 0,n.countdownText=void 0,n.countdownBackground=void 0,n.countdownTimer=void 0,n.countdownTime=void 0,n.leaderboardDataCache=void 0,n.lastFetchTime=0,n.verificationKey=void 0,n.scene=t,n.setSize(310,430),n.createBackground(),n.createLoading(),n.createMessage(),n.createContents(),n.createAnimation(),n.verificationKey=GameCore.Utils.String.generateObjectId(),n.scene.add.existing((0,Gi.Z)(n)),n}(0,o.Z)(t,e);var n=t.prototype;return n.showLoading=function(e){this.loading.setVisible(e),this.showMessage(!1)},n.showMessage=function(e,t){this.message.setVisible(e),t&&(this.message.setText(t),this.messageAnimation.play())},n.createBackground=function(){this.background=new Sr(this.scene,0,0,310,430),this.add(this.background)},n.createLoading=function(){this.loading=new ns.Z(this.scene),this.loading.setTint(12237498),this.loading.setWorldSize(113,113),this.add(this.loading),Phaser.Display.Align.In.Center(this.loading,this.background)},n.createMessage=function(){this.message=this.scene.make.bitmapText({font:Sa.Z.PRIMARY.KEY,size:this.scene.fontSize(18),origin:{x:.5,y:.5}}),this.message.setTint(10317116),this.add(this.message),Phaser.Display.Align.In.Center(this.message,this.background)},n.createContents=function(){this.createLeaders(),this.createTitle(),this.createCountdown()},n.createLeaders=function(){this.leaders=new Dv(this.scene),this.add(this.leaders),Phaser.Display.Align.In.Center(this.leaders,this.background,0,10)},n.createTitle=function(){var e=this.scene.add.container(),t=this.scene.make.image({key:Gv,frame:Uv.RIBBON_SHORT});t.setWorldSize(271,81);var n=this.scene.lang.getCurrentLanguage(),i=this.scene.make.bitmapText({font:Sa.Z.PRIMARY.KEY,size:this.scene.fontSize("id"===n?25:30),text:this.scene.lang.Text.LEADERBOARDS});Phaser.Display.Align.In.Center(i,t,0,-10),e.add([t,i]),Phaser.Display.Align.In.TopCenter(e,this.background,0,5),this.add(e)},n.createTabs=function(){this.tabs=new Lv(this.scene),this.add(this.tabs),Phaser.Display.Align.In.TopCenter(this.tabs,this.background,0,-55)},n.createAnimation=function(){this.messageAnimation=new la.Z({targets:[this.message],duration:60,repeat:2})},n.createCountdown=function(){this.countdownContainer=this.scene.add.container(),this.countdownBackground=this.scene.make.image({key:Gv,frame:Uv.MISSION_CLOCK_BG_EXTENDED}),this.countdownBackground.setWorldSize(125,27);var e=this.scene.make.image({key:Gv,frame:Uv.ICON_CLOCK});e.setWorldSize(26,28),Phaser.Display.Align.In.LeftCenter(e,this.countdownBackground,6),this.countdownText=this.scene.make.bitmapText({font:Sa.Z.PRIMARY.KEY,size:this.scene.fontSize(20),text:"00:00:00",origin:{x:0,y:.5}}),this.countdownText.setTint(11436629),this.countdownContainer.add([this.countdownBackground,e,this.countdownText]),this.add(this.countdownContainer),this.countdownText.setPosition(-22,-1.3),Phaser.Display.Align.In.TopCenter(this.countdownContainer,this,0,-45)},n.getLeaderboardDataAsync=function(){var e=(0,s.Z)(h().mark((function e(){var t;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.leaderboardDataCache&&Date.now()-this.lastFetchTime<5e3)){e.next=2;break}return e.abrupt("return",this.leaderboardDataCache);case 2:return e.next=4,fc();case 4:if(t=e.sent,this.validateLeaderboardData(t)){e.next=8;break}return e.abrupt("return",null);case 8:return this.leaderboardDataCache=t,this.lastFetchTime=Date.now(),e.abrupt("return",t);case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.updateLeaderboardCountdown=function(){var e=(0,s.Z)(h().mark((function e(){var t,n,i,a,r,s,o,c;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.stopCountdownTimer(),this.setCountdownTextStyleToClock(),this.countdownTime=0,this.countdownText.setText(this.scene.lang.Text.LOADING_NO_DOTS),t=""+this.verificationKey,e.prev=5,e.next=8,this.getLeaderboardDataAsync();case 8:if(n=e.sent,t===this.verificationKey){e.next=11;break}return e.abrupt("return");case 11:if(n){e.next=13;break}throw new Error("Invalid leaderboard data");case 13:if(i=n.createdAt,this.validateDateString(i)){e.next=17;break}throw new Error("Invalid created date");case 17:a=new Date,r=a.getTime(),s=60*a.getTimezoneOffset()*1e3,o=new Date(a.getFullYear(),a.getMonth()+1,1),c=o.getTime()-(r+s),this.setFormattedCountdown(c),this.startCountdownTimer(c),e.next=30;break;case 26:e.prev=26,e.t0=e.catch(5),this.countdownText.setText(this.scene.lang.Text.ENDING_SOON);case 30:case"end":return e.stop()}}),e,this,[[5,26]])})));return function(){return e.apply(this,arguments)}}(),n.validateLeaderboardData=function(e){return!(!e||"object"!==typeof e)&&("createdAt"in e&&this.validateDateString(e.createdAt))},n.validateDateString=function(e){if("string"!==typeof e)return!1;if(!/^(\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}.\d{3}Z)$/.test(e))return!1;var t=new Date(e);return!isNaN(t.getTime())},n.setFormattedCountdown=function(e){var t,n,i;if(e<1e3)return this.setCountdownTextStyleToEnding(),void this.countdownText.setText(this.scene.lang.Text.ENDING_SOON);var a=Math.floor(e/864e5);if(a>=1){this.setCountdownTextStyleToDay();var r=this.scene.lang.getText({key:"COUNTDOWN_DAY_X",variables:[a]});this.countdownText.setText(r)}else{var s=Math.floor(e%864e5/36e5),o=Math.floor(e%36e5/6e4),c=Math.floor(e%6e4/1e3),u=Tv()(t=s.toString()).call(t,2,"0")+":"+Tv()(n=o.toString()).call(n,2,"0")+":"+Tv()(i=c.toString()).call(i,2,"0");this.countdownText.setText(u)}},n.startCountdownTimer=function(e){var t=this;e>=864e5||e<1e3||(this.countdownTime=e,this.countdownTimer=this.scene.time.addEvent({delay:1e3,callback:function(){t.countdownTime-=1e3,t.setFormattedCountdown(t.countdownTime),t.countdownTime<=0&&t.stopCountdownTimer()},loop:!0}))},n.stopCountdownTimer=function(){this.countdownTimer&&this.countdownTimer.remove()},n.setCountdownTextStyleToClock=function(){var e=20,t=-22;switch(this.scene.lang.getCurrentLanguage()){case"id":e=20;break;case"ja":t=-25,e=18}this.countdownText.setPosition(t,-1.3),this.countdownText.setFontSize(this.scene.fontSize(e))},n.setCountdownTextStyleToEnding=function(){var e=18,t=-28;switch(this.scene.lang.getCurrentLanguage()){case"id":e=17,t=-38;break;case"ru":t=-40,e=16;break;case"ja":t=-40,e=15}this.countdownText.setPosition(t,-1.3),this.countdownText.setFontSize(this.scene.fontSize(e))},n.setCountdownTextStyleToDay=function(){var e=18;switch(this.scene.lang.getCurrentLanguage()){case"ja":e=15;break;case"ru":e=16}this.countdownText.setPosition(-37,-1.3),this.countdownText.setFontSize(this.scene.fontSize(e))},t}(Phaser.GameObjects.Container),Zv=Fv,Hv=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n.screen=void 0,n.board=void 0,n.footer=void 0,n.scene=t,n.screen=t.screen,n.createObjects(),n}(0,o.Z)(t,e);var n=t.prototype;return n.createObjects=function(){this.createMainContent(),this.createFooterBar()},n.createMainContent=function(){this.board=new Zv(this.scene)},n.createFooterBar=function(){this.footer=new Av(this.scene)},t}(ta),Yv=Hv,zv=function(e){function t(t){var n;return(n=e.call(this,t)||this).objects=void 0,n.objects=null,n}(0,o.Z)(t,e);var n=t.prototype;return n.alignUI=function(){if(null!==this.objects){var e=this.scene.gameZone,t=this.objects,n=t.board,i=t.footer;Phaser.Display.Align.In.Center(n,e,0,-20),Phaser.Display.Align.In.BottomCenter(i,e,0,-50)}},n.createGroups=function(){e.prototype.createGroups.call(this)},n.setUIObjects=function(t){e.prototype.setUIObjects.call(this,t),this.addUIObjectsToGroups()},n.addUIObjectsToGroups=function(){null!==this.objects&&this.addObjectForGuideUI()},n.addObjectForGuideUI=function(){this.objects},t}(qs),Vv=zv,Wv=function(e){function t(){return e.apply(this,arguments)||this}return(0,o.Z)(t,e),t.prototype.alignUI=function(){e.prototype.alignUI.call(this)},t}(Vv),Kv=Wv,jv=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n.scene=t,n}(0,o.Z)(t,e);var n=t.prototype;return n.createObjects=function(){this.objects=new Yv(this.scene)},n.createLayouts=function(){this.scene.world.isLandscape()?this.layout=new Kv(this.scene):this.layout=new Vv(this.scene),this.layout.setUIObjects(this.objects)},n.initUILogic=function(){var e=this.objects.footer;e.homeButton.onClick=this.scene.handleHomeClick,e.loginButton.onClick=this.scene.handleLogin,e.shareButton.onClick=this.scene.handleShare},n.updateUIState=function(){this.alignBoard(),this.alignFooterBar()},n.alignFooterBar=function(){var e=this.objects,t=e.footer,n=e.board,i=this.scene,a=i.gameZone,r=i.ads;t.setLayout(GameSDK.player.isGuest());var s=n.y+n.height/2+30,o=a.height-r.getSafeAreaBottom();t.setPosition(n.x,(s+o)/2-20)},n.alignBoard=function(){var e=this.objects.board,t=this.scene.gameZone;Phaser.Display.Align.In.Center(e,t,0,-40)},t}(oo),Xv=jv,qv=GameCore.Configs.LeadersBoard,Jv=function(e){function t(){for(var t,n,i=arguments.length,a=new Array(i),r=0;r<i;r++)a[r]=arguments[r];return(n=e.call.apply(e,O()(t=[this]).call(t,a))||this).layoutManager=void 0,n.tabId=void 0,n.offset=void 0,n.isRequesting=void 0,n.isSwitchable=void 0,n.run=function(){n.layoutManager.init(),n.layoutManager.start();var e=n.layoutManager.objects.board;n.isRequesting=!1,e.updateLeaderboardCountdown();var t=[{selector:yo,callback:function(t){if(n.scene.isVisible(ui.C.LEADERBOARD_SCENE)&&(n.isRequesting=t,e.showLoading(t),!1===t)){var i=n.game.stateStorage.getState(),a=vo(i);e.leaders.updateData(a)}}}];n.handleStateChange(t),n.selectWorldTab()},n.handleSelectWorldTab=function(){n.isRequesting||n.isSwitchable&&(n.isSwitchable=!1,n.selectWorldTab())},n.handlePlayWithFriend=(0,s.Z)(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n.match.context.choose.processAsync({playerId:n.player.getPlayerId(),fallbackSingleMode:!1});case 3:n.scene.switch(ui.C.GAME_SCENE),e.next=10;break;case 6:e.prev=6,e.t0=e.catch(0),n.game.globalScene.screen.open(Pi.o4.NOTIFY_SCREEN,{message:"Sorry, please try\nagain later.",loading:!1,duration:3e3});case 10:case"end":return e.stop()}}),e,null,[[0,6]])}))),n.handleHomeClick=function(){n.scene.switch(ui.C.DASHBOARD_SCENE)},n.handleLogin=(0,s.Z)(h().mark((function e(){var t,i;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.game.globalScene.screen.open(Pi.o4.NOTIFY_SCREEN,{message:n.lang.Text.LOADING,duration:0,loading:!0}),e.prev=1,e.next=4,GameSDK.player.signInManuallyAsync();case 4:if(e.sent){e.next=7;break}throw new Error("Failed to login");case 7:return t=GameSDK.player.getID(),i=n.player.getBestScore(),e.next=11,dc(t,i);case 11:n.selectWorldTab(),n.layoutManager.objects.footer.setLayout(!1),n.game.globalScene.screen.open(Pi.o4.NOTIFY_SCREEN,{message:n.lang.Text.JOIN_LB_SUCCESS,duration:1e3,loading:!1}),n.analytics.event(Dt._.LOG_IN,{success:!0}),e.next=21;break;case 17:e.prev=17,e.t0=e.catch(1),n.analytics.event(Dt._.LOG_IN,{success:!1}),n.game.globalScene.screen.open(Pi.o4.NOTIFY_SCREEN,{message:n.lang.Text.JOIN_LB_FAIL,duration:1e3,loading:!1});case 21:case"end":return e.stop()}}),e,null,[[1,17]])}))),n.handleShare=(0,s.Z)(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.game.globalScene.screen.open(Pi.o4.NOTIFY_SCREEN,{message:n.lang.Text.LOADING,duration:0,loading:!0}),e.prev=1,e.next=4,GameSDK.shareAsync({intent:"SHARE",image:"",text:""});case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(1);case 9:return e.prev=9,n.game.globalScene.screen.close(Pi.o4.NOTIFY_SCREEN),e.finish(9);case 12:case"end":return e.stop()}}),e,null,[[1,6,9,12]])}))),n}(0,o.Z)(t,e);var n=t.prototype;return n.preload=function(){this.events.on("wake",this.run),this.events.on("create",this.run)},n.create=function(){e.prototype.create.call(this),this.gameZone.setPosition(0,0),this.createBackground(Ri.Z.BACKGROUND.KEY,"0"),this.scene.bringToTop(),this.createLayoutManager()},n.selectWorldTab=function(){var e=this.layoutManager.objects.board;this.tabId=Vo,this.offset=0,e.showLoading(!0),e.leaders.removeLeaders(),this.stateStorage.dispatch($c(qv.LeaderboardId,Vo,qv.Limit,this.offset))},n.loadMoreTabFriend=function(){this.isRequesting||(this.offset+=qv.Limit,this.stateStorage.dispatch($c(qv.LeaderboardId,Wo,qv.Limit,this.offset)))},n.loadMoreTabWorld=function(){this.isRequesting||(this.offset+=qv.Limit,this.stateStorage.dispatch($c(qv.LeaderboardId,Vo,qv.Limit,this.offset)))},n.createLayoutManager=function(){this.layoutManager=new Xv(this)},t}(Bi.Z);var Qv=Jv,$v=function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).name="LoadResourceFail",i.message=t||"Load resource fail",i.payload=n,i}return(0,o.Z)(t,e),t}((0,G.Z)(Error)),ey=function(){function e(e,t){var n=this;this.game=void 0,this.id=void 0,this.taskData=void 0,this.requireTypes=void 0,this.process=function(e){var t,i=e.type,a=e.value;if(!(a<1)&&(-1!==hi()(t=n.requireTypes).call(t,i)&&!n.isPassRequiredTarget(i)&&n.processMore(e))){i=e.type,a=e.value;var r=n.getCorrectValue(i,a);n.game.stateStorage.dispatch(function(e,t,n){return function(i){var a=Wr();if(GameCore.Utils.Valid.isObject(a)){var r=a;GameCore.Utils.Object.hasOwn(r,e)&&(r[e].rewarded||(r[e][t]+=n,window.game.player.setCustomData("dailyTasks",{logTasks:r}),i({type:Cn,payload:{id:e,type:t,value:n}})))}}}(n.id,i,r)),n.isTaskFinished(i)&&(n.game.stateStorage.dispatch(function(e){return function(t){t({type:_n,payload:{id:e}}),Li.emit(ki.EVENTS.NOTICE_UPDATE)}}(n.id)),Li.emit(ki.EVENTS.TASK_FINISHED,n.taskData))}},this.game=e,this.id=t,this.init()}var t=e.prototype;return t.init=function(){var e=this,t=this.game.stateStorage.getState(),n=Ma(t)||[];if(!((null==n?void 0:n.length)<1)){var i=null==n?void 0:R()(n).call(n,(function(t){return t.id===e.id}));i&&(this.taskData=i,this.requireTypes=Q()(this.taskData.require),this.initEvents())}},t.getDataByType=function(e){var t=this.game.stateStorage.getState(),n=Da(t),i={value:0,target:0};if(!n)return i;if(!GameCore.Utils.Object.hasOwn(n,this.taskData.id))return i;var a=n[this.taskData.id];if(GameCore.Utils.Valid.isObject(a)&&GameCore.Utils.Object.hasOwn(a,e)){var r=a[e];"number"===typeof r&&(i.value=r)}return i.target=this.taskData.require[e]||0,i},t.getCorrectValue=function(e,t){var n=this.getDataByType(e),i=n.value,a=n.target,r=t;return i+t>a&&(r=a-i),Math.round(r)},t.isPassRequiredTarget=function(e){var t=this.getDataByType(e);return t.value>=t.target},t.isTaskFinished=function(e){var t=this.getDataByType(e);return t.value>=t.target},e}(),ty=ey,ny=ki.PLAY_BLITZ,iy=ny.ID,ay=ny.EVENTS,ry=function(e){function t(t){return e.call(this,t,iy)||this}(0,o.Z)(t,e);var n=t.prototype;return n.initEvents=function(){Li.off(ay.PLAY_BLITZ,this.process),Li.on(ay.PLAY_BLITZ,this.process)},n.processMore=function(){return!0},t}(ty),sy=ry,oy=ki.COLLECT_DIAMONDS,cy=oy.ID,uy=oy.EVENTS,ly=function(e){function t(t){return e.call(this,t,cy)||this}(0,o.Z)(t,e);var n=t.prototype;return n.initEvents=function(){Li.off(uy.COLLECT_DIAMONDS,this.process),Li.on(uy.COLLECT_DIAMONDS,this.process)},n.processMore=function(){return!0},t}(ty),hy=ly,dy=ki.DESTROY_ICE,py=dy.ID,fy=dy.EVENTS,my=function(e){function t(t){return e.call(this,t,py)||this}(0,o.Z)(t,e);var n=t.prototype;return n.initEvents=function(){Li.off(fy.DESTROY_ICE,this.process),Li.on(fy.DESTROY_ICE,this.process)},n.processMore=function(){return!0},t}(ty),gy=my,vy=ki.EAT_GEMS_BLUE,yy=vy.ID,Ey=vy.EVENTS,Ay=function(e){function t(t){return e.call(this,t,yy)||this}(0,o.Z)(t,e);var n=t.prototype;return n.initEvents=function(){Li.off(Ey.EAT_GEMS_BLUE,this.process),Li.on(Ey.EAT_GEMS_BLUE,this.process)},n.processMore=function(){return!0},t}(ty),Sy=Ay,Ty=ki.EAT_COLOR_CHANGE,by=Ty.ID,Iy=Ty.EVENTS,wy=function(e){function t(t){return e.call(this,t,by)||this}(0,o.Z)(t,e);var n=t.prototype;return n.initEvents=function(){Li.off(Iy.EAT_COLOR_CHANGE,this.process),Li.on(Iy.EAT_COLOR_CHANGE,this.process)},n.processMore=function(){return!0},t}(ty),Cy=wy,xy=ki.EAT_BIG_GEM_COMBO,Oy=xy.ID,_y=xy.EVENTS,Ry=function(e){function t(t){var n;return(n=e.call(this,t,Oy)||this).userBestCombo=0,n.updateUserBestCombo(),n}(0,o.Z)(t,e);var n=t.prototype;return n.updateUserBestCombo=function(){var e=(window.game.player.getCustomData("dailyTasks")||{}).logTasks,t=void 0===e?{}:e;if(t&&t[Oy]){var n=t[Oy].gemCombo,i=void 0===n?0:n;this.userBestCombo=i}},n.initEvents=function(){Li.off(_y.EAT_BIG_GEM_COMBO,this.process),Li.on(_y.EAT_BIG_GEM_COMBO,this.process)},n.processMore=function(e){var t=e.value;return!(t<=this.userBestCombo)&&(e.value=t-this.userBestCombo,this.userBestCombo=t,!0)},t}(ty),Py=Ry,ky=ki.EAT_GEMS_GREEN,My=ky.ID,Dy=ky.EVENTS,Ny=function(e){function t(t){return e.call(this,t,My)||this}(0,o.Z)(t,e);var n=t.prototype;return n.initEvents=function(){Li.off(Dy.EAT_GEMS_GREEN,this.process),Li.on(Dy.EAT_GEMS_GREEN,this.process)},n.processMore=function(){return!0},t}(ty),Ly=Ny,By=ki.EAT_GEMS_PINK,Gy=By.ID,Uy=By.EVENTS,Fy=function(e){function t(t){return e.call(this,t,Gy)||this}(0,o.Z)(t,e);var n=t.prototype;return n.initEvents=function(){Li.off(Uy.EAT_GEMS_PINK,this.process),Li.on(Uy.EAT_GEMS_PINK,this.process)},n.processMore=function(){return!0},t}(ty),Zy=Fy,Hy=ki.EAT_GEMS_RED,Yy=Hy.ID,zy=Hy.EVENTS,Vy=function(e){function t(t){return e.call(this,t,Yy)||this}(0,o.Z)(t,e);var n=t.prototype;return n.initEvents=function(){Li.off(zy.EAT_GEMS_RED,this.process),Li.on(zy.EAT_GEMS_RED,this.process)},n.processMore=function(){return!0},t}(ty),Wy=Vy,Ky=ki.EAT_GEMS_YELLOW,jy=Ky.ID,Xy=Ky.EVENTS,qy=function(e){function t(t){return e.call(this,t,jy)||this}(0,o.Z)(t,e);var n=t.prototype;return n.initEvents=function(){Li.off(Xy.EAT_GEMS_YELLOW,this.process),Li.on(Xy.EAT_GEMS_YELLOW,this.process)},n.processMore=function(){return!0},t}(ty),Jy=qy,Qy=ki.FINISH_GEM_BONUS,$y=Qy.ID,eE=Qy.EVENTS,tE=function(e){function t(t){return e.call(this,t,$y)||this}(0,o.Z)(t,e);var n=t.prototype;return n.initEvents=function(){Li.off(eE.FINISH_GEM_BONUS,this.process),Li.on(eE.FINISH_GEM_BONUS,this.process)},n.processMore=function(){return!0},t}(ty),nE=tE,iE=ki.PASS_LEVELS,aE=iE.ID,rE=iE.EVENTS,sE=function(e){function t(t){return e.call(this,t,aE)||this}(0,o.Z)(t,e);var n=t.prototype;return n.initEvents=function(){Li.off(rE.PASS_LEVEL,this.process),Li.on(rE.PASS_LEVEL,this.process)},n.processMore=function(){return!0},t}(ty),oE=sE,cE=ki.REACH_SCORE,uE=cE.ID,lE=cE.EVENTS,hE=function(e){function t(t){var n;return(n=e.call(this,t,uE)||this).totalScore=void 0,n.lastUpdate=void 0,n.totalScore=0,n.lastUpdate=Date.now(),n}(0,o.Z)(t,e);var n=t.prototype;return n.initEvents=function(){Li.off(lE.ADD_SCORE,this.process),Li.on(lE.ADD_SCORE,this.process)},n.processMore=function(e){var t=e.value,n=Date.now();return n-this.lastUpdate<3e3?(this.totalScore+=t,!1):(e.value+=this.totalScore,this.totalScore=0,this.lastUpdate=n,!0)},t}(ty),dE=hE,pE=ki.USE_COLORFUL,fE=pE.ID,mE=pE.EVENTS,gE=function(e){function t(t){return e.call(this,t,fE)||this}(0,o.Z)(t,e);var n=t.prototype;return n.initEvents=function(){Li.off(mE.USE_COLORFUL,this.process),Li.on(mE.USE_COLORFUL,this.process)},n.processMore=function(){return!0},t}(ty),vE=gE,yE=ki.USE_COLOR_POTION,EE=yE.ID,AE=yE.EVENTS,SE=function(e){function t(t){return e.call(this,t,EE)||this}(0,o.Z)(t,e);var n=t.prototype;return n.initEvents=function(){Li.off(AE.USE_COLOR_POTION,this.process),Li.on(AE.USE_COLOR_POTION,this.process)},n.processMore=function(){return!0},t}(ty),TE=SE,bE=ki.USE_HAMMER,IE=bE.ID,wE=bE.EVENTS,CE=function(e){function t(t){return e.call(this,t,IE)||this}(0,o.Z)(t,e);var n=t.prototype;return n.initEvents=function(){Li.off(wE.USE_HAMMER,this.process),Li.on(wE.USE_HAMMER,this.process)},n.processMore=function(){return!0},t}(ty),xE=CE,OE=ki.USE_SHUFFLE,_E=OE.ID,RE=OE.EVENTS,PE=function(e){function t(t){return e.call(this,t,_E)||this}(0,o.Z)(t,e);var n=t.prototype;return n.initEvents=function(){Li.off(RE.USE_SHUFFLE,this.process),Li.on(RE.USE_SHUFFLE,this.process)},n.processMore=function(){return!0},t}(ty),kE=PE,ME=function(){function e(e){var t=this;this.game=void 0,this.eventsListener=void 0,this.init=(0,s.Z)(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.eventsListener={},e.next=3,t.initData();case 3:t.initEvents();case 4:case"end":return e.stop()}}),e)}))),this.initData=(0,s.Z)(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.game.stateStorage.dispatch(function(){var e=(0,s.Z)(h().mark((function e(t,n){var i,a,r,s,o,c,u,l;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=n(),!Na(i)){e.next=4;break}return e.abrupt("return");case 4:return t({type:bn,payload:{}}),e.next=7,Dr();case 7:a=e.sent,r=window.game.globalScene.lang,s=0;case 10:if(!(s<a.length)){e.next=55;break}o=a[s],c=o.require,u=on()(c)[0],l=r.getCurrentLanguage(),e.t0=o.id,e.next="pass-levels"===e.t0?18:"play-blitz"===e.t0?20:"collect-diamonds"===e.t0?22:"reach-score"===e.t0?24:"use-colorful"===e.t0?26:"destroy-ice"===e.t0?28:"eat-gems-red"===e.t0?30:"eat-gems-green"===e.t0?32:"eat-gems-blue"===e.t0?34:"eat-gems-yellow"===e.t0?36:"eat-gems-pink"===e.t0?38:"use-hammer"===e.t0?40:"use-shuffle"===e.t0?42:"use-color-potion"===e.t0?44:"eat-color-change"===e.t0?46:"eat-big-gem-combo"===e.t0?48:"finish-gem-bonus"===e.t0?50:52;break;case 18:return o.title=r.getText({key:"PASS_X_LEVELS",variables:[u],locale:l}),e.abrupt("break",52);case 20:return o.title=r.getText({key:"FINISH_X_BLITZ_GAME",variables:[u],locale:l}),e.abrupt("break",52);case 22:return o.title=r.Text.COLLECT_300,e.abrupt("break",52);case 24:return o.title=r.Text.REACH_TOTAL,e.abrupt("break",52);case 26:return o.title=r.getText({key:"USE_X_COLORFUL",variables:[u],locale:l}),e.abrupt("break",52);case 28:return o.title=r.getText({key:"DESTROY_X_ICE",variables:[u],locale:l}),e.abrupt("break",52);case 30:return o.title=r.getText({key:"EAT_X_RED_GEMS",variables:[u],locale:l}),e.abrupt("break",52);case 32:return o.title=r.getText({key:"EAT_X_GREEN_GEMS",variables:[u],locale:l}),e.abrupt("break",52);case 34:return o.title=r.getText({key:"EAT_X_BLUE_GEMS",variables:[u],locale:l}),e.abrupt("break",52);case 36:return o.title=r.getText({key:"EAT_X_YELLOW_GEMS",variables:[u],locale:l}),e.abrupt("break",52);case 38:return o.title=r.getText({key:"EAT_X_PURPLE_GEMS",variables:[u],locale:l}),e.abrupt("break",52);case 40:return o.title=r.getText({key:"USE_HAMMER_TASK",variables:[u],locale:l}),e.abrupt("break",52);case 42:return o.title=r.getText({key:"USE_SHUFFLE_TASK",variables:[u],locale:l}),e.abrupt("break",52);case 44:return o.title=r.getText({key:"USE_COLOR_TASK",variables:[u],locale:l}),e.abrupt("break",52);case 46:return o.title=r.getText({key:"EAT_X_COLOR_CHANGE",variables:[u],locale:l}),e.abrupt("break",52);case 48:return o.title=r.getText({key:"EAT_GEM_COMBO_X",variables:[u],locale:l}),e.abrupt("break",52);case 50:return o.title=r.getText({key:"FINISH_X_GEM_BONUS",variables:[u],locale:l}),e.abrupt("break",52);case 52:s++,e.next=10;break;case 55:t(Br(a));case 56:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}());case 2:case"end":return e.stop()}}),e)}))),this.game=e,this.init()}var t=e.prototype;return t.getEventListener=function(e){return this.eventsListener[e]},t.initEvents=function(){this.eventsListener[ki.PASS_LEVELS.ID]=new oE(this.game),this.eventsListener[ki.REACH_SCORE.ID]=new dE(this.game),this.eventsListener[ki.COLLECT_DIAMONDS.ID]=new hy(this.game),this.eventsListener[ki.USE_COLORFUL.ID]=new vE(this.game),this.eventsListener[ki.DESTROY_ICE.ID]=new gy(this.game),this.eventsListener[ki.EAT_GEMS_BLUE.ID]=new Sy(this.game),this.eventsListener[ki.EAT_GEMS_RED.ID]=new Wy(this.game),this.eventsListener[ki.EAT_GEMS_GREEN.ID]=new Ly(this.game),this.eventsListener[ki.EAT_GEMS_YELLOW.ID]=new Jy(this.game),this.eventsListener[ki.EAT_GEMS_PINK.ID]=new Zy(this.game),this.eventsListener[ki.PLAY_BLITZ.ID]=new sy(this.game),this.eventsListener[ki.FINISH_GEM_BONUS.ID]=new nE(this.game),this.eventsListener[ki.EAT_BIG_GEM_COMBO.ID]=new Py(this.game),this.eventsListener[ki.USE_COLOR_POTION.ID]=new TE(this.game),this.eventsListener[ki.USE_HAMMER.ID]=new xE(this.game),this.eventsListener[ki.USE_SHUFFLE.ID]=new kE(this.game),this.eventsListener[ki.EAT_COLOR_CHANGE.ID]=new Cy(this.game)},e}(),DE=ME,NE=[{name:"collect-red-gems",id:"collect-gems",require:{red:5},reward:50},{name:"collect-blue-gems",id:"collect-gems",require:{blue:5},reward:50},{name:"collect-pink-gems",id:"collect-gems",require:{pink:5},reward:50},{name:"collect-green-gems",id:"collect-gems",require:{green:5},reward:50},{name:"collect-yellow-gems",id:"collect-gems",require:{yellow:5},reward:50},{name:"collect-red-blue-gems",id:"collect-gems",require:{red:5,blue:5},reward:120},{name:"collect-red-pink-gems",id:"collect-gems",require:{red:5,pink:5},reward:120},{name:"collect-red-green-gems",id:"collect-gems",require:{red:5,green:5},reward:120},{name:"collect-red-yellow-gems",id:"collect-gems",require:{red:5,yellow:5},reward:120},{name:"collect-blue-pink-gems",id:"collect-gems",require:{blue:5,pink:5},reward:120},{name:"collect-blue-green-gems",id:"collect-gems",require:{blue:5,green:5},reward:120},{name:"collect-blue-yellow-gems",id:"collect-gems",require:{blue:5,yellow:5},reward:120},{name:"collect-pink-green-gems",id:"collect-gems",require:{pink:5,green:5},reward:120},{name:"collect-pink-yellow-gems",id:"collect-gems",require:{pink:5,yellow:5},reward:120},{name:"collect-green-yellow-gems",id:"collect-gems",require:{green:5,yellow:5},reward:120},{name:"collect-red-blue-pink-gems",id:"collect-gems",require:{red:5,blue:5,pink:5},reward:210},{name:"collect-red-blue-green-gems",id:"collect-gems",require:{red:5,blue:5,green:5},reward:210},{name:"collect-red-blue-yellow-gems",id:"collect-gems",require:{red:5,blue:5,yellow:5},reward:210},{name:"collect-red-pink-green-gems",id:"collect-gems",require:{red:5,pink:5,green:5},reward:210},{name:"collect-red-pink-yellow-gems",id:"collect-gems",require:{red:5,pink:5,yellow:5},reward:210},{name:"collect-red-green-yellow-gems",id:"collect-gems",require:{red:5,green:5,yellow:5},reward:210},{name:"collect-blue-pink-green-gems",id:"collect-gems",require:{blue:5,pink:5,green:5},reward:210},{name:"collect-blue-pink-yellow-gems",id:"collect-gems",require:{blue:5,pink:5,yellow:5},reward:210},{name:"collect-blue-green-yellow-gems",id:"collect-gems",require:{blue:5,green:5,yellow:5},reward:210},{name:"collect-pink-green-yellow-gems",id:"collect-gems",require:{pink:5,green:5,yellow:5},reward:210}],LE=function(){var e=(0,s.Z)(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",NE);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),BE=function(e){return{type:gn,payload:{missions:e}}},GE=function(){function e(e,t,n){var i=this;this.game=void 0,this.id=void 0,this.name=void 0,this.reward=void 0,this.process=function(e){var t=e.id,n=e.type,a=e.value;a<1||i.id===t&&i.isTypeRequired(n)&&i.processMore(e)&&(i.game.stateStorage.dispatch(function(e,t,n){return{type:yn,payload:{name:e,type:t,value:n}}}(i.name,n,a)),i.isMissionComplete()&&(Li.emit(Nd.EVENTS.MISSION_COMPLETED,{name:i.name,reward:i.reward}),i.game.stateStorage.dispatch(function(e){return{type:En,payload:{name:e}}}(i.name))))},this.id=t,this.name=n,this.game=e}var t=e.prototype;return t.start=function(){var e=this.game.stateStorage.getState(),t=lp(e);t&&t.name===this.name&&(this.reward=t.reward,this.initEvents())},t.getMissionData=function(){var e=this.game.stateStorage.getState(),t=lp(e);return t?t.name!==this.name?null:t:null},t.getDataByType=function(e){var t=this.getMissionData();if(!t)return null;var n=t.require[e];return{value:t.process[e],target:n}},t.isTypeRequired=function(e){var t=this.getDataByType(e);return!!t&&t.target>0},t.isMissionComplete=function(){var e=this.getMissionData();if(!e)return!0;var t=e.require,n=e.process,i=!0;return Q()(t).forEach((function(e){if(i){var a=t[e];n[e]<a&&(i=!1)}})),i},e}(),UE=GE,FE=Nd.EVENTS,ZE=Nd.TYPES,HE=function(e){function t(t,n){return e.call(this,t,ZE.COLLECT_GEMS,n)||this}(0,o.Z)(t,e);var n=t.prototype;return n.initEvents=function(){Li.off(FE.MISSION_UPDATE,this.process),Li.on(FE.MISSION_UPDATE,this.process)},n.processMore=function(){return!0},t}(UE),YE=HE,zE=Nd.EVENTS,VE=Nd.TYPES,WE=function(e){function t(t,n){return e.call(this,t,VE.COMBO,n)||this}(0,o.Z)(t,e);var n=t.prototype;return n.initEvents=function(){Li.off(zE.MISSION_UPDATE,this.process),Li.on(zE.MISSION_UPDATE,this.process)},n.processMore=function(e){var t=this.getMissionData();if(!t)return!1;var n=e.type;return e.value>=t.require[n]},t}(UE),KE=WE,jE=Nd.EVENTS,XE=Nd.TYPES,qE=function(e){function t(t,n){return e.call(this,t,XE.USE_ITEM,n)||this}(0,o.Z)(t,e);var n=t.prototype;return n.initEvents=function(){Li.off(jE.MISSION_UPDATE,this.process),Li.on(jE.MISSION_UPDATE,this.process)},n.processMore=function(e){return!0},t}(UE),JE=qE,QE=function(){function e(e){var t=this;this.game=void 0,this.listener=void 0,this.init=(0,s.Z)(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.initData();case 2:t.initListeners(),t.initEvents();case 4:case"end":return e.stop()}}),e)}))),this.initData=(0,s.Z)(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.game.stateStorage.dispatch(function(){var e=(0,s.Z)(h().mark((function e(t,n){var i,a;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=n(),!dp(i)){e.next=4;break}return e.abrupt("return");case 4:return t({type:mn,payload:{}}),e.next=7,LE();case 7:a=e.sent,t(BE(a));case 9:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}());case 2:case"end":return e.stop()}}),e)}))),this.startListener=function(e){t.listener[e]&&t.listener[e].start()},this.game=e,this.init()}var t=e.prototype;return t.initListeners=function(){var e=this;this.listener={};var t=this.game.stateStorage.getState(),n=hp(t);n&&Q()(n).forEach((function(t){switch(n[t].id){case Nd.TYPES.COLLECT_GEMS:e.listener[t]=new YE(e.game,t);break;case Nd.TYPES.COMBO:e.listener[t]=new KE(e.game,t);break;case Nd.TYPES.USE_ITEM:e.listener[t]=new JE(e.game,t)}}))},t.initEvents=function(){Li.off(Nd.EVENTS.MISSION_START,this.startListener),Li.on(Nd.EVENTS.MISSION_START,this.startListener)},e}(),$E=QE,eA={BACKGROUND:{KEY:"background",FILE:"./assets/music/bg_music.mp3"},EFFECTS:{button_click:"./assets/sounds/button_click.mp3",congratulation:"./assets/sounds/congratulation.mp3",daily_reward:"./assets/sounds/daily_reward.mp3",clock_tick:"./assets/sounds/clock_tick.mp3",diamonds_drop:"./assets/sounds/diamonds_drop.mp3",diamonds_eat:"./assets/sounds/diamonds_eat.mp3",fireworks_big:"./assets/sounds/fireworks_big.mp3",fireworks_small:"./assets/sounds/fireworks_small.mp3",fireworks_soar:"./assets/sounds/fireworks_soar.mp3",game_over_scene:"./assets/sounds/game_over_scene.mp3",gem_drop:"./assets/sounds/gem_drop.mp3",gem_explosive_1:"./assets/sounds/gem_explosive_1.mp3",gem_explosive_2:"./assets/sounds/gem_explosive_2.mp3",gem_explosive_3:"./assets/sounds/gem_explosive_3.mp3",gem_explosive_4:"./assets/sounds/gem_explosive_4.mp3",gem_explosive_5:"./assets/sounds/gem_explosive_5.mp3",gem_explosive_6:"./assets/sounds/gem_explosive_6.mp3",gem_explosive_freeze:"./assets/sounds/gem_explosive_freeze.mp3",gem_falling:"./assets/sounds/gem_falling.mp3",gift_charge:"./assets/sounds/gift_charge.mp3",gift_explode:"./assets/sounds/gift_explode.mp3",gift_reveal:"./assets/sounds/gift_reveal.mp3",item_active_ambience:"./assets/sounds/item_active_ambience.mp3",mission_completed:"./assets/sounds/mission_completed.mp3",mission_reward:"./assets/sounds/mission_reward.mp3",move_wrong:"./assets/sounds/move_wrong.mp3",popup_off:"./assets/sounds/popup_off.mp3",popup_show:"./assets/sounds/popup_show.mp3",score_counter:"./assets/sounds/score_counter.mp3",start_game:"./assets/sounds/start_game.mp3",start_level:"./assets/sounds/start_level.mp3",use_hammer:"./assets/sounds/use_hammer.mp3",use_paint:"./assets/sounds/use_paint.mp3",use_shuffle:"./assets/sounds/use_shuffle.mp3",you_lose:"./assets/sounds/you_lose.mp3",you_win:"./assets/sounds/you_win.mp3"}},tA=GameCore.Configs.Notification.ApiUrl,nA=function(){var e=(0,s.Z)(h().mark((function e(t){var n,i;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.playerId,e.next=3,(0,He.v)("players/"+n,t,{},tA,10);case 3:return i=e.sent,e.abrupt("return",(null==i?void 0:i.data)||{});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),iA=GameCore.Configs,aA=iA.AppId,rA=iA.Notification,sA=function(e){function t(){for(var t,n,i=arguments.length,a=new Array(i),r=0;r<i;r++)a[r]=arguments[r];return(n=e.call.apply(e,O()(t=[this]).call(t,a))||this).isMusicLoaded=!1,n.handleFBInstantGameStarted=function(){window.__fbGameReady=!0,window.__fbPlatform=FBInstant.getPlatform(),n.ads.preloadRewardedVideoAsync().catch((function(){})),GameCore.Configs.Ads.InterstitialAdOptions.showWhenStartGame||n.ads.preloadInterstitialAdAsync().catch((function(){})),n.player.requestConnectedPlayers()},n.processAfterUpdatePlayerProfile=function(){rA.Enable&&(rA.DisableSendNotification||(Xg.sendNewUserNotification(),Xg.sendDailyNotification()))},n.startGame=function(){n.ads.showBannerAdAsync().catch((function(){})),n.analytics.event(Dt._.APP_READY),n.storage.setStorageData("scenes","currentSceneKey",ui.C.LOAD_SCENE),n.scene.scene.gameContext.processContextData().then((function(){})).catch((function(e){}))},n.handleLoadMusicCompleted=function(){n.audio.initMusic(eA.BACKGROUND.KEY),!!n.game.player.getPlayerSetting("music")&&n.audio.playMusic()},n}(0,o.Z)(t,e);var n=t.prototype;return n.preload=function(){var e=this;this.facebook.progressLoading.loadingProgressFbLoadScene(),this.analytics.event(Dt._.SCREEN_OPEN,{screen_name:"LoadScene"}),this.load.on("progress",(function(t){e.facebook.progressLoading.onProgress(t)})),this.load.on(Phaser.Loader.Events.FILE_LOAD_ERROR,(function(e){var t=new $v("Load resources at LoadScene failed.");(0,i.R0)(t,{file:null==e?void 0:e.url})}));var t=this.lang.getCurrentLanguage();this.load.bitmapFont(Sa.Z.PRIMARY.KEY,Sa.Z.PRIMARY.TEXTURE[t],Sa.Z.PRIMARY.DATA[t]),this.textStyler.addFont({type:"local",fontType:"truetype",fontName:Sa.Z.TEXT_FONT}),this.load.image(Ri.Z.AVATAR.KEY,Ri.Z.AVATAR.FILE),this.load.image(Ri.Z.BACKGROUND.KEY,Ri.Z.BACKGROUND.FILE),this.load.atlas({key:Ui.Z.DEFAULT.KEY,textureURL:Ui.Z.DEFAULT.TEXTURE,atlasURL:Ui.Z.DEFAULT.JSON}),this.load.atlas({key:Ui.Z.TITLE.KEY,textureURL:Ui.Z.TITLE.TEXTURE,atlasURL:Ui.Z.TITLE.JSON}),this.load.atlas({key:Ui.Z.GAMEPLAY.KEY,textureURL:Ui.Z.GAMEPLAY.TEXTURE,atlasURL:Ui.Z.GAMEPLAY.JSON}),this.load.multiatlas({key:Ui.Z.EFFECTS.KEY,path:Ui.Z.EFFECTS.PATH,atlasURL:Ui.Z.EFFECTS.JSON}),this.load.atlas({key:Ui.Z.TUTORIAL.KEY,textureURL:Ui.Z.TUTORIAL.TEXTURE,atlasURL:Ui.Z.TUTORIAL.JSON}),this.createBgElement(),this.player.updateData().then(this.processAfterUpdatePlayerProfile).catch(i.tO)},n.createBgElement=function(){var e=document.getElementById("background");e&&(e.style.display="block",e.style.backgroundImage="url("+Ri.Z.DESKTOP_BACKGROUND.FILE+")");var t=document.getElementById("app");t&&t.classList.remove("portrait")},n.create=function(){this.audio.initSound(),this.audio.importSoundEffectKeys(eA.EFFECTS),this.analytics.event(Dt._.LOAD_COMPLETE),this.facebook.on("startgame",this.handleFBInstantGameStarted),this.facebook.gameStarted(),this.initModules(),this.setupGlobalScene(),this.lazyLoadResource(),this.handleShowAdWhenStartGame(),this.startGame()},n.updatePlayerProfileToNotificationService=function(){var e=this.player.getPlayer(),t=e.playerId,n=e.name,i=e.photo,a=e.locale,r=e.ASID;nA({appId:aA,playerId:t,name:n,photo:i,locale:a,ASID:r})},n.setupGlobalScene=function(){var e=this.scene.get(ui.C.GLOBAL_SCENE);e instanceof wa.Z&&e.setup()},n.initModules=function(){new $E(this.game),new DE(this.game)},n.lazyLoadResource=function(){var e=this;setTimeout((function(){e.scene.wake(),e.loadSounds(),e.loadTexture32Bit(Ui.Z.DEFAULT.KEY,[Ui.Z.DEFAULT.TEXTURE_32_BIT]),e.loadTexture32Bit(Ui.Z.TITLE.KEY,[Ui.Z.TITLE.TEXTURE_32_BIT]),1===GameCore.Utils.Image.getImageScale()?e.loadTexture32Bit(Ui.Z.EFFECTS.KEY,Ui.Z.EFFECTS.TEXTURES_32BIT_1x):e.loadTexture32Bit(Ui.Z.EFFECTS.KEY,Ui.Z.EFFECTS.TEXTURES_32BIT_2x),e.load.once(Phaser.Loader.Events.COMPLETE,(function(){e.scene.sleep()}))}),1500)},n.loadSounds=function(){this.loadSoundEffects(),this.loadMusic()},n.loadSoundEffects=function(){var e=this;Q()(eA.EFFECTS).forEach((function(t){e.load.audio(t,eA.EFFECTS[t])}))},n.loadMusic=function(){if(!this.isMusicLoaded){this.isMusicLoaded=!0;var e=Phaser.Loader.Events.FILE_KEY_COMPLETE;this.load.once(e+"audio-"+eA.BACKGROUND.KEY,this.handleLoadMusicCompleted),this.load.audio(eA.BACKGROUND.KEY,eA.BACKGROUND.FILE),this.load.start()}},n.handleShowAdWhenStartGame=function(){var e=this;if(GameCore.Configs.Ads.InterstitialAdOptions.showWhenStartGame){var t={en:"Initializing...",ru:"\u0418\u043d\u0438\u0446\u0438\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u044f...",pt:"Inicializando...",es:"Inicializando...",ar:"\u062a\u0647\u064a\u0626\u0629...",hi:"\u092a\u094d\u0930\u093e\u0930\u0902\u092d \u0915\u0930 \u0930\u0939\u093e \u0939\u0948...",zh:"\u521d\u59cb\u5316\u4e2d...",tr:"Ba\u015flat\u0131l\u0131yor...",ja:"\u521d\u671f\u5316\u4e2d...",fr:"Initialisation en cours...",id:"Menginisialisasi...",de:"Initialisierung...",it:"Inizializzazione..."}[this.lang.getCurrentLanguage()||""]||"",n=document.createElement("div");n.id="wait-ads-mask";var a=document.createElement("div");a.id="wait-ads-content",n.appendChild(a);var r=document.createElement("div");r.id="wait-ads-dual-ring",a.appendChild(r);var o=document.createElement("div");o.id="wait-ads-text",o.innerHTML=t,a.appendChild(o),document.body.appendChild(n),this.audio.muteAll(),setTimeout((0,s.Z)(h().mark((function t(){return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,e.audio.stopMusic(),e.audio.muteAll(),t.next=5,e.ads.preloadInterstitialAdAsync();case 5:return t.next=7,e.ads.showInterstitialAdAsync();case 7:t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),(0,i.tO)(t.t0);case 12:return t.prev=12,n.remove(),e.audio.unmuteAll(),e.audio.playMusic(),t.finish(12);case 17:case"end":return t.stop()}}),t,null,[[0,9,12,17]])}))),0)}},n.loadTexture32Bit=function(e,t){var n=this,i=[];t.forEach((function(e){var t=GameCore.Utils.String.generateObjectId();n.load.image(t,e),i.push(t)})),this.load.start();var a=0;this.textures.on(Phaser.Textures.Events.ADD,(function t(r){var s=hi()(i).call(i,r);if(-1!==s){var o=n.textures.get(r),c=n.textures.get(e);c.source[s].glTexture=o.source[0].glTexture,c.source[s].glIndex=o.source[0].glIndex,c.source[s].glIndexCounter=o.source[0].glIndexCounter,++a===i.length&&n.textures.off(Phaser.Textures.Events.ADD,t)}}))},t}(Phaser.Scene),oA=sA,cA=Ui.Z.DEFAULT,uA=cA.KEY,lA=cA.FRAME,hA=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n.avatar=void 0,n.crown=void 0,n.playerName=void 0,n.playerScore=void 0,n.scene=t,n.createAvatar(),n.updateSize(),n.createWinCrown(),n.createPlayerName(),n.createPlayerScore(),n.scene.add.existing((0,Gi.Z)(n)),n}(0,o.Z)(t,e);var n=t.prototype;return n.showCrown=function(e){this.crown.setVisible(e),e?(this.avatar.setFrame(lA.AVATAR_FRAME_YELLOW_BIG),this.avatar.setBackground(lA.AVATAR_BG_YELLOW_BIG)):(this.avatar.setFrame(lA.AVATAR_FRAME_BLUE_BIG),this.avatar.setBackground(lA.AVATAR_BG_BLUE_BIG))},n.setPlayerName=function(e){this.playerName.setText(e)},n.setPlayerScore=function(e){this.playerScore.setText(""+e)},n.loadPhoto=function(e,t){this.avatar.loadPhoto(e,t,60)},n.updateSize=function(){var e=this.avatar,t=e.width,n=e.height;this.setSize(t,n)},n.createAvatar=function(){this.avatar=new Lo(this.scene,{key:uA,frame:lA.AVATAR_FRAME_BLUE_BIG,background:lA.AVATAR_BG_BLUE_BIG,width:89,height:89,radius:60}),this.add(this.avatar)},n.createWinCrown=function(){this.crown=this.scene.make.image({key:uA,frame:lA.ICON_CROWN}),this.crown.setWorldSize(52,36),Phaser.Display.Align.In.TopCenter(this.crown,this.avatar,0,25),this.add(this.crown)},n.createPlayerName=function(){this.playerName=this.scene.make.text({style:{fontFamily:Sa.Z.FONT_FAMILY,fontSize:this.scene.fontSize(42)+"px",fontStyle:"bold"},origin:{x:.5,y:.5}}),this.playerName.setTint(11632207),this.playerName.setHighQuality(),Phaser.Display.Align.In.BottomCenter(this.playerName,this.avatar,0,25),this.add(this.playerName)},n.createPlayerScore=function(){this.playerScore=this.scene.make.bitmapText({size:this.scene.fontSize(30),font:Sa.Z.PRIMARY.KEY,origin:{x:.5,y:.5}}),this.playerScore.setTint(6762627),Phaser.Display.Align.In.BottomCenter(this.playerScore,this.playerName,0,25),this.add(this.playerScore)},t}(Phaser.GameObjects.Container),dA=Ui.Z.DEFAULT,pA=dA.KEY,fA=dA.FRAME,mA=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n.board=void 0,n.titleText=void 0,n.playerScore=void 0,n.opponentScore=void 0,n.buttonClose=void 0,n.buttonRestart=void 0,n.buttonShare=void 0,n.scene=t,n.createBoard(),n.createTitle(),n.createVSText(),n.createPlayers(),n.createRestartButton(),n.createShareButton(),n.scene.add.existing((0,Gi.Z)(n)),n}(0,o.Z)(t,e);var n=t.prototype;return n.createBoard=function(){this.board=new Sr(this.scene,0,0,600,340),this.board.setDepth(_i.Z.BACKGROUND),this.add(this.board),Phaser.Display.Align.In.Center(this.board,this)},n.createTitle=function(){var e=this.scene.add.container(),t=this.scene.make.image({key:pA,frame:fA.RIBBON_FULL});t.setWorldSize(340,75),this.titleText=this.scene.make.bitmapText({font:Sa.Z.PRIMARY.KEY,size:this.scene.fontSize(32),origin:{x:.5,y:.5}}),Phaser.Display.Align.In.Center(this.titleText,t,0,-10),this.buttonClose=new ga.Z(this.scene,pA,fA.BUTTON_CLOSE,41.8,41.8),this.buttonClose.setName("Close"),Phaser.Display.Align.In.RightCenter(this.buttonClose,t,0,-3),e.setDepth(_i.Z.TILE),e.add([t,this.titleText,this.buttonClose]),this.add(e),Phaser.Display.Align.In.Center(e,this.board,0,-170)},n.createVSText=function(){var e=this.scene.make.bitmapText({font:Sa.Z.PRIMARY.KEY,size:this.scene.fontSize(70),text:"VS",origin:{x:.5,y:.5}});e.setTint(11632207),e.setDepth(_i.Z.TEXT),this.add(e),Phaser.Display.Align.In.Center(e,this.board,0,-45)},n.createPlayers=function(){this.playerScore=new hA(this.scene),this.playerScore.setDepth(_i.Z.ITEM),this.add(this.playerScore),Phaser.Display.Align.In.Center(this.playerScore,this.board,-100,-50),this.opponentScore=new hA(this.scene),this.opponentScore.setDepth(_i.Z.ITEM),this.add(this.opponentScore),Phaser.Display.Align.In.Center(this.opponentScore,this.board,100,-50)},n.createRestartButton=function(){this.buttonRestart=new Bo.Z(this.scene,{key:pA,button:fA.BUTTON_GREEN,icon:fA.ICON_RESUME,text:"Restart"},170,72),this.buttonRestart.setName("Restart"),this.buttonRestart.setDepth(_i.Z.BUTTON),this.add(this.buttonRestart),Phaser.Display.Align.In.Center(this.buttonRestart,this.opponentScore,0,155)},n.createShareButton=function(){this.buttonShare=new Bo.Z(this.scene,{key:pA,button:fA.BUTTON_BLUE,icon:fA.ICON_FLAT_SHARE,text:this.scene.lang.Text.SHARE},153,72),this.buttonShare.setName("Restart"),this.buttonShare.setDepth(_i.Z.BUTTON),this.add(this.buttonShare),Phaser.Display.Align.In.Center(this.buttonShare,this.playerScore,0,155)},t}(Phaser.GameObjects.Container),gA=mA,vA=function(e){function t(){for(var t,n,a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=e.call.apply(e,O()(t=[this]).call(t,r))||this).main=void 0,n.run=function(){var e=n.game.globalScene;e instanceof wa.Z&&e.requestBackgroundMaskUpdate(ui.C.RESULT_MATCH_SCENE,.8),n.getResultInfo()},n.sleep=function(){var e=n.game.globalScene;e instanceof wa.Z&&e.requestBackgroundMaskUpdate(ui.C.RESULT_MATCH_SCENE,0)},n.handleClose=function(){n.scene.sleep(ui.C.RESULT_MATCH_SCENE),n.scene.run(ui.C.GAME_OVER_SCENE)},n.handleShareScore=function(){n.stateStorage.dispatch((0,s.Z)(h().mark((function e(){var t,n,a,r,s,o,c,u,l,d,p;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=window.game,n=t.player,a=t.analytics,r=t.facebook,s=t.globalScene,o=t.lang,e.prev=1,s.screen.open(Pi.o4.NOTIFY_SCREEN,{message:o.Text.LOADING,loading:!0}),e.next=5,Ac();case 5:return c=e.sent,mc(c),u=n.getPlayer(),l=u.playerId,d=u.name,p=u.photo,e.next=10,r.shareAsync({text:"Pheww, a great match!",intent:"SHARE",image:c||"",data:{playerId:l,playerName:d,playerPhoto:p,type:Yo.SHARE_INVITE}});case 10:a.event(Dt._.SHARE,{share_content_type:"MatchResult",success:!0}),e.next=17;break;case 13:e.prev=13,e.t0=e.catch(1),a.event(Dt._.SHARE,{share_content_type:"MatchResult",success:!1}),(0,i.tO)(e.t0);case 17:return e.prev=17,s.screen.close(Pi.o4.NOTIFY_SCREEN),e.finish(17);case 20:case"end":return e.stop()}}),e,null,[[1,13,17,20]])}))))},n.handleRestartMatch=(0,s.Z)(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.replayGame();case 2:n.scene.sleep(ui.C.RESULT_MATCH_SCENE),n.scene.sleep(ui.C.GAME_OVER_SCENE),n.scene.switch(ui.C.GAME_SCENE);case 5:case"end":return e.stop()}}),e)}))),n}(0,o.Z)(t,e);var n=t.prototype;return n.preload=function(){this.events.on("wake",this.run),this.events.on("create",this.run),this.events.on(Phaser.Scenes.Events.SLEEP,this.sleep)},n.create=function(){e.prototype.create.call(this),this.createMask(.8),this.createMain(),this.createInput()},n.getResultInfo=function(){var e,t,n,i,a,r=this.match.getMatchState(),s=this.match.getMatchState().mode,o=this.player.getPlayer(),c=o.photo,u=o.name,l=o.playerId,h=r.profiles[null!=(e=r.customData.opponentId)?e:""],d=h.id,p=h.name,f=h.photo,m=(r.profiles[l]||{}).score,g=void 0===m?0:m,v=(r.profiles[d]||{}).score,y=void 0===v?0:v,E=null!=(t=null==(n=r.profiles[l])?void 0:n.finished)&&t,A=null!=(i=null==(a=r.profiles[d])?void 0:a.finished)&&i;s===Ao.MATCHING_GROUP&&(E=!0,A=!0);var S=E&&A;this.main.playerScore.loadPhoto(l,c),this.main.opponentScore.loadPhoto(d,f),this.main.playerScore.setPlayerName(u),this.main.opponentScore.setPlayerName(p),this.main.playerScore.setPlayerScore(g),this.main.opponentScore.setPlayerScore(y),this.main.playerScore.showCrown(S&&g>y),this.main.opponentScore.showCrown(S&&y>g),E&&A?g===y?this.main.titleText.setText(this.lang.Text.DRAW):g>y?this.main.titleText.setText(this.lang.Text.YOU_WIN):g<y&&this.main.titleText.setText(this.lang.Text.YOU_LOSE):this.main.titleText.setText(this.lang.Text.WAITING_OPPONENT),E&&A&&(g===y||(g>y?this.audio.playSound(Fi.Z.YOU_WIN):g<y&&this.audio.playSound(Fi.Z.YOU_LOSE)))},n.createMain=function(){this.main=new gA(this),Phaser.Display.Align.In.Center(this.main,this.gameZone,0,13)},n.createInput=function(){this.main.buttonClose.onClick=this.handleClose,this.main.buttonRestart.onClick=this.handleRestartMatch,this.main.buttonShare.onClick=this.handleShareScore},n.replayGame=function(){var e=(0,s.Z)(h().mark((function e(){var t,n,i;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=this.match.getMatchState(),n=t.mode,e.t0=n,e.next=e.t0===Ao.SINGLE?4:e.t0===Ao.BLITZ?9:e.t0===Ao.TOURNAMENT?14:e.t0===Ao.CHALLENGE_FRIEND?17:23;break;case 4:return e.next=6,this.match.single.finish.processAsync();case 6:return e.next=8,this.match.single.start.processAsync({playerId:this.player.getPlayerId()});case 8:case 13:case 16:case 22:return e.abrupt("break",23);case 9:return e.next=11,this.match.blitz.finish.processAsync();case 11:return e.next=13,this.match.blitz.start.processAsync({playerId:this.player.getPlayerId()});case 14:return e.next=16,this.match.single.start.processAsync({playerId:this.player.getPlayerId()});case 17:if(i=this.match.getMatchState().customData.opponentId){e.next=20;break}return e.abrupt("break",23);case 20:return e.next=22,this.match.challenge.friend.processAsync({playerId:this.player.getPlayerId(),opponentId:i});case 23:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),t}(Bi.Z);var yA=vA,EA=function(e){function t(){for(var t,n,i=arguments.length,a=new Array(i),r=0;r<i;r++)a[r]=arguments[r];return(n=e.call.apply(e,O()(t=[this]).call(t,a))||this).isVisible=!0,n.browserPrefixes=["moz","ms","o","","webkit"],n.visibleCallbacks=[],n.hiddenCallbacks=[],n.handleVisibilityChange=function(e){if("boolean"===typeof e)return e?n.onVisibleEvent():n.onHiddenEvent();var t=n.getBrowserPrefix(),i=n.getHiddenPropertyName(t);return document[i]?n.onHiddenEvent():n.onVisibleEvent()},n}(0,o.Z)(t,e);var n=t.prototype;return n.configure=function(){var e=this,t=this.getBrowserPrefix(),n=this.getVisibilityEvent(t);document.addEventListener(n,this.handleVisibilityChange,!1),document.addEventListener("focus",(function(){e.handleVisibilityChange(!0)}),!1),document.addEventListener("blur",(function(){e.handleVisibilityChange(!1)}),!1),window.addEventListener("focus",(function(){e.handleVisibilityChange(!0)}),!1),window.addEventListener("blur",(function(){e.handleVisibilityChange(!1)}),!1)},n.addEventVisible=function(e){this.visibleCallbacks.push(e)},n.addEventHidden=function(e){this.hiddenCallbacks.push(e)},n.isGameVisible=function(){return this.isVisible},n.getHiddenPropertyName=function(e){return e?e+"Hidden":"hidden"},n.getVisibilityEvent=function(e){return(e||"")+"visibilitychange"},n.getBrowserPrefix=function(){for(var e=0;e<this.browserPrefixes.length;e++)if(this.getHiddenPropertyName(this.browserPrefixes[e])in document)return this.browserPrefixes[e];return""},n.onVisibleEvent=function(){this.isVisible||(this.isVisible=!0,this.visibleCallbacks.forEach((function(e){e()})))},n.onHiddenEvent=function(){this.isVisible&&(this.isVisible=!1,this.hiddenCallbacks.forEach((function(e){e()})))},t}(Phaser.Plugins.BasePlugin),AA=EA,SA=GameCore,TA=SA.Utils,bA=function(e){function t(){for(var t,n,i=arguments.length,a=new Array(i),r=0;r<i;r++)a[r]=arguments[r];return(n=e.call.apply(e,O()(t=[this]).call(t,a))||this).storages=void 0,n}(0,o.Z)(t,e);var n=t.prototype;return n.init=function(){this.storages={}},n.addStorage=function(e,t){this.storages[e]=t},n.setStorageData=function(e,t,n){var i=this.getStorageData(e,t),a=i;a=TA.Valid.isObject(n)?TA.Object.merge(i,n):n,this.storages[e][t]=a},n.getStorageData=function(e,t){return this.getStorage(e)[t]},n.getStorage=function(e){return this.storages[e]},t}(Phaser.Plugins.BasePlugin),IA=bA,wA=IA,CA=function(){function e(){this.APIHost=void 0}var t=e.prototype;return t.setAPIHost=function(e){this.APIHost=e},t.getAPIHost=function(){return this.APIHost},e}(),xA=CA,OA=function(e){function t(t){var n;return(n=e.call(this,t)||this).name="LeaderboardNotFound",n.message=t||"No leaderboard found",n}return(0,o.Z)(t,e),t}((0,G.Z)(Error)),_A=OA,RA=GameCore,PA=RA.Utils,kA=RA.Configs,MA=function(e){function t(){for(var t,n,i=arguments.length,a=new Array(i),r=0;r<i;r++)a[r]=arguments[r];return(n=e.call.apply(e,O()(t=[this]).call(t,a))||this).appId=void 0,n}(0,o.Z)(t,e);var n=t.prototype;return n.setAppId=function(e){this.appId=e},n.setLeaderboardScoreAsync=function(){var e=(0,s.Z)(h().mark((function e(t){var n,i,a,r,s;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.leaderboardId,i=t.playerId,a=t.score,r=void 0===a?0:a,s="leaderboards/"+n+"/players/"+i,e.next=4,(0,He.v)(s,{score:r},{},this.getAPIHost());case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.createLeaderboardAsync=function(){var e=(0,s.Z)(h().mark((function e(t){var n;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={_id:t._id,appId:this.appId,resetScore:t.resetScore||0,numberOfLeaders:t.numberOfLeaders||15,timezone:t.timezone||"utc+0",sortOrder:t.sortOrder||"desc",statistics:t.statistics||"max",resettable:t.resettable||"manually",description:t.description||"no description",createdBy:t.createdBy,name:t.name,expireTime:t.expireTime||6048e5},"leaderboards",e.next=4,(0,He.v)("leaderboards",n,{},this.getAPIHost());case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.getLeaderboardAsync=function(){var e=(0,s.Z)(h().mark((function e(t,n){var i,a,r,s;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return void 0===n&&(n={}),i=[],a=PA.String.params(n),r="leaderboards/"+t+"/leaders",e.next=6,(0,He.U)(r+"?"+a,{},this.getAPIHost());case 6:if(s=e.sent,PA.Valid.isObject(s)){e.next=9;break}return e.abrupt("return",[]);case 9:if(PA.Object.hasOwn(s,"data")){e.next=11;break}return e.abrupt("return",[]);case 11:return i=s.data,e.abrupt("return",i);case 13:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}(),n.getLeaderboardAsyncByPlayerId=function(){var e=(0,s.Z)(h().mark((function e(t,n){var i,a,r,s;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=[],a=PA.String.params({playerIds:n}),r="leaderboards/"+t+"/players?"+a,e.next=5,(0,He.U)(r,{},this.getAPIHost());case 5:if(s=e.sent,PA.Valid.isObject(s)){e.next=8;break}return e.abrupt("return",[]);case 8:if(PA.Object.hasOwn(s,"data")){e.next=10;break}return e.abrupt("return",[]);case 10:return i=s.data,e.abrupt("return",i);case 12:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}(),n.getWorldTournamentLeaderboardsAsync=function(){var e=(0,s.Z)(h().mark((function e(){var t,n,i,a,r,s,o,c,u,l,d,p,f;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!kA.LeadersBoard.UseMock){e.next=5;break}return e.next=3,(0,Yr.qZ)(2e3*Math.random());case 3:return i=Math.floor(3*Math.random()),e.abrupt("return",Re()(t=mr()(n=new Array(i)).call(n,null)).call(t,(function(e,t){var n=t+1;return{id:n.toString(),title:"Global Tournament "+n,endTime:Math.round(Date.now()/1e3+100*Math.random()),contextID:n.toString(),payload:{leaderboardId:n.toString(),gameplayMode:Ao.SINGLE}}})));case 5:return a=GameCore.Utils.String.params({limit:100,type:"world_tournament_leaderboard"}),"leaderboards",e.next=9,(0,He.U)("leaderboards?"+a,{},this.getAPIHost());case 9:if(r=e.sent,s=[],r&&(null==r||!r.error)){e.next=13;break}throw new _A;case 13:PA.Valid.isObject(r)&&PA.Object.hasOwn(r,"data")&&(s=r.data),o=[],c=0;case 16:if(!(c<s.length)){e.next=36;break}u=null,e.prev=18,u=JSON.parse(s[c].description),e.next=25;break;case 22:return e.prev=22,e.t0=e.catch(18),e.abrupt("continue",33);case 25:if(l=new Date(s[c].createdAt).getTime(),d=Math.round((6048e5+l)/1e3),!(1e3*d-Date.now()<=0)){e.next=30;break}return e.abrupt("continue",33);case 30:p=u.gameplayMode||Ao.SINGLE,f={id:u.tournamentID,title:s[c].name,endTime:d,contextID:u.contextID,payload:{leaderboardId:s[c]._id,gameplayMode:p}},o.push(f);case 33:c++,e.next=16;break;case 36:return e.abrupt("return",o);case 37:case"end":return e.stop()}}),e,this,[[18,22]])})));return function(){return e.apply(this,arguments)}}(),t}(xA),DA=MA,NA=GameCore,LA=NA.Utils,BA=function(e){function t(){return e.apply(this,arguments)||this}(0,o.Z)(t,e);var n=t.prototype;return n.createSingleMatchAsync=function(){var e=(0,s.Z)(h().mark((function e(t){var n;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"single-matches",e.next=3,(0,He.v)("single-matches",(0,r.Z)({},t),{},this.getAPIHost());case 3:return n=e.sent,e.abrupt("return",this.returnValidMatchData(n));case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.getSingleMatchDetailAsync=function(){var e=(0,s.Z)(h().mark((function e(){var t;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"single-matches/active",e.next=3,(0,He.U)("single-matches/active",{},this.getAPIHost());case 3:return t=e.sent,e.abrupt("return",this.returnValidMatchData(t));case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.updateSingleMatchMoveAsync=function(){var e=(0,s.Z)(h().mark((function e(t,n){var i,a;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i="single-matches/"+t+"/move",e.next=3,(0,He.v)(i,(0,r.Z)({},n),{},this.getAPIHost());case 3:return a=e.sent,e.abrupt("return",this.returnValidMatchData(a));case 5:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}(),n.finishSingleMatchAsync=function(){var e=(0,s.Z)(h().mark((function e(t){var n,i;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="single-matches/"+t+"/finish",e.next=3,(0,He.v)(n,{},{},this.getAPIHost());case 3:return i=e.sent,e.abrupt("return",this.returnValidMatchData(i));case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.createMatchAsync=function(){var e=(0,s.Z)(h().mark((function e(t){var n;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"matches",e.next=3,(0,He.v)("matches",{opponentPlayerId:t},{},this.getAPIHost());case 3:return n=e.sent,e.abrupt("return",this.returnValidMatchData(n));case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.joinMatchAsync=function(){var e=(0,s.Z)(h().mark((function e(t){var n,i;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="matches/"+t+"/join",e.next=3,(0,He.v)(n,{},{},this.getAPIHost());case 3:return i=e.sent,e.abrupt("return",this.returnValidMatchData(i));case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.getMatchDetailByIdAsync=function(){var e=(0,s.Z)(h().mark((function e(t){var n,i;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="matches/"+t,e.next=3,(0,He.U)(n,{},this.getAPIHost());case 3:return i=e.sent,e.abrupt("return",this.returnValidMatchData(i));case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.finishMatchAsync=function(){var e=(0,s.Z)(h().mark((function e(t){var n,i,a,r,s,o,c,u,l,d;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.matchId,i=void 0===n?"":n,a=t.score,r=void 0===a?0:a,s=t.level,o=void 0===s?0:s,c=t.extraData,u=void 0===c?{}:c,l="matches/"+i+"/finish",e.next=4,(0,He.v)(l,{matchId:i,score:r,level:o,extraData:u},{},this.getAPIHost());case 4:return d=e.sent,e.abrupt("return",this.returnValidMatchData(d));case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.returnValidMatchData=function(e){var t={};return LA.Valid.isObject(e)&&LA.Object.hasOwn(e,"data")?t=e.data:t},t}(xA),GA=BA,UA=GameCore,FA=UA.Utils,ZA=function(e){function t(){return e.apply(this,arguments)||this}(0,o.Z)(t,e);var n=t.prototype;return n.getPlayersAsync=function(){var e=(0,s.Z)(h().mark((function e(t){var n,i;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=FA.String.params(t),e.next=3,(0,He.U)("players?"+n,{},this.getAPIHost());case 3:if(i=e.sent,FA.Valid.isObject(i)){e.next=6;break}return e.abrupt("return",null);case 6:if(FA.Object.hasOwn(i,"data")){e.next=8;break}return e.abrupt("return",null);case 8:return e.abrupt("return",i.data);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.updatePlayerProfileAsync=function(){var e=(0,s.Z)(h().mark((function e(t){var n;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,He.v)("players",(0,r.Z)({},t),{},this.getAPIHost(),10);case 2:if(n=e.sent,FA.Object.hasOwn(n,"data")){e.next=5;break}return e.abrupt("return",null);case 5:return e.abrupt("return",n.data);case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.increaseUserGuideDisplays=function(){var e=(0,s.Z)(h().mark((function e(t){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,He.v)("players/"+t+"/user-guide-displays/inc",{},{},this.getAPIHost());case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),t}(xA),HA=ZA,YA=function(){function e(e){this.matchAPI=void 0,this.playerAPI=void 0,this.leaderboardAPI=void 0,this.createAPI(),this.setAPIConfig(e)}var t=e.prototype;return t.createAPI=function(){this.matchAPI=new GA,this.playerAPI=new HA,this.leaderboardAPI=new DA},t.setAPIConfig=function(e){e.playerAPIHost&&this.playerAPI.setAPIHost(e.playerAPIHost),e.matchAPIHost&&this.matchAPI.setAPIHost(e.matchAPIHost),e.leaderboardAPIHost&&this.leaderboardAPI.setAPIHost(e.leaderboardAPIHost),e.appId&&this.leaderboardAPI.setAppId(e.appId)},t.setMatchAPIInstance=function(e){this.matchAPI=e},t.setPlayerAPIInstance=function(e){this.playerAPI=e},t.setLeaderboardAPIInstance=function(e){this.leaderboardAPI=e},t.getPlayerAPI=function(){return this.playerAPI},t.getMatchAPI=function(){return this.matchAPI},t.getLeaderboardAPI=function(){return this.leaderboardAPI},e}(),zA=YA,VA=function(e){function t(t){var n;return(n=e.call(this,t)||this).name="LevelNotDefined",n.message=t||"Level is not defined",n}return(0,o.Z)(t,e),t}(ai),WA=VA,KA=function(e){function t(t){var n;return(n=e.call(this,t)||this).name="MatchModeNotDefined",n.message=t||"Match id is not defined",n}return(0,o.Z)(t,e),t}(ai),jA=KA,XA=["profiles","customData"],qA=GameCore,JA=qA.Utils,QA=function(){function e(e){this.game=void 0,this.match=void 0,this.nextHandler=void 0,this.game=e.game,this.match=e.match,this.nextHandler=null}var t=e.prototype;return t.setNext=function(e){return this.nextHandler=e,e},t.processAsync=function(){var e=(0,s.Z)(h().mark((function e(t){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.logData("Before",t);case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),t.nextAsync=function(){var e=(0,s.Z)(h().mark((function e(t){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.logData("After",t),this.nextHandler){e.next=4;break}return e.abrupt("return");case 4:return e.next=6,this.nextHandler.processAsync(t);case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),t.logData=function(e,t){if(JA.Valid.isDebugger())JA.Object.clone,t.profiles,t.customData,(0,a.Z)(t,XA)},e}(),$A=QA,eS=GameCore,tS=eS.Utils,nS=function(e){function t(){return e.apply(this,arguments)||this}return(0,o.Z)(t,e),t.prototype.processAsync=function(){var t=(0,s.Z)(h().mark((function t(n){var i,a,r,s,o,c,u;return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.prototype.processAsync.call(this,n),i=n.customData,a=n.mode,r=n.startAt,s=n.finishAt,null!==a){t.next=4;break}throw new jA;case 4:if("number"===typeof(o=i.level)){t.next=7;break}throw new WA;case 7:return c=this.game.analytics,u=Math.floor((s-r)/1e3),c.event(Dt._.MATCH_END,{game_mode:tS.String.toUpperCamelCase(a),level:o,level_name:"level_"+o,time_played:u}),t.next=12,this.nextAsync(n);case 12:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),t}($A),iS=nS,aS=Ao,rS=aS,sS={OPEN:"open",ACTIVE:"active",FINISHED:"finished"},oS=function(e){function t(){return e.apply(this,arguments)||this}(0,o.Z)(t,e);var n=t.prototype;return n.processAsync=function(){var t=(0,s.Z)(h().mark((function t(n){var i,a,r;return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.prototype.processAsync.call(this,n),i=n.mode,a=n.status,r=i||rS.SINGLE,a===sS.FINISHED&&(r=rS.SINGLE),this.contextGameModeDetected(r),t.next=7,this.nextAsync(n);case 7:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),n.contextGameModeDetected=function(e){this.game.storage.setStorageData("context","contextGameMode",e)},t}($A),cS=oS,uS=function(e){function t(t){var n;return(n=e.call(this,t)||this).name="ProfileNotFound",n.message=t||"Profile not found",n}return(0,o.Z)(t,e),t}(ai),lS=uS,hS=function(e){function t(t){var n;return(n=e.call(this,t)||this).name="ScoreNotValid",n.message=t||"Score is not valid",n}return(0,o.Z)(t,e),t}((0,G.Z)(Error)),dS=hS,pS=function(e){function t(){return e.apply(this,arguments)||this}(0,o.Z)(t,e);var n=t.prototype;return n.processAsync=function(){var t=(0,s.Z)(h().mark((function t(n){return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.prototype.processAsync.call(this,n),t.next=3,this.setMSNLeaderboardScore(n);case 3:return t.next=5,this.nextAsync(n);case 5:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),n.setMSNLeaderboardScore=function(){var e=(0,s.Z)(h().mark((function e(t){var n,i,a,r;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,n=t.profiles,i=t.customData,(a=i.playerId)&&n[a]){e.next=5;break}throw new lS;case 5:if(r=n[a].score,GameCore.Utils.Valid.isNumber(r)){e.next=8;break}throw new dS;case 8:return e.next=10,window.GameSDK.submitGameResultsAsync(r);case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0);case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(t){return e.apply(this,arguments)}}(),t}($A),fS=pS,mS=function(){function e(e){this._id=void 0,this.mode=void 0,this.status=void 0,this.winnerId=void 0,this.whitePlayerId=void 0,this.blackPlayerId=void 0,this.whitePlayerScore=void 0,this.blackPlayerScore=void 0,this.whitePlayerFinish=void 0,this.blackPlayerFinish=void 0,this.setupDefaultData(),GameCore.Utils.Valid.isObject(e)&&(this.updateID(e._id),this.updateMode(e.mode),this.updateStatus(e.status),this.updateWinnerId(e.winnerId),this.updateWhitePlayerId(e.whitePlayerId),this.updateBlackPlayerId(e.blackPlayerId),this.updateWhitePlayerScore(e.whitePlayerScore),this.updateBlackPlayerScore(e.blackPlayerScore),this.updateWhitePlayerFinish(e.whitePlayerFinish),this.updateBlackPlayerFinish(e.blackPlayerFinish))}var t=e.prototype;return t.setupDefaultData=function(){this._id="",this.mode="",this.status="",this.winnerId="",this.whitePlayerId="",this.blackPlayerId="",this.whitePlayerScore=0,this.blackPlayerScore=0,this.whitePlayerFinish=!1,this.blackPlayerFinish=!1},t.updateID=function(e){"string"===typeof e&&(this._id=e)},t.updateMode=function(e){"string"===typeof e&&(this.mode=e)},t.updateStatus=function(e){"string"===typeof e&&(this.status=e)},t.updateWinnerId=function(e){"string"===typeof e&&(this.winnerId=e)},t.updateWhitePlayerId=function(e){"string"===typeof e&&(this.whitePlayerId=e)},t.updateBlackPlayerId=function(e){"string"===typeof e&&(this.blackPlayerId=e)},t.updateWhitePlayerScore=function(e){"number"===typeof e&&(this.whitePlayerScore=e)},t.updateBlackPlayerScore=function(e){"number"===typeof e&&(this.blackPlayerScore=e)},t.updateWhitePlayerFinish=function(e){"boolean"===typeof e&&(this.whitePlayerFinish=e)},t.updateBlackPlayerFinish=function(e){"boolean"===typeof e&&(this.blackPlayerFinish=e)},t.toObject=function(){return{_id:this._id,mode:this.mode,status:this.status,winnerId:this.winnerId,whitePlayerId:this.whitePlayerId,blackPlayerId:this.blackPlayerId,whitePlayerScore:this.whitePlayerScore,blackPlayerScore:this.blackPlayerScore,whitePlayerFinish:this.whitePlayerFinish,blackPlayerFinish:this.blackPlayerFinish}},e}(),gS=mS,vS=function(e){function t(t){var n;return(n=e.call(this,t)||this).name="MatchAreNotActive",n.message=t||"Match are not active",n}return(0,o.Z)(t,e),t}((0,G.Z)(Error)),yS=vS,ES=function(e){function t(t){var n;return(n=e.call(this,t)||this).name="OpponentIdNotValid",n.message=t||"Opponent id is not valid",n}return(0,o.Z)(t,e),t}(ai),AS=ES,SS=function(e){function t(t,n){var i;return(i=e.call(this,t)||this).payload=void 0,i.payload=n,i}(0,o.Z)(t,e);var n=t.prototype;return n.processAsync=function(){var t=(0,s.Z)(h().mark((function t(n){var i,a;return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.prototype.processAsync.call(this,n),n.status===sS.ACTIVE){t.next=3;break}throw new yS;case 3:if(!this.payload.useAPI){t.next=12;break}return t.next=7,this.finishMatchAsync(n);case 7:i=t.sent,a=new gS(i).toObject(),this.updateMatchFromAPI(n,a),t.next=13;break;case 12:this.updateMatchData(n);case 13:return this.updateMatchState(n),t.next=16,this.nextAsync(n);case 16:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),n.updateMatchData=function(e){var t=e.customData.playerId;if("string"!==typeof t)throw new si;e.profiles[t].finished=!0},n.updateMatchState=function(e){e.status=sS.FINISHED,e.finishAt=Date.now()},n.finishMatchAsync=function(){var e=(0,s.Z)(h().mark((function e(t){var n,i,a,r,s,o,c,u,l,d;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.id,i=t.profiles,a=t.customData,r=a.level,"string"===typeof(s=a.playerId)){e.next=4;break}throw new si;case 4:return o=i[s].score,c=this.payload.extraData,u={matchId:n||"",score:o,level:r,extraData:c},l=this.match.api.getMatchAPI(),e.next=10,l.finishMatchAsync(u);case 10:return d=e.sent,e.abrupt("return",d);case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.updateMatchFromAPI=function(e,t){var n=e.customData,i=n.playerId,a=n.opponentId;if("string"!==typeof i)throw new si;if("string"!==typeof a)throw new AS;var r=t.whitePlayerId,s=t.whitePlayerScore,o=t.blackPlayerScore,c=t.whitePlayerFinish,u=t.blackPlayerFinish,l=i===r,h=l?s:o,d=l?o:s,p=l?c:u,f=l?u:c;e.profiles[i].score=h,e.profiles[a].score=d,e.profiles[i].finished=p,e.profiles[a].finished=f},t}($A),TS=SS,bS=function(e){function t(){return e.apply(this,arguments)||this}(0,o.Z)(t,e);var n=t.prototype;return n.processAsync=function(){var e=(0,s.Z)(h().mark((function e(t){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.nextAsync(t);case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.nextAsync=function(){var e=(0,s.Z)(h().mark((function e(t){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.nextHandler){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.nextHandler.processAsync(t);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),t}($A),IS=bS,wS=function(e){function t(){return e.apply(this,arguments)||this}(0,o.Z)(t,e);var n=t.prototype;return n.processAsync=function(){var t=(0,s.Z)(h().mark((function t(n){return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.prototype.processAsync.call(this,n),this.setPlayerBestScore(n),t.next=4,this.nextAsync(n);case 4:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),n.setPlayerBestScore=function(e){var t=e.profiles,n=e.customData,i=e.mode,a=n.playerId;if(!a||!t[a])throw new lS;if(i===Ao.BLITZ){var r=this.game.player,s=r.getBlitzHighScore()||0,o=t[a].score,c=void 0===o?0:o;if(c<=s)return;return r.setCustomData("blitzHighScore",c),void(t[a].blitzHighScore=c)}var u=this.game.player,l=u.getBestScore()||0,h=t[a].score,d=void 0===h?0:h;d<=l||(u.setBestScore(d),t[a].bestScore=d)},t}($A),CS=wS,xS=function(){function e(e,t){this.game=void 0,this.match=void 0,this.game=e,this.match=t}var t=e.prototype;return t.startLog=function(e){this.match.useCPUProfile},t.endLog=function(){this.match.useCPUProfile},t.processAsync=function(){var e=(0,s.Z)(h().mark((function e(t){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new Error("Not implemented");case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),e}(),OS=xS,_S=function(e){function t(){return e.apply(this,arguments)||this}return(0,o.Z)(t,e),t.prototype.processAsync=function(){var e=(0,s.Z)(h().mark((function e(){var t,n,i,a,r,s,o;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,this.startLog(),t=new IS(this),n=new TS(this,{useAPI:!1}),t.setNext(n),i=new iS(this),n.setNext(i),a=new CS(this),i.setNext(a),r=new fS(this),a.setNext(r),s=new cS(this),r.setNext(s),o=this.match.getMatchState(),e.next=16,t.processAsync(o);case 16:return e.prev=16,this.endLog(),e.finish(16);case 19:case"end":return e.stop()}}),e,this,[[0,,16,19]])})));return function(){return e.apply(this,arguments)}}(),t}(OS),RS=_S,PS=GameCore.Utils,kS=function(e){function t(){return e.apply(this,arguments)||this}return(0,o.Z)(t,e),t.prototype.processAsync=function(){var t=(0,s.Z)(h().mark((function t(n){var i,a,r;return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.prototype.processAsync.call(this,n),i=n.customData,null!==(a=n.mode)){t.next=4;break}throw new jA;case 4:if("number"===typeof(r=i.level)){t.next=7;break}throw new WA;case 7:return this.game.analytics.event(Dt._.MATCH_START,{game_mode:PS.String.toUpperCamelCase(a),level:r,level_name:"level_"+r}),t.next=11,this.nextAsync(n);case 11:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),t}($A),MS=kS,DS=function(e){function t(t){var n;return(n=e.call(this,t)||this).name="SameContext",n.message=t||"Same context",n}return(0,o.Z)(t,e),t}((0,G.Z)(Error)),NS=GameCore.Utils,LS=function(e){function t(t,n){var i;return(i=e.call(this,t)||this).payload=void 0,i.payload=n,i}(0,o.Z)(t,e);var n=t.prototype;return n.processAsync=function(){var t=(0,s.Z)(h().mark((function t(n){var i;return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.prototype.processAsync.call(this,n),i=this.payload.contextId,t.next=4,this.switchAsync(i);case 4:return n.customData.contextId=i,t.next=7,this.nextAsync(n);case 7:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),n.checkSameContext=function(e){var t="SOLO"===e,n=FBInstant.context.getID();if(n===e)throw new DS;if(t&&null===n)throw new DS},n.switchAsync=function(){var e=(0,s.Z)(h().mark((function e(t){var n;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,GameCore.Utils.Valid.isValueChangeAsync(window.__fbGameReady,!0);case 3:return this.checkSameContext(t),n="SOLO"===t,e.next=7,FBInstant.context.switchAsync(t,n);case 7:e.next=17;break;case 9:if(e.prev=9,e.t0=e.catch(0),!(e.t0 instanceof DS)){e.next=13;break}return e.abrupt("return");case 13:if(NS.Object.hasOwn(e.t0,"code")){e.next=15;break}throw e.t0;case 15:if("SAME_CONTEXT"===e.t0.code){e.next=17;break}throw e.t0;case 17:case"end":return e.stop()}}),e,this,[[0,9]])})));return function(t){return e.apply(this,arguments)}}(),t}($A),BS=LS,GS={level:1,contextId:null,playerId:null,opponentId:null,leaderboardId:GameCore.Configs.LeadersBoard.LeaderboardId},US=function(e){function t(t,n){var i;return(i=e.call(this,t)||this).payload=void 0,i.payload=n,i}(0,o.Z)(t,e);var n=t.prototype;return n.processAsync=function(){var t=(0,s.Z)(h().mark((function t(n){return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.prototype.processAsync.call(this,n),this.initializeMatch(n),t.next=4,this.nextAsync(n);case 4:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),n.initializeMatch=function(e){var t=this.payload,n=t.id,i=t.mode,a=t.customData;e.id=n||null,e.mode=i||null,e.status=sS.OPEN,e.startAt=0,e.finishAt=0,e.profiles={},e.customData=(0,r.Z)({},GS,e.customData,a)},t}($A),FS=US,ZS=function(e){function t(t){var n;return(n=e.call(this,t)||this).name="MatchAreNotOpen",n.message=t||"Match are not open",n}return(0,o.Z)(t,e),t}(ai),HS=function(e){function t(){return e.apply(this,arguments)||this}(0,o.Z)(t,e);var n=t.prototype;return n.processAsync=function(){var t=(0,s.Z)(h().mark((function t(n){return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.prototype.processAsync.call(this,n),n.status===sS.OPEN){t.next=3;break}throw new ZS;case 3:return this.startMatch(n),t.next=6,this.nextAsync(n);case 6:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),n.startMatch=function(e){e.status=sS.ACTIVE,e.startAt=Date.now()},t}($A),YS=HS,zS=GameCore.Utils,VS=function(){function e(e){this.id=void 0,this.name=void 0,this.photo=void 0,this.score=void 0,this.diamond=void 0,this.bestScore=void 0,this.finished=void 0,this.fen=void 0,this.blitzHighScore=void 0,this.setupDefaultData(),zS.Valid.isObject(e)&&(zS.Object.hasOwn(e,"id")&&this.updateID(e.id),zS.Object.hasOwn(e,"name")&&this.updateName(e.name),zS.Object.hasOwn(e,"photo")&&this.updatePhoto(e.photo),zS.Object.hasOwn(e,"score")&&this.updateScore(e.score),zS.Object.hasOwn(e,"diamond")&&this.updateDiamond(e.diamond),zS.Object.hasOwn(e,"finished")&&this.updateFinished(e.finished),zS.Object.hasOwn(e,"bestScore")&&this.updateBestScore(e.bestScore),zS.Object.hasOwn(e,"fen")&&this.updateFen(e.fen),zS.Object.hasOwn(e,"blitzHighScore")&&this.updateBlitzHighScore(e.blitzHighScore))}var t=e.prototype;return t.setupDefaultData=function(){this.id="",this.name="Your Friend",this.photo="./assets/images/others/avatar.png",this.score=0,this.diamond=0,this.bestScore=0,this.blitzHighScore=0,this.finished=!1},t.updateID=function(e){"string"===typeof e&&(this.id=e)},t.updateName=function(e){"string"===typeof e&&(this.name=e)},t.updatePhoto=function(e){"string"===typeof e&&(this.photo=e)},t.updateScore=function(e){"number"===typeof e&&(this.score=e)},t.updateDiamond=function(e){"number"===typeof e&&(this.diamond=e)},t.updateBestScore=function(e){"number"===typeof e&&(this.bestScore=e)},t.updateFinished=function(e){"boolean"===typeof e&&(this.finished=e)},t.updateFen=function(e){"string"===typeof e&&(this.fen=e)},t.updateBlitzHighScore=function(e){"number"===typeof e&&(this.blitzHighScore=e)},t.toObject=function(){return{id:this.id,name:this.name,photo:this.photo,score:this.score,diamond:this.diamond,bestScore:this.bestScore,blitzHighScore:this.blitzHighScore,finished:this.finished}},e}(),WS=VS,KS=function(e){function t(t){var n;return(n=e.call(this,t)||this).name="ProfileIdNotDefined",n.message=t||"Profile id is not defined",n}return(0,o.Z)(t,e),t}((0,G.Z)(Error)),jS=function(e){function t(t,n){var i;return(i=e.call(this,t)||this).payload=void 0,i.payload=n,i}(0,o.Z)(t,e);var n=t.prototype;return n.processAsync=function(){var t=(0,s.Z)(h().mark((function t(n){var i,a,r,s;return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.prototype.processAsync.call(this,n),i=this.payload.profileId){t.next=4;break}throw new KS;case 4:if(a=this.game.player,r=a.getPlayerId(),i!==r){t.next=10;break}s=this.getPlayerProfile(),t.next=15;break;case 10:return t.next=12,this.getProfileAsync(i);case 12:if(s=t.sent){t.next=15;break}throw new lS;case 15:return this.updateMatchData(s,n),t.next=18,this.nextAsync(n);case 18:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),n.getPlayerProfile=function(){var e=this.game.player.getPlayer();return{playerId:e.playerId,name:e.name,photo:e.photo,locale:e.locale}},n.getProfileAsync=function(){var e=(0,s.Z)(h().mark((function e(t){var n,i;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.game.profile,e.next=3,n.requestProfiles([t]);case 3:return i=n.getProfiles(),e.abrupt("return",i[t]);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.updateMatchData=function(e,t){var n=e.playerId,i=e.name,a=e.photo,r=new WS({id:n,name:i,photo:a}).toObject();t.profiles[n]=r},t}($A),XS=jS,qS=function(e){function t(){return e.apply(this,arguments)||this}return(0,o.Z)(t,e),t.prototype.processAsync=function(){var e=(0,s.Z)(h().mark((function e(t){var n,i,a,r,s,o,c,u,l;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,this.startLog(t),n=t.playerId,i=new IS(this),a=new BS(this,{contextId:"SOLO"}),i.setNext(a),r=new FS(this,{id:"123456",mode:Ao.BLITZ,customData:{playerId:n}}),a.setNext(r),s=new YS(this),r.setNext(s),o=new XS(this,{profileId:n}),s.setNext(o),c=new MS(this),o.setNext(c),u=new cS(this),c.setNext(u),l=this.match.getMatchState(),e.next=19,i.processAsync(l);case 19:return e.prev=19,this.endLog(),e.finish(19);case 22:case"end":return e.stop()}}),e,this,[[0,,19,22]])})));return function(t){return e.apply(this,arguments)}}(),t}(OS),JS=qS,QS=function(e){function t(t){var n;return(n=e.call(this,t)||this).name="CreateContextFailed",n.message=t||"Create context failed",n}return(0,o.Z)(t,e),t}(ai),$S=GameCore.Utils,eT=function(e){function t(t,n){var i;return(i=e.call(this,t)||this).payload=void 0,i.payload=n,i}(0,o.Z)(t,e);var n=t.prototype;return n.processAsync=function(){var t=(0,s.Z)(h().mark((function t(n){var i,a;return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.prototype.processAsync.call(this,n),i=this.payload.opponentId,t.next=4,this.createAsync(i);case 4:return a=t.sent,n.customData.contextId=a,t.next=8,this.nextAsync(n);case 8:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),n.createAsync=function(){var e=(0,s.Z)(h().mark((function e(t){var n;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,GameCore.Utils.Valid.isValueChangeAsync(window.__fbGameReady,!0);case 3:return e.next=5,FBInstant.context.createAsync(t);case 5:e.next=13;break;case 7:if(e.prev=7,e.t0=e.catch(0),$S.Object.hasOwn(e.t0,"code")){e.next=11;break}throw e.t0;case 11:if("SAME_CONTEXT"===e.t0.code){e.next=13;break}throw e.t0;case 13:if("string"===typeof(n=FBInstant.context.getID())){e.next=16;break}throw new QS;case 16:return e.abrupt("return",n);case 17:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),t}($A),tT=eT,nT=function(e){function t(){return e.apply(this,arguments)||this}(0,o.Z)(t,e);var n=t.prototype;return n.processAsync=function(){var t=(0,s.Z)(h().mark((function t(n){var i,a;return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.prototype.processAsync.call(this,n),this.validateData(n),t.next=4,this.createMatchAsync(n);case 4:return i=t.sent,a=new gS(i).toObject(),this.updateMatchState(n,a),t.next=9,this.nextAsync(n);case 9:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),n.validateData=function(e){var t=e.status;if("string"!==typeof e.customData.opponentId)throw new AS;if(t!==sS.OPEN)throw new ZS},n.createMatchAsync=function(){var e=(0,s.Z)(h().mark((function e(t){var n,i,a;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.customData.opponentId){e.next=3;break}return e.abrupt("return",{});case 3:return i=this.match.api.getMatchAPI(),e.next=6,i.createMatchAsync(n);case 6:return a=e.sent,e.abrupt("return",a);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.updateMatchState=function(e,t){var n=e.customData,i=t._id,a=t.whitePlayerId,r=t.blackPlayerId,s=t.whitePlayerFinish,o=t.blackPlayerFinish,c=a===n.opponentId;e.id=i||null;var u=c?r:a,l=c?a:r;e.customData.playerId=u,e.customData.opponentId=l,e.profiles[u]||(e.profiles[u]={id:u,name:"",photo:"",finished:!1}),e.profiles[l]||(e.profiles[l]={id:l,name:"",photo:"",finished:!1});var h=c?o:s,d=c?s:o;e.profiles[u].finished=h,e.profiles[l].finished=d},t}($A),iT=nT,aT=function(e){function t(t){var n;return(n=e.call(this,t)||this).name="ContextIdNotValid",n.message=t||"Context id is not valid",n}return(0,o.Z)(t,e),t}(ai),rT=function(e){function t(t){var n;return(n=e.call(this,t)||this).name="MatchIdNotValid",n.message=t||"Match id is not valid",n}return(0,o.Z)(t,e),t}(ai),sT=function(e){function t(){return e.apply(this,arguments)||this}(0,o.Z)(t,e);var n=t.prototype;return n.processAsync=function(){var t=(0,s.Z)(h().mark((function t(n){var i;return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.prototype.processAsync.call(this,n),this.validateData(n),t.next=4,this.createWideframesResultAsync().catch((function(){}));case 4:return(i=t.sent)&&this.sendMessageAsync(n,i),t.next=8,this.nextAsync(n);case 8:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),n.validateData=function(e){var t=e.id,n=e.customData,i=n.contextId,a=n.opponentId;if(!t||"string"!==typeof t)throw new rT;if(!i||"string"!==typeof i)throw new aT;if(!a||"string"!==typeof a)throw new AS},n.createWideframesResultAsync=function(){var e=(0,s.Z)(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ac();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),n.sendMessageAsync=function(){var e=(0,s.Z)(h().mark((function e(t,n){var i,a,r,s,o,c,u;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=t.id,a=t.profiles,r=t.customData,s=r.playerId,o=r.opponentId,s&&"string"===typeof s){e.next=4;break}throw new si;case 4:return c=a[s].name,u={data:{type:Ho.CHALLENGE_FRIEND,matchId:i,playerId:s,opponentId:o},action:"CUSTOM",template:"challenge",cta:{default:"Play",localizations:{en_US:"Play",vi_VN:"Ch\u01a1i ngay"}},text:{default:c+" challenges you",localizations:{en_US:c+" challenges you",vi_VN:c+" th\u1eed th\xe1ch b\u1ea1n trong tr\u1eadn \u0111\u1ea5u n\xe0y. Ch\u01a1i ngay!"}},image:n,strategy:"IMMEDIATE",notification:"PUSH"},e.next=8,FBInstant.updateAsync(u);case 8:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),t}($A),oT=sT,cT=function(e){function t(){return e.apply(this,arguments)||this}(0,o.Z)(t,e);var n=t.prototype;return n.processAsync=function(){var t=(0,s.Z)(h().mark((function t(n){var i,a,r,s,o,c;return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.prototype.processAsync.call(this,n),this.validateData(n),i=n.customData,a=i.playerId,r=i.opponentId,s=a,t.next=7,this.getProfile(s);case 7:if(o=t.sent){t.next=10;break}throw new lS;case 10:if(this.updateMatchProfile(n,s,o),(s=r)===fo.playerId){t.next=21;break}return t.next=15,this.getProfile(s);case 15:if(c=t.sent){t.next=18;break}throw new lS;case 18:this.updateMatchProfile(n,s,c),t.next=22;break;case 21:this.updateMatchProfile(n,s);case 22:return t.next=24,this.nextAsync(n);case 24:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),n.validateData=function(e){var t=e.customData,n=t.playerId,i=t.opponentId;if(!n||"string"!==typeof n)throw new si;if(!i||"string"!==typeof i)throw new AS},n.getProfile=function(){var e=(0,s.Z)(h().mark((function e(t){var n,i;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.game.profile,e.next=3,n.requestProfiles([t]);case 3:return i=n.getProfiles(),e.abrupt("return",i[t]);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.updateMatchProfile=function(e,t,n){var i=n||fo,a=i.name,r=i.photo,s=new WS({id:t,name:a,photo:r}).toObject();e.profiles[t]?(e.profiles[t].name=s.name,e.profiles[t].photo=s.photo):e.profiles[t]=s},t}($A),uT=cT,lT=function(e){function t(){return e.apply(this,arguments)||this}return(0,o.Z)(t,e),t.prototype.processAsync=function(){var e=(0,s.Z)(h().mark((function e(t){var n,i,a,r,s,o,c,u,l,d,p,f;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,this.startLog(t),n=t.playerId,i=t.opponentId,a=new IS(this),r=new tT(this,{opponentId:i}),a.setNext(r),s=new FS(this,{mode:Ao.CHALLENGE_FRIEND,customData:{playerId:n,opponentId:i}}),r.setNext(s),o=new iT(this),s.setNext(o),c=new uT(this),o.setNext(c),u=new YS(this),c.setNext(u),l=new MS(this),u.setNext(l),d=new oT(this),l.setNext(d),p=new cS(this),d.setNext(p),f=this.match.getMatchState(),e.next=23,a.processAsync(f);case 23:case 25:return e.prev=25,this.endLog(),e.finish(25);case 28:case"end":return e.stop()}}),e,this,[[0,,25,28]])})));return function(t){return e.apply(this,arguments)}}(),t}(OS),hT=lT,dT=function(e){function t(){for(var t,n,i=arguments.length,a=new Array(i),r=0;r<i;r++)a[r]=arguments[r];return(n=e.call.apply(e,O()(t=[this]).call(t,a))||this).fallbackSingleMode=void 0,n.startFLowChallengeFriend=function(){var e=(0,s.Z)(h().mark((function e(t,i){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.match.challenge.friend.processAsync({playerId:t,opponentId:i});case 2:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),n.startFlowSingle=function(){var e=(0,s.Z)(h().mark((function e(t){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.fallbackSingleMode){e.next=2;break}throw new Error("Fallback single mode is not enabled");case 2:return e.next=4,n.match.single.start.processAsync({playerId:t});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n}return(0,o.Z)(t,e),t.prototype.processAsync=function(){var e=(0,s.Z)(h().mark((function e(t){var n,i,a;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,this.startLog(t),n=t.playerId,i=t.opponentId,a=t.fallbackSingleMode,this.fallbackSingleMode=a,e.prev=4,e.next=7,this.startFLowChallengeFriend(n,i);case 7:e.next=13;break;case 9:return e.prev=9,e.t0=e.catch(4),e.next=13,this.startFlowSingle(n);case 13:return e.prev=13,this.endLog(),e.finish(13);case 16:case"end":return e.stop()}}),e,this,[[0,,13,16],[4,9]])})));return function(t){return e.apply(this,arguments)}}(),t}(OS),pT=dT,fT=function(e){function t(t){var n;return(n=e.call(this,t)||this).name="PlayerHasFinishedMatch",n.message=t||"Player has finished match",n}return(0,o.Z)(t,e),t}((0,G.Z)(Error)),mT=function(e){function t(t){var n;return(n=e.call(this,t)||this).name="PlayerNotCurrentInMatch",n.message=t||"The player is not currently in this match",n}return(0,o.Z)(t,e),t}((0,G.Z)(Error)),gT=function(e){function t(t){var n;return(n=e.call(this,t)||this).name="PlayerNotJoinInMatch",n.message=t||"Player is not join in match",n}return(0,o.Z)(t,e),t}((0,G.Z)(Error)),vT=function(e){function t(t){var n;return(n=e.call(this,t)||this).name="GetMatchDetailFailed",n.message=t||"Get match detail failed",n}return(0,o.Z)(t,e),t}((0,G.Z)(Error)),yT=function(e){function t(){return e.apply(this,arguments)||this}(0,o.Z)(t,e);var n=t.prototype;return n.processAsync=function(){var t=(0,s.Z)(h().mark((function t(n){var i,a;return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.prototype.processAsync.call(this,n),this.validateMatchData(n),t.next=4,this.getMatchAsync(n);case 4:return i=t.sent,a=new gS(i).toObject(),this.validateContinueMatchData(n,a),this.updateMatchData(n,a),this.validatePlayerTurn(n),t.next=11,this.nextAsync(n);case 11:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),n.validateMatchData=function(e){var t=e.id,n=e.status;if("string"!==typeof t)throw new rT;if(n!==sS.OPEN)throw new ZS},n.validateContinueMatchData=function(e,t){var n=e.id,i=e.customData,a=t._id,r=t.whitePlayerId,s=t.blackPlayerId;if("string"!==typeof a||a!==n)throw new vT;var o=i.playerId,c=r===o,u=s===o;if(!c&&s===fo.playerId)throw new gT;if(!c&&!u)throw new mT},n.validatePlayerTurn=function(e){var t=e.profiles,n=e.customData.playerId;if("string"!==typeof n)throw new si;if(t[n].finished)throw new fT},n.getMatchAsync=function(){var e=(0,s.Z)(h().mark((function e(t){var n,i,a;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.id){e.next=3;break}return e.abrupt("return",{});case 3:return i=this.match.api.getMatchAPI(),e.next=6,i.getMatchDetailByIdAsync(n);case 6:return a=e.sent,e.abrupt("return",a);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.updateMatchData=function(e,t){var n=e.customData,i=t.whitePlayerId,a=t.blackPlayerId,r=t.whitePlayerScore,s=t.blackPlayerScore,o=t.whitePlayerFinish,c=t.blackPlayerFinish,u=i===n.playerId,l=u?i:a,h=u?a:i;e.customData.playerId=l,e.customData.opponentId=h,e.profiles[l]||(e.profiles[l]={id:l,name:"",photo:"",finished:!1}),e.profiles[h]||(e.profiles[h]={id:h,name:"",photo:"",finished:!1});var d=u?r:s,p=u?s:r;e.profiles[l].score=d,e.profiles[h].score=p;var f=u?o:c,m=u?c:o;e.profiles[l].finished=f,e.profiles[h].finished=m},t}($A),ET=yT,AT=function(e){function t(){return e.apply(this,arguments)||this}return(0,o.Z)(t,e),t.prototype.processAsync=function(){var e=(0,s.Z)(h().mark((function e(t){var n,i,a,r,s,o,c,u,l,d,p,f,m;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,this.startLog(t),n=t.contextId,i=t.matchId,a=t.playerId,r=t.opponentId,s=new IS(this),o=new BS(this,{contextId:n}),s.setNext(o),c=new FS(this,{id:i,mode:Ao.CHALLENGE_FRIEND,customData:{playerId:a,opponentId:r}}),o.setNext(c),u=new ET(this),c.setNext(u),l=new uT(this),u.setNext(l),d=new YS(this),l.setNext(d),p=new MS(this),d.setNext(p),f=new cS(this),p.setNext(f),m=this.match.getMatchState(),e.next=21,s.processAsync(m);case 21:return e.prev=21,this.endLog(),e.finish(21);case 24:case"end":return e.stop()}}),e,this,[[0,,21,24]])})));return function(t){return e.apply(this,arguments)}}(),t}(OS),ST=AT,TT=function(e){function t(t){var n;return(n=e.call(this,t)||this).name="LeaderboardIdNotValid",n.message=t||"Leaderboard id is not valid",n}return(0,o.Z)(t,e),t}((0,G.Z)(Error)),bT=function(e){function t(){return e.apply(this,arguments)||this}(0,o.Z)(t,e);var n=t.prototype;return n.processAsync=function(){var t=(0,s.Z)(h().mark((function t(n){return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.prototype.processAsync.call(this,n),this.setLeaderboardScoreAsync(n),t.next=4,this.nextAsync(n);case 4:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),n.setLeaderboardScoreAsync=function(){var e=(0,s.Z)(h().mark((function e(t){var n,i,a,r,s,o,c;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,n=t.profiles,i=t.customData,a=i.playerId,r=i.leaderboardId,a&&n[a]){e.next=5;break}throw new lS;case 5:if(r){e.next=7;break}throw new TT;case 7:if(s=n[a].score,GameCore.Utils.Valid.isNumber(s)){e.next=10;break}throw new dS;case 10:return window.GameSDK.submitGameResultsAsync(s).catch((function(e){})),o={leaderboardId:r,playerId:a,score:s},c=this.match.api.getLeaderboardAPI(),e.next=15,c.setLeaderboardScoreAsync(o);case 15:e.next=20;break;case 17:e.prev=17,e.t0=e.catch(0);case 20:case"end":return e.stop()}}),e,this,[[0,17]])})));return function(t){return e.apply(this,arguments)}}(),t}($A),IT=bT,wT=function(e){function t(){return e.apply(this,arguments)||this}(0,o.Z)(t,e);var n=t.prototype;return n.processAsync=function(){var t=(0,s.Z)(h().mark((function t(n){var i;return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.prototype.processAsync.call(this,n),this.validateData(n),t.next=4,this.createWideframesResultAsync().catch((function(){}));case 4:return(i=t.sent)&&this.progressSendFinishedMessage(n,i),t.next=8,this.nextAsync(n);case 8:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),n.validateData=function(e){var t=e.id,n=e.customData,i=n.contextId,a=n.opponentId;if(!t||"string"!==typeof t)throw new rT;if(!i||"string"!==typeof i)throw new aT;if(!a||"string"!==typeof a)throw new AS},n.createWideframesResultAsync=function(){var e=(0,s.Z)(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ac();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),n.progressSendFinishedMessage=function(e,t){var n=e.profiles,i=e.customData,a=i.playerId,r=i.opponentId;if(!a||"string"!==typeof a)throw new si;if(!r||"string"!==typeof r)throw new AS;var s=n[a],o=s.score,c=void 0===o?0:o,u=s.finished,l=n[r],h=l.score,d=void 0===h?0:h,p=l.finished;u?this.sendFinishMessageAsync(e,t):p&&c>d?this.sendBestScoreMessageAsync(e,t):this.sendPlayTurnMessageAsync(e,t)},n.sendFinishMessageAsync=function(){var e=(0,s.Z)(h().mark((function e(t,n){var i,a,r,s,o,c,u;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=t.id,a=t.profiles,r=t.customData,s=r.playerId,o=r.opponentId,s&&"string"===typeof s){e.next=4;break}throw new si;case 4:return c=a[s].name,u={data:{type:Ho.CHALLENGE_FRIEND,matchId:i,playerId:s,opponentId:o,status:sS.FINISHED},action:"CUSTOM",template:"finished",cta:{default:"See result",localizations:{en_US:"See result",vi_VN:"Xem k\u1ebft qu\u1ea3"}},text:{default:c+" just finished. Check them now.",localizations:{en_US:c+" just finished. Check them now.",vi_VN:c+" v\u1eeba ho\xe0n th\xe0nh m\xe0n ch\u01a1i. Nh\u1ea5n \u0111\u1ec3 xem k\u1ebft qu\u1ea3 tr\u1eadn \u0111\u1ea5u."}},image:n,strategy:"IMMEDIATE",notification:"PUSH"},e.next=8,FBInstant.updateAsync(u);case 8:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),n.sendPlayTurnMessageAsync=function(){var e=(0,s.Z)(h().mark((function e(t,n){var i,a,r,s,o,c,u,l,d;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=t.id,a=t.profiles,r=t.customData,s=r.playerId,o=r.opponentId,s&&"string"===typeof s){e.next=4;break}throw new si;case 4:return c=a[s],u=c.name,l=c.score,d={data:{type:Ho.CHALLENGE_FRIEND,matchId:i,playerId:s,opponentId:o,status:sS.ACTIVE},action:"CUSTOM",template:"finished",cta:{default:"Play",localizations:{en_US:"Play",vi_VN:"Ch\u01a1i ngay"}},text:{default:u+" got "+l+" scores. So easy! Can you?",localizations:{en_US:u+" got "+l+" scores. So easy! Can you?",vi_VN:u+" \u0111\xe3 \u0111\u1ea1t "+l+" \u0111i\u1ec3m! Nh\u1ea5n Ch\u01a1i \u0111\u1ec3 so t\xe0i!"}},image:n,strategy:"IMMEDIATE",notification:"PUSH"},e.next=8,FBInstant.updateAsync(d);case 8:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),n.sendBestScoreMessageAsync=function(){var e=(0,s.Z)(h().mark((function e(t,n){var i,a,r,s,o,c,u,l,d;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=t.id,a=t.profiles,r=t.customData,s=r.playerId,o=r.opponentId,s&&"string"===typeof s){e.next=4;break}throw new si;case 4:return c=a[s],u=c.name,l=c.score,d={data:{type:Ho.CHALLENGE_FRIEND,matchId:i,playerId:s,opponentId:o,status:sS.FINISHED},action:"CUSTOM",template:"pass_score",cta:{default:"See result",localizations:{en_US:"See result",vi_VN:"Xem k\u1ebft qu\u1ea3"}},text:{default:u+" beat your high score. Their score: "+l,localizations:{en_US:u+" beat your high score. Their score: "+l,vi_VN:u+" \u0111\xe3 v\u01b0\u1ee3t qua \u0111i\u1ec3m s\u1ed1 c\u1ee7a b\u1ea1n, v\u1edbi "+l+" \u0111i\u1ec3m!"}},image:n,strategy:"IMMEDIATE",notification:"PUSH"},e.next=8,FBInstant.updateAsync(d);case 8:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),t}($A),CT=wT,xT=function(e){function t(t,n){var i;return(i=e.call(this,t)||this).payload=void 0,i.payload=n,i}(0,o.Z)(t,e);var n=t.prototype;return n.processAsync=function(){var t=(0,s.Z)(h().mark((function t(n){return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.prototype.processAsync.call(this,n),this.updateProfileMatchData(n),t.next=4,this.nextAsync(n);case 4:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),n.updateProfileMatchData=function(e){var t=this.payload.id,n=e.profiles;if(!n[t])throw new lS;var i=(0,r.Z)({},n[t],this.payload),a=new WS(i).toObject();n[a.id]=a},t}($A),OT=xT,_T=function(e){function t(){return e.apply(this,arguments)||this}return(0,o.Z)(t,e),t.prototype.processAsync=function(){var e=(0,s.Z)(h().mark((function e(t){var n,i,a,r,s,o,c,u,l,d,p;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,this.startLog(t),n=t.extraData,i=t.playerScore,a=new IS(this),r=new OT(this,{id:this.match.getMatchState().customData.playerId||"",score:i}),a.setNext(r),s=new TS(this,{useAPI:!0,extraData:n}),r.setNext(s),o=new CT(this),s.setNext(o),c=new iS(this),o.setNext(c),u=new CS(this),c.setNext(u),l=new IT(this),u.setNext(l),d=new cS(this),l.setNext(d),p=this.match.getMatchState(),e.next=21,a.processAsync(p);case 21:return e.prev=21,this.endLog(),e.finish(21);case 24:case"end":return e.stop()}}),e,this,[[0,,21,24]])})));return function(t){return e.apply(this,arguments)}}(),t}(OS),RT=_T,PT=function(e){function t(t){var n;return(n=e.call(this,t)||this).name="ContextIsTournament",n.message=t||"Context is a tournament",n}return(0,o.Z)(t,e),t}((0,G.Z)(Error)),kT=GameCore.Utils,MT=function(e){function t(){return e.apply(this,arguments)||this}(0,o.Z)(t,e);var n=t.prototype;return n.processAsync=function(){var t=(0,s.Z)(h().mark((function t(n){var i;return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.prototype.processAsync.call(this,n),t.next=3,this.chooseAsync();case 3:return i=t.sent,t.next=6,this.checkContextTournament();case 6:return n.customData.contextId=i,t.next=9,this.nextAsync(n);case 9:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),n.chooseAsync=function(){var e=(0,s.Z)(h().mark((function e(){var t;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,FBInstant.context.chooseAsync({filters:["INCLUDE_EXISTING_CHALLENGES"],minSize:2,maxSize:2});case 3:e.next=11;break;case 5:if(e.prev=5,e.t0=e.catch(0),kT.Object.hasOwn(e.t0,"code")){e.next=9;break}throw e.t0;case 9:if("SAME_CONTEXT"===e.t0.code){e.next=11;break}throw e.t0;case 11:if("string"===typeof(t=FBInstant.context.getID())){e.next=14;break}throw new QS;case 14:return e.abrupt("return",t);case 15:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(){return e.apply(this,arguments)}}(),n.checkContextTournament=function(){var e=(0,s.Z)(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,FBInstant.getTournamentAsync();case 3:throw new PT;case 6:if(e.prev=6,e.t0=e.catch(0),!(e.t0 instanceof PT)){e.next=10;break}throw e.t0;case 10:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(){return e.apply(this,arguments)}}(),t}($A),DT=MT,NT=function(e){function t(t){var n;return(n=e.call(this,t)||this).name="ContextNotChallenge",n.message=t||"Context is not a challenge",n}return(0,o.Z)(t,e),t}((0,G.Z)(Error)),LT=function(e){function t(t){var n;return(n=e.call(this,t)||this).name="NetworkFailure",n.message=t||"Network failure",n}return(0,o.Z)(t,e),t}((0,G.Z)(Error)),BT=GameCore.Utils,GT=function(e){function t(t,n){var i;return(i=e.call(this,t)||this).payload=void 0,i.payload=n,i}(0,o.Z)(t,e);var n=t.prototype;return n.processAsync=function(){var t=(0,s.Z)(h().mark((function t(n){var i;return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.prototype.processAsync.call(this,n),this.checkCurrentContext(),t.next=4,this.getOpponentIdFromContextAsync();case 4:return i=t.sent,n.customData.opponentId=i,t.next=8,this.nextAsync(n);case 8:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),n.checkCurrentContext=function(){var e=FBInstant.context.getID();if("string"!==typeof e)throw new aT;if("SOLO"===e)throw new NT},n.getOpponentIdFromContextAsync=function(){var e=(0,s.Z)(h().mark((function e(){var t,n,i;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.payload.playerId,e.next=3,this.getContextPlayers([t]);case 3:if(!((n=e.sent).length>1)){e.next=6;break}throw new NT;case 6:return i=fo,1===n.length&&(i=n[0]),e.abrupt("return",i.playerId);case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.getContextPlayers=function(){var e=(0,s.Z)(h().mark((function e(t){var n,i;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,FBInstant.context.getPlayersAsync();case 3:return n=e.sent,i=[],n.forEach((function(e){var n=e.getID();if(!Ae()(t).call(t,n)){var a=e.getName();if(a){var r=e.getPhoto();i.push(new wt({playerId:n,name:a,photo:r}).toObject())}}})),e.abrupt("return",BT.Array.unique(i));case 9:if(e.prev=9,e.t0=e.catch(0),!BT.Object.hasOwn(e.t0,"code")){e.next=14;break}if("NETWORK_FAILURE"!==e.t0.code){e.next=14;break}throw new LT;case 14:return e.abrupt("return",[]);case 15:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}(),t}($A),UT=GT,FT=function(e){function t(){return e.apply(this,arguments)||this}return(0,o.Z)(t,e),t.prototype.processAsync=function(){var e=(0,s.Z)(h().mark((function e(t){var n,i,a,r,s,o,c,u,l,d,p,f;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,this.startLog(t),n=t.playerId,i=new IS(this),a=new DT(this),i.setNext(a),r=new FS(this,{mode:Ao.CHALLENGE_FRIEND,customData:{playerId:n}}),a.setNext(r),s=new UT(this,{playerId:n}),r.setNext(s),o=new iT(this),s.setNext(o),c=new uT(this),o.setNext(c),u=new YS(this),c.setNext(u),l=new MS(this),u.setNext(l),d=new oT(this),l.setNext(d),p=new cS(this),d.setNext(p),f=this.match.getMatchState(),e.next=25,i.processAsync(f);case 25:return e.prev=25,this.endLog(),e.finish(25);case 28:case"end":return e.stop()}}),e,this,[[0,,25,28]])})));return function(t){return e.apply(this,arguments)}}(),t}(OS),ZT=FT,HT=function(e){function t(t){var n;return(n=e.call(this,t)||this).name="JoinMatchFailed",n.message=t||"Join match failed",n}return(0,o.Z)(t,e),t}((0,G.Z)(Error)),YT=function(e){function t(t){var n;return(n=e.call(this,t)||this).name="MatchAreFinished",n.message=t||"Match are finished",n}return(0,o.Z)(t,e),t}((0,G.Z)(Error)),zT=function(e){function t(t){var n;return(n=e.call(this,t)||this).name="OtherPlayerHasJoinedMatch",n.message=t||"Other player has joined match",n}return(0,o.Z)(t,e),t}((0,G.Z)(Error)),VT=function(e){function t(){return e.apply(this,arguments)||this}(0,o.Z)(t,e);var n=t.prototype;return n.processAsync=function(){var t=(0,s.Z)(h().mark((function t(n){var i,a;return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.prototype.processAsync.call(this,n),this.validateMatchData(n),t.next=4,this.joinMatchAsync(n);case 4:return i=t.sent,a=new gS(i).toObject(),this.validateJoinMatchData(n,a),this.updateMatchData(n,a),t.next=10,this.nextAsync(n);case 10:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),n.validateMatchData=function(e){if(e.status!==sS.OPEN)throw new ZS},n.validateJoinMatchData=function(e,t){var n=e.id,i=e.customData,a=t._id,r=t.blackPlayerId,s=t.whitePlayerId,o=t.whitePlayerFinish,c=t.blackPlayerFinish,u=s===i.opponentId,l=r===i.playerId;if("string"!==typeof a||a!==n||!u)throw new HT;if(o&&c)throw new YT;if(!l)throw new zT},n.joinMatchAsync=function(){var e=(0,s.Z)(h().mark((function e(t){var n,i,a;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.id){e.next=3;break}return e.abrupt("return",{});case 3:return i=this.match.api.getMatchAPI(),e.next=6,i.joinMatchAsync(n);case 6:return a=e.sent,e.abrupt("return",a);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.updateMatchData=function(e,t){var n=e.customData,i=t.whitePlayerId,a=t.blackPlayerId,r=t.whitePlayerScore,s=t.blackPlayerScore,o=t.whitePlayerFinish,c=t.blackPlayerFinish,u=i===n.playerId,l=u?i:a,h=u?a:i;e.customData.playerId=l,e.customData.opponentId=h,e.profiles[l]||(e.profiles[l]={id:l,name:"",photo:"",finished:!1}),e.profiles[h]||(e.profiles[h]={id:h,name:"",photo:"",finished:!1});var d=u?r:s,p=u?s:r;e.profiles[l].score=d,e.profiles[h].score=p;var f=u?o:c,m=u?c:o;e.profiles[l].finished=f,e.profiles[h].finished=m},t}($A),WT=VT,KT=function(e){function t(){return e.apply(this,arguments)||this}return(0,o.Z)(t,e),t.prototype.processAsync=function(){var e=(0,s.Z)(h().mark((function e(t){var n,i,a,r,s,o,c,u,l,d,p;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,this.startLog(t),n=t.matchId,i=t.playerId,a=t.opponentId,r=new IS(this),s=new FS(this,{id:n,mode:Ao.CHALLENGE_FRIEND,customData:{playerId:i,opponentId:a}}),r.setNext(s),o=new WT(this),s.setNext(o),c=new uT(this),o.setNext(c),u=new YS(this),c.setNext(u),l=new MS(this),u.setNext(l),d=new cS(this),l.setNext(d),p=this.match.getMatchState(),e.next=19,r.processAsync(p);case 19:return e.prev=19,this.endLog(),e.finish(19);case 22:case"end":return e.stop()}}),e,this,[[0,,19,22]])})));return function(t){return e.apply(this,arguments)}}(),t}(OS),jT=KT,XT=function(e){function t(){for(var t,n,i=arguments.length,a=new Array(i),r=0;r<i;r++)a[r]=arguments[r];return(n=e.call.apply(e,O()(t=[this]).call(t,a))||this).fallbackSingleMode=void 0,n.startFLowChallengeFriend=function(){var e=(0,s.Z)(h().mark((function e(t){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n.match.challenge.invite.processAsync({playerId:t});case 3:return e.abrupt("return",!0);case 6:return e.prev=6,e.t0=e.catch(0),e.abrupt("return",e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}(),n.startFlowTournament=function(){var e=(0,s.Z)(h().mark((function e(t){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n.match.tournament.start.processAsync({playerId:t});case 3:e.next=9;break;case 5:return e.prev=5,e.t0=e.catch(0),e.next=9,n.startFlowSingle(t);case 9:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(t){return e.apply(this,arguments)}}(),n.startFlowSingle=function(){var e=(0,s.Z)(h().mark((function e(t){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.fallbackSingleMode){e.next=2;break}throw new Error("Fallback single mode is not enabled");case 2:return e.next=4,n.match.single.start.processAsync({playerId:t});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n}return(0,o.Z)(t,e),t.prototype.processAsync=function(){var e=(0,s.Z)(h().mark((function e(t){var n,i,a;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,this.startLog(t),n=t.playerId,i=t.fallbackSingleMode,this.fallbackSingleMode=i,e.next=6,this.startFLowChallengeFriend(n);case 6:if(!0!==(a=e.sent)){e.next=9;break}return e.abrupt("return");case 9:if(!(a instanceof PT)){e.next=14;break}return e.next=12,this.startFlowTournament(n);case 12:e.next=16;break;case 14:return e.next=16,this.startFlowSingle(n);case 16:return e.prev=16,this.endLog(),e.finish(16);case 19:case"end":return e.stop()}}),e,this,[[0,,16,19]])})));return function(t){return e.apply(this,arguments)}}(),t}(OS),qT=XT,JT=function(e){function t(){return e.apply(this,arguments)||this}(0,o.Z)(t,e);var n=t.prototype;return n.processAsync=function(){var t=(0,s.Z)(h().mark((function t(n){return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.prototype.processAsync.call(this,n),this.validateData(n),this.progressSendGroupMessage(n),t.next=5,this.nextAsync(n);case 5:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),n.validateData=function(e){var t=e.id,n=e.customData,i=n.contextId,a=n.opponentId;if(!t||"string"!==typeof t)throw new rT;if(!i||"string"!==typeof i)throw new aT;if(!a||"string"!==typeof a)throw new AS},n.createWideframesResultAsync=function(){var e=(0,s.Z)(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ac();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),n.createWideframesCurrentScoreAsync=function(){var e=(0,s.Z)(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,gc();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),n.progressSendGroupMessage=function(){var e=(0,s.Z)(h().mark((function e(t){var n,i,a,r,s,o,c,u,l,d,p;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.profiles,i=t.customData,a=i.playerId,!(r=i.opponentId)||"string"!==typeof r){e.next=15;break}if(a&&"string"===typeof a){e.next=5;break}throw new si;case 5:if(s=n[a]||{},o=s.score,c=void 0===o?0:o,u=n[r]||{},l=u.score,!(c>(void 0===l?0:l))){e.next=15;break}return e.next=10,this.createWideframesResultAsync().catch((function(){}));case 10:if(d=e.sent){e.next=13;break}return e.abrupt("return");case 13:return this.sendBestScoreMessageAsync(t,d),e.abrupt("return");case 15:return e.next=17,this.createWideframesCurrentScoreAsync().catch((function(){}));case 17:if(p=e.sent){e.next=20;break}return e.abrupt("return");case 20:this.sendChallengeMessageAsync(t,p);case 21:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.sendBestScoreMessageAsync=function(){var e=(0,s.Z)(h().mark((function e(t,n){var i,a,r,s,o,c,u;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=t.profiles,a=t.customData,(r=a.playerId)&&"string"===typeof r){e.next=4;break}throw new si;case 4:return s=i[r],o=s.name,c=s.score,u={data:{type:Ho.MATCHING_GROUP,playerId:r,playerName:o,playerScore:c},action:"CUSTOM",template:"play_turn",cta:{default:"Play",localizations:{en_US:"Play",vi_VN:"Ch\u01a1i"}},text:{default:o+" beats your high score. Their score: "+c+".",localizations:{en_US:o+" beats your high score. Their score: "+c+".",vi_VN:o+" v\u1eeba v\u01b0\u1ee3t \u0111i\u1ec3m s\u1ed1 cao nh\u1ea5t c\u1ee7a b\u1ea1n! Ch\u01a1i l\u1ea7n n\u1eefa ch\u1ee9?"}},image:n,strategy:"IMMEDIATE",notification:"PUSH"},e.next=8,FBInstant.updateAsync(u);case 8:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),n.sendChallengeMessageAsync=function(){var e=(0,s.Z)(h().mark((function e(t,n){var i,a,r,s,o,c,u;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=t.profiles,a=t.customData,(r=a.playerId)&&"string"===typeof r){e.next=4;break}throw new si;case 4:return s=i[r],o=s.name,c=s.score,u={data:{type:Ho.MATCHING_GROUP,playerId:r,playerName:o,playerScore:c},action:"CUSTOM",template:"play_turn",cta:{default:"Play",localizations:{en_US:"Play",vi_VN:"Ch\u01a1i ngay"}},text:{default:o+" got "+c+" scores. So easy! Can you?",localizations:{en_US:o+" got "+c+" scores. So easy! Can you?",vi_VN:o+" \u0111\xe3 \u0111\u1ea1t "+c+" \u0111i\u1ec3m! Qu\xe1 d\u1ec5 lu\xf4n. Ch\u01a1i l\u1ea1i n\xe0o!"}},image:n,strategy:"IMMEDIATE",notification:"PUSH"},e.next=8,FBInstant.updateAsync(u);case 8:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),t}($A),QT=JT,$T=function(e){function t(){return e.apply(this,arguments)||this}return(0,o.Z)(t,e),t.prototype.processAsync=function(){var e=(0,s.Z)(h().mark((function e(){var t,n,i,a,r,s,o,c;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,this.startLog(),t=new IS(this),n=new TS(this,{useAPI:!1}),t.setNext(n),i=new QT(this),n.setNext(i),a=new iS(this),i.setNext(a),r=new CS(this),a.setNext(r),s=new IT(this),r.setNext(s),o=new cS(this),s.setNext(o),c=this.match.getMatchState(),e.next=18,t.processAsync(c);case 18:return e.prev=18,this.endLog(),e.finish(18);case 21:case"end":return e.stop()}}),e,this,[[0,,18,21]])})));return function(){return e.apply(this,arguments)}}(),t}(OS),eb=$T,tb=function(e){function t(){return e.apply(this,arguments)||this}return(0,o.Z)(t,e),t.prototype.processAsync=function(){var e=(0,s.Z)(h().mark((function e(t){var n,i,a,r,s,o,c,u,l,d,p;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,this.startLog(t),n=t.playerId,i=t.opponentId,a=t.opponentScore,r=new IS(this),s=new FS(this,{id:"7749",mode:Ao.MATCHING_GROUP,customData:{playerId:n,opponentId:i}}),r.setNext(s),o=new uT(this),s.setNext(o),c=new OT(this,{id:n,score:a}),o.setNext(c),u=new YS(this),c.setNext(u),l=new MS(this),u.setNext(l),d=new cS(this),l.setNext(d),p=this.match.getMatchState(),e.next=19,r.processAsync(p);case 19:return e.prev=19,this.endLog(),e.finish(19);case 22:case"end":return e.stop()}}),e,this,[[0,,19,22]])})));return function(t){return e.apply(this,arguments)}}(),t}(OS),nb=tb,ib=function(e){function t(t){var n;return(n=e.call(this,t)||this).name="MatchGroupNotSupported",n.message=t||"Match group is not supported",n}return(0,o.Z)(t,e),t}((0,G.Z)(Error)),ab=GameCore.Utils,rb=function(e){function t(t,n){var i;return(i=e.call(this,t)||this).payload=void 0,i.payload=n,i}(0,o.Z)(t,e);var n=t.prototype;return n.processAsync=function(){var t=(0,s.Z)(h().mark((function t(n){var i,a;return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.prototype.processAsync.call(this,n),t.next=3,this.checkMatchGroupSupported();case 3:return i=this.getMatchTag(),t.next=6,this.matchingGroup(i);case 6:return a=t.sent,n.customData.contextId=a,t.next=10,this.nextAsync(n);case 10:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),n.checkMatchGroupSupported=function(){var e=(0,s.Z)(h().mark((function e(){var t;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Ae()(t=FBInstant.getSupportedAPIs()).call(t,"checkCanPlayerMatchAsync")){e.next=3;break}throw new ib;case 3:return e.next=5,FBInstant.checkCanPlayerMatchAsync();case 5:if(e.sent){e.next=8;break}throw new ib;case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),n.getMatchTag=function(){var e=this.payload.locale,t="global";if(e){var n=ab.String.getLanguageCode(e);"en"===n?t="en":"in"===n&&(t="in")}return t},n.matchingGroup=function(){var e=(0,s.Z)(h().mark((function e(t){var n;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,FBInstant.matchPlayerAsync(t,!0,!0);case 2:if("string"===typeof(n=FBInstant.context.getID())){e.next=5;break}throw new QS;case 5:return e.abrupt("return",n);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t}($A),sb=rb,ob=function(e){function t(){return e.apply(this,arguments)||this}return(0,o.Z)(t,e),t.prototype.processAsync=function(){var e=(0,s.Z)(h().mark((function e(t){var n,i,a,r,s,o,c,u,l,d;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,this.startLog(t),n=t.locale,i=t.playerId,a=new IS(this),r=new sb(this,{locale:n}),a.setNext(r),s=new FS(this,{id:"7749",mode:Ao.MATCHING_GROUP,customData:{playerId:i}}),r.setNext(s),o=new YS(this),s.setNext(o),c=new XS(this,{profileId:i}),o.setNext(c),u=new MS(this),c.setNext(u),l=new cS(this),u.setNext(l),d=this.match.getMatchState(),e.next=19,a.processAsync(d);case 19:return e.prev=19,this.endLog(),e.finish(19);case 22:case"end":return e.stop()}}),e,this,[[0,,19,22]])})));return function(t){return e.apply(this,arguments)}}(),t}(OS),cb=ob,ub=function(e){function t(){return e.apply(this,arguments)||this}(0,o.Z)(t,e);var n=t.prototype;return n.processAsync=function(){var t=(0,s.Z)(h().mark((function t(n){return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.prototype.processAsync.call(this,n),t.next=3,this.setGlobalLeaderboardScore(n);case 3:return t.next=5,this.nextAsync(n);case 5:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),n.setGlobalLeaderboardScore=function(){var e=(0,s.Z)(h().mark((function e(t){var n,i,a,r;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,n=t.profiles,i=t.customData,(a=i.playerId)&&n[a]){e.next=5;break}throw new lS;case 5:if(r=n[a].score,GameCore.Utils.Valid.isNumber(r)){e.next=8;break}throw new dS;case 8:return e.next=10,dc(a,r);case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0);case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(t){return e.apply(this,arguments)}}(),t}($A),lb=ub,hb=function(e){function t(){return e.apply(this,arguments)||this}return(0,o.Z)(t,e),t.prototype.processAsync=function(){var e=(0,s.Z)(h().mark((function e(){var t,n,i,a,r,s,o,c;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,this.startLog(),t=new IS(this),n=new TS(this,{useAPI:!1}),t.setNext(n),i=new iS(this),n.setNext(i),a=new CS(this),i.setNext(a),r=new lb(this),a.setNext(r),s=new fS(this),r.setNext(s),o=new cS(this),s.setNext(o),c=this.match.getMatchState(),e.next=18,t.processAsync(c);case 18:return e.prev=18,this.endLog(),e.finish(18);case 21:case"end":return e.stop()}}),e,this,[[0,,18,21]])})));return function(){return e.apply(this,arguments)}}(),t}(OS),db=hb,pb=function(e){function t(){return e.apply(this,arguments)||this}return(0,o.Z)(t,e),t.prototype.processAsync=function(){var e=(0,s.Z)(h().mark((function e(t){var n,i,a,r,s,o,c,u,l;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,this.startLog(t),n=t.playerId,i=new IS(this),a=new BS(this,{contextId:"SOLO"}),i.setNext(a),r=new FS(this,{id:"123456",mode:Ao.SINGLE,customData:{playerId:n}}),a.setNext(r),s=new YS(this),r.setNext(s),o=new XS(this,{profileId:n}),s.setNext(o),c=new MS(this),o.setNext(c),u=new cS(this),c.setNext(u),l=this.match.getMatchState(),e.next=19,i.processAsync(l);case 19:return e.prev=19,this.endLog(),e.finish(19);case 22:case"end":return e.stop()}}),e,this,[[0,,19,22]])})));return function(t){return e.apply(this,arguments)}}(),t}(OS),fb=pb,mb=function(e){function t(t,n){var i;return(i=e.call(this,t)||this).payload=void 0,i.payload=n,i}(0,o.Z)(t,e);var n=t.prototype;return n.processAsync=function(){var t=(0,s.Z)(h().mark((function t(n){var i;return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.prototype.processAsync.call(this,n),i=this.payload.contextId,this.validateContextId(i),n.customData.contextId=i,t.next=6,this.nextAsync(n);case 6:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),n.validateContextId=function(e){if("string"!==typeof e)throw new aT},t}($A),gb=mb,vb=function(e){function t(t){var n;return(n=e.call(this,t)||this).name="TournamentNotValid",n.message=t||"Tournament is not valid",n}return(0,o.Z)(t,e),t}((0,G.Z)(Error)),yb=function(e){function t(){return e.apply(this,arguments)||this}return(0,o.Z)(t,e),t.prototype.processAsync=function(){var t=(0,s.Z)(h().mark((function t(n){var i,a,r,s;return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.prototype.processAsync.call(this,n),t.next=3,FBInstant.getTournamentAsync();case 3:if(i=t.sent){t.next=6;break}throw new vb;case 6:return a=i.getPayload(),r=JSON.parse(a),(s=r.gameplayMode)&&s===Ao.BLITZ||(n.customData.tournamentGameplayMode=Ao.SINGLE),s===Ao.BLITZ&&(n.customData.tournamentGameplayMode=Ao.BLITZ),t.next=12,this.nextAsync(n);case 12:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),t}($A),Eb=yb,Ab=function(e){function t(){return e.apply(this,arguments)||this}return(0,o.Z)(t,e),t.prototype.processAsync=function(){var e=(0,s.Z)(h().mark((function e(t){var n,i,a,r,s,o,c,u,l,d,p;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,this.startLog(t),n=t.playerId,i=t.contextId,a=new IS(this),r=new gb(this,{contextId:i}),a.setNext(r),s=new FS(this,{id:"1997",mode:Ao.TOURNAMENT,customData:{playerId:n,tournamentGameplayMode:Ao.SINGLE}}),r.setNext(s),o=new Eb(this),s.setNext(o),c=new YS(this),o.setNext(c),u=new XS(this,{profileId:n}),c.setNext(u),l=new MS(this),u.setNext(l),d=new cS(this),l.setNext(d),p=this.match.getMatchState(),e.next=21,a.processAsync(p);case 21:return e.prev=21,this.endLog(),e.finish(21);case 24:case"end":return e.stop()}}),e,this,[[0,,21,24]])})));return function(t){return e.apply(this,arguments)}}(),t}(OS),Sb=Ab,Tb=GameCore.Utils,bb=function(e){function t(t,n){var i;return(i=e.call(this,t)||this).payload=null,i.leaderboardPayload=void 0,n&&(i.payload=n),i}(0,o.Z)(t,e);var n=t.prototype;return n.processAsync=function(){var t=(0,s.Z)(h().mark((function t(n){return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.prototype.processAsync.call(this,n),t.next=3,this.setupCreatePayload(n);case 3:return t.next=6,this.createLeaderboardAsync();case 6:return this.updateMatchState(n),t.next=10,this.nextAsync(n);case 10:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),n.setupCreatePayload=function(){var e=(0,s.Z)(h().mark((function e(t){var n,i,a,r,s,o,c,u,l,d;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=this.payload&&this.payload.isCreatedFromTournamentScene,a=null,a=i?this.game.player.getPlayerId():t.customData.playerId){e.next=6;break}throw new lS;case 6:return e.next=8,this.game.facebook.getTournamentAsync();case 8:r=e.sent,s=r.getID(),o=this.payload?this.payload.leaderboardId:Tb.String.generateObjectId(),c=FBInstant.player.getName(),u=c?c+"'s Tournament":"Your Tournament",l=(null==(n=this.payload)?void 0:n.gameplayMode)||Ao.SINGLE,d=Or()({tournamentName:u,tournamentID:s,contextID:s,gameplayMode:l}),this.leaderboardPayload={_id:o,name:s,createdBy:a,description:d};case 16:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.createLeaderboardAsync=function(){var e=(0,s.Z)(h().mark((function e(){var t,n;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.match.api.getLeaderboardAPI(),e.next=3,t.createLeaderboardAsync(this.leaderboardPayload);case 3:if(this.payload&&this.payload.isCreatedFromTournamentScene){e.next=6;break}return e.abrupt("return");case 6:if(n=this.game.player.getPlayerId()){e.next=9;break}return e.abrupt("return");case 9:return e.next=11,t.setLeaderboardScoreAsync({leaderboardId:this.leaderboardPayload._id,playerId:n,score:0});case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.updateMatchState=function(e){var t=this.leaderboardPayload._id;e.customData.leaderboardId=t},t}($A),Ib=bb,wb=function(e){function t(t,n){var i;return(i=e.call(this,t)||this).payload=void 0,i.payload=n,i}(0,o.Z)(t,e);var n=t.prototype;return n.processAsync=function(){var t=(0,s.Z)(h().mark((function t(n){return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.prototype.processAsync.call(this,n),t.next=3,this.createTournamentAsync(n);case 3:return t.next=5,this.nextAsync(n);case 5:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),n.createTournamentAsync=function(){var e=(0,s.Z)(h().mark((function e(t){var n,i,a,r,s,o,c,u;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.profiles,i=this.game.player.getPlayerId(),a=this.payload,r=a.leaderboardId,s=a.gameplayMode,o=0,i&&n[i]&&(o=n[i].score||0),c=FBInstant.player.getName(),u=c+"'s Tournament",e.next=9,FBInstant.tournament.createAsync({initialScore:o,config:{tournamentTitle:u},data:{playerId:i,playerName:c,leaderboardId:r,gameplayMode:s}});case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),t}($A),Cb=wb,xb=function(e){function t(){return e.apply(this,arguments)||this}return(0,o.Z)(t,e),t.prototype.processAsync=function(){var e=(0,s.Z)(h().mark((function e(t){var n,i,a,r,s,o,c,u,l;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,this.startLog(t),n=t.gameplayMode,i=t.isCreatedFromTournamentScene,a=void 0!==i&&i,r=GameCore.Utils.String.generateObjectId(),s=new IS(this),o=new Cb(this,{leaderboardId:r,gameplayMode:n}),s.setNext(o),c=new Ib(this,{leaderboardId:r,gameplayMode:n,isCreatedFromTournamentScene:a}),o.setNext(c),a||(u=new IT(this),c.setNext(u)),l=this.match.getMatchState(),e.next=13,s.processAsync(l);case 13:return e.prev=13,this.endLog(),e.finish(13);case 16:case"end":return e.stop()}}),e,this,[[0,,13,16]])})));return function(t){return e.apply(this,arguments)}}(),t}(OS),Ob=xb,_b=function(e){function t(t,n){var i;return(i=e.call(this,t)||this).payload=void 0,i.payload=n,i}(0,o.Z)(t,e);var n=t.prototype;return n.processAsync=function(){var t=(0,s.Z)(h().mark((function t(n){return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.prototype.processAsync.call(this,n),this.validateData(n),this.postScoreTournamentAsync(n),t.next=5,this.nextAsync(n);case 5:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),n.validateData=function(e){var t=e.profiles,n=e.customData.playerId;if(this.validatePlayerId(n),!t[n])throw new lS},n.validatePlayerId=function(e){if("string"!==typeof e)throw new si},n.getPlayerProfile=function(e){var t=e.profiles,n=e.customData.playerId;return this.validatePlayerId(n),t[n]},n.isNewBestScore=function(){var e=(0,s.Z)(h().mark((function e(t){var n,i,a,r,s,o,c,u,l,d,p,f,m;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.getPlayerProfile(t),i=n.score,a=void 0===i?0:i,r=n.id,e.next=4,FBInstant.getTournamentAsync();case 4:if(s=e.sent){e.next=7;break}return e.abrupt("return",!1);case 7:if(o=s.getPayload(),c=JSON.parse(o),u=c.leaderboardId,(l=void 0===u?"":u)&&""!==l){e.next=11;break}return e.abrupt("return",!1);case 11:return d=this.match.api.getLeaderboardAPI(),e.next=14,d.getLeaderboardAsyncByPlayerId(l,r);case 14:if((p=e.sent)&&0!==p.length){e.next=17;break}return e.abrupt("return",!0);case 17:if(GameCore.Utils.Object.hasOwn(p[0],"score")){e.next=19;break}return e.abrupt("return",!0);case 19:return f=p[0],m=f.score,e.abrupt("return",a>m);case 22:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.postScoreTournamentAsync=function(){var e=(0,s.Z)(h().mark((function e(t){var n,i,a,r,s,o,c,u,l;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=window.game.analytics,i=this.getPlayerProfile(t),a=i.score,r=void 0===a?0:a,s=null,o=!1,c=this.payload.checkBestScore,e.next=8,this.isNewBestScore(t);case 8:if(u=e.sent,l=c&&u,e.prev=10,!l){e.next=14;break}return e.next=14,this.postScoreToTournamentLeaderboard(t);case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(10);case 19:return e.prev=19,e.next=22,FBInstant.getTournamentAsync();case 22:return s=Dt._.TOURNAMENT_SHARE,e.next=25,FBInstant.tournament.shareAsync({score:r});case 25:o=!0,e.next=37;break;case 28:if(e.prev=28,e.t1=e.catch(19),!l){e.next=36;break}return s=Dt._.TOURNAMENT_CREATE,e.next=34,this.createTournamentAsync(r);case 34:return o=!0,e.abrupt("return");case 36:case 37:return e.prev=37,s&&n.event(s,{success:o}),e.finish(37);case 40:case"end":return e.stop()}}),e,this,[[10,16],[19,28,37,40]])})));return function(t){return e.apply(this,arguments)}}(),n.getTournamentTitle=function(){var e=FBInstant.player.getName(),t="Yours Tournament";return e&&(t=e+"'s Tournament"),t},n.postScoreToTournamentLeaderboard=function(){var e=(0,s.Z)(h().mark((function e(t){var n,i,a,r,s,o,c,u,l,d;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.getPlayerProfile(t),i=n.score,a=void 0===i?0:i,r=n.id,e.next=4,FBInstant.getTournamentAsync();case 4:if(s=e.sent){e.next=7;break}return e.abrupt("return");case 7:if(o=s.getPayload(),c=JSON.parse(o),u=c.leaderboardId,(l=void 0===u?"":u)&&""!==l){e.next=11;break}return e.abrupt("return");case 11:return d=this.match.api.getLeaderboardAPI(),e.next=14,d.setLeaderboardScoreAsync({leaderboardId:l,playerId:r,score:a});case 14:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.createTournamentAsync=function(){var e=(0,s.Z)(h().mark((function e(t,n){var i;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,i=this.getTournamentTitle(),e.next=4,FBInstant.tournament.createAsync({initialScore:t,config:{tournamentTitle:i},data:(0,r.Z)({},n,{type:Ho.TOURNAMENT})});case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0);case 9:case"end":return e.stop()}}),e,this,[[0,6]])})));return function(t,n){return e.apply(this,arguments)}}(),t}($A),Rb=_b,Pb=function(e){function t(){return e.apply(this,arguments)||this}return(0,o.Z)(t,e),t.prototype.processAsync=function(){var e=(0,s.Z)(h().mark((function e(){var t,n,i,a,r,s,o,c;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,this.startLog(),t=new IS(this),n=new TS(this,{useAPI:!1}),t.setNext(n),i=new Rb(this,{checkBestScore:!0}),n.setNext(i),a=new iS(this),i.setNext(a),r=new CS(this),a.setNext(r),s=new IT(this),r.setNext(s),o=new cS(this),s.setNext(o),c=this.match.getMatchState(),e.next=18,t.processAsync(c);case 18:return e.prev=18,this.endLog(),e.finish(18);case 21:case"end":return e.stop()}}),e,this,[[0,,18,21]])})));return function(){return e.apply(this,arguments)}}(),t}(OS),kb=Pb,Mb=function(e){function t(t){var n;return(n=e.call(this,t)||this).name="TournamentIdNotValid",n.message=t||"Tournament id is not valid",n}return(0,o.Z)(t,e),t}((0,G.Z)(Error)),Db=GameCore.Utils,Nb=function(e){function t(t,n){var i;return(i=e.call(this,t)||this).payload=void 0,i.payload=n,i}(0,o.Z)(t,e);var n=t.prototype;return n.processAsync=function(){var t=(0,s.Z)(h().mark((function t(n){var i,a;return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.prototype.processAsync.call(this,n),i=this.payload.tournamentId,this.validateTournamentId(i),t.next=5,this.joinTournamentAsync(i);case 5:return a=FBInstant.context.getID(),this.validateContextId(a),n.customData.contextId=a,t.next=10,this.nextAsync(n);case 10:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),n.validateTournamentId=function(e){if("string"!==typeof e)throw new Mb},n.validateContextId=function(e){if("string"!==typeof e)throw new aT},n.joinTournamentAsync=function(){var e=(0,s.Z)(h().mark((function e(t){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,FBInstant.tournament.joinAsync(t);case 3:e.next=11;break;case 5:if(e.prev=5,e.t0=e.catch(0),Db.Object.hasOwn(e.t0,"code")){e.next=9;break}throw e.t0;case 9:if("SAME_CONTEXT"===e.t0.code){e.next=11;break}throw e.t0;case 11:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(t){return e.apply(this,arguments)}}(),t}($A),Lb=Nb,Bb=function(e){function t(){return e.apply(this,arguments)||this}return(0,o.Z)(t,e),t.prototype.processAsync=function(){var e=(0,s.Z)(h().mark((function e(t){var n,i,a,r,s,o,c,u,l,d,p;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,this.startLog(t),n=t.playerId,i=t.tournamentId,a=new IS(this),r=new Lb(this,{tournamentId:i}),a.setNext(r),s=new FS(this,{id:"1997",mode:Ao.TOURNAMENT,customData:{playerId:n,tournamentGameplayMode:Ao.SINGLE}}),r.setNext(s),o=new Eb(this),s.setNext(o),c=new YS(this),o.setNext(c),u=new XS(this,{profileId:n}),c.setNext(u),l=new MS(this),u.setNext(l),d=new cS(this),l.setNext(d),p=this.match.getMatchState(),e.next=21,a.processAsync(p);case 21:return e.prev=21,this.endLog(),e.finish(21);case 24:case"end":return e.stop()}}),e,this,[[0,,21,24]])})));return function(t){return e.apply(this,arguments)}}(),t}(OS),Gb=Bb,Ub=function(e){function t(){return e.apply(this,arguments)||this}return(0,o.Z)(t,e),t.prototype.processAsync=function(){var e=(0,s.Z)(h().mark((function e(t){var n,i,a,r,s,o,c,u,l,d;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,this.startLog(t),n=t.playerId,i=new IS(this),a=new BS(this,{contextId:"SOLO"}),i.setNext(a),r=new FS(this,{id:"1997",mode:Ao.TOURNAMENT,customData:{playerId:n,tournamentGameplayMode:Ao.SINGLE}}),a.setNext(r),s=new Eb(this),r.setNext(s),o=new YS(this),s.setNext(o),c=new XS(this,{profileId:n}),o.setNext(c),u=new MS(this),c.setNext(u),l=new cS(this),u.setNext(l),d=this.match.getMatchState(),e.next=21,i.processAsync(d);case 21:return e.prev=21,this.endLog(),e.finish(21);case 24:case"end":return e.stop()}}),e,this,[[0,,21,24]])})));return function(t){return e.apply(this,arguments)}}(),t}(OS),Fb=Ub,Zb={id:null,mode:null,status:null,startAt:0,finishAt:0,profiles:{},customData:(0,r.Z)({},GS)},Hb=GameCore.Configs,Yb=function(e){function t(){for(var t,n,i=arguments.length,a=new Array(i),r=0;r<i;r++)a[r]=arguments[r];return(n=e.call.apply(e,O()(t=[this]).call(t,a))||this).group=void 0,n.single=void 0,n.blitz=void 0,n.context=void 0,n.challenge=void 0,n.tournament=void 0,n.api=void 0,n.useCPUProfile=void 0,n}(0,o.Z)(t,e);var n=t.prototype;return n.init=function(){this.createMatchData(),this.createAPIHandler(),this.createConcreteFlows()},n.setUseCPUProfile=function(e){this.useCPUProfile=e},n.createMatchData=function(){this.game.storage.addStorage("match",Zb)},n.getMatchState=function(){return this.game.storage.getStorage("match")},n.createConcreteFlows=function(){this.createGroupFlows(),this.createSingleFlows(),this.createBlitzFlows(),this.createContextFlows(),this.createChallengeFlows(),this.createTournamentFlows()},n.createAPIHandler=function(){var e={appId:Hb.AppId,matchAPIHost:Hb.ApiHost,playerAPIHost:Hb.ApiHost,leaderboardAPIHost:Hb.OtherHost};this.api=new zA(e)},n.createGroupFlows=function(){this.group={join:new nb(this.game,this),start:new cb(this.game,this),finish:new eb(this.game,this)}},n.createSingleFlows=function(){this.single={start:new fb(this.game,this),finish:new db(this.game,this)}},n.createBlitzFlows=function(){this.blitz={start:new JS(this.game,this),finish:new RS(this.game,this)}},n.createContextFlows=function(){this.context={choose:new qT(this.game,this)}},n.createChallengeFlows=function(){this.challenge={invite:new ZT(this.game,this),post:new pT(this.game,this),friend:new hT(this.game,this),join:new jT(this.game,this),finish:new RT(this.game,this),continue:new ST(this.game,this)}},n.createTournamentFlows=function(){this.tournament={join:new Gb(this.game,this),start:new Fb(this.game,this),create:new Ob(this.game,this),finish:new kb(this.game,this),continue:new Sb(this.game,this)}},t}(Phaser.Plugins.BasePlugin),zb=Yb,Vb=function(){function e(e){this.game=void 0,this.game=e}var t=e.prototype;return t.isValidContextType=function(e){return"THREAD"===e||"SOLO"===e||"GROUP"===e},t.isValidEntryPointData=function(e){return GameCore.Utils.Valid.isObject(e)},t.receiveContext=function(e,t,n){var i=this.game.storage;i.setStorageData("context","contextId",e),this.isValidEntryPointData(n)&&i.setStorageData("context","entryPointData",n),this.isValidContextType(t)&&i.setStorageData("context","contextType",t)},t.detectContextSessionType=function(){var e=(0,s.Z)(h().mark((function e(){var t,n,i,a,r,s,o,c,u;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.game.storage,n=t.getStorageData("context","entryPointData"),i=n.type,a=Ho.SOLO,r=Ho.TOURNAMENT,s=Ho.MATCHING_GROUP,o=Ho.SHARE_INVITE,c=Ho.CHALLENGE_FRIEND,u=a,i===r&&(u=r),i===s&&(u=s),i!==c&&i!==o||(u=c),u!==a){e.next=17;break}return e.prev=9,e.next=12,FBInstant.getTournamentAsync();case 12:u=r,e.next=17;break;case 15:e.prev=15,e.t0=e.catch(9);case 17:t.setStorageData("context","sessionContextType",u);case 18:case"end":return e.stop()}}),e,this,[[9,15]])})));return function(){return e.apply(this,arguments)}}(),t.detectContextGameMode=function(){var e,t=this.game,n=t.player,i=t.storage,a=i.getStorageData("context","entryPointData"),r=i.getStorageData("context","sessionContextType"),s=n.getPlayerId(),o=a.matchId,c=a.playerId,u=a.opponentId,l=void 0===u?fo.playerId:u,h=s===c,d=l===fo.playerId||hi()(e=[l,c]).call(e,s)>=0,p=Ho.TOURNAMENT,f=Ho.MATCHING_GROUP,m=Ho.SHARE_INVITE,g=Ho.CHALLENGE_FRIEND,v=rS.SINGLE;r===p&&(v=rS.TOURNAMENT),r!==m||h||(v=rS.CHALLENGE_FRIEND),r===g&&o&&d&&(v=rS.CHALLENGE_FRIEND),r===f&&(v=rS.MATCHING_GROUP),i.setStorageData("context","contextGameMode",v)},e}(),Wb=Vb,Kb=function(){function e(e){var t=this;this.game=void 0,this.processTournamentMode=(0,s.Z)(h().mark((function e(){var n,i,a,r,s;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.game,i=n.match,a=n.player,r=a.getPlayerId(),"string"===typeof(s=FBInstant.context.getID())){e.next=5;break}throw new Error("Cannot get contextId");case 5:return e.next=7,i.tournament.continue.processAsync({playerId:r,contextId:s});case 7:case"end":return e.stop()}}),e)}))),this.game=e}var t=e.prototype;return t.processContextData=function(){var e=(0,s.Z)(h().mark((function e(){var t,n,i,a,r,s,o,c,u,l,d,p,f,m,g,v,y,E,A;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.game,n=t.player,i=t.analytics,a=t.storage,r=n.getPlayer(),s=a.getStorageData("context","contextId"),o=a.getStorageData("context","entryPointData"),c=a.getStorageData("context","sessionContextType"),l=(u=o||{}).type,d=u.matchId,p=u.playerScore,f=u.status,m=o.playerId,g=o.opponentId,r.isUserNew&&i.event(Dt._.NEW_USER),v=Ho.TOURNAMENT,y=Ho.SHARE_INVITE,E=Ho.MATCHING_GROUP,A=Ho.CHALLENGE_FRIEND,c!==v){e.next=15;break}return e.next=13,this.processTournamentMode();case 13:return this.game.globalScene.events.emit(ui.K.SWITCH,ui.C.GAME_SCENE),e.abrupt("return");case 15:if(c!==A||l!==y||"string"!==typeof m){e.next=20;break}return e.next=18,this.processChallengeFromPost(m);case 18:return this.game.globalScene.events.emit(ui.K.SWITCH,ui.C.GAME_SCENE),e.abrupt("return");case 20:if(c!==A||l!==A||"string"!==typeof d||"string"!==typeof m||"string"!==typeof g){e.next=25;break}return e.next=23,this.processChallengeFromMessage({contextId:s,matchId:d,playerId:m,opponentId:g});case 23:return"finished"===f?this.game.globalScene.events.emit(ui.K.SWITCH,ui.C.GAME_OVER_SCENE):this.game.globalScene.events.emit(ui.K.SWITCH,ui.C.GAME_SCENE),e.abrupt("return");case 25:if(c!==E||"string"!==typeof m||"number"!==typeof p){e.next=30;break}return e.next=28,this.processMatchingGroupMode(m,p);case 28:return this.game.globalScene.events.emit(ui.K.SWITCH,ui.C.GAME_SCENE),e.abrupt("return");case 30:if(!r.isUserNew){e.next=35;break}return e.next=33,this.processNewUserMode();case 33:return this.game.globalScene.events.emit(ui.K.SWITCH,ui.C.GAME_SCENE),e.abrupt("return");case 35:this.game.globalScene.events.emit(ui.K.SWITCH,ui.C.DASHBOARD_SCENE);case 36:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),t.processChallengeFromPost=function(){var e=(0,s.Z)(h().mark((function e(t){var n,i,a,r;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=this.game,i=n.match,a=n.player,r=a.getPlayerId(),!(r===t)){e.next=9;break}return e.next=7,i.single.start.processAsync({playerId:r});case 7:e.next=11;break;case 9:return e.next=11,i.challenge.post.processAsync({playerId:r,opponentId:t,fallbackSingleMode:!0});case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),t.processChallengeFromMessage=function(){var e=(0,s.Z)(h().mark((function e(t){var n,i,a,r,s,o,c,u;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.processContinueChallengeFromMessage(t);case 3:case 23:return e.abrupt("return");case 6:if(e.prev=6,e.t0=e.catch(0),!(e.t0 instanceof fT)){e.next=20;break}return i=this.game,a=i.profile,r=i.match,s=r.getMatchState(),e.next=14,a.requestProfiles([null!=(n=s.customData.opponentId)?n:""]);case 14:return o=a.getProfiles(),c=o[s.customData.opponentId],u=new WS({id:c.playerId,name:c.name,photo:c.photo}).toObject(),s.profiles[u.id].name=u.name,s.profiles[u.id].photo=u.photo,e.abrupt("return");case 20:if(!(e.t0 instanceof gT)){e.next=24;break}return e.next=23,this.processJoinChallengeFromMessage(t);case 24:case"end":return e.stop()}}),e,this,[[0,6]])})));return function(t){return e.apply(this,arguments)}}(),t.processContinueChallengeFromMessage=function(){var e=(0,s.Z)(h().mark((function e(t){var n,i,a,r,s,o,c,u,l;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.contextId,i=t.matchId,a=t.playerId,r=t.opponentId,s=this.game,o=s.match,c=s.player,u=c.getPlayerId(),!(a===u)){e.next=9;break}return e.next=7,o.challenge.continue.processAsync({contextId:n,matchId:i,playerId:u,opponentId:r});case 7:e.next=12;break;case 9:return l=r===fo.playerId,e.next=12,o.challenge.continue.processAsync({contextId:n,matchId:i,playerId:u,opponentId:l?r:a});case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),t.processJoinChallengeFromMessage=function(){var e=(0,s.Z)(h().mark((function e(t){var n,i,a,r,s,o,c;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.contextId,i=t.matchId,a=t.playerId,r=this.game,s=r.match,o=r.player,c=o.getPlayerId(),e.next=5,s.challenge.join.processAsync({contextId:n,matchId:i,playerId:c,opponentId:a});case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),t.processMatchingGroupMode=function(){var e=(0,s.Z)(h().mark((function e(t,n){var i,a,r;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=this.game,a=i.match,r=i.player,e.next=3,a.group.join.processAsync({playerId:r.getPlayerId(),opponentId:t,opponentScore:n});case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}(),t.processNewUserMode=function(){var e=(0,s.Z)(h().mark((function e(){var t,n,i,a;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.game,n=t.match,i=t.player,a=i.getPlayerId(),e.next=4,n.single.start.processAsync({playerId:a});case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),e}(),jb=Kb,Xb=function(e){function t(){for(var t,n,i=arguments.length,a=new Array(i),r=0;r<i;r++)a[r]=arguments[r];return(n=e.call.apply(e,O()(t=[this]).call(t,a))||this).context=void 0,n.loader=void 0,n}(0,o.Z)(t,e);var n=t.prototype;return n.init=function(){var e=this.game.storage;this.loader=new jb(this.game),this.context=new Wb(this.game),e.addStorage("context",ei)},n.getSessionContextTypes=function(){return Ho},n.processContextData=function(){var e=(0,s.Z)(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.loader.processContextData();case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0);case 8:case"end":return e.stop()}}),e,this,[[0,5]])})));return function(){return e.apply(this,arguments)}}(),n.detectContextSessionType=function(){var e=(0,s.Z)(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.context.detectContextSessionType();case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0);case 8:case"end":return e.stop()}}),e,this,[[0,5]])})));return function(){return e.apply(this,arguments)}}(),n.detectContextGameMode=function(){this.context.detectContextGameMode()},n.receiveContext=function(e,t,n){this.context.receiveContext(e,t,n)},t}(Phaser.Plugins.BasePlugin),qb=Xb,Jb=Ui.Z.DEFAULT,Qb=Jb.KEY,$b=Jb.FRAME,eI=function(e){function t(t){var n;return(n=e.call(this,t,Qb,$b.BUTTON_YELLOW_CIRCLE)||this).scene=void 0,n.scene=t,n.button.setSize(87,68).setDisplaySize(87,68),n.setName("Home"),n.createIcon(),n}return(0,o.Z)(t,e),t.prototype.createIcon=function(){var e=this.scene.add.image(0,0,Qb,$b.ICON_FLAT_HOME);e.setSize(43,43).setDisplaySize(43,43),this.add(e),Phaser.Display.Align.In.Center(e,this)},t}(ga.Z),tI=eI,nI=Ui.Z.DEFAULT,iI=nI.KEY,aI=nI.FRAME,rI=function(e){function t(t){var n;return(n=e.call(this,t,iI,aI.BUTTON_GREEN)||this).scene=void 0,n.scene=t,n.button.setWorldSize(170,72),n.setName("PlayWithFriends"),n.createLabel(),n}return(0,o.Z)(t,e),t.prototype.createLabel=function(){var e=this.scene.make.bitmapText({font:Sa.Z.PRIMARY.KEY,size:this.scene.fontSize(30),text:this.scene.lang.Text.PLAY}),t=10;Phaser.Display.Align.In.Center(e,this,0,-t);var n=this.scene.make.bitmapText({font:Sa.Z.PRIMARY.KEY,size:this.scene.fontSize(18),text:this.scene.lang.Text.WITH_FRIENDS});t=12,Phaser.Display.Align.In.Center(n,this,0,t),this.add([e,n])},t}(ga.Z),sI=Ui.Z.DEFAULT,oI=sI.KEY,cI=sI.FRAME,uI=function(e){function t(t){var n;return(n=e.call(this,t,oI,cI.BUTTON_YELLOW_CIRCLE,100.05,78.2)||this).scene=void 0,n.setName("Rank"),n.scene=t,n.createIcon(),n}return(0,o.Z)(t,e),t.prototype.createIcon=function(){var e=this.scene.make.image({key:oI,frame:cI.ICON_FLAT_RANK});e.setSize(43,43).setDisplaySize(43,43),Phaser.Display.Align.In.Center(e,this.button),this.add(e)},t}(ga.Z),lI=uI,hI=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n.homeButton=void 0,n.playButton=void 0,n.rankButton=void 0,n.scene=t,n.setName("FooterBar"),n.createButtons(),n.alignButtons(),n.scene.add.existing((0,Gi.Z)(n)),n}(0,o.Z)(t,e);var n=t.prototype;return n.alignButtons=function(){Phaser.Display.Align.In.Center(this.homeButton,this,-140),Phaser.Display.Align.In.Center(this.playButton,this,0),Phaser.Display.Align.In.Center(this.rankButton,this,140)},n.createButtons=function(){this.createHomeButton(),this.createPlayButton(),this.createShareButton()},n.createHomeButton=function(){this.homeButton=new tI(this.scene),this.add(this.homeButton)},n.createPlayButton=function(){this.playButton=new rI(this.scene),this.add(this.playButton)},n.createShareButton=function(){this.rankButton=new lI(this.scene),this.add(this.rankButton)},t}(Phaser.GameObjects.Container),dI=hI,pI=Ui.Z.DEFAULT,fI=pI.KEY,mI=pI.FRAME,gI=function(e){function t(t,n,i,a,r){var s;return(s=e.call(this,t,n,i)||this).barTopLeft=void 0,s.barTopMid=void 0,s.barTopRight=void 0,s.barMidLeft=void 0,s.barMidBg=void 0,s.barMidRight=void 0,s.barBottomLeft=void 0,s.barBottomMid=void 0,s.barBottomRight=void 0,s.setSize(a,r),s.setDepth(_i.Z.POPUP),s.createPopup(),s.scene.add.existing((0,Gi.Z)(s)),s}(0,o.Z)(t,e);var n=t.prototype;return n.createPopup=function(){this.createPopupImages(),this.updatePopupSize(),this.alignPopupImages()},n.createPopupImages=function(){this.barTopLeft=this.scene.add.image(0,0,fI,mI.TOURNAMENT_POPUP_TOP_LEFT),this.barTopMid=this.scene.add.image(0,0,fI,mI.TOURNAMENT_POPUP_TOP_MID),this.barTopRight=this.scene.add.image(0,0,fI,mI.TOURNAMENT_POPUP_TOP_RIGHT),this.barMidLeft=this.scene.add.image(0,0,fI,mI.TOURNAMENT_POPUP_MID_LEFT),this.barMidBg=this.scene.add.image(0,0,fI,mI.TOURNAMENT_POPUP_MID),this.barMidRight=this.scene.add.image(0,0,fI,mI.TOURNAMENT_POPUP_MID_RIGHT),this.barBottomLeft=this.scene.add.image(0,0,fI,mI.TOURNAMENT_POPUP_BOTTOM_LEFT),this.barBottomMid=this.scene.add.image(0,0,fI,mI.TOURNAMENT_POPUP_BOTTOM_MID),this.barBottomRight=this.scene.add.image(0,0,fI,mI.TOURNAMENT_POPUP_BOTTOM_RIGHT),this.barTopLeft.setWorldSize(65,48),this.barTopMid.setWorldSize(65,48),this.barTopRight.setWorldSize(65,48),this.barMidLeft.setWorldSize(65,48),this.barMidBg.setWorldSize(65,48),this.barMidRight.setWorldSize(65,48),this.barBottomLeft.setWorldSize(65,48),this.barBottomMid.setWorldSize(65,48),this.barBottomRight.setWorldSize(65,48),this.add([this.barTopRight,this.barTopMid,this.barBottomLeft,this.barBottomRight,this.barMidLeft,this.barMidRight,this.barTopLeft,this.barBottomMid,this.barMidBg])},n.updatePopupSize=function(){this.barBottomLeft.setWorldSize(this.width/3,this.height/3),this.barBottomMid.setWorldSize(this.width/3,this.height/3),this.barBottomRight.setWorldSize(this.width/3,this.height/3),this.barMidLeft.setWorldSize(this.width/3,this.height/3),this.barMidBg.setWorldSize(this.width/3,this.height/3),this.barMidRight.setWorldSize(this.width/3,this.height/3),this.barTopLeft.setWorldSize(this.width/3,this.height/3),this.barTopMid.setWorldSize(this.width/3,this.height/3),this.barTopRight.setWorldSize(this.width/3,this.height/3)},n.alignPopupImages=function(){Phaser.Display.Align.In.TopLeft(this.barTopLeft,this),Phaser.Display.Align.In.TopCenter(this.barTopMid,this),Phaser.Display.Align.In.TopRight(this.barTopRight,this),Phaser.Display.Align.In.LeftCenter(this.barMidLeft,this),Phaser.Display.Align.In.Center(this.barMidBg,this),Phaser.Display.Align.In.RightCenter(this.barMidRight,this),Phaser.Display.Align.In.BottomLeft(this.barBottomLeft,this),Phaser.Display.Align.In.BottomCenter(this.barBottomMid,this),Phaser.Display.Align.In.BottomRight(this.barBottomRight,this)},(0,re.Z)(t,[{key:"onClose",set:function(e){this.setInteractive({useHandCursor:!0}),this.on(Phaser.Input.Events.GAMEOBJECT_POINTER_DOWN,e)}}]),t}(Phaser.GameObjects.Container),vI=Ui.Z.DEFAULT,yI=vI.KEY,EI=vI.FRAME,AI=/^[A-Za-z0-9 ]*$/,SI=function(e){function t(t,n){var i;return(i=e.call(this,t)||this).avatar=void 0,i.rankIcon=void 0,i.rankText=void 0,i.bigRankText=void 0,i.username=void 0,i.bmtUsername=void 0,i.score=void 0,i.scoreText=void 0,i.highlight=void 0,i.payload=void 0,i.updateSize(),i.createUserHighlight(),i.createAvatar(),i.createRank(),i.createUsername(),i.createBitmapTextUsername(),i.createScore(),n&&i.updateInfo(n),i.scene.add.existing((0,Gi.Z)(i)),i}(0,o.Z)(t,e);var n=t.prototype;return n.updateInfo=function(e){this.payload=(0,r.Z)({},e,{isPlayer:e.isPlayer||!1}),this.updateHighlight(),this.updateAvatar(),this.updateRank(),this.updateUsername(),this.updateScore()},n.updateSize=function(){this.setSize(275,50)},n.updateHighlight=function(){var e=this.payload.isPlayer;this.highlight.setVisible(e)},n.createAvatar=function(){this.avatar=new Lo(this.scene,{key:yI,frame:EI.AVATAR_FRAME_YELLOW_SMALL,background:EI.AVATAR_BG_YELLOW_SMALL,width:32,height:32}),this.add(this.avatar),Phaser.Display.Align.In.LeftCenter(this.avatar,this,-11)},n.updateAvatar=function(){var e=this.payload,t=e.playerId,n=e.photo,i=e.rank,a=i<=4&&i>=1;this.avatar.loadPhoto(t,n,40),this.avatar.setVisible(a)},n.createRank=function(){this.createRankIcon(1),this.createRankText(1),this.createBigRankText(1)},n.updateRank=function(){var e=this.payload.rank;this.updateRankIcon(e),this.updateRankTexts(e)},n.getRankIconFrame=function(e){var t=EI.ICON_FLAG;switch(e){case 1:t=EI.ICON_CUP_GOLD;break;case 2:t=EI.ICON_CUP_SILVER;break;case 3:t=EI.ICON_CUP_COPPER}return t},n.createRankIcon=function(e){var t=this.getRankIconFrame(e);this.rankIcon=this.scene.make.image({key:yI,frame:t}),t!=EI.ICON_FLAG?this.rankIcon.setWorldSize(29.4,19.2):this.rankIcon.setWorldSize(17.3,17.3),this.add(this.rankIcon),Phaser.Display.Align.In.Center(this.rankIcon,this.avatar,0,11)},n.updateRankIcon=function(e){var t=this.getRankIconFrame(e),n=e<=4&&e>=1;this.rankIcon.setFrame(t),t!=EI.ICON_FLAG?this.rankIcon.setWorldSize(33,21):this.rankIcon.setWorldSize(17.3,17.3),this.rankIcon.setVisible(n)},n.createRankText=function(e){this.rankText=this.scene.make.bitmapText({font:Sa.Z.PRIMARY.KEY,size:this.scene.fontSize(15),text:""+e,origin:{x:.5,y:.5}}),this.add(this.rankText),Phaser.Display.Align.In.Center(this.rankText,this.rankIcon,0,-2)},n.createBigRankText=function(e){this.bigRankText=this.scene.make.bitmapText({font:Sa.Z.PRIMARY.KEY,size:this.scene.fontSize(18),text:""+e,origin:{x:.5,y:.5}}),this.add(this.bigRankText),this.bigRankText.setTint(10317116),Phaser.Display.Align.In.Center(this.bigRankText,this.avatar,0,2.5)},n.updateRankTexts=function(e){var t=0===e?"?":e.toString(),n=e<=4&&e>=1;this.rankText.setText(t),this.bigRankText.setText(t),this.rankText.setVisible(n),this.bigRankText.setVisible(!n)},n.createUserHighlight=function(){this.highlight=this.scene.make.image({key:yI,frame:EI.TOURNAMENT_USER_BG}),this.highlight.setWorldSize(220,34),this.add(this.highlight),Phaser.Display.Align.In.Center(this.highlight,this,20,3)},n.getShortName=function(e){var t=e.substring(0,7);return t.split(" ")[0]||t},n.createUsername=function(){this.username=this.scene.make.text({text:this.getShortName("FRIEND NAME"),style:{fontFamily:Sa.Z.FONT_FAMILY,fontSize:"17px",fontStyle:"bold"},origin:{x:0,y:.5}}),this.username.setTint(10317116),this.username.setHighQuality(),Phaser.Display.Align.In.LeftCenter(this.username,this.avatar,-46,3),this.add(this.username),this.username.kill()},n.createBitmapTextUsername=function(){this.bmtUsername=this.scene.make.bitmapText({text:"PLAYER A",font:Sa.Z.PRIMARY.KEY,size:this.scene.fontSize(17),origin:{x:0,y:.5}}),this.bmtUsername.setTint(10317116),this.add(this.bmtUsername),this.bmtUsername.setPosition(-82,2)},n.updateUsername=function(){var e=this.payload,t=e.name,n=e.rank,i=e.playerId,a=GameCore.Utils.String.removeDiacritics(this.getShortName(t)).toUpperCase(),r=0===n&&i!==this.scene.player.getPlayerId()?"WAITING...":a,s=AI.test(r)||"WAITING..."===r;this.username.setText(r),this.bmtUsername.setText(r),this.username.setVisible(!s),this.bmtUsername.setVisible(s)},n.createScore=function(){this.score=this.scene.add.container(),this.scoreText=this.scene.make.bitmapText({font:Sa.Z.PRIMARY.KEY,size:this.scene.fontSize(17),text:"132500",origin:{x:1,y:.5}}),this.scoreText.setTint(6565e3),this.score.add(this.scoreText),Phaser.Display.Align.In.Center(this.scoreText,this,0),this.add(this.score),Phaser.Display.Align.In.Center(this.score,this,100,1.5)},n.updateScore=function(){var e=this.payload.score;this.scoreText.setText(e)},t}(Phaser.GameObjects.Container),TI=SI;function bI(e,t){var n="undefined"!==typeof I()&&C()(e)||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){var n;if(!e)return;if("string"===typeof e)return II(e,t);var i=A()(n=Object.prototype.toString.call(e)).call(n,8,-1);"Object"===i&&e.constructor&&(i=e.constructor.name);if("Map"===i||"Set"===i)return T()(e);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return II(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var i=0;return function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function II(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var wI=Ui.Z.DEFAULT,CI=wI.KEY,xI=wI.FRAME,OI=function(e){function t(t,n){var i;return(i=e.call(this,t)||this).scene=void 0,i.tournamentBlock=void 0,i.leaders=void 0,i.leaderboardIsEmptyText=void 0,i.backgroundDots=void 0,i.scene=t,i.tournamentBlock=n,i.createLeaderboardIsEmptyText(),i.createLeaders(),i.leaderboardIsEmptyText.setVisible(!1),i.scene.add.existing((0,Gi.Z)(i)),i}(0,o.Z)(t,e);var n=t.prototype;return n.createBackgroundDots=function(){this.backgroundDots=this.scene.add.container(0,0);var e=this.scene.add.image(0,0,CI,xI.TOURNAMENT_DOT),t=this.scene.add.image(0,0,CI,xI.TOURNAMENT_DOT),n=this.scene.add.image(0,0,CI,xI.TOURNAMENT_DOT);this.backgroundDots.add(e),this.backgroundDots.add(t),this.backgroundDots.add(n),e.setPosition(-15,0),t.setPosition(0,0),n.setPosition(15,0),e.setWorldSize(4,4),t.setWorldSize(4,4),n.setWorldSize(4,4),this.add(this.backgroundDots),Phaser.Display.Align.In.Center(this.backgroundDots,this,0,110)},n.createLeaderboardIsEmptyText=function(){this.leaderboardIsEmptyText=this.scene.make.bitmapText({font:Sa.Z.PRIMARY.KEY,size:6,text:"Leaderboard is empty",origin:{x:.5,y:.5}}),this.leaderboardIsEmptyText.setTint(10514495),this.add(this.leaderboardIsEmptyText),Phaser.Display.Align.In.Center(this.leaderboardIsEmptyText,this,0,40)},n.createLeaders=function(){this.leaders=[];for(var e=0;e<4;e++){var t=new TI(this.scene);this.leaders.push(t),this.add(t)}Phaser.Display.Align.In.Center(this.leaders[0],this,0,0),Phaser.Display.Align.In.Center(this.leaders[1],this,0,44),Phaser.Display.Align.In.Center(this.leaders[2],this,0,87),Phaser.Display.Align.In.Center(this.leaders[3],this,0,128)},n.getLeaderboardData=function(){var e=(0,s.Z)(h().mark((function e(t){var n,i,a,r,s,o,c,u,l,d,p,f,m,g,v,y,E,A,S,T,b,I,w;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.scene.match.api.getLeaderboardAPI(),i=[],e.prev=2,e.next=5,n.getLeaderboardAsync(t,{limit:4});case 5:i=e.sent,e.next=11;break;case 8:e.prev=8,e.t0=e.catch(2);case 11:a=Oe()(i).call(i,(function(e){return null!==e&&void 0!==e})),r=[],s=this.scene.player.getPlayerId(),o=!1,c=void 0,u=0;case 17:if(!(u<a.length)){e.next=28;break}if(l=a[u]){e.next=21;break}return e.abrupt("continue",25);case 21:if(GameCore.Utils.Object.hasOwn(l,"playerId")){e.next=23;break}return e.abrupt("continue",25);case 23:"string"===typeof(d=l.playerId)&&(r.push(d),d===s&&(o=!0,c=l));case 25:u++,e.next=17;break;case 28:if(o){e.next=42;break}return r.push(s),p=[],e.prev=31,e.next=34,n.getLeaderboardAsyncByPlayerId(t,s);case 34:p=e.sent,e.next=40;break;case 37:e.prev=37,e.t1=e.catch(31);case 40:(c=p.length>0?p[0]:void 0)&&a.push(c);case 42:return e.next=44,this.scene.profile.requestProfiles(r);case 44:f=this.scene.profile.getProfiles(),m={leaders:[],player:void 0,isPlayerInTournament:o||!!c},g=bI(a);case 47:if((v=g()).done){e.next=73;break}if(y=v.value){e.next=51;break}return e.abrupt("continue",71);case 51:if(GameCore.Utils.Object.hasOwn(y,"playerId")){e.next=53;break}return e.abrupt("continue",71);case 53:if(GameCore.Utils.Object.hasOwn(y,"score")){e.next=55;break}return e.abrupt("continue",71);case 55:if(GameCore.Utils.Object.hasOwn(y,"rank")){e.next=57;break}return e.abrupt("continue",71);case 57:if(E=y.playerId,A=y.score,S=y.rank,"string"===typeof E){e.next=60;break}return e.abrupt("continue",71);case 60:if("string"===typeof A){e.next=62;break}return e.abrupt("continue",71);case 62:if("number"===typeof S){e.next=64;break}return e.abrupt("continue",71);case 64:if(T=f[E],b={playerId:E,photo:"",score:A,rank:S,name:"Player"},T&&(I=T.name,w=T.photo,b={playerId:E,photo:w,score:A,rank:S,name:I}),E===s&&(b.isPlayer=!0,m.player=b),o||E!==s){e.next=70;break}return e.abrupt("continue",71);case 70:m.leaders.push(b);case 71:e.next=47;break;case 73:return e.abrupt("return",m);case 74:case"end":return e.stop()}}),e,this,[[2,8],[31,37]])})));return function(t){return e.apply(this,arguments)}}(),n.updateData=function(e){var t=e.leaders,n=e.player,i=this.getLeaderPayloadPlaceholders(),a=A()(t).call(t,0,4);a.forEach((function(e,t){return i[t]=e}));var r=R()(i).call(i,(function(e){return!0===e.isPlayer}));if(r)r.name="YOU",r.isPlayer=!0;else{var s=this.scene.player.getPlayer(),o=s.playerId,c=s.photo,u=a.length<this.leaders.length?a.length:this.leaders.length-1;i[u]=null!=n?n:{playerId:o,photo:c,score:"?",rank:0===a.length?1:0,name:"YOU",isPlayer:!0},A()(i).call(i,u+1).forEach((function(e){return e.rank=0}))}this.leaders.forEach((function(e,t){return e.updateInfo(i[t])}))},n.getLeaderPayloadPlaceholders=function(){var e,t;return Re()(e=mr()(t=new Array(this.leaders.length)).call(t,null)).call(e,(function(e,t){return{playerId:"",rank:0,photo:"",name:"WAITING...",score:"?",isPlayer:!1}}))},t}(Phaser.GameObjects.Container),_I=OI,RI=Ui.Z.DEFAULT,PI=RI.KEY,kI=RI.FRAME,MI=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n.popup=void 0,n.tournamentCupIcon=void 0,n.tournamentClockIcon=void 0,n.tournamentPalmIcon=void 0,n.tournamentLine=void 0,n.tournamentName=void 0,n.tournamentPlayButton=void 0,n.playButtonText=void 0,n.tournamentTime=void 0,n.tournamentLeaders=void 0,n.showPopUp=void 0,n.showItems=void 0,n.payload=void 0,n.handlePlayTournament=(0,s.Z)(h().mark((function e(){var t;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n.scene.game.globalScene.screen.open(Pi.o4.NOTIFY_SCREEN,{message:"Joining tournament...",loading:!0}),e.next=4,n.processJoinTournament();case 4:if(t=e.sent){e.next=9;break}return e.next=8,n.processContinueTournament();case 8:t=e.sent;case 9:if(t){e.next=11;break}throw new Error("Cannot play this tournament");case 11:e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),n.scene.game.globalScene.screen.open(Pi.o4.NOTIFY_SCREEN,{message:"Sorry, you cannot join\nat this time.",duration:3e3,loading:!1});case 16:return e.prev=16,n.scene.game.globalScene.screen.close(Pi.o4.NOTIFY_SCREEN),e.finish(16);case 19:case"end":return e.stop()}}),e,null,[[0,13,16,19]])}))),n.scene=t,n.createPopup(),n.createTournamentCupIcon(),n.createTournamentClockIcon(),n.createTournamentPalmIcon(),n.createTournamentName(),n.createTournamentPlayButton(),n.createTournamentTime(),n.createTournamentLine(),n.createTournamentLeaders(),n.scene.add.existing((0,Gi.Z)(n)),n}(0,o.Z)(t,e);var n=t.prototype;return n.createPopup=function(){this.popup=new gI(this.scene,0,0,277,245),this.add(this.popup),this.setSize(280,249)},n.createTournamentCupIcon=function(){this.tournamentCupIcon=this.scene.add.image(0,0,PI,kI.TOURNAMENT_CUP_ICON),this.tournamentCupIcon.setDisplaySize(21,22),this.add(this.tournamentCupIcon),Phaser.Display.Align.In.TopLeft(this.tournamentCupIcon,this,-3,-7)},n.createTournamentPalmIcon=function(){this.tournamentPalmIcon=this.scene.add.image(0,0,PI,kI.TOURNAMENT_PALM_ICON),this.tournamentPalmIcon.setDisplaySize(24.3,22.5),this.add(this.tournamentPalmIcon),this.tournamentPalmIcon.setPosition(-110.5,-92.5)},n.createTournamentClockIcon=function(){this.tournamentClockIcon=this.scene.add.image(0,0,PI,kI.TOURNAMENT_CLOCK_ICON);this.tournamentClockIcon.setDisplaySize(27,27),this.add(this.tournamentClockIcon),this.tournamentClockIcon.setPosition(-110,-95)},n.createTournamentName=function(){this.tournamentName=this.scene.add.text(0,0,"Tournament Name",{fontFamily:Sa.Z.TEXT_FONT,fontSize:"18px"}),this.tournamentName.setOrigin(0,.5),this.tournamentName.setTint(10514495),this.tournamentName.setHighQuality(),this.add(this.tournamentName),this.tournamentName.setPosition(-89,-103)},n.createTournamentPlayButton=function(){this.tournamentPlayButton=new ga.Z(this.scene,PI,kI.TOURNAMENT_PLAY_BUTTON,64,26);var e=this.scene.make.bitmapText({font:Sa.Z.PRIMARY.KEY,size:this.scene.fontSize(16),text:"PLAY",origin:{x:.5,y:.5}});this.tournamentPlayButton.add(e),this.add(this.tournamentPlayButton),this.playButtonText=e,this.tournamentPlayButton.onClick=this.handlePlayTournament,this.tournamentPlayButton.setPosition(96,-78)},n.processJoinTournament=function(){var e=(0,s.Z)(h().mark((function e(){var t,n;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=this.scene.player.getPlayerId(),n=this.payload.id.toString()||"",e.next=5,this.scene.match.tournament.join.processAsync({tournamentId:n,playerId:t});case 5:return this.scene.scene.switch(ui.C.GAME_SCENE),e.abrupt("return",!0);case 9:return e.prev=9,e.t0=e.catch(0),e.abrupt("return",!1);case 13:case"end":return e.stop()}}),e,this,[[0,9]])})));return function(){return e.apply(this,arguments)}}(),n.processContinueTournament=function(){var e=(0,s.Z)(h().mark((function e(){var t,n;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=this.scene.player.getPlayerId(),n=FBInstant.context.getID()||"",e.next=5,this.scene.match.tournament.continue.processAsync({playerId:t,contextId:n});case 5:return this.scene.scene.switch(ui.C.GAME_SCENE),e.abrupt("return",!0);case 9:return e.prev=9,e.t0=e.catch(0),e.abrupt("return",!1);case 13:case"end":return e.stop()}}),e,this,[[0,9]])})));return function(){return e.apply(this,arguments)}}(),n.createTournamentTime=function(){this.tournamentTime=this.scene.make.bitmapText({font:Sa.Z.PRIMARY.KEY,size:5,text:"Competition ends in 7 days",origin:{x:0,y:.5}}),this.tournamentTime.setTint(10514495),this.add(this.tournamentTime),this.tournamentTime.setPosition(-88,-78)},n.createTournamentLine=function(){this.tournamentLine=this.scene.add.image(0,0,PI,kI.TOURNAMENT_LINE),this.tournamentLine.setDisplaySize(260,1),this.add(this.tournamentLine),this.tournamentLine.setPosition(0,-61)},n.createTournamentLeaders=function(){this.tournamentLeaders=new _I(this.scene,this),this.tournamentLeaders.updateData({leaders:[],player:void 0,isPlayerInTournament:!1}),this.add(this.tournamentLeaders),Phaser.Display.Align.In.TopCenter(this.tournamentLeaders,this,0,-85)},n.showProperTournamentIcon=function(e){switch([this.tournamentCupIcon,this.tournamentClockIcon,this.tournamentPalmIcon].forEach((function(e){return e.kill()})),e.payload.gameplayMode){case Ao.SINGLE:this.tournamentPalmIcon.revive();break;case Ao.BLITZ:this.tournamentClockIcon.revive()}},n.getTournamentName=function(e){if(e.title)return e.title;if(e.payload.playerName){var t=this.getShortName(e.payload.playerName);return GameCore.Utils.String.removeDiacritics(t).toUpperCase()+"'S TOURNAMENT"}return e.payload.gameplayMode?e.payload.gameplayMode.toUpperCase()+" TOURNAMENT":"TOURNAMENT"},n.getShortName=function(e){var t=e.substring(0,7);return t.split(" ")[0]||t},n.getEndTimeString=function(e){var t=1e3*e.endTime-Date.now(),n=Math.floor(t/864e5),i=Math.floor(t/36e5)%24,a=Math.floor(t/6e4)%60,r=Math.floor(t/1e3)%60,s="Competition ends in ";return s+=n>0?n+" days":i>0?i+" hours":a>0?a+" minutes":r+" seconds"},n.updateInfo=function(){var e=(0,s.Z)(h().mark((function e(t){var n,i,a,r;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(this.payload=t,this.showProperTournamentIcon(t),n=this.getTournamentName(t),this.tournamentName.setText(n),i=18;this.tournamentName.width>208;)this.tournamentName.setFontSize(i+"px"),i--;return a=this.getEndTimeString(t),this.tournamentTime.setText(a),r={leaders:[],player:void 0,isPlayerInTournament:!1},e.prev=9,e.next=12,this.tournamentLeaders.getLeaderboardData(t.payload.leaderboardId);case 12:r=e.sent,e.next=18;break;case 15:e.prev=15,e.t0=e.catch(9);case 18:this.tournamentLeaders.updateData(r),r.isPlayerInTournament?this.playButtonText.setText("PLAY"):this.playButtonText.setText("JOIN"),this.setLayout(this.tournamentName.width>145?"long":"short");case 21:case"end":return e.stop()}}),e,this,[[9,15]])})));return function(t){return e.apply(this,arguments)}}(),n.setLayout=function(e){"long"===e?(this.tournamentName.setPosition(-89,-103),this.tournamentTime.setPosition(-88,-78),this.tournamentPlayButton.setPosition(96,-78),this.tournamentLine.setPosition(0,-61)):(this.tournamentName.setPosition(-89,-105),this.tournamentTime.setPosition(-88,-82),this.tournamentPlayButton.setPosition(96,-93),this.tournamentLine.setPosition(0,-68))},n.runShowPopUpAnimation=function(e,t){this.scene.tweens.killTweensOf(this),this.showPopUp=new Cv({targets:[this],delay:e,duration:t,props:{y:{start:this.y+70,to:this.y}}}),this.showPopUp.play()},n.runShowItemAnimation=function(e,t){var n=this.getAll();this.scene.tweens.killTweensOf(n),this.showItems=new ud({targets:n,duration:t,delay:this.scene.tweens.stagger(50,{start:e+50}),props:{scale:{duration:1e3,getStart:function(e){return.8*e.scale},getEnd:function(e){return e.scale},ease:Phaser.Math.Easing.Elastic.Out,easeParams:[.1,.45]}}}),this.showItems.play()},n.runShowUpAnimation=function(e,t){void 0===e&&(e=0),void 0===t&&(t=300);var n=100*e;this.runShowPopUpAnimation(n,t),this.runShowItemAnimation(n,t)},t}(Phaser.GameObjects.Container),DI=MI,NI=function(e){function t(t){var n;(n=e.call(this,t)||this).scene=void 0,n.currentPlayerId=void 0,n.scroller=void 0,n.scene=t;var i=n.scene.player;return n.currentPlayerId=i.getPlayerId(),n.createReuseScroller(),n.scene.add.existing((0,Gi.Z)(n)),n}(0,o.Z)(t,e);var n=t.prototype;return n.createReuseScroller=function(){this.scroller=new Iv(this.scene,{classType:DI,listConfigs:[],width:280,height:370,padding:10,marginTop:5,marginBottom:5}),this.scene.renderer instanceof Phaser.Renderer.WebGL.WebGLRenderer&&this.scroller.createBound(Ui.Z.DEFAULT.KEY,Ui.Z.DEFAULT.FRAME.BLANK,10,16643027),this.scroller.createMask(),this.scroller.setPosition(0,25),this.add(this.scroller)},n.updateData=function(e){this.scroller.updateConfig(e),this.showTournaments()},n.removeTournaments=function(){this.scroller.updateConfig([])},n.getTournaments=function(){return this.scroller.getChildren()},n.showTournaments=function(){var e=this,t=this.getTournaments();if(t.length<1)return this.scene.isSwitchable=!0,void this.scene.board.handleEmptyTournamentBoard(!0,"No tournaments available!");for(var n=Math.min(t.length,6),i=0;i<n;i++){var a=t[i];a&&(a.setVisible(!0),a.runShowUpAnimation(i,300))}var r=300+100*n+250;this.scene.time.delayedCall(r,(function(){e.scene.isSwitchable=!0,e.scroller.setEnable(!0)}))},t}(Phaser.GameObjects.Container),LI=NI,BI=Ui.Z.DEFAULT,GI=BI.KEY,UI=BI.FRAME,FI=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n.tabFriends=void 0,n.tabGlobal=void 0,n.tabYours=void 0,n.scene=t,n.createTabGlobal(),n.createTabFriends(),n.createTabYours(),n}(0,o.Z)(t,e);var n=t.prototype;return n.selectTabGlobal=function(){this.tabGlobal.button.setFrame(UI.LEADERBOARD_TAB_ON),this.tabFriends.button.setFrame(UI.LEADERBOARD_TAB_OFF),this.tabYours.button.setFrame(UI.LEADERBOARD_TAB_OFF)},n.selectTabFriends=function(){this.tabGlobal.button.setFrame(UI.LEADERBOARD_TAB_OFF),this.tabFriends.button.setFrame(UI.LEADERBOARD_TAB_ON),this.tabYours.button.setFrame(UI.LEADERBOARD_TAB_OFF)},n.selectTabYours=function(){this.tabGlobal.button.setFrame(UI.LEADERBOARD_TAB_OFF),this.tabFriends.button.setFrame(UI.LEADERBOARD_TAB_OFF),this.tabYours.button.setFrame(UI.LEADERBOARD_TAB_ON)},n.createTabGlobal=function(){this.tabGlobal=new ga.Z(this.scene,GI,UI.LEADERBOARD_TAB_OFF),this.tabGlobal.button.setSize(85,33).setDisplaySize(85,33),this.tabGlobal.setName("GlobalTab");var e=this.scene.make.bitmapText({font:Sa.Z.PRIMARY.KEY,size:9,text:"GLOBAL",origin:{x:.5,y:.55}});this.tabGlobal.add(e),Phaser.Display.Align.In.Center(this.tabGlobal,this,-95),this.add(this.tabGlobal)},n.createTabFriends=function(){this.tabFriends=new ga.Z(this.scene,GI,UI.LEADERBOARD_TAB_OFF),this.tabFriends.button.setSize(85,33).setDisplaySize(85,33),this.tabFriends.setName("FriendsTab");var e=this.scene.make.bitmapText({font:Sa.Z.PRIMARY.KEY,size:9,text:"FRIENDS",origin:{x:.5,y:.55}});this.tabFriends.add(e),Phaser.Display.Align.In.Center(this.tabFriends,this,0),this.add(this.tabFriends)},n.createTabYours=function(){this.tabYours=new ga.Z(this.scene,GI,UI.LEADERBOARD_TAB_OFF),this.tabYours.button.setSize(85,33).setDisplaySize(85,33),this.tabYours.setName("YoursTab");var e=this.scene.make.bitmapText({font:Sa.Z.PRIMARY.KEY,size:9,text:"YOURS",origin:{x:.5,y:.55}});this.tabYours.add(e),Phaser.Display.Align.In.Center(this.tabYours,this,95),this.add(this.tabYours)},t}(Phaser.GameObjects.Container),ZI=FI,HI={GLOBAL:"global",FRIENDS:"friends",YOURS:"yours"},YI=Ui.Z.DEFAULT,zI=YI.KEY,VI=YI.FRAME,WI=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n.background=void 0,n.tabs=void 0,n.tournaments=void 0,n.loading=void 0,n.message=void 0,n.createTournamentButton=void 0,n.messageAnimation=void 0,n.handleCreateAndJoinTournament=(0,s.Z)(h().mark((function e(){var t,i,a,r,s,o,c,u;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=!1,i=n.scene,a=i.match,r=i.game,s=i.player,o=r.globalScene,e.prev=3,o.screen.open(Pi.o4.NOTIFY_SCREEN,{message:"Creating tournament...",loading:!0}),e.next=7,a.tournament.create.processAsync({playerId:s.getPlayerId(),gameplayMode:Ao.SINGLE,isCreatedFromTournamentScene:!0});case 7:return e.next=9,FBInstant.getTournamentAsync();case 9:return c=e.sent,u=c.getID(),t=!0,e.next=14,a.tournament.join.processAsync({playerId:s.getPlayerId(),tournamentId:u.toString()});case 14:o.screen.close(Pi.o4.NOTIFY_SCREEN),n.scene.scene.switch(ui.C.GAME_SCENE),e.next=22;break;case 18:e.prev=18,e.t0=e.catch(3),t?o.screen.open(Pi.o4.NOTIFY_SCREEN,{message:"Sorry, you cannot join\nat this time.",duration:3e3,loading:!1}):o.screen.open(Pi.o4.NOTIFY_SCREEN,{message:"Sorry, unable to get\ntournament data.",duration:3e3,loading:!1});case 22:case"end":return e.stop()}}),e,null,[[3,18]])}))),n.scene=t,n.setSize(310,470),n.createBackground(),n.createLoading(),n.createMessage(),n.createCreateTournamentButton(),n.createContents(),n.createAnimation(),n.scene.add.existing((0,Gi.Z)(n)),n}(0,o.Z)(t,e);var n=t.prototype;return n.showLoading=function(e){this.loading.setVisible(e),this.handleEmptyTournamentBoard(!1)},n.handleEmptyTournamentBoard=function(e,t){this.message.setVisible(e),this.createTournamentButton.setVisible(e&&this.scene.tabId===HI.YOURS),t&&(this.message.setText(t),this.messageAnimation.play())},n.createBackground=function(){this.background=new Sr(this.scene,0,0,310,470),this.add(this.background)},n.createLoading=function(){this.loading=new ns.Z(this.scene),this.loading.setTint(12237498),this.loading.setWorldSize(113,113),this.add(this.loading),Phaser.Display.Align.In.Center(this.loading,this.background)},n.createMessage=function(){this.message=this.scene.make.bitmapText({font:Sa.Z.PRIMARY.KEY,size:this.scene.fontSize(18),origin:{x:.5,y:.5}}),this.message.setTint(10317116),this.add(this.message),Phaser.Display.Align.In.Center(this.message,this.background)},n.createCreateTournamentButton=function(){this.createTournamentButton=new ga.Z(this.scene,zI,VI.TOURNAMENT_CREATE_BUTTON,220,41);var e=this.scene.add.image(0,0,zI,VI.TOURNAMENT_CREATE_ICON);e.setWorldSize(19.5,19.5);var t=this.scene.make.bitmapText({font:Sa.Z.PRIMARY.KEY,size:this.scene.fontSize(20),text:"CREATE TOURNAMENT",origin:{x:.5,y:.5}});this.createTournamentButton.add([e,t]),t.setPosition(14,-1),e.setX(t.x-t.width/2-16.75),this.createTournamentButton.onClick=this.handleCreateAndJoinTournament,this.add(this.createTournamentButton),this.createTournamentButton.setVisible(!1),this.createTournamentButton.setPosition(0,150)},n.createContents=function(){this.createLeaders(),this.createTitle(),this.createTabs()},n.createLeaders=function(){this.tournaments=new LI(this.scene),this.add(this.tournaments),Phaser.Display.Align.In.Center(this.tournaments,this.background,0,0)},n.createTitle=function(){var e=this.scene.add.container(),t=this.scene.make.image({key:zI,frame:VI.RIBBON_SHORT});t.setWorldSize(271,81);var n=this.scene.make.bitmapText({font:Sa.Z.PRIMARY.KEY,size:this.scene.fontSize(30),text:"Tournaments"});Phaser.Display.Align.In.Center(n,t,0,-10),e.add([t,n]),Phaser.Display.Align.In.TopCenter(e,this.background,0,5),this.add(e)},n.createTabs=function(){this.tabs=new ZI(this.scene),this.add(this.tabs),Phaser.Display.Align.In.TopCenter(this.tabs,this.background,0,-55)},n.createAnimation=function(){this.messageAnimation=new la.Z({targets:[this.message,this.createTournamentButton],duration:60,repeat:2})},t}(Phaser.GameObjects.Container),KI=WI,jI=function(e){function t(){for(var t,n,i=arguments.length,a=new Array(i),r=0;r<i;r++)a[r]=arguments[r];return(n=e.call.apply(e,O()(t=[this]).call(t,a))||this).board=void 0,n.footerBar=void 0,n.tabId=void 0,n.offset=void 0,n.isRequesting=void 0,n.isSwitchable=void 0,n.run=function(){n.isRequesting=!1;var e=[{selector:yo,callback:function(e){if(n.isRequesting=e,n.board.showLoading(e),!1===e){var t=n.game.stateStorage.getState(),i=vo(t);n.board.tournaments.updateData(i)}}}];n.handleStateChange(e),n.selectGlobalTab()},n.handleSelectGlobalTab=function(){n.isRequesting||n.isSwitchable&&(n.isSwitchable=!1,n.selectGlobalTab())},n.handleSelectFriendsTab=function(){n.isRequesting||n.isSwitchable&&(n.isSwitchable=!1,n.selectFriendsTab())},n.handleSelectYoursTab=function(){n.isRequesting||n.isSwitchable&&(n.isSwitchable=!1,n.selectYoursTab())},n.handlePlayWithFriend=(0,s.Z)(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n.match.context.choose.processAsync({playerId:n.player.getPlayerId(),fallbackSingleMode:!1});case 3:n.scene.switch(ui.C.GAME_SCENE),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])}))),n.handleHomeClick=function(){n.scene.switch(ui.C.DASHBOARD_SCENE)},n.handleLeaderboardClick=function(){n.scene.switch(ui.C.LEADERBOARD_SCENE)},n}(0,o.Z)(t,e);var n=t.prototype;return n.preload=function(){this.events.on("wake",this.run),this.events.on("create",this.run)},n.create=function(){e.prototype.create.call(this),this.gameZone.setPosition(0,0),this.createBackground(Ri.Z.BACKGROUND.KEY,"0"),this.scene.bringToTop(),this.createBoard(),this.createFooterBar(),this.registerEvents()},n.registerEvents=function(){this.world.events.on(Nt.Z.RESIZE,this.updateUI,this)},n.updateUI=function(){this.alignBoard(),this.alignFooterBar()},n.selectGlobalTab=function(){var e=(0,s.Z)(h().mark((function e(){var t,n,i,a,r,s,o,c,u,l,d,p,f,m;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.tabId=HI.GLOBAL,this.offset=0,this.board.showLoading(!0),this.board.tournaments.removeTournaments(),this.board.tabs.selectTabGlobal(),t=[],e.prev=6,n=this.match.api.getLeaderboardAPI(),e.next=10,n.getWorldTournamentLeaderboardsAsync();case 10:t=e.sent,e.next=16;break;case 13:e.prev=13,e.t0=e.catch(6);case 16:i=[],a=0;case 18:if(!(a<t.length)){e.next=28;break}if(r=t[a],s=r.id,o=r.title,c=r.endTime,u=r.contextID,l=r.payload,d=l.gameplayMode,p=void 0===d?Ao.SINGLE:d,f=l.leaderboardId){e.next=23;break}return e.abrupt("continue",25);case 23:m={id:parseInt(s),title:o,endTime:c,contextID:u,payload:{playerId:"global",playerName:"global",leaderboardId:f,gameplayMode:p}},i.push(m);case 25:a++,e.next=18;break;case 28:this.board.showLoading(!1),this.board.tournaments.updateData(i);case 30:case"end":return e.stop()}}),e,this,[[6,13]])})));return function(){return e.apply(this,arguments)}}(),n.selectFriendsTab=function(){var e=(0,s.Z)(h().mark((function e(){var t,n,i,a,r,s,o,c,u,l,d,p,f,m,g;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.tabId=HI.FRIENDS,this.offset=0,this.board.showLoading(!0),this.board.tournaments.removeTournaments(),this.board.tabs.selectTabFriends(),t=[],e.prev=6,e.next=9,FBInstant.tournament.getTournamentsAsync();case 9:t=e.sent,e.next=15;break;case 12:e.prev=12,e.t0=e.catch(6);case 15:n=[],i=0;case 17:if(!(i<t.length)){e.next=34;break}if(a=t[i].getPayload()){e.next=21;break}return e.abrupt("continue",31);case 21:if(r=JSON.parse(a),s=this.player.getPlayerId(),o=r.gameplayMode,c=void 0===o?Ao.SINGLE:o,u=r.leaderboardId,l=r.playerId,d=r.playerName,u&&l!==s){e.next=26;break}return e.abrupt("continue",31);case 26:p=t[i].getTitle(),f=t[i].getEndTime(),m=t[i].getContextID(),g={id:t[i].getID(),title:p,endTime:f,contextID:m,payload:{playerId:l,playerName:d,leaderboardId:u,gameplayMode:c}},n.push(g);case 31:i++,e.next=17;break;case 34:this.board.showLoading(!1),this.board.tournaments.updateData(n);case 36:case"end":return e.stop()}}),e,this,[[6,12]])})));return function(){return e.apply(this,arguments)}}(),n.selectYoursTab=function(){var e=(0,s.Z)(h().mark((function e(){var t,n,i,a,r,s,o,c,u,l,d,p,f,m,g;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.tabId=HI.YOURS,this.offset=0,this.board.showLoading(!0),this.board.tournaments.removeTournaments(),this.board.tabs.selectTabYours(),t=[],e.prev=6,e.next=9,FBInstant.tournament.getTournamentsAsync();case 9:t=e.sent,e.next=15;break;case 12:e.prev=12,e.t0=e.catch(6);case 15:n=[],i=0;case 17:if(!(i<t.length)){e.next=34;break}if(a=t[i].getPayload()){e.next=21;break}return e.abrupt("continue",31);case 21:if(r=JSON.parse(a),s=this.player.getPlayerId(),o=r.gameplayMode,c=void 0===o?Ao.SINGLE:o,u=r.leaderboardId,l=r.playerId,d=r.playerName,u&&l===s){e.next=26;break}return e.abrupt("continue",31);case 26:p=t[i].getTitle(),f=t[i].getEndTime(),m=t[i].getContextID(),g={id:t[i].getID(),title:p,endTime:f,contextID:m,payload:{playerId:l,playerName:d,leaderboardId:u,gameplayMode:c}},n.push(g);case 31:i++,e.next=17;break;case 34:this.board.showLoading(!1),this.board.tournaments.updateData(n);case 36:case"end":return e.stop()}}),e,this,[[6,12]])})));return function(){return e.apply(this,arguments)}}(),n.createBoard=function(){this.board=new KI(this),this.alignBoard(),this.board.tabs.tabFriends.onClick=this.handleSelectFriendsTab,this.board.tabs.tabGlobal.onClick=this.handleSelectGlobalTab,this.board.tabs.tabYours.onClick=this.handleSelectYoursTab},n.alignBoard=function(){Phaser.Display.Align.In.Center(this.board,this.gameZone,0,-40)},n.createFooterBar=function(){this.footerBar=new dI(this),this.alignFooterBar(),this.footerBar.homeButton.onClick=this.handleHomeClick,this.footerBar.playButton.onClick=this.handlePlayWithFriend,this.footerBar.rankButton.onClick=this.handleLeaderboardClick},n.alignFooterBar=function(){var e=this.board.y+this.board.height/2+30,t=this.gameZone.height-this.ads.getSafeAreaBottom();this.footerBar.setPosition(this.board.x,(e+t)/2-20)},t}(Bi.Z),XI=jI;var qI=n(206),JI=n.n(qI),QI=["player","match"],$I="null",ew=GameCore.Utils,tw=ew.Valid,nw=ew.Object,iw=GameCore.Configs.Rollbar,aw=iw.UseMockup,rw=iw.FilterError,sw=function(e){function t(){for(var t,n,i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return(n=e.call.apply(e,O()(t=[this]).call(t,r))||this).enable=void 0,n.rollbar=void 0,n.events=[],n.beforeSend=function(e,t,i){aw&&n.showPopupError(i)},n.checkIgnore=function(e,t,i){try{return!!n.isErrorIgnore(t)}catch(a){return!1}},n.showPopupError=function(e){var t,i,a,r=null==e||null==(t=e.body)||null==(t=t.trace)?void 0:t.exception;r&&n.events.push(r);var s=(null==e||null==(i=e.body)||null==(i=i.trace)?void 0:i.frames)||[];(a=n.events).push.apply(a,s);var o=document.getElementById("popup-error");o||((o=document.createElement("div")).id="popup-error",document.body.appendChild(o)),o.innerHTML='<div style="color: #fff; display: flex; flex-flow: column; align-items: center; ">\n      <pre id="json" style="overflow: auto; background-color: rgb(195 112 97 / 80%); padding: 10px; max-height: 80vh; max-width: 90vw; border: 5px solid #545454;">'+Or()(n.events,null,2)+'</pre>\n      <button id="close" style="cursor: pointer; padding: 10px 20px; border-radius: 100px;">Close</button>\n      </div>',o.style="top: 0px; z-index: 10000; width: 100vw; max-height: 100vh; position: absolute; display: flex; align-items: center; justify-content: center;";var c=document.getElementById("close");c&&(c.onclick=n.closePopup)},n.closePopup=function(){n.events=[{}];var e=document.getElementById("popup-error");null==e||e.remove()},n.isNoneErrorEvent=function(e){if(!e||0===e.length)return!1;if(!e[0].message)return!1;return"Non-Error promise rejection captured with keys: code, message"===e[0].message},n.isErrorIgnore=function(e){if(!e||0===e.length)return!1;var t=!1,i=e[0];return i instanceof Object&&(t=n.isIgnoreByCode(i)||n.isIgnoreByMessage(i)),t},n.isIgnoreByCode=function(e){if(nw.hasOwn(e,"code")){var t=e.code,n=rw.Codes,i=n.accepted,a=n.ignored;if("string"===typeof t){if(hi()(i).call(i,t)>=0)return!1;if(hi()(a).call(a,t)>=0)return!0}}if(nw.hasOwn(e,"name")){var r=e.name,s=rw.Codes,o=s.accepted,c=s.ignored;if("string"===typeof r){if(hi()(o).call(o,r)>=0)return!1;if(hi()(c).call(c,r)>=0)return!0}}return!1},n.isIgnoreByMessage=function(e){if(nw.hasOwn(e,"message")){var t=e.message,n=rw.Messages,i=n.accepted,a=n.ignored;if("string"===typeof t){if(hi()(i).call(i,t)>=0)return!1;if(hi()(a).call(a,t)>=0)return!0}}return!1},n.addExtraState=function(){try{if(!nw.hasOwn(window,"game"))return;if(!nw.hasOwn(window.game,"storage"))return;if(!nw.hasOwn(window.game.storage,"getState"))return;var e=(0,window.game.stateStorage.getState)()||{},t=e.player,i=e.match,r=(0,a.Z)(e,QI);n.rollbar.configure({payload:{player:t,match:i,other:r}})}catch(s){}},n}(0,o.Z)(t,e);var n=t.prototype;return n.setup=function(){this.rollbar=new(JI())({accessToken:$I,checkIgnore:this.checkIgnore,onSendCallback:this.beforeSend,captureUncaught:!0,scrubTelemetryInputs:!0,captureUnhandledRejections:!0,autoInstrument:{dom:!1,navigation:!1},payload:{environment:"production",client:{javascript:{code_version:"21"}},server:{root:"webpack:///./",branch:"master"}}}),this.enable=!0,this.sendTestException()},n.configure=function(e){this.rollbar&&this.rollbar.configure(e)},n.sendTestException=function(){if(!tw.isDebugger()){var e=FBInstant.player.getID();e&&this.rollbar.debug(new Error("Test rollbar"),{playerID:e})}},n.sendException=function(e,t){e&&this.enable&&this.rollbar&&(this.addExtraState(),this.rollbar.error(e,t))},t}(Phaser.Plugins.BasePlugin),ow=sw,cw=n(600),uw=n(601),lw=["Enable"],hw=function(e){function t(){return e.apply(this,arguments)||this}(0,o.Z)(t,e);var i=t.prototype;return i.boot=function(){var t=(0,s.Z)(h().mark((function t(){return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.prototype.boot.call(this),this.addExtraGameObjectMethods(),this.addExtraFBInstantFunctions(),this.addPlugins(),t.next=6,this.addDevPlugins();case 6:return t.next=8,this.initAdsAsync();case 8:this.addScenes(),this.addDevScenes(),this.initWorld(),this.initStorage(),this.initLanguage(),this.initVisibilityChangeHandler(),this.initUtils(),this.initRollbar(),this.initConsole(),this.initDebugger(),this.initStatistics(),this.initProfilerPlugin(),this.initAdaptivePerformance();case 21:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),i.start=function(){var t=(0,s.Z)(h().mark((function t(){return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.prototype.start.call(this);case 1:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),i.addExtraGameObjectMethods=function(){var e=new y(this);e.addKillRevive(),e.addKillReviveGroup(),e.addDrawDebugBox(),e.addSetWorldSize(),e.addSetWorldSizeForContainer(),e.addGetWorldPosition(),e.addHighQuality(),e.addSetLineHeightForBitmapText()},i.addExtraFBInstantFunctions=function(){var e=new d.Z(this.facebook);this.facebook.getLocale=e.getLocale,this.facebook.shareAsync=e.shareAsync,this.facebook.inviteAsync=e.inviteAsync,this.facebook.switchAsync=e.switchAsync,this.facebook.chooseAsync=e.chooseAsync,this.facebook.createAsync=e.createAsync,this.facebook.sendMessage=e.sendMessage,this.facebook.getContextID=e.getContextID,this.facebook.getPlayerToken=e.getPlayerToken,this.facebook.matchPlayerAsync=e.matchPlayerAsync,this.facebook.getContextPlayers=e.getContextPlayers,this.facebook.setLoadingProgress=e.setLoadingProgress,this.facebook.attemptToAddShortcut=e.attemptToAddShortcut,this.facebook.attemptToSubscribeBot=e.attemptToSubscribeBot,this.facebook.postSessionScoreAsync=e.postSessionScoreAsync,this.facebook.getRewardedVideoAsync=e.getRewardedVideoAsync,this.facebook.sendNotificationAsync=e.sendNotificationAsync,this.facebook.getInterstitialAdAsync=e.getInterstitialAdAsync,this.facebook.isSupportedAPI=e.isSupportedAPI,e.injectTournament(),this.facebook.progressLoading=new g(this)},i.addPlugins=function(){this.plugins.install("StateStorage",Hn,!0,"stateStorage"),this.plugins.install("Rollbar",ow,!0,"rollbar"),this.plugins.install("AdsManager",V,!0,"ads"),this.plugins.install("AuthManager",me,!0,"auth"),this.plugins.install("AudioManager",ae,!0,"audio"),this.plugins.install("WorldManager",Qn,!0,"world"),this.plugins.install("PlayerManager",At,!0,"player"),this.plugins.install("LanguageManager",Ai,!0,"lang"),this.plugins.install("StoragePlugin",wA,!0,"storage"),this.storage=this.plugins.get("StoragePlugin"),this.plugins.install("ContextPlugin",qb,!0,"gameContext"),this.plugins.install("MatchPlugin",zb,!0,"match"),this.plugins.install("ProfileManager",Pt,!0,"profile"),this.plugins.install("LanguageManager",Ai,!0,"lang"),this.plugins.install("AnalyticsManager",j,!0,"analytics"),this.plugins.install("AdaptivePerformance",we,!0,"performance"),this.plugins.install("VisibilityChangeHandler",AA,!0,"visibility"),this.plugins.installScenePlugin("textStyler",jn,"textStyler"),this.plugins.installScenePlugin("ScreenManager",Wt,"screen"),this.plugins.installScenePlugin("FrameCapture",ye,"frameCapture"),window.SpinePlugin&&this.plugins.installScenePlugin("SpinePlugin",SpinePlugin,"spine"),this.stateStorage=this.plugins.get("StateStorage"),this.rollbar=this.plugins.get("Rollbar"),this.ads=this.plugins.get("AdsManager"),this.auth=this.plugins.get("AuthManager"),this.audio=this.plugins.get("AudioManager"),this.world=this.plugins.get("WorldManager"),this.player=this.plugins.get("PlayerManager"),this.lang=this.plugins.get("LanguageManager"),this.match=this.plugins.get("MatchPlugin"),this.profile=this.plugins.get("ProfileManager"),this.analytics=this.plugins.get("AnalyticsManager"),this.performance=this.plugins.get("AdaptivePerformance"),this.visibility=this.plugins.get("VisibilityChangeHandler"),this.gameContext=this.plugins.get("ContextPlugin")},i.addDevPlugins=function(){var e=(0,s.Z)(h().mark((function e(){var t,i,a;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(GameCore.Utils.Valid.isDebugger()){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,Promise.all([n.e(7),n.e(942)]).then(n.bind(n,621));case 4:return t=e.sent.default,e.next=7,n.e(401).then(n.bind(n,622));case 7:return i=e.sent.default,e.next=10,Promise.all([n.e(708),n.e(123)]).then(n.bind(n,623));case 10:a=e.sent.default,this.plugins.install("Console",t,!0,"console"),this.plugins.install("Statistics",i,!0,"statistics"),this.plugins.install("Profiler",a,!0,"profiler"),this.eruda=this.plugins.get("Console"),this.statistics=this.plugins.get("Statistics"),this.profiler=this.plugins.get("Profiler");case 17:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),i.addScenes=function(){this.scene.add(ui.C.BOOT_SCENE,Oi,!0),this.scene.add(ui.C.LOAD_SCENE,oA,!1),this.scene.add(ui.C.GAME_SCENE,rv,!1),this.scene.add(ui.C.GAME_OVER_SCENE,lu,!1),this.scene.add(ui.C.DASHBOARD_SCENE,po,!1),this.scene.add(ui.C.LEADERBOARD_SCENE,Qv,!1),this.scene.add(ui.C.TOURNAMENT_SCENE,XI,!1),this.scene.add(ui.C.RESULT_MATCH_SCENE,yA,!1),this.scene.add(ui.C.GLOBAL_SCENE,wa.Z,!1)},i.addDevScenes=function(){var e=(0,s.Z)(h().mark((function e(){var t,i;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(GameCore.Utils.Valid.isDebugger()){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,n.e(638).then(n.bind(n,624));case 4:return t=e.sent.default,e.next=7,n.e(997).then(n.bind(n,625));case 7:i=e.sent.default,this.scene.add(ui.C.TEST_SCENE,t,!1),this.scene.add(ui.C.ANIMATIONS_SCENE,i,!1);case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),i.initAdsAsync=function(){var e=(0,s.Z)(h().mark((function e(){var t,n,i;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=GameCore.Configs.Ads,e.next=3,this.getAdServiceInstance();case 3:(n=e.sent).setGame(this),i=(0,r.Z)({},t.InterstitialAdOptions),this.ads.configure(n,{enabled:t.Enabled,calculateSafeAreaBottom:t.CalculateSafeAreaBottom,enableRewardVideoResetInterstitial:t.EnableRewardVideoResetInterstitial,interstitialAdOptions:i,rewardAdOptions:t.RewardAdOptions,bannerAdOptions:t.BannerAdOptions});case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),i.getAdServiceInstance=function(){var e=(0,s.Z)(h().mark((function e(){var t,i,a,r;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=GameCore.Configs.Ads,i=t.AdService,!t.Mockup.Enable){e.next=6;break}return e.next=4,n.e(131).then(n.bind(n,626));case 4:return a=e.sent.default,e.abrupt("return",a);case 6:if("google"!==i){e.next=19;break}return e.prev=7,e.next=10,this.initGoogleAdInstanceAsync();case 10:if(null===(r=e.sent)){e.next=13;break}return e.abrupt("return",r);case 13:e.next=19;break;case 15:return e.prev=15,e.t0=e.catch(7),e.abrupt("return",cw.default);case 19:return e.abrupt("return",cw.default);case 20:case"end":return e.stop()}}),e,this,[[7,15]])})));return function(){return e.apply(this,arguments)}}(),i.initGoogleAdInstanceAsync=function(){var e=(0,s.Z)(h().mark((function e(){var t,n,i,a,r,s,o;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("loaded"!==uw.default.initStatus){e.next=2;break}return e.abrupt("return",uw.default);case 2:if(t=GameCore.Configs.Ads.AdServiceConfigs.Google){e.next=6;break}return e.abrupt("return",null);case 6:return n=t.DataAdClient,i=t.DataAdChannel,a=t.DataAdBreakTest,r=t.DataAdFrequencyHint,s=t.DataAdHost,o={dataAdClient:n,dataAdChannel:i,dataAdBreakTest:a,dataAdFrequencyHint:r,dataAdHost:s},e.prev=8,uw.default.setGame(this),e.next=12,uw.default.initGoogleAdsAsync(o);case 12:return e.abrupt("return",uw.default);case 15:return e.prev=15,e.t0=e.catch(8),e.abrupt("return",null);case 19:case"end":return e.stop()}}),e,this,[[8,15]])})));return function(){return e.apply(this,arguments)}}(),i.initWorld=function(){var e=GameCore.Configs.Game,t=e.AutoResize,n=e.PortraitRatio,i=e.PortraitWidth,a=e.PortraitHeight,r=e.LandscapeRatio,s=e.LandscapeWidth,o=e.LandscapeHeight,c=t,u=e.DisableLandscape,l=e.FullSizeOnLandscape,h=n,d=i,p=a,f=r,m=s,g=o;this.world.configure({autoResize:c,portraitRatio:h,portraitWidth:d,portraitHeight:p,landscapeRatio:f,landscapeWidth:m,landscapeHeight:g,disableLandscape:u,fullSizeOnLandscape:l}),this.world.resize(e.ForcePixelRatio)},i.initStorage=function(){var e=new ci(this);this.stateStorage.setInitiator(e)},i.initLanguage=function(){var e=this.facebook.getLocale();this.lang.configure({locale:e,upperCaseText:!0})},i.initVisibilityChangeHandler=function(){this.visibility.configure()},i.initUtils=function(){this.handlePauseAudio(),this.removeUnusedPipelines()},i.initConsole=function(){GameCore.Utils.Valid.isDebugger()&&(GameCore.Configs.Debugger.ShowConsole&&this.eruda.configure({tool:["console","info"],defaults:{theme:"Dark"}}))},i.initDebugger=function(){if(GameCore.Utils.Valid.isDebugger()){var e=GameCore.Configs.Debugger,t=e.ShowInspector,n=e.ShowMonitoring;(t||n)&&this.debugger&&this.debugger.configure(GameCore.Configs.Debugger)}},i.initStatistics=function(){GameCore.Utils.Valid.isDebugger()&&(GameCore.Configs.Statistics.Enable&&this.statistics&&this.statistics.configure(GameCore.Configs.Statistics))},i.initParticleEditor=function(){GameCore.Utils.Valid.isDebugger()&&(GameCore.Configs.ParticleEditor.Enable&&this.particleEditor&&this.particleEditor.configure(GameCore.Configs.ParticleEditor))},i.initProfilerPlugin=function(){GameCore.Utils.Valid.isDebugger()&&(GameCore.Configs.ProfilerPlugin.Enable&&this.profiler&&this.profiler.configure())},i.initAdaptivePerformance=function(){var e=GameCore.Configs.Performance,t=e.Enable,n=(0,a.Z)(e,lw);if(t){var i=this.world.getPixelRatio();this.performance.configure((0,r.Z)({pixelRatio:i},n)),this.performance.active()}},i.initCanvasRecorderPlugin=function(){var e=this;if(GameCore.Utils.Valid.isDebugger()){var t=GameCore.Configs.CanvasRecorder;if(t.Enable){var n=t.Options,i=n.Type,a=n.Quality,r=n.RecordFps,o=n.SyncFps;this.canvasRecorder.configure({type:i,quality:a,syncFps:o,recordFps:r});var c=document.querySelector("canvas");if(c){this.canvasRecorder.setCanvas(c);var l=this.canvasRecorder.getOptions(),d=this.canvasRecorder.waitNextFrame;this.canvasRecorder.waitNextFrame=(0,s.Z)(h().mark((function t(){return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!l.syncFps){t.next=5;break}return e.loop.sleep(),t.abrupt("return",new(u())((function(t){e.events.once(Phaser.Core.Events.POST_RENDER,t),e.loop.lastTime=1e3/l.recordFps,e.loop.step()})));case 5:return e.loop.wake(),t.abrupt("return",d.call(e.canvasRecorder));case 7:case"end":return t.stop()}}),t)})))}}}},i.initRollbar=function(){GameCore.Configs.Rollbar.Enable&&this.rollbar.setup()},i.handlePauseAudio=function(){var e=this;this.sound.pauseOnBlur=!1,this.visibility.addEventVisible((function(){e.audio.playMusic(),e.audio.resumeAllSounds()})),this.visibility.addEventHidden((function(){e.audio.pauseMusic(),e.audio.pauseAllSounds()}))},i.removeUnusedPipelines=function(){var e=this.renderer;if(e instanceof Phaser.Renderer.WebGL.WebGLRenderer){var t=e.pipelines,n=Phaser.Renderer.WebGL.Pipelines;if(n)[n.ROPE_PIPELINE,n.LIGHT_PIPELINE,n.POSTFX_PIPELINE,n.POINTLIGHT_PIPELINE,n.BITMAPMASK_PIPELINE].forEach((function(e){var n;null==(n=t.get(e))||n.destroy(),t.remove(e)}))}},t}(Phaser.Game),dw=hw,pw=GameCore.Configs.Debugger.ShowInspector,fw={parent:"app",type:Phaser.AUTO,width:0,height:0,scale:{autoRound:!0},dom:{createContainer:!1},loader:{maxParallelDownloads:6,crossOrigin:"no-cros"},input:{gamepad:!1,keyboard:pw,touch:{capture:!0},smoothFactor:1,activePointers:1,windowEvents:!1},disableContextMenu:!0,render:{pixelArt:!1,antialias:!0,antialiasGL:!0,transparent:!1,desynchronized:!1,powerPreference:"high-performance",clearBeforeRender:!1,roundPixels:!1},plugins:{global:[]}};(0,i.j6)();var mw=setInterval((function(){window.__analyticsInitiated&&(window.__fbGameReady=!1,clearInterval(mw),clearInterval(window.__fbInstantLoadingTimer),GameSDK.setLoadingProgress(30),gtag("event","app_initialize",{send_to:["GA"]}),function(){try{var e=new dw(fw);window.game=e}catch(t){(0,i.tO)(t)}}())}),50)},83:function(e,t,n){"use strict";n.d(t,{_:function(){return i}});var i={BUTTON_CLICK:"button_click",SCREEN_OPEN:"screen_open",LOAD_START:"load_start",LOAD_COMPLETE:"load_complete",APP_READY:"app_ready",TUTORIAL_BEGIN:"tutorial_begin",TUTORIAL_STEP:"tutorial_step",TUTORIAL_COMPLETE:"tutorial_complete",MATCH_START:"match_start",MATCH_RESCUE:"match_rescue",MATCH_END:"match_end",LEVEL_START:"level_start",LEVEL_RESCUE:"level_rescue",LEVEL_END:"level_end",SHARE:"share",MESSAGE:"message",INVITE:"invite",SHORTCUT_CREATE:"shortcut_create",SHORTCUT_CREATE_POPUP:"shortcut_create_popup",BOT_SUBSCRIBE:"bot_subscribe",BOT_SUBSCRIBE_POPUP:"bot_subscribe_popup",AD_LOAD:"ad_load",AD_LOAD_FAILED:"ad_load_failed",AD_SHOW:"ad_show",AD_SHOW_FAILED:"ad_show_failed",MISSING_AD_SHOW:"missing_ad_show",NEW_USER:"new_user",AD_IMPRESSION:"ad_impression",JOIN_GROUP:"join_group",FINISH_DAILY_TASK:"finish_daily_task",TOURNAMENT_SHARE:"tournament_share",TOURNAMENT_CREATE:"tournament_create",TOURNAMENT_POST_SCORE:"tournament_post_score",LOG_IN:"log_in"}},426:function(e,t,n){"use strict";var i=n(427),a=function(){function e(e,t,n,a){this.playerId=void 0,this.name=void 0,this.photo=void 0,this.locale=void 0,this.playerId=e,this.name=t,this.photo=n||i.Z.AVATAR.FILE,this.locale=a||"en_US"}return e.prototype.toObject=function(){return{playerId:this.playerId,name:this.name,photo:this.photo,locale:this.locale}},e}();t.Z=a},433:function(e,t){"use strict";t.Z={OPEN:"open",CLOSE:"close",CREATED:"created"}},196:function(e,t){"use strict";t.Z={RESIZE:"resize",CHANGE_LAYOUT:"change-layout"}},194:function(e,t,n){"use strict";n.d(t,{F0:function(){return u},Gm:function(){return c},qZ:function(){return o}});var i=n(66),a=n.n(i),r=n(52),s=n.n(r),o=function(e){return new(a())((function(t){return setTimeout(t,e)}))},c=function(e){var t=new Date(e),n=new Date;return t.getDate()===n.getDate()&&t.getMonth()===n.getMonth()&&t.getFullYear()===n.getFullYear()},u=function(e,t){void 0===t&&(t=!0);var n=new Date(e).toISOString();return t?s()(n).call(n,11,-5):s()(n).call(n,14,-5)}},193:function(e,t,n){"use strict";n.d(t,{R0:function(){return s},Tv:function(){return r},j6:function(){return i},sw:function(){return a},tO:function(){return o}});n(425),n(352),n(67),n(98);var i=function(){var e=setInterval((function(){window.Sentry&&clearInterval(e)}),100)},a=function(e,t){window.Sentry&&window.Sentry.addBreadcrumb({category:e,message:t})},r=function(e){window.Sentry&&window.Sentry.setUser(e)},s=function(e,t){},o=function(e){}},434:function(e,t,n){"use strict";t.Z=function(e,t,n){if(t&&n){var i=window.game.globalScene.children.getAll(),a=!0;if(i.forEach((function(e){e instanceof GameCore.Screen&&e!==n&&e.visible&&(a=!1)})),!a)return}var r=document.getElementById("background-mask");r&&(r.style.backgroundColor="rgba(0, 0, 0, "+e+")")}},428:function(e,t){"use strict";t.Z={GENERIC_NOTIFICATION:0,NEW_USER_NOTIFICATION:1,MONDAY_NOTIFICATION:2,TUESDAY_NOTIFICATION:3,WEDNESDAY_NOTIFICATION:4,THURSDAY_NOTIFICATION:5,FRIDAY_NOTIFICATION:6,SATURDAY_NOTIFICATION:7,SUNDAY_NOTIFICATION:8}},602:function(e,t,n){"use strict";n.d(t,{Z:function(){return r}});var i=JSON.parse('{"data":["Smith","Johnson","Williams","Brown","Jones","Miller","Davis","Garcia","Rodriguez","Wilson","Martinez","Anderson","Taylor","Thomas","Hernandez","Moore","Martin","Jackson","Thompson","White","Lopez","Lee","Gonzalez","Harris","Clark","Lewis","Robinson","Walker","Perez","Hall","Young","Allen","Sanchez","Wright","King","Scott","Green","Baker","Adams","Nelson","Hill","Ramirez","Campbell","Mitchell","Roberts","Carter","Phillips","Evans","Turner","Torres","Parker","Collins","Edwards","Stewart","Flores","Morris","Nguyen","Murphy","Rivera","Cook","Rogers","Morgan","Peterson","Cooper","Reed","Bailey","Bell","Gomez","Kelly","Howard","Ward","Cox","Diaz","Richardson","Wood","Watson","Brooks","Bennett","Gray","James","Reyes","Cruz","Hughes","Price","Myers","Long","Foster","Sanders","Ross","Morales","Powell","Sullivan","Russell","Ortiz","Jenkins","Gutierrez","Perry","Butler","Barnes","Fisher","Henderson","Coleman","Simmons","Patterson","Jordan","Reynolds","Hamilton","Graham","Kim","Gonzales","Alexander","Ramos","Wallace","Griffin","West","Cole","Hayes","Chavez","Gibson","Bryant","Ellis","Stevens","Murray","Ford","Marshall","Owens","Mcdonald","Harrison","Ruiz","Kennedy","Wells","Alvarez","Woods","Mendoza","Castillo","Olson","Webb","Washington","Tucker","Freeman","Burns","Henry","Vasquez","Snyder","Simpson","Crawford","Jimenez","Porter","Mason","Shaw","Gordon","Wagner","Hunter","Romero","Hicks","Dixon","Hunt","Palmer","Robertson","Black","Holmes","Stone","Meyer","Boyd","Mills","Warren","Fox","Rose","Rice","Moreno","Schmidt","Patel","Ferguson","Nichols","Herrera","Medina","Ryan","Fernandez","Weaver","Daniels","Stephens","Gardner","Payne","Kelley","Dunn","Pierce","Arnold","Tran","Spencer","Peters","Hawkins","Grant","Hansen","Castro","Hoffman","Hart","Elliott","Cunningham","Knight","Bradley","Carroll","Hudson","Duncan","Armstrong","Berry","Andrews","Johnston","Ray","Lane","Riley","Carpenter","Perkins","Aguilar","Silva","Richards","Willis","Matthews","Chapman","Lawrence","Garza","Vargas","Watkins","Wheeler","Larson","Carlson","Harper","George","Greene","Burke","Guzman","Morrison","Munoz","Jacobs","Obrien","Lawson","Franklin","Lynch","Bishop","Carr","Salazar","Austin","Mendez","Gilbert","Jensen","Williamson","Montgomery","Harvey","Oliver","Howell","Dean","Hanson","Weber","Garrett","Sims","Burton","Fuller","Soto","Mccoy","Welch","Chen","Schultz","Walters","Reid","Fields","Walsh","Little","Fowler","Bowman","Davidson","May","Day","Schneider","Newman","Brewer","Lucas","Holland","Wong","Banks","Santos","Curtis","Pearson","Delgado","Valdez","Pena","Rios","Douglas","Sandoval","Barrett","Hopkins","Keller","Guerrero","Stanley","Bates","Alvarado","Beck","Ortega","Wade","Estrada","Contreras","Barnett","Caldwell","Santiago","Lambert","Powers","Chambers","Nunez","Craig","Leonard","Lowe","Rhodes","Byrd","Gregory","Shelton","Frazier","Becker","Maldonado","Fleming","Vega","Sutton","Cohen","Jennings","Parks","Mcdaniel","Watts","Barker","Norris","Vaughn","Vazquez","Holt","Schwartz","Steele","Benson","Neal","Dominguez","Horton","Terry","Wolfe","Hale","Lyons","Graves","Haynes","Miles","Park","Warner","Padilla","Bush","Thornton","Mccarthy","Mann","Zimmerman","Erickson","Fletcher","Mckinney","Page","Dawson","Joseph","Marquez","Reeves","Klein","Espinoza","Baldwin","Moran","Love","Robbins","Higgins","Ball","Cortez","Le","Griffith","Bowen","Sharp","Cummings","Ramsey","Hardy","Swanson","Barber","Acosta","Luna","Chandler","Blair","Daniel","Cross","Simon","Dennis","Oconnor","Quinn","Gross","Navarro","Moss","Fitzgerald","Doyle","Mclaughlin","Rojas","Rodgers","Stevenson","Singh","Yang","Figueroa","Harmon","Newton","Paul","Manning","Garner","Mcgee","Reese","Francis","Burgess","Adkins","Goodman","Curry","Brady","Christensen","Potter","Walton","Goodwin","Mullins","Molina","Webster","Fischer","Campos","Avila","Sherman","Todd","Chang","Blake","Malone","Wolf","Hodges","Juarez","Gill","Farmer","Hines","Gallagher","Duran","Hubbard","Cannon","Miranda","Wang","Saunders","Tate","Mack","Hammond","Carrillo","Townsend","Wise","Ingram","Barton","Mejia","Ayala","Schroeder","Hampton","Rowe","Parsons","Frank","Waters","Strickland","Osborne","Maxwell","Chan","Deleon","Norman","Harrington","Casey","Patton","Logan","Bowers","Mueller","Glover","Floyd","Hartman","Buchanan","Cobb","French","Kramer","Mccormick","Clarke","Tyler","Gibbs","Moody","Conner","Sparks","Mcguire","Leon","Bauer","Norton","Pope","Flynn","Hogan","Robles","Salinas","Yates","Lindsey","Lloyd","Marsh","Mcbride","Owen","Solis","Pham","Lang","Pratt","Lara","Brock","Ballard","Trujillo","Shaffer","Drake","Roman","Aguirre","Morton","Stokes","Lamb","Pacheco","Patrick","Cochran","Shepherd","Cain","Burnett","Hess","Li","Cervantes","Olsen","Briggs","Ochoa","Cabrera","Velasquez","Montoya","Roth","Meyers","Cardenas","Fuentes","Weiss","Hoover","Wilkins","Nicholson","Underwood","Short","Carson","Morrow","Colon","Holloway","Summers","Bryan","Petersen","Mckenzie","Serrano","Wilcox","Carey","Clayton","Poole","Calderon","Gallegos","Greer","Rivas","Guerra","Decker","Collier","Wall","Whitaker","Bass","Flowers","Davenport","Conley","Houston","Huff","Copeland","Hood","Monroe","Massey","Roberson","Combs","Franco","Larsen","Pittman","Randall","Skinner","Wilkinson","Kirby","Cameron","Bridges","Anthony","Richard","Kirk","Bruce","Singleton","Mathis","Bradford","Boone","Abbott","Charles","Allison","Sweeney","Atkinson","Horn","Jefferson","Rosales","York","Christian","Phelps","Farrell","Castaneda","Nash","Dickerson","Bond","Wyatt","Foley","Chase","Gates","Vincent","Mathews","Hodge","Garrison","Trevino","Villarreal","Heath","Dalton","Valencia","Callahan","Hensley","Atkins","Huffman","Roy","Boyer","Shields","Lin","Hancock","Grimes","Glenn","Cline","Delacruz","Camacho","Dillon","Parrish","Oneill","Melton","Booth","Kane","Berg","Harrell","Pitts","Savage","Wiggins","Brennan","Salas","Marks","Russo","Sawyer","Baxter","Golden","Hutchinson","Liu","Walter","Mcdowell","Wiley","Rich","Humphrey","Johns","Koch","Suarez","Hobbs","Beard","Gilmore","Ibarra","Keith","Macias","Khan","Andrade","Ware","Stephenson","Henson","Wilkerson","Dyer","Mcclure","Blackwell","Mercado","Tanner","Eaton","Clay","Barron","Beasley","Oneal","Preston","Small","Wu","Zamora","Macdonald","Vance","Snow","Mcclain","Stafford","Orozco","Barry","English","Shannon","Kline","Jacobson","Woodard","Huang","Kemp","Mosley","Prince","Merritt","Hurst","Villanueva","Roach","Nolan","Lam","Yoder","Mccullough","Lester","Santana","Valenzuela","Winters","Barrera","Leach","Orr","Berger","Mckee","Strong","Conway","Stein","Whitehead","Bullock","Escobar","Knox","Meadows","Solomon","Velez","Odonnell","Kerr","Stout","Blankenship","Browning","Kent","Lozano","Bartlett","Pruitt","Buck","Barr","Gaines","Durham","Gentry","Mcintyre","Sloan","Melendez","Rocha","Herman","Sexton","Moon","Hendricks","Rangel","Stark","Lowery","Hardin","Hull","Sellers","Ellison","Calhoun","Gillespie","Mora","Knapp","Mccall","Morse","Dorsey","Weeks","Nielsen","Livingston","Leblanc","Mclean","Bradshaw","Glass","Middleton","Buckley","Schaefer","Frost","Howe","House","Mcintosh","Ho","Pennington","Reilly","Hebert","Mcfarland","Hickman","Noble","Spears","Conrad","Arias","Galvan","Velazquez","Huynh","Frederick","Randolph","Cantu","Fitzpatrick","Mahoney","Peck","Villa","Michael","Donovan","Mcconnell","Walls","Boyle","Mayer","Zuniga","Giles","Pineda","Pace","Hurley","Mays","Mcmillan","Crosby","Ayers","Case","Bentley","Shepard","Everett","Pugh","David","Mcmahon","Dunlap","Bender","Hahn","Harding","Acevedo","Raymond","Blackburn","Duffy","Landry","Dougherty","Bautista","Shah","Potts","Arroyo","Valentine","Meza","Gould","Vaughan","Fry","Rush","Avery","Herring","Dodson","Clements","Sampson","Tapia","Bean","Lynn","Crane","Farley","Cisneros","Benton","Ashley","Mckay","Finley","Best","Blevins","Friedman","Moses","Sosa","Blanchard","Huber","Frye","Krueger","Bernard","Rosario","Rubio","Mullen","Benjamin","Haley","Chung","Moyer","Choi","Horne","Yu","Woodward","Ali","Nixon","Hayden","Rivers","Estes","Mccarty","Richmond","Stuart","Maynard","Brandt","Oconnell","Hanna","Sanford","Sheppard","Church","Burch","Levy","Rasmussen","Coffey","Ponce","Faulkner","Donaldson","Schmitt","Novak","Costa","Montes","Booker","Cordova","Waller","Arellano","Maddox","Mata","Bonilla","Stanton","Compton","Kaufman","Dudley","Mcpherson","Beltran","Dickson","Mccann","Villegas","Proctor","Hester","Cantrell","Daugherty","Cherry","Bray","Davila","Rowland","Levine","Madden","Spence","Good","Irwin","Werner","Krause","Petty","Whitney","Baird","Hooper","Pollard","Zavala","Jarvis","Holden","Haas","Hendrix","Mcgrath","Bird","Lucero","Terrell","Riggs","Joyce","Mercer","Rollins","Galloway","Duke","Odom","Andersen","Downs","Hatfield","Benitez","Archer","Huerta","Travis","Mcneil","Hinton","Zhang","Hays","Mayo","Fritz","Branch","Mooney","Ewing","Ritter","Esparza","Frey","Braun","Gay","Riddle","Haney","Kaiser","Holder","Chaney","Mcknight","Gamble","Vang","Cooley","Carney","Cowan","Forbes","Ferrell","Davies","Barajas","Shea","Osborn","Bright","Cuevas","Bolton","Murillo","Lutz","Duarte","Kidd","Key","Cooke"]}'),a=function(e){return Math.floor(Math.random()*e)},r=function(){if(!i)return"Unknown";if(!i.data)return"Unknown";var e=i.data;if(!Array.isArray(e))return"Unknown";var t=e.length;return e[a(t)]+" "+e[a(t)]}},423:function(e,t){"use strict";t.Z=function(e,t){var n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789*#%&!",i="",a=e;void 0!=t&&(a-=t.length,i+=t);for(var r=0;r<a;r++){var s=Math.floor(67*Math.random());i+=n.charAt(s)}return i}}},t={};function n(i){var a=t[i];if(void 0!==a)return a.exports;var r=t[i]={id:i,loaded:!1,exports:{}};return e[i].call(r.exports,r,r.exports,n),r.loaded=!0,r.exports}n.m=e,n.amdO={},function(){var e=[];n.O=function(t,i,a,r){if(!i){var s=1/0;for(l=0;l<e.length;l++){i=e[l][0],a=e[l][1],r=e[l][2];for(var o=!0,c=0;c<i.length;c++)(!1&r||s>=r)&&Object.keys(n.O).every((function(e){return n.O[e](i[c])}))?i.splice(c--,1):(o=!1,r<s&&(s=r));if(o){e.splice(l--,1);var u=a();void 0!==u&&(t=u)}}return t}r=r||0;for(var l=e.length;l>0&&e[l-1][2]>r;l--)e[l]=e[l-1];e[l]=[i,a,r]}}(),n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,{a:t}),t},n.d=function(e,t){for(var i in t)n.o(t,i)&&!n.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},n.f={},n.e=function(e){return Promise.all(Object.keys(n.f).reduce((function(t,i){return n.f[i](e,t),t}),[]))},n.u=function(e){return e+"."+{7:"46333a16bb1406a7a404",123:"396d347facfee065f74e",131:"2bf6871ed5f72bef5c13",401:"5c298eb3d752309fa00c",638:"6396311e1aeaa4fd7b49",708:"3f130222868e3be9368a",783:"a32aa1bd60562c707693",942:"96c00b575ecae69fc18b",997:"119a7573d8795622f458"}[e]+".bundle.js"},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.hmd=function(e){return(e=Object.create(e)).children||(e.children=[]),Object.defineProperty(e,"exports",{enumerable:!0,set:function(){throw new Error("ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: "+e.id)}}),e},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},function(){var e={},t="game-core:";n.l=function(i,a,r,s){if(e[i])e[i].push(a);else{var o,c;if(void 0!==r)for(var u=document.getElementsByTagName("script"),l=0;l<u.length;l++){var h=u[l];if(h.getAttribute("src")==i||h.getAttribute("data-webpack")==t+r){o=h;break}}o||(c=!0,(o=document.createElement("script")).charset="utf-8",o.timeout=120,n.nc&&o.setAttribute("nonce",n.nc),o.setAttribute("data-webpack",t+r),o.src=i),e[i]=[a];var d=function(t,n){o.onerror=o.onload=null,clearTimeout(p);var a=e[i];if(delete e[i],o.parentNode&&o.parentNode.removeChild(o),a&&a.forEach((function(e){return e(n)})),t)return t(n)},p=setTimeout(d.bind(null,void 0,{type:"timeout",target:o}),12e4);o.onerror=d.bind(null,o.onerror),o.onload=d.bind(null,o.onload),c&&document.head.appendChild(o)}}}(),n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},function(){var e;n.g.importScripts&&(e=n.g.location+"");var t=n.g.document;if(!e&&t&&(t.currentScript&&(e=t.currentScript.src),!e)){var i=t.getElementsByTagName("script");if(i.length)for(var a=i.length-1;a>-1&&!e;)e=i[a--].src}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),n.p=e}(),function(){var e={757:0};n.f.j=function(t,i){var a=n.o(e,t)?e[t]:void 0;if(0!==a)if(a)i.push(a[2]);else{var r=new Promise((function(n,i){a=e[t]=[n,i]}));i.push(a[2]=r);var s=n.p+n.u(t),o=new Error;n.l(s,(function(i){if(n.o(e,t)&&(0!==(a=e[t])&&(e[t]=void 0),a)){var r=i&&("load"===i.type?"missing":i.type),s=i&&i.target&&i.target.src;o.message="Loading chunk "+t+" failed.\n("+r+": "+s+")",o.name="ChunkLoadError",o.type=r,o.request=s,a[1](o)}}),"chunk-"+t,t)}},n.O.j=function(t){return 0===e[t]};var t=function(t,i){var a,r,s=i[0],o=i[1],c=i[2],u=0;if(s.some((function(t){return 0!==e[t]}))){for(a in o)n.o(o,a)&&(n.m[a]=o[a]);if(c)var l=c(n)}for(t&&t(i);u<s.length;u++)r=s[u],n.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return n.O(l)},i=self.webpackChunkgame_core=self.webpackChunkgame_core||[];i.forEach(t.bind(null,0)),i.push=t.bind(null,i.push.bind(i))}(),n.O(void 0,[216,630,542],(function(){return n(628)})),n.O(void 0,[216,630,542],(function(){return n(629)})),n.O(void 0,[216,630,542],(function(){return n(446)})),n.O(void 0,[216,630,542],(function(){return n(447)})),n.O(void 0,[216,630,542],(function(){return n(630)})),n.O(void 0,[216,630,542],(function(){return n(546)}));var i=n.O(void 0,[216,630,542],(function(){return n(561)}));i=n.O(i)})();