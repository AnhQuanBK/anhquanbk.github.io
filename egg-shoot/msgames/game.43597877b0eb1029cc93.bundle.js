(function(){var e={443:function(){HTMLCanvasElement.prototype.toBlob||Object.defineProperty(HTMLCanvasElement.prototype,"toBlob",{value:function(e,t,n){for(var i=atob(this.toDataURL(t,n).split(",")[1]),a=i.length,r=a>>2,s=new Uint8Array(a),o=new Uint32Array(s.buffer,0,r),c=0,l=0;c<r;c++)o[c]=i.charCodeAt(l++)|i.charCodeAt(l++)<<8|i.charCodeAt(l++)<<16|i.charCodeAt(l++)<<24;for(var u=3&a;u--;)s[l]=i.charCodeAt(l++);e(new Blob([s],{type:t||"image/png"}))}})},591:function(e,t,n){"use strict";n.d(t,{J:function(){return D},Z:function(){return L}});var i=n(53),a=n(200),r=n.n(a),s=n(66),o=n.n(s),c=n(54),l=n.n(c),u=n(39),h=n.n(u),d=n(84),p=n(208),f=n.n(p),g=function(e){return function(t){t.preventDefault();var n=document.getElementById("popup-add-shortcut");null==n||n.remove(),e()}},m=function(e){var t=document.createElement("div");return t.innerHTML=f()(e).call(e),t.firstChild},v=function(){var e=(0,i.Z)(h().mark((function e(t,n){var i,a,r;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=m('<div style="height: 50vh;width: 53vh;max-width: 95vw;position:absolute;background-color: rgba(31, 120, 136, 0.48);border-radius: 2vh;margin: auto;right: 0;left: 0;top: 0;bottom: 0;display: flex;flex-direction:column;justify-content:space-evenly;">\n            <p style="color:white;font-size:40px;text-align:center">Add shortcut for this game</p>\n            <p style="color:white;font-size:20px;text-align:center">This game wants to add a shortcut.</p>\n        </div>'),a=m('<button style="border: none;background-color: #1877f2;color: #fff;width: 90%;height: 50px;border-radius: 15px;margin-left: auto;margin-right: auto;font-size: 20px;cursor: pointer;">No</button>'),r=m('<button style="border: none;background-color: #1877f2;color: #fff;width: 90%;height: 50px;border-radius: 15px;margin-left: auto;margin-right: auto;font-size: 20px;cursor: pointer;">Yes</button>'),i&&a&&r||n({code:"CREATE_POPUP_ERROR",message:"Show popup failed"}),i.id="popup-add-shortcut",i.appendChild(a),i.appendChild(r),document.body.appendChild(i),a.addEventListener("click",g(n)),r.addEventListener("click",g(t));case 10:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),y=function(){function e(){this.isFirstCall=!0}var t=e.prototype;return t.canCreateShortcutAsync=function(){var e=(0,i.Z)(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isFirstCall){e.next=3;break}return this.isFirstCall=!1,e.abrupt("return",!0);case 3:return e.abrupt("return",!1);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),t.createShortcutAsync=function(){var e=(0,i.Z)(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new(o())((function(e,t){v(e,t)})));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),e}(),E=y,A=function(e){return function(t){t.preventDefault();var n=document.getElementById("popup-subscribe-bots");null==n||n.remove(),e()}},S=function(e){var t=document.createElement("div");return t.innerHTML=f()(e).call(e),t.firstChild},b=function(){var e=(0,i.Z)(h().mark((function e(t,n){var i,a,r;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=S('<div style="height: 50vh;width: 53vh;max-width: 95vw;position:absolute;background-color: rgba(31, 120, 136, 0.48);border-radius: 2vh;margin: auto;right: 0;left: 0;top: 0;bottom: 0;display: flex;flex-direction:column;justify-content:space-evenly;">\n            <p style="color:white;font-size:40px;text-align:center">Turn on messages from this game</p>\n            <p style="color:white;font-size:20px;text-align:center">This game wants to send messages, announcements and more.</p>\n        </div>'),a=S('<button style="border: none;background-color: #1877f2;color: #fff;width: 90%;height: 50px;border-radius: 15px;margin-left: auto;margin-right: auto;font-size: 20px;cursor: pointer;">Not Now</button>'),r=S('<button style="border: none;background-color: #1877f2;color: #fff;width: 90%;height: 50px;border-radius: 15px;margin-left: auto;margin-right: auto;font-size: 20px;cursor: pointer;">Turn On</button>'),i&&a&&r||n({code:"CREATE_POPUP_ERROR",message:"Show popup failed"}),i.id="popup-subscribe-bots",i.appendChild(a),i.appendChild(r),document.body.appendChild(i),a.addEventListener("click",A(n)),r.addEventListener("click",A(t));case 10:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),T=function(){function e(){this.isFirstCall=!0}var t=e.prototype;return t.canSubscribeBotAsync=function(){var e=(0,i.Z)(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isFirstCall){e.next=3;break}return this.isFirstCall=!1,e.abrupt("return",!0);case 3:return e.abrupt("return",!1);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),t.subscribeBotAsync=function(){var e=(0,i.Z)(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new(o())((function(e,t){b(e,t)})));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),e}(),w=T,C=n(420),I=n(126),P=n(623),x=n(422),k=GameCore.Configs,O=k.Notification,R=k.AddShortcut,B=k.SubscribeBot,_=O.GameTitle,D=(O.GameImage,function(){function e(){}var t=e.prototype;return t.createAsync=function(){var e=(0,i.Z)(h().mark((function e(t){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,GameSDK.tournament.createAsync(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t.shareAsync=function(){var e=(0,i.Z)(h().mark((function e(t){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,GameSDK.tournament.shareAsync(t);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t.joinAsync=function(){var e=(0,i.Z)(h().mark((function e(t){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,GameSDK.tournament.joinAsync(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t.postScoreAsync=function(){var e=(0,i.Z)(h().mark((function e(t){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,FBInstant.tournament.postScoreAsync(t);case 2:window.game.analytics.event(d._.TOURNAMENT_POST_SCORE,{score:!0});case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t.getTournamentsAsync=function(){var e=(0,i.Z)(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,GameSDK.tournament.getTournamentsAsync();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),e}()),N=function(){function e(e){var t=this;this.facebook=void 0,this.supportedAPIs=[],this.mockSubscribeBot=void 0,this.mockAddShortcut=void 0,this.isCalledSubscribeBot=!1,this.isCalledCreateShortcut=!1,this.isCalledSwitchGame=!1,this.isCanPlayerMatch=null,this.isCanSubscribeBot=null,this.isCanCreateShortcut=null,this.isCanSwitchGame=null,this.attemptToAddShortcut=(0,i.Z)(h().mark((function e(){var n,i,a,r,s,o;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.isCalledCreateShortcut){e.next=2;break}return e.abrupt("return",!1);case 2:if(e.prev=2,null===t.isCanCreateShortcut&&(R.UseMock?t.isCanCreateShortcut=!0:t.isCanCreateShortcut=t.isSupportedAPI("canCreateShortcutAsync")),t.isCanCreateShortcut){e.next=6;break}return e.abrupt("return",!1);case 6:return e.next=8,GameSDK.player.getDataAsync(["lastCallCreateShortcut"]);case 8:if(e.t0=e.sent,e.t0){e.next=11;break}e.t0={};case 11:if(n=e.t0,!(i=n.lastCallCreateShortcut||0)||!(0,I.Gm)(+i)){e.next=15;break}return e.abrupt("return",!1);case 15:if(!R.UseMock){e.next=21;break}return e.next=18,t.mockAddShortcut.canCreateShortcutAsync();case 18:e.t1=e.sent,e.next=24;break;case 21:return e.next=23,GameSDK.canCreateShortcutAsync();case 23:e.t1=e.sent;case 24:if(a=e.t1,r=Date.now(),GameSDK.player.setDataAsync({lastCallCreateShortcut:r}),!a){e.next=49;break}return s=d._.SHORTCUT_CREATE,o=d._.SHORTCUT_CREATE_POPUP,t.isCalledCreateShortcut=!0,window.game.analytics.event(o),e.prev=31,e.next=34,GameCore.Utils.Valid.isValueChangeAsync(window.__fbGameReady,!0);case 34:if(!R.UseMock){e.next=39;break}return e.next=37,t.mockAddShortcut.createShortcutAsync();case 37:e.next=41;break;case 39:return e.next=41,FBInstant.createShortcutAsync();case 41:return window.game.analytics.event(s,{success:!0}),e.abrupt("return",!0);case 45:return e.prev=45,e.t2=e.catch(31),window.game.analytics.event(s,{success:!1}),e.abrupt("return",!1);case 49:return e.abrupt("return",!1);case 52:return e.prev=52,e.t3=e.catch(2),e.abrupt("return",!1);case 55:case"end":return e.stop()}}),e,null,[[2,52],[31,45]])}))),this.attemptToSubscribeBot=(0,i.Z)(h().mark((function e(){var n,i,a,r,s;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.isCalledSubscribeBot){e.next=2;break}return e.abrupt("return",!1);case 2:if(e.prev=2,null===t.isCanSubscribeBot&&(B.UseMock?t.isCanSubscribeBot=!0:t.isCanSubscribeBot=t.isSupportedAPI("player.canSubscribeBotAsync")),t.isCanSubscribeBot){e.next=6;break}return e.abrupt("return",!1);case 6:if(!B.UseMock){e.next=12;break}return e.next=9,t.mockSubscribeBot.canSubscribeBotAsync();case 9:e.t0=e.sent,e.next=15;break;case 12:return e.next=14,GameSDK.player.canSubscribeBotAsync();case 14:e.t0=e.sent;case 15:if(!e.t0){e.next=49;break}return e.next=19,GameSDK.player.getDataAsync(["lastCallSubscribeBot"]);case 19:if(e.t1=e.sent,e.t1){e.next=22;break}e.t1={};case 22:if(n=e.t1,!(i=n.lastCallSubscribeBot)||!(0,I.Gm)(+i)){e.next=26;break}return e.abrupt("return",!1);case 26:return a=Date.now(),GameSDK.player.setDataAsync({lastCallSubscribeBot:a}),r=d._.BOT_SUBSCRIBE,s=d._.BOT_SUBSCRIBE_POPUP,t.isCalledSubscribeBot=!0,window.game.analytics.event(s),e.prev=31,e.next=34,GameCore.Utils.Valid.isValueChangeAsync(window.__fbGameReady,!0);case 34:if(!B.UseMock){e.next=39;break}return e.next=37,t.mockSubscribeBot.subscribeBotAsync();case 37:e.next=41;break;case 39:return e.next=41,GameSDK.player.subscribeBotAsync();case 41:return window.game.analytics.event(r,{success:!0}),e.abrupt("return",!0);case 45:return e.prev=45,e.t2=e.catch(31),window.game.analytics.event(r,{success:!1}),e.abrupt("return",!1);case 49:return e.abrupt("return",!1);case 52:return e.prev=52,e.t3=e.catch(2),e.abrupt("return",!1);case 55:case"end":return e.stop()}}),e,null,[[2,52],[31,45]])}))),this.attemptToSwitchGame=function(){var e=(0,i.Z)(h().mark((function e(n){var i,a,r,s,o,c,l,u;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.isCalledSwitchGame){e.next=2;break}return e.abrupt("return",!1);case 2:if(e.prev=2,null===t.isCanSwitchGame&&(t.isCanSwitchGame=t.isSupportedAPI("switchGameAsync")),t.isCanSwitchGame){e.next=6;break}return e.abrupt("return",!1);case 6:return e.next=8,GameSDK.player.getDataAsync(["lastCallSwitchGame"]);case 8:if(e.t0=e.sent,e.t0){e.next=11;break}e.t0={};case 11:if(i=e.t0,!(a=i.lastCallSwitchGame)||!(0,I.Gm)(+a)){e.next=15;break}return e.abrupt("return",!1);case 15:return e.next=17,GameSDK.player.setDataAsync({lastCallSwitchGame:Date.now()});case 17:return s=(r=n||{}).appId,o=void 0===s?"":s,c=r.payload,l=d._.SWITCH_GAME,u=d._.SWITCH_GAME_POPUP,t.isCalledSwitchGame=!0,window.game.analytics.event(u),e.prev=21,e.next=24,GameCore.Utils.Valid.isValueChangeAsync(window.__fbGameReady,!0);case 24:return e.next=26,GameSDK.switchGameAsync(o,c);case 26:return window.game.analytics.event(l,{success:!0}),e.abrupt("return",!0);case 30:return e.prev=30,e.t1=e.catch(21),window.game.analytics.event(l,{success:!1}),e.abrupt("return",!1);case 34:e.next=39;break;case 36:return e.prev=36,e.t2=e.catch(2),e.abrupt("return",!1);case 39:case"end":return e.stop()}}),e,null,[[2,36],[21,30]])})));return function(t){return e.apply(this,arguments)}}(),this.matchPlayerAsync=function(){var e=(0,i.Z)(h().mark((function e(n,i,a){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,null===t.isCanPlayerMatch&&(t.isCanPlayerMatch=t.isSupportedAPI("checkCanPlayerMatchAsync")),t.isCanPlayerMatch){e.next=4;break}return e.abrupt("return",!1);case 4:return e.next=6,GameSDK.checkCanPlayerMatchAsync();case 6:if(e.sent){e.next=9;break}return e.abrupt("return",!1);case 9:return e.next=11,GameSDK.matchPlayerAsync(n,i,a);case 11:return e.abrupt("return",!0);case 14:return e.prev=14,e.t0=e.catch(0),e.abrupt("return",!1);case 17:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(t,n,i){return e.apply(this,arguments)}}(),this.getTournamentAsync=(0,i.Z)(h().mark((function e(){var n,i,a;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.facebook.tournament.getTournamentsAsync();case 2:if(n=e.sent,i=GameSDK.context.getID(),!(a=r()(n).call(n,(function(e){return e.getContextID()===i})))){e.next=7;break}return e.abrupt("return",o().resolve(a));case 7:return e.abrupt("return",o().reject(new P.Z(null)));case 8:case"end":return e.stop()}}),e)}))),this.createTournamentAsync=function(){var e=(0,i.Z)(h().mark((function e(n,i){var a,r,s;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=window.game.analytics,r=FBInstant.player.getName()||"Player",s=r+"'s Tournament",e.prev=3,e.next=6,t.facebook.tournament.createAsync({initialScore:n,config:{tournamentTitle:s},data:i});case 6:a.event(d._.TOURNAMENT_CREATE,{success:!0}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(3),a.event(d._.TOURNAMENT_CREATE,{success:!1});case 12:case"end":return e.stop()}}),e,null,[[3,9]])})));return function(t,n){return e.apply(this,arguments)}}(),this.isSupportedAPI=function(e){var n;return 0===t.supportedAPIs.length&&(t.supportedAPIs=GameSDK.getSupportedAPIs()),l()(n=t.supportedAPIs).call(n,e)},this.facebook=e,this.mockSubscribeBot=new w,this.mockAddShortcut=new E}var t=e.prototype;return t.switchAsync=function(){var e=(0,i.Z)(h().mark((function e(t){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,GameCore.Utils.Valid.isValueChangeAsync(window.__fbGameReady,!0);case 2:return e.next=4,GameSDK.context.switchAsync(t);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t.chooseAsync=function(){var e=(0,i.Z)(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,GameCore.Utils.Valid.isValueChangeAsync(window.__fbGameReady,!0);case 3:return e.next=5,GameSDK.context.chooseAsync({filters:["INCLUDE_EXISTING_CHALLENGES"],minSize:2,maxSize:2});case 5:case 15:return e.abrupt("return",GameSDK.context.getID());case 8:if(e.prev=8,e.t0=e.catch(0),!(e.t0 instanceof Object&&GameCore.Utils.Object.hasOwn(e.t0,"code"))){e.next=16;break}e.t1=e.t0.code,e.next="USER_INPUT"===e.t1?14:"SAME_CONTEXT"===e.t1?15:16;break;case 14:return e.abrupt("return",!1);case 16:return e.abrupt("return",null);case 17:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}(),t.createAsync=function(){var e=(0,i.Z)(h().mark((function e(t){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,GameCore.Utils.Valid.isValueChangeAsync(window.__fbGameReady,!0);case 3:return e.next=5,GameSDK.context.createAsync(""+t);case 5:case 15:return e.abrupt("return",GameSDK.context.getID());case 8:if(e.prev=8,e.t0=e.catch(0),!(e.t0 instanceof Object&&GameCore.Utils.Object.hasOwn(e.t0,"code"))){e.next=16;break}e.t1=e.t0.code,e.next="USER_INPUT"===e.t1?14:"SAME_CONTEXT"===e.t1?15:16;break;case 14:return e.abrupt("return",!1);case 16:return e.abrupt("return",null);case 17:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),t.getPlayerToken=function(){var e=(0,i.Z)(h().mark((function e(){var t;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,GameSDK.player.getSignedPlayerInfoAsync();case 2:return t=e.sent,e.abrupt("return",t.getSignature());case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),t.getContextPlayers=function(){var e=(0,i.Z)(h().mark((function e(t){var n,i;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,GameSDK.context.getPlayersAsync();case 3:return n=e.sent,i=[],n.forEach((function(e){var n=e.getID();if(n!==t){var a=e.getName();if(a){var r=e.getPhoto();i.push(new C.Z(n,a,r).toObject())}}})),e.abrupt("return",GameCore.Utils.Array.unique(i));case 9:return e.prev=9,e.t0=e.catch(0),e.abrupt("return",[]);case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}(),t.shareAsync=function(){var e=(0,i.Z)(h().mark((function e(t){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,GameSDK.shareAsync(t);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t.sendMessage=function(){var e=(0,i.Z)(h().mark((function e(t){var n,i,a,r,s,o;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.data,i=t.image,a=t.template,r=t.cta,s=t.text,o={data:n,image:i,action:"CUSTOM",template:a,cta:r,text:s,strategy:"IMMEDIATE",notification:"PUSH"},e.next=4,GameSDK.updateAsync(o);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t.inviteAsync=function(){var e=(0,i.Z)(h().mark((function e(t){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,GameSDK.inviteAsync(t);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t.postSessionScoreAsync=function(){var e=(0,i.Z)(h().mark((function e(t){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,GameSDK.postSessionScoreAsync(t);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t.getRewardedVideoAsync=function(){var e=(0,i.Z)(h().mark((function e(t){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,GameSDK.getRewardedVideoAsync(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t.getInterstitialAdAsync=function(){var e=(0,i.Z)(h().mark((function e(t){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,GameSDK.getInterstitialAdAsync(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t.getContextID=function(){return GameSDK.context.getID()},t.setLoadingProgress=function(e){GameSDK.setLoadingProgress(e)},t.getLocale=function(){return GameSDK.getLocale()||"en"},t.injectTournament=function(){var e=(0,i.Z)(h().mark((function e(){var t,i;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!GameCore.Configs.Tournament.UseMock){e.next=11;break}return e.next=4,n.e(302).then(n.bind(n,619));case 4:t=e.sent.default,i=new t,this.facebook.tournament=i,GameSDK.getTournamentAsync=this.getTournamentAsync,GameSDK.tournament=i,e.next=12;break;case 11:this.facebook.tournament=new D;case 12:this.facebook.createTournamentAsync=this.createTournamentAsync,this.facebook.getTournamentAsync=function(){return FBInstant.getTournamentAsync()};case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),t.sendNotificationAsync=function(){var e=(0,i.Z)(h().mark((function e(t){var n,i,a;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=t.message,i=t.delayTime,a=t.type,e.next=5,FBInstant.scheduleNotificationAsync({title:_,minDelayInSeconds:i,description:n,type:null!=a?a:x.Z.GENERIC_NOTIFICATION});case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),e}(),L=N},444:function(e,t,n){"use strict";var i=n(87),a=n.n(i),r=n(44),s=n.n(r),o=function(e,t){return void 0===t&&(t=1),a()({length:Math.ceil(e.length/t)},(function(n,i){return s()(e).call(e,i*t,i*t+t)}))},c=n(128),l=n.n(c),u=n(54),h=n.n(u),d=function(e,t){return l()(e).call(e,(function(e){return!h()(t).call(t,e)}))},p=function(e){for(var t=e.length-1;t>0;t--){var n=Math.floor(Math.random()*(t+1)),i=[e[n],e[t]];e[t]=i[0],e[n]=i[1]}},f=n(102),g=n.n(f),m=function(e,t,n){return g()(n).call(n,e)===t&&null!==e&&void 0!==e},v=function(e){return l()(e).call(e,m)},y={chunk:o,difference:d,shuffle:p,unique:v},E=n(67),A=n.n(E),S=n(266),b=n.n(S),T=b()((function(e,t){if("string"===typeof e){var n=t[e.toLowerCase()];if("string"===typeof n)return n}return"?"})),w=b()((function(e){for(var t=null,n=[],i=/:([A-Z0-9?]+)/gm;null!==(t=i.exec(e));)n.push(t[1]);return n})),C=b()((function(e){for(var t=null,n=[],i=/([0-9]+[A-Z?]{1}|[A-Z?]{1})/gm;null!==(t=i.exec(e));){var a=t[0];if(a.length>=2){var r,o=a.length,c=s()(a).call(a,0,o-1),l=a[o-1],u=A()(r=new Array(+c)).call(r,l);n.push.apply(n,u)}else n.push(a)}return n})),I=function(e,t){var n=e,i=GameCore.Utils.Object.invert(t),a={},r=0,s=0;return w(n).forEach((function(e){r=0,s++,a[s]||(a[s]={}),C(e).forEach((function(e){r++,a[s][r]=T(e,i)}))})),a},P=b()((function(e,t){var n=t[e];return"string"===typeof n?""+n.toUpperCase():"?"})),x=function e(t,n,i){void 0===i&&(i=!1);var a="";if(!GameCore.Utils.Valid.isObject(t))return a;var r="",o=1;for(var c in t)if(GameCore.Utils.Object.hasOwn(t,c)){var l=t[c];if(GameCore.Utils.Valid.isObject(l))a+=":"+e(l,n,!0);else if(GameCore.Utils.Valid.isString(l)){var u=P(l,n);u===r?(o++,a=s()(a).call(a,0,-2)):o=1,a+=""+o+u,r=u}}return a=a.replace(/1([A-Z])/g,"$1")},k=function(e){try{return atob(e)}catch(t){return""}},O={decodeMap:I,encodeMap:x,hashToString:k,stringToHash:function(e){try{return btoa(e)}catch(t){return""}}},R=function(e){try{return JSON.parse(e)}catch(t){return null}},B=n(68),_=n.n(B),D=function(e){try{return _()(e,null,0)}catch(t){return""}},N=function(e){return R(D(e))},L={clone:N,decode:R,encode:D},M=function(e){var t="object"===typeof e||"function"===typeof e,n=Array.isArray(e);return null!==e&&t&&!n},G=function(e){return void 0===e||null===e},F=function e(t){if(!M(t))return t;for(var n in t){G(t[n])&&delete t[n];var i=t[n];M(i)&&(t[n]=e(i))}return t},Z=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},U=n(101),Y=n.n(U),H=function(e){var t={};return Y()(e).forEach((function(n){if(Z(e,n)){var i=e[n];"string"===typeof i&&(t[i]=n)}})),t},z=function(e,t){if(!Array.isArray(e))return{};var n={};return e.forEach((function(e){if(Z(e,t)){var i=e[t];"string"===typeof i&&(n[i]=e)}})),n},W={clear:F,hasOwn:Z,invert:H,keyBy:z},V=function(e){return e?e[0].toUpperCase()+s()(e).call(e,1):e},K=function(e){var t=0;if(0==e.length)return t;for(var n=0;n<e.length;n++){t=(t<<5)-t+e.charCodeAt(n),t&=t}return t},j=n(89),X=n.n(j),q=function(e){var t;return X()(t=Y()(e)).call(t,(function(t,n){var i=e[n];return void 0!==i&&t.push(n+"="+i),t}),[]).join("&")},J=function(e){void 0===e&&(e="0x");for(var t=e,n=0;n<6;n++)t+="0123456789ABCDEF"[Math.floor(16*Math.random())];return t},Q=n(417),$=function(e){return e.normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/[\u0111\u0110]/g,(function(e){return"\u0111"===e?"d":"D"}))},ee=n(85),te=n.n(ee),ne=n(464),ie=n.n(ne),ae=function(e,t){var n,i=e.split(" "),a=(i.length<=1?te()(n=[]).call(n,i):[i[0],i.pop()]).join(" "),r=ie()(a).call(a," ")||0,s=r>=0?r:t;return(a.length>t?a.substring(0,s):a).substring(0,t)},re=n(273),se=n.n(re),oe=function(e){void 0===e&&(e=16);var t=function(t){return Math.floor(t).toString(e)};return t(Date.now()/1e3)+se()(" ").call(" ",e).replace(/./g,(function(){return t(Math.random()*e)}))},ce={capitalize:V,hashCode:K,params:q,random:Q.Z,randomColor:J,removeDiacritics:$,getShortName:ae,toCamelCase:function(e){var t=e.replace(/[-_\s.]+(.)?/g,(function(e,t){return t?t.toUpperCase():""}));return t.substr(0,1).toLowerCase()+t.substr(1)},toUpperCamelCase:function(e){var t=e.replace(/[-_\s.]+(.)?/g,(function(e,t){return t?t.toUpperCase():""}));return t.substr(0,1).toUpperCase()+t.substr(1)},generateObjectId:oe},le=function(e){return"boolean"===typeof e},ue=function(){return!1},he=function(e){return"function"===typeof e},de=function(e){return"number"===typeof e},pe=function(e){var t;return g()(t=["string","number","symbol"]).call(t,typeof e)>-1},fe=function(e){return"string"===typeof e},ge=n(66),me=n.n(ge),ve=function(e,t,n){var i=n||{},a=i.timeout,r=void 0===a?1e3:a,s=i.checkInterval,o=void 0===s?100:s;return new(me())((function(n){var i=setInterval((function(){("function"===typeof e?e():e)===("function"===typeof t?t():t)&&(clearInterval(i),n(!0))}),o);r>0&&setTimeout((function(){clearInterval(i),n(!1)}),r)}))},ye={isBoolean:le,isDebugger:ue,isFunction:he,isNumber:de,isObject:M,isPropertyKey:pe,isString:fe,isValueChangeAsync:ve},Ee=function(e){var t=e.scene,n=e.key,i=e.newKey,a=t.textures.get(n).getSourceImage();if(!a)return!1;var r=Math.min(a.width,a.height);i||t.textures.removeKey(n);var s=t.textures.createCanvas(i||n,r,r),o=s.context;return o.beginPath(),o.arc(r/2,r/2,r/2,0,2*Math.PI,!1),o.clip(),s.draw((a.width-r)/2,(a.height-r)/2,a),!0},Ae=function(e){var t=e.scene,n=e.key,i=e.newKey,a=e.radius,r=e.width,s=e.height,o=t.textures.get(n).getSourceImage();if(!o)return!1;r||(r=o.width),s||(s=o.height),i||t.textures.removeKey(n);var c=t.textures.createCanvas(i||n,r,s),l=c.context,u=Math.min(r,s)/100*a/2;return l.beginPath(),l.moveTo(0+u,0),l.lineTo(0+r-u,0),l.quadraticCurveTo(0+r,0,0+r,0+u),l.lineTo(0+r,0+s-u),l.quadraticCurveTo(0+r,0+s,0+r-u,0+s),l.lineTo(0+u,0+s),l.quadraticCurveTo(0,0+s,0,0+s-u),l.lineTo(0,0+u),l.quadraticCurveTo(0,0,0+u,0),l.closePath(),l.clip(),c.draw(0,0,o),!0},Se=function(){return GameCore.Utils.Device.isDesktop()||GameCore.Utils.Device.pixelRatio()>1?2:1},be=function(e,t){var n=e.split(","),i=n[0].match(/:(.*?);/);if(!i)return null;for(var a=i[1],r=atob(n[n.length-1]),s=r.length,o=new Uint8Array(s);s--;)o[s]=r.charCodeAt(s);return new File([o],t,{type:a})},Te=n(205),we=n.n(Te),Ce=new Image,Ie=function(e,t){return void 0===t&&(t=!0),new(me())((function(n){t&&(Ce=new Image),Ce.onload=function(){n(Ce)},Ce.onerror=function(){n(null)},Ce.src=we().createObjectURL(e)}))},Pe=n(53),xe=n(39),ke=n.n(xe),Oe=function(){var e=(0,Pe.Z)(ke().mark((function e(t,n){var i;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t).then((function(e){return e.blob()})).catch((function(){return null}));case 2:if(i=e.sent){e.next=5;break}return e.abrupt("return",null);case 5:return e.abrupt("return",new File([i],n));case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),Re=function(e){if(g()(e).call(e,".")<0)return e;for(var t=e.length-1;t>=0;t--){if("."==e[t])return e.substring(0,t);if("0"!=e[t])return e.substring(0,t+1)}return e},Be=function(e,t){var n=t||{},i=n.fractionalDigits,a=void 0===i?0:i,r=n.startAbbreviate,s=void 0===r?1e3:r,o=n.abbreviateStep,c=void 0===o?3:o,l=n.maxLength,u=void 0===l?-1:l,h=n.removeLastZero,d=void 0===h||h,p=n.suffixes,f=void 0===p?["","k","m","b","t","q"]:p,g=-1===u?99999999:u;if(e>=s){var m=Math.floor(e/Math.pow(10,c)),v=Math.floor((m.toString().length-1)/c)+1,y=(e/Math.pow(Math.pow(10,c),v)).toFixed(a),E=g-f[v].length,A=y.substring(0,E);return(d?Re(A):A)+f[v]}var S=e.toFixed(a),b=g-f[0].length,T=S.substring(0,b);return d?Re(T):T+f[0]},_e={Array:y,Hash:O,Json:L,Object:W,String:ce,Valid:ye,Image:{drawCircle:Ee,drawBorder:Ae,getImageScale:Se,base64ToFile:be,blobToHtmlImage:Ie,blobUrlToFile:Oe},Number:{toAbbreviatedString:Be,padStart:function(e,t,n){void 0===n&&(n="0");for(var i=e.toString(),a=i.length,r=0;r<t-a;r++)i=n+i;return i},padEnd:function(e,t,n){void 0===n&&(n="0");for(var i=e.toString(),a=i.length,r=0;r<t-a;r++)i+=n;return i},random:function(e,t){var n=t?Math.random()>.5?1:-1:1;return Math.floor(Math.random()*e)*n}},Device:{isDesktop:function(){return!/Android|iPhone|iPad|iPod/i.test(navigator.userAgent)},isMobile:function(){return/Android|iPhone|iPad|iPod/i.test(navigator.userAgent)},isAndroid:function(){return window.__fbPlatform?"ANDROID"===window.__fbPlatform:/Android/i.test(navigator.userAgent)},isIOS:function(){return window.__fbPlatform?"IOS"===window.__fbPlatform:/iPhone|iPad|iPod/i.test(navigator.userAgent)},isMobileWeb:function(){return window.__fbPlatform?"MOBILE_WEB"===window.__fbPlatform:/mobile/i.test(navigator.userAgent)},pixelRatio:function(){return Math.round(window.devicePixelRatio)||1}},Time:{isToday:function(e){var t=new Date(e),n=new Date;return t.getDate()===n.getDate()&&t.getMonth()===n.getMonth()&&t.getFullYear()===n.getFullYear()},sleepAsync:function(e){return new(me())((function(t){return setTimeout(t,e)}))}}},De=n(52),Ne=n(125),Le={ENV:"production",AppId:"dinosaur-eggs-pop",ApiHost:"https://fbig-singleplay-apps.citigo.site",OtherHost:"https://fbig-leaderboards.citigo.site",Notification:{Enable:!1},LeadersBoard:{Prefix:"leaderboards",LeaderboardId:"655b44c180d85e7a958bce02"},Debugger:{ShowInspector:!1,ShowMonitoring:!1,ShowConsole:!1},Statistics:{Enable:!1,ShowFPSInGame:!1,ShowMemoryInGame:!1},Tournament:{RequestTournamentBeforeInterstitialAd:!1}},Me={ENV:"production",AppId:"9nrsr33p6044",ApiHost:"https://fbig-singleplay-apps.citigo.site",OtherHost:"https://fbig-leaderboards.citigo.site",LeadersBoard:{Prefix:"leaderboards",LeaderboardId:"655b44c180d85e7a958bce02"},Debugger:{ShowInspector:!1,ShowMonitoring:!1,ShowConsole:!1},Statistics:{Enable:!1,ShowFPSInGame:!1,ShowMemoryInGame:!1},Tournament:{RequestTournamentBeforeInterstitialAd:!1}},Ge={ENV:"development",AppId:"9nrsr33p6044",ApiHost:"https://fbig-singleplay-apps-dev.sunstudio.io",OtherHost:"https://leaderboards-dev.sunstudio.io",SyncProfileFromAPI:!0,Notification:{Enable:!0,DisableSendNotification:!1,ApiUrl:"https://notifications.sunstudio.io",GameTitle:"Dinosaur Eggs Pop",GameImage:"https://static-tt.citigo.site/fbig-singleplay-apps/dinosaur-eggs-pop.jpg",DailyNotificationMessages:{MONDAY:"\ud83c\udf05 A new week begins! Start your Monday with a burst of egg-popping action! \ud83c\udfaf Clear the screen, collect rewards, and set the stage for a week full of victories! Let's go! \ud83d\udca5",TUESDAY:"\ud83c\udfd9\ufe0f It's Tuesday, and the eggs are piling up fast! \u23f3 Don't let them reach the ground\u2014crack those shells and beat yesterday's score! Every egg popped gets you closer to greatness! \ud83c\udfc6",WEDNESDAY:"\ud83c\udf04 Midweek mission: Can you pop more eggs today than yesterday? \ud83c\udfaf Aim high and break through your personal best. The challenge is on\u2014will you rise to it? Pop now and find out! \ud83d\udd25",THURSDAY:"\ud83c\udf06 Thursday's here, and the eggs keep coming! \ud83e\udd5a Don't slow down now\u2014clear the board and unlock special rewards! Each level brings more fun, so get popping and make your mark today! \ud83d\udca5",FRIDAY:"\ud83c\udf07 It's Friday, time to unwind with some egg-popping action! \ud83c\udf89 Blast through the levels, aim for high scores, and kick off your weekend with a streak of epic victories! Let's do this! \ud83c\udfc5",SATURDAY:"\ud83c\udf05 Saturday special: New challenges and rewards await! \ud83d\udd25 Grab your slingshot and get ready for a day full of egg-popping fun! Every level you beat gets you closer to the ultimate prize! \ud83c\udf81",SUNDAY:"\ud83c\udf04 Relax and recharge with a fun Sunday egg-popping session! \ud83c\udf1f With fresh rewards and challenges, now's the time to sharpen your aim and clear the board before the week begins! \ud83d\udca5"}},AddShortcut:{UseMock:!1},SubscribeBot:{UseMock:!1},PlayerMock:{id:"",signature:""},OpponentMock:{id:"",signature:""},MatchMockFailRate:5,Gameplay:{AwardCoins:3e3,MockScoreDifficult:1,MaxRescueCount:1,RescueGamePopupTimeout:15,ForceNewUser:!1,AlwayShowBestScore:!1,ItemConfig:{giftTime:3e5}},GameOver:{ShowClock:!1},PlayerDataStore:"playerData",Game:{AutoResize:!0,PortraitRatio:375/550,PortraitWidth:375,PortraitHeight:667,LandscapeRatio:375/550,LandscapeWidth:375,LandscapeHeight:667,ForcePixelRatio:0,DisableLandscape:!1,FullSizeOnLandscape:!1},Debugger:{ShowInspector:!1,ShowMonitoring:!1,ShowConsole:!1,Expanded:!0,AutoRefresh:!0,InspectorAutoUpdate:!0,Opacity:.8,ListPlayerDevIds:[]},Statistics:{Enable:!1,DisplayMode:0,FPS:!0,MS:!0,MB:!0,Opacity:.8,ShowFPSInGame:!0,ShowMemoryInGame:!1},ParticleEditor:{Enable:!1,Opacity:.8,Expanded:!0},ProfilerPlugin:{Enable:!1},CanvasRecorder:{Enable:!1,Options:{Type:"png",Quality:.85,RecordFps:60,SyncFps:!0}},Match:{ContinueSingleMatchEnabled:!1,SingleMatchStore:"singleMatch",LocalSingleMatchDefault:{_id:"12345678890",status:"open",playerId:"",score:0,level:1,startedAt:0,updateAt:0,finishAt:0,data:{}}},DailyRewards:{MaxDays:6,MockTime:0,CheckInterrupt:!0},DailyTasks:{Duration:86400},Tournament:{UseMock:!1,UseGlobalTournament:!1,RequestTournamentBeforeInterstitialAd:!1,GlobalTournaments:[],ForcePlay:!1,UseLeaderboard:!1,TournamentContextIds:[],YourMockTournamentCount:1},Tutorial:{ForceUseTutorial:!1},LeadersBoard:{Name:null,UseMock:!1,Prefix:"leaderboards",LeaderboardId:"655c2adc6362a27c1bbf79a3",Limit:50,MockOptions:{PlayerEntryIndex:-1}},LanguageSupport:{en:"en"},EnableEffectSceneTransition:!1,DefaultTheme:"default",ThemeSupport:{default:"default"},Ads:{Enabled:!0,AdService:"msgames",FallbackService:"google",AdServiceConfigs:{Google:{DataAdClient:"ca-pub-2993382360222769",DataAdFrequencyHint:30,DataAdBreakTest:!1,DataAdChannel:"5775458550",MaxScriptLoadRetryCount:3}},CalculateSafeAreaBottom:!0,EnableRewardVideoResetInterstitial:!1,Mockup:{Enable:!1,ErrorRate:5,GiphyApiKey:""},InterstitialAdOptions:{pID:"",showWhenStartGame:!1,secondsFirstTime:30,secondsBetweenAds:30},RewardAdOptions:{pID:"",secondsFirstTime:0,secondsBetweenAds:0},BannerAdOptions:[{placementId:"456",position:"right",bannerWidth:160,bannerHeight:600,platform:"DESKTOP",secondsReload:60}]},Network:{MaximumRequest:6,Timeout:15e3,Retries:3},Analytics:{GoogleAnalytics:{consoleLog:!1},FacebookAnalytics:{prefix:"fba",consoleLog:!1}},Sentry:{errorCodes:{accepted:[],ignored:["USER_INPUT","NETWORK_FAILURE","TOURNAMENT_NOT_FOUND","INVALID_OPERATION","CLIENT_UNSUPPORTED_OPERATION"]},errorMessages:{accepted:[],ignored:["Load image failed","Invalid context ID","Failed to fetch"]}},Rollbar:{Enable:!1,UseMockup:!1,FilterError:{Codes:{accepted:[],ignored:["USER_INPUT","NETWORK_FAILURE"]},Messages:{accepted:[],ignored:["Load image failed","Request failed to be processed","Script error."]}}},Performance:{Enable:!1,trackingSceneKeys:["DASHBOARD_SCENE","GAME_SCENE"],minQuality:1,maxQuality:2,fpsThreshold:48,checkInterval:2e3,qualityAdjustStep:.1,autoUpgradeQuality:!0,onlyUpdateWhenSwitchScene:!0}};Ge=(0,Ne.TS)((0,De.Z)({},Ge),Me);var Fe=Ge=(0,Ne.TS)((0,De.Z)({},Ge),Le),Ze=function(e){return function(t){try{var n=window.game,i=t.module;if(n.scene.getScenes(!0)[0].scene.key!==e)return;var a=i.default;n.scene.remove(e),n.scene.add(e,a,!0),n.scene.bringToTop(n.globalScene)}catch(s){var r;null==(r=void 0)||r.invalidate()}}},Ue=n(534),Ye=n.n(Ue),He=n(536),ze=n.n(He),We=n(538),Ve=n.n(We),Ke=n(192),je=!1,Xe=function e(t,n,i){n.forEach((function(n){if(n.name){var a=null;if(a=i?i.getByName(n.name):t.children.getByName(n.name)){if("Container"===n.type){var r=a,s=n.getAll();if(e(t,s,r),!r.hotContainer)return}var o=Ye()(n),c=["_events","_sysEvents","input","localTransform","list","displayList"],u=l()(o).call(o,(function(e){if("string"!==typeof e)return!1;if(g()(c).call(c,e)>=0)return!1;if(!a)return!1;var t=ze()(n,e);return!(t instanceof Function)&&(!(t instanceof Phaser.Scene)&&(!(t instanceof Phaser.GameObjects.Group)&&(!(t instanceof Phaser.GameObjects.GameObject)&&t===ze()(a,e))))}));u.length<1||u.forEach((function(e){if(a){var t=ze()(n,e);ze()(a,e),Ve()(a,e,t)}}))}}}))},qe={Configs:Fe,Utils:_e,LiveUpdate:{Scene:Ze,SceneObjects:function(e,t){return void 0===t&&(t=je),function(n){try{var i=window.game,a=n.module,r=i.scene.getScenes(!0)[0];if(r.scene.key!==e)return;je=t;var s=a.default,o=e+"-draft";i.scene.remove(o);var c=i.scene.add(o,s);r=i.scene.getScene(e),c.events.once(Phaser.Scenes.Events.RENDER,(0,Ke.D)((function(){var e=c.children.getAll();Xe(r,e),i.scene.remove(o)})),50),i.scene.run(o),i.scene.bringToTop(r),i.scene.bringToTop(i.globalScene)}catch(l){}}}}};window.GameCore=qe},588:function(e,t,n){"use strict";n.r(t);var i=n(53),a=n(3),r=n(54),s=n.n(r),o=n(129),c=n.n(o),l=n(39),u=n.n(l),h=n(84),d=n(196),p=GameCore.Utils.Object,f=GameCore.Ads,g=f.Types,m=f.Status,v="msgames",y=function(e){function t(t,n){var i;return(i=e.call(this,t)||this).instance=void 0,i.placementId=void 0,i.instanceLoadFailedQueue=void 0,i.isHasTooManyInstancesError=void 0,i.instance=null,i.placementId=n,i.instanceLoadFailedQueue=[],i.isHasTooManyInstancesError=!1,i}(0,a.Z)(t,e),t.setGame=function(e){self.game=e};var n=t.prototype;return n.loadAsync=function(){var e=(0,i.Z)(u().mark((function e(){var t,n,i;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.status===m.IDLE){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,this.status=m.LOADING,e.next=6,this.createInstanceByType(this.type);case 6:if(this.instance=e.sent,null!==this.instance){e.next=9;break}throw new GameCore.Ads.AdError("AD_INSTANCE_NOT_INITIATED","Ad instance didn't initiated.");case 9:return e.next=11,this.instance.loadAsync();case 11:this.status=m.FILLED,t=this.getSceneName(),this.type===g.PRE_ROLL&&self.game.analytics.loadPreRollAd(t,v),this.type===g.INTERSTITIAL&&self.game.analytics.loadInterstitialAd(t,v),this.type===g.REWARDED&&self.game.analytics.loadRewardedVideoAd(t,v),e.next=25;break;case 18:throw e.prev=18,e.t0=e.catch(2),this.status=m.IDLE,this.instance&&this.instanceLoadFailedQueue.push(this.instance),this.instance=null,this.isAdTypeValid(this.type)&&(n=this.getSceneName(),i={type:this.type,placement:n,adService:v},self.game.analytics.loadAdFail(i)),e.t0;case 25:case"end":return e.stop()}}),e,this,[[2,18]])})));return function(){return e.apply(this,arguments)}}(),n.showAsync=function(){var e=(0,i.Z)(u().mark((function e(){var t,n,i,a;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=!1,null,e.prev=2,this.status===m.FILLED){e.next=5;break}throw new GameCore.Ads.AdError("AD_NOT_FILLED","Ads no fill.");case 5:if(this.status=m.SHOWING,null!==this.instance){e.next=8;break}throw new GameCore.Ads.AdError("AD_INSTANCE_NOT_INITIATED","Ad instance didn't initiated.");case 8:return this.isHasTooManyInstancesError&&self.game.analytics.event(h._.MISSING_AD_SHOW,{ad_type:this.type}),e.next=11,this.instance.showAsync();case 11:t=!0,this.status=m.IDLE,this.instance=null,e.next=21;break;case 16:throw e.prev=16,e.t0=e.catch(2),e.t0 instanceof Object&&p.hasOwn(e.t0,"code")?("ADS_NOT_LOADED"===e.t0.code?this.status=m.FILLED:(this.status=m.IDLE,this.instance=null),"USER_INPUT"===e.t0.code&&(this.status=m.IDLE,this.instance=null,t=!0)):(this.status=m.IDLE,this.instance=null),e.t0,e.t0;case 21:return e.prev=21,window.focus(),n=this.getSceneName(),t?(this.type===g.PRE_ROLL&&self.game.analytics.showPreRollAd(n,v),this.type===g.INTERSTITIAL&&self.game.analytics.showInterstitialAd(n,v),this.type===g.REWARDED&&self.game.analytics.showRewardedVideoAd(n,v)):this.isAdTypeValid(this.type)&&(i=this.getSceneName(),a={type:this.type,placement:i,adService:v},self.game.analytics.showAdFail(a)),e.finish(21);case 26:case"end":return e.stop()}}),e,this,[[2,16,21,26]])})));return function(){return e.apply(this,arguments)}}(),n.getStatus=function(){return this.status},n.createInstanceByType=function(){var e=(0,i.Z)(u().mark((function e(t){var n;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=self.game.facebook,e.prev=1,e.t0=t,e.next=e.t0===g.REWARDED?5:e.t0===g.INTERSTITIAL||e.t0===g.PRE_ROLL?8:11;break;case 5:return e.next=7,n.getRewardedVideoAsync(this.placementId);case 7:case 10:return e.abrupt("return",e.sent);case 8:return e.next=10,n.getInterstitialAdAsync(this.placementId);case 11:case 20:return e.abrupt("return",null);case 12:e.next=21;break;case 14:if(e.prev=14,e.t1=e.catch(1),!(e.t1 instanceof Object&&p.hasOwn(e.t1,"code"))){e.next=20;break}if("ADS_TOO_MANY_INSTANCES"!==e.t1.code){e.next=20;break}return this.isHasTooManyInstancesError=!0,e.abrupt("return",this.instanceLoadFailedQueue.shift()||null);case 21:case"end":return e.stop()}}),e,this,[[1,14]])})));return function(t){return e.apply(this,arguments)}}(),n.getSceneName=function(){try{var e=self.game.globalScene;return e instanceof d.Z?e.getCurrentScene().scene.getSceneName():"unknown"}catch(t){return"unknown"}},n.isAdTypeValid=function(e){var t;return s()(t=c()(g)).call(t,e)},t}(GameCore.Ads.AdInstance);t.default=y},589:function(e,t,n){"use strict";n.r(t);var i,a=n(53),r=n(99),s=n(19),o=n(3),c=n(66),l=n.n(c),u=n(54),h=n.n(u),d=n(129),p=n.n(d),f=n(39),g=n.n(f),m=n(84),v=n(196),y=GameCore,E=y.Utils.Object,A=y.Ads,S=A.Types,b=A.Status,T="not-loaded",w="loading",C="loaded",I="google",P=function(e){function t(n,i){var a;return(a=e.call(this,n)||this).instance=void 0,a.instance=null,a.status=b.IDLE,window.setInterstitialPlacementType=t.setInterstitialPlacementType,window.setRewardedPlacementType=t.setRewardedPlacementType,window.setPreRollPlacementType=t.setPreRollPlacementType,t.childAdInstances.push((0,s.Z)(a)),t.isPreloadConfigReady&&(a.status=b.FILLED),a}(0,o.Z)(t,e),t.initGoogleAdsAsync=function(){var e=(0,a.Z)(g().mark((function e(n){return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("loaded"!==t.initStatus){e.next=3;break}return e.abrupt("return");case 3:t.initStatus=w,t.adsByGoogleConfig=n,t.loadScriptElementAsync(n);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t.configGoogleAdsOnInit=function(){var e=(0,a.Z)(g().mark((function e(){return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:window.adsbygoogle=window.adsbygoogle||[],window.adBreak=function(e){adsbygoogle.push(e)},window.adConfig=function(e){adsbygoogle.push(e)},t.initStatus=C,t.runPreloadAdConfig();case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),t.runPreloadAdConfig=function(){var e=(0,a.Z)(g().mark((function e(){return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preloadPromise=new(l())((function(e,n){window.adConfig({preloadAdBreaks:"on",onReady:function(){t.isPreloadConfigReady=!0,t.handlePostPreloadAdComplete(),e()}}),setTimeout((function(){t.isPreloadConfigReady||n(new Error("Failed to preload ad config in time."))}),1e4)})),e.abrupt("return",t.preloadPromise);case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),t.loadScriptElementAsync=function(e){return new(l())((function(n,i){!function a(r){var s=e.maxScriptLoadRetryCount,o=document.createElement("script");try{t.assignAdsByGoogleScriptProperties(o,e)}catch(l){t.initStatus=T,i(new Error("Invalid adConfig."))}if(o.onload=function(){t.configGoogleAdsOnInit(),n(!0)},o.onerror=function(){r<s?setTimeout((function(){a(r+1)}),12e4):(t.initStatus=T,i(new Error("Failed to load Google Ads script.")))},document.head.appendChild(o),!!!document.getElementById("adsByGoogleFunctionScript")){var c=document.createElement("script");c.text="window.adsbygoogle = window.adsbygoogle || []; var adBreak = adConfig = function(o) {adsbygoogle.push(o);}",c.id="adsByGoogleFunctionScript",document.head.appendChild(c)}}(0)}))},t.assignAdsByGoogleScriptProperties=function(e,t){var n=t.dataAdClient,i=t.dataAdHost,a=t.dataAdChannel,r=t.dataAdBreakTest,s=t.dataAdFrequencyHint;if(!n&&!i)throw new Error("dataAdClient or dataAdHost is required.");e.async=!0,e.setAttribute("data-ad-frequency-hint",s+"s"),n&&e.setAttribute("data-ad-client",n),a&&e.setAttribute("data-ad-channel",a),i&&e.setAttribute("data-ad-host",i),r&&e.setAttribute("data-adbreak-test","on");var o="";if(n||i){o="?";var c=[];n&&c.push("client="+n),i&&c.push("host="+i),o+=c.join("&")}e.src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"+o,e.crossOrigin="anonymous"};var n=t.prototype;return n.makeAdInstance=function(){var e=this;return{getPlacementID:function(){return""},loadAsync:function(){return e.preloadAdPlacement()},showAsync:function(){return e.createAdPlacement()}}},n.preloadAdPlacement=function(){return t.initStatus!==C?l().reject(new Error("Google Ads not initiated.")):t.isPreloadConfigReady?l().resolve():t.preloadPromise?t.preloadPromise:t.runPreloadAdConfig()},n.createAdPlacement=function(){switch(this.type){case S.PRE_ROLL:return this.createAdPlacementPreroll();case S.REWARDED:return this.createAdPlacementRewarded();case S.INTERSTITIAL:return this.createAdPlacementInterstitial();default:return l().reject(new GameCore.Ads.AdError("UNSUPPORTED_AD_TYPE","Unsupported."))}},n.createAdPlacementPreroll=function(){return new(l())((function(e,n){window.adBreak({type:t.preRollPlacementType,name:"prerollAd",adBreakDone:function(t){switch(t.breakStatus){case"dismissed":case"viewed":return void e();default:return void n(new GameCore.Ads.AdError(t.breakStatus,t.breakType))}}})}))},n.createAdPlacementInterstitial=function(){return new(l())((function(e,n){window.adBreak({type:t.interstitialPlacementType,name:"interstitialAd",beforeAd:function(){self.game.ads.hideBannerAdAsync()},adBreakDone:function(t){switch(self.game.ads.showBannerAdAsync(),t.breakStatus){case"dismissed":case"viewed":return void e();default:return void n(new GameCore.Ads.AdError(t.breakStatus,t.breakType))}}})}))},n.createAdPlacementRewarded=function(){return new(l())((function(e,n){window.adBreak({type:t.rewardedPlacementType,name:"rewardedAd",beforeReward:function(e){self.game.ads.hideBannerAdAsync(),e()},adViewed:function(){},adDismissed:function(){},adBreakDone:function(t){switch(self.game.ads.showBannerAdAsync(),t.breakStatus){case"dismissed":return void n(new GameCore.Ads.AdError("USER_INPUT","User dismissed."));case"viewed":return void e();default:return void n(new GameCore.Ads.AdError(t.breakStatus,t.breakType))}}})}))},t.setGame=function(e){self.game=e},n.getStatus=function(){return this.status},n.loadAsync=function(){var e=(0,a.Z)(g().mark((function e(){var n,i,a;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,t.isPreloadConfigReady&&null==this.instance){e.next=3;break}return e.abrupt("return");case 3:if(this.instance=this.makeAdInstance(),null!==this.instance){e.next=6;break}throw new GameCore.Ads.AdError("AD_INSTANCE_NOT_INITIATED","Ad instance didn't initiated.");case 6:return e.next=8,this.instance.loadAsync();case 8:n=this.getSceneName(),this.type===S.PRE_ROLL&&self.game.analytics.loadPreRollAd(n,I),this.type===S.INTERSTITIAL&&self.game.analytics.loadInterstitialAd(n,I),this.type===S.REWARDED&&self.game.analytics.loadRewardedVideoAd(n,I),e.next=18;break;case 14:throw e.prev=14,e.t0=e.catch(0),this.isAdTypeValid(this.type)&&(i=this.getSceneName(),a={type:this.type,placement:i,adService:I},self.game.analytics.loadAdFail(a)),e.t0;case 18:case"end":return e.stop()}}),e,this,[[0,14]])})));return function(){return e.apply(this,arguments)}}(),n.showAsync=function(){var e=(0,a.Z)(g().mark((function e(){var t,n,i,a;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=!1,e.prev=1,this.status===b.FILLED){e.next=4;break}throw new GameCore.Ads.AdError("AD_NOT_FILLED","Ads no fill.");case 4:if(this.status=b.SHOWING,null!==this.instance){e.next=8;break}return e.next=8,this.loadAsync();case 8:if(null!==this.instance){e.next=10;break}throw new GameCore.Ads.AdError("AD_INSTANCE_NOT_INITIATED","Ad instance didn't initiated.");case 10:return e.next=12,this.instance.showAsync();case 12:t=!0,this.handlePostShowAdStatus(),this.instance=null,e.next=27;break;case 17:if(e.prev=17,e.t0=e.catch(1),!(e.t0 instanceof Object&&E.hasOwn(e.t0,"code"))){e.next=24;break}if("noAdPreloaded"!==e.t0.code){e.next=22;break}return e.abrupt("return");case 22:"USER_INPUT"===e.t0.code&&(t=!0),"frequencyCapped"===e.t0.code&&self.game.analytics.event(m._.MISSING_AD_SHOW,{ad_type:this.type});case 24:throw this.handlePostShowAdStatus(),this.instance=null,e.t0;case 27:return e.prev=27,window.focus(),n=this.getSceneName(),t?(this.type===S.PRE_ROLL&&self.game.analytics.showPreRollAd(n,I),this.type===S.INTERSTITIAL&&self.game.analytics.showInterstitialAd(n,I),this.type===S.REWARDED&&self.game.analytics.showRewardedVideoAd(n,I)):this.isAdTypeValid(this.type)&&(i=this.getSceneName(),a={type:this.type,placement:i,adService:I},self.game.analytics.showAdFail(a)),e.finish(27);case 32:case"end":return e.stop()}}),e,this,[[1,17,27,32]])})));return function(){return e.apply(this,arguments)}}(),n.getSceneName=function(){try{var e=self.game.globalScene;return e instanceof v.Z?e.getCurrentScene().scene.getSceneName():"unknown"}catch(t){return"unknown"}},n.isAdTypeValid=function(e){var t;return h()(t=p()(S)).call(t,e)},n.handlePostShowAdStatus=function(){t.isPreloadConfigReady?this.status=b.FILLED:this.status=b.IDLE},t.handlePostPreloadAdComplete=function(){t.childAdInstances.forEach((function(e){e.status=b.FILLED}))},(0,r.Z)(t,null,[{key:"initStatus",get:function(){return t._initStatus},set:function(e){this._initStatus!==e&&(self.game.analytics.event(m._.AD_INIT,{adService:"adsense",state:e}),this._initStatus=e)}}]),t}(GameCore.Ads.AdInstance);i=P,P.childAdInstances=[],P._initStatus=T,P.isPreloadConfigReady=!1,P.adsByGoogleConfig=void 0,P.preloadPromise=void 0,P.preRollPlacementType="preroll",P.interstitialPlacementType="next",P.rewardedPlacementType="reward",P.setInterstitialPlacementType=function(e){i.interstitialPlacementType=e},P.setRewardedPlacementType=function(e){i.rewardedPlacementType=e},P.setPreRollPlacementType=function(e){i.preRollPlacementType=e},t.default=P},427:function(e,t,n){"use strict";n.d(t,{U:function(){return S},v:function(){return b}});var i=n(52),a=n(53),r=n(39),s=n.n(r),o=n(68),c=n.n(o),l=n(3),u=n(127),h=function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).name="BadRequest",i.message=t||"This request is bad",i.payload=n,i}return(0,l.Z)(t,e),t}((0,u.Z)(Error)),d=function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).name="RequestTimeout",i.message=t||"This request is timeout",i.payload=n,i}return(0,l.Z)(t,e),t}((0,u.Z)(Error)),p=n(126),f=GameCore.Configs,g=f.AppId,m=f.Network,v=function(e){if(!e.ok)throw new h(null,{response:e})},y=function(){var e=window.game.auth.getToken();return{token:e,timeout:m.Timeout,headers:{Authorization:"Bearer "+e,"Content-Type":"application/json"}}},E=function(e,t,n,i){return(0,a.Z)(s().mark((function a(){var r,o,l,u,p;return s().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,r=e+"/apps/"+g+"/"+t,o=new AbortController,n.signal=o.signal,l=setTimeout((function(){o.abort()}),n.timeout),GameCore.Utils.Valid.isObject(i)&&(n.body=c()(i)),a.next=8,fetch(r,n);case 8:return u=a.sent,clearTimeout(l),v(u),a.next=13,u.json();case 13:if(a.t0=a.sent,a.t0){a.next=16;break}a.t0={};case 16:return p=a.t0,a.abrupt("return",p);case 20:if(a.prev=20,a.t1=a.catch(0),!(a.t1 instanceof h)){a.next=24;break}return a.abrupt("return",null);case 24:if(!(a.t1 instanceof Object&&GameCore.Utils.Object.hasOwn(a.t1,"name"))){a.next=27;break}if("AbortError"!==a.t1.name){a.next=27;break}throw new d(null);case 27:throw a.t1;case 28:case"end":return a.stop()}}),a,null,[[0,20]])})))},A=function(){var e=(0,a.Z)(s().mark((function e(t,n){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.abrupt("return",t());case 4:if(e.prev=4,e.t0=e.catch(0),!(e.t0 instanceof d&&n>0)){e.next=18;break}return e.prev=7,e.next=10,(0,p.qZ)(600);case 10:return e.next=12,A(t,n-1);case 12:return e.abrupt("return",e.sent);case 15:return e.prev=15,e.t1=e.catch(7),e.abrupt("return",{});case 18:if(!(e.t0 instanceof d)){e.next=20;break}return e.abrupt("return",{});case 20:return e.abrupt("return",{});case 22:case"end":return e.stop()}}),e,null,[[0,4],[7,15]])})));return function(t,n){return e.apply(this,arguments)}}(),S=function(){var e=(0,a.Z)(s().mark((function e(t,n,a,r){var o,c;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return void 0===n&&(n={}),void 0===r&&(r=m.Retries),e.prev=2,o=(0,i.Z)({},y(),n,{method:"GET"}),c=E(a,t,o),e.next=7,A(c,r);case 7:return e.abrupt("return",e.sent);case 10:return e.prev=10,e.t0=e.catch(2),e.abrupt("return",{});case 14:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(t,n,i,a){return e.apply(this,arguments)}}(),b=function(){var e=(0,a.Z)(s().mark((function e(t,n,a,r,o){var c,l;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return void 0===a&&(a={}),void 0===o&&(o=m.Retries),e.prev=2,c=(0,i.Z)({},y(),a,{method:"POST"}),l=E(r,t,c,n),e.next=7,A(l,o);case 7:return e.abrupt("return",e.sent);case 10:return e.prev=10,e.t0=e.catch(2),e.abrupt("return",{});case 14:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(t,n,i,a,r){return e.apply(this,arguments)}}()},425:function(e,t,n){"use strict";n.d(t,{DW:function(){return c},EH:function(){return r},fJ:function(){return a},kL:function(){return i},qj:function(){return s},rh:function(){return o},x2:function(){return l}});var i="CONTEXT_RECEIVED",a="CONTEXT_PROCESSED",r="CONTEXT_GAME_MODE_DETECTED",s="MESSAGES_SENT_UPDATE",o="MESSAGES_SENT_REMOVE",c="SCENE_KEY_UPDATE",l="CHALLENGE_RANDOM_FRIEND"},430:function(e,t,n){"use strict";var i=n(3),a=function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).name="LeaderboardNotFound",i.message=t||"Leaderboard not found",i.payload=n,i}return(0,i.Z)(t,e),t}((0,n(127).Z)(Error));t.Z=a},623:function(e,t,n){"use strict";var i=n(3),a=function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).name="TournamentNotFound",i.message=t||"A Tournament with current context was not found",i.payload=n,i.code="TOURNAMENT_NOT_FOUND",i}return(0,i.Z)(t,e),t}((0,n(127).Z)(Error));t.Z=a},38:function(e,t,n){"use strict";var i=n(125),a=function(){function e(e,t){if(this.scene=void 0,this.config=void 0,this.isStarted=void 0,this.tween=void 0,!(t.targets.length<1)){this.buildConfig(e,t);var n=this.config.targets[0].scene;n&&(this.scene=n,this.isStarted=!1,this.tween=n.tweens.create(this.config))}}var t=e.prototype;return t.buildConfig=function(e,t){this.config=(0,i.TS)(e,t)},t.play=function(){this.tween&&(this.isStarted&&this.tween.hasStarted?this.restart():(this.tween.play(),this.isStarted=!0))},t.restart=function(){var e;null==(e=this.tween)||e.restart()},t.stop=function(){var e;null==(e=this.tween)||e.stop()},t.remove=function(){var e;null==(e=this.tween)||e.remove()},t.next=function(e){return this.tween?(this.tween.off(Phaser.Tweens.Events.TWEEN_COMPLETE,e),this.tween.once(Phaser.Tweens.Events.TWEEN_COMPLETE,e),this.tween):null},e}();t.Z=a},597:function(e,t,n){"use strict";var i=n(19),a=n(3),r=n(38),s={targets:[],repeat:-1,yoyo:!0,duration:33,ease:Phaser.Math.Easing.Sine.InOut,props:{x:5}},o=function(e){function t(t){var n,a,r;return(r=e.call(this,s,t)||this).posX=void 0,r.handleSwitchPosition=function(){var e;r.posX=-r.posX,null==(e=r.tween)||e.updateTo("x",-r.posX)},null!=(n=r.config)&&n.props?(r.posX=r.config.props.x,null==(a=r.tween)||a.on(Phaser.Tweens.Events.TWEEN_REPEAT,r.handleSwitchPosition),r):(0,i.Z)(r)}return(0,a.Z)(t,e),t}(r.Z);t.Z=o},434:function(e,t,n){"use strict";var i=n(3),a=n(38),r={targets:[],duration:600,ease:Phaser.Math.Easing.Linear,props:{angle:{from:0,to:360}}},s=function(e){function t(t){return e.call(this,r,t)||this}return(0,i.Z)(t,e),t}(a.Z);t.Z=s},440:function(e,t,n){"use strict";var i=n(3),a=n(38),r={targets:[],duration:400,ease:n(197).Z,props:{scale:"-=0.1"}},s=function(e){function t(t){return e.call(this,r,t)||this}return(0,i.Z)(t,e),t}(a.Z);t.Z=s},599:function(e,t,n){"use strict";var i=n(3),a=n(38),r={targets:[],duration:400,ease:n(197).Z,props:{scale:"+=0.1"}},s=function(e){function t(t){return e.call(this,r,t)||this}return(0,i.Z)(t,e),t}(a.Z);t.Z=s},197:function(e,t,n){"use strict";var i=n(184),a=n.n(i)()(.48,1.57,.6,.83);t.Z=a},436:function(e,t,n){"use strict";var i=n(3),a=n(38),r={targets:[],duration:600,ease:Phaser.Math.Easing.Cubic.Out,props:{alpha:{start:0,from:0,to:1}}},s=function(e){function t(t){return e.call(this,r,t)||this}return(0,i.Z)(t,e),t}(a.Z);t.Z=s},601:function(e,t,n){"use strict";var i=n(3),a=n(38),r={targets:[],duration:600,ease:Phaser.Math.Easing.Back.Out,props:{y:{from:500,to:0}}},s=function(e){function t(t){return e.call(this,r,t)||this}return(0,i.Z)(t,e),t}(a.Z);t.Z=s},437:function(e,t,n){"use strict";var i=n(3),a=n(38),r={targets:[],duration:600,ease:Phaser.Math.Easing.Quadratic.Out,props:{alpha:{start:1,from:1,to:0}}},s=function(e){function t(t){return e.call(this,r,t)||this}return(0,i.Z)(t,e),t}(a.Z);t.Z=s},435:function(e,t,n){"use strict";var i=n(3),a=n(38),r={targets:[],duration:300,ease:n(197).Z,props:{scale:{from:1.2,to:1}}},s=function(e){function t(t){return e.call(this,r,t)||this}return(0,i.Z)(t,e),t}(a.Z);t.Z=s},603:function(e,t,n){"use strict";var i=n(19),a=n(3),r=n(38),s={targets:[],duration:1e3,ease:Phaser.Math.Easing.Quadratic.InOut,props:{scale:.2}},o=function(e){function t(t){var n,a;(a=e.call(this,s,t)||this).spline=void 0,a.createCounter=function(e,t){var n=a.config.onCurveUpdate,i="function"===typeof n?n:null;t.forEach((function(t,n){if(a.scene){var r=e.data[n],s=r.duration,o=r.delay,c=new Phaser.Math.Vector2;a.scene.tweens.addCounter({delay:o,duration:s,ease:Phaser.Math.Easing.Quadratic.InOut,onUpdate:function(e){a.spline.getPoint(e.getValue(),c),t.x=c.x,t.y=c.y,i&&i(t)}})}}))};var r=a.config.curve;return r?(a.spline=new Phaser.Curves.Spline(r),null==(n=a.tween)||n.on(Phaser.Tweens.Events.TWEEN_START,a.createCounter),a):(0,i.Z)(a)}return(0,a.Z)(t,e),t}(r.Z);t.Z=o},439:function(e,t,n){"use strict";var i=n(99),a=n(19),r=n(3),s=n(84),o=n(440),c=n(100),l=n(198),u=n(193),h=function(e){function t(t,n,i,r,s,u){var h;return void 0===u&&(u=!1),(h=e.call(this,t)||this).useSound=!0,h.isClicked=!1,h.scaleUp=-1,h.scaleDown=-1,h.button=void 0,h.upAnimation=void 0,h.downAnimation=void 0,h.isUsePixelPerfect=!1,h.hitArea=void 0,h.hitZone=void 0,h.scaleDownPress=void 0,h.parentName=void 0,h.handelObjectDestroy=function(){h.scene&&h.scene.events.off(Phaser.Scenes.Events.SLEEP,h.handleSceneSleep)},h.handleSceneSleep=function(){h.scene&&h.scene.tweens.killTweensOf((0,a.Z)(h))},h.handlePointerDown=function(){var e;h.isClicked||null!=(e=h.upAnimation)&&null!=(e=e.tween)&&e.isPlaying()||(h.isClicked=!0,h.runDownAnimation())},h.handleOnClick=function(e){return function(){var t,n;h.isClicked&&(null!=(t=h.upAnimation)&&null!=(t=t.tween)&&t.isPlaying()||(h.isClicked=!1,h.runUpAnimation(),null==(n=h.upAnimation)||null==(n=n.tween)||n.once(Phaser.Tweens.Events.TWEEN_COMPLETE,(function(){h.logButtonEvent(),h.addDebugData(),h.processCallback(e)}))))}},h.handlePointerOut=function(){var e;h.isClicked&&(null!=(e=h.upAnimation)&&null!=(e=e.tween)&&e.isPlaying()||(h.isClicked=!1,h.runUpAnimation()))},h.runDownAnimation=function(){var e;-1===h.scaleDown&&(h.scaleUp=h.scale,h.scaleDown=h.scaleDownPress),h.useSound&&h.scene.audio.playSound(l.Z.BUTTON_CLICK),null==(e=h.downAnimation)||e.remove(),h.downAnimation=new o.Z({targets:[(0,a.Z)(h)],duration:150,props:{scale:h.scaleDown},onUpdate:function(){h.hitZone.scale=1/h.scale}}),h.downAnimation.play()},h.runUpAnimation=function(){var e;-1!==h.scaleUp&&(null==(e=h.upAnimation)||e.remove(),h.upAnimation=new o.Z({targets:[(0,a.Z)(h)],duration:150,props:{scale:h.scaleUp},onUpdate:function(){h.hitZone.scale=1/h.scale}}),h.upAnimation.play())},h.isUsePixelPerfect=u,h.setDepth(c.Z.BUTTON),h.createButton(n,i,r,s),h.updateSize(),h.listenEvents(),h.scene.add.existing((0,a.Z)(h)),h}(0,r.Z)(t,e);var n=t.prototype;return n.listenEvents=function(){this.scene.events.on(Phaser.Scenes.Events.SLEEP,this.handleSceneSleep),this.once(Phaser.GameObjects.Events.DESTROY,this.handelObjectDestroy)},n.processCallback=function(e){var t,n,i;null==(t=this.upAnimation)||t.stop(),null==(n=this.downAnimation)||n.stop(),null==(i=this.scene)||i.tweens.killTweensOf(this),-1!==this.scaleUp&&this.setScale(this.scaleUp),e()},n.setDisabled=function(e){var t,n;e?(this.setAlpha(.5),null==(t=this.hitArea)||t.disableInteractive()):(this.setAlpha(1),null==(n=this.hitArea)||n.setInteractive())},n.createButton=function(e,t,n,i){this.button=this.scene.add.image(0,0,e,t),n&&i&&this.button.setWorldSize(n,i),this.scaleDownPress=this.scale-.1;var a=this.button,r=a.displayWidth,s=a.displayHeight;this.hitZone=this.scene.make.zone({displayWidth:r,displayHeight:s}),this.add([this.button,this.hitZone])},n.updateSize=function(){var e=this.button,t=e.width,n=e.height,i=t/100*10,a=n/100*10,r=i<10?i:10,s=a<10?a:10;this.setSize(t+r,n+s),this.hitZone.setSize(t+r,n+s)},n.addDebugData=function(){var e=this.getParentName(),t=this.name;(0,u.sw)("ui-click",e+":"+t)},n.logButtonEvent=function(){var e=this.getParentName(),t=this.name;this.scene.analytics.event(s._.BUTTON_CLICK,{button_name:t,screen_name:e})},n.getParentName=function(){if(this.parentName)return this.parentName;for(var e=this.parentContainer;e;){if(e instanceof GameCore.Screen){var t=e;return this.parentName=t.getScreenName(),this.parentName}e=e.parentContainer}return this.parentName=this.scene.getSceneName(),this.parentName},(0,i.Z)(t,[{key:"onClick",set:function(e){this.isUsePixelPerfect?(this.hitArea=this.button,this.hitArea.setInteractive({useHandCursor:!0,pixelPerfect:!0})):(this.hitArea=this.hitZone,this.updateSize(),this.hitArea.setInteractive({useHandCursor:!0})),this.hitArea.off(Phaser.Input.Events.GAMEOBJECT_POINTER_DOWN,this.handlePointerDown),this.hitArea.off(Phaser.Input.Events.GAMEOBJECT_POINTER_UP),this.hitArea.off(Phaser.Input.Events.GAMEOBJECT_POINTER_OUT,this.handlePointerOut),this.hitArea.on(Phaser.Input.Events.GAMEOBJECT_POINTER_DOWN,this.handlePointerDown),this.hitArea.on(Phaser.Input.Events.GAMEOBJECT_POINTER_UP,this.handleOnClick(e)),this.hitArea.on(Phaser.Input.Events.GAMEOBJECT_POINTER_OUT,this.handlePointerOut)}},{key:"isUsePixelPerFect",get:function(){return this.isUsePixelPerfect}}]),t}(Phaser.GameObjects.Container);t.Z=h},598:function(e,t,n){"use strict";var i=n(3),a=function(e){function t(t,n){var i,a=n.key,r=n.frame,s=n.width,o=n.height,c=n.usePixelPerfect;(i=e.call(this,t,a,r,s,o,c)||this).paddingZone=void 0,i.showDebugZone=void 0,i.debugZone=void 0;var l=n.paddingZone,u=void 0===l?0:l,h=n.showDebugZone,d=void 0!==h&&h;return i.paddingZone=u,i.showDebugZone=d,i}return(0,i.Z)(t,e),t.prototype.updateSize=function(){e.prototype.updateSize.call(this);var t,n=this.width,i=this.height,a=n+this.paddingZone,r=i+this.paddingZone;(this.setSize(a,r),this.hitZone.setSize(a,r),this.showDebugZone)&&(null==(t=this.debugZone)||t.destroy(),this.debugZone=this.hitZone.drawDebugBox(10699282,.5),this.add(this.debugZone))},t}(n(439).Z);t.Z=a},433:function(e,t,n){"use strict";var i=n(19),a=n(3),r=n(26),s=n(434),o=r.Z.DEFAULT,c=o.KEY,l=o.FRAME,u=function(e){function t(t){var n;return(n=e.call(this,t,0,0,c,l.PRELOADER)||this).anim=void 0,n.runAnimation(),n.setWorldSize(50,50),n.scene.add.existing((0,i.Z)(n)),n}(0,a.Z)(t,e);var n=t.prototype;return n.runAnimation=function(){var e;null==(e=this.anim)||e.remove(),this.anim=new s.Z({targets:[this],repeat:-1,duration:1200}),this.anim.play()},n.setVisible=function(t){return e.prototype.setVisible.call(this,t),t?this.runAnimation():this.anim.stop(),this},t}(Phaser.GameObjects.Image);t.Z=u},606:function(e,t,n){"use strict";var i=n(52),a=n(99),r=n(19),s=n(3),o=n(86),c=n.n(o),l=n(89),u=n.n(l),h=n(67),d=n.n(h),p=n(128),f=n.n(p),g=n(44),m=n.n(g),v=n(87),y=n.n(v),E=n(88),A=n.n(E),S=n(103),b=n.n(S),T=n(100),w=n(192);function C(e,t){var n="undefined"!==typeof A()&&b()(e)||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){var n;if(!e)return;if("string"===typeof e)return I(e,t);var i=m()(n=Object.prototype.toString.call(e)).call(n,8,-1);"Object"===i&&e.constructor&&(i=e.constructor.name);if("Map"===i||"Set"===i)return y()(e);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return I(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var i=0;return function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function I(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var P=function(e){function t(t,n){var a,s;(s=e.call(this,t)||this).config=void 0,s.isEnable=void 0,s.maxHeight=void 0,s.isScrolling=void 0,s.boundTop=void 0,s.boundBottom=void 0,s.maskGraphics=void 0,s.objects=void 0,s._value=0,s.velocity=0,s.isScrollingSmooth=void 0,s.lastScrollY=void 0,s.isScrollingBack=void 0,s.scrollingBackTo=void 0,s.lastScrollYCount=0,s.hitArea=void 0,s.onScrollEvents=[],s.updateObjectVisible=(0,w.D)((function(){for(var e=s.objects.getChildren(),t=0;t<e.length;t++){var n=e[t];n.y+n.height<-s.height||n.y-n.height>s.height?n.setVisible(!1):n.active&&n.setVisible(!0)}}),100,{maxWait:100}),s.update=function(e,t){s.isScrollingSmooth&&s.velocity&&s.scrollingSmooth(t),s.isScrollingBack&&s.scrollingBack(t)},s.checkReachBound=function(){return s.isReachTop()||s.isReachBottom()},s.onMouseScroll=(0,w.D)((function(e,t,n){if(s.isEnable){var i;if(s.isScrolling=!0,s.checkReachBound())return s.lastScrollY=c()(i=s.lastScrollY).call(i,(function(){return 0})),void(s.isScrolling=!1);s.stopScrollingBack(),s.startScrollSmooth(-n*s.scrollSmooth/15)}}),100,{isImmediate:!0,maxWait:100}),s.onTouchScroll=function(e){if(s.isEnable){s.velocity&&s.stopScrollSmooth(),s.stopScrollingBack(),s.isScrolling=!0;var t=s.scene.game.world.getZoomRatio(),n=e.position,i=e.prevPosition,a=(n.y-i.y)/t,r=s.height*s.maxScrollOver,o=1;if(s.lastScrollY[++s.lastScrollYCount%s.lastScrollY.length]=a,s.isReachTop()&&a>=0){var c=(r-(s.value-s.marginTop))/r;o=Math.min(o,c)}if(s.isReachBottom()&&a<=0){var l=(r-(-s.maxHeight-s.value))/r;o=Math.min(o,l)}var u=a*o,h=s.maxScrollOver*s.height;s.value+u>s.marginTop+h?s.value=s.marginTop+h:s.value+u<-s.maxHeight-h?s.value=-s.maxHeight-h:s.value+=u,s.callOnScrollEvents(s.value,u)}},s.onTouchDown=function(){s.isEnable&&(s.velocity&&s.stopScrollSmooth(),s.stopScrollingBack())},s.onTouchEnd=function(){var e,t;if(s.input.enabled&&(s.isReachTop()&&(s.startScrollingBack(s.marginTop),s.stopScrollSmooth()),s.isReachBottom()&&(s.startScrollingBack(-s.maxHeight),s.stopScrollSmooth()),s.isScrolling)){var n=u()(e=s.lastScrollY).call(e,(function(e,t){return e+t}))/s.lastScrollY.length;s.startScrollSmooth(n*s.scrollSmooth),s.lastScrollY=c()(t=s.lastScrollY).call(t,(function(){return 0}))}},s.config=(0,i.Z)({marginTop:0,marginBottom:0,acceleration:1400,maxScrollOver:.15,scrollSmooth:40,scrollingBackRate:5},n);var o=n.width,l=n.height;return s.isEnable=!1,s.maxHeight=0,s.lastScrollY=d()(a=new Array(3)).call(a,0),s.setSize(o,l),s.createGroup(),s.createInput(),s.createEvents(),s.scene.add.existing((0,r.Z)(s)),s}(0,s.Z)(t,e);var n=t.prototype;return n.onScroll=function(e){this.onScrollEvents.push(e)},n.gotoTop=function(){this.value=this.config.marginTop},n.reset=function(){this.maxHeight=0,this.isScrolling=!1,this.isScrollingBack=!1,this.isScrollingSmooth=!1,this.gotoTop(),this.setEnable(!1)},n.createDebug=function(){this.drawDebugBox(16711680,.8)},n.setEnable=function(e){this.isEnable=e,e?this.setInteractive({draggable:!0,useHandCursor:!0}):this.disableInteractive()},n.addItem=function(e){this.addAt(e),this.objects.add(e);var t=e.y+e.height+this.marginBottom-this.height/2;this.maxHeight=Math.max(this.maxHeight,t,0),this.updateObjectVisible()},n.addItems=function(e){var t=this;this.addAt(e),this.objects.addMultiple(e);var n=c()(e).call(e,(function(e){return e.y+e.height+t.marginBottom-t.height/2}));this.maxHeight=Math.max(this.maxHeight,Math.max.apply(Math,n),0),this.updateObjectVisible()},n.clearItem=function(){this.objects.clear(!0,!0),this.reset()},n.getChildren=function(){var e;return f()(e=this.objects.getChildren()).call(e,(function(e){return e.active}))},n.createBound=function(e,t,n,i){this.boundTop=this.scene.make.image({key:e,frame:t}),this.boundBottom=this.scene.make.image({key:e,frame:t}),this.boundTop.setTint(i),this.boundBottom.setTint(i),this.boundTop.setAlpha(1,1,0,0),this.boundBottom.setAlpha(0,0,1,1),this.boundTop.setDepth(T.Z.PRIORITY),this.boundBottom.setDepth(T.Z.PRIORITY);var a=this.width,r=n,s=this.getWorldPosition(),o=s.x,c=s.y;this.boundTop.setDisplaySize(a,r),this.boundBottom.setDisplaySize(a,r),this.boundTop.setY(-this.displayHeight/2+r/2+c-this.y-1),this.boundBottom.setY(this.displayHeight/2-r/2+c-this.y+1),this.boundTop.setX(o-this.x),this.boundBottom.setX(o-this.x),this.add([this.boundTop,this.boundBottom])},n.createMask=function(){var e;null==(e=this.maskGraphics)||e.destroy(),this.maskGraphics=this.scene.make.graphics({fillStyle:{color:255,alpha:1},visible:!0}),this.maskGraphics.setName("MaskGraphics");var t=this.width,n=this.height;this.maskGraphics.fillRoundedRect(0-t/2,0-n/2,t,n,0),this.setMask(this.maskGraphics.createGeometryMask()),this.scene.events.off(Phaser.Scenes.Events.UPDATE,this.updateMask,this),this.scene.events.on(Phaser.Scenes.Events.UPDATE,this.updateMask,this)},n.updateMask=function(){var e=this.getWorldPosition(),t=e.x,n=e.y;this.maskGraphics.setPosition(t,n)},n.createGroup=function(){this.objects=this.scene.make.group({})},n.updateObject=function(e){this.objects.incY(e),this.updateObjectVisible()},n.createInput=function(){this.setInteractive({draggable:!0,useHandCursor:!0}),this.on(Phaser.Input.Events.POINTER_WHEEL,this.onMouseScroll),this.on(Phaser.Input.Events.GAMEOBJECT_DRAG,this.onTouchScroll),this.on(Phaser.Input.Events.GAMEOBJECT_POINTER_DOWN,this.onTouchDown),this.scene.input.on(Phaser.Input.Events.POINTER_UP,this.onTouchEnd,this)},n.createEvents=function(){this.scene.events.on(Phaser.Scenes.Events.UPDATE,this.update)},n.callOnScrollEvents=function(e,t){for(var n,i=C(this.onScrollEvents);!(n=i()).done;){(0,n.value)(this,e,t)}},n.scrollingBack=function(e){var t=(this.scrollingBackTo-this.value)*e*this.scrollingBackRate/1e3;this.value+=t,Math.abs(this.scrollingBackTo-this.value)<.5&&(this.value=this.scrollingBackTo,this.stopScrollingBack()),this.callOnScrollEvents(this.value,t)},n.startScrollingBack=function(e){this.isScrollingBack=!0,this.scrollingBackTo=e},n.stopScrollingBack=function(){this.isScrollingBack=!1},n.scrollingSmooth=function(e){var t=this.velocity*e/1e3;this.value+=t;var n=Math.abs(this.velocity)/this.velocity;this.velocity-=n*this.acceleration*e/1e3,Math.abs(this.velocity)<this.acceleration*e/1e3&&this.stopScrollSmooth(),this.isReachTop()&&(this.startScrollingBack(this.marginTop),this.stopScrollSmooth()),this.isReachBottom()&&(this.startScrollingBack(-this.maxHeight),this.stopScrollSmooth()),this.callOnScrollEvents(this.value,t)},n.startScrollSmooth=function(e){this.isScrollingSmooth=!0,e&&(e*this.velocity>0?this.velocity+=e:this.velocity=e)},n.stopScrollSmooth=function(){this.isScrollingSmooth=!1,this.isScrolling=!1,this.velocity=0},n.isReachTop=function(){return this.value>this.marginTop},n.isReachBottom=function(){return-this.value>this.maxHeight},(0,a.Z)(t,[{key:"marginTop",get:function(){return this.config.marginTop}},{key:"marginBottom",get:function(){return this.config.marginBottom}},{key:"acceleration",get:function(){return this.config.acceleration}},{key:"maxScrollOver",get:function(){return this.config.maxScrollOver}},{key:"scrollSmooth",get:function(){return this.config.scrollSmooth}},{key:"scrollingBackRate",get:function(){return this.config.scrollingBackRate}},{key:"value",get:function(){return this._value},set:function(e){var t=e-this._value;this._value=e,this.updateObject(t)}}]),t}(Phaser.GameObjects.Container);t.Z=P},595:function(e,t,n){"use strict";var i=n(26).Z.EFFECTS,a=i.KEY,r=i.FRAME,s={CONFETTI_HEXAGON:{KEY:"confetti-hexagon-animation",TEXTURE:a,PREFIX:r.FX_CONFETTI_HEXAGON,FRAME_RATE:8,END:5,ZERO_PAD:0},CONFETTI_STAR_X:{KEY:"confetti-star-x",TEXTURE:a,PREFIX:r.ANIMATION_STAR_X,FRAME_RATE:4,END:4,ZERO_PAD:0},CONFETTI_STAR_Y:{KEY:"confetti-star-y",TEXTURE:a,PREFIX:r.ANIMATION_STAR_Y,FRAME_RATE:4,END:4,ZERO_PAD:0},RIBBON_A:{KEY:"animation-ribbon-a",TEXTURE:a,PREFIX:r.PREFIX_ANIMATION_RIBBON_CONFETTI_A,FRAME_RATE:16,END:3,ZERO_PAD:0},RIBBON_B:{KEY:"animation-ribbon-b",TEXTURE:a,PREFIX:r.PREFIX_ANIMATION_RIBBON_CONFETTI_B,FRAME_RATE:16,END:4,ZERO_PAD:0},RIBBON_C:{KEY:"animation-ribbon-c",TEXTURE:a,PREFIX:r.PREFIX_ANIMATION_RIBBON_CONFETTI_C,FRAME_RATE:16,END:4,ZERO_PAD:0},RIBBON_D:{KEY:"animation-ribbon-d",TEXTURE:a,PREFIX:r.PREFIX_ANIMATION_RIBBON_CONFETTI_D,FRAME_RATE:16,END:4,ZERO_PAD:0}};t.Z=s},100:function(e,t){"use strict";t.Z={BACKGROUND:1,SPRITES:2,BALL_AND_TAIL:3,SHOOTER:4,BULLET:5,FIREWORKS:5,ITEM:10,LOGO:15,BUTTON:20,FLYING_EGG:22,TILE:25,TEXT:30,ENCOURAGING:31,EFFECT:32,MESSAGE:33,UI:35,LEADERBOARD:36,BACKGROUND_LINE:37,POPUP:40,PRIORITY:80,DEBUG:90,ON_TOP:1e4}},195:function(e,t){"use strict";t.Z={PRIMARY:{KEY:"troika",TEXTURE:{en:"./assets/fonts/troika.png",ru:"./assets/fonts/troika-ru.png"},DATA:{en:"./assets/fonts/troika.xml",ru:"./assets/fonts/troika-ru.xml"}},FONT_FAMILY:"troika"}},421:function(e,t){"use strict";var n=GameCore.Utils.Image.getImageScale(),i={AVATAR:{KEY:"avatar",FILE:"./assets/images/others/avatar.jpg",CONFIG:{}},ICON_EARTH:{KEY:"icon-earth",FILE:"./assets/images/others/icon-earth.png",CONFIG:{}},BACKGROUND:{KEY:"bg",FILE:"./assets/images/"+n+"x/bg.jpg",CONFIG:{}},GAME_BACKGROUND:{KEY:"bg-game",FILE:"./assets/images/"+n+"x/bg-game.jpg",CONFIG:{}},OTHER_BACKGROUND:{KEY:"bg-other",FILE:"./assets/images/"+n+"x/bg-other.jpg",CONFIG:{}}};t.Z=i},26:function(e,t,n){"use strict";var i=n(52),a=GameCore.Utils.Image.getImageScale(),r={DEFAULT:{KEY:"default-resources",TEXTURE:"./assets/textures/"+a+"x/default-resources.png",JSON:"./assets/textures/"+a+"x/default-resources.json",TEXTURE_32_BIT:"./assets/textures/"+a+"x/default-resources-32bit.png",FRAME:{BLANK:"blank",LINE_HOR:"other/line-hor",LINE_VER:"other/line-ver",TOP_PANEL:"other/top-panel",LINE_LEFT:"other/line-left",LINE_RIGHT:"other/line-right",PRELOADER:"preloader/dual-ring",DASHBOARD_FOOTER_BLOCK:"dashboard/footer-block",LEADERBOARD_TAB_ON:"leaderboards/tab-on",LEADERBOARD_TAB_OFF:"leaderboards/tab-off",LEADERBOARD_BG_DARK:"leaderboards/bg-dark",LEADERBOARD_BG_LIGHT:"leaderboards/bg-light",MISSION_BLOCK_BG:"daily-mission/bg-block",DAILY_DAY_BG_WAIT:"daily-rewards/bg-wait",DAILY_DAY_BG_OPEN:"daily-rewards/bg-open",DAILY_DAY_BG_REWARD:"daily-rewards/bg-reward",DAILY_DAY_COIN_DAY_1:"daily-rewards/coin-day1",DAILY_DAY_COIN_DAY_2:"daily-rewards/coin-day2",DAILY_DAY_COIN_DAY_3:"daily-rewards/coin-day3",DAILY_DAY_COIN_DAY_4:"daily-rewards/coin-day4",DAILY_DAY_COIN_DAY_5:"daily-rewards/coin-day5",DAILY_DAY_COIN_DAY_6:"daily-rewards/coin-day6",RIBBON_RED:"ribbon/red",RIBBON_PINK:"ribbon/pink",RIBBON_ORANGE:"ribbon/orange",RIBBON_VIOLET:"ribbon/violet",AVATAR_BG:"avatar/bg",AVATAR_BG_BIG:"avatar/bg-big",AVATAR_FRAME_BLUE_BIG:"avatar/blue-frame-big",AVATAR_FRAME_PURPLE:"avatar/purple-frame",AVATAR_FRAME_PURPLE_BIG:"avatar/purple-frame-big",DINO:"logo/dino",DINO_SAD:"logo/dino-sad",EGGS:"logo/eggs",LEAVES:"logo/leaves",TRUMPET:"logo/trumpet",LOGO_GIFT:"logo/gift",LOGO_GIFT_ADS:"logo/gift-ad",LOGO_GIFT_GLOW:"logo/gift-glow",POPUP_TOP_LEFT:"popup/top-left",POPUP_TOP_MID:"popup/top-middle",POPUP_TOP_RIGHT:"popup/top-right",POPUP_MID_LEFT:"popup/middle-left",POPUP_MID_MID:"popup/middle-middle",POPUP_MID_RIGHT:"popup/middle-right",POPUP_BOTTOM_LEFT:"popup/bottom-left",POPUP_BOTTOM_MID:"popup/bottom-middle",POPUP_BOTTOM_RIGHT:"popup/bottom-right",POPUP_BOARD_BOTTOM:"popup/board-bottom",PROGRESS_BG_LEFT:"progress/bg-left",PROGRESS_BG_MID:"progress/bg-mid",PROGRESS_BG_RIGHT:"progress/bg-right",PROGRESS_BAR_LEFT:"progress/bar-left",PROGRESS_BAR_MID:"progress/bar-mid",PROGRESS_BAR_RIGHT:"progress/bar-right",ICON_HAND:"icons/hand",ICON_DOT:"icons/dot",ICON_BEST_SCORE_CUP:"icons/bestscore-cup",ICON_MEDAL:"icons/medal",ICON_GIFT:"icons/gift",ICON_RANKING:"icons/ranking",ICON_MISSION:"icons/mission",ICON_CLOCK:"icons/clock",ICON_ADS_VIDEO:"icons/ads-video",ICON_CANCEL:"icons/cancel",ICON_SETTING:"icons/setting",ICON_VIB:"icons/vibrate",ICON_MUSIC:"icons/music",ICON_SOUND:"icons/sound",ICON_HOME:"icons/home",ICON_SHARE:"icons/share",ICON_CROWN:"icons/crown",ICON_GOLD:"icons/gold",ICON_SILVER:"icons/silver",ICON_BRONZE:"icons/bronze",ICON_QUESTION:"icons/question",ICON_RANK_NUMBER_BG:"icons/rank-number-bg",ICON_RANK_BLUE_BG:"icons/blue-rank-number-bg",ICON_DIAMOND:"icons/diamond",ICON_COIN:"icons/coin",ICON_COIN_SMALL:"icons/coin-small",ICON_COIN_SMALL_GREY:"icons/coin-small-grey",ICON_EGGS:"icons/egg",ICON_BIRD:"icons/icon-bird",ICON_DYNAMITE:"icons/icon-dynamite",ICON_10K:"icons/icon-10k",ICON_2ND:"icons/icon-2nd",ICON_2ND_RU:"icons/icon-2nd-ru",ICON_INVITE:"icons/invite",ICON_ARROW_BIG:"icons/arrow-big",ICON_FRIENDS:"icons/friends",ICON_PLAY:"icons/play",ICON_REPLAY:"icons/replay",ICON_PLAY_WITH:"icons/play-with",ICON_CONTINUE:"icons/continue",SWITCH_ON:"switch/on",SWITCH_OFF:"switch/off",SWITCH_PANEL:"switch/panel",BUTTON_CLOSE:"buttons/close",BUTTON_ADD:"buttons/add",BUTTON_YELLOW:"buttons/yellow",BUTTON_BLUE:"buttons/blue",BUTTON_BLUE_BIG:"buttons/blue-big",BUTTON_BLUE_SHORT:"buttons/blue-short",BUTTON_BLUE_MINOR:"buttons/blue-minor",BUTTON_GREEN:"buttons/green",BUTTON_GREEN_BIG:"buttons/green-big",BUTTON_GREEN_SHORT:"buttons/green-short",BUTTON_GREEN_MINOR:"buttons/green-minor",NO_THANKS_TEXT:"texts/no-thanks",TOURNAMENT_TITLE_LOGO:"tournament/title-logo",TOURNAMENT_GREEN_BUTTON:"tournament/green-button",HORIZONTAL_LUCKY_BAR:"lucky-bar/horizontal-lucky-bar",HORIZONTAL_ARROW:"lucky-bar/horizontal-arrow",ARC_LUCKY_BAR:"lucky-bar/arc-lucky-bar",ARC_ARROW:"lucky-bar/arc-arrow"}},EFFECTS:{KEY:"effects-resources",TEXTURE:"./assets/textures/"+a+"x/effects-resources.png",JSON:"./assets/textures/"+a+"x/effects-resources.json",FRAME:{BLANK:"blank",COIN:"coin",FX_COMET:"comet",FX_SPARK:"spark",FX_CIRCLE:"circle",FX_GLOW_LIGHT:"glow-light",FX_STAR_WHITE:"star-white",FX_STAR_YELLOW:"star-yellow",FX_CONFETTI_SMALL_1:"confetti/small-1",FX_CONFETTI_SMALL_2:"confetti/small-2",FX_CONFETTI_SMALL_3:"confetti/small-3",FX_CONFETTI_SMALL_4:"confetti/small-4",FX_CONFETTI_HEXAGON:"confetti/hexagon-",ANIMATION_STAR_X:"star-x/star-",ANIMATION_STAR_Y:"star-y/star-",FX_CONFETTI_RIBBON:"ribbon/ribbon",PREFIX_ANIMATION_RIBBON_CONFETTI_A:"ribbon/falling-confetti/confetti-a/confetti-a-",PREFIX_ANIMATION_RIBBON_CONFETTI_B:"ribbon/falling-confetti/confetti-b/confetti-b-",PREFIX_ANIMATION_RIBBON_CONFETTI_C:"ribbon/falling-confetti/confetti-c/confetti-c-",PREFIX_ANIMATION_RIBBON_CONFETTI_D:"ribbon/falling-confetti/confetti-d/confetti-d-"}},ANIMATION_SCENE:{KEY:"effects-resources",PATH:"./assets/textures/"+a+"x/",JSON:"./assets/textures/"+a+"x/animation-scene-resources.json",FRAME:{BLANK:"blank",FX_CIRCLE_LIGHT:"circle-light",ANIMATION_STAR_X:"star-x/star-",ANIMATION_STAR_Y:"star-y/star-",FX_SPARK_YELLOW:"yellow-spark",FX_CONFETTI_RIBBON:"ribbon/ribbon",PREFIX_ANIMATION_RIBBON_CONFETTI_A:"ribbon/falling-confetti/confetti-a/confetti-a-",PREFIX_ANIMATION_RIBBON_CONFETTI_B:"ribbon/falling-confetti/confetti-b/confetti-b-",PREFIX_ANIMATION_RIBBON_CONFETTI_C:"ribbon/falling-confetti/confetti-c/confetti-c-",PREFIX_ANIMATION_RIBBON_CONFETTI_D:"ribbon/falling-confetti/confetti-d/confetti-d-"}},GAMEPLAY:{GAMEPLAY_TEXTURES:{KEY:"gameplay-texture",TEXTURE:"./assets/textures/"+a+"x/gameplay-textures.png",JSON:"./assets/textures/"+a+"x/gameplay-textures.json",TEXTURE_32_BIT:"./assets/textures/"+a+"x/gameplay-textures-32bit.png",FRAME:{BLANK:"blank",BUTTON_PAUSE:"buttons/pause",PROGRESS_BG:"progress/progress-bg",PROGRESS_TOP:"progress/progress-top",PROGRESS_MIDDLE:"progress/progress-middle",PROGRESS_BOTTOM:"progress/progress-bottom",RANK_VIOLET:"rank/rank-violet",RANK_YELLOW:"rank/rank-yellow",TAB_SCORE:"others/tab-score",TOP_LINE:"others/top-line",ROPE:"others/rope",HAND:"others/hand",AVATAR_BG:"avatar/bg",AVATAR_FRAME:"avatar/frame",ICON_GOLD:"icons/gold",ICON_SILVER:"icons/silver",ICON_BRONZE:"icons/bronze",EGG_EXPLOSIVE:"animations/egg/egg-explosive-",DINO_FLY:"animations/fly-dino/body/body-",DINO_LEG:"animations/fly-dino/leg/leg-",SHOWING_BOMB:"animations/bomb/showing-bomb-",OWL:"animations/owl/owl",OWL_CLOSE:"animations/owl/owl-close",DINO:"animations/dino/dino-",PARTICLE_CIRCLE_1:"particles/others/circle-1",PARTICLE_CIRCLE_2:"particles/others/circle-2",PARTICLE_STAR:"particles/others/star",BOMB_FRAGMENT:"particles/bomb/bomb-fragment-",EGG_SHELL:"particles/egg/egg-shell-",ITEM_GIFT_BOMB:"items/gift-bomb",ITEM_GIF_CLOSE:"items/gift-close",ITEM_GLOW_EFFECT:"items/glow",HIGHLIGHT_CIRCLE:"others/highlight-circle",FIRE_CIRCLE:"others/fire-circle",TAIL:"others/tail",WARNING_SIGNAL:"others/warning-signal",FOOTER_BG:"others/footer-bg",FOOTER_BG_EXTENSION:"others/footer-bg-extension"}},GAME_OBJECTS:{KEY:"gameplay-main-objects",TEXTURE:"./assets/textures/"+a+"x/gameplay-main-objects.png",JSON:"./assets/textures/"+a+"x/gameplay-main-objects.json",FRAME:{BLANK:"blank",SHOOTER:"shooter",SHOT_GUIDE:"shot-guide",BALL_BLACK:"eggs/bubble-black",BALL_BLUE:"eggs/bubble-blue",BALL_CYAN:"eggs/bubble-cyan",BALL_GRAY:"eggs/bubble-gray",BALL_GREEN:"eggs/bubble-green",BALL_PINK:"eggs/bubble-pink",BALL_RED:"eggs/bubble-red",BALL_VIOLET:"eggs/bubble-violet",BALL_YELLOW:"eggs/bubble-yellow",BOMB:"bombs/bomb",BONUS_STAMP_2X:"stamps/stamp-2x",BONUS_STAMP_3X:"stamps/stamp-3x",BONUS_STAMP_4X:"stamps/stamp-4x",BONUS_STAMP_05:"stamps/stamp-05",BONUS_STAMP_10:"stamps/stamp-10",BONUS_STAMP_15:"stamps/stamp-15",BONUS_STAMP_UP:"stamps/stamp-up",SHOT_GUIDE_BLACK:"shot-guide/black",SHOT_GUIDE_BLUE:"shot-guide/blue",SHOT_GUIDE_CYAN:"shot-guide/cyan",SHOT_GUIDE_GREEN:"shot-guide/green",SHOT_GUIDE_GRAY:"shot-guide/gray",SHOT_GUIDE_PINK:"shot-guide/pink",SHOT_GUIDE_RED:"shot-guide/red",SHOT_GUIDE_VIOLET:"shot-guide/violet",SHOT_GUIDE_YELLOW:"shot-guide/yellow",SHOT_GUIDE_ORANGE:"shot-guide/orange"}}},DEMO_SPINE:{KEY:"demo-spine",jsonPATH:"./assets/spines/demo/demo.json",atlasPATH:"./assets/spines/demo/demo.atlas"}};GameCore.Utils.Valid.isDebugger()&&(r.EFFECTS.FRAME=(0,i.Z)({},r.ANIMATION_SCENE.FRAME,r.EFFECTS.FRAME)),t.Z=r},428:function(e,t,n){"use strict";n.d(t,{C:function(){return a},K:function(){return r}});var i=n(88),a={BOOT_SCENE:"BOOT_SCENE",LOAD_SCENE:"LOAD_SCENE",GAME_SCENE:"GAME_SCENE",GLOBAL_SCENE:"GLOBAL_SCENE",DASHBOARD_SCENE:"DASHBOARD_SCENE",GAME_OVER_SCENE:"GAME_OVER_SCENE",LEADERBOARD_SCENE:"LEADERBOARD_SCENE",TOURNAMENT_SCENE:"TOURNAMENT_SCENE",RESULT_MATCH_SCENE:"RESULT_MATCH_SCENE",RESULT_ONLINE_SCENE:"RESULT_ONLINE_SCENE",TEST_SCENE:"TEST_SCENE",ANIMATIONS_SCENE:"ANIMATIONS_SCENE"},r={SWITCH:n.n(i)()("SWITCH")}},194:function(e,t,n){"use strict";n.d(t,{Ks:function(){return a},o4:function(){return i}});var i={READY_SCREEN:"READY_SCREEN",GUIDE_SCREEN:"GUIDE_SCREEN",PAUSE_SCREEN:"PAUSE_SCREEN",RESCUE_SCREEN:"RESCUE_SCREEN",NOT_ENOUGH_COINS_SCREEN:"NOT_ENOUGH_COINS_SCREEN",GAME_OVER_SCREEN:"GAME_OVER_SCREEN",NOTIFY_SCREEN:"NOTIFY_SCREEN",REWARD_SCREEN:"REWARD_SCREEN",SETTINGS_SCREEN:"SETTINGS_SCREEN",BEST_SCORE_SCREEN:"BEST_SCORE_SCREEN",DAILY_REWARD_SCREEN:"DAILY_REWARD_SCREEN",DAILY_MISSIONS_SCREEN:"DAILY_MISSIONS_SCREEN",LUCKY_REWARD_SCREEN:"LUCKY_REWARD_SCREEN"},a={SCREEN:200,POPUP:300,PRIORITY:999}},198:function(e,t){"use strict";t.Z={BUTTON_CLICK:"button_click",CONGRATULATION:"congratulation",DAILY_REWARD:"daily_reward",DIAMONDS_EAT:"diamonds_eat",GAME_OVER_SCENE:"game_over_scene",GIFT_CHARGE:"gift_charge",GIFT_EXPLODE:"gift_explode",GIFT_REVEAL:"gift_reveal",POPUP_OFF:"popup_off",POPUP_SHOW:"popup_show",SCORE_COUNTER:"score_counter",IMPACT:"gameplay_impact",SHOOT_BALL:"gameplay_shoot_ball",DROP_FLOOR:"gameplay_drop_floor",EGG_EXPLODE:"gameplay_break_egg",BOMB_EXPLODE:"gameplay_bomb_explode",WARNING:"gameplay_warning",COMBO:"gameplay_combo",SUPER_COMBO:"gameplay_super_combo",CAMBRIAN_COMBO:"gameplay_cambrian_combo",TRIASSIC_COMBO:"gameplay_triassic_combo",JURASSIC_COMBO:"gameplay_jurassic_combo",CRETACEOUS_COMBO:"gameplay_cretaceous_combo",DYNOMITE_COMBO:"gameplay_dynamite_combo",WHIRLEY_HIT:"gameplay_whirley_hit",WHIRLEYSIREN:"gameplay_whirleysiren",SHOWING_BOMB:"gameplay_showing_bomb",DESTROYED_LOTS_EGG:"gameplay_destroyed_lots_egg",START_GAME:"gameplay_start_game",GAMEOVER:"gameplay_gameover",TICKTOCK:"gameplay_ticktock",AOOGA:"gameplay_aooga"}},602:function(e,t,n){"use strict";var i=n(19),a=n(3),r=n(26).Z.EFFECTS,s=r.KEY,o=r.FRAME,c=function(e){function t(t){var n;return(n=e.call(this,t)||this).halo=void 0,n.star=void 0,n.createStar(),n.createHalo(),n.scene.add.existing((0,i.Z)(n)),n}(0,a.Z)(t,e);var n=t.prototype;return n.run=function(){this.runStarAnimation(),this.runHaloAnimation()},n.createStar=function(){this.star=this.scene.make.image({key:s,frame:o.FX_STAR_YELLOW,visible:!1}),this.star.setWorldSize(35,35),this.add(this.star)},n.createHalo=function(){this.halo=this.scene.make.image({key:s,frame:o.FX_CIRCLE,visible:!1}),this.halo.setWorldSize(162,162),this.add(this.halo)},n.runStarAnimation=function(){this.scene.tweens.killTweensOf(this.star),this.star.setVisible(!0);var e=1/GameCore.Utils.Image.getImageScale();this.scene.tweens.add({targets:[this.star],duration:400,ease:Phaser.Math.Easing.Quintic.Out,props:{scaleX:{start:16*e,to:0},scaleY:{start:10*e,to:0}},onComplete:function(){}})},n.runHaloAnimation=function(){this.scene.tweens.killTweensOf(this.halo);var e=1/this.scene.world.getPixelRatio();this.halo.setScale(e),this.halo.setVisible(!0),this.scene.tweens.add({targets:[this.halo],duration:200,ease:Phaser.Math.Easing.Cubic.Out,props:{scale:{from:e,to:5*e},alpha:{from:1,to:0}},onComplete:function(){}})},t}(Phaser.GameObjects.Container);t.Z=c},607:function(e,t,n){"use strict";var i=n(19),a=n(3),r=n(26),s=n(608),o=n(100),c=n(609),l=n(198),u=r.Z.EFFECTS,h=u.KEY,d=u.FRAME,p=function(e){function t(t){var n;return(n=e.call(this,t)||this).coinGroup=void 0,n.containerGroup=void 0,n.startsExplosive=void 0,n.startsExplosiveSmall=void 0,n.startsExplosiveSmallTimer=void 0,n.gravity=300,n.setVisible(!0),n.coinGroup=n.scene.add.group({defaultKey:h,defaultFrame:d.COIN}),n.containerGroup=n.scene.add.group({classType:Phaser.GameObjects.Container}),n.startsExplosive=new s.Z(t),n.startsExplosive.setDepth(o.Z.ON_TOP+1),n.startsExplosiveSmall=new c.Z(t),n.startsExplosiveSmall.setDepth(o.Z.ON_TOP+1),n.scene.add.existing((0,i.Z)(n)),n}(0,a.Z)(t,e);var n=t.prototype;return n.createConfigOne=function(e,t,n){var i=this,a=e/300,r=new Phaser.Math.Vector2(0,0),s=new Phaser.Math.Vector2(0,-e),o=n?-1:1,c=Phaser.Math.RND.between(-90,90),u=(c+90)/180*180*(c<0?1:(300-Math.abs(c))/300)*a,h=Phaser.Math.RND.between(20,u+20),d=new Phaser.Math.Vector2(1,0);d.setAngle(c*Math.PI/180);var p=Phaser.Math.RND.between(-Math.abs(c)-15,15-Math.abs(c)),f=h*(100-Math.abs(c))/100*a,g=Phaser.Math.RND.between(.2*f,f),m=new Phaser.Math.Vector2(1,0);m.setAngle(p*Math.PI/180);var v=o*d.x*h,y=d.y*h,E=o*m.x*g,A=m.y*g-e,S=new Phaser.Math.Vector2(v,y),b=new Phaser.Math.Vector2(E,A),T=new Phaser.Curves.CubicBezier(r,S,b,s),w=Phaser.Math.RND.between(1200+3*h,1600+3*h),C=this.coinGroup.get(0,0);return C.revive(),C.setRotation(-t.rotation),C.setWorldSize(24,22),t.add(C),{from:0,to:1,duration:w,ease:"Sine.In",onUpdate:function(e){var t=T.getPointAt(e.getValue());C.setPosition(t.x,t.y)},onComplete:function(e){if(C.kill(),!(e.totalProgress<1)&&(i.scene.audio.playSound(l.Z.DIAMONDS_EAT),!i.startsExplosiveSmallTimer||i.startsExplosiveSmallTimer.hasDispatched)){i.startsExplosiveSmallTimer=i.scene.time.delayedCall(100,(function(){return null}));var t=C.getWorldPosition();i.startsExplosiveSmall.explode(10,t.x,t.y)}}}},n.explode=function(e,t,n,i,a){var r,s=this;if(e<=0)return[];this.startsExplosive.explode(30,t,n);var o=new Phaser.Math.Vector2(i-t,a-n),c=o.length(),l=this.containerGroup.get(t,n);l.setRotation(o.angle()+Math.PI/2),l.revive(),this.add(l);for(var u=void 0,h=0,d=[],p=0;p<e;p++){var f=this.createConfigOne(c,l,p%2===0),g=this.scene.tweens.addCounter(f);d.push(g),f.duration>h&&(h=f.duration,u=g)}var m=function(){var e,t;d.forEach((function(e){e.complete()})),null==(e=s.startsExplosive.emitters.getAt(0))||e.killAll(),null==(t=s.startsExplosiveSmall.emitters.getAt(0))||t.killAll(),l.kill()};return null==(r=u)||r.once(Phaser.Tweens.Events.TWEEN_COMPLETE,(function(){l.kill(),s.scene.events.off("sleep",m)})),this.scene.events.once("sleep",m),d},t}(Phaser.GameObjects.Container);t.Z=p},604:function(e,t,n){"use strict";var i=n(19),a=n(3),r=n(26).Z.EFFECTS,s=r.KEY,o=r.FRAME,c=function(e){function t(t){var n;return(n=e.call(this,t,s,o.FX_STAR_YELLOW)||this).emitZone=void 0,n.emitter=void 0,n.createEmitZone(),n.scene.add.existing((0,i.Z)(n)),n}(0,a.Z)(t,e);var n=t.prototype;return n.createEmitZone=function(){this.emitZone=new Phaser.Geom.Rectangle},n.createEmitters=function(){var e=1/GameCore.Utils.Image.getImageScale();this.emitter=this.createEmitter({on:!1,frame:o.FX_COMET,emitZone:{source:this.emitZone,type:"random"},speed:20,timeScale:1,frequency:100,alpha:{start:1,end:0,ease:Phaser.Math.Easing.Expo.Out},scale:{start:2*e,end:.1*e,ease:Phaser.Math.Easing.Expo.Out},lifespan:2666})},n.run=function(e,t,n,i,a){this.stop(),this.reset(),this.emitZone.setSize(i,a),this.emitZone.setPosition(t-i/2,n-a/2),this.emitter.setQuantity(e),this.emitter.start()},n.explode=function(e,t,n){this.emitter||this.reset(),this.emitter.explode(e,t,n)},n.stop=function(){var e,t;null==(e=this.emitter)||e.killAll(),null==(t=this.emitter)||t.stop()},n.reset=function(){this.createEmitters()},t}(Phaser.GameObjects.Particles.ParticleEmitterManager);t.Z=c},600:function(e,t,n){"use strict";var i=n(19),a=n(3),r=n(26),s=n(125),o=r.Z.EFFECTS,c=o.KEY,l=o.FRAME,u=function(e){function t(t,n){var a;return(a=e.call(this,t,c,l.BLANK)||this).config=void 0,a.emitter=void 0,a.config=n||{},a.scene.add.existing((0,i.Z)(a)),a}(0,a.Z)(t,e);var n=t.prototype;return n.createEmitters=function(){var e=l.FX_CONFETTI_SMALL_1,t=l.FX_CONFETTI_SMALL_2,n=l.FX_CONFETTI_SMALL_3,i=l.FX_CONFETTI_SMALL_4,a=1/GameCore.Utils.Image.getImageScale(),r={on:!1,particleBringToTop:!0,frame:[e,t,n,i],tint:[14223402,1021804,5420529,16702052],timeScale:1,frequency:300,maxParticles:120,gravityY:-10,speedX:{min:-100,max:100},speedY:{min:80,max:250},alpha:{start:1,end:.8},rotate:{start:0,end:1080},scale:{min:.8*a,max:a},angle:{min:20,max:160},lifespan:{min:8e3,max:12e3}},o=(0,s.TS)(r,this.config);this.emitter=this.createEmitter(o)},n.run=function(e,t,n){this.stop(),this.emitter.setQuantity(e),this.emitter.setPosition(t,n),this.emitter.start()},n.explode=function(e,t,n){this.emitter||this.createEmitters(),this.emitter.explode(e,t,n)},n.stop=function(){var e,t,n;null==(e=this.emitter)||e.killAll(),null==(t=this.emitter)||t.stop(),null==(n=this.emitter)||n.remove(),this.createEmitters()},t}(Phaser.GameObjects.Particles.ParticleEmitterManager);t.Z=u},594:function(e,t,n){"use strict";n.d(t,{Z:function(){return Se}});var i=n(52),a=n(19),r=n(3),s=n(26),o=n(595),c=o.Z.RIBBON_A,l=c.KEY,u=c.TEXTURE,h=c.FRAME_RATE,d=c.END,p=c.PREFIX,f=c.ZERO_PAD,g=function(e){function t(t){var n={repeat:-1,frameRate:h,frames:t.generateFrameNames(u,{prefix:p,end:d,zeroPad:f,start:1}),yoyo:!0,showOnStart:!0};return e.call(this,t,l,n)||this}return(0,r.Z)(t,e),t}(Phaser.Animations.Animation),m=o.Z.RIBBON_B,v=m.KEY,y=m.TEXTURE,E=m.FRAME_RATE,A=m.END,S=m.PREFIX,b=m.ZERO_PAD,T=function(e){function t(t){var n={repeat:-1,frameRate:E,frames:t.generateFrameNames(y,{prefix:S,end:A,zeroPad:b,start:1}),yoyo:!0,showOnStart:!0};return e.call(this,t,v,n)||this}return(0,r.Z)(t,e),t}(Phaser.Animations.Animation),w=o.Z.RIBBON_C,C=w.KEY,I=w.TEXTURE,P=w.FRAME_RATE,x=w.END,k=w.PREFIX,O=w.ZERO_PAD,R=function(e){function t(t){var n={repeat:-1,frameRate:P,frames:t.generateFrameNames(I,{prefix:k,end:x,zeroPad:O,start:1}),yoyo:!0,showOnStart:!0};return e.call(this,t,C,n)||this}return(0,r.Z)(t,e),t}(Phaser.Animations.Animation),B=o.Z.RIBBON_D,_=B.KEY,D=B.TEXTURE,N=B.FRAME_RATE,L=B.END,M=B.PREFIX,G=B.ZERO_PAD,F=function(e){function t(t){var n={repeat:-1,frameRate:N,frames:t.generateFrameNames(D,{prefix:M,end:L,zeroPad:G,start:1}),yoyo:!0,showOnStart:!0};return e.call(this,t,_,n)||this}return(0,r.Z)(t,e),t}(Phaser.Animations.Animation),Z=o.Z.CONFETTI_STAR_X,U=Z.KEY,Y=Z.TEXTURE,H=Z.FRAME_RATE,z=Z.END,W=Z.PREFIX,V=Z.ZERO_PAD,K=function(e){function t(t){var n={repeat:-1,frameRate:H,frames:t.generateFrameNames(Y,{prefix:W,end:z,zeroPad:V,start:1}),yoyo:!0,showOnStart:!0};return e.call(this,t,U,n)||this}return(0,r.Z)(t,e),t}(Phaser.Animations.Animation),j=o.Z.CONFETTI_STAR_Y,X=j.KEY,q=j.TEXTURE,J=j.FRAME_RATE,Q=j.END,$=j.PREFIX,ee=j.ZERO_PAD,te=function(e){function t(t){var n={repeat:-1,frameRate:J,frames:t.generateFrameNames(q,{prefix:$,end:Q,zeroPad:ee,start:1}),showOnStart:!0};return e.call(this,t,X,n)||this}return(0,r.Z)(t,e),t}(Phaser.Animations.Animation),ne=n(86),ie=n.n(ne),ae=n(67),re=n.n(ae),se=n(44),oe=n.n(se),ce=n(87),le=n.n(ce),ue=n(88),he=n.n(ue),de=n(103),pe=n.n(de);function fe(e,t){var n="undefined"!==typeof he()&&pe()(e)||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){var n;if(!e)return;if("string"===typeof e)return ge(e,t);var i=oe()(n=Object.prototype.toString.call(e)).call(n,8,-1);"Object"===i&&e.constructor&&(i=e.constructor.name);if("Map"===i||"Set"===i)return le()(e);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return ge(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var i=0;return function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function ge(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var me=function(e){function t(t){var n,i,a;return(a=e.call(this,t)||this).scene=void 0,a.ribbon=void 0,a.graphics=void 0,a.colorUse=void 0,a.lastChange=void 0,a.currentFrame=void 0,a.isYoyo=void 0,a.isGravityChanged=void 0,a.dtCount=void 0,a.points=void 0,a.scene=t.manager.scene,a.points=ie()(n=re()(i=new Array(10)).call(i,null)).call(n,(function(){return{x:0,y:0}})),a.isYoyo=!1,a.isGravityChanged=!1,a.lastChange=0,a.currentFrame=-1,a.dtCount=0,a.createGraphics(),a.randomRibbonUsedWhenFall(),a}(0,r.Z)(t,e);var n=t.prototype;return n.randomRibbonUsedWhenFall=function(){switch(Phaser.Math.Between(0,3)){case 0:default:this.ribbon=this.scene.anims.get(o.Z.RIBBON_A.KEY);break;case 1:this.ribbon=this.scene.anims.get(o.Z.RIBBON_B.KEY);break;case 2:this.ribbon=this.scene.anims.get(o.Z.RIBBON_C.KEY);break;case 3:this.ribbon=this.scene.anims.get(o.Z.RIBBON_D.KEY)}},n.setRibbonPosition=function(e,t){var n;ie()(n=this.points).call(n,(function(n){n.x=e,n.y=t}))},n.createGraphics=function(){var e=[8443204,2928867,12013036,16376097,15285798];this.colorUse=e[Phaser.Math.Between(0,e.length-1)],this.graphics=this.scene.add.graphics({lineStyle:{width:3,color:this.colorUse}});var t=this.emitter.manager,n=t.x,i=t.y,a=t.depth;this.graphics.setDepth(a),this.graphics.setPosition(n,i)},n.update=function(t,n,i){var a=e.prototype.update.call(this,t,n,i);return this.updateColor(),this.updateFrames(t),this.dtCount+=t,this.dtCount<25||(this.dtCount-=25,this.graphics.setAlpha(this.lifeCurrent/this.life),this.alpha=this.lifeCurrent/this.life,this.updatePoints(),this.updateGraphics(),this.updateGravity(),this.updateVelocity()),a},n.updateFrames=function(e){this.lastChange+=e,this.lastChange>=this.ribbon.msPerFrame&&(this.isYoyo?this.currentFrame--:this.currentFrame++,this.currentFrame<0&&(this.isYoyo=!1,this.currentFrame=1),this.currentFrame>=this.ribbon.frames.length&&(this.isYoyo=!0,this.currentFrame-=1),this.frame=this.ribbon.frames[this.currentFrame].frame,this.lastChange-=this.ribbon.msPerFrame)},n.updatePoints=function(){this.graphics.visible&&(this.points.shift(),this.points.push({x:this.x,y:this.y}))},n.updateGraphics=function(){if(this.graphics.visible){for(var e,t=fe(this.points);!(e=t()).done;){if(0===e.value.y)return}this.graphics.clear(),this.graphics.strokePoints(this.points)}},n.updateGravity=function(){this.lifeCurrent>this.life-2100||this.isGravityChanged||(this.isGravityChanged=!0,this.graphics.destroy(),this.emitter.setVisible(!0),this.emitter.setGravityY(45))},n.updateVelocity=function(){this.graphics.visible&&(this.velocityX>this.maxVelocityX&&(this.velocityX=this.maxVelocityX),this.velocityX<-this.maxVelocityX&&(this.velocityX=-this.maxVelocityX),this.lifeCurrent>this.life-1800?this.velocityX+=Phaser.Math.Between(-10,10):this.velocityX>0?this.velocityX+=Phaser.Math.Between(-8,6):this.velocityX+=Phaser.Math.Between(-6,8))},n.updateColor=function(){this.graphics.visible||(this.tint=this.colorUse)},n.kill=function(){this.graphics.destroy()},t}(Phaser.GameObjects.Particles.Particle),ve=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n.isYoyo=void 0,n.isGravityChanged=void 0,n.lastChange=void 0,n.currentFrame=void 0,n.star=void 0,n.starX=void 0,n.starY=void 0,n.dtCount=void 0,n.isYoyo=!1,n.isGravityChanged=!1,n.lastChange=0,n.currentFrame=-1,n.scene=t.manager.scene,n.starX=n.scene.anims.get(o.Z.CONFETTI_STAR_X.KEY),n.starY=n.scene.anims.get(o.Z.CONFETTI_STAR_Y.KEY),n.star=n.starX,n.dtCount=0,n}(0,r.Z)(t,e);var n=t.prototype;return n.update=function(t,n,i){var a=e.prototype.update.call(this,t,n,i);return this.updateFrames(t),this.dtCount+=t,this.dtCount<1e3/60||(this.dtCount-=1e3/60,this.updateFrameRate(),this.updateGravity(),this.updateVelocity()),a},n.updateGravity=function(){this.lifeCurrent>this.life-2e3||this.isGravityChanged||(this.isGravityChanged=!0,this.emitter.setGravityY(15),this.emitter.setSpeedX(0))},n.updateVelocity=function(){this.lifeCurrent>this.life-2e3||(this.velocityX>0?this.velocityX+=Phaser.Math.Between(-6,3):this.velocityX+=Phaser.Math.Between(-3,6))},n.updateFrames=function(e){if(this.lastChange+=e,this.lastChange>=this.star.msPerFrame){var t=Phaser.Math.RND.between(0,1);this.star=t>0?this.starX:this.starY,this.isYoyo?this.currentFrame--:this.currentFrame++,this.currentFrame<0&&(this.isYoyo=!1,this.currentFrame=1,this.emitter.setAlpha(1)),this.currentFrame>=this.star.frames.length&&(this.isYoyo=!0,this.currentFrame-=1,this.emitter.setAlpha(.8)),this.frame=this.star.frames[this.currentFrame].frame,this.lastChange-=this.star.msPerFrame}},n.updateFrameRate=function(){this.lifeCurrent<this.life-2e3?this.star.msPerFrame=150:this.star.msPerFrame=Phaser.Math.RND.between(300,600)},t}(Phaser.GameObjects.Particles.Particle),ye=s.Z.EFFECTS,Ee=ye.KEY,Ae=ye.FRAME,Se=function(e){function t(t){var n;return(n=e.call(this,t,Ee,Ae.BLANK)||this).emitterConfetti=void 0,n.emitterRibbons=void 0,n.ribbonConfig=void 0,n.confettiConfig=void 0,n.width=void 0,n.height=void 0,n.emitterRibbons=[],n.emitterConfetti=[],n.createConfigs(),n.createAnimations(),n.scene.add.existing((0,a.Z)(n)),n}(0,r.Z)(t,e);var n=t.prototype;return n.createConfigs=function(){var e=1/GameCore.Utils.Image.getImageScale();this.ribbonConfig={on:!1,visible:!1,timeScale:1.5,frame:Ae.BLANK,particleBringToTop:!0,speedY:{min:-480,max:-560},gravityY:290,lifespan:{min:4500,max:5500},rotate:{start:0,end:1800,random:!0},scale:{min:.6*e,max:e},particleClass:me,maxVelocityX:120},this.confettiConfig={on:!1,delay:200,timeScale:2,tint:[8443204,2928867,12013036,16376097,15285798],particleBringToTop:!0,frame:Ae.PREFIX_ANIMATION_RIBBON_CONFETTI_A+"1",speedY:{min:-460,max:-580},gravityY:280,lifespan:{min:5e3,max:6e3},rotate:{start:0,end:1080},scale:{min:.6*e,max:e},particleClass:ve}},n.createAnimations=function(){if(!this.scene.anims.get(o.Z.CONFETTI_STAR_X.KEY)){var e=new K(this.scene.anims);this.scene.anims.add(o.Z.CONFETTI_STAR_X.KEY,e)}if(!this.scene.anims.get(o.Z.CONFETTI_STAR_Y.KEY)){var t=new te(this.scene.anims);this.scene.anims.add(o.Z.CONFETTI_STAR_Y.KEY,t)}if(!this.scene.anims.get(o.Z.RIBBON_A.KEY)){var n=new g(this.scene.anims);this.scene.anims.add(o.Z.RIBBON_A.KEY,n)}if(!this.scene.anims.get(o.Z.RIBBON_B.KEY)){var i=new T(this.scene.anims);this.scene.anims.add(o.Z.RIBBON_B.KEY,i)}if(!this.scene.anims.get(o.Z.RIBBON_C.KEY)){var a=new R(this.scene.anims);this.scene.anims.add(o.Z.RIBBON_C.KEY,a)}if(!this.scene.anims.get(o.Z.RIBBON_D.KEY)){var r=new F(this.scene.anims);this.scene.anims.add(o.Z.RIBBON_D.KEY,r)}},n.run=function(e,t,n,i){this.setPosition(e,t),this.width=n,this.height=i,this.createEmitters(),this.emitterConfetti.forEach((function(e){e.emitParticle(25)})),this.emitterRibbons.forEach((function(e){e.emitParticle(20)}))},n.stop=function(){var e=this;this.emitterConfetti.forEach((function(e){e.killAll()})),this.emitterRibbons.forEach((function(t){t.killAll(),t.forEachDead((function(e){e instanceof me&&e.kill()}),e)})),this.kill()},n.createEmitters=function(){this.emitterRibbons=[],this.emitterConfetti=[],this.createConfettiLeftEmitter(),this.createConfettiRightEmitter(),this.createRibbonLeftEmitter(),this.createRibbonRightEmitter()},n.createConfettiLeftEmitter=function(){var e=(0,i.Z)({},this.confettiConfig,{speedX:{min:5,max:90}}),t=this.createEmitter(e);this.emitterConfetti.push(t)},n.createConfettiRightEmitter=function(){var e=this.width,t=(0,i.Z)({},this.confettiConfig,{x:e,speedX:{min:-5,max:-90}}),n=this.createEmitter(t);this.emitterConfetti.push(n)},n.createRibbonLeftEmitter=function(){var e=(0,i.Z)({},this.ribbonConfig,{speedX:{min:20,max:80},emitCallback:function(e){e.setRibbonPosition(0,0)}}),t=this.createEmitter(e);this.emitterRibbons.push(t)},n.createRibbonRightEmitter=function(){var e=this.width,t=(0,i.Z)({},this.ribbonConfig,{x:e,speedX:{min:-20,max:-80},emitCallback:function(t){t.setRibbonPosition(e,0)}}),n=this.createEmitter(t);this.emitterRibbons.push(n)},t}(Phaser.GameObjects.Particles.ParticleEmitterManager)},605:function(e,t,n){"use strict";var i=n(19),a=n(3),r=n(26).Z.EFFECTS,s=r.KEY,o=r.FRAME,c=function(e){function t(t){var n;return(n=e.call(this,t,s,o.FX_SPARK)||this).deathZone=void 0,n.emitter=void 0,n.createDeathZone(),n.createEmitters(),n.setActive(!1),n.setVisible(!1),n.scene.add.existing((0,i.Z)(n)),n}(0,a.Z)(t,e);var n=t.prototype;return n.createDeathZone=function(){this.deathZone=new Phaser.Geom.Circle},n.createEmitters=function(){var e=1/GameCore.Utils.Image.getImageScale();this.emitter=this.createEmitter({on:!1,frame:o.FX_SPARK,speed:{min:10,max:1200},scale:{start:1.33*e,end:0},alpha:{start:1,end:0,ease:Phaser.Math.Easing.Expo.Out},deathZone:{source:this.deathZone,type:"onLeave"},lifespan:3e3})},n.explode=function(e,t,n,i){this.setActive(!0),this.setVisible(!0),this.deathZone.radius=i,this.deathZone.setPosition(t,n),this.emitter.explode(e,t,n)},t}(Phaser.GameObjects.Particles.ParticleEmitterManager);t.Z=c},596:function(e,t,n){"use strict";var i=n(19),a=n(3),r=n(26).Z.EFFECTS,s=r.KEY,o=r.FRAME,c=function(e){function t(t){var n;return(n=e.call(this,t,s,o.FX_COMET)||this).emitZone=void 0,n.emitter=void 0,n.createEmitZone(),n.createEmitters(),n.scene.add.existing((0,i.Z)(n)),n}(0,a.Z)(t,e);var n=t.prototype;return n.createEmitZone=function(){this.emitZone=new Phaser.Geom.Rectangle},n.createEmitters=function(){var e=1/GameCore.Utils.Image.getImageScale();this.emitter=this.createEmitter({on:!1,frame:o.FX_COMET,emitZone:{source:this.emitZone,type:"random"},deathZone:{source:this.emitZone,type:"onLeave"},timeScale:1,frequency:150,speedY:{min:-20,max:-60},alpha:{start:1,end:0,ease:Phaser.Math.Easing.Cubic.Out},scale:{start:1*e,end:0,ease:Phaser.Math.Easing.Cubic.Out},lifespan:{min:1500,max:2500}})},n.run=function(e,t,n,i,a){this.stop(),this.emitZone.setSize(i,a),this.emitZone.setPosition(t-i/2,n-a/2),this.emitter.setQuantity(e),this.emitter.start()},n.stop=function(){var e,t;null==(e=this.emitter)||e.killAll(),null==(t=this.emitter)||t.stop()},t}(Phaser.GameObjects.Particles.ParticleEmitterManager);t.Z=c},608:function(e,t,n){"use strict";var i=n(19),a=n(3),r=n(26).Z.EFFECTS,s=r.KEY,o=r.FRAME,c=function(e){function t(t){var n;return(n=e.call(this,t,s,o.FX_COMET)||this).emitter=void 0,n.scene=t,n.createEmitters(),n.setActive(!1),n.setVisible(!1),n.scene.add.existing((0,i.Z)(n)),n}(0,a.Z)(t,e);var n=t.prototype;return n.createEmitters=function(){var e=1/GameCore.Utils.Image.getImageScale();this.emitter=this.createEmitter({on:!1,frame:o.FX_COMET,alpha:{start:.8,end:.5},speed:{min:60,max:120},scale:{start:.4*e,end:e},lifespan:{min:700,max:1200}})},n.explode=function(e,t,n){this.revive(),this.emitter.explode(e,t,n)},t}(Phaser.GameObjects.Particles.ParticleEmitterManager);t.Z=c},609:function(e,t,n){"use strict";var i=n(19),a=n(3),r=n(26).Z.EFFECTS,s=r.KEY,o=r.FRAME,c=function(e){function t(t){var n;return(n=e.call(this,t,s,o.FX_COMET)||this).emitter=void 0,n.scene=t,n.createEmitters(),n.setActive(!1),n.setVisible(!1),n.scene.add.existing((0,i.Z)(n)),n}(0,a.Z)(t,e);var n=t.prototype;return n.createEmitters=function(){var e=1/GameCore.Utils.Image.getImageScale();this.emitter=this.createEmitter({on:!1,frame:o.FX_COMET,alpha:{start:1,end:.8},speed:{min:40,max:80},scale:{start:.4*e,end:.7*e},lifespan:{min:400,max:600}})},n.explode=function(e,t,n){this.revive(),this.emitter.explode(e,t,n)},t}(Phaser.GameObjects.Particles.ParticleEmitterManager);t.Z=c},438:function(e,t,n){"use strict";n.d(t,{Z:function(){return o}});var i=n(3),a=n(84),r=function(e){function t(t,n,i){var a;return(a=e.call(this,t,0,0,n,i)||this).setOrigin(0,0),a}return(0,i.Z)(t,e),t}(Phaser.GameObjects.Zone),s={LAYOUT_UPDATE:"layout-update"},o=function(e){function t(){var t;return(t=e.call(this,{visible:!1})||this).unsubscribeList=void 0,t.gameZone=void 0,t.background=void 0,t.handleOpenScene=function(){t.logPageviewOnOpen(),t.logEventOpen()},t.handleResize=function(){if(t.background&&t.gameZone){var e=t.world.getResizeEventData(),n=e.width,i=e.height;t.gameZone.setSize(n,i),t.background.setPosition(n/2,i/2),t.background.setDisplaySize(n,i),t.events.emit(s.LAYOUT_UPDATE)}},t.removeStateChange=function(){t.unsubscribeList.forEach((function(e){return e()}))},t}(0,i.Z)(t,e);var n=t.prototype;return n.create=function(){this.events.on("wake",this.handleOpenScene),this.events.on("resume",this.handleOpenScene),this.events.on("create",this.handleOpenScene),this.scaleGame(),this.createGameZone()},n.scaleGame=function(){var e=this.getCamera("main"),t=this.world.getZoomRatio(),n=this.world.getWorldSize(),i=n.width,a=n.height;e.setZoom(t),e.centerOn(i/2,a/2)},n.createGameZone=function(){var e=this.world.getWorldSize(),t=e.width,n=e.height;this.gameZone=new r(this,t,n)},n.getCamera=function(e){return"main"===e?this.cameras.main:this.cameras.getCamera(e)},n.createMask=function(e){void 0===e&&(e=1),this.getCamera("main").setBackgroundColor("rgba(0, 0, 0, "+e+")")},n.fontSize=function(e){return e/1},n.createBackground=function(e,t,n,i){this.background?(this.background.setTexture(e),t&&this.background.setFrame(t)):this.background=this.make.image({key:e,frame:t}),this.background.setName(e);var a=this.gameZone,r=a.displayWidth,s=a.displayHeight;this.background.setDisplaySize(r,s),GameCore.Utils.Valid.isNumber(n)&&this.background.setAlpha(n),GameCore.Utils.Valid.isNumber(i)&&this.background.setTint(i),Phaser.Display.Align.In.Center(this.background,this.gameZone)},n.handleStateChange=function(e){var t=this;this.unsubscribeList=[],e.forEach((function(e){var n=e.selector,i=e.callback,a=t.storage.watch(n,i);t.unsubscribeList.push(a)})),this.events.once("sleep",this.removeStateChange),this.events.once("destroy",this.removeStateChange),this.events.once("shutdown",this.removeStateChange)},n.logPageviewOnOpen=function(){this.analytics.pageview(this.scene.key)},n.logEventOpen=function(){this.analytics.event(a._.SCREEN_OPEN,{screen_name:this.getSceneName()})},n.getSceneName=function(){return GameCore.Utils.String.toUpperCamelCase(this.scene.key.toLowerCase())},t}(Phaser.Scene)},431:function(e,t,n){"use strict";n.d(t,{Z:function(){return N}});var i=n(99),a=n(3),r=n(85),s=n.n(r),o=n(436),c=n(437),l=n(26),u=n(428),h=n(194),d=n(203),p=n.n(d),f=function(e,t,n){if(t&&n){var i=window.game.globalScene.children.getAll(),a=!0;if(i.forEach((function(e){e instanceof GameCore.Screen&&e!==n&&e.visible&&(a=!1)})),!a)return}var r=document.getElementById("background-mask");r&&(r.style.backgroundColor="rgba(0, 0, 0, "+e+")")},g=function(){function e(){this.backgroundAlphaList=void 0,this.backgroundAlphaList=[]}var t=e.prototype;return t.requestBackgroundMaskUpdate=function(e,t){var n,i=p()(n=this.backgroundAlphaList).call(n,(function(t){return t.screenName===e}));-1===i?this.backgroundAlphaList.push({alpha:t,screenName:e}):this.backgroundAlphaList[i].alpha=t,this.updateBackgroundMask()},t.updateBackgroundMask=function(){if(0!==this.backgroundAlphaList.length){var e=1;this.backgroundAlphaList.forEach((function(t){e*=1-t.alpha})),f(1-e)}else f(0)},t.getCurrentAlpha=function(){var e=document.getElementById("background-mask");if(!e)return 0;var t=window.getComputedStyle(e).getPropertyValue("background-color").split(",")[3];return parseFloat(t)},e}(),m=n(429),v=(0,n(426).P1)([function(e){return e.scene.currentSceneKey}],(function(e){return e})),y=n(193),E=n(438),A=n(19),S=n(195),b=n(100),T=l.Z.DEFAULT,w=T.KEY,C=T.FRAME,I=function(e){function t(t){var n;return(n=e.call(this,t,0,0)||this).fps=0,n.fpsString="FPS: %1",n.fpsText=void 0,n.background=void 0,n.lastUpdate=void 0,n.update=function(e){if(!(e-n.lastUpdate<800)){n.lastUpdate=e;var t=Math.floor(n.scene.game.loop.actualFps);n.setFps(t)}},n.createFps(),n.setDepth(b.Z.DEBUG),n.scene.add.existing((0,A.Z)(n)),n.scene.events.on(Phaser.Scenes.Events.UPDATE,n.update),n}(0,a.Z)(t,e);var n=t.prototype;return n.setFps=function(e){this.fps=e;var t=Phaser.Utils.String.Format(this.fpsString,[e]);this.fpsText.setText(t)},n.createFps=function(){this.background=this.scene.make.image({key:w,frame:C.BLANK}),this.background.setName("BG"),this.background.setTint(13801480),this.background.setWorldSize(45,25),this.fpsText=this.scene.make.bitmapText({size:this.scene.fontSize(14),text:this.fpsString,font:S.Z.PRIMARY.KEY,origin:{x:.5,y:.5}}),this.fpsText.setName("FPS Meter"),Phaser.Display.Align.In.Center(this.fpsText,this.background),this.add([this.background,this.fpsText]),this.setFps(0)},t}(Phaser.GameObjects.Container),P=I,x=function(e){function t(t){var n;if((n=e.call(this,t,0,0)||this).performance=void 0,n.memory=0,n.maxMemoryLimit=void 0,n.maxPercentThreshold=void 0,n.normalColor=3459162,n.warningColor=16768343,n.alarmColor=15812200,n.memoryString="Memory: %1MB / %2MB",n.memoryText=void 0,n.lastUpdate=void 0,n.update=function(e){if(!(e-n.lastUpdate<1e3)){n.lastUpdate=e;var t=n.performance.memory.usedJSHeapSize,i=1048576*n.maxMemoryLimit,a=Math.round(t/1048576);n.setMemory(a),n.memoryText.setTint(n.normalColor),t>n.maxPercentThreshold/100*i&&n.memoryText.setTint(n.warningColor),t>i&&n.memoryText.setTint(n.alarmColor)}},n.performance=window.performance,n.createMemory(),n.setDepth(b.Z.DEBUG),n.scene.add.existing((0,A.Z)(n)),!n.isSupport())return n.memoryText.setText("Memory: not supported!"),(0,A.Z)(n);var i=n.performance.memory.jsHeapSizeLimit;return n.maxPercentThreshold=90,n.setMaxMemory(i/1048576),n.scene.events.on(Phaser.Scenes.Events.UPDATE,n.update),n}(0,a.Z)(t,e);var n=t.prototype;return n.isSupport=function(){var e;return this.performance&&!(null==(e=this.performance)||!e.memory)},n.setMaxMemory=function(e){this.maxMemoryLimit=Math.round(e)},n.setMemory=function(e){this.memory=e;var t=Phaser.Utils.String.Format(this.memoryString,[e,this.maxMemoryLimit]);this.memoryText.setText(t)},n.createMemory=function(){this.memoryText=this.scene.make.bitmapText({size:this.scene.fontSize(14),text:this.memoryString,font:S.Z.PRIMARY.KEY,depth:2e3}),this.memoryText.setName("Memory Meter"),this.add(this.memoryText),this.setMemory(0)},t}(Phaser.GameObjects.Container),k=x,O=n(432),R=l.Z.DEFAULT,B=R.KEY,_=R.FRAME,D=function(e){function t(){for(var t,n,i=arguments.length,a=new Array(i),r=0;r<i;r++)a[r]=arguments[r];return(n=e.call.apply(e,s()(t=[this]).call(t,a))||this).mask=void 0,n.backgroundMaskManager=void 0,n.fadeInAnim=void 0,n.fadeOutAnim=void 0,n.fpsMeter=void 0,n.memoryMeter=void 0,n.switchScene=function(e){n.currentScene.key!==e&&n.currentScene.switch(e)},n.emitGameEventStartScene=function(e){var t=e.scene.key;n.updateSceneState(),n.runMaskFadeOutAnimation(),n.updateActiveSceneKey(t),n.game.events.emit(Phaser.Scenes.Events.START,t),(0,y.sw)("scene","Start scene: "+t)},n.emitGameEventSleepScene=function(e){var t=e.scene.scene.key;t!==u.C.LOAD_SCENE&&(n.runMaskFadeInAnimation(),n.game.events.emit(Phaser.Scenes.Events.SLEEP,t))},n.emitGameEventWakeScene=function(e){var t=e.scene.scene.key;t!==u.C.LOAD_SCENE&&(n.updateSceneState(),n.runMaskFadeOutAnimation(),n.updateActiveSceneKey(t),n.game.events.emit(Phaser.Scenes.Events.WAKE,t))},n.emitGameEventPauseScene=function(e){var t=e.scene.scene.key;n.game.events.emit(Phaser.Scenes.Events.PAUSE,t)},n.emitGameEventResumeScene=function(e){var t=e.scene.key;n.game.events.emit(Phaser.Scenes.Events.RESUME,t)},n.emitGameEventShutdownScene=function(e){var t=e.scene.scene.key;n.game.events.emit(Phaser.Scenes.Events.SHUTDOWN,t)},n}(0,a.Z)(t,e);var n=t.prototype;return n.init=function(){this.listenScenesEvents(),this.game.globalScene=this,this.backgroundMaskManager=new g},n.setup=function(){this.scaleGame(),this.addMask(),this.addNotifyScreen(),this.addFPS(),this.addMemory()},n.addNotifyScreen=function(){var e=this.screen.add(h.o4.NOTIFY_SCREEN,O.Z);Phaser.Display.Align.In.Center(e,this.gameZone)},n.addMask=function(){this.mask=this.make.image({key:B,frame:_.BLANK});var e=this.gameZone,t=e.width,n=e.height;this.mask.setAlpha(0),this.mask.setOrigin(0,0),this.mask.setTint(0),this.mask.setWorldSize(t,n)},n.addFPS=function(){GameCore.Configs.Statistics.ShowFPSInGame&&(this.fpsMeter=new P(this),Phaser.Display.Align.In.TopLeft(this.fpsMeter,this.gameZone,-20,-10))},n.addMemory=function(){GameCore.Configs.Statistics.ShowMemoryInGame&&(this.memoryMeter=new k(this),Phaser.Display.Align.In.TopLeft(this.memoryMeter,this.gameZone,-45,-3))},n.updateSceneState=function(){this.setGlobalSceneOnTop()},n.setGlobalSceneOnTop=function(){this.scene.bringToTop(this)},n.requestBackgroundMaskUpdate=function(e,t){this.backgroundMaskManager.requestBackgroundMaskUpdate(e,t)},n.runMaskFadeInAnimation=function(){var e,t;this.mask&&GameCore.Configs.EnableEffectSceneTransition&&(null==(e=this.fadeInAnim)||e.remove(),null==(t=this.fadeOutAnim)||t.remove(),this.fadeInAnim=new o.Z({targets:[this.mask],duration:400,ease:Phaser.Math.Easing.Cubic.In,props:{alpha:{start:0,from:0,to:.6}}}),this.mask.setAlpha(0),this.fadeInAnim.play())},n.runMaskFadeOutAnimation=function(){var e,t;this.mask&&GameCore.Configs.EnableEffectSceneTransition&&(null==(e=this.fadeInAnim)||e.remove(),null==(t=this.fadeOutAnim)||t.remove(),this.fadeOutAnim=new c.Z({targets:[this.mask],duration:400,ease:Phaser.Math.Easing.Cubic.Out,props:{alpha:{start:.6,from:.6,to:0}}}),this.mask.setAlpha(1),this.fadeOutAnim.play())},n.listenScenesEvents=function(){var e=this;this.scene.manager.getScenes(!1).forEach((function(t){t.events.on(Phaser.Scenes.Events.CREATE,e.emitGameEventStartScene),t.events.on(Phaser.Scenes.Events.SLEEP,e.emitGameEventSleepScene),t.events.on(Phaser.Scenes.Events.WAKE,e.emitGameEventWakeScene),t.events.on(Phaser.Scenes.Events.PAUSE,e.emitGameEventPauseScene),t.events.on(Phaser.Scenes.Events.RESUME,e.emitGameEventResumeScene),t.events.on(Phaser.Scenes.Events.SHUTDOWN,e.emitGameEventShutdownScene)})),this.events.on(u.K.SWITCH,this.switchScene)},n.getActiveScene=function(){return this.scene.manager.getScenes(!0)[0]},n.getCurrentScene=function(){return this.currentScene},n.updateActiveSceneKey=function(e){e!==u.C.GLOBAL_SCENE&&this.storage.dispatch((0,m.I)(e))},n.logEventOpen=function(){},n.logPageviewOnOpen=function(){},(0,i.Z)(t,[{key:"currentScene",get:function(){var e=this.storage.getState(),t=v(e);return(t?this.scene.manager.getScene(t):this.getActiveScene()).scene}}]),t}(E.Z),N=D},196:function(e,t,n){"use strict";var i=n(431);t.Z=i.Z},432:function(e,t,n){"use strict";var i=n(3),a=n(435),r=n(433),s=n(195),o=n(194),c=n(431),l=function(e){function t(t,n,i,a){var r;return(r=e.call(this,t,n,i,a)||this).loadingIcon=void 0,r.messageText=void 0,r.openAnimation=void 0,r.closeTimerEvent=void 0,r.addLoadingIcon(),r.addMessageText(),r.setDepth(o.Ks.PRIORITY),r.background.setAlpha(.8),r}(0,i.Z)(t,e);var n=t.prototype;return n.open=function(t){var n,i=this;e.prototype.open.call(this,t);var a=this.scene.game.globalScene;a instanceof c.Z&&a.requestBackgroundMaskUpdate(o.o4.NOTIFY_SCREEN,.8);var r=this.getData(["message","duration","loading"]),s=r[0],l=void 0===s?"":s,u=r[1],h=void 0===u?0:u,d=r[2],p=void 0!==d&&d;this.setMessage(l),this.showLoading(p),null==(n=this.closeTimerEvent)||n.remove(),h>0&&(this.closeTimerEvent=this.scene.time.addEvent({delay:h,callback:function(){i.visible&&i.scene.screen.close(i.name)}})),this.data.reset()},n.addLoadingIcon=function(){this.loadingIcon=new r.Z(this.scene),this.add(this.loadingIcon),Phaser.Display.Align.In.Center(this.loadingIcon,this.zone)},n.addMessageText=function(){this.messageText=this.scene.make.bitmapText({size:this.scene.fontSize(28),font:s.Z.PRIMARY.KEY,origin:{x:.5,y:.5}}),this.messageText.setCenterAlign(),this.add(this.messageText)},n.setMessage=function(e){this.messageText.setText(e)},n.showLoading=function(e){e?this.loadingIcon.revive():this.loadingIcon.kill();var t=!1===e?20:80;Phaser.Display.Align.In.Center(this.messageText,this.zone,-5,t)},n.runOpenAnimation=function(){var e,t;null==(e=this.openAnimation)||e.stop(),null==(t=this.openAnimation)||t.remove(),this.openAnimation=new a.Z({targets:[this.messageText,this.loadingIcon],props:{scale:{getStart:function(e){return e.scale-.3},getEnd:function(e){return e.scale}}}}),this.openAnimation.play()},n.close=function(){e.prototype.close.call(this);var t=this.scene.game.globalScene;t instanceof c.Z&&t.requestBackgroundMaskUpdate(o.o4.NOTIFY_SCREEN,0)},n.logPageviewOnOpen=function(){},n.logPageviewOnClose=function(){},t}(GameCore.Screen);t.Z=l},556:function(e,t,n){"use strict";var i=n(193),a=n(419),r=n(52),s=n(53),o=n(3),c=n(66),l=n.n(c),u=n(39),h=n.n(u),d=n(591),p=0,f=0,g=function(){function e(e){this.game=void 0,this.progressFbTimeEvent=void 0,this.game=e}var t=e.prototype;return t.loadingProgressFbBootScene=function(){var e=this,t=100;f=30;!function n(){t<=0?clearTimeout(e.progressFbTimeEvent):e.progressFbTimeEvent=setTimeout((function(){e.game.facebook.setLoadingProgress(Math.round(f)),f+=30/t,t--,n()}),50)}()},t.finishLoadingProgressFbBootScene=function(){clearTimeout(this.progressFbTimeEvent)},t.loadingProgressFbLoadScene=function(){var e=this;(!f||f<30)&&(f=60),p=f;!function t(){e.progressFbTimeEvent=setTimeout((function(){e.game.facebook.setLoadingProgress(Math.round(f)),f+=.1,t()}),50)}()},t.onProgress=function(e){var t=100-f,n=Math.round(e*t+f);n>p&&clearTimeout(this.progressFbTimeEvent),this.game.facebook.setLoadingProgress(n)},e}(),m=function(){function e(e){this.game=void 0,this.game=e}var t=e.prototype;return t.addKillRevive=function(){var e=this;[Phaser.GameObjects.Container,Phaser.GameObjects.Image,Phaser.GameObjects.Sprite,Phaser.GameObjects.Graphics,Phaser.GameObjects.Text,Phaser.GameObjects.BitmapText,Phaser.GameObjects.Particles.ParticleEmitter,Phaser.GameObjects.Particles.ParticleEmitterManager].forEach((function(t){t.prototype.kill=e.kill,t.prototype.revive=e.revive}))},t.addKillReviveGroup=function(){Phaser.GameObjects.Group.prototype.killGroup=this.killGroup,Phaser.GameObjects.Group.prototype.reviveGroup=this.reviveGroup},t.addSetWorldSize=function(){var e=this;[Phaser.GameObjects.Image,Phaser.GameObjects.Sprite,Phaser.GameObjects.Rope].forEach((function(t){t.prototype.setWorldSize=e.setWorldSize}))},t.addSetWorldSizeForContainer=function(){var e=this;[Phaser.GameObjects.Container].forEach((function(t){t.prototype.setWorldSize=e.setWorldSizeForContainer}))},t.addGetWorldPosition=function(){var e=this;[Phaser.GameObjects.Container,Phaser.GameObjects.Image,Phaser.GameObjects.Sprite,Phaser.GameObjects.Graphics,Phaser.GameObjects.Text,Phaser.GameObjects.BitmapText].forEach((function(t){t.prototype.getWorldPosition=e.getWorldPosition}))},t.addDrawDebugBox=function(){var e=this;[Phaser.GameObjects.Container,Phaser.GameObjects.Image,Phaser.GameObjects.Sprite,Phaser.GameObjects.Graphics,Phaser.GameObjects.Text,Phaser.GameObjects.BitmapText,Phaser.GameObjects.Zone].forEach((function(t){t.prototype.drawDebugBox=e.drawDebugBox}))},t.addHighQuality=function(){var e=this;[Phaser.GameObjects.Text].forEach((function(t){t.prototype.setHighQuality=e.setHighQuality}))},t.addSetLineHeightForBitmapText=function(){Phaser.GameObjects.BitmapText.prototype.setLineHeight=function(e){this.lineHeight=e,this.updateDisplayOrigin()}},t.kill=function(){this.setActive(!1),this.setVisible(!1)},t.revive=function(){this.setActive(!0),this.setVisible(!0)},t.killGroup=function(){this.getChildren().forEach((function(e){e.setActive(!1),e.setVisible(!1)}))},t.reviveGroup=function(){this.getChildren().forEach((function(e){e.setActive(!0),e.setVisible(!0)}))},t.setWorldSize=function(e,t){this.setSize(e,t),this.setDisplaySize(e,t)},t.setWorldSizeForContainer=function(e,t,n){void 0===n&&(n=2),this.setSize(e*n,t*n),this.setDisplaySize(e,t)},t.getWorldPosition=function(){var e=this.getWorldTransformMatrix().decomposeMatrix();return{x:e.translateX,y:e.translateY}},t.drawDebugBox=function(e,t){var n=this.x,i=this.y,a=this.width,r=this.height,s=this.depth,o=this.originX,c=this.originY,l=this.scene.add.rectangle(n,i,a,r,e,t);l.setName("Debug Box"),l.setDepth(s);var u=GameCore.Utils.Valid.isNumber;return u(o)&&u(c)&&l.setOrigin(o,c),l},t.setHighQuality=function(){return this.renderer instanceof Phaser.Renderer.WebGL.WebGLRenderer?this.setResolution(2*this.scene.game.world.getZoomRatio()):this},e}(),v=m,y=n(44),E=n.n(y),A=n(87),S=n.n(A),b=n(88),T=n.n(b),w=n(103),C=n.n(w),I=n(85),P=n.n(I),x=n(200),k=n.n(x),O=n(68),R=n.n(O),B=[{url:"./assets/images/others/mock1.jpg",title:"Buy lottery tickets on behalf",description:"\ud83d\udca5\ud83d\udca5\ud83d\udca5 Place an order for lottery tickets from 3 regions!!! \u2705 Fast - Convenient - Safe \u2705 Diverse products \u2705 Payment...",buttonName:"Discover more"},{url:"./assets/images/others/mock2.jpg",title:"SYSTEM-WIDE SALE UP TO 50%",description:'\ud83d\udd25 \ud835\uddec\ud835\uddd8\ud835\uddd4\ud835\udde5 \ud835\uddd8\ud835\udde1\ud835\uddd7 \ud835\udde6\ud835\uddd4\ud835\udddf\ud835\uddd8 | \ud835\udde8\ud835\udde3 \ud835\udde7\ud835\udde2 \ud835\udff1\ud835\udfec% "BIG PARTY" AUTHENTIC SPORTSWEAR SHOCKINGLY REDUCED PRICES! \ud83c\udf81 From...',buttonName:"Discover more"},{url:"./assets/images/others/mock3.jpg",title:"Register now",description:"Play safe, play fun, play 9club!",buttonName:"Register"}],_=function(){function e(){}return e.loadBannerAdAsync=function(){var e=(0,s.Z)(h().mark((function e(){var t,n,i,a,r,s,o,c,u,d;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.currentIdx=(this.currentIdx+1)%B.length,this.hideBannerAdAsync(),e.next=4,new(l())((function(e){setTimeout((function(){e()}),2e3)}));case 4:if(!document.getElementById("mock-banner-ads")){e.next=16;break}return t=B[this.currentIdx],n=t.url,i=t.buttonName,a=t.title,r=t.description,(s=document.getElementById("banner-content-text1"))&&(s.innerHTML=a),(o=document.getElementById("banner-content-text2"))&&(o.innerHTML=r),(c=document.getElementById("mock-banner-ads-avatar"))&&(c.style.background="url("+n+") center center/contain no-repeat"),(u=document.getElementById("banner-content-button"))&&(u.innerHTML=i),e.abrupt("return");case 16:d=GameCore.Utils.Device.isDesktop(),50,d?this.createDesktopBannerAd(50):this.createMobileBannerAd(50);case 19:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),e.createDesktopBannerAd=function(e){var t=this,n=B[this.currentIdx],i=n.url,a=n.buttonName,r=n.title,s=n.description,o=document.createElement("div");o.id="mock-banner-ads",o.style.width="100%",o.style.height=e+"px",o.style.bottom="var(--sab)",o.style.display="flex",o.style.position="absolute",o.style.opacity=this.currentOpacity;var c=document.createElement("div");c.id="mock-banner-ads-display-area",c.style.width="100%",c.style.height="100%",c.style.background="#323436 center center/auto no-repeat",c.style.borderRadius="10px",c.style.marginLeft="4px",c.style.marginRight="4px",c.style.display="block",c.style.alignContent="center";var l=document.createElement("div");l.id="mock-banner-ads-content",l.style.boxSizing="border-box",l.style.flexDirection="row",l.style.display="flex",l.style.position="relative",l.style.alignItems="stretch",l.style.paddingLeft="4px",l.style.paddingRight="4px",l.style.justifyContent="space-between";var u=document.createElement("div");u.id="mock-banner-ads-avatar",u.style.marginLeft="10px",u.style.width=e+"px",u.style.minWidth=e+"px",u.style.height=e+"px",u.style.display="flex",u.style.flexDirection="column",u.style.position="relative",u.style.background="url("+i+") center center/contain no-repeat",u.style.borderRadius="50%";var h=document.createElement("div");h.id="mock-banner-ads-right-content",h.style.width="100%",h.style.paddingLeft="10px",h.style.display="flex",h.style.flexDirection="row",h.style.position="relative",h.style.color="#E4E6EB",h.style.wordWrap="break-word",h.style.textAlign="left",h.style.alignContent="center",h.style.alignItems="center",h.style.fontSize="12px",h.style.fontFamily="Helvetica, Arial, sans-serif, Roboto, Helvetica, Arial, sans-serif",u.style.boxSizing="border-box";var d=document.createElement("div");d.style.flexDirection="column",d.style.display="flex",d.style.justifyContent="center",d.style.flexShrink="1",d.style.flexGrow="1",d.style.flexBasis="0",d.style.boxSizing="border-box",d.style.minWidth="0",d.innerHTML="\n            <div id='banner-content-text1' style=\"font-weight:600;line-height: 1.3333;font-size: .9375rem;text-overflow: ellipsis;-webkit-line-clamp: 1;overflow: hidden;display: -webkit-box;-webkit-box-orient: vertical;\">"+r+"</div>\n            <div id='banner-content-text2' style=\"font-weight:400;line-height: 1.2308;font-size: .8125rem;text-overflow: ellipsis;-webkit-line-clamp: 2;overflow: hidden;display: -webkit-box;-webkit-box-orient: vertical;\">"+s+"</div>";var p=document.createElement("button");p.id="banner-content-button",p.type="button",p.style.width="120px",p.style.height=e-20+"px",p.style.fontWeight="600",p.style.backgroundColor="#3963fc",p.style.border="none",p.style.color="white",p.style.borderRadius="5px",p.style.textAlign="center",p.style.display="inline-block",p.style.cursor="pointer",p.style.marginRight="10px",p.style.marginLeft="10px",p.style.flexShrink="1",p.style.boxSizing="border-box",p.style.paddingRight="2px",p.style.paddingLeft="2px",p.innerHTML=a,p.onclick=function(){"0.2"===t.currentOpacity?o.style.opacity="1":o.style.opacity="0.2",t.currentOpacity=o.style.opacity};var f=document.createElement("button");f.type="button",f.style.width=e-20+"px",f.style.height=e-20+"px",f.style.fontWeight="1000",f.style.backgroundColor="#5a5c5c",f.style.border="none",f.style.color="white",f.style.borderRadius="50%",f.style.textAlign="center",f.style.display="inline-block",f.style.cursor="pointer",f.style.marginRight="10px",f.style.marginLeft="10px",f.style.flexShrink="0",f.style.boxSizing="border-box",f.style.paddingRight="2px",f.style.paddingLeft="2px",f.innerHTML="...",document.body.appendChild(o),o.appendChild(c),c.appendChild(l),l.appendChild(u),l.appendChild(h),h.appendChild(d),h.appendChild(p),h.appendChild(f)},e.createMobileBannerAd=function(e){var t=this,n=B[this.currentIdx],i=n.url,a=n.buttonName,r=n.title,s=n.description,o=document.createElement("div");o.id="mock-banner-ads",o.style.width="100%",o.style.height=e+"px",o.style.bottom="var(--sab)",o.style.display="block",o.style.position="absolute",o.style.opacity=this.currentOpacity;var c=document.createElement("div");c.id="mock-banner-ads-display-area",c.style.background="#ffffff center center/auto no-repeat",c.style.display="block",c.style.alignContent="center";var l=document.createElement("div");l.id="mock-banner-ads-content",l.style.boxSizing="border-box",l.style.flexDirection="row",l.style.display="flex",l.style.position="relative",l.style.alignItems="stretch",l.style.justifyContent="space-between";var u=document.createElement("div");u.id="mock-banner-ads-avatar",u.style.width=e+"px",u.style.minWidth=e+"px",u.style.height=e+"px",u.style.display="flex",u.style.flexDirection="column",u.style.position="relative",u.style.background="url("+i+") center center/contain no-repeat";var h=document.createElement("div");h.id="mock-banner-ads-right-content",h.style.width="100%",h.style.paddingLeft="10px",h.style.display="flex",h.style.flexDirection="row",h.style.position="relative",h.style.color="#000",h.style.wordWrap="break-word",h.style.textAlign="left",h.style.alignContent="center",h.style.alignItems="center",h.style.fontSize="12px",h.style.fontFamily="Helvetica, Arial, sans-serif, Roboto, Helvetica, Arial, sans-serif",u.style.boxSizing="border-box";var d=document.createElement("div");d.style.flexDirection="column",d.style.display="flex",d.style.justifyContent="center",d.style.flexShrink="1",d.style.flexGrow="1",d.style.flexBasis="0",d.style.boxSizing="border-box",d.style.minWidth="0",d.innerHTML="\n            <div id='banner-content-text1' style=\"font-weight:600;line-height: 1.3333;font-size: .9375rem;text-overflow: ellipsis;-webkit-line-clamp: 1;overflow: hidden;display: -webkit-box;-webkit-box-orient: vertical;\">"+r+"</div>\n            <div id='banner-content-text2' style=\"font-weight:400;line-height: 1.2308;font-size: .8125rem;text-overflow: ellipsis;-webkit-line-clamp: 1;overflow: hidden;display: -webkit-box;-webkit-box-orient: vertical;\">"+s+"</div>";var p=document.createElement("button");p.id="banner-content-button",p.type="button",p.style.height="100%",p.style.fontWeight="600",p.style.backgroundColor="#3963fc",p.style.border="none",p.style.color="white",p.style.textAlign="center",p.style.display="inline-block",p.style.cursor="pointer",p.style.marginLeft="10px",p.style.flexShrink="1",p.style.boxSizing="border-box",p.style.paddingRight="7px",p.style.paddingLeft="7px",p.innerHTML=a,p.onclick=function(){"0.2"===t.currentOpacity?o.style.opacity="1":o.style.opacity="0.2",t.currentOpacity=o.style.opacity},document.body.appendChild(o),o.appendChild(c),c.appendChild(l),l.appendChild(u),l.appendChild(h),h.appendChild(d),h.appendChild(p)},e.hideBannerAdAsync=function(){var e=(0,s.Z)(h().mark((function e(){var t;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=document.getElementById("mock-banner-ads")){e.next=3;break}return e.abrupt("return");case 3:t.remove();case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),e}();_.currentIdx=-1,_.currentOpacity="1";var D={LOADED:"loaded",DISPLAYED:"displayed"},N=function(e){return e.IDLE="idle",e.LOADING="loading",e.FILLED="filled",e.SHOWING="showing",e}(N||{}),L=N,M=function(e){return e.REWARDED="rewarded",e.PRE_ROLL="pre-roll",e.INTERSTITIAL="interstitial",e.BANNER="banner",e}(M||{}),G=M,F=n(127),Z=function(e){function t(t,n){var i;return(i=e.call(this,n)||this).code=void 0,i.code=t,i.message=n,i}return(0,o.Z)(t,e),t}((0,F.Z)(Error)),U=function(e){this.type=void 0,this.status=void 0,this.type=e,this.status=L.IDLE};function Y(e,t){var n="undefined"!==typeof T()&&C()(e)||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){var n;if(!e)return;if("string"===typeof e)return H(e,t);var i=E()(n=Object.prototype.toString.call(e)).call(n,8,-1);"Object"===i&&e.constructor&&(i=e.constructor.name);if("Map"===i||"Set"===i)return S()(e);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return H(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var i=0;return function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function H(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}GameCore.Ads={Types:G,Status:L,Events:D,AdError:Z,AdInstance:U};var z=function(e){function t(){for(var t,n,i=arguments.length,a=new Array(i),r=0;r<i;r++)a[r]=arguments[r];return(n=e.call.apply(e,P()(t=[this]).call(t,a))||this).events=void 0,n.enabled=void 0,n.config=void 0,n.lastInterAdShownTime=void 0,n.lastInterAdLoadedTime=void 0,n.lastRewardAdShownTime=void 0,n.interstitial=void 0,n.rewardedVideo=void 0,n.preRoll=void 0,n.fallbackInterstitial=void 0,n.fallbackRewardedVideo=void 0,n.fallbackPreRoll=void 0,n.safeAreaBottom=void 0,n.showingBannerAd=void 0,n.reloadBannerAdIntervals=void 0,n.bannerAdConfigs=void 0,n.isHaveBannerAdOptions=void 0,n.isFallbackReady=void 0,n.isFallbackInitialized=void 0,n.isBannerAdsShown=void 0,n}(0,o.Z)(t,e);var i=t.prototype;return i.init=function(){this.events=new Phaser.Events.EventEmitter,this.safeAreaBottom=0,this.lastInterAdShownTime=0,this.lastInterAdLoadedTime=0,this.lastRewardAdShownTime=0,this.showingBannerAd={},this.reloadBannerAdIntervals={},this.bannerAdConfigs=[],this.isHaveBannerAdOptions=!0,this.isFallbackReady=!1,this.isFallbackInitialized=!1,this.isBannerAdsShown=!1},i.calculateSafeAreaBottom=function(){try{if(!this.config.calculateSafeAreaBottom)return;this.safeAreaBottom=parseInt(getComputedStyle(document.documentElement).getPropertyValue("--sab")),isNaN(this.safeAreaBottom)&&(this.safeAreaBottom=0)}catch(e){this.safeAreaBottom=0}},i.configure=function(e,t){this.enabled=t.enabled,this.config=t,this.setAdInstance(e),this.setBannerAdConfigStatus(),this.calculateSafeAreaBottom()},i.setBannerAdConfigStatus=function(){for(var e,t=this.config.bannerAdOptions,n=GameCore.Utils.Device.isDesktop(),i=Y(t);!(e=i()).done;){var a=e.value,r=a.platform,s="ALL"==r||"DESKTOP"==r&&n||"MOBILE"==r&&!n;this.bannerAdConfigs.push({config:a,canShow:s}),s&&(this.isHaveBannerAdOptions=!0)}},i.setAdInstance=function(e){var t=this.config,n=t.rewardAdOptions,i=t.interstitialAdOptions;this.interstitial=new e(G.INTERSTITIAL,n.pID),this.rewardedVideo=new e(G.REWARDED,i.pID),this.preRoll=new e(G.PRE_ROLL,i.pID)},i.setFallbackAdInstance=function(e){var t=this.config,n=t.rewardAdOptions,i=t.interstitialAdOptions;this.fallbackInterstitial=new e(G.INTERSTITIAL,i.pID),this.fallbackRewardedVideo=new e(G.REWARDED,n.pID),this.fallbackPreRoll=new e(G.PRE_ROLL,i.pID)},i.preloadInterstitialAdAsync=function(){var e=(0,s.Z)(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.preloadAdAsync(G.INTERSTITIAL);case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),i.showInterstitialAdAsync=function(){var e=(0,s.Z)(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.canbeShowInterstitialAdByTime()){e.next=2;break}throw new Z("INTERSTITIAL_AD_CAN_NOT_SHOW","Can't show interstitial ad");case 2:return e.next=4,this.showAdAsync(G.INTERSTITIAL);case 4:this.lastInterAdShownTime=window.performance.now()/1e3;case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),i.preloadPreRollAdAsync=function(){var e=(0,s.Z)(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.preloadAdAsync(G.PRE_ROLL);case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),i.showPreRollAdAsync=function(){var e=(0,s.Z)(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.showAdAsync(G.PRE_ROLL);case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),i.preloadRewardedVideoAsync=function(){var e=(0,s.Z)(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.preloadAdAsync(G.REWARDED);case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),i.showRewardedVideoAsync=function(){var e=(0,s.Z)(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.canbeShowRewardAd()){e.next=2;break}throw new Z("REWARDED_VIDEO_CAN_NOT_SHOW","Can't show rewarded video");case 2:return e.next=4,this.showAdAsync(G.REWARDED);case 4:this.lastRewardAdShownTime=window.performance.now()/1e3;case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),i.getRemainingRewardTime=function(){var e=window.performance.now()/1e3,t=this.config.rewardAdOptions.secondsBetweenAds,n=e-this.lastRewardAdShownTime;return n<t?t-n:0},i.preloadAdAsync=function(){var e=(0,s.Z)(h().mark((function e(t){var n,i;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.enabled){e.next=2;break}throw new Z("ADS_NOT_ENABLED","Ads is't enabled");case 2:return e.next=4,this.preloadMainAdService(t);case 4:if(!0!==(n=e.sent)){e.next=7;break}return e.abrupt("return");case 7:if(this.isFallbackReady){e.next=9;break}throw n;case 9:return e.next=11,this.preloadFallbackAdService(t);case 11:if(!0!==(i=e.sent)){e.next=14;break}return e.abrupt("return");case 14:throw i;case 15:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),i.preloadMainAdService=function(e){var t=this;return new(l())((function(n){var i=!1;t.preloadAdInstanceAsync(e,!1).then((function(){i=!0})).catch((function(e){t.isFallbackReady||t.initFallbackAdsService().catch((function(){t.isFallbackReady=!1})),i=e})).finally((function(){n(i)}))}))},i.preloadFallbackAdService=function(e){var t=this;return new(l())((function(n){var i=!1;t.isFallbackReady||n(new Z("FALLBACK_NOT_READY","Fallback ads not ready")),t.preloadAdInstanceAsync(e,!0).then((function(){i=!0})).catch((function(e){i=e})).finally((function(){n(i)}))}))},i.preloadAdInstanceAsync=function(){var e=(0,s.Z)(h().mark((function e(t,n){var i,a=this;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===n&&(n=!1),null!==(i=this.getAdInstanceByType(t,n))){e.next=4;break}throw new Z("AD_INSTANCE_NOT_INITIATED","The instance ads not yet initiated");case 4:if(i.getStatus()!==L.LOADING){e.next=8;break}return e.next=7,new(l())((function(e){a.events.once(D.LOADED,e)}));case 7:return e.abrupt("return");case 8:return t!==G.INTERSTITIAL&&t!==G.PRE_ROLL||(this.lastInterAdLoadedTime=window.performance.now()/1e3),e.next=11,i.loadAsync();case 11:this.events.emit(D.LOADED,t);case 12:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}(),i.showAdAsync=function(){var e=(0,s.Z)(h().mark((function e(t){var n,i;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.enabled){e.next=2;break}throw new Z("ADS_NOT_ENABLED","Ads is't enabled");case 2:return e.next=4,this.showMainAdService(t);case 4:if(!0!==(n=e.sent)){e.next=7;break}return e.abrupt("return");case 7:if(!this.isUserCancelledAdError(n)&&this.isAdFallbackReadyToShow(t)){e.next=9;break}throw n;case 9:return e.next=11,this.showFallbackAdService(t);case 11:if(!0!==(i=e.sent)){e.next=14;break}return e.abrupt("return");case 14:throw i;case 15:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),i.showMainAdService=function(e){var t=this;return new(l())((function(n){var i=!1;t.showAdInstanceAsync(e,!1).then((function(){i=!0})).catch((function(e){i=e,t.isUserCancelledAdError(e)||t.isFallbackReady||t.initFallbackAdsService().catch((function(){t.isFallbackReady=!1}))})).finally((function(){n(i)}))}))},i.showFallbackAdService=function(e){var t=this;return new(l())((function(n){var i=!1;t.isFallbackReady||n(new Z("FALLBACK_NOT_READY","Fallback ads not ready")),t.showAdInstanceAsync(e,!0).then((function(){i=!0})).catch((function(e){i=e})).finally((function(){n(i)}))}))},i.showAdInstanceAsync=function(){var e=(0,s.Z)(h().mark((function e(t,n){var i;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===n&&(n=!1),null!==(i=this.getAdInstanceByType(t,n))){e.next=4;break}throw new Z("AD_INSTANCE_NOT_INITIATED","The instance ads not yet initiated");case 4:return t!==G.INTERSTITIAL&&t!==G.PRE_ROLL||(this.lastInterAdShownTime=window.performance.now()/1e3),t===G.REWARDED&&(this.lastRewardAdShownTime=window.performance.now()/1e3,this.config.enableRewardVideoResetInterstitial&&(this.lastInterAdShownTime=this.lastRewardAdShownTime)),e.next=8,i.showAsync();case 8:this.events.emit(D.DISPLAYED,t);case 9:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}(),i.getAdStatus=function(e){var t=this.getAdInstanceByType(e);return t?t.getStatus():null},i.getAdInstanceByType=function(e,t){if(void 0===t&&(t=!1),t)switch(e){case G.INTERSTITIAL:return this.fallbackInterstitial;case G.REWARDED:return this.fallbackRewardedVideo;case G.PRE_ROLL:return this.fallbackPreRoll;default:return null}switch(e){case G.INTERSTITIAL:return this.interstitial;case G.REWARDED:return this.rewardedVideo;case G.PRE_ROLL:return this.preRoll;default:return null}},i.canbeShowInterstitialAd=function(){var e=this.canbeLoadInterstitialAdByTime();return e&&(e=this.canbeShowInterstitialAdByTime()),e},i.canbeLoadInterstitialAdByTime=function(){var e=window.performance.now()/1e3,t=this.config.interstitialAdOptions,n=t.secondsFirstTime,i=t.secondsBetweenAds,a=Math.floor(e-this.lastInterAdLoadedTime);return this.lastInterAdLoadedTime>0?a>=i:a>=n},i.canbeShowInterstitialAdByTime=function(){var e=window.performance.now()/1e3,t=this.config.interstitialAdOptions,n=t.secondsFirstTime,i=t.secondsBetweenAds,a=Math.floor(e-this.lastInterAdShownTime);return this.lastInterAdShownTime>0?a>=i:a>=n},i.canbeShowRewardAd=function(){var e=window.performance.now()/1e3,t=this.config.rewardAdOptions,n=t.secondsFirstTime,i=t.secondsBetweenAds,a=Math.floor(e-this.lastRewardAdShownTime);return this.lastRewardAdShownTime>0?a>=i:a>=n},i.getEnabledBannerAds=function(){if(!this.isHaveBannerAdOptions)return[];for(var e,t=[],n=Y(this.bannerAdConfigs);!(e=n()).done;){var i=e.value,a=i.config;i.canShow&&t.push(a)}return t},i.disableBannerAds=function(){this.config.bannerAdOptions=[]},i.showBannerAdAsync=function(){var e=(0,s.Z)(h().mark((function e(){var t;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.enabled){e.next=2;break}return e.abrupt("return");case 2:if(!this.isBannerAdsShown){e.next=5;break}return e.next=5,this.hideBannerAdAsync();case 5:if(0!==(t=this.getEnabledBannerAds()).length){e.next=8;break}return e.abrupt("return");case 8:return this.reloadBannerAdIntervals=this.reloadBannerAdIntervals||{},this.loadBannerAdAsync("",t),e.abrupt("return");case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),i.loadBannerAdAsync=function(){var e=(0,s.Z)(h().mark((function e(t,n){var i,a,r=this;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.enabled){e.next=2;break}return e.abrupt("return");case 2:if(i=this.getSceneName(),a=GameCore.Configs.Ads,e.prev=4,"msgames"===a.AdService){e.next=7;break}throw new Z("BANNER_ADS_NOT_SUPPORTED","Banner ads not supported");case 7:if(!a.Mockup.Enable){e.next=12;break}return e.next=10,_.loadBannerAdAsync();case 10:e.next=14;break;case 12:return e.next=14,GameSDK.loadBannerAdAsync(t,n);case 14:this.isBannerAdsShown=!0,n.forEach((function(e){var t=e.placementId,n=e.position,s=e.bannerWidth,o=e.bannerHeight;if(t&&""!==t){var c=n+":"+s+"x"+o;r.showingBannerAd[t]=!0,window.game.analytics.showBannerAd(c,i,a.AdService)}})),e.next=23;break;case 18:e.prev=18,e.t0=e.catch(4),this.isBannerAdsShown=!1,n.forEach((function(e){var t=e.position+":"+e.bannerWidth+"x"+e.bannerHeight,n={type:G.BANNER,placement:i,bannerPosition:t,adService:a.AdService};window.game.analytics.showAdFail(n)}));case 23:case"end":return e.stop()}}),e,this,[[4,18]])})));return function(t,n){return e.apply(this,arguments)}}(),i.hideBannerAdAsync=function(){var e=(0,s.Z)(h().mark((function e(){var t;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.enabled){e.next=2;break}return e.abrupt("return");case 2:if(this.isHaveBannerAdOptions){e.next=4;break}return e.abrupt("return");case 4:if(this.isBannerAdsShown=!1,e.prev=5,"msgames"===(t=GameCore.Configs.Ads).AdService){e.next=9;break}throw new Z("BANNER_ADS_NOT_SUPPORTED","Banner ads not supported");case 9:if(!t.Mockup.Enable){e.next=14;break}return e.next=12,_.hideBannerAdAsync();case 12:e.next=16;break;case 14:return e.next=16,GameSDK.hideBannerAdAsync();case 16:e.next=21;break;case 18:e.prev=18,e.t0=e.catch(5);case 21:case"end":return e.stop()}}),e,this,[[5,18]])})));return function(){return e.apply(this,arguments)}}(),i.getBannerHeight=function(){if(!this.enabled)return 0;if(!this.isBannerAdsShown)return 0;var e=this.getBottomBannerConfig();if(!e)return 0;var t=e.bannerHeight,n=(void 0===t?0:t)+this.safeAreaBottom+20;if(this.game.world){var i=this.game.world,a=i.getPixelRatio(),r=i.getZoomRatio();return this.game.world.getPhysicPixels(n,a/r)}return n},i.getBottomBannerConfig=function(){var e=this.getEnabledBannerAds();return 0===e.length?null:k()(e).call(e,(function(e){return"bottom"===e.position}))||null},i.getSceneName=function(){try{var e=self.game.globalScene;return this.globalSceneTypeCheck(e)?e.getCurrentScene().scene.getSceneName():"unknown"}catch(t){return"unknown"}},i.globalSceneTypeCheck=function(e){return"getCurrentScene"in e&&"function"===typeof e.getCurrentScene},i.initFallbackAdsService=function(){var e=(0,s.Z)(h().mark((function e(){var t,n;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=GameCore.Configs.Ads,!this.isFallbackInitialized){e.next=3;break}return e.abrupt("return");case 3:return this.isFallbackInitialized=!0,e.next=6,this.getFallbackAdServiceInstance();case 6:n=e.sent,"none"!==t.FallbackService&&null!==n&&(this.isFallbackReady=!0,this.setFallbackAdInstance(n));case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),i.getFallbackAdServiceInstance=function(){var e=(0,s.Z)(h().mark((function e(){var t,i,a;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=GameCore.Configs.Ads.FallbackService,e.next=3,Promise.resolve().then(n.bind(n,588));case 3:if(i=e.sent.default,"google"!==t){e.next=16;break}return e.prev=5,e.next=8,this.initGoogleAdInstanceAsync();case 8:if(null===(a=e.sent)){e.next=11;break}return e.abrupt("return",a);case 11:e.next=16;break;case 13:e.prev=13,e.t0=e.catch(5);case 16:return e.abrupt("return",i);case 17:case"end":return e.stop()}}),e,this,[[5,13]])})));return function(){return e.apply(this,arguments)}}(),i.initGoogleAdInstanceAsync=function(){var e=(0,s.Z)(h().mark((function e(){var t,i,a,r,s,o,c,l,u;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=GameCore.Configs.Ads.AdServiceConfigs.Google){e.next=3;break}return e.abrupt("return",null);case 3:return i=t.DataAdChannel,a=t.DataAdClient,r=t.DataAdHost,s=t.DataAdBreakTest,o=t.DataAdFrequencyHint,c=t.MaxScriptLoadRetryCount,e.next=6,Promise.resolve().then(n.bind(n,589));case 6:if("loaded"!==(l=e.sent.default).initStatus){e.next=9;break}return e.abrupt("return",l);case 9:return u={dataAdClient:a,dataAdChannel:i,dataAdHost:r,dataAdBreakTest:s,dataAdFrequencyHint:o,maxScriptLoadRetryCount:c},e.prev=10,l.setGame(this.game),e.next=14,l.initGoogleAdsAsync(u);case 14:return e.abrupt("return",l);case 17:return e.prev=17,e.t0=e.catch(10),e.abrupt("return",null);case 21:case"end":return e.stop()}}),e,this,[[10,17]])})));return function(){return e.apply(this,arguments)}}(),i.isUserCancelledAdError=function(e){if(e instanceof Z&&"USER_INPUT"===e.code)return!0;try{var t=JSON.parse(R()(e));return"code"in t&&"USER_INPUT"===t.code}catch(e){return!1}},i.isAdFallbackReadyToShow=function(e){if(!this.isFallbackReady)return!1;var t=this.getAdInstanceByType(e,!0);return!!t&&t.getStatus()===L.FILLED},t}(Phaser.Plugins.BasePlugin),W=z,V=function(){function e(e,t,n){this.name=void 0,this.color=void 0,this.selfLog=void 0,this.options=void 0,this.name=e,this.color=n||"#FFF",this.options=t,this.selfLog=!0}var t=e.prototype;return t.event=function(e,t,n){this.processEvent(e,t,n),this.selfLog},t.pageview=function(e){var t=this.getPageByKey(e);this.processPageView(t),this.selfLog},t.levelStart=function(e,t,n){this.processLevelStart(e,t,n),this.selfLog},t.levelFail=function(e,t,n){this.processLevelFail(e,t,n),this.selfLog},t.levelRescue=function(e,t,n){this.processLevelRescue(e,t,n),this.selfLog},t.levelComplete=function(e,t,n){this.processLevelComplete(e,t,n),this.selfLog},t.loadPreRollAd=function(e,t){this.processLoadPreRollAd(e,t),this.selfLog},t.showPreRollAd=function(e,t){this.processShowPreRollAd(e,t),this.selfLog},t.loadInterstitialAd=function(e,t){this.processLoadInterstitialAd(e,t),this.selfLog},t.showInterstitialAd=function(e,t){this.processShowInterstitialAd(e,t),this.selfLog},t.loadRewardedVideoAd=function(e,t){this.processLoadRewardedVideoAd(e,t),this.selfLog},t.showRewardedVideoAd=function(e,t){this.processShowRewardedVideoAd(e,t),this.selfLog},t.showBannerAd=function(e,t,n){this.processShowBannerAd(e,t,n),this.selfLog},t.receiveReward=function(e){this.processReceiveReward(e),this.selfLog},t.loadAdFail=function(e){this.processLoadAdFail(e),this.selfLog},t.showAdFail=function(e){this.processShowAdFail(e),this.selfLog},t.getPageByKey=function(e){var t=e.replace(/_/g,"-");return t=t.toLowerCase()},t.processLevelStart=function(e,t,n){},t.processLevelFail=function(e,t,n){},t.processLevelRescue=function(e,t,n){},t.processLevelComplete=function(e,t,n){},t.processLoadInterstitialAd=function(e,t){},t.processShowInterstitialAd=function(e,t){},t.processLoadPreRollAd=function(e,t){},t.processShowPreRollAd=function(e,t){},t.processLoadRewardedVideoAd=function(e,t){},t.processShowRewardedVideoAd=function(e,t){},t.processShowBannerAd=function(e,t,n){},t.processReceiveReward=function(e){},t.processLoadAdFail=function(e){},t.processShowAdFail=function(e){},e}();GameCore.Analytics={BaseAnalytics:V};var K=function(e){function t(){for(var t,n,i=arguments.length,a=new Array(i),r=0;r<i;r++)a[r]=arguments[r];return(n=e.call.apply(e,P()(t=[this]).call(t,a))||this).analytics=void 0,n.pageview=function(e){n.isActive()&&n.analytics.forEach((function(t){t.pageview(e)}))},n}(0,o.Z)(t,e);var n=t.prototype;return n.init=function(){this.analytics=[]},n.add=function(e){this.analytics.push(e)},n.event=function(e,t,n){this.isActive()&&this.analytics.forEach((function(i){i.event(e,t,n)}))},n.levelStart=function(e,t,n){this.isActive()&&this.analytics.forEach((function(i){i.levelStart(e,t,n)}))},n.levelRescue=function(e,t,n){this.isActive()&&this.analytics.forEach((function(i){i.levelRescue(e,t,n)}))},n.levelFail=function(e,t,n){this.isActive()&&this.analytics.forEach((function(i){i.levelFail(e,t,n)}))},n.levelComplete=function(e,t,n){this.isActive()&&this.analytics.forEach((function(i){i.levelComplete(e,t,n)}))},n.loadPreRollAd=function(e,t){this.isActive()&&this.analytics.forEach((function(n){n.loadPreRollAd(e,t)}))},n.showPreRollAd=function(e,t){this.isActive()&&this.analytics.forEach((function(n){n.showPreRollAd(e,t)}))},n.loadInterstitialAd=function(e,t){this.isActive()&&this.analytics.forEach((function(n){n.loadInterstitialAd(e,t)}))},n.showInterstitialAd=function(e,t){this.isActive()&&this.analytics.forEach((function(n){n.showInterstitialAd(e,t)}))},n.loadRewardedVideoAd=function(e,t){this.isActive()&&this.analytics.forEach((function(n){n.loadRewardedVideoAd(e,t)}))},n.showRewardedVideoAd=function(e,t){this.isActive()&&this.analytics.forEach((function(n){n.showRewardedVideoAd(e,t)}))},n.showBannerAd=function(e,t,n){this.isActive()&&this.analytics.forEach((function(i){i.showBannerAd(e,t,n)}))},n.receiveReward=function(e){this.isActive()&&this.analytics.forEach((function(t){t.receiveReward(e)}))},n.loadAdFail=function(e){this.isActive()&&this.analytics.forEach((function(t){t.loadAdFail(e)}))},n.showAdFail=function(e){this.isActive()&&this.analytics.forEach((function(t){t.showAdFail(e)}))},n.isActive=function(){return this.analytics.length>=1},t}(Phaser.Plugins.BasePlugin),j=K,X=function(){function e(e,t){var n=this;this.name=void 0,this.game=void 0,this.audio=void 0,this.volume=void 0,this.isMusicEnabled=function(){return!!n.game.player.getPlayerSetting("music")},this.isSoundEnabled=function(){return!!n.game.player.getPlayerSetting("sound")},this.name=t,this.game=e,this.audio=this.game.sound.add(this.name)}var t=e.prototype;return t.play=function(e,t){var n,i,a=(0,r.Z)({volume:this.volume},t||{});a.volume!==this.volume&&(a.volume*=this.volume),(null==(n=this.audio)?void 0:n.seek)>0?this.audio.resume():null==(i=this.audio)||i.play(e,a)},t.pause=function(e){var t;null==(t=this.audio)||t.pause()},t.stop=function(e){var t;null==(t=this.audio)||t.stop()},t.setVolume=function(e){this.volume=e},e}(),q=n(101),J=n.n(q),Q=function(){function e(e){var t=this;this.game=void 0,this.audio=void 0,this.markers=void 0,this.volume=void 0,this.isMusicEnabled=function(){return!!t.game.player.getPlayerSetting("music")},this.isSoundEnabled=function(){return!!t.game.player.getPlayerSetting("sound")},this.game=e,this.markers={}}var t=e.prototype;return t.play=function(e,t){var n,i=(0,r.Z)({volume:this.volume},t||{});i.volume!==this.volume&&(i.volume*=this.volume),this.createMaker(e),null==(n=this.markers[e])||n.play()},t.pause=function(e){var t;null==(t=this.markers[e])||t.pause()},t.stop=function(e){var t;null==(t=this.markers[e])||t.stop()},t.setVolume=function(e){this.volume=e},t.stopAllSounds=function(){var e=this;J()(this.markers).forEach((function(t){var n;null==(n=e.markers[t])||n.stop()}))},t.createMaker=function(e){if(!this.markers[e])try{this.markers[e]=this.game.sound.add(e)}catch(t){}},e}(),$=function(e){function t(){for(var t,n,i=arguments.length,a=new Array(i),r=0;r<i;r++)a[r]=arguments[r];return(n=e.call.apply(e,P()(t=[this]).call(t,a))||this).soundManager=void 0,n.musicManager=void 0,n.isMuteAll=void 0,n.initMusic=function(e){n.musicManager=new X(n.game,e),n.setMusicVolume(1)},n.initSound=function(){n.soundManager=new Q(n.game),n.setSoundVolume(1)},n}(0,o.Z)(t,e);var n=t.prototype;return n.init=function(t){e.prototype.init.call(this,t),this.initSound()},n.playSound=function(e,t){try{if(!this.soundManager||this.isMuteAll||!this.game.visibility.isGameVisible())return;if(!this.soundManager.isSoundEnabled())return;this.soundManager.play(e,t)}catch(n){}},n.stopSound=function(e){try{this.soundManager.stop(e)}catch(t){}},n.stopAllSounds=function(){try{this.soundManager.stopAllSounds()}catch(e){}},n.playMusic=function(e){void 0===e&&(e={});try{if(!this.musicManager||this.isMuteAll||!this.game.visibility.isGameVisible())return;if(!this.musicManager.isMusicEnabled())return;this.musicManager.play("",(0,r.Z)({loop:!0,volume:.2},e))}catch(t){}},n.pauseMusic=function(){try{if(!this.musicManager)return;this.musicManager.pause("")}catch(e){}},n.stopMusic=function(){try{if(!this.musicManager)return;this.musicManager.stop("")}catch(e){}},n.setSoundVolume=function(e){try{if(!this.soundManager)return;this.soundManager.setVolume(e)}catch(t){}},n.setMusicVolume=function(e){try{if(!this.musicManager)return;this.musicManager.setVolume(e)}catch(t){}},n.muteAll=function(){this.isMuteAll=!0,this.game.sound.mute=!0},n.unmuteAll=function(){this.isMuteAll=!1,this.game.sound.mute=!1},t}(Phaser.Plugins.BasePlugin),ee=$,te=n(99),ne="AUTH_TOKEN_REQUEST",ie="AUTH_TOKEN_RECEIVED",ae=function(e){function t(t,n){var i;return(i=e.call(this,t)||this).payload=void 0,i.name="RequestTokenFail",i.message=t||"Request token fail",i.payload=n||{},i}return(0,o.Z)(t,e),t}((0,F.Z)(Error)),re=n(426),se="auth",oe=(0,re.P1)([function(e){return e[se].token}],(function(e){return e})),ce=(0,re.P1)([function(e){return e[se].isRequesting}],(function(e){return e})),le=function(e){return{type:ie,payload:{token:e}}},ue=function(e){function t(){return e.apply(this,arguments)||this}(0,o.Z)(t,e);var n=t.prototype;return n.requestToken=function(){var e=(0,s.Z)(h().mark((function e(){var t;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.game.storage,e.next=3,t.dispatch(function(){var e=(0,s.Z)(h().mark((function e(t,n){var a,r,s,o;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,a=window.game.facebook,r=n(),s=oe(r),!ce(r)&&""===s){e.next=7;break}return e.abrupt("return");case 7:return t({type:ne,payload:{}}),e.next=10,a.getPlayerToken();case 10:o=e.sent,t(le(o)),e.next=25;break;case 14:if(e.prev=14,e.t0=e.catch(0),!(e.t0 instanceof Object&&GameCore.Utils.Object.hasOwn(e.t0,"code"))){e.next=19;break}if("PENDING_REQUEST"!==e.t0.code){e.next=19;break}return e.abrupt("return");case 19:if(t(le("")),!(e.t0 instanceof Object&&GameCore.Utils.Object.hasOwn(e.t0,"message"))){e.next=24;break}if("string"!==typeof e.t0.message){e.next=24;break}return(0,i.tO)(new Error(e.t0.message||"Request token fail")),e.abrupt("return");case 24:(0,i.tO)(new ae);case 25:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(t,n){return e.apply(this,arguments)}}());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.getToken=function(){return oe(this.state)},(0,te.Z)(t,[{key:"state",get:function(){return this.game.storage.getState()}}]),t}(Phaser.Plugins.BasePlugin),he=ue,de=function(e,t){void 0===t&&(t=1);var n=new Image;n.onload=function(){var e,n;e=this.width*t,n=this.height*t,Math.floor(n/2),Math.floor(e/2)},n.src=e},pe=function(e){function t(){for(var t,n,i=arguments.length,a=new Array(i),r=0;r<i;r++)a[r]=arguments[r];return(n=e.call.apply(e,P()(t=[this]).call(t,a))||this).width=void 0,n.height=void 0,n.renderOptions=void 0,n.canvas=void 0,n}(0,o.Z)(t,e);var n=t.prototype;return n.preload=function(e){var t=this,n=J()(e);n.length<1||(n.forEach((function(n){t.scene.load.image(n,e[n])})),this.scene.load.start())},n.capture=function(){var e=(0,s.Z)(h().mark((function e(t){var n,i,a;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.width,i=t.height,a=t.renderOptions,this.width=n,this.height=i,this.renderOptions=a,this.createCanvas(),e.next=7,this.loadImages();case 7:return this.drawObjects(),e.abrupt("return",this.snapshotFrame());case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.createCanvas=function(){this.canvas||(this.canvas=this.game.textures.createCanvas("FrameCaptureCanvas")),this.canvas.clear(),this.canvas.setSize(this.width,this.height)},n.loadImages=function(){var e=[];for(var t in this.renderOptions){var n=this.renderOptions[t],i=n.name,a=n.image,r=n.fallbackWithImage;if(a)if(this.scene.textures.get(i).key!==i&&""!==i){var s=this.loadImage(i,a,r);e.push(s)}}return this.scene.load.start(),l().all(e)},n.loadImage=function(e,t,n){var i=this;return this.scene.load.image(e,t),new(l())((function(t,a){var r=Phaser.Loader.Events.FILE_KEY_COMPLETE+"image-"+e,s=Phaser.Loader.Events.FILE_LOAD_ERROR,o=function e(n){i.scene.load.off(r,e),i.scene.load.off(s,c),t()},c=function c(l){if(l.key===e)if(i.scene.load.off(r,o),i.scene.load.off(s,c),n)t();else{var u=new Error("Load image failed");a(u)}};i.scene.load.on(r,o),i.scene.load.on(s,c)}))},n.drawObjects=function(){for(var e in this.renderOptions){var t=this.renderOptions[e];switch(t.type){case"text":this.drawText(t);break;case"image":this.drawImage(t)}}},n.drawText=function(e){var t=this.canvas.context,n=e.x,i=e.y,a=e.font,r=e.text,s=e.fillStyle,o=e.lineWidth,c=e.textAlign;t.font=a+' nunito,-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Oxygen,Ubuntu,Cantarell,"Fira Sans","Droid Sans","Helvetica Neue",sans-serif',t.fillStyle=s||"#ffffff",o&&(t.lineWidth=o),c&&(t.textAlign=c),t.fillText(r,n,i)},n.drawImage=function(e){var t=this.canvas.context,n=e.x,i=e.y,a=e.name,r=e.frame,s=e.width,o=e.height,c=e.fallbackWithImage,l=this.scene.textures.get(a),u=l.getSourceImage(r);"__MISSING"===l.key&&c&&(u=(l=this.scene.textures.get(c)).getSourceImage()),t.drawImage(u,n,i,s,o)},n.snapshotFrame=function(){var e=this.canvas.getCanvas().toDataURL("image/jpeg",.85);return GameCore.Utils.Valid.isDebugger()&&de(e),e},t}(Phaser.Plugins.ScenePlugin),fe=pe,ge=n(54),me=n.n(ge),ve=function(e){function t(t,n,i){var a;return(a=e.call(this)||this).game=void 0,a.options=void 0,a.performance=void 0,a.isRunning=!1,a.checkTimer=void 0,a.fpsHistory=void 0,a.start=function(){if(!a.isRunning){a.isRunning=!0;var e=a.options.checkInterval;a.checkTimer=e,a.fpsHistory=[],a.game.events.on(Phaser.Core.Events.POST_STEP,a.onPostStep)}},a.stop=function(){a.isRunning&&(a.isRunning=!1,a.game.events.off(Phaser.Core.Events.POST_STEP,a.onPostStep),a.options.onlyUpdateWhenSwitchScene&&a.checkFps())},a.onPostStep=function(e,t){if(a.checkTimer-=t,!(a.checkTimer>0)){var n=a.options,i=n.checkInterval,r=n.onlyUpdateWhenSwitchScene;a.checkTimer+=i,a.fpsHistory.push(a.game.loop.actualFps),!1===r&&a.fpsHistory.length>=5&&a.checkFps()}},a.game=t,a.options=i,a.performance=n,a}(0,o.Z)(t,e);var n=t.prototype;return n.checkFps=function(){if(0!==this.fpsHistory.length){var e=this.options.autoUpgradeQuality,t=!1;this.isLowFps()?t=this.performance.downgradeGraphicsQuality():e&&this.isHighFps()&&(t=this.performance.upgradeGraphicsQuality()),t&&(this.fpsHistory=[])}},n.getFpsMedian=function(){return Phaser.Math.Median(this.fpsHistory)},n.isLowFps=function(){return this.getFpsMedian()<this.options.fpsThreshold},n.isHighFps=function(){return this.getFpsMedian()>1.2*this.options.fpsThreshold},t}(Phaser.Events.EventEmitter),ye=ve,Ee=["pixelRatio","minQuality","maxQuality","qualityAdjustStep","trackingSceneKeys"],Ae=function(e){function t(){for(var t,n,i=arguments.length,a=new Array(i),r=0;r<i;r++)a[r]=arguments[r];return(n=e.call.apply(e,P()(t=[this]).call(t,a))||this).fpsTracker=void 0,n.pixelRatio=void 0,n.minQuality=void 0,n.maxQuality=void 0,n.qualityAdjustStep=void 0,n.trackingSceneKeys=[],n.trackingScene=function(e){var t;if(me()(t=n.trackingSceneKeys).call(t,e)){var i=n.game.scene.getScene(e);i.events.once(Phaser.Scenes.Events.UPDATE,n.fpsTracker.start),i.events.once(Phaser.Scenes.Events.SLEEP,n.fpsTracker.stop)}},n}(0,o.Z)(t,e);var n=t.prototype;return n.configure=function(e){var t=e.pixelRatio,n=e.minQuality,i=e.maxQuality,r=e.qualityAdjustStep,s=e.trackingSceneKeys,o=(0,a.Z)(e,Ee);this.pixelRatio=t,this.minQuality=n,this.maxQuality=i,this.qualityAdjustStep=r,this.trackingSceneKeys=s,this.fpsTracker=new ye(this.game,this,o)},n.active=function(){this.game.events.on(Phaser.Scenes.Events.WAKE,this.trackingScene),this.game.events.on(Phaser.Scenes.Events.START,this.trackingScene)},n.downgradeGraphicsQuality=function(){var e=this.pixelRatio;if(e<=this.minQuality)return!1;var t=+(e-this.qualityAdjustStep).toFixed(2);return!(t<this.minQuality)&&(this.pixelRatio=t,this.game.world.resize(this.pixelRatio),!0)},n.upgradeGraphicsQuality=function(){var e=this.pixelRatio;if(e>=this.maxQuality)return!1;var t=+(e+this.qualityAdjustStep).toFixed(2);return!(t>this.maxQuality)&&(this.pixelRatio=t,this.game.world.resize(this.pixelRatio),!0)},t}(Phaser.Plugins.BasePlugin),Se=Ae,be={sound:!0,music:!0,vibrate:!0,language:"en",theme:GameCore.Configs.DefaultTheme},Te=n(128),we=n.n(Te),Ce=n(86),Ie=n.n(Ce),Pe=be.sound,xe=be.music,ke=be.vibrate,Oe=be.language,Re=be.theme,Be=function(){function e(e){this.sound=void 0,this.music=void 0,this.vibrate=void 0,this.language=void 0,this.theme=void 0;var t=e||{},n=t.sound,i=t.music,a=t.vibrate,r=t.language,s=t.theme;this.sound=GameCore.Utils.Valid.isBoolean(n)?n:Pe,this.music=GameCore.Utils.Valid.isBoolean(i)?i:xe,this.vibrate=GameCore.Utils.Valid.isBoolean(a)?a:ke,this.language=GameCore.Utils.Valid.isString(r)?r:Oe,this.theme=GameCore.Utils.Valid.isString(s)?s:Re}return e.prototype.toObject=function(){return{sound:this.sound,music:this.music,vibrate:this.vibrate,language:this.language,theme:this.theme}},e}(),_e=Be,De=GameCore.Utils,Ne=De.Valid,Le=De.Object,Me=function(){function e(e){this.score=void 0,this.settings=void 0,this.gameData=void 0,this.userGuideDisplays=void 0,this.setupDefaultData(),this.updateScore(e),this.updateSettings(e),this.updateGameData(e),this.updateUserGuideDisplays(e)}var t=e.prototype;return t.setupDefaultData=function(){this.score=0,this.settings=(0,r.Z)({},be),this.gameData={coin:0,diamond:0,lastReceiveGift:0,dailyRewarded:{lastRewarded:0,logDays:[]},dailyTasks:{startedTime:0,logTasks:{}}},this.userGuideDisplays=0},t.updateScore=function(e){var t=e.score;!1!==Ne.isNumber(t)&&(this.score=t)},t.updateSettings=function(e){var t=e.settings;if(!1!==Ne.isObject(t)){var n=new _e(t).toObject();this.settings=n}},t.updateGameData=function(e){var t=e.gameData;if(!1!==Ne.isObject(t)){if(Le.hasOwn(t,"coin")&&Ne.isNumber(t.coin)&&(this.gameData.coin=t.coin),Le.hasOwn(t,"diamond")&&Ne.isNumber(t.diamond)&&(this.gameData.diamond=t.diamond),Le.hasOwn(t,"lastReceiveGift")&&Ne.isNumber(t.lastReceiveGift)&&(this.gameData.lastReceiveGift=t.lastReceiveGift),Le.hasOwn(t,"dailyRewarded")&&Ne.isObject(t.dailyRewarded)){var n=t.dailyRewarded;Le.hasOwn(n,"lastRewarded")&&Ne.isNumber(n.lastRewarded)&&(this.gameData.dailyRewarded.lastRewarded=n.lastRewarded),Le.hasOwn(n,"logDays")&&Array.isArray(n.logDays)&&(this.gameData.dailyRewarded.logDays=n.logDays)}if(Le.hasOwn(t,"dailyTasks")&&Ne.isObject(t.dailyTasks)){var i=t.dailyTasks;Le.hasOwn(i,"startedTime")&&Ne.isNumber(i.startedTime)&&(this.gameData.dailyTasks.startedTime=i.startedTime),Le.hasOwn(i,"logTasks")&&Ne.isObject(i.logTasks)&&(this.gameData.dailyTasks.logTasks=i.logTasks)}}},t.updateUserGuideDisplays=function(e){var t=e.userGuideDisplays;!1!==Ne.isNumber(t)&&(this.userGuideDisplays=t)},t.toObject=function(){return{score:this.score,settings:this.settings,gameData:this.gameData,userGuideDisplays:this.userGuideDisplays}},t.convertToPlayerData=function(){var e=this.gameData,t=e.coin,n=e.diamond,i=e.dailyTasks,a=e.dailyRewarded,r=e.lastReceiveGift;return{score:this.score,settings:this.settings,customFields:{coin:t,diamond:n,dailyTasks:i,dailyRewarded:a,lastReceiveGift:r},userGuideDisplays:this.userGuideDisplays}},t.convertToFacebookData=function(e){var t=e.score,n=e.settings,i=e.customFields,a=e.userGuideDisplays;return this.updateScore({score:t}),this.updateSettings({settings:n}),this.updateGameData({gameData:i}),this.updateUserGuideDisplays({userGuideDisplays:a}),this.toObject()},e}(),Ge=n(427),Fe=GameCore.Configs.ApiHost,Ze=function(){var e=(0,s.Z)(h().mark((function e(t){var n;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,Ge.v)("players?platform=ms-games",t,{},Fe,10);case 2:return n=e.sent,e.abrupt("return",(null==n?void 0:n.data)||{});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ue=function(){var e=(0,s.Z)(h().mark((function e(t){var n;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,Ge.v)("players/"+t+"/user-guide-displays/inc",{},{},Fe);case 2:return n=e.sent,e.abrupt("return",(null==n?void 0:n.data)||{});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ye="PLAYER_RECEIVED",He="PLAYER_DATA_UPDATE",ze="PLAYER_SCORE_UPDATE",We="PLAYER_PROFILE_UPDATE",Ve="PLAYER_SETTING_UPDATE",Ke="PLAYER_CONNECTED_PLAYERS_UPDATE",je=n(420),Xe=function(e){function t(t,n){var i;return(i=e.call(this,t)||this).payload=void 0,i.name="PlayerDataNameNotSupport",i.message=t||"The name of player data is not supported",i.payload=n||{},i}return(0,o.Z)(t,e),t}((0,F.Z)(Error)),qe="player",Je=(0,re.P1)([function(e){return e[qe]}],(function(e){return e})),Qe=(0,re.P1)([Je],(function(e){return e.playerId})),$e=(0,re.P1)([Je],(function(e){return e.ASID})),et=(0,re.P1)([function(e){return e[qe].data}],(function(e){return e})),tt=((0,re.P1)([et],(function(e){return e.settings})),(0,re.P1)([function(e){return e[qe].connectedPlayers}],(function(e){return e}))),nt=(0,re.P1)([function(e){return e[qe].isConnectedPlayersLoaded}],(function(e){return e})),it=(0,re.P1)([tt,function(e,t){return t.limit},function(e,t){return t.offset}],(function(e,t,n){if("number"!==typeof t)return[];if("number"!==typeof n)return[];var i=J()(e);return E()(i).call(i,n,t+n)||[]})),at=(0,re.P1)([et],(function(e){return e.score})),rt=(0,re.P1)([et],(function(e){return e.customFields})),st=GameCore.Configs,ot=st.AppId,ct=st.Tutorial,lt=function(e,t){return function(n){var i=e.playerId,a=e.name,r=e.photo,s=e.locale;n({type:Ye,payload:{playerId:i,name:a,photo:r,locale:s,data:t||{}}})}},ut=function(e){return{type:Ke,payload:{connectedPlayers:e}}},ht=function(e,t){return function(){var n=(0,s.Z)(h().mark((function n(a,r){var s,o,c;return h().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,a({type:Ve,payload:{name:e,value:t}});case 3:s=r(),o=et(s),c=new Me({}).convertToFacebookData(o),FBInstant.player.setDataAsync(c),n.next=12;break;case 9:n.prev=9,n.t0=n.catch(0),(0,i.tO)(n.t0);case 12:case"end":return n.stop()}}),n,null,[[0,9]])})));return function(e,t){return n.apply(this,arguments)}}()},dt=function(e,t){return function(){var n=(0,s.Z)(h().mark((function n(a,r){var s,o,c,l,u;return h().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,o={customFields:(s={},s[e]=t,s)},n.next=4,a(ft(o));case 4:c=r(),l=et(c),u=new Me({}).convertToFacebookData(l),FBInstant.player.setDataAsync(u),n.next=15;break;case 10:if(n.prev=10,n.t0=n.catch(0),!(n.t0 instanceof Xe)){n.next=14;break}return n.abrupt("return");case 14:(0,i.tO)(n.t0);case 15:case"end":return n.stop()}}),n,null,[[0,10]])})));return function(e,t){return n.apply(this,arguments)}}()},pt=function(e){return function(){var t=(0,s.Z)(h().mark((function t(n,a){var r,s,o,c;return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,r={customFields:e},t.next=4,n(ft(r));case 4:s=a(),o=et(s),c=new Me({}).convertToFacebookData(o),FBInstant.player.setDataAsync(c),t.next=16;break;case 10:if(t.prev=10,t.t0=t.catch(0),!(t.t0 instanceof Xe)){t.next=15;break}return t.abrupt("return");case 15:(0,i.tO)(t.t0);case 16:case"end":return t.stop()}}),t,null,[[0,10]])})));return function(e,n){return t.apply(this,arguments)}}()},ft=function(e){return{type:He,payload:{data:e}}},gt=function(e){return function(){var t=(0,s.Z)(h().mark((function t(n,a){var r,s,o;return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,n({type:ze,payload:{score:e}});case 3:Ze({score:e}),r=a(),s=et(r),o=new Me({}).convertToFacebookData(s),FBInstant.player.setDataAsync(o),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(0),(0,i.tO)(t.t0);case 13:case"end":return t.stop()}}),t,null,[[0,10]])})));return function(e,n){return t.apply(this,arguments)}}()},mt=function(e){function t(){return e.apply(this,arguments)||this}(0,o.Z)(t,e);var n=t.prototype;return n.incUserGuideDisplays=function(){var e=(0,s.Z)(h().mark((function e(){var t;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.game.storage,e.next=3,t.dispatch(function(){var e=(0,s.Z)(h().mark((function e(t,n){var a,r,s,o;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!ct.ForceUseTutorial){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,t(ft({userGuideDisplays:1}));case 5:a=n(),r=Qe(a),s=et(a),o=new Me({}).convertToFacebookData(s),FBInstant.player.setDataAsync(o),Ue(r),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),(0,i.tO)(e.t0);case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t,n){return e.apply(this,arguments)}}());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.receiveData=function(){var e=(0,s.Z)(h().mark((function e(t,n){var i;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=this.game.storage,e.next=3,i.dispatch(lt(t,n));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}(),n.updateData=function(){var e=(0,s.Z)(h().mark((function e(){var t;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.game.storage,e.next=3,t.dispatch(function(){var e=(0,s.Z)(h().mark((function e(t,n){var a,r,s,o,c,l,u,d;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a=n(),r=Je(a),s=r.playerId,o=r.name,c=r.photo,l=r.locale,e.next=6,FBInstant.player.getASIDAsync();case 6:return u=e.sent,d={appId:ot,playerId:s,name:o,photo:c,locale:l,ASID:u},e.next=10,t({type:We,payload:{profile:d}});case 10:return e.next=12,Ze(d);case 12:e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),(0,i.tO)(e.t0);case 17:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(t,n){return e.apply(this,arguments)}}());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.setBestScore=function(){var e=(0,s.Z)(h().mark((function e(t){var n;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.game.storage,e.next=3,n.dispatch(gt(t));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.setSetting=function(){var e=(0,s.Z)(h().mark((function e(t,n){var i;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=this.game.storage,e.next=3,i.dispatch(ht(t,n));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}(),n.setCustomData=function(){var e=(0,s.Z)(h().mark((function e(t,n){var i;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=this.game.storage,e.next=3,i.dispatch(dt(t,n));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}(),n.setMultiCustomData=function(){var e=(0,s.Z)(h().mark((function e(t){var n;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.game.storage,e.next=3,n.dispatch(pt(t));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.requestConnectedPlayers=function(){var e=(0,s.Z)(h().mark((function e(){var t;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.game.storage,e.next=3,t.dispatch(function(){var e=(0,s.Z)(h().mark((function e(t){var n,a,r,s;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,FBInstant.player.getConnectedPlayersAsync();case 3:if(a=e.sent,r=function(e){return!!e},s=we()(n=Ie()(a).call(a,(function(e){var t=e.getID(),n=e.getName(),i=e.getPhoto();return t&&n&&i?new je.Z(t,n,i).toObject():null}))).call(n,r),!(s.length<1)){e.next=8;break}return e.abrupt("return");case 8:t(ut(s)),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),(0,i.tO)(e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t){return e.apply(this,arguments)}}());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.updateConnectedPlayers=function(){var e=(0,s.Z)(h().mark((function e(t){var n;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.game.storage,e.next=3,n.dispatch(ut(t));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.getPlayer=function(){return Je(this.state)},n.getPlayerId=function(){return this.getPlayer().playerId},n.getPlayerASID=function(){return $e(this.state)},n.getPlayerData=function(){return this.getPlayer().data},n.getPlayerSetting=function(e){var t=this.getPlayerSettings();return"string"!==typeof e?null:GameCore.Utils.Object.hasOwn(t,e)?t[e]:GameCore.Utils.Object.hasOwn(be,e)?be[e]:null},n.getPlayerSettings=function(){return this.getPlayerData().settings},n.getPlayerIsNew=function(){return this.getPlayer().isUserNew},n.getCoins=function(){var e=this.getCustomData("coin");return GameCore.Utils.Valid.isNumber(e)?e:0},n.getDiamond=function(){var e=this.getCustomData("diamond");return GameCore.Utils.Valid.isNumber(e)?e:0},n.getBestScore=function(){return at(this.state)},n.getCustomData=function(e){var t=rt(this.state);return GameCore.Utils.Valid.isObject(t)&&GameCore.Utils.Object.hasOwn(t,e)?t[e]:null},n.getConnectedPlayers=function(){return tt(this.state)},n.isConnectedPlayersLoaded=function(){return nt(this.state)},n.getConnectedPlayerIds=function(e,t){return it(this.state,{limit:e,offset:t})},(0,te.Z)(t,[{key:"state",get:function(){return this.game.storage.getState()}}]),t}(Phaser.Plugins.BasePlugin),vt=mt,yt=GameCore.Configs.ApiHost,Et=function(){var e=(0,s.Z)(h().mark((function e(t){var n,i;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=GameCore.Utils.String.params(t),e.next=3,(0,Ge.U)("players?"+n,{},yt);case 3:return i=e.sent,e.abrupt("return",(null==i?void 0:i.data)||[]);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),At="PROFILES_DATA_UPDATE",St="profile",bt=(0,re.P1)([function(e){return e[St].data}],(function(e){return e})),Tt=(0,re.P1)([function(e){return e[St].profileIds}],(function(e){return e})),wt=function(e){return function(){var t=(0,s.Z)(h().mark((function t(n,a){var r,s,o,c;return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,r=a(),s=Tt(r),!((o=GameCore.Utils.Array.difference(e,s)).length<1)){t.next=6;break}return t.abrupt("return");case 6:return t.next=8,Et({playerIds:o});case 8:c=t.sent,n({type:At,payload:{data:c}}),t.next=15;break;case 12:t.prev=12,t.t0=t.catch(0),(0,i.tO)(t.t0);case 15:case"end":return t.stop()}}),t,null,[[0,12]])})));return function(e,n){return t.apply(this,arguments)}}()},Ct=function(e){function t(){return e.apply(this,arguments)||this}(0,o.Z)(t,e);var n=t.prototype;return n.requestProfiles=function(){var e=(0,s.Z)(h().mark((function e(t){var n;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.game.storage,e.next=3,n.dispatch(wt(t));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.getProfiles=function(){return bt(this.state)},(0,te.Z)(t,[{key:"state",get:function(){return this.game.storage.getState()}}]),t}(Phaser.Plugins.BasePlugin),It=Ct,Pt=n(102),xt=n.n(Pt),kt=n(209),Ot=n.n(kt),Rt=["player","match"],Bt="177a437c34304642b9ed352cb0d998b8",_t=GameCore.Utils,Dt=_t.Valid,Nt=_t.Object,Lt=GameCore.Configs.Rollbar,Mt=Lt.UseMockup,Gt=Lt.FilterError,Ft=function(e){function t(){for(var t,n,i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return(n=e.call.apply(e,P()(t=[this]).call(t,r))||this).enable=void 0,n.rollbar=void 0,n.events=[],n.beforeSend=function(e,t,i){Mt&&n.showPopupError(i)},n.checkIgnore=function(e,t,i){try{return!!n.isErrorIgnore(t)}catch(a){return!1}},n.showPopupError=function(e){var t,i,a,r=null==e||null==(t=e.body)||null==(t=t.trace)?void 0:t.exception;r&&n.events.push(r);var s=(null==e||null==(i=e.body)||null==(i=i.trace)?void 0:i.frames)||[];(a=n.events).push.apply(a,s);var o=document.getElementById("popup-error");o||((o=document.createElement("div")).id="popup-error",document.body.appendChild(o)),o.innerHTML='<div style="color: #fff; display: flex; flex-flow: column; align-items: center; ">\n      <pre id="json" style="overflow: auto; background-color: rgb(195 112 97 / 80%); padding: 10px; max-height: 80vh; max-width: 90vw; border: 5px solid #545454;">'+R()(n.events,null,2)+'</pre>\n      <button id="close" style="cursor: pointer; padding: 10px 20px; border-radius: 100px;">Close</button>\n      </div>',o.style="top: 0px; z-index: 10000; width: 100vw; max-height: 100vh; position: absolute; display: flex; align-items: center; justify-content: center;";var c=document.getElementById("close");c&&(c.onclick=n.closePopup)},n.closePopup=function(){n.events=[{}];var e=document.getElementById("popup-error");null==e||e.remove()},n.isNoneErrorEvent=function(e){if(!e||0===e.length)return!1;if(!e[0].message)return!1;return"Non-Error promise rejection captured with keys: code, message"===e[0].message},n.isErrorIgnore=function(e){if(!e||0===e.length)return!1;var t=!1,i=e[0];return i instanceof Object&&(t=n.isIgnoreByCode(i)||n.isIgnoreByMessage(i)),t},n.isIgnoreByCode=function(e){if(Nt.hasOwn(e,"code")){var t=e.code,n=Gt.Codes,i=n.accepted,a=n.ignored;if("string"===typeof t){if(xt()(i).call(i,t)>=0)return!1;if(xt()(a).call(a,t)>=0)return!0}}if(Nt.hasOwn(e,"name")){var r=e.name,s=Gt.Codes,o=s.accepted,c=s.ignored;if("string"===typeof r){if(xt()(o).call(o,r)>=0)return!1;if(xt()(c).call(c,r)>=0)return!0}}return!1},n.isIgnoreByMessage=function(e){if(Nt.hasOwn(e,"message")){var t=e.message,n=Gt.Messages,i=n.accepted,a=n.ignored;if("string"===typeof t){if(xt()(i).call(i,t)>=0)return!1;if(xt()(a).call(a,t)>=0)return!0}}return!1},n.addExtraState=function(){try{if(!Nt.hasOwn(window,"game"))return;if(!Nt.hasOwn(window.game,"storage"))return;if(!Nt.hasOwn(window.game.storage,"getState"))return;var e=(0,window.game.storage.getState)()||{},t=e.player,i=e.match,r=(0,a.Z)(e,Rt);n.rollbar.configure({payload:{player:t,match:i,other:r}})}catch(s){}},n}(0,o.Z)(t,e);var n=t.prototype;return n.setup=function(){this.rollbar=new(Ot())({accessToken:Bt,checkIgnore:this.checkIgnore,onSendCallback:this.beforeSend,captureUncaught:!0,scrubTelemetryInputs:!0,captureUnhandledRejections:!0,autoInstrument:{dom:!1,navigation:!1},payload:{environment:"production",client:{javascript:{code_version:"9"}},server:{root:"webpack:///./",branch:"master"}}}),this.enable=!0,this.sendTestException()},n.configure=function(e){this.rollbar&&this.rollbar.configure(e)},n.sendTestException=function(){if(!Dt.isDebugger()){var e=FBInstant.player.getID();e&&this.rollbar.debug(new Error("Test rollbar"),{playerID:e})}},n.sendException=function(e,t){e&&this.enable&&this.rollbar&&(this.addExtraState(),this.rollbar.error(e,t))},t}(Phaser.Plugins.BasePlugin),Zt=Ft,Ut=function(e){function t(){return e.apply(this,arguments)||this}return(0,o.Z)(t,e),t.prototype.emit=function(t,n){return e.prototype.emit.call(this,t,n)},t}(Phaser.Events.EventEmitter),Yt=Ut,Ht=n(84),zt=function(e){function t(t,n,i,a){var r;(r=e.call(this,t)||this).zone=void 0,r.background=void 0,r.setName(n),r.setVisible(!1);var s=r.scene.world.getWorldSize(),o=s.width,c=s.height;return r.setSize(i||o,a||c),r.addZone(),r.addBackground(),r}(0,o.Z)(t,e);var n=t.prototype;return n.open=function(e){GameCore.Utils.Valid.isObject(e)&&(this.setDataEnabled(),this.setData(e)),this.setBlockInputOutsideEnabled(!0),this.scene.screen.bringToTop(this.name),this.visible||(this.setVisible(!0),this.logPageviewOnOpen(),this.logEventOpen())},n.close=function(){this.setBlockInputOutsideEnabled(!1),this.visible&&(this.setVisible(!1),this.logPageviewOnClose())},n.incY=function(e){this.y+=e,this.background.y-=e},n.incX=function(e){this.x+=e,this.background.x-=e},n.incScale=function(e){this.scale+=e,this.background.scale-=e^e*(100/e)},n.setBlockInputOutsideEnabled=function(e){this.scene.input.setTopOnly(e)},n.addZone=function(){this.zone=this.scene.add.zone(0,0,this.width,this.height),this.zone.setInteractive({}),this.add(this.zone)},n.addBackground=function(){var e="screen-background";if(!this.scene.textures.exists(e)){var t=this.width+2,n=this.height+2,i=this.scene.add.graphics();i.fillStyle(0,1),i.fillRect(0,0,t,n),i.generateTexture(e,t,n),i.destroy()}this.background=this.scene.add.image(0,0,e),this.background.setDisplaySize(2*this.width,2*this.height),this.add(this.background)},n.logPageviewOnOpen=function(){this.scene.analytics.pageview(this.name)},n.logPageviewOnClose=function(){this.scene.analytics.pageview(this.scene.scene.key)},n.logEventOpen=function(){this.scene.analytics.event(Ht._.SCREEN_OPEN,{screen_name:this.getScreenName()})},n.getScreenName=function(){return GameCore.Utils.String.toUpperCamelCase(this.name.toLowerCase())},t}(Phaser.GameObjects.Container),Wt=zt,Vt={OPEN:"open",CLOSE:"close",CREATED:"created"};GameCore.Screen=Wt,GameCore.Screens={Events:Vt};var Kt=function(e){function t(){for(var t,n,i=arguments.length,a=new Array(i),r=0;r<i;r++)a[r]=arguments[r];return(n=e.call.apply(e,P()(t=[this]).call(t,a))||this).events=void 0,n}(0,o.Z)(t,e);var n=t.prototype;return n.boot=function(){this.events=new Yt,this.registryScreenFactory()},n.get=function(e){var t=this.scene.children.getByName(e);return null===t?null:t},n.add=function(e,t,n,i){var a=this.get(e);return a||(a=this.scene.add.screen(e,t,n,i),this.events.emit(GameCore.Screens.Events.CREATED,a),a)},n.open=function(e,t){var n=this.get(e);return!!n&&(n.open(t),n.emit(GameCore.Screens.Events.OPEN,n),this.events.emit(GameCore.Screens.Events.OPEN,n),!0)},n.close=function(e){var t=this.get(e);return!!t&&(t.close(),t.emit(GameCore.Screens.Events.CLOSE,t),this.events.emit(GameCore.Screens.Events.CLOSE,t),!0)},n.bringToTop=function(e){var t=this.scene.children.getByName(e);t&&this.scene.children.bringToTop(t)},n.registryScreenFactory=function(){Phaser.GameObjects.GameObjectFactory.register("screen",this.createScreen)},n.createScreen=function(e,t,n,i){var a=new t(this.scene,e,n,i);return Phaser.Display.Align.In.Center(a,this.scene.gameZone),this.existing(a),a},t}(Phaser.Plugins.ScenePlugin),jt=Kt,Xt=n(400),qt=n.n(Xt),Jt=n(423),Qt=n(425),$t=n(424),en={currentSceneKey:"",prevSceneKey:""};(0,$t.pV)();var tn,nn,an,rn,sn,on,cn,ln,un,hn={processed:!1,contextId:"",contextType:"SOLO",entryPointData:{},currentGameMode:""},dn=hn,pn={data:{}},fn={friendListChallenged:[]},gn={token:"",isRequesting:!1},mn=(tn={},tn[se]=function(e,t){return void 0===e&&(e=gn),(0,$t.ZP)(e,(function(e){var n=t.payload;if(n){var i=n.token;switch(t.type){case ne:e.isRequesting=!0;break;case ie:e.token=i,e.isRequesting=!1}}}))},tn),vn=n(125),yn={ASID:"",playerId:"",name:"",photo:"",locale:"",data:{score:0,settings:be,userGuideDisplays:0,customFields:{}},connectedPlayers:{},isConnectedPlayersLoaded:!1,isUserNew:!0},En=(nn={},nn[qe]=function(e,t){return void 0===e&&(e=yn),(0,$t.ZP)(e,(function(n){var i=t.payload;if(i){var a=i.name,r=i.value,s=i.data,o=void 0===s?{}:s,c=i.score,l=i.connectedPlayers,u=void 0===l?[]:l,h=i.profile;switch(t.type){case Ye:var d=i.playerId,p=i.name,f=i.photo,g=i.locale,m=i.data;if(n.playerId=d,n.name=p,n.photo=f,n.locale=g,GameCore.Utils.Valid.isObject(m)){var v=m;n.data=(0,vn.TS)(e.data,v)}m.userGuideDisplays>0&&(n.isUserNew=!1);break;case We:var y=h.playerId,E=h.name,A=h.photo,S=h.locale,b=h.ASID;n.ASID=b,n.playerId=y,n.name=E,n.photo=A,n.locale=S;break;case ze:n.data.score=c;break;case Ve:if(!GameCore.Utils.Object.hasOwn(n.data.settings,a))break;n.data.settings[a]=r;break;case He:n.data=(0,vn.TS)(e.data,o),o.userGuideDisplays>0&&(n.isUserNew=!1);break;case Ke:if(n.isConnectedPlayersLoaded=!0,u.length<=0)break;var T=GameCore.Utils.Object.keyBy(u,"playerId");n.connectedPlayers=(0,vn.TS)(e.connectedPlayers,T)}}}))},nn),An=n(581),Sn=n.n(An),bn={data:{},profileIds:[]},Tn=(an={},an[St]=function(e,t){return void 0===e&&(e=bn),(0,$t.ZP)(e,(function(n){var i=t.payload;if(i){var a=i.data,s=void 0===a?[]:a;if(t.type===At){var o,c,l=GameCore.Utils.Object.keyBy(s,"playerId"),u=J()(l);n.data=(0,vn.TS)((0,r.Z)({},e.data),l),n.profileIds=P()(o=[]).call(o,new(Sn())(P()(c=[]).call(c,e.profileIds,u)))}}}))},an),wn="match",Cn="MATCH_GAMEPLAY_INITIALIZE",In="MATCH_GAMEPLAY_START",Pn="MATCH_GAMEPLAY_FINISH",xn="MATCH_GAMEPLAY_UPDATE",kn="MATCH_GAMEPLAY_RESCUE",On="MATCH_STATS_DATA_CLEAR",Rn="MATCH_STATS_DATA_UPDATE",Bn="MATCH_STATS_CURRENT_UPDATE",_n="MATCH_SINGLE_CREATE_REQUEST",Dn="MATCH_SINGLE_DETAIL_REQUEST",Nn="MATCH_SINGLE_DATA_RECEIVED",Ln="MATCH_SINGLE_DATA_CLEAR",Mn="MATCH_CHALLENGE_JOIN_REQUEST",Gn="MATCH_CHALLENGE_CREATE_REQUEST",Fn="MATCH_CHALLENGE_FINISH_REQUEST",Zn="MATCH_CHALLENGE_CONTINUE_REQUEST",Un="MATCH_CHALLENGE_DATA_RECEIVED",Yn="MATCH_CHALLENGE_DATA_CLEAR",Hn="MATCH_GROUP_CREATE_REQUEST",zn="MATCH_GROUP_FINISH_REQUEST",Wn="MATCH_ONLINE_CREATE_REQUEST",Vn="MATCH_ONLINE_DATA_RECEIVED",Kn="MATCH_ONLINE_STATS_UPDATE",jn="MATCH_ONLINE_FINISH_REQUEST",Xn="MATCH_ONLINE_DATA_CLEAR",qn="MATCH_AUTO_PLAY_SINGLE",Jn="open",Qn="active",$n="finished",ei={mode:"",status:Jn,rescued:0,startAt:0,finishAt:0},ti={single:{_id:"",data:{fen:""},playerId:"",status:Jn},group:{status:Jn,opponentInfo:{playerId:"",name:"",photo:""}},challenge:{_id:"",status:Jn,whitePlayerId:"",blackPlayerId:"",opponentInfo:{playerId:"",name:"",photo:""}},online:{_id:"",status:Jn,players:{}},updateAt:0,isRequesting:!1,isAutoStartSingleMode:!1},ni={current:{updateAt:0},data:{updateAt:0},isRequesting:!1},ii=((rn={})[wn]=(0,Jt.UY)({gameplay:function(e,t){return void 0===e&&(e=ei),(0,$t.ZP)(e,(function(n){var i=t.payload;if(i){var a=i.mode,r=i.status;switch(t.type){case Cn:n.status=Jn,n.mode=ei.mode,n.rescued=ei.rescued,n.startAt=ei.startAt,n.finishAt=ei.finishAt,n.opponentInfo=ei.opponentInfo;break;case In:n.mode=a,n.status=Qn,n.rescued=ei.rescued,n.startAt=Date.now();break;case xn:n.mode="string"===typeof a?a:e.mode,n.status=r||e.status;break;case Pn:n.status=$n,n.finishAt=Date.now();break;case kn:n.rescued+=1}}}))},match:function(e,t){return void 0===e&&(e=ti),(0,$t.ZP)(e,(function(n){var i=t.payload;if(i){var a=i.match,s=i.opponentInfo,o=i.players,c=i.enable;switch(t.type){case _n:case Dn:case Mn:case Fn:case Wn:n.isRequesting=!0;break;case"MATCH_SINGLE_MOVE_UPDATED":n.single=(0,r.Z)({},e.single,a),n.updateAt=Date.now();break;case Nn:n.isRequesting=!1,n.single=a||ti.single;break;case Ln:n.isRequesting=!1,n.single=ti.single;break;case Gn:case Zn:n.isRequesting=!0,n.challenge.opponentInfo=s;break;case Un:n.isRequesting=!1,n.challenge=(0,r.Z)({},a||ti.challenge),n.challenge.opponentInfo=e.challenge.opponentInfo;break;case Yn:n.isRequesting=!1,n.challenge=ti.challenge;break;case Hn:n.group.status=Qn,s&&(n.group.opponentInfo=s);break;case zn:n.group.status=$n;break;case Xn:n.online.status=ti.online.status,n.online.players=ti.online.players;break;case Vn:n.online.status=Qn,n.online.players=o;break;case jn:n.online.status=$n;break;case qn:n.isAutoStartSingleMode=c}}}))},stats:function(e,t){return void 0===e&&(e=ni),(0,$t.ZP)(e,(function(n){var i=t.payload;if(i){var a=i.playerId,s=i.stats,o=i.match,c=i.current,l=i.players,u=i.leaders;switch(t.type){case On:delete n.data[a],n.current=ni.current;break;case"MATCH_STATS_CONTEXT_REQUEST":n.data=ni.data,n.isRequesting=!0;break;case"MATCH_STATS_CONTEXT_RECEIVED":n.data=s,n.isRequesting=!1;break;case Rn:n.data[a]=s;break;case Bn:n.current=(0,vn.TS)((0,r.Z)({},e.current),s);break;case Vn:J()(l).forEach((function(e){n.data[e]={score:0}}));break;case Kn:u.forEach((function(e){var t=e.playerId,i=e.score,a=e.rank;n.data[t]={score:i,rank:a}}));break;case Un:var h=o||{},d=h.blackPlayerId,p=h.blackPlayerScore,f=h.whitePlayerId,g=h.whitePlayerScore,m=h.whitePlayerLevel,v=h.blackPlayerLevel;if(!d||!f)break;c&&(n.current=c),n.data[d]={score:p,level:v},n.data[f]={score:g,level:m}}}}))}}),rn),ai="TOURNAMENT_ACTIVE",ri="TOURNAMENT_REQUEST",si="TOURNAMENT_RECEIVED",oi={active:!1,tournamentId:null,bestSessionScore:0,isRequesting:!1},ci=((sn={}).tournament=function(e,t){return void 0===e&&(e=oi),(0,$t.ZP)(e,(function(n){var i=t.payload;if(i){var a=i.score,r=void 0===a?0:a,s=i.tournamentId;switch(t.type){case ai:n.active=!0,n.tournamentId=s;break;case ri:n.isRequesting=!0;break;case si:n.isRequesting=!1,r>e.bestSessionScore&&(n.bestSessionScore=r)}}}))},sn),li="leaderboards",ui=n(129),hi=n.n(ui),di=n(199),pi=n.n(di),fi="LEADERBOARD_DATA_REQUEST",gi="LEADERBOARD_DATA_UPDATE",mi="LEADERBOARD_DATA_CLEAR",vi={leaderboardId:"",type:"",limit:0,offset:0,leaders:{},isRequesting:!1},yi=((on={})[li]=function(e,t){return void 0===e&&(e=vi),(0,$t.ZP)(e,(function(n){var i=t.payload;if(i){var a=i.leaderboardId,s=i.type,o=i.limit,c=i.offset,l=i.leaders;switch(t.type){case fi:e.type!==s&&0===c&&(n.leaders=vi.leaders),n.isRequesting=!0,n.leaderboardId=a,n.type=s,n.limit=o,n.offset=c;break;case gi:if(n.isRequesting=!1,e.type!==s)break;var u=GameCore.Utils.Json.clone((0,r.Z)({},e.leaders,l)),h=hi()(u),d=we()(h).call(h,(function(e){return!!e.name&&!!e.photo}));pi()(d).call(d,(function(e,t){return+t.score-+e.score})),d.forEach((function(e,t){e.rank=t+1,n.leaders[e.playerId]=e}));break;case mi:n.isRequesting=!1,n.type=vi.type,n.limit=vi.limit,n.offset=vi.offset,n.leaders=vi.leaders,n.leaderboardId=vi.leaderboardId}}}))},on),Ei="missions",Ai="MISSIONS_DATA_REQUEST",Si="MISSIONS_DATA_RECEIVE",bi="MISSION_UPDATE",Ti="MISSION_COMPLETED",wi={mission:null,missions:null,isRequesting:!1},Ci=((cn={})[Ei]=function(e,t){return void 0===e&&(e=wi),(0,$t.ZP)(e,(function(n){var i,a,r=t.payload;if(r){var s=r.name,o=r.type,c=r.value,l=r.missions;switch(t.type){case Ai:n.isRequesting=!0;break;case Si:if(n.isRequesting=!1,l.length<1)return;n.missions={},l.forEach((function(e){n.missions[e.name]=e}));break;case"MISSION_START":if(null===e.missions)break;var u=e.missions[s];n.mission={name:s,process:{},require:u.require,reward:u.reward},J()(u.require).forEach((function(e){n.mission.process[e]=0}));break;case bi:if((null==(i=e.mission)?void 0:i.name)!==s)break;n.mission.process[o]+=c;break;case Ti:if((null==(a=e.mission)?void 0:a.name)!==s)break;n.mission=null}}}))},cn),Ii="dailyTasks",Pi="DAILY_TASKS_DATA_REQUEST",xi="DAILY_TASKS_DATA_RECEIVE",ki="DAILY_TASKS_PROCESS_UPDATE",Oi="DAILY_TASK_VALUE_ADD",Ri="DAILY_TASK_REWARDED",Bi="DAILY_TASKS_SEEN",_i="DAILY_TASK_FINISHED",Di={tasks:[],process:[],isRequesting:!1,isNotice:!1},Ni=((ln={})[Ii]=function(e,t){return void 0===e&&(e=Di),(0,$t.ZP)(e,(function(n){var i=t.payload;if(i){var a=i.id,r=i.type,s=i.value,o=i.tasks,c=i.process;switch(t.type){case Pi:n.isRequesting=!0;break;case xi:n.isRequesting=!1,n.tasks=o;break;case ki:n.process=c;break;case Oi:if(!e.process[a])break;n.process[a][r]+=s;break;case Ri:if(!e.process[a])break;n.process[a].rewarded=!0;break;case Bi:n.isNotice=!1;break;case _i:n.isNotice=!0}}}))},ln),Li="dailyRewards",Mi="DAILY_REWARDS_REQUEST",Gi="DAILY_REWARDS_RECEIVE",Fi={rewards:[],isRequesting:!1},Zi=((un={})[Li]=function(e,t){return void 0===e&&(e=Fi),(0,$t.ZP)(e,(function(e){var n=t.payload;if(n){var i=n.rewards;switch(t.type){case Mi:e.isRequesting=!0;break;case Gi:e.isRequesting=!1,e.rewards=i}}}))},un),Ui=(0,Jt.UY)((0,r.Z)({scene:function(e,t){return void 0===e&&(e=en),(0,$t.ZP)(e,(function(n){var i=t.payload;if(i){var a=i.sceneKey;if(t.type===Qt.DW)n.currentSceneKey=a,n.prevSceneKey=e.currentSceneKey}}))},context:function(e,t){return void 0===e&&(e=hn),(0,$t.ZP)(e,(function(e){var n=t.payload;if(n){var i=n.gameMode,a=n.contextId,r=n.contextType,s=n.entryPointData;switch(t.type){case Qt.kL:e.contextId=a,e.contextType=r,e.entryPointData=s;break;case Qt.fJ:e.contextId=a,e.contextType=r,e.processed=!0;break;case Qt.EH:e.currentGameMode=i}}}))},messages:function(e,t){return void 0===e&&(e=pn),(0,$t.ZP)(e,(function(n){var i=t.payload;if(i){var a=i.opponentId;if("string"===typeof a)switch(t.type){case Qt.qj:e.data[a]?n.data[a].sent=!0:n.data[a]={sent:!0};break;case Qt.rh:e.data[a]?n.data[a].sent=!1:n.data[a]={sent:!1}}}}))},friendChallenge:function(e,t){return void 0===e&&(e=fn),(0,$t.ZP)(e,(function(e){var n,i=t.payload;if(i){var a=i.opponentId,r=void 0===a?"":a;switch(t.type){case Qt.x2:if(!r||xt()(n=e.friendListChallenged).call(n,r)>=0)break;e.friendListChallenged.push(r)}}}))}},mn,En,Tn,ii,ci,yi,Ci,Ni,Zi)),Yi=n(592),Hi=function(e){return(0,Yi.xC)({reducer:Ui,preloadedState:e,devTools:!0})},zi=function(e){function t(){for(var t,n,i=arguments.length,a=new Array(i),r=0;r<i;r++)a[r]=arguments[r];return(n=e.call.apply(e,P()(t=[this]).call(t,a))||this).store=void 0,n.initiator=void 0,n.dispatch=function(e){return n.store.dispatch(e)},n.getState=function(){return n.store.getState()},n.subscribe=function(e){return n.store.subscribe(e)},n.watch=function(e,t){var i=qt()((function(){var t=n.getState();return e(t)}));return n.subscribe(i((function(e){t(e)})))},n}(0,o.Z)(t,e);var n=t.prototype;return n.init=function(){this.store=Hi({})},n.setInitiator=function(e){this.initiator=e},n.syncStore=function(){var e=(0,s.Z)(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.initiator.initContext(),e.next=3,this.initiator.initPlayer();case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.initPlayerManually=function(){var e=(0,s.Z)(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.initiator.initPlayer();case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),t}(Phaser.Plugins.BasePlugin),Wi=zi,Vi=n(586),Ki=n.n(Vi),ji=function(e){function t(t,n){var i;return(i=e.call(this,t,{type:"webfont",key:n.type})||this).payload=void 0,i.payload=n,i}(0,o.Z)(t,e);var n=t.prototype;return n.load=function(){var e;switch(this.payload.type){case"google":e=this.getGoogleFontConfig(this.payload);break;case"local":e=this.getLocalFontConfig(this.payload)}Ki().load(e)},n.getGoogleFontConfig=function(e){var t=this,n=e.character,i=e.fontName,a=e.fontWeight;return{google:{families:[i+":"+(void 0===a?400:a)],text:n},active:function(){t.loader.nextFile(t,!0)},timeout:15e3}},n.getLocalFontConfig=function(e){var t=this,n=e.fontName,i=e.fontType,a=document.createElement("style");document.head.appendChild(a);var r=a.sheet;if(r){var s='@font-face { font-family: "'+n+'"; src: url("assets/fonts/'+n+("opentype"===i?".otf":".ttf")+'") format("'+i+'"); }';r.insertRule(s,0)}return{custom:{families:[n]},active:function(){t.loader.nextFile(t,!0)},timeout:15e3}},t}(Phaser.Loader.File),Xi=function(e){function t(){return e.apply(this,arguments)||this}return(0,o.Z)(t,e),t.prototype.addFont=function(e){var t=new ji(this.scene.load,e);this.scene.load.addFile(t)},t}(Phaser.Plugins.ScenePlugin),qi=Xi,Ji=n(192),Qi=function(e){function t(){return e.apply(this,arguments)||this}return(0,o.Z)(t,e),t.prototype.emit=function(t){return e.prototype.emit.call(this,t)},t}(Phaser.Events.EventEmitter),$i=Qi,ea={RESIZE:"resize",CHANGE_LAYOUT:"change-layout"},ta=function(e){function t(){for(var t,n,i=arguments.length,a=new Array(i),r=0;r<i;r++)a[r]=arguments[r];return(n=e.call.apply(e,P()(t=[this]).call(t,a))||this).events=void 0,n.previousLayout=void 0,n.resizeEventData=void 0,n.portraitRatio=void 0,n.portraitWidth=void 0,n.portraitHeight=void 0,n.landscapeRatio=void 0,n.landscapeWidth=void 0,n.landscapeHeight=void 0,n.worldWidth=void 0,n.worldHeight=void 0,n.worldRatio=void 0,n.autoResize=void 0,n.disableLandscape=void 0,n.fullSizeOnLandscape=void 0,n.currentLayout=void 0,n.forcePixelRatio=void 0,n.handleResize=(0,Ji.D)((function(){n.previousLayout=""+n.currentLayout,n.initWorldSize(),n.resize()}),300),n}(0,o.Z)(t,e);var n=t.prototype;return n.configure=function(e){this.events=new $i;var t=e.autoResize,n=e.portraitRatio,i=e.portraitWidth,a=e.portraitHeight,r=e.landscapeWidth,s=e.landscapeHeight,o=e.landscapeRatio,c=e.disableLandscape,l=e.fullSizeOnLandscape;this.autoResize=t,this.disableLandscape=c,this.fullSizeOnLandscape=l,this.portraitRatio=n,this.portraitWidth=i,this.portraitHeight=a,this.landscapeRatio=o,this.landscapeWidth=r,this.landscapeHeight=s,this.initWorldSize(),this.addEventResize()},n.resize=function(e){var t=this;e&&e>0&&(this.forcePixelRatio=e);var n=this.getCanvasSizeFixedRatio(this.worldRatio),i=n.width,a=n.height;this.resizeCanvas(i,a),this.game.scene.scenes.forEach((function(e){var n=e.cameras.main;if(n){var i=t.getZoomRatio(),a=t.getWorldSize(),r=a.width,s=a.height;n.setZoom(i),n.centerOn(r/2,s/2)}}));var r={width:this.worldWidth,height:this.worldHeight,isLayoutChanged:!1,newLayout:this.currentLayout};this.previousLayout!==this.currentLayout&&(r.isLayoutChanged=!0,r.newLayout=this.currentLayout),this.resizeEventData=r,this.events.emit(ea.RESIZE,r)},n.getResizeEventData=function(){return this.resizeEventData},n.resizeCanvas=function(e,t){this.game.canvas.width=e,this.game.canvas.height=t,this.game.scale.resize(e,t)},n.getWorldSize=function(){return{width:this.worldWidth,height:this.worldHeight}},n.initWorldSize=function(){if(this.worldWidth=this.portraitWidth,this.worldHeight=this.portraitHeight,this.isScreenSmallerRatio(this.portraitRatio))this.worldHeight=this.worldWidth/this.getScreenRatio(),this.currentLayout="portrait";else if(!this.disableLandscape&&(this.worldWidth=this.landscapeWidth,this.worldHeight=this.landscapeHeight,this.currentLayout="landscape",this.fullSizeOnLandscape)){this.worldRatio=this.worldWidth/this.worldHeight,this.landscapeRatio=this.getScreenRatio();var e=this.getCanvasSizeFixedRatio(this.landscapeRatio),t=e.width,n=e.height,i=this.getZoomRatio();this.worldWidth=t/i,this.worldHeight=n/i}this.worldRatio=this.worldWidth/this.worldHeight},n.getZoomRatio=function(){var e=this.getWorldSize().width;return this.getCanvasSizeFixedRatio(this.worldRatio).width/e},n.getPixelRatio=function(){if(this.forcePixelRatio>0)return this.forcePixelRatio;if(GameCore.Utils.Device.isDesktop())return 2;var e=GameCore.Utils.Device.pixelRatio();return e>2&&(e=2),e},n.getPhysicPixels=function(e,t){return e*t},n.getCanvasSizeFixedRatio=function(e){var t=this.getPixelRatio(),n=this.getScreenWidth()*t,i=this.getScreenHeight()*t;return this.isScreenSmallerRatio(e)?i=n/e:n=i*e,{width:n,height:i}},n.getScreenRatio=function(){return this.getScreenWidth()/this.getScreenHeight()},n.getScreenHeight=function(){var e=document,t=e.body,n=e.documentElement,i=t.clientHeight,a=n.clientHeight;return Math.max(a,i)||0},n.getScreenWidth=function(){var e=document,t=e.body,n=e.documentElement,i=t.clientWidth,a=n.clientWidth;return Math.max(a,i)||0},n.isScreenSmallerRatio=function(e){return this.getScreenRatio()<e},n.addEventResize=function(){this.autoResize&&window.addEventListener("resize",this.handleResize)},n.isLandscape=function(){return!this.disableLandscape&&this.worldRatio>this.portraitRatio},t}(Phaser.Plugins.BasePlugin),na=ta,ia=function(){function e(e,t,n){this.contextId=void 0,this.contextType=void 0,this.entryPointData=void 0,this.contextId=e||dn.contextId,this.contextType=t||dn.contextType,this.entryPointData=n||dn.entryPointData}return e.prototype.toObject=function(){return{contextId:this.contextId,contextType:this.contextType,entryPointData:this.entryPointData}},e}(),aa=function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).name="InvalidPlayerId",i.message=t||"The playerId is not valid",i.payload=n,i}return(0,o.Z)(t,e),t}((0,F.Z)(Error)),ra="share_invite",sa="challenge_friend_match",oa=n(421),ca=new je.Z("10","Your Friend",oa.Z.AVATAR.FILE).toObject(),la="single",ua="challenge-friends",ha="matching-group",da="tournaments",pa="online",fa=(0,re.P1)([function(e){return e.context}],(function(e){return e})),ga=(0,re.P1)([function(e){return e.context.currentGameMode}],(function(e){return e})),ma=function(e,t){return{type:Qt.fJ,payload:{contextId:e,contextType:t}}},va=function(e){return function(t){t({type:Qt.EH,payload:{gameMode:e}}),(0,i.sw)("game-mode",e)}},ya={score:"score",settings:"settings",gameData:"gameData",userGuideDisplays:"userGuideDisplays"},Ea=GameCore.Configs.SyncProfileFromAPI,Aa=function(e){var t=this;this.game=void 0,this.initContext=function(){var e=window.GameSDK.context.getID(),n=window.GameSDK.context.getType(),i=window.GameSDK.getEntryPointData(),a=new ia(e,n,i).toObject(),r=a.contextId,s=a.contextType,o=a.entryPointData;t.game.storage.dispatch(function(e,t,n){return{type:Qt.kL,payload:{contextId:e,contextType:t,entryPointData:n}}}(r,s,o))},this.initPlayer=(0,s.Z)(h().mark((function e(){var n,i,a,r,s;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.game.player,i=t.getPlayerInfo(),a=hi()(ya),e.next=5,FBInstant.player.getDataAsync(a);case 5:return r=e.sent,s=new Me(r),e.next=11,t.maintainDataStructure(s);case 11:return s=e.sent,!0===s.toObject().settings.music&&window.game.audio.playMusic(),e.next=16,n.receiveData(i,s.convertToPlayerData());case 16:case"end":return e.stop()}}),e)}))),this.maintainDataStructure=function(){var e=(0,s.Z)(h().mark((function e(t){var n,i,a,s;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,Ea){e.next=3;break}return e.abrupt("return",t);case 3:return e.next=5,FBInstant.player.getDataAsync(["isSynced","customFields"]);case 5:if(e.t0=e.sent,e.t0){e.next=8;break}e.t0={};case 8:if(n=e.t0,!0!==(n.isSynced||!1)){e.next=12;break}return e.abrupt("return",t);case 12:if(i=n.customFields||!1){e.next=15;break}return e.abrupt("return",t);case 15:return(a=t.convertToPlayerData()).customFields=i,s=new Me({}).convertToFacebookData(a),e.next=20,FBInstant.player.setDataAsync((0,r.Z)({},s,{isSynced:!0}));case 20:return e.abrupt("return",new Me(s));case 23:return e.prev=23,e.t1=e.catch(0),e.abrupt("return",t);case 27:case"end":return e.stop()}}),e,null,[[0,23]])})));return function(t){return e.apply(this,arguments)}}(),this.getPlayerInfo=function(){try{var e=window.GameSDK.player.getID(),t=window.GameSDK.player.getName(),n=window.GameSDK.player.getPhoto(),i=window.GameSDK.getLocale();if(!GameCore.Utils.Valid.isString(e))throw new aa(null,{playerId:e});return GameCore.Utils.Valid.isString(t)||(t="You"),new je.Z(e,t,n,i).toObject()}catch(a){return new je.Z("123","You").toObject()}},this.game=e},Sa=n(428),ba=function(e){function t(){for(var t,n,i=arguments.length,a=new Array(i),r=0;r<i;r++)a[r]=arguments[r];return(n=e.call.apply(e,P()(t=[this]).call(t,a))||this).Text=void 0,n.Texture=void 0,n.currentLocale=void 0,n.supportedLanguages=void 0,n.data=void 0,n.options=void 0,n}(0,o.Z)(t,e);var n=t.prototype;return n.configure=function(e){this.applyOptions(e)},n.getCurrentLanguage=function(){return this.currentLocale},n.switchLanguage=function(e){void 0===e&&(e="en");var t=this.getCorrectLocale(e);this.currentLocale=t,this.Text=this.data[t].Text,this.Texture=this.data[t].Texture},n.getText=function(e){if("object"==typeof e){var t=e.key,n=e.variables,i=void 0===n?[]:n,a=e.locale,r=void 0===a?this.currentLocale:a,s=this.getCorrectLocale(r),o=this.data[s].Text[t];return this.replaceVariables(o,i)}return this.Text[e]},n.getTexture=function(e){if("object"==typeof e){var t=e.key,n=e.variables,i=void 0===n?[]:n,a=e.locale,r=void 0===a?this.currentLocale:a,s=this.getCorrectLocale(r),o=this.data[s].Texture[t];return this.replaceVariables(o,i)}return this.Texture[e]},n.isSupportLanguage=function(e){var t;return xt()(t=this.supportedLanguages).call(t,e)>=0},n.applyOptions=function(e){this.options=(0,r.Z)({},e);var t=e.data,n=e.locale,i=void 0===n?"en":n,a=e.upperCaseText,s=void 0!==a&&a;this.data=t,this.supportedLanguages=J()(t);var o=this.getCorrectLocale(i);if(this.currentLocale=o,this.Text=t[o].Text,this.Texture=t[o].Texture,s)for(var c in this.Text)this.Text[c]=this.Text[c].toUpperCase()},n.makeText=function(e,t){var n,i=t.maxWidth,a=void 0===i?Phaser.Math.MAX_SAFE_INTEGER:i,r=t.maxHeight,s=void 0===r?Phaser.Math.MAX_SAFE_INTEGER:r,o=t.align,c=void 0===o?"center":o,l=t.drawMaxBoxDebug,u=void 0!==l&&l,h=e.make.bitmapText(t);for("center"===c?h.setCenterAlign():"left"===c?h.setLeftAlign():"right"===c&&h.setRightAlign(),xt()(n=t.text||"").call(n," ")>=0&&h.setMaxWidth(a);h.width>a||h.height>=s;)h.setFontSize(.95*h.fontSize);if(u&&GameCore.Utils.Valid.isDebugger()){var d=e.game.globalScene.add.graphics({lineStyle:{width:2,color:16711680}});d.setDepth(Phaser.Math.MAX_SAFE_INTEGER),e.game.globalScene.events.on(Phaser.Scenes.Events.UPDATE,(function(){if(d.clear(),h&&h.visible&&h.active){var e=h.getWorldPosition(),t=e.x,n=e.y;d.strokeRect(t-.5*a+(.5-h.originX)*h.width,n-.5*s+(.5-h.originY)*h.height,a,s)}}))}return h},n.setFontSize=function(e,t,n){var i,a=t||Phaser.Math.MAX_SAFE_INTEGER,r=n||Phaser.Math.MAX_SAFE_INTEGER;for(xt()(i=e.text||"").call(i," ")>=0&&e.setMaxWidth(a);e.width>a||e.height>=r;)e.setFontSize(.95*e.fontSize)},n.replaceVariables=function(e,t){var n=t.length;if(0==n)return e;var i=0;return e.replace(/{.*}/,(function(){return String(t[Math.min(i++,n-1)])}))},n.getCorrectLocale=function(e){var t=e;return this.isSupportLanguage(e)||(t="en"),t},t}(Phaser.Plugins.BasePlugin),Ta={en:JSON.parse('{"Text":{"DAILY_REWARDS":"Daily Rewards","OWNED":"Owned","SKIPPED":"Skipped","DAY_X":"DAY {X}","CLAIM":"CLAIM","CLAIM_X2":"Claim X2","LEADERBOARDS":"Leaderboards","PLAY":"Play","PLAY_NOW":"Play\\nNow","MISSIONS":"Missions","SETTINGS":"SETTINGS","WATCH_A_VIDEO_X":"WATCH A VIDEO TO GET\\n{X} COINS","GET_NOW":"GET NOW!","DAILY_MISSIONS":"Daily Missions","COLLECT_300_EGGS":"COLLECT 300 EGGS","REACH_10000_POINTS":"REACH 10,000 POINTS","GET_1_DINOMITE":"GET 1 DINOMITE COMBO","USE_SECOND_CHANCE_2":"USE SECOND CHANCE 2 TIMES","SHOOT_5_FLYING":"SHOOT 5 FLYING DINOSAURS","COMPLETE_GAME_5":"COMPLETE GAME 5 TIMES","MUSIC":"Music","SOUND":"Sound","ON":"On","OFF":"Off","REPLAY":"Replay","HOME":"HOME","INVITE FRIEND":"INVITE FRIEND","YOUR_SCORE":"YOUR SCORE","YOUR_SCORE_":"Your Score!","CONTINUE":"CONTINUE","SECOND_CHANCE":"SECOND\\nCHANCE?","GAME_OVER":"GAME OVER","HIGH_SCORE":"HIGH SCORE","PLAY_n_WITH":"PlaynWith","PLAY_WITH":"PLAY WITH","WORLD":"WORLD","FRIENDS":"FRIENDS","CHALLENGE":"Challenge","MATCHING":"Matching...","LOADING_ADS":"Loading ads...","LOADING":"Loading...","NO_ADS":"No ads to display!","SORRY_NO_REWARDS":"Sorry, No Rewards!\\nYou have cancelled the ad!","LEADERBOARD_IS_EMPTY":"Leaderboard is empty!","INVITE":"INVITE","VIBRATE":"Vibrate","RANDOM":"Random","SHARE":"Share","VS":"VS","OK":"OK","YOUR_RANK":"Your rank","RESULT":"Result","CURRENT_TOURNAMENT":"Current Tournament","CREATE_YOUR_TOURNAMENT":"Create your tournament","CREATE":"Create","COLLECT":"Collect","YOU_ARE_THE_TOP_OF_THE_TOP":"You are the top of the top!","READY":"Ready!","MULTIPLY":"Multiply?","COLOR_POP":"COLOR POP REMOVES ANY EGG\\nTHAT MATCH THE COLOR IT HIT","TOUCH_ANYWHERE":"Touch anywhere\\nto continue","ANONYMOUS":"Anonymous","HS_SHARE":"I reached {X} score by breaking all the eggs. Can you do better? Come and play with me.","JOIN_LB_TEXT":"Login to join the leaderboards","LOGIN":"LOG\\nIN","JOIN_LB_SUCCESS":"YOU HAVE JOINED\\nTHE LEADERBOARD","JOIN_LB_FAIL":"FAILED TO JOIN\\nTHE LEADERBOARD","LEADERBOARD_NEWLINE":"Leaderboards"},"Texture":{"NO_THANKS":"texts/no-thanks","DAILY_MISSION_2ND":"icons/icon-2nd"}}'),ru:JSON.parse('{"Text":{"DAILY_REWARDS":"\u0415\u0416\u0415\u0414\u041d\u0415\u0412\u041d\u042b\u0415 \u041d\u0410\u0413\u0420\u0410\u0414\u042b","OWNED":"\u041f\u041e\u041b\u0423\u0427\u0415\u041d\u041e","SKIPPED":"\u041f\u0420\u041e\u041f\u0423\u0429\u0415\u041d\u041e","DAY_X":"\u0414\u0415\u041d\u042c {X}","CLAIM":"\u041f\u041e\u041b\u0423\u0427\u0418\u0422\u042c","CLAIM_X2":"\u041f\u041e\u041b\u0423\u0427\u0418\u0422\u042c X2","LEADERBOARDS":"\u0422\u0410\u0411\u041b\u0418\u0426\u0410 \u041b\u0418\u0414\u0415\u0420\u041e\u0412","PLAY":"\u0418\u0413\u0420\u0410\u0422\u042c","PLAY_NOW":"\u0418\u0413\u0420\u0410\u0422\u042c\\n\u0421\u0415\u0419\u0427\u0410\u0421","MISSIONS":"\u041c\u0418\u0421\u0421\u0418\u042f","SETTINGS":"\u041d\u0410\u0421\u0422\u0420\u041e\u0419\u041a\u0418","WATCH_A_VIDEO_X":"\u041f\u041e\u0421\u041c\u041e\u0422\u0420\u0418 \u0412\u0418\u0414\u0415\u041e, \u0427\u0422\u041e\u0411\u042b\\n\u041f\u041e\u041b\u0423\u0427\u0418\u0422\u042c {X} \u041c\u041e\u041d\u0415\u0422","GET_NOW":"\u041f\u041e\u041b\u0423\u0427\u0418\\n\u0421\u0415\u0419\u0427\u0410\u0421!","DAILY_MISSIONS":"\u0415\u0416\u0415\u0414\u041d\u0415\u0412\u041d\u042b\u0415 \u041c\u0418\u0421\u0421\u0418\u0418","COLLECT_300_EGGS":"\u0421\u041e\u0411\u0420\u0410\u0422\u042c 300 \u042f\u0418\u0426","REACH_10000_POINTS":"\u041d\u0410\u0411\u0420\u0410\u0422\u042c 10,000 \u041e\u0427\u041a\u041e\u0412","GET_1_DINOMITE":"\u041f\u041e\u041b\u0423\u0427\u0418\u0422\u0415 1 \u0414\u0418\u041d\u0410\u041c\u0418\u0422 \u041a\u041e\u041c\u0411\u041e","USE_SECOND_CHANCE_2":"\u0418\u0421\u041f\u041e\u041b\u042c\u0417\u041e\u0412\u0410\u0422\u042c \u0412\u0422\u041e\u0420\u041e\u0419 \u0428\u0410\u041d\u0421 2 \u0420\u0410\u0417\u0410","SHOOT_5_FLYING":"\u0421\u0411\u0418\u0422\u042c 5 \u041b\u0415\u0422\u0423\u0427\u0418\u0425 \u0414\u0418\u041d\u041e\u0417\u0410\u0412\u0420\u041e\u0412","COMPLETE_GAME_5":"\u0417\u0410\u0412\u0415\u0420\u0428\u0418\u0422\u042c \u0418\u0413\u0420\u0423 5 \u0420\u0410\u0417","MUSIC":"\u041c\u0423\u0417\u042b\u041a\u0410","SOUND":"\u0417\u0412\u0423\u041a\u041e\u0412\u042b\u0415","ON":"\u0412\u041a\u041b","OFF":"\u0412\u042b\u041a\u041b","REPLAY":"\u0418\u0413\u0420\u0410\u0422\u042c\\n\u0417\u0410\u041d\u041e\u0412\u041e","HOME":"\u0414\u041e\u041c\u041e\u0419","INVITE FRIEND":"\u041f\u0420\u0418\u0413\u041b\u0410\u0421\u0418 \u0414\u0420\u0423\u0417\u0415\u0419","YOUR_SCORE":"\u0422\u0412\u041e\u0419 \u0420\u0415\u0417\u0423\u041b\u042c\u0422\u0410\u0422","YOUR_SCORE_":"\u0422\u0412\u041e\u0419 \u0420\u0415\u0417\u0423\u041b\u042c\u0422\u0410\u0422!","CONTINUE":"\u041f\u0420\u041e\u0414\u041e\u041b\u0416\u0418\u0422\u042c","SECOND_CHANCE":"\u0412\u0422\u041e\u0420\u041e\u0419\\n\u0428\u0410\u041d\u0421?","GAME_OVER":"\u041a\u041e\u041d\u0415\u0426 \u0418\u0413\u0420\u042b","HIGH_SCORE":"\u041b\u0423\u0427\u0428\u0418\u0419 \u0420\u0415\u0417\u0423\u041b\u042c\u0422\u0410\u0422","PLAY_n_WITH":"\u0418\u0413\u0420\u0410\u0422\u042c\\n\u0421","PLAY_WITH":"\u0418\u0413\u0420\u0410\u0422\u042c \u0421","WORLD":"\u0412\u0415\u0421\u042c \u041c\u0418\u0420","FRIENDS":"\u0414\u0420\u0423\u0417\u042c\u042f","CHALLENGE":"\u0412\u042b\u0417\u041e\u0412","MATCHING":"\u041f\u041e\u0418\u0421\u041a...","LOADING_ADS":"\u0417\u0410\u0413\u0420\u0423\u0417\u041a\u0410 \u0420\u0415\u041a\u041b\u0410\u041c\u042b...","LOADING":"\u0417\u0410\u0413\u0420\u0423\u0417\u041a\u0410...","NO_ADS":"\u041d\u0415\u0422 \u0420\u0415\u041a\u041b\u0410\u041c\u042b\\n\u0414\u041b\u042f \u041e\u0422\u041e\u0411\u0420\u0410\u0416\u0415\u041d\u0418\u042f!","SORRY_NO_REWARDS":"\u0418\u0417\u0412\u0418\u041d\u0418, \u041d\u0410\u0413\u0420\u0410\u0414 \u041d\u0415\u0422!\\n\u0422\u042b \u041e\u0422\u041a\u0410\u0417\u0410\u041b\u0421\u042f \u041e\u0422\\n\u041f\u0420\u041e\u0421\u041c\u041e\u0422\u0420\u0410 \u0420\u0415\u041a\u041b\u0410\u041c\u042b!","LEADERBOARD_IS_EMPTY":"\u0422\u0410\u0411\u041b\u0418\u0426\u0410 \u041b\u0418\u0414\u0415\u0420\u041e\u0412 \u041f\u0423\u0421\u0422\u0410!","INVITE":"\u041f\u0420\u0418\u0413\u041b\u0410\u0421\u0418","VIBRATE":"\u0412\u0418\u0411\u0420\u0410\u0426\u0418\u042f","RANDOM":"\u0421\u041b\u0423\u0427\u0410\u0419\u041d\u042b\u0419","SHARE":"\u041f\u041e\u0414\u0415\u041b\u0418\u0422\u042c\u0421\u042f","VS":"\u041f\u0420\u041e\u0422\u0418\u0412","OK":"\u041b\u0410\u0414\u041d\u041e","YOUR_RANK":"\u0412\u0410\u0428 \u0420\u0410\u041d\u0413","RESULT":"\u0420\u0415\u0417\u0423\u041b\u042c\u0422\u0410\u0422","CURRENT_TOURNAMENT":"\u0422\u0415\u041a\u0423\u0429\u0418\u0419 \u0422\u0423\u0420\u041d\u0418\u0420","CREATE_YOUR_TOURNAMENT":"\u0421\u041e\u0417\u0414\u0410\u0422\u042c \u0421\u0412\u041e\u0419 \u0422\u0423\u0420\u041d\u0418\u0420","CREATE":"\u0421\u041e\u0411\u0415\u0420\u0418","COLLECT":"\u0421\u041e\u0411\u0420\u0410\u0422\u042c","YOU_ARE_THE_TOP_OF_THE_TOP":"\u0412\u042b \u0422\u041e\u041f-1","READY":"\u0413\u041e\u0422\u041e\u0412\u041e!","MULTIPLY":"\u0423\u041c\u041d\u041e\u0416\u0418\u0422\u042c?","COLOR_POP":"\u041c\u042f\u0427\u0418\u041a \u041e\u041f\u0420\u0415\u0414\u0415\u041b\u0415\u041d\u041d\u041e\u0413\u041e \u0426\u0412\u0415\u0422\u0410\\n\u0423\u0414\u0410\u041b\u042f\u0415\u0422 \u0412\u0421\u0415 \u042f\u0419\u0426\u0410,\\n\u0421\u041e\u041e\u0422\u0412\u0415\u0422\u0421\u0422\u0412\u0423\u042e\u0429\u0418\u0415 \u0415\u041c\u0423 \u041f\u041e \u0426\u0412\u0415\u0422\u0423","TOUCH_ANYWHERE":"\u041d\u0410\u0416\u041c\u0418\u0422\u0415 \u0412 \u041b\u042e\u0411\u041e\u041c \u041c\u0415\u0421\u0422\u0415,\\n\u0427\u0422\u041e\u0411\u042b \u041f\u0420\u041e\u0414\u041e\u041b\u0416\u0418\u0422\u042c","ANONYMOUS":"\u0410\u043d\u043e\u043d\u0438\u043c\u043d\u044b\u0439","HS_SHARE":"\u042f \u043d\u0430\u0431\u0440\u0430\u043b {X} \u043e\u0447\u043a\u043e\u0432, \u0440\u0430\u0437\u0431\u0438\u0432 \u0432\u0441\u0435 \u044f\u0439\u0446\u0430. \u0421\u043c\u043e\u0436\u0435\u0448\u044c \u043b\u0443\u0447\u0448\u0435? \u041f\u0440\u0438\u0445\u043e\u0434\u0438 \u0438 \u043f\u043e\u0438\u0433\u0440\u0430\u0439 \u0441\u043e \u043c\u043d\u043e\u0439.","JOIN_LB_TEXT":"\u0412\u043e\u0439\u0434\u0438\u0442\u0435, \u0447\u0442\u043e\u0431\u044b \u043f\u0440\u0438\u0441\u043e\u0435\u0434\u0438\u043d\u0438\u0442\u044c\u0441\u044f\\n\u043a \u0442\u0430\u0431\u043b\u0438\u0446\u0430\u043c \u043b\u0438\u0434\u0435\u0440\u043e\u0432","LOGIN":"\u0432\u043e\u0439\u0442\u0438","JOIN_LB_SUCCESS":"\u0412\u044b \u043f\u0440\u0438\u0441\u043e\u0435\u0434\u0438\u043d\u0438\u043b\u0438\u0441\\n\u043a \u0442\u0430\u0431\u043b\u0438\u0446\u0435 \u043b\u0438\u0434\u0435\u0440\u043e\u0432","JOIN_LB_FAIL":"\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u0432\u043e\u0439\u0442\u0438\\n\u0432 \u0442\u0430\u0431\u043b\u0438\u0446\u0443 \u043b\u0438\u0434\u0435\u0440\u043e\u0432","LEADERBOARD_NEWLINE":"\u0422\u0410\u0411\u041b\u0418\u0426\u0410\\n\u041b\u0418\u0414\u0415\u0420\u041e\u0412"},"Texture":{"NO_THANKS":"texts/no-thanks-ru","DAILY_MISSION_2ND":"icons/icon-2nd-ru"}}')},wa=function(e){function t(){return e.apply(this,arguments)||this}return(0,o.Z)(t,e),t.prototype.configure=function(t){e.prototype.configure.call(this,(0,r.Z)({data:Ta,locale:"en",upperCaseText:!1},t))},t}(ba),Ca=wa,Ia=GameCore.Ads.Types,Pa=[Ht._.SCREEN_OPEN],xa=function(e){function t(t,n){var i;(i=e.call(this,"GoogleAnalytics",(0,r.Z)({},n),"#E35335")||this).game=void 0,i.trackingId=void 0,i.currentPath="/";var a=n.trackingId;i.game=t;var s=(GameCore.Configs.Analytics.GoogleAnalytics||{}).consoleLog;return i.selfLog=!!s,i.trackingId=a,i}(0,o.Z)(t,e);var n=t.prototype;return n.processEvent=function(e,t,n){if(!(xt()(Pa).call(Pa,e)>=0)){var i=this.formatEventName(e),a=t?(0,r.Z)({},t):{};a=n?(0,r.Z)({},a,{value:n}):a,a=(0,r.Z)({},a,{page_path:this.currentPath,send_to:"GA"}),gtag("event",i,a)}},n.processLevelStart=function(e,t,n){this.processEvent(Ht._.LEVEL_START,{level:e,score:t,level_name:n})},n.processLevelRescue=function(e,t,n){this.processEvent(Ht._.LEVEL_RESCUE,{level:e,score:t,level_name:n})},n.processLevelFail=function(e,t,n){this.processEvent(Ht._.LEVEL_END,{level:e,score:t,level_name:n,success:!1})},n.processLevelComplete=function(e,t,n){this.processEvent(Ht._.LEVEL_END,{level:e,score:t,level_name:n,success:!0})},n.processLoadPreRollAd=function(e,t){var n=this.getEdaType(Ia.PRE_ROLL);this.processEvent(Ht._.AD_LOAD,{ad_type:n,screen_name:""+e,ad_service:""+t})},n.processShowPreRollAd=function(e,t){var n=this.getEdaType(Ia.PRE_ROLL);this.processEvent(Ht._.AD_SHOW,{ad_type:n,screen_name:""+e,ad_service:""+t}),this.processEvent(Ht._.AD_IMPRESSION,{ad_format:n})},n.processLoadInterstitialAd=function(e,t){var n=this.getEdaType(Ia.INTERSTITIAL);this.processEvent(Ht._.AD_LOAD,{ad_type:n,screen_name:""+e,ad_service:""+t})},n.processShowInterstitialAd=function(e,t){var n=this.getEdaType(Ia.INTERSTITIAL);this.processEvent(Ht._.AD_SHOW,{ad_type:n,screen_name:""+e,ad_service:""+t}),this.processEvent(Ht._.AD_IMPRESSION,{ad_format:"Interstitial"})},n.processLoadRewardedVideoAd=function(e,t){var n=this.getEdaType(Ia.REWARDED);this.processEvent(Ht._.AD_LOAD,{ad_type:n,screen_name:""+e,ad_service:""+t})},n.processShowRewardedVideoAd=function(e,t){var n=this.getEdaType(Ia.REWARDED);this.processEvent(Ht._.AD_SHOW,{ad_type:n,screen_name:""+e,ad_service:""+t}),this.processEvent(Ht._.AD_IMPRESSION,{ad_format:"Rewarded"})},n.processShowBannerAd=function(e,t,n){var i=this.getEdaType(Ia.BANNER);this.processEvent(Ht._.AD_SHOW,{ad_type:i,banner_position:""+e,screen_name:""+t,ad_service:""+n})},n.processLoadAdFail=function(e){var t=e.type,n=e.placement,i=e.adService,a=this.getEdaType(t);this.processEvent(Ht._.AD_LOAD_FAILED,{ad_type:a,screen_name:""+n,ad_service:""+i})},n.processShowAdFail=function(e){var t=e.type,n=e.placement,i=e.adService,a=e.bannerPosition,r={ad_type:this.getEdaType(t),screen_name:""+n,ad_service:""+i};t===Ia.BANNER&&(r.banner_position=""+a),this.processEvent(Ht._.AD_SHOW_FAILED,r)},n.processPageView=function(e){var t=this.getGameplayMode(),n="/"+t+"/"+e;this.currentPath=n,document.title=this.formatPageTitle(t,e),gtag("event","page_view",{page_path:this.currentPath,send_to:["GA",this.trackingId]})},n.getGameplayMode=function(){var e=this.game.storage.getState();return ga(e)},n.formatEventName=function(e){return e.toLowerCase().replace(/:/g,"_")},n.formatPageTitle=function(e,t){return this.toUpperCamelCaseWithSpace(e)+"::"+this.toUpperCamelCaseWithSpace(t)},n.toUpperCamelCaseWithSpace=function(e){var t=e.replace(/[-_\s.]+(.)?/g,(function(e,t){return t?" "+t.toUpperCase():""}));return t.substr(0,1).toUpperCase()+t.substr(1)},n.getEdaType=function(e){switch(e){case Ia.INTERSTITIAL:return"interstitial";case Ia.PRE_ROLL:return"pre_roll";case Ia.REWARDED:return"rewarded_video";case Ia.BANNER:return"banner";default:return"unknown"}},t}(GameCore.Analytics.BaseAnalytics),ka="G-7X8ZE47DBB",Oa="null",Ra=function(e){function t(){for(var t,n,a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=e.call.apply(e,P()(t=[this]).call(t,r))||this).progressFbTimeEvent=void 0,n.percentProgressFb=0,n.startGame=(0,s.Z)(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n.auth.requestToken();case 3:return e.next=5,n.storage.syncStore();case 5:return n.configureSentry(),n.configureRollbar(),e.next=9,n.detectGameMode();case 9:n.initGoogleAnalytics(),n.scene.launch(Sa.C.GLOBAL_SCENE),n.scene.switch(Sa.C.LOAD_SCENE),n.analytics.pageview("load-scene"),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(0),(0,i.tO)(e.t0);case 18:return e.prev=18,n.facebook.progressLoading.finishLoadingProgressFbBootScene(),n.scene.sleep(Sa.C.BOOT_SCENE),e.finish(18);case 22:case"end":return e.stop()}}),e,null,[[0,15,18,22]])}))),n}(0,o.Z)(t,e);var n=t.prototype;return n.create=function(){this.facebook.progressLoading.loadingProgressFbBootScene(),this.startGame()},n.loadingProgressFb=function(){var e=this;try{this.percentProgressFb=30,this.progressFbTimeEvent=this.time.addEvent({delay:50,callback:function(){e.facebook.setLoadingProgress(Math.round(e.percentProgressFb)),e.percentProgressFb+=.3},repeat:100})}catch(t){}},n.finishLoadingProgressFb=function(){try{this.progressFbTimeEvent.remove(),this.registry.set("PercentProgressFb",Math.round(this.percentProgressFb))}catch(e){}},n.configureSentry=function(){var e=this.player.getPlayer();(0,i.Tv)({id:e.playerId,username:e.name})},n.configureRollbar=function(){if(this.rollbar){var e=this.player.getPlayer();this.rollbar.configure({payload:{person:{id:e.playerId,name:e.name}}})}},n.detectGameMode=function(){var e=(0,s.Z)(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.storage.dispatch(function(){var e=(0,s.Z)(h().mark((function e(t,n){var i,a,r,s,o,c,l,u,d,p,f,g,m,v,y,E,A;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n(),r=fa(a),s=window.game.player,o=s.getPlayerId(),c=r.contextId,l=r.entryPointData,d=(u=l||{}).type,p=u.matchId,f=u.playerId,g=u.opponentId,m=void 0===g?ca.playerId:g,v=o===f,y=m===ca.playerId,E=y||me()(i=[m,f]).call(i,o),A=la,e.prev=10,e.next=13,window.game.facebook.getTournamentAsync();case 13:A=da,e.next=18;break;case 16:e.prev=16,e.t0=e.catch(10);case 18:c&&d===ra&&!v&&(A=ua),p&&c&&E&&d===sa&&(A=ua),c&&"matching_group_match"===d&&(A=ha),t(va(A));case 22:case"end":return e.stop()}}),e,null,[[10,16]])})));return function(t,n){return e.apply(this,arguments)}}());case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.initGoogleAnalytics=function(){var e=this.player.getPlayerId();this.analytics.add(new xa(this.game,{userId:e,trackingId:Oa,measuringId:ka,version:"9"}))},t}(Phaser.Scene),Ba=Ra,_a=n(100),Da=n(194),Na=n(19),La=n(38),Ma=n(184),Ga={targets:[],yoyo:!0,repeat:-1,duration:600,repeatDelay:50,ease:n.n(Ma)()(.55,.47,.43,.91),easeParams:[0,.9],props:{scale:{from:1,to:1.2}}},Fa=function(e){function t(t){return e.call(this,Ga,t)||this}return(0,o.Z)(t,e),t}(La.Z),Za=n(597),Ua=n(440),Ya=n(436),Ha=n(437),za=n(435),Wa=n(603),Va=n(439),Ka=n(26),ja=Ka.Z.DEFAULT,Xa=ja.KEY,qa=ja.FRAME,Ja=function(e){function t(t){var n;return(n=e.call(this,t)||this).hand=void 0,n.name="TapTutorialHand",n.addHand(),n.scene.add.existing((0,Na.Z)(n)),n}(0,o.Z)(t,e);var n=t.prototype;return n.addHand=function(){this.hand=this.scene.make.image({key:Xa,frame:qa.ICON_HAND,origin:{x:.5,y:.5}}),this.hand.setWorldSize(65.5,55.5),this.add(this.hand)},n.playAnimation=function(e,t){var n,i=this;void 0===e&&(e=0),void 0===t&&(t=800);var a=1/GameCore.Utils.Image.getImageScale();this.hand.angle=30,null==(n=this.scene)||n.tweens.add({delay:e,targets:[this.hand],ease:Phaser.Math.Easing.Cubic.Out,props:{alpha:{start:0,value:1,duration:200},scale:{duration:400,start:1.6*a,to:1.2*a},angle:{from:30,value:0,duration:400}},onComplete:function(){var e;null==(e=i.scene)||e.tweens.add({targets:[i.hand],delay:200,duration:200,ease:Phaser.Math.Easing.Cubic.Out,props:{alpha:0},onComplete:function(){i.hand.x=0,i.hand.y=0,i.hand.scale=a,i.playAnimation(t)}})}})},n.stopAnimation=function(){this.scene.tweens.killTweensOf(this.hand)},n.preDestroy=function(){this.scene.tweens.killTweensOf(this.hand)},t}(Phaser.GameObjects.Container),Qa=Ja,$a=n(195),er=n(198),tr=n(604),nr=n(605),ir=n(596),ar=n(598),rr=n(196),sr=GameCore.Configs.Network,or=Ka.Z.EFFECTS,cr=or.KEY,lr=or.FRAME,ur=Ka.Z.DEFAULT,hr=ur.KEY,dr=ur.FRAME,pr=function(e){function t(t,n,i,a){var r;return(r=e.call(this,t,n,i,a)||this).rewardValue=void 0,r.onReward=void 0,r.hand=void 0,r.viewAdButton=void 0,r.skipButton=void 0,r.closeButton=void 0,r.giftIcon=void 0,r.giftIconWhite=void 0,r.giftAdsIcon=void 0,r.glowFx=void 0,r.currencyText=void 0,r.popupContents=void 0,r.cometTwinkle=void 0,r.starTwinkleUp=void 0,r.sparksExplosive=void 0,r.popupFadeOutAnimation=void 0,r.backgroundFadeInAnimation=void 0,r.contentShowUpAnimation=void 0,r.giftEntrancesAnimation=void 0,r.giftAttentionAnimation=void 0,r.iconAttentionAnimation=void 0,r.giftShakeAnimation=void 0,r.giftOpenAnimation=void 0,r.adsTimer=void 0,r.open=function(t){e.prototype.open.call((0,Na.Z)(r),t);var n=r.scene.game.globalScene;n instanceof rr.Z&&n.requestBackgroundMaskUpdate(Da.o4.REWARD_SCREEN,.8);var i=r.getData("awardCoins");r.setRewardValue(i),r.runOpenAnimation()},r.handleClosePopup=function(){r.runCloseAnimation()},r.updateCoinData=function(){var e=window.game.player,t=e.getCoins()+r.rewardValue;e.setCustomData("coin",t)},r.handleShowRewardedAd=(0,s.Z)(h().mark((function e(){var t,n,i,a;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.scene,n=t.audio,i=t.game,e.prev=1,r.viewAdButton.setDisabled(!0),i.globalScene.screen.open(Da.o4.NOTIFY_SCREEN,{message:r.scene.lang.Text.LOADING_ADS,duration:0,loading:!0}),window.ignoreResumeMusicOnFocus=!0,n.pauseMusic(),n.stopAllSounds(),n.muteAll(),e.next=10,new(l())((function(e,t){var n;null==(n=r.adsTimer)||n.remove(),r.adsTimer=r.scene.time.delayedCall(sr.Timeout,t),r.scene.ads.getAdStatus(GameCore.Ads.Types.REWARDED)===GameCore.Ads.Status.LOADING?r.scene.ads.events.once(GameCore.Ads.Events.LOADED,e):r.scene.ads.preloadRewardedVideoAsync().then(e).catch(t)}));case 10:return e.next=12,r.scene.ads.showRewardedVideoAsync();case 12:i.globalScene.screen.close(Da.o4.NOTIFY_SCREEN),r.starTwinkleUp.stop(),r.scene.audio.playSound(er.Z.DAILY_REWARD),r.popupContents.killGroup(),r.runTheGiftEntrancesAnimation(0,1500),e.next=26;break;case 19:if(e.prev=19,e.t0=e.catch(1),!(e.t0 instanceof Object&&GameCore.Utils.Object.hasOwn(e.t0,"code"))){e.next=25;break}if("USER_INPUT"!==e.t0.code){e.next=25;break}return r.showNotifySkipAd(),e.abrupt("return");case 25:r.showNotifyNoAd();case 26:return e.prev=26,window.ignoreResumeMusicOnFocus=!1,r.scene.ads.preloadRewardedVideoAsync().catch((function(){})),null==(a=r.adsTimer)||a.destroy(),n.unmuteAll(),n.playMusic(),r.viewAdButton.setDisabled(!1),e.finish(26);case 34:case"end":return e.stop()}}),e,null,[[1,19,26,34]])}))),r.handleTheGiftClick=function(){r.setTheGiftClickable(!1),r.logButtonEvent("OpenGift"),r.hand.kill(),r.giftIconWhite.revive(),r.scene.tweens.killTweensOf(r.giftIcon),Phaser.Display.Align.In.Center(r.giftIconWhite,r.giftIcon),r.scene.audio.playSound(er.Z.GIFT_CHARGE),r.runShakeTheGift(),r.runOpenTheGift()},r.showNotifyNoAd=function(){r.scene.game.globalScene.screen.open(Da.o4.NOTIFY_SCREEN,{message:r.scene.lang.Text.NO_ADS,duration:1200,loading:!1})},r.runCloseAnimation=function(){r.runExitsAnimation(0,200)},r.setDepth(Da.Ks.POPUP),r.background.setAlpha(.8),r.createCloseButton(),r.createViewAdsButton(),r.createSkipButton(),r.createGiftGlow(),r.createGiftAdsIcon(),r.createCurrencyText(),r.createEffects(),r.createGiftIcon(),r.createHand(),r.createContentsGroup(),r}(0,o.Z)(t,e);var n=t.prototype;return n.setTheGiftClickable=function(e){e?this.giftIcon.setInteractive():this.giftIcon.disableInteractive()},n.logButtonEvent=function(e){var t=this.getScreenName();this.scene.analytics.event(Ht._.BUTTON_CLICK,{button_name:e,screen_name:t})},n.showNotifySkipAd=function(){this.scene.game.globalScene.screen.open(Da.o4.NOTIFY_SCREEN,{message:this.scene.lang.Text.SORRY_NO_REWARDS,duration:1500,loading:!1})},n.runOpenAnimation=function(){this.revive(),this.hand.kill(),this.popupContents.reviveGroup(),this.starTwinkleUp.stop(),this.runBackgroundEntrancesAnimation(0,200),this.runPopupContentEntrancesAnimation(100,400),this.runLogoAttentionAnimation(500)},n.runBackgroundEntrancesAnimation=function(e,t){var n=this;if(!this.backgroundFadeInAnimation){var i=this.scene.game.globalScene;this.backgroundFadeInAnimation=new Ya.Z({targets:[this.background],delay:e,duration:t,props:{alpha:{start:0,to:.8}},onUpdate:function(){var e=n.background.alpha;i instanceof rr.Z&&i.requestBackgroundMaskUpdate(Da.o4.REWARD_SCREEN,e)}})}this.backgroundFadeInAnimation.play()},n.runPopupContentEntrancesAnimation=function(e,t){var n;null==(n=this.contentShowUpAnimation)||n.remove(),this.contentShowUpAnimation=new za.Z({targets:this.popupContents.getChildren(),duration:t,delay:this.scene.tweens.stagger(100,{start:e}),props:{scale:{getStart:function(e){return e.scale-.3},getEnd:function(e){return e.scale}},alpha:{start:0,from:0,to:1}}}),this.contentShowUpAnimation.play()},n.runLogoAttentionAnimation=function(e){var t=this.giftAdsIcon,n=t.x,i=t.y,a=t.width,r=t.height;this.starTwinkleUp.run(1,n,i,a,r),this.iconAttentionAnimation||(this.iconAttentionAnimation=new Fa({targets:[this.giftAdsIcon],delay:e,props:{scale:"+=0.05"}})),this.iconAttentionAnimation.play()},n.runTheGiftEntrancesAnimation=function(e,t){var n,i=this;this.giftIcon.revive(),this.giftIcon.setAlpha(1),Phaser.Display.Align.In.TopRight(this.giftIcon,this.zone),null==(n=this.giftEntrancesAnimation)||n.remove();var a=this.giftIcon,r=a.x,s=a.y,o=this.giftIconWhite,c={x:r,y:s},l={x:o.x,y:o.y},u=1/GameCore.Utils.Image.getImageScale();this.giftEntrancesAnimation=new Wa.Z({targets:[this.giftIcon],delay:e,duration:t,curve:[[c.x,c.y],[c.x-80,c.y+80],[l.x,l.y]],props:{scale:{start:.5*u,to:u},angle:{start:20,to:0}},onCurveUpdate:function(e){var t=e.x+Phaser.Math.RND.between(-40,40),n=e.y+Phaser.Math.RND.between(-40,40);i.cometTwinkle.explode(1,t,n)},onComplete:function(){i.scene.audio.playSound(er.Z.GIFT_REVEAL);i.starTwinkleUp.setScale(1.5);var e=i.giftIcon,t=e.x,n=e.y,a=e.width,r=e.height;i.starTwinkleUp.run(1,t,n,a/1.5,r/1.5),i.moveTo(i.starTwinkleUp,i.length-1),i.handleTheGiftClick()}}),this.giftEntrancesAnimation.play()},n.runTheGiftAttentionAnimation=function(){this.giftAttentionAnimation||(this.giftAttentionAnimation=new Fa({targets:[this.giftIcon],props:{scale:"+=0.05"}})),this.hand.revive(),this.hand.playAnimation(),Phaser.Display.Align.In.Center(this.hand,this.giftIcon,20,20),this.setTheGiftClickable(!0),this.giftAttentionAnimation.play()},n.runShakeTheGift=function(){this.giftShakeAnimation||(this.giftShakeAnimation=new Za.Z({targets:[this.giftIcon,this.giftIconWhite],duration:22})),this.giftShakeAnimation.play()},n.runOpenTheGift=function(){var e=this;if(!this.giftOpenAnimation){var t=1/GameCore.Utils.Image.getImageScale();this.giftOpenAnimation=new Ua.Z({targets:[this.giftIcon,this.giftIconWhite],duration:1500,props:{alpha:0,scale:t},onStart:this.updateCoinData,onUpdate:function(){e.giftIconWhite.setAlpha(1)},onComplete:function(){e.giftShakeAnimation.stop(),e.giftIcon.kill(),e.giftIconWhite.kill(),e.sparksExplosive.explode(100,e.giftIcon.x,e.giftIcon.y,230),e.scene.audio.playSound(er.Z.GIFT_EXPLODE),e.onReward(e.rewardValue),e.scene.time.delayedCall(500,e.runCloseAnimation)}})}this.giftOpenAnimation.play()},n.runExitsAnimation=function(e,t){var n=this;if(!this.popupFadeOutAnimation){var i=this.scene.game.globalScene;this.popupFadeOutAnimation=new Ha.Z({targets:this.getAll(),delay:e,duration:t,props:{alpha:{start:.8,to:0}},onUpdate:function(){var e=n.background.alpha;i instanceof rr.Z&&i.requestBackgroundMaskUpdate(Da.o4.REWARD_SCREEN,e)},onComplete:function(){n.scene.screen.close(n.name);var e=n.scene.game.globalScene;e instanceof rr.Z&&e.requestBackgroundMaskUpdate(Da.o4.REWARD_SCREEN,0)}})}this.popupFadeOutAnimation.play()},n.createHand=function(){this.hand=new Qa(this.scene),this.add(this.hand)},n.createContentsGroup=function(){this.popupContents=this.scene.make.group({}),this.popupContents.addMultiple([this.glowFx,this.giftAdsIcon,this.currencyText,this.viewAdButton,this.skipButton,this.closeButton])},n.createGiftAdsIcon=function(){this.giftAdsIcon=this.scene.add.image(0,0,hr,dr.LOGO_GIFT_ADS),this.giftAdsIcon.setWorldSize(110,135.5),Phaser.Display.Align.In.Center(this.giftAdsIcon,this.zone,0,-80),this.add(this.giftAdsIcon)},n.createGiftGlow=function(){this.glowFx=this.scene.add.image(0,0,cr,lr.FX_GLOW_LIGHT),this.glowFx.setWorldSize(206,199.5),Phaser.Display.Align.In.Center(this.glowFx,this.zone,0,-80),this.add(this.glowFx),this.scene.tweens.add({targets:[this.glowFx],duration:6e3,repeat:-1,props:{angle:360,scale:{value:"+=0.01",yoyo:!0,duration:800,ease:Phaser.Math.Easing.Sine.InOut}}})},n.createCurrencyText=function(){this.currencyText=this.scene.make.bitmapText({size:this.scene.fontSize(28),font:$a.Z.PRIMARY.KEY,origin:{x:.5,y:.5}}),this.currencyText.setCenterAlign(),this.setRewardValue(0),this.add(this.currencyText)},n.setRewardValue=function(e){this.rewardValue=e,this.currencyText.setText(this.scene.lang.getText({key:"WATCH_A_VIDEO_X",variables:[e]})),Phaser.Display.Align.In.BottomCenter(this.currencyText,this.giftAdsIcon,0,90)},n.createViewAdsButton=function(){this.viewAdButton=new Va.Z(this.scene,hr,dr.BUTTON_BLUE,134,68),this.viewAdButton.setName("ViewAd"),this.viewAdButton.onClick=this.handleShowRewardedAd;var e=this.scene.make.bitmapText({size:this.scene.fontSize(16),text:this.scene.lang.Text.GET_NOW,font:$a.Z.PRIMARY.KEY}),t=this.scene.make.image({key:hr,frame:dr.ICON_ADS_VIDEO});t.setWorldSize(36,28),this.viewAdButton.add([e,t]),this.add(this.viewAdButton),Phaser.Display.Align.In.Center(e,this.viewAdButton,16),Phaser.Display.Align.In.Center(t,this.viewAdButton,-36),Phaser.Display.Align.In.Center(this.viewAdButton,this.zone,0,130)},n.createCloseButton=function(){this.closeButton=new ar.Z(this.scene,{key:hr,frame:dr.BUTTON_CLOSE,width:48.5,height:43,paddingZone:20}),this.closeButton.setName("Close"),this.closeButton.onClick=this.handleClosePopup,Phaser.Display.Align.In.TopRight(this.closeButton,this.zone,-15,-15),this.add(this.closeButton)},n.createSkipButton=function(){var e=this.scene.lang.getCurrentLanguage(),t="ru"===e?130.5:97.5,n="ru"===e?20.5:21.5;this.skipButton=new Va.Z(this.scene,hr,this.scene.lang.Texture.NO_THANKS,t,n),this.skipButton.setName("NoThanks"),this.skipButton.onClick=this.handleClosePopup,Phaser.Display.Align.In.BottomCenter(this.skipButton,this.viewAdButton,0,35),this.add(this.skipButton)},n.createGiftIcon=function(){this.giftIconWhite=this.scene.make.image({key:hr,frame:dr.LOGO_GIFT_GLOW,visible:!1}),this.giftIconWhite.setWorldSize(114,146.5),this.giftIconWhite.setDepth(_a.Z.PRIORITY),this.add(this.giftIconWhite),this.giftIcon=this.scene.make.image({key:hr,frame:dr.LOGO_GIFT,visible:!1}),this.giftIcon.setInteractive({useHandCursor:!0}),this.giftIcon.setWorldSize(114,146.5),this.giftIcon.on(Phaser.Input.Events.GAMEOBJECT_POINTER_DOWN,this.handleTheGiftClick),this.setTheGiftClickable(!1),this.add(this.giftIcon)},n.createEffects=function(){this.cometTwinkle=new tr.Z(this.scene),this.starTwinkleUp=new ir.Z(this.scene),this.sparksExplosive=new nr.Z(this.scene),this.add([this.cometTwinkle,this.starTwinkleUp,this.sparksExplosive])},t}(GameCore.Screen),fr=pr,gr={COLLECT_EGGS:{ID:"collect-eggs",EVENTS:{COLLECT_EGGS:"collect-eggs"}},SHOOT_FLYING_EGG:{ID:"shoot-flying-eggs",EVENTS:{SHOOT_FLYING_EGG:"shoot-flying-eggs"}},REACH_TARGET_POINTS:{ID:"reach-target-points",EVENTS:{REACH_TARGET_POINTS:"reach-target-points"}},GET_DINOMITE_COMBO:{ID:"get-dinomite-combo",EVENTS:{GET_DINOMITE_COMBO:"get-dinomite-combo"}},USE_RESCUE:{ID:"use-rescue",EVENTS:{USE_RESCUE:"use-rescue"}},INVITE_FRIENDS:{ID:"invite-friends",EVENTS:{INVITED_FRIEND:"INVITED_FRIEND"}},COMPLETE_GAMES:{ID:"complete-games",EVENTS:{COMPLETE_GAME:"complete-game"}},EVENTS:{TASKS_RESET:"tasks-reset",NOTICE_UPDATE:"notice-update"}},mr=n(67),vr=n.n(mr),yr=n(126),Er="global",Ar="friend",Sr=GameCore.Configs,br=Sr.ApiHost,Tr=Sr.OtherHost,wr=Sr.LeadersBoard,Cr=wr.Prefix,Ir=wr.LeaderboardId,Pr=wr.Name,xr=Cr+"/"+Ir+"/leaders",kr=Cr+"/"+Ir+"/players",Or=function(e){var t="";return Ir?(e===Er?t=xr:e===Ar&&(t=kr),t):t},Rr=function(){var e=(0,s.Z)(h().mark((function e(t){var n,i,a,s,o,c;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Ie()(t).call(t,(function(e){return e.playerId})),a=GameCore.Utils.Object.keyBy(t,"playerId"),s=GameCore.Utils.String.params({playerIds:i}),e.next=5,(0,Ge.U)("players?"+s,{},br);case 5:return o=e.sent,c=Ie()(n=o.data).call(n,(function(e){var t=a[e.playerId];return(0,r.Z)({},e,{score:t.score,rank:t.rank,getScore:function(){return t.score},getFormattedScore:function(){return""},getTimestamp:function(){return(new Date).valueOf()},getRank:function(){return t.rank},getExtraData:function(){return t.extraData},getPlayer:function(){return{getName:function(){return e.name},getPhoto:function(){return e.photo},getID:function(){return e.playerId}}}})})),e.abrupt("return",c);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Br=function(){var e=(0,s.Z)(h().mark((function e(t){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===t&&(t={}),null==Ir){e.next=3;break}return e.abrupt("return",_r(t));case 3:return e.abrupt("return",Dr(t));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),_r=function(){var e=(0,s.Z)(h().mark((function e(t){var n,i,a,r,s;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===t&&(t={}),n=[],i=Or(Er)){e.next=5;break}return e.abrupt("return",n);case 5:return a=GameCore.Utils.String.params(t),e.next=8,(0,Ge.U)(i+"?"+a,{},Tr);case 8:if(r=e.sent,!((s=(null==r?void 0:r.data)||[]).length<1)){e.next=12;break}return e.abrupt("return",n);case 12:return n=s,e.abrupt("return",Rr(n));case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Dr=function(){var e=(0,s.Z)(h().mark((function e(t){var n,i,a,r,s;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return void 0===t&&(t={}),i=(n=t).limit,a=n.offset,e.next=4,window.GameSDK.getLeaderboardAsync(Pr);case 4:return r=e.sent,e.next=7,r.getEntriesAsync(i,a);case 7:return s=e.sent,e.abrupt("return",s);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Nr=function(){var e=(0,s.Z)(h().mark((function e(t){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===t&&(t={}),null==Ir){e.next=3;break}return e.abrupt("return",Lr(t));case 3:return e.abrupt("return",Mr(t));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Lr=function(){var e=(0,s.Z)(h().mark((function e(t){var n,i,a,r,s;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===t&&(t={}),n=[],i=Or(Ar)){e.next=5;break}return e.abrupt("return",n);case 5:return a=GameCore.Utils.String.params(t),e.next=8,(0,Ge.U)(i+"?"+a,{},Tr);case 8:if(r=e.sent,!((s=(null==r?void 0:r.data)||[]).length<1)){e.next=12;break}return e.abrupt("return",n);case 12:return n=s,e.abrupt("return",Rr(n));case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Mr=function(){var e=(0,s.Z)(h().mark((function e(t){var n,i,a,r,s;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return void 0===t&&(t={}),i=(n=t).limit,a=n.offset,e.next=4,window.GameSDK.getLeaderboardAsync(Pr);case 4:return r=e.sent,e.next=7,r.getConnectedPlayerEntriesAsync(i,a);case 7:return s=e.sent,e.abrupt("return",s);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Gr=function(){var e=(0,s.Z)(h().mark((function e(t){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==Ir){e.next=2;break}return e.abrupt("return",Fr(t));case 2:return e.abrupt("return",Zr());case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Fr=function(){var e=(0,s.Z)(h().mark((function e(t){var n,i,a,r,s;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=null,t){e.next=3;break}return e.abrupt("return",n);case 3:if(i=Or(Ar)){e.next=6;break}return e.abrupt("return",n);case 6:return a=GameCore.Utils.String.params({playerIds:t}),e.next=9,(0,Ge.U)(i+"?"+a,{},Tr);case 9:if(r=e.sent,!((s=(null==r?void 0:r.data)||[]).length<1)){e.next=13;break}return e.abrupt("return",n);case 13:return e.next=15,Rr(s);case 15:return n=e.sent[0],e.abrupt("return",n);case 17:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Zr=function(){var e=(0,s.Z)(h().mark((function e(){var t,n;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,window.GameSDK.getLeaderboardAsync(Pr);case 2:return t=e.sent,e.next=5,t.getPlayerEntryAsync();case 5:return n=e.sent,e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Ur=function(){var e=(0,s.Z)(h().mark((function e(t,n){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(window.GameSDK.submitGameResultsAsync(n).catch((function(e){})),null==Ir){e.next=5;break}if(""!==window.game.auth.getToken()){e.next=4;break}return e.abrupt("return",l().reject("Not logged in"));case 4:return e.abrupt("return",Yr(t,n));case 5:return e.abrupt("return",Hr(n));case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),Yr=function(){var e=(0,s.Z)(h().mark((function e(t,n){var i;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,Ge.v)("leaderboards/"+Ir+"/players/"+t,{score:n},{},Tr);case 2:return i=e.sent,e.abrupt("return",(null==i?void 0:i.data)||{});case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),Hr=function(){var e=(0,s.Z)(h().mark((function e(t){var n;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,window.GameSDK.getLeaderboardAsync(Pr);case 2:return n=e.sent,e.next=5,n.setScoreAsync(t);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();function zr(e,t){var n="undefined"!==typeof T()&&C()(e)||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){var n;if(!e)return;if("string"===typeof e)return Wr(e,t);var i=E()(n=Object.prototype.toString.call(e)).call(n,8,-1);"Object"===i&&e.constructor&&(i=e.constructor.name);if("Map"===i||"Set"===i)return S()(e);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return Wr(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var i=0;return function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Wr(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var Vr=GameCore.Configs.LeadersBoard,Kr=Vr.UseMock,jr=Vr.Limit,Xr=Vr.MockOptions,qr=function(e,t,n,a){return void 0===n&&(n=jr),void 0===a&&(a=0),function(){var r=(0,s.Z)(h().mark((function r(s){var o,c,l,u,d,p,f,g,m,v,y,E,A,S,b,T,w,C;return h().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(r.prev=0,o=window.game.player,c=o.getPlayerId(),s(Qr()),s({type:fi,payload:{leaderboardId:e,type:t,limit:n,offset:a}}),!Kr){r.next=11;break}return r.next=8,(0,yr.qZ)(1e3);case 8:return d=Ie()(l=vr()(u=new Array(n)).call(u,null)).call(l,(function(e,t){var n=(t+1)*(a+1),i=Xr.PlayerEntryIndex===t,r={playerId:"0"+n,name:"MPlayer "+n,photo:"./assets/images/others/avatar.png",rank:n,score:Math.floor(1e5/n)};if(i){var s=window.game.player.getPlayer(),o=s.playerId,c=s.name,l=s.photo;r.playerId=o,r.name=c,r.photo=l}return r})),s(Jr(d,t)),r.abrupt("return");case 11:if(p=[],t!==Er){r.next=18;break}return r.next=15,Br({limit:n,offset:a});case 15:p=r.sent,r.next=26;break;case 18:if(t!==Ar){r.next=26;break}return(f=o.getConnectedPlayerIds(n,a)).push(c),g=GameCore.Utils.Array.unique(f),r.next=24,Nr({playerIds:g,limit:g.length});case 24:p=r.sent,g.forEach((function(e){var t=we()(p).call(p,(function(t){return t.playerId===e}));t&&0!==t.length||p.push({playerId:e,score:0})}));case 26:for(m={},v=zr(p);!(y=v()).done;)E=y.value,A=E.playerId,S=E.score,b=E.rank,T=E.getPlayer(),w=T.getPhoto(),C=T.getName(),m[A]={playerId:A,name:C,photo:w,score:S,rank:b};s(Jr(m,t)),r.next=36;break;case 32:r.prev=32,r.t0=r.catch(0),s(Jr([],t)),(0,i.tO)(r.t0);case 36:case"end":return r.stop()}}),r,null,[[0,32]])})));return function(e){return r.apply(this,arguments)}}()},Jr=function(e,t){return{type:gi,payload:{leaders:e,type:t}}},Qr=function(){return{type:mi,payload:{}}},$r=function(e){return e[li]},es=((0,re.P1)([function(e){return $r(e).leaderboardId}],(function(e){return e})),(0,re.P1)([function(e){return $r(e).leaders}],(function(e){return e}))),ts=(0,re.P1)([function(e){return $r(e).isRequesting}],(function(e){return e})),ns=function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).name="InvalidContextId",i.message=t||"This contextId is not valid",i.payload=n,i}return(0,o.Z)(t,e),t}((0,F.Z)(Error)),is=ns,as=function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).name="NewScoreIsBad",i.message=t||"The new score is bad",i.payload=n,i}return(0,o.Z)(t,e),t}((0,F.Z)(Error)),rs=as,ss=function(e){return e[wn]},os=(0,re.P1)([function(e){return ss(e).gameplay.mode}],(function(e){return e})),cs=((0,re.P1)([function(e){return ss(e).gameplay.status}],(function(e){return e})),(0,re.P1)([function(e){return ss(e).gameplay.rescued}],(function(e){return e})),(0,re.P1)([function(e){return ss(e).gameplay.startAt}],(function(e){return e}))),ls=(0,re.P1)([function(e){return ss(e).gameplay.finishAt}],(function(e){return e})),us=n(593),hs=GameCore.Configs.Tournament.UseLeaderboard,ds=function(e){return{type:ai,payload:{tournamentId:e}}},ps=function(e){return{type:si,payload:{score:e}}},fs=function(){var e=(0,s.Z)(h().mark((function e(t){var n,a,r,s,o,c,l,u,d,p;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=window.game.facebook,a=t.playerId,r=t.playerName,s=t.score,o=t.autoStartGame,c=r+"'s Tournament",l=GameCore.Utils.String.generateObjectId(),u={playerId:a,playerName:r,leaderboardId:l},e.next=8,n.createTournamentAsync(s,u);case 8:return d=e.sent,p=d.getID(),o&&(window.game.storage.dispatch(ds(p)),window.game.storage.dispatch(wo())),e.next=13,(0,us.Z5)({_id:l,createdBy:a,name:p,description:c,expireTime:6048e5});case 13:if(e.sent._id!==l){e.next=17;break}return e.next=17,(0,us.aV)(l,a,s);case 17:e.next=24;break;case 19:if(e.prev=19,e.t0=e.catch(0),"INVALID_OPERATION"!==(null==e.t0?void 0:e.t0.code)){e.next=23;break}throw new Error("Tournament is not available");case 23:(0,i.tO)(e.t0);case 24:case"end":return e.stop()}}),e,null,[[0,19]])})));return function(t){return e.apply(this,arguments)}}(),gs=function(){var e=(0,s.Z)(h().mark((function e(t){var n,i,a,r,s,o,c;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=window.game,i=n.facebook,a=n.player,e.next=3,ms();case 3:return r=e.sent,s=a.getPlayer(),o=s.playerId,c=s.name,r&&(0,us.aV)(r,o,t),e.next=8,i.tournament.shareAsync({score:t,data:{type:"tournament",playerId:o,playerName:c}});case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ms=function(){var e=(0,s.Z)(h().mark((function e(){var t,n,i;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=window.game.facebook,e.next=4,t.getTournamentAsync();case 4:return n=e.sent,i=JSON.parse(n.getPayload()||"{}"),e.abrupt("return",i.leaderboardId);case 9:return e.prev=9,e.t0=e.catch(0),e.abrupt("return",null);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}(),vs=function(e){return function(){var t=(0,s.Z)(h().mark((function t(n,i){var a,r,s;return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=i(),s=os(r),me()(a=[la,da]).call(a,s)){t.next=4;break}return t.abrupt("return");case 4:if(n({type:ri,payload:{}}),!hs){t.next=10;break}return t.next=8,ys(e);case 8:t.next=12;break;case 10:return t.next=12,Es(e);case 12:n(ps(e));case 13:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()},ys=function(){var e=(0,s.Z)(h().mark((function e(t){var n,i,a,r,s,o,c;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=window.game,i=n.player,a=n.facebook,r=i.getPlayer(),s=r.playerId,o=r.name,e.prev=2,e.next=5,a.getTournamentAsync();case 5:return e.next=7,gs(t);case 7:e.next=15;break;case 9:if(e.prev=9,e.t0=e.catch(2),"TOURNAMENT_NOT_FOUND"!==e.t0.code){e.next=15;break}return c={playerId:s,playerName:o,score:t,autoStartGame:!1},e.next=15,fs(c);case 15:return e.prev=15,e.finish(15);case 17:case"end":return e.stop()}}),e,null,[[2,9,15,17]])})));return function(t){return e.apply(this,arguments)}}(),Es=function(){var e=(0,s.Z)(h().mark((function e(t){var n,i,a,r;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=window.game,i=n.player,a=n.facebook,r=i.getBestScore(),e.prev=2,e.next=5,a.getTournamentAsync();case 5:if(!(t>r||Math.random()<1)){e.next=11;break}return e.next=9,a.tournament.shareAsync({score:t});case 9:e.next=13;break;case 11:return e.next=13,a.tournament.postScoreAsync(t);case 13:e.next=23;break;case 15:if(e.prev=15,e.t0=e.catch(2),"TOURNAMENT_NOT_FOUND"!==e.t0.code){e.next=23;break}if(t>r||Math.random()<.33){e.next=21;break}return e.abrupt("return");case 21:return e.next=23,a.createTournamentAsync(t);case 23:case"end":return e.stop()}}),e,null,[[2,15]])})));return function(t){return e.apply(this,arguments)}}(),As=(0,re.P1)([function(e){return e.friendChallenge.friendListChallenged}],(function(e){return e})),Ss=function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).name="InvalidMatchId",i.message=t||"Invalid match id",i.payload=n,i}return(0,o.Z)(t,e),t}((0,F.Z)(Error)),bs=Ss,Ts=function(e,t){return t.playerId},ws=((0,re.P1)([function(e){return ss(e).match.isAutoStartSingleMode}],(function(e){return e})),(0,re.P1)([function(e){return ss(e).match.isRequesting}],(function(e){return e})),(0,re.P1)([function(e){return ss(e).match.single}],(function(e){return e}))),Cs=(0,re.P1)([function(e){return ss(e).match.single._id}],(function(e){return e})),Is=(0,re.P1)([function(e){return ss(e).match.single.score}],(function(e){return e||0})),Ps=((0,re.P1)([function(e){return ss(e).match.single.level}],(function(e){return e||0})),(0,re.P1)([function(e){var t;return null==(t=ss(e).match.single.data)?void 0:t.diamond}],(function(e){return e||0})),(0,re.P1)([function(e){var t;return null==(t=ss(e).match.single.data)?void 0:t.fen}],(function(e){return e||null})),(0,re.P1)([function(e){return ss(e).match.single.status}],(function(e){return e})),(0,re.P1)([function(e){return ss(e).match.single.playerId}],(function(e){return e})),(0,re.P1)([function(e){return ss(e).match.challenge}],(function(e){return e}))),xs=(0,re.P1)([function(e){return ss(e).match.challenge._id}],(function(e){return e})),ks=(0,re.P1)([function(e){return ss(e).match.challenge.status}],(function(e){return e})),Os=(0,re.P1)([function(e){return ss(e).match.challenge.opponentInfo}],(function(e){return e})),Rs=((0,re.P1)([function(e){return ss(e).match.challenge.whitePlayerId}],(function(e){return e})),(0,re.P1)([function(e){return ss(e).match.challenge.blackPlayerId}],(function(e){return e})),(0,re.P1)([Ps,Ts],(function(e,t){var n=e.whitePlayerId,i=e.blackPlayerId;return n!==t&&i===t?n:i!==t&&n===t?i:""})),(0,re.P1)([Ps,Ts],(function(e,t){var n=e.whitePlayerId,i=e.blackPlayerId;return n===t?n:i===t?i:ca.playerId}))),Bs=(0,re.P1)([Ps,Ts],(function(e,t){var n=e.whitePlayerId,i=e.blackPlayerId,a=e.whitePlayerFinish,r=e.blackPlayerFinish;return t&&n===t?a:!(!t||i!==t)&&r})),_s=(0,re.P1)([Ps,function(e,t){return t.opponentId}],(function(e,t){var n=e.whitePlayerId,i=e.blackPlayerId,a=e.whitePlayerFinish,r=e.blackPlayerFinish;return t&&n===t?a:!(!t||i!==t)&&r})),Ds=(0,re.P1)([function(e){return ss(e).match.group.opponentInfo}],(function(e){return e})),Ns=(0,re.P1)([function(e){return ss(e).match.online.players}],(function(e){return e})),Ls=(0,re.P1)([function(e){return ss(e).stats.data}],(function(e){return e})),Ms=(0,re.P1)([function(e){return ss(e).stats.current}],(function(e){return e})),Gs=((0,re.P1)([function(e){return ss(e).stats.isRequesting}],(function(e){return e})),JSON.parse('[{"playerId":"38","gender":"female","name":"Loretta Cooper","difficult":1.5},{"playerId":"10","gender":"female","name":"Alice Wilson","difficult":1.1},{"playerId":"42","gender":"female","name":"Myrtie Mathis","difficult":1.2},{"playerId":"15","gender":"female","name":"Rosa Estrada","difficult":1.3},{"playerId":"9","gender":"male","name":"Dylan Riley","difficult":0.8},{"playerId":"29","gender":"male","name":"Joe Robinson","difficult":1.4},{"playerId":"5","gender":"male","name":"Roger McBride","difficult":0.7},{"playerId":"22","gender":"male","name":"Lester Reeves","difficult":0.3},{"playerId":"21","gender":"female","name":"Eva Guzman","difficult":1.2},{"playerId":"6","gender":"female","name":"Lelia Erickson","difficult":1.3},{"playerId":"47","gender":"male","name":"Dean Holloway","difficult":0.8},{"playerId":"4","gender":"female","name":"Amelia Freeman","difficult":1.1},{"playerId":"11","gender":"female","name":"Viola Ferguson","difficult":1},{"playerId":"72","gender":"male","name":"Todd Garner","difficult":0.7},{"playerId":"28","gender":"female","name":"Matilda Harris","difficult":0.6},{"playerId":"14","gender":"male","name":"Alex Hart","difficult":0.3},{"playerId":"64","gender":"male","name":"Ethan Gilbert","difficult":1.3},{"playerId":"67","gender":"male","name":"Gordon Craig","difficult":1.2},{"playerId":"25","gender":"female","name":"Nora Munoz","difficult":1.1},{"playerId":"36","gender":"female","name":"Dora Herrera","difficult":0.6},{"playerId":"43","gender":"female","name":"Lida Roberts","difficult":0.6},{"playerId":"71","gender":"male","name":"Kenneth Holland","difficult":0.3},{"playerId":"38","gender":"male","name":"Russell McGee","difficult":0.7},{"playerId":"27","gender":"female","name":"Etta Miller","difficult":0.6},{"playerId":"45","gender":"female","name":"Abbie Weber","difficult":1.5},{"playerId":"47","gender":"female","name":"Etta Ryan","difficult":0.9},{"playerId":"69","gender":"male","name":"Christian Tran","difficult":0.5},{"playerId":"20","gender":"female","name":"Victoria Rivera","difficult":0.6},{"playerId":"48","gender":"female","name":"Blanche Bowen","difficult":0.9},{"playerId":"50","gender":"female","name":"Stella Montgomery","difficult":0.5},{"playerId":"46","gender":"male","name":"James Buchanan","difficult":1.3},{"playerId":"26","gender":"female","name":"Lola Massey","difficult":1.4},{"playerId":"28","gender":"male","name":"Fred Sutton","difficult":0.7},{"playerId":"60","gender":"female","name":"Victoria Munoz","difficult":0.7},{"playerId":"13","gender":"female","name":"Lois Powell","difficult":1.6},{"playerId":"10","gender":"male","name":"Oscar Houston","difficult":1.6},{"playerId":"61","gender":"male","name":"Alfred Ramos","difficult":1.3},{"playerId":"55","gender":"female","name":"Jean Johnson","difficult":1.1},{"playerId":"4","gender":"male","name":"Alejandro Hernandez","difficult":0.6},{"playerId":"44","gender":"male","name":"Tony Powers","difficult":1.5},{"playerId":"21","gender":"male","name":"Jesus Norton","difficult":0.7},{"playerId":"70","gender":"male","name":"Clyde Wagner","difficult":1.2},{"playerId":"8","gender":"male","name":"Connor Santiago","difficult":1},{"playerId":"17","gender":"male","name":"Douglas Miller","difficult":1.5},{"playerId":"46","gender":"female","name":"Bernice Pearson","difficult":1.3},{"playerId":"23","gender":"male","name":"Christopher Ortiz","difficult":1.3},{"playerId":"50","gender":"male","name":"Travis Buchanan","difficult":0.5},{"playerId":"20","gender":"male","name":"Fred Cannon","difficult":0.3},{"playerId":"16","gender":"male","name":"Charles Perry","difficult":0.9},{"playerId":"23","gender":"female","name":"Etta Herrera","difficult":1.5},{"playerId":"40","gender":"male","name":"Sean Salazar","difficult":1.3},{"playerId":"57","gender":"female","name":"Lura Hammond","difficult":1.3},{"playerId":"39","gender":"female","name":"Adelaide Douglas","difficult":0.4},{"playerId":"5","gender":"female","name":"Alma Stephens","difficult":1.2},{"playerId":"37","gender":"male","name":"Luke Thornton","difficult":0.7},{"playerId":"6","gender":"male","name":"Isaac Hansen","difficult":1.2},{"playerId":"24","gender":"male","name":"Antonio Massey","difficult":0.5},{"playerId":"29","gender":"female","name":"Caroline McKinney","difficult":1.3},{"playerId":"34","gender":"male","name":"Bobby Stevenson","difficult":0.9},{"playerId":"16","gender":"female","name":"Mildred King","difficult":0.5},{"playerId":"7","gender":"male","name":"Bradley Malone","difficult":0.5},{"playerId":"2","gender":"male","name":"Calvin Patton","difficult":1.5},{"playerId":"45","gender":"male","name":"Edgar Vargas","difficult":1.5},{"playerId":"42","gender":"male","name":"Alfred Wheeler","difficult":1.7},{"playerId":"48","gender":"male","name":"Anthony Watson","difficult":0.4},{"playerId":"27","gender":"male","name":"Harry Reese","difficult":1.6},{"playerId":"33","gender":"female","name":"Rosetta Reyes","difficult":1},{"playerId":"63","gender":"male","name":"Russell Murphy","difficult":0.7},{"playerId":"59","gender":"female","name":"Louisa Hall","difficult":0.8},{"playerId":"56","gender":"female","name":"Christina Hawkins","difficult":1.4},{"playerId":"52","gender":"male","name":"Jeremy Wilkins","difficult":1.3},{"playerId":"41","gender":"male","name":"Tyler Owens","difficult":0.6},{"playerId":"39","gender":"male","name":"Christopher Baldwin","difficult":0.6},{"playerId":"18","gender":"male","name":"Clayton Sanchez","difficult":0.5},{"playerId":"13","gender":"male","name":"Thomas Strickland","difficult":1.2},{"playerId":"68","gender":"male","name":"Herbert Hayes","difficult":0.5},{"playerId":"24","gender":"female","name":"Christine Beck","difficult":1.5},{"playerId":"31","gender":"male","name":"Alan McCarthy","difficult":0.6},{"playerId":"19","gender":"female","name":"Georgie Logan","difficult":0.6},{"playerId":"62","gender":"male","name":"Herbert Bass","difficult":0.9},{"playerId":"56","gender":"male","name":"Danny Drake","difficult":1.4},{"playerId":"12","gender":"male","name":"Mike Burton","difficult":1.5},{"playerId":"60","gender":"male","name":"Lester Thomas","difficult":0.4},{"playerId":"44","gender":"female","name":"Lina Matthews","difficult":1.1},{"playerId":"31","gender":"female","name":"Myrtie Holloway","difficult":1.8},{"playerId":"49","gender":"female","name":"Nell Burns","difficult":1},{"playerId":"33","gender":"male","name":"Trevor Gonzalez","difficult":0.6},{"playerId":"58","gender":"male","name":"Harvey Munoz","difficult":1.7},{"playerId":"37","gender":"female","name":"Eula Griffin","difficult":1.2},{"playerId":"8","gender":"female","name":"Hattie Becker","difficult":1.5},{"playerId":"54","gender":"female","name":"Alma Howard","difficult":1.2},{"playerId":"19","gender":"male","name":"Mitchell Bishop","difficult":1.1},{"playerId":"58","gender":"female","name":"Maude Burgess","difficult":1.4},{"playerId":"34","gender":"female","name":"Eula Copeland","difficult":1.3},{"playerId":"32","gender":"male","name":"Carl Wolfe","difficult":1},{"playerId":"35","gender":"male","name":"Kenneth McKinney","difficult":0.9},{"playerId":"41","gender":"female","name":"Caroline Morris","difficult":1},{"playerId":"1","gender":"male","name":"Bill Silva","difficult":1.3},{"playerId":"57","gender":"male","name":"Lawrence Hanson","difficult":0.4},{"playerId":"17","gender":"female","name":"Sallie Stevens","difficult":0.9},{"playerId":"74","gender":"male","name":"Christopher Bishop","difficult":0.4},{"playerId":"35","gender":"female","name":"Julia Gibbs","difficult":0.5},{"playerId":"2","gender":"female","name":"Frances Boyd","difficult":0.4},{"playerId":"65","gender":"male","name":"Eric Howell","difficult":0.7},{"playerId":"54","gender":"male","name":"Jeremiah Ruiz","difficult":1.6},{"playerId":"1","gender":"female","name":"Essie Tate","difficult":0.3},{"playerId":"53","gender":"female","name":"Jeanette Williamson","difficult":0.5},{"playerId":"55","gender":"male","name":"Thomas Holmes","difficult":0.6},{"playerId":"49","gender":"male","name":"Erik Barber","difficult":0.8},{"playerId":"14","gender":"female","name":"Myrtie Valdez","difficult":1.5},{"playerId":"3","gender":"female","name":"Madge Bates","difficult":1.7},{"playerId":"7","gender":"female","name":"Marion Conner","difficult":1.8},{"playerId":"25","gender":"male","name":"Chester Johnson","difficult":1.2},{"playerId":"59","gender":"male","name":"Jerry Ray","difficult":0.3},{"playerId":"32","gender":"female","name":"Ophelia Hardy","difficult":0.9},{"playerId":"52","gender":"female","name":"Jessie Morris","difficult":1.4},{"playerId":"51","gender":"male","name":"Nathan Hopkins","difficult":1.7},{"playerId":"51","gender":"female","name":"Nell Higgins","difficult":0.9},{"playerId":"66","gender":"male","name":"Lester Strickland","difficult":1.2},{"playerId":"73","gender":"male","name":"Blake Park","difficult":0.7},{"playerId":"75","gender":"male","name":"Wesley Colon","difficult":1.5},{"playerId":"22","gender":"female","name":"Augusta Barker","difficult":1.4},{"playerId":"36","gender":"male","name":"Ivan Lamb","difficult":1.3},{"playerId":"40","gender":"female","name":"Sylvia Neal","difficult":0.9},{"playerId":"11","gender":"male","name":"Ethan Herrera","difficult":0.6},{"playerId":"15","gender":"male","name":"Jeffrey Jackson","difficult":0.3},{"playerId":"26","gender":"male","name":"Cory Tucker","difficult":1.2},{"playerId":"12","gender":"female","name":"Sophia Rios","difficult":0.3},{"playerId":"18","gender":"female","name":"Verna Cooper","difficult":0.9},{"playerId":"9","gender":"female","name":"Lily Copeland","difficult":1.7},{"playerId":"30","gender":"female","name":"Lillian Murray","difficult":0.3},{"playerId":"43","gender":"male","name":"Gordon Manning","difficult":0.9},{"playerId":"53","gender":"male","name":"Julian Simmons","difficult":1.1},{"playerId":"30","gender":"male","name":"Johnny Fernandez","difficult":0.3},{"playerId":"3","gender":"male","name":"Daniel Reed","difficult":0.9}]')),Fs=function(e){try{var t=localStorage.getItem(e);return null===t?null:GameCore.Utils.Json.decode(t)}catch(n){return null}},Zs=function(e,t){try{var n=Fs(e),i={};GameCore.Utils.Valid.isObject(n)&&(i=n);var a=GameCore.Utils.Json.clone(t);if(!GameCore.Utils.Valid.isObject(a))return!1;var r=GameCore.Utils.Object.clear(a),s=(0,vn.TS)(i,r),o=GameCore.Utils.Json.encode(s);return localStorage.setItem(e,o),!0}catch(c){return!1}},Us=GameCore.Configs.ApiHost,Ys=(function(){var e=(0,s.Z)(h().mark((function e(t){var n;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"single-matches",e.next=3,(0,Ge.v)("single-matches",t,{},Us);case 3:return n=e.sent,e.abrupt("return",(null==n?void 0:n.data)||{});case 5:case"end":return e.stop()}}),e)})))}(),function(){var e=(0,s.Z)(h().mark((function e(){var t;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"single-matches/active",e.next=3,(0,Ge.U)("single-matches/active",{},Us);case 3:return t=e.sent,e.abrupt("return",(null==t?void 0:t.data)||{});case 5:case"end":return e.stop()}}),e)})))}(),function(){var e=(0,s.Z)(h().mark((function e(t,n){var i,a;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i="single-matches/"+t+"/move",e.next=3,(0,Ge.v)(i,n,{},Us);case 3:return a=e.sent,e.abrupt("return",(null==a?void 0:a.data)||{});case 5:case"end":return e.stop()}}),e)})))}(),function(){var e=(0,s.Z)(h().mark((function e(t){var n,i;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="single-matches/"+t+"/finish",e.next=3,(0,Ge.v)(n,{},{},Us);case 3:return i=e.sent,e.abrupt("return",(null==i?void 0:i.data)||{});case 5:case"end":return e.stop()}}),e)})))}(),function(){var e=(0,s.Z)(h().mark((function e(t){var n;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"matches",e.next=3,(0,Ge.v)("matches",{opponentPlayerId:t},{},Us);case 3:return n=e.sent,e.abrupt("return",(null==n?void 0:n.data)||{});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),Hs=function(){var e=(0,s.Z)(h().mark((function e(t){var n,i;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="matches/"+t+"/join",e.next=3,(0,Ge.v)(n,{},{},Us);case 3:return i=e.sent,e.abrupt("return",(null==i?void 0:i.data)||{});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),zs=function(){var e=(0,s.Z)(h().mark((function e(t){var n,i;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="matches/"+t,e.next=3,(0,Ge.U)(n,{},Us);case 3:return i=e.sent,e.abrupt("return",(null==i?void 0:i.data)||{});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ws=function(){var e=(0,s.Z)(h().mark((function e(t,n,i,a){var r,s;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r="matches/"+t+"/finish",e.next=3,(0,Ge.v)(r,{matchId:t,score:n,level:i,extraData:a},{},Us);case 3:return s=e.sent,e.abrupt("return",(null==s?void 0:s.data)||{});case 5:case"end":return e.stop()}}),e)})));return function(t,n,i,a){return e.apply(this,arguments)}}(),Vs=function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).name="InvalidMatchStatus",i.message=t||"The match status is not valid",i.payload=n,i}return(0,o.Z)(t,e),t}((0,F.Z)(Error)),Ks=function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).name="InvalidOpponentId",i.message=t||"Invalid opponent id",i.payload=n,i}return(0,o.Z)(t,e),t}((0,F.Z)(Error)),js=function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).name="InvalidBlackPlayerId",i.message=t||"Invalid black player id",i.payload=n,i}return(0,o.Z)(t,e),t}((0,F.Z)(Error)),Xs=function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).name="InvalidRequestedMatchId",i.message=t||"The matchId in match data not matched with requested matchId",i.payload=n,i}return(0,o.Z)(t,e),t}((0,F.Z)(Error)),qs=function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).name="InvalidWhitePlayerId",i.message=t||"Invalid white player id",i.payload=n,i}return(0,o.Z)(t,e),t}((0,F.Z)(Error)),Js=function(e){var t=e.matchId,n=e.currentMatchId;if(""===t||"string"!==typeof t)throw new bs(null,{matchId:t});if(""===n||"string"!==typeof n)throw new bs(null,{currentMatchId:n});if(t!==n)throw new Xs(null,{matchId:t,currentMatchId:n})},Qs=function(e){var t=e.playerId,n=e.match,i=n._id,a=n.playerId,r=n.status;if(""===i||"string"!==typeof i)throw new bs(null,{matchId:i});if("finished"===r||"string"!==typeof r)throw new Vs("This match is finished",{status:r});if(a!==t)throw new aa(null,{playerId:a,currentPlayerId:t})},$s=function(e){var t=e.opponentId;if(""===t||"string"!==typeof t)throw new Ks(null,{opponentId:t})},eo=function(e){var t=e.matchId;if(""===t||"string"!==typeof t)throw new bs(null,{matchId:t})},to=function(e){var t=e.match,n=t._id,i=t.whitePlayerId,a=t.blackPlayerId;if(""===n||"string"!==typeof n)throw new bs(null,{matchId:n});if(""===i||"string"!==typeof i)throw new qs(null,{whitePlayerId:i});if(""===a||"string"!==typeof a)throw new js(null,{blackPlayerId:a})},no=GameCore.Configs.Match,io=function(e){try{return GameCore.Utils.Hash.stringToHash(R()(e))}catch(t){return""}},ao=function(e){try{return JSON.parse(GameCore.Utils.Hash.hashToString(e))}catch(t){return""}},ro=function(){return function(){var e=(0,s.Z)(h().mark((function e(t){var n,a,s;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.prev=0,n=window.game.player,t({type:_n,payload:{}}),a=n.getPlayerId(),s=(0,r.Z)({},no.LocalSingleMatchDefault,{status:"active",playerId:a,startedAt:Date.now()}),Qs({playerId:a,match:s}),t(oo(s)),Zs(no.SingleMatchStore,s),e.next=18;break;case 10:if(e.prev=10,e.t0=e.catch(0),t(oo(null)),!(e.t0 instanceof bs)){e.next=15;break}return e.abrupt("return");case 15:if(!(e.t0 instanceof Vs)){e.next=17;break}return e.abrupt("return");case 17:(0,i.tO)(e.t0);case 18:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}()},so=function(e){return function(){var t=(0,s.Z)(h().mark((function t(n,a){var s,o,c,l,u,d,p,f;return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:t.prev=0,s=window.game.player,eo({matchId:e}),o=a(),c=Cs(o),l=s.getPlayerId(),Js({matchId:e,currentMatchId:c}),n({type:"MATCH_SINGLE_FINISH_REQUEST",payload:{matchId:e}}),u=ws(o),Qs({playerId:l,match:u}),d=(0,r.Z)({},no.LocalSingleMatchDefault,u,{_id:e,status:"finished",playerId:l,finishAt:Date.now()}),n(oo(d)),p=d.data,(f=(0,r.Z)({},d)).data=io(p),Zs(no.SingleMatchStore,f),t.next=26;break;case 18:if(t.prev=18,t.t0=t.catch(0),n(oo(null)),!(t.t0 instanceof bs)){t.next=23;break}return t.abrupt("return");case 23:if(!(t.t0 instanceof Vs)){t.next=25;break}return t.abrupt("return");case 25:(0,i.tO)(t.t0);case 26:case"end":return t.stop()}}),t,null,[[0,18]])})));return function(e,n){return t.apply(this,arguments)}}()},oo=function(e){return{type:Nn,payload:{match:e}}},co=function(){return{type:Ln,payload:{}}},lo=function(e){return function(){var t=(0,s.Z)(h().mark((function t(n){var a,r,s,o;return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a=window.game,r=a.profile,a.globalScene.screen.open(Da.o4.NOTIFY_SCREEN,{message:window.game.lang.Text.LOADING,loading:!0}),s=e.playerId,$s({opponentId:s}),n({type:Gn,payload:{opponentInfo:e}}),t.next=8,Ys(s);case 8:return o=t.sent,to({match:o}),t.next=12,r.requestProfiles([s]);case 12:n(fo(o)),t.next=23;break;case 15:if(t.prev=15,t.t0=t.catch(0),n(fo(null)),!(t.t0 instanceof bs)){t.next=20;break}return t.abrupt("return");case 20:if(!(t.t0 instanceof Ks)){t.next=22;break}return t.abrupt("return");case 22:(0,i.tO)(t.t0);case 23:case"end":return t.stop()}}),t,null,[[0,15]])})));return function(e){return t.apply(this,arguments)}}()},uo=function(e){return function(){var t=(0,s.Z)(h().mark((function t(n){var a,r,s,o,c,l,u,d,p;return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a=window.game,r=a.player,s=a.profile,a.globalScene.screen.open(Da.o4.NOTIFY_SCREEN,{message:window.game.lang.Text.LOADING,loading:!0}),eo({matchId:e}),n({type:Mn,payload:{matchId:e}}),t.next=7,Hs(e);case 7:if(o=t.sent,to({match:o}),c=o.status,l=o.whitePlayerId,u=o.blackPlayerId,c!==Qn){t.next=16;break}return d=r.getPlayerId(),p=d===l?u:l,t.next=16,s.requestProfiles([p]);case 16:n(fo(o)),t.next=25;break;case 19:if(t.prev=19,t.t0=t.catch(0),n(fo(null)),!(t.t0 instanceof bs)){t.next=24;break}return t.abrupt("return");case 24:(0,i.tO)(t.t0);case 25:case"end":return t.stop()}}),t,null,[[0,19]])})));return function(e){return t.apply(this,arguments)}}()},ho=function(e,t,n){return void 0===n&&(n=!0),function(){var a=(0,s.Z)(h().mark((function a(r){var s,o,c,l,u,d,p,f,g,m;return h().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,s=window.game,o=s.player,c=s.globalScene,n&&c.screen.open(Da.o4.NOTIFY_SCREEN,{message:window.game.lang.Text.LOADING,loading:!0}),eo({matchId:e}),r({type:Zn,payload:{matchId:e,opponentInfo:t}}),a.next=7,zs(e);case 7:l=a.sent,to({match:l}),u=l.whitePlayerId,d=l.whitePlayerScore,p=l.blackPlayerScore,f=o.getPlayerId(),g=o.getPlayerData(),m=g.score,r(fo(l,{score:f===u?d:p,bestScore:m})),a.next=23;break;case 17:if(a.prev=17,a.t0=a.catch(0),r(fo(null)),!(a.t0 instanceof bs)){a.next=22;break}return a.abrupt("return");case 22:(0,i.tO)(a.t0);case 23:case"end":return a.stop()}}),a,null,[[0,17]])})));return function(e){return a.apply(this,arguments)}}()},po=function(e,t,n){return function(){var a=(0,s.Z)(h().mark((function a(r){var s,o;return h().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,window.game.globalScene.screen.open(Da.o4.NOTIFY_SCREEN,{message:window.game.lang.Text.LOADING,loading:!0}),eo({matchId:e}),r({type:Fn,payload:{matchId:e,score:t,extraData:n}}),s=n.level,a.next=8,Ws(e,t,s,n);case 8:return o=a.sent,to({match:o}),a.next=12,r(fo(o));case 12:a.next=20;break;case 14:if(a.prev=14,a.t0=a.catch(0),r(fo(null)),!(a.t0 instanceof bs)){a.next=19;break}return a.abrupt("return");case 19:(0,i.tO)(a.t0);case 20:case"end":return a.stop()}}),a,null,[[0,14]])})));return function(e){return a.apply(this,arguments)}}()},fo=function(e,t,n){return void 0===n&&(n=null),{type:Un,payload:{match:e,opponentInfo:t,current:n}}},go=function(e){return{type:Hn,payload:{opponentInfo:e}}},mo=function(e,t){return{type:Vn,payload:{matchId:e,players:t}}},vo=function(e){return{type:qn,payload:{enable:e}}},yo=function(e){return{type:On,payload:{playerId:e}}},Eo=function(e,t){return{type:Rn,payload:{playerId:e,stats:t}}},Ao=function(e){return{type:Bn,payload:{stats:e}}},So=function(e){var t=e.contextId;if(""===t||"string"!==typeof t)throw new is(null,{contextId:t})},bo=null,To=function(e){clearTimeout(bo),bo=setTimeout((function(){window.game.globalScene.screen.close(Da.o4.NOTIFY_SCREEN)}),e)},wo=function(){return function(e){try{e(co()),e(Bo(da))}catch(t){(0,i.tO)(t)}}},Co=function(){return function(){var e=(0,s.Z)(h().mark((function e(t){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.prev=1,e.next=4,window.game.facebook.getTournamentAsync();case 4:return t(wo()),e.abrupt("return");case 8:e.prev=8,e.t0=e.catch(1);case 10:t(co()),t(Bo(la)),e.next=17;break;case 14:e.prev=14,e.t1=e.catch(0),(0,i.tO)(e.t1);case 17:case"end":return e.stop()}}),e,null,[[0,14],[1,8]])})));return function(t){return e.apply(this,arguments)}}()},Io=function(e,t){return void 0===e&&(e="10"),void 0===t&&(t=!1),function(n){try{n(Po("reset",e,t))}catch(a){(0,i.tO)(a)}}},Po=function(e,t,n){return void 0===t&&(t="10"),void 0===n&&(n=!1),function(){var a=(0,s.Z)(h().mark((function a(r){var s,o,c,l,u,d,p,f,g,m,v,y,E,A,S,b,T;return h().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(a.prev=0,s=window.game,o=s.player,c=s.facebook,(l=s.globalScene).screen.open(Da.o4.NOTIFY_SCREEN,{message:window.game.lang.Text.LOADING,loading:!0}),u=e,d=c.contextType,t||(p=GameCore.Configs.PlayerIdMock,f=GameCore.Configs.PlayerIdMock2,t=o.getPlayerId()===p?f:p),e){a.next=24;break}return a.next=9,c.chooseAsync();case 9:if(!1!==(u=a.sent)){a.next=13;break}return n&&l.events.emit(Sa.K.SWITCH,Sa.C.DASHBOARD_SCENE),a.abrupt("return");case 13:return a.prev=13,a.next=16,c.getTournamentAsync();case 16:return r(wo()),a.abrupt("return");case 20:a.prev=20,a.t0=a.catch(13);case 22:a.next=34;break;case 24:if(!t||t===ca.playerId){a.next=32;break}return a.next=27,c.createAsync(t);case 27:if(!1!==(u=a.sent)){a.next=31;break}return n&&l.events.emit(Sa.K.SWITCH,Sa.C.DASHBOARD_SCENE),a.abrupt("return");case 31:u||"reset"===e||(u=e);case 32:d=c.contextType,r(ma(u,d));case 34:return So({contextId:u}),g=o.getPlayerId(),m=o.getConnectedPlayers(),a.next=39,c.getContextPlayers(g);case 39:return v=a.sent,t!==(y=ca).playerId&&m[t]?y=m[t]:1===v.length&&(y=v[0]),r(yo()),A=(E=y).playerId,S=E.name,b=E.photo,T={playerId:A,name:S,photo:b},a.next=47,r(Bo(ua,T));case 47:r(ma(u,d)),a.next=59;break;case 50:if(a.prev=50,a.t1=a.catch(0),!(a.t1 instanceof is)){a.next=54;break}return a.abrupt("return");case 54:if("USER_INPUT"!==(null==a.t1?void 0:a.t1.code)){a.next=56;break}return a.abrupt("return");case 56:if("INVALID_OPERATION"!==(null==a.t1?void 0:a.t1.code)){a.next=58;break}return a.abrupt("return");case 58:(0,i.tO)(a.t1);case 59:return a.prev=59,To(1e3),a.finish(59);case 62:case"end":return a.stop()}}),a,null,[[0,50,59,62],[13,20]])})));return function(e){return a.apply(this,arguments)}}()},xo=function(e){return function(){var t=(0,s.Z)(h().mark((function t(n){var a,r,s,o,c;return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a=window.game,r=a.facebook,s=a.globalScene,o=a.analytics,s.screen.open(Da.o4.NOTIFY_SCREEN,{message:window.game.lang.Text.LOADING,loading:!0}),c=r.getContextID(),So({contextId:c}),o.event(Ht._.JOIN_GROUP,{group_id:c}),t.next=8,n(Bo(ha,e));case 8:t.next=17;break;case 10:if(t.prev=10,t.t0=t.catch(0),!(t.t0 instanceof is)){t.next=14;break}return t.abrupt("return");case 14:if("INVALID_OPERATION"!==(null==t.t0?void 0:t.t0.code)){t.next=16;break}return t.abrupt("return");case 16:(0,i.tO)(t.t0);case 17:return t.prev=17,To(1e3),t.finish(17);case 20:case"end":return t.stop()}}),t,null,[[0,10,17,20]])})));return function(e){return t.apply(this,arguments)}}()},ko=function(e,t,n){return void 0===n&&(n=!1),function(){var a=(0,s.Z)(h().mark((function a(r,s){var o,c,l,u,d,p,f,g,m,v,y,E,A,S,b,T,w,C,I,P;return h().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,o=window.game,c=o.player,l=o.profile,u=o.facebook,d=o.globalScene,n?d.events.emit(Sa.K.SWITCH,Sa.C.GAME_SCENE):d.screen.open(Da.o4.NOTIFY_SCREEN,{message:window.game.lang.Text.LOADING,loading:!0}),a.next=5,GameCore.Utils.Valid.isValueChangeAsync((function(){return c.isConnectedPlayersLoaded()}),!0,{timeout:1e3});case 5:if(p=a.sent,f=c.getPlayerId(),g=c.getConnectedPlayers(),m=f===t,v=t===ca.playerId,y=p&&g[t],v||y||n){a.next=14;break}return d.events.emit(Sa.K.SWITCH,Sa.C.DASHBOARD_SCENE),a.abrupt("return");case 14:return E=ca,a.next=17,u.getContextPlayers(f);case 17:if(A=a.sent,m||v||!y){a.next=22;break}E=g[t],a.next=31;break;case 22:if(1!==A.length){a.next=26;break}E=A[0],a.next=31;break;case 26:if(v){a.next=31;break}return a.next=29,l.requestProfiles([t]);case 29:(S=l.getProfiles())[t]&&(E=S[t]);case 31:return b=!n,a.next=34,r(ho(e,E,b));case 34:if(T=s(),Rs(T,{playerId:f})!==ca.playerId){a.next=39;break}return a.next=39,r(uo(e));case 39:if(T=s(),Rs(T,{playerId:f})===f||!g[t]){a.next=44;break}return r(Io(t,!0)),a.abrupt("return");case 44:if(xs(T)===e){a.next=48;break}return d.events.emit(Sa.K.SWITCH,Sa.C.DASHBOARD_SCENE),a.abrupt("return");case 48:if(w=ks(T),C=Bs(T,{playerId:f}),r(Do({mode:ua,status:w})),I=u.getContextID(),P=u.contextType,r(ma(I,P)),!C){a.next=59;break}return a.next=57,c.requestConnectedPlayers();case 57:return d.events.emit(Sa.K.SWITCH,Sa.C.RESULT_MATCH_SCENE),a.abrupt("return");case 59:d.events.emit(Sa.K.SWITCH,Sa.C.GAME_SCENE),a.next=65;break;case 62:a.prev=62,a.t0=a.catch(0),(0,i.tO)(a.t0);case 65:return a.prev=65,To(1e3),a.finish(65);case 68:case"end":return a.stop()}}),a,null,[[0,62,65,68]])})));return function(e,t){return a.apply(this,arguments)}}()},Oo=function(){return function(e){try{e({type:Xn,payload:{}}),e(Bo(pa))}catch(t){(0,i.tO)(t)}}},Ro=function(e){return function(t){try{var n=window.game.player,a=n.getPlayerId();Ur(a,e).catch((function(e){(0,i.tO)(new Error(e))}));var r=n.getPlayerData(),s=r.score,o=void 0===s?0:s,c=r.level;o<e&&n.setBestScore(e);var l={score:e,level:c};t(Eo(a,l)),t(Ao(l))}catch(u){if(u instanceof rs)return;(0,i.tO)(u)}}},Bo=function(e,t){return void 0===t&&(t=null),function(){var n=(0,s.Z)(h().mark((function n(a,r){var o,c,l,u,d,p,f,g,m,v,y;return h().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,c=window.game,l=c.player,u=c.analytics,d=c.facebook,p=c.globalScene,f=d.getContextID(),g=0,m=r(),u.event(Ht._.MATCH_START,{game_mode:GameCore.Utils.String.toUpperCamelCase(e),level:1,level_name:"level_1"}),a({type:Cn,payload:{}}),!me()(o=[la,da]).call(o,e)){n.next=16;break}return n.next=10,a((function(e){try{var t=window.game.player;e({type:Dn,payload:{}});var n=t.getPlayerId(),a=Fs(no.SingleMatchStore)||{},r=a.data;a.data=ao(r),Qs({playerId:n,match:a}),e(oo(a))}catch(s){if(e(oo(null)),s instanceof bs)return;if(s instanceof aa)return;if(s instanceof Vs)return;(0,i.tO)(s)}}));case 10:if(m=r(),Cs(m)){n.next=15;break}return n.next=15,a(ro());case 15:g=Is(m);case 16:if(e===ha&&a(go(t)),e!==ua){n.next=22;break}return n.next=20,a(lo(t));case 20:m=r(),f||(f=window.FBInstant.context.getID());case 22:e===pa&&a(function(){var e=(0,s.Z)(h().mark((function e(t){var n,i,a,r,s,o,c,l;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=window.game.player,r=a.getPlayer(),s=r.playerId,o=r.name,c=r.photo,t({type:Wn,payload:{playerId:s}}),l={},GameCore.Utils.Array.shuffle(Gs),Ie()(n=vr()(i=new Array(20)).call(i,null)).call(n,(function(e,t){var n=Gs[t],i=n.playerId,a=n.name,r=n.gender,s=+i;l[i]={playerId:i,name:a,photo:"./assets/images/people/"+r+"/"+r+"-"+(s<10?"0"+s:s)+".jpg"}})),l[s]={playerId:s,name:o,photo:c},t(mo("mock",l));case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),v=l.getPlayerData(m),y=v.score,a(Ao({score:g,bestScore:void 0===y?0:y})),a({type:In,payload:{mode:e,contextId:f}}),a(va(e)),p.events.emit(Sa.K.SWITCH,Sa.C.GAME_SCENE),u.event(Ht._.MATCH_START,{game_mode:GameCore.Utils.String.toUpperCamelCase(e),level:1,level_name:"level_1"}),n.next=38;break;case 31:if(n.prev=31,n.t0=n.catch(0),!(n.t0 instanceof bs)){n.next=37;break}return window.game.globalScene.screen.open(Da.o4.NOTIFY_SCREEN,{message:"Sorry!, you can now\ncreate this match!",duration:2500,loading:!1}),n.abrupt("return");case 37:(0,i.tO)(n.t0);case 38:return n.prev=38,To(0),n.finish(38);case 41:case"end":return n.stop()}}),n,null,[[0,31,38,41]])})));return function(e,t){return n.apply(this,arguments)}}()},_o=function(e,t){return function(){var n=(0,s.Z)(h().mark((function n(i,a){var r,s,o,c,l,u,d,p,f,g,m,v;return h().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(s=window.game,o=s.player,c=s.globalScene,l=t.score,u=void 0===l?0:l,d=t.level,p=void 0===d?0:d,f=a(),!me()(r=[la,da]).call(r,e)){n.next=7;break}return g=Cs(f),n.next=7,i(so(g));case 7:if(e===ha&&(i({type:zn,payload:{}}),m=o.getPlayerId(),i(Eo(m,t))),e!==ua){n.next=12;break}return v=xs(f),n.next=12,i(po(v,u,{level:p}));case 12:if(e!==pa){n.next=16;break}return Cs(f),n.next=16,i({type:jn,payload:{}});case 16:i({type:Pn,payload:{mode:e}}),e===ua?c.events.emit(Sa.K.SWITCH,Sa.C.RESULT_MATCH_SCENE):e===pa?c.events.emit(Sa.K.SWITCH,Sa.C.RESULT_ONLINE_SCENE):c.events.emit(Sa.K.SWITCH,Sa.C.GAME_OVER_SCENE);case 18:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}()},Do=function(e){return function(t){var n=e.mode,a=e.status;t({type:xn,payload:{mode:n,status:a}}),(0,i.sw)("game-mode",n)}},No=n(411),Lo=new(n.n(No)()),Mo=n(438),Go=function(e){function t(t,n,i,a,r){var s;return(s=e.call(this,t,n,i)||this).label=void 0,a&&r&&s.button.setWorldSize(a,r),s.createLabel(),s}(0,o.Z)(t,e);var n=t.prototype;return n.setLabel=function(e){this.label.setText(e)},n.createLabel=function(){this.label=this.scene.make.bitmapText({font:$a.Z.PRIMARY.KEY,size:this.scene.fontSize(15),origin:{x:.5,y:.5}}),this.label.setAlpha(.8),this.add(this.label),this.label.setY(40.5)},t}(Va.Z),Fo=Go,Zo=Ka.Z.DEFAULT,Uo=Zo.KEY,Yo=Zo.FRAME,Ho=function(e){function t(t){var n;return(n=e.call(this,t,Uo,Yo.ICON_SETTING,49,54.5)||this).setName("Settings"),n.setLabel(n.scene.lang.Text.SETTINGS),n}return(0,o.Z)(t,e),t}(Fo),zo=Ho,Wo=(0,re.P1)([function(e){var t;return null==(t=e[Ii])?void 0:t.tasks}],(function(e){return e})),Vo=(0,re.P1)([function(e){var t;return null==(t=e[Ii])?void 0:t.process}],(function(e){return e})),Ko=(0,re.P1)([function(e){var t;return null==(t=e[Ii])?void 0:t.isRequesting}],(function(e){return e})),jo=(0,re.P1)([function(e){var t;return null==(t=e[Ii])?void 0:t.isNotice}],(function(e){return e})),Xo=Ka.Z.DEFAULT,qo=Xo.KEY,Jo=Xo.FRAME,Qo=function(e){function t(t){var n;return(n=e.call(this,t,qo,Jo.ICON_MISSION,53,57.5)||this).noticeIcon=void 0,n.checkNotice=function(){var e=n.scene.storage.getState(),t=jo(e)||!1;n.noticeIcon.setVisible(t)},n.setName("DailyMission"),n.setLabel(n.scene.lang.Text.MISSIONS),n.drawNoticeIcon(),n}return(0,o.Z)(t,e),t.prototype.drawNoticeIcon=function(){this.noticeIcon=this.scene.make.image({key:qo,frame:Jo.ICON_DOT}),this.noticeIcon.setWorldSize(15,16),this.add(this.noticeIcon),Phaser.Display.Align.In.TopRight(this.noticeIcon,this.button,4,4)},t}(Fo),$o=Qo,ec=Ka.Z.DEFAULT,tc=ec.KEY,nc=ec.FRAME,ic=function(e){function t(t){var n;return(n=e.call(this,t,tc,nc.ICON_INVITE,59.5,54)||this).setName("Invite"),n.setLabel(n.scene.lang.Text.INVITE),n}return(0,o.Z)(t,e),t}(Fo),ac=ic,rc=Ka.Z.DEFAULT,sc=rc.KEY,oc=rc.FRAME,cc=function(e){function t(t){var n;return(n=e.call(this,t,sc,oc.ICON_RANKING,53,52.5)||this).setName("Leaderboards"),n.setLabel(n.scene.lang.Text.LEADERBOARD_NEWLINE),n}return(0,o.Z)(t,e),t}(Fo),lc=cc,uc=Ka.Z.DEFAULT,hc=uc.KEY,dc=uc.FRAME,pc=function(e){function t(t){var n;return(n=e.call(this,t)||this).inviteIcon=void 0,n.missionIcon=void 0,n.settingIcon=void 0,n.rankingIcon=void 0,n.buttons=void 0,n.block=void 0,n.blockExtension=void 0,n.createBlock(),n.createButtons(),n.alignButtons(),n.scene.add.existing((0,Na.Z)(n)),n}(0,o.Z)(t,e);var n=t.prototype;return n.createBlock=function(){this.block=this.scene.add.image(0,0,hc,dc.DASHBOARD_FOOTER_BLOCK),this.block.setOrigin(.5,1),this.block.setWorldSize(375,94.5),this.add(this.block),this.blockExtension=this.scene.add.rectangle(0,0,375,94.5,1643817,1),this.add(this.blockExtension),this.blockExtension.setOrigin(.5,0),this.blockExtension.setPosition(this.block.x,this.block.y)},n.alignButtons=function(){var e=-(this.buttons.getLength()-1)/2*95;this.buttons.setX(e,95),this.buttons.setY(-95)},n.createButtons=function(){this.buttons=this.scene.add.group(),this.createInviteButton(),this.createMissionButton(),this.createRankingButton(),this.createSettingButton()},n.createInviteButton=function(){this.inviteIcon=new ac(this.scene),this.add(this.inviteIcon),this.buttons.add(this.inviteIcon)},n.createSettingButton=function(){this.settingIcon=new zo(this.scene),this.add(this.settingIcon),this.buttons.add(this.settingIcon)},n.createMissionButton=function(){this.missionIcon=new $o(this.scene),this.add(this.missionIcon),this.buttons.add(this.missionIcon)},n.createRankingButton=function(){this.rankingIcon=new lc(this.scene),this.add(this.rankingIcon),this.buttons.add(this.rankingIcon)},t}(Phaser.GameObjects.Container),fc=pc,gc=function(e){function t(t,n,i){var a;return(a=e.call(this,t)||this).startAbbreviate=void 0,a.fractionalDigits=void 0,a.key=void 0,a.frames=void 0,a.bar=void 0,a.icon=void 0,a.button=void 0,a.value=void 0,a.key=n,a.frames=i,a.startAbbreviate=99999,a.fractionalDigits=2,a.createBar(),a.createValue(),a.createIcon(),a.createButton(),a.alignObject(),a.scene.add.existing((0,Na.Z)(a)),a}(0,o.Z)(t,e);var n=t.prototype;return n.setValue=function(e){var t=GameCore.Utils.Number.toAbbreviatedString(e,{startAbbreviate:1e6});this.value.setText(t)},n.alignObject=function(){var e=this.bar,t=e.width,n=e.height;this.setSize(t,n),Phaser.Display.Align.In.Center(this.value,this.bar,5,1),Phaser.Display.Align.In.LeftCenter(this.icon,this.bar),this.button&&Phaser.Display.Align.In.RightCenter(this.button,this.bar)},n.createBar=function(){this.bar=this.scene.add.image(0,0,this.key,this.frames.background),this.bar.setY(4),this.add(this.bar)},n.createValue=function(){this.value=this.scene.make.bitmapText({font:$a.Z.PRIMARY.KEY,size:this.scene.fontSize(20),origin:{x:.5,y:.5}}),this.setValue(0),this.add(this.value)},n.createIcon=function(){this.icon=this.scene.add.image(0,0,this.key,this.frames.icon),this.add(this.icon)},n.createButton=function(){this.frames.button&&this.scene.ads.enabled&&(this.button=this.scene.add.image(0,0,this.key,this.frames.button),this.add(this.button))},n.logButtonEvent=function(){var e=this.getParentName(),t=this.name;this.scene.analytics.event(Ht._.BUTTON_CLICK,{button_name:t,screen_name:e})},n.getParentName=function(){for(var e=this.parentContainer;e;){if(e instanceof GameCore.Screen)return e.getScreenName();e=e.parentContainer}return this.scene.getSceneName()},(0,te.Z)(t,[{key:"onClick",set:function(e){var t=this;this.scene.ads.enabled&&(this.setInteractive({useHandCursor:!0}),this.on(Phaser.Input.Events.GAMEOBJECT_POINTER_DOWN,(function(){t.logButtonEvent(),e(),t.scene.audio.playSound(er.Z.BUTTON_CLICK)})))}}]),t}(Phaser.GameObjects.Container),mc=gc,vc=Ka.Z.DEFAULT,yc=vc.KEY,Ec=vc.FRAME,Ac=function(e){function t(t){var n,i;return(i=e.call(this,t,yc,{background:Ec.TOP_PANEL,icon:Ec.ICON_COIN,button:Ec.BUTTON_ADD})||this).setName("CoinBar"),i.startAbbreviate=1e3,i.fractionalDigits=0,i.bar.setWorldSize(102,35),i.icon.setWorldSize(38,36),null==(n=i.button)||n.setWorldSize(26,26),i.alignObject(),Phaser.Display.Align.In.LeftCenter(i.icon,i.bar,10),i.button&&Phaser.Display.Align.In.RightCenter(i.button,i.bar,8),i}return(0,o.Z)(t,e),t.prototype.getCoinIconPosition=function(){return this.icon.getWorldPosition()},t}(mc),Sc=Ac,bc=Ka.Z.DEFAULT,Tc=bc.KEY,wc=bc.FRAME,Cc=function(e){function t(t){var n;return(n=e.call(this,t,Tc,{background:wc.TOP_PANEL,icon:wc.ICON_MEDAL})||this).setName("ScoreBar"),n.startAbbreviate=1e3,n.fractionalDigits=3,n.bar.setWorldSize(105,35),n.icon.setWorldSize(34,43),n.value.setOrigin(.4,.5),n.alignObject(),Phaser.Display.Align.In.LeftCenter(n.icon,n.bar,10),n}return(0,o.Z)(t,e),t}(mc),Ic=Cc,Pc=function(e){function t(t){var n;(n=e.call(this,t)||this).scoreBar=void 0,n.coinBar=void 0;var i=n.scene.gameZone.width;return n.setSize(i,50),n.createScoreBar(),n.createCoinBar(),n.scene.add.existing((0,Na.Z)(n)),n}(0,o.Z)(t,e);var n=t.prototype;return n.createScoreBar=function(){this.scoreBar=new Ic(this.scene),this.add(this.scoreBar),Phaser.Display.Align.In.LeftCenter(this.scoreBar,this,-20)},n.createCoinBar=function(){this.coinBar=new Sc(this.scene),this.add(this.coinBar),Phaser.Display.Align.In.RightCenter(this.coinBar,this,-20)},t}(Phaser.GameObjects.Container),xc=Pc,kc=Ka.Z.DEFAULT,Oc=kc.KEY,Rc=kc.FRAME,Bc=function(e){function t(t,n){var i;return(i=e.call(this,t)||this).options=void 0,i.leaves=void 0,i.dino=void 0,i.title=void 0,i.ribbon=void 0,i.background=void 0,i.dinoAnimation=void 0,i.options=n,i.createBackground(),i.createLeaves(),i.createDino(),i.createRibbon(),i.createTitle(),i.setDepth(_a.Z.LOGO),i.runAnimations(),i.scene.add.existing((0,Na.Z)(i)),i}(0,o.Z)(t,e);var n=t.prototype;return n.isDinoSad=function(e){this.dino.setFrame(e?Rc.DINO_SAD:Rc.DINO)},n.setTitle=function(e){this.title.setText(e)},n.changeRibbon=function(e,t,n){this.ribbon.setFrame(e),this.ribbon.setWorldSize(t,n)},n.changeBackground=function(e,t,n){this.background.setFrame(e),this.background.setWorldSize(t,n)},n.createBackground=function(){this.background=this.scene.make.image({key:Oc,frame:Rc.EGGS}),this.background.setY(-20),this.background.setWorldSize(278.5,82),this.add(this.background)},n.createLeaves=function(){this.leaves=this.scene.make.image({key:Oc,frame:Rc.LEAVES}),this.leaves.setY(30),this.leaves.setWorldSize(272,60),this.add(this.leaves)},n.createDino=function(){this.dino=this.scene.make.image({key:Oc,frame:Rc.DINO}),this.dino.setY(5),this.dino.setWorldSize(98,94.5),this.add(this.dino)},n.createRibbon=function(){this.ribbon=this.scene.make.image({key:Oc,frame:Rc.RIBBON_RED}),this.ribbon.setY(70),this.ribbon.setWorldSize(276.5,68.5),this.add(this.ribbon)},n.createTitle=function(){var e=this.options,t=e.title,n=e.titleSize,i=n||28;this.title=this.scene.make.bitmapText({font:$a.Z.PRIMARY.KEY,size:this.scene.fontSize(i),text:t,origin:{x:.5,y:.5}}),this.add(this.title),Phaser.Display.Align.In.Center(this.title,this.ribbon,0,-6)},n.runAnimations=function(){this.runBackgroundAnimation()},n.runBackgroundAnimation=function(){this.dinoAnimation||(this.dinoAnimation=new Fa({targets:[this.background],duration:1400,repeatDelay:200,props:{scale:"+=0.02"}})),this.dinoAnimation.play()},t}(Phaser.GameObjects.Container),_c=Bc,Dc=Ka.Z.DEFAULT,Nc=Dc.KEY,Lc=Dc.FRAME,Mc=function(e){function t(t,n,i,a,r){var s;return(s=e.call(this,t,n,i)||this).barTopLeft=void 0,s.barTopMid=void 0,s.barTopRight=void 0,s.barMidLeft=void 0,s.barMidBg=void 0,s.barMidRight=void 0,s.barBottomLeft=void 0,s.barBottomMid=void 0,s.barBottomRight=void 0,s.setSize(a,r),s.setDepth(_a.Z.POPUP),s.createPopup(),s.scene.add.existing((0,Na.Z)(s)),s}(0,o.Z)(t,e);var n=t.prototype;return n.createPopup=function(){this.createPopupImages(),this.updatePopupSize(),this.alignPopupImages()},n.createPopupImages=function(){this.barTopLeft=this.scene.add.image(0,0,Nc,Lc.POPUP_TOP_LEFT),this.barTopMid=this.scene.add.image(0,0,Nc,Lc.POPUP_TOP_MID),this.barTopRight=this.scene.add.image(0,0,Nc,Lc.POPUP_TOP_RIGHT),this.barMidLeft=this.scene.add.image(0,0,Nc,Lc.POPUP_MID_LEFT),this.barMidBg=this.scene.add.image(0,0,Nc,Lc.POPUP_MID_MID),this.barMidRight=this.scene.add.image(0,0,Nc,Lc.POPUP_MID_RIGHT),this.barBottomLeft=this.scene.add.image(0,0,Nc,Lc.POPUP_BOTTOM_LEFT),this.barBottomMid=this.scene.add.image(0,0,Nc,Lc.POPUP_BOTTOM_MID),this.barBottomRight=this.scene.add.image(0,0,Nc,Lc.POPUP_BOTTOM_RIGHT),this.barTopLeft.setWorldSize(65,48),this.barTopMid.setWorldSize(65,48),this.barTopRight.setWorldSize(65,48),this.barMidLeft.setWorldSize(65,48),this.barMidBg.setWorldSize(65,48),this.barMidRight.setWorldSize(65,48),this.barBottomLeft.setWorldSize(65,48),this.barBottomMid.setWorldSize(65,48),this.barBottomRight.setWorldSize(65,48),this.add([this.barTopRight,this.barTopMid,this.barBottomLeft,this.barBottomRight,this.barMidLeft,this.barMidRight,this.barTopLeft,this.barBottomMid,this.barMidBg])},n.updatePopupSize=function(){this.barTopMid.setWorldSize(this.width-129,this.barTopMid.height),this.barMidLeft.setWorldSize(this.barMidLeft.width,this.height-95),this.barMidBg.setWorldSize(this.width-129,this.height-95),this.barMidRight.setWorldSize(this.barMidRight.width,this.height-95),this.barBottomMid.setWorldSize(this.width-129,this.barBottomMid.height)},n.alignPopupImages=function(){Phaser.Display.Align.In.TopLeft(this.barTopLeft,this),Phaser.Display.Align.In.TopCenter(this.barTopMid,this),Phaser.Display.Align.In.TopRight(this.barTopRight,this),Phaser.Display.Align.In.LeftCenter(this.barMidLeft,this),Phaser.Display.Align.In.Center(this.barMidBg,this),Phaser.Display.Align.In.RightCenter(this.barMidRight,this),Phaser.Display.Align.In.BottomLeft(this.barBottomLeft,this),Phaser.Display.Align.In.BottomCenter(this.barBottomMid,this),Phaser.Display.Align.In.BottomRight(this.barBottomRight,this)},(0,te.Z)(t,[{key:"onClose",set:function(e){this.setInteractive({useHandCursor:!0}),this.on(Phaser.Input.Events.GAMEOBJECT_POINTER_DOWN,e)}}]),t}(Phaser.GameObjects.Container),Gc=Mc,Fc={targets:[],props:{alpha:{start:0,to:1,duration:500,ease:Phaser.Math.Easing.Cubic.Out},scale:{start:.8,to:1,duration:1e3,ease:Phaser.Math.Easing.Elastic.Out,easeParams:[.1,.45]},y:{start:0,to:0,duration:500,ease:Phaser.Math.Easing.Back.Out}},delay:0},Zc=function(e){function t(t){return e.call(this,Fc,t)||this}return(0,o.Z)(t,e),t}(La.Z),Uc=n(433),Yc=function(e){function t(t,n){var i;(i=e.call(this,t)||this).payload=void 0,i.loading=void 0,i.photo=void 0,i.avtFrame=void 0,i.background=void 0,i.loadPhotoTimer=void 0,i.handleLoadPhotoAfterDelay=function(e,t){return function(){var n=i.scene.textures.get(e);n&&n.key===e?i.handleLoadComplete(e):(i.scene.load.once("filecomplete-image-"+e,i.handleLoadComplete),i.scene.load.image(e,t),i.scene.load.start())}},i.handleLoadComplete=function(e){if(i.scene){var t=i.payload,n=t.id,a=t.radius,r=void 0===a?0:a;if(n&&n===e){var s=n+"_bordered_"+r,o=r>0?s:n,c=i.scene.textures.get(o);if(c&&c.key===o)i.setPhoto(c.key);else if(0!=r&&r<100){if(!GameCore.Utils.Image.drawBorder({scene:i.scene,key:n,newKey:s,radius:r}))return void i.showLoading(!1);i.setPhoto(s)}else if(100==r){if(!GameCore.Utils.Image.drawCircle({scene:i.scene,key:n,newKey:s}))return void i.showLoading(!1);i.setPhoto(s)}else i.setPhoto(n)}}},i.handleLoadPhotoFailed=function(e){e.key===i.payload.id&&i.setDefaultAvatar(e.key)},i.scene.add.existing((0,Na.Z)(i)),i.payload=n,i.setSize(n.width,n.height),i.createBackground(),i.createLoading(),i.createPhoto(),i.createFrame();var a=i.payload,r=a.id,s=a.url,o=a.radius;return r&&s&&i.loadPhoto(r,s,o),i.addDefaultListeners(),i}(0,o.Z)(t,e);var n=t.prototype;return n.setFrame=function(e){this.avtFrame.setFrame(e),this.avtFrame.setVisible(!0)},n.setBackground=function(e){this.background.setFrame(e)},n.loadPhoto=function(e,t,n){var i;if(void 0===n&&(n=0),this.payload.id=e,this.payload.url=t,this.payload.radius=n,null==(i=this.loadPhotoTimer)||i.remove(),e&&t){var a=this.scene.textures.get(e);if(a&&a.key===e)this.handleLoadComplete(e);else{this.showLoading(!0);var r=this.payload.loadDelay||0;this.loadPhotoTimer=this.scene.time.delayedCall(r,this.handleLoadPhotoAfterDelay(e,t))}}else this.setPhoto(oa.Z.AVATAR.KEY)},n.addDefaultListeners=function(){var e=this;this.scene.load.on(Phaser.Loader.Events.FILE_LOAD_ERROR,this.handleLoadPhotoFailed),this.on(Phaser.GameObjects.Events.DESTROY,(function(){var t;null==(t=e.loadPhotoTimer)||t.remove(),e.scene.load.off(Phaser.Loader.Events.FILE_LOAD_ERROR,e.handleLoadPhotoFailed)}))},n.setDefaultAvatar=function(e){this.loadPhoto(e,oa.Z.AVATAR.FILE,this.payload.radius)},n.createBackground=function(){var e=this.payload,t=e.key,n=e.background;this.background=this.scene.make.image({key:t,frame:n}),this.background.setWorldSize(this.width,this.height),this.add(this.background)},n.createLoading=function(){this.loading=new Uc.Z(this.scene),this.loading.setWorldSize(.75*this.width,.75*this.height),this.loading.setVisible(!1),this.add(this.loading)},n.createPhoto=function(){this.photo=this.scene.make.image({x:0,y:0,origin:{x:.5,y:.5},visible:!1}),this.add(this.photo)},n.createFrame=function(){var e=this.payload,t=e.key,n=e.frame,i=e.width,a=e.height;n?(this.avtFrame=this.scene.make.image({key:t,frame:n}),this.avtFrame.setWorldSize(i,a)):this.avtFrame=this.scene.make.image({x:0,y:0,origin:{x:.5,y:.5},visible:!1}),this.add(this.avtFrame)},n.showLoading=function(e){this.photo.setVisible(!e),this.loading.setVisible(e)},n.setPhoto=function(e){this.showLoading(!1),this.photo.setTexture(e),this.photo.setFrame(0);var t=this.payload,n=t.width,i=t.height,a=Math.min(n,i)-10;this.photo.setWorldSize(a,a),Phaser.Display.Align.In.Center(this.photo,this.background)},t}(Phaser.GameObjects.Container),Hc=Yc,zc=Ka.Z.DEFAULT,Wc=zc.KEY,Vc=zc.FRAME,Kc=function(e){function t(t,n){var i;return(i=e.call(this,t)||this).scene=void 0,i.rankIcon=void 0,i.username=void 0,i.score=void 0,i.showPopUp=void 0,i.avatar=void 0,i.rankText=void 0,i.background=void 0,i.scene=t,i.setDataEnabled(),i.setData(n),i.createBackground(),i.updateSize(),i.createAvatar(),i.createRank(),i.createUsername(),i.createScore(),i.scene.add.existing(i.setDepth(_a.Z.POPUP)),i}(0,o.Z)(t,e);var n=t.prototype;return n.createBackground=function(){this.background=this.scene.make.image({key:Wc,frame:Vc.LEADERBOARD_BG_DARK}),this.background.setWorldSize(270,44),this.add(this.background)},n.updateSize=function(){var e=this.background,t=e.width,n=e.height;this.setSize(t,n)},n.createAvatar=function(){var e=this.getData("playerId"),t=this.getData("photo");this.avatar=new Hc(this.scene,{id:e,url:t,key:Wc,frame:Vc.AVATAR_FRAME_PURPLE,background:Vc.AVATAR_BG,width:38,height:40,loadDelay:100}),this.add(this.avatar),Phaser.Display.Align.In.LeftCenter(this.avatar,this,-40,-2)},n.createRank=function(){this.createRankIcon(),this.createRankText()},n.createRankIcon=function(){var e,t=+this.getData("score");e=+this.getData("rank"),0===t&&(e=0),this.rankIcon=this.scene.make.image({key:Wc,frame:""}),this.add(this.rankIcon),this.updateRankIcon(e)},n.updateRankIcon=function(e){var t="";switch(e){case 1:t=Vc.ICON_GOLD;break;case 2:t=Vc.ICON_SILVER;break;case 3:t=Vc.ICON_BRONZE;break;case 0:t=Vc.ICON_QUESTION}this.rankIcon.setFrame(t),""!=t?(this.rankIcon.setWorldSize(38,49),0===e&&this.rankIcon.setWorldSize(11,16)):this.rankIcon.setVisible(!1),this.rankIcon.setPosition(-116,0)},n.createRankText=function(){var e,t=+this.getData("score");e=+this.getData("rank"),0===t&&(e=0),this.rankText=this.scene.make.bitmapText({font:$a.Z.PRIMARY.KEY,size:this.scene.fontSize(18),text:"0",origin:{x:.5,y:.5}}),this.add(this.rankText),this.updateRankText(e)},n.createUsername=function(){var e,t,n=this.getData("name");n===this.scene.lang.Text.ANONYMOUS?(e=this.scene.lang.Text.ANONYMOUS,t=this.scene.lang.Text.ANONYMOUS):(e=GameCore.Utils.String.getShortName(n,12),t=GameCore.Utils.String.removeDiacritics(e)),this.username=this.scene.make.text({style:{fontFamily:$a.Z.FONT_FAMILY},origin:{x:0,y:.5},text:t}),this.username.setTint(14803687),this.username.setHighQuality(),this.username.setFontSize(16),Phaser.Display.Align.In.LeftCenter(this.username,this.background,-85,2),this.add(this.username)},n.createScore=function(){var e=this.getData("score"),t=this.getData("rank");switch(this.score=this.scene.make.bitmapText({font:$a.Z.PRIMARY.KEY,size:this.scene.fontSize(20),text:"0",origin:{x:1,y:.5}}),this.score.setTint(14803687),t){case 1:this.score.setTint(15511591);break;case 2:this.score.setTint(12763842);break;case 3:this.score.setTint(15700059)}this.add(this.score),this.updateScore(e),Phaser.Display.Align.In.RightCenter(this.score,this.background,-16,2)},n.updateScore=function(e){var t=GameCore.Utils.Number.toAbbreviatedString(+e,{startAbbreviate:1e14});this.score.setText(""+t)},n.updateRankText=function(e){this.rankText.revive();var t=18,n=""+e;e<4&&this.rankText.kill(),e>999&&(t=14,n=GameCore.Utils.Number.toAbbreviatedString(+e,{fractionalDigits:1,removeLastZero:!0})),this.rankText.setText(n),this.rankText.setFontSize(t),this.rankText.setPosition(-110,0)},n.updateRank=function(e,t){0===t&&(e=0),this.updateRankIcon(e),this.updateRankText(e)},n.runShowPopUpAnimation=function(e,t){this.scene.tweens.killTweensOf(this),this.showPopUp=new Zc({targets:[this],delay:e,duration:t,props:{y:{start:this.y+70,to:this.y}}}),this.showPopUp.play()},t}(Phaser.GameObjects.Container),jc=Kc,Xc=Ka.Z.DEFAULT,qc=Xc.KEY,Jc=Xc.FRAME,Qc=function(e){function t(t){var n;return(n=e.call(this,t,qc,Jc.BUTTON_GREEN_BIG)||this).buttonsPulsateAnimation=void 0,n.setName("LogIn"),n.button.setWorldSize(135.5,73),n.createIcon(),n.createText(),n}(0,o.Z)(t,e);var n=t.prototype;return n.createIcon=function(){var e=this.scene.lang.getCurrentLanguage(),t=this.scene.make.image({key:qc,frame:Jc.ICON_FRIENDS});t.setPosition("ru"===e?-35:-23,-2),t.setWorldSize(40,37),this.add(t)},n.createText=function(){var e=this.scene.make.bitmapText({font:$a.Z.PRIMARY.KEY,size:this.scene.fontSize(20),text:this.scene.lang.Text.LOGIN,origin:{x:.5,y:.5}});e.setPosition(24,0),e.setLeftAlign(),this.add(e)},n.runAnimation=function(){var e,t;null==(e=this.buttonsPulsateAnimation)||e.remove(),this.buttonsPulsateAnimation=new Fa({targets:[this],props:{scale:"-=0.02"}}),null==(t=this.buttonsPulsateAnimation)||t.play()},t}(Va.Z),$c=Qc;function el(e,t){var n="undefined"!==typeof T()&&C()(e)||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){var n;if(!e)return;if("string"===typeof e)return tl(e,t);var i=E()(n=Object.prototype.toString.call(e)).call(n,8,-1);"Object"===i&&e.constructor&&(i=e.constructor.name);if("Map"===i||"Set"===i)return S()(e);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return tl(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var i=0;return function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function tl(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var nl=GameCore.Configs.LeadersBoard,il=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n.leaders=void 0,n.currentPlayerLeader=void 0,n.notifyInfo=void 0,n.logInContainer=void 0,n.handleLogIn=(0,s.Z)(h().mark((function e(){var t,i;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.scene.game.globalScene.screen.open(Da.o4.NOTIFY_SCREEN,{message:n.scene.lang.Text.LOADING,duration:0,loading:!0}),e.prev=1,e.next=4,GameSDK.player.signInManuallyAsync();case 4:if(e.sent){e.next=7;break}throw new Error("Unable to sign in");case 7:return t=GameSDK.player.getID(),i=n.scene.player.getBestScore(),e.next=11,(0,us.aV)(t,i);case 11:return e.next=13,n.scene.storage.dispatch(qr(nl.LeaderboardId,Er,6,0));case 13:n.scene.game.globalScene.screen.open(Da.o4.NOTIFY_SCREEN,{message:"You have joined\nthe leaderboard.",duration:2e3}),n.scene.analytics.event(Ht._.LOG_IN,{success:!0}),e.next=21;break;case 17:e.prev=17,e.t0=e.catch(1),n.scene.analytics.event(Ht._.LOG_IN,{success:!1}),n.scene.game.globalScene.screen.open(Da.o4.NOTIFY_SCREEN,{message:"Fail to join\nleaderboard.",duration:2e3});case 21:case"end":return e.stop()}}),e,null,[[1,17]])}))),n.scene=t,n.scene.add.existing((0,Na.Z)(n)),n}(0,o.Z)(t,e);var n=t.prototype;return n.resetLeadersBoard=function(){var e,t;this.leaders&&this.leaders.forEach((function(e){return e.kill()})),this.currentPlayerLeader&&this.currentPlayerLeader.kill(),null==(e=this.notifyInfo)||e.kill(),null==(t=this.logInContainer)||t.kill()},n.updateData=function(e){var t,n,i,a,r,s=hi()(e)||[],o=pi()(s).call(s,(function(e,t){return+t.score-+e.score}));this.leaders=[];for(var c,l=el(o);!(c=l()).done;){var u=c.value,h=u.playerId,d=u.photo,p=u.score,f=u.name,g=u.rank;if(h){var m=window.game.player.getPlayerId(),v="Anonymous"===f?this.scene.lang.Text.ANONYMOUS:f;m===h&&(t=g,n=p,v="YOU");var y={playerId:h,photo:d,score:p,rank:g,name:v};if(this.leaders.length<3){var E=new jc(this.scene,y);this.leaders.push(E)}}}(this.showLeaders(),GameSDK.player.isGuest())?(null==(i=this.currentPlayerLeader)||i.kill(),this.showNotifyInfo()):(null==(a=this.notifyInfo)||a.kill(),null==(r=this.logInContainer)||r.kill(),this.showCurrentPlayerLeaders(t,n))},n.showLeaders=function(){for(var e=this.leaders,t=0;t<e.length;t++){var n=e[t];if(!n)return;Phaser.Display.Align.In.Center(n,this.scene.main.board,0,t*(n.height+3)-35),n.runShowPopUpAnimation(100*t,300)}},n.showCurrentPlayerLeaders=function(){var e=(0,s.Z)(h().mark((function e(t,n){var i,a,r,s,o,c,l,u,d,p,f,g,m,v,y;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=window.game.player,a=i.getPlayer(),r=a.playerId,a.name,s=a.photo,o={score:i.getBestScore().toString()},c="YOU",t&&n){e.next=17;break}return e.prev=5,e.next=8,Gr(r);case 8:if(e.t0=e.sent,e.t0){e.next=11;break}e.t0={score:i.getBestScore().toString()};case 11:o=e.t0,e.next=17;break;case 14:e.prev=14,e.t1=e.catch(5),o={score:i.getBestScore().toString()};case 17:l=0,u=0,GameCore.Configs.LeadersBoard.UseMock&&(u=Phaser.Math.Between(999,9999),l=Phaser.Math.Between(9999,99999)),d=GameCore.Utils.Valid.isNumber(o.score)||GameCore.Utils.Valid.isString(o.score),o&&("score"in o&&d&&(p=o.score,l="string"===typeof p?+parseInt(p):+p),"rank"in o&&GameCore.Utils.Valid.isNumber(o.rank)&&(f=o.rank,u=+f)),void 0!==t&&(u=t),void 0!==n&&(l=n),this.currentPlayerLeader?(this.currentPlayerLeader.revive(),this.currentPlayerLeader.updateScore(l),this.currentPlayerLeader.updateRank(u,l)):(g={playerId:r,photo:s,score:l,rank:u,name:c},this.currentPlayerLeader=new jc(this.scene,g)),this.currentPlayerLeader.avatar.setY(0),this.currentPlayerLeader.rankText&&(this.currentPlayerLeader.rankText.x-=5),this.currentPlayerLeader.background.kill(),m=this.scene.gameZone.getCenter(),v=m.x,y=m.y,this.currentPlayerLeader.setPosition(v,y+70),this.currentPlayerLeader.runShowPopUpAnimation(400,300);case 31:case"end":return e.stop()}}),e,this,[[5,14]])})));return function(t,n){return e.apply(this,arguments)}}(),n.showNotifyInfo=function(){if(!this.notifyInfo){this.notifyInfo=this.scene.make.bitmapText({font:$a.Z.PRIMARY.KEY,size:this.scene.fontSize(14),text:"Log in to join leaderboards",origin:{x:.5,y:.5}}),this.add(this.notifyInfo);var e=this.scene.make.container({}),t=new $c(this.scene);t.onClick=this.handleLogIn,e.add(t),e.setScale(.5),e.setSize(t.button.width,t.button.height),this.add(e),this.logInContainer=e}this.logInContainer.revive(),this.notifyInfo.revive();var n=this.scene.gameZone.getCenter(),i=n.x,a=n.y;this.notifyInfo.setPosition(i-35,a+70),this.logInContainer.setPosition(i+95,a+70);var r=[1,.5];this.scene.tweens.killTweensOf(this),new Zc({targets:[this.notifyInfo,this.logInContainer],delay:400,duration:300,props:{y:{start:this.notifyInfo.y+70,to:this.notifyInfo.y},scale:{getStart:function(e,t,n,i){return.8*r[i]},getEnd:function(e,t,n,i){return r[i]},duration:1e3,ease:Phaser.Math.Easing.Elastic.Out,easeParams:[.1,.45]}}}).play()},t}(Phaser.GameObjects.Container),al=il,rl=Ka.Z.DEFAULT,sl=rl.KEY,ol=rl.FRAME,cl=GameCore.Configs.LeadersBoard,ll=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n.board=void 0,n.loading=void 0,n.subPanel=void 0,n.leadersBar=void 0,n.countdownTimer=void 0,n.countdownText=void 0,n.emptyMessage=void 0,n.logInButton=void 0,n.handleLogIn=(0,s.Z)(h().mark((function e(){var t,i;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.scene.game.globalScene.screen.open(Da.o4.NOTIFY_SCREEN,{message:n.scene.lang.Text.LOADING,duration:0,loading:!0}),e.prev=1,e.next=4,GameSDK.player.signInManuallyAsync();case 4:return t=GameSDK.player.getID(),i=n.scene.player.getBestScore(),e.next=8,Ur(t,i);case 8:return e.next=10,n.scene.storage.dispatch(qr(cl.LeaderboardId,Er,6,0));case 10:n.scene.game.globalScene.screen.open(Da.o4.NOTIFY_SCREEN,{message:n.scene.lang.Text.JOIN_LB_SUCCESS,duration:2e3}),n.scene.analytics.event(Ht._.LOG_IN,{success:!0}),e.next=18;break;case 14:e.prev=14,e.t0=e.catch(1),n.scene.analytics.event(Ht._.LOG_IN,{success:!1}),n.scene.game.globalScene.screen.open(Da.o4.NOTIFY_SCREEN,{message:n.scene.lang.Text.JOIN_LB_FAIL,duration:2e3});case 18:case"end":return e.stop()}}),e,null,[[1,14]])}))),n.updateCountdown=(0,s.Z)(h().mark((function e(){var t,i,a,r,s,o,c;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=Date.now(),i=new Date(t),a=i.getDay(),r=i.getDate()-a+(0==a?1:8),s=new Date(i.setDate(r)).setHours(0,0,0,0),o=s-t,c=Math.floor(o/864e5),o<0&&(o=0,n.resetLeaderBoards()),n.countdownText.setText("0"+c+":"+(0,yr.F0)(o,!0));case 5:case"end":return e.stop()}}),e)}))),n.scene=t,n.createBoard(),n.createSubPanel(),n.createClock(),n.createCountdownTimer(),n.createLoading(),n.createLeaderBar(),n.createEmptyMessage(),n.createLogInButton(),n.scene.add.existing((0,Na.Z)(n)),n}(0,o.Z)(t,e);var n=t.prototype;return n.setEmptyMessageVisible=function(e){e?(this.emptyMessage.revive(),GameSDK.player.isGuest()?(this.emptyMessage.setText("Log in to join leaderboards"),this.logInButton.revive()):(this.emptyMessage.setText(this.scene.lang.Text.YOU_ARE_THE_TOP_OF_THE_TOP),this.logInButton.kill())):(this.emptyMessage.kill(),this.logInButton.kill())},n.resetLeadersData=function(){this.leadersBar.resetLeadersBoard()},n.updateLeadersData=function(e){this.leadersBar.updateData(e)},n.createBoard=function(){this.board=new Gc(this.scene,0,0,305,200),this.add(this.board)},n.createSubPanel=function(){this.subPanel=this.scene.make.image({key:sl,frame:ol.POPUP_BOARD_BOTTOM}),this.subPanel.setWorldSize(291.5,58),this.add(this.subPanel),this.moveBelow(this.subPanel,this.board),Phaser.Display.Align.In.BottomCenter(this.subPanel,this.board,0,57)},n.createCountdownTimer=function(){var e;null==(e=this.countdownTimer)||e.destroy(),this.countdownTimer=this.scene.time.addEvent({loop:!0,delay:1e3,startAt:1e3,callback:this.updateCountdown})},n.createClock=function(){var e=this.scene.add.container();this.countdownText=this.scene.add.text(0,0,"0",{fontSize:"13px",fontFamily:$a.Z.FONT_FAMILY,color:"#b4b9c4"}),this.countdownText.setHighQuality(),Phaser.Display.Align.In.Center(this.countdownText,e,-30,-2);var t=this.scene.make.image({key:sl,frame:ol.ICON_CLOCK});t.setWorldSize(21,24),Phaser.Display.Align.In.Center(t,e,-47,0),e.add([t,this.countdownText]),Phaser.Display.Align.In.TopCenter(e,this.board,10,-33),this.add(e)},n.createLeaderBar=function(){this.leadersBar=new al(this.scene).setDepth(_a.Z.POPUP)},n.createLoading=function(){this.loading=new Uc.Z(this.scene),this.loading.setTint(5982858),this.loading.setWorldSize(55,55),this.add(this.loading),Phaser.Display.Align.In.Center(this.loading,this.board,0,15)},n.createEmptyMessage=function(){this.emptyMessage=this.scene.make.bitmapText({font:$a.Z.PRIMARY.KEY,size:this.scene.fontSize(17),text:this.scene.lang.Text.YOU_ARE_THE_TOP_OF_THE_TOP,origin:{x:.5,y:.5}}),this.emptyMessage.setCenterAlign(),this.emptyMessage.kill(),this.add(this.emptyMessage)},n.createLogInButton=function(){var e=this.scene.make.container({});this.logInButton=new $c(this.scene),this.logInButton.onClick=this.handleLogIn,e.add(this.logInButton),this.logInButton.kill(),e.setScale(.7),e.setSize(this.logInButton.button.width,this.logInButton.button.height),this.add(e),Phaser.Display.Align.In.BottomCenter(this.logInButton,this.board,0,10)},n.showLoading=function(e){this.loading.setVisible(e),this.setEmptyMessageVisible(!1)},n.resetLeaderBoards=function(){this.leadersBar.resetLeadersBoard(),this.scene.storage.dispatch(Qr())},t}(Phaser.GameObjects.Container),ul=ll,hl=Ka.Z.DEFAULT,dl=hl.KEY,pl=hl.FRAME,fl=function(e){function t(t){var n;return(n=e.call(this,t,dl,pl.BUTTON_GREEN_BIG)||this).buttonsPulsateAnimation=void 0,n.setName("PlaySingle"),n.button.setWorldSize(135.5,73),n.createIcon(),n.createText(),n}(0,o.Z)(t,e);var n=t.prototype;return n.createIcon=function(){var e=this.scene.lang.getCurrentLanguage(),t=this.scene.make.image({key:dl,frame:pl.ICON_PLAY});t.setPosition("ru"===e?-35:-28,-2),t.setWorldSize(28,38.5),this.add(t)},n.createText=function(){var e=this.scene.make.bitmapText({font:$a.Z.PRIMARY.KEY,size:this.scene.fontSize(20),text:this.scene.lang.Text.PLAY_NOW,origin:{x:.5,y:.5}});e.setPosition(16,0),e.setLeftAlign(),this.add(e)},n.runAnimation=function(){var e,t;null==(e=this.buttonsPulsateAnimation)||e.remove(),this.buttonsPulsateAnimation=new Fa({targets:[this],props:{scale:"-=0.02"}}),null==(t=this.buttonsPulsateAnimation)||t.play()},t}(Va.Z),gl=fl,ml=Ka.Z.DEFAULT,vl=ml.KEY,yl=ml.FRAME,El=function(e){function t(t){var n;return(n=e.call(this,t,vl,yl.BUTTON_BLUE_BIG)||this).setName("PlayWithFriends"),n.button.setWorldSize(135.5,73),n.createIcon(),n.createText(),n}(0,o.Z)(t,e);var n=t.prototype;return n.createIcon=function(){var e=this.scene.make.image({key:vl,frame:yl.ICON_FRIENDS});e.setPosition(-28,-2),e.setWorldSize(39.5,37),this.add(e)},n.createText=function(){var e=this.scene.make.bitmapText({font:$a.Z.PRIMARY.KEY,size:this.scene.fontSize(20),text:this.scene.lang.Text.PLAY_n_WITH,origin:{x:.5,y:.5}});e.setPosition(18,0),e.setLeftAlign(),this.add(e)},t}(Va.Z),Al=El,Sl=Ka.Z.DEFAULT.FRAME,bl=function(e){function t(t){var n;return(n=e.call(this,t)||this).dinoTitle=void 0,n.board=void 0,n.scene=void 0,n.playSingleButton=void 0,n.playWithFriendsButton=void 0,n.scene=t,n.createBoard(),n.createDinoTitle(),n.createPlaySingleButton(),n.scene.add.existing((0,Na.Z)(n)),n}(0,o.Z)(t,e);var n=t.prototype;return n.createDinoTitle=function(){var e=this.scene.lang.getCurrentLanguage();this.dinoTitle=new _c(this.scene,{title:this.scene.lang.Text.LEADERBOARDS,titleSize:"ru"===e?22:24}),this.dinoTitle.changeRibbon(Sl.RIBBON_PINK,276.5,68.5),this.dinoTitle.changeBackground(Sl.EGGS,204,61.5),this.add(this.dinoTitle),Phaser.Display.Align.In.Center(this.dinoTitle,this,0,-225)},n.createBoard=function(){this.board=new ul(this.scene),Phaser.Display.Align.In.Center(this.board,this.scene.gameZone,0,-55)},n.createPlaySingleButton=function(){this.playSingleButton=new gl(this.scene),this.add(this.playSingleButton);var e=(this.scene.gameZone.height-610)/4;this.playSingleButton.setPosition(0,155+e)},n.createPlayWithFriendButton=function(){this.playWithFriendsButton=new Al(this.scene),this.add(this.playWithFriendsButton);var e=(this.scene.gameZone.height-610)/4;this.playWithFriendsButton.setPosition(80,155+e)},t}(Phaser.GameObjects.Container),Tl=bl,wl={targets:[],duration:600,ease:Phaser.Math.Easing.Back.Out,props:{y:{from:250,to:0},scale:{from:.9,to:1},alpha:{start:0,from:0,to:1}}},Cl=function(e){function t(t){return e.call(this,wl,t)||this}return(0,o.Z)(t,e),t}(La.Z),Il=n(606),Pl=[{id:"collect-eggs",title:"Collect 300 eggs",require:{egg:300},reward:{coin:200}},{id:"reach-target-points",title:"Reach 10,000 points",require:{score:1e4},reward:{coin:200}},{id:"get-dinomite-combo",title:"Get 1 Dinomite Combo",require:{"dinomite-combo":1},reward:{coin:200}},{id:"use-rescue",title:"Use Second Chance 2 times",require:{"use-rescue":2},reward:{coin:500}},{id:"shoot-flying-eggs",title:"Shoot 5 Flying Dinosaurs",require:{"flying-eggs":5},reward:{coin:200}},{id:"complete-games",title:"Complete game 5 times",require:{"complete-game":5},reward:{coin:200}}],xl=function(){var e=(0,s.Z)(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Pl);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),kl=GameCore.Configs.DailyTasks,Ol=function(e){return function(t){t({type:xi,payload:{tasks:e}});var n=window.game.player.getCustomData("dailyTasks")||{},i=n.startedTime,a=void 0===i?0:i,r=n.logTasks,s=void 0===r?{}:r;t((Date.now()-a)/1e3>kl.Duration?Rl(e):Bl(s))}},Rl=function(e){return function(t){var n={};e.forEach((function(e){var t=e.id,i=e.require;n[t]={},J()(i).forEach((function(e){var i;n[t]=((i={})[e]=0,i.rewarded=!1,i)}))})),window.game.player.setCustomData("dailyTasks",{logTasks:n,startedTime:Date.now()}),t(Bl(n)),Lo.emit(gr.EVENTS.TASKS_RESET)}},Bl=function(e){return{type:ki,payload:{process:e}}},_l=function(){return function(e){e({type:Bi,payload:{}}),Lo.emit(gr.EVENTS.NOTICE_UPDATE)}},Dl=function(e){function t(t,n){var i;(i=e.call(this,t)||this).payload=void 0,i.process=void 0,i.minProcess=void 0,i.maxProcess=void 0,i.progressBoxLeft=void 0,i.progressBoxBg=void 0,i.progressBoxRight=void 0,i.progressBarLeft=void 0,i.progressBarBg=void 0,i.progressBarRight=void 0,i.progressAnimation=void 0,i.payload=n;var a=n.width;return i.setSize(a,16),i.process=0,i.minProcess=0,i.maxProcess=1,i.createProgressBox(),i.createProgressBar(),i.createContainer(),i}(0,o.Z)(t,e);var n=t.prototype;return n.setProcess=function(e,t){void 0===t&&(t=!1),this.process=this.getCorrectValue(e),this.scene&&!t?this.runProcessAnimation(e):this.updateProcess()},n.updateProcess=function(){var e=this.progressBarBg.displayHeight,t=this.getDisplayWidthByProcess(this.process);this.progressBarBg.setWorldSize(t,e);var n=this.progressBarBg.x;this.progressBarRight.setX(n+t)},n.getCorrectValue=function(e){var t=e;return isFinite(t)||(t=0),t<this.minProcess&&(t=this.minProcess),t>this.maxProcess&&(t=this.maxProcess),t},n.getDisplayWidthByProcess=function(e){return(this.width-17)*e},n.runProcessAnimation=function(e){var t,n=this;null==(t=this.progressAnimation)||t.stop(1),this.progressAnimation=this.scene.add.tween({targets:[this.progressBarBg],duration:300,ease:Phaser.Math.Easing.Quadratic.InOut,props:{displayWidth:function(){var t=n.getCorrectValue(e);return n.getDisplayWidthByProcess(t)}},onStart:function(){var e=n.progressBarBg.displayHeight,t=n.getDisplayWidthByProcess(n.process);n.progressBarBg.setWorldSize(t,e)},onUpdate:function(){var e=n.progressBarBg,t=e.x,i=e.displayWidth;n.progressBarRight.setX(t+i)},onComplete:function(){n.updateProcess()}})},n.createProgressBox=function(){var e=this.payload,t=e.key,n=e.frames;this.progressBoxLeft=this.scene.make.image({key:t,frame:n.PROGRESS_BG_LEFT}),this.progressBoxLeft.setOrigin(0,.5),this.progressBoxLeft.setWorldSize(11,16),this.progressBoxRight=this.scene.make.image({key:t,frame:n.PROGRESS_BG_RIGHT}),this.progressBoxRight.setOrigin(0,.5),this.progressBoxRight.setWorldSize(11,16),this.progressBoxBg=this.scene.make.image({key:t,frame:n.PROGRESS_BG_MID}),this.progressBoxBg.setOrigin(0,.5),this.progressBoxBg.setWorldSize(11,16);var i=this.progressBoxBg.displayHeight,a=this.displayWidth,r=this.progressBoxLeft.displayWidth,s=this.progressBoxRight.displayWidth;this.progressBoxLeft.setWorldSize(r,i),this.progressBoxRight.setWorldSize(s,i),this.progressBoxBg.setWorldSize(a-(r+s),i),Phaser.Display.Align.In.Center(this.progressBoxBg,this,0,0),Phaser.Display.Align.In.LeftCenter(this.progressBoxLeft,this,0,0),Phaser.Display.Align.In.RightCenter(this.progressBoxRight,this,0,0)},n.createProgressBar=function(){var e=this.payload,t=e.key,n=e.frames;this.progressBarLeft=this.scene.make.image({key:t,frame:n.PROGRESS_BAR_LEFT}),this.progressBarLeft.setOrigin(0,.5),this.progressBarLeft.setWorldSize(11,16),this.progressBarRight=this.scene.make.image({key:t,frame:n.PROGRESS_BAR_RIGHT}),this.progressBarRight.setOrigin(0,.5),this.progressBarRight.setWorldSize(11,16),this.progressBarBg=this.scene.make.image({key:t,frame:n.PROGRESS_BAR_MID}),this.progressBarBg.setOrigin(0,.5),this.progressBarBg.setWorldSize(11,16);Phaser.Display.Align.In.LeftCenter(this.progressBarBg,this,-5.8),Phaser.Display.Align.In.LeftCenter(this.progressBarLeft,this,-1),Phaser.Display.Align.In.LeftCenter(this.progressBarRight,this,-1),this.setProcess(0,!0)},n.createContainer=function(){this.add([this.progressBoxBg,this.progressBoxLeft,this.progressBoxRight,this.progressBarBg,this.progressBarLeft,this.progressBarRight]),this.scene.add.existing(this)},t}(Phaser.GameObjects.Container),Nl=Dl,Ll=function(){var e=(window.game.player.getCustomData("dailyTasks")||{}).logTasks;return GameCore.Utils.Json.clone(e)},Ml=Ka.Z.DEFAULT,Gl=Ml.KEY,Fl=Ml.FRAME,Zl=function(e){function t(t,n,i){var a;return(a=e.call(this,t)||this).payload=void 0,a.process=void 0,a.isCompleted=void 0,a.background=void 0,a.titleText=void 0,a.processText=void 0,a.progressBar=void 0,a.claimButton=void 0,a.rewardedIcon=void 0,a.missionIcon=void 0,a.handleOnClaim=function(e){return function(){var t=a.payload,n=t.id,i=t.reward,r=a.claimButton.getWorldPosition();a.scene.storage.dispatch(function(e){return function(t){var n=Ll();if(GameCore.Utils.Valid.isObject(n)){var i=n;GameCore.Utils.Object.hasOwn(i,e)&&(i[e].rewarded=!0,window.game.player.setCustomData("dailyTasks",{logTasks:i}),t({type:Ri,payload:{id:e}}))}}}(n)),a.claimButton.kill(),J()(i).forEach((function(t){var n=i[t];e(t,n),a.scene.events.emit("claim-reward",r,n)}))}},a.updateData=function(){var e,t,n=a.getProcessValue(),i=n.current,r=n.target,s=i/r;a.progressBar.setProcess(s,!0),a.setProcessText(i,r),a.isCompleted=i>=r&&!(null!=(e=a.process)&&e.rewarded),a.claimButton.setDisabled(!a.isCompleted),null!=(t=a.process)&&t.rewarded&&a.claimButton.kill(),a.isCompleted&&a.rewardedIcon.setFrame(Fl.ICON_COIN_SMALL)},a.payload=n,a.process=i,a.setName("Task: "+n.id),a.createBackground(),a.updateBlockSize(),a.createMissionIcon(),a.createTitle(),a.createProcessBar(),a.createProcessStatus(),a.createClaimButton(),a.updateData(),a}(0,o.Z)(t,e);var n=t.prototype;return n.setProcess=function(e){this.process=e,this.updateData()},n.getId=function(){return this.payload.id},n.getProcessValue=function(){var e=this,t=this.payload.require,n=J()(t),i=0,a=0;return n.forEach((function(n){i=t[n]||0;var r=e.process[n];a="number"===typeof r?r:0})),{current:a,target:i}},n.setProcessText=function(e,t){this.processText.setText(e+" / "+t)},n.createBackground=function(){this.background=this.scene.make.image({key:Gl,frame:Fl.MISSION_BLOCK_BG}),this.background.setWorldSize(298,74.5),this.add(this.background)},n.updateBlockSize=function(){var e=this.background,t=e.width,n=e.height;this.setSize(t,n)},n.createMissionIcon=function(){var e=this.payload.id,t=gr.COLLECT_EGGS,n=gr.COMPLETE_GAMES,i=gr.INVITE_FRIENDS,a=gr.REACH_TARGET_POINTS,r=gr.SHOOT_FLYING_EGG,s=gr.USE_RESCUE,o=gr.GET_DINOMITE_COMBO;switch(this.missionIcon=this.scene.make.image({key:Gl,frame:Fl.ICON_COIN_SMALL}),e){case t.ID:this.missionIcon.setFrame(Fl.ICON_EGGS),this.missionIcon.setWorldSize(55.5,59.5);break;case n.ID:this.missionIcon.setFrame(Fl.ICON_CROWN),this.missionIcon.setWorldSize(57,57.5);break;case i.ID:this.missionIcon.setFrame(Fl.ICON_INVITE),this.missionIcon.setWorldSize(59.5,54.5);break;case a.ID:this.missionIcon.setFrame(Fl.ICON_10K),this.missionIcon.setWorldSize(65.5,49);break;case r.ID:this.missionIcon.setFrame(Fl.ICON_BIRD),this.missionIcon.setWorldSize(60.5,55);break;case s.ID:var c=64.5,l=48.5;if("ru"===this.scene.lang.getCurrentLanguage())c=80.625,l=60.625;this.missionIcon.setFrame(this.scene.lang.Texture.DAILY_MISSION_2ND),this.missionIcon.setWorldSize(c,l);break;case o.ID:this.missionIcon.setFrame(Fl.ICON_DYNAMITE),this.missionIcon.setWorldSize(47,59)}this.add(this.missionIcon),this.missionIcon.setPosition(-110,0)},n.createTitle=function(){var e=this.payload.title,t=this.scene.lang.getCurrentLanguage();this.titleText=this.scene.make.text({text:e,style:{color:"#63452F",fontFamily:$a.Z.FONT_FAMILY,fontSize:("ru"===t?13:14)+"px"},origin:{x:0,y:.5}}),this.titleText.setHighQuality(),this.add(this.titleText),Phaser.Display.Align.In.LeftCenter(this.titleText,this,-70,-14)},n.createProcessBar=function(){this.progressBar=new Nl(this.scene,{width:136,key:Gl,frames:Fl}),this.add(this.progressBar),Phaser.Display.Align.In.Center(this.progressBar,this,-12,10)},n.createProcessStatus=function(){this.processText=this.scene.make.bitmapText({font:$a.Z.PRIMARY.KEY,size:this.scene.fontSize(12),origin:{x:.5,y:.5}}),this.add(this.processText),Phaser.Display.Align.In.Center(this.processText,this.progressBar,0,0)},n.createClaimButton=function(){this.claimButton=new Va.Z(this.scene,Gl,Fl.BUTTON_GREEN_MINOR,61.5,32);var e="Claim:"+GameCore.Utils.String.toUpperCamelCase(this.payload.id);this.claimButton.setName(e),this.createRewardIcon(),this.createRewardValue(),this.add(this.claimButton),Phaser.Display.Align.In.RightCenter(this.claimButton,this.background,-18,8)},n.createRewardIcon=function(){this.rewardedIcon=this.scene.make.image({key:Gl,frame:Fl.ICON_COIN_SMALL}),this.rewardedIcon.setFrame(Fl.ICON_COIN_SMALL_GREY),this.rewardedIcon.setWorldSize(15.5,15.5),this.claimButton.add(this.rewardedIcon),Phaser.Display.Align.In.Center(this.rewardedIcon,this.claimButton,-15,-1)},n.createRewardValue=function(){var e=this.payload.reward,t=this.scene.make.bitmapText({font:$a.Z.PRIMARY.KEY,size:this.scene.fontSize(14),text:""+e.coin,origin:{x:.5,y:.5}});this.claimButton.add(t),Phaser.Display.Align.In.Center(t,this.claimButton,8,-1)},(0,te.Z)(t,[{key:"onClaim",set:function(e){this.claimButton.onClick=this.handleOnClaim(e),this.updateData()}}]),t}(Phaser.GameObjects.Container),Ul=Zl,Yl=Ka.Z.DEFAULT,Hl=Yl.KEY,zl=Yl.FRAME,Wl=GameCore.Configs.DailyTasks,Vl=function(e){function t(t,n,i,a){var r;return(r=e.call(this,t,n,i,a)||this).onReward=void 0,r.missionsData=void 0,r.missionProcess=void 0,r.startedTime=void 0,r.scroller=void 0,r.popup=void 0,r.missionBlocks=void 0,r.countdownTimer=void 0,r.countdownText=void 0,r.countdownContainer=void 0,r.backgroundFadeInAnimation=void 0,r.popupShowUpAnimation=void 0,r.popupExitsAnimation=void 0,r.contentShowUpAnimation=void 0,r.handleClosePopup=function(){r.scene.storage.dispatch(_l()),r.runCloseAnimation()},r.handleOnClaim=function(e,t){r.claimReward(e,t)},r.resetTaskData=(0,s.Z)(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.startedTime=Date.now(),e.next=3,r.scene.storage.dispatch(Rl(r.missionsData));case 3:r.updateTasksData(),r.scroller.value=0,r.createMissionBlocks();case 6:case"end":return e.stop()}}),e)}))),r.updateTasksData=function(){var e=r.scene,t=e.player,n=e.storage.getState(),i=Wo(n)||[],a=Vo(n)||{},s=(t.getCustomData("dailyTasks")||{}).startedTime,o=void 0===s?0:s;r.missionsData=i,r.missionProcess=a,r.startedTime=o},r.updateCountdown=(0,s.Z)(h().mark((function e(){var t,n,i;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r.startedTime){e.next=2;break}return e.abrupt("return");case 2:if(t=Date.now(),n=t-r.startedTime,!((i=1e3*Wl.Duration-n)<0)){e.next=9;break}return i=0,e.next=9,r.resetTaskData();case 9:r.countdownText.setText(""+(0,yr.F0)(i,!0));case 10:case"end":return e.stop()}}),e)}))),r.createPopup(),r.createCloseButton(),r.createPopupContents(),r.createScroller(),r.createDebugTools(),r.setDepth(Da.Ks.POPUP),r.background.setAlpha(.8),r}(0,o.Z)(t,e);var n=t.prototype;return n.open=function(t){e.prototype.open.call(this,t),this.scene.storage.dispatch(_l()),this.updateTasksData(),this.scroller.value=0,this.createCountdownTimer(),this.createMissionBlocks(),this.runOpenAnimation(),this.scroller.setEnable(!0)},n.createScroller=function(){this.scroller=new Il.Z(this.scene,{width:280,height:310}),this.scene.renderer instanceof Phaser.Renderer.WebGL.WebGLRenderer&&this.scroller.createBound(Ka.Z.DEFAULT.KEY,Ka.Z.DEFAULT.FRAME.BLANK,4,2826565),this.scroller.createMask(),this.scroller.setPosition(0,20),this.popup.add(this.scroller)},n.claimReward=function(e,t){"function"===typeof this.onReward&&(this.onReward(e,t),this.updateTasksData(),this.updateMissionBlocks(),this.scene.audio.playSound(er.Z.DAILY_REWARD))},n.runOpenAnimation=function(){this.setVisible(!0),this.scene.audio.playSound(er.Z.POPUP_SHOW),this.runBackgroundEntrancesAnimation(0,300),this.runPopupEntrancesAnimation(200,500),this.runPopupContentEntrancesAnimation(400,400)},n.runCloseAnimation=function(){this.scene.audio.playSound(er.Z.POPUP_OFF,{volume:.6}),this.runPopupExitsAnimation(0,200)},n.runBackgroundEntrancesAnimation=function(e,t){var n,i=this;if(!this.backgroundFadeInAnimation){var a=this.scene.game.globalScene;this.backgroundFadeInAnimation=new Ya.Z({targets:[this.background],delay:e,duration:t,props:{alpha:{start:0,from:0,to:.8}},onUpdate:function(){var e=i.background.alpha;a instanceof rr.Z&&a.requestBackgroundMaskUpdate(Da.o4.DAILY_MISSIONS_SCREEN,e)}})}null==(n=this.backgroundFadeInAnimation)||n.play()},n.runPopupEntrancesAnimation=function(e,t){var n,i;if(!this.popupShowUpAnimation)return this.popupShowUpAnimation=new Cl({targets:[this.popup],delay:e,duration:t,props:{y:{from:350,to:this.popup.y},scale:{start:0,from:0,to:1},alpha:{start:1,from:1,to:1}}}),void(null==(i=this.popupShowUpAnimation)||i.play());null==(n=this.popupShowUpAnimation)||n.play()},n.runPopupContentEntrancesAnimation=function(e,t){var n,i,a=this.missionBlocks.getChildren();a.length<1||(this.missionBlocks.setAlpha(0),null==(n=this.contentShowUpAnimation)||n.remove(),this.contentShowUpAnimation=new za.Z({targets:a,duration:t,delay:this.scene.tweens.stagger(80,{start:e}),props:{alpha:{from:0,to:1}}}),null==(i=this.contentShowUpAnimation)||i.play())},n.runPopupExitsAnimation=function(e,t){var n,i,a=this;if(!this.popupExitsAnimation)return this.popupExitsAnimation=new Ha.Z({targets:[this.popup],delay:e,duration:t,props:{y:250,scale:0},onComplete:function(){a.scene.screen.close(a.name),a.popup.setY(0);var e=a.scene.game.globalScene;e instanceof rr.Z&&e.requestBackgroundMaskUpdate(Da.o4.DAILY_MISSIONS_SCREEN,0)}}),void(null==(i=this.popupExitsAnimation)||i.play());null==(n=this.popupExitsAnimation)||n.play()},n.createDebugTools=function(){if(GameCore.Utils.Valid.isDebugger()){var e=new Va.Z(this.scene,Hl,zl.ICON_CANCEL);e.button.setWorldSize(21,23),e.setName("Reset"),e.onClick=this.resetTaskData,this.add(e),Phaser.Display.Align.In.TopLeft(e,this.zone,-30,-60)}},n.createCloseButton=function(){var e=new ar.Z(this.scene,{key:Hl,frame:zl.BUTTON_CLOSE,width:48.5,height:43,paddingZone:20});this.popup.add(e),e.setName("Close"),e.useSound=!1,e.onClick=this.handleClosePopup,Phaser.Display.Align.In.TopRight(e,this.popup,25,25)},n.createPopup=function(){this.popup=new Gc(this.scene,0,0,334,410),this.add(this.popup),Phaser.Display.Align.In.Center(this.popup,this.zone)},n.createPopupContents=function(){this.createTitle(),this.createCountdown()},n.createTitle=function(){var e=this.scene.add.container(),t=this.scene.make.image({key:Hl,frame:zl.RIBBON_ORANGE});t.setWorldSize(225,65.5);var n=this.scene.lang.getCurrentLanguage(),i=this.scene.make.bitmapText({font:$a.Z.PRIMARY.KEY,size:this.scene.fontSize("ru"===n?18:24),text:this.scene.lang.Text.DAILY_MISSIONS});Phaser.Display.Align.In.Center(i,t,0,-4),e.add([t,i]),this.popup.add(e),Phaser.Display.Align.In.TopCenter(e,this.popup,0,-10)},n.createCountdown=function(){this.countdownContainer=this.scene.add.container();var e=this.scene.make.image({key:Hl,frame:zl.ICON_CLOCK});e.setWorldSize(18,20.5),this.countdownText=this.scene.make.bitmapText({font:$a.Z.PRIMARY.KEY,size:this.scene.fontSize(16),text:"00:00:00",origin:{x:.5,y:.5}}),Phaser.Display.Align.To.RightCenter(this.countdownText,e,3);var t=e.width+this.countdownText.width-10;this.countdownContainer.add([e,this.countdownText]),this.popup.add(this.countdownContainer),Phaser.Display.Align.In.TopCenter(this.countdownContainer,this.popup,-t/2,-55)},n.createCountdownTimer=function(){var e;null==(e=this.countdownTimer)||e.destroy(),this.countdownTimer=this.scene.time.addEvent({loop:!0,delay:1e3,startAt:1e3,callback:this.updateCountdown})},n.createMissionBlocks=function(){var e,t,n=this;null==(e=this.missionBlocks)||e.destroy(!0);var i=this.missionsData.length,a=vr()(t=new Array(i)).call(t,null);this.missionBlocks=this.scene.add.group({maxSize:i}),a.forEach((function(e,t){var i=n.createMissionBlock(t);null!==i&&n.missionBlocks.add(i)})),this.missionBlocks.setX(0);var r=this.missionBlocks.getChildren();this.scroller.addItems(r)},n.createMissionBlock=function(e){var t=this.missionsData[e].id;if(!GameCore.Utils.Object.hasOwn(this.missionProcess,t))return null;var n=this.missionProcess[t];if(!GameCore.Utils.Valid.isObject(n))return null;var i=new Ul(this.scene,this.missionsData[e],n);return i.setY(70*e-110),i.onClaim=this.handleOnClaim,i},n.updateMissionBlocks=function(){var e=this;this.missionBlocks.getChildren().forEach((function(t){if(t instanceof Ul){var n=t.getId();if(!GameCore.Utils.Object.hasOwn(e.missionProcess,n))return;var i=e.missionProcess[n];if(!GameCore.Utils.Valid.isObject(i))return;t.setProcess(i)}}))},t}(GameCore.Screen),Kl=Vl,jl=[{id:1,type:"diamond",value:1e3},{id:2,type:"diamond",value:1200},{id:3,type:"diamond",value:1400},{id:4,type:"diamond",value:1600},{id:5,type:"diamond",value:1800},{id:6,type:"diamond",value:2e3}],Xl=function(){var e=(0,s.Z)(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",jl);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ql={REWARDED:"rewarded",SKIPPED:"skipped",READY:"ready",WAITING:"waiting"},Jl=(0,re.P1)([function(e){var t;return null==(t=e[Li])?void 0:t.rewards}],(function(e){return e})),Ql=(0,re.P1)([function(e){var t;return null==(t=e[Li])?void 0:t.isRequesting}],(function(e){return e})),$l=GameCore.Configs.DailyRewards,eu=function(e){return function(t){var n,i=window.game.player.getCustomData("dailyRewarded")||{},a=i.logDays,s=void 0===a?[]:a,o=i.lastRewarded,c=void 0===o?0:o,l=new Date,u=new Date(c),h=new Date(u.toDateString()),d=Math.abs(l.valueOf()-h.valueOf()),p=Math.floor(d/864e5)>1,f=$l.CheckInterrupt&&p||s.length>=$l.MaxDays,g=f?[!1]:P()(n=[]).call(n,s,[!1]);tu(g);var m=Ie()(e).call(e,(function(e,t){var n=t<g.length,i=g.length===t+1,a=!1===g[t],s=ql.WAITING;return i?s=ql.READY:f?s=ql.WAITING:n&&a?s=ql.SKIPPED:n&&(s=ql.REWARDED),(0,r.Z)({},e,{status:s})}));t({type:Gi,payload:{rewards:m}})}},tu=function(e,t){void 0===t&&(t=!1),window.game.player.setCustomData("dailyRewarded",{logDays:e,lastRewarded:t?0:Date.now()})},nu=n(434),iu=n(599),au=Ka.Z.DEFAULT,ru=au.KEY,su=au.FRAME,ou=function(e){function t(t,n){var i;return(i=e.call(this,t)||this).payload=void 0,i.blockBg=void 0,i.titleText=void 0,i.iconStatus=void 0,i.glowLight=void 0,i.currencyIcon=void 0,i.currencyText=void 0,i.glowAnimation=void 0,i.scaleAnimation=void 0,i.payload=n,i.setName("Day: "+n.day),i.drawObjects(),i.setStatus(),i}(0,o.Z)(t,e);var n=t.prototype;return n.setStatus=function(){switch(this.payload.status){case ql.READY:this.setStatusReady(),this.runAnimations();break;case ql.SKIPPED:this.setStatusSkipped();break;case ql.REWARDED:this.setStatusRewarded();break;default:this.setStatusWaiting()}},n.setStatusReady=function(){this.setCurrentIconByDay(this.payload.day),this.blockBg.setFrame(su.DAILY_DAY_BG_OPEN),this.glowLight.setVisible(!0),Phaser.Display.Align.In.Center(this.glowLight,this.blockBg)},n.setStatusRewarded=function(){this.setCurrentIconByDay(this.payload.day),this.titleText.setText(this.scene.lang.Text.OWNED),this.titleText.setTint(7332137),this.blockBg.setFrame(su.DAILY_DAY_BG_REWARD)},n.setStatusSkipped=function(){this.setCurrentIconByDay(this.payload.day),this.titleText.setText(this.scene.lang.Text.SKIPPED),this.titleText.setTint(7332137),this.currencyIcon.setPipeline("Grayscale"),this.blockBg.setFrame(su.DAILY_DAY_BG_REWARD)},n.setStatusWaiting=function(){this.currencyIcon.setVisible(!1),this.currencyText.setVisible(!1),this.blockBg.setFrame(su.DAILY_DAY_BG_WAIT)},n.setCurrentIconByDay=function(e){var t=su.DAILY_DAY_COIN_DAY_1;switch(e){case 1:t=su.DAILY_DAY_COIN_DAY_1,this.currencyIcon.setFrame(t),this.currencyIcon.setWorldSize(32,30.5);break;case 2:t=su.DAILY_DAY_COIN_DAY_2,this.currencyIcon.setFrame(t),this.currencyIcon.setWorldSize(41.5,31.5);break;case 3:t=su.DAILY_DAY_COIN_DAY_3,this.currencyIcon.setFrame(t),this.currencyIcon.setWorldSize(55,34.5);break;case 4:t=su.DAILY_DAY_COIN_DAY_4,this.currencyIcon.setFrame(t),this.currencyIcon.setWorldSize(55,59);break;case 5:t=su.DAILY_DAY_COIN_DAY_5,this.currencyIcon.setFrame(t),this.currencyIcon.setWorldSize(61.5,61);break;case 6:t=su.DAILY_DAY_COIN_DAY_6,this.currencyIcon.setFrame(t),this.currencyIcon.setWorldSize(64.5,55)}},n.drawObjects=function(){this.createGlowLight(),this.createBlockBG(),this.createTitleText(),this.createCurrencyIcon(),this.createCurrencyText(),this.createIconStatus()},n.createGlowLight=function(){var e=Ka.Z.EFFECTS,t=e.KEY,n=e.FRAME;this.glowLight=this.scene.make.image({key:t,frame:n.FX_GLOW_LIGHT}),this.glowLight.setVisible(!1),this.glowLight.setWorldSize(206,199.5),this.add(this.glowLight)},n.createBlockBG=function(){this.blockBg=this.scene.make.image({key:ru,frame:su.DAILY_DAY_BG_WAIT}),this.blockBg.setWorldSize(91.5,107.5),this.add(this.blockBg)},n.createTitleText=function(){var e=this.payload.day,t=this.scene.lang.getCurrentLanguage();this.titleText=this.scene.make.bitmapText({font:$a.Z.PRIMARY.KEY,size:this.scene.fontSize("ru"===t?13:16),text:this.scene.lang.getText({key:"DAY_X",variables:[e]}),origin:{x:.5,y:.5}}),this.add(this.titleText),Phaser.Display.Align.In.TopCenter(this.titleText,this.blockBg,0,-12)},n.createCurrencyIcon=function(){this.currencyIcon=this.scene.make.image({key:ru,frame:su.DAILY_DAY_COIN_DAY_1}),this.currencyIcon.setWorldSize(32,30.5),this.add(this.currencyIcon),Phaser.Display.Align.In.Center(this.currencyIcon,this.blockBg,0,-3)},n.createIconStatus=function(){this.iconStatus=this.scene.make.image({key:ru,frame:su.ICON_DOT}),this.iconStatus.setVisible(!1),this.iconStatus.setWorldSize(10,11),this.add(this.iconStatus),Phaser.Display.Align.In.Center(this.iconStatus,this.currencyIcon,20,10)},n.createCurrencyText=function(){var e=this.payload.value;this.currencyText=this.scene.make.bitmapText({font:$a.Z.PRIMARY.KEY,size:this.scene.fontSize(24),text:""+e,origin:{x:.5,y:.5}}),this.add(this.currencyText),Phaser.Display.Align.In.BottomCenter(this.currencyText,this.blockBg,0,-12)},n.runAnimations=function(){this.runGlowAnimation(),this.runScaleAnimation()},n.runGlowAnimation=function(){this.glowAnimation||(this.glowAnimation=new nu.Z({targets:[this.glowLight],repeat:-1,duration:6e3})),this.glowAnimation.play()},n.runScaleAnimation=function(){var e=this;this.scaleAnimation||(this.scaleAnimation=new iu.Z({targets:[this],delay:1e3,duration:1e3,ease:Phaser.Math.Easing.Elastic.Out,easeParams:[.1,.45],props:{scale:1.2},onStart:function(){var t;null==(t=e.parentContainer)||t.bringToTop(e)}})),this.scaleAnimation.play()},t}(Phaser.GameObjects.Container),cu=ou,lu=Ka.Z.DEFAULT,uu=lu.KEY,hu=lu.FRAME,du=GameCore.Configs,pu=du.Network,fu=du.DailyRewards,gu={id:0,type:"diamond",value:0},mu=function(e){function t(t,n,i,a){var r;return(r=e.call(this,t,n,i,a)||this).onReward=void 0,r.onSkipAd=void 0,r.onNoAd=void 0,r.logDays=void 0,r.rewardsData=void 0,r.popup=void 0,r.loading=void 0,r.dayBlocks=void 0,r.currentDayBlocks=void 0,r.claimButton2X=void 0,r.backgroundFadeInAnimation=void 0,r.popupShowUpAnimation=void 0,r.popupExitsAnimation=void 0,r.contentShowUpAnimation=void 0,r.adsTimer=void 0,r.handleClosePopup=function(){r.runCloseAnimation()},r.handleOnClaim=function(){var e=r.getCurrentRewardValue();r.claimReward(e)},r.handleOnClaimX2=(0,s.Z)(h().mark((function e(){var t,n,i,a,s;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.scene,n=t.audio,i=t.game,e.prev=1,r.claimButton2X.setDisabled(!0),i.globalScene.screen.open(Da.o4.NOTIFY_SCREEN,{message:r.scene.lang.Text.LOADING,duration:0,loading:!0}),window.ignoreResumeMusicOnFocus=!0,n.pauseMusic(),n.stopAllSounds(),n.muteAll(),e.next=10,new(l())((function(e,t){var n;null==(n=r.adsTimer)||n.remove(),r.adsTimer=r.scene.time.delayedCall(pu.Timeout,t),r.scene.ads.getAdStatus(GameCore.Ads.Types.REWARDED)===GameCore.Ads.Status.LOADING?r.scene.ads.events.once(GameCore.Ads.Events.LOADED,e):r.scene.ads.preloadRewardedVideoAsync().then(e).catch(t)}));case 10:return e.next=12,r.scene.ads.showRewardedVideoAsync();case 12:i.globalScene.screen.close(Da.o4.NOTIFY_SCREEN),a=r.getCurrentRewardValue(),r.claimReward(2*a),e.next=24;break;case 17:if(e.prev=17,e.t0=e.catch(1),!(e.t0 instanceof Object&&GameCore.Utils.Object.hasOwn(e.t0,"code"))){e.next=23;break}if("USER_INPUT"!==e.t0.code){e.next=23;break}return r.onSkipAd(),e.abrupt("return");case 23:r.onNoAd();case 24:return e.prev=24,window.ignoreResumeMusicOnFocus=!1,r.scene.ads.preloadRewardedVideoAsync().catch((function(){})),null==(s=r.adsTimer)||s.destroy(),n.unmuteAll(),n.playMusic(),r.claimButton2X.setDisabled(!1),e.finish(24);case 32:case"end":return e.stop()}}),e,null,[[1,17,24,32]])}))),r.updateRewardsData=(0,s.Z)(h().mark((function e(){var t,n,i,a,o,c,l,u,d;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.scene,i=n.storage,a=n.player,e.next=3,i.dispatch(function(){var e=(0,s.Z)(h().mark((function e(t,n){var i,a;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=n(),!Ql(i)){e.next=4;break}return e.abrupt("return");case 4:return t({type:Mi,payload:{}}),e.next=7,Xl();case 7:a=e.sent,t(eu(a));case 9:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}());case 3:if(o=i.getState(),!((null==(c=Jl(o)||[])?void 0:c.length)<1)){e.next=7;break}return e.abrupt("return");case 7:r.rewardsData=c,l=a.getCustomData("dailyRewarded"),u=(l||{}).logDays,d=void 0===u?[]:u,r.logDays=P()(t=[]).call(t,d);case 11:case"end":return e.stop()}}),e)}))),r.checkOpenable=(0,s.Z)(h().mark((function e(){var t,n,i,a,s,o,c;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=r.scene.player,n=t.getCustomData("dailyRewarded"),a=(i=n||{}).logDays,s=void 0===a?[]:a,o=i.lastRewarded,c=void 0===o?0:o,!(s.length>fu.MaxDays)){e.next=5;break}return e.abrupt("return",!0);case 5:if(!(fu.MockTime>0)){e.next=9;break}if(!(Date.now()-c>=1e3*fu.MockTime)){e.next=9;break}return e.abrupt("return",!0);case 9:if(!(0,yr.Gm)(c)){e.next=11;break}return e.abrupt("return",!1);case 11:return e.abrupt("return",!0);case 12:case"end":return e.stop()}}),e)}))),r.rewardsData=[],r.createPopup(),r.createCloseButton(),r.createPopupContents(),r.setDepth(Da.Ks.POPUP),r.background.setAlpha(.8),r}(0,o.Z)(t,e);var n=t.prototype;return n.open=function(){var t=(0,s.Z)(h().mark((function t(n){var i,a;return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=(n||{}).readonly,a=void 0!==i&&i,t.next=3,this.checkOpenable();case 3:if(t.sent||a){t.next=6;break}return t.abrupt("return");case 6:return e.prototype.open.call(this),a&&this.claimButton2X.setDisabled(!0),t.next=10,this.updateRewardsData();case 10:this.createDayBlocks(),this.runOpenAnimation();case 12:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),n.claimReward=function(e){var t,n;if("function"===typeof this.onReward&&!((null==(t=this.logDays)?void 0:t.length)<1)&&!this.logDays[this.logDays.length-1]){this.logDays[this.logDays.length-1]=!0,tu(P()(n=[]).call(n,this.logDays));var i=this.currentDayBlocks.getWorldPosition().x,a=this.currentDayBlocks.getWorldPosition().y;this.scene.events.emit("claim-reward",{x:i,y:a},e),this.onReward(e),this.scene.audio.playSound(er.Z.DAILY_REWARD),this.runCloseAnimation()}},n.getCurrentRewardValue=function(){var e,t=k()(e=this.rewardsData).call(e,(function(e){return e.status===ql.READY}));return(null==t?void 0:t.value)||0},n.getRewardByDay=function(e){var t;return k()(t=this.rewardsData).call(t,(function(t){return t.id===e}))||gu},n.runOpenAnimation=function(){this.setVisible(!0),this.scene.audio.playSound(er.Z.POPUP_SHOW),this.runBackgroundEntrancesAnimation(0,300),this.runPopupEntrancesAnimation(150,400),this.runPopupContentEntrancesAnimation(300,300)},n.runCloseAnimation=function(){this.scene.audio.playSound(er.Z.POPUP_OFF,{volume:.6}),this.runPopupExitsAnimation(0,200)},n.runBackgroundEntrancesAnimation=function(e,t){var n=this;if(!this.backgroundFadeInAnimation){var i=this.scene.game.globalScene;this.backgroundFadeInAnimation=new Ya.Z({targets:[this.background],delay:e,duration:t,props:{alpha:{getStart:function(){return 0},getEnd:function(){return.8}}},onUpdate:function(){var e=n.background.alpha;i instanceof rr.Z&&i.requestBackgroundMaskUpdate(Da.o4.DAILY_REWARD_SCREEN,e)}})}this.backgroundFadeInAnimation.play()},n.runPopupEntrancesAnimation=function(e,t){this.popupShowUpAnimation||(this.popupShowUpAnimation=new Cl({targets:[this.popup],delay:e,duration:t,props:{scale:{start:0,from:0,to:1},alpha:{start:1,from:1,to:1}}})),this.popupShowUpAnimation.play()},n.runPopupContentEntrancesAnimation=function(e,t){var n,i=this.dayBlocks.getChildren();i.length<1||(null==(n=this.contentShowUpAnimation)||n.remove(),this.contentShowUpAnimation=new za.Z({targets:i,duration:t,delay:this.scene.tweens.stagger(150,{start:e}),props:{alpha:{start:0,from:0,to:1}}}),this.contentShowUpAnimation.play())},n.runPopupExitsAnimation=function(e,t){var n=this;this.popupExitsAnimation||(this.popupExitsAnimation=new Ha.Z({targets:[this.popup],delay:e,duration:t,props:{y:250,scale:0},onComplete:function(){n.scene.screen.close(n.name);var e=n.scene.game.globalScene;e instanceof rr.Z&&e.requestBackgroundMaskUpdate(Da.o4.DAILY_REWARD_SCREEN,0)}})),this.dayBlocks.destroy(!0,!0),this.popupExitsAnimation.play()},n.createCloseButton=function(){var e=new ar.Z(this.scene,{key:uu,frame:hu.BUTTON_CLOSE,width:48.5,height:43,paddingZone:20});this.popup.add(e),e.setName("Close"),e.useSound=!1,e.onClick=this.handleOnClaim,Phaser.Display.Align.In.TopRight(e,this.popup,25,25)},n.createPopup=function(){this.popup=new Gc(this.scene,0,0,334,390),this.add(this.popup),Phaser.Display.Align.In.Center(this.popup,this.zone)},n.createPopupContents=function(){this.createTitle(),this.createLoading(),this.createClaimX2Button()},n.createTitle=function(){var e=this.scene.add.container(),t=this.scene.make.image({key:uu,frame:hu.RIBBON_VIOLET});t.setWorldSize(225,65.5);var n=this.scene.lang.getCurrentLanguage(),i=this.scene.make.bitmapText({font:$a.Z.PRIMARY.KEY,size:this.scene.fontSize("ru"===n?16:22),text:this.scene.lang.Text.DAILY_REWARDS});Phaser.Display.Align.In.Center(i,t,0,-2),e.add([t,i]),this.popup.add(e),Phaser.Display.Align.In.TopCenter(e,this.popup,0,-10)},n.createLoading=function(){this.loading=new Uc.Z(this.scene),this.loading.setVisible(!1),this.loading.setTint(12237498),this.popup.add(this.loading),Phaser.Display.Align.In.Center(this.loading,this.popup)},n.createDayBlocks=function(){var e,t,n=this;null==(e=this.dayBlocks)||e.destroy(!0,!0);var i=fu.MaxDays;this.dayBlocks=this.scene.make.group({maxSize:i}),vr()(t=new Array(i)).call(t,null).forEach((function(e,t){var i=n.createDayBlock(t+1);n.dayBlocks.add(i)})),Phaser.Actions.GridAlign(this.dayBlocks.getChildren(),{width:3,height:2,cellWidth:102,cellHeight:122,x:-50,y:-30})},n.createDayBlock=function(e){var t=this.getRewardByDay(e),n=t.type,i=t.value,a=t.status,r=void 0===a?"":a,s=new cu(this.scene,{day:e,type:n,value:i,status:r});return s.setAlpha(0),this.popup.add(s),r===ql.READY&&(this.currentDayBlocks=s),s},n.createClaimX2Button=function(){this.claimButton2X=new Va.Z(this.scene,uu,hu.BUTTON_BLUE,134,68),this.claimButton2X.setName("ClaimX2");var e=this.scene.lang.getCurrentLanguage(),t=this.scene.make.bitmapText({font:$a.Z.PRIMARY.KEY,size:this.scene.fontSize("ru"===e?12:16),text:this.scene.lang.Text.CLAIM_X2,origin:{x:0,y:.5}}),n=this.scene.make.image({key:uu,frame:hu.ICON_ADS_VIDEO});n.setWorldSize(36,28),Phaser.Display.Align.In.Center(n,this.claimButton2X,-34),Phaser.Display.Align.In.Center(t,this.claimButton2X,19,0),this.claimButton2X.add([t,n]),this.popup.add(this.claimButton2X),Phaser.Display.Align.In.BottomCenter(this.claimButton2X,this.popup,0,-25),this.claimButton2X.onClick=this.handleOnClaimX2},t}(GameCore.Screen),vu=mu,yu=Ka.Z.DEFAULT.KEY,Eu=function(e){function t(t,n){var i;(i=e.call(this,t,yu,n.framePanel)||this).options=void 0,i.icon=void 0,i.label=void 0,i.getFrameByStatus=function(){var e=i.options,t=e.enable,n=e.frameOn,a=e.frameOff;return t?n:a},i.options=n,i.createIcon(),i.createLabel();var a=i.options.enable;return i.updateStatus(a),i}(0,o.Z)(t,e);var n=t.prototype;return n.processCallback=function(e){var t=this.options.enable;this.updateStatus(!t),e(!t)},n.updateStatus=function(e){this.options.enable=e;var t=this.getFrameByStatus();this.icon.setFrame(t);var n=this.scene.lang;this.label.setText(e?n.Text.ON:n.Text.OFF),this.alignSwitch()},n.createIcon=function(){var e=this.getFrameByStatus();this.icon=this.scene.make.image({key:yu,frame:e}),this.add(this.icon),Phaser.Display.Align.In.Center(this.icon,this.button)},n.createLabel=function(){var e=this.scene.lang.getCurrentLanguage();this.label=this.scene.make.bitmapText({font:$a.Z.PRIMARY.KEY,size:this.scene.fontSize("ru"===e?12:14)}),this.add(this.label)},n.alignSwitch=function(){var e=this.options.enable,t=this.scene.lang.getCurrentLanguage();if(e){var n="ru"===t?-13:-10;this.icon.setOrigin(1,.5),Phaser.Display.Align.In.RightCenter(this.icon,this.button),Phaser.Display.Align.In.LeftCenter(this.label,this.button,n,1)}else{var i="ru"===t?-7:-13;this.icon.setOrigin(0,.5),Phaser.Display.Align.In.LeftCenter(this.icon,this.button),Phaser.Display.Align.In.RightCenter(this.label,this.button,i,1)}},n.logButtonEvent=function(){var e=this.getParentName(),t=this.name,n=!this.options.enable;this.scene.analytics.event(Ht._.BUTTON_CLICK,{button_name:t,screen_name:e,enable:n})},t}(Va.Z),Au=Eu,Su=function(){var e=GameCore.Utils.Device,t=window.navigator.vibrate;return e.isAndroid()&&"function"===typeof t||e.isMobileWeb()&&"function"===typeof t},bu=function(){var e=(0,s.Z)(h().mark((function e(t){var n,i,a,r,o;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=Math.round(t/80),i=0,a=function(){var e=(0,s.Z)(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,FBInstant.performHapticFeedbackAsync();case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0);case 8:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(){return e.apply(this,arguments)}}();case 3:if(!(i<n)){e.next=11;break}return r=a(),o=(0,yr.qZ)(80),i+=1,e.next=9,l().all([r,o]);case 9:e.next=3;break;case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Tu=function(e){window.navigator.vibrate(0),window.navigator.vibrate(e)},wu=function(e){try{if(!Su())return!1;var t=GameCore.Utils.Device;t.isAndroid()||t.isMobileWeb()?Tu(e):t.isIOS()&&bu(e).catch((function(e){}))}catch(n){}},Cu=Ka.Z.DEFAULT,Iu=Cu.KEY,Pu=Cu.FRAME,xu=function(e){function t(t,n,i,a){var r;return(r=e.call(this,t,n,i,a)||this).popup=void 0,r.title=void 0,r.contents=void 0,r.settingMusic=void 0,r.settingSound=void 0,r.settingVibrate=void 0,r.blockMusic=void 0,r.blockSound=void 0,r.blockVibrate=void 0,r.popupShowUpAnimation=void 0,r.popupFadeOutAnimation=void 0,r.contentShowUpAnimation=void 0,r.handleClose=function(){r.runCloseAnimation()},r.handleMusicSetting=function(e){r.scene.player.setSetting("music",e),e?r.scene.audio.playMusic():r.scene.audio.pauseMusic()},r.handleSoundSetting=function(e){r.scene.player.setSetting("sound",e)},r.handleVibrateSetting=function(e){r.scene.player.setSetting("vibrate",e)},r.createPopup(),r.createCloseButton(),r.createTitle(),r.createButtons(),r.addItem(),r.createInput(),r.setDepth(Da.Ks.POPUP),r.background.setAlpha(.8),r}(0,o.Z)(t,e);var n=t.prototype;return n.open=function(){e.prototype.open.call(this);var t=this.scene.game.globalScene;t instanceof rr.Z&&t.requestBackgroundMaskUpdate(Da.o4.SETTINGS_SCREEN,.8);var n=this.scene.player.getPlayerSettings(),i=n.music,a=n.sound,r=n.vibrate;this.settingMusic.updateStatus(i),this.settingSound.updateStatus(a),this.settingVibrate.updateStatus(r),Su()||(this.blockVibrate.setVisible(!1),this.blockMusic.setPosition(0,-30),this.blockSound.setPosition(0,40)),this.runOpenAnimation()},n.createInput=function(){this.settingMusic.onClick=this.handleMusicSetting,this.settingSound.onClick=this.handleSoundSetting,this.settingVibrate.onClick=this.handleVibrateSetting},n.createCloseButton=function(){var e=new ar.Z(this.scene,{key:Iu,frame:Pu.BUTTON_CLOSE,width:48.5,height:43,paddingZone:20});this.popup.add(e),e.setName("Close"),e.useSound=!1,e.onClick=this.handleClose,Phaser.Display.Align.In.TopRight(e,this.popup,25,25)},n.createPopup=function(){this.popup=new Gc(this.scene,0,0,310,220),this.add(this.popup),Phaser.Display.Align.In.Center(this.popup,this.zone)},n.createTitle=function(){this.title=this.scene.add.container();var e=this.scene.make.image({key:Iu,frame:Pu.RIBBON_VIOLET});e.setWorldSize(225,65.5);var t=this.scene.make.bitmapText({font:$a.Z.PRIMARY.KEY,size:this.scene.fontSize(26),text:this.scene.lang.Text.SETTINGS,origin:{x:.5,y:.5}});Phaser.Display.Align.In.Center(t,e,0,-2),this.title.add([e,t]),Phaser.Display.Align.In.TopCenter(this.title,this.popup)},n.createButtons=function(){var e=this.scene.player.getPlayerSettings(),t=e.music,n=e.sound,i=e.vibrate;this.createMusicButton(t),this.createSoundButton(n),this.createVibrateButton(i)},n.createMusicButton=function(e){this.blockMusic=this.scene.make.container({}),this.settingMusic=new Au(this.scene,{enable:e,frameOn:Pu.SWITCH_ON,frameOff:Pu.SWITCH_OFF,framePanel:Pu.SWITCH_PANEL}),this.settingMusic.setName("Music"),this.settingMusic.setPosition(60,0),this.settingMusic.icon.setWorldSize(25.5,24),this.settingMusic.button.setWorldSize(67.5,26);var t=this.scene.make.image({key:Iu,frame:Pu.ICON_MUSIC});t.setPosition(-85,0),t.setWorldSize(34,37.5);var n=this.scene.lang.getCurrentLanguage(),i=this.scene.make.bitmapText({font:$a.Z.PRIMARY.KEY,size:this.scene.fontSize("ru"===n?17:20),text:this.scene.lang.Text.MUSIC,alpha:.8});i.setPosition(-60,-8),this.blockMusic.add([t,i,this.settingMusic]),this.blockMusic.setPosition(0,-40)},n.createSoundButton=function(e){this.blockSound=this.scene.make.container({}),this.settingSound=new Au(this.scene,{enable:e,frameOn:Pu.SWITCH_ON,frameOff:Pu.SWITCH_OFF,framePanel:Pu.SWITCH_PANEL}),this.settingSound.setName("Sound"),this.settingSound.setPosition(60,0),this.settingSound.icon.setWorldSize(25.5,24),this.settingSound.button.setWorldSize(67.5,26);var t=this.scene.make.image({key:Iu,frame:Pu.ICON_SOUND});t.setPosition(-85,0),t.setWorldSize(30.5,37.5);var n=this.scene.lang.getCurrentLanguage(),i=this.scene.make.bitmapText({font:$a.Z.PRIMARY.KEY,size:this.scene.fontSize("ru"===n?17:20),text:this.scene.lang.Text.SOUND,alpha:.8});i.setPosition(-60,-8),this.blockSound.add([t,i,this.settingSound]),this.blockSound.setPosition(0,10)},n.createVibrateButton=function(e){this.blockVibrate=this.scene.make.container({}),this.settingVibrate=new Au(this.scene,{enable:e,frameOn:Pu.SWITCH_ON,frameOff:Pu.SWITCH_OFF,framePanel:Pu.SWITCH_PANEL}),this.settingVibrate.setName("Vibrate"),this.settingVibrate.setPosition(60,0),this.settingVibrate.icon.setWorldSize(25.5,24),this.settingVibrate.button.setWorldSize(67.5,26);var t=this.scene.make.image({key:Iu,frame:Pu.ICON_VIB});t.setPosition(-85,0),t.setWorldSize(28,40);var n=this.scene.lang.getCurrentLanguage(),i=this.scene.make.bitmapText({font:$a.Z.PRIMARY.KEY,size:this.scene.fontSize("ru"===n?17:20),text:this.scene.lang.Text.VIBRATE,alpha:.8});i.setPosition(-60,"ru"===n?-8:-12),this.blockVibrate.add([t,i,this.settingVibrate]),this.blockVibrate.setPosition(0,60)},n.addItem=function(){this.popup.add([this.title,this.blockMusic,this.blockSound,this.blockVibrate]),this.contents=this.scene.add.group(),this.contents.addMultiple([this.blockMusic,this.blockSound,this.blockVibrate])},n.runOpenAnimation=function(){var e;null!=(e=this.popupShowUpAnimation)&&null!=(e=e.tween)&&e.isPlaying()||(this.scene.audio.playSound(er.Z.POPUP_SHOW),this.runPopupEntrancesAnimation(0,400),this.runPopupContentEntrancesAnimation(200,300))},n.runCloseAnimation=function(){var e;null!=(e=this.popupFadeOutAnimation)&&null!=(e=e.tween)&&e.isPlaying()||(this.scene.audio.playSound(er.Z.POPUP_OFF,{volume:.6}),this.runPopupExitsAnimation(0,200))},n.runPopupEntrancesAnimation=function(e,t){if(!this.popupShowUpAnimation){var n=this.popup,i=n.y,a=n.scale;this.popupShowUpAnimation=new Cl({targets:[this.popup],delay:e,duration:t,props:{y:{from:350,to:i},alpha:{start:1,from:1,to:1},scale:{start:0,from:0,to:a}}})}this.popupShowUpAnimation.play()},n.runPopupContentEntrancesAnimation=function(e,t){var n;null==(n=this.contentShowUpAnimation)||n.remove(),this.contentShowUpAnimation=new za.Z({targets:this.contents.getChildren(),duration:t,delay:e,props:{alpha:{start:0,from:0,to:1}}}),this.contentShowUpAnimation.play()},n.runPopupExitsAnimation=function(e,t){var n=this;this.popupFadeOutAnimation||(this.popupFadeOutAnimation=new Ha.Z({targets:[this.popup],delay:e,duration:t,props:{y:250,scale:0},onComplete:function(){n.popup.setY(0);var e=n.scene.game.globalScene;e instanceof rr.Z&&e.requestBackgroundMaskUpdate(Da.o4.SETTINGS_SCREEN,0),n.scene.screen.close(n.name)}})),this.popupFadeOutAnimation.play()},t}(GameCore.Screen),ku=xu,Ou=n(607),Ru=Ka.Z.DEFAULT,Bu=Ru.KEY,_u=Ru.FRAME,Du=function(){function e(e){var t=this;this.scene=void 0,this.leftBackgroundLine=void 0,this.rightBackgroundLine=void 0,this.handleResizeBackgroundBars=function(){var e=t.scene.game.world.getWorldSize(),n=e.width,i=e.height;t.leftBackgroundLine.setWorldSize(.1*n,i),t.rightBackgroundLine.setWorldSize(.1*n,i)},this.scene=e,this.addBackgroundLines()}return e.prototype.addBackgroundLines=function(){var e=this.scene.game.world.getWorldSize(),t=e.width,n=e.height,i=.1*t*(16/34),a=this.scene.add.image(-1*i,0,Bu,_u.LINE_LEFT);a.setOrigin(0,0),a.setWorldSize(.1*t,2*n);var r=this.scene.add.image(t+i,0,Bu,_u.LINE_RIGHT);r.setOrigin(1,0),r.setWorldSize(.1*t,2*n),this.leftBackgroundLine=a,this.rightBackgroundLine=r,this.leftBackgroundLine.setDepth(_a.Z.BACKGROUND_LINE),this.rightBackgroundLine.setDepth(_a.Z.BACKGROUND_LINE)},e}(),Nu=Du,Lu=GameCore.Configs,Mu=Lu.Gameplay,Gu=Lu.LeadersBoard,Fu=function(e){function t(){for(var t,n,i=arguments.length,a=new Array(i),r=0;r<i;r++)a[r]=arguments[r];return(n=e.call.apply(e,P()(t=[this]).call(t,a))||this).main=void 0,n.header=void 0,n.footer=void 0,n.backgroundLines=void 0,n.rewardScreen=void 0,n.dailyMissionScreen=void 0,n.dailyRewardsScreen=void 0,n.currentCoins=void 0,n.timerDailyRewards=void 0,n.coinsExplosive2=void 0,n.coinsExplosiveTimer=void 0,n.run=function(){var e,t;n.currentCoins=0,null==(e=n.footer.missionIcon)||e.checkNotice(),n.main.playSingleButton.runAnimation(),Lo.off(gr.EVENTS.NOTICE_UPDATE,n.footer.missionIcon.checkNotice),Lo.on(gr.EVENTS.NOTICE_UPDATE,n.footer.missionIcon.checkNotice),n.updateCurrentBestScore(),n.updateCurrentCoins(),null==(t=n.timerDailyRewards)||t.remove(),n.timerDailyRewards=n.time.delayedCall(300,(function(){n.screen.open(Da.o4.DAILY_REWARD_SCREEN)}));var i=[{selector:ts,callback:function(e){if(n.main.board.showLoading(e),n.main.board.resetLeadersData(),!1===e){var t=n.game.storage.getState(),i=es(t);if(J()(i).length<1)return void n.main.board.setEmptyMessageVisible(!0);n.main.board.updateLeadersData(i),n.main.board.setEmptyMessageVisible(!1)}}}];n.handleStateChange(i),n.handleNewUserLogin(),n.facebook.attemptToAddShortcut()},n.eatCoins=function(e){var t=n.currentCoins+e;n.player.setCustomData("coin",t)},n.earnAdsRewardAnimation=function(e){var t=n.gameZone.width/2,i=n.gameZone.height/2;n.runCoinsExplodeEffect({x:t,y:i},e)},n.runCoinsExplodeEffect=function(e,t){var i=n.header.coinBar.getCoinIconPosition(),a=i.x,r=i.y,s=t/25>15?15:t/25;n.coinsExplosive2.explode(s,e.x,e.y,a,r).forEach((function(e){e.on(Phaser.Tweens.Events.TWEEN_START,(function(){n.header.setDepth(_a.Z.ON_TOP)})),e.on(Phaser.Tweens.Events.TWEEN_COMPLETE,(function(e){var i,a=n.currentCoins+t/s;n.setCoins(a),null==(i=n.coinsExplosiveTimer)||i.remove(),e.totalProgress<1?n.header.setDepth(_a.Z.ITEM):n.coinsExplosiveTimer=n.time.delayedCall(1e3,(function(){n.header.setDepth(_a.Z.ITEM)}))}))}))},n.showNotifyNoAds=function(){n.game.globalScene.screen.open(Da.o4.NOTIFY_SCREEN,{message:n.lang.Text.NO_ADS,duration:1200,loading:!1})},n.showNotifySkipAds=function(){n.game.globalScene.screen.open(Da.o4.NOTIFY_SCREEN,{message:n.lang.Text.SORRY_NO_REWARDS,duration:1500,loading:!1})},n.handlePlayOnline=function(){n.storage.dispatch(Oo())},n.handlePlaySingle=function(){n.storage.dispatch(Co())},n.handlePlayWithFriend=(0,s.Z)(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.storage.dispatch(vo(!0));case 2:return e.next=4,n.storage.dispatch(Po());case 4:return e.next=6,n.storage.dispatch(vo(!1));case 6:case"end":return e.stop()}}),e)}))),n.handleSettingClick=function(){n.screen.open(Da.o4.SETTINGS_SCREEN)},n.handleRankIconClick=function(){n.scene.switch(Sa.C.LEADERBOARD_SCENE)},n.handleDailyIconClick=function(){n.screen.open(Da.o4.DAILY_MISSIONS_SCREEN)},n.handleInviteIconClick=function(){n.facebook.shareAsync({image:"",intent:"SHARE",text:""})},n.handleCoinBarClick=function(){n.rewardScreen.onReward=n.earnAdsRewardAnimation,n.screen.open(Da.o4.REWARD_SCREEN,{awardCoins:Mu.AwardCoins})},n.handleDinoClick=function(){n.scene.switch(Sa.C.TOURNAMENT_SCENE)},n}(0,o.Z)(t,e);var n=t.prototype;return n.handleNewUserLogin=function(){var e=(0,s.Z)(h().mark((function e(){var t,n;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=window.game.player.getBestScore(),n=window.game.player.getPlayerId(),e.next=5,window.game.player.setBestScore(t);case 5:return e.next=7,Ur(n,t);case 7:return e.prev=7,this.storage.dispatch(qr(Gu.LeaderboardId,Er,6,0)),e.finish(7);case 10:case"end":return e.stop()}}),e,this,[[0,,7,10]])})));return function(){return e.apply(this,arguments)}}(),n.updateCurrentBestScore=function(){var e=this.player.getBestScore(),t=this.storage.getState(),n=Ms(t).bestScore,i=void 0===n?0:n,a=e>i?e:i;this.header.scoreBar.setValue(a)},n.updateCurrentCoins=function(){var e=this.player.getCoins();this.setCoins(e)},n.preload=function(){var e=this;this.events.on("wake",this.run),this.events.on("resume",this.run),this.events.on("create",this.run),this.events.on(Phaser.Scenes.Events.PAUSE,(function(){var t;null==(t=e.timerDailyRewards)||t.remove()}))},n.create=function(){e.prototype.create.call(this),this.createBackground(oa.Z.BACKGROUND.KEY),this.createEffects(),this.createBackgroundLines(),this.createSettingsScreen(),this.createRewardScreen(),this.createDailyMissionScreen(),this.createDailyRewardsScreen(),this.createHeaderBar(),this.createMainContent(),this.createFooterBar(),this.listenEvents()},n.createTournamentButton=function(){this.main.dinoTitle.dino.setInteractive({useHandCursor:!1}),this.main.dinoTitle.dino.on(Phaser.Input.Events.GAMEOBJECT_POINTER_DOWN,this.handleDinoClick)},n.setCoins=function(e){var t=e<0?0:e;this.currentCoins=t,this.header.coinBar.setValue(t)},n.createSettingsScreen=function(){this.screen.add(Da.o4.SETTINGS_SCREEN,ku)},n.createRewardScreen=function(){this.rewardScreen=this.screen.add(Da.o4.REWARD_SCREEN,fr)},n.createDailyMissionScreen=function(){var e=this;this.dailyMissionScreen=this.screen.add(Da.o4.DAILY_MISSIONS_SCREEN,Kl),this.dailyMissionScreen.onReward=function(t,n){"coin"===t&&e.eatCoins(n)}},n.createDailyRewardsScreen=function(){var e=this;this.dailyRewardsScreen=this.screen.add(Da.o4.DAILY_REWARD_SCREEN,vu),this.dailyRewardsScreen.onNoAd=this.showNotifyNoAds,this.dailyRewardsScreen.onSkipAd=this.showNotifySkipAds,this.dailyRewardsScreen.onReward=function(t){e.eatCoins(t)}},n.listenEvents=function(){this.events.on("claim-reward",this.runCoinsExplodeEffect)},n.createHeaderBar=function(){this.header=new xc(this),this.header.setDepth(_a.Z.BUTTON),this.header.coinBar.onClick=this.handleCoinBarClick,Phaser.Display.Align.In.TopCenter(this.header,this.gameZone)},n.createMainContent=function(){this.main=new Tl(this),this.main.setDepth(_a.Z.LOGO),this.main.playSingleButton.onClick=this.handlePlaySingle,Phaser.Display.Align.In.Center(this.main,this.gameZone,0,-5)},n.createFooterBar=function(){this.footer=new fc(this),this.footer.setDepth(_a.Z.BUTTON),this.footer.inviteIcon.onClick=this.handleInviteIconClick,this.footer.missionIcon.onClick=this.handleDailyIconClick,this.footer.rankingIcon.onClick=this.handleRankIconClick,this.footer.settingIcon.onClick=this.handleSettingClick,Phaser.Display.Align.In.BottomCenter(this.footer,this.gameZone)},n.createEffects=function(){this.coinsExplosive2=new Ou.Z(this),this.coinsExplosive2.setDepth(_a.Z.ON_TOP)},n.createBackgroundLines=function(){this.backgroundLines=new Nu(this)},t}(Mo.Z);var Zu=Fu,Uu=n(203),Yu=n.n(Uu),Hu=n(206),zu=n.n(Hu),Wu=n(600),Vu=n(594),Ku=n(601),ju=function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).name="WideFrameRenderFail",i.message=t||"Wide frame render fail",i.payload=n,i}return(0,o.Z)(t,e),t}((0,F.Z)(Error)),Xu=n(352),qu=n.n(Xu),Ju=function(e){if("string"!==typeof e||!e)throw new ju(null,{imageShare:e})},Qu=function(){return(0,s.Z)(h().mark((function e(){var t,n,a,r,s,o,c,l;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=window.game,n=t.player,a=t.analytics,r=t.facebook,s=t.globalScene,e.prev=1,s.screen.open(Da.o4.NOTIFY_SCREEN,{message:window.game.lang.Text.LOADING,loading:!0}),o=window.game.lang.getCurrentLanguage(),c=n.getBestScore(),l=window.game.lang.getText({key:"HS_SHARE",variables:[c],locale:o}),e.next=8,r.shareAsync({text:l,intent:"SHARE",image:"",data:{playerId:"",playerName:"",playerPhoto:"",type:""}});case 8:a.event(Ht._.SHARE,{share_content_type:"BestScore",success:!0}),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(1),a.event(Ht._.SHARE,{share_content_type:"BestScore",success:!1}),(0,i.tO)(e.t0);case 15:return e.prev=15,s.screen.close(Da.o4.NOTIFY_SCREEN),e.finish(15);case 18:case"end":return e.stop()}}),e,null,[[1,11,15,18]])})))},$u=function(){var e=(0,s.Z)(h().mark((function e(){var t,n,i,a,r,s,o,c,l,u;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=window.game,n=t.player,i=t.globalScene,a=n.getPlayer(),r=a.playerId,s=a.photo,o=a.data,c=(o||{}).score,l=eh({playerId:r,playerPhoto:s,playerScore:c})){e.next=7;break}return e.abrupt("return");case 7:return u={name:"share-best-score",width:952,height:492,renderOptions:l},e.next=10,i.frameCapture.capture(u);case 10:return e.abrupt("return",e.sent);case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),eh=(function(){var e=(0,s.Z)(h().mark((function e(t){var n,i,a,r,s,o,c,l,u,d,p;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=window.game,i=n.player,a=n.globalScene,r=Ls(t),s=i.getPlayer(),o=s.playerId,c=s.photo,l=r[o]||{},u=l.score,d=eh({playerId:o,playerPhoto:c,playerScore:u})){e.next=8;break}return e.abrupt("return");case 8:return p={name:"share-current-score",width:952,height:492,renderOptions:d},e.next=11,a.frameCapture.capture(p);case 11:return e.abrupt("return",e.sent);case 12:case"end":return e.stop()}}),e)})))}(),function(e){var t=e.playerId,n=void 0===t?"10":t,i=e.playerPhoto,a=void 0===i?"":i,r=e.playerScore,s=void 0===r?0:r;return"string"!==typeof n||"string"!==typeof a||"number"!==typeof s?null:{avatar:{name:""+n,type:"image",x:666,y:115,image:a,width:185,height:185,fallbackWithImage:oa.Z.AVATAR.KEY},wideFrame:{name:"wide-frame-message-win",type:"image",x:0,y:0,image:"./assets/wideframes/wide-frame-message-win.png",width:952,height:492},playerScoreShadow:{type:"text",x:760,y:454,font:"600 70px",fillStyle:"#c4683f",text:""+s,textAlign:"center"},playerScore:{type:"text",x:760,y:450,font:"600 70px",fillStyle:"#f2a62e",text:""+s,textAlign:"center"}}}),th=(function(){var e=(0,s.Z)(h().mark((function e(){var t,n,i,a,r,s,o,c,l,u,d,p,f,g,m,v,y,E,A,S;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=window.game,n=t.player,i=t.profile,a=t.globalScene,r=n.getPlayer(),s=r.playerId,o=r.name,c=r.photo,(l=n.getConnectedPlayerIds(99,0)).push(s),u=[],e.next=7,Nr({playerIds:GameCore.Utils.Array.unique(l),limit:l.length});case 7:d=e.sent,p=GameCore.Utils.Object.keyBy(d,"playerId"),f={playerId:s,name:o,photo:c,score:0},GameCore.Utils.Object.hasOwn(p,s)&&(f=p[s]),u.push(f),e.t0=qu()(h()).call(h(),p);case 14:if((e.t1=e.t0()).done){e.next=27;break}if(g=e.t1.value,!GameCore.Utils.Object.hasOwn(p,g)){e.next=25;break}if(m=p[g],3!==u.length){e.next=20;break}return e.abrupt("break",27);case 20:if(m.playerId!==s){e.next=22;break}return e.abrupt("continue",14);case 22:if(!(Number(m.score)>Number(f.score))){e.next=24;break}return e.abrupt("continue",14);case 24:u.push(m);case 25:e.next=14;break;case 27:return v=GameCore.Utils.Array.unique(l),e.next=30,i.requestProfiles(v);case 30:if(y=i.getProfiles(),u.forEach((function(e,t){var n=e.playerId;if(GameCore.Utils.Object.hasOwn(y,n)){var i=y[n],a=i.name,r=i.photo;u[t].name=a,u[t].photo=r}})),u.length<3)for(E=0;E<=3-u.length;)u.push({playerId:"bot"+E,name:"???",score:0,photo:"./assets/images/others/avatar.jpg"}),E++;if(A=th({playerId:s,playerName:o,playerPhoto:c,listLeaders:u})){e.next=37;break}return e.abrupt("return");case 37:return S={name:"share-leaderboard",width:1500,height:2e3,renderOptions:A},e.next=40,a.frameCapture.capture(S);case 40:return e.abrupt("return",e.sent);case 41:case"end":return e.stop()}}),e)})))}(),function(e){var t=e.playerId,n=void 0===t?"10":t,i=e.playerPhoto,a=void 0===i?"":i,r=e.listLeaders,s=void 0===r?[]:r;if(!Array.isArray(s))return null;if("string"!==typeof n)return null;if("string"!==typeof a)return null;var o={avatar:{name:""+n,type:"image",x:530,y:310,image:a,width:440,height:440,fallbackWithImage:oa.Z.AVATAR.KEY}};return s.forEach((function(e,t){var n=e.playerId,i=e.photo;o["photo_"+n]={name:""+n,type:"image",x:430,y:1232+192*t,image:i,width:115,height:115,fallbackWithImage:oa.Z.AVATAR.KEY}})),o.wideFrame={name:"wide-frame-share",type:"image",x:0,y:0,image:"./assets/wideframes/wide-frame-share.png",width:1500,height:2e3},s.forEach((function(e,t){var n=e.playerId,i=e.name,a=e.score;o["name_"+n]={type:"text",x:620,y:1320+193*t,font:"600 65px",text:i,fillStyle:"#b18151"},o["score_"+n]={type:"text",x:1e3,y:1320+193*t,font:"600 65px",text:a,fillStyle:"#b18151"}})),o}),nh=function(){var e=(0,s.Z)(h().mark((function e(t){var n,i,a,r,s,o,c,l,u,d,p,f,g,m,v,y,E,A;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=window.game,i=n.player,a=n.globalScene,r=Ls(t),s=i.getPlayer(),o=s.photo,c=s.playerId,l=Os(t),u=l.playerId,d=l.photo,p=Bs(t,{playerId:c}),f=_s(t,{opponentId:u}),g=r[c]||{},m=g.score,v=r[u]||{},y=v.score,E=ah({playerId:c,playerPhoto:o,playerScore:m,opponentId:u,opponentPhoto:d,opponentScore:y,isPlayerFinished:p,isOpponentFinished:f})){e.next=12;break}return e.abrupt("return");case 12:return A={name:"share-game-result",width:952,height:492,renderOptions:E},e.next=15,a.frameCapture.capture(A);case 15:return e.abrupt("return",e.sent);case 16:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ih=(function(){var e=(0,s.Z)(h().mark((function e(t){var n,i,a,r,s,o,c,l,u,d,p,f,g,m,v;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=window.game,i=n.player,a=n.globalScene,r=Ls(t),s=i.getPlayer(),o=s.photo,c=s.playerId,l=Ds(t),u=l.playerId,d=l.photo,p=l.score,f=r[c]||{},g=f.score,m=ih({playerId:c,playerPhoto:o,playerScore:g,opponentId:u,opponentPhoto:d,opponentScore:p})){e.next=9;break}return e.abrupt("return");case 9:return v={name:"share-group-match-result",width:952,height:492,renderOptions:m},e.next=12,a.frameCapture.capture(v);case 12:return e.abrupt("return",e.sent);case 13:case"end":return e.stop()}}),e)})))}(),function(e){var t=e.playerId,n=void 0===t?"10":t,i=e.playerPhoto,a=void 0===i?"":i,r=e.playerScore,s=void 0===r?0:r,o=e.opponentId,c=void 0===o?"20":o,l=e.opponentPhoto,u=void 0===l?"":l,h=e.opponentScore,d=void 0===h?0:h;if("string"!==typeof n)return null;if("string"!==typeof a)return null;if("number"!==typeof s)return null;if("string"!==typeof c)return null;if("string"!==typeof u)return null;if("number"!==typeof d)return null;var p={leftPhoto:{name:""+n,type:"image",x:74,y:149,image:a,width:151,height:151,fallbackWithImage:oa.Z.AVATAR.KEY},rightPhoto:{name:""+c,type:"image",x:728,y:152,image:u,width:151,height:151,fallbackWithImage:oa.Z.AVATAR.KEY},wideFrame:{name:"wide-frame-game-result",type:"image",x:0,y:0,image:"./assets/wideframes/wide-frame-game-result.png",width:952,height:492},crown:{name:"crown-icon",type:"image",x:18,y:72,image:"./assets/images/others/crown-icon.png",width:114,height:115}};return p.leftPhoto={name:""+n,type:"image",x:74,y:149,image:a,width:151,height:151,fallbackWithImage:oa.Z.AVATAR.KEY},p.rightPhoto={name:""+c,type:"image",x:728,y:153,image:u,width:151,height:151,fallbackWithImage:oa.Z.AVATAR.KEY},p.leftScoreShadow={type:"text",x:153,y:444,font:"600 70px",fillStyle:"#c4683f",text:""+s,textAlign:"center"},p.leftScore={type:"text",x:153,y:440,font:"600 70px",fillStyle:"#f2a62e",text:""+s,textAlign:"center"},p.rightScoreShadow={type:"text",x:803,y:444,font:"600 70px",fillStyle:"#c4683f",text:""+d,textAlign:"center"},p.rightScore={type:"text",x:803,y:440,font:"600 70px",fillStyle:"#f2a62e",text:""+d,textAlign:"center"},p}),ah=function(e){var t=e.playerId,n=void 0===t?"10":t,i=e.playerPhoto,a=void 0===i?"":i,r=e.playerScore,s=void 0===r?0:r,o=e.opponentId,c=void 0===o?"20":o,l=e.opponentPhoto,u=void 0===l?"":l,h=e.opponentScore,d=void 0===h?0:h,p=e.isPlayerFinished,f=e.isOpponentFinished;if("string"!==typeof n)return null;if("string"!==typeof a)return null;if("number"!==typeof s)return null;if("string"!==typeof c)return null;if("string"!==typeof u)return null;if("number"!==typeof d)return null;if("boolean"!==typeof p)return null;if("boolean"!==typeof f)return null;var g=s===d,m=s>d?n:c,v=s>d?a:u,y=s>d?c:n,E=s>d?u:a,A=p||f,S=p&&f,b={leftPhoto:{name:""+n,type:"image",x:74,y:149,image:a,width:151,height:151,fallbackWithImage:oa.Z.AVATAR.KEY},rightPhoto:{name:""+c,type:"image",x:728,y:152,image:u,width:151,height:151,fallbackWithImage:oa.Z.AVATAR.KEY},wideFrame:{name:"wide-frame-game-result",type:"image",x:0,y:0,image:"./assets/wideframes/wide-frame-game-result.png",width:952,height:492}};return A&&(b.leftScoreShadow={type:"text",x:153,y:444,font:"600 70px",fillStyle:"#c4683f",text:p?""+s:"???",textAlign:"center"},b.leftScore={type:"text",x:153,y:440,font:"600 70px",fillStyle:"#f2a62e",text:p?""+s:"???",textAlign:"center"},b.rightScoreShadow={type:"text",x:803,y:444,font:"600 70px",fillStyle:"#c4683f",text:f?""+d:"???",textAlign:"center"},b.rightScore={type:"text",x:803,y:440,font:"600 70px",fillStyle:"#f2a62e",text:f?""+d:"???",textAlign:"center"}),S&&(g||(b.crown={name:"crown-icon",type:"image",x:18,y:72,image:"./assets/images/others/crown-icon.png",width:114,height:115}),b.leftPhoto={name:""+m,type:"image",x:74,y:149,image:v,width:151,height:151,fallbackWithImage:oa.Z.AVATAR.KEY},b.rightPhoto={name:""+y,type:"image",x:728,y:155,image:E,width:151,height:151,fallbackWithImage:oa.Z.AVATAR.KEY},b.leftScoreShadow={type:"text",x:155,y:444,font:"600 70px",fillStyle:"#c4683f",text:""+(s>d?s:d),textAlign:"center"},b.leftScore={type:"text",x:153,y:440,font:"600 70px",fillStyle:"#f2a62e",text:""+(s>d?s:d),textAlign:"center"},b.rightScoreShadow={type:"text",x:803,y:444,font:"600 70px",fillStyle:"#c4683f",text:""+(s>d?d:s),textAlign:"center"},b.rightScore={type:"text",x:803,y:440,font:"600 70px",fillStyle:"#f2a62e",text:""+(s>d?d:s),textAlign:"center"}),b},rh=function(e){if("string"!==typeof e||!e)throw new ju(null,{imageShare:e})},sh=function(e){var t=e?e.split("_"):[],n=t.length>0?t[0]:"en_US";switch(n){case"id":case"in":n="id"}return n},oh={targets:[],props:{alpha:{duration:500,value:{start:0,from:0,to:1},ease:Phaser.Math.Easing.Cubic.Out},scale:{duration:1e3,value:{start:.8,from:.8,to:1},ease:Phaser.Math.Easing.Elastic.Out,easeParams:[.1,.45]}}},ch=function(e){function t(t){return e.call(this,oh,t)||this}return(0,o.Z)(t,e),t}(La.Z),lh=Ka.Z.DEFAULT,uh=lh.KEY,hh=lh.FRAME,dh=function(e){function t(t){var n;return(n=e.call(this,t,{key:uh,frame:hh.AVATAR_FRAME_PURPLE,background:hh.AVATAR_BG,width:67,height:67,loadDelay:100})||this).scene=void 0,n.rankIcon=void 0,n.scene=t,n.createRankIcon(),n}(0,o.Z)(t,e);var n=t.prototype;return n.setHighlight=function(){this.avtFrame.setFrame(hh.AVATAR_FRAME_BLUE_BIG),this.avtFrame.setWorldSize(67,67)},n.updateLeaderRankIcon=function(e){1===e?this.rankIcon.setFrame(hh.ICON_GOLD):2===e?this.rankIcon.setFrame(hh.ICON_SILVER):3===e?this.rankIcon.setFrame(hh.ICON_BRONZE):this.rankIcon.kill()},n.createRankIcon=function(){this.rankIcon=this.scene.make.image({key:uh,frame:hh.ICON_GOLD}),this.rankIcon.setWorldSize(39,47.5),this.add(this.rankIcon),Phaser.Display.Align.In.TopLeft(this.rankIcon,this,15,15)},t}(Hc),ph=dh,fh=Ka.Z.DEFAULT,gh=fh.KEY,mh=fh.FRAME,vh=function(e){function t(t,n){var i;return(i=e.call(this,t)||this).scene=void 0,i.payload=void 0,i.isCurrentPlayer=!1,i.avatar=void 0,i.block=void 0,i.playerScore=void 0,i.label=void 0,i.playerNameText=void 0,i.shareButton=void 0,i.shareButtonLabel=void 0,i.playButton=void 0,i.playButtonLabel=void 0,i.showItems=void 0,i.showPopUp=void 0,i.scaleAnimation=void 0,i.scene=t,i.createAvatar(),i.createPlayButton(),i.createPlayerName(),i.createPlayerScore(),i.updateInfo(n),i.scene.add.existing((0,Na.Z)(i)),i}(0,o.Z)(t,e);var n=t.prototype;return n.updateInfo=function(e){e&&(this.payload=e),this.updateAvatar(),this.updateButton(),this.updatePlayerName(),this.updatePlayerScore(),this.updateLeaderRankIcon(),e&&e.playerId===this.scene.player.getPlayerId()&&this.setHighLight()},n.setLabel=function(e){this.label.setText(e)},n.setScore=function(e){this.playerScore.setText(e)},n.showAnimations=function(e,t){void 0===e&&(e=0),void 0===t&&(t=300);var n=200*e;this.runShowItemAnimation(n,t),this.runShowPopUpAnimation(n,t)},n.updateLeaderRankIcon=function(){var e;null!=(e=this.payload)&&e.rank?this.avatar.updateLeaderRankIcon(this.payload.rank):this.avatar.updateLeaderRankIcon(0)},n.updateButton=function(){var e,t;null==(e=this.playButton)||e.revive(),null==(t=this.shareButton)||t.kill(),this.payload||(this.playButton.kill(),this.playButton=new Va.Z(this.scene,gh,mh.BUTTON_GREEN_MINOR,70,31),this.playButton.setName("Random"),this.playButtonLabel.setText(this.scene.lang.Text.RANDOM),this.playButton.add(this.playButtonLabel),this.add(this.playButton),Phaser.Display.Align.In.Center(this.playButtonLabel,this.playButton),Phaser.Display.Align.In.Center(this.playButton,this.avatar,0,90))},n.runShowPopUpAnimation=function(e,t){this.scene.tweens.killTweensOf(this),this.showPopUp=new Zc({targets:[this],delay:e,duration:t,props:{y:{start:this.y+70,to:this.y}}}),this.showPopUp.play()},n.runShowItemAnimation=function(e,t){var n=this.getAll();this.scene.tweens.killTweensOf(n),this.showItems=new ch({targets:n,duration:t,delay:this.scene.tweens.stagger(50,{start:e+50}),props:{scale:{duration:1e3,getStart:function(e){return.8*e.scale},getEnd:function(e){return e.scale},ease:Phaser.Math.Easing.Elastic.Out,easeParams:[.1,.45]}}}),this.showItems.play()},n.createAvatar=function(){this.avatar=new ph(this.scene),this.add(this.avatar),Phaser.Display.Align.In.TopCenter(this.avatar,this,0,35+this.avatar.displayHeight/2)},n.updateAvatar=function(){var e,t;if(null!=(e=this.payload)&&e.playerId&&null!=(t=this.payload)&&t.photo){var n=this.payload,i=n.playerId,a=n.photo;this.avatar.loadPhoto(i,a,50)}else this.avatar.loadPhoto(oa.Z.ICON_EARTH.KEY,oa.Z.ICON_EARTH.FILE,50)},n.createPlayerScore=function(){this.playerScore=this.scene.make.bitmapText({font:$a.Z.PRIMARY.KEY,size:this.scene.fontSize(18),origin:{x:.5,y:.5}}),this.playerScore.setTint(16777215),Phaser.Display.Align.In.Center(this.playerScore,this.avatar,0,60),this.add(this.playerScore)},n.updatePlayerScore=function(){var e;null!=(e=this.payload)&&e.score?(this.playerScore.setText(Math.floor(this.payload.score).toString()),Phaser.Display.Align.In.Center(this.playerScore,this.avatar,0,62)):this.playerScore.kill()},n.updatePlayerName=function(){var e;if(null!=(e=this.payload)&&e.name){var t=this.payload.name,n=GameCore.Utils.String.getShortName(t,9),i=GameCore.Utils.String.removeDiacritics(n);this.playerNameText.setText(i),Phaser.Display.Align.In.Center(this.playerNameText,this.avatar,0,44)}},n.createPlayButton=function(){var e=this;this.playButton=new Va.Z(this.scene,gh,mh.BUTTON_GREEN_MINOR,60,31),this.playButton.setName("Play"),this.playButton.onClick=function(){var t,n=null==(t=e.payload)?void 0:t.playerId;n&&e.scene.storage.dispatch(Io(n))},this.add(this.playButton),this.playButtonLabel=this.scene.make.bitmapText({font:$a.Z.PRIMARY.KEY,size:this.scene.fontSize(13),text:this.scene.lang.Text.PLAY,origin:{x:.5,y:.5}}),this.playButton.add(this.playButtonLabel),Phaser.Display.Align.In.Center(this.playButtonLabel,this.playButton,0,-1),Phaser.Display.Align.In.Center(this.playButton,this.avatar,0,90)},n.setHighLight=function(){this.isCurrentPlayer=!0,this.avatar.setHighlight(),this.useShareButton()},n.useShareButton=function(){var e=this;this.playButton.kill(),this.shareButton?this.shareButton.revive():(this.shareButton=new Va.Z(this.scene,gh,mh.BUTTON_BLUE_MINOR,60,31),this.shareButton.setName("Share"),this.shareButton.onClick=function(){e.scene.storage.dispatch(Qu())},this.add(this.shareButton),this.shareButtonLabel=this.scene.make.bitmapText({font:$a.Z.PRIMARY.KEY,size:this.scene.fontSize(13),text:this.scene.lang.Text.SHARE,origin:{x:.5,y:.5}}),this.shareButton.add(this.shareButtonLabel),Phaser.Display.Align.In.Center(this.shareButtonLabel,this.shareButton,0,-1),Phaser.Display.Align.In.Center(this.shareButton,this.avatar,0,90))},n.setCurrentUserLeader=function(){this.runScaleAnimation()},n.runScaleAnimation=function(){!this.scaleAnimation&&this.isCurrentPlayer&&(this.scaleAnimation=new iu.Z({targets:[this.avatar],delay:1e3,duration:2e3,ease:Phaser.Math.Easing.Elastic.Out,easeParams:[.1,.45],props:{scale:1.15,y:this.avatar.y-3}}),this.scaleAnimation.play())},n.createPlayerName=function(){this.playerNameText=this.scene.make.text({style:{fontFamily:$a.Z.FONT_FAMILY},text:"Global"}),this.playerNameText.setTint(12700904),this.playerNameText.setHighQuality(),this.playerNameText.setFontSize(14),this.add(this.playerNameText),Phaser.Display.Align.In.Center(this.playerNameText,this.avatar,0,55)},(0,te.Z)(t,[{key:"onClick",set:function(e){var t=this.block,n=t.width,i=t.height;this.setSize(n,i+this.avatar.height),this.setInteractive({useHandCursor:!0}),this.off(Phaser.Input.Events.GAMEOBJECT_POINTER_DOWN),this.on(Phaser.Input.Events.GAMEOBJECT_POINTER_DOWN,e)}}]),t}(Phaser.GameObjects.Container),yh=vh,Eh=function(e){function t(t,n){var a;return(a=e.call(this,t)||this).scene=void 0,a.payload=void 0,a.leaderBlocks=void 0,a.loading=void 0,a.globalBlock=void 0,a.tournamentBlock=void 0,a.background=void 0,a.entrancesAnimation=void 0,a.handleMatchingGroup=(0,s.Z)(h().mark((function e(){var t,n,i,r,s,o,c,l,u;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.scene,n=t.player,i=t.storage,r=t.game,s=t.facebook,e.prev=1,r.globalScene.screen.open(Da.o4.NOTIFY_SCREEN,{message:a.scene.lang.Text.MATCHING,loading:!0}),o=n.getPlayer(),c="global","en"===(l=sh(o.locale))&&(c="en"),"in"===l&&(c="in"),e.next=10,s.matchPlayerAsync(c,!0,!0);case 10:if(u=e.sent,r.globalScene.screen.close(Da.o4.NOTIFY_SCREEN),u){e.next=14;break}return e.abrupt("return");case 14:i.dispatch(xo()),e.next=21;break;case 17:e.prev=17,e.t0=e.catch(1),r.globalScene.screen.close(Da.o4.NOTIFY_SCREEN);case 21:case"end":return e.stop()}}),e,null,[[1,17]])}))),a.handleInviteTournament=(0,s.Z)(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a.scene.storage.dispatch((0,s.Z)(h().mark((function e(){var t,n,a,r,s,o,c,l,u,d;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=window.game,n=t.player,a=t.analytics,r=t.facebook,s=t.globalScene,e.prev=1,s.screen.open(Da.o4.NOTIFY_SCREEN,{message:window.game.lang.Text.LOADING,loading:!0}),e.next=5,$u();case 5:return o=e.sent,rh(o),c=n.getPlayer(),l=c.playerId,u=c.name,d=c.photo,e.next=10,r.inviteAsync({text:{default:"Great! I have a best score!",localizations:{en_US:"Great! I have a best score!",vi_VN:"Th\u1eadt tuy\u1ec7t! M\xecnh v\u1eeba ph\xe1 k\u1ef7 l\u1ee5c n\xe0y!"}},image:o||"",data:{playerId:l,playerName:u,playerPhoto:d,type:ra},filters:[],sections:[]});case 10:a.event(Ht._.INVITE,{invite_content_type:"BestScore",success:!0}),e.next=17;break;case 13:e.prev=13,e.t0=e.catch(1),a.event(Ht._.INVITE,{invite_content_type:"BestScore",success:!1}),(0,i.tO)(e.t0);case 17:return e.prev=17,s.screen.close(Da.o4.NOTIFY_SCREEN),e.finish(17);case 20:case"end":return e.stop()}}),e,null,[[1,13,17,20]])}))));case 2:case"end":return e.stop()}}),e)}))),a.scene=t,n&&a.updateInfo(n),a.setName("LeadersBar"),a.createBackground(),a.createLoading(),a.createLeaderBlocks(),a.createGlobalMatchBlock(),a.createTournamentBlock(),a.createEntrancesAnimation(),a.scene.add.existing((0,Na.Z)(a)),a}(0,o.Z)(t,e);var n=t.prototype;return n.updateAnimations=function(){this.leaderBlocks.getChildren().forEach((function(e,t){e.active&&e instanceof yh&&(e.showAnimations(t,1e3),e.setCurrentUserLeader())}))},n.updateInfo=function(e){var t=this;this.payload=e;var n=this.payload.leaders;this.leaderBlocks.clear(!0),n.forEach((function(e,n){if(e.rank=n+1,t.leaderBlocks.countActive(!1)>0){var i=t.leaderBlocks.get();return i.revive(),void i.updateInfo(e)}var a=new yh(t.scene,e);a.revive(),a.updateInfo(e),t.background.add(a),t.leaderBlocks.add(a)})),this.updateSpecialBlock(),this.alignBlocks(),this.runAnimation()},n.killAndHideAll=function(){var e=this;this.removeAll(!1),this.leaderBlocks.getChildren().forEach((function(t){return e.leaderBlocks.killAndHide(t)}))},n.showLoading=function(e){this.loading.setVisible(e)},n.runAnimation=function(){this.leaderBlocks.setAlpha(0),this.updateAnimations()},n.createGlobalMatchBlock=function(){var e=new yh(this.scene);e.updateInfo(),e.playButton.setName("JoinGroup"),e.playButton.onClick=this.handleMatchingGroup,e.kill(),this.background.add(e),this.globalBlock=e},n.createTournamentBlock=function(){var e=new yh(this.scene);e.useShareButton(),e.shareButton.revive(),e.shareButton.setName("InviteTournament"),e.shareButton.onClick=this.handleInviteTournament,e.playButton.kill(),e.playerNameText.setText(this.scene.lang.Text.FRIENDS),e.shareButtonLabel.setText(this.scene.lang.Text.INVITE),e.playerNameText.setX(e.playerNameText.x-3),e.kill(),this.background.add(e),this.tournamentBlock=e},n.createBackground=function(){this.background=new Gc(this.scene,0,0,375,170),this.add(this.background),Phaser.Display.Align.In.Center(this.background,this.scene.gameZone,0,90)},n.createEntrancesAnimation=function(){this.entrancesAnimation=new Ku.Z({targets:this.leaderBlocks.getChildren(),delay:this.scene.tweens.stagger(50,{start:400})})},n.createLoading=function(){this.loading=new Uc.Z(this.scene),this.loading.setTint(5982858),this.loading.setWorldSize(55,55),this.loading.setDepth(_a.Z.POPUP),this.add(this.loading),Phaser.Display.Align.In.Center(this.loading,this.background)},n.updateSpecialBlock=function(){var e=this.scene.storage.getState();os(e)===da?(this.tournamentBlock.revive(),this.leaderBlocks.add(this.tournamentBlock)):(this.globalBlock.revive(),this.leaderBlocks.add(this.globalBlock))},n.alignBlocks=function(){var e=-(this.leaderBlocks.getLength()-1)/2*90;this.leaderBlocks.setX(e,90)},n.createLeaderBlocks=function(){this.leaderBlocks=this.scene.add.group({classType:yh})},t}(Phaser.GameObjects.Container),Ah=Eh,Sh=Ka.Z.DEFAULT,bh=Sh.KEY,Th=Sh.FRAME,wh=function(e){function t(t){var n;return(n=e.call(this,t,bh,Th.BUTTON_BLUE_SHORT)||this).scene=t,n.button.setWorldSize(63,58),n.createIcon(),n}return(0,o.Z)(t,e),t.prototype.createIcon=function(){var e=this.scene.add.image(0,0,bh,Th.ICON_HOME);e.setWorldSize(31,26),this.add(e),Phaser.Display.Align.In.Center(e,this.button,0,-2)},t}(Va.Z),Ch=wh,Ih=Ka.Z.DEFAULT,Ph=Ih.KEY,xh=Ih.FRAME,kh=function(e){function t(t){var n;return(n=e.call(this,t,Ph,xh.BUTTON_GREEN)||this).scene=t,n.button.setWorldSize(134,68),n.createIcon(),n.createText(),n}(0,o.Z)(t,e);var n=t.prototype;return n.createIcon=function(){var e=this.scene.make.image({key:Ph,frame:xh.ICON_REPLAY});e.setWorldSize(26.5,27),Phaser.Display.Align.In.LeftCenter(e,this.button,-20),this.add(e)},n.createText=function(){var e=this.scene.make.bitmapText({font:$a.Z.PRIMARY.KEY,size:this.scene.fontSize(16),text:this.scene.lang.Text.REPLAY,origin:{x:1,y:.5}});Phaser.Display.Align.In.RightCenter(e,this.button,-25),this.add(e)},t}(Va.Z),Oh=kh,Rh=function(e){function t(t){var n;return(n=e.call(this,t)||this).homeButton=void 0,n.playButton=void 0,n.scene=t,n.createButtons(),n.alignButtons(),n.scene.add.existing((0,Na.Z)(n)),n}(0,o.Z)(t,e);var n=t.prototype;return n.alignButtons=function(){Phaser.Display.Align.In.Center(this.homeButton,this,0),Phaser.Display.Align.In.Center(this.playButton,this,0,-100)},n.createButtons=function(){this.createHomeButton(),this.createPlayButton()},n.createHomeButton=function(){this.homeButton=new Ch(this.scene),this.homeButton.setName("Home"),this.add(this.homeButton)},n.createPlayButton=function(){this.playButton=new Oh(this.scene),this.homeButton.setName("Replay"),this.add(this.playButton)},t}(Phaser.GameObjects.Container),Bh=Rh,_h=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n.entrancesAnimation=void 0,n.runAnimation=function(){n.entrancesAnimation.play()},n.scene=t,n.createEntrancesAnimation(),n}return(0,o.Z)(t,e),t.prototype.createEntrancesAnimation=function(){this.entrancesAnimation=new Ku.Z({targets:[this],delay:800,props:{y:"-=5",alpha:{start:0,from:0,to:1}}})},t}(Bh),Dh=_h,Nh={targets:[],yoyo:!0,duration:120,ease:Phaser.Math.Easing.Circular.Out,props:{scale:{from:1,to:1.3}}},Lh=function(e){function t(t){return e.call(this,Nh,t)||this}return(0,o.Z)(t,e),t}(La.Z),Mh=function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).dinoPulsateAnimation=void 0,i.removeBackground(),i}(0,o.Z)(t,e);var n=t.prototype;return n.updateCongratsTitle=function(){this.updateCongratsBackground(),this.isDinoSad(!1)},n.removeBackground=function(){this.background.kill()},n.updateCongratsBackground=function(){this.background.revive(),this.background.setPosition(0,-10)},n.runAnimations=function(){e.prototype.runAnimations.call(this),this.runDinoPulsateAnimation()},n.runDinoPulsateAnimation=function(){this.dinoPulsateAnimation||(this.dinoPulsateAnimation=new Fa({targets:[this.dino,this.leaves],duration:1400,repeatDelay:200,props:{scale:"+=0.08"}})),this.dinoPulsateAnimation.play()},t}(_c),Gh=Mh,Fh=Ka.Z.DEFAULT,Zh=Fh.KEY,Uh=Fh.FRAME,Yh=GameCore.Configs.Gameplay,Hh=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n.bestScore=void 0,n.payload=void 0,n.dino=void 0,n.yourScoreText=void 0,n.bestScoreText=void 0,n.currentScoreText=void 0,n.entrancesAnimation=void 0,n.scoreAnimation=void 0,n.counterAnimation=void 0,n.bestScoreIcon=void 0,n.scene=t,n.bestScore=0,n.createDinoTitle(),n.createCurrentScore(),n.createBestScore(),n.createScoreAnimation(),n.createEntrancesAnimation(),n.scene.add.existing((0,Na.Z)(n)),n}(0,o.Z)(t,e);var n=t.prototype;return n.updateData=function(e){this.payload=e;var t=e.bestScore,n=e.currentScore;this.setBestScore(t),n<t&&this.runScoreAnimation(),this.runAnimation()},n.runAnimation=function(){var e=this,t=this.payload.currentScore;this.setCurrentScore(0),t>0?(this.runScoreCounter(),this.scene.time.delayedCall(1300,(function(){e.entrancesAnimation.play()}))):(this.setCurrentScore(t),this.entrancesAnimation.play())},n.runScoreCounter=function(){var e,t=this,n=this.payload,i=n.bestScore,a=n.currentScore;null==(e=this.counterAnimation)||e.remove(),this.counterAnimation=this.scene.tweens.addCounter({from:0,to:a,delay:500,duration:2e3,completeDelay:300,onStart:function(){t.scene.audio.playSound(er.Z.SCORE_COUNTER)},onUpdate:function(e){var n=Math.floor(e.getValue());t.runScoreAnimation(),t.setCurrentScore(n)},onComplete:function(){t.bestScore=i,t.setCurrentScore(a),(a>i||Yh.AlwayShowBestScore)&&(t.bestScore=a,t.scene.screen.open(Da.o4.BEST_SCORE_SCREEN,{bestScore:a}),t.updateCongratsTitle(),t.scene.runConfettiEffects(),window.GameSDK.showGameRating().catch((function(e){}))),t.setBestScore(t.bestScore)}})},n.runScoreAnimation=function(){this.scoreAnimation.play()},n.setBestScore=function(e){this.bestScoreText.setText(""+e),Phaser.Display.Align.In.Center(this.bestScoreText,this.currentScoreText,5,50),Phaser.Display.Align.In.LeftCenter(this.bestScoreIcon,this.bestScoreText,30)},n.setCurrentScore=function(e){this.currentScoreText.setText(""+e)},n.createDinoTitle=function(){this.dino=new Gh(this.scene,{title:this.scene.lang.Text.YOUR_SCORE_,titleSize:25}),this.dino.isDinoSad(!0),this.dino.changeBackground(Uh.TRUMPET,278.5,82),Phaser.Display.Align.In.TopCenter(this.dino,this,0,20),this.add(this.dino)},n.updateCongratsTitle=function(){this.dino.updateCongratsTitle()},n.createCurrentScore=function(){this.currentScoreText=this.scene.make.bitmapText({font:$a.Z.PRIMARY.KEY,size:this.scene.fontSize(43),origin:{x:.5,y:.5}}),this.currentScoreText.setTint(15779090),Phaser.Display.Align.In.Center(this.currentScoreText,this,0,110),this.add(this.currentScoreText)},n.createBestScore=function(){this.createBestScoreText(),this.createBestScoreIcon(),this.setBestScore(this.bestScore)},n.createBestScoreText=function(){this.bestScoreText=this.scene.make.bitmapText({font:$a.Z.PRIMARY.KEY,size:this.scene.fontSize(30),origin:{x:0,y:.5}}),this.add(this.bestScoreText)},n.createBestScoreIcon=function(){this.bestScoreIcon=this.scene.make.image({key:Zh,frame:Uh.ICON_BEST_SCORE_CUP}),this.bestScoreIcon.setWorldSize(26,24.5),this.add(this.bestScoreIcon)},n.createEntrancesAnimation=function(){this.entrancesAnimation=new Fa({targets:[this],repeat:0,duration:200,props:{scale:"+=0.03"}})},n.createScoreAnimation=function(){this.scoreAnimation=new Lh({targets:[this.currentScoreText],props:{scale:{from:1,to:1.3}}})},t}(Phaser.GameObjects.Container),zh=Hh,Wh=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n.bestScoreBlock=void 0,n.scene=t,n.createBestScoreBlock(),n.scene.add.existing((0,Na.Z)(n)),n}return(0,o.Z)(t,e),t.prototype.createBestScoreBlock=function(){this.bestScoreBlock=new zh(this.scene),this.add(this.bestScoreBlock)},t}(Phaser.GameObjects.Container),Vh=Wh,Kh=n(602),jh=Ka.Z.DEFAULT,Xh=jh.KEY,qh=jh.FRAME,Jh=function(e){function t(t,n,i,a){var r;return(r=e.call(this,t,n,i,a)||this).scoreText=void 0,r.cupImage=void 0,r.bigStarExplosive=void 0,r.open=function(t){e.prototype.open.call((0,Na.Z)(r),t);var n=r.scene.game.globalScene;n instanceof rr.Z&&n.requestBackgroundMaskUpdate(Da.o4.BEST_SCORE_SCREEN,.8);var i=r.getData("bestScore");r.setBestScore(i),r.runOpenAnimation(),r.scene.audio.playSound(er.Z.CONGRATULATION)},r.handleClose=function(){r.scene.screen.close(r.name);var e=r.scene.game.globalScene;e instanceof rr.Z&&e.requestBackgroundMaskUpdate(Da.o4.BEST_SCORE_SCREEN,0)},r.handleShareBestScore=function(){r.scene.storage.dispatch(Qu())},r.runBigStarExplosive=function(){var e=r.cupImage,t=e.x,n=e.y;r.bigStarExplosive.setPosition(t,n),r.bigStarExplosive.run()},r.setDepth(Da.Ks.POPUP),r.background.setAlpha(.8),r.createObjects(),r}(0,o.Z)(t,e);var n=t.prototype;return n.createObjects=function(){this.createClose(),this.createBestScoreTitle(),this.createGlowEffect(),this.createCupImage(),this.createBestScoreNumber(),this.createBigStarExplosive()},n.setBestScore=function(e){this.scoreText.setText(""+e)},n.createClose=function(){var e=new Va.Z(this.scene,Xh,qh.BUTTON_CLOSE,48.5,43);e.setName("Close"),this.add(e),Phaser.Display.Align.In.TopRight(e,this.zone,-15,-15),e.onClick=this.handleClose},n.createBestScoreTitle=function(){var e=50;if("ru"===this.scene.lang.getCurrentLanguage())e=35;var t=this.scene.make.bitmapText({font:$a.Z.PRIMARY.KEY,size:this.scene.fontSize(e),text:this.scene.lang.Text.HIGH_SCORE});this.add(t),t.setTint(15911443),Phaser.Display.Align.In.TopCenter(t,this.zone,0,-100)},n.createBestScoreNumber=function(){this.scoreText=this.scene.make.bitmapText({font:$a.Z.PRIMARY.KEY,size:this.scene.fontSize(80),origin:{x:.5,y:.5}}),this.add(this.scoreText),this.scoreText.setTint(16777215),this.scoreText.letterSpacing=5,Phaser.Display.Align.In.Center(this.scoreText,this.zone,0,60)},n.createCupImage=function(){this.cupImage=this.scene.add.image(0,0,Xh,qh.ICON_RANKING),this.cupImage.setWorldSize(100,100),this.add(this.cupImage),Phaser.Display.Align.In.Center(this.cupImage,this.zone,0,-80)},n.createGlowEffect=function(){var e=Ka.Z.EFFECTS,t=e.KEY,n=e.FRAME,i=this.scene.make.image({key:t,frame:n.FX_GLOW_LIGHT});i.setWorldSize(246,246),this.add(i),this.moveDown(i),Phaser.Display.Align.In.Center(i,this,0,-80),this.scene.tweens.add({targets:[i],duration:6e3,repeat:-1,props:{angle:360,scale:{value:"+=0.01",yoyo:!0,duration:800,ease:Phaser.Math.Easing.Sine.InOut}}})},n.createBigStarExplosive=function(){this.bigStarExplosive=new Kh.Z(this.scene),this.add(this.bigStarExplosive)},n.runOpenAnimation=function(){this.runBigStarExplosive(),this.runScoreEntrancesAnimation()},n.runScoreEntrancesAnimation=function(){var e=this;this.scene.tweens.killTweensOf(this.scoreText),new Cl({targets:[this.scoreText],duration:300,props:{y:{from:0,to:this.scoreText.y}},onComplete:function(){e.handleShareBestScore()}}).play()},t}(GameCore.Screen),Qh=Jh,$h=function(e){function t(){for(var t,n,i=arguments.length,a=new Array(i),r=0;r<i;r++)a[r]=arguments[r];return(n=e.call.apply(e,P()(t=[this]).call(t,a))||this).bestScore=void 0,n.currentScore=void 0,n.backgroundLines=void 0,n.leadersBar=void 0,n.footerBar=void 0,n.main=void 0,n.countdownText=void 0,n.confettiEffect=void 0,n.confettiLeftEffect=void 0,n.confettiRightEffect=void 0,n.run=function(){n.updateScore(),n.main.bestScoreBlock.counterAnimation&&n.main.bestScoreBlock.counterAnimation.state!==Phaser.Tweens.REMOVED?n.main.bestScoreBlock.counterAnimation.on(Phaser.Tweens.Events.TWEEN_COMPLETE,(function(){n.handleShowBestScorePopup()})):n.time.delayedCall(800,(function(){n.handleShowBestScorePopup()})),n.footerBar.setAlpha(0),n.footerBar.runAnimation(),n.audio.pauseMusic(),n.audio.playSound(er.Z.GAME_OVER_SCENE),n.time.delayedCall(3600,n.audio.playMusic,void 0,n.audio)},n.runConfettiEffects=function(){var e=n.gameZone.displayWidth,t=e;n.confettiLeftEffect.stop(),n.confettiRightEffect.stop(),n.children.bringToTop(n.confettiLeftEffect),n.children.bringToTop(n.confettiRightEffect),n.children.bringToTop(n.confettiEffect),n.confettiEffect.run(0,675,380,675),n.time.delayedCall(1e3,(function(){n.confettiLeftEffect.run(1,0,-100),n.confettiRightEffect.run(1,0+t,-100),n.tweens.addCounter({delay:1e4,from:100,to:0,ease:Phaser.Math.Easing.Cubic.Out,duration:400,onUpdate:function(e){var t,i,a=e.getValue()/100;null==(t=n.confettiLeftEffect.emitter)||t.setAlpha(a),null==(i=n.confettiRightEffect.emitter)||i.setAlpha(a)},onComplete:function(){var e,t;null==(e=n.confettiLeftEffect.emitter)||e.setAlpha(1),null==(t=n.confettiRightEffect.emitter)||t.setAlpha(1),n.confettiLeftEffect.stop(),n.confettiRightEffect.stop()}})}))},n.handlePlaySingle=function(){n.storage.dispatch(Co())},n.handleHomeClick=function(){n.audio.stopSound(er.Z.GAME_OVER_SCENE),n.audio.playMusic(),n.facebook.attemptToSwitchGame({appId:"9n7mhcswnqrj"}),n.scene.switch(Sa.C.DASHBOARD_SCENE)},n}(0,o.Z)(t,e);var n=t.prototype;return n.preload=function(){var e=this;this.events.on("resume",(function(){e.updateScore()})),this.events.on("sleep",(function(){e.storage.dispatch(co())})),this.events.on("wake",this.run),this.events.on("create",this.run)},n.create=function(){e.prototype.create.call(this),this.createBackground(oa.Z.OTHER_BACKGROUND.KEY);var t=this.player.getBestScore();this.bestScore=t,this.currentScore=0,this.createMain(),this.createLeadersBar(),this.createFooterBar(),this.createBackgroundLines(),this.createBestScoreScreen(),this.createConfettiAnimations(),this.createClock()},n.updateScore=function(){var e=this.storage.getState(),t=Ms(e),n=t.score,i=void 0===n?0:n,a=t.bestScore,r=void 0===a?0:a;this.bestScore=r<this.bestScore?this.bestScore:r,this.currentScore=i,this.main.bestScoreBlock.updateData({bestScore:this.bestScore,currentScore:this.currentScore})},n.createConfettiAnimations=function(){this.confettiLeftEffect=new Wu.Z(this,{speedX:{min:-20,max:100},rotate:{start:-1080,end:0}}),this.confettiRightEffect=new Wu.Z(this,{speedX:{min:20,max:-100},rotate:{start:0,end:1080}}),this.confettiEffect=new Vu.Z(this),this.confettiEffect.setDepth(_a.Z.ON_TOP),this.confettiLeftEffect.setDepth(_a.Z.ON_TOP),this.confettiRightEffect.setDepth(_a.Z.ON_TOP)},n.createMain=function(){this.bestScore=0,this.main=new Vh(this),Phaser.Display.Align.In.TopCenter(this.main,this.gameZone,0,-130)},n.createBackgroundLines=function(){this.backgroundLines=new Nu(this)},n.createLeadersBar=function(){this.leadersBar=new Ah(this),Phaser.Display.Align.In.Center(this.leadersBar,this.gameZone,0,70)},n.processLeader=function(e,t){var n=Yu()(e).call(e,(function(e){return e.playerId===t}));return n=Yu()(e).call(e,(function(e){return e.playerId===t})),e[0].playerId===t?zu()(e).call(e,0,3):t===e[e.length-1].playerId?zu()(e).call(e,-3):zu()(e).call(e,n-1,3)},n.createFooterBar=function(){this.footerBar=new Dh(this),Phaser.Display.Align.In.BottomCenter(this.footerBar,this.gameZone,0,-60),this.footerBar.homeButton.onClick=this.handleHomeClick,this.footerBar.playButton.onClick=this.handlePlaySingle},n.createBestScoreScreen=function(){this.screen.add(Da.o4.BEST_SCORE_SCREEN,Qh)},n.handleShowBestScorePopup=function(){var e;this.currentScore>this.bestScore&&this.storage.dispatch(Ao({bestScore:this.currentScore}));var t=this.storage.getState(),n=os(t),i=xt()(e=[la,da]).call(e,n)>=0;this.currentScore>this.bestScore&&!i&&this.main.bestScoreBlock.updateCongratsTitle()},n.createClock=function(){var e=this;GameCore.Configs.GameOver.ShowClock&&(this.countdownText=this.add.text(this.gameZone.width-10,10,"0",{fontSize:"13px",fontFamily:$a.Z.FONT_FAMILY,color:"#b4b9c4"}),this.countdownText.setOrigin(1,0),this.countdownText.setHighQuality(),this.events.on("update",(function(){var t=new Date;e.countdownText.setText(t.toLocaleTimeString())})))},t}(Mo.Z);var ed=$h,td=function(e){function t(t,n,i){var a;return(a=e.call(this,t,n,i,$a.Z.PRIMARY.KEY)||this).setText("").setOrigin(.5).setFontSize(a.scene.fontSize(20)).setDepth(_a.Z.EFFECT),a}(0,o.Z)(t,e);var n=t.prototype;return n.setDefault=function(){this.setActive(!0).setVisible(!0).setScale(0).setAlpha(1).setNormalFloating()},n.playAnimation=function(){var e=this,t=this.scene.tweens.timeline();return t.add({targets:this,scale:1,duration:83,delay:0}),t.add({targets:this,alpha:0,scale:.8,y:"-=10",duration:400,onComplete:function(){e.setInactiveAndHide()}}),t.play(),this},n.setBigFloating=function(){return this.setFontSize(this.scene.fontSize(24)),this},n.setNormalFloating=function(){return this.setFontSize(this.scene.fontSize(20)),this},n.setInactiveAndHide=function(){this.kill(),this.setPosition()},t}(Phaser.GameObjects.BitmapText),nd=td,id=function(e){function t(t){var n;return(n=e.call(this,t,{classType:nd,frame:[],maxSize:-1})||this).init(),n}(0,o.Z)(t,e);var n=t.prototype;return n.init=function(){var e,t,n=this;Ie()(e=vr()(t=Array(50)).call(t,null)).call(e,(function(){return n.get(0,0)})).forEach((function(e){e.setVisible(!1),e.setActive(!1)}))},n.spawn=function(e,t,n,i){var a=this.get(e,t);return a.setDefault(),a.setText(""+i),a},n.despawn=function(e){this.killAndHide(e)},n.reset=function(){this.getChildren().forEach((function(e){e.active&&e.kill()}))},n.getChildren=function(){return e.prototype.getChildren.call(this)},t}(Phaser.GameObjects.Group),ad=id,rd=function(e){return e.INITIALIZED="initialized",e.SHOOT_BALL="shoot-ball",e.GAME_OVER="game-over",e.TIMER_CREATED="timer-created",e.SCORE_CHANGED="scoreChanged",e}(rd||{}),sd=rd,od=Ka.Z.GAMEPLAY.GAMEPLAY_TEXTURES,cd=od.KEY,ld=od.FRAME,ud=function(e){function t(t){var n;return(n=e.call(this,t,0,0,cd,ld.OWL)||this).setOrigin(.5,1),n.setWorldSize(46.5,76.5),n.scene.add.existing((0,Na.Z)(n)),n}return(0,o.Z)(t,e),t.prototype.blink=function(){var e=this,t=this.scene.time.addEvent({delay:5e3,callback:function(){e.play("owl-blinking")},repeat:-1});this.scene.events.emit(sd.TIMER_CREATED,t);var n=1/this.scene.world.getPixelRatio();return this.scene.tweens.add({targets:this,scaleY:{from:n,to:.98*n},scaleX:{from:n,to:1.05*n},yoyo:!0,repeat:-1,duration:800,ease:Phaser.Math.Easing.Sine.In}),this},t}(Phaser.GameObjects.Sprite),hd=ud,dd=Ka.Z.GAMEPLAY.GAMEPLAY_TEXTURES,pd=dd.KEY,fd=dd.FRAME,gd=function(e){function t(t){var n;return(n=e.call(this,t,0,0,pd,fd.DINO+"1")||this).setOrigin(.5,1),n.setWorldSize(104,122.5),n.scene.add.existing((0,Na.Z)(n)),n}(0,o.Z)(t,e);var n=t.prototype;return n.blink=function(){var e=this,t=this.scene.time.addEvent({delay:4e3,callback:function(){e.play("dino-blinking",!0),e.once(Phaser.Animations.Events.ANIMATION_COMPLETE,(function(){e.setFrame(fd.DINO+"1")}))},repeat:-1});this.scene.events.emit(sd.TIMER_CREATED,t);var n=1/this.scene.world.getPixelRatio();this.scene.tweens.add({targets:this,scaleY:{from:n,to:1.03*n},yoyo:!0,repeat:-1,duration:1e3,ease:Phaser.Math.Easing.Sine.Out})},n.happy=function(){this.play("dino-happy")},t}(Phaser.GameObjects.Sprite),md=gd,vd=function(e){function t(t){var n;(n=e.call(this,t)||this).theOwl=void 0,n.theDino=void 0;var i=t.gameZone.width;return n.setSize(i,160),n.createObjects(),n.setDepth(_a.Z.BUTTON),t.add.existing((0,Na.Z)(n)),n}(0,o.Z)(t,e);var n=t.prototype;return n.createObjects=function(){this.theOwl=new hd(this.scene),this.theOwl.setPosition(100,72),this.theDino=new md(this.scene),this.theDino.setPosition(-120,93),this.add([this.theOwl,this.theDino])},n.playCharacterAnimation=function(){this.theOwl.blink(),this.theDino.blink()},n.makeTheDinoHappy=function(){this.theDino.happy()},t}(Phaser.GameObjects.Container),yd=vd,Ed=function(){function e(e){this.scene=void 0,this.scene=e,this.initGlobalData()}var t=e.prototype;return t.initGlobalData=function(){var e=this.scene.registry,t=this.scene.data,n=this.scene.gameZone.height-this.scene.ads.getBannerHeight(),i=n-150;e.set("flyingDinoSpeed",{x:134,y:-100}),e.set("level",0),e.set("levelUpSetting",{levelUpMethodByTime:!0,timeInterval:6e4,shotsCount:40,speed:-.075,levelUpSpeedRate:1.15,duration:2e4}),e.set("bullet",{speed:1200}),e.set("zones",{speed:{fast:15,medium:10,slow:5,stand:0},zones:{zone1:{topY:0,bottomY:.3*i},zone2:{topY:.3*i,bottomY:.55*i},zone3:{topY:.55*i,bottomY:.8*i},zone4:{topY:.8*i,bottomY:1*i},zone5:{topY:i,bottomY:n}}}),e.set("bombForce",{distance:100,duration:300}),e.set("dangerTimer",8e3),e.set("timerForNextRandomHeavingBall",7e3),e.set("heavingBallTimer",1e4),e.set("stampTimer",2e4),e.set("maxCombos",9),e.set("rescueCoins",1e3),e.set("gameData",{baseScore:10,levelScores:[10,20,30,50,80,130,210],score:0,combosCount:0,multiplier:1}),e.set("bonusRate",[25,20,15,20,15,10,15]),t.set("ball",{width:33,height:34}),t.set("bomb",{width:35,height:37}),t.set("grid",{width:33.75,height:35,rowSize:11});var a=this.scene.world.getPixelRatio();t.set("physicsWorld",{bound:8,worldBoundWidth:359,bulletCollisionRadius:9*a,gridBallCollisionRadius:16*a}),t.set("numEggDestroyedToEmitParticle",15),t.set("shootingAngle",5)},t.resetData=function(){var e=this.scene.registry;e.get("gameData").score=0,e.get("gameData").combosCount=0,e.get("gameData").multiplier=1,e.set("level",1),this.scene.events.emit(sd.SCORE_CHANGED)},e}(),Ad=Ed,Sd=function(e){return e[e.Red=16596787]="Red",e[e.Blue=673791]="Blue",e[e.Green=1353513]="Green",e[e.Yellow=15445546]="Yellow",e[e.Gray=11250603]="Gray",e[e.Black=4802889]="Black",e[e.Pink=13125041]="Pink",e[e.Violet=8995523]="Violet",e[e.Cyan=834032]="Cyan",e[e.Light=13159901]="Light",e[e.Bomb=16090639]="Bomb",e[e.Any=-1]="Any",e}({}),bd=Ka.Z.GAMEPLAY.GAME_OBJECTS,Td=bd.KEY,wd=bd.FRAME,Cd=(function(e){function t(){for(var t,n,i=arguments.length,a=new Array(i),r=0;r<i;r++)a[r]=arguments[r];return(n=e.call.apply(e,P()(t=[this]).call(t,a))||this).index=void 0,n}(0,o.Z)(t,e)}(Phaser.Physics.Arcade.Image),function(){function e(e){this.scene=void 0,this.shotGuideGroup=void 0,this.movingProcess=0,this.movingSpeed=200,this.ballGrid=void 0,this.maxSize=32,this.guides=[],this.hideGuideTween=void 0,this.scene=e,this.shotGuideGroup=e.add.group(),this.createGuideObjects()}var t=e.prototype;return t.setBallGrid=function(e){this.ballGrid=e},t.createGuideObjects=function(){for(var e=0;e<this.maxSize;e++){var t=this.scene.physics.add.image(0,0,Td,wd.SHOT_GUIDE);t.kill(),this.shotGuideGroup.add(t)}},t.overlap=function(e,t){for(var n=0;n<t.length;n++)if(t[n]&&Phaser.Math.Distance.BetweenPointsSquared(e,t[n])<=625)return!0;return!1},t.updateGuides=function(){var e=0;for(e=0;e<this.guides.length;e++){var t=this.guides[e],n=this.ballGrid.getBallsAt(t.x,t.y);if(this.overlap(t,n)){for(var i=e;i<this.guides.length;i++)this.guides[i].setVisible(!1);return}t.setVisible(!0)}},t.destroy=function(){this.guides.forEach((function(e){return e.setVisible(!1)}))},t.createGuides=function(e){for(var t=this.scene.data.get("physicsWorld").bulletCollisionRadius,n=this.scene.world.getPixelRatio(),i=0;i<e;++i){var a=this.shotGuideGroup.get().setAlpha(1);a.setWorldSize(10,10),a.setDepth(_a.Z.SPRITES),a.index=i,a.setActive(!0),this.scene.physics.add.existing(a),a.body.setCircle(t,5*n-t,5*n-t),this.guides.push(a)}},t.showFrom=function(e,t,n,i,a){var r,s=this.scene.world.getPixelRatio(),o=this.scene.gameZone.width,c=this.scene.data.get("physicsWorld"),l=c.bulletCollisionRadius/s,u=.5*(o-c.worldBoundWidth);this.movingProcess+=this.movingSpeed*a/1e3,this.movingProcess>=100&&(this.movingProcess-=100);this.guides.length<=0&&this.createGuides(32),null==(r=this.hideGuideTween)||r.remove(),this.hideGuideTween=void 0;var h=n.x,d=n.y;e+=h*l*.1+24*h*this.movingProcess/100,t+=d*l*.1+24*d*this.movingProcess/100;for(var p=0;p<32;++p){var f=e+24*h;f<=l+u?(h*=-1,f=2*(l+u)-f):f>=o-l-u&&(h*=-1,f=2*o-2*(l+u)-f),e=f,t=t+24*d;var g=this.guides[p];g.x=e,g.y=t,g.setDepth(_a.Z.BALL_AND_TAIL),g.setAlpha(1),this.setGuideColor(g,i)}this.updateGuides()},t.setGuideColor=function(e,t){switch(t){case Sd.Red:e.setFrame(wd.SHOT_GUIDE_RED);break;case Sd.Green:e.setFrame(wd.SHOT_GUIDE_GREEN);break;case Sd.Blue:e.setFrame(wd.SHOT_GUIDE_BLUE);break;case Sd.Yellow:e.setFrame(wd.SHOT_GUIDE_YELLOW);break;case Sd.Gray:e.setFrame(wd.SHOT_GUIDE_GRAY);break;case Sd.Black:e.setFrame(wd.SHOT_GUIDE_BLACK);break;case Sd.Pink:e.setFrame(wd.SHOT_GUIDE_PINK);break;case Sd.Violet:e.setFrame(wd.SHOT_GUIDE_VIOLET);break;case Sd.Cyan:e.setFrame(wd.SHOT_GUIDE_CYAN);break;case Sd.Bomb:e.setFrame(wd.SHOT_GUIDE_ORANGE);break;default:e.setFrame(wd.SHOT_GUIDE_BLACK)}},t.hide=function(){this.hideGuideTween||(this.hideGuideTween=this.scene.tweens.add({targets:this.guides,alpha:0,duration:200}))},t.getGuides=function(){return this.guides},e}()),Id=Cd,Pd={STATUS:{READY:"ready",RUNNING:"running",STOPPED:"stopped"}},xd=Pd.STATUS,kd=function(){function e(e){this.state=void 0,this.scene=void 0,this.scene=e}var t=e.prototype;return t.init=function(){this.setState(xd.READY)},t.start=function(){this.isRunning()||this.setState(xd.RUNNING)},t.stop=function(){this.isRunning()&&this.setState(xd.STOPPED)},t.setState=function(e){this.state=e},t.isReady=function(){return this.state===xd.READY},t.isRunning=function(){return this.state===xd.RUNNING},t.isStopped=function(){return this.state===xd.STOPPED},e}(),Od=kd,Rd=n(430),Bd=Pd.STATUS,_d=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n.gameMode=void 0,n.runLeaderUpdate=function(){n.scene.header.leaders.run()},n.updateLeaderScores=function(){var e=n.scene,t=e.header,i=e.scoreCounter.getScore();t.leaders.updatePlayer(i)},n.updatePlayerScore=function(){var e=n.scene.header.challengeBlock,t=n.scene.registry.get("gameData").score;e.leftPlayer.setScore(t)},n.logLevelByScore=function(){var e=n.scene.registry.get("gameData").score,t=void 0===e?0:e,i=n.scene.registry.get("log_level");if(t>=1e4*i){n.scene.analytics.levelComplete(i,t,"level_"+i);var a=i+1;n.scene.analytics.levelStart(a,t,"level_"+a),n.scene.registry.set("log_level",a)}},n.scene=t,n}(0,o.Z)(t,e);var n=t.prototype;return n.init=function(){this.scene.handleGameModeChange(),e.prototype.init.call(this)},n.start=function(){if(!this.isRunning()){switch(this.gameMode){case la:this.startSingleMode();break;case pa:this.startOnlineMode();break;case da:this.startTournamentMode();break;case ua:this.startChallengeMode();break;default:this.stopOnlineMode(),this.stopChallengeMode(),this.stopTournamentMode()}this.setState(Bd.RUNNING)}},n.stop=function(){switch(this.gameMode){case la:this.stopSingleMode();break;case pa:this.stopOnlineMode();break;case da:this.stopTournamentMode();break;case ua:this.stopChallengeMode()}this.setState(Bd.STOPPED)},n.setGameMode=function(e){this.isRunning()||(this.gameMode=e)},n.startSingleMode=function(){this.scene.events.on(sd.SCORE_CHANGED,this.logLevelByScore)},n.stopSingleMode=function(){this.scene.events.off(sd.SCORE_CHANGED,this.logLevelByScore)},n.startOnlineMode=function(){var e=this.scene.header.leaders;e.revive(),e.reset(),this.scene.events.once(sd.SHOOT_BALL,this.runLeaderUpdate),this.scene.events.once(sd.GAME_OVER,this.runLeaderUpdate),this.scene.events.on(sd.SHOOT_BALL,this.updateLeaderScores)},n.stopOnlineMode=function(){var e=this.scene.header.leaders;e.kill(),e.reset(),this.scene.events.off(sd.SHOOT_BALL,this.runLeaderUpdate),this.scene.events.off(sd.GAME_OVER,this.runLeaderUpdate),this.scene.events.off(sd.SHOOT_BALL,this.updateLeaderScores)},n.startTournamentMode=function(){var e=(0,s.Z)(h().mark((function e(){var t,n,a,r,s,o,c,l,u,d;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.scene.header.tournamentPlayers,e.prev=1,t.kill(),e.next=5,this.scene.facebook.getTournamentAsync();case 5:if(a=e.sent){e.next=8;break}return e.abrupt("return");case 8:if(r=a.getPayload()){e.next=11;break}return e.abrupt("return");case 11:if((s=JSON.parse(r)).leaderboardId){e.next=14;break}return e.abrupt("return");case 14:return e.next=16,(0,us.H$)(s.leaderboardId,{limit:5});case 16:if(!((o=e.sent).length<1)){e.next=19;break}return e.abrupt("return");case 19:return c=Ie()(o).call(o,(function(e){return e.playerId})),e.next=22,this.scene.profile.requestProfiles(c);case 22:if(l=this.scene.profile.getProfiles(),u=Ie()(o).call(o,(function(e){var t=e.playerId,n=e.score,i=e.rank,a=l[t];if(!a)return null;var r=a.name;return{playerId:t,photo:a.photo,score:n,rank:i,name:r}})),!((d=pi()(n=we()(u).call(u,(function(e){return null!==e}))).call(n,(function(e,t){return t.score-e.score}))).length<1)){e.next=27;break}return e.abrupt("return");case 27:t.revive(),t.updateData(d),e.next=36;break;case 31:if(e.prev=31,e.t0=e.catch(1),!(e.t0 instanceof Rd.Z)){e.next=35;break}return e.abrupt("return");case 35:(0,i.tO)(e.t0);case 36:case"end":return e.stop()}}),e,this,[[1,31]])})));return function(){return e.apply(this,arguments)}}(),n.stopTournamentMode=function(){this.scene.header.tournamentPlayers.kill()},n.startChallengeMode=function(){var e=this.scene.header.challengeBlock;e.revive();var t=this.scene.storage.getState(),n=this.scene.player.getPlayer(),i=n.playerId,a=n.photo;e.leftPlayer.loadPhoto(i,a);var r=Os(t),s=r.playerId,o=r.photo;e.rightPlayer.loadPhoto(s,o);var c=Ps(t),l=c.whitePlayerId,u=c.whitePlayerScore,h=c.blackPlayerScore,d=i===l;e.leftPlayer.setScore(d?u:h),e.rightPlayer.setScore(d?h:u),this.scene.events.on(sd.SCORE_CHANGED,this.updatePlayerScore),this.scene.events.on(sd.SCORE_CHANGED,this.logLevelByScore)},n.stopChallengeMode=function(){this.scene.header.challengeBlock.kill(),this.scene.events.off(sd.SCORE_CHANGED,this.updatePlayerScore),this.scene.events.off(sd.SCORE_CHANGED,this.logLevelByScore)},t}(Od),Dd=_d,Nd=Ka.Z.GAMEPLAY.GAMEPLAY_TEXTURES,Ld=Nd.KEY,Md=Nd.FRAME,Gd=function(e){function t(t){var n;return(n=e.call(this,t)||this).images=void 0,n.segments=void 0,n.group=void 0,n.color=void 0,n.images=[],n.segments=[],n.group=t.add.group({classType:Phaser.GameObjects.Image,defaultKey:Ld,defaultFrame:Md.TAIL}),n.createDefault(),t.add.existing((0,Na.Z)(n)),n}(0,o.Z)(t,e);var n=t.prototype;return n.createDefault=function(){var e=this.createDefaultImage();this.images.push(e)},n.createDefaultImage=function(){var e=this.group.get(0,0);return e.revive(),e.setWorldSize(35,90),e.setAngle(0),e.setOrigin(1,0),e.setAlpha(.8),e.setTint(this.color),this.add(e),e},n.move=function(e,t){if(this.x!==e||this.y!==t){var n=e-this.x,i=t-this.y,a=new Phaser.Math.Vector2(n,i);if(!(a.lengthSq()<100)){var r={x:0,y:0,head:0,length:a.length(),angle:a.angle()/Math.PI*180+90};this.setPosition(e,t);var s=r;this.segments.forEach((function(e){e.x-=n,e.y-=i,e.head=s.head+s.length,e.angle.toFixed(1)===s.angle.toFixed(1)&&(s.length+=e.length,e.head+=e.length,e.length=0),s=e})),this.segments.unshift(r),this.alignSegments()}}},n.resetTail=function(e,t){this.setPosition(e,t),this.images.forEach((function(e){return e.kill()})),this.images=[],this.createDefault(),this.segments=[{x:0,y:0,head:0,length:0,angle:0}],this.alignSegments()},n.setColor=function(e){this.color=e,this.group.setTint(e)},n.alignSegments=function(){var e,t=this;this.images.forEach((function(e){return e.kill()})),this.images=[],this.segments=we()(e=this.segments).call(e,(function(e){return!(e.head>=90)&&(0!==e.length&&(!(e.head+e.length>128)||(e.length=90-e.head,!0)))})),this.segments.forEach((function(e){var n=t.createDefaultImage();n.setPosition(e.x,e.y),t.alignSegment(n,e.head,e.head+e.length,e.angle),t.images.push(n)}))},n.alignSegment=function(e,t,n,i){var a=this.scene.world.getPixelRatio(),r=n-t;e.setCrop(0,t*a,35*a,r*a),e.setOrigin(.5*a,t/90*a),e.setAngle(i)},t}(Phaser.GameObjects.Container),Fd=Gd,Zd=Ka.Z.GAMEPLAY.GAME_OBJECTS,Ud=Zd.KEY,Yd=Zd.FRAME,Hd=function(e){function t(t,n,i,a,r){var s;return void 0===a&&(a=""),void 0===r&&(r=""),(s=e.call(this,t,n,i,a,r)||this).color=void 0,s.stamp=void 0,s.ballSize=void 0,s}(0,o.Z)(t,e);var n=t.prototype;return n.getColor=function(){return this.color},n.setColor=function(e){switch(this.setTexture(Ud),e){case Sd.Red:this.setFrame(Yd.BALL_RED);break;case Sd.Green:this.setFrame(Yd.BALL_GREEN);break;case Sd.Blue:this.setFrame(Yd.BALL_BLUE);break;case Sd.Yellow:this.setFrame(Yd.BALL_YELLOW);break;case Sd.Gray:this.setFrame(Yd.BALL_GRAY);break;case Sd.Black:this.setFrame(Yd.BALL_BLACK);break;case Sd.Pink:this.setFrame(Yd.BALL_PINK);break;case Sd.Violet:this.setFrame(Yd.BALL_VIOLET);break;case Sd.Cyan:this.setFrame(Yd.BALL_CYAN)}this.color=e},n.setStamp=function(e){this.stamp=e},n.getStamp=function(){return this.stamp},n.takeStamp=function(){var e=this.stamp;return this.stamp=void 0,e},n.postUpdate=function(){var e;null==(e=this.stamp)||e.followBall(this)},n.initDefault=function(){this.setAlpha(1),this.setAngle(0),this.setDefaultSize()},n.setDefaultSize=function(){if(this.ballSize){var e=this.ballSize,t=e.width,n=e.height;this.setWorldSize(t,n)}},n.setWorldSize=function(t,n,i){void 0===i&&(i=!1),e.prototype.setWorldSize.call(this,t,n),i&&this.ballSize&&this.ballSize.setSize(t,n),this.ballSize||(this.ballSize=new Phaser.Structs.Size(t,n))},t}(Phaser.Physics.Arcade.Image),zd=function(){function e(e){this.speed=void 0,this.speed=e}return e.prototype.fly=function(e,t){e.body.enable=!0,e.setVelocity(t.x*this.speed,t.y*this.speed)},e}(),Wd=zd,Vd=function(e){function t(t,n,i,a,r){var s;return(s=e.call(this,t,n,i,a,r)||this).scene=void 0,s.tail=void 0,s.emitter=void 0,s.flyingBehavior=void 0,s.launching=!1,s.timerEvents=[],s.radius=0,s.scene=t,t.physics.add.existing((0,Na.Z)(s)),s.initSprite(),s.scene.add.existing((0,Na.Z)(s)),s}(0,o.Z)(t,e);var n=t.prototype;return n.initSprite=function(){var e=this.scene.registry.get("bullet").speed;this.flyingBehavior=new Wd(e),this.tail=new Fd(this.scene),this.tail.kill(),this.tail.setAlpha(.7)},n.initDefault=function(){return e.prototype.initDefault.call(this),this.setRotation(0),this.launching=!1,this},n.updatePhysicsRadius=function(e){var t=.5*this.width-e,n=.5*this.height-e;this.setCircle(e,t,n)},n.setPhysicsRadius=function(e){this.radius=e},n.launch=function(e){var t,n,i;this.flyingBehavior.fly(this,e),this.launching=!0;var a=this.getColor();this.tail.setColor(a),this.tail.resetTail(this.x,this.y),this.tail.revive(),null==(t=this.emitter)||t.setTint(a),null==(n=this.emitter)||n.startFollow(this),null==(i=this.emitter)||i.start()},n.update=function(){},n.postUpdate=function(){var t=1/this.scene.world.getPixelRatio(),n=this.x,i=this.y;this.tail.move(n,i),this.launching&&(this.setRotation(this.body.velocity.angle()+Math.PI/2),this.setScale(t/1.1,t),this.updatePhysicsRadius(1.1*this.radius),this.scene.stateManager.isGameOver()&&this.kill()),e.prototype.postUpdate.call(this),this.y<-30&&this.kill()},n.preKill=function(){var e,t=this;this.setVisible(!1),this.launching=!1,this.body.enable=!1,null==(e=this.emitter)||e.stop(),this.tail.kill();var n=this.scene.time.delayedCall(150,(function(){t.kill()}));this.timerEvents.push(n)},n.kill=function(){var t,n,i;this.launching=!1,null==(t=this.takeStamp())||t.kill(),null==(n=this.body)||n.world.disableBody(this.body),this.tail.kill(),null==(i=this.emitter)||i.stop(),this.timerEvents.forEach((function(e){return e.remove()})),this.timerEvents.length=0,e.prototype.kill.call(this)},n.setEmitter=function(e){this.emitter=e},t}(Hd),Kd=Vd,jd=function(e){function t(t,n){var i;(i=e.call(this,t,n,{})||this).scene=void 0,i.physicsRadius=void 0,i.tailParticles=void 0,i.ballSize=void 0,i.worldBounds=function(e){var t=e.gameObject;if(t instanceof Kd){var n=e.deltaX(),i=e.deltaY();if(e.velocity.x>0){var a=i+(t.x-18)/n*i;t.y-=a<0?a:a-i*Math.floor(a/i)}else{var r=i-(375-t.x-18)/n*i;t.y-=r<0?r:r-i*Math.floor(r/i)}}},i.scene=n,i.setActive(!0),i.scene.add.existing((0,Na.Z)(i)),i.physicsRadius=i.scene.data.get("physicsWorld").bulletCollisionRadius;var a=i.scene.data.get("ball"),r=a.width,s=a.height;return i.ballSize=new Phaser.Structs.Size(r,s),i.tailParticles=n.tailParticles,i.scene.events.off("postupdate",i.postUpdate,(0,Na.Z)(i)),i.scene.events.on("postupdate",i.postUpdate,(0,Na.Z)(i)),t.off("worldbounds",i.worldBounds),t.on("worldbounds",i.worldBounds),i}(0,o.Z)(t,e);var n=t.prototype;return n.postUpdate=function(){this.getChildren().forEach((function(e){e.active&&e.postUpdate()}))},n.initObjects=function(e){for(var t=0;t<e;t++){this.createBulletBall().kill()}},n.createBulletBall=function(){var e=Ka.Z.GAMEPLAY.GAME_OBJECTS.KEY,t=new Kd(this.scene,0,0,e);this.add(t),t.setPhysicsRadius(this.physicsRadius);var n=this.ballSize,i=n.width,a=n.height;t.setWorldSize(i,a),t.body instanceof Phaser.Physics.Arcade.Body&&(t.body.onWorldBounds=!0),t.setDepth(_a.Z.BULLET);var r=this.tailParticles.createTailEmitter();return t.setEmitter(r),t},n.spawn=function(e,t,n){var i=this.getFirstDead();return i||(i=this.createBulletBall()),(n||0===n)&&i.setColor(n),this.world.enableBody(i),i.initDefault(),i.revive(),i.setPosition(e,t),i.updatePhysicsRadius(this.physicsRadius),i.setCollideWorldBounds(!0,1,1),i.body.enable=!1,i},n.reset=function(){this.getChildren().forEach((function(e){e.active&&e.kill()}))},n.getChildren=function(){return e.prototype.getChildren.call(this)},t}(Phaser.Physics.Arcade.Group),Xd=jd,qd=function(e){(0,o.Z)(n,e);var t=n.prototype;function n(t,n,i,a,r){var s;return(s=e.call(this,t,n,i,a,r)||this).row=-1,s.col=-1,s.isProcess=!1,s.heavingBehavior=void 0,s.scene.add.existing((0,Na.Z)(s)),s}return t.isHeaving=function(){return void 0!=this.heavingBehavior},t.setHeavingBehavior=function(e){this.heavingBehavior=e},t.heave=function(){var e,t=this,n=null==(e=this.heavingBehavior)?void 0:e.heave(this);null==n||n.on(Phaser.Tweens.Events.TWEEN_COMPLETE,(function(){t.heavingBehavior=void 0}))},t.setProcessed=function(e){void 0===e&&(e=!0),this.isProcess=e},t.initDefault=function(){return e.prototype.initDefault.call(this),this.row=-1,this.col=-1,this.isProcess=!1,this.heavingBehavior=void 0,this},t.updatePhysicsRadius=function(e){void 0===e&&(e=33);var t=.5*this.width-e,n=.5*this.height-e;this.setCircle(e,t,n)},t.jiggle=function(e,t,n){var i=this;this.scene.tweens.addCounter({from:0,to:t,yoyo:!0,duration:150,loop:1,delay:n,onUpdate:function(t){if(i.active){var n=t.data[0].previous||0,a=t.getValue()-n;1===t.loopCounter?(i.x+=a*e.x,i.y+=a*e.y):(i.x-=a/4*e.x,i.y-=a/4*e.y)}else t.complete()},ease:"Sine.easeOut"})},t.moveTo=function(e,t,n){var i=this,a=e-this.x,r=t-this.y,s=Math.sqrt(a*a+r*r)/250*1e3;this.scene.tweens.addCounter({duration:s,onUpdate:function(e){if(i.active){var t=e.data[0].previous||0,s=e.getValue()-t,o=s*a,c=s*r;i.x+=o,i.y+=c,null==n||n.setPosition(i.x,i.y)}else e.complete()},ease:"Sine.easeOut"})},t.postUpdate=function(){this.y<-20&&this.visible?this.setVisible(!1):this.y>-20&&!this.visible&&this.setVisible(!0),e.prototype.postUpdate.call(this)},t.preKill=function(){var e;null==(e=this.body)||e.world.disableBody(this.body),this.scene.tweens.add({targets:this,duration:200,alpha:{from:1,to:.3},onComplete:this.kill,onCompleteScope:this})},t.kill=function(){var t,n;null==(t=this.takeStamp())||t.kill(),null==(n=this.body)||n.world.disableBody(this.body),e.prototype.kill.call(this)},n}(Hd),Jd=qd,Qd=function(e){function t(t,n,i){var a;(a=e.call(this,t,n,{immovable:!0})||this).physicsRadius=void 0,a.texture=void 0,a.ballSize=void 0,a.scene.add.existing((0,Na.Z)(a)),a.setActive(!0),a.texture=i,a.physicsRadius=a.scene.data.get("physicsWorld").gridBallCollisionRadius;var r=a.scene.data.get("ball"),s=r.width,o=r.height;return a.ballSize=new Phaser.Structs.Size(s,o),a.listenEvents(),a}(0,o.Z)(t,e);var n=t.prototype;return n.listenEvents=function(){this.scene.events.off("postupdate",this.postUpdate,this),this.scene.events.on("postupdate",this.postUpdate,this)},n.postUpdate=function(){this.getChildren().forEach((function(e){e.active&&e.postUpdate()}))},n.spawn=function(e,t,n){var i=this.getFirstDead();return i||(i=this.createGridBall()),(n||0===n)&&i.setColor(n),this.world.enableBody(i),i.initDefault(),i.setPosition(e,t),i.revive(),i.updatePhysicsRadius(this.physicsRadius),i},n.reset=function(){this.getChildren().forEach((function(e){e.active&&e.kill()}))},n.initObjects=function(e){for(var t=0;t<e;t++){this.createGridBall().kill()}},n.createGridBall=function(){var e=Ka.Z.GAMEPLAY.GAME_OBJECTS.KEY,t=this.ballSize,n=t.width,i=t.height,a=new Jd(this.scene,0,0,e);return this.add(a),a.setWorldSize(n,i),a.setDepth(_a.Z.BALL_AND_TAIL),a},n.getChildren=function(){return e.prototype.getChildren.call(this)},t}(Phaser.Physics.Arcade.Group),$d=Qd,ep=function(){function e(e){this.scene=void 0,this.vibrateSupport=void 0,this.scene=e,this.vibrateSupport=Su()}var t=e.prototype;return t.handleCombosIncreased=function(e){if(this.isVibrateEnable())switch(e){case 3:wu(50);break;case 4:wu(100);break;case 5:wu(150);break;case 6:wu(200);break;case 7:wu(250);break;case 8:wu(300);break;case 9:wu(350)}},t.handleBombCreated=function(){this.isVibrateEnable()&&wu(350)},t.handleBombexploding=function(){this.isVibrateEnable()&&wu(450)},t.handleAlertAboutFlyingDino=function(e){this.isVibrateEnable()&&wu(e)},t.isVibrateEnable=function(){var e=this.scene.player.getPlayerSettings();return this.vibrateSupport&&e.vibrate},e}(),tp=ep,np=function(e){function t(t,n,i,a,r){var s;return(s=e.call(this,t,n,i,a,r)||this).scene=void 0,s.tail=void 0,s.tailEmitter=void 0,s.launching=!1,s.flyingBehavior=void 0,s.size=void 0,s.radius=0,s.fromGift=void 0,s.scene=t,s.scene.add.existing((0,Na.Z)(s)),s.initSprite(),s}(0,o.Z)(t,e);var n=t.prototype;return n.initSprite=function(){this.tail=new Fd(this.scene),this.tail.kill(),this.tail.setAlpha(.7)},n.initDefault=function(){this.setAlpha(1),this.setAngle(0),this.setDefaultSize()},n.setDefaultSize=function(){if(this.size){var e=this.size,t=e.width,n=e.height;this.setWorldSize(t,n)}},n.setWorldSize=function(t,n,i){void 0===i&&(i=!1),e.prototype.setWorldSize.call(this,t,n),i&&(this.size?this.size.setSize(t,n):this.size=new Phaser.Structs.Size(t,n))},n.updatePhysicsRadius=function(e){var t=.5*this.width-e,n=.5*this.height-e;this.setCircle(e,t,n)},n.setPhysicsRadius=function(e){this.radius=e},n.setFlyingBehavior=function(){var e=this.scene.registry.get("bullet").speed;return this.flyingBehavior=new Wd(e),this},n.launch=function(e){var t,n,i;this.flyingBehavior.fly(this,e),this.launching=!0;var a=16090639;this.tail.setColor(a),this.tail.resetTail(this.x,this.y),this.tail.revive(),null==(t=this.tailEmitter)||t.setTint(a),null==(n=this.tailEmitter)||n.startFollow(this),null==(i=this.tailEmitter)||i.start()},n.postUpdate=function(){var e=1/this.scene.world.getPixelRatio(),t=this.x,n=this.y;if(this.tail.move(t,n),this.launching){var i=(this.body.velocity.angle()||-Math.PI/2)+Math.PI/2;this.setRotation(i),this.setScale(.9*e,1.15*e),this.updatePhysicsRadius(this.radius/.9)}this.y<-30&&this.kill()},n.makeExplosion=function(){var e=1/this.scene.world.getPixelRatio();this.scene.tweens.add({targets:this,duration:100,scaleX:{from:.9*e,to:1.15*e},scaleY:{from:1.15*e,to:.9*e},alpha:{from:1,to:.3}}),this.preKill()},n.preKill=function(){var e,t=this;this.launching=!1,this.body.enable=!1,null==(e=this.tailEmitter)||e.stop(),this.tail.kill(),this.scene.time.delayedCall(150,(function(){t.kill()}))},n.kill=function(){var t,n;this.launching=!1,null==(t=this.body)||t.world.disableBody(this.body),this.tail.kill(),null==(n=this.tailEmitter)||n.stop(),e.prototype.kill.call(this)},n.setTailEmitter=function(e){this.tailEmitter=e},t}(Phaser.Physics.Arcade.Image),ip=np,ap=function(e){function t(t,n){var i;(i=e.call(this,t,n)||this).scene=void 0,i.tailParticles=void 0,i.physicsRadius=void 0,i.depth=void 0,i.bombSize=void 0,i.scene=n,i.setActive(!0),i.scene.add.existing((0,Na.Z)(i)),i.physicsRadius=i.scene.data.get("physicsWorld").bulletCollisionRadius;var a=i.scene.data.get("bomb"),r=a.width,s=a.height;return i.bombSize=new Phaser.Structs.Size(r,s),i.tailParticles=n.tailParticles,i.listenEvents(),i}(0,o.Z)(t,e);var n=t.prototype;return n.setPhysicsRadius=function(e){return this.physicsRadius=e,this},n.setDepth=function(t,n){return this.depth=t,e.prototype.setDepth.call(this,t,n),this},n.listenEvents=function(){this.scene.events.off("postupdate",this.postUpdate,this),this.scene.events.on("postupdate",this.postUpdate,this)},n.postUpdate=function(){this.getChildren().forEach((function(e){e.active&&e.postUpdate()}))},n.createTailEmitter=function(){var e=Ka.Z.GAMEPLAY.GAMEPLAY_TEXTURES.FRAME,t=1/this.scene.world.getPixelRatio(),n={x:200,y:200,frame:[e.PARTICLE_STAR,e.PARTICLE_CIRCLE_1,e.PARTICLE_CIRCLE_2],angle:{min:45,max:135},scale:{start:t,end:0},alpha:{start:.7,end:0},speed:{min:50,max:100},frequency:20,quantity:5,tint:16777215,lifespan:{min:500,max:1500},on:!1};return this.tailParticles.createEmitter(n)},n.spawn=function(e,t){void 0===e&&(e=0),void 0===t&&(t=0);var n=this.getFirstDead();return n||(n=this.addBomb()),this.world.enableBody(n),n.initDefault(),n.revive(),n.setPosition(e,t),n.setCollideWorldBounds(!0,1,1),n.updatePhysicsRadius(this.physicsRadius),n.body.enable=!1,n},n.reset=function(){this.getChildren().forEach((function(e){e.active&&e.kill()}))},n.initObjects=function(e){for(var t=0;t<e;t++){this.addBomb().kill()}},n.getChildren=function(){return e.prototype.getChildren.call(this)},n.addBomb=function(){var e=Ka.Z.GAMEPLAY.GAME_OBJECTS,t=e.KEY,n=e.FRAME,i=new ip(this.scene,0,0,t,n.BOMB);i.setDepth(_a.Z.BULLET);var a=this.tailParticles.createTailEmitter();i.setTailEmitter(a),this.add(i),i.setPhysicsRadius(this.physicsRadius);var r=this.bombSize,s=r.width,o=r.height;return i.setWorldSize(s,o),i},t}(Phaser.Physics.Arcade.Group),rp=ap,sp=function(e){return e[e.Stamp5=0]="Stamp5",e[e.Stamp10=1]="Stamp10",e[e.Stamp15=2]="Stamp15",e[e.Stamp2x=3]="Stamp2x",e[e.Stamp3x=4]="Stamp3x",e[e.Stamp4x=5]="Stamp4x",e[e.StampUp=6]="StampUp",e[e.None=-1]="None",e}(sp||{}),op=sp,cp=Ka.Z.GAMEPLAY.GAME_OBJECTS.FRAME,lp=function(e){(0,o.Z)(n,e);var t=n.prototype;function n(t,n,i,a){var r;return(r=e.call(this,t,n,i,a)||this).stampType=void 0,r.stampType=op.None,r.setDepth(_a.Z.BULLET+1),r.setOrigin(.51,.49),r.scene.children.add((0,Na.Z)(r)),r}return t.getStampType=function(){return this.stampType},t.setStamp=function(e){switch(e){case op.Stamp5:this.setFrame(cp.BONUS_STAMP_05);break;case op.Stamp10:this.setFrame(cp.BONUS_STAMP_10);break;case op.Stamp15:this.setFrame(cp.BONUS_STAMP_15);break;case op.Stamp2x:this.setFrame(cp.BONUS_STAMP_2X);break;case op.Stamp3x:this.setFrame(cp.BONUS_STAMP_3X);break;case op.Stamp4x:this.setFrame(cp.BONUS_STAMP_4X);break;case op.StampUp:this.setFrame(cp.BONUS_STAMP_UP);break;default:this.setFrame(cp.BLANK)}this.stampType=e},t.followBall=function(e){this.setPosition(e.x,e.y),this.setScale(1.2*e.scale,1.12*e.scale),this.alpha=e.alpha,this.visible=e.visible},n}(Phaser.GameObjects.Image),up=lp,hp=function(e){function t(t){var n;return(n=e.call(this,t,{})||this).setActive(!0),n.initObjects(),n.scene.add.existing((0,Na.Z)(n)),n}(0,o.Z)(t,e);var n=t.prototype;return n.spawn=function(e,t){void 0===e&&(e=0),void 0===t&&(t=0);var n=this.getFirstDead();return n?n.revive():n=this.createStamp(),n.setPosition(e,t),n},n.reset=function(){this.getChildren().forEach((function(e){e.active&&e.kill()}))},n.initObjects=function(){for(var e=0;e<5;e++){var t=this.createStamp();t.kill(),this.add(t)}},n.createStamp=function(){var e=Ka.Z.GAMEPLAY.GAME_OBJECTS.KEY;return new up(this.scene,0,0,e)},n.getChildren=function(){return e.prototype.getChildren.call(this)},t}(Phaser.GameObjects.Group),dp=hp,pp=Ka.Z.GAMEPLAY.GAMEPLAY_TEXTURES,fp=pp.KEY,gp=pp.FRAME,mp=function(e){function t(t,n,i){var a;return void 0===n&&(n=37),void 0===i&&(i=37),(a=e.call(this,t,{key:fp,frame:gp.AVATAR_FRAME,background:gp.AVATAR_BG,width:n,height:i,loadDelay:100})||this).scene.add.existing((0,Na.Z)(a)),a}return(0,o.Z)(t,e),t.prototype.loadPhoto=function(t,n,i){void 0===i&&(i=0),n&&(t===this.payload.id&&n===this.payload.url||e.prototype.loadPhoto.call(this,t,n,i))},t}(Hc),vp=mp,yp=Ka.Z.GAMEPLAY.GAMEPLAY_TEXTURES,Ep=yp.KEY,Ap=yp.FRAME,Sp=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n.currentPlayer=void 0,n.slideDuration=void 0,n.floatInBlock=void 0,n.floatOutBlock=void 0,n.deltaX=5,n.avatar=void 0,n.rankFlag=void 0,n.rankNumber=void 0,n.updateLeader=function(e,t){"photo"===t&&n.updateAvatar(),"rank"===t&&n.updateRankNumber()},n.show=function(){n.setVisible(!0)},n.hide=function(){n.setVisible(!1)},n.scene=t,n.setSize(50,50),n.setDurationAnimation(2e3),n.setDataEnabled(),n.createAvatar(),n.createRank(),n.listenEvents(),n.setDepth(_a.Z.UI),n.scene.add.existing((0,Na.Z)(n)),n}(0,o.Z)(t,e);var n=t.prototype;return n.isCurrentPlayer=function(){return this.currentPlayer},n.setCurrentPlayer=function(e){this.currentPlayer=e,this.updateRankFlag()},n.listenEvents=function(){this.on(Phaser.Data.Events.SET_DATA,this.updateLeader),this.on(Phaser.Data.Events.CHANGE_DATA,this.updateLeader)},n.setDurationAnimation=function(e){this.slideDuration=e},n.runFloatInAnimation=function(e,t,n){var i,a,r=this.deltaX;null==(i=this.floatOutBlock)||null==(i=i.tween)||i.complete();var s=t?e-r:e+r;this.floatInBlock=new Ya.Z({targets:[this],delay:25*n,duration:this.slideDuration,props:{x:{start:s,from:s,to:e}}}),this.setVisible(!0),null==(a=this.floatInBlock)||a.play()},n.runFloatOutAnimation=function(e,t,n){var i,a,r=this,s=this.deltaX;null==(i=this.floatInBlock)||null==(i=i.tween)||i.complete();var o=t?e+s:e-s;this.floatOutBlock=new Ha.Z({targets:[this],delay:50*n,duration:this.slideDuration,props:{x:{start:e,from:e,to:o}},onComplete:function(){r.setVisible(!1),r.x=e}}),null==(a=this.floatOutBlock)||a.play()},n.stopFloatAnimation=function(){var e,t,n,i;null==(e=this.floatInBlock)||null==(e=e.tween)||e.stop(1),null==(t=this.floatInBlock)||t.remove(),null==(n=this.floatOutBlock)||null==(n=n.tween)||n.stop(1),null==(i=this.floatOutBlock)||i.remove()},n.createAvatar=function(){this.avatar=new vp(this.scene),Phaser.Display.Align.In.Center(this.avatar,this),this.add(this.avatar)},n.createRank=function(){this.rankFlag=this.scene.make.image({key:Ep,frame:Ap.RANK_YELLOW}),this.rankFlag.setWorldSize(25,20),this.rankNumber=this.scene.make.bitmapText({font:$a.Z.PRIMARY.KEY,size:this.scene.fontSize(16),origin:{x:.5,y:.5},text:"1"}),Phaser.Display.Align.In.TopCenter(this.rankFlag,this,0,4),Phaser.Display.Align.In.Center(this.rankNumber,this.rankFlag,-2,-1),this.add([this.rankFlag,this.rankNumber])},n.updateAvatar=function(){var e=this.getData("playerId"),t=this.getData("photo");this.avatar.loadPhoto(e,t)},n.updateRankFlag=function(){this.isCurrentPlayer()?this.rankFlag.setFrame(Ap.RANK_YELLOW):this.rankFlag.setFrame(Ap.RANK_VIOLET)},n.updateRankNumber=function(){var e=this.getData("rank");this.rankNumber.setText(""+e)},t}(Phaser.GameObjects.Container),bp=Sp,Tp=GameCore.Configs.Gameplay.MockScoreDifficult,wp=function(e){function t(t){var n;(n=e.call(this,t)||this).playerId=void 0,n.currentScore=void 0,n.maxBlocks=5,n.xArray=void 0,n.lastUpdate=0,n.durationAnimation=400,n.timer=void 0,n.lastScore=void 0,n.playersScore=void 0,n.playersDifficult=void 0,n.leaders=void 0;var i=n.scene.player;return n.playerId=i.getPlayerId(),n.initMockData(),n.createPosition(),n.createLeaders(),n.alignLeaders(),n.run(),n.setDepth(_a.Z.LEADERBOARD),n.scene.add.existing((0,Na.Z)(n)),n}(0,o.Z)(t,e);var n=t.prototype;return n.run=function(){var e=this;if(this.revive(),this.timer){this.timer.remove();var t=this.getLeadersData();if(t.length<1)return;var n=this.mockupLeaderScores(this.currentScore,t);this.updateScores(n),this.updateLeaders(n)}this.timer=this.scene.time.addEvent({delay:5e3,repeat:-1,callback:function(){var t=e.getLeadersData();if(!(t.length<1)){var n=e.mockupLeaderScores(e.currentScore,t);e.updateScores(n),e.updateLeaders(n)}}})},n.reset=function(){var e;this.lastScore=0,this.currentScore=0,this.playersScore={},this.kill(),null==(e=this.timer)||e.destroy(),this.leaders.getChildren().forEach((function(e,t){e.setData("rank",t+1),e.stopFloatAnimation(),e.setAlpha(1)})),this.alignLeaders()},n.alignLeaders=function(){var e=this;this.leaders.setVisible(!1),this.leaders.getChildren().forEach((function(t,n){var i=t,a=e.xArray[n];i.setX(a),i.setVisible(!0)}))},n.getPosX=function(e){var t=this.getCurrentPlayer();if(!t)return 0;var n=t.getData("rank")||0,i=e.getData("rank");n>this.maxBlocks?i-=this.maxBlocks:i-=n;var a=i/Math.abs(i),r=.5*t.displayWidth-.5*e.displayWidth;return t.x+(10+e.displayWidth)*i+r*a},n.getLeadersData=function(){var e=this.scene.storage.getState(),t=Ns(e);return hi()(t)},n.updatePlayer=function(e){var t=this,n=this.getLeadersData();if(!(n.length<1)&&k()(n).call(n,(function(e){return e.playerId===t.playerId}))){var i=this.mockupLeaderScores(e,n);this.updateLeaders(i),this.currentScore=e}},n.initMockData=function(){var e=this;this.playersScore={},this.playersDifficult={},Gs.forEach((function(t){var n=t.playerId,i=t.difficult;e.playersDifficult[n]=i}))},n.mockupLeaderScores=function(e,t){var n=this,i=e-this.lastScore;i=i<=0?Phaser.Math.RND.between(0,200):i,this.lastScore=e;var a=Ie()(t).call(t,(function(t){var a=(0,r.Z)({},t,{rank:0,score:e});if(a.playerId===n.playerId)return a;var s=0,o=Phaser.Math.RND.between(0,100);s=(s=o<=20?.5*i:o<=60?1*i:o<90?1.4*i:2.5*i)>2500?2500:s;var c=(s=Phaser.Math.RND.between(0,s))*n.playersDifficult[a.playerId],l=10*Math.round(c*Tp/10);if(!GameCore.Utils.Object.hasOwn(n.playersScore,a.playerId)){var u;if(!n.playersScore)n.playersScore=((u={})[a.playerId]=0,u);n.playersScore[a.playerId]=0}return n.playersScore[a.playerId]+=l,a.score=n.playersScore[a.playerId],a})),s=pi()(a).call(a,(function(e,t){return t.score-e.score}));return s.forEach((function(e,t){e.rank=t+1})),s},n.updateLeaders=function(e){var t=this,n=Date.now();if(!(n-this.lastUpdate<this.durationAnimation+1e3)){this.lastUpdate=n;var i=Yu()(e).call(e,(function(e){return e.playerId===t.playerId}));if(!(i<0)){var a=Math.floor(this.maxBlocks/2),r=i-a,s=i+a;r<0&&(r=0),s>=e.length&&(s=e.length);var o=E()(e).call(e,r,s+1);this.processLogicUpdateOrder(o,i-r)}}},n.updateScores=function(e){this.scene.storage.dispatch(function(e){return{type:Kn,payload:{leaders:e}}}(e))},n.processLogicUpdateOrder=function(e,t){var n=this,i=this.leaders.getChildren(),a=this.getCurrentPlayer(),r=null==a?void 0:a.getData("rank"),s=e[t].rank,o=Math.floor(this.maxBlocks/2),c=r>s;r!=s?(i.forEach((function(e,t){if(!e.isCurrentPlayer()){var i=n.xArray[t];e.setDurationAnimation(n.durationAnimation),e.runFloatOutAnimation(i,c,t)}})),this.scene.time.delayedCall(this.durationAnimation,(function(){e.forEach((function(e,a){var r=i[a+o-t],s=n.playerId===e.playerId,l=n.xArray[a+o-t];r.setData(e),s?r.setCurrentPlayer(!0):r.runFloatInAnimation(l,c,a)}))}))):e.forEach((function(e,n){i[n+o-t].setData(e)}))},n.createPosition=function(){for(var e=Math.floor(this.maxBlocks/2),t=[],n=0;n<this.maxBlocks;n++){var i=n-e,a=50*i;i<0?a-=5:i>0&&(a+=5),t.push(a)}this.xArray=t},n.createLeaders=function(){this.leaders=this.scene.make.group({maxSize:this.maxBlocks});for(var e=Math.floor(this.maxBlocks/2),t=0;t<this.maxBlocks;t++){var n=new bp(this.scene);n.setData({playerId:""+t,score:0,photo:"",rank:t+1}),t===e?(n.setDisplaySize(50,50),n.setCurrentPlayer(!0),n.setData("playerId",this.playerId)):(n.setPosition(0,5),n.setDisplaySize(40,40),n.setCurrentPlayer(!1)),this.leaders.add(n)}var i=this.leaders.getChildren();this.add(i),this.bringToTop(i[0])},n.getCurrentPlayer=function(){var e=this.leaders.getChildren();return k()(e).call(e,(function(e){return e.isCurrentPlayer()}))},t}(Phaser.GameObjects.Container),Cp=wp,Ip=function(e){function t(t){var n;return(n=e.call(this,t)||this).avatar=void 0,n.scoreText=void 0,n.createAvatar(),n.createScore(),n.setScore(0),n}(0,o.Z)(t,e);var n=t.prototype;return n.setScore=function(e){var t=GameCore.Utils.Number.toAbbreviatedString(e||0,{fractionalDigits:1,startAbbreviate:1e5});this.scoreText.setText(t)},n.loadPhoto=function(e,t){this.avatar.loadPhoto(e,t)},n.createAvatar=function(){this.avatar=new vp(this.scene,40,40),this.add(this.avatar)},n.createScore=function(){this.scoreText=this.scene.make.bitmapText({font:$a.Z.PRIMARY.KEY,size:this.scene.fontSize(13)}),this.scoreText.setOrigin(.5,.5),Phaser.Display.Align.In.BottomCenter(this.scoreText,this.avatar),this.add(this.scoreText)},t}(Phaser.GameObjects.Container),Pp=Ip,xp=function(e){function t(t){var n;return(n=e.call(this,t)||this).vsText=void 0,n.leftPlayer=void 0,n.rightPlayer=void 0,n.createVsText(),n.createLeftAvatar(),n.createRightAvatar(),n.scene.add.existing((0,Na.Z)(n)),n}(0,o.Z)(t,e);var n=t.prototype;return n.createVsText=function(){this.vsText=this.scene.make.bitmapText({font:$a.Z.PRIMARY.KEY,size:this.scene.fontSize(25),text:this.scene.lang.Text.VS,origin:{x:.5,y:.5}}),this.vsText.setPosition(4.5,2),this.add(this.vsText)},n.createLeftAvatar=function(){this.leftPlayer=new Pp(this.scene),this.leftPlayer.setX(-46),this.add(this.leftPlayer)},n.createRightAvatar=function(){this.rightPlayer=new Pp(this.scene),this.rightPlayer.setX(56),this.add(this.rightPlayer)},t}(Phaser.GameObjects.Container),kp=xp,Op=Ka.Z.GAMEPLAY.GAMEPLAY_TEXTURES,Rp=Op.KEY,Bp=Op.FRAME,_p=function(e){function t(t){var n;return(n=e.call(this,t)||this).topOnePlayer=void 0,n.topTwoPlayer=void 0,n.topThreePlayer=void 0,n.topOneScore=void 0,n.topTwoScore=void 0,n.topThreeScore=void 0,n.createTopOnePlayer(),n.createTopTwoPlayer(),n.createThreeTwoPlayer(),n.scene.add.existing((0,Na.Z)(n)),n}(0,o.Z)(t,e);var n=t.prototype;return n.updateData=function(e){var t=oa.Z.AVATAR,n=t.KEY,i=t.FILE,a=e[0],r=e[1],s=e[2];if(a){var o=GameCore.Utils.Number.toAbbreviatedString(+a.score,{startAbbreviate:1e5});this.topOneScore.setText(o),this.topOnePlayer.loadPhoto(a.playerId,a.photo)}else this.topOneScore.setText("???"),this.topOnePlayer.loadPhoto(n,i);if(r){var c=GameCore.Utils.Number.toAbbreviatedString(+r.score,{startAbbreviate:1e5});this.topTwoScore.setText(c),this.topTwoPlayer.loadPhoto(r.playerId,r.photo)}else this.topTwoScore.setText("???"),this.topTwoPlayer.loadPhoto(n,i);if(s){var l=GameCore.Utils.Number.toAbbreviatedString(+s.score,{startAbbreviate:1e5});this.topThreeScore.setText(l),this.topThreePlayer.loadPhoto(s.playerId,s.photo)}else this.topThreeScore.setText("???"),this.topThreePlayer.loadPhoto(n,i)},n.createTopOnePlayer=function(){this.topOnePlayer=new vp(this.scene);var e=this.scene.make.image({key:Rp,frame:Bp.ICON_GOLD});e.setPosition(-18,-9),e.setWorldSize(28,27),this.topOneScore=this.scene.make.bitmapText({font:$a.Z.PRIMARY.KEY,size:this.scene.fontSize(14),text:"99999",origin:{x:.5,y:0}}),this.topOneScore.setY(12),this.topOnePlayer.add([this.topOneScore,e]),this.topOnePlayer.setX(-68),this.add(this.topOnePlayer)},n.createTopTwoPlayer=function(){this.topTwoPlayer=new vp(this.scene);var e=this.scene.make.image({key:Rp,frame:Bp.ICON_SILVER});e.setPosition(-18,-9),e.setWorldSize(28,27),this.topTwoScore=this.scene.make.bitmapText({font:$a.Z.PRIMARY.KEY,size:this.scene.fontSize(13),text:"99999",origin:{x:.5,y:0}}),this.topTwoScore.setY(12),this.topTwoPlayer.add([this.topTwoScore,e]),Phaser.Display.Align.In.Center(this.topTwoPlayer,this.topOnePlayer,68),this.add(this.topTwoPlayer)},n.createThreeTwoPlayer=function(){this.topThreePlayer=new vp(this.scene);var e=this.scene.make.image({key:Rp,frame:Bp.ICON_BRONZE});e.setPosition(-18,-9),e.setWorldSize(28,27),this.topThreeScore=this.scene.make.bitmapText({font:$a.Z.PRIMARY.KEY,size:this.scene.fontSize(13),text:"99999",origin:{x:.5,y:0}}),this.topThreeScore.setY(12),this.topThreePlayer.add([this.topThreeScore,e]),Phaser.Display.Align.In.Center(this.topThreePlayer,this.topTwoPlayer,68),this.add(this.topThreePlayer)},t}(Phaser.GameObjects.Container),Dp=_p,Np=Ka.Z.GAMEPLAY.GAMEPLAY_TEXTURES,Lp=Np.KEY,Mp=Np.FRAME,Gp=function(e){function t(t){var n;(n=e.call(this,t)||this).scene=void 0,n.scoreText=void 0,n.leaders=void 0,n.challengeBlock=void 0,n.tournamentPlayers=void 0,n.scoreBlock=void 0,n.updateScoreTimer=void 0,n.updateScore=function(){var e,t=n.scene.registry.get("gameData").score,i=GameCore.Utils.Number.toAbbreviatedString(+t,{startAbbreviate:1e8});n.scoreText.setText(i),null==(e=n.updateScoreTimer)||e.remove(),n.updateScoreTimer=n.scene.time.delayedCall(500,(function(){n.scene.storage.dispatch(Ao({score:t}))}))},n.scene=t;var i=n.scene.gameZone.width;return n.setSize(i,55),n.createBackground(),n.createLine(),n.createLeaders(),n.createTournamentPlayers(),n.createChallengeBlock(),n.createScoreBar(),n.listenEvents(),t.add.existing((0,Na.Z)(n)),n}(0,o.Z)(t,e);var n=t.prototype;return n.createBackground=function(){var e=this.scene.world.getPixelRatio(),t=this.scene.add.image(0,-this.height/2,oa.Z.GAME_BACKGROUND.KEY);t.setOrigin(.5,0),t.setTint(11184810),t.setWorldSize(375,667),t.setCrop(0,0,this.width*e,this.height*e),t.setAlpha(.7),this.add(t)},n.createLine=function(){var e=this.scene.make.image({key:Lp,frame:Mp.TOP_LINE,y:this.height/2+3});e.setWorldSize(375,16),this.add(e)},n.createLeaders=function(){this.leaders=new Cp(this.scene),this.leaders.setY(-2),this.leaders.kill(),this.add(this.leaders)},n.createTournamentPlayers=function(){this.tournamentPlayers=new Dp(this.scene),this.tournamentPlayers.setPosition(20,-4),this.tournamentPlayers.kill(),this.add(this.tournamentPlayers)},n.createChallengeBlock=function(){this.challengeBlock=new kp(this.scene),this.challengeBlock.kill(),this.challengeBlock.setY(-3),this.add(this.challengeBlock)},n.createScoreBar=function(){this.scoreBlock=this.scene.add.container();var e=this.scene.make.image({key:Lp,frame:Mp.TAB_SCORE,origin:{x:0,y:.5}});e.setWorldSize(77,33),this.scoreText=this.scene.make.bitmapText({font:$a.Z.PRIMARY.KEY,size:this.scene.fontSize(18),origin:{x:.5,y:.5}}),Phaser.Display.Align.In.Center(this.scoreText,e,0,1),this.scoreBlock.add([e,this.scoreText]),this.add(this.scoreBlock),Phaser.Display.Align.In.LeftCenter(this.scoreBlock,this,-23)},n.listenEvents=function(){this.scene.events.on(sd.SCORE_CHANGED,this.updateScore)},t}(Phaser.GameObjects.Container),Fp=Gp,Zp=Ka.Z.DEFAULT,Up=Zp.KEY,Yp=Zp.FRAME,Hp=function(e){function t(t,n,i,a){var r;return(r=e.call(this,t,n,i,a)||this).popup=void 0,r.dinoTitle=void 0,r.gameOverText=void 0,r.rankingIcon=void 0,r.popupShowUpAnimation=void 0,r.popupFadeOutAnimation=void 0,r.open=function(){e.prototype.open.call((0,Na.Z)(r));var t=r.scene.game.globalScene;t instanceof rr.Z&&t.requestBackgroundMaskUpdate(Da.o4.GAME_OVER_SCREEN,.5),r.updateScore(),r.runOpenAnimation()},r.closePopup=function(){r.scene.audio.playSound(er.Z.POPUP_OFF,{volume:.6}),r.runCloseAnimation(),r.popupFadeOutAnimation.next((function(){r.scene.screen.close(r.name);var e=r.scene.game.globalScene;e instanceof rr.Z&&e.requestBackgroundMaskUpdate(Da.o4.GAME_OVER_SCREEN,0)}))},r.createPopup(),r.createDinoTitle(),r.createPopupContent(),r.setDepth(Da.Ks.POPUP),r.setY(-50),r.background.setAlpha(.5),r}(0,o.Z)(t,e);var n=t.prototype;return n.createPopup=function(){this.popup=new Gc(this.scene,0,0,395,110),this.add(this.popup),Phaser.Display.Align.In.Center(this.popup,this.zone)},n.createDinoTitle=function(){this.dinoTitle=new _c(this.scene,{title:this.scene.lang.Text.GAME_OVER,titleSize:25}),this.dinoTitle.background.kill(),this.dinoTitle.changeRibbon(Yp.RIBBON_RED,276.5,68.5),Phaser.Display.Align.In.TopCenter(this.dinoTitle,this.popup,0,78),this.popup.add(this.dinoTitle)},n.createPopupContent=function(){this.createGameOverText()},n.createGameOverText=function(){this.gameOverText=this.scene.make.bitmapText({font:$a.Z.PRIMARY.KEY,size:this.scene.fontSize(30),text:"0",origin:{x:0,y:.5}}),this.rankingIcon=this.scene.add.image(-15,0,Up,Yp.ICON_RANKING),this.rankingIcon.setWorldSize(36,36),this.popup.add([this.gameOverText,this.rankingIcon])},n.updateScore=function(){var e=this.scene.registry.get("gameData").score;this.gameOverText.setText(""+e),Phaser.Display.Align.In.Center(this.gameOverText,this.popup,15),Phaser.Display.Align.In.LeftCenter(this.rankingIcon,this.gameOverText,45)},n.runOpenAnimation=function(){this.scene.audio.playSound(er.Z.POPUP_SHOW),this.runPopupEntrancesAnimation(0,500)},n.runCloseAnimation=function(){this.runPopupExitsAnimation(0,500)},n.runPopupEntrancesAnimation=function(e,t){if(!this.popupShowUpAnimation){var n=this.popup.y;this.popupShowUpAnimation=new Ya.Z({targets:[this.popup],delay:e,duration:t,props:{y:{start:350,from:350,to:n},alpha:{start:1,from:1,to:1}}})}this.popupShowUpAnimation.play()},n.runPopupExitsAnimation=function(e,t){var n;this.popupFadeOutAnimation||(this.popupFadeOutAnimation=new Ha.Z({targets:[this.popup],delay:e,duration:t,completeDelay:1e3})),null==(n=this.popupFadeOutAnimation)||n.play()},n.logPageviewOnOpen=function(){},n.logPageviewOnClose=function(){},t}(GameCore.Screen),zp=Hp,Wp=Ka.Z.DEFAULT.FRAME,Vp=function(e){function t(t,n,i,a){var r;return(r=e.call(this,t,n,i,a)||this).popup=void 0,r.dinoTitle=void 0,r.tutorialText=void 0,r.popupShowUpAnimation=void 0,r.popupFadeOutAnimation=void 0,r.open=function(){e.prototype.open.call((0,Na.Z)(r)),r.runOpenAnimation()},r.closePopup=function(){r.scene.audio.playSound(er.Z.POPUP_OFF,{volume:.6}),r.runCloseAnimation(),r.popupFadeOutAnimation.next((function(){r.scene.screen.close(r.name)}))},r.createBackground(),r.createFooterBackground(),r.createPopup(),r.createDinoTitle(),r.createPopupContent(),r.setDepth(Da.Ks.POPUP),r.setY(-50),r.background.setAlpha(1),r}(0,o.Z)(t,e);var n=t.prototype;return n.createBackground=function(){var e=this.scene.make.image({key:oa.Z.GAME_BACKGROUND.KEY,origin:{x:.5,y:.5}});e.setWorldSize(this.zone.width,this.zone.height),this.add(e),Phaser.Display.Align.In.Center(e,this.zone)},n.createFooterBackground=function(){var e=this.scene,t=Ka.Z.GAMEPLAY.GAMEPLAY_TEXTURES,n=t.KEY,i=t.FRAME,a=e.registry.get("zones").zones,r=e.world.getPixelRatio(),s=e.add.image(0,0,n,i.FOOTER_BG);s.setWorldSize(375,231),s.setOrigin(.5*r,1*r),this.add(s),s.setY(a.zone5.bottomY-this.scene.gameZone.height/2+70)},n.createPopup=function(){this.popup=new Gc(this.scene,0,0,395,120),this.add(this.popup),Phaser.Display.Align.In.Center(this.popup,this.zone)},n.createDinoTitle=function(){this.dinoTitle=new _c(this.scene,{title:"Dinosaur Eggs Pop",titleSize:20}),this.dinoTitle.background.kill(),this.dinoTitle.changeRibbon(Wp.RIBBON_RED,276.5,68.5),Phaser.Display.Align.In.TopCenter(this.dinoTitle,this.popup,0,78),this.popup.add(this.dinoTitle)},n.createPopupContent=function(){this.createTutorialText()},n.createTutorialText=function(){this.tutorialText=this.scene.make.bitmapText({font:$a.Z.PRIMARY.KEY,size:this.scene.fontSize(34),text:this.scene.lang.Text.READY,origin:{x:.5,y:.5}}),Phaser.Display.Align.In.Center(this.tutorialText,this.popup,0,0),this.popup.add(this.tutorialText)},n.runOpenAnimation=function(){this.scene.audio.playSound(er.Z.POPUP_SHOW),this.runPopupEntrancesAnimation(0,400)},n.runCloseAnimation=function(){this.runPopupExitsAnimation(0,400)},n.runPopupEntrancesAnimation=function(e,t){var n=this;this.background.setAlpha(1),this.popupShowUpAnimation||(this.popupShowUpAnimation=new Ya.Z({targets:[this.popup],delay:e,duration:t,props:{alpha:{from:0,to:1}},onComplete:function(){n.background.setAlpha(0)}})),this.popupShowUpAnimation.play()},n.runPopupExitsAnimation=function(e,t){var n;this.popupFadeOutAnimation||(this.popupFadeOutAnimation=new Ha.Z({targets:[this.popup],delay:e,duration:t,props:{alpha:0}})),null==(n=this.popupFadeOutAnimation)||n.play()},n.logPageviewOnOpen=function(){},n.logPageviewOnClose=function(){},t}(GameCore.Screen),Kp=Vp,jp=Ka.Z.DEFAULT,Xp=jp.KEY,qp=jp.FRAME,Jp=function(e){function t(t,n,a,r){var o;return(o=e.call(this,t,n,a,r)||this).scene=void 0,o.popup=void 0,o.line=void 0,o.title=void 0,o.continueButton=void 0,o.homeButton=void 0,o.settingMusic=void 0,o.settingSound=void 0,o.contents=void 0,o.popupShowUpAnimation=void 0,o.popupFadeOutAnimation=void 0,o.contentShowUpAnimation=void 0,o.buttonReleaseTimer=void 0,o.isButtonReleased=!1,o.open=function(){e.prototype.open.call((0,Na.Z)(o));var t=o.scene.game.globalScene;t instanceof rr.Z&&t.requestBackgroundMaskUpdate(Da.o4.PAUSE_SCREEN,.6);var n=o.scene.player.getPlayerSettings(),i=n.music,a=n.sound;o.settingMusic.updateStatus(i),o.settingSound.updateStatus(a),o.runOpenAnimation()},o.handleClosePopup=function(){o.scene.audio.playSound(er.Z.POPUP_OFF,{volume:.6}),o.runCloseAnimation(),o.popupFadeOutAnimation.next((function(){o.scene.screen.close(o.name),o.scene.stateManager.play()}))},o.handleReplayGame=function(){o.isButtonReleased||(o.isButtonReleased=!0,o.runCloseAnimation(),o.popupFadeOutAnimation.next((0,s.Z)(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o.scene.tweens.getTweensOf(o.continueButton).forEach((function(e){return e.complete()})),o.isButtonReleased=!1,o.scene.screen.close(o.name),o.scene.stateManager.quit(),e.next=6,o.scene.storage.dispatch(function(){var e=(0,s.Z)(h().mark((function e(t,n){var a,r,s,o,c;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r=window.game.globalScene,s=n(),o=os(s),me()(a=[la,da]).call(a,o)&&(t(co()),t(ro())),c=null,o===ua&&(r.screen.open(Da.o4.NOTIFY_SCREEN,{message:window.game.lang.Text.LOADING,loading:!0}),c=Os(s),t({type:Yn,payload:{}})),t(yo()),e.next=10,t(Bo(o,c));case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),(0,i.tO)(e.t0);case 15:return e.prev=15,To(300),e.finish(15);case 18:case"end":return e.stop()}}),e,null,[[0,12,15,18]])})));return function(t,n){return e.apply(this,arguments)}}());case 6:o.scene.stateManager.ready();case 7:case"end":return e.stop()}}),e)})))))},o.handlePlayWithFriend=(0,s.Z)(h().mark((function e(){var t,n,i,a,r,s;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!o.isButtonReleased){e.next=2;break}return e.abrupt("return");case 2:return t=o.scene.game.storage.getState(),n=Os(t),i=ga(t),e.next=7,o.scene.storage.dispatch(Po());case 7:if(a=o.scene.game.storage.getState(),r=Os(a),s=ga(a),!o.isChallengeMode(s)){e.next=17;break}if(!o.isChallengeMode(i)){e.next=14;break}if(r.playerId!==n.playerId){e.next=14;break}return e.abrupt("return");case 14:o.scene.screen.close(o.name),o.scene.stateManager.quit(),o.scene.stateManager.ready();case 17:case"end":return e.stop()}}),e)}))),o.handleGotoDashboard=function(){o.isButtonReleased||(o.isButtonReleased=!0,o.runCloseAnimation(),o.popupFadeOutAnimation.next((function(){o.scene.tweens.getTweensOf(o.homeButton).forEach((function(e){return e.complete()})),o.isButtonReleased=!1,o.scene.screen.close(o.name),o.scene.scene.switch(Sa.C.DASHBOARD_SCENE)})))},o.handleMusicSetting=function(e){o.scene.player.setSetting("music",e),e?o.scene.audio.playMusic():o.scene.audio.pauseMusic()},o.handleSoundSetting=function(e){o.scene.player.setSetting("sound",e)},o.scene=t,o.createPopup(),o.createCloseButton(),o.createPopupContent(),o.createInput(),o.setDepth(Da.Ks.POPUP),o.background.setAlpha(.6),o}(0,o.Z)(t,e);var n=t.prototype;return n.createInput=function(){this.continueButton.onClick=this.handleClosePopup,this.homeButton.onClick=this.handleGotoDashboard,this.settingMusic.onClick=this.handleMusicSetting,this.settingSound.onClick=this.handleSoundSetting},n.isChallengeMode=function(e){return e===ua},n.createCloseButton=function(){var e=new ar.Z(this.scene,{key:Xp,frame:qp.BUTTON_CLOSE,width:48.5,height:43,paddingZone:20});this.popup.add(e),e.setName("Close"),e.useSound=!1,e.onClick=this.handleClosePopup,Phaser.Display.Align.In.TopRight(e,this.popup,25,25)},n.createPopup=function(){this.popup=new Gc(this.scene,0,0,310,340),this.add(this.popup),Phaser.Display.Align.In.Center(this.popup,this.zone)},n.createPopupContent=function(){this.createTitle(),this.createMenuButtons(),this.createLine(),this.createFooterButtons(),this.popup.add([this.line,this.title,this.continueButton,this.homeButton]),this.contents=this.scene.make.group({}),this.contents.addMultiple([this.continueButton,this.homeButton])},n.createTitle=function(){this.title=this.scene.add.container();var e=this.scene.make.image({key:Xp,frame:qp.RIBBON_VIOLET});e.setWorldSize(225,65.5);var t=this.scene.make.bitmapText({font:$a.Z.PRIMARY.KEY,size:this.scene.fontSize(24),text:this.scene.lang.Text.SETTINGS,origin:{x:.5,y:.5}});Phaser.Display.Align.In.Center(t,e,0,-2),this.title.add([e,t]),Phaser.Display.Align.In.TopCenter(this.title,this.popup)},n.createMenuButtons=function(){this.createContinueButton(),this.createHomeButton()},n.createContinueButton=function(){this.continueButton=new Va.Z(this.scene,Xp,qp.BUTTON_GREEN,134,68);var e=this.scene.lang.getCurrentLanguage(),t=this.scene.make.bitmapText({font:$a.Z.PRIMARY.KEY,size:this.scene.fontSize("ru"===e?13:18),text:this.scene.lang.Text.CONTINUE}),n=this.scene.make.image({key:Xp,frame:qp.ICON_CONTINUE});n.setWorldSize(21,25),this.continueButton.setName("Continue"),this.continueButton.add([t,n]);var i=n.width+4+t.width+4;Phaser.Display.Align.In.Center(n,this.continueButton,(-i+n.width)/2,-3),Phaser.Display.Align.To.RightCenter(t,n,4,1),Phaser.Display.Align.In.Center(this.continueButton,this.popup,0,-90)},n.createHomeButton=function(){this.homeButton=new Va.Z(this.scene,Xp,qp.BUTTON_YELLOW,134,68);var e=this.scene.make.bitmapText({font:$a.Z.PRIMARY.KEY,size:this.scene.fontSize(20),text:this.scene.lang.Text.HOME}),t=this.scene.make.image({key:Xp,frame:qp.ICON_HOME});t.setWorldSize(31,26),this.homeButton.setName("Home"),this.homeButton.add([e,t]);var n=t.width+4+e.width+4;Phaser.Display.Align.In.Center(t,this.homeButton,(-n+t.width)/2,-2),Phaser.Display.Align.To.RightCenter(e,t,4,2),Phaser.Display.Align.To.BottomCenter(this.homeButton,this.continueButton,0,-2)},n.createLine=function(){this.line=this.scene.make.image({key:Xp,frame:qp.LINE_HOR}),this.line.setWorldSize(198.5,3),Phaser.Display.Align.In.Center(this.line,this.homeButton,0,50)},n.createFooterButtons=function(){var e=this.scene.player.getPlayerSettings(),t=e.sound,n=e.music;this.createMusicButton(n),this.createSoundButton(t)},n.createMusicButton=function(e){var t=this.scene.make.container({});this.settingMusic=new Au(this.scene,{enable:e,frameOn:qp.SWITCH_ON,frameOff:qp.SWITCH_OFF,framePanel:qp.SWITCH_PANEL}),this.settingMusic.setName("Music"),this.settingMusic.setPosition(60,0),this.settingMusic.icon.setWorldSize(25.5,24),this.settingMusic.button.setWorldSize(67.5,26);var n=this.scene.make.image({key:Xp,frame:qp.ICON_MUSIC});n.setPosition(-85,0),n.setWorldSize(34,37.5);var i=this.scene.lang.getCurrentLanguage(),a=this.scene.make.bitmapText({font:$a.Z.PRIMARY.KEY,size:this.scene.fontSize("ru"===i?15:20),text:this.scene.lang.Text.MUSIC,alpha:.8});a.setPosition(-50,-8),t.add([n,a,this.settingMusic]),this.popup.add(t),t.setPosition(0,65)},n.createSoundButton=function(e){var t=this.scene.make.container({});this.settingSound=new Au(this.scene,{enable:e,frameOn:qp.SWITCH_ON,frameOff:qp.SWITCH_OFF,framePanel:qp.SWITCH_PANEL}),this.settingSound.setName("Sound"),this.settingSound.setPosition(60,0),this.settingSound.icon.setWorldSize(25.5,24),this.settingSound.button.setWorldSize(67.5,26);var n=this.scene.make.image({key:Xp,frame:qp.ICON_SOUND});n.setPosition(-85,0),n.setWorldSize(30.5,37.5);var i=this.scene.lang.getCurrentLanguage(),a=this.scene.make.bitmapText({font:$a.Z.PRIMARY.KEY,size:this.scene.fontSize("ru"===i?15:20),text:this.scene.lang.Text.SOUND,alpha:.8});a.setPosition(-50,-8),t.add([n,a,this.settingSound]),this.popup.add(t),t.setPosition(0,125)},n.runOpenAnimation=function(){this.scene.audio.playSound(er.Z.POPUP_SHOW),this.runPopupEntrancesAnimation(0,300),this.runPopupContentEntrancesAnimation(200,300)},n.runCloseAnimation=function(){this.runPopupExitsAnimation(0,200)},n.runPopupEntrancesAnimation=function(e,t){if(!this.popupShowUpAnimation){var n=this.popup,i=n.y,a=n.scale;this.popupShowUpAnimation=new Cl({targets:[this.popup],delay:e,duration:t,props:{y:{from:350,to:i},alpha:{start:1,from:1,to:1},scale:{start:0,from:0,to:a}}})}this.popupShowUpAnimation.play()},n.runPopupContentEntrancesAnimation=function(e,t){this.contentShowUpAnimation||(this.contentShowUpAnimation=new za.Z({targets:this.contents.getChildren(),duration:t,delay:this.scene.tweens.stagger(80,{start:e}),props:{alpha:{start:0,from:0,to:1}}})),this.contentShowUpAnimation.play()},n.runPopupExitsAnimation=function(e,t){var n,i=this;this.popupFadeOutAnimation||(this.popupFadeOutAnimation=new Ha.Z({targets:[this.popup],delay:e,duration:t,props:{y:250,scale:0},onComplete:function(){i.popup.setY(0);var e=i.scene.game.globalScene;e instanceof rr.Z&&e.requestBackgroundMaskUpdate(Da.o4.PAUSE_SCREEN,0)}})),null==(n=this.popupFadeOutAnimation)||n.play()},t}(GameCore.Screen),Qp=Jp,$p={targets:[],duration:600,ease:Phaser.Math.Easing.Back.Out,props:{}},ef=function(e){function t(t){return e.call(this,$p,t)||this}return(0,o.Z)(t,e),t}(La.Z),tf=Ka.Z.DEFAULT,nf=tf.KEY,af=tf.FRAME,rf=function(e){function t(t,n,i,a){var r;return(r=e.call(this,t,n,i,a)||this).coinsText=void 0,r.contentHolder=void 0,r.popupShowUpAnimation=void 0,r.popupFadeOutAnimation=void 0,r.open=function(t){e.prototype.open.call((0,Na.Z)(r)),r.updateInteractive(t.isWatchAdsButtonClicked),r.updateCoinsNumber(t),r.runOpenAnimation()},r.handleClose=function(){r.runCloseAnimation()},r.createTexts(),r.setDepth(Da.Ks.PRIORITY),r.setY(-50),r.updateBackground(),r.setInteractiveZone(),r}(0,o.Z)(t,e);var n=t.prototype;return n.setInteractiveZone=function(){this.zone.setInteractive({useHandCursor:!0}),this.zone.on(Phaser.Input.Events.GAMEOBJECT_POINTER_DOWN,this.handleClose)},n.updateBackground=function(){this.background.setAlpha(.7)},n.createTexts=function(){this.contentHolder=new Phaser.GameObjects.Container(this.scene,0,0);var e=this.scene.make.bitmapText({size:this.scene.fontSize(26),text:"you don't have \n enough coins",font:$a.Z.PRIMARY.KEY,origin:{x:.5,y:.5}}),t=this.scene.make.bitmapText({size:this.scene.fontSize(26),text:"you have:",font:$a.Z.PRIMARY.KEY,origin:{x:.5,y:.5}});t.setTint(13467442);var n=this.scene.make.image({key:nf,frame:af.ICON_COIN});n.setWorldSize(26,26),this.coinsText=this.scene.make.bitmapText({size:this.scene.fontSize(26),text:"0",font:$a.Z.PRIMARY.KEY,origin:{x:0,y:.5}}),this.coinsText.setTint(16766720),this.contentHolder.add([t,n,this.coinsText,e]),this.add(this.contentHolder),Phaser.Display.Align.In.Center(t,this.zone,-40,40),Phaser.Display.Align.In.Center(n,t,77),Phaser.Display.Align.In.Center(this.coinsText,n,20),Phaser.Display.Align.In.Center(e,this,0,-40)},n.runCloseAnimation=function(){var e;null!=(e=this.popupFadeOutAnimation)&&null!=(e=e.tween)&&e.isPlaying()||(this.scene.audio.playSound(er.Z.POPUP_OFF,{volume:.6}),this.runPopupExitsAnimation(0,200))},n.runOpenAnimation=function(){var e;null!=(e=this.popupShowUpAnimation)&&null!=(e=e.tween)&&e.isPlaying()||(this.scene.audio.playSound(er.Z.POPUP_SHOW),this.runPopupEntrancesAnimation(0,400))},n.updateInteractive=function(e){var t=this;this.zone.disableInteractive(),e||this.scene.time.delayedCall(500,(function(){t.zone.setInteractive()}))},n.updateCoinsNumber=function(e){var t=e.coins;"number"===typeof t&&null!==t?this.coinsText.setText(""+t):this.coinsText.setText("0")},n.runPopupEntrancesAnimation=function(e,t){if(!this.popupShowUpAnimation){var n=this.scale;this.popupShowUpAnimation=new Cl({targets:[this.contentHolder],delay:e,duration:t,props:{y:{from:350,to:this.contentHolder.y},scale:{start:0,from:0,to:n}}})}this.popupShowUpAnimation.play()},n.runPopupExitsAnimation=function(e,t){var n=this;this.popupFadeOutAnimation||(this.popupFadeOutAnimation=new Ha.Z({targets:[this.contentHolder],delay:e,duration:t,props:{y:250,scale:0},onComplete:function(){n.scene.screen.close(n.name)}})),this.popupFadeOutAnimation.play()},t}(GameCore.Screen),sf=rf,of=n(432),cf=GameCore.Configs.Gameplay,lf=function(e){function t(t){var n;return(n=e.call(this,t)||this).rescueTimeBar=void 0,n.rescueTimeBarBg=void 0,n.timerLabel=void 0,n.countdownCount=void 0,n.countdownTimer=void 0,n.countdownCount=cf.RescueGamePopupTimeout,n.createTimer(),n.createTimerLabel(),n}(0,o.Z)(t,e);var n=t.prototype;return n.createTimer=function(){this.rescueTimeBar=this.scene.add.graphics(),this.rescueTimeBarBg=this.scene.add.graphics(),this.add(this.rescueTimeBarBg),this.add(this.rescueTimeBar),this.rescueTimeBar.lineStyle(8,124248),this.rescueTimeBarBg.lineStyle(8,0),this.rescueTimeBarBg.arc(0,0,65,0,2*Math.PI,!0),this.rescueTimeBarBg.strokePath()},n.createTimerLabel=function(){this.timerLabel=this.scene.make.bitmapText({size:this.scene.fontSize(23),text:this.scene.lang.Text.SECOND_CHANCE,font:$a.Z.PRIMARY.KEY}),this.timerLabel.setCenterAlign(),this.add(this.timerLabel),Phaser.Display.Align.In.Center(this.timerLabel,this)},n.pauseTimer=function(){var e;null==(e=this.countdownTimer)||e.pause()},n.resumeTimer=function(){var e;null==(e=this.countdownTimer)||e.resume()},n.stopTimer=function(){var e;null==(e=this.countdownTimer)||e.remove()},n.runCountdown=function(e){var t,n=this;null==(t=this.countdownTimer)||t.remove(),this.rescueTimeBar.beginPath(),this.countdownTimer=this.scene.tweens.addCounter({from:0,to:this.countdownCount,duration:1e3*this.countdownCount,onUpdate:function(e){if(n.rescueTimeBar.clear(),n.rescueTimeBar.lineStyle(8,124248),1!==e.progress){var t=2*e.progress*Math.PI-Math.PI/2;n.rescueTimeBar.arc(0,0,65,-Math.PI/2,t,!0),n.rescueTimeBar.strokePath()}},onComplete:function(){n.rescueTimeBar.clear(),n.rescueTimeBar.kill(),e()}})},n.revive=function(){e.prototype.revive.call(this),this.rescueTimeBar.revive(),this.rescueTimeBarBg.revive(),this.timerLabel.revive()},n.kill=function(){e.prototype.kill.call(this),this.rescueTimeBar.kill(),this.rescueTimeBarBg.kill(),this.timerLabel.kill()},t}(Phaser.GameObjects.Container),uf=lf,hf=Ka.Z.DEFAULT,df=hf.KEY,pf=hf.FRAME,ff=GameCore.Configs,gf=ff.Network,mf=(ff.Gameplay,function(e){function t(t,n,i,a){var r;return(r=e.call(this,t,n,i,a)||this).scene=void 0,r.isSuccessfulRescue=void 0,r.isFailedRescue=!1,r.isClosed=!0,r.adsTimer=void 0,r.currentScoreText=void 0,r.currentScoreLabel=void 0,r.rescueTimeBar=void 0,r.rescueTimeBarBg=void 0,r.rescueTimer=void 0,r.countdownCount=void 0,r.countdownTimer=void 0,r.skipButton=void 0,r.watchAdsButton=void 0,r.useCoinButton=void 0,r.coinsNeeded=void 0,r.isWatchAdsButtonClicked=!1,r.isUseCoinButtonClicked=!1,r.buttonsPulsateAnimation=void 0,r.buttonFadeOutAnimation=void 0,r.buttonSlideToAnimation=void 0,r.skipButtonFadeInAnimation=void 0,r.scaleUpAnimation=void 0,r.notifyScreen=void 0,r.notEnoughCoinScreen=void 0,r.open=function(){e.prototype.open.call((0,Na.Z)(r));var t=r.scene.game.globalScene;t instanceof rr.Z&&t.requestBackgroundMaskUpdate(Da.o4.RESCUE_SCREEN,.8),r.scene.storage.dispatch((function(e,t){e({type:kn,payload:{}});var n=t(),i=Ms(n).level,a=void 0===i?0:i,r=os(n);window.game.analytics.event(Ht._.MATCH_RESCUE,{game_mode:GameCore.Utils.String.toUpperCamelCase(r),level:a,level_name:"level_"+a})})),r.getNotifyScreen(),r.isClosed=!1,r.isSuccessfulRescue=!1,r.isFailedRescue=!1,r.rescueTimer.revive(),r.updateButtonsState(),r.updateScoreTexts(),r.runCountdown(),r.runButtonsPulsateAnimation(),r.runSkipButtonFadeInAnimation(),r.scene.audio.playSound(er.Z.POPUP_SHOW)},r.handleShowRewardedAd=(0,s.Z)(h().mark((function e(){var t;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!r.isWatchAdsButtonClicked&&!r.isFailedRescue){e.next=2;break}return e.abrupt("return");case 2:return r.isWatchAdsButtonClicked=!0,r.watchAdsButton.setDisabled(!0),r.useCoinButton.setDisabled(!0),t=r.scene.game.globalScene,e.prev=6,r.rescueTimer.pauseTimer(),window.ignoreResumeMusicOnFocus=!0,r.scene.audio.pauseMusic(),r.scene.audio.stopAllSounds(),r.scene.audio.muteAll(),t.screen.open(Da.o4.NOTIFY_SCREEN,{message:r.scene.lang.Text.LOADING_ADS,duration:0,loading:!0}),e.next=15,new(l())((function(e,t){var n;null==(n=r.adsTimer)||n.remove(),r.adsTimer=r.scene.time.delayedCall(gf.Timeout,t),r.scene.ads.getAdStatus(GameCore.Ads.Types.REWARDED)===GameCore.Ads.Status.LOADING?r.scene.ads.events.once(GameCore.Ads.Events.LOADED,e):r.scene.ads.preloadRewardedVideoAsync().then(e).catch(t)}));case 15:return e.next=17,r.scene.ads.showRewardedVideoAsync();case 17:t.screen.close(Da.o4.NOTIFY_SCREEN),r.handleSuccessfulRescue(),e.next=28;break;case 21:if(e.prev=21,e.t0=e.catch(6),!(e.t0 instanceof Object&&GameCore.Utils.Object.hasOwn(e.t0,"code"))){e.next=27;break}if("USER_INPUT"!==e.t0.code){e.next=27;break}return r.showNotifySkipAd(),e.abrupt("return");case 27:r.showNotifyNoAd();case 28:return e.prev=28,window.ignoreResumeMusicOnFocus=!1,r.scene.ads.preloadRewardedVideoAsync().catch((function(){})),r.adsTimer.destroy(),r.scene.audio.unmuteAll(),r.scene.audio.playMusic(),e.finish(28);case 35:case"end":return e.stop()}}),e,null,[[6,21,28,35]])}))),r.showNotifyNoAd=function(e){e&&e.name!==Da.o4.NOTIFY_SCREEN||(r.scene.game.globalScene.screen.open(Da.o4.NOTIFY_SCREEN,{message:r.scene.lang.Text.NO_ADS,duration:2e3,loading:!1}),r.handleFailedAd())},r.handleFailedAd=function(){var e=window.game.player.getCustomData("coin");r.isUseCoinButtonClicked||e<r.coinsNeeded?(r.notifyScreen.once(GameCore.Screens.Events.CLOSE,r.handleFailedRescue),r.isClosed=!0,r.scene.screen.close(r.name)):r.notifyScreen.once(GameCore.Screens.Events.CLOSE,(function(){var e;r.rescueTimer.resumeTimer(),r.runButtonEntranceAnimation(r.watchAdsButton,r.useCoinButton,!0),null==(e=r.scaleUpAnimation)||null==(e=e.tween)||e.on(Phaser.Tweens.Events.TWEEN_COMPLETE,(function(){r.useCoinButton.setDisabled(!1)}))}))},r.showNotifyInsufficientCoins=function(e){r.rescueTimer.pauseTimer(),r.isWatchAdsButtonClicked?(r.notEnoughCoinScreen.once(GameCore.Screens.Events.CLOSE,r.handleFailedRescue),r.scene.screen.open(Da.o4.NOT_ENOUGH_COINS_SCREEN,{coins:e,isWatchAdsButtonClicked:r.isWatchAdsButtonClicked}),r.scene.time.delayedCall(2e3,(function(){r.scene.screen.close(Da.o4.NOT_ENOUGH_COINS_SCREEN)})),r.isClosed=!0,r.scene.screen.close(r.name)):(r.notEnoughCoinScreen.once(GameCore.Screens.Events.CLOSE,r.handleCloseNotifyInsufficientCoins),r.scene.screen.open(Da.o4.NOT_ENOUGH_COINS_SCREEN,{coins:e,isWatchAdsButtonClicked:r.isWatchAdsButtonClicked}))},r.handleCloseNotifyInsufficientCoins=function(){var e;r.rescueTimer.resumeTimer(),r.runButtonEntranceAnimation(r.useCoinButton,r.watchAdsButton,!1),null==(e=r.scaleUpAnimation)||null==(e=e.tween)||e.on(Phaser.Tweens.Events.TWEEN_COMPLETE,(function(){r.watchAdsButton.setDisabled(!1)}))},r.showNotifySkipAd=function(){r.scene.game.globalScene.screen.open(Da.o4.NOTIFY_SCREEN,{message:r.scene.lang.Text.SORRY_NO_REWARDS,duration:2e3,loading:!1}),r.handleFailedAd()},r.handleFailedRescue=function(){if(!r.isFailedRescue){r.isFailedRescue=!0,r.skipButton.kill(),r.rescueTimer.stopTimer(),r.isClosed||(r.isClosed=!0,r.scene.screen.close(r.name));var e=r.scene.game.globalScene;e instanceof rr.Z&&e.requestBackgroundMaskUpdate(Da.o4.RESCUE_SCREEN,0),r.scene.stateManager.gameOver()}},r.handleSuccessfulRescue=function(){if(!r.isSuccessfulRescue){r.rescueTimer.stopTimer(),r.isSuccessfulRescue=!0,r.scene.audio.playSound(er.Z.DAILY_REWARD),r.scene.screen.close(r.name);var e=r.scene.game.globalScene;e instanceof rr.Z&&e.requestBackgroundMaskUpdate(Da.o4.RESCUE_SCREEN,0),r.scene.stateManager.play()}},r.handleRescueUsingCoin=function(){if(!r.isUseCoinButtonClicked&&!r.isFailedRescue){r.isUseCoinButtonClicked=!0,r.useCoinButton.setDisabled(!0),r.watchAdsButton.setDisabled(!0);var e=r.scene.player,t=e.getCustomData("coin"),n=t-r.coinsNeeded;t<r.coinsNeeded?r.showNotifyInsufficientCoins(t):(r.rescueTimer.stopTimer(),r.scene.time.delayedCall(500,(function(){e.setCustomData("coin",n),r.handleSuccessfulRescue()})))}},r.runButtonEntranceAnimation=function(e,t,n){var i,a,s,o,c;null==(i=r.scaleUpAnimation)||i.remove(),null==(a=r.buttonFadeOutAnimation)||a.remove(),null==(s=r.buttonSlideToAnimation)||s.remove(),r.scaleUpAnimation=new iu.Z({targets:[t],onComplete:function(){n?r.scene.game.globalScene.screen.events.off(GameCore.Screens.Events.CLOSE,r.runButtonEntranceAnimation):r.scene.screen.events.off(GameCore.Screens.Events.CLOSE,r.runButtonEntranceAnimation)}}),r.buttonFadeOutAnimation=new Ha.Z({targets:[e],props:{alpha:{start:1,from:1,to:0}},onComplete:function(){return e.kill()}}),r.buttonSlideToAnimation=new ef({targets:[t],props:{x:{from:t.x,to:r.zone.x}},onComplete:function(){var e;return null==(e=r.scaleUpAnimation)?void 0:e.play()}}),null==(o=r.buttonFadeOutAnimation)||o.play(),null==(c=r.buttonSlideToAnimation)||c.play()},r.scene=t,r.coinsNeeded=r.scene.registry.get("rescueCoins"),r.setDepth(Da.Ks.POPUP),r.background.setAlpha(.8),r.createContent(),r}(0,o.Z)(t,e);var n=t.prototype;return n.getNotifyScreen=function(){var e=this.scene.game.globalScene;if(!this.notifyScreen){var t=e.screen.get(Da.o4.NOTIFY_SCREEN);t instanceof of.Z&&(this.notifyScreen=t)}},n.updateButtonsState=function(){this.watchAdsButton.revive(),this.watchAdsButton.setAlpha(1),this.watchAdsButton.setDisabled(!1),this.isWatchAdsButtonClicked=!1,this.scene.player.getCustomData("coin")>=this.coinsNeeded?(this.useCoinButton.revive(),this.useCoinButton.setAlpha(1),this.useCoinButton.setDisabled(!1),this.isUseCoinButtonClicked=!1,Phaser.Display.Align.In.LeftCenter(this.watchAdsButton,this.zone,-45,120),Phaser.Display.Align.In.RightCenter(this.useCoinButton,this.zone,-45,120)):(this.useCoinButton.kill(),Phaser.Display.Align.In.Center(this.watchAdsButton,this.zone,0,120)),Phaser.Display.Align.In.BottomCenter(this.skipButton,this.zone,0,-100)},n.createContent=function(){this.createCloseButton(),this.createScoreTexts(),this.createCountdown(),this.createWatchAdsButton(),this.createUseCoinButton(),this.createNotEnoughCoinsScreen(),this.createSkipButton()},n.createRescueTimeBar=function(){this.rescueTimer=new uf(this.scene),this.add(this.rescueTimer),Phaser.Display.Align.In.BottomCenter(this.rescueTimer,this.currentScoreText,0,80)},n.createCountdown=function(){this.createRescueTimeBar()},n.runCountdown=function(){var e=this;this.rescueTimer.runCountdown((function(){e.rescueTimeout()}))},n.createCloseButton=function(){var e=new ar.Z(this.scene,{key:df,frame:pf.BUTTON_CLOSE,width:48.5,height:43,paddingZone:20});this.add(e),e.setName("Close"),e.useSound=!1,e.onClick=this.handleFailedRescue,e.kill(),Phaser.Display.Align.In.TopRight(e,this.zone,-15,-15)},n.createNotEnoughCoinsScreen=function(){this.notEnoughCoinScreen=this.scene.screen.add(Da.o4.NOT_ENOUGH_COINS_SCREEN,sf)},n.createUseCoinButton=function(){this.useCoinButton=new Va.Z(this.scene,df,pf.BUTTON_BLUE,126,65),this.useCoinButton.setName("UseCoin");var e=this.scene.make.image({key:df,frame:pf.ICON_COIN});e.setWorldSize(30,30);var t=this.scene.make.bitmapText({size:this.scene.fontSize(21),text:""+this.coinsNeeded,font:$a.Z.PRIMARY.KEY,origin:{x:.5,y:.5}});this.add(this.useCoinButton),this.useCoinButton.add([t,e]),Phaser.Display.Align.In.Center(t,this.useCoinButton,15,-2),Phaser.Display.Align.In.Center(e,this.useCoinButton,-28,-3),this.useCoinButton.onClick=this.handleRescueUsingCoin},n.createWatchAdsButton=function(){this.watchAdsButton=new Va.Z(this.scene,df,pf.BUTTON_GREEN,145,75),this.watchAdsButton.setName("ViewAd");var e=this.scene.lang.getCurrentLanguage(),t=this.scene.make.bitmapText({size:this.scene.fontSize("ru"===e?12:15),text:this.scene.lang.Text.CONTINUE,font:$a.Z.PRIMARY.KEY,origin:{x:.5,y:.5}});t.setCenterAlign();var n=this.scene.make.image({key:df,frame:pf.ICON_ADS_VIDEO});n.setWorldSize(36,28),this.watchAdsButton.add([t,n]),this.add(this.watchAdsButton),Phaser.Display.Align.In.Center(t,this.watchAdsButton,19,-2),Phaser.Display.Align.In.Center(n,this.watchAdsButton,-38,-1),this.watchAdsButton.onClick=this.handleShowRewardedAd},n.createSkipButton=function(){var e=this.scene.lang.getCurrentLanguage(),t="ru"===e?130.5:97.5,n="ru"===e?20.5:21.5;this.skipButton=new Va.Z(this.scene,df,this.scene.lang.Texture.NO_THANKS,t,n),this.skipButton.setName("NoThanks"),this.skipButton.kill(),this.add(this.skipButton),this.skipButton.onClick=this.handleFailedRescue,Phaser.Display.Align.In.Center(this.skipButton,this.useCoinButton,-80,70)},n.createScoreTexts=function(){this.currentScoreLabel=this.scene.make.bitmapText({size:this.scene.fontSize(30),text:this.scene.lang.Text.YOUR_SCORE,font:$a.Z.PRIMARY.KEY}),this.currentScoreText=this.scene.make.bitmapText({size:this.scene.fontSize(48),text:"0",font:$a.Z.PRIMARY.KEY,origin:{x:.55,y:.5}}),this.currentScoreText.setTint(16766720),this.add([this.currentScoreLabel,this.currentScoreText]),Phaser.Display.Align.In.TopCenter(this.currentScoreLabel,this,-4,-130),Phaser.Display.Align.In.TopCenter(this.currentScoreText,this.zone,-5,-165)},n.updateScoreTexts=function(){var e=window.game,t=e.storage,n=e.player,i=t.getState(),a=ga(i);a===pa?this.updateOnlineModeScoreText(n,i):a===ua?this.updateChallengeFriendModeScoreText(n,i):this.updateSingleModeScoreTexts(n,i)},n.updateSingleModeScoreTexts=function(e,t){this.currentScoreLabel.setText(this.scene.lang.Text.YOUR_SCORE);var n=Ms(t).score;this.currentScoreText.setText(""+n),Phaser.Display.Align.In.TopCenter(this.currentScoreText,this.zone,-5,-165)},n.updateOnlineModeScoreText=function(e,t){var n=Ls(t);this.currentScoreLabel.setText(this.scene.lang.Text.YOUR_RANK);var i=e.getPlayerId();if(GameCore.Utils.Object.hasOwn(n,i)){var a=n[i].rank;this.currentScoreText.setText(""+a),Phaser.Display.Align.In.TopCenter(this.currentScoreText,this.zone,0,-165)}},n.updateChallengeFriendModeScoreText=function(e,t){this.currentScoreLabel.setText(this.scene.lang.Text.YOUR_SCORE);var n=Ms(t).score;this.currentScoreText.setText(""+n),Phaser.Display.Align.In.TopCenter(this.currentScoreText,this.zone,-5,-165)},n.rescueTimeout=function(){this.watchAdsButton.setDisabled(!0),this.useCoinButton.setDisabled(!0),this.handleFailedRescue()},n.runButtonsPulsateAnimation=function(){var e;this.buttonsPulsateAnimation||(this.buttonsPulsateAnimation=new Fa({targets:[this.watchAdsButton,this.useCoinButton],props:{scale:"-=0.02"}})),null==(e=this.buttonsPulsateAnimation)||e.play()},n.runSkipButtonFadeInAnimation=function(){var e;this.skipButtonFadeInAnimation||(this.skipButtonFadeInAnimation=new Ya.Z({targets:[this.skipButton],delay:2e3,props:{alpha:{start:0,from:0,to:1}}})),this.skipButton.revive(),null==(e=this.skipButtonFadeInAnimation)||e.play()},n.getTotalUseRescue=function(){return+this.isSuccessfulRescue},t}(GameCore.Screen)),vf=mf,yf=Ka.Z.GAMEPLAY.GAMEPLAY_TEXTURES,Ef=yf.KEY,Af=yf.FRAME,Sf=function(e){function t(t){var n={frameRate:12,repeat:1,frames:t.generateFrameNames(Ef,{prefix:Af.DINO,start:0,end:1})};return e.call(this,t,Ef,n)||this}return(0,o.Z)(t,e),t}(Phaser.Animations.Animation),bf=Sf,Tf=Ka.Z.GAMEPLAY.GAMEPLAY_TEXTURES,wf=Tf.KEY,Cf=Tf.FRAME,If=function(e){function t(t){var n={frameRate:6,frames:t.generateFrameNames(wf,{prefix:Cf.DINO,start:1,end:3}),repeat:1};return e.call(this,t,wf,n)||this}return(0,o.Z)(t,e),t}(Phaser.Animations.Animation),Pf=If,xf=Ka.Z.GAMEPLAY.GAMEPLAY_TEXTURES,kf=xf.KEY,Of=xf.FRAME,Rf=function(e){function t(t){var n={frameRate:12,frames:t.generateFrameNames(kf,{prefix:Of.EGG_EXPLOSIVE,end:8,zeroPad:2}),showOnStart:!0,hideOnComplete:!0};return e.call(this,t,kf,n)||this}return(0,o.Z)(t,e),t}(Phaser.Animations.Animation),Bf=Rf,_f=Ka.Z.GAMEPLAY.GAMEPLAY_TEXTURES,Df=_f.KEY,Nf=_f.FRAME,Lf=function(e){function t(t){var n={repeat:1,frameRate:8,frames:[{key:Df,frame:Nf.OWL_CLOSE},{key:Df,frame:Nf.OWL}]};return e.call(this,t,Df,n)||this}return(0,o.Z)(t,e),t}(Phaser.Animations.Animation),Mf=Lf,Gf=Ka.Z.GAMEPLAY.GAMEPLAY_TEXTURES,Ff=Gf.KEY,Zf=Gf.FRAME,Uf=function(e){function t(t){var n={frameRate:6,frames:t.generateFrameNames(Ff,{prefix:Zf.SHOWING_BOMB,start:1,end:4}),showOnStart:!0,hideOnComplete:!0};return e.call(this,t,Ff,n)||this}return(0,o.Z)(t,e),t}(Phaser.Animations.Animation),Yf=Uf,Hf=function(){function e(e){this.scene=void 0,this.scene=e,this.addGlobalAnims()}return e.prototype.addGlobalAnims=function(){var e=this.scene.anims,t=new Bf(e);e.add("egg-explosive",t);var n=new bf(e);e.add("dino-blinking",n);var i=new Pf(e);e.add("dino-happy",i);var a=new Mf(e);e.add("owl-blinking",a);var r=new Yf(e);e.add("showing-bomb-effect",r)},e}(),zf=Hf,Wf=Ka.Z.DEFAULT,Vf=Wf.KEY,Kf=Wf.FRAME,jf=function(e){function t(t){var n;return(n=e.call(this,t)||this).hand=void 0,n.handScaleDefault=1,n.name="TutorialHand",n.addHand(),n.hand.scale,n.scene.add.existing((0,Na.Z)(n)),n}(0,o.Z)(t,e);var n=t.prototype;return n.addHand=function(){this.hand=this.scene.make.image({key:Vf,frame:Kf.ICON_HAND,origin:{x:.5,y:.5}}),this.hand.setWorldSize(65.5,55.5),this.handScaleDefault=this.hand.scale,this.hand.setPosition(20,20),this.add(this.hand)},n.tap=function(e,t,n){var i=this;this.scene.tweens.add({delay:e,targets:[this.hand],ease:Phaser.Math.Easing.Cubic.Out,props:{scale:{duration:150,from:this.handScaleDefault,to:.8*this.handScaleDefault},angle:{from:0,value:-10,duration:150}},yoyo:!0,onComplete:function(){t&&i.hide(),n&&n()}})},n.doubleTap=function(e,t,n){var i=this;this.scene.tweens.add({delay:e,targets:[this.hand],ease:Phaser.Math.Easing.Cubic.In,props:{scale:{duration:100,from:this.handScaleDefault,to:.8*this.handScaleDefault},angle:{from:0,value:-10,duration:100}},loop:1,yoyo:!0,onComplete:function(){t&&i.hide(),n&&n()}})},n.move=function(e,t,n,i,a){this.scene.tweens.add({delay:n,targets:[this.hand],ease:Phaser.Math.Easing.Cubic.Out,props:{x:{duration:i,from:this.x,to:e},y:{duration:i,from:this.y,to:t}},onComplete:a})},n.tapAndHold=function(e,t){this.scene.tweens.add({delay:e,targets:[this.hand],ease:Phaser.Math.Easing.Cubic.Out,props:{scale:{duration:200,from:this.handScaleDefault,to:.8*this.handScaleDefault},angle:{from:0,value:-10,duration:200}},onComplete:t})},n.unHold=function(e,t,n){var i=this;this.scene.tweens.add({delay:e,targets:[this.hand],ease:Phaser.Math.Easing.Cubic.Out,props:{scale:{duration:200,from:.8*this.handScaleDefault,to:this.handScaleDefault},angle:{from:-10,value:0,duration:200}},onComplete:function(){t&&i.hide(),n&&n()}})},n.show=function(){this.hand.setVisible(!0)},n.hide=function(){this.hand.setVisible(!1)},n.preDestroy=function(){this.scene.tweens.killTweensOf(this.hand)},t}(Phaser.GameObjects.Container),Xf=jf,qf=Ka.Z.GAMEPLAY.GAME_OBJECTS,Jf=qf.KEY,Qf=qf.FRAME,$f=function(e){function t(t,n,i,a){var r;return(r=e.call(this,t,n,i,a)||this).popup=void 0,r.redEggGroup=void 0,r.blueEggGroup=void 0,r.shotGuideGroup=void 0,r.middleShotGuide=void 0,r.lastShotGuide=void 0,r.shooter=void 0,r.bullet=void 0,r.nextBullet=void 0,r.nextNextBullet=void 0,r.tutorialHand=void 0,r.shooterPosition=void 0,r.bulletPosition=void 0,r.nextBulletPosition=void 0,r.shotGuideDirect=void 0,r.guideSpace=void 0,r.understoodButton=void 0,r.tutorialText=void 0,r.popupShowUpAnimation=void 0,r.popupFadeOutAnimation=void 0,r.nextBulletScale=.75,r.open=function(){e.prototype.open.call((0,Na.Z)(r));var t=r.scene.game.globalScene;t instanceof rr.Z&&t.requestBackgroundMaskUpdate(Da.o4.GUIDE_SCREEN,.4),r.runOpenAnimation(),r.animateShotGuideToShootBlueEggs(),r.scene.analytics.event(Ht._.TUTORIAL_STEP,{step:"UseShooter"})},r.closePopup=function(){r.scene.audio.playSound(er.Z.POPUP_OFF,{volume:.6}),r.runCloseAnimation(),r.popupFadeOutAnimation.next((function(){r.scene.screen.close(r.name);var e=r.scene.game.globalScene;e instanceof rr.Z&&e.requestBackgroundMaskUpdate(Da.o4.GUIDE_SCREEN,0)}))},r.animateShotGuideToShootBlueEggs=function(){r.setDefaultObjects();var e=r.shotGuideDirect,t=r.guideSpace,n=290*Math.PI/180,i=261*Math.PI/180;r.tutorialHand.tapAndHold(1300),r.scene.tweens.addCounter({from:n,to:i,duration:300,onStart:function(){r.nextBullet.setAlpha(1),r.bullet.setAlpha(1),r.shotGuideGroup.setAlpha(1)},onUpdate:function(n){var i=r.bulletPosition,a=i.x,s=i.y;e.setAngle(n.getValue()),r.shotGuideGroup.setXY(a,s,e.x*t,e.y*t),r.tutorialHand.setPosition(r.middleShotGuide.x,r.middleShotGuide.y)},onComplete:r.animateHitBlueEggs,delay:1500})},r.animateHitBlueEggs=function(){r.tutorialHand.unHold(200,!0);var e=r.shotGuideDirect,t=r.guideSpace,n=r.bulletPosition,i=n.x,a=n.y;r.setShotGuideTo(-9);var s=i+e.x*(5*t-3),o=a+e.y*(5*t-3);r.scene.tweens.add({targets:r.bullet,x:s,y:o,duration:300,onStart:function(){r.shotGuideGroup.setVisible(!1),r.tutorialHand.hide(),r.animateNextBulletToBullet()},onComplete:function(){var e;r.scene.tweens.add({targets:P()(e=r.blueEggGroup.getChildren()).call(e,r.bullet),alpha:0,duration:300,onComplete:r.showTapTapToSwitchEgg})},delay:500})},r.showTapTapToSwitchEgg=function(){var e=r.bulletPosition,t=e.x,n=e.y;r.bullet.setAlpha(1),r.bullet.setPosition(t,n),r.nextBullet.setFrame(Qf.BALL_RED),r.shotGuideGroup.setVisible(!0),r.tutorialHand.setPosition(r.shooter.x,r.shooter.y),r.tutorialHand.show(),r.tutorialHand.doubleTap(100,!0,r.animateSwapBall)},r.animateSwapBall=function(){var e=r.bullet;r.bullet=r.nextBullet,r.nextBullet=e,r.nextNextBullet.setVisible(!1);var t=r.nextBulletPosition.x-r.shooterPosition.x,n=r.nextBulletPosition.y-r.shooterPosition.y,i=new Phaser.Math.Vector2(t,n),a=r.bulletPosition.x-r.shooterPosition.x,s=r.bulletPosition.y-r.shooterPosition.y,o=new Phaser.Math.Vector2(a,s),c=1/r.scene.world.getPixelRatio(),l=o.length();r.scene.tweens.add({targets:r.nextBullet,scale:c*r.nextBulletScale,duration:300}),r.scene.tweens.addCounter({from:o.angle(),to:i.angle(),duration:300,onUpdate:function(e){var t=e.getValue();r.nextBullet.x=r.shooterPosition.x+Math.cos(t)*l,r.nextBullet.y=r.shooterPosition.y+Math.sin(t)*l}}),r.scene.tweens.add({targets:r.bullet,scale:c,duration:300}),r.scene.tweens.addCounter({from:i.angle()+2*Math.PI,to:o.angle(),duration:300,onUpdate:function(e){var t=e.getValue();r.bullet.x=r.shooterPosition.x+Math.cos(t)*l,r.bullet.y=r.shooterPosition.y+Math.sin(t)*l},onComplete:function(){r.shotGuideGroup.setVisible(!0),r.shotGuideGroup.setTint(Sd.Red),r.scene.time.delayedCall(200,r.animateShotGuideToShootRedEggs)}})},r.animateShotGuideToShootRedEggs=function(){r.shotGuideGroup.setVisible(!0),r.tutorialHand.show(),r.tutorialHand.setPosition(r.middleShotGuide.x,r.middleShotGuide.y);var e=r.shotGuideDirect,t=r.guideSpace,n=261*Math.PI/180,i=284*Math.PI/180;r.tutorialHand.tapAndHold(300),r.scene.tweens.addCounter({from:n,to:i,duration:300,onUpdate:function(n){var i=r.bulletPosition,a=i.x,s=i.y;e.setAngle(n.getValue()),r.shotGuideGroup.setXY(a,s,e.x*t,e.y*t),r.tutorialHand.setPosition(r.middleShotGuide.x,r.middleShotGuide.y)},onComplete:r.animateHitRedEggs,delay:600})},r.animateHitRedEggs=function(){r.tutorialHand.unHold(200,!0);var e=r.shotGuideDirect,t=r.guideSpace,n=r.bulletPosition,i=n.x,a=n.y;r.setShotGuideTo(14);var s=i+e.x*(6*t+6),o=a+e.y*(6*t+6);r.scene.tweens.add({targets:r.bullet,x:s,y:o,duration:300,onStart:function(){r.shotGuideGroup.setVisible(!1),r.animateNextBulletToBullet()},onComplete:function(){var e;r.scene.tweens.add({targets:P()(e=r.redEggGroup.getChildren()).call(e,r.bullet),alpha:0,duration:300,completeDelay:600,onComplete:r.animateShotGuideToShootBlueEggs})},delay:500})},r.createPopup(),r.createPopupContent(),r.createUnderstoodButton(),r.setDepth(Da.Ks.POPUP),r.setY(-50),r.background.setAlpha(.4),r}(0,o.Z)(t,e);var n=t.prototype;return n.createPopup=function(){this.popup=new Gc(this.scene,0,0,300,400),this.add(this.popup),Phaser.Display.Align.In.Center(this.popup,this.zone)},n.createPopupContent=function(){this.createTutorialText(),this.configGuide(),this.createGrid(),this.createShotGuide(),this.createShooter(),this.createBullet(),this.createHandGuide()},n.createTutorialText=function(){var e=this.scene.lang.getCurrentLanguage();this.tutorialText=this.scene.make.bitmapText({font:$a.Z.PRIMARY.KEY,size:this.scene.fontSize("ru"===e?17:20),text:this.scene.lang.Text.COLOR_POP,origin:{x:.5,y:.5}}),this.tutorialText.setCenterAlign(),Phaser.Display.Align.In.TopCenter(this.tutorialText,this.popup,0,-20),this.popup.add(this.tutorialText)},n.configGuide=function(){this.shotGuideDirect=new Phaser.Math.Vector2(0,-1),this.shotGuideDirect.setAngle(290*Math.PI/180),this.guideSpace=21,this.shooterPosition=new Phaser.Geom.Point(0,80),this.bulletPosition=new Phaser.Geom.Point(this.shooterPosition.x,this.shooterPosition.y-32),this.nextBulletPosition=new Phaser.Geom.Point(this.shooterPosition.x+22.5,this.shooterPosition.y+22.5)},n.createGrid=function(){var e=Ka.Z.GAMEPLAY.GAME_OBJECTS,t=e.KEY,n=e.FRAME;this.redEggGroup=this.scene.add.group({defaultKey:t,defaultFrame:n.BALL_RED});for(var i=0;i<4;i++)this.redEggGroup.get().setWorldSize(31,32);this.redEggGroup.setXY(-48,-108,32),this.popup.add(this.redEggGroup.getChildren()),this.blueEggGroup=this.scene.add.group({defaultKey:t,defaultFrame:n.BALL_BLUE});for(var a=0;a<3;a++)this.blueEggGroup.get().setWorldSize(31,32);this.blueEggGroup.setXY(-32,-80,32),this.popup.add(this.blueEggGroup.getChildren())},n.createShotGuide=function(){this.shotGuideGroup=this.scene.add.group({defaultKey:Jf,defaultFrame:Qf.SHOT_GUIDE});for(var e=0;e<6;e++)4===e?(this.middleShotGuide=this.shotGuideGroup.get(),this.middleShotGuide.setWorldSize(10,10)):this.shotGuideGroup.get().setWorldSize(10,10);this.lastShotGuide=this.shotGuideGroup.get(),this.lastShotGuide.setVisible(!1).setWorldSize(10,10),this.shotGuideGroup.setXY(0,84,this.shotGuideDirect.x*this.guideSpace,this.shotGuideDirect.y*this.guideSpace),this.popup.add(this.shotGuideGroup.getChildren())},n.createShooter=function(){var e=this.shooterPosition,t=e.x,n=e.y;this.shooter=this.scene.add.image(t,n,Jf,Qf.SHOOTER),this.shooter.setWorldSize(100,100),this.popup.add(this.shooter)},n.createBullet=function(){var e=this.bulletPosition,t=e.x,n=e.y;this.bullet=this.scene.add.image(t,n,Jf,Qf.BALL_BLUE),this.bullet.setWorldSize(31,32),this.popup.add(this.bullet);var i=this.nextBulletPosition,a=i.x,r=i.y;this.nextBullet=this.scene.add.image(a,r,Jf,Qf.BALL_BLUE),this.nextBullet.setWorldSize(31,32),this.popup.add(this.nextBullet),this.nextNextBullet=this.scene.add.image(a,r,Jf,Qf.BALL_BLUE),this.nextNextBullet.setWorldSize(31,32),this.nextNextBullet.setVisible(!1),this.popup.add(this.nextNextBullet)},n.createHandGuide=function(){this.tutorialHand=new Xf(this.scene),this.add(this.tutorialHand)},n.createUnderstoodButton=function(){var e=Ka.Z.DEFAULT,t=e.KEY,n=e.FRAME;this.understoodButton=new Va.Z(this.scene,t,n.BUTTON_GREEN_SHORT,90,52),this.understoodButton.setName("Ok"),this.understoodButton.onClick=this.closePopup;var i=this.scene.lang.getCurrentLanguage(),a=this.scene.make.bitmapText({font:$a.Z.PRIMARY.KEY,size:this.scene.fontSize("ru"===i?20:24),text:this.scene.lang.Text.OK,origin:{x:.5,y:.5}});Phaser.Display.Align.In.Center(a,this.understoodButton),this.understoodButton.add(a),this.popup.add(this.understoodButton),Phaser.Display.Align.In.BottomCenter(this.understoodButton,this.popup,0,-20)},n.setDefaultObjects=function(){var e=this,t=1/this.scene.world.getPixelRatio(),n=this.bulletPosition,i=n.x,a=n.y,r=this.nextBulletPosition,s=r.x,o=r.y;this.blueEggGroup.setAlpha(1),this.redEggGroup.setAlpha(1),this.bullet.setAlpha(1),this.bullet.setPosition(i,a),this.bullet.setFrame(Qf.BALL_BLUE),this.bullet.setScale(t),this.nextBullet.setFrame(Qf.BALL_BLUE),this.nextBullet.setScale(t*this.nextBulletScale),this.nextNextBullet.setPosition(s,o),this.nextNextBullet.setVisible(!1),this.shotGuideDirect.setAngle(290*Math.PI/180);var c=this.shotGuideDirect,l=c.x,u=c.y;this.shotGuideGroup.setXY(i,a,l*this.guideSpace,u*this.guideSpace),this.shotGuideGroup.setTint(Sd.Blue),this.shotGuideGroup.setVisible(!0),this.lastShotGuide.setVisible(!1),this.tutorialHand.show(),this.tutorialHand.setPosition(this.middleShotGuide.x,this.middleShotGuide.y);var h=[this.redEggGroup.getChildren(),this.blueEggGroup.getChildren(),this.shooter,this.tutorialHand];this.blueEggGroup.setAlpha(0),this.redEggGroup.setAlpha(0),this.shooter.setAlpha(0),this.nextBullet.setAlpha(0),this.bullet.setAlpha(0),this.shotGuideGroup.setAlpha(0),this.tutorialHand.setAlpha(0),h.forEach((function(t,n){e.scene.tweens.add({targets:t,delay:300+200*n,alpha:{from:0,to:1}})}))},n.setShotGuideTo=function(e){this.shotGuideDirect.setAngle((270+e)*Math.PI/180);var t=this.shotGuideDirect,n=t.x,i=t.y,a=this.bulletPosition,r=a.x,s=a.y;this.shotGuideGroup.setXY(r,s,n*this.guideSpace,i*this.guideSpace)},n.animateNextBulletToBullet=function(){var e=this,t=1/this.scene.world.getPixelRatio(),n=this.nextBulletPosition.x-this.shooterPosition.x,i=this.nextBulletPosition.y-this.shooterPosition.y,a=new Phaser.Math.Vector2(n,i),r=this.bulletPosition.x-this.shooterPosition.x,s=this.bulletPosition.y-this.shooterPosition.y,o=new Phaser.Math.Vector2(r,s),c=o.length(),l=this.nextBulletPosition,u=l.x,h=l.y;this.nextNextBullet.setVisible(!0),this.nextNextBullet.setPosition(u,h),this.nextNextBullet.setScale(t*this.nextBulletScale),this.scene.tweens.add({targets:this.nextNextBullet,scale:{from:t*this.nextBulletScale,to:t},duration:300}),this.scene.tweens.addCounter({from:a.angle()+2*Math.PI,to:o.angle(),duration:300,onUpdate:function(t){var n=t.getValue();e.nextNextBullet.x=e.shooterPosition.x+Math.cos(n)*c,e.nextNextBullet.y=e.shooterPosition.y+Math.sin(n)*c}}),this.nextBullet.setFrame(Qf.BALL_RED),this.scene.tweens.add({targets:this.nextBullet,scale:{from:0,to:t*this.nextBulletScale},duration:300})},n.runOpenAnimation=function(){this.scene.audio.playSound(er.Z.POPUP_SHOW),this.runPopupEntrancesAnimation(0,400)},n.runCloseAnimation=function(){this.runPopupExitsAnimation(0,400)},n.runPopupEntrancesAnimation=function(e,t){this.popupShowUpAnimation||(this.popupShowUpAnimation=new Ya.Z({targets:[this.popup],delay:e,duration:t,props:{alpha:{from:0,to:1},scale:{from:0,to:1}}})),this.popupShowUpAnimation.play()},n.runPopupExitsAnimation=function(e,t){var n;this.popupFadeOutAnimation||(this.popupFadeOutAnimation=new Ha.Z({targets:[this.popup],delay:e,duration:t,props:{alpha:0,scale:0}})),null==(n=this.popupFadeOutAnimation)||n.play()},t}(GameCore.Screen),eg=$f,tg=Ka.Z.GAMEPLAY.GAMEPLAY_TEXTURES,ng=tg.KEY,ig=tg.FRAME,ag=function(e){function t(t,n,i){var a;return(a=e.call(this,t,n,i,ng,ig.HAND)||this).tween=void 0,a.x-=50,a.setWorldSize(65.5,55.5),t.add.existing((0,Na.Z)(a)),a}(0,o.Z)(t,e);var n=t.prototype;return n.show=function(){this.setVisible(!0),this.tween=this.scene.tweens.add({targets:this,x:{from:this.x,to:this.x+100},duration:750,yoyo:!0,loop:-1,ease:Phaser.Math.Easing.Sine})},n.hide=function(){this.tween.complete(),this.setVisible(!1)},t}(Phaser.GameObjects.Image),rg=ag,sg=function(e){return e[e.Carrying=0]="Carrying",e[e.Escaping=1]="Escaping",e[e.Dead=2]="Dead",e}(sg||{}),og=sg,cg=Ka.Z.GAMEPLAY.GAMEPLAY_TEXTURES,lg=cg.KEY,ug=cg.FRAME,hg=function(e){function t(t){var n={frameRate:10,frames:t.generateFrameNames(lg,{prefix:ug.DINO_FLY,start:1,end:8})};return e.call(this,t,lg,n)||this}return(0,o.Z)(t,e),t}(Phaser.Animations.Animation),dg=function(e){function t(t){var n={frameRate:10,frames:t.generateFrameNames(lg,{prefix:ug.DINO_LEG,start:1,end:8})};return e.call(this,t,lg,n)||this}return(0,o.Z)(t,e),t}(Phaser.Animations.Animation),pg=function(e){function t(t,n,i){var a;return(a=e.call(this,t,n,i)||this).scene=void 0,a.egg=void 0,a.dino=void 0,a.leg=void 0,a.flyingDinoSpeed=void 0,a.mainBody=void 0,a.flyTween=void 0,a.fly=function(){a.state=og.Escaping,a.egg.setVisible(!1),a.mainBody.setVelocity(0),a.disableBody();var e=a.y/a.scene.gameZone.height*1200;a.scene.tweens.add({targets:(0,Na.Z)(a),y:-10,duration:e,onComplete:function(){a.flyTween.complete(),a.kill()}})},a.scene=t,a.flyingDinoSpeed=t.registry.get("flyingDinoSpeed"),a.createFlyingDino(),a.createFlyingDinoBodies(),a.createFlyAnimation(),a}(0,o.Z)(t,e);var n=t.prototype;return n.getPhysicsObjects=function(){return[this.dino,this.egg]},n.createFlyingDino=function(){var e=this.scene.data.get("ball"),t=e.width,n=e.height,i=Ka.Z.GAMEPLAY.GAME_OBJECTS,a=i.KEY,r=i.FRAME;this.egg=new Jd(this.scene,0,0,a,r.BALL_RED),this.scene.physics.add.existing(this.egg),this.egg.setScale(.5),this.egg.setPosition(0,0),this.egg.setWorldSize(t,n),this.dino=this.scene.physics.add.sprite(-2,-35,lg,ug.DINO_FLY+"1"),this.leg=this.scene.add.sprite(8,-14,lg,ug.DINO_LEG+"1"),this.dino.setOrigin(.5,.5),this.dino.setWorldSize(87,63.5),this.leg.setOrigin(.5,.5),this.leg.setWorldSize(21,26),this.add([this.dino,this.egg,this.leg]),this.state=og.Dead,this.scene.add.existing(this)},n.createFlyingDinoBodies=function(){var e=this.scene.world.getPixelRatio();this.scene.physics.add.existing(this),this.mainBody=this.body,this.mainBody.setSize(80,80),this.mainBody.setOffset(-40,-40),this.mainBody.setCollideWorldBounds(!0,1,1),this.mainBody.debugBodyColor=4584770,this.dino.body.setSize(50*e,32*e),this.dino.body.setOffset(12*e,16*e),this.egg.updatePhysicsRadius(16*e)},n.enableBody=function(){this.dino.body.enable=!0,this.egg.body.enable=!0,this.mainBody.enable=!0},n.disableBody=function(){this.dino.body.enable=!1,this.egg.body.enable=!1,this.mainBody.enable=!1},n.takeOff=function(e){this.revive(),this.state=og.Carrying,this.playFlying(),this.egg.setVisible(!0),this.egg.setColor(e),this.enableBody();var t=this.flyingDinoSpeed,n=t.x,i=t.y;this.mainBody.setVelocity(n,i*this.scene.descentController.getSpeedRate())},n.createFlyAnimation=function(){if(!this.scene.anims.exists("flyingDino-fly")){var e=new hg(this.scene.anims),t=new dg(this.scene.anims);this.scene.anims.add("flyingDino-fly",e),this.scene.anims.add("flyingDino-leg",t)}},n.playFlying=function(){var e,t=this;this.dino.play("flyingDino-fly"),this.leg.play("flyingDino-leg"),null==(e=this.flyTween)||e.complete(),this.flyTween=this.scene.tweens.addCounter({from:0,to:5,yoyo:!0,onUpdate:function(e){var n=e.getValue()-(e.data[0].previous||0);t.y+=n},repeat:-1,duration:350,onRepeat:function(){var e,n;null==(e=t.dino)||e.play("flyingDino-fly"),null==(n=t.leg)||n.play("flyingDino-leg")},ease:Phaser.Math.Easing.Cubic.Out})},n.update=function(){this.state===og.Carrying&&(this.y<=20&&this.handleLevelUp(),this.flipDino())},n.handleLevelUp=function(){this.state=og.Dead,this.scene.levelUpController.levelUp(),this.scene.descentController.resetSpeedRate(),this.scene.ballLayoutData.levelUp(),this.scene.grid.randomTopColor(),this.kill()},n.getCurrentColor=function(){return this.egg.getColor()},n.flipDino=function(){var e=this.mainBody.velocity.x;this.scaleX*e>0&&(e>0?this.flipDinoRight():this.flipDinoLeft())},n.flipDinoRight=function(){var e=this.scene.world.getPixelRatio();this.setScale(-Math.abs(this.scaleX),this.scaleY),this.dino.body.setOffset(24*e,16*e),this.mainBody.setOffset(40,-40)},n.flipDinoLeft=function(){var e=this.scene.world.getPixelRatio();this.setScale(Math.abs(this.scaleX),this.scaleY),this.dino.body.setOffset(12*e,16*e),this.mainBody.setOffset(-40,-40)},n.kill=function(){var t;null==(t=this.flyTween)||t.complete(),this.disableBody(),e.prototype.kill.call(this)},t}(Phaser.GameObjects.Container),fg=pg,gg=function(e){function t(t){var n;return(n=e.call(this,t,{runChildUpdate:!0})||this).scene=void 0,n.physicsObjects=void 0,n.scene=t,n.physicsObjects=t.physics.add.group(),n.setActive(!0),n.scene.add.existing((0,Na.Z)(n)),n.initObjects(1),n}(0,o.Z)(t,e);var n=t.prototype;return n.getPhysicsObjects=function(){return this.physicsObjects},n.spawn=function(e,t){void 0===e&&(e=0),void 0===t&&(t=0);var n=this.getFirstDead();return n||(n=this.addFlyingDino()),n.setPosition(e,t),n.enableBody(),n.revive(),n},n.reset=function(){this.getChildren().forEach((function(e){e.active&&e.kill()}))},n.initObjects=function(e){for(var t=0;t<e;t++){this.addFlyingDino().kill()}},n.getChildren=function(){return e.prototype.getChildren.call(this)},n.addFlyingDino=function(){var e=new fg(this.scene,216.5,646);return e.setDepth(_a.Z.FLYING_EGG),this.add(e),this.physicsObjects.addMultiple(e.getPhysicsObjects()),e},t}(Phaser.GameObjects.Group),mg=gg,vg=function(e){this.scene=void 0,this.scene=e},yg=function(){function e(){}return e.prototype.heave=function(e){var t=e.scene,n=t.registry.get("heavingBallTimer"),i=Math.floor(n/100/2),a=1/e.scene.world.getPixelRatio();return t.tweens.add({targets:e,duration:100,scale:{from:.9*a,to:1.1*a},yoyo:!0,repeat:i,onUpdate:function(t){e.active||t.complete()},onComplete:function(){e.scale=a}})},e}(),Eg=yg,Ag=Math.sqrt(3)/2,Sg=[[[-1,-1],[-1,0],[0,-1],[0,1],[1,-1],[1,0]],[[-1,0],[-1,1],[0,-1],[0,1],[1,0],[1,1]]],bg=function(e){function t(){for(var t,n,i=arguments.length,a=new Array(i),r=0;r<i;r++)a[r]=arguments[r];return(n=e.call.apply(e,P()(t=[this]).call(t,a))||this).index=0,n.staggered=!1,n.size=0,n.count=0,n.firstX=0,n}return(0,o.Z)(t,e),t}((0,F.Z)(Array)),Tg=function(){function e(e,t){this.scene=void 0,this.pool=void 0,this.layoutData=void 0,this.size=void 0,this.grid=[],this.ballsWillBeDestroyed=[],this.orphanBallsWillBeDestroyed=[],this.rowSize=0,this.ballsCount=0,this.firstY=0,this.eventAddHavingBall=void 0,this.scene=e,this.pool=t;var n=this.scene.data.get("grid"),i=n.width,a=n.height,r=n.rowSize;this.rowSize=r,this.size=new Phaser.Structs.Size(i,a)}var t=e.prototype;return t.getBallsAt=function(e,t){if(0===this.grid.length)return[];if(this.bottomY+40<t)return[];var n=this.getRowColByXY(e,t),i=n.row,a=n.col,r=this.getNeighbors(i,a),s=this.grid[i];if(s){var o=s[a];o&&r.push(o)}return r},t.getPool=function(){return this.pool},t.getVisiblesBall=function(){var e,t=this.getIndexOfHighestFullEggRow();return E()(e=this.grid).call(e,t,this.grid.length)},t.getIndexOfHighestFullEggRow=function(){var e;return Yu()(e=this.grid).call(e,(function(e){return e.size!==e.count}))-1},t.start=function(){this.addEventToRandomHeavingBall()},t.addEventToRandomHeavingBall=function(){var e=this;this.eventAddHavingBall=this.scene.time.addEvent({delay:this.scene.registry.get("timerForNextRandomHeavingBall"),repeat:-1,startAt:3e3,callback:function(){e.randomHeavingBall()}}),this.scene.events.emit(sd.TIMER_CREATED,this.eventAddHavingBall)},t.resetAlphaForAllBalls=function(){var e;Ie()(e=this.grid).call(e,(function(e){return Ie()(e).call(e,(function(e){e&&e.setAlpha(1)}))}))},t.destroy=function(){var e;this.scene&&(this.clearGrid(),null==(e=this.eventAddHavingBall)||e.remove())},t.setLayoutData=function(e){return this.layoutData=e,this},t.rowColToXY=function(e,t){var n=this.size.width,i=.5*n,a=this.ballInterval,r=this.grid[0],s=this.isRowStaggered(e),o=r.firstX+t*n;return r.staggered!=s&&(s?o+=i:o-=i),[o,this.firstY+e*a]},t.findNearestEmptyPositionByXY=function(e,t,n,i){var a=this;void 0===i&&(i=0);var r=this.getNeighborsPositionAt(n.row,n.col);pi()(r).call(r,(function(n,i){var r=n[0],s=n[1],o=i[0],c=i[1],l=a.rowColToXY(r,s),u=l[0],h=l[1],d=a.rowColToXY(o,c),p=d[0],f=d[1];return Phaser.Math.Distance.Between(e,t,u,h)<Phaser.Math.Distance.Between(e,t,p,f)?-1:1}));for(var s=r[0];r.length>0;){var o=r[0],c=o[0],l=o[1];if(!this.grid[c]||!this.grid[c][l])return r[0];r.shift()}if(2===i)return[];var u=s[0],h=s[1],d=this.grid[u][h];return d?this.findNearestEmptyPositionByXY(e,t,d,i+1):[]},t.animateDestroyedBall=function(e,t){var n=this,i=0;this.orphanBallsWillBeDestroyed.push(t),this.makeBallsBlur(t),e.forEach((function(a,r){n.ballsWillBeDestroyed.push(a),i+=a.length;var s=n.scene.time.addEvent({delay:83*r+33,callback:function(){if(n.scene.animationsManager.handleBallsWillBeDestroyed(a),n.scene.scoreCounter.processBallDestroyed(a),a.forEach((function(e){if(e.isHeaving()){var t=n.layoutData.getRandomStamp();n.spawnStamp(t,e.x,e.y)}e.preKill()})),a.length=0,r===e.length-1){t.length>0&&n.animateOrphans(t),t.length=0,n.scene.scoreCounter.updateCombosMultiplier();var s=n.scene.data.get("numEggDestroyedToEmitParticle");i>=s&&n.scene.animationsManager.handleDestroyedLotsEgg()}}});n.scene.events.emit(sd.TIMER_CREATED,s)}))},t.attachBall=function(e,t){var n=this,a=e.x,r=e.y,s=this.findNearestEmptyPositionByXY(a,r,t);if(0!==s.length){var o=s[0],c=s[1],l=this.rowColToXY(o,c),u=l[0],h=l[1];if(o===this.grid.length){var d=new bg(this.rowSize);vr()(d).call(d,void 0);var p=this.grid[o-1];d.staggered=!p.staggered,d.firstX=p.firstX+this.size.width/2,d.size=p.size+1,p.staggered?d.firstX-=this.size.width:d.size-=2,this.grid.push(d)}else if(o>this.grid.length){var f=new Error("Invalid position when attach ball"),g={pos:{row:o,col:c},ballsCount:this.ballsCount,gridLen:this.grid.length,firstY:this.firstY,bottomY:this.bottomY};(0,i.R0)(f,g)}var m=this.grid[o];if(m){var v=this.pool.spawn(u,h,e.getColor());v.setStamp(e.takeStamp()),v.row=o,v.col=c,m[c]=v,m.count+=1,this.jiggleNeighborsBall(v),this.resetProcessed();var y=this.findMatchesByLevelAt(v),E=y[0],A=y[1],S=A>=3;if(this.scene.scoreCounter.processCombos(S),this.scene.audio.playSound(er.Z.IMPACT),S){E.forEach((function(e){n.removeFromGrid(e)}));var b=this.findOrphanedBalls();this.removeFromGrid(b);var T=A+b.length-1;this.ballsCount-=T,this.animateDestroyedBall(E,b),this.cleanUpEmptyRows()}else{this.ballsCount+=1,this.scene.scoreCounter.updateCombosMultiplier();var w=this.scene.registry.get("zones").zones.zone5.topY;v.y-this.ballInterval/2>w&&(this.removeFromGrid([v]),this.scene.animationsManager.handleBallsWillBeDestroyed([v]),v.preKill())}}}},t.generate=function(e){if(void 0===e&&(e=6),!this.layoutData)return this;for(var t=0;t<e;++t)this.spawnRow();return this},t.moveBy=function(e,t){var n,i;return 0===this.pool.countActive()||(this.firstY+=e+t,this.grid.forEach((function(n){n.forEach((function(n){n&&(n.y+=e+t)}))})),this.ballsWillBeDestroyed=we()(n=this.ballsWillBeDestroyed).call(n,(function(e){return e.length})),this.ballsWillBeDestroyed.forEach((function(t){t.forEach((function(t){t&&(t.y+=e)}))})),this.orphanBallsWillBeDestroyed=we()(i=this.orphanBallsWillBeDestroyed).call(i,(function(e){return e.length})),this.orphanBallsWillBeDestroyed.forEach((function(t){t.forEach((function(t){t&&(t.y+=e)}))}))),this},t.dropAllBalls=function(){var e=[];this.grid.forEach((function(t){t.forEach((function(t){t&&e.push(t)}))})),this.removeFromGrid(e),this.animateOrphans(e)},t.spawnRow=function(){var e=this.grid[0],t=this.rowSize;e&&!e.staggered&&(t=this.rowSize-1);var n=this.layoutData.getNextRow(t);this.addRowToFront(n)},t.clearGrid=function(){var e=this;this.grid.forEach((function(t){var n=we()(t).call(t,(function(e){return e}));e.removeFromGrid(n),n.forEach((function(e){e.preKill()}))})),this.cleanUpEmptyRows()},t.updateCoordinate=function(){this.grid.forEach((function(e,t){e.forEach((function(e,n){e&&(e.row=t,e.col=n)})),e.index=t}))},t.addRowToFront=function(e){var t=this,n=.5*this.scene.gameZone.width,i=this.size.width,a=.5*i,r=this.ballInterval,s=new bg;this.grid.unshift(s);var o=0;if(this.grid.length<=1)s.staggered=!1,s.size=this.rowSize,this.firstY=0;else{var c=this.grid[1];s.staggered=!c.staggered,s.size=this.rowSize-+s.staggered,this.firstY-=r,o=this.firstY}var l=n-.5*s.size*i+a;s.firstX=l,e.forEach((function(e){if(-1!==e){var n=t.pool.spawn(l,o,e);s.push(n),s.count+=1}else s.push(void 0);l+=i})),this.ballsCount+=s.count,s.staggered&&s.push(void 0),this.updateCoordinate()},t.removeFromGrid=function(e){var t=this;e.forEach((function(e){var n=e.row,i=e.col;t.grid[n][i]=void 0,t.grid[n].count-=1,t.scene.physics.world.disableBody(e.body)}))},t.animateOrphans=function(e){var t=this,n=this.scene.tweens.timeline(),i=this.scene.registry.get("zones").zones.zone5.topY;Ie()(e).call(e,(function(e){var a=e.y,r=e.x,s=Phaser.Math.Between(-10,20),o=i-a+s+90,c=2*o;n.add({targets:e,y:{value:a+o,duration:c,ease:Phaser.Math.Easing.Sine.In},x:{value:r+s,duration:c,ease:Phaser.Math.Easing.Linear},offset:0,duration:c,delay:30,onComplete:function(){t.scene.animationsManager.handleOrphanBallWillBeDestroyed(e),e.preKill()}})})),n.play()},t.findOrphanedBalls=function(){var e,t,n=this;this.resetProcessed();var i=this.getIndexOfHighestFullEggRow(),a=this.grid[i+1]||[],r=null==a?void 0:we()(a).call(a,(function(e){return e}));if(!r)return[];this.resetProcessed(),E()(e=this.grid).call(e,0,i+1).forEach((function(e){e.forEach((function(e){null==e||e.setProcessed(!0)}))})),r.forEach((function(e){n.findMatchesByLevelAt(e,Sd.Any)}));var s=[];return E()(t=this.grid).call(t,i+1,this.grid.length).forEach((function(e){e.forEach((function(e){e&&!e.isProcess&&s.push(e)}))})),s},t.resetProcessed=function(){this.grid.forEach((function(e){e.forEach((function(e){null==e||e.setProcessed(!1)}))}))},t.destroyNeighBors=function(e,t,n){var i=this,a=this.findNearestEmptyPositionByXY(e,t,n);if(0!==a.length){var r=a[0],s=a[1],o=this.getNeighborsByLevelAt(3,r,s),c=0;o.forEach((function(e){c+=e.length,i.removeFromGrid(e)}));var l=this.findOrphanedBalls();this.removeFromGrid(l);var u=c+l.length;this.scene.time.delayedCall(60,(function(){i.animateDestroyedBall(o,l)})),this.cleanUpEmptyRows(),this.ballsCount-=u}},t.isRowStaggered=function(e){var t=this.grid[0];return e%2==0?t.staggered:!t.staggered},t.getNeighborsPositionAt=function(e,t){var n=this,i=this.isRowStaggered(e),a=Sg[+i],r=Ie()(a).call(a,(function(n){return[e+n[0],t+n[1]]})),s=we()(r).call(r,(function(e){var t=e[0],i=e[1],a=n.rowSize-+n.isRowStaggered(t);return i>=0&&i<a}));return s},t.getNeighbors=function(e,t){var n,i=this,a=this.isRowStaggered(e),r=Sg[+a];return we()(n=Ie()(r).call(r,(function(n){var a=e+n[0],r=t+n[1],s=i.grid[a];if(s&&s[r])return s[r]}))).call(n,(function(e){return e}))},t.filterBallsByPositions=function(e){var t=this,n=[];return e.forEach((function(e){var i=e[0],a=e[1],r=t.grid[i];if(r){var s=r[a];s&&n.push(s)}})),n},t.getNeighborsByLevelAt=function(e,t,n){var i=this;this.resetProcessed();var a=[];if(this.grid[t]){var r=this.grid[t][n];r&&(r.isProcess=!0)}var s=this.filterBallsByPositions(this.getNeighborsPositionAt(t,n));a.push(s),s.forEach((function(e){e.isProcess=!0}));for(var o=function(){var e=a[a.length-1];if(0==e.length)return a.pop(),1;var t=[];e.forEach((function(e){i.filterBallsByPositions(i.getNeighborsPositionAt(e.row,e.col)).forEach((function(e){e.isProcess||(e.isProcess=!0,t.push(e))}))})),a.push(t)},c=0;c<e-1&&!o();c++);return a},t.findMatchesByLevelAt=function(e,t){var n=this,i=[],a=t||e.getColor();e.isProcess=!0,i.push([e]);for(var r=1,s=function(){var e=i[i.length-1];if(0==e.length)return i.pop(),1;var t=[];e.forEach((function(e){n.filterBallsByPositions(n.getNeighborsPositionAt(e.row,e.col)).forEach((function(e){var n,i;e.isProcess||((n=a,i=e.getColor(),n===Sd.Any||i===Sd.Any||n===i)&&(t.push(e),r+=1),e.isProcess=!0)}))})),i.push(t)},o=0;o<i.length&&!s();o++);return[i,r]},t.jiggleNeighborsBall=function(e){var t=this.getNeighborsByLevelAt(3,e.row,e.col),n=[6,4,2,1];t.forEach((function(t,i){var a=n[i];t.forEach((function(t){var n=t.x-e.x,r=t.y-e.y,s=new Phaser.Math.Vector2(n,r);s.normalize(),t.jiggle(s,a,33*i)}))}))},t.cleanUpEmptyRows=function(){for(var e=this.grid.length-1;e>=0;--e){if(this.grid[e].count>0)return;this.grid.pop()}},t.randomHeavingBall=function(){var e=[];this.grid.forEach((function(t){var n=we()(t).call(t,(function(e){return e&&!e.isHeaving()}));e.push.apply(e,n)}));var t=e.length;if(!(t<2)){var n=Phaser.Math.Between(Math.floor(t/2),t-1),i=e[n];i&&(i.setHeavingBehavior(new Eg),i.heave())}},t.spawnStamp=function(e,t,n){var i=this,a=1/this.scene.world.getPixelRatio();e.setScale(1.25*a),e.setPosition(t,n);var r=this.scene.registry.get("zones").zones.zone5.topY-n+90;this.scene.tweens.add({targets:e,y:n+r,offset:0,duration:r/.5,onComplete:function(){e.setScale(a),e.setVisible(!1),i.scene.shooter.collectStamp(e)},ease:Phaser.Math.Easing.Quadratic.In})},t.randomTopColor=function(){var e=this;this.scene.time.delayedCall(50,(function(){var t,n=e.layoutData.getTopColor(),i=e.layoutData.getLevel();E()(t=e.grid).call(t,0,2).forEach((function(e){e.forEach((function(e){var t=Phaser.Math.Between(0,i+2);e&&1===t&&e.setColor(n)}))}))}))},t.getRowColByXY=function(e,t){var n,i=(t-this.topY+.5*this.size.height)/this.ballInterval,a=Math.round(i)-1;if(a%2===0)n=this.firstRow.firstX;else{var r=a%2===0?this.firstRow.staggered:!this.firstRow.staggered;n=this.firstRow.firstX-this.size.width/2,r&&(n+=this.size.width)}var s=(e-n)/this.size.width;return{row:a,col:Math.round(s)}},t.makeBallsBlur=function(e){this.scene.tweens.add({targets:e,duration:83,alpha:{from:1,to:.65}})},(0,te.Z)(e,[{key:"height",get:function(){return(this.grid.length-1)*this.ballInterval+this.size.height}},{key:"ballInterval",get:function(){return Math.round(this.size.height*Ag)}},{key:"topY",get:function(){return 0===this.grid.length?0:this.firstY-.5*this.size.height}},{key:"bottomY",get:function(){return this.topY+this.height}},{key:"firstRow",get:function(){return this.grid[0]}},{key:"getDangerRows",get:function(){var e=this.scene.registry.get("zones").zones,t=[];if(this.bottomY>e.zone5.topY){var n,i=Math.ceil((this.bottomY-e.zone5.topY)/this.ballInterval);t.push.apply(t,E()(n=this.grid).call(n,this.grid.length-i))}return t}},{key:"totalBalls",get:function(){return this.ballsCount}}]),e}(),wg=Tg,Cg=n(89),Ig=n.n(Cg),Pg=[op.Stamp5,op.Stamp10,op.Stamp15,op.Stamp2x,op.Stamp3x,op.Stamp4x,op.StampUp],xg=[Sd.Red,Sd.Blue,Sd.Green,Sd.Yellow,Sd.Violet,Sd.Pink,Sd.Cyan,Sd.Gray,Sd.Black],kg=function(){function e(e){this.scene=void 0,this.currentColors=[],this.currentBulletColors=[],this.countBulletColors=void 0,this.stampPool=void 0,this.bombPool=void 0,this.ballGrid=void 0,this.scene=e,this.initBeginColors()}var t=e.prototype;return t.setStampPool=function(e){this.stampPool=e},t.setBombPool=function(e){this.bombPool=e},t.setBallGrid=function(e){this.ballGrid=e},t.initBeginColors=function(){var e,t=this.scene.registry.get("level")+2;this.currentColors=E()(xg).call(xg,0,t),this.currentBulletColors=E()(xg).call(xg,0,t),this.countBulletColors=vr()(e=Array(t)).call(e,0)},t.levelUp=function(){var e=this,t=this.scene.registry.get("level")+2;this.currentColors=E()(xg).call(xg,0,t);var n=this.ballGrid.firstRow||[];this.scene.tweens.addCounter({duration:1e5,onUpdate:function(i){n.count<n.size&&(e.currentBulletColors=E()(xg).call(xg,0,t),i.complete())}})},t.getLevel=function(){return this.currentColors.length},t.getNextLevelColor=function(e){return xg[e+1]},t.destroy=function(){},t.getNextRow=function(e){for(var t=[],n=0;n<e;++n)t.push(this.getRandomColor());return t},t.getTopColor=function(){var e=this.currentColors.length-1;return this.currentColors[e]},t.getRandomColor=function(){var e=Math.floor(Math.random()*this.currentColors.length);return this.currentColors[e]},t.getRandomBulletColor=function(){var e,t=this.currentColors.length,n=Math.floor(Math.random()*t);if(this.countBulletColors[n]>=4){var i=Math.floor(Math.random()*(t-1));n=i===n?i+1:i}0===this.countBulletColors[n]&&(this.countBulletColors=vr()(e=Array(t)).call(e,0));return this.countBulletColors[n]+=1,this.currentBulletColors[n]},t.getRandomStamp=function(){var e,t,n=this.scene.registry.get("bonusRate"),i=P()(e=[]).call(e,Pg),a=P()(t=[]).call(t,n),r=.5*this.scene.gameZone.height;this.ballGrid.bottomY<r&&(a[6]=0);var s=this.getRandomStampType(i,a),o=this.stampPool.spawn();return o.setStamp(s),o},t.getRandomStampType=function(e,t){var n=Ig()(t).call(t,(function(e,t){return e+t}),0),i=Math.ceil(Math.random()*n);return e[Yu()(t).call(t,(function(e){return(i-=e)<=0}))]},t.getBomb=function(){return this.bombPool.spawn()},e}(),Og=kg,Rg=function(e){return e[e.LOADING=0]="LOADING",e[e.SWAPPING=1]="SWAPPING",e[e.READY=2]="READY",e[e.SHOOTING=3]="SHOOTING",e}(Rg||{}),Bg=Rg,_g=Ka.Z.GAMEPLAY.GAMEPLAY_TEXTURES,Dg=_g.KEY,Ng=_g.FRAME,Lg=Ka.Z.GAMEPLAY.GAME_OBJECTS,Mg=Lg.KEY,Gg=Lg.FRAME,Fg=Phaser.Input.Events,Zg=Fg.GAMEOBJECT_POINTER_DOWN,Ug=Fg.GAMEOBJECT_POINTER_MOVE,Yg=Fg.GAMEOBJECT_POINTER_UP,Hg=function(e){function t(t,n,i){var a;return(a=e.call(this,t,n,i)||this).highlightCircle=void 0,a.fireCircle=void 0,a.launcher=void 0,a.switchingArea=void 0,a.shootingArea=void 0,a.isPointerDownInShootingArea=!1,a.isPointerMoveInShootingArea=!0,a.shootingAngle=void 0,a.timeToReloadBullet=150,a.shotGuide=void 0,a.multiplierText=void 0,a.currentBullet=void 0,a.bomb=void 0,a.nextBullet=void 0,a.isBombAttached=!1,a.bulletBallPool=void 0,a.layoutData=void 0,a.stampQueue=[],a.attachEvent=void 0,a.shooterState=void 0,a.isDisabledShooting=!0,a.isDisabledShotGuide=!0,a.isDisabledSwitching=!0,a.nextBulletScale=.75,a.shootingPosition=void 0,a.nextShootingPosition=void 0,a.isDesktop=void 0,a.onPointerDown=function(e,t){t[0]!==a.shootingArea?a.isPointerMoveInShootingArea=!1:(a.isPointerMoveInShootingArea=!0,a.updateAngle(e))},a.onPointerMove=function(e,t){(a.isDesktop||a.isPointerMoveInShootingArea)&&(t[0]===a.shootingArea&&t[0]!==a.switchingArea?(a.isPointerMoveInShootingArea=!0,a.updateAngle(e)):a.isPointerMoveInShootingArea=!1)},a.onPointerUp=function(e,t){if(e.rightButtonReleased())return a.swapBalls(),void(a.isPointerMoveInShootingArea=!0);t[0]!==a.switchingArea&&(a.isPointerDownInShootingArea&&a.isPointerMoveInShootingArea?(a.shoot(e),a.isPointerMoveInShootingArea=!0):a.isPointerMoveInShootingArea=!1,a.isPointerDownInShootingArea=!1)},a.updateAngle=function(e){var t=e.worldX-a.shootingPosition.x,n=e.worldY-a.shootingPosition.y,i=new Phaser.Math.Vector2(t,n);i.normalize(),a.shootingAngle.copy(i)},a.handleCloseScreen=function(){a.scene.input.setTopOnly(!0);var e=a.scene.input.activePointer;if(e.active&&!(e.worldY<80)){var t=e.worldX-a.shootingPosition.x,n=e.worldY-a.shootingPosition.y,i=new Phaser.Math.Vector2(t,n);i.normalize(),a.shootingAngle.copy(i)}},a.setDepth(_a.Z.SHOOTER),a.shooterState=Bg.LOADING,a.initBulletPosition(),a.createObjects(),a.createAnimation(),a.initEvents(),a.initController(),a.isDesktop=GameCore.Utils.Device.isDesktop(),t.add.existing((0,Na.Z)(a)),a}(0,o.Z)(t,e);var n=t.prototype;return n.initBulletPosition=function(){this.shootingPosition={x:this.x,y:this.y-30},this.nextShootingPosition={x:this.x+30*Math.cos(Math.PI/4.4),y:this.y+30*Math.sin(Math.PI/3.4)}},n.createObjects=function(){var e=this.scene.data.get("ball"),t=e.width,n=e.height;this.launcher=this.scene.add.image(0,0,Mg,Gg.SHOOTER),this.launcher.setWorldSize(93,93),this.highlightCircle=this.scene.add.image(0,0,Dg,Ng.HIGHLIGHT_CIRCLE),this.highlightCircle.setVisible(!1).setPosition(this.shootingPosition.x-this.x,this.shootingPosition.y-this.y).setWorldSize(1.5*t,1.5*n),this.fireCircle=this.scene.add.image(0,0,Dg,Ng.FIRE_CIRCLE),this.fireCircle.setVisible(!1).setPosition(this.shootingPosition.x-this.x,this.shootingPosition.y-this.y).setWorldSize(55,61),this.multiplierText=this.scene.make.bitmapText({font:$a.Z.PRIMARY.KEY,size:this.scene.fontSize(23),text:"x1",origin:{x:.5,y:.4}}),this.add([this.launcher,this.highlightCircle,this.multiplierText,this.fireCircle])},n.createAnimation=function(){this.scene.tweens.add({targets:this.fireCircle,alpha:.85,duration:300,yoyo:!0,loop:-1}),this.scene.tweens.add({targets:this.fireCircle,angle:"-=0.2",duration:500,yoyo:!0,loop:-1})},n.initController=function(){var e=this,t=this.scene.add.rectangle(0,55,this.scene.gameZone.width,this.scene.gameZone.height),n=this.scene.add.rectangle(0,0,90,90);t.setOrigin(0,0),t.setInteractive(),t.on(Zg,(function(){e.isPointerDownInShootingArea=!0})),this.scene.input.on(Zg,this.onPointerDown),this.scene.input.on(Ug,this.onPointerMove),this.scene.input.on(Yg,this.onPointerUp);var i=!1;n.setInteractive({useHandCursor:!0}),n.on(Phaser.Input.Events.GAMEOBJECT_POINTER_DOWN,(function(){i=!0})),n.on(Phaser.Input.Events.GAMEOBJECT_POINTER_OUT,(function(){i=!1})),n.on(Phaser.Input.Events.GAMEOBJECT_POINTER_UP,(function(){i&&e.swapBalls()})),this.shootingAngle=new Phaser.Math.Vector2(0,-1),this.add([n]),this.switchingArea=n,this.shootingArea=t},n.initEvents=function(){this.scene.screen.events.off(GameCore.Screens.Events.CLOSE,this.handleCloseScreen),this.scene.screen.events.on(GameCore.Screens.Events.CLOSE,this.handleCloseScreen)},n.collectStamp=function(e){this.stampQueue.push(e)},n.pause=function(){this.setDisabledShooting(),this.setDisabledShotGuide(),this.setDisabledSwitching()},n.resume=function(){this.setDisabledShooting(!1),this.setDisabledShotGuide(!1),this.setDisabledSwitching(!1)},n.setBallPool=function(e){return this.bulletBallPool=e,this},n.setLayoutData=function(e){return this.layoutData=e,this},n.initBullet=function(){var e,t=1/this.scene.world.getPixelRatio(),n=this.bulletBallPool.spawn(this.shootingPosition.x,this.shootingPosition.y,this.layoutData.getRandomBulletColor());null==(e=this.currentBullet)||e.kill(),this.currentBullet=n;var i=this.bulletBallPool.spawn(this.nextShootingPosition.x,this.nextShootingPosition.y,this.layoutData.getRandomBulletColor());i.scale=t*this.nextBulletScale,this.nextBullet=i,this.shooterState=Bg.READY},n.setGuide=function(e){this.shotGuide=e},n.attachBomb=function(e){var t=this;if(void 0===e&&(e=!1),!this.bomb){if(this.shooterState=Bg.LOADING,this.currentBullet){var n=this.currentBullet.takeStamp();n&&(n.setVisible(!1),this.stampQueue.push(n)),this.currentBullet.kill()}var i=this.layoutData.getBomb().setFlyingBehavior();i.scale=0,i.setPosition(this.shootingPosition.x,this.shootingPosition.y),i.fromGift=e,this.bomb=i,this.isBombAttached=!0;var a=1/this.scene.world.getPixelRatio();this.scene.add.tween({targets:i,scale:a,ease:Phaser.Math.Easing.Bounce.Out,duration:300,onComplete:function(){t.shooterState=Bg.READY}}),this.scene.add.sprite(i.x+10,i.y,"").play("showing-bomb-effect").setWorldSize(120,123),this.scene.audio.playSound(er.Z.SHOWING_BOMB)}},n.genNextBullet=function(){var e,t=1/this.scene.world.getPixelRatio(),n=this.bulletBallPool.spawn(this.nextShootingPosition.x,this.nextShootingPosition.y,this.layoutData.getRandomBulletColor());(n.scale=0,this.stampQueue.length)&&(n.setStamp(this.stampQueue[0]),zu()(e=this.stampQueue).call(e,0,1));this.nextBullet=n,this.scene.tweens.add({targets:n,scale:t*this.nextBulletScale,duration:300})},n.swapBalls=function(){var e=this;if(!this.isDisabledSwitching&&this.shooterState==Bg.READY&&!this.isBombAttached){this.shooterState=Bg.SWAPPING;var t=this.currentBullet;if(this.currentBullet=this.nextBullet,this.nextBullet=t,this.currentBullet){var n=this.currentBullet.x-this.x,i=this.currentBullet.y-this.y,a=new Phaser.Math.Vector2(n,i),r=this.shootingPosition.x-this.x,s=this.shootingPosition.y-this.y,o=new Phaser.Math.Vector2(r,s),c=1/this.scene.world.getPixelRatio(),l=o.length();this.scene.tweens.add({targets:this.nextBullet,scale:c*this.nextBulletScale,duration:300}),this.scene.tweens.addCounter({from:o.angle(),to:a.angle(),duration:300,onUpdate:function(t){var n=t.getValue();e.nextBullet&&(e.nextBullet.x=e.x+Math.cos(n)*l,e.nextBullet.y=e.y+Math.sin(n)*l)}}),this.scene.tweens.add({targets:this.currentBullet,scale:c,duration:300}),this.scene.tweens.addCounter({from:a.angle()+2*Math.PI,to:o.angle(),duration:300,onUpdate:function(t){var n=t.getValue();e.currentBullet&&(e.currentBullet.x=e.x+Math.cos(n)*l,e.currentBullet.y=e.y+Math.sin(n)*l)},onComplete:function(){e.shooterState=Bg.READY}})}}},n.attachBullet=function(){var e=this;if(this.scene&&this.shooterState!=Bg.LOADING&&(this.currentBullet=this.nextBullet,this.genNextBullet(),this.currentBullet)){this.shooterState=Bg.LOADING;var t=this.currentBullet.x-this.x,n=this.currentBullet.y-this.y,i=new Phaser.Math.Vector2(t,n),a=this.shootingPosition.x-this.x,r=this.shootingPosition.y-this.y,s=new Phaser.Math.Vector2(a,r),o=s.length(),c=1/this.scene.world.getPixelRatio();this.scene.tweens.add({targets:this.currentBullet,scale:c,duration:300}),this.scene.tweens.addCounter({from:i.angle()+2*Math.PI,to:s.angle(),duration:300,onUpdate:function(t){var n;if(null!=(n=e.currentBullet)&&n.active){var i=t.getValue();e.currentBullet.x=e.x+Math.cos(i)*o,e.currentBullet.y=e.y+Math.sin(i)*o}else t.stop()},onComplete:function(){e.shooterState=Bg.READY}})}},n.update=function(e){this.shooterState===Bg.READY?this.updateHighLightCircle(e,!1):this.updateHighLightCircle(e,!0);var t,n=this.isDisabledShotGuide||this.shooterState!=Bg.READY;if(GameCore.Utils.Device.isDesktop(),this.isPointerMoveInShootingArea||(n=!0),this.shootingAngle.angle()<this.constraintAngle(this.shootingAngle).angle()&&(n=!0),n)return null==(t=this.shotGuide)||t.hide(),void this.setDisabledShooting(!0);this.setDisabledShooting(!1),this.updateShootingAngle(e)},n.updateShootingAngle=function(e){if(this.isBombAttached){var t;if(!this.bomb)return;null==(t=this.shotGuide)||t.showFrom(this.bomb.x,this.bomb.y,this.constraintAngle(this.shootingAngle),Sd.Bomb,e)}else{var n;if(!this.currentBullet)return;null==(n=this.shotGuide)||n.showFrom(this.currentBullet.x,this.currentBullet.y,this.constraintAngle(this.shootingAngle),this.currentBullet.getColor(),e)}},n.updateHighLightCircle=function(e,t){t?(this.highlightCircle.setVisible(!1),this.fireCircle.setVisible(!1)):(this.isBombAttached?(this.fireCircle.setVisible(!0),this.highlightCircle.setVisible(!1)):(this.highlightCircle.setVisible(!0),this.fireCircle.setVisible(!1)),this.highlightCircle.rotation+=3*e/1e3)},n.shoot=function(e){var t,n=this;if(!this.isDisabledShooting&&this.shooterState==Bg.READY){var i=e.worldX-this.shootingPosition.x,a=e.worldY-this.shootingPosition.y,r=new Phaser.Math.Vector2(i,a);if(r.normalize(),this.scene.audio.playSound(er.Z.SHOOT_BALL),this.isBombAttached){if(!this.bomb)return;this.bomb.launch(this.constraintAngle(r)),this.bomb=void 0,this.scene.events.emit(sd.SHOOT_BALL,this.currentBullet),this.isBombAttached=!1}else{if(!this.currentBullet)return;this.currentBullet.launch(this.constraintAngle(r)),this.scene.events.emit(sd.SHOOT_BALL,this.currentBullet),this.currentBullet=void 0}this.scene.time.addEvent({delay:this.timeToReloadBullet,callback:function(){n.attachBullet()}}),null==(t=this.shotGuide)||t.hide(),this.shooterState=Bg.SHOOTING}},n.setDisabledShooting=function(e){void 0===e&&(e=!0),this.isDisabledShooting=e},n.setDisabledSwitching=function(e){void 0===e&&(e=!0),this.isDisabledSwitching=e},n.setDisabledShotGuide=function(e){void 0===e&&(e=!0),this.isDisabledShotGuide=e},n.hideShotGuide=function(){var e;null==(e=this.shotGuide)||e.hide()},n.destroy=function(){var t;this.scene&&(null==(t=this.bomb)||t.kill(),this.isBombAttached=!1,this.currentBullet&&(this.currentBullet.kill(),this.currentBullet=void 0),this.nextBullet&&(this.nextBullet.kill(),this.nextBullet=void 0),this.shotGuide.destroy(),this.scene.events.off("multiplierChanged"),this.scene.screen.events.off(GameCore.Screens.Events.CLOSE,this.handleCloseScreen),this.scene.input.off(Zg,this.onPointerDown),this.scene.input.off(Ug,this.onPointerMove),this.scene.input.off(Yg,this.onPointerUp),this.layoutData.destroy(),this.stampQueue.forEach((function(e){return e.kill()})),e.prototype.destroy.call(this))},n.updateMultiplier=function(){var e=this.scene.registry.get("gameData").multiplier;this.multiplierText.setText("x"+e)},n.constraintAngle=function(e){var t=this.scene.data.get("shootingAngle")*Math.PI/180,n=e.clone();return n.rotate(-Math.PI/2),n.angle()<Math.PI/2+t&&n.setAngle(Math.PI/2+t),n.angle()>3*Math.PI/2-t&&n.setAngle(3*Math.PI/2-t),n.rotate(Math.PI/2),n},t}(Phaser.GameObjects.Container),zg=Hg,Wg=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene.pauseButton.kill(),t.destroyGamePlay(),n}(0,o.Z)(t,e);var n=t.prototype;return n.ready=function(){var e=new ym(this.scene);this.scene.stateManager.transitionTo(e)},n.play=function(){},n.pause=function(){},n.rescue=function(){},n.gameOver=function(){},n.quit=function(){},n.update=function(e){},t}(vg),Vg=Wg,Kg=function(e){function t(t){var n;return n=e.call(this,t)||this,t.pauseGame(),n}(0,o.Z)(t,e);var n=t.prototype;return n.ready=function(){this.scene.resumeGame();var e=new ym(this.scene);this.scene.stateManager.transitionTo(e)},n.play=function(){this.scene.resumeGame();var e=new em(this.scene);this.scene.stateManager.transitionTo(e)},n.pause=function(){},n.rescue=function(){},n.gameOver=function(){},n.quit=function(){this.scene.resumeGame();var e=new Vg(this.scene);this.scene.stateManager.transitionTo(e)},n.update=function(e){},t}(vg),jg=Kg,Xg=n(130),qg=n.n(Xg),Jg=function(e){function t(t){var n;n=e.call(this,t)||this,t.pauseGame();var i=t.scoreCounter.getScore(),a=t.registry.get("log_level");return t.storage.dispatch(Ao({score:i,level:a})),qg()(t.data).life<1?(t.time.delayedCall(0,t.stateManager.gameOver),(0,Na.Z)(n)):(qg()(t.data).life-=1,t.screen.open(Da.o4.RESCUE_SCREEN),t.analytics.levelRescue(a,i,"level_"+a),n)}(0,o.Z)(t,e);var n=t.prototype;return n.ready=function(){},n.play=function(){var e=this.scene;e.resumeGame(),e.descentController.handleRescue(),e.grid.resetAlphaForAllBalls();var t=new em(this.scene);this.scene.stateManager.transitionTo(t)},n.pause=function(){},n.rescue=function(){},n.gameOver=function(){this.scene.resumeGame();var e=new wm(this.scene);this.scene.stateManager.transitionTo(e)},n.quit=function(){var e=new Vg(this.scene);this.scene.stateManager.transitionTo(e)},n.update=function(e){},t}(vg),Qg=Jg,$g=function(e){function t(t){var n;return n=e.call(this,t)||this,t.isNeedShowGuide&&(t.isNeedShowGuide=!1,t.screen.open(Da.o4.GUIDE_SCREEN),t.analytics.event(Ht._.TUTORIAL_BEGIN),n.scene.player.incUserGuideDisplays()),t.shooter.resume(),n}(0,o.Z)(t,e);var n=t.prototype;return n.ready=function(){},n.play=function(){},n.pause=function(){this.scene.pauseGame();var e=new jg(this.scene);this.scene.stateManager.transitionTo(e)},n.rescue=function(){var e=new Qg(this.scene);this.scene.stateManager.transitionTo(e)},n.gameOver=function(){},n.quit=function(){var e=new Vg(this.scene);this.scene.stateManager.transitionTo(e)},n.update=function(e){this.scene.shooter.update(e),this.scene.descentController.update(e)},t}(vg),em=$g,tm=function(e){return e[e.Beginning=0]="Beginning",e[e.Descending=1]="Descending",e[e.Reversing=2]="Reversing",e[e.Holding=3]="Holding",e}(tm||{}),nm=tm,im=function(){function e(e,t,n){var i=this;void 0===n&&(n=0),this.scene=void 0,this.ballGrid=void 0,this.speed=void 0,this.speedFactor=1,this.speedRate=1,this.distanceWillBeMove=0,this.moveRatio=.5,this.state=nm.Holding,this.zone=void 0,this.movingConfigs=void 0,this.levelUpSetting=void 0,this.bombForce=void 0,this.dangerTimer=void 0,this.setSpeedTween=void 0,this.toSpeed=0,this.isReversing=void 0,this.reversingTween=void 0,this.revert=function(e,t){if(0!==e){var n=1e3*-e/t,a=i.speed;i.changeState(nm.Reversing,n),i.isReversing=!0,i.reversingTween=i.scene.tweens.addCounter({from:0,to:e,duration:t,onUpdate:function(e){var t=(e.getValue()||0)-(e.data[0].previous||0);i.moveGrid(-t)},onComplete:function(){i.changeState(nm.Descending,a)},completeDelay:150})}},this.changeState=function(e,t){switch(void 0===t&&(t=0),i.state){case nm.Reversing:case nm.Holding:i.setSpeed(.8*t,!0),i.isReversing=!1}switch(e){case nm.Beginning:i.setSpeed(t,!0),i.isReversing=!1;break;case nm.Descending:i.setSpeed(t),i.isReversing=!1;break;case nm.Reversing:i.setSpeed(t,!0),i.isReversing=!0;break;case nm.Holding:i.setSpeed(0,!0)}i.state=e},this.scene=e,this.ballGrid=t,this.speed=n,this.zone=this.scene.registry.get("zones").zones,this.movingConfigs=this.scene.registry.get("zones").speed,this.levelUpSetting=this.scene.registry.get("levelUpSetting"),this.bombForce=this.scene.registry.get("bombForce"),this.dangerTimer=this.scene.registry.get("dangerTimer")}var t=e.prototype;return t.getSpeedRate=function(){return this.speedRate},t.handleUseStampUp=function(){var e=this.bombForce,t=e.distance,n=e.duration;this.revert(t,2*n)},t.resetSpeedRate=function(){this.speedRate=1},t.handleRescue=function(){this.revert(300,2500),this.speedRate=.5*(this.speedRate-1)+1},t.setSpeedScale=function(e){this.speedFactor=e},t.handleFlyingDinoExploded=function(){this.speedRate*=this.levelUpSetting.levelUpSpeedRate},t.handleBombExplode=function(){var e=this.bombForce,t=e.distance,n=e.duration;this.revert(t,n)},t.initialize=function(){var e=this;this.ballGrid.generate(4),this.scene.tweens.addCounter({from:0,to:200,duration:1500,onUpdate:function(t){var n=(t.getValue()||0)-(t.data[0].previous||0);e.moveGrid(n)},onComplete:this.scene.stateManager.play})},t.begin=function(){var e=this;this.changeState(nm.Beginning,this.movingConfigs.slow);var t=this.scene.time.delayedCall(5e3,(function(){e.changeState(nm.Descending,e.movingConfigs.slow)}));this.scene.events.emit(sd.TIMER_CREATED,t)},t.endanger=function(){var e=this,t=this.speed;this.changeState(nm.Holding);var n=this.dangerTimer;this.scene.audio.playSound(er.Z.AOOGA),this.scene.tweens.addCounter({from:1,to:.3,yoyo:!0,duration:100,repeat:Math.floor(n/100/2),onUpdate:function(n){var i=e.ballGrid.getDangerRows;if(i.length<=0){if(n.remove(),e.ballGrid.resetAlphaForAllBalls(),e.state===nm.Descending)return;e.changeState(nm.Descending,t)}else i.forEach((function(e){e.forEach((function(e){null==e||e.setAlpha(n.getValue()||0)}))}))},onComplete:this.scene.stateManager.rescue})},t.checkGridToSpawnRow=function(){var e=this.ballGrid.firstRow;e&&e.count<e.size&&this.ballGrid.spawnRow(),this.ballGrid.topY>-40&&this.ballGrid.spawnRow(),this.ballGrid.totalBalls<=11&&this.ballGrid.spawnRow()},t.moveGrid=function(e,t){void 0===t&&(t=0),this.distanceWillBeMove+=e;var n=this.moveRatio;if(!(Math.abs(this.distanceWillBeMove+t)<n)){var i=Math.round(this.distanceWillBeMove/n)*n;this.ballGrid.moveBy(i,t),this.distanceWillBeMove-=i,this.checkGridToSpawnRow()}},t.getSpeed=function(){return this.speed},t.setSpeed=function(e,t){var n,i,a=this;if(void 0===t&&(t=!1),t)return null==(i=this.setSpeedTween)||i.complete(),this.speed=e,void(this.toSpeed=e);if(e!=this.toSpeed&&(null==(n=this.setSpeedTween)||!n.isPlaying())){var r=e>this.toSpeed?1e3:0;this.setSpeedTween=this.scene.tweens.addCounter({from:this.toSpeed,to:e,duration:1e3,delay:r,onUpdate:function(e){a.speed=e.getValue()}}),this.toSpeed=e}},t.update=function(e){if(!this.isReversing){var t=this.ballGrid.bottomY;switch(this.state){case nm.Beginning:this.moveGrid(Phaser.Math.GetSpeed(this.speed,1)*e*this.speedFactor,0);break;case nm.Descending:if(t>this.zone.zone5.topY)this.endanger();else if(t>this.zone.zone4.topY)this.setSpeed(this.movingConfigs.slow*this.speedRate);else if(t>this.zone.zone3.topY)this.setSpeed(this.movingConfigs.medium*this.speedRate);else if(t>this.zone.zone2.topY)this.setSpeed(this.movingConfigs.fast*this.speedRate);else{var n=(this.zone.zone2.topY-t)/this.zone.zone2.topY+1;this.setSpeed(this.movingConfigs.fast*this.speedRate*n)}this.moveGrid(Phaser.Math.GetSpeed(this.speed,1)*e*this.speedFactor,0)}}},e}(),am=im,rm=Ka.Z.GAMEPLAY.GAMEPLAY_TEXTURES,sm=rm.KEY,om=rm.FRAME,cm=function(e){function t(t,n,i){var a;return(a=e.call(this,t,n,i)||this).progressBg=void 0,a.progressTop=void 0,a.progressMiddle=void 0,a.progressBottom=void 0,a.bottomY=39,a.fullBarHeight=79,a.fullMiddleHeight=53,a.progressFragmentHeight=13,a.progressFragmentWidth=18,a.setDepth(_a.Z.ITEM),a.createProgressBar(),a.scene.add.existing((0,Na.Z)(a)),a}(0,o.Z)(t,e);var n=t.prototype;return n.createProgressBar=function(){this.progressBg=this.scene.add.image(0,0,sm,om.PROGRESS_BG),this.progressBg.setWorldSize(18,90),this.progressTop=this.scene.add.image(0,this.bottomY-this.progressFragmentHeight-this.fullMiddleHeight,sm,om.PROGRESS_TOP),this.progressTop.setOrigin(.5,1).setWorldSize(this.progressFragmentWidth,this.progressFragmentHeight),this.progressMiddle=this.scene.add.image(0,this.bottomY-this.progressFragmentHeight,sm,om.PROGRESS_MIDDLE),this.progressMiddle.setOrigin(.5,1).setWorldSize(this.progressFragmentWidth,this.fullMiddleHeight),this.progressBottom=this.scene.add.image(0,this.bottomY,sm,om.PROGRESS_BOTTOM),this.progressBottom.setOrigin(.5,1).setWorldSize(this.progressFragmentWidth,this.progressFragmentHeight),this.updateProgress(0),this.add([this.progressBg,this.progressTop,this.progressMiddle,this.progressBottom])},n.updateProgress=function(e){e>100&&(e=100);var t=Math.floor(e/100*this.fullBarHeight);if(t<=this.progressFragmentHeight)this.progressBottom.setVisible(!0).setDisplaySize(this.progressFragmentWidth,t),this.progressMiddle.setVisible(!1),this.progressTop.setVisible(!1);else if(t<=this.progressFragmentHeight+this.fullMiddleHeight){var n=t-this.progressFragmentHeight;this.progressBottom.setVisible(!0).setCrop(),this.progressMiddle.setVisible(!0).setWorldSize(this.progressFragmentWidth,n),this.progressTop.setVisible(!1)}else{var i=t-this.progressFragmentHeight-this.fullMiddleHeight;this.progressBottom.setVisible(!0).setCrop(),this.progressMiddle.setVisible(!0),this.progressTop.setVisible(!0).setDisplaySize(this.progressFragmentWidth,i)}},t}(Phaser.GameObjects.Container),lm=cm,um=Ka.Z.GAMEPLAY.GAMEPLAY_TEXTURES,hm=um.KEY,dm=um.FRAME,pm=function(){function e(e){this.scene=void 0,this.level=1,this.flyingDinoPool=void 0,this.layoutData=void 0,this.nextLevelColor=void 0,this.warningSignal=void 0,this.progressBar=void 0,this.currentTime=0,this.totalTime=0,this.timeScale=1,this.alertMoment=0,this.alertDuration=1200,this.alerting=!1,this.isRunning=!1,this.isTakeOff=!1,this.isTicktock=!1,this.scene=e,this.createProgressBar(),this.createWarningSignal()}var t=e.prototype;return t.setFlyingDinoPool=function(e){this.flyingDinoPool=e},t.pause=function(){this.isRunning=!1},t.resume=function(){this.isRunning=!0,this.isTakeOff&&(this.isRunning=!1)},t.reset=function(){this.currentTime=0,this.alerting=!1,this.level=1,this.nextLevelColor=this.layoutData.getNextLevelColor(this.level+1),this.updateProgressBar(),this.warningSignal.kill()},t.setTimeScale=function(e){this.timeScale=e},t.start=function(){this.levelUpByTime(),this.initEvents(),this.level=1},t.startNextLevel=function(){this.levelUpByTime()},t.initEvents=function(){this.scene.events.off("update",this.update,this),this.scene.events.on("update",this.update,this)},t.levelUpByTime=function(){this.isRunning=!0,this.isTakeOff=!1;var e=this.scene.registry.get("levelUpSetting");this.totalTime=e.timeInterval,this.alertMoment=this.totalTime-this.alertDuration,this.alerting=!1,this.currentTime=0,this.isTicktock=!1},t.update=function(e,t){this.isRunning&&(this.currentTime+=t*this.timeScale,this.currentTime>this.totalTime&&(this.currentTime=this.totalTime),!this.isTicktock&&this.currentTime>this.totalTime-3500&&(this.scene.audio.playSound(er.Z.TICKTOCK),this.scene.audio.playSound(er.Z.WHIRLEYSIREN,{delay:1.5}),this.isTicktock=!0),this.updateProgressBar(),this.currentTime===this.totalTime&&(this.isRunning=!1,this.alerting=!1,this.level<7&&(this.spawnFlyingDino(),this.startNextLevel())))},t.createWarningSignal=function(){var e=this.scene.gameZone.height;this.warningSignal=this.scene.add.image(270,e-132,hm,dm.WARNING_SIGNAL),this.warningSignal.setOrigin(.5,.5),this.warningSignal.setWorldSize(60,60),this.warningSignal.setVisible(!1),this.warningSignal.setDepth(_a.Z.EFFECT)},t.raiseWarningSignal=function(){var e=this;this.scene.audio.playSound(er.Z.WARNING),this.warningSignal.revive();var t=this.scene.add.tween({targets:this.warningSignal,duration:this.alertDuration,props:{alpha:{duration:this.alertDuration/6,repeat:2,value:{from:0,to:1},yoyo:!0}},onComplete:function(){e.warningSignal.kill(),t.remove()}})},t.createProgressBar=function(){var e=this.scene.gameZone.width,t=this.scene.registry.get("zones").zones;this.progressBar=new lm(this.scene,e-25,t.zone5.topY+70)},t.updateProgressBar=function(){var e=0===this.totalTime?0:this.currentTime/this.totalTime;this.currentTime>this.alertMoment&&!1===this.alerting&&(this.alerting=!0,this.raiseWarningSignal(),this.scene.vibrateController.handleAlertAboutFlyingDino(this.alertDuration)),this.progressBar.updateProgress(100*e)},t.spawnFlyingDino=function(){this.isTakeOff=!0,this.nextLevelColor=this.layoutData.getNextLevelColor(this.level+1);var e=this.flyingDinoPool.spawn(),t=this.scene.registry.get("zones").zones;e.setPosition(216.5,t.zone5.bottomY+20),e.takeOff(this.nextLevelColor)},t.levelUp=function(){this.level+=1,this.nextLevelColor=this.layoutData.getNextLevelColor(this.level+1),this.scene.registry.set("level",this.level),this.scene.events.emit("level-up")},t.setLayoutData=function(e){this.layoutData=e,this.nextLevelColor=this.layoutData.getNextLevelColor(this.level+1)},t.destroy=function(){this.scene&&(this.scene.events.off("update",this.update),this.scene.events.off("level-up"),this.progressBar.destroy(),this.isRunning=!1,this.warningSignal.destroy())},e}(),fm=pm,gm=function(){function e(e){var t=this;this.scene=void 0,this.floatingScorePool=void 0,this.gameData=void 0,this.baseScore=void 0,this.multiplierCombo=void 0,this.multiplierBonus=void 0,this.bonusMultiplierTimerEvent=void 0,this.countCollectBalls=void 0,this.totalDynamiteCombos=0,this.levelText=void 0,this.updateBaseScore=function(){var e=t.gameData.levelScores,n=t.scene.registry.get("level"),i=e[n-2]||0;t.baseScore+=i,GameCore.Utils.Valid.isDebugger()&&t.levelText.setText("level: "+n+". BaseScore: "+t.baseScore)},this.multiplierCombo=1,this.multiplierBonus=1,this.countCollectBalls=0,this.scene=e,this.gameData=this.scene.registry.get("gameData"),this.baseScore=this.gameData.baseScore,this.listenEvents(),GameCore.Utils.Valid.isDebugger()&&(this.levelText||(this.levelText=this.scene.add.text(20,400,""),this.levelText.setDepth(_a.Z.ON_TOP)),this.levelText.setText(""))}var t=e.prototype;return t.listenEvents=function(){this.scene.events.on("level-up",this.updateBaseScore)},t.setFloatingScorePool=function(e){this.floatingScorePool=e},t.addMultiplierBonusTimerEvent=function(e){var t=this;this.multiplierBonus>1&&this.removeMultiplierBonusTimerEvent(),this.multiplierBonus=e;var n=this.scene.registry.get("stampTimer");this.bonusMultiplierTimerEvent=this.scene.time.addEvent({delay:n,callback:function(){t.removeMultiplierBonusTimerEvent()}}),this.scene.events.emit(sd.TIMER_CREATED,this.bonusMultiplierTimerEvent)},t.removeMultiplierBonusTimerEvent=function(){var e;null==(e=this.bonusMultiplierTimerEvent)||e.remove(),this.bonusMultiplierTimerEvent=void 0,this.multiplierBonus=1,this.updateMultiplier()},t.updateMultiplier=function(){this.gameData.multiplier=this.multiplierCombo*this.multiplierBonus,this.scene.shooter.updateMultiplier()},t.increaseScore=function(e,t){var n=this.multiplierBonus,i=(t?this.gameData.baseScore:this.baseScore)*e*(t?1:this.multiplierCombo)*n;this.gameData.score+=i},t.updateCombosMultiplier=function(){var e=this.scene.registry.get("maxCombos");this.gameData.combosCount>1&&this.gameData.combosCount<e?this.multiplierCombo=this.gameData.combosCount:this.multiplierCombo=1,this.updateMultiplier()},t.processCombos=function(e){var t=this.scene.registry.get("maxCombos");e?this.gameData.combosCount<t?(this.gameData.combosCount+=1,this.handleCombosIncreased(this.gameData.combosCount)):this.gameData.combosCount=0:(this.gameData.combosCount=0,this.handleCombosIncreased(this.gameData.combosCount))},t.handleCombosIncreased=function(e){var t=this.scene.audio;switch(this.scene.vibrateController.handleCombosIncreased(e),e){case 3:t.playSound(er.Z.COMBO);break;case 4:t.playSound(er.Z.SUPER_COMBO);break;case 5:t.playSound(er.Z.CAMBRIAN_COMBO);break;case 6:t.playSound(er.Z.TRIASSIC_COMBO);break;case 7:t.playSound(er.Z.JURASSIC_COMBO);break;case 8:t.playSound(er.Z.CRETACEOUS_COMBO);break;case 9:t.playSound(er.Z.DYNOMITE_COMBO),this.totalDynamiteCombos+=1,this.scene.shooter.attachBomb(),this.scene.vibrateController.handleBombCreated()}},t.processStamp=function(e,t,n,i){switch(n.getStampType()){case op.Stamp5:this.increaseScore(5,!0),this.floatingScorePool.spawn(e,t-15,i,5*this.gameData.baseScore*this.multiplierBonus).setBigFloating().playAnimation();break;case op.Stamp10:this.increaseScore(10,!0),this.floatingScorePool.spawn(e,t-15,i,10*this.gameData.baseScore*this.multiplierBonus).setBigFloating().playAnimation();break;case op.Stamp15:this.increaseScore(15,!0),this.floatingScorePool.spawn(e,t-15,i,15*this.gameData.baseScore*this.multiplierBonus).setBigFloating().playAnimation();break;case op.Stamp2x:this.addMultiplierBonusTimerEvent(2);break;case op.Stamp3x:this.addMultiplierBonusTimerEvent(3);break;case op.Stamp4x:this.addMultiplierBonusTimerEvent(4);break;case op.StampUp:this.scene.descentController.handleUseStampUp()}n.kill(),this.updateMultiplier()},t.processBallDestroyed=function(e){var t=this;e.forEach((function(e){var n=e.takeStamp();n&&t.processStamp(e.x,e.y,n,e.getColor()),t.floatingScorePool.spawn(e.x,e.y,e.getColor(),t.baseScore*t.gameData.multiplier).playAnimation(),t.increaseScore(1)})),this.countCollectBalls+=e.length,this.scene.events.emit(sd.SCORE_CHANGED)},t.reset=function(){var e;this.multiplierCombo=1,this.multiplierBonus=1,null==(e=this.bonusMultiplierTimerEvent)||e.destroy(),this.bonusMultiplierTimerEvent=void 0},t.getScore=function(){return this.gameData.score},t.getTotalBallsCollected=function(){return this.countCollectBalls},t.getTotalDynamiteCombos=function(){return this.totalDynamiteCombos},e}(),mm=gm,vm=function(e){function t(t){var n;return(n=e.call(this,t)||this).startGame=function(){var e=n.scene;e.audio.playSound(er.Z.START_GAME),e.registry.set("log_level",1);var t=e.storage.getState(),i=os(t);e.gameModeManager.stop(),e.gameModeManager.setGameMode(i),e.startManager(),e.descentController.initialize(),e.shooter.initBullet(),e.events.once(sd.SHOOT_BALL,(function(){e.levelUpController.start(),e.grid.start(),e.descentController.begin(),n.scene.itemManager.start()}))},n.createNewGame(),t.time.delayedCall(400,(function(){return n.startGame()})),n}(0,o.Z)(t,e);var n=t.prototype;return n.createNewGame=function(){var e=this.scene;e.data.set("Mission",{totalFlyingDinos:0}),e.gameSettings.resetData(),e.data.set("life",GameCore.Configs.Gameplay.MaxRescueCount);var t=e.registry.get("zones").zones,n=e.gameZone.width;e.shooter=new zg(e,.5*n,t.zone5.topY+95);var i=new Og(e);i.setStampPool(e.stampPool),i.setBombPool(e.bombPool),e.ballLayoutData=i,e.shooter.setLayoutData(i),e.shooter.setBallPool(e.bulletBallPool),e.grid=new wg(e,e.gridBallPool),e.grid.setLayoutData(i),i.setBallGrid(e.grid),e.shotGuide.setBallGrid(e.grid),e.shooter.setGuide(e.shotGuide),e.descentController=new am(e,e.grid),e.levelUpController=new fm(e),e.levelUpController.setLayoutData(i),e.levelUpController.setFlyingDinoPool(e.flyingDinoPool),e.scoreCounter=new mm(e),e.scoreCounter.setFloatingScorePool(e.floatingScorePool),this.listenEvents(),e.footer.playCharacterAnimation()},n.listenEvents=function(){var e=this;this.scene.events.off(sd.TIMER_CREATED),this.scene.events.on(sd.TIMER_CREATED,(function(t){e.scene.timerEvents.push(t)}))},n.ready=function(){},n.play=function(){this.scene.pauseButton.revive();var e=new em(this.scene);this.scene.stateManager.transitionTo(e)},n.pause=function(){},n.rescue=function(){},n.gameOver=function(){},n.quit=function(){var e=new Vg(this.scene);this.scene.stateManager.transitionTo(e)},n.update=function(e){},t}(vg),ym=vm,Em=function(){var e=(0,s.Z)(h().mark((function e(t,n){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new(l())((function(e){t.time.delayedCall(n,e)})));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),Am=Em,Sm=GameCore.Configs.Tournament.RequestTournamentBeforeInterstitialAd,bm=GameCore.Configs.Network,Tm=function(e){function t(t){var n;return(n=e.call(this,t)||this).adsTimer=void 0,n.handleShowInterstitialAd=(0,s.Z)(h().mark((function e(){var t;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.scene,e.next=3,n.handleShowAdWhenGameOver();case 3:t.gameOverScreen.once(GameCore.Screens.Events.CLOSE,n.handleFinishGame),t.gameOverScreen.closePopup();case 5:case"end":return e.stop()}}),e)}))),n.handleShowAdWhenGameOver=(0,s.Z)(h().mark((function e(){var t,i;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!1!==(t=n.scene).ads.canbeShowInterstitialAd()){e.next=3;break}return e.abrupt("return");case 3:return window.ignoreResumeMusicOnFocus=!0,t.audio.stopAllSounds(),t.audio.pauseMusic(),t.audio.muteAll(),e.prev=7,window.game.globalScene.screen.open(Da.o4.NOTIFY_SCREEN,{message:n.scene.lang.Text.LOADING_ADS,duration:0,loading:!0}),e.next=11,new(l())((function(e,t){var i;null==(i=n.adsTimer)||i.remove(),n.adsTimer=n.scene.time.delayedCall(bm.Timeout,t),n.scene.ads.getAdStatus(GameCore.Ads.Types.INTERSTITIAL)===GameCore.Ads.Status.LOADING?n.scene.ads.events.once(GameCore.Ads.Events.LOADED,e):n.scene.ads.preloadInterstitialAdAsync().then(e).catch(t)}));case 11:return e.next=13,t.ads.showInterstitialAdAsync();case 13:e.next=17;break;case 15:e.prev=15,e.t0=e.catch(7);case 17:return e.prev=17,null==(i=n.adsTimer)||i.remove(),window.game.globalScene.screen.close(Da.o4.NOTIFY_SCREEN),t.ads.preloadInterstitialAdAsync().catch((function(){})),e.finish(17);case 22:window.ignoreResumeMusicOnFocus=!1,t.audio.unmuteAll(),t.audio.playMusic();case 25:case"end":return e.stop()}}),e,null,[[7,15,17,22]])}))),n.handleFinishGame=function(){var e=n.scene;e.storage.dispatch(function(){var e=(0,s.Z)(h().mark((function e(t,n){var a,r,s,o,c,l,u,d,p,f,g,m;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a=window.game,r=a.analytics,a.facebook,a.globalScene.screen.open(Da.o4.NOTIFY_SCREEN,{message:window.game.lang.Text.LOADING,loading:!0}),s=n(),o=os(s),c=Ms(s),l=c.score,u=void 0===l?0:l,d=c.level,p=void 0===d?0:d,!1===GameCore.Configs.Tournament.RequestTournamentBeforeInterstitialAd&&t(vs(u)),t(Ro(u)),e.next=11,t(_o(o,{score:u}));case 11:s=n(),f=cs(s),g=ls(s),m=Math.floor((g-f)/1e3),r.event(Ht._.MATCH_END,{game_mode:GameCore.Utils.String.toUpperCamelCase(o),level:p,level_name:"level_"+p,time_played:m}),e.next=21;break;case 18:e.prev=18,e.t0=e.catch(0),(0,i.tO)(e.t0);case 21:return e.prev=21,To(300),e.finish(21);case 24:case"end":return e.stop()}}),e,null,[[0,18,21,24]])})));return function(t,n){return e.apply(this,arguments)}}()),e.input.enabled=!0,n.updateDailyMission()},n.scene.itemManager.stop(),n.handleGameOver(),n}(0,o.Z)(t,e);var n=t.prototype;return n.handleGameOver=function(){var e=(0,s.Z)(h().mark((function e(){var t,n,i,a,r;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=this.scene).input.enabled=!1,null==(t=n.grid)||t.dropAllBalls(),n.shooter.hideShotGuide(),n.levelUpController.pause(),i=n.registry.get("log_level"),a=n.registry.get("gameData"),r=a.score,n.analytics.levelFail(i,r,"level_"+i),n.events.emit(sd.GAME_OVER),e.next=11,Am(n,1500);case 11:return n.audio.playSound(er.Z.GAMEOVER),n.screen.open(Da.o4.GAME_OVER_SCREEN),e.next=15,Am(n,1500);case 15:if(!0!==Sm){e.next=18;break}return e.next=18,n.storage.dispatch(vs(r));case 18:this.handleShowInterstitialAd();case 19:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.updateDailyMission=function(){this.emitTaskCompleteGame(),this.emitTaskCollectEggs(),this.emitTaskGetDynamiteCombo(),this.emitTaskUseRescue(),this.emitTaskHitFlyingDino(),this.emitTaskReachTargetPoints()},n.emitTaskCompleteGame=function(){Lo.emit(gr.COMPLETE_GAMES.EVENTS.COMPLETE_GAME,{type:"complete-game",value:1})},n.emitTaskCollectEggs=function(){var e=this.scene.scoreCounter.getTotalBallsCollected();e>0&&Lo.emit(gr.COLLECT_EGGS.EVENTS.COLLECT_EGGS,{type:"egg",value:e})},n.emitTaskGetDynamiteCombo=function(){var e=this.scene.scoreCounter.getTotalDynamiteCombos();e>0&&Lo.emit(gr.GET_DINOMITE_COMBO.EVENTS.GET_DINOMITE_COMBO,{type:"dinomite-combo",value:e})},n.emitTaskUseRescue=function(){var e=this.scene.rescueScreen.getTotalUseRescue();e>0&&Lo.emit(gr.USE_RESCUE.EVENTS.USE_RESCUE,{type:"use-rescue",value:e})},n.emitTaskHitFlyingDino=function(){var e=this.scene.data.get("Mission").totalFlyingDinos;e>0&&Lo.emit(gr.SHOOT_FLYING_EGG.EVENTS.SHOOT_FLYING_EGG,{type:"flying-eggs",value:e})},n.emitTaskReachTargetPoints=function(){var e=this.scene.game.storage.getState(),t=Wo(e);if(t&&!((null==t?void 0:t.length)<1)){var n=k()(t).call(t,(function(e){return e.id===gr.REACH_TARGET_POINTS.ID}));if(n){var i=n.require,a=J()(n.require);if(-1!==xt()(a).call(a,"score")){var r=i.score,s=this.scene.registry.get("gameData").score;!r||r>=s||Lo.emit(gr.REACH_TARGET_POINTS.EVENTS.REACH_TARGET_POINTS,{type:"score",value:r})}}}},n.ready=function(){var e=new ym(this.scene);this.scene.stateManager.transitionTo(e)},n.play=function(){},n.pause=function(){},n.rescue=function(){},n.gameOver=function(){},n.quit=function(){var e=new Vg(this.scene);this.scene.stateManager.transitionTo(e)},n.update=function(e){},t}(vg),wm=Tm,Cm=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n.gameState=void 0,n.ready=function(){n.gameState.ready()},n.play=function(){n.gameState.play()},n.pause=function(){n.gameState.pause()},n.rescue=function(){n.gameState.rescue()},n.gameOver=function(){n.gameState.gameOver()},n.quit=function(){n.gameState.quit()},n.update=function(e){n.gameState.update(e)},n.isGameOver=function(){return n.gameState instanceof wm},n.scene=t,n}(0,o.Z)(t,e);var n=t.prototype;return n.transitionTo=function(e){this.gameState=e},n.init=function(){if(!this.gameState){var e=new ym(this.scene);this.transitionTo(e)}this.gameState.ready()},n.isPlaying=function(){return this.gameState instanceof em},t}(Od),Im=Cm,Pm=function(e){if(GameCore.Utils.Valid.isDebugger()){var t=Ka.Z.DEFAULT,n=t.KEY,i=t.FRAME,a=new Va.Z(e,n,i.BUTTON_CLOSE,48.5,43);a.setAlpha(.3),a.onClick=e.stateManager.rescue,Phaser.Display.Align.In.RightCenter(a,e.header,-10,0);var r=new Va.Z(e,n,i.BUTTON_BLUE,40,40),s=!1;r.setAlpha(.6),r.onClick=function(){s?(e.descentController.setSpeedScale(1),s=!1,r.setAlpha(.6)):(e.descentController.setSpeedScale(10),s=!0,r.setAlpha(1))},Phaser.Display.Align.In.BottomRight(r,e.header,-10,60);var o=new Va.Z(e,n,i.BUTTON_GREEN,40,40),c=!1;o.setAlpha(.6),o.onClick=function(){c?(e.levelUpController.setTimeScale(1),c=!1,o.setAlpha(.6)):(e.levelUpController.setTimeScale(4),c=!0,o.setAlpha(1))},Phaser.Display.Align.In.BottomRight(o,e.header,-10,100);var l=e.make.bitmapText({font:$a.Z.PRIMARY.KEY,size:e.fontSize(15),text:"speed: 0",origin:{x:0,y:.5}});l.setDepth(_a.Z.BUTTON),Phaser.Display.Align.In.LeftCenter(l,e.gameZone,-5,-5),e.events.on("update",(function(){var t,n=Math.round(10*(null==(t=e.descentController)?void 0:t.getSpeed())||0)/10;l.setText("speed: "+n)}));var u=e.make.bitmapText({font:$a.Z.PRIMARY.KEY,size:e.fontSize(15),text:"speed: 0",origin:{x:0,y:.5}});u.setDepth(_a.Z.BUTTON),Phaser.Display.Align.In.LeftCenter(u,e.gameZone,-5,-20),e.events.on("update",(function(){var t=Math.round(e.grid.bottomY||0);u.setText("bottom Y: "+t)}));var h=e.make.bitmapText({font:$a.Z.PRIMARY.KEY,size:e.fontSize(10),text:'Message: ""',origin:{x:0,y:0},alpha:.7});h.setDepth(_a.Z.BUTTON),Phaser.Display.Align.In.LeftCenter(h,e.gameZone,-5,10);var d=e.add.container(0,0);d.add([a,r,o,l,u,h]),d.setVisible(!1),d.setDepth(_a.Z.BUTTON);var p=new Va.Z(e,n,i.BLANK,40,40);p.onClick=function(){d.setVisible(!d.visible)},p.setAlpha(.005),Phaser.Display.Align.In.BottomLeft(p,e.gameZone,0,-50)}},xm=Ka.Z.GAMEPLAY.GAMEPLAY_TEXTURES,km=xm.KEY,Om=xm.FRAME,Rm=function(e){function t(t){var n;return(n=e.call(this,t,km)||this).setDepth(_a.Z.SPRITES),n.scene.add.existing((0,Na.Z)(n)),n}return(0,o.Z)(t,e),t.prototype.createTailEmitter=function(){var e=1/this.scene.world.getPixelRatio(),t={x:200,y:200,frame:[Om.PARTICLE_STAR,Om.PARTICLE_CIRCLE_1,Om.PARTICLE_CIRCLE_2],angle:{min:45,max:135},scale:{start:e,end:0},alpha:{start:.7,end:0},speed:{min:50,max:100},frequency:20,quantity:5,tint:16777215,lifespan:{min:500,max:1500},on:!1};return this.createEmitter(t)},t}(Phaser.GameObjects.Particles.ParticleEmitterManager),Bm=Rm,_m=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n.handleBallHitGrid=function(e,t){return e instanceof Kd&&(t instanceof Jd&&(e.body.enable&&t.body.enable?(e.body.enable=!1,e.setVisible(!1),n.scene.time.delayedCall(0,(function(){n.scene.grid.attachBall(e,t),e.preKill()})),!0):void 0))},n.handleBombHitGrid=function(e,t){if(!(e instanceof ip))return!1;if(!(t instanceof Jd))return!1;var i=n.scene;return n.scene.time.delayedCall(0,(function(){e.body.enable&&(i.animationsManager.handleBombWillBeDestroyed(e),n.scene.vibrateController.handleBombexploding(),e.makeExplosion(),i.audio.playSound(er.Z.BOMB_EXPLODE),i.time.delayedCall(130,(function(){i.descentController.handleBombExplode()}))),e.body.enable=!1,e.fromGift||n.scene.scoreCounter.processCombos(!0),i.grid.destroyNeighBors(e.x,e.y,t)})),!0},n.handleBallHitFlyingDino=function(e,t){var i=n.scene;if(!(t instanceof Kd))return!1;var a=e.parentContainer;if(!a||!(a instanceof fg))return!1;if(!t.body.enable)return!1;i.data.get("Mission").totalFlyingDinos+=1;var r=i.gridBallPool.spawn(a.x,a.y,a.getCurrentColor());return i.animationsManager.handleBallsWillBeDestroyed([t,r]),t.preKill(),r.kill(),i.descentController.handleFlyingDinoExploded(),i.audio.playSound(er.Z.WHIRLEY_HIT),a.fly(),!0},n.handleBombHitFlyingDino=function(e,t){var i=n.scene,a=e.body;if(!(a instanceof Phaser.Physics.Arcade.Body)||a.enable){var r=e.parentContainer;if(!r||!(r instanceof fg))return!1;var s=i.gridBallPool.spawn(r.x,r.y,r.getCurrentColor());return n.scene.animationsManager.handleBallsWillBeDestroyed([s]),s.kill(),i.descentController.handleFlyingDinoExploded(),i.audio.playSound(er.Z.WHIRLEY_HIT),r.fly(),!0}},n.scene=t,n}(0,o.Z)(t,e);var n=t.prototype;return n.init=function(){this.addCollision()},n.addCollision=function(){var e=this.scene,t=e.physics;t.add.collider(e.bulletBallPool,e.gridBallPool,this.handleBallHitGrid),t.add.collider(e.bombPool,e.gridBallPool,this.handleBombHitGrid),t.add.overlap(e.flyingDinoPool.getPhysicsObjects(),e.bulletBallPool,this.handleBallHitFlyingDino),t.add.overlap(e.flyingDinoPool.getPhysicsObjects(),e.bombPool,this.handleBombHitFlyingDino,void 0,e)},t}(Od),Dm=_m,Nm=Ka.Z.GAMEPLAY.GAMEPLAY_TEXTURES,Lm=Nm.KEY,Mm=Nm.FRAME,Gm=function(e){function t(t){var n;return(n=e.call(this,t,Lm)||this).emitter1=void 0,n.emitter2=void 0,n.setDepth(_a.Z.SPRITES),n.scene.add.existing((0,Na.Z)(n)),n.createExplodeAnimation1(),n.createExplodeAnimation2(),n}(0,o.Z)(t,e);var n=t.prototype;return n.createExplodeAnimation1=function(){var e,t,n=1/this.scene.world.getPixelRatio(),i={frame:Ie()(e=vr()(t=Array(6)).call(t,null)).call(e,(function(e,t){return Mm.BOMB_FRAGMENT+(t+1)})),lifespan:750,accelerationY:50,angle:{start:0,end:360,steps:34},speed:{start:20,end:120,steps:8},alpha:{start:1,end:.1},scale:{min:.2*n,max:.5*n},on:!1};this.emitter1=this.createEmitter(i),this.emitter1.setTint(16403978)},n.createExplodeAnimation2=function(){var e,t,n=Ka.Z.GAMEPLAY.GAMEPLAY_TEXTURES.FRAME,i=1/this.scene.world.getPixelRatio(),a={frame:Ie()(e=vr()(t=Array(6)).call(t,null)).call(e,(function(e,t){return n.BOMB_FRAGMENT+(t+1)})),lifespan:750,speed:{min:20,max:80},angle:{start:0,end:360,steps:18},alpha:{start:1,end:.2},scale:{start:1.2*i,end:.6*i},on:!1};this.emitter2=this.createEmitter(a)},n.explode=function(e,t){this.emitter1.explode(170,e,t),this.emitter2.explode(15,e,t)},n.stop=function(){this.emitter1.killAll(),this.emitter2.killAll()},t}(Phaser.GameObjects.Particles.ParticleEmitterManager),Fm=Gm,Zm=n(441),Um=n.n(Zm),Ym=Ka.Z.GAMEPLAY.GAMEPLAY_TEXTURES,Hm=Ym.KEY,zm=Ym.FRAME,Wm=function(e){function t(t){var n;return(n=e.call(this,t,Hm)||this).explosiveEmitters=void 0,n.setDepth(_a.Z.BULLET),n.explosiveEmitters=new(Um()),n.scene.add.existing((0,Na.Z)(n)),n}(0,o.Z)(t,e);var n=t.prototype;return n.createOneEmitter=function(e){var t,n,i=1/this.scene.world.getPixelRatio(),a=new Phaser.Geom.Circle(0,0,10),r={frame:Ie()(t=vr()(n=Array(6)).call(n,null)).call(t,(function(e,t){return zm.EGG_SHELL+(t+1)})),lifespan:{min:500,max:750},speedY:{min:-60,max:0},speedX:{min:-60,max:60},angle:{min:0,max:360},accelerationY:130,quantity:15,alpha:{start:1,end:.5},scale:{min:.5*i,max:1.2*i},emitZone:{type:"random",source:a},on:!1},s=this.createEmitter(r);return s.setTint(e),this.explosiveEmitters.set(e,s),s},n.explode=function(e,t,n){var i=this.explosiveEmitters.get(n);i||(i=this.createOneEmitter(n)),i.explode(4,e,t)},t}(Phaser.GameObjects.Particles.ParticleEmitterManager),Vm=Wm,Km=function(e){function t(t){var n;return(n=e.call(this,t)||this).eggExplosiveParticle=void 0,n.eggExplosiveParticle=new Vm(t),n.init(),n}(0,o.Z)(t,e);var n=t.prototype;return n.init=function(){var e,t,n=this;Ie()(e=vr()(t=Array(50)).call(t,null)).call(e,(function(){return n.get(0,0)})).forEach((function(e){e.setVisible(!1),e.setActive(!1)}))},n.spawn=function(e,t,n){var i=this.get(e,t),a=1/this.scene.world.getPixelRatio();return i.setScale(a).setTint(n).setActive(!0).setVisible(!0).setDepth(_a.Z.BALL_AND_TAIL),i},n.explode=function(e,t,n){var i=this,a=1/this.scene.world.getPixelRatio()*1.15,r=this.spawn(e,t,n).setAlpha(1).setScale(a).setDepth(_a.Z.BULLET).play("egg-explosive");r.once(Phaser.Animations.Events.ANIMATION_COMPLETE,(function(){i.despawn(r)})),this.eggExplosiveParticle.explode(e,t,n)},n.despawn=function(e){this.killAndHide(e)},t}(Phaser.GameObjects.Group),jm=Km,Xm=Pd.STATUS,qm=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n.explosivePool=void 0,n.paperFireworksCelebration=void 0,n.bombExplosionParticle=void 0,n.handleOrphanBallWillBeDestroyed=function(e){n.handleBallWillBeDestroyed(e),n.scene.audio.playSound(er.Z.DROP_FLOOR)},n.handleBallsWillBeDestroyed=function(e){e.forEach((function(e){n.handleBallWillBeDestroyed(e)})),n.scene.audio.playSound(er.Z.EGG_EXPLODE,{volume:.8})},n.handleBallWillBeDestroyed=function(e){n.explosivePool.explode(e.x,e.y,e.getColor())},n.handleBombWillBeDestroyed=function(e){n.bombExplosionParticle.explode(e.x,e.y)},n.handleDestroyedLotsEgg=function(){var e=n.scene.gameZone,t=e.width,i=e.height;n.paperFireworksCelebration.run(-5,i+20,t+20,.8*i),n.scene.audio.playSound(er.Z.DESTROYED_LOTS_EGG),n.scene.footer.makeTheDinoHappy()},n.scene=t,n}(0,o.Z)(t,e);var n=t.prototype;return n.init=function(){var e=this.scene;this.explosivePool=new jm(e),this.paperFireworksCelebration=new Vu.Z(e),this.paperFireworksCelebration.setDepth(_a.Z.ON_TOP),this.bombExplosionParticle=new Fm(e),this.setState(Xm.READY)},n.start=function(){this.isRunning()||(this.paperFireworksCelebration.revive(),this.bombExplosionParticle.revive(),this.setState(Xm.RUNNING))},n.stop=function(){this.isRunning()&&(this.paperFireworksCelebration.stop(),this.bombExplosionParticle.stop(),this.setState(Xm.STOPPED))},t}(Od),Jm=qm,Qm={GIFT:{ID:"ItemGift"}},$m=Ka.Z.GAMEPLAY.GAMEPLAY_TEXTURES.KEY,ev=function(e){function t(t,n,i,a){var r;return(r=e.call(this,t)||this).scene=void 0,r.isActive=!0,r.item=void 0,r.shakeAnimation=void 0,r.scene=t,r.createItem(n,i,a),r.createAnimations(),r.setDepth(_a.Z.ITEM),r.scene.add.existing((0,Na.Z)(r)),r}(0,o.Z)(t,e);var n=t.prototype;return n.activeItem=function(){this.isActive=!0},n.deactivateItem=function(){this.isActive=!1},n.createAnimations=function(){this.shakeAnimation=new Za.Z({targets:[this.item],repeat:3,props:{x:4}})},n.createItem=function(e,t,n){this.item=this.scene.add.image(0,0,$m,e),this.item.setWorldSize(t,n),this.add(this.item)},n.logButtonEvent=function(){var e=this.getParentName(),t=this.name;this.scene.analytics.event(Ht._.BUTTON_CLICK,{button_name:t,screen_name:e})},n.getParentName=function(){for(var e=this.parentContainer;e;){if(e instanceof GameCore.Screen)return e.getScreenName();e=e.parentContainer}return this.scene.getSceneName()},(0,te.Z)(t,[{key:"onClick",set:function(e){var t=this,n=this.item,i=n.width,a=n.height;this.setSize(i,a),this.setInteractive({useHandCursor:!0}),this.on(Phaser.Input.Events.GAMEOBJECT_POINTER_UP,(function(){e(),t.logButtonEvent()}))}}]),t}(Phaser.GameObjects.Container),tv=ev,nv=Ka.Z.GAMEPLAY.GAMEPLAY_TEXTURES,iv=nv.KEY,av=nv.FRAME,rv=GameCore.Configs,sv=rv.Network,ov=rv.Gameplay.ItemConfig.giftTime,cv=function(e){function t(t){var n;return(n=e.call(this,t,av.ITEM_GIF_CLOSE,39,47.5)||this).scene=void 0,n.timer=void 0,n.giftTime=void 0,n.timeCount=void 0,n.isGiftOpen=void 0,n.adsTimer=void 0,n.glowEffect=void 0,n.glowAnimation=void 0,n.starTwinkleUp=void 0,n.giftOpenAnimation=void 0,n.countDownText=void 0,n.handleClickGiftItem=function(){n.isGiftOpen?n.useGiftItem():n.shakeAnimation.play()},n.startCountdown=function(){var e;if(n.scene.itemManager.isRunning()){null==(e=n.timer)||e.remove(),n.timeCount=0,n.countDownText.revive();var t=(0,yr.F0)(n.giftTime,!1);n.countDownText.setText(t),n.timer=n.scene.time.addEvent({loop:!0,delay:1e3,callback:function(){n.timeCount+=1e3;var e,t=n.giftTime-n.timeCount;if(t<=0)return null==(e=n.timer)||e.remove(),n.countDownText.kill(),void n.setGiftOpen();var i=(0,yr.F0)(t,!1);n.countDownText.setText(i)}}),n.scene.timerEvents.push(n.timer)}},n.useGiftItem=(0,s.Z)(h().mark((function e(){var t;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.scene){e.next=2;break}return e.abrupt("return");case 2:return n.scene.stateManager.pause(),e.next=5,n.showRewardAd();case 5:t=e.sent,n.scene.stateManager.play(),t?n.handleReceiveGift():n.activeItem();case 8:case"end":return e.stop()}}),e)}))),n.handleReceiveGift=function(){n.scene.tweens.killTweensOf(n.item),n.scene.shooter.attachBomb(!0),n.activeItem()},n.showRewardAd=(0,s.Z)(h().mark((function e(){var t,i,a,r,s;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=!1,i=n.scene,a=i.audio,r=i.game,e.prev=2,r.globalScene.screen.open(Da.o4.NOTIFY_SCREEN,{message:n.scene.lang.Text.LOADING,duration:0,loading:!0}),window.ignoreResumeMusicOnFocus=!0,a.stopAllSounds(),a.pauseMusic(),a.muteAll(),e.next=10,new(l())((function(e,t){var i;null==(i=n.adsTimer)||i.remove(),n.adsTimer=n.scene.time.delayedCall(sv.Timeout,t),n.scene.ads.getAdStatus(GameCore.Ads.Types.REWARDED)===GameCore.Ads.Status.LOADING?n.scene.ads.events.once(GameCore.Ads.Events.LOADED,e):n.scene.ads.preloadRewardedVideoAsync().then(e).catch(t)}));case 10:return e.next=12,n.scene.ads.showRewardedVideoAsync();case 12:t=!0,e.next=22;break;case 15:return e.prev=15,e.t0=e.catch(2),r.globalScene.screen.close(Da.o4.NOTIFY_SCREEN),e.t0 instanceof Object&&GameCore.Utils.Object.hasOwn(e.t0,"code")&&"USER_INPUT"===e.t0.code&&n.showNotifySkipAd(),n.showNotifyNoAd(),e.next=22,Am(n.scene,800);case 22:return e.prev=22,window.ignoreResumeMusicOnFocus=!1,n.scene.ads.preloadRewardedVideoAsync().catch((function(){})),r.globalScene.screen.close(Da.o4.NOTIFY_SCREEN),null==(s=n.adsTimer)||s.destroy(),a.unmuteAll(),a.playMusic(),e.finish(22);case 30:return e.abrupt("return",t);case 31:case"end":return e.stop()}}),e,null,[[2,15,22,30]])}))),n.showNotifyNoAd=function(e){e&&e.name!==Da.o4.NOTIFY_SCREEN||n.scene.game.globalScene.screen.open(Da.o4.NOTIFY_SCREEN,{message:n.scene.lang.Text.NO_ADS,duration:800,loading:!1})},n.showNotifySkipAd=function(){n.scene.game.globalScene.screen.open(Da.o4.NOTIFY_SCREEN,{message:"Sorry, No Rewards!\nYou have cancelled the ad!",duration:800,loading:!1})},n.scene=t,n.setName("GiftBomb"),n.giftTime=ov,n.timeCount=0,n.onClick=n.handleClickGiftItem,n.createGlowEffect(),n.createStarEffect(),n.createCountdownText(),n.setGiftClose(),n.kill(),n}(0,o.Z)(t,e);var n=t.prototype;return n.createCountdownText=function(){this.countDownText=this.scene.make.bitmapText({font:$a.Z.PRIMARY.KEY,size:this.scene.fontSize(14),origin:{x:.5,y:.5}}),this.countDownText.setY(26),this.add(this.countDownText)},n.activeItem=function(){this.revive(),e.prototype.activeItem.call(this),this.setGiftClose(),this.startCountdown(),this.runEnterAnimation()},n.deactivateItem=function(){e.prototype.deactivateItem.call(this),this.setGiftClose(),this.stopCountdown(),this.kill()},n.stopCountdown=function(){var e;null==(e=this.timer)||e.remove(),this.countDownText.kill()},n.createGlowEffect=function(){this.glowEffect=this.scene.make.image({key:iv,frame:av.ITEM_GLOW_EFFECT}),this.glowEffect.setWorldSize(87,85.5),this.add(this.glowEffect),this.moveBelow(this.glowEffect,this.item)},n.createStarEffect=function(){this.starTwinkleUp=new ir.Z(this.scene),this.add(this.starTwinkleUp)},n.runEnterAnimation=function(){new Ya.Z({targets:[this]}).play()},n.runGiftOpenAnimation=function(){var e;null==(e=this.giftOpenAnimation)||e.remove(),this.giftOpenAnimation=this.scene.tweens.add({targets:[this.item],duration:500,loop:-1,yoyo:!0,ease:Phaser.Math.Easing.Sine.Out,props:{y:-2}})},n.runGlowEffect=function(){var e;this.glowEffect.revive(),null==(e=this.glowAnimation)||e.remove(),this.glowAnimation=new nu.Z({targets:[this.glowEffect],repeat:-1,duration:12e3}),this.glowAnimation.play()},n.setGiftClose=function(){var e;this.isGiftOpen=!1,null==(e=this.giftOpenAnimation)||e.remove(),this.glowEffect.kill(),this.item.setFrame(av.ITEM_GIF_CLOSE),this.item.setWorldSize(32,39.5),this.starTwinkleUp.stop()},n.setGiftOpen=function(){if(this.scene.itemManager.isRunning()){this.isGiftOpen=!0,this.item.setFrame(av.ITEM_GIFT_BOMB),this.item.setWorldSize(54,60.5),this.runGlowEffect(),this.runGiftOpenAnimation();var e=this.item,t=e.x,n=e.y,i=e.width,a=e.height;this.starTwinkleUp.run(2,t,n,i,a)}},t}(tv),lv=cv,uv=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n.items={},n.start=function(){e.prototype.start.call((0,Na.Z)(n)),n.items[Qm.GIFT.ID].activeItem()},n.stop=function(){e.prototype.stop.call((0,Na.Z)(n)),n.items[Qm.GIFT.ID].deactivateItem()},n.scene=t,n.createItems(),n}(0,o.Z)(t,e);var n=t.prototype;return n.createItems=function(){this.createGiftItem()},n.getItem=function(e){return this.items[e]},n.createGiftItem=function(){var e=new lv(this.scene);this.items[Qm.GIFT.ID]=e,this.scene.footer.add(e),e.setPosition(-150,15)},t}(Od),hv=uv,dv=n(422),pv="How about diving into the game for a relaxing experience?",fv=GameCore.Configs.Notification.DailyNotificationMessages,gv=void 0===fv?{}:fv,mv=function(){function e(){}e.sendNewUserNotification=function(){var e=(0,s.Z)(h().mark((function e(){var t;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.getInstance(),e.abrupt("return",t.sendNewUserNotificationInstance());case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),e.sendDailyNotification=function(){var e=(0,s.Z)(h().mark((function e(){var t;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.getInstance(),e.abrupt("return",t.sendDailyNotificationInstance());case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),e.sendTestDailyNotification=function(){var e=(0,s.Z)(h().mark((function e(t){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.getInstance();case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),e.getInstance=function(){return this._instance||(this._instance=new e),this._instance};var t=e.prototype;return t.sendNewUserNotificationInstance=function(){var e=(0,s.Z)(h().mark((function e(){var t,n,i,a,r,s;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=window.game,n=t.player,i=t.facebook,a=t.rollbar,e.prev=1,n.getPlayerIsNew()){e.next=5;break}return e.abrupt("return");case 5:if(n.getPlayerASID()){e.next=8;break}return e.abrupt("return");case 8:return e.next=10,FBInstant.player.getDataAsync(["isNotificationFirstSent"]);case 10:if(e.t0=e.sent,e.t0){e.next=13;break}e.t0={};case 13:if(r=e.t0,!0!==r.isNotificationFirstSent){e.next=17;break}return e.abrupt("return");case 17:return s={message:pv,delayTime:14400,type:dv.Z.NEW_USER_NOTIFICATION},e.next=20,i.sendNotificationAsync(s);case 20:FBInstant.player.setDataAsync({isNotificationFirstSent:!0}),e.next=26;break;case 23:e.prev=23,e.t1=e.catch(1),a.sendException(e.t1);case 26:case"end":return e.stop()}}),e,null,[[1,23]])})));return function(){return e.apply(this,arguments)}}(),t.sendDailyNotificationInstance=function(){var e=(0,s.Z)(h().mark((function e(){var t,n,i;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=window.game.rollbar,e.prev=1,n=new Date,i=n.getDay(),e.t0=i,e.next=0===e.t0?7:1===e.t0?10:2===e.t0?13:3===e.t0?16:4===e.t0?19:22;break;case 7:return e.next=9,this.sendMondayNotification();case 9:return e.abrupt("break",22);case 10:return e.next=12,this.sendTuesdayNotification();case 12:return e.abrupt("break",22);case 13:return e.next=15,this.sendWednesdayNotification();case 15:return e.abrupt("break",22);case 16:return e.next=18,this.sendThursdayNotification();case 18:return e.abrupt("break",22);case 19:return e.next=21,this.sendFridayNotification();case 21:return e.abrupt("break",22);case 22:return e.next=24,this.sendSaturdayNotification();case 24:return e.next=26,this.sendSundayNotification();case 26:e.next=31;break;case 28:e.prev=28,e.t1=e.catch(1),t.sendException(e.t1);case 31:case"end":return e.stop()}}),e,this,[[1,28]])})));return function(){return e.apply(this,arguments)}}(),t.sendMondayNotification=function(){var e=(0,s.Z)(h().mark((function e(){var t,n,i,a,r;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=window.game,n=t.facebook,i=t.rollbar,e.prev=1,r={message:null!=(a=gv.MONDAY)?a:pv,delayTime:86400,type:dv.Z.MONDAY_NOTIFICATION},e.next=5,n.sendNotificationAsync(r);case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),i.sendException(e.t0);case 10:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(){return e.apply(this,arguments)}}(),t.sendTuesdayNotification=function(){var e=(0,s.Z)(h().mark((function e(){var t,n,i,a,r;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=window.game,n=t.facebook,i=t.rollbar,e.prev=1,r={message:null!=(a=gv.TUESDAY)?a:pv,delayTime:86400,type:dv.Z.TUESDAY_NOTIFICATION},e.next=5,n.sendNotificationAsync(r);case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),i.sendException(e.t0);case 10:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(){return e.apply(this,arguments)}}(),t.sendWednesdayNotification=function(){var e=(0,s.Z)(h().mark((function e(){var t,n,i,a,r;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=window.game,n=t.facebook,i=t.rollbar,e.prev=1,r={message:null!=(a=gv.WEDNESDAY)?a:pv,delayTime:86400,type:dv.Z.WEDNESDAY_NOTIFICATION},e.next=5,n.sendNotificationAsync(r);case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),i.sendException(e.t0);case 10:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(){return e.apply(this,arguments)}}(),t.sendThursdayNotification=function(){var e=(0,s.Z)(h().mark((function e(){var t,n,i,a,r;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=window.game,n=t.facebook,i=t.rollbar,e.prev=1,r={message:null!=(a=gv.THURSDAY)?a:pv,delayTime:86400,type:dv.Z.THURSDAY_NOTIFICATION},e.next=5,n.sendNotificationAsync(r);case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),i.sendException(e.t0);case 10:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(){return e.apply(this,arguments)}}(),t.sendFridayNotification=function(){var e=(0,s.Z)(h().mark((function e(){var t,n,i,a,r;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=window.game,n=t.facebook,i=t.rollbar,e.prev=1,r={message:null!=(a=gv.FRIDAY)?a:pv,delayTime:86400,type:dv.Z.FRIDAY_NOTIFICATION},e.next=5,n.sendNotificationAsync(r);case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),i.sendException(e.t0);case 10:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(){return e.apply(this,arguments)}}(),t.sendSaturdayNotification=function(){var e=(0,s.Z)(h().mark((function e(){var t,n,i,a,r,s;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=window.game,n=t.facebook,i=t.rollbar,e.prev=1,r=this.findDelayTimeForNextDay(6,10),s={message:null!=(a=gv.SATURDAY)?a:pv,delayTime:r,type:dv.Z.SATURDAY_NOTIFICATION},e.next=6,n.sendNotificationAsync(s);case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),i.sendException(e.t0);case 11:case"end":return e.stop()}}),e,this,[[1,8]])})));return function(){return e.apply(this,arguments)}}(),t.sendSundayNotification=function(){var e=(0,s.Z)(h().mark((function e(){var t,n,i,a,r,s;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=window.game,n=t.facebook,i=t.rollbar,e.prev=1,r=this.findDelayTimeForNextDay(0,10),s={message:null!=(a=gv.SUNDAY)?a:pv,delayTime:r,type:dv.Z.SUNDAY_NOTIFICATION},e.next=6,n.sendNotificationAsync(s);case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),i.sendException(e.t0);case 11:case"end":return e.stop()}}),e,this,[[1,8]])})));return function(){return e.apply(this,arguments)}}(),t.findDelayTimeForNextDay=function(e,t){if(e<0||e>6)throw new Error("Invalid day for notification");if(t<0||t>23)throw new Error("Invalid hour for notification");var n=Date.now(),i=new Date(n).getDay(),a=new Date(n).getHours(),r=e,s=t;if(i===r&&a>=s){var o=3600*(168-a+s);if(o>604800)throw new Error("Notification delay time is more than 7 days");return o}var c=r<i?7-i+r:r-i;s<a&&c--;var l=3600*(24*c+(s<a?24-a+s:s-a));if(l>604800)throw new Error("Notification delay time is more than 7 days");return l},t.sendTestDailyNotificationInstance=function(){var e=(0,s.Z)(h().mark((function e(t){var n,i,a,r;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n={0:"SUNDAY",1:"MONDAY",2:"TUESDAY",3:"WEDNESDAY",4:"THURSDAY",5:"FRIDAY",6:"SATURDAY"},e.prev=1,a=pv,!(t<0||t>6)){e.next=5;break}throw new Error("Invalid day for notification. Day must be between 0 (Sunday) and 6 (Saturday)");case 5:return a=null!=(i=gv[n[t]])?i:pv,r={message:a,delayTime:300,type:dv.Z.GENERIC_NOTIFICATION},e.next=9,window.game.facebook.sendNotificationAsync(r);case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1);case 14:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(t){return e.apply(this,arguments)}}(),e}();mv._instance=void 0;var vv=mv,yv=function(e){function t(){for(var t,n,i=arguments.length,a=new Array(i),r=0;r<i;r++)a[r]=arguments[r];return(n=e.call.apply(e,P()(t=[this]).call(t,a))||this).gameSettings=void 0,n.header=void 0,n.footer=void 0,n.backgroundLines=void 0,n.bulletBallPool=void 0,n.gridBallPool=void 0,n.bombPool=void 0,n.stampPool=void 0,n.flyingDinoPool=void 0,n.floatingScorePool=void 0,n.shotGuide=void 0,n.tailParticles=void 0,n.ropeLine=void 0,n.drag=void 0,n.shooter=void 0,n.grid=void 0,n.ballLayoutData=void 0,n.descentController=void 0,n.levelUpController=void 0,n.scoreCounter=void 0,n.vibrateController=void 0,n.readyScreen=void 0,n.pauseScreen=void 0,n.guideScreen=void 0,n.gameOverScreen=void 0,n.rescueScreen=void 0,n.gameModeManager=void 0,n.stateManager=void 0,n.physicsManager=void 0,n.animationsManager=void 0,n.itemManager=void 0,n.isNeedShowGuide=void 0,n.timerEvents=[],n.pauseButton=void 0,n.run=function(){n.stateManager.ready(),n.checkAndAddShortcut(),n.time.delayedCall(1e3,(function(){n.logPageviewOnOpen()}))},n.create=function(){e.prototype.create.call((0,Na.Z)(n)),n.gameSettings=new Ad((0,Na.Z)(n)),n.createBackground(oa.Z.GAME_BACKGROUND.KEY),n.createFooterBackground(),n.createController(),n.createParticle(),n.createPhysicsWorld(),n.createObjectPools(),n.createGlobalAnims(),n.createUI(),n.handleEvents(),n.createManagers(),n.checkNewUser(),Pm((0,Na.Z)(n))},n.pauseGame=function(){var e;n.tweens.pauseAll(),n.shooter.pause(),n.tailParticles.pause(),n.physics.world.pause(),n.levelUpController.pause(),n.timerEvents=we()(e=n.timerEvents).call(e,(function(e){return e.paused=!0,!e.hasDispatched}))},n.resumeGame=function(){var e;n.tweens.resumeAll(),n.shooter.resume(),n.tailParticles.resume(),n.physics.world.resume(),n.levelUpController.resume(),n.timerEvents=we()(e=n.timerEvents).call(e,(function(e){return e.paused=!1,!e.hasDispatched}))},n.handleBlurGameScene=function(){if(n.stateManager.isPlaying()){n.stateManager.pause();var e=n.game.globalScene;e.screen.open(Da.o4.NOTIFY_SCREEN,{message:n.lang.Text.TOUCH_ANYWHERE,duration:0,loading:!1}),e.input.once(Phaser.Input.Events.GAMEOBJECT_POINTER_UP,n.handleCloseScreen)}},n.handleCloseScreen=function(){n.game.globalScene.screen.close(Da.o4.NOTIFY_SCREEN),n.stateManager.play()},n.destroyGamePlay=function(){n.stopManager(),n.destroyOldObject(),n.resetObjectPools(),n.removeAllListeners(),n.timerEvents=[],n.tweens.killAll(),n.time.removeAllEvents()},n}(0,o.Z)(t,e);var n=t.prototype;return n.preload=function(){this.events.on(Phaser.Scenes.Events.WAKE,this.run),this.events.on(Phaser.Scenes.Events.CREATE,this.run)},n.createFooterBackground=function(){var e=Ka.Z.GAMEPLAY.GAMEPLAY_TEXTURES,t=e.KEY,n=e.FRAME,i=this.registry.get("zones").zones,a=this.world.getPixelRatio(),r=this.add.image(0,0,t,n.FOOTER_BG);r.setWorldSize(375,231),r.setOrigin(0,1*a),r.setY(i.zone5.bottomY+65);var s=this.add.image(0,0,t,n.FOOTER_BG_EXTENSION);s.setWorldSize(375,500),s.setOrigin(0,0),s.setY(r.y)},n.createController=function(){this.vibrateController=new tp(this)},n.createPhysicsWorld=function(){var e=this.gameZone,t=e.width,n=e.height,i=this.data.get("physicsWorld").worldBoundWidth;this.physics.world.setBounds(.5*t-.5*i,.5*-n,i,1.5*n),this.physics.world.setBoundsCollision(!0,!0,!1,!1)},n.createObjectPools=function(){var e=Ka.Z.GAMEPLAY.GAME_OBJECTS.KEY,t=this.physics.world;this.bulletBallPool=new Xd(t,this),this.bulletBallPool.initObjects(5),this.gridBallPool=new $d(t,this,e),this.gridBallPool.initObjects(100),this.bombPool=new rp(t,this),this.bombPool.initObjects(2),this.stampPool=new dp(this),this.floatingScorePool=new ad(this),this.flyingDinoPool=new mg(this),this.shotGuide=new Id(this)},n.createParticle=function(){this.tailParticles=new Bm(this)},n.createGlobalAnims=function(){new zf(this)},n.createManagers=function(){this.gameModeManager=new Dd(this),this.gameModeManager.init(),this.physicsManager=new Dm(this),this.physicsManager.init(),this.animationsManager=new Jm(this),this.animationsManager.init(),this.itemManager=new hv(this),this.itemManager.init(),this.stateManager=new Im(this),this.stateManager.init()},n.createUI=function(){this.createBackgroundLines(),this.createReadyScreen(),this.createGuideScreen(),this.createPauseScreen(),this.createRescueScreen(),this.createGameOverScreen(),this.createHeader(),this.createRope(),this.createFooter(),this.createPauseButton()},n.createBackgroundLines=function(){this.backgroundLines=new Nu(this)},n.createReadyScreen=function(){this.readyScreen=this.screen.add(Da.o4.READY_SCREEN,Kp)},n.createGuideScreen=function(){this.guideScreen=this.screen.add(Da.o4.GUIDE_SCREEN,eg)},n.createPauseScreen=function(){this.pauseScreen=this.screen.add(Da.o4.PAUSE_SCREEN,Qp)},n.createRescueScreen=function(){this.rescueScreen=this.screen.add(Da.o4.RESCUE_SCREEN,vf)},n.createGameOverScreen=function(){this.gameOverScreen=this.screen.add(Da.o4.GAME_OVER_SCREEN,zp)},n.createPauseButton=function(){var e=this,t=Ka.Z.GAMEPLAY.GAMEPLAY_TEXTURES,n=t.KEY,i=t.FRAME,a=new Va.Z(this,n,i.BUTTON_PAUSE,45.5,37);a.setName("Pause"),this.header.add(a),a.onClick=function(){e.screen.open(Da.o4.PAUSE_SCREEN),e.stateManager.pause()},a.kill(),this.pauseButton=a,Phaser.Display.Align.In.Center(a,this.header,-35,-28)},n.createHeader=function(){this.header=new Fp(this),Phaser.Display.Align.In.TopCenter(this.header,this.gameZone),this.header.setDepth(_a.Z.UI)},n.createRope=function(){var e=Ka.Z.GAMEPLAY.GAMEPLAY_TEXTURES,t=e.KEY,n=e.FRAME,i=this.registry.get("zones").zones;this.ropeLine=this.add.image(187.5,i.zone5.topY,t,n.ROPE),this.ropeLine.setWorldSize(375,4),this.ropeLine.setDepth(_a.Z.BACKGROUND)},n.createFooter=function(){var e=this.registry.get("zones").zones;this.footer=new yd(this),this.footer.setPosition(187.5,e.zone5.topY+55),this.footer.setDepth(_a.Z.BUTTON)},n.checkNewUser=function(){this.isNeedShowGuide=!1,(this.player.getPlayerIsNew()||GameCore.Configs.Tutorial.ForceUseTutorial)&&(this.handleCloseGuide(),this.isNeedShowGuide=!0)},n.handleEvents=function(){var e=this;this.game.events.on(Phaser.Core.Events.HIDDEN,this.handleBlurGameScene),this.events.on(Phaser.Scenes.Events.SLEEP,(function(){e.stateManager.quit()}))},n.checkAndAddShortcut=function(){var e;this.game.player.getPlayer().isUserNew||(null==(e=this.gameModeManager)?void 0:e.gameMode)!==ua&&this.facebook.attemptToAddShortcut()},n.handleCloseGuide=function(){var e=this;this.guideScreen.once(GameCore.Screens.Events.CLOSE,(function(){e.showDrag(),e.analytics.event(Ht._.TUTORIAL_COMPLETE)}))},n.showDrag=function(){var e=this;this.drag=new rg(this,0,0),Phaser.Display.Align.In.Center(this.drag,this.gameZone,-50),this.drag.show(),this.events.once(sd.SHOOT_BALL,(function(){e.drag.hide()}))},n.update=function(e,t){this.stateManager.update(t)},n.handleGameModeChange=function(){var e=this,t=[{selector:os,callback:function(t){t!==e.gameModeManager.gameMode&&(e.gameModeManager.stop(),e.gameModeManager.setGameMode(t),e.gameModeManager.start())}}];this.handleStateChange(t)},n.startManager=function(){this.stateManager.start(),this.gameModeManager.start(),this.physicsManager.start(),this.animationsManager.start()},n.stopManager=function(){this.stateManager.stop(),this.gameModeManager.stop(),this.physicsManager.stop(),this.animationsManager.stop(),this.itemManager.stop()},n.destroyOldObject=function(){var e,t,n,i;null==(e=this.grid)||e.destroy(),null==(t=this.drag)||t.destroy(),null==(n=this.shooter)||n.destroy(),null==(i=this.levelUpController)||i.destroy()},n.resetObjectPools=function(){var e,t,n,i,a,r;null==(e=this.bombPool)||e.reset(),null==(t=this.stampPool)||t.reset(),null==(n=this.gridBallPool)||n.reset(),null==(i=this.bulletBallPool)||i.reset(),null==(a=this.flyingDinoPool)||a.reset(),null==(r=this.floatingScorePool)||r.reset()},n.removeAllListeners=function(){this.events.off(sd.SHOOT_BALL),this.events.off(sd.TIMER_CREATED)},n.sendTestDailyNotification=function(e){vv.sendTestDailyNotification(e)},t}(Mo.Z);var Ev=yv,Av=Ka.Z.DEFAULT,Sv=Av.KEY,bv=Av.FRAME,Tv=function(e){function t(t){var n;return(n=e.call(this,t)||this).homeButton=void 0,n.scene=t,n.createButtons(),n.alignButtons(),n.scene.add.existing((0,Na.Z)(n)),n}(0,o.Z)(t,e);var n=t.prototype;return n.alignButtons=function(){Phaser.Display.Align.In.Center(this.homeButton,this,0)},n.createButtons=function(){this.createHomeButton()},n.createHomeButton=function(){this.homeButton=new Va.Z(this.scene,Sv,bv.BUTTON_GREEN,134,68);var e=this.scene.make.bitmapText({font:$a.Z.PRIMARY.KEY,size:this.scene.fontSize(20),text:this.scene.lang.Text.HOME,origin:{x:.5,y:.5}}),t=this.scene.make.image({key:Sv,frame:bv.ICON_HOME});t.setWorldSize(31,26),this.homeButton.setName("Home"),this.homeButton.add([e,t]),this.add(this.homeButton);var n=this.scene.lang.getCurrentLanguage();Phaser.Display.Align.In.Center(t,this.homeButton,"ru"===n?-36:-29,-3),Phaser.Display.Align.To.RightCenter(e,t,6,1)},t}(Phaser.GameObjects.Container),wv=Tv,Cv=(function(e){function t(t){var n;return(n=e.call(this,t,"UpdateAbleObject")||this).updateInfo=void 0,n}(0,o.Z)(t,e)}(Phaser.GameObjects.GameObject),function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).classType=void 0,i.listConfigs=void 0,i.padding=void 0,i.startObjectIndex=void 0,i.endObjectIndex=void 0,i.listObjects=void 0,i.classType=n.classType,i.listConfigs=n.listConfigs,i.padding=n.padding?n.padding:0,i.objects.classType=i.classType,i.updateConfig(i.listConfigs),i}(0,o.Z)(t,e);var n=t.prototype;return n.reset=function(){e.prototype.reset.call(this),this.killAndHideAll()},n.getChildren=function(){var e;return we()(e=this.listObjects).call(e,(function(e){return void 0!=e&&e.active}))},n.updateConfig=function(e){var t;this.reset(),this.listConfigs=e,this.listObjects=vr()(t=new Array(e.length)).call(t,void 0),this.addObjectIndex(0,0);var n=this.getEndObjectIndex();this.addObjectIndex(1,n),this.startObjectIndex=this.getStartObjectIndex(),this.endObjectIndex=this.getEndObjectIndex(),this.updateMaxHeight(),this.value=this.marginTop},n.killAndHideAll=function(){var e,t=this;this.listObjects instanceof Array&&Ie()(e=this.listObjects).call(e,(function(e){void 0!==e&&t.objects.killAndHide(e)}))},n.setItemPosition=function(e,t){var n=e.height;e.setPosition(0,n/2+(n+this.padding)*t-this.height/2)},n.updateMaxHeight=function(){return this.maxHeight=Math.max(this.listConfigs.length*(this.objHeight+this.padding)-this.padding+this.marginBottom-this.height,0)},n.updateObject=function(e){this.objects.incY(e);var t=this.getStartObjectIndex(),n=this.getEndObjectIndex();t!=this.startObjectIndex&&(t>this.startObjectIndex?this.killObjectIndex(this.startObjectIndex,t-1):this.addObjectIndex(t,this.startObjectIndex-1),this.startObjectIndex=t),n!=this.endObjectIndex&&(n<this.endObjectIndex?this.killObjectIndex(n+1,this.endObjectIndex):this.addObjectIndex(this.endObjectIndex+1,n),this.endObjectIndex=n)},n.killObjectIndex=function(e,t){for(var n=e;n<=t;n++){var i=this.listObjects[n];i&&(this.objects.killAndHide(i),this.listObjects[n]=void 0)}},n.addObjectIndex=function(e,t){for(var n=e;n<=t;n++){var i=this.padding,a=this.listConfigs;if(n>=a.length)return;var r=this.objects.getFirstDead(!0),s=r.height,o=s/2+(s+i)*n+this.value-this.height/2;r.updateInfo(a[n]),r.setPosition(0,o),r.setActive(!0),r.setVisible(!0),this.addAt(r),this.listObjects[n]=r}},n.getStartObjectIndex=function(){var e=this.objHeight,t=this.padding;return Math.max(Math.floor((0-this.value)/(e+t)),0)},n.getEndObjectIndex=function(){var e=this.objHeight,t=this.padding,n=this.listConfigs,i=e+t;return Math.min(Math.floor((this.height-this.value)/i),n.length)},(0,te.Z)(t,[{key:"objHeight",get:function(){var e=this.objects.getChildren();return 0==e.length?this.maxHeight=0:e[0].height}}]),t}(Il.Z)),Iv=Ka.Z.DEFAULT,Pv=Iv.KEY,xv=Iv.FRAME,kv=function(e){function t(t,n){var i;return(i=e.call(this,t)||this).button=void 0,i.avatar=void 0,i.rankIcon=void 0,i.rankText=void 0,i.username=void 0,i.scoreText=void 0,i.background=void 0,i.showPopUp=void 0,i.showItems=void 0,i.payload=void 0,i.handleChallengeFriend=function(){var e=i.payload.playerId;i.scene.storage.dispatch(Io(e))},i.createBackground(),i.updateSize(),i.createAvatar(),i.createRank(),i.createUsername(),i.createScore(),i.createButton(),n&&i.updateInfo(n),i.scene.add.existing((0,Na.Z)(i)),i}(0,o.Z)(t,e);var n=t.prototype;return n.updateInfo=function(e){e&&(this.payload=(0,r.Z)({scoreRight:!0,isHighlight:!1,useChallenge:!1},e),this.updateBackground(),this.updateAvatar(),this.updateRank(),this.updateUsername(),this.updateScore(),this.updatePosition())},n.updatePosition=function(){var e=this.payload.scoreRight,t=this.payload.useChallenge;if(this.button.setVisible(!!t),e){this.username.setFontSize(20),Phaser.Display.Align.In.LeftCenter(this.username,this.background,-90,1);var n=this.scene.fontSize(20);this.scoreText.setFontSize(n),this.scoreText.setOrigin(1,.5),this.scoreText.setPosition(130,1)}else{this.username.setFontSize(16),Phaser.Display.Align.In.TopLeft(this.username,this.background,-90,-8);var i=this.scene.fontSize(18);this.scoreText.setFontSize(i),this.scoreText.setOrigin(0,.5),this.scoreText.setPosition(-55,10)}},n.createBackground=function(){this.background=this.scene.make.image({key:Pv,frame:xv.LEADERBOARD_BG_LIGHT}),this.background.setWorldSize(290.5,43.5),this.add(this.background)},n.updateBackground=function(){var e="";e=this.payload.isHighlight?xv.LEADERBOARD_BG_LIGHT:xv.LEADERBOARD_BG_DARK,this.background.setFrame(e),this.background.setWorldSize(290.5,43.5)},n.updateSize=function(){var e=this.background,t=e.width,n=e.height;this.setSize(t,n)},n.createAvatar=function(){this.avatar=new Hc(this.scene,{key:Pv,frame:xv.AVATAR_FRAME_PURPLE,background:xv.AVATAR_BG,width:38,height:40,loadDelay:300}),this.add(this.avatar),Phaser.Display.Align.In.LeftCenter(this.avatar,this.background,-45,-2)},n.updateAvatar=function(){var e=this.payload,t=e.playerId,n=e.photo;this.avatar.loadPhoto(t,n)},n.createRank=function(){this.createRankIcon(),this.createRankText()},n.updateRank=function(){this.updateRankIcon(),this.updateRankText()},n.getRankIconSymbol=function(e){var t="";switch(e){case 1:t=xv.ICON_GOLD;break;case 2:t=xv.ICON_SILVER;break;case 3:t=xv.ICON_BRONZE;break;case 0:t=xv.ICON_QUESTION}return t},n.createRankIcon=function(){var e=xv.ICON_GOLD;this.rankIcon=this.scene.make.image({key:Pv,frame:e}),this.rankIcon.setPosition(-119,0),this.add(this.rankIcon)},n.updateRankIcon=function(){var e=+this.payload.score,t=+this.payload.rank;0===e&&(t=0);var n=this.getRankIconSymbol(t);this.rankIcon.setFrame(n),""==n?this.rankIcon.kill():this.rankIcon.revive(),this.rankIcon.setWorldSize(39,47.5),0===t&&this.rankIcon.setWorldSize(11,16)},n.createRankText=function(){this.rankText=this.scene.make.bitmapText({font:$a.Z.PRIMARY.KEY,size:this.scene.fontSize(15),text:"",origin:{x:.5,y:.5}}),this.add(this.rankText)},n.updateRankText=function(){var e=+this.payload.score,t=this.payload.rank;0===e&&(t=0);var n=""+t;if(this.rankText.revive(),t<4&&this.rankText.kill(),t>999){var i=this.scene.fontSize(13);this.rankText.setFontSize(i),n=GameCore.Utils.Number.toAbbreviatedString(+t,{fractionalDigits:1,removeLastZero:!0})}this.rankText.setText(n),this.rankText.setPosition(-120,2)},n.createUsername=function(){this.username=this.scene.make.text({style:{fontFamily:$a.Z.FONT_FAMILY},origin:{x:0,y:.5}}),this.username.setText(""),this.username.setTint(14342381),this.username.setHighQuality(),this.add(this.username)},n.updateUsername=function(){var e=this.payload.name;if(e){var t=GameCore.Utils.String.getShortName(e,10),n=GameCore.Utils.String.removeDiacritics(t);this.username.setText(n)}},n.createScore=function(){this.scoreText=this.scene.make.bitmapText({font:$a.Z.PRIMARY.KEY,size:this.scene.fontSize(20),origin:{x:0,y:.5}}),this.scoreText.setTint(16777215),this.add(this.scoreText)},n.updateScore=function(){var e=+this.payload.score,t=GameCore.Utils.Number.toAbbreviatedString(e,{startAbbreviate:1e14});this.scoreText.setText(t)},n.createButton=function(){this.button=new Va.Z(this.scene,Pv,xv.BUTTON_GREEN_MINOR,61.5,32),this.button.setName("ChallengeFriend");var e=this.scene.make.bitmapText({font:$a.Z.PRIMARY.KEY,size:this.scene.fontSize(11),text:this.scene.lang.Text.CHALLENGE});this.button.add(e),this.add(this.button),Phaser.Display.Align.In.Center(e,this.button),Phaser.Display.Align.In.RightCenter(this.button,this.background,-10),this.button.onClick=this.handleChallengeFriend},n.runShowPopUpAnimation=function(e,t){var n=this;this.scene.tweens.killTweensOf(this);var i=this.y;this.showPopUp=new Zc({targets:[this],delay:e,duration:t,props:{y:{start:this.y+70,to:this.y}},onStop:function(){n.y=i}}),this.showPopUp.play()},n.runShowItemAnimation=function(e,t){var n=[this.avatar,this.rankText,this.button,this.username,this.scoreText];n.forEach((function(e){return e.setScale(1)})),this.scene.tweens.killTweensOf(n),this.showItems=new ch({targets:n,duration:t,delay:this.scene.tweens.stagger(50,{start:e+50}),props:{scale:{duration:1e3,start:.8,end:1,ease:Phaser.Math.Easing.Elastic.Out,easeParams:[.1,.45]}}}),this.showItems.play()},n.runShowUpAnimation=function(e,t){void 0===e&&(e=0),void 0===t&&(t=300);var n=100*e;this.runShowPopUpAnimation(n,t),this.runShowItemAnimation(n,t)},t}(Phaser.GameObjects.Container),Ov=kv;function Rv(e,t){var n="undefined"!==typeof T()&&C()(e)||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){var n;if(!e)return;if("string"===typeof e)return Bv(e,t);var i=E()(n=Object.prototype.toString.call(e)).call(n,8,-1);"Object"===i&&e.constructor&&(i=e.constructor.name);if("Map"===i||"Set"===i)return S()(e);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return Bv(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var i=0;return function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Bv(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var _v=function(e){function t(t){var n;(n=e.call(this,t)||this).scene=void 0,n.currentPlayerId=void 0,n.scroller=void 0,n.animationTween=void 0,n.scene=t;var i=n.scene.player;return n.currentPlayerId=i.getPlayerId(),n.createReuseScroller(),n.scene.add.existing((0,Na.Z)(n)),n}(0,o.Z)(t,e);var n=t.prototype;return n.createReuseScroller=function(){this.scroller=new Cv(this.scene,{classType:Ov,listConfigs:[],width:280,height:310,padding:5,marginTop:10,marginBottom:10,maxScrollOver:.05}),this.scene.renderer instanceof Phaser.Renderer.WebGL.WebGLRenderer&&this.scroller.createBound(Ka.Z.DEFAULT.KEY,Ka.Z.DEFAULT.FRAME.BLANK,10,2826565),this.scroller.createMask(),this.scroller.setPosition(0,5),this.add(this.scroller)},n.updateData=function(){var e=(0,s.Z)(h().mark((function e(t){var n,i,a,r,s,o,c,l,u,d,p,f,g,m,v,y,E;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!((n=hi()(t)||[]).length<1)){e.next=5;break}return this.scene.isSwitchable=!0,this.scene.board.showMessage(!0,this.scene.lang.Text.LEADERBOARD_IS_EMPTY),e.abrupt("return");case 5:i=pi()(n).call(n,(function(e,t){return+t.score-+e.score})),a=[],r=window.game.player.getPlayerId(),s=Rv(i);case 9:if((o=s()).done){e.next=24;break}if(c=o.value,l=c.playerId,u=c.photo,d=c.score,p=c.name,f=c.rank,l){e.next=15;break}return e.abrupt("continue",22);case 15:g=this.currentPlayerId===l,m=this.scene.tabId===Er,v=!g&&this.scene.tabId===Ar,y="Anonymous"===p?this.scene.lang.Text.ANONYMOUS:p,r===l&&(y="YOU"),E={playerId:l,photo:u,name:y,rank:f,score:d,scoreRight:m,useChallenge:v,isHighlight:g},a.push(E);case 22:e.next=9;break;case 24:this.scroller.updateConfig(a),this.showLeaders();case 26:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.removeLeaders=function(){this.scroller.updateConfig([])},n.getCurrentPlayerRank=function(){var e=(0,s.Z)(h().mark((function e(t){var n,i;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Gr(t);case 2:return n=e.sent,i=0,n&&"getRank"in n&&GameCore.Utils.Valid.isNumber(n.getRank())&&(i=n.getRank()),e.abrupt("return",i);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.getLeaders=function(){return this.scroller.getChildren()},n.showLeaders=function(){var e=this,t=this.getLeaders();if(t.length<1)return this.scene.isSwitchable=!0,void this.scene.board.showMessage(!0,this.scene.lang.Text.LEADERBOARD_IS_EMPTY);for(var n=Math.min(t.length,6),i=0;i<n;i++){var a=t[i];a&&(a.setVisible(!0),a.runShowUpAnimation(i,300))}var r=300+100*n+250;this.scene.time.delayedCall(r,(function(){e.scene.isSwitchable=!0,e.scroller.setEnable(!0)}))},t}(Phaser.GameObjects.Container),Dv=_v,Nv=Ka.Z.DEFAULT.FRAME,Lv=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n.background=void 0,n.leaders=void 0,n.loading=void 0,n.message=void 0,n.messageAnimation=void 0,n.scene=t,n.createBackground(),n.updateSize(),n.createLoading(),n.createMessage(),n.createContents(),n.createAnimation(),n.scene.add.existing((0,Na.Z)(n)),n}(0,o.Z)(t,e);var n=t.prototype;return n.showLoading=function(e){this.loading.setVisible(e),this.showMessage(!1)},n.showMessage=function(e,t){this.message.setVisible(e),t&&(this.message.setText(t),this.messageAnimation.play())},n.createBackground=function(){this.background=new Gc(this.scene,0,0,310,350),this.add(this.background)},n.updateSize=function(){var e=this.background,t=e.width,n=e.height;this.setSize(t,n)},n.createLoading=function(){this.loading=new Uc.Z(this.scene),this.add(this.loading),this.loading.setTint(5982858),this.loading.setWorldSize(55,55),Phaser.Display.Align.In.Center(this.loading,this.background)},n.createMessage=function(){this.message=this.scene.make.bitmapText({font:$a.Z.PRIMARY.KEY,size:this.scene.fontSize(18),origin:{x:.5,y:.5}}),this.add(this.message),Phaser.Display.Align.In.Center(this.message,this.background)},n.createContents=function(){this.createLeaders(),this.createTitle()},n.createLeaders=function(){this.leaders=new Dv(this.scene),this.add(this.leaders),Phaser.Display.Align.In.Center(this.leaders,this.background,0,0)},n.createTitle=function(){var e=this.scene.lang.getCurrentLanguage(),t=new _c(this.scene,{title:this.scene.lang.Text.LEADERBOARDS,titleSize:"ru"===e?22:25});t.changeRibbon(Nv.RIBBON_PINK,276.5,68.5),t.changeBackground(Nv.EGGS,204,61.5),Phaser.Display.Align.In.TopCenter(t,this.background,0,75),this.add(t)},n.createAnimation=function(){this.messageAnimation=new Za.Z({targets:[this.message],duration:60,repeat:2})},t}(Phaser.GameObjects.Container),Mv=Lv,Gv=GameCore.Configs.LeadersBoard,Fv=function(e){function t(){for(var t,n,i=arguments.length,a=new Array(i),r=0;r<i;r++)a[r]=arguments[r];return(n=e.call.apply(e,P()(t=[this]).call(t,a))||this).board=void 0,n.footerButtons=void 0,n.backgroundLines=void 0,n.tabId=void 0,n.offset=void 0,n.isSwitchable=void 0,n.isRequesting=void 0,n.run=function(){n.isRequesting=!1;var e=[{selector:ts,callback:function(e){if(n.isRequesting=e,n.board.showLoading(e),!1===e){var t=n.game.storage.getState(),i=es(t);n.time.delayedCall(0,(function(){n.board.leaders.updateData(i)}))}}}];n.handleStateChange(e),n.selectWorldTab()},n.handleHomeClick=function(){n.scene.switch(Sa.C.DASHBOARD_SCENE)},n}(0,o.Z)(t,e);var n=t.prototype;return n.preload=function(){this.events.on("wake",this.run),this.events.on("create",this.run)},n.create=function(){e.prototype.create.call(this),this.createBackground(oa.Z.OTHER_BACKGROUND.KEY),this.createBoard(),this.createFooter(),this.createBackgroundLines()},n.createBackgroundLines=function(){this.backgroundLines=new Nu(this)},n.selectWorldTab=function(){this.tabId=Er,this.offset=0,this.board.showLoading(!0),this.board.leaders.removeLeaders(),this.storage.dispatch(qr(Gv.LeaderboardId,Er,Gv.Limit,this.offset))},n.loadMoreTabFriend=function(){this.isRequesting||(this.offset+=Gv.Limit,this.storage.dispatch(qr(Gv.LeaderboardId,Ar,Gv.Limit,this.offset)))},n.loadMoreTabWorld=function(){this.isRequesting||(this.offset+=Gv.Limit,this.storage.dispatch(qr(Gv.LeaderboardId,Er,Gv.Limit,this.offset)))},n.createBoard=function(){this.board=new Mv(this),Phaser.Display.Align.In.Center(this.board,this.gameZone)},n.createFooter=function(){this.footerButtons=new wv(this),Phaser.Display.Align.In.BottomCenter(this.footerButtons,this.board,0,45),this.footerButtons.homeButton.onClick=this.handleHomeClick},t}(Mo.Z);var Zv=Fv,Uv=function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).name="LoadResourceFail",i.message=t||"Load resource fail",i.payload=n,i}return(0,o.Z)(t,e),t}((0,F.Z)(Error)),Yv=function(){function e(e,t){var n=this;this.game=void 0,this.id=void 0,this.taskData=void 0,this.requireTypes=void 0,this.process=function(e){var t,i=e.type,a=e.value;if(!(a<1)&&(-1!==xt()(t=n.requireTypes).call(t,i)&&!n.isPassRequiredTarget(i)&&n.processMore(e))){i=e.type,a=e.value;var r=n.getCorrectValue(i,a);n.game.storage.dispatch(function(e,t,n){return function(i){var a=Ll();if(GameCore.Utils.Valid.isObject(a)){var r=a;GameCore.Utils.Object.hasOwn(r,e)&&(r[e].rewarded||(r[e][t]+=n,window.game.player.setCustomData("dailyTasks",{logTasks:r}),i({type:Oi,payload:{id:e,type:t,value:n}})))}}}(n.id,i,r)),n.isTaskFinished(i)&&n.game.storage.dispatch(function(e){return function(t){t({type:_i,payload:{id:e}}),Lo.emit(gr.EVENTS.NOTICE_UPDATE)}}(n.id))}},this.game=e,this.id=t,this.init()}var t=e.prototype;return t.init=function(){var e=this,t=this.game.storage.getState(),n=Wo(t)||[];if(!((null==n?void 0:n.length)<1)){var i=null==n?void 0:k()(n).call(n,(function(t){return t.id===e.id}));i&&(this.taskData=i,this.requireTypes=J()(this.taskData.require),this.initEvents())}},t.getDataByType=function(e){var t=this.game.storage.getState(),n=Vo(t),i={value:0,target:0};if(!n)return i;if(!GameCore.Utils.Object.hasOwn(n,this.taskData.id))return i;var a=n[this.taskData.id];if(GameCore.Utils.Valid.isObject(a)&&GameCore.Utils.Object.hasOwn(a,e)){var r=a[e];"number"===typeof r&&(i.value=r)}return i.target=this.taskData.require[e]||0,i},t.getCorrectValue=function(e,t){var n=this.getDataByType(e),i=n.value,a=n.target,r=t;return i+t>a&&(r=a-i),Math.round(r)},t.isPassRequiredTarget=function(e){var t=this.getDataByType(e);return t.value>=t.target},t.isTaskFinished=function(e){var t=this.getDataByType(e);return t.value>=t.target},e}(),Hv=gr.COLLECT_EGGS,zv=Hv.ID,Wv=Hv.EVENTS,Vv=function(e){function t(t){return e.call(this,t,zv)||this}(0,o.Z)(t,e);var n=t.prototype;return n.initEvents=function(){Lo.off(Wv.COLLECT_EGGS,this.process),Lo.on(Wv.COLLECT_EGGS,this.process)},n.processMore=function(){return!0},t}(Yv),Kv=gr.INVITE_FRIENDS,jv=Kv.ID,Xv=Kv.EVENTS,qv=function(e){function t(t){var n;return(n=e.call(this,t,jv)||this).invitedFriends=void 0,n.resetData=function(){n.invitedFriends=[]},n.resetData(),n}(0,o.Z)(t,e);var n=t.prototype;return n.initEvents=function(){var e=this;Lo.off(Xv.INVITED_FRIEND,this.process),Lo.on(Xv.INVITED_FRIEND,this.process),Lo.on(gr.EVENTS.TASKS_RESET,(function(){e.resetData()}))},n.processMore=function(e){var t,n=e.opponentId;return!!n&&(-1===xt()(t=this.invitedFriends).call(t,n)&&(this.invitedFriends.push(n),!0))},t}(Yv),Jv=gr.COMPLETE_GAMES,Qv=Jv.ID,$v=Jv.EVENTS,ey=function(e){function t(t){var n;return(n=e.call(this,t,Qv)||this).totalScore=void 0,n.lastUpdate=void 0,n.totalScore=0,n.lastUpdate=Date.now(),n}(0,o.Z)(t,e);var n=t.prototype;return n.initEvents=function(){Lo.off($v.COMPLETE_GAME,this.process),Lo.on($v.COMPLETE_GAME,this.process)},n.processMore=function(e){var t=e.value,n=Date.now();return n-this.lastUpdate<3e3?(this.totalScore+=t,!1):(e.value+=this.totalScore,this.totalScore=0,this.lastUpdate=n,!0)},t}(Yv),ty=gr.GET_DINOMITE_COMBO,ny=ty.ID,iy=ty.EVENTS,ay=function(e){function t(t){return e.call(this,t,ny)||this}(0,o.Z)(t,e);var n=t.prototype;return n.initEvents=function(){Lo.off(iy.GET_DINOMITE_COMBO,this.process),Lo.on(iy.GET_DINOMITE_COMBO,this.process)},n.processMore=function(){return!0},t}(Yv),ry=gr.REACH_TARGET_POINTS,sy=ry.ID,oy=ry.EVENTS,cy=function(e){function t(t){return e.call(this,t,sy)||this}(0,o.Z)(t,e);var n=t.prototype;return n.initEvents=function(){Lo.off(oy.REACH_TARGET_POINTS,this.process),Lo.on(oy.REACH_TARGET_POINTS,this.process)},n.processMore=function(){return!0},t}(Yv),ly=gr.SHOOT_FLYING_EGG,uy=ly.ID,hy=ly.EVENTS,dy=function(e){function t(t){return e.call(this,t,uy)||this}(0,o.Z)(t,e);var n=t.prototype;return n.initEvents=function(){Lo.off(hy.SHOOT_FLYING_EGG,this.process),Lo.on(hy.SHOOT_FLYING_EGG,this.process)},n.processMore=function(){return!0},t}(Yv),py=gr.USE_RESCUE,fy=py.ID,gy=py.EVENTS,my=function(e){function t(t){return e.call(this,t,fy)||this}(0,o.Z)(t,e);var n=t.prototype;return n.initEvents=function(){Lo.off(gy.USE_RESCUE,this.process),Lo.on(gy.USE_RESCUE,this.process)},n.processMore=function(){return!0},t}(Yv),vy=function(){function e(e){var t=this;this.game=void 0,this.eventsListener=void 0,this.init=(0,s.Z)(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.eventsListener={},e.next=3,t.initData();case 3:t.initEvents();case 4:case"end":return e.stop()}}),e)}))),this.initData=(0,s.Z)(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.game.storage.dispatch(function(){var e=(0,s.Z)(h().mark((function e(t,n){var i,a,r,s,o;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=n(),!Ko(i)){e.next=4;break}return e.abrupt("return");case 4:return t({type:Pi,payload:{}}),e.next=7,xl();case 7:for(a=e.sent,r=window.game.globalScene.lang,s=0;s<a.length;s++)"collect-eggs"===(o=a[s]).id?a[s].title=r.Text.COLLECT_300_EGGS:"reach-target-points"===o.id?a[s].title=r.Text.REACH_10000_POINTS:"get-dinomite-combo"===o.id?a[s].title=r.Text.GET_1_DINOMITE:"use-rescue"===o.id?a[s].title=r.Text.USE_SECOND_CHANCE_2:"shoot-flying-eggs"===o.id?a[s].title=r.Text.SHOOT_5_FLYING:"complete-games"===o.id&&(a[s].title=r.Text.COMPLETE_GAME_5);t(Ol(a));case 11:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}());case 2:case"end":return e.stop()}}),e)}))),this.game=e,this.init()}var t=e.prototype;return t.getEventListener=function(e){return this.eventsListener[e]},t.initEvents=function(){this.eventsListener[gr.COLLECT_EGGS.ID]=new Vv(this.game),this.eventsListener[gr.COMPLETE_GAMES.ID]=new ey(this.game),this.eventsListener[gr.INVITE_FRIENDS.ID]=new qv(this.game),this.eventsListener[gr.GET_DINOMITE_COMBO.ID]=new ay(this.game),this.eventsListener[gr.REACH_TARGET_POINTS.ID]=new cy(this.game),this.eventsListener[gr.SHOOT_FLYING_EGG.ID]=new dy(this.game),this.eventsListener[gr.USE_RESCUE.ID]=new my(this.game)},e}(),yy=vy,Ey=[{name:"collect-red-gems",id:"collect-gems",require:{red:5},reward:50},{name:"collect-blue-gems",id:"collect-gems",require:{blue:5},reward:50},{name:"collect-pink-gems",id:"collect-gems",require:{pink:5},reward:50},{name:"collect-green-gems",id:"collect-gems",require:{green:5},reward:50},{name:"collect-yellow-gems",id:"collect-gems",require:{yellow:5},reward:50},{name:"collect-red-blue-gems",id:"collect-gems",require:{red:5,blue:5},reward:120},{name:"collect-red-pink-gems",id:"collect-gems",require:{red:5,pink:5},reward:120},{name:"collect-red-green-gems",id:"collect-gems",require:{red:5,green:5},reward:120},{name:"collect-red-yellow-gems",id:"collect-gems",require:{red:5,yellow:5},reward:120},{name:"collect-blue-pink-gems",id:"collect-gems",require:{blue:5,pink:5},reward:120},{name:"collect-blue-green-gems",id:"collect-gems",require:{blue:5,green:5},reward:120},{name:"collect-blue-yellow-gems",id:"collect-gems",require:{blue:5,yellow:5},reward:120},{name:"collect-pink-green-gems",id:"collect-gems",require:{pink:5,green:5},reward:120},{name:"collect-pink-yellow-gems",id:"collect-gems",require:{pink:5,yellow:5},reward:120},{name:"collect-green-yellow-gems",id:"collect-gems",require:{green:5,yellow:5},reward:120},{name:"collect-red-blue-pink-gems",id:"collect-gems",require:{red:5,blue:5,pink:5},reward:210},{name:"collect-red-blue-green-gems",id:"collect-gems",require:{red:5,blue:5,green:5},reward:210},{name:"collect-red-blue-yellow-gems",id:"collect-gems",require:{red:5,blue:5,yellow:5},reward:210},{name:"collect-red-pink-green-gems",id:"collect-gems",require:{red:5,pink:5,green:5},reward:210},{name:"collect-red-pink-yellow-gems",id:"collect-gems",require:{red:5,pink:5,yellow:5},reward:210},{name:"collect-red-green-yellow-gems",id:"collect-gems",require:{red:5,green:5,yellow:5},reward:210},{name:"collect-blue-pink-green-gems",id:"collect-gems",require:{blue:5,pink:5,green:5},reward:210},{name:"collect-blue-pink-yellow-gems",id:"collect-gems",require:{blue:5,pink:5,yellow:5},reward:210},{name:"collect-blue-green-yellow-gems",id:"collect-gems",require:{blue:5,green:5,yellow:5},reward:210},{name:"collect-pink-green-yellow-gems",id:"collect-gems",require:{pink:5,green:5,yellow:5},reward:210}],Ay=function(){var e=(0,s.Z)(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ey);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Sy=(0,re.P1)([function(e){var t;return null==(t=e[Ei])?void 0:t.missions}],(function(e){return e})),by=(0,re.P1)([function(e){var t;return null==(t=e[Ei])?void 0:t.isRequesting}],(function(e){return e})),Ty=((0,re.P1)([Sy,function(e,t){return t.name}],(function(e,t){return e?"string"!==typeof t?null:GameCore.Utils.Object.hasOwn(e,t)?e[t]:null:null})),function(e){return{type:Si,payload:{missions:e}}}),wy={TYPES:{COLLECT_GEMS:"collect-gems",USE_ITEM:"use-item",COMBO:"combo"},EVENTS:{MISSION_START:"mission-start",MISSION_UPDATE:"mission-update",MISSION_FAILED:"mission-failed",MISSION_COMPLETED:"mission-completed"},OBJECTS:{UNUSED:"testing"}},Cy=(0,re.P1)([function(e){var t;return null==(t=e[Ei])?void 0:t.mission}],(function(e){return e})),Iy=((0,re.P1)([Cy],(function(e){return e?e.name:null})),function(){function e(e,t,n){var i=this;this.game=void 0,this.id=void 0,this.name=void 0,this.reward=void 0,this.process=function(e){var t=e.id,n=e.type,a=e.value;a<1||i.id===t&&i.isTypeRequired(n)&&i.processMore(e)&&(i.game.storage.dispatch(function(e,t,n){return{type:bi,payload:{name:e,type:t,value:n}}}(i.name,n,a)),i.isMissionComplete()&&(Lo.emit(wy.EVENTS.MISSION_COMPLETED,{name:i.name,reward:i.reward}),i.game.storage.dispatch(function(e){return{type:Ti,payload:{name:e}}}(i.name))))},this.id=t,this.name=n,this.game=e}var t=e.prototype;return t.start=function(){var e=this.game.storage.getState(),t=Cy(e);t&&t.name===this.name&&(this.reward=t.reward,this.initEvents())},t.getMissionData=function(){var e=this.game.storage.getState(),t=Cy(e);return t?t.name!==this.name?null:t:null},t.getDataByType=function(e){var t=this.getMissionData();if(!t)return null;var n=t.require[e];return{value:t.process[e],target:n}},t.isTypeRequired=function(e){var t=this.getDataByType(e);return!!t&&t.target>0},t.isMissionComplete=function(){var e=this.getMissionData();if(!e)return!0;var t=e.require,n=e.process,i=!0;return J()(t).forEach((function(e){if(i){var a=t[e];n[e]<a&&(i=!1)}})),i},e}()),Py=Iy,xy=wy.EVENTS,ky=wy.TYPES,Oy=function(e){function t(t,n){return e.call(this,t,ky.COLLECT_GEMS,n)||this}(0,o.Z)(t,e);var n=t.prototype;return n.initEvents=function(){Lo.off(xy.MISSION_UPDATE,this.process),Lo.on(xy.MISSION_UPDATE,this.process)},n.processMore=function(){return!0},t}(Py),Ry=wy.EVENTS,By=wy.TYPES,_y=function(e){function t(t,n){return e.call(this,t,By.COMBO,n)||this}(0,o.Z)(t,e);var n=t.prototype;return n.initEvents=function(){Lo.off(Ry.MISSION_UPDATE,this.process),Lo.on(Ry.MISSION_UPDATE,this.process)},n.processMore=function(){return!0},t}(Py),Dy=wy.EVENTS,Ny=wy.TYPES,Ly=function(e){function t(t,n){return e.call(this,t,Ny.USE_ITEM,n)||this}(0,o.Z)(t,e);var n=t.prototype;return n.initEvents=function(){Lo.off(Dy.MISSION_UPDATE,this.process),Lo.on(Dy.MISSION_UPDATE,this.process)},n.processMore=function(e){return!0},t}(Py),My=function(){function e(e){var t=this;this.game=void 0,this.listener=void 0,this.init=(0,s.Z)(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.initData();case 2:t.initListeners(),t.initEvents();case 4:case"end":return e.stop()}}),e)}))),this.initData=(0,s.Z)(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.game.storage.dispatch(function(){var e=(0,s.Z)(h().mark((function e(t,n){var i,a;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=n(),!by(i)){e.next=4;break}return e.abrupt("return");case 4:return t({type:Ai,payload:{}}),e.next=7,Ay();case 7:a=e.sent,t(Ty(a));case 9:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}());case 2:case"end":return e.stop()}}),e)}))),this.startListener=function(e){t.listener[e]&&t.listener[e].start()},this.game=e,this.init()}var t=e.prototype;return t.initListeners=function(){var e=this;this.listener={};var t=this.game.storage.getState(),n=Sy(t);n&&J()(n).forEach((function(t){switch(n[t].id){case wy.TYPES.COLLECT_GEMS:e.listener[t]=new Oy(e.game,t);break;case wy.TYPES.COMBO:e.listener[t]=new _y(e.game,t);break;case wy.TYPES.USE_ITEM:e.listener[t]=new Ly(e.game,t)}}))},t.initEvents=function(){Lo.off(wy.EVENTS.MISSION_START,this.startListener),Lo.on(wy.EVENTS.MISSION_START,this.startListener)},e}(),Gy=My,Fy=function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).name="ProcessContextFail",i.message=t||"Progress context fail",i.payload=n,i}return(0,o.Z)(t,e),t}((0,F.Z)(Error)),Zy=function(e){try{var t=fa(e),n=window.game.player,i=t.entryPointData||{},a=i.playerId,r=i.playerName,s=i.playerPhoto;return n.getPlayer().playerId===a?ca:new je.Z(a,r,s).toObject()}catch(o){return ca}},Uy=function(){return function(e){try{window.game.facebook.getTournamentAsync().then((function(t){var n=t.getID().toString();e(ds(n))})).catch((function(e){})),e(wo())}catch(t){}}},Yy=function(){return function(e,t){try{var n=t(),i=fa(n),a=window.game.player,r=a.getPlayer(),s=i.contextId,o=(i.entryPointData||{}).playerId,c=r.playerId===o,l=Zy(n);c||a.updateConnectedPlayers([l]);var u=l.playerId;e(Po(s,u,!0))}catch(h){throw new Error("processInviteMode: "+h)}}},Hy=function(){return function(e,t){try{var n=t(),i=fa(n),a=window.game.player.getPlayer(),r=i.entryPointData||{},s=r.matchId,o=r.opponentId,c=r.playerId,l=a.playerId===c;e(ko(s,l?o:c,!0))}catch(u){throw new Error("processChallengeFriendMode: "+u)}}},zy=function(){return function(e,t){try{var n=t(),i=fa(n).entryPointData||{},a=i.playerId,s=i.playerScore;e(Eo(a,{score:s,level:0}));var o=Zy(n),c=(0,r.Z)({},o,{score:s});e(xo(c))}catch(l){throw new Error("processMatchingGroupMode: "+l)}}},Wy=function(){return function(e){try{e(Co())}catch(t){throw new Error("processNewUserMode: "+t)}}},Vy=n(429),Ky={BACKGROUND:{KEY:"background",FILE:["./assets/music/bg_music.ogg","./assets/music/bg_music.mp3"]},EFFECTS:{KEY:"effects",FILE:["./assets/sounds/effects.ogg","./assets/sounds/effects.mp3"],JSON:"./assets/sounds/effects.json",PATH:"./assets/sounds/"}},jy=GameCore.Configs.Notification.ApiUrl,Xy=function(){var e=(0,s.Z)(h().mark((function e(t){var n,i;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.playerId,e.next=3,(0,Ge.v)("players/"+n,t,{},jy,10);case 3:return i=e.sent,e.abrupt("return",(null==i?void 0:i.data)||{});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),qy=GameCore.Configs,Jy=qy.AppId,Qy=qy.Notification,$y=function(e){function t(){for(var t,n,a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=e.call.apply(e,P()(t=[this]).call(t,r))||this).progressFbTimeEvent=void 0,n.percentProgressFb=0,n.startPercent=0,n.handleFBInstantGameStarted=function(){window.__fbGameReady=!0,window.__fbPlatform=FBInstant.getPlatform(),n.ads.preloadRewardedVideoAsync().catch((function(){})),GameCore.Configs.Ads.InterstitialAdOptions.showWhenStartGame||n.ads.preloadInterstitialAdAsync().catch((function(){})),n.player.requestConnectedPlayers()},n.processAfterUpdatePlayerProfile=function(){Qy.Enable&&(n.updatePlayerProfileToNotificationService(),Qy.DisableSendNotification||(vv.sendNewUserNotification(),vv.sendDailyNotification()))},n.startGame=(0,s.Z)(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.storage.dispatch((0,Vy.I)(Sa.C.LOAD_SCENE)),e.next=3,n.storage.dispatch((function(e,t){var n=window.game,a=n.player,r=n.analytics,s=n.globalScene;try{var o=t(),c=fa(o),l=ga(o),u=a.getPlayer(),h=(c.entryPointData||{}).type;if(u.isUserNew&&r.event(Ht._.NEW_USER),l===da)return void e(Uy());if(l===ua){if(h===ra)return void e(Yy());if(h===sa)return void e(Hy())}if(l===ha)return void e(zy());if(u.isUserNew)return void e(Wy());s.events.emit(Sa.K.SWITCH,Sa.C.DASHBOARD_SCENE)}catch(d){s.events.emit(Sa.K.SWITCH,Sa.C.DASHBOARD_SCENE),(0,i.R0)(new Fy(null),{error:d})}}));case 3:n.analytics.event(Ht._.APP_READY),n.ads.showBannerAdAsync().catch((function(e){}));case 5:case"end":return e.stop()}}),e)}))),n.handleLoadMusicCompleted=function(){n.audio.initMusic(Ky.BACKGROUND.KEY),n.audio.playMusic()},n}(0,o.Z)(t,e);var n=t.prototype;return n.loadingProgressFb=function(){var e=this;this.percentProgressFb=this.registry.get("PercentProgressFb"),(!this.percentProgressFb||this.percentProgressFb<30)&&(this.percentProgressFb=60),this.startPercent=this.percentProgressFb,this.progressFbTimeEvent=this.time.addEvent({delay:50,callback:function(){e.facebook.setLoadingProgress(Math.round(e.percentProgressFb)),e.percentProgressFb+=.1},repeat:-1})},n.preload=function(){var e=this;this.facebook.progressLoading.loadingProgressFbLoadScene(),this.analytics.event(Ht._.SCREEN_OPEN,{screen_name:"LoadScene"}),this.analytics.event(Ht._.LOAD_START),this.load.on("progress",(function(t){e.facebook.progressLoading.onProgress(t)})),this.load.on(Phaser.Loader.Events.FILE_LOAD_ERROR,(function(e){var t=new Uv("Load resources at LoadScene failed.");(0,i.R0)(t,{file:null==e?void 0:e.url})})),this.load.on(Phaser.Loader.Events.COMPLETE,(function(){e.load.off(Phaser.Loader.Events.FILE_LOAD_ERROR)})),this.textStyler.addFont({type:"local",fontType:"opentype",fontName:$a.Z.FONT_FAMILY});var t=this.lang.getCurrentLanguage();this.load.bitmapFont($a.Z.PRIMARY.KEY,$a.Z.PRIMARY.TEXTURE[t],$a.Z.PRIMARY.DATA[t]),this.load.image(oa.Z.AVATAR.KEY,oa.Z.AVATAR.FILE),this.load.image(oa.Z.BACKGROUND.KEY,oa.Z.BACKGROUND.FILE),this.load.atlas({key:Ka.Z.DEFAULT.KEY,textureURL:Ka.Z.DEFAULT.TEXTURE,atlasURL:Ka.Z.DEFAULT.JSON}),this.load.atlas({key:Ka.Z.GAMEPLAY.GAMEPLAY_TEXTURES.KEY,textureURL:Ka.Z.GAMEPLAY.GAMEPLAY_TEXTURES.TEXTURE,atlasURL:Ka.Z.GAMEPLAY.GAMEPLAY_TEXTURES.JSON}),this.load.atlas({key:Ka.Z.GAMEPLAY.GAME_OBJECTS.KEY,textureURL:Ka.Z.GAMEPLAY.GAME_OBJECTS.TEXTURE,atlasURL:Ka.Z.GAMEPLAY.GAME_OBJECTS.JSON}),this.load.atlas({key:Ka.Z.EFFECTS.KEY,textureURL:Ka.Z.EFFECTS.TEXTURE,atlasURL:Ka.Z.EFFECTS.JSON}),this.load.image(oa.Z.AVATAR.KEY,oa.Z.AVATAR.FILE),this.load.image(oa.Z.BACKGROUND.KEY,oa.Z.BACKGROUND.FILE),this.load.image(oa.Z.GAME_BACKGROUND.KEY,oa.Z.GAME_BACKGROUND.FILE),this.load.image(oa.Z.OTHER_BACKGROUND.KEY,oa.Z.OTHER_BACKGROUND.FILE),this.player.updateData().then((function(){e.processAfterUpdatePlayerProfile(),e.initModules()})).catch(i.tO)},n.create=function(){this.analytics.event(Ht._.LOAD_COMPLETE),this.facebook.on("startgame",this.handleFBInstantGameStarted),this.facebook.gameStarted(),this.setupGlobalScene(),this.lazyLoadResource(),this.handleShowAdWhenStartGame(),this.startGame()},n.updatePlayerProfileToNotificationService=function(){var e=this.player.getPlayer(),t=e.playerId,n=e.name,i=e.photo,a=e.locale,r=e.ASID;Xy({appId:Jy,playerId:t,name:n,photo:i,locale:a,ASID:r})},n.setupGlobalScene=function(){var e=this.scene.get(Sa.C.GLOBAL_SCENE);e instanceof rr.Z&&e.setup()},n.initModules=function(){try{new Gy(this.game),new yy(this.game)}catch(e){(0,i.tO)(e)}},n.lazyLoadResource=function(){var e=this;setTimeout((function(){e.scene.wake(),e.loadSounds(),e.loadTexture32Bit(Ka.Z.DEFAULT.KEY,[Ka.Z.DEFAULT.TEXTURE_32_BIT]),e.loadTexture32Bit(Ka.Z.GAMEPLAY.GAMEPLAY_TEXTURES.KEY,[Ka.Z.GAMEPLAY.GAMEPLAY_TEXTURES.TEXTURE_32_BIT]),e.load.once(Phaser.Loader.Events.COMPLETE,(function(){e.scene.sleep()}))}),1e3)},n.loadSounds=function(){var e=Phaser.Loader.Events.FILE_KEY_COMPLETE;this.load.once(e+"audio-"+Ky.BACKGROUND.KEY,this.handleLoadMusicCompleted),this.load.audio(Ky.BACKGROUND.KEY,Ky.BACKGROUND.FILE);for(var t=0,n=J()(er.Z);t<n.length;t++){var i=n[t],a=er.Z[i];this.load.audio(a,[Ky.EFFECTS.PATH+a+".ogg",Ky.EFFECTS.PATH+a+".mp3"])}this.load.start()},n.loadTexture32Bit=function(e,t){var n=this,i=[];t.forEach((function(e){var t=GameCore.Utils.String.generateObjectId();n.load.image(t,e),i.push(t)})),this.load.start();var a=0;this.textures.on(Phaser.Textures.Events.ADD,(function t(r){var s=xt()(i).call(i,r);if(-1!==s){var o=n.textures.get(r),c=n.textures.get(e);c.source[s].glTexture=o.source[0].glTexture,c.source[s].glIndex=o.source[0].glIndex,c.source[s].glIndexCounter=o.source[0].glIndexCounter,++a===i.length&&n.textures.off(Phaser.Textures.Events.ADD,t)}}))},n.loadWideframesResource=function(){this.frameCapture.preload({"wide-frame-share":"./assets/wideframes/wide-frame-share.png","wide-frame-message-win":"./assets/wideframes/wide-frame-message-win.png","wide-frame-game-result":"./assets/wideframes/wide-frame-game-result.png"})},n.handleShowAdWhenStartGame=function(){var e=this;if(GameCore.Configs.Ads.InterstitialAdOptions.showWhenStartGame){var t={en:"Initializing...",ru:"\u0418\u043d\u0438\u0446\u0438\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u044f...",pt:"Inicializando...",es:"Inicializando...",ar:"\u062a\u0647\u064a\u0626\u0629...",hi:"\u092a\u094d\u0930\u093e\u0930\u0902\u092d \u0915\u0930 \u0930\u0939\u093e \u0939\u0948...",zh:"\u521d\u59cb\u5316\u4e2d...",tr:"Ba\u015flat\u0131l\u0131yor...",ja:"\u521d\u671f\u5316\u4e2d...",fr:"Initialisation en cours...",id:"Menginisialisasi...",de:"Initialisierung...",it:"Inizializzazione..."}[this.lang.getCurrentLanguage()||""]||"",n=document.createElement("div");n.id="wait-ads-mask";var a=document.createElement("div");a.id="wait-ads-content",n.appendChild(a);var r=document.createElement("div");r.id="wait-ads-dual-ring",a.appendChild(r);var o=document.createElement("div");o.id="wait-ads-text",o.innerHTML=t,o.style.color="#fff",a.appendChild(o),document.body.appendChild(n),this.audio.muteAll(),setTimeout((0,s.Z)(h().mark((function t(){return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,window.ignoreResumeMusicOnFocus=!0,e.audio.stopMusic(),e.audio.stopAllSounds(),e.audio.muteAll(),t.next=7,e.ads.preloadInterstitialAdAsync();case 7:return t.next=9,e.ads.showInterstitialAdAsync();case 9:t.next=14;break;case 11:t.prev=11,t.t0=t.catch(0),(0,i.tO)(t.t0);case 14:return t.prev=14,n.remove(),window.ignoreResumeMusicOnFocus=!1,e.audio.unmuteAll(),e.audio.playMusic(),t.finish(14);case 20:case"end":return t.stop()}}),t,null,[[0,11,14,20]])}))),0)}},t}(Phaser.Scene),eE=$y,tE=n(207),nE=n.n(tE),iE={targets:[],duration:300,ease:Phaser.Math.Easing.Quadratic.Out,props:{x:100}},aE=function(e){function t(t){return e.call(this,iE,t)||this}return(0,o.Z)(t,e),t.prototype.buildConfig=function(t,n){if(null!=n&&n.props){var i=n.props.x;n.props.x=function(e){return e.x+i}}e.prototype.buildConfig.call(this,t,n)},t}(La.Z),rE=Ka.Z.DEFAULT,sE=rE.KEY,oE=rE.FRAME,cE=function(e){function t(t,n){var i;return(i=e.call(this,t)||this).avatar=void 0,i.button=void 0,i.payload=void 0,i.payload=n,i.createAvatar(),i.createButton(),i.scene.add.existing((0,Na.Z)(i)),i}(0,o.Z)(t,e);var n=t.prototype;return n.createAvatar=function(){var e=this.payload,t=e.playerId,n=e.playerPhoto;this.avatar=new Hc(this.scene,{id:t,url:n,key:sE,frame:oE.AVATAR_FRAME_PURPLE_BIG,background:oE.AVATAR_BG,width:58,height:58,radius:34}),this.avatar.photo.setWorldSize(48,48),this.add(this.avatar),this.avatar.setPosition(0,-15)},n.createButton=function(){var e=this.payload.buttonText;this.button=new Va.Z(this.scene,sE,oE.BUTTON_GREEN_MINOR,61.5,32);var t=this.scene.make.text({text:e,style:{color:"#ffffff",fontFamily:$a.Z.FONT_FAMILY,fontSize:"10px",stroke:"#000000",strokeThickness:2}});t.setHighQuality(),this.button.add(t),this.add(this.button),Phaser.Display.Align.In.Center(t,this.button,0,-1),this.button.setPosition(0,32)},(0,te.Z)(t,[{key:"onClick",set:function(e){this.button.setInteractive({useHandCursor:!0}),this.button.on(Phaser.Input.Events.GAMEOBJECT_POINTER_DOWN,e)}}]),t}(Phaser.GameObjects.Container),lE=cE,uE=function(e){function t(t,n,i){var a;return(a=e.call(this,t)||this).currentPlayerId=void 0,a.maskGraphics=void 0,a.group=void 0,a.onChallenge=void 0,a.setSize(n,i),a.group=a.scene.add.group(),a.currentPlayerId=a.scene.player.getPlayerId(),a.createMask(),a}(0,o.Z)(t,e);var n=t.prototype;return n.updateData=function(e){var t=this;this.group.clear(!0,!0);var n=function(){if(!GameCore.Utils.Object.hasOwn(e,i))return 0;var n=e[i],a=n.playerId,r=n.photo;if(t.currentPlayerId===a)return 0;var s=new lE(t.scene,{playerId:a,playerPhoto:r,buttonText:t.scene.lang.Text.CHALLENGE});t.onChallenge&&(s.onClick=function(){t.onChallenge(a)}),t.add(s),t.group.add(s)};for(var i in e)n();this.group.setX(-99,66),this.updateMaskPosition()},n.createMask=function(){this.maskGraphics=this.scene.make.graphics({fillStyle:{color:255,alpha:1},visible:!0});var e=this.width,t=this.height;this.maskGraphics.fillRect(-e/2,-t/2,e,t),this.setMask(this.maskGraphics.createGeometryMask()),this.updateMaskPosition()},n.updateMaskPosition=function(){var e=this.getWorldPosition(),t=e.x,n=e.y;this.maskGraphics.setPosition(t,n)},t}(Phaser.GameObjects.Container),hE=uE,dE=Ka.Z.DEFAULT,pE=dE.KEY,fE=dE.FRAME,gE=function(e){function t(t){var n;return(n=e.call(this,t)||this).moveIndex=void 0,n.currentPlayerId=void 0,n.linesGroup=void 0,n.background=void 0,n.loading=void 0,n.leftArrow=void 0,n.rightArrow=void 0,n.matchingBlock=void 0,n.friendList=void 0,n.nextAnim=void 0,n.prevAnim=void 0,n.handlePrevList=function(){var e,t;null!=(e=n.prevAnim)&&null!=(e=e.tween)&&e.isPlaying()&&n.prevAnim.tween.complete(),null==(t=n.prevAnim)||t.remove();var i=n.friendList.group.getChildren();n.prevAnim=new aE({targets:i,duration:300,props:{x:66},onStart:function(){n.leftArrow.setVisible(n.moveIndex>0)},onComplete:function(){n.rightArrow.setVisible(n.moveIndex<i.length-4)}}),n.moveIndex--,n.prevAnim.play()},n.handleNextList=function(){var e,t;null!=(e=n.nextAnim)&&null!=(e=e.tween)&&e.isPlaying()&&n.nextAnim.tween.complete(),null==(t=n.nextAnim)||t.remove();var i=n.friendList.group.getChildren();n.nextAnim=new aE({targets:i,duration:300,props:{x:-66},onStart:function(){n.rightArrow.setVisible(n.moveIndex<i.length-4)},onComplete:function(){n.leftArrow.setVisible(n.moveIndex>0)}}),n.moveIndex++,n.nextAnim.play()},n.currentPlayerId=n.scene.player.getPlayerId(),n.createBackground(),n.createLines(),n.createFriendList(),n.createMatchingBlock(),n.createLeftArrow(),n.createRightArrow(),n.createLoading(),n.scene.add.existing((0,Na.Z)(n)),n}(0,o.Z)(t,e);var n=t.prototype;return n.updateFriends=function(e){this.loading.setVisible(!1);var t=0;for(var n in e)if(GameCore.Utils.Object.hasOwn(e,n)){var i=e[n].playerId;this.currentPlayerId!==i&&t++}if(t<1)this.matchingBlock.revive();else{this.matchingBlock.kill();var a=t>4;this.rightArrow.setVisible(a),this.linesGroup.setVisible(!0),this.moveIndex=0,this.friendList.updateData(e)}},n.createBackground=function(){this.background=new Gc(this.scene,0,0,306,130),this.add(this.background)},n.createLines=function(){this.linesGroup=this.scene.make.group({key:pE,frame:fE.LINE_VER,repeat:2}),this.linesGroup.children.each((function(e){var t=e;t.setAlpha(.6),t.setWorldSize(2,106)})),this.linesGroup.setX(-66,66),this.linesGroup.setVisible(!1),this.add(nE()(this.linesGroup.children))},n.createLeftArrow=function(){this.leftArrow=new Va.Z(this.scene,pE,fE.ICON_ARROW_BIG,18.5,33.5),this.leftArrow.setVisible(!1),this.leftArrow.setPosition(-150,0),this.leftArrow.onClick=this.handlePrevList,this.add(this.leftArrow)},n.createRightArrow=function(){this.rightArrow=new Va.Z(this.scene,pE,fE.ICON_ARROW_BIG,18.5,33.5),this.rightArrow.setVisible(!1),this.rightArrow.setPosition(150,0),this.rightArrow.button.setFlipX(!0),this.rightArrow.onClick=this.handleNextList,this.add(this.rightArrow)},n.createLoading=function(){this.loading=new Uc.Z(this.scene),this.loading.setDisplaySize(80,80),this.add(this.loading)},n.createFriendList=function(){var e=this.background,t=e.width,n=e.height;this.friendList=new hE(this.scene,t-27,n),this.add(this.friendList)},n.createMatchingBlock=function(){this.matchingBlock=new lE(this.scene,{playerId:oa.Z.ICON_EARTH.KEY,playerPhoto:oa.Z.ICON_EARTH.FILE,buttonText:this.scene.lang.Text.RANDOM}),this.matchingBlock.button.setName("JoinGroup"),this.matchingBlock.kill(),this.add(this.matchingBlock)},t}(Phaser.GameObjects.Container),mE=gE,vE=Ka.Z.DEFAULT,yE=vE.KEY,EE=vE.FRAME,AE=function(e){function t(t){var n;return(n=e.call(this,t,{key:yE,frame:EE.AVATAR_FRAME_BLUE_BIG,background:EE.AVATAR_BG_BIG,width:104.5,height:109.5,loadDelay:100})||this).glow=void 0,n.crown=void 0,n.glowAnimation=void 0,n.createGlow(),n.createCrown(),n.createGlowAnimation(),n.scene.add.existing((0,Na.Z)(n)),n}(0,o.Z)(t,e);var n=t.prototype;return n.updateData=function(e){var t=e.isWin,n=e.id,i=e.photo;this.glow.setVisible(t),this.crown.setVisible(t),t?this.avtFrame.setFrame(EE.AVATAR_FRAME_BLUE_BIG):this.avtFrame.setFrame(EE.AVATAR_FRAME_PURPLE_BIG),this.loadPhoto(n,i),this.moveBelow(this.glow,this.background)},n.setPhoto=function(t){e.prototype.setPhoto.call(this,t);var n=this.payload,i=n.width,a=n.height,r=Math.min(i,a)-24;this.photo.setWorldSize(r,r)},n.createGlow=function(){var e=Ka.Z.EFFECTS,t=e.KEY,n=e.FRAME;this.glow=this.scene.make.image({key:t,frame:n.FX_GLOW_LIGHT}),this.glow.setVisible(!1),this.glow.setWorldSize(206,199.5),this.add(this.glow)},n.createCrown=function(){this.crown=this.scene.make.image({key:yE,frame:EE.ICON_CROWN}),this.crown.setVisible(!1),this.crown.setPosition(-40,-50),this.crown.setWorldSize(57,57.5),this.add(this.crown)},n.createGlowAnimation=function(){this.glowAnimation=new nu.Z({targets:[this.glow],repeat:-1,duration:6e3}),this.glowAnimation.play()},t}(Hc),SE=AE,bE=function(e){function t(t){var n;return(n=e.call(this,t)||this).avatarLeft=void 0,n.avatarRight=void 0,n.scoreLeft=void 0,n.scoreRight=void 0,n.scene=t,n.createVsText(),n.createAvatarLeft(),n.createAvatarRight(),n.createScoreLeft(),n.createScoreRight(),n.scene.add.existing((0,Na.Z)(n)),n}(0,o.Z)(t,e);var n=t.prototype;return n.createVsText=function(){var e=this.scene.make.bitmapText({font:$a.Z.PRIMARY.KEY,size:this.scene.fontSize(50),text:this.scene.lang.Text.VS,origin:{x:.5,y:.5}});this.add(e)},n.createAvatarLeft=function(){this.avatarLeft=new SE(this.scene),this.avatarLeft.setPosition(-100,0),this.add(this.avatarLeft)},n.createAvatarRight=function(){this.avatarRight=new SE(this.scene),this.avatarRight.setPosition(100,0),this.add(this.avatarRight)},n.createScoreLeft=function(){this.scoreLeft=this.scene.make.bitmapText({font:$a.Z.PRIMARY.KEY,size:this.scene.fontSize(25),origin:{x:.5,y:.5}}),Phaser.Display.Align.In.BottomCenter(this.scoreLeft,this.avatarLeft,0,20),this.add(this.scoreLeft)},n.createScoreRight=function(){this.scoreRight=this.scene.make.bitmapText({font:$a.Z.PRIMARY.KEY,size:this.scene.fontSize(25),origin:{x:.5,y:.5}}),Phaser.Display.Align.In.BottomCenter(this.scoreRight,this.avatarRight,0,20),this.add(this.scoreRight)},t}(Phaser.GameObjects.Container),TE=bE,wE=Ka.Z.DEFAULT.FRAME,CE=function(e){function t(){for(var t,n,a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=e.call.apply(e,P()(t=[this]).call(t,r))||this).result=void 0,n.dinoTitle=void 0,n.friendList=void 0,n.footerButtons=void 0,n.scaleAnimation=void 0,n.counterScoreTimer=void 0,n.counterPlayerScore=void 0,n.counterOpponentScore=void 0,n.confettiEffect=void 0,n.run=function(){n.loadFriendList(),n.updateResultInfo()},n.handleChallengeFriend=function(e){n.storage.dispatch(Io(e))},n.handlePlayWithFriend=(0,s.Z)(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.storage.dispatch(function(){var e=(0,s.Z)(h().mark((function e(t,n){var a,r,s,o,c,l,u,d,p,f,g,m,v,y,E,A,S,b;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,a=window.game,r=a.player,s=a.facebook,a.globalScene.screen.open(Da.o4.NOTIFY_SCREEN,{message:window.game.lang.Text.LOADING,loading:!0}),o=r.getPlayerId(),c=r.getConnectedPlayerIds(100,0),l=r.getConnectedPlayers(100,0),u=n(),d=As(u)||[],p=we()(c).call(c,(function(e){return xt()(d).call(d,e)<0&&e!=o})),f="",g="",m=s.contextType,v=null,p.length>0&&(y=Phaser.Math.RND.between(0,p.length-1),f=p[y],l[f]&&(v=l[f],t({type:Qt.x2,payload:{opponentId:f}}))),!f||"string"!==typeof f){e.next=18;break}return e.next=17,s.createAsync(f);case 17:g=e.sent;case 18:if(v&&g){e.next=26;break}return e.next=21,t(vo(!0));case 21:return e.next=23,t(Po());case 23:return e.next=25,t(vo(!1));case 25:return e.abrupt("return");case 26:return So({contextId:g}),t(yo()),A=(E=v).name,S=E.photo,b={playerId:f,name:A,photo:S},e.next=32,t(Bo(ua,b));case 32:t(ma(g,m)),To(1e3),e.next=42;break;case 36:if(e.prev=36,e.t0=e.catch(0),To(1e3),!(e.t0 instanceof is)){e.next=41;break}return e.abrupt("return");case 41:(0,i.tO)(e.t0);case 42:return e.prev=42,e.finish(42);case 44:case"end":return e.stop()}}),e,null,[[0,36,42,44]])})));return function(t,n){return e.apply(this,arguments)}}());case 1:case"end":return e.stop()}}),e)}))),n.handleHomeClick=function(){n.scene.switch(Sa.C.DASHBOARD_SCENE)},n.handleShareMatchResult=function(){n.storage.dispatch(function(){var e=(0,s.Z)(h().mark((function e(t,n){var a,r,s,o,c,l,u,d,p,f,g;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=window.game,r=a.player,s=a.analytics,o=a.facebook,c=a.globalScene,e.prev=1,c.screen.open(Da.o4.NOTIFY_SCREEN,{message:window.game.lang.Text.LOADING,loading:!0}),l=n(),e.next=6,nh(l);case 6:return u=e.sent,Ju(u),d=r.getPlayer(),p=d.playerId,f=d.name,g=d.photo,e.next=11,o.shareAsync({text:"Pheww, a great match!",intent:"SHARE",image:u||"",data:{playerId:p,playerName:f,playerPhoto:g,type:ra}});case 11:s.event(Ht._.SHARE,{share_content_type:"MatchResult",success:!0}),e.next=18;break;case 14:e.prev=14,e.t0=e.catch(1),s.event(Ht._.SHARE,{share_content_type:"MatchResult",success:!1}),(0,i.tO)(e.t0);case 18:return e.prev=18,c.screen.close(Da.o4.NOTIFY_SCREEN),e.finish(18);case 21:case"end":return e.stop()}}),e,null,[[1,14,18,21]])})));return function(t,n){return e.apply(this,arguments)}}())},n.handleMatchingGroup=(0,s.Z)(h().mark((function e(){var t,i,a,r,s,o,c,l,u;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=(0,Na.Z)(n),i=t.player,a=t.storage,r=t.game,s=t.facebook,e.prev=1,r.globalScene.screen.open(Da.o4.NOTIFY_SCREEN,{message:n.lang.Text.MATCHING,loading:!0}),o=i.getPlayer(),c="global","en"===(l=sh(o.locale))&&(c="en"),"in"===l&&(c="in"),e.next=10,s.matchPlayerAsync(c,!0,!0);case 10:if(u=e.sent,r.globalScene.screen.close(Da.o4.NOTIFY_SCREEN),u){e.next=14;break}return e.abrupt("return");case 14:a.dispatch(xo()),e.next=21;break;case 17:e.prev=17,e.t0=e.catch(1),r.globalScene.screen.close(Da.o4.NOTIFY_SCREEN);case 21:case"end":return e.stop()}}),e,null,[[1,17]])}))),n.runConfettiEffect=function(){n.confettiEffect.run(0,675,380,675)},n}(0,o.Z)(t,e);var n=t.prototype;return n.preload=function(){this.events.on("wake",this.run),this.events.on("create",this.run)},n.updateResultScreen=function(e,t,n,i){this.updateTitle(e,t,n,i),this.updateAvatar(e,t,n,i),this.updateSoundEffect(e,t,n,i)},n.updateResultInfo=function(){var e=this.storage.getState(),t=os(e),n=Ls(e),i=this.player.getPlayer(),a=i.playerId,r=i.photo,s=Os(e),o=s.playerId,c=s.photo,l=(n[a]||{}).score,u=void 0===l?0:l,h=(n[o]||{}).score,d=void 0===h?0:h,p=Bs(e,{playerId:a}),f=_s(e,{opponentId:o});t===ha&&(p=!0,f=!0),p&&f?this.runScoreCounter(p,f,u,d):(this.setPlayerScore(u),this.setOpponentScore(d),this.updateResultScreen(p,f,u,d)),this.result.avatarLeft.updateData({id:a,photo:r,isWin:!1}),this.result.avatarRight.updateData({id:o,photo:c,isWin:!1})},n.updateSoundEffect=function(e,t,n,i){},n.updateAvatar=function(e,t,n,i){var a=this.storage.getState(),r=this.player.getPlayer(),s=r.playerId,o=r.photo,c=Os(a),l=c.playerId,u=c.photo,h=e&&t;if(this.result.avatarLeft.updateData({id:s,photo:o,isWin:h&&n>i}),this.result.avatarRight.updateData({id:l,photo:u,isWin:h&&i>n}),h){var d=n>i?this.result.avatarLeft:this.result.avatarRight;this.runScaleAnimation(d)}},n.updateTitle=function(e,t,n,i){e&&t?n===i?(this.dinoTitle.isDinoSad(!1),this.dinoTitle.title.setText("Draw")):n>i?(this.trumpetFire(),this.runConfettiEffect(),this.dinoTitle.isDinoSad(!1),this.dinoTitle.setTitle("You Win!")):n<i&&(this.dinoTitle.isDinoSad(!0),this.dinoTitle.setTitle("You Lose")):(this.dinoTitle.isDinoSad(!1),this.dinoTitle.setTitle("Waiting"))},n.loadFriendList=function(){var e=this.storage.getState(),t=tt(e);this.friendList.updateFriends(t)},n.create=function(){e.prototype.create.call(this),this.createBackground(oa.Z.OTHER_BACKGROUND.KEY),this.createDinoTitle(),this.createResultMatch(),this.createFriendList(),this.createFooter(),this.createConfettiEffect()},n.createDinoTitle=function(){this.dinoTitle=new _c(this,{title:"Result"}),this.dinoTitle.changeBackground(wE.TRUMPET,278.5,82),this.dinoTitle.background.y+=20,Phaser.Display.Align.In.TopCenter(this.dinoTitle,this.gameZone,0,-90)},n.createResultMatch=function(){this.result=new TE(this),Phaser.Display.Align.In.Center(this.result,this.gameZone,0,-50)},n.createFriendList=function(){this.friendList=new mE(this),this.friendList.friendList.onChallenge=this.handleChallengeFriend,this.friendList.matchingBlock.onClick=this.handleMatchingGroup,Phaser.Display.Align.In.Center(this.friendList,this.gameZone,0,120)},n.createFooter=function(){this.footerButtons=new Bh(this),Phaser.Display.Align.In.BottomCenter(this.footerButtons,this.gameZone,0,-80),this.footerButtons.homeButton.onClick=this.handleHomeClick,this.footerButtons.playButton.onClick=this.handlePlayWithFriend},n.setPlayerScore=function(e){this.result.scoreLeft.setText(""+e)},n.setOpponentScore=function(e){this.result.scoreRight.setText(""+e)},n.runScoreCounter=function(e,t,n,i){var a,r,s,o=this;null==(a=this.counterScoreTimer)||a.remove(),null==(r=this.counterPlayerScore)||r.remove(),null==(s=this.counterOpponentScore)||s.remove(),this.counterScoreTimer=this.time.delayedCall(2800,(function(){o.setPlayerScore(n),o.setOpponentScore(i),o.updateResultScreen(e,t,n,i)})),this.counterPlayerScore=this.tweens.addCounter({from:0,to:n,delay:500,duration:2e3,onUpdate:function(e){var t=Math.floor(e.getValue());o.setPlayerScore(t)}}),this.counterOpponentScore=this.tweens.addCounter({from:0,to:i,delay:500,duration:2e3,onUpdate:function(e){var t=Math.floor(e.getValue());o.setOpponentScore(t)}})},n.runScaleAnimation=function(e){this.scaleAnimation||(this.scaleAnimation=new iu.Z({targets:[e],delay:0,duration:500,ease:Phaser.Math.Easing.Elastic.Out,easeParams:[.1,.45],props:{scale:1.1}}),this.scaleAnimation.play())},n.createConfettiEffect=function(){this.confettiEffect=new Vu.Z(this),this.confettiEffect.setDepth(_a.Z.EFFECT)},n.trumpetFire=function(){if(this.dinoTitle.background&&this.dinoTitle.background.active){var e=this.dinoTitle.background.scale,t=new iu.Z({targets:[this.dinoTitle.background],yoyo:!0,duration:200,ease:Phaser.Math.Easing.Back.InOut,easeParams:[.1,.45],props:{scale:1.15*e},onComplete:function(){t.remove()}});t.play()}},t}(Mo.Z);var IE=CE,PE=function(e){function t(){for(var t,n,i=arguments.length,a=new Array(i),r=0;r<i;r++)a[r]=arguments[r];return(n=e.call.apply(e,P()(t=[this]).call(t,a))||this).isVisible=!0,n.browserPrefixes=["moz","ms","o","","webkit"],n.visibleCallbacks=[],n.hiddenCallbacks=[],n.handleVisibilityChange=function(e){if("boolean"===typeof e)return e?n.onVisibleEvent():n.onHiddenEvent();var t=n.getBrowserPrefix(),i=n.getHiddenPropertyName(t);return document[i]?n.onHiddenEvent():n.onVisibleEvent()},n}(0,o.Z)(t,e);var n=t.prototype;return n.configure=function(){var e=this,t=this.getBrowserPrefix(),n=this.getVisibilityEvent(t);document.addEventListener(n,this.handleVisibilityChange,!1),document.addEventListener("focus",(function(){e.handleVisibilityChange(!0)}),!1),document.addEventListener("blur",(function(){e.handleVisibilityChange(!1)}),!1),window.addEventListener("focus",(function(){e.handleVisibilityChange(!0)}),!1),window.addEventListener("blur",(function(){e.handleVisibilityChange(!1)}),!1)},n.addEventVisible=function(e){this.visibleCallbacks.push(e)},n.addEventHidden=function(e){this.hiddenCallbacks.push(e)},n.isGameVisible=function(){return this.isVisible},n.getHiddenPropertyName=function(e){return e?e+"Hidden":"hidden"},n.getVisibilityEvent=function(e){return(e||"")+"visibilitychange"},n.getBrowserPrefix=function(){for(var e=0;e<this.browserPrefixes.length;e++)if(this.getHiddenPropertyName(this.browserPrefixes[e])in document)return this.browserPrefixes[e];return""},n.onVisibleEvent=function(){this.isVisible||(this.isVisible=!0,this.visibleCallbacks.forEach((function(e){e()})))},n.onHiddenEvent=function(){this.isVisible&&(this.isVisible=!1,this.hiddenCallbacks.forEach((function(e){e()})))},t}(Phaser.Plugins.BasePlugin),xE=PE,kE=n(588),OE=n(589),RE=["Enable"],BE=function(e){function t(){return e.apply(this,arguments)||this}(0,o.Z)(t,e);var i=t.prototype;return i.boot=function(){var t=(0,s.Z)(h().mark((function t(){return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.prototype.boot.call(this),this.addExtraGameObjectMethods(),this.addExtraFBInstantFunctions(),this.addPlugins(),t.next=6,this.addDevPlugins();case 6:return t.next=8,this.initAdsAsync();case 8:this.addScenes(),this.addDevScenes(),this.initWorld(),this.initStorage(),this.initLanguage(),this.initVisibilityChangeHandler(),this.initUtils(),this.initRollbar(),this.initConsole(),this.initDebugger(),this.initStatistics(),this.initParticleEditor(),this.initProfilerPlugin(),this.initAdaptivePerformance(),this.initCanvasRecorderPlugin();case 23:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),i.start=function(){e.prototype.start.call(this)},i.addExtraGameObjectMethods=function(){var e=new v(this);e.addKillRevive(),e.addKillReviveGroup(),e.addDrawDebugBox(),e.addSetWorldSize(),e.addSetWorldSizeForContainer(),e.addGetWorldPosition(),e.addHighQuality(),e.addSetLineHeightForBitmapText()},i.addExtraFBInstantFunctions=function(){var e=new d.Z(this.facebook);this.facebook.getLocale=e.getLocale,this.facebook.shareAsync=e.shareAsync,this.facebook.inviteAsync=e.inviteAsync,this.facebook.switchAsync=e.switchAsync,this.facebook.chooseAsync=e.chooseAsync,this.facebook.createAsync=e.createAsync,this.facebook.sendMessage=e.sendMessage,this.facebook.getContextID=e.getContextID,this.facebook.getPlayerToken=e.getPlayerToken,this.facebook.matchPlayerAsync=e.matchPlayerAsync,this.facebook.getContextPlayers=e.getContextPlayers,this.facebook.setLoadingProgress=e.setLoadingProgress,this.facebook.getTournamentAsync=e.getTournamentAsync,this.facebook.attemptToAddShortcut=e.attemptToAddShortcut,this.facebook.attemptToSubscribeBot=e.attemptToSubscribeBot,this.facebook.postSessionScoreAsync=e.postSessionScoreAsync,this.facebook.getRewardedVideoAsync=e.getRewardedVideoAsync,this.facebook.getInterstitialAdAsync=e.getInterstitialAdAsync,this.facebook.sendNotificationAsync=e.sendNotificationAsync,this.facebook.attemptToSwitchGame=e.attemptToSwitchGame,this.facebook.isSupportedAPI=e.isSupportedAPI,e.injectTournament(),this.facebook.progressLoading=new g(this)},i.addPlugins=function(){this.plugins.install("Storage",Wi,!0,"storage"),this.plugins.install("Rollbar",Zt,!0,"rollbar"),this.plugins.install("AdsManager",W,!0,"ads"),this.plugins.install("AuthManager",he,!0,"auth"),this.plugins.install("AudioManager",ee,!0,"audio"),this.plugins.install("WorldManager",na,!0,"world"),this.plugins.install("PlayerManager",vt,!0,"player"),this.plugins.install("ProfileManager",It,!0,"profile"),this.plugins.install("LanguageManager",Ca,!0,"lang"),this.plugins.install("AnalyticsManager",j,!0,"analytics"),this.plugins.install("AdaptivePerformance",Se,!0,"performance"),this.plugins.install("VisibilityChangeHandler",xE,!0,"visibility"),this.plugins.installScenePlugin("textStyler",qi,"textStyler"),this.plugins.installScenePlugin("ScreenManager",jt,"screen"),this.plugins.installScenePlugin("FrameCapture",fe,"frameCapture"),window.SpinePlugin&&this.plugins.installScenePlugin("SpinePlugin",SpinePlugin,"spine"),this.storage=this.plugins.get("Storage"),this.rollbar=this.plugins.get("Rollbar"),this.ads=this.plugins.get("AdsManager"),this.auth=this.plugins.get("AuthManager"),this.audio=this.plugins.get("AudioManager"),this.world=this.plugins.get("WorldManager"),this.player=this.plugins.get("PlayerManager"),this.lang=this.plugins.get("LanguageManager"),this.profile=this.plugins.get("ProfileManager"),this.analytics=this.plugins.get("AnalyticsManager"),this.performance=this.plugins.get("AdaptivePerformance"),this.visibility=this.plugins.get("VisibilityChangeHandler")},i.addDevPlugins=function(){var e=(0,s.Z)(h().mark((function e(){var t,i,a,r,s,o;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(GameCore.Utils.Valid.isDebugger()){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,Promise.all([n.e(7),n.e(942)]).then(n.bind(n,610));case 4:return t=e.sent.default,e.next=7,Promise.all([n.e(498),n.e(739),n.e(530)]).then(n.bind(n,611));case 7:return i=e.sent.default,e.next=10,n.e(401).then(n.bind(n,612));case 10:return a=e.sent.default,e.next=13,Promise.all([n.e(498),n.e(123)]).then(n.bind(n,613));case 13:return r=e.sent.default,e.next=16,Promise.all([n.e(498),n.e(803)]).then(n.bind(n,614));case 16:return s=e.sent.default,e.next=19,Promise.all([n.e(498),n.e(616),n.e(613)]).then(n.bind(n,615));case 19:o=e.sent.default,this.plugins.install("Console",t,!0,"console"),this.plugins.install("Debugger",i,!0,"debugger"),this.plugins.install("Statistics",a,!0,"statistics"),this.plugins.install("Profiler",r,!0,"profiler"),this.plugins.install("ParticleEditor",s,!0,"particle-editor"),this.plugins.install("CanvasRecorder",o,!0,"canvasRecorder"),this.eruda=this.plugins.get("Console"),this.debugger=this.plugins.get("Debugger"),this.statistics=this.plugins.get("Statistics"),this.profiler=this.plugins.get("Profiler"),this.particleEditor=this.plugins.get("ParticleEditor"),this.canvasRecorder=this.plugins.get("CanvasRecorder");case 32:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),i.addScenes=function(){this.scene.add(Sa.C.BOOT_SCENE,Ba,!0),this.scene.add(Sa.C.LOAD_SCENE,eE,!1),this.scene.add(Sa.C.GAME_SCENE,Ev,!1),this.scene.add(Sa.C.GAME_OVER_SCENE,ed,!1),this.scene.add(Sa.C.DASHBOARD_SCENE,Zu,!1),this.scene.add(Sa.C.LEADERBOARD_SCENE,Zv,!1),this.scene.add(Sa.C.RESULT_MATCH_SCENE,IE,!1),this.scene.add(Sa.C.GLOBAL_SCENE,rr.Z,!1)},i.addDevScenes=function(){var e=(0,s.Z)(h().mark((function e(){var t,i;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(GameCore.Utils.Valid.isDebugger()){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,n.e(638).then(n.bind(n,616));case 4:return t=e.sent.default,e.next=7,n.e(358).then(n.bind(n,617));case 7:i=e.sent.default,this.scene.add(Sa.C.TEST_SCENE,t,!1),this.scene.add(Sa.C.ANIMATIONS_SCENE,i,!1);case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),i.initAdsAsync=function(){var e=(0,s.Z)(h().mark((function e(){var t,n,i;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=GameCore.Configs.Ads,e.next=3,this.getAdServiceInstance();case 3:(n=e.sent).setGame(this),i=(0,r.Z)({},t.InterstitialAdOptions),this.ads.configure(n,{enabled:t.Enabled,calculateSafeAreaBottom:t.CalculateSafeAreaBottom,enableRewardVideoResetInterstitial:t.EnableRewardVideoResetInterstitial,interstitialAdOptions:i,rewardAdOptions:t.RewardAdOptions,bannerAdOptions:t.BannerAdOptions});case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),i.getAdServiceInstance=function(){var e=(0,s.Z)(h().mark((function e(){var t,i,a,r;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=GameCore.Configs.Ads,i=t.AdService,!t.Mockup.Enable){e.next=6;break}return e.next=4,n.e(131).then(n.bind(n,618));case 4:return a=e.sent.default,e.abrupt("return",a);case 6:if("google"!==i){e.next=19;break}return e.prev=7,e.next=10,this.initGoogleAdInstanceAsync();case 10:if(null===(r=e.sent)){e.next=13;break}return e.abrupt("return",r);case 13:e.next=19;break;case 15:return e.prev=15,e.t0=e.catch(7),e.abrupt("return",kE.default);case 19:return e.abrupt("return",kE.default);case 20:case"end":return e.stop()}}),e,this,[[7,15]])})));return function(){return e.apply(this,arguments)}}(),i.initGoogleAdInstanceAsync=function(){var e=(0,s.Z)(h().mark((function e(){var t,n,i,a,r,s,o,c;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("loaded"!==OE.default.initStatus){e.next=2;break}return e.abrupt("return",OE.default);case 2:if(t=GameCore.Configs.Ads.AdServiceConfigs.Google){e.next=6;break}return e.abrupt("return",null);case 6:return n=t.DataAdClient,i=t.DataAdChannel,a=t.DataAdBreakTest,r=t.DataAdFrequencyHint,s=t.DataAdHost,o=t.MaxScriptLoadRetryCount,c={dataAdClient:n,dataAdChannel:i,dataAdBreakTest:a,dataAdFrequencyHint:r,dataAdHost:s,maxScriptLoadRetryCount:o},e.prev=8,OE.default.setGame(this),e.next=12,OE.default.initGoogleAdsAsync(c);case 12:return e.abrupt("return",OE.default);case 15:return e.prev=15,e.t0=e.catch(8),e.abrupt("return",null);case 19:case"end":return e.stop()}}),e,this,[[8,15]])})));return function(){return e.apply(this,arguments)}}(),i.initWorld=function(){var e=GameCore.Configs.Game,t=e.AutoResize,n=e.PortraitRatio,i=e.PortraitWidth,a=e.PortraitHeight,r=e.LandscapeRatio,s=e.LandscapeWidth,o=e.LandscapeHeight,c=t,l=e.DisableLandscape,u=e.FullSizeOnLandscape,h=n,d=i,p=a,f=r,g=s,m=o;this.world.configure({autoResize:c,portraitRatio:h,portraitWidth:d,portraitHeight:p,landscapeRatio:f,landscapeWidth:g,landscapeHeight:m,disableLandscape:l,fullSizeOnLandscape:u}),this.world.resize(e.ForcePixelRatio)},i.initStorage=function(){var e=new Aa(this);this.storage.setInitiator(e)},i.initLanguage=function(){var e=this.facebook.getLocale();this.lang.configure({locale:e,upperCaseText:!0})},i.initVisibilityChangeHandler=function(){this.visibility.configure()},i.initUtils=function(){this.handlePauseAudio()},i.initConsole=function(){GameCore.Utils.Valid.isDebugger()&&(GameCore.Configs.Debugger.ShowConsole&&this.eruda.configure({tool:["console","info"],defaults:{theme:"Dark"}}))},i.initDebugger=function(){if(GameCore.Utils.Valid.isDebugger()){var e=GameCore.Configs.Debugger,t=e.ShowInspector,n=e.ShowMonitoring;(t||n)&&this.debugger.configure(GameCore.Configs.Debugger)}},i.initStatistics=function(){GameCore.Utils.Valid.isDebugger()&&(GameCore.Configs.Statistics.Enable&&this.statistics.configure(GameCore.Configs.Statistics))},i.initParticleEditor=function(){GameCore.Utils.Valid.isDebugger()&&(GameCore.Configs.ParticleEditor.Enable&&this.particleEditor.configure(GameCore.Configs.ParticleEditor))},i.initProfilerPlugin=function(){GameCore.Utils.Valid.isDebugger()&&(GameCore.Configs.ProfilerPlugin.Enable&&this.profiler.configure())},i.initAdaptivePerformance=function(){var e=GameCore.Configs.Performance,t=e.Enable,n=(0,a.Z)(e,RE);if(t){var i=this.world.getPixelRatio();this.performance.configure((0,r.Z)({pixelRatio:i},n)),this.performance.active()}},i.initCanvasRecorderPlugin=function(){var e=this;if(GameCore.Utils.Valid.isDebugger()){var t=GameCore.Configs.CanvasRecorder;if(t.Enable){var n=t.Options,i=n.Type,a=n.Quality,r=n.RecordFps,o=n.SyncFps;this.canvasRecorder.configure({type:i,quality:a,syncFps:o,recordFps:r});var c=document.querySelector("canvas");if(c){this.canvasRecorder.setCanvas(c);var u=this.canvasRecorder.getOptions(),d=this.canvasRecorder.waitNextFrame;this.canvasRecorder.waitNextFrame=(0,s.Z)(h().mark((function t(){return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!u.syncFps){t.next=5;break}return e.loop.sleep(),t.abrupt("return",new(l())((function(t){e.events.once(Phaser.Core.Events.POST_RENDER,t),e.loop.lastTime=1e3/u.recordFps,e.loop.step()})));case 5:return e.loop.wake(),t.abrupt("return",d.call(e.canvasRecorder));case 7:case"end":return t.stop()}}),t)})))}}}},i.initRollbar=function(){GameCore.Configs.Rollbar.Enable&&this.rollbar.setup()},i.handlePauseAudio=function(){var e=this;this.sound.pauseOnBlur=!1,window.ignoreResumeMusicOnFocus=!1,this.visibility.addEventVisible((function(){e.audio.unmuteAll(),window.ignoreResumeMusicOnFocus||e.audio.playMusic()})),this.visibility.addEventHidden((function(){e.audio.muteAll(),e.audio.stopAllSounds(),e.audio.pauseMusic()}))},i.removeUnusedPipelines=function(){var e=this.renderer;if(e instanceof Phaser.Renderer.WebGL.WebGLRenderer){var t=e.pipelines,n=Phaser.Renderer.WebGL.Pipelines;if(n)[n.ROPE_PIPELINE,n.LIGHT_PIPELINE,n.POSTFX_PIPELINE,n.POINTLIGHT_PIPELINE,n.BITMAPMASK_PIPELINE].forEach((function(e){var n;null==(n=t.get(e))||n.destroy(),t.remove(e)}))}},t}(Phaser.Game),_E=BE,DE=GameCore.Configs.Debugger.ShowInspector,NE={parent:"app",type:Phaser.AUTO,width:0,height:0,scale:{autoRound:!0},dom:{createContainer:!1},loader:{maxParallelDownloads:6,crossOrigin:"no-cros"},input:{gamepad:!1,keyboard:DE,touch:{capture:!0},smoothFactor:1,activePointers:1,windowEvents:!1},disableContextMenu:!0,render:{antialias:!0,transparent:!1,clearBeforeRender:!1},physics:{default:"arcade",arcade:{gravity:{y:0}}},plugins:{global:[]}};(0,i.j6)();var LE=setInterval((function(){window.__analyticsInitiated&&(window.__fbGameReady=!1,clearInterval(LE),clearInterval(window.__fbInstantLoadingTimer),GameSDK.setLoadingProgress(30),gtag("event","app_initialize",{send_to:["GA"]}),function(){try{var e=new _E(NE);window.game=e}catch(t){(0,i.tO)(t)}}())}),50)},593:function(e,t,n){"use strict";n.d(t,{H$:function(){return E},Z5:function(){return y},aV:function(){return A},xB:function(){return S}});var i=n(52),a=n(53),r=n(86),s=n.n(r),o=n(67),c=n.n(o),l=n(39),u=n.n(l),h=n(427),d=n(430),p=n(126),f=GameCore.Configs,g=f.AppId,m=f.OtherHost,v=f.LeadersBoard,y=function(){var e=(0,a.Z)(u().mark((function e(t){var n,a;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n={appId:g,resetScore:0,numberOfLeaders:15,timezone:"utc+0",sortOrder:"desc",statistics:"max",resettable:"manually",description:"no description"},!v.UseMock){e.next=5;break}return e.next=4,(0,p.qZ)(1e3);case 4:return e.abrupt("return",(0,i.Z)({},n,t,{_id:v.LeaderboardId,type:"app_leaderboard",description:"mockup_leaderboard",createdAt:new Date(Date.now()).toISOString(),updatedAt:new Date(Date.now()).toISOString()}));case 5:return"leaderboards",e.next=8,(0,h.v)("leaderboards",(0,i.Z)({},n,t),{},m);case 8:return a=e.sent,e.abrupt("return",(null==a?void 0:a.data)||{});case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),E=function(){var e=(0,a.Z)(u().mark((function e(t,n){var i,a,r,o,l,f,g,y,E,A,S,b;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===n&&(n={}),i=[],!v.UseMock){e.next=7;break}return e.next=5,(0,p.qZ)(1e3);case 5:return l=(o=n).limit,f=void 0===l?10:l,g=o.offset,y=void 0===g?0:g,e.abrupt("return",s()(a=c()(r=new Array(f)).call(r,null)).call(a,(function(e,t){var n=(t+1)*(y+1),i=v.MockOptions.PlayerEntryIndex===t,a={playerId:"player-0"+n,name:"MPlayer "+n,photo:"./assets/images/others/avatar.jpg",rank:n,score:Math.floor(1e5/n+1e4*Math.random())};if(i){var r=window.game.player.getPlayer(),s=r.playerId,o=r.name,c=r.photo;a.playerId=s,a.name=o,a.photo=c}return a})));case 7:return E=GameCore.Utils.String.params(n),A="leaderboards/"+t+"/leaders",e.next=11,(0,h.U)(A+"?"+E,{},m);case 11:if((S=e.sent)&&(null==S||!S.error)){e.next=14;break}throw new d.Z;case 14:if(!((b=(null==S?void 0:S.data)||[]).length<1)){e.next=17;break}return e.abrupt("return",i);case 17:return i=b,e.abrupt("return",i);case 19:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),A=function(){var e=(0,a.Z)(u().mark((function e(t,n,i){var a;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,h.v)("leaderboards/"+t+"/players/"+n,{score:i},{},m);case 2:return a=e.sent,e.abrupt("return",(null==a?void 0:a.data)||{});case 4:case"end":return e.stop()}}),e)})));return function(t,n,i){return e.apply(this,arguments)}}(),S=function(){var e=(0,a.Z)(u().mark((function e(t,n){var i,a,r,s,o;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=null,t){e.next=3;break}return e.abrupt("return",i);case 3:if(a=v.Prefix+"/"+n+"/players"){e.next=6;break}return e.abrupt("return",i);case 6:return r=GameCore.Utils.String.params({playerIds:t}),e.next=9,(0,h.U)(a+"?"+r,{},m);case 9:if(s=e.sent,!((o=(null==s?void 0:s.data)||[]).length<1)){e.next=13;break}return e.abrupt("return",i);case 13:return i=o[0],e.abrupt("return",i);case 15:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},84:function(e,t,n){"use strict";n.d(t,{_:function(){return i}});var i={BUTTON_CLICK:"button_click",SCREEN_OPEN:"screen_open",LOAD_START:"load_start",LOAD_COMPLETE:"load_complete",APP_READY:"app_ready",TUTORIAL_BEGIN:"tutorial_begin",TUTORIAL_STEP:"tutorial_step",TUTORIAL_COMPLETE:"tutorial_complete",MATCH_START:"match_start",MATCH_RESCUE:"match_rescue",MATCH_END:"match_end",LEVEL_START:"level_start",LEVEL_RESCUE:"level_rescue",LEVEL_END:"level_end",SHARE:"share",INVITE:"invite",MESSAGE:"message",SHORTCUT_CREATE:"shortcut_create",SHORTCUT_CREATE_POPUP:"shortcut_create_popup",BOT_SUBSCRIBE:"bot_subscribe",BOT_SUBSCRIBE_POPUP:"bot_subscribe_popup",AD_LOAD:"ad_load",AD_LOAD_FAILED:"ad_load_failed",AD_SHOW:"ad_show",AD_SHOW_FAILED:"ad_show_failed",MISSING_AD_SHOW:"missing_ad_show",NEW_USER:"new_user",AD_IMPRESSION:"ad_impression",JOIN_GROUP:"join_group",LOG_IN:"log_in",AD_INIT:"ad_init",SWITCH_GAME_POPUP:"switch_game_popup",SWITCH_GAME:"switch_game",TOURNAMENT_SHARE:"tournament_share",TOURNAMENT_CREATE:"tournament_create",TOURNAMENT_POST_SCORE:"tournament_post_score"}},420:function(e,t,n){"use strict";var i=n(421),a=function(){function e(e,t,n,a){this.playerId=void 0,this.name=void 0,this.photo=void 0,this.locale=void 0,this.playerId=e,this.name=t,this.photo=n||i.Z.AVATAR.FILE,this.locale=a||"en_US"}return e.prototype.toObject=function(){return{playerId:this.playerId,name:this.name,photo:this.photo,locale:this.locale}},e}();t.Z=a},429:function(e,t,n){"use strict";n.d(t,{I:function(){return a}});var i=n(425),a=function(e){return{type:i.DW,payload:{sceneKey:e}}}},126:function(e,t,n){"use strict";n.d(t,{F0:function(){return l},Gm:function(){return c},qZ:function(){return o}});var i=n(66),a=n.n(i),r=n(44),s=n.n(r),o=function(e){return new(a())((function(t){return setTimeout(t,e)}))},c=function(e){var t=new Date(e),n=new Date;return t.getDate()===n.getDate()&&t.getMonth()===n.getMonth()&&t.getFullYear()===n.getFullYear()},l=function(e,t){void 0===t&&(t=!0);var n=new Date(e).toISOString();return t?s()(n).call(n,11,-5):s()(n).call(n,14,-5)}},193:function(e,t,n){"use strict";n.d(t,{R0:function(){return s},Tv:function(){return r},j6:function(){return i},sw:function(){return a},tO:function(){return o}});n(419),n(130),n(68),n(102);var i=function(){var e=setInterval((function(){window.Sentry&&clearInterval(e)}),100)},a=function(e,t){window.Sentry&&window.Sentry.addBreadcrumb({category:e,message:t})},r=function(e){window.Sentry&&window.Sentry.setUser(e)},s=function(e,t){},o=function(e){}},422:function(e,t){"use strict";t.Z={GENERIC_NOTIFICATION:0,NEW_USER_NOTIFICATION:1,MONDAY_NOTIFICATION:2,TUESDAY_NOTIFICATION:3,WEDNESDAY_NOTIFICATION:4,THURSDAY_NOTIFICATION:5,FRIDAY_NOTIFICATION:6,SATURDAY_NOTIFICATION:7,SUNDAY_NOTIFICATION:8}},590:function(e,t,n){"use strict";n.d(t,{Z:function(){return r}});var i=JSON.parse('{"data":["Smith","Johnson","Williams","Brown","Jones","Miller","Davis","Garcia","Rodriguez","Wilson","Martinez","Anderson","Taylor","Thomas","Hernandez","Moore","Martin","Jackson","Thompson","White","Lopez","Lee","Gonzalez","Harris","Clark","Lewis","Robinson","Walker","Perez","Hall","Young","Allen","Sanchez","Wright","King","Scott","Green","Baker","Adams","Nelson","Hill","Ramirez","Campbell","Mitchell","Roberts","Carter","Phillips","Evans","Turner","Torres","Parker","Collins","Edwards","Stewart","Flores","Morris","Nguyen","Murphy","Rivera","Cook","Rogers","Morgan","Peterson","Cooper","Reed","Bailey","Bell","Gomez","Kelly","Howard","Ward","Cox","Diaz","Richardson","Wood","Watson","Brooks","Bennett","Gray","James","Reyes","Cruz","Hughes","Price","Myers","Long","Foster","Sanders","Ross","Morales","Powell","Sullivan","Russell","Ortiz","Jenkins","Gutierrez","Perry","Butler","Barnes","Fisher","Henderson","Coleman","Simmons","Patterson","Jordan","Reynolds","Hamilton","Graham","Kim","Gonzales","Alexander","Ramos","Wallace","Griffin","West","Cole","Hayes","Chavez","Gibson","Bryant","Ellis","Stevens","Murray","Ford","Marshall","Owens","Mcdonald","Harrison","Ruiz","Kennedy","Wells","Alvarez","Woods","Mendoza","Castillo","Olson","Webb","Washington","Tucker","Freeman","Burns","Henry","Vasquez","Snyder","Simpson","Crawford","Jimenez","Porter","Mason","Shaw","Gordon","Wagner","Hunter","Romero","Hicks","Dixon","Hunt","Palmer","Robertson","Black","Holmes","Stone","Meyer","Boyd","Mills","Warren","Fox","Rose","Rice","Moreno","Schmidt","Patel","Ferguson","Nichols","Herrera","Medina","Ryan","Fernandez","Weaver","Daniels","Stephens","Gardner","Payne","Kelley","Dunn","Pierce","Arnold","Tran","Spencer","Peters","Hawkins","Grant","Hansen","Castro","Hoffman","Hart","Elliott","Cunningham","Knight","Bradley","Carroll","Hudson","Duncan","Armstrong","Berry","Andrews","Johnston","Ray","Lane","Riley","Carpenter","Perkins","Aguilar","Silva","Richards","Willis","Matthews","Chapman","Lawrence","Garza","Vargas","Watkins","Wheeler","Larson","Carlson","Harper","George","Greene","Burke","Guzman","Morrison","Munoz","Jacobs","Obrien","Lawson","Franklin","Lynch","Bishop","Carr","Salazar","Austin","Mendez","Gilbert","Jensen","Williamson","Montgomery","Harvey","Oliver","Howell","Dean","Hanson","Weber","Garrett","Sims","Burton","Fuller","Soto","Mccoy","Welch","Chen","Schultz","Walters","Reid","Fields","Walsh","Little","Fowler","Bowman","Davidson","May","Day","Schneider","Newman","Brewer","Lucas","Holland","Wong","Banks","Santos","Curtis","Pearson","Delgado","Valdez","Pena","Rios","Douglas","Sandoval","Barrett","Hopkins","Keller","Guerrero","Stanley","Bates","Alvarado","Beck","Ortega","Wade","Estrada","Contreras","Barnett","Caldwell","Santiago","Lambert","Powers","Chambers","Nunez","Craig","Leonard","Lowe","Rhodes","Byrd","Gregory","Shelton","Frazier","Becker","Maldonado","Fleming","Vega","Sutton","Cohen","Jennings","Parks","Mcdaniel","Watts","Barker","Norris","Vaughn","Vazquez","Holt","Schwartz","Steele","Benson","Neal","Dominguez","Horton","Terry","Wolfe","Hale","Lyons","Graves","Haynes","Miles","Park","Warner","Padilla","Bush","Thornton","Mccarthy","Mann","Zimmerman","Erickson","Fletcher","Mckinney","Page","Dawson","Joseph","Marquez","Reeves","Klein","Espinoza","Baldwin","Moran","Love","Robbins","Higgins","Ball","Cortez","Le","Griffith","Bowen","Sharp","Cummings","Ramsey","Hardy","Swanson","Barber","Acosta","Luna","Chandler","Blair","Daniel","Cross","Simon","Dennis","Oconnor","Quinn","Gross","Navarro","Moss","Fitzgerald","Doyle","Mclaughlin","Rojas","Rodgers","Stevenson","Singh","Yang","Figueroa","Harmon","Newton","Paul","Manning","Garner","Mcgee","Reese","Francis","Burgess","Adkins","Goodman","Curry","Brady","Christensen","Potter","Walton","Goodwin","Mullins","Molina","Webster","Fischer","Campos","Avila","Sherman","Todd","Chang","Blake","Malone","Wolf","Hodges","Juarez","Gill","Farmer","Hines","Gallagher","Duran","Hubbard","Cannon","Miranda","Wang","Saunders","Tate","Mack","Hammond","Carrillo","Townsend","Wise","Ingram","Barton","Mejia","Ayala","Schroeder","Hampton","Rowe","Parsons","Frank","Waters","Strickland","Osborne","Maxwell","Chan","Deleon","Norman","Harrington","Casey","Patton","Logan","Bowers","Mueller","Glover","Floyd","Hartman","Buchanan","Cobb","French","Kramer","Mccormick","Clarke","Tyler","Gibbs","Moody","Conner","Sparks","Mcguire","Leon","Bauer","Norton","Pope","Flynn","Hogan","Robles","Salinas","Yates","Lindsey","Lloyd","Marsh","Mcbride","Owen","Solis","Pham","Lang","Pratt","Lara","Brock","Ballard","Trujillo","Shaffer","Drake","Roman","Aguirre","Morton","Stokes","Lamb","Pacheco","Patrick","Cochran","Shepherd","Cain","Burnett","Hess","Li","Cervantes","Olsen","Briggs","Ochoa","Cabrera","Velasquez","Montoya","Roth","Meyers","Cardenas","Fuentes","Weiss","Hoover","Wilkins","Nicholson","Underwood","Short","Carson","Morrow","Colon","Holloway","Summers","Bryan","Petersen","Mckenzie","Serrano","Wilcox","Carey","Clayton","Poole","Calderon","Gallegos","Greer","Rivas","Guerra","Decker","Collier","Wall","Whitaker","Bass","Flowers","Davenport","Conley","Houston","Huff","Copeland","Hood","Monroe","Massey","Roberson","Combs","Franco","Larsen","Pittman","Randall","Skinner","Wilkinson","Kirby","Cameron","Bridges","Anthony","Richard","Kirk","Bruce","Singleton","Mathis","Bradford","Boone","Abbott","Charles","Allison","Sweeney","Atkinson","Horn","Jefferson","Rosales","York","Christian","Phelps","Farrell","Castaneda","Nash","Dickerson","Bond","Wyatt","Foley","Chase","Gates","Vincent","Mathews","Hodge","Garrison","Trevino","Villarreal","Heath","Dalton","Valencia","Callahan","Hensley","Atkins","Huffman","Roy","Boyer","Shields","Lin","Hancock","Grimes","Glenn","Cline","Delacruz","Camacho","Dillon","Parrish","Oneill","Melton","Booth","Kane","Berg","Harrell","Pitts","Savage","Wiggins","Brennan","Salas","Marks","Russo","Sawyer","Baxter","Golden","Hutchinson","Liu","Walter","Mcdowell","Wiley","Rich","Humphrey","Johns","Koch","Suarez","Hobbs","Beard","Gilmore","Ibarra","Keith","Macias","Khan","Andrade","Ware","Stephenson","Henson","Wilkerson","Dyer","Mcclure","Blackwell","Mercado","Tanner","Eaton","Clay","Barron","Beasley","Oneal","Preston","Small","Wu","Zamora","Macdonald","Vance","Snow","Mcclain","Stafford","Orozco","Barry","English","Shannon","Kline","Jacobson","Woodard","Huang","Kemp","Mosley","Prince","Merritt","Hurst","Villanueva","Roach","Nolan","Lam","Yoder","Mccullough","Lester","Santana","Valenzuela","Winters","Barrera","Leach","Orr","Berger","Mckee","Strong","Conway","Stein","Whitehead","Bullock","Escobar","Knox","Meadows","Solomon","Velez","Odonnell","Kerr","Stout","Blankenship","Browning","Kent","Lozano","Bartlett","Pruitt","Buck","Barr","Gaines","Durham","Gentry","Mcintyre","Sloan","Melendez","Rocha","Herman","Sexton","Moon","Hendricks","Rangel","Stark","Lowery","Hardin","Hull","Sellers","Ellison","Calhoun","Gillespie","Mora","Knapp","Mccall","Morse","Dorsey","Weeks","Nielsen","Livingston","Leblanc","Mclean","Bradshaw","Glass","Middleton","Buckley","Schaefer","Frost","Howe","House","Mcintosh","Ho","Pennington","Reilly","Hebert","Mcfarland","Hickman","Noble","Spears","Conrad","Arias","Galvan","Velazquez","Huynh","Frederick","Randolph","Cantu","Fitzpatrick","Mahoney","Peck","Villa","Michael","Donovan","Mcconnell","Walls","Boyle","Mayer","Zuniga","Giles","Pineda","Pace","Hurley","Mays","Mcmillan","Crosby","Ayers","Case","Bentley","Shepard","Everett","Pugh","David","Mcmahon","Dunlap","Bender","Hahn","Harding","Acevedo","Raymond","Blackburn","Duffy","Landry","Dougherty","Bautista","Shah","Potts","Arroyo","Valentine","Meza","Gould","Vaughan","Fry","Rush","Avery","Herring","Dodson","Clements","Sampson","Tapia","Bean","Lynn","Crane","Farley","Cisneros","Benton","Ashley","Mckay","Finley","Best","Blevins","Friedman","Moses","Sosa","Blanchard","Huber","Frye","Krueger","Bernard","Rosario","Rubio","Mullen","Benjamin","Haley","Chung","Moyer","Choi","Horne","Yu","Woodward","Ali","Nixon","Hayden","Rivers","Estes","Mccarty","Richmond","Stuart","Maynard","Brandt","Oconnell","Hanna","Sanford","Sheppard","Church","Burch","Levy","Rasmussen","Coffey","Ponce","Faulkner","Donaldson","Schmitt","Novak","Costa","Montes","Booker","Cordova","Waller","Arellano","Maddox","Mata","Bonilla","Stanton","Compton","Kaufman","Dudley","Mcpherson","Beltran","Dickson","Mccann","Villegas","Proctor","Hester","Cantrell","Daugherty","Cherry","Bray","Davila","Rowland","Levine","Madden","Spence","Good","Irwin","Werner","Krause","Petty","Whitney","Baird","Hooper","Pollard","Zavala","Jarvis","Holden","Haas","Hendrix","Mcgrath","Bird","Lucero","Terrell","Riggs","Joyce","Mercer","Rollins","Galloway","Duke","Odom","Andersen","Downs","Hatfield","Benitez","Archer","Huerta","Travis","Mcneil","Hinton","Zhang","Hays","Mayo","Fritz","Branch","Mooney","Ewing","Ritter","Esparza","Frey","Braun","Gay","Riddle","Haney","Kaiser","Holder","Chaney","Mcknight","Gamble","Vang","Cooley","Carney","Cowan","Forbes","Ferrell","Davies","Barajas","Shea","Osborn","Bright","Cuevas","Bolton","Murillo","Lutz","Duarte","Kidd","Key","Cooke"]}'),a=function(e){return Math.floor(Math.random()*e)},r=function(){if(!i)return"Unknown";if(!i.data)return"Unknown";var e=i.data;if(!Array.isArray(e))return"Unknown";var t=e.length;return e[a(t)]+" "+e[a(t)]}},417:function(e,t){"use strict";t.Z=function(e,t){var n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789*#%&!",i="",a=e;void 0!=t&&(a-=t.length,i+=t);for(var r=0;r<a;r++){var s=Math.floor(67*Math.random());i+=n.charAt(s)}return i}}},t={};function n(i){var a=t[i];if(void 0!==a)return a.exports;var r=t[i]={id:i,loaded:!1,exports:{}};return e[i].call(r.exports,r,r.exports,n),r.loaded=!0,r.exports}n.m=e,n.amdO={},function(){var e=[];n.O=function(t,i,a,r){if(!i){var s=1/0;for(u=0;u<e.length;u++){i=e[u][0],a=e[u][1],r=e[u][2];for(var o=!0,c=0;c<i.length;c++)(!1&r||s>=r)&&Object.keys(n.O).every((function(e){return n.O[e](i[c])}))?i.splice(c--,1):(o=!1,r<s&&(s=r));if(o){e.splice(u--,1);var l=a();void 0!==l&&(t=l)}}return t}r=r||0;for(var u=e.length;u>0&&e[u-1][2]>r;u--)e[u]=e[u-1];e[u]=[i,a,r]}}(),n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,{a:t}),t},n.d=function(e,t){for(var i in t)n.o(t,i)&&!n.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},n.f={},n.e=function(e){return Promise.all(Object.keys(n.f).reduce((function(t,i){return n.f[i](e,t),t}),[]))},n.u=function(e){return e+"."+{7:"1a9c709874b01b722a8f",109:"d22f140fb69b3d56abb2",123:"4c11a6d677eaca7f621e",131:"7710970b8396abd82662",302:"62a9c071040336725c9c",358:"b0f01e5062a78cac0a04",401:"59b8585bc5661d802a10",498:"d5c4a9e6ce38c6168c39",530:"fa7b229df3e2988fc6d0",613:"843bdc56628a8906a847",616:"086adf2091475c13b440",638:"cdb7ea66461a98db85fc",739:"8b1e97d7a86bd621b04a",803:"9c88d77ed242bd48956d",942:"299ea1e6362251585d15",961:"713dbe26236de2fa412c"}[e]+".bundle.js"},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.hmd=function(e){return(e=Object.create(e)).children||(e.children=[]),Object.defineProperty(e,"exports",{enumerable:!0,set:function(){throw new Error("ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: "+e.id)}}),e},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},function(){var e={},t="game-core:";n.l=function(i,a,r,s){if(e[i])e[i].push(a);else{var o,c;if(void 0!==r)for(var l=document.getElementsByTagName("script"),u=0;u<l.length;u++){var h=l[u];if(h.getAttribute("src")==i||h.getAttribute("data-webpack")==t+r){o=h;break}}o||(c=!0,(o=document.createElement("script")).charset="utf-8",o.timeout=120,n.nc&&o.setAttribute("nonce",n.nc),o.setAttribute("data-webpack",t+r),o.src=i),e[i]=[a];var d=function(t,n){o.onerror=o.onload=null,clearTimeout(p);var a=e[i];if(delete e[i],o.parentNode&&o.parentNode.removeChild(o),a&&a.forEach((function(e){return e(n)})),t)return t(n)},p=setTimeout(d.bind(null,void 0,{type:"timeout",target:o}),12e4);o.onerror=d.bind(null,o.onerror),o.onload=d.bind(null,o.onload),c&&document.head.appendChild(o)}}}(),n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},function(){var e;n.g.importScripts&&(e=n.g.location+"");var t=n.g.document;if(!e&&t&&(t.currentScript&&(e=t.currentScript.src),!e)){var i=t.getElementsByTagName("script");if(i.length)for(var a=i.length-1;a>-1&&!e;)e=i[a--].src}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),n.p=e}(),function(){var e={757:0};n.f.j=function(t,i){var a=n.o(e,t)?e[t]:void 0;if(0!==a)if(a)i.push(a[2]);else{var r=new Promise((function(n,i){a=e[t]=[n,i]}));i.push(a[2]=r);var s=n.p+n.u(t),o=new Error;n.l(s,(function(i){if(n.o(e,t)&&(0!==(a=e[t])&&(e[t]=void 0),a)){var r=i&&("load"===i.type?"missing":i.type),s=i&&i.target&&i.target.src;o.message="Loading chunk "+t+" failed.\n("+r+": "+s+")",o.name="ChunkLoadError",o.type=r,o.request=s,a[1](o)}}),"chunk-"+t,t)}},n.O.j=function(t){return 0===e[t]};var t=function(t,i){var a,r,s=i[0],o=i[1],c=i[2],l=0;if(s.some((function(t){return 0!==e[t]}))){for(a in o)n.o(o,a)&&(n.m[a]=o[a]);if(c)var u=c(n)}for(t&&t(i);l<s.length;l++)r=s[l],n.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return n.O(u)},i=self.webpackChunkgame_core=self.webpackChunkgame_core||[];i.forEach(t.bind(null,0)),i.push=t.bind(null,i.push.bind(i))}(),n.O(void 0,[216,630,542],(function(){return n(620)})),n.O(void 0,[216,630,542],(function(){return n(621)})),n.O(void 0,[216,630,542],(function(){return n(443)})),n.O(void 0,[216,630,542],(function(){return n(444)})),n.O(void 0,[216,630,542],(function(){return n(622)})),n.O(void 0,[216,630,542],(function(){return n(542)}));var i=n.O(void 0,[216,630,542],(function(){return n(556)}));i=n.O(i)})();