"use strict";(self.webpackChunkgame_core=self.webpackChunkgame_core||[]).push([[453],{681:function(e,r,n){n.r(r),n.d(r,{default:function(){return E}});var t=n(466),o=n(1),a=n(43),i=n.n(a),s=n(110),l=n.n(s),c=n(54),u=n.n(c),d=n(700),p=n.n(d),f=["player","match"],g="null",h=GameCore.Utils,m=h.Valid,v=h.Object,b=GameCore.Configs.Rollbar,y=b.UseMockup,w=b.FilterError,x=function(e){function r(){for(var r,n,o=arguments.length,a=new Array(o),s=0;s<o;s++)a[s]=arguments[s];return(n=e.call.apply(e,i()(r=[this]).call(r,a))||this).enable=void 0,n.rollbar=void 0,n.events=[],n.beforeSend=function(e,r,t){y&&n.showPopupError(t)},n.checkIgnore=function(e,r,t){try{return!!n.isErrorIgnore(r)&&(console.warn(r),!0)}catch(o){return!1}},n.showPopupError=function(e){var r,t,o,a=null==e||null==(r=e.body)||null==(r=r.trace)?void 0:r.exception;a&&n.events.push(a);var i=(null==e||null==(t=e.body)||null==(t=t.trace)?void 0:t.frames)||[];(o=n.events).push.apply(o,i);var s=document.getElementById("popup-error");s||((s=document.createElement("div")).id="popup-error",document.body.appendChild(s)),s.innerHTML='<div style="color: #fff; display: flex; flex-flow: column; align-items: center; ">\n      <pre id="json" style="overflow: auto; background-color: rgb(195 112 97 / 80%); padding: 10px; max-height: 80vh; max-width: 90vw; border: 5px solid #545454;">'+l()(n.events,null,2)+'</pre>\n      <button id="close" style="cursor: pointer; padding: 10px 20px; border-radius: 100px;">Close</button>\n      </div>',s.style="top: 0px; z-index: 10000; width: 100vw; max-height: 100vh; position: absolute; display: flex; align-items: center; justify-content: center;";var c=document.getElementById("close");c&&(c.onclick=n.closePopup)},n.closePopup=function(){n.events=[{}];var e=document.getElementById("popup-error");null==e||e.remove()},n.isNoneErrorEvent=function(e){if(!e||0===e.length)return!1;if(!e[0].message)return!1;return"Non-Error promise rejection captured with keys: code, message"===e[0].message},n.isErrorIgnore=function(e){if(!e||0===e.length)return!1;var r=!1,t=e[0];return t instanceof Object&&(r=n.isIgnoreByCode(t)||n.isIgnoreByMessage(t)),r},n.isIgnoreByCode=function(e){if(v.hasOwn(e,"code")){var r=e.code,n=w.Codes,t=n.accepted,o=n.ignored;if("string"===typeof r){if(u()(t).call(t,r)>=0)return!1;if(u()(o).call(o,r)>=0)return!0}}if(v.hasOwn(e,"name")){var a=e.name,i=w.Codes,s=i.accepted,l=i.ignored;if("string"===typeof a){if(u()(s).call(s,a)>=0)return!1;if(u()(l).call(l,a)>=0)return!0}}return!1},n.isIgnoreByMessage=function(e){if(v.hasOwn(e,"message")){var r=e.message,n=w.Messages,t=n.accepted,o=n.ignored;if("string"===typeof r){if(u()(t).call(t,r)>=0)return!1;if(u()(o).call(o,r)>=0)return!0}}return!1},n.addExtraState=function(){try{if(!v.hasOwn(window,"game"))return;if(!v.hasOwn(window.game,"storage"))return;if(!v.hasOwn(window.game.storage,"getState"))return;var e=(0,window.game.storage.getState)()||{},r=e.player,o=e.match,a=(0,t.Z)(e,f);n.rollbar.configure({payload:{player:r,match:o,other:a}})}catch(i){console.warn("%c addExtraState: ","font-size:12px;background-color: #42b983;color:#fff;",i)}},n}(0,o.Z)(r,e);var n=r.prototype;return n.setup=function(){this.rollbar=new(p())({accessToken:g,checkIgnore:this.checkIgnore,onSendCallback:this.beforeSend,captureUncaught:!0,scrubTelemetryInputs:!0,captureUnhandledRejections:!0,autoInstrument:{dom:!1,navigation:!1},payload:{environment:"production",client:{javascript:{code_version:"1"}},server:{root:"webpack:///./",branch:"master"}}}),this.enable=!0,this.sendTestException()},n.configure=function(e){this.rollbar&&this.rollbar.configure(e)},n.sendTestException=function(){if(!m.isDebugger()){var e=FBInstant.player.getID();e&&this.rollbar.debug(new Error("Test rollbar"),{playerID:e})}},n.sendException=function(e,r){e&&(this.enable?this.rollbar&&(this.addExtraState(),this.rollbar.error(e,r)):console.error(e))},r}(Phaser.Plugins.BasePlugin),E=x}}]);