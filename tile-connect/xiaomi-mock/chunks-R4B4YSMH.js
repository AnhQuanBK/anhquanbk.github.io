import{f as jn,h as Nn,j as te,l as ne,m as re,n as ae,o as oe,p as ie,q as se,r as ft,s as ht,x as ue,y as ce}from"./chunks-IFIOZIYD.js";var Pn=jn((d,y)=>{te(),ne(),re(),ae(),oe(),ie(),se(),ce(),ue(),function(_){if(typeof d=="object"&&typeof y<"u")y.exports=_();else if(typeof define=="function"&&define.amd)define([],_);else{var x;typeof window<"u"?x=window:typeof global<"u"?x=global:typeof self<"u"?x=self:x=this,x.Bugsnag=_()}}(function(){var _,x,Re,$=["navigation","request","process","log","user","state","error","manual"],P=function(e,n,t){for(var r=t,a=0,i=e.length;a<i;a++)r=n(r,e[a],a,e);return r},j=function(e,n){return P(e,function(t,r,a,i){return n(r,a,i)?t.concat(r):t},[])},B=function(e,n){return P(e,function(t,r,a,i){return t===!0||r===n},!1)},C=function(e){return Object.prototype.toString.call(e)==="[object Array]"},gt=!{toString:null}.propertyIsEnumerable("toString"),de=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],T=function(e){var n=[],t;for(t in e)Object.prototype.hasOwnProperty.call(e,t)&&n.push(t);if(!gt)return n;for(var r=0,a=de.length;r<a;r++)Object.prototype.hasOwnProperty.call(e,de[r])&&n.push(de[r]);return n},Te=function(e,n){return e===void 0&&(e=1),n===void 0&&(n=1/0),function(t){return typeof t=="number"&&parseInt(""+t,10)===t&&t>=e&&t<=n}},fe=function(e){return typeof e=="function"||C(e)&&j(e,function(n){return typeof n=="function"}).length===e.length},U=function(e){return typeof e=="string"&&!!e.length},X={},Le=function(){return{unhandledExceptions:!0,unhandledRejections:!0}};X.schema={apiKey:{defaultValue:function(){return null},message:"is required",validate:U},appVersion:{defaultValue:function(){},message:"should be a string",validate:function(e){return e===void 0||U(e)}},appType:{defaultValue:function(){},message:"should be a string",validate:function(e){return e===void 0||U(e)}},autoDetectErrors:{defaultValue:function(){return!0},message:"should be true|false",validate:function(e){return e===!0||e===!1}},enabledErrorTypes:{defaultValue:function(){return Le()},message:"should be an object containing the flags { unhandledExceptions:true|false, unhandledRejections:true|false }",allowPartialObject:!0,validate:function(e){if(typeof e!="object"||!e)return!1;var n=T(e),t=T(Le());return!(j(n,function(r){return B(t,r)}).length<n.length||j(T(e),function(r){return typeof e[r]!="boolean"}).length>0)}},onError:{defaultValue:function(){return[]},message:"should be a function or array of functions",validate:fe},onSession:{defaultValue:function(){return[]},message:"should be a function or array of functions",validate:fe},onBreadcrumb:{defaultValue:function(){return[]},message:"should be a function or array of functions",validate:fe},endpoints:{defaultValue:function(e){return typeof e>"u"?{notify:"https://notify.bugsnag.com",sessions:"https://sessions.bugsnag.com"}:{notify:null,sessions:null}},message:"should be an object containing endpoint URLs { notify, sessions }",validate:function(e){return e&&typeof e=="object"&&U(e.notify)&&U(e.sessions)&&j(T(e),function(n){return!B(["notify","sessions"],n)}).length===0}},autoTrackSessions:{defaultValue:function(e){return!0},message:"should be true|false",validate:function(e){return e===!0||e===!1}},enabledReleaseStages:{defaultValue:function(){return null},message:"should be an array of strings",validate:function(e){return e===null||C(e)&&j(e,function(n){return typeof n=="string"}).length===e.length}},releaseStage:{defaultValue:function(){return"production"},message:"should be a string",validate:function(e){return typeof e=="string"&&e.length}},maxBreadcrumbs:{defaultValue:function(){return 25},message:"should be a number \u2264100",validate:function(e){return Te(0,100)(e)}},enabledBreadcrumbTypes:{defaultValue:function(){return $},message:"should be null or a list of available breadcrumb types ("+$.join(",")+")",validate:function(e){return e===null||C(e)&&P(e,function(n,t){return n===!1?n:B($,t)},!0)}},context:{defaultValue:function(){},message:"should be a string",validate:function(e){return e===void 0||typeof e=="string"}},user:{defaultValue:function(){return{}},message:"should be an object with { id, email, name } properties",validate:function(e){return e===null||e&&P(T(e),function(n,t){return n&&B(["id","email","name"],t)},!0)}},metadata:{defaultValue:function(){return{}},message:"should be an object",validate:function(e){return typeof e=="object"&&e!==null}},logger:{defaultValue:function(){},message:"should be null or an object with methods { debug, info, warn, error }",validate:function(e){return!e||e&&P(["debug","info","warn","error"],function(n,t){return n&&typeof e[t]=="function"},!0)}},redactedKeys:{defaultValue:function(){return["password"]},message:"should be an array of strings|regexes",validate:function(e){return C(e)&&e.length===j(e,function(n){return typeof n=="string"||n&&typeof n.test=="function"}).length}},plugins:{defaultValue:function(){return[]},message:"should be an array of plugin objects",validate:function(e){return C(e)&&e.length===j(e,function(n){return n&&typeof n=="object"&&typeof n.load=="function"}).length}},featureFlags:{defaultValue:function(){return[]},message:'should be an array of objects that have a "name" property',validate:function(e){return C(e)&&e.length===j(e,function(n){return n&&typeof n=="object"&&typeof n.name=="string"}).length}},reportUnhandledPromiseRejectionsAsHandled:{defaultValue:function(){return!1},message:"should be true|false",validate:function(e){return e===!0||e===!1}},sendPayloadChecksums:{defaultValue:function(){return!1},message:"should be true|false",validate:function(e){return e===!0||e===!1}}};var O=function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},M=function(e,n){return P(e,function(t,r,a,i){return t.concat(n(r,a,i))},[])};function he(){return he=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},he.apply(this,arguments)}var ge=X.schema,pt={releaseStage:O({},ge.releaseStage,{defaultValue:function(){return/^localhost(:\d+)?$/.test(window.location.host)?"development":"production"}}),appType:he({},ge.appType,{defaultValue:function(){return"browser"}}),logger:O({},ge.logger,{defaultValue:function(){return typeof console<"u"&&typeof console.debug=="function"?vt():void 0}})},vt=function(){var e={},n=console.log;return M(["debug","info","warn","error"],function(t){var r=console[t];e[t]=typeof r=="function"?r.bind(console,"[bugsnag]"):n.bind(console,"[bugsnag]")}),e},mt=function(){function e(t,r,a,i){i===void 0&&(i=new Date),this.type=a,this.message=t,this.metadata=r,this.timestamp=i}var n=e.prototype;return n.toJSON=function(){return{type:this.type,name:this.message,timestamp:this.timestamp,metaData:this.metadata}},e}(),pe=mt,J={};(function(e,n){"use strict";typeof _=="function"&&_.amd?_("stackframe",[],n):typeof J=="object"?J=n():e.StackFrame=n()})(this,function(){"use strict";function e(l){return!isNaN(parseFloat(l))&&isFinite(l)}function n(l){return l.charAt(0).toUpperCase()+l.substring(1)}function t(l){return function(){return this[l]}}var r=["isConstructor","isEval","isNative","isToplevel"],a=["columnNumber","lineNumber"],i=["fileName","functionName","source"],o=["args"],s=["evalOrigin"],u=r.concat(a,i,o,s);function c(l){if(l)for(var g=0;g<u.length;g++)l[u[g]]!==void 0&&this["set"+n(u[g])](l[u[g]])}c.prototype={getArgs:function(){return this.args},setArgs:function(l){if(Object.prototype.toString.call(l)!=="[object Array]")throw new TypeError("Args must be an Array");this.args=l},getEvalOrigin:function(){return this.evalOrigin},setEvalOrigin:function(l){if(l instanceof c)this.evalOrigin=l;else if(l instanceof Object)this.evalOrigin=new c(l);else throw new TypeError("Eval Origin must be an Object or StackFrame")},toString:function(){var l=this.getFileName()||"",g=this.getLineNumber()||"",b=this.getColumnNumber()||"",f=this.getFunctionName()||"";return this.getIsEval()?l?"[eval] ("+l+":"+g+":"+b+")":"[eval]:"+g+":"+b:f?f+" ("+l+":"+g+":"+b+")":l+":"+g+":"+b}},c.fromString=function(l){var g=l.indexOf("("),b=l.lastIndexOf(")"),f=l.substring(0,g),p=l.substring(g+1,b).split(","),E=l.substring(b+1);if(E.indexOf("@")===0)var S=/@(.+?)(?::(\d+))?(?::(\d+))?$/.exec(E,""),k=S[1],w=S[2],R=S[3];return new c({functionName:f,args:p||void 0,fileName:k,lineNumber:w||void 0,columnNumber:R||void 0})};for(var h=0;h<r.length;h++)c.prototype["get"+n(r[h])]=t(r[h]),c.prototype["set"+n(r[h])]=function(l){return function(g){this[l]=!!g}}(r[h]);for(var v=0;v<a.length;v++)c.prototype["get"+n(a[v])]=t(a[v]),c.prototype["set"+n(a[v])]=function(l){return function(g){if(!e(g))throw new TypeError(l+" must be a Number");this[l]=Number(g)}}(a[v]);for(var m=0;m<i.length;m++)c.prototype["get"+n(i[m])]=t(i[m]),c.prototype["set"+n(i[m])]=function(l){return function(g){this[l]=String(g)}}(i[m]);return c});var ve={};(function(e,n){"use strict";typeof _=="function"&&_.amd?_("stack-generator",["stackframe"],n):typeof ve=="object"?ve=n(J):e.StackGenerator=n(e.StackFrame)})(this,function(e){return{backtrace:function(n){var t=[],r=10;typeof n=="object"&&typeof n.maxStackSize=="number"&&(r=n.maxStackSize);for(var a=arguments.callee;a&&t.length<r&&a.arguments;){for(var i=new Array(a.arguments.length),o=0;o<i.length;++o)i[o]=a.arguments[o];/function(?:\s+([\w$]+))+\s*\(/.test(a.toString())?t.push(new e({functionName:RegExp.$1||void 0,args:i})):t.push(new e({args:i}));try{a=a.caller}catch{break}}return t}}});var me={};(function(e,n){"use strict";typeof _=="function"&&_.amd?_("error-stack-parser",["stackframe"],n):typeof me=="object"?me=n(J):e.ErrorStackParser=n(e.StackFrame)})(this,function(e){"use strict";var n=/(^|@)\S+:\d+/,t=/^\s*at .*(\S+:\d+|\(native\))/m,r=/^(eval@)?(\[native code])?$/;return{parse:function(a){if(typeof a.stacktrace<"u"||typeof a["opera#sourceloc"]<"u")return this.parseOpera(a);if(a.stack&&a.stack.match(t))return this.parseV8OrIE(a);if(a.stack)return this.parseFFOrSafari(a);throw new Error("Cannot parse given Error object")},extractLocation:function(a){if(a.indexOf(":")===-1)return[a];var i=/(.+?)(?::(\d+))?(?::(\d+))?$/,o=i.exec(a.replace(/[()]/g,""));return[o[1],o[2]||void 0,o[3]||void 0]},parseV8OrIE:function(a){var i=a.stack.split(`
`).filter(function(o){return!!o.match(t)},this);return i.map(function(o){o.indexOf("(eval ")>-1&&(o=o.replace(/eval code/g,"eval").replace(/(\(eval at [^()]*)|(\),.*$)/g,""));var s=o.replace(/^\s+/,"").replace(/\(eval code/g,"("),u=s.match(/ (\((.+):(\d+):(\d+)\)$)/);s=u?s.replace(u[0],""):s;var c=s.split(/\s+/).slice(1),h=this.extractLocation(u?u[1]:c.pop()),v=c.join(" ")||void 0,m=["eval","<anonymous>"].indexOf(h[0])>-1?void 0:h[0];return new e({functionName:v,fileName:m,lineNumber:h[1],columnNumber:h[2],source:o})},this)},parseFFOrSafari:function(a){var i=a.stack.split(`
`).filter(function(o){return!o.match(r)},this);return i.map(function(o){if(o.indexOf(" > eval")>-1&&(o=o.replace(/ line (\d+)(?: > eval line \d+)* > eval:\d+:\d+/g,":$1")),o.indexOf("@")===-1&&o.indexOf(":")===-1)return new e({functionName:o});var s=/((.*".+"[^@]*)?[^@]*)(?:@)/,u=o.match(s),c=u&&u[1]?u[1]:void 0,h=this.extractLocation(o.replace(s,""));return new e({functionName:c,fileName:h[0],lineNumber:h[1],columnNumber:h[2],source:o})},this)},parseOpera:function(a){return!a.stacktrace||a.message.indexOf(`
`)>-1&&a.message.split(`
`).length>a.stacktrace.split(`
`).length?this.parseOpera9(a):a.stack?this.parseOpera11(a):this.parseOpera10(a)},parseOpera9:function(a){for(var i=/Line (\d+).*script (?:in )?(\S+)/i,o=a.message.split(`
`),s=[],u=2,c=o.length;u<c;u+=2){var h=i.exec(o[u]);h&&s.push(new e({fileName:h[2],lineNumber:h[1],source:o[u]}))}return s},parseOpera10:function(a){for(var i=/Line (\d+).*script (?:in )?(\S+)(?:: In function (\S+))?$/i,o=a.stacktrace.split(`
`),s=[],u=0,c=o.length;u<c;u+=2){var h=i.exec(o[u]);h&&s.push(new e({functionName:h[3]||void 0,fileName:h[2],lineNumber:h[1],source:o[u]}))}return s},parseOpera11:function(a){var i=a.stack.split(`
`).filter(function(o){return!!o.match(n)&&!o.match(/^Error created at/)},this);return i.map(function(o){var s=o.split("@"),u=this.extractLocation(s.pop()),c=s.shift()||"",h=c.replace(/<anonymous function(: (\w+))?>/,"$2").replace(/\([^)]*\)/g,"")||void 0,v;c.match(/\(([^)]*)\)/)&&(v=c.replace(/^[^(]+\(([^)]*)\)$/,"$1"));var m=v===void 0||v==="[arguments not available]"?void 0:v.split(",");return new e({functionName:h,args:m,fileName:u[0],lineNumber:u[1],columnNumber:u[2],source:o})},this)}}});var Ie=me,W=function(e,n,t,r){var a=r&&r.redactedKeys?r.redactedKeys:[],i=r&&r.redactedPaths?r.redactedPaths:[];return JSON.stringify(jt(e,a,i),n,t)},yt=20,bt=25e3,_t=8,ye="...";function St(e){return e instanceof Error||/^\[object (Error|(Dom)?Exception)\]$/.test(Object.prototype.toString.call(e))}function Ce(e){return"[Throws: "+(e?e.message:"?")+"]"}function wt(e,n){for(var t=0,r=e.length;t<r;t++)if(e[t]===n)return!0;return!1}function Et(e,n){for(var t=0,r=e.length;t<r;t++)if(n.indexOf(e[t])===0)return!0;return!1}function Ot(e,n){for(var t=0,r=e.length;t<r;t++)if(typeof e[t]=="string"&&e[t].toLowerCase()===n.toLowerCase()||e[t]&&typeof e[t].test=="function"&&e[t].test(n))return!0;return!1}function kt(e){return Object.prototype.toString.call(e)==="[object Array]"}function xt(e,n){try{return e[n]}catch(t){return Ce(t)}}function jt(e,n,t){var r=[],a=0;function i(o,s){function u(){return s.length>_t&&a>bt}if(a++,s.length>yt||u())return ye;if(o===null||typeof o!="object")return o;if(wt(r,o))return"[Circular]";if(r.push(o),typeof o.toJSON=="function")try{a--;var c=i(o.toJSON(),s);return r.pop(),c}catch(p){return Ce(p)}var h=St(o);if(h){a--;var v=i({name:o.name,message:o.message},s);return r.pop(),v}if(kt(o)){for(var m=[],l=0,g=o.length;l<g;l++){if(u()){m.push(ye);break}m.push(i(o[l],s.concat("[]")))}return r.pop(),m}var b={};try{for(var f in o)if(Object.prototype.hasOwnProperty.call(o,f)){if(Et(t,s.join("."))&&Ot(n,f)){b[f]="[REDACTED]";continue}if(u()){b[f]=ye;break}b[f]=i(xt(o,f),s.concat(f))}}catch{}return r.pop(),b}return i(e,[])}function qe(e,n,t,r){if(typeof t=="string"){r===void 0?r=null:r!==null&&typeof r!="string"&&(r=W(r));var a=n[t];if(typeof a=="number"){e[a]={name:t,variant:r};return}e.push({name:t,variant:r}),n[t]=e.length-1}}function Nt(e,n,t){if(C(n)){for(var r=0;r<n.length;++r){var a=n[r];a===null||typeof a!="object"||qe(e,t,a.name,a.variant)}return e}}function Pt(e){return M(j(e,Boolean),function(n){var t=n.name,r=n.variant,a={featureFlag:t};return typeof r=="string"&&(a.variant=r),a})}function Mt(e,n,t){var r=n[t];typeof r=="number"&&(e[r]=null,delete n[t])}var q={add:qe,clear:Mt,merge:Nt,toEventApi:Pt},z=function(e){return!!e&&(!!e.stack||!!e.stacktrace||!!e["opera#sourceloc"])&&typeof(e.stack||e.stacktrace||e["opera#sourceloc"])=="string"&&e.stack!==e.name+": "+e.message},Bt=Rt;function Rt(e){switch(Object.prototype.toString.call(e)){case"[object Error]":return!0;case"[object Exception]":return!0;case"[object DOMException]":return!0;default:return e instanceof Error}}var G=Bt,Tt=function(e,n,t,r){var a;if(n){var i;if(t===null)return Ae(e,n);typeof t=="object"&&(i=t),typeof t=="string"&&(i=(a={},a[t]=r,a)),i&&(n==="__proto__"||n==="constructor"||n==="prototype"||(e[n]||(e[n]={}),e[n]=O({},e[n],i)))}},Lt=function(e,n,t){if(typeof n=="string"){if(!t)return e[n];if(e[n])return e[n][t]}},Ae=function(e,n,t){if(typeof n=="string"){if(!t){delete e[n];return}n==="__proto__"||n==="constructor"||n==="prototype"||e[n]&&delete e[n][t]}},D={add:Tt,get:Lt,clear:Ae};function be(){return be=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},be.apply(this,arguments)}var L=function(){function e(t,r,a,i,o){a===void 0&&(a=[]),i===void 0&&(i=qt()),this.apiKey=void 0,this.context=void 0,this.groupingHash=void 0,this.originalError=o,this._handledState=i,this.severity=this._handledState.severity,this.unhandled=this._handledState.unhandled,this.app={},this.device={},this.request={},this.breadcrumbs=[],this.threads=[],this._metadata={},this._features=[],this._featuresIndex={},this._user={},this._session=void 0,this._correlation=void 0,this.errors=[Fe(t,r,e.__type,a)]}var n=e.prototype;return n.addMetadata=function(t,r,a){return D.add(this._metadata,t,r,a)},n.setTraceCorrelation=function(t,r){typeof t=="string"&&(this._correlation=be({traceId:t},typeof r=="string"?{spanId:r}:{}))},n.getMetadata=function(t,r){return D.get(this._metadata,t,r)},n.clearMetadata=function(t,r){return D.clear(this._metadata,t,r)},n.addFeatureFlag=function(t,r){r===void 0&&(r=null),q.add(this._features,this._featuresIndex,t,r)},n.addFeatureFlags=function(t){q.merge(this._features,t,this._featuresIndex)},n.getFeatureFlags=function(){return q.toEventApi(this._features)},n.clearFeatureFlag=function(t){q.clear(this._features,this._featuresIndex,t)},n.clearFeatureFlags=function(){this._features=[],this._featuresIndex={}},n.getUser=function(){return this._user},n.setUser=function(t,r,a){this._user={id:t,email:r,name:a}},n.toJSON=function(){return{payloadVersion:"4",exceptions:M(this.errors,function(t){return O({},t,{message:t.errorMessage})}),severity:this.severity,unhandled:this._handledState.unhandled,severityReason:this._handledState.severityReason,app:this.app,device:this.device,request:this.request,breadcrumbs:this.breadcrumbs,context:this.context,groupingHash:this.groupingHash,metaData:this._metadata,user:this._user,session:this._session,featureFlags:this.getFeatureFlags(),correlation:this._correlation}},e}(),It=function(e){var n={file:e.fileName,method:Ct(e.functionName),lineNumber:e.lineNumber,columnNumber:e.columnNumber,code:void 0,inProject:void 0};return n.lineNumber>-1&&!n.file&&!n.method&&(n.file="global code"),n},Ct=function(e){return/^global code$/i.test(e)?"global code":e},qt=function(){return{unhandled:!1,severity:"warning",severityReason:{type:"handledException"}}},De=function(e){return typeof e=="string"?e:""};function Fe(e,n,t,r){return{errorClass:De(e),errorMessage:De(n),type:t,stacktrace:P(r,function(a,i){var o=It(i);try{return JSON.stringify(o)==="{}"?a:a.concat(o)}catch{return a}},[])}}function Ve(e){return e.cause?[e].concat(Ve(e.cause)):[e]}L.getStacktrace=function(e,n,t){if(z(e))return Ie.parse(e).slice(n);try{return j(ve.backtrace(),function(r){return(r.functionName||"").indexOf("StackGenerator$$")===-1}).slice(1+t)}catch{return[]}},L.create=function(e,n,t,r,a,i){a===void 0&&(a=0);var o=Ue(e,n,r,i),s=o[0],u=o[1],c;try{var h=L.getStacktrace(s,u>0?1+u+a:0,1+a);c=new L(s.name,s.message,h,t,e)}catch{c=new L(s.name,s.message,[],t,e)}if(s.name==="InvalidError"&&c.addMetadata(""+r,"non-error parameter",He(e)),s.cause){var v,m=Ve(s).slice(1),l=M(m,function(g){var b=G(g)&&z(g)?Ie.parse(g):[],f=Ue(g,!0,"error cause"),p=f[0];return p.name==="InvalidError"&&c.addMetadata("error cause",He(g)),Fe(p.name,p.message,L.__type,b)});(v=c.errors).push.apply(v,l)}return c};var He=function(e){return e===null?"null":e===void 0?"undefined":e},Ue=function(e,n,t,r){var a,i=0,o=function(s){var u=t==="error cause"?"was":"received";r&&r.warn(t+" "+u+' a non-error: "'+s+'"');var c=new Error(t+" "+u+' a non-error. See "'+t+'" tab for more detail.');return c.name="InvalidError",c};if(!n)G(e)?a=e:(a=o(typeof e),i+=2);else switch(typeof e){case"string":case"number":case"boolean":a=new Error(String(e)),i+=1;break;case"function":a=o("function"),i+=2;break;case"object":e!==null&&G(e)?a=e:e!==null&&At(e)?(a=new Error(e.message||e.errorMessage),a.name=e.name||e.errorClass,i+=1):(a=o(e===null?"null":"unsupported object"),i+=2);break;default:a=o("nothing"),i+=2}if(!z(a))try{throw a}catch(s){z(s)&&(a=s,i=1)}return[a,i]};L.__type="browserjs";var At=function(e){return(typeof e.name=="string"||typeof e.errorClass=="string")&&(typeof e.message=="string"||typeof e.errorMessage=="string")},_e=L,Dt=function(e,n,t){var r=0,a=function(){if(r>=e.length)return t(null,!0);n(e[r],function(i,o){if(i)return t(i);if(o===!1)return t(null,!1);r++,a()})};a()},Ft=function(e,n,t,r){var a=function(i,o){if(typeof i!="function")return o(null);try{if(i.length!==2){var s=i(n);return s&&typeof s.then=="function"?s.then(function(u){return setTimeout(function(){return o(null,u)})},function(u){setTimeout(function(){return t(u),o(null,!0)})}):o(null,s)}i(n,function(u,c){if(u)return t(u),o(null);o(null,c)})}catch(u){t(u),o(null)}};Dt(e,a,r)},Ke=function(e,n,t,r){for(var a=!1,i=e.slice();!a&&i.length;)try{a=i.pop()(n)===!1}catch(o){r.error("Error occurred in "+t+" callback, continuing anyway\u2026"),r.error(o)}return a},Se=function(e,n){var t="000000000"+e;return t.substr(t.length-n)},$e=typeof window=="object"?window:self,Xe=0;for(var Vt in $e)Object.hasOwnProperty.call($e,Vt)&&Xe++;var Ht=navigator.mimeTypes?navigator.mimeTypes.length:0,Ut=Se((Ht+navigator.userAgent.length).toString(36)+Xe.toString(36),4),Je=function(){return Ut},Kt=function(e){return typeof e=="string"&&/^c[a-z0-9]{20,32}$/.test(e)},K=0,we=4,Y=36,We=Math.pow(Y,we);function ze(){return Se((Math.random()*We<<0).toString(Y),we)}function $t(){return K=K<We?K:0,K++,K-1}function Ee(){var e="c",n=new Date().getTime().toString(Y),t=Se($t().toString(Y),we),r=Je(),a=ze()+ze();return e+n+t+r+a}Ee.fingerprint=Je,Ee.isCuid=Kt;var Ge=Ee,Xt=function(){function e(){this.id=Ge(),this.startedAt=new Date,this._handled=0,this._unhandled=0,this._user={},this.app={},this.device={}}var n=e.prototype;return n.getUser=function(){return this._user},n.setUser=function(t,r,a){this._user={id:t,email:r,name:a}},n.toJSON=function(){return{id:this.id,startedAt:this.startedAt,events:{handled:this._handled,unhandled:this._unhandled}}},n._track=function(t){this[t._handledState.unhandled?"_unhandled":"_handled"]+=1},e}(),Oe=Xt,Jt=q.add,Wt=q.clear,ke=q.merge,I=function(){},zt=function(){function e(t,r,a,i){var o=this;r===void 0&&(r=X.schema),a===void 0&&(a=[]),this._notifier=i,this._config={},this._schema=r,this._delivery={sendSession:I,sendEvent:I},this._logger={debug:I,info:I,warn:I,error:I},this._plugins={},this._breadcrumbs=[],this._session=null,this._metadata={},this._featuresIndex={},this._features=[],this._context=void 0,this._user={},this._cbs={e:[],s:[],sp:[],b:[]},this.Client=e,this.Event=_e,this.Breadcrumb=pe,this.Session=Oe,this._config=this._configure(t,a),M(a.concat(this._config.plugins),function(c){c&&o._loadPlugin(c)}),this._depth=1;var s=this,u=this.notify;this.notify=function(){return u.apply(s,arguments)}}var n=e.prototype;return n.addMetadata=function(t,r,a){return D.add(this._metadata,t,r,a)},n.getMetadata=function(t,r){return D.get(this._metadata,t,r)},n.clearMetadata=function(t,r){return D.clear(this._metadata,t,r)},n.addFeatureFlag=function(t,r){r===void 0&&(r=null),Jt(this._features,this._featuresIndex,t,r)},n.addFeatureFlags=function(t){ke(this._features,t,this._featuresIndex)},n.clearFeatureFlag=function(t){Wt(this._features,this._featuresIndex,t)},n.clearFeatureFlags=function(){this._features=[],this._featuresIndex={}},n.getContext=function(){return this._context},n.setContext=function(t){this._context=t},n._configure=function(t,r){var a=P(r,function(u,c){return c&&c.configSchema?O({},u,c.configSchema):u},this._schema);t.endpoints||(t.sendPayloadChecksums="sendPayloadChecksums"in t?t.sendPayloadChecksums:!0);var i=P(T(a),function(u,c){var h=a[c].defaultValue(t[c]);if(t[c]!==void 0){var v=a[c].validate(t[c]);v?a[c].allowPartialObject?u.config[c]=O(h,t[c]):u.config[c]=t[c]:(u.errors[c]=a[c].message,u.config[c]=h)}else u.config[c]=h;return u},{errors:{},config:{}}),o=i.errors,s=i.config;if(a.apiKey){if(!s.apiKey)throw new Error("No Bugsnag API Key set");/^[0-9a-f]{32}$/i.test(s.apiKey)||(o.apiKey="should be a string of 32 hexadecimal characters")}return this._metadata=O({},s.metadata),ke(this._features,s.featureFlags,this._featuresIndex),this._user=O({},s.user),this._context=s.context,s.logger&&(this._logger=s.logger),s.onError&&(this._cbs.e=this._cbs.e.concat(s.onError)),s.onBreadcrumb&&(this._cbs.b=this._cbs.b.concat(s.onBreadcrumb)),s.onSession&&(this._cbs.s=this._cbs.s.concat(s.onSession)),T(o).length&&this._logger.warn(Gt(o,t)),s},n.getUser=function(){return this._user},n.setUser=function(t,r,a){this._user={id:t,email:r,name:a}},n._loadPlugin=function(t){var r=t.load(this);t.name&&(this._plugins["~"+t.name+"~"]=r)},n.getPlugin=function(t){return this._plugins["~"+t+"~"]},n._setDelivery=function(t){this._delivery=t(this)},n.startSession=function(){var t=new Oe;t.app.releaseStage=this._config.releaseStage,t.app.version=this._config.appVersion,t.app.type=this._config.appType,t._user=O({},this._user);var r=Ke(this._cbs.s,t,"onSession",this._logger);return r?(this._logger.debug("Session not started due to onSession callback"),this):this._sessionDelegate.startSession(this,t)},n.addOnError=function(t,r){r===void 0&&(r=!1),this._cbs.e[r?"unshift":"push"](t)},n.removeOnError=function(t){this._cbs.e=j(this._cbs.e,function(r){return r!==t})},n._addOnSessionPayload=function(t){this._cbs.sp.push(t)},n.addOnSession=function(t){this._cbs.s.push(t)},n.removeOnSession=function(t){this._cbs.s=j(this._cbs.s,function(r){return r!==t})},n.addOnBreadcrumb=function(t,r){r===void 0&&(r=!1),this._cbs.b[r?"unshift":"push"](t)},n.removeOnBreadcrumb=function(t){this._cbs.b=j(this._cbs.b,function(r){return r!==t})},n.pauseSession=function(){return this._sessionDelegate.pauseSession(this)},n.resumeSession=function(){return this._sessionDelegate.resumeSession(this)},n.leaveBreadcrumb=function(t,r,a){if(t=typeof t=="string"?t:"",a=typeof a=="string"&&B($,a)?a:"manual",r=typeof r=="object"&&r!==null?r:{},!!t){var i=new pe(t,r,a),o=Ke(this._cbs.b,i,"onBreadcrumb",this._logger);if(o){this._logger.debug("Breadcrumb not attached due to onBreadcrumb callback");return}this._breadcrumbs.push(i),this._breadcrumbs.length>this._config.maxBreadcrumbs&&(this._breadcrumbs=this._breadcrumbs.slice(this._breadcrumbs.length-this._config.maxBreadcrumbs))}},n._isBreadcrumbTypeEnabled=function(t){var r=this._config.enabledBreadcrumbTypes;return r===null||B(r,t)},n.notify=function(t,r,a){a===void 0&&(a=I);var i=_e.create(t,!0,void 0,"notify()",this._depth+1,this._logger);this._notify(i,r,a)},n._notify=function(t,r,a){var i=this;if(a===void 0&&(a=I),t.app=O({},t.app,{releaseStage:this._config.releaseStage,version:this._config.appVersion,type:this._config.appType}),t.context=t.context||this._context,t._metadata=O({},t._metadata,this._metadata),t._user=O({},t._user,this._user),t.breadcrumbs=this._breadcrumbs.slice(),ke(t._features,this._features,t._featuresIndex),this._config.enabledReleaseStages!==null&&!B(this._config.enabledReleaseStages,this._config.releaseStage))return this._logger.warn("Event not sent due to releaseStage/enabledReleaseStages configuration"),a(null,t);var o=t.severity,s=function(c){i._logger.error("Error occurred in onError callback, continuing anyway\u2026"),i._logger.error(c)},u=[].concat(this._cbs.e).concat(r);Ft(u,t,s,function(c,h){if(c&&s(c),!h)return i._logger.debug("Event not sent due to onError callback"),a(null,t);i._isBreadcrumbTypeEnabled("error")&&e.prototype.leaveBreadcrumb.call(i,t.errors[0].errorClass,{errorClass:t.errors[0].errorClass,errorMessage:t.errors[0].errorMessage,severity:t.severity},"error"),o!==t.severity&&(t._handledState.severityReason={type:"userCallbackSetSeverity"}),t.unhandled!==t._handledState.unhandled&&(t._handledState.severityReason.unhandledOverridden=!0,t._handledState.unhandled=t.unhandled),i._session&&(i._session._track(t),t._session=i._session),i._delivery.sendEvent({apiKey:t.apiKey||i._config.apiKey,notifier:i._notifier,events:[t]},function(v){return a(v,t)})})},e}(),Gt=function(e,n){var t=new Error(`Invalid configuration
`+M(T(e),function(r){return"  - "+r+" "+e[r]+", got "+Yt(n[r])}).join(`

`));return t},Yt=function(e){switch(typeof e){case"string":case"number":case"object":return JSON.stringify(e);default:return String(e)}},xe=zt,F={},Ye=["events.[].metaData","events.[].breadcrumbs.[].metaData","events.[].request"];F.event=function(e,n){var t=W(e,null,null,{redactedPaths:Ye,redactedKeys:n});return t.length>1e6&&(e.events[0]._metadata={notifier:`WARNING!
Serialized payload was `+t.length/1e6+`MB (limit = 1MB)
metadata was removed`},t=W(e,null,null,{redactedPaths:Ye,redactedKeys:n})),t},F.session=function(e,n){var t=W(e,null,null);return t};var je={};je=function(e,n){return n===void 0&&(n=window),{sendEvent:function(t,r){if(r===void 0&&(r=function(){}),e._config.endpoints.notify===null){var a=new Error("Event not sent due to incomplete endpoint configuration");return r(a)}var i=Qe(e._config,"notify","4",n),o=F.event(t,e._config.redactedKeys),s=new n.XDomainRequest;s.onload=function(){r(null)},s.onerror=function(){var u=new Error("Event failed to send");e._logger.error("Event failed to send\u2026",u),o.length>1e6&&e._logger.warn("Event oversized ("+(o.length/1e6).toFixed(2)+" MB)"),r(u)},s.open("POST",i),setTimeout(function(){try{s.send(o)}catch(u){e._logger.error(u),r(u)}},0)},sendSession:function(t,r){if(r===void 0&&(r=function(){}),e._config.endpoints.sessions===null){var a=new Error("Session not sent due to incomplete endpoint configuration");return r(a)}var i=Qe(e._config,"sessions","1",n),o=new n.XDomainRequest;o.onload=function(){r(null)},o.open("POST",i),setTimeout(function(){try{o.send(F.session(t,e._config.redactedKeys))}catch(s){e._logger.error(s),r(s)}},0)}}};var Qe=function(e,n,t,r){var a=JSON.parse(JSON.stringify(new Date)),i=Qt(e.endpoints[n],r.location.protocol);return i+"?apiKey="+encodeURIComponent(e.apiKey)+"&payloadVersion="+t+"&sentAt="+encodeURIComponent(a)},Qt=je._matchPageProtocol=function(e,n){return n==="http:"?e.replace(/^https:/,"http:"):e};function Ze(e,n){if(e.isSecureContext&&e.crypto&&e.crypto.subtle&&e.crypto.subtle.digest&&typeof TextEncoder=="function"){var t=new TextEncoder().encode(n);return e.crypto.subtle.digest("SHA-1",t).then(function(r){var a=Array.from(new Uint8Array(r)),i=a.map(function(o){return o.toString(16).padStart(2,"0")}).join("");return"sha1 "+i})}return Promise.resolve()}var Zt=function(e,n){return n===void 0&&(n=window),{sendEvent:function(t,r){r===void 0&&(r=function(){});try{var a=e._config.endpoints.notify;if(a===null){var i=new Error("Event not sent due to incomplete endpoint configuration");return r(i)}var o=new n.XMLHttpRequest,s=F.event(t,e._config.redactedKeys);o.onreadystatechange=function(){if(o.readyState===n.XMLHttpRequest.DONE){var u=o.status;if(u===0||u>=400){var c=new Error("Request failed with status "+u);e._logger.error("Event failed to send\u2026",c),s.length>1e6&&e._logger.warn("Event oversized ("+(s.length/1e6).toFixed(2)+" MB)"),r(c)}else r(null)}},o.open("POST",a),o.setRequestHeader("Content-Type","application/json"),o.setRequestHeader("Bugsnag-Api-Key",t.apiKey||e._config.apiKey),o.setRequestHeader("Bugsnag-Payload-Version","4"),o.setRequestHeader("Bugsnag-Sent-At",new Date().toISOString()),e._config.sendPayloadChecksums&&typeof Promise<"u"&&Promise.toString().indexOf("[native code]")!==-1?Ze(n,s).then(function(u){u&&o.setRequestHeader("Bugsnag-Integrity",u),o.send(s)}).catch(function(u){e._logger.error(u),o.send(s)}):o.send(s)}catch(u){e._logger.error(u)}},sendSession:function(t,r){r===void 0&&(r=function(){});try{var a=e._config.endpoints.sessions;if(a===null){var i=new Error("Session not sent due to incomplete endpoint configuration");return r(i)}var o=new n.XMLHttpRequest,s=F.session(t,e._config.redactedKeys);o.onreadystatechange=function(){if(o.readyState===n.XMLHttpRequest.DONE){var u=o.status;if(u===0||u>=400){var c=new Error("Request failed with status "+u);e._logger.error("Session failed to send\u2026",c),r(c)}else r(null)}},o.open("POST",a),o.setRequestHeader("Content-Type","application/json"),o.setRequestHeader("Bugsnag-Api-Key",e._config.apiKey),o.setRequestHeader("Bugsnag-Payload-Version","1"),o.setRequestHeader("Bugsnag-Sent-At",new Date().toISOString()),e._config.sendPayloadChecksums&&typeof Promise<"u"&&Promise.toString().indexOf("[native code]")!==-1?Ze(n,s).then(function(u){u&&o.setRequestHeader("Bugsnag-Integrity",u),o.send(s)}).catch(function(u){e._logger.error(u),o.send(s)}):o.send(s)}catch(u){e._logger.error(u)}}}},et=new Date,en=function(){et=new Date},tn={name:"appDuration",load:function(e){return e.addOnError(function(n){var t=new Date;n.app.duration=t-et},!0),{reset:en}}},nn=function(e){return e===void 0&&(e=window),{load:function(n){n.addOnError(function(t){t.context===void 0&&(t.context=e.location.pathname)},!0)}}},tt="bugsnag-anonymous-id",rn=function(e){try{var n=e.localStorage,t=n.getItem(tt);return t&&/^c[a-z0-9]{20,32}$/.test(t)||(t=Ge(),n.setItem(tt,t)),t}catch{}},an=function(e,n){return e===void 0&&(e=navigator),n===void 0&&(n=window),{load:function(t){var r={locale:e.browserLanguage||e.systemLanguage||e.userLanguage||e.language,userAgent:e.userAgent};n&&n.screen&&n.screen.orientation&&n.screen.orientation.type?r.orientation=n.screen.orientation.type:n&&n.document&&(r.orientation=n.document.documentElement.clientWidth>n.document.documentElement.clientHeight?"landscape":"portrait"),t._config.generateAnonymousId&&(r.id=rn(n)),t.addOnSession(function(a){a.device=O({},a.device,r),t._config.collectUserIp||nt(a)}),t.addOnError(function(a){a.device=O({},a.device,r,{time:new Date}),t._config.collectUserIp||nt(a)},!0)},configSchema:{generateAnonymousId:{validate:function(t){return t===!0||t===!1},defaultValue:function(){return!0},message:"should be true|false"}}}},nt=function(e){var n=e.getUser();(!n||!n.id)&&e.setUser(e.device.id)},on=function(e){return e===void 0&&(e=window),{load:function(n){n.addOnError(function(t){t.request&&t.request.url||(t.request=O({},t.request,{url:e.location.href}))},!0)}}},sn={load:function(e){e._sessionDelegate=un}},un={startSession:function(e,n){var t=e;return t._session=n,t._pausedSession=null,t._config.enabledReleaseStages!==null&&!B(t._config.enabledReleaseStages,t._config.releaseStage)?(t._logger.warn("Session not sent due to releaseStage/enabledReleaseStages configuration"),t):(t._delivery.sendSession({notifier:t._notifier,device:n.device,app:n.app,sessions:[{id:n.id,startedAt:n.startedAt,user:n._user}]}),t)},resumeSession:function(e){return e._session?e:e._pausedSession?(e._session=e._pausedSession,e._pausedSession=null,e):e.startSession()},pauseSession:function(e){e._pausedSession=e._session,e._session=null}},cn={load:function(e){e._config.collectUserIp||e.addOnError(function(n){n._user&&typeof n._user.id>"u"&&delete n._user.id,n._user=O({id:"[REDACTED]"},n._user),n.request=O({clientIp:"[REDACTED]"},n.request)})},configSchema:{collectUserIp:{defaultValue:function(){return!0},message:"should be true|false",validate:function(e){return e===!0||e===!1}}}},rt={};rt.load=function(e){var n=/^(local-)?dev(elopment)?$/.test(e._config.releaseStage);n||!e._isBreadcrumbTypeEnabled("log")||M(ln,function(t){var r=console[t];console[t]=function(){for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];e.leaveBreadcrumb("Console output",P(i,function(s,u,c){var h="[Unknown value]";try{h=String(u)}catch{}if(h==="[object Object]")try{h=JSON.stringify(u)}catch{}return s["["+c+"]"]=h,s},{severity:t.indexOf("group")===0?"log":t}),"log"),r.apply(console,i)},(()=>{})._restore=function(){console[t]=r}})};var ln=j(["log","debug","info","warn","error"],function(e){return typeof console<"u"&&typeof console[e]=="function"}),at=200,ot=5e5,dn=function(e,n){return e===void 0&&(e=document),n===void 0&&(n=window),{load:function(t){if(!t._config.trackInlineScripts)return;var r=n.location.href,a="",i=!!e.attachEvent,o=i?e.readyState==="complete":e.readyState!=="loading",s=function(){return e.documentElement.outerHTML};a=s();var u=e.onreadystatechange;e.onreadystatechange=function(){e.readyState==="interactive"&&(a=s(),o=!0);try{u.apply(this,arguments)}catch{}};var c=null,h=function(f){c=f},v=function(){var f=e.currentScript||c;if(!f&&!o){var p=e.scripts||e.getElementsByTagName("script");f=p[p.length-1]}return f},m=function(f){(!o||!a)&&(a=s());var p=["<!-- DOC START -->"].concat(a.split(`
`)),E=f-1,S=Math.max(E-3,0),k=Math.min(E+3,p.length);return P(p.slice(S,k),function(w,R,ee){return w[S+1+ee]=R.length<=at?R:R.substr(0,at),w},{})};t.addOnError(function(f){f.errors[0].stacktrace=j(f.errors[0].stacktrace,function(w){return!/__trace__$/.test(w.method)});var p=f.errors[0].stacktrace[0],E=function(w){return w.replace(/#.*$/,"").replace(/\?.*$/,"")};if(!(p&&p.file&&E(p.file)!==E(r))){var S=v();if(S){var k=S.innerHTML;f.addMetadata("script","content",k.length<=ot?k:k.substr(0,ot)),p&&p.lineNumber&&(p.code=m(p.lineNumber))}}},!0);var l=M(["setTimeout","setInterval","setImmediate","requestAnimationFrame"],function(f){return Ne(n,f,function(p){return b(p,function(E){return{get:function(){return E[0]},replace:function(S){E[0]=S}}})})}),g=l[0];M(["EventTarget","Window","Node","ApplicationCache","AudioTrackList","ChannelMergerNode","CryptoOperation","EventSource","FileReader","HTMLUnknownElement","IDBDatabase","IDBRequest","IDBTransaction","KeyOperation","MediaController","MessagePort","ModalWindow","Notification","SVGElementInstance","Screen","TextTrack","TextTrackCue","TextTrackList","WebSocket","WebSocketWorker","Worker","XMLHttpRequest","XMLHttpRequestEventTarget","XMLHttpRequestUpload"],function(f){!n[f]||!n[f].prototype||!Object.prototype.hasOwnProperty.call(n[f].prototype,"addEventListener")||(Ne(n[f].prototype,"addEventListener",function(p){return b(p,it)}),Ne(n[f].prototype,"removeEventListener",function(p){return b(p,it,!0)}))});function b(f,p,E){return E===void 0&&(E=!1),function(){var S=[].slice.call(arguments);try{var k=p(S),w=k.get();if(E&&f.apply(this,S),typeof w!="function")return f.apply(this,S);if(w.__trace__)k.replace(w.__trace__);else{var R=v();w.__trace__=function(){h(R),g(function(){h(null)},0);var ee=w.apply(this,arguments);return h(null),ee},w.__trace__.__trace__=w.__trace__,k.replace(w.__trace__)}}catch{}if(f.apply)return f.apply(this,S);switch(S.length){case 1:return f(S[0]);case 2:return f(S[0],S[1]);default:return f()}}}},configSchema:{trackInlineScripts:{validate:function(t){return t===!0||t===!1},defaultValue:function(){return!0},message:"should be true|false"}}}};function Ne(e,n,t){var r=e[n];if(!r)return r;var a=t(r);return e[n]=a,r}function it(e){var n=!!e[1]&&typeof e[1].handleEvent=="function";return{get:function(){return n?e[1].handleEvent:e[1]},replace:function(t){n?e[1].handleEvent=t:e[1]=t}}}var fn=function(e){return e===void 0&&(e=window),{load:function(n){"addEventListener"in e&&n._isBreadcrumbTypeEnabled("user")&&e.addEventListener("click",function(t){var r,a;try{r=gn(t.target),a=st(t.target,e)}catch{r="[hidden]",a="[hidden]",n._logger.error("Cross domain error when tracking click event. See docs: https://tinyurl.com/yy3rn63z")}n.leaveBreadcrumb("UI click",{targetText:r,targetSelector:a},"user")},!0)}}},hn=/^\s*([^\s][\s\S]{0,139}[^\s])?\s*/;function gn(e){var n=e.textContent||e.innerText||"";return!n&&(e.type==="submit"||e.type==="button")&&(n=e.value),n=n.replace(hn,"$1"),n.length>140?n.slice(0,135)+"(...)":n}function st(e,n){var t=[e.tagName];if(e.id&&t.push("#"+e.id),e.className&&e.className.length&&t.push("."+e.className.split(" ").join(".")),!n.document.querySelectorAll||!Array.prototype.indexOf)return t.join("");try{if(n.document.querySelectorAll(t.join("")).length===1)return t.join("")}catch{return t.join("")}if(e.parentNode.childNodes.length>1){var r=Array.prototype.indexOf.call(e.parentNode.childNodes,e)+1;t.push(":nth-child("+r+")")}return n.document.querySelectorAll(t.join("")).length===1?t.join(""):e.parentNode?st(e.parentNode,n)+" > "+t.join(""):t.join("")}var ut={};ut=function(e){e===void 0&&(e=window);var n={load:function(t){if("addEventListener"in e&&t._isBreadcrumbTypeEnabled("navigation")){var r=function(a){return function(){return t.leaveBreadcrumb(a,{},"navigation")}};e.addEventListener("pagehide",r("Page hidden"),!0),e.addEventListener("pageshow",r("Page shown"),!0),e.addEventListener("load",r("Page loaded"),!0),e.document.addEventListener("DOMContentLoaded",r("DOMContentLoaded"),!0),e.addEventListener("load",function(){return e.addEventListener("popstate",r("Navigated back"),!0)}),e.addEventListener("hashchange",function(a){var i=a.oldURL?{from:Q(a.oldURL,e),to:Q(a.newURL,e),state:lt(e)}:{to:Q(e.location.href,e)};t.leaveBreadcrumb("Hash changed",i,"navigation")},!0),e.history.pushState&&ct(t,e.history,"pushState",e,!0),e.history.replaceState&&ct(t,e.history,"replaceState",e)}}};return n};var Q=function(e,n){var t=n.document.createElement("A");return t.href=e,""+t.pathname+t.search+t.hash},pn=function(e,n,t,r){var a=Q(e.location.href,e);return{title:t,state:n,prevState:lt(e),to:r||a,from:a}},ct=function(e,n,t,r,a){a===void 0&&(a=!1);var i=n[t];n[t]=function(o,s,u){e.leaveBreadcrumb("History "+t,pn(r,o,s,u),"navigation"),a&&typeof e.resetEventCount=="function"&&e.resetEventCount(),i.apply(n,[o,s].concat(u!==void 0?u:[]))}},lt=function(e){try{return e.history.state}catch{}},V="request",vn=function(e,n){e===void 0&&(e=[]),n===void 0&&(n=window);var t=[],r={load:function(a){if(!a._isBreadcrumbTypeEnabled("request"))return;var i=[a._config.endpoints.notify,a._config.endpoints.sessions].concat(e);o(),c();function o(){if(!(!("addEventListener"in n.XMLHttpRequest.prototype)||!("WeakMap"in n))){var m=new WeakMap,l=new WeakMap,g=n.XMLHttpRequest.prototype.open;n.XMLHttpRequest.prototype.open=function(f,p){this&&m.set(this,{method:f,url:p}),g.apply(this,arguments)};var b=n.XMLHttpRequest.prototype.send;n.XMLHttpRequest.prototype.send=function(f){var p=this,E=m.get(this);if(E){var S=l.get(this);S&&(this.removeEventListener("load",S.load),this.removeEventListener("error",S.error));var k=new Date,w=function(){return u(E.method,E.url,Z(k))},R=function(){return s(E.method,E.url,p.status,Z(k))};this.addEventListener("load",R),this.addEventListener("error",w),this&&l.set(this,{load:R,error:w})}b.apply(this,arguments)}}}function s(m,l,g,b){if(l===void 0){a._logger.warn("The request URL is no longer present on this XMLHttpRequest. A breadcrumb cannot be left for this request.");return}if(!(typeof l=="string"&&B(i,l.replace(/\?.*$/,"")))){var f={status:g,method:String(m),url:String(l),duration:b};g>=400?a.leaveBreadcrumb("XMLHttpRequest failed",f,V):a.leaveBreadcrumb("XMLHttpRequest succeeded",f,V)}}function u(m,l,g){if(l===void 0){a._logger.warn("The request URL is no longer present on this XMLHttpRequest. A breadcrumb cannot be left for this request.");return}typeof l=="string"&&B(i,l.replace(/\?.*$/,""))||a.leaveBreadcrumb("XMLHttpRequest error",{method:String(m),url:String(l),duration:g},V)}function c(){if(!(!("fetch"in n)||n.fetch.polyfill)){var m=n.fetch;n.fetch=function(){var l=arguments,g=arguments[0],b=arguments[1],f,p=null;return g&&typeof g=="object"?(p=g.url,b&&"method"in b?f=b.method:g&&"method"in g&&(f=g.method)):(p=g,b&&"method"in b&&(f=b.method)),f===void 0&&(f="GET"),new Promise(function(E,S){var k=new Date;m.apply(void 0,l).then(function(w){h(w,f,p,Z(k)),E(w)}).catch(function(w){v(f,p,Z(k)),S(w)})})}}}var h=function(m,l,g,b){var f={method:String(l),status:m.status,url:String(g),duration:b};m.status>=400?a.leaveBreadcrumb("fetch() failed",f,V):a.leaveBreadcrumb("fetch() succeeded",f,V)},v=function(m,l,g){a.leaveBreadcrumb("fetch() error",{method:String(m),url:String(l),duration:g},V)}}};return r},Z=function(e){return e&&new Date-e},mn={load:function(e){var n=0;e.addOnError(function(t){if(n>=e._config.maxEvents)return e._logger.warn("Cancelling event send due to maxEvents per session limit of "+e._config.maxEvents+" being reached"),!1;n++}),e.resetEventCount=function(){n=0}},configSchema:{maxEvents:{defaultValue:function(){return 10},message:"should be a positive integer \u2264100",validate:function(e){return Te(1,100)(e)}}}},Pe={};Pe={load:function(e){e.addOnError(function(n){var t=P(n.errors,function(r,a){return r.concat(a.stacktrace)},[]);M(t,function(r){r.file=yn(r.file)})})}};var yn=Pe._strip=function(e){return typeof e=="string"?e.replace(/\?.*$/,"").replace(/#.*$/,""):e},bn=function(e,n){return e===void 0&&(e=window),n===void 0&&(n="window onerror"),{load:function(t){if(!t._config.autoDetectErrors||!t._config.enabledErrorTypes.unhandledExceptions)return;function r(i,o,s,u,c){if(s===0&&/Script error\.?/.test(i))t._logger.warn("Ignoring cross-domain or eval script error. See docs: https://tinyurl.com/yy3rn63z");else{var h={severity:"error",unhandled:!0,severityReason:{type:"unhandledException"}},v;if(c)v=t.Event.create(c,!0,h,n,1),dt(v.errors[0].stacktrace,o,s,u);else if(typeof i=="object"&&i!==null&&(!o||typeof o!="string")&&!s&&!u&&!c){var m=i.type?"Event: "+i.type:"Error",l=i.message||i.detail||"";v=t.Event.create({name:m,message:l},!0,h,n,1),v.originalError=i,v.addMetadata(n,{event:i,extraParameters:o})}else v=t.Event.create(i,!0,h,n,1),dt(v.errors[0].stacktrace,o,s,u);t._notify(v)}typeof a=="function"&&a.apply(this,arguments)}var a=e.onerror;e.onerror=r}}},dt=function(e,n,t,r){e[0]||e.push({});var a=e[0];!a.file&&typeof n=="string"&&(a.file=n),!a.lineNumber&&Me(t)&&(a.lineNumber=t),a.columnNumber||(Me(r)?a.columnNumber=r:window.event&&Me(window.event.errorCharacter)&&(a.columnNumber=window.event.errorCharacter))},Me=function(e){return typeof e=="number"&&String.call(e)!=="NaN"},_n,Sn=function(e){e===void 0&&(e=window);var n={load:function(t){if(!(!t._config.autoDetectErrors||!t._config.enabledErrorTypes.unhandledRejections)){var r=function(a){var i=a.reason,o=!1;try{a.detail&&a.detail.reason&&(i=a.detail.reason,o=!0)}catch{}var s=!t._config.reportUnhandledPromiseRejectionsAsHandled,u=t.Event.create(i,!1,{severity:"error",unhandled:s,severityReason:{type:"unhandledPromiseRejection"}},"unhandledrejection handler",1,t._logger);o&&M(u.errors[0].stacktrace,wn(i)),t._notify(u,function(c){if(G(c.originalError)&&!c.originalError.stack){var h;c.addMetadata("unhandledRejection handler",(h={},h[Object.prototype.toString.call(c.originalError)]={name:c.originalError.name,message:c.originalError.message,code:c.originalError.code},h))}})};"addEventListener"in e?e.addEventListener("unhandledrejection",r):e.onunhandledrejection=function(a,i){r({detail:{reason:a,promise:i}})},_n=r}}};return n},wn=function(e){return function(n){n.file!==e.toString()&&n.method&&(n.method=n.method.replace(/^\s+/,""))}},A={},En="Bugsnag JavaScript",On="8.2.0",kn="https://github.com/bugsnag/bugsnag-js",xn=O({},X.schema,pt),N={_client:null,createClient:function(e){typeof e=="string"&&(e={apiKey:e}),e||(e={});var n=[tn,an(),nn(),on(),mn,sn,cn,Pe,bn(),Sn(),ut(),fn(),vn(),rt,dn()],t=new xe(e,xn,n,{name:En,version:On,url:kn});return t._setDelivery(window.XDomainRequest?je:Zt),t._logger.debug("Loaded!"),t.leaveBreadcrumb("Bugsnag loaded",{},"state"),t._config.autoTrackSessions?t.startSession():t},start:function(e){return N._client?(N._client._logger.warn("Bugsnag.start() was called more than once. Ignoring."),N._client):(N._client=N.createClient(e),N._client)},isStarted:function(){return N._client!=null}};return M(["resetEventCount"].concat(T(xe.prototype)),function(e){/^_/.test(e)||(N[e]=function(){if(N._client){N._client._depth+=1;var n=N._client[e].apply(N._client,arguments);return N._client._depth-=1,n}})}),A=N,A.Client=xe,A.Event=_e,A.Session=Oe,A.Breadcrumb=pe,A.default=N,A})});te(),ne(),re(),ae(),oe(),ie(),se(),ce(),ue(),te(),ne(),re(),ae(),oe(),ie(),se(),ce(),ue(),te(),ne(),re(),ae(),oe(),ie(),se(),ce(),ue();var le=Nn(Pn()),Mn=class{plugin;metadata={};customMetaData;constructor(d){this.plugin=d}configure(d){let{apiKey:y,buildVersion:_}=d;le.default.start({apiKey:y,appVersion:_,releaseStage:"production",autoDetectErrors:!0,autoTrackSessions:!0,enabledBreadcrumbTypes:["navigation","request","process","log","user","state","error","manual"],maxBreadcrumbs:100,onError:this.t})}setUser(d){let{id:y,name:_}=d,x=y??void 0,Re=_??void 0;le.default.setUser(x,void 0,Re)}t=d=>{let{originalError:y}=d;return this.plugin.isErrorIgnoredByCode(y)||this.plugin.isErrorIgnoredByMessage(y)?!1:(d.clearMetadata("global"),d.addMetadata("global",this.metadata),this.customMetaData&&(d.clearMetadata("custom"),d.addMetadata("custom",this.customMetaData)),!0)};sendException(d,y){y&&(this.customMetaData=y),le.default.notify(d)}setMetaData(d){this.metadata=d}addBreadcrumb(d){le.default.leaveBreadcrumb(d)}},Bn=Mn;ht(),ht();var{Utils:{Valid:Be,Object:H}}=Ludex,Rn=class extends Ludex.Plugins.BasePlugin{config;adapter;metadata={};feedbackPopup=null;filterErrors=null;configure(d){this.config=d,this.filterErrors={Codes:{Accepted:[],Ignored:[]},Messages:{Accepted:[],Ignored:[]}},this.adapter=this.getAdapterByService(),this.adapter.configure(this.config)}getAdapterByService(){switch(this.config.service){case"BugSnag":return new Bn(this);case"Sentry":return new ft;case"PostHog":return new ft}}setUser(d){this.config.trackUser&&this.adapter?.setUser(d)}sendException(d,y){if(this.isErrorIgnoredByCode(d)||this.isErrorIgnoredByMessage(d))return;let _=this.metadata;y&&(_=H.merge(_,y)),this.adapter?.sendException(d,_)}isErrorIgnoredByCode(d){if(!H.hasOwn(d,"code"))return!1;let{code:y}=d;if(!Be.isString(y)||!this.filterErrors)return!1;let{Accepted:_,Ignored:x}=this.filterErrors.Codes;return _.indexOf(y)>-1?!1:x.indexOf(y)>-1}isErrorIgnoredByMessage(d){if(!H.hasOwn(d,"message"))return!1;let{message:y}=d;if(!Be.isString(y)||!this.filterErrors)return!1;let{Accepted:_,Ignored:x}=this.filterErrors.Messages;return _.indexOf(y)>-1?!1:x.indexOf(y)>-1}addBreadcrumb(d){this.adapter?.addBreadcrumb(d)}addFilterErrors(d){this.filterErrors=H.merge(this.filterErrors,d)}addMetadata(d){Be.isObject(d)&&(this.metadata=H.merge(this.metadata,d),this.adapter?.setMetaData(this.metadata))}removeMetadata(d){H.hasOwn(this.metadata,d)&&(this.metadata[d]=void 0,this.adapter?.setMetaData(this.metadata))}feedbackAsync=async d=>{try{if(!this.feedbackPopup)return;let y="";d&&(y="error"in d?d.error:d.reason),await new Promise((_,x)=>{this.feedbackPopup&&(this.feedbackPopup.onYes(this.handleOnYes(_,y)),this.feedbackPopup.onNo(this.handleOnNo(x)),this.feedbackPopup.onScreenshot(this.handleOnScreenshot()),this.feedbackPopup.show(y))})}catch{}};handleOnYes=(d,y)=>()=>{if(!this.feedbackPopup)return;let _=this.feedbackPopup.getFeedback()||"",x=this.feedbackPopup.getScreenshot();_&&this.sendException(new Error("User feedback"),{feedback:_,screenshot:x,error:y}),this.feedbackPopup.hide(),d()};handleOnNo=d=>()=>{this.feedbackPopup&&(this.feedbackPopup.hide(),d(new Error("User canceled feedback")))};handleOnScreenshot=()=>()=>{this.feedbackPopup&&this.getScreenshot().then(d=>{this.feedbackPopup&&this.feedbackPopup.setScreenshot(d)})};initFeedbackTrackErrors=async()=>{if(this.config.feedback)try{await this.loadFeedbackPopup()}catch{}};getScreenshot(){let d=document.getElementById("GameCanvas");return new Promise(y=>{requestAnimationFrame(()=>{y(d.toDataURL("image/jpeg",.4))})})}async loadFeedbackPopup(){if(!this.feedbackPopup)try{let d=(await import("./chunks-WD3FHN2M.js")).default;if(typeof d!="function")return;this.feedbackPopup=new d}catch{}}},Tn=Rn,Ln=Tn;export{Ln as default};
