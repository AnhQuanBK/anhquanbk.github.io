import{f as Rr,h as Tr,j as F,l as I,m as D,n as j,o as H,p as U,q as V,r as de,s as _t,x as q,y as K}from"./chunks-HXJ4FROC.js";var yt=Rr((mt,Le)=>{F();I();D();j();H();U();V();K();q();(function(N){if(typeof mt=="object"&&typeof Le!="undefined")Le.exports=N();else if(typeof define=="function"&&define.amd)define([],N);else{var l;typeof window!="undefined"?l=window:typeof global!="undefined"?l=global:typeof self!="undefined"?l=self:l=this,l.Bugsnag=N()}})(function(){var N,l,y,P=["navigation","request","process","log","user","state","error","manual"],O=function(e,t,n){for(var r=n,a=0,o=e.length;a<o;a++)r=t(r,e[a],a,e);return r},w=function(e,t){return O(e,function(n,r,a,o){return t(r,a,o)?n.concat(r):n},[])},k=function(e,t){return O(e,function(n,r,a,o){return n===!0||r===t},!1)},X=function(e){return Object.prototype.toString.call(e)==="[object Array]"},Et=!{toString:null}.propertyIsEnumerable("toString"),le=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],A=function(e){var t=[],n;for(n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.push(n);if(!Et)return t;for(var r=0,a=le.length;r<a;r++)Object.prototype.hasOwnProperty.call(e,le[r])&&t.push(le[r]);return t},Ie=function(e,t){return e===void 0&&(e=1),t===void 0&&(t=1/0),function(n){return typeof n=="number"&&parseInt(""+n,10)===n&&n>=e&&n<=t}},ge=function(e){return typeof e=="function"||X(e)&&w(e,function(t){return typeof t=="function"}).length===e.length},Z=function(e){return typeof e=="string"&&!!e.length},re={},De=function(){return{unhandledExceptions:!0,unhandledRejections:!0}};re.schema={apiKey:{defaultValue:function(){return null},message:"is required",validate:Z},appVersion:{defaultValue:function(){},message:"should be a string",validate:function(e){return e===void 0||Z(e)}},appType:{defaultValue:function(){},message:"should be a string",validate:function(e){return e===void 0||Z(e)}},autoDetectErrors:{defaultValue:function(){return!0},message:"should be true|false",validate:function(e){return e===!0||e===!1}},enabledErrorTypes:{defaultValue:function(){return De()},message:"should be an object containing the flags { unhandledExceptions:true|false, unhandledRejections:true|false }",allowPartialObject:!0,validate:function(e){if(typeof e!="object"||!e)return!1;var t=A(e),n=A(De());return!(w(t,function(r){return k(n,r)}).length<t.length||w(A(e),function(r){return typeof e[r]!="boolean"}).length>0)}},onError:{defaultValue:function(){return[]},message:"should be a function or array of functions",validate:ge},onSession:{defaultValue:function(){return[]},message:"should be a function or array of functions",validate:ge},onBreadcrumb:{defaultValue:function(){return[]},message:"should be a function or array of functions",validate:ge},endpoints:{defaultValue:function(e){return typeof e=="undefined"?{notify:"https://notify.bugsnag.com",sessions:"https://sessions.bugsnag.com"}:{notify:null,sessions:null}},message:"should be an object containing endpoint URLs { notify, sessions }",validate:function(e){return e&&typeof e=="object"&&Z(e.notify)&&Z(e.sessions)&&w(A(e),function(t){return!k(["notify","sessions"],t)}).length===0}},autoTrackSessions:{defaultValue:function(e){return!0},message:"should be true|false",validate:function(e){return e===!0||e===!1}},enabledReleaseStages:{defaultValue:function(){return null},message:"should be an array of strings",validate:function(e){return e===null||X(e)&&w(e,function(t){return typeof t=="string"}).length===e.length}},releaseStage:{defaultValue:function(){return"production"},message:"should be a string",validate:function(e){return typeof e=="string"&&e.length}},maxBreadcrumbs:{defaultValue:function(){return 25},message:"should be a number \u2264100",validate:function(e){return Ie(0,100)(e)}},enabledBreadcrumbTypes:{defaultValue:function(){return P},message:"should be null or a list of available breadcrumb types ("+P.join(",")+")",validate:function(e){return e===null||X(e)&&O(e,function(t,n){return t===!1?t:k(P,n)},!0)}},context:{defaultValue:function(){},message:"should be a string",validate:function(e){return e===void 0||typeof e=="string"}},user:{defaultValue:function(){return{}},message:"should be an object with { id, email, name } properties",validate:function(e){return e===null||e&&O(A(e),function(t,n){return t&&k(["id","email","name"],n)},!0)}},metadata:{defaultValue:function(){return{}},message:"should be an object",validate:function(e){return typeof e=="object"&&e!==null}},logger:{defaultValue:function(){},message:"should be null or an object with methods { debug, info, warn, error }",validate:function(e){return!e||e&&O(["debug","info","warn","error"],function(t,n){return t&&typeof e[n]=="function"},!0)}},redactedKeys:{defaultValue:function(){return["password"]},message:"should be an array of strings|regexes",validate:function(e){return X(e)&&e.length===w(e,function(t){return typeof t=="string"||t&&typeof t.test=="function"}).length}},plugins:{defaultValue:function(){return[]},message:"should be an array of plugin objects",validate:function(e){return X(e)&&e.length===w(e,function(t){return t&&typeof t=="object"&&typeof t.load=="function"}).length}},featureFlags:{defaultValue:function(){return[]},message:'should be an array of objects that have a "name" property',validate:function(e){return X(e)&&e.length===w(e,function(t){return t&&typeof t=="object"&&typeof t.name=="string"}).length}},reportUnhandledPromiseRejectionsAsHandled:{defaultValue:function(){return!1},message:"should be true|false",validate:function(e){return e===!0||e===!1}},sendPayloadChecksums:{defaultValue:function(){return!1},message:"should be true|false",validate:function(e){return e===!0||e===!1}}};var M=function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},L=function(e,t){return O(e,function(n,r,a,o){return n.concat(t(r,a,o))},[])};function pe(){return pe=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},pe.apply(this,arguments)}var he=re.schema,Ot={releaseStage:M({},he.releaseStage,{defaultValue:function(){return/^localhost(:\d+)?$/.test(window.location.host)?"development":"production"}}),appType:pe({},he.appType,{defaultValue:function(){return"browser"}}),logger:M({},he.logger,{defaultValue:function(){return typeof console!="undefined"&&typeof console.debug=="function"?Pt():void 0}})},Pt=function(){var e={},t=console.log;return L(["debug","info","warn","error"],function(n){var r=console[n];e[n]=typeof r=="function"?r.bind(console,"[bugsnag]"):t.bind(console,"[bugsnag]")}),e},xt=function(){function e(n,r,a,o){o===void 0&&(o=new Date),this.type=a,this.message=n,this.metadata=r,this.timestamp=o}var t=e.prototype;return t.toJSON=function(){return{type:this.type,name:this.message,timestamp:this.timestamp,metaData:this.metadata}},e}(),ve=xt,ne={};(function(e,t){"use strict";typeof N=="function"&&N.amd?N("stackframe",[],t):typeof ne=="object"?ne=t():e.StackFrame=t()})(this,function(){"use strict";function e(d){return!isNaN(parseFloat(d))&&isFinite(d)}function t(d){return d.charAt(0).toUpperCase()+d.substring(1)}function n(d){return function(){return this[d]}}var r=["isConstructor","isEval","isNative","isToplevel"],a=["columnNumber","lineNumber"],o=["fileName","functionName","source"],i=["args"],u=["evalOrigin"],s=r.concat(a,o,i,u);function c(d){if(d)for(var h=0;h<s.length;h++)d[s[h]]!==void 0&&this["set"+t(s[h])](d[s[h]])}c.prototype={getArgs:function(){return this.args},setArgs:function(d){if(Object.prototype.toString.call(d)!=="[object Array]")throw new TypeError("Args must be an Array");this.args=d},getEvalOrigin:function(){return this.evalOrigin},setEvalOrigin:function(d){if(d instanceof c)this.evalOrigin=d;else if(d instanceof Object)this.evalOrigin=new c(d);else throw new TypeError("Eval Origin must be an Object or StackFrame")},toString:function(){var d=this.getFileName()||"",h=this.getLineNumber()||"",m=this.getColumnNumber()||"",g=this.getFunctionName()||"";return this.getIsEval()?d?"[eval] ("+d+":"+h+":"+m+")":"[eval]:"+h+":"+m:g?g+" ("+d+":"+h+":"+m+")":d+":"+h+":"+m}},c.fromString=function(h){var m=h.indexOf("("),g=h.lastIndexOf(")"),_=h.substring(0,m),S=h.substring(m+1,g).split(","),b=h.substring(g+1);if(b.indexOf("@")===0)var x=/@(.+?)(?::(\d+))?(?::(\d+))?$/.exec(b,""),E=x[1],B=x[2],T=x[3];return new c({functionName:_,args:S||void 0,fileName:E,lineNumber:B||void 0,columnNumber:T||void 0})};for(var f=0;f<r.length;f++)c.prototype["get"+t(r[f])]=n(r[f]),c.prototype["set"+t(r[f])]=function(d){return function(h){this[d]=!!h}}(r[f]);for(var v=0;v<a.length;v++)c.prototype["get"+t(a[v])]=n(a[v]),c.prototype["set"+t(a[v])]=function(d){return function(h){if(!e(h))throw new TypeError(d+" must be a Number");this[d]=Number(h)}}(a[v]);for(var p=0;p<o.length;p++)c.prototype["get"+t(o[p])]=n(o[p]),c.prototype["set"+t(o[p])]=function(d){return function(h){this[d]=String(h)}}(o[p]);return c});var _e={};(function(e,t){"use strict";typeof N=="function"&&N.amd?N("stack-generator",["stackframe"],t):typeof _e=="object"?_e=t(ne):e.StackGenerator=t(e.StackFrame)})(this,function(e){return{backtrace:function(n){var r=[],a=10;typeof n=="object"&&typeof n.maxStackSize=="number"&&(a=n.maxStackSize);for(var o=arguments.callee;o&&r.length<a&&o.arguments;){for(var i=new Array(o.arguments.length),u=0;u<i.length;++u)i[u]=o.arguments[u];/function(?:\s+([\w$]+))+\s*\(/.test(o.toString())?r.push(new e({functionName:RegExp.$1||void 0,args:i})):r.push(new e({args:i}));try{o=o.caller}catch(s){break}}return r}}});var me={};(function(e,t){"use strict";typeof N=="function"&&N.amd?N("error-stack-parser",["stackframe"],t):typeof me=="object"?me=t(ne):e.ErrorStackParser=t(e.StackFrame)})(this,function(t){"use strict";var n=/(^|@)\S+:\d+/,r=/^\s*at .*(\S+:\d+|\(native\))/m,a=/^(eval@)?(\[native code])?$/;return{parse:function(i){if(typeof i.stacktrace!="undefined"||typeof i["opera#sourceloc"]!="undefined")return this.parseOpera(i);if(i.stack&&i.stack.match(r))return this.parseV8OrIE(i);if(i.stack)return this.parseFFOrSafari(i);throw new Error("Cannot parse given Error object")},extractLocation:function(i){if(i.indexOf(":")===-1)return[i];var u=/(.+?)(?::(\d+))?(?::(\d+))?$/,s=u.exec(i.replace(/[()]/g,""));return[s[1],s[2]||void 0,s[3]||void 0]},parseV8OrIE:function(i){var u=i.stack.split(`
`).filter(function(s){return!!s.match(r)},this);return u.map(function(s){s.indexOf("(eval ")>-1&&(s=s.replace(/eval code/g,"eval").replace(/(\(eval at [^()]*)|(\),.*$)/g,""));var c=s.replace(/^\s+/,"").replace(/\(eval code/g,"("),f=c.match(/ (\((.+):(\d+):(\d+)\)$)/);c=f?c.replace(f[0],""):c;var v=c.split(/\s+/).slice(1),p=this.extractLocation(f?f[1]:v.pop()),d=v.join(" ")||void 0,h=["eval","<anonymous>"].indexOf(p[0])>-1?void 0:p[0];return new t({functionName:d,fileName:h,lineNumber:p[1],columnNumber:p[2],source:s})},this)},parseFFOrSafari:function(i){var u=i.stack.split(`
`).filter(function(s){return!s.match(a)},this);return u.map(function(s){if(s.indexOf(" > eval")>-1&&(s=s.replace(/ line (\d+)(?: > eval line \d+)* > eval:\d+:\d+/g,":$1")),s.indexOf("@")===-1&&s.indexOf(":")===-1)return new t({functionName:s});var c=/((.*".+"[^@]*)?[^@]*)(?:@)/,f=s.match(c),v=f&&f[1]?f[1]:void 0,p=this.extractLocation(s.replace(c,""));return new t({functionName:v,fileName:p[0],lineNumber:p[1],columnNumber:p[2],source:s})},this)},parseOpera:function(i){return!i.stacktrace||i.message.indexOf(`
`)>-1&&i.message.split(`
`).length>i.stacktrace.split(`
`).length?this.parseOpera9(i):i.stack?this.parseOpera11(i):this.parseOpera10(i)},parseOpera9:function(i){for(var u=/Line (\d+).*script (?:in )?(\S+)/i,s=i.message.split(`
`),c=[],f=2,v=s.length;f<v;f+=2){var p=u.exec(s[f]);p&&c.push(new t({fileName:p[2],lineNumber:p[1],source:s[f]}))}return c},parseOpera10:function(i){for(var u=/Line (\d+).*script (?:in )?(\S+)(?:: In function (\S+))?$/i,s=i.stacktrace.split(`
`),c=[],f=0,v=s.length;f<v;f+=2){var p=u.exec(s[f]);p&&c.push(new t({functionName:p[3]||void 0,fileName:p[2],lineNumber:p[1],source:s[f]}))}return c},parseOpera11:function(i){var u=i.stack.split(`
`).filter(function(s){return!!s.match(n)&&!s.match(/^Error created at/)},this);return u.map(function(s){var c=s.split("@"),f=this.extractLocation(c.pop()),v=c.shift()||"",p=v.replace(/<anonymous function(: (\w+))?>/,"$2").replace(/\([^)]*\)/g,"")||void 0,d;v.match(/\(([^)]*)\)/)&&(d=v.replace(/^[^(]+\(([^)]*)\)$/,"$1"));var h=d===void 0||d==="[arguments not available]"?void 0:d.split(",");return new t({functionName:p,args:h,fileName:f[0],lineNumber:f[1],columnNumber:f[2],source:s})},this)}}});var je=me,ae=function(e,t,n,r){var a=r&&r.redactedKeys?r.redactedKeys:[],o=r&&r.redactedPaths?r.redactedPaths:[];return JSON.stringify(Rt(e,a,o),t,n)},Mt=20,wt=25e3,Nt=8,ie="...";function $t(e){return e instanceof Error||/^\[object (Error|(Dom)?Exception)\]$/.test(Object.prototype.toString.call(e))}function He(e){return"[Throws: "+(e?e.message:"?")+"]"}function Bt(e,t){for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return!0;return!1}function Lt(e,t){for(var n=0,r=e.length;n<r;n++)if(t.indexOf(e[n])===0)return!0;return!1}function kt(e,t){for(var n=0,r=e.length;n<r;n++)if(typeof e[n]=="string"&&e[n].toLowerCase()===t.toLowerCase()||e[n]&&typeof e[n].test=="function"&&e[n].test(t))return!0;return!1}function At(e){return Object.prototype.toString.call(e)==="[object Array]"}function Ct(e,t){try{return e[t]}catch(n){return He(n)}}function Rt(e,t,n){var r=[],a=0;function o(i,u){function s(){return u.length>Nt&&a>wt}if(a++,u.length>Mt||s())return ie;if(i===null||typeof i!="object")return i;if(Bt(r,i))return"[Circular]";if(r.push(i),typeof i.toJSON=="function")try{a--;var c=o(i.toJSON(),u);return r.pop(),c}catch(_){return He(_)}var f=$t(i);if(f){a--;var v=o({name:i.name,message:i.message},u);return r.pop(),v}if(At(i)){for(var p=[],d=0,h=i.length;d<h;d++){if(s()){p.push(ie);break}p.push(o(i[d],u.concat("[]")))}return r.pop(),p}var m={};try{for(var g in i)if(Object.prototype.hasOwnProperty.call(i,g)){if(Lt(n,u.join("."))&&kt(t,g)){m[g]="[REDACTED]";continue}if(s()){m[g]=ie;break}m[g]=o(Ct(i,g),u.concat(g))}}catch(_){}return r.pop(),m}return o(e,[])}function Ue(e,t,n,r){if(typeof n=="string"){r===void 0?r=null:r!==null&&typeof r!="string"&&(r=ae(r));var a=t[n];if(typeof a=="number"){e[a]={name:n,variant:r};return}e.push({name:n,variant:r}),t[n]=e.length-1}}function Tt(e,t,n){if(X(t)){for(var r=0;r<t.length;++r){var a=t[r];a===null||typeof a!="object"||Ue(e,n,a.name,a.variant)}return e}}function Ft(e){return L(w(e,Boolean),function(t){var n=t.name,r=t.variant,a={featureFlag:n};return typeof r=="string"&&(a.variant=r),a})}function It(e,t,n){var r=t[n];typeof r=="number"&&(e[r]=null,delete t[n])}var J={add:Ue,clear:It,merge:Tt,toEventApi:Ft},oe=function(e){return!!e&&(!!e.stack||!!e.stacktrace||!!e["opera#sourceloc"])&&typeof(e.stack||e.stacktrace||e["opera#sourceloc"])=="string"&&e.stack!==e.name+": "+e.message},Dt=jt;function jt(e){switch(Object.prototype.toString.call(e)){case"[object Error]":return!0;case"[object Exception]":return!0;case"[object DOMException]":return!0;default:return e instanceof Error}}var se=Dt,Ht=function(e,t,n,r){var a;if(t){var o;if(n===null)return Ve(e,t);typeof n=="object"&&(o=n),typeof n=="string"&&(o=(a={},a[n]=r,a)),o&&(t==="__proto__"||t==="constructor"||t==="prototype"||(e[t]||(e[t]={}),e[t]=M({},e[t],o)))}},Ut=function(e,t,n){if(typeof t=="string"){if(!n)return e[t];if(e[t])return e[t][n]}},Ve=function(e,t,n){if(typeof t=="string"){if(!n){delete e[t];return}t==="__proto__"||t==="constructor"||t==="prototype"||e[t]&&delete e[t][n]}},G={add:Ht,get:Ut,clear:Ve};function ye(){return ye=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ye.apply(this,arguments)}var C=function(){function e(n,r,a,o,i){a===void 0&&(a=[]),o===void 0&&(o=Kt()),this.apiKey=void 0,this.context=void 0,this.groupingHash=void 0,this.originalError=i,this._handledState=o,this.severity=this._handledState.severity,this.unhandled=this._handledState.unhandled,this.app={},this.device={},this.request={},this.breadcrumbs=[],this.threads=[],this._metadata={},this._features=[],this._featuresIndex={},this._user={},this._session=void 0,this._correlation=void 0,this.errors=[Ke(n,r,e.__type,a)]}var t=e.prototype;return t.addMetadata=function(r,a,o){return G.add(this._metadata,r,a,o)},t.setTraceCorrelation=function(r,a){typeof r=="string"&&(this._correlation=ye({traceId:r},typeof a=="string"?{spanId:a}:{}))},t.getMetadata=function(r,a){return G.get(this._metadata,r,a)},t.clearMetadata=function(r,a){return G.clear(this._metadata,r,a)},t.addFeatureFlag=function(r,a){a===void 0&&(a=null),J.add(this._features,this._featuresIndex,r,a)},t.addFeatureFlags=function(r){J.merge(this._features,r,this._featuresIndex)},t.getFeatureFlags=function(){return J.toEventApi(this._features)},t.clearFeatureFlag=function(r){J.clear(this._features,this._featuresIndex,r)},t.clearFeatureFlags=function(){this._features=[],this._featuresIndex={}},t.getUser=function(){return this._user},t.setUser=function(r,a,o){this._user={id:r,email:a,name:o}},t.toJSON=function(){return{payloadVersion:"4",exceptions:L(this.errors,function(r){return M({},r,{message:r.errorMessage})}),severity:this.severity,unhandled:this._handledState.unhandled,severityReason:this._handledState.severityReason,app:this.app,device:this.device,request:this.request,breadcrumbs:this.breadcrumbs,context:this.context,groupingHash:this.groupingHash,metaData:this._metadata,user:this._user,session:this._session,featureFlags:this.getFeatureFlags(),correlation:this._correlation}},e}(),Vt=function(e){var t={file:e.fileName,method:qt(e.functionName),lineNumber:e.lineNumber,columnNumber:e.columnNumber,code:void 0,inProject:void 0};return t.lineNumber>-1&&!t.file&&!t.method&&(t.file="global code"),t},qt=function(e){return/^global code$/i.test(e)?"global code":e},Kt=function(){return{unhandled:!1,severity:"warning",severityReason:{type:"handledException"}}},qe=function(e){return typeof e=="string"?e:""};function Ke(e,t,n,r){return{errorClass:qe(e),errorMessage:qe(t),type:n,stacktrace:O(r,function(a,o){var i=Vt(o);try{return JSON.stringify(i)==="{}"?a:a.concat(i)}catch(u){return a}},[])}}function Xe(e){return e.cause?[e].concat(Xe(e.cause)):[e]}C.getStacktrace=function(e,t,n){if(oe(e))return je.parse(e).slice(t);try{return w(_e.backtrace(),function(r){return(r.functionName||"").indexOf("StackGenerator$$")===-1}).slice(1+n)}catch(r){return[]}},C.create=function(e,t,n,r,a,o){a===void 0&&(a=0);var i=ze(e,t,r,o),u=i[0],s=i[1],c;try{var f=C.getStacktrace(u,s>0?1+s+a:0,1+a);c=new C(u.name,u.message,f,n,e)}catch(h){c=new C(u.name,u.message,[],n,e)}if(u.name==="InvalidError"&&c.addMetadata(""+r,"non-error parameter",Je(e)),u.cause){var v,p=Xe(u).slice(1),d=L(p,function(h){var m=se(h)&&oe(h)?je.parse(h):[],g=ze(h,!0,"error cause"),_=g[0];return _.name==="InvalidError"&&c.addMetadata("error cause",Je(h)),Ke(_.name,_.message,C.__type,m)});(v=c.errors).push.apply(v,d)}return c};var Je=function(e){return e===null?"null":e===void 0?"undefined":e},ze=function(e,t,n,r){var a,o=0,i=function(u){var s=n==="error cause"?"was":"received";r&&r.warn(n+" "+s+' a non-error: "'+u+'"');var c=new Error(n+" "+s+' a non-error. See "'+n+'" tab for more detail.');return c.name="InvalidError",c};if(!t)se(e)?a=e:(a=i(typeof e),o+=2);else switch(typeof e){case"string":case"number":case"boolean":a=new Error(String(e)),o+=1;break;case"function":a=i("function"),o+=2;break;case"object":e!==null&&se(e)?a=e:e!==null&&Xt(e)?(a=new Error(e.message||e.errorMessage),a.name=e.name||e.errorClass,o+=1):(a=i(e===null?"null":"unsupported object"),o+=2);break;default:a=i("nothing"),o+=2}if(!oe(a))try{throw a}catch(u){oe(u)&&(a=u,o=1)}return[a,o]};C.__type="browserjs";var Xt=function(e){return(typeof e.name=="string"||typeof e.errorClass=="string")&&(typeof e.message=="string"||typeof e.errorMessage=="string")},be=C,Jt=function(e,t,n){var r=0,a=function(){if(r>=e.length)return n(null,!0);t(e[r],function(o,i){if(o)return n(o);if(i===!1)return n(null,!1);r++,a()})};a()},zt=function(e,t,n,r){var a=function(o,i){if(typeof o!="function")return i(null);try{if(o.length!==2){var u=o(t);return u&&typeof u.then=="function"?u.then(function(s){return setTimeout(function(){return i(null,s)})},function(s){setTimeout(function(){return n(s),i(null,!0)})}):i(null,u)}o(t,function(s,c){if(s)return n(s),i(null);i(null,c)})}catch(s){n(s),i(null)}};Jt(e,a,r)},Ge=function(e,t,n,r){for(var a=!1,o=e.slice();!a&&o.length;)try{a=o.pop()(t)===!1}catch(i){r.error("Error occurred in "+n+" callback, continuing anyway\u2026"),r.error(i)}return a},Se=function(t,n){var r="000000000"+t;return r.substr(r.length-n)},We=typeof window=="object"?window:self,Ye=0;for(var Gt in We)Object.hasOwnProperty.call(We,Gt)&&Ye++;var Wt=navigator.mimeTypes?navigator.mimeTypes.length:0,Yt=Se((Wt+navigator.userAgent.length).toString(36)+Ye.toString(36),4),Qe=function(){return Yt},Qt=function(t){return typeof t=="string"&&/^c[a-z0-9]{20,32}$/.test(t)},ee=0,Ee=4,ue=36,Ze=Math.pow(ue,Ee);function et(){return Se((Math.random()*Ze<<0).toString(ue),Ee)}function Zt(){return ee=ee<Ze?ee:0,ee++,ee-1}function Oe(){var e="c",t=new Date().getTime().toString(ue),n=Se(Zt().toString(ue),Ee),r=Qe(),a=et()+et();return e+t+n+r+a}Oe.fingerprint=Qe,Oe.isCuid=Qt;var tt=Oe,er=function(){function e(){this.id=tt(),this.startedAt=new Date,this._handled=0,this._unhandled=0,this._user={},this.app={},this.device={}}var t=e.prototype;return t.getUser=function(){return this._user},t.setUser=function(r,a,o){this._user={id:r,email:a,name:o}},t.toJSON=function(){return{id:this.id,startedAt:this.startedAt,events:{handled:this._handled,unhandled:this._unhandled}}},t._track=function(r){this[r._handledState.unhandled?"_unhandled":"_handled"]+=1},e}(),Pe=er,tr=J.add,rr=J.clear,xe=J.merge,R=function(){},nr=function(){function e(n,r,a,o){var i=this;r===void 0&&(r=re.schema),a===void 0&&(a=[]),this._notifier=o,this._config={},this._schema=r,this._delivery={sendSession:R,sendEvent:R},this._logger={debug:R,info:R,warn:R,error:R},this._plugins={},this._breadcrumbs=[],this._session=null,this._metadata={},this._featuresIndex={},this._features=[],this._context=void 0,this._user={},this._cbs={e:[],s:[],sp:[],b:[]},this.Client=e,this.Event=be,this.Breadcrumb=ve,this.Session=Pe,this._config=this._configure(n,a),L(a.concat(this._config.plugins),function(c){c&&i._loadPlugin(c)}),this._depth=1;var u=this,s=this.notify;this.notify=function(){return s.apply(u,arguments)}}var t=e.prototype;return t.addMetadata=function(r,a,o){return G.add(this._metadata,r,a,o)},t.getMetadata=function(r,a){return G.get(this._metadata,r,a)},t.clearMetadata=function(r,a){return G.clear(this._metadata,r,a)},t.addFeatureFlag=function(r,a){a===void 0&&(a=null),tr(this._features,this._featuresIndex,r,a)},t.addFeatureFlags=function(r){xe(this._features,r,this._featuresIndex)},t.clearFeatureFlag=function(r){rr(this._features,this._featuresIndex,r)},t.clearFeatureFlags=function(){this._features=[],this._featuresIndex={}},t.getContext=function(){return this._context},t.setContext=function(r){this._context=r},t._configure=function(r,a){var o=O(a,function(c,f){return f&&f.configSchema?M({},c,f.configSchema):c},this._schema);r.endpoints||(r.sendPayloadChecksums="sendPayloadChecksums"in r?r.sendPayloadChecksums:!0);var i=O(A(o),function(c,f){var v=o[f].defaultValue(r[f]);if(r[f]!==void 0){var p=o[f].validate(r[f]);p?o[f].allowPartialObject?c.config[f]=M(v,r[f]):c.config[f]=r[f]:(c.errors[f]=o[f].message,c.config[f]=v)}else c.config[f]=v;return c},{errors:{},config:{}}),u=i.errors,s=i.config;if(o.apiKey){if(!s.apiKey)throw new Error("No Bugsnag API Key set");/^[0-9a-f]{32}$/i.test(s.apiKey)||(u.apiKey="should be a string of 32 hexadecimal characters")}return this._metadata=M({},s.metadata),xe(this._features,s.featureFlags,this._featuresIndex),this._user=M({},s.user),this._context=s.context,s.logger&&(this._logger=s.logger),s.onError&&(this._cbs.e=this._cbs.e.concat(s.onError)),s.onBreadcrumb&&(this._cbs.b=this._cbs.b.concat(s.onBreadcrumb)),s.onSession&&(this._cbs.s=this._cbs.s.concat(s.onSession)),A(u).length&&this._logger.warn(ar(u,r)),s},t.getUser=function(){return this._user},t.setUser=function(r,a,o){this._user={id:r,email:a,name:o}},t._loadPlugin=function(r){var a=r.load(this);r.name&&(this._plugins["~"+r.name+"~"]=a)},t.getPlugin=function(r){return this._plugins["~"+r+"~"]},t._setDelivery=function(r){this._delivery=r(this)},t.startSession=function(){var r=new Pe;r.app.releaseStage=this._config.releaseStage,r.app.version=this._config.appVersion,r.app.type=this._config.appType,r._user=M({},this._user);var a=Ge(this._cbs.s,r,"onSession",this._logger);return a?(this._logger.debug("Session not started due to onSession callback"),this):this._sessionDelegate.startSession(this,r)},t.addOnError=function(r,a){a===void 0&&(a=!1),this._cbs.e[a?"unshift":"push"](r)},t.removeOnError=function(r){this._cbs.e=w(this._cbs.e,function(a){return a!==r})},t._addOnSessionPayload=function(r){this._cbs.sp.push(r)},t.addOnSession=function(r){this._cbs.s.push(r)},t.removeOnSession=function(r){this._cbs.s=w(this._cbs.s,function(a){return a!==r})},t.addOnBreadcrumb=function(r,a){a===void 0&&(a=!1),this._cbs.b[a?"unshift":"push"](r)},t.removeOnBreadcrumb=function(r){this._cbs.b=w(this._cbs.b,function(a){return a!==r})},t.pauseSession=function(){return this._sessionDelegate.pauseSession(this)},t.resumeSession=function(){return this._sessionDelegate.resumeSession(this)},t.leaveBreadcrumb=function(r,a,o){if(r=typeof r=="string"?r:"",o=typeof o=="string"&&k(P,o)?o:"manual",a=typeof a=="object"&&a!==null?a:{},!!r){var i=new ve(r,a,o),u=Ge(this._cbs.b,i,"onBreadcrumb",this._logger);if(u){this._logger.debug("Breadcrumb not attached due to onBreadcrumb callback");return}this._breadcrumbs.push(i),this._breadcrumbs.length>this._config.maxBreadcrumbs&&(this._breadcrumbs=this._breadcrumbs.slice(this._breadcrumbs.length-this._config.maxBreadcrumbs))}},t._isBreadcrumbTypeEnabled=function(r){var a=this._config.enabledBreadcrumbTypes;return a===null||k(a,r)},t.notify=function(r,a,o){o===void 0&&(o=R);var i=be.create(r,!0,void 0,"notify()",this._depth+1,this._logger);this._notify(i,a,o)},t._notify=function(r,a,o){var i=this;if(o===void 0&&(o=R),r.app=M({},r.app,{releaseStage:this._config.releaseStage,version:this._config.appVersion,type:this._config.appType}),r.context=r.context||this._context,r._metadata=M({},r._metadata,this._metadata),r._user=M({},r._user,this._user),r.breadcrumbs=this._breadcrumbs.slice(),xe(r._features,this._features,r._featuresIndex),this._config.enabledReleaseStages!==null&&!k(this._config.enabledReleaseStages,this._config.releaseStage))return this._logger.warn("Event not sent due to releaseStage/enabledReleaseStages configuration"),o(null,r);var u=r.severity,s=function(f){i._logger.error("Error occurred in onError callback, continuing anyway\u2026"),i._logger.error(f)},c=[].concat(this._cbs.e).concat(a);zt(c,r,s,function(f,v){if(f&&s(f),!v)return i._logger.debug("Event not sent due to onError callback"),o(null,r);i._isBreadcrumbTypeEnabled("error")&&e.prototype.leaveBreadcrumb.call(i,r.errors[0].errorClass,{errorClass:r.errors[0].errorClass,errorMessage:r.errors[0].errorMessage,severity:r.severity},"error"),u!==r.severity&&(r._handledState.severityReason={type:"userCallbackSetSeverity"}),r.unhandled!==r._handledState.unhandled&&(r._handledState.severityReason.unhandledOverridden=!0,r._handledState.unhandled=r.unhandled),i._session&&(i._session._track(r),r._session=i._session),i._delivery.sendEvent({apiKey:r.apiKey||i._config.apiKey,notifier:i._notifier,events:[r]},function(p){return o(p,r)})})},e}(),ar=function(e,t){var n=new Error(`Invalid configuration
`+L(A(e),function(r){return"  - "+r+" "+e[r]+", got "+ir(t[r])}).join(`

`));return n},ir=function(e){switch(typeof e){case"string":case"number":case"object":return JSON.stringify(e);default:return String(e)}},Me=nr,W={},rt=["events.[].metaData","events.[].breadcrumbs.[].metaData","events.[].request"];W.event=function(e,t){var n=ae(e,null,null,{redactedPaths:rt,redactedKeys:t});return n.length>1e6&&(e.events[0]._metadata={notifier:`WARNING!
Serialized payload was `+n.length/1e6+`MB (limit = 1MB)
metadata was removed`},n=ae(e,null,null,{redactedPaths:rt,redactedKeys:t})),n},W.session=function(e,t){var n=ae(e,null,null);return n};var we={};we=function(e,t){return t===void 0&&(t=window),{sendEvent:function(n,r){if(r===void 0&&(r=function(){}),e._config.endpoints.notify===null){var a=new Error("Event not sent due to incomplete endpoint configuration");return r(a)}var o=nt(e._config,"notify","4",t),i=W.event(n,e._config.redactedKeys),u=new t.XDomainRequest;u.onload=function(){r(null)},u.onerror=function(){var s=new Error("Event failed to send");e._logger.error("Event failed to send\u2026",s),i.length>1e6&&e._logger.warn("Event oversized ("+(i.length/1e6).toFixed(2)+" MB)"),r(s)},u.open("POST",o),setTimeout(function(){try{u.send(i)}catch(s){e._logger.error(s),r(s)}},0)},sendSession:function(n,r){if(r===void 0&&(r=function(){}),e._config.endpoints.sessions===null){var a=new Error("Session not sent due to incomplete endpoint configuration");return r(a)}var o=nt(e._config,"sessions","1",t),i=new t.XDomainRequest;i.onload=function(){r(null)},i.open("POST",o),setTimeout(function(){try{i.send(W.session(n,e._config.redactedKeys))}catch(u){e._logger.error(u),r(u)}},0)}}};var nt=function(e,t,n,r){var a=JSON.parse(JSON.stringify(new Date)),o=or(e.endpoints[t],r.location.protocol);return o+"?apiKey="+encodeURIComponent(e.apiKey)+"&payloadVersion="+n+"&sentAt="+encodeURIComponent(a)},or=we._matchPageProtocol=function(e,t){return t==="http:"?e.replace(/^https:/,"http:"):e};function at(e,t){if(e.isSecureContext&&e.crypto&&e.crypto.subtle&&e.crypto.subtle.digest&&typeof TextEncoder=="function"){var n=new TextEncoder().encode(t);return e.crypto.subtle.digest("SHA-1",n).then(function(r){var a=Array.from(new Uint8Array(r)),o=a.map(function(i){return i.toString(16).padStart(2,"0")}).join("");return"sha1 "+o})}return Promise.resolve()}var sr=function(e,t){return t===void 0&&(t=window),{sendEvent:function(n,r){r===void 0&&(r=function(){});try{var a=e._config.endpoints.notify;if(a===null){var o=new Error("Event not sent due to incomplete endpoint configuration");return r(o)}var i=new t.XMLHttpRequest,u=W.event(n,e._config.redactedKeys);i.onreadystatechange=function(){if(i.readyState===t.XMLHttpRequest.DONE){var s=i.status;if(s===0||s>=400){var c=new Error("Request failed with status "+s);e._logger.error("Event failed to send\u2026",c),u.length>1e6&&e._logger.warn("Event oversized ("+(u.length/1e6).toFixed(2)+" MB)"),r(c)}else r(null)}},i.open("POST",a),i.setRequestHeader("Content-Type","application/json"),i.setRequestHeader("Bugsnag-Api-Key",n.apiKey||e._config.apiKey),i.setRequestHeader("Bugsnag-Payload-Version","4"),i.setRequestHeader("Bugsnag-Sent-At",new Date().toISOString()),e._config.sendPayloadChecksums&&typeof Promise!="undefined"&&Promise.toString().indexOf("[native code]")!==-1?at(t,u).then(function(s){s&&i.setRequestHeader("Bugsnag-Integrity",s),i.send(u)}).catch(function(s){e._logger.error(s),i.send(u)}):i.send(u)}catch(s){e._logger.error(s)}},sendSession:function(n,r){r===void 0&&(r=function(){});try{var a=e._config.endpoints.sessions;if(a===null){var o=new Error("Session not sent due to incomplete endpoint configuration");return r(o)}var i=new t.XMLHttpRequest,u=W.session(n,e._config.redactedKeys);i.onreadystatechange=function(){if(i.readyState===t.XMLHttpRequest.DONE){var s=i.status;if(s===0||s>=400){var c=new Error("Request failed with status "+s);e._logger.error("Session failed to send\u2026",c),r(c)}else r(null)}},i.open("POST",a),i.setRequestHeader("Content-Type","application/json"),i.setRequestHeader("Bugsnag-Api-Key",e._config.apiKey),i.setRequestHeader("Bugsnag-Payload-Version","1"),i.setRequestHeader("Bugsnag-Sent-At",new Date().toISOString()),e._config.sendPayloadChecksums&&typeof Promise!="undefined"&&Promise.toString().indexOf("[native code]")!==-1?at(t,u).then(function(s){s&&i.setRequestHeader("Bugsnag-Integrity",s),i.send(u)}).catch(function(s){e._logger.error(s),i.send(u)}):i.send(u)}catch(s){e._logger.error(s)}}}},it=new Date,ur=function(){it=new Date},cr={name:"appDuration",load:function(e){return e.addOnError(function(t){var n=new Date;t.app.duration=n-it},!0),{reset:ur}}},fr=function(e){return e===void 0&&(e=window),{load:function(t){t.addOnError(function(n){n.context===void 0&&(n.context=e.location.pathname)},!0)}}},ot="bugsnag-anonymous-id",dr=function(e){try{var t=e.localStorage,n=t.getItem(ot);return n&&/^c[a-z0-9]{20,32}$/.test(n)||(n=tt(),t.setItem(ot,n)),n}catch(r){}},lr=function(e,t){return e===void 0&&(e=navigator),t===void 0&&(t=window),{load:function(n){var r={locale:e.browserLanguage||e.systemLanguage||e.userLanguage||e.language,userAgent:e.userAgent};t&&t.screen&&t.screen.orientation&&t.screen.orientation.type?r.orientation=t.screen.orientation.type:t&&t.document&&(r.orientation=t.document.documentElement.clientWidth>t.document.documentElement.clientHeight?"landscape":"portrait"),n._config.generateAnonymousId&&(r.id=dr(t)),n.addOnSession(function(a){a.device=M({},a.device,r),n._config.collectUserIp||st(a)}),n.addOnError(function(a){a.device=M({},a.device,r,{time:new Date}),n._config.collectUserIp||st(a)},!0)},configSchema:{generateAnonymousId:{validate:function(n){return n===!0||n===!1},defaultValue:function(){return!0},message:"should be true|false"}}}},st=function(e){var t=e.getUser();(!t||!t.id)&&e.setUser(e.device.id)},gr=function(e){return e===void 0&&(e=window),{load:function(t){t.addOnError(function(n){n.request&&n.request.url||(n.request=M({},n.request,{url:e.location.href}))},!0)}}},pr={load:function(e){e._sessionDelegate=hr}},hr={startSession:function(e,t){var n=e;return n._session=t,n._pausedSession=null,n._config.enabledReleaseStages!==null&&!k(n._config.enabledReleaseStages,n._config.releaseStage)?(n._logger.warn("Session not sent due to releaseStage/enabledReleaseStages configuration"),n):(n._delivery.sendSession({notifier:n._notifier,device:t.device,app:t.app,sessions:[{id:t.id,startedAt:t.startedAt,user:t._user}]}),n)},resumeSession:function(e){return e._session?e:e._pausedSession?(e._session=e._pausedSession,e._pausedSession=null,e):e.startSession()},pauseSession:function(e){e._pausedSession=e._session,e._session=null}},vr={load:function(e){e._config.collectUserIp||e.addOnError(function(t){t._user&&typeof t._user.id=="undefined"&&delete t._user.id,t._user=M({id:"[REDACTED]"},t._user),t.request=M({clientIp:"[REDACTED]"},t.request)})},configSchema:{collectUserIp:{defaultValue:function(){return!0},message:"should be true|false",validate:function(e){return e===!0||e===!1}}}},ut={};ut.load=function(e){var t=/^(local-)?dev(elopment)?$/.test(e._config.releaseStage);t||!e._isBreadcrumbTypeEnabled("log")||L(_r,function(n){var r=console[n];console[n]=function(){for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];e.leaveBreadcrumb("Console output",O(o,function(u,s,c){var f="[Unknown value]";try{f=String(s)}catch(v){}if(f==="[object Object]")try{f=JSON.stringify(s)}catch(v){}return u["["+c+"]"]=f,u},{severity:n.indexOf("group")===0?"log":n}),"log"),r.apply(console,o)},(()=>{})._restore=function(){console[n]=r}})};var _r=w(["log","debug","info","warn","error"],function(e){return typeof console!="undefined"&&typeof console[e]=="function"}),ct=200,ft=5e5,mr=function(e,t){return e===void 0&&(e=document),t===void 0&&(t=window),{load:function(n){if(!n._config.trackInlineScripts)return;var r=t.location.href,a="",o=!!e.attachEvent,i=o?e.readyState==="complete":e.readyState!=="loading",u=function(){return e.documentElement.outerHTML};a=u();var s=e.onreadystatechange;e.onreadystatechange=function(){e.readyState==="interactive"&&(a=u(),i=!0);try{s.apply(this,arguments)}catch(g){}};var c=null,f=function(g){c=g},v=function(){var g=e.currentScript||c;if(!g&&!i){var _=e.scripts||e.getElementsByTagName("script");g=_[_.length-1]}return g},p=function(g){(!i||!a)&&(a=u());var _=["<!-- DOC START -->"].concat(a.split(`
`)),S=g-1,b=Math.max(S-3,0),x=Math.min(S+3,_.length);return O(_.slice(b,x),function(E,B,T){return E[b+1+T]=B.length<=ct?B:B.substr(0,ct),E},{})};n.addOnError(function(g){g.errors[0].stacktrace=w(g.errors[0].stacktrace,function(E){return!/__trace__$/.test(E.method)});var _=g.errors[0].stacktrace[0],S=function(E){return E.replace(/#.*$/,"").replace(/\?.*$/,"")};if(!(_&&_.file&&S(_.file)!==S(r))){var b=v();if(b){var x=b.innerHTML;g.addMetadata("script","content",x.length<=ft?x:x.substr(0,ft)),_&&_.lineNumber&&(_.code=p(_.lineNumber))}}},!0);var d=L(["setTimeout","setInterval","setImmediate","requestAnimationFrame"],function(g){return Ne(t,g,function(_){return m(_,function(S){return{get:function(){return S[0]},replace:function(b){S[0]=b}}})})}),h=d[0];L(["EventTarget","Window","Node","ApplicationCache","AudioTrackList","ChannelMergerNode","CryptoOperation","EventSource","FileReader","HTMLUnknownElement","IDBDatabase","IDBRequest","IDBTransaction","KeyOperation","MediaController","MessagePort","ModalWindow","Notification","SVGElementInstance","Screen","TextTrack","TextTrackCue","TextTrackList","WebSocket","WebSocketWorker","Worker","XMLHttpRequest","XMLHttpRequestEventTarget","XMLHttpRequestUpload"],function(g){!t[g]||!t[g].prototype||!Object.prototype.hasOwnProperty.call(t[g].prototype,"addEventListener")||(Ne(t[g].prototype,"addEventListener",function(_){return m(_,dt)}),Ne(t[g].prototype,"removeEventListener",function(_){return m(_,dt,!0)}))});function m(g,_,S){return S===void 0&&(S=!1),function(){var b=[].slice.call(arguments);try{var x=_(b),E=x.get();if(S&&g.apply(this,b),typeof E!="function")return g.apply(this,b);if(E.__trace__)x.replace(E.__trace__);else{var B=v();E.__trace__=function(){f(B),h(function(){f(null)},0);var Cr=E.apply(this,arguments);return f(null),Cr},E.__trace__.__trace__=E.__trace__,x.replace(E.__trace__)}}catch(T){}if(g.apply)return g.apply(this,b);switch(b.length){case 1:return g(b[0]);case 2:return g(b[0],b[1]);default:return g()}}}},configSchema:{trackInlineScripts:{validate:function(n){return n===!0||n===!1},defaultValue:function(){return!0},message:"should be true|false"}}}};function Ne(e,t,n){var r=e[t];if(!r)return r;var a=n(r);return e[t]=a,r}function dt(e){var t=!!e[1]&&typeof e[1].handleEvent=="function";return{get:function(){return t?e[1].handleEvent:e[1]},replace:function(n){t?e[1].handleEvent=n:e[1]=n}}}var yr=function(e){return e===void 0&&(e=window),{load:function(t){"addEventListener"in e&&t._isBreadcrumbTypeEnabled("user")&&e.addEventListener("click",function(n){var r,a;try{r=Sr(n.target),a=lt(n.target,e)}catch(o){r="[hidden]",a="[hidden]",t._logger.error("Cross domain error when tracking click event. See docs: https://tinyurl.com/yy3rn63z")}t.leaveBreadcrumb("UI click",{targetText:r,targetSelector:a},"user")},!0)}}},br=/^\s*([^\s][\s\S]{0,139}[^\s])?\s*/;function Sr(e){var t=e.textContent||e.innerText||"";return!t&&(e.type==="submit"||e.type==="button")&&(t=e.value),t=t.replace(br,"$1"),t.length>140?t.slice(0,135)+"(...)":t}function lt(e,t){var n=[e.tagName];if(e.id&&n.push("#"+e.id),e.className&&e.className.length&&n.push("."+e.className.split(" ").join(".")),!t.document.querySelectorAll||!Array.prototype.indexOf)return n.join("");try{if(t.document.querySelectorAll(n.join("")).length===1)return n.join("")}catch(a){return n.join("")}if(e.parentNode.childNodes.length>1){var r=Array.prototype.indexOf.call(e.parentNode.childNodes,e)+1;n.push(":nth-child("+r+")")}return t.document.querySelectorAll(n.join("")).length===1?n.join(""):e.parentNode?lt(e.parentNode,t)+" > "+n.join(""):n.join("")}var gt={};gt=function(e){e===void 0&&(e=window);var t={load:function(n){if("addEventListener"in e&&n._isBreadcrumbTypeEnabled("navigation")){var r=function(a){return function(){return n.leaveBreadcrumb(a,{},"navigation")}};e.addEventListener("pagehide",r("Page hidden"),!0),e.addEventListener("pageshow",r("Page shown"),!0),e.addEventListener("load",r("Page loaded"),!0),e.document.addEventListener("DOMContentLoaded",r("DOMContentLoaded"),!0),e.addEventListener("load",function(){return e.addEventListener("popstate",r("Navigated back"),!0)}),e.addEventListener("hashchange",function(a){var o=a.oldURL?{from:ce(a.oldURL,e),to:ce(a.newURL,e),state:ht(e)}:{to:ce(e.location.href,e)};n.leaveBreadcrumb("Hash changed",o,"navigation")},!0),e.history.pushState&&pt(n,e.history,"pushState",e,!0),e.history.replaceState&&pt(n,e.history,"replaceState",e)}}};return t};var ce=function(e,t){var n=t.document.createElement("A");return n.href=e,""+n.pathname+n.search+n.hash},Er=function(e,t,n,r){var a=ce(e.location.href,e);return{title:n,state:t,prevState:ht(e),to:r||a,from:a}},pt=function(e,t,n,r,a){a===void 0&&(a=!1);var o=t[n];t[n]=function(i,u,s){e.leaveBreadcrumb("History "+n,Er(r,i,u,s),"navigation"),a&&typeof e.resetEventCount=="function"&&e.resetEventCount(),o.apply(t,[i,u].concat(s!==void 0?s:[]))}},ht=function(e){try{return e.history.state}catch(t){}},Y="request",Or=function(e,t){e===void 0&&(e=[]),t===void 0&&(t=window);var n=[],r={load:function(a){if(!a._isBreadcrumbTypeEnabled("request"))return;var o=[a._config.endpoints.notify,a._config.endpoints.sessions].concat(e);i(),c();function i(){if(!(!("addEventListener"in t.XMLHttpRequest.prototype)||!("WeakMap"in t))){var p=new WeakMap,d=new WeakMap,h=t.XMLHttpRequest.prototype.open;t.XMLHttpRequest.prototype.open=function(_,S){this&&p.set(this,{method:_,url:S}),h.apply(this,arguments)};var m=t.XMLHttpRequest.prototype.send;t.XMLHttpRequest.prototype.send=function(_){var S=this,b=p.get(this);if(b){var x=d.get(this);x&&(this.removeEventListener("load",x.load),this.removeEventListener("error",x.error));var E=new Date,B=function(){return s(b.method,b.url,fe(E))},T=function(){return u(b.method,b.url,S.status,fe(E))};this.addEventListener("load",T),this.addEventListener("error",B),this&&d.set(this,{load:T,error:B})}m.apply(this,arguments)}}}function u(p,d,h,m){if(d===void 0){a._logger.warn("The request URL is no longer present on this XMLHttpRequest. A breadcrumb cannot be left for this request.");return}if(!(typeof d=="string"&&k(o,d.replace(/\?.*$/,"")))){var g={status:h,method:String(p),url:String(d),duration:m};h>=400?a.leaveBreadcrumb("XMLHttpRequest failed",g,Y):a.leaveBreadcrumb("XMLHttpRequest succeeded",g,Y)}}function s(p,d,h){if(d===void 0){a._logger.warn("The request URL is no longer present on this XMLHttpRequest. A breadcrumb cannot be left for this request.");return}typeof d=="string"&&k(o,d.replace(/\?.*$/,""))||a.leaveBreadcrumb("XMLHttpRequest error",{method:String(p),url:String(d),duration:h},Y)}function c(){if(!(!("fetch"in t)||t.fetch.polyfill)){var p=t.fetch;t.fetch=function(){var h=arguments,m=arguments[0],g=arguments[1],_,S=null;return m&&typeof m=="object"?(S=m.url,g&&"method"in g?_=g.method:m&&"method"in m&&(_=m.method)):(S=m,g&&"method"in g&&(_=g.method)),_===void 0&&(_="GET"),new Promise(function(b,x){var E=new Date;p.apply(void 0,h).then(function(B){f(B,_,S,fe(E)),b(B)}).catch(function(B){v(_,S,fe(E)),x(B)})})}}}var f=function(p,d,h,m){var g={method:String(d),status:p.status,url:String(h),duration:m};p.status>=400?a.leaveBreadcrumb("fetch() failed",g,Y):a.leaveBreadcrumb("fetch() succeeded",g,Y)},v=function(p,d,h){a.leaveBreadcrumb("fetch() error",{method:String(p),url:String(d),duration:h},Y)}}};return r},fe=function(e){return e&&new Date-e},Pr={load:function(e){var t=0;e.addOnError(function(n){if(t>=e._config.maxEvents)return e._logger.warn("Cancelling event send due to maxEvents per session limit of "+e._config.maxEvents+" being reached"),!1;t++}),e.resetEventCount=function(){t=0}},configSchema:{maxEvents:{defaultValue:function(){return 10},message:"should be a positive integer \u2264100",validate:function(e){return Ie(1,100)(e)}}}},$e={};$e={load:function(e){e.addOnError(function(t){var n=O(t.errors,function(r,a){return r.concat(a.stacktrace)},[]);L(n,function(r){r.file=xr(r.file)})})}};var xr=$e._strip=function(e){return typeof e=="string"?e.replace(/\?.*$/,"").replace(/#.*$/,""):e},Mr=function(e,t){return e===void 0&&(e=window),t===void 0&&(t="window onerror"),{load:function(n){if(!n._config.autoDetectErrors||!n._config.enabledErrorTypes.unhandledExceptions)return;function r(o,i,u,s,c){if(u===0&&/Script error\.?/.test(o))n._logger.warn("Ignoring cross-domain or eval script error. See docs: https://tinyurl.com/yy3rn63z");else{var f={severity:"error",unhandled:!0,severityReason:{type:"unhandledException"}},v;if(c)v=n.Event.create(c,!0,f,t,1),vt(v.errors[0].stacktrace,i,u,s);else if(typeof o=="object"&&o!==null&&(!i||typeof i!="string")&&!u&&!s&&!c){var p=o.type?"Event: "+o.type:"Error",d=o.message||o.detail||"";v=n.Event.create({name:p,message:d},!0,f,t,1),v.originalError=o,v.addMetadata(t,{event:o,extraParameters:i})}else v=n.Event.create(o,!0,f,t,1),vt(v.errors[0].stacktrace,i,u,s);n._notify(v)}typeof a=="function"&&a.apply(this,arguments)}var a=e.onerror;e.onerror=r}}},vt=function(e,t,n,r){e[0]||e.push({});var a=e[0];!a.file&&typeof t=="string"&&(a.file=t),!a.lineNumber&&Be(n)&&(a.lineNumber=n),a.columnNumber||(Be(r)?a.columnNumber=r:window.event&&Be(window.event.errorCharacter)&&(a.columnNumber=window.event.errorCharacter))},Be=function(e){return typeof e=="number"&&String.call(e)!=="NaN"},wr,Nr=function(e){e===void 0&&(e=window);var t={load:function(n){if(!(!n._config.autoDetectErrors||!n._config.enabledErrorTypes.unhandledRejections)){var r=function(a){var o=a.reason,i=!1;try{a.detail&&a.detail.reason&&(o=a.detail.reason,i=!0)}catch(c){}var u=!n._config.reportUnhandledPromiseRejectionsAsHandled,s=n.Event.create(o,!1,{severity:"error",unhandled:u,severityReason:{type:"unhandledPromiseRejection"}},"unhandledrejection handler",1,n._logger);i&&L(s.errors[0].stacktrace,$r(o)),n._notify(s,function(c){if(se(c.originalError)&&!c.originalError.stack){var f;c.addMetadata("unhandledRejection handler",(f={},f[Object.prototype.toString.call(c.originalError)]={name:c.originalError.name,message:c.originalError.message,code:c.originalError.code},f))}})};"addEventListener"in e?e.addEventListener("unhandledrejection",r):e.onunhandledrejection=function(a,o){r({detail:{reason:a,promise:o}})},wr=r}}};return t},$r=function(e){return function(t){t.file!==e.toString()&&t.method&&(t.method=t.method.replace(/^\s+/,""))}},z={},Br="Bugsnag JavaScript",Lr="8.2.0",kr="https://github.com/bugsnag/bugsnag-js",Ar=M({},re.schema,Ot),$={_client:null,createClient:function(e){typeof e=="string"&&(e={apiKey:e}),e||(e={});var t=[cr,lr(),fr(),gr(),Pr,pr,vr,$e,Mr(),Nr(),gt(),yr(),Or(),ut,mr()],n=new Me(e,Ar,t,{name:Br,version:Lr,url:kr});return n._setDelivery(window.XDomainRequest?we:sr),n._logger.debug("Loaded!"),n.leaveBreadcrumb("Bugsnag loaded",{},"state"),n._config.autoTrackSessions?n.startSession():n},start:function(e){return $._client?($._client._logger.warn("Bugsnag.start() was called more than once. Ignoring."),$._client):($._client=$.createClient(e),$._client)},isStarted:function(){return $._client!=null}};return L(["resetEventCount"].concat(A(Me.prototype)),function(e){/^_/.test(e)||($[e]=function(){if($._client){$._client._depth+=1;var t=$._client[e].apply($._client,arguments);return $._client._depth-=1,t}})}),z=$,z.Client=Me,z.Event=be,z.Session=Pe,z.Breadcrumb=ve,z.default=$,z})});F();I();D();j();H();U();V();K();q();F();I();D();j();H();U();V();K();q();F();I();D();j();H();U();V();K();q();var te=Tr(yt()),Re=class{plugin;metadata={};customMetaData;constructor(l){this.plugin=l}configure(l){let{apiKey:y,buildVersion:P}=l;te.default.start({apiKey:y,appVersion:P,releaseStage:"production",autoDetectErrors:!0,autoTrackSessions:!0,enabledBreadcrumbTypes:["navigation","request","process","log","user","state","error","manual"],maxBreadcrumbs:100,onError:this.beforeSend$})}setUser(l){let{id:y,name:P}=l,O=y??void 0,w=P??void 0;te.default.setUser(O,void 0,w)}beforeSend$=l=>{let{originalError:y}=l;return this.plugin.isErrorIgnoredByCode(y)||this.plugin.isErrorIgnoredByMessage(y)?!1:(l.clearMetadata("global"),l.addMetadata("global",this.metadata),this.customMetaData&&(l.clearMetadata("custom"),l.addMetadata("custom",this.customMetaData)),!0)};sendException(l,y){y&&(this.customMetaData=y),te.default.notify(l)}setMetaData(l){this.metadata=l}addBreadcrumb(l){te.default.leaveBreadcrumb(l)}},bt=Re;_t();_t();var{Utils:{Valid:Te,Object:Q}}=Ludex,Fe=class extends Ludex.Plugins.BasePlugin{config;adapter;metadata={};feedbackPopup=null;filterErrors=null;configure(l){this.config=l,this.filterErrors={Codes:{Accepted:[],Ignored:[]},Messages:{Accepted:[],Ignored:[]}},this.adapter=this.getAdapterByService(),this.adapter.configure(this.config)}getAdapterByService(){switch(this.config.service){case"BugSnag":return new bt(this);case"Sentry":return new de;case"PostHog":return new de}}setUser(l){this.config.trackUser&&this.adapter?.setUser(l)}sendException(l,y){if(this.isErrorIgnoredByCode(l)||this.isErrorIgnoredByMessage(l))return;let P=this.metadata;y&&(P=Q.merge(P,y)),this.adapter?.sendException(l,P)}isErrorIgnoredByCode(l){if(!Q.hasOwn(l,"code"))return!1;let{code:y}=l;if(!Te.isString(y)||!this.filterErrors)return!1;let{Accepted:P,Ignored:O}=this.filterErrors.Codes;return P.indexOf(y)>-1?!1:O.indexOf(y)>-1}isErrorIgnoredByMessage(l){if(!Q.hasOwn(l,"message"))return!1;let{message:y}=l;if(!Te.isString(y)||!this.filterErrors)return!1;let{Accepted:P,Ignored:O}=this.filterErrors.Messages;return P.indexOf(y)>-1?!1:O.indexOf(y)>-1}addBreadcrumb(l){this.adapter?.addBreadcrumb(l)}addFilterErrors(l){this.filterErrors=Q.merge(this.filterErrors,l)}addMetadata(l){Te.isObject(l)&&(this.metadata=Q.merge(this.metadata,l),this.adapter?.setMetaData(this.metadata))}removeMetadata(l){Q.hasOwn(this.metadata,l)&&(this.metadata[l]=void 0,this.adapter?.setMetaData(this.metadata))}feedbackAsync=async l=>{try{if(!this.feedbackPopup)return;let y="";l&&(y="error"in l?l.error:l.reason),await new Promise((P,O)=>{this.feedbackPopup&&(this.feedbackPopup.onYes(this.handleOnYes(P,y)),this.feedbackPopup.onNo(this.handleOnNo(O)),this.feedbackPopup.onScreenshot(this.handleOnScreenshot()),this.feedbackPopup.show(y))})}catch(y){}};handleOnYes=(l,y)=>()=>{if(!this.feedbackPopup)return;let P=this.feedbackPopup.getFeedback()||"",O=this.feedbackPopup.getScreenshot();P&&this.sendException(new Error("User feedback"),{feedback:P,screenshot:O,error:y}),this.feedbackPopup.hide(),l()};handleOnNo=l=>()=>{this.feedbackPopup&&(this.feedbackPopup.hide(),l(new Error("User canceled feedback")))};handleOnScreenshot=()=>()=>{this.feedbackPopup&&this.getScreenshot().then(l=>{this.feedbackPopup&&this.feedbackPopup.setScreenshot(l)})};initFeedbackTrackErrors=async()=>{if(this.config.feedback)try{await this.loadFeedbackPopup()}catch(l){}};getScreenshot(){let l=document.getElementById("GameCanvas");return new Promise(y=>{requestAnimationFrame(()=>{y(l.toDataURL("image/jpeg",.4))})})}async loadFeedbackPopup(){if(!this.feedbackPopup)try{let l=(await import("./chunks-KJ4ZD52Y.js")).default;if(typeof l!="function")return;this.feedbackPopup=new l}catch(l){}}},St=Fe;var _n=St;export{_n as default};
