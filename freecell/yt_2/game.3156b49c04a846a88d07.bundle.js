(function(){var e={433:function(){HTMLCanvasElement.prototype.toBlob||Object.defineProperty(HTMLCanvasElement.prototype,"toBlob",{value:function(e,t,n){for(var i=atob(this.toDataURL(t,n).split(",")[1]),a=i.length,r=a>>2,s=new Uint8Array(a),o=new Uint32Array(s.buffer,0,r),c=0,u=0;c<r;c++)o[c]=i.charCodeAt(u++)|i.charCodeAt(u++)<<8|i.charCodeAt(u++)<<16|i.charCodeAt(u++)<<24;for(var l=3&a;l--;)s[u]=i.charCodeAt(u++);e(new Blob([s],{type:t||"image/png"}))}})},639:function(e,t,n){"use strict";n.d(t,{J:function(){return D},Z:function(){return N}});var i=n(631),a=n(56),r=n.n(a),s=n(2),o=n.n(s),c=n(20),u=n.n(c),l=n(1),h=n.n(l),d=n(641),f=n(185),p=n.n(f),g=function(e){return function(t){t.preventDefault();var n=document.getElementById("popup-add-shortcut");null==n||n.remove(),e()}},m=function(e){var t=document.createElement("div");return t.innerHTML=p()(e).call(e),t.firstChild},v=function(){var e=(0,i.Z)(h().mark((function e(t,n){var i,a,r;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=m('<div style="height: 50vh;width: 53vh;max-width: 95vw;position:absolute;background-color: rgba(31, 120, 136, 0.48);border-radius: 2vh;margin: auto;right: 0;left: 0;top: 0;bottom: 0;display: flex;flex-direction:column;justify-content:space-evenly;">\n            <p style="color:white;font-size:40px;text-align:center">Add shortcut for this game</p>\n            <p style="color:white;font-size:20px;text-align:center">This game wants to add a shortcut.</p>\n        </div>'),a=m('<button style="border: none;background-color: #1877f2;color: #fff;width: 90%;height: 50px;border-radius: 15px;margin-left: auto;margin-right: auto;font-size: 20px;cursor: pointer;">No</button>'),r=m('<button style="border: none;background-color: #1877f2;color: #fff;width: 90%;height: 50px;border-radius: 15px;margin-left: auto;margin-right: auto;font-size: 20px;cursor: pointer;">Yes</button>'),i&&a&&r||n({code:"CREATE_POPUP_ERROR",message:"Show popup failed"}),i.id="popup-add-shortcut",i.appendChild(a),i.appendChild(r),document.body.appendChild(i),a.addEventListener("click",g(n)),r.addEventListener("click",g(t));case 10:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),y=function(){function e(){this.isFirstCall=!0}var t=e.prototype;return t.canCreateShortcutAsync=function(){var e=(0,i.Z)(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isFirstCall){e.next=3;break}return this.isFirstCall=!1,e.abrupt("return",!0);case 3:return e.abrupt("return",!1);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),t.createShortcutAsync=function(){var e=(0,i.Z)(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new(o())((function(e,t){v(e,t)})));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),e}(),b=y,A=function(e){return function(t){t.preventDefault();var n=document.getElementById("popup-subscribe-bots");null==n||n.remove(),e()}},E=function(e){var t=document.createElement("div");return t.innerHTML=p()(e).call(e),t.firstChild},S=function(){var e=(0,i.Z)(h().mark((function e(t,n){var i,a,r;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=E('<div style="height: 50vh;width: 53vh;max-width: 95vw;position:absolute;background-color: rgba(31, 120, 136, 0.48);border-radius: 2vh;margin: auto;right: 0;left: 0;top: 0;bottom: 0;display: flex;flex-direction:column;justify-content:space-evenly;">\n            <p style="color:white;font-size:40px;text-align:center">Turn on messages from this game</p>\n            <p style="color:white;font-size:20px;text-align:center">This game wants to send messages, announcements and more.</p>\n        </div>'),a=E('<button style="border: none;background-color: #1877f2;color: #fff;width: 90%;height: 50px;border-radius: 15px;margin-left: auto;margin-right: auto;font-size: 20px;cursor: pointer;">Not Now</button>'),r=E('<button style="border: none;background-color: #1877f2;color: #fff;width: 90%;height: 50px;border-radius: 15px;margin-left: auto;margin-right: auto;font-size: 20px;cursor: pointer;">Turn On</button>'),i&&a&&r||n({code:"CREATE_POPUP_ERROR",message:"Show popup failed"}),i.id="popup-subscribe-bots",i.appendChild(a),i.appendChild(r),document.body.appendChild(i),a.addEventListener("click",A(n)),r.addEventListener("click",A(t));case 10:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),T=function(){function e(){this.isFirstCall=!0}var t=e.prototype;return t.canSubscribeBotAsync=function(){var e=(0,i.Z)(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isFirstCall){e.next=3;break}return this.isFirstCall=!1,e.abrupt("return",!0);case 3:return e.abrupt("return",!1);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),t.subscribeBotAsync=function(){var e=(0,i.Z)(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new(o())((function(e,t){S(e,t)})));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),e}(),C=T,w=n(644),I=n(640),x=n(642),P=n(646),k=GameCore.Configs,_=k.Notification,O=k.AddShortcut,R=k.SubscribeBot,L=_.GameTitle,D=(_.GameImage,function(){function e(){}var t=e.prototype;return t.createAsync=function(){var e=(0,i.Z)(h().mark((function e(t){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,GameSDK.tournament.createAsync(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t.shareAsync=function(){var e=(0,i.Z)(h().mark((function e(t){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,GameSDK.tournament.shareAsync(t);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t.joinAsync=function(){var e=(0,i.Z)(h().mark((function e(t){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,GameSDK.tournament.joinAsync(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t.postScoreAsync=function(){var e=(0,i.Z)(h().mark((function e(t){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,GameSDK.tournament.postScoreAsync(t);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t.getTournamentsAsync=function(){var e=(0,i.Z)(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,GameSDK.tournament.getTournamentsAsync();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),e}()),B=function(){function e(e){var t=this;this.facebook=void 0,this.supportedAPIs=[],this.mockSubscribeBot=void 0,this.mockAddShortcut=void 0,this.isCalledSubscribeBot=!1,this.isCalledCreateShortcut=!1,this.isCanPlayerMatch=null,this.isCanSubscribeBot=null,this.isCanCreateShortcut=null,this.attemptToAddShortcut=(0,i.Z)(h().mark((function e(){var n,i,a,r,s,o;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.isCalledCreateShortcut){e.next=2;break}return e.abrupt("return",!1);case 2:if(e.prev=2,null===t.isCanCreateShortcut&&(O.UseMock?t.isCanCreateShortcut=!0:t.isCanCreateShortcut=t.isSupportedAPI("canCreateShortcutAsync")),t.isCanCreateShortcut){e.next=6;break}return e.abrupt("return",!1);case 6:return e.next=8,GameSDK.player.getDataAsync(["lastCallCreateShortcut"]);case 8:if(e.t0=e.sent,e.t0){e.next=11;break}e.t0={};case 11:if(n=e.t0,!(i=n.lastCallCreateShortcut||0)||!(0,I.Gm)(+i)){e.next=15;break}return e.abrupt("return",!1);case 15:if(!O.UseMock){e.next=21;break}return e.next=18,t.mockAddShortcut.canCreateShortcutAsync();case 18:e.t1=e.sent,e.next=24;break;case 21:return e.next=23,GameSDK.canCreateShortcutAsync();case 23:e.t1=e.sent;case 24:if(a=e.t1,r=Date.now(),GameSDK.player.setDataAsync({lastCallCreateShortcut:r}),!a){e.next=49;break}return s=d._.SHORTCUT_CREATE,o=d._.SHORTCUT_CREATE_POPUP,t.isCalledCreateShortcut=!0,window.game.analytics.event(o),e.prev=31,e.next=34,GameCore.Utils.Valid.isValueChangeAsync(window.__fbGameReady,!0);case 34:if(!O.UseMock){e.next=39;break}return e.next=37,t.mockAddShortcut.createShortcutAsync();case 37:e.next=41;break;case 39:return e.next=41,FBInstant.createShortcutAsync();case 41:return window.game.analytics.event(s,{success:!0}),e.abrupt("return",!0);case 45:return e.prev=45,e.t2=e.catch(31),window.game.analytics.event(s,{success:!1}),e.abrupt("return",!1);case 49:return e.abrupt("return",!1);case 52:return e.prev=52,e.t3=e.catch(2),e.abrupt("return",!1);case 55:case"end":return e.stop()}}),e,null,[[2,52],[31,45]])}))),this.attemptToSubscribeBot=(0,i.Z)(h().mark((function e(){var n,i,a,r,s;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.isCalledSubscribeBot){e.next=2;break}return e.abrupt("return",!1);case 2:if(e.prev=2,null===t.isCanSubscribeBot&&(R.UseMock?t.isCanSubscribeBot=!0:t.isCanSubscribeBot=t.isSupportedAPI("player.canSubscribeBotAsync")),t.isCanSubscribeBot){e.next=6;break}return e.abrupt("return",!1);case 6:if(!R.UseMock){e.next=12;break}return e.next=9,t.mockSubscribeBot.canSubscribeBotAsync();case 9:e.t0=e.sent,e.next=15;break;case 12:return e.next=14,GameSDK.player.canSubscribeBotAsync();case 14:e.t0=e.sent;case 15:if(!e.t0){e.next=49;break}return e.next=19,GameSDK.player.getDataAsync(["lastCallSubscribeBot"]);case 19:if(e.t1=e.sent,e.t1){e.next=22;break}e.t1={};case 22:if(n=e.t1,!(i=n.lastCallSubscribeBot)||!(0,I.Gm)(+i)){e.next=26;break}return e.abrupt("return",!1);case 26:return a=Date.now(),GameSDK.player.setDataAsync({lastCallSubscribeBot:a}),r=d._.BOT_SUBSCRIBE,s=d._.BOT_SUBSCRIBE_POPUP,t.isCalledSubscribeBot=!0,window.game.analytics.event(s),e.prev=31,e.next=34,GameCore.Utils.Valid.isValueChangeAsync(window.__fbGameReady,!0);case 34:if(!R.UseMock){e.next=39;break}return e.next=37,t.mockSubscribeBot.subscribeBotAsync();case 37:e.next=41;break;case 39:return e.next=41,GameSDK.player.subscribeBotAsync();case 41:return window.game.analytics.event(r,{success:!0}),e.abrupt("return",!0);case 45:return e.prev=45,e.t2=e.catch(31),window.game.analytics.event(r,{success:!1}),e.abrupt("return",!1);case 49:return e.abrupt("return",!1);case 52:return e.prev=52,e.t3=e.catch(2),e.abrupt("return",!1);case 55:case"end":return e.stop()}}),e,null,[[2,52],[31,45]])}))),this.matchPlayerAsync=function(){var e=(0,i.Z)(h().mark((function e(n,i,a){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,null===t.isCanPlayerMatch&&(t.isCanPlayerMatch=t.isSupportedAPI("checkCanPlayerMatchAsync")),t.isCanPlayerMatch){e.next=4;break}return e.abrupt("return",!1);case 4:return e.next=6,GameSDK.checkCanPlayerMatchAsync();case 6:if(e.sent){e.next=9;break}return e.abrupt("return",!1);case 9:return e.next=11,GameSDK.matchPlayerAsync(n,i,a);case 11:return e.abrupt("return",!0);case 14:return e.prev=14,e.t0=e.catch(0),e.abrupt("return",!1);case 17:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(t,n,i){return e.apply(this,arguments)}}(),this.getTournamentAsync=(0,i.Z)(h().mark((function e(){var n,i,a;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.facebook.tournament.getTournamentsAsync();case 2:if(n=e.sent,i=GameSDK.context.getID(),!(a=r()(n).call(n,(function(e){return e.getContextID()===i})))){e.next=7;break}return e.abrupt("return",o().resolve(a));case 7:return e.abrupt("return",o().reject(new x.Z(null)));case 8:case"end":return e.stop()}}),e)}))),this.requestTournamentAsync=function(){var e=(0,i.Z)(h().mark((function e(n){var i;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.facebook.getTournamentAsync();case 3:return e.next=5,t.facebook.tournament.shareAsync({score:n});case 5:e.next=12;break;case 7:return e.prev=7,e.t0=e.catch(0),i=GameSDK.player.getName(),e.next=12,t.facebook.tournament.createAsync({initialScore:n,config:{tournamentTitle:i+"'s Tournament"}});case 12:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),this.isSupportedAPI=function(e){var n;return 0===t.supportedAPIs.length&&(t.supportedAPIs=GameSDK.getSupportedAPIs()),u()(n=t.supportedAPIs).call(n,e)},this.facebook=e,this.mockSubscribeBot=new C,this.mockAddShortcut=new b}var t=e.prototype;return t.switchAsync=function(){var e=(0,i.Z)(h().mark((function e(t){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,GameCore.Utils.Valid.isValueChangeAsync(window.__fbGameReady,!0);case 2:return e.next=4,GameSDK.context.switchAsync(t);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t.chooseAsync=function(){var e=(0,i.Z)(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,GameCore.Utils.Valid.isValueChangeAsync(window.__fbGameReady,!0);case 3:return e.next=5,GameSDK.context.chooseAsync({filters:["INCLUDE_EXISTING_CHALLENGES"],minSize:2,maxSize:2});case 5:case 15:return e.abrupt("return",GameSDK.context.getID());case 8:if(e.prev=8,e.t0=e.catch(0),!(e.t0 instanceof Object&&GameCore.Utils.Object.hasOwn(e.t0,"code"))){e.next=16;break}e.t1=e.t0.code,e.next="USER_INPUT"===e.t1?14:"SAME_CONTEXT"===e.t1?15:16;break;case 14:return e.abrupt("return",!1);case 16:return e.abrupt("return",null);case 17:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}(),t.createAsync=function(){var e=(0,i.Z)(h().mark((function e(t){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,GameCore.Utils.Valid.isValueChangeAsync(window.__fbGameReady,!0);case 3:return e.next=5,GameSDK.context.createAsync(""+t);case 5:case 15:return e.abrupt("return",GameSDK.context.getID());case 8:if(e.prev=8,e.t0=e.catch(0),!(e.t0 instanceof Object&&GameCore.Utils.Object.hasOwn(e.t0,"code"))){e.next=16;break}e.t1=e.t0.code,e.next="USER_INPUT"===e.t1?14:"SAME_CONTEXT"===e.t1?15:16;break;case 14:return e.abrupt("return",!1);case 16:return e.abrupt("return",null);case 17:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),t.getPlayerToken=function(){var e=(0,i.Z)(h().mark((function e(){var t;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,GameSDK.player.getSignedPlayerInfoAsync();case 2:return t=e.sent,e.abrupt("return",t.getSignature());case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),t.getContextPlayers=function(){var e=(0,i.Z)(h().mark((function e(t){var n,i;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,GameSDK.context.getPlayersAsync();case 3:return n=e.sent,i=[],n.forEach((function(e){var n=e.getID();if(n!==t){var a=e.getName();if(a){var r=e.getPhoto();i.push(new w.Z(n,a,r).toObject())}}})),e.abrupt("return",GameCore.Utils.Array.unique(i));case 9:return e.prev=9,e.t0=e.catch(0),e.abrupt("return",[]);case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}(),t.shareAsync=function(){var e=(0,i.Z)(h().mark((function e(t){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,GameSDK.shareAsync(t);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t.sendMessage=function(){var e=(0,i.Z)(h().mark((function e(t){var n,i,a,r,s,o;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.data,i=t.image,a=t.template,r=t.cta,s=t.text,o={data:n,image:i,action:"CUSTOM",template:a,cta:r,text:s,strategy:"IMMEDIATE",notification:"PUSH"},e.next=4,GameSDK.updateAsync(o);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t.inviteAsync=function(){var e=(0,i.Z)(h().mark((function e(t){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,GameSDK.inviteAsync(t);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t.postSessionScoreAsync=function(){var e=(0,i.Z)(h().mark((function e(t){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,GameSDK.postSessionScoreAsync(t);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t.getRewardedVideoAsync=function(){var e=(0,i.Z)(h().mark((function e(t){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,GameSDK.getRewardedVideoAsync(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t.getInterstitialAdAsync=function(){var e=(0,i.Z)(h().mark((function e(t){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,GameSDK.getInterstitialAdAsync(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t.getContextID=function(){return GameSDK.context.getID()},t.setLoadingProgress=function(e){GameSDK.setLoadingProgress(e)},t.getLocale=function(){return GameSDK.getLocale()||"en"},t.injectTournament=function(){var e=(0,i.Z)(h().mark((function e(){var t,i;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!GameCore.Configs.Tournament.UseMock){e.next=11;break}return e.next=4,n.e(302).then(n.bind(n,618));case 4:t=e.sent.default,i=new t,this.facebook.tournament=i,GameSDK.getTournamentAsync=this.getTournamentAsync,GameSDK.tournament=i,e.next=12;break;case 11:this.facebook.tournament=new D;case 12:this.facebook.getTournamentAsync=function(){return FBInstant.getTournamentAsync()},this.facebook.requestTournamentAsync=this.requestTournamentAsync;case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),t.sendNotificationAsync=function(){var e=(0,i.Z)(h().mark((function e(t){var n,i,a;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=t.message,i=t.delayTime,a=t.type,e.next=5,FBInstant.scheduleNotificationAsync({title:L,minDelayInSeconds:i,description:n,type:null!=a?a:P.Z.GENERIC_NOTIFICATION});case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),e}(),N=B},434:function(e,t,n){"use strict";var i=n(28),a=n.n(i),r=n(10),s=n.n(r),o=function(e,t){return void 0===t&&(t=1),a()({length:Math.ceil(e.length/t)},(function(n,i){return s()(e).call(e,i*t,i*t+t)}))},c=n(21),u=n.n(c),l=n(20),h=n.n(l),d=function(e,t){return u()(e).call(e,(function(e){return!h()(t).call(t,e)}))},f=function(e){for(var t=e.length-1;t>0;t--){var n=Math.floor(Math.random()*(t+1)),i=[e[n],e[t]];e[t]=i[0],e[n]=i[1]}},p=n(19),g=n.n(p),m=function(e,t,n){return g()(n).call(n,e)===t&&null!==e&&void 0!==e},v=function(e){return u()(e).call(e,m)},y={chunk:o,difference:d,shuffle:f,unique:v},b=n(36),A=n.n(b),E=n(256),S=n.n(E),T=S()((function(e,t){if("string"===typeof e){var n=t[e.toLowerCase()];if("string"===typeof n)return n}return"?"})),C=S()((function(e){for(var t=null,n=[],i=/:([A-Z0-9?]+)/gm;null!==(t=i.exec(e));)n.push(t[1]);return n})),w=S()((function(e){for(var t=null,n=[],i=/([0-9]+[A-Z?]{1}|[A-Z?]{1})/gm;null!==(t=i.exec(e));){var a=t[0];if(a.length>=2){var r,o=a.length,c=s()(a).call(a,0,o-1),u=a[o-1],l=A()(r=new Array(+c)).call(r,u);n.push.apply(n,l)}else n.push(a)}return n})),I=function(e,t){var n=e,i=GameCore.Utils.Object.invert(t),a={},r=0,s=0;return C(n).forEach((function(e){r=0,s++,a[s]||(a[s]={}),w(e).forEach((function(e){r++,a[s][r]=T(e,i)}))})),a},x=S()((function(e,t){var n=t[e];return"string"===typeof n?""+n.toUpperCase():"?"})),P=function e(t,n,i){void 0===i&&(i=!1);var a="";if(!GameCore.Utils.Valid.isObject(t))return a;var r="",o=1;for(var c in t)if(GameCore.Utils.Object.hasOwn(t,c)){var u=t[c];if(GameCore.Utils.Valid.isObject(u))a+=":"+e(u,n,!0);else if(GameCore.Utils.Valid.isString(u)){var l=x(u,n);l===r?(o++,a=s()(a).call(a,0,-2)):o=1,a+=""+o+l,r=l}}return a=a.replace(/1([A-Z])/g,"$1")},k=function(e){try{return atob(e)}catch(t){return""}},_={decodeMap:I,encodeMap:P,hashToString:k,stringToHash:function(e){try{return btoa(e)}catch(t){return""}}},O=function(e){try{return JSON.parse(e)}catch(t){return null}},R=n(31),L=n.n(R),D=function(e){try{return L()(e,null,0)}catch(t){return""}},B=function(e){return O(D(e))},N={clone:B,decode:O,encode:D},M=function(e){var t="object"===typeof e||"function"===typeof e,n=Array.isArray(e);return null!==e&&t&&!n},G=function(e){return void 0===e||null===e},F=function e(t){if(!M(t))return t;for(var n in t){G(t[n])&&delete t[n];var i=t[n];M(i)&&(t[n]=e(i))}return t},Z=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},U=n(29),H=n.n(U),W=function(e){var t={};return H()(e).forEach((function(n){if(Z(e,n)){var i=e[n];"string"===typeof i&&(t[i]=n)}})),t},z=function(e,t){if(!Array.isArray(e))return{};var n={};return e.forEach((function(e){if(Z(e,t)){var i=e[t];"string"===typeof i&&(n[i]=e)}})),n},Y=n(161),V=n.n(Y),K=Object,j=function(e,t){if("assign"in K)return V()(e,t);var n=e;for(var i in t)n[i]=t[i];return n},X=function e(t,n){for(var i in n){var a;if(M(t[i])&&M(n[i]))e(t[i],n[i]);else j(t,((a={})[i]=n[i],a))}return t},J={clear:F,hasOwn:Z,invert:W,keyBy:z,merge:X,assign:j},q=function(e){return e?e[0].toUpperCase()+s()(e).call(e,1):e},Q=function(e){var t=0;if(0==e.length)return t;for(var n=0;n<e.length;n++){t=(t<<5)-t+e.charCodeAt(n),t&=t}return t},$=n(84),ee=n.n($),te=function(e){var t;return ee()(t=H()(e)).call(t,(function(t,n){var i=e[n];return void 0!==i&&t.push(n+"="+i),t}),[]).join("&")},ne=function(e){void 0===e&&(e="0x");for(var t=e,n=0;n<6;n++)t+="0123456789ABCDEF"[Math.floor(16*Math.random())];return t},ie=n(629),ae=function(e){return e.normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/[\u0111\u0110]/g,(function(e){return"\u0111"===e?"d":"D"}))},re=n(3),se=n.n(re),oe=n(457),ce=n.n(oe),ue=function(e,t){var n,i=e.split(" "),a=(i.length<=1?se()(n=[]).call(n,i):[i[0],i.pop()]).join(" "),r=ce()(a).call(a," ")||0,s=r>=0?r:t;return(a.length>t?a.substring(0,s):a).substring(0,t)},le=n(162),he=n.n(le),de=function(e){void 0===e&&(e=16);var t=function(t){return Math.floor(t).toString(e)};return t(Date.now()/1e3)+he()(" ").call(" ",e).replace(/./g,(function(){return t(Math.random()*e)}))},fe=n(630),pe=n(625);var ge=function(e){for(var t=0,n=0;n<e.length;n++){t=(t<<5)-t+e.charCodeAt(n),t|=0}return t=Math.abs(t)},me=["James","Mary","John","Patricia","Robert","Jennifer","Michael","Linda","William","Elizabeth","David","Susan","Richard","Jessica","Joseph","Sarah","Thomas","Karen","Charles","Nancy","Christopher","Lisa","Daniel","Margaret","Matthew","Betty","Anthony","Sandra","Mark","Ashley","Donald","Dorothy","Steven","Kimberly","Paul","Emily","Andrew","Donna","Joshua","Michelle","Kenneth","Carol","Kevin","Amanda","Brian","Melissa","George","Deborah"],ve=["Smith","Johnson","Williams","Jones","Brown","Davis","Miller","Wilson","Moore","Taylor","Anderson","Thomas","Jackson","White","Harris","Martin","Thompson","Garcia","Martinez","Robinson","Clark","Rodriguez","Lewis","Lee","Walker","Hall","Allen","Young","Hernandez","King","Wright","Lopez","Hill","Scott","Green","Adams","Baker","Gonzalez","Nelson","Carter","Mitchell","Perez","Roberts","Turner","Phillips","Campbell","Parker","Evans"],ye={capitalize:q,hashCode:Q,params:te,toCamelCase:function(e){var t=e.replace(/[-_\s.]+(.)?/g,(function(e,t){return t?t.toUpperCase():""}));return t.substr(0,1).toLowerCase()+t.substr(1)},toUpperCamelCase:function(e){var t=e.replace(/[-_\s.]+(.)?/g,(function(e,t){return t?t.toUpperCase():""}));return t.substr(0,1).toUpperCase()+t.substr(1)},randomColor:ne,random:ie.Z,removeDiacritics:ae,getShortName:ue,generateObjectId:de,replaceVariables:fe.Z,generateName:pe.Z,generateNameUsingString:function(e){var t=ge(e),n=t%me.length,i=(t>>8)%ve.length,a=(t>>16)%1e4;return""+me[n]+ve[i]+a}},be=function(e){return"boolean"===typeof e},Ae=function(){return!1},Ee=function(e){return"function"===typeof e},Se=function(e){return"number"===typeof e},Te=function(e){var t;return g()(t=["string","number","symbol"]).call(t,typeof e)>-1},Ce=function(e){return"string"===typeof e},we=n(2),Ie=n.n(we),xe=function(e,t,n){var i=n||{},a=i.timeout,r=void 0===a?1e3:a,s=i.checkInterval,o=void 0===s?100:s;return new(Ie())((function(n){var i=setInterval((function(){("function"===typeof e?e():e)===("function"===typeof t?t():t)&&(clearInterval(i),n(!0))}),o);r>0&&setTimeout((function(){clearInterval(i),n(!1)}),r)}))},Pe={isBoolean:be,isDebugger:Ae,isFunction:Ee,isNumber:Se,isObject:M,isPropertyKey:Te,isString:Ce,isValueChangeAsync:xe},ke=function(e){var t=e.scene,n=e.key,i=e.newKey,a=t.textures.get(n).getSourceImage();if(!a)return!1;var r=Math.min(a.width,a.height);i||t.textures.removeKey(n);var s=t.textures.createCanvas(i||n,r,r),o=s.context;return o.beginPath(),o.arc(r/2,r/2,r/2,0,2*Math.PI,!1),o.clip(),s.draw((a.width-r)/2,(a.height-r)/2,a),!0},_e=function(e){var t=e.scene,n=e.key,i=e.newKey,a=e.radius,r=e.width,s=e.height,o=t.textures.get(n).getSourceImage();if(!o)return!1;r||(r=o.width),s||(s=o.height),i||t.textures.removeKey(n);var c=t.textures.createCanvas(i||n,r,s),u=c.context,l=Math.min(r,s)/100*a/2;return u.beginPath(),u.moveTo(0+l,0),u.lineTo(0+r-l,0),u.quadraticCurveTo(0+r,0,0+r,0+l),u.lineTo(0+r,0+s-l),u.quadraticCurveTo(0+r,0+s,0+r-l,0+s),u.lineTo(0+l,0+s),u.quadraticCurveTo(0,0+s,0,0+s-l),u.lineTo(0,0+l),u.quadraticCurveTo(0,0,0+l,0),u.closePath(),u.clip(),c.draw(0,0,o),!0},Oe=function(){return GameCore.Utils.Device.isDesktop()||GameCore.Utils.Device.pixelRatio()>1?2:1},Re=function(e,t){var n=e.split(","),i=n[0].match(/:(.*?);/);if(!i)return null;for(var a=i[1],r=atob(n[n.length-1]),s=r.length,o=new Uint8Array(s);s--;)o[s]=r.charCodeAt(s);return new File([o],t,{type:a})},Le=n(173),De=n.n(Le),Be=new Image,Ne=function(e,t){return void 0===t&&(t=!0),new(Ie())((function(n){t&&(Be=new Image),Be.onload=function(){n(Be)},Be.onerror=function(){n(null)},Be.src=De().createObjectURL(e)}))},Me=n(631),Ge=n(1),Fe=n.n(Ge),Ze=function(){var e=(0,Me.Z)(Fe().mark((function e(t,n){var i;return Fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t).then((function(e){return e.blob()})).catch((function(){return null}));case 2:if(i=e.sent){e.next=5;break}return e.abrupt("return",null);case 5:return e.abrupt("return",new File([i],n));case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),Ue=function(e){if(g()(e).call(e,".")<0)return e;for(var t=e.length-1;t>=0;t--){if("."==e[t])return e.substring(0,t);if("0"!=e[t])return e.substring(0,t+1)}return e},He=function(e,t){var n=t||{},i=n.fractionalDigits,a=void 0===i?0:i,r=n.startAbbreviate,s=void 0===r?1e3:r,o=n.abbreviateStep,c=void 0===o?3:o,u=n.maxLength,l=void 0===u?-1:u,h=n.removeLastZero,d=void 0===h||h,f=n.suffixes,p=void 0===f?["","k","m","b","t","q"]:f,g=-1===l?99999999:l;if(e>=s){var m=Math.floor(e/Math.pow(10,c)),v=Math.floor((m.toString().length-1)/c)+1,y=(e/Math.pow(Math.pow(10,c),v)).toFixed(a),b=g-p[v].length,A=y.substring(0,b);return(d?Ue(A):A)+p[v]}var E=e.toFixed(a),S=g-p[0].length,T=E.substring(0,S);return d?Ue(T):T+p[0]},We={Array:y,Hash:_,Json:N,Object:J,String:ye,Valid:Pe,Image:{drawCircle:ke,drawBorder:_e,getImageScale:Oe,base64ToFile:Re,blobToHtmlImage:Ne,blobUrlToFile:Ze},Number:{toAbbreviatedString:He,padStart:function(e,t,n){void 0===n&&(n="0");for(var i=e.toString(),a=i.length,r=0;r<t-a;r++)i=n+i;return i},padEnd:function(e,t,n){void 0===n&&(n="0");for(var i=e.toString(),a=i.length,r=0;r<t-a;r++)i+=n;return i},random:function(e,t){var n=t?Math.random()>.5?1:-1:1;return Math.floor(Math.random()*e)*n}},Device:{isDesktop:function(){return!/Android|iPhone|iPad|iPod/i.test(navigator.userAgent)},isMobile:function(){return/Android|iPhone|iPad|iPod/i.test(navigator.userAgent)},isAndroid:function(){return window.__fbPlatform?"ANDROID"===window.__fbPlatform:/Android/i.test(navigator.userAgent)},isIOS:function(){return window.__fbPlatform?"IOS"===window.__fbPlatform:/iPhone|iPad|iPod/i.test(navigator.userAgent)},isMobileWeb:function(){return window.__fbPlatform?"MOBILE_WEB"===window.__fbPlatform:/mobile/i.test(navigator.userAgent)},pixelRatio:function(){return Math.round(window.devicePixelRatio)||1}},Time:{isToday:function(e){var t=new Date(e),n=new Date;return t.getDate()===n.getDate()&&t.getMonth()===n.getMonth()&&t.getFullYear()===n.getFullYear()},sleepAsync:function(e){return new(Ie())((function(t){return setTimeout(t,e)}))}}},ze=n(628),Ye=n(624),Ve={ENV:"production",ApiHost:"https://fbig-singleplay-apps.citigo.site",OtherHost:"https://fbig-leaderboards.citigo.site",AppId:"9nvz7cjd197g",Notification:{Enable:!1},LeadersBoard:{Prefix:"leaderboards"},Debugger:{ShowConsole:!1,ShowInspector:!1,ShowMonitoring:!1},Statistics:{Enable:!1,ShowFPSInGame:!1,ShowMemoryInGame:!1},Rollbar:{Enable:!1}},Ke={ENV:"production",ApiHost:"https://fbig-singleplay-apps.citigo.site",OtherHost:"https://fbig-leaderboards.citigo.site",AppId:"freecell-solitaire",Notification:{Enable:!1},LeadersBoard:{Prefix:"leaderboards"},Debugger:{ShowConsole:!1,ShowInspector:!1,ShowMonitoring:!1},Statistics:{Enable:!1,ShowFPSInGame:!1,ShowMemoryInGame:!1},Rollbar:{Enable:!1},Analytics:{GoogleAnalytics:null,FacebookAnalytics:null}},je={ENV:"development",AppId:"",ApiHost:"https://fbig-singleplay-apps-dev.sunstudio.io",OtherHost:"https://leaderboards-dev.sunstudio.io",SyncProfileFromAPI:!0,Notification:{Enable:!0,DisableSendNotification:!1,ApiUrl:"https://notifications.sunstudio.io",GameTitle:"FreeCell - Classic Solitaire",GameImage:"https://sunstudio.io/images/logo.png",DailyNotificationMessages:{MONDAY:"Welcome back to FreeCell - Classic Solitaire! Start your week with a surprise and claim your daily reward now! \ud83c\udf1f",TUESDAY:"Ready for your next FreeCell challenge? Jump in and sharpen your Solitaire skills today! \ud83d\ude80",WEDNESDAY:"A mystery gift is waiting in the game! Log in to claim your exclusive FreeCell reward. \ud83c\udf81",THURSDAY:"Can you conquer today\u2019s FreeCell challenge? Show off your strategy and earn unique rewards! \ud83c\udfaf",FRIDAY:"Feeling lucky? Your daily spin is ready! Log in for a chance to win big in FreeCell - Classic Solitaire! \ud83c\udfa1",SATURDAY:"A special event is happening today! Join the FreeCell fun and unlock exclusive content. \u2728",SUNDAY:"We\u2019d love to hear your thoughts! Log in, share your feedback, and claim a reward for helping improve FreeCell - Classic Solitaire! \ud83c\udf08"}},AddShortcut:{UseMock:!1},SubscribeBot:{UseMock:!1},PlayerMock:{id:"",signature:""},OpponentMock:{id:"",signature:""},MatchMockFailRate:5,Gameplay:{StartLevel:1,StartScore:0,StartDiamonds:0,DefaultDiamondsForNewUser:300,LevelDifficultRate:{FromUnder30:1.07,FromUnder35:1.05,FromUnder45:1.05,FromUnder200:1.1},StartAdAtLevel:2,GiftTime:10800,AwardDiamonds:100,FreeItems:!1,DelayStart:2e3,DelayLevelUp:1800,DelayFinishGame:2900,EnableVibrate:!0,SkipStartAnimation:!1,SkipAnimationMove:!1,EditMode:!1},Tutorial:{ForceUseTutorial:!1,NumberOfTutorial:{FirstMove:3,TargetScore:1,CurrentScore:1,ColorfulGem:1,ItemPaint:1,ItemHammer:1,ItemShuffle:1}},PlayerDataStore:"playerData",Game:{AutoResize:!0,PortraitRatio:375/667,PortraitWidth:375,PortraitHeight:667,LandscapeRatio:600/700,LandscapeWidth:600,LandscapeHeight:700,ForcePixelRatio:0,DisableLandscape:!1,FullSizeOnLandscape:!1},Debugger:{ShowInspector:!1,ShowMonitoring:!1,ShowConsole:!1,Expanded:!0,AutoRefresh:!0,InspectorAutoUpdate:!0,ShowBoxBitmapText:!1,Opacity:.8,ListPlayerDevIds:[]},Statistics:{Enable:!1,DisplayMode:0,FPS:!0,MS:!0,MB:!0,Opacity:.8,ShowFPSInGame:!0,ShowMemoryInGame:!1},ParticleEditor:{Enable:!1,Opacity:.8,Expanded:!0},ProfilerPlugin:{Enable:!1},CanvasRecorder:{Enable:!1,Options:{Type:"png",Quality:.85,RecordFps:60,SyncFps:!0}},Match:{MaxRescueCount:1,RescueGamePopupTimeout:15,ContinueSingleMatchEnabled:!0,SingleMatchStore:"singleMatch",LocalSingleMatchDefault:{_id:"12345678890",status:"open",playerId:"",score:0,level:1,startedAt:0,updateAt:0,finishAt:0,data:{}}},DailyRewards:{MaxDays:6,MockTime:0,CheckInterrupt:!0},DailyTasks:{Duration:86400},Tournament:{UseMock:!1,ForcePlay:!1,UseLeaderboard:!1,TournamentContextIds:[],YourMockTournamentCount:1},LeadersBoard:{Name:null,UseMock:!1,Prefix:"leaderboards",LeaderboardId:"5fbb6bee3f2485dac9b1dfa3",Limit:50,MockOptions:{PlayerEntryIndex:-1}},LanguageSupport:{en:"en"},EnableEffectSceneTransition:!0,DefaultTheme:"default",ThemeSupport:{default:"default"},Ads:{Enabled:!0,AdService:"msgames",FallbackService:"none",AdServiceConfigs:{Google:{DataAdClient:"ca-pub-2993382360222769",DataAdFrequencyHint:30,DataAdBreakTest:!1,DataAdChannel:"4832215427",MaxScriptLoadRetryCount:3}},CalculateSafeAreaBottom:!0,EnableRewardVideoResetInterstitial:!1,Mockup:{Enable:!1,ErrorRate:5,GiphyApiKey:""},InterstitialAdOptions:{pID:"",showWhenStartGame:!1,secondsFirstTime:30,secondsBetweenAds:30},RewardAdOptions:{pID:"",secondsFirstTime:0,secondsBetweenAds:0},BannerAdOptions:[{placementId:"123",position:"bottom",bannerWidth:320,bannerHeight:50,platform:"MOBILE",secondsReload:60},{placementId:"456",position:"right",bannerWidth:160,bannerHeight:600,platform:"DESKTOP",secondsReload:60}]},Network:{MaximumRequest:6,Timeout:15e3,Retries:3},Analytics:{GoogleAnalytics:{consoleLog:!1},FacebookAnalytics:{prefix:"fba",consoleLog:!1}},Sentry:{errorCodes:{accepted:[],ignored:["USER_INPUT","NETWORK_FAILURE"]},errorMessages:{accepted:[],ignored:["Load image failed","Script error."]}},Rollbar:{Enable:!1,UseMockup:!1,FilterError:{Codes:{accepted:[],ignored:["USER_INPUT","NETWORK_FAILURE"]},Messages:{accepted:[],ignored:["Load image failed","Request failed to be processed","Script error."]}}},Performance:{Enable:!1,trackingSceneKeys:["DASHBOARD_SCENE","GAME_SCENE"],minQuality:1,maxQuality:2,fpsThreshold:48,checkInterval:2e3,qualityAdjustStep:.1,autoUpgradeQuality:!0,onlyUpdateWhenSwitchScene:!0}};je=(0,Ye.TS)((0,ze.Z)({},je),Ke);var Xe=je=(0,Ye.TS)((0,ze.Z)({},je),Ve),Je=function(e){return function(t){try{var n=window.game,i=t.module;if(n.scene.getScenes(!0)[0].scene.key!==e)return;var a=i.default;n.scene.remove(e),n.scene.add(e,a,!0),n.scene.bringToTop(n.globalScene)}catch(s){var r;null==(r=void 0)||r.invalidate()}}},qe=n(526),Qe=n.n(qe),$e=n(528),et=n.n($e),tt=n(530),nt=n.n(tt),it=n(632),at=!1,rt=function e(t,n,i){n.forEach((function(n){if(n.name){var a=null;if(a=i?i.getByName(n.name):t.children.getByName(n.name)){if("Container"===n.type){var r=a,s=n.getAll();if(e(t,s,r),!r.hotContainer)return}var o=Qe()(n),c=["_events","_sysEvents","input","localTransform","list","displayList"],l=u()(o).call(o,(function(e){if("string"!==typeof e)return!1;if(g()(c).call(c,e)>=0)return!1;if(!a)return!1;var t=et()(n,e);return!(t instanceof Function)&&(!(t instanceof Phaser.Scene)&&(!(t instanceof Phaser.GameObjects.Group)&&(!(t instanceof Phaser.GameObjects.GameObject)&&t===et()(a,e))))}));l.length<1||l.forEach((function(e){if(a){var t=et()(n,e);et()(a,e),nt()(a,e,t)}}))}}}))},st={Configs:Xe,Utils:We,LiveUpdate:{Scene:Je,SceneObjects:function(e,t){return void 0===t&&(t=at),function(n){try{var i=window.game,a=n.module,r=i.scene.getScenes(!0)[0];if(r.scene.key!==e)return;at=t;var s=a.default,o=e+"-draft";i.scene.remove(o);var c=i.scene.add(o,s);r=i.scene.getScene(e),c.events.once(Phaser.Scenes.Events.RENDER,(0,it.D)((function(){var e=c.children.getAll();rt(r,e),i.scene.remove(o)})),50),i.scene.run(o),i.scene.bringToTop(r),i.scene.bringToTop(i.globalScene)}catch(u){}}}}};window.GameCore=st},606:function(e,t,n){"use strict";n.r(t);var i=n(631),a=n(633),r=n(20),s=n.n(r),o=n(116),c=n.n(o),u=n(1),l=n.n(u),h=n(641),d=n(664),f=GameCore.Utils.Object,p=GameCore.Ads,g=p.Types,m=p.Status,v="msgames",y=function(e){function t(t,n){var i;return(i=e.call(this,t)||this).instance=void 0,i.placementId=void 0,i.instanceLoadFailedQueue=void 0,i.isHasTooManyInstancesError=void 0,i.instance=null,i.placementId=n,i.instanceLoadFailedQueue=[],i.isHasTooManyInstancesError=!1,i}(0,a.Z)(t,e),t.setGame=function(e){self.game=e};var n=t.prototype;return n.loadAsync=function(){var e=(0,i.Z)(l().mark((function e(){var t,n,i;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.status===m.IDLE){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,this.status=m.LOADING,e.next=6,this.createInstanceByType(this.type);case 6:if(this.instance=e.sent,null!==this.instance){e.next=9;break}throw new GameCore.Ads.AdError("AD_INSTANCE_NOT_INITIATED","Ad instance didn't initiated.");case 9:return e.next=11,this.instance.loadAsync();case 11:this.status=m.FILLED,t=this.getSceneName(),this.type===g.PRE_ROLL&&self.game.analytics.loadPreRollAd(t,v),this.type===g.INTERSTITIAL&&self.game.analytics.loadInterstitialAd(t,v),this.type===g.REWARDED&&self.game.analytics.loadRewardedVideoAd(t,v),e.next=25;break;case 18:throw e.prev=18,e.t0=e.catch(2),this.status=m.IDLE,this.instance&&this.instanceLoadFailedQueue.push(this.instance),this.instance=null,this.isAdTypeValid(this.type)&&(n=this.getSceneName(),i={type:this.type,placement:n,adService:v},self.game.analytics.loadAdFail(i)),e.t0;case 25:case"end":return e.stop()}}),e,this,[[2,18]])})));return function(){return e.apply(this,arguments)}}(),n.showAsync=function(){var e=(0,i.Z)(l().mark((function e(){var t,n,i,a;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=!1,null,e.prev=2,this.status===m.FILLED){e.next=5;break}throw new GameCore.Ads.AdError("AD_NOT_FILLED","Ads no fill.");case 5:if(this.status=m.SHOWING,null!==this.instance){e.next=8;break}throw new GameCore.Ads.AdError("AD_INSTANCE_NOT_INITIATED","Ad instance didn't initiated.");case 8:return this.isHasTooManyInstancesError&&self.game.analytics.event(h._.MISSING_AD_SHOW,{ad_type:this.type}),e.next=11,this.instance.showAsync();case 11:t=!0,this.status=m.IDLE,this.instance=null,e.next=21;break;case 16:throw e.prev=16,e.t0=e.catch(2),e.t0 instanceof Object&&f.hasOwn(e.t0,"code")?("ADS_NOT_LOADED"===e.t0.code?this.status=m.FILLED:(this.status=m.IDLE,this.instance=null),"USER_INPUT"===e.t0.code&&(this.status=m.IDLE,this.instance=null,t=!0)):(this.status=m.IDLE,this.instance=null),e.t0,e.t0;case 21:return e.prev=21,window.focus(),n=this.getSceneName(),t?(this.type===g.PRE_ROLL&&self.game.analytics.showPreRollAd(n,v),this.type===g.INTERSTITIAL&&self.game.analytics.showInterstitialAd(n,v),this.type===g.REWARDED&&self.game.analytics.showRewardedVideoAd(n,v)):this.isAdTypeValid(this.type)&&(i=this.getSceneName(),a={type:this.type,placement:i,adService:v},self.game.analytics.showAdFail(a)),e.finish(21);case 26:case"end":return e.stop()}}),e,this,[[2,16,21,26]])})));return function(){return e.apply(this,arguments)}}(),n.getStatus=function(){return this.status},n.createInstanceByType=function(){var e=(0,i.Z)(l().mark((function e(t){var n;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=self.game.facebook,e.prev=1,e.t0=t,e.next=e.t0===g.REWARDED?5:e.t0===g.INTERSTITIAL||e.t0===g.PRE_ROLL?8:11;break;case 5:return e.next=7,n.getRewardedVideoAsync(this.placementId);case 7:case 10:return e.abrupt("return",e.sent);case 8:return e.next=10,n.getInterstitialAdAsync(this.placementId);case 11:case 20:return e.abrupt("return",null);case 12:e.next=21;break;case 14:if(e.prev=14,e.t1=e.catch(1),!(e.t1 instanceof Object&&f.hasOwn(e.t1,"code"))){e.next=20;break}if("ADS_TOO_MANY_INSTANCES"!==e.t1.code){e.next=20;break}return this.isHasTooManyInstancesError=!0,e.abrupt("return",this.instanceLoadFailedQueue.shift()||null);case 21:case"end":return e.stop()}}),e,this,[[1,14]])})));return function(t){return e.apply(this,arguments)}}(),n.getSceneName=function(){try{var e=self.game.globalScene;return e instanceof d.Z?e.getCurrentScene().scene.getSceneName():"unknown"}catch(t){return"unknown"}},n.isAdTypeValid=function(e){var t;return s()(t=c()(g)).call(t,e)},t}(GameCore.Ads.AdInstance);t.default=y},607:function(e,t,n){"use strict";n.r(t);var i,a=n(631),r=n(638),s=n(637),o=n(633),c=n(2),u=n.n(c),l=n(20),h=n.n(l),d=n(116),f=n.n(d),p=n(1),g=n.n(p),m=n(641),v=n(664),y=GameCore,b=y.Utils.Object,A=y.Ads,E=A.Types,S=A.Status,T="not-loaded",C="loading",w="loaded",I="google",x=function(e){function t(n,i){var a;return(a=e.call(this,n)||this).instance=void 0,a.instance=null,a.status=S.IDLE,window.setInterstitialPlacementType=t.setInterstitialPlacementType,window.setRewardedPlacementType=t.setRewardedPlacementType,window.setPreRollPlacementType=t.setPreRollPlacementType,t.childAdInstances.push((0,s.Z)(a)),t.isPreloadConfigReady&&(a.status=S.FILLED),a}(0,o.Z)(t,e),t.initGoogleAdsAsync=function(){var e=(0,a.Z)(g().mark((function e(n){return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("loaded"!==t.initStatus){e.next=3;break}return e.abrupt("return");case 3:t.initStatus=C,t.adsByGoogleConfig=n,t.loadScriptElementAsync(n);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t.configGoogleAdsOnInit=function(){var e=(0,a.Z)(g().mark((function e(){return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:window.adsbygoogle=window.adsbygoogle||[],window.adBreak=function(e){adsbygoogle.push(e)},window.adConfig=function(e){adsbygoogle.push(e)},t.initStatus=w,t.runPreloadAdConfig();case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),t.runPreloadAdConfig=function(){var e=(0,a.Z)(g().mark((function e(){return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preloadPromise=new(u())((function(e,n){window.adConfig({preloadAdBreaks:"on",onReady:function(){t.isPreloadConfigReady=!0,t.handlePostPreloadAdComplete(),e()}}),setTimeout((function(){t.isPreloadConfigReady||n(new Error("Failed to preload ad config in time."))}),1e4)})),e.abrupt("return",t.preloadPromise);case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),t.loadScriptElementAsync=function(e){return new(u())((function(n,i){!function a(r){var s=e.maxScriptLoadRetryCount,o=document.createElement("script");try{t.assignAdsByGoogleScriptProperties(o,e)}catch(u){t.initStatus=T,i(new Error("Invalid adConfig."))}if(o.onload=function(){t.configGoogleAdsOnInit(),n(!0)},o.onerror=function(){r<s?setTimeout((function(){a(r+1)}),12e4):(t.initStatus=T,i(new Error("Failed to load Google Ads script.")))},document.head.appendChild(o),!!!document.getElementById("adsByGoogleFunctionScript")){var c=document.createElement("script");c.text="window.adsbygoogle = window.adsbygoogle || []; var adBreak = adConfig = function(o) {adsbygoogle.push(o);}",c.id="adsByGoogleFunctionScript",document.head.appendChild(c)}}(0)}))},t.assignAdsByGoogleScriptProperties=function(e,t){var n=t.dataAdClient,i=t.dataAdHost,a=t.dataAdChannel,r=t.dataAdBreakTest,s=t.dataAdFrequencyHint;if(!n&&!i)throw new Error("dataAdClient or dataAdHost is required.");e.async=!0,e.setAttribute("data-ad-frequency-hint",s+"s"),n&&e.setAttribute("data-ad-client",n),a&&e.setAttribute("data-ad-channel",a),i&&e.setAttribute("data-ad-host",i),r&&e.setAttribute("data-adbreak-test","on");var o="";if(n||i){o="?";var c=[];n&&c.push("client="+n),i&&c.push("host="+i),o+=c.join("&")}e.src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"+o,e.crossOrigin="anonymous"};var n=t.prototype;return n.makeAdInstance=function(){var e=this;return{getPlacementID:function(){return""},loadAsync:function(){return e.preloadAdPlacement()},showAsync:function(){return e.createAdPlacement()}}},n.preloadAdPlacement=function(){return t.initStatus!==w?u().reject(new Error("Google Ads not initiated.")):t.isPreloadConfigReady?u().resolve():t.preloadPromise?t.preloadPromise:t.runPreloadAdConfig()},n.createAdPlacement=function(){switch(this.type){case E.PRE_ROLL:return this.createAdPlacementPreroll();case E.REWARDED:return this.createAdPlacementRewarded();case E.INTERSTITIAL:return this.createAdPlacementInterstitial();default:return u().reject(new GameCore.Ads.AdError("UNSUPPORTED_AD_TYPE","Unsupported."))}},n.createAdPlacementPreroll=function(){return new(u())((function(e,n){window.adBreak({type:t.preRollPlacementType,name:"prerollAd",adBreakDone:function(t){switch(t.breakStatus){case"dismissed":case"viewed":return void e();default:return void n(new GameCore.Ads.AdError(t.breakStatus,t.breakType))}}})}))},n.createAdPlacementInterstitial=function(){return new(u())((function(e,n){window.adBreak({type:t.interstitialPlacementType,name:"interstitialAd",beforeAd:function(){self.game.ads.hideBannerAdAsync()},adBreakDone:function(t){switch(self.game.ads.showBannerAdAsync(),t.breakStatus){case"dismissed":case"viewed":return void e();default:return void n(new GameCore.Ads.AdError(t.breakStatus,t.breakType))}}})}))},n.createAdPlacementRewarded=function(){return new(u())((function(e,n){window.adBreak({type:t.rewardedPlacementType,name:"rewardedAd",beforeReward:function(e){self.game.ads.hideBannerAdAsync(),e()},adViewed:function(){},adDismissed:function(){},adBreakDone:function(t){switch(self.game.ads.showBannerAdAsync(),t.breakStatus){case"dismissed":return void n(new GameCore.Ads.AdError("USER_INPUT","User dismissed."));case"viewed":return void e();default:return void n(new GameCore.Ads.AdError(t.breakStatus,t.breakType))}}})}))},t.setGame=function(e){self.game=e},n.getStatus=function(){return this.status},n.loadAsync=function(){var e=(0,a.Z)(g().mark((function e(){var n,i,a;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,t.isPreloadConfigReady&&null==this.instance){e.next=3;break}return e.abrupt("return");case 3:if(this.instance=this.makeAdInstance(),null!==this.instance){e.next=6;break}throw new GameCore.Ads.AdError("AD_INSTANCE_NOT_INITIATED","Ad instance didn't initiated.");case 6:return e.next=8,this.instance.loadAsync();case 8:n=this.getSceneName(),this.type===E.PRE_ROLL&&self.game.analytics.loadPreRollAd(n,I),this.type===E.INTERSTITIAL&&self.game.analytics.loadInterstitialAd(n,I),this.type===E.REWARDED&&self.game.analytics.loadRewardedVideoAd(n,I),e.next=18;break;case 14:throw e.prev=14,e.t0=e.catch(0),this.isAdTypeValid(this.type)&&(i=this.getSceneName(),a={type:this.type,placement:i,adService:I},self.game.analytics.loadAdFail(a)),e.t0;case 18:case"end":return e.stop()}}),e,this,[[0,14]])})));return function(){return e.apply(this,arguments)}}(),n.showAsync=function(){var e=(0,a.Z)(g().mark((function e(){var t,n,i,a;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=!1,e.prev=1,this.status===S.FILLED){e.next=4;break}throw new GameCore.Ads.AdError("AD_NOT_FILLED","Ads no fill.");case 4:if(this.status=S.SHOWING,null!==this.instance){e.next=8;break}return e.next=8,this.loadAsync();case 8:if(null!==this.instance){e.next=10;break}throw new GameCore.Ads.AdError("AD_INSTANCE_NOT_INITIATED","Ad instance didn't initiated.");case 10:return e.next=12,this.instance.showAsync();case 12:t=!0,this.handlePostShowAdStatus(),this.instance=null,e.next=27;break;case 17:if(e.prev=17,e.t0=e.catch(1),!(e.t0 instanceof Object&&b.hasOwn(e.t0,"code"))){e.next=24;break}if("noAdPreloaded"!==e.t0.code){e.next=22;break}return e.abrupt("return");case 22:"USER_INPUT"===e.t0.code&&(t=!0),"frequencyCapped"===e.t0.code&&self.game.analytics.event(m._.MISSING_AD_SHOW,{ad_type:this.type});case 24:throw this.handlePostShowAdStatus(),this.instance=null,e.t0;case 27:return e.prev=27,window.focus(),n=this.getSceneName(),t?(this.type===E.PRE_ROLL&&self.game.analytics.showPreRollAd(n,I),this.type===E.INTERSTITIAL&&self.game.analytics.showInterstitialAd(n,I),this.type===E.REWARDED&&self.game.analytics.showRewardedVideoAd(n,I)):this.isAdTypeValid(this.type)&&(i=this.getSceneName(),a={type:this.type,placement:i,adService:I},self.game.analytics.showAdFail(a)),e.finish(27);case 32:case"end":return e.stop()}}),e,this,[[1,17,27,32]])})));return function(){return e.apply(this,arguments)}}(),n.getSceneName=function(){try{var e=self.game.globalScene;return e instanceof v.Z?e.getCurrentScene().scene.getSceneName():"unknown"}catch(t){return"unknown"}},n.isAdTypeValid=function(e){var t;return h()(t=f()(E)).call(t,e)},n.handlePostShowAdStatus=function(){t.isPreloadConfigReady?this.status=S.FILLED:this.status=S.IDLE},t.handlePostPreloadAdComplete=function(){t.childAdInstances.forEach((function(e){e.status=S.FILLED}))},(0,r.Z)(t,null,[{key:"initStatus",get:function(){return t._initStatus},set:function(e){this._initStatus!==e&&(self.game.analytics.event(m._.AD_INIT,{adService:"adsense",state:e}),this._initStatus=e)}}]),t}(GameCore.Ads.AdInstance);i=x,x.childAdInstances=[],x._initStatus=T,x.isPreloadConfigReady=!1,x.adsByGoogleConfig=void 0,x.preloadPromise=void 0,x.preRollPlacementType="preroll",x.interstitialPlacementType="next",x.rewardedPlacementType="reward",x.setInterstitialPlacementType=function(e){i.interstitialPlacementType=e},x.setRewardedPlacementType=function(e){i.rewardedPlacementType=e},x.setPreRollPlacementType=function(e){i.preRollPlacementType=e},t.default=x},653:function(e,t,n){"use strict";n.d(t,{U:function(){return E},v:function(){return S}});var i=n(628),a=n(631),r=n(1),s=n.n(r),o=n(31),c=n.n(o),u=n(633),l=n(643),h=function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).name="BadRequest",i.message=t||"This request is bad",i.payload=n,i}return(0,u.Z)(t,e),t}((0,l.Z)(Error)),d=function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).name="RequestTimeout",i.message=t||"This request is timeout",i.payload=n,i}return(0,u.Z)(t,e),t}((0,l.Z)(Error)),f=n(640),p=GameCore.Configs,g=p.AppId,m=p.Network,v=function(e){if(!e.ok)throw new h(null,{response:e})},y=function(){var e=window.game.auth.getToken();return{token:e,timeout:m.Timeout,headers:{Authorization:"Bearer "+e,"Content-Type":"application/json"}}},b=function(e,t,n,i){return(0,a.Z)(s().mark((function a(){var r,o,u,l,f;return s().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,r=e+"/apps/"+g+"/"+t,o=new AbortController,n.signal=o.signal,u=setTimeout((function(){o.abort()}),n.timeout),GameCore.Utils.Valid.isObject(i)&&(n.body=c()(i)),a.next=8,fetch(r,n);case 8:return l=a.sent,clearTimeout(u),v(l),a.next=13,l.json();case 13:if(a.t0=a.sent,a.t0){a.next=16;break}a.t0={};case 16:return f=a.t0,a.abrupt("return",f);case 20:if(a.prev=20,a.t1=a.catch(0),!(a.t1 instanceof h)){a.next=24;break}return a.abrupt("return",null);case 24:if(!(a.t1 instanceof Object&&GameCore.Utils.Object.hasOwn(a.t1,"name"))){a.next=27;break}if("AbortError"!==a.t1.name){a.next=27;break}throw new d(null);case 27:throw a.t1;case 28:case"end":return a.stop()}}),a,null,[[0,20]])})))},A=function(){var e=(0,a.Z)(s().mark((function e(t,n){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.abrupt("return",t());case 4:if(e.prev=4,e.t0=e.catch(0),!(e.t0 instanceof d&&n>0)){e.next=18;break}return e.prev=7,e.next=10,(0,f.qZ)(600);case 10:return e.next=12,A(t,n-1);case 12:return e.abrupt("return",e.sent);case 15:return e.prev=15,e.t1=e.catch(7),e.abrupt("return",{});case 18:if(!(e.t0 instanceof d)){e.next=20;break}return e.abrupt("return",{});case 20:return e.abrupt("return",{});case 22:case"end":return e.stop()}}),e,null,[[0,4],[7,15]])})));return function(t,n){return e.apply(this,arguments)}}(),E=function(){var e=(0,a.Z)(s().mark((function e(t,n,a,r){var o,c;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return void 0===n&&(n={}),void 0===r&&(r=m.Retries),e.prev=2,o=(0,i.Z)({},y(),n,{method:"GET"}),c=b(a,t,o),e.next=7,A(c,r);case 7:return e.abrupt("return",e.sent);case 10:return e.prev=10,e.t0=e.catch(2),e.abrupt("return",{});case 14:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(t,n,i,a){return e.apply(this,arguments)}}(),S=function(){var e=(0,a.Z)(s().mark((function e(t,n,a,r,o){var c,u;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return void 0===a&&(a={}),void 0===o&&(o=m.Retries),e.prev=2,c=(0,i.Z)({},y(),a,{method:"POST"}),u=b(r,t,c,n),e.next=7,A(u,o);case 7:return e.abrupt("return",e.sent);case 10:return e.prev=10,e.t0=e.catch(2),e.abrupt("return",{});case 14:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(t,n,i,a,r){return e.apply(this,arguments)}}()},650:function(e,t,n){"use strict";n.d(t,{kL:function(){return i},fJ:function(){return a},EH:function(){return r},qj:function(){return s},rh:function(){return o},DW:function(){return c}});var i="CONTEXT_RECEIVED",a="CONTEXT_PROCESSED",r="CONTEXT_GAME_MODE_DETECTED",s="MESSAGES_SENT_UPDATE",o="MESSAGES_SENT_REMOVE",c="SCENE_KEY_UPDATE"},662:function(e,t,n){"use strict";var i=n(633),a=function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).name="LeaderboardNotFound",i.message=t||"Leaderboard not found",i.payload=n,i}return(0,i.Z)(t,e),t}((0,n(643).Z)(Error));t.Z=a},642:function(e,t,n){"use strict";var i=n(633),a=function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).name="TournamentNotFound",i.message=t||"A Tournament with current context was not found",i.payload=n,i.code="TOURNAMENT_NOT_FOUND",i}return(0,i.Z)(t,e),t}((0,n(643).Z)(Error));t.Z=a},668:function(e,t,n){"use strict";var i=n(624),a=function(){function e(e,t){if(this.scene=void 0,this.config=void 0,this.isStarted=void 0,this.tween=void 0,!(t.targets.length<1)){this.buildConfig(e,t);var n=this.config.targets[0].scene;n&&(this.scene=n,this.isStarted=!1,this.tween=n.tweens.create(this.config))}}var t=e.prototype;return t.buildConfig=function(e,t){this.config=(0,i.TS)(e,t)},t.play=function(){this.tween&&(this.isStarted&&this.tween.hasStarted?this.restart():(this.isStarted||this.tween.hasStarted||this.tween.play(),this.isStarted=!0))},t.restart=function(){var e;null==(e=this.tween)||e.restart()},t.stop=function(){var e;null==(e=this.tween)||e.stop()},t.remove=function(){var e;null==(e=this.tween)||e.remove()},t.next=function(e){return this.tween?(this.tween.off(Phaser.Tweens.Events.TWEEN_COMPLETE,e),this.tween.once(Phaser.Tweens.Events.TWEEN_COMPLETE,e),this.tween):null},e}();t.Z=a},675:function(e,t,n){"use strict";n.d(t,{Z:function(){return o}});var i=n(633),a=n(668),r=n(193),s={targets:[],yoyo:!0,repeat:-1,duration:600,repeatDelay:50,ease:n.n(r)()(.55,.47,.43,.91),easeParams:[0,.9],props:{scale:{from:1,to:1.2}}},o=function(e){function t(t){return e.call(this,s,t)||this}return(0,i.Z)(t,e),t}(a.Z)},687:function(e,t,n){"use strict";var i=n(637),a=n(633),r=n(668),s={targets:[],repeat:-1,yoyo:!0,duration:33,ease:Phaser.Math.Easing.Sine.InOut,props:{x:5}},o=function(e){function t(t){var n,a,r;return(r=e.call(this,s,t)||this).posX=void 0,r.handleSwitchPosition=function(){var e;r.posX=-r.posX,null==(e=r.tween)||e.updateTo("x",-r.posX)},null!=(n=r.config)&&n.props?(r.posX=r.config.props.x,null==(a=r.tween)||a.on(Phaser.Tweens.Events.TWEEN_REPEAT,r.handleSwitchPosition),r):(0,i.Z)(r)}return(0,a.Z)(t,e),t}(r.Z);t.Z=o},685:function(e,t,n){"use strict";var i=n(633),a=n(668),r={targets:[],duration:400,ease:n(667).Z,props:{scale:"+=0.1"}},s=function(e){function t(t){return e.call(this,r,t)||this}return(0,i.Z)(t,e),t}(a.Z);t.Z=s},667:function(e,t,n){"use strict";var i=n(193),a=n.n(i)()(.48,1.57,.6,.83);t.Z=a},669:function(e,t,n){"use strict";var i=n(633),a=n(668),r={targets:[],duration:600,ease:Phaser.Math.Easing.Cubic.Out,props:{alpha:{start:0,from:0,to:1}}},s=function(e){function t(t){return e.call(this,r,t)||this}return(0,i.Z)(t,e),t}(a.Z);t.Z=s},679:function(e,t,n){"use strict";var i=n(633),a=n(668),r={targets:[],duration:600,ease:Phaser.Math.Easing.Back.Out,props:{y:{from:500,to:0}}},s=function(e){function t(t){return e.call(this,r,t)||this}return(0,i.Z)(t,e),t}(a.Z);t.Z=s},670:function(e,t,n){"use strict";var i=n(633),a=n(668),r={targets:[],duration:600,ease:Phaser.Math.Easing.Quadratic.Out,props:{alpha:{start:1,from:1,to:0}}},s=function(e){function t(t){return e.call(this,r,t)||this}return(0,i.Z)(t,e),t}(a.Z);t.Z=s},666:function(e,t,n){"use strict";var i=n(633),a=n(668),r={targets:[],duration:300,ease:n(667).Z,props:{scale:{from:1.2,to:1}}},s=function(e){function t(t){return e.call(this,r,t)||this}return(0,i.Z)(t,e),t}(a.Z);t.Z=s},682:function(e,t,n){"use strict";n.d(t,{Z:function(){return f}});var i=n(638),a=n(637),r=n(633),s=n(641),o=n(668),c={targets:[],duration:400,ease:n(667).Z,props:{scale:"-=0.1"}},u=function(e){function t(t){return e.call(this,c,t)||this}return(0,r.Z)(t,e),t}(o.Z),l=n(656),h=n(658),d=n(635),f=function(e){function t(t,n,i,r,s,o){var c;return void 0===o&&(o=!1),(c=e.call(this,t)||this).useSound=!0,c.isClicked=!1,c.scaleUp=-1,c.scaleDown=-1,c.button=void 0,c.upAnimation=void 0,c.downAnimation=void 0,c.isUsePixelPerfect=!1,c.hitArea=void 0,c.hitZone=void 0,c.scaleDownPress=void 0,c.parentName=void 0,c.handelObjectDestroy=function(){c.scene&&c.scene.events.off(Phaser.Scenes.Events.SLEEP,c.handleSceneSleep)},c.handleSceneSleep=function(){c.scene&&c.scene.tweens.killTweensOf((0,a.Z)(c))},c.handlePointerDown=function(){var e,t;c.isClicked||null!=(e=c.upAnimation)&&null!=(t=e.tween)&&t.isPlaying()||(c.isClicked=!0,c.runDownAnimation())},c.handleOnClick=function(e){return function(){var t,n,i,a;c.isClicked&&(null!=(t=c.upAnimation)&&null!=(n=t.tween)&&n.isPlaying()||(c.isClicked=!1,c.runUpAnimation(),null==(i=c.upAnimation)||null==(a=i.tween)||a.once(Phaser.Tweens.Events.TWEEN_COMPLETE,(function(){c.logButtonEvent(),c.addDebugData(),c.processCallback(e)}))))}},c.handlePointerOut=function(){var e,t;c.isClicked&&(null!=(e=c.upAnimation)&&null!=(t=e.tween)&&t.isPlaying()||(c.isClicked=!1,c.runUpAnimation()))},c.runDownAnimation=function(){var e;-1===c.scaleDown&&(c.scaleUp=c.scale,c.scaleDown=c.scaleDownPress),c.useSound&&c.scene.audio.playSound(h.Z.BUTTON_CLICK),null==(e=c.downAnimation)||e.remove(),c.downAnimation=new u({targets:[(0,a.Z)(c)],duration:150,props:{scale:c.scaleDown},onUpdate:function(){c.hitZone.scale=1/c.scale}}),c.downAnimation.play()},c.runUpAnimation=function(){var e;-1!==c.scaleUp&&(null==(e=c.upAnimation)||e.remove(),c.upAnimation=new u({targets:[(0,a.Z)(c)],duration:150,props:{scale:c.scaleUp},onUpdate:function(){c.hitZone.scale=1/c.scale}}),c.upAnimation.play())},c.isUsePixelPerfect=o,c.setDepth(l.Z.BUTTON),c.createButton(n,i,r,s),c.updateSize(),c.listenEvents(),c.scene.add.existing((0,a.Z)(c)),c}(0,r.Z)(t,e);var n=t.prototype;return n.listenEvents=function(){this.scene.events.on(Phaser.Scenes.Events.SLEEP,this.handleSceneSleep),this.once(Phaser.GameObjects.Events.DESTROY,this.handelObjectDestroy)},n.processCallback=function(e){var t,n,i;null==(t=this.upAnimation)||t.stop(),null==(n=this.downAnimation)||n.stop(),null==(i=this.scene)||i.tweens.killTweensOf(this),-1!==this.scaleUp&&this.setScale(this.scaleUp),e()},n.setDisabled=function(e){var t,n;e?(this.setAlpha(.5),null==(t=this.hitArea)||t.disableInteractive()):(this.setAlpha(1),null==(n=this.hitArea)||n.setInteractive())},n.createButton=function(e,t,n,i){this.button=this.scene.add.image(0,0,e,t),n&&i&&this.button.setWorldSize(n,i),this.scaleDownPress=this.scale-.1;var a=this.button,r=a.displayWidth,s=a.displayHeight;this.hitZone=this.scene.make.zone({displayWidth:r,displayHeight:s}),this.add([this.button,this.hitZone])},n.updateSize=function(){var e=this.button,t=e.width,n=e.height,i=t/100*10,a=n/100*10,r=i<10?i:10,s=a<10?a:10;this.setSize(t+r,n+s),this.hitZone.setSize(t+r,n+s)},n.addDebugData=function(){var e=this.getParentName(),t=this.name;(0,d.sw)("ui-click",e+":"+t)},n.logButtonEvent=function(){var e=this.getParentName(),t=this.name;this.scene.analytics.event(s._.BUTTON_CLICK,{button_name:t,screen_name:e})},n.getParentName=function(){if(this.parentName)return this.parentName;for(var e=this.parentContainer;e;){if(e instanceof GameCore.Screen){var t=e;return this.parentName=t.getScreenName(),this.parentName}e=e.parentContainer}return this.parentName=this.scene.getSceneName(),this.parentName},(0,i.Z)(t,[{key:"onClick",set:function(e){this.isUsePixelPerfect?(this.hitArea=this.button,this.hitArea.setInteractive({useHandCursor:!0,pixelPerfect:!0})):(this.hitArea=this.hitZone,this.updateSize(),this.hitArea.setInteractive({useHandCursor:!0})),this.hitArea.on(Phaser.Input.Events.GAMEOBJECT_POINTER_DOWN,this.handlePointerDown),this.hitArea.on(Phaser.Input.Events.GAMEOBJECT_POINTER_UP,this.handleOnClick(e)),this.hitArea.on(Phaser.Input.Events.GAMEOBJECT_POINTER_OUT,this.handlePointerOut)}},{key:"isUsePixelPerFect",get:function(){return this.isUsePixelPerfect}}]),t}(Phaser.GameObjects.Container)},674:function(e,t,n){"use strict";var i=n(638),a=n(637),r=n(633),s=n(641),o=n(656),c=n(635),u=function(e){function t(t,n,i){var r;return(r=e.call(this,t)||this).useSound=!0,r.isClicked=!1,r.scaleUp=-1,r.scaleDownPress=void 0,r.parentName=void 0,r.disable=void 0,r.handelObjectDestroy=function(){r.scene&&r.scene.events.off(Phaser.Scenes.Events.SLEEP,r.handleSceneSleep)},r.handleSceneSleep=function(){r.scene&&r.scene.tweens.killTweensOf((0,a.Z)(r))},r.handlePointerDown=function(){r.isClicked||(r.animButtonDown(),r.isClicked=!0)},r.handleOnClick=function(e){return function(){r.isClicked&&(r.isClicked=!1,r.animButtonUp(),r.logButtonEvent(),r.addDebugData(),r.processCallback(e))}},r.handlePointerOut=function(){r.isClicked&&(r.isClicked=!1,r.animButtonUp())},r.setDepth(o.Z.BUTTON),r.setSize(n,i),r.listenEvents(),r.scene.add.existing((0,a.Z)(r)),r}(0,r.Z)(t,e);var n=t.prototype;return n.listenEvents=function(){this.scene.events.on(Phaser.Scenes.Events.SLEEP,this.handleSceneSleep),this.once(Phaser.GameObjects.Events.DESTROY,this.handelObjectDestroy)},n.animButtonDown=function(){var e=this;this.scene.add.tween({targets:this,alpha:.75,duration:100,ease:Phaser.Math.Easing.Sine.Out,onStart:function(t){e.disable&&(e.updateAlphaByDisable(),t.remove())},onUpdate:function(t){e.disable&&(e.updateAlphaByDisable(),t.remove())}})},n.animButtonUp=function(){var e=this;this.scene.add.tween({targets:this,alpha:1,duration:200,ease:Phaser.Math.Easing.Sine.In,onStart:function(t){e.disable&&(e.updateAlphaByDisable(),t.remove())},onUpdate:function(t){e.disable&&(e.updateAlphaByDisable(),t.remove())}})},n.processCallback=function(e){-1!==this.scaleUp&&this.setScale(this.scaleUp),e()},n.updateAlphaByDisable=function(){this.alpha=this.disable?.5:1},n.setDisabled=function(e,t){void 0===t&&(t=!0),this.disable!=e&&(this.disable=e,e?this.disableInteractive():this.setInteractive(),t&&this.updateAlphaByDisable())},n.addDebugData=function(){var e=this.getParentName(),t=this.name;(0,c.sw)("ui-click",e+":"+t)},n.logButtonEvent=function(){var e=this.getParentName(),t=this.name;this.scene.analytics.event(s._.BUTTON_CLICK,{button_name:t,screen_name:e})},n.getParentName=function(){if(this.parentName)return this.parentName;for(var e=this.parentContainer;e;){if(e instanceof GameCore.Screen){var t=e;return this.parentName=t.getScreenName(),this.parentName}e=e.parentContainer}return this.parentName=this.scene.getSceneName(),this.parentName},(0,i.Z)(t,[{key:"onClick",set:function(e){this.setInteractive({useHandCursor:!0}),this.on(Phaser.Input.Events.GAMEOBJECT_POINTER_DOWN,this.handlePointerDown),this.on(Phaser.Input.Events.GAMEOBJECT_POINTER_UP,this.handleOnClick(e)),this.on(Phaser.Input.Events.GAMEOBJECT_POINTER_OUT,this.handlePointerOut)}}]),t}(Phaser.GameObjects.Container);t.Z=u},678:function(e,t,n){"use strict";var i=n(638),a=n(637),r=n(633),s=n(641),o=n(656),c=n(635),u=n(22),l=n(675),h=function(e){function t(t,n,i,r,s){var c;return(c=e.call(this,t)||this).useSound=!0,c.isClicked=!1,c.scaleUp=-1,c.button=void 0,c.buttonDown=void 0,c.hitArea=void 0,c.scaleDownPress=void 0,c.parentName=void 0,c.handelObjectDestroy=function(){c.scene&&c.scene.events.off(Phaser.Scenes.Events.SLEEP,c.handleSceneSleep)},c.handleSceneSleep=function(){c.scene&&c.scene.tweens.killTweensOf((0,a.Z)(c))},c.handlePointerDown=function(){c.isClicked||(c.showButtonDown(),c.isClicked=!0)},c.handleOnClick=function(e){return function(){c.isClicked&&(c.isClicked=!1,c.hideButtonDown(),c.logButtonEvent(),c.addDebugData(),c.processCallback(e))}},c.handlePointerOut=function(){c.isClicked&&(c.isClicked=!1,c.hideButtonDown())},c.buttonsPulsateAnimation=void 0,c.setDepth(o.Z.BUTTON),c.createButton(n,i,r,s),c.updateSize(),c.listenEvents(),c.scene.add.existing((0,a.Z)(c)),c}(0,r.Z)(t,e);var n=t.prototype;return n.listenEvents=function(){this.scene.events.on(Phaser.Scenes.Events.SLEEP,this.handleSceneSleep),this.once(Phaser.GameObjects.Events.DESTROY,this.handelObjectDestroy)},n.showButtonDown=function(){this.scene.tweens.killTweensOf(this.buttonDown),this.scene.add.tween({targets:this.buttonDown,alpha:.4,duration:150,ease:Phaser.Math.Easing.Sine.Out})},n.hideButtonDown=function(){this.scene.tweens.killTweensOf(this.buttonDown),this.scene.add.tween({targets:this.buttonDown,alpha:0,duration:150,ease:Phaser.Math.Easing.Sine.In})},n.processCallback=function(e){-1!==this.scaleUp&&this.setScale(this.scaleUp),e()},n.setDisabled=function(e){var t,n;e?(this.setAlpha(.5),null==(t=this.hitArea)||t.disableInteractive()):(this.setAlpha(1),null==(n=this.hitArea)||n.setInteractive())},n.createButton=function(e,t,n,i){this.button=new u.Z(this.scene,0,0,e,t,n,i),this.buttonDown=new u.Z(this.scene,0,0,e,t,n,13619151),this.buttonDown.setAlpha(0),this.scaleDownPress=this.scale-.1;var a=this.button,r=a.displayWidth,s=a.displayHeight;this.hitArea=this.scene.make.zone({displayWidth:r,displayHeight:s}),this.add([this.button,this.buttonDown,this.hitArea])},n.updateSize=function(){var e=this.button,t=e.width,n=e.height,i=t/100*10,a=n/100*10,r=i<10?i:10,s=a<10?a:10;this.setSize(t+r,n+s),this.hitArea.setSize(t+r,n+s)},n.addDebugData=function(){var e=this.getParentName(),t=this.name;(0,c.sw)("ui-click",e+":"+t)},n.logButtonEvent=function(){var e=this.getParentName(),t=this.name;this.scene.analytics.event(s._.BUTTON_CLICK,{button_name:t,screen_name:e})},n.getParentName=function(){if(this.parentName)return this.parentName;for(var e=this.parentContainer;e;){if(e instanceof GameCore.Screen){var t=e;return this.parentName=t.getScreenName(),this.parentName}e=e.parentContainer}return this.parentName=this.scene.getSceneName(),this.parentName},n.runPulsate=function(){var e,t;null==(e=this.buttonsPulsateAnimation)||e.remove(),this.buttonsPulsateAnimation=new l.Z({targets:[this],props:{scale:{from:1,to:1.05},duration:500}}),null==(t=this.buttonsPulsateAnimation)||t.play()},n.stopPulsate=function(){var e;null==(e=this.buttonsPulsateAnimation)||e.stop(),this.setScale(1)},(0,i.Z)(t,[{key:"onClick",set:function(e){this.hitArea.setInteractive({useHandCursor:!0}),this.hitArea.on(Phaser.Input.Events.GAMEOBJECT_POINTER_DOWN,this.handlePointerDown),this.hitArea.on(Phaser.Input.Events.GAMEOBJECT_POINTER_UP,this.handleOnClick(e)),this.hitArea.on(Phaser.Input.Events.GAMEOBJECT_POINTER_OUT,this.handlePointerOut)}}]),t}(Phaser.GameObjects.Container);t.Z=h},683:function(e,t,n){"use strict";var i=n(633),a=n(663),r=function(e){function t(t,n,i,a){var r;return(r=e.call(this,t,n.key,n.button,i,a)||this).payload=void 0,r.payload=n,r.createIcon(),r.createText(),r}(0,i.Z)(t,e);var n=t.prototype;return n.createIcon=function(){var e=this.scene.add.image(0,0,this.payload.key,this.payload.icon);e.setWorldSize(43,43),this.add(e),Phaser.Display.Align.In.LeftCenter(e,this,-25)},n.createText=function(){var e=this.payload.text,t=this.scene.make.bitmapText({font:a.Z.PRIMARY.KEY,size:this.scene.fontSize(24),text:e,origin:{x:.2,y:.5}});this.add(t)},t}(n(682).Z);t.Z=r},665:function(e,t,n){"use strict";n.d(t,{Z:function(){return c}});var i=n(637),a=n(633),r=n(655).Z.GAMEPLAY_DEFAULT,s=r.KEY,o=r.FRAME,c=function(e){function t(t){var n;return(n=e.call(this,t)||this).icons=[],n.canPlayAnimation=!1,n.timeline=void 0,n.setSize(188,32),n.createIcons(),n.runAnimation(),n.scene.add.existing((0,i.Z)(n)),n}(0,a.Z)(t,e);var n=t.prototype;return n.createIcons=function(){var e=this.scene.add.image(0,0,s,o.LOADING_CLUB),t=this.scene.add.image(0,0,s,o.LOADING_DIAMOND),n=this.scene.add.image(0,0,s,o.LOADING_HEART),i=this.scene.add.image(0,0,s,o.LOADING_SPADE);e.setWorldSize(32,32),t.setWorldSize(32,32),n.setWorldSize(32,32),i.setWorldSize(32,32),this.icons=[e,t,n,i],this.add(this.icons),this.alignIcons()},n.alignIcons=function(){var e=this;this.icons.forEach((function(t,n){var i=-(e.icons.length-1)/2*40+40*n;t.setX(i)}))},n.runAnimation=function(){var e,t=this;if(this.canPlayAnimation){var n=1/this.scene.world.getPixelRatio();null==(e=this.timeline)||e.stop();var i=function(){t.icons.forEach((function(e){return e.setScale(.8*n)}))},a=this.scene.tweens.createTimeline({loop:-1,onStart:i,onLoop:i});this.icons.forEach((function(e,t){a.add({targets:e,duration:150,ease:Phaser.Math.Easing.Sine.Out,yoyo:!0,offset:150*t,props:{scale:{from:.8*n,to:1.1*n}}})})),a.play(),this.timeline=a}},n.stopAnimation=function(){var e;null==(e=this.timeline)||e.stop()},n.setVisible=function(t){return e.prototype.setVisible.call(this,t),this.canPlayAnimation=t,t?this.runAnimation():this.stopAnimation(),this},n.setTint=function(e){return this.icons.forEach((function(t){return t.setTint(e)})),this},t}(Phaser.GameObjects.Container)},686:function(e,t,n){"use strict";var i=n(628),a=n(638),r=n(637),s=n(633),o=n(4),c=n.n(o),u=n(84),l=n.n(u),h=n(36),d=n.n(h),f=n(21),p=n.n(f),g=n(10),m=n.n(g),v=n(28),y=n.n(v),b=n(32),A=n.n(b),E=n(37),S=n.n(E),T=n(656),C=n(632);function w(e,t){var n="undefined"!==typeof A()&&S()(e)||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){var n;if(!e)return;if("string"===typeof e)return I(e,t);var i=m()(n=Object.prototype.toString.call(e)).call(n,8,-1);"Object"===i&&e.constructor&&(i=e.constructor.name);if("Map"===i||"Set"===i)return y()(e);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return I(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var i=0;return function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function I(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var x=function(e){function t(t,n){var a,s;(s=e.call(this,t)||this).config=void 0,s.isEnable=void 0,s.maxHeight=void 0,s.isScrolling=void 0,s.boundTop=void 0,s.boundBottom=void 0,s.maskGraphics=void 0,s.objects=void 0,s._value=0,s.velocity=0,s.isScrollingSmooth=void 0,s.lastScrollY=void 0,s.isScrollingBack=void 0,s.scrollingBackTo=void 0,s.lastScrollYCount=0,s.hitArea=void 0,s.onScrollEvents=[],s.update=function(e,t){s.isScrollingSmooth&&s.velocity&&s.scrollingSmooth(t),s.isScrollingBack&&s.scrollingBack(t)},s.checkReachBound=function(){return s.isReachTop()||s.isReachBottom()},s.onMouseScroll=(0,C.D)((function(e,t,n){if(s.isEnable){var i;if(s.isScrolling=!0,s.checkReachBound())return s.lastScrollY=c()(i=s.lastScrollY).call(i,(function(){return 0})),void(s.isScrolling=!1);s.stopScrollingBack(),s.startScrollSmooth(-n*s.scrollSmooth/15)}}),100,{isImmediate:!0,maxWait:100}),s.onTouchScroll=function(e){if(s.isEnable){s.velocity&&s.stopScrollSmooth(),s.stopScrollingBack(),s.isScrolling=!0;var t=s.scene.game.world.getZoomRatio(),n=e.position,i=e.prevPosition,a=(n.y-i.y)/t,r=s.height*s.maxScrollOver,o=1;if(s.lastScrollY[++s.lastScrollYCount%s.lastScrollY.length]=a,s.isReachTop()&&a>=0){var c=(r-(s.value-s.marginTop))/r;o=Math.min(o,c)}if(s.isReachBottom()&&a<=0){var u=(r-(-s.maxHeight-s.value))/r;o=Math.min(o,u)}var l=a*o,h=s.maxScrollOver*s.height;s.value+l>s.marginTop+h?s.value=s.marginTop+h:s.value+l<-s.maxHeight-h?s.value=-s.maxHeight-h:s.value+=l,s.callOnScrollEvents(s.value,l)}},s.onTouchDown=function(){s.isEnable&&(s.velocity&&s.stopScrollSmooth(),s.stopScrollingBack())},s.onTouchEnd=function(){var e,t;if(s.isReachTop()&&(s.startScrollingBack(s.marginTop),s.stopScrollSmooth()),s.isReachBottom()&&(s.startScrollingBack(-s.maxHeight),s.stopScrollSmooth()),s.isScrolling){var n=l()(e=s.lastScrollY).call(e,(function(e,t){return e+t}))/s.lastScrollY.length;s.startScrollSmooth(n*s.scrollSmooth),s.lastScrollY=c()(t=s.lastScrollY).call(t,(function(){return 0}))}},s.config=(0,i.Z)({marginTop:0,marginBottom:0,acceleration:1400,maxScrollOver:.15,scrollSmooth:40,scrollingBackRate:5},n);var o=n.width,u=n.height;return s.isEnable=!1,s.maxHeight=0,s.lastScrollY=d()(a=new Array(3)).call(a,0),s.setSize(o,u),s.createGroup(),s.createInput(),s.createEvents(),s.scene.add.existing((0,r.Z)(s)),s}(0,s.Z)(t,e);var n=t.prototype;return n.onScroll=function(e){this.onScrollEvents.push(e)},n.gotoTop=function(){this.value=this.config.marginTop},n.reset=function(){this.maxHeight=0,this.isScrolling=!1,this.isScrollingBack=!1,this.isScrollingSmooth=!1,this.gotoTop(),this.setEnable(!1)},n.createDebug=function(){this.drawDebugBox(16711680,.8)},n.setEnable=function(e){this.isEnable=e,e?this.setInteractive({draggable:!0,useHandCursor:!0}):this.disableInteractive()},n.addItem=function(e){this.addAt(e),this.objects.add(e);var t=e.y+e.height+this.marginBottom-this.height/2;this.maxHeight=Math.max(this.maxHeight,t,0),this.updateObjectVisible()},n.addItems=function(e){var t=this;this.addAt(e),this.objects.addMultiple(e);var n=c()(e).call(e,(function(e){return e.y+e.height+t.marginBottom-t.height/2}));this.maxHeight=Math.max(this.maxHeight,Math.max.apply(Math,n),0),this.updateObjectVisible()},n.clearItem=function(){this.objects.clear(!0,!0),this.reset()},n.getChildren=function(){var e;return p()(e=this.objects.getChildren()).call(e,(function(e){return e.active}))},n.createBound=function(e,t,n,i){this.boundTop=this.scene.make.image({key:e,frame:t}),this.boundBottom=this.scene.make.image({key:e,frame:t}),this.boundTop.setTint(i),this.boundBottom.setTint(i),this.boundTop.setAlpha(1,1,0,0),this.boundBottom.setAlpha(0,0,1,1),this.boundTop.setDepth(T.Z.PRIORITY),this.boundBottom.setDepth(T.Z.PRIORITY);var a=this.width,r=n,s=this.getWorldPosition(),o=s.x,c=s.y;this.boundTop.setDisplaySize(a,r),this.boundBottom.setDisplaySize(a,r),this.boundTop.setY(-this.displayHeight/2+r/2+c-this.y-1),this.boundBottom.setY(this.displayHeight/2-r/2+c-this.y+1),this.boundTop.setX(o-this.x),this.boundBottom.setX(o-this.x),this.add([this.boundTop,this.boundBottom])},n.createMask=function(){var e;null==(e=this.maskGraphics)||e.destroy(),this.maskGraphics=this.scene.make.graphics({fillStyle:{color:255,alpha:1},visible:!0}),this.maskGraphics.setName("MaskGraphics");var t=this.width,n=this.height;this.maskGraphics.fillRoundedRect(0-t/2,0-n/2,t,n,0),this.setMask(this.maskGraphics.createGeometryMask()),this.scene.events.off(Phaser.Scenes.Events.UPDATE,this.updateMask,this),this.scene.events.on(Phaser.Scenes.Events.UPDATE,this.updateMask,this)},n.updateMask=function(){var e=this.getWorldPosition(),t=e.x,n=e.y;this.maskGraphics.setPosition(t,n)},n.createGroup=function(){this.objects=this.scene.make.group({})},n.updateObject=function(e){this.objects.incY(e),this.updateObjectVisible()},n.updateObjectVisible=function(){for(var e=this.objects.getChildren(),t=0;t<e.length;t++){var n=e[t];n.y+n.height<-this.height/2||n.y-n.height>this.height/2?n.setVisible(!1):n.setVisible(!0)}},n.createInput=function(){this.setInteractive({draggable:!0,useHandCursor:!0}),this.on(Phaser.Input.Events.POINTER_WHEEL,this.onMouseScroll),this.on(Phaser.Input.Events.GAMEOBJECT_DRAG,this.onTouchScroll),this.on(Phaser.Input.Events.GAMEOBJECT_POINTER_DOWN,this.onTouchDown),this.scene.input.on(Phaser.Input.Events.POINTER_UP,this.onTouchEnd,this)},n.createEvents=function(){this.scene.events.on(Phaser.Scenes.Events.UPDATE,this.update)},n.callOnScrollEvents=function(e,t){for(var n,i=w(this.onScrollEvents);!(n=i()).done;){(0,n.value)(this,e,t)}},n.scrollingBack=function(e){var t=(this.scrollingBackTo-this.value)*e*this.scrollingBackRate/1e3;this.value+=t,Math.abs(this.scrollingBackTo-this.value)<.5&&(this.value=this.scrollingBackTo,this.stopScrollingBack()),this.callOnScrollEvents(this.value,t)},n.startScrollingBack=function(e){this.isScrollingBack=!0,this.scrollingBackTo=e},n.stopScrollingBack=function(){this.isScrollingBack=!1},n.scrollingSmooth=function(e){var t=this.velocity*e/1e3;this.value+=t;var n=Math.abs(this.velocity)/this.velocity;this.velocity-=n*this.acceleration*e/1e3,Math.abs(this.velocity)<this.acceleration*e/1e3&&this.stopScrollSmooth(),this.isReachTop()&&(this.startScrollingBack(this.marginTop),this.stopScrollSmooth()),this.isReachBottom()&&(this.startScrollingBack(-this.maxHeight),this.stopScrollSmooth()),this.callOnScrollEvents(this.value,t)},n.startScrollSmooth=function(e){this.isScrollingSmooth=!0,e&&(e*this.velocity>0?this.velocity+=e:this.velocity=e)},n.stopScrollSmooth=function(){this.isScrollingSmooth=!1,this.isScrolling=!1,this.velocity=0},n.isReachTop=function(){return this.value>this.marginTop},n.isReachBottom=function(){return-this.value>this.maxHeight},(0,a.Z)(t,[{key:"marginTop",get:function(){return this.config.marginTop}},{key:"marginBottom",get:function(){return this.config.marginBottom}},{key:"acceleration",get:function(){return this.config.acceleration}},{key:"maxScrollOver",get:function(){return this.config.maxScrollOver}},{key:"scrollSmooth",get:function(){return this.config.scrollSmooth}},{key:"scrollingBackRate",get:function(){return this.config.scrollingBackRate}},{key:"value",get:function(){return this._value},set:function(e){var t=e-this._value;this._value=e,this.updateObject(t)}}]),t}(Phaser.GameObjects.Container);t.Z=x},656:function(e,t){"use strict";t.Z={BACKGROUND:1,FOOTER_LOGO:2,FIREWORKS:5,ITEM:10,LOGO:15,BUTTON:20,TILE:25,TEXT:30,ENCOURAGING:31,EFFECT:32,MESSAGE:33,POPUP:40,PRIORITY:80,DEBUG:90,ON_TOP:1e4}},663:function(e,t){"use strict";t.Z={PRIMARY:{KEY:"sf-pro-normal-{{locale}}",TEXTURE:"./assets/fonts/{{locale}}/sf-pro-normal.png",DATA:"./assets/fonts/{{locale}}/sf-pro-normal.xml"},BOLD:{KEY:"sf-pro-bold-{{locale}}",TEXTURE:"./assets/fonts/{{locale}}/sf-pro-bold.png",DATA:"./assets/fonts/{{locale}}/sf-pro-bold.xml"},FONT_FAMILY:"sf-pro"}},645:function(e,t){"use strict";var n={AVATAR:{KEY:"avatar",FILE:"./assets/images/others/avatar.png",CONFIG:{}},ICON_EARTH:{KEY:"icon-earth",FILE:"./assets/images/others/icon-earth.png",CONFIG:{}},BACKGROUND:{KEY:"background",FILE:"./assets/images/"+GameCore.Utils.Image.getImageScale()+"x/bg.jpg",CONFIG:{}}};t.Z=n},655:function(e,t,n){"use strict";var i=n(628),a=GameCore.Utils.Image.getImageScale(),r={TUTORIAL:{KEY:"tutorial-resources",TEXTURE:"./assets/textures/"+a+"x/tutorial-resources.png",JSON:"./assets/textures/"+a+"x/tutorial-resources.json",FRAME:{TIP:"tip",HAND:"hand",BLANK:"blank",AVATAR_CAT:"avatar-cat",POPUP_TALK:"talk-popup",FIRST_MOVE:"first-move",CURRENT_SCORE:"current-score",TARGET_SCORE:"target-score",HAMMER_ITEM:"hammer-item",PAINT_ITEM:"paint-item",SHUFFLE_ITEM:"shuffle-item",COLORFUL_GEM_1:"colorful-gem-1",COLORFUL_GEM_2:"colorful-gem-2"}},GAMEPLAY_DEFAULT:{KEY:"gameplay-default",TEXTURE:"./assets/textures/"+a+"x/gameplay-default.png",JSON:"./assets/textures/"+a+"x/gameplay-default.json",FRAME:{BLANK:"blank",STATS_CROWN:"crown",STATS_STAR:"star",STATS_CUP:"stats_cup",STATS_MEDAL_START:"stats_medal_star",STATS_TIMER:"stats_timer",STATS_FLASH:"flash",MENU_STATISTIC:"menu_statistics",CUP:"cup",IC_SETTINGS:"ic_setting",IC_PLAY:"ic_play",IC_HINT:"ic_hint",IC_UNDO:"ic_undo",IC_SHARE:"ic_share",IC_THEME:"ic_theme",IC_INVITE:"ic_invite",IC_FLAG:"flag",IC_SOUND:"ic_sound",IC_MOVE:"ic_move",IC_STATISTICS:"ic_statistics",IC_NEXT:"ic_next",IC_BOOK:"ic_book",IC_RESTART:"ic_restart",IC_REPLAY:"ic_replay",IC_RECYCLE:"ic_recycle",IC_VIBRATION:"vibration",IC_GROUP:"ic_group",IC_HINT_SETTINGS:"ic_hint_settings",IC_DRAW_MODE:"ic_draw_mode",IC_AUTO_COMPLETE:"ic_auto_complete",IC_LANGUAGES:"ic_languages",ADD_SQUARE:"add-square",TIMER:"timer",GOLD:"gold",SILVER:"silver",BRONZE:"bronze",CUSTOM_MEDAL:"custom_medal",TOURNAMENT_TIMER:"tournament_timer",MEDAL_STAR:"medal-star",NO_TOURNAMENT:"no-tournament",IC_BG_OFF:"ic_bg_off",ARROW_SWAP_HORIZONTAL:"arrow-swap-horizontal",AVATAR_CROWN:"avatar_crown",WIN_BANNER:"win_banner",LOSE_BANNER:"lose_banner",BEAM:{AXIS:"beam_axis",LOSE_AXIS:"lose_beam_axis"},FLAG:{LEFT:"flags/left/",RIGHT:"flags/right/"},STRING:{LEFT:"string/left",RIGHT:"string/right"},LIGHTNING:{LEFT:"lightning/left_lightning",MIDDLE:"lightning/middle_lightning",RIGHT:"lightning/right_lightning"},HAND:"hand",LOADING_CLUB:"loading_club",LOADING_DIAMOND:"loading_diamond",LOADING_HEART:"loading_heart",LOADING_SPADE:"loading_spade",BOTTOM_BG:"bottom_bg",BOTTOM_LOGO:"bottom_logo",FOOTER_BG:"footer-bg",STOCK_BG:"stock-bg",FOOTER_TEXT:{BACK_TO_GAME:"text/back-to-game",TEXT_GAME:"text/text-game",TEXT_HINT:"text/text-hint",TEXT_SETTINGS:"text/text-settings",TEXT_TOURNAMENTS:"text/text-tournaments",TEXT_UNDO:"text/text-undo"},HINT:"hint"}},CARD_BACK:{KEY:"card-back",TEXTURE:"./assets/textures/"+a+"x/card-back.png",JSON:"./assets/textures/"+a+"x/card-back.json"},HOW_TO_PLAY:{KEY:"how-to-play",TEXTURE:"./assets/textures/"+a+"x/how-to-play.jpg",JSON:"./assets/textures/"+a+"x/how-to-play.json"},THEME_PREVIEW:{KEY:"theme-preview",TEXTURE:"./assets/textures/"+a+"x/theme-preview.png",JSON:"./assets/textures/"+a+"x/theme-preview.json"},DEFAULT:{KEY:"default-resources",TEXTURE:"./assets/textures/"+a+"x/default-resources.png",JSON:"./assets/textures/"+a+"x/default-resources.json",FRAME:{LINE:"line",BLANK:"blank",LOGO:"title-logo",GEMS:"title-gems",TEXT_LOADING:"loading",BOTTOM_BG:"bottom-bg",BOTTOM_LINE:"bottom-line",TOP_BG_LONG:"top-bg-long",BLOCK_LEADER_BLUE:"block-blue-bg",BLOCK_LEADER_YELLOW:"block-yellow-bg",PRELOADER:"preloader/dual-ring",LEADERBOARD_TAB_ON:"leaderboards/tab-on",LEADERBOARD_TAB_OFF:"leaderboards/tab-off",LEADERBOARD_BG_DARK:"leaderboards/bg-dark",LEADERBOARD_BG_LIGHT:"leaderboards/bg-light",MISSION_ICON_BG:"dailyMission/bg-icon",MISSION_BLOCK_BG:"dailyMission/bg-block",MISSION_CLOCK_BG:"dailyMission/bg-clock",DAILY_DAY_BG:"dailyRewards/bg",DAILY_DAY_LABEL:"dailyRewards/label",DAILY_DAY_BG_WAIT:"dailyRewards/bg-wait",DAILY_DAY_BG_OPEN:"dailyRewards/bg-open",DAILY_DAY_TITLE_GREY:"dailyRewards/title-grey",DAILY_DAY_TITLE_GREEN:"dailyRewards/title-green",DAILY_DAY_TITLE_ORANGE:"dailyRewards/title-orange",RIBBON_LONG:"ribbon/long",RIBBON_FULL:"ribbon/long-full",RIBBON_SHORT:"ribbon/short",RIBBON_SMALL:"ribbon/small",AVATAR_BG_BLUE:"avatar/blue-bg",AVATAR_FRAME_BLUE:"avatar/blue-frame",AVATAR_BG_BLUE_SMALL:"avatar/blue-bg-small",AVATAR_FRAME_BLUE_SMALL:"avatar/blue-frame-small",AVATAR_BG_BLUE_BIG:"avatar/blue-bg-big",AVATAR_FRAME_BLUE_BIG:"avatar/blue-frame-big",AVATAR_BG_YELLOW:"avatar/yellow-bg",AVATAR_FRAME_YELLOW:"avatar/yellow-frame",AVATAR_BG_YELLOW_SMALL:"avatar/yellow-bg-small",AVATAR_FRAME_YELLOW_SMALL:"avatar/yellow-frame-small",AVATAR_BG_YELLOW_BIG:"avatar/yellow-bg-big",AVATAR_FRAME_YELLOW_BIG:"avatar/yellow-frame-big",THE_CAT:"logo/cat",SAD_CAT:"logo/sad-cat",LOGO_GIFT:"logo/gift",LOGO_GIFT_ADS:"logo/gift-ad",LOGO_GIFT_WHITE:"logo/gift_white",LOGO_DIAMONDS_LIGHT_2:"logo/diamonds-light-2",LOGO_DIAMONDS_LIGHT_3:"logo/diamonds-light-3",LOGO_DIAMONDS_LIGHT_4:"logo/diamonds-light-4",LOGO_DIAMONDS_LIGHT_5:"logo/diamonds-light-5",LOGO_DIAMONDS_LIGHT_6:"logo/diamonds-light-6",LOGO_ADS_DIAMONDS:"logo/ads-diamonds",POPUP_TOP_LEFT:"popup/top-left",POPUP_TOP_MID:"popup/top-middle",POPUP_TOP_RIGHT:"popup/top-right",POPUP_MID_LEFT:"popup/middle-left",POPUP_MID_MID:"popup/middle-middle",POPUP_MID_RIGHT:"popup/middle-right",POPUP_BOTTOM_LEFT:"popup/bottom-left",POPUP_BOTTOM_MID:"popup/bottom-middle",POPUP_BOTTOM_RIGHT:"popup/bottom-right",PROGRESS_BG_LEFT:"progress/bg-left",PROGRESS_BG_MID:"progress/bg-mid",PROGRESS_BG_RIGHT:"progress/bg-right",PROGRESS_BAR_LEFT:"progress/bar-left",PROGRESS_BAR_MID:"progress/bar-mid",PROGRESS_BAR_RIGHT:"progress/bar-right",ICON_DOT:"icons/dot",ICON_CUP:"icons/cup",ICON_GIFT:"icons/gift",ICON_PLUS:"icons/plus",ICON_RANK:"icons/rank",ICON_FLAG:"icons/flag",ICON_CLOCK:"icons/clock",ICON_DAILY:"icons/daily",ICON_ADS:"icons/flat-ad",ICON_CHECK:"icons/check",ICON_CANCEL:"icons/cancel",ICON_SETTING:"icons/setting",ICON_RESUME:"icons/flat-resume",ICON_VIB_ON:"icons/flat-vib-on",ICON_VIB_OFF:"icons/flat-vib-off",ICON_MUSIC_ON:"icons/flat-music-on",ICON_MUSIC_OFF:"icons/flat-music-off",ICON_SOUND_ON:"icons/flat-sound-on",ICON_SOUND_OFF:"icons/flat-sound-off",ICON_FLAT_HOME:"icons/flat-home",ICON_FLAT_RANK:"icons/flat-rank",ICON_FLAT_SHARE:"icons/flat-share",ICON_CROWN:"icons/crown",ICON_CUP_MINI:"icons/cup-mini",ICON_CUP_GOLD:"icons/cup-gold",ICON_CUP_SILVER:"icons/cup-silver",ICON_CUP_COPPER:"icons/cup-bronze",ICON_DIAMOND:"icons/diamond",ICON_DIAMOND_SMALL:"icons/diamond-small",ICON_DIAMOND_GREY:"icons/diamond-grey",ICON_DIAMOND_LIGHT:"icons/diamond-light",BUTTON_CLOSE:"buttons/close",BUTTON_RED_LONG:"buttons/red-long",BUTTON_YELLOW_LONG:"buttons/yellow-long",BUTTON_YELLOW_CIRCLE:"buttons/yellow-circle",BUTTON_BLUE:"buttons/blue",BUTTON_BLUE_SHORT:"buttons/blue-short",BUTTON_BLUE_LONG:"buttons/blue-long",BUTTON_BLUE_CIRCLE:"buttons/blue-circle",BUTTON_GREEN:"buttons/green",BUTTON_GREEN_SHORT:"buttons/green-short",BUTTON_GREEN_LONG:"buttons/green-long",BUTTON_GREEN_MINOR:"buttons/green-minor",BUTTON_GREEN_CIRCLE:"buttons/green-circle",BUTTON_GREEN_MINOR_MINI:"buttons/green-minor-mini",NO_THANK_TEXT:"texts/no-thank",HORIZONTAL_LUCKY_BAR:"lucky-bar/horizontal-lucky-bar",HORIZONTAL_ARROW:"lucky-bar/horizontal-arrow",ARC_LUCKY_BAR:"lucky-bar/arc-lucky-bar",ARC_ARROW:"lucky-bar/arc-arrow"}},EFFECTS:{KEY:"effects-resources",PATH:"./assets/textures/"+a+"x/",JSON:"./assets/textures/"+a+"x/effects-resources.json",FRAME:{BLANK:"blank",FX_COMET:"comet",FX_SPARK:"spark",FX_CIRCLE:"circle",FX_CIRCLE_LIGHT:"circle-light",FX_GLOW_LIGHT:"glow-light",FX_GLOW_SMALL:"glow-small",FX_STAR_WHITE:"star-white",FX_STAR_YELLOW:"star-yellow",TEXT_COOL:"texts/cool",TEXT_GOOD:"texts/good",TEXT_GREAT:"texts/great",TEXT_EXCELLENT:"texts/excellent",TEXT_CONGRATULATION:"texts/congratulation",FX_CONFETTI_SMALL_1:"confetti/small-1",FX_CONFETTI_SMALL_2:"confetti/small-2",FX_CONFETTI_SMALL_3:"confetti/small-3",FX_CONFETTI_SMALL_4:"confetti/small-4",FX_CONFETTI_HEXAGON:"confetti/hexagon-",FX_FIREWORKS_SMALL:"fireworks/small",FX_FIREWORKS_BIG_0:"fireworks/big-explosive-0",FX_FIREWORKS_BIG_1:"fireworks/big-explosive-1",FX_FIREWORKS_SOAR_LINE:"fireworks/soar-line",FX_FIREWORKS_SOAR_CIRCLE:"fireworks/soar-circle",FX_HIGHLIGHT:"fx-items/highlight",FX_PAINT_EXPLOSIVE:"fx-items/paint-explosive-",FX_RED_EXPLOSIVE:"fx-gems/red-explosive-",FX_BLUE_EXPLOSIVE:"fx-gems/blue-explosive-",FX_PINK_EXPLOSIVE:"fx-gems/pink-explosive-",FX_GREEN_EXPLOSIVE:"fx-gems/green-explosive-",FX_YELLOW_EXPLOSIVE:"fx-gems/yellow-explosive-",FX_COLORFUL:"fx-gems/colorful-",FX_COLOR_CHANGE:"fx-gems/color-change-",FX_FREEZE_EXPLOSIVE:"fx-gems/freeze-explosive-",FX_COLORFUL_EXPLOSIVE:"fx-gems/colorful-explosive-",ANIMATION_STAR_X:"star-x/star-",ANIMATION_STAR_Y:"star-y/star-",FX_CONFETTI_RIBBON:"ribbon/ribbon",PREFIX_ANIMATION_RIBBON_CONFETTI_A:"ribbon/falling-confetti/confetti-a/confetti-a-",PREFIX_ANIMATION_RIBBON_CONFETTI_B:"ribbon/falling-confetti/confetti-b/confetti-b-",PREFIX_ANIMATION_RIBBON_CONFETTI_C:"ribbon/falling-confetti/confetti-c/confetti-c-",PREFIX_ANIMATION_RIBBON_CONFETTI_D:"ribbon/falling-confetti/confetti-d/confetti-d-"}},ANIMATION_SCENE:{KEY:"effects-resources",PATH:"./assets/textures/"+a+"x/",JSON:"./assets/textures/"+a+"x/animation-scene-resources.json",FRAME:{BLANK:"blank",COIN:"coins/coin",COIN_SMALL:"coins/coin-small",COIN_SMALL_GREY:"coins/coin-small-grey",ANIMATION_STAR_X:"star-x/star-",ANIMATION_STAR_Y:"star-y/star-",FX_SPARK_YELLOW:"yellow-spark",FX_CONFETTI_RIBBON:"ribbon/ribbon",PREFIX_ANIMATION_RIBBON_CONFETTI_A:"ribbon/falling-confetti/confetti-a/confetti-a-",PREFIX_ANIMATION_RIBBON_CONFETTI_B:"ribbon/falling-confetti/confetti-b/confetti-b-",PREFIX_ANIMATION_RIBBON_CONFETTI_C:"ribbon/falling-confetti/confetti-c/confetti-c-",PREFIX_ANIMATION_RIBBON_CONFETTI_D:"ribbon/falling-confetti/confetti-d/confetti-d-",FX_CONFETTI_SMALL_1:"confetti/small-1",FX_CONFETTI_SMALL_2:"confetti/small-2",FX_CONFETTI_SMALL_3:"confetti/small-3",FX_CONFETTI_SMALL_4:"confetti/small-4",FX_CONFETTI_HEXAGON:"confetti/hexagon-"}},GAMEPLAY:{KEY:"gameplay-resources",TEXTURE:"./assets/textures/"+a+"x/gameplay-resources.png",JSON:"./assets/textures/"+a+"x/gameplay-resources.json",FRAME:{BLANK:"blank",BIG_TOP:"bg-top",BIG_PLAYER:"bg-player",BIG_CIRCLE:"big-circle",BUTTON_PLUS:"buttons/plus",BUTTON_SETTING:"buttons/setting",AVATAR_BLUE_BG:"avatars/bg-blue-mini",AVATAR_BLUE_FRAME:"avatars/frame-blue-mini",PROGRESS_BG_LEFT:"progress/bg-left",PROGRESS_BG_MID:"progress/bg-mid",PROGRESS_BG_RIGHT:"progress/bg-right",PROGRESS_BAR_LEFT:"progress/bar-left",PROGRESS_BAR_MID:"progress/bar-mid",PROGRESS_BAR_RIGHT:"progress/bar-right",ITEM_GIFT:"items/gift",ITEM_PAINT:"items/paint",ITEM_HAMMER:"items/hammer",ITEM_SHUFFLE:"items/shuffle",ITEM_BG_COIN:"items/bg-coin",ITEM_BG_ITEM:"items/bg-item",ICON_PLUS:"icons/plus",ICON_CHECK:"icons/check",ICON_CLOCK:"icons/clock",ICON_DIAMOND:"icons/diamond",ICON_DIAMOND_SMALL:"icons/diamond-small",ICON_CUP_SUPERMINI:"icons/cup-supermini",TILE_RED:"gems/red",TILE_BLUE:"gems/blue",TILE_PINK:"gems/pink",TILE_GREEN:"gems/green",TILE_YELLOW:"gems/yellow",TILE_FREEZE:"gems/freeze",TILE_COLORFUL:"gems/colorful",TILE_COLOR_CHANGE:"gems/change"}},DEMO_SPINE:{KEY:"demo-spine",jsonPATH:"./assets/spines/demo/demo.json",atlasPATH:"./assets/spines/demo/demo.atlas"},LANGUAGES:{KEY:"languages",TEXTURE:"./assets/textures/"+a+"x/languages.png",JSON:"./assets/textures/"+a+"x/languages.json",FRAME:{CHECK:"check",UNCHECK:"uncheck",UNCHECK_GREY:"uncheck-grey"}}};GameCore.Utils.Valid.isDebugger()&&(r.EFFECTS.FRAME=(0,i.Z)({},r.ANIMATION_SCENE.FRAME,r.EFFECTS.FRAME)),t.Z=r},657:function(e,t,n){"use strict";n.d(t,{C:function(){return a},K:function(){return r}});var i=n(32),a={BOOT_SCENE:"BOOT_SCENE",LOAD_SCENE:"LOAD_SCENE",GAME_SCENE:"GAME_SCENE",GLOBAL_SCENE:"GLOBAL_SCENE",DASHBOARD_SCENE:"DASHBOARD_SCENE",GAME_OVER_SCENE:"GAME_OVER_SCENE",LEADERBOARD_SCENE:"LEADERBOARD_SCENE",RESULT_MATCH_SCENE:"RESULT_MATCH_SCENE",TEST_SCENE:"TEST_SCENE",ANIMATIONS_SCENE:"ANIMATIONS_SCENE"},r={SWITCH:n.n(i)()("SWITCH")}},660:function(e,t,n){"use strict";n.d(t,{o4:function(){return i},Ks:function(){return a}});var i={PAUSE_SCREEN:"PAUSE_SCREEN",NOTIFY_SCREEN:"NOTIFY_SCREEN",REWARD_SCREEN:"REWARD_SCREEN",RESCUE_SCREEN:"RESCUE_SCREEN",SETTINGS_SCREEN:"SETTINGS_SCREEN",BEST_SCORE_SCREEN:"BEST_SCORE_SCREEN",DAILY_REWARD_SCREEN:"DAILY_REWARD_SCREEN",DAILY_MISSIONS_SCREEN:"DAILY_MISSIONS_SCREEN",LUCKY_REWARD_SCREEN:"LUCKY_REWARD_SCREEN",NO_MORE_MOVES_SCREEN:"NO_MORE_MOVES_SCREEN",VICTORY_SCREEN:"VICTORY_SCREEN",PLAY_SCREEN:"PLAY_SCREEN",GAME_STATS_SCREEN:"GAME_STATS_SCREEN",LANGUAGES_SCREEN:"LANGUAGES_SCREEN",THEME_SCREEN:"THEME_SCREEN",HOW_TO_PLAY_SCREEN:"HOW_TO_PLAY_SCREEN",AWESOME_SCREEN:"AWESOME_SCREEN",NOTIFICATION_SCREEN:"NOTIFICATION_SCREEN",TOURNAMENTS_SCREEN:"TOURNAMENTS_SCREEN",PLAY_WITH_FRIEND_GAME_OVER_SCREEN:"PLAY_WITH_FRIEND_GAME_OVER_SCREEN",TOURNAMENTS_RESULT_SCREEN:"TOURNAMENT_RESULT_SCREEN",WELL_DONE_SCREEN:"WELL_DONE_SCREEN"},a={SCREEN:200,POPUP:300,PRIORITY:999}},658:function(e,t){"use strict";t.Z={BUTTON_CLICK:"button_click",POPUP_OFF:"popup_out",POPUP_SHOW:"popup_in",AUTO_COMPLETE:"auto_complete",CARD_MOVE:"card_move",FINISH_1:"finish1",FINISH_2:"finish2",FINISH_3:"finish3",FINISH_4:"finish4",FINISH_5:"finish5",FINISH_6:"finish6",FINISH_7:"finish7",FINISH_8:"finish8",FINISH_9:"finish9",FINISH_10:"finish10",FINISH_11:"finish11",FINISH_12:"finish12",FINISH_13:"finish13",HINT:"hint",NO_MOVE:"no_move",SHUFFLE:"shuffle",UNDO:"undo",WON:"won",DIAMONDS_EAT:"",FIREWORKS_SOAR:"",FIREWORKS_BIG:"",FIREWORKS_SMALL:"",DAILY_REWARD:"",GAME_OVER_SCENE:"",SCORE_COUNTER:"",CONGRATULATION:"",YOU_WIN:"",YOU_LOSE:"",GIFT_CHARGE:"",GIFT_REVEAL:"",GIFT_EXPLODE:""}},684:function(e,t,n){"use strict";var i=n(637),a=n(633),r=n(655).Z.EFFECTS,s=r.KEY,o=r.FRAME,c=function(e){function t(t){var n;return(n=e.call(this,t)||this).halo=void 0,n.star=void 0,n.createStar(),n.createHalo(),n.scene.add.existing((0,i.Z)(n)),n}(0,a.Z)(t,e);var n=t.prototype;return n.run=function(){this.runStarAnimation(),this.runHaloAnimation()},n.createStar=function(){this.star=this.scene.make.image({key:s,frame:o.FX_STAR_YELLOW,visible:!1}),this.star.setWorldSize(35,35),this.add(this.star)},n.createHalo=function(){this.halo=this.scene.make.image({key:s,frame:o.FX_CIRCLE,visible:!1}),this.halo.setWorldSize(162,162),this.add(this.halo)},n.runStarAnimation=function(){var e=this;this.scene.tweens.killTweensOf(this.star),this.star.setVisible(!0);var t=1/GameCore.Utils.Image.getImageScale();this.scene.tweens.add({targets:[this.star],duration:400,ease:Phaser.Math.Easing.Quintic.Out,props:{scaleX:{start:16*t,to:0},scaleY:{start:10*t,to:0}},onComplete:function(){e.star.setVisible(!1)}})},n.runHaloAnimation=function(){var e=this;this.scene.tweens.killTweensOf(this.halo),this.halo.setScale(0),this.halo.setVisible(!0),this.scene.tweens.add({targets:[this.halo],duration:200,ease:Phaser.Math.Easing.Cubic.Out,props:{scale:{from:0,to:8},alpha:{from:1,to:0}},onComplete:function(){e.halo.setVisible(!1)}})},t}(Phaser.GameObjects.Container);t.Z=c},677:function(e,t,n){"use strict";var i=n(637),a=n(633),r=n(655),s=n(624),o=r.Z.EFFECTS,c=o.KEY,u=o.FRAME,l=function(e){function t(t,n){var a;return(a=e.call(this,t,c,u.BLANK)||this).config=void 0,a.emitter=void 0,a.config=n||{},a.scene.add.existing((0,i.Z)(a)),a}(0,a.Z)(t,e);var n=t.prototype;return n.createEmitters=function(){var e=u.FX_CONFETTI_SMALL_1,t=u.FX_CONFETTI_SMALL_2,n=u.FX_CONFETTI_SMALL_3,i=u.FX_CONFETTI_SMALL_4,a=1/GameCore.Utils.Image.getImageScale(),r={on:!1,particleBringToTop:!0,frame:[e,t,n,i],tint:[14223402,1021804,5420529,16702052],timeScale:1,frequency:400,maxParticles:120,gravityY:-10,speedX:{min:-100,max:100},speedY:{min:80,max:250},alpha:{start:1,end:0,ease:Phaser.Math.Easing.Expo.In},rotate:{start:0,end:1080},scale:{min:.8*a,max:2*a},angle:{min:20,max:160},lifespan:{min:8e3,max:12e3}},o=(0,s.TS)(r,this.config);this.emitter=this.createEmitter(o)},n.run=function(e,t,n){this.stop(),this.emitter.setQuantity(e),this.emitter.setPosition(t,n),this.emitter.start()},n.explode=function(e,t,n){this.emitter||this.createEmitters(),this.emitter.explode(e,t,n)},n.stop=function(){var e,t,n;null==(e=this.emitter)||e.killAll(),null==(t=this.emitter)||t.stop(),null==(n=this.emitter)||n.remove(),this.createEmitters()},t}(Phaser.GameObjects.Particles.ParticleEmitterManager);t.Z=l},681:function(e,t,n){"use strict";var i=n(637),a=n(633),r=n(655).Z.EFFECTS,s=r.KEY,o=r.FRAME,c=function(e){function t(t){var n;return(n=e.call(this,t,s,o.FX_STAR_YELLOW)||this).emitZone=void 0,n.emitter=void 0,n.createEmitZone(),n.scene.add.existing((0,i.Z)(n)),n}(0,a.Z)(t,e);var n=t.prototype;return n.createEmitZone=function(){this.emitZone=new Phaser.Geom.Rectangle},n.createEmitters=function(){var e=1/GameCore.Utils.Image.getImageScale();this.emitter=this.createEmitter({on:!1,frame:o.FX_STAR_YELLOW,emitZone:{source:this.emitZone,type:"random"},timeScale:1,frequency:100,alpha:{start:1,end:0,ease:Phaser.Math.Easing.Expo.Out},scale:{start:1*e,end:0,ease:Phaser.Math.Easing.Expo.Out},lifespan:{min:800,max:1500}})},n.run=function(e,t,n,i,a){this.stop(),this.reset(),this.emitZone.setSize(i,a),this.emitZone.setPosition(t-i/2,n-a/2),this.emitter.setQuantity(e),this.emitter.start()},n.stop=function(){var e,t;null==(e=this.emitter)||e.killAll(),null==(t=this.emitter)||t.stop()},n.reset=function(){this.createEmitters()},t}(Phaser.GameObjects.Particles.ParticleEmitterManager);t.Z=c},672:function(e,t,n){"use strict";var i=n(135),a=n.n(i);t.Z=function(e){var t=[];return e.split("").forEach((function(e){var n=e.charCodeAt(0);n>=97&&n<=107&&t.push(n-97)})),a()(t.join(""))}},671:function(e,t,n){"use strict";n.d(t,{Z:function(){return o}});var i=n(633),a=n(641),r=function(e){function t(t,n,i){var a;return(a=e.call(this,t,0,0,n,i)||this).setOrigin(0,0),a}return(0,i.Z)(t,e),t}(Phaser.GameObjects.Zone),s=n(652),o=function(e){function t(){var t;return(t=e.call(this,{visible:!1})||this).unsubscribeList=void 0,t.gameZone=void 0,t.background=void 0,t.handleOpenScene=function(){t.logPageviewOnOpen(),t.logEventOpen()},t.handleResize=function(){if(t.background&&t.gameZone){var e=t.world.getResizeEventData(),n=e.width,i=e.height;t.gameZone.setSize(n,i),t.background.setPosition(n/2,i/2),t.background.setDisplaySize(n,i)}},t.removeStateChange=function(){t.unsubscribeList.forEach((function(e){return e()}))},t}(0,i.Z)(t,e);var n=t.prototype;return n.create=function(){this.events.on("wake",this.handleOpenScene),this.events.on("resume",this.handleOpenScene),this.events.on("create",this.handleOpenScene),this.world.events.on(s.Z.RESIZE,this.handleResize),this.scaleGame(),this.createGameZone()},n.scaleGame=function(){var e=this.getCamera("main"),t=this.world.getZoomRatio(),n=this.world.getWorldSize(),i=n.width,a=n.height;e.setZoom(t),e.centerOn(i/2,a/2)},n.createGameZone=function(){var e=this.world.getWorldSize(),t=e.width,n=e.height;this.gameZone=new r(this,t,n)},n.getCamera=function(e){return"main"===e?this.cameras.main:this.cameras.getCamera(e)},n.createMask=function(e){void 0===e&&(e=1),this.getCamera("main").setBackgroundColor("rgba(0, 0, 0, "+e+")")},n.fontSize=function(e){return Math.round(e/1.01)},n.createBackground=function(e,t,n,i){var a=this;this.background?(this.background.setTexture(e),t&&this.background.setFrame(t)):(this.background=this.make.image({key:e,frame:t}),this.game.events.on("world-resize",(function(){a.createBackground(a.background.texture.key,a.background.frame.name,a.background.alpha,a.background.tint)}))),this.background.setName(e);var r=this.gameZone,s=r.displayWidth,o=r.displayHeight;this.background.setDisplaySize(s,o);var c=this.world.getScreenWidth(),u=this.world.getScreenHeight(),l=this.world.getPixelRatioForCanvas(),h=this.world.getZoomRatio(),d=window.game.world.getPhysicPixels(c,l/h),f=window.game.world.getPhysicPixels(u,l/h);this.background.setSize(d,f),this.background.setDisplaySize(d,f),GameCore.Utils.Valid.isNumber(n)&&this.background.setAlpha(n),GameCore.Utils.Valid.isNumber(i)&&this.background.setTint(i),Phaser.Display.Align.In.Center(this.background,this.gameZone)},n.handleStateChange=function(e){var t=this;this.unsubscribeList=[],e.forEach((function(e){var n=e.selector,i=e.callback,a=t.storage.watch(n,i);t.unsubscribeList.push(a)})),this.events.once("sleep",this.removeStateChange),this.events.once("destroy",this.removeStateChange),this.events.once("shutdown",this.removeStateChange)},n.logPageviewOnOpen=function(){this.analytics.pageview(this.scene.key)},n.logEventOpen=function(){this.analytics.event(a._.SCREEN_OPEN,{screen_name:this.getSceneName()})},n.getSceneName=function(){return GameCore.Utils.String.toUpperCamelCase(this.scene.key.toLowerCase())},t}(Phaser.Scene)},654:function(e,t,n){"use strict";var i,a=n(20),r=n.n(a),s=n(21),o=n.n(s),c=n(10),u=n.n(c),l=n(28),h=n.n(l),d=n(32),f=n.n(d),p=n(37),g=n.n(p);function m(e,t){var n="undefined"!==typeof f()&&g()(e)||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){var n;if(!e)return;if("string"===typeof e)return v(e,t);var i=u()(n=Object.prototype.toString.call(e)).call(n,8,-1);"Object"===i&&e.constructor&&(i=e.constructor.name);if("Map"===i||"Set"===i)return h()(e);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return v(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var i=0;return function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function v(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var y=function(e){var t=document.getElementById("app-mask");t&&(t.style.background="rgb(20 20 22 / "+e+")")},b=function(){function e(){}return e.registerObject=function(t){var n;r()(n=e.objects).call(n,t)||e.objects.push(t)},e.removeObject=function(t){var n;e.objects=o()(n=e.objects).call(n,(function(e){return e!==t}))},e.openScreen=function(t,n){e.openingScreens.push({screen:t,grayscale:n})},e.closeScreen=function(t){var n;e.openingScreens=o()(n=e.openingScreens).call(n,(function(e){return e.screen!==t}))},e.resetBgMask=function(){e.currentAlpha=0,y(0)},e.updateGrayScale=function(){var t=e.openingScreens,n=!1;t.length>0&&(n=t[t.length-1].grayscale),n!=this.previousGrayscale&&(this.previousGrayscale=n,this.setGrayScaleForAppBg(n))},e.setGrayScaleForAppBg=function(e){var t=document.getElementById("app-bg");t&&(t.style.filter=e?"grayscale(0.8)":"")},e.updateAppBg=function(e){var t=document.getElementById("app-bg");if(t){var n=new Image;n.src=e,n.onload=function(){t.style.backgroundImage="url("+e+")"}}},e}();i=b,b.objects=[],b.openingScreens=[],b.currentAlpha=0,b.updateBgMask=function(){for(var e,t=1,n=m(i.objects);!(e=n()).done;){var a=e.value,r=a.scene;r&&r.scene.isActive(r.scene.key)&&(a.parentContainer?a.parentContainer.visible&&a.visible&&(t*=1-a.alpha*a.parentContainer.alpha):a.visible&&(t*=1-a.alpha))}var s=1-t;i.currentAlpha!=s&&(i.currentAlpha=s,y(s))},b.previousGrayscale=!1,t.Z=b},680:function(e,t,n){"use strict";var i=n(637),a=n(633),r=n(663),s=n(22),o=n(674),c=n(660),u=n(655),l=n(678),h=n(641),d=u.Z.HOW_TO_PLAY,f=u.Z.GAMEPLAY_DEFAULT,p=[{description:"firstTutor",frame:"how_to_play_1"},{description:"secondTutor",frame:"how_to_play_2"},{description:"thirdTutor",frame:"how_to_play_3"},{description:"fourthTutor",frame:"how_to_play_4"}],g=function(e){function t(t){var n;return(n=e.call(this,t)||this).bg=void 0,n.stepBtnText=void 0,n.currentStep=void 0,n.stepContainers=void 0,n.handleNextStep=function(){n.currentStep==p.length-1?(n.scene.screen.close(c.o4.HOW_TO_PLAY_SCREEN),n.scene.analytics.event(h._.TUTORIAL_COMPLETE)):(n.selectStep(n.currentStep+1),n.scene.analytics.event(h._.TUTORIAL_STEP,{step:n.currentStep}))},n.currentStep=0,n.createBackground(),n.createContent(),n.createGetStartedButton(),n.createCloseButton(),n.selectStep(0),t.add.existing((0,i.Z)(n)),n}(0,a.Z)(t,e);var n=t.prototype;return n.selectStep=function(e){e>=p.length&&(e=p.length-1),e==p.length-1?this.stepBtnText.setText("done"):this.stepBtnText.setText("next"),this.stepContainers.forEach((function(e){return e.kill()})),this.stepContainers[e].revive(),this.currentStep=e},n.createBackground=function(){var e=new s.Z(this.scene,0,0,340,460,20,16579837),t=this.scene.add.line(0,0,0,0,e.width,0,3774208);t.setLineWidth(.5),Phaser.Display.Align.In.TopCenter(t,e,0,-60),this.add([e,t]),this.bg=e,this.setSize(e.width,e.height)},n.createContent=function(){var e=this.scene.make.bitmapText({font:r.Z.BOLD.KEY,size:this.scene.fontSize(20),text:"howToPlay",origin:{x:.5,y:.5}});e.setTint(1907997),this.add(e),Phaser.Display.Align.In.TopCenter(e,this,0,-20),this.stepContainers=[];for(var t=0;t<p.length;t++){var n=p[t],i=n.description,a=n.frame,s=this.createStepContainer(t,i,a);this.stepContainers.push(s),Phaser.Display.Align.In.TopCenter(s,this,0,-75)}this.add(this.stepContainers)},n.createStepContainer=function(e,t,n){var i=this.scene.add.container();i.setSize(300,270);var a=this.scene.make.bitmapText({font:r.Z.PRIMARY.KEY,size:this.scene.fontSize(14),text:t,origin:{x:.5,y:.5}});a.setMaxSize(310,80),a.setTint(1907997),a.setCenterAlign();var s=this.scene.add.image(0,0,d.KEY,n);if(s.setWorldSize(300,200),i.add([a,s]),Phaser.Display.Align.In.TopCenter(a,i,0,-5),Phaser.Display.Align.In.BottomCenter(s,i,0,20),0===e){var o=this.scene.make.bitmapText({font:r.Z.BOLD.KEY,size:this.scene.fontSize(14),text:"foundations",origin:{x:.5,y:.5}});i.add([o]),Phaser.Display.Align.In.Center(o,s,60,-15)}if(2===e){var c=this.scene.make.bitmapText({font:r.Z.BOLD.KEY,size:this.scene.fontSize(14),text:"freecells",origin:{x:.5,y:.5}});i.add([c]),Phaser.Display.Align.In.Center(c,s,-60,-22)}return i},n.createGetStartedButton=function(){var e=new l.Z(this.scene,192,40,16,3774208);e.setName("GetStated"),e.onClick=this.handleNextStep;var t=this.scene.make.bitmapText({font:r.Z.BOLD.KEY,size:this.scene.fontSize(16),text:"Next",origin:{x:.5,y:.5}});t.setTint(16579837),e.add([t]),Phaser.Display.Align.In.BottomCenter(e,this.bg,0,-20),this.add([e]),this.stepBtnText=t},n.createCloseButton=function(){var e=this,t=new o.Z(this.scene,40,40);t.setName("Close"),t.onClick=function(){e.scene.screen.close(c.o4.HOW_TO_PLAY_SCREEN),e.scene.analytics.event(h._.TUTORIAL_COMPLETE)};var n=this.scene.add.image(0,0,f.KEY,"ic_close");n.setWorldSize(30,30),n.setTint(8750210),t.add(n),Phaser.Display.Align.In.TopRight(t,this.bg,-6,-9),this.add([t])},t}(Phaser.GameObjects.Container);t.Z=g},664:function(e,t,n){"use strict";n.d(t,{Z:function(){return B}});var i=n(638),a=n(633),r=n(3),s=n.n(r),o=n(669),c=n(670),u=n(655),l=n(657),h=n(660),d=n(659),f=(0,n(651).P1)([function(e){return e.scene.currentSceneKey}],(function(e){return e})),p=n(635),g=n(671),m=n(637),v=n(663),y=n(656),b=u.Z.DEFAULT,A=b.KEY,E=b.FRAME,S=function(e){function t(t){var n;return(n=e.call(this,t,0,0)||this).fps=0,n.fpsString="FPS: %1",n.fpsText=void 0,n.background=void 0,n.lastUpdate=void 0,n.update=function(e){if(!(e-n.lastUpdate<800)){n.lastUpdate=e;var t=Math.floor(n.scene.game.loop.actualFps);n.setFps(t)}},n.createFps(),n.setDepth(y.Z.DEBUG),n.scene.add.existing((0,m.Z)(n)),n.scene.events.on(Phaser.Scenes.Events.UPDATE,n.update),n}(0,a.Z)(t,e);var n=t.prototype;return n.setFps=function(e){this.fps=e;var t=Phaser.Utils.String.Format(this.fpsString,[e]);this.fpsText.setText(t)},n.createFps=function(){this.background=this.scene.make.image({key:A,frame:E.BLANK}),this.background.setName("BG"),this.background.setTint(13801480),this.background.setWorldSize(45,25),this.fpsText=this.scene.make.bitmapText({size:this.scene.fontSize(14),text:this.fpsString,font:v.Z.PRIMARY.KEY,origin:{x:.5,y:.5}}),this.fpsText.setName("FPS Meter"),Phaser.Display.Align.In.Center(this.fpsText,this.background),this.add([this.background,this.fpsText]),this.setFps(0)},t}(Phaser.GameObjects.Container),T=S,C=function(e){function t(t){var n;if((n=e.call(this,t,0,0)||this).performance=void 0,n.memory=0,n.maxMemoryLimit=void 0,n.maxPercentThreshold=void 0,n.normalColor=3459162,n.warningColor=16768343,n.alarmColor=15812200,n.memoryString="Memory: %1MB / %2MB",n.memoryText=void 0,n.lastUpdate=void 0,n.update=function(e){if(!(e-n.lastUpdate<1e3)){n.lastUpdate=e;var t=n.performance.memory.usedJSHeapSize,i=1048576*n.maxMemoryLimit,a=Math.round(t/1048576);n.setMemory(a),n.memoryText.setTint(n.normalColor),t>n.maxPercentThreshold/100*i&&n.memoryText.setTint(n.warningColor),t>i&&n.memoryText.setTint(n.alarmColor)}},n.performance=window.performance,n.createMemory(),n.setDepth(y.Z.DEBUG),n.scene.add.existing((0,m.Z)(n)),!n.isSupport())return n.memoryText.setText("Memory: not supported!"),(0,m.Z)(n);var i=n.performance.memory.jsHeapSizeLimit;return n.maxPercentThreshold=90,n.setMaxMemory(i/1048576),n.scene.events.on(Phaser.Scenes.Events.UPDATE,n.update),n}(0,a.Z)(t,e);var n=t.prototype;return n.isSupport=function(){var e;return this.performance&&!(null==(e=this.performance)||!e.memory)},n.setMaxMemory=function(e){this.maxMemoryLimit=Math.round(e)},n.setMemory=function(e){this.memory=e;var t=Phaser.Utils.String.Format(this.memoryString,[e,this.maxMemoryLimit]);this.memoryText.setText(t)},n.createMemory=function(){this.memoryText=this.scene.make.bitmapText({size:this.scene.fontSize(14),text:this.memoryString,font:v.Z.PRIMARY.KEY,depth:2e3}),this.memoryText.setName("Memory Meter"),this.add(this.memoryText),this.setMemory(0)},t}(Phaser.GameObjects.Container),w=C,I=n(666),x=n(665),P=function(e){function t(t,n,i,a){var r;return(r=e.call(this,t,n,i,a)||this).loadingIcon=void 0,r.messageText=void 0,r.openAnimation=void 0,r.closeTimerEvent=void 0,r.addLoadingIcon(),r.addMessageText(),r.setDepth(h.Ks.PRIORITY),r.background.setAlpha(.5),r.background.setTint(1315862),r}(0,a.Z)(t,e);var n=t.prototype;return n.open=function(t){var n,i=this;e.prototype.open.call(this,t);var a=this.getData(["message","duration","loading"]),r=a[0],s=void 0===r?"":r,o=a[1],c=void 0===o?0:o,u=a[2],l=void 0!==u&&u;this.setMessage(s),this.showLoading(l),null==(n=this.closeTimerEvent)||n.remove(),c>0&&(this.closeTimerEvent=this.scene.time.addEvent({delay:c,callback:function(){i.visible&&i.scene.screen.close(i.name)}})),this.runOpenAnimation()},n.addLoadingIcon=function(){this.loadingIcon=new x.Z(this.scene),this.add(this.loadingIcon),Phaser.Display.Align.In.Center(this.loadingIcon,this.zone)},n.addMessageText=function(){this.messageText=this.scene.make.bitmapText({size:this.scene.fontSize(15),font:v.Z.PRIMARY.KEY,origin:{x:.5,y:.5}}),this.messageText.setCenterAlign(),this.add(this.messageText)},n.setMessage=function(e){this.messageText.setText(e)},n.showLoading=function(e){this.loadingIcon.setVisible(e);var t=!1===e?10:40;Phaser.Display.Align.In.Center(this.messageText,this.zone,0,t)},n.runOpenAnimation=function(){var e,t;null==(e=this.openAnimation)||e.stop(),null==(t=this.openAnimation)||t.remove(),this.openAnimation=new I.Z({targets:[this.messageText,this.loadingIcon],props:{scale:{getStart:function(e){return e.scale-.3},getEnd:function(e){return e.scale}}}}),this.openAnimation.play()},n.logPageviewOnOpen=function(){},n.logPageviewOnClose=function(){},t}(GameCore.Screen),k=P,_=n(654),O=u.Z.DEFAULT,R=O.KEY,L=O.FRAME,D=function(e){function t(){for(var t,n,i=arguments.length,a=new Array(i),r=0;r<i;r++)a[r]=arguments[r];return(n=e.call.apply(e,s()(t=[this]).call(t,a))||this).mask=void 0,n.fadeInAnim=void 0,n.fadeOutAnim=void 0,n.fpsMeter=void 0,n.memoryMeter=void 0,n.switchScene=function(e){n.currentScene.switch(e)},n.emitGameEventStartScene=function(e){var t=e.scene.key;n.updateSceneState(),n.runMaskFadeOutAnimation(),n.updateActiveSceneKey(t),n.game.events.emit(Phaser.Scenes.Events.START,t),(0,p.sw)("scene","Start scene: "+t)},n.emitGameEventSleepScene=function(e){var t=e.scene.scene.key;t!==l.C.LOAD_SCENE&&(n.runMaskFadeInAnimation(),n.game.events.emit(Phaser.Scenes.Events.SLEEP,t))},n.emitGameEventWakeScene=function(e){var t=e.scene.scene.key;t!==l.C.LOAD_SCENE&&(n.updateSceneState(),n.runMaskFadeOutAnimation(),n.updateActiveSceneKey(t),n.game.events.emit(Phaser.Scenes.Events.WAKE,t))},n.emitGameEventPauseScene=function(e){var t=e.scene.scene.key;n.game.events.emit(Phaser.Scenes.Events.PAUSE,t)},n.emitGameEventResumeScene=function(e){var t=e.scene.key;n.game.events.emit(Phaser.Scenes.Events.RESUME,t)},n.emitGameEventShutdownScene=function(e){var t=e.scene.scene.key;n.game.events.emit(Phaser.Scenes.Events.SHUTDOWN,t)},n}(0,a.Z)(t,e);var n=t.prototype;return n.init=function(){this.listenScenesEvents(),this.game.globalScene=this},n.setup=function(){this.scaleGame(),this.addMask(),this.addNotifyScreen(),this.addFPS(),this.addMemory(),this.showBackground()},n.addNotifyScreen=function(){var e=this.screen.add(h.o4.NOTIFY_SCREEN,k);Phaser.Display.Align.In.Center(e,this.gameZone)},n.addMask=function(){this.mask=this.make.image({key:R,frame:L.BLANK});var e=this.gameZone,t=e.width,n=e.height;this.mask.setAlpha(0),this.mask.setOrigin(0,0),this.mask.setTint(859421),this.mask.setWorldSize(t,n)},n.addFPS=function(){GameCore.Configs.Statistics.ShowFPSInGame&&(this.fpsMeter=new T(this),Phaser.Display.Align.In.TopLeft(this.fpsMeter,this.gameZone,-20,-10))},n.addMemory=function(){GameCore.Configs.Statistics.ShowMemoryInGame&&(this.memoryMeter=new w(this),Phaser.Display.Align.In.TopLeft(this.memoryMeter,this.gameZone,-45,-3))},n.updateSceneState=function(){this.setGlobalSceneOnTop()},n.setGlobalSceneOnTop=function(){this.scene.bringToTop(this)},n.runMaskFadeInAnimation=function(){var e,t;this.mask&&GameCore.Configs.EnableEffectSceneTransition&&(null==(e=this.fadeInAnim)||e.remove(),null==(t=this.fadeOutAnim)||t.remove(),this.fadeInAnim=new o.Z({targets:[this.mask],duration:400,ease:Phaser.Math.Easing.Cubic.In,props:{alpha:{start:0,from:0,to:.6}}}),this.mask.setAlpha(0),this.fadeInAnim.play())},n.runMaskFadeOutAnimation=function(){var e,t;this.mask&&GameCore.Configs.EnableEffectSceneTransition&&(null==(e=this.fadeInAnim)||e.remove(),null==(t=this.fadeOutAnim)||t.remove(),this.fadeOutAnim=new c.Z({targets:[this.mask],duration:400,ease:Phaser.Math.Easing.Cubic.Out,props:{alpha:{start:.6,from:.6,to:0}}}),this.mask.setAlpha(1),this.fadeOutAnim.play())},n.listenScenesEvents=function(){var e=this;this.scene.manager.getScenes(!1).forEach((function(t){t.events.on(Phaser.Scenes.Events.CREATE,e.emitGameEventStartScene),t.events.on(Phaser.Scenes.Events.SLEEP,e.emitGameEventSleepScene),t.events.on(Phaser.Scenes.Events.WAKE,e.emitGameEventWakeScene),t.events.on(Phaser.Scenes.Events.PAUSE,e.emitGameEventPauseScene),t.events.on(Phaser.Scenes.Events.RESUME,e.emitGameEventResumeScene),t.events.on(Phaser.Scenes.Events.SHUTDOWN,e.emitGameEventShutdownScene)})),this.events.on(l.K.SWITCH,this.switchScene),this.events.on(Phaser.Scenes.Events.RENDER,_.Z.updateBgMask)},n.getActiveScene=function(){return this.scene.manager.getScenes(!0)[0]},n.getCurrentScene=function(){return this.currentScene},n.updateActiveSceneKey=function(e){e!==l.C.GLOBAL_SCENE&&this.storage.dispatch((0,d.I)(e))},n.logEventOpen=function(){},n.logPageviewOnOpen=function(){},n.showBackground=function(){var e=this.theme.getCurrentThemeConfig().backgroundKey;this.createBackground(e);var t=this.theme.getCurrentThemeResources();_.Z.updateAppBg(t.backgroundFile)},n.hideBackground=function(){this.background.kill()},(0,i.Z)(t,[{key:"currentScene",get:function(){var e=this.storage.getState(),t=f(e);return(t?this.scene.manager.getScene(t):this.getActiveScene()).scene}}]),t}(g.Z),B=D},557:function(e,t,n){"use strict";var i=n(631),a=n(1),r=n.n(a),s=n(2),o=n.n(s),c=function(){var e=document,t=e.body,n=e.documentElement,i=t.clientHeight,a=n.clientHeight;return Math.max(a,i)||0},u=function(){var e=document,t=e.body,n=e.documentElement,i=t.clientWidth,a=n.clientWidth;return Math.max(a,i)||0},l=function(){return new(o())((function(e){!function t(){var n=u(),i=c();n>0&&i>0?e():requestAnimationFrame(t)}()}))},h=n(635),d=n(636),f=n(628),p=n(633),g=n(639),m=0,v=0,y=function(){function e(e){this.game=void 0,this.progressFbTimeEvent=void 0,this.game=e}var t=e.prototype;return t.loadingProgressFbBootScene=function(){var e=this,t=100;v=30;!function n(){t<=0?clearTimeout(e.progressFbTimeEvent):e.progressFbTimeEvent=setTimeout((function(){e.game.facebook.setLoadingProgress(Math.round(v)),v+=30/t,t--,n()}),50)}()},t.finishLoadingProgressFbBootScene=function(){clearTimeout(this.progressFbTimeEvent)},t.loadingProgressFbLoadScene=function(){var e=this;(!v||v<30)&&(v=60),m=v;!function t(){e.progressFbTimeEvent=setTimeout((function(){e.game.facebook.setLoadingProgress(Math.round(v)),v+=.1,t()}),50)}()},t.onProgress=function(e){var t=100-v,n=Math.round(e*t+v);n>m&&clearTimeout(this.progressFbTimeEvent),this.game.facebook.setLoadingProgress(n)},e}(),b=n(124),A=n.n(b);function E(e,t){if(1==t.length)return t[0].color;e=Phaser.Math.Clamp(e,0,1);for(var n=t[0].color,i=0;i<t.length-1;i++){var a=t[i],r=t[i+1];if(e>=a.at&&e<=r.at){var s=Phaser.Display.Color.IntegerToColor(a.color),o=Phaser.Display.Color.IntegerToColor(r.color),c=Phaser.Display.Color.Interpolate.ColorWithColor(s,o,100,100*e);return Phaser.Display.Color.GetColor(c.r,c.g,c.b)}a.at,n=a.color}return n}var S=function(){function e(e){this.game=void 0,this.game=e}var t=e.prototype;return t.addCropByViewport=function(){var e=this;[Phaser.GameObjects.Image,Phaser.GameObjects.RenderTexture].forEach((function(t){t.prototype.setCropByViewport=e.setCropByViewport}))},t.addKillRevive=function(){var e=this;[Phaser.GameObjects.Container,Phaser.GameObjects.Image,Phaser.GameObjects.Sprite,Phaser.GameObjects.Graphics,Phaser.GameObjects.Text,Phaser.GameObjects.BitmapText,Phaser.GameObjects.Particles.ParticleEmitter,Phaser.GameObjects.Particles.ParticleEmitterManager,Phaser.GameObjects.Rectangle,Phaser.GameObjects.Shape].forEach((function(t){t.prototype.kill=e.kill,t.prototype.revive=e.revive}))},t.addKillReviveGroup=function(){Phaser.GameObjects.Group.prototype.killGroup=this.killGroup,Phaser.GameObjects.Group.prototype.reviveGroup=this.reviveGroup},t.addSetWorldSize=function(){var e=this;[Phaser.GameObjects.Image,Phaser.GameObjects.Sprite].forEach((function(t){t.prototype.setWorldSize=e.setWorldSize}))},t.addSetWorldSizeForContainer=function(){var e=this;[Phaser.GameObjects.Container].forEach((function(t){t.prototype.setWorldSize=e.setWorldSizeForContainer}))},t.addGetWorldPosition=function(){var e=this;[Phaser.GameObjects.Container,Phaser.GameObjects.Image,Phaser.GameObjects.Sprite,Phaser.GameObjects.Graphics,Phaser.GameObjects.Text,Phaser.GameObjects.BitmapText].forEach((function(t){t.prototype.getWorldPosition=e.getWorldPosition}))},t.addDrawDebugBox=function(){var e=this;[Phaser.GameObjects.Container,Phaser.GameObjects.Image,Phaser.GameObjects.Sprite,Phaser.GameObjects.Graphics,Phaser.GameObjects.Text,Phaser.GameObjects.BitmapText,Phaser.GameObjects.Zone].forEach((function(t){t.prototype.drawDebugBox=e.drawDebugBox}))},t.addHighQuality=function(){var e=this;[Phaser.GameObjects.Text].forEach((function(t){t.prototype.setHighQuality=e.setHighQuality}))},t.addGradientHorizontalTint=function(){var e=this;[Phaser.GameObjects.BitmapText].forEach((function(t){t.prototype.setGradientHorizontalTint=e.setGradientHorizontalTint,t.prototype.setGradientVerticalTint=e.setGradientVerticalTint,t.prototype.clearGradientTint=e.clearGradientTint}))},t.addRadius=function(){var e=this;[Phaser.GameObjects.BitmapText].forEach((function(t){A()(t.prototype,"radius",{set:function(e){this._radius=e,this._dirty=!0},get:function(){return this._radius}}),t.prototype.setRadius=e.setRadius,t.prototype.clearRadius=e.clearRadius,t.prototype._originalGetTextBounds=t.prototype.getTextBounds,t.prototype.getTextBounds=e.getTextBounds}))},t.addSetLineHeightForBitmapText=function(){Phaser.GameObjects.BitmapText.prototype.setLineHeight=function(e){this.lineHeight=e,this.updateDisplayOrigin()}},t.kill=function(){this.setActive(!1),this.setVisible(!1)},t.revive=function(){this.setActive(!0),this.setVisible(!0)},t.killGroup=function(){this.getChildren().forEach((function(e){e.setActive(!1),e.setVisible(!1)}))},t.reviveGroup=function(){this.getChildren().forEach((function(e){e.setActive(!0),e.setVisible(!0)}))},t.setCropByViewport=function(e){var t=e.x,n=e.y,i=e.width,a=e.height,r=this.scaleX,s=this.scaleY,o=this.displayWidth,c=this.displayHeight,u=this.getWorldPosition(),l=u.x,h=u.y,d=t-i/2,f=l-o/2,p=t+i/2,g=l+o/2,m=n-a/2,v=h-c/2,y=n+a/2,b=h+c/2,A={x:0,y:0,width:this.width/r,height:this.height/s};f<d&&(A.x=(d-f)/r),g>p&&(A.width-=A.x+(g-p)/r),v<m&&(A.y=(m-v)/s),b>y&&(A.height-=A.y+(b-y)/s),this.setCrop(A.x,A.y,A.width,A.height)},t.setWorldSize=function(e,t){this.setSize(e,t),this.setDisplaySize(e,t)},t.setWorldSizeForContainer=function(e,t,n){void 0===n&&(n=2),this.setSize(e*n,t*n),this.setDisplaySize(e,t)},t.getWorldPosition=function(){var e=this.getWorldTransformMatrix().decomposeMatrix();return{x:e.translateX,y:e.translateY}},t.drawDebugBox=function(e,t){var n=this.x,i=this.y,a=this.width,r=this.height,s=this.depth,o=this.originX,c=this.originY,u=this.scene.add.rectangle(n,i,a,r,e,t);u.setName("Debug Box"),u.setDepth(s);var l=GameCore.Utils.Valid.isNumber;return l(o)&&l(c)&&u.setOrigin(o,c),u},t.setHighQuality=function(){return this.renderer instanceof Phaser.Renderer.WebGL.WebGLRenderer?this.setResolution(2*this.scene.game.world.getZoomRatio()):this},t.setGradientHorizontalTint=function(e){var t=this.getTextBounds().characters;if(0==t.length)return this;for(var n=t[t.length-1].r,i=0,a=0;a<t.length;a++){var r=i/n,s=(i=t[a].r)/n,o=E(r,e),c=E(s,e);this.setCharacterTint(a,1,!1,o,c,o,c)}return this},t.setGradientVerticalTint=function(e,t){void 0===t&&(t=!0);for(var n=[],i=this.getTextBounds().characters,a=0;a<i.length;a++){for(var r=i[a],s=t?r.line:0;!n[s];)n.push({minY:9999999,maxY:-9999999});var o=n[s],c=o.minY,u=o.maxY,l=r.y+r.h,h=r.y;c>h&&(n[s].minY=h),u<l&&(n[s].maxY=l)}for(var d=0;d<i.length;d++){var f=i[d],p=n[t?f.line:0],g=p.minY,m=p.maxY,v=f.y+f.h,y=(m-f.y)/(m-g),b=E((m-v)/(m-g),e),A=E(y,e);this.setCharacterTint(d,1,!1,A,A,b,b)}return this},t.clearGradientTint=function(){return this.setCharacterTint(0,this.text.length,!1,16777215),this},t.setRadius=function(e){return this.radius=e,this._dirty=!0,this},t.clearRadius=function(){return this.radius=void 0,this},t.getTextBounds=function(e){var t=this._bounds,n=void 0!=this.radius&&0!=this.radius&&(this._dirty||e||this.scaleX!==t.scaleX||this.scaleY!==t.scaleY);if(t=this._originalGetTextBounds(e),n)for(var i=0;i<t.characters.length;i++){var a=t.characters[i],r=this.radius,s=(a.x-this.displayOriginX+a.w/2)/r,o=Math.cos(s),c=Math.sin(s);a.curve={r:r,rotation:s,cos:o,sin:c}}return t},e}(),T=S,C=n(10),w=n.n(C),I=n(28),x=n.n(I),P=n(32),k=n.n(P),_=n(37),O=n.n(_),R=n(3),L=n.n(R),D=n(135),B=n.n(D),N=n(56),M=n.n(N),G=n(31),F=n.n(G),Z=[{url:"./assets/images/others/mock1.jpg",title:"Buy lottery tickets on behalf",description:"\ud83d\udca5\ud83d\udca5\ud83d\udca5 Place an order for lottery tickets from 3 regions!!! \u2705 Fast - Convenient - Safe \u2705 Diverse products \u2705 Payment...",buttonName:"Discover more"},{url:"./assets/images/others/mock2.jpg",title:"SYSTEM-WIDE SALE UP TO 50%",description:'\ud83d\udd25 \ud835\uddec\ud835\uddd8\ud835\uddd4\ud835\udde5 \ud835\uddd8\ud835\udde1\ud835\uddd7 \ud835\udde6\ud835\uddd4\ud835\udddf\ud835\uddd8 | \ud835\udde8\ud835\udde3 \ud835\udde7\ud835\udde2 \ud835\udff1\ud835\udfec% "BIG PARTY" AUTHENTIC SPORTSWEAR SHOCKINGLY REDUCED PRICES! \ud83c\udf81 From...',buttonName:"Discover more"},{url:"./assets/images/others/mock3.jpg",title:"Register now",description:"Play safe, play fun, play 9club!",buttonName:"Register"}],U=function(){function e(){}return e.loadBannerAdAsync=function(){var e=(0,i.Z)(r().mark((function e(){var t,n,i,a,s,c,u,l,h,d;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.currentIdx=(this.currentIdx+1)%Z.length,this.hideBannerAdAsync(),e.next=4,new(o())((function(e){setTimeout((function(){e()}),2e3)}));case 4:if(!document.getElementById("mock-banner-ads")){e.next=16;break}return t=Z[this.currentIdx],n=t.url,i=t.buttonName,a=t.title,s=t.description,(c=document.getElementById("banner-content-text1"))&&(c.innerHTML=a),(u=document.getElementById("banner-content-text2"))&&(u.innerHTML=s),(l=document.getElementById("mock-banner-ads-avatar"))&&(l.style.background="url("+n+") center center/contain no-repeat"),(h=document.getElementById("banner-content-button"))&&(h.innerHTML=i),e.abrupt("return");case 16:d=GameCore.Utils.Device.isDesktop(),50,d?this.createDesktopBannerAd(50):this.createMobileBannerAd(50);case 19:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),e.createDesktopBannerAd=function(e){var t=this,n=Z[this.currentIdx],i=n.url,a=n.buttonName,r=n.title,s=n.description,o=document.createElement("div");o.id="mock-banner-ads",o.style.width="100%",o.style.height=e+"px",o.style.bottom="var(--sab)",o.style.display="flex",o.style.position="absolute",o.style.opacity=this.currentOpacity;var c=document.createElement("div");c.id="mock-banner-ads-display-area",c.style.width="100%",c.style.height="100%",c.style.background="#323436 center center/auto no-repeat",c.style.borderRadius="10px",c.style.marginLeft="4px",c.style.marginRight="4px",c.style.display="block",c.style.alignContent="center";var u=document.createElement("div");u.id="mock-banner-ads-content",u.style.boxSizing="border-box",u.style.flexDirection="row",u.style.display="flex",u.style.position="relative",u.style.alignItems="stretch",u.style.paddingLeft="4px",u.style.paddingRight="4px",u.style.justifyContent="space-between";var l=document.createElement("div");l.id="mock-banner-ads-avatar",l.style.marginLeft="10px",l.style.width=e+"px",l.style.minWidth=e+"px",l.style.height=e+"px",l.style.display="flex",l.style.flexDirection="column",l.style.position="relative",l.style.background="url("+i+") center center/contain no-repeat",l.style.borderRadius="50%";var h=document.createElement("div");h.id="mock-banner-ads-right-content",h.style.width="100%",h.style.paddingLeft="10px",h.style.display="flex",h.style.flexDirection="row",h.style.position="relative",h.style.color="#E4E6EB",h.style.wordWrap="break-word",h.style.textAlign="left",h.style.alignContent="center",h.style.alignItems="center",h.style.fontSize="12px",h.style.fontFamily="Helvetica, Arial, sans-serif, Roboto, Helvetica, Arial, sans-serif",l.style.boxSizing="border-box";var d=document.createElement("div");d.style.flexDirection="column",d.style.display="flex",d.style.justifyContent="center",d.style.flexShrink="1",d.style.flexGrow="1",d.style.flexBasis="0",d.style.boxSizing="border-box",d.style.minWidth="0",d.innerHTML="\n            <div id='banner-content-text1' style=\"font-weight:600;line-height: 1.3333;font-size: .9375rem;text-overflow: ellipsis;-webkit-line-clamp: 1;overflow: hidden;display: -webkit-box;-webkit-box-orient: vertical;\">"+r+"</div>\n            <div id='banner-content-text2' style=\"font-weight:400;line-height: 1.2308;font-size: .8125rem;text-overflow: ellipsis;-webkit-line-clamp: 2;overflow: hidden;display: -webkit-box;-webkit-box-orient: vertical;\">"+s+"</div>";var f=document.createElement("button");f.id="banner-content-button",f.type="button",f.style.width="120px",f.style.height=e-20+"px",f.style.fontWeight="600",f.style.backgroundColor="#3963fc",f.style.border="none",f.style.color="white",f.style.borderRadius="5px",f.style.textAlign="center",f.style.display="inline-block",f.style.cursor="pointer",f.style.marginRight="10px",f.style.marginLeft="10px",f.style.flexShrink="1",f.style.boxSizing="border-box",f.style.paddingRight="2px",f.style.paddingLeft="2px",f.innerHTML=a,f.onclick=function(){"0.2"===t.currentOpacity?o.style.opacity="1":o.style.opacity="0.2",t.currentOpacity=o.style.opacity};var p=document.createElement("button");p.type="button",p.style.width=e-20+"px",p.style.height=e-20+"px",p.style.fontWeight="1000",p.style.backgroundColor="#5a5c5c",p.style.border="none",p.style.color="white",p.style.borderRadius="50%",p.style.textAlign="center",p.style.display="inline-block",p.style.cursor="pointer",p.style.marginRight="10px",p.style.marginLeft="10px",p.style.flexShrink="0",p.style.boxSizing="border-box",p.style.paddingRight="2px",p.style.paddingLeft="2px",p.innerHTML="...",document.body.appendChild(o),o.appendChild(c),c.appendChild(u),u.appendChild(l),u.appendChild(h),h.appendChild(d),h.appendChild(f),h.appendChild(p)},e.createMobileBannerAd=function(e){var t=this,n=Z[this.currentIdx],i=n.url,a=n.buttonName,r=n.title,s=n.description,o=document.createElement("div");o.id="mock-banner-ads",o.style.width="100%",o.style.height=e+"px",o.style.bottom="var(--sab)",o.style.display="block",o.style.position="absolute",o.style.opacity=this.currentOpacity;var c=document.createElement("div");c.id="mock-banner-ads-display-area",c.style.background="#ffffff center center/auto no-repeat",c.style.display="block",c.style.alignContent="center";var u=document.createElement("div");u.id="mock-banner-ads-content",u.style.boxSizing="border-box",u.style.flexDirection="row",u.style.display="flex",u.style.position="relative",u.style.alignItems="stretch",u.style.justifyContent="space-between";var l=document.createElement("div");l.id="mock-banner-ads-avatar",l.style.width=e+"px",l.style.minWidth=e+"px",l.style.height=e+"px",l.style.display="flex",l.style.flexDirection="column",l.style.position="relative",l.style.background="url("+i+") center center/contain no-repeat";var h=document.createElement("div");h.id="mock-banner-ads-right-content",h.style.width="100%",h.style.paddingLeft="10px",h.style.display="flex",h.style.flexDirection="row",h.style.position="relative",h.style.color="#000",h.style.wordWrap="break-word",h.style.textAlign="left",h.style.alignContent="center",h.style.alignItems="center",h.style.fontSize="12px",h.style.fontFamily="Helvetica, Arial, sans-serif, Roboto, Helvetica, Arial, sans-serif",l.style.boxSizing="border-box";var d=document.createElement("div");d.style.flexDirection="column",d.style.display="flex",d.style.justifyContent="center",d.style.flexShrink="1",d.style.flexGrow="1",d.style.flexBasis="0",d.style.boxSizing="border-box",d.style.minWidth="0",d.innerHTML="\n            <div id='banner-content-text1' style=\"font-weight:600;line-height: 1.3333;font-size: .9375rem;text-overflow: ellipsis;-webkit-line-clamp: 1;overflow: hidden;display: -webkit-box;-webkit-box-orient: vertical;\">"+r+"</div>\n            <div id='banner-content-text2' style=\"font-weight:400;line-height: 1.2308;font-size: .8125rem;text-overflow: ellipsis;-webkit-line-clamp: 1;overflow: hidden;display: -webkit-box;-webkit-box-orient: vertical;\">"+s+"</div>";var f=document.createElement("button");f.id="banner-content-button",f.type="button",f.style.height="100%",f.style.fontWeight="600",f.style.backgroundColor="#3963fc",f.style.border="none",f.style.color="white",f.style.textAlign="center",f.style.display="inline-block",f.style.cursor="pointer",f.style.marginLeft="10px",f.style.flexShrink="1",f.style.boxSizing="border-box",f.style.paddingRight="7px",f.style.paddingLeft="7px",f.innerHTML=a,f.onclick=function(){"0.2"===t.currentOpacity?o.style.opacity="1":o.style.opacity="0.2",t.currentOpacity=o.style.opacity},document.body.appendChild(o),o.appendChild(c),c.appendChild(u),u.appendChild(l),u.appendChild(h),h.appendChild(d),h.appendChild(f)},e.hideBannerAdAsync=function(){var e=(0,i.Z)(r().mark((function e(){var t;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=document.getElementById("mock-banner-ads")){e.next=3;break}return e.abrupt("return");case 3:t.remove();case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),e}();U.currentIdx=-1,U.currentOpacity="1";var H={LOADED:"loaded",DISPLAYED:"displayed"},W=function(e){return e.IDLE="idle",e.LOADING="loading",e.FILLED="filled",e.SHOWING="showing",e}(W||{}),z=W,Y=function(e){return e.REWARDED="rewarded",e.PRE_ROLL="pre-roll",e.INTERSTITIAL="interstitial",e.BANNER="banner",e}(Y||{}),V=Y,K=n(643),j=function(e){function t(t,n){var i;return(i=e.call(this,n)||this).code=void 0,i.code=t,i.message=n,i}return(0,p.Z)(t,e),t}((0,K.Z)(Error)),X=function(e){this.type=void 0,this.status=void 0,this.type=e,this.status=z.IDLE};function J(e,t){var n="undefined"!==typeof k()&&O()(e)||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){var n;if(!e)return;if("string"===typeof e)return q(e,t);var i=w()(n=Object.prototype.toString.call(e)).call(n,8,-1);"Object"===i&&e.constructor&&(i=e.constructor.name);if("Map"===i||"Set"===i)return x()(e);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return q(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var i=0;return function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function q(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}GameCore.Ads={Types:V,Status:z,Events:H,AdError:j,AdInstance:X};var Q=function(e){function t(){for(var t,n,i=arguments.length,a=new Array(i),r=0;r<i;r++)a[r]=arguments[r];return(n=e.call.apply(e,L()(t=[this]).call(t,a))||this).events=void 0,n.enabled=void 0,n.config=void 0,n.lastInterAdShownTime=void 0,n.lastInterAdLoadedTime=void 0,n.lastRewardAdShownTime=void 0,n.interstitial=void 0,n.rewardedVideo=void 0,n.preRoll=void 0,n.fallbackInterstitial=void 0,n.fallbackRewardedVideo=void 0,n.fallbackPreRoll=void 0,n.safeAreaBottom=void 0,n.showingBannerAd=void 0,n.reloadBannerAdIntervals=void 0,n.bannerAdConfigs=void 0,n.isHaveBannerAdOptions=void 0,n.isFallbackReady=void 0,n.isFallbackInitialized=void 0,n.isBannerAdsShown=void 0,n.adInProcessFlag=void 0,n}(0,p.Z)(t,e);var a=t.prototype;return a.init=function(){this.events=new Phaser.Events.EventEmitter,this.safeAreaBottom=0,this.lastInterAdShownTime=0,this.lastInterAdLoadedTime=0,this.lastRewardAdShownTime=0,this.showingBannerAd={},this.reloadBannerAdIntervals={},this.bannerAdConfigs=[],this.isHaveBannerAdOptions=!0,this.isFallbackReady=!1,this.isFallbackInitialized=!1,this.isBannerAdsShown=!1},a.calculateSafeAreaBottom=function(){try{if(!this.config.calculateSafeAreaBottom)return;this.safeAreaBottom=B()(getComputedStyle(document.documentElement).getPropertyValue("--sab")),isNaN(this.safeAreaBottom)&&(this.safeAreaBottom=0)}catch(e){this.safeAreaBottom=0}},a.configure=function(e,t){this.enabled=t.enabled,this.config=t,this.setAdInstance(e),this.setBannerAdConfigStatus(),this.calculateSafeAreaBottom()},a.setBannerAdConfigStatus=function(){for(var e,t=this.config.bannerAdOptions,n=GameCore.Utils.Device.isDesktop(),i=J(t);!(e=i()).done;){var a=e.value,r=a.platform,s="ALL"==r||"DESKTOP"==r&&n||"MOBILE"==r&&!n;this.bannerAdConfigs.push({config:a,canShow:s}),s&&(this.isHaveBannerAdOptions=!0)}},a.setAdInstance=function(e){var t=this.config,n=t.rewardAdOptions,i=t.interstitialAdOptions;this.interstitial=new e(V.INTERSTITIAL,i.pID),this.rewardedVideo=new e(V.REWARDED,n.pID),this.preRoll=new e(V.PRE_ROLL,i.pID)},a.setFallbackAdInstance=function(e){var t=this.config,n=t.rewardAdOptions,i=t.interstitialAdOptions;this.fallbackInterstitial=new e(V.INTERSTITIAL,i.pID),this.fallbackRewardedVideo=new e(V.REWARDED,n.pID),this.fallbackPreRoll=new e(V.PRE_ROLL,i.pID)},a.preloadInterstitialAdAsync=function(){var e=(0,i.Z)(r().mark((function e(){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.preloadAdAsync(V.INTERSTITIAL);case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),a.showInterstitialAdAsync=function(){var e=(0,i.Z)(r().mark((function e(){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.canbeShowInterstitialAdByTime()){e.next=2;break}throw new j("INTERSTITIAL_AD_CAN_NOT_SHOW","Can't show interstitial ad");case 2:return e.next=4,this.showAdAsync(V.INTERSTITIAL);case 4:this.lastInterAdShownTime=window.performance.now()/1e3;case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),a.preloadPreRollAdAsync=function(){var e=(0,i.Z)(r().mark((function e(){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.preloadAdAsync(V.PRE_ROLL);case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),a.showPreRollAdAsync=function(){var e=(0,i.Z)(r().mark((function e(){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.showAdAsync(V.PRE_ROLL);case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),a.preloadRewardedVideoAsync=function(){var e=(0,i.Z)(r().mark((function e(){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.preloadAdAsync(V.REWARDED);case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),a.showRewardedVideoAsync=function(){var e=(0,i.Z)(r().mark((function e(){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.canbeShowRewardAd()){e.next=2;break}throw new j("REWARDED_VIDEO_CAN_NOT_SHOW","Can't show rewarded video");case 2:return e.next=4,this.showAdAsync(V.REWARDED);case 4:this.lastRewardAdShownTime=window.performance.now()/1e3;case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),a.getRemainingRewardTime=function(){var e=window.performance.now()/1e3,t=this.config.rewardAdOptions.secondsBetweenAds,n=e-this.lastRewardAdShownTime;return n<t?t-n:0},a.preloadAdAsync=function(){var e=(0,i.Z)(r().mark((function e(t){var n,i;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.enabled){e.next=2;break}throw new j("ADS_NOT_ENABLED","Ads is't enabled");case 2:return e.next=4,this.preloadMainAdService(t);case 4:if(!0!==(n=e.sent)){e.next=7;break}return e.abrupt("return");case 7:if(this.isFallbackReady){e.next=9;break}throw n;case 9:return e.next=11,this.preloadFallbackAdService(t);case 11:if(!0!==(i=e.sent)){e.next=14;break}return e.abrupt("return");case 14:throw i;case 15:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),a.preloadMainAdService=function(e){var t=this;return new(o())((function(n){var i=!1;t.preloadAdInstanceAsync(e,!1).then((function(){i=!0})).catch((function(e){t.isFallbackReady||t.initFallbackAdsService().catch((function(){t.isFallbackReady=!1})),i=e})).finally((function(){n(i)}))}))},a.preloadFallbackAdService=function(e){var t=this;return new(o())((function(n){var i=!1;t.isFallbackReady||n(new j("FALLBACK_NOT_READY","Fallback ads not ready")),t.preloadAdInstanceAsync(e,!0).then((function(){i=!0})).catch((function(e){i=e})).finally((function(){n(i)}))}))},a.preloadAdInstanceAsync=function(){var e=(0,i.Z)(r().mark((function e(t,n){var i,a=this;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===n&&(n=!1),null!==(i=this.getAdInstanceByType(t,n))){e.next=4;break}throw new j("AD_INSTANCE_NOT_INITIATED","The instance ads not yet initiated");case 4:if(i.getStatus()!==z.LOADING){e.next=8;break}return e.next=7,new(o())((function(e){a.events.once(H.LOADED,e)}));case 7:return e.abrupt("return");case 8:return t!==V.INTERSTITIAL&&t!==V.PRE_ROLL||(this.lastInterAdLoadedTime=window.performance.now()/1e3),e.next=11,i.loadAsync();case 11:this.events.emit(H.LOADED,t);case 12:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}(),a.showAdAsync=function(){var e=(0,i.Z)(r().mark((function e(t){var n,i;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.enabled){e.next=2;break}throw new j("ADS_NOT_ENABLED","Ads is't enabled");case 2:return e.next=4,this.showMainAdService(t);case 4:if(!0!==(n=e.sent)){e.next=7;break}return e.abrupt("return");case 7:if(!this.isUserCancelledAdError(n)&&this.isAdFallbackReadyToShow(t)){e.next=9;break}throw n;case 9:return e.next=11,this.showFallbackAdService(t);case 11:if(!0!==(i=e.sent)){e.next=14;break}return e.abrupt("return");case 14:throw i;case 15:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),a.showMainAdService=function(e){var t=this;return new(o())((function(n){var i=!1;t.showAdInstanceAsync(e,!1).then((function(){i=!0})).catch((function(e){i=e,t.isUserCancelledAdError(e)||t.isFallbackReady||t.initFallbackAdsService().catch((function(){t.isFallbackReady=!1}))})).finally((function(){n(i)}))}))},a.showFallbackAdService=function(e){var t=this;return new(o())((function(n){var i=!1;t.isFallbackReady||n(new j("FALLBACK_NOT_READY","Fallback ads not ready")),t.showAdInstanceAsync(e,!0).then((function(){i=!0})).catch((function(e){i=e})).finally((function(){n(i)}))}))},a.showAdInstanceAsync=function(){var e=(0,i.Z)(r().mark((function e(t,n){var i;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===n&&(n=!1),null!==(i=this.getAdInstanceByType(t,n))){e.next=4;break}throw new j("AD_INSTANCE_NOT_INITIATED","The instance ads not yet initiated");case 4:return t!==V.INTERSTITIAL&&t!==V.PRE_ROLL||(this.lastInterAdShownTime=window.performance.now()/1e3),t===V.REWARDED&&(this.lastRewardAdShownTime=window.performance.now()/1e3,this.config.enableRewardVideoResetInterstitial&&(this.lastInterAdShownTime=this.lastRewardAdShownTime)),e.next=8,i.showAsync();case 8:this.events.emit(H.DISPLAYED,t);case 9:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}(),a.getAdStatus=function(e){var t=this.getAdInstanceByType(e);return t?t.getStatus():null},a.getAdInstanceByType=function(e,t){if(void 0===t&&(t=!1),t)switch(e){case V.INTERSTITIAL:return this.fallbackInterstitial;case V.REWARDED:return this.fallbackRewardedVideo;case V.PRE_ROLL:return this.fallbackPreRoll;default:return null}switch(e){case V.INTERSTITIAL:return this.interstitial;case V.REWARDED:return this.rewardedVideo;case V.PRE_ROLL:return this.preRoll;default:return null}},a.canbeShowInterstitialAd=function(){var e=this.canbeLoadInterstitialAdByTime();return e&&(e=this.canbeShowInterstitialAdByTime()),e},a.canbeLoadInterstitialAdByTime=function(){var e=window.performance.now()/1e3,t=this.config.interstitialAdOptions,n=t.secondsFirstTime,i=t.secondsBetweenAds,a=Math.floor(e-this.lastInterAdLoadedTime);return this.lastInterAdLoadedTime>0?a>=i:a>=n},a.canbeShowInterstitialAdByTime=function(){var e=window.performance.now()/1e3,t=this.config.interstitialAdOptions,n=t.secondsFirstTime,i=t.secondsBetweenAds,a=Math.floor(e-this.lastInterAdShownTime);return this.lastInterAdShownTime>0?a>=i:a>=n},a.canbeShowRewardAd=function(){var e=window.performance.now()/1e3,t=this.config.rewardAdOptions,n=t.secondsFirstTime,i=t.secondsBetweenAds,a=Math.floor(e-this.lastRewardAdShownTime);return this.lastRewardAdShownTime>0?a>=i:a>=n},a.getEnabledBannerAds=function(){if(!this.isHaveBannerAdOptions)return[];for(var e,t=[],n=J(this.bannerAdConfigs);!(e=n()).done;){var i=e.value,a=i.config;i.canShow&&t.push(a)}return t},a.disableBannerAds=function(){this.config.bannerAdOptions=[]},a.showBannerAdAsync=function(){var e=(0,i.Z)(r().mark((function e(){var t;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.enabled){e.next=2;break}return e.abrupt("return");case 2:if(!this.isBannerAdsShown){e.next=5;break}return e.next=5,this.hideBannerAdAsync();case 5:if(0!==(t=this.getEnabledBannerAds()).length){e.next=8;break}return e.abrupt("return");case 8:return this.reloadBannerAdIntervals=this.reloadBannerAdIntervals||{},this.loadBannerAdAsync("",t),e.abrupt("return");case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),a.loadBannerAdAsync=function(){var e=(0,i.Z)(r().mark((function e(t,n){var i,a,s=this;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.enabled){e.next=2;break}return e.abrupt("return");case 2:if(i=this.getSceneName(),a=GameCore.Configs.Ads,e.prev=4,"msgames"===a.AdService){e.next=7;break}throw new j("BANNER_ADS_NOT_SUPPORTED","Banner ads not supported");case 7:if(!a.Mockup.Enable){e.next=12;break}return e.next=10,U.loadBannerAdAsync();case 10:e.next=14;break;case 12:return e.next=14,GameSDK.loadBannerAdAsync(t,n);case 14:this.isBannerAdsShown=!0,n.forEach((function(e){var t=e.placementId,n=e.position,r=e.bannerWidth,o=e.bannerHeight;if(t&&""!==t){var c=n+":"+r+"x"+o;s.showingBannerAd[t]=!0,window.game.analytics.showBannerAd(c,i,a.AdService)}})),e.next=23;break;case 18:e.prev=18,e.t0=e.catch(4),this.isBannerAdsShown=!1,n.forEach((function(e){var t=e.position+":"+e.bannerWidth+"x"+e.bannerHeight,n={type:V.BANNER,placement:i,bannerPosition:t,adService:a.AdService};window.game.analytics.showAdFail(n)}));case 23:case"end":return e.stop()}}),e,this,[[4,18]])})));return function(t,n){return e.apply(this,arguments)}}(),a.hideBannerAdAsync=function(){var e=(0,i.Z)(r().mark((function e(){var t;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.enabled){e.next=2;break}return e.abrupt("return");case 2:if(this.isHaveBannerAdOptions){e.next=4;break}return e.abrupt("return");case 4:if(this.isBannerAdsShown=!1,e.prev=5,"msgames"===(t=GameCore.Configs.Ads).AdService){e.next=9;break}throw new j("BANNER_ADS_NOT_SUPPORTED","Banner ads not supported");case 9:if(!t.Mockup.Enable){e.next=14;break}return e.next=12,U.hideBannerAdAsync();case 12:e.next=16;break;case 14:return e.next=16,GameSDK.hideBannerAdAsync();case 16:e.next=21;break;case 18:e.prev=18,e.t0=e.catch(5);case 21:case"end":return e.stop()}}),e,this,[[5,18]])})));return function(){return e.apply(this,arguments)}}(),a.getBannerHeight=function(){if(!this.enabled)return 0;if(!this.isBannerAdsShown)return 0;var e=this.getBottomBannerConfig();if(!e)return 0;var t=e.bannerHeight,n=(void 0===t?0:t)+this.safeAreaBottom+20;if(this.game.world){var i=this.game.world,a=i.getPixelRatio(),r=i.getZoomRatio();return this.game.world.getPhysicPixels(n,a/r)}return n},a.getBottomBannerConfig=function(){var e=this.getEnabledBannerAds();return 0===e.length?null:M()(e).call(e,(function(e){return"bottom"===e.position}))||null},a.getSceneName=function(){try{var e=self.game.globalScene;return this.globalSceneTypeCheck(e)?e.getCurrentScene().scene.getSceneName():"unknown"}catch(t){return"unknown"}},a.globalSceneTypeCheck=function(e){return"getCurrentScene"in e&&"function"===typeof e.getCurrentScene},a.initFallbackAdsService=function(){var e=(0,i.Z)(r().mark((function e(){var t,n;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=GameCore.Configs.Ads,!this.isFallbackInitialized){e.next=3;break}return e.abrupt("return");case 3:return this.isFallbackInitialized=!0,e.next=6,this.getFallbackAdServiceInstance();case 6:n=e.sent,"none"!==t.FallbackService&&null!==n&&(this.isFallbackReady=!0,this.setFallbackAdInstance(n));case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),a.getFallbackAdServiceInstance=function(){var e=(0,i.Z)(r().mark((function e(){var t,i,a;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=GameCore.Configs.Ads.FallbackService,e.next=3,Promise.resolve().then(n.bind(n,606));case 3:if(i=e.sent.default,"google"!==t){e.next=16;break}return e.prev=5,e.next=8,this.initGoogleAdInstanceAsync();case 8:if(null===(a=e.sent)){e.next=11;break}return e.abrupt("return",a);case 11:e.next=16;break;case 13:e.prev=13,e.t0=e.catch(5);case 16:return e.abrupt("return",i);case 17:case"end":return e.stop()}}),e,this,[[5,13]])})));return function(){return e.apply(this,arguments)}}(),a.initGoogleAdInstanceAsync=function(){var e=(0,i.Z)(r().mark((function e(){var t,i,a,s,o,c,u,l,h;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=GameCore.Configs.Ads.AdServiceConfigs.Google){e.next=3;break}return e.abrupt("return",null);case 3:return i=t.DataAdChannel,a=t.DataAdClient,s=t.DataAdHost,o=t.DataAdBreakTest,c=t.DataAdFrequencyHint,u=t.MaxScriptLoadRetryCount,e.next=6,Promise.resolve().then(n.bind(n,607));case 6:if("loaded"!==(l=e.sent.default).initStatus){e.next=9;break}return e.abrupt("return",l);case 9:return h={dataAdClient:a,dataAdChannel:i,dataAdHost:s,dataAdBreakTest:o,dataAdFrequencyHint:c,maxScriptLoadRetryCount:u},e.prev=10,l.setGame(this.game),e.next=14,l.initGoogleAdsAsync(h);case 14:return e.abrupt("return",l);case 17:return e.prev=17,e.t0=e.catch(10),e.abrupt("return",null);case 21:case"end":return e.stop()}}),e,this,[[10,17]])})));return function(){return e.apply(this,arguments)}}(),a.isUserCancelledAdError=function(e){if(e instanceof j&&"USER_INPUT"===e.code)return!0;try{var t=JSON.parse(F()(e));return"code"in t&&"USER_INPUT"===t.code}catch(e){return!1}},a.isAdFallbackReadyToShow=function(e){if(!this.isFallbackReady)return!1;var t=this.getAdInstanceByType(e,!0);return!!t&&t.getStatus()===z.FILLED},a.setAdInProcess=function(e){this.adInProcessFlag=e},a.isAdInProcess=function(){return this.adInProcessFlag},t}(Phaser.Plugins.BasePlugin),$=Q,ee=function(){function e(e,t,n){this.name=void 0,this.color=void 0,this.selfLog=void 0,this.options=void 0,this.name=e,this.color=n||"#FFF",this.options=t,this.selfLog=!0}var t=e.prototype;return t.event=function(e,t,n){this.processEvent(e,t,n),this.selfLog},t.pageview=function(e){var t=this.getPageByKey(e);this.processPageView(t),this.selfLog},t.levelStart=function(e,t,n){this.processLevelStart(e,t,n),this.selfLog},t.levelFail=function(e,t,n){this.processLevelFail(e,t,n),this.selfLog},t.levelRescue=function(e,t,n){this.processLevelRescue(e,t,n),this.selfLog},t.levelComplete=function(e,t,n){this.processLevelComplete(e,t,n),this.selfLog},t.loadPreRollAd=function(e,t){this.processLoadPreRollAd(e,t),this.selfLog},t.showPreRollAd=function(e,t){this.processShowPreRollAd(e,t),this.selfLog},t.loadInterstitialAd=function(e,t){this.processLoadInterstitialAd(e,t),this.selfLog},t.showInterstitialAd=function(e,t){this.processShowInterstitialAd(e,t),this.selfLog},t.loadRewardedVideoAd=function(e,t){this.processLoadRewardedVideoAd(e,t),this.selfLog},t.showRewardedVideoAd=function(e,t){this.processShowRewardedVideoAd(e,t),this.selfLog},t.showBannerAd=function(e,t,n){this.processShowBannerAd(e,t,n),this.selfLog},t.receiveReward=function(e){this.processReceiveReward(e),this.selfLog},t.loadAdFail=function(e){this.processLoadAdFail(e),this.selfLog},t.showAdFail=function(e){this.processShowAdFail(e),this.selfLog},t.getPageByKey=function(e){var t=e.replace(/_/g,"-");return t=t.toLowerCase()},t.processLevelStart=function(e,t,n){},t.processLevelFail=function(e,t,n){},t.processLevelRescue=function(e,t,n){},t.processLevelComplete=function(e,t,n){},t.processLoadInterstitialAd=function(e,t){},t.processShowInterstitialAd=function(e,t){},t.processLoadPreRollAd=function(e,t){},t.processShowPreRollAd=function(e,t){},t.processLoadRewardedVideoAd=function(e,t){},t.processShowRewardedVideoAd=function(e,t){},t.processShowBannerAd=function(e,t,n){},t.processReceiveReward=function(e){},t.processLoadAdFail=function(e){},t.processShowAdFail=function(e){},e}();GameCore.Analytics={BaseAnalytics:ee};var te=function(e){function t(){for(var t,n,i=arguments.length,a=new Array(i),r=0;r<i;r++)a[r]=arguments[r];return(n=e.call.apply(e,L()(t=[this]).call(t,a))||this).analytics=void 0,n.pageview=function(e){n.isActive()&&n.analytics.forEach((function(t){t.pageview(e)}))},n}(0,p.Z)(t,e);var n=t.prototype;return n.init=function(){this.analytics=[]},n.add=function(e){this.analytics.push(e)},n.event=function(e,t,n){this.isActive()&&this.analytics.forEach((function(i){i.event(e,t,n)}))},n.levelStart=function(e,t,n){this.isActive()&&this.analytics.forEach((function(i){i.levelStart(e,t,n)}))},n.levelRescue=function(e,t,n){this.isActive()&&this.analytics.forEach((function(i){i.levelRescue(e,t,n)}))},n.levelFail=function(e,t,n){this.isActive()&&this.analytics.forEach((function(i){i.levelFail(e,t,n)}))},n.levelComplete=function(e,t,n){this.isActive()&&this.analytics.forEach((function(i){i.levelComplete(e,t,n)}))},n.loadPreRollAd=function(e,t){this.isActive()&&this.analytics.forEach((function(n){n.loadPreRollAd(e,t)}))},n.showPreRollAd=function(e,t){this.isActive()&&this.analytics.forEach((function(n){n.showPreRollAd(e,t)}))},n.loadInterstitialAd=function(e,t){this.isActive()&&this.analytics.forEach((function(n){n.loadInterstitialAd(e,t)}))},n.showInterstitialAd=function(e,t){this.isActive()&&this.analytics.forEach((function(n){n.showInterstitialAd(e,t)}))},n.loadRewardedVideoAd=function(e,t){this.isActive()&&this.analytics.forEach((function(n){n.loadRewardedVideoAd(e,t)}))},n.showRewardedVideoAd=function(e,t){this.isActive()&&this.analytics.forEach((function(n){n.showRewardedVideoAd(e,t)}))},n.showBannerAd=function(e,t,n){this.isActive()&&this.analytics.forEach((function(i){i.showBannerAd(e,t,n)}))},n.receiveReward=function(e){this.isActive()&&this.analytics.forEach((function(t){t.receiveReward(e)}))},n.loadAdFail=function(e){this.isActive()&&this.analytics.forEach((function(t){t.loadAdFail(e)}))},n.showAdFail=function(e){this.isActive()&&this.analytics.forEach((function(t){t.showAdFail(e)}))},n.isActive=function(){return this.analytics.length>=1},t}(Phaser.Plugins.BasePlugin),ne=te,ie=function(){function e(e,t){var n=this;this.name=void 0,this.game=void 0,this.isSprite=void 0,this.audio=void 0,this.markers=void 0,this.volume=void 0,this.isMusicEnabled=function(){return!!n.game.player.getPlayerSetting("music")},this.isSoundEnabled=function(){return!!n.game.player.getPlayerSetting("sound")},this.name=t,this.game=e,this.markers={},this.isSprite=!1,this.isSprite||(this.audio=this.game.sound.add(this.name))}var t=e.prototype;return t.play=function(e,t){var n,i,a,r=(0,f.Z)({volume:this.volume},t||{});if(r.volume!==this.volume&&(r.volume*=this.volume),!this.isSprite)return(null==(i=this.audio)?void 0:i.seek)>0?void this.audio.resume():void(null==(a=this.audio)||a.play(e,r));this.createMaker(e),null==(n=this.markers[e])||n.play(e,r)},t.pause=function(e){var t,n;this.isSprite?null==(t=this.markers[e])||t.pause():null==(n=this.audio)||n.pause()},t.stop=function(e){var t,n;this.isSprite?null==(t=this.markers[e])||t.stop():null==(n=this.audio)||n.stop()},t.setVolume=function(e){this.volume=e},t.createMaker=function(e){if(!this.markers[e])try{this.markers[e]=this.game.sound.addAudioSprite(this.name)}catch(t){}},e}(),ae=n(92),re=n.n(ae),se=n(29),oe=n.n(se),ce=function(){function e(e){var t=this;this.game=void 0,this.audios=void 0,this.volume=void 0,this.soundKeys=void 0,this.isMusicEnabled=function(){return!!t.game.player.getPlayerSetting("music")},this.isSoundEnabled=function(){return!!t.game.player.getPlayerSetting("sound")},this.game=e,this.audios=new(re()),this.soundKeys=new(re())}var t=e.prototype;return t.addSoundKeys=function(e){var t=this;oe()(e).forEach((function(n){var i=e[n];"string"===typeof i&&t.soundKeys.set(n,i)}))},t.clearSoundKeys=function(){this.soundKeys.clear()},t.play=function(e,t){var n=this,i=(0,f.Z)({volume:this.volume},t||{});i.volume!==this.volume&&(i.volume*=this.volume);var a=this.audios.get(e);if(!a&&this.game.cache.audio.exists(e)){var r=this.game.sound.add(e);this.audios.set(e,r),a=r}if(a)a.play(void 0,i);else{var s=this.soundKeys.get(e);if(s)try{this.game.globalScene.load.audio(e,s),this.game.globalScene.load.on(Phaser.Loader.Events.FILE_KEY_COMPLETE+"audio-"+e,(function(){var t=n.game.sound.add(e);n.audios.set(e,t),t.play(void 0,i)})),this.game.globalScene.load.start()}catch(o){}}},t.pauseAll=function(){this.audios.forEach((function(e){e.pause()}))},t.resumeAll=function(){this.audios.forEach((function(e){e.resume()}))},t.stopAll=function(){this.audios.forEach((function(e){e.stop()}))},t.pause=function(e){var t=this.audios.get(e);t&&t.pause()},t.stop=function(e){var t=this.audios.get(e);t&&t.stop()},t.setVolume=function(e){this.volume=e},e}(),ue=ce,le=function(e){function t(){for(var t,n,i=arguments.length,a=new Array(i),r=0;r<i;r++)a[r]=arguments[r];return(n=e.call.apply(e,L()(t=[this]).call(t,a))||this).soundManager=void 0,n.musicManager=void 0,n.isMuteAll=void 0,n.initMusic=function(e){n.musicManager=new ie(n.game,e),n.setMusicVolume(1)},n.initSound=function(){n.soundManager=new ue(n.game),n.setSoundVolume(1)},n}(0,p.Z)(t,e);var n=t.prototype;return n.init=function(t){e.prototype.init.call(this,t),this.initSound()},n.importSoundEffectKeys=function(e){this.soundManager.addSoundKeys(e)},n.playSound=function(e,t){try{if(!this.soundManager||this.isMuteAll)return;if(!this.soundManager.isSoundEnabled())return;this.soundManager.play(e,t)}catch(n){}},n.stopSound=function(e){try{this.soundManager.stop(e)}catch(t){}},n.playMusic=function(e){void 0===e&&(e={});try{if(!this.musicManager||this.isMuteAll)return;if(!this.musicManager.isMusicEnabled())return;this.musicManager.play("",(0,f.Z)({loop:!0,volume:.2},e))}catch(t){}},n.pauseMusic=function(){try{if(!this.musicManager)return;this.musicManager.pause("")}catch(e){}},n.stopMusic=function(){try{if(!this.musicManager)return;this.musicManager.stop("")}catch(e){}},n.pauseAllSounds=function(){try{if(!this.soundManager)return;this.soundManager.pauseAll()}catch(e){}},n.resumeAllSounds=function(){try{if(!this.soundManager)return;this.soundManager.resumeAll()}catch(e){}},n.setSoundVolume=function(e){try{if(!this.soundManager)return;this.soundManager.setVolume(e)}catch(t){}},n.setMusicVolume=function(e){try{if(!this.musicManager)return;this.musicManager.setVolume(e)}catch(t){}},n.muteAll=function(){this.isMuteAll=!0,this.game.sound.mute=!0},n.unmuteAll=function(){this.isMuteAll=!1,this.game.sound.mute=!1},t}(Phaser.Plugins.BasePlugin),he=le,de=n(638),fe="AUTH_TOKEN_REQUEST",pe="AUTH_TOKEN_RECEIVED",ge=function(e){function t(t,n){var i;return(i=e.call(this,t)||this).payload=void 0,i.name="RequestTokenFail",i.message=t||"Request token fail",i.payload=n||{},i}return(0,p.Z)(t,e),t}((0,K.Z)(Error)),me=n(651),ve="auth",ye=(0,me.P1)([function(e){return e[ve].token}],(function(e){return e})),be=(0,me.P1)([function(e){return e[ve].isRequesting}],(function(e){return e})),Ae=function(e){return{type:pe,payload:{token:e}}},Ee=function(e){function t(){return e.apply(this,arguments)||this}(0,p.Z)(t,e);var n=t.prototype;return n.requestToken=function(){var e=(0,i.Z)(r().mark((function e(){var t;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.game.storage,e.next=3,t.dispatch(function(){var e=(0,i.Z)(r().mark((function e(t,n){var i,a,s,o;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,i=window.game.facebook,a=n(),s=ye(a),!be(a)&&""===s){e.next=7;break}return e.abrupt("return");case 7:return t({type:fe,payload:{}}),e.next=10,i.getPlayerToken();case 10:o=e.sent,t(Ae(o)),e.next=25;break;case 14:if(e.prev=14,e.t0=e.catch(0),!(e.t0 instanceof Object&&GameCore.Utils.Object.hasOwn(e.t0,"code"))){e.next=19;break}if("PENDING_REQUEST"!==e.t0.code){e.next=19;break}return e.abrupt("return");case 19:if(t(Ae("")),!(e.t0 instanceof Object&&GameCore.Utils.Object.hasOwn(e.t0,"message"))){e.next=24;break}if("string"!==typeof e.t0.message){e.next=24;break}return(0,h.tO)(new Error(e.t0.message)),e.abrupt("return");case 24:(0,h.tO)(new ge);case 25:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(t,n){return e.apply(this,arguments)}}());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.getToken=function(){return ye(this.state)},(0,de.Z)(t,[{key:"state",get:function(){return this.game.storage.getState()}}]),t}(Phaser.Plugins.BasePlugin),Se=Ee,Te=function(e,t){void 0===t&&(t=1);var n=new Image;n.onload=function(){var e,n;e=this.width*t,n=this.height*t,Math.floor(n/2),Math.floor(e/2)},n.src=e},Ce=function(e){function t(){for(var t,n,i=arguments.length,a=new Array(i),r=0;r<i;r++)a[r]=arguments[r];return(n=e.call.apply(e,L()(t=[this]).call(t,a))||this).width=void 0,n.height=void 0,n.renderOptions=void 0,n.canvas=void 0,n}(0,p.Z)(t,e);var n=t.prototype;return n.preload=function(e){var t=this,n=oe()(e);n.length<1||(n.forEach((function(n){t.scene.load.image(n,e[n])})),this.scene.load.start())},n.capture=function(){var e=(0,i.Z)(r().mark((function e(t){var n,i,a;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.width,i=t.height,a=t.renderOptions,this.width=n,this.height=i,this.renderOptions=a,this.createCanvas(),e.next=7,this.loadImages();case 7:return this.drawObjects(),e.abrupt("return",this.snapshotFrame());case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.createCanvas=function(){this.canvas||(this.canvas=this.game.textures.createCanvas("FrameCaptureCanvas")),this.canvas.clear(),this.canvas.setSize(this.width,this.height)},n.loadImages=function(){var e=[];for(var t in this.renderOptions){var n=this.renderOptions[t],i=n.name,a=n.image,r=n.fallbackWithImage;if(a)if(this.scene.textures.get(i).key!==i&&""!==i){var s=this.loadImage(i,a,r);e.push(s)}}return this.scene.load.start(),o().all(e)},n.loadImage=function(e,t,n){var i=this;return this.scene.load.image(e,t),new(o())((function(t,a){var r=Phaser.Loader.Events.FILE_KEY_COMPLETE+"image-"+e,s=Phaser.Loader.Events.FILE_LOAD_ERROR,o=function e(n){i.scene.load.off(r,e),i.scene.load.off(s,c),t()},c=function c(u){if(u.key===e)if(i.scene.load.off(r,o),i.scene.load.off(s,c),n)t();else{var l=new Error("Load image failed");a(l)}};i.scene.load.on(r,o),i.scene.load.on(s,c)}))},n.drawObjects=function(){for(var e in this.renderOptions){var t=this.renderOptions[e];switch(t.type){case"text":this.drawText(t);break;case"image":this.drawImage(t)}}},n.drawText=function(e){var t=this.canvas.context,n=e.x,i=e.y,a=e.font,r=e.text,s=e.fillStyle,o=e.lineWidth,c=e.textAlign;t.font=a+' "Be Vietnam Pro",nunito,-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Oxygen,Ubuntu,Cantarell,"Fira Sans","Droid Sans","Helvetica Neue",sans-serif',t.fillStyle=s||"#ffffff",o&&(t.lineWidth=o),c&&(t.textAlign=c),t.fillText(r,n,i)},n.drawImage=function(e){var t=this.canvas.context,n=e.x,i=e.y,a=e.name,r=e.frame,s=e.width,o=e.height,c=e.fallbackWithImage,u=e.flipX,l=e.flipY,h=this.scene.textures.get(a),d=h.getSourceImage(r);"__MISSING"===h.key&&c&&(d=(h=this.scene.textures.get(c)).getSourceImage());var f=1,p=1,g=n,m=i;u?(f=-1,g=n+s):(f=1,g=n),l?(p=-1,m=i+o):(p=1,m=i),t.save(),t.translate(g,m),t.scale(f,p),t.drawImage(d,0,0,s,o),t.restore()},n.snapshotFrame=function(){var e=this.canvas.getCanvas().toDataURL("image/jpeg",.85);return GameCore.Utils.Valid.isDebugger()&&Te(e),e},t}(Phaser.Plugins.ScenePlugin),we=Ce,Ie=n(20),xe=n.n(Ie),Pe=function(e){function t(t,n,i){var a;return(a=e.call(this)||this).game=void 0,a.options=void 0,a.performance=void 0,a.isRunning=!1,a.checkTimer=void 0,a.fpsHistory=void 0,a.start=function(){if(!a.isRunning){a.isRunning=!0;var e=a.options.checkInterval;a.checkTimer=e,a.fpsHistory=[],a.game.events.on(Phaser.Core.Events.POST_STEP,a.onPostStep)}},a.stop=function(){a.isRunning&&(a.isRunning=!1,a.game.events.off(Phaser.Core.Events.POST_STEP,a.onPostStep),a.options.onlyUpdateWhenSwitchScene&&a.checkFps())},a.onPostStep=function(e,t){if(a.checkTimer-=t,!(a.checkTimer>0)){var n=a.options,i=n.checkInterval,r=n.onlyUpdateWhenSwitchScene;a.checkTimer+=i,a.fpsHistory.push(a.game.loop.actualFps),!1===r&&a.fpsHistory.length>=5&&a.checkFps()}},a.game=t,a.options=i,a.performance=n,a}(0,p.Z)(t,e);var n=t.prototype;return n.checkFps=function(){if(0!==this.fpsHistory.length){var e=this.options.autoUpgradeQuality,t=!1;this.isLowFps()?t=this.performance.downgradeGraphicsQuality():e&&this.isHighFps()&&(t=this.performance.upgradeGraphicsQuality()),t&&(this.fpsHistory=[])}},n.getFpsMedian=function(){return Phaser.Math.Median(this.fpsHistory)},n.isLowFps=function(){return this.getFpsMedian()<this.options.fpsThreshold},n.isHighFps=function(){return this.getFpsMedian()>1.2*this.options.fpsThreshold},t}(Phaser.Events.EventEmitter),ke=Pe,_e=["pixelRatio","minQuality","maxQuality","qualityAdjustStep","trackingSceneKeys"],Oe=function(e){function t(){for(var t,n,i=arguments.length,a=new Array(i),r=0;r<i;r++)a[r]=arguments[r];return(n=e.call.apply(e,L()(t=[this]).call(t,a))||this).fpsTracker=void 0,n.pixelRatio=void 0,n.minQuality=void 0,n.maxQuality=void 0,n.qualityAdjustStep=void 0,n.trackingSceneKeys=[],n.trackingScene=function(e){var t;if(xe()(t=n.trackingSceneKeys).call(t,e)){var i=n.game.scene.getScene(e);i.events.once(Phaser.Scenes.Events.UPDATE,n.fpsTracker.start),i.events.once(Phaser.Scenes.Events.SLEEP,n.fpsTracker.stop)}},n}(0,p.Z)(t,e);var n=t.prototype;return n.configure=function(e){var t=e.pixelRatio,n=e.minQuality,i=e.maxQuality,a=e.qualityAdjustStep,r=e.trackingSceneKeys,s=(0,d.Z)(e,_e);this.pixelRatio=t,this.minQuality=n,this.maxQuality=i,this.qualityAdjustStep=a,this.trackingSceneKeys=r,this.fpsTracker=new ke(this.game,this,s)},n.active=function(){this.game.events.on(Phaser.Scenes.Events.WAKE,this.trackingScene),this.game.events.on(Phaser.Scenes.Events.START,this.trackingScene)},n.downgradeGraphicsQuality=function(){var e=this.pixelRatio;if(e<=this.minQuality)return!1;var t=+(e-this.qualityAdjustStep).toFixed(2);return!(t<this.minQuality)&&(this.pixelRatio=t,this.game.world.resize(this.pixelRatio),!0)},n.upgradeGraphicsQuality=function(){var e=this.pixelRatio;if(e>=this.maxQuality)return!1;var t=+(e+this.qualityAdjustStep).toFixed(2);return!(t>this.maxQuality)&&(this.pixelRatio=t,this.game.world.resize(this.pixelRatio),!0)},t}(Phaser.Plugins.BasePlugin),Re=Oe,Le={sound:!0,music:!0,vibrate:!1,language:"",language2:"",theme:GameCore.Configs.DefaultTheme,tapToMove:!0,autoHints:!0,autoMoveToFoundation:!0,highlightLowCards:!0,backgroundIdx:0,cardFaceIdx:0,cardBackIdx:0,backgroundDesktopIdx:0,cardFaceDesktopIdx:0,cardBackDesktopIdx:0,modifiedOptions:[]},De=n(21),Be=n.n(De),Ne=n(4),Me=n.n(Ne),Ge=Le.sound,Fe=Le.music,Ze=Le.vibrate,Ue=Le.language,He=Le.language2,We=Le.theme,ze=Le.tapToMove,Ye=Le.autoHints,Ve=Le.autoMoveToFoundation,Ke=Le.highlightLowCards,je=Le.backgroundIdx,Xe=Le.cardFaceIdx,Je=Le.cardBackIdx,qe=Le.backgroundDesktopIdx,Qe=Le.cardFaceDesktopIdx,$e=Le.cardBackDesktopIdx,et=Le.modifiedOptions,tt=function(){function e(e){this.sound=void 0,this.music=void 0,this.vibrate=void 0,this.language=void 0,this.language2=void 0,this.theme=void 0,this.tapToMove=void 0,this.autoHints=void 0,this.autoMoveToFoundation=void 0,this.highlightLowCards=void 0,this.backgroundIdx=void 0,this.cardFaceIdx=void 0,this.cardBackIdx=void 0,this.backgroundDesktopIdx=void 0,this.cardFaceDesktopIdx=void 0,this.cardBackDesktopIdx=void 0,this.modifiedOptions=void 0;var t=e||{},n=t.sound,i=t.music,a=t.vibrate,r=t.language,s=t.language2,o=t.theme,c=t.tapToMove,u=t.autoHints,l=t.autoMoveToFoundation,h=t.highlightLowCards,d=t.backgroundIdx,f=t.cardFaceIdx,p=t.cardBackIdx,g=t.backgroundDesktopIdx,m=t.cardFaceDesktopIdx,v=t.cardBackDesktopIdx,y=t.modifiedOptions;this.sound=GameCore.Utils.Valid.isBoolean(n)?n:Ge,this.music=GameCore.Utils.Valid.isBoolean(i)?i:Fe,this.vibrate=GameCore.Utils.Valid.isBoolean(a)?a:Ze,this.language=GameCore.Utils.Valid.isString(r)?r:Ue,this.language2=GameCore.Utils.Valid.isString(s)?s:He,this.theme=GameCore.Utils.Valid.isString(o)?o:We,this.tapToMove=GameCore.Utils.Valid.isBoolean(c)?c:ze,this.autoHints=GameCore.Utils.Valid.isBoolean(u)?u:Ye,this.autoMoveToFoundation=GameCore.Utils.Valid.isBoolean(l)?l:Ve,this.highlightLowCards=GameCore.Utils.Valid.isBoolean(h)?h:Ke,this.backgroundIdx=GameCore.Utils.Valid.isNumber(d)?d:je,this.cardFaceIdx=GameCore.Utils.Valid.isNumber(f)?f:Xe,this.cardBackIdx=GameCore.Utils.Valid.isNumber(p)?p:Je,this.backgroundDesktopIdx=GameCore.Utils.Valid.isNumber(g)?g:qe,this.cardFaceDesktopIdx=GameCore.Utils.Valid.isNumber(m)?m:Qe,this.cardBackDesktopIdx=GameCore.Utils.Valid.isNumber(v)?v:$e,this.modifiedOptions=Array.isArray(y)?y:et}return e.prototype.toObject=function(){return{sound:this.sound,music:this.music,vibrate:this.vibrate,language:this.language,language2:this.language2,theme:this.theme,tapToMove:this.tapToMove,autoHints:this.autoHints,autoMoveToFoundation:this.autoMoveToFoundation,highlightLowCards:this.highlightLowCards,backgroundIdx:this.backgroundIdx,cardFaceIdx:this.cardFaceIdx,cardBackIdx:this.cardBackIdx,backgroundDesktopIdx:this.backgroundDesktopIdx,cardFaceDesktopIdx:this.cardFaceDesktopIdx,cardBackDesktopIdx:this.cardBackDesktopIdx,modifiedOptions:this.modifiedOptions}},e}(),nt=tt,it=GameCore.Utils,at=it.Valid,rt=it.Object,st=function(){function e(e){this.score=void 0,this.settings=void 0,this.gameData=void 0,this.userGuideDisplays=void 0,this.setupDefaultData(),this.updateScore(e),this.updateSettings(e),this.updateGameData(e),this.updateUserGuideDisplays(e)}var t=e.prototype;return t.setupDefaultData=function(){this.score=0,this.settings=(0,f.Z)({},Le),this.gameData={coins:0,diamond:0,lastReceiveGift:0,lastCallSwitchGame:0,firstLoginDate:0,dailyRewarded:{lastRewarded:0,logDays:[]},dailyTasks:{startedTime:0,logTasks:{}},dailyPlayTime:{totalEngagementTime:0,currentDate:0},game_stats:{},tournaments:[],current_board:{}},this.userGuideDisplays=0},t.updateScore=function(e){var t=e.score;!1!==at.isNumber(t)&&(this.score=t)},t.updateSettings=function(e){var t=e.settings;if(!1!==at.isObject(t)){var n=new nt(t).toObject();this.settings=n}},t.updateGameData=function(e){var t=e.gameData;if(!1!==at.isObject(t)){if(rt.hasOwn(t,"coins")&&at.isNumber(t.coins)&&(this.gameData.coins=t.coins),rt.hasOwn(t,"diamond")&&at.isNumber(t.diamond)&&(this.gameData.diamond=t.diamond),rt.hasOwn(t,"lastReceiveGift")&&at.isNumber(t.lastReceiveGift)&&(this.gameData.lastReceiveGift=t.lastReceiveGift),rt.hasOwn(t,"lastCallSwitchGame")&&at.isNumber(t.lastCallSwitchGame)&&(this.gameData.lastCallSwitchGame=t.lastCallSwitchGame),rt.hasOwn(t,"dailyRewarded")&&at.isObject(t.dailyRewarded)){var n=t.dailyRewarded;rt.hasOwn(n,"lastRewarded")&&at.isNumber(n.lastRewarded)&&(this.gameData.dailyRewarded.lastRewarded=n.lastRewarded),rt.hasOwn(n,"logDays")&&Array.isArray(n.logDays)&&(this.gameData.dailyRewarded.logDays=n.logDays)}if(rt.hasOwn(t,"dailyTasks")&&at.isObject(t.dailyTasks)){var i=t.dailyTasks;rt.hasOwn(i,"startedTime")&&at.isNumber(i.startedTime)&&(this.gameData.dailyTasks.startedTime=i.startedTime),rt.hasOwn(i,"logTasks")&&at.isObject(i.logTasks)&&(this.gameData.dailyTasks.logTasks=i.logTasks)}if(rt.hasOwn(t,"current_board")&&at.isObject(t.current_board)&&(this.gameData.current_board=t.current_board),this.gameData.game_stats=t.game_stats,this.gameData.tournaments=t.tournaments,rt.hasOwn(t,"firstLoginDate")&&at.isNumber(t.firstLoginDate)&&t.firstLoginDate>0&&(this.gameData.firstLoginDate=t.firstLoginDate),rt.hasOwn(t,"dailyPlayTime")&&at.isObject(t.dailyPlayTime)){var a=t.dailyPlayTime;rt.hasOwn(a,"totalEngagementTime")&&at.isNumber(a.totalEngagementTime)&&(this.gameData.dailyPlayTime.totalEngagementTime=a.totalEngagementTime),rt.hasOwn(a,"currentDate")&&at.isNumber(a.currentDate)&&(this.gameData.dailyPlayTime.currentDate=a.currentDate)}}},t.updateUserGuideDisplays=function(e){var t=e.userGuideDisplays;!1!==at.isNumber(t)&&(this.userGuideDisplays=t)},t.toObject=function(){return{score:this.score,settings:this.settings,gameData:this.gameData,userGuideDisplays:this.userGuideDisplays}},t.convertToPlayerData=function(){var e=this.gameData,t=e.coins,n=e.diamond,i=e.dailyTasks,a=e.dailyRewarded,r=e.lastReceiveGift,s=e.game_stats,o=e.tournaments,c=e.current_board,u=e.lastCallSwitchGame,l=e.firstLoginDate,h=e.dailyPlayTime;return{score:this.score,settings:this.settings,customFields:{coins:t,diamond:n,dailyTasks:i,dailyRewarded:a,lastReceiveGift:r,game_stats:s,tournaments:o,current_board:c,lastCallSwitchGame:u,firstLoginDate:l,dailyPlayTime:h},userGuideDisplays:this.userGuideDisplays}},t.convertToFacebookData=function(e){var t=e.score,n=e.settings,i=e.customFields,a=e.userGuideDisplays;return this.updateScore({score:t}),this.updateSettings({settings:n}),this.updateGameData({gameData:i}),this.updateUserGuideDisplays({userGuideDisplays:a}),this.toObject()},e}(),ot=n(653),ct=GameCore.Configs.ApiHost,ut=function(){var e=(0,i.Z)(r().mark((function e(t){var n;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,ot.v)("players?platform=ms-games",t,{},ct,10);case 2:return n=e.sent,e.abrupt("return",(null==n?void 0:n.data)||{});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),lt=function(){var e=(0,i.Z)(r().mark((function e(t){var n;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",null);case 3:return n=e.sent,e.abrupt("return",(null==n?void 0:n.data)||{});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ht="PLAYER_RECEIVED",dt="PLAYER_DATA_UPDATE",ft="PLAYER_SCORE_UPDATE",pt="PLAYER_PROFILE_UPDATE",gt="PLAYER_SETTING_UPDATE",mt="PLAYER_CONNECTED_PLAYERS_UPDATE",vt=n(644),yt=function(e){function t(t,n){var i;return(i=e.call(this,t)||this).payload=void 0,i.name="PlayerDataNameNotSupport",i.message=t||"The name of player data is not supported",i.payload=n||{},i}return(0,p.Z)(t,e),t}((0,K.Z)(Error)),bt="player",At=(0,me.P1)([function(e){return e[bt]}],(function(e){return e})),Et=(0,me.P1)([At],(function(e){return e.playerId})),St=(0,me.P1)([At],(function(e){return e.ASID})),Tt=(0,me.P1)([function(e){return e[bt].data}],(function(e){return e})),Ct=((0,me.P1)([Tt],(function(e){return e.settings})),(0,me.P1)([function(e){return e[bt].connectedPlayers}],(function(e){return e}))),wt=(0,me.P1)([Ct,function(e,t){return t.limit},function(e,t){return t.offset}],(function(e,t,n){if("number"!==typeof t)return[];if("number"!==typeof n)return[];var i=oe()(e);return w()(i).call(i,n,t+n)||[]})),It=(0,me.P1)([Tt],(function(e){return e.score})),xt=(0,me.P1)([Tt],(function(e){return e.customFields})),Pt=(0,me.P1)([xt],(function(e){return void 0===(null==e?void 0:e.tournaments)?[]:e.tournaments})),kt=GameCore.Configs,_t=kt.AppId,Ot=kt.Tutorial,Rt=function(e,t){return function(n){var i=e.playerId,a=e.name,r=e.photo,s=e.locale;n({type:ht,payload:{playerId:i,name:a,photo:r,locale:s,data:t||{}}})}},Lt=function(e){return{type:mt,payload:{connectedPlayers:e}}},Dt=function(e,t){return function(){var n=(0,i.Z)(r().mark((function n(i,a){var s,o,c;return r().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,i({type:gt,payload:{name:e,value:t}});case 3:s=a(),o=Tt(s),c=new st({}).convertToFacebookData(o),FBInstant.player.setDataAsync(c),n.next=12;break;case 9:n.prev=9,n.t0=n.catch(0),(0,h.tO)(n.t0);case 12:case"end":return n.stop()}}),n,null,[[0,9]])})));return function(e,t){return n.apply(this,arguments)}}()},Bt=function(e,t){return function(){var n=(0,i.Z)(r().mark((function n(i,a){var s,o,c,u,l;return r().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,o={customFields:(s={},s[e]=t,s)},n.next=4,i(Mt(o));case 4:c=a(),u=Tt(c),l=new st({}).convertToFacebookData(u),FBInstant.player.setDataAsync(l),n.next=15;break;case 10:if(n.prev=10,n.t0=n.catch(0),!(n.t0 instanceof yt)){n.next=14;break}return n.abrupt("return");case 14:(0,h.tO)(n.t0);case 15:case"end":return n.stop()}}),n,null,[[0,10]])})));return function(e,t){return n.apply(this,arguments)}}()},Nt=function(e){return function(){var t=(0,i.Z)(r().mark((function t(n,i){var a,s,o,c;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a={customFields:e},t.next=4,n(Mt(a));case 4:s=i(),o=Tt(s),c=new st({}).convertToFacebookData(o),FBInstant.player.setDataAsync(c),t.next=16;break;case 10:if(t.prev=10,t.t0=t.catch(0),!(t.t0 instanceof yt)){t.next=15;break}return t.abrupt("return");case 15:(0,h.tO)(t.t0);case 16:case"end":return t.stop()}}),t,null,[[0,10]])})));return function(e,n){return t.apply(this,arguments)}}()},Mt=function(e){return{type:dt,payload:{data:e}}},Gt=function(e){return function(){var t=(0,i.Z)(r().mark((function t(n,i){var a,s,o;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,n({type:ft,payload:{score:e}});case 3:ut({score:e}),a=i(),s=Tt(a),o=new st({}).convertToFacebookData(s),FBInstant.player.setDataAsync(o),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(0),(0,h.tO)(t.t0);case 13:case"end":return t.stop()}}),t,null,[[0,10]])})));return function(e,n){return t.apply(this,arguments)}}()},Ft=function(e){function t(){return e.apply(this,arguments)||this}(0,p.Z)(t,e);var n=t.prototype;return n.incUserGuideDisplays=function(){var e=(0,i.Z)(r().mark((function e(){var t;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.game.storage,e.next=3,t.dispatch(function(){var e=(0,i.Z)(r().mark((function e(t,n){var i,a,s,o;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!Ot.ForceUseTutorial){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,t(Mt({userGuideDisplays:1}));case 5:i=n(),a=Et(i),s=Tt(i),o=new st({}).convertToFacebookData(s),FBInstant.player.setDataAsync(o),lt(a),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),(0,h.tO)(e.t0);case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t,n){return e.apply(this,arguments)}}());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.receiveData=function(){var e=(0,i.Z)(r().mark((function e(t,n){var i;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=this.game.storage,e.next=3,i.dispatch(Rt(t,n));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}(),n.updateData=function(){var e=(0,i.Z)(r().mark((function e(){var t;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.game.storage,e.next=3,t.dispatch(function(){var e=(0,i.Z)(r().mark((function e(t,n){var i,a,s,o,c,u,l,d;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,i=n(),a=At(i),s=a.playerId,o=a.name,c=a.photo,u=a.locale,e.next=6,FBInstant.player.getASIDAsync();case 6:return l=e.sent,d={appId:_t,playerId:s,name:o,photo:c,locale:u,ASID:l},e.next=10,t({type:pt,payload:{profile:d}});case 10:return e.next=12,ut(d);case 12:e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),(0,h.tO)(e.t0);case 17:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(t,n){return e.apply(this,arguments)}}());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.setBestScore=function(){var e=(0,i.Z)(r().mark((function e(t){var n;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.game.storage,e.next=3,n.dispatch(Gt(t));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.setSetting=function(){var e=(0,i.Z)(r().mark((function e(t,n){var i;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=this.game.storage,e.next=3,i.dispatch(Dt(t,n));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}(),n.setCustomData=function(){var e=(0,i.Z)(r().mark((function e(t,n){var i;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=this.game.storage,e.next=3,i.dispatch(Bt(t,n));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}(),n.setMultiCustomData=function(){var e=(0,i.Z)(r().mark((function e(t){var n;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.game.storage,e.next=3,n.dispatch(Nt(t));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.requestConnectedPlayers=function(){var e=(0,i.Z)(r().mark((function e(){var t;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.game.storage,e.next=3,t.dispatch(function(){var e=(0,i.Z)(r().mark((function e(t){var n,i,a,s;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,FBInstant.player.getConnectedPlayersAsync();case 3:if(i=e.sent,a=function(e){return!!e},s=Be()(n=Me()(i).call(i,(function(e){var t=e.getID(),n=e.getName(),i=e.getPhoto();return t&&n&&i?new vt.Z(t,n,i).toObject():null}))).call(n,a),!(s.length<1)){e.next=8;break}return e.abrupt("return");case 8:t(Lt(s)),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),(0,h.tO)(e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t){return e.apply(this,arguments)}}());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.updateConnectedPlayers=function(){var e=(0,i.Z)(r().mark((function e(t){var n;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.game.storage,e.next=3,n.dispatch(Lt(t));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.joinTournament=function(){var e=(0,i.Z)(r().mark((function e(t){var n,i,a;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=this.getTournaments(),!M()(i).call(i,(function(e){return e.leaderboardId===t.leaderboardId}))){e.next=3;break}return e.abrupt("return");case 3:return a=L()(n=[]).call(n,i,[t]),e.next=6,this.setMultiCustomData({tournaments:a});case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.getPlayer=function(){return At(this.state)},n.getPlayerId=function(){return this.getPlayer().playerId},n.getPlayerASID=function(){return St(this.state)},n.getPlayerData=function(){return this.getPlayer().data},n.getPlayerSetting=function(e){var t=this.getPlayerSettings();return"string"!==typeof e?null:GameCore.Utils.Object.hasOwn(t,e)?t[e]:GameCore.Utils.Object.hasOwn(Le,e)?Le[e]:null},n.getPlayerSettings=function(){return this.getPlayerData().settings},n.getPlayerIsNew=function(){return this.getPlayer().isUserNew},n.getDiamond=function(){var e=this.getCustomData("diamond");return GameCore.Utils.Valid.isNumber(e)?e:0},n.getBestScore=function(){return It(this.state)},n.getCustomData=function(e){var t=xt(this.state);return GameCore.Utils.Valid.isObject(t)&&GameCore.Utils.Object.hasOwn(t,e)?t[e]:null},n.getConnectedPlayers=function(){return Ct(this.state)},n.getConnectedPlayerIds=function(e,t){return wt(this.state,{limit:e,offset:t})},n.getTournaments=function(){return Pt(this.state)},(0,de.Z)(t,[{key:"state",get:function(){return this.game.storage.getState()}}]),t}(Phaser.Plugins.BasePlugin),Zt=Ft,Ut=n(36),Ht=n.n(Ut),Wt=GameCore.Configs.ApiHost,zt=function(){var e=(0,i.Z)(r().mark((function e(t){var n,i;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=GameCore.Utils.String.params(t),e.next=3,(0,ot.U)("players?"+n,{},Wt);case 3:return i=e.sent,e.abrupt("return",(null==i?void 0:i.data)||[]);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Yt="PROFILES_DATA_UPDATE",Vt="profile",Kt=(0,me.P1)([function(e){return e[Vt].data}],(function(e){return e})),jt=(0,me.P1)([function(e){return e[Vt].profileIds}],(function(e){return e})),Xt=GameCore.Configs,Jt=Xt.Tournament,qt=Xt.LeadersBoard,Qt=function(e){return function(){var t=(0,i.Z)(r().mark((function t(n,i){var a,s,o,c,u,l;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,a=i(),s=jt(a),!((o=GameCore.Utils.Array.difference(e,s)).length<1)){t.next=6;break}return t.abrupt("return");case 6:return t.next=8,zt({playerIds:o});case 8:c=t.sent,Jt.UseMock&&qt.UseMock&&(c=Me()(u=Ht()(l=new Array(o.length)).call(l,null)).call(u,(function(e,t){var n=t+1;return{playerId:"player-0"+n,name:"MPlayer "+n,photo:"./assets/images/others/avatar.jpg",rank:n,score:Math.floor(17*Math.random()*1e3/n)}}))),n({type:Yt,payload:{data:c}}),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(0),(0,h.tO)(t.t0);case 16:case"end":return t.stop()}}),t,null,[[0,13]])})));return function(e,n){return t.apply(this,arguments)}}()},$t=function(e){function t(){return e.apply(this,arguments)||this}(0,p.Z)(t,e);var n=t.prototype;return n.requestProfiles=function(){var e=(0,i.Z)(r().mark((function e(t){var n;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.game.storage,e.next=3,n.dispatch(Qt(t));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.getProfiles=function(){return Kt(this.state)},(0,de.Z)(t,[{key:"state",get:function(){return this.game.storage.getState()}}]),t}(Phaser.Plugins.BasePlugin),en=$t,tn=n(19),nn=n.n(tn),an=n(191),rn=n.n(an),sn=["player","match"],on="null",cn=GameCore.Utils,un=cn.Valid,ln=cn.Object,hn=GameCore.Configs.Rollbar,dn=hn.UseMockup,fn=hn.FilterError,pn=function(e){function t(){for(var t,n,i=arguments.length,a=new Array(i),r=0;r<i;r++)a[r]=arguments[r];return(n=e.call.apply(e,L()(t=[this]).call(t,a))||this).enable=void 0,n.rollbar=void 0,n.events=[],n.beforeSend=function(e,t,i){dn&&n.showPopupError(i)},n.checkIgnore=function(e,t,i){try{return!!n.isErrorIgnore(t)}catch(a){return!1}},n.showPopupError=function(e){var t,i,a,r,s,o=null==e||null==(t=e.body)||null==(i=t.trace)?void 0:i.exception;o&&n.events.push(o);var c=(null==e||null==(a=e.body)||null==(r=a.trace)?void 0:r.frames)||[];(s=n.events).push.apply(s,c);var u=document.getElementById("popup-error");u||((u=document.createElement("div")).id="popup-error",document.body.appendChild(u)),u.innerHTML='<div style="color: #fff; display: flex; flex-flow: column; align-items: center; ">\n      <pre id="json" style="overflow: auto; background-color: rgb(195 112 97 / 80%); padding: 10px; max-height: 80vh; max-width: 90vw; border: 5px solid #545454;">'+F()(n.events,null,2)+'</pre>\n      <button id="close" style="cursor: pointer; padding: 10px 20px; border-radius: 100px;">Close</button>\n      </div>',u.style="top: 0px; z-index: 10000; width: 100vw; max-height: 100vh; position: absolute; display: flex; align-items: center; justify-content: center;";var l=document.getElementById("close");l&&(l.onclick=n.closePopup)},n.closePopup=function(){n.events=[{}];var e=document.getElementById("popup-error");null==e||e.remove()},n.isNoneErrorEvent=function(e){if(!e||0===e.length)return!1;if(!e[0].message)return!1;return"Non-Error promise rejection captured with keys: code, message"===e[0].message},n.isErrorIgnore=function(e){if(!e||0===e.length)return!1;var t=!1,i=e[0];return i instanceof Object&&(t=n.isIgnoreByCode(i)||n.isIgnoreByMessage(i)),t},n.isIgnoreByCode=function(e){if(ln.hasOwn(e,"code")){var t=e.code,n=fn.Codes,i=n.accepted,a=n.ignored;if("string"===typeof t){if(nn()(i).call(i,t)>=0)return!1;if(nn()(a).call(a,t)>=0)return!0}}if(ln.hasOwn(e,"name")){var r=e.name,s=fn.Codes,o=s.accepted,c=s.ignored;if("string"===typeof r){if(nn()(o).call(o,r)>=0)return!1;if(nn()(c).call(c,r)>=0)return!0}}return!1},n.isIgnoreByMessage=function(e){if(ln.hasOwn(e,"message")){var t=e.message,n=fn.Messages,i=n.accepted,a=n.ignored;if("string"===typeof t){if(nn()(i).call(i,t)>=0)return!1;if(nn()(a).call(a,t)>=0)return!0}}return!1},n.addExtraState=function(){try{if(!ln.hasOwn(window,"game"))return;if(!ln.hasOwn(window.game,"storage"))return;if(!ln.hasOwn(window.game.storage,"getState"))return;var e=(0,window.game.storage.getState)()||{},t=e.player,i=e.match,a=(0,d.Z)(e,sn);n.rollbar.configure({payload:{player:t,match:i,other:a}})}catch(r){}},n}(0,p.Z)(t,e);var n=t.prototype;return n.setup=function(){this.rollbar=new(rn())({accessToken:on,checkIgnore:this.checkIgnore,onSendCallback:this.beforeSend,captureUncaught:!0,scrubTelemetryInputs:!0,captureUnhandledRejections:!0,autoInstrument:{dom:!1,navigation:!1},payload:{environment:"production",client:{javascript:{code_version:"2"}},server:{root:"webpack:///./",branch:"master"}}}),this.enable=!0,this.sendTestException()},n.configure=function(e){this.rollbar&&this.rollbar.configure(e)},n.sendTestException=function(){if(!un.isDebugger()){var e=FBInstant.player.getID();e&&this.rollbar.debug(new Error("Test rollbar"),{playerID:e})}},n.sendException=function(e,t){e&&this.enable&&this.rollbar&&(this.addExtraState(),this.rollbar.error(e,t))},t}(Phaser.Plugins.BasePlugin),gn=pn,mn=n(656),vn=function(e){function t(){return e.apply(this,arguments)||this}return(0,p.Z)(t,e),t.prototype.emit=function(t,n){return e.prototype.emit.call(this,t,n)},t}(Phaser.Events.EventEmitter),yn=vn,bn=n(641),An=n(655),En=n(654),Sn=function(e){function t(t,n,i,a){var r;(r=e.call(this,t)||this).zone=void 0,r.background=void 0,r.setName(n),r.setVisible(!1);var s=r.scene.world.getWorldSize(),o=s.width,c=s.height;return r.setSize(i||o,a||c),r.addZone(),r.addBackground(),En.Z.registerObject(r.background),r.handleResize(),r.scene.game.events.on("world-resize",(function(){r.handleResize()})),r}(0,p.Z)(t,e);var n=t.prototype;return n.handleResize=function(){var e=this.scene.world.getWorldSize(),t=e.width,n=e.height,i=this.x+(t-this.width)/2,a=this.y+(n-this.height)/2;this.setSize(t,n),this.setPosition(i,a),this.zone.setSize(t,n),this.background.setWorldSize(t,n)},n.open=function(e){GameCore.Utils.Valid.isObject(e)&&(this.setDataEnabled(),this.setData(e)),this.setBlockInputOutsideEnabled(!0),this.scene.screen.screensLayer.bringToTop(this),this.visible||(this.setVisible(!0),this.logPageviewOnOpen(),this.logEventOpen())},n.close=function(){this.visible&&(this.setVisible(!1),this.logPageviewOnClose())},n.incY=function(e){this.y+=e,this.background.y-=e},n.incX=function(e){this.x+=e,this.background.x-=e},n.incScale=function(e){this.scale+=e,this.background.scale-=e^e*(100/e)},n.setBlockInputOutsideEnabled=function(e){this.scene.input.setTopOnly(e)},n.addZone=function(){this.zone=this.scene.add.zone(0,0,this.width,this.height),this.zone.setInteractive({}),this.add(this.zone)},n.addBackground=function(){this.background=this.scene.add.image(0,0,An.Z.GAMEPLAY_DEFAULT.KEY,"blank"),this.background.setWorldSize(this.width,this.height),this.add(this.background)},n.logPageviewOnOpen=function(){this.scene.analytics.pageview(this.name)},n.logPageviewOnClose=function(){this.scene.analytics.pageview(this.scene.scene.key)},n.logEventOpen=function(){this.scene.analytics.event(bn._.SCREEN_OPEN,{screen_name:this.getScreenName()})},n.getScreenName=function(){return GameCore.Utils.String.toUpperCamelCase(this.name.toLowerCase())},n.getScreenBackground=function(){return this.background},t}(Phaser.GameObjects.Container),Tn=Sn,Cn={OPEN:"open",CLOSE:"close",CREATED:"created"};GameCore.Screen=Tn,GameCore.Screens={Events:Cn};var wn=function(e){function t(){for(var t,n,i=arguments.length,a=new Array(i),r=0;r<i;r++)a[r]=arguments[r];return(n=e.call.apply(e,L()(t=[this]).call(t,a))||this).events=void 0,n.screensLayer=void 0,n}(0,p.Z)(t,e);var n=t.prototype;return n.boot=function(){this.events=new yn,this.registryScreenFactory(),this.screensLayer=this.scene.add.layer(),this.screensLayer.setDepth(mn.Z.POPUP)},n.get=function(e){var t=this.screensLayer.getByName(e);return null===t?null:t},n.add=function(e,t,n,i){var a=this.get(e);return a||(a=this.scene.add.screen(e,t,n,i),this.screensLayer.add(a),this.events.emit(GameCore.Screens.Events.CREATED,a),a)},n.open=function(e,t){var n=this.get(e);return!!n&&(n.open(t),n.emit(GameCore.Screens.Events.OPEN,n),this.events.emit(GameCore.Screens.Events.OPEN,n),!0)},n.close=function(e){var t=this.get(e);return!!t&&(t.close(),t.emit(GameCore.Screens.Events.CLOSE,t),this.events.emit(GameCore.Screens.Events.CLOSE,t),!0)},n.bringToTop=function(e){var t=this.scene.children.getByName(e);t&&this.scene.children.bringToTop(t)},n.registryScreenFactory=function(){Phaser.GameObjects.GameObjectFactory.register("screen",this.createScreen)},n.createScreen=function(e,t,n,i){var a=new t(this.scene,e,n,i);return Phaser.Display.Align.In.Center(a,this.scene.gameZone),this.existing(a),a},t}(Phaser.Plugins.ScenePlugin),In=wn,xn=n(407),Pn=n.n(xn),kn=n(648),_n=n(650),On=n(649),Rn={currentSceneKey:"",prevSceneKey:""};(0,On.pV)();var Ln,Dn,Bn,Nn,Mn,Gn,Fn,Zn,Un,Hn={processed:!1,contextId:"",contextType:"SOLO",entryPointData:{},currentGameMode:""},Wn=Hn,zn={data:{}},Yn={token:"",isRequesting:!1},Vn=((Ln={})[ve]=function(e,t){return void 0===e&&(e=Yn),(0,On.ZP)(e,(function(e){var n=t.payload;if(n){var i=n.token;switch(t.type){case fe:e.isRequesting=!0;break;case pe:e.token=i,e.isRequesting=!1}}}))},Ln),Kn=n(624),jn={ASID:"",playerId:"",name:"",photo:"",locale:"",connectedPlayers:{},data:{score:0,settings:Le,userGuideDisplays:0,customFields:{coins:0,diamond:0,lastReceiveGift:0,dailyRewarded:{lastRewarded:0,logDays:[]},dailyTasks:{startedTime:0,logTasks:{}},dailyPlayTime:{totalEngagementTime:0,currentDate:0},game_stats:{},tournaments:[],current_board:{},lastCallSwitchGame:0,firstLoginDate:0}},isUserNew:!0},Xn=((Dn={})[bt]=function(e,t){return void 0===e&&(e=jn),(0,On.ZP)(e,(function(n){var i=t.payload;if(i){var a=i.name,r=i.value,s=i.data,o=void 0===s?{}:s,c=i.score,u=i.connectedPlayers,l=void 0===u?[]:u,h=i.profile;switch(t.type){case ht:var d=i.playerId,f=i.name,p=i.photo,g=i.locale,m=i.data;if(n.playerId=d,n.name=f,n.photo=p,n.locale=g,GameCore.Utils.Valid.isObject(m)){var v=m;n.data=(0,Kn.TS)(e.data,v)}m.userGuideDisplays>0&&(n.isUserNew=!1);break;case pt:var y=h.playerId,b=h.name,A=h.photo,E=h.locale,S=h.ASID;n.ASID=S,n.playerId=y,n.name=b,n.photo=A,n.locale=E;break;case ft:n.data.score=c;break;case gt:n.data.settings[a]=r;break;case dt:n.data=(0,Kn.TS)(e.data,o),o.userGuideDisplays>0&&(n.isUserNew=!1);break;case mt:if(l.length<=0)break;var T=GameCore.Utils.Object.keyBy(l,"playerId");n.connectedPlayers=(0,Kn.TS)(e.connectedPlayers,T)}}}))},Dn),Jn=n(597),qn=n.n(Jn),Qn={data:{},profileIds:[]},$n=((Bn={})[Vt]=function(e,t){return void 0===e&&(e=Qn),(0,On.ZP)(e,(function(n){var i=t.payload;if(i){var a=i.data,r=void 0===a?[]:a;if(t.type===Yt){var s,o,c=GameCore.Utils.Object.keyBy(r,"playerId"),u=oe()(c);n.data=(0,Kn.TS)((0,f.Z)({},e.data),c),n.profileIds=L()(s=[]).call(s,new(qn())(L()(o=[]).call(o,e.profileIds,u)))}}}))},Bn),ei="match",ti="MATCH_GAMEPLAY_INITIALIZE",ni="MATCH_GAMEPLAY_START",ii="MATCH_GAMEPLAY_FINISH",ai="MATCH_GAMEPLAY_UPDATE",ri="MATCH_STATS_DATA_CLEAR",si="MATCH_STATS_DATA_UPDATE",oi="MATCH_STATS_CURRENT_UPDATE",ci="MATCH_SINGLE_CREATE_REQUEST",ui="MATCH_SINGLE_DETAIL_REQUEST",li="MATCH_SINGLE_DATA_RECEIVED",hi="MATCH_SINGLE_DATA_CLEAR",di="MATCH_CHALLENGE_JOIN_REQUEST",fi="MATCH_CHALLENGE_CREATE_REQUEST",pi="MATCH_CHALLENGE_FINISH_REQUEST",gi="MATCH_CHALLENGE_CONTINUE_REQUEST",mi="MATCH_CHALLENGE_DATA_RECEIVED",vi="MATCH_CHALLENGE_DATA_CLEAR",yi="MATCH_GROUP_CREATE_REQUEST",bi="MATCH_GROUP_FINISH_REQUEST",Ai="MATCH_ONLINE_CREATE_REQUEST",Ei="MATCH_ONLINE_DATA_RECEIVED",Si="open",Ti="active",Ci="finished",wi={mode:"",status:Si,rescued:0,startAt:0,finishAt:0},Ii={single:{_id:"",data:{fen:""},playerId:"",status:Si},group:{status:Si,opponentInfo:{playerId:"",name:"",photo:""}},challenge:{_id:"",status:Si,whitePlayerId:"",blackPlayerId:"",opponentInfo:{playerId:"",name:"",photo:""}},online:{_id:"",status:Si,players:{}},updateAt:0,isRequesting:!1},xi={current:{updateAt:0},data:{updateAt:0},isRequesting:!1},Pi=((Nn={})[ei]=(0,kn.UY)({gameplay:function(e,t){return void 0===e&&(e=wi),(0,On.ZP)(e,(function(n){var i=t.payload;if(i){var a=i.mode,r=i.status;switch(t.type){case ti:n.status=Si,n.mode=wi.mode,n.rescued=wi.rescued,n.startAt=wi.startAt,n.finishAt=wi.finishAt,n.opponentInfo=wi.opponentInfo;break;case ni:n.mode=a,n.status=Ti,n.rescued=wi.rescued,n.startAt=Date.now();break;case ai:n.mode="string"===typeof a?a:e.mode,n.status=r||e.status;break;case ii:n.status=Ci,n.finishAt=Date.now();break;case"MATCH_GAMEPLAY_RESCUE":n.rescued+=1}}}))},match:function(e,t){return void 0===e&&(e=Ii),(0,On.ZP)(e,(function(n){var i=t.payload;if(i){var a=i.match,r=i.opponentInfo,s=i.players;switch(t.type){case ci:case ui:case di:case pi:case Ai:n.isRequesting=!0;break;case"MATCH_SINGLE_MOVE_UPDATED":n.single=(0,f.Z)({},e.single,a),n.updateAt=Date.now();break;case li:n.isRequesting=!1,n.single=a||Ii.single;break;case hi:n.isRequesting=!1,n.single=Ii.single;break;case fi:case gi:n.isRequesting=!0,n.challenge.opponentInfo=r;break;case mi:n.isRequesting=!1,n.challenge=(0,f.Z)({},a||Ii.challenge),n.challenge.opponentInfo=e.challenge.opponentInfo;break;case vi:n.isRequesting=!1,n.challenge=Ii.challenge;break;case yi:n.group.status=Ti,r&&(n.group.opponentInfo=r);break;case bi:n.group.status=Ci;break;case"MATCH_ONLINE_DATA_CLEAR":n.online.status=Ii.online.status,n.online.players=Ii.online.players;break;case Ei:n.online.status=Ti,n.online.players=s;break;case"MATCH_ONLINE_FINISH_REQUEST":n.online.status=Ci}}}))},stats:function(e,t){return void 0===e&&(e=xi),(0,On.ZP)(e,(function(n){var i=t.payload;if(i){var a=i.playerId,r=i.stats,s=i.match,o=i.current,c=i.players,u=i.leaders;switch(t.type){case ri:delete n.data[a],n.current=xi.current;break;case"MATCH_STATS_CONTEXT_REQUEST":n.data=xi.data,n.isRequesting=!0;break;case"MATCH_STATS_CONTEXT_RECEIVED":n.data=r,n.isRequesting=!1;break;case si:n.data[a]=r;break;case oi:n.current=(0,Kn.TS)((0,f.Z)({},e.current),r);break;case Ei:oe()(c).forEach((function(e){n.data[e]={score:0}}));break;case"MATCH_ONLINE_STATS_UPDATE":u.forEach((function(e){var t=e.playerId,i=e.score,a=e.rank;n.data[t]={score:i,rank:a}}));break;case mi:var l=s||{},h=l.blackPlayerId,d=l.blackPlayerScore,p=l.whitePlayerId,g=l.whitePlayerScore,m=l.whitePlayerLevel,v=l.blackPlayerLevel;if(!h||!p)break;o&&(n.current=o),n.data[h]={score:d,level:v},n.data[p]={score:g,level:m}}}}))}}),Nn),ki="tournament",_i="TOURNAMENT_ACTIVE",Oi={active:!1,tournamentId:null,leaderboardId:null,bestSessionScore:0,isRequesting:!1},Ri=((Mn={})[ki]=function(e,t){return void 0===e&&(e=Oi),(0,On.ZP)(e,(function(n){var i=t.payload;if(i){var a=i.score,r=void 0===a?0:a,s=i.tournamentId,o=i.leaderboardId;switch(t.type){case _i:n.active=!0,n.tournamentId=s,n.leaderboardId=o;break;case"TOURNAMENT_REQUEST":n.isRequesting=!0;break;case"TOURNAMENT_RECEIVED":n.isRequesting=!1,r>e.bestSessionScore&&(n.bestSessionScore=r)}}}))},Mn),Li="leaderboards",Di=n(116),Bi=n.n(Di),Ni=n(63),Mi=n.n(Ni),Gi="LEADERBOARD_DATA_REQUEST",Fi="LEADERBOARD_DATA_UPDATE",Zi="LEADERBOARD_DATA_CLEAR",Ui={leaderboardId:"",type:"",limit:0,offset:0,leaders:{},isRequesting:!1},Hi=((Gn={})[Li]=function(e,t){return void 0===e&&(e=Ui),(0,On.ZP)(e,(function(n){var i=t.payload;if(i){var a=i.leaderboardId,r=i.type,s=i.limit,o=i.offset,c=i.leaders;switch(t.type){case Gi:e.type!==r&&0===o&&(n.leaders=Ui.leaders),n.isRequesting=!0,n.leaderboardId=a,n.type=r,n.limit=s,n.offset=o;break;case Fi:if(n.isRequesting=!1,e.type!==r)break;var u=GameCore.Utils.Json.clone((0,f.Z)({},e.leaders,c)),l=Bi()(u),h=Be()(l).call(l,(function(e){return!!e.name&&!!e.photo}));Mi()(h).call(h,(function(e,t){return+t.score-+e.score})),h.forEach((function(t,i){t.rank=i+1,e.leaders[t.playerId]||(n.leaders[t.playerId]=t)}));break;case Zi:n.isRequesting=!1,n.type=Ui.type,n.limit=Ui.limit,n.offset=Ui.offset,n.leaders=Ui.leaders,n.leaderboardId=Ui.leaderboardId}}}))},Gn),Wi={mission:null,missions:null,isRequesting:!1},zi=((Fn={}).missions=function(e,t){return void 0===e&&(e=Wi),(0,On.ZP)(e,(function(n){var i,a,r=t.payload;if(r){var s=r.name,o=r.type,c=r.value,u=r.missions;switch(t.type){case"MISSIONS_DATA_REQUEST":n.isRequesting=!0;break;case"MISSIONS_DATA_RECEIVE":if(n.isRequesting=!1,u.length<1)return;n.missions={},u.forEach((function(e){n.missions[e.name]=e}));break;case"MISSION_START":if(null===e.missions)break;var l=e.missions[s];n.mission={name:s,process:{},require:l.require,reward:l.reward},oe()(l.require).forEach((function(e){n.mission.process[e]=0}));break;case"MISSION_UPDATE":if((null==(i=e.mission)?void 0:i.name)!==s)break;n.mission.process[o]+=c;break;case"MISSION_COMPLETED":if((null==(a=e.mission)?void 0:a.name)!==s)break;n.mission=null}}}))},Fn),Yi={tasks:[],process:[],isRequesting:!1,isNotice:!1},Vi=((Zn={}).dailyTasks=function(e,t){return void 0===e&&(e=Yi),(0,On.ZP)(e,(function(n){var i=t.payload;if(i){var a=i.id,r=i.type,s=i.value,o=i.tasks,c=i.process;switch(t.type){case"DAILY_TASKS_DATA_REQUEST":n.isRequesting=!0;break;case"DAILY_TASKS_DATA_RECEIVE":n.isRequesting=!1,n.tasks=o;break;case"DAILY_TASKS_PROCESS_UPDATE":n.process=c;break;case"DAILY_TASK_VALUE_ADD":if(!e.process[a])break;n.process[a][r]+=s;break;case"DAILY_TASK_REWARDED":if(!e.process[a])break;n.process[a].rewarded=!0;break;case"DAILY_TASKS_SEEN":n.isNotice=!1;break;case"DAILY_TASK_FINISHED":n.isNotice=!0}}}))},Zn),Ki={rewards:[],isRequesting:!1},ji=((Un={}).dailyRewards=function(e,t){return void 0===e&&(e=Ki),(0,On.ZP)(e,(function(e){var n=t.payload;if(n){var i=n.rewards;switch(t.type){case"DAILY_REWARDS_REQUEST":e.isRequesting=!0;break;case"DAILY_REWARDS_RECEIVE":e.isRequesting=!1,e.rewards=i}}}))},Un),Xi=(0,kn.UY)((0,f.Z)({scene:function(e,t){return void 0===e&&(e=Rn),(0,On.ZP)(e,(function(n){var i=t.payload;if(i){var a=i.sceneKey;if(t.type===_n.DW)n.currentSceneKey=a,n.prevSceneKey=e.currentSceneKey}}))},context:function(e,t){return void 0===e&&(e=Hn),(0,On.ZP)(e,(function(e){var n=t.payload;if(n){var i=n.gameMode,a=n.contextId,r=n.contextType,s=n.entryPointData;switch(t.type){case _n.kL:e.contextId=a,e.contextType=r,e.entryPointData=s;break;case _n.fJ:e.contextId=a,e.contextType=r,e.processed=!0;break;case _n.EH:e.currentGameMode=i}}}))},messages:function(e,t){return void 0===e&&(e=zn),(0,On.ZP)(e,(function(n){var i=t.payload;if(i){var a=i.opponentId;if("string"===typeof a)switch(t.type){case _n.qj:e.data[a]?n.data[a].sent=!0:n.data[a]={sent:!0};break;case _n.rh:e.data[a]?n.data[a].sent=!1:n.data[a]={sent:!1}}}}))}},Vn,Xn,$n,Pi,Ri,Hi,zi,Vi,ji)),Ji=n(647),qi=function(e){return(0,Ji.xC)({reducer:Xi,preloadedState:e,devTools:!0})},Qi=function(e){function t(){for(var t,n,i=arguments.length,a=new Array(i),r=0;r<i;r++)a[r]=arguments[r];return(n=e.call.apply(e,L()(t=[this]).call(t,a))||this).store=void 0,n.initiator=void 0,n.dispatch=function(e){return n.store.dispatch(e)},n.getState=function(){return n.store.getState()},n.subscribe=function(e){return n.store.subscribe(e)},n.watch=function(e,t){var i=Pn()((function(){var t=n.getState();return e(t)}));return n.subscribe(i((function(e){t(e)})))},n}(0,p.Z)(t,e);var n=t.prototype;return n.init=function(){this.store=qi({})},n.setInitiator=function(e){this.initiator=e},n.syncStore=function(){var e=(0,i.Z)(r().mark((function e(){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.initiator.initContext(),e.next=3,this.initiator.initPlayer();case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.initPlayerManually=function(){var e=(0,i.Z)(r().mark((function e(){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.initiator.initPlayer();case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),t}(Phaser.Plugins.BasePlugin),$i=Qi,ea=n(600),ta=n.n(ea),na=function(e){function t(t,n){var i;return(i=e.call(this,t,{type:"webfont",key:n.type})||this).payload=void 0,i.payload=n,i}(0,p.Z)(t,e);var n=t.prototype;return n.load=function(){var e;switch(this.payload.type){case"google":e=this.getGoogleFontConfig(this.payload);break;case"local":e=this.getLocalFontConfig(this.payload)}ta().load(e)},n.getGoogleFontConfig=function(e){var t=this,n=e.character,i=e.fontName,a=e.fontWeight;return{google:{families:[i+":"+(void 0===a?400:a)],text:n},active:function(){t.loader.nextFile(t,!0)},timeout:15e3}},n.getLocalFontConfig=function(e){var t=this,n=e.fontName,i=e.fontType,a=document.createElement("style");document.head.appendChild(a);var r=a.sheet;if(r){var s="";switch(i){case"opentype":case"woff":s=".woff";break;case"truetype":s=".ttf"}var o='@font-face { font-family: "'+n+'"; src: url("assets/fonts/'+n+s+'") format("'+i+'"); }';r.insertRule(o,0)}return{custom:{families:[n]},active:function(){t.loader.nextFile(t,!0)},timeout:15e3}},t}(Phaser.Loader.File),ia=function(e){function t(){return e.apply(this,arguments)||this}return(0,p.Z)(t,e),t.prototype.addFont=function(e){var t=new na(this.scene.load,e);this.scene.load.addFile(t)},t}(Phaser.Plugins.ScenePlugin),aa=ia,ra=n(632),sa=function(e){function t(){return e.apply(this,arguments)||this}return(0,p.Z)(t,e),t.prototype.emit=function(t){return e.prototype.emit.call(this,t)},t}(Phaser.Events.EventEmitter),oa=sa,ca=n(652),ua=function(e){function t(){for(var t,n,i=arguments.length,a=new Array(i),r=0;r<i;r++)a[r]=arguments[r];return(n=e.call.apply(e,L()(t=[this]).call(t,a))||this).events=void 0,n.previousLayout=void 0,n.resizeEventData=void 0,n.portraitRatio=void 0,n.portraitWidth=void 0,n.portraitHeight=void 0,n.landscapeRatio=void 0,n.landscapeWidth=void 0,n.landscapeHeight=void 0,n.worldWidth=void 0,n.worldHeight=void 0,n.worldRatio=void 0,n.autoResize=void 0,n.disableLandscape=void 0,n.fullSizeOnLandscape=void 0,n.currentLayout=void 0,n.forcePixelRatio=void 0,n.ignoreResizeFlag=!1,n.handleResize=(0,ra.D)((function(){n.previousLayout=""+n.currentLayout,n.ignoreResizeFlag?n.game.events.once("resume-resize",(function(){n.ignoreResizeFlag=!1,n.resize(),n.game.events.emit("world-resize")})):(n.resize(),n.game.events.emit("world-resize"))}),300),n}(0,p.Z)(t,e);var n=t.prototype;return n.configure=function(e){this.events=new oa;var t=e.autoResize,n=e.portraitRatio,i=e.portraitWidth,a=e.portraitHeight,r=e.landscapeWidth,s=e.landscapeHeight,o=e.landscapeRatio,c=e.disableLandscape,u=e.fullSizeOnLandscape;this.autoResize=t,this.disableLandscape=c,this.fullSizeOnLandscape=u,this.portraitRatio=n,this.portraitWidth=i,this.portraitHeight=a,this.landscapeRatio=o,this.landscapeWidth=r,this.landscapeHeight=s,this.initWorldSize(),this.addEventResize()},n.resize=function(e){var t=this;e&&e>0&&(this.forcePixelRatio=e);var n=this.getCanvasSizeFixedRatio(this.worldRatio),i=n.width,a=n.height;this.resizeCanvas(i,a),this.game.scene.scenes.forEach((function(e){var n=e.cameras.main;if(n){var i=t.getZoomRatio(),a=t.getWorldSize(),r=a.width,s=a.height;n.setZoom(i),n.centerOn(r/2,s/2)}}));var r={width:this.worldWidth,height:this.worldHeight,isLayoutChanged:!1,newLayout:this.currentLayout};this.previousLayout!==this.currentLayout&&(r.isLayoutChanged=!0,r.newLayout=this.currentLayout),this.resizeEventData=r,this.events.emit(ca.Z.RESIZE,r)},n.getResizeEventData=function(){return this.resizeEventData},n.resizeCanvas=function(e,t){this.game.canvas.width=e,this.game.canvas.height=t,this.game.scale.resize(e,t)},n.getWorldSize=function(){return{width:this.worldWidth,height:this.worldHeight}},n.initWorldSize=function(){if(this.worldWidth=this.portraitWidth,this.worldHeight=this.portraitHeight,this.isScreenSmallerRatio(this.portraitRatio))this.worldHeight=this.worldWidth/this.getScreenRatio();else if(!this.disableLandscape&&GameCore.Utils.Device.isDesktop()){var e=Math.min(this.getScreenRatio(),1);if(e<this.landscapeRatio?(this.worldWidth=this.landscapeWidth,this.worldHeight=this.worldWidth/e):(this.worldHeight=this.landscapeHeight,this.worldWidth=this.worldHeight*e),this.landscapeRatio=e,this.currentLayout="landscape",this.fullSizeOnLandscape){this.worldRatio=this.worldWidth/this.worldHeight,this.landscapeRatio=this.getScreenRatio();var t=this.getCanvasSizeFixedRatio(this.landscapeRatio),n=t.width,i=t.height,a=this.getZoomRatio();this.worldWidth=n/a,this.worldHeight=i/a}}this.worldRatio=this.worldWidth/this.worldHeight},n.getZoomRatio=function(){var e=this.getWorldSize().width;return this.getCanvasSizeFixedRatio(this.worldRatio).width/e},n.getPixelRatio=function(){if(this.forcePixelRatio>0)return this.forcePixelRatio;if(GameCore.Utils.Device.isDesktop())return 2;var e=GameCore.Utils.Device.pixelRatio();return e>2&&(e=2),e},n.getPixelRatioForCanvas=function(){if(this.forcePixelRatio>0)return this.forcePixelRatio;var e=Math.max(1.25,GameCore.Utils.Device.pixelRatio());return e>2&&(e=Math.min(Math.round(2*e)/2,2.5)),e},n.getPhysicPixels=function(e,t){return e*t},n.getCanvasSizeFixedRatio=function(e){var t=this.getPixelRatioForCanvas(),n=this.getScreenWidth()*t,i=this.getScreenHeight()*t;return this.isScreenSmallerRatio(e)?i=n/e:n=i*e,{width:n,height:i}},n.getScreenRatio=function(){return this.getScreenWidth()/this.getScreenHeight()},n.getScreenHeight=function(){var e=document,t=e.body,n=e.documentElement,i=t.clientHeight,a=n.clientHeight;return Math.max(a,i)||0},n.getScreenWidth=function(){var e=document,t=e.body,n=e.documentElement,i=t.clientWidth,a=n.clientWidth;return Math.max(a,i)||0},n.isScreenSmallerRatio=function(e){return this.getScreenRatio()<e},n.addEventResize=function(){var e=this;this.autoResize&&(window.addEventListener("resize",this.handleResize),0===this.game.events.listeners("pause-resize").length&&this.game.events.on("pause-resize",(function(){e.ignoreResizeFlag=!0})),0===this.game.events.listeners("resume-resize").length&&this.game.events.on("resume-resize",(function(){e.ignoreResizeFlag=!1})))},n.isLandscape=function(){return!this.disableLandscape&&this.worldRatio>this.portraitRatio},t}(Phaser.Plugins.BasePlugin),la=ua,ha=function(){function e(e,t,n){this.contextId=void 0,this.contextType=void 0,this.entryPointData=void 0,this.contextId=e||Wn.contextId,this.contextType=t||Wn.contextType,this.entryPointData=n||Wn.entryPointData}return e.prototype.toObject=function(){return{contextId:this.contextId,contextType:this.contextType,entryPointData:this.entryPointData}},e}(),da=function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).name="InvalidPlayerId",i.message=t||"The playerId is not valid",i.payload=n,i}return(0,p.Z)(t,e),t}((0,K.Z)(Error)),fa="share_invite",pa="challenge_friend_match",ga=n(645),ma=new vt.Z("10","Your Friend",ga.Z.AVATAR.FILE).toObject(),va="single",ya="challenge-friends",ba="matching-group",Aa="tournaments",Ea=(0,me.P1)([function(e){return e.context}],(function(e){return e})),Sa=(0,me.P1)([function(e){return e.context.currentGameMode}],(function(e){return e})),Ta=function(e,t){return{type:_n.fJ,payload:{contextId:e,contextType:t}}},Ca=function(e){return function(t){t({type:_n.EH,payload:{gameMode:e}}),(0,h.sw)("game-mode",e)}},wa={score:"score",settings:"settings",gameData:"gameData",userGuideDisplays:"userGuideDisplays"},Ia=n(676),xa=GameCore.Configs.SyncProfileFromAPI,Pa=GameCore.Utils.Valid,ka=function(e){var t=this;this.game=void 0,this.initContext=function(){var e=window.GameSDK.context.getID(),n=window.GameSDK.context.getType(),i=window.GameSDK.getEntryPointData(),a=new ha(e,n,i).toObject(),r=a.contextId,s=a.contextType,o=a.entryPointData;t.game.storage.dispatch(function(e,t,n){return{type:_n.kL,payload:{contextId:e,contextType:t,entryPointData:n}}}(r,s,o))},this.initPlayer=(0,i.Z)(r().mark((function e(){var n,i,a,s,o,c,u,l,h,d,f;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.game.player,i=t.getPlayerInfo(),a=Bi()(wa),e.next=5,FBInstant.player.getDataAsync(a);case 5:return s=e.sent,o=new st(s),e.next=11,t.maintainDataStructure(o);case 11:return o=e.sent,!0===o.toObject().settings.music&&window.game.audio.playMusic(),c=o.convertToPlayerData(),u=c.settings.modifiedOptions,l=Le.autoMoveToFoundation,h=Le.tapToMove,d=Le.autoHints,f=Le.highlightLowCards,t.syncFirstLoginDate(c),xe()(u).call(u,Ia.Z.autoMoveToFoundation)||(c.settings.autoMoveToFoundation=l),xe()(u).call(u,Ia.Z.autoHints)||(c.settings.autoHints=d),xe()(u).call(u,Ia.Z.tapToMove)||(c.settings.tapToMove=h),xe()(u).call(u,Ia.Z.highlightLowCards)||(c.settings.highlightLowCards=f),e.next=24,n.receiveData(i,c);case 24:case"end":return e.stop()}}),e)}))),this.syncFirstLoginDate=function(e){var t=e.customFields;if(t){var n=t.firstLoginDate;if(!(Pa.isNumber(n)&&n>0)){var i=t.game_stats,a=0===oe()(i).length;t.firstLoginDate=a?Date.now():Date.now()-864e5}}},this.maintainDataStructure=function(){var e=(0,i.Z)(r().mark((function e(t){var n,i,a,s;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,xa){e.next=3;break}return e.abrupt("return",t);case 3:return e.next=5,FBInstant.player.getDataAsync(["isSynced","customFields"]);case 5:if(e.t0=e.sent,e.t0){e.next=8;break}e.t0={};case 8:if(n=e.t0,!0!==(n.isSynced||!1)){e.next=12;break}return e.abrupt("return",t);case 12:return i=n.customFields||!1,(a=t.convertToPlayerData()).customFields=i,s=new st({}).convertToFacebookData(a),e.next=18,FBInstant.player.setDataAsync((0,f.Z)({},s,{isSynced:!0}));case 18:return e.abrupt("return",new st(s));case 21:return e.prev=21,e.t1=e.catch(0),e.abrupt("return",t);case 25:case"end":return e.stop()}}),e,null,[[0,21]])})));return function(t){return e.apply(this,arguments)}}(),this.getPlayerInfo=function(){try{var e=window.GameSDK.player.getID(),t=window.GameSDK.player.getName(),n=window.GameSDK.player.getPhoto(),i=window.GameSDK.getLocale();if(!GameCore.Utils.Valid.isString(e))throw new da(null,{playerId:e});return GameCore.Utils.Valid.isString(t)||(t="You"),new vt.Z(e,t,n,i).toObject()}catch(a){return new vt.Z("123","You").toObject()}},this.game=e},_a=n(657),Oa=GameCore.Ads.Types,Ra=[bn._.BUTTON_CLICK,bn._.SCREEN_OPEN],La=function(e){function t(t,n,i){var a;return(a=e.call(this,"FacebookAnalytics",{prefix:n},"#0F52BA")||this).game=void 0,a.game=t,a.selfLog=!!i,a}(0,p.Z)(t,e);var n=t.prototype;return n.processEvent=function(e,t,n){var i;if(!(nn()(Ra).call(Ra,e)>=0)){var a=this.getEventName(e),r={};Me()(i=oe()(t||{})).call(i,(function(e){t&&"string"===typeof t[e]&&(r[e]=t[e])})),FBInstant.logEvent(a,n,r)}},n.processPageView=function(e){},n.processLevelStart=function(e,t,n){this.processEvent(bn._.LEVEL_START,{level:e,score:t,level_name:n})},n.processLevelRescue=function(e,t,n){this.processEvent(bn._.LEVEL_RESCUE,{level:e,score:t,level_name:n})},n.processLevelFail=function(e,t,n){this.processEvent(bn._.LEVEL_END,{level:e,score:t,level_name:n,success:!1})},n.processLevelComplete=function(e,t,n){this.processEvent(bn._.LEVEL_END,{level:e,score:t,level_name:n,success:!0})},n.processLoadInterstitialAd=function(e){var t=this.getEdaType(Oa.INTERSTITIAL);this.processEvent(bn._.AD_LOAD,{ad_type:t,screen_name:""+e})},n.processShowInterstitialAd=function(e){var t=this.getEdaType(Oa.INTERSTITIAL);this.processEvent(bn._.AD_SHOW,{ad_type:t,screen_name:""+e})},n.processLoadRewardedVideoAd=function(e){var t=this.getEdaType(Oa.REWARDED);this.processEvent(bn._.AD_LOAD,{ad_type:t,screen_name:""+e})},n.processShowRewardedVideoAd=function(e){var t=this.getEdaType(Oa.REWARDED);this.processEvent(bn._.AD_SHOW,{ad_type:t,screen_name:""+e})},n.processLoadAdFail=function(e){var t=e.type,n=e.placement,i=this.getEdaType(t);this.processEvent(bn._.AD_LOAD_FAILED,{ad_type:i,screen_name:""+n})},n.processShowAdFail=function(e){var t=e.type,n=e.placement,i=this.getEdaType(t);this.processEvent(bn._.AD_SHOW_FAILED,{ad_type:i,screen_name:""+n})},n.getEventName=function(e){return this.options.prefix+"_"+e},n.getEdaType=function(e){switch(e){case Oa.INTERSTITIAL:return"interstitial";case Oa.REWARDED:return"rewarded_video";case Oa.BANNER:return"banner";case Oa.PRE_ROLL:return"pre_roll";default:return"unknown"}},t}(GameCore.Analytics.BaseAnalytics),Da=GameCore.Ads.Types,Ba=[bn._.SCREEN_OPEN,"button_click","match_start","match_end","scroll"],Na=function(e){function t(t,n){var i;(i=e.call(this,"GoogleAnalytics",(0,f.Z)({},n),"#E35335")||this).game=void 0,i.trackingId=void 0,i.currentPath="/";var a=n.trackingId;i.game=t;var r=(GameCore.Configs.Analytics.GoogleAnalytics||{}).consoleLog;return i.selfLog=!!r,i.trackingId=a,i}(0,p.Z)(t,e);var n=t.prototype;return n.processEvent=function(e,t,n){if(!(nn()(Ba).call(Ba,e)>=0)){var i=this.formatEventName(e),a=t?(0,f.Z)({},t):{};a=n?(0,f.Z)({},a,{value:n}):a,a=(0,f.Z)({},a,{page_path:this.currentPath,send_to:"GA"}),gtag("event",i,a)}},n.processLevelStart=function(e,t,n){this.processEvent(bn._.LEVEL_START,{level:e,score:t,level_name:n})},n.processLevelRescue=function(e,t,n){this.processEvent(bn._.LEVEL_RESCUE,{level:e,score:t,level_name:n})},n.processLevelFail=function(e,t,n){this.processEvent(bn._.LEVEL_END,{level:e,score:t,level_name:n,success:!1})},n.processLevelComplete=function(e,t,n){this.processEvent(bn._.LEVEL_END,{level:e,score:t,level_name:n,success:!0})},n.processLoadPreRollAd=function(e,t){var n=this.getEdaType(Da.PRE_ROLL);this.processEvent(bn._.AD_LOAD,{ad_type:n,screen_name:""+e,ad_service:""+t})},n.processShowPreRollAd=function(e,t){var n=this.getEdaType(Da.PRE_ROLL);this.processEvent(bn._.AD_SHOW,{ad_type:n,screen_name:""+e,ad_service:""+t}),this.processEvent(bn._.AD_IMPRESSION,{ad_format:n})},n.processLoadInterstitialAd=function(e,t){var n=this.getEdaType(Da.INTERSTITIAL);this.processEvent(bn._.AD_LOAD,{ad_type:n,screen_name:""+e,ad_service:""+t})},n.processShowInterstitialAd=function(e,t){var n=this.getEdaType(Da.INTERSTITIAL);this.processEvent(bn._.AD_SHOW,{ad_type:n,screen_name:""+e,ad_service:""+t}),this.processEvent(bn._.AD_IMPRESSION,{ad_format:"Interstitial"})},n.processLoadRewardedVideoAd=function(e,t){var n=this.getEdaType(Da.REWARDED);this.processEvent(bn._.AD_LOAD,{ad_type:n,screen_name:""+e,ad_service:""+t})},n.processShowRewardedVideoAd=function(e,t){var n=this.getEdaType(Da.REWARDED);this.processEvent(bn._.AD_SHOW,{ad_type:n,screen_name:""+e,ad_service:""+t}),this.processEvent(bn._.AD_IMPRESSION,{ad_format:"Rewarded"})},n.processShowBannerAd=function(e,t,n){var i=this.getEdaType(Da.BANNER);this.processEvent(bn._.AD_SHOW,{ad_type:i,banner_position:""+e,screen_name:""+t,ad_service:""+n})},n.processLoadAdFail=function(e){var t=e.type,n=e.placement,i=e.adService,a=this.getEdaType(t);this.processEvent(bn._.AD_LOAD_FAILED,{ad_type:a,screen_name:""+n,ad_service:""+i})},n.processShowAdFail=function(e){var t=e.type,n=e.placement,i=e.adService,a=e.bannerPosition,r={ad_type:this.getEdaType(t),screen_name:""+n,ad_service:""+i};t===Da.BANNER&&(r.banner_position=""+a),this.processEvent(bn._.AD_SHOW_FAILED,r)},n.processPageView=function(e){var t=this.getGameplayMode(),n="/"+t+"/"+e;this.currentPath=n,document.title=this.formatPageTitle(t,e),this.processEvent("page_view")},n.getGameplayMode=function(){var e=this.game.storage.getState();return Sa(e)},n.formatEventName=function(e){return e.toLowerCase().replace(/:/g,"_")},n.formatPageTitle=function(e,t){return this.toUpperCamelCaseWithSpace(e)+"::"+this.toUpperCamelCaseWithSpace(t)},n.toUpperCamelCaseWithSpace=function(e){var t=e.replace(/[-_\s.]+(.)?/g,(function(e,t){return t?" "+t.toUpperCase():""}));return t.substr(0,1).toUpperCase()+t.substr(1)},n.getEdaType=function(e){switch(e){case Da.INTERSTITIAL:return"interstitial";case Da.PRE_ROLL:return"pre_roll";case Da.REWARDED:return"rewarded_video";case Da.BANNER:return"banner";default:return"unknown"}},t}(GameCore.Analytics.BaseAnalytics),Ma="G-6GQF9WK23J",Ga="null",Fa=function(e){function t(){for(var t,n,a=arguments.length,s=new Array(a),o=0;o<a;o++)s[o]=arguments[o];return(n=e.call.apply(e,L()(t=[this]).call(t,s))||this).startGame=(0,i.Z)(r().mark((function e(){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n.auth.requestToken();case 3:return e.next=5,n.storage.syncStore();case 5:return n.configureSentry(),n.configureRollbar(),e.next=9,n.detectGameMode();case 9:n.handleYTAudioSync(),n.initGoogleAnalytics(),n.analytics.event(bn._.LOAD_START),n.scene.launch(_a.C.GLOBAL_SCENE),n.scene.start(_a.C.LOAD_SCENE),n.analytics.pageview(_a.C.LOAD_SCENE),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(0),(0,h.tO)(e.t0);case 20:return e.prev=20,n.facebook.progressLoading.finishLoadingProgressFbBootScene(),n.scene.sleep(_a.C.BOOT_SCENE),e.finish(20);case 24:case"end":return e.stop()}}),e,null,[[0,17,20,24]])}))),n}(0,p.Z)(t,e);var n=t.prototype;return n.create=function(){this.facebook.progressLoading.loadingProgressFbBootScene(),this.startGame()},n.configureSentry=function(){var e=this.player.getPlayer();(0,h.Tv)({id:e.playerId,username:e.name})},n.configureRollbar=function(){if(this.rollbar){var e=this.player.getPlayer();this.rollbar.configure({payload:{person:{id:e.playerId,name:e.name}}})}},n.detectGameMode=function(){var e=(0,i.Z)(r().mark((function e(){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.storage.dispatch(function(){var e=(0,i.Z)(r().mark((function e(t,n){var i,a,s,o,c,u,l,h,d,f,p,g,m,v,y,b,A;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n(),s=Ea(a),o=window.game.player,c=o.getPlayerId(),u=s.contextId,l=s.entryPointData,d=(h=l||{}).type,f=h.matchId,p=h.playerId,g=h.opponentId,m=void 0===g?ma.playerId:g,v=c===p,y=m===ma.playerId,b=y||xe()(i=[m,p]).call(i,c),A=va,e.prev=10,e.next=13,window.game.facebook.getTournamentAsync();case 13:A=Aa,e.next=18;break;case 16:e.prev=16,e.t0=e.catch(10);case 18:u&&d===fa&&!v&&(A=ya),f&&u&&b&&d===pa&&(A=ya),u&&"matching_group_match"===d&&(A=ba),t(Ca(A));case 22:case"end":return e.stop()}}),e,null,[[10,16]])})));return function(t,n){return e.apply(this,arguments)}}());case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.initGoogleAnalytics=function(){var e=this.player.getPlayerId();this.analytics.add(new Na(this.game,{userId:e,trackingId:Ga,measuringId:Ma,version:"2"}))},n.initFacebookAnalytics=function(){var e=GameCore.Configs.Analytics.FacebookAnalytics||{},t=e.prefix,n=e.consoleLog;"string"===typeof t&&this.analytics.add(new La(this.game,t,n))},n.handleYTAudioSync=function(){var e=window.game.audio;window.GameSDK.isAudioEnabled()||(e.muteAll(),e.pauseAllSounds(),e.pauseMusic())},t}(Phaser.Scene),Za=Fa,Ua=n(671),Ha=function(e){function t(){for(var t,n,i=arguments.length,a=new Array(i),r=0;r<i;r++)a[r]=arguments[r];return(n=e.call.apply(e,L()(t=[this]).call(t,a))||this).run=function(){n.scene.switch(_a.C.GAME_SCENE),n.facebook.attemptToAddShortcut()},n}(0,p.Z)(t,e);var n=t.prototype;return n.preload=function(){this.events.on("wake",this.run),this.events.on("resume",this.run),this.events.on("create",this.run)},n.create=function(){e.prototype.create.call(this)},t}(Ua.Z);var Wa=Ha,za=n(637),Ya=n(668),Va={targets:[],duration:600,ease:Phaser.Math.Easing.Linear,props:{angle:{from:0,to:360}}},Ka=function(e){function t(t){return e.call(this,Va,t)||this}return(0,p.Z)(t,e),t}(Ya.Z),ja=An.Z.DEFAULT,Xa=ja.KEY,Ja=ja.FRAME,qa=function(e){function t(t){var n;return(n=e.call(this,t,0,0,Xa,Ja.PRELOADER)||this).anim=void 0,n.runAnimation(),n.setWorldSize(56.5,56.5),n.scene.add.existing((0,za.Z)(n)),n}(0,p.Z)(t,e);var n=t.prototype;return n.runAnimation=function(){var e;null==(e=this.anim)||e.remove(),this.anim=new Ka({targets:[this],repeat:-1,duration:1200}),this.anim.play()},n.setVisible=function(t){return e.prototype.setVisible.call(this,t),t?this.runAnimation():this.anim.stop(),this},t}(Phaser.GameObjects.Image),Qa=qa,$a=n(660),er=n(658),tr=n(677),nr=n(640),ir="global",ar="friend",rr=GameCore.Configs,sr=rr.ApiHost,or=rr.OtherHost,cr=rr.LeadersBoard,ur=cr.Prefix,lr=cr.LeaderboardId,hr=cr.Name,dr=ur+"/"+lr+"/leaders",fr=ur+"/"+lr+"/players",pr=function(e){var t="";return lr?(e===ir?t=dr:e===ar&&(t=fr),t):t},gr=function(){var e=(0,i.Z)(r().mark((function e(t){var n,i,a,s,o,c;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Me()(t).call(t,(function(e){return e.playerId})),a=GameCore.Utils.Object.keyBy(t,"playerId"),s=GameCore.Utils.String.params({playerIds:i}),e.next=5,(0,ot.U)("players?"+s,{},sr);case 5:return o=e.sent,c=Me()(n=o.data).call(n,(function(e){var t=a[e.playerId];return(0,f.Z)({},e,{score:t.score,rank:t.rank,getScore:function(){return t.score},getFormattedScore:function(){return""},getTimestamp:function(){return(new Date).valueOf()},getRank:function(){return t.rank},getExtraData:function(){return t.extraData},getPlayer:function(){return{getName:function(){return e.name},getPhoto:function(){return e.photo},getID:function(){return e.playerId}}}})})),e.abrupt("return",c);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),mr=function(){var e=(0,i.Z)(r().mark((function e(t){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===t&&(t={}),null==lr){e.next=3;break}return e.abrupt("return",vr(t));case 3:return e.abrupt("return",yr(t));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),vr=function(){var e=(0,i.Z)(r().mark((function e(t){var n,i,a,s,o;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===t&&(t={}),n=[],i=pr(ir)){e.next=5;break}return e.abrupt("return",n);case 5:return a=GameCore.Utils.String.params(t),e.next=8,(0,ot.U)(i+"?"+a,{},or);case 8:if(s=e.sent,!((o=(null==s?void 0:s.data)||[]).length<1)){e.next=12;break}return e.abrupt("return",n);case 12:return n=o,e.abrupt("return",gr(n));case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),yr=function(){var e=(0,i.Z)(r().mark((function e(t){var n,i,a,s,o;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return void 0===t&&(t={}),i=(n=t).limit,a=n.offset,e.next=4,window.GameSDK.getLeaderboardAsync(hr);case 4:return s=e.sent,e.next=7,s.getEntriesAsync(i,a);case 7:return o=e.sent,e.abrupt("return",o);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),br=function(){var e=(0,i.Z)(r().mark((function e(t){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===t&&(t={}),null==lr){e.next=3;break}return e.abrupt("return",Ar(t));case 3:return e.abrupt("return",Er(t));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ar=function(){var e=(0,i.Z)(r().mark((function e(t){var n,i,a,s,o;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===t&&(t={}),n=[],i=pr(ar)){e.next=5;break}return e.abrupt("return",n);case 5:return a=GameCore.Utils.String.params(t),e.next=8,(0,ot.U)(i+"?"+a,{},or);case 8:if(s=e.sent,!((o=(null==s?void 0:s.data)||[]).length<1)){e.next=12;break}return e.abrupt("return",n);case 12:return n=o,e.abrupt("return",gr(n));case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Er=function(){var e=(0,i.Z)(r().mark((function e(t){var n,i,a,s,o;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return void 0===t&&(t={}),i=(n=t).limit,a=n.offset,e.next=4,window.GameSDK.getLeaderboardAsync(hr);case 4:return s=e.sent,e.next=7,s.getConnectedPlayerEntriesAsync(i,a);case 7:return o=e.sent,e.abrupt("return",o);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Sr=(function(){var e=(0,i.Z)(r().mark((function e(t){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==lr){e.next=2;break}return e.abrupt("return",Sr(t));case 2:return e.abrupt("return",Tr());case 3:case"end":return e.stop()}}),e)})))}(),function(){var e=(0,i.Z)(r().mark((function e(t){var n,i,a,s,o;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=null,t){e.next=3;break}return e.abrupt("return",n);case 3:if(i=pr(ar)){e.next=6;break}return e.abrupt("return",n);case 6:return a=GameCore.Utils.String.params({playerIds:t}),e.next=9,(0,ot.U)(i+"?"+a,{},or);case 9:if(s=e.sent,!((o=(null==s?void 0:s.data)||[]).length<1)){e.next=13;break}return e.abrupt("return",n);case 13:return e.next=15,gr(o);case 15:return n=e.sent[0],e.abrupt("return",n);case 17:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),Tr=function(){var e=(0,i.Z)(r().mark((function e(){var t,n;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,window.GameSDK.getLeaderboardAsync(hr);case 2:return t=e.sent,e.next=5,t.getPlayerEntryAsync();case 5:return n=e.sent,e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Cr=function(){var e=(0,i.Z)(r().mark((function e(t,n){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(window.GameSDK.submitGameResultsAsync(n).catch((function(e){})),null==lr){e.next=5;break}if(""!==window.game.auth.getToken()){e.next=4;break}return e.abrupt("return",o().reject("Not logged in"));case 4:return e.abrupt("return",wr(t,n));case 5:return e.abrupt("return",Ir(n));case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),wr=function(){var e=(0,i.Z)(r().mark((function e(t,n){var i;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,ot.v)("leaderboards/"+lr+"/players/"+t,{score:n},{},or);case 2:return i=e.sent,e.abrupt("return",(null==i?void 0:i.data)||{});case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),Ir=function(){var e=(0,i.Z)(r().mark((function e(t){var n;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,window.GameSDK.getLeaderboardAsync(hr);case 2:return n=e.sent,e.next=5,n.setScoreAsync(t);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();function xr(e,t){var n="undefined"!==typeof k()&&O()(e)||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){var n;if(!e)return;if("string"===typeof e)return Pr(e,t);var i=w()(n=Object.prototype.toString.call(e)).call(n,8,-1);"Object"===i&&e.constructor&&(i=e.constructor.name);if("Map"===i||"Set"===i)return x()(e);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return Pr(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var i=0;return function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Pr(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var kr=GameCore.Configs.LeadersBoard,_r=kr.UseMock,Or=kr.Limit,Rr=kr.MockOptions,Lr=function(e,t,n,a){return void 0===n&&(n=Or),void 0===a&&(a=0),function(){var s=(0,i.Z)(r().mark((function i(s){var o,c,u,l,d,f,p,g,m,v,y,b,A,E,S,T,C,w;return r().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(i.prev=0,o=window.game.player,c=o.getPlayerId(),s(Br()),s({type:Gi,payload:{leaderboardId:e,type:t,limit:n,offset:a}}),!_r){i.next=11;break}return i.next=8,(0,nr.qZ)(1e3);case 8:return d=Me()(u=Ht()(l=new Array(n)).call(l,null)).call(u,(function(e,t){var n=(t+1)*(a+1),i=Rr.PlayerEntryIndex===t,r={playerId:"0"+n,name:"MPlayer "+n,photo:"./assets/images/others/avatar.png",rank:n,score:Math.floor(1e5/n)};if(i){var s=window.game.player.getPlayer(),o=s.playerId,c=s.name,u=s.photo;r.playerId=o,r.name=c,r.photo=u}return r})),s(Dr(d,t)),i.abrupt("return");case 11:if(f=[],t!==ir){i.next=18;break}return i.next=15,mr({limit:n,offset:a});case 15:f=i.sent,i.next=26;break;case 18:if(t!==ar){i.next=26;break}return(p=o.getConnectedPlayerIds(n,a)).push(c),g=GameCore.Utils.Array.unique(p),i.next=24,br({playerIds:g,limit:g.length});case 24:f=i.sent,g.forEach((function(e){var t=Be()(f).call(f,(function(t){return t.playerId===e}));t&&0!==t.length||f.push({playerId:e,score:0})}));case 26:for(m={},v=xr(f);!(y=v()).done;)b=y.value,A=b.playerId,E=b.score,S=b.rank,T=b.getPlayer(),C=T.getPhoto(),w=T.getName(),m[A]={playerId:A,name:w,photo:C,score:E,rank:S};s(Dr(m,t)),i.next=36;break;case 32:i.prev=32,i.t0=i.catch(0),s(Dr([],t)),(0,h.tO)(i.t0);case 36:case"end":return i.stop()}}),i,null,[[0,32]])})));return function(e){return s.apply(this,arguments)}}()},Dr=function(e,t){return{type:Fi,payload:{leaders:e,type:t}}},Br=function(){return{type:Zi,payload:{}}},Nr=function(e){return e[Li]},Mr=((0,me.P1)([function(e){return Nr(e).leaderboardId}],(function(e){return e})),(0,me.P1)([function(e){return Nr(e).leaders}],(function(e){return e}))),Gr=(0,me.P1)([function(e){return Nr(e).isRequesting}],(function(e){return e})),Fr=function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).name="InvalidContextId",i.message=t||"This contextId is not valid",i.payload=n,i}return(0,p.Z)(t,e),t}((0,K.Z)(Error)),Zr=function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).name="NewScoreIsBad",i.message=t||"The new score is bad",i.payload=n,i}return(0,p.Z)(t,e),t}((0,K.Z)(Error)),Ur=function(e){return e[ki]},Hr=((0,me.P1)([function(e){return Ur(e).active}],(function(e){return e})),(0,me.P1)([function(e){return Ur(e).tournamentId}],(function(e){return e}))),Wr=((0,me.P1)([function(e){return Ur(e).bestSessionScore}],(function(e){return e})),(0,me.P1)([function(e){return Ur(e).isRequesting}],(function(e){return e})),(0,me.P1)([function(e){return Ur(e).leaderboardId}],(function(e){return e}))),zr=n(661);function Yr(e,t){var n="undefined"!==typeof k()&&O()(e)||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){var n;if(!e)return;if("string"===typeof e)return Vr(e,t);var i=w()(n=Object.prototype.toString.call(e)).call(n,8,-1);"Object"===i&&e.constructor&&(i=e.constructor.name);if("Map"===i||"Set"===i)return x()(e);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return Vr(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var i=0;return function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Vr(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}GameCore.Configs.Tournament.UseLeaderboard;var Kr=function(e,t){return void 0===t&&(t=""),{type:_i,payload:{tournamentId:e,leaderboardId:t}}},jr=function(e){return function(){var t=(0,i.Z)(r().mark((function t(n){var i,a,s,o,c,u,l,h,d,f;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,i=window.game.facebook,a=e.playerId,s=e.playerName,o=e.score,c=e.level,u=e.autoStartGame,l=s+"'s Tournament",h=GameCore.Utils.String.generateObjectId(),t.next=7,i.tournament.createAsync({initialScore:o,config:{title:l,tournamentTitle:l},data:{playerId:a,playerName:s,leaderboardId:h,level:c}});case 7:return d=t.sent,f=d.getID(),u&&n(Kr(f,h)),t.next=12,(0,zr.Z5)({_id:h,createdBy:a,name:l,description:F()({contextID:f,tournamentID:f}),type:"tournament_leaderboard",expireTime:604800});case 12:if(t.sent._id!==h){t.next=16;break}return t.next=16,(0,zr.bh)(h,a,o);case 16:window.game.player.joinTournament({leaderboardId:h,endTime:d.getEndTime(),level:c}),e.success=!0,t.next=24;break;case 20:throw t.prev=20,t.t0=t.catch(0),e.success=!1,t.t0;case 24:case"end":return t.stop()}}),t,null,[[0,20]])})));return function(e){return t.apply(this,arguments)}}()},Xr=function(e){return(0,i.Z)(r().mark((function t(){var n,i,a,s,o;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=window.game.facebook,i=e.playerId,a=e.playerName,s=e.score,o={score:s,data:{type:"tournament",playerId:i,playerName:a}},t.next=5,n.tournament.shareAsync(o);case 5:case"end":return t.stop()}}),t)})))},Jr=(function(){var e=(0,i.Z)(r().mark((function e(){var t,n,i,a,s,o,c,u,l;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=window.game.facebook,e.next=4,t.getTournamentAsync();case 4:if(n=e.sent,null!=(i=JSON.parse(n.getPayload()||"{}")).leaderboardId){e.next=21;break}return e.next=9,(0,zr.Iy)();case 9:a=e.sent,s=n.getContextID(),o={payload:{}},c=Yr(a);case 13:if((u=c()).done){e.next=20;break}if((l=u.value).contextID!==s){e.next=18;break}return o=l,e.abrupt("return",o.payload.leaderboardId);case 18:e.next=13;break;case 20:return e.abrupt("return",o.payload.leaderboardId||"");case 21:return e.abrupt("return",i.leaderboardId);case 24:return e.prev=24,e.t0=e.catch(0),e.abrupt("return",null);case 27:case"end":return e.stop()}}),e,null,[[0,24]])})))}(),0),qr=!1,Qr=0,$r=!1,es=(function(){var e=(0,i.Z)(r().mark((function e(t,n){var i,a,s,o,c,u,l,h,d,f;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=window.game,a=i.player,s=i.facebook,o=a.getPlayer(),c=o.playerId,u=o.name,l=a.getBestScore(),e.prev=3,e.next=6,s.getTournamentAsync();case 6:if(h=Wr(n),!ts(t,l)){e.next=15;break}return Jr+=1,d={playerId:c,playerName:u,score:t,leaderboardId:h},e.next=12,window.game.storage.dispatch(Xr(d)).then((function(){qr=!0}));case 12:qr=!0,e.next=17;break;case 15:return e.next=17,s.tournament.postScoreAsync(t);case 17:e.next=28;break;case 19:if(e.prev=19,e.t0=e.catch(3),"TOURNAMENT_NOT_FOUND"!==(null==e.t0?void 0:e.t0.code)){e.next=28;break}if(es(t,l)){e.next=24;break}return e.abrupt("return");case 24:return Qr+=1,f={playerId:c,playerName:u,score:t,autoStartGame:!1},e.next=28,window.game.storage.dispatch(jr(f)).then((function(){$r=!0})).catch((function(){}));case 28:return e.prev=28,e.finish(28);case 30:case"end":return e.stop()}}),e,null,[[3,19,28,30]])})))}(),function(e,t){return!window.game.player.getPlayerIsNew()&&e>t||!($r||Qr>1)&&Math.random()<.5}),ts=function(){return!(qr||Jr>1)},ns=(function(){var e=(0,i.Z)(r().mark((function e(t){var n,i,a,s;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=window.game,i=n.player,a=n.facebook,s=i.getBestScore(),e.prev=2,e.next=5,a.getTournamentAsync();case 5:if(!ts(t,s)){e.next=12;break}return Jr+=1,e.next=9,a.tournament.shareAsync({score:t});case 9:qr=!0,e.next=14;break;case 12:return e.next=14,a.tournament.postScoreAsync(t);case 14:e.next=24;break;case 16:if(e.prev=16,e.t0=e.catch(2),"TOURNAMENT_NOT_FOUND"!==e.t0.code){e.next=24;break}if(es(t,s)){e.next=21;break}return e.abrupt("return");case 21:return Qr+=1,e.next=24,a.tournament.createAsync(t).then((function(){$r=!0})).catch((function(e){}));case 24:case"end":return e.stop()}}),e,null,[[2,16]])})))}(),function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).name="InvalidMatchId",i.message=t||"Invalid match id",i.payload=n,i}return(0,p.Z)(t,e),t}((0,K.Z)(Error))),is=function(e){return e[ei]},as=(0,me.P1)([function(e){return is(e).gameplay.mode}],(function(e){return e})),rs=((0,me.P1)([function(e){return is(e).gameplay.status}],(function(e){return e})),(0,me.P1)([function(e){return is(e).gameplay.rescued}],(function(e){return e})),(0,me.P1)([function(e){return is(e).gameplay.startAt}],(function(e){return e})),(0,me.P1)([function(e){return is(e).gameplay.finishAt}],(function(e){return e})),function(e,t){return t.playerId}),ss=function(e){return is(e).match.challenge},os=((0,me.P1)([function(e){return is(e).match.isRequesting}],(function(e){return e})),(0,me.P1)([function(e){return is(e).match.single}],(function(e){return e}))),cs=(0,me.P1)([function(e){return is(e).match.single._id}],(function(e){return e})),us=(0,me.P1)([function(e){return is(e).match.single.score}],(function(e){return e||0})),ls=((0,me.P1)([function(e){return is(e).match.single.level}],(function(e){return e||0})),(0,me.P1)([function(e){var t;return null==(t=is(e).match.single.data)?void 0:t.diamond}],(function(e){return e||0})),(0,me.P1)([function(e){var t;return null==(t=is(e).match.single.data)?void 0:t.fen}],(function(e){return e||null})),(0,me.P1)([function(e){return is(e).match.single.status}],(function(e){return e})),(0,me.P1)([function(e){return is(e).match.single.playerId}],(function(e){return e})),(0,me.P1)([ss],(function(e){return e}))),hs=(0,me.P1)([function(e){return is(e).match.challenge._id}],(function(e){return e})),ds=(0,me.P1)([function(e){return is(e).match.challenge.status}],(function(e){return e})),fs=(0,me.P1)([function(e){return is(e).match.challenge.opponentInfo}],(function(e){return e})),ps=((0,me.P1)([function(e){return is(e).match.challenge.whitePlayerId}],(function(e){return e})),(0,me.P1)([function(e){return is(e).match.challenge.blackPlayerId}],(function(e){return e})),(0,me.P1)([ls,rs],(function(e,t){var n=e.whitePlayerId,i=e.blackPlayerId;return n!==t&&i===t?n:i!==t&&n===t?i:""})),(0,me.P1)([ls,rs],(function(e,t){var n=e.whitePlayerId,i=e.blackPlayerId;return n===t?n:i===t?i:ma.playerId}))),gs=(0,me.P1)([ls,rs],(function(e,t){var n=e.whitePlayerId,i=e.blackPlayerId,a=e.whitePlayerFinish,r=e.blackPlayerFinish;return t&&n===t?a:!(!t||i!==t)&&r})),ms=(0,me.P1)([ls,function(e,t){return t.opponentId}],(function(e,t){var n=e.whitePlayerId,i=e.blackPlayerId,a=e.whitePlayerFinish,r=e.blackPlayerFinish;return t&&n===t?a:!(!t||i!==t)&&r})),vs=(0,me.P1)([ss],(function(e){return e.extraData})),ys=(0,me.P1)([function(e){return is(e).match.group.opponentInfo}],(function(e){return e})),bs=((0,me.P1)([function(e){return is(e).match.online.players}],(function(e){return e})),(0,me.P1)([function(e){return is(e).match.journey}],(function(e){return e})),(0,me.P1)([function(e){return is(e).match.journey._id}],(function(e){return e})),(0,me.P1)([function(e){return is(e).match.journey.level}],(function(e){return e})),(0,me.P1)([function(e){return is(e).match.challenge.matchResultFromMessage}],(function(e){return e})),(0,me.P1)([function(e){return is(e).stats.data}],(function(e){return e}))),As=(0,me.P1)([function(e){return is(e).stats.current}],(function(e){return e})),Es=((0,me.P1)([function(e){return is(e).stats.isRequesting}],(function(e){return e})),function(e){try{var t=localStorage.getItem(e);return null===t?null:GameCore.Utils.Json.decode(t)}catch(n){return null}}),Ss=function(e,t){try{var n=Es(e),i={};GameCore.Utils.Valid.isObject(n)&&(i=n);var a=GameCore.Utils.Json.clone(t);if(!GameCore.Utils.Valid.isObject(a))return!1;var r=GameCore.Utils.Object.clear(a),s=(0,Kn.TS)(i,r),o=GameCore.Utils.Json.encode(s);return localStorage.setItem(e,o),!0}catch(c){return!1}},Ts=GameCore.Configs.ApiHost,Cs=(function(){var e=(0,i.Z)(r().mark((function e(t){var n;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"single-matches",e.next=3,(0,ot.v)("single-matches",t,{},Ts);case 3:return n=e.sent,e.abrupt("return",(null==n?void 0:n.data)||{});case 5:case"end":return e.stop()}}),e)})))}(),function(){var e=(0,i.Z)(r().mark((function e(){var t;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"single-matches/active",e.next=3,(0,ot.U)("single-matches/active",{},Ts);case 3:return t=e.sent,e.abrupt("return",(null==t?void 0:t.data)||{});case 5:case"end":return e.stop()}}),e)})))}(),function(){var e=(0,i.Z)(r().mark((function e(t,n){var i,a;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i="single-matches/"+t+"/move",e.next=3,(0,ot.v)(i,n,{},Ts);case 3:return a=e.sent,e.abrupt("return",(null==a?void 0:a.data)||{});case 5:case"end":return e.stop()}}),e)})))}(),function(){var e=(0,i.Z)(r().mark((function e(t){var n,i;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="single-matches/"+t+"/finish",e.next=3,(0,ot.v)(n,{},{},Ts);case 3:return i=e.sent,e.abrupt("return",(null==i?void 0:i.data)||{});case 5:case"end":return e.stop()}}),e)})))}(),function(){var e=(0,i.Z)(r().mark((function e(t,n){var i;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"matches",e.next=3,(0,ot.v)("matches",{opponentPlayerId:t,extraData:n},{},Ts);case 3:return i=e.sent,e.abrupt("return",(null==i?void 0:i.data)||{});case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),ws=function(){var e=(0,i.Z)(r().mark((function e(t){var n,i;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="matches/"+t+"/join",e.next=3,(0,ot.v)(n,{},{},Ts);case 3:return i=e.sent,e.abrupt("return",(null==i?void 0:i.data)||{});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Is=function(){var e=(0,i.Z)(r().mark((function e(t){var n,i;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="matches/"+t,e.next=3,(0,ot.U)(n,{},Ts);case 3:return i=e.sent,e.abrupt("return",(null==i?void 0:i.data)||{});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),xs=function(){var e=(0,i.Z)(r().mark((function e(t,n,i,a){var s,o;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s="matches/"+t+"/finish",e.next=3,(0,ot.v)(s,{matchId:t,score:n,level:i,extraData:a},{},Ts);case 3:return o=e.sent,e.abrupt("return",(null==o?void 0:o.data)||{});case 5:case"end":return e.stop()}}),e)})));return function(t,n,i,a){return e.apply(this,arguments)}}(),Ps=function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).name="InvalidMatchStatus",i.message=t||"The match status is not valid",i.payload=n,i}return(0,p.Z)(t,e),t}((0,K.Z)(Error)),ks=function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).name="InvalidOpponentId",i.message=t||"Invalid opponent id",i.payload=n,i}return(0,p.Z)(t,e),t}((0,K.Z)(Error)),_s=function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).name="InvalidBlackPlayerId",i.message=t||"Invalid black player id",i.payload=n,i}return(0,p.Z)(t,e),t}((0,K.Z)(Error)),Os=function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).name="InvalidRequestedMatchId",i.message=t||"The matchId in match data not matched with requested matchId",i.payload=n,i}return(0,p.Z)(t,e),t}((0,K.Z)(Error)),Rs=function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).name="InvalidWhitePlayerId",i.message=t||"Invalid white player id",i.payload=n,i}return(0,p.Z)(t,e),t}((0,K.Z)(Error)),Ls=function(e){var t=e.matchId,n=e.currentMatchId;if(""===t||"string"!==typeof t)throw new ns(null,{matchId:t});if(""===n||"string"!==typeof n)throw new ns(null,{currentMatchId:n});if(t!==n)throw new Os(null,{matchId:t,currentMatchId:n})},Ds=function(e){var t=e.playerId,n=e.match,i=n._id,a=n.playerId,r=n.status;if(""===i||"string"!==typeof i)throw new ns(null,{matchId:i});if("finished"===r||"string"!==typeof r)throw new Ps("This match is finished",{status:r});if(a!==t)throw new da(null,{playerId:a,currentPlayerId:t})},Bs=function(e){var t=e.opponentId;if(""===t||"string"!==typeof t)throw new ks(null,{opponentId:t})},Ns=function(e){var t=e.matchId;if(""===t||"string"!==typeof t)throw new ns(null,{matchId:t})},Ms=function(e){var t=e.match,n=t._id,i=t.whitePlayerId,a=t.blackPlayerId;if(""===n||"string"!==typeof n)throw new ns(null,{matchId:n});if(""===i||"string"!==typeof i)throw new Rs(null,{whitePlayerId:i});if(""===a||"string"!==typeof a)throw new _s(null,{blackPlayerId:a})},Gs=GameCore.Configs.Match,Fs=function(e){try{return GameCore.Utils.Hash.stringToHash(F()(e))}catch(t){return""}},Zs=function(e){try{return JSON.parse(GameCore.Utils.Hash.hashToString(e))}catch(t){return""}},Us=function(){return function(){var e=(0,i.Z)(r().mark((function e(t){var n,i,a,s;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.prev=0,n=window.game,i=n.player,n.globalScene.screen.open($a.o4.NOTIFY_SCREEN,{message:"loading",loading:!0}),t({type:ci,payload:{}}),a=i.getPlayerId(),s=(0,f.Z)({},Gs.LocalSingleMatchDefault,{status:"active",playerId:a,startedAt:Date.now()}),Ds({playerId:a,match:s}),t(Ws(s)),Ss(Gs.SingleMatchStore,s),e.next=19;break;case 11:if(e.prev=11,e.t0=e.catch(0),t(Ws(null)),!(e.t0 instanceof ns)){e.next=16;break}return e.abrupt("return");case 16:if(!(e.t0 instanceof Ps)){e.next=18;break}return e.abrupt("return");case 18:(0,h.tO)(e.t0);case 19:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t){return e.apply(this,arguments)}}()},Hs=function(e){return function(){var t=(0,i.Z)(r().mark((function t(n,i){var a,s,o,c,u,l,d,p;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:t.prev=0,a=window.game.player,Ns({matchId:e}),s=i(),o=cs(s),c=a.getPlayerId(),Ls({matchId:e,currentMatchId:o}),n({type:"MATCH_SINGLE_FINISH_REQUEST",payload:{matchId:e}}),u=os(s),Ds({playerId:c,match:u}),l=(0,f.Z)({},Gs.LocalSingleMatchDefault,u,{_id:e,status:"finished",playerId:c,finishAt:Date.now()}),n(Ws(l)),d=l.data,(p=(0,f.Z)({},l)).data=Fs(d),Ss(Gs.SingleMatchStore,p),t.next=26;break;case 18:if(t.prev=18,t.t0=t.catch(0),n(Ws(null)),!(t.t0 instanceof ns)){t.next=23;break}return t.abrupt("return");case 23:if(!(t.t0 instanceof Ps)){t.next=25;break}return t.abrupt("return");case 25:(0,h.tO)(t.t0);case 26:case"end":return t.stop()}}),t,null,[[0,18]])})));return function(e,n){return t.apply(this,arguments)}}()},Ws=function(e){return{type:li,payload:{match:e}}},zs=function(){return{type:hi,payload:{}}},Ys=function(e,t){return function(){var n=(0,i.Z)(r().mark((function n(i){var a,s,o,c;return r().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,a=window.game,s=a.profile,a.globalScene.screen.open($a.o4.NOTIFY_SCREEN,{message:"loading",loading:!0}),o=e.playerId,Bs({opponentId:o}),i({type:fi,payload:{opponentInfo:e,extraData:t}}),n.next=8,Cs(o,t);case 8:return c=n.sent,Ms({match:c}),n.next=12,s.requestProfiles([o]);case 12:i(Xs(c)),n.next=23;break;case 15:if(n.prev=15,n.t0=n.catch(0),i(Xs(null)),!(n.t0 instanceof ns)){n.next=20;break}return n.abrupt("return");case 20:if(!(n.t0 instanceof ks)){n.next=22;break}return n.abrupt("return");case 22:(0,h.tO)(n.t0);case 23:case"end":return n.stop()}}),n,null,[[0,15]])})));return function(e){return n.apply(this,arguments)}}()},Vs=function(e){return function(){var t=(0,i.Z)(r().mark((function t(n){var i,a,s,o,c,u,l,d,f;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,i=window.game,a=i.player,s=i.profile,i.globalScene.screen.open($a.o4.NOTIFY_SCREEN,{message:"loading",loading:!0}),Ns({matchId:e}),n({type:di,payload:{matchId:e}}),t.next=7,ws(e);case 7:if(o=t.sent,Ms({match:o}),c=o.status,u=o.whitePlayerId,l=o.blackPlayerId,c!==Ti){t.next=16;break}return d=a.getPlayerId(),f=d===u?l:u,t.next=16,s.requestProfiles([f]);case 16:n(Xs(o)),t.next=25;break;case 19:if(t.prev=19,t.t0=t.catch(0),n(Xs(null)),!(t.t0 instanceof ns)){t.next=24;break}return t.abrupt("return");case 24:(0,h.tO)(t.t0);case 25:case"end":return t.stop()}}),t,null,[[0,19]])})));return function(e){return t.apply(this,arguments)}}()},Ks=function(e,t){return function(){var n=(0,i.Z)(r().mark((function n(i){var a,s,o,c,u,l,d,f,p;return r().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,a=window.game,s=a.player,a.globalScene.screen.open($a.o4.NOTIFY_SCREEN,{message:"loading",loading:!0}),Ns({matchId:e}),i({type:gi,payload:{matchId:e,opponentInfo:t}}),n.next=7,Is(e);case 7:o=n.sent,Ms({match:o}),c=o.whitePlayerId,u=o.whitePlayerScore,l=o.blackPlayerScore,d=s.getPlayerId(),f=s.getPlayerData(),p=f.score,i(Xs(o,{score:d===c?u:l,bestScore:p})),n.next=23;break;case 17:if(n.prev=17,n.t0=n.catch(0),i(Xs(null)),!(n.t0 instanceof ns)){n.next=22;break}return n.abrupt("return");case 22:(0,h.tO)(n.t0);case 23:case"end":return n.stop()}}),n,null,[[0,17]])})));return function(e){return n.apply(this,arguments)}}()},js=function(e,t,n){return function(){var a=(0,i.Z)(r().mark((function i(a){var s,o;return r().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.prev=0,Ns({matchId:e}),a({type:pi,payload:{matchId:e,score:t,extraData:n}}),s=n.level,i.next=6,xs(e,t,s,n);case 6:return o=i.sent,Ms({match:o}),i.next=10,a(Xs(o));case 10:i.next=18;break;case 12:if(i.prev=12,i.t0=i.catch(0),a(Xs(null)),!(i.t0 instanceof ns)){i.next=17;break}return i.abrupt("return");case 17:(0,h.tO)(i.t0);case 18:case"end":return i.stop()}}),i,null,[[0,12]])})));return function(e){return a.apply(this,arguments)}}()},Xs=function(e,t,n){return void 0===n&&(n=null),{type:mi,payload:{match:e,opponentInfo:t,current:n}}},Js=function(e){return{type:yi,payload:{opponentInfo:e}}},qs=function(e,t){return{type:Ei,payload:{matchId:e,players:t}}},Qs=function(e){return{type:ri,payload:{playerId:e}}},$s=function(e,t){return{type:si,payload:{playerId:e,stats:t}}},eo=function(e){return{type:oi,payload:{stats:e}}},to=function(e){return e.GAME_MODE_CHANGED="game-mode-changed",e.BACKGROUND_CHANGED="background-changed",e.GAME_START="game-start",e}(to||{}),no=to,io=function(e){return e.SINGLE="single",e.CHALLENGE_FRIENDS="challenge-friends",e.TOURNAMENT="tournaments",e}(io||{}),ao=io,ro=function(e){function t(){var t;return(t=e.call(this)||this).gameMode=void 0,t.autoPlaySingleMode=void 0,t.friendsChallenged=void 0,t.isGameLoadedInTournament=!1,t.gameMode=ao.SINGLE,t.autoPlaySingleMode=!0,t.friendsChallenged=[],t}(0,p.Z)(t,e);var n=t.prototype;return n.setGameMode=function(e){this.gameMode=e,this.emit(no.GAME_MODE_CHANGED)},n.getGameMode=function(){return this.gameMode},n.isSingleMode=function(){return this.gameMode==ao.SINGLE},n.isChallengeMode=function(){return this.gameMode==ao.CHALLENGE_FRIENDS},n.isTournamentMode=function(){return this.gameMode===ao.TOURNAMENT},(0,de.Z)(t,null,[{key:"instance",get:function(){return this._instance||(this._instance=new t)}}]),t}(Phaser.Events.EventEmitter);ro._instance=void 0;var so=ro,oo=function(e){var t=e.contextId;if(""===t||"string"!==typeof t)throw new Fr(null,{contextId:t})},co=null,uo=function(e){clearTimeout(co),co=setTimeout((function(){window.game.globalScene.screen.close($a.o4.NOTIFY_SCREEN)}),e)},lo=function(e){return function(t){try{if(t(zs()),e){var n=e.getPayload(),i=e.getID();if(n){var a=JSON.parse(n).leaderboardId;t(Kr(i.toString(),a))}}t(bo(Aa))}catch(r){(0,h.tO)(r)}}},ho=function(){return function(){var e=(0,i.Z)(r().mark((function e(t){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{t(zs()),t(bo(va))}catch(n){(0,h.tO)(n)}case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},fo=function(e,t){return void 0===e&&(e="10"),void 0===t&&(t=!1),function(n){try{n(po("reset",e,t))}catch(i){(0,h.tO)(i)}}},po=function(e,t,n){return void 0===t&&(t="10"),void 0===n&&(n=!1),function(){var a=(0,i.Z)(r().mark((function i(a){var s,o,c,u,l,d,f,p,g,m,v,y,b,A,E,S,T,C;return r().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(i.prev=0,s=window.game,o=s.player,c=s.facebook,(u=s.globalScene).screen.open($a.o4.NOTIFY_SCREEN,{message:"loading",loading:!0}),l=e,d=c.contextType,t||(f=GameCore.Configs.PlayerIdMock,p=GameCore.Configs.PlayerIdMock2,t=o.getPlayerId()===f?p:f),e){i.next=30;break}return i.next=9,c.chooseAsync();case 9:if(!1!==(l=i.sent)){i.next=18;break}if(n&&u.events.emit(_a.K.SWITCH,_a.C.DASHBOARD_SCENE),!so.instance.autoPlaySingleMode){i.next=17;break}return i.next=15,Eo();case 15:return a(ho()),i.abrupt("return");case 17:return i.abrupt("return");case 18:return i.prev=18,i.next=21,window.game.facebook.getTournamentAsync();case 21:return g=i.sent,a(lo(g)),i.abrupt("return");case 26:i.prev=26,i.t0=i.catch(18);case 28:i.next=40;break;case 30:if(!t||t===ma.playerId){i.next=38;break}return i.next=33,c.createAsync(t);case 33:if(!1!==(l=i.sent)){i.next=37;break}return n&&u.events.emit(_a.K.SWITCH,_a.C.DASHBOARD_SCENE),i.abrupt("return");case 37:l||"reset"===e||(l=e);case 38:d=c.contextType,a(Ta(l,d));case 40:return oo({contextId:l}),m=o.getPlayerId(),v=o.getConnectedPlayers(),i.next=45,c.getContextPlayers(m);case 45:return y=i.sent,t!==(b=ma).playerId&&v[t]?b=v[t]:1===y.length&&(b=y[0]),a(Qs()),E=(A=b).playerId,S=A.name,T=A.photo,C={playerId:E,name:S,photo:T},i.next=53,a(bo(ya,C));case 53:a(Ta(l,d)),i.next=65;break;case 56:if(i.prev=56,i.t1=i.catch(0),!(i.t1 instanceof Fr)){i.next=60;break}return i.abrupt("return");case 60:if("USER_INPUT"!==(null==i.t1?void 0:i.t1.code)){i.next=62;break}return i.abrupt("return");case 62:if("INVALID_OPERATION"!==(null==i.t1?void 0:i.t1.code)){i.next=64;break}return i.abrupt("return");case 64:(0,h.tO)(i.t1);case 65:return i.prev=65,uo(10),i.finish(65);case 68:case"end":return i.stop()}}),i,null,[[0,56,65,68],[18,26]])})));return function(e){return a.apply(this,arguments)}}()},go=function(e){return function(){var t=(0,i.Z)(r().mark((function t(n){var i,a,s,o,c;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,i=window.game,a=i.facebook,s=i.globalScene,o=i.analytics,s.screen.open($a.o4.NOTIFY_SCREEN,{message:"loading",loading:!0}),c=a.getContextID(),oo({contextId:c}),o.event(bn._.JOIN_GROUP,{group_id:c}),t.next=8,n(bo(ba,e));case 8:t.next=17;break;case 10:if(t.prev=10,t.t0=t.catch(0),!(t.t0 instanceof Fr)){t.next=14;break}return t.abrupt("return");case 14:if("INVALID_OPERATION"!==(null==t.t0?void 0:t.t0.code)){t.next=16;break}return t.abrupt("return");case 16:(0,h.tO)(t.t0);case 17:return t.prev=17,uo(100),t.finish(17);case 20:case"end":return t.stop()}}),t,null,[[0,10,17,20]])})));return function(e){return t.apply(this,arguments)}}()},mo=function(e,t){return function(){var n=(0,i.Z)(r().mark((function n(i,a){var s,o,c,u,l,d,f,p,g,m,v,y,b,A,E;return r().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,s=window.game,o=s.player,c=s.profile,u=s.facebook,(l=s.globalScene).screen.open($a.o4.NOTIFY_SCREEN,{message:"loading",loading:!0}),d=a(),f=o.getPlayerId(d),!((p=o.getConnectedPlayers(d)).length>0)||p[t]){n.next=10;break}return i(So({mode:va})),l.events.emit(_a.K.SWITCH,_a.C.GAME_SCENE),n.abrupt("return");case 10:return g=ma,n.next=13,u.getContextPlayers(f);case 13:if(m=n.sent,t===f||t===g.playerId||!p[t]){n.next=18;break}g=p[t],n.next=26;break;case 18:if(1!==m.length){n.next=22;break}g=m[0],n.next=26;break;case 22:return n.next=24,c.requestProfiles([t]);case 24:(v=c.getProfiles())[t]&&(g=v[t]);case 26:return n.next=28,i(Ks(e,g));case 28:if(d=a(),ps(d,{playerId:f})!==ma.playerId){n.next=33;break}return n.next=33,i(Vs(e));case 33:if(d=a(),ps(d,{playerId:f})===f||!p[t]){n.next=38;break}return i(fo(t,!0)),n.abrupt("return");case 38:if(hs(d)===e){n.next=42;break}return l.events.emit(_a.K.SWITCH,_a.C.DASHBOARD_SCENE),n.abrupt("return");case 42:y=ds(d),b=gs(d,{playerId:f}),A=u.getContextID(),E=u.contextType,i(Ta(A,E)),i(So(b?{mode:va}:{mode:ya,status:y})),l.events.emit(_a.K.SWITCH,_a.C.GAME_SCENE),b&&setTimeout((function(){window.game.scene.getScene(_a.C.GAME_SCENE).events.emit("player-finish-challenge")}),1e3),n.next=55;break;case 52:n.prev=52,n.t0=n.catch(0),(0,h.tO)(n.t0);case 55:return n.prev=55,uo(500),n.finish(55);case 58:case"end":return n.stop()}}),n,null,[[0,52,55,58]])})));return function(e,t){return n.apply(this,arguments)}}()},vo=function(e){return function(t){try{var n=window.game.player,i=n.getPlayerId();Cr(i,e).catch((function(e){(0,h.tO)(new Error(e))}));var a=n.getPlayerData(),r=a.score,s=void 0===r?0:r,o=a.level;s<e&&n.setBestScore(e);var c={score:e,level:o};t($s(i,c)),t(eo(c))}catch(u){if(u instanceof Zr)return;(0,h.tO)(u)}}},yo=function(){var e=window.game.cache.text.get("level1");if(!e)throw Error("Level data \u0111\xe2u r\u1ed3i b\u1ea1n \xeai!!!");return Phaser.Math.RND.pick(e.split("\n"))},bo=function(e,t){return void 0===t&&(t=null),function(){var n=(0,i.Z)(r().mark((function n(a,s){var o,c,u,l,d,f,p,g,m,v,y,b,A,E,S,T,C;return r().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,c=window.game,u=c.player,l=c.analytics,d=c.facebook,f=c.globalScene,p=d.getContextID(),g=0,m=s(),l.event(bn._.MATCH_START,{game_mode:GameCore.Utils.String.toUpperCamelCase(e),level:1,level_name:"level_1"}),a({type:ti,payload:{}}),!nn()(o=[va,Aa]).call(o,e)){n.next=16;break}return n.next=10,a((function(e){try{var t=window.game.player;e({type:ui,payload:{}});var n=t.getPlayerId(),i=Es(Gs.SingleMatchStore)||{},a=i.data;i.data=Zs(a),Ds({playerId:n,match:i}),e(Ws(i))}catch(r){if(e(Ws(null)),r instanceof ns)return;if(r instanceof da)return;if(r instanceof Ps)return;(0,h.tO)(r)}}));case 10:if(m=s(),cs(m)){n.next=15;break}return n.next=15,a(Us());case 15:g=us(m);case 16:if(e===ba&&a(Js(t)),e!==ya){n.next=28;break}return v=yo(),y={seed:v},n.next=22,a(Ys(t,y));case 22:m=s(),b=hs(m),A=fs(m),E=A.playerId,p||(p=window.FBInstant.context.getID()),S=getMessagesSentStatus(m,{opponentId:E}),p&&E&&!S&&a(sendInviteMessage(E,{contextId:p,matchId:b,seed:v}));case 28:"online"===e&&a(function(){var e=(0,i.Z)(r().mark((function e(t){var n,i,a,s,o,c,u,l;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=window.game.player,s=a.getPlayer(),o=s.playerId,c=s.name,u=s.photo,t({type:Ai,payload:{playerId:o}}),l={},Me()(n=Ht()(i=new Array(20)).call(i,null)).call(n,(function(e,t){var n="0"+(t+1);l[n]={playerId:n,name:"MPlayer "+n,photo:"./assets/images/others/avatar.png"}})),l[o]={playerId:o,name:c,photo:u},t(qs("mock",l));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),T=u.getPlayerData(m),C=T.score,a(eo({score:g,bestScore:void 0===C?0:C})),a({type:ni,payload:{mode:e,contextId:p}}),so.instance.setGameMode(e),a(Ca(e)),f.events.emit(_a.K.SWITCH,_a.C.GAME_SCENE),n.next=44;break;case 37:if(n.prev=37,n.t0=n.catch(0),!(n.t0 instanceof ns)){n.next=43;break}return window.game.globalScene.screen.open($a.o4.NOTIFY_SCREEN,{message:"Sorry!, you can now\ncreate this match!",duration:2500,loading:!1}),n.abrupt("return");case 43:(0,h.tO)(n.t0);case 44:return n.prev=44,uo(0),n.finish(44);case 47:case"end":return n.stop()}}),n,null,[[0,37,44,47]])})));return function(e,t){return n.apply(this,arguments)}}()},Ao=function(e,t){return function(){var n=(0,i.Z)(r().mark((function n(i,a){var s,o,c,u,l,h,d,p,g,m,v,y,b,A,E,S,T,C,w,I,x;return r().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(o=window.game.player,c=t.score,u=void 0===c?0:c,l=t.level,h=void 0===l?0:l,d=t.time,p=void 0===d?0:d,g=t.moves,m=void 0===g?0:g,v=a(),!(nn()(s=[va,Aa]).call(s,e)>=0)){n.next=7;break}return y=cs(v),n.next=7,i(Hs(y));case 7:if(e!==Aa){n.next=12;break}if(!(b=Wr(v))){n.next=12;break}return n.next=12,(0,zr.bh)(b,o.getPlayerId(),u);case 12:if(e===ba&&(i({type:bi,payload:{}}),A=o.getPlayerId(),i($s(A,t))),e!==ya){n.next=23;break}return E=hs(v),S=getChallengeMatchData(v),T=S.whitePlayerId,C=S.extraData,w=window.game.player.getPlayerId(),I=w===T,x=(0,f.Z)({},C),I?x.whitePlayerData={score:u,time:p,moves:m}:x.blackPlayerData={score:u,time:p,moves:m},n.next=23,i(js(E,u,(0,f.Z)({level:h},x)));case 23:i({type:ii,payload:{mode:e}});case 24:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}()},Eo=function(){var e=(0,i.Z)(r().mark((function e(){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("SOLO"!=window.FBInstant.context.getType()){e.next=2;break}return e.abrupt("return");case 2:return e.abrupt("return",new(o())((function(e){try{if("SOLO"==window.FBInstant.context.getType())return e();var t=setInterval((function(){"SOLO"==window.FBInstant.context.getType()&&(clearInterval(t),e())}),200),n=function(){var n=(0,i.Z)(r().mark((function n(){return r().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,window.FBInstant.context.switchAsync("SOLO",!0);case 3:window.game.analytics.event(bn._.SWITCH_SOLO_CONTEXT,{success:!0}),n.next=11;break;case 6:n.prev=6,n.t0=n.catch(0),window.game.analytics.event(bn._.SWITCH_SOLO_CONTEXT,{success:!1}),clearInterval(t),e();case 11:case"end":return n.stop()}}),n,null,[[0,6]])})));return function(){return n.apply(this,arguments)}}();n()}catch(a){e()}})).then((function(){})));case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),So=function(e){return function(t){var n=e.mode,i=e.status;t({type:ai,payload:{mode:n,status:i}}),so.instance.setGameMode(n),(0,h.sw)("game-mode",n)}},To=n(679),Co=n(346),wo=n.n(Co),Io=function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).name="WideFrameRenderFail",i.message=t||"Wide frame render fail",i.payload=n,i}return(0,p.Z)(t,e),t}((0,K.Z)(Error)),xo=function(e){if("string"!==typeof e||!e)throw new Io(null,{imageShare:e})},Po=(function(){var e=(0,i.Z)(r().mark((function e(){var t,n,i,a,s,o,c,u;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=window.game,n=t.player,i=t.globalScene,a=n.getPlayer(),s=a.playerId,o=a.photo,c=Po({playerId:s,playerPhoto:o})){e.next=6;break}return e.abrupt("return");case 6:return u={name:"share-best-score",width:750,height:1e3,renderOptions:c},e.next=9,i.frameCapture.capture(u);case 9:return e.abrupt("return",e.sent);case 10:case"end":return e.stop()}}),e)})))}(),function(e){var t=e.playerId,n=void 0===t?"10":t,i=e.playerPhoto,a=void 0===i?"":i;return"string"!==typeof n||"string"!==typeof a?null:{avatar:{name:""+n,type:"image",x:97,y:270,image:a,width:210,height:210,fallbackWithImage:ga.Z.AVATAR.KEY},wideFrame:{name:"wide-frame-share",type:"image",x:0,y:0,image:"./assets/wideframes/wide-frame-share.png",width:750,height:1e3}}}),ko=function(){return(0,i.Z)(r().mark((function e(){var t,n,i,a,s,o,c,u,l,d;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=window.game,n=t.player,i=t.analytics,a=t.facebook,s=t.globalScene,e.prev=1,s.screen.open($a.o4.NOTIFY_SCREEN,{message:"loading",loading:!0}),e.next=5,_o();case 5:return o=e.sent,xo(o),c=n.getPlayer(),u=c.playerId,l=c.name,d=c.photo,e.next=10,a.shareAsync({text:"Great! I have a best score!",intent:"SHARE",image:o||"",data:{playerId:u,playerName:l,playerPhoto:d,type:fa}});case 10:i.event(bn._.SHARE,{share_content_type:"BestScore",success:!0}),e.next=17;break;case 13:e.prev=13,e.t0=e.catch(1),i.event(bn._.SHARE,{share_content_type:"BestScore",success:!1}),(0,h.tO)(e.t0);case 17:return e.prev=17,s.screen.close($a.o4.NOTIFY_SCREEN),e.finish(17);case 20:case"end":return e.stop()}}),e,null,[[1,13,17,20]])})))},_o=function(){var e=(0,i.Z)(r().mark((function e(){var t,n,i,a,s,o,c,u,l,h;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=window.game,n=t.player,i=t.globalScene,a=n.getPlayer(),s=a.playerId,o=a.photo,c=a.data,u=(c||{}).score,l=Oo({playerId:s,playerPhoto:o,playerScore:u})){e.next=7;break}return e.abrupt("return");case 7:return h={name:"share-best-score",width:952,height:492,renderOptions:l},e.next=10,i.frameCapture.capture(h);case 10:return e.abrupt("return",e.sent);case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Oo=(function(){var e=(0,i.Z)(r().mark((function e(t){var n,i,a,s,o,c,u,l,h,d,f;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=window.game,i=n.player,a=n.globalScene,s=bs(t),o=i.getPlayer(),c=o.playerId,u=o.photo,l=s[c]||{},h=l.score,d=Oo({playerId:c,playerPhoto:u,playerScore:h})){e.next=8;break}return e.abrupt("return");case 8:return f={name:"share-current-score",width:952,height:492,renderOptions:d},e.next=11,a.frameCapture.capture(f);case 11:return e.abrupt("return",e.sent);case 12:case"end":return e.stop()}}),e)})))}(),function(e){var t=e.playerId,n=void 0===t?"10":t,i=e.playerPhoto,a=void 0===i?"":i,r=e.playerScore,s=void 0===r?0:r;return"string"!==typeof n||"string"!==typeof a||"number"!==typeof s?null:{avatar:{name:""+n,type:"image",x:65,y:75,image:a,width:180,height:180,fallbackWithImage:ga.Z.AVATAR.KEY},wideFrame:{name:"wide-frame-message-win",type:"image",x:0,y:0,image:"./assets/wideframes/wide-frame-message-win.png",width:952,height:492},playerScoreShadow:{type:"text",x:157,y:346,font:"600 70px",fillStyle:"#f2a62e",text:""+s,textAlign:"center"},playerScore:{type:"text",x:155,y:344,font:"600 70px",fillStyle:"#ffd10d",text:""+s,textAlign:"center"}}}),Ro=function(){return(0,i.Z)(r().mark((function e(){var t,n,i,a,s,o,c,u,l,d;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=window.game,n=t.player,i=t.analytics,a=t.facebook,s=t.globalScene,e.prev=1,s.screen.open($a.o4.NOTIFY_SCREEN,{message:"loading",loading:!0}),e.next=5,Lo();case 5:return o=e.sent,xo(o),c=n.getPlayer(),u=c.playerId,l=c.name,d=c.photo,e.next=10,a.shareAsync({text:"A ha, I'm the best!",intent:"CHALLENGE",image:o||"",data:{playerId:u,playerName:l,playerPhoto:d,type:fa}});case 10:i.event(bn._.SHARE,{share_content_type:"Leaderboard",success:!0}),e.next=17;break;case 13:e.prev=13,e.t0=e.catch(1),i.event(bn._.SHARE,{share_content_type:"Leaderboard",success:!1}),(0,h.tO)(e.t0);case 17:return e.prev=17,s.screen.close($a.o4.NOTIFY_SCREEN),e.finish(17);case 20:case"end":return e.stop()}}),e,null,[[1,13,17,20]])})))},Lo=function(){var e=(0,i.Z)(r().mark((function e(){var t,n,i,a,s,o,c,u,l,h,d,f,p,g,m,v,y,b,A,E;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=window.game,n=t.player,i=t.profile,a=t.globalScene,s=n.getPlayer(),o=s.playerId,c=s.name,u=s.photo,(l=n.getConnectedPlayerIds(99,0)).push(o),h=[],e.next=7,br({playerIds:GameCore.Utils.Array.unique(l),limit:l.length});case 7:d=e.sent,f=GameCore.Utils.Object.keyBy(d,"playerId"),p={playerId:o,name:c,photo:u,score:0},GameCore.Utils.Object.hasOwn(f,o)&&(p=f[o]),h.push(p),e.t0=wo()(r()).call(r(),f);case 14:if((e.t1=e.t0()).done){e.next=27;break}if(g=e.t1.value,!GameCore.Utils.Object.hasOwn(f,g)){e.next=25;break}if(m=f[g],3!==h.length){e.next=20;break}return e.abrupt("break",27);case 20:if(m.playerId!==o){e.next=22;break}return e.abrupt("continue",14);case 22:if(!(Number(m.score)>Number(p.score))){e.next=24;break}return e.abrupt("continue",14);case 24:h.push(m);case 25:e.next=14;break;case 27:return v=GameCore.Utils.Array.unique(l),e.next=30,i.requestProfiles(v);case 30:if(y=i.getProfiles(),h.forEach((function(e,t){var n=e.playerId;if(GameCore.Utils.Object.hasOwn(y,n)){var i=y[n],a=i.name,r=i.photo;h[t].name=a,h[t].photo=r}})),h.length<3)for(b=0;b<=3-h.length;)h.push({playerId:"bot"+b,name:"???",score:0,photo:"./assets/images/others/avatar.png"}),b++;if(A=Do({playerId:o,playerName:c,playerPhoto:u,listLeaders:h})){e.next=37;break}return e.abrupt("return");case 37:return E={name:"share-leaderboard",width:1500,height:2e3,renderOptions:A},e.next=40,a.frameCapture.capture(E);case 40:return e.abrupt("return",e.sent);case 41:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Do=function(e){var t=e.playerId,n=void 0===t?"10":t,i=e.playerPhoto,a=void 0===i?"":i,r=e.listLeaders,s=void 0===r?[]:r;if(!Array.isArray(s))return null;if("string"!==typeof n)return null;if("string"!==typeof a)return null;var o={avatar:{name:""+n,type:"image",x:510,y:278,image:a,width:510,height:510,fallbackWithImage:ga.Z.AVATAR.KEY}};return s.forEach((function(e,t){var n=e.playerId,i=e.photo;o["photo_"+n]={name:""+n,type:"image",x:436,y:1294+180*t,image:i,width:96,height:96,fallbackWithImage:ga.Z.AVATAR.KEY}})),o.wideFrame={name:"wide-frame-share",type:"image",x:0,y:0,image:"./assets/wideframes/wide-frame-share.png",width:1500,height:2e3},s.forEach((function(e,t){var n=e.playerId,i=e.name,a=e.score;o["name_"+n]={type:"text",x:600,y:1360+180*t,font:"600 48px",text:i,fillStyle:"#b18151"},o["score_"+n]={type:"text",x:1e3,y:1360+180*t,font:"600 48px",text:a,fillStyle:"#b18151"}})),o},Bo=function(){var e=(0,i.Z)(r().mark((function e(t){var n,i,a,s,o,c,u,l,h,d,f,p,g,m,v,y,b,A;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=window.game,i=n.player,a=n.globalScene,s=bs(t),o=i.getPlayer(),c=o.photo,u=o.playerId,l=fs(t),h=l.playerId,d=l.photo,f=gs(t,{playerId:u}),p=ms(t,{opponentId:h}),g=s[u]||{},m=g.score,v=s[h]||{},y=v.score,b=Mo({playerId:u,playerPhoto:c,playerScore:m,opponentId:h,opponentPhoto:d,opponentScore:y,isPlayerFinished:f,isOpponentFinished:p})){e.next=12;break}return e.abrupt("return");case 12:return A={name:"share-game-result",width:952,height:492,renderOptions:b},e.next=15,a.frameCapture.capture(A);case 15:return e.abrupt("return",e.sent);case 16:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),No=(function(){var e=(0,i.Z)(r().mark((function e(t){var n,i,a,s,o,c,u,l,h,d,f,p,g,m,v,y,b,A,E;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=window.game,a=i.player,s=i.globalScene,o=bs(t),c=a.getPlayer(),u=c.photo,l=c.playerId,e.next=5,window.FBInstant.player.getConnectedPlayersAsync();case 5:if(h=e.sent,d=No(),f=(null==(n=M()(h).call(h,(function(e){return e.getID()===d})))?void 0:n.getPhoto())||ga.Z.AVATAR.FILE,p=gs(t,{playerId:l}),g=ms(t,{opponentId:d}),m=o[l]||{},v=m.score,y=o[d]||{},b=y.score,A=Mo({playerId:l,playerPhoto:u,playerScore:v,opponentId:d,opponentPhoto:f,opponentScore:b,isPlayerFinished:p,isOpponentFinished:g})){e.next=16;break}return e.abrupt("return");case 16:return E={name:"share-game-result",width:952,height:492,renderOptions:A},e.next=19,s.frameCapture.capture(E);case 19:return e.abrupt("return",e.sent);case 20:case"end":return e.stop()}}),e)})))}(),function(){var e=window.game.player,t=window.FBInstant.getEntryPointData()||{},n=t.playerId,i=t.opponentId;return n==e.getPlayerId()?i:n}),Mo=(function(){var e=(0,i.Z)(r().mark((function e(t){var n,i,a,s,o,c,u,l,h,d,f,p,g,m,v;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=window.game,i=n.player,a=n.globalScene,s=bs(t),o=i.getPlayer(),c=o.photo,u=o.playerId,l=ys(t),h=l.playerId,d=l.photo,f=l.score,p=s[u]||{},g=p.score,m=Mo({playerId:u,playerPhoto:c,playerScore:g,opponentId:h,opponentPhoto:d,opponentScore:f})){e.next=9;break}return e.abrupt("return");case 9:return v={name:"share-group-match-result",width:952,height:492,renderOptions:m},e.next=12,a.frameCapture.capture(v);case 12:return e.abrupt("return",e.sent);case 13:case"end":return e.stop()}}),e)})))}(),function(e){var t=e.playerId,n=void 0===t?"10":t,i=e.playerPhoto,a=void 0===i?"":i,r=e.playerScore,s=void 0===r?0:r,o=e.opponentId,c=void 0===o?"20":o,u=e.opponentPhoto,l=void 0===u?"":u,h=e.opponentScore,d=void 0===h?0:h,f=e.isPlayerFinished,p=e.isOpponentFinished;if("string"!==typeof n)return null;if("string"!==typeof a)return null;if("number"!==typeof s)return null;if("string"!==typeof c)return null;if("string"!==typeof l)return null;if("number"!==typeof d)return null;if("boolean"!==typeof f)return null;if("boolean"!==typeof p)return null;var g=s===d,m=s>d,v=f||p,y=f&&p,b={leftPhoto:{name:""+n,type:"image",x:69,y:149,image:a,width:170,height:170,fallbackWithImage:ga.Z.AVATAR.KEY},rightPhoto:{name:""+c,type:"image",x:717,y:149,image:l,width:170,height:170,fallbackWithImage:ga.Z.AVATAR.KEY},wideFrame:{name:"wide-frame-game-result",type:"image",x:0,y:0,image:"./assets/wideframes/wide-frame-game-result.png",width:952,height:492}};return v&&!y&&(b.leftScoreShadow={type:"text",x:154,y:370,font:"600 50px",fillStyle:"#c4683f",text:f?""+s:"???",textAlign:"center"},b.leftScore={type:"text",x:155,y:370,font:"600 50px",fillStyle:"#f2a62e",text:f?""+s:"???",textAlign:"center"},b.rightScoreShadow={type:"text",x:802,y:370,font:"600 50px",fillStyle:"#c4683f",text:p?""+d:"???",textAlign:"center"},b.rightScore={type:"text",x:803,y:370,font:"600 50px",fillStyle:"#f2a62e",text:p?""+d:"???",textAlign:"center"}),!g&&y&&(m?b.leftCrown={name:"crown-icon-in-game-result",type:"image",x:0,y:0,image:"./assets/images/others/crown-icon.png",width:952,height:492}:b.rightCrown={name:"crown-icon-in-game-result",type:"image",x:0,y:0,image:"./assets/images/others/crown-icon.png",width:952,height:492,flipX:!0}),b}),Go=function(e){var t=e?e.split("_"):[],n=t.length>0?t[0]:"en_US";switch(n){case"id":case"in":n="id"}return n},Fo=n(663),Zo=function(e){function t(t,n){var i;(i=e.call(this,t)||this).payload=void 0,i.loading=void 0,i.photo=void 0,i.avtFrame=void 0,i.background=void 0,i.loadPhotoTimer=void 0,i.handleLoadPhotoAfterDelay=function(e,t){return function(){var n=i.scene.textures.get(e);n&&n.key===e?i.handleLoadComplete(e):(i.scene.load.once("filecomplete-image-"+e,i.handleLoadComplete),i.scene.load.image(e,t),i.scene.load.start())}},i.handleLoadComplete=function(e){if(i.scene){var t=i.payload,n=t.id,a=t.radius,r=void 0===a?0:a;if(n&&n===e){var s=n+"_bordered_"+r,o=r>0?s:n,c=i.scene.textures.get(o);if(c&&c.key===o)i.setPhoto(c.key);else if(0!=r&&r<100){if(!GameCore.Utils.Image.drawBorder({scene:i.scene,key:n,newKey:s,radius:r}))return void i.showLoading(!1);i.setPhoto(s)}else if(100==r){if(!GameCore.Utils.Image.drawCircle({scene:i.scene,key:n,newKey:s}))return void i.showLoading(!1);i.setPhoto(s)}else i.setPhoto(n)}}},i.handleLoadPhotoFailed=function(e){e.key===i.payload.id&&i.setDefaultAvatar(e.key)},i.scene.add.existing((0,za.Z)(i)),i.payload=n,i.setSize(n.width,n.height),i.createBackground(),i.createLoading(),i.createPhoto(),i.createFrame();var a=i.payload,r=a.id,s=a.url,o=a.radius;return r&&s&&i.loadPhoto(r,s,o),i.addDefaultListeners(),i}(0,p.Z)(t,e);var n=t.prototype;return n.setFrame=function(e){this.avtFrame.setFrame(e),this.avtFrame.setVisible(!0)},n.setBackground=function(e){this.background.setFrame(e)},n.loadPhoto=function(e,t,n){var i;if(void 0===n&&(n=0),this.payload.id=e,this.payload.url=t,this.payload.radius=n,null==(i=this.loadPhotoTimer)||i.remove(),e&&t){var a=this.scene.textures.get(e);if(a&&a.key===e)this.handleLoadComplete(e);else{this.showLoading(!0);var r=this.payload.loadDelay||0;this.loadPhotoTimer=this.scene.time.delayedCall(r,this.handleLoadPhotoAfterDelay(e,t))}}else this.setPhoto(ga.Z.AVATAR.KEY)},n.addDefaultListeners=function(){var e=this;this.scene.load.on(Phaser.Loader.Events.FILE_LOAD_ERROR,this.handleLoadPhotoFailed),this.on(Phaser.GameObjects.Events.DESTROY,(function(){var t;null==(t=e.loadPhotoTimer)||t.remove(),e.scene.load.off(Phaser.Loader.Events.FILE_LOAD_ERROR,e.handleLoadPhotoFailed)}))},n.setDefaultAvatar=function(e){this.loadPhoto(e,ga.Z.AVATAR.FILE,this.payload.radius)},n.createBackground=function(){var e=this.payload,t=e.key,n=e.background;this.background=this.scene.make.image({key:t,frame:n}),this.background.setWorldSize(this.width,this.height),this.add(this.background)},n.createLoading=function(){this.loading=new Qa(this.scene),this.loading.setWorldSize(.75*this.width,.75*this.height),this.loading.setVisible(!1),this.add(this.loading)},n.createPhoto=function(){this.photo=this.scene.make.image({x:0,y:0,origin:{x:.5,y:.5},visible:!1}),this.add(this.photo)},n.createFrame=function(){var e=this.payload,t=e.key,n=e.frame,i=e.width,a=e.height;n?(this.avtFrame=this.scene.make.image({key:t,frame:n}),this.avtFrame.setWorldSize(i,a)):this.avtFrame=this.scene.make.image({x:0,y:0,origin:{x:.5,y:.5},visible:!1}),this.add(this.avtFrame)},n.showLoading=function(e){this.photo.setVisible(!e),this.loading.setVisible(e)},n.setPhoto=function(e){this.showLoading(!1),this.photo.setTexture(e),this.photo.setFrame(0);var t=this.payload,n=t.width,i=t.height,a=Math.min(n,i)-10;this.photo.setWorldSize(a,a),Phaser.Display.Align.In.Center(this.photo,this.background)},n.addBackground=function(){var e="avatar-background";if(!this.scene.textures.exists(e)){var t=this.width,n=this.height,i=this.scene.add.graphics();i.fillStyle(65280,.2),i.fillRect(0,0,t,n),i.generateTexture(e,t,n),i.destroy()}var a=this.scene.add.image(0,0,e);this.add(a)},t}(Phaser.GameObjects.Container),Uo=Zo,Ho=An.Z.DEFAULT,Wo=Ho.KEY,zo=Ho.FRAME,Yo=function(e){function t(t){var n;return(n=e.call(this,t,{key:Wo,frame:zo.AVATAR_FRAME_BLUE,background:zo.AVATAR_BG_BLUE,width:60,height:60})||this).scene=void 0,n.scene=t,n}return(0,p.Z)(t,e),t.prototype.setHighlight=function(e){e?(this.background.setFrame(zo.AVATAR_BG_YELLOW),this.avtFrame.setFrame(zo.AVATAR_FRAME_YELLOW)):(this.background.setFrame(zo.AVATAR_BG_BLUE),this.avtFrame.setFrame(zo.AVATAR_FRAME_BLUE))},t}(Uo),Vo=Yo,Ko=An.Z.DEFAULT,jo=Ko.KEY,Xo=Ko.FRAME,Jo=function(e){function t(t,n){var i;return(i=e.call(this,t)||this).scene=void 0,i.payload=void 0,i.avatar=void 0,i.block=void 0,i.rankIcon=void 0,i.rankText=void 0,i.playerScore=void 0,i.label=void 0,i.scene=t,i.createBlock(),i.createAvatar(),i.createRankIcon(),i.createRankText(),i.createLabel(),i.createPlayerScore(),n&&i.updateInfo(n),i.scene.add.existing((0,za.Z)(i)),i}(0,p.Z)(t,e);var n=t.prototype;return n.updateInfo=function(e){this.payload=e,this.updateAvatar(),this.updateRankIcon(),this.updateRankText(),this.updatePlayerScore()},n.setLabel=function(e){this.label.setText(e)},n.setRank=function(e){this.rankText.setText(e)},n.setScore=function(e){this.playerScore.setText(e)},n.setHighlight=function(e){e?(this.y-=6,this.scale+=.1,this.label.scale+=.15,this.block.setFrame(Xo.BLOCK_LEADER_YELLOW)):(this.y+=6,this.scale-=.1,this.label.scale-=.15,this.block.setFrame(Xo.BLOCK_LEADER_BLUE)),this.avatar.setHighlight(e)},n.createBlock=function(){this.block=this.scene.make.image({key:jo,frame:Xo.BLOCK_LEADER_BLUE}),this.block.setWorldSize(79,99),this.add(this.block)},n.createAvatar=function(){this.avatar=new Vo(this.scene),Phaser.Display.Align.In.TopCenter(this.avatar,this.block,0,this.avatar.displayHeight/2-4),this.add(this.avatar)},n.updateAvatar=function(){var e=this.payload,t=e.playerId,n=e.photo;this.avatar.loadPhoto(t,n,50)},n.getRankFrame=function(){var e=Xo.ICON_FLAG;switch(this.payload.rank){case 1:e=Xo.ICON_CUP_GOLD;break;case 2:e=Xo.ICON_CUP_SILVER;break;case 3:e=Xo.ICON_CUP_COPPER}return e},n.createRankIcon=function(){var e=Xo.ICON_FLAG;this.rankIcon=this.scene.make.image({key:jo,frame:e}),e!=Xo.ICON_FLAG?this.rankIcon.setWorldSize(46,30):this.rankIcon.setWorldSize(27,27),Phaser.Display.Align.In.Center(this.rankIcon,this.block,0,-15),this.add(this.rankIcon)},n.updateRankIcon=function(){var e=this.getRankFrame();this.rankIcon.setFrame(e),e!=Xo.ICON_FLAG?this.rankIcon.setWorldSize(46,30):this.rankIcon.setWorldSize(27,27),Phaser.Display.Align.In.Center(this.rankIcon,this.block,0,-15)},n.createRankText=function(){this.rankText=this.scene.make.bitmapText({font:Fo.Z.PRIMARY.KEY,size:this.scene.fontSize(18),origin:{x:.5,y:.5},text:"1"}),Phaser.Display.Align.In.Center(this.rankText,this.rankIcon,0,-2),this.add(this.rankText)},n.updateRankText=function(){this.rankText.setText(this.payload.rank.toString())},n.createLabel=function(){this.label=this.scene.make.bitmapText({font:Fo.Z.PRIMARY.KEY,size:this.scene.fontSize(14),origin:{x:.5,y:0},text:"Play"}),Phaser.Display.Align.In.BottomCenter(this.label,this.block,0,-10),this.add(this.label)},n.createPlayerScore=function(){this.playerScore=this.scene.make.bitmapText({font:Fo.Z.PRIMARY.KEY,size:this.scene.fontSize(18),origin:{x:.5,y:.5},text:"132500"}),this.playerScore.setTint(5582186),Phaser.Display.Align.In.Center(this.playerScore,this.block,0,5),this.add(this.playerScore)},n.updatePlayerScore=function(){this.playerScore.setText(Math.floor(this.payload.score).toString())},(0,de.Z)(t,[{key:"onClick",set:function(e){var t=this.block,n=t.width,i=t.height;this.setSize(n,i+this.avatar.height),this.setInteractive({useHandCursor:!0}),this.off(Phaser.Input.Events.GAMEOBJECT_POINTER_DOWN),this.on(Phaser.Input.Events.GAMEOBJECT_POINTER_DOWN,e)}}]),t}(Phaser.GameObjects.Container),qo=Jo,Qo=function(e){function t(t,n){var a;return(a=e.call(this,t)||this).scene=void 0,a.payload=void 0,a.leaderBlocks=void 0,a.entrancesAnimation=void 0,a.listLeaderBlocks=void 0,a.handleChallengeFriend=function(e){return function(){a.scene.storage.dispatch(fo(e))}},a.handleShareLeaderboard=function(){a.scene.audio.playSound(er.Z.BUTTON_CLICK),a.scene.storage.dispatch(Ro())},a.handleMatchingGroup=(0,i.Z)(r().mark((function e(){var t,n,i,s,o,c,u,l,d;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.scene,n=t.player,i=t.storage,s=t.game,o=t.facebook,e.prev=1,s.globalScene.screen.open($a.o4.NOTIFY_SCREEN,{message:"loading",loading:!0}),c=n.getPlayer(),u="global","en"===(l=Go(c.locale))&&(u="en"),"in"===l&&(u="in"),e.next=10,o.matchPlayerAsync(u,!0,!0);case 10:if(d=e.sent,s.globalScene.screen.close($a.o4.NOTIFY_SCREEN),d){e.next=14;break}return e.abrupt("return");case 14:i.dispatch(go()),e.next=21;break;case 17:e.prev=17,e.t0=e.catch(1),s.globalScene.screen.close($a.o4.NOTIFY_SCREEN),e.t0 instanceof Error&&(0,h.tO)(e.t0);case 21:case"end":return e.stop()}}),e,null,[[1,17]])}))),a.scene=t,a.setName("LeadersBar"),a.listLeaderBlocks=[],a.createLeaderBlocks(),a.createEntrancesAnimation(),n&&a.updateInfo(n),a.scene.add.existing((0,za.Z)(a)),a}(0,p.Z)(t,e);var n=t.prototype;return n.updateInfo=function(e){var t=this;this.payload=e;var n,i=!1,a=this.payload,r=a.playerId;(a.leaders.forEach((function(e){var n,a=t.leaderBlocks.getFirstDead(!0);a.updateInfo(e),-1===e.score?(a.setRank(""),a.setLabel("Join"),a.setScore("Global"),a.onClick=t.handleMatchingGroup):e.playerId===r?(a.setLabel("Share"),a.setHighlight(!0),a.onClick=t.handleShareLeaderboard):a.onClick=t.handleChallengeFriend(e.playerId),t.add(a),a.setVisible(!0),a.setActive(!0),nn()(n=t.listLeaderBlocks).call(n,a)<0&&(i=!0)})),this.alignBlocks(),i)&&(this.listLeaderBlocks=Be()(n=this.leaderBlocks.getChildren()).call(n,(function(e){return e.active})),this.createEntrancesAnimation());this.runAnimation()},n.killAndHideAll=function(){var e=this;this.removeAll(!1),this.leaderBlocks.getChildren().forEach((function(t){return e.leaderBlocks.killAndHide(t)}))},n.runAnimation=function(){this.leaderBlocks.setAlpha(0),this.entrancesAnimation.play()},n.createEntrancesAnimation=function(){this.entrancesAnimation=new To.Z({targets:this.listLeaderBlocks,delay:this.scene.tweens.stagger(50,{start:400}),props:{y:{from:100,to:0},alpha:{from:0,to:1}}})},n.alignBlocks=function(){var e=-(this.leaderBlocks.getLength()-1)/2*95;this.leaderBlocks.setX(e,95)},n.createLeaderBlocks=function(){this.leaderBlocks=this.scene.add.group({classType:qo})},t}(Phaser.GameObjects.Container),$o=Qo,ec=n(682),tc=An.Z.DEFAULT,nc=tc.KEY,ic=tc.FRAME,ac=function(e){function t(t){var n;return(n=e.call(this,t,nc,ic.BUTTON_YELLOW_CIRCLE,100.05,78.2)||this).scene=void 0,n.setName("Home"),n.scene=t,n.createIcon(),n}return(0,p.Z)(t,e),t.prototype.createIcon=function(){var e=this.scene.make.image({key:nc,frame:ic.ICON_FLAT_HOME});e.setSize(43,43).setDisplaySize(43,43),Phaser.Display.Align.In.Center(e,this.button),this.add(e)},t}(ec.Z),rc=ac,sc=An.Z.DEFAULT,oc=sc.KEY,cc=sc.FRAME,uc=function(e){function t(t){var n;return(n=e.call(this,t,oc,cc.BUTTON_GREEN_SHORT,176,77.05)||this).scene=void 0,n.setName("PlayWithFriends"),n.scene=t,n.createLabel(),n}return(0,p.Z)(t,e),t.prototype.createLabel=function(){var e=this.scene.make.bitmapText({font:Fo.Z.PRIMARY.KEY,size:this.scene.fontSize(30),text:"PLAY"});Phaser.Display.Align.In.Center(e,this.button,0,-12);var t=this.scene.make.bitmapText({font:Fo.Z.PRIMARY.KEY,size:this.scene.fontSize(18),text:"WITH FRIENDS"});Phaser.Display.Align.In.Center(t,this.button,0,11),this.add([e,t])},t}(ec.Z),lc=uc,hc=An.Z.DEFAULT,dc=hc.KEY,fc=hc.FRAME,pc=function(e){function t(t){var n;return(n=e.call(this,t,dc,fc.BUTTON_YELLOW_CIRCLE,100.05,78.2)||this).scene=void 0,n.setName("Rank"),n.scene=t,n.createIcon(),n}return(0,p.Z)(t,e),t.prototype.createIcon=function(){var e=this.scene.make.image({key:dc,frame:fc.ICON_FLAT_RANK});e.setSize(43,43).setDisplaySize(43,43),Phaser.Display.Align.In.Center(e,this.button),this.add(e)},t}(ec.Z),gc=pc,mc=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n.homeButton=void 0,n.rankButton=void 0,n.pwfButton=void 0,n.entrancesAnimation=void 0,n.runAnimation=function(){n.entrancesAnimation.play()},n.scene=t,n.setName("FooterBar"),n.createHomeButton(),n.createRankButton(),n.createPlayWithFriendsButton(),n.createEntrancesAnimation(),n.alignIcons(),n.scene.add.existing((0,za.Z)(n)),n}(0,p.Z)(t,e);var n=t.prototype;return n.createEntrancesAnimation=function(){this.entrancesAnimation=new To.Z({targets:[this],delay:800,props:{y:"-=5",alpha:{start:0,from:0,to:1}}})},n.alignIcons=function(){Phaser.Display.Align.In.Center(this.homeButton,this,-130,-6),Phaser.Display.Align.In.Center(this.pwfButton,this,0,-6),Phaser.Display.Align.In.Center(this.rankButton,this,130,-6)},n.createHomeButton=function(){this.homeButton=new rc(this.scene),this.add(this.homeButton)},n.createRankButton=function(){this.rankButton=new gc(this.scene),this.add(this.rankButton)},n.createPlayWithFriendsButton=function(){this.pwfButton=new lc(this.scene),this.add(this.pwfButton)},t}(Phaser.GameObjects.Container),vc=mc,yc=n(675),bc={targets:[],yoyo:!0,duration:120,ease:Phaser.Math.Easing.Circular.Out,props:{scale:{from:1,to:1.3}}},Ac=function(e){function t(t){return e.call(this,bc,t)||this}return(0,p.Z)(t,e),t}(Ya.Z),Ec=An.Z.DEFAULT,Sc=Ec.KEY,Tc=Ec.FRAME,Cc=function(e){function t(t,n,i,a,r){var s;return(s=e.call(this,t,n,i)||this).barTopLeft=void 0,s.barTopMid=void 0,s.barTopRight=void 0,s.barMidLeft=void 0,s.barMidBg=void 0,s.barMidRight=void 0,s.barBottomLeft=void 0,s.barBottomMid=void 0,s.barBottomRight=void 0,s.setSize(a,r),s.setDepth(mn.Z.POPUP),s.createPopup(),s.scene.add.existing((0,za.Z)(s)),s}(0,p.Z)(t,e);var n=t.prototype;return n.createPopup=function(){this.createPopupImages(),this.updatePopupSize(),this.alignPopupImages()},n.createPopupImages=function(){this.barTopLeft=this.scene.add.image(0,0,Sc,Tc.POPUP_TOP_LEFT),this.barTopMid=this.scene.add.image(0,0,Sc,Tc.POPUP_TOP_MID),this.barTopRight=this.scene.add.image(0,0,Sc,Tc.POPUP_TOP_RIGHT),this.barMidLeft=this.scene.add.image(0,0,Sc,Tc.POPUP_MID_LEFT),this.barMidBg=this.scene.add.image(0,0,Sc,Tc.POPUP_MID_MID),this.barMidRight=this.scene.add.image(0,0,Sc,Tc.POPUP_MID_RIGHT),this.barBottomLeft=this.scene.add.image(0,0,Sc,Tc.POPUP_BOTTOM_LEFT),this.barBottomMid=this.scene.add.image(0,0,Sc,Tc.POPUP_BOTTOM_MID),this.barBottomRight=this.scene.add.image(0,0,Sc,Tc.POPUP_BOTTOM_RIGHT),this.barTopLeft.setWorldSize(65,48),this.barTopMid.setWorldSize(65,48),this.barTopRight.setWorldSize(65,48),this.barMidLeft.setWorldSize(65,48),this.barMidBg.setWorldSize(65,48),this.barMidRight.setWorldSize(65,48),this.barBottomLeft.setWorldSize(65,48),this.barBottomMid.setWorldSize(65,48),this.barBottomRight.setWorldSize(65,48),this.add([this.barTopRight,this.barTopMid,this.barBottomLeft,this.barBottomRight,this.barMidLeft,this.barMidRight,this.barTopLeft,this.barBottomMid,this.barMidBg])},n.updatePopupSize=function(){this.barTopMid.setWorldSize(this.width-129,this.barTopMid.height),this.barMidLeft.setWorldSize(this.barMidLeft.width,this.height-95),this.barMidBg.setWorldSize(this.width-129,this.height-95),this.barMidRight.setWorldSize(this.barMidRight.width,this.height-95),this.barBottomMid.setWorldSize(this.width-129,this.barBottomMid.height)},n.alignPopupImages=function(){Phaser.Display.Align.In.TopLeft(this.barTopLeft,this),Phaser.Display.Align.In.TopCenter(this.barTopMid,this),Phaser.Display.Align.In.TopRight(this.barTopRight,this),Phaser.Display.Align.In.LeftCenter(this.barMidLeft,this),Phaser.Display.Align.In.Center(this.barMidBg,this),Phaser.Display.Align.In.RightCenter(this.barMidRight,this),Phaser.Display.Align.In.BottomLeft(this.barBottomLeft,this),Phaser.Display.Align.In.BottomCenter(this.barBottomMid,this),Phaser.Display.Align.In.BottomRight(this.barBottomRight,this)},(0,de.Z)(t,[{key:"onClose",set:function(e){this.setInteractive({useHandCursor:!0}),this.on(Phaser.Input.Events.GAMEOBJECT_POINTER_DOWN,e)}}]),t}(Phaser.GameObjects.Container),wc=Cc,Ic=function(e){function t(t,n){var i;return(i=e.call(this,t)||this).payload=void 0,i.mainText=void 0,i.shadowText=void 0,i.payload=n,i.createMainText(),i.createShadowText(),i.updateSize(),i.moveDown(i.shadowText),i.scene.add.existing((0,za.Z)(i)),i}(0,p.Z)(t,e);var n=t.prototype;return n.setText=function(e){this.mainText.setText(e),this.shadowText.setText(e),this.updateSize()},n.setTintText=function(e,t,n,i){this.mainText.setTint(e,t,n,i)},n.setDropShadow=function(e,t,n,i){void 0===i&&(i=1),this.shadowText.setVisible(!0),this.shadowText.setTint(n),this.shadowText.setAlpha(i),Phaser.Display.Align.In.Center(this.shadowText,this.mainText,e,t)},n.updateSize=function(){var e=this.mainText,t=e.width,n=e.height;this.setSize(t,n)},n.createMainText=function(){this.mainText=this.scene.make.bitmapText({font:this.payload.font,size:this.payload.size,origin:{x:.5,y:.5}}),this.add(this.mainText)},n.createShadowText=function(){this.shadowText=this.scene.make.bitmapText({font:this.payload.font,size:this.payload.size,origin:{x:.5,y:.5},visible:!1}),this.add(this.shadowText)},t}(Phaser.GameObjects.Container),xc=Ic,Pc=n(681),kc=An.Z.DEFAULT,_c=kc.KEY,Oc=kc.FRAME,Rc=function(e){function t(t){var n;return(n=e.call(this,t)||this).cat=void 0,n.effect=void 0,n.runStarTwinkle=function(){var e=n.cat,t=e.x,i=e.y,a=e.displayWidth,r=e.displayHeight,s=i-20;n.effect.run(1,t,s,a,r)},n.createEffect(),n.createCat(),n.runCatAnimation(),n.scene.add.existing((0,za.Z)(n)),n}(0,p.Z)(t,e);var n=t.prototype;return n.createCat=function(){this.cat=this.scene.make.image({key:_c,frame:Oc.THE_CAT,origin:{x:.5,y:1}}),this.cat.setWorldSize(204.5,112.5),this.cat.setY(this.cat.height/2),this.add(this.cat)},n.createEffect=function(){this.effect=new Pc.Z(this.scene),this.add(this.effect)},n.runCatAnimation=function(){new yc.Z({targets:[this.cat],duration:1e3,props:{scale:"+=0.02"}}).play()},t}(Phaser.GameObjects.Container),Lc=Rc,Dc=An.Z.DEFAULT,Bc=Dc.KEY,Nc=Dc.FRAME,Mc=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n.bestScore=void 0,n.payload=void 0,n.theCat=void 0,n.popup=void 0,n.ribbon=void 0,n.yourScoreText=void 0,n.bestScoreText=void 0,n.currentScoreText=void 0,n.entrancesAnimation=void 0,n.scoreAnimation=void 0,n.counterAnimation=void 0,n.scene=t,n.bestScore=0,n.createPopup(),n.createTheCat(),n.createRibbon(),n.createYourScoreText(),n.createCurrentScore(),n.createBestScore(),n.createScoreAnimation(),n.createEntrancesAnimation(),n.scene.add.existing((0,za.Z)(n)),n}(0,p.Z)(t,e);var n=t.prototype;return n.updateData=function(e){this.payload=e;var t=e.bestScore,n=e.currentScore;if(n<=t)return this.setBestScore(t),this.setCurrentScore(n),void this.runScoreAnimation();this.runAnimation()},n.runAnimation=function(){var e=this;this.runScoreCounter(),this.scene.time.delayedCall(1300,(function(){e.entrancesAnimation.play(),e.scene.audio.playSound(er.Z.SCORE_COUNTER)}))},n.runScoreCounter=function(){var e,t=this,n=this.payload,i=n.bestScore,a=n.currentScore;null==(e=this.counterAnimation)||e.remove(),this.counterAnimation=this.scene.tweens.addCounter({from:0,to:a,delay:500,duration:2e3,completeDelay:300,onUpdate:function(e){var n=Math.floor(e.getValue());t.runScoreAnimation(),t.setCurrentScore(n)},onComplete:function(){t.bestScore=i,t.setBestScore(i),t.setCurrentScore(a),t.counterAnimation.remove()}})},n.runScoreAnimation=function(){this.scoreAnimation.play()},n.setBestScore=function(e){this.bestScoreText.setText("Best score: "+e)},n.setCurrentScore=function(e){this.currentScoreText.setText(""+e)},n.createPopup=function(){this.popup=new wc(this.scene,0,0,284,240),this.add(this.popup)},n.createTheCat=function(){this.theCat=new Lc(this.scene),Phaser.Display.Align.In.TopCenter(this.theCat,this.popup),this.add(this.theCat)},n.createRibbon=function(){this.ribbon=this.scene.make.image({key:Bc,frame:Nc.RIBBON_LONG}),this.ribbon.setSize(341,80).setDisplaySize(341,80),Phaser.Display.Align.In.Center(this.ribbon,this.theCat,0,93),this.add(this.ribbon)},n.createYourScoreText=function(){this.yourScoreText=this.scene.make.bitmapText({font:Fo.Z.PRIMARY.KEY,size:this.scene.fontSize(30),origin:{x:.5,y:.5},text:"Your score"}),Phaser.Display.Align.In.Center(this.yourScoreText,this.ribbon,0,-10),this.add(this.yourScoreText)},n.createCurrentScore=function(){this.currentScoreText=new xc(this.scene,{font:Fo.Z.PRIMARY.KEY,size:this.scene.fontSize(60)}),this.currentScoreText.setTintText(15779090,15779090,15704623,15704623),this.currentScoreText.setDropShadow(0,2,8804140),Phaser.Display.Align.In.Center(this.currentScoreText,this.popup,0,30),this.add(this.currentScoreText)},n.createBestScore=function(){this.bestScoreText=this.scene.make.bitmapText({font:Fo.Z.PRIMARY.KEY,size:this.scene.fontSize(24),origin:{x:.5,y:.5},text:"Best score: "+this.bestScore}),this.bestScoreText.setTint(10494183),Phaser.Display.Align.In.BottomCenter(this.bestScoreText,this.popup,0,-25),this.add(this.bestScoreText)},n.createEntrancesAnimation=function(){this.entrancesAnimation=new yc.Z({targets:[this],repeat:0,duration:200,props:{scale:"+=0.03"}})},n.createScoreAnimation=function(){this.scoreAnimation=new Ac({targets:[this.currentScoreText],props:{scale:{from:1,to:1.3}}})},t}(Phaser.GameObjects.Container),Gc=Mc,Fc=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n.bestScoreBlock=void 0,n.scene=t,n.createBestScoreBlock(),n.scene.add.existing((0,za.Z)(n)),n}return(0,p.Z)(t,e),t.prototype.createBestScoreBlock=function(){this.bestScoreBlock=new Gc(this.scene),this.add(this.bestScoreBlock)},t}(Phaser.GameObjects.Container),Zc=Fc,Uc=n(685),Hc=n(669),Wc={targets:[],duration:600,ease:Phaser.Math.Easing.Back.Out,props:{y:{from:250,to:0},scale:{from:.9,to:1},alpha:{start:0,from:0,to:1}}},zc=function(e){function t(t){return e.call(this,Wc,t)||this}return(0,p.Z)(t,e),t}(Ya.Z),Yc=n(683),Vc=n(684),Kc=An.Z.DEFAULT,jc=Kc.KEY,Xc=Kc.FRAME,Jc=function(e){function t(t,n,i,a){var r;return(r=e.call(this,t,n,i,a)||this).avatar=void 0,r.scoreText=void 0,r.shareButton=void 0,r.bigStarExplosive=void 0,r.open=function(t){e.prototype.open.call((0,za.Z)(r),t);var n=r.getData("bestScore");r.setBestScore(n);var i=r.scene.player.getPlayer();r.avatar.loadPhoto(i.playerId,i.photo),r.runOpenAnimation(),r.scene.audio.playSound(er.Z.CONGRATULATION)},r.handleClose=function(){r.scene.screen.close(r.name)},r.handleShareBestScore=function(){r.scene.storage.dispatch(ko())},r.runBigStarExplosive=function(){Phaser.Display.Align.In.Center(r.bigStarExplosive,r.scoreText),r.bigStarExplosive.run()},r.setDepth($a.Ks.POPUP),r.background.setAlpha(.8),r.createObjects(),r}(0,p.Z)(t,e);var n=t.prototype;return n.createObjects=function(){this.createTitle(),this.createClose(),this.createBestScoreTitle(),this.createPlayerAvatar(),this.createGlowEffect(),this.createBestScoreNumber(),this.createShareButton(),this.createStarTwinkleEffect(),this.createBigStarExplosive()},n.setBestScore=function(e){this.scoreText.setText(""+e)},n.createTitle=function(){var e=this.scene.make.image({key:jc,frame:Xc.RIBBON_SMALL});e.setSize(162,36).setDisplaySize(162,36);var t=-90;Phaser.Display.Align.In.TopCenter(e,this.zone,0,t);var n=this.scene.make.bitmapText({font:Fo.Z.PRIMARY.KEY,size:10,text:"Today Record"});t=-5,Phaser.Display.Align.In.Center(n,e,0,t),this.add([e,n])},n.createClose=function(){var e=new ec.Z(this.scene,jc,Xc.BUTTON_CLOSE,38,38);e.setName("Close"),this.add(e),Phaser.Display.Align.In.TopRight(e,this.zone,-60,-50),e.onClick=this.handleClose},n.createBestScoreTitle=function(){var e=this.scene.make.bitmapText({font:Fo.Z.PRIMARY.KEY,size:22,text:"Best Score"});this.add(e),e.setTint(13256697),Phaser.Display.Align.In.TopCenter(e,this.zone,0,-130)},n.createBestScoreNumber=function(){this.scoreText=new xc(this.scene,{font:Fo.Z.PRIMARY.KEY,size:40}),this.add(this.scoreText),this.scoreText.setTintText(15911443,15911443,15902254,15902254),this.scoreText.setDropShadow(0,2,12871743),Phaser.Display.Align.In.TopCenter(this.scoreText,this.zone,0,-230)},n.createPlayerAvatar=function(){this.avatar=new Uo(this.scene,{key:jc,frame:Xc.AVATAR_FRAME_YELLOW_BIG,background:Xc.AVATAR_BG_YELLOW_BIG,width:89,height:89}),this.avatar.background.setSize(89,95).setDisplaySize(89,95),this.avatar.photo.setSize(89,95).setDisplaySize(89,95),this.avatar.avtFrame.setSize(89,95).setDisplaySize(89,95),this.add(this.avatar),Phaser.Display.Align.In.Center(this.avatar,this.zone,0,20)},n.createGlowEffect=function(){var e=An.Z.EFFECTS,t=e.KEY,n=e.FRAME,i=this.scene.make.image({key:t,frame:n.FX_GLOW_LIGHT});i.setWorldSize(246,246),this.add(i),this.moveDown(i),Phaser.Display.Align.In.Center(i,this.avatar),this.scene.tweens.add({targets:[i],duration:6e3,repeat:-1,props:{angle:360,scale:{value:"+=0.01",yoyo:!0,duration:800,ease:Phaser.Math.Easing.Sine.InOut}}})},n.createShareButton=function(){this.shareButton=new Yc.Z(this.scene,{key:jc,button:Xc.BUTTON_BLUE,icon:Xc.ICON_FLAT_SHARE,text:"Share"},168,82.8),this.shareButton.setName("Share"),this.add(this.shareButton),Phaser.Display.Align.In.BottomCenter(this.shareButton,this.zone,0,-80),this.shareButton.onClick=this.handleShareBestScore},n.createStarTwinkleEffect=function(){var e=new Pc.Z(this.scene),t=this.scoreText,n=t.x,i=t.y;e.run(2,n,i,300,120)},n.createBigStarExplosive=function(){this.bigStarExplosive=new Vc.Z(this.scene)},n.runOpenAnimation=function(){this.runBigStarExplosive(),this.runScoreEntrancesAnimation(),this.runAvatarEntrancesAnimation(),this.runShareEntrancesAnimation()},n.runScoreEntrancesAnimation=function(){this.scene.tweens.killTweensOf(this.scoreText),new zc({targets:[this.scoreText],duration:300,props:{y:{from:0,to:this.scoreText.y}}}).play()},n.runAvatarEntrancesAnimation=function(){this.scene.tweens.killTweensOf(this.avatar);var e=this.avatar.scale;new Uc.Z({targets:[this.avatar],duration:400,props:{scale:{from:0,to:e}}}).play()},n.runShareEntrancesAnimation=function(){this.scene.tweens.killTweensOf(this.shareButton),this.shareButton.setAlpha(0),new Hc.Z({targets:[this.shareButton],delay:300}).play()},t}(GameCore.Screen),qc=Jc,Qc=GameCore.Configs.LeadersBoard,$c=function(e){function t(){for(var t,n,i=arguments.length,a=new Array(i),r=0;r<i;r++)a[r]=arguments[r];return(n=e.call.apply(e,L()(t=[this]).call(t,a))||this).bestScore=void 0,n.currentScore=void 0,n.loading=void 0,n.leadersBar=void 0,n.footerBar=void 0,n.main=void 0,n.confettiLeftEffect=void 0,n.confettiRightEffect=void 0,n.run=function(){n.updateLeaders(),n.updateScore(),n.explodeConfettiEffect(),n.main.bestScoreBlock.counterAnimation&&n.main.bestScoreBlock.counterAnimation.state!==Phaser.Tweens.REMOVED?n.main.bestScoreBlock.counterAnimation.on(Phaser.Tweens.Events.TWEEN_COMPLETE,(function(){n.handleShowBestScorePopup(),n.handleShowResultChallengePopup()})):n.time.delayedCall(800,(function(){n.handleShowBestScorePopup(),n.handleShowResultChallengePopup()})),n.footerBar.setAlpha(0),n.footerBar.runAnimation(),n.audio.pauseMusic(),n.audio.playSound(er.Z.GAME_OVER_SCENE)},n.runConfettiEffect=function(){var e=n.gameZone.displayWidth;n.confettiLeftEffect.stop(),n.confettiRightEffect.stop(),n.children.bringToTop(n.confettiLeftEffect),n.children.bringToTop(n.confettiRightEffect),n.confettiLeftEffect.run(1,0,-100),n.confettiRightEffect.run(1,0+e,-100),n.tweens.addCounter({delay:1e4,from:100,to:0,ease:Phaser.Math.Easing.Cubic.Out,duration:400,onUpdate:function(e){var t,i,a=e.getValue()/100;null==(t=n.confettiLeftEffect.emitter)||t.setAlpha(a),null==(i=n.confettiRightEffect.emitter)||i.setAlpha(a)},onComplete:function(){var e,t;null==(e=n.confettiLeftEffect.emitter)||e.setAlpha(1),null==(t=n.confettiRightEffect.emitter)||t.setAlpha(1),n.confettiLeftEffect.stop(),n.confettiRightEffect.stop()}})},n.explodeConfettiEffect=function(){var e=n.gameZone.displayWidth,t=-100,i=e;n.tweens.addCounter({repeat:3,duration:500,onStart:function(){n.confettiLeftEffect.explode(6,0,t),n.confettiRightEffect.explode(6,0+i,t)},onRepeat:function(){n.confettiLeftEffect.explode(6,0,t),n.confettiRightEffect.explode(6,0+i,t)},completeDelay:7e3,onComplete:function(){n.tweens.addCounter({from:100,to:0,ease:Phaser.Math.Easing.Cubic.Out,duration:400,onUpdate:function(e){var t,i,a=e.getValue()/100;null==(t=n.confettiLeftEffect.emitter)||t.setAlpha(a),null==(i=n.confettiRightEffect.emitter)||i.setAlpha(a)},onComplete:function(){var e,t;null==(e=n.confettiLeftEffect.emitter)||e.setAlpha(1),null==(t=n.confettiRightEffect.emitter)||t.setAlpha(1),n.confettiLeftEffect.stop(),n.confettiRightEffect.stop()}})}})},n.handlePlayWithFriend=function(){n.storage.dispatch(po())},n.handleHomeClick=function(){n.scene.switch(_a.C.DASHBOARD_SCENE)},n.handleLeaderboardClick=function(){n.scene.switch(_a.C.LEADERBOARD_SCENE)},n}(0,p.Z)(t,e);var n=t.prototype;return n.preload=function(){var e=this;this.events.on("resume",(function(){e.updateScore()})),this.events.on("sleep",(function(){e.storage.dispatch(zs())})),this.events.on("wake",this.run),this.events.on("create",this.run)},n.create=function(){e.prototype.create.call(this),this.createBackground(ga.Z.BACKGROUND.KEY);var t=this.player.getBestScore();this.bestScore=t,this.currentScore=0,this.createLoading(),this.createMain(),this.createLeadersBar(),this.createFooterBar(),this.createBestScoreScreen(),this.createConfettiSmallAnimation()},n.updateLeaders=function(){var e=this;this.leadersBar.killAndHideAll();var t=[{selector:Gr,callback:function(t){if(!1===t){var n=window.game.player.getPlayerId(),i=e.getLeadersExcludeIds([n]);e.updateLeaderBar(i)}e.loading.setVisible(t)}}];this.handleStateChange(t),this.storage.dispatch(Lr(Qc.LeaderboardId,ar,20))},n.getLeadersExcludeIds=function(e){var t=this.storage.getState(),n=Mr(t),i={};if(!e||0===e.length)return n;for(var a in n)if(nn()(e).call(e,a)<0){var r=n[a],s=r.playerId,o=r.photo,c=r.score,u=r.rank;i[a]={playerId:s,photo:o,score:c,rank:u}}return i},n.updateScore=function(){var e=this.storage.getState(),t=As(e),n=t.score,i=void 0===n?0:n,a=t.bestScore,r=void 0===a?0:a;this.bestScore=r<this.bestScore?this.bestScore:r,this.currentScore=i,this.main.bestScoreBlock.updateData({bestScore:this.bestScore,currentScore:this.currentScore})},n.createLoading=function(){this.loading=new Qa(this),Phaser.Display.Align.In.Center(this.loading,this.gameZone,0,120)},n.createMain=function(){this.bestScore=0,this.main=new Zc(this),Phaser.Display.Align.In.TopCenter(this.main,this.gameZone,0,-230),this.main.bestScoreBlock.theCat.runStarTwinkle()},n.createLeadersBar=function(){this.leadersBar=new $o(this),Phaser.Display.Align.In.Center(this.leadersBar,this.gameZone,0,120)},n.updateLeaderBar=function(e){var t={playerId:this.player.getPlayerId(),leaders:[]};for(var n in e){if(t.leaders.length>=3)break;var i=e[n],a=i.playerId,r=i.photo,s=i.score,o=i.rank;t.leaders.push({playerId:a,photo:r,score:s,rank:o})}t.leaders.push({playerId:ga.Z.ICON_EARTH.KEY,photo:ga.Z.ICON_EARTH.FILE,rank:4,score:-1}),this.leadersBar.updateInfo(t)},n.createFooterBar=function(){this.footerBar=new vc(this),Phaser.Display.Align.In.BottomCenter(this.footerBar,this.gameZone,0,-70),this.footerBar.homeButton.onClick=this.handleHomeClick,this.footerBar.pwfButton.onClick=this.handlePlayWithFriend,this.footerBar.rankButton.onClick=this.handleLeaderboardClick},n.createBestScoreScreen=function(){this.screen.add($a.o4.BEST_SCORE_SCREEN,qc)},n.createConfettiSmallAnimation=function(){this.confettiLeftEffect=new tr.Z(this,{speedX:{min:-20,max:100},rotate:{start:-1080,end:0}}),this.confettiRightEffect=new tr.Z(this,{speedX:{min:20,max:-100},rotate:{start:0,end:1080}}),this.confettiLeftEffect.setDepth(mn.Z.EFFECT),this.confettiRightEffect.setDepth(mn.Z.EFFECT)},n.handleShowBestScorePopup=function(){var e;this.currentScore>this.bestScore&&this.storage.dispatch(eo({bestScore:this.currentScore}));var t=this.storage.getState(),n=as(t),i=nn()(e=[va,Aa]).call(e,n)>=0;this.currentScore>this.bestScore&&i&&(this.screen.open($a.o4.BEST_SCORE_SCREEN,{bestScore:this.currentScore}),this.runConfettiEffect())},n.handleShowResultChallengePopup=function(){var e,t=this.storage.getState(),n=as(t);if(-1!==nn()(e=[ya,ba]).call(e,n)&&hs(t)){var i=fs(t).playerId;n===ba&&i===ma.playerId||(this.scene.pause(_a.C.GAME_OVER_SCENE),this.scene.launch(_a.C.RESULT_MATCH_SCENE))}},t}(Ua.Z);var eu=$c,tu=n(413),nu=n.n(tu),iu=n(194),au=n.n(iu),ru=n(91),su=n.n(ru),ou=function(e){return e[e.ACE=401]="ACE",e[e.TWO=402]="TWO",e[e.THREE=403]="THREE",e[e.FOUR=404]="FOUR",e[e.FIVE=405]="FIVE",e[e.SIX=406]="SIX",e[e.SEVEN=407]="SEVEN",e[e.EIGHT=408]="EIGHT",e[e.NINE=409]="NINE",e[e.TEN=410]="TEN",e[e.JACK=411]="JACK",e[e.QUEEN=412]="QUEEN",e[e.KING=413]="KING",e}(ou||{}),cu=function(e){return e[e.ACE=301]="ACE",e[e.TWO=302]="TWO",e[e.THREE=303]="THREE",e[e.FOUR=304]="FOUR",e[e.FIVE=305]="FIVE",e[e.SIX=306]="SIX",e[e.SEVEN=307]="SEVEN",e[e.EIGHT=308]="EIGHT",e[e.NINE=309]="NINE",e[e.TEN=310]="TEN",e[e.JACK=311]="JACK",e[e.QUEEN=312]="QUEEN",e[e.KING=313]="KING",e}(cu||{}),uu=function(e){return e[e.ACE=201]="ACE",e[e.TWO=202]="TWO",e[e.THREE=203]="THREE",e[e.FOUR=204]="FOUR",e[e.FIVE=205]="FIVE",e[e.SIX=206]="SIX",e[e.SEVEN=207]="SEVEN",e[e.EIGHT=208]="EIGHT",e[e.NINE=209]="NINE",e[e.TEN=210]="TEN",e[e.JACK=211]="JACK",e[e.QUEEN=212]="QUEEN",e[e.KING=213]="KING",e}(uu||{}),lu=function(e){return e[e.ACE=101]="ACE",e[e.TWO=102]="TWO",e[e.THREE=103]="THREE",e[e.FOUR=104]="FOUR",e[e.FIVE=105]="FIVE",e[e.SIX=106]="SIX",e[e.SEVEN=107]="SEVEN",e[e.EIGHT=108]="EIGHT",e[e.NINE=109]="NINE",e[e.TEN=110]="TEN",e[e.JACK=111]="JACK",e[e.QUEEN=112]="QUEEN",e[e.KING=113]="KING",e}(lu||{}),hu=function(e){return e[e.ACE=1]="ACE",e[e.TWO=2]="TWO",e[e.THREE=3]="THREE",e[e.FOUR=4]="FOUR",e[e.FIVE=5]="FIVE",e[e.SIX=6]="SIX",e[e.SEVEN=7]="SEVEN",e[e.EIGHT=8]="EIGHT",e[e.NINE=9]="NINE",e[e.TEN=10]="TEN",e[e.JACK=11]="JACK",e[e.QUEEN=12]="QUEEN",e[e.KING=13]="KING",e}(hu||{}),du=function(e){return e[e.SpadesCard=1]="SpadesCard",e[e.ClubsCard=2]="ClubsCard",e[e.DiamondsCard=3]="DiamondsCard",e[e.HeartsCard=4]="HeartsCard",e}(du||{}),fu=[du.HeartsCard,du.DiamondsCard,du.ClubsCard,du.SpadesCard],pu={DEPTH:{REMAINING_STOCK:12,HINT:25,CARD:10,CARD_SLOT:9},FOUNDATION_Y:70,VERTICAL_PILE_SPACE:24,MIN_VERTICAL_PILE_SPACE:18,MAX_HORIZONTAL_PILE_SPACE:62,SPACE_BETWEEN_PILE_AND_FOUNDATION:85,CARD_WIDTH:41.65,CARD_HEIGHT:72*.85,NUMBER_OF_TARGET:4,NUMBER_OF_PILE:8,NUMBER_OF_FREECELL:4,AUTO_MOVE_TIME:400,CARD_MOVE_TIME:300,CARD_DEAL_TIME:20},gu=function(){return window.game.world.isLandscape()?1.4:.9},mu=function(){window.game.world.isLandscape()?(pu.VERTICAL_PILE_SPACE=29,pu.SPACE_BETWEEN_PILE_AND_FOUNDATION=85*1.4,pu.MIN_VERTICAL_PILE_SPACE=18):(pu.VERTICAL_PILE_SPACE=24*.925,pu.MIN_VERTICAL_PILE_SPACE=18*.85,pu.SPACE_BETWEEN_PILE_AND_FOUNDATION=85);var e=gu();pu.CARD_WIDTH=49*e,pu.CARD_HEIGHT=72*e},vu=function(e){pu.FOUNDATION_Y=e},yu=pu,bu=An.Z.GAMEPLAY_DEFAULT.KEY,Au=function(e){function t(t,n){var i;(i=e.call(this,t,0,0,bu,"ic_slot")||this).placement=void 0;var a=yu.CARD_WIDTH,r=yu.CARD_HEIGHT,s=yu.DEPTH;return i.placement=n,i.setInteractive(),i.disableInteractive(),i.setAlpha(.6).setWorldSize(a,r),i.setInteractive({useHandCursor:!0}),i.setDepth(s.CARD_SLOT),i.scene.add.existing((0,za.Z)(i)),i}(0,p.Z)(t,e);var n=t.prototype;return n.onClick=function(e){var t=!1;this.on(Phaser.Input.Events.GAMEOBJECT_POINTER_DOWN,(function(){t=!0})),this.on(Phaser.Input.Events.GAMEOBJECT_POINTER_UP,(function(){t&&e(),t=!1})),this.on(Phaser.Input.Events.GAMEOBJECT_POINTER_OUT,(function(){t=!1}))},n.offClick=function(){this.off(Phaser.Input.Events.GAMEOBJECT_POINTER_DOWN),this.off(Phaser.Input.Events.GAMEOBJECT_POINTER_UP),this.off(Phaser.Input.Events.GAMEOBJECT_POINTER_OUT)},n.updateSize=function(){var e=yu.CARD_WIDTH,t=yu.CARD_HEIGHT;this.setWorldSize(e,t)},t}(Phaser.GameObjects.Image),Eu=Au,Su=function(e){function t(t){var n;return(n=e.call(this)||this).boardGame=void 0,n.slot=void 0,n.cards=void 0,n.x=void 0,n.y=void 0,n.name=void 0,n.idx=void 0,n.boardGame=t,n.cards=[],n.slot=new Eu(t.scene,(0,za.Z)(n)),n.setIdx(-1),n}(0,p.Z)(t,e);var n=t.prototype;return n.setName=function(e){this.name=e},n.setIdx=function(e){this.idx=e},n.getIdx=function(){return this.idx},n.getname=function(){return this.name},n.setPosition=function(e,t){this.x=e,this.y=t,this.slot.setPosition(e,t)},n.addCard=function(e,t,n){if(void 0===n&&(n=!1),e.scene.gameplay.cardsLayer.bringToTop(e.bg),e.scene.gameplay.cardsLayer.bringToTop(e),e.scene.gameplay.cardsLayer.bringToTop(e.eligibleFoundationGlow),e.setPlacement(this),t){var i=this.getPlacingPosition(this.cards.length),a=i.x,r=i.y,s=n?0:yu.CARD_MOVE_TIME;e.moveTo(a,r,s)}this.cards.push(e)},n.pickTopCards=function(e){var t,n=this.cards.length;return 0==n?[]:su()(t=this.cards).call(t,Math.max(n-e,0))},n.getLastCard=function(){return this.cards[this.cards.length-1]},n.getPlacingPosition=function(e){return{x:this.x,y:this.y}},n.canBePlace=function(e,t){return!1},n.update=function(e){},n.clear=function(){this.cards=[]},n.isEmpty=function(){return 0===this.cards.length},n.pickAllCards=function(){var e;return su()(e=this.cards).call(e,0)},n.getAllCards=function(){for(var e=[],t=0;t<this.cards.length;t++)e.push(this.cards[t].getTag());return e},n.updateSlotSize=function(){this.slot.updateSize()},n.getCardByIndex=function(e){return this.cards[e]},t}(Phaser.Events.EventEmitter),Tu=Su,Cu=function(e){return e.Stock="stock",e.Pile="pile",e.Foundation="foundation",e.FreeCell="freecell",e}(Cu||{}),wu=Cu,Iu=function(){var e=(0,i.Z)(r().mark((function e(t,n){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new(o())((function(e){t.time.delayedCall(n,e)})));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),xu=Iu,Pu=function(e){function t(t){var n;return(n=e.call(this,t)||this).spaceBetweenMajorCards=yu.VERTICAL_PILE_SPACE,n.setName(wu.Pile),n}(0,p.Z)(t,e);var n=t.prototype;return n.addCardByDeal=function(){var t=(0,i.Z)(r().mark((function t(n,i,a){var s;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(s=GameCore.Configs.Gameplay.SkipStartAnimation,e.prototype.addCard.call(this,n,i,s),this.cards.length===a&&this.cards.length>this.boardGame.boundNumberOfCards&&this.updateCardPosition(),s){t.next=7;break}return t.next=7,xu(this.boardGame.scene,yu.CARD_MOVE_TIME);case 7:n.setInteractive(),n.setFacingWithFlippingAnim(!0);case 9:case"end":return t.stop()}}),t,this)})));return function(e,n,i){return t.apply(this,arguments)}}(),n.getPlacingPosition=function(e,t){void 0===e&&(e=0);var n=t||this.cards.length,i=this.getSpaceBetweenMinorCards(n),a=this.getSpaceBetweenMajorCards(),r=this.getIdxCardValidToMove(t),s=0;return s=n<=this.boardGame.boundNumberOfCards||-1==r?a*e:e<r?i*e:i*r+a*(e-r),{x:this.x,y:this.y+s}},n.getSubCards=function(e){var t,n,i=au()(t=this.cards).call(t,(function(t){return t===e}));return w()(n=this.cards).call(n,i)},n.pickSubCards=function(e){var t,n,i=au()(t=this.cards).call(t,(function(t){return t===e}));return su()(n=this.cards).call(n,i)},n.getFacingUpCards=function(){var e,t;if(0===this.cards.length)return[];var n=au()(e=this.cards).call(e,(function(e){return e.isFacingUp()}));return n<0?[]:w()(t=this.cards).call(t,n)},n.faceUpLast=function(){var e=this.cards.length;if(e>0){var t=this.cards[e-1];if(t.isFacingUp())return;return t.setFacingWithFlippingAnim(!0),t.setInteractive(),t}this.slot.setInteractive()},n.faceDownLast=function(){var e=this.cards.length;if(e>0){var t=this.cards[e-1];return t.setFacingWithFlippingAnim(!1),t.disableInteractive(),t}this.slot.setInteractive()},n.canBePlace=function(e,t){var n=GameCore.Configs.Gameplay.EditMode;if(GameCore.Utils.Valid.isDebugger()&&n)return!0;var i=e.getTag(),a=i%100,r=Math.floor((i-a)/300);if(0===this.cards.length)return t<=this.boardGame.getMaxCardCanMoveToEmptyPile();var s=this.cards[this.cards.length-1].getTag(),o=s%100,c=Math.floor((s-o)/300),u=this.boardGame.getMaxCardCanMoveToNonEmptyPile();return r!=c&&a==o-1&&t<=u},n.canBeHint=function(e){var t=e.getTag(),n=t%100,i=Math.floor((t-n)/300);if(0===this.cards.length)return t%100===hu.KING;var a=this.cards[this.cards.length-1].getTag(),r=a%100;return i!=Math.floor((a-r)/300)&&n==r-1},n.isLastCard=function(e){return this.cards[this.cards.length-1]===e},n.clear=function(){this.cards=[],this.spaceBetweenMajorCards=yu.VERTICAL_PILE_SPACE},n.isSorted=function(){if(this.cards.length<=1)return!0;for(var e=0;e<this.cards.length-1;e++){var t=this.cards[e],n=this.cards[e+1];if(t.getTag()%100<n.getTag()%100)return!1}return!0},n.updateCardPosition=function(e){if(0!==this.cards.length){var t=e||this.cards.length;this.updateSpaceBetweenMajorCards(t);for(var n=yu.CARD_MOVE_TIME,i=this.y,a=1;a<t;a++){var r=this.getVerticalSpace(a,t),s=this.cards[a];if(s){var o=i+r;s.moveTo(this.x,o,n),i=o}}this.updateCardsVisibleHeight(t)}},n.updateCardsVisibleHeight=function(e){for(var t=this.getIdxCardValidToMove(e),n=0;n<e;n++){var i=this.cards[n];i&&(i.visibleHeight=n==e-1?i.displayHeight:n<t?this.getSpaceBetweenMinorCards(e):this.getSpaceBetweenMajorCards())}},n.getVerticalSpace=function(e,t){void 0===e&&(e=0);var n=t||this.cards.length,i=this.boardGame.boundNumberOfCards,a=this.getSpaceBetweenMinorCards(n),r=this.getSpaceBetweenMajorCards();return n<=i?r:e<this.getIdxCardValidToMove(n)+1?a:r},n.getSpaceBetweenMinorCards=function(e){var t=yu.VERTICAL_PILE_SPACE,n=e||this.cards.length,i=this.boardGame.getMaxHeightTableau(),a=this.getIdxCardValidToMove(n)+1;if(0===a)return t;var r=i-(n-a)*this.spaceBetweenMajorCards;return r/a>t?t:r/a},n.getSpaceBetweenMajorCards=function(){return this.spaceBetweenMajorCards},n.updateSpaceBetweenMajorCards=function(e){var t=yu.VERTICAL_PILE_SPACE,n=yu.MIN_VERTICAL_PILE_SPACE;this.spaceBetweenMajorCards=t;var i=e||this.cards.length;if(!(this.getSpaceBetweenMinorCards(i)>=yu.MIN_VERTICAL_PILE_SPACE)){var a=this.getIdxCardValidToMove()+1,r=this.cards.length-a;if(0!==r){var s=this.boardGame.getMaxHeightTableau()-a*n,o=Math.floor(s/r);this.spaceBetweenMajorCards=o}}},n.getIdxCardValidToMove=function(e){for(var t=this.cards,n=t.length-1,i=t.length-1;i>0;i--){var a=t[i].getCardValue(),r=t[i].getCardSuit(),s=t[i-1].getCardValue(),o=t[i-1].getCardSuit();if(a!=s-1||r==o)return n;n-=1}return void 0===e?n:n+(e-t.length)},t}(Tu),ku=Pu,_u=function(e){function t(t,n){var i;return(i=e.call(this,t)||this).cards=[],i.color=void 0,i.color=n,i.createAce(),i.setName(wu.Foundation),i}(0,p.Z)(t,e);var n=t.prototype;return n.createAce=function(){this.slot.setFrame("ic_slot_a")},n.setPosition=function(t,n){e.prototype.setPosition.call(this,t,n)},n.addCard=function(t,n,i){var a=this;e.prototype.addCard.call(this,t,n,i);var r=i?0:yu.CARD_MOVE_TIME,s=this.cards.length-2;this.boardGame.scene.time.delayedCall(r,(function(){var e=a.cards[s];e&&e.kill()}))},n.pickTopCards=function(t){var n=this.cards[this.cards.length-2];return n&&n.revive(),e.prototype.pickTopCards.call(this,t)},n.canBePlace=function(e){var t=e.getTag(),n=t%100,i=(t-n)/100,a=i===this.color;if(0===this.cards.length)return t%100===hu.ACE&&a;var r=this.cards[this.cards.length-1].getTag(),s=r%100;return i==(r-s)/100&&n==s+1},n.isFull=function(){return 13===this.cards.length},t}(Tu),Ou=function(e){return e[e.NONE=0]="NONE",e[e.DEALING=1]="DEALING",e[e.IDLE=2]="IDLE",e[e.PLAYING=3]="PLAYING",e[e.AUTO_COMPLETING=4]="AUTO_COMPLETING",e[e.OUT_OF_MOVE=5]="OUT_OF_MOVE",e[e.GAME_OVER=6]="GAME_OVER",e[e.AUTO_MOVE_TO_FOUNDATION=7]="AUTO_MOVE_TO_FOUNDATION",e}({}),Ru=An.Z.GAMEPLAY_DEFAULT,Lu=Ru.KEY,Du=Ru.FRAME,Bu=function(e){function t(t){var n;return(n=e.call(this,t)||this).hand=void 0,n.handScaleDefault=1,n.name="TutorialHand",n.addHand(),n.hand.scale,n.scene.add.existing((0,za.Z)(n)),n}(0,p.Z)(t,e);var n=t.prototype;return n.addHand=function(){this.hand=this.scene.make.image({key:Lu,frame:Du.HAND,origin:{x:.5,y:.5}}),this.hand.setWorldSize(65.5,55.5),this.handScaleDefault=this.hand.scale,this.resetHandPosition(),this.add(this.hand)},n.doubleTap=function(e,t,n){var i=this;this.setHandPositionOnDoubleClick(),this.scene.tweens.add({delay:e,targets:[this.hand],ease:Phaser.Math.Easing.Cubic.In,props:{scale:{duration:100,from:this.handScaleDefault,to:.8*this.handScaleDefault},angle:{from:0,value:-10,duration:100}},loop:1,yoyo:!0,onComplete:function(){t&&i.hide(),n&&n()}})},n.tapAndHold=function(e,t){this.scene.tweens.add({delay:e,targets:[this.hand],ease:Phaser.Math.Easing.Cubic.Out,props:{scale:{duration:200,from:this.handScaleDefault,to:.8*this.handScaleDefault},angle:{from:0,value:-10,duration:200}},onComplete:t})},n.unHold=function(e,t,n){var i=this;this.scene.tweens.add({delay:e,targets:[this.hand],ease:Phaser.Math.Easing.Cubic.Out,props:{scale:{duration:200,from:.8*this.handScaleDefault,to:this.handScaleDefault},angle:{from:-10,value:0,duration:200}},onComplete:function(){t&&i.hide(),n&&n()}})},n.show=function(){this.hand.setVisible(!0)},n.hide=function(){this.hand.setVisible(!1)},n.preDestroy=function(){this.scene.tweens.killTweensOf(this.hand)},n.kill=function(){e.prototype.kill.call(this),this.resetHandPosition()},n.setHandPositionOnDoubleClick=function(){this.hand.setPosition(5,5)},n.resetHandPosition=function(){this.hand.setPosition(20,20)},t}(Phaser.GameObjects.Container),Nu=Bu,Mu=An.Z.CARD_BACK,Gu=yu.DEPTH,Fu=function(){function e(e){this.boardGame=void 0,this.bg=void 0,this.hintLayer=void 0,this.hintContainer=void 0,this.group=void 0,this.hintTween=void 0,this.hand=void 0,this.running=!1,this.boardGame=e,this.hintLayer=e.scene.add.container(),this.hintLayer.setDepth(Gu.HINT),this.hintLayer.setVisible(!1),this.group=e.scene.add.group({defaultKey:An.Z.GAMEPLAY_DEFAULT.KEY}),this.createBg(),this.createContainer(),this.createTutorialHand()}var t=e.prototype;return t.createBg=function(){var e=this,t=this.boardGame.scene.add.image(0,0,An.Z.GAMEPLAY_DEFAULT.KEY,"blank"),n=this.boardGame.scene.world.getWorldSize(),i=n.width,a=n.height;t.setOrigin(0,0),t.setWorldSize(i,a),t.setAlpha(.5),t.setTint(1315862),this.bg=t,this.boardGame.scene.game.events.on("world-resize",(function(){var n=e.boardGame.scene.world.getWorldSize(),i=n.width,a=n.height;t.setWorldSize(i,a)})),En.Z.registerObject(t),this.hintLayer.add(t)},t.createContainer=function(){this.hintContainer=this.boardGame.scene.add.container(),this.hintLayer.add(this.hintContainer)},t.fadeInHint=function(){this.running=!0,this.hintLayer.revive(),this.boardGame.scene.tweens.add({targets:[this.hintLayer],alpha:{from:0,to:1},duration:300})},t.fadeOutHint=function(){var e=this;this.boardGame.scene.tweens.add({targets:[this.hintLayer],alpha:{from:1,to:0},duration:300,onComplete:function(){e.hintLayer.kill(),e.running=!1}})},t.showDealerHint=function(){var e,t=this;if(!this.running&&(null==(e=this.hintTween)||!e.isPlaying())&&!(this.hintTween&&this.hintTween.countdown>0)){if(this.boardGame.scene.game.events.emit("pause-resize"),this.boardGame.stock.cards.length>0){var n=this.createCardBack();this.hintContainer.add([n])}var i=this.createHintGlow(),a=this.boardGame.stock.getPlacingPosition(0),r=a.x,s=a.y;this.hintContainer.add(i),this.hintContainer.setPosition(r,s),this.hintContainer.add(this.hand),this.hand.revive(),this.hintTween=this.boardGame.scene.tweens.addCounter({duration:800,onStart:function(){t.hand.doubleTap(0,!1,(function(){}))},onComplete:function(){t.hintContainer.getAll().forEach((function(e){return t.group.killAndHide(e)})),t.hintContainer.removeAll(),t.hand.kill(),t.fadeOutHint(),t.boardGame.scene.game.events.emit("resume-resize")}}),this.fadeInHint()}},t.showMoveHintAnimation=function(e,t){var n,i=this;if(!this.running&&(null==(n=this.hintTween)||!n.isPlaying())&&!(this.hintTween&&this.hintTween.countdown>0)){this.boardGame.scene.game.events.emit("pause-resize"),this.running=!0;var a=e.getWorldPosition(),r=a.x,s=a.y,o=t.getPlacingPosition(t.cards.length),c=o.x,u=o.y;if(e.placement instanceof ku)for(var l=e.placement.getSubCards(e),h=0;h<l.length;h++){var d=this.createHintCard(l[h].frame.name);d.setY(this.boardGame.getVerticalSpacePile()*h);var f=this.createHintGlow();f.setY(this.boardGame.getVerticalSpacePile()*h),this.hintContainer.add([f,d])}else{var p=this.createHintCard(e.frame.name),g=this.createHintGlow();this.hintContainer.add([g,p])}this.hintContainer.add(this.hand),this.boardGame.scene.tweens.killTweensOf(this.hand),this.hand.revive(),this.hand.tapAndHold(0),this.hintContainer.revive(),this.hintTween=this.boardGame.scene.tweens.add({targets:this.hintContainer,x:{start:r,from:r,to:c},y:{start:s,from:s,to:u},delay:300,duration:600,completeDelay:500,ease:Phaser.Math.Easing.Sine.Out,onComplete:function(){i.hand.unHold(0,!1,(function(){i.hintContainer.getAll().forEach((function(e){return i.group.killAndHide(e)})),i.hintContainer.removeAll(),i.hand.kill(),i.fadeOutHint(),i.boardGame.scene.game.events.emit("resume-resize")}))}}),this.fadeInHint()}},t.createHintGlow=function(){var e=gu(),t=this.group.get();return t.setTexture(An.Z.GAMEPLAY_DEFAULT.KEY,"hint"),t.setWorldSize(61*e,83*e),t.revive(),t},t.createHintCard=function(e){var t=this.boardGame.scene.theme.getCurrentThemeConfig().cardFaceKey,n=this.group.get();n.setTexture(t),n.revive(),n.setFrame(e);var i=yu.CARD_WIDTH,a=yu.CARD_HEIGHT;return n.setWorldSize(i,a),n},t.createCardBack=function(){var e=this.boardGame.scene.theme.getCurrentThemeConfig().cardBackFrame,t=this.group.get();t.setTexture(Mu.KEY,e),t.revive();var n=yu.CARD_WIDTH,i=yu.CARD_HEIGHT;return t.setWorldSize(n,i),t},t.createTutorialHand=function(){this.hand=new Nu(this.boardGame.scene),this.hand.kill(),this.hintLayer.add(this.hand)},e}(),Zu=Fu,Uu=function(){function e(e){this.freeCells=void 0,this.piles=void 0,this.foundations=void 0,this.moveSpace=[],this.autoMoveFoundation=!0,this.boardGame=void 0,this.boardGame=e,this.piles=[],this.foundations=[],this.freeCells=[];for(var t=0;t<8;t++)this.piles.push([]);for(var n=0;n<4;n++)this.foundations.push([]),this.freeCells.push([])}var t=e.prototype;return t.printBoard=function(){},t.updateInfo=function(){this.updateState()},t.updateState=function(){var e=this,t=this.boardGame,n=t.foundations,i=t.piles,a=t.freeCells;n.forEach((function(t,n){return e.foundations[n]=t.getAllCards()})),i.forEach((function(t,n){return e.piles[n]=t.getAllCards()})),a.forEach((function(t,n){return e.freeCells[n]=t.getAllCards()}))},t.getHint=function(){var e=this;this.moveSpace=[];var t,n=this.getMovable(),i=n.move,a=n.moveToFoundation;if(0!=i.length||0!=a.length){if(a.length>0)t=a[0];else{for(var r,s,o=0;o<i.length;o++)this.getCostByMove(i[o]);Mi()(r=this.moveSpace).call(r,(function(e,t){return e.cost-t.cost})),this.moveSpace=Be()(s=this.moveSpace).call(s,(function(t,n){for(var i=n-1;i>=0;i--){var a=e.moveSpace[i],r=a.cost,s=a.action;if(r<t.cost&&s.card==t.action.card&&s.from==t.action.from)return!1}return!0}));var c=this.moveSpace[0].cost;if(0==c)t=this.moveSpace[0].action;else{var u=0;this.moveSpace.forEach((function(e){e.cost<=c+1&&(u+=1)}));var l=Math.floor(Math.random()*Math.min(this.moveSpace.length,Math.max(3,u)));t=this.moveSpace[l].action}}return this.convertActionToHintType(t)}},t.convertActionToHintType=function(e){var t,n=e.from,i=e.to,a=e.card,r=this.boardGame,s=r.piles,o=r.freeCells,c=r.foundations,u=this.piles,l=s;"C"==n[0]&&(u=this.freeCells,l=o);this.foundations;var h=c;"C"==i[0]?(this.freeCells,h=o):"T"==i[0]&&(this.piles,h=s);var d=B()(n[1]),f=B()(i[1]),p=nn()(t=u[d]).call(t,a);return{card:l[d].getCardByIndex(p),dest:h[f]}},t.getMovesEstimate=function(){var e=0;return this.foundations.forEach((function(t){e+=t.length})),52-e},t.getNumOfCardsUnsorted=function(){for(var e=0,t=0;t<this.piles.length;t++){for(var n=this.piles[t],i=n.length,a=n.length-1;a>0;a--){var r=n[a]%100,s=Math.floor((n[a]-r)/300),o=n[a-1]%100,c=Math.floor((n[a-1]-o)/300);if(r!=o-1||s==c)break;i-=1}e+=i}return e},t.getNumOfCardsInFreeCells=function(){for(var e=0,t=0;t<this.freeCells.length;t++)this.freeCells[t].length>0&&(e+=1);return e},t.getMovable=function(){for(var e,t,n=this,i=[],a=[],r=Me()(e=this.piles).call(e,(function(e){return e[e.length-1]||0})),s=Me()(t=this.foundations).call(t,(function(e){return e[e.length-1]||0})),o=Me()(s).call(s,(function(e,t){return e?e+1:100*(3-t+1)+1})),c=0;c<r.length;c++){var u=r[c];if(u){var l=nn()(o).call(o,u);l>=0&&a.push({from:"T"+c,to:"F"+l,card:u})}}for(var h=0;h<this.freeCells.length;h++){var d=this.freeCells[h][0];if(d){var f=nn()(o).call(o,d);f>=0&&a.push({card:d,from:"C"+h,to:"F"+f})}}for(var p=0;p<this.freeCells.length;p++){var g=this.freeCells[p][0];if(g)for(var m=!1,v=0;v<this.piles.length;v++)!this.canBePlace(g,1,this.piles[v])||0==this.piles[v].length&&m||(m=0==this.piles[v].length,i.push({card:g,from:"C"+p,to:"T"+v}))}for(var y=0;y<r.length;y++){var b=r[y];if(b)for(var A=0;A<4;A++)if(0==this.freeCells[A].length){i.push({card:b,from:"T"+y,to:"C"+A});break}}return this.piles.forEach((function(e,t){e.forEach((function(a,r){for(var s=e.length-r,o=!1,c=0;c<n.piles.length;c++){var u=n.piles[c];0==r&&a%100==13||c==t||(s==e.length||o)&&0==u.length||n.canBePlace(a,s,u)&&n.isCardValidToMove(a,e)&&(o=0==u.length,i.push({card:a,from:"T"+t,to:"T"+c}))}}))})),{move:Be()(i).call(i,(function(e,t,n){return au()(n).call(n,(function(t){return t===e}))===t})),moveToFoundation:a}},t.isCardValidToMove=function(e,t){if(!e)return!1;var n=nn()(t).call(t,e);if(-1==n)return!1;if(n==t.length-1)return!0;for(var i=n+1;i<t.length;i++){var a=t[i]%100,r=Math.floor((t[i]-a)/300),s=t[i-1]%100,o=Math.floor((t[i-1]-s)/300);if(a!=s-1||r==o)return!1}return!0},t.canBePlace=function(e,t,n){var i=this.getMaxCardCanMove();if(0==n.length)return t<=i/2;var a=n[n.length-1];return!(!a||!(e/2>120&&a/2<120||e/2<120&&a/2>120)||e%100+1!=a%100)&&t<=i},t.getMaxCardCanMove=function(){var e,t,n=Be()(e=this.freeCells).call(e,(function(e){return 0==e.length})).length,i=Be()(t=this.piles).call(t,(function(e){return 0==e.length})).length;return Math.pow(2,i)*(n+1)},t.getCostByMove=function(e){var t=JSON.parse(F()(this.piles)),n=JSON.parse(F()(this.freeCells)),i=JSON.parse(F()(this.foundations)),a=JSON.parse(F()(e));this.moveAction(e),this.moveSpace.push({action:a,cost:this.getCost()}),this.piles=t,this.freeCells=n,this.foundations=i},t.moveAction=function(e){var t,n=e.card,i=e.from,a=e.to,r=this.piles;"C"==i[0]&&(r=this.freeCells);var s=this.foundations;"C"==a[0]?s=this.freeCells:"T"==a[0]&&(s=this.piles);var o=r[B()(i[1])],c=nn()(o).call(o,n);if((t=s[B()(a[1])]).push.apply(t,su()(o).call(o,c)),this.autoMoveFoundation){var u=this.getMovable().moveToFoundation;u.length>0&&this.moveAction(u[0])}},t.getCost=function(){return this.getMovesEstimate()+this.getNumOfCardsUnsorted()+this.getNumOfCardsInFreeCells()},e}(),Hu=function(){function e(e){this.scene=void 0,this.boardGame=void 0,this.availableHints=void 0,this.outOfMove=void 0,this.hintAnimation=void 0,this.hintClicked=void 0,this.hintByCost=void 0,this.timeToAutoHint=void 0,this.boardGame=e,this.scene=e.scene,this.outOfMove=!0,this.hintClicked=0,this.timeToAutoHint=0,this.hintAnimation=new Zu(e),this.hintByCost=new Uu(e)}var t=e.prototype;return t.getAvailableDestinations=function(e){var t=this.boardGame,n=t.piles,i=t.foundations,a=t.freeCells,r=[],s=e.placement;s instanceof ku&&!s.isLastCard(e)||r.push.apply(r,Be()(i).call(i,(function(t){return t.canBePlace(e)})));var o=Be()(n).call(n,(function(t){var n,i=nn()(n=e.placement.cards).call(n,e),a=e.placement.cards.length-i;return t.canBePlace(e,a)}));return r.push.apply(r,o),r.push.apply(r,Be()(a).call(a,(function(t){return t.canBePlace(e)}))),r},t.canHint=function(){return this.findMovable().length>0},t.showHint=function(){var e=(0,i.Z)(r().mark((function e(){var t;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.boardGame.isOutOfMove()){e.next=3;break}return this.boardGame.outOfMove(),e.abrupt("return");case 3:if(this.scene.vibration.performVibrating(40),this.boardGame.isIdle()&&(this.boardGame.boardState=Ou.PLAYING),this.boardGame.boardState===Ou.PLAYING){e.next=7;break}return e.abrupt("return");case 7:if(this.boardGame.scene.audio.playSound(er.Z.HINT),this.hintClicked+=1,this.resetAutoHintTime(),this.hintByCost.updateInfo(),!(t=this.hintByCost.getHint())){e.next=15;break}return this.hintAnimation.showMoveHintAnimation(t.card,t.dest),e.abrupt("return");case 15:this.boardGame.outOfMove();case 16:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),t.findMovable=function(){var e,t,n,i,a,r,s,o=this,c=[],u=this.boardGame,l=Me()(e=u.piles).call(e,(function(e){return e.cards[e.cards.length-1]})),h=Me()(t=u.piles).call(t,(function(e){var t,n=au()(t=e.cards).call(t,(function(e){return e.isFacingUp()}));return e.cards[n]})),d=Me()(n=u.foundations).call(n,(function(e){return e.cards[e.cards.length-1]})),f=Be()(i=u.freeCells).call(i,(function(e){return e.isEmpty()})),p=Be()(a=u.freeCells).call(a,(function(e){return e.isFull()})),g=Me()(p).call(p,(function(e){return e.cards[0]})),m=Me()(d).call(d,(function(e,t){return e?e.getTag()+1:100*fu[t]+1})),v=L()(r=[]).call(r,g,l),y=M()(v).call(v,(function(e){return e&&e.getTag()%100==1}));y&&c.push(y);for(var b=0;b<v.length;b++){var A=v[b];if(A)nn()(m).call(m,A.getTag())>=0&&c.push(A)}var E=Me()(s=u.piles).call(s,(function(e){return e.getFacingUpCards()}));g.forEach((function(e){var t;M()(t=u.piles).call(t,(function(t){return t.canBePlace(e,1)}))&&o.isCardValidToMove(e)&&c.push(e)}));for(var S=function(e){var t,n=h[e];if(!n)return"continue";if(n.isKing()&&0==nn()(t=u.piles[e].cards).call(t,n))return"continue";if(n){var i,a,r=u.piles[e].cards.length-nn()(i=u.piles[e].cards).call(i,n);M()(a=u.piles).call(a,(function(e){return e.canBePlace(n,r)}))&&o.isCardValidToMove(n)&&c.push(n)}},T=0;T<h.length;T++)S(T);if(E.forEach((function(e){e.forEach((function(e,t){var n,i=e.placement.cards.length-t;M()(n=u.piles).call(n,(function(t){return t.canBePlace(e,i)}))&&t>0&&o.isCardValidToMove(e)&&c.push(e)}))})),f.length>0){var C=l[Math.floor(l.length*Math.random())];this.isCardValidToMove(C)&&c.push(C)}return c},t.getNumberOfMovable=function(){this.hintByCost.updateInfo();var e=this.hintByCost.getMovable(),t=e.move,n=e.moveToFoundation;return t.length+n.length},t.isCardValidToMove=function(e){if(!e)return!1;var t=e.placement.cards,n=nn()(t).call(t,e);if(-1==n)return!1;if(n==t.length-1)return!0;for(var i=n+1;i<t.length;i++){var a=t[i].getCardValue(),r=t[i].getCardSuit(),s=t[i-1].getCardValue(),o=t[i-1].getCardSuit();if(a!=s-1||r==o)return!1}return!0},t.autoPlayStep=function(){this.hintByCost.updateInfo();var e=this.hintByCost.getHint();e&&(this.boardGame.mover.handleClickOnCard(e.card,e.dest),this.outOfMove=!1)},t.resetAutoHintTime=function(){this.timeToAutoHint=0},t.clear=function(){this.hintClicked=0},t.update=function(e){if(this.boardGame.isPlaying()){this.boardGame.scene.player.getPlayerSettings().autoHints?this.timeToAutoHint+=e:this.timeToAutoHint=0;var t=this.getNumberOfMovable()<=5?1e4:2e4;this.timeToAutoHint>t&&this.showHint()}},e}(),Wu=Hu,zu=n(603),Yu=function(e){function t(t,n){var i;return(i=e.call(this,t,0,0,An.Z.GAMEPLAY_DEFAULT.KEY,"card-bg")||this).parent=void 0,i.updateFromParent=function(){i.setPosition(i.parent.x,i.parent.y+1),i.setScale(i.parent.scaleX,i.parent.scaleY),i.setVisible(i.parent.visible)},i.parent=n,i.setDepth(yu.DEPTH.CARD_SLOT),i.updateFromParent(),t.add.existing((0,za.Z)(i)),i}return(0,p.Z)(t,e),t}(Phaser.GameObjects.Image),Vu=Yu,Ku=An.Z.GAMEPLAY_DEFAULT,ju=Ku.KEY,Xu=Ku.FRAME,Ju=function(e){function t(t,n){var i;return(i=e.call(this,t,0,0,ju,Xu.HINT)||this).parent=void 0,i.glowMode="none",i.glowTint="none",i.fadeTween=void 0,i.tintTween=void 0,i.cropTween=void 0,i.cropHeight=void 0,i.updateFromParent=function(){i.setPosition(i.parent.x,i.parent.y)},i.parent=n,i.setDepth(yu.DEPTH.CARD),i.updateFromParent(),i.cropHeight=i.getCropHeight(),t.add.existing((0,za.Z)(i)),i}(0,p.Z)(t,e);var n=t.prototype;return n.reviveGlow=function(){this.revive(),this.setAlpha(0,0,0,0),this.cropHeight=this.getCropHeight()},n.removeGlow=function(){var e=this;"none"!=this.glowMode&&(this.glowMode="none",this.playFadeTween(0,0).then((function(){e.kill()})))},n.resetGlowSizeToFull=function(){var e;"full"!=this.glowMode&&(null==(e=this.fadeTween)||e.complete(),"none"==this.glowMode?(this.reviveGlow(),this.resetGlowSizeFromNone()):this.resetGlowSizeFromCrop(),this.playFadeTween(1,1),this.glowMode="full")},n.cropGlow=function(){var e;"crop"!=this.glowMode?(null==(e=this.fadeTween)||e.complete(),"none"==this.glowMode?(this.reviveGlow(),this.cropGlowSizeFromNone()):this.cropGlowSizeFromFull(),this.playFadeTween(1,.2),this.glowMode="crop"):this.updateCropSizeWhenCropHeightChange()},n.updateCropSizeWhenCropHeightChange=function(){if("crop"===this.glowMode){var e=this.cropHeight,t=this.getCropHeight();e!==t&&this.playCropTween(e,t,100)}},n.playFadeTween=function(e,t,n){var i=this;void 0===n&&(n=200);var a=this.alphaTopLeft,r=this.alphaBottomLeft;return new(o())((function(s){i.fadeTween=i.scene.tweens.addCounter({from:0,to:1,duration:n,onUpdate:function(n){var s=n.getValue(),o=Phaser.Math.Interpolation.Linear([a,e],s),c=Phaser.Math.Interpolation.Linear([r,t],s);i.setAlpha(o,o,c,c)},onComplete:function(){s()}})}))},n.updateGlowTintByLightOn=function(){this.parent.getLightOn()?this.setGlowTint("none"):this.setGlowTint("grey")},n.setGlowTint=function(e){if(this.glowTint!=e){var t=this.getTintByString(this.glowTint),n=this.getTintByString(e);this.playUpdateTintTween(t,n),this.glowTint=e}},n.getTintByString=function(e){return"grey"===e?new Phaser.Display.Color(209,209,209):new Phaser.Display.Color(255,255,255)},n.playUpdateTintTween=function(e,t){var n,i=this;null==(n=this.tintTween)||n.remove(),this.tintTween=this.scene.tweens.addCounter({from:0,to:1,ease:Phaser.Math.Easing.Sine.InOut,duration:200,onUpdate:function(n){var a=n.getValue(),r=Phaser.Display.Color.Interpolate.ColorWithColor(e,t,100,100*a),s=Phaser.Display.Color.GetColor(r.r,r.g,r.b);i.setTint(s)}})},n.cropGlowSizeFromFull=function(){var e=this.getCropHeight();this.playCropTween(this.displayHeight,e)},n.resetGlowSizeFromCrop=function(){this.playCropTween(this.cropHeight,this.displayHeight)},n.cropGlowSizeFromNone=function(){var e=this.getCropHeight();this.playCropTween(e,e,0)},n.resetGlowSizeFromNone=function(){this.playCropTween(this.displayHeight,this.displayHeight,0)},n.getCropHeight=function(){return this.parent.visibleHeight+(this.displayHeight-this.parent.displayHeight)/2},n.playCropTween=function(e,t,n){var i,a=this;void 0===n&&(n=200),null==(i=this.cropTween)||i.remove(),this.cropTween=this.scene.tweens.addCounter({from:e,to:t,duration:n,onUpdate:function(e){var t=e.getValue(),n={x:a.x,y:a.y-a.displayHeight/2+t/2,width:a.displayWidth,height:t};a.setCropByViewport(n),a.cropHeight=t}})},n.getGlowMode=function(){return this.glowMode},t}(Phaser.GameObjects.Image),qu=Ju,Qu=An.Z.CARD_BACK,$u=function(e){function t(t,n){var i;return(i=e.call(this,t,0,0,"")||this).scene=void 0,i.bg=void 0,i.tag=void 0,i.facingUp=void 0,i.oldX=void 0,i.oldY=void 0,i.shakePosition=void 0,i.facingTween=void 0,i.movingTween=void 0,i.moves=void 0,i.placement=void 0,i.lightOn=!0,i.cardTint="none",i.tweenLight=void 0,i.isEligibleFoundation=!1,i.eligibleFoundationGlow=void 0,i.visibleHeight=yu.VERTICAL_PILE_SPACE,i.setFacing=function(e){i.facingUp=e,e?i.setCardFace():i.setCardBack()},i.scene=t,i.createBackground(),i.createEligibleFoundationGlow(),i.tag=n,i.moves=[],i.facingUp=!1,i.setEligibleFoundation(!1),i.setLightOn(!0),i.cardTint="none",t.add.existing((0,za.Z)(i)),i.addBehavior(),i}(0,p.Z)(t,e);var n=t.prototype;return n.createBackground=function(){var e=new Vu(this.scene,this);this.bg=e,this.scene.events.on(Phaser.Scenes.Events.POST_UPDATE,e.updateFromParent)},n.createEligibleFoundationGlow=function(){var e=new qu(this.scene,this);this.eligibleFoundationGlow=e;var t=gu();e.setWorldSize(61*t,83*t),this.scene.events.on(Phaser.Scenes.Events.POST_UPDATE,e.updateFromParent),e.kill()},n.updateCardStyle=function(){this.setFacing(this.facingUp),this.input||(this.setInteractive({useHandCursor:!0,draggable:!0}),this.disableInteractive()),this.updateSize()},n.setPlacement=function(e){this.placement=e},n.shake=function(){this.isMoving()||(void 0==this.shakePosition&&(this.shakePosition=new zu.Z(this)),this.shakePosition.setMagnitude(1.2),this.shakePosition.setDuration(500),this.shakePosition.shake())},n.setFacingWithFlippingAnim=function(e){var t,n=this;if(this.facingUp!==e){this.facingUp=e,null==(t=this.facingTween)||t.remove(),this.updateSize();var i=GameCore.Configs.Gameplay.SkipStartAnimation?0:150;this.facingTween=this.scene.tweens.add({targets:this,scaleX:0,yoyo:!0,duration:i,onYoyo:function(){return n.setFacing(e)}})}},n.isFacingUp=function(){return this.facingUp},n.getTag=function(){return this.tag},n.isAce=function(){return this.tag%100===hu.ACE},n.isKing=function(){return this.tag%100===hu.KING},n.moveTo=function(e,t,n){var i,a,r=this;if(void 0===n&&(n=0),null==(i=this.movingTween)||i.complete(),e!=this.x||t!=this.y){null==(a=this.shakePosition)||a.stop(),this.shakePosition=void 0;var s=GameCore.Configs.Gameplay.SkipAnimationMove?0:n;this.movingTween=this.scene.tweens.add({targets:this,x:e,y:t,duration:s,ease:Phaser.Math.Easing.Sine.Out,onComplete:function(){var e;null==(e=r.movingTween)||e.remove(),r.movingTween=void 0}})}},n.isMoving=function(){return this.movingTween&&(this.movingTween.isPlaying()||!this.movingTween.hasStarted)},n.reset=function(){var e,t;null==(e=this.movingTween)||e.complete(),null==(t=this.facingTween)||t.complete(),this.updateSize(),this.disableInteractive(),this.setFacing(!1),this.visibleHeight=yu.VERTICAL_PILE_SPACE,this.eligibleFoundationGlow.kill()},n.setCardFace=function(){var e=this.scene.theme.getCurrentThemeConfig().cardFaceKey;this.setTexture(e,""+this.tag)},n.setCardBack=function(){var e=this.scene.theme.getCurrentThemeConfig().cardBackFrame;this.setTexture(Qu.KEY,e)},n.updateSize=function(){var e=yu.CARD_WIDTH,t=yu.CARD_HEIGHT;this.setWorldSize(e,t),this.bg.updateFromParent();var n=gu();this.eligibleFoundationGlow.setWorldSize(61*n,83*n)},n.addBehavior=function(){this.shakePosition=new zu.Z(this,{duration:500,magnitude:2})},n.getCardValue=function(){return this.getTag()%100},n.getCardSuit=function(){return Math.floor((this.getTag()-this.getCardValue())/300)},n.setLightOn=function(e){e?this.setCardTint("none"):this.isEligibleFoundation?this.setCardTint("lightGrey"):this.setCardTint("darkGrey"),this.lightOn=e,this.isEligibleFoundation&&this.eligibleFoundationGlow.updateGlowTintByLightOn()},n.setCardTint=function(e){if(this.cardTint!=e){var t=this.getTintByString(this.cardTint),n=this.getTintByString(e);this.playUpdateTintTween(t,n),this.cardTint=e}},n.getTintByString=function(e){switch(e){case"lightGrey":return new Phaser.Display.Color(160,160,160);case"darkGrey":return new Phaser.Display.Color(120,120,120);default:return new Phaser.Display.Color(255,255,255)}},n.playUpdateTintTween=function(e,t){var n,i=this;null==(n=this.tweenLight)||n.remove(),this.tweenLight=this.scene.tweens.addCounter({from:0,to:1,ease:Phaser.Math.Easing.Sine.InOut,duration:200,onUpdate:function(n){var a=n.getValue(),r=Phaser.Display.Color.Interpolate.ColorWithColor(e,t,100,100*a),s=Phaser.Display.Color.GetColor(r.r,r.g,r.b);i.setTint(s)}})},n.getLightOn=function(){return this.lightOn},n.setEligibleFoundation=function(e){e?(this.updateGlowByPlacement(),this.lightOn?this.setCardTint("none"):this.setCardTint("lightGrey")):(this.lightOn?this.setCardTint("none"):this.setCardTint("darkGrey"),this.eligibleFoundationGlow.removeGlow()),this.isEligibleFoundation=e},n.updateGlowByPlacement=function(){var e,t=this.placement;t.getname()===wu.Pile?nn()(e=t.cards).call(e,this)===t.cards.length-1?this.eligibleFoundationGlow.resetGlowSizeToFull():this.eligibleFoundationGlow.cropGlow():this.eligibleFoundationGlow.resetGlowSizeToFull()},n.getEligibleFoundation=function(){return this.isEligibleFoundation},t}(Phaser.GameObjects.Image),el=$u,tl=1/GameCore.Utils.Image.getImageScale(),nl=An.Z.GAMEPLAY_DEFAULT.KEY,il=function(e){function t(t){var n;return(n=e.call(this,t,nl)||this).emitZone=void 0,n.particleEmitters=void 0,n.particleEmitters=[],n.emitZone=new Phaser.Geom.Rectangle(-15,-20,30,40),n.createSuitEmitter("suit_spades"),n.createSuitEmitter("suit_clubs"),n.createSuitEmitter("suit_diamonds"),n.createSuitEmitter("suit_heart"),n.scene.add.existing((0,za.Z)(n)),n.setDepth(1e3),n}(0,p.Z)(t,e);var n=t.prototype;return n.createSuitEmitter=function(e){this.particleEmitters.push(this.createEmitter({on:!1,frame:e,emitZone:{source:this.emitZone,type:"random"},speed:40,frequency:100,alpha:{start:1,end:0,ease:Phaser.Math.Easing.Expo.Out},scale:.5*tl,lifespan:1200,rotate:{start:0,end:40,random:!0}}))},n.explode=function(e,t,n,i){this.particleEmitters[e].explode(t,n,i)},t}(Phaser.GameObjects.Particles.ParticleEmitterManager),al=il;function rl(e,t){var n="undefined"!==typeof k()&&O()(e)||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){var n;if(!e)return;if("string"===typeof e)return sl(e,t);var i=w()(n=Object.prototype.toString.call(e)).call(n,8,-1);"Object"===i&&e.constructor&&(i=e.constructor.name);if("Map"===i||"Set"===i)return x()(e);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return sl(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var i=0;return function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function sl(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var ol=Phaser.Input.Events,cl=ol.GAMEOBJECT_DOWN,ul=ol.DRAG,ll=ol.POINTER_UP,hl=ol.GAME_OUT,dl=function(){function e(e){var t=this;this.boardGame=void 0,this.undos=void 0,this.picked=void 0,this.dragX=void 0,this.dragY=void 0,this.pickedPlacement=void 0,this.suitExplosive=void 0,this.undoClicked=void 0,this.isDragOutOfCanvas=!1,this.handlePointerDown=function(e,n){if(!t.isPicked()&&n instanceof el){var i;if(n.placement.getname()===wu.Foundation)return;if(!n.getLightOn())return;if(t.boardGame.isOnAutoMoveToFoundation())return;t.boardGame.boardState=Ou.PLAYING;var a=n;if(a.isMoving())return;var r=nn()(i=a.placement.cards).call(i,a);t.boardGame.hint.isCardValidToMove(a)&&t.pickCard(a.placement,a.placement.cards.length-r)}},this.isDragged=void 0,this.dragPicked=function(e,n,i,a){!t.isDragged&&e.getDistanceX()+e.getDistanceY()<15||(t.isDragged=!0,t.dragX=i,t.dragY=a)},this.handlePointerUp=function(e){if(t.isPicked()){var n=t.picked[0],i=t.findFirstDestination(e,t.picked),a=!1;i?t.movePickedToNewPlacement(i):a=!0;var r=e.upTime-e.downTime<1e3;if(t.isDragOutOfCanvas&&void 0!==e.id&&(t.isDragOutOfCanvas=!1,r=!0),!t.isDragged&&r){if(t.donePick(),t.boardGame.scene.player.getPlayerSettings().tapToMove){if(n.isMoving())return;t.handleClickOnCard(n)}}else t.donePick(a),t.boardGame.updateEligibleFoundationCards(),t.boardGame.updateAllCardLightOn();t.boardGame.hint.resetAutoHintTime()}},this.handlePointerOutOfCanvas=function(e){t.boardGame.isPlaying()&&t.isPicked()&&(t.isDragOutOfCanvas=!0,t.handlePointerUp(e))},this.boardGame=e,this.undos=[],this.picked=[],this.undoClicked=0,this.suitExplosive=new al(e.scene)}var t=e.prototype;return t.enableInput=function(){var e=this.boardGame.scene;e.input.on(cl,this.handlePointerDown),e.input.on(ul,this.dragPicked),e.input.on(ll,this.handlePointerUp),e.input.on(hl,this.handlePointerOutOfCanvas)},t.disableInput=function(){var e=this.boardGame.scene;e.input.off(cl,this.handlePointerDown),e.input.off(ul,this.dragPicked),e.input.off(ll,this.handlePointerUp),e.input.off(hl,this.handlePointerOutOfCanvas)},t.isPicked=function(){return this.picked.length>0},t.movePickedToNewPlacement=function(e){for(var t,n=this,i=rl(this.picked);!(t=i()).done;){var a=t.value;e.addCard(a,!0),e instanceof ku&&e.updateCardPosition(e.cards.length)}if(this.pickedPlacement instanceof ku&&this.pickedPlacement.updateCardPosition(),e instanceof _u){this.boardGame.increaseScore(10),this.boardGame.isPlaying()&&this.boardGame.scene.audio.playSound("finish"+e.cards.length,{delay:.1});var r=e.getPlacingPosition(0),s=r.x,o=r.y,c=e.cards[0].getTag(),u=(c-c%100)/100-1;this.boardGame.scene.time.delayedCall(400,(function(){n.suitExplosive.explode(u,12,s,o)}))}else this.boardGame.isPlaying()&&this.boardGame.scene.audio.playSound(er.Z.CARD_MOVE);this.undos.push({type:"move",numOfCards:this.picked.length,srcName:this.pickedPlacement.getname(),srcIdx:this.pickedPlacement.getIdx(),destName:e.getname(),destIdx:e.getIdx()}),this.picked=[],this.boardGame.increaseMovesAndSaveBoard(),this.boardGame.updateAfterMove()},t.unMovePickedToPlacement=function(e){for(var t,n=rl(this.picked);!(t=n()).done;){var i=t.value;e.addCard(i,!0),e instanceof ku&&e.updateCardPosition(e.cards.length),i.setLightOn(!0)}this.pickedPlacement instanceof _u&&this.boardGame.decreaseScore(10),this.picked=[]},t.pickCard=function(e,t){this.pickedPlacement=e,this.picked=e.pickTopCards(t),this.isDragged=!1},t.donePick=function(e){if(this.isPicked()){for(var t,n=rl(this.picked);!(t=n()).done;){var i=t.value;this.pickedPlacement.addCard(i,this.isDragged)}e&&this.pickedPlacement instanceof ku&&this.pickedPlacement.updateCardPosition(),this.picked=[],this.isDragged=!1}},t.findFirstDestination=function(e,t){if(1==t.length){var n=this.detectFoundation(e,t[0]),i=this.detectFreeCell(e,t[0]);if(n)return n;if(i)return i}return this.detectPile(e,t[0])},t.detectFoundation=function(e,t){var n,i,a=Be()(n=this.boardGame.foundations).call(n,(function(e){return Phaser.Geom.Intersects.RectangleToRectangle(t.getBounds(),e.slot.getBounds())})).length>0,r=Be()(i=this.boardGame.foundations).call(i,(function(e){return a&&e.canBePlace(t)}));if(2==r.length)return e.worldX-r[0].x<r[1].x-e.worldX?r[0]:r[1];if(1==r.length){if(r[0]==this.pickedPlacement)return;return r[0]}},t.detectFreeCell=function(e,t){var n,i=Be()(n=this.boardGame.freeCells).call(n,(function(e){return Phaser.Geom.Intersects.RectangleToRectangle(t.getBounds(),e.slot.getBounds())&&e.canBePlace(t)}));if(2==i.length)return e.worldX-i[0].x<i[1].x-e.worldX?i[0]:i[1];if(1==i.length){if(i[0]==this.pickedPlacement)return;return i[0]}},t.detectPile=function(e,t){var n,i,a=this,r=Be()(n=this.boardGame.piles).call(n,(function(e){var n,r=(null==(n=e.getLastCard())?void 0:n.getBounds())||e.slot.getBounds(),s=e!==a.pickedPlacement&&Phaser.Geom.Intersects.RectangleToRectangle(t.getBounds(),r),o=e.canBePlace(t,a.picked.length);return s&&!o&&0===e.cards.length&&(i=e),s&&o}));return 0===r.length&&void 0!==i&&this.notifyRule(),2==r.length?(e.worldX,r[0].x,r[1].x,e.worldX,r[1]):1==r.length?r[0]:void 0},t.notifyRule=function(){var e=this.boardGame.getNumberOfEmptyFreeCell(),t=this.boardGame.getNumberOfEmptyPile(),n=this.boardGame.getMaxCardCanMoveToEmptyPile();if(this.picked.length>n){this.boardGame.messageText.show("warningText",{numberOfEmptyFreeCell:""+e,numberOfEmptyPile:""+t,maxCardCanMoveToEmptyPile:""+n},3e3)}},t.getAvailableDestinations=function(){var e=this,t=this.boardGame,n=t.foundations,i=t.freeCells,a=[];1==this.picked.length&&a.push.apply(a,Be()(n).call(n,(function(t){return t!==e.pickedPlacement&&t.canBePlace(e.picked[0])})));var r=this.getPileDestinations();if(a.push.apply(a,r),1==this.picked.length){var s=Be()(i).call(i,(function(t){return t!==e.pickedPlacement&&t.canBePlace(e.picked[0])}));a.push.apply(a,s)}return a},t.getPileDestinations=function(){var e=this,t=this.boardGame.piles,n=Be()(t).call(t,(function(t){return t!==e.pickedPlacement&&t.canBePlace(e.picked[0],e.picked.length)}));return Mi()(n).call(n,(function(e,t){return t.cards.length-e.cards.length}))},t.handleClickOnCard=function(e,t){var n;if(!this.isPicked()){var i=nn()(n=e.placement.cards).call(n,e);this.pickCard(e.placement,e.placement.cards.length-i);var a=t?[t]:this.getAvailableDestinations();if(0===a.length){this.boardGame.scene.audio.playSound(er.Z.NO_MOVE);for(var r,s=rl(this.picked);!(r=s()).done;){r.value.shake()}return this.donePick(),this.boardGame.updateEligibleFoundationCards(),void this.boardGame.updateAllCardLightOn()}var o=this.selectDestination(e,a);this.movePickedToNewPlacement(o),this.donePick()}},t.selectDestination=function(e,t){if(!(e.placement instanceof ku)||e.placement.cards.length>0)return t[0];for(var n=0;n<t.length;n++){var i=t[n];if(!(i instanceof ku&&0==i.cards.length))return i}return t[0]},t.moveCardToFoundation=function(e,t){var n=this;e.setLightOn(!0);var i=e.placement.getname(),a=e.placement.getIdx();e.placement.pickTopCards(1),e.placement instanceof ku&&e.placement.updateCardPosition(),t.addCard(e,!0),this.boardGame.increaseScore(10),(this.boardGame.isPlaying()||this.boardGame.isOnAutoMoveToFoundation())&&(this.boardGame.isOnLastAutoMoveToFoundation||this.boardGame.scene.audio.playSound("finish"+t.cards.length,{delay:.1}));var r=t.getPlacingPosition(0),s=r.x,o=r.y,c=t.cards[0].getTag(),u=(c-c%100)/100-1;this.boardGame.scene.time.delayedCall(400,(function(){n.suitExplosive.explode(u,12,s,o)}));var l={type:"auto",numOfCards:1,srcName:i,srcIdx:a,destName:t.getname(),destIdx:t.getIdx()};this.undos.push(l),this.boardGame.increaseMovesAndSaveBoard()},t.moveCardToPlacement=function(e,t){e.setLightOn(!0);var n=e.placement.getname(),i=e.placement.getIdx();e.placement.pickTopCards(1),e.placement instanceof ku&&e.placement.updateCardPosition(),t.addCard(e,!0),(this.boardGame.isPlaying()||this.boardGame.isOnAutoMoveToFoundation())&&(this.boardGame.isOnLastAutoMoveToFoundation||this.boardGame.scene.audio.playSound(er.Z.CARD_MOVE));var a={type:"auto",numOfCards:1,srcName:n,srcIdx:i,destName:t.getname(),destIdx:t.getIdx()};this.undos.push(a),this.boardGame.increaseMovesAndSaveBoard()},t.undo=function(){if(this.boardGame.boardState!==Ou.GAME_OVER){var e=this.undos.pop();if(e){this.boardGame.scene.audio.playSound(er.Z.UNDO),this.boardGame.boardState=Ou.PLAYING,this.undoClicked+=1;var t=e.numOfCards,n=e.srcName,i=e.srcIdx,a=e.destName,r=e.destIdx,s=this.getPlacement(n,i),o=this.getPlacement(a,r);"move"===e.type?(this.pickCard(o,t),this.unMovePickedToPlacement(s),this.donePick(),this.boardGame.hint.outOfMove=!1,this.boardGame.increaseMovesAndSaveBoard(),this.boardGame.updateEligibleFoundationCards(),this.boardGame.updateAllCardLightOn(),this.boardGame.decreaseScore(5)):"auto"===e.type&&(this.pickCard(o,t),this.unMovePickedToPlacement(s),this.donePick(),this.boardGame.hint.outOfMove=!1,this.undo()),o instanceof ku&&o.updateCardPosition(),this.boardGame.checkAutoCompleted()}}},t.clear=function(){this.undos=[],this.undoClicked=0},t.update=function(){if(this.isDragged)for(var e=0;e<this.picked.length;e++){var t=this.picked[e];t.setPosition(this.dragX,this.dragY+e*this.boardGame.getVerticalSpacePile()),t.scene.gameplay.cardsLayer.bringToTop(t),t.scene.gameplay.cardsLayer.bringToTop(t.eligibleFoundationGlow)}},t.getPlacement=function(e,t){if(e===wu.Stock)return this.boardGame.stock;if(e===wu.Pile)return this.boardGame.piles[t];if(e===wu.Foundation)return this.boardGame.foundations[t];if(e===wu.FreeCell)return this.boardGame.freeCells[t];throw new Error("Placement not found!!!")},t.getPicked=function(){return this.picked},t.getPickedPlacement=function(){return this.pickedPlacement},e}(),fl=dl,pl=function(e){function t(t){var n;return(n=e.call(this,t)||this).setName(wu.Stock),n.slot.setVisible(!1),n}(0,p.Z)(t,e);var n=t.prototype;return n.setPosition=function(t,n){e.prototype.setPosition.call(this,t,n)},n.addCard=function(t,n){e.prototype.addCard.call(this,t,n),t.setFacingWithFlippingAnim(!1),t.disableInteractive()},n.canBePlace=function(e){return!1},n.clear=function(){this.cards=[]},n.update=function(t){e.prototype.update.call(this,t)},t}(Tu),gl=n(602),ml=n.n(gl),vl=n(672),yl=[201,202,203,204,205,206,207,208,209,210,211,212,213,301,302,303,304,305,306,307,308,309,310,311,312,313,401,402,403,404,405,406,407,408,409,410,411,412,413,101,102,103,104,105,106,107,108,109,110,111,112,113],bl=function(){function e(){this.strSeed=void 0,this.intSeed=void 0}var t=e.prototype;return t.generateSeed=function(){var e=function(e,t){var n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789*#%&!",i="",a=e;void 0!=t&&(a-=t.length,i+=t);for(var r=0;r<a;r++){var s=Math.floor(67*Math.random());i+=n.charAt(s)}return i}(10);return e},t.shuffle=function(e){var t=String((0,vl.Z)(e));if(this.isStandardSeed(t))return this.mapSuitFromStandardDealToGame(Number(t));for(var n=this.getOriginalSeed(t),i=[],a=0;a<n.length;){var r=w()(n).call(n,a,a+3),s=ml()(r),o=nn()(yl).call(yl,s);i.push(o),a+=3}return i},t.isStandardSeed=function(e){return e.length<=10},t.isStandardSeedValid=function(e){if(!this.isStandardSeed(e))return!1;var t,n=Number(e);if(!(n&&n>=1))return!1;if(52!=(t=this.mapSuitFromStandardDealToGame(n)).length)return!1;for(var i=Mi()(t).call(t,(function(e,t){return e-t})),a=0;a<52;a++)if(a!=i[a])return!1;return!0},t.mapSuitFromStandardDealToGame=function(e){for(var t,n=this.shuffleByStandardNumberedDeal(e),i=Ht()(t=new Array(52)).call(t,0),a=0;a<i.length;a++){var r=n[a]%4,s=Math.floor(n[a]/4);switch(r){case 0:i[a]=0+s;break;case 1:i[a]=13+s;break;case 2:i[a]=26+s;break;case 3:i[a]=39+s;break;default:return[]}}return i},t.shuffleByStandardNumberedDeal=function(e){for(var t,n,i=Me()(t=Ht()(n=new Array(52)).call(n,0)).call(t,(function(e,t){return t})),a=e,r=0;r<i.length;++r){var s=i.length-r;a=(214013*a+2531011)%Math.pow(2,32);var o=Math.floor(a/Math.pow(2,16))%Math.pow(2,15),c=void 0;c=e<Math.pow(2,31)?o%s:(o+Math.pow(2,15))%s;var u=[i[s-1],i[c]];i[c]=u[0],i[s-1]=u[1]}return i},t.shuffles=function(e,t){if(this.setSeed(t)){for(var n=w()(e).call(e,0),i=n.length,a=this.genMap(i),r=i-1;r>0;r--)n[r]=su()(n).call(n,a[i-1-r],1,n[r])[0];return n}return e},t.genMap=function(e){for(var t=new Array(e),n=0;n<e;n++)t[n]=(this.intSeed=(9301*this.intSeed+49297)%233280)/233280*e|0;return t=this.modifyIfNoZero(t)},t.modifyIfNoZero=function(e){for(var t=!1,n=0;n<e.length;n++)0===e[n]&&(t=!0);return!1===t&&(e[e[e.length-1]]=0),e},t.setSeed=function(e){var t,n=Me()(t=String(this.strSeed=e).split("")).call(t,(function(e){return e.charCodeAt(0)})).join("");return this.intSeed=Number(n),!0},t.getOriginalSeed=function(e){for(var t="",n="abcdefghijklm",i="nopqrstuvwxyz",a="ABCDEFGHIJKLM",r="NOPQRSTUVWXYZ",s=0;s<e.length;s++){var o=e[s],c=nn()(n).call(n,o);-1==c?-1==(c=nn()(i).call(i,o))?-1==(c=nn()(a).call(a,o))?-1==(c=nn()(r).call(r,o))||(t+=(400+c+1).toString()):t+=(300+c+1).toString():t+=(200+c+1).toString():t+=(100+c+1).toString()}return t},e}(),Al=bl,El=n(674),Sl=function(){function e(e){this.boardGame=void 0,this.cards=void 0,this.boardGame=e,this.cards=[]}var t=e.prototype;return t.init=function(){var e=this,t=this.boardGame.scene;this.cards.push(new el(t,uu.ACE),new el(t,uu.TWO),new el(t,uu.THREE),new el(t,uu.FOUR),new el(t,uu.FIVE),new el(t,uu.SIX),new el(t,uu.SEVEN),new el(t,uu.EIGHT),new el(t,uu.NINE),new el(t,uu.TEN),new el(t,uu.JACK),new el(t,uu.QUEEN),new el(t,uu.KING)),this.cards.push(new el(t,cu.ACE),new el(t,cu.TWO),new el(t,cu.THREE),new el(t,cu.FOUR),new el(t,cu.FIVE),new el(t,cu.SIX),new el(t,cu.SEVEN),new el(t,cu.EIGHT),new el(t,cu.NINE),new el(t,cu.TEN),new el(t,cu.JACK),new el(t,cu.QUEEN),new el(t,cu.KING)),this.cards.push(new el(t,ou.ACE),new el(t,ou.TWO),new el(t,ou.THREE),new el(t,ou.FOUR),new el(t,ou.FIVE),new el(t,ou.SIX),new el(t,ou.SEVEN),new el(t,ou.EIGHT),new el(t,ou.NINE),new el(t,ou.TEN),new el(t,ou.JACK),new el(t,ou.QUEEN),new el(t,ou.KING)),this.cards.push(new el(t,lu.ACE),new el(t,lu.TWO),new el(t,lu.THREE),new el(t,lu.FOUR),new el(t,lu.FIVE),new el(t,lu.SIX),new el(t,lu.SEVEN),new el(t,lu.EIGHT),new el(t,lu.NINE),new el(t,lu.TEN),new el(t,lu.JACK),new el(t,lu.QUEEN),new el(t,lu.KING));var n=this.boardGame.stock.getPlacingPosition(0),i=n.x,a=n.y;this.cards.forEach((function(t){t.updateCardStyle(),t.setFacing(!1),t.kill(),t.setPosition(i,a),t.setDepth(yu.DEPTH.CARD),e.boardGame.gameplay.cardsLayer.add(t.bg),e.boardGame.gameplay.cardsLayer.add(t),e.boardGame.gameplay.cardsLayer.add(t.eligibleFoundationGlow)}))},t.reset=function(){var e=this.boardGame.stock.getPlacingPosition(0),t=e.x,n=e.y;this.cards.forEach((function(e){e.reset(),e.revive();var i=GameCore.Configs.Gameplay.SkipStartAnimation?0:200;e.moveTo(t,n,i)}))},t.align=function(){var e=this.boardGame.stock.getPlacingPosition(0),t=e.x,n=e.y;this.cards.forEach((function(e){e.reset(),e.setPosition(t,n,200)}))},t.alignCurrentDeck=function(){for(var e=this.boardGame,t=e.stock,n=e.freeCells,i=e.foundations,a=e.piles,r=0;r<t.cards.length;r++){var s=t.getPlacingPosition(r),o=s.x,c=s.y;t.cards[r].setPosition(o,c)}for(var u=0;u<n.length;u++)for(var l=n[u],h=0;h<l.cards.length;h++){var d=l.getPlacingPosition(h),f=d.x,p=d.y;l.cards[h].setPosition(f,p)}for(var g=0;g<i.length;g++)for(var m=i[g],v=0;v<m.cards.length;v++){var y=m.getPlacingPosition(v),b=y.x,A=y.y;m.cards[v].setPosition(b,A)}for(var E=0;E<a.length;E++)for(var S=a[E],T=0;T<S.cards.length;T++){var C=S.getPlacingPosition(T),w=C.x,I=C.y;S.cards[T].setPosition(w,I)}},t.getDeck=function(e){var t=this;return Me()(e).call(e,(function(e){return t.cards[e]}))},t.getCards=function(e){var t=this;return Me()(e).call(e,(function(e){return t.cards[e]}))},e}(),Tl=Sl,Cl=function(e){function t(t){var n;return(n=e.call(this,t)||this).setName(wu.FreeCell),n}(0,p.Z)(t,e);var n=t.prototype;return n.setPosition=function(t,n){e.prototype.setPosition.call(this,t,n)},n.canBePlace=function(e){return!this.isFull()},n.isFull=function(){return 1===this.cards.length},t}(Tu),wl=n(673),Il={},xl=function(e){var t=window.game.world.getPixelRatio(),n=e.scene,i=e.key,a=e.newKey,r=e.radius,s=e.alpha,o=e.width*t,c=e.height*t,u=(e.border||0)*t,l=n.textures.get(i).getSourceImage();if(!l)return!1;if(n.textures.exists(a))return!0;var h=n.textures.createCanvas(a||i,o,c),d=h.context,f=u,p=Il[i];if(!p){(p=document.createElement("canvas")).width=l.width,p.height=l.height;var g=p.getContext("2d");g.drawImage(l,0,0),wl.r_(p,0,0,p.width,p.height,r),g.globalAlpha=s,g.fillStyle="#ffffff",null==g||g.fillRect(0,0,l.width,l.height),g.globalAlpha=1,Il[i]=p}return d.beginPath(),d.moveTo(f,0),d.lineTo(o-f,0),d.quadraticCurveTo(o,0,o,0+f),d.lineTo(o,0+c-f),d.quadraticCurveTo(o,0+c,o-f,0+c),d.lineTo(f,0+c),d.quadraticCurveTo(0,0+c,0,0+c-f),d.lineTo(0,0+f),d.quadraticCurveTo(0,0,f,0),d.closePath(),d.clip(),h.draw(-l.width/2+o/2+f/2,-l.height/2+c/2+f/2,p),!0},Pl=function(e){function t(t,n){var i,a=n.key,r=n.width,s=n.height,o=n.border,c=n.radius,u=n.y,l=void 0===u?0:u,h=n.alpha,d=void 0===h?.15:h,f=t.theme.getCurrentThemeConfig().backgroundKey,p=f+a;return xl({scene:t,key:f,newKey:p,radius:c,border:o,width:r,height:s,alpha:d,y:l}),(i=e.call(this,t,0,0,p)||this).setTexture(p),i.scene.events.on(no.BACKGROUND_CHANGED,(function(e){var n=e+a;xl({scene:t,key:e,newKey:n,radius:c,border:o,width:r,height:s,alpha:d,y:l}),i.setTexture(n),i.setWorldSize(r,s)})),i.setWorldSize(r,s),i}return(0,p.Z)(t,e),t}(Phaser.GameObjects.Image),kl=Pl,_l=n(666),Ol=n(22),Rl=function(e){function t(t){var n;return(n=e.call(this,t)||this).messageText=void 0,n.openAnimation=void 0,n.closeAnimation=void 0,n.closeTimerEvent=void 0,n.background=void 0,n.createBackground(),n.createMessageText(),n.setDepth(mn.Z.MESSAGE),n.setVisible(!1),t.add.existing((0,za.Z)(n)),n}(0,p.Z)(t,e);var n=t.prototype;return n.createBackground=function(){var e=new Ol.Z(this.scene,0,0,200,100,8,2039583,.6);e.setDepth(mn.Z.MESSAGE),this.scene.add.existing(e),this.background=e,this.add(e)},n.createMessageText=function(){this.messageText=this.scene.add.bitmapText(0,0,Fo.Z.PRIMARY.KEY,"warningText",this.scene.fontSize(15)).setOrigin(.5,.5).setDepth(mn.Z.MESSAGE),this.scene.world.isLandscape()?this.messageText.setMaxSize(410,42):this.messageText.setMaxSize(360,40),this.messageText.setCenterAlign(),this.add(this.messageText)},n.show=function(e,t,n){var i,a,r,s,o,c=this;this.messageText.setTranslationParameters(t),this.messageText.setText(e),this.background.width=this.messageText.width+10,this.background.height=this.messageText.height+10,this.background.x=this.messageText.x,this.background.y=this.messageText.y,this.setVisible(!0),null==(i=this.openAnimation)||i.stop(),null==(a=this.openAnimation)||a.remove(),null==(r=this.closeAnimation)||r.stop(),null==(s=this.closeAnimation)||s.remove(),this.openAnimation=new _l.Z({targets:[this],props:{scale:{getStart:function(e){return e.scale-.3},getEnd:function(e){return e.scale}}}}),this.openAnimation.play(),null==(o=this.closeTimerEvent)||o.remove(),n>0&&(this.closeTimerEvent=this.scene.time.addEvent({delay:n,callback:function(){var e,t;c.messageText.visible&&(null==(e=c.closeAnimation)||e.stop(),null==(t=c.closeAnimation)||t.remove(),c.closeAnimation=new _l.Z({targets:[c],props:{scale:{getStart:function(e){return e.scale},getEnd:function(e){return 0}},alpha:0},onComplete:function(){c.setVisible(!1),c.setScale(1),c.setAlpha(1)}}),c.closeAnimation.play())}}))},t}(Phaser.GameObjects.Container),Ll=Rl,Dl=function(){function e(e,t,n){var i=this;this.piles=void 0,this.freeCells=void 0,this.foundations=void 0,this.piles=[],this.foundations=[],this.freeCells=[];for(var a=0;a<8;a++)this.piles.push([]);for(var r=0;r<4;r++)this.foundations.push([]),this.freeCells.push([]);n.forEach((function(e,t){return i.foundations[t]=e.getAllCards()})),e.forEach((function(e,t){return i.piles[t]=e.getAllCards()})),t.forEach((function(e,t){return i.freeCells[t]=e.getAllCards()}))}var t=e.prototype;return t.isCanSmartAutoComplete=function(e){return void 0===e&&(e=3),!(this.countUnsortedCard()>e)&&(!!this.moveAllValidCardToFoundation()||this.compareUnsortedCardAndEmptyPlacement())},t.compareUnsortedCardAndEmptyPlacement=function(){var e=this.countEmptyFreecellAndPile();return this.countUnsortedCard()<=e},t.countEmptyFreecellAndPile=function(){var e,t,n=Be()(e=this.freeCells).call(e,(function(e){return 0==e.length})),i=Be()(t=this.piles).call(t,(function(e){return 0==e.length}));return n.length+i.length},t.countUnsortedCard=function(){var e=this,t=0;return this.piles.forEach((function(n){var i=e.countUnsortedCardInPile(n);t+=i})),t},t.countUnsortedCardInPile=function(e){if(e.length<=1)return 0;for(var t=0;t<e.length-1;t++){if(e[t]%100<e[t+1]%100)return e.length-t-1}return 0},t.moveAllValidCardToFoundation=function(){if(this.isGameWon())return!0;var e=this.findMoveToFoundationMove();if(e){var t=this.getAvailableDestinations(e);return!!t&&(this.moveCardToFoundation(e,t),this.moveAllValidCardToFoundation())}return!1},t.getAvailableDestinations=function(e){var t=this.foundations,n=Be()(t).call(t,(function(t,n){return(e-e%100)/100==fu[n]}));return n.length>0?n[0]:void 0},t.isGameWon=function(){var e;return!M()(e=this.foundations).call(e,(function(e){return!(13===e.length)}))},t.moveCardToFoundation=function(e,t){this.pickTopCard(e),t.push(e)},t.pickTopCard=function(e){this.freeCells.forEach((function(t){xe()(t).call(t,e)&&su()(t).call(t,t.length-1,1)})),this.piles.forEach((function(t){xe()(t).call(t,e)&&su()(t).call(t,t.length-1,1)}))},t.findMoveToFoundationMove=function(){var e,t,n,i,a=Be()(e=this.freeCells).call(e,(function(e){return 1===e.length})),r=Me()(a).call(a,(function(e){return e[0]})),s=Me()(t=this.piles).call(t,(function(e){return e[e.length-1]})),o=L()(n=[]).call(n,r,s),c=[],u=M()(o).call(o,(function(e){return e&&e%100==1}));u&&c.push(u);for(var l=Me()(i=this.foundations).call(i,(function(e){return e[e.length-1]})),h=Me()(l).call(l,(function(e,t){return e?e+1:100*fu[t]+1})),d=0;d<o.length;d++){var f=o[d];if(f)nn()(h).call(h,f)>=0&&c.push(f)}return c.length>0?c[0]:void 0},e}(),Bl=Dl,Nl=An.Z.GAMEPLAY_DEFAULT,Ml=Nl.KEY,Gl=Nl.FRAME,Fl=267,Zl=48,Ul=[.2,.4,.6,.8],Hl=function(e){function t(t){var n;(n=e.call(this)||this).scene=void 0,n.gameplay=void 0,n.shuffler=void 0,n.deck=void 0,n.stock=void 0,n.piles=void 0,n.foundations=void 0,n.freeCells=void 0,n.hint=void 0,n.mover=void 0,n.boardState=void 0,n.messageText=void 0,n.score=void 0,n.time=void 0,n.timeToSaveBoardData=void 0,n.moves=void 0,n.updateScoreTimer=void 0,n.tournamentResultButton=void 0,n.autoCompleteBtn=void 0,n.canAutoComplete=void 0,n.isOnLastAutoMoveToFoundation=void 0,n.boundNumberOfCards=void 0,n.levelProgress=void 0,n.autoPlayBtn=void 0,n.autoPlayStepBtn=void 0,n.playWithFriendGameOverButton=void 0,n.challengeModeButton=void 0,n.challengeResultButton=void 0,n.notificationButton=void 0,n.playSeedButton=void 0,n.seedText=void 0,n.gameplay=t,n.scene=t.scene,n.shuffler=new Al,n.deck=new Tl((0,za.Z)(n)),n.stock=new pl((0,za.Z)(n)),n.piles=[],n.foundations=[],n.freeCells=[],n.levelProgress=0,n.messageText=new Ll(n.scene),n.score=0,n.time=0,n.moves=0,n.timeToSaveBoardData=0,n.boundNumberOfCards=n.getBoundNumberOfCards(),n.mover=new fl((0,za.Z)(n)),n.hint=new Wu((0,za.Z)(n));for(var i=0;i<yu.NUMBER_OF_PILE;i++){var a=new ku((0,za.Z)(n));a.setIdx(i),n.piles.push(a)}for(var r=0;r<yu.NUMBER_OF_TARGET;r++){var s=new _u((0,za.Z)(n),fu[r]);s.setIdx(r),n.foundations.push(s)}for(var o=0;o<yu.NUMBER_OF_FREECELL;o++){var c=new Cl((0,za.Z)(n));c.setIdx(o),n.freeCells.push(c)}return n.alignBoard(),n.canAutoComplete=!1,n.isOnLastAutoMoveToFoundation=!1,n.boardState=Ou.NONE,n.listenEvents(),n.createAutoWinButton(),GameCore.Utils.Valid.isDebugger()&&n.createDevBtn(),n.scene.screen.events.on(GameCore.Screens.Events.OPEN,(function(){n.boardState===Ou.PLAYING&&(n.boardState=Ou.IDLE)})),n.deck.init(),n}(0,p.Z)(t,e);var n=t.prototype;return n.getLevelProgress=function(){return this.levelProgress},n.resetLevelProgress=function(){this.levelProgress=0},n.updateLevelProgress=function(e){var t=this;void 0===e&&(e=!0);var n=this.getNumberOfCardsInFoundation(),i=n/52;i>this.levelProgress&&(this.levelProgress=i,e&&Ul.forEach((function(e){Math.ceil(52*e)===n&&t.logProgressLevel(e)})))},n.getNumberOfCardsInFoundation=function(){var e=0;return this.foundations.forEach((function(t){return e+=t.cards.length})),e},n.logProgressLevel=function(e){var t=this.getScore(),n=this.getTime(),i=this.getMoves(),a=this.gameplay.getSeed(),r=Math.floor(n/1e3),s=this.scene.gameStats.getNormalStat(),o=s.totalGame,c=s.wins,u=this.scene.levelLoader.getLevelByWins(c),l=this.scene.player.getPlayerSettings(),h={value:e,total_game:o,difficulty:u,level:c,score:t,moves:i,time_played:r,seed:a,auto_move_foundation_option:l.autoMoveToFoundation,highlight_low_cards_option:l.highlightLowCards};this.scene.analytics.event(bn._.LEVEL_PROGRESS,h)},n.createAutoWinButton=function(){var e=this,t=Fl,n=Zl,i=new El.Z(this.scene,t,n);i.setName("AutoComplete");var a=new kl(this.scene,{key:"auto-complete-button",radius:10,border:16,width:t,height:n,alpha:.24}),r="border-auto-complete-button";if(!this.scene.textures.exists(r)){var s=this.scene.make.renderTexture({width:2*(t+1),height:2*(n+1)},!1),o=new Ol.Z(this.scene,0,0,2*t,2*n,32).setOrigin(0,0);o.setStrokeStyle(2,16777215),s.draw(o,1,1),s.saveTexture(r)}var c=this.scene.add.image(0,0,r);c.setDisplaySize(t,n);var u=this.scene.time.addEvent({delay:50,repeat:-1,callback:function(){e.boardState===Ou.AUTO_COMPLETING?(e.hint.autoPlayStep(),e.scene.vibration.performVibrating(40)):u.paused=!0},paused:!0});i.onClick=function(){i.kill(),e.mover.disableInput(),e.boardState=Ou.AUTO_COMPLETING,e.gameplay.scene.footer.hintBtn.setDisabled(!0),e.gameplay.scene.footer.playBtn.setDisabled(!0),e.scene.audio.playSound(er.Z.AUTO_COMPLETE),e.removeAllCardsGlow(),e.scene.time.delayedCall(100,(function(){e.autoComplete()}))};var l=this.scene.make.bitmapText({font:Fo.Z.PRIMARY.KEY,size:this.scene.fontSize(16),text:"autoComplete",origin:{x:.5,y:.5}});i.add([a,c,l]),Phaser.Display.Align.To.TopCenter(i,this.scene.footer,0,24),new yc.Z({targets:[i],duration:500,props:{scale:"*=0.98"}}).play(),i.kill(),this.autoCompleteBtn=i,this.scene.game.events.on("footer-updated",(function(){Phaser.Display.Align.To.TopCenter(i,e.scene.footer,0,24)}))},n.increaseScore=function(e){var t=this;this.score+=e,this.updateScoreTimer&&!this.updateScoreTimer.hasDispatched||(this.updateScoreTimer=this.scene.time.delayedCall(500,(function(){t.scene.storage.dispatch(eo({score:t.score,time:t.time,moves:t.moves}))})))},n.decreaseScore=function(e){this.score=Math.max(0,this.score-e)},n.increaseMovesAndSaveBoard=function(){this.hint.resetAutoHintTime(),this.moves+=1,this.gameplay.saveSystem.saveCurrentBoardData(),this.timeToSaveBoardData=0},n.getScore=function(){return this.score},n.getTime=function(){return Math.round(this.time)},n.getMoves=function(){return this.moves},n.listenEvents=function(){var e=this;this.scene.events.on("settings-changed",(function(t){if(t===Ia.Z.autoMoveToFoundation){if(!(e.isPlaying()||e.isOnAutoMoveToFoundation()||e.isIdle()))return;e.scene.player.getPlayerSettings().autoMoveToFoundation?e.canAutoComplete&&(e.canAutoComplete=!1,e.autoCompleteBtn.kill()):(e.isOnAutoMoveToFoundation()&&(e.boardState=Ou.IDLE),e.checkAutoCompleted())}t===Ia.Z.highlightLowCards&&(e.scene.player.getPlayerSettings().highlightLowCards?e.updateEligibleFoundationCards(!1):e.removeAllCardsGlow())}))},n.alignBoard=function(e){void 0===e&&(e=!1);var t=gu(),n=this.scene.world.getWorldSize(),i=(n.width,n.height),a=this.scene.ads.getBannerHeight(),r=this.scene.world.getWorldSize().width/2,s=yu.FOUNDATION_Y+30*t,o=this.getHorizontalPileSpace(),c=this.scene.world.isLandscape()?2:2.04,u=this.scene.world.isLandscape()?.985*o:o;this.placeCenter(this.foundations,r,s,-o,-c,-u),this.placeCenter(this.freeCells,r,s,o,-c,u);var l=i-a-120;this.placeCenter([this.stock],r,Math.min(s+400,l),o,3);var h=yu.SPACE_BETWEEN_PILE_AND_FOUNDATION,d=this.scene.world.isLandscape()?o:1.01*o;this.placeCenter(this.piles,r,s+h,d),e?this.deck.alignCurrentDeck():this.deck.align();var f=this.scene.footer.y;this.messageText.setPosition(r,f-70),this.boundNumberOfCards=this.getBoundNumberOfCards()},n.updatePlacementSize=function(){var e;L()(e=[]).call(e,this.piles,this.foundations,this.freeCells).forEach((function(e){return e.updateSlotSize()}))},n.getMaxHeightTableau=function(){var e=this.scene.footer,t=e.y,n=e.height,i=yu.FOUNDATION_Y,a=yu.CARD_HEIGHT;return t-i-(n/2+yu.SPACE_BETWEEN_PILE_AND_FOUNDATION+a/2+30)},n.getBoundNumberOfCards=function(){var e=this.getMaxHeightTableau(),t=yu.CARD_HEIGHT,n=yu.VERTICAL_PILE_SPACE;return Math.floor((e-t/2)/n)+1},n.getHorizontalPileSpace=function(){var e=this.scene.world.isLandscape()?1.2:1,t=(this.scene.gameZone.width-yu.CARD_WIDTH*yu.NUMBER_OF_PILE)/(yu.NUMBER_OF_PILE+1),n=Math.floor(t)+yu.CARD_WIDTH;return Math.min(n,yu.MAX_HORIZONTAL_PILE_SPACE*e)},n.placeCenter=function(e,t,n,i,a,r){void 0===a&&(a=0),void 0===r&&(r=0),r=r||i;for(var s=e.length,o=t-(s/2-.5-a)*i,c=0;c<s;c++)e[c].setPosition(o+c*r,n)},n.startGame=function(){var e=(0,i.Z)(r().mark((function e(t){var n,i,a,s,o,c,u,l,h,d,f,p;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isDealing()){e.next=2;break}return e.abrupt("return");case 2:return this.scene.game.events.emit("pause-resize"),this.scene.gameplay.tryCreateShortcut(),this.scene.gameplay.startGameCount+=1,this.updateSeedDebugText(this.gameplay.getCurrentLevel(),t),this.clearOldBoard(),this.resetLevelProgress(),this.scene.events.emit(no.GAME_START),n=this.scene.gameStats.getNormalStat(),i=n.totalGame,a=n.wins,s=this.scene.levelLoader.getLevelByWins(a),this.scene.analytics.event(bn._.LEVEL_START,{total_game:i,difficulty:s,level:a,seed:t}),this.boardState=Ou.DEALING,o=this.shuffler.shuffle(t),(c=this.deck.getDeck(o)).forEach((function(e){return e.revive()})),u=GameCore.Configs.Gameplay.SkipStartAnimation,l=u?50:300,e.next=20,xu(this.scene,l);case 20:this.scene.audio.playSound(er.Z.SHUFFLE),h=7,d=0;case 23:if(!(d<h)){e.next=39;break}f=0;case 25:if(!(f<yu.NUMBER_OF_PILE)){e.next=36;break}if(!(p=c.pop())){e.next=33;break}if(this.piles[f].addCardByDeal(p,!0,h),f%2==0&&this.scene.vibration.performVibrating(40),u){e.next=33;break}return e.next=33,xu(this.scene,yu.CARD_DEAL_TIME);case 33:f++,e.next=25;break;case 36:d++,e.next=23;break;case 39:if(u){e.next=42;break}return e.next=42,xu(this.scene,400);case 42:if(this.boardState=Ou.IDLE,this.updateAfterMove(),this.gameplay.scene.footer.hintBtn.setDisabled(!1),this.gameplay.saveSystem.saveCurrentBoardData(),u){e.next=49;break}return e.next=49,xu(this.scene,yu.CARD_MOVE_TIME);case 49:this.mover.enableInput(),this.scene.game.events.emit("resume-resize");case 51:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.continueGame=function(){var e=(0,i.Z)(r().mark((function e(t){var n,i,a,s,o,c,u,l,h,d,p,g,m,v,y,b,A,E,S,T,C,w=this;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.scene.analytics.event(bn._.LEVEL_CONTINUE),!this.isDealing()){e.next=3;break}return e.abrupt("return");case 3:if(this.scene.game.events.emit("pause-resize"),this.scene.gameplay.tryCreateShortcut(),this.scene.gameplay.startGameCount+=1,this.updateSeedDebugText(t.level,t.seed),this.clearOldBoard(),this.resetLevelProgress(),this.boardState=Ou.DEALING,i=t.piles,a=t.freeCells,s=t.foundations,o=t.score,c=t.time,u=t.moves,l=t.movesData,h=GameCore.Configs.Gameplay.SkipStartAnimation){e.next=15;break}return e.next=15,xu(this.scene,300);case 15:this.score=o,this.time=c,this.moves=u,d=Me()(i).call(i,(function(e){return w.deck.getCards(e)})),p=Me()(s).call(s,(function(e){return w.deck.getCards(e)})),g=Me()(a).call(a,(function(e){return w.deck.getCards(e)})),this.scene.audio.playSound(er.Z.SHUFFLE),m=0;case 23:if(!(m<g.length)){e.next=39;break}v=g[m],y=0;case 26:if(!(y<v.length)){e.next=36;break}if(this.freeCells[m].addCard(v[y],!0,h),v[y].setFacingWithFlippingAnim(!0),v[y].setInteractive(),h){e.next=33;break}return e.next=33,xu(this.scene,yu.CARD_DEAL_TIME);case 33:y++,e.next=26;break;case 36:m++,e.next=23;break;case 39:b=0;case 40:if(!(b<p.length)){e.next=49;break}for(A=p[b],E=0;E<A.length;E++)this.foundations[b].addCard(A[E],!0,h),A[E].setFacingWithFlippingAnim(!0),A[E].setInteractive();if(h){e.next=46;break}return e.next=46,xu(this.scene,yu.CARD_DEAL_TIME);case 46:b++,e.next=40;break;case 49:S=0;case 50:if(!(S<d.length)){e.next=64;break}T=d[S],C=0;case 53:if(!(C<T.length)){e.next=61;break}if(this.piles[S].addCardByDeal(T[C],!0,T.length),h){e.next=58;break}return e.next=58,xu(this.scene,yu.CARD_DEAL_TIME);case 58:C++,e.next=53;break;case 61:S++,e.next=50;break;case 64:if(this.updateLevelProgress(!1),h){e.next=68;break}return e.next=68,xu(this.scene,400);case 68:if(this.mover.undos=L()(n=[]).call(n,Me()(l).call(l,(function(e){return(0,f.Z)({},e)}))),this.boardState=Ou.IDLE,this.gameplay.scene.footer.hintBtn.setDisabled(!1),this.updateAfterMove(),h){e.next=75;break}return e.next=75,xu(this.scene,yu.CARD_MOVE_TIME);case 75:this.mover.enableInput(),this.scene.game.events.emit("resume-resize");case 77:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.checkAutoCompleted=function(){this.scene.player.getPlayerSettings().autoMoveToFoundation||this.isAutoCompleting()||(this.canAutoComplete=!1,this.autoCompleteBtn.kill(),this.isCanSmartAutoComplete()?(this.canAutoComplete=!0,this.autoCompleteBtn.revive()):(this.canAutoComplete=!1,this.autoCompleteBtn.kill()))},n.isCanSmartAutoComplete=function(e){return new Bl(this.piles,this.freeCells,this.foundations).isCanSmartAutoComplete(e)},n.isTableauSorted=function(){for(var e=0;e<this.piles.length;e++)if(!this.piles[e].isSorted())return!1;return!0},n.autoMoveCardToFoundation=function(){var e=this;if(!this.scene.player.getPlayerSettings().autoMoveToFoundation)return!1;var t=this.hint.findMovable();if(0===t.length)return!1;for(var n=!1,i=this.isCanSmartAutoComplete(),a=0;a<t.length;a++){var r=t[a],s=this.hint.getAvailableDestinations(r)[0];if(s instanceof _u){if(!this.isCardValidToAutoMoveToFoundation(r)&&!i)continue;n=!0,this.mover.moveCardToFoundation(r,s);break}}if(!n&&i){var o=this.getUnsortedCard();if(o){var c=this.hint.getAvailableDestinations(o),u=Be()(c).call(c,(function(e){return e.isEmpty()})),l=u[0];l&&(n=!0,this.mover.moveCardToPlacement(o,l))}}if(n){this.boardState=Ou.AUTO_MOVE_TO_FOUNDATION,!this.isOnLastAutoMoveToFoundation&&i&&(this.isOnLastAutoMoveToFoundation=!0,this.scene.audio.playSound(er.Z.AUTO_COMPLETE),this.removeAllCardsGlow());var h=this.isOnLastAutoMoveToFoundation?50:100;return this.scene.time.delayedCall(h,(function(){e.updateAfterMove()})),!0}return!1},n.autoComplete=function(){var e=this;if(this.isGameWon())this.handleGameWon();else{this.updateLevelProgress(),this.updateEligibleFoundationCards(),this.updateAllCardLightOn();var t=this.hint.findMovable();if(0===t.length)return!1;for(var n=!1,i=0;i<t.length;i++){var a=t[i],r=this.hint.getAvailableDestinations(a)[0];if(r instanceof _u){n=!0,this.mover.moveCardToFoundation(a,r);break}}if(!n){var s=this.getUnsortedCard();if(s){var o=this.hint.getAvailableDestinations(s),c=Be()(o).call(o,(function(e){return e.isEmpty()})),u=c[0];u&&this.mover.moveCardToPlacement(s,u)}}this.scene.time.delayedCall(50,(function(){e.autoComplete()}))}},n.getUnsortedCard=function(){var e,t=Be()(e=this.piles).call(e,(function(e){return!e.isSorted()}));if(0!==t.length){var n=t[0];return n.cards[n.cards.length-1]}},n.isCardValidToAutoMoveToFoundation=function(e){var t=e.getCardValue(),n=e.getCardSuit();if(1===t||2===t)return!0;var i=0;return this.foundations.forEach((function(e){e.cards.forEach((function(e){var a=e.getCardValue(),r=e.getCardSuit();a===t-1&&r!==n&&(i+=1)}))})),2===i},n.updateAfterMove=function(){if(this.updateLevelProgress(),this.updateEligibleFoundationCards(),this.updateAllCardLightOn(),this.isGameWon())this.handleGameWon();else{if(this.isIdle())return this.checkAutoCompleted(),void this.checkGameLose();if(this.isPlaying()||this.isOnAutoMoveToFoundation())if(this.scene.player.getPlayerSettings().autoMoveToFoundation)this.autoMoveCardToFoundation()||(this.boardState=Ou.PLAYING,this.checkGameLose());else this.checkAutoCompleted(),this.checkGameLose()}},n.checkGameLose=function(){var e=this;this.isGameLose()&&(this.boardState=Ou.OUT_OF_MOVE,this.scene.time.delayedCall(1e3,(function(){e.outOfMove()})))},n.isGameLose=function(){var e,t=L()(e=[]).call(e,this.freeCells,this.piles),n=0;return t.forEach((function(e){n+=e.cards.length})),n>0&&!this.hint.canHint()},n.isGameWon=function(){var e;return!M()(e=this.foundations).call(e,(function(e){return!e.isFull()}))},n.outOfMove=function(){this.mover.donePick(),this.boardState=Ou.GAME_OVER,this.gameplay.handleGameOver(!1),this.gameplay.saveSystem.clearLastGame()},n.clearOldBoard=function(){this.boardState=Ou.NONE,this.canAutoComplete=!1,this.isOnLastAutoMoveToFoundation=!1,this.moves=0,this.time=0,this.score=0,this.mover.disableInput(),this.gameplay.scene.footer.hintBtn.setDisabled(!0),this.gameplay.boardGame.autoCompleteBtn.kill(),this.piles.forEach((function(e){return e.clear()})),this.foundations.forEach((function(e){return e.clear()})),this.freeCells.forEach((function(e){return e.clear()})),this.stock.clear(),this.mover.clear(),this.hint.clear(),this.deck.reset(),this.deck.cards.forEach((function(e){e.setEligibleFoundation(!1),e.setLightOn(!0)}))},n.handleGameWon=function(){this.autoCompleteBtn.kill(),this.gameplay.scene.footer.hintBtn.setDisabled(!0),this.increaseScore(Math.round(1e6/this.time*1e3)),this.scene.audio.playSound(er.Z.WON),this.gameplay.saveSystem.clearLastGame(),this.boardState=Ou.GAME_OVER,this.gameplay.handleGameOver(!0)},n.update=function(e){(this.isPlaying()||this.isAutoCompleting()||this.isOnAutoMoveToFoundation())&&(this.time+=e),this.isPlaying()&&(this.timeToSaveBoardData+=e,this.timeToSaveBoardData>5e3&&(this.gameplay.saveSystem.saveCurrentBoardData(),this.timeToSaveBoardData=0)),this.stock.update(e),this.mover.update(),this.hint.update(e),this.mover.isPicked()&&this.hint.resetAutoHintTime(),this.isOnAutoMoveToFoundation()||this.isOutOfMove()?(this.scene.footer.undoBtn.setDisabled(!0,!1),this.scene.footer.playBtn.setDisabled(!0,!1)):(this.scene.footer.undoBtn.setDisabled(0==this.mover.undos.length||this.isAutoCompleting()),this.scene.footer.playBtn.setDisabled(this.isDealing()||this.isAutoCompleting()))},n.isDealing=function(){return this.boardState==Ou.DEALING},n.isPlaying=function(){return this.boardState==Ou.PLAYING},n.isAutoCompleting=function(){return this.boardState==Ou.AUTO_COMPLETING},n.isOnAutoMoveToFoundation=function(){return this.boardState==Ou.AUTO_MOVE_TO_FOUNDATION},n.isIdle=function(){return this.boardState==Ou.IDLE},n.isOutOfMove=function(){return this.boardState==Ou.OUT_OF_MOVE},n.isGameOver=function(){return this.boardState==Ou.GAME_OVER},n.isNone=function(){return this.boardState==Ou.NONE},n.createDevBtn=function(){if(GameCore.Utils.Valid.isDebugger()){this.createAutoPlay(),this.createAutoStepPlay(),this.createPlayWithFriendGameOver(),this.createChallengeMode(),this.createTournamentResultButton(),this.createChallengeResultButton(),this.createNotifyScreenButton(),this.createSeedText(),this.createOpenDevToolButton();var e=this.scene.add.zone(0,0,40,40);Phaser.Display.Align.In.BottomLeft(e,this.scene.gameZone,0,-40);var t=this.scene.ads.getBannerHeight(),n=this.scene.world.getWorldSize(),i=n.width,a=n.height;Phaser.Actions.GridAlign([this.autoPlayBtn,this.autoPlayStepBtn,this.playWithFriendGameOverButton,this.challengeModeButton,this.tournamentResultButton,this.challengeResultButton,this.notificationButton,this.playSeedButton],{width:i>375?1:10,height:i>375?10:1,cellWidth:40,cellHeight:-40,x:20,y:a-120-t-40})}},n.createSeedText=function(){var e=this.scene.ads.getBannerHeight();this.seedText=this.scene.add.bitmapText(0,0,Fo.Z.PRIMARY.KEY,"#0",this.scene.fontSize(15)),Phaser.Display.Align.In.BottomLeft(this.seedText,this.scene.gameZone,-10,-80-e)},n.updateSeedDebugText=function(e,t){if(GameCore.Utils.Valid.isDebugger()&&this.seedText){var n=t.length>15?w()(t).call(t,0,15)+"...":t;this.seedText.setText("level: "+e+", #"+n)}},n.createAutoPlay=function(){var e,t=this;this.autoPlayBtn=new El.Z(this.scene,40,40);var n=this.scene.add.image(0,0,Ml,Gl.IC_BG_OFF);n.setWorldSize(40,40);var i=this.scene.make.bitmapText({font:Fo.Z.PRIMARY.KEY,size:this.scene.fontSize(10),text:"Auto\nPlay",origin:{x:.5,y:.5}});i.setCenterAlign(),null==(e=this.autoPlayBtn)||e.add([n,i]);var a=this.scene.time.addEvent({delay:50,repeat:-1,callback:function(){if(t.isIdle()&&(t.boardState=Ou.PLAYING),t.scene.player.getPlayerSettings().autoMoveToFoundation){if(!t.isPlaying()&&!t.isOnAutoMoveToFoundation())return a.paused=!0,void i.setText("Auto\nPlay");t.isPlaying()&&t.hint.autoPlayStep()}else{if(!t.isPlaying()||t.canAutoComplete)return a.paused=!0,void i.setText("Auto\nPlay");t.hint.autoPlayStep()}},paused:!0});this.autoPlayBtn.onClick=function(){a.paused?(i.setText("Stop"),a.paused=!1):(i.setText("Auto\nPlay"),a.paused=!0)}},n.createAutoStepPlay=function(){var e,t=this;this.autoPlayStepBtn=new El.Z(this.scene,40,40);var n=this.scene.add.image(0,0,Ml,Gl.IC_BG_OFF);n.setWorldSize(40,40);var i=this.scene.make.bitmapText({font:Fo.Z.PRIMARY.KEY,size:this.scene.fontSize(10),text:"Step",origin:{x:.5,y:.5}});i.setCenterAlign(),null==(e=this.autoPlayStepBtn)||e.add([n,i]),this.autoPlayStepBtn.onClick=function(){t.isIdle()&&(t.boardState=Ou.PLAYING),t.isPlaying()&&t.hint.autoPlayStep()}},n.createPlayWithFriendGameOver=function(){var e,t=this;this.playWithFriendGameOverButton=new El.Z(this.scene,40,40);var n=this.scene.add.image(0,0,Ml,Gl.IC_BG_OFF);n.setWorldSize(40,40);var i=this.scene.make.bitmapText({font:Fo.Z.PRIMARY.KEY,size:this.scene.fontSize(10),text:"Over",origin:{x:.5,y:.5}});i.setCenterAlign(),null==(e=this.playWithFriendGameOverButton)||e.add([n,i]),this.playWithFriendGameOverButton.onClick=function(){t.outOfMove()}},n.createChallengeMode=function(){var e,t=this;this.challengeModeButton=new El.Z(this.scene,40,40);var n=this.scene.add.image(0,0,Ml,Gl.IC_BG_OFF);n.setWorldSize(40,40);var a=this.scene.make.bitmapText({font:Fo.Z.PRIMARY.KEY,size:this.scene.fontSize(10),text:"CHL",origin:{x:.5,y:.5}});a.setCenterAlign(),null==(e=this.challengeModeButton)||e.add([n,a]),this.challengeModeButton.onClick=(0,i.Z)(r().mark((function e(){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.scene.handlePlayWithFriend();case 1:case"end":return e.stop()}}),e)})))},n.createTournamentResultButton=function(){var e,t=this;this.tournamentResultButton=new El.Z(this.scene,40,40);var n=this.scene.add.image(0,0,Ml,Gl.IC_BG_OFF);n.setWorldSize(40,40);var a=this.scene.make.bitmapText({font:Fo.Z.PRIMARY.KEY,size:this.scene.fontSize(10),text:"ToRe",origin:{x:.5,y:.5}});a.setCenterAlign(),null==(e=this.tournamentResultButton)||e.add([n,a]),this.tournamentResultButton.onClick=(0,i.Z)(r().mark((function e(){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.scene.screen.open($a.o4.TOURNAMENTS_RESULT_SCREEN);case 1:case"end":return e.stop()}}),e)})))},n.createChallengeResultButton=function(){var e=this;this.challengeResultButton=new El.Z(this.scene,40,40);var t=this.scene.add.image(0,0,Ml,Gl.IC_BG_OFF);t.setWorldSize(40,40);var n=this.scene.make.bitmapText({font:Fo.Z.PRIMARY.KEY,size:this.scene.fontSize(10),text:"CHRe",origin:{x:.5,y:.5}});n.setCenterAlign(),this.challengeResultButton.add([t,n]),this.challengeResultButton.onClick=(0,i.Z)(r().mark((function t(){return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.scene.screen.open($a.o4.PLAY_WITH_FRIEND_GAME_OVER_SCREEN);case 1:case"end":return t.stop()}}),t)})))},n.createNotifyScreenButton=function(){this.notificationButton=new El.Z(this.scene,40,40);var e=this.scene.add.image(0,0,Ml,Gl.IC_BG_OFF);e.setWorldSize(40,40);var t=this.scene.make.bitmapText({font:Fo.Z.PRIMARY.KEY,size:this.scene.fontSize(10),text:"NTF",origin:{x:.5,y:.5}});t.setCenterAlign(),this.notificationButton.add([e,t]),this.notificationButton.onClick=(0,i.Z)(r().mark((function e(){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case 1:case"end":return e.stop()}}),e)})))},n.createOpenDevToolButton=function(){var e=this;this.playSeedButton=new El.Z(this.scene,40,40);var t=this.scene.add.image(0,0,Ml,Gl.IC_BG_OFF);t.setWorldSize(40,40);var n=this.scene.make.bitmapText({font:Fo.Z.PRIMARY.KEY,size:this.scene.fontSize(10),text:"SEED",origin:{x:.5,y:.5}});n.setCenterAlign(),this.playSeedButton.add([t,n]),this.playSeedButton.onClick=function(){e.scene.seedPanel.setData({seed:e.gameplay.getSeed()})}},n.getVerticalSpacePile=function(){return yu.VERTICAL_PILE_SPACE},n.getMaxCardCanMoveToEmptyPile=function(){return Math.floor(this.getMaxCardCanMoveToNonEmptyPile()/2)},n.getMaxCardCanMoveToNonEmptyPile=function(){var e=this.getNumberOfEmptyFreeCell(),t=this.getNumberOfEmptyPile();return Math.pow(2,t)*(e+1)},n.getNumberOfEmptyFreeCell=function(){var e,t=Be()(e=this.freeCells).call(e,(function(e){return e.isEmpty()})).length;return this.isPickedCardCreateNewEmptyFreeCell()&&(t-=1),t>=0?t:0},n.getNumberOfEmptyPile=function(){var e,t=Be()(e=this.piles).call(e,(function(e){return e.isEmpty()})).length;return this.isPickedCardCreateNewEmptyPile()&&(t-=1),t>=0?t:0},n.isPickedCardCreateNewEmptyPile=function(){if(this.mover.isPicked()){var e=this.mover.getPicked()[0].placement;return e instanceof ku&&e.isEmpty()}return!1},n.isPickedCardCreateNewEmptyFreeCell=function(){if(this.mover.isPicked()){var e=this.mover.getPicked()[0].placement;return e instanceof Cl&&e.isEmpty()}return!1},n.updateAllCardLightOn=function(){var e=(0,i.Z)(r().mark((function e(){var t,n,i,a=this;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(GameCore.Configs.Gameplay.SkipStartAnimation){e.next=4;break}return e.next=4,xu(this.scene,yu.CARD_MOVE_TIME);case 4:t=!1,this.freeCells.forEach((function(e){e.cards.forEach((function(e){e.setLightOn(!0)}))})),this.foundations.forEach((function(e){e.cards.forEach((function(e){e.setLightOn(!0)}))})),n=this.mover.getPickedPlacement(),i=this.mover.isPicked(),this.piles.forEach((function(e){i&&e==n||(t=!1,e.cards.forEach((function(e,n){var i=t;i||(i=a.hint.isCardValidToMove(e)&&a.isCardCanMoveToNonEmptyPile(e,n),t=i),e.setLightOn(i)})))}));case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.updateEligibleFoundationCards=function(){var e=(0,i.Z)(r().mark((function e(t){var n,i,a,s,o,c,u;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===t&&(t=!0),i=GameCore.Configs.Gameplay.SkipStartAnimation,!t){e.next=6;break}if(i){e.next=6;break}return e.next=6,xu(this.scene,yu.CARD_MOVE_TIME);case 6:if(a=this.scene.player.getPlayerSettings(),a.highlightLowCards){e.next=9;break}return e.abrupt("return");case 9:if(!this.isOnAutoMoveToFoundation()||!this.isOnLastAutoMoveToFoundation){e.next=11;break}return e.abrupt("return");case 11:if(!this.isAutoCompleting()){e.next=13;break}return e.abrupt("return");case 13:s=Me()(n=this.foundations).call(n,(function(e){return e.cards[e.cards.length-1]})),o=Me()(s).call(s,(function(e,t){return e?e.getTag()+1:100*fu[t]+1})),this.freeCells.forEach((function(e){e.cards.forEach((function(e){var t=xe()(o).call(o,e.getTag());e.setEligibleFoundation(t)}))})),this.foundations.forEach((function(e){e.cards.forEach((function(e){e.setEligibleFoundation(!1)}))})),c=this.mover.getPickedPlacement(),u=this.mover.isPicked(),this.piles.forEach((function(e){u&&e==c||e.cards.forEach((function(e){var t=xe()(o).call(o,e.getTag());e.setEligibleFoundation(t)}))}));case 20:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.isCardCanMoveToNonEmptyPile=function(e,t){return e.placement.cards.length-t<=this.getMaxCardCanMoveToNonEmptyPile()},n.isStandardSeedValid=function(e){return this.shuffler.isStandardSeedValid(e)},n.removeAllCardsGlow=function(){var e;L()(e=[]).call(e,this.freeCells,this.piles,this.foundations).forEach((function(e){e.cards.forEach((function(e){e.setEligibleFoundation(!1)}))}))},t}(Phaser.Events.EventEmitter),Wl=Hl,zl=function(){function e(e){var t=this;this.gameplay=void 0,this.saveCurrentBoardToProfile=(0,ra.D)((function(e){t.gameplay.scene.player.setCustomData("current_board",{boardData:e})}),2e3),this.gameplay=e}var t=e.prototype;return t.saveCurrentBoardData=function(){var e,t,n,i,a=this,r=this.gameplay.boardGame;if(!r.mover.isPicked()){var s={seed:this.gameplay.getSeed(),freeCells:Me()(e=r.freeCells).call(e,(function(e){var t;return Me()(t=e.cards).call(t,(function(e){return a.cardTagToIdx(e.getTag())}))})),piles:Me()(t=r.piles).call(t,(function(e){var t;return Me()(t=e.cards).call(t,(function(e){return a.cardTagToIdx(e.getTag())}))})),foundations:Me()(n=r.foundations).call(n,(function(e){var t;return Me()(t=e.cards).call(t,(function(e){return a.cardTagToIdx(e.getTag())}))})),score:r.getScore(),time:r.getTime(),moves:r.getMoves(),movesData:Me()(i=r.mover.undos).call(i,(function(e){return(0,f.Z)({},e)})),level:this.gameplay.getCurrentLevel(),updatedAt:(new Date).getTime()};Ss("current_board",{boardData:s}),this.saveCurrentBoardToProfile(s)}},t.clearLastGame=function(){!function(e){try{return localStorage.removeItem(e),!0}catch(t){return!1}}("current_board"),this.gameplay.scene.player.setCustomData("current_board",{}),this.saveCurrentBoardToProfile()},t.getLastGameData=function(){var e=window.game.player.getCustomData("current_board");if(e){var t=e.boardData;if(this.isBoardDataValid(t))return Phaser.Utils.Objects.DeepCopy(t)}},t.isBoardDataValid=function(e){var t,n=GameCore.Utils.Valid;if(!n.isObject(e))return!1;var i=e.freeCells,a=e.piles,r=e.foundations,s=e.movesData,o=e.score,c=e.time,u=e.moves,l=e.seed;if(!n.isNumber(o))return!1;if(!n.isNumber(c))return!1;if(!n.isNumber(u))return!1;if(!n.isString(l))return!1;var h=void 0!==a,d=void 0!==i,f=void 0!==r,p=void 0!==s,g=void 0!==l,m=0;return L()(t=[]).call(t,i,a,r).forEach((function(e){return m+=e.length})),!!(h&&d&&f&&p&&g&&52==m)},t.cardTagToIdx=function(e){var t=e%100,n=(e-t)/100;return 13*(1==n?3:n-2)+t-1},e}(),Yl=zl,Vl=n(419),Kl=new(n.n(Vl)()),jl={REQUEST_SWITCH_GAME:"request-switch-game",SCENE_CREATED:"scene-created"},Xl=function(e){function t(t){var n;return(n=e.call(this)||this).scene=void 0,n.boardGame=void 0,n.level=void 0,n.seed=void 0,n.saveSystem=void 0,n.confettiSmallFallDown=void 0,n.cardsLayer=void 0,n.startGameCount=void 0,n.finishGame=(0,i.Z)(r().mark((function e(){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.boardGame.isGameOver()){e.next=2;break}return e.abrupt("return");case 2:return n.saveSystem.clearLastGame(),e.next=5,n.handleShowInterstitialAd();case 5:case"end":return e.stop()}}),e)}))),n.scene=t,n.startGameCount=0,n.cardsLayer=t.add.layer(),n.cardsLayer.setDepth(yu.DEPTH.CARD),n.boardGame=new Wl((0,za.Z)(n)),n.saveSystem=new Yl((0,za.Z)(n)),n.createConfetti(),n}(0,p.Z)(t,e);var n=t.prototype;return n.getSeed=function(){return this.seed},n.startNewGame=function(){var e=(0,i.Z)(r().mark((function e(){var t,n,i=this;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.saveSystem.clearLastGame(),Kl.emit(jl.REQUEST_SWITCH_GAME),this.scene.levelLoader.isLevelLoaded()){e.next=5;break}return this.scene.time.delayedCall(500,(function(){return i.startNewGame()})),e.abrupt("return");case 5:if(!this.boardGame.isDealing()){e.next=7;break}return e.abrupt("return");case 7:t=this.scene.levelLoader.randomLevel(),n=this.scene.levelLoader.randomSeed(t),this.level=t,this.seed=n,this.boardGame.startGame(n),this.scene.checkNewUser();case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.checkGameplayBeforeStartNewGame=function(){if(!this.boardGame.isGameWon()&&this.boardGame.getMoves()>0){this.scene.gameStats.addLose();var e=this.scene.gameStats.getNormalStat(),t=e.totalGame,n=e.wins;this.scene.analytics.event(bn._.LEVEL_GIVE_UP,{total_game:t,wins:n,score:this.boardGame.getScore(),moves:this.boardGame.getMoves(),time_played:Math.floor(this.boardGame.getTime()/1e3)})}},n.getCurrentLevel=function(){return this.level},n.getCurrentSeed=function(){return this.seed},n.startGameWith=function(e){this.seed=e,this.boardGame.startGame(e)},n.replayGame=function(){this.boardGame.boardState!==Ou.DEALING&&(this.seed?this.boardGame.startGame(this.seed):this.startNewGame())},n.getGameOverScreenKey=function(e){return so.instance.isChallengeMode()?$a.o4.PLAY_WITH_FRIEND_GAME_OVER_SCREEN:so.instance.isTournamentMode()?$a.o4.TOURNAMENTS_RESULT_SCREEN:e?$a.o4.VICTORY_SCREEN:$a.o4.NO_MORE_MOVES_SCREEN},n.handleGameOver=function(){var e=(0,i.Z)(r().mark((function e(t){var n,a,s,o,c,u,l,d,f,p,g,m,v,y,b,A,E,S,T,C,w,I,x,P,k,_,O;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.showWellDoneScreen(t);case 2:if(a=this.boardGame.getScore(),s=this.boardGame.getTime(),o=this.boardGame.getMoves(),c=this.getSeed(),u=this.boardGame.mover.undoClicked>0,null==(n=this.boardGame.updateScoreTimer)||n.remove(),l=Math.floor(s/1e3),d=this.scene.storage.getState(),f=hs(d),p=this.scene.gameStats.getNormalStat(),g=p.totalGame,m=p.wins,v=this.scene.levelLoader.getLevelByWins(m),t?this.scene.gameStats.addWin({score:a,winningMoves:o,winningTime:s,usedUndo:u}):this.scene.gameStats.addLose(),!f){e.next=19;break}return e.next=17,Is(f);case 17:y=e.sent,this.scene.storage.dispatch(Xs(y));case 19:return this.scene.storage.dispatch(eo({level:m,score:a,time:s,moves:o,total_game:g,difficulty:v,seed:c,time_played:l,success:t})),e.next=22,this.scene.storage.dispatch(function(){var e=(0,i.Z)(r().mark((function e(t,n){var i,a,s,o,c,u,l,d,f,p,g,m,v,y,b,A,E,S;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,i=window.game,a=i.analytics,i.facebook,s=n(),o=as(s),c=As(s),u=c.score,l=void 0===u?0:u,d=c.level,f=void 0===d?0:d,p=c.time,g=void 0===p?0:p,m=c.moves,v=void 0===m?0:m,y=c.total_game,b=c.difficulty,A=c.seed,E=c.time_played,S=c.success,t(vo(l)),e.next=9,t(Ao(o,{score:l,level:f,time:g,moves:v}));case 9:s=n(),a.event(bn._.MATCH_END,{game_mode:GameCore.Utils.String.toUpperCamelCase(o),total_game:y,difficulty:b,level:f,level_name:"level_"+f,score:l,moves:v,time_played:E,success:S,seed:A}),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),(0,h.tO)(e.t0);case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t,n){return e.apply(this,arguments)}}());case 22:b=this.scene.gameStats.getNormalStat(),A=b.bestScore,E=b.bestWinningTime,S=b.bestWinningMoves,T=this.getGameOverScreenKey(t),this.scene.screen.open(T,{score:a,bestScore:A,winningMoves:o,bestWinningMoves:S,winningTime:s,bestWinningTime:E}),C=this.scene.player.getPlayerSettings(),w=C.modifiedOptions,I=C.autoMoveToFoundation,x=C.highlightLowCards,P=xe()(w).call(w,Ia.Z.autoMoveToFoundation),k=xe()(w).call(w,Ia.Z.highlightLowCards),_=P?""+I:"default",O=k?""+x:"default",this.scene.analytics.event(bn._.LEVEL_END,{total_game:g,difficulty:v,level:m,score:a,moves:o,time_played:l,success:t,seed:c,auto_move_foundation_option:_,highlight_low_cards_option:O});case 31:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.showWellDoneScreen=function(){var e=(0,i.Z)(r().mark((function e(t){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.scene.screen.open($a.o4.WELL_DONE_SCREEN,{wellDone:t}),e.next=3,xu(this.scene,2e3);case 3:return this.scene.screen.close($a.o4.WELL_DONE_SCREEN),e.next=6,xu(this.scene,300);case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.startGame=function(){if(so.instance.isChallengeMode()){var e=this.scene.storage.getState(),t=this.scene.player.getPlayerId();if(!gs(e,{playerId:t})){var n=window.FBInstant.getEntryPointData();if(n){var i=n.seed;if(void 0!=i)return void this.startGameWith(i)}}}if(so.instance.isTournamentMode()){var a=this.scene.levelLoader.getRandomBeginnerSeed();this.startGameWith(a)}else{var r=this.saveSystem.getLastGameData();r?(this.seed=r.seed,this.level=r.level,this.boardGame.continueGame(r)):this.startNewGame()}},n.tryCreateShortcut=function(){this.startGameCount>=1&&this.scene.game.facebook.attemptToAddShortcut()},n.startGameWithSeed=function(e){this.boardGame.boardState!==Ou.DEALING&&(this.seed=e,this.boardGame.startGame(e))},n.update=function(e){this.boardGame.update(e)},n.handleShowInterstitialAd=function(){var e=(0,i.Z)(r().mark((function e(){var t,n;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.scene,n=t.game.globalScene,!t.ads.canbeShowInterstitialAd()){e.next=19;break}return t.ads.setAdInProcess(!0),t.audio.pauseAllSounds(),t.audio.pauseMusic(),t.audio.muteAll(),n.screen.open($a.o4.NOTIFY_SCREEN,{message:"loading",loading:!0}),e.prev=8,e.next=11,t.ads.showInterstitialAdAsync();case 11:e.next=15;break;case 13:e.prev=13,e.t0=e.catch(8);case 15:n.screen.close($a.o4.NOTIFY_SCREEN),t.ads.setAdInProcess(!1),GameSDK.isAudioEnabled()&&(t.audio.unmuteAll(),t.audio.resumeAllSounds(),t.audio.playMusic()),t.ads.preloadInterstitialAdAsync().catch((function(){}));case 19:case"end":return e.stop()}}),e,this,[[8,13]])})));return function(){return e.apply(this,arguments)}}(),n.createConfetti=function(){var e,t,n=this.scene.gameZone.width,i=new Phaser.Geom.Rectangle(n/2-187.5,-100,375,50),a=Me()(e=Ht()(t=Array(40)).call(t,0)).call(e,(function(e,t){var n;return"confetti/papers/"+nu()(n=GameCore.Utils.Number).call(n,t,4,"0")}));this.confettiSmallFallDown=new tr.Z(this.scene,{rotate:{start:-720,end:0},lifespan:{min:1500,max:2e3},emitZone:{source:i,type:"random"},particleBringToTop:!0,frame:a,tint:void 0}),this.confettiSmallFallDown.setDepth(mn.Z.ON_TOP)},t}(Phaser.Events.EventEmitter),Jl=Xl,ql={FOOTER:12,TITLE:24,TAB_SELECTOR_LABEL:14,TOURNAMENT_BLOCK:{TITLE:20,JOIN_LABEL:16,LOW_TO_WIN:12}},Ql=An.Z.GAMEPLAY_DEFAULT,$l=Ql.KEY,eh=Ql.FRAME,th=-10,nh=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n.settingsBtn=void 0,n.themeBtn=void 0,n.gameStatsButton=void 0,n.playBtn=void 0,n.hintBtn=void 0,n.undoBtn=void 0,n.scene=t,n.setSize(375,68),n.createBackground(),n.createButtons(),t.add.existing((0,za.Z)(n)),n}(0,p.Z)(t,e);var n=t.prototype;return n.createBackground=function(){var e=this.scene.world.isLandscape()?0:40,t=this.scene.add.image(0,0,$l,eh.FOOTER_BG);t.setWorldSize(this.width+e,this.height),this.add(t)},n.createButtons=function(){this.createSettingsBtn(),this.createGameStatsButton(),this.createPlayBtn(),this.createHintBtn(),this.createUndoBtn(),this.alignButtons()},n.createSettingsBtn=function(){var e=this;this.settingsBtn=new El.Z(this.scene,40,40),this.settingsBtn.setName("Settings");var t=this.scene.add.image(0,th,$l,eh.IC_SETTINGS).setTint(16579837);t.setWorldSize(28,28);var n=this.scene.make.bitmapText({font:Fo.Z.PRIMARY.KEY,size:this.scene.fontSize(ql.FOOTER),text:"settings",origin:{x:.5,y:.5},y:14}).setTint(13355979);n.setMaxSize(65,18,!0),this.settingsBtn.add([t,n]),this.settingsBtn.onClick=function(){e.scene.screen.open($a.o4.SETTINGS_SCREEN)}},n.createGameStatsButton=function(){var e=this;this.gameStatsButton=new El.Z(this.scene,40,40),this.gameStatsButton.setName("GameStats");var t=this.scene.add.image(0,-10,$l,eh.MENU_STATISTIC).setTint(16579837);t.setWorldSize(28,28);var n=this.scene.make.bitmapText({font:Fo.Z.PRIMARY.KEY,size:this.scene.fontSize(ql.FOOTER),text:"statistics",origin:{x:.5,y:.5},y:14}).setTint(13355979);this.gameStatsButton.add([t,n]),this.gameStatsButton.onClick=function(){e.scene.screen.open($a.o4.GAME_STATS_SCREEN)}},n.createPlayBtn=function(){var e=this;this.playBtn=new El.Z(this.scene,40,40),this.playBtn.setName("Play");var t=this.scene.add.image(0,th,$l,eh.ADD_SQUARE).setTint(16579837);t.setWorldSize(28,28);var n=this.scene.make.bitmapText({font:Fo.Z.PRIMARY.KEY,size:this.scene.fontSize(ql.FOOTER),text:"game",origin:{x:.5,y:.5},y:14}).setTint(13355979);n.setMaxSize(65,18,!0),this.playBtn.add([t,n]),this.playBtn.onClick=function(){e.scene.screen.open($a.o4.PLAY_SCREEN)}},n.createHintBtn=function(){var e=this;this.hintBtn=new El.Z(this.scene,40,40),this.hintBtn.setName("Hint");var t=this.scene.add.image(0,th,$l,eh.IC_HINT).setTint(16579837);t.setWorldSize(28,28);var n=this.scene.make.bitmapText({font:Fo.Z.PRIMARY.KEY,size:this.scene.fontSize(ql.FOOTER),text:"hint",origin:{x:.5,y:.5},y:14}).setTint(13355979);n.setMaxSize(75,18,!0),this.hintBtn.add([t,n]),this.hintBtn.onClick=function(){e.scene.gameplay.boardGame.hint.showHint()},this.hintBtn.setDisabled(!0)},n.createUndoBtn=function(){var e=this;this.undoBtn=new El.Z(this.scene,40,40),this.undoBtn.setName("Undo");var t=this.scene.add.image(0,th,$l,eh.IC_UNDO).setTint(16579837);t.setWorldSize(28,28);var n=this.scene.make.bitmapText({font:Fo.Z.PRIMARY.KEY,size:this.scene.fontSize(ql.FOOTER),text:"undo",origin:{x:.5,y:.5},y:14}).setTint(13355979);n.setMaxSize(75,18,!0),n.setCenterAlign(),this.undoBtn.add([t,n]),this.undoBtn.onClick=function(){e.scene.gameplay.boardGame.mover.undo()}},n.createThemeBtn=function(){var e=this;this.themeBtn=new El.Z(this.scene,40,40),this.themeBtn.setName("Theme");var t=this.scene.add.image(0,th,$l,eh.IC_THEME).setTint(16579837);t.setWorldSize(28,28);var n=this.scene.make.bitmapText({font:Fo.Z.PRIMARY.KEY,size:this.scene.fontSize(ql.FOOTER),text:"Theme",origin:{x:.5,y:.5}}).setTint(13355979);this.themeBtn.add([t,n]),this.themeBtn.onClick=function(){e.scene.screen.open($a.o4.THEME_SCREEN)}},n.alignButtons=function(){var e=[this.settingsBtn,this.gameStatsButton,this.playBtn,this.hintBtn,this.undoBtn];this.add(e);for(var t=0;t<e.length;t++)e[t].setX(75*(t-e.length/2+.5)),e[t].setY(2)},t}(Phaser.GameObjects.Container),ih=nh,ah=An.Z.GAMEPLAY_DEFAULT.KEY,rh="...",sh=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n.avatar=void 0,n.scoreText=void 0,n.scoreIcon=void 0,n.timeText=void 0,n.moveText=void 0,n.scene=t,n.setSize(124,40),n.createBackground(),n.createAvatar(),n.createIcon(),n.createText(),n.timeText.kill(),n.moveText.kill(),n}(0,p.Z)(t,e);var n=t.prototype;return n.alignLeft=function(){this.scoreIcon.setPosition(-6,0),this.avatar.setPosition(-38,0),this.scoreText.setPosition(6,0),this.scoreText.setLeftAlign(),this.scoreText.setOrigin(0,.5)},n.alignRight=function(){this.scoreIcon.setPosition(6,0),this.avatar.setPosition(38,0),this.scoreText.setPosition(-6,0),this.scoreText.setRightAlign(),this.scoreText.setOrigin(1,.5)},n.createBackground=function(){var e=new kl(this.scene,{key:"challenge-info-block",radius:6,border:12,width:this.width,height:this.height,y:-200});this.add(e)},n.createAvatar=function(){this.avatar=new Uo(this.scene,{width:42,height:42,key:ah,background:"blank"}),this.avatar.background.kill(),this.avatar.loadPhoto(ga.Z.AVATAR.KEY,ga.Z.AVATAR.FILE,100),this.avatar.setPosition(-38,0),this.add(this.avatar)},n.createIcon=function(){var e=this.scene.add.image(-6,0,ah,"medal-star");e.setWorldSize(16,16),this.add([e]),this.scoreIcon=e},n.createText=function(){var e=this.scene.make.bitmapText({font:Fo.Z.PRIMARY.KEY,size:this.scene.fontSize(14),text:"0",origin:{x:.5,y:.5},y:0,x:6});this.add(e);var t=this.scene.make.bitmapText({font:Fo.Z.PRIMARY.KEY,size:this.scene.fontSize(14),text:"00:00",origin:{x:.5,y:.5},y:0,x:6});e.setCenterAlign(),this.add(t);var n=this.scene.make.bitmapText({font:Fo.Z.PRIMARY.KEY,size:this.scene.fontSize(14),text:"0",origin:{x:0,y:.5},y:18,x:6});this.add(n),this.scoreText=e,this.timeText=t,this.moveText=n},n.updateData=function(e,t,n){this.scoreText.setText(""+(null!=e?e:rh)),this.timeText.setText(t?(0,nr.F0)(t,!1):rh),this.moveText.setText(""+(null!=n?n:rh))},t}(Phaser.GameObjects.Container),oh=sh,ch=16762624,uh=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n.leftBlock=void 0,n.rightBlock=void 0,n.scene=t,n.setSize(375,62),n.createBlocks(),n.createVSText(),n}(0,p.Z)(t,e);var n=t.prototype;return n.createBg=function(){var e=this.width,t=this.height,n=new Ol.Z(this.scene,0,0,e,t,0,16579837);this.add(n)},n.createBlocks=function(){this.leftBlock=new oh(this.scene),this.leftBlock.alignRight(),this.rightBlock=new oh(this.scene),this.rightBlock.alignLeft(),this.leftBlock.setX(-90),this.leftBlock.setY(-3),this.rightBlock.setX(90),this.rightBlock.setY(-3),this.add([this.leftBlock,this.rightBlock])},n.createVSText=function(){var e=this.scene.make.bitmapText({font:Fo.Z.BOLD.KEY,size:this.scene.fontSize(18),text:"VS",origin:{x:.5,y:.5}});e.setTint(11632207),this.add(e),e.setTint(11222016,ch,ch,ch),Phaser.Display.Align.In.Center(e,this)},n.alignChildren=function(){this.leftBlock.setX(-90),this.rightBlock.setX(90)},t}(Phaser.GameObjects.Container),lh=uh,hh=function(e){function t(t){var n;return(n=e.call(this,t)||this).label=void 0,n.text=void 0,n.createLabel(),n.createText(),n.setTintComponents(),n.alignComponents(),n}(0,p.Z)(t,e);var n=t.prototype;return n.createLabel=function(){this.label=this.scene.make.bitmapText({font:Fo.Z.BOLD.KEY,size:this.scene.fontSize(15),text:"Label",origin:{x:.5,y:.5}}),this.add(this.label)},n.createText=function(){this.text=this.scene.make.bitmapText({font:Fo.Z.BOLD.KEY,size:this.scene.fontSize(15),text:"999",origin:{x:0,y:.5}}),this.text.setIgnoreLanguage(),this.add(this.text)},n.setTintComponents=function(){this.label.setTint(15527148),this.text.setTint(15527148)},n.alignComponents=function(){Phaser.Display.Align.In.LeftCenter(this.label,this),this.label.x-=this.x,this.label.y-=this.y,Phaser.Display.Align.To.RightCenter(this.text,this.label,7)},t}(Phaser.GameObjects.Container),dh=function(e){function t(t){var n;return(n=e.call(this,t)||this).label.setText("moves"),n.label.setMaxSize(100,25,!0),n.text.setOrigin(1,.5),n.text.setIgnoreLanguage(),Phaser.Display.Align.In.RightCenter(n.text,(0,za.Z)(n),0),Phaser.Display.Align.To.LeftCenter(n.label,n.text,7),n.scene.events.on(Phaser.Scenes.Events.UPDATE,(function(){n.label.setX(-n.label.width/2-10-9*n.text.text.length)})),n}return(0,p.Z)(t,e),t}(hh),fh=function(e){function t(t){var n;return(n=e.call(this,t)||this).label.setText("score"),n.label.setMaxSize(100,25,!0),n.scene.events.on(Phaser.Scenes.Events.UPDATE,(function(){n.alignComponents()})),n}return(0,p.Z)(t,e),t}(hh),ph=function(e){function t(t){var n;return(n=e.call(this,t)||this).label.kill(),n.text.setOrigin(.5,.5),n.text.setIgnoreLanguage(),Phaser.Display.Align.In.Center(n.text,(0,za.Z)(n)),n}return(0,p.Z)(t,e),t.prototype.alignComponents=function(){Phaser.Display.Align.In.Center(this.text,this)},t}(hh),gh=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n.movesBlock=void 0,n.timeBlock=void 0,n.scoreBlock=void 0,n.scene=t,n.setSize(375,62),n.createContent(),n}(0,p.Z)(t,e);var n=t.prototype;return n.createContent=function(){this.createScore(),this.createTime(),this.createMoves()},n.createMoves=function(){this.movesBlock=new dh(this.scene),this.add(this.movesBlock)},n.createTime=function(){this.timeBlock=new ph(this.scene),this.add(this.timeBlock)},n.createScore=function(){this.scoreBlock=new fh(this.scene),this.add(this.scoreBlock)},n.alignChildren=function(){var e=this.scene.gameplay.boardGame.getHorizontalPileSpace();this.movesBlock.setX(3.9*e-this.movesBlock.width/2),this.scoreBlock.setX(3.9*-e+this.scoreBlock.width/2)},t}(Phaser.GameObjects.Container),mh=gh,vh=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n.movesBlock=void 0,n.timeBlock=void 0,n.scoreBlock=void 0,n.scene=t,n.setSize(375,54),n.createContent(),n}(0,p.Z)(t,e);var n=t.prototype;return n.createContent=function(){this.createScore(),this.createTime(),this.createMoves()},n.createMoves=function(){this.movesBlock=new dh(this.scene),this.add(this.movesBlock)},n.createTime=function(){this.timeBlock=new ph(this.scene),this.add(this.timeBlock)},n.createScore=function(){this.scoreBlock=new fh(this.scene),this.add(this.scoreBlock)},n.alignChildren=function(){var e=this.scene.gameplay.boardGame.getHorizontalPileSpace();this.movesBlock.setX(3.9*e-this.movesBlock.width/2),this.scoreBlock.setX(3.9*-e+this.scoreBlock.width/2)},t}(Phaser.GameObjects.Container),yh=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n._tournamentTitle=void 0,n.scene=t,n.setSize(375,62),n.createContent(),n}(0,p.Z)(t,e);var n=t.prototype;return n.createContent=function(){this.createTitle()},n.createTitle=function(){this._tournamentTitle=this.scene.make.bitmapText({font:Fo.Z.PRIMARY.KEY,size:this.scene.fontSize(18),text:"Tournament",origin:{x:.5,y:.5},y:-15}),this._tournamentTitle.setIgnoreLanguage(!0,"en"),this.add(this._tournamentTitle),Phaser.Display.Align.In.BottomCenter(this._tournamentTitle,this)},(0,de.Z)(t,[{key:"tournamentTitle",get:function(){return this._tournamentTitle}}]),t}(Phaser.GameObjects.Container),bh=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n._statBlock=void 0,n._titleBlock=void 0,n.scene=t,n.createContent(),n.setSize(375,n._titleBlock.height+n._statBlock.height),n.alignChildren(),n}(0,p.Z)(t,e);var n=t.prototype;return n.createBg=function(){var e=this.width,t=this.height,n=new Ol.Z(this.scene,0,0,e,t,0,16579837);this.add(n)},n.createContent=function(){this.createTitle(),this.createStat()},n.createTitle=function(){this._titleBlock=new yh(this.scene),this.add(this._titleBlock)},n.createStat=function(){this._statBlock=new vh(this.scene),this.add(this._statBlock)},n.alignChildren=function(){Phaser.Display.Align.In.TopCenter(this._titleBlock,this),Phaser.Display.Align.In.BottomCenter(this._statBlock,this,0,-5)},(0,de.Z)(t,[{key:"statBlock",get:function(){return this._statBlock}},{key:"titleBlock",get:function(){return this._titleBlock}}]),t}(Phaser.GameObjects.Container),Ah=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n.singleInfo=void 0,n.challengeInfo=void 0,n.tournamentInfo=void 0,n.scene=t,n.setSize(375,62),t.add.existing((0,za.Z)(n)),n.createChallengeInfo(),n.createSingleInfo(),n.createTournamentInfo(),n}(0,p.Z)(t,e);var n=t.prototype;return n.getInfoContainersWithout=function(e){var t;return Be()(t=[this.singleInfo,this.challengeInfo,this.tournamentInfo]).call(t,(function(t){return t!==e}))},n.useChallengeInfo=function(){var e=this,t=[this.tournamentInfo];this.challengeInfo.revive(),this.singleInfo.revive(),this.scene.tweens.add({targets:this.challengeInfo,y:{from:-200,to:0},duration:500,ease:Phaser.Math.Easing.Sine.Out,onStart:function(){vu(95),e.scene.gameplay.boardGame.alignBoard()}}),this.scene.tweens.add({targets:this.singleInfo,y:{from:-200,to:35},duration:500,ease:Phaser.Math.Easing.Sine.Out}),this.scene.tweens.add({targets:t,y:{from:0,to:-200},duration:500,ease:Phaser.Math.Easing.Sine.In,onComplete:function(){return Me()(t).call(t,(function(e){return e.kill()}))}})},n.useSingleInfo=function(){var e=this,t=this.getInfoContainersWithout(this.singleInfo);Me()(t).call(t,(function(e){return e.kill()})),this.singleInfo.revive(),this.scene.tweens.add({targets:this.singleInfo,y:{from:-200,to:0},duration:500,ease:Phaser.Math.Easing.Sine.Out,onStart:function(){vu(70),e.scene.gameplay.boardGame.alignBoard()}}),this.scene.tweens.add({targets:t,y:{from:0,to:-200},duration:500,ease:Phaser.Math.Easing.Sine.In,onComplete:function(){return Me()(t).call(t,(function(e){return e.kill()}))}})},n.useTournamentInfo=function(){var e=this,t=this.getInfoContainersWithout(this.tournamentInfo);this.tournamentInfo.revive(),this.scene.tweens.add({targets:this.tournamentInfo,y:{from:-200,to:0},duration:500,ease:Phaser.Math.Easing.Sine.Out,onStart:function(){vu(95),e.scene.gameplay.boardGame.alignBoard()}}),this.scene.tweens.add({targets:t,y:{from:0,to:-200},duration:500,ease:Phaser.Math.Easing.Sine.In,onComplete:function(){return Me()(t).call(t,(function(e){return e.kill()}))}})},n.createChallengeInfo=function(){var e=new lh(this.scene);this.challengeInfo=e,this.add(e),this.challengeInfo.kill()},n.createSingleInfo=function(){var e=new mh(this.scene);this.singleInfo=e,this.add(e)},n.createTournamentInfo=function(){var e=new bh(this.scene);this.tournamentInfo=e,this.add(e),this.tournamentInfo.kill()},n.update=function(){var e=this.scene.gameplay.boardGame,t=e.getScore(),n=e.getTime(),i=e.getMoves(),a=this.singleInfo,r=a.scoreBlock,s=a.timeBlock,o=a.movesBlock;switch(r.text.setText(""+t),s.text.setText((0,nr.F0)(n,!1)),o.text.setText(""+i),so.instance.getGameMode()){case ao.CHALLENGE_FRIENDS:var c=this.challengeInfo.leftBlock;c.scoreText.setText(""+t),c.timeText.setText((0,nr.F0)(n,!1)),c.moveText.setText(""+i);break;case ao.TOURNAMENT:var u=this.tournamentInfo.statBlock,l=u.movesBlock,h=u.timeBlock;u.scoreBlock.text.setText(""+t),h.text.setText((0,nr.F0)(n,!1)),l.text.setText(""+i)}},n.alignChildren=function(){this.singleInfo.alignChildren(),this.challengeInfo.alignChildren(),this.tournamentInfo.statBlock.alignChildren()},t}(Phaser.GameObjects.Container),Eh=Ah,Sh=n(670),Th=n(678),Ch=function(e){function t(t){var n;return(n=e.call(this,t)||this).bg=void 0,n.createBackground(),n.createContent(),t.add.existing((0,za.Z)(n)),n}(0,p.Z)(t,e);var n=t.prototype;return n.createBackground=function(){this.setSize(360,120);var e=new Ol.Z(this.scene,0,0,360,120,16,16119285);e.setAlpha(.85),this.add(e),this.bg=e},n.createContent=function(){this.createNewDealButton(),this.createReplayButton(),this.createCloseButton();var e=this.scene.add.line(0,0,0,0,this.width,0,3947587);e.setLineWidth(.5),e.setAlpha(.36),this.add(e)},n.createNewDealButton=function(){var e=this,t=new El.Z(this.scene,360,60);t.setName("NewDeal"),t.onClick=(0,i.Z)(r().mark((function t(){return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.scene.screen.close($a.o4.PLAY_SCREEN),!(e.scene instanceof dm)){t.next=6;break}return t.next=4,e.scene.handlePlaySingle();case 4:return t.next=6,e.scene.gameplay.handleShowInterstitialAd();case 6:e.closeResultScreen();case 7:case"end":return t.stop()}}),t)})));var n=this.scene.make.bitmapText({font:Fo.Z.PRIMARY.KEY,size:this.scene.fontSize(18),text:"newDeal",origin:{x:.5,y:.5}});n.setMaxSize(300,40),n.setTint(31487),t.add([n]),Phaser.Display.Align.In.TopCenter(t,this.bg,0),this.add([t])},n.createReplayButton=function(){var e=this,t=new El.Z(this.scene,360,60);t.setName("Replay"),t.onClick=(0,i.Z)(r().mark((function t(){return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.scene.screen.close($a.o4.PLAY_SCREEN),!(e.scene instanceof dm)){t.next=5;break}return t.next=4,e.scene.gameplay.handleShowInterstitialAd();case 4:e.scene.gameplay.replayGame();case 5:e.closeResultScreen();case 6:case"end":return t.stop()}}),t)})));var n=this.scene.make.bitmapText({font:Fo.Z.PRIMARY.KEY,size:this.scene.fontSize(18),text:"replay",origin:{x:.5,y:.5}});n.setMaxSize(300,40),n.setTint(31487),t.add([n]),Phaser.Display.Align.In.BottomCenter(t,this.bg,0),this.add([t])},n.createCloseButton=function(){var e=this,t=new Th.Z(this.scene,360,60,16,16579837);t.setName("Close"),t.onClick=function(){e.scene.screen.close($a.o4.PLAY_SCREEN)};var n=this.scene.make.bitmapText({font:Fo.Z.BOLD.KEY,size:this.scene.fontSize(18),text:"cancel",origin:{x:.5,y:.5}});n.setMaxSize(300,40),n.setTint(31487),t.add([n]),Phaser.Display.Align.In.TopCenter(t,this.bg,0,3),Phaser.Display.Align.To.BottomCenter(t,this.bg,0,8),this.add([t])},n.closeResultScreen=function(){var e=this.scene.screen.get($a.o4.NO_MORE_MOVES_SCREEN),t=this.scene.screen.get($a.o4.VICTORY_SCREEN),n=this.scene.screen.get($a.o4.PLAY_WITH_FRIEND_GAME_OVER_SCREEN),i=this.scene.screen.get($a.o4.TOURNAMENTS_RESULT_SCREEN);null!=e&&e.visible&&this.scene.screen.close($a.o4.NO_MORE_MOVES_SCREEN),null!=t&&t.visible&&this.scene.screen.close($a.o4.VICTORY_SCREEN),null!=n&&n.visible&&this.scene.screen.close($a.o4.PLAY_WITH_FRIEND_GAME_OVER_SCREEN),null!=i&&i.visible&&this.scene.screen.close($a.o4.TOURNAMENTS_RESULT_SCREEN)},t}(Phaser.GameObjects.Container),wh=Ch,Ih=function(e){function t(t,n,i,a){var r;return(r=e.call(this,t,n,i,a)||this).slideInAnimation=void 0,r.fadeInAnimation=void 0,r.fadeOutAnimation=void 0,r.playContainer=void 0,r.setDepth($a.Ks.POPUP),r.playContainer=new wh(t),r.add(r.playContainer),r.background.setTint(1315862),r.background.setAlpha(.5),r.background.setInteractive(),r.playContainer.setInteractive(),r}(0,p.Z)(t,e);var n=t.prototype;return n.open=function(){e.prototype.open.call(this),this.runOpenAnimation()},n.close=function(){this.runCloseAnimation()},n.runOpenAnimation=function(){var e,t,n=this;if(null==(e=this.slideInAnimation)||null==(t=e.tween)||!t.isPlaying()){this.scene.audio.playSound(er.Z.POPUP_SHOW);var i=this.scene.game.world.isLandscape()?33:13,a=this.scene.ads.getBannerHeight(),r=this.scene.gameZone.height;this.slideInAnimation||(this.slideInAnimation=new To.Z({targets:[this.playContainer],props:{y:{from:r/2,to:r/2-160-a-i,ease:Phaser.Math.Easing.Back.Out}},duration:300,onComplete:function(){n.background.once(Phaser.Input.Events.POINTER_DOWN,(function(){return n.scene.screen.close($a.o4.PLAY_SCREEN)}))}})),this.fadeInAnimation||(this.fadeInAnimation=new Hc.Z({targets:[this],duration:300,ease:Phaser.Math.Easing.Sine.InOut})),this.slideInAnimation.play(),this.fadeInAnimation.play()}},n.runCloseAnimation=function(){var t,n,i=this;null!=(t=this.fadeOutAnimation)&&null!=(n=t.tween)&&n.isPlaying()||(this.scene.audio.playSound(er.Z.POPUP_OFF),this.fadeOutAnimation||(this.fadeOutAnimation=new Sh.Z({targets:[this],props:{alpha:0},duration:300,onComplete:function(){e.prototype.close.call(i)}})),this.fadeOutAnimation.play())},t}(GameCore.Screen),xh=Ih,Ph=An.Z.GAMEPLAY_DEFAULT.KEY,kh=function(e){function t(t,n){var i;return(i=e.call(this,t,60,50)||this).options=void 0,i.button=void 0,i.getBackgroundByStatus=function(){var e=i.options,t=e.enable,n=e.backgroundOn,a=e.backgroundOff;return t?n:a},i.createButton=function(e){var t=i.getBackgroundByStatus();i.button=i.scene.add.image(0,0,e,t),i.add(i.button)},i.button=t.add.image(0,0,Ph,"ic_switch_off"),i.button.setWorldSize(40,25),i.add(i.button),i.options={enable:n,backgroundOn:"ic_switch_on",backgroundOff:"ic_switch_off"},i.updateStatus(n),i}(0,p.Z)(t,e);var n=t.prototype;return n.processCallback=function(e){var t=this.options.enable;this.updateStatus(!t),e(!t)},n.updateStatus=function(e){this.options.enable=e;var t=this.getBackgroundByStatus();this.button.setFrame(t)},n.logButtonEvent=function(){var e=this.getParentName(),t=this.name,n=!this.options.enable;this.scene.analytics.event(bn._.BUTTON_CLICK,{button_name:t,screen_name:e,enable:n})},t}(El.Z),_h=kh,Oh=An.Z.GAMEPLAY_DEFAULT,Rh=Oh.KEY,Lh=Oh.FRAME,Dh=function(e){function t(t){var n;return(n=e.call(this,t)||this).bg=void 0,n.autoMoveToFoundationButton=void 0,n.soundButton=void 0,n.createBackground(),n.createContent(),n.createCloseButton(),n.listenAudioEnabledChange(),t.add.existing((0,za.Z)(n)),n}(0,p.Z)(t,e);var n=t.prototype;return n.listenAudioEnabledChange=function(){var e=this;GameSDK.onAudioEnabledChange((function(t){e.soundButton.updateStatus(t),e.soundButton.setDisabled(!t)}))},n.createBackground=function(){var e=new Ol.Z(this.scene,0,0,340,452,20,16579837);this.add(e),this.bg=e,this.setSize(e.width,e.height),this.bg.setInteractive()},n.createContent=function(){var e=this.scene.make.bitmapText({font:Fo.Z.BOLD.KEY,size:this.scene.fontSize(22),text:"settings",origin:{x:.5,y:.5}});e.setMaxSize(250,40,!0),e.setTint(1907997),this.add(e),Phaser.Display.Align.In.TopCenter(e,this,0,-12);var t=this.scene.player.getPlayerSettings(),n=t.sound,i=void 0===n||n,a=t.vibrate,r=void 0!==a&&a,s=t.tapToMove,o=void 0===s||s,c=(t.autoHints,t.autoMoveToFoundation),u=void 0!==c&&c,l=t.highlightLowCards,h=void 0!==l&&l,d=Lh.IC_VIBRATION,f=Lh.IC_SOUND,p=(Lh.IC_MOVE,Lh.IC_HINT_SETTINGS,Lh.IC_AUTO_COMPLETE,Lh.IC_DRAW_MODE,[this.createToggleButton("sound","soundEffects",i,f)]);this.isVibrateAvailable()||p.push(this.createToggleButton("vibrate","Vibrate",r,d)),p.push(this.createThemeButton()),p.push(this.createStatisticsButton()),p.push(this.createLanguageButton()),p.push(this.createToggleButton(Ia.Z.tapToMove,"tapToMove",o,"ic_move")),p.push(this.createToggleButton(Ia.Z.autoMoveToFoundation,"autoMoveToFoundation",u,"ic_auto_complete")),p.push(this.createToggleButton(Ia.Z.highlightLowCards,"highlightLowCards",h,"ic_highlight")),p.push(this.createHowToPlayButton());var g=e.y+50,m=this.scene.add.line(0,g-23,0,0,340,0,3774208,1);m.setLineWidth(.6),this.add(m);for(var v=0;v<p.length;v++)if(p[v].setY(44*v+g),v<p.length-1){var y=this.scene.add.line(0,44*v+g+23,0,0,300,0,1907997,.2);y.setLineWidth(.4),this.add(y)}this.add(p)},n.createToggleButton=function(e,t,n,i){var a=this;void 0===i&&(i="ic_sound");var r=1/this.scene.world.getPixelRatio(),s=this.scene.add.container(0,0);s.setSize(340,50);var o=new _h(this.scene,n);o.setName(e),e===Ia.Z.autoMoveToFoundation&&(this.autoMoveToFoundationButton=o),o.onClick=function(t){a.scene.player.setSetting(e,t),a.scene.events.emit("settings-changed",e,t),e==Ia.Z.sound&&a.handleSoundChanged(t);var n=a.scene.player.getPlayerSettings().modifiedOptions,i=GameCore.Utils.Json.clone(n);xe()(i).call(i,e)||i.push(e),a.scene.player.setSetting(Ia.Z.modifiedOptions,i),"vibrate"==e&&a.scene.vibration.performVibrating(100)},e===Ia.Z.sound&&(this.soundButton=o);var c=this.scene.make.bitmapText({font:Fo.Z.BOLD.KEY,size:this.scene.fontSize(16),text:t,origin:{x:0,y:.5}});c.setMaxSize(230,40);var u=this.scene.add.image(0,0,Rh,i);return u.setScale(r),u.setSize(24,24),c.setTint(1907997),s.add([o,c,u]),Phaser.Display.Align.In.LeftCenter(u,s,-20,0),Phaser.Display.Align.In.LeftCenter(c,s,-50,0),Phaser.Display.Align.In.RightCenter(o,s,-10,0),s},n.createThemeButton=function(){var e=this,t=new El.Z(this.scene,300,50);t.setName("Theme"),t.onClick=function(){e.scene.screen.close($a.o4.SETTINGS_SCREEN),e.scene.screen.open($a.o4.THEME_SCREEN)};var n=this.scene.make.bitmapText({font:Fo.Z.BOLD.KEY,size:this.scene.fontSize(16),text:"theme",origin:{x:0,y:.5}});n.setMaxSize(230,40),n.setTint(1907997);var i=this.scene.add.image(0,0,Rh,"ic_theme");i.setWorldSize(24,24);var a=this.scene.add.image(0,0,Rh,Lh.IC_NEXT);return a.setWorldSize(16,16),Phaser.Display.Align.In.LeftCenter(n,t,-30),Phaser.Display.Align.In.RightCenter(a,t),Phaser.Display.Align.In.LeftCenter(i,t),t.add([n,i,a]),t},n.createHowToPlayButton=function(){var e=this,t=new El.Z(this.scene,300,50);t.setName("HowToPlay"),t.onClick=function(){e.scene.screen.close($a.o4.SETTINGS_SCREEN),e.scene.screen.open($a.o4.HOW_TO_PLAY_SCREEN)};var n=this.scene.make.bitmapText({font:Fo.Z.BOLD.KEY,size:this.scene.fontSize(16),text:"howToPlay?",origin:{x:0,y:.5}});n.setMaxSize(230,40),n.setTint(1907997);var i=this.scene.add.image(0,0,Rh,Lh.IC_BOOK);i.setWorldSize(24,24);var a=this.scene.add.image(0,0,Rh,Lh.IC_NEXT);return a.setWorldSize(16,16),Phaser.Display.Align.In.LeftCenter(n,t,-30),Phaser.Display.Align.In.LeftCenter(i,t),Phaser.Display.Align.In.RightCenter(a,t),t.add([n,i,a]),t},n.createStatisticsButton=function(){var e=this,t=new El.Z(this.scene,300,50);t.setName("Statistics"),t.onClick=function(){e.scene.screen.close($a.o4.SETTINGS_SCREEN),e.scene.screen.open($a.o4.GAME_STATS_SCREEN)};var n=this.scene.make.bitmapText({font:Fo.Z.BOLD.KEY,size:this.scene.fontSize(16),text:"statistics",origin:{x:0,y:.5}});n.setMaxSize(230,40),n.setTint(1907997);var i=this.scene.add.image(0,0,Rh,Lh.IC_STATISTICS);i.setWorldSize(24,24);var a=this.scene.add.image(0,0,Rh,Lh.IC_NEXT);return a.setWorldSize(16,16),Phaser.Display.Align.In.LeftCenter(n,t,-30),Phaser.Display.Align.In.LeftCenter(i,t),Phaser.Display.Align.In.RightCenter(a,t),t.add([n,i,a]),t},n.createLanguageButton=function(){var e=this,t=new El.Z(this.scene,300,50);t.setName("Language"),t.onClick=function(){e.scene.screen.close($a.o4.SETTINGS_SCREEN),e.scene.screen.open($a.o4.LANGUAGES_SCREEN)};var n=this.scene.make.bitmapText({font:Fo.Z.BOLD.KEY,size:this.scene.fontSize(16),text:"languages",origin:{x:0,y:.5}});n.setMaxSize(230,40),n.setTint(1907997);var i=this.scene.add.image(0,0,Rh,Lh.IC_LANGUAGES);i.setWorldSize(24,18.5);var a=this.scene.add.image(0,0,Rh,Lh.IC_NEXT);return a.setWorldSize(16,16),Phaser.Display.Align.In.LeftCenter(n,t,-30),Phaser.Display.Align.In.LeftCenter(i,t),Phaser.Display.Align.In.RightCenter(a,t),t.add([n,i,a]),t},n.handleSoundChanged=function(e){this.scene.sound.volume=e?1:0},n.createCloseButton=function(){var e=this,t=new El.Z(this.scene,40,40);t.setName("Close"),t.onClick=function(){e.scene.screen.close($a.o4.SETTINGS_SCREEN)};var n=this.scene.add.image(0,0,Rh,"ic_close_gray");n.setWorldSize(24,24),t.add(n),Phaser.Display.Align.In.TopRight(t,this.bg,-4,-6),this.add([t])},n.isVibrateAvailable=function(){var e=GameCore.Utils.Device.isDesktop(),t=GameCore.Utils.Device.isIOS();return!(e||t)},t}(Phaser.GameObjects.Container),Bh=Dh,Nh=function(e){function t(t,n,i,a){var r;return(r=e.call(this,t,n,i,a)||this).slideInAnimation=void 0,r.fadeInAnimation=void 0,r.fadeOutAnimation=void 0,r.settingsContainer=void 0,r.setDepth($a.Ks.POPUP),r.settingsContainer=new Bh(t),r.add(r.settingsContainer),r.background.setTint(1315862),r.background.setAlpha(.5),r.background.setInteractive(),r.settingsContainer.setInteractive(),r}(0,p.Z)(t,e);var n=t.prototype;return n.open=function(){e.prototype.open.call(this),this.runOpenAnimation()},n.close=function(){this.runCloseAnimation()},n.runOpenAnimation=function(){var e=this;this.scene.audio.playSound(er.Z.POPUP_SHOW);var t=this.scene.ads.getBannerHeight();this.slideInAnimation||(this.slideInAnimation=new To.Z({targets:[this.settingsContainer],props:{y:{from:this.height/2,to:this.height/2-this.settingsContainer.height/2-20-t,ease:Phaser.Math.Easing.Back.Out}},duration:300,onComplete:function(){e.background.once(Phaser.Input.Events.POINTER_DOWN,(function(){return e.scene.screen.close($a.o4.SETTINGS_SCREEN)}))}})),this.fadeInAnimation||(this.fadeInAnimation=new Hc.Z({targets:[this],duration:300})),this.slideInAnimation.play(),this.fadeInAnimation.play()},n.runCloseAnimation=function(){var t=this;this.scene.audio.playSound(er.Z.POPUP_OFF),this.fadeOutAnimation||(this.fadeOutAnimation=new Sh.Z({targets:[this],props:{alpha:0},duration:300,onComplete:function(){t.setAlpha(1),e.prototype.close.call(t)}})),this.fadeOutAnimation.play()},n.getAutoMoveToFoundationButton=function(){return this.settingsContainer.autoMoveToFoundationButton},t}(GameCore.Screen),Mh=Nh,Gh={totalGame:0,wins:0,winsWithoutUndo:0,bestScore:0,averageScore:0,bestWinningTime:0,averageWinningTime:0,mostWinningTime:0,bestWinningMoves:0,mostWinningMoves:0,currentWinningStreak:0,longestWinningStreak:0},Fh=function(){function e(e){this.scene=void 0,this.normal=void 0,this.scene=e;var t=e.player.getCustomData("game_stats");t&&0!=oe()(t).length?this.normal=(0,f.Z)({},t.normal):(this.normal=(0,f.Z)({},Gh),this.pushGameStats())}var t=e.prototype;return t.addWin=function(e){this.normal=this.calculateNewStats(this.normal,e),this.pushGameStats()},t.calculateNewStats=function(e,t){var n=t.score,i=t.winningMoves,a=t.winningTime,r=t.usedUndo,s=e.totalGame+1,o=e.wins+1,c=e.winsWithoutUndo+(r?0:1),u=Math.max(e.bestScore,n),l=(e.averageScore*e.wins+n)/o,h=(e.averageWinningTime*e.wins+a)/o,d=Math.min(a,e.bestWinningTime)||a,f=Math.max(a,e.mostWinningTime),p=Math.min(i,e.bestWinningMoves)||i,g=Math.max(i,e.mostWinningMoves),m=e.currentWinningStreak+1;return{totalGame:s,wins:o,winsWithoutUndo:c,bestScore:u,averageScore:l,averageWinningTime:h,bestWinningTime:d,mostWinningTime:f,bestWinningMoves:p,mostWinningMoves:g,currentWinningStreak:m,longestWinningStreak:Math.max(m,e.longestWinningStreak)}},t.addLose=function(){this.normal=(0,f.Z)({},this.normal,{totalGame:this.normal.totalGame+1,currentWinningStreak:0}),this.pushGameStats()},t.pushGameStats=function(){this.scene.player.setCustomData("game_stats",{normal:this.normal})},t.getWins=function(){return this.normal.wins},t.getNormalStat=function(){return this.normal},e}(),Zh=Fh,Uh=function(){function e(e){this.scene=void 0,this.scene=e,this.loadLevels()}var t=e.prototype;return t.loadLevels=function(){for(var e=1;e<=5;e++){var t="level"+e;this.scene.cache.text.exists(t)||this.scene.load.text(t,"assets/levels/"+t+".txt")}this.scene.load.start()},t.isLevelLoaded=function(){var e=this.getKey();return!!this.scene.cache.text.get(e)&&!!this.scene.cache.text.get(e)},t.getKey=function(){var e=this.scene.gameStats.getWins();return"level"+this.getLevelByWins(e)},t.getLevelByWins=function(e){return e<10?1:e<20?2:e<60?3:e<140?4:5},t.randomLevel=function(){var e=this.scene.gameStats.getWins(),t=this.getLevelByWins(e);return Phaser.Math.RND.between(1,t)},t.randomSeed=function(e){var t="level"+e,n=this.scene.cache.text.get(t);if(!n)throw Error("Level data \u0111\xe2u r\u1ed3i b\u1ea1n \xeai!!!");var i=Phaser.Math.RND.pick(n.split("\n")),a=String((0,vl.Z)(i));return this.isStandardSeed(a)&&!this.scene.gameplay.boardGame.isStandardSeedValid(a)?this.randomSeed(e):i},t.isStandardSeed=function(e){return e.length<=10},t.getRandomBeginnerSeed=function(){var e=this.scene.cache.text.get("level1");if(!e)throw Error("Level data \u0111\xe2u r\u1ed3i b\u1ea1n \xeai!!!");var t=Phaser.Math.RND.pick(e.split("\n")),n=String((0,vl.Z)(t));return this.isStandardSeed(n)&&!this.scene.gameplay.boardGame.isStandardSeedValid(n)?this.getRandomBeginnerSeed():t},t.getAllSeeds=function(e){var t,n="level"+e,i=this.scene.cache.text.get(n);return Me()(t=i.split("\n")).call(t,(function(e){return e}))},t.getDrawMode=function(){},e}(),Hh=Uh,Wh=n(84),zh=n.n(Wh),Yh=function(e){function t(t){var n;return(n=e.call(this,t)||this).columns=void 0,n.rows=void 0,n.cellWidths=void 0,n.cellHeight=void 0,n.textGroup=void 0,n.iconGroup=void 0,n.aligns=void 0,n.tableData=void 0,n.background=void 0,n.columns=0,n.rows=0,n.tableData=[],n.aligns=[],n.cellWidths=[],n.cellHeight=0,n.textGroup=n.scene.add.group({classType:Phaser.GameObjects.BitmapText}),n.iconGroup=n.scene.add.group({classType:Phaser.GameObjects.Image}),t.add.existing((0,za.Z)(n)),n}(0,p.Z)(t,e);var n=t.prototype;return n.setTableSize=function(e,t,n,i,a){this.columns=t,this.rows=e,this.cellWidths=n,this.cellHeight=i,this.aligns=a,this.updateTable()},n.setTableData=function(e){this.tableData=e,this.updateTable()},n.updateTable=function(){var e;this.textGroup.getChildren().forEach((function(e){return e instanceof Phaser.GameObjects.BitmapText&&e.kill()})),this.iconGroup.getChildren().forEach((function(e){return e instanceof Phaser.GameObjects.Image&&e.kill()}));var t=zh()(e=this.cellWidths).call(e,(function(e,t){return e+t}),0),n=this.rows*this.cellHeight;this.setSize(t,n);var i=this.tableData;if(i)for(var a=0;a<this.rows;a++){var r=i[a];if(!r)break;var s=this.cellHeight*(.5+a)-this.height/2,o=-this.width/2,c=this.spawnIcon();c.setTexture(An.Z.GAMEPLAY_DEFAULT.KEY,r[2]),c.setWorldSize(24,24),c.setPosition(o-22,s);for(var u=0;u<this.columns;u++)if(r[u]){var l=this.cellWidths[u],h=this.spawnText();h.setText(r[u]),1==this.aligns[u]?(h.setOrigin(1,.5),h.setPosition(o+l,s),h.setIgnoreLanguage()):0==this.aligns[u]?(h.setOrigin(.5,.5),h.setPosition(o+.5*l,s)):(h.setOrigin(0,.5),h.setPosition(o,s),h.setMaxSize(200,25)),o+=l}}},n.drawBorder=function(){this.drawRowBorder(),this.drawColumnBorder();var e=this.scene.add.rectangle(0,0,0,0);e.setOrigin(.5,.5),e.setStrokeStyle(1,1907997,.2),e.setSize(this.width,this.height),e.setPosition(-this.width/2,-this.height/2),this.add(e)},n.drawRowBorder=function(){for(var e=-this.height/2,t=1;t<this.rows;t++){var n=this.scene.add.line(-15,e+this.cellHeight*t,0,0,this.width+35,0,1907997,.1);n.setLineWidth(.2),this.add(n)}},n.drawColumnBorder=function(){for(var e=-this.width/2,t=1;t<this.rows;t++){e+=this.cellWidths[t-1]||0;var n=this.scene.add.line(e,0,0,0,0,this.height,1907997,.1);n.setLineWidth(.2),this.add(n)}},n.spawnText=function(){var e=this.textGroup.getFirstDead()||this.createText();return e.revive(),e},n.createText=function(){var e=this.scene.make.bitmapText({font:Fo.Z.BOLD.KEY,size:this.scene.fontSize(16),origin:{x:.5,y:.5}});return e.setTint(1907997),this.textGroup.add(e),this.add(e),e},n.spawnIcon=function(){var e=this.iconGroup.get();return e.revive(),e.clearTint(),this.add(e),e},t}(Phaser.GameObjects.Container),Vh=Yh,Kh=43282,jh=15672868,Xh=13425357,Jh=303,qh=24,Qh=12,$h=24,ed=66,td=1e3,nd=Phaser.Math.Easing.Quadratic.Out,id=Kh,ad=jh,rd=Xh,sd=function(e){function t(t){var n;return(n=e.call(this,t)||this).emptyBar=void 0,n.winRateBar=void 0,n.loseRateBar=void 0,n.cornerRadius=void 0,n.isPlayingAnimation=!1,n.updatedLoseGraphicsWidth=-1,n.setSize(Jh,Qh),n.cornerRadius=n.height/2,n.createEmptyBar(),n.createWinRateBar(),n.createLoseRateBar(),n}(0,p.Z)(t,e);var n=t.prototype;return n.createEmptyBar=function(){var e=this.width,t=this.height;this.emptyBar=new Ol.Z(this.scene,0,0,e,t,this.cornerRadius).setFillStyle(rd),this.add(this.emptyBar)},n.createWinRateBar=function(){var e=this.width,t=this.height;this.winRateBar=new Ol.Z(this.scene,0,0,e,t,this.cornerRadius).setFillStyle(id).setOrigin(0,.5),this.add(this.winRateBar),Phaser.Display.Align.In.LeftCenter(this.winRateBar,this)},n.createLoseRateBar=function(){var e=this.width,t=this.height;this.loseRateBar=new Ol.Z(this.scene,0,0,e/2,t,this.cornerRadius).setFillStyle(ad).setOrigin(1,.5),this.add(this.loseRateBar),Phaser.Display.Align.In.RightCenter(this.loseRateBar,this)},n.updateWinLoseCount=function(e,t){var n=e+t;if(n<=0)return this.winRateBar.kill(),void this.loseRateBar.kill();e?this.winRateBar.revive():this.winRateBar.kill(),t?this.loseRateBar.revive():this.loseRateBar.kill(),this.bringToTop(t<e?this.loseRateBar:this.winRateBar);var i=t/n*this.width;this.updatedLoseGraphicsWidth=i},n.initAnimation=function(){this.isPlayingAnimation||(this.loseRateBar.width=2*this.cornerRadius,this.winRateBar.width=2*this.cornerRadius)},n.playAnimation=function(){var e=this;this.isPlayingAnimation||(this.isPlayingAnimation=!0,-1!==this.updatedLoseGraphicsWidth?(this.scene.tweens.addCounter({from:2*this.cornerRadius,to:this.updatedLoseGraphicsWidth,ease:nd,duration:td,onUpdate:function(t){e.loseRateBar.width=t.getValue()},onComplete:function(){e.isPlayingAnimation=!1}}),this.scene.tweens.addCounter({from:2*this.cornerRadius,to:this.width-this.updatedLoseGraphicsWidth+2*this.cornerRadius,ease:nd,duration:td,onUpdate:function(t){var n=t.getValue();e.winRateBar.width=n>e.width?e.width:n}})):this.isPlayingAnimation=!1)},t}(Phaser.GameObjects.Container),od=12,cd=Kh,ud=jh,ld=16,hd=function(e){function t(t){var n;return(n=e.call(this,t)||this).winCountLabel=void 0,n.loseCountLabel=void 0,n.setSize(Jh,qh),n.createWinCountLabel(),n.createLoseCountLabel(),n.alignComponents(),n}(0,p.Z)(t,e);var n=t.prototype;return n.createWinCountLabel=function(){this.winCountLabel=this.scene.make.bitmapText({font:Fo.Z.PRIMARY.KEY,size:this.scene.fontSize(ld),text:"win",origin:{x:0,y:.5}}).setTint(cd),this.winCountLabel.setMaxSize(140,20),this.winCountLabel.setTranslationParameter("v",0),this.add(this.winCountLabel)},n.createLoseCountLabel=function(){this.loseCountLabel=this.scene.make.bitmapText({font:Fo.Z.PRIMARY.KEY,size:this.scene.fontSize(ld),text:"lose",origin:{x:1,y:.5}}).setTint(ud),this.loseCountLabel.setMaxSize(140,20),this.loseCountLabel.setTranslationParameter("v",0),this.add(this.loseCountLabel)},n.alignComponents=function(){Phaser.Display.Align.In.LeftCenter(this.winCountLabel,this),Phaser.Display.Align.In.RightCenter(this.loseCountLabel,this)},n.updateWinLoseCount=function(e,t){this.winCountLabel.setTranslationParameter("v",e),this.loseCountLabel.setTranslationParameter("v",t)},t}(Phaser.GameObjects.Container),dd=Kh,fd=jh,pd=od,gd=function(e){function t(t){var n;return(n=e.call(this,t)||this).winRateLabel=void 0,n.loseRateLabel=void 0,n.isPlayingAnimation=!1,n.updatedRoundedWinPercentage=-1,n.updatedRoundedLosePercentage=-1,n.setSize(Jh,$h),n.createWinRateLabel(),n.createLoseRateLabel(),n.alignComponents(),n}(0,p.Z)(t,e);var n=t.prototype;return n.createWinRateLabel=function(){this.winRateLabel=this.scene.make.bitmapText({font:Fo.Z.PRIMARY.KEY,size:this.scene.fontSize(pd),text:"67%",origin:{x:0,y:.5}}).setTint(dd),this.winRateLabel.setIgnoreLanguage(),this.add(this.winRateLabel)},n.createLoseRateLabel=function(){this.loseRateLabel=this.scene.make.bitmapText({font:Fo.Z.PRIMARY.KEY,size:this.scene.fontSize(pd),text:"33%",origin:{x:1,y:.5}}).setTint(fd),this.loseRateLabel.setIgnoreLanguage(),this.add(this.loseRateLabel)},n.alignComponents=function(){Phaser.Display.Align.In.LeftCenter(this.winRateLabel,this),Phaser.Display.Align.In.RightCenter(this.loseRateLabel,this)},n.getRoundedWinLosePercentage=function(e,t){if(0===e&&0===t)return{win:0,lose:0};var n=Math.round(100*e);return{win:n,lose:100-n}},n.updateWinLoseRate=function(e,t){var n=e+t,i=n<=0?0:e/n,a=n<=0?0:t/n,r=this.getRoundedWinLosePercentage(i,a),s=r.win,o=r.lose;this.winRateLabel.setText(s+"%"),this.loseRateLabel.setText(o+"%"),this.updatedRoundedWinPercentage=s,this.updatedRoundedLosePercentage=o},n.initAnimation=function(){this.isPlayingAnimation||(this.winRateLabel.setText("0%"),this.loseRateLabel.setText("0%"))},n.playAnimation=function(){var e=this;this.isPlayingAnimation||(this.isPlayingAnimation=!0,-1!==this.updatedRoundedWinPercentage&&-1!==this.updatedRoundedLosePercentage?(this.scene.tweens.addCounter({from:0,to:this.updatedRoundedWinPercentage,ease:nd,duration:td,onUpdate:function(t){var n=Math.round(t.getValue());e.winRateLabel.setText(n+"%")},onComplete:function(){e.isPlayingAnimation=!1}}),this.scene.tweens.addCounter({from:0,to:this.updatedRoundedLosePercentage,ease:nd,duration:td,onUpdate:function(t){var n=Math.round(t.getValue());e.loseRateLabel.setText(n+"%")}})):this.isPlayingAnimation=!1)},t}(Phaser.GameObjects.Container),md=function(e){function t(t){var n;return(n=e.call(this,t)||this).countLabel=void 0,n.rateLabel=void 0,n.barChart=void 0,n.setSize(Jh,ed),n.createCountLabel(),n.createRateLabel(),n.createBarChart(),n.alignComponents(),n}(0,p.Z)(t,e);var n=t.prototype;return n.setWinLoseCount=function(e,t){this.countLabel.updateWinLoseCount(e,t),this.barChart.updateWinLoseCount(e,t),this.rateLabel.updateWinLoseRate(e,t)},n.initAnimation=function(){this.barChart.initAnimation(),this.rateLabel.initAnimation()},n.playAnimation=function(){this.barChart.playAnimation(),this.rateLabel.playAnimation()},n.createCountLabel=function(){this.countLabel=new hd(this.scene),this.add(this.countLabel)},n.createRateLabel=function(){this.rateLabel=new gd(this.scene),this.add(this.rateLabel)},n.createBarChart=function(){this.barChart=new sd(this.scene),this.add(this.barChart)},n.alignComponents=function(){Phaser.Display.Align.In.TopCenter(this.countLabel,this),Phaser.Display.Align.In.Center(this.barChart,this),Phaser.Display.Align.In.BottomCenter(this.rateLabel,this)},n.addBackground=function(){var e="win-lose-chart-background";if(!this.scene.textures.exists(e)){var t=this.width,n=this.height,i=this.scene.add.graphics();i.fillStyle(65280,.2),i.fillRect(0,0,t,n),i.generateTexture(e,t,n),i.destroy()}var a=this.scene.add.image(0,0,e);this.add(a)},t}(Phaser.GameObjects.Container),vd=An.Z.GAMEPLAY_DEFAULT.FRAME,yd=function(e){function t(t){var n;return(n=e.call(this,t)||this).chart=void 0,n.tableStats=void 0,n.chart=new md(t),n.tableStats=new Vh(t),n.tableStats.setTableSize(6,2,[135,125],60,[-1,1]),n.tableStats.drawRowBorder(),n.setSize(340,n.chart.height+n.tableStats.height),n.add([n.chart,n.tableStats]),Phaser.Display.Align.In.TopCenter(n.chart,(0,za.Z)(n)),Phaser.Display.Align.To.BottomCenter(n.tableStats,n.chart,15),t.add.existing((0,za.Z)(n)),n}return(0,p.Z)(t,e),t.prototype.setStats=function(e){var t=e.totalGame,n=e.wins,i=e.winsWithoutUndo,a=e.bestScore,r=e.averageScore,s=e.bestWinningTime,o=e.averageWinningTime;this.chart.setWinLoseCount(n,t-n),this.tableStats.setTableData([["totalGame",""+t,vd.STATS_FLASH],["winsWithoutUndo",""+i,vd.STATS_CROWN],["bestScore",""+a,vd.STATS_MEDAL_START],["avgScore",""+Math.round(r),vd.STATS_STAR],["bestWinningTime",""+(0,nr.F0)(s,!1),vd.STATS_CUP],["avgWinningTime",""+(0,nr.F0)(o,!1),vd.STATS_TIMER]])},t}(Phaser.GameObjects.Container),bd=yd,Ad=An.Z.GAMEPLAY_DEFAULT.KEY,Ed=function(e){function t(t){var n;return(n=e.call(this,t)||this).bg=void 0,n.tab=void 0,n.gameStats=void 0,n.normalStat=void 0,n.createBackground(),n.createTitle(),n.createGameStats(),n.createCloseButton(),t.add.existing((0,za.Z)(n)),n}(0,p.Z)(t,e);var n=t.prototype;return n.createBackground=function(){var e=new Ol.Z(this.scene,0,0,340,500,20,16579837),t=this.scene.add.line(0,0,0,0,340,0,3774208,1);t.setLineWidth(.6),this.add([e,t]),this.bg=e,this.setSize(e.width,e.height),this.bg.setInteractive(),Phaser.Display.Align.In.TopCenter(t,this,0,-50)},n.createTitle=function(){var e=this.scene.make.bitmapText({font:Fo.Z.BOLD.KEY,size:this.scene.fontSize(20),text:"statistics",origin:{x:.5,y:.5}});e.setMaxSize(270,40),e.setTint(1907997),this.add(e),Phaser.Display.Align.In.TopCenter(e,this,0,-12)},n.createGameStats=function(){var e=this.scene.add.container(0,0);this.normalStat=new bd(this.scene),e.setSize(this.normalStat.width,this.normalStat.height),e.add(this.normalStat),this.add(e),Phaser.Display.Align.In.TopCenter(e,this,0,-65),this.gameStats=e},n.createCloseButton=function(){var e=this,t=new El.Z(this.scene,40,40);t.setName("Close"),t.onClick=function(){e.scene.screen.close($a.o4.GAME_STATS_SCREEN)};var n=this.scene.add.image(0,0,Ad,"ic_close_gray");n.setWorldSize(24,24),n.setTint(8750210),t.add(n),Phaser.Display.Align.In.TopRight(t,this.bg,-4,-4),this.add([t])},n.addMask=function(){var e=this,t=this.scene.make.graphics({fillStyle:{color:255,alpha:0},visible:!1});t.setName("MaskGraphics");var n=this.width,i=this.height;t.fillRoundedRect(-(n-10)/2,-i/2,n-10,i,0),this.gameStats.setMask(t.createGeometryMask()),this.scene.events.on("update",(function(){var n=e.getWorldPosition(),i=n.x,a=n.y;t.setPosition(i,a)}))},t}(Phaser.GameObjects.Container),Sd=Ed,Td=function(e){function t(t,n,i,a){var r;return(r=e.call(this,t,n,i,a)||this).scene=void 0,r.slideInAnimation=void 0,r.fadeInAnimation=void 0,r.fadeOutAnimation=void 0,r.gameStatsContainer=void 0,r.scene=t,r.setDepth($a.Ks.POPUP),r.gameStatsContainer=new Sd(t),r.add(r.gameStatsContainer),r.background.setTint(1315862),r.background.setAlpha(.5),r.background.setInteractive(),r.gameStatsContainer.setInteractive(),r}(0,p.Z)(t,e);var n=t.prototype;return n.open=function(){e.prototype.open.call(this),this.updateStatistics(),this.runOpenAnimation()},n.updateStatistics=function(){var e=this.gameStatsContainer.normalStat,t=this.scene.gameStats.normal;e.setStats(t)},n.close=function(){this.runCloseAnimation()},n.runOpenAnimation=function(){var e,t,n=this;if(null==(e=this.slideInAnimation)||null==(t=e.tween)||!t.isPlaying()){this.scene.audio.playSound(er.Z.POPUP_SHOW);var a=[this.gameStatsContainer.normalStat];a.forEach((function(e){e.chart.initAnimation()}));var s=this.scene.ads.getBannerHeight();this.slideInAnimation||(this.slideInAnimation=new To.Z({targets:[this.gameStatsContainer],props:{y:{from:this.height/2,to:this.height/2-this.gameStatsContainer.height/2-20-s}},onComplete:function(){n.background.once(Phaser.Input.Events.POINTER_DOWN,(function(){return n.scene.screen.close($a.o4.GAME_STATS_SCREEN)}))},duration:300})),this.fadeInAnimation||(this.fadeInAnimation=new Hc.Z({targets:[this],duration:300,ease:Phaser.Math.Easing.Sine.InOut,onComplete:function(){var e=(0,i.Z)(r().mark((function e(){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a.forEach((function(e){e.chart.playAnimation()}));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()})),this.slideInAnimation.play(),this.fadeInAnimation.play()}},n.runCloseAnimation=function(){var t,n,i=this;null!=(t=this.fadeOutAnimation)&&null!=(n=t.tween)&&n.isPlaying()||(this.scene.audio.playSound(er.Z.POPUP_OFF),this.fadeOutAnimation||(this.fadeOutAnimation=new Sh.Z({targets:[this],props:{alpha:0},duration:300,onComplete:function(){e.prototype.close.call(i)}})),this.fadeOutAnimation.play())},t}(GameCore.Screen),Cd=Td,wd={STATUS:{READY:"ready",RUNNING:"running",STOPPED:"stopped"}},Id=wd.STATUS,xd=function(){function e(e){this.state=void 0,this.scene=void 0,this.scene=e}var t=e.prototype;return t.init=function(){this.setState(Id.READY)},t.start=function(){this.isRunning()||this.setState(Id.RUNNING)},t.stop=function(){this.isRunning()&&this.setState(Id.STOPPED)},t.setState=function(e){this.state=e},t.isReady=function(){return this.state===Id.READY},t.isRunning=function(){return this.state===Id.RUNNING},t.isStopped=function(){return this.state===Id.STOPPED},e}(),Pd=xd,kd=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n.setBackground=function(){var e=n.scene.theme.getCurrentThemeConfig().backgroundKey;if(n.scene.load.off("filecomplete-image-"+e,n.setBackground),n.scene.textures.exists(e))return n.scene.setBackground(e),n.scene.events.emit(no.BACKGROUND_CHANGED,e),void n.updateBgApp();n.scene.load.once("filecomplete-image-"+e,n.setBackground)},n.updateCardStyle=function(){var e=n.scene.theme.getCurrentThemeConfig().cardFaceKey;n.scene.load.off("filecomplete-json-"+e,n.updateCardStyle),n.scene.textures.exists(e)?n.scene.gameplay.boardGame.deck.cards.forEach((function(e){return e.updateCardStyle()})):n.scene.load.once("filecomplete-json-"+e,n.updateCardStyle)},n.scene=t,n.setBackground(),n}(0,p.Z)(t,e);var n=t.prototype;return n.updateBgApp=function(){var e=this.scene.theme.getCurrentThemeResources();En.Z.updateAppBg(e.backgroundFile)},n.changeBackground=function(e){this.scene.theme.changeBackground(e),this.setBackground(),this.scene.analytics.event(bn._.THEME_CHANGED,{theme_type:"background",theme_idx:e})},n.changeCardFace=function(e){this.scene.theme.changeCardFace(e),this.updateCardStyle(),this.scene.analytics.event(bn._.THEME_CHANGED,{theme_type:"card_face",theme_idx:e})},n.changeCardBack=function(e){this.scene.theme.changeCardBack(e),this.updateCardStyle(),this.scene.analytics.event(bn._.THEME_CHANGED,{theme_type:"card_back",theme_idx:e})},n.loadAllCardAtlas=function(){var e=this;this.scene.theme.getCardStyleAtlasConfigs().forEach((function(t){var n=t.key,i=t.textureURL,a=t.atlasURL;e.scene.textures.exists(n)||e.scene.load.atlas(n,i,a)})),this.scene.load.start()},n.loadAllBackgrounds=function(){var e=this;this.scene.theme.getBackgroundConfigs().forEach((function(t){var n=t.key,i=t.url;e.scene.textures.exists(n)||e.scene.load.image(n,i)})),this.scene.load.start()},t}(Pd),_d=kd,Od=function(e){function t(t,n,i,a,r){var s;return void 0===r&&(r=10),(s=e.call(this,t)||this).borderRadius=void 0,s.numOfTabs=void 0,s.tabs=void 0,s.currentIdx=void 0,s.callback=void 0,s.borderRadius=r,s.numOfTabs=a,s.setSize(n,i),s.createBg(),s.createTabs(),s.listenInput(),t.add.existing((0,za.Z)(s)),s}(0,p.Z)(t,e);var n=t.prototype;return n.addLabels=function(e){this.add(e);var t=this.width/this.numOfTabs;this.placeCenter(e,0,0,t+1)},n.createBg=function(){var e=new Ol.Z(this.scene,0,0,this.width+this.numOfTabs+1,this.height+2,this.borderRadius,this.themeColor);this.add([e])},n.createTabs=function(){this.tabs=[];for(var e=this.width/this.numOfTabs,t=0;t<this.numOfTabs;t++){var n=0==t?{tl:this.borderRadius,bl:this.borderRadius}:t==this.numOfTabs-1?{tr:this.borderRadius,br:this.borderRadius}:0,i=new Ol.Z(this.scene,0,0,e,this.height,n,this.backgroundColor);0==t&&i.setAlpha(0),this.tabs.push(i)}this.add(this.tabs),this.placeCenter(this.tabs,0,0,e+1)},n.placeCenter=function(e,t,n,i,a){void 0===a&&(a=0);for(var r=t-(this.numOfTabs/2-.5-a)*i,s=0;s<e.length;s++)e[s].setPosition(r+s*i,n)},n.getIdx=function(e){var t=this.width/this.tabs.length;return Math.floor((e+this.width/2)/t)},n.listenInput=function(){var e=this,t=!1;this.setInteractive({useHandCursor:!0}).on(Phaser.Input.Events.POINTER_DOWN,(function(){t=!0})).on(Phaser.Input.Events.POINTER_OUT,(function(){t=!1})).on(Phaser.Input.Events.POINTER_UP,(function(n){if(t){var i=e.getLocalPoint(n.worldX,n.worldY).x;e.selectTab(e.getIdx(i))}t=!1}))},n.selectTab=function(e){if(e!=this.currentIdx){this.currentIdx=e,this.callback&&this.callback(e);for(var t=0;t<this.tabs.length;t++)this.scene.tweens.add({targets:this.tabs[t],alpha:t!==e?1:0,duration:200,ease:Phaser.Math.Easing.Sine.InOut})}},(0,de.Z)(t,[{key:"themeColor",get:function(){return 3774208}},{key:"backgroundColor",get:function(){return 16579837}}]),t}(Phaser.GameObjects.Container),Rd=Od,Ld=function(e){function t(t,n,i,a,r){var s;(s=e.call(this,t,n,i)||this).border=void 0,s.border1=void 0,s.icon=void 0;var o=s.scene.add.image(0,0,a,r);return o.setWorldSize(n,i),s.icon=o,s.add([o]),s.createBorder1(),s.createBorder(),s}(0,p.Z)(t,e);var n=t.prototype;return n.createBorder1=function(){var e=this.width+4,t=this.height+4,n="border "+e+"_"+t;if(!this.scene.textures.exists(n)){var i=this.scene.make.renderTexture({width:2*e,height:2*t},!1),a=new Ol.Z(this.scene,0,0,2*e,2*t,20,16579837,0).setOrigin(0,0);a.setStrokeStyle(8,16579837),i.draw(a,0,0),i.saveTexture(n)}var r=this.scene.add.image(0,0,n);r.setWorldSize(e,t),this.add(r),this.border1=r},n.createBorder=function(){var e=this.width+2,t=this.height+2,n="border "+e+"_"+t;if(!this.scene.textures.exists(n)){var i=this.scene.make.renderTexture({width:2*e+4,height:2*t+4},!1),a=new Ol.Z(this.scene,0,0,2*e,2*t,20,16579837,0).setOrigin(0,0);a.setStrokeStyle(4,3774208),i.draw(a,2,2),i.saveTexture(n)}var r=this.scene.add.image(0,0,n);r.setWorldSize(e,t),this.add(r),r.kill(),this.border=r},n.showBorder=function(){this.border.revive()},n.hideBorder=function(){this.border.kill()},n.setCropByViewport=function(e){this.icon.setCropByViewport(e),this.border.setCropByViewport(e),this.border1.setCropByViewport(e)},t}(El.Z),Dd=Ld,Bd=function(e){function t(t,n,i,a,r,s){var o;return void 0===r&&(r=0),void 0===s&&(s=0),(o=e.call(this,t)||this).margin=void 0,o.viewContainer=void 0,o.items=void 0,o.currentItemInteractive=void 0,o.itemsLength=void 0,o.currentX=void 0,o.offsetLeft=void 0,o.offsetRight=void 0,o.pointerDownX=void 0,o.pointerDownY=void 0,o.lastPointerX=void 0,o.canClickItem=void 0,o.pointerDown=void 0,o.handlePointerDown=function(e){var t=e.worldX,n=e.worldY;o.pointerDown=!0,o.pointerDownX=e.worldX,o.pointerDownY=e.worldY,o.lastPointerX=e.worldX,o.canClickItem=!0,o.items.forEach((function(i){var a=i.item,r=i.onClick;r&&a.getBounds().contains(t,n)&&(a.emit(Phaser.Input.Events.GAMEOBJECT_POINTER_DOWN,e),o.currentItemInteractive={item:a,onClick:r})}))},o.handlePointerMove=function(e){if(o.pointerDown){var t=e.worldX,n=e.worldY;if(Phaser.Math.Distance.Between(o.pointerDownX,o.pointerDownY,t,n)>15&&(o.canClickItem=!1),!o.canClickItem){o.viewContainer.x+=t-o.lastPointerX,o.viewContainer.x>0&&(o.viewContainer.x=0);var i=o.itemsLength-o.width+o.offsetLeft+o.offsetRight;o.viewContainer.x<-i&&(o.viewContainer.x=-i)}if(o.currentItemInteractive){var a=o.currentItemInteractive,r=a.item;a.onClick&&!r.getBounds().contains(t,n)&&(r.emit(Phaser.Input.Events.GAMEOBJECT_POINTER_OUT,e),o.currentItemInteractive=void 0)}o.items.forEach((function(i){var a=i.item,r=i.onClick,s=i.onUpdate;r&&a.getBounds().contains(t,n)&&(a.emit(Phaser.Input.Events.GAMEOBJECT_POINTER_MOVE,e),o.currentItemInteractive={item:a,onClick:r}),s&&s()})),o.lastPointerX=t}},o.handlePointerUp=function(e){o.pointerDown=!1;var t=e.worldX,n=e.worldY;o.items.forEach((function(i){var a=i.item,r=i.onClick;r&&a.getBounds().contains(t,n)&&(a.emit(Phaser.Input.Events.GAMEOBJECT_POINTER_UP,e),o.canClickItem&&GameCore.Utils.Valid.isFunction(r)&&r())})),o.currentItemInteractive=void 0},o.handlePointerOut=function(e){if(o.pointerDown=!1,o.currentItemInteractive){var t=o.currentItemInteractive,n=t.item;t.onClick&&(n.emit(Phaser.Input.Events.GAMEOBJECT_POINTER_OUT,e),o.currentItemInteractive=void 0)}o.currentItemInteractive=void 0},o.setSize(n,i),o.margin=a,o.items=[],o.canClickItem=!0,o.pointerDown=!1,o.itemsLength=0,o.offsetLeft=r,o.offsetRight=s,o.currentX=-n/2+r,o.viewContainer=t.make.container({}),o.add(o.viewContainer),o.setInteractive(),o.listenEvents(),o}(0,p.Z)(t,e);var n=t.prototype;return n.addDebug=function(){var e=new Ol.Z(this.scene,0,0,this.width,this.height,0,0);this.add(e)},n.listenEvents=function(){this.on(Phaser.Input.Events.GAMEOBJECT_POINTER_DOWN,this.handlePointerDown),this.on(Phaser.Input.Events.GAMEOBJECT_POINTER_MOVE,this.handlePointerMove),this.on(Phaser.Input.Events.GAMEOBJECT_POINTER_UP,this.handlePointerUp),this.on(Phaser.Input.Events.GAMEOBJECT_POINTER_OUT,this.handlePointerOut)},n.addItem=function(e,t,n){this.items.push({item:e,onClick:t,onUpdate:n}),this.viewContainer.add(e);var i=this.currentX+e.width/2+this.margin;e.x=i,this.itemsLength+=e.width+2*this.margin,this.currentX=i+e.width/2+this.margin},n.updateChildren=function(){this.items.forEach((function(e){e.item,e.onClick;var t=e.onUpdate;t&&t()}))},t}(Phaser.GameObjects.Container),Nd=Bd,Md=An.Z.GAMEPLAY_DEFAULT.KEY,Gd=An.Z.THEME_PREVIEW,Fd=0,Zd=40,Ud=375,Hd=180,Wd=10,zd=20,Yd=20,Vd=function(e){function t(t){var n;return(n=e.call(this,t)||this).bg=void 0,n.tab=void 0,n.chooseContainers=void 0,n.currentIdx=0,n.backgroundPreView=void 0,n.cardFacePreView=void 0,n.cardBackPreview=void 0,n.createBackground(),n.createTitle(),n.createTab(),n.createChooseContainer(),n.createCloseButton(),t.add.existing((0,za.Z)(n)),n}(0,p.Z)(t,e);var n=t.prototype;return n.updateContainer=function(){this.chooseContainers[this.tab.currentIdx||0].updateChildren()},n.createBackground=function(){var e=new Ol.Z(this.scene,0,0,375,250,{tl:20,tr:20,bl:20,br:20},16579837),t=this.scene.add.line(0,0,0,0,e.width-40,0,3774208);t.setLineWidth(.5),Phaser.Display.Align.In.TopCenter(t,e,0,-90),this.add([e,t]),this.bg=e,this.setSize(e.width,e.height),this.bg.setInteractive()},n.createTitle=function(){var e=this.scene.make.bitmapText({font:Fo.Z.BOLD.KEY,size:this.scene.fontSize(20),text:"theme",origin:{x:.5,y:.5}});e.setMaxSize(300,40),e.setTint(1907997),this.add(e),Phaser.Display.Align.In.TopCenter(e,this,0,-12)},n.createTab=function(){var e,t=this;this.tab=new Rd(this.scene,303,30,3),this.add(this.tab),Phaser.Display.Align.In.TopCenter(this.tab,this,0,-45);var n=Me()(e=["background","cardFace","cardBack"]).call(e,(function(e,n){var i=t.scene.make.bitmapText({font:Fo.Z.PRIMARY.KEY,size:t.scene.fontSize(14),text:e,origin:{x:.5,y:.5}});return i.setCenterAlign(),i.setMaxSize(98,30,!0),n>0&&i.setTint(3774208),i}));this.tab.addLabels(n),this.tab.callback=function(e){n.forEach((function(t,n){return t.setTint(e==n?16579837:3774208)}));var i=t.currentIdx<e?375:-375,a=t.currentIdx;t.scene.tweens.add({targets:t.chooseContainers[t.currentIdx],x:t.currentIdx<e?-375:375,alpha:0,duration:200,onUpdate:function(){t.chooseContainers[a].updateChildren()},ease:Phaser.Math.Easing.Sine.InOut}),t.scene.tweens.add({targets:t.chooseContainers[e],x:{from:i,to:0},alpha:1,duration:200,onUpdate:function(){t.chooseContainers[e].updateChildren()},ease:Phaser.Math.Easing.Sine.InOut}),t.currentIdx=e}},n.createChooseContainer=function(){this.chooseContainers=[],this.createBackgroundChoose(),this.createCardFaceChoose(),this.createCardBackChoose(),this.chooseContainers[1].setAlpha(0),this.chooseContainers[2].setAlpha(0)},n.createBackgroundChoose=function(){var e=this,t=new Nd(this.scene,Ud,Hd,Wd,zd,Yd);t.setPosition(Fd,Zd),this.add(t);for(var n=[],i=this.scene.theme.getThemePreview().Background,a=0;a<5;a++){var r=i[a]||"blank",s=new Dd(this.scene,72,112,Gd.KEY,r);s.name="Background",n.push(s)}n.forEach((function(a,r){r<i.length&&(a.onClick=function(){},a.disableInteractive()),t.addItem(a,(function(){n.forEach((function(e){return e.hideBorder()})),a.showBorder(),e.scene instanceof hm&&e.scene.themeHandler.changeBackground(r)}),(function(){var t=e.getViewport();a.setCropByViewport(t)}))})),this.chooseContainers.push(t),this.backgroundPreView=n},n.createCardFaceChoose=function(){var e=this,t=new Nd(this.scene,Ud,Hd,Wd,zd,Yd);t.setPosition(Fd,Zd),this.add(t);for(var n=[],i=this.scene.theme.getThemePreview().CardFace,a=0;a<3;a++){var r=i[a]||"blank",s=new Dd(this.scene,108,112,Gd.KEY,r);s.name="CardFace",n.push(s)}n.forEach((function(a,r){r<i.length&&(a.onClick=function(){},a.disableInteractive(),t.addItem(a,(function(){n.forEach((function(e){return e.hideBorder()})),a.showBorder(),e.scene instanceof hm&&e.scene.themeHandler.changeCardFace(r)}),(function(){var t=e.getViewport();a.setCropByViewport(t)})))})),this.chooseContainers.push(t),this.cardFacePreView=n},n.createCardBackChoose=function(){var e=this,t=new Nd(this.scene,Ud,Hd,Wd,zd,Yd);t.setPosition(Fd,Zd),this.add(t);for(var n=[],i=this.scene.theme.getThemePreview().CardBack,a=0;a<5;a++){var r=i[a]||"blank",s=new Dd(this.scene,72,112,Gd.KEY,r);s.name="CardBack",n.push(s)}n.forEach((function(a,r){r<i.length&&(a.onClick=function(){},a.disableInteractive(),t.addItem(a,(function(){n.forEach((function(e){return e.hideBorder()})),a.showBorder(),e.scene instanceof hm&&e.scene.themeHandler.changeCardBack(r)}),(function(){var t=e.getViewport();a.setCropByViewport(t)})))})),this.chooseContainers.push(t),this.cardBackPreview=n},n.createCloseButton=function(){var e=this,t=new El.Z(this.scene,40,40);t.setName("Close"),t.onClick=function(){e.scene.screen.close($a.o4.THEME_SCREEN)};var n=this.scene.add.image(0,0,Md,"ic_close_gray");n.setWorldSize(24,24),n.setTint(8750210),t.add(n),Phaser.Display.Align.In.TopRight(t,this.bg,-4,-4),this.add([t])},n.getViewport=function(){var e=this.getWorldPosition();return{x:e.x,y:e.y+Zd,width:Ud-zd-Yd,height:Hd}},t}(Phaser.GameObjects.Container),Kd=Vd,jd=function(e){function t(t,n,i,a){var r;return(r=e.call(this,t,n,i,a)||this).scene=void 0,r.slideInAnimation=void 0,r.fadeInAnimation=void 0,r.fadeOutAnimation=void 0,r.themeContainer=void 0,r.scene=t,r.setDepth($a.Ks.POPUP),r.themeContainer=new Kd(t),r.add(r.themeContainer),r.background.setTint(1315862),r.background.setAlpha(.3),r}(0,p.Z)(t,e);var n=t.prototype;return n.open=function(){var t=this;e.prototype.open.call(this),this.themeContainer.setAlpha(1),this.scene.themeHandler.loadAllBackgrounds(),this.scene.themeHandler.loadAllCardAtlas(),this.updateSelected(),this.background.setInteractive(),this.zone.once(Phaser.Input.Events.POINTER_DOWN,(function(){return t.scene.screen.close($a.o4.THEME_SCREEN)})),this.themeContainer.updateContainer(),this.runOpenAnimation()},n.updateSelected=function(){var e=this.scene.theme.getCurrentIdxConfig(),t=e.backgroundIdx,n=e.cardFaceIdx,i=e.cardBackIdx;this.themeContainer.backgroundPreView[t].showBorder(),this.themeContainer.cardFacePreView[n].showBorder(),this.themeContainer.cardBackPreview[i].showBorder()},n.close=function(){this.runCloseAnimation()},n.runOpenAnimation=function(){var e,t,n=this.scene.ads.getBannerHeight();null!=(e=this.slideInAnimation)&&null!=(t=e.tween)&&t.isPlaying()||(this.scene.audio.playSound(er.Z.POPUP_SHOW),this.slideInAnimation||(this.slideInAnimation=new To.Z({targets:[this.themeContainer],props:{y:{from:this.height/2,to:this.height/2-this.themeContainer.height/2-n-10,ease:Phaser.Math.Easing.Sine.Out}},duration:300})),this.fadeInAnimation||(this.fadeInAnimation=new Hc.Z({ease:Phaser.Math.Easing.Sine.InOut,targets:[this],duration:300})),this.slideInAnimation.play(),this.fadeInAnimation.play())},n.runCloseAnimation=function(){var t,n,i=this;null!=(t=this.fadeOutAnimation)&&null!=(n=t.tween)&&n.isPlaying()||(this.scene.audio.playSound(er.Z.POPUP_OFF),this.fadeOutAnimation||(this.fadeOutAnimation=new Sh.Z({targets:[this],props:{alpha:0},duration:300,onComplete:function(){e.prototype.close.call(i)}})),this.fadeOutAnimation.play())},t}(GameCore.Screen),Xd=jd,Jd=n(680),qd=function(e){function t(t,n,i,a){var r;return(r=e.call(this,t,n,i,a)||this).slideInAnimation=void 0,r.fadeOutAnimation=void 0,r.howToPlayContainer=void 0,r.setDepth($a.Ks.POPUP),r.howToPlayContainer=new Jd.Z(t),r.add(r.howToPlayContainer),r.background.setTint(1315862),r.background.setAlpha(.5),r.background.setInteractive(),r}(0,p.Z)(t,e);var n=t.prototype;return n.open=function(){e.prototype.open.call(this),this.howToPlayContainer.selectStep(0),this.scene.analytics.event(bn._.TUTORIAL_BEGIN),this.runOpenAnimation()},n.close=function(){this.runCloseAnimation()},n.runOpenAnimation=function(){var e,t;null!=(e=this.slideInAnimation)&&null!=(t=e.tween)&&t.isPlaying()||(this.scene.audio.playSound(er.Z.POPUP_SHOW),this.slideInAnimation||(this.slideInAnimation=new Hc.Z({targets:[this],duration:300,ease:Phaser.Math.Easing.Sine.InOut})),this.slideInAnimation.play())},n.runCloseAnimation=function(){var t,n,i=this;null!=(t=this.fadeOutAnimation)&&null!=(n=t.tween)&&n.isPlaying()||(this.scene.audio.playSound(er.Z.POPUP_OFF),this.fadeOutAnimation||(this.fadeOutAnimation=new Sh.Z({targets:[this],props:{alpha:0},duration:300,onComplete:function(){e.prototype.close.call(i)}})),this.fadeOutAnimation.play())},t}(GameCore.Screen),Qd=qd,$d=function(e){function t(t){var n;return(n=e.call(this,t)||this).icon=void 0,n.label=void 0,n.value=void 0,n.setSize(271,24),n.createIcon(),n.createLabel(),n.createValue(),t.add.existing((0,za.Z)(n)),n}(0,p.Z)(t,e);var n=t.prototype;return n.setIcon=function(e,t){this.icon.setTexture(e,t),this.icon.setWorldSize(24,24)},n.setLabel=function(e){this.label.setText(e)},n.setValue=function(e){this.value.setText(e)},n.createIcon=function(){var e=this.scene.add.image(0,0,"");e.setWorldSize(24,24),e.setTint(16579837),this.add(e),this.icon=e},n.createLabel=function(){var e=this.scene.make.bitmapText({font:Fo.Z.PRIMARY.KEY,size:this.scene.fontSize(16),text:"",origin:{x:0,y:.5}});e.setMaxSize(150,20,!0),e.setTint(16579837),this.add(e),this.label=e},n.createValue=function(){var e=this.scene.make.bitmapText({font:Fo.Z.BOLD.KEY,size:this.scene.fontSize(16),text:"",origin:{x:1,y:.5}});e.setIgnoreLanguage(),e.setTint(16579837),e.setRightAlign(),this.add(e),this.value=e},n.alignProperties=function(){Phaser.Display.Align.In.LeftCenter(this.icon,this),Phaser.Display.Align.To.RightCenter(this.label,this.icon,12),Phaser.Display.Align.In.RightCenter(this.value,this)},t}(Phaser.GameObjects.Container),ef=$d,tf=An.Z.GAMEPLAY_DEFAULT,nf=tf.KEY,af=tf.FRAME,rf=function(e){function t(t,n,i,a){var r;return void 0===n&&(n=8),void 0===i&&(i="newGame"),void 0===a&&(a=af.ADD_SQUARE),(r=e.call(this,t)||this).icon=void 0,r.text=void 0,r.iconTextPadding=void 0,r.labelText=void 0,r.iconFrame=void 0,r.iconTextPadding=n,r.labelText=i,r.iconFrame=a,r.createIcon(),r.createLabelText(),r.updateContainerSize(),r.alignIcon(),r.alignText(),r.text.on("textChanged",(function(){r.updateContainerSize(),r.alignIcon(),r.alignText()})),r}(0,p.Z)(t,e);var n=t.prototype;return n.getIcon=function(){return this.icon},n.getText=function(){return this.text},n.clearTint=function(){this.icon.clearTint(),this.text.clearTint()},n.setMaxSizeText=function(e,t,n,i){this.text.setMaxSize(e,t,n,i)},n.createIcon=function(){this.icon=this.scene.add.image(0,0,nf,this.iconFrame),this.icon.setWorldSize(20,20),this.icon.setTint(43282),this.add(this.icon)},n.alignIcon=function(){Phaser.Display.Align.In.LeftCenter(this.icon,this)},n.createLabelText=function(){this.text=this.scene.make.bitmapText({font:Fo.Z.PRIMARY.KEY,size:this.scene.fontSize(16),text:this.labelText,origin:{x:.5,y:.5}}),this.text.setMaxSize(100,30,!0,this.scene.fontSize(16)),this.text.setTint(43282),this.add(this.text)},n.alignText=function(){Phaser.Display.Align.In.RightCenter(this.text,this,0,0)},n.updateContainerSize=function(){this.setSize(this.icon.width+this.iconTextPadding+this.text.width,this.icon.height>this.text.height?this.icon.height:this.text.height)},t}(Phaser.GameObjects.Container),sf=An.Z.GAMEPLAY_DEFAULT,of=sf.KEY,cf=sf.FRAME,uf=function(e){function t(t){var n;return(n=e.call(this,t)||this).bg=void 0,n.score=void 0,n.time=void 0,n.bestTime=void 0,n.moves=void 0,n.draw=void 0,n.lines=[],n.buttons=[],n.createBackground(),n.createTitle(),n.createStats(),n.createNewGameButton(),n.createDevButtons(),t.add.existing((0,za.Z)(n)),n}(0,p.Z)(t,e);var n=t.prototype;return n.setScore=function(e){this.score.setValue(e)},n.setWinningTime=function(e){this.time.setValue(e)},n.setBestWinningTime=function(e){this.bestTime.setValue(e)},n.setMoves=function(e){this.moves.setValue(e)},n.setDraw=function(e){this.draw.setText(e)},n.createBackground=function(){this.setSize(343,374);var e=new kl(this.scene,{key:"_awesome",radius:6,border:24,width:343,height:374});this.bg=e,this.add(e)},n.createTitle=function(){var e=this.scene.make.bitmapText({font:Fo.Z.BOLD.KEY,size:this.scene.fontSize(24),text:"awesome",origin:{x:.5,y:.5}});e.setMaxSize(300,35),e.setTint(16777215),this.add(e),Phaser.Display.Align.In.TopCenter(e,this,0,-20);var t=this.scene.make.bitmapText({font:Fo.Z.PRIMARY.KEY,size:this.scene.fontSize(16),text:"standardMode",origin:{x:.5,y:.5}});t.setMaxSize(300,20),t.setTint(16777215),this.draw=t,this.add([t]),Phaser.Display.Align.To.BottomCenter(t,e,0,8)},n.createStats=function(){var e=[],t=new ef(this.scene);t.setIcon(of,cf.MEDAL_STAR),t.setLabel("score"),t.setValue("687"),this.score=t,e.push(t);var n=new ef(this.scene);n.setIcon(of,cf.ARROW_SWAP_HORIZONTAL),n.setLabel("moves"),n.setValue("798"),this.moves=n,e.push(n);var i=new ef(this.scene);i.setIcon(of,cf.TIMER),i.setLabel("time"),i.setValue("09:48"),this.time=i,e.push(i);var a=new ef(this.scene);a.setIcon(of,cf.CUP),a.setLabel("bestTime"),a.setValue("05:30"),this.bestTime=a,e.push(a),this.add(e);for(var r=0;r<e.length;r++){var s=e[r];if(s.alignProperties(),Phaser.Display.Align.In.TopCenter(s,this,0,-(50*r+112)),r==e.length-1)break;var o=this.scene.add.line(0,0,0,0,271,0,16579837,.2);this.add(o),this.lines.push(o),Phaser.Display.Align.To.BottomCenter(o,s,0,12)}},n.createNewGameButton=function(){var e=this,t=new Th.Z(this.scene,143.5,48,16,16777215);t.onClick=(0,i.Z)(r().mark((function t(){return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.scene.screen.close($a.o4.VICTORY_SCREEN),!(e.scene instanceof hm)){t.next=6;break}return t.next=4,e.scene.gameplay.handleShowInterstitialAd();case 4:return t.next=6,e.scene.handlePlaySingle();case 6:case"end":return t.stop()}}),t)}))),t.setName("NewGame");var n=new rf(this.scene);t.add(n).setSize(143.5,48),this.add([t]),this.buttons.push(t),Phaser.Display.Align.In.BottomCenter(t,this,0,-18),new yc.Z({targets:[t],duration:1e3,props:{scale:"*=1.05"}}).play()},n.createDevButtons=function(){GameCore.Utils.Valid.isDebugger()&&this.createCloseButton()},n.createCloseButton=function(){var e=this,t=new El.Z(this.scene,40,40),n=this.scene.add.image(0,0,of,cf.IC_BG_OFF);n.setWorldSize(40,40);var i=this.scene.make.bitmapText({font:Fo.Z.PRIMARY.KEY,size:this.scene.fontSize(10),text:"Close",origin:{x:.5,y:.5}});i.setCenterAlign(),t.add([n,i]),this.add(t),Phaser.Display.Align.In.BottomLeft(t,this,0,-200),t.onClick=function(){e.scene.screen.close($a.o4.VICTORY_SCREEN)}},n.hideContent=function(){[this.score,this.moves,this.time,this.bestTime].forEach((function(e){return e.setAlpha(0)})),this.lines.forEach((function(e){e.setAlpha(0),e.scaleX=0})),this.buttons.forEach((function(e){e.setAlpha(0)}))},n.runEntranceAnimationButtons=function(){var e=(0,i.Z)(r().mark((function e(){var t,n,i=this;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Me()(t=this.buttons).call(t,(function(e){return new(o())((function(t){i.scene.add.tween({targets:[e],alpha:1,duration:200,onComplete:function(){e.setDisabled(!1),t()}})}))})),e.next=3,o().all(n);case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.runEntranceAnimationRows=function(){var e=(0,i.Z)(r().mark((function e(){var t,n,i=this;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[this.score,this.moves,this.time,this.bestTime],200,n=Me()(t).call(t,(function(e,t){return new(o())((function(n){i.scene.add.tween({targets:[e],duration:200,delay:200*t/2,ease:Phaser.Math.Easing.Sine.Out,props:{alpha:{from:0,to:1},y:{from:e.y+e.height/2,to:e.y}},onComplete:n})}))})),e.next=5,o().all(n);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.runEntranceAnimationLines=function(){var e=(0,i.Z)(r().mark((function e(){var t,n,i=this;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return 200,n=Me()(t=this.lines).call(t,(function(e,t){return new(o())((function(n){i.scene.add.tween({targets:[e],duration:200,delay:200*t/2,props:{alpha:{from:0,to:1},scaleX:{from:0,to:1}},onComplete:n})}))})),e.next=4,o().all(n);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.runEntranceAnimationRowsLines=function(){var e=(0,i.Z)(r().mark((function e(){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o().all([this.runEntranceAnimationRows(),this.runEntranceAnimationLines()]);case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.runEntranceAnimation=function(){var e=(0,i.Z)(r().mark((function e(){var t;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.runEntranceAnimationRowsLines();case 2:return t=this.scene,e.next=5,t.gameplay.finishGame();case 5:return e.next=7,this.runEntranceAnimationButtons();case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),t}(Phaser.GameObjects.Container),lf=uf,hf=An.Z.GAMEPLAY_DEFAULT,df=hf.KEY,ff=hf.FRAME,pf=23.5,gf=47,mf=68.5,vf={AXIS:0,FIRST_FROM_LEFT:pf,SECOND_FROM_LEFT:gf,THIRD_FROM_LEFT:mf,FIRST_FROM_RIGHT:-pf,SECOND_FROM_RIGHT:-gf,THIRD_FROM_RIGHT:-mf},yf=function(e){function t(t){var n;return(n=e.call(this,t)||this).beamAxis=void 0,n.beamFirstFromLeft=void 0,n.beamSecondFromLeft=void 0,n.beamThirdFromLeft=void 0,n.beamFirstFromRight=void 0,n.beamSecondFromRight=void 0,n.beamThirdFromRight=void 0,n.pivot=void 0,n.setSize(375,295),n.createBeamsPivot(),n.createBeams(),n.alignBeams(),n.playAnimation(),n}(0,p.Z)(t,e);var n=t.prototype;return n.rotateBeamToAngleInDegree=function(e,t){Phaser.Actions.RotateAroundDistance([e],this.pivot,t*Math.PI/180,e.height/2+30);var n=180*Math.atan2(e.y-this.pivot.y,e.x-this.pivot.x)/Math.PI;e.angle=n+90+180},n.createBeamsPivot=function(){this.pivot=this.scene.add.image(0,0,df,ff.ADD_SQUARE),this.add(this.pivot),this.pivot.kill(),Phaser.Display.Align.In.Center(this.pivot,this,0,-this.height/2-30)},n.createBeams=function(){this.beamAxis=this.scene.add.image(0,0,df,ff.BEAM.AXIS),this.beamFirstFromLeft=this.scene.add.image(0,0,df,ff.BEAM.AXIS),this.beamSecondFromLeft=this.scene.add.image(0,0,df,ff.BEAM.AXIS),this.beamThirdFromLeft=this.scene.add.image(0,0,df,ff.BEAM.AXIS),this.beamFirstFromRight=this.scene.add.image(0,0,df,ff.BEAM.AXIS),this.beamSecondFromRight=this.scene.add.image(0,0,df,ff.BEAM.AXIS),this.beamThirdFromRight=this.scene.add.image(0,0,df,ff.BEAM.AXIS);var e=[this.beamAxis,this.beamFirstFromLeft,this.beamSecondFromLeft,this.beamThirdFromLeft,this.beamFirstFromRight,this.beamSecondFromRight,this.beamThirdFromRight];this.setWorldSizeImages(52,295,e),e.forEach((function(e){e.setAlpha(.6)})),this.add(e)},n.alignBeams=function(){this.rotateBeamToAngleInDegree(this.beamAxis,vf.AXIS),this.rotateBeamToAngleInDegree(this.beamFirstFromLeft,vf.FIRST_FROM_LEFT),this.rotateBeamToAngleInDegree(this.beamSecondFromLeft,vf.SECOND_FROM_LEFT),this.rotateBeamToAngleInDegree(this.beamThirdFromLeft,vf.THIRD_FROM_LEFT),this.rotateBeamToAngleInDegree(this.beamFirstFromRight,vf.FIRST_FROM_RIGHT),this.rotateBeamToAngleInDegree(this.beamSecondFromRight,vf.SECOND_FROM_RIGHT),this.rotateBeamToAngleInDegree(this.beamThirdFromRight,vf.THIRD_FROM_RIGHT)},n.setWorldSizeImages=function(e,t,n){n.forEach((function(n){return n.setWorldSize(e,t)}))},n.playAnimation=function(){var e=this;[this.beamFirstFromLeft,this.beamSecondFromLeft,this.beamThirdFromLeft,this.beamAxis,this.beamThirdFromRight,this.beamSecondFromRight,this.beamFirstFromRight].forEach((function(t,n){e.scene.tweens.add({targets:t,props:{alpha:{from:.2,to:.6}},duration:700,delay:700*n,repeat:-1,yoyo:!0})}))},n.addBackground=function(){var e="win-beams-background";if(!this.scene.textures.exists(e)){var t=this.width,n=this.height,i=this.scene.add.graphics();i.fillStyle(65280,.2),i.fillRect(0,0,t,n),i.generateTexture(e,t,n),i.destroy()}var a=this.scene.add.image(0,0,e);this.add(a)},t}(Phaser.GameObjects.Container),bf=n(425),Af=n.n(bf);function Ef(e,t){var n="undefined"!==typeof k()&&O()(e)||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){var n;if(!e)return;if("string"===typeof e)return Sf(e,t);var i=w()(n=Object.prototype.toString.call(e)).call(n,8,-1);"Object"===i&&e.constructor&&(i=e.constructor.name);if("Map"===i||"Set"===i)return x()(e);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return Sf(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var i=0;return function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Sf(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var Tf=An.Z.GAMEPLAY_DEFAULT,Cf=Tf.KEY,wf=Tf.FRAME,If=wf.FLAG.LEFT,xf=function(e){function t(t){var n;return(n=e.call(this,t)||this).flags=[],n.string=void 0,n.tweens=[],n.flagsData=[],n.setSize(230.5,136),n.createString(),n.createFlags(),n}(0,p.Z)(t,e);var n=t.prototype;return n.createFlags=function(){var e=this,t=this.scene.add.image(0,0,Cf,If+"1");t.setWorldSize(35.5,15.5),Phaser.Display.Align.In.TopLeft(t,this,-180.5,0);var n=this.scene.add.image(0,0,Cf,If+"2");n.setWorldSize(33.5,37),Phaser.Display.Align.In.TopLeft(n,this,-153,-2);var i=this.scene.add.image(0,0,Cf,If+"3");i.setWorldSize(32,38),Phaser.Display.Align.In.TopLeft(i,this,-124.5,-23);var a=this.scene.add.image(0,0,Cf,If+"4");a.setWorldSize(30,38.5),Phaser.Display.Align.In.TopLeft(a,this,-94,-40.25);var r=this.scene.add.image(0,0,Cf,If+"5");r.setWorldSize(28,38.5),Phaser.Display.Align.In.TopLeft(r,this,-63.235,-56);var s=this.scene.add.image(0,0,Cf,If+"6");s.setWorldSize(28.5,38.5),Phaser.Display.Align.In.TopLeft(s,this,-31.07,-68.5);var o=this.scene.add.image(0,0,Cf,If+"7");o.setWorldSize(29.5,38.5),Phaser.Display.Align.In.TopLeft(o,this,2,-79),this.flags=[t,n,i,a,r,s,o],this.add(Af()(this)),Af()(this).forEach((function(t){var n=t.x,i=t.y,a=t.angle;e.flagsData.push({x:n,y:i,angle:a})}))},n.createString=function(){this.string=this.scene.add.image(0,0,Cf,wf.STRING.LEFT),this.string.setWorldSize(215.5,96.5),this.add(this.string),Phaser.Display.Align.In.TopLeft(this.string,this)},n.addBackground=function(){var e="lb-background";if(!this.scene.textures.exists(e)){var t=this.width,n=this.height,i=this.scene.add.graphics();i.fillStyle(65280,.2),i.fillRect(0,0,t,n),i.generateTexture(e,t,n),i.destroy()}var a=this.scene.add.image(0,0,e);this.add(a)},n.playWavingAnimation=function(){var e,t=this;if(!(this.tweens.length>0)){for(var n,i=Ef(this.tweens);!(n=i()).done;){if(n.value.isPlaying())return}Me()(e=Af()(this)).call(e,(function(e,n){var i=t.flagsData[n],a=i.x,r=i.y,s=i.angle;t.scene.add.tween({targets:e,duration:300,props:{x:{from:a,to:a-2},y:{from:r,to:r-1},angle:{from:s,to:s+5}},yoyo:!0,delay:50*n,repeat:-1})}))}},n.stopWavingAnimation=function(){var e=this;if(0!==this.tweens.length){for(var t,n=Ef(this.tweens);!(t=n()).done;){t.value.stop()}this.tweens=[],Af()(this).forEach((function(t,n){e.scene.tweens.killTweensOf(t),t.x=e.flagsData[n].x,t.y=e.flagsData[n].y,t.angle=e.flagsData[n].angle}))}},t}(Phaser.GameObjects.Container);function Pf(e,t){var n="undefined"!==typeof k()&&O()(e)||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){var n;if(!e)return;if("string"===typeof e)return kf(e,t);var i=w()(n=Object.prototype.toString.call(e)).call(n,8,-1);"Object"===i&&e.constructor&&(i=e.constructor.name);if("Map"===i||"Set"===i)return x()(e);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return kf(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var i=0;return function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function kf(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var _f=An.Z.GAMEPLAY_DEFAULT,Of=_f.KEY,Rf=_f.FRAME,Lf=Rf.FLAG.RIGHT,Df=function(e){function t(t){var n;return(n=e.call(this,t)||this).flags=[],n.string=void 0,n.tweens=[],n.flagsData=[],n.setSize(218,123.5),n.createString(),n.createFlags(),n}(0,p.Z)(t,e);var n=t.prototype;return n.createFlags=function(){var e=this,t=this.scene.add.image(0,0,Of,Lf+"1");t.setWorldSize(30.5,26),this.alignTopLeft(t,44.5,26);var n=this.scene.add.image(0,0,Of,Lf+"2");n.setWorldSize(29,32.5),this.alignTopLeft(n,93,60.5);var i=this.scene.add.image(0,0,Of,Lf+"3");i.setWorldSize(27,33),this.alignTopLeft(i,145.5,95.5);var a=this.scene.add.image(0,0,Of,Lf+"4");a.setWorldSize(25.5,33.5),this.alignTopLeft(a,199,124.5);var r=this.scene.add.image(0,0,Of,Lf+"5");r.setWorldSize(24,33.5),this.alignTopLeft(r,256.5,152);var s=this.scene.add.image(0,0,Of,Lf+"6");s.setWorldSize(25,33.5),this.alignTopLeft(s,311,173.5);var o=this.scene.add.image(0,0,Of,Lf+"7");o.setWorldSize(25.5,33),this.alignTopLeft(o,367.5,189.5);var c=this.scene.add.image(0,0,Of,Lf+"8");c.setWorldSize(25.5,32),this.alignTopLeft(c,418,201,-3),this.flags=[t,n,i,a,r,s,o,c],this.add(Af()(this)),Af()(this).forEach((function(t){var n=t.x,i=t.y,a=t.angle;e.flagsData.push({x:n,y:i,angle:a})}))},n.createString=function(){this.string=this.scene.add.image(0,0,Of,Rf.STRING.RIGHT),this.string.setWorldSize(209,91.5),this.add(this.string),Phaser.Display.Align.In.TopRight(this.string,this)},n.alignTopLeft=function(e,t,n,i,a){void 0===i&&(i=0),void 0===a&&(a=0),Phaser.Display.Align.In.TopLeft(e,this,-(t-e.width)/2+i,-(n-e.height)/2+a)},n.addBackground=function(){var e="rb-background";if(!this.scene.textures.exists(e)){var t=this.width,n=this.height,i=this.scene.add.graphics();i.fillStyle(65280,.2),i.fillRect(0,0,t,n),i.generateTexture(e,t,n),i.destroy()}var a=this.scene.add.image(0,0,e);this.add(a)},n.playWavingAnimation=function(){var e,t=this;if(!(this.tweens.length>0)){for(var n,i=Pf(this.tweens);!(n=i()).done;){if(n.value.isPlaying())return}Me()(e=Af()(this)).call(e,(function(e,n){var i=t.flagsData[n],a=i.x,r=i.y,s=i.angle,o=t.scene.add.tween({targets:e,duration:300,props:{x:a+2,y:r-1,angle:s-5},yoyo:!0,delay:50*n,repeat:-1});t.tweens.push(o)}))}},n.stopWavingAnimation=function(){var e=this;if(0!==this.tweens.length){for(var t,n=Pf(this.tweens);!(t=n()).done;){t.value.stop()}this.tweens=[],Af()(this).forEach((function(t,n){e.scene.tweens.killTweensOf(t),t.x=e.flagsData[n].x,t.y=e.flagsData[n].y,t.angle=e.flagsData[n].angle}))}},t}(Phaser.GameObjects.Container),Bf=function(e){function t(t){var n;return(n=e.call(this,t)||this).leftBunting=void 0,n.rightBunting=void 0,n.leftBuntingInitialPosition=void 0,n.rightBuntingInitialPosition=void 0,n.setSize(375,136),n.createLeftBunting(),n.createRightBunting(),n.moveBelow(n.leftBunting,n.rightBunting),n.leftBuntingInitialPosition={x:n.leftBunting.x,y:n.leftBunting.y},n.rightBuntingInitialPosition={x:n.rightBunting.x,y:n.rightBunting.y},n}(0,p.Z)(t,e);var n=t.prototype;return n.createLeftBunting=function(){var e=new xf(this.scene);this.add(e),Phaser.Display.Align.In.TopLeft(e,this),this.leftBunting=e},n.createRightBunting=function(){var e=new Df(this.scene);this.add(e),Phaser.Display.Align.In.TopRight(e,this),this.rightBunting=e},n.hideContent=function(){this.leftBunting.setPosition(this.leftBuntingInitialPosition.x-50,this.leftBuntingInitialPosition.y+-100),this.rightBunting.setPosition(this.rightBuntingInitialPosition.x+50,this.rightBuntingInitialPosition.y+-100)},n.runEntranceAnimation=function(){var e=(0,i.Z)(r().mark((function e(){var t,n,i=this;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return 50,-100,t=new(o())((function(e){new To.Z({targets:[i.leftBunting],ease:Phaser.Math.Easing.Back.Out,props:{y:{from:i.leftBuntingInitialPosition.y+-100,to:i.leftBuntingInitialPosition.y},x:{from:i.leftBuntingInitialPosition.x-50,to:i.leftBuntingInitialPosition.x}},duration:300,onComplete:e}).play()})),n=new(o())((function(e){new To.Z({targets:[i.rightBunting],ease:Phaser.Math.Easing.Back.Out,props:{y:{from:i.rightBuntingInitialPosition.y+-100,to:i.rightBuntingInitialPosition.y},x:{from:i.rightBuntingInitialPosition.x+50,to:i.rightBuntingInitialPosition.x}},duration:300,onComplete:e}).play()})),e.next=6,o().all([t,n]);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),n.playWavingAnimation=function(){this.leftBunting.playWavingAnimation(),this.rightBunting.playWavingAnimation()},n.stopWavingAnimation=function(){this.leftBunting.stopWavingAnimation(),this.rightBunting.stopWavingAnimation()},t}(Phaser.GameObjects.Container),Nf={WIDTH:303,HEIGHT:126},Mf={WIDTH:375,HEIGHT:68},Gf=4937547,Ff=.5,Zf={OutOfMoves:{SCREEN:"OUT_OF_MOVES_SCREEN_FILTER",POPUP:"OUT_OF_MOVES_POPUP_FILTER"},Challenge:{SCREEN:"CHALLENGE_SCREEN_FILTER",POPUP:"CHALLENGE_POPUP_FILTER"}},Uf=function(e){function t(t,n,i,a,r,s){var o;return(o=e.call(this,t,n,i)||this).icon=void 0,o.text=void 0,o.createIcon(a,r),o.createText(s),o.add([o.icon,o.text]),o}(0,p.Z)(t,e);var n=t.prototype;return n.createIcon=function(e,t){this.icon=this.scene.add.image(0,-10,e,t).setTint(16579837),this.icon.setWorldSize(28,28)},n.createText=function(e){this.text=this.scene.make.bitmapText({font:Fo.Z.PRIMARY.KEY,size:this.scene.fontSize(ql.FOOTER),text:e,origin:{x:.5,y:.5},y:14}).setTint(13355979),this.text.setMaxSize(100,20,!0)},t}(El.Z),Hf=An.Z.GAMEPLAY_DEFAULT,Wf=Hf.KEY,zf=Hf.FRAME,Yf=function(e){function t(t){var n;return(n=e.call(this,t,40,40,Wf,zf.IC_SETTINGS,"settings")||this).setName("Setting"),n.onClick=function(){t.screen.open($a.o4.SETTINGS_SCREEN)},n}return(0,p.Z)(t,e),t}(Uf),Vf=An.Z.GAMEPLAY_DEFAULT,Kf=Vf.KEY,jf=Vf.FRAME,Xf=function(e){function t(t,n){var i;return void 0===n&&(n=$a.o4.TOURNAMENTS_SCREEN),(i=e.call(this,t,40,40,Kf,jf.CUP,"tournaments")||this).setName("Tournaments"),i}return(0,p.Z)(t,e),t}(Uf),Jf=An.Z.GAMEPLAY_DEFAULT,qf=Jf.KEY,Qf=Jf.FRAME,$f=function(e){function t(t){var n;return(n=e.call(this,t,40,40,qf,Qf.ADD_SQUARE,"game")||this).setName("Play"),n.onClick=function(){t.screen.open($a.o4.PLAY_SCREEN)},n}return(0,p.Z)(t,e),t}(Uf),ep=Mf,tp=ep.WIDTH,np=ep.HEIGHT,ip=function(e){function t(t,n,i){var a;return void 0===n&&(n=!1),void 0===i&&(i=$a.o4.TOURNAMENTS_SCREEN),(a=e.call(this,t)||this).scene=void 0,a.settingsButton=void 0,a.playBtn=void 0,a.tournamentsButton=void 0,a.buttons=[],a.parentScreenKeys=void 0,a.scene=t,a.parentScreenKeys=i,a.setSize(tp,np),n&&a.createBackgroundMask(),a.createBackground(),a.createButtons(),a}(0,p.Z)(t,e);var n=t.prototype;return n.createBackgroundMask=function(){var e=this.scene.world.getPixelRatio(),t=this.scene.gameZone,n=t.width,i=t.height,a=this.scene.ads.getBannerHeight(),r=this.scene.theme.getCurrentThemeConfig().backgroundKey,s=this.scene.add.image(0,a+this.height/2,r);s.setOrigin(.5,1),s.setWorldSize(n,i),s.setCrop(0,667*e-(76+a)/s.scaleY,this.width*e,i*e),s.setAlpha(1),this.add(s),this.scene.events.on(no.BACKGROUND_CHANGED,(function(e){s.setTexture(e)}))},n.createBackground=function(){var e=this,t=this.scene.gameZone.width>tp?20:0,n=new Ol.Z(this.scene,0,0,this.width,this.height,t,2039583,.4);this.add(n),n.removeInteractive(),this.scene.game.events.on("game-zone-updated",(function(){var t=e.scene.gameZone.width>tp?20:0;n.setSize(e.width,e.height),n.setRadius(t)}))},n.createButtons=function(){this.buttons=[],this.createSettingsButton(),this.createPlayBtn(),this.alignButtons()},n.createSettingsButton=function(){this.settingsButton=new Yf(this.scene),this.add(this.settingsButton),this.buttons.push(this.settingsButton)},n.createPlayBtn=function(){this.playBtn=new $f(this.scene),this.add(this.playBtn),this.buttons.push(this.playBtn),this.playBtn.setDisabled(!0)},n.createTournamentsButton=function(){this.tournamentsButton=new Xf(this.scene,this.parentScreenKeys),this.add(this.tournamentsButton),this.buttons.push(this.tournamentsButton)},n.alignButtons=function(){if(0!==this.buttons.length)for(var e=this.width/this.buttons.length,t=0;t<this.buttons.length;++t)this.buttons[t].setX((t-this.buttons.length/2+.5)*e),this.buttons[t].setY(2)},t}(Phaser.GameObjects.Container),ap=An.Z.GAMEPLAY_DEFAULT,rp=ap.KEY,sp=ap.FRAME,op=function(e){function t(t){var n,i=(n=e.call(this,t)||this).scene.ads.getBannerHeight(),a=n.scene.game.world.isLandscape()?12:0;return n.setSize(375,i+a),n.createBackground(),n.createLogo(),n}(0,p.Z)(t,e);var n=t.prototype;return n.createBackground=function(){if(!this.scene.game.world.isLandscape()){var e=this.scene.add.image(0,0,rp,sp.BOTTOM_BG);e.setWorldSize(this.scene.gameZone.width,this.height),this.add(e)}},n.createLogo=function(){var e=this.scene.ads.getBannerHeight(),t=Phaser.Math.Clamp(e-14,0,26.5),n=this.scene.add.image(0,0,rp,sp.BOTTOM_LOGO);n.setWorldSize(352.5*t/26.5,t),Phaser.Display.Align.In.BottomCenter(n,this,0,-(e-t)/2),n.setDepth(mn.Z.FOOTER_LOGO),this.add(n)},t}(Phaser.GameObjects.Container),cp=function(e){function t(t,n,i,a){var r;return(r=e.call(this,t,n,i,a)||this).scene=void 0,r.fadeInAnimation=void 0,r.fadeOutAnimation=void 0,r.slideInAnimation=void 0,r.awesomeContainer=void 0,r.beams=void 0,r.bunting=void 0,r.footer=void 0,r.closed=!1,r.handleClickTournaments=function(){r.scene.time.delayedCall(100,(function(){r.closed||r.close()}))},r.setBackground=function(){var e=r.scene.theme.getCurrentThemeConfig().backgroundKey;r.background.setTexture(e);var t=r.scene.gameZone,n=t.width,i=t.height;r.background.setWorldSize(n,i),r.scene.world.isLandscape()&&r.background.setScale(r.background.scaleY,r.background.scaleY),r.scene.events.on(no.BACKGROUND_CHANGED,(function(e){r.background.setTexture(e),r.background.setWorldSize(n,i),r.scene.world.isLandscape()&&r.background.setScale(r.background.scaleY,r.background.scaleY)}))},r.scene=t,r.setBackground(),r.createAwesomeContainer(),r.createBeams(),r.createBuntings(),r.createFooter(),r.setDepth($a.Ks.POPUP),En.Z.removeObject(r.background),r}(0,p.Z)(t,e);var n=t.prototype;return n.createAwesomeContainer=function(){this.awesomeContainer=new lf(this.scene),this.add(this.awesomeContainer)},n.createBeams=function(){this.beams=new yf(this.scene),this.add(this.beams),Phaser.Display.Align.In.TopCenter(this.beams,this)},n.createBuntings=function(){this.bunting=new Bf(this.scene),this.add(this.bunting),Phaser.Display.Align.In.TopCenter(this.bunting,this)},n.createFooter=function(){this.footer=new ip(this.scene,!1,$a.o4.VICTORY_SCREEN),this.add(this.footer),this.bringToTop(this.footer),this.footer.setInteractive();var e=this.scene.ads.getBannerHeight(),t=this.scene.gameZone.width>375?-10:0;Phaser.Display.Align.In.BottomCenter(this.footer,this.background,0,-e+t)},n.createBottomLogo=function(){if(!this.scene.game.world.isLandscape()){var e=new op(this.scene);this.add(e),Phaser.Display.Align.In.BottomCenter(e,this)}},n.open=function(t){e.prototype.open.call(this,t),this.closed=!1,this.updateVictoryStats(),this.awesomeContainer.setAlpha(1),this.awesomeContainer.setInteractive(),this.background.setAlpha(1),this.runOpenAnimation(),this.scene.children.bringToTop(this.scene.gameplay.confettiSmallFallDown),this.scene.gameplay.confettiSmallFallDown.run(8,0,0)},n.close=function(){this.closed=!0,this.runCloseAnimation(),this.stopConfettiAnimation()},n.updateVictoryStats=function(){var e,t=null==(e=this.data)?void 0:e.list;if(t){var n=t.score,i=t.winningMoves,a=t.winningTime,r=this.scene.gameStats.getNormalStat().bestWinningTime;this.awesomeContainer.setScore(""+n),this.awesomeContainer.setMoves(""+i),this.awesomeContainer.setWinningTime((0,nr.F0)(a,!1)),this.awesomeContainer.setBestWinningTime((0,nr.F0)(r,!1)),this.awesomeContainer.setDraw("standardMode")}},n.runOpenAnimation=function(){var e=(0,i.Z)(r().mark((function e(){var t,n,a,s=this;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==(t=this.slideInAnimation)||null==(n=t.tween)||!n.isPlaying()){e.next=2;break}return e.abrupt("return");case 2:return this.scene.audio.playSound(er.Z.POPUP_SHOW),a=this.scene.ads.getBannerHeight(),this.awesomeContainer.setAlpha(0),this.awesomeContainer.y=a,this.awesomeContainer.hideContent(),this.bunting.stopWavingAnimation(),this.slideInAnimation||(this.slideInAnimation=new To.Z({targets:[this.awesomeContainer],ease:Phaser.Math.Easing.Back.Out,props:{y:{from:a,to:-a/2},alpha:{from:0,to:1}},duration:300,onComplete:function(){var e=(0,i.Z)(r().mark((function e(){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.awesomeContainer.runEntranceAnimation();case 2:s.footer.playBtn.setDisabled(!1);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()})),this.fadeInAnimation||(this.fadeInAnimation=new Hc.Z({targets:[this],duration:300,ease:Phaser.Math.Easing.Linear})),this.fadeInAnimation.play(),e.next=13,this.bunting.runEntranceAnimation();case 13:this.bunting.playWavingAnimation(),this.slideInAnimation.play();case 15:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.runCloseAnimation=function(){var t,n,i=this;null!=(t=this.fadeOutAnimation)&&null!=(n=t.tween)&&n.isPlaying()||(this.scene.audio.playSound(er.Z.POPUP_OFF),this.fadeOutAnimation||(this.fadeOutAnimation=new Sh.Z({targets:[this],ease:Phaser.Math.Easing.Linear,props:{alpha:0},duration:300,onComplete:function(){e.prototype.close.call(i),i.footer.playBtn.setDisabled(!0)}})),this.fadeOutAnimation.play(),this.bunting.stopWavingAnimation())},n.stopConfettiAnimation=function(){this.scene.gameplay.confettiSmallFallDown.emitter.stop()},t}(GameCore.Screen),up=cp,lp=An.Z.GAMEPLAY_DEFAULT,hp=lp.KEY,dp=lp.FRAME,fp=143.5,pp=function(e){function t(t){var n;return(n=e.call(this,t)||this).bg=void 0,n.score=void 0,n.time=void 0,n.bestTime=void 0,n.moves=void 0,n.draw=void 0,n.lines=[],n.buttons=[],n.createBackground(),n.createTitle(),n.createStats(),n.createNewGameButton(),n.createReplayButton(),n.createDevButtons(),t.add.existing((0,za.Z)(n)),n}(0,p.Z)(t,e);var n=t.prototype;return n.setScore=function(e){this.score.setValue(e)},n.setWinningTime=function(e){this.time.setValue(e)},n.setBestWinningTime=function(e){this.bestTime.setValue(e)},n.setMoves=function(e){this.moves.setValue(e)},n.setDraw=function(e){this.draw.setText(e)},n.createBackground=function(){this.setSize(343,374);var e=new kl(this.scene,{key:"_outOfMoves",radius:6,border:24,width:343,height:374});this.bg=e,this.add(e),this.bg.setPipeline("Grayscale")},n.createTitle=function(){var e=this.scene.make.bitmapText({font:Fo.Z.BOLD.KEY,size:this.scene.fontSize(24),text:"outOfMoves",origin:{x:.5,y:.5}});e.setMaxSize(300,35),e.setTint(16777215),this.add(e),Phaser.Display.Align.In.TopCenter(e,this,0,-20);var t=this.scene.make.bitmapText({font:Fo.Z.PRIMARY.KEY,size:this.scene.fontSize(16),text:"standardMode",origin:{x:.5,y:.5}});t.setMaxSize(300,20),t.setTint(16777215),this.draw=t,this.add([t]),Phaser.Display.Align.To.BottomCenter(t,e,0,8)},n.createStats=function(){var e=[],t=new ef(this.scene);t.setIcon(hp,dp.MEDAL_STAR),t.setLabel("score"),t.setValue("687"),this.score=t,e.push(t);var n=new ef(this.scene);n.setIcon(hp,dp.ARROW_SWAP_HORIZONTAL),n.setLabel("moves"),n.setValue("798"),this.moves=n,e.push(n);var i=new ef(this.scene);i.setIcon(hp,dp.TIMER),i.setLabel("time"),i.setValue("09:48"),this.time=i,e.push(i);var a=new ef(this.scene);a.setIcon(hp,dp.CUP),a.setLabel("bestTime"),a.setValue("05:30"),this.bestTime=a,e.push(a),this.add(e);for(var r=0;r<e.length;r++){var s=e[r];if(s.alignProperties(),Phaser.Display.Align.In.TopCenter(s,this,0,-(50*r+112)),r==e.length-1)break;var o=this.scene.add.line(0,0,0,0,271,0,16579837,.2);this.add(o),this.lines.push(o),Phaser.Display.Align.To.BottomCenter(o,s,0,12)}},n.createNewGameButton=function(){var e=this,t=new Th.Z(this.scene,143.5,48,16,16777215);t.onClick=(0,i.Z)(r().mark((function t(){return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.scene.screen.close($a.o4.NO_MORE_MOVES_SCREEN),!(e.scene instanceof hm)){t.next=6;break}return t.next=4,e.scene.gameplay.handleShowInterstitialAd();case 4:return t.next=6,e.scene.handlePlaySingle();case 6:case"end":return t.stop()}}),t)}))),t.setName("NewGame");var n=new rf(this.scene);t.add(n),Phaser.Display.Align.In.BottomRight(t,this,-16,-18),this.add([t]),this.buttons.push(t),new yc.Z({targets:[t],duration:1e3,props:{scale:"*=1.05"}}).play()},n.createReplayButton=function(){var e=this,t=new Th.Z(this.scene,143.5,48,16,16777215);t.button.setAlpha(.24),t.button.setStrokeStyle(1,16777215),t.onClick=function(){e.scene instanceof hm&&e.scene.gameplay.replayGame(),e.scene.screen.close($a.o4.NO_MORE_MOVES_SCREEN)},t.setName("Replay");var n=this.scene.add.graphics();n.lineStyle(1,16777215),n.strokeRoundedRect(-71.75,-24,fp,48,16);var i=new rf(this.scene,8,"replay",dp.IC_REPLAY);i.clearTint(),i.getIcon().setTintFill(16777215),t.add([n,i]).setSize(fp,48),Phaser.Display.Align.In.BottomLeft(t,this.bg,-16,-18),this.add([t]),this.buttons.push(t)},n.createDevButtons=function(){GameCore.Utils.Valid.isDebugger()&&this.createCloseButton()},n.createCloseButton=function(){var e=this,t=new El.Z(this.scene,40,40),n=this.scene.add.image(0,0,hp,dp.IC_BG_OFF);n.setWorldSize(40,40);var i=this.scene.make.bitmapText({font:Fo.Z.PRIMARY.KEY,size:this.scene.fontSize(10),text:"Close",origin:{x:.5,y:.5}});i.setCenterAlign(),t.add([n,i]),this.add(t),Phaser.Display.Align.In.BottomLeft(t,this,0,-200),t.onClick=function(){e.scene.screen.close($a.o4.NO_MORE_MOVES_SCREEN)}},n.hideContent=function(){[this.score,this.moves,this.time,this.bestTime].forEach((function(e){return e.setAlpha(0)})),this.lines.forEach((function(e){e.setAlpha(0),e.scaleX=0})),this.buttons.forEach((function(e){e.setAlpha(0)}))},n.runEntranceAnimationButtons=function(){var e=(0,i.Z)(r().mark((function e(){var t,n,i=this;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Me()(t=this.buttons).call(t,(function(e){return new(o())((function(t){i.scene.add.tween({targets:[e],alpha:1,duration:200,onComplete:function(){e.setDisabled(!1),t()}})}))})),e.next=3,o().all(n);case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.runEntranceAnimationRows=function(){var e=(0,i.Z)(r().mark((function e(){var t,n,i=this;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[this.score,this.moves,this.time,this.bestTime],200,n=Me()(t).call(t,(function(e,t){return new(o())((function(n){i.scene.add.tween({targets:[e],duration:200,delay:200*t/2,ease:Phaser.Math.Easing.Sine.Out,props:{alpha:{from:0,to:1},y:{from:e.y+e.height/2,to:e.y}},onComplete:n})}))})),e.next=5,o().all(n);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.runEntranceAnimationLines=function(){var e=(0,i.Z)(r().mark((function e(){var t,n,i=this;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return 200,n=Me()(t=this.lines).call(t,(function(e,t){return new(o())((function(n){i.scene.add.tween({targets:[e],duration:200,delay:200*t/2,props:{alpha:{from:0,to:1},scaleX:{from:0,to:1}},onComplete:n})}))})),e.next=4,o().all(n);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.runEntranceAnimationRowsLines=function(){var e=(0,i.Z)(r().mark((function e(){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o().all([this.runEntranceAnimationRows(),this.runEntranceAnimationLines()]);case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.runEntranceAnimation=function(){var e=(0,i.Z)(r().mark((function e(){var t;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.runEntranceAnimationRowsLines();case 2:return t=this.scene,e.next=5,t.gameplay.finishGame();case 5:return e.next=7,this.runEntranceAnimationButtons();case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),t}(Phaser.GameObjects.Container),gp=pp,mp=An.Z.GAMEPLAY_DEFAULT,vp=mp.KEY,yp=mp.FRAME,bp=function(e){function t(t){var n;return(n=e.call(this,t)||this).leftLightning=void 0,n.middleLightning=void 0,n.rightLightning=void 0,n.initialLeftX=void 0,n.initialLeftY=void 0,n.initialMidX=void 0,n.initialMidY=void 0,n.initialRightX=void 0,n.initialRightY=void 0,n.setSize(374,416),n.createLightnings(),n.alignLightnings(),n.initialLeftX=n.leftLightning.x,n.initialLeftY=n.leftLightning.y,n.initialMidX=n.middleLightning.x,n.initialMidY=n.middleLightning.y,n.initialRightX=n.rightLightning.x,n.initialRightY=n.rightLightning.y,n}(0,p.Z)(t,e);var n=t.prototype;return n.createLightnings=function(){this.createLeftLightning(),this.createMiddleLightning(),this.createRightLightning();var e=[this.leftLightning,this.middleLightning,this.rightLightning];e.forEach((function(e){return e.setAlpha(.2)})),this.add(e)},n.createLeftLightning=function(){this.leftLightning=this.scene.add.image(0,0,vp,yp.LIGHTNING.LEFT),this.leftLightning.setWorldSize(182.5,180)},n.createMiddleLightning=function(){this.middleLightning=this.scene.add.image(0,0,vp,yp.LIGHTNING.MIDDLE),this.middleLightning.setWorldSize(106,125.5)},n.createRightLightning=function(){this.rightLightning=this.scene.add.image(0,0,vp,yp.LIGHTNING.RIGHT),this.rightLightning.setWorldSize(130.5,116)},n.alignLightnings=function(){Phaser.Display.Align.In.TopLeft(this.leftLightning,this,0,-60.28),Phaser.Display.Align.In.TopRight(this.middleLightning,this,-125.92,0),Phaser.Display.Align.In.TopRight(this.rightLightning,this,-9.23,-55.4)},n.hideContent=function(){var e=0,t=-300;[this.leftLightning,this.middleLightning,this.rightLightning].forEach((function(n){n.setPosition(e,t).setAlpha(0)}))},n.runEntranceAnimation=function(){var e=(0,i.Z)(r().mark((function e(){var t,n,i,a,s,c=this;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={x:0,y:-300},n=new(o())((function(e){new To.Z({targets:[c.leftLightning],ease:Phaser.Math.Easing.Cubic.Out,props:{x:{from:t.x,to:c.initialLeftX},y:{from:t.y,to:c.initialLeftY},alpha:{from:0,to:.2}},duration:150,onComplete:e}).play()})),i=new(o())((function(e){new To.Z({targets:[c.rightLightning],ease:Phaser.Math.Easing.Cubic.Out,props:{x:{from:t.x,to:c.initialRightX},y:{from:t.y,to:c.initialRightY},alpha:{from:0,to:.2}},duration:250,onComplete:e}).play()})),a=new(o())((function(e){new To.Z({targets:[c.middleLightning],ease:Phaser.Math.Easing.Cubic.Out,props:{x:{from:t.x,to:c.initialMidX},y:{from:t.y,to:c.initialMidY},alpha:{from:0,to:.2}},duration:300,onComplete:e}).play()})),e.next=6,o().all([n,a,i]);case 6:return s=[this.leftLightning,this.middleLightning,this.rightLightning],e.next=9,new(o())((function(e){c.scene.add.tween({targets:s,props:{alpha:.4},yoyo:!0,duration:100,onComplete:e})}));case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),t}(Phaser.GameObjects.Container),Ap=An.Z.GAMEPLAY_DEFAULT,Ep=Ap.KEY,Sp=Ap.FRAME,Tp=10.4,Cp=30.5,wp=50.5,Ip={FIRST_FROM_LEFT:Tp,SECOND_FROM_LEFT:Cp,THIRD_FROM_LEFT:wp,FIRST_FROM_RIGHT:-Tp,SECOND_FROM_RIGHT:-Cp,THIRD_FROM_RIGHT:-wp},xp=function(e){function t(t){var n;return(n=e.call(this,t)||this).pivot=void 0,n.beams=[],n.setSize(375,415.5),n.createBeamsPivot(),n.createBeams(),n.playAnimation(),n}(0,p.Z)(t,e);var n=t.prototype;return n.createBeams=function(){for(var e=0,t=oe()(Ip);e<t.length;e++){var n=t[e],i=Ip[n],a=this.scene.add.image(0,0,Ep,Sp.BEAM.LOSE_AXIS);a.setWorldSize(65.5,533),this.add(a),this.beams.push(a),this.rotateBeamToAngleInDegree(a,i)}},n.playAnimation=function(){var e=this;this.beams.forEach((function(t,n){e.scene.tweens.add({targets:t,props:{alpha:{from:.2,to:.4}},duration:700,delay:700*n,repeat:-1,yoyo:!0})}))},n.createBeamsPivot=function(){this.pivot=this.scene.add.image(0,0,Ep,Sp.ADD_SQUARE),this.add(this.pivot),this.pivot.kill(),Phaser.Display.Align.In.Center(this.pivot,this,0,-this.height/2-148.2)},n.rotateBeamToAngleInDegree=function(e,t){Phaser.Actions.RotateAroundDistance([e],this.pivot,t*Math.PI/180,e.height/2);var n=180*Math.atan2(e.y-this.pivot.y,e.x-this.pivot.x)/Math.PI;e.angle=n+90+180},t}(Phaser.GameObjects.Container),Pp=function(e){function t(t,n,i,a){var r;return(r=e.call(this,t,n,i,a)||this).scene=void 0,r.fadeInAnimation=void 0,r.fadeOutAnimation=void 0,r.slideInAnimation=void 0,r.outOfMovesContainer=void 0,r.lightnings=void 0,r.beams=void 0,r.footer=void 0,r.closed=!1,r.handleClickTournaments=function(){r.scene.time.delayedCall(100,(function(){r.closed||r.close()}))},r.setBackground=function(){var e=r.scene.theme.getCurrentThemeConfig().backgroundKey;r.background.setTexture(e);var t=r.scene.gameZone,n=t.width,i=t.height;r.background.setWorldSize(n,i),r.scene.world.isLandscape()&&r.background.setScale(r.background.scaleY,r.background.scaleY),r.background.setPipeline("Grayscale"),r.scene.events.on(no.BACKGROUND_CHANGED,(function(e){r.background.setTexture(e),r.background.setWorldSize(n,i),r.scene.world.isLandscape()&&r.scene.world.isLandscape()&&r.background.setScale(r.background.scaleY,r.background.scaleY)}))},r.scene=t,r.setBackground(),r.createOutOfMovesContainer(),r.createLightnings(),r.createBeams(),r.createFooter(),r.setDepth($a.Ks.POPUP),En.Z.removeObject(r.background),r}(0,p.Z)(t,e);var n=t.prototype;return n.createBeams=function(){this.beams=new xp(this.scene),this.add(this.beams),Phaser.Display.Align.In.TopCenter(this.beams,this)},n.createOutOfMovesContainer=function(){this.outOfMovesContainer=new gp(this.scene),this.add(this.outOfMovesContainer)},n.createLightnings=function(){this.lightnings=new bp(this.scene),this.add(this.lightnings),Phaser.Display.Align.In.TopCenter(this.lightnings,this)},n.createFooter=function(){this.footer=new ip(this.scene,!1,$a.o4.NO_MORE_MOVES_SCREEN),this.add(this.footer),this.bringToTop(this.footer),this.footer.setInteractive();var e=this.scene.ads.getBannerHeight(),t=this.scene.gameZone.width>375?-10:0;Phaser.Display.Align.In.BottomCenter(this.footer,this.background,0,-e+t)},n.createBottomLogo=function(){if(!this.scene.world.isLandscape()){var e=new op(this.scene);this.add(e),Phaser.Display.Align.In.BottomCenter(e,this)}},n.open=function(t){e.prototype.open.call(this,t),En.Z.openScreen(this,!0),this.updateVictoryStats(),this.outOfMovesContainer.setAlpha(1),this.outOfMovesContainer.setInteractive(),this.background.setAlpha(1),this.runOpenAnimation(),this.closed=!1},n.close=function(){this.closed=!0,this.runCloseAnimation()},n.updateVictoryStats=function(){var e,t=null==(e=this.data)?void 0:e.list;if(t){var n=t.score,i=t.winningMoves,a=t.winningTime,r=this.scene.gameStats.getNormalStat().bestWinningTime;this.outOfMovesContainer.setScore(""+n),this.outOfMovesContainer.setMoves(""+i),this.outOfMovesContainer.setWinningTime((0,nr.F0)(a,!1)),this.outOfMovesContainer.setBestWinningTime((0,nr.F0)(r,!1)),this.outOfMovesContainer.setDraw("standardMode")}},n.runOpenAnimation=function(){var e=(0,i.Z)(r().mark((function e(){var t,n,a,s=this;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==(t=this.slideInAnimation)||null==(n=t.tween)||!n.isPlaying()){e.next=2;break}return e.abrupt("return");case 2:return this.scene.audio.playSound(er.Z.POPUP_SHOW),a=this.scene.ads.getBannerHeight(),this.outOfMovesContainer.setAlpha(0),this.outOfMovesContainer.y=a,this.outOfMovesContainer.hideContent(),this.slideInAnimation||(this.slideInAnimation=new To.Z({targets:[this.outOfMovesContainer],ease:Phaser.Math.Easing.Sine.In,props:{y:{from:a,to:-a/2},alpha:{from:0,to:1}},duration:300,onComplete:function(){var e=(0,i.Z)(r().mark((function e(){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.outOfMovesContainer.runEntranceAnimation();case 2:s.footer.playBtn.setDisabled(!1);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()})),this.fadeInAnimation||(this.fadeInAnimation=new Hc.Z({targets:[this],duration:300,ease:Phaser.Math.Easing.Sine.In})),this.fadeInAnimation.play(),e.next=12,this.lightnings.runEntranceAnimation();case 12:this.slideInAnimation.play();case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.runCloseAnimation=function(){var t,n,i=this;null!=(t=this.fadeOutAnimation)&&null!=(n=t.tween)&&n.isPlaying()||(this.scene.audio.playSound(er.Z.POPUP_OFF),this.fadeOutAnimation||(this.fadeOutAnimation=new Sh.Z({targets:[this],ease:Phaser.Math.Easing.Sine.Out,props:{alpha:0},duration:300,onComplete:function(){En.Z.closeScreen(i),i.footer.playBtn.setDisabled(!0),e.prototype.close.call(i)}})),this.fadeOutAnimation.play())},t}(GameCore.Screen),kp=Pp,_p=function(e){function t(t){var n;return(n=e.call(this,t)||this).bg=void 0,n.message=void 0,n.createBackground(),n.createMessage(),n.createOKButton(),t.add.existing((0,za.Z)(n)),n}(0,p.Z)(t,e);var n=t.prototype;return n.setMessage=function(e){this.message.setText(e)},n.createBackground=function(){var e=new Ol.Z(this.scene,0,0,300,160,20,16579837);this.add(e),this.bg=e,this.setSize(e.width,e.height)},n.createMessage=function(){var e=this.scene.make.bitmapText({font:Fo.Z.PRIMARY.KEY,size:this.scene.fontSize(16),text:"Hello, world!",origin:{x:.5,y:.5}});e.setCenterAlign(),e.setTint(1907997),this.add(e),Phaser.Display.Align.In.Center(e,this,0,-24),this.message=e,this.add([e])},n.createOKButton=function(){var e=this,t=new Th.Z(this.scene,260,40,12,3774208);t.setName("OK"),t.onClick=function(){e.scene.screen.close($a.o4.NOTIFICATION_SCREEN)};var n=this.scene.make.bitmapText({font:Fo.Z.PRIMARY.KEY,size:this.scene.fontSize(16),text:"ok",origin:{x:.5,y:.5}});n.setTint(16579837),Phaser.Display.Align.In.Center(n,t,0),t.add([n]),Phaser.Display.Align.In.BottomCenter(t,this.bg,0,-16),this.add([t])},t}(Phaser.GameObjects.Container),Op=_p,Rp=function(e){function t(t,n,i,a){var r;return(r=e.call(this,t,n,i,a)||this).slideInAnimation=void 0,r.fadeInAnimation=void 0,r.fadeOutAnimation=void 0,r.notificationContainer=void 0,r.setDepth($a.Ks.POPUP),r.notificationContainer=new Op(t),r.add(r.notificationContainer),r.background.setTint(1315862),r.background.setAlpha(.5),r.background.setInteractive(),r}(0,p.Z)(t,e);var n=t.prototype;return n.open=function(t){e.prototype.open.call(this,t);var n=this.data.list.message,i=void 0===n?"":n;this.notificationContainer.setMessage(i),this.runOpenAnimation()},n.close=function(){this.runCloseAnimation()},n.runOpenAnimation=function(){var e,t;null!=(e=this.fadeInAnimation)&&null!=(t=e.tween)&&t.isPlaying()||(this.scene.audio.playSound(er.Z.POPUP_SHOW),this.fadeInAnimation||(this.fadeInAnimation=new Hc.Z({targets:[this],ease:Phaser.Math.Easing.Sine.InOut,duration:300})),this.fadeInAnimation.play())},n.runCloseAnimation=function(){var t,n,i=this;null!=(t=this.fadeOutAnimation)&&null!=(n=t.tween)&&n.isPlaying()||(this.scene.audio.playSound(er.Z.POPUP_OFF),this.fadeOutAnimation||(this.fadeOutAnimation=new Sh.Z({targets:[this],props:{alpha:0},duration:300,onComplete:function(){e.prototype.close.call(i)}})),this.fadeOutAnimation.play())},t}(GameCore.Screen),Lp=Rp,Dp=n(662),Bp=wd.STATUS,Np=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n.gameMode=void 0,n.handleGameModeChanged=function(){n.stop(),n.start()},n.scene=t,n.init(),n}(0,p.Z)(t,e);var n=t.prototype;return n.init=function(){e.prototype.init.call(this),this.gameMode=ao.SINGLE,so.instance.on(no.GAME_MODE_CHANGED,this.handleGameModeChanged)},n.start=function(){if(!this.isRunning()){switch(this.gameMode=so.instance.getGameMode(),this.gameMode){case ao.SINGLE:this.startSingleMode();break;case ao.TOURNAMENT:this.startTournamentMode();break;case ao.CHALLENGE_FRIENDS:this.startChallengeMode();break;default:this.stopChallengeMode(),this.stopTournamentMode()}this.setState(Bp.RUNNING)}},n.stop=function(){switch(this.gameMode){case ao.SINGLE:this.stopSingleMode();break;case ao.TOURNAMENT:this.stopTournamentMode();break;case ao.CHALLENGE_FRIENDS:this.stopChallengeMode()}this.setState(Bp.STOPPED)},n.startSingleMode=function(){this.scene.header.useSingleInfo()},n.stopSingleMode=function(){},n.startTournamentMode=function(){var e=(0,i.Z)(r().mark((function e(){var t,n,i,a,s,o,c,u;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.scene.header.useTournamentInfo(),e.next=3,this.updateTournamentInfo();case 3:return e.prev=3,n=this.scene.storage.getState(),i=Wr(n),a=Hr(n),e.next=11,(0,zr.H$)(i,{limit:7}).catch((function(e){return[]}));case 11:if(!((s=e.sent).length<1)){e.next=15;break}return e.abrupt("return");case 15:return o=Me()(s).call(s,(function(e){return e.playerId})),e.next=18,this.scene.profile.requestProfiles(o).catch((function(e){}));case 18:if(c=this.scene.profile.getProfiles(),u=Me()(s).call(s,(function(e){var t=e.playerId,n=e.score,i=e.rank,a=c[t];if(!a)return null;var r=a.name;return{playerId:t,photo:a.photo,score:n,rank:i,name:r}})),!(Mi()(t=Be()(u).call(u,(function(e){return null!==e}))).call(t,(function(e,t){return t.score-e.score})).length<1)){e.next=24;break}return e.abrupt("return");case 24:this.scene.analytics.event(bn._.TOURNAMENT_START,{tournament_id:a,leaderboard_id:i}),e.next=34;break;case 28:if(e.prev=28,e.t0=e.catch(3),!(e.t0 instanceof Dp.Z)){e.next=32;break}return e.abrupt("return");case 32:(0,h.tO)(e.t0);case 34:case"end":return e.stop()}}),e,this,[[3,28]])})));return function(){return e.apply(this,arguments)}}(),n.updateTournamentInfo=function(){var e=(0,i.Z)(r().mark((function e(){var t,n,i,a,s;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.scene.storage.getState(),n=Wr(t),e.next=4,(0,zr.wF)(n);case 4:i=e.sent,a=null==i?void 0:i.name,s=GameCore.Utils.String.removeDiacritics(a||"Your tournament"),this.scene.header.tournamentInfo.titleBlock.tournamentTitle.setText(s);case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.stopTournamentMode=function(){},n.startChallengeMode=function(){this.scene.header.useChallengeInfo();var e=this.scene.header.challengeInfo,t=e.leftBlock,n=e.rightBlock;t.updateData(0,0,0),n.updateData();var i=this.scene.storage.getState(),a=this.scene.player.getPlayer(),r=a.playerId,s=a.photo;t.avatar.loadPhoto(r,s,100);var o=fs(i),c=o.playerId,u=o.photo;n.avatar.loadPhoto(c,u,100);var l=ls(i),h=l.whitePlayerId,d=l.extraData,f=void 0===d?{}:d,p=r===h?f.blackPlayerData:f.whitePlayerData;if(p){var g=p.score,m=p.moves,v=p.time;n.updateData(g,v,m)}},n.stopChallengeMode=function(){},t}(Pd),Mp=Np,Gp=function(e){return e.WIN="win",e.LOSE="lose",e.DRAW="draw",e.WAITING_FOR_OPPONENT="waiting_for_opponent",e}(Gp||{}),Fp=Gp,Zp=An.Z.DEFAULT,Up=Zp.KEY,Hp=Zp.FRAME,Wp=An.Z.GAMEPLAY_DEFAULT,zp=Wp.KEY,Yp=Wp.FRAME,Vp=function(e){function t(t){var n;return(n=e.call(this,t)||this)._avatar=void 0,n._username=void 0,n._crownZone=void 0,n.setSize(54,94),n.createAvatarFrame(),n.createCrownZone(),n.createText(),n.alignComponents(),n}(0,p.Z)(t,e);var n=t.prototype;return n.setUsername=function(e,t){void 0===t&&(t=!0),"your friend"===e.toLocaleLowerCase()&&(e="yourFriend",t=!1),this.username.setText(e),this.username.setIgnoreLanguage(t)},n.createAvatarFrame=function(){this._avatar=new Uo(this.scene,{key:Up,background:Hp.BLANK,width:64,height:64,loadDelay:100}),this._avatar.update(),this._avatar.background.kill(),this._avatar.loadPhoto(ga.Z.AVATAR.KEY,ga.Z.AVATAR.FILE,100),this.add(this._avatar)},n.createText=function(){this._username=this.scene.make.text({style:{fontFamily:Fo.Z.FONT_FAMILY},origin:{x:.5,y:.5}}),this._username.setHighQuality(),this._username.setFontSize(12),this._username.setText("Name"),this._username.setIgnoreLanguage(),this.add(this._username)},n.createCrownZone=function(){this._crownZone=this.scene.add.container(),this._crownZone.setSize(20,20),this.add(this._crownZone);var e=this.scene.add.image(0,0,zp,Yp.AVATAR_CROWN);e.setWorldSize(19,14),Phaser.Display.Align.In.Center(e,this._crownZone),this._crownZone.add(e)},n.alignComponents=function(){Phaser.Display.Align.In.BottomCenter(this._username,this),Phaser.Display.Align.In.TopCenter(this._crownZone,this),Phaser.Display.Align.In.Center(this._avatar,this)},n.addBackground=function(){var e="player-avatar-background";if(!this.scene.textures.exists(e)){var t=this.width,n=this.height,i=this.scene.add.graphics();i.fillStyle(65280,.2),i.fillRect(0,0,t,n),i.generateTexture(e,t,n),i.destroy()}var a=this.scene.add.image(0,0,e);this.add(a)},n.setWinner=function(e){void 0===e&&(e=!0),this._crownZone.setVisible(e)},n.hideContent=function(){this._avatar.setScale(0),this._username.setAlpha(0),this._crownZone.setAlpha(0)},n.runEntranceAnimationAvatar=function(){var e=(0,i.Z)(r().mark((function e(){var t=this;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new(o())((function(e){t.scene.add.tween({targets:t._avatar,duration:300,ease:Phaser.Math.Easing.Cubic.Out,props:{scale:{from:0,to:1}},onComplete:e})})));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),n.runEntranceAnimationUsername=function(){var e=(0,i.Z)(r().mark((function e(){var t=this;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new(o())((function(e){t.scene.add.tween({targets:t._username,duration:300,ease:Phaser.Math.Easing.Sine.Out,props:{alpha:{from:0,to:1}},onComplete:e})})));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),n.runEntranceAnimationCrown=function(){var e=(0,i.Z)(r().mark((function e(){var t=this;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new(o())((function(e){t.scene.add.tween({targets:t._crownZone,ease:Phaser.Math.Easing.Sine.Out,duration:100,props:{alpha:{from:0,to:1},y:{from:t._crownZone.y-t._crownZone.height/4,to:t._crownZone.y}},onComplete:e})})));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),n.runEntranceAnimation=function(){var e=(0,i.Z)(r().mark((function e(){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o().all([this.runEntranceAnimationAvatar(),this.runEntranceAnimationUsername()]);case 2:return e.next=4,this.runEntranceAnimationCrown();case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),(0,de.Z)(t,[{key:"avatar",get:function(){return this._avatar}},{key:"username",get:function(){return this._username}},{key:"crownZone",get:function(){return this._crownZone}}]),t}(Phaser.GameObjects.Container),Kp=16762624,jp=function(e){function t(t){var n;return(n=e.call(this,t)||this)._youAvatar=void 0,n._opponentAvatar=void 0,n._versusText=void 0,n.setSize(231,94),n.createAvatars(),n.createVersusText(),n.alignComponents(),n}(0,p.Z)(t,e);var n=t.prototype;return n.createAvatars=function(){this._youAvatar=new Vp(this.scene),this._opponentAvatar=new Vp(this.scene),this.add([this._youAvatar,this._opponentAvatar])},n.createVersusText=function(){this._versusText=this.scene.make.bitmapText({font:Fo.Z.BOLD.KEY,size:this.scene.fontSize(18),origin:{x:.5,y:.5}}),this._versusText.setText("VS"),this.setTintVersusText(),this.add(this._versusText)},n.setTintVersusText=function(e){void 0===e&&(e=!0),e?this._versusText.setTint(11222016,Kp,Kp,Kp):this._versusText.clearTint()},n.alignComponents=function(){Phaser.Display.Align.In.Center(this._versusText,this),Phaser.Display.Align.In.LeftCenter(this._youAvatar,this,-20),Phaser.Display.Align.In.RightCenter(this._opponentAvatar,this,-20)},n.addBackground=function(){var e="avatar-zone-background";if(!this.scene.textures.exists(e)){var t=this.width,n=this.height,i=this.scene.add.graphics();i.fillStyle(65280,.2),i.fillRect(0,0,t,n),i.generateTexture(e,t,n),i.destroy()}var a=this.scene.add.image(0,0,e);this.add(a)},n.updateState=function(e){switch(e){case Fp.WIN:this._youAvatar.setWinner(!0),this._opponentAvatar.setWinner(!1),this.setTintVersusText();break;case Fp.LOSE:this._youAvatar.setWinner(!1),this._opponentAvatar.setWinner(!0),this.setTintVersusText(!1);break;case Fp.DRAW:default:this._youAvatar.setWinner(!1),this._opponentAvatar.setWinner(!1),this.setTintVersusText()}},n.hideContent=function(){this._youAvatar.hideContent(),this._opponentAvatar.hideContent(),this._versusText.setAlpha(0)},n.runEntranceAnimationVersusText=function(){var e=(0,i.Z)(r().mark((function e(){var t=this;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new(o())((function(e){t.scene.add.tween({targets:t.versusText,duration:100,ease:Phaser.Math.Easing.Sine.Out,props:{alpha:{from:0,to:1},y:{from:t.versusText.y+t.versusText.height/4,to:t.versusText.y}},onComplete:e})})));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),n.runEntranceAnimation=function(){var e=(0,i.Z)(r().mark((function e(){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o().all([this._youAvatar.runEntranceAnimation(),this._opponentAvatar.runEntranceAnimation()]);case 2:return e.next=4,this.runEntranceAnimationVersusText();case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),(0,de.Z)(t,[{key:"youAvatar",get:function(){return this._youAvatar}},{key:"opponentAvatar",get:function(){return this._opponentAvatar}},{key:"versusText",get:function(){return this._versusText}}]),t}(Phaser.GameObjects.Container),Xp=function(e){function t(t,n,i,a,r){var s;return(s=e.call(this,t)||this).playerStat=void 0,s.opponentStat=void 0,s.setSize(231,40),s.addIcon(n),s.createLabel(i),s.createPlayerStat(a),s.createOpponentStat(r),s}(0,p.Z)(t,e);var n=t.prototype;return n.addBackground=function(){var e="avatar-zone-background";if(!this.scene.textures.exists(e)){var t=this.width,n=this.height,i=this.scene.add.graphics();i.fillStyle(65280,.2),i.fillRect(0,0,t,n),i.generateTexture(e,t,n),i.destroy()}var a=this.scene.add.image(0,0,e);this.add(a)},n.addIcon=function(e){e.setWorldSize(24,24),this.add(e),Phaser.Display.Align.In.TopCenter(e,this)},n.createLabel=function(e){var t=this.scene.make.bitmapText({font:Fo.Z.PRIMARY.KEY,size:this.scene.fontSize(12),text:e,origin:{x:.5,y:.5}});t.setMaxSize(70,20,!0),this.add(t),Phaser.Display.Align.In.BottomCenter(t,this)},n.createPlayerStat=function(e){var t=this.scene.make.bitmapText({font:Fo.Z.BOLD.KEY,size:this.scene.fontSize(16),text:e,origin:{x:0,y:.5}});t.setMaxSize(80,25,!0),this.add(t),Phaser.Display.Align.In.LeftCenter(t,this),this.playerStat=t},n.createOpponentStat=function(e){var t=this.scene.make.bitmapText({font:Fo.Z.BOLD.KEY,size:this.scene.fontSize(16),text:e,origin:{x:1,y:.5}});t.setMaxSize(80,25,!0),this.add(t),Phaser.Display.Align.In.RightCenter(t,this),this.opponentStat=t},n.setPlayerStat=function(e,t){void 0===t&&(t=!0),this.playerStat.setText(e),this.playerStat.setIgnoreLanguage(t)},n.setOpponentStat=function(e,t){void 0===t&&(t=!0),this.opponentStat.setText(e),this.opponentStat.setIgnoreLanguage(t)},t}(Phaser.GameObjects.Container),Jp=An.Z.GAMEPLAY_DEFAULT,qp=Jp.KEY,Qp=Jp.FRAME,$p=function(e){function t(t){var n;return(n=e.call(this,t)||this)._scoreStat=void 0,n._movesStat=void 0,n._timeStat=void 0,n.lines=[],n.setSize(231,170),n.createScoreStatEntry(),n.createMovesStatEntry(),n.createTimeStatEntry(),n.createLines(),n}(0,p.Z)(t,e);var n=t.prototype;return n.addBackground=function(){var e="match-statistics-background";if(!this.scene.textures.exists(e)){var t=this.width,n=this.height,i=this.scene.add.graphics();i.fillStyle(65280,.2),i.fillRect(0,0,t,n),i.generateTexture(e,t,n),i.destroy()}var a=this.scene.add.image(0,0,e);this.add(a)},n.createScoreStatEntry=function(){var e=this.scene.add.image(0,0,qp,Qp.MEDAL_STAR);this._scoreStat=new Xp(this.scene,e,"score","1234","687"),this.add(this._scoreStat),Phaser.Display.Align.In.TopCenter(this._scoreStat,this)},n.createMovesStatEntry=function(){var e=this.scene.add.image(0,0,qp,Qp.ARROW_SWAP_HORIZONTAL);this._movesStat=new Xp(this.scene,e,"moves","335","687"),this.add(this._movesStat),this.alignUnder(this._movesStat,this._scoreStat,0,20)},n.createTimeStatEntry=function(){var e=this.scene.add.image(0,0,qp,Qp.TIMER);this._timeStat=new Xp(this.scene,e,"time","07:25","09:45"),this.add(this._timeStat),this.alignUnder(this._timeStat,this._movesStat,0,20)},n.createLines=function(){var e=this;this.list.forEach((function(t){if(t instanceof Xp){var n=e.scene.add.line(0,0,0,0,231,0,16777215,.3);e.add(n),e.lines.push(n),Phaser.Display.Align.In.BottomCenter(n,t,0,10)}}))},n.alignUnder=function(e,t,n,i){void 0===n&&(n=0),void 0===i&&(i=0);var a=(e.height+t.height)/2;Phaser.Display.Align.In.Center(e,t,0+n,a+i)},n.runEntranceAnimationLines=function(){var e=(0,i.Z)(r().mark((function e(){var t,n,i=this;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return 200,n=Me()(t=this.lines).call(t,(function(e,t){return new(o())((function(n){i.scene.add.tween({targets:e,duration:200,delay:200*t/2,props:{alpha:{from:0,to:1},scaleX:{from:0,to:1}},onComplete:n})}))})),e.next=4,o().all(n);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.runEntranceAnimationStats=function(){var e=(0,i.Z)(r().mark((function e(){var t,n,i=this;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[this._scoreStat,this._movesStat,this._timeStat],200,n=Me()(t).call(t,(function(e,t){return new(o())((function(n){i.scene.add.tween({targets:e,duration:200,delay:200*t/2,ease:Phaser.Math.Easing.Sine.Out,props:{alpha:{from:0,to:1},y:{from:e.y+e.height/2,to:e.y}},onComplete:n})}))})),e.next=5,o().all(n);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.hideContent=function(){this.lines.forEach((function(e){e.setAlpha(0),e.scaleX=0})),[this._scoreStat,this._movesStat,this._timeStat].forEach((function(e){return e.setAlpha(0)}))},n.runEntranceAnimation=function(){var e=(0,i.Z)(r().mark((function e(){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o().all([this.runEntranceAnimationStats(),this.runEntranceAnimationLines()]);case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),(0,de.Z)(t,[{key:"scoreStat",get:function(){return this._scoreStat}},{key:"movesStat",get:function(){return this._movesStat}},{key:"timeStat",get:function(){return this._timeStat}}]),t}(Phaser.GameObjects.Container),eg=function(e){return e.NEW_GAME="new",e.CLOSE="close",e}({}),tg=function(e){function t(t){var n;return(n=e.call(this,t,143.5,48,16,16777215)||this).closeLabel=void 0,n.newGameLabel=void 0,n._buttonState=void 0,n.setSize(143.5,48),n.setName("NewGameButton"),n.createNewGameLabel(),n.createCloseLabel(),n.switchState(eg.NEW_GAME),n.initOnClick(),n.playPulsateAnimation(),n}(0,p.Z)(t,e);var n=t.prototype;return n.createNewGameLabel=function(){this.newGameLabel=new rf(this.scene),this.add(this.newGameLabel)},n.createCloseLabel=function(){this.closeLabel=this.scene.make.bitmapText({font:Fo.Z.PRIMARY.KEY,size:this.scene.fontSize(16),text:"ok",origin:{x:.5,y:.5}}).setTint(43282),this.add(this.closeLabel),Phaser.Display.Align.In.Center(this.closeLabel,this)},n.initOnClick=function(){var e=this;this.onClick=(0,i.Z)(r().mark((function t(){var n;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e._buttonState!==eg.NEW_GAME){t.next=6;break}return n=e.scene,t.next=4,null==n?void 0:n.handlePlaySingle();case 4:t.next=7;break;case 6:e.switchState(eg.NEW_GAME);case 7:e.scene.screen.close($a.o4.PLAY_WITH_FRIEND_GAME_OVER_SCREEN);case 8:case"end":return t.stop()}}),t)})))},n.playPulsateAnimation=function(){new yc.Z({targets:[this],duration:1e3,props:{scale:"*=1.05"}}).play()},n.hideContent=function(){this.setDisabled(!0)},n.runEntranceAnimation=function(){var e=(0,i.Z)(r().mark((function e(){var t=this;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new(o())((function(e){t.scene.add.tween({targets:t,alpha:1,duration:200,onStart:function(){t.setDisabled(!0)},onComplete:function(){t.setDisabled(!1),e()}})})));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),n.switchState=function(e){if(e!==this._buttonState)switch(e){case eg.CLOSE:this._buttonState=eg.CLOSE,this.closeLabel.revive(),this.newGameLabel.kill();break;case eg.NEW_GAME:this._buttonState=eg.NEW_GAME,this.closeLabel.kill(),this.newGameLabel.revive()}},t}(Th.Z),ng=143.5,ig=function(e){function t(t){var n;return(n=e.call(this,t,ng,48)||this).background=void 0,n.border=void 0,n.labelContainer=void 0,n.setName("Share"),n.setSize(ng,48),n.createBackground(),n.createBorder(),n.createLabel(),n.initOnClick(),n}(0,p.Z)(t,e);var n=t.prototype;return n.createBackground=function(){this.background=new Ol.Z(this.scene,0,0,ng,48,16,16777215,.24),this.add(this.background)},n.createBorder=function(){this.border=this.scene.add.graphics(),this.border.lineStyle(1,16777215).strokeRoundedRect(-71.75,-24,ng,48,16),this.add(this.border)},n.createLabel=function(){this.labelContainer=new rf(this.scene,8,"share",An.Z.GAMEPLAY_DEFAULT.FRAME.IC_SHARE),this.labelContainer.clearTint(),this.labelContainer.getIcon().setTintFill(16777215),this.add(this.labelContainer)},n.initOnClick=function(){var e=this;this.onClick=function(){e.scene.storage.dispatch(ko())}},n.hideContent=function(){this.setDisabled(!0)},n.runEntranceAnimation=function(){var e=(0,i.Z)(r().mark((function e(){var t=this;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new(o())((function(e){t.scene.add.tween({targets:t,alpha:1,duration:200,onStart:function(){t.setDisabled(!0)},onComplete:function(){t.setDisabled(!1),e()}})})));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),t}(El.Z),ag=function(e){function t(t){var n;return(n=e.call(this,t)||this)._newGameButton=void 0,n._shareButton=void 0,n._stat=void 0,n.setSize(303,244),n.createMatchStatistics(),n.createNewGameButton(),n.createShareButton(),n}(0,p.Z)(t,e);var n=t.prototype;return n.createNewGameButton=function(){var e=new tg(this.scene);this.add(e),Phaser.Display.Align.In.BottomRight(e,this),this._newGameButton=e},n.createShareButton=function(){var e=new ig(this.scene);this.add(e),Phaser.Display.Align.In.BottomLeft(e,this),this._shareButton=e},n.createMatchStatistics=function(){var e=new $p(this.scene);this.add(e),Phaser.Display.Align.In.TopCenter(e,this),this._stat=e},n.hideContent=function(){this._stat.hideContent(),this._newGameButton.hideContent(),this._shareButton.hideContent()},n.runEntranceAnimation=function(){var e=(0,i.Z)(r().mark((function e(){var t;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._stat.runEntranceAnimation();case 2:return t=this.scene,e.next=5,t.gameplay.finishGame();case 5:return e.next=7,o().all([this._newGameButton.runEntranceAnimation(),this._shareButton.runEntranceAnimation()]);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),(0,de.Z)(t,[{key:"newGameButton",get:function(){return this._newGameButton}},{key:"shareButton",get:function(){return this._shareButton}},{key:"stat",get:function(){return this._stat}}]),t}(Phaser.GameObjects.Container),rg=function(e){function t(t){var n;return(n=e.call(this,t)||this).winLoseText=void 0,n.modeText=void 0,n.waitingAnimationEvent=void 0,n.waitingAnimation=void 0,n.setSize(303,60),n.createWinLoseText(),n.createModeText(),n}(0,p.Z)(t,e);var n=t.prototype;return n.createWinLoseText=function(){var e=this.scene.make.bitmapText({font:Fo.Z.BOLD.KEY,size:this.scene.fontSize(24),origin:{x:.5,y:.5},text:"youWin"});e.setMaxSize(270,35),this.add(e),Phaser.Display.Align.In.TopCenter(e,this),this.winLoseText=e},n.createModeText=function(){var e=this.scene.make.bitmapText({font:Fo.Z.PRIMARY.KEY,size:this.scene.fontSize(16),origin:{x:.5,y:.5},text:"standardMode"});e.setMaxSize(270,25),this.add(e),Phaser.Display.Align.In.BottomCenter(e,this),this.modeText=e},n.addBackground=function(){var e="popup-header-background";if(!this.scene.textures.exists(e)){var t=this.width,n=this.height,i=this.scene.add.graphics();i.fillStyle(65280,.2),i.fillRect(0,0,t,n),i.generateTexture(e,t,n),i.destroy()}var a=this.scene.add.image(0,0,e);this.add(a)},n.updateWinLoseText=function(e){switch(this.stopWaitingAnimation(),e){case Fp.WIN:this.winLoseText.setText("youWin");break;case Fp.LOSE:this.winLoseText.setText("youLose");break;case Fp.DRAW:this.winLoseText.setText("draw");break;case Fp.WAITING_FOR_OPPONENT:default:this.winLoseText.setText("waiting"),this.playWaitingAnimation()}},n.playWaitingAnimation=function(){var e=this,t=0;this.waitingAnimationEvent=this.scene.time.addEvent({delay:500,repeat:-1,callback:function(){t=(t+1)%4;var n=Array(t+1).join(".");e.winLoseText.setTranslationParameter("dot",n)}}),this.waitingAnimation=this.scene.add.tween({targets:this.winLoseText,alpha:.5,repeat:-1,yoyo:!0,delay:250,ease:Phaser.Math.Easing.Sine.InOut})},n.stopWaitingAnimation=function(){if(this.waitingAnimationEvent)try{this.waitingAnimationEvent.remove(),this.waitingAnimationEvent.destroy()}catch(e){}if(this.waitingAnimation)try{this.waitingAnimation.remove(),this.waitingAnimation.destroy()}catch(t){}this.winLoseText.setAlpha(1)},n.updateDrawMode=function(){this.modeText.setText("standardMode")},t}(Phaser.GameObjects.Container),sg=function(e){function t(t,n,i){var a;return(a=e.call(this,t,n,i)||this)._header=void 0,a._avatarZone=void 0,a._popupBody=void 0,a.background=void 0,a._darkFilter=void 0,a.setSize(343,486),a.createBackground(),a.createDarkFilter(),a.createHeader(),a.createAvatarZone(),a.createBody(),a}(0,p.Z)(t,e);var n=t.prototype;return n.createBackground=function(){var e=new kl(this.scene,{key:"play-with-friend-game-over-block-background",radius:6,border:24,width:this.width,height:this.height});this.add(e),this.background=e},n.createDarkFilter=function(){var e=Zf.Challenge.POPUP;if(!this.scene.textures.exists(e)){var t=this.background,n=t.width,i=t.height,a=this.scene.add.graphics();a.fillStyle(Gf,Ff),a.fillRoundedRect(0,0,n,i,24),a.generateTexture(e,n,i),a.destroy()}var r=this.scene.add.image(0,0,e);r.kill(),this._darkFilter=r,this.add(r)},n.createHeader=function(){this._header=new rg(this.scene),this.add(this._header),Phaser.Display.Align.In.TopCenter(this._header,this,0,-20)},n.createAvatarZone=function(){this._avatarZone=new jp(this.scene),this.add(this._avatarZone),Phaser.Display.Align.In.TopCenter(this._avatarZone,this,0,-104)},n.createBody=function(){this._popupBody=new ag(this.scene),this.add(this._popupBody),Phaser.Display.Align.In.BottomCenter(this._popupBody,this,0,-20)},n.hideContent=function(){this._avatarZone.hideContent(),this._popupBody.hideContent()},n.runEntranceAnimation=function(){var e=(0,i.Z)(r().mark((function e(){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._avatarZone.runEntranceAnimation();case 2:return e.next=4,this._popupBody.runEntranceAnimation();case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),(0,de.Z)(t,[{key:"header",get:function(){return this._header}},{key:"avatarZone",get:function(){return this._avatarZone}},{key:"popupBody",get:function(){return this._popupBody}},{key:"darkFilter",get:function(){return this._darkFilter}}]),t}(Phaser.GameObjects.Container),og=An.Z.GAMEPLAY_DEFAULT,cg=og.KEY,ug=og.FRAME,lg=function(e){function t(t){var n;return(n=e.call(this,t)||this).background=void 0,n._popup=void 0,n.setContainerSize(),n.createPopup(),n.createDevButtons(),n}(0,p.Z)(t,e);var n=t.prototype;return n.setContainerSize=function(){var e=this.scene.gameZone,t=e.width,n=e.height;this.setSize(t,n)},n.addBackground=function(){var e="challenge-result-container-background";if(!this.scene.textures.exists(e)){var t=this.width,n=this.height,i=this.scene.add.graphics();i.fillStyle(859421,1),i.fillRect(0,0,t,n),i.generateTexture(e,t,n),i.destroy()}this.background=this.scene.add.image(0,0,e),this.background.kill(),this.add(this.background)},n.createDevButtons=function(){GameCore.Utils.Valid.isDebugger()&&this.createCloseButton()},n.createCloseButton=function(){var e=this,t=new El.Z(this.scene,40,40),n=this.scene.add.image(0,0,cg,ug.IC_BG_OFF);n.setWorldSize(40,40);var i=this.scene.make.bitmapText({font:Fo.Z.PRIMARY.KEY,size:this.scene.fontSize(10),text:"Close",origin:{x:.5,y:.5}});i.setCenterAlign(),t.add([n,i]),this.add(t),Phaser.Display.Align.In.BottomLeft(t,this,0,-200),t.onClick=function(){e.scene.screen.close($a.o4.PLAY_WITH_FRIEND_GAME_OVER_SCREEN)}},n.createPopup=function(){this._popup=new sg(this.scene),this.add(this._popup),Phaser.Display.Align.In.Center(this._popup,this,0,0)},n.hideContent=function(){this._popup.hideContent()},n.runEntranceAnimation=function(){var e=(0,i.Z)(r().mark((function e(){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._popup.runEntranceAnimation();case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),(0,de.Z)(t,[{key:"popup",get:function(){return this._popup}}]),t}(Phaser.GameObjects.Container),hg=function(e){function t(t){var n;return(n=e.call(this,t)||this)._beams=void 0,n._bunting=void 0,n.setSize(375,295),n.createBeams(),n.createBunting(),n}(0,p.Z)(t,e);var n=t.prototype;return n.createBeams=function(){this._beams=new yf(this.scene),this.add(this._beams),Phaser.Display.Align.In.TopCenter(this._beams,this)},n.createBunting=function(){this._bunting=new Bf(this.scene),this.add(this._bunting),Phaser.Display.Align.In.TopCenter(this._bunting,this)},(0,de.Z)(t,[{key:"beams",get:function(){return this._beams}},{key:"bunting",get:function(){return this._bunting}}]),t}(Phaser.GameObjects.Container),dg=function(e){function t(t){var n;return(n=e.call(this,t)||this)._beams=void 0,n._lightnings=void 0,n.setSize(375,416),n.createBeams(),n.createLightnings(),n}(0,p.Z)(t,e);var n=t.prototype;return n.createBeams=function(){this._beams=new xp(this.scene),this.add(this._beams),Phaser.Display.Align.In.TopCenter(this._beams,this)},n.createLightnings=function(){this._lightnings=new bp(this.scene),this.add(this._lightnings),Phaser.Display.Align.In.TopCenter(this._lightnings,this)},(0,de.Z)(t,[{key:"beams",get:function(){return this._beams}},{key:"lightnings",get:function(){return this._lightnings}}]),t}(Phaser.GameObjects.Container),fg=new(function(){function e(){this._state=void 0,this._state=Fp.WIN}return(0,de.Z)(e,[{key:"state",get:function(){return this._state},set:function(e){var t=game.globalScene.getActiveScene().screen.get($a.o4.PLAY_WITH_FRIEND_GAME_OVER_SCREEN);t instanceof pg&&t.setGameOverInfo({state:e}),this._state=e}}]),e}());window.resultStateManager=fg;var pg=function(e){function t(t,n,i,a){var r;return(r=e.call(this,t,n,i,a)||this).slideInAnimation=void 0,r.fadeInAnimation=void 0,r.fadeOutAnimation=void 0,r.playWithFriendGameOverContainer=void 0,r.winDecoration=void 0,r.loseDecoration=void 0,r.footer=void 0,r.closed=!1,r.setBackground=function(){var e=r.scene.theme.getCurrentThemeConfig().backgroundKey;r.background.setTexture(e);var t=r.scene.gameZone,n=t.width,i=t.height;r.background.setWorldSize(n,i),r.scene.world.isLandscape()&&r.background.setScale(r.background.scaleY,r.background.scaleY),r.scene.events.on(no.BACKGROUND_CHANGED,(function(e){r.background.setTexture(e),r.background.setWorldSize(n,i),r.scene.world.isLandscape()&&r.background.setScale(r.background.scaleY,r.background.scaleY)}))},r.handleClickTournaments=function(){r.scene.time.delayedCall(100,(function(){r.closed||r.close()}))},r.scene instanceof hm&&r.setBackground(),r.setDepth($a.Ks.POPUP),r.createContainer(),r.createBanners(),r.createFooter(),r.createBottomLogo(),En.Z.removeObject(r.background),r}(0,p.Z)(t,e);var n=t.prototype;return n.open=function(t){e.prototype.open.call(this,t),this.closed=!1,this.isGameZoneTooWide()&&(this.winDecoration.kill(),this.loseDecoration.kill()),this.background.setAlpha(1),this.runOpenAnimation(),fg.state!==Fp.LOSE&&(this.playConfettiAnimation(),this.updateResultInfo())},n.close=function(){this.closed=!0,this.runCloseAnimation(),this.stopConfettiAnimation()},n.runOpenAnimation=function(){var e=(0,i.Z)(r().mark((function e(){var t,n,a,s,o=this;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==(t=this.slideInAnimation)||null==(n=t.tween)||!n.isPlaying()){e.next=2;break}return e.abrupt("return");case 2:if(this.scene.audio.playSound(er.Z.POPUP_SHOW),a=this.scene.ads.getBannerHeight(),s=a,this.playWithFriendGameOverContainer.setAlpha(0).setY(s).hideContent(),this.winDecoration.bunting.stopWavingAnimation(),this.loseDecoration.lightnings.hideContent(),this.slideInAnimation||(this.slideInAnimation=new To.Z({targets:[this.playWithFriendGameOverContainer],props:{y:{from:s,to:-a/2-33,ease:Phaser.Math.Easing.Back.Out},alpha:{from:0,to:1}},duration:300,onComplete:function(){var e=(0,i.Z)(r().mark((function e(){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.playWithFriendGameOverContainer.runEntranceAnimation();case 2:o.footer.playBtn.setDisabled(!1);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()})),this.fadeInAnimation||(this.fadeInAnimation=new Hc.Z({targets:[this],duration:300})),this.fadeInAnimation.play(),!this.winDecoration.active){e.next=15;break}return e.next=14,this.winDecoration.bunting.runEntranceAnimation();case 14:this.winDecoration.bunting.playWavingAnimation();case 15:if(!this.loseDecoration.active){e.next=18;break}return e.next=18,this.loseDecoration.lightnings.runEntranceAnimation();case 18:this.slideInAnimation.play();case 19:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.runCloseAnimation=function(){var t,n,i=this;null!=(t=this.fadeOutAnimation)&&null!=(n=t.tween)&&n.isPlaying()||(this.scene.audio.playSound(er.Z.POPUP_OFF),this.fadeOutAnimation||(this.fadeOutAnimation=new Sh.Z({targets:[this],props:{alpha:0},duration:300,onComplete:function(){En.Z.closeScreen(i),e.prototype.close.call(i),i.footer.playBtn.setDisabled(!0)}})),this.fadeOutAnimation.play())},n.createBanners=function(){this.createRibbonBanner(),this.createLightningThunderBanner()},n.createRibbonBanner=function(){this.winDecoration=new hg(this.scene),this.winDecoration.kill();var e=this.scene.world.getWorldSize().height,t=this.scene.ads.getBannerHeight(),n=Math.max(0,-e/2+t/2+242+100);Phaser.Display.Align.In.TopCenter(this.winDecoration,this,0,n),this.add(this.winDecoration)},n.createLightningThunderBanner=function(){this.loseDecoration=new dg(this.scene),this.loseDecoration.kill(),Phaser.Display.Align.In.TopCenter(this.loseDecoration,this),this.add(this.loseDecoration)},n.createContainer=function(){this.playWithFriendGameOverContainer=new lg(this.scene),this.add(this.playWithFriendGameOverContainer)},n.createFooter=function(){this.footer=new ip(this.scene,!1,$a.o4.PLAY_WITH_FRIEND_GAME_OVER_SCREEN),this.add(this.footer),this.bringToTop(this.footer),this.footer.setInteractive();var e=this.scene.ads.getBannerHeight(),t=this.scene.gameZone.width>375?-10:0;Phaser.Display.Align.In.BottomCenter(this.footer,this.background,0,-e+t)},n.createBottomLogo=function(){if(!this.scene.world.isLandscape()){var e=new op(this.scene);Phaser.Display.Align.In.BottomCenter(e,this),this.add(e)}},n.isGameZoneTooWide=function(){return this.scene.gameZone.width>450},n.playConfettiAnimation=function(){if(this.scene instanceof hm){var e=this.scene.gameplay.confettiSmallFallDown;this.scene.children.bringToTop(e),e.run(8,0,0)}},n.stopConfettiAnimation=function(){this.scene instanceof hm&&this.scene.gameplay.confettiSmallFallDown.stop()},n.updateResultInfo=function(){var e=this.scene.storage.getState(),t=as(e),n=bs(e),i=this.scene.player.getPlayer().playerId,a=fs(e).playerId,r=(n[i]||{}).score,s=(n[a]||{}).score,o=gs(e,{playerId:i}),c=ms(e,{opponentId:a});t===ba&&(o=!0,c=!0);var u,l,h=ls(e),d=h.whitePlayerId,f=h.extraData,p=void 0===f?{}:f,g=i===d,m=g?p.blackPlayerData:p.whitePlayerData,v=(g?p.whitePlayerData:p.blackPlayerData)||{},y=v.moves,b=v.time,A=m||{},E=A.moves,S=A.time,T=o&&c,C=T&&r>s;u=T?C&&(T&&r<s)?Fp.DRAW:C?Fp.WIN:Fp.LOSE:Fp.WAITING_FOR_OPPONENT,this.setGameOverInfo({state:u,playerScore:o?r:void 0,opponentScore:c?s:void 0,playerMoves:o?y:void 0,opponentMoves:c?E:void 0,playerTime:o?b:void 0,opponentTime:c?S:void 0}),this.scene.storage.dispatch((void 0===(l=!1)&&(l=!1),{type:"MATCH_RESUTL_FROM_MESSAGE",payload:{matchResultFromMessage:l}}))},n.setGameOverInfo=function(e){var t=this.playWithFriendGameOverContainer.popup,n=t.header,i=t.avatarZone,a=t.popupBody,r=i.youAvatar,s=i.opponentAvatar,o=this.scene.player.getPlayer(),c=o.playerId,u=o.photo,l=o.name;r.avatar.loadPhoto(c,u,100),r.setUsername(l);var h=this.scene.storage.getState(),d=fs(h),f=d.playerId,p=d.photo,g=d.name;if(s.avatar.loadPhoto(f,p,100),s.setUsername(g),e.state)switch(n.updateWinLoseText(e.state),i.updateState(e.state),e.state){case Fp.LOSE:this.winDecoration.kill(),this.loseDecoration.revive(),this.enableDarkBackground(),this.stopConfettiAnimation();break;case Fp.WIN:case Fp.DRAW:this.winDecoration.revive(),this.loseDecoration.kill(),this.enableDarkBackground(!1);break;case Fp.WAITING_FOR_OPPONENT:default:this.winDecoration.kill(),this.loseDecoration.kill(),this.stopConfettiAnimation(),this.enableDarkBackground(!1)}n.updateDrawMode();var m="waiting",v=a.stat,y=v.scoreStat,b=v.movesStat,A=v.timeStat;void 0!==e.playerScore?y.setPlayerStat(""+e.playerScore):y.setPlayerStat(m,!1),void 0!==e.opponentScore?y.setOpponentStat(""+e.opponentScore):y.setOpponentStat(m,!1),void 0!==e.playerMoves?b.setPlayerStat(""+e.playerMoves):b.setPlayerStat(m,!1),void 0!==e.opponentMoves?b.setOpponentStat(""+e.opponentMoves):b.setOpponentStat(m,!1),void 0!==e.playerTime?A.setPlayerStat((0,nr.F0)(e.playerTime,!1)):A.setPlayerStat(m,!1),void 0!==e.opponentTime?A.setOpponentStat((0,nr.F0)(e.opponentTime,!1)):A.setOpponentStat(m,!1)},n.enableDarkBackground=function(e){void 0===e&&(e=!0),En.Z.openScreen(this,e);var t=this.playWithFriendGameOverContainer.popup.background;e?(this.background.setPipeline("Grayscale"),t.setPipeline("Grayscale")):(this.background.resetPipeline(),t.resetPipeline())},n.updateFinishingChallenge=function(){this.playWithFriendGameOverContainer.popup.popupBody.newGameButton.switchState(eg.CLOSE)},t}(GameCore.Screen),gg=function(){function e(){this.payload=void 0}var t=e.prototype;return t.getData=function(){var e=(0,i.Z)(r().mark((function e(){var t,n,i;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.payload){e.next=2;break}return e.abrupt("return",this.payload);case 2:return e.next=4,o().all([this.getAPITournamentData(),this.getFacebookTournamentData()]);case 4:return t=e.sent,n=t[0],i=t[1],this.payload=n||i,e.abrupt("return",this.payload);case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),t.setData=function(e){this.payload=e},t.clearData=function(){this.payload=void 0},t.getAPITournamentData=function(){var e=(0,i.Z)(r().mark((function e(){var t,n,i;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=window.game.storage.getState(),n=Hr(t),e.next=4,(0,zr.Iy)();case 4:if(0!==(i=e.sent).length){e.next=7;break}return e.abrupt("return",void 0);case 7:return e.abrupt("return",M()(i).call(i,(function(e){return e.id===n})));case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),t.getFacebookTournamentData=function(){var e=(0,i.Z)(r().mark((function e(){var t,n,i,a,s;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,window.game.facebook.getTournamentAsync();case 2:if(t=e.sent,n=t.getPayload()){e.next=6;break}return e.abrupt("return",void 0);case 6:if(i=JSON.parse(n),a=i.playerName,i.leaderboardId){e.next=10;break}return e.abrupt("return",void 0);case 10:return s={id:t.getID(),title:t.getTitle()||a+"'s Tournament",payload:i,endTime:t.getEndTime(),contextID:t.getContextID()},e.abrupt("return",s);case 12:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),e}(),mg=new gg,vg=n(665),yg=An.Z.GAMEPLAY_DEFAULT,bg=yg.KEY,Ag=yg.FRAME,Eg=function(e){function t(t){var n;return(n=e.call(this,t)||this).medalNo123=void 0,n.customizedMedal=void 0,n.rankLabel=void 0,n.rank=1,n.setSize(20,20),n.createMedal123(),n.createCustomizedMedal(),n.createRankLabel(),n}(0,p.Z)(t,e);var n=t.prototype;return n.getRank=function(){return this.rank},n.setRank=function(e){var t=function(e){return e>99?"99+":0===e?"?":e.toString()}(e);switch(this.rank=e,this.rankLabel.setText(t),this.medalNo123.kill(),this.customizedMedal.kill(),t){case"1":this.medalNo123.revive(),this.medalNo123.setFrame(Ag.GOLD),this.rankLabel.setTint(16777215);break;case"2":this.medalNo123.revive(),this.medalNo123.setFrame(Ag.SILVER),this.rankLabel.setTint(5658198);break;case"3":this.medalNo123.revive(),this.medalNo123.setFrame(Ag.BRONZE),this.rankLabel.setTint(16777215);break;default:this.customizedMedal.revive(),this.rankLabel.setTint(3774208)}},n.createMedal123=function(){this.medalNo123=this.scene.add.image(0,0,bg,Ag.GOLD),this.medalNo123.setWorldSize(19,20.5),this.add(this.medalNo123)},n.createCustomizedMedal=function(){this.customizedMedal=this.scene.add.image(0,0,bg,Ag.CUSTOM_MEDAL),this.customizedMedal.setWorldSize(20,20),this.add(this.customizedMedal)},n.createRankLabel=function(){this.rankLabel=this.scene.make.bitmapText({font:Fo.Z.PRIMARY.KEY,size:this.scene.fontSize(10),origin:{x:.5,y:.5},text:""+this.rank}),this.rankLabel.setIgnoreLanguage(),this.add(this.rankLabel)},t}(Phaser.GameObjects.Container);var Sg=An.Z.DEFAULT,Tg=Sg.KEY,Cg=Sg.FRAME,wg=An.Z.GAMEPLAY_DEFAULT,Ig=wg.KEY,xg=wg.FRAME,Pg=function(e){function t(t,n){var i;return void 0===n&&(n=!1),(i=e.call(this,t)||this).scene=void 0,i._isPlayer=!1,i.normalPlayerBackground=void 0,i.border=void 0,i.avatar=void 0,i.username=void 0,i.score=void 0,i.medalIcon=void 0,i.scoreIcon=void 0,i.payload=void 0,i.instantPlayerVisualIndicator=!1,i.scene=t,i.setSize(303,44),i.createNormalPlayerBackground(),i.createBorder(),i.createMedalIcon(),i.createAvatar(),i.createUsername(),i.createScore(),i.createScoreIcon(),i.alignComponents(),i.isPlayer=n,i}(0,p.Z)(t,e);var n=t.prototype;return n.createNormalPlayerBackground=function(){this.normalPlayerBackground=new Ol.Z(this.scene,0,0,this.width,this.height,8,16777215).setAlpha(1),this.add(this.normalPlayerBackground)},n.createBorder=function(){var e=this.scene.add.graphics();e.lineStyle(1,16777215),e.strokeRoundedRect(-this.width/2,-this.height/2,this.width,this.height,8),this.add(e),this.border=e},n.createAvatar=function(){this.avatar=new Uo(this.scene,{key:Tg,background:Cg.BLANK,width:42,height:42,loadDelay:100}),this.avatar.update(),this.avatar.background.kill(),this.avatar.loadPhoto(ga.Z.AVATAR.KEY,ga.Z.AVATAR.FILE,100),this.add(this.avatar)},n.createUsername=function(){this.username=this.scene.make.text({style:{fontFamily:Fo.Z.FONT_FAMILY},origin:{x:0,y:.5}}),this.username.setHighQuality(),this.username.setFontSize(16),this.username.setTranslationParameter("dot","..."),this.add(this.username)},n.createScore=function(){this.score=this.scene.make.bitmapText({font:Fo.Z.PRIMARY.KEY,size:this.scene.fontSize(14),origin:{x:1,y:.5}}),this.score.setIgnoreLanguage(),this.add(this.score),this.setScore(0)},n.createScoreIcon=function(){this.scoreIcon=this.scene.add.image(0,0,Ig,xg.MEDAL_STAR),this.scoreIcon.setWorldSize(20,20),this.add(this.scoreIcon)},n.createMedalIcon=function(){this.medalIcon=new Eg(this.scene),this.medalIcon.kill(),this.add(this.medalIcon)},n.setScore=function(e){this.score.setText(""+e)},n.setUsername=function(e,t){void 0===t&&(t=!0),"you"===e.toLocaleLowerCase()&&(e="you",t=!1);var n=GameCore.Utils.String.getShortName(e,12),i=GameCore.Utils.String.removeDiacritics(n);this.username.setText(i),this.username.setIgnoreLanguage(t)},n.getTimerIcon=function(){return this.scoreIcon},n.updateData=function(e){var t,n,i=e.playerId,a=void 0===i?"10":i,r=e.name,s=void 0===r?"???":r,o=e.photo,c=void 0===o?"":o,u=e.score,l=void 0===u?0:u,h=e.rank,d=void 0===h?0:h;this.payload&&(t=e,n=this.payload,t.playerId===n.playerId&&t.photo===n.photo&&t.score===n.score&&t.rank===n.rank&&t.name===n.name)||(this.payload=e,this.isPlayer=a===this.scene.player.getPlayerId(),this.scoreIcon.setAlpha(0),this.score.setAlpha(0),this.username.setAlpha(0),this.avatar.setAlpha(0),this.setScore(l),this.medalIcon.setRank(d),this.updateNormalPlayerBackground(d),0===l?(this.setUsername("waiting",!1),this.avatar.loadPhoto(ga.Z.AVATAR.KEY,ga.Z.AVATAR.FILE,100)):(this.setUsername(s),this.avatar.loadPhoto(a,c,100)),this.medalIcon.revive(),Phaser.Display.Align.To.LeftCenter(this.scoreIcon,this.score,8),this.playRecentlyUpdatedComponentEntrancesAnimation())},n.getBackgroundColorViaRank=function(e){switch(e){case 1:return 16771094;case 2:return 16777215;case 3:return 14265494;default:return 0}},n.getBackgroundAlphaViaRank=function(e){return 1===e||2===e||3===e?.32:.25},n.updateNormalPlayerBackground=function(e){var t=this.getBackgroundColorViaRank(e),n=this.getBackgroundAlphaViaRank(e);this.normalPlayerBackground.setFillStyle(t,n)},n.alignComponents=function(){Phaser.Display.Align.In.LeftCenter(this.medalIcon,this,-8),Phaser.Display.Align.To.RightCenter(this.avatar,this.medalIcon,6),Phaser.Display.Align.To.RightCenter(this.username,this.avatar,3),Phaser.Display.Align.In.RightCenter(this.score,this,-8),Phaser.Display.Align.To.LeftCenter(this.scoreIcon,this.score,8)},n.playRecentlyUpdatedComponentEntrancesAnimation=function(){this.scene.add.tween({targets:[this.scoreIcon,this.score,this.username,this.avatar],props:{alpha:{from:0,to:1}},duration:150})},n.hideContent=function(){var e;if(this._isPlayer){this.border.kill(),this.normalPlayerBackground.revive();var t=this.getBackgroundAlphaViaRank((null==(e=this.payload)?void 0:e.rank)||1);this.normalPlayerBackground.setAlpha(t)}},n.showSpecialBackgroundAnimation=function(){var e=(0,i.Z)(r().mark((function e(){var t=this;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new(o())((function(e){var n=[t.border];t.scene.add.tween({targets:n,duration:200,onStart:function(){n.forEach((function(e){return e.revive()}))},props:{alpha:{from:0,to:.25}},onComplete:e})})));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),n.runScalingAnimation=function(){var e=(0,i.Z)(r().mark((function e(){var t=this;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new(o())((function(e){t.scene.add.tween({targets:t,duration:200,ease:Phaser.Math.Easing.Cubic.In,props:{scale:.95},onComplete:function(){t.scene.add.tween({targets:t,ease:Phaser.Math.Easing.Elastic.Out,easeParams:[.1,.45],props:{scale:1},onComplete:e})}})})));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),n.runEntranceAnimation=function(){var e=(0,i.Z)(r().mark((function e(){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._isPlayer){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,o().all([this.showSpecialBackgroundAnimation(),this.runScalingAnimation()]);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),(0,de.Z)(t,[{key:"isPlayer",get:function(){return this._isPlayer},set:function(e){this._isPlayer=e,this._isPlayer&&this.instantPlayerVisualIndicator?(this.border.revive(),this.normalPlayerBackground.kill()):(this.border.kill(),this.normalPlayerBackground.revive())}}]),t}(Phaser.GameObjects.Container);var kg=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n.leaders=[],n.loading=void 0,n.payload=[],n.scene=t,n.createLeaders(),n.alignLeaders(),n.createLoading(),n}(0,p.Z)(t,e);var n=t.prototype;return n.updateLeaders=function(e){(function(e,t){var n,i;if(e.length!==t.length)return!1;for(var a=Mi()(n=w()(e).call(e)).call(n,(function(e,t){return e.rank-t.rank})),r=Mi()(i=w()(t).call(t)).call(i,(function(e,t){return e.rank-t.rank})),s=0;s<a.length;s++){var o=a[s],c=r[s];if(o.playerId!==c.playerId||o.photo!==c.photo||o.score!==c.score||o.rank!==c.rank||o.name!==c.name)return!1}return!0})(this.payload,e)||(this.payload=e,this.leaders.forEach((function(t,n){t.updateData((0,f.Z)({},e[n]))})))},n.createLeaders=function(){for(var e=0;e<4;e++){var t=new Pg(this.scene);this.leaders.push(t),3===e&&(t.isPlayer=!0);var n={playerId:e.toString(),photo:"",score:0,rank:e+1,name:"player"};t.updateData(n)}this.add(this.leaders)},n.alignLeaders=function(){var e=this,t=this.leaders.length,n=t*this.leaders[0].height+8*(t-1);this.setSize(303,n),this.leaders.forEach((function(t,n){0!==n?Phaser.Display.Align.To.BottomCenter(t,e.leaders[n-1],0,8):Phaser.Display.Align.In.TopCenter(t,e)}))},n.createLoading=function(){this.loading=new vg.Z(this.scene),this.loading.revive(),this.add(this.loading)},n.hideContent=function(){this.leaders.forEach((function(e){return e.setAlpha(0)})),this.leaders.forEach((function(e){return e.hideContent()}))},n.runEntranceAnimation=function(){var e=(0,i.Z)(r().mark((function e(){var t,n,i,a,s=this;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Me()(t=this.leaders).call(t,(function(e,t){return new(o())((function(n){s.scene.add.tween({targets:[e],duration:250,delay:250*t/2,ease:Phaser.Math.Easing.Cubic.Out,props:{alpha:{from:0,to:1},y:{from:e.y+e.height/2,to:e.y},scale:{from:.85,to:1,ease:Phaser.Math.Easing.Elastic.Out,easeParams:[.1,.45],duration:1e3}},onComplete:n})}))})),e.next=3,o().all(i);case 3:return a=Me()(n=this.leaders).call(n,(function(e){return e.runEntranceAnimation()})),e.next=6,o().all(a);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),t}(Phaser.GameObjects.Container);for(var _g=function(e){function t(t){var n;return(n=e.call(this,t)||this).endTime=void 0,n.countdownTimer=void 0,n.timerText=void 0,n.updateCountdown=(0,i.Z)(r().mark((function e(){var t,i,a;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=Date.now(),i=1e3*n.endTime-t,a=Math.round(Math.abs(i)/864e5),i<0&&(i=0),0!==i){e.next=7;break}return n.timerText.setText("noCompetition"),e.abrupt("return");case 7:a>=1?(n.timerText.setTranslationParameter("count",a),n.timerText.setText("competitionEndsInDays")):(n.timerText.setTranslationParameter("time",(0,nr.F0)(Math.abs(i),!0)),n.timerText.setText("competitionEndsInHMS"));case 8:case"end":return e.stop()}}),e)}))),n.setSize(375,30),n.createTimerContainer(),n.createCountdownTimer(),t.add.existing((0,za.Z)(n)),n}(0,p.Z)(t,e);var n=t.prototype;return n.createTimerContainer=function(){this.timerText=this.scene.make.bitmapText({font:Fo.Z.PRIMARY.KEY,size:this.scene.fontSize(15.5),origin:{x:.5,y:0},y:-10}),this.timerText.setCenterAlign(),this.timerText.setTint(16579837),this.timerText.setMaxSize(300,40),this.add([this.timerText])},n.createCountdownTimer=function(){var e;void 0!=this.endTime&&(0!=this.endTime?(null==(e=this.countdownTimer)||e.destroy(),this.countdownTimer=this.scene.time.addEvent({loop:!0,delay:1e3,startAt:1e3,callback:this.updateCountdown})):this.timerText.setText("noCompetition"))},n.setCountdown=function(e){this.endTime=e,this.createCountdownTimer()},n.getRemain=function(){if(void 0!=this.endTime){var e=Date.now(),t=1e3*this.endTime-e;return t<0?0:t}},t}(Phaser.GameObjects.Container),Og=_g,Rg=An.Z.GAMEPLAY_DEFAULT,Lg=Rg.KEY,Dg=Rg.FRAME,Bg=Nf,Ng=ql.TOURNAMENT_BLOCK.TITLE,Mg=16777215,Gg=Bg.WIDTH,Fg=143.5,Zg=48,Ug={playerId:"10",name:"???",photo:"",score:0,rank:0},Hg=[],Wg=0;Wg<4;Wg++)Hg.push((0,f.Z)({},Ug,{rank:Wg+1}));var zg=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n.title=void 0,n.timer=void 0,n.topLine=void 0,n.bottomLine=void 0,n.leaderList=void 0,n.rematchButton=void 0,n.newGameButton=void 0,n.lines=[],n.buttons=[],n.scene=t,n.setSize(343,418),n.createBackground(),n.createTitle(),n.createTimer(),n.createTopLine(),n.createLeaderList(),n.createBottomLine(),n.createRematchButton(),n.createNewGameButton(),n.alignComponents(),n.createCloseButton(),n}(0,p.Z)(t,e);var n=t.prototype;return n.createBackground=function(){this.setSize(this.width,this.height);var e=new kl(this.scene,{key:"tournament-result-container",radius:6,border:24,width:this.width,height:this.height});this.add(e)},n.createTitle=function(){this.title=this.scene.make.bitmapText({font:Fo.Z.BOLD.KEY,size:this.scene.fontSize(Ng),text:"Summer Tournament",origin:{x:.5,y:.5}}),this.title.setIgnoreLanguage(!0,"en"),this.add(this.title)},n.createTimer=function(){this.timer=new Og(this.scene),this.add(this.timer)},n.createTopLine=function(){this.topLine=this.scene.add.line(0,0,0,0,Bg.WIDTH,0,Mg,.2),this.add(this.topLine),this.lines.push(this.topLine)},n.createLeaderList=function(){this.leaderList=new kg(this.scene),this.add(this.leaderList)},n.createBottomLine=function(){this.bottomLine=this.scene.add.line(0,0,0,0,Bg.WIDTH,0,Mg,.2),this.add(this.bottomLine),this.lines.push(this.bottomLine)},n.createRematchButton=function(){var e=this;this.rematchButton=new El.Z(this.scene,Fg,Zg),this.rematchButton.onClick=function(){e.scene instanceof hm&&e.scene.gameplay.replayGame(),e.scene.screen.close($a.o4.TOURNAMENTS_RESULT_SCREEN)},this.rematchButton.setName("RetryTournament");var t=new Ol.Z(this.scene,0,0,Fg,Zg,16,16777215,.24),n=this.scene.add.graphics();n.lineStyle(1,16777215),n.strokeRoundedRect(-71.75,-24,Fg,Zg,16);var i=new rf(this.scene,8,"tryAgain",Dg.IC_REPLAY);i.clearTint(),i.getIcon().setTintFill(16777215),this.rematchButton.add([t,n,i]).setSize(Fg,Zg),this.add([this.rematchButton]),this.buttons.push(this.rematchButton)},n.createNewGameButton=function(){var e=this;this.newGameButton=new Th.Z(this.scene,Fg,Zg,16,16777215),this.newGameButton.onClick=(0,i.Z)(r().mark((function t(){return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.scene.gameplay.handleShowInterstitialAd();case 2:return t.next=4,e.scene.handlePlaySingle();case 4:e.scene.screen.close($a.o4.TOURNAMENTS_RESULT_SCREEN);case 5:case"end":return t.stop()}}),t)}))),this.newGameButton.setName("NewGame");var t=new rf(this.scene);this.newGameButton.add(t),this.newGameButton.setSize(Fg,Zg),this.add([this.newGameButton]),this.buttons.push(this.newGameButton)},n.createCloseButton=function(){var e=this;if(GameCore.Utils.Valid.isDebugger()){var t=new El.Z(this.scene,40,40);this.add(t);var n=this.scene.add.image(0,0,Lg,Dg.IC_BG_OFF);n.setWorldSize(40,40);var a=this.scene.make.bitmapText({font:Fo.Z.PRIMARY.KEY,size:this.scene.fontSize(10),text:"Close",origin:{x:.5,y:.5}});a.setCenterAlign(),t.add([n,a]),Phaser.Display.Align.In.TopRight(t,this,0,-0),t.onClick=(0,i.Z)(r().mark((function t(){return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.scene.screen.close($a.o4.TOURNAMENTS_RESULT_SCREEN);case 1:case"end":return t.stop()}}),t)})))}},n.alignComponents=function(){Phaser.Display.Align.In.TopCenter(this.title,this,0,-16),Phaser.Display.Align.To.BottomCenter(this.timer,this.title,0,6),Phaser.Display.Align.To.BottomCenter(this.topLine,this.timer,0,20),Phaser.Display.Align.To.BottomCenter(this.leaderList,this.topLine,0,20),Phaser.Display.Align.To.BottomCenter(this.bottomLine,this.leaderList,0,20),Phaser.Display.Align.To.BottomLeft(this.rematchButton,this.bottomLine,0,24),Phaser.Display.Align.To.BottomRight(this.newGameButton,this.bottomLine,0,24);var e=this.rematchButton.x,t=this.newGameButton.x;Phaser.Display.Align.In.BottomCenter(this.rematchButton,this,0,-16),Phaser.Display.Align.In.BottomCenter(this.newGameButton,this,0,-16),this.rematchButton.x=e,this.newGameButton.x=t},n.updateTitle=function(e){void 0===e&&(e="Your tournament");var t=GameCore.Utils.String.removeDiacritics(e);if(this.title.setText(t),!(this.title.width<=Gg))for(var n=1;n<t.length;n++)if(this.title.setText(t.substring(0,n)+"..."),this.title.width>Gg){this.title.setText(t.substring(0,n-1)+"...");break}},n.updateTimer=function(e){this.timer.setCountdown(e)},n.updateLeadersViaId=function(){var e=(0,i.Z)(r().mark((function e(t){var n,i,a,s,o,c,u,l,h,d,p=this;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=L()(n=[]).call(n,Hg),this.leaderList.loading.revive(),this.leaderList.bringToTop(this.leaderList.loading),e.prev=3,e.next=6,(0,zr.H$)(t,{limit:4});case 6:if(!((a=e.sent).length>0)){e.next=24;break}return o=Me()(a).call(a,(function(e){return e.playerId})),e.next=12,this.scene.profile.requestProfiles(o);case 12:if(c=this.scene.profile.getProfiles(),u=!1,l=Be()(s=Me()(a).call(a,(function(e){var t=e.playerId,n=e.score,i=e.rank,a=c[t];if(t===p.scene.player.getPlayerId()&&(u=!0),!a)return{playerId:t,photo:"",score:n,rank:i,name:"Player"};var r=a.name;return{playerId:t,photo:a.photo,score:n,rank:i,name:r}}))).call(s,(function(e){return null!==e})),!(l.length<1)){e.next=17;break}throw new Error("Leaderboard is empty");case 17:if(this.leaderList.revive(),l.forEach((function(e,t){i[t]=e})),u){e.next=24;break}return e.next=22,this.getCurrentPlayerLeaderDataPayload(t);case 22:h=e.sent,i[3]=(0,f.Z)({},h,{name:"You"});case 24:d=this.scene.player.getPlayerId(),i.forEach((function(e){e.playerId===d&&(e.name="You")})),this.leaderList.updateLeaders(i),e.next=33;break;case 30:e.prev=30,e.t0=e.catch(3);case 33:return e.prev=33,this.leaderList.loading.kill(),e.finish(33);case 36:case"end":return e.stop()}}),e,this,[[3,30,33,36]])})));return function(t){return e.apply(this,arguments)}}(),n.getCurrentPlayerLeaderDataPayload=function(){var e=(0,i.Z)(r().mark((function e(t){var n,i,a,s,o,c,u;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.scene.player.getPlayer(),i=n.playerId,a=n.name,s=n.photo,e.next=3,(0,zr.xB)(i,t);case 3:return o=e.sent,c=o.score,u=o.rank,e.abrupt("return",{playerId:i,photo:s,score:c,rank:u,name:a});case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.hideContent=function(){this.leaderList.hideContent(),this.lines.forEach((function(e){e.setAlpha(0),e.scaleX=0})),this.buttons.forEach((function(e){return e.setAlpha(0)}))},n.runEntranceAnimationLines=function(){var e=(0,i.Z)(r().mark((function e(){var t,n,i=this;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return 200,n=Me()(t=this.lines).call(t,(function(e,t){return new(o())((function(n){i.scene.add.tween({targets:[e],duration:200,delay:200*t/2,props:{alpha:{from:0,to:1},scaleX:{from:0,to:1}},onComplete:n})}))})),e.next=4,o().all(n);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.runEntranceAnimationButtons=function(){var e=(0,i.Z)(r().mark((function e(){var t,n,i=this;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Me()(t=this.buttons).call(t,(function(e){return new(o())((function(t){i.scene.add.tween({targets:e,alpha:1,duration:200,onComplete:function(){e.setDisabled(!1),t(),i.newGameButton.runPulsate()}})}))})),e.next=3,o().all(n);case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.runEntranceAnimation=function(){var e=(0,i.Z)(r().mark((function e(){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.runEntranceAnimationLines();case 2:return e.next=4,this.leaderList.runEntranceAnimation();case 4:return e.next=6,this.scene.gameplay.finishGame();case 6:return e.next=8,this.runEntranceAnimationButtons();case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),t}(Phaser.GameObjects.Container),Yg=function(e){function t(t,n,i,a){var r;return(r=e.call(this,t,n,i,a)||this).scene=void 0,r.fadeInAnimation=void 0,r.fadeOutAnimation=void 0,r.slideInAnimation=void 0,r.container=void 0,r.winDecoration=void 0,r.footer=void 0,r.closed=!1,r.handleClickTournaments=function(){r.scene.time.delayedCall(100,(function(){r.closed||r.close()}))},r.setBackground=function(){var e=r.scene.theme.getCurrentThemeConfig().backgroundKey;r.background.setTexture(e);var t=r.scene.gameZone,n=t.width,i=t.height;r.background.setWorldSize(n,i),r.scene.world.isLandscape()&&r.background.setScale(r.background.scaleY,r.background.scaleY),r.scene.events.on(no.BACKGROUND_CHANGED,(function(e){r.background.setTexture(e),r.background.setWorldSize(n,i),r.scene.world.isLandscape()&&r.background.setScale(r.background.scaleY,r.background.scaleY)}))},r.scene=t,r.setBackground(),r.createContainer(),r.createRibbonBanner(),r.createFooter(),r.createBottomLogo(),r.setDepth($a.Ks.POPUP),En.Z.removeObject(r.background),r}(0,p.Z)(t,e);var n=t.prototype;return n.createContainer=function(){this.container=new zg(this.scene),this.add(this.container)},n.createRibbonBanner=function(){this.winDecoration=new hg(this.scene);var e=this.scene.world.getWorldSize().height,t=this.scene.ads.getBannerHeight(),n=Math.max(0,-e/2+t/2+242+90);Phaser.Display.Align.In.TopCenter(this.winDecoration,this,0,n),this.add(this.winDecoration)},n.createFooter=function(){this.footer=new ip(this.scene,!1,$a.o4.NO_MORE_MOVES_SCREEN),this.add(this.footer),this.bringToTop(this.footer),this.footer.setInteractive();var e=this.scene.ads.getBannerHeight(),t=this.scene.gameZone.width>375?-10:0;Phaser.Display.Align.In.BottomCenter(this.footer,this.background,0,-e+t)},n.createBottomLogo=function(){if(!this.scene.world.isLandscape()){var e=new op(this.scene);this.add(e),Phaser.Display.Align.In.BottomCenter(e,this)}},n.open=function(){var t=(0,i.Z)(r().mark((function t(n){return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.prototype.open.call(this,n),this.updateInfo(),this.container.setAlpha(1),this.container.setInteractive(),this.background.setAlpha(1),this.runOpenAnimation(),this.closed=!1,this.scene.children.bringToTop(this.scene.gameplay.confettiSmallFallDown),this.scene.gameplay.confettiSmallFallDown.run(8,0,0);case 9:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),n.updateInfo=function(){var e=(0,i.Z)(r().mark((function e(){var t,n,i;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,mg.getData().catch((function(){return{id:0,title:"Your Tournament",endTime:604800+Date.now()/1e3,contextID:""}}));case 2:if(n=e.sent){e.next=5;break}return e.abrupt("return");case 5:if(this.container.updateTitle(n.title),this.container.updateTimer(n.endTime),!(i=null==(t=n.payload)?void 0:t.leaderboardId)){e.next=11;break}return e.next=11,this.container.updateLeadersViaId(i);case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.close=function(){this.closed=!0,this.runCloseAnimation(),this.stopConfettiAnimation()},n.runOpenAnimation=function(){var e=(0,i.Z)(r().mark((function e(){var t,n,a,s=this;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==(t=this.slideInAnimation)||null==(n=t.tween)||!n.isPlaying()){e.next=2;break}return e.abrupt("return");case 2:return this.scene.audio.playSound(er.Z.POPUP_SHOW),a=this.scene.ads.getBannerHeight(),this.container.setAlpha(0),this.container.y=a,this.container.hideContent(),this.winDecoration.bunting.stopWavingAnimation(),this.container.newGameButton.stopPulsate(),this.slideInAnimation||(this.slideInAnimation=new To.Z({targets:[this.container],ease:Phaser.Math.Easing.Back.Out,props:{y:{from:a,to:-a/2},alpha:{from:0,to:1}},duration:300,onComplete:function(){var e=(0,i.Z)(r().mark((function e(){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.container.runEntranceAnimation();case 2:s.footer.playBtn.setDisabled(!1);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()})),this.fadeInAnimation||(this.fadeInAnimation=new Hc.Z({targets:[this],duration:300})),this.fadeInAnimation.play(),e.next=14,this.winDecoration.bunting.runEntranceAnimation();case 14:this.winDecoration.bunting.playWavingAnimation(),this.slideInAnimation.play();case 16:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.runCloseAnimation=function(){var t,n,i=this;null!=(t=this.fadeOutAnimation)&&null!=(n=t.tween)&&n.isPlaying()||(this.scene.audio.playSound(er.Z.POPUP_OFF),this.fadeOutAnimation||(this.fadeOutAnimation=new Sh.Z({targets:[this],props:{alpha:0},duration:300,onComplete:function(){e.prototype.close.call(i),i.footer.playBtn.setDisabled(!0)}})),this.fadeOutAnimation.play(),this.winDecoration.bunting.stopWavingAnimation())},n.stopConfettiAnimation=function(){this.scene.gameplay.confettiSmallFallDown.emitter.stop()},t}(GameCore.Screen),Vg=An.Z.GAMEPLAY_DEFAULT,Kg=Vg.KEY,jg=Vg.FRAME,Xg=function(e){function t(t){var n;return(n=e.call(this,t)||this).background=void 0,n.wellDoneLetterBitmapTexts=[],n.outOfMovesLetterBitmapTexts=[],n.wellDoneBitmapText=void 0,n.outOfMovesBitmapText=void 0,n.isPlayingAnimation=!1,n.isWellDone=!0,n.setSize(300,300),n.createRawTexts(),n.createBackground(),n.createWellDoneLetterBitmapTexts(),n.createOutOfMovesLetterBitmapTexts(),n.alignComponents(),n.createDevButtons(),n}(0,p.Z)(t,e);var n=t.prototype;return n.enableWellDone=function(e){void 0===e&&(e=!0),this.isWellDone=e},n.createBackground=function(){this.background=new Ol.Z(this.scene,0,0,this.width,this.height,20,16579837,0),this.add(this.background)},n.createRawTexts=function(){this.wellDoneBitmapText=this.scene.make.bitmapText({font:Fo.Z.BOLD.KEY,size:this.scene.fontSize(30),text:"WELLDONE",origin:{x:.5,y:.5}}),this.wellDoneBitmapText.setMaxSize(360,500,!0),this.wellDoneBitmapText.setPosition(187.5,333.5),this.wellDoneBitmapText.setDepth(1e12),this.wellDoneBitmapText.kill(),this.outOfMovesBitmapText=this.scene.make.bitmapText({font:Fo.Z.BOLD.KEY,size:this.scene.fontSize(30),text:"OUTOFMOVES",origin:{x:.5,y:.5}}),this.outOfMovesBitmapText.setMaxSize(360,500,!0),this.outOfMovesBitmapText.setPosition(187.5,333.5),this.outOfMovesBitmapText.setDepth(1e12),this.outOfMovesBitmapText.kill(),this.scene.add.existing(this.outOfMovesBitmapText),this.scene.add.existing(this.wellDoneBitmapText)},n.createWellDoneLetterBitmapTexts=function(){var e=this;this.createBitmapTextsFromString(this.scene.i18n.t("WELLDONE"),this.wellDoneLetterBitmapTexts),this.wellDoneLetterBitmapTexts.forEach((function(t){t.setFontSize(e.wellDoneBitmapText.fontSize)}))},n.createOutOfMovesLetterBitmapTexts=function(){var e=this;this.createBitmapTextsFromString(this.scene.i18n.t("OUTOFMOVES"),this.outOfMovesLetterBitmapTexts),this.outOfMovesLetterBitmapTexts.forEach((function(t){t.setFontSize(e.outOfMovesBitmapText.fontSize)}))},n.createBitmapTextsFromString=function(e,t){for(var n=e.split(""),i=0;i<Math.max(n.length,t.length);i++){if(i>=t.length){var a=this.scene.make.bitmapText({font:Fo.Z.BOLD.KEY,size:this.scene.fontSize(30),origin:{x:.5,y:.5},text:""});a.setIgnoreLanguage(),a.setAlpha(0),t.push(a),this.add(a)}i>=n.length?(t[i].kill(),t[i].setText("")):(t[i].revive(),t[i].setText(n[i]))}},n.alignComponents=function(){[this.wellDoneLetterBitmapTexts,this.outOfMovesLetterBitmapTexts].forEach((function(e){var t=[];(e=Be()(e).call(e,(function(e){return e.active&&e.visible}))).forEach((function(n,i){if(0!=e[i].text.length)if(0==i){var a=e[i].getTextBounds().characters[0];a&&t.push(a.w/2)}else{var r=e[i-1].getTextBounds().characters[0],s=e[i].getTextBounds().characters[0];if(r&&s){var o=" "==e[i-1].text?10:r.w,c=" "==e[i].text?10:s.w;t.push(t[i-1]+o/2+1+c/2)}}}));var n=-t[t.length-1]/2-5;e.forEach((function(i,a){var r=-(e.length-1)/2*25+25*a;i.setX(r),i.setX(n+t[a])}))}))},n.createDevButtons=function(){GameCore.Utils.Valid.isDebugger()&&this.createCloseButton()},n.createCloseButton=function(){var e=this,t=new El.Z(this.scene,40,40),n=this.scene.add.image(0,0,Kg,jg.IC_BG_OFF);n.setWorldSize(40,40);var i=this.scene.make.bitmapText({font:Fo.Z.PRIMARY.KEY,size:this.scene.fontSize(10),text:"X",origin:{x:.5,y:.5}});i.setCenterAlign(),t.add([n,i]),Phaser.Display.Align.To.TopRight(t,this),t.onClick=function(){e.isPlayingAnimation||e.scene.screen.close($a.o4.WELL_DONE_SCREEN)},this.add(t)},n.hideContent=function(){[this.wellDoneLetterBitmapTexts,this.outOfMovesLetterBitmapTexts].forEach((function(e){e.forEach((function(e){e.setAlpha(0),e.setAngle(10)}))}))},n.runEntranceAnimationText=function(){var e=(0,i.Z)(r().mark((function e(){var t,n,i=this;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return 100,this.createWellDoneLetterBitmapTexts(),this.createOutOfMovesLetterBitmapTexts(),this.alignComponents(),t=this.isWellDone?this.wellDoneLetterBitmapTexts:this.outOfMovesLetterBitmapTexts,n=Me()(t).call(t,(function(e,t){return new(o())((function(n){i.scene.add.tween({targets:e,duration:100,delay:100*t/2,ease:Phaser.Math.Easing.Cubic.Out,props:{alpha:1,angle:0,scale:{from:.6,to:1,ease:Phaser.Math.Easing.Elastic.Out,easeParams:[.1,.45],duration:1e3}},onComplete:n})}))})),e.next=8,o().all(n);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.runEntranceAnimation=function(){var e=(0,i.Z)(r().mark((function e(){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isPlayingAnimation){e.next=2;break}return e.abrupt("return");case 2:return this.isPlayingAnimation=!0,e.next=5,this.runEntranceAnimationText();case 5:this.isPlayingAnimation=!1;case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),t}(Phaser.GameObjects.Container),Jg=function(e){function t(t,n,i,a){var r;return(r=e.call(this,t,n,i,a)||this).slideInAnimation=void 0,r.fadeInAnimation=void 0,r.fadeOutAnimation=void 0,r.container=void 0,r.setDepth($a.Ks.POPUP),r.container=new Xg(t),r.add(r.container),r.background.setTint(1315862),r.background.setAlpha(.5),r}(0,p.Z)(t,e);var n=t.prototype;return n.open=function(t){e.prototype.open.call(this,t),this.container.setAlpha(1),this.background.setAlpha(.5),this.container.setInteractive();var n=(null!=t?t:{}).wellDone;this.container.enableWellDone("boolean"!==typeof n||n),this.runOpenAnimation()},n.close=function(){this.runCloseAnimation()},n.runOpenAnimation=function(){var e=(0,i.Z)(r().mark((function e(){var t,n,a,s=this;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==(t=this.slideInAnimation)||null==(n=t.tween)||!n.isPlaying()){e.next=2;break}return e.abrupt("return");case 2:this.scene.game.events.emit("pause-resize"),this.scene.audio.playSound(er.Z.POPUP_SHOW),a=this.scene.ads.getBannerHeight(),this.container.hideContent(),this.slideInAnimation||(this.slideInAnimation=new To.Z({targets:[this.container],props:{y:{from:a,to:-a/2,ease:Phaser.Math.Easing.Back.Out}},duration:300,onComplete:function(){var e=(0,i.Z)(r().mark((function e(){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.container.runEntranceAnimation();case 2:s.scene.game.events.emit("resume-resize");case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()})),this.fadeInAnimation||(this.fadeInAnimation=new Hc.Z({targets:[this],duration:300})),this.slideInAnimation.play(),this.fadeInAnimation.play();case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.runCloseAnimation=function(){var t,n,i=this;null!=(t=this.fadeOutAnimation)&&null!=(n=t.tween)&&n.isPlaying()||(this.scene.audio.playSound(er.Z.POPUP_OFF),this.fadeOutAnimation||(this.fadeOutAnimation=new Sh.Z({targets:[this],ease:Phaser.Math.Easing.Linear,props:{alpha:0},duration:300,onComplete:function(){e.prototype.close.call(i)}})),this.fadeOutAnimation.play())},t}(GameCore.Screen),qg=n(664),Qg=An.Z.LANGUAGES,$g=Qg.KEY,em=Qg.FRAME,tm=function(e){function t(t,n){var a;(a=e.call(this,t,300,39)||this).languageCode=void 0,a.flag=void 0,a.languageName=void 0,a.iconUncheck=void 0,a.iconCheck=void 0,a.setName("Language-"+n),a.languageCode=n;var s=1/t.world.getPixelRatio(),o=a.scene.add.image(0,0,$g,"name/"+n);o.setScale(s),o.setWorldSize(o.displayWidth,o.displayHeight);var c=a.scene.add.image(0,0,$g,"flags/"+n);c.setWorldSize(40,40);var u=a.scene.add.image(0,0,$g,em.UNCHECK);u.setWorldSize(20,20);var l=a.scene.add.image(0,0,$g,em.CHECK);return l.setWorldSize(26,20),Phaser.Display.Align.In.LeftCenter(c,(0,za.Z)(a)),Phaser.Display.Align.To.RightCenter(o,c,20),Phaser.Display.Align.In.RightCenter(u,(0,za.Z)(a)),Phaser.Display.Align.In.Center(l,u,0,-3),a.flag=c,a.iconCheck=l,a.iconUncheck=u,a.languageName=o,a.add([c,o,u,l]),a.setUncheck(),a.scene.lang.language===a.languageCode&&a.setCheck(),a.onClick=(0,i.Z)(r().mark((function e(){var t;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(t=a.scene.game.globalScene).screen.open($a.o4.NOTIFY_SCREEN,{message:"loading",loading:!0}),e.next=4,a.scene.lang.changeLanguage(a.languageCode);case 4:t.screen.close($a.o4.NOTIFY_SCREEN),a.scene.player.setSetting("language2",a.languageCode);case 6:case"end":return e.stop()}}),e)}))),a.listenEventLanguageChanged(),a}(0,p.Z)(t,e);var n=t.prototype;return n.setCheck=function(){this.iconCheck.revive(),this.iconUncheck.setFrame(em.UNCHECK)},n.setUncheck=function(){this.iconCheck.kill(),this.iconUncheck.setFrame(em.UNCHECK_GREY)},n.listenEventLanguageChanged=function(){var e=this;this.scene.i18n.on("languageChanged",(function(){e.scene.lang.language===e.languageCode?e.setCheck():e.setUncheck()}))},t}(El.Z),nm=tm,im=An.Z.GAMEPLAY_DEFAULT,am=im.KEY,rm=(im.FRAME,function(e){function t(t){var n;return(n=e.call(this,t)||this).bg=void 0,n.createBackground(),n.createContent(),n.createCloseButton(),t.add.existing((0,za.Z)(n)),n}(0,p.Z)(t,e);var n=t.prototype;return n.createBackground=function(){var e=new Ol.Z(this.scene,0,0,340,487,20,16579837);this.add(e),this.bg=e,this.setSize(e.width,e.height),this.bg.setInteractive()},n.createContent=function(){var e=this,t=this.scene.make.bitmapText({font:Fo.Z.BOLD.KEY,size:this.scene.fontSize(22),text:"languages",origin:{x:.5,y:.5}});t.setMaxSize(250,40,!0),t.setTint(1907997),this.add(t),Phaser.Display.Align.In.TopCenter(t,this,0,-12);var n=this.scene.lang.supportedLanguages,i=Me()(n).call(n,(function(t){return e.createLanguageButton(t)})),a=t.y+50,r=this.scene.add.line(0,a-19.5,0,0,340,0,3774208,1);r.setLineWidth(.6),this.add(r);for(var s=0;s<i.length;s++)if(i[s].setY(39*s+a),s<i.length-1){var o=this.scene.add.line(0,39*s+a+19.5,0,0,300,0,1907997,.2);o.setLineWidth(.4),this.add(o)}this.add(i)},n.createLanguageButton=function(e){return new nm(this.scene,e)},n.createCloseButton=function(){var e=this,t=new El.Z(this.scene,40,40);t.setName("Close"),t.onClick=function(){e.scene.screen.close($a.o4.LANGUAGES_SCREEN)};var n=this.scene.add.image(0,0,am,"ic_close_gray");n.setWorldSize(24,24),t.add(n),Phaser.Display.Align.In.TopRight(t,this.bg,-4,-6),this.add([t])},t}(Phaser.GameObjects.Container)),sm=rm,om=function(e){function t(t,n,i,a){var r;return(r=e.call(this,t,n,i,a)||this).slideInAnimation=void 0,r.fadeInAnimation=void 0,r.fadeOutAnimation=void 0,r.languagesContainer=void 0,r.setDepth($a.Ks.POPUP),r.languagesContainer=new sm(t),r.add(r.languagesContainer),r.background.setTint(1315862),r.background.setAlpha(.5),r.background.setInteractive(),r}(0,p.Z)(t,e);var n=t.prototype;return n.open=function(){e.prototype.open.call(this),this.runOpenAnimation()},n.close=function(){this.runCloseAnimation()},n.runOpenAnimation=function(){var e=this;this.scene.audio.playSound(er.Z.POPUP_SHOW);var t=this.scene.ads.getBannerHeight();this.slideInAnimation||(this.slideInAnimation=new To.Z({targets:[this.languagesContainer],props:{y:{from:this.height/2,to:this.height/2-this.languagesContainer.height/2-20-t,ease:Phaser.Math.Easing.Back.Out}},duration:300,onComplete:function(){e.background.once(Phaser.Input.Events.POINTER_DOWN,(function(){return e.scene.screen.close($a.o4.SETTINGS_SCREEN)}))}})),this.fadeInAnimation||(this.fadeInAnimation=new Hc.Z({targets:[this],duration:300})),this.slideInAnimation.play(),this.fadeInAnimation.play()},n.runCloseAnimation=function(){var t=this;this.scene.audio.playSound(er.Z.POPUP_OFF),this.fadeOutAnimation||(this.fadeOutAnimation=new Sh.Z({targets:[this],props:{alpha:0},duration:300,onComplete:function(){t.setAlpha(1),e.prototype.close.call(t)}})),this.fadeOutAnimation.play()},t}(GameCore.Screen),cm=om,um=An.Z.GAMEPLAY_DEFAULT,lm=(um.KEY,um.FRAME,function(e){function t(){for(var t,n,a=arguments.length,s=new Array(a),o=0;o<a;o++)s[o]=arguments[o];return(n=e.call.apply(e,L()(t=[this]).call(t,s))||this).gameplay=void 0,n.header=void 0,n.footer=void 0,n.gameStats=void 0,n.levelLoader=void 0,n.themeHandler=void 0,n.gameModeManager=void 0,n.bottomLogo=void 0,n.seedPanel=void 0,n.handleFinishingChallenge=function(){n.screen.open($a.o4.PLAY_WITH_FRIEND_GAME_OVER_SCREEN),n.screen.get($a.o4.PLAY_WITH_FRIEND_GAME_OVER_SCREEN).updateFinishingChallenge()},n.create=function(){e.prototype.create.call((0,za.Z)(n)),mu(),n.themeHandler=new _d((0,za.Z)(n)),n.gameModeManager=new Mp((0,za.Z)(n)),n.gameStats=new Zh((0,za.Z)(n)),n.levelLoader=new Hh((0,za.Z)(n)),n.header=new Eh((0,za.Z)(n)),n.footer=new ih((0,za.Z)(n));var t=n.ads.getBannerHeight();Phaser.Display.Align.In.TopCenter(n.header,n.gameZone,0,0);var i=n.gameZone.width>375?-10:0;Phaser.Display.Align.In.BottomCenter(n.footer,n.gameZone,0,-t+i),n.gameplay=new Jl((0,za.Z)(n)),n.createScreens(),n.ads.preloadInterstitialAdAsync().catch((function(){})),n.header.alignChildren(),n.createEditor(),n.processStartGame(),n.time.delayedCall(1e3,(function(){Kl.emit(jl.SCENE_CREATED)}));var a=n.game.globalScene;a instanceof qg.Z&&a.hideBackground(),n.game.events.on("world-resize",n.handleWorldResize)},n.handleWorldResize=function(){var e=n.ads.getBannerHeight();if(mu(),n.scaleGame(),n.createGameZone(),n.createBackground(n.background.texture.key,n.background.frame.name),n.game.events.emit("game-zone-updated"),Phaser.Display.Align.In.TopCenter(n.header,n.gameZone,0,0),n.world.isLandscape())Phaser.Display.Align.In.BottomCenter(n.footer,n.gameZone,0,-10);else{var t=n.gameZone.width>375?-10:0;Phaser.Display.Align.In.BottomCenter(n.footer,n.gameZone,0,-e+t)}n.header.alignChildren(),n.game.events.emit("footer-updated"),n.gameplay.boardGame.updatePlacementSize(),n.gameplay.boardGame.alignBoard(!0),n.themeHandler.updateCardStyle()},n.setBackground=function(e){n.createBackground(e)},n.run=function(){n.player.getPlayerIsNew()&&n.gameplay.startNewGame(),n.ads.getBannerHeight()>0&&n.createBottomLogo(),n.ads.showBannerAdAsync().catch((function(e){}))},n.handlePlayWithFriend=(0,i.Z)(r().mark((function e(){var t,a;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.storage.dispatch(function(){var e=(0,i.Z)(r().mark((function e(t){var n,i,a,s,o,c,u,l,d,f,p,g,m,v,y,b;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,n=window.game,i=n.player,a=n.facebook,n.globalScene.screen.open($a.o4.NOTIFY_SCREEN,{message:"loading",loading:!0}),s=i.getPlayerId(),o=i.getConnectedPlayerIds(100,0),c=i.getConnectedPlayers(100,0),0==(u=Be()(o).call(o,(function(e){var t;return nn()(t=so.instance.friendsChallenged).call(t,e)<0&&e!=s}))).length&&(u.push.apply(u,o),so.instance.friendsChallenged=[]),l="",d="",f=a.contextType,p=null,u.length>0&&(g=Phaser.Math.RND.between(0,u.length-1),l=u[g],c[l]&&(p=c[l],so.instance.friendsChallenged.push(l))),!l||"string"!==typeof l){e.next=18;break}return e.next=17,a.createAsync(l);case 17:d=e.sent;case 18:if(p&&d){e.next=22;break}return e.next=21,t(po());case 21:return e.abrupt("return");case 22:return oo({contextId:d}),t(Qs()),v=(m=p).name,y=m.photo,b={playerId:l,name:v,photo:y},e.next=28,t(bo(ya,b));case 28:t(Ta(d,f)),uo(100),e.next=38;break;case 32:if(e.prev=32,e.t0=e.catch(0),uo(100),!(e.t0 instanceof Fr)){e.next=37;break}return e.abrupt("return");case 37:(0,h.tO)(e.t0);case 38:return e.prev=38,e.finish(38);case 40:case"end":return e.stop()}}),e,null,[[0,32,38,40]])})));return function(t){return e.apply(this,arguments)}}());case 2:if(!so.instance.isChallengeMode()){e.next=11;break}if(t=n.storage.getState(),void 0==(null==(a=vs(t))?void 0:a.seed)){e.next=10;break}return n.gameplay.startGameWith(a.seed),e.abrupt("return");case 10:case 11:n.gameplay.startNewGame();case 12:case"end":return e.stop()}}),e)}))),n.handlePlaySingle=(0,i.Z)(r().mark((function e(){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Eo();case 2:return e.next=4,n.storage.dispatch(ho());case 4:n.gameplay.checkGameplayBeforeStartNewGame(),n.gameplay.startNewGame();case 6:case"end":return e.stop()}}),e)}))),n}(0,p.Z)(t,e);var a=t.prototype;return a.preload=function(){this.events.on(Phaser.Scenes.Events.WAKE,this.run),this.events.on(Phaser.Scenes.Events.CREATE,this.run),this.events.once("player-finish-challenge",this.handleFinishingChallenge)},a.processStartGame=function(){var e=this;this.showLoading(),this.gameModeManager.start(),this.header.setVisible(!1),this.time.delayedCall(500,(function(){e.gameplay.startGame(),e.header.setVisible(!0)}))},a.showLoading=function(){var e=this,t=new vg.Z(this);t.setDepth(mn.Z.ON_TOP),t.setVisible(!0),t.setScale(1.3),this.add.existing(t),Phaser.Display.Align.In.Center(t,this.gameZone,0,0),this.time.delayedCall(500,(function(){e.tweens.add({targets:[t],alpha:0,duration:300})}))},a.createEditor=function(){var e=(0,i.Z)(r().mark((function e(){var t;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!GameCore.Utils.Valid.isDebugger()){e.next=5;break}return e.next=3,Promise.all([n.e(498),n.e(48)]).then(n.bind(n,619));case 3:t=e.sent.default,this.seedPanel=new t(this);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),a.createBottomLogo=function(){var e=new op(this);e.setDepth(mn.Z.FOOTER_LOGO),this.add.existing(e),Phaser.Display.Align.In.BottomCenter(e,this.gameZone),this.bottomLogo=e},a.createScreens=function(){this.screen.add($a.o4.NO_MORE_MOVES_SCREEN,kp),this.screen.add($a.o4.VICTORY_SCREEN,up),this.screen.add($a.o4.PLAY_SCREEN,xh),this.screen.add($a.o4.SETTINGS_SCREEN,Mh),this.screen.add($a.o4.LANGUAGES_SCREEN,cm),this.screen.add($a.o4.GAME_STATS_SCREEN,Cd),this.screen.add($a.o4.THEME_SCREEN,Xd),this.screen.add($a.o4.HOW_TO_PLAY_SCREEN,Qd),this.screen.add($a.o4.NOTIFICATION_SCREEN,Lp),this.screen.add($a.o4.PLAY_WITH_FRIEND_GAME_OVER_SCREEN,pg),this.screen.add($a.o4.TOURNAMENTS_RESULT_SCREEN,Yg),this.screen.add($a.o4.WELL_DONE_SCREEN,Jg)},a.checkNewUser=function(){var e=this;(this.player.getPlayerIsNew()||GameCore.Configs.Tutorial.ForceUseTutorial)&&this.time.delayedCall(1e3,(function(){e.screen.open($a.o4.HOW_TO_PLAY_SCREEN),e.scene.scene.player.incUserGuideDisplays()}))},a.update=function(e,t){this.gameplay.update(t),this.header.update()},t}(Ua.Z)),hm=lm;var dm=hm,fm=An.Z.DEFAULT,pm=fm.KEY,gm=fm.FRAME,mm=function(e){function t(t){var n;return(n=e.call(this,t,pm,gm.BUTTON_YELLOW_CIRCLE)||this).scene=void 0,n.scene=t,n.button.setSize(87,68).setDisplaySize(87,68),n.setName("Home"),n.createIcon(),n}return(0,p.Z)(t,e),t.prototype.createIcon=function(){var e=this.scene.add.image(0,0,pm,gm.ICON_FLAT_HOME);e.setSize(43,43).setDisplaySize(43,43),this.add(e),Phaser.Display.Align.In.Center(e,this)},t}(ec.Z),vm=mm,ym=An.Z.DEFAULT,bm=ym.KEY,Am=ym.FRAME,Em=function(e){function t(t){var n;return(n=e.call(this,t,bm,Am.BUTTON_GREEN)||this).scene=void 0,n.scene=t,n.button.setWorldSize(170,72),n.setName("PlayWithFriends"),n.createLabel(),n}return(0,p.Z)(t,e),t.prototype.createLabel=function(){var e=this.scene.make.bitmapText({font:Fo.Z.PRIMARY.KEY,size:13,text:"PLAY"}),t=10;Phaser.Display.Align.In.Center(e,this,0,-t);var n=this.scene.make.bitmapText({font:Fo.Z.PRIMARY.KEY,size:9,text:"WITH FRIENDS"});t=12,Phaser.Display.Align.In.Center(n,this,0,t),this.add([e,n])},t}(ec.Z),Sm=Em,Tm=An.Z.DEFAULT,Cm=Tm.KEY,wm=Tm.FRAME,Im=function(e){function t(t){var n;return(n=e.call(this,t,Cm,wm.BUTTON_YELLOW_CIRCLE)||this).scene=void 0,n.scene=t,n.button.setSize(87,68).setDisplaySize(87,68),n.setName("Share"),n.createIcon(),n}return(0,p.Z)(t,e),t.prototype.createIcon=function(){var e=this.scene.add.image(0,0,Cm,wm.ICON_FLAT_SHARE);e.setSize(43,43).setDisplaySize(43,43),this.add(e),Phaser.Display.Align.In.Center(e,this)},t}(ec.Z),xm=Im,Pm=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n.homeButton=void 0,n.playButton=void 0,n.shareButton=void 0,n.scene=t,n.setName("FooterBar"),n.createButtons(),n.alignButtons(),n.scene.add.existing((0,za.Z)(n)),n}(0,p.Z)(t,e);var n=t.prototype;return n.alignButtons=function(){Phaser.Display.Align.In.Center(this.homeButton,this,-140),Phaser.Display.Align.In.Center(this.playButton,this,0),Phaser.Display.Align.In.Center(this.shareButton,this,140)},n.createButtons=function(){this.createHomeButton(),this.createPlayButton(),this.createShareButton()},n.createHomeButton=function(){this.homeButton=new vm(this.scene),this.add(this.homeButton)},n.createPlayButton=function(){this.playButton=new Sm(this.scene),this.add(this.playButton)},n.createShareButton=function(){this.shareButton=new xm(this.scene),this.add(this.shareButton)},t}(Phaser.GameObjects.Container),km=Pm,_m=n(687),Om=n(686),Rm=(function(e){function t(t){var n;return(n=e.call(this,t,"UpdateAbleObject")||this).updateInfo=void 0,n}(0,p.Z)(t,e)}(Phaser.GameObjects.GameObject),function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).classType=void 0,i.listConfigs=void 0,i.padding=void 0,i.startObjectIndex=void 0,i.endObjectIndex=void 0,i.listObjects=void 0,i.classType=n.classType,i.listConfigs=n.listConfigs,i.padding=n.padding?n.padding:0,i.objects.classType=i.classType,i.updateConfig(i.listConfigs),i}(0,p.Z)(t,e);var n=t.prototype;return n.reset=function(){e.prototype.reset.call(this),this.killAndHideAll()},n.getChildren=function(){var e;return Be()(e=this.listObjects).call(e,(function(e){return void 0!=e&&e.active}))},n.updateConfig=function(e){var t;this.reset(),this.listConfigs=e,this.listObjects=Ht()(t=new Array(e.length)).call(t,void 0),this.addObjectIndex(0,0);var n=this.getEndObjectIndex();this.addObjectIndex(1,n),this.startObjectIndex=this.getStartObjectIndex(),this.endObjectIndex=this.getEndObjectIndex(),this.updateMaxHeight(),this.value=this.marginTop},n.killAndHideAll=function(){var e,t=this;this.listObjects instanceof Array&&Me()(e=this.listObjects).call(e,(function(e){void 0!==e&&t.objects.killAndHide(e)}))},n.setItemPosition=function(e,t){var n=e.height;e.setPosition(0,n/2+(n+this.padding)*t-this.height/2)},n.updateMaxHeight=function(){return this.maxHeight=Math.max(this.listConfigs.length*(this.objHeight+this.padding)-this.padding+this.marginBottom-this.height,0)},n.updateObject=function(e){this.objects.incY(e);var t=this.getStartObjectIndex(),n=this.getEndObjectIndex();t!=this.startObjectIndex&&(t>this.startObjectIndex?this.killObjectIndex(this.startObjectIndex,t-1):this.addObjectIndex(t,this.startObjectIndex-1),this.startObjectIndex=t),n!=this.endObjectIndex&&(n<this.endObjectIndex?this.killObjectIndex(n+1,this.endObjectIndex):this.addObjectIndex(this.endObjectIndex+1,n),this.endObjectIndex=n)},n.killObjectIndex=function(e,t){for(var n=e;n<=t;n++){var i=this.listObjects[n];i&&(this.objects.killAndHide(i),this.listObjects[n]=void 0)}},n.addObjectIndex=function(e,t){for(var n=e;n<=t;n++){var i=this.padding,a=this.listConfigs;if(n>=a.length)return;if(!this.listObjects[n]){var r=this.objects.getFirstDead(!0),s=r.height,o=s/2+(s+i)*n+this.value-this.height/2;r.updateInfo(a[n]),r.setPosition(0,o),r.setActive(!0),r.setVisible(!0),this.addAt(r),this.listObjects[n]=r}}},n.getStartObjectIndex=function(){var e=this.objHeight,t=this.padding;return Math.max(Math.floor((0-this.value)/(e+t)),0)},n.getEndObjectIndex=function(){var e=this.objHeight,t=this.padding,n=this.listConfigs,i=e+t;return Math.min(Math.floor((this.height-this.value)/i),n.length)},n.addBackground=function(){var e="scroller-background";if(!this.scene.textures.exists(e)){var t=this.width,n=this.height,i=this.scene.add.graphics();i.fillStyle(65280,.2),i.fillRect(0,0,t,n),i.generateTexture(e,t,n),i.destroy()}var a=this.scene.add.image(0,0,e);this.add(a)},(0,de.Z)(t,[{key:"objHeight",get:function(){var e=this.objects.getChildren();return 0==e.length?this.maxHeight=0:e[0].height}}]),t}(Om.Z)),Lm={targets:[],props:{alpha:{duration:500,value:{start:0,from:0,to:1},ease:Phaser.Math.Easing.Cubic.Out},scale:{duration:1e3,value:{start:.8,from:.8,to:1},ease:Phaser.Math.Easing.Elastic.Out,easeParams:[.1,.45]}}},Dm=function(e){function t(t){return e.call(this,Lm,t)||this}return(0,p.Z)(t,e),t}(Ya.Z),Bm={targets:[],props:{alpha:{start:0,to:1,duration:500,ease:Phaser.Math.Easing.Cubic.Out},scale:{start:.8,to:1,duration:1e3,ease:Phaser.Math.Easing.Elastic.Out,easeParams:[.1,.45]},y:{start:0,to:0,duration:500,ease:Phaser.Math.Easing.Back.Out}},delay:0},Nm=function(e){function t(t){return e.call(this,Bm,t)||this}return(0,p.Z)(t,e),t}(Ya.Z),Mm=An.Z.DEFAULT,Gm=Mm.KEY,Fm=Mm.FRAME,Zm=function(e){function t(t,n){var i;return(i=e.call(this,t)||this).button=void 0,i.avatar=void 0,i.rankIcon=void 0,i.rankText=void 0,i.username=void 0,i.score=void 0,i.scoreText=void 0,i.background=void 0,i.showPopUp=void 0,i.showItems=void 0,i.payload=void 0,i.handleChallengeFriend=function(){var e=i.payload.playerId;i.scene.storage.dispatch(fo(e))},i.createBackground(),i.updateSize(),i.createAvatar(),i.createRank(),i.createUsername(),i.createScore(),i.createButton(),n&&i.updateInfo(n),i.scene.add.existing((0,za.Z)(i)),i}(0,p.Z)(t,e);var n=t.prototype;return n.updateInfo=function(e){this.payload=(0,f.Z)({scoreRight:!0,isHighlight:!1,useChallenge:!1},e),this.updateBackground(),this.updateAvatar(),this.updateRank(),this.updateUsername(),this.updateScore(),this.updatePosition()},n.updatePosition=function(){var e=this.payload.scoreRight,t=this.payload.useChallenge;this.button.setVisible(!!t),e?Phaser.Display.Align.To.RightCenter(this.score,this.avatar,120):Phaser.Display.Align.To.RightCenter(this.score,this.avatar,80)},n.createBackground=function(){this.background=this.scene.make.image({key:Gm,frame:Fm.LEADERBOARD_BG_LIGHT}),this.background.setWorldSize(264,56),this.add(this.background)},n.updateBackground=function(){var e="";e=this.payload.isHighlight?Fm.LEADERBOARD_BG_LIGHT:Fm.LEADERBOARD_BG_DARK,this.background.setFrame(e),this.background.setWorldSize(264,56)},n.updateSize=function(){var e=this.background,t=e.width,n=e.height;this.setSize(t,n)},n.createAvatar=function(){this.avatar=new Uo(this.scene,{key:Gm,frame:Fm.AVATAR_FRAME_YELLOW_SMALL,background:Fm.AVATAR_BG_YELLOW_SMALL,width:47.5,height:49.5,radius:40}),this.add(this.avatar),Phaser.Display.Align.In.LeftCenter(this.avatar,this,-10)},n.updateAvatar=function(){var e=this.payload,t=e.playerId,n=e.photo;this.avatar.loadPhoto(t,n)},n.createRank=function(){this.createRankIcon(1),this.createRankText(1)},n.updateRank=function(){var e=this.payload.rank;this.updateRankIcon(e),this.updateRankText(e)},n.getRankIconFrame=function(e){var t=Fm.ICON_FLAG;switch(e){case 1:t=Fm.ICON_CUP_GOLD;break;case 2:t=Fm.ICON_CUP_SILVER;break;case 3:t=Fm.ICON_CUP_COPPER}return t},n.createRankIcon=function(e){var t=this.getRankIconFrame(e);this.rankIcon=this.scene.make.image({key:Gm,frame:t}),t!=Fm.ICON_FLAG?this.rankIcon.setWorldSize(46,30):this.rankIcon.setWorldSize(27,27),this.add(this.rankIcon);var n=e<=3?13:16;Phaser.Display.Align.In.Center(this.rankIcon,this.avatar,0,n)},n.updateRankIcon=function(e){var t=this.getRankIconFrame(e);this.rankIcon.setFrame(t),t!=Fm.ICON_FLAG?this.rankIcon.setWorldSize(46,30):this.rankIcon.setWorldSize(27,27)},n.createRankText=function(e){this.rankText=this.scene.make.bitmapText({font:Fo.Z.PRIMARY.KEY,size:this.scene.fontSize(15),text:""+e,origin:{x:.5,y:.5}}),this.add(this.rankText),Phaser.Display.Align.In.Center(this.rankText,this.rankIcon,0,-2)},n.updateRankText=function(e){this.rankText.setText(""+e)},n.getShortName=function(e){var t=e.substring(0,7);return t.split(" ")[0]||t},n.createUsername=function(){this.username=this.scene.make.text({text:this.getShortName("FRIEND NAME"),style:{fontFamily:Fo.Z.FONT_FAMILY,fontSize:"15px",fontStyle:"bold"}}),this.username.setTint(10317116),this.username.setHighQuality(),Phaser.Display.Align.In.LeftCenter(this.username,this.avatar,-53),this.add(this.username)},n.updateUsername=function(){var e=this.payload.name;this.username.setText(this.getShortName(e))},n.createScore=function(){this.score=this.scene.add.container(),this.scoreText=this.scene.make.bitmapText({font:Fo.Z.PRIMARY.KEY,size:this.scene.fontSize(18),text:"132500",origin:{x:.5,y:.5}}),this.scoreText.setTint(6565e3);var e=this.scene.make.image({key:Gm,frame:Fm.ICON_CUP_MINI});e.setWorldSize(17,18),this.score.add([this.scoreText,e]);var t=-20;Phaser.Display.Align.In.LeftCenter(this.scoreText,e,t),this.add(this.score),t=10,Phaser.Display.Align.In.Center(this.score,this,t)},n.updateScore=function(){var e=this.payload.score;this.scoreText.setText(e)},n.createButton=function(){this.button=new ec.Z(this.scene,Gm,Fm.BUTTON_GREEN_MINOR_MINI,54,34.5),this.button.setName("ChallengeFriend");var e=this.scene.make.bitmapText({font:Fo.Z.PRIMARY.KEY,size:this.scene.fontSize(18),text:"PLAY"});Phaser.Display.Align.In.Center(e,this.button,0,-2),this.button.add(e),Phaser.Display.Align.In.RightCenter(this.button,this,-2),this.add(this.button),this.button.onClick=this.handleChallengeFriend},n.runShowPopUpAnimation=function(e,t){this.scene.tweens.killTweensOf(this),this.showPopUp=new Nm({targets:[this],delay:e,duration:t,props:{y:{start:this.y+70,to:this.y}}}),this.showPopUp.play()},n.runShowItemAnimation=function(e,t){var n=this.getAll();this.scene.tweens.killTweensOf(n),this.showItems=new Dm({targets:n,duration:t,delay:this.scene.tweens.stagger(50,{start:e+50}),props:{scale:{duration:1e3,getStart:function(e){return.8*e.scale},getEnd:function(e){return e.scale},ease:Phaser.Math.Easing.Elastic.Out,easeParams:[.1,.45]}}}),this.showItems.play()},n.runShowUpAnimation=function(e,t){void 0===e&&(e=0),void 0===t&&(t=300);var n=100*e;this.runShowPopUpAnimation(n,t),this.runShowItemAnimation(n,t)},t}(Phaser.GameObjects.Container),Um=Zm;function Hm(e,t){var n="undefined"!==typeof k()&&O()(e)||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){var n;if(!e)return;if("string"===typeof e)return Wm(e,t);var i=w()(n=Object.prototype.toString.call(e)).call(n,8,-1);"Object"===i&&e.constructor&&(i=e.constructor.name);if("Map"===i||"Set"===i)return x()(e);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return Wm(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var i=0;return function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Wm(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var zm=function(e){function t(t){var n;(n=e.call(this,t)||this).scene=void 0,n.currentPlayerId=void 0,n.scroller=void 0,n.scene=t;var i=n.scene.player;return n.currentPlayerId=i.getPlayerId(),n.createReuseScroller(),n.scene.add.existing((0,za.Z)(n)),n}(0,p.Z)(t,e);var n=t.prototype;return n.createReuseScroller=function(){this.scroller=new Rm(this.scene,{classType:Um,listConfigs:[],width:280,height:310,padding:10,marginTop:10,marginBottom:10}),this.scene.renderer instanceof Phaser.Renderer.WebGL.WebGLRenderer&&this.scroller.createBound(An.Z.DEFAULT.KEY,An.Z.DEFAULT.FRAME.BLANK,40,16643027),this.scroller.createMask(),this.scroller.setPosition(0,25),this.add(this.scroller)},n.updateData=function(e){var t=Bi()(e)||[];if(t.length<1)return this.scene.isSwitchable=!0,void this.scene.board.showMessage(!0,"Leaderboard is empty!");for(var n,i=[],a=Hm(Mi()(t).call(t,(function(e,t){return+t.score-+e.score})));!(n=a()).done;){var r=n.value,s=r.playerId,o=r.photo,c=r.score,u=r.name,l=r.rank;if(s){var h=this.currentPlayerId===s,d={playerId:s,photo:o,name:u,rank:l,score:c,scoreRight:this.scene.tabId===ir,useChallenge:!h&&this.scene.tabId===ar,isHighlight:h};i.push(d)}}this.scroller.updateConfig(i),this.showLeaders()},n.removeLeaders=function(){this.scroller.updateConfig([])},n.getLeaders=function(){return this.scroller.getChildren()},n.showLeaders=function(){var e=this,t=this.getLeaders();if(t.length<1)return this.scene.isSwitchable=!0,void this.scene.board.showMessage(!0,"Leaderboard is empty!");for(var n=Math.min(t.length,6),i=0;i<n;i++){var a=t[i];a&&(a.setVisible(!0),a.runShowUpAnimation(i,300))}var r=300+100*n+250;this.scene.time.delayedCall(r,(function(){e.scene.isSwitchable=!0,e.scroller.setEnable(!0)}))},t}(Phaser.GameObjects.Container),Ym=zm,Vm=An.Z.DEFAULT,Km=Vm.KEY,jm=Vm.FRAME,Xm=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n.tabWorld=void 0,n.tabFriends=void 0,n.scene=t,n.createTabFriends(),n.createTabWorld(),n}(0,p.Z)(t,e);var n=t.prototype;return n.selectTabFriends=function(){this.tabFriends.button.setFrame(jm.LEADERBOARD_TAB_ON),this.tabWorld.button.setFrame(jm.LEADERBOARD_TAB_OFF)},n.selectTabWorld=function(){this.tabFriends.button.setFrame(jm.LEADERBOARD_TAB_OFF),this.tabWorld.button.setFrame(jm.LEADERBOARD_TAB_ON)},n.createTabFriends=function(){this.tabFriends=new ec.Z(this.scene,Km,jm.LEADERBOARD_TAB_OFF),this.tabFriends.button.setSize(85,33).setDisplaySize(85,33),this.tabFriends.setName("FriendsTab");var e=this.scene.make.bitmapText({font:Fo.Z.PRIMARY.KEY,size:9,text:"FRIENDS",origin:{x:.5,y:.55}});this.tabFriends.add(e),Phaser.Display.Align.In.Center(this.tabFriends,this,-55),this.add(this.tabFriends)},n.createTabWorld=function(){this.tabWorld=new ec.Z(this.scene,Km,jm.LEADERBOARD_TAB_OFF),this.tabWorld.button.setSize(85,33).setDisplaySize(85,33),this.tabWorld.setName("WorldTab");var e=this.scene.make.bitmapText({font:Fo.Z.PRIMARY.KEY,size:9,text:"WORLD",origin:{x:.5,y:.55}});this.tabWorld.add(e),Phaser.Display.Align.In.Center(this.tabWorld,this,55),this.add(this.tabWorld)},t}(Phaser.GameObjects.Container),Jm=Xm,qm=An.Z.DEFAULT,Qm=qm.KEY,$m=qm.FRAME,ev=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n.background=void 0,n.tabs=void 0,n.leaders=void 0,n.loading=void 0,n.message=void 0,n.messageAnimation=void 0,n.scene=t,n.setSize(310,430),n.createBackground(),n.createLoading(),n.createMessage(),n.createContents(),n.createAnimation(),n.scene.add.existing((0,za.Z)(n)),n}(0,p.Z)(t,e);var n=t.prototype;return n.showLoading=function(e){this.loading.setVisible(e),this.showMessage(!1)},n.showMessage=function(e,t){this.message.setVisible(e),t&&(this.message.setText(t),this.messageAnimation.play())},n.createBackground=function(){this.background=new wc(this.scene,0,0,310,430),this.add(this.background)},n.createLoading=function(){this.loading=new Qa(this.scene),this.loading.setTint(12237498),this.loading.setWorldSize(113,113),this.add(this.loading),Phaser.Display.Align.In.Center(this.loading,this.background)},n.createMessage=function(){this.message=this.scene.make.bitmapText({font:Fo.Z.PRIMARY.KEY,size:this.scene.fontSize(18),origin:{x:.5,y:.5}}),this.message.setTint(10317116),this.add(this.message),Phaser.Display.Align.In.Center(this.message,this.background)},n.createContents=function(){this.createLeaders(),this.createTitle(),this.createTabs()},n.createLeaders=function(){this.leaders=new Ym(this.scene),this.add(this.leaders),Phaser.Display.Align.In.Center(this.leaders,this.background,0,0)},n.createTitle=function(){var e=this.scene.add.container(),t=this.scene.make.image({key:Qm,frame:$m.RIBBON_SHORT});t.setWorldSize(271,81);var n=this.scene.make.bitmapText({font:Fo.Z.PRIMARY.KEY,size:this.scene.fontSize(30),text:"Leaderboards"});Phaser.Display.Align.In.Center(n,t,0,-10),e.add([t,n]),Phaser.Display.Align.In.TopCenter(e,this.background,0,5),this.add(e)},n.createTabs=function(){this.tabs=new Jm(this.scene),this.add(this.tabs),Phaser.Display.Align.In.TopCenter(this.tabs,this.background,0,-55)},n.createAnimation=function(){this.messageAnimation=new _m.Z({targets:[this.message],duration:60,repeat:2})},t}(Phaser.GameObjects.Container),tv=ev,nv=GameCore.Configs.LeadersBoard,iv=function(e){function t(){for(var t,n,i=arguments.length,a=new Array(i),r=0;r<i;r++)a[r]=arguments[r];return(n=e.call.apply(e,L()(t=[this]).call(t,a))||this).board=void 0,n.footerBar=void 0,n.tabId=void 0,n.offset=void 0,n.isRequesting=void 0,n.isSwitchable=void 0,n.run=function(){n.isRequesting=!1;var e=[{selector:Gr,callback:function(e){if(n.isRequesting=e,n.board.showLoading(e),!1===e){var t=n.game.storage.getState(),i=Mr(t);n.board.leaders.updateData(i)}}}];n.handleStateChange(e),n.selectFriendTab()},n.handleSelectFriendTab=function(){n.isRequesting||n.isSwitchable&&(n.isSwitchable=!1,n.selectFriendTab())},n.handleSelectWorldTab=function(){n.isRequesting||n.isSwitchable&&(n.isSwitchable=!1,n.selectWorldTab())},n.handlePlayWithFriend=function(){n.storage.dispatch(po())},n.handleHomeClick=function(){n.scene.switch(_a.C.DASHBOARD_SCENE)},n.handleShareLeaderboard=function(){n.storage.dispatch(Ro())},n}(0,p.Z)(t,e);var n=t.prototype;return n.preload=function(){this.events.on("wake",this.run),this.events.on("create",this.run)},n.create=function(){e.prototype.create.call(this),this.gameZone.setPosition(0,0),this.createBackground(ga.Z.BACKGROUND.KEY,"0"),this.scene.bringToTop(),this.createBoard(),this.createFooterBar()},n.selectFriendTab=function(){this.tabId=ar,this.offset=0,this.board.showLoading(!0),this.board.leaders.removeLeaders(),this.board.tabs.selectTabFriends(),this.storage.dispatch(Lr(nv.LeaderboardId,ar,nv.Limit,this.offset))},n.selectWorldTab=function(){this.tabId=ir,this.offset=0,this.board.showLoading(!0),this.board.leaders.removeLeaders(),this.board.tabs.selectTabWorld(),this.storage.dispatch(Lr(nv.LeaderboardId,ir,nv.Limit,this.offset))},n.loadMoreTabFriend=function(){this.isRequesting||(this.offset+=nv.Limit,this.storage.dispatch(Lr(nv.LeaderboardId,ar,nv.Limit,this.offset)))},n.loadMoreTabWorld=function(){this.isRequesting||(this.offset+=nv.Limit,this.storage.dispatch(Lr(nv.LeaderboardId,ir,nv.Limit,this.offset)))},n.createBoard=function(){this.board=new tv(this),Phaser.Display.Align.In.Center(this.board,this.gameZone,0,-20),this.board.tabs.tabWorld.onClick=this.handleSelectWorldTab,this.board.tabs.tabFriends.onClick=this.handleSelectFriendTab},n.createFooterBar=function(){this.footerBar=new km(this),Phaser.Display.Align.In.BottomCenter(this.footerBar,this.gameZone,0,-50),this.footerBar.homeButton.onClick=this.handleHomeClick,this.footerBar.playButton.onClick=this.handlePlayWithFriend,this.footerBar.shareButton.onClick=this.handleShareLeaderboard},t}(Ua.Z);var av=iv,rv=function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).name="LoadResourceFail",i.message=t||"Load resource fail",i.payload=n,i}return(0,p.Z)(t,e),t}((0,K.Z)(Error)),sv=function(e){try{var t=Ea(e),n=window.game.player,i=t.entryPointData||{},a=i.playerId,r=i.playerName,s=i.playerPhoto;return n.getPlayer().playerId===a?ma:new vt.Z(a,r,s).toObject()}catch(o){return ma}},ov=function(){return function(e){try{window.game.facebook.getTournamentAsync().then((function(t){e(lo(t))})).catch((function(e){}))}catch(t){}}},cv=function(){return function(e,t){try{var n=t(),i=Ea(n),a=window.game.player,r=a.getPlayer(),s=i.contextId,o=(i.entryPointData||{}).playerId,c=r.playerId===o,u=sv(n);c||a.updateConnectedPlayers([u]);var l=u.playerId;e(po(s,l,!0))}catch(h){throw new Error("processInviteMode: "+h)}}},uv=function(){return function(e,t){try{var n=t(),i=Ea(n),a=window.game.player.getPlayer(),r=i.entryPointData||{},s=r.matchId,o=r.opponentId,c=r.playerId,u=a.playerId===c;e(mo(s,u?o:c))}catch(l){throw new Error("processChallengeFriendMode: "+l)}}},lv=function(){return function(e,t){try{var n=t(),i=Ea(n).entryPointData||{},a=i.playerId,r=i.playerScore;e($s(a,{score:r,level:0}));var s=sv(n),o=(0,f.Z)({},s,{score:r});e(go(o))}catch(c){throw new Error("processMatchingGroupMode: "+c)}}},hv=function(){return function(e){try{e(ho())}catch(t){throw new Error("processNewUserMode: "+t)}}},dv=n(659),fv={BACKGROUND:{KEY:"background",FILE:"./assets/music/bg_music.mp3"},EFFECTS:{KEY:"effects",FILE:"./assets/sounds/effects.mp3",JSON:"./assets/sounds/effects.json",PATH:"./assets/sounds/"}},pv=n(646),gv="How about diving into the game for a relaxing experience?",mv=GameCore.Configs.Notification.DailyNotificationMessages,vv=void 0===mv?{}:mv,yv=function(){function e(){}e.sendNewUserNotification=function(){var e=(0,i.Z)(r().mark((function e(){var t;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.getInstance(),e.abrupt("return",t.sendNewUserNotificationInstance());case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),e.sendDailyNotification=function(){var e=(0,i.Z)(r().mark((function e(){var t;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.getInstance(),e.abrupt("return",t.sendDailyNotificationInstance());case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),e.sendTestDailyNotification=function(){var e=(0,i.Z)(r().mark((function e(t){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.getInstance();case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),e.getInstance=function(){return this._instance||(this._instance=new e),this._instance};var t=e.prototype;return t.sendNewUserNotificationInstance=function(){var e=(0,i.Z)(r().mark((function e(){var t,n,i,a,s,o;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=window.game,n=t.player,i=t.facebook,a=t.rollbar,e.prev=1,n.getPlayerIsNew()){e.next=5;break}return e.abrupt("return");case 5:if(n.getPlayerASID()){e.next=8;break}return e.abrupt("return");case 8:return e.next=10,FBInstant.player.getDataAsync(["isNotificationFirstSent"]);case 10:if(e.t0=e.sent,e.t0){e.next=13;break}e.t0={};case 13:if(s=e.t0,!0!==s.isNotificationFirstSent){e.next=17;break}return e.abrupt("return");case 17:return o={message:gv,delayTime:14400,type:pv.Z.NEW_USER_NOTIFICATION},e.next=20,i.sendNotificationAsync(o);case 20:FBInstant.player.setDataAsync({isNotificationFirstSent:!0}),e.next=26;break;case 23:e.prev=23,e.t1=e.catch(1),a.sendException(e.t1);case 26:case"end":return e.stop()}}),e,null,[[1,23]])})));return function(){return e.apply(this,arguments)}}(),t.sendDailyNotificationInstance=function(){var e=(0,i.Z)(r().mark((function e(){var t,n,i;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=window.game.rollbar,e.prev=1,n=new Date,i=n.getDay(),e.t0=i,e.next=0===e.t0?7:1===e.t0?10:2===e.t0?13:3===e.t0?16:4===e.t0?19:22;break;case 7:return e.next=9,this.sendMondayNotification();case 9:return e.abrupt("break",22);case 10:return e.next=12,this.sendTuesdayNotification();case 12:return e.abrupt("break",22);case 13:return e.next=15,this.sendWednesdayNotification();case 15:return e.abrupt("break",22);case 16:return e.next=18,this.sendThursdayNotification();case 18:return e.abrupt("break",22);case 19:return e.next=21,this.sendFridayNotification();case 21:return e.abrupt("break",22);case 22:return e.next=24,this.sendSaturdayNotification();case 24:return e.next=26,this.sendSundayNotification();case 26:e.next=31;break;case 28:e.prev=28,e.t1=e.catch(1),t.sendException(e.t1);case 31:case"end":return e.stop()}}),e,this,[[1,28]])})));return function(){return e.apply(this,arguments)}}(),t.sendMondayNotification=function(){var e=(0,i.Z)(r().mark((function e(){var t,n,i,a,s;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=window.game,n=t.facebook,i=t.rollbar,e.prev=1,s={message:null!=(a=vv.MONDAY)?a:gv,delayTime:86400,type:pv.Z.MONDAY_NOTIFICATION},e.next=5,n.sendNotificationAsync(s);case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),i.sendException(e.t0);case 10:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(){return e.apply(this,arguments)}}(),t.sendTuesdayNotification=function(){var e=(0,i.Z)(r().mark((function e(){var t,n,i,a,s;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=window.game,n=t.facebook,i=t.rollbar,e.prev=1,s={message:null!=(a=vv.TUESDAY)?a:gv,delayTime:86400,type:pv.Z.TUESDAY_NOTIFICATION},e.next=5,n.sendNotificationAsync(s);case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),i.sendException(e.t0);case 10:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(){return e.apply(this,arguments)}}(),t.sendWednesdayNotification=function(){var e=(0,i.Z)(r().mark((function e(){var t,n,i,a,s;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=window.game,n=t.facebook,i=t.rollbar,e.prev=1,s={message:null!=(a=vv.WEDNESDAY)?a:gv,delayTime:86400,type:pv.Z.WEDNESDAY_NOTIFICATION},e.next=5,n.sendNotificationAsync(s);case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),i.sendException(e.t0);case 10:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(){return e.apply(this,arguments)}}(),t.sendThursdayNotification=function(){var e=(0,i.Z)(r().mark((function e(){var t,n,i,a,s;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=window.game,n=t.facebook,i=t.rollbar,e.prev=1,s={message:null!=(a=vv.THURSDAY)?a:gv,delayTime:86400,type:pv.Z.THURSDAY_NOTIFICATION},e.next=5,n.sendNotificationAsync(s);case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),i.sendException(e.t0);case 10:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(){return e.apply(this,arguments)}}(),t.sendFridayNotification=function(){var e=(0,i.Z)(r().mark((function e(){var t,n,i,a,s;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=window.game,n=t.facebook,i=t.rollbar,e.prev=1,s={message:null!=(a=vv.FRIDAY)?a:gv,delayTime:86400,type:pv.Z.FRIDAY_NOTIFICATION},e.next=5,n.sendNotificationAsync(s);case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),i.sendException(e.t0);case 10:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(){return e.apply(this,arguments)}}(),t.sendSaturdayNotification=function(){var e=(0,i.Z)(r().mark((function e(){var t,n,i,a,s,o;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=window.game,n=t.facebook,i=t.rollbar,e.prev=1,s=this.findDelayTimeForNextDay(6,10),o={message:null!=(a=vv.SATURDAY)?a:gv,delayTime:s,type:pv.Z.SATURDAY_NOTIFICATION},e.next=6,n.sendNotificationAsync(o);case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),i.sendException(e.t0);case 11:case"end":return e.stop()}}),e,this,[[1,8]])})));return function(){return e.apply(this,arguments)}}(),t.sendSundayNotification=function(){var e=(0,i.Z)(r().mark((function e(){var t,n,i,a,s,o;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=window.game,n=t.facebook,i=t.rollbar,e.prev=1,s=this.findDelayTimeForNextDay(0,10),o={message:null!=(a=vv.SUNDAY)?a:gv,delayTime:s,type:pv.Z.SUNDAY_NOTIFICATION},e.next=6,n.sendNotificationAsync(o);case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),i.sendException(e.t0);case 11:case"end":return e.stop()}}),e,this,[[1,8]])})));return function(){return e.apply(this,arguments)}}(),t.findDelayTimeForNextDay=function(e,t){if(e<0||e>6)throw new Error("Invalid day for notification");if(t<0||t>23)throw new Error("Invalid hour for notification");var n=Date.now(),i=new Date(n).getDay(),a=new Date(n).getHours(),r=e,s=t;if(i===r&&a>=s){var o=3600*(168-a+s);if(o>604800)throw new Error("Notification delay time is more than 7 days");return o}var c=r<i?7-i+r:r-i;s<a&&c--;var u=3600*(24*c+(s<a?24-a+s:s-a));if(u>604800)throw new Error("Notification delay time is more than 7 days");return u},t.sendTestDailyNotificationInstance=function(){var e=(0,i.Z)(r().mark((function e(t){var n,i,a,s;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n={0:"SUNDAY",1:"MONDAY",2:"TUESDAY",3:"WEDNESDAY",4:"THURSDAY",5:"FRIDAY",6:"SATURDAY"},e.prev=1,a=gv,!(t<0||t>6)){e.next=5;break}throw new Error("Invalid day for notification. Day must be between 0 (Sunday) and 6 (Saturday)");case 5:return a=null!=(i=vv[n[t]])?i:gv,s={message:a,delayTime:300,type:pv.Z.GENERIC_NOTIFICATION},e.next=9,window.game.facebook.sendNotificationAsync(s);case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1);case 14:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(t){return e.apply(this,arguments)}}(),e}();yv._instance=void 0;var bv=yv,Av=GameCore.Configs.Notification.ApiUrl,Ev=function(){var e=(0,i.Z)(r().mark((function e(t){var n,i;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.playerId,e.next=3,(0,ot.v)("players/"+n,t,{},Av,10);case 3:return i=e.sent,e.abrupt("return",(null==i?void 0:i.data)||{});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Sv="9pk2rsf72wcd",Tv="solitaire-journey",Cv=function(){function e(){var e=this;this.isSwitchGameReady=!1,this.firstGameSafeguard=!0,this.currentDailyEngagementTime=0,this.correctCountdownTime=0,this.handleSceneCreated=function(){e.firstGameSafeguard=!1,Kl.off(jl.SCENE_CREATED,e.handleSceneCreated)},this.handleSwitchGame=function(){var t;if(e.isSwitchGameReady){var n=window,i=n.GameSDK,a=n.game,r=a.player,s=a.analytics,o=null!=(t=r.getCustomData("lastCallSwitchGame"))?t:0;e.isSameDay(o)||(r.setCustomData("lastCallSwitchGame",Date.now()),s.event(bn._.SWITCH_GAME_POPUP,{target_game_name:Tv,target_game_id:Sv}),i.switchGameAsync(Sv).catch((function(){s.event(bn._.SWITCH_GAME_POPUP_CANCEL,{target_game_name:Tv,target_game_id:Sv})})))}},this.updateDailyPlayTime(),this.assignSwitchGameTiming(),this.updateDailyPlayTimeInterval(),this.listenToEvents()}var t=e.prototype;return t.updateDailyPlayTime=function(){var e,t=window.game.player,n=null!=(e=t.getCustomData("dailyPlayTime"))?e:0,i=n.totalEngagementTime,a=n.currentDate,r=this.isSameDay(a);this.currentDailyEngagementTime=r?i:0,t.setCustomData("dailyPlayTime",{totalEngagementTime:this.currentDailyEngagementTime,currentDate:r?a:Date.now()})},t.updateDailyPlayTimeInterval=function(){var e=this,t=setInterval((function(){e.currentDailyEngagementTime+=5e3,window.game.player.setCustomData("dailyPlayTime",{totalEngagementTime:e.currentDailyEngagementTime}),e.logDailyPlayTime(),e.firstGameSafeguard||e.currentDailyEngagementTime>=e.correctCountdownTime&&(e.isSwitchGameReady=!0,clearInterval(t))}),5e3)},t.logDailyPlayTime=function(){new Date(this.currentDailyEngagementTime)},t.assignSwitchGameTiming=function(){var e,t=null!=(e=window.game.player.getCustomData("firstLoginDate"))?e:0,n=this.isSameDay(t);this.correctCountdownTime=n?6e5:138e4},t.listenToEvents=function(){Kl.on(jl.REQUEST_SWITCH_GAME,this.handleSwitchGame),Kl.on(jl.SCENE_CREATED,this.handleSceneCreated)},t.isSameDay=function(e){if(!GameCore.Utils.Valid.isNumber(e))return!1;var t=new Date(e),n=new Date,i=t.getDate()===n.getDate(),a=t.getMonth()===n.getMonth(),r=t.getFullYear()===n.getFullYear();return i&&a&&r},e}(),wv=Cv;function Iv(e,t){var n="undefined"!==typeof k()&&O()(e)||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){var n;if(!e)return;if("string"===typeof e)return xv(e,t);var i=w()(n=Object.prototype.toString.call(e)).call(n,8,-1);"Object"===i&&e.constructor&&(i=e.constructor.name);if("Map"===i||"Set"===i)return x()(e);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return xv(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var i=0;return function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function xv(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var Pv=GameCore.Configs,kv=Pv.AppId,_v=Pv.Notification,Ov=[er.Z.SHUFFLE],Rv=function(e){function t(){for(var t,n,i=arguments.length,a=new Array(i),r=0;r<i;r++)a[r]=arguments[r];return(n=e.call.apply(e,L()(t=[this]).call(t,a))||this).i18nPromise=void 0,n.isMusicLoaded=!1,n.handleFBInstantGameStarted=function(){window.__fbGameReady=!0,window.__fbPlatform=FBInstant.getPlatform(),n.player.requestConnectedPlayers()},n.processAfterUpdatePlayerProfile=function(){_v.Enable&&(n.updatePlayerProfileToNotificationService(),_v.DisableSendNotification||(bv.sendNewUserNotification(),bv.sendDailyNotification()))},n.startGame=function(){n.analytics.event(bn._.APP_READY),n.storage.dispatch((0,dv.I)(_a.C.LOAD_SCENE)),n.storage.dispatch((function(e,t){var n=window.game,i=n.player,a=n.analytics,r=n.globalScene;try{var s=t(),o=Ea(s),c=Sa(s),u=i.getPlayer(),l=(o.entryPointData||{}).type;if(u.isUserNew&&a.event(bn._.NEW_USER),c===Aa)return void e(ov());if(c===ya){if(l===fa)return void e(cv());if(l===pa)return void e(uv())}if(c===ba)return void e(lv());if(u.isUserNew)return void e(hv());if(c===va)return void e(ho());r.events.emit(_a.K.SWITCH,_a.C.DASHBOARD_SCENE)}catch(h){r.events.emit(_a.K.SWITCH,_a.C.DASHBOARD_SCENE)}finally{GameSDK.gameReady()}}))},n.handleLoadMusicCompleted=function(){n.audio.initMusic(fv.BACKGROUND.KEY),!!n.game.player.getPlayerSetting("music")&&n.audio.playMusic()},n}(0,p.Z)(t,e);var n=t.prototype;return n.preload=function(){var e,t=this;this.facebook.progressLoading.loadingProgressFbLoadScene(),this.analytics.event(bn._.SCREEN_OPEN,{screen_name:"LoadScene"}),this.load.on("progress",(function(e){t.facebook.progressLoading.onProgress(e)})),this.load.on(Phaser.Loader.Events.FILE_LOAD_ERROR,(function(e){var t=new rv("Load resources at LoadScene failed.");(0,h.R0)(t,{file:null==e?void 0:e.url})}));var n=this.theme.getCurrentThemeResources(),i=n.backgroundKey,a=n.backgroundFile,r=n.cardFaceKey,s=n.cardFaceTexture,o=n.cardFaceJSON;this.theme.updateCurrentCardStyle(),this.load.image(i,a),this.load.atlas({key:r,textureURL:s,atlasURL:o}),this.load.atlas({key:An.Z.DEFAULT.KEY,textureURL:An.Z.DEFAULT.TEXTURE,atlasURL:An.Z.DEFAULT.JSON}),this.load.multiatlas({key:An.Z.EFFECTS.KEY,path:An.Z.EFFECTS.PATH,atlasURL:An.Z.EFFECTS.JSON}),this.load.atlas({key:An.Z.GAMEPLAY_DEFAULT.KEY,textureURL:An.Z.GAMEPLAY_DEFAULT.TEXTURE,atlasURL:An.Z.GAMEPLAY_DEFAULT.JSON}),this.load.atlas({key:An.Z.CARD_BACK.KEY,textureURL:An.Z.CARD_BACK.TEXTURE,atlasURL:An.Z.CARD_BACK.JSON}),this.load.atlas({key:An.Z.HOW_TO_PLAY.KEY,textureURL:An.Z.HOW_TO_PLAY.TEXTURE,atlasURL:An.Z.HOW_TO_PLAY.JSON}),this.load.atlas({key:An.Z.THEME_PREVIEW.KEY,textureURL:An.Z.THEME_PREVIEW.TEXTURE,atlasURL:An.Z.THEME_PREVIEW.JSON}),this.load.atlas({key:An.Z.LANGUAGES.KEY,textureURL:An.Z.LANGUAGES.TEXTURE,atlasURL:An.Z.LANGUAGES.JSON}),this.load.text("level1","assets/levels/level1.txt"),this.textStyler.addFont({type:"local",fontType:"woff",fontName:Fo.Z.FONT_FAMILY});var c=this.player.getPlayerSetting("language2"),u=null==(e=FBInstant.getLocale())?void 0:e.split("_")[0],l=["ru","en","tr","zh","de","es","id","it","ja","pt","fr"],d=c||u||"ru";xe()(l).call(l,d)||(d="ru"),this.i18nPromise=this.lang.initI18n(this,{language:d,fallbackLanguage:"ru",supportLanguages:l,fontKeys:[Fo.Z.PRIMARY.KEY,Fo.Z.BOLD.KEY]});for(var f,p=Iv(Ov);!(f=p()).done;){var g=f.value;""!=g&&this.load.audio(g,[fv.EFFECTS.PATH+g+".ogg",fv.EFFECTS.PATH+g+".mp3"])}this.player.updateData().then(this.processAfterUpdatePlayerProfile).catch(h.tO)},n.create=function(){var e=(0,i.Z)(r().mark((function e(){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.i18nPromise;case 2:this.analytics.event(bn._.LOAD_COMPLETE),this.facebook.on("startgame",this.handleFBInstantGameStarted),this.facebook.gameStarted(),this.setupGlobalScene(),this.lazyLoadResource(),this.handleShowAdWhenStartGame(),this.initModules(),this.startGame();case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.updatePlayerProfileToNotificationService=function(){var e=this.player.getPlayer(),t=e.playerId,n=e.name,i=e.photo,a=e.locale,r=e.ASID;Ev({appId:kv,playerId:t,name:n,photo:i,locale:a,ASID:r})},n.setupGlobalScene=function(){var e=this.scene.get(_a.C.GLOBAL_SCENE);e instanceof qg.Z&&e.setup()},n.initModules=function(){new wv},n.lazyLoadResource=function(){var e=this;setTimeout((function(){e.scene.wake(),e.loadSounds(),e.load.once(Phaser.Loader.Events.COMPLETE,(function(){e.scene.sleep()}))}),500)},n.loadSounds=function(){var e=Phaser.Loader.Events.FILE_KEY_COMPLETE;this.load.once(e+"audio-"+fv.BACKGROUND.KEY,this.handleLoadMusicCompleted);for(var t=er.Z,n=0,i=oe()(er.Z);n<i.length;n++){var a=t[i[n]];""!=a&&(xe()(Ov).call(Ov,a)||this.load.audio(a,[fv.EFFECTS.PATH+a+".ogg",fv.EFFECTS.PATH+a+".mp3"]))}this.load.start()},n.handleShowAdWhenStartGame=function(){var e=this;if(GameCore.Configs.Ads.InterstitialAdOptions.showWhenStartGame){var t={en:"Initializing...",ru:"\u0418\u043d\u0438\u0446\u0438\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u044f...",pt:"Inicializando...",es:"Inicializando...",ar:"\u062a\u0647\u064a\u0626\u0629...",hi:"\u092a\u094d\u0930\u093e\u0930\u0902\u092d \u0915\u0930 \u0930\u0939\u093e \u0939\u0948...",zh:"\u521d\u59cb\u5316\u4e2d...",tr:"Ba\u015flat\u0131l\u0131yor...",ja:"\u521d\u671f\u5316\u4e2d...",fr:"Initialisation en cours...",id:"Menginisialisasi...",de:"Initialisierung...",it:"Inizializzazione..."}[this.lang.language||""]||"",n=document.createElement("div");n.id="wait-ads-mask";var a=document.createElement("div");a.id="wait-ads-content",n.appendChild(a);var s=document.createElement("div");s.id="wait-ads-dual-ring",a.appendChild(s);var o=document.createElement("div");o.id="wait-ads-text",o.innerHTML=t,a.appendChild(o),document.body.appendChild(n),this.audio.muteAll(),setTimeout((0,i.Z)(r().mark((function t(){return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,e.ads.setAdInProcess(!0),e.audio.stopMusic(),e.audio.pauseAllSounds(),e.audio.muteAll(),t.next=7,e.ads.preloadInterstitialAdAsync();case 7:return t.next=9,e.ads.showInterstitialAdAsync();case 9:t.next=14;break;case 11:t.prev=11,t.t0=t.catch(0),(0,h.tO)(t.t0);case 14:return t.prev=14,n.remove(),e.ads.preloadInterstitialAdAsync().catch((function(){})),e.ads.setAdInProcess(!1),GameSDK.isAudioEnabled()&&(e.audio.unmuteAll(),e.audio.resumeAllSounds(),e.audio.playMusic()),t.finish(14);case 20:case"end":return t.stop()}}),t,null,[[0,11,14,20]])}))),0)}},t}(Phaser.Scene),Lv=Rv,Dv=An.Z.DEFAULT,Bv=Dv.KEY,Nv=Dv.FRAME,Mv=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n.avatar=void 0,n.crown=void 0,n.playerName=void 0,n.playerScore=void 0,n.scene=t,n.createAvatar(),n.updateSize(),n.createWinCrown(),n.createPlayerName(),n.createPlayerScore(),n.scene.add.existing((0,za.Z)(n)),n}(0,p.Z)(t,e);var n=t.prototype;return n.showCrown=function(e){this.crown.setVisible(e),e?(this.avatar.setFrame(Nv.AVATAR_FRAME_YELLOW_BIG),this.avatar.setBackground(Nv.AVATAR_BG_YELLOW_BIG)):(this.avatar.setFrame(Nv.AVATAR_FRAME_BLUE_BIG),this.avatar.setBackground(Nv.AVATAR_BG_BLUE_BIG))},n.setPlayerName=function(e){this.playerName.setText(e)},n.setPlayerScore=function(e){this.playerScore.setText(""+e)},n.loadPhoto=function(e,t){this.avatar.loadPhoto(e,t,60)},n.updateSize=function(){var e=this.avatar,t=e.width,n=e.height;this.setSize(t,n)},n.createAvatar=function(){this.avatar=new Uo(this.scene,{key:Bv,frame:Nv.AVATAR_FRAME_BLUE_BIG,background:Nv.AVATAR_BG_BLUE_BIG,width:89,height:89}),this.add(this.avatar)},n.createWinCrown=function(){this.crown=this.scene.make.image({key:Bv,frame:Nv.ICON_CROWN}),this.crown.setWorldSize(52,36),Phaser.Display.Align.In.TopCenter(this.crown,this.avatar,0,75),this.add(this.crown)},n.createPlayerName=function(){this.playerName=this.scene.make.text({style:{fontFamily:Fo.Z.FONT_FAMILY,fontSize:this.scene.fontSize(42)+"px",fontStyle:"bold"},origin:{x:.5,y:.5}}),this.playerName.setTint(11632207),this.playerName.setHighQuality(),Phaser.Display.Align.In.BottomCenter(this.playerName,this.avatar,0,25),this.add(this.playerName)},n.createPlayerScore=function(){this.playerScore=this.scene.make.bitmapText({size:this.scene.fontSize(30),font:Fo.Z.PRIMARY.KEY,origin:{x:.5,y:.5}}),this.playerScore.setTint(6762627),Phaser.Display.Align.In.BottomCenter(this.playerScore,this.playerName,0,25),this.add(this.playerScore)},t}(Phaser.GameObjects.Container),Gv=Mv,Fv=An.Z.DEFAULT,Zv=Fv.KEY,Uv=Fv.FRAME,Hv=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n.board=void 0,n.titleText=void 0,n.playerScore=void 0,n.opponentScore=void 0,n.buttonClose=void 0,n.buttonRestart=void 0,n.buttonShare=void 0,n.scene=t,n.createBoard(),n.createTitle(),n.createVSText(),n.createPlayers(),n.createRestartButton(),n.createShareButton(),n.scene.add.existing((0,za.Z)(n)),n}(0,p.Z)(t,e);var n=t.prototype;return n.createBoard=function(){this.board=new wc(this.scene,0,0,600,340),this.board.setDepth(mn.Z.BACKGROUND),this.add(this.board),Phaser.Display.Align.In.Center(this.board,this)},n.createTitle=function(){var e=this.scene.add.container(),t=this.scene.make.image({key:Zv,frame:Uv.RIBBON_FULL});t.setWorldSize(340,75),this.titleText=this.scene.make.bitmapText({font:Fo.Z.PRIMARY.KEY,size:this.scene.fontSize(32),origin:{x:.5,y:.5}}),Phaser.Display.Align.In.Center(this.titleText,t,0,-10),this.buttonClose=new ec.Z(this.scene,Zv,Uv.BUTTON_CLOSE,41.8,41.8),this.buttonClose.setName("Close"),Phaser.Display.Align.In.RightCenter(this.buttonClose,t,0,-3),e.setDepth(mn.Z.TILE),e.add([t,this.titleText,this.buttonClose]),this.add(e),Phaser.Display.Align.In.Center(e,this.board,0,-170)},n.createVSText=function(){var e=this.scene.make.bitmapText({font:Fo.Z.PRIMARY.KEY,size:this.scene.fontSize(70),text:"VS",origin:{x:.5,y:.5}});e.setTint(11632207),e.setDepth(mn.Z.TEXT),this.add(e),Phaser.Display.Align.In.Center(e,this.board,0,-45)},n.createPlayers=function(){this.playerScore=new Gv(this.scene),this.playerScore.setDepth(mn.Z.ITEM),this.add(this.playerScore),Phaser.Display.Align.In.Center(this.playerScore,this.board,-100,-50),this.opponentScore=new Gv(this.scene),this.opponentScore.setDepth(mn.Z.ITEM),this.add(this.opponentScore),Phaser.Display.Align.In.Center(this.opponentScore,this.board,100,-50)},n.createRestartButton=function(){this.buttonRestart=new Yc.Z(this.scene,{key:Zv,button:Uv.BUTTON_GREEN,icon:Uv.ICON_RESUME,text:"Restart"},170,72),this.buttonRestart.setName("Restart"),this.buttonRestart.setDepth(mn.Z.BUTTON),this.add(this.buttonRestart),Phaser.Display.Align.In.Center(this.buttonRestart,this.opponentScore,0,155)},n.createShareButton=function(){this.buttonShare=new Yc.Z(this.scene,{key:Zv,button:Uv.BUTTON_BLUE,icon:Uv.ICON_FLAT_SHARE,text:"Share"},153,72),this.buttonShare.setName("Restart"),this.buttonShare.setDepth(mn.Z.BUTTON),this.add(this.buttonShare),Phaser.Display.Align.In.Center(this.buttonShare,this.playerScore,0,155)},t}(Phaser.GameObjects.Container),Wv=Hv,zv=function(e){function t(){for(var t,n,a=arguments.length,s=new Array(a),o=0;o<a;o++)s[o]=arguments[o];return(n=e.call.apply(e,L()(t=[this]).call(t,s))||this).main=void 0,n.run=function(){n.getResultInfo()},n.handleClose=function(){n.scene.sleep(_a.C.RESULT_MATCH_SCENE),n.scene.run(_a.C.GAME_OVER_SCENE)},n.handleShareScore=function(){n.storage.dispatch(function(){var e=(0,i.Z)(r().mark((function e(t,n){var i,a,s,o,c,u,l,d,f,p,g;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=window.game,a=i.player,s=i.analytics,o=i.facebook,c=i.globalScene,e.prev=1,c.screen.open($a.o4.NOTIFY_SCREEN,{message:"loading",loading:!0}),u=n(),e.next=6,Bo(u);case 6:return l=e.sent,xo(l),d=a.getPlayer(),f=d.playerId,p=d.name,g=d.photo,e.next=11,o.shareAsync({text:"Pheww, a great match!",intent:"SHARE",image:l||"",data:{playerId:f,playerName:p,playerPhoto:g,type:fa}});case 11:s.event(bn._.SHARE,{share_content_type:"MatchResult",success:!0}),e.next=18;break;case 14:e.prev=14,e.t0=e.catch(1),s.event(bn._.SHARE,{share_content_type:"MatchResult",success:!1}),(0,h.tO)(e.t0);case 18:return e.prev=18,c.screen.close($a.o4.NOTIFY_SCREEN),e.finish(18);case 21:case"end":return e.stop()}}),e,null,[[1,14,18,21]])})));return function(t,n){return e.apply(this,arguments)}}())},n.handleRestartMatch=function(){n.storage.dispatch(function(){var e=(0,i.Z)(r().mark((function e(t,n){var i,a,s,o;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,window.game.globalScene.screen.open($a.o4.NOTIFY_SCREEN,{message:"loading",loading:!0}),a=n(),s=as(a),nn()(i=[va,Aa]).call(i,s)>=0&&(t(zs()),t(Us())),o=null,s===ya&&(o=fs(a),t({type:vi,payload:{}})),t(Qs()),e.next=11,t(bo(s,o));case 11:e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),(0,h.tO)(e.t0);case 16:return e.prev=16,uo(300),e.finish(16);case 19:case"end":return e.stop()}}),e,null,[[0,13,16,19]])})));return function(t,n){return e.apply(this,arguments)}}()),n.scene.sleep(_a.C.RESULT_MATCH_SCENE),n.scene.sleep(_a.C.GAME_OVER_SCENE)},n}(0,p.Z)(t,e);var n=t.prototype;return n.preload=function(){this.events.on("wake",this.run),this.events.on("create",this.run)},n.create=function(){e.prototype.create.call(this),this.createMask(.8),this.createMain(),this.createInput()},n.getResultInfo=function(){var e=this.storage.getState(),t=bs(e),n=as(e),i=this.player.getPlayer(),a=i.photo,r=i.name,s=i.playerId,o=fs(e),c=o.playerId,u=o.name,l=o.photo,h=(t[s]||{}).score,d=void 0===h?0:h,f=(t[c]||{}).score,p=void 0===f?0:f,g=gs(e,{playerId:s}),m=ms(e,{opponentId:c});n===ba&&(g=!0,m=!0);var v=g&&m;this.main.playerScore.loadPhoto(s,a),this.main.opponentScore.loadPhoto(c,l),this.main.playerScore.setPlayerName(r),this.main.opponentScore.setPlayerName(u),this.main.playerScore.setPlayerScore(d),this.main.opponentScore.setPlayerScore(p),this.main.playerScore.showCrown(v&&d>p),this.main.opponentScore.showCrown(v&&p>d),g&&m?d===p?this.main.titleText.setText("Draw"):d>p?this.main.titleText.setText("You Win"):d<p&&this.main.titleText.setText("You Lose"):this.main.titleText.setText("Waiting for Opponent"),g&&m&&(d===p||(d>p?this.audio.playSound(er.Z.YOU_WIN):d<p&&this.audio.playSound(er.Z.YOU_LOSE)))},n.createMain=function(){this.main=new Wv(this),Phaser.Display.Align.In.Center(this.main,this.gameZone,0,13)},n.createInput=function(){this.main.buttonClose.onClick=this.handleClose,this.main.buttonRestart.onClick=this.handleRestartMatch,this.main.buttonShare.onClick=this.handleShareScore},t}(Ua.Z);var Yv=zv,Vv=n(595),Kv=n(192),jv=function(e){function t(){for(var t,n,i=arguments.length,a=new Array(i),r=0;r<i;r++)a[r]=arguments[r];return(n=e.call.apply(e,L()(t=[this]).call(t,a))||this).config=void 0,n.promisesLoadFonts={},n.promisesLoadAtlas={},n.promisesLoadXml={},n}(0,p.Z)(t,e);var n=t.prototype;return n.getFontKey=function(e,t){return e.replace("{{locale}}",t||this.language)},n.initI18n=function(e,t){var n=this;this.config=(0,f.Z)({fallbackLanguage:"en",fontKeys:[],atlasFonts:[],supportLanguages:["en"]},t);var i=new(o())((function(t){e.i18n.initialize({fallbackLng:n.config.fallbackLanguage,loadPath:"assets/i18n/{{lng}}/{{ns}}.json",debug:GameCore.Utils.Valid.isDebugger(),languages:n.config.supportLanguages,compatibilityJSON:"v3"},(function(){var e=[n.changeLanguage(n.config.language),n.preloadLanguageResource(n.game.globalScene,n.config.fallbackLanguage)];o().all(e).then((function(){t()}))}))})),a=[i];return new(o())((function(e){o().all(a).then((function(){return e()}))}))},n.changeLanguage=function(e){var t;if(!xe()(t=this.supportedLanguages).call(t,e))return o().resolve();var n=this.preloadLanguageResource(this.game.globalScene,e);return new(o())((function(t){n.then((function(){Kv.ZP.changeLanguage(e).then((function(){t()})).catch((function(){t()}))})).catch((function(){t()})).finally((function(){}))}))},n.preloadLanguageResource=function(e,t){var n=this,i=this.config,a=i.fontKeys,r=i.atlasFonts,s=[];return Me()(a).call(a,(function(i){return s.push(n.preloadBitmapFont(e,i,t))})),Me()(r).call(r,(function(i){var a=i.atlasKey,r=i.fonts;s.push(n.preloadAtlas(e,a,t)),Me()(r).call(r,(function(i){return s.push(n.preloadBitmapFontFromAtlas(e,i,a,t))}))})),e.load.start(),s.push(Kv.ZP.loadLanguages(t)),new(o())((function(e){o().all(s).then((function(){return e()}))}))},n.preloadBitmapFont=function(e,t,n){var i=this,a=t.replace("-{{locale}}",""),r=this.getFontKey(t,n);if(this.game.cache.bitmapFont.exists(r))return o().resolve();if(void 0!==this.promisesLoadFonts[r])return this.promisesLoadFonts[r];var s="assets/fonts/"+n+"/"+a+".png",c="assets/fonts/"+n+"/"+a+".xml";e.load.bitmapFont(r,s,c);var u=new(o())((function(n){var a=e.tweens.addCounter({duration:100,loop:-1,onLoop:function(){i.game.cache.bitmapFont.exists(r)&&(i.game.cache.bitmapFont.exists(t)||i.game.cache.bitmapFont.add(t,i.game.cache.bitmapFont.get(r)),a.remove(),n())}})}));return this.promisesLoadFonts[a]=u,u},n.preloadBitmapFontFromAtlas=function(e,t,n,i){var a=this,r=t.replace("-{{locale}}",""),s=this.getFontKey(t,i),c=n.replace("-{{locale}}",i),u=s+"_data",l="assets/fonts/"+i+"/"+r+".xml";if(this.game.cache.xml.exists(u)&&this.game.textures.exists(c))return o().resolve();if(void 0!==this.promisesLoadXml[u])return this.promisesLoadXml[u];e.load.xml(u,l);var h=new(o())((function(n){var i=e.tweens.addCounter({duration:50,loop:-1,onLoop:function(){if(a.game.cache.xml.exists(u)&&a.game.textures.exists(c)){i.remove(),a.game.cache.bitmapFont.exists(t)||Phaser.GameObjects.BitmapText.ParseFromAtlas(e,t,c,r,u);Phaser.GameObjects.BitmapText.ParseFromAtlas(e,s,c,r,u);n()}}})}));return this.promisesLoadXml[u]=h,h},n.preloadAtlas=function(e,t,n){var i=this,a=t.replace("-{{locale}}",n),r=t.replace("-{{locale}}",""),s="assets/fonts/"+n+"/"+r+".png",c="assets/fonts/"+n+"/"+r+".json";if(this.game.textures.exists(a))return o().resolve();if(void 0!==this.promisesLoadAtlas[a])return this.promisesLoadAtlas[a];e.load.atlas(a,s,c);var u=new(o())((function(t){var n=e.tweens.addCounter({duration:50,loop:-1,onLoop:function(){i.game.textures.exists(a)&&(n.remove(),t())}})}));return this.promisesLoadAtlas[a]=u,u},(0,de.Z)(t,[{key:"supportedLanguages",get:function(){var e;return L()(e=[]).call(e,this.config.supportLanguages)}},{key:"fallbackLanguage",get:function(){return this.config.fallbackLanguage}},{key:"language",get:function(){return Kv.ZP.language}},{key:"languageIndex",get:function(){var e;return nn()(e=this.supportedLanguages).call(e,this.language)}}]),t}(Phaser.Plugins.BasePlugin),Xv=jv,Jv=n(606),qv=n(630),Qv={Mobile:{Background:["bg-0","bg-1","bg-2","bg-3","bg-4"],CardFace:["card-style-0","card-style-1","card-style-2"],CardBack:["card-back-0","card-back-1","card-back-2","card-back-3","card-back-4"]},Desktop:{Background:["bg-desktop-0","bg-desktop-1","bg-desktop-2","bg-desktop-3","bg-desktop-4"],CardFace:["card-style-0","card-style-desktop-0","card-style-2"],CardBack:["card-back-0","card-back-1","card-back-2","card-back-3","card-back-4"]}},$v=GameCore.Utils.Image.getImageScale(),ey={Background:{File:"./assets/images/"+$v+"x/{}.jpg"},CardFaceAtlas:{Texture:"./assets/textures/"+$v+"x/{}.png",JSON:"./assets/textures/"+$v+"x/{}.json"}},ty=ey.Background,ny=ey.CardFaceAtlas,iy=function(e){function t(){for(var t,n,i=arguments.length,a=new Array(i),r=0;r<i;r++)a[r]=arguments[r];return(n=e.call.apply(e,L()(t=[this]).call(t,a))||this).events=void 0,n.device=void 0,n.backgroundIdx=void 0,n.cardFaceIdx=void 0,n.cardBackIdx=void 0,n}(0,p.Z)(t,e);var n=t.prototype;return n.init=function(t){e.prototype.init.call(this,t),this.events=new Phaser.Events.EventEmitter},n.config=function(){this.device=this.game.world.isLandscape()?"desktop":"mobile"},n.getCurrentThemeResources=function(){var e=this.getCurrentIdxConfig(),t=e.backgroundIdx,n=e.cardFaceIdx;return this.getThemeResources(t,n)},n.getThemeResources=function(e,t){var n="desktop"===this.device?Qv.Desktop:Qv.Mobile,i=n.Background[e]||n.Background[0],a=(0,qv.Z)(ty.File,[i]),r=n.CardFace[t]||n.CardFace[0];return{backgroundKey:i,backgroundFile:a,cardFaceKey:r,cardFaceTexture:(0,qv.Z)(ny.Texture,[r]),cardFaceJSON:(0,qv.Z)(ny.JSON,[r])}},n.getBackgroundConfigs=function(){var e,t="desktop"===this.device?Qv.Desktop:Qv.Mobile;return Me()(e=t.Background).call(e,(function(e){return{key:e,url:(0,qv.Z)(ty.File,[e])}}))},n.getCardStyleAtlasConfigs=function(){var e,t="desktop"===this.device?Qv.Desktop:Qv.Mobile;return Me()(e=t.CardFace).call(e,(function(e){return{key:e,textureURL:(0,qv.Z)(ny.Texture,[e]),atlasURL:(0,qv.Z)(ny.JSON,[e])}}))},n.getCurrentThemeConfig=function(){var e=this.backgroundIdx,t=this.cardFaceIdx,n=this.cardBackIdx;return"desktop"==this.device?{backgroundKey:Qv.Desktop.Background[e],cardFaceKey:Qv.Desktop.CardFace[t],cardBackFrame:Qv.Desktop.CardBack[n]}:{backgroundKey:Qv.Mobile.Background[e],cardFaceKey:Qv.Mobile.CardFace[t],cardBackFrame:Qv.Mobile.CardBack[n]}},n.getCurrentIdxConfig=function(){var e=this.game.player.getPlayerSettings(),t=e.backgroundDesktopIdx,n=e.cardFaceDesktopIdx,i=e.cardBackDesktopIdx,a=e.backgroundIdx,r=e.cardFaceIdx,s=e.cardBackIdx;return"desktop"==this.device?{backgroundIdx:t,cardFaceIdx:n,cardBackIdx:i}:{backgroundIdx:a,cardFaceIdx:r,cardBackIdx:s}},n.getThemePreview=function(){return"desktop"===this.device?Qv.Desktop:Qv.Mobile},n.changeBackground=function(e){"desktop"==this.device?this.game.player.setSetting("backgroundDesktopIdx",e):this.game.player.setSetting("backgroundIdx",e),this.backgroundIdx=e},n.changeCardFace=function(e){"desktop"==this.device?this.game.player.setSetting("cardFaceDesktopIdx",e):this.game.player.setSetting("cardFaceIdx",e),this.cardFaceIdx=e},n.changeCardBack=function(e){"desktop"==this.device?this.game.player.setSetting("cardBackDesktopIdx",e):this.game.player.setSetting("cardBackIdx",e),this.cardBackIdx=e},n.updateCurrentCardStyle=function(){var e=this.getCurrentIdxConfig(),t=e.backgroundIdx,n=e.cardFaceIdx,i=e.cardBackIdx;this.setCurrentStyle(t,n,i)},n.setCurrentStyle=function(e,t,n){this.backgroundIdx=e,this.cardFaceIdx=t,this.cardBackIdx=n},t}(Phaser.Plugins.BasePlugin),ay=iy,ry=function(e){function t(t){var n;return(n=e.call(this,{game:t,fragShader:"\nprecision mediump float;\n\nuniform sampler2D uMainSampler[%count%];\nuniform float gray;\n\nvarying vec2 outTexCoord;\nvarying float outTexId;\nvarying vec4 outTint;\nvarying vec2 fragCoord;\n\nvoid main()\n{\n    vec4 texture;\n\n    %forloop%\n\n    gl_FragColor = texture;\n    gl_FragColor.rgb = mix(gl_FragColor.rgb, vec3(0.2126 * gl_FragColor.r + 0.7152 * gl_FragColor.g + 0.0722 * gl_FragColor.b), gray);\n}",uniforms:["uProjectionMatrix","uMainSampler","gray"]})||this).gray=void 0,n.gray=.8,n}return(0,p.Z)(t,e),t.prototype.onPreRender=function(){this.set1f("gray",this.gray)},t}(Phaser.Renderer.WebGL.Pipelines.MultiPipeline),sy=(function(){var e=(0,i.Z)(r().mark((function e(t){var n,a,s,c,u;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=Math.ceil(t/80),a=0,s=function(){var e=(0,i.Z)(r().mark((function e(){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,FBInstant.performHapticFeedbackAsync();case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0);case 8:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(){return e.apply(this,arguments)}}();case 3:if(!(a<n)){e.next=11;break}return c=s(),u=(0,nr.qZ)(80),a+=1,e.next=9,o().all([c,u]);case 9:e.next=3;break;case 11:case"end":return e.stop()}}),e)})))}(),function(e){try{return!1}catch(t){}}),oy=function(e){function t(){return e.apply(this,arguments)||this}return(0,p.Z)(t,e),t.prototype.performVibrating=function(e){this.game.player.getPlayerSettings().vibrate&&sy(e)},t}(Phaser.Plugins.BasePlugin),cy=oy,uy=n(607),ly=n(412),hy=n.n(ly),dy=function(e){if((this._i18nFontKey||this.font)&&this.setFont(this._i18nFontKey||this.font),e!==this._i18nKey&&(this._i18nKey=e.toString()||""),this._isIgnoreLanguage)return this._setText(e);var t=this._setText(Kv.ZP.t(this._i18nKey,this._interpolations)||"");return this.refontSize&&this.refontSize(),this.emit("textChanged",e),t},fy=function(e,t,n){if(xe()(e).call(e,"{{locale}}")){e!==this._i18nFontKey&&(this._i18nFontKey=e.toString()||"");var i=this._baseLocale||this.scene.lang.language,a=e.replace("{{locale}}",i);return this._setFont(a,t,n)}},py={get:function(){return this._interpolations},set:function(e){this._interpolations=e,this.setText(this._i18nKey)}},gy=function(e){this._interpolations||(this._interpolations={}),this._interpolations=(0,f.Z)({},this._interpolations,e),this.setText(this._i18nKey)},my=function(e,t){this._interpolations||(this._interpolations={}),this._interpolations[e]=t,this.setText(this._i18nKey)},vy=function(e){e in this._interpolations&&delete this._interpolations[e],this.setText(this._i18nKey)},yy=function(e,t){this._isIgnoreLanguage=void 0==e||e,this._baseLocale=t,this.setText(this._i18nKey)},by=function(e,t,n,i){var a=this;if((!this._maxWidth||!this._maxHeight||!this._baseFontSize)&&GameCore.Utils.Valid.isDebugger()&&GameCore.Configs.Debugger.ShowBoxBitmapText){var r=this.scene.add.rectangle(0,0,10,10);r.setStrokeStyle(1,16711680,1),this.scene.events.on(Phaser.Scenes.Events.UPDATE,(function(){r.setPosition(a.x,a.y),r.setOrigin(a.originX,a.originY),r.setSize(a._maxWidth,a._maxHeight),a.parentContainer&&a.parentContainer.add(r)}))}this._maxWidth=e||this._maxWidth||Phaser.Math.MAX_SAFE_INTEGER,this._maxHeight=t||this._maxHeight||Phaser.Math.MAX_SAFE_INTEGER,this._baseFontSize=i||this._baseFontSize||this.fontSize,this.setMaxWidth(this._maxWidth,n?Phaser.Math.MAX_SAFE_INTEGER:void 0),this.setText(this._i18nKey)},Ay=function(){if(this._maxWidth&&this._maxHeight&&this._baseFontSize){var e=this._maxWidth,t=this._maxHeight,n=this._baseFontSize,i=this.wordWrapCharCode===Phaser.Math.MAX_SAFE_INTEGER;for(this.setFontSize(n);this.width>e||this.height>t||this.getTextBounds().lines.lengths.length>1&&i;)this.setFontSize(.95*this.fontSize)}},Ey=function(e,t){e.prototype.setText!==dy&&(e.prototype._setText=e.prototype.setText,e.prototype._setFont=e.prototype.setFont,e.prototype.setText=dy,e.prototype.setFont=fy,A()(e.prototype,"interpolations",py),e.prototype.setTranslationParameter=my,e.prototype.setTranslationParameters=gy,e.prototype.clearTranslationParameter=vy,e.prototype.setIgnoreLanguage=yy);var n=Phaser.GameObjects.GameObjectCreator;if(n){var i=n.prototype[t];i&&(delete n.prototype[t],n.register("_"+t,i),n.register(t,(function(e,n){void 0===n&&(n=!1);var i=this.scene.make["_"+t](e,n);return i.interpolations=e.interpolations,i})))}var a=Phaser.GameObjects.GameObjectFactory;if(a){var r=a.prototype[t];r&&(delete a.prototype[t],a.register("_"+t,r))}},Sy={extendText:function(){var e=Phaser.GameObjects.Text;e&&Ey(e,"text");var t=Phaser.GameObjects.GameObjectFactory;t&&t.register("text",(function(e,t,n,i,a){var r=this.scene.add._text(e,t,n,i);return r.interpolations=a,r}))},extendBitmapText:function(){var e=Phaser.GameObjects.BitmapText;e&&(Ey(e,"bitmapText"),e.prototype.setMaxSize=by,e.prototype.refontSize=Ay);var t=Phaser.GameObjects.GameObjectFactory;t&&t.register("bitmapText",(function(e,t,n,i,a,r){var s=this.scene.add._bitmapText(e,t,n,i,a);return s.interpolations=r,s}))},extendDynamicBitmapText:function(){var e=Phaser.GameObjects.DynamicBitmapText;e&&Ey(e,"dynamicBitmapText");var t=Phaser.GameObjects.GameObjectFactory;t&&t.register("dynamicBitmapText",(function(e,t,n,i,a,r){var s=this.scene.add._dynamicBitmapText(e,t,n,i,a);return s.interpolations=r,s}))}},Ty=function(e){function t(){for(var t,n,i=arguments.length,a=new Array(i),r=0;r<i;r++)a[r]=arguments[r];return(n=e.call.apply(e,L()(t=[this]).call(t,a))||this).languageChangedBound=void 0,n}(0,p.Z)(t,e),t.staticConstructor=function(){Sy.extendText(),Sy.extendBitmapText()};var n=t.prototype;return n.boot=function(){var e=this.systems.events;e.on("shutdown",this.shutdown,this),e.on("shutdown",this.shutdown,this),this.languageChangedBound=this.languageChanged.bind(this),this.on("languageChanged",this.languageChangedBound)},n.initialize=function(e,t){Kv.ZP.use(new(hy())(null,e)),e?Kv.ZP.init(e,t):Kv.ZP.init(t)},n.use=function(e){return Kv.ZP.use(e)},n.t=function(e,t){return Kv.ZP.t(e,t)},n.exists=function(e,t){return Kv.ZP.exists(e,t)},n.loadResources=function(e){Kv.ZP.loadResources(e)},n.createInstance=function(e,t){return Kv.ZP.createInstance(e,t)},n.cloneInstance=function(e,t){return Kv.ZP.cloneInstance(e,t)},n.getFixedT=function(e,t){return Kv.ZP.getFixedT(e,t)},n.changeLanguage=function(e,t){return Kv.ZP.changeLanguage(e,t)},n.loadNamespaces=function(e,t){return Kv.ZP.loadNamespaces(e,t)},n.loadLanguages=function(e,t){return Kv.ZP.loadLanguages(e,t)},n.reloadResources=function(e,t){return Kv.ZP.reloadResources(e,t)},n.setDefaultNamespace=function(e){Kv.ZP.setDefaultNamespace(e)},n.dir=function(e){return Kv.ZP.dir(e)},n.on=function(e,t){Kv.ZP.on(e,t)},n.off=function(e,t){Kv.ZP.off(e,t)},n.getResource=function(e,t,n,i){Kv.ZP.getResource(e,t,n,i)},n.addResource=function(e,t,n,i,a){Kv.ZP.addResource(e,t,n,i,a)},n.addResources=function(e,t,n){Kv.ZP.addResources(e,t,n)},n.addResourceBundle=function(e,t,n,i,a){Kv.ZP.addResourceBundle(e,t,n,i,a)},n.hasResourceBundle=function(e,t){return Kv.ZP.hasResourceBundle(e,t)},n.getResourceBundle=function(e,t){return Kv.ZP.getResourceBundle(e,t)},n.removeResourceBundle=function(e,t){Kv.ZP.removeResourceBundle(e,t)},n.recursiveUpdateText=function(e){var t=this;e instanceof Phaser.GameObjects.Text||e instanceof Phaser.GameObjects.BitmapText?e.setText(e._i18nKey):e instanceof Phaser.GameObjects.Container||e instanceof Phaser.GameObjects.Layer?e.list.forEach((function(e){t.recursiveUpdateText(e)})):e.children&&e.children.length>0&&e.children.each((function(e){t.recursiveUpdateText(e)}))},n.shutdown=function(){this.off("languageChanged",this.languageChangedBound);var e=this.systems.events;e.off("shutdown",this.shutdown,this,!1),e.off("shutdown",this.shutdown,this,!1)},n.languageChanged=function(){this.recursiveUpdateText(this.scene)},(0,de.Z)(t,[{key:"language",get:function(){return Kv.ZP.language}},{key:"languages",get:function(){return Kv.ZP.languages}},{key:"format",get:function(){return Kv.ZP.format}},{key:"options",get:function(){return Kv.ZP.options}},{key:"isInitialized",get:function(){return Kv.ZP.isInitialized}}]),t}(Phaser.Plugins.ScenePlugin);Ty.staticConstructor();var Cy=["Enable"],wy=function(e){function t(){return e.apply(this,arguments)||this}(0,p.Z)(t,e);var a=t.prototype;return a.boot=function(){var t=(0,i.Z)(r().mark((function t(){return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.prototype.boot.call(this),this.addExtraGameObjectMethods(),this.addExtraFBInstantFunctions(),this.addPlugins(),t.next=6,this.addDevPlugins();case 6:return t.next=8,this.initAdsAsync();case 8:this.addScenes(),this.addDevScenes(),this.initWorld(),this.initManagers(),this.initStorage(),this.initUtils(),this.initRollbar(),this.initConsole(),this.initDebugger(),this.initStatistics(),this.initParticleEditor(),this.initProfilerPlugin(),this.initAdaptivePerformance(),this.initCanvasRecorderPlugin();case 22:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),a.start=function(){e.prototype.start.call(this)},a.addExtraGameObjectMethods=function(){var e=new T(this);e.addKillRevive(),e.addKillReviveGroup(),e.addDrawDebugBox(),e.addSetWorldSize(),e.addSetWorldSizeForContainer(),e.addGetWorldPosition(),e.addCropByViewport(),e.addHighQuality(),e.addGradientHorizontalTint(),e.addRadius(),e.addSetLineHeightForBitmapText()},a.addExtraFBInstantFunctions=function(){var e=new g.Z(this.facebook);this.facebook.getLocale=e.getLocale,this.facebook.shareAsync=e.shareAsync,this.facebook.inviteAsync=e.inviteAsync,this.facebook.switchAsync=e.switchAsync,this.facebook.chooseAsync=e.chooseAsync,this.facebook.createAsync=e.createAsync,this.facebook.sendMessage=e.sendMessage,this.facebook.getContextID=e.getContextID,this.facebook.getPlayerToken=e.getPlayerToken,this.facebook.matchPlayerAsync=e.matchPlayerAsync,this.facebook.getContextPlayers=e.getContextPlayers,this.facebook.setLoadingProgress=e.setLoadingProgress,this.facebook.attemptToAddShortcut=e.attemptToAddShortcut,this.facebook.attemptToSubscribeBot=e.attemptToSubscribeBot,this.facebook.postSessionScoreAsync=e.postSessionScoreAsync,this.facebook.getRewardedVideoAsync=e.getRewardedVideoAsync,this.facebook.sendNotificationAsync=e.sendNotificationAsync,this.facebook.getInterstitialAdAsync=e.getInterstitialAdAsync,this.facebook.isSupportedAPI=e.isSupportedAPI,e.injectTournament(),this.facebook.progressLoading=new y(this)},a.addPlugins=function(){this.plugins.install("Storage",$i,!0,"storage"),this.plugins.install("Rollbar",gn,!0,"rollbar"),this.plugins.install("AdsManager",$,!0,"ads"),this.plugins.install("AuthManager",Se,!0,"auth"),this.plugins.install("AudioManager",he,!0,"audio"),this.plugins.install("WorldManager",la,!0,"world"),this.plugins.install("PlayerManager",Zt,!0,"player"),this.plugins.install("ProfileManager",en,!0,"profile"),this.plugins.install("AnalyticsManager",ne,!0,"analytics"),this.plugins.install("AdaptivePerformance",Re,!0,"performance"),this.plugins.install("ThemeManager",ay,!0,"theme"),this.plugins.install("VibrationManager",cy,!0,"vibration"),this.plugins.install("LanguageManager",Xv,!0,"lang"),this.plugins.installScenePlugin("textStyler",aa,"textStyler"),this.plugins.installScenePlugin("ScreenManager",In,"screen"),this.plugins.installScenePlugin("FrameCapture",we,"frameCapture"),this.plugins.installScenePlugin("I18n",Ty,"i18n"),window.SpinePlugin&&this.plugins.installScenePlugin("SpinePlugin",SpinePlugin,"spine"),this.storage=this.plugins.get("Storage"),this.rollbar=this.plugins.get("Rollbar"),this.ads=this.plugins.get("AdsManager"),this.auth=this.plugins.get("AuthManager"),this.audio=this.plugins.get("AudioManager"),this.world=this.plugins.get("WorldManager"),this.theme=this.plugins.get("ThemeManager"),this.player=this.plugins.get("PlayerManager"),this.lang=this.plugins.get("LanguageManager"),this.profile=this.plugins.get("ProfileManager"),this.analytics=this.plugins.get("AnalyticsManager"),this.performance=this.plugins.get("AdaptivePerformance"),this.plugins.install("KawaseBlurFilterPlugin",Vv.Z)},a.addDevPlugins=function(){var e=(0,i.Z)(r().mark((function e(){var t,i,a,s,o,c;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(GameCore.Utils.Valid.isDebugger()){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,Promise.all([n.e(7),n.e(942)]).then(n.bind(n,608));case 4:return t=e.sent.default,e.next=7,Promise.all([n.e(498),n.e(739),n.e(530)]).then(n.bind(n,609));case 7:return i=e.sent.default,e.next=10,n.e(401).then(n.bind(n,610));case 10:return a=e.sent.default,e.next=13,Promise.all([n.e(498),n.e(123)]).then(n.bind(n,611));case 13:return s=e.sent.default,e.next=16,Promise.all([n.e(498),n.e(803)]).then(n.bind(n,612));case 16:return o=e.sent.default,e.next=19,Promise.all([n.e(498),n.e(616),n.e(613)]).then(n.bind(n,613));case 19:c=e.sent.default,this.plugins.install("Console",t,!0,"console"),this.plugins.install("Debugger",i,!0,"debugger"),this.plugins.install("Statistics",a,!0,"statistics"),this.plugins.install("Profiler",s,!0,"profiler"),this.plugins.install("ParticleEditor",o,!0,"particle-editor"),this.plugins.install("CanvasRecorder",c,!0,"canvasRecorder"),this.eruda=this.plugins.get("Console"),this.debugger=this.plugins.get("Debugger"),this.statistics=this.plugins.get("Statistics"),this.profiler=this.plugins.get("Profiler"),this.particleEditor=this.plugins.get("ParticleEditor"),this.canvasRecorder=this.plugins.get("CanvasRecorder");case 32:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),a.addScenes=function(){this.scene.add(_a.C.BOOT_SCENE,Za,!0),this.scene.add(_a.C.LOAD_SCENE,Lv,!1),this.scene.add(_a.C.GAME_SCENE,dm,!1),this.scene.add(_a.C.GAME_OVER_SCENE,eu,!1),this.scene.add(_a.C.DASHBOARD_SCENE,Wa,!1),this.scene.add(_a.C.LEADERBOARD_SCENE,av,!1),this.scene.add(_a.C.RESULT_MATCH_SCENE,Yv,!1),this.scene.add(_a.C.GLOBAL_SCENE,qg.Z,!1)},a.addDevScenes=function(){var e=(0,i.Z)(r().mark((function e(){var t,i;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(GameCore.Utils.Valid.isDebugger()){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,n.e(638).then(n.bind(n,615));case 4:return t=e.sent.default,e.next=7,n.e(557).then(n.bind(n,616));case 7:i=e.sent.default,this.scene.add(_a.C.TEST_SCENE,t,!1),this.scene.add(_a.C.ANIMATIONS_SCENE,i,!1);case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),a.initAdsAsync=function(){var e=(0,i.Z)(r().mark((function e(){var t,n,i;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=GameCore.Configs.Ads,e.next=3,this.getAdServiceInstance();case 3:(n=e.sent).setGame(this),i=(0,f.Z)({},t.InterstitialAdOptions),this.ads.configure(n,{enabled:t.Enabled,calculateSafeAreaBottom:t.CalculateSafeAreaBottom,enableRewardVideoResetInterstitial:t.EnableRewardVideoResetInterstitial,interstitialAdOptions:i,rewardAdOptions:t.RewardAdOptions,bannerAdOptions:t.BannerAdOptions});case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),a.getAdServiceInstance=function(){var e=(0,i.Z)(r().mark((function e(){var t,i,a,s;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=GameCore.Configs.Ads,i=t.AdService,!t.Mockup.Enable){e.next=6;break}return e.next=4,n.e(131).then(n.bind(n,617));case 4:return a=e.sent.default,e.abrupt("return",a);case 6:if("google"!==i){e.next=19;break}return e.prev=7,e.next=10,this.initGoogleAdInstanceAsync();case 10:if(null===(s=e.sent)){e.next=13;break}return e.abrupt("return",s);case 13:e.next=19;break;case 15:return e.prev=15,e.t0=e.catch(7),e.abrupt("return",Jv.default);case 19:return e.abrupt("return",Jv.default);case 20:case"end":return e.stop()}}),e,this,[[7,15]])})));return function(){return e.apply(this,arguments)}}(),a.initGoogleAdInstanceAsync=function(){var e=(0,i.Z)(r().mark((function e(){var t,n,i,a,s,o,c,u;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("loaded"!==uy.default.initStatus){e.next=2;break}return e.abrupt("return",uy.default);case 2:if(t=GameCore.Configs.Ads.AdServiceConfigs.Google){e.next=6;break}return e.abrupt("return",null);case 6:return n=t.DataAdClient,i=t.DataAdChannel,a=t.DataAdBreakTest,s=t.DataAdFrequencyHint,o=t.DataAdHost,c=t.MaxScriptLoadRetryCount,u={dataAdClient:n,dataAdChannel:i,dataAdBreakTest:a,dataAdFrequencyHint:s,dataAdHost:o,maxScriptLoadRetryCount:c},e.prev=8,uy.default.setGame(this),e.next=12,uy.default.initGoogleAdsAsync(u);case 12:return e.abrupt("return",uy.default);case 15:return e.prev=15,e.t0=e.catch(8),e.abrupt("return",null);case 19:case"end":return e.stop()}}),e,this,[[8,15]])})));return function(){return e.apply(this,arguments)}}(),a.initWorld=function(){var e=this,t=GameCore.Configs.Game,n=t.AutoResize,i=t.PortraitRatio,a=t.PortraitWidth,r=t.PortraitHeight,s=t.LandscapeRatio,o=t.LandscapeWidth,c=t.LandscapeHeight,u=t.DisableLandscape,l=t.FullSizeOnLandscape,h=n,d=u,f=l,p=i,g=a,m=r,v=s,y=o,b=c;this.world.configure({autoResize:h,portraitRatio:p,portraitWidth:g,portraitHeight:m,landscapeRatio:v,landscapeWidth:y,landscapeHeight:b,disableLandscape:d,fullSizeOnLandscape:f}),this.world.resize(t.ForcePixelRatio),this.events.on("world-resize",(function(){e.world.configure({autoResize:h,portraitRatio:p,portraitWidth:g,portraitHeight:m,landscapeRatio:v,landscapeWidth:y,landscapeHeight:b,disableLandscape:d,fullSizeOnLandscape:f}),e.world.resize(t.ForcePixelRatio)}))},a.initManagers=function(){this.theme.config()},a.initStorage=function(){var e=new ka(this);this.storage.setInitiator(e)},a.initVisibilityChangeHandler=function(){this.visibility.configure()},a.initUtils=function(){this.addPipelines(),this.removeUnusedPipelines()},a.initConsole=function(){GameCore.Utils.Valid.isDebugger()&&(GameCore.Configs.Debugger.ShowConsole&&this.eruda.configure({tool:["console","info"],defaults:{theme:"Dark"}}))},a.initDebugger=function(){if(GameCore.Utils.Valid.isDebugger()){var e=GameCore.Configs.Debugger,t=e.ShowInspector,n=e.ShowMonitoring;(t||n)&&this.debugger.configure(GameCore.Configs.Debugger)}},a.initStatistics=function(){GameCore.Utils.Valid.isDebugger()&&(GameCore.Configs.Statistics.Enable&&this.statistics.configure(GameCore.Configs.Statistics))},a.initParticleEditor=function(){GameCore.Utils.Valid.isDebugger()&&(GameCore.Configs.ParticleEditor.Enable&&this.particleEditor.configure(GameCore.Configs.ParticleEditor))},a.initProfilerPlugin=function(){GameCore.Utils.Valid.isDebugger()&&(GameCore.Configs.ProfilerPlugin.Enable&&this.profiler.configure())},a.initAdaptivePerformance=function(){var e=GameCore.Configs.Performance,t=e.Enable,n=(0,d.Z)(e,Cy);if(t){var i=this.world.getPixelRatio();this.performance.configure((0,f.Z)({pixelRatio:i},n)),this.performance.active()}},a.initCanvasRecorderPlugin=function(){var e=this;if(GameCore.Utils.Valid.isDebugger()){var t=GameCore.Configs.CanvasRecorder;if(t.Enable){var n=t.Options,a=n.Type,s=n.Quality,c=n.RecordFps,u=n.SyncFps;this.canvasRecorder.configure({type:a,quality:s,syncFps:u,recordFps:c});var l=document.querySelector("canvas");if(l){this.canvasRecorder.setCanvas(l);var h=this.canvasRecorder.getOptions(),d=this.canvasRecorder.waitNextFrame;this.canvasRecorder.waitNextFrame=(0,i.Z)(r().mark((function t(){return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!h.syncFps){t.next=5;break}return e.loop.sleep(),t.abrupt("return",new(o())((function(t){e.events.once(Phaser.Core.Events.POST_RENDER,t),e.loop.lastTime=1e3/h.recordFps,e.loop.step()})));case 5:return e.loop.wake(),t.abrupt("return",d.call(e.canvasRecorder));case 7:case"end":return t.stop()}}),t)})))}}}},a.initRollbar=function(){GameCore.Configs.Rollbar.Enable&&this.rollbar.setup()},a.handlePauseAudio=function(){},a.addPipelines=function(){var e=this.renderer;e instanceof Phaser.Renderer.WebGL.WebGLRenderer&&e.pipelines.add("Grayscale",new ry(this))},a.removeUnusedPipelines=function(){var e=this.renderer;if(e instanceof Phaser.Renderer.WebGL.WebGLRenderer){var t=e.pipelines,n=Phaser.Renderer.WebGL.Pipelines;if(n)[n.ROPE_PIPELINE,n.LIGHT_PIPELINE,n.POSTFX_PIPELINE,n.POINTLIGHT_PIPELINE,n.BITMAPMASK_PIPELINE].forEach((function(e){var n;null==(n=t.get(e))||n.destroy(),t.remove(e)}))}},t}(Phaser.Game),Iy=wy,xy=GameCore.Utils.Valid.isDebugger(),Py={parent:"app",type:Phaser.AUTO,width:0,height:0,scale:{autoRound:!0},dom:{createContainer:!1},loader:{maxParallelDownloads:6,crossOrigin:"no-cros"},input:{gamepad:!1,keyboard:xy,touch:{capture:!0},smoothFactor:1,activePointers:1,windowEvents:!1},disableContextMenu:!0,render:{pixelArt:!1,antialias:!0,antialiasGL:!0,transparent:!0,desynchronized:!1,powerPreference:"high-performance",clearBeforeRender:!1,roundPixels:!1},plugins:{global:[]}};(0,h.j6)();var ky=function(){var e=(0,i.Z)(r().mark((function e(){var t;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,l();case 3:t=new Iy(Py),window.game=t,e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),(0,h.tO)(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),_y=setInterval((function(){window.__analyticsInitiated&&(window.__fbGameReady=!1,clearInterval(_y),clearInterval(window.__fbInstantLoadingTimer),GameSDK.setLoadingProgress(30),gtag("event","app_initialize",{send_to:["GA"]}),ky())}),50)},661:function(e,t,n){"use strict";n.d(t,{Z5:function(){return b},H$:function(){return A},wF:function(){return E},bh:function(){return S},Iy:function(){return T},xB:function(){return C}});var i=n(628),a=n(631),r=n(4),s=n.n(r),o=n(36),c=n.n(o),u=n(1),l=n.n(u),h=n(653),d=n(640),f=n(662),p=GameCore.Configs,g=p.AppId,m=p.OtherHost,v=p.LeadersBoard,y=p.Tournament,b=function(){var e=(0,a.Z)(l().mark((function e(t){var n,a;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n={appId:g,resetScore:0,numberOfLeaders:15,timezone:"utc+0",sortOrder:"desc",statistics:"max",resettable:"manually",description:"no description"},!v.UseMock){e.next=5;break}return e.next=4,(0,d.qZ)(1e3);case 4:return e.abrupt("return",(0,i.Z)({},n,t,{_id:v.LeaderboardId,type:"app_leaderboard",description:"mockup_leaderboard",createdAt:new Date(Date.now()).toISOString(),updatedAt:new Date(Date.now()).toISOString()}));case 5:return"leaderboards",e.next=8,(0,h.v)("leaderboards",(0,i.Z)({},n,t),{},m);case 8:return a=e.sent,e.abrupt("return",(null==a?void 0:a.data)||{});case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),A=function(){var e=(0,a.Z)(l().mark((function e(t,n){var i,a,r,o,u,f,p,g,b,A,E;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===n&&(n={}),t){e.next=3;break}return e.abrupt("return",[]);case 3:if(i=[],!y.UseMock){e.next=9;break}return e.next=7,(0,d.qZ)(1e3);case 7:return u=(o=n).limit,void 0===u?Math.floor(10*Math.random()):u,f=o.offset,p=void 0===f?0:f,e.abrupt("return",s()(a=c()(r=new Array(Math.floor(10*Math.random()))).call(r,null)).call(a,(function(e,t){var n=(t+1)*(p+1),i=v.MockOptions.PlayerEntryIndex===t,a={playerId:"player-0"+n,name:"MPlayer "+n,photo:"./assets/images/others/avatar.jpg",rank:n,score:Math.floor(1e5/n+1e4*Math.random())};if(i){var r=window.game.player.getPlayer(),s=r.playerId,o=r.name,c=r.photo;a.playerId=s,a.name=o,a.photo=c}return a})));case 9:return g=GameCore.Utils.String.params(n),b="leaderboards/"+t+"/leaders",e.next=13,(0,h.U)(b+"?"+g,{},m);case 13:if((A=e.sent)&&(null==A||!A.error)){e.next=16;break}throw new Error((null==A?void 0:A.error)||"Leaderboard not found");case 16:if(!((E=(null==A?void 0:A.data)||[]).length<1)){e.next=19;break}return e.abrupt("return",i);case 19:return i=E,e.abrupt("return",i);case 21:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),E=function(){var e=(0,a.Z)(l().mark((function e(t){var n,i;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return",null);case 2:return n="leaderboards/"+t,e.next=5,(0,h.U)(""+n,{},m);case 5:if((i=e.sent)&&(null==i||!i.error)){e.next=8;break}return e.abrupt("return",null);case 8:return e.abrupt("return",null==i?void 0:i.data);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),S=function(){var e=(0,a.Z)(l().mark((function e(t,n,i){var a;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,h.v)("leaderboards/"+t+"/players/"+n,{score:i},{},m);case 2:return a=e.sent,e.abrupt("return",(null==a?void 0:a.data)||{});case 4:case"end":return e.stop()}}),e)})));return function(t,n,i){return e.apply(this,arguments)}}(),T=function(){var e=(0,a.Z)(l().mark((function e(){var t,n,i,a,r,s,o,c,u;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=GameCore.Utils.String.params({limit:100,type:"world_tournament_leaderboard"}),"leaderboards",e.next=4,(0,h.U)("leaderboards?"+t,{},m);case 4:if((n=e.sent)&&(null==n||!n.error)){e.next=7;break}throw new f.Z;case 7:for(i=(null==n?void 0:n.data)||[],a=[],r=0;r<i.length;r++)s=JSON.parse(i[r].description),o=new Date(i[r].createdAt).getTime(),c=Math.round((6048e5+o)/1e3),u={id:s.tournamentID,title:i[r].name,endTime:c,contextID:s.contextID,payload:{playerId:"",playerName:"",leaderboardId:i[r]._id,level:s.level,image:s.image}},a.push(u);return e.abrupt("return",a);case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),C=function(){var e=(0,a.Z)(l().mark((function e(t,n){var i,a,r,s,o;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=null,t){e.next=3;break}return e.abrupt("return",i);case 3:if(a=v.Prefix+"/"+n+"/players"){e.next=6;break}return e.abrupt("return",i);case 6:return r=GameCore.Utils.String.params({playerIds:t}),e.next=9,(0,h.U)(a+"?"+r,{},m);case 9:if(s=e.sent,!((o=(null==s?void 0:s.data)||[]).length<1)){e.next=13;break}return e.abrupt("return",i);case 13:return i=o[0],e.abrupt("return",i);case 15:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},641:function(e,t,n){"use strict";n.d(t,{_:function(){return i}});var i={BUTTON_CLICK:"button_click",SCREEN_OPEN:"screen_open",LOAD_START:"load_start",LOAD_COMPLETE:"load_complete",APP_READY:"app_ready",TUTORIAL_BEGIN:"tutorial_begin",TUTORIAL_STEP:"tutorial_step",TUTORIAL_COMPLETE:"tutorial_complete",MATCH_START:"match_start",MATCH_RESCUE:"match_rescue",MATCH_END:"match_end",LEVEL_START:"level_start",LEVEL_RESCUE:"level_rescue",LEVEL_CONTINUE:"level_continue",LEVEL_PROGRESS:"level_progress",LEVEL_END:"level_end",LEVEL_GIVE_UP:"level_give_up",SHARE:"share",MESSAGE:"message",INVITE:"invite",SHORTCUT_CREATE:"shortcut_create",SHORTCUT_CREATE_POPUP:"shortcut_create_popup",BOT_SUBSCRIBE:"bot_subscribe",BOT_SUBSCRIBE_POPUP:"bot_subscribe_popup",AD_LOAD:"ad_load",AD_LOAD_FAILED:"ad_load_failed",AD_SHOW:"ad_show",AD_SHOW_FAILED:"ad_show_failed",MISSING_AD_SHOW:"missing_ad_show",NEW_USER:"new_user",AD_IMPRESSION:"ad_impression",JOIN_GROUP:"join_group",THEME_CHANGED:"theme_changed",AD_INIT:"ad_init",TOURNAMENT_SHARE:"tournament_share",TOURNAMENT_CREATE:"tournament_create",TOURNAMENT_POST_SCORE:"tournament_post_score",TOURNAMENT_START:"tournament_start",SWITCH_SOLO_CONTEXT:"switch_solo_context",PAGE_FOLLOW:"page_follow",GROUP_JOIN:"group_join",SWITCH_GAME_POPUP:"switch_game_popup",SWITCH_GAME_POPUP_CANCEL:"switch_game_popup_cancel"}},676:function(e,t){"use strict";t.Z={sound:"sound",music:"music",vibrate:"vibrate",language:"language",language2:"language2",theme:"theme",tapToMove:"tapToMove",autoHints:"autoHints",autoMoveToFoundation:"autoMoveToFoundation",highlightLowCards:"highlightLowCards",backgroundIdx:"backgroundIdx",cardFaceIdx:"cardFaceIdx",cardBackIdx:"cardBackIdx",backgroundDesktopIdx:"backgroundDesktopIdx",cardFaceDesktopIdx:"cardFaceDesktopIdx",cardBackDesktopIdx:"cardBackDesktopIdx",modifiedOptions:"modifiedOptions"}},644:function(e,t,n){"use strict";var i=n(645),a=function(){function e(e,t,n,a){this.playerId=void 0,this.name=void 0,this.photo=void 0,this.locale=void 0,this.playerId=e,this.name=t,this.photo=n||i.Z.AVATAR.FILE,this.locale=a||"en_US"}return e.prototype.toObject=function(){return{playerId:this.playerId,name:this.name,photo:this.photo,locale:this.locale}},e}();t.Z=a},652:function(e,t){"use strict";t.Z={RESIZE:"resize",CHANGE_LAYOUT:"change-layout"}},659:function(e,t,n){"use strict";n.d(t,{I:function(){return a}});var i=n(650),a=function(e){return{type:i.DW,payload:{sceneKey:e}}}},640:function(e,t,n){"use strict";n.d(t,{qZ:function(){return o},Gm:function(){return c},F0:function(){return u}});var i=n(2),a=n.n(i),r=n(10),s=n.n(r),o=function(e){return new(a())((function(t){return setTimeout(t,e)}))},c=function(e){var t=new Date(e),n=new Date;return t.getDate()===n.getDate()&&t.getMonth()===n.getMonth()&&t.getFullYear()===n.getFullYear()},u=function(e,t){void 0===t&&(t=!0);var n=new Date(e).toISOString();return t?s()(n).call(n,11,-5):s()(n).call(n,14,-5)}},635:function(e,t,n){"use strict";n.d(t,{j6:function(){return i},sw:function(){return a},Tv:function(){return r},R0:function(){return s},tO:function(){return o}});n(636),n(134),n(31),n(19);var i=function(){var e=setInterval((function(){window.Sentry&&clearInterval(e)}),100)},a=function(e,t){window.Sentry&&window.Sentry.addBreadcrumb({category:e,message:t})},r=function(e){window.Sentry&&window.Sentry.setUser(e)},s=function(e,t){},o=function(e){}},646:function(e,t){"use strict";t.Z={GENERIC_NOTIFICATION:0,NEW_USER_NOTIFICATION:1,MONDAY_NOTIFICATION:2,TUESDAY_NOTIFICATION:3,WEDNESDAY_NOTIFICATION:4,THURSDAY_NOTIFICATION:5,FRIDAY_NOTIFICATION:6,SATURDAY_NOTIFICATION:7,SUNDAY_NOTIFICATION:8}},625:function(e,t,n){"use strict";n.d(t,{Z:function(){return r}});var i=JSON.parse('{"data":["Smith","Johnson","Williams","Brown","Jones","Miller","Davis","Garcia","Rodriguez","Wilson","Martinez","Anderson","Taylor","Thomas","Hernandez","Moore","Martin","Jackson","Thompson","White","Lopez","Lee","Gonzalez","Harris","Clark","Lewis","Robinson","Walker","Perez","Hall","Young","Allen","Sanchez","Wright","King","Scott","Green","Baker","Adams","Nelson","Hill","Ramirez","Campbell","Mitchell","Roberts","Carter","Phillips","Evans","Turner","Torres","Parker","Collins","Edwards","Stewart","Flores","Morris","Nguyen","Murphy","Rivera","Cook","Rogers","Morgan","Peterson","Cooper","Reed","Bailey","Bell","Gomez","Kelly","Howard","Ward","Cox","Diaz","Richardson","Wood","Watson","Brooks","Bennett","Gray","James","Reyes","Cruz","Hughes","Price","Myers","Long","Foster","Sanders","Ross","Morales","Powell","Sullivan","Russell","Ortiz","Jenkins","Gutierrez","Perry","Butler","Barnes","Fisher","Henderson","Coleman","Simmons","Patterson","Jordan","Reynolds","Hamilton","Graham","Kim","Gonzales","Alexander","Ramos","Wallace","Griffin","West","Cole","Hayes","Chavez","Gibson","Bryant","Ellis","Stevens","Murray","Ford","Marshall","Owens","Mcdonald","Harrison","Ruiz","Kennedy","Wells","Alvarez","Woods","Mendoza","Castillo","Olson","Webb","Washington","Tucker","Freeman","Burns","Henry","Vasquez","Snyder","Simpson","Crawford","Jimenez","Porter","Mason","Shaw","Gordon","Wagner","Hunter","Romero","Hicks","Dixon","Hunt","Palmer","Robertson","Black","Holmes","Stone","Meyer","Boyd","Mills","Warren","Fox","Rose","Rice","Moreno","Schmidt","Patel","Ferguson","Nichols","Herrera","Medina","Ryan","Fernandez","Weaver","Daniels","Stephens","Gardner","Payne","Kelley","Dunn","Pierce","Arnold","Tran","Spencer","Peters","Hawkins","Grant","Hansen","Castro","Hoffman","Hart","Elliott","Cunningham","Knight","Bradley","Carroll","Hudson","Duncan","Armstrong","Berry","Andrews","Johnston","Ray","Lane","Riley","Carpenter","Perkins","Aguilar","Silva","Richards","Willis","Matthews","Chapman","Lawrence","Garza","Vargas","Watkins","Wheeler","Larson","Carlson","Harper","George","Greene","Burke","Guzman","Morrison","Munoz","Jacobs","Obrien","Lawson","Franklin","Lynch","Bishop","Carr","Salazar","Austin","Mendez","Gilbert","Jensen","Williamson","Montgomery","Harvey","Oliver","Howell","Dean","Hanson","Weber","Garrett","Sims","Burton","Fuller","Soto","Mccoy","Welch","Chen","Schultz","Walters","Reid","Fields","Walsh","Little","Fowler","Bowman","Davidson","May","Day","Schneider","Newman","Brewer","Lucas","Holland","Wong","Banks","Santos","Curtis","Pearson","Delgado","Valdez","Pena","Rios","Douglas","Sandoval","Barrett","Hopkins","Keller","Guerrero","Stanley","Bates","Alvarado","Beck","Ortega","Wade","Estrada","Contreras","Barnett","Caldwell","Santiago","Lambert","Powers","Chambers","Nunez","Craig","Leonard","Lowe","Rhodes","Byrd","Gregory","Shelton","Frazier","Becker","Maldonado","Fleming","Vega","Sutton","Cohen","Jennings","Parks","Mcdaniel","Watts","Barker","Norris","Vaughn","Vazquez","Holt","Schwartz","Steele","Benson","Neal","Dominguez","Horton","Terry","Wolfe","Hale","Lyons","Graves","Haynes","Miles","Park","Warner","Padilla","Bush","Thornton","Mccarthy","Mann","Zimmerman","Erickson","Fletcher","Mckinney","Page","Dawson","Joseph","Marquez","Reeves","Klein","Espinoza","Baldwin","Moran","Love","Robbins","Higgins","Ball","Cortez","Le","Griffith","Bowen","Sharp","Cummings","Ramsey","Hardy","Swanson","Barber","Acosta","Luna","Chandler","Blair","Daniel","Cross","Simon","Dennis","Oconnor","Quinn","Gross","Navarro","Moss","Fitzgerald","Doyle","Mclaughlin","Rojas","Rodgers","Stevenson","Singh","Yang","Figueroa","Harmon","Newton","Paul","Manning","Garner","Mcgee","Reese","Francis","Burgess","Adkins","Goodman","Curry","Brady","Christensen","Potter","Walton","Goodwin","Mullins","Molina","Webster","Fischer","Campos","Avila","Sherman","Todd","Chang","Blake","Malone","Wolf","Hodges","Juarez","Gill","Farmer","Hines","Gallagher","Duran","Hubbard","Cannon","Miranda","Wang","Saunders","Tate","Mack","Hammond","Carrillo","Townsend","Wise","Ingram","Barton","Mejia","Ayala","Schroeder","Hampton","Rowe","Parsons","Frank","Waters","Strickland","Osborne","Maxwell","Chan","Deleon","Norman","Harrington","Casey","Patton","Logan","Bowers","Mueller","Glover","Floyd","Hartman","Buchanan","Cobb","French","Kramer","Mccormick","Clarke","Tyler","Gibbs","Moody","Conner","Sparks","Mcguire","Leon","Bauer","Norton","Pope","Flynn","Hogan","Robles","Salinas","Yates","Lindsey","Lloyd","Marsh","Mcbride","Owen","Solis","Pham","Lang","Pratt","Lara","Brock","Ballard","Trujillo","Shaffer","Drake","Roman","Aguirre","Morton","Stokes","Lamb","Pacheco","Patrick","Cochran","Shepherd","Cain","Burnett","Hess","Li","Cervantes","Olsen","Briggs","Ochoa","Cabrera","Velasquez","Montoya","Roth","Meyers","Cardenas","Fuentes","Weiss","Hoover","Wilkins","Nicholson","Underwood","Short","Carson","Morrow","Colon","Holloway","Summers","Bryan","Petersen","Mckenzie","Serrano","Wilcox","Carey","Clayton","Poole","Calderon","Gallegos","Greer","Rivas","Guerra","Decker","Collier","Wall","Whitaker","Bass","Flowers","Davenport","Conley","Houston","Huff","Copeland","Hood","Monroe","Massey","Roberson","Combs","Franco","Larsen","Pittman","Randall","Skinner","Wilkinson","Kirby","Cameron","Bridges","Anthony","Richard","Kirk","Bruce","Singleton","Mathis","Bradford","Boone","Abbott","Charles","Allison","Sweeney","Atkinson","Horn","Jefferson","Rosales","York","Christian","Phelps","Farrell","Castaneda","Nash","Dickerson","Bond","Wyatt","Foley","Chase","Gates","Vincent","Mathews","Hodge","Garrison","Trevino","Villarreal","Heath","Dalton","Valencia","Callahan","Hensley","Atkins","Huffman","Roy","Boyer","Shields","Lin","Hancock","Grimes","Glenn","Cline","Delacruz","Camacho","Dillon","Parrish","Oneill","Melton","Booth","Kane","Berg","Harrell","Pitts","Savage","Wiggins","Brennan","Salas","Marks","Russo","Sawyer","Baxter","Golden","Hutchinson","Liu","Walter","Mcdowell","Wiley","Rich","Humphrey","Johns","Koch","Suarez","Hobbs","Beard","Gilmore","Ibarra","Keith","Macias","Khan","Andrade","Ware","Stephenson","Henson","Wilkerson","Dyer","Mcclure","Blackwell","Mercado","Tanner","Eaton","Clay","Barron","Beasley","Oneal","Preston","Small","Wu","Zamora","Macdonald","Vance","Snow","Mcclain","Stafford","Orozco","Barry","English","Shannon","Kline","Jacobson","Woodard","Huang","Kemp","Mosley","Prince","Merritt","Hurst","Villanueva","Roach","Nolan","Lam","Yoder","Mccullough","Lester","Santana","Valenzuela","Winters","Barrera","Leach","Orr","Berger","Mckee","Strong","Conway","Stein","Whitehead","Bullock","Escobar","Knox","Meadows","Solomon","Velez","Odonnell","Kerr","Stout","Blankenship","Browning","Kent","Lozano","Bartlett","Pruitt","Buck","Barr","Gaines","Durham","Gentry","Mcintyre","Sloan","Melendez","Rocha","Herman","Sexton","Moon","Hendricks","Rangel","Stark","Lowery","Hardin","Hull","Sellers","Ellison","Calhoun","Gillespie","Mora","Knapp","Mccall","Morse","Dorsey","Weeks","Nielsen","Livingston","Leblanc","Mclean","Bradshaw","Glass","Middleton","Buckley","Schaefer","Frost","Howe","House","Mcintosh","Ho","Pennington","Reilly","Hebert","Mcfarland","Hickman","Noble","Spears","Conrad","Arias","Galvan","Velazquez","Huynh","Frederick","Randolph","Cantu","Fitzpatrick","Mahoney","Peck","Villa","Michael","Donovan","Mcconnell","Walls","Boyle","Mayer","Zuniga","Giles","Pineda","Pace","Hurley","Mays","Mcmillan","Crosby","Ayers","Case","Bentley","Shepard","Everett","Pugh","David","Mcmahon","Dunlap","Bender","Hahn","Harding","Acevedo","Raymond","Blackburn","Duffy","Landry","Dougherty","Bautista","Shah","Potts","Arroyo","Valentine","Meza","Gould","Vaughan","Fry","Rush","Avery","Herring","Dodson","Clements","Sampson","Tapia","Bean","Lynn","Crane","Farley","Cisneros","Benton","Ashley","Mckay","Finley","Best","Blevins","Friedman","Moses","Sosa","Blanchard","Huber","Frye","Krueger","Bernard","Rosario","Rubio","Mullen","Benjamin","Haley","Chung","Moyer","Choi","Horne","Yu","Woodward","Ali","Nixon","Hayden","Rivers","Estes","Mccarty","Richmond","Stuart","Maynard","Brandt","Oconnell","Hanna","Sanford","Sheppard","Church","Burch","Levy","Rasmussen","Coffey","Ponce","Faulkner","Donaldson","Schmitt","Novak","Costa","Montes","Booker","Cordova","Waller","Arellano","Maddox","Mata","Bonilla","Stanton","Compton","Kaufman","Dudley","Mcpherson","Beltran","Dickson","Mccann","Villegas","Proctor","Hester","Cantrell","Daugherty","Cherry","Bray","Davila","Rowland","Levine","Madden","Spence","Good","Irwin","Werner","Krause","Petty","Whitney","Baird","Hooper","Pollard","Zavala","Jarvis","Holden","Haas","Hendrix","Mcgrath","Bird","Lucero","Terrell","Riggs","Joyce","Mercer","Rollins","Galloway","Duke","Odom","Andersen","Downs","Hatfield","Benitez","Archer","Huerta","Travis","Mcneil","Hinton","Zhang","Hays","Mayo","Fritz","Branch","Mooney","Ewing","Ritter","Esparza","Frey","Braun","Gay","Riddle","Haney","Kaiser","Holder","Chaney","Mcknight","Gamble","Vang","Cooley","Carney","Cowan","Forbes","Ferrell","Davies","Barajas","Shea","Osborn","Bright","Cuevas","Bolton","Murillo","Lutz","Duarte","Kidd","Key","Cooke"]}'),a=function(e){return Math.floor(Math.random()*e)},r=function(){if(!i)return"Unknown";if(!i.data)return"Unknown";var e=i.data;if(!Array.isArray(e))return"Unknown";var t=e.length;return e[a(t)]+" "+e[a(t)]}},629:function(e,t){"use strict";t.Z=function(e,t){var n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789*#%&!",i="",a=e;void 0!=t&&(a-=t.length,i+=t);for(var r=0;r<a;r++){var s=Math.floor(67*Math.random());i+=n.charAt(s)}return i}},630:function(e,t){"use strict";t.Z=function(e,t){if(0==t.length)return e;for(var n=e,i=0;i<t.length;i++)n=n.replace(/{}/,""+t[i]);return n}}},t={};function n(i){var a=t[i];if(void 0!==a)return a.exports;var r=t[i]={id:i,loaded:!1,exports:{}};return e[i].call(r.exports,r,r.exports,n),r.loaded=!0,r.exports}n.m=e,n.amdO={},function(){var e=[];n.O=function(t,i,a,r){if(!i){var s=1/0;for(l=0;l<e.length;l++){i=e[l][0],a=e[l][1],r=e[l][2];for(var o=!0,c=0;c<i.length;c++)(!1&r||s>=r)&&Object.keys(n.O).every((function(e){return n.O[e](i[c])}))?i.splice(c--,1):(o=!1,r<s&&(s=r));if(o){e.splice(l--,1);var u=a();void 0!==u&&(t=u)}}return t}r=r||0;for(var l=e.length;l>0&&e[l-1][2]>r;l--)e[l]=e[l-1];e[l]=[i,a,r]}}(),n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,{a:t}),t},n.d=function(e,t){for(var i in t)n.o(t,i)&&!n.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},n.f={},n.e=function(e){return Promise.all(Object.keys(n.f).reduce((function(t,i){return n.f[i](e,t),t}),[]))},n.u=function(e){return e+"."+{7:"355287a3385c1160c3b3",48:"ab577e4c3cc292b74297",109:"eaf7486e3af372b14479",123:"94ca4e62f5aad897adc2",131:"69093186bcf872230e58",302:"c1a822e62546ec7d1300",401:"ca0a9b248fd596f35fd1",498:"0e1e2aa167ebbf0dbed1",530:"334ab1647365f1e93f8a",557:"8ab157114b573c10af49",613:"708ba294d890443d0047",616:"76c6c9c50e4820b7e86a",638:"f96a297442830b4bc253",739:"2011aefd010a7f66eefb",803:"48ed69b62b0df2fb22cf",942:"648a6516bdabafab4beb",961:"1287d10af4f0b90fdc09"}[e]+".bundle.js"},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.hmd=function(e){return(e=Object.create(e)).children||(e.children=[]),Object.defineProperty(e,"exports",{enumerable:!0,set:function(){throw new Error("ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: "+e.id)}}),e},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},function(){var e={},t="game-core:";n.l=function(i,a,r,s){if(e[i])e[i].push(a);else{var o,c;if(void 0!==r)for(var u=document.getElementsByTagName("script"),l=0;l<u.length;l++){var h=u[l];if(h.getAttribute("src")==i||h.getAttribute("data-webpack")==t+r){o=h;break}}o||(c=!0,(o=document.createElement("script")).charset="utf-8",o.timeout=120,n.nc&&o.setAttribute("nonce",n.nc),o.setAttribute("data-webpack",t+r),o.src=i),e[i]=[a];var d=function(t,n){o.onerror=o.onload=null,clearTimeout(f);var a=e[i];if(delete e[i],o.parentNode&&o.parentNode.removeChild(o),a&&a.forEach((function(e){return e(n)})),t)return t(n)},f=setTimeout(d.bind(null,void 0,{type:"timeout",target:o}),12e4);o.onerror=d.bind(null,o.onerror),o.onload=d.bind(null,o.onload),c&&document.head.appendChild(o)}}}(),n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},function(){var e;n.g.importScripts&&(e=n.g.location+"");var t=n.g.document;if(!e&&t&&(t.currentScript&&(e=t.currentScript.src),!e)){var i=t.getElementsByTagName("script");i.length&&(e=i[i.length-1].src)}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),n.p=e}(),function(){var e={757:0};n.f.j=function(t,i){var a=n.o(e,t)?e[t]:void 0;if(0!==a)if(a)i.push(a[2]);else{var r=new Promise((function(n,i){a=e[t]=[n,i]}));i.push(a[2]=r);var s=n.p+n.u(t),o=new Error;n.l(s,(function(i){if(n.o(e,t)&&(0!==(a=e[t])&&(e[t]=void 0),a)){var r=i&&("load"===i.type?"missing":i.type),s=i&&i.target&&i.target.src;o.message="Loading chunk "+t+" failed.\n("+r+": "+s+")",o.name="ChunkLoadError",o.type=r,o.request=s,a[1](o)}}),"chunk-"+t,t)}},n.O.j=function(t){return 0===e[t]};var t=function(t,i){var a,r,s=i[0],o=i[1],c=i[2],u=0;if(s.some((function(t){return 0!==e[t]}))){for(a in o)n.o(o,a)&&(n.m[a]=o[a]);if(c)var l=c(n)}for(t&&t(i);u<s.length;u++)r=s[u],n.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return n.O(l)},i=self.webpackChunkgame_core=self.webpackChunkgame_core||[];i.forEach(t.bind(null,0)),i.push=t.bind(null,i.push.bind(i))}(),n.O(void 0,[216,630,542],(function(){return n(622)})),n.O(void 0,[216,630,542],(function(){return n(623)})),n.O(void 0,[216,630,542],(function(){return n(433)})),n.O(void 0,[216,630,542],(function(){return n(434)})),n.O(void 0,[216,630,542],(function(){return n(626)})),n.O(void 0,[216,630,542],(function(){return n(534)}));var i=n.O(void 0,[216,630,542],(function(){return n(557)}));i=n.O(i)})();