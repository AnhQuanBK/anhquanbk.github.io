(function(){var e={432:function(){HTMLCanvasElement.prototype.toBlob||Object.defineProperty(HTMLCanvasElement.prototype,"toBlob",{value:function(e,t,n){for(var i=atob(this.toDataURL(t,n).split(",")[1]),a=i.length,r=a>>2,s=new Uint8Array(a),o=new Uint32Array(s.buffer,0,r),c=0,l=0;c<r;c++)o[c]=i.charCodeAt(l++)|i.charCodeAt(l++)<<8|i.charCodeAt(l++)<<16|i.charCodeAt(l++)<<24;for(var u=3&a;u--;)s[l]=i.charCodeAt(l++);e(new Blob([s],{type:t||"image/png"}))}})},639:function(e,t,n){"use strict";n.d(t,{J:function(){return D},Z:function(){return N}});var i=n(627),a=n(56),r=n.n(a),s=n(2),o=n.n(s),c=n(23),l=n.n(c),u=n(1),h=n.n(u),d=n(641),f=n(197),p=n.n(f),g=function(e){return function(t){t.preventDefault();var n=document.getElementById("popup-add-shortcut");null==n||n.remove(),e()}},m=function(e){var t=document.createElement("div");return t.innerHTML=p()(e).call(e),t.firstChild},v=function(){var e=(0,i.Z)(h().mark((function e(t,n){var i,a,r;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=m('<div style="height: 50vh;width: 53vh;max-width: 95vw;position:absolute;background-color: rgba(31, 120, 136, 0.48);border-radius: 2vh;margin: auto;right: 0;left: 0;top: 0;bottom: 0;display: flex;flex-direction:column;justify-content:space-evenly;">\n            <p style="color:white;font-size:40px;text-align:center">Add shortcut for this game</p>\n            <p style="color:white;font-size:20px;text-align:center">This game wants to add a shortcut.</p>\n        </div>'),a=m('<button style="border: none;background-color: #1877f2;color: #fff;width: 90%;height: 50px;border-radius: 15px;margin-left: auto;margin-right: auto;font-size: 20px;cursor: pointer;">No</button>'),r=m('<button style="border: none;background-color: #1877f2;color: #fff;width: 90%;height: 50px;border-radius: 15px;margin-left: auto;margin-right: auto;font-size: 20px;cursor: pointer;">Yes</button>'),i&&a&&r||n({code:"CREATE_POPUP_ERROR",message:"Show popup failed"}),i.id="popup-add-shortcut",i.appendChild(a),i.appendChild(r),document.body.appendChild(i),a.addEventListener("click",g(n)),r.addEventListener("click",g(t));case 10:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),y=function(){function e(){this.isFirstCall=!0}var t=e.prototype;return t.canCreateShortcutAsync=function(){var e=(0,i.Z)(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isFirstCall){e.next=3;break}return this.isFirstCall=!1,e.abrupt("return",!0);case 3:return e.abrupt("return",!1);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),t.createShortcutAsync=function(){var e=(0,i.Z)(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new(o())((function(e,t){v(e,t)})));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),e}(),b=y,A=function(e){return function(t){t.preventDefault();var n=document.getElementById("popup-subscribe-bots");null==n||n.remove(),e()}},E=function(e){var t=document.createElement("div");return t.innerHTML=p()(e).call(e),t.firstChild},S=function(){var e=(0,i.Z)(h().mark((function e(t,n){var i,a,r;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=E('<div style="height: 50vh;width: 53vh;max-width: 95vw;position:absolute;background-color: rgba(31, 120, 136, 0.48);border-radius: 2vh;margin: auto;right: 0;left: 0;top: 0;bottom: 0;display: flex;flex-direction:column;justify-content:space-evenly;">\n            <p style="color:white;font-size:40px;text-align:center">Turn on messages from this game</p>\n            <p style="color:white;font-size:20px;text-align:center">This game wants to send messages, announcements and more.</p>\n        </div>'),a=E('<button style="border: none;background-color: #1877f2;color: #fff;width: 90%;height: 50px;border-radius: 15px;margin-left: auto;margin-right: auto;font-size: 20px;cursor: pointer;">Not Now</button>'),r=E('<button style="border: none;background-color: #1877f2;color: #fff;width: 90%;height: 50px;border-radius: 15px;margin-left: auto;margin-right: auto;font-size: 20px;cursor: pointer;">Turn On</button>'),i&&a&&r||n({code:"CREATE_POPUP_ERROR",message:"Show popup failed"}),i.id="popup-subscribe-bots",i.appendChild(a),i.appendChild(r),document.body.appendChild(i),a.addEventListener("click",A(n)),r.addEventListener("click",A(t));case 10:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),T=function(){function e(){this.isFirstCall=!0}var t=e.prototype;return t.canSubscribeBotAsync=function(){var e=(0,i.Z)(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isFirstCall){e.next=3;break}return this.isFirstCall=!1,e.abrupt("return",!0);case 3:return e.abrupt("return",!1);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),t.subscribeBotAsync=function(){var e=(0,i.Z)(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new(o())((function(e,t){S(e,t)})));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),e}(),w=T,C=n(644),I=n(640),x=n(642),P=n(646),k=GameCore.Configs,_=k.Notification,O=k.AddShortcut,R=k.SubscribeBot,L=_.GameTitle,D=(_.GameImage,function(){function e(){}var t=e.prototype;return t.createAsync=function(){var e=(0,i.Z)(h().mark((function e(t){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,GameSDK.tournament.createAsync(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t.shareAsync=function(){var e=(0,i.Z)(h().mark((function e(t){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,GameSDK.tournament.shareAsync(t);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t.joinAsync=function(){var e=(0,i.Z)(h().mark((function e(t){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,GameSDK.tournament.joinAsync(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t.postScoreAsync=function(){var e=(0,i.Z)(h().mark((function e(t){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,GameSDK.tournament.postScoreAsync(t);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t.getTournamentsAsync=function(){var e=(0,i.Z)(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,GameSDK.tournament.getTournamentsAsync();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),e}()),B=function(){function e(e){var t=this;this.facebook=void 0,this.supportedAPIs=[],this.mockSubscribeBot=void 0,this.mockAddShortcut=void 0,this.isCalledSubscribeBot=!1,this.isCalledCreateShortcut=!1,this.isCanPlayerMatch=null,this.isCanSubscribeBot=null,this.isCanCreateShortcut=null,this.attemptToAddShortcut=(0,i.Z)(h().mark((function e(){var n,i,a,r,s,o;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.isCalledCreateShortcut){e.next=2;break}return e.abrupt("return",!1);case 2:if(e.prev=2,null===t.isCanCreateShortcut&&(O.UseMock?t.isCanCreateShortcut=!0:t.isCanCreateShortcut=t.isSupportedAPI("canCreateShortcutAsync")),t.isCanCreateShortcut){e.next=6;break}return e.abrupt("return",!1);case 6:return e.next=8,GameSDK.player.getDataAsync(["lastCallCreateShortcut"]);case 8:if(e.t0=e.sent,e.t0){e.next=11;break}e.t0={};case 11:if(n=e.t0,!(i=n.lastCallCreateShortcut||0)||!(0,I.Gm)(+i)){e.next=15;break}return e.abrupt("return",!1);case 15:if(!O.UseMock){e.next=21;break}return e.next=18,t.mockAddShortcut.canCreateShortcutAsync();case 18:e.t1=e.sent,e.next=24;break;case 21:return e.next=23,GameSDK.canCreateShortcutAsync();case 23:e.t1=e.sent;case 24:if(a=e.t1,r=Date.now(),GameSDK.player.setDataAsync({lastCallCreateShortcut:r}),!a){e.next=49;break}return s=d._.SHORTCUT_CREATE,o=d._.SHORTCUT_CREATE_POPUP,t.isCalledCreateShortcut=!0,window.game.analytics.event(o),e.prev=31,e.next=34,GameCore.Utils.Valid.isValueChangeAsync(window.__fbGameReady,!0);case 34:if(!O.UseMock){e.next=39;break}return e.next=37,t.mockAddShortcut.createShortcutAsync();case 37:e.next=41;break;case 39:return e.next=41,FBInstant.createShortcutAsync();case 41:return window.game.analytics.event(s,{success:!0}),e.abrupt("return",!0);case 45:return e.prev=45,e.t2=e.catch(31),window.game.analytics.event(s,{success:!1}),e.abrupt("return",!1);case 49:return e.abrupt("return",!1);case 52:return e.prev=52,e.t3=e.catch(2),e.abrupt("return",!1);case 55:case"end":return e.stop()}}),e,null,[[2,52],[31,45]])}))),this.attemptToSubscribeBot=(0,i.Z)(h().mark((function e(){var n,i,a,r,s;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.isCalledSubscribeBot){e.next=2;break}return e.abrupt("return",!1);case 2:if(e.prev=2,null===t.isCanSubscribeBot&&(R.UseMock?t.isCanSubscribeBot=!0:t.isCanSubscribeBot=t.isSupportedAPI("player.canSubscribeBotAsync")),t.isCanSubscribeBot){e.next=6;break}return e.abrupt("return",!1);case 6:if(!R.UseMock){e.next=12;break}return e.next=9,t.mockSubscribeBot.canSubscribeBotAsync();case 9:e.t0=e.sent,e.next=15;break;case 12:return e.next=14,GameSDK.player.canSubscribeBotAsync();case 14:e.t0=e.sent;case 15:if(!e.t0){e.next=49;break}return e.next=19,GameSDK.player.getDataAsync(["lastCallSubscribeBot"]);case 19:if(e.t1=e.sent,e.t1){e.next=22;break}e.t1={};case 22:if(n=e.t1,!(i=n.lastCallSubscribeBot)||!(0,I.Gm)(+i)){e.next=26;break}return e.abrupt("return",!1);case 26:return a=Date.now(),GameSDK.player.setDataAsync({lastCallSubscribeBot:a}),r=d._.BOT_SUBSCRIBE,s=d._.BOT_SUBSCRIBE_POPUP,t.isCalledSubscribeBot=!0,window.game.analytics.event(s),e.prev=31,e.next=34,GameCore.Utils.Valid.isValueChangeAsync(window.__fbGameReady,!0);case 34:if(!R.UseMock){e.next=39;break}return e.next=37,t.mockSubscribeBot.subscribeBotAsync();case 37:e.next=41;break;case 39:return e.next=41,GameSDK.player.subscribeBotAsync();case 41:return window.game.analytics.event(r,{success:!0}),e.abrupt("return",!0);case 45:return e.prev=45,e.t2=e.catch(31),window.game.analytics.event(r,{success:!1}),e.abrupt("return",!1);case 49:return e.abrupt("return",!1);case 52:return e.prev=52,e.t3=e.catch(2),e.abrupt("return",!1);case 55:case"end":return e.stop()}}),e,null,[[2,52],[31,45]])}))),this.matchPlayerAsync=function(){var e=(0,i.Z)(h().mark((function e(n,i,a){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,null===t.isCanPlayerMatch&&(t.isCanPlayerMatch=t.isSupportedAPI("checkCanPlayerMatchAsync")),t.isCanPlayerMatch){e.next=4;break}return e.abrupt("return",!1);case 4:return e.next=6,GameSDK.checkCanPlayerMatchAsync();case 6:if(e.sent){e.next=9;break}return e.abrupt("return",!1);case 9:return e.next=11,GameSDK.matchPlayerAsync(n,i,a);case 11:return e.abrupt("return",!0);case 14:return e.prev=14,e.t0=e.catch(0),e.abrupt("return",!1);case 17:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(t,n,i){return e.apply(this,arguments)}}(),this.getTournamentAsync=(0,i.Z)(h().mark((function e(){var n,i,a;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.facebook.tournament.getTournamentsAsync();case 2:if(n=e.sent,i=GameSDK.context.getID(),!(a=r()(n).call(n,(function(e){return e.getContextID()===i})))){e.next=7;break}return e.abrupt("return",o().resolve(a));case 7:return e.abrupt("return",o().reject(new x.Z(null)));case 8:case"end":return e.stop()}}),e)}))),this.requestTournamentAsync=function(){var e=(0,i.Z)(h().mark((function e(n){var i;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.facebook.getTournamentAsync();case 3:return e.next=5,t.facebook.tournament.shareAsync({score:n});case 5:e.next=12;break;case 7:return e.prev=7,e.t0=e.catch(0),i=GameSDK.player.getName(),e.next=12,t.facebook.tournament.createAsync({initialScore:n,config:{tournamentTitle:i+"'s Tournament"}});case 12:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),this.isSupportedAPI=function(e){var n;return 0===t.supportedAPIs.length&&(t.supportedAPIs=GameSDK.getSupportedAPIs()),l()(n=t.supportedAPIs).call(n,e)},this.facebook=e,this.mockSubscribeBot=new w,this.mockAddShortcut=new b}var t=e.prototype;return t.switchAsync=function(){var e=(0,i.Z)(h().mark((function e(t){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,GameCore.Utils.Valid.isValueChangeAsync(window.__fbGameReady,!0);case 2:return e.next=4,GameSDK.context.switchAsync(t);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t.chooseAsync=function(){var e=(0,i.Z)(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,GameCore.Utils.Valid.isValueChangeAsync(window.__fbGameReady,!0);case 3:return e.next=5,GameSDK.context.chooseAsync({filters:["INCLUDE_EXISTING_CHALLENGES"],minSize:2,maxSize:2});case 5:case 15:return e.abrupt("return",GameSDK.context.getID());case 8:if(e.prev=8,e.t0=e.catch(0),!(e.t0 instanceof Object&&GameCore.Utils.Object.hasOwn(e.t0,"code"))){e.next=16;break}e.t1=e.t0.code,e.next="USER_INPUT"===e.t1?14:"SAME_CONTEXT"===e.t1?15:16;break;case 14:return e.abrupt("return",!1);case 16:return e.abrupt("return",null);case 17:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}(),t.createAsync=function(){var e=(0,i.Z)(h().mark((function e(t){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,GameCore.Utils.Valid.isValueChangeAsync(window.__fbGameReady,!0);case 3:return e.next=5,GameSDK.context.createAsync(""+t);case 5:case 15:return e.abrupt("return",GameSDK.context.getID());case 8:if(e.prev=8,e.t0=e.catch(0),!(e.t0 instanceof Object&&GameCore.Utils.Object.hasOwn(e.t0,"code"))){e.next=16;break}e.t1=e.t0.code,e.next="USER_INPUT"===e.t1?14:"SAME_CONTEXT"===e.t1?15:16;break;case 14:return e.abrupt("return",!1);case 16:return e.abrupt("return",null);case 17:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),t.getPlayerToken=function(){var e=(0,i.Z)(h().mark((function e(){var t;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,GameSDK.player.getSignedPlayerInfoAsync();case 2:return t=e.sent,e.abrupt("return",t.getSignature());case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),t.getContextPlayers=function(){var e=(0,i.Z)(h().mark((function e(t){var n,i;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,GameSDK.context.getPlayersAsync();case 3:return n=e.sent,i=[],n.forEach((function(e){var n=e.getID();if(n!==t){var a=e.getName();if(a){var r=e.getPhoto();i.push(new C.Z(n,a,r).toObject())}}})),e.abrupt("return",GameCore.Utils.Array.unique(i));case 9:return e.prev=9,e.t0=e.catch(0),console.warn("getPlayersAsync",{error:e.t0}),e.abrupt("return",[]);case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}(),t.shareAsync=function(){var e=(0,i.Z)(h().mark((function e(t){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,GameSDK.shareAsync(t);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t.sendMessage=function(){var e=(0,i.Z)(h().mark((function e(t){var n,i,a,r,s,o;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.data,i=t.image,a=t.template,r=t.cta,s=t.text,o={data:n,image:i,action:"CUSTOM",template:a,cta:r,text:s,strategy:"IMMEDIATE",notification:"PUSH"},e.next=4,GameSDK.updateAsync(o);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t.inviteAsync=function(){var e=(0,i.Z)(h().mark((function e(t){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,GameSDK.inviteAsync(t);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t.postSessionScoreAsync=function(){var e=(0,i.Z)(h().mark((function e(t){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,GameSDK.postSessionScoreAsync(t);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t.getRewardedVideoAsync=function(){var e=(0,i.Z)(h().mark((function e(t){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,GameSDK.getRewardedVideoAsync(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t.getInterstitialAdAsync=function(){var e=(0,i.Z)(h().mark((function e(t){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,GameSDK.getInterstitialAdAsync(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t.getContextID=function(){return GameSDK.context.getID()},t.setLoadingProgress=function(e){GameSDK.setLoadingProgress(e)},t.getLocale=function(){return GameSDK.getLocale()||"en"},t.injectTournament=function(){var e=(0,i.Z)(h().mark((function e(){var t,i;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!GameCore.Configs.Tournament.UseMock){e.next=11;break}return e.next=4,n.e(302).then(n.bind(n,617));case 4:t=e.sent.default,i=new t,this.facebook.tournament=i,GameSDK.getTournamentAsync=this.getTournamentAsync,GameSDK.tournament=i,e.next=12;break;case 11:this.facebook.tournament=new D;case 12:this.facebook.getTournamentAsync=function(){return FBInstant.getTournamentAsync()},this.facebook.requestTournamentAsync=this.requestTournamentAsync;case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),t.sendNotificationAsync=function(){var e=(0,i.Z)(h().mark((function e(t){var n,i,a;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,console.log("\ud83e\udd16 ? sendNotificationAsync",t),n=t.message,i=t.delayTime,a=t.type,e.next=5,FBInstant.scheduleNotificationAsync({title:L,minDelayInSeconds:i,description:n,type:null!=a?a:P.Z.GENERIC_NOTIFICATION});case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.error("\ud83e\udd16 ? sendNotificationAsync",e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),e}(),N=B},433:function(e,t,n){"use strict";var i=n(29),a=n.n(i),r=n(13),s=n.n(r),o=function(e,t){return void 0===t&&(t=1),a()({length:Math.ceil(e.length/t)},(function(n,i){return s()(e).call(e,i*t,i*t+t)}))},c=n(20),l=n.n(c),u=n(23),h=n.n(u),d=function(e,t){return l()(e).call(e,(function(e){return!h()(t).call(t,e)}))},f=function(e){for(var t=e.length-1;t>0;t--){var n=Math.floor(Math.random()*(t+1)),i=[e[n],e[t]];e[t]=i[0],e[n]=i[1]}},p=n(19),g=n.n(p),m=function(e,t,n){return g()(n).call(n,e)===t&&null!==e&&void 0!==e},v=function(e){return l()(e).call(e,m)},y={chunk:o,difference:d,shuffle:f,unique:v},b=n(35),A=n.n(b),E=n(255),S=n.n(E),T=S()((function(e,t){if("string"===typeof e){var n=t[e.toLowerCase()];if("string"===typeof n)return n}return"?"})),w=S()((function(e){for(var t=null,n=[],i=/:([A-Z0-9?]+)/gm;null!==(t=i.exec(e));)n.push(t[1]);return n})),C=S()((function(e){for(var t=null,n=[],i=/([0-9]+[A-Z?]{1}|[A-Z?]{1})/gm;null!==(t=i.exec(e));){var a=t[0];if(a.length>=2){var r,o=a.length,c=s()(a).call(a,0,o-1),l=a[o-1],u=A()(r=new Array(+c)).call(r,l);n.push.apply(n,u)}else n.push(a)}return n})),I=function(e,t){var n=e,i=GameCore.Utils.Object.invert(t),a={},r=0,s=0;return w(n).forEach((function(e){r=0,s++,a[s]||(a[s]={}),C(e).forEach((function(e){r++,a[s][r]=T(e,i)}))})),a},x=S()((function(e,t){var n=t[e];return"string"===typeof n?""+n.toUpperCase():"?"})),P=function e(t,n,i){void 0===i&&(i=!1);var a="";if(!GameCore.Utils.Valid.isObject(t))return a;var r="",o=1;for(var c in t)if(GameCore.Utils.Object.hasOwn(t,c)){var l=t[c];if(GameCore.Utils.Valid.isObject(l))a+=":"+e(l,n,!0);else if(GameCore.Utils.Valid.isString(l)){var u=x(l,n);u===r?(o++,a=s()(a).call(a,0,-2)):o=1,a+=""+o+u,r=u}}return a=a.replace(/1([A-Z])/g,"$1")},k=function(e){try{return atob(e)}catch(t){return""}},_={decodeMap:I,encodeMap:P,hashToString:k,stringToHash:function(e){try{return btoa(e)}catch(t){return""}}},O=function(e){try{return JSON.parse(e)}catch(t){return null}},R=n(31),L=n.n(R),D=function(e){try{return L()(e,null,0)}catch(t){return""}},B=function(e){return O(D(e))},N={clone:B,decode:O,encode:D},M=function(e){var t="object"===typeof e||"function"===typeof e,n=Array.isArray(e);return null!==e&&t&&!n},G=function(e){return void 0===e||null===e},F=function e(t){if(!M(t))return t;for(var n in t){G(t[n])&&delete t[n];var i=t[n];M(i)&&(t[n]=e(i))}return t},Z=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},U=n(28),H=n.n(U),W=function(e){var t={};return H()(e).forEach((function(n){if(Z(e,n)){var i=e[n];"string"===typeof i&&(t[i]=n)}})),t},z=function(e,t){if(!Array.isArray(e))return{};var n={};return e.forEach((function(e){if(Z(e,t)){var i=e[t];"string"===typeof i&&(n[i]=e)}})),n},Y={clear:F,hasOwn:Z,invert:W,keyBy:z},V=function(e){return e?e[0].toUpperCase()+s()(e).call(e,1):e},K=function(e){var t=0;if(0==e.length)return t;for(var n=0;n<e.length;n++){t=(t<<5)-t+e.charCodeAt(n),t&=t}return t},j=n(84),X=n.n(j),q=function(e){var t;return X()(t=H()(e)).call(t,(function(t,n){var i=e[n];return void 0!==i&&t.push(n+"="+i),t}),[]).join("&")},J=function(e){void 0===e&&(e="0x");for(var t=e,n=0;n<6;n++)t+="0123456789ABCDEF"[Math.floor(16*Math.random())];return t},Q=n(625),$=function(e){return e.normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/[\u0111\u0110]/g,(function(e){return"\u0111"===e?"d":"D"}))},ee=n(3),te=n.n(ee),ne=n(456),ie=n.n(ne),ae=function(e,t){var n,i=e.split(" "),a=(i.length<=1?te()(n=[]).call(n,i):[i[0],i.pop()]).join(" "),r=ie()(a).call(a," ")||0,s=r>=0?r:t;return(a.length>t?a.substring(0,s):a).substring(0,t)},re=n(157),se=n.n(re),oe=function(e){void 0===e&&(e=16);var t=function(t){return Math.floor(t).toString(e)};return t(Date.now()/1e3)+se()(" ").call(" ",e).replace(/./g,(function(){return t(Math.random()*e)}))},ce=n(626),le={capitalize:V,hashCode:K,params:q,toCamelCase:function(e){var t=e.replace(/[-_\s.]+(.)?/g,(function(e,t){return t?t.toUpperCase():""}));return t.substr(0,1).toLowerCase()+t.substr(1)},toUpperCamelCase:function(e){var t=e.replace(/[-_\s.]+(.)?/g,(function(e,t){return t?t.toUpperCase():""}));return t.substr(0,1).toUpperCase()+t.substr(1)},randomColor:J,random:Q.Z,removeDiacritics:$,getShortName:ae,generateObjectId:oe,replaceVariables:ce.Z},ue=function(e){return"boolean"===typeof e},he=function(){return!0},de=function(e){return"function"===typeof e},fe=function(e){return"number"===typeof e},pe=function(e){var t;return g()(t=["string","number","symbol"]).call(t,typeof e)>-1},ge=function(e){return"string"===typeof e},me=n(2),ve=n.n(me),ye=function(e,t,n){var i=n||{},a=i.timeout,r=void 0===a?1e3:a,s=i.checkInterval,o=void 0===s?100:s;return new(ve())((function(n){var i=setInterval((function(){("function"===typeof e?e():e)===("function"===typeof t?t():t)&&(clearInterval(i),n(!0))}),o);r>0&&setTimeout((function(){clearInterval(i),n(!1)}),r)}))},be={isBoolean:ue,isDebugger:he,isFunction:de,isNumber:fe,isObject:M,isPropertyKey:pe,isString:ge,isValueChangeAsync:ye},Ae=function(e){var t=e.scene,n=e.key,i=e.newKey,a=t.textures.get(n).getSourceImage();if(!a)return!1;var r=Math.min(a.width,a.height);i||t.textures.removeKey(n);var s=t.textures.createCanvas(i||n,r,r),o=s.context;return o.beginPath(),o.arc(r/2,r/2,r/2,0,2*Math.PI,!1),o.clip(),s.draw((a.width-r)/2,(a.height-r)/2,a),!0},Ee=function(e){var t=e.scene,n=e.key,i=e.newKey,a=e.radius,r=e.width,s=e.height,o=t.textures.get(n).getSourceImage();if(!o)return!1;r||(r=o.width),s||(s=o.height),i||t.textures.removeKey(n);var c=t.textures.createCanvas(i||n,r,s),l=c.context,u=Math.min(r,s)/100*a/2;return l.beginPath(),l.moveTo(0+u,0),l.lineTo(0+r-u,0),l.quadraticCurveTo(0+r,0,0+r,0+u),l.lineTo(0+r,0+s-u),l.quadraticCurveTo(0+r,0+s,0+r-u,0+s),l.lineTo(0+u,0+s),l.quadraticCurveTo(0,0+s,0,0+s-u),l.lineTo(0,0+u),l.quadraticCurveTo(0,0,0+u,0),l.closePath(),l.clip(),c.draw(0,0,o),!0},Se=function(){return GameCore.Utils.Device.isDesktop()||GameCore.Utils.Device.pixelRatio()>1?2:1},Te=function(e,t){var n=e.split(","),i=n[0].match(/:(.*?);/);if(!i)return null;for(var a=i[1],r=atob(n[n.length-1]),s=r.length,o=new Uint8Array(s);s--;)o[s]=r.charCodeAt(s);return new File([o],t,{type:a})},we=n(168),Ce=n.n(we),Ie=new Image,xe=function(e,t){return void 0===t&&(t=!0),new(ve())((function(n){t&&(Ie=new Image),Ie.onload=function(){n(Ie)},Ie.onerror=function(){n(null)},Ie.src=Ce().createObjectURL(e)}))},Pe=n(627),ke=n(1),_e=n.n(ke),Oe=function(){var e=(0,Pe.Z)(_e().mark((function e(t,n){var i;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t).then((function(e){return e.blob()})).catch((function(){return null}));case 2:if(i=e.sent){e.next=5;break}return e.abrupt("return",null);case 5:return e.abrupt("return",new File([i],n));case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),Re=function(e){if(g()(e).call(e,".")<0)return e;for(var t=e.length-1;t>=0;t--){if("."==e[t])return e.substring(0,t);if("0"!=e[t])return e.substring(0,t+1)}return e},Le=function(e,t){var n=t||{},i=n.fractionalDigits,a=void 0===i?0:i,r=n.startAbbreviate,s=void 0===r?1e3:r,o=n.abbreviateStep,c=void 0===o?3:o,l=n.maxLength,u=void 0===l?-1:l,h=n.removeLastZero,d=void 0===h||h,f=n.suffixes,p=void 0===f?["","k","m","b","t","q"]:f,g=-1===u?99999999:u;if(e>=s){var m=Math.floor(e/Math.pow(10,c)),v=Math.floor((m.toString().length-1)/c)+1,y=(e/Math.pow(Math.pow(10,c),v)).toFixed(a),b=g-p[v].length,A=y.substring(0,b);return(d?Re(A):A)+p[v]}var E=e.toFixed(a),S=g-p[0].length,T=E.substring(0,S);return d?Re(T):T+p[0]},De={Array:y,Hash:_,Json:N,Object:Y,String:le,Valid:be,Image:{drawCircle:Ae,drawBorder:Ee,getImageScale:Se,base64ToFile:Te,blobToHtmlImage:xe,blobUrlToFile:Oe},Number:{toAbbreviatedString:Le,padStart:function(e,t,n){void 0===n&&(n="0");for(var i=e.toString(),a=i.length,r=0;r<t-a;r++)i=n+i;return i},padEnd:function(e,t,n){void 0===n&&(n="0");for(var i=e.toString(),a=i.length,r=0;r<t-a;r++)i+=n;return i},random:function(e,t){var n=t?Math.random()>.5?1:-1:1;return Math.floor(Math.random()*e)*n}},Device:{isDesktop:function(){return!/Android|iPhone|iPad|iPod/i.test(navigator.userAgent)},isMobile:function(){return/Android|iPhone|iPad|iPod/i.test(navigator.userAgent)},isAndroid:function(){return window.__fbPlatform?"ANDROID"===window.__fbPlatform:/Android/i.test(navigator.userAgent)},isIOS:function(){return window.__fbPlatform?"IOS"===window.__fbPlatform:/iPhone|iPad|iPod/i.test(navigator.userAgent)},isMobileWeb:function(){return window.__fbPlatform?"MOBILE_WEB"===window.__fbPlatform:/mobile/i.test(navigator.userAgent)},pixelRatio:function(){return Math.round(window.devicePixelRatio)||1}},Time:{isToday:function(e){var t=new Date(e),n=new Date;return t.getDate()===n.getDate()&&t.getMonth()===n.getMonth()&&t.getFullYear()===n.getFullYear()},sleepAsync:function(e){return new(ve())((function(t){return setTimeout(t,e)}))}}},Be=n(624),Ne=n(623),Me={ENV:"development",Ads:{Enabled:!0,Mockup:{Enable:!1,ErrorRate:5,GiphyApiKey:"VmjHIRsfrwCAssDS4mDo9DoImxJm1lLM"},RewardAdOptions:{pID:"123"},InterstitialAdOptions:{pID:"456"}},Analytics:{GoogleAnalytics:null,FacebookAnalytics:null},Statistics:{ShowFPSInGame:!0},Tournament:{UseMock:!0,UseLeaderboard:!0}},Ge={ENV:"development",Ads:{Enabled:!0,Mockup:{Enable:!1,ErrorRate:5,GiphyApiKey:"VmjHIRsfrwCAssDS4mDo9DoImxJm1lLM"},RewardAdOptions:{pID:"123"},InterstitialAdOptions:{pID:"456"}},Analytics:{GoogleAnalytics:null,FacebookAnalytics:null},Statistics:{ShowFPSInGame:!0},Tournament:{UseMock:!0,UseLeaderboard:!0}},Fe={ENV:"development",AppId:"",ApiHost:"https://fbig-singleplay-apps-dev.sunstudio.io",OtherHost:"https://leaderboards-dev.sunstudio.io",SyncProfileFromAPI:!0,Notification:{Enable:!0,DisableSendNotification:!1,ApiUrl:"https://notifications.sunstudio.io",GameTitle:"FreeCell - Classic Solitaire",GameImage:"https://sunstudio.io/images/logo.png",DailyNotificationMessages:{MONDAY:"Welcome back to FreeCell - Classic Solitaire! Start your week with a surprise and claim your daily reward now! \ud83c\udf1f",TUESDAY:"Ready for your next FreeCell challenge? Jump in and sharpen your Solitaire skills today! \ud83d\ude80",WEDNESDAY:"A mystery gift is waiting in the game! Log in to claim your exclusive FreeCell reward. \ud83c\udf81",THURSDAY:"Can you conquer today\u2019s FreeCell challenge? Show off your strategy and earn unique rewards! \ud83c\udfaf",FRIDAY:"Feeling lucky? Your daily spin is ready! Log in for a chance to win big in FreeCell - Classic Solitaire! \ud83c\udfa1",SATURDAY:"A special event is happening today! Join the FreeCell fun and unlock exclusive content. \u2728",SUNDAY:"We\u2019d love to hear your thoughts! Log in, share your feedback, and claim a reward for helping improve FreeCell - Classic Solitaire! \ud83c\udf08"}},AddShortcut:{UseMock:!1},SubscribeBot:{UseMock:!1},PlayerMock:{id:"",signature:""},OpponentMock:{id:"",signature:""},MatchMockFailRate:5,Gameplay:{StartLevel:1,StartScore:0,StartDiamonds:0,DefaultDiamondsForNewUser:300,LevelDifficultRate:{FromUnder30:1.07,FromUnder35:1.05,FromUnder45:1.05,FromUnder200:1.1},StartAdAtLevel:2,GiftTime:10800,AwardDiamonds:100,FreeItems:!1,DelayStart:2e3,DelayLevelUp:1800,DelayFinishGame:2900,EnableVibrate:!0,SkipStartAnimation:!1,SkipAnimationMove:!1,EditMode:!1},Tutorial:{ForceUseTutorial:!1,NumberOfTutorial:{FirstMove:3,TargetScore:1,CurrentScore:1,ColorfulGem:1,ItemPaint:1,ItemHammer:1,ItemShuffle:1}},PlayerDataStore:"playerData",Game:{AutoResize:!0,PortraitRatio:375/580,PortraitWidth:375,PortraitHeight:667,LandscapeRatio:600/700,LandscapeWidth:600,LandscapeHeight:700,ForcePixelRatio:0,DisableLandscape:!1,FullSizeOnLandscape:!1},Debugger:{ShowInspector:!1,ShowMonitoring:!1,ShowConsole:!1,Expanded:!0,AutoRefresh:!0,InspectorAutoUpdate:!0,ShowBoxBitmapText:!1,Opacity:.8,ListPlayerDevIds:[]},Statistics:{Enable:!1,DisplayMode:0,FPS:!0,MS:!0,MB:!0,Opacity:.8,ShowFPSInGame:!0,ShowMemoryInGame:!1},ParticleEditor:{Enable:!1,Opacity:.8,Expanded:!0},ProfilerPlugin:{Enable:!1},CanvasRecorder:{Enable:!1,Options:{Type:"png",Quality:.85,RecordFps:60,SyncFps:!0}},Match:{MaxRescueCount:1,RescueGamePopupTimeout:15,ContinueSingleMatchEnabled:!0,SingleMatchStore:"singleMatch",LocalSingleMatchDefault:{_id:"12345678890",status:"open",playerId:"",score:0,level:1,startedAt:0,updateAt:0,finishAt:0,data:{}}},DailyRewards:{MaxDays:6,MockTime:0,CheckInterrupt:!0},DailyTasks:{Duration:86400},Tournament:{UseMock:!1,ForcePlay:!1,UseLeaderboard:!1,TournamentContextIds:[],YourMockTournamentCount:1},LeadersBoard:{Name:null,UseMock:!1,Prefix:"leaderboards",LeaderboardId:"5fbb6bee3f2485dac9b1dfa3",Limit:50,MockOptions:{PlayerEntryIndex:-1}},LanguageSupport:{en:"en"},EnableEffectSceneTransition:!0,DefaultTheme:"default",ThemeSupport:{default:"default"},Ads:{Enabled:!0,AdService:"msgames",FallbackService:"google",AdServiceConfigs:{Google:{DataAdClient:"ca-pub-2993382360222769",DataAdFrequencyHint:30,DataAdBreakTest:!1,DataAdChannel:"4832215427",MaxScriptLoadRetryCount:3}},CalculateSafeAreaBottom:!0,EnableRewardVideoResetInterstitial:!1,Mockup:{Enable:!1,ErrorRate:5,GiphyApiKey:""},InterstitialAdOptions:{pID:"",showWhenStartGame:!1,secondsFirstTime:30,secondsBetweenAds:30},RewardAdOptions:{pID:"",secondsFirstTime:0,secondsBetweenAds:0},BannerAdOptions:[{placementId:"123",position:"bottom",bannerWidth:320,bannerHeight:50,platform:"MOBILE",secondsReload:60},{placementId:"456",position:"right",bannerWidth:160,bannerHeight:600,platform:"DESKTOP",secondsReload:60}]},Network:{MaximumRequest:6,Timeout:15e3,Retries:3},Analytics:{GoogleAnalytics:{consoleLog:!1},FacebookAnalytics:{prefix:"fba",consoleLog:!1}},Sentry:{errorCodes:{accepted:[],ignored:["USER_INPUT","NETWORK_FAILURE"]},errorMessages:{accepted:[],ignored:["Load image failed","Script error."]}},Rollbar:{Enable:!1,UseMockup:!1,FilterError:{Codes:{accepted:[],ignored:["USER_INPUT","NETWORK_FAILURE"]},Messages:{accepted:[],ignored:["Load image failed","Request failed to be processed","Script error."]}}},Performance:{Enable:!1,trackingSceneKeys:["DASHBOARD_SCENE","GAME_SCENE"],minQuality:1,maxQuality:2,fpsThreshold:48,checkInterval:2e3,qualityAdjustStep:.1,autoUpgradeQuality:!0,onlyUpdateWhenSwitchScene:!0}};Fe=(0,Ne.TS)((0,Be.Z)({},Fe),Ge);var Ze=Fe=(0,Ne.TS)((0,Be.Z)({},Fe),Me),Ue=function(e){return function(t){try{var n=window.game,i=t.module;if(n.scene.getScenes(!0)[0].scene.key!==e)return;var a=i.default;n.scene.remove(e),n.scene.add(e,a,!0),n.scene.bringToTop(n.globalScene),console.log("%c HotScene: ","font-size:12px;background-color: #465975;color:#fff;",e)}catch(s){var r;null==(r=void 0)||r.invalidate()}}},He=n(525),We=n.n(He),ze=n(527),Ye=n.n(ze),Ve=n(529),Ke=n.n(Ve),je=n(628),Xe=!1,qe=function e(t,n,i){n.forEach((function(n){if(n.name){var a=null;if(a=i?i.getByName(n.name):t.children.getByName(n.name),Xe&&console.log("%c Checking object: ","font-size:12px;background-color: #465975;color:#fff;",n.name,n.type),a){if("Container"===n.type){var r=a,s=n.getAll();if(e(t,s,r),!r.hotContainer)return;console.log("%c Update container: ","font-size:12px;background-color: #33A5FF;color:#fff;",r.name)}var o=We()(n),c=["_events","_sysEvents","input","localTransform","list","displayList"],u=l()(o).call(o,(function(e){if("string"!==typeof e)return!1;if(g()(c).call(c,e)>=0)return!1;if(!a)return!1;var t=Ye()(n,e);return!(t instanceof Function)&&(!(t instanceof Phaser.Scene)&&(!(t instanceof Phaser.GameObjects.Group)&&(!(t instanceof Phaser.GameObjects.GameObject)&&t===Ye()(a,e))))}));u.length<1||(Xe&&console.log("%c HotObject: ","font-size:12px;background-color: #2EAFB0;color:#fff;",n.name,u),u.forEach((function(e){if(a){var t=Ye()(n,e),i=Ye()(a,e),r=Ke()(a,e,t);Xe&&console.log("%c Update property: ","font-size:12px;background-color: #B03734;color:#fff;",r,e,{oldValue:i,newValue:t})}})))}}}))},Je={Configs:Ze,Utils:De,LiveUpdate:{Scene:Ue,SceneObjects:function(e,t){return void 0===t&&(t=Xe),function(n){try{var i=window.game,a=n.module,r=i.scene.getScenes(!0)[0];if(r.scene.key!==e)return;Xe=t;var s=a.default,o=e+"-draft";i.scene.remove(o);var c=i.scene.add(o,s);console.log("%c HotSceneObjects: ","font-size:12px;background-color: #465975;color:#fff;",e),r=i.scene.getScene(e),c.events.once(Phaser.Scenes.Events.RENDER,(0,je.D)((function(){var e=c.children.getAll();qe(r,e),i.scene.remove(o)})),50),i.scene.run(o),i.scene.bringToTop(r),i.scene.bringToTop(i.globalScene)}catch(l){console.warn(l)}}}}};window.GameCore=Je},605:function(e,t,n){"use strict";n.r(t);var i=n(627),a=n(632),r=n(23),s=n.n(r),o=n(103),c=n.n(o),l=n(1),u=n.n(l),h=n(641),d=n(664),f=GameCore.Utils.Object,p=GameCore.Ads,g=p.Types,m=p.Status,v="msgames",y=function(e){function t(t,n){var i;return(i=e.call(this,t)||this).instance=void 0,i.placementId=void 0,i.instanceLoadFailedQueue=void 0,i.isHasTooManyInstancesError=void 0,i.instance=null,i.placementId=n,i.instanceLoadFailedQueue=[],i.isHasTooManyInstancesError=!1,i}(0,a.Z)(t,e),t.setGame=function(e){self.game=e};var n=t.prototype;return n.loadAsync=function(){var e=(0,i.Z)(u().mark((function e(){var t,n,i;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.status===m.IDLE){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,this.status=m.LOADING,e.next=6,this.createInstanceByType(this.type);case 6:if(this.instance=e.sent,null!==this.instance){e.next=9;break}throw new GameCore.Ads.AdError("AD_INSTANCE_NOT_INITIATED","Ad instance didn't initiated.");case 9:return e.next=11,this.instance.loadAsync();case 11:this.status=m.FILLED,t=this.getSceneName(),this.type===g.PRE_ROLL&&self.game.analytics.loadPreRollAd(t,v),this.type===g.INTERSTITIAL&&self.game.analytics.loadInterstitialAd(t,v),this.type===g.REWARDED&&self.game.analytics.loadRewardedVideoAd(t,v),e.next=25;break;case 18:throw e.prev=18,e.t0=e.catch(2),this.status=m.IDLE,this.instance&&this.instanceLoadFailedQueue.push(this.instance),this.instance=null,this.isAdTypeValid(this.type)&&(n=this.getSceneName(),i={type:this.type,placement:n,adService:v},self.game.analytics.loadAdFail(i)),e.t0;case 25:case"end":return e.stop()}}),e,this,[[2,18]])})));return function(){return e.apply(this,arguments)}}(),n.showAsync=function(){var e=(0,i.Z)(u().mark((function e(){var t,n,i,a;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=!1,null,e.prev=2,this.status===m.FILLED){e.next=5;break}throw new GameCore.Ads.AdError("AD_NOT_FILLED","Ads no fill.");case 5:if(this.status=m.SHOWING,null!==this.instance){e.next=8;break}throw new GameCore.Ads.AdError("AD_INSTANCE_NOT_INITIATED","Ad instance didn't initiated.");case 8:return this.isHasTooManyInstancesError&&self.game.analytics.event(h._.MISSING_AD_SHOW,{ad_type:this.type}),e.next=11,this.instance.showAsync();case 11:t=!0,this.status=m.IDLE,this.instance=null,e.next=21;break;case 16:throw e.prev=16,e.t0=e.catch(2),e.t0 instanceof Object&&f.hasOwn(e.t0,"code")?("ADS_NOT_LOADED"===e.t0.code?this.status=m.FILLED:(this.status=m.IDLE,this.instance=null),"USER_INPUT"===e.t0.code&&(this.status=m.IDLE,this.instance=null,t=!0)):(this.status=m.IDLE,this.instance=null),e.t0,e.t0;case 21:return e.prev=21,window.focus(),n=this.getSceneName(),t?(this.type===g.PRE_ROLL&&self.game.analytics.showPreRollAd(n,v),this.type===g.INTERSTITIAL&&self.game.analytics.showInterstitialAd(n,v),this.type===g.REWARDED&&self.game.analytics.showRewardedVideoAd(n,v)):this.isAdTypeValid(this.type)&&(i=this.getSceneName(),a={type:this.type,placement:i,adService:v},self.game.analytics.showAdFail(a)),e.finish(21);case 26:case"end":return e.stop()}}),e,this,[[2,16,21,26]])})));return function(){return e.apply(this,arguments)}}(),n.getStatus=function(){return this.status},n.createInstanceByType=function(){var e=(0,i.Z)(u().mark((function e(t){var n;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=self.game.facebook,e.prev=1,e.t0=t,e.next=e.t0===g.REWARDED?5:e.t0===g.INTERSTITIAL||e.t0===g.PRE_ROLL?8:11;break;case 5:return e.next=7,n.getRewardedVideoAsync(this.placementId);case 7:case 10:return e.abrupt("return",e.sent);case 8:return e.next=10,n.getInterstitialAdAsync(this.placementId);case 11:case 20:return e.abrupt("return",null);case 12:e.next=21;break;case 14:if(e.prev=14,e.t1=e.catch(1),!(e.t1 instanceof Object&&f.hasOwn(e.t1,"code"))){e.next=20;break}if("ADS_TOO_MANY_INSTANCES"!==e.t1.code){e.next=20;break}return this.isHasTooManyInstancesError=!0,e.abrupt("return",this.instanceLoadFailedQueue.shift()||null);case 21:case"end":return e.stop()}}),e,this,[[1,14]])})));return function(t){return e.apply(this,arguments)}}(),n.getSceneName=function(){try{var e=self.game.globalScene;return e instanceof d.Z?e.getCurrentScene().scene.getSceneName():"unknown"}catch(t){return"unknown"}},n.isAdTypeValid=function(e){var t;return s()(t=c()(g)).call(t,e)},t}(GameCore.Ads.AdInstance);t.default=y},606:function(e,t,n){"use strict";n.r(t);var i,a=n(627),r=n(638),s=n(637),o=n(632),c=n(2),l=n.n(c),u=n(23),h=n.n(u),d=n(103),f=n.n(d),p=n(1),g=n.n(p),m=n(641),v=n(664),y=GameCore,b=y.Utils.Object,A=y.Ads,E=A.Types,S=A.Status,T="not-loaded",w="loading",C="loaded",I="google",x=function(e){function t(n,i){var a;return(a=e.call(this,n)||this).instance=void 0,a.instance=null,a.status=S.IDLE,window.setInterstitialPlacementType=t.setInterstitialPlacementType,window.setRewardedPlacementType=t.setRewardedPlacementType,window.setPreRollPlacementType=t.setPreRollPlacementType,t.childAdInstances.push((0,s.Z)(a)),t.isPreloadConfigReady&&(a.status=S.FILLED),a}(0,o.Z)(t,e),t.initGoogleAdsAsync=function(){var e=(0,a.Z)(g().mark((function e(n){return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("loaded"!==t.initStatus){e.next=3;break}return console.warn("Google Ads already initiated."),e.abrupt("return");case 3:t.initStatus=w,t.adsByGoogleConfig=n,t.loadScriptElementAsync(n);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t.configGoogleAdsOnInit=function(){var e=(0,a.Z)(g().mark((function e(){return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:window.adsbygoogle=window.adsbygoogle||[],window.adBreak=function(e){adsbygoogle.push(e)},window.adConfig=function(e){adsbygoogle.push(e)},t.initStatus=C,t.runPreloadAdConfig();case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),t.runPreloadAdConfig=function(){var e=(0,a.Z)(g().mark((function e(){return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preloadPromise=new(l())((function(e,n){window.adConfig({preloadAdBreaks:"on",onReady:function(){t.isPreloadConfigReady=!0,t.handlePostPreloadAdComplete(),e()}}),setTimeout((function(){t.isPreloadConfigReady||n(new Error("Failed to preload ad config in time."))}),1e4)})),e.abrupt("return",t.preloadPromise);case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),t.loadScriptElementAsync=function(e){return new(l())((function(n,i){!function a(r){var s=e.maxScriptLoadRetryCount,o=document.createElement("script");try{t.assignAdsByGoogleScriptProperties(o,e)}catch(l){t.initStatus=T,i(new Error("Invalid adConfig."))}if(o.onload=function(){t.configGoogleAdsOnInit(),n(!0)},o.onerror=function(){r<s?setTimeout((function(){a(r+1)}),12e4):(t.initStatus=T,i(new Error("Failed to load Google Ads script.")))},document.head.appendChild(o),!!!document.getElementById("adsByGoogleFunctionScript")){var c=document.createElement("script");c.text="window.adsbygoogle = window.adsbygoogle || []; var adBreak = adConfig = function(o) {adsbygoogle.push(o);}",c.id="adsByGoogleFunctionScript",document.head.appendChild(c)}}(0)}))},t.assignAdsByGoogleScriptProperties=function(e,t){var n=t.dataAdClient,i=t.dataAdHost,a=t.dataAdChannel,r=t.dataAdBreakTest,s=t.dataAdFrequencyHint;if(!n&&!i)throw new Error("dataAdClient or dataAdHost is required.");e.async=!0,e.setAttribute("data-ad-frequency-hint",s+"s"),n&&e.setAttribute("data-ad-client",n),a&&e.setAttribute("data-ad-channel",a),i&&e.setAttribute("data-ad-host",i),r&&e.setAttribute("data-adbreak-test","on");var o="";if(n||i){o="?";var c=[];n&&c.push("client="+n),i&&c.push("host="+i),o+=c.join("&")}e.src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"+o,e.crossOrigin="anonymous"};var n=t.prototype;return n.makeAdInstance=function(){var e=this;return{getPlacementID:function(){return""},loadAsync:function(){return e.preloadAdPlacement()},showAsync:function(){return e.createAdPlacement()}}},n.preloadAdPlacement=function(){return console.log("preloadAdPlacement",this.type),t.initStatus!==C?l().reject(new Error("Google Ads not initiated.")):t.isPreloadConfigReady?l().resolve():t.preloadPromise?t.preloadPromise:t.runPreloadAdConfig()},n.createAdPlacement=function(){switch(this.type){case E.PRE_ROLL:return this.createAdPlacementPreroll();case E.REWARDED:return this.createAdPlacementRewarded();case E.INTERSTITIAL:return this.createAdPlacementInterstitial();default:return l().reject(new GameCore.Ads.AdError("UNSUPPORTED_AD_TYPE","Unsupported."))}},n.createAdPlacementPreroll=function(){return new(l())((function(e,n){window.adBreak({type:t.preRollPlacementType,name:"prerollAd",adBreakDone:function(t){switch(console.info("GoogleAdInstance.adBreakDone hook called",t),t.breakStatus){case"dismissed":case"viewed":return void e();default:return void n(new GameCore.Ads.AdError(t.breakStatus,t.breakType))}}})}))},n.createAdPlacementInterstitial=function(){return new(l())((function(e,n){window.adBreak({type:t.interstitialPlacementType,name:"interstitialAd",beforeAd:function(){self.game.ads.hideBannerAdAsync()},adBreakDone:function(t){switch(console.info("GoogleAdInstance.adBreakDone hook called",t),self.game.ads.showBannerAdAsync(),t.breakStatus){case"dismissed":case"viewed":return void e();default:return void n(new GameCore.Ads.AdError(t.breakStatus,t.breakType))}}})}))},n.createAdPlacementRewarded=function(){return new(l())((function(e,n){window.adBreak({type:t.rewardedPlacementType,name:"rewardedAd",beforeReward:function(e){console.info("GoogleAdInstance.beforeReward hook called"),self.game.ads.hideBannerAdAsync(),e()},adViewed:function(){console.info("GoogleAdInstance.adViewed hook called")},adDismissed:function(){console.info("GoogleAdInstance.adDismissed hook called")},adBreakDone:function(t){switch(console.info("GoogleAdInstance.adBreakDone hook called",t),self.game.ads.showBannerAdAsync(),t.breakStatus){case"dismissed":return void n(new GameCore.Ads.AdError("USER_INPUT","User dismissed."));case"viewed":return void e();default:return void n(new GameCore.Ads.AdError(t.breakStatus,t.breakType))}}})}))},t.setGame=function(e){self.game=e},n.getStatus=function(){return this.status},n.loadAsync=function(){var e=(0,a.Z)(g().mark((function e(){var n,i,a;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,t.isPreloadConfigReady&&null==this.instance){e.next=3;break}return e.abrupt("return");case 3:if(this.instance=this.makeAdInstance(),null!==this.instance){e.next=6;break}throw new GameCore.Ads.AdError("AD_INSTANCE_NOT_INITIATED","Ad instance didn't initiated.");case 6:return e.next=8,this.instance.loadAsync();case 8:n=this.getSceneName(),this.type===E.PRE_ROLL&&self.game.analytics.loadPreRollAd(n,I),this.type===E.INTERSTITIAL&&self.game.analytics.loadInterstitialAd(n,I),this.type===E.REWARDED&&self.game.analytics.loadRewardedVideoAd(n,I),e.next=18;break;case 14:throw e.prev=14,e.t0=e.catch(0),this.isAdTypeValid(this.type)&&(i=this.getSceneName(),a={type:this.type,placement:i,adService:I},self.game.analytics.loadAdFail(a)),e.t0;case 18:case"end":return e.stop()}}),e,this,[[0,14]])})));return function(){return e.apply(this,arguments)}}(),n.showAsync=function(){var e=(0,a.Z)(g().mark((function e(){var t,n,i,a;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=!1,e.prev=1,this.status===S.FILLED){e.next=4;break}throw new GameCore.Ads.AdError("AD_NOT_FILLED","Ads no fill.");case 4:if(this.status=S.SHOWING,null!==this.instance){e.next=8;break}return e.next=8,this.loadAsync();case 8:if(null!==this.instance){e.next=10;break}throw new GameCore.Ads.AdError("AD_INSTANCE_NOT_INITIATED","Ad instance didn't initiated.");case 10:return e.next=12,this.instance.showAsync();case 12:t=!0,this.handlePostShowAdStatus(),this.instance=null,e.next=27;break;case 17:if(e.prev=17,e.t0=e.catch(1),!(e.t0 instanceof Object&&b.hasOwn(e.t0,"code"))){e.next=24;break}if("noAdPreloaded"!==e.t0.code){e.next=22;break}return e.abrupt("return");case 22:"USER_INPUT"===e.t0.code&&(t=!0),"frequencyCapped"===e.t0.code&&self.game.analytics.event(m._.MISSING_AD_SHOW,{ad_type:this.type});case 24:throw this.handlePostShowAdStatus(),this.instance=null,e.t0;case 27:return e.prev=27,window.focus(),n=this.getSceneName(),t?(this.type===E.PRE_ROLL&&self.game.analytics.showPreRollAd(n,I),this.type===E.INTERSTITIAL&&self.game.analytics.showInterstitialAd(n,I),this.type===E.REWARDED&&self.game.analytics.showRewardedVideoAd(n,I)):this.isAdTypeValid(this.type)&&(i=this.getSceneName(),a={type:this.type,placement:i,adService:I},self.game.analytics.showAdFail(a)),e.finish(27);case 32:case"end":return e.stop()}}),e,this,[[1,17,27,32]])})));return function(){return e.apply(this,arguments)}}(),n.getSceneName=function(){try{var e=self.game.globalScene;return e instanceof v.Z?e.getCurrentScene().scene.getSceneName():"unknown"}catch(t){return"unknown"}},n.isAdTypeValid=function(e){var t;return h()(t=f()(E)).call(t,e)},n.handlePostShowAdStatus=function(){t.isPreloadConfigReady?this.status=S.FILLED:this.status=S.IDLE},t.handlePostPreloadAdComplete=function(){t.childAdInstances.forEach((function(e){e.status=S.FILLED}))},(0,r.Z)(t,null,[{key:"initStatus",get:function(){return t._initStatus},set:function(e){this._initStatus!==e&&(self.game.analytics.event(m._.AD_INIT,{adService:"adsense",state:e}),this._initStatus=e)}}]),t}(GameCore.Ads.AdInstance);i=x,x.childAdInstances=[],x._initStatus=T,x.isPreloadConfigReady=!1,x.adsByGoogleConfig=void 0,x.preloadPromise=void 0,x.preRollPlacementType="preroll",x.interstitialPlacementType="next",x.rewardedPlacementType="reward",x.setInterstitialPlacementType=function(e){i.interstitialPlacementType=e},x.setRewardedPlacementType=function(e){i.rewardedPlacementType=e},x.setPreRollPlacementType=function(e){i.preRollPlacementType=e},t.default=x},653:function(e,t,n){"use strict";n.d(t,{U:function(){return E},v:function(){return S}});var i=n(624),a=n(627),r=n(1),s=n.n(r),o=n(31),c=n.n(o),l=n(632),u=n(643),h=function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).name="BadRequest",i.message=t||"This request is bad",i.payload=n,i}return(0,l.Z)(t,e),t}((0,u.Z)(Error)),d=function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).name="RequestTimeout",i.message=t||"This request is timeout",i.payload=n,i}return(0,l.Z)(t,e),t}((0,u.Z)(Error)),f=n(640),p=GameCore.Configs,g=p.AppId,m=p.Network,v=function(e){if(!e.ok)throw new h(null,{response:e})},y=function(){var e=window.game.auth.getToken();return{token:e,timeout:m.Timeout,headers:{Authorization:"Bearer "+e,"Content-Type":"application/json"}}},b=function(e,t,n,i){return(0,a.Z)(s().mark((function a(){var r,o,l,u,f;return s().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,r=e+"/apps/"+g+"/"+t,o=new AbortController,n.signal=o.signal,l=setTimeout((function(){o.abort()}),n.timeout),GameCore.Utils.Valid.isObject(i)&&(n.body=c()(i)),a.next=8,fetch(r,n);case 8:return u=a.sent,clearTimeout(l),v(u),a.next=13,u.json();case 13:if(a.t0=a.sent,a.t0){a.next=16;break}a.t0={};case 16:return f=a.t0,a.abrupt("return",f);case 20:if(a.prev=20,a.t1=a.catch(0),!(a.t1 instanceof h)){a.next=24;break}return a.abrupt("return",null);case 24:if(!(a.t1 instanceof Object&&GameCore.Utils.Object.hasOwn(a.t1,"name"))){a.next=27;break}if("AbortError"!==a.t1.name){a.next=27;break}throw new d(null);case 27:throw a.t1;case 28:case"end":return a.stop()}}),a,null,[[0,20]])})))},A=function(){var e=(0,a.Z)(s().mark((function e(t,n){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.abrupt("return",t());case 4:if(e.prev=4,e.t0=e.catch(0),!(e.t0 instanceof d&&n>0)){e.next=18;break}return e.prev=7,e.next=10,(0,f.qZ)(600);case 10:return e.next=12,A(t,n-1);case 12:return e.abrupt("return",e.sent);case 15:return e.prev=15,e.t1=e.catch(7),e.abrupt("return",{});case 18:if(!(e.t0 instanceof d)){e.next=20;break}return e.abrupt("return",{});case 20:return console.warn(e.t0),e.abrupt("return",{});case 22:case"end":return e.stop()}}),e,null,[[0,4],[7,15]])})));return function(t,n){return e.apply(this,arguments)}}(),E=function(){var e=(0,a.Z)(s().mark((function e(t,n,a,r){var o,c;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return void 0===n&&(n={}),void 0===r&&(r=m.Retries),e.prev=2,o=(0,i.Z)({},y(),n,{method:"GET"}),c=b(a,t,o),e.next=7,A(c,r);case 7:return e.abrupt("return",e.sent);case 10:return e.prev=10,e.t0=e.catch(2),console.warn(e.t0),e.abrupt("return",{});case 14:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(t,n,i,a){return e.apply(this,arguments)}}(),S=function(){var e=(0,a.Z)(s().mark((function e(t,n,a,r,o){var c,l;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return void 0===a&&(a={}),void 0===o&&(o=m.Retries),e.prev=2,c=(0,i.Z)({},y(),a,{method:"POST"}),l=b(r,t,c,n),e.next=7,A(l,o);case 7:return e.abrupt("return",e.sent);case 10:return e.prev=10,e.t0=e.catch(2),console.warn(e.t0),e.abrupt("return",{});case 14:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(t,n,i,a,r){return e.apply(this,arguments)}}()},650:function(e,t,n){"use strict";n.d(t,{kL:function(){return i},fJ:function(){return a},EH:function(){return r},qj:function(){return s},rh:function(){return o},DW:function(){return c}});var i="CONTEXT_RECEIVED",a="CONTEXT_PROCESSED",r="CONTEXT_GAME_MODE_DETECTED",s="MESSAGES_SENT_UPDATE",o="MESSAGES_SENT_REMOVE",c="SCENE_KEY_UPDATE"},662:function(e,t,n){"use strict";var i=n(632),a=function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).name="LeaderboardNotFound",i.message=t||"Leaderboard not found",i.payload=n,i}return(0,i.Z)(t,e),t}((0,n(643).Z)(Error));t.Z=a},642:function(e,t,n){"use strict";var i=n(632),a=function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).name="TournamentNotFound",i.message=t||"A Tournament with current context was not found",i.payload=n,i.code="TOURNAMENT_NOT_FOUND",i}return(0,i.Z)(t,e),t}((0,n(643).Z)(Error));t.Z=a},668:function(e,t,n){"use strict";var i=n(623),a=function(){function e(e,t){if(this.scene=void 0,this.config=void 0,this.isStarted=void 0,this.tween=void 0,!(t.targets.length<1)){this.buildConfig(e,t);var n=this.config.targets[0].scene;n&&(this.scene=n,this.isStarted=!1,this.tween=n.tweens.create(this.config))}}var t=e.prototype;return t.buildConfig=function(e,t){this.config=(0,i.TS)(e,t)},t.play=function(){this.tween&&(this.isStarted&&this.tween.hasStarted?this.restart():(this.isStarted||this.tween.hasStarted||this.tween.play(),this.isStarted=!0))},t.restart=function(){var e;null==(e=this.tween)||e.restart()},t.stop=function(){var e;null==(e=this.tween)||e.stop()},t.remove=function(){var e;null==(e=this.tween)||e.remove()},t.next=function(e){return this.tween?(this.tween.off(Phaser.Tweens.Events.TWEEN_COMPLETE,e),this.tween.once(Phaser.Tweens.Events.TWEEN_COMPLETE,e),this.tween):null},e}();t.Z=a},675:function(e,t,n){"use strict";n.d(t,{Z:function(){return o}});var i=n(632),a=n(668),r=n(187),s={targets:[],yoyo:!0,repeat:-1,duration:600,repeatDelay:50,ease:n.n(r)()(.55,.47,.43,.91),easeParams:[0,.9],props:{scale:{from:1,to:1.2}}},o=function(e){function t(t){return e.call(this,s,t)||this}return(0,i.Z)(t,e),t}(a.Z)},687:function(e,t,n){"use strict";var i=n(637),a=n(632),r=n(668),s={targets:[],repeat:-1,yoyo:!0,duration:33,ease:Phaser.Math.Easing.Sine.InOut,props:{x:5}},o=function(e){function t(t){var n,a,r;return(r=e.call(this,s,t)||this).posX=void 0,r.handleSwitchPosition=function(){var e;r.posX=-r.posX,null==(e=r.tween)||e.updateTo("x",-r.posX)},null!=(n=r.config)&&n.props?(r.posX=r.config.props.x,null==(a=r.tween)||a.on(Phaser.Tweens.Events.TWEEN_REPEAT,r.handleSwitchPosition),r):(0,i.Z)(r)}return(0,a.Z)(t,e),t}(r.Z);t.Z=o},685:function(e,t,n){"use strict";var i=n(632),a=n(668),r={targets:[],duration:400,ease:n(667).Z,props:{scale:"+=0.1"}},s=function(e){function t(t){return e.call(this,r,t)||this}return(0,i.Z)(t,e),t}(a.Z);t.Z=s},667:function(e,t,n){"use strict";var i=n(187),a=n.n(i)()(.48,1.57,.6,.83);t.Z=a},669:function(e,t,n){"use strict";var i=n(632),a=n(668),r={targets:[],duration:600,ease:Phaser.Math.Easing.Cubic.Out,props:{alpha:{start:0,from:0,to:1}}},s=function(e){function t(t){return e.call(this,r,t)||this}return(0,i.Z)(t,e),t}(a.Z);t.Z=s},679:function(e,t,n){"use strict";var i=n(632),a=n(668),r={targets:[],duration:600,ease:Phaser.Math.Easing.Back.Out,props:{y:{from:500,to:0}}},s=function(e){function t(t){return e.call(this,r,t)||this}return(0,i.Z)(t,e),t}(a.Z);t.Z=s},670:function(e,t,n){"use strict";var i=n(632),a=n(668),r={targets:[],duration:600,ease:Phaser.Math.Easing.Quadratic.Out,props:{alpha:{start:1,from:1,to:0}}},s=function(e){function t(t){return e.call(this,r,t)||this}return(0,i.Z)(t,e),t}(a.Z);t.Z=s},666:function(e,t,n){"use strict";var i=n(632),a=n(668),r={targets:[],duration:300,ease:n(667).Z,props:{scale:{from:1.2,to:1}}},s=function(e){function t(t){return e.call(this,r,t)||this}return(0,i.Z)(t,e),t}(a.Z);t.Z=s},682:function(e,t,n){"use strict";n.d(t,{Z:function(){return f}});var i=n(638),a=n(637),r=n(632),s=n(641),o=n(668),c={targets:[],duration:400,ease:n(667).Z,props:{scale:"-=0.1"}},l=function(e){function t(t){return e.call(this,c,t)||this}return(0,r.Z)(t,e),t}(o.Z),u=n(656),h=n(658),d=n(635),f=function(e){function t(t,n,i,r,s,o){var c;return void 0===o&&(o=!1),(c=e.call(this,t)||this).useSound=!0,c.isClicked=!1,c.scaleUp=-1,c.scaleDown=-1,c.button=void 0,c.upAnimation=void 0,c.downAnimation=void 0,c.isUsePixelPerfect=!1,c.hitArea=void 0,c.hitZone=void 0,c.scaleDownPress=void 0,c.parentName=void 0,c.handelObjectDestroy=function(){c.scene&&c.scene.events.off(Phaser.Scenes.Events.SLEEP,c.handleSceneSleep)},c.handleSceneSleep=function(){c.scene&&c.scene.tweens.killTweensOf((0,a.Z)(c))},c.handlePointerDown=function(){var e,t;c.isClicked||null!=(e=c.upAnimation)&&null!=(t=e.tween)&&t.isPlaying()||(c.isClicked=!0,c.runDownAnimation())},c.handleOnClick=function(e){return function(){var t,n,i,a;c.isClicked&&(null!=(t=c.upAnimation)&&null!=(n=t.tween)&&n.isPlaying()||(c.isClicked=!1,c.runUpAnimation(),null==(i=c.upAnimation)||null==(a=i.tween)||a.once(Phaser.Tweens.Events.TWEEN_COMPLETE,(function(){c.logButtonEvent(),c.addDebugData(),c.processCallback(e)}))))}},c.handlePointerOut=function(){var e,t;c.isClicked&&(null!=(e=c.upAnimation)&&null!=(t=e.tween)&&t.isPlaying()||(c.isClicked=!1,c.runUpAnimation()))},c.runDownAnimation=function(){var e;-1===c.scaleDown&&(c.scaleUp=c.scale,c.scaleDown=c.scaleDownPress),c.useSound&&c.scene.audio.playSound(h.Z.BUTTON_CLICK),null==(e=c.downAnimation)||e.remove(),c.downAnimation=new l({targets:[(0,a.Z)(c)],duration:150,props:{scale:c.scaleDown},onUpdate:function(){c.hitZone.scale=1/c.scale}}),c.downAnimation.play()},c.runUpAnimation=function(){var e;-1!==c.scaleUp&&(null==(e=c.upAnimation)||e.remove(),c.upAnimation=new l({targets:[(0,a.Z)(c)],duration:150,props:{scale:c.scaleUp},onUpdate:function(){c.hitZone.scale=1/c.scale}}),c.upAnimation.play())},c.isUsePixelPerfect=o,c.setDepth(u.Z.BUTTON),c.createButton(n,i,r,s),c.updateSize(),c.listenEvents(),c.scene.add.existing((0,a.Z)(c)),c}(0,r.Z)(t,e);var n=t.prototype;return n.listenEvents=function(){this.scene.events.on(Phaser.Scenes.Events.SLEEP,this.handleSceneSleep),this.once(Phaser.GameObjects.Events.DESTROY,this.handelObjectDestroy)},n.processCallback=function(e){var t,n,i;null==(t=this.upAnimation)||t.stop(),null==(n=this.downAnimation)||n.stop(),null==(i=this.scene)||i.tweens.killTweensOf(this),-1!==this.scaleUp&&this.setScale(this.scaleUp),e()},n.setDisabled=function(e){var t,n;e?(this.setAlpha(.5),null==(t=this.hitArea)||t.disableInteractive()):(this.setAlpha(1),null==(n=this.hitArea)||n.setInteractive())},n.createButton=function(e,t,n,i){this.button=this.scene.add.image(0,0,e,t),n&&i&&this.button.setWorldSize(n,i),this.scaleDownPress=this.scale-.1;var a=this.button,r=a.displayWidth,s=a.displayHeight;this.hitZone=this.scene.make.zone({displayWidth:r,displayHeight:s}),this.add([this.button,this.hitZone])},n.updateSize=function(){var e=this.button,t=e.width,n=e.height,i=t/100*10,a=n/100*10,r=i<10?i:10,s=a<10?a:10;this.setSize(t+r,n+s),this.hitZone.setSize(t+r,n+s)},n.addDebugData=function(){var e=this.getParentName(),t=this.name;(0,d.sw)("ui-click",e+":"+t)},n.logButtonEvent=function(){var e=this.getParentName(),t=this.name;this.scene.analytics.event(s._.BUTTON_CLICK,{button_name:t,screen_name:e})},n.getParentName=function(){if(this.parentName)return this.parentName;for(var e=this.parentContainer;e;){if(e instanceof GameCore.Screen){var t=e;return this.parentName=t.getScreenName(),this.parentName}e=e.parentContainer}return this.parentName=this.scene.getSceneName(),this.parentName},(0,i.Z)(t,[{key:"onClick",set:function(e){this.isUsePixelPerfect?(this.hitArea=this.button,this.hitArea.setInteractive({useHandCursor:!0,pixelPerfect:!0})):(this.hitArea=this.hitZone,this.updateSize(),this.hitArea.setInteractive({useHandCursor:!0})),this.hitArea.on(Phaser.Input.Events.GAMEOBJECT_POINTER_DOWN,this.handlePointerDown),this.hitArea.on(Phaser.Input.Events.GAMEOBJECT_POINTER_UP,this.handleOnClick(e)),this.hitArea.on(Phaser.Input.Events.GAMEOBJECT_POINTER_OUT,this.handlePointerOut)}},{key:"isUsePixelPerFect",get:function(){return this.isUsePixelPerfect}}]),t}(Phaser.GameObjects.Container)},674:function(e,t,n){"use strict";var i=n(638),a=n(637),r=n(632),s=n(641),o=n(656),c=n(635),l=function(e){function t(t,n,i){var r;return(r=e.call(this,t)||this).useSound=!0,r.isClicked=!1,r.scaleUp=-1,r.scaleDownPress=void 0,r.parentName=void 0,r.disable=void 0,r.handelObjectDestroy=function(){r.scene&&r.scene.events.off(Phaser.Scenes.Events.SLEEP,r.handleSceneSleep)},r.handleSceneSleep=function(){r.scene&&r.scene.tweens.killTweensOf((0,a.Z)(r))},r.handlePointerDown=function(){r.isClicked||(r.animButtonDown(),r.isClicked=!0)},r.handleOnClick=function(e){return function(){r.isClicked&&(r.isClicked=!1,r.animButtonUp(),r.logButtonEvent(),r.addDebugData(),r.processCallback(e))}},r.handlePointerOut=function(){r.isClicked&&(r.isClicked=!1,r.animButtonUp())},r.setDepth(o.Z.BUTTON),r.setSize(n,i),r.listenEvents(),r.scene.add.existing((0,a.Z)(r)),r}(0,r.Z)(t,e);var n=t.prototype;return n.listenEvents=function(){this.scene.events.on(Phaser.Scenes.Events.SLEEP,this.handleSceneSleep),this.once(Phaser.GameObjects.Events.DESTROY,this.handelObjectDestroy)},n.animButtonDown=function(){var e=this;this.scene.add.tween({targets:this,alpha:.75,duration:100,ease:Phaser.Math.Easing.Sine.Out,onStart:function(t){e.disable&&(e.updateAlphaByDisable(),t.remove())},onUpdate:function(t){e.disable&&(e.updateAlphaByDisable(),t.remove())}})},n.animButtonUp=function(){var e=this;this.scene.add.tween({targets:this,alpha:1,duration:200,ease:Phaser.Math.Easing.Sine.In,onStart:function(t){e.disable&&(e.updateAlphaByDisable(),t.remove())},onUpdate:function(t){e.disable&&(e.updateAlphaByDisable(),t.remove())}})},n.processCallback=function(e){-1!==this.scaleUp&&this.setScale(this.scaleUp),e()},n.updateAlphaByDisable=function(){this.alpha=this.disable?.5:1},n.setDisabled=function(e,t){void 0===t&&(t=!0),this.disable!=e&&(this.disable=e,e?this.disableInteractive():this.setInteractive(),t&&this.updateAlphaByDisable())},n.addDebugData=function(){var e=this.getParentName(),t=this.name;(0,c.sw)("ui-click",e+":"+t)},n.logButtonEvent=function(){var e=this.getParentName(),t=this.name;this.scene.analytics.event(s._.BUTTON_CLICK,{button_name:t,screen_name:e})},n.getParentName=function(){if(this.parentName)return this.parentName;for(var e=this.parentContainer;e;){if(e instanceof GameCore.Screen){var t=e;return this.parentName=t.getScreenName(),this.parentName}e=e.parentContainer}return this.parentName=this.scene.getSceneName(),this.parentName},(0,i.Z)(t,[{key:"onClick",set:function(e){this.setInteractive({useHandCursor:!0}),this.on(Phaser.Input.Events.GAMEOBJECT_POINTER_DOWN,this.handlePointerDown),this.on(Phaser.Input.Events.GAMEOBJECT_POINTER_UP,this.handleOnClick(e)),this.on(Phaser.Input.Events.GAMEOBJECT_POINTER_OUT,this.handlePointerOut)}}]),t}(Phaser.GameObjects.Container);t.Z=l},678:function(e,t,n){"use strict";var i=n(638),a=n(637),r=n(632),s=n(641),o=n(656),c=n(635),l=n(21),u=n(675),h=function(e){function t(t,n,i,r,s){var c;return(c=e.call(this,t)||this).useSound=!0,c.isClicked=!1,c.scaleUp=-1,c.button=void 0,c.buttonDown=void 0,c.hitArea=void 0,c.scaleDownPress=void 0,c.parentName=void 0,c.handelObjectDestroy=function(){c.scene&&c.scene.events.off(Phaser.Scenes.Events.SLEEP,c.handleSceneSleep)},c.handleSceneSleep=function(){c.scene&&c.scene.tweens.killTweensOf((0,a.Z)(c))},c.handlePointerDown=function(){c.isClicked||(c.showButtonDown(),c.isClicked=!0)},c.handleOnClick=function(e){return function(){c.isClicked&&(c.isClicked=!1,c.hideButtonDown(),c.logButtonEvent(),c.addDebugData(),c.processCallback(e))}},c.handlePointerOut=function(){c.isClicked&&(c.isClicked=!1,c.hideButtonDown())},c.buttonsPulsateAnimation=void 0,c.setDepth(o.Z.BUTTON),c.createButton(n,i,r,s),c.updateSize(),c.listenEvents(),c.scene.add.existing((0,a.Z)(c)),c}(0,r.Z)(t,e);var n=t.prototype;return n.listenEvents=function(){this.scene.events.on(Phaser.Scenes.Events.SLEEP,this.handleSceneSleep),this.once(Phaser.GameObjects.Events.DESTROY,this.handelObjectDestroy)},n.showButtonDown=function(){this.scene.tweens.killTweensOf(this.buttonDown),this.scene.add.tween({targets:this.buttonDown,alpha:.4,duration:150,ease:Phaser.Math.Easing.Sine.Out})},n.hideButtonDown=function(){this.scene.tweens.killTweensOf(this.buttonDown),this.scene.add.tween({targets:this.buttonDown,alpha:0,duration:150,ease:Phaser.Math.Easing.Sine.In})},n.processCallback=function(e){-1!==this.scaleUp&&this.setScale(this.scaleUp),e()},n.setDisabled=function(e){var t,n;e?(this.setAlpha(.5),null==(t=this.hitArea)||t.disableInteractive()):(this.setAlpha(1),null==(n=this.hitArea)||n.setInteractive())},n.createButton=function(e,t,n,i){this.button=new l.Z(this.scene,0,0,e,t,n,i),this.buttonDown=new l.Z(this.scene,0,0,e,t,n,13619151),this.buttonDown.setAlpha(0),this.scaleDownPress=this.scale-.1;var a=this.button,r=a.displayWidth,s=a.displayHeight;this.hitArea=this.scene.make.zone({displayWidth:r,displayHeight:s}),this.add([this.button,this.buttonDown,this.hitArea])},n.updateSize=function(){var e=this.button,t=e.width,n=e.height,i=t/100*10,a=n/100*10,r=i<10?i:10,s=a<10?a:10;this.setSize(t+r,n+s),this.hitArea.setSize(t+r,n+s)},n.addDebugData=function(){var e=this.getParentName(),t=this.name;(0,c.sw)("ui-click",e+":"+t)},n.logButtonEvent=function(){var e=this.getParentName(),t=this.name;this.scene.analytics.event(s._.BUTTON_CLICK,{button_name:t,screen_name:e})},n.getParentName=function(){if(this.parentName)return this.parentName;for(var e=this.parentContainer;e;){if(e instanceof GameCore.Screen){var t=e;return this.parentName=t.getScreenName(),this.parentName}e=e.parentContainer}return this.parentName=this.scene.getSceneName(),this.parentName},n.runPulsate=function(){var e,t;null==(e=this.buttonsPulsateAnimation)||e.remove(),this.buttonsPulsateAnimation=new u.Z({targets:[this],props:{scale:{from:1,to:1.05},duration:500}}),null==(t=this.buttonsPulsateAnimation)||t.play()},n.stopPulsate=function(){var e;null==(e=this.buttonsPulsateAnimation)||e.stop(),this.setScale(1)},(0,i.Z)(t,[{key:"onClick",set:function(e){this.hitArea.setInteractive({useHandCursor:!0}),this.hitArea.on(Phaser.Input.Events.GAMEOBJECT_POINTER_DOWN,this.handlePointerDown),this.hitArea.on(Phaser.Input.Events.GAMEOBJECT_POINTER_UP,this.handleOnClick(e)),this.hitArea.on(Phaser.Input.Events.GAMEOBJECT_POINTER_OUT,this.handlePointerOut)}}]),t}(Phaser.GameObjects.Container);t.Z=h},683:function(e,t,n){"use strict";var i=n(632),a=n(663),r=function(e){function t(t,n,i,a){var r;return(r=e.call(this,t,n.key,n.button,i,a)||this).payload=void 0,r.payload=n,r.createIcon(),r.createText(),r}(0,i.Z)(t,e);var n=t.prototype;return n.createIcon=function(){var e=this.scene.add.image(0,0,this.payload.key,this.payload.icon);e.setWorldSize(43,43),this.add(e),Phaser.Display.Align.In.LeftCenter(e,this,-25)},n.createText=function(){var e=this.payload.text,t=this.scene.make.bitmapText({font:a.Z.PRIMARY.KEY,size:this.scene.fontSize(24),text:e,origin:{x:.2,y:.5}});this.add(t)},t}(n(682).Z);t.Z=r},665:function(e,t,n){"use strict";n.d(t,{Z:function(){return c}});var i=n(637),a=n(632),r=n(655).Z.GAMEPLAY_DEFAULT,s=r.KEY,o=r.FRAME,c=function(e){function t(t){var n;return(n=e.call(this,t)||this).icons=[],n.canPlayAnimation=!1,n.timeline=void 0,n.setSize(188,32),n.createIcons(),n.runAnimation(),n.scene.add.existing((0,i.Z)(n)),n}(0,a.Z)(t,e);var n=t.prototype;return n.createIcons=function(){var e=this.scene.add.image(0,0,s,o.LOADING_CLUB),t=this.scene.add.image(0,0,s,o.LOADING_DIAMOND),n=this.scene.add.image(0,0,s,o.LOADING_HEART),i=this.scene.add.image(0,0,s,o.LOADING_SPADE);e.setWorldSize(32,32),t.setWorldSize(32,32),n.setWorldSize(32,32),i.setWorldSize(32,32),this.icons=[e,t,n,i],this.add(this.icons),this.alignIcons()},n.alignIcons=function(){var e=this;this.icons.forEach((function(t,n){var i=-(e.icons.length-1)/2*40+40*n;t.setX(i)}))},n.runAnimation=function(){var e,t=this;if(this.canPlayAnimation){var n=1/this.scene.world.getPixelRatio();null==(e=this.timeline)||e.stop();var i=function(){t.icons.forEach((function(e){return e.setScale(.8*n)}))},a=this.scene.tweens.createTimeline({loop:-1,onStart:i,onLoop:i});this.icons.forEach((function(e,t){a.add({targets:e,duration:150,ease:Phaser.Math.Easing.Sine.Out,yoyo:!0,offset:150*t,props:{scale:{from:.8*n,to:1.1*n}}})})),a.play(),this.timeline=a}},n.stopAnimation=function(){var e;null==(e=this.timeline)||e.stop()},n.setVisible=function(t){return e.prototype.setVisible.call(this,t),this.canPlayAnimation=t,t?this.runAnimation():this.stopAnimation(),this},n.setTint=function(e){return this.icons.forEach((function(t){return t.setTint(e)})),this},t}(Phaser.GameObjects.Container)},686:function(e,t,n){"use strict";var i=n(624),a=n(638),r=n(637),s=n(632),o=n(4),c=n.n(o),l=n(84),u=n.n(l),h=n(35),d=n.n(h),f=n(20),p=n.n(f),g=n(13),m=n.n(g),v=n(29),y=n.n(v),b=n(36),A=n.n(b),E=n(38),S=n.n(E),T=n(656),w=n(628);function C(e,t){var n="undefined"!==typeof A()&&S()(e)||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){var n;if(!e)return;if("string"===typeof e)return I(e,t);var i=m()(n=Object.prototype.toString.call(e)).call(n,8,-1);"Object"===i&&e.constructor&&(i=e.constructor.name);if("Map"===i||"Set"===i)return y()(e);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return I(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var i=0;return function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function I(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var x=function(e){function t(t,n){var a,s;(s=e.call(this,t)||this).config=void 0,s.isEnable=void 0,s.maxHeight=void 0,s.isScrolling=void 0,s.boundTop=void 0,s.boundBottom=void 0,s.maskGraphics=void 0,s.objects=void 0,s._value=0,s.velocity=0,s.isScrollingSmooth=void 0,s.lastScrollY=void 0,s.isScrollingBack=void 0,s.scrollingBackTo=void 0,s.lastScrollYCount=0,s.hitArea=void 0,s.onScrollEvents=[],s.update=function(e,t){s.isScrollingSmooth&&s.velocity&&s.scrollingSmooth(t),s.isScrollingBack&&s.scrollingBack(t)},s.checkReachBound=function(){return s.isReachTop()||s.isReachBottom()},s.onMouseScroll=(0,w.D)((function(e,t,n){if(s.isEnable){var i;if(s.isScrolling=!0,s.checkReachBound())return s.lastScrollY=c()(i=s.lastScrollY).call(i,(function(){return 0})),void(s.isScrolling=!1);s.stopScrollingBack(),s.startScrollSmooth(-n*s.scrollSmooth/15)}}),100,{isImmediate:!0,maxWait:100}),s.onTouchScroll=function(e){if(s.isEnable){s.velocity&&s.stopScrollSmooth(),s.stopScrollingBack(),s.isScrolling=!0;var t=s.scene.game.world.getZoomRatio(),n=e.position,i=e.prevPosition,a=(n.y-i.y)/t,r=s.height*s.maxScrollOver,o=1;if(s.lastScrollY[++s.lastScrollYCount%s.lastScrollY.length]=a,s.isReachTop()&&a>=0){var c=(r-(s.value-s.marginTop))/r;o=Math.min(o,c)}if(s.isReachBottom()&&a<=0){var l=(r-(-s.maxHeight-s.value))/r;o=Math.min(o,l)}var u=a*o,h=s.maxScrollOver*s.height;s.value+u>s.marginTop+h?s.value=s.marginTop+h:s.value+u<-s.maxHeight-h?s.value=-s.maxHeight-h:s.value+=u,s.callOnScrollEvents(s.value,u)}},s.onTouchDown=function(){s.isEnable&&(s.velocity&&s.stopScrollSmooth(),s.stopScrollingBack())},s.onTouchEnd=function(){var e,t;if(s.isReachTop()&&(s.startScrollingBack(s.marginTop),s.stopScrollSmooth()),s.isReachBottom()&&(s.startScrollingBack(-s.maxHeight),s.stopScrollSmooth()),s.isScrolling){var n=u()(e=s.lastScrollY).call(e,(function(e,t){return e+t}))/s.lastScrollY.length;s.startScrollSmooth(n*s.scrollSmooth),s.lastScrollY=c()(t=s.lastScrollY).call(t,(function(){return 0}))}},s.config=(0,i.Z)({marginTop:0,marginBottom:0,acceleration:1400,maxScrollOver:.15,scrollSmooth:40,scrollingBackRate:5},n);var o=n.width,l=n.height;return s.isEnable=!1,s.maxHeight=0,s.lastScrollY=d()(a=new Array(3)).call(a,0),s.setSize(o,l),s.createGroup(),s.createInput(),s.createEvents(),s.scene.add.existing((0,r.Z)(s)),s}(0,s.Z)(t,e);var n=t.prototype;return n.onScroll=function(e){this.onScrollEvents.push(e)},n.gotoTop=function(){this.value=this.config.marginTop},n.reset=function(){this.maxHeight=0,this.isScrolling=!1,this.isScrollingBack=!1,this.isScrollingSmooth=!1,this.gotoTop(),this.setEnable(!1)},n.createDebug=function(){var e=this.drawDebugBox(16711680,.8);console.log(null==e?void 0:e.x,null==e?void 0:e.y,null==e?void 0:e.displayWidth,null==e?void 0:e.displayHeight)},n.setEnable=function(e){this.isEnable=e,e?this.setInteractive({draggable:!0,useHandCursor:!0}):this.disableInteractive()},n.addItem=function(e){this.addAt(e),this.objects.add(e);var t=e.y+e.height+this.marginBottom-this.height/2;this.maxHeight=Math.max(this.maxHeight,t,0),this.updateObjectVisible()},n.addItems=function(e){var t=this;this.addAt(e),this.objects.addMultiple(e);var n=c()(e).call(e,(function(e){return e.y+e.height+t.marginBottom-t.height/2}));this.maxHeight=Math.max(this.maxHeight,Math.max.apply(Math,n),0),this.updateObjectVisible()},n.clearItem=function(){this.objects.clear(!0,!0),this.reset()},n.getChildren=function(){var e;return p()(e=this.objects.getChildren()).call(e,(function(e){return e.active}))},n.createBound=function(e,t,n,i){this.boundTop=this.scene.make.image({key:e,frame:t}),this.boundBottom=this.scene.make.image({key:e,frame:t}),this.boundTop.setTint(i),this.boundBottom.setTint(i),this.boundTop.setAlpha(1,1,0,0),this.boundBottom.setAlpha(0,0,1,1),this.boundTop.setDepth(T.Z.PRIORITY),this.boundBottom.setDepth(T.Z.PRIORITY);var a=this.width,r=n,s=this.getWorldPosition(),o=s.x,c=s.y;this.boundTop.setDisplaySize(a,r),this.boundBottom.setDisplaySize(a,r),this.boundTop.setY(-this.displayHeight/2+r/2+c-this.y-1),this.boundBottom.setY(this.displayHeight/2-r/2+c-this.y+1),this.boundTop.setX(o-this.x),this.boundBottom.setX(o-this.x),this.add([this.boundTop,this.boundBottom])},n.createMask=function(){var e;null==(e=this.maskGraphics)||e.destroy(),this.maskGraphics=this.scene.make.graphics({fillStyle:{color:255,alpha:1},visible:!0}),this.maskGraphics.setName("MaskGraphics");var t=this.width,n=this.height;this.maskGraphics.fillRoundedRect(0-t/2,0-n/2,t,n,0),this.setMask(this.maskGraphics.createGeometryMask()),this.scene.events.off(Phaser.Scenes.Events.UPDATE,this.updateMask,this),this.scene.events.on(Phaser.Scenes.Events.UPDATE,this.updateMask,this)},n.updateMask=function(){var e=this.getWorldPosition(),t=e.x,n=e.y;this.maskGraphics.setPosition(t,n)},n.createGroup=function(){this.objects=this.scene.make.group({})},n.updateObject=function(e){this.objects.incY(e),this.updateObjectVisible()},n.updateObjectVisible=function(){for(var e=this.objects.getChildren(),t=0;t<e.length;t++){var n=e[t];n.y+n.height<-this.height/2||n.y-n.height>this.height/2?n.setVisible(!1):n.setVisible(!0)}},n.createInput=function(){this.setInteractive({draggable:!0,useHandCursor:!0}),this.on(Phaser.Input.Events.POINTER_WHEEL,this.onMouseScroll),this.on(Phaser.Input.Events.GAMEOBJECT_DRAG,this.onTouchScroll),this.on(Phaser.Input.Events.GAMEOBJECT_POINTER_DOWN,this.onTouchDown),this.scene.input.on(Phaser.Input.Events.POINTER_UP,this.onTouchEnd,this)},n.createEvents=function(){this.scene.events.on(Phaser.Scenes.Events.UPDATE,this.update)},n.callOnScrollEvents=function(e,t){for(var n,i=C(this.onScrollEvents);!(n=i()).done;){(0,n.value)(this,e,t)}},n.scrollingBack=function(e){var t=(this.scrollingBackTo-this.value)*e*this.scrollingBackRate/1e3;this.value+=t,Math.abs(this.scrollingBackTo-this.value)<.5&&(this.value=this.scrollingBackTo,this.stopScrollingBack()),this.callOnScrollEvents(this.value,t)},n.startScrollingBack=function(e){this.isScrollingBack=!0,this.scrollingBackTo=e},n.stopScrollingBack=function(){this.isScrollingBack=!1},n.scrollingSmooth=function(e){var t=this.velocity*e/1e3;this.value+=t;var n=Math.abs(this.velocity)/this.velocity;this.velocity-=n*this.acceleration*e/1e3,Math.abs(this.velocity)<this.acceleration*e/1e3&&this.stopScrollSmooth(),this.isReachTop()&&(this.startScrollingBack(this.marginTop),this.stopScrollSmooth()),this.isReachBottom()&&(this.startScrollingBack(-this.maxHeight),this.stopScrollSmooth()),this.callOnScrollEvents(this.value,t)},n.startScrollSmooth=function(e){this.isScrollingSmooth=!0,e&&(e*this.velocity>0?this.velocity+=e:this.velocity=e)},n.stopScrollSmooth=function(){this.isScrollingSmooth=!1,this.isScrolling=!1,this.velocity=0},n.isReachTop=function(){return this.value>this.marginTop},n.isReachBottom=function(){return-this.value>this.maxHeight},(0,a.Z)(t,[{key:"marginTop",get:function(){return this.config.marginTop}},{key:"marginBottom",get:function(){return this.config.marginBottom}},{key:"acceleration",get:function(){return this.config.acceleration}},{key:"maxScrollOver",get:function(){return this.config.maxScrollOver}},{key:"scrollSmooth",get:function(){return this.config.scrollSmooth}},{key:"scrollingBackRate",get:function(){return this.config.scrollingBackRate}},{key:"value",get:function(){return this._value},set:function(e){var t=e-this._value;this._value=e,this.updateObject(t)}}]),t}(Phaser.GameObjects.Container);t.Z=x},656:function(e,t){"use strict";t.Z={BACKGROUND:1,FOOTER_LOGO:2,FIREWORKS:5,ITEM:10,LOGO:15,BUTTON:20,TILE:25,TEXT:30,ENCOURAGING:31,EFFECT:32,MESSAGE:33,POPUP:40,PRIORITY:80,DEBUG:90,ON_TOP:1e4}},663:function(e,t){"use strict";t.Z={PRIMARY:{KEY:"sf-pro-normal-{{locale}}",TEXTURE:"./assets/fonts/{{locale}}/sf-pro-normal.png",DATA:"./assets/fonts/{{locale}}/sf-pro-normal.xml"},BOLD:{KEY:"sf-pro-bold-{{locale}}",TEXTURE:"./assets/fonts/{{locale}}/sf-pro-bold.png",DATA:"./assets/fonts/{{locale}}/sf-pro-bold.xml"},FONT_FAMILY:"sf-pro"}},645:function(e,t){"use strict";var n={AVATAR:{KEY:"avatar",FILE:"./assets/images/others/avatar.png",CONFIG:{}},ICON_EARTH:{KEY:"icon-earth",FILE:"./assets/images/others/icon-earth.png",CONFIG:{}},BACKGROUND:{KEY:"background",FILE:"./assets/images/"+GameCore.Utils.Image.getImageScale()+"x/bg.jpg",CONFIG:{}}};t.Z=n},655:function(e,t,n){"use strict";var i=n(624),a=GameCore.Utils.Image.getImageScale(),r={TUTORIAL:{KEY:"tutorial-resources",TEXTURE:"./assets/textures/"+a+"x/tutorial-resources.png",JSON:"./assets/textures/"+a+"x/tutorial-resources.json",FRAME:{TIP:"tip",HAND:"hand",BLANK:"blank",AVATAR_CAT:"avatar-cat",POPUP_TALK:"talk-popup",FIRST_MOVE:"first-move",CURRENT_SCORE:"current-score",TARGET_SCORE:"target-score",HAMMER_ITEM:"hammer-item",PAINT_ITEM:"paint-item",SHUFFLE_ITEM:"shuffle-item",COLORFUL_GEM_1:"colorful-gem-1",COLORFUL_GEM_2:"colorful-gem-2"}},GAMEPLAY_DEFAULT:{KEY:"gameplay-default",TEXTURE:"./assets/textures/"+a+"x/gameplay-default.png",JSON:"./assets/textures/"+a+"x/gameplay-default.json",FRAME:{BLANK:"blank",STATS_CROWN:"crown",STATS_STAR:"star",STATS_CUP:"stats_cup",STATS_MEDAL_START:"stats_medal_star",STATS_TIMER:"stats_timer",STATS_FLASH:"flash",MENU_STATISTIC:"menu_statistics",CUP:"cup",IC_SETTINGS:"ic_setting",IC_PLAY:"ic_play",IC_HINT:"ic_hint",IC_UNDO:"ic_undo",IC_SHARE:"ic_share",IC_THEME:"ic_theme",IC_INVITE:"ic_invite",IC_FLAG:"flag",IC_SOUND:"ic_sound",IC_MOVE:"ic_move",IC_STATISTICS:"ic_statistics",IC_NEXT:"ic_next",IC_BOOK:"ic_book",IC_RESTART:"ic_restart",IC_REPLAY:"ic_replay",IC_RECYCLE:"ic_recycle",IC_VIBRATION:"vibration",IC_GROUP:"ic_group",IC_HINT_SETTINGS:"ic_hint_settings",IC_DRAW_MODE:"ic_draw_mode",IC_AUTO_COMPLETE:"ic_auto_complete",IC_LANGUAGES:"ic_languages",ADD_SQUARE:"add-square",TIMER:"timer",GOLD:"gold",SILVER:"silver",BRONZE:"bronze",CUSTOM_MEDAL:"custom_medal",TOURNAMENT_TIMER:"tournament_timer",MEDAL_STAR:"medal-star",NO_TOURNAMENT:"no-tournament",IC_BG_OFF:"ic_bg_off",ARROW_SWAP_HORIZONTAL:"arrow-swap-horizontal",AVATAR_CROWN:"avatar_crown",WIN_BANNER:"win_banner",LOSE_BANNER:"lose_banner",BEAM:{AXIS:"beam_axis",LOSE_AXIS:"lose_beam_axis"},FLAG:{LEFT:"flags/left/",RIGHT:"flags/right/"},STRING:{LEFT:"string/left",RIGHT:"string/right"},LIGHTNING:{LEFT:"lightning/left_lightning",MIDDLE:"lightning/middle_lightning",RIGHT:"lightning/right_lightning"},HAND:"hand",LOADING_CLUB:"loading_club",LOADING_DIAMOND:"loading_diamond",LOADING_HEART:"loading_heart",LOADING_SPADE:"loading_spade",BOTTOM_BG:"bottom_bg",BOTTOM_LOGO:"bottom_logo",FOOTER_BG:"footer-bg",STOCK_BG:"stock-bg",FOOTER_TEXT:{BACK_TO_GAME:"text/back-to-game",TEXT_GAME:"text/text-game",TEXT_HINT:"text/text-hint",TEXT_SETTINGS:"text/text-settings",TEXT_TOURNAMENTS:"text/text-tournaments",TEXT_UNDO:"text/text-undo"},HINT:"hint"}},CARD_BACK:{KEY:"card-back",TEXTURE:"./assets/textures/"+a+"x/card-back.png",JSON:"./assets/textures/"+a+"x/card-back.json"},HOW_TO_PLAY:{KEY:"how-to-play",TEXTURE:"./assets/textures/"+a+"x/how-to-play.jpg",JSON:"./assets/textures/"+a+"x/how-to-play.json"},THEME_PREVIEW:{KEY:"theme-preview",TEXTURE:"./assets/textures/"+a+"x/theme-preview.png",JSON:"./assets/textures/"+a+"x/theme-preview.json"},DEFAULT:{KEY:"default-resources",TEXTURE:"./assets/textures/"+a+"x/default-resources.png",JSON:"./assets/textures/"+a+"x/default-resources.json",FRAME:{LINE:"line",BLANK:"blank",LOGO:"title-logo",GEMS:"title-gems",TEXT_LOADING:"loading",BOTTOM_BG:"bottom-bg",BOTTOM_LINE:"bottom-line",TOP_BG_LONG:"top-bg-long",BLOCK_LEADER_BLUE:"block-blue-bg",BLOCK_LEADER_YELLOW:"block-yellow-bg",PRELOADER:"preloader/dual-ring",LEADERBOARD_TAB_ON:"leaderboards/tab-on",LEADERBOARD_TAB_OFF:"leaderboards/tab-off",LEADERBOARD_BG_DARK:"leaderboards/bg-dark",LEADERBOARD_BG_LIGHT:"leaderboards/bg-light",MISSION_ICON_BG:"dailyMission/bg-icon",MISSION_BLOCK_BG:"dailyMission/bg-block",MISSION_CLOCK_BG:"dailyMission/bg-clock",DAILY_DAY_BG:"dailyRewards/bg",DAILY_DAY_LABEL:"dailyRewards/label",DAILY_DAY_BG_WAIT:"dailyRewards/bg-wait",DAILY_DAY_BG_OPEN:"dailyRewards/bg-open",DAILY_DAY_TITLE_GREY:"dailyRewards/title-grey",DAILY_DAY_TITLE_GREEN:"dailyRewards/title-green",DAILY_DAY_TITLE_ORANGE:"dailyRewards/title-orange",RIBBON_LONG:"ribbon/long",RIBBON_FULL:"ribbon/long-full",RIBBON_SHORT:"ribbon/short",RIBBON_SMALL:"ribbon/small",AVATAR_BG_BLUE:"avatar/blue-bg",AVATAR_FRAME_BLUE:"avatar/blue-frame",AVATAR_BG_BLUE_SMALL:"avatar/blue-bg-small",AVATAR_FRAME_BLUE_SMALL:"avatar/blue-frame-small",AVATAR_BG_BLUE_BIG:"avatar/blue-bg-big",AVATAR_FRAME_BLUE_BIG:"avatar/blue-frame-big",AVATAR_BG_YELLOW:"avatar/yellow-bg",AVATAR_FRAME_YELLOW:"avatar/yellow-frame",AVATAR_BG_YELLOW_SMALL:"avatar/yellow-bg-small",AVATAR_FRAME_YELLOW_SMALL:"avatar/yellow-frame-small",AVATAR_BG_YELLOW_BIG:"avatar/yellow-bg-big",AVATAR_FRAME_YELLOW_BIG:"avatar/yellow-frame-big",THE_CAT:"logo/cat",SAD_CAT:"logo/sad-cat",LOGO_GIFT:"logo/gift",LOGO_GIFT_ADS:"logo/gift-ad",LOGO_GIFT_WHITE:"logo/gift_white",LOGO_DIAMONDS_LIGHT_2:"logo/diamonds-light-2",LOGO_DIAMONDS_LIGHT_3:"logo/diamonds-light-3",LOGO_DIAMONDS_LIGHT_4:"logo/diamonds-light-4",LOGO_DIAMONDS_LIGHT_5:"logo/diamonds-light-5",LOGO_DIAMONDS_LIGHT_6:"logo/diamonds-light-6",LOGO_ADS_DIAMONDS:"logo/ads-diamonds",POPUP_TOP_LEFT:"popup/top-left",POPUP_TOP_MID:"popup/top-middle",POPUP_TOP_RIGHT:"popup/top-right",POPUP_MID_LEFT:"popup/middle-left",POPUP_MID_MID:"popup/middle-middle",POPUP_MID_RIGHT:"popup/middle-right",POPUP_BOTTOM_LEFT:"popup/bottom-left",POPUP_BOTTOM_MID:"popup/bottom-middle",POPUP_BOTTOM_RIGHT:"popup/bottom-right",PROGRESS_BG_LEFT:"progress/bg-left",PROGRESS_BG_MID:"progress/bg-mid",PROGRESS_BG_RIGHT:"progress/bg-right",PROGRESS_BAR_LEFT:"progress/bar-left",PROGRESS_BAR_MID:"progress/bar-mid",PROGRESS_BAR_RIGHT:"progress/bar-right",ICON_DOT:"icons/dot",ICON_CUP:"icons/cup",ICON_GIFT:"icons/gift",ICON_PLUS:"icons/plus",ICON_RANK:"icons/rank",ICON_FLAG:"icons/flag",ICON_CLOCK:"icons/clock",ICON_DAILY:"icons/daily",ICON_ADS:"icons/flat-ad",ICON_CHECK:"icons/check",ICON_CANCEL:"icons/cancel",ICON_SETTING:"icons/setting",ICON_RESUME:"icons/flat-resume",ICON_VIB_ON:"icons/flat-vib-on",ICON_VIB_OFF:"icons/flat-vib-off",ICON_MUSIC_ON:"icons/flat-music-on",ICON_MUSIC_OFF:"icons/flat-music-off",ICON_SOUND_ON:"icons/flat-sound-on",ICON_SOUND_OFF:"icons/flat-sound-off",ICON_FLAT_HOME:"icons/flat-home",ICON_FLAT_RANK:"icons/flat-rank",ICON_FLAT_SHARE:"icons/flat-share",ICON_CROWN:"icons/crown",ICON_CUP_MINI:"icons/cup-mini",ICON_CUP_GOLD:"icons/cup-gold",ICON_CUP_SILVER:"icons/cup-silver",ICON_CUP_COPPER:"icons/cup-bronze",ICON_DIAMOND:"icons/diamond",ICON_DIAMOND_SMALL:"icons/diamond-small",ICON_DIAMOND_GREY:"icons/diamond-grey",ICON_DIAMOND_LIGHT:"icons/diamond-light",BUTTON_CLOSE:"buttons/close",BUTTON_RED_LONG:"buttons/red-long",BUTTON_YELLOW_LONG:"buttons/yellow-long",BUTTON_YELLOW_CIRCLE:"buttons/yellow-circle",BUTTON_BLUE:"buttons/blue",BUTTON_BLUE_SHORT:"buttons/blue-short",BUTTON_BLUE_LONG:"buttons/blue-long",BUTTON_BLUE_CIRCLE:"buttons/blue-circle",BUTTON_GREEN:"buttons/green",BUTTON_GREEN_SHORT:"buttons/green-short",BUTTON_GREEN_LONG:"buttons/green-long",BUTTON_GREEN_MINOR:"buttons/green-minor",BUTTON_GREEN_CIRCLE:"buttons/green-circle",BUTTON_GREEN_MINOR_MINI:"buttons/green-minor-mini",NO_THANK_TEXT:"texts/no-thank",HORIZONTAL_LUCKY_BAR:"lucky-bar/horizontal-lucky-bar",HORIZONTAL_ARROW:"lucky-bar/horizontal-arrow",ARC_LUCKY_BAR:"lucky-bar/arc-lucky-bar",ARC_ARROW:"lucky-bar/arc-arrow"}},EFFECTS:{KEY:"effects-resources",PATH:"./assets/textures/"+a+"x/",JSON:"./assets/textures/"+a+"x/effects-resources.json",FRAME:{BLANK:"blank",FX_COMET:"comet",FX_SPARK:"spark",FX_CIRCLE:"circle",FX_CIRCLE_LIGHT:"circle-light",FX_GLOW_LIGHT:"glow-light",FX_GLOW_SMALL:"glow-small",FX_STAR_WHITE:"star-white",FX_STAR_YELLOW:"star-yellow",TEXT_COOL:"texts/cool",TEXT_GOOD:"texts/good",TEXT_GREAT:"texts/great",TEXT_EXCELLENT:"texts/excellent",TEXT_CONGRATULATION:"texts/congratulation",FX_CONFETTI_SMALL_1:"confetti/small-1",FX_CONFETTI_SMALL_2:"confetti/small-2",FX_CONFETTI_SMALL_3:"confetti/small-3",FX_CONFETTI_SMALL_4:"confetti/small-4",FX_CONFETTI_HEXAGON:"confetti/hexagon-",FX_FIREWORKS_SMALL:"fireworks/small",FX_FIREWORKS_BIG_0:"fireworks/big-explosive-0",FX_FIREWORKS_BIG_1:"fireworks/big-explosive-1",FX_FIREWORKS_SOAR_LINE:"fireworks/soar-line",FX_FIREWORKS_SOAR_CIRCLE:"fireworks/soar-circle",FX_HIGHLIGHT:"fx-items/highlight",FX_PAINT_EXPLOSIVE:"fx-items/paint-explosive-",FX_RED_EXPLOSIVE:"fx-gems/red-explosive-",FX_BLUE_EXPLOSIVE:"fx-gems/blue-explosive-",FX_PINK_EXPLOSIVE:"fx-gems/pink-explosive-",FX_GREEN_EXPLOSIVE:"fx-gems/green-explosive-",FX_YELLOW_EXPLOSIVE:"fx-gems/yellow-explosive-",FX_COLORFUL:"fx-gems/colorful-",FX_COLOR_CHANGE:"fx-gems/color-change-",FX_FREEZE_EXPLOSIVE:"fx-gems/freeze-explosive-",FX_COLORFUL_EXPLOSIVE:"fx-gems/colorful-explosive-",ANIMATION_STAR_X:"star-x/star-",ANIMATION_STAR_Y:"star-y/star-",FX_CONFETTI_RIBBON:"ribbon/ribbon",PREFIX_ANIMATION_RIBBON_CONFETTI_A:"ribbon/falling-confetti/confetti-a/confetti-a-",PREFIX_ANIMATION_RIBBON_CONFETTI_B:"ribbon/falling-confetti/confetti-b/confetti-b-",PREFIX_ANIMATION_RIBBON_CONFETTI_C:"ribbon/falling-confetti/confetti-c/confetti-c-",PREFIX_ANIMATION_RIBBON_CONFETTI_D:"ribbon/falling-confetti/confetti-d/confetti-d-"}},ANIMATION_SCENE:{KEY:"effects-resources",PATH:"./assets/textures/"+a+"x/",JSON:"./assets/textures/"+a+"x/animation-scene-resources.json",FRAME:{BLANK:"blank",COIN:"coins/coin",COIN_SMALL:"coins/coin-small",COIN_SMALL_GREY:"coins/coin-small-grey",ANIMATION_STAR_X:"star-x/star-",ANIMATION_STAR_Y:"star-y/star-",FX_SPARK_YELLOW:"yellow-spark",FX_CONFETTI_RIBBON:"ribbon/ribbon",PREFIX_ANIMATION_RIBBON_CONFETTI_A:"ribbon/falling-confetti/confetti-a/confetti-a-",PREFIX_ANIMATION_RIBBON_CONFETTI_B:"ribbon/falling-confetti/confetti-b/confetti-b-",PREFIX_ANIMATION_RIBBON_CONFETTI_C:"ribbon/falling-confetti/confetti-c/confetti-c-",PREFIX_ANIMATION_RIBBON_CONFETTI_D:"ribbon/falling-confetti/confetti-d/confetti-d-",FX_CONFETTI_SMALL_1:"confetti/small-1",FX_CONFETTI_SMALL_2:"confetti/small-2",FX_CONFETTI_SMALL_3:"confetti/small-3",FX_CONFETTI_SMALL_4:"confetti/small-4",FX_CONFETTI_HEXAGON:"confetti/hexagon-"}},GAMEPLAY:{KEY:"gameplay-resources",TEXTURE:"./assets/textures/"+a+"x/gameplay-resources.png",JSON:"./assets/textures/"+a+"x/gameplay-resources.json",FRAME:{BLANK:"blank",BIG_TOP:"bg-top",BIG_PLAYER:"bg-player",BIG_CIRCLE:"big-circle",BUTTON_PLUS:"buttons/plus",BUTTON_SETTING:"buttons/setting",AVATAR_BLUE_BG:"avatars/bg-blue-mini",AVATAR_BLUE_FRAME:"avatars/frame-blue-mini",PROGRESS_BG_LEFT:"progress/bg-left",PROGRESS_BG_MID:"progress/bg-mid",PROGRESS_BG_RIGHT:"progress/bg-right",PROGRESS_BAR_LEFT:"progress/bar-left",PROGRESS_BAR_MID:"progress/bar-mid",PROGRESS_BAR_RIGHT:"progress/bar-right",ITEM_GIFT:"items/gift",ITEM_PAINT:"items/paint",ITEM_HAMMER:"items/hammer",ITEM_SHUFFLE:"items/shuffle",ITEM_BG_COIN:"items/bg-coin",ITEM_BG_ITEM:"items/bg-item",ICON_PLUS:"icons/plus",ICON_CHECK:"icons/check",ICON_CLOCK:"icons/clock",ICON_DIAMOND:"icons/diamond",ICON_DIAMOND_SMALL:"icons/diamond-small",ICON_CUP_SUPERMINI:"icons/cup-supermini",TILE_RED:"gems/red",TILE_BLUE:"gems/blue",TILE_PINK:"gems/pink",TILE_GREEN:"gems/green",TILE_YELLOW:"gems/yellow",TILE_FREEZE:"gems/freeze",TILE_COLORFUL:"gems/colorful",TILE_COLOR_CHANGE:"gems/change"}},DEMO_SPINE:{KEY:"demo-spine",jsonPATH:"./assets/spines/demo/demo.json",atlasPATH:"./assets/spines/demo/demo.atlas"},LANGUAGES:{KEY:"languages",TEXTURE:"./assets/textures/"+a+"x/languages.png",JSON:"./assets/textures/"+a+"x/languages.json",FRAME:{CHECK:"check",UNCHECK:"uncheck",UNCHECK_GREY:"uncheck-grey"}}};GameCore.Utils.Valid.isDebugger()&&(r.EFFECTS.FRAME=(0,i.Z)({},r.ANIMATION_SCENE.FRAME,r.EFFECTS.FRAME)),t.Z=r},657:function(e,t,n){"use strict";n.d(t,{C:function(){return a},K:function(){return r}});var i=n(36),a={BOOT_SCENE:"BOOT_SCENE",LOAD_SCENE:"LOAD_SCENE",GAME_SCENE:"GAME_SCENE",GLOBAL_SCENE:"GLOBAL_SCENE",DASHBOARD_SCENE:"DASHBOARD_SCENE",GAME_OVER_SCENE:"GAME_OVER_SCENE",LEADERBOARD_SCENE:"LEADERBOARD_SCENE",RESULT_MATCH_SCENE:"RESULT_MATCH_SCENE",TEST_SCENE:"TEST_SCENE",ANIMATIONS_SCENE:"ANIMATIONS_SCENE"},r={SWITCH:n.n(i)()("SWITCH")}},660:function(e,t,n){"use strict";n.d(t,{o4:function(){return i},Ks:function(){return a}});var i={PAUSE_SCREEN:"PAUSE_SCREEN",NOTIFY_SCREEN:"NOTIFY_SCREEN",REWARD_SCREEN:"REWARD_SCREEN",RESCUE_SCREEN:"RESCUE_SCREEN",SETTINGS_SCREEN:"SETTINGS_SCREEN",BEST_SCORE_SCREEN:"BEST_SCORE_SCREEN",DAILY_REWARD_SCREEN:"DAILY_REWARD_SCREEN",DAILY_MISSIONS_SCREEN:"DAILY_MISSIONS_SCREEN",LUCKY_REWARD_SCREEN:"LUCKY_REWARD_SCREEN",NO_MORE_MOVES_SCREEN:"NO_MORE_MOVES_SCREEN",VICTORY_SCREEN:"VICTORY_SCREEN",PLAY_SCREEN:"PLAY_SCREEN",GAME_STATS_SCREEN:"GAME_STATS_SCREEN",LANGUAGES_SCREEN:"LANGUAGES_SCREEN",THEME_SCREEN:"THEME_SCREEN",HOW_TO_PLAY_SCREEN:"HOW_TO_PLAY_SCREEN",AWESOME_SCREEN:"AWESOME_SCREEN",NOTIFICATION_SCREEN:"NOTIFICATION_SCREEN",TOURNAMENTS_SCREEN:"TOURNAMENTS_SCREEN",PLAY_WITH_FRIEND_GAME_OVER_SCREEN:"PLAY_WITH_FRIEND_GAME_OVER_SCREEN",TOURNAMENTS_RESULT_SCREEN:"TOURNAMENT_RESULT_SCREEN",WELL_DONE_SCREEN:"WELL_DONE_SCREEN"},a={SCREEN:200,POPUP:300,PRIORITY:999}},658:function(e,t){"use strict";t.Z={BUTTON_CLICK:"button_click",POPUP_OFF:"popup_out",POPUP_SHOW:"popup_in",AUTO_COMPLETE:"auto_complete",CARD_MOVE:"card_move",FINISH_1:"finish1",FINISH_2:"finish2",FINISH_3:"finish3",FINISH_4:"finish4",FINISH_5:"finish5",FINISH_6:"finish6",FINISH_7:"finish7",FINISH_8:"finish8",FINISH_9:"finish9",FINISH_10:"finish10",FINISH_11:"finish11",FINISH_12:"finish12",FINISH_13:"finish13",HINT:"hint",NO_MOVE:"no_move",SHUFFLE:"shuffle",UNDO:"undo",WON:"won",DIAMONDS_EAT:"",FIREWORKS_SOAR:"",FIREWORKS_BIG:"",FIREWORKS_SMALL:"",DAILY_REWARD:"",GAME_OVER_SCENE:"",SCORE_COUNTER:"",CONGRATULATION:"",YOU_WIN:"",YOU_LOSE:"",GIFT_CHARGE:"",GIFT_REVEAL:"",GIFT_EXPLODE:""}},684:function(e,t,n){"use strict";var i=n(637),a=n(632),r=n(655).Z.EFFECTS,s=r.KEY,o=r.FRAME,c=function(e){function t(t){var n;return(n=e.call(this,t)||this).halo=void 0,n.star=void 0,n.createStar(),n.createHalo(),n.scene.add.existing((0,i.Z)(n)),n}(0,a.Z)(t,e);var n=t.prototype;return n.run=function(){this.runStarAnimation(),this.runHaloAnimation()},n.createStar=function(){this.star=this.scene.make.image({key:s,frame:o.FX_STAR_YELLOW,visible:!1}),this.star.setWorldSize(35,35),this.add(this.star)},n.createHalo=function(){this.halo=this.scene.make.image({key:s,frame:o.FX_CIRCLE,visible:!1}),this.halo.setWorldSize(162,162),this.add(this.halo)},n.runStarAnimation=function(){var e=this;this.scene.tweens.killTweensOf(this.star),this.star.setVisible(!0);var t=1/GameCore.Utils.Image.getImageScale();this.scene.tweens.add({targets:[this.star],duration:400,ease:Phaser.Math.Easing.Quintic.Out,props:{scaleX:{start:16*t,to:0},scaleY:{start:10*t,to:0}},onComplete:function(){e.star.setVisible(!1)}})},n.runHaloAnimation=function(){var e=this;this.scene.tweens.killTweensOf(this.halo),this.halo.setScale(0),this.halo.setVisible(!0),this.scene.tweens.add({targets:[this.halo],duration:200,ease:Phaser.Math.Easing.Cubic.Out,props:{scale:{from:0,to:8},alpha:{from:1,to:0}},onComplete:function(){e.halo.setVisible(!1)}})},t}(Phaser.GameObjects.Container);t.Z=c},677:function(e,t,n){"use strict";var i=n(637),a=n(632),r=n(655),s=n(623),o=r.Z.EFFECTS,c=o.KEY,l=o.FRAME,u=function(e){function t(t,n){var a;return(a=e.call(this,t,c,l.BLANK)||this).config=void 0,a.emitter=void 0,a.config=n||{},a.scene.add.existing((0,i.Z)(a)),a}(0,a.Z)(t,e);var n=t.prototype;return n.createEmitters=function(){var e=l.FX_CONFETTI_SMALL_1,t=l.FX_CONFETTI_SMALL_2,n=l.FX_CONFETTI_SMALL_3,i=l.FX_CONFETTI_SMALL_4,a=1/GameCore.Utils.Image.getImageScale(),r={on:!1,particleBringToTop:!0,frame:[e,t,n,i],tint:[14223402,1021804,5420529,16702052],timeScale:1,frequency:400,maxParticles:120,gravityY:-10,speedX:{min:-100,max:100},speedY:{min:80,max:250},alpha:{start:1,end:0,ease:Phaser.Math.Easing.Expo.In},rotate:{start:0,end:1080},scale:{min:.8*a,max:2*a},angle:{min:20,max:160},lifespan:{min:8e3,max:12e3}},o=(0,s.TS)(r,this.config);this.emitter=this.createEmitter(o)},n.run=function(e,t,n){this.stop(),this.emitter.setQuantity(e),this.emitter.setPosition(t,n),this.emitter.start()},n.explode=function(e,t,n){this.emitter||this.createEmitters(),this.emitter.explode(e,t,n)},n.stop=function(){var e,t,n;null==(e=this.emitter)||e.killAll(),null==(t=this.emitter)||t.stop(),null==(n=this.emitter)||n.remove(),this.createEmitters()},t}(Phaser.GameObjects.Particles.ParticleEmitterManager);t.Z=u},681:function(e,t,n){"use strict";var i=n(637),a=n(632),r=n(655).Z.EFFECTS,s=r.KEY,o=r.FRAME,c=function(e){function t(t){var n;return(n=e.call(this,t,s,o.FX_STAR_YELLOW)||this).emitZone=void 0,n.emitter=void 0,n.createEmitZone(),n.scene.add.existing((0,i.Z)(n)),n}(0,a.Z)(t,e);var n=t.prototype;return n.createEmitZone=function(){this.emitZone=new Phaser.Geom.Rectangle},n.createEmitters=function(){var e=1/GameCore.Utils.Image.getImageScale();this.emitter=this.createEmitter({on:!1,frame:o.FX_STAR_YELLOW,emitZone:{source:this.emitZone,type:"random"},timeScale:1,frequency:100,alpha:{start:1,end:0,ease:Phaser.Math.Easing.Expo.Out},scale:{start:1*e,end:0,ease:Phaser.Math.Easing.Expo.Out},lifespan:{min:800,max:1500}})},n.run=function(e,t,n,i,a){this.stop(),this.reset(),this.emitZone.setSize(i,a),this.emitZone.setPosition(t-i/2,n-a/2),this.emitter.setQuantity(e),this.emitter.start()},n.stop=function(){var e,t;null==(e=this.emitter)||e.killAll(),null==(t=this.emitter)||t.stop()},n.reset=function(){this.createEmitters()},t}(Phaser.GameObjects.Particles.ParticleEmitterManager);t.Z=c},672:function(e,t,n){"use strict";var i=n(124),a=n.n(i);t.Z=function(e){var t=[];return e.split("").forEach((function(e){var n=e.charCodeAt(0);n>=97&&n<=107&&t.push(n-97)})),a()(t.join(""))}},671:function(e,t,n){"use strict";n.d(t,{Z:function(){return o}});var i=n(632),a=n(641),r=function(e){function t(t,n,i){var a;return(a=e.call(this,t,0,0,n,i)||this).setOrigin(0,0),a}return(0,i.Z)(t,e),t}(Phaser.GameObjects.Zone),s=n(652),o=function(e){function t(){var t;return(t=e.call(this,{visible:!1})||this).unsubscribeList=void 0,t.gameZone=void 0,t.background=void 0,t.handleOpenScene=function(){t.logPageviewOnOpen(),t.logEventOpen()},t.handleResize=function(){if(t.background&&t.gameZone){var e=t.world.getResizeEventData(),n=e.width,i=e.height;t.gameZone.setSize(n,i),t.background.setPosition(n/2,i/2),t.background.setDisplaySize(n,i)}},t.removeStateChange=function(){t.unsubscribeList.forEach((function(e){return e()}))},t}(0,i.Z)(t,e);var n=t.prototype;return n.create=function(){this.events.on("wake",this.handleOpenScene),this.events.on("resume",this.handleOpenScene),this.events.on("create",this.handleOpenScene),this.world.events.on(s.Z.RESIZE,this.handleResize),this.scaleGame(),this.createGameZone()},n.scaleGame=function(){var e=this.getCamera("main"),t=this.world.getZoomRatio(),n=this.world.getWorldSize(),i=n.width,a=n.height;e.setZoom(t),e.centerOn(i/2,a/2)},n.createGameZone=function(){var e=this.world.getWorldSize(),t=e.width,n=e.height;this.gameZone=new r(this,t,n)},n.getCamera=function(e){return"main"===e?this.cameras.main:this.cameras.getCamera(e)},n.createMask=function(e){void 0===e&&(e=1),this.getCamera("main").setBackgroundColor("rgba(0, 0, 0, "+e+")")},n.fontSize=function(e){return Math.round(e/1.01)},n.createBackground=function(e,t,n,i){this.background?(this.background.setTexture(e),t&&this.background.setFrame(t)):this.background=this.make.image({key:e,frame:t}),this.background.setName(e);var a=this.gameZone,r=a.displayWidth,s=a.displayHeight;this.background.setDisplaySize(r,s),this.world.isLandscape()&&this.background.setScale(this.background.scaleY,this.background.scaleY),GameCore.Utils.Valid.isNumber(n)&&this.background.setAlpha(n),GameCore.Utils.Valid.isNumber(i)&&this.background.setTint(i),Phaser.Display.Align.In.Center(this.background,this.gameZone)},n.handleStateChange=function(e){var t=this;this.unsubscribeList=[],e.forEach((function(e){var n=e.selector,i=e.callback,a=t.storage.watch(n,i);t.unsubscribeList.push(a)})),this.events.once("sleep",this.removeStateChange),this.events.once("destroy",this.removeStateChange),this.events.once("shutdown",this.removeStateChange)},n.logPageviewOnOpen=function(){this.analytics.pageview(this.scene.key)},n.logEventOpen=function(){this.analytics.event(a._.SCREEN_OPEN,{screen_name:this.getSceneName()})},n.getSceneName=function(){return GameCore.Utils.String.toUpperCamelCase(this.scene.key.toLowerCase())},t}(Phaser.Scene)},654:function(e,t,n){"use strict";var i,a=n(23),r=n.n(a),s=n(20),o=n.n(s),c=n(13),l=n.n(c),u=n(29),h=n.n(u),d=n(36),f=n.n(d),p=n(38),g=n.n(p);function m(e,t){var n="undefined"!==typeof f()&&g()(e)||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){var n;if(!e)return;if("string"===typeof e)return v(e,t);var i=l()(n=Object.prototype.toString.call(e)).call(n,8,-1);"Object"===i&&e.constructor&&(i=e.constructor.name);if("Map"===i||"Set"===i)return h()(e);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return v(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var i=0;return function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function v(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var y=function(){function e(){}return e.registerObject=function(t){var n;r()(n=e.objects).call(n,t)||e.objects.push(t)},e.removeObject=function(t){var n;e.objects=o()(n=e.objects).call(n,(function(e){return e!==t}))},e.openScreen=function(t,n){e.openingScreens.push({screen:t,grayscale:n})},e.closeScreen=function(t){var n;e.openingScreens=o()(n=e.openingScreens).call(n,(function(e){return e.screen!==t}))},e.updateGrayScale=function(){var t=e.openingScreens,n=!1;t.length>0&&(n=t[t.length-1].grayscale),n!=this.previousGrayscale&&(this.previousGrayscale=n,this.setGrayScaleForAppBg(n))},e.setGrayScaleForAppBg=function(e){if(window.game.world.isLandscape()){var t=document.getElementById("app-bg");t&&(t.style.filter=e?"grayscale(0.8)":"")}},e.updateAppBg=function(e){if(window.game.world.isLandscape()){var t=document.getElementById("app-bg");t&&(t.style.backgroundImage="url("+e+")")}},e}();i=y,y.objects=[],y.openingScreens=[],y.currentAlpha=0,y.updateBgMask=function(){i.updateGrayScale();for(var e,t=1,n=m(i.objects);!(e=n()).done;){var a=e.value,r=a.scene;r&&r.scene.isActive(r.scene.key)&&(a.parentContainer?a.parentContainer.visible&&a.visible&&(t*=1-a.alpha*a.parentContainer.alpha):a.visible&&(t*=1-a.alpha))}var s=1-t;i.currentAlpha!=s&&(i.currentAlpha=s,function(e){var t=document.getElementById("app-mask-left");t&&(t.style.background="rgb(20 20 22 / "+e+")",t.style.width="calc(50% - "+Math.ceil(window.game.canvas.clientWidth/2)+"px)");var n=document.getElementById("app-mask-right");n&&(n.style.background="rgb(20 20 22 / "+e+")",n.style.width="calc(50% - "+Math.floor(window.game.canvas.clientWidth/2)+"px)")}(s))},y.previousGrayscale=!1,t.Z=y},680:function(e,t,n){"use strict";var i=n(637),a=n(632),r=n(663),s=n(21),o=n(674),c=n(660),l=n(655),u=n(678),h=n(641),d=l.Z.HOW_TO_PLAY,f=l.Z.GAMEPLAY_DEFAULT,p=[{description:"firstTutor",frame:"how_to_play_1"},{description:"secondTutor",frame:"how_to_play_2"},{description:"thirdTutor",frame:"how_to_play_3"},{description:"fourthTutor",frame:"how_to_play_4"}],g=function(e){function t(t){var n;return(n=e.call(this,t)||this).bg=void 0,n.stepBtnText=void 0,n.currentStep=void 0,n.stepContainers=void 0,n.handleNextStep=function(){n.currentStep==p.length-1?(n.scene.screen.close(c.o4.HOW_TO_PLAY_SCREEN),n.scene.analytics.event(h._.TUTORIAL_COMPLETE)):(n.selectStep(n.currentStep+1),n.scene.analytics.event(h._.TUTORIAL_STEP,{step:n.currentStep}))},n.currentStep=0,n.createBackground(),n.createContent(),n.createGetStartedButton(),n.createCloseButton(),n.selectStep(0),t.add.existing((0,i.Z)(n)),n}(0,a.Z)(t,e);var n=t.prototype;return n.selectStep=function(e){e>=p.length&&(e=p.length-1),e==p.length-1?this.stepBtnText.setText("done"):this.stepBtnText.setText("next"),this.stepContainers.forEach((function(e){return e.kill()})),this.stepContainers[e].revive(),this.currentStep=e},n.createBackground=function(){var e=new s.Z(this.scene,0,0,340,460,20,16579837),t=this.scene.add.line(0,0,0,0,e.width,0,3774208);t.setLineWidth(.5),Phaser.Display.Align.In.TopCenter(t,e,0,-60),this.add([e,t]),this.bg=e,this.setSize(e.width,e.height)},n.createContent=function(){var e=this.scene.make.bitmapText({font:r.Z.BOLD.KEY,size:this.scene.fontSize(20),text:"howToPlay",origin:{x:.5,y:.5}});e.setTint(1907997),this.add(e),Phaser.Display.Align.In.TopCenter(e,this,0,-20),this.stepContainers=[];for(var t=0;t<p.length;t++){var n=p[t],i=n.description,a=n.frame,s=this.createStepContainer(t,i,a);this.stepContainers.push(s),Phaser.Display.Align.In.TopCenter(s,this,0,-75)}this.add(this.stepContainers)},n.createStepContainer=function(e,t,n){var i=this.scene.add.container();i.setSize(300,270);var a=this.scene.make.bitmapText({font:r.Z.PRIMARY.KEY,size:this.scene.fontSize(14),text:t,origin:{x:.5,y:.5}});a.setMaxSize(310,80),a.setTint(1907997),a.setCenterAlign();var s=this.scene.add.image(0,0,d.KEY,n);if(s.setWorldSize(300,200),i.add([a,s]),Phaser.Display.Align.In.TopCenter(a,i,0,-5),Phaser.Display.Align.In.BottomCenter(s,i,0,20),0===e){var o=this.scene.make.bitmapText({font:r.Z.BOLD.KEY,size:this.scene.fontSize(14),text:"foundations",origin:{x:.5,y:.5}});i.add([o]),Phaser.Display.Align.In.Center(o,s,60,-15)}if(2===e){var c=this.scene.make.bitmapText({font:r.Z.BOLD.KEY,size:this.scene.fontSize(14),text:"freecells",origin:{x:.5,y:.5}});i.add([c]),Phaser.Display.Align.In.Center(c,s,-60,-22)}return i},n.createGetStartedButton=function(){var e=new u.Z(this.scene,192,40,16,3774208);e.setName("GetStated"),e.onClick=this.handleNextStep;var t=this.scene.make.bitmapText({font:r.Z.BOLD.KEY,size:this.scene.fontSize(16),text:"Next",origin:{x:.5,y:.5}});t.setTint(16579837),e.add([t]),Phaser.Display.Align.In.BottomCenter(e,this.bg,0,-20),this.add([e]),this.stepBtnText=t},n.createCloseButton=function(){var e=this,t=new o.Z(this.scene,40,40);t.setName("Close"),t.onClick=function(){e.scene.screen.close(c.o4.HOW_TO_PLAY_SCREEN),e.scene.analytics.event(h._.TUTORIAL_COMPLETE)};var n=this.scene.add.image(0,0,f.KEY,"ic_close");n.setWorldSize(30,30),n.setTint(8750210),t.add(n),Phaser.Display.Align.In.TopRight(t,this.bg,-6,-9),this.add([t])},t}(Phaser.GameObjects.Container);t.Z=g},664:function(e,t,n){"use strict";n.d(t,{Z:function(){return B}});var i=n(638),a=n(632),r=n(3),s=n.n(r),o=n(669),c=n(670),l=n(655),u=n(657),h=n(660),d=n(659),f=(0,n(651).P1)([function(e){return e.scene.currentSceneKey}],(function(e){return e})),p=n(635),g=n(671),m=n(637),v=n(663),y=n(656),b=l.Z.DEFAULT,A=b.KEY,E=b.FRAME,S=function(e){function t(t){var n;return(n=e.call(this,t,0,0)||this).fps=0,n.fpsString="FPS: %1",n.fpsText=void 0,n.background=void 0,n.lastUpdate=void 0,n.update=function(e){if(!(e-n.lastUpdate<800)){n.lastUpdate=e;var t=Math.floor(n.scene.game.loop.actualFps);n.setFps(t)}},n.createFps(),n.setDepth(y.Z.DEBUG),n.scene.add.existing((0,m.Z)(n)),n.scene.events.on(Phaser.Scenes.Events.UPDATE,n.update),n}(0,a.Z)(t,e);var n=t.prototype;return n.setFps=function(e){this.fps=e;var t=Phaser.Utils.String.Format(this.fpsString,[e]);this.fpsText.setText(t)},n.createFps=function(){this.background=this.scene.make.image({key:A,frame:E.BLANK}),this.background.setName("BG"),this.background.setTint(13801480),this.background.setWorldSize(45,25),this.fpsText=this.scene.make.bitmapText({size:this.scene.fontSize(14),text:this.fpsString,font:v.Z.PRIMARY.KEY,origin:{x:.5,y:.5}}),this.fpsText.setName("FPS Meter"),Phaser.Display.Align.In.Center(this.fpsText,this.background),this.add([this.background,this.fpsText]),this.setFps(0)},t}(Phaser.GameObjects.Container),T=S,w=function(e){function t(t){var n;if((n=e.call(this,t,0,0)||this).performance=void 0,n.memory=0,n.maxMemoryLimit=void 0,n.maxPercentThreshold=void 0,n.normalColor=3459162,n.warningColor=16768343,n.alarmColor=15812200,n.memoryString="Memory: %1MB / %2MB",n.memoryText=void 0,n.lastUpdate=void 0,n.update=function(e){if(!(e-n.lastUpdate<1e3)){n.lastUpdate=e;var t=n.performance.memory.usedJSHeapSize,i=1048576*n.maxMemoryLimit,a=Math.round(t/1048576);n.setMemory(a),n.memoryText.setTint(n.normalColor),t>n.maxPercentThreshold/100*i&&n.memoryText.setTint(n.warningColor),t>i&&n.memoryText.setTint(n.alarmColor)}},n.performance=window.performance,n.createMemory(),n.setDepth(y.Z.DEBUG),n.scene.add.existing((0,m.Z)(n)),!n.isSupport())return n.memoryText.setText("Memory: not supported!"),(0,m.Z)(n);var i=n.performance.memory.jsHeapSizeLimit;return n.maxPercentThreshold=90,n.setMaxMemory(i/1048576),n.scene.events.on(Phaser.Scenes.Events.UPDATE,n.update),n}(0,a.Z)(t,e);var n=t.prototype;return n.isSupport=function(){var e;return this.performance&&!(null==(e=this.performance)||!e.memory)},n.setMaxMemory=function(e){this.maxMemoryLimit=Math.round(e)},n.setMemory=function(e){this.memory=e;var t=Phaser.Utils.String.Format(this.memoryString,[e,this.maxMemoryLimit]);this.memoryText.setText(t)},n.createMemory=function(){this.memoryText=this.scene.make.bitmapText({size:this.scene.fontSize(14),text:this.memoryString,font:v.Z.PRIMARY.KEY,depth:2e3}),this.memoryText.setName("Memory Meter"),this.add(this.memoryText),this.setMemory(0)},t}(Phaser.GameObjects.Container),C=w,I=n(666),x=n(665),P=function(e){function t(t,n,i,a){var r;return(r=e.call(this,t,n,i,a)||this).loadingIcon=void 0,r.messageText=void 0,r.openAnimation=void 0,r.closeTimerEvent=void 0,r.addLoadingIcon(),r.addMessageText(),r.setDepth(h.Ks.PRIORITY),r.background.setAlpha(.5),r.background.setTint(1315862),r}(0,a.Z)(t,e);var n=t.prototype;return n.open=function(t){var n,i=this;e.prototype.open.call(this,t);var a=this.getData(["message","duration","loading"]),r=a[0],s=void 0===r?"":r,o=a[1],c=void 0===o?0:o,l=a[2],u=void 0!==l&&l;this.setMessage(s),this.showLoading(u),null==(n=this.closeTimerEvent)||n.remove(),c>0&&(this.closeTimerEvent=this.scene.time.addEvent({delay:c,callback:function(){i.visible&&i.scene.screen.close(i.name)}})),this.runOpenAnimation()},n.addLoadingIcon=function(){this.loadingIcon=new x.Z(this.scene),this.add(this.loadingIcon),Phaser.Display.Align.In.Center(this.loadingIcon,this.zone)},n.addMessageText=function(){this.messageText=this.scene.make.bitmapText({size:this.scene.fontSize(15),font:v.Z.PRIMARY.KEY,origin:{x:.5,y:.5}}),this.messageText.setCenterAlign(),this.add(this.messageText)},n.setMessage=function(e){this.messageText.setText(e)},n.showLoading=function(e){this.loadingIcon.setVisible(e);var t=!1===e?10:40;Phaser.Display.Align.In.Center(this.messageText,this.zone,0,t)},n.runOpenAnimation=function(){var e,t;null==(e=this.openAnimation)||e.stop(),null==(t=this.openAnimation)||t.remove(),this.openAnimation=new I.Z({targets:[this.messageText,this.loadingIcon],props:{scale:{getStart:function(e){return e.scale-.3},getEnd:function(e){return e.scale}}}}),this.openAnimation.play()},n.logPageviewOnOpen=function(){},n.logPageviewOnClose=function(){},t}(GameCore.Screen),k=P,_=n(654),O=l.Z.DEFAULT,R=O.KEY,L=O.FRAME,D=function(e){function t(){for(var t,n,i=arguments.length,a=new Array(i),r=0;r<i;r++)a[r]=arguments[r];return(n=e.call.apply(e,s()(t=[this]).call(t,a))||this).mask=void 0,n.fadeInAnim=void 0,n.fadeOutAnim=void 0,n.fpsMeter=void 0,n.memoryMeter=void 0,n.switchScene=function(e){n.currentScene.switch(e)},n.emitGameEventStartScene=function(e){var t=e.scene.key;console.info("%cScene start","color: #D27D2D",t),n.updateSceneState(),n.runMaskFadeOutAnimation(),n.updateActiveSceneKey(t),n.game.events.emit(Phaser.Scenes.Events.START,t),(0,p.sw)("scene","Start scene: "+t)},n.emitGameEventSleepScene=function(e){var t=e.scene.scene.key;console.info("%cScene sleep","color: #D27D2D",t),t!==u.C.LOAD_SCENE&&(n.runMaskFadeInAnimation(),n.game.events.emit(Phaser.Scenes.Events.SLEEP,t))},n.emitGameEventWakeScene=function(e){var t=e.scene.scene.key;console.info("%cScene wake","color: #D27D2D",t),t!==u.C.LOAD_SCENE&&(n.updateSceneState(),n.runMaskFadeOutAnimation(),n.updateActiveSceneKey(t),n.game.events.emit(Phaser.Scenes.Events.WAKE,t))},n.emitGameEventPauseScene=function(e){var t=e.scene.scene.key;console.info("%cScene pause","color: #D27D2D",t),n.game.events.emit(Phaser.Scenes.Events.PAUSE,t)},n.emitGameEventResumeScene=function(e){var t=e.scene.key;console.info("%cScene resume","color: #D27D2D",t),n.game.events.emit(Phaser.Scenes.Events.RESUME,t)},n.emitGameEventShutdownScene=function(e){var t=e.scene.scene.key;console.info("%cScene shutdown","color: #D27D2D",t),n.game.events.emit(Phaser.Scenes.Events.SHUTDOWN,t)},n}(0,a.Z)(t,e);var n=t.prototype;return n.init=function(){this.listenScenesEvents(),this.game.globalScene=this},n.setup=function(){this.scaleGame(),this.addMask(),this.addNotifyScreen(),this.addFPS(),this.addMemory(),this.showBackground()},n.addNotifyScreen=function(){var e=this.screen.add(h.o4.NOTIFY_SCREEN,k);Phaser.Display.Align.In.Center(e,this.gameZone)},n.addMask=function(){this.mask=this.make.image({key:R,frame:L.BLANK});var e=this.gameZone,t=e.width,n=e.height;this.mask.setAlpha(0),this.mask.setOrigin(0,0),this.mask.setTint(859421),this.mask.setWorldSize(t,n)},n.addFPS=function(){GameCore.Configs.Statistics.ShowFPSInGame&&(this.fpsMeter=new T(this),Phaser.Display.Align.In.TopLeft(this.fpsMeter,this.gameZone,-20,-10))},n.addMemory=function(){GameCore.Configs.Statistics.ShowMemoryInGame&&(this.memoryMeter=new C(this),Phaser.Display.Align.In.TopLeft(this.memoryMeter,this.gameZone,-45,-3))},n.updateSceneState=function(){this.setGlobalSceneOnTop()},n.setGlobalSceneOnTop=function(){this.scene.bringToTop(this)},n.runMaskFadeInAnimation=function(){var e,t;this.mask&&GameCore.Configs.EnableEffectSceneTransition&&(null==(e=this.fadeInAnim)||e.remove(),null==(t=this.fadeOutAnim)||t.remove(),this.fadeInAnim=new o.Z({targets:[this.mask],duration:400,ease:Phaser.Math.Easing.Cubic.In,props:{alpha:{start:0,from:0,to:.6}}}),this.mask.setAlpha(0),this.fadeInAnim.play())},n.runMaskFadeOutAnimation=function(){var e,t;this.mask&&GameCore.Configs.EnableEffectSceneTransition&&(null==(e=this.fadeInAnim)||e.remove(),null==(t=this.fadeOutAnim)||t.remove(),this.fadeOutAnim=new c.Z({targets:[this.mask],duration:400,ease:Phaser.Math.Easing.Cubic.Out,props:{alpha:{start:.6,from:.6,to:0}}}),this.mask.setAlpha(1),this.fadeOutAnim.play())},n.listenScenesEvents=function(){var e=this;this.scene.manager.getScenes(!1).forEach((function(t){t.events.on(Phaser.Scenes.Events.CREATE,e.emitGameEventStartScene),t.events.on(Phaser.Scenes.Events.SLEEP,e.emitGameEventSleepScene),t.events.on(Phaser.Scenes.Events.WAKE,e.emitGameEventWakeScene),t.events.on(Phaser.Scenes.Events.PAUSE,e.emitGameEventPauseScene),t.events.on(Phaser.Scenes.Events.RESUME,e.emitGameEventResumeScene),t.events.on(Phaser.Scenes.Events.SHUTDOWN,e.emitGameEventShutdownScene)})),this.events.on(u.K.SWITCH,this.switchScene),this.world.isLandscape()&&this.events.on(Phaser.Scenes.Events.RENDER,_.Z.updateBgMask)},n.getActiveScene=function(){return this.scene.manager.getScenes(!0)[0]},n.getCurrentScene=function(){return this.currentScene},n.updateActiveSceneKey=function(e){e!==u.C.GLOBAL_SCENE&&this.storage.dispatch((0,d.I)(e))},n.logEventOpen=function(){},n.logPageviewOnOpen=function(){},n.showBackground=function(){var e=this.theme.getCurrentThemeConfig().backgroundKey;this.createBackground(e);var t=this.theme.getCurrentThemeResources();_.Z.updateAppBg(t.backgroundFile)},n.hideBackground=function(){this.background.kill()},(0,i.Z)(t,[{key:"currentScene",get:function(){var e=this.storage.getState(),t=f(e);return(t?this.scene.manager.getScene(t):this.getActiveScene()).scene}}]),t}(g.Z),B=D},556:function(e,t,n){"use strict";var i=n(635),a=n(636),r=n(624),s=n(627),o=n(632),c=n(2),l=n.n(c),u=n(1),h=n.n(u),d=n(639),f=0,p=0,g=function(){function e(e){this.game=void 0,this.progressFbTimeEvent=void 0,this.game=e}var t=e.prototype;return t.loadingProgressFbBootScene=function(){var e=this,t=100;p=30;!function n(){t<=0?clearTimeout(e.progressFbTimeEvent):e.progressFbTimeEvent=setTimeout((function(){e.game.facebook.setLoadingProgress(Math.round(p)),p+=30/t,t--,n()}),50)}()},t.finishLoadingProgressFbBootScene=function(){clearTimeout(this.progressFbTimeEvent)},t.loadingProgressFbLoadScene=function(){var e=this;(!p||p<30)&&(p=60),f=p;!function t(){e.progressFbTimeEvent=setTimeout((function(){e.game.facebook.setLoadingProgress(Math.round(p)),p+=.1,t()}),50)}()},t.onProgress=function(e){var t=100-p,n=Math.round(e*t+p);n>f&&clearTimeout(this.progressFbTimeEvent),this.game.facebook.setLoadingProgress(n)},e}(),m=n(112),v=n.n(m);function y(e,t){if(1==t.length)return t[0].color;e=Phaser.Math.Clamp(e,0,1);for(var n=t[0].color,i=0;i<t.length-1;i++){var a=t[i],r=t[i+1];if(e>=a.at&&e<=r.at){var s=Phaser.Display.Color.IntegerToColor(a.color),o=Phaser.Display.Color.IntegerToColor(r.color),c=Phaser.Display.Color.Interpolate.ColorWithColor(s,o,100,100*e);return Phaser.Display.Color.GetColor(c.r,c.g,c.b)}a.at,n=a.color}return n}var b=function(){function e(e){this.game=void 0,this.game=e}var t=e.prototype;return t.addCropByViewport=function(){var e=this;[Phaser.GameObjects.Image,Phaser.GameObjects.RenderTexture].forEach((function(t){t.prototype.setCropByViewport=e.setCropByViewport}))},t.addKillRevive=function(){var e=this;[Phaser.GameObjects.Container,Phaser.GameObjects.Image,Phaser.GameObjects.Sprite,Phaser.GameObjects.Graphics,Phaser.GameObjects.Text,Phaser.GameObjects.BitmapText,Phaser.GameObjects.Particles.ParticleEmitter,Phaser.GameObjects.Particles.ParticleEmitterManager,Phaser.GameObjects.Rectangle,Phaser.GameObjects.Shape].forEach((function(t){t.prototype.kill=e.kill,t.prototype.revive=e.revive}))},t.addKillReviveGroup=function(){Phaser.GameObjects.Group.prototype.killGroup=this.killGroup,Phaser.GameObjects.Group.prototype.reviveGroup=this.reviveGroup},t.addSetWorldSize=function(){var e=this;[Phaser.GameObjects.Image,Phaser.GameObjects.Sprite].forEach((function(t){t.prototype.setWorldSize=e.setWorldSize}))},t.addSetWorldSizeForContainer=function(){var e=this;[Phaser.GameObjects.Container].forEach((function(t){t.prototype.setWorldSize=e.setWorldSizeForContainer}))},t.addGetWorldPosition=function(){var e=this;[Phaser.GameObjects.Container,Phaser.GameObjects.Image,Phaser.GameObjects.Sprite,Phaser.GameObjects.Graphics,Phaser.GameObjects.Text,Phaser.GameObjects.BitmapText].forEach((function(t){t.prototype.getWorldPosition=e.getWorldPosition}))},t.addDrawDebugBox=function(){var e=this;[Phaser.GameObjects.Container,Phaser.GameObjects.Image,Phaser.GameObjects.Sprite,Phaser.GameObjects.Graphics,Phaser.GameObjects.Text,Phaser.GameObjects.BitmapText,Phaser.GameObjects.Zone].forEach((function(t){t.prototype.drawDebugBox=e.drawDebugBox}))},t.addHighQuality=function(){var e=this;[Phaser.GameObjects.Text].forEach((function(t){t.prototype.setHighQuality=e.setHighQuality}))},t.addGradientHorizontalTint=function(){var e=this;[Phaser.GameObjects.BitmapText].forEach((function(t){t.prototype.setGradientHorizontalTint=e.setGradientHorizontalTint,t.prototype.setGradientVerticalTint=e.setGradientVerticalTint,t.prototype.clearGradientTint=e.clearGradientTint}))},t.addRadius=function(){var e=this;[Phaser.GameObjects.BitmapText].forEach((function(t){v()(t.prototype,"radius",{set:function(e){this._radius=e,this._dirty=!0},get:function(){return this._radius}}),t.prototype.setRadius=e.setRadius,t.prototype.clearRadius=e.clearRadius,t.prototype._originalGetTextBounds=t.prototype.getTextBounds,t.prototype.getTextBounds=e.getTextBounds}))},t.addSetLineHeightForBitmapText=function(){Phaser.GameObjects.BitmapText.prototype.setLineHeight=function(e){this.lineHeight=e,this.updateDisplayOrigin()}},t.kill=function(){this.setActive(!1),this.setVisible(!1)},t.revive=function(){this.setActive(!0),this.setVisible(!0)},t.killGroup=function(){this.getChildren().forEach((function(e){e.setActive(!1),e.setVisible(!1)}))},t.reviveGroup=function(){this.getChildren().forEach((function(e){e.setActive(!0),e.setVisible(!0)}))},t.setCropByViewport=function(e){var t=e.x,n=e.y,i=e.width,a=e.height,r=this.scaleX,s=this.scaleY,o=this.displayWidth,c=this.displayHeight,l=this.getWorldPosition(),u=l.x,h=l.y,d=t-i/2,f=u-o/2,p=t+i/2,g=u+o/2,m=n-a/2,v=h-c/2,y=n+a/2,b=h+c/2,A={x:0,y:0,width:this.width/r,height:this.height/s};f<d&&(A.x=(d-f)/r),g>p&&(A.width-=A.x+(g-p)/r),v<m&&(A.y=(m-v)/s),b>y&&(A.height-=A.y+(b-y)/s),this.setCrop(A.x,A.y,A.width,A.height)},t.setWorldSize=function(e,t){this.setSize(e,t),this.setDisplaySize(e,t)},t.setWorldSizeForContainer=function(e,t,n){void 0===n&&(n=2),this.setSize(e*n,t*n),this.setDisplaySize(e,t)},t.getWorldPosition=function(){var e=this.getWorldTransformMatrix().decomposeMatrix();return{x:e.translateX,y:e.translateY}},t.drawDebugBox=function(e,t){var n=this.x,i=this.y,a=this.width,r=this.height,s=this.depth,o=this.originX,c=this.originY,l=this.scene.add.rectangle(n,i,a,r,e,t);l.setName("Debug Box"),l.setDepth(s);var u=GameCore.Utils.Valid.isNumber;return u(o)&&u(c)&&l.setOrigin(o,c),l},t.setHighQuality=function(){return this.renderer instanceof Phaser.Renderer.WebGL.WebGLRenderer?this.setResolution(2*this.scene.game.world.getZoomRatio()):this},t.setGradientHorizontalTint=function(e){var t=this.getTextBounds().characters;if(0==t.length)return this;for(var n=t[t.length-1].r,i=0,a=0;a<t.length;a++){var r=i/n,s=(i=t[a].r)/n,o=y(r,e),c=y(s,e);this.setCharacterTint(a,1,!1,o,c,o,c)}return this},t.setGradientVerticalTint=function(e,t){void 0===t&&(t=!0);for(var n=[],i=this.getTextBounds().characters,a=0;a<i.length;a++){for(var r=i[a],s=t?r.line:0;!n[s];)n.push({minY:9999999,maxY:-9999999});var o=n[s],c=o.minY,l=o.maxY,u=r.y+r.h,h=r.y;c>h&&(n[s].minY=h),l<u&&(n[s].maxY=u)}for(var d=0;d<i.length;d++){var f=i[d],p=n[t?f.line:0],g=p.minY,m=p.maxY,v=f.y+f.h,b=(m-f.y)/(m-g),A=y((m-v)/(m-g),e),E=y(b,e);this.setCharacterTint(d,1,!1,E,E,A,A)}return this},t.clearGradientTint=function(){return this.setCharacterTint(0,this.text.length,!1,16777215),this},t.setRadius=function(e){return this.radius=e,this._dirty=!0,this},t.clearRadius=function(){return this.radius=void 0,this},t.getTextBounds=function(e){var t=this._bounds,n=void 0!=this.radius&&0!=this.radius&&(this._dirty||e||this.scaleX!==t.scaleX||this.scaleY!==t.scaleY);if(t=this._originalGetTextBounds(e),n)for(var i=0;i<t.characters.length;i++){var a=t.characters[i],r=this.radius,s=(a.x-this.displayOriginX+a.w/2)/r,o=Math.cos(s),c=Math.sin(s);a.curve={r:r,rotation:s,cos:o,sin:c}}return t},e}(),A=b,E=n(13),S=n.n(E),T=n(29),w=n.n(T),C=n(36),I=n.n(C),x=n(38),P=n.n(x),k=n(3),_=n.n(k),O=n(124),R=n.n(O),L=n(56),D=n.n(L),B=n(31),N=n.n(B),M=[{url:"./assets/images/others/mock1.jpg",title:"Buy lottery tickets on behalf",description:"\ud83d\udca5\ud83d\udca5\ud83d\udca5 Place an order for lottery tickets from 3 regions!!! \u2705 Fast - Convenient - Safe \u2705 Diverse products \u2705 Payment...",buttonName:"Discover more"},{url:"./assets/images/others/mock2.jpg",title:"SYSTEM-WIDE SALE UP TO 50%",description:'\ud83d\udd25 \ud835\uddec\ud835\uddd8\ud835\uddd4\ud835\udde5 \ud835\uddd8\ud835\udde1\ud835\uddd7 \ud835\udde6\ud835\uddd4\ud835\udddf\ud835\uddd8 | \ud835\udde8\ud835\udde3 \ud835\udde7\ud835\udde2 \ud835\udff1\ud835\udfec% "BIG PARTY" AUTHENTIC SPORTSWEAR SHOCKINGLY REDUCED PRICES! \ud83c\udf81 From...',buttonName:"Discover more"},{url:"./assets/images/others/mock3.jpg",title:"Register now",description:"Play safe, play fun, play 9club!",buttonName:"Register"}],G=function(){function e(){}return e.loadBannerAdAsync=function(){var e=(0,s.Z)(h().mark((function e(){var t,n,i,a,r,s,o,c,u,d;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.currentIdx=(this.currentIdx+1)%M.length,this.hideBannerAdAsync(),e.next=4,new(l())((function(e){setTimeout((function(){e()}),2e3)}));case 4:if(!document.getElementById("mock-banner-ads")){e.next=16;break}return t=M[this.currentIdx],n=t.url,i=t.buttonName,a=t.title,r=t.description,(s=document.getElementById("banner-content-text1"))&&(s.innerHTML=a),(o=document.getElementById("banner-content-text2"))&&(o.innerHTML=r),(c=document.getElementById("mock-banner-ads-avatar"))&&(c.style.background="url("+n+") center center/contain no-repeat"),(u=document.getElementById("banner-content-button"))&&(u.innerHTML=i),e.abrupt("return");case 16:d=GameCore.Utils.Device.isDesktop(),50,d?this.createDesktopBannerAd(50):this.createMobileBannerAd(50);case 19:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),e.createDesktopBannerAd=function(e){var t=this,n=M[this.currentIdx],i=n.url,a=n.buttonName,r=n.title,s=n.description,o=document.createElement("div");o.id="mock-banner-ads",o.style.width="100%",o.style.height=e+"px",o.style.bottom="var(--sab)",o.style.display="flex",o.style.position="absolute",o.style.opacity=this.currentOpacity;var c=document.createElement("div");c.id="mock-banner-ads-display-area",c.style.width="100%",c.style.height="100%",c.style.background="#323436 center center/auto no-repeat",c.style.borderRadius="10px",c.style.marginLeft="4px",c.style.marginRight="4px",c.style.display="block",c.style.alignContent="center";var l=document.createElement("div");l.id="mock-banner-ads-content",l.style.boxSizing="border-box",l.style.flexDirection="row",l.style.display="flex",l.style.position="relative",l.style.alignItems="stretch",l.style.paddingLeft="4px",l.style.paddingRight="4px",l.style.justifyContent="space-between";var u=document.createElement("div");u.id="mock-banner-ads-avatar",u.style.marginLeft="10px",u.style.width=e+"px",u.style.minWidth=e+"px",u.style.height=e+"px",u.style.display="flex",u.style.flexDirection="column",u.style.position="relative",u.style.background="url("+i+") center center/contain no-repeat",u.style.borderRadius="50%";var h=document.createElement("div");h.id="mock-banner-ads-right-content",h.style.width="100%",h.style.paddingLeft="10px",h.style.display="flex",h.style.flexDirection="row",h.style.position="relative",h.style.color="#E4E6EB",h.style.wordWrap="break-word",h.style.textAlign="left",h.style.alignContent="center",h.style.alignItems="center",h.style.fontSize="12px",h.style.fontFamily="Helvetica, Arial, sans-serif, Roboto, Helvetica, Arial, sans-serif",u.style.boxSizing="border-box";var d=document.createElement("div");d.style.flexDirection="column",d.style.display="flex",d.style.justifyContent="center",d.style.flexShrink="1",d.style.flexGrow="1",d.style.flexBasis="0",d.style.boxSizing="border-box",d.style.minWidth="0",d.innerHTML="\n            <div id='banner-content-text1' style=\"font-weight:600;line-height: 1.3333;font-size: .9375rem;text-overflow: ellipsis;-webkit-line-clamp: 1;overflow: hidden;display: -webkit-box;-webkit-box-orient: vertical;\">"+r+"</div>\n            <div id='banner-content-text2' style=\"font-weight:400;line-height: 1.2308;font-size: .8125rem;text-overflow: ellipsis;-webkit-line-clamp: 2;overflow: hidden;display: -webkit-box;-webkit-box-orient: vertical;\">"+s+"</div>";var f=document.createElement("button");f.id="banner-content-button",f.type="button",f.style.width="120px",f.style.height=e-20+"px",f.style.fontWeight="600",f.style.backgroundColor="#3963fc",f.style.border="none",f.style.color="white",f.style.borderRadius="5px",f.style.textAlign="center",f.style.display="inline-block",f.style.cursor="pointer",f.style.marginRight="10px",f.style.marginLeft="10px",f.style.flexShrink="1",f.style.boxSizing="border-box",f.style.paddingRight="2px",f.style.paddingLeft="2px",f.innerHTML=a,f.onclick=function(){"0.2"===t.currentOpacity?o.style.opacity="1":o.style.opacity="0.2",t.currentOpacity=o.style.opacity};var p=document.createElement("button");p.type="button",p.style.width=e-20+"px",p.style.height=e-20+"px",p.style.fontWeight="1000",p.style.backgroundColor="#5a5c5c",p.style.border="none",p.style.color="white",p.style.borderRadius="50%",p.style.textAlign="center",p.style.display="inline-block",p.style.cursor="pointer",p.style.marginRight="10px",p.style.marginLeft="10px",p.style.flexShrink="0",p.style.boxSizing="border-box",p.style.paddingRight="2px",p.style.paddingLeft="2px",p.innerHTML="...",document.body.appendChild(o),o.appendChild(c),c.appendChild(l),l.appendChild(u),l.appendChild(h),h.appendChild(d),h.appendChild(f),h.appendChild(p)},e.createMobileBannerAd=function(e){var t=this,n=M[this.currentIdx],i=n.url,a=n.buttonName,r=n.title,s=n.description,o=document.createElement("div");o.id="mock-banner-ads",o.style.width="100%",o.style.height=e+"px",o.style.bottom="var(--sab)",o.style.display="block",o.style.position="absolute",o.style.opacity=this.currentOpacity;var c=document.createElement("div");c.id="mock-banner-ads-display-area",c.style.background="#ffffff center center/auto no-repeat",c.style.display="block",c.style.alignContent="center";var l=document.createElement("div");l.id="mock-banner-ads-content",l.style.boxSizing="border-box",l.style.flexDirection="row",l.style.display="flex",l.style.position="relative",l.style.alignItems="stretch",l.style.justifyContent="space-between";var u=document.createElement("div");u.id="mock-banner-ads-avatar",u.style.width=e+"px",u.style.minWidth=e+"px",u.style.height=e+"px",u.style.display="flex",u.style.flexDirection="column",u.style.position="relative",u.style.background="url("+i+") center center/contain no-repeat";var h=document.createElement("div");h.id="mock-banner-ads-right-content",h.style.width="100%",h.style.paddingLeft="10px",h.style.display="flex",h.style.flexDirection="row",h.style.position="relative",h.style.color="#000",h.style.wordWrap="break-word",h.style.textAlign="left",h.style.alignContent="center",h.style.alignItems="center",h.style.fontSize="12px",h.style.fontFamily="Helvetica, Arial, sans-serif, Roboto, Helvetica, Arial, sans-serif",u.style.boxSizing="border-box";var d=document.createElement("div");d.style.flexDirection="column",d.style.display="flex",d.style.justifyContent="center",d.style.flexShrink="1",d.style.flexGrow="1",d.style.flexBasis="0",d.style.boxSizing="border-box",d.style.minWidth="0",d.innerHTML="\n            <div id='banner-content-text1' style=\"font-weight:600;line-height: 1.3333;font-size: .9375rem;text-overflow: ellipsis;-webkit-line-clamp: 1;overflow: hidden;display: -webkit-box;-webkit-box-orient: vertical;\">"+r+"</div>\n            <div id='banner-content-text2' style=\"font-weight:400;line-height: 1.2308;font-size: .8125rem;text-overflow: ellipsis;-webkit-line-clamp: 1;overflow: hidden;display: -webkit-box;-webkit-box-orient: vertical;\">"+s+"</div>";var f=document.createElement("button");f.id="banner-content-button",f.type="button",f.style.height="100%",f.style.fontWeight="600",f.style.backgroundColor="#3963fc",f.style.border="none",f.style.color="white",f.style.textAlign="center",f.style.display="inline-block",f.style.cursor="pointer",f.style.marginLeft="10px",f.style.flexShrink="1",f.style.boxSizing="border-box",f.style.paddingRight="7px",f.style.paddingLeft="7px",f.innerHTML=a,f.onclick=function(){"0.2"===t.currentOpacity?o.style.opacity="1":o.style.opacity="0.2",t.currentOpacity=o.style.opacity},document.body.appendChild(o),o.appendChild(c),c.appendChild(l),l.appendChild(u),l.appendChild(h),h.appendChild(d),h.appendChild(f)},e.hideBannerAdAsync=function(){var e=(0,s.Z)(h().mark((function e(){var t;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=document.getElementById("mock-banner-ads")){e.next=3;break}return e.abrupt("return");case 3:t.remove();case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),e}();G.currentIdx=-1,G.currentOpacity="1";var F={LOADED:"loaded",DISPLAYED:"displayed"},Z=function(e){return e.IDLE="idle",e.LOADING="loading",e.FILLED="filled",e.SHOWING="showing",e}(Z||{}),U=Z,H=function(e){return e.REWARDED="rewarded",e.PRE_ROLL="pre-roll",e.INTERSTITIAL="interstitial",e.BANNER="banner",e}(H||{}),W=H,z=n(643),Y=function(e){function t(t,n){var i;return(i=e.call(this,n)||this).code=void 0,i.code=t,i.message=n,i}return(0,o.Z)(t,e),t}((0,z.Z)(Error)),V=function(e){this.type=void 0,this.status=void 0,this.type=e,this.status=U.IDLE};function K(e,t){var n="undefined"!==typeof I()&&P()(e)||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){var n;if(!e)return;if("string"===typeof e)return j(e,t);var i=S()(n=Object.prototype.toString.call(e)).call(n,8,-1);"Object"===i&&e.constructor&&(i=e.constructor.name);if("Map"===i||"Set"===i)return w()(e);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return j(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var i=0;return function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function j(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}GameCore.Ads={Types:W,Status:U,Events:F,AdError:Y,AdInstance:V};var X=function(e){function t(){for(var t,n,i=arguments.length,a=new Array(i),r=0;r<i;r++)a[r]=arguments[r];return(n=e.call.apply(e,_()(t=[this]).call(t,a))||this).events=void 0,n.enabled=void 0,n.config=void 0,n.lastInterAdShownTime=void 0,n.lastInterAdLoadedTime=void 0,n.lastRewardAdShownTime=void 0,n.interstitial=void 0,n.rewardedVideo=void 0,n.preRoll=void 0,n.fallbackInterstitial=void 0,n.fallbackRewardedVideo=void 0,n.fallbackPreRoll=void 0,n.safeAreaBottom=void 0,n.showingBannerAd=void 0,n.reloadBannerAdIntervals=void 0,n.bannerAdConfigs=void 0,n.isHaveBannerAdOptions=void 0,n.isFallbackReady=void 0,n.isFallbackInitialized=void 0,n.isBannerAdsShown=void 0,n}(0,o.Z)(t,e);var i=t.prototype;return i.init=function(){this.events=new Phaser.Events.EventEmitter,this.safeAreaBottom=0,this.lastInterAdShownTime=0,this.lastInterAdLoadedTime=0,this.lastRewardAdShownTime=0,this.showingBannerAd={},this.reloadBannerAdIntervals={},this.bannerAdConfigs=[],this.isHaveBannerAdOptions=!0,this.isFallbackReady=!1,this.isFallbackInitialized=!1,this.isBannerAdsShown=!1},i.calculateSafeAreaBottom=function(){try{if(!this.config.calculateSafeAreaBottom)return;this.safeAreaBottom=R()(getComputedStyle(document.documentElement).getPropertyValue("--sab")),isNaN(this.safeAreaBottom)&&(this.safeAreaBottom=0)}catch(e){this.safeAreaBottom=0}},i.configure=function(e,t){this.enabled=t.enabled,this.config=t,this.setAdInstance(e),this.setBannerAdConfigStatus(),this.calculateSafeAreaBottom()},i.setBannerAdConfigStatus=function(){for(var e,t=this.config.bannerAdOptions,n=GameCore.Utils.Device.isDesktop(),i=K(t);!(e=i()).done;){var a=e.value,r=a.platform,s="ALL"==r||"DESKTOP"==r&&n||"MOBILE"==r&&!n;this.bannerAdConfigs.push({config:a,canShow:s}),s&&(this.isHaveBannerAdOptions=!0)}},i.setAdInstance=function(e){var t=this.config,n=t.rewardAdOptions,i=t.interstitialAdOptions;this.interstitial=new e(W.INTERSTITIAL,i.pID),this.rewardedVideo=new e(W.REWARDED,n.pID),this.preRoll=new e(W.PRE_ROLL,i.pID)},i.setFallbackAdInstance=function(e){var t=this.config,n=t.rewardAdOptions,i=t.interstitialAdOptions;this.fallbackInterstitial=new e(W.INTERSTITIAL,i.pID),this.fallbackRewardedVideo=new e(W.REWARDED,n.pID),this.fallbackPreRoll=new e(W.PRE_ROLL,i.pID)},i.preloadInterstitialAdAsync=function(){var e=(0,s.Z)(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.preloadAdAsync(W.INTERSTITIAL);case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),i.showInterstitialAdAsync=function(){var e=(0,s.Z)(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.canbeShowInterstitialAdByTime()){e.next=2;break}throw new Y("INTERSTITIAL_AD_CAN_NOT_SHOW","Can't show interstitial ad");case 2:return e.next=4,this.showAdAsync(W.INTERSTITIAL);case 4:this.lastInterAdShownTime=window.performance.now()/1e3;case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),i.preloadPreRollAdAsync=function(){var e=(0,s.Z)(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.preloadAdAsync(W.PRE_ROLL);case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),i.showPreRollAdAsync=function(){var e=(0,s.Z)(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.showAdAsync(W.PRE_ROLL);case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),i.preloadRewardedVideoAsync=function(){var e=(0,s.Z)(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.preloadAdAsync(W.REWARDED);case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),i.showRewardedVideoAsync=function(){var e=(0,s.Z)(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.canbeShowRewardAd()){e.next=2;break}throw new Y("REWARDED_VIDEO_CAN_NOT_SHOW","Can't show rewarded video");case 2:return e.next=4,this.showAdAsync(W.REWARDED);case 4:this.lastRewardAdShownTime=window.performance.now()/1e3;case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),i.getRemainingRewardTime=function(){var e=window.performance.now()/1e3,t=this.config.rewardAdOptions.secondsBetweenAds,n=e-this.lastRewardAdShownTime;return n<t?t-n:0},i.preloadAdAsync=function(){var e=(0,s.Z)(h().mark((function e(t){var n,i;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.enabled){e.next=2;break}throw new Y("ADS_NOT_ENABLED","Ads is't enabled");case 2:return e.next=4,this.preloadMainAdService(t);case 4:if(!0!==(n=e.sent)){e.next=7;break}return e.abrupt("return");case 7:if(this.isFallbackReady){e.next=9;break}throw n;case 9:return e.next=11,this.preloadFallbackAdService(t);case 11:if(!0!==(i=e.sent)){e.next=14;break}return e.abrupt("return");case 14:throw i;case 15:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),i.preloadMainAdService=function(e){var t=this;return new(l())((function(n){var i=!1;t.preloadAdInstanceAsync(e,!1).then((function(){i=!0})).catch((function(e){t.isFallbackReady||t.initFallbackAdsService().catch((function(){t.isFallbackReady=!1})),i=e})).finally((function(){n(i)}))}))},i.preloadFallbackAdService=function(e){var t=this;return new(l())((function(n){var i=!1;t.isFallbackReady||n(new Y("FALLBACK_NOT_READY","Fallback ads not ready")),t.preloadAdInstanceAsync(e,!0).then((function(){i=!0})).catch((function(e){i=e})).finally((function(){n(i)}))}))},i.preloadAdInstanceAsync=function(){var e=(0,s.Z)(h().mark((function e(t,n){var i,a=this;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===n&&(n=!1),null!==(i=this.getAdInstanceByType(t,n))){e.next=4;break}throw new Y("AD_INSTANCE_NOT_INITIATED","The instance ads not yet initiated");case 4:if(i.getStatus()!==U.LOADING){e.next=8;break}return e.next=7,new(l())((function(e){a.events.once(F.LOADED,e)}));case 7:return e.abrupt("return");case 8:return t!==W.INTERSTITIAL&&t!==W.PRE_ROLL||(this.lastInterAdLoadedTime=window.performance.now()/1e3),e.next=11,i.loadAsync();case 11:this.events.emit(F.LOADED,t);case 12:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}(),i.showAdAsync=function(){var e=(0,s.Z)(h().mark((function e(t){var n,i;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.enabled){e.next=2;break}throw new Y("ADS_NOT_ENABLED","Ads is't enabled");case 2:return e.next=4,this.showMainAdService(t);case 4:if(!0!==(n=e.sent)){e.next=7;break}return e.abrupt("return");case 7:if(!this.isUserCancelledAdError(n)&&this.isAdFallbackReadyToShow(t)){e.next=9;break}throw n;case 9:return e.next=11,this.showFallbackAdService(t);case 11:if(!0!==(i=e.sent)){e.next=14;break}return e.abrupt("return");case 14:throw i;case 15:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),i.showMainAdService=function(e){var t=this;return new(l())((function(n){var i=!1;t.showAdInstanceAsync(e,!1).then((function(){i=!0})).catch((function(e){i=e,t.isUserCancelledAdError(e)||t.isFallbackReady||t.initFallbackAdsService().catch((function(){t.isFallbackReady=!1}))})).finally((function(){n(i)}))}))},i.showFallbackAdService=function(e){var t=this;return new(l())((function(n){var i=!1;t.isFallbackReady||n(new Y("FALLBACK_NOT_READY","Fallback ads not ready")),t.showAdInstanceAsync(e,!0).then((function(){i=!0})).catch((function(e){i=e})).finally((function(){n(i)}))}))},i.showAdInstanceAsync=function(){var e=(0,s.Z)(h().mark((function e(t,n){var i;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===n&&(n=!1),null!==(i=this.getAdInstanceByType(t,n))){e.next=4;break}throw new Y("AD_INSTANCE_NOT_INITIATED","The instance ads not yet initiated");case 4:return t!==W.INTERSTITIAL&&t!==W.PRE_ROLL||(this.lastInterAdShownTime=window.performance.now()/1e3),t===W.REWARDED&&(this.lastRewardAdShownTime=window.performance.now()/1e3,this.config.enableRewardVideoResetInterstitial&&(this.lastInterAdShownTime=this.lastRewardAdShownTime)),e.next=8,i.showAsync();case 8:this.events.emit(F.DISPLAYED,t);case 9:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}(),i.getAdStatus=function(e){var t=this.getAdInstanceByType(e);return t?t.getStatus():null},i.getAdInstanceByType=function(e,t){if(void 0===t&&(t=!1),t)switch(e){case W.INTERSTITIAL:return this.fallbackInterstitial;case W.REWARDED:return this.fallbackRewardedVideo;case W.PRE_ROLL:return this.fallbackPreRoll;default:return null}switch(e){case W.INTERSTITIAL:return this.interstitial;case W.REWARDED:return this.rewardedVideo;case W.PRE_ROLL:return this.preRoll;default:return null}},i.canbeShowInterstitialAd=function(){var e=this.canbeLoadInterstitialAdByTime();return e&&(e=this.canbeShowInterstitialAdByTime()),e},i.canbeLoadInterstitialAdByTime=function(){var e=window.performance.now()/1e3,t=this.config.interstitialAdOptions,n=t.secondsFirstTime,i=t.secondsBetweenAds,a=Math.floor(e-this.lastInterAdLoadedTime);return this.lastInterAdLoadedTime>0?a>=i:a>=n},i.canbeShowInterstitialAdByTime=function(){var e=window.performance.now()/1e3,t=this.config.interstitialAdOptions,n=t.secondsFirstTime,i=t.secondsBetweenAds,a=Math.floor(e-this.lastInterAdShownTime);return this.lastInterAdShownTime>0?a>=i:a>=n},i.canbeShowRewardAd=function(){var e=window.performance.now()/1e3,t=this.config.rewardAdOptions,n=t.secondsFirstTime,i=t.secondsBetweenAds,a=Math.floor(e-this.lastRewardAdShownTime);return this.lastRewardAdShownTime>0?a>=i:a>=n},i.getEnabledBannerAds=function(){if(!this.isHaveBannerAdOptions)return[];for(var e,t=[],n=K(this.bannerAdConfigs);!(e=n()).done;){var i=e.value,a=i.config;i.canShow&&t.push(a)}return t},i.disableBannerAds=function(){this.config.bannerAdOptions=[]},i.showBannerAdAsync=function(){var e=(0,s.Z)(h().mark((function e(){var t;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.enabled){e.next=2;break}return e.abrupt("return");case 2:if(!this.isBannerAdsShown){e.next=5;break}return e.next=5,this.hideBannerAdAsync();case 5:if(0!==(t=this.getEnabledBannerAds()).length){e.next=8;break}return e.abrupt("return");case 8:return this.reloadBannerAdIntervals=this.reloadBannerAdIntervals||{},this.loadBannerAdAsync("",t),e.abrupt("return");case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),i.loadBannerAdAsync=function(){var e=(0,s.Z)(h().mark((function e(t,n){var i,a,r=this;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.enabled){e.next=2;break}return e.abrupt("return");case 2:if(i=this.getSceneName(),a=GameCore.Configs.Ads,e.prev=4,"msgames"===a.AdService){e.next=7;break}throw new Y("BANNER_ADS_NOT_SUPPORTED","Banner ads not supported");case 7:if(!a.Mockup.Enable){e.next=12;break}return e.next=10,G.loadBannerAdAsync();case 10:e.next=14;break;case 12:return e.next=14,GameSDK.loadBannerAdAsync(t,n);case 14:this.isBannerAdsShown=!0,n.forEach((function(e){var t=e.placementId,n=e.position,s=e.bannerWidth,o=e.bannerHeight;if(t&&""!==t){var c=n+":"+s+"x"+o;r.showingBannerAd[t]=!0,window.game.analytics.showBannerAd(c,i,a.AdService)}})),e.next=23;break;case 18:e.prev=18,e.t0=e.catch(4),console.log(e.t0),this.isBannerAdsShown=!1,n.forEach((function(e){var t=e.position+":"+e.bannerWidth+"x"+e.bannerHeight,n={type:W.BANNER,placement:i,bannerPosition:t,adService:a.AdService};window.game.analytics.showAdFail(n)}));case 23:case"end":return e.stop()}}),e,this,[[4,18]])})));return function(t,n){return e.apply(this,arguments)}}(),i.hideBannerAdAsync=function(){var e=(0,s.Z)(h().mark((function e(){var t;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.enabled){e.next=2;break}return e.abrupt("return");case 2:if(this.isHaveBannerAdOptions){e.next=4;break}return e.abrupt("return");case 4:if(this.isBannerAdsShown=!1,e.prev=5,"msgames"===(t=GameCore.Configs.Ads).AdService){e.next=9;break}throw new Y("BANNER_ADS_NOT_SUPPORTED","Banner ads not supported");case 9:if(!t.Mockup.Enable){e.next=14;break}return e.next=12,G.hideBannerAdAsync();case 12:e.next=16;break;case 14:return e.next=16,GameSDK.hideBannerAdAsync();case 16:e.next=21;break;case 18:e.prev=18,e.t0=e.catch(5),console.log(e.t0);case 21:case"end":return e.stop()}}),e,this,[[5,18]])})));return function(){return e.apply(this,arguments)}}(),i.getBannerHeight=function(){if(!this.enabled)return 0;if(!this.isBannerAdsShown)return 0;var e=this.getBottomBannerConfig();if(!e)return 0;var t=e.bannerHeight,n=(void 0===t?0:t)+this.safeAreaBottom+20;if(this.game.world){var i=this.game.world,a=i.getPixelRatio(),r=i.getZoomRatio();return this.game.world.getPhysicPixels(n,a/r)}return n},i.getBottomBannerConfig=function(){var e=this.getEnabledBannerAds();return 0===e.length?null:D()(e).call(e,(function(e){return"bottom"===e.position}))||null},i.getSceneName=function(){try{var e=self.game.globalScene;return this.globalSceneTypeCheck(e)?e.getCurrentScene().scene.getSceneName():"unknown"}catch(t){return"unknown"}},i.globalSceneTypeCheck=function(e){return"getCurrentScene"in e&&"function"===typeof e.getCurrentScene},i.initFallbackAdsService=function(){var e=(0,s.Z)(h().mark((function e(){var t,n;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=GameCore.Configs.Ads,!this.isFallbackInitialized){e.next=3;break}return e.abrupt("return");case 3:return this.isFallbackInitialized=!0,e.next=6,this.getFallbackAdServiceInstance();case 6:n=e.sent,"none"!==t.FallbackService&&null!==n&&(this.isFallbackReady=!0,this.setFallbackAdInstance(n));case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),i.getFallbackAdServiceInstance=function(){var e=(0,s.Z)(h().mark((function e(){var t,i,a;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=GameCore.Configs.Ads.FallbackService,e.next=3,Promise.resolve().then(n.bind(n,605));case 3:if(i=e.sent.default,"google"!==t){e.next=16;break}return e.prev=5,e.next=8,this.initGoogleAdInstanceAsync();case 8:if(null===(a=e.sent)){e.next=11;break}return e.abrupt("return",a);case 11:e.next=16;break;case 13:e.prev=13,e.t0=e.catch(5),console.error("Google Ads failed to load, fallback to GameAdInstance",e.t0);case 16:return e.abrupt("return",i);case 17:case"end":return e.stop()}}),e,this,[[5,13]])})));return function(){return e.apply(this,arguments)}}(),i.initGoogleAdInstanceAsync=function(){var e=(0,s.Z)(h().mark((function e(){var t,i,a,r,s,o,c,l,u;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=GameCore.Configs.Ads.AdServiceConfigs.Google){e.next=3;break}return e.abrupt("return",null);case 3:return i=t.DataAdChannel,a=t.DataAdClient,r=t.DataAdHost,s=t.DataAdBreakTest,o=t.DataAdFrequencyHint,c=t.MaxScriptLoadRetryCount,e.next=6,Promise.resolve().then(n.bind(n,606));case 6:if("loaded"!==(l=e.sent.default).initStatus){e.next=9;break}return e.abrupt("return",l);case 9:return u={dataAdClient:a,dataAdChannel:i,dataAdHost:r,dataAdBreakTest:s,dataAdFrequencyHint:o,maxScriptLoadRetryCount:c},e.prev=10,l.setGame(this.game),e.next=14,l.initGoogleAdsAsync(u);case 14:return e.abrupt("return",l);case 17:return e.prev=17,e.t0=e.catch(10),console.error("Google Ads failed to load, fallback to GameAdInstance",e.t0),e.abrupt("return",null);case 21:case"end":return e.stop()}}),e,this,[[10,17]])})));return function(){return e.apply(this,arguments)}}(),i.isUserCancelledAdError=function(e){if(e instanceof Y&&"USER_INPUT"===e.code)return!0;try{var t=JSON.parse(N()(e));return"code"in t&&"USER_INPUT"===t.code}catch(e){return!1}},i.isAdFallbackReadyToShow=function(e){if(!this.isFallbackReady)return!1;var t=this.getAdInstanceByType(e,!0);return!!t&&t.getStatus()===U.FILLED},t}(Phaser.Plugins.BasePlugin),q=X,J=function(){function e(e,t,n){this.name=void 0,this.color=void 0,this.selfLog=void 0,this.options=void 0,this.name=e,this.color=n||"#FFF",this.options=t,this.selfLog=!0,console.info("%c"+this.name+": init","color: "+this.color,this.options)}var t=e.prototype;return t.event=function(e,t,n){this.processEvent(e,t,n),this.selfLog&&console.info("%c"+this.name+": event","color: "+this.color,{name:e,value:n,payload:t})},t.pageview=function(e){var t=this.getPageByKey(e);this.processPageView(t),this.selfLog&&console.info("%c"+this.name+": pageview","color: "+this.color,{page:t})},t.levelStart=function(e,t,n){this.processLevelStart(e,t,n),this.selfLog&&console.info("%c"+this.name+": level start","color: "+this.color,{level:e,score:t,levelName:n})},t.levelFail=function(e,t,n){this.processLevelFail(e,t,n),this.selfLog&&console.info("%c"+this.name+": level fail","color: "+this.color,{level:e,score:t,levelName:n})},t.levelRescue=function(e,t,n){this.processLevelRescue(e,t,n),this.selfLog&&console.info("%c"+this.name+": level rescue","color: "+this.color,{level:e,score:t,levelName:n})},t.levelComplete=function(e,t,n){this.processLevelComplete(e,t,n),this.selfLog&&console.info("%c"+this.name+": level complete","color: "+this.color,{level:e,score:t,levelName:n})},t.loadPreRollAd=function(e,t){this.processLoadPreRollAd(e,t),this.selfLog&&console.info("%c"+this.name+": load pre-roll ad","color: "+this.color,{placement:e})},t.showPreRollAd=function(e,t){this.processShowPreRollAd(e,t),this.selfLog&&console.info("%c"+this.name+": show pre-roll","color: "+this.color,{placement:e})},t.loadInterstitialAd=function(e,t){this.processLoadInterstitialAd(e,t),this.selfLog&&console.info("%c"+this.name+": load interstitial ad","color: "+this.color,{placement:e})},t.showInterstitialAd=function(e,t){this.processShowInterstitialAd(e,t),this.selfLog&&console.info("%c"+this.name+": show interstitial ad","color: "+this.color,{placement:e})},t.loadRewardedVideoAd=function(e,t){this.processLoadRewardedVideoAd(e,t),this.selfLog&&console.info("%c"+this.name+": load rewarded video ad","color: "+this.color,{placement:e})},t.showRewardedVideoAd=function(e,t){this.processShowRewardedVideoAd(e,t),this.selfLog&&console.info("%c"+this.name+": show rewarded video ad","color: "+this.color,{placement:e})},t.showBannerAd=function(e,t,n){this.processShowBannerAd(e,t,n),this.selfLog&&console.info("%c"+this.name+": show banner ad","color: "+this.color,{placement:t})},t.receiveReward=function(e){this.processReceiveReward(e),this.selfLog&&console.info("%c"+this.name+": receive reward","color: "+this.color,{placement:e})},t.loadAdFail=function(e){this.processLoadAdFail(e),this.selfLog&&console.info("%c"+this.name+": load ad fail","color: "+this.color,e)},t.showAdFail=function(e){this.processShowAdFail(e),this.selfLog&&console.info("%c"+this.name+": show ad fail","color: "+this.color,e)},t.getPageByKey=function(e){var t=e.replace(/_/g,"-");return t=t.toLowerCase()},t.processLevelStart=function(e,t,n){},t.processLevelFail=function(e,t,n){},t.processLevelRescue=function(e,t,n){},t.processLevelComplete=function(e,t,n){},t.processLoadInterstitialAd=function(e,t){},t.processShowInterstitialAd=function(e,t){},t.processLoadPreRollAd=function(e,t){},t.processShowPreRollAd=function(e,t){},t.processLoadRewardedVideoAd=function(e,t){},t.processShowRewardedVideoAd=function(e,t){},t.processShowBannerAd=function(e,t,n){},t.processReceiveReward=function(e){},t.processLoadAdFail=function(e){},t.processShowAdFail=function(e){},e}();GameCore.Analytics={BaseAnalytics:J};var Q=function(e){function t(){for(var t,n,i=arguments.length,a=new Array(i),r=0;r<i;r++)a[r]=arguments[r];return(n=e.call.apply(e,_()(t=[this]).call(t,a))||this).analytics=void 0,n.pageview=function(e){n.isActive()&&n.analytics.forEach((function(t){t.pageview(e)}))},n}(0,o.Z)(t,e);var n=t.prototype;return n.init=function(){this.analytics=[]},n.add=function(e){this.analytics.push(e)},n.event=function(e,t,n){this.isActive()&&this.analytics.forEach((function(i){i.event(e,t,n)}))},n.levelStart=function(e,t,n){this.isActive()&&this.analytics.forEach((function(i){i.levelStart(e,t,n)}))},n.levelRescue=function(e,t,n){this.isActive()&&this.analytics.forEach((function(i){i.levelRescue(e,t,n)}))},n.levelFail=function(e,t,n){this.isActive()&&this.analytics.forEach((function(i){i.levelFail(e,t,n)}))},n.levelComplete=function(e,t,n){this.isActive()&&this.analytics.forEach((function(i){i.levelComplete(e,t,n)}))},n.loadPreRollAd=function(e,t){this.isActive()&&this.analytics.forEach((function(n){n.loadPreRollAd(e,t)}))},n.showPreRollAd=function(e,t){this.isActive()&&this.analytics.forEach((function(n){n.showPreRollAd(e,t)}))},n.loadInterstitialAd=function(e,t){this.isActive()&&this.analytics.forEach((function(n){n.loadInterstitialAd(e,t)}))},n.showInterstitialAd=function(e,t){this.isActive()&&this.analytics.forEach((function(n){n.showInterstitialAd(e,t)}))},n.loadRewardedVideoAd=function(e,t){this.isActive()&&this.analytics.forEach((function(n){n.loadRewardedVideoAd(e,t)}))},n.showRewardedVideoAd=function(e,t){this.isActive()&&this.analytics.forEach((function(n){n.showRewardedVideoAd(e,t)}))},n.showBannerAd=function(e,t,n){this.isActive()&&this.analytics.forEach((function(i){i.showBannerAd(e,t,n)}))},n.receiveReward=function(e){this.isActive()&&this.analytics.forEach((function(t){t.receiveReward(e)}))},n.loadAdFail=function(e){this.isActive()&&this.analytics.forEach((function(t){t.loadAdFail(e)}))},n.showAdFail=function(e){this.isActive()&&this.analytics.forEach((function(t){t.showAdFail(e)}))},n.isActive=function(){return this.analytics.length>=1},t}(Phaser.Plugins.BasePlugin),$=Q,ee=function(){function e(e,t){var n=this;this.name=void 0,this.game=void 0,this.isSprite=void 0,this.audio=void 0,this.markers=void 0,this.volume=void 0,this.isMusicEnabled=function(){return!!n.game.player.getPlayerSetting("music")},this.isSoundEnabled=function(){return!!n.game.player.getPlayerSetting("sound")},this.name=t,this.game=e,this.markers={},this.isSprite=!1,this.isSprite||(this.audio=this.game.sound.add(this.name))}var t=e.prototype;return t.play=function(e,t){var n,i,a,s=(0,r.Z)({volume:this.volume},t||{});if(s.volume!==this.volume&&(s.volume*=this.volume),!this.isSprite)return(null==(i=this.audio)?void 0:i.seek)>0?void this.audio.resume():void(null==(a=this.audio)||a.play(e,s));this.createMaker(e),null==(n=this.markers[e])||n.play(e,s)},t.pause=function(e){var t,n;this.isSprite?null==(t=this.markers[e])||t.pause():null==(n=this.audio)||n.pause()},t.stop=function(e){var t,n;this.isSprite?null==(t=this.markers[e])||t.stop():null==(n=this.audio)||n.stop()},t.setVolume=function(e){this.volume=e},t.createMaker=function(e){if(!this.markers[e])try{this.markers[e]=this.game.sound.addAudioSprite(this.name)}catch(t){console.warn("createMaker",t)}},e}(),te=n(92),ne=n.n(te),ie=n(28),ae=n.n(ie),re=function(){function e(e){var t=this;this.game=void 0,this.audios=void 0,this.volume=void 0,this.soundKeys=void 0,this.isMusicEnabled=function(){return!!t.game.player.getPlayerSetting("music")},this.isSoundEnabled=function(){return!!t.game.player.getPlayerSetting("sound")},this.game=e,this.audios=new(ne()),this.soundKeys=new(ne())}var t=e.prototype;return t.addSoundKeys=function(e){var t=this;ae()(e).forEach((function(n){var i=e[n];"string"===typeof i&&t.soundKeys.set(n,i)}))},t.clearSoundKeys=function(){this.soundKeys.clear()},t.play=function(e,t){var n=this,i=(0,r.Z)({volume:this.volume},t||{});i.volume!==this.volume&&(i.volume*=this.volume);var a=this.audios.get(e);if(!a&&this.game.cache.audio.exists(e)){var s=this.game.sound.add(e);this.audios.set(e,s),a=s}if(a)a.play(void 0,i);else{var o=this.soundKeys.get(e);if(!o)return console.log(this.soundKeys.get(e),e),void console.warn(e+" not found. Use importSoundEffectKeys from audio plugin to add it.");try{console.log(e,o,"load_sound_plugin"),this.game.globalScene.load.audio(e,o),this.game.globalScene.load.on(Phaser.Loader.Events.FILE_KEY_COMPLETE+"audio-"+e,(function(){console.log(e,o,"finish");var t=n.game.sound.add(e);n.audios.set(e,t),t.play(void 0,i)})),this.game.globalScene.load.start()}catch(c){console.warn(c)}}},t.pauseAll=function(){this.audios.forEach((function(e){e.pause()}))},t.resumeAll=function(){this.audios.forEach((function(e){e.resume()}))},t.stopAll=function(){this.audios.forEach((function(e){e.stop()}))},t.pause=function(e){var t=this.audios.get(e);t&&t.pause()},t.stop=function(e){var t=this.audios.get(e);t&&t.stop()},t.setVolume=function(e){this.volume=e},e}(),se=re,oe=function(e){function t(){for(var t,n,i=arguments.length,a=new Array(i),r=0;r<i;r++)a[r]=arguments[r];return(n=e.call.apply(e,_()(t=[this]).call(t,a))||this).soundManager=void 0,n.musicManager=void 0,n.isMuteAll=void 0,n.initMusic=function(e){n.musicManager=new ee(n.game,e),n.setMusicVolume(1)},n.initSound=function(){n.soundManager=new se(n.game),n.setSoundVolume(1)},n}(0,o.Z)(t,e);var n=t.prototype;return n.init=function(t){e.prototype.init.call(this,t),this.initSound()},n.importSoundEffectKeys=function(e){this.soundManager.addSoundKeys(e)},n.playSound=function(e,t){try{if(!this.soundManager||this.isMuteAll||!this.game.visibility.isGameVisible())return;if(!this.soundManager.isSoundEnabled())return;this.soundManager.play(e,t)}catch(n){}},n.stopSound=function(e){try{this.soundManager.stop(e)}catch(t){}},n.playMusic=function(e){void 0===e&&(e={});try{if(!this.musicManager||this.isMuteAll||!this.game.visibility.isGameVisible())return;if(!this.musicManager.isMusicEnabled())return;this.musicManager.play("",(0,r.Z)({loop:!0,volume:.2},e))}catch(t){}},n.pauseMusic=function(){try{if(!this.musicManager)return;this.musicManager.pause("")}catch(e){}},n.stopMusic=function(){try{if(!this.musicManager)return;this.musicManager.stop("")}catch(e){}},n.pauseAllSounds=function(){try{if(!this.soundManager)return;this.soundManager.pauseAll()}catch(e){}},n.resumeAllSounds=function(){try{if(!this.soundManager)return;this.soundManager.resumeAll()}catch(e){}},n.setSoundVolume=function(e){try{if(!this.soundManager)return;this.soundManager.setVolume(e)}catch(t){console.warn("setSoundVolume",t)}},n.setMusicVolume=function(e){try{if(!this.musicManager)return;this.musicManager.setVolume(e)}catch(t){console.warn("setMusicVolume",t)}},n.muteAll=function(){this.isMuteAll=!0,this.game.sound.mute=!0},n.unmuteAll=function(){this.isMuteAll=!1,this.game.sound.mute=!1},t}(Phaser.Plugins.BasePlugin),ce=oe,le=n(638),ue="AUTH_TOKEN_REQUEST",he="AUTH_TOKEN_RECEIVED",de=function(e){function t(t,n){var i;return(i=e.call(this,t)||this).payload=void 0,i.name="RequestTokenFail",i.message=t||"Request token fail",i.payload=n||{},i}return(0,o.Z)(t,e),t}((0,z.Z)(Error)),fe=n(651),pe="auth",ge=(0,fe.P1)([function(e){return e[pe].token}],(function(e){return e})),me=(0,fe.P1)([function(e){return e[pe].isRequesting}],(function(e){return e})),ve=function(e){return{type:he,payload:{token:e}}},ye=function(e){function t(){return e.apply(this,arguments)||this}(0,o.Z)(t,e);var n=t.prototype;return n.requestToken=function(){var e=(0,s.Z)(h().mark((function e(){var t;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.game.storage,e.next=3,t.dispatch(function(){var e=(0,s.Z)(h().mark((function e(t,n){var a,r,s,o;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,a=window.game.facebook,r=n(),s=ge(r),!me(r)&&""===s){e.next=7;break}return e.abrupt("return");case 7:return t({type:ue,payload:{}}),e.next=10,a.getPlayerToken();case 10:o=e.sent,t(ve(o)),e.next=25;break;case 14:if(e.prev=14,e.t0=e.catch(0),!(e.t0 instanceof Object&&GameCore.Utils.Object.hasOwn(e.t0,"code"))){e.next=19;break}if("PENDING_REQUEST"!==e.t0.code){e.next=19;break}return e.abrupt("return");case 19:if(t(ve("")),!(e.t0 instanceof Object&&GameCore.Utils.Object.hasOwn(e.t0,"message"))){e.next=24;break}if("string"!==typeof e.t0.message){e.next=24;break}return(0,i.tO)(new Error(e.t0.message)),e.abrupt("return");case 24:(0,i.tO)(new de);case 25:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(t,n){return e.apply(this,arguments)}}());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.getToken=function(){return ge(this.state)},(0,le.Z)(t,[{key:"state",get:function(){return this.game.storage.getState()}}]),t}(Phaser.Plugins.BasePlugin),be=ye,Ae=function(e,t){void 0===t&&(t=1);var n=new Image;n.onload=function(){var n,i,a=(n=this.width*t,i=this.height*t,{string:"+",style:"font-size: 1px; padding: "+Math.floor(i/2)+"px "+Math.floor(n/2)+"px;"});console.info("%c "+a.string,a.style+" background: transparent url("+e+") no-repeat center center; background-size: "+this.width*t+"px "+this.height*t+"px;")},n.src=e},Ee=function(e){function t(){for(var t,n,i=arguments.length,a=new Array(i),r=0;r<i;r++)a[r]=arguments[r];return(n=e.call.apply(e,_()(t=[this]).call(t,a))||this).width=void 0,n.height=void 0,n.renderOptions=void 0,n.canvas=void 0,n}(0,o.Z)(t,e);var n=t.prototype;return n.preload=function(e){var t=this,n=ae()(e);n.length<1||(n.forEach((function(n){t.scene.load.image(n,e[n])})),this.scene.load.start())},n.capture=function(){var e=(0,s.Z)(h().mark((function e(t){var n,i,a;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.width,i=t.height,a=t.renderOptions,this.width=n,this.height=i,this.renderOptions=a,this.createCanvas(),e.next=7,this.loadImages();case 7:return this.drawObjects(),e.abrupt("return",this.snapshotFrame());case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.createCanvas=function(){this.canvas||(this.canvas=this.game.textures.createCanvas("FrameCaptureCanvas")),this.canvas.clear(),this.canvas.setSize(this.width,this.height)},n.loadImages=function(){var e=[];for(var t in this.renderOptions){var n=this.renderOptions[t],i=n.name,a=n.image,r=n.fallbackWithImage;if(a)if(this.scene.textures.get(i).key!==i&&""!==i){var s=this.loadImage(i,a,r);e.push(s)}}return this.scene.load.start(),l().all(e)},n.loadImage=function(e,t,n){var i=this;return this.scene.load.image(e,t),new(l())((function(t,a){var r=Phaser.Loader.Events.FILE_KEY_COMPLETE+"image-"+e,s=Phaser.Loader.Events.FILE_LOAD_ERROR,o=function e(n){i.scene.load.off(r,e),i.scene.load.off(s,c),t()},c=function c(l){if(l.key===e)if(i.scene.load.off(r,o),i.scene.load.off(s,c),n)t();else{var u=new Error("Load image failed");a(u)}};i.scene.load.on(r,o),i.scene.load.on(s,c)}))},n.drawObjects=function(){for(var e in this.renderOptions){var t=this.renderOptions[e];switch(t.type){case"text":this.drawText(t);break;case"image":this.drawImage(t)}}},n.drawText=function(e){var t=this.canvas.context,n=e.x,i=e.y,a=e.font,r=e.text,s=e.fillStyle,o=e.lineWidth,c=e.textAlign;t.font=a+' "Be Vietnam Pro",nunito,-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Oxygen,Ubuntu,Cantarell,"Fira Sans","Droid Sans","Helvetica Neue",sans-serif',t.fillStyle=s||"#ffffff",o&&(t.lineWidth=o),c&&(t.textAlign=c),t.fillText(r,n,i)},n.drawImage=function(e){var t=this.canvas.context,n=e.x,i=e.y,a=e.name,r=e.frame,s=e.width,o=e.height,c=e.fallbackWithImage,l=e.flipX,u=e.flipY,h=this.scene.textures.get(a),d=h.getSourceImage(r);"__MISSING"===h.key&&c&&(d=(h=this.scene.textures.get(c)).getSourceImage());var f=1,p=1,g=n,m=i;l?(f=-1,g=n+s):(f=1,g=n),u?(p=-1,m=i+o):(p=1,m=i),t.save(),t.translate(g,m),t.scale(f,p),t.drawImage(d,0,0,s,o),t.restore()},n.snapshotFrame=function(){var e=this.canvas.getCanvas().toDataURL("image/jpeg",.85);return GameCore.Utils.Valid.isDebugger()&&Ae(e),e},t}(Phaser.Plugins.ScenePlugin),Se=Ee,Te=n(23),we=n.n(Te),Ce=function(e){function t(t,n,i){var a;return(a=e.call(this)||this).game=void 0,a.options=void 0,a.performance=void 0,a.isRunning=!1,a.checkTimer=void 0,a.fpsHistory=void 0,a.start=function(){if(!a.isRunning){a.isRunning=!0;var e=a.options.checkInterval;a.checkTimer=e,a.fpsHistory=[],a.game.events.on(Phaser.Core.Events.POST_STEP,a.onPostStep)}},a.stop=function(){a.isRunning&&(a.isRunning=!1,a.game.events.off(Phaser.Core.Events.POST_STEP,a.onPostStep),a.options.onlyUpdateWhenSwitchScene&&a.checkFps())},a.onPostStep=function(e,t){if(a.checkTimer-=t,!(a.checkTimer>0)){var n=a.options,i=n.checkInterval,r=n.onlyUpdateWhenSwitchScene;a.checkTimer+=i,a.fpsHistory.push(a.game.loop.actualFps),!1===r&&a.fpsHistory.length>=5&&a.checkFps()}},a.game=t,a.options=i,a.performance=n,a}(0,o.Z)(t,e);var n=t.prototype;return n.checkFps=function(){if(0!==this.fpsHistory.length){var e=this.options.autoUpgradeQuality,t=!1;this.isLowFps()?t=this.performance.downgradeGraphicsQuality():e&&this.isHighFps()&&(t=this.performance.upgradeGraphicsQuality()),t&&(this.fpsHistory=[])}},n.getFpsMedian=function(){return Phaser.Math.Median(this.fpsHistory)},n.isLowFps=function(){return this.getFpsMedian()<this.options.fpsThreshold},n.isHighFps=function(){return this.getFpsMedian()>1.2*this.options.fpsThreshold},t}(Phaser.Events.EventEmitter),Ie=Ce,xe=["pixelRatio","minQuality","maxQuality","qualityAdjustStep","trackingSceneKeys"],Pe=function(e){function t(){for(var t,n,i=arguments.length,a=new Array(i),r=0;r<i;r++)a[r]=arguments[r];return(n=e.call.apply(e,_()(t=[this]).call(t,a))||this).fpsTracker=void 0,n.pixelRatio=void 0,n.minQuality=void 0,n.maxQuality=void 0,n.qualityAdjustStep=void 0,n.trackingSceneKeys=[],n.trackingScene=function(e){var t;if(we()(t=n.trackingSceneKeys).call(t,e)){var i=n.game.scene.getScene(e);i.events.once(Phaser.Scenes.Events.UPDATE,n.fpsTracker.start),i.events.once(Phaser.Scenes.Events.SLEEP,n.fpsTracker.stop)}},n}(0,o.Z)(t,e);var n=t.prototype;return n.configure=function(e){var t=e.pixelRatio,n=e.minQuality,i=e.maxQuality,r=e.qualityAdjustStep,s=e.trackingSceneKeys,o=(0,a.Z)(e,xe);this.pixelRatio=t,this.minQuality=n,this.maxQuality=i,this.qualityAdjustStep=r,this.trackingSceneKeys=s,this.fpsTracker=new Ie(this.game,this,o)},n.active=function(){this.game.events.on(Phaser.Scenes.Events.WAKE,this.trackingScene),this.game.events.on(Phaser.Scenes.Events.START,this.trackingScene)},n.downgradeGraphicsQuality=function(){var e=this.pixelRatio;if(e<=this.minQuality)return!1;var t=+(e-this.qualityAdjustStep).toFixed(2);return!(t<this.minQuality)&&(this.pixelRatio=t,this.game.world.resize(this.pixelRatio),console.warn("\ud83d\udcab Graphics quality was downgraded! ("+e+" -> "+t+")"),!0)},n.upgradeGraphicsQuality=function(){var e=this.pixelRatio;if(e>=this.maxQuality)return!1;var t=+(e+this.qualityAdjustStep).toFixed(2);return!(t>this.maxQuality)&&(this.pixelRatio=t,this.game.world.resize(this.pixelRatio),console.warn("\ud83d\ude80 Graphics quality was upgraded! ("+e+" -> "+t+")"),!0)},t}(Phaser.Plugins.BasePlugin),ke=Pe,_e={sound:!0,music:!0,vibrate:!1,language:"",language2:"",theme:GameCore.Configs.DefaultTheme,tapToMove:!0,autoHints:!0,autoMoveToFoundation:!0,highlightLowCards:!0,backgroundIdx:0,cardFaceIdx:0,cardBackIdx:0,backgroundDesktopIdx:0,cardFaceDesktopIdx:0,cardBackDesktopIdx:0,modifiedOptions:[]},Oe=n(20),Re=n.n(Oe),Le=n(4),De=n.n(Le),Be=_e.sound,Ne=_e.music,Me=_e.vibrate,Ge=_e.language,Fe=_e.language2,Ze=_e.theme,Ue=_e.tapToMove,He=_e.autoHints,We=_e.autoMoveToFoundation,ze=_e.highlightLowCards,Ye=_e.backgroundIdx,Ve=_e.cardFaceIdx,Ke=_e.cardBackIdx,je=_e.backgroundDesktopIdx,Xe=_e.cardFaceDesktopIdx,qe=_e.cardBackDesktopIdx,Je=_e.modifiedOptions,Qe=function(){function e(e){this.sound=void 0,this.music=void 0,this.vibrate=void 0,this.language=void 0,this.language2=void 0,this.theme=void 0,this.tapToMove=void 0,this.autoHints=void 0,this.autoMoveToFoundation=void 0,this.highlightLowCards=void 0,this.backgroundIdx=void 0,this.cardFaceIdx=void 0,this.cardBackIdx=void 0,this.backgroundDesktopIdx=void 0,this.cardFaceDesktopIdx=void 0,this.cardBackDesktopIdx=void 0,this.modifiedOptions=void 0;var t=e||{},n=t.sound,i=t.music,a=t.vibrate,r=t.language,s=t.language2,o=t.theme,c=t.tapToMove,l=t.autoHints,u=t.autoMoveToFoundation,h=t.highlightLowCards,d=t.backgroundIdx,f=t.cardFaceIdx,p=t.cardBackIdx,g=t.backgroundDesktopIdx,m=t.cardFaceDesktopIdx,v=t.cardBackDesktopIdx,y=t.modifiedOptions;this.sound=GameCore.Utils.Valid.isBoolean(n)?n:Be,this.music=GameCore.Utils.Valid.isBoolean(i)?i:Ne,this.vibrate=GameCore.Utils.Valid.isBoolean(a)?a:Me,this.language=GameCore.Utils.Valid.isString(r)?r:Ge,this.language2=GameCore.Utils.Valid.isString(s)?s:Fe,this.theme=GameCore.Utils.Valid.isString(o)?o:Ze,this.tapToMove=GameCore.Utils.Valid.isBoolean(c)?c:Ue,this.autoHints=GameCore.Utils.Valid.isBoolean(l)?l:He,this.autoMoveToFoundation=GameCore.Utils.Valid.isBoolean(u)?u:We,this.highlightLowCards=GameCore.Utils.Valid.isBoolean(h)?h:ze,this.backgroundIdx=GameCore.Utils.Valid.isNumber(d)?d:Ye,this.cardFaceIdx=GameCore.Utils.Valid.isNumber(f)?f:Ve,this.cardBackIdx=GameCore.Utils.Valid.isNumber(p)?p:Ke,this.backgroundDesktopIdx=GameCore.Utils.Valid.isNumber(g)?g:je,this.cardFaceDesktopIdx=GameCore.Utils.Valid.isNumber(m)?m:Xe,this.cardBackDesktopIdx=GameCore.Utils.Valid.isNumber(v)?v:qe,this.modifiedOptions=Array.isArray(y)?y:Je}return e.prototype.toObject=function(){return{sound:this.sound,music:this.music,vibrate:this.vibrate,language:this.language,language2:this.language2,theme:this.theme,tapToMove:this.tapToMove,autoHints:this.autoHints,autoMoveToFoundation:this.autoMoveToFoundation,highlightLowCards:this.highlightLowCards,backgroundIdx:this.backgroundIdx,cardFaceIdx:this.cardFaceIdx,cardBackIdx:this.cardBackIdx,backgroundDesktopIdx:this.backgroundDesktopIdx,cardFaceDesktopIdx:this.cardFaceDesktopIdx,cardBackDesktopIdx:this.cardBackDesktopIdx,modifiedOptions:this.modifiedOptions}},e}(),$e=Qe,et=GameCore.Utils,tt=et.Valid,nt=et.Object,it=function(){function e(e){this.score=void 0,this.settings=void 0,this.gameData=void 0,this.userGuideDisplays=void 0,this.setupDefaultData(),this.updateScore(e),this.updateSettings(e),this.updateGameData(e),this.updateUserGuideDisplays(e)}var t=e.prototype;return t.setupDefaultData=function(){this.score=0,this.settings=(0,r.Z)({},_e),this.gameData={coins:0,diamond:0,lastReceiveGift:0,lastCallSwitchGame:0,firstLoginDate:0,dailyRewarded:{lastRewarded:0,logDays:[]},dailyTasks:{startedTime:0,logTasks:{}},game_stats:{},tournaments:[],current_board:{}},this.userGuideDisplays=0},t.updateScore=function(e){var t=e.score;!1!==tt.isNumber(t)&&(this.score=t)},t.updateSettings=function(e){var t=e.settings;if(!1!==tt.isObject(t)){var n=new $e(t).toObject();this.settings=n}},t.updateGameData=function(e){var t=e.gameData;if(!1!==tt.isObject(t)){if(nt.hasOwn(t,"coins")&&tt.isNumber(t.coins)&&(this.gameData.coins=t.coins),nt.hasOwn(t,"diamond")&&tt.isNumber(t.diamond)&&(this.gameData.diamond=t.diamond),nt.hasOwn(t,"lastReceiveGift")&&tt.isNumber(t.lastReceiveGift)&&(this.gameData.lastReceiveGift=t.lastReceiveGift),nt.hasOwn(t,"lastCallSwitchGame")&&tt.isNumber(t.lastCallSwitchGame)&&(this.gameData.lastCallSwitchGame=t.lastCallSwitchGame),nt.hasOwn(t,"dailyRewarded")&&tt.isObject(t.dailyRewarded)){var n=t.dailyRewarded;nt.hasOwn(n,"lastRewarded")&&tt.isNumber(n.lastRewarded)&&(this.gameData.dailyRewarded.lastRewarded=n.lastRewarded),nt.hasOwn(n,"logDays")&&Array.isArray(n.logDays)&&(this.gameData.dailyRewarded.logDays=n.logDays)}if(nt.hasOwn(t,"dailyTasks")&&tt.isObject(t.dailyTasks)){var i=t.dailyTasks;nt.hasOwn(i,"startedTime")&&tt.isNumber(i.startedTime)&&(this.gameData.dailyTasks.startedTime=i.startedTime),nt.hasOwn(i,"logTasks")&&tt.isObject(i.logTasks)&&(this.gameData.dailyTasks.logTasks=i.logTasks)}nt.hasOwn(t,"current_board")&&tt.isObject(t.current_board)&&(this.gameData.current_board=t.current_board),this.gameData.game_stats=t.game_stats,this.gameData.tournaments=t.tournaments,nt.hasOwn(t,"firstLoginDate")&&tt.isNumber(t.firstLoginDate)&&t.firstLoginDate>0&&(this.gameData.firstLoginDate=t.firstLoginDate)}},t.updateUserGuideDisplays=function(e){var t=e.userGuideDisplays;!1!==tt.isNumber(t)&&(this.userGuideDisplays=t)},t.toObject=function(){return{score:this.score,settings:this.settings,gameData:this.gameData,userGuideDisplays:this.userGuideDisplays}},t.convertToPlayerData=function(){var e=this.gameData,t=e.coins,n=e.diamond,i=e.dailyTasks,a=e.dailyRewarded,r=e.lastReceiveGift,s=e.game_stats,o=e.tournaments,c=e.current_board,l=e.lastCallSwitchGame,u=e.firstLoginDate;return{score:this.score,settings:this.settings,customFields:{coins:t,diamond:n,dailyTasks:i,dailyRewarded:a,lastReceiveGift:r,game_stats:s,tournaments:o,current_board:c,lastCallSwitchGame:l,firstLoginDate:u},userGuideDisplays:this.userGuideDisplays}},t.convertToFacebookData=function(e){var t=e.score,n=e.settings,i=e.customFields,a=e.userGuideDisplays;return this.updateScore({score:t}),this.updateSettings({settings:n}),this.updateGameData({gameData:i}),this.updateUserGuideDisplays({userGuideDisplays:a}),this.toObject()},e}(),at=n(653),rt=GameCore.Configs.ApiHost,st=function(){var e=(0,s.Z)(h().mark((function e(t){var n;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,at.v)("players?platform=ms-games",t,{},rt,10);case 2:return n=e.sent,e.abrupt("return",(null==n?void 0:n.data)||{});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ot=function(){var e=(0,s.Z)(h().mark((function e(t){var n;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",null);case 3:return n=e.sent,e.abrupt("return",(null==n?void 0:n.data)||{});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ct="PLAYER_RECEIVED",lt="PLAYER_DATA_UPDATE",ut="PLAYER_SCORE_UPDATE",ht="PLAYER_PROFILE_UPDATE",dt="PLAYER_SETTING_UPDATE",ft="PLAYER_CONNECTED_PLAYERS_UPDATE",pt=n(644),gt=function(e){function t(t,n){var i;return(i=e.call(this,t)||this).payload=void 0,i.name="PlayerDataNameNotSupport",i.message=t||"The name of player data is not supported",i.payload=n||{},i}return(0,o.Z)(t,e),t}((0,z.Z)(Error)),mt="player",vt=(0,fe.P1)([function(e){return e[mt]}],(function(e){return e})),yt=(0,fe.P1)([vt],(function(e){return e.playerId})),bt=(0,fe.P1)([vt],(function(e){return e.ASID})),At=(0,fe.P1)([function(e){return e[mt].data}],(function(e){return e})),Et=((0,fe.P1)([At],(function(e){return e.settings})),(0,fe.P1)([function(e){return e[mt].connectedPlayers}],(function(e){return e}))),St=(0,fe.P1)([Et,function(e,t){return t.limit},function(e,t){return t.offset}],(function(e,t,n){if("number"!==typeof t)return[];if("number"!==typeof n)return[];var i=ae()(e);return S()(i).call(i,n,t+n)||[]})),Tt=(0,fe.P1)([At],(function(e){return e.score})),wt=(0,fe.P1)([At],(function(e){return e.customFields})),Ct=(0,fe.P1)([wt],(function(e){return void 0===(null==e?void 0:e.tournaments)?[]:e.tournaments})),It=GameCore.Configs,xt=It.AppId,Pt=It.Tutorial,kt=function(e,t){return function(n){var i=e.playerId,a=e.name,r=e.photo,s=e.locale;n({type:ct,payload:{playerId:i,name:a,photo:r,locale:s,data:t||{}}})}},_t=function(e){return{type:ft,payload:{connectedPlayers:e}}},Ot=function(e,t){return function(){var n=(0,s.Z)(h().mark((function n(a,r){var s,o,c;return h().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,a({type:dt,payload:{name:e,value:t}});case 3:s=r(),o=At(s),c=new it({}).convertToFacebookData(o),FBInstant.player.setDataAsync(c),n.next=12;break;case 9:n.prev=9,n.t0=n.catch(0),(0,i.tO)(n.t0);case 12:case"end":return n.stop()}}),n,null,[[0,9]])})));return function(e,t){return n.apply(this,arguments)}}()},Rt=function(e,t){return function(){var n=(0,s.Z)(h().mark((function n(a,r){var s,o,c,l,u;return h().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,o={customFields:(s={},s[e]=t,s)},n.next=4,a(Dt(o));case 4:c=r(),l=At(c),u=new it({}).convertToFacebookData(l),FBInstant.player.setDataAsync(u),n.next=15;break;case 10:if(n.prev=10,n.t0=n.catch(0),!(n.t0 instanceof gt)){n.next=14;break}return n.abrupt("return");case 14:(0,i.tO)(n.t0);case 15:case"end":return n.stop()}}),n,null,[[0,10]])})));return function(e,t){return n.apply(this,arguments)}}()},Lt=function(e){return function(){var t=(0,s.Z)(h().mark((function t(n,a){var r,s,o,c;return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,r={customFields:e},t.next=4,n(Dt(r));case 4:s=a(),o=At(s),c=new it({}).convertToFacebookData(o),FBInstant.player.setDataAsync(c),t.next=16;break;case 10:if(t.prev=10,t.t0=t.catch(0),console.log("\ud83e\udd16 ? error",t.t0),!(t.t0 instanceof gt)){t.next=15;break}return t.abrupt("return");case 15:(0,i.tO)(t.t0);case 16:case"end":return t.stop()}}),t,null,[[0,10]])})));return function(e,n){return t.apply(this,arguments)}}()},Dt=function(e){return{type:lt,payload:{data:e}}},Bt=function(e){return function(){var t=(0,s.Z)(h().mark((function t(n,a){var r,s,o;return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,n({type:ut,payload:{score:e}});case 3:st({score:e}),r=a(),s=At(r),o=new it({}).convertToFacebookData(s),FBInstant.player.setDataAsync(o),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(0),(0,i.tO)(t.t0);case 13:case"end":return t.stop()}}),t,null,[[0,10]])})));return function(e,n){return t.apply(this,arguments)}}()},Nt=function(e){function t(){return e.apply(this,arguments)||this}(0,o.Z)(t,e);var n=t.prototype;return n.incUserGuideDisplays=function(){var e=(0,s.Z)(h().mark((function e(){var t;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.game.storage,e.next=3,t.dispatch(function(){var e=(0,s.Z)(h().mark((function e(t,n){var a,r,s,o;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!Pt.ForceUseTutorial){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,t(Dt({userGuideDisplays:1}));case 5:a=n(),r=yt(a),s=At(a),o=new it({}).convertToFacebookData(s),FBInstant.player.setDataAsync(o),ot(r),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),(0,i.tO)(e.t0);case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t,n){return e.apply(this,arguments)}}());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.receiveData=function(){var e=(0,s.Z)(h().mark((function e(t,n){var i;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=this.game.storage,e.next=3,i.dispatch(kt(t,n));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}(),n.updateData=function(){var e=(0,s.Z)(h().mark((function e(){var t;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.game.storage,e.next=3,t.dispatch(function(){var e=(0,s.Z)(h().mark((function e(t,n){var a,r,s,o,c,l,u,d;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a=n(),r=vt(a),s=r.playerId,o=r.name,c=r.photo,l=r.locale,e.next=6,FBInstant.player.getASIDAsync();case 6:return u=e.sent,d={appId:xt,playerId:s,name:o,photo:c,locale:l,ASID:u},e.next=10,t({type:ht,payload:{profile:d}});case 10:return e.next=12,st(d);case 12:e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),(0,i.tO)(e.t0);case 17:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(t,n){return e.apply(this,arguments)}}());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.setBestScore=function(){var e=(0,s.Z)(h().mark((function e(t){var n;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.game.storage,e.next=3,n.dispatch(Bt(t));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.setSetting=function(){var e=(0,s.Z)(h().mark((function e(t,n){var i;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=this.game.storage,e.next=3,i.dispatch(Ot(t,n));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}(),n.setCustomData=function(){var e=(0,s.Z)(h().mark((function e(t,n){var i;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=this.game.storage,e.next=3,i.dispatch(Rt(t,n));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}(),n.setMultiCustomData=function(){var e=(0,s.Z)(h().mark((function e(t){var n;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.game.storage,e.next=3,n.dispatch(Lt(t));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.requestConnectedPlayers=function(){var e=(0,s.Z)(h().mark((function e(){var t;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.game.storage,e.next=3,t.dispatch(function(){var e=(0,s.Z)(h().mark((function e(t){var n,a,r,s;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,FBInstant.player.getConnectedPlayersAsync();case 3:if(a=e.sent,r=function(e){return!!e},s=Re()(n=De()(a).call(a,(function(e){var t=e.getID(),n=e.getName(),i=e.getPhoto();return t&&n&&i?new pt.Z(t,n,i).toObject():null}))).call(n,r),!(s.length<1)){e.next=8;break}return e.abrupt("return");case 8:t(_t(s)),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),(0,i.tO)(e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t){return e.apply(this,arguments)}}());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.updateConnectedPlayers=function(){var e=(0,s.Z)(h().mark((function e(t){var n;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.game.storage,e.next=3,n.dispatch(_t(t));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.joinTournament=function(){var e=(0,s.Z)(h().mark((function e(t){var n,i,a;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=this.getTournaments(),!D()(i).call(i,(function(e){return e.leaderboardId===t.leaderboardId}))){e.next=3;break}return e.abrupt("return");case 3:return a=_()(n=[]).call(n,i,[t]),e.next=6,this.setMultiCustomData({tournaments:a});case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.getPlayer=function(){return vt(this.state)},n.getPlayerId=function(){return this.getPlayer().playerId},n.getPlayerASID=function(){return bt(this.state)},n.getPlayerData=function(){return this.getPlayer().data},n.getPlayerSetting=function(e){var t=this.getPlayerSettings();return"string"!==typeof e?null:GameCore.Utils.Object.hasOwn(t,e)?t[e]:GameCore.Utils.Object.hasOwn(_e,e)?_e[e]:null},n.getPlayerSettings=function(){return this.getPlayerData().settings},n.getPlayerIsNew=function(){return this.getPlayer().isUserNew},n.getDiamond=function(){var e=this.getCustomData("diamond");return GameCore.Utils.Valid.isNumber(e)?e:0},n.getBestScore=function(){return Tt(this.state)},n.getCustomData=function(e){var t=wt(this.state);return GameCore.Utils.Valid.isObject(t)&&GameCore.Utils.Object.hasOwn(t,e)?t[e]:null},n.getConnectedPlayers=function(){return Et(this.state)},n.getConnectedPlayerIds=function(e,t){return St(this.state,{limit:e,offset:t})},n.getTournaments=function(){return Ct(this.state)},(0,le.Z)(t,[{key:"state",get:function(){return this.game.storage.getState()}}]),t}(Phaser.Plugins.BasePlugin),Mt=Nt,Gt=n(35),Ft=n.n(Gt),Zt=GameCore.Configs.ApiHost,Ut=function(){var e=(0,s.Z)(h().mark((function e(t){var n,i;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=GameCore.Utils.String.params(t),e.next=3,(0,at.U)("players?"+n,{},Zt);case 3:return i=e.sent,e.abrupt("return",(null==i?void 0:i.data)||[]);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ht="PROFILES_DATA_UPDATE",Wt="profile",zt=(0,fe.P1)([function(e){return e[Wt].data}],(function(e){return e})),Yt=(0,fe.P1)([function(e){return e[Wt].profileIds}],(function(e){return e})),Vt=GameCore.Configs,Kt=Vt.Tournament,jt=Vt.LeadersBoard,Xt=function(e){return function(){var t=(0,s.Z)(h().mark((function t(n,a){var r,s,o,c,l,u;return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,r=a(),s=Yt(r),!((o=GameCore.Utils.Array.difference(e,s)).length<1)){t.next=6;break}return t.abrupt("return");case 6:return t.next=8,Ut({playerIds:o});case 8:c=t.sent,Kt.UseMock&&jt.UseMock&&(c=De()(l=Ft()(u=new Array(o.length)).call(u,null)).call(l,(function(e,t){var n=t+1;return{playerId:"player-0"+n,name:"MPlayer "+n,photo:"./assets/images/others/avatar.jpg",rank:n,score:Math.floor(17*Math.random()*1e3/n)}}))),n({type:Ht,payload:{data:c}}),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(0),(0,i.tO)(t.t0);case 16:case"end":return t.stop()}}),t,null,[[0,13]])})));return function(e,n){return t.apply(this,arguments)}}()},qt=function(e){function t(){return e.apply(this,arguments)||this}(0,o.Z)(t,e);var n=t.prototype;return n.requestProfiles=function(){var e=(0,s.Z)(h().mark((function e(t){var n;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.game.storage,e.next=3,n.dispatch(Xt(t));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.getProfiles=function(){return zt(this.state)},(0,le.Z)(t,[{key:"state",get:function(){return this.game.storage.getState()}}]),t}(Phaser.Plugins.BasePlugin),Jt=qt,Qt=n(19),$t=n.n(Qt),en=n(198),tn=n.n(en),nn=["player","match"],an="null",rn=GameCore.Utils,sn=rn.Valid,on=rn.Object,cn=GameCore.Configs.Rollbar,ln=cn.UseMockup,un=cn.FilterError,hn=function(e){function t(){for(var t,n,i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return(n=e.call.apply(e,_()(t=[this]).call(t,r))||this).enable=void 0,n.rollbar=void 0,n.events=[],n.beforeSend=function(e,t,i){ln&&n.showPopupError(i)},n.checkIgnore=function(e,t,i){try{return!!n.isErrorIgnore(t)&&(console.warn(t),!0)}catch(a){return!1}},n.showPopupError=function(e){var t,i,a,r,s,o=null==e||null==(t=e.body)||null==(i=t.trace)?void 0:i.exception;o&&n.events.push(o);var c=(null==e||null==(a=e.body)||null==(r=a.trace)?void 0:r.frames)||[];(s=n.events).push.apply(s,c);var l=document.getElementById("popup-error");l||((l=document.createElement("div")).id="popup-error",document.body.appendChild(l)),l.innerHTML='<div style="color: #fff; display: flex; flex-flow: column; align-items: center; ">\n      <pre id="json" style="overflow: auto; background-color: rgb(195 112 97 / 80%); padding: 10px; max-height: 80vh; max-width: 90vw; border: 5px solid #545454;">'+N()(n.events,null,2)+'</pre>\n      <button id="close" style="cursor: pointer; padding: 10px 20px; border-radius: 100px;">Close</button>\n      </div>',l.style="top: 0px; z-index: 10000; width: 100vw; max-height: 100vh; position: absolute; display: flex; align-items: center; justify-content: center;";var u=document.getElementById("close");u&&(u.onclick=n.closePopup)},n.closePopup=function(){n.events=[{}];var e=document.getElementById("popup-error");null==e||e.remove()},n.isNoneErrorEvent=function(e){if(!e||0===e.length)return!1;if(!e[0].message)return!1;return"Non-Error promise rejection captured with keys: code, message"===e[0].message},n.isErrorIgnore=function(e){if(!e||0===e.length)return!1;var t=!1,i=e[0];return i instanceof Object&&(t=n.isIgnoreByCode(i)||n.isIgnoreByMessage(i)),t},n.isIgnoreByCode=function(e){if(on.hasOwn(e,"code")){var t=e.code,n=un.Codes,i=n.accepted,a=n.ignored;if("string"===typeof t){if($t()(i).call(i,t)>=0)return!1;if($t()(a).call(a,t)>=0)return!0}}if(on.hasOwn(e,"name")){var r=e.name,s=un.Codes,o=s.accepted,c=s.ignored;if("string"===typeof r){if($t()(o).call(o,r)>=0)return!1;if($t()(c).call(c,r)>=0)return!0}}return!1},n.isIgnoreByMessage=function(e){if(on.hasOwn(e,"message")){var t=e.message,n=un.Messages,i=n.accepted,a=n.ignored;if("string"===typeof t){if($t()(i).call(i,t)>=0)return!1;if($t()(a).call(a,t)>=0)return!0}}return!1},n.addExtraState=function(){try{if(!on.hasOwn(window,"game"))return;if(!on.hasOwn(window.game,"storage"))return;if(!on.hasOwn(window.game.storage,"getState"))return;var e=(0,window.game.storage.getState)()||{},t=e.player,i=e.match,r=(0,a.Z)(e,nn);n.rollbar.configure({payload:{player:t,match:i,other:r}})}catch(s){console.warn("%c addExtraState: ","font-size:12px;background-color: #42b983;color:#fff;",s)}},n}(0,o.Z)(t,e);var n=t.prototype;return n.setup=function(){this.rollbar=new(tn())({accessToken:an,checkIgnore:this.checkIgnore,onSendCallback:this.beforeSend,captureUncaught:!0,scrubTelemetryInputs:!0,captureUnhandledRejections:!0,autoInstrument:{dom:!1,navigation:!1},payload:{environment:"development",client:{javascript:{code_version:"10"}},server:{root:"webpack:///./",branch:"master"}}}),this.enable=!0,this.sendTestException()},n.configure=function(e){this.rollbar&&this.rollbar.configure(e)},n.sendTestException=function(){if(!sn.isDebugger()){var e=FBInstant.player.getID();e&&this.rollbar.debug(new Error("Test rollbar"),{playerID:e})}},n.sendException=function(e,t){e&&(this.enable?this.rollbar&&(this.addExtraState(),this.rollbar.error(e,t)):console.error(e))},t}(Phaser.Plugins.BasePlugin),dn=hn,fn=n(656),pn=function(e){function t(){return e.apply(this,arguments)||this}return(0,o.Z)(t,e),t.prototype.emit=function(t,n){return e.prototype.emit.call(this,t,n)},t}(Phaser.Events.EventEmitter),gn=pn,mn=n(641),vn=n(655),yn=n(654),bn=function(e){function t(t,n,i,a){var r;(r=e.call(this,t)||this).zone=void 0,r.background=void 0,r.setName(n),r.setVisible(!1);var s=r.scene.world.getWorldSize(),o=s.width,c=s.height;return r.setSize(i||o,a||c),r.addZone(),r.addBackground(),yn.Z.registerObject(r.background),r}(0,o.Z)(t,e);var n=t.prototype;return n.open=function(e){GameCore.Utils.Valid.isObject(e)&&(this.setDataEnabled(),this.setData(e)),this.setBlockInputOutsideEnabled(!0),this.scene.screen.screensLayer.bringToTop(this),this.visible||(this.setVisible(!0),this.logPageviewOnOpen(),this.logEventOpen())},n.close=function(){this.visible&&(this.setVisible(!1),this.logPageviewOnClose())},n.incY=function(e){this.y+=e,this.background.y-=e},n.incX=function(e){this.x+=e,this.background.x-=e},n.incScale=function(e){this.scale+=e,this.background.scale-=e^e*(100/e)},n.setBlockInputOutsideEnabled=function(e){this.scene.input.setTopOnly(e)},n.addZone=function(){this.zone=this.scene.add.zone(0,0,this.width,this.height),this.zone.setInteractive({}),this.add(this.zone)},n.addBackground=function(){this.background=this.scene.add.image(0,0,vn.Z.GAMEPLAY_DEFAULT.KEY,"blank"),this.background.setWorldSize(this.width,this.height),this.add(this.background)},n.handleResize=function(){var e=this.scene.world.getWorldSize(),t=e.width,n=e.height;this.setSize(t,n).setPosition(t/2,n/2),this.zone.setSize(this.width,this.height),this.background.setDisplaySize(this.width,this.height)},n.logPageviewOnOpen=function(){this.scene.analytics.pageview(this.name)},n.logPageviewOnClose=function(){this.scene.analytics.pageview(this.scene.scene.key)},n.logEventOpen=function(){this.scene.analytics.event(mn._.SCREEN_OPEN,{screen_name:this.getScreenName()})},n.getScreenName=function(){return GameCore.Utils.String.toUpperCamelCase(this.name.toLowerCase())},t}(Phaser.GameObjects.Container),An=bn,En={OPEN:"open",CLOSE:"close",CREATED:"created"};GameCore.Screen=An,GameCore.Screens={Events:En};var Sn=function(e){function t(){for(var t,n,i=arguments.length,a=new Array(i),r=0;r<i;r++)a[r]=arguments[r];return(n=e.call.apply(e,_()(t=[this]).call(t,a))||this).events=void 0,n.screensLayer=void 0,n}(0,o.Z)(t,e);var n=t.prototype;return n.boot=function(){this.events=new gn,this.registryScreenFactory(),this.screensLayer=this.scene.add.layer(),this.screensLayer.setDepth(fn.Z.POPUP)},n.get=function(e){var t=this.screensLayer.getByName(e);return null===t?null:t},n.add=function(e,t,n,i){var a=this.get(e);return a||(a=this.scene.add.screen(e,t,n,i),this.screensLayer.add(a),this.events.emit(GameCore.Screens.Events.CREATED,a),a)},n.open=function(e,t){var n=this.get(e);return!!n&&(n.open(t),n.emit(GameCore.Screens.Events.OPEN,n),this.events.emit(GameCore.Screens.Events.OPEN,n),console.log("Screen open",e,t),!0)},n.close=function(e){var t=this.get(e);return!!t&&(t.close(),t.emit(GameCore.Screens.Events.CLOSE,t),this.events.emit(GameCore.Screens.Events.CLOSE,t),console.log("Screen close",e),!0)},n.bringToTop=function(e){var t=this.scene.children.getByName(e);t&&this.scene.children.bringToTop(t)},n.registryScreenFactory=function(){Phaser.GameObjects.GameObjectFactory.register("screen",this.createScreen)},n.createScreen=function(e,t,n,i){var a=new t(this.scene,e,n,i);return Phaser.Display.Align.In.Center(a,this.scene.gameZone),this.existing(a),a},t}(Phaser.Plugins.ScenePlugin),Tn=Sn,wn=n(406),Cn=n.n(wn),In=n(648),xn=n(650),Pn=n(649),kn={currentSceneKey:"",prevSceneKey:""};(0,Pn.pV)();var _n,On,Rn,Ln,Dn,Bn,Nn,Mn,Gn,Fn={processed:!1,contextId:"",contextType:"SOLO",entryPointData:{},currentGameMode:""},Zn=Fn,Un={data:{}},Hn={token:"",isRequesting:!1},Wn=((_n={})[pe]=function(e,t){return void 0===e&&(e=Hn),(0,Pn.ZP)(e,(function(e){var n=t.payload;if(n){var i=n.token;switch(t.type){case ue:e.isRequesting=!0;break;case he:e.token=i,e.isRequesting=!1}}}))},_n),zn=n(623),Yn={ASID:"",playerId:"",name:"",photo:"",locale:"",connectedPlayers:{},data:{score:0,settings:_e,userGuideDisplays:0,customFields:{coins:0,diamond:0,lastReceiveGift:0,dailyRewarded:{lastRewarded:0,logDays:[]},dailyTasks:{startedTime:0,logTasks:{}},game_stats:{},tournaments:[],current_board:{},lastCallSwitchGame:0,firstLoginDate:0}},isUserNew:!0},Vn=((On={})[mt]=function(e,t){return void 0===e&&(e=Yn),(0,Pn.ZP)(e,(function(n){var i=t.payload;if(i){var a=i.name,r=i.value,s=i.data,o=void 0===s?{}:s,c=i.score,l=i.connectedPlayers,u=void 0===l?[]:l,h=i.profile;switch(t.type){case ct:var d=i.playerId,f=i.name,p=i.photo,g=i.locale,m=i.data;if(n.playerId=d,n.name=f,n.photo=p,n.locale=g,GameCore.Utils.Valid.isObject(m)){var v=m;n.data=(0,zn.TS)(e.data,v)}m.userGuideDisplays>0&&(n.isUserNew=!1);break;case ht:var y=h.playerId,b=h.name,A=h.photo,E=h.locale,S=h.ASID;n.ASID=S,n.playerId=y,n.name=b,n.photo=A,n.locale=E;break;case ut:n.data.score=c;break;case dt:n.data.settings[a]=r;break;case lt:n.data=(0,zn.TS)(e.data,o),o.userGuideDisplays>0&&(n.isUserNew=!1);break;case ft:if(u.length<=0)break;var T=GameCore.Utils.Object.keyBy(u,"playerId");n.connectedPlayers=(0,zn.TS)(e.connectedPlayers,T)}}}))},On),Kn=n(592),jn=n.n(Kn),Xn={data:{},profileIds:[]},qn=((Rn={})[Wt]=function(e,t){return void 0===e&&(e=Xn),(0,Pn.ZP)(e,(function(n){var i=t.payload;if(i){var a=i.data,s=void 0===a?[]:a;if(t.type===Ht){var o,c,l=GameCore.Utils.Object.keyBy(s,"playerId"),u=ae()(l);n.data=(0,zn.TS)((0,r.Z)({},e.data),l),n.profileIds=_()(o=[]).call(o,new(jn())(_()(c=[]).call(c,e.profileIds,u)))}}}))},Rn),Jn="match",Qn="MATCH_GAMEPLAY_INITIALIZE",$n="MATCH_GAMEPLAY_START",ei="MATCH_GAMEPLAY_FINISH",ti="MATCH_GAMEPLAY_UPDATE",ni="MATCH_STATS_DATA_CLEAR",ii="MATCH_STATS_DATA_UPDATE",ai="MATCH_STATS_CURRENT_UPDATE",ri="MATCH_SINGLE_CREATE_REQUEST",si="MATCH_SINGLE_DETAIL_REQUEST",oi="MATCH_SINGLE_DATA_RECEIVED",ci="MATCH_SINGLE_DATA_CLEAR",li="MATCH_CHALLENGE_JOIN_REQUEST",ui="MATCH_CHALLENGE_CREATE_REQUEST",hi="MATCH_CHALLENGE_FINISH_REQUEST",di="MATCH_CHALLENGE_CONTINUE_REQUEST",fi="MATCH_CHALLENGE_DATA_RECEIVED",pi="MATCH_CHALLENGE_DATA_CLEAR",gi="MATCH_GROUP_CREATE_REQUEST",mi="MATCH_GROUP_FINISH_REQUEST",vi="MATCH_ONLINE_CREATE_REQUEST",yi="MATCH_ONLINE_DATA_RECEIVED",bi="open",Ai="active",Ei="finished",Si={mode:"",status:bi,rescued:0,startAt:0,finishAt:0},Ti={single:{_id:"",data:{fen:""},playerId:"",status:bi},group:{status:bi,opponentInfo:{playerId:"",name:"",photo:""}},challenge:{_id:"",status:bi,whitePlayerId:"",blackPlayerId:"",opponentInfo:{playerId:"",name:"",photo:""}},online:{_id:"",status:bi,players:{}},updateAt:0,isRequesting:!1},wi={current:{updateAt:0},data:{updateAt:0},isRequesting:!1},Ci=((Ln={})[Jn]=(0,In.UY)({gameplay:function(e,t){return void 0===e&&(e=Si),(0,Pn.ZP)(e,(function(n){var i=t.payload;if(i){var a=i.mode,r=i.status;switch(t.type){case Qn:n.status=bi,n.mode=Si.mode,n.rescued=Si.rescued,n.startAt=Si.startAt,n.finishAt=Si.finishAt,n.opponentInfo=Si.opponentInfo;break;case $n:n.mode=a,n.status=Ai,n.rescued=Si.rescued,n.startAt=Date.now();break;case ti:n.mode="string"===typeof a?a:e.mode,n.status=r||e.status;break;case ei:n.status=Ei,n.finishAt=Date.now();break;case"MATCH_GAMEPLAY_RESCUE":n.rescued+=1}}}))},match:function(e,t){return void 0===e&&(e=Ti),(0,Pn.ZP)(e,(function(n){var i=t.payload;if(i){var a=i.match,s=i.opponentInfo,o=i.players;switch(t.type){case ri:case si:case li:case hi:case vi:n.isRequesting=!0;break;case"MATCH_SINGLE_MOVE_UPDATED":n.single=(0,r.Z)({},e.single,a),n.updateAt=Date.now();break;case oi:n.isRequesting=!1,n.single=a||Ti.single;break;case ci:n.isRequesting=!1,n.single=Ti.single;break;case ui:case di:n.isRequesting=!0,n.challenge.opponentInfo=s;break;case fi:n.isRequesting=!1,n.challenge=(0,r.Z)({},a||Ti.challenge),n.challenge.opponentInfo=e.challenge.opponentInfo;break;case pi:n.isRequesting=!1,n.challenge=Ti.challenge;break;case gi:n.group.status=Ai,s&&(n.group.opponentInfo=s);break;case mi:n.group.status=Ei;break;case"MATCH_ONLINE_DATA_CLEAR":n.online.status=Ti.online.status,n.online.players=Ti.online.players;break;case yi:n.online.status=Ai,n.online.players=o;break;case"MATCH_ONLINE_FINISH_REQUEST":n.online.status=Ei}}}))},stats:function(e,t){return void 0===e&&(e=wi),(0,Pn.ZP)(e,(function(n){var i=t.payload;if(i){var a=i.playerId,s=i.stats,o=i.match,c=i.current,l=i.players,u=i.leaders;switch(t.type){case ni:delete n.data[a],n.current=wi.current;break;case"MATCH_STATS_CONTEXT_REQUEST":n.data=wi.data,n.isRequesting=!0;break;case"MATCH_STATS_CONTEXT_RECEIVED":n.data=s,n.isRequesting=!1;break;case ii:n.data[a]=s;break;case ai:n.current=(0,zn.TS)((0,r.Z)({},e.current),s);break;case yi:ae()(l).forEach((function(e){n.data[e]={score:0}}));break;case"MATCH_ONLINE_STATS_UPDATE":u.forEach((function(e){var t=e.playerId,i=e.score,a=e.rank;n.data[t]={score:i,rank:a}}));break;case fi:var h=o||{},d=h.blackPlayerId,f=h.blackPlayerScore,p=h.whitePlayerId,g=h.whitePlayerScore,m=h.whitePlayerLevel,v=h.blackPlayerLevel;if(!d||!p)break;c&&(n.current=c),n.data[d]={score:f,level:v},n.data[p]={score:g,level:m}}}}))}}),Ln),Ii="tournament",xi="TOURNAMENT_ACTIVE",Pi={active:!1,tournamentId:null,leaderboardId:null,bestSessionScore:0,isRequesting:!1},ki=((Dn={})[Ii]=function(e,t){return void 0===e&&(e=Pi),(0,Pn.ZP)(e,(function(n){var i=t.payload;if(i){var a=i.score,r=void 0===a?0:a,s=i.tournamentId,o=i.leaderboardId;switch(t.type){case xi:n.active=!0,n.tournamentId=s,n.leaderboardId=o;break;case"TOURNAMENT_REQUEST":n.isRequesting=!0;break;case"TOURNAMENT_RECEIVED":n.isRequesting=!1,r>e.bestSessionScore&&(n.bestSessionScore=r)}}}))},Dn),_i="leaderboards",Oi=n(103),Ri=n.n(Oi),Li=n(63),Di=n.n(Li),Bi="LEADERBOARD_DATA_REQUEST",Ni="LEADERBOARD_DATA_UPDATE",Mi="LEADERBOARD_DATA_CLEAR",Gi={leaderboardId:"",type:"",limit:0,offset:0,leaders:{},isRequesting:!1},Fi=((Bn={})[_i]=function(e,t){return void 0===e&&(e=Gi),(0,Pn.ZP)(e,(function(n){var i=t.payload;if(i){var a=i.leaderboardId,s=i.type,o=i.limit,c=i.offset,l=i.leaders;switch(t.type){case Bi:e.type!==s&&0===c&&(n.leaders=Gi.leaders),n.isRequesting=!0,n.leaderboardId=a,n.type=s,n.limit=o,n.offset=c;break;case Ni:if(n.isRequesting=!1,e.type!==s)break;var u=GameCore.Utils.Json.clone((0,r.Z)({},e.leaders,l)),h=Ri()(u),d=Re()(h).call(h,(function(e){return!!e.name&&!!e.photo}));Di()(d).call(d,(function(e,t){return+t.score-+e.score})),d.forEach((function(t,i){t.rank=i+1,e.leaders[t.playerId]||(n.leaders[t.playerId]=t)}));break;case Mi:n.isRequesting=!1,n.type=Gi.type,n.limit=Gi.limit,n.offset=Gi.offset,n.leaders=Gi.leaders,n.leaderboardId=Gi.leaderboardId}}}))},Bn),Zi={mission:null,missions:null,isRequesting:!1},Ui=((Nn={}).missions=function(e,t){return void 0===e&&(e=Zi),(0,Pn.ZP)(e,(function(n){var i,a,r=t.payload;if(r){var s=r.name,o=r.type,c=r.value,l=r.missions;switch(t.type){case"MISSIONS_DATA_REQUEST":n.isRequesting=!0;break;case"MISSIONS_DATA_RECEIVE":if(n.isRequesting=!1,l.length<1)return;n.missions={},l.forEach((function(e){n.missions[e.name]=e}));break;case"MISSION_START":if(null===e.missions)break;var u=e.missions[s];n.mission={name:s,process:{},require:u.require,reward:u.reward},ae()(u.require).forEach((function(e){n.mission.process[e]=0}));break;case"MISSION_UPDATE":if((null==(i=e.mission)?void 0:i.name)!==s)break;n.mission.process[o]+=c;break;case"MISSION_COMPLETED":if((null==(a=e.mission)?void 0:a.name)!==s)break;n.mission=null}}}))},Nn),Hi={tasks:[],process:[],isRequesting:!1,isNotice:!1},Wi=((Mn={}).dailyTasks=function(e,t){return void 0===e&&(e=Hi),(0,Pn.ZP)(e,(function(n){var i=t.payload;if(i){var a=i.id,r=i.type,s=i.value,o=i.tasks,c=i.process;switch(t.type){case"DAILY_TASKS_DATA_REQUEST":n.isRequesting=!0;break;case"DAILY_TASKS_DATA_RECEIVE":n.isRequesting=!1,n.tasks=o;break;case"DAILY_TASKS_PROCESS_UPDATE":n.process=c;break;case"DAILY_TASK_VALUE_ADD":if(!e.process[a])break;n.process[a][r]+=s;break;case"DAILY_TASK_REWARDED":if(!e.process[a])break;n.process[a].rewarded=!0;break;case"DAILY_TASKS_SEEN":n.isNotice=!1;break;case"DAILY_TASK_FINISHED":n.isNotice=!0}}}))},Mn),zi={rewards:[],isRequesting:!1},Yi=((Gn={}).dailyRewards=function(e,t){return void 0===e&&(e=zi),(0,Pn.ZP)(e,(function(e){var n=t.payload;if(n){var i=n.rewards;switch(t.type){case"DAILY_REWARDS_REQUEST":e.isRequesting=!0;break;case"DAILY_REWARDS_RECEIVE":e.isRequesting=!1,e.rewards=i}}}))},Gn),Vi=(0,In.UY)((0,r.Z)({scene:function(e,t){return void 0===e&&(e=kn),(0,Pn.ZP)(e,(function(n){var i=t.payload;if(i){var a=i.sceneKey;if(t.type===xn.DW)n.currentSceneKey=a,n.prevSceneKey=e.currentSceneKey}}))},context:function(e,t){return void 0===e&&(e=Fn),(0,Pn.ZP)(e,(function(e){var n=t.payload;if(n){var i=n.gameMode,a=n.contextId,r=n.contextType,s=n.entryPointData;switch(t.type){case xn.kL:e.contextId=a,e.contextType=r,e.entryPointData=s;break;case xn.fJ:e.contextId=a,e.contextType=r,e.processed=!0;break;case xn.EH:e.currentGameMode=i}}}))},messages:function(e,t){return void 0===e&&(e=Un),(0,Pn.ZP)(e,(function(n){var i=t.payload;if(i){var a=i.opponentId;if("string"===typeof a)switch(t.type){case xn.qj:e.data[a]?n.data[a].sent=!0:n.data[a]={sent:!0};break;case xn.rh:e.data[a]?n.data[a].sent=!1:n.data[a]={sent:!1}}}}))}},Wn,Vn,qn,Ci,ki,Fi,Ui,Wi,Yi)),Ki=n(647),ji=function(e){return(0,Ki.xC)({reducer:Vi,preloadedState:e,devTools:!0})},Xi=function(e){function t(){for(var t,n,i=arguments.length,a=new Array(i),r=0;r<i;r++)a[r]=arguments[r];return(n=e.call.apply(e,_()(t=[this]).call(t,a))||this).store=void 0,n.initiator=void 0,n.dispatch=function(e){return n.store.dispatch(e)},n.getState=function(){return n.store.getState()},n.subscribe=function(e){return n.store.subscribe(e)},n.watch=function(e,t){var i=Cn()((function(){var t=n.getState();return e(t)}));return n.subscribe(i((function(e){t(e)})))},n}(0,o.Z)(t,e);var n=t.prototype;return n.init=function(){this.store=ji({})},n.setInitiator=function(e){this.initiator=e},n.syncStore=function(){var e=(0,s.Z)(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.initiator.initContext(),e.next=3,this.initiator.initPlayer();case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.initPlayerManually=function(){var e=(0,s.Z)(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.initiator.initPlayer();case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),t}(Phaser.Plugins.BasePlugin),qi=Xi,Ji=n(595),Qi=n.n(Ji),$i=function(e){function t(t,n){var i;return(i=e.call(this,t,{type:"webfont",key:n.type})||this).payload=void 0,i.payload=n,i}(0,o.Z)(t,e);var n=t.prototype;return n.load=function(){var e;switch(this.payload.type){case"google":e=this.getGoogleFontConfig(this.payload);break;case"local":e=this.getLocalFontConfig(this.payload)}Qi().load(e)},n.getGoogleFontConfig=function(e){var t=this,n=e.character,i=e.fontName,a=e.fontWeight;return{google:{families:[i+":"+(void 0===a?400:a)],text:n},active:function(){t.loader.nextFile(t,!0)},timeout:15e3}},n.getLocalFontConfig=function(e){var t=this,n=e.fontName,i=e.fontType,a=document.createElement("style");document.head.appendChild(a);var r=a.sheet;if(r){var s="";switch(i){case"opentype":case"woff":s=".woff";break;case"truetype":s=".ttf"}var o='@font-face { font-family: "'+n+'"; src: url("assets/fonts/'+n+s+'") format("'+i+'"); }';r.insertRule(o,0)}return{custom:{families:[n]},active:function(){t.loader.nextFile(t,!0)},timeout:15e3}},t}(Phaser.Loader.File),ea=function(e){function t(){return e.apply(this,arguments)||this}return(0,o.Z)(t,e),t.prototype.addFont=function(e){var t=new $i(this.scene.load,e);this.scene.load.addFile(t)},t}(Phaser.Plugins.ScenePlugin),ta=ea,na=n(628),ia=function(e){function t(){return e.apply(this,arguments)||this}return(0,o.Z)(t,e),t.prototype.emit=function(t){return e.prototype.emit.call(this,t)},t}(Phaser.Events.EventEmitter),aa=ia,ra=n(652),sa=function(e){function t(){for(var t,n,i=arguments.length,a=new Array(i),r=0;r<i;r++)a[r]=arguments[r];return(n=e.call.apply(e,_()(t=[this]).call(t,a))||this).events=void 0,n.previousLayout=void 0,n.resizeEventData=void 0,n.portraitRatio=void 0,n.portraitWidth=void 0,n.portraitHeight=void 0,n.landscapeRatio=void 0,n.landscapeWidth=void 0,n.landscapeHeight=void 0,n.worldWidth=void 0,n.worldHeight=void 0,n.worldRatio=void 0,n.autoResize=void 0,n.disableLandscape=void 0,n.fullSizeOnLandscape=void 0,n.currentLayout=void 0,n.forcePixelRatio=void 0,n.handleResize=(0,na.D)((function(){n.previousLayout=""+n.currentLayout,n.initWorldSize(),n.resize()}),300),n}(0,o.Z)(t,e);var n=t.prototype;return n.configure=function(e){this.events=new aa;var t=e.autoResize,n=e.portraitRatio,i=e.portraitWidth,a=e.portraitHeight,r=e.landscapeWidth,s=e.landscapeHeight,o=e.landscapeRatio,c=e.disableLandscape,l=e.fullSizeOnLandscape;this.autoResize=t,this.disableLandscape=c,this.fullSizeOnLandscape=l,this.portraitRatio=n,this.portraitWidth=i,this.portraitHeight=a,this.landscapeRatio=o,this.landscapeWidth=r,this.landscapeHeight=s,this.initWorldSize(),this.addEventResize()},n.resize=function(e){var t=this;e&&e>0&&(this.forcePixelRatio=e);var n=this.getCanvasSizeFixedRatio(this.worldRatio),i=n.width,a=n.height;this.resizeCanvas(i,a),this.game.scene.scenes.forEach((function(e){var n=e.cameras.main;if(n){var i=t.getZoomRatio(),a=t.getWorldSize(),r=a.width,s=a.height;n.setZoom(i),n.centerOn(r/2,s/2)}}));var r={width:this.worldWidth,height:this.worldHeight,isLayoutChanged:!1,newLayout:this.currentLayout};this.previousLayout!==this.currentLayout&&(r.isLayoutChanged=!0,r.newLayout=this.currentLayout),this.resizeEventData=r,this.events.emit(ra.Z.RESIZE,r)},n.getResizeEventData=function(){return this.resizeEventData},n.resizeCanvas=function(e,t){this.game.canvas.width=e,this.game.canvas.height=t,this.game.scale.resize(e,t)},n.getWorldSize=function(){return{width:this.worldWidth,height:this.worldHeight}},n.initWorldSize=function(){if(this.worldWidth=this.portraitWidth,this.worldHeight=this.portraitHeight,this.isScreenSmallerRatio(this.portraitRatio))this.worldHeight=this.worldWidth/this.getScreenRatio();else if(!this.disableLandscape&&GameCore.Utils.Device.isDesktop()){var e=Math.min(this.getScreenRatio(),1);if(e<this.landscapeRatio?(this.worldWidth=this.landscapeWidth,this.worldHeight=this.worldWidth/e):(this.worldHeight=this.landscapeHeight,this.worldWidth=this.worldHeight*e),this.landscapeRatio=e,this.currentLayout="landscape",this.fullSizeOnLandscape){this.worldRatio=this.worldWidth/this.worldHeight,this.landscapeRatio=this.getScreenRatio();var t=this.getCanvasSizeFixedRatio(this.landscapeRatio),n=t.width,i=t.height,a=this.getZoomRatio();this.worldWidth=n/a,this.worldHeight=i/a}}this.worldRatio=this.worldWidth/this.worldHeight,console.info("\ud83d\ude80 > this.worldRatio",this.worldRatio)},n.getZoomRatio=function(){var e=this.getWorldSize().width;return this.getCanvasSizeFixedRatio(this.worldRatio).width/e},n.getPixelRatio=function(){if(this.forcePixelRatio>0)return this.forcePixelRatio;if(GameCore.Utils.Device.isDesktop())return 2;var e=GameCore.Utils.Device.pixelRatio();return e>2&&(e=2),e},n.getPixelRatioForCanvas=function(){if(this.forcePixelRatio>0)return this.forcePixelRatio;var e=Math.max(1.25,GameCore.Utils.Device.pixelRatio());return e>2&&(e=Math.min(Math.round(2*e)/2,2.5)),e},n.getPhysicPixels=function(e,t){return e*t},n.getCanvasSizeFixedRatio=function(e){var t=this.getPixelRatioForCanvas(),n=this.getScreenWidth()*t,i=this.getScreenHeight()*t;return this.isScreenSmallerRatio(e)?i=n/e:n=i*e,{width:n,height:i}},n.getScreenRatio=function(){return this.getScreenWidth()/this.getScreenHeight()},n.getScreenHeight=function(){var e=document,t=e.body,n=e.documentElement,i=t.clientHeight,a=n.clientHeight;return Math.max(a,i)||0},n.getScreenWidth=function(){var e=document,t=e.body,n=e.documentElement,i=t.clientWidth,a=n.clientWidth;return Math.max(a,i)||0},n.isScreenSmallerRatio=function(e){return this.getScreenRatio()<e},n.addEventResize=function(){this.autoResize&&window.addEventListener("resize",this.handleResize)},n.isLandscape=function(){return!this.disableLandscape&&this.worldRatio>this.portraitRatio},t}(Phaser.Plugins.BasePlugin),oa=sa,ca=function(){function e(e,t,n){this.contextId=void 0,this.contextType=void 0,this.entryPointData=void 0,this.contextId=e||Zn.contextId,this.contextType=t||Zn.contextType,this.entryPointData=n||Zn.entryPointData}return e.prototype.toObject=function(){return{contextId:this.contextId,contextType:this.contextType,entryPointData:this.entryPointData}},e}(),la=function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).name="InvalidPlayerId",i.message=t||"The playerId is not valid",i.payload=n,i}return(0,o.Z)(t,e),t}((0,z.Z)(Error)),ua="share_invite",ha="challenge_friend_match",da=n(645),fa=new pt.Z("10","Your Friend",da.Z.AVATAR.FILE).toObject(),pa="single",ga="challenge-friends",ma="matching-group",va="tournaments",ya=(0,fe.P1)([function(e){return e.context}],(function(e){return e})),ba=(0,fe.P1)([function(e){return e.context.currentGameMode}],(function(e){return e})),Aa=function(e,t){return{type:xn.fJ,payload:{contextId:e,contextType:t}}},Ea=function(e){return function(t){t({type:xn.EH,payload:{gameMode:e}}),(0,i.sw)("game-mode",e)}},Sa={score:"score",settings:"settings",gameData:"gameData",userGuideDisplays:"userGuideDisplays"},Ta=n(676),wa=GameCore.Configs.SyncProfileFromAPI,Ca=GameCore.Utils.Valid,Ia=function(e){var t=this;this.game=void 0,this.initContext=function(){var e=window.GameSDK.context.getID(),n=window.GameSDK.context.getType(),i=window.GameSDK.getEntryPointData(),a=new ca(e,n,i).toObject(),r=a.contextId,s=a.contextType,o=a.entryPointData;t.game.storage.dispatch(function(e,t,n){return{type:xn.kL,payload:{contextId:e,contextType:t,entryPointData:n}}}(r,s,o))},this.initPlayer=(0,s.Z)(h().mark((function e(){var n,i,a,r,s,o,c,l,u,d,f,p,g;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.game.player,r=t.getPlayerInfo(),s=Ri()(Sa),e.next=5,FBInstant.player.getDataAsync(s);case 5:return o=e.sent,console.info("\ud83d\ude80 > rawData",o),c=new it(o),console.info("\ud83d\ude80 > playerData",c),e.next=11,t.maintainDataStructure(c);case 11:return c=e.sent,!0===c.toObject().settings.music&&window.game.audio.playMusic(),l=c.convertToPlayerData(),u=l.settings.modifiedOptions,d=_e.autoMoveToFoundation,f=_e.tapToMove,p=_e.autoHints,g=_e.highlightLowCards,t.syncFirstLoginDate(l),console.info("\ud83d\ude80 > receivedData",l),we()(u).call(u,Ta.Z.autoMoveToFoundation)||(l.settings.autoMoveToFoundation=d),we()(u).call(u,Ta.Z.autoHints)||(l.settings.autoHints=p),we()(u).call(u,Ta.Z.tapToMove)||(l.settings.tapToMove=f),we()(u).call(u,Ta.Z.highlightLowCards)||(l.settings.highlightLowCards=g),console.info("\ud83d\ude80 > customFields",new Date(null!=(n=null==l||null==(i=l.customFields)?void 0:i.firstLoginDate)?n:0)),e.next=26,a.receiveData(r,l);case 26:case"end":return e.stop()}}),e)}))),this.syncFirstLoginDate=function(e){var t=e.customFields;if(t){var n=t.firstLoginDate;if(!(Ca.isNumber(n)&&n>0)){var i=t.game_stats,a=0===ae()(i).length;t.firstLoginDate=a?Date.now():Date.now()-864e5}}},this.maintainDataStructure=function(){var e=(0,s.Z)(h().mark((function e(t){var n,i,a,s;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,wa){e.next=3;break}return e.abrupt("return",t);case 3:return e.next=5,FBInstant.player.getDataAsync(["isSynced","customFields"]);case 5:if(e.t0=e.sent,e.t0){e.next=8;break}e.t0={};case 8:if(n=e.t0,!0!==(n.isSynced||!1)){e.next=12;break}return e.abrupt("return",t);case 12:return i=n.customFields||!1,(a=t.convertToPlayerData()).customFields=i,s=new it({}).convertToFacebookData(a),e.next=18,FBInstant.player.setDataAsync((0,r.Z)({},s,{isSynced:!0}));case 18:return e.abrupt("return",new it(s));case 21:return e.prev=21,e.t1=e.catch(0),console.warn(e.t1),e.abrupt("return",t);case 25:case"end":return e.stop()}}),e,null,[[0,21]])})));return function(t){return e.apply(this,arguments)}}(),this.getPlayerInfo=function(){try{var e=window.GameSDK.player.getID(),t=window.GameSDK.player.getName(),n=window.GameSDK.player.getPhoto(),i=window.GameSDK.getLocale();if(!GameCore.Utils.Valid.isString(e))throw new la(null,{playerId:e});return GameCore.Utils.Valid.isString(t)||(t="You"),new pt.Z(e,t,n,i).toObject()}catch(a){return new pt.Z("123","You").toObject()}},this.game=e},xa=n(657),Pa=GameCore.Ads.Types,ka=[mn._.BUTTON_CLICK,mn._.SCREEN_OPEN],_a=function(e){function t(t,n,i){var a;return(a=e.call(this,"FacebookAnalytics",{prefix:n},"#0F52BA")||this).game=void 0,a.game=t,a.selfLog=!!i,a}(0,o.Z)(t,e);var n=t.prototype;return n.processEvent=function(e,t,n){var i;if(!($t()(ka).call(ka,e)>=0)){var a=this.getEventName(e),r={};De()(i=ae()(t||{})).call(i,(function(e){t&&"string"===typeof t[e]&&(r[e]=t[e])})),FBInstant.logEvent(a,n,r)}},n.processPageView=function(e){},n.processLevelStart=function(e,t,n){this.processEvent(mn._.LEVEL_START,{level:e,score:t,level_name:n})},n.processLevelRescue=function(e,t,n){this.processEvent(mn._.LEVEL_RESCUE,{level:e,score:t,level_name:n})},n.processLevelFail=function(e,t,n){this.processEvent(mn._.LEVEL_END,{level:e,score:t,level_name:n,success:!1})},n.processLevelComplete=function(e,t,n){this.processEvent(mn._.LEVEL_END,{level:e,score:t,level_name:n,success:!0})},n.processLoadInterstitialAd=function(e){var t=this.getEdaType(Pa.INTERSTITIAL);this.processEvent(mn._.AD_LOAD,{ad_type:t,screen_name:""+e})},n.processShowInterstitialAd=function(e){var t=this.getEdaType(Pa.INTERSTITIAL);this.processEvent(mn._.AD_SHOW,{ad_type:t,screen_name:""+e})},n.processLoadRewardedVideoAd=function(e){var t=this.getEdaType(Pa.REWARDED);this.processEvent(mn._.AD_LOAD,{ad_type:t,screen_name:""+e})},n.processShowRewardedVideoAd=function(e){var t=this.getEdaType(Pa.REWARDED);this.processEvent(mn._.AD_SHOW,{ad_type:t,screen_name:""+e})},n.processLoadAdFail=function(e){var t=e.type,n=e.placement,i=this.getEdaType(t);this.processEvent(mn._.AD_LOAD_FAILED,{ad_type:i,screen_name:""+n})},n.processShowAdFail=function(e){var t=e.type,n=e.placement,i=this.getEdaType(t);this.processEvent(mn._.AD_SHOW_FAILED,{ad_type:i,screen_name:""+n})},n.getEventName=function(e){return this.options.prefix+"_"+e},n.getEdaType=function(e){switch(e){case Pa.INTERSTITIAL:return"interstitial";case Pa.REWARDED:return"rewarded_video";case Pa.BANNER:return"banner";case Pa.PRE_ROLL:return"pre_roll";default:return"unknown"}},t}(GameCore.Analytics.BaseAnalytics),Oa=GameCore.Ads.Types,Ra=[mn._.SCREEN_OPEN,"button_click","match_start","match_end","scroll"],La=function(e){function t(t,n){var i;(i=e.call(this,"GoogleAnalytics",(0,r.Z)({},n),"#E35335")||this).game=void 0,i.trackingId=void 0,i.currentPath="/";var a=n.trackingId;i.game=t;var s=(GameCore.Configs.Analytics.GoogleAnalytics||{}).consoleLog;return i.selfLog=!!s,i.trackingId=a,i}(0,o.Z)(t,e);var n=t.prototype;return n.processEvent=function(e,t,n){if(!($t()(Ra).call(Ra,e)>=0)){var i=this.formatEventName(e),a=t?(0,r.Z)({},t):{};a=n?(0,r.Z)({},a,{value:n}):a,a=(0,r.Z)({},a,{page_path:this.currentPath,send_to:"GA"}),gtag("event",i,a)}},n.processLevelStart=function(e,t,n){this.processEvent(mn._.LEVEL_START,{level:e,score:t,level_name:n})},n.processLevelRescue=function(e,t,n){this.processEvent(mn._.LEVEL_RESCUE,{level:e,score:t,level_name:n})},n.processLevelFail=function(e,t,n){this.processEvent(mn._.LEVEL_END,{level:e,score:t,level_name:n,success:!1})},n.processLevelComplete=function(e,t,n){this.processEvent(mn._.LEVEL_END,{level:e,score:t,level_name:n,success:!0})},n.processLoadPreRollAd=function(e,t){var n=this.getEdaType(Oa.PRE_ROLL);this.processEvent(mn._.AD_LOAD,{ad_type:n,screen_name:""+e,ad_service:""+t})},n.processShowPreRollAd=function(e,t){var n=this.getEdaType(Oa.PRE_ROLL);this.processEvent(mn._.AD_SHOW,{ad_type:n,screen_name:""+e,ad_service:""+t}),this.processEvent(mn._.AD_IMPRESSION,{ad_format:n})},n.processLoadInterstitialAd=function(e,t){var n=this.getEdaType(Oa.INTERSTITIAL);this.processEvent(mn._.AD_LOAD,{ad_type:n,screen_name:""+e,ad_service:""+t})},n.processShowInterstitialAd=function(e,t){var n=this.getEdaType(Oa.INTERSTITIAL);this.processEvent(mn._.AD_SHOW,{ad_type:n,screen_name:""+e,ad_service:""+t}),this.processEvent(mn._.AD_IMPRESSION,{ad_format:"Interstitial"})},n.processLoadRewardedVideoAd=function(e,t){var n=this.getEdaType(Oa.REWARDED);this.processEvent(mn._.AD_LOAD,{ad_type:n,screen_name:""+e,ad_service:""+t})},n.processShowRewardedVideoAd=function(e,t){var n=this.getEdaType(Oa.REWARDED);this.processEvent(mn._.AD_SHOW,{ad_type:n,screen_name:""+e,ad_service:""+t}),this.processEvent(mn._.AD_IMPRESSION,{ad_format:"Rewarded"})},n.processShowBannerAd=function(e,t,n){var i=this.getEdaType(Oa.BANNER);this.processEvent(mn._.AD_SHOW,{ad_type:i,banner_position:""+e,screen_name:""+t,ad_service:""+n})},n.processLoadAdFail=function(e){var t=e.type,n=e.placement,i=e.adService,a=this.getEdaType(t);this.processEvent(mn._.AD_LOAD_FAILED,{ad_type:a,screen_name:""+n,ad_service:""+i})},n.processShowAdFail=function(e){var t=e.type,n=e.placement,i=e.adService,a=e.bannerPosition,r={ad_type:this.getEdaType(t),screen_name:""+n,ad_service:""+i};t===Oa.BANNER&&(r.banner_position=""+a),this.processEvent(mn._.AD_SHOW_FAILED,r)},n.processPageView=function(e){var t=this.getGameplayMode(),n="/"+t+"/"+e;this.currentPath=n,document.title=this.formatPageTitle(t,e),this.processEvent("page_view")},n.getGameplayMode=function(){var e=this.game.storage.getState();return ba(e)},n.formatEventName=function(e){return e.toLowerCase().replace(/:/g,"_")},n.formatPageTitle=function(e,t){return this.toUpperCamelCaseWithSpace(e)+"::"+this.toUpperCamelCaseWithSpace(t)},n.toUpperCamelCaseWithSpace=function(e){var t=e.replace(/[-_\s.]+(.)?/g,(function(e,t){return t?" "+t.toUpperCase():""}));return t.substr(0,1).toUpperCase()+t.substr(1)},n.getEdaType=function(e){switch(e){case Oa.INTERSTITIAL:return"interstitial";case Oa.PRE_ROLL:return"pre_roll";case Oa.REWARDED:return"rewarded_video";case Oa.BANNER:return"banner";default:return"unknown"}},t}(GameCore.Analytics.BaseAnalytics),Da="G-6GQF9WK23J",Ba="null",Na=function(e){function t(){for(var t,n,a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=e.call.apply(e,_()(t=[this]).call(t,r))||this).startGame=(0,s.Z)(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n.auth.requestToken();case 3:return e.next=5,n.storage.syncStore();case 5:return n.configureSentry(),n.configureRollbar(),e.next=9,n.detectGameMode();case 9:n.initGoogleAnalytics(),n.analytics.event(mn._.LOAD_START),n.scene.launch(xa.C.GLOBAL_SCENE),n.scene.start(xa.C.LOAD_SCENE),n.analytics.pageview(xa.C.LOAD_SCENE),e.next=19;break;case 16:e.prev=16,e.t0=e.catch(0),(0,i.tO)(e.t0);case 19:return e.prev=19,n.facebook.progressLoading.finishLoadingProgressFbBootScene(),n.scene.sleep(xa.C.BOOT_SCENE),e.finish(19);case 23:case"end":return e.stop()}}),e,null,[[0,16,19,23]])}))),n}(0,o.Z)(t,e);var n=t.prototype;return n.create=function(){this.facebook.progressLoading.loadingProgressFbBootScene(),this.startGame()},n.configureSentry=function(){var e=this.player.getPlayer();(0,i.Tv)({id:e.playerId,username:e.name})},n.configureRollbar=function(){if(this.rollbar){var e=this.player.getPlayer();this.rollbar.configure({payload:{person:{id:e.playerId,name:e.name}}})}},n.detectGameMode=function(){var e=(0,s.Z)(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.storage.dispatch(function(){var e=(0,s.Z)(h().mark((function e(t,n){var i,a,r,s,o,c,l,u,d,f,p,g,m,v,y,b,A;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n(),r=ya(a),s=window.game.player,o=s.getPlayerId(),c=r.contextId,l=r.entryPointData,d=(u=l||{}).type,f=u.matchId,p=u.playerId,g=u.opponentId,m=void 0===g?fa.playerId:g,v=o===p,y=m===fa.playerId,b=y||we()(i=[m,p]).call(i,o),A=pa,e.prev=10,e.next=13,window.game.facebook.getTournamentAsync();case 13:A=va,e.next=18;break;case 16:e.prev=16,e.t0=e.catch(10);case 18:c&&d===ua&&!v&&(A=ga),f&&c&&b&&d===ha&&(A=ga),c&&"matching_group_match"===d&&(A=ma),t(Ea(A));case 22:case"end":return e.stop()}}),e,null,[[10,16]])})));return function(t,n){return e.apply(this,arguments)}}());case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.initGoogleAnalytics=function(){var e=this.player.getPlayerId();this.analytics.add(new La(this.game,{userId:e,trackingId:Ba,measuringId:Da,version:"10"}))},n.initFacebookAnalytics=function(){var e=GameCore.Configs.Analytics.FacebookAnalytics||{},t=e.prefix,n=e.consoleLog;"string"===typeof t?this.analytics.add(new _a(this.game,t,n)):console.error("FacebookAnalytics: prefix is not defined")},t}(Phaser.Scene),Ma=Na,Ga=n(671),Fa=function(e){function t(){for(var t,n,i=arguments.length,a=new Array(i),r=0;r<i;r++)a[r]=arguments[r];return(n=e.call.apply(e,_()(t=[this]).call(t,a))||this).run=function(){n.scene.switch(xa.C.GAME_SCENE),n.facebook.attemptToAddShortcut()},n}(0,o.Z)(t,e);var n=t.prototype;return n.preload=function(){this.events.on("wake",this.run),this.events.on("resume",this.run),this.events.on("create",this.run)},n.create=function(){e.prototype.create.call(this)},t}(Ga.Z);var Za=Fa,Ua=n(637),Ha=n(668),Wa={targets:[],duration:600,ease:Phaser.Math.Easing.Linear,props:{angle:{from:0,to:360}}},za=function(e){function t(t){return e.call(this,Wa,t)||this}return(0,o.Z)(t,e),t}(Ha.Z),Ya=vn.Z.DEFAULT,Va=Ya.KEY,Ka=Ya.FRAME,ja=function(e){function t(t){var n;return(n=e.call(this,t,0,0,Va,Ka.PRELOADER)||this).anim=void 0,n.runAnimation(),n.setWorldSize(56.5,56.5),n.scene.add.existing((0,Ua.Z)(n)),n}(0,o.Z)(t,e);var n=t.prototype;return n.runAnimation=function(){var e;null==(e=this.anim)||e.remove(),this.anim=new za({targets:[this],repeat:-1,duration:1200}),this.anim.play()},n.setVisible=function(t){return e.prototype.setVisible.call(this,t),t?this.runAnimation():this.anim.stop(),this},t}(Phaser.GameObjects.Image),Xa=ja,qa=n(660),Ja=n(658),Qa=n(677),$a=n(640),er="global",tr="friend",nr=GameCore.Configs,ir=nr.ApiHost,ar=nr.OtherHost,rr=nr.LeadersBoard,sr=rr.Prefix,or=rr.LeaderboardId,cr=rr.Name,lr=sr+"/"+or+"/leaders",ur=sr+"/"+or+"/players",hr=function(e){var t="";return or?(e===er?t=lr:e===tr&&(t=ur),t):t},dr=function(){var e=(0,s.Z)(h().mark((function e(t){var n,i,a,s,o,c;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=De()(t).call(t,(function(e){return e.playerId})),a=GameCore.Utils.Object.keyBy(t,"playerId"),s=GameCore.Utils.String.params({playerIds:i}),e.next=5,(0,at.U)("players?"+s,{},ir);case 5:return o=e.sent,c=De()(n=o.data).call(n,(function(e){var t=a[e.playerId];return(0,r.Z)({},e,{score:t.score,rank:t.rank,getScore:function(){return t.score},getFormattedScore:function(){return""},getTimestamp:function(){return(new Date).valueOf()},getRank:function(){return t.rank},getExtraData:function(){return t.extraData},getPlayer:function(){return{getName:function(){return e.name},getPhoto:function(){return e.photo},getID:function(){return e.playerId}}}})})),e.abrupt("return",c);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),fr=function(){var e=(0,s.Z)(h().mark((function e(t){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===t&&(t={}),null==or){e.next=3;break}return e.abrupt("return",pr(t));case 3:return e.abrupt("return",gr(t));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),pr=function(){var e=(0,s.Z)(h().mark((function e(t){var n,i,a,r,s;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===t&&(t={}),n=[],i=hr(er)){e.next=5;break}return e.abrupt("return",n);case 5:return a=GameCore.Utils.String.params(t),e.next=8,(0,at.U)(i+"?"+a,{},ar);case 8:if(r=e.sent,!((s=(null==r?void 0:r.data)||[]).length<1)){e.next=12;break}return e.abrupt("return",n);case 12:return n=s,e.abrupt("return",dr(n));case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),gr=function(){var e=(0,s.Z)(h().mark((function e(t){var n,i,a,r,s;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return void 0===t&&(t={}),i=(n=t).limit,a=n.offset,e.next=4,window.GameSDK.getLeaderboardAsync(cr);case 4:return r=e.sent,e.next=7,r.getEntriesAsync(i,a);case 7:return s=e.sent,e.abrupt("return",s);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),mr=function(){var e=(0,s.Z)(h().mark((function e(t){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===t&&(t={}),null==or){e.next=3;break}return e.abrupt("return",vr(t));case 3:return e.abrupt("return",yr(t));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),vr=function(){var e=(0,s.Z)(h().mark((function e(t){var n,i,a,r,s;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===t&&(t={}),n=[],i=hr(tr)){e.next=5;break}return e.abrupt("return",n);case 5:return a=GameCore.Utils.String.params(t),e.next=8,(0,at.U)(i+"?"+a,{},ar);case 8:if(r=e.sent,!((s=(null==r?void 0:r.data)||[]).length<1)){e.next=12;break}return e.abrupt("return",n);case 12:return n=s,e.abrupt("return",dr(n));case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),yr=function(){var e=(0,s.Z)(h().mark((function e(t){var n,i,a,r,s;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return void 0===t&&(t={}),i=(n=t).limit,a=n.offset,e.next=4,window.GameSDK.getLeaderboardAsync(cr);case 4:return r=e.sent,e.next=7,r.getConnectedPlayerEntriesAsync(i,a);case 7:return s=e.sent,e.abrupt("return",s);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),br=(function(){var e=(0,s.Z)(h().mark((function e(t){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==or){e.next=2;break}return e.abrupt("return",br(t));case 2:return e.abrupt("return",Ar());case 3:case"end":return e.stop()}}),e)})))}(),function(){var e=(0,s.Z)(h().mark((function e(t){var n,i,a,r,s;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=null,t){e.next=3;break}return e.abrupt("return",n);case 3:if(i=hr(tr)){e.next=6;break}return e.abrupt("return",n);case 6:return a=GameCore.Utils.String.params({playerIds:t}),e.next=9,(0,at.U)(i+"?"+a,{},ar);case 9:if(r=e.sent,!((s=(null==r?void 0:r.data)||[]).length<1)){e.next=13;break}return e.abrupt("return",n);case 13:return e.next=15,dr(s);case 15:return n=e.sent[0],e.abrupt("return",n);case 17:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),Ar=function(){var e=(0,s.Z)(h().mark((function e(){var t,n;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,window.GameSDK.getLeaderboardAsync(cr);case 2:return t=e.sent,e.next=5,t.getPlayerEntryAsync();case 5:return n=e.sent,e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Er=function(){var e=(0,s.Z)(h().mark((function e(t,n){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(window.GameSDK.submitGameResultsAsync(n).catch((function(e){console.log(e)})),null==or){e.next=5;break}if(""!==window.game.auth.getToken()){e.next=4;break}return e.abrupt("return",l().reject("Not logged in"));case 4:return e.abrupt("return",Sr(t,n));case 5:return e.abrupt("return",Tr(n));case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),Sr=function(){var e=(0,s.Z)(h().mark((function e(t,n){var i;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,at.v)("leaderboards/"+or+"/players/"+t,{score:n},{},ar);case 2:return i=e.sent,e.abrupt("return",(null==i?void 0:i.data)||{});case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),Tr=function(){var e=(0,s.Z)(h().mark((function e(t){var n;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,window.GameSDK.getLeaderboardAsync(cr);case 2:return n=e.sent,e.next=5,n.setScoreAsync(t);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();function wr(e,t){var n="undefined"!==typeof I()&&P()(e)||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){var n;if(!e)return;if("string"===typeof e)return Cr(e,t);var i=S()(n=Object.prototype.toString.call(e)).call(n,8,-1);"Object"===i&&e.constructor&&(i=e.constructor.name);if("Map"===i||"Set"===i)return w()(e);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return Cr(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var i=0;return function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Cr(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var Ir=GameCore.Configs.LeadersBoard,xr=Ir.UseMock,Pr=Ir.Limit,kr=Ir.MockOptions,_r=function(e,t,n,a){return void 0===n&&(n=Pr),void 0===a&&(a=0),function(){var r=(0,s.Z)(h().mark((function r(s){var o,c,l,u,d,f,p,g,m,v,y,b,A,E,S,T,w,C;return h().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(r.prev=0,o=window.game.player,c=o.getPlayerId(),s(Rr()),s({type:Bi,payload:{leaderboardId:e,type:t,limit:n,offset:a}}),!xr){r.next=11;break}return r.next=8,(0,$a.qZ)(1e3);case 8:return d=De()(l=Ft()(u=new Array(n)).call(u,null)).call(l,(function(e,t){var n=(t+1)*(a+1),i=kr.PlayerEntryIndex===t,r={playerId:"0"+n,name:"MPlayer "+n,photo:"./assets/images/others/avatar.png",rank:n,score:Math.floor(1e5/n)};if(i){var s=window.game.player.getPlayer(),o=s.playerId,c=s.name,l=s.photo;r.playerId=o,r.name=c,r.photo=l}return r})),s(Or(d,t)),r.abrupt("return");case 11:if(f=[],t!==er){r.next=18;break}return r.next=15,fr({limit:n,offset:a});case 15:f=r.sent,r.next=26;break;case 18:if(t!==tr){r.next=26;break}return(p=o.getConnectedPlayerIds(n,a)).push(c),g=GameCore.Utils.Array.unique(p),r.next=24,mr({playerIds:g,limit:g.length});case 24:f=r.sent,g.forEach((function(e){var t=Re()(f).call(f,(function(t){return t.playerId===e}));t&&0!==t.length||f.push({playerId:e,score:0})}));case 26:for(m={},v=wr(f);!(y=v()).done;)b=y.value,A=b.playerId,E=b.score,S=b.rank,T=b.getPlayer(),w=T.getPhoto(),C=T.getName(),m[A]={playerId:A,name:C,photo:w,score:E,rank:S};console.log("Request leaderboard data",m),s(Or(m,t)),r.next=36;break;case 32:r.prev=32,r.t0=r.catch(0),s(Or([],t)),(0,i.tO)(r.t0);case 36:case"end":return r.stop()}}),r,null,[[0,32]])})));return function(e){return r.apply(this,arguments)}}()},Or=function(e,t){return{type:Ni,payload:{leaders:e,type:t}}},Rr=function(){return{type:Mi,payload:{}}},Lr=function(e){return e[_i]},Dr=((0,fe.P1)([function(e){return Lr(e).leaderboardId}],(function(e){return e})),(0,fe.P1)([function(e){return Lr(e).leaders}],(function(e){return e}))),Br=(0,fe.P1)([function(e){return Lr(e).isRequesting}],(function(e){return e})),Nr=function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).name="InvalidContextId",i.message=t||"This contextId is not valid",i.payload=n,i}return(0,o.Z)(t,e),t}((0,z.Z)(Error)),Mr=function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).name="NewScoreIsBad",i.message=t||"The new score is bad",i.payload=n,i}return(0,o.Z)(t,e),t}((0,z.Z)(Error)),Gr=function(e){return e[Ii]},Fr=((0,fe.P1)([function(e){return Gr(e).active}],(function(e){return e})),(0,fe.P1)([function(e){return Gr(e).tournamentId}],(function(e){return e}))),Zr=((0,fe.P1)([function(e){return Gr(e).bestSessionScore}],(function(e){return e})),(0,fe.P1)([function(e){return Gr(e).isRequesting}],(function(e){return e})),(0,fe.P1)([function(e){return Gr(e).leaderboardId}],(function(e){return e}))),Ur=n(661);function Hr(e,t){var n="undefined"!==typeof I()&&P()(e)||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){var n;if(!e)return;if("string"===typeof e)return Wr(e,t);var i=S()(n=Object.prototype.toString.call(e)).call(n,8,-1);"Object"===i&&e.constructor&&(i=e.constructor.name);if("Map"===i||"Set"===i)return w()(e);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return Wr(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var i=0;return function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Wr(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}GameCore.Configs.Tournament.UseLeaderboard;var zr=function(e,t){return void 0===t&&(t=""),{type:xi,payload:{tournamentId:e,leaderboardId:t}}},Yr=function(e){return function(){var t=(0,s.Z)(h().mark((function t(n){var i,a,r,s,o,c,l,u,d,f;return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,i=window.game.facebook,a=e.playerId,r=e.playerName,s=e.score,o=e.level,c=e.autoStartGame,l=r+"'s Tournament",u=GameCore.Utils.String.generateObjectId(),t.next=7,i.tournament.createAsync({initialScore:s,config:{title:l,tournamentTitle:l},data:{playerId:a,playerName:r,leaderboardId:u,level:o}});case 7:return d=t.sent,f=d.getID(),c&&n(zr(f,u)),t.next=12,(0,Ur.Z5)({_id:u,createdBy:a,name:l,description:N()({contextID:f,tournamentID:f}),type:"tournament_leaderboard",expireTime:604800});case 12:if(t.sent._id!==u){t.next=16;break}return t.next=16,(0,Ur.bh)(u,a,s);case 16:window.game.player.joinTournament({leaderboardId:u,endTime:d.getEndTime(),level:o}),e.success=!0,t.next=24;break;case 20:throw t.prev=20,t.t0=t.catch(0),e.success=!1,t.t0;case 24:case"end":return t.stop()}}),t,null,[[0,20]])})));return function(e){return t.apply(this,arguments)}}()},Vr=function(e){return(0,s.Z)(h().mark((function t(){var n,i,a,r,s;return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=window.game.facebook,i=e.playerId,a=e.playerName,r=e.score,s={score:r,data:{type:"tournament",playerId:i,playerName:a}},t.next=5,n.tournament.shareAsync(s);case 5:case"end":return t.stop()}}),t)})))},Kr=(function(){var e=(0,s.Z)(h().mark((function e(){var t,n,i,a,r,s,o,c,l;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=window.game.facebook,e.next=4,t.getTournamentAsync();case 4:if(n=e.sent,null!=(i=JSON.parse(n.getPayload()||"{}")).leaderboardId){e.next=21;break}return e.next=9,(0,Ur.Iy)();case 9:a=e.sent,r=n.getContextID(),s={payload:{}},o=Hr(a);case 13:if((c=o()).done){e.next=20;break}if((l=c.value).contextID!==r){e.next=18;break}return s=l,e.abrupt("return",s.payload.leaderboardId);case 18:e.next=13;break;case 20:return e.abrupt("return",s.payload.leaderboardId||"");case 21:return e.abrupt("return",i.leaderboardId);case 24:return e.prev=24,e.t0=e.catch(0),e.abrupt("return",null);case 27:case"end":return e.stop()}}),e,null,[[0,24]])})))}(),0),jr=!1,Xr=0,qr=!1,Jr=(function(){var e=(0,s.Z)(h().mark((function e(t,n){var i,a,r,s,o,c,l,u,d,f;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=window.game,a=i.player,r=i.facebook,s=a.getPlayer(),o=s.playerId,c=s.name,l=a.getBestScore(),e.prev=3,e.next=6,r.getTournamentAsync();case 6:if(u=Zr(n),!Qr(t,l)){e.next=15;break}return Kr+=1,d={playerId:o,playerName:c,score:t,leaderboardId:u},e.next=12,window.game.storage.dispatch(Vr(d)).then((function(){jr=!0}));case 12:jr=!0,e.next=17;break;case 15:return e.next=17,r.tournament.postScoreAsync(t);case 17:e.next=28;break;case 19:if(e.prev=19,e.t0=e.catch(3),"TOURNAMENT_NOT_FOUND"!==(null==e.t0?void 0:e.t0.code)){e.next=28;break}if(Jr(t,l)){e.next=24;break}return e.abrupt("return");case 24:return Xr+=1,f={playerId:o,playerName:c,score:t,autoStartGame:!1},e.next=28,window.game.storage.dispatch(Yr(f)).then((function(){qr=!0})).catch((function(){}));case 28:return e.prev=28,e.finish(28);case 30:case"end":return e.stop()}}),e,null,[[3,19,28,30]])})))}(),function(e,t){return!window.game.player.getPlayerIsNew()&&e>t||!(qr||Xr>1)&&Math.random()<.5}),Qr=function(){return!(jr||Kr>1)},$r=(function(){var e=(0,s.Z)(h().mark((function e(t){var n,i,a,r;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=window.game,i=n.player,a=n.facebook,r=i.getBestScore(),e.prev=2,e.next=5,a.getTournamentAsync();case 5:if(!Qr(t,r)){e.next=12;break}return Kr+=1,e.next=9,a.tournament.shareAsync({score:t});case 9:jr=!0,e.next=14;break;case 12:return e.next=14,a.tournament.postScoreAsync(t);case 14:e.next=24;break;case 16:if(e.prev=16,e.t0=e.catch(2),"TOURNAMENT_NOT_FOUND"!==e.t0.code){e.next=24;break}if(Jr(t,r)){e.next=21;break}return e.abrupt("return");case 21:return Xr+=1,e.next=24,a.tournament.createAsync(t).then((function(){qr=!0})).catch((function(e){}));case 24:case"end":return e.stop()}}),e,null,[[2,16]])})))}(),function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).name="InvalidMatchId",i.message=t||"Invalid match id",i.payload=n,i}return(0,o.Z)(t,e),t}((0,z.Z)(Error))),es=function(e){return e[Jn]},ts=(0,fe.P1)([function(e){return es(e).gameplay.mode}],(function(e){return e})),ns=((0,fe.P1)([function(e){return es(e).gameplay.status}],(function(e){return e})),(0,fe.P1)([function(e){return es(e).gameplay.rescued}],(function(e){return e})),(0,fe.P1)([function(e){return es(e).gameplay.startAt}],(function(e){return e})),(0,fe.P1)([function(e){return es(e).gameplay.finishAt}],(function(e){return e})),function(e,t){return t.playerId}),is=function(e){return es(e).match.challenge},as=((0,fe.P1)([function(e){return es(e).match.isRequesting}],(function(e){return e})),(0,fe.P1)([function(e){return es(e).match.single}],(function(e){return e}))),rs=(0,fe.P1)([function(e){return es(e).match.single._id}],(function(e){return e})),ss=(0,fe.P1)([function(e){return es(e).match.single.score}],(function(e){return e||0})),os=((0,fe.P1)([function(e){return es(e).match.single.level}],(function(e){return e||0})),(0,fe.P1)([function(e){var t;return null==(t=es(e).match.single.data)?void 0:t.diamond}],(function(e){return e||0})),(0,fe.P1)([function(e){var t;return null==(t=es(e).match.single.data)?void 0:t.fen}],(function(e){return e||null})),(0,fe.P1)([function(e){return es(e).match.single.status}],(function(e){return e})),(0,fe.P1)([function(e){return es(e).match.single.playerId}],(function(e){return e})),(0,fe.P1)([is],(function(e){return e}))),cs=(0,fe.P1)([function(e){return es(e).match.challenge._id}],(function(e){return e})),ls=(0,fe.P1)([function(e){return es(e).match.challenge.status}],(function(e){return e})),us=(0,fe.P1)([function(e){return es(e).match.challenge.opponentInfo}],(function(e){return e})),hs=((0,fe.P1)([function(e){return es(e).match.challenge.whitePlayerId}],(function(e){return e})),(0,fe.P1)([function(e){return es(e).match.challenge.blackPlayerId}],(function(e){return e})),(0,fe.P1)([os,ns],(function(e,t){var n=e.whitePlayerId,i=e.blackPlayerId;return n!==t&&i===t?n:i!==t&&n===t?i:""})),(0,fe.P1)([os,ns],(function(e,t){var n=e.whitePlayerId,i=e.blackPlayerId;return n===t?n:i===t?i:fa.playerId}))),ds=(0,fe.P1)([os,ns],(function(e,t){var n=e.whitePlayerId,i=e.blackPlayerId,a=e.whitePlayerFinish,r=e.blackPlayerFinish;return t&&n===t?a:!(!t||i!==t)&&r})),fs=(0,fe.P1)([os,function(e,t){return t.opponentId}],(function(e,t){var n=e.whitePlayerId,i=e.blackPlayerId,a=e.whitePlayerFinish,r=e.blackPlayerFinish;return t&&n===t?a:!(!t||i!==t)&&r})),ps=(0,fe.P1)([is],(function(e){return e.extraData})),gs=(0,fe.P1)([function(e){return es(e).match.group.opponentInfo}],(function(e){return e})),ms=((0,fe.P1)([function(e){return es(e).match.online.players}],(function(e){return e})),(0,fe.P1)([function(e){return es(e).match.journey}],(function(e){return e})),(0,fe.P1)([function(e){return es(e).match.journey._id}],(function(e){return e})),(0,fe.P1)([function(e){return es(e).match.journey.level}],(function(e){return e})),(0,fe.P1)([function(e){return es(e).match.challenge.matchResultFromMessage}],(function(e){return e})),(0,fe.P1)([function(e){return es(e).stats.data}],(function(e){return e}))),vs=(0,fe.P1)([function(e){return es(e).stats.current}],(function(e){return e})),ys=((0,fe.P1)([function(e){return es(e).stats.isRequesting}],(function(e){return e})),function(e){try{var t=localStorage.getItem(e);return null===t?null:GameCore.Utils.Json.decode(t)}catch(n){return null}}),bs=function(e,t){try{var n=ys(e),i={};GameCore.Utils.Valid.isObject(n)&&(i=n);var a=GameCore.Utils.Json.clone(t);if(!GameCore.Utils.Valid.isObject(a))return!1;var r=GameCore.Utils.Object.clear(a),s=(0,zn.TS)(i,r),o=GameCore.Utils.Json.encode(s);return localStorage.setItem(e,o),!0}catch(c){return!1}},As=GameCore.Configs.ApiHost,Es=(function(){var e=(0,s.Z)(h().mark((function e(t){var n;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"single-matches",e.next=3,(0,at.v)("single-matches",t,{},As);case 3:return n=e.sent,e.abrupt("return",(null==n?void 0:n.data)||{});case 5:case"end":return e.stop()}}),e)})))}(),function(){var e=(0,s.Z)(h().mark((function e(){var t;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"single-matches/active",e.next=3,(0,at.U)("single-matches/active",{},As);case 3:return t=e.sent,e.abrupt("return",(null==t?void 0:t.data)||{});case 5:case"end":return e.stop()}}),e)})))}(),function(){var e=(0,s.Z)(h().mark((function e(t,n){var i,a;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i="single-matches/"+t+"/move",e.next=3,(0,at.v)(i,n,{},As);case 3:return a=e.sent,e.abrupt("return",(null==a?void 0:a.data)||{});case 5:case"end":return e.stop()}}),e)})))}(),function(){var e=(0,s.Z)(h().mark((function e(t){var n,i;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="single-matches/"+t+"/finish",e.next=3,(0,at.v)(n,{},{},As);case 3:return i=e.sent,e.abrupt("return",(null==i?void 0:i.data)||{});case 5:case"end":return e.stop()}}),e)})))}(),function(){var e=(0,s.Z)(h().mark((function e(t,n){var i;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"matches",e.next=3,(0,at.v)("matches",{opponentPlayerId:t,extraData:n},{},As);case 3:return i=e.sent,e.abrupt("return",(null==i?void 0:i.data)||{});case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),Ss=function(){var e=(0,s.Z)(h().mark((function e(t){var n,i;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="matches/"+t+"/join",e.next=3,(0,at.v)(n,{},{},As);case 3:return i=e.sent,e.abrupt("return",(null==i?void 0:i.data)||{});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ts=function(){var e=(0,s.Z)(h().mark((function e(t){var n,i;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="matches/"+t,e.next=3,(0,at.U)(n,{},As);case 3:return i=e.sent,e.abrupt("return",(null==i?void 0:i.data)||{});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ws=function(){var e=(0,s.Z)(h().mark((function e(t,n,i,a){var r,s;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r="matches/"+t+"/finish",e.next=3,(0,at.v)(r,{matchId:t,score:n,level:i,extraData:a},{},As);case 3:return s=e.sent,e.abrupt("return",(null==s?void 0:s.data)||{});case 5:case"end":return e.stop()}}),e)})));return function(t,n,i,a){return e.apply(this,arguments)}}(),Cs=function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).name="InvalidMatchStatus",i.message=t||"The match status is not valid",i.payload=n,i}return(0,o.Z)(t,e),t}((0,z.Z)(Error)),Is=function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).name="InvalidOpponentId",i.message=t||"Invalid opponent id",i.payload=n,i}return(0,o.Z)(t,e),t}((0,z.Z)(Error)),xs=function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).name="InvalidBlackPlayerId",i.message=t||"Invalid black player id",i.payload=n,i}return(0,o.Z)(t,e),t}((0,z.Z)(Error)),Ps=function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).name="InvalidRequestedMatchId",i.message=t||"The matchId in match data not matched with requested matchId",i.payload=n,i}return(0,o.Z)(t,e),t}((0,z.Z)(Error)),ks=function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).name="InvalidWhitePlayerId",i.message=t||"Invalid white player id",i.payload=n,i}return(0,o.Z)(t,e),t}((0,z.Z)(Error)),_s=function(e){var t=e.matchId,n=e.currentMatchId;if(""===t||"string"!==typeof t)throw new $r(null,{matchId:t});if(""===n||"string"!==typeof n)throw new $r(null,{currentMatchId:n});if(t!==n)throw new Ps(null,{matchId:t,currentMatchId:n})},Os=function(e){var t=e.playerId,n=e.match,i=n._id,a=n.playerId,r=n.status;if(""===i||"string"!==typeof i)throw new $r(null,{matchId:i});if("finished"===r||"string"!==typeof r)throw new Cs("This match is finished",{status:r});if(a!==t)throw new la(null,{playerId:a,currentPlayerId:t})},Rs=function(e){var t=e.opponentId;if(""===t||"string"!==typeof t)throw new Is(null,{opponentId:t})},Ls=function(e){var t=e.matchId;if(""===t||"string"!==typeof t)throw new $r(null,{matchId:t})},Ds=function(e){var t=e.match,n=t._id,i=t.whitePlayerId,a=t.blackPlayerId;if(""===n||"string"!==typeof n)throw new $r(null,{matchId:n});if(""===i||"string"!==typeof i)throw new ks(null,{whitePlayerId:i});if(""===a||"string"!==typeof a)throw new xs(null,{blackPlayerId:a})},Bs=GameCore.Configs.Match,Ns=function(e){try{return GameCore.Utils.Hash.stringToHash(N()(e))}catch(t){return""}},Ms=function(e){try{return JSON.parse(GameCore.Utils.Hash.hashToString(e))}catch(t){return""}},Gs=function(){return function(){var e=(0,s.Z)(h().mark((function e(t){var n,a,s,o;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.prev=0,n=window.game,a=n.player,n.globalScene.screen.open(qa.o4.NOTIFY_SCREEN,{message:"loading",loading:!0}),t({type:ri,payload:{}}),s=a.getPlayerId(),o=(0,r.Z)({},Bs.LocalSingleMatchDefault,{status:"active",playerId:s,startedAt:Date.now()}),Os({playerId:s,match:o}),t(Zs(o)),bs(Bs.SingleMatchStore,o),e.next=19;break;case 11:if(e.prev=11,e.t0=e.catch(0),t(Zs(null)),!(e.t0 instanceof $r)){e.next=16;break}return e.abrupt("return");case 16:if(!(e.t0 instanceof Cs)){e.next=18;break}return e.abrupt("return");case 18:(0,i.tO)(e.t0);case 19:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t){return e.apply(this,arguments)}}()},Fs=function(e){return function(){var t=(0,s.Z)(h().mark((function t(n,a){var s,o,c,l,u,d,f,p;return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:t.prev=0,s=window.game.player,Ls({matchId:e}),o=a(),c=rs(o),l=s.getPlayerId(),_s({matchId:e,currentMatchId:c}),n({type:"MATCH_SINGLE_FINISH_REQUEST",payload:{matchId:e}}),u=as(o),Os({playerId:l,match:u}),d=(0,r.Z)({},Bs.LocalSingleMatchDefault,u,{_id:e,status:"finished",playerId:l,finishAt:Date.now()}),n(Zs(d)),f=d.data,(p=(0,r.Z)({},d)).data=Ns(f),bs(Bs.SingleMatchStore,p),t.next=26;break;case 18:if(t.prev=18,t.t0=t.catch(0),n(Zs(null)),!(t.t0 instanceof $r)){t.next=23;break}return t.abrupt("return");case 23:if(!(t.t0 instanceof Cs)){t.next=25;break}return t.abrupt("return");case 25:(0,i.tO)(t.t0);case 26:case"end":return t.stop()}}),t,null,[[0,18]])})));return function(e,n){return t.apply(this,arguments)}}()},Zs=function(e){return{type:oi,payload:{match:e}}},Us=function(){return{type:ci,payload:{}}},Hs=function(e,t){return function(){var n=(0,s.Z)(h().mark((function n(a){var r,s,o,c;return h().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,r=window.game,s=r.profile,r.globalScene.screen.open(qa.o4.NOTIFY_SCREEN,{message:"loading",loading:!0}),o=e.playerId,Rs({opponentId:o}),a({type:ui,payload:{opponentInfo:e,extraData:t}}),n.next=8,Es(o,t);case 8:return c=n.sent,Ds({match:c}),n.next=12,s.requestProfiles([o]);case 12:a(Vs(c)),n.next=23;break;case 15:if(n.prev=15,n.t0=n.catch(0),a(Vs(null)),!(n.t0 instanceof $r)){n.next=20;break}return n.abrupt("return");case 20:if(!(n.t0 instanceof Is)){n.next=22;break}return n.abrupt("return");case 22:(0,i.tO)(n.t0);case 23:case"end":return n.stop()}}),n,null,[[0,15]])})));return function(e){return n.apply(this,arguments)}}()},Ws=function(e){return function(){var t=(0,s.Z)(h().mark((function t(n){var a,r,s,o,c,l,u,d,f;return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a=window.game,r=a.player,s=a.profile,a.globalScene.screen.open(qa.o4.NOTIFY_SCREEN,{message:"loading",loading:!0}),Ls({matchId:e}),n({type:li,payload:{matchId:e}}),t.next=7,Ss(e);case 7:if(o=t.sent,Ds({match:o}),c=o.status,l=o.whitePlayerId,u=o.blackPlayerId,c!==Ai){t.next=16;break}return d=r.getPlayerId(),f=d===l?u:l,t.next=16,s.requestProfiles([f]);case 16:n(Vs(o)),t.next=25;break;case 19:if(t.prev=19,t.t0=t.catch(0),n(Vs(null)),!(t.t0 instanceof $r)){t.next=24;break}return t.abrupt("return");case 24:(0,i.tO)(t.t0);case 25:case"end":return t.stop()}}),t,null,[[0,19]])})));return function(e){return t.apply(this,arguments)}}()},zs=function(e,t){return function(){var n=(0,s.Z)(h().mark((function n(a){var r,s,o,c,l,u,d,f,p;return h().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,r=window.game,s=r.player,r.globalScene.screen.open(qa.o4.NOTIFY_SCREEN,{message:"loading",loading:!0}),Ls({matchId:e}),a({type:di,payload:{matchId:e,opponentInfo:t}}),n.next=7,Ts(e);case 7:o=n.sent,Ds({match:o}),c=o.whitePlayerId,l=o.whitePlayerScore,u=o.blackPlayerScore,d=s.getPlayerId(),f=s.getPlayerData(),p=f.score,a(Vs(o,{score:d===c?l:u,bestScore:p})),n.next=23;break;case 17:if(n.prev=17,n.t0=n.catch(0),a(Vs(null)),!(n.t0 instanceof $r)){n.next=22;break}return n.abrupt("return");case 22:(0,i.tO)(n.t0);case 23:case"end":return n.stop()}}),n,null,[[0,17]])})));return function(e){return n.apply(this,arguments)}}()},Ys=function(e,t,n){return function(){var a=(0,s.Z)(h().mark((function a(r){var s,o;return h().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,Ls({matchId:e}),r({type:hi,payload:{matchId:e,score:t,extraData:n}}),s=n.level,a.next=6,ws(e,t,s,n);case 6:return o=a.sent,Ds({match:o}),a.next=10,r(Vs(o));case 10:a.next=18;break;case 12:if(a.prev=12,a.t0=a.catch(0),r(Vs(null)),!(a.t0 instanceof $r)){a.next=17;break}return a.abrupt("return");case 17:(0,i.tO)(a.t0);case 18:case"end":return a.stop()}}),a,null,[[0,12]])})));return function(e){return a.apply(this,arguments)}}()},Vs=function(e,t,n){return void 0===n&&(n=null),{type:fi,payload:{match:e,opponentInfo:t,current:n}}},Ks=function(e){return{type:gi,payload:{opponentInfo:e}}},js=function(e,t){return{type:yi,payload:{matchId:e,players:t}}},Xs=function(e){return{type:ni,payload:{playerId:e}}},qs=function(e,t){return{type:ii,payload:{playerId:e,stats:t}}},Js=function(e){return{type:ai,payload:{stats:e}}},Qs=function(e){return e.GAME_MODE_CHANGED="game-mode-changed",e.BACKGROUND_CHANGED="background-changed",e.GAME_START="game-start",e}(Qs||{}),$s=Qs,eo=function(e){return e.SINGLE="single",e.CHALLENGE_FRIENDS="challenge-friends",e.TOURNAMENT="tournaments",e}(eo||{}),to=eo,no=function(e){function t(){var t;return(t=e.call(this)||this).gameMode=void 0,t.autoPlaySingleMode=void 0,t.friendsChallenged=void 0,t.isGameLoadedInTournament=!1,t.gameMode=to.SINGLE,t.autoPlaySingleMode=!0,t.friendsChallenged=[],t}(0,o.Z)(t,e);var n=t.prototype;return n.setGameMode=function(e){this.gameMode=e,console.log("\ud83e\udd16 ? Set game mode:",this.gameMode),this.emit($s.GAME_MODE_CHANGED)},n.getGameMode=function(){return this.gameMode},n.isSingleMode=function(){return this.gameMode==to.SINGLE},n.isChallengeMode=function(){return this.gameMode==to.CHALLENGE_FRIENDS},n.isTournamentMode=function(){return this.gameMode===to.TOURNAMENT},(0,le.Z)(t,null,[{key:"instance",get:function(){return this._instance||(this._instance=new t)}}]),t}(Phaser.Events.EventEmitter);no._instance=void 0;var io=no,ao=function(e){var t=e.contextId;if(""===t||"string"!==typeof t)throw new Nr(null,{contextId:t})},ro=null,so=function(e){clearTimeout(ro),ro=setTimeout((function(){window.game.globalScene.screen.close(qa.o4.NOTIFY_SCREEN)}),e)},oo=function(e){return function(t){try{if(t(Us()),e){var n=e.getPayload(),a=e.getID();if(n){var r=JSON.parse(n).leaderboardId;t(zr(a.toString(),r))}}t(mo(va))}catch(s){(0,i.tO)(s)}}},co=function(){return function(){var e=(0,s.Z)(h().mark((function e(t){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{t(Us()),t(mo(pa))}catch(n){(0,i.tO)(n)}case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},lo=function(e,t){return void 0===e&&(e="10"),void 0===t&&(t=!1),function(n){try{n(uo("reset",e,t))}catch(a){(0,i.tO)(a)}}},uo=function(e,t,n){return void 0===t&&(t="10"),void 0===n&&(n=!1),function(){var a=(0,s.Z)(h().mark((function a(r){var s,o,c,l,u,d,f,p,g,m,v,y,b,A,E,S,T,w;return h().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(a.prev=0,s=window.game,o=s.player,c=s.facebook,(l=s.globalScene).screen.open(qa.o4.NOTIFY_SCREEN,{message:"loading",loading:!0}),u=e,d=c.contextType,t||(f=GameCore.Configs.PlayerIdMock,p=GameCore.Configs.PlayerIdMock2,t=o.getPlayerId()===f?p:f),e){a.next=30;break}return a.next=9,c.chooseAsync();case 9:if(!1!==(u=a.sent)){a.next=18;break}if(n&&l.events.emit(xa.K.SWITCH,xa.C.DASHBOARD_SCENE),!io.instance.autoPlaySingleMode){a.next=17;break}return a.next=15,yo();case 15:return r(co()),a.abrupt("return");case 17:return a.abrupt("return");case 18:return a.prev=18,a.next=21,window.game.facebook.getTournamentAsync();case 21:return g=a.sent,r(oo(g)),a.abrupt("return");case 26:a.prev=26,a.t0=a.catch(18);case 28:a.next=40;break;case 30:if(!t||t===fa.playerId){a.next=38;break}return a.next=33,c.createAsync(t);case 33:if(!1!==(u=a.sent)){a.next=37;break}return n&&l.events.emit(xa.K.SWITCH,xa.C.DASHBOARD_SCENE),a.abrupt("return");case 37:u||"reset"===e||(u=e);case 38:d=c.contextType,r(Aa(u,d));case 40:return ao({contextId:u}),m=o.getPlayerId(),v=o.getConnectedPlayers(),a.next=45,c.getContextPlayers(m);case 45:return y=a.sent,t!==(b=fa).playerId&&v[t]?b=v[t]:1===y.length&&(b=y[0]),r(Xs()),E=(A=b).playerId,S=A.name,T=A.photo,w={playerId:E,name:S,photo:T},a.next=53,r(mo(ga,w));case 53:r(Aa(u,d)),a.next=65;break;case 56:if(a.prev=56,a.t1=a.catch(0),!(a.t1 instanceof Nr)){a.next=60;break}return a.abrupt("return");case 60:if("USER_INPUT"!==(null==a.t1?void 0:a.t1.code)){a.next=62;break}return a.abrupt("return");case 62:if("INVALID_OPERATION"!==(null==a.t1?void 0:a.t1.code)){a.next=64;break}return a.abrupt("return");case 64:(0,i.tO)(a.t1);case 65:return a.prev=65,so(10),a.finish(65);case 68:case"end":return a.stop()}}),a,null,[[0,56,65,68],[18,26]])})));return function(e){return a.apply(this,arguments)}}()},ho=function(e){return function(){var t=(0,s.Z)(h().mark((function t(n){var a,r,s,o,c;return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a=window.game,r=a.facebook,s=a.globalScene,o=a.analytics,s.screen.open(qa.o4.NOTIFY_SCREEN,{message:"loading",loading:!0}),c=r.getContextID(),ao({contextId:c}),o.event(mn._.JOIN_GROUP,{group_id:c}),t.next=8,n(mo(ma,e));case 8:t.next=17;break;case 10:if(t.prev=10,t.t0=t.catch(0),!(t.t0 instanceof Nr)){t.next=14;break}return t.abrupt("return");case 14:if("INVALID_OPERATION"!==(null==t.t0?void 0:t.t0.code)){t.next=16;break}return t.abrupt("return");case 16:(0,i.tO)(t.t0);case 17:return t.prev=17,so(100),t.finish(17);case 20:case"end":return t.stop()}}),t,null,[[0,10,17,20]])})));return function(e){return t.apply(this,arguments)}}()},fo=function(e,t){return function(){var n=(0,s.Z)(h().mark((function n(a,r){var s,o,c,l,u,d,f,p,g,m,v,y,b,A,E;return h().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,s=window.game,o=s.player,c=s.profile,l=s.facebook,(u=s.globalScene).screen.open(qa.o4.NOTIFY_SCREEN,{message:"loading",loading:!0}),d=r(),f=o.getPlayerId(d),!((p=o.getConnectedPlayers(d)).length>0)||p[t]){n.next=10;break}return a(bo({mode:pa})),u.events.emit(xa.K.SWITCH,xa.C.GAME_SCENE),n.abrupt("return");case 10:return g=fa,n.next=13,l.getContextPlayers(f);case 13:if(m=n.sent,t===f||t===g.playerId||!p[t]){n.next=18;break}g=p[t],n.next=26;break;case 18:if(1!==m.length){n.next=22;break}g=m[0],n.next=26;break;case 22:return n.next=24,c.requestProfiles([t]);case 24:(v=c.getProfiles())[t]&&(g=v[t]);case 26:return n.next=28,a(zs(e,g));case 28:if(d=r(),hs(d,{playerId:f})!==fa.playerId){n.next=33;break}return n.next=33,a(Ws(e));case 33:if(d=r(),hs(d,{playerId:f})===f||!p[t]){n.next=38;break}return a(lo(t,!0)),n.abrupt("return");case 38:if(cs(d)===e){n.next=42;break}return u.events.emit(xa.K.SWITCH,xa.C.DASHBOARD_SCENE),n.abrupt("return");case 42:y=ls(d),b=ds(d,{playerId:f}),A=l.getContextID(),E=l.contextType,a(Aa(A,E)),a(bo(b?{mode:pa}:{mode:ga,status:y})),u.events.emit(xa.K.SWITCH,xa.C.GAME_SCENE),b&&setTimeout((function(){window.game.scene.getScene(xa.C.GAME_SCENE).events.emit("player-finish-challenge")}),1e3),n.next=55;break;case 52:n.prev=52,n.t0=n.catch(0),(0,i.tO)(n.t0);case 55:return n.prev=55,so(500),n.finish(55);case 58:case"end":return n.stop()}}),n,null,[[0,52,55,58]])})));return function(e,t){return n.apply(this,arguments)}}()},po=function(e){return function(t){try{var n=window.game.player,a=n.getPlayerId();Er(a,e).catch((function(e){(0,i.tO)(new Error(e))}));var r=n.getPlayerData(),s=r.score,o=void 0===s?0:s,c=r.level;o<e&&n.setBestScore(e);var l={score:e,level:c};t(qs(a,l)),t(Js(l))}catch(u){if(u instanceof Mr)return;(0,i.tO)(u)}}},go=function(){var e=window.game.cache.text.get("level1");if(!e)throw Error("Level data \u0111\xe2u r\u1ed3i b\u1ea1n \xeai!!!");return Phaser.Math.RND.pick(e.split("\n"))},mo=function(e,t){return void 0===t&&(t=null),function(){var n=(0,s.Z)(h().mark((function n(a,r){var o,c,l,u,d,f,p,g,m,v,y,b,A,E,S,T,w;return h().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,c=window.game,l=c.player,u=c.analytics,d=c.facebook,f=c.globalScene,p=d.getContextID(),g=0,m=r(),u.event(mn._.MATCH_START,{game_mode:GameCore.Utils.String.toUpperCamelCase(e),level:1,level_name:"level_1"}),a({type:Qn,payload:{}}),!$t()(o=[pa,va]).call(o,e)){n.next=16;break}return n.next=10,a((function(e){try{var t=window.game.player;e({type:si,payload:{}});var n=t.getPlayerId(),a=ys(Bs.SingleMatchStore)||{},r=a.data;a.data=Ms(r),Os({playerId:n,match:a}),e(Zs(a))}catch(s){if(e(Zs(null)),s instanceof $r)return;if(s instanceof la)return;if(s instanceof Cs)return;(0,i.tO)(s)}}));case 10:if(m=r(),rs(m)){n.next=15;break}return n.next=15,a(Gs());case 15:g=ss(m);case 16:if(e===ma&&a(Ks(t)),e!==ga){n.next=28;break}return v=go(),y={seed:v},n.next=22,a(Hs(t,y));case 22:m=r(),b=cs(m),A=us(m),E=A.playerId,p||(p=window.FBInstant.context.getID()),S=getMessagesSentStatus(m,{opponentId:E}),p&&E&&!S&&a(sendInviteMessage(E,{contextId:p,matchId:b,seed:v}));case 28:"online"===e&&a(function(){var e=(0,s.Z)(h().mark((function e(t){var n,i,a,r,s,o,c,l;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=window.game.player,r=a.getPlayer(),s=r.playerId,o=r.name,c=r.photo,t({type:vi,payload:{playerId:s}}),l={},De()(n=Ft()(i=new Array(20)).call(i,null)).call(n,(function(e,t){var n="0"+(t+1);l[n]={playerId:n,name:"MPlayer "+n,photo:"./assets/images/others/avatar.png"}})),l[s]={playerId:s,name:o,photo:c},t(js("mock",l));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),T=l.getPlayerData(m),w=T.score,a(Js({score:g,bestScore:void 0===w?0:w})),a({type:$n,payload:{mode:e,contextId:p}}),io.instance.setGameMode(e),a(Ea(e)),f.events.emit(xa.K.SWITCH,xa.C.GAME_SCENE),n.next=44;break;case 37:if(n.prev=37,n.t0=n.catch(0),!(n.t0 instanceof $r)){n.next=43;break}return window.game.globalScene.screen.open(qa.o4.NOTIFY_SCREEN,{message:"Sorry!, you can now\ncreate this match!",duration:2500,loading:!1}),n.abrupt("return");case 43:(0,i.tO)(n.t0);case 44:return n.prev=44,so(0),n.finish(44);case 47:case"end":return n.stop()}}),n,null,[[0,37,44,47]])})));return function(e,t){return n.apply(this,arguments)}}()},vo=function(e,t){return function(){var n=(0,s.Z)(h().mark((function n(i,a){var s,o,c,l,u,d,f,p,g,m,v,y,b,A,E,S,T,w,C,I,x;return h().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(o=window.game.player,c=t.score,l=void 0===c?0:c,u=t.level,d=void 0===u?0:u,f=t.time,p=void 0===f?0:f,g=t.moves,m=void 0===g?0:g,v=a(),!($t()(s=[pa,va]).call(s,e)>=0)){n.next=7;break}return y=rs(v),n.next=7,i(Fs(y));case 7:if(e!==va){n.next=12;break}if(!(b=Zr(v))){n.next=12;break}return n.next=12,(0,Ur.bh)(b,o.getPlayerId(),l);case 12:if(e===ma&&(i({type:mi,payload:{}}),A=o.getPlayerId(),i(qs(A,t))),e!==ga){n.next=23;break}return E=cs(v),S=getChallengeMatchData(v),T=S.whitePlayerId,w=S.extraData,C=window.game.player.getPlayerId(),I=C===T,x=(0,r.Z)({},w),I?x.whitePlayerData={score:l,time:p,moves:m}:x.blackPlayerData={score:l,time:p,moves:m},n.next=23,i(Ys(E,l,(0,r.Z)({level:d},x)));case 23:i({type:ei,payload:{mode:e}});case 24:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}()},yo=function(){var e=(0,s.Z)(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("SOLO"!=window.FBInstant.context.getType()){e.next=2;break}return e.abrupt("return");case 2:return e.abrupt("return",new(l())((function(e){try{if("SOLO"==window.FBInstant.context.getType())return e();var t=setInterval((function(){"SOLO"==window.FBInstant.context.getType()&&(clearInterval(t),e())}),200),n=function(){var n=(0,s.Z)(h().mark((function n(){return h().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,window.FBInstant.context.switchAsync("SOLO",!0);case 3:window.game.analytics.event(mn._.SWITCH_SOLO_CONTEXT,{success:!0}),n.next=11;break;case 6:n.prev=6,n.t0=n.catch(0),window.game.analytics.event(mn._.SWITCH_SOLO_CONTEXT,{success:!1}),clearInterval(t),e();case 11:case"end":return n.stop()}}),n,null,[[0,6]])})));return function(){return n.apply(this,arguments)}}();n()}catch(i){console.log("same context"),e()}})).then((function(){})));case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),bo=function(e){return function(t){var n=e.mode,a=e.status;t({type:ti,payload:{mode:n,status:a}}),io.instance.setGameMode(n),(0,i.sw)("game-mode",n)}},Ao=n(679),Eo=n(345),So=n.n(Eo),To=function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).name="WideFrameRenderFail",i.message=t||"Wide frame render fail",i.payload=n,i}return(0,o.Z)(t,e),t}((0,z.Z)(Error)),wo=function(e){if("string"!==typeof e||!e)throw new To(null,{imageShare:e})},Co=(function(){var e=(0,s.Z)(h().mark((function e(){var t,n,i,a,r,s,o,c;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=window.game,n=t.player,i=t.globalScene,a=n.getPlayer(),r=a.playerId,s=a.photo,o=Co({playerId:r,playerPhoto:s})){e.next=6;break}return console.warn("getRenderOptionsBestScore"),e.abrupt("return");case 6:return c={name:"share-best-score",width:750,height:1e3,renderOptions:o},e.next=9,i.frameCapture.capture(c);case 9:return e.abrupt("return",e.sent);case 10:case"end":return e.stop()}}),e)})))}(),function(e){var t=e.playerId,n=void 0===t?"10":t,i=e.playerPhoto,a=void 0===i?"":i;return"string"!==typeof n||"string"!==typeof a?null:{avatar:{name:""+n,type:"image",x:97,y:270,image:a,width:210,height:210,fallbackWithImage:da.Z.AVATAR.KEY},wideFrame:{name:"wide-frame-share",type:"image",x:0,y:0,image:"./assets/wideframes/wide-frame-share.png",width:750,height:1e3}}}),Io=function(){return(0,s.Z)(h().mark((function e(){var t,n,a,r,s,o,c,l,u,d;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=window.game,n=t.player,a=t.analytics,r=t.facebook,s=t.globalScene,e.prev=1,s.screen.open(qa.o4.NOTIFY_SCREEN,{message:"loading",loading:!0}),e.next=5,xo();case 5:return o=e.sent,wo(o),c=n.getPlayer(),l=c.playerId,u=c.name,d=c.photo,e.next=10,r.shareAsync({text:"Great! I have a best score!",intent:"SHARE",image:o||"",data:{playerId:l,playerName:u,playerPhoto:d,type:ua}});case 10:a.event(mn._.SHARE,{share_content_type:"BestScore",success:!0}),e.next=17;break;case 13:e.prev=13,e.t0=e.catch(1),a.event(mn._.SHARE,{share_content_type:"BestScore",success:!1}),(0,i.tO)(e.t0);case 17:return e.prev=17,s.screen.close(qa.o4.NOTIFY_SCREEN),e.finish(17);case 20:case"end":return e.stop()}}),e,null,[[1,13,17,20]])})))},xo=function(){var e=(0,s.Z)(h().mark((function e(){var t,n,i,a,r,s,o,c,l,u;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=window.game,n=t.player,i=t.globalScene,a=n.getPlayer(),r=a.playerId,s=a.photo,o=a.data,c=(o||{}).score,l=Po({playerId:r,playerPhoto:s,playerScore:c})){e.next=7;break}return console.warn("getRenderOptionsBestScore"),e.abrupt("return");case 7:return u={name:"share-best-score",width:952,height:492,renderOptions:l},e.next=10,i.frameCapture.capture(u);case 10:return e.abrupt("return",e.sent);case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Po=(function(){var e=(0,s.Z)(h().mark((function e(t){var n,i,a,r,s,o,c,l,u,d,f;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=window.game,i=n.player,a=n.globalScene,r=ms(t),s=i.getPlayer(),o=s.playerId,c=s.photo,l=r[o]||{},u=l.score,d=Po({playerId:o,playerPhoto:c,playerScore:u})){e.next=8;break}return console.warn("getRenderOptionsCurrentScore"),e.abrupt("return");case 8:return f={name:"share-current-score",width:952,height:492,renderOptions:d},e.next=11,a.frameCapture.capture(f);case 11:return e.abrupt("return",e.sent);case 12:case"end":return e.stop()}}),e)})))}(),function(e){var t=e.playerId,n=void 0===t?"10":t,i=e.playerPhoto,a=void 0===i?"":i,r=e.playerScore,s=void 0===r?0:r;return"string"!==typeof n||"string"!==typeof a||"number"!==typeof s?null:{avatar:{name:""+n,type:"image",x:65,y:75,image:a,width:180,height:180,fallbackWithImage:da.Z.AVATAR.KEY},wideFrame:{name:"wide-frame-message-win",type:"image",x:0,y:0,image:"./assets/wideframes/wide-frame-message-win.png",width:952,height:492},playerScoreShadow:{type:"text",x:157,y:346,font:"600 70px",fillStyle:"#f2a62e",text:""+s,textAlign:"center"},playerScore:{type:"text",x:155,y:344,font:"600 70px",fillStyle:"#ffd10d",text:""+s,textAlign:"center"}}}),ko=function(){return(0,s.Z)(h().mark((function e(){var t,n,a,r,s,o,c,l,u,d;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=window.game,n=t.player,a=t.analytics,r=t.facebook,s=t.globalScene,e.prev=1,s.screen.open(qa.o4.NOTIFY_SCREEN,{message:"loading",loading:!0}),e.next=5,_o();case 5:return o=e.sent,wo(o),c=n.getPlayer(),l=c.playerId,u=c.name,d=c.photo,e.next=10,r.shareAsync({text:"A ha, I'm the best!",intent:"CHALLENGE",image:o||"",data:{playerId:l,playerName:u,playerPhoto:d,type:ua}});case 10:a.event(mn._.SHARE,{share_content_type:"Leaderboard",success:!0}),e.next=17;break;case 13:e.prev=13,e.t0=e.catch(1),a.event(mn._.SHARE,{share_content_type:"Leaderboard",success:!1}),(0,i.tO)(e.t0);case 17:return e.prev=17,s.screen.close(qa.o4.NOTIFY_SCREEN),e.finish(17);case 20:case"end":return e.stop()}}),e,null,[[1,13,17,20]])})))},_o=function(){var e=(0,s.Z)(h().mark((function e(){var t,n,i,a,r,s,o,c,l,u,d,f,p,g,m,v,y,b,A,E;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=window.game,n=t.player,i=t.profile,a=t.globalScene,r=n.getPlayer(),s=r.playerId,o=r.name,c=r.photo,(l=n.getConnectedPlayerIds(99,0)).push(s),u=[],e.next=7,mr({playerIds:GameCore.Utils.Array.unique(l),limit:l.length});case 7:d=e.sent,f=GameCore.Utils.Object.keyBy(d,"playerId"),p={playerId:s,name:o,photo:c,score:0},GameCore.Utils.Object.hasOwn(f,s)&&(p=f[s]),u.push(p),e.t0=So()(h()).call(h(),f);case 14:if((e.t1=e.t0()).done){e.next=27;break}if(g=e.t1.value,!GameCore.Utils.Object.hasOwn(f,g)){e.next=25;break}if(m=f[g],3!==u.length){e.next=20;break}return e.abrupt("break",27);case 20:if(m.playerId!==s){e.next=22;break}return e.abrupt("continue",14);case 22:if(!(Number(m.score)>Number(p.score))){e.next=24;break}return e.abrupt("continue",14);case 24:u.push(m);case 25:e.next=14;break;case 27:return v=GameCore.Utils.Array.unique(l),e.next=30,i.requestProfiles(v);case 30:if(y=i.getProfiles(),u.forEach((function(e,t){var n=e.playerId;if(GameCore.Utils.Object.hasOwn(y,n)){var i=y[n],a=i.name,r=i.photo;u[t].name=a,u[t].photo=r}})),u.length<3)for(b=0;b<=3-u.length;)u.push({playerId:"bot"+b,name:"???",score:0,photo:"./assets/images/others/avatar.png"}),b++;if(A=Oo({playerId:s,playerName:o,playerPhoto:c,listLeaders:u})){e.next=37;break}return console.warn("getRenderOptionsLeaderboard"),e.abrupt("return");case 37:return E={name:"share-leaderboard",width:1500,height:2e3,renderOptions:A},e.next=40,a.frameCapture.capture(E);case 40:return e.abrupt("return",e.sent);case 41:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Oo=function(e){var t=e.playerId,n=void 0===t?"10":t,i=e.playerPhoto,a=void 0===i?"":i,r=e.listLeaders,s=void 0===r?[]:r;if(!Array.isArray(s))return null;if("string"!==typeof n)return null;if("string"!==typeof a)return null;var o={avatar:{name:""+n,type:"image",x:510,y:278,image:a,width:510,height:510,fallbackWithImage:da.Z.AVATAR.KEY}};return s.forEach((function(e,t){var n=e.playerId,i=e.photo;o["photo_"+n]={name:""+n,type:"image",x:436,y:1294+180*t,image:i,width:96,height:96,fallbackWithImage:da.Z.AVATAR.KEY}})),o.wideFrame={name:"wide-frame-share",type:"image",x:0,y:0,image:"./assets/wideframes/wide-frame-share.png",width:1500,height:2e3},s.forEach((function(e,t){var n=e.playerId,i=e.name,a=e.score;o["name_"+n]={type:"text",x:600,y:1360+180*t,font:"600 48px",text:i,fillStyle:"#b18151"},o["score_"+n]={type:"text",x:1e3,y:1360+180*t,font:"600 48px",text:a,fillStyle:"#b18151"}})),o},Ro=function(){var e=(0,s.Z)(h().mark((function e(t){var n,i,a,r,s,o,c,l,u,d,f,p,g,m,v,y,b,A;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=window.game,i=n.player,a=n.globalScene,r=ms(t),s=i.getPlayer(),o=s.photo,c=s.playerId,l=us(t),u=l.playerId,d=l.photo,f=ds(t,{playerId:c}),p=fs(t,{opponentId:u}),g=r[c]||{},m=g.score,v=r[u]||{},y=v.score,b=Do({playerId:c,playerPhoto:o,playerScore:m,opponentId:u,opponentPhoto:d,opponentScore:y,isPlayerFinished:f,isOpponentFinished:p})){e.next=12;break}return console.warn("getRenderOptionsLeaderboard"),e.abrupt("return");case 12:return A={name:"share-game-result",width:952,height:492,renderOptions:b},e.next=15,a.frameCapture.capture(A);case 15:return e.abrupt("return",e.sent);case 16:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Lo=(function(){var e=(0,s.Z)(h().mark((function e(t){var n,i,a,r,s,o,c,l,u,d,f,p,g,m,v,y,b,A,E;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=window.game,a=i.player,r=i.globalScene,s=ms(t),o=a.getPlayer(),c=o.photo,l=o.playerId,e.next=5,window.FBInstant.player.getConnectedPlayersAsync();case 5:if(u=e.sent,d=Lo(),f=(null==(n=D()(u).call(u,(function(e){return e.getID()===d})))?void 0:n.getPhoto())||da.Z.AVATAR.FILE,p=ds(t,{playerId:l}),g=fs(t,{opponentId:d}),m=s[l]||{},v=m.score,y=s[d]||{},b=y.score,A=Do({playerId:l,playerPhoto:c,playerScore:v,opponentId:d,opponentPhoto:f,opponentScore:b,isPlayerFinished:p,isOpponentFinished:g})){e.next=16;break}return console.warn("getRenderOptionsLeaderboard"),e.abrupt("return");case 16:return E={name:"share-game-result",width:952,height:492,renderOptions:A},e.next=19,r.frameCapture.capture(E);case 19:return e.abrupt("return",e.sent);case 20:case"end":return e.stop()}}),e)})))}(),function(){var e=window.game.player,t=window.FBInstant.getEntryPointData()||{},n=t.playerId,i=t.opponentId;return n==e.getPlayerId()?i:n}),Do=(function(){var e=(0,s.Z)(h().mark((function e(t){var n,i,a,r,s,o,c,l,u,d,f,p,g,m,v;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=window.game,i=n.player,a=n.globalScene,r=ms(t),s=i.getPlayer(),o=s.photo,c=s.playerId,l=gs(t),u=l.playerId,d=l.photo,f=l.score,p=r[c]||{},g=p.score,m=Do({playerId:c,playerPhoto:o,playerScore:g,opponentId:u,opponentPhoto:d,opponentScore:f})){e.next=9;break}return console.warn("getRenderOptionsGroupResult"),e.abrupt("return");case 9:return v={name:"share-group-match-result",width:952,height:492,renderOptions:m},e.next=12,a.frameCapture.capture(v);case 12:return e.abrupt("return",e.sent);case 13:case"end":return e.stop()}}),e)})))}(),function(e){var t=e.playerId,n=void 0===t?"10":t,i=e.playerPhoto,a=void 0===i?"":i,r=e.playerScore,s=void 0===r?0:r,o=e.opponentId,c=void 0===o?"20":o,l=e.opponentPhoto,u=void 0===l?"":l,h=e.opponentScore,d=void 0===h?0:h,f=e.isPlayerFinished,p=e.isOpponentFinished;if("string"!==typeof n)return null;if("string"!==typeof a)return null;if("number"!==typeof s)return null;if("string"!==typeof c)return null;if("string"!==typeof u)return null;if("number"!==typeof d)return null;if("boolean"!==typeof f)return null;if("boolean"!==typeof p)return null;var g=s===d,m=s>d,v=f||p,y=f&&p,b={leftPhoto:{name:""+n,type:"image",x:69,y:149,image:a,width:170,height:170,fallbackWithImage:da.Z.AVATAR.KEY},rightPhoto:{name:""+c,type:"image",x:717,y:149,image:u,width:170,height:170,fallbackWithImage:da.Z.AVATAR.KEY},wideFrame:{name:"wide-frame-game-result",type:"image",x:0,y:0,image:"./assets/wideframes/wide-frame-game-result.png",width:952,height:492}};return v&&!y&&(b.leftScoreShadow={type:"text",x:154,y:370,font:"600 50px",fillStyle:"#c4683f",text:f?""+s:"???",textAlign:"center"},b.leftScore={type:"text",x:155,y:370,font:"600 50px",fillStyle:"#f2a62e",text:f?""+s:"???",textAlign:"center"},b.rightScoreShadow={type:"text",x:802,y:370,font:"600 50px",fillStyle:"#c4683f",text:p?""+d:"???",textAlign:"center"},b.rightScore={type:"text",x:803,y:370,font:"600 50px",fillStyle:"#f2a62e",text:p?""+d:"???",textAlign:"center"}),!g&&y&&(m?b.leftCrown={name:"crown-icon-in-game-result",type:"image",x:0,y:0,image:"./assets/images/others/crown-icon.png",width:952,height:492}:b.rightCrown={name:"crown-icon-in-game-result",type:"image",x:0,y:0,image:"./assets/images/others/crown-icon.png",width:952,height:492,flipX:!0}),b}),Bo=function(e){var t=e?e.split("_"):[],n=t.length>0?t[0]:"en_US";switch(n){case"id":case"in":n="id"}return n},No=n(663),Mo=function(e){function t(t,n){var i;(i=e.call(this,t)||this).payload=void 0,i.loading=void 0,i.photo=void 0,i.avtFrame=void 0,i.background=void 0,i.loadPhotoTimer=void 0,i.handleLoadPhotoAfterDelay=function(e,t){return function(){var n=i.scene.textures.get(e);n&&n.key===e?i.handleLoadComplete(e):(i.scene.load.once("filecomplete-image-"+e,i.handleLoadComplete),i.scene.load.image(e,t),i.scene.load.start())}},i.handleLoadComplete=function(e){if(i.scene){var t=i.payload,n=t.id,a=t.radius,r=void 0===a?0:a;if(n&&n===e){var s=n+"_bordered_"+r,o=r>0?s:n,c=i.scene.textures.get(o);if(c&&c.key===o)i.setPhoto(c.key);else if(0!=r&&r<100){if(!GameCore.Utils.Image.drawBorder({scene:i.scene,key:n,newKey:s,radius:r}))return void i.showLoading(!1);i.setPhoto(s)}else if(100==r){if(!GameCore.Utils.Image.drawCircle({scene:i.scene,key:n,newKey:s}))return void i.showLoading(!1);i.setPhoto(s)}else i.setPhoto(n)}}},i.handleLoadPhotoFailed=function(e){e.key===i.payload.id&&i.setDefaultAvatar(e.key)},i.scene.add.existing((0,Ua.Z)(i)),i.payload=n,i.setSize(n.width,n.height),i.createBackground(),i.createLoading(),i.createPhoto(),i.createFrame();var a=i.payload,r=a.id,s=a.url,o=a.radius;return r&&s&&i.loadPhoto(r,s,o),i.addDefaultListeners(),i}(0,o.Z)(t,e);var n=t.prototype;return n.setFrame=function(e){this.avtFrame.setFrame(e),this.avtFrame.setVisible(!0)},n.setBackground=function(e){this.background.setFrame(e)},n.loadPhoto=function(e,t,n){var i;if(void 0===n&&(n=0),this.payload.id=e,this.payload.url=t,this.payload.radius=n,null==(i=this.loadPhotoTimer)||i.remove(),e&&t){var a=this.scene.textures.get(e);if(a&&a.key===e)this.handleLoadComplete(e);else{this.showLoading(!0);var r=this.payload.loadDelay||0;this.loadPhotoTimer=this.scene.time.delayedCall(r,this.handleLoadPhotoAfterDelay(e,t))}}else this.setPhoto(da.Z.AVATAR.KEY)},n.addDefaultListeners=function(){var e=this;this.scene.load.on(Phaser.Loader.Events.FILE_LOAD_ERROR,this.handleLoadPhotoFailed),this.on(Phaser.GameObjects.Events.DESTROY,(function(){var t;null==(t=e.loadPhotoTimer)||t.remove(),e.scene.load.off(Phaser.Loader.Events.FILE_LOAD_ERROR,e.handleLoadPhotoFailed)}))},n.setDefaultAvatar=function(e){this.loadPhoto(e,da.Z.AVATAR.FILE,this.payload.radius)},n.createBackground=function(){var e=this.payload,t=e.key,n=e.background;this.background=this.scene.make.image({key:t,frame:n}),this.background.setWorldSize(this.width,this.height),this.add(this.background)},n.createLoading=function(){this.loading=new Xa(this.scene),this.loading.setWorldSize(.75*this.width,.75*this.height),this.loading.setVisible(!1),this.add(this.loading)},n.createPhoto=function(){this.photo=this.scene.make.image({x:0,y:0,origin:{x:.5,y:.5},visible:!1}),this.add(this.photo)},n.createFrame=function(){var e=this.payload,t=e.key,n=e.frame,i=e.width,a=e.height;n?(this.avtFrame=this.scene.make.image({key:t,frame:n}),this.avtFrame.setWorldSize(i,a)):this.avtFrame=this.scene.make.image({x:0,y:0,origin:{x:.5,y:.5},visible:!1}),this.add(this.avtFrame)},n.showLoading=function(e){this.photo.setVisible(!e),this.loading.setVisible(e)},n.setPhoto=function(e){this.showLoading(!1),this.photo.setTexture(e),this.photo.setFrame(0);var t=this.payload,n=t.width,i=t.height,a=Math.min(n,i)-10;this.photo.setWorldSize(a,a),Phaser.Display.Align.In.Center(this.photo,this.background)},n.addBackground=function(){var e="avatar-background";if(!this.scene.textures.exists(e)){var t=this.width,n=this.height,i=this.scene.add.graphics();i.fillStyle(65280,.2),i.fillRect(0,0,t,n),i.generateTexture(e,t,n),i.destroy()}var a=this.scene.add.image(0,0,e);this.add(a)},t}(Phaser.GameObjects.Container),Go=Mo,Fo=vn.Z.DEFAULT,Zo=Fo.KEY,Uo=Fo.FRAME,Ho=function(e){function t(t){var n;return(n=e.call(this,t,{key:Zo,frame:Uo.AVATAR_FRAME_BLUE,background:Uo.AVATAR_BG_BLUE,width:60,height:60})||this).scene=void 0,n.scene=t,n}return(0,o.Z)(t,e),t.prototype.setHighlight=function(e){e?(this.background.setFrame(Uo.AVATAR_BG_YELLOW),this.avtFrame.setFrame(Uo.AVATAR_FRAME_YELLOW)):(this.background.setFrame(Uo.AVATAR_BG_BLUE),this.avtFrame.setFrame(Uo.AVATAR_FRAME_BLUE))},t}(Go),Wo=Ho,zo=vn.Z.DEFAULT,Yo=zo.KEY,Vo=zo.FRAME,Ko=function(e){function t(t,n){var i;return(i=e.call(this,t)||this).scene=void 0,i.payload=void 0,i.avatar=void 0,i.block=void 0,i.rankIcon=void 0,i.rankText=void 0,i.playerScore=void 0,i.label=void 0,i.scene=t,i.createBlock(),i.createAvatar(),i.createRankIcon(),i.createRankText(),i.createLabel(),i.createPlayerScore(),n&&i.updateInfo(n),i.scene.add.existing((0,Ua.Z)(i)),i}(0,o.Z)(t,e);var n=t.prototype;return n.updateInfo=function(e){this.payload=e,this.updateAvatar(),this.updateRankIcon(),this.updateRankText(),this.updatePlayerScore()},n.setLabel=function(e){this.label.setText(e)},n.setRank=function(e){this.rankText.setText(e)},n.setScore=function(e){this.playerScore.setText(e)},n.setHighlight=function(e){e?(this.y-=6,this.scale+=.1,this.label.scale+=.15,this.block.setFrame(Vo.BLOCK_LEADER_YELLOW)):(this.y+=6,this.scale-=.1,this.label.scale-=.15,this.block.setFrame(Vo.BLOCK_LEADER_BLUE)),this.avatar.setHighlight(e)},n.createBlock=function(){this.block=this.scene.make.image({key:Yo,frame:Vo.BLOCK_LEADER_BLUE}),this.block.setWorldSize(79,99),this.add(this.block)},n.createAvatar=function(){this.avatar=new Wo(this.scene),Phaser.Display.Align.In.TopCenter(this.avatar,this.block,0,this.avatar.displayHeight/2-4),this.add(this.avatar)},n.updateAvatar=function(){var e=this.payload,t=e.playerId,n=e.photo;this.avatar.loadPhoto(t,n,50)},n.getRankFrame=function(){var e=Vo.ICON_FLAG;switch(this.payload.rank){case 1:e=Vo.ICON_CUP_GOLD;break;case 2:e=Vo.ICON_CUP_SILVER;break;case 3:e=Vo.ICON_CUP_COPPER}return e},n.createRankIcon=function(){var e=Vo.ICON_FLAG;this.rankIcon=this.scene.make.image({key:Yo,frame:e}),e!=Vo.ICON_FLAG?this.rankIcon.setWorldSize(46,30):this.rankIcon.setWorldSize(27,27),Phaser.Display.Align.In.Center(this.rankIcon,this.block,0,-15),this.add(this.rankIcon)},n.updateRankIcon=function(){var e=this.getRankFrame();this.rankIcon.setFrame(e),e!=Vo.ICON_FLAG?this.rankIcon.setWorldSize(46,30):this.rankIcon.setWorldSize(27,27),Phaser.Display.Align.In.Center(this.rankIcon,this.block,0,-15)},n.createRankText=function(){this.rankText=this.scene.make.bitmapText({font:No.Z.PRIMARY.KEY,size:this.scene.fontSize(18),origin:{x:.5,y:.5},text:"1"}),Phaser.Display.Align.In.Center(this.rankText,this.rankIcon,0,-2),this.add(this.rankText)},n.updateRankText=function(){this.rankText.setText(this.payload.rank.toString())},n.createLabel=function(){this.label=this.scene.make.bitmapText({font:No.Z.PRIMARY.KEY,size:this.scene.fontSize(14),origin:{x:.5,y:0},text:"Play"}),Phaser.Display.Align.In.BottomCenter(this.label,this.block,0,-10),this.add(this.label)},n.createPlayerScore=function(){this.playerScore=this.scene.make.bitmapText({font:No.Z.PRIMARY.KEY,size:this.scene.fontSize(18),origin:{x:.5,y:.5},text:"132500"}),this.playerScore.setTint(5582186),Phaser.Display.Align.In.Center(this.playerScore,this.block,0,5),this.add(this.playerScore)},n.updatePlayerScore=function(){this.playerScore.setText(Math.floor(this.payload.score).toString())},(0,le.Z)(t,[{key:"onClick",set:function(e){var t=this.block,n=t.width,i=t.height;this.setSize(n,i+this.avatar.height),this.setInteractive({useHandCursor:!0}),this.off(Phaser.Input.Events.GAMEOBJECT_POINTER_DOWN),this.on(Phaser.Input.Events.GAMEOBJECT_POINTER_DOWN,e)}}]),t}(Phaser.GameObjects.Container),jo=Ko,Xo=function(e){function t(t,n){var a;return(a=e.call(this,t)||this).scene=void 0,a.payload=void 0,a.leaderBlocks=void 0,a.entrancesAnimation=void 0,a.listLeaderBlocks=void 0,a.handleChallengeFriend=function(e){return function(){a.scene.storage.dispatch(lo(e))}},a.handleShareLeaderboard=function(){a.scene.audio.playSound(Ja.Z.BUTTON_CLICK),a.scene.storage.dispatch(ko())},a.handleMatchingGroup=(0,s.Z)(h().mark((function e(){var t,n,r,s,o,c,l,u,d;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.scene,n=t.player,r=t.storage,s=t.game,o=t.facebook,e.prev=1,s.globalScene.screen.open(qa.o4.NOTIFY_SCREEN,{message:"loading",loading:!0}),c=n.getPlayer(),l="global","en"===(u=Bo(c.locale))&&(l="en"),"in"===u&&(l="in"),e.next=10,o.matchPlayerAsync(l,!0,!0);case 10:if(d=e.sent,s.globalScene.screen.close(qa.o4.NOTIFY_SCREEN),d){e.next=14;break}return e.abrupt("return");case 14:r.dispatch(ho()),e.next=21;break;case 17:e.prev=17,e.t0=e.catch(1),s.globalScene.screen.close(qa.o4.NOTIFY_SCREEN),e.t0 instanceof Error&&(0,i.tO)(e.t0);case 21:case"end":return e.stop()}}),e,null,[[1,17]])}))),a.scene=t,a.setName("LeadersBar"),a.listLeaderBlocks=[],a.createLeaderBlocks(),a.createEntrancesAnimation(),n&&a.updateInfo(n),a.scene.add.existing((0,Ua.Z)(a)),a}(0,o.Z)(t,e);var n=t.prototype;return n.updateInfo=function(e){var t=this;this.payload=e;var n,i=!1,a=this.payload,r=a.playerId;(a.leaders.forEach((function(e){var n,a=t.leaderBlocks.getFirstDead(!0);a.updateInfo(e),-1===e.score?(a.setRank(""),a.setLabel("Join"),a.setScore("Global"),a.onClick=t.handleMatchingGroup):e.playerId===r?(a.setLabel("Share"),a.setHighlight(!0),a.onClick=t.handleShareLeaderboard):a.onClick=t.handleChallengeFriend(e.playerId),t.add(a),a.setVisible(!0),a.setActive(!0),$t()(n=t.listLeaderBlocks).call(n,a)<0&&(i=!0)})),this.alignBlocks(),i)&&(this.listLeaderBlocks=Re()(n=this.leaderBlocks.getChildren()).call(n,(function(e){return e.active})),this.createEntrancesAnimation());this.runAnimation()},n.killAndHideAll=function(){var e=this;this.removeAll(!1),this.leaderBlocks.getChildren().forEach((function(t){return e.leaderBlocks.killAndHide(t)}))},n.runAnimation=function(){this.leaderBlocks.setAlpha(0),this.entrancesAnimation.play()},n.createEntrancesAnimation=function(){this.entrancesAnimation=new Ao.Z({targets:this.listLeaderBlocks,delay:this.scene.tweens.stagger(50,{start:400}),props:{y:{from:100,to:0},alpha:{from:0,to:1}}})},n.alignBlocks=function(){var e=-(this.leaderBlocks.getLength()-1)/2*95;this.leaderBlocks.setX(e,95)},n.createLeaderBlocks=function(){this.leaderBlocks=this.scene.add.group({classType:jo})},t}(Phaser.GameObjects.Container),qo=Xo,Jo=n(682),Qo=vn.Z.DEFAULT,$o=Qo.KEY,ec=Qo.FRAME,tc=function(e){function t(t){var n;return(n=e.call(this,t,$o,ec.BUTTON_YELLOW_CIRCLE,100.05,78.2)||this).scene=void 0,n.setName("Home"),n.scene=t,n.createIcon(),n}return(0,o.Z)(t,e),t.prototype.createIcon=function(){var e=this.scene.make.image({key:$o,frame:ec.ICON_FLAT_HOME});e.setSize(43,43).setDisplaySize(43,43),Phaser.Display.Align.In.Center(e,this.button),this.add(e)},t}(Jo.Z),nc=tc,ic=vn.Z.DEFAULT,ac=ic.KEY,rc=ic.FRAME,sc=function(e){function t(t){var n;return(n=e.call(this,t,ac,rc.BUTTON_GREEN_SHORT,176,77.05)||this).scene=void 0,n.setName("PlayWithFriends"),n.scene=t,n.createLabel(),n}return(0,o.Z)(t,e),t.prototype.createLabel=function(){var e=this.scene.make.bitmapText({font:No.Z.PRIMARY.KEY,size:this.scene.fontSize(30),text:"PLAY"});Phaser.Display.Align.In.Center(e,this.button,0,-12);var t=this.scene.make.bitmapText({font:No.Z.PRIMARY.KEY,size:this.scene.fontSize(18),text:"WITH FRIENDS"});Phaser.Display.Align.In.Center(t,this.button,0,11),this.add([e,t])},t}(Jo.Z),oc=sc,cc=vn.Z.DEFAULT,lc=cc.KEY,uc=cc.FRAME,hc=function(e){function t(t){var n;return(n=e.call(this,t,lc,uc.BUTTON_YELLOW_CIRCLE,100.05,78.2)||this).scene=void 0,n.setName("Rank"),n.scene=t,n.createIcon(),n}return(0,o.Z)(t,e),t.prototype.createIcon=function(){var e=this.scene.make.image({key:lc,frame:uc.ICON_FLAT_RANK});e.setSize(43,43).setDisplaySize(43,43),Phaser.Display.Align.In.Center(e,this.button),this.add(e)},t}(Jo.Z),dc=hc,fc=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n.homeButton=void 0,n.rankButton=void 0,n.pwfButton=void 0,n.entrancesAnimation=void 0,n.runAnimation=function(){n.entrancesAnimation.play()},n.scene=t,n.setName("FooterBar"),n.createHomeButton(),n.createRankButton(),n.createPlayWithFriendsButton(),n.createEntrancesAnimation(),n.alignIcons(),n.scene.add.existing((0,Ua.Z)(n)),n}(0,o.Z)(t,e);var n=t.prototype;return n.createEntrancesAnimation=function(){this.entrancesAnimation=new Ao.Z({targets:[this],delay:800,props:{y:"-=5",alpha:{start:0,from:0,to:1}}})},n.alignIcons=function(){Phaser.Display.Align.In.Center(this.homeButton,this,-130,-6),Phaser.Display.Align.In.Center(this.pwfButton,this,0,-6),Phaser.Display.Align.In.Center(this.rankButton,this,130,-6)},n.createHomeButton=function(){this.homeButton=new nc(this.scene),this.add(this.homeButton)},n.createRankButton=function(){this.rankButton=new dc(this.scene),this.add(this.rankButton)},n.createPlayWithFriendsButton=function(){this.pwfButton=new oc(this.scene),this.add(this.pwfButton)},t}(Phaser.GameObjects.Container),pc=fc,gc=n(675),mc={targets:[],yoyo:!0,duration:120,ease:Phaser.Math.Easing.Circular.Out,props:{scale:{from:1,to:1.3}}},vc=function(e){function t(t){return e.call(this,mc,t)||this}return(0,o.Z)(t,e),t}(Ha.Z),yc=vn.Z.DEFAULT,bc=yc.KEY,Ac=yc.FRAME,Ec=function(e){function t(t,n,i,a,r){var s;return(s=e.call(this,t,n,i)||this).barTopLeft=void 0,s.barTopMid=void 0,s.barTopRight=void 0,s.barMidLeft=void 0,s.barMidBg=void 0,s.barMidRight=void 0,s.barBottomLeft=void 0,s.barBottomMid=void 0,s.barBottomRight=void 0,s.setSize(a,r),s.setDepth(fn.Z.POPUP),s.createPopup(),s.scene.add.existing((0,Ua.Z)(s)),s}(0,o.Z)(t,e);var n=t.prototype;return n.createPopup=function(){this.createPopupImages(),this.updatePopupSize(),this.alignPopupImages()},n.createPopupImages=function(){this.barTopLeft=this.scene.add.image(0,0,bc,Ac.POPUP_TOP_LEFT),this.barTopMid=this.scene.add.image(0,0,bc,Ac.POPUP_TOP_MID),this.barTopRight=this.scene.add.image(0,0,bc,Ac.POPUP_TOP_RIGHT),this.barMidLeft=this.scene.add.image(0,0,bc,Ac.POPUP_MID_LEFT),this.barMidBg=this.scene.add.image(0,0,bc,Ac.POPUP_MID_MID),this.barMidRight=this.scene.add.image(0,0,bc,Ac.POPUP_MID_RIGHT),this.barBottomLeft=this.scene.add.image(0,0,bc,Ac.POPUP_BOTTOM_LEFT),this.barBottomMid=this.scene.add.image(0,0,bc,Ac.POPUP_BOTTOM_MID),this.barBottomRight=this.scene.add.image(0,0,bc,Ac.POPUP_BOTTOM_RIGHT),this.barTopLeft.setWorldSize(65,48),this.barTopMid.setWorldSize(65,48),this.barTopRight.setWorldSize(65,48),this.barMidLeft.setWorldSize(65,48),this.barMidBg.setWorldSize(65,48),this.barMidRight.setWorldSize(65,48),this.barBottomLeft.setWorldSize(65,48),this.barBottomMid.setWorldSize(65,48),this.barBottomRight.setWorldSize(65,48),this.add([this.barTopRight,this.barTopMid,this.barBottomLeft,this.barBottomRight,this.barMidLeft,this.barMidRight,this.barTopLeft,this.barBottomMid,this.barMidBg])},n.updatePopupSize=function(){this.barTopMid.setWorldSize(this.width-129,this.barTopMid.height),this.barMidLeft.setWorldSize(this.barMidLeft.width,this.height-95),this.barMidBg.setWorldSize(this.width-129,this.height-95),this.barMidRight.setWorldSize(this.barMidRight.width,this.height-95),this.barBottomMid.setWorldSize(this.width-129,this.barBottomMid.height)},n.alignPopupImages=function(){Phaser.Display.Align.In.TopLeft(this.barTopLeft,this),Phaser.Display.Align.In.TopCenter(this.barTopMid,this),Phaser.Display.Align.In.TopRight(this.barTopRight,this),Phaser.Display.Align.In.LeftCenter(this.barMidLeft,this),Phaser.Display.Align.In.Center(this.barMidBg,this),Phaser.Display.Align.In.RightCenter(this.barMidRight,this),Phaser.Display.Align.In.BottomLeft(this.barBottomLeft,this),Phaser.Display.Align.In.BottomCenter(this.barBottomMid,this),Phaser.Display.Align.In.BottomRight(this.barBottomRight,this)},(0,le.Z)(t,[{key:"onClose",set:function(e){this.setInteractive({useHandCursor:!0}),this.on(Phaser.Input.Events.GAMEOBJECT_POINTER_DOWN,e)}}]),t}(Phaser.GameObjects.Container),Sc=Ec,Tc=function(e){function t(t,n){var i;return(i=e.call(this,t)||this).payload=void 0,i.mainText=void 0,i.shadowText=void 0,i.payload=n,i.createMainText(),i.createShadowText(),i.updateSize(),i.moveDown(i.shadowText),i.scene.add.existing((0,Ua.Z)(i)),i}(0,o.Z)(t,e);var n=t.prototype;return n.setText=function(e){this.mainText.setText(e),this.shadowText.setText(e),this.updateSize()},n.setTintText=function(e,t,n,i){this.mainText.setTint(e,t,n,i)},n.setDropShadow=function(e,t,n,i){void 0===i&&(i=1),this.shadowText.setVisible(!0),this.shadowText.setTint(n),this.shadowText.setAlpha(i),Phaser.Display.Align.In.Center(this.shadowText,this.mainText,e,t)},n.updateSize=function(){var e=this.mainText,t=e.width,n=e.height;this.setSize(t,n)},n.createMainText=function(){this.mainText=this.scene.make.bitmapText({font:this.payload.font,size:this.payload.size,origin:{x:.5,y:.5}}),this.add(this.mainText)},n.createShadowText=function(){this.shadowText=this.scene.make.bitmapText({font:this.payload.font,size:this.payload.size,origin:{x:.5,y:.5},visible:!1}),this.add(this.shadowText)},t}(Phaser.GameObjects.Container),wc=Tc,Cc=n(681),Ic=vn.Z.DEFAULT,xc=Ic.KEY,Pc=Ic.FRAME,kc=function(e){function t(t){var n;return(n=e.call(this,t)||this).cat=void 0,n.effect=void 0,n.runStarTwinkle=function(){var e=n.cat,t=e.x,i=e.y,a=e.displayWidth,r=e.displayHeight,s=i-20;n.effect.run(1,t,s,a,r)},n.createEffect(),n.createCat(),n.runCatAnimation(),n.scene.add.existing((0,Ua.Z)(n)),n}(0,o.Z)(t,e);var n=t.prototype;return n.createCat=function(){this.cat=this.scene.make.image({key:xc,frame:Pc.THE_CAT,origin:{x:.5,y:1}}),this.cat.setWorldSize(204.5,112.5),this.cat.setY(this.cat.height/2),this.add(this.cat)},n.createEffect=function(){this.effect=new Cc.Z(this.scene),this.add(this.effect)},n.runCatAnimation=function(){new gc.Z({targets:[this.cat],duration:1e3,props:{scale:"+=0.02"}}).play()},t}(Phaser.GameObjects.Container),_c=kc,Oc=vn.Z.DEFAULT,Rc=Oc.KEY,Lc=Oc.FRAME,Dc=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n.bestScore=void 0,n.payload=void 0,n.theCat=void 0,n.popup=void 0,n.ribbon=void 0,n.yourScoreText=void 0,n.bestScoreText=void 0,n.currentScoreText=void 0,n.entrancesAnimation=void 0,n.scoreAnimation=void 0,n.counterAnimation=void 0,n.scene=t,n.bestScore=0,n.createPopup(),n.createTheCat(),n.createRibbon(),n.createYourScoreText(),n.createCurrentScore(),n.createBestScore(),n.createScoreAnimation(),n.createEntrancesAnimation(),n.scene.add.existing((0,Ua.Z)(n)),n}(0,o.Z)(t,e);var n=t.prototype;return n.updateData=function(e){this.payload=e;var t=e.bestScore,n=e.currentScore;if(n<=t)return this.setBestScore(t),this.setCurrentScore(n),void this.runScoreAnimation();this.runAnimation()},n.runAnimation=function(){var e=this;this.runScoreCounter(),this.scene.time.delayedCall(1300,(function(){e.entrancesAnimation.play(),e.scene.audio.playSound(Ja.Z.SCORE_COUNTER)}))},n.runScoreCounter=function(){var e,t=this,n=this.payload,i=n.bestScore,a=n.currentScore;null==(e=this.counterAnimation)||e.remove(),this.counterAnimation=this.scene.tweens.addCounter({from:0,to:a,delay:500,duration:2e3,completeDelay:300,onUpdate:function(e){var n=Math.floor(e.getValue());t.runScoreAnimation(),t.setCurrentScore(n)},onComplete:function(){t.bestScore=i,t.setBestScore(i),t.setCurrentScore(a),t.counterAnimation.remove()}})},n.runScoreAnimation=function(){this.scoreAnimation.play()},n.setBestScore=function(e){this.bestScoreText.setText("Best score: "+e)},n.setCurrentScore=function(e){this.currentScoreText.setText(""+e)},n.createPopup=function(){this.popup=new Sc(this.scene,0,0,284,240),this.add(this.popup)},n.createTheCat=function(){this.theCat=new _c(this.scene),Phaser.Display.Align.In.TopCenter(this.theCat,this.popup),this.add(this.theCat)},n.createRibbon=function(){this.ribbon=this.scene.make.image({key:Rc,frame:Lc.RIBBON_LONG}),this.ribbon.setSize(341,80).setDisplaySize(341,80),Phaser.Display.Align.In.Center(this.ribbon,this.theCat,0,93),this.add(this.ribbon)},n.createYourScoreText=function(){this.yourScoreText=this.scene.make.bitmapText({font:No.Z.PRIMARY.KEY,size:this.scene.fontSize(30),origin:{x:.5,y:.5},text:"Your score"}),Phaser.Display.Align.In.Center(this.yourScoreText,this.ribbon,0,-10),this.add(this.yourScoreText)},n.createCurrentScore=function(){this.currentScoreText=new wc(this.scene,{font:No.Z.PRIMARY.KEY,size:this.scene.fontSize(60)}),this.currentScoreText.setTintText(15779090,15779090,15704623,15704623),this.currentScoreText.setDropShadow(0,2,8804140),Phaser.Display.Align.In.Center(this.currentScoreText,this.popup,0,30),this.add(this.currentScoreText)},n.createBestScore=function(){this.bestScoreText=this.scene.make.bitmapText({font:No.Z.PRIMARY.KEY,size:this.scene.fontSize(24),origin:{x:.5,y:.5},text:"Best score: "+this.bestScore}),this.bestScoreText.setTint(10494183),Phaser.Display.Align.In.BottomCenter(this.bestScoreText,this.popup,0,-25),this.add(this.bestScoreText)},n.createEntrancesAnimation=function(){this.entrancesAnimation=new gc.Z({targets:[this],repeat:0,duration:200,props:{scale:"+=0.03"}})},n.createScoreAnimation=function(){this.scoreAnimation=new vc({targets:[this.currentScoreText],props:{scale:{from:1,to:1.3}}})},t}(Phaser.GameObjects.Container),Bc=Dc,Nc=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n.bestScoreBlock=void 0,n.scene=t,n.createBestScoreBlock(),n.scene.add.existing((0,Ua.Z)(n)),n}return(0,o.Z)(t,e),t.prototype.createBestScoreBlock=function(){this.bestScoreBlock=new Bc(this.scene),this.add(this.bestScoreBlock)},t}(Phaser.GameObjects.Container),Mc=Nc,Gc=n(685),Fc=n(669),Zc={targets:[],duration:600,ease:Phaser.Math.Easing.Back.Out,props:{y:{from:250,to:0},scale:{from:.9,to:1},alpha:{start:0,from:0,to:1}}},Uc=function(e){function t(t){return e.call(this,Zc,t)||this}return(0,o.Z)(t,e),t}(Ha.Z),Hc=n(683),Wc=n(684),zc=vn.Z.DEFAULT,Yc=zc.KEY,Vc=zc.FRAME,Kc=function(e){function t(t,n,i,a){var r;return(r=e.call(this,t,n,i,a)||this).avatar=void 0,r.scoreText=void 0,r.shareButton=void 0,r.bigStarExplosive=void 0,r.open=function(t){e.prototype.open.call((0,Ua.Z)(r),t);var n=r.getData("bestScore");r.setBestScore(n);var i=r.scene.player.getPlayer();r.avatar.loadPhoto(i.playerId,i.photo),r.runOpenAnimation(),r.scene.audio.playSound(Ja.Z.CONGRATULATION)},r.handleClose=function(){r.scene.screen.close(r.name)},r.handleShareBestScore=function(){r.scene.storage.dispatch(Io())},r.runBigStarExplosive=function(){Phaser.Display.Align.In.Center(r.bigStarExplosive,r.scoreText),r.bigStarExplosive.run()},r.setDepth(qa.Ks.POPUP),r.background.setAlpha(.8),r.createObjects(),r}(0,o.Z)(t,e);var n=t.prototype;return n.createObjects=function(){this.createTitle(),this.createClose(),this.createBestScoreTitle(),this.createPlayerAvatar(),this.createGlowEffect(),this.createBestScoreNumber(),this.createShareButton(),this.createStarTwinkleEffect(),this.createBigStarExplosive()},n.setBestScore=function(e){this.scoreText.setText(""+e)},n.createTitle=function(){var e=this.scene.make.image({key:Yc,frame:Vc.RIBBON_SMALL});e.setSize(162,36).setDisplaySize(162,36);var t=-90;Phaser.Display.Align.In.TopCenter(e,this.zone,0,t);var n=this.scene.make.bitmapText({font:No.Z.PRIMARY.KEY,size:10,text:"Today Record"});t=-5,Phaser.Display.Align.In.Center(n,e,0,t),this.add([e,n])},n.createClose=function(){var e=new Jo.Z(this.scene,Yc,Vc.BUTTON_CLOSE,38,38);e.setName("Close"),this.add(e),Phaser.Display.Align.In.TopRight(e,this.zone,-60,-50),e.onClick=this.handleClose},n.createBestScoreTitle=function(){var e=this.scene.make.bitmapText({font:No.Z.PRIMARY.KEY,size:22,text:"Best Score"});this.add(e),e.setTint(13256697),Phaser.Display.Align.In.TopCenter(e,this.zone,0,-130)},n.createBestScoreNumber=function(){this.scoreText=new wc(this.scene,{font:No.Z.PRIMARY.KEY,size:40}),this.add(this.scoreText),this.scoreText.setTintText(15911443,15911443,15902254,15902254),this.scoreText.setDropShadow(0,2,12871743),Phaser.Display.Align.In.TopCenter(this.scoreText,this.zone,0,-230)},n.createPlayerAvatar=function(){this.avatar=new Go(this.scene,{key:Yc,frame:Vc.AVATAR_FRAME_YELLOW_BIG,background:Vc.AVATAR_BG_YELLOW_BIG,width:89,height:89}),this.avatar.background.setSize(89,95).setDisplaySize(89,95),this.avatar.photo.setSize(89,95).setDisplaySize(89,95),this.avatar.avtFrame.setSize(89,95).setDisplaySize(89,95),this.add(this.avatar),Phaser.Display.Align.In.Center(this.avatar,this.zone,0,20)},n.createGlowEffect=function(){var e=vn.Z.EFFECTS,t=e.KEY,n=e.FRAME,i=this.scene.make.image({key:t,frame:n.FX_GLOW_LIGHT});i.setWorldSize(246,246),this.add(i),this.moveDown(i),Phaser.Display.Align.In.Center(i,this.avatar),this.scene.tweens.add({targets:[i],duration:6e3,repeat:-1,props:{angle:360,scale:{value:"+=0.01",yoyo:!0,duration:800,ease:Phaser.Math.Easing.Sine.InOut}}})},n.createShareButton=function(){this.shareButton=new Hc.Z(this.scene,{key:Yc,button:Vc.BUTTON_BLUE,icon:Vc.ICON_FLAT_SHARE,text:"Share"},168,82.8),this.shareButton.setName("Share"),this.add(this.shareButton),Phaser.Display.Align.In.BottomCenter(this.shareButton,this.zone,0,-80),this.shareButton.onClick=this.handleShareBestScore},n.createStarTwinkleEffect=function(){var e=new Cc.Z(this.scene),t=this.scoreText,n=t.x,i=t.y;e.run(2,n,i,300,120)},n.createBigStarExplosive=function(){this.bigStarExplosive=new Wc.Z(this.scene)},n.runOpenAnimation=function(){this.runBigStarExplosive(),this.runScoreEntrancesAnimation(),this.runAvatarEntrancesAnimation(),this.runShareEntrancesAnimation()},n.runScoreEntrancesAnimation=function(){this.scene.tweens.killTweensOf(this.scoreText),new Uc({targets:[this.scoreText],duration:300,props:{y:{from:0,to:this.scoreText.y}}}).play()},n.runAvatarEntrancesAnimation=function(){this.scene.tweens.killTweensOf(this.avatar);var e=this.avatar.scale;new Gc.Z({targets:[this.avatar],duration:400,props:{scale:{from:0,to:e}}}).play()},n.runShareEntrancesAnimation=function(){this.scene.tweens.killTweensOf(this.shareButton),this.shareButton.setAlpha(0),new Fc.Z({targets:[this.shareButton],delay:300}).play()},t}(GameCore.Screen),jc=Kc,Xc=GameCore.Configs.LeadersBoard,qc=function(e){function t(){for(var t,n,i=arguments.length,a=new Array(i),r=0;r<i;r++)a[r]=arguments[r];return(n=e.call.apply(e,_()(t=[this]).call(t,a))||this).bestScore=void 0,n.currentScore=void 0,n.loading=void 0,n.leadersBar=void 0,n.footerBar=void 0,n.main=void 0,n.confettiLeftEffect=void 0,n.confettiRightEffect=void 0,n.run=function(){n.updateLeaders(),n.updateScore(),n.explodeConfettiEffect(),n.main.bestScoreBlock.counterAnimation&&n.main.bestScoreBlock.counterAnimation.state!==Phaser.Tweens.REMOVED?n.main.bestScoreBlock.counterAnimation.on(Phaser.Tweens.Events.TWEEN_COMPLETE,(function(){n.handleShowBestScorePopup(),n.handleShowResultChallengePopup()})):n.time.delayedCall(800,(function(){n.handleShowBestScorePopup(),n.handleShowResultChallengePopup()})),n.footerBar.setAlpha(0),n.footerBar.runAnimation(),n.audio.pauseMusic(),n.audio.playSound(Ja.Z.GAME_OVER_SCENE)},n.runConfettiEffect=function(){var e=n.gameZone.displayWidth;n.confettiLeftEffect.stop(),n.confettiRightEffect.stop(),n.children.bringToTop(n.confettiLeftEffect),n.children.bringToTop(n.confettiRightEffect),n.confettiLeftEffect.run(1,0,-100),n.confettiRightEffect.run(1,0+e,-100),n.tweens.addCounter({delay:1e4,from:100,to:0,ease:Phaser.Math.Easing.Cubic.Out,duration:400,onUpdate:function(e){var t,i,a=e.getValue()/100;null==(t=n.confettiLeftEffect.emitter)||t.setAlpha(a),null==(i=n.confettiRightEffect.emitter)||i.setAlpha(a)},onComplete:function(){var e,t;null==(e=n.confettiLeftEffect.emitter)||e.setAlpha(1),null==(t=n.confettiRightEffect.emitter)||t.setAlpha(1),n.confettiLeftEffect.stop(),n.confettiRightEffect.stop()}})},n.explodeConfettiEffect=function(){var e=n.gameZone.displayWidth,t=-100,i=e;n.tweens.addCounter({repeat:3,duration:500,onStart:function(){n.confettiLeftEffect.explode(6,0,t),n.confettiRightEffect.explode(6,0+i,t)},onRepeat:function(){n.confettiLeftEffect.explode(6,0,t),n.confettiRightEffect.explode(6,0+i,t)},completeDelay:7e3,onComplete:function(){n.tweens.addCounter({from:100,to:0,ease:Phaser.Math.Easing.Cubic.Out,duration:400,onUpdate:function(e){var t,i,a=e.getValue()/100;null==(t=n.confettiLeftEffect.emitter)||t.setAlpha(a),null==(i=n.confettiRightEffect.emitter)||i.setAlpha(a)},onComplete:function(){var e,t;null==(e=n.confettiLeftEffect.emitter)||e.setAlpha(1),null==(t=n.confettiRightEffect.emitter)||t.setAlpha(1),n.confettiLeftEffect.stop(),n.confettiRightEffect.stop()}})}})},n.handlePlayWithFriend=function(){n.storage.dispatch(uo())},n.handleHomeClick=function(){n.scene.switch(xa.C.DASHBOARD_SCENE)},n.handleLeaderboardClick=function(){n.scene.switch(xa.C.LEADERBOARD_SCENE)},n}(0,o.Z)(t,e);var n=t.prototype;return n.preload=function(){var e=this;this.events.on("resume",(function(){e.updateScore()})),this.events.on("sleep",(function(){e.storage.dispatch(Us())})),this.events.on("wake",this.run),this.events.on("create",this.run)},n.create=function(){e.prototype.create.call(this),this.createBackground(da.Z.BACKGROUND.KEY);var t=this.player.getBestScore();this.bestScore=t,this.currentScore=0,this.createLoading(),this.createMain(),this.createLeadersBar(),this.createFooterBar(),this.createBestScoreScreen(),this.createConfettiSmallAnimation()},n.updateLeaders=function(){var e=this;this.leadersBar.killAndHideAll();var t=[{selector:Br,callback:function(t){if(!1===t){var n=window.game.player.getPlayerId(),i=e.getLeadersExcludeIds([n]);e.updateLeaderBar(i)}e.loading.setVisible(t)}}];this.handleStateChange(t),this.storage.dispatch(_r(Xc.LeaderboardId,tr,20))},n.getLeadersExcludeIds=function(e){var t=this.storage.getState(),n=Dr(t),i={};if(!e||0===e.length)return n;for(var a in n)if($t()(e).call(e,a)<0){var r=n[a],s=r.playerId,o=r.photo,c=r.score,l=r.rank;i[a]={playerId:s,photo:o,score:c,rank:l}}return i},n.updateScore=function(){var e=this.storage.getState(),t=vs(e),n=t.score,i=void 0===n?0:n,a=t.bestScore,r=void 0===a?0:a;this.bestScore=r<this.bestScore?this.bestScore:r,this.currentScore=i,this.main.bestScoreBlock.updateData({bestScore:this.bestScore,currentScore:this.currentScore})},n.createLoading=function(){this.loading=new Xa(this),Phaser.Display.Align.In.Center(this.loading,this.gameZone,0,120)},n.createMain=function(){this.bestScore=0,this.main=new Mc(this),Phaser.Display.Align.In.TopCenter(this.main,this.gameZone,0,-230),this.main.bestScoreBlock.theCat.runStarTwinkle()},n.createLeadersBar=function(){this.leadersBar=new qo(this),Phaser.Display.Align.In.Center(this.leadersBar,this.gameZone,0,120)},n.updateLeaderBar=function(e){var t={playerId:this.player.getPlayerId(),leaders:[]};for(var n in e){if(t.leaders.length>=3)break;var i=e[n],a=i.playerId,r=i.photo,s=i.score,o=i.rank;t.leaders.push({playerId:a,photo:r,score:s,rank:o})}t.leaders.push({playerId:da.Z.ICON_EARTH.KEY,photo:da.Z.ICON_EARTH.FILE,rank:4,score:-1}),this.leadersBar.updateInfo(t)},n.createFooterBar=function(){this.footerBar=new pc(this),Phaser.Display.Align.In.BottomCenter(this.footerBar,this.gameZone,0,-70),this.footerBar.homeButton.onClick=this.handleHomeClick,this.footerBar.pwfButton.onClick=this.handlePlayWithFriend,this.footerBar.rankButton.onClick=this.handleLeaderboardClick},n.createBestScoreScreen=function(){this.screen.add(qa.o4.BEST_SCORE_SCREEN,jc)},n.createConfettiSmallAnimation=function(){this.confettiLeftEffect=new Qa.Z(this,{speedX:{min:-20,max:100},rotate:{start:-1080,end:0}}),this.confettiRightEffect=new Qa.Z(this,{speedX:{min:20,max:-100},rotate:{start:0,end:1080}}),this.confettiLeftEffect.setDepth(fn.Z.EFFECT),this.confettiRightEffect.setDepth(fn.Z.EFFECT)},n.handleShowBestScorePopup=function(){var e;this.currentScore>this.bestScore&&this.storage.dispatch(Js({bestScore:this.currentScore}));var t=this.storage.getState(),n=ts(t),i=$t()(e=[pa,va]).call(e,n)>=0;this.currentScore>this.bestScore&&i&&(this.screen.open(qa.o4.BEST_SCORE_SCREEN,{bestScore:this.currentScore}),this.runConfettiEffect())},n.handleShowResultChallengePopup=function(){var e,t=this.storage.getState(),n=ts(t);if(-1!==$t()(e=[ga,ma]).call(e,n)&&cs(t)){var i=us(t).playerId;n===ma&&i===fa.playerId||(this.scene.pause(xa.C.GAME_OVER_SCENE),this.scene.launch(xa.C.RESULT_MATCH_SCENE))}},t}(Ga.Z);var Jc=qc,Qc=n(599),$c=n.n(Qc),el=n(188),tl=n.n(el),nl=n(91),il=n.n(nl),al=function(e){return e[e.ACE=401]="ACE",e[e.TWO=402]="TWO",e[e.THREE=403]="THREE",e[e.FOUR=404]="FOUR",e[e.FIVE=405]="FIVE",e[e.SIX=406]="SIX",e[e.SEVEN=407]="SEVEN",e[e.EIGHT=408]="EIGHT",e[e.NINE=409]="NINE",e[e.TEN=410]="TEN",e[e.JACK=411]="JACK",e[e.QUEEN=412]="QUEEN",e[e.KING=413]="KING",e}(al||{}),rl=function(e){return e[e.ACE=301]="ACE",e[e.TWO=302]="TWO",e[e.THREE=303]="THREE",e[e.FOUR=304]="FOUR",e[e.FIVE=305]="FIVE",e[e.SIX=306]="SIX",e[e.SEVEN=307]="SEVEN",e[e.EIGHT=308]="EIGHT",e[e.NINE=309]="NINE",e[e.TEN=310]="TEN",e[e.JACK=311]="JACK",e[e.QUEEN=312]="QUEEN",e[e.KING=313]="KING",e}(rl||{}),sl=function(e){return e[e.ACE=201]="ACE",e[e.TWO=202]="TWO",e[e.THREE=203]="THREE",e[e.FOUR=204]="FOUR",e[e.FIVE=205]="FIVE",e[e.SIX=206]="SIX",e[e.SEVEN=207]="SEVEN",e[e.EIGHT=208]="EIGHT",e[e.NINE=209]="NINE",e[e.TEN=210]="TEN",e[e.JACK=211]="JACK",e[e.QUEEN=212]="QUEEN",e[e.KING=213]="KING",e}(sl||{}),ol=function(e){return e[e.ACE=101]="ACE",e[e.TWO=102]="TWO",e[e.THREE=103]="THREE",e[e.FOUR=104]="FOUR",e[e.FIVE=105]="FIVE",e[e.SIX=106]="SIX",e[e.SEVEN=107]="SEVEN",e[e.EIGHT=108]="EIGHT",e[e.NINE=109]="NINE",e[e.TEN=110]="TEN",e[e.JACK=111]="JACK",e[e.QUEEN=112]="QUEEN",e[e.KING=113]="KING",e}(ol||{}),cl=function(e){return e[e.ACE=1]="ACE",e[e.TWO=2]="TWO",e[e.THREE=3]="THREE",e[e.FOUR=4]="FOUR",e[e.FIVE=5]="FIVE",e[e.SIX=6]="SIX",e[e.SEVEN=7]="SEVEN",e[e.EIGHT=8]="EIGHT",e[e.NINE=9]="NINE",e[e.TEN=10]="TEN",e[e.JACK=11]="JACK",e[e.QUEEN=12]="QUEEN",e[e.KING=13]="KING",e}(cl||{}),ll=function(e){return e[e.SpadesCard=1]="SpadesCard",e[e.ClubsCard=2]="ClubsCard",e[e.DiamondsCard=3]="DiamondsCard",e[e.HeartsCard=4]="HeartsCard",e}(ll||{}),ul=[ll.HeartsCard,ll.DiamondsCard,ll.ClubsCard,ll.SpadesCard],hl={DEPTH:{REMAINING_STOCK:12,HINT:25,CARD:10,CARD_SLOT:9},FOUNDATION_Y:70,VERTICAL_PILE_SPACE:24,MIN_VERTICAL_PILE_SPACE:18,MAX_HORIZONTAL_PILE_SPACE:62,SPACE_BETWEEN_PILE_AND_FOUNDATION:85,CARD_WIDTH:41.65,CARD_HEIGHT:72*.85,NUMBER_OF_TARGET:4,NUMBER_OF_PILE:8,NUMBER_OF_FREECELL:4,AUTO_MOVE_TIME:400,CARD_MOVE_TIME:300,CARD_DEAL_TIME:20},dl=function(){return window.game.world.isLandscape()?1.4:.9},fl=function(e){hl.FOUNDATION_Y=e},pl=hl,gl=vn.Z.GAMEPLAY_DEFAULT.KEY,ml=function(e){function t(t,n){var i;(i=e.call(this,t,0,0,gl,"ic_slot")||this).placement=void 0;var a=pl.CARD_WIDTH,r=pl.CARD_HEIGHT,s=pl.DEPTH;return i.placement=n,i.setInteractive(),i.disableInteractive(),i.setAlpha(.6).setWorldSize(a,r),i.setInteractive({useHandCursor:!0}),i.setDepth(s.CARD_SLOT),i.scene.add.existing((0,Ua.Z)(i)),i}(0,o.Z)(t,e);var n=t.prototype;return n.onClick=function(e){var t=!1;this.on(Phaser.Input.Events.GAMEOBJECT_POINTER_DOWN,(function(){t=!0})),this.on(Phaser.Input.Events.GAMEOBJECT_POINTER_UP,(function(){t&&e(),t=!1})),this.on(Phaser.Input.Events.GAMEOBJECT_POINTER_OUT,(function(){t=!1}))},n.offClick=function(){this.off(Phaser.Input.Events.GAMEOBJECT_POINTER_DOWN),this.off(Phaser.Input.Events.GAMEOBJECT_POINTER_UP),this.off(Phaser.Input.Events.GAMEOBJECT_POINTER_OUT)},t}(Phaser.GameObjects.Image),vl=ml,yl=function(e){function t(t){var n;return(n=e.call(this)||this).boardGame=void 0,n.slot=void 0,n.cards=void 0,n.x=void 0,n.y=void 0,n.name=void 0,n.idx=void 0,n.boardGame=t,n.cards=[],n.slot=new vl(t.scene,(0,Ua.Z)(n)),n.setIdx(-1),n}(0,o.Z)(t,e);var n=t.prototype;return n.setName=function(e){this.name=e},n.setIdx=function(e){this.idx=e},n.getIdx=function(){return this.idx},n.getname=function(){return this.name},n.setPosition=function(e,t){this.x=e,this.y=t,this.slot.setPosition(e,t)},n.addCard=function(e,t,n){if(void 0===n&&(n=!1),e.scene.gameplay.cardsLayer.bringToTop(e.bg),e.scene.gameplay.cardsLayer.bringToTop(e),e.scene.gameplay.cardsLayer.bringToTop(e.eligibleFoundationGlow),e.setPlacement(this),t){var i=this.getPlacingPosition(this.cards.length),a=i.x,r=i.y,s=n?0:pl.CARD_MOVE_TIME;e.moveTo(a,r,s)}this.cards.push(e)},n.pickTopCards=function(e){var t,n=this.cards.length;return 0==n?[]:il()(t=this.cards).call(t,Math.max(n-e,0))},n.getLastCard=function(){return this.cards[this.cards.length-1]},n.getPlacingPosition=function(e){return{x:this.x,y:this.y}},n.canBePlace=function(e,t){return!1},n.update=function(e){},n.clear=function(){this.cards=[]},n.isEmpty=function(){return 0===this.cards.length},n.pickAllCards=function(){var e;return il()(e=this.cards).call(e,0)},n.getAllCards=function(){for(var e=[],t=0;t<this.cards.length;t++)e.push(this.cards[t].getTag());return e},n.getCardByIndex=function(e){return this.cards[e]},t}(Phaser.Events.EventEmitter),bl=yl,Al=function(e){return e.Stock="stock",e.Pile="pile",e.Foundation="foundation",e.FreeCell="freecell",e}(Al||{}),El=Al,Sl=function(){var e=(0,s.Z)(h().mark((function e(t,n){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new(l())((function(e){t.time.delayedCall(n,e)})));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),Tl=Sl,wl=function(e){function t(t){var n;return(n=e.call(this,t)||this).spaceBetweenMajorCards=pl.VERTICAL_PILE_SPACE,n.setName(El.Pile),n}(0,o.Z)(t,e);var n=t.prototype;return n.addCardByDeal=function(){var t=(0,s.Z)(h().mark((function t(n,i,a){var r;return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=GameCore.Configs.Gameplay.SkipStartAnimation,e.prototype.addCard.call(this,n,i,r),this.cards.length===a&&this.cards.length>this.boardGame.boundNumberOfCards&&this.updateCardPosition(),r){t.next=7;break}return t.next=7,Tl(this.boardGame.scene,pl.CARD_MOVE_TIME);case 7:n.setInteractive(),n.setFacingWithFlippingAnim(!0);case 9:case"end":return t.stop()}}),t,this)})));return function(e,n,i){return t.apply(this,arguments)}}(),n.getPlacingPosition=function(e,t){void 0===e&&(e=0);var n=t||this.cards.length,i=this.getSpaceBetweenMinorCards(n),a=this.getSpaceBetweenMajorCards(),r=this.getIdxCardValidToMove(t),s=0;return s=n<=this.boardGame.boundNumberOfCards||-1==r?a*e:e<r?i*e:i*r+a*(e-r),{x:this.x,y:this.y+s}},n.getSubCards=function(e){var t,n,i=tl()(t=this.cards).call(t,(function(t){return t===e}));return S()(n=this.cards).call(n,i)},n.pickSubCards=function(e){var t,n,i=tl()(t=this.cards).call(t,(function(t){return t===e}));return il()(n=this.cards).call(n,i)},n.getFacingUpCards=function(){var e,t;if(0===this.cards.length)return[];var n=tl()(e=this.cards).call(e,(function(e){return e.isFacingUp()}));return n<0?[]:S()(t=this.cards).call(t,n)},n.faceUpLast=function(){var e=this.cards.length;if(e>0){var t=this.cards[e-1];if(t.isFacingUp())return;return t.setFacingWithFlippingAnim(!0),t.setInteractive(),t}this.slot.setInteractive()},n.faceDownLast=function(){var e=this.cards.length;if(e>0){var t=this.cards[e-1];return t.setFacingWithFlippingAnim(!1),t.disableInteractive(),t}this.slot.setInteractive()},n.canBePlace=function(e,t){var n=GameCore.Configs.Gameplay.EditMode;if(GameCore.Utils.Valid.isDebugger()&&n)return!0;var i=e.getTag(),a=i%100,r=Math.floor((i-a)/300);if(0===this.cards.length)return t<=this.boardGame.getMaxCardCanMoveToEmptyPile();var s=this.cards[this.cards.length-1].getTag(),o=s%100,c=Math.floor((s-o)/300),l=this.boardGame.getMaxCardCanMoveToNonEmptyPile();return r!=c&&a==o-1&&t<=l},n.canBeHint=function(e){var t=e.getTag(),n=t%100,i=Math.floor((t-n)/300);if(0===this.cards.length)return t%100===cl.KING;var a=this.cards[this.cards.length-1].getTag(),r=a%100;return i!=Math.floor((a-r)/300)&&n==r-1},n.isLastCard=function(e){return this.cards[this.cards.length-1]===e},n.clear=function(){this.cards=[],this.spaceBetweenMajorCards=pl.VERTICAL_PILE_SPACE},n.isSorted=function(){if(this.cards.length<=1)return!0;for(var e=0;e<this.cards.length-1;e++){var t=this.cards[e],n=this.cards[e+1];if(t.getTag()%100<n.getTag()%100)return!1}return!0},n.updateCardPosition=function(e){if(0!==this.cards.length){var t=e||this.cards.length;this.updateSpaceBetweenMajorCards(t);for(var n=pl.CARD_MOVE_TIME,i=this.y,a=1;a<t;a++){var r=this.getVerticalSpace(a,t),s=this.cards[a];if(s){var o=i+r;s.moveTo(this.x,o,n),i=o}}this.updateCardsVisibleHeight(t)}},n.updateCardsVisibleHeight=function(e){for(var t=this.getIdxCardValidToMove(e),n=0;n<e;n++){var i=this.cards[n];i&&(i.visibleHeight=n==e-1?i.displayHeight:n<t?this.getSpaceBetweenMinorCards(e):this.getSpaceBetweenMajorCards())}},n.getVerticalSpace=function(e,t){void 0===e&&(e=0);var n=t||this.cards.length,i=this.boardGame.boundNumberOfCards,a=this.getSpaceBetweenMinorCards(n),r=this.getSpaceBetweenMajorCards();return n<=i?r:e<this.getIdxCardValidToMove(n)+1?a:r},n.getSpaceBetweenMinorCards=function(e){var t=pl.VERTICAL_PILE_SPACE,n=e||this.cards.length,i=this.boardGame.getMaxHeightTableau(),a=this.getIdxCardValidToMove(n)+1;if(0===a)return t;var r=i-(n-a)*this.spaceBetweenMajorCards;return r/a>t?t:r/a},n.getSpaceBetweenMajorCards=function(){return this.spaceBetweenMajorCards},n.updateSpaceBetweenMajorCards=function(e){var t=pl.VERTICAL_PILE_SPACE,n=pl.MIN_VERTICAL_PILE_SPACE;this.spaceBetweenMajorCards=t;var i=e||this.cards.length;if(!(this.getSpaceBetweenMinorCards(i)>=pl.MIN_VERTICAL_PILE_SPACE)){var a=this.getIdxCardValidToMove()+1,r=this.cards.length-a;if(0!==r){var s=this.boardGame.getMaxHeightTableau()-a*n,o=Math.floor(s/r);this.spaceBetweenMajorCards=o}}},n.getIdxCardValidToMove=function(e){for(var t=this.cards,n=t.length-1,i=t.length-1;i>0;i--){var a=t[i].getCardValue(),r=t[i].getCardSuit(),s=t[i-1].getCardValue(),o=t[i-1].getCardSuit();if(a!=s-1||r==o)return n;n-=1}return void 0===e?n:n+(e-t.length)},t}(bl),Cl=wl,Il=function(e){function t(t,n){var i;return(i=e.call(this,t)||this).cards=[],i.color=void 0,i.color=n,i.createAce(),i.setName(El.Foundation),i}(0,o.Z)(t,e);var n=t.prototype;return n.createAce=function(){this.slot.setFrame("ic_slot_a")},n.setPosition=function(t,n){e.prototype.setPosition.call(this,t,n)},n.addCard=function(t,n,i){var a=this;e.prototype.addCard.call(this,t,n,i);var r=i?0:pl.CARD_MOVE_TIME,s=this.cards.length-2;this.boardGame.scene.time.delayedCall(r,(function(){var e=a.cards[s];e&&e.kill()}))},n.pickTopCards=function(t){var n=this.cards[this.cards.length-2];return n&&n.revive(),e.prototype.pickTopCards.call(this,t)},n.canBePlace=function(e){var t=e.getTag(),n=t%100,i=(t-n)/100,a=i===this.color;if(0===this.cards.length)return t%100===cl.ACE&&a;var r=this.cards[this.cards.length-1].getTag(),s=r%100;return i==(r-s)/100&&n==s+1},n.isFull=function(){return 13===this.cards.length},t}(bl),xl=function(e){return e[e.NONE=0]="NONE",e[e.DEALING=1]="DEALING",e[e.IDLE=2]="IDLE",e[e.PLAYING=3]="PLAYING",e[e.AUTO_COMPLETING=4]="AUTO_COMPLETING",e[e.OUT_OF_MOVE=5]="OUT_OF_MOVE",e[e.GAME_OVER=6]="GAME_OVER",e[e.AUTO_MOVE_TO_FOUNDATION=7]="AUTO_MOVE_TO_FOUNDATION",e}({}),Pl=vn.Z.GAMEPLAY_DEFAULT,kl=Pl.KEY,_l=Pl.FRAME,Ol=function(e){function t(t){var n;return(n=e.call(this,t)||this).hand=void 0,n.handScaleDefault=1,n.name="TutorialHand",n.addHand(),n.hand.scale,n.scene.add.existing((0,Ua.Z)(n)),n}(0,o.Z)(t,e);var n=t.prototype;return n.addHand=function(){this.hand=this.scene.make.image({key:kl,frame:_l.HAND,origin:{x:.5,y:.5}}),this.hand.setWorldSize(65.5,55.5),this.handScaleDefault=this.hand.scale,this.resetHandPosition(),this.add(this.hand)},n.doubleTap=function(e,t,n){var i=this;this.setHandPositionOnDoubleClick(),this.scene.tweens.add({delay:e,targets:[this.hand],ease:Phaser.Math.Easing.Cubic.In,props:{scale:{duration:100,from:this.handScaleDefault,to:.8*this.handScaleDefault},angle:{from:0,value:-10,duration:100}},loop:1,yoyo:!0,onComplete:function(){t&&i.hide(),n&&n()}})},n.tapAndHold=function(e,t){this.scene.tweens.add({delay:e,targets:[this.hand],ease:Phaser.Math.Easing.Cubic.Out,props:{scale:{duration:200,from:this.handScaleDefault,to:.8*this.handScaleDefault},angle:{from:0,value:-10,duration:200}},onComplete:t})},n.unHold=function(e,t,n){var i=this;this.scene.tweens.add({delay:e,targets:[this.hand],ease:Phaser.Math.Easing.Cubic.Out,props:{scale:{duration:200,from:.8*this.handScaleDefault,to:this.handScaleDefault},angle:{from:-10,value:0,duration:200}},onComplete:function(){t&&i.hide(),n&&n()}})},n.show=function(){this.hand.setVisible(!0)},n.hide=function(){this.hand.setVisible(!1)},n.preDestroy=function(){this.scene.tweens.killTweensOf(this.hand)},n.kill=function(){e.prototype.kill.call(this),this.resetHandPosition()},n.setHandPositionOnDoubleClick=function(){this.hand.setPosition(5,5)},n.resetHandPosition=function(){this.hand.setPosition(20,20)},t}(Phaser.GameObjects.Container),Rl=Ol,Ll=vn.Z.CARD_BACK,Dl=pl.DEPTH,Bl=function(){function e(e){this.boardGame=void 0,this.bg=void 0,this.hintLayer=void 0,this.hintContainer=void 0,this.group=void 0,this.hintTween=void 0,this.hand=void 0,this.running=!1,this.boardGame=e,this.hintLayer=e.scene.add.container(),this.hintLayer.setDepth(Dl.HINT),this.hintLayer.setVisible(!1),this.group=e.scene.add.group({defaultKey:vn.Z.GAMEPLAY_DEFAULT.KEY}),this.createBg(),this.createContainer(),this.createTutorialHand()}var t=e.prototype;return t.createBg=function(){var e=this.boardGame.scene.add.image(0,0,vn.Z.GAMEPLAY_DEFAULT.KEY,"blank"),t=this.boardGame.scene.world.getWorldSize(),n=t.width,i=t.height;e.setOrigin(0,0),e.setWorldSize(n,i),e.setAlpha(.5),e.setTint(1315862),this.bg=e,yn.Z.registerObject(e),this.hintLayer.add(e)},t.createContainer=function(){this.hintContainer=this.boardGame.scene.add.container(),this.hintLayer.add(this.hintContainer)},t.fadeInHint=function(){this.running=!0,this.hintLayer.revive(),this.boardGame.scene.tweens.add({targets:[this.hintLayer],alpha:{from:0,to:1},duration:300})},t.fadeOutHint=function(){var e=this;this.boardGame.scene.tweens.add({targets:[this.hintLayer],alpha:{from:1,to:0},duration:300,onComplete:function(){e.hintLayer.kill(),e.running=!1}})},t.showDealerHint=function(){var e,t=this;if(!this.running&&(null==(e=this.hintTween)||!e.isPlaying())&&!(this.hintTween&&this.hintTween.countdown>0)){if(this.boardGame.stock.cards.length>0){var n=this.createCardBack();this.hintContainer.add([n])}var i=this.createHintGlow(),a=this.boardGame.stock.getPlacingPosition(0),r=a.x,s=a.y;this.hintContainer.add(i),this.hintContainer.setPosition(r,s),this.hintContainer.add(this.hand),this.hand.revive(),this.hintTween=this.boardGame.scene.tweens.addCounter({duration:800,onStart:function(){t.hand.doubleTap(0,!1,(function(){console.log("complete double tap")}))},onComplete:function(){t.hintContainer.getAll().forEach((function(e){return t.group.killAndHide(e)})),t.hintContainer.removeAll(),t.hand.kill(),t.fadeOutHint()}}),this.fadeInHint()}},t.showMoveHintAnimation=function(e,t){var n,i=this;if(!this.running&&(null==(n=this.hintTween)||!n.isPlaying())&&!(this.hintTween&&this.hintTween.countdown>0)){this.running=!0;var a=e.getWorldPosition(),r=a.x,s=a.y,o=t.getPlacingPosition(t.cards.length),c=o.x,l=o.y;if(e.placement instanceof Cl)for(var u=e.placement.getSubCards(e),h=0;h<u.length;h++){var d=this.createHintCard(u[h].frame.name);d.setY(this.boardGame.getVerticalSpacePile()*h);var f=this.createHintGlow();f.setY(this.boardGame.getVerticalSpacePile()*h),this.hintContainer.add([f,d])}else{var p=this.createHintCard(e.frame.name),g=this.createHintGlow();this.hintContainer.add([g,p])}this.hintContainer.add(this.hand),this.boardGame.scene.tweens.killTweensOf(this.hand),this.hand.revive(),this.hand.tapAndHold(0),this.hintContainer.revive(),this.hintTween=this.boardGame.scene.tweens.add({targets:this.hintContainer,x:{start:r,from:r,to:c},y:{start:s,from:s,to:l},delay:300,duration:600,completeDelay:500,ease:Phaser.Math.Easing.Sine.Out,onComplete:function(){i.hand.unHold(0,!1,(function(){i.hintContainer.getAll().forEach((function(e){return i.group.killAndHide(e)})),i.hintContainer.removeAll(),i.hand.kill(),i.fadeOutHint()}))}}),this.fadeInHint()}},t.createHintGlow=function(){var e=dl(),t=this.group.get();return t.setTexture(vn.Z.GAMEPLAY_DEFAULT.KEY,"hint"),t.setWorldSize(61*e,83*e),t.revive(),t},t.createHintCard=function(e){var t=this.boardGame.scene.theme.getCurrentThemeConfig().cardFaceKey,n=this.group.get();n.setTexture(t),n.revive(),n.setFrame(e);var i=pl.CARD_WIDTH,a=pl.CARD_HEIGHT;return n.setWorldSize(i,a),n},t.createCardBack=function(){var e=this.boardGame.scene.theme.getCurrentThemeConfig().cardBackFrame,t=this.group.get();t.setTexture(Ll.KEY,e),t.revive();var n=pl.CARD_WIDTH,i=pl.CARD_HEIGHT;return t.setWorldSize(n,i),t},t.createTutorialHand=function(){this.hand=new Rl(this.boardGame.scene),this.hand.kill(),this.hintLayer.add(this.hand)},e}(),Nl=Bl,Ml=function(){function e(e){this.freeCells=void 0,this.piles=void 0,this.foundations=void 0,this.moveSpace=[],this.autoMoveFoundation=!0,this.boardGame=void 0,this.boardGame=e,this.piles=[],this.foundations=[],this.freeCells=[];for(var t=0;t<8;t++)this.piles.push([]);for(var n=0;n<4;n++)this.foundations.push([]),this.freeCells.push([])}var t=e.prototype;return t.printBoard=function(){var e,t,n;console.log("freeCell: ",De()(e=this.freeCells).call(e,(function(e){return e.join(" ")})).join(" ")),console.log(De()(t=this.piles).call(t,(function(e){return e.join(" ")})).join("\n")),console.log("foundations:\n",De()(n=this.foundations).call(n,(function(e){return e.join(" ")})).join("\n"))},t.updateInfo=function(){this.updateState()},t.updateState=function(){var e=this,t=this.boardGame,n=t.foundations,i=t.piles,a=t.freeCells;n.forEach((function(t,n){return e.foundations[n]=t.getAllCards()})),i.forEach((function(t,n){return e.piles[n]=t.getAllCards()})),a.forEach((function(t,n){return e.freeCells[n]=t.getAllCards()}))},t.getHint=function(){var e=this;this.moveSpace=[];var t,n=this.getMovable(),i=n.move,a=n.moveToFoundation;if(0!=i.length||0!=a.length){if(a.length>0)t=a[0];else{for(var r,s,o=0;o<i.length;o++)this.getCostByMove(i[o]);Di()(r=this.moveSpace).call(r,(function(e,t){return e.cost-t.cost})),this.moveSpace=Re()(s=this.moveSpace).call(s,(function(t,n){for(var i=n-1;i>=0;i--){var a=e.moveSpace[i],r=a.cost,s=a.action;if(r<t.cost&&s.card==t.action.card&&s.from==t.action.from)return!1}return!0}));var c=this.moveSpace[0].cost;if(0==c)t=this.moveSpace[0].action;else{var l=0;this.moveSpace.forEach((function(e){e.cost<=c+1&&(l+=1)}));var u=Math.floor(Math.random()*Math.min(this.moveSpace.length,Math.max(3,l)));t=this.moveSpace[u].action}}return this.convertActionToHintType(t)}},t.convertActionToHintType=function(e){var t,n=e.from,i=e.to,a=e.card,r=this.boardGame,s=r.piles,o=r.freeCells,c=r.foundations,l=this.piles,u=s;"C"==n[0]&&(l=this.freeCells,u=o);this.foundations;var h=c;"C"==i[0]?(this.freeCells,h=o):"T"==i[0]&&(this.piles,h=s);var d=R()(n[1]),f=R()(i[1]),p=$t()(t=l[d]).call(t,a);return{card:u[d].getCardByIndex(p),dest:h[f]}},t.getMovesEstimate=function(){var e=0;return this.foundations.forEach((function(t){e+=t.length})),52-e},t.getNumOfCardsUnsorted=function(){for(var e=0,t=0;t<this.piles.length;t++){for(var n=this.piles[t],i=n.length,a=n.length-1;a>0;a--){var r=n[a]%100,s=Math.floor((n[a]-r)/300),o=n[a-1]%100,c=Math.floor((n[a-1]-o)/300);if(r!=o-1||s==c)break;i-=1}e+=i}return e},t.getNumOfCardsInFreeCells=function(){for(var e=0,t=0;t<this.freeCells.length;t++)this.freeCells[t].length>0&&(e+=1);return e},t.getMovable=function(){for(var e,t,n=this,i=[],a=[],r=De()(e=this.piles).call(e,(function(e){return e[e.length-1]||0})),s=De()(t=this.foundations).call(t,(function(e){return e[e.length-1]||0})),o=De()(s).call(s,(function(e,t){return e?e+1:100*(3-t+1)+1})),c=0;c<r.length;c++){var l=r[c];if(l){var u=$t()(o).call(o,l);u>=0&&a.push({from:"T"+c,to:"F"+u,card:l})}}for(var h=0;h<this.freeCells.length;h++){var d=this.freeCells[h][0];if(d){var f=$t()(o).call(o,d);f>=0&&a.push({card:d,from:"C"+h,to:"F"+f})}}for(var p=0;p<this.freeCells.length;p++){var g=this.freeCells[p][0];if(g)for(var m=!1,v=0;v<this.piles.length;v++)!this.canBePlace(g,1,this.piles[v])||0==this.piles[v].length&&m||(m=0==this.piles[v].length,i.push({card:g,from:"C"+p,to:"T"+v}))}for(var y=0;y<r.length;y++){var b=r[y];if(b)for(var A=0;A<4;A++)if(0==this.freeCells[A].length){i.push({card:b,from:"T"+y,to:"C"+A});break}}return this.piles.forEach((function(e,t){e.forEach((function(a,r){for(var s=e.length-r,o=!1,c=0;c<n.piles.length;c++){var l=n.piles[c];0==r&&a%100==13||c==t||(s==e.length||o)&&0==l.length||n.canBePlace(a,s,l)&&n.isCardValidToMove(a,e)&&(o=0==l.length,i.push({card:a,from:"T"+t,to:"T"+c}))}}))})),{move:Re()(i).call(i,(function(e,t,n){return tl()(n).call(n,(function(t){return t===e}))===t})),moveToFoundation:a}},t.isCardValidToMove=function(e,t){if(!e)return!1;var n=$t()(t).call(t,e);if(-1==n)return!1;if(n==t.length-1)return!0;for(var i=n+1;i<t.length;i++){var a=t[i]%100,r=Math.floor((t[i]-a)/300),s=t[i-1]%100,o=Math.floor((t[i-1]-s)/300);if(a!=s-1||r==o)return!1}return!0},t.canBePlace=function(e,t,n){var i=this.getMaxCardCanMove();if(0==n.length)return t<=i/2;var a=n[n.length-1];return!(!a||!(e/2>120&&a/2<120||e/2<120&&a/2>120)||e%100+1!=a%100)&&t<=i},t.getMaxCardCanMove=function(){var e,t,n=Re()(e=this.freeCells).call(e,(function(e){return 0==e.length})).length,i=Re()(t=this.piles).call(t,(function(e){return 0==e.length})).length;return Math.pow(2,i)*(n+1)},t.getCostByMove=function(e){var t=JSON.parse(N()(this.piles)),n=JSON.parse(N()(this.freeCells)),i=JSON.parse(N()(this.foundations)),a=JSON.parse(N()(e));this.moveAction(e),this.moveSpace.push({action:a,cost:this.getCost()}),this.piles=t,this.freeCells=n,this.foundations=i},t.moveAction=function(e){var t,n=e.card,i=e.from,a=e.to,r=this.piles;"C"==i[0]&&(r=this.freeCells);var s=this.foundations;"C"==a[0]?s=this.freeCells:"T"==a[0]&&(s=this.piles);var o=r[R()(i[1])],c=$t()(o).call(o,n);if((t=s[R()(a[1])]).push.apply(t,il()(o).call(o,c)),this.autoMoveFoundation){var l=this.getMovable().moveToFoundation;l.length>0&&this.moveAction(l[0])}},t.getCost=function(){return this.getMovesEstimate()+this.getNumOfCardsUnsorted()+this.getNumOfCardsInFreeCells()},e}(),Gl=function(){function e(e){this.scene=void 0,this.boardGame=void 0,this.availableHints=void 0,this.outOfMove=void 0,this.hintAnimation=void 0,this.hintClicked=void 0,this.hintByCost=void 0,this.timeToAutoHint=void 0,this.boardGame=e,this.scene=e.scene,this.outOfMove=!0,this.hintClicked=0,this.timeToAutoHint=0,this.hintAnimation=new Nl(e),this.hintByCost=new Ml(e)}var t=e.prototype;return t.getAvailableDestinations=function(e){var t=this.boardGame,n=t.piles,i=t.foundations,a=t.freeCells,r=[],s=e.placement;s instanceof Cl&&!s.isLastCard(e)||r.push.apply(r,Re()(i).call(i,(function(t){return t.canBePlace(e)})));var o=Re()(n).call(n,(function(t){var n,i=$t()(n=e.placement.cards).call(n,e),a=e.placement.cards.length-i;return t.canBePlace(e,a)}));return r.push.apply(r,o),r.push.apply(r,Re()(a).call(a,(function(t){return t.canBePlace(e)}))),r},t.canHint=function(){return this.findMovable().length>0},t.showHint=function(){var e=(0,s.Z)(h().mark((function e(){var t;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.boardGame.isOutOfMove()){e.next=3;break}return this.boardGame.outOfMove(),e.abrupt("return");case 3:if(this.scene.vibration.performVibrating(40),this.boardGame.isIdle()&&(this.boardGame.boardState=xl.PLAYING),this.boardGame.boardState===xl.PLAYING){e.next=7;break}return e.abrupt("return");case 7:if(this.boardGame.scene.audio.playSound(Ja.Z.HINT),this.hintClicked+=1,this.resetAutoHintTime(),this.hintByCost.updateInfo(),!(t=this.hintByCost.getHint())){e.next=15;break}return this.hintAnimation.showMoveHintAnimation(t.card,t.dest),e.abrupt("return");case 15:this.boardGame.outOfMove();case 16:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),t.findMovable=function(){var e,t,n,i,a,r,s,o=this,c=[],l=this.boardGame,u=De()(e=l.piles).call(e,(function(e){return e.cards[e.cards.length-1]})),h=De()(t=l.piles).call(t,(function(e){var t,n=tl()(t=e.cards).call(t,(function(e){return e.isFacingUp()}));return e.cards[n]})),d=De()(n=l.foundations).call(n,(function(e){return e.cards[e.cards.length-1]})),f=Re()(i=l.freeCells).call(i,(function(e){return e.isEmpty()})),p=Re()(a=l.freeCells).call(a,(function(e){return e.isFull()})),g=De()(p).call(p,(function(e){return e.cards[0]})),m=De()(d).call(d,(function(e,t){return e?e.getTag()+1:100*ul[t]+1})),v=_()(r=[]).call(r,g,u),y=D()(v).call(v,(function(e){return e&&e.getTag()%100==1}));y&&c.push(y);for(var b=0;b<v.length;b++){var A=v[b];if(A)$t()(m).call(m,A.getTag())>=0&&c.push(A)}var E=De()(s=l.piles).call(s,(function(e){return e.getFacingUpCards()}));g.forEach((function(e){var t;D()(t=l.piles).call(t,(function(t){return t.canBePlace(e,1)}))&&o.isCardValidToMove(e)&&c.push(e)}));for(var S=function(e){var t,n=h[e];if(!n)return"continue";if(n.isKing()&&0==$t()(t=l.piles[e].cards).call(t,n))return"continue";if(n){var i,a,r=l.piles[e].cards.length-$t()(i=l.piles[e].cards).call(i,n);D()(a=l.piles).call(a,(function(e){return e.canBePlace(n,r)}))&&o.isCardValidToMove(n)&&c.push(n)}},T=0;T<h.length;T++)S(T);if(E.forEach((function(e){e.forEach((function(e,t){var n,i=e.placement.cards.length-t;D()(n=l.piles).call(n,(function(t){return t.canBePlace(e,i)}))&&t>0&&o.isCardValidToMove(e)&&c.push(e)}))})),f.length>0){var w=u[Math.floor(u.length*Math.random())];this.isCardValidToMove(w)&&c.push(w)}return c},t.getNumberOfMovable=function(){this.hintByCost.updateInfo();var e=this.hintByCost.getMovable(),t=e.move,n=e.moveToFoundation;return t.length+n.length},t.isCardValidToMove=function(e){if(!e)return!1;var t=e.placement.cards,n=$t()(t).call(t,e);if(-1==n)return!1;if(n==t.length-1)return!0;for(var i=n+1;i<t.length;i++){var a=t[i].getCardValue(),r=t[i].getCardSuit(),s=t[i-1].getCardValue(),o=t[i-1].getCardSuit();if(a!=s-1||r==o)return!1}return!0},t.autoPlayStep=function(){this.hintByCost.updateInfo();var e=this.hintByCost.getHint();e?(this.boardGame.mover.handleClickOnCard(e.card,e.dest),this.outOfMove=!1):console.error("No move")},t.resetAutoHintTime=function(){this.timeToAutoHint=0},t.clear=function(){this.hintClicked=0},t.update=function(e){if(this.boardGame.isPlaying()){this.boardGame.scene.player.getPlayerSettings().autoHints?this.timeToAutoHint+=e:this.timeToAutoHint=0;var t=this.getNumberOfMovable()<=5?1e4:2e4;this.timeToAutoHint>t&&this.showHint()}},e}(),Fl=Gl,Zl=n(602),Ul=function(e){function t(t,n){var i;return(i=e.call(this,t,0,0,vn.Z.GAMEPLAY_DEFAULT.KEY,"card-bg")||this).parent=void 0,i.updateFromParent=function(){i.setPosition(i.parent.x,i.parent.y+1),i.setScale(i.parent.scaleX,i.parent.scaleY),i.setVisible(i.parent.visible)},i.parent=n,i.setDepth(pl.DEPTH.CARD_SLOT),i.updateFromParent(),t.add.existing((0,Ua.Z)(i)),i}return(0,o.Z)(t,e),t}(Phaser.GameObjects.Image),Hl=Ul,Wl=vn.Z.GAMEPLAY_DEFAULT,zl=Wl.KEY,Yl=Wl.FRAME,Vl=function(e){function t(t,n){var i;return(i=e.call(this,t,0,0,zl,Yl.HINT)||this).parent=void 0,i.glowMode="none",i.glowTint="none",i.fadeTween=void 0,i.tintTween=void 0,i.cropTween=void 0,i.cropHeight=void 0,i.updateFromParent=function(){i.setPosition(i.parent.x,i.parent.y)},i.parent=n,i.setDepth(pl.DEPTH.CARD),i.updateFromParent(),i.cropHeight=i.getCropHeight(),t.add.existing((0,Ua.Z)(i)),i}(0,o.Z)(t,e);var n=t.prototype;return n.reviveGlow=function(){this.revive(),this.setAlpha(0,0,0,0),this.cropHeight=this.getCropHeight()},n.removeGlow=function(){var e=this;"none"!=this.glowMode&&(this.glowMode="none",this.playFadeTween(0,0).then((function(){e.kill()})))},n.resetGlowSizeToFull=function(){var e;"full"!=this.glowMode&&(null==(e=this.fadeTween)||e.complete(),"none"==this.glowMode?(this.reviveGlow(),this.resetGlowSizeFromNone()):this.resetGlowSizeFromCrop(),this.playFadeTween(1,1),this.glowMode="full")},n.cropGlow=function(){var e;"crop"!=this.glowMode?(null==(e=this.fadeTween)||e.complete(),"none"==this.glowMode?(this.reviveGlow(),this.cropGlowSizeFromNone()):this.cropGlowSizeFromFull(),this.playFadeTween(1,.2),this.glowMode="crop"):this.updateCropSizeWhenCropHeightChange()},n.updateCropSizeWhenCropHeightChange=function(){if("crop"===this.glowMode){var e=this.cropHeight,t=this.getCropHeight();e!==t&&this.playCropTween(e,t,100)}},n.playFadeTween=function(e,t,n){var i=this;void 0===n&&(n=200);var a=this.alphaTopLeft,r=this.alphaBottomLeft;return new(l())((function(s){i.fadeTween=i.scene.tweens.addCounter({from:0,to:1,duration:n,onUpdate:function(n){var s=n.getValue(),o=Phaser.Math.Interpolation.Linear([a,e],s),c=Phaser.Math.Interpolation.Linear([r,t],s);i.setAlpha(o,o,c,c)},onComplete:function(){s()}})}))},n.updateGlowTintByLightOn=function(){this.parent.getLightOn()?this.setGlowTint("none"):this.setGlowTint("grey")},n.setGlowTint=function(e){if(this.glowTint!=e){var t=this.getTintByString(this.glowTint),n=this.getTintByString(e);this.playUpdateTintTween(t,n),this.glowTint=e}},n.getTintByString=function(e){return"grey"===e?new Phaser.Display.Color(209,209,209):new Phaser.Display.Color(255,255,255)},n.playUpdateTintTween=function(e,t){var n,i=this;null==(n=this.tintTween)||n.remove(),this.tintTween=this.scene.tweens.addCounter({from:0,to:1,ease:Phaser.Math.Easing.Sine.InOut,duration:200,onUpdate:function(n){var a=n.getValue(),r=Phaser.Display.Color.Interpolate.ColorWithColor(e,t,100,100*a),s=Phaser.Display.Color.GetColor(r.r,r.g,r.b);i.setTint(s)}})},n.cropGlowSizeFromFull=function(){var e=this.getCropHeight();this.playCropTween(this.displayHeight,e)},n.resetGlowSizeFromCrop=function(){this.playCropTween(this.cropHeight,this.displayHeight)},n.cropGlowSizeFromNone=function(){var e=this.getCropHeight();this.playCropTween(e,e,0)},n.resetGlowSizeFromNone=function(){this.playCropTween(this.displayHeight,this.displayHeight,0)},n.getCropHeight=function(){return this.parent.visibleHeight+(this.displayHeight-this.parent.displayHeight)/2},n.playCropTween=function(e,t,n){var i,a=this;void 0===n&&(n=200),null==(i=this.cropTween)||i.remove(),this.cropTween=this.scene.tweens.addCounter({from:e,to:t,duration:n,onUpdate:function(e){var t=e.getValue(),n={x:a.x,y:a.y-a.displayHeight/2+t/2,width:a.displayWidth,height:t};a.setCropByViewport(n),a.cropHeight=t}})},n.getGlowMode=function(){return this.glowMode},t}(Phaser.GameObjects.Image),Kl=Vl,jl=vn.Z.CARD_BACK,Xl=function(e){function t(t,n){var i;return(i=e.call(this,t,0,0,"")||this).scene=void 0,i.bg=void 0,i.tag=void 0,i.facingUp=void 0,i.oldX=void 0,i.oldY=void 0,i.shakePosition=void 0,i.facingTween=void 0,i.movingTween=void 0,i.moves=void 0,i.placement=void 0,i.lightOn=!0,i.cardTint="none",i.tweenLight=void 0,i.isEligibleFoundation=!1,i.eligibleFoundationGlow=void 0,i.visibleHeight=pl.VERTICAL_PILE_SPACE,i.setFacing=function(e){i.facingUp=e,e?i.setCardFace():i.setCardBack()},i.scene=t,i.createBackground(),i.createEligibleFoundationGlow(),i.tag=n,i.moves=[],i.facingUp=!1,i.setEligibleFoundation(!1),i.setLightOn(!0),i.cardTint="none",t.add.existing((0,Ua.Z)(i)),i.addBehavior(),i}(0,o.Z)(t,e);var n=t.prototype;return n.createBackground=function(){var e=new Hl(this.scene,this);this.bg=e,this.scene.events.on(Phaser.Scenes.Events.POST_UPDATE,e.updateFromParent)},n.createEligibleFoundationGlow=function(){var e=new Kl(this.scene,this);this.eligibleFoundationGlow=e;var t=dl();e.setWorldSize(61*t,83*t),this.scene.events.on(Phaser.Scenes.Events.POST_UPDATE,e.updateFromParent),e.kill()},n.updateCardStyle=function(){this.setFacing(this.facingUp),this.input||(this.setInteractive({useHandCursor:!0,draggable:!0}),this.disableInteractive()),this.updateSize()},n.setPlacement=function(e){this.placement=e},n.shake=function(){this.isMoving()||(void 0==this.shakePosition&&(this.shakePosition=new Zl.Z(this)),this.shakePosition.setMagnitude(1.2),this.shakePosition.setDuration(500),this.shakePosition.shake())},n.setFacingWithFlippingAnim=function(e){var t,n=this;if(this.facingUp!==e){this.facingUp=e,null==(t=this.facingTween)||t.remove(),this.updateSize();var i=GameCore.Configs.Gameplay.SkipStartAnimation?0:150;this.facingTween=this.scene.tweens.add({targets:this,scaleX:0,yoyo:!0,duration:i,onYoyo:function(){return n.setFacing(e)}})}},n.isFacingUp=function(){return this.facingUp},n.getTag=function(){return this.tag},n.isAce=function(){return this.tag%100===cl.ACE},n.isKing=function(){return this.tag%100===cl.KING},n.moveTo=function(e,t,n){var i,a,r=this;if(void 0===n&&(n=0),null==(i=this.movingTween)||i.complete(),e!=this.x||t!=this.y){null==(a=this.shakePosition)||a.stop(),this.shakePosition=void 0;var s=GameCore.Configs.Gameplay.SkipAnimationMove?0:n;this.movingTween=this.scene.tweens.add({targets:this,x:e,y:t,duration:s,ease:Phaser.Math.Easing.Sine.Out,onComplete:function(){var e;null==(e=r.movingTween)||e.remove(),r.movingTween=void 0}})}},n.isMoving=function(){return this.movingTween&&(this.movingTween.isPlaying()||!this.movingTween.hasStarted)},n.reset=function(){var e,t;null==(e=this.movingTween)||e.complete(),null==(t=this.facingTween)||t.complete(),this.updateSize(),this.disableInteractive(),this.setFacing(!1),this.visibleHeight=pl.VERTICAL_PILE_SPACE,this.eligibleFoundationGlow.kill()},n.setCardFace=function(){var e=this.scene.theme.getCurrentThemeConfig().cardFaceKey;this.setTexture(e,""+this.tag)},n.setCardBack=function(){var e=this.scene.theme.getCurrentThemeConfig().cardBackFrame;this.setTexture(jl.KEY,e)},n.updateSize=function(){var e=pl.CARD_WIDTH,t=pl.CARD_HEIGHT;this.setWorldSize(e,t)},n.addBehavior=function(){this.shakePosition=new Zl.Z(this,{duration:500,magnitude:2})},n.getCardValue=function(){return this.getTag()%100},n.getCardSuit=function(){return Math.floor((this.getTag()-this.getCardValue())/300)},n.setLightOn=function(e){e?this.setCardTint("none"):this.isEligibleFoundation?this.setCardTint("lightGrey"):this.setCardTint("darkGrey"),this.lightOn=e,this.isEligibleFoundation&&this.eligibleFoundationGlow.updateGlowTintByLightOn()},n.setCardTint=function(e){if(this.cardTint!=e){var t=this.getTintByString(this.cardTint),n=this.getTintByString(e);this.playUpdateTintTween(t,n),this.cardTint=e}},n.getTintByString=function(e){switch(e){case"lightGrey":return new Phaser.Display.Color(160,160,160);case"darkGrey":return new Phaser.Display.Color(120,120,120);default:return new Phaser.Display.Color(255,255,255)}},n.playUpdateTintTween=function(e,t){var n,i=this;null==(n=this.tweenLight)||n.remove(),this.tweenLight=this.scene.tweens.addCounter({from:0,to:1,ease:Phaser.Math.Easing.Sine.InOut,duration:200,onUpdate:function(n){var a=n.getValue(),r=Phaser.Display.Color.Interpolate.ColorWithColor(e,t,100,100*a),s=Phaser.Display.Color.GetColor(r.r,r.g,r.b);i.setTint(s)}})},n.getLightOn=function(){return this.lightOn},n.setEligibleFoundation=function(e){e?(this.updateGlowByPlacement(),this.lightOn?this.setCardTint("none"):this.setCardTint("lightGrey")):(this.lightOn?this.setCardTint("none"):this.setCardTint("darkGrey"),this.eligibleFoundationGlow.removeGlow()),this.isEligibleFoundation=e},n.updateGlowByPlacement=function(){var e,t=this.placement;t.getname()===El.Pile?$t()(e=t.cards).call(e,this)===t.cards.length-1?this.eligibleFoundationGlow.resetGlowSizeToFull():this.eligibleFoundationGlow.cropGlow():this.eligibleFoundationGlow.resetGlowSizeToFull()},n.getEligibleFoundation=function(){return this.isEligibleFoundation},t}(Phaser.GameObjects.Image),ql=Xl,Jl=1/GameCore.Utils.Image.getImageScale(),Ql=vn.Z.GAMEPLAY_DEFAULT.KEY,$l=function(e){function t(t){var n;return(n=e.call(this,t,Ql)||this).emitZone=void 0,n.particleEmitters=void 0,n.particleEmitters=[],n.emitZone=new Phaser.Geom.Rectangle(-15,-20,30,40),n.createSuitEmitter("suit_spades"),n.createSuitEmitter("suit_clubs"),n.createSuitEmitter("suit_diamonds"),n.createSuitEmitter("suit_heart"),n.scene.add.existing((0,Ua.Z)(n)),n.setDepth(1e3),n}(0,o.Z)(t,e);var n=t.prototype;return n.createSuitEmitter=function(e){this.particleEmitters.push(this.createEmitter({on:!1,frame:e,emitZone:{source:this.emitZone,type:"random"},speed:40,frequency:100,alpha:{start:1,end:0,ease:Phaser.Math.Easing.Expo.Out},scale:.5*Jl,lifespan:1200,rotate:{start:0,end:40,random:!0}}))},n.explode=function(e,t,n,i){this.particleEmitters[e].explode(t,n,i)},t}(Phaser.GameObjects.Particles.ParticleEmitterManager),eu=$l;function tu(e,t){var n="undefined"!==typeof I()&&P()(e)||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){var n;if(!e)return;if("string"===typeof e)return nu(e,t);var i=S()(n=Object.prototype.toString.call(e)).call(n,8,-1);"Object"===i&&e.constructor&&(i=e.constructor.name);if("Map"===i||"Set"===i)return w()(e);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return nu(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var i=0;return function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function nu(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var iu=Phaser.Input.Events,au=iu.GAMEOBJECT_DOWN,ru=iu.DRAG,su=iu.POINTER_UP,ou=iu.GAME_OUT,cu=function(){function e(e){var t=this;this.boardGame=void 0,this.undos=void 0,this.picked=void 0,this.dragX=void 0,this.dragY=void 0,this.pickedPlacement=void 0,this.suitExplosive=void 0,this.undoClicked=void 0,this.isDragOutOfCanvas=!1,this.handlePointerDown=function(e,n){if(!t.isPicked()&&n instanceof ql){var i;if(n.placement.getname()===El.Foundation)return;if(!n.getLightOn())return;if(t.boardGame.isOnAutoMoveToFoundation())return;t.boardGame.boardState=xl.PLAYING;var a=n;if(a.isMoving())return;var r=$t()(i=a.placement.cards).call(i,a);t.boardGame.hint.isCardValidToMove(a)&&t.pickCard(a.placement,a.placement.cards.length-r)}},this.isDragged=void 0,this.dragPicked=function(e,n,i,a){!t.isDragged&&e.getDistanceX()+e.getDistanceY()<15||(t.isDragged=!0,t.dragX=i,t.dragY=a)},this.handlePointerUp=function(e){if(t.isPicked()){var n=t.picked[0],i=t.findFirstDestination(e,t.picked),a=!1;i?t.movePickedToNewPlacement(i):a=!0;var r=e.upTime-e.downTime<1e3;if(t.isDragOutOfCanvas&&void 0!==e.id&&(t.isDragOutOfCanvas=!1,r=!0),!t.isDragged&&r){if(t.donePick(),t.boardGame.scene.player.getPlayerSettings().tapToMove){if(n.isMoving())return;t.handleClickOnCard(n)}}else t.donePick(a),t.boardGame.updateEligibleFoundationCards(),t.boardGame.updateAllCardLightOn();t.boardGame.hint.resetAutoHintTime()}},this.handlePointerOutOfCanvas=function(e){t.boardGame.isPlaying()&&t.isPicked()&&(t.isDragOutOfCanvas=!0,t.handlePointerUp(e))},this.boardGame=e,this.undos=[],this.picked=[],this.undoClicked=0,this.suitExplosive=new eu(e.scene)}var t=e.prototype;return t.enableInput=function(){var e=this.boardGame.scene;e.input.on(au,this.handlePointerDown),e.input.on(ru,this.dragPicked),e.input.on(su,this.handlePointerUp),e.input.on(ou,this.handlePointerOutOfCanvas)},t.disableInput=function(){var e=this.boardGame.scene;e.input.off(au,this.handlePointerDown),e.input.off(ru,this.dragPicked),e.input.off(su,this.handlePointerUp),e.input.off(ou,this.handlePointerOutOfCanvas)},t.isPicked=function(){return this.picked.length>0},t.movePickedToNewPlacement=function(e){for(var t,n=this,i=tu(this.picked);!(t=i()).done;){var a=t.value;e.addCard(a,!0),e instanceof Cl&&e.updateCardPosition(e.cards.length)}if(this.pickedPlacement instanceof Cl&&this.pickedPlacement.updateCardPosition(),e instanceof Il){this.boardGame.increaseScore(10),this.boardGame.isPlaying()&&this.boardGame.scene.audio.playSound("finish"+e.cards.length,{delay:.1});var r=e.getPlacingPosition(0),s=r.x,o=r.y,c=e.cards[0].getTag(),l=(c-c%100)/100-1;this.boardGame.scene.time.delayedCall(400,(function(){n.suitExplosive.explode(l,12,s,o)}))}else this.boardGame.isPlaying()&&this.boardGame.scene.audio.playSound(Ja.Z.CARD_MOVE);this.undos.push({type:"move",numOfCards:this.picked.length,srcName:this.pickedPlacement.getname(),srcIdx:this.pickedPlacement.getIdx(),destName:e.getname(),destIdx:e.getIdx()}),this.picked=[],this.boardGame.increaseMovesAndSaveBoard(),this.boardGame.updateAfterMove()},t.unMovePickedToPlacement=function(e){for(var t,n=tu(this.picked);!(t=n()).done;){var i=t.value;e.addCard(i,!0),e instanceof Cl&&e.updateCardPosition(e.cards.length),i.setLightOn(!0)}this.pickedPlacement instanceof Il&&this.boardGame.decreaseScore(10),this.picked=[]},t.pickCard=function(e,t){this.pickedPlacement=e,this.picked=e.pickTopCards(t),this.isDragged=!1},t.donePick=function(e){if(this.isPicked()){for(var t,n=tu(this.picked);!(t=n()).done;){var i=t.value;this.pickedPlacement.addCard(i,this.isDragged)}e&&this.pickedPlacement instanceof Cl&&this.pickedPlacement.updateCardPosition(),this.picked=[],this.isDragged=!1}},t.findFirstDestination=function(e,t){if(1==t.length){var n=this.detectFoundation(e,t[0]),i=this.detectFreeCell(e,t[0]);if(n)return n;if(i)return i}return this.detectPile(e,t[0])},t.detectFoundation=function(e,t){var n,i,a=Re()(n=this.boardGame.foundations).call(n,(function(e){return Phaser.Geom.Intersects.RectangleToRectangle(t.getBounds(),e.slot.getBounds())})).length>0,r=Re()(i=this.boardGame.foundations).call(i,(function(e){return a&&e.canBePlace(t)}));if(2==r.length)return e.worldX-r[0].x<r[1].x-e.worldX?r[0]:r[1];if(1==r.length){if(r[0]==this.pickedPlacement)return;return r[0]}},t.detectFreeCell=function(e,t){var n,i=Re()(n=this.boardGame.freeCells).call(n,(function(e){return Phaser.Geom.Intersects.RectangleToRectangle(t.getBounds(),e.slot.getBounds())&&e.canBePlace(t)}));if(2==i.length)return e.worldX-i[0].x<i[1].x-e.worldX?i[0]:i[1];if(1==i.length){if(i[0]==this.pickedPlacement)return;return i[0]}},t.detectPile=function(e,t){var n,i,a=this,r=Re()(n=this.boardGame.piles).call(n,(function(e){var n,r=(null==(n=e.getLastCard())?void 0:n.getBounds())||e.slot.getBounds(),s=e!==a.pickedPlacement&&Phaser.Geom.Intersects.RectangleToRectangle(t.getBounds(),r),o=e.canBePlace(t,a.picked.length);return s&&!o&&0===e.cards.length&&(i=e),s&&o}));return 0===r.length&&void 0!==i&&this.notifyRule(),2==r.length?(e.worldX,r[0].x,r[1].x,e.worldX,r[1]):1==r.length?r[0]:void 0},t.notifyRule=function(){var e=this.boardGame.getNumberOfEmptyFreeCell(),t=this.boardGame.getNumberOfEmptyPile(),n=this.boardGame.getMaxCardCanMoveToEmptyPile();if(this.picked.length>n){this.boardGame.messageText.show("warningText",{numberOfEmptyFreeCell:""+e,numberOfEmptyPile:""+t,maxCardCanMoveToEmptyPile:""+n},3e3)}},t.getAvailableDestinations=function(){var e=this,t=this.boardGame,n=t.foundations,i=t.freeCells,a=[];1==this.picked.length&&a.push.apply(a,Re()(n).call(n,(function(t){return t!==e.pickedPlacement&&t.canBePlace(e.picked[0])})));var r=this.getPileDestinations();if(a.push.apply(a,r),1==this.picked.length){var s=Re()(i).call(i,(function(t){return t!==e.pickedPlacement&&t.canBePlace(e.picked[0])}));a.push.apply(a,s)}return a},t.getPileDestinations=function(){var e=this,t=this.boardGame.piles,n=Re()(t).call(t,(function(t){return t!==e.pickedPlacement&&t.canBePlace(e.picked[0],e.picked.length)}));return Di()(n).call(n,(function(e,t){return t.cards.length-e.cards.length}))},t.handleClickOnCard=function(e,t){var n;if(!this.isPicked()){var i=$t()(n=e.placement.cards).call(n,e);this.pickCard(e.placement,e.placement.cards.length-i);var a=t?[t]:this.getAvailableDestinations();if(0===a.length){this.boardGame.scene.audio.playSound(Ja.Z.NO_MOVE);for(var r,s=tu(this.picked);!(r=s()).done;){r.value.shake()}return this.donePick(),this.boardGame.updateEligibleFoundationCards(),void this.boardGame.updateAllCardLightOn()}var o=this.selectDestination(e,a);this.movePickedToNewPlacement(o),this.donePick()}},t.selectDestination=function(e,t){if(!(e.placement instanceof Cl)||e.placement.cards.length>0)return t[0];for(var n=0;n<t.length;n++){var i=t[n];if(!(i instanceof Cl&&0==i.cards.length))return i}return t[0]},t.moveCardToFoundation=function(e,t){var n=this;e.setLightOn(!0);var i=e.placement.getname(),a=e.placement.getIdx();e.placement.pickTopCards(1),e.placement instanceof Cl&&e.placement.updateCardPosition(),t.addCard(e,!0),this.boardGame.increaseScore(10),(this.boardGame.isPlaying()||this.boardGame.isOnAutoMoveToFoundation())&&(this.boardGame.isOnLastAutoMoveToFoundation||this.boardGame.scene.audio.playSound("finish"+t.cards.length,{delay:.1}));var r=t.getPlacingPosition(0),s=r.x,o=r.y,c=t.cards[0].getTag(),l=(c-c%100)/100-1;this.boardGame.scene.time.delayedCall(400,(function(){n.suitExplosive.explode(l,12,s,o)}));var u={type:"auto",numOfCards:1,srcName:i,srcIdx:a,destName:t.getname(),destIdx:t.getIdx()};this.undos.push(u),this.boardGame.increaseMovesAndSaveBoard()},t.moveCardToPlacement=function(e,t){e.setLightOn(!0);var n=e.placement.getname(),i=e.placement.getIdx();e.placement.pickTopCards(1),e.placement instanceof Cl&&e.placement.updateCardPosition(),t.addCard(e,!0),(this.boardGame.isPlaying()||this.boardGame.isOnAutoMoveToFoundation())&&(this.boardGame.isOnLastAutoMoveToFoundation||this.boardGame.scene.audio.playSound(Ja.Z.CARD_MOVE));var a={type:"auto",numOfCards:1,srcName:n,srcIdx:i,destName:t.getname(),destIdx:t.getIdx()};this.undos.push(a),this.boardGame.increaseMovesAndSaveBoard()},t.undo=function(){if(this.boardGame.boardState!==xl.GAME_OVER){var e=this.undos.pop();if(e){this.boardGame.scene.audio.playSound(Ja.Z.UNDO),this.boardGame.boardState=xl.PLAYING,this.undoClicked+=1;var t=e.numOfCards,n=e.srcName,i=e.srcIdx,a=e.destName,r=e.destIdx,s=this.getPlacement(n,i),o=this.getPlacement(a,r);"move"===e.type?(this.pickCard(o,t),this.unMovePickedToPlacement(s),this.donePick(),this.boardGame.hint.outOfMove=!1,this.boardGame.increaseMovesAndSaveBoard(),this.boardGame.updateEligibleFoundationCards(),this.boardGame.updateAllCardLightOn(),this.boardGame.decreaseScore(5)):"auto"===e.type&&(this.pickCard(o,t),this.unMovePickedToPlacement(s),this.donePick(),this.boardGame.hint.outOfMove=!1,this.undo()),o instanceof Cl&&o.updateCardPosition(),this.boardGame.checkAutoCompleted()}}},t.clear=function(){this.undos=[],this.undoClicked=0},t.update=function(){if(this.isDragged)for(var e=0;e<this.picked.length;e++){var t=this.picked[e];t.setPosition(this.dragX,this.dragY+e*this.boardGame.getVerticalSpacePile()),t.scene.gameplay.cardsLayer.bringToTop(t),t.scene.gameplay.cardsLayer.bringToTop(t.eligibleFoundationGlow)}},t.getPlacement=function(e,t){if(e===El.Stock)return this.boardGame.stock;if(e===El.Pile)return this.boardGame.piles[t];if(e===El.Foundation)return this.boardGame.foundations[t];if(e===El.FreeCell)return this.boardGame.freeCells[t];throw new Error("Placement not found!!!")},t.getPicked=function(){return this.picked},t.getPickedPlacement=function(){return this.pickedPlacement},e}(),lu=cu,uu=function(e){function t(t){var n;return(n=e.call(this,t)||this).setName(El.Stock),n.slot.setVisible(!1),n}(0,o.Z)(t,e);var n=t.prototype;return n.setPosition=function(t,n){e.prototype.setPosition.call(this,t,n)},n.addCard=function(t,n){e.prototype.addCard.call(this,t,n),t.setFacingWithFlippingAnim(!1),t.disableInteractive()},n.canBePlace=function(e){return!1},n.clear=function(){this.cards=[]},n.update=function(t){e.prototype.update.call(this,t)},t}(bl),hu=n(600),du=n.n(hu),fu=n(672),pu=[201,202,203,204,205,206,207,208,209,210,211,212,213,301,302,303,304,305,306,307,308,309,310,311,312,313,401,402,403,404,405,406,407,408,409,410,411,412,413,101,102,103,104,105,106,107,108,109,110,111,112,113],gu=function(){function e(){this.strSeed=void 0,this.intSeed=void 0}var t=e.prototype;return t.generateSeed=function(){var e=function(e,t){var n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789*#%&!",i="",a=e;void 0!=t&&(a-=t.length,i+=t);for(var r=0;r<a;r++){var s=Math.floor(67*Math.random());i+=n.charAt(s)}return i}(10);return e},t.shuffle=function(e){var t=String((0,fu.Z)(e));if(this.isStandardSeed(t))return this.mapSuitFromStandardDealToGame(Number(t));for(var n=this.getOriginalSeed(t),i=[],a=0;a<n.length;){var r=S()(n).call(n,a,a+3),s=du()(r),o=$t()(pu).call(pu,s);-1==o&&console.log({index:a,numberString:r,number:s}),i.push(o),a+=3}return i},t.isStandardSeed=function(e){return e.length<=10},t.isStandardSeedValid=function(e){if(!this.isStandardSeed(e))return!1;var t,n=Number(e);if(!(n&&n>=1))return console.error("Invalid seed, must >=1 : ",e),!1;if(52!=(t=this.mapSuitFromStandardDealToGame(n)).length)return console.error("Invalid seed, length != 52"),!1;for(var i=Di()(t).call(t,(function(e,t){return e-t})),a=0;a<52;a++)if(a!=i[a])return console.error("Invalid seed"),!1;return!0},t.mapSuitFromStandardDealToGame=function(e){for(var t,n=this.shuffleByStandardNumberedDeal(e),i=Ft()(t=new Array(52)).call(t,0),a=0;a<i.length;a++){var r=n[a]%4,s=Math.floor(n[a]/4);switch(r){case 0:i[a]=0+s;break;case 1:i[a]=13+s;break;case 2:i[a]=26+s;break;case 3:i[a]=39+s;break;default:return console.error("Invalid suit"),[]}}return i},t.shuffleByStandardNumberedDeal=function(e){for(var t,n,i=De()(t=Ft()(n=new Array(52)).call(n,0)).call(t,(function(e,t){return t})),a=e,r=0;r<i.length;++r){var s=i.length-r;a=(214013*a+2531011)%Math.pow(2,32);var o=Math.floor(a/Math.pow(2,16))%Math.pow(2,15),c=void 0;c=e<Math.pow(2,31)?o%s:(o+Math.pow(2,15))%s;var l=[i[s-1],i[c]];i[c]=l[0],i[s-1]=l[1]}return i},t.shuffles=function(e,t){if(this.setSeed(t)){for(var n=S()(e).call(e,0),i=n.length,a=this.genMap(i),r=i-1;r>0;r--)n[r]=il()(n).call(n,a[i-1-r],1,n[r])[0];return n}return e},t.genMap=function(e){for(var t=new Array(e),n=0;n<e;n++)t[n]=(this.intSeed=(9301*this.intSeed+49297)%233280)/233280*e|0;return t=this.modifyIfNoZero(t)},t.modifyIfNoZero=function(e){for(var t=!1,n=0;n<e.length;n++)0===e[n]&&(t=!0);return!1===t&&(e[e[e.length-1]]=0),e},t.setSeed=function(e){var t,n=De()(t=String(this.strSeed=e).split("")).call(t,(function(e){return e.charCodeAt(0)})).join("");return this.intSeed=Number(n),!0},t.getOriginalSeed=function(e){for(var t="",n="abcdefghijklm",i="nopqrstuvwxyz",a="ABCDEFGHIJKLM",r="NOPQRSTUVWXYZ",s=0;s<e.length;s++){var o=e[s],c=$t()(n).call(n,o);-1==c?-1==(c=$t()(i).call(i,o))?-1==(c=$t()(a).call(a,o))?-1==(c=$t()(r).call(r,o))||(t+=(400+c+1).toString()):t+=(300+c+1).toString():t+=(200+c+1).toString():t+=(100+c+1).toString()}return t},e}(),mu=gu,vu=n(674),yu=function(){function e(e){this.boardGame=void 0,this.cards=void 0,this.boardGame=e,this.cards=[]}var t=e.prototype;return t.init=function(){var e=this,t=this.boardGame.scene;this.cards.push(new ql(t,sl.ACE),new ql(t,sl.TWO),new ql(t,sl.THREE),new ql(t,sl.FOUR),new ql(t,sl.FIVE),new ql(t,sl.SIX),new ql(t,sl.SEVEN),new ql(t,sl.EIGHT),new ql(t,sl.NINE),new ql(t,sl.TEN),new ql(t,sl.JACK),new ql(t,sl.QUEEN),new ql(t,sl.KING)),this.cards.push(new ql(t,rl.ACE),new ql(t,rl.TWO),new ql(t,rl.THREE),new ql(t,rl.FOUR),new ql(t,rl.FIVE),new ql(t,rl.SIX),new ql(t,rl.SEVEN),new ql(t,rl.EIGHT),new ql(t,rl.NINE),new ql(t,rl.TEN),new ql(t,rl.JACK),new ql(t,rl.QUEEN),new ql(t,rl.KING)),this.cards.push(new ql(t,al.ACE),new ql(t,al.TWO),new ql(t,al.THREE),new ql(t,al.FOUR),new ql(t,al.FIVE),new ql(t,al.SIX),new ql(t,al.SEVEN),new ql(t,al.EIGHT),new ql(t,al.NINE),new ql(t,al.TEN),new ql(t,al.JACK),new ql(t,al.QUEEN),new ql(t,al.KING)),this.cards.push(new ql(t,ol.ACE),new ql(t,ol.TWO),new ql(t,ol.THREE),new ql(t,ol.FOUR),new ql(t,ol.FIVE),new ql(t,ol.SIX),new ql(t,ol.SEVEN),new ql(t,ol.EIGHT),new ql(t,ol.NINE),new ql(t,ol.TEN),new ql(t,ol.JACK),new ql(t,ol.QUEEN),new ql(t,ol.KING));var n=this.boardGame.stock.getPlacingPosition(0),i=n.x,a=n.y;this.cards.forEach((function(t){t.updateCardStyle(),t.setFacing(!1),t.kill(),t.setPosition(i,a),t.setDepth(pl.DEPTH.CARD),e.boardGame.gameplay.cardsLayer.add(t.bg),e.boardGame.gameplay.cardsLayer.add(t),e.boardGame.gameplay.cardsLayer.add(t.eligibleFoundationGlow)}))},t.reset=function(){var e=this.boardGame.stock.getPlacingPosition(0),t=e.x,n=e.y;this.cards.forEach((function(e){e.reset(),e.revive();var i=GameCore.Configs.Gameplay.SkipStartAnimation?0:200;e.moveTo(t,n,i)}))},t.align=function(){var e=this.boardGame.stock.getPlacingPosition(0),t=e.x,n=e.y;this.cards.forEach((function(e){e.reset(),e.setPosition(t,n,200)}))},t.getDeck=function(e){var t=this;return De()(e).call(e,(function(e){return t.cards[e]}))},t.getCards=function(e){var t=this;return De()(e).call(e,(function(e){return t.cards[e]}))},e}(),bu=yu,Au=function(e){function t(t){var n;return(n=e.call(this,t)||this).setName(El.FreeCell),n}(0,o.Z)(t,e);var n=t.prototype;return n.setPosition=function(t,n){e.prototype.setPosition.call(this,t,n)},n.canBePlace=function(e){return!this.isFull()},n.isFull=function(){return 1===this.cards.length},t}(bl),Eu=n(673),Su={},Tu=function(e){var t=window.game.world.getPixelRatio(),n=e.scene,i=e.key,a=e.newKey,r=e.radius,s=e.alpha,o=e.width*t,c=e.height*t,l=(e.border||0)*t,u=n.textures.get(i).getSourceImage();if(!u)return!1;if(n.textures.exists(a))return!0;var h=n.textures.createCanvas(a||i,o,c),d=h.context,f=l,p=Su[i];if(!p){(p=document.createElement("canvas")).width=u.width,p.height=u.height;var g=p.getContext("2d");g.drawImage(u,0,0),Eu.r_(p,0,0,p.width,p.height,r),g.globalAlpha=s,g.fillStyle="#ffffff",null==g||g.fillRect(0,0,u.width,u.height),g.globalAlpha=1,Su[i]=p}return d.beginPath(),d.moveTo(f,0),d.lineTo(o-f,0),d.quadraticCurveTo(o,0,o,0+f),d.lineTo(o,0+c-f),d.quadraticCurveTo(o,0+c,o-f,0+c),d.lineTo(f,0+c),d.quadraticCurveTo(0,0+c,0,0+c-f),d.lineTo(0,0+f),d.quadraticCurveTo(0,0,f,0),d.closePath(),d.clip(),h.draw(-u.width/2+o/2+f/2,-u.height/2+c/2+f/2,p),!0},wu=function(e){function t(t,n){var i,a=n.key,r=n.width,s=n.height,o=n.border,c=n.radius,l=n.y,u=void 0===l?0:l,h=n.alpha,d=void 0===h?.15:h,f=t.theme.getCurrentThemeConfig().backgroundKey,p=f+a;return Tu({scene:t,key:f,newKey:p,radius:c,border:o,width:r,height:s,alpha:d,y:u}),(i=e.call(this,t,0,0,p)||this).setTexture(p),i.scene.events.on($s.BACKGROUND_CHANGED,(function(e){var n=e+a;Tu({scene:t,key:e,newKey:n,radius:c,border:o,width:r,height:s,alpha:d,y:u}),i.setTexture(n),i.setWorldSize(r,s)})),i.setWorldSize(r,s),i}return(0,o.Z)(t,e),t}(Phaser.GameObjects.Image),Cu=wu,Iu=n(666),xu=n(21),Pu=function(e){function t(t){var n;return(n=e.call(this,t)||this).messageText=void 0,n.openAnimation=void 0,n.closeAnimation=void 0,n.closeTimerEvent=void 0,n.background=void 0,n.createBackground(),n.createMessageText(),n.setDepth(fn.Z.MESSAGE),n.setVisible(!1),t.add.existing((0,Ua.Z)(n)),n}(0,o.Z)(t,e);var n=t.prototype;return n.createBackground=function(){var e=new xu.Z(this.scene,0,0,200,100,8,2039583,.6);e.setDepth(fn.Z.MESSAGE),this.scene.add.existing(e),this.background=e,this.add(e)},n.createMessageText=function(){this.messageText=this.scene.add.bitmapText(0,0,No.Z.PRIMARY.KEY,"warningText",this.scene.fontSize(15)).setOrigin(.5,.5).setDepth(fn.Z.MESSAGE),this.scene.world.isLandscape()?this.messageText.setMaxSize(410,42):this.messageText.setMaxSize(360,40),this.messageText.setCenterAlign(),this.add(this.messageText)},n.show=function(e,t,n){var i,a,r,s,o,c=this;this.messageText.setTranslationParameters(t),this.messageText.setText(e),this.background.width=this.messageText.width+10,this.background.height=this.messageText.height+10,this.background.x=this.messageText.x,this.background.y=this.messageText.y,this.setVisible(!0),null==(i=this.openAnimation)||i.stop(),null==(a=this.openAnimation)||a.remove(),null==(r=this.closeAnimation)||r.stop(),null==(s=this.closeAnimation)||s.remove(),this.openAnimation=new Iu.Z({targets:[this],props:{scale:{getStart:function(e){return e.scale-.3},getEnd:function(e){return e.scale}}}}),this.openAnimation.play(),null==(o=this.closeTimerEvent)||o.remove(),n>0&&(this.closeTimerEvent=this.scene.time.addEvent({delay:n,callback:function(){var e,t;c.messageText.visible&&(null==(e=c.closeAnimation)||e.stop(),null==(t=c.closeAnimation)||t.remove(),c.closeAnimation=new Iu.Z({targets:[c],props:{scale:{getStart:function(e){return e.scale},getEnd:function(e){return 0}},alpha:0},onComplete:function(){c.setVisible(!1),c.setScale(1),c.setAlpha(1)}}),c.closeAnimation.play())}}))},t}(Phaser.GameObjects.Container),ku=Pu,_u=function(){function e(e,t,n){var i=this;this.piles=void 0,this.freeCells=void 0,this.foundations=void 0,this.piles=[],this.foundations=[],this.freeCells=[];for(var a=0;a<8;a++)this.piles.push([]);for(var r=0;r<4;r++)this.foundations.push([]),this.freeCells.push([]);n.forEach((function(e,t){return i.foundations[t]=e.getAllCards()})),e.forEach((function(e,t){return i.piles[t]=e.getAllCards()})),t.forEach((function(e,t){return i.freeCells[t]=e.getAllCards()}))}var t=e.prototype;return t.isCanSmartAutoComplete=function(e){return void 0===e&&(e=3),!(this.countUnsortedCard()>e)&&(!!this.moveAllValidCardToFoundation()||this.compareUnsortedCardAndEmptyPlacement())},t.compareUnsortedCardAndEmptyPlacement=function(){var e=this.countEmptyFreecellAndPile();return this.countUnsortedCard()<=e},t.countEmptyFreecellAndPile=function(){var e,t,n=Re()(e=this.freeCells).call(e,(function(e){return 0==e.length})),i=Re()(t=this.piles).call(t,(function(e){return 0==e.length}));return n.length+i.length},t.countUnsortedCard=function(){var e=this,t=0;return this.piles.forEach((function(n){var i=e.countUnsortedCardInPile(n);t+=i})),t},t.countUnsortedCardInPile=function(e){if(e.length<=1)return 0;for(var t=0;t<e.length-1;t++){if(e[t]%100<e[t+1]%100)return e.length-t-1}return 0},t.moveAllValidCardToFoundation=function(){if(this.isGameWon())return!0;var e=this.findMoveToFoundationMove();if(e){var t=this.getAvailableDestinations(e);return!!t&&(this.moveCardToFoundation(e,t),this.moveAllValidCardToFoundation())}return!1},t.getAvailableDestinations=function(e){var t=this.foundations,n=Re()(t).call(t,(function(t,n){return(e-e%100)/100==ul[n]}));return n.length>0?n[0]:void 0},t.isGameWon=function(){var e;return!D()(e=this.foundations).call(e,(function(e){return!(13===e.length)}))},t.moveCardToFoundation=function(e,t){this.pickTopCard(e),t.push(e)},t.pickTopCard=function(e){this.freeCells.forEach((function(t){we()(t).call(t,e)&&il()(t).call(t,t.length-1,1)})),this.piles.forEach((function(t){we()(t).call(t,e)&&il()(t).call(t,t.length-1,1)}))},t.findMoveToFoundationMove=function(){var e,t,n,i,a=Re()(e=this.freeCells).call(e,(function(e){return 1===e.length})),r=De()(a).call(a,(function(e){return e[0]})),s=De()(t=this.piles).call(t,(function(e){return e[e.length-1]})),o=_()(n=[]).call(n,r,s),c=[],l=D()(o).call(o,(function(e){return e&&e%100==1}));l&&c.push(l);for(var u=De()(i=this.foundations).call(i,(function(e){return e[e.length-1]})),h=De()(u).call(u,(function(e,t){return e?e+1:100*ul[t]+1})),d=0;d<o.length;d++){var f=o[d];if(f)$t()(h).call(h,f)>=0&&c.push(f)}return c.length>0?c[0]:void 0},e}(),Ou=_u,Ru=vn.Z.GAMEPLAY_DEFAULT,Lu=Ru.KEY,Du=Ru.FRAME,Bu=267,Nu=48,Mu=[.2,.4,.6,.8],Gu=function(e){function t(t){var n;(n=e.call(this)||this).scene=void 0,n.gameplay=void 0,n.shuffler=void 0,n.deck=void 0,n.stock=void 0,n.piles=void 0,n.foundations=void 0,n.freeCells=void 0,n.hint=void 0,n.mover=void 0,n.boardState=void 0,n.messageText=void 0,n.score=void 0,n.time=void 0,n.timeToSaveBoardData=void 0,n.moves=void 0,n.updateScoreTimer=void 0,n.tournamentResultButton=void 0,n.autoCompleteBtn=void 0,n.canAutoComplete=void 0,n.isOnLastAutoMoveToFoundation=void 0,n.boundNumberOfCards=void 0,n.levelProgress=void 0,n.autoPlayBtn=void 0,n.autoPlayStepBtn=void 0,n.playWithFriendGameOverButton=void 0,n.challengeModeButton=void 0,n.challengeResultButton=void 0,n.notificationButton=void 0,n.playSeedButton=void 0,n.seedText=void 0,n.gameplay=t,n.scene=t.scene,n.shuffler=new mu,n.deck=new bu((0,Ua.Z)(n)),n.stock=new uu((0,Ua.Z)(n)),n.piles=[],n.foundations=[],n.freeCells=[],n.levelProgress=0,n.messageText=new ku(n.scene),n.score=0,n.time=0,n.moves=0,n.timeToSaveBoardData=0,n.boundNumberOfCards=n.getBoundNumberOfCards(),n.mover=new lu((0,Ua.Z)(n)),n.hint=new Fl((0,Ua.Z)(n));for(var i=0;i<pl.NUMBER_OF_PILE;i++){var a=new Cl((0,Ua.Z)(n));a.setIdx(i),n.piles.push(a)}for(var r=0;r<pl.NUMBER_OF_TARGET;r++){var s=new Il((0,Ua.Z)(n),ul[r]);s.setIdx(r),n.foundations.push(s)}for(var o=0;o<pl.NUMBER_OF_FREECELL;o++){var c=new Au((0,Ua.Z)(n));c.setIdx(o),n.freeCells.push(c)}return n.alignBoard(),n.canAutoComplete=!1,n.isOnLastAutoMoveToFoundation=!1,n.boardState=xl.NONE,n.listenEvents(),n.createAutoWinButton(),GameCore.Utils.Valid.isDebugger()&&n.createDevBtn(),n.scene.screen.events.on(GameCore.Screens.Events.OPEN,(function(){n.boardState===xl.PLAYING&&(n.boardState=xl.IDLE)})),n.deck.init(),n}(0,o.Z)(t,e);var n=t.prototype;return n.getLevelProgress=function(){return this.levelProgress},n.resetLevelProgress=function(){this.levelProgress=0},n.updateLevelProgress=function(e){var t=this;void 0===e&&(e=!0);var n=this.getNumberOfCardsInFoundation(),i=n/52;i>this.levelProgress&&(this.levelProgress=i,e&&Mu.forEach((function(e){Math.ceil(52*e)===n&&t.logProgressLevel(e)})))},n.getNumberOfCardsInFoundation=function(){var e=0;return this.foundations.forEach((function(t){return e+=t.cards.length})),e},n.logProgressLevel=function(e){var t=this.getScore(),n=this.getTime(),i=this.getMoves(),a=this.gameplay.getSeed(),r=Math.floor(n/1e3),s=this.scene.gameStats.getNormalStat(),o=s.totalGame,c=s.wins,l=this.scene.levelLoader.getLevelByWins(c),u=this.scene.player.getPlayerSettings(),h={value:e,total_game:o,difficulty:l,level:c,score:t,moves:i,time_played:r,seed:a,auto_move_foundation_option:u.autoMoveToFoundation,highlight_low_cards_option:u.highlightLowCards};this.scene.analytics.event(mn._.LEVEL_PROGRESS,h)},n.createAutoWinButton=function(){var e=this,t=Bu,n=Nu,i=new vu.Z(this.scene,t,n);i.setName("AutoComplete");var a=new Cu(this.scene,{key:"auto-complete-button",radius:10,border:16,width:t,height:n,alpha:.24}),r="border-auto-complete-button";if(!this.scene.textures.exists(r)){var s=this.scene.make.renderTexture({width:2*(t+1),height:2*(n+1)},!1),o=new xu.Z(this.scene,0,0,2*t,2*n,32).setOrigin(0,0);o.setStrokeStyle(2,16777215),s.draw(o,1,1),s.saveTexture(r)}var c=this.scene.add.image(0,0,r);c.setDisplaySize(t,n);var l=this.scene.time.addEvent({delay:50,repeat:-1,callback:function(){e.boardState===xl.AUTO_COMPLETING?(e.hint.autoPlayStep(),e.scene.vibration.performVibrating(40)):l.paused=!0},paused:!0});i.onClick=function(){i.kill(),e.mover.disableInput(),e.boardState=xl.AUTO_COMPLETING,e.gameplay.scene.footer.hintBtn.setDisabled(!0),e.gameplay.scene.footer.playBtn.setDisabled(!0),e.scene.audio.playSound(Ja.Z.AUTO_COMPLETE),e.removeAllCardsGlow(),e.scene.time.delayedCall(100,(function(){e.autoComplete()}))};var u=this.scene.make.bitmapText({font:No.Z.PRIMARY.KEY,size:this.scene.fontSize(16),text:"autoComplete",origin:{x:.5,y:.5}});i.add([a,c,u]),Phaser.Display.Align.To.TopCenter(i,this.scene.footer,0,24),new gc.Z({targets:[i],duration:500,props:{scale:"*=0.98"}}).play(),i.kill(),this.autoCompleteBtn=i},n.increaseScore=function(e){var t=this;this.score+=e,this.updateScoreTimer&&!this.updateScoreTimer.hasDispatched||(this.updateScoreTimer=this.scene.time.delayedCall(500,(function(){t.scene.storage.dispatch(Js({score:t.score,time:t.time,moves:t.moves}))})))},n.decreaseScore=function(e){this.score=Math.max(0,this.score-e)},n.increaseMovesAndSaveBoard=function(){this.hint.resetAutoHintTime(),this.moves+=1,this.gameplay.saveSystem.saveCurrentBoardData(),this.timeToSaveBoardData=0},n.getScore=function(){return this.score},n.getTime=function(){return Math.round(this.time)},n.getMoves=function(){return this.moves},n.listenEvents=function(){var e=this;this.scene.events.on("settings-changed",(function(t){if(t===Ta.Z.autoMoveToFoundation){if(!(e.isPlaying()||e.isOnAutoMoveToFoundation()||e.isIdle()))return;e.scene.player.getPlayerSettings().autoMoveToFoundation?e.canAutoComplete&&(e.canAutoComplete=!1,e.autoCompleteBtn.kill()):(e.isOnAutoMoveToFoundation()&&(e.boardState=xl.IDLE),e.checkAutoCompleted())}t===Ta.Z.highlightLowCards&&(e.scene.player.getPlayerSettings().highlightLowCards?e.updateEligibleFoundationCards(!1):e.removeAllCardsGlow())}))},n.alignBoard=function(){var e=dl(),t=this.scene.world.getWorldSize(),n=(t.width,t.height),i=this.scene.ads.getBannerHeight(),a=this.scene.world.getWorldSize().width/2,r=pl.FOUNDATION_Y+30*e,s=this.getHorizontalPileSpace(),o=this.scene.world.isLandscape()?2:2.04,c=this.scene.world.isLandscape()?.985*s:s;this.placeCenter(this.foundations,a,r,-s,-o,-c),this.placeCenter(this.freeCells,a,r,s,-o,c);var l=n-i-120;this.placeCenter([this.stock],a,Math.min(r+400,l),s,3);var u=pl.SPACE_BETWEEN_PILE_AND_FOUNDATION,h=this.scene.world.isLandscape()?s:1.01*s;this.placeCenter(this.piles,a,r+u,h),this.deck.align();var d=this.scene.footer.y;this.messageText.setPosition(a,d-70),this.boundNumberOfCards=this.getBoundNumberOfCards(),console.log({boundNumberOfCards:this.boundNumberOfCards})},n.getMaxHeightTableau=function(){var e=this.scene.footer,t=e.y,n=e.height,i=pl.FOUNDATION_Y,a=pl.CARD_HEIGHT;return t-i-(n/2+pl.SPACE_BETWEEN_PILE_AND_FOUNDATION+a/2+30)},n.getBoundNumberOfCards=function(){var e=this.getMaxHeightTableau(),t=pl.CARD_HEIGHT,n=pl.VERTICAL_PILE_SPACE;return Math.floor((e-t/2)/n)+1},n.getHorizontalPileSpace=function(){var e=this.scene.world.isLandscape()?1.2:1,t=(this.scene.gameZone.width-pl.CARD_WIDTH*pl.NUMBER_OF_PILE)/(pl.NUMBER_OF_PILE+1),n=Math.floor(t)+pl.CARD_WIDTH;return Math.min(n,pl.MAX_HORIZONTAL_PILE_SPACE*e)},n.placeCenter=function(e,t,n,i,a,r){void 0===a&&(a=0),void 0===r&&(r=0),r=r||i;for(var s=e.length,o=t-(s/2-.5-a)*i,c=0;c<s;c++)e[c].setPosition(o+c*r,n)},n.startGame=function(){var e=(0,s.Z)(h().mark((function e(t){var n,i,a,r,s,o,c,l,u,d,f,p;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isDealing()){e.next=2;break}return e.abrupt("return");case 2:return this.scene.gameplay.tryCreateShortcut(),this.scene.gameplay.startGameCount+=1,this.updateSeedDebugText(this.gameplay.getCurrentLevel(),t),this.clearOldBoard(),this.resetLevelProgress(),this.scene.events.emit($s.GAME_START),n=this.scene.gameStats.getNormalStat(),i=n.totalGame,a=n.wins,r=this.scene.levelLoader.getLevelByWins(a),this.scene.analytics.event(mn._.LEVEL_START,{total_game:i,difficulty:r,level:a,seed:t}),this.boardState=xl.DEALING,s=this.shuffler.shuffle(t),(o=this.deck.getDeck(s)).forEach((function(e){return e.revive()})),c=GameCore.Configs.Gameplay.SkipStartAnimation,l=c?50:300,e.next=19,Tl(this.scene,l);case 19:this.scene.audio.playSound(Ja.Z.SHUFFLE),u=7,d=0;case 22:if(!(d<u)){e.next=38;break}f=0;case 24:if(!(f<pl.NUMBER_OF_PILE)){e.next=35;break}if(!(p=o.pop())){e.next=32;break}if(this.piles[f].addCardByDeal(p,!0,u),f%2==0&&this.scene.vibration.performVibrating(40),c){e.next=32;break}return e.next=32,Tl(this.scene,pl.CARD_DEAL_TIME);case 32:f++,e.next=24;break;case 35:d++,e.next=22;break;case 38:if(c){e.next=41;break}return e.next=41,Tl(this.scene,400);case 41:if(this.boardState=xl.IDLE,this.updateAfterMove(),this.gameplay.scene.footer.hintBtn.setDisabled(!1),this.gameplay.saveSystem.saveCurrentBoardData(),c){e.next=48;break}return e.next=48,Tl(this.scene,pl.CARD_MOVE_TIME);case 48:this.mover.enableInput();case 49:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.continueGame=function(){var e=(0,s.Z)(h().mark((function e(t){var n,i,a,s,o,c,l,u,d,f,p,g,m,v,y,b,A,E,S,T,w,C=this;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.scene.analytics.event(mn._.LEVEL_CONTINUE),!this.isDealing()){e.next=3;break}return e.abrupt("return");case 3:if(this.scene.gameplay.tryCreateShortcut(),this.scene.gameplay.startGameCount+=1,this.updateSeedDebugText(t.level,t.seed),this.clearOldBoard(),this.resetLevelProgress(),this.boardState=xl.DEALING,i=t.piles,a=t.freeCells,s=t.foundations,o=t.score,c=t.time,l=t.moves,u=t.movesData,d=GameCore.Configs.Gameplay.SkipStartAnimation){e.next=14;break}return e.next=14,Tl(this.scene,300);case 14:this.score=o,this.time=c,this.moves=l,f=De()(i).call(i,(function(e){return C.deck.getCards(e)})),p=De()(s).call(s,(function(e){return C.deck.getCards(e)})),g=De()(a).call(a,(function(e){return C.deck.getCards(e)})),this.scene.audio.playSound(Ja.Z.SHUFFLE),m=0;case 22:if(!(m<g.length)){e.next=38;break}v=g[m],y=0;case 25:if(!(y<v.length)){e.next=35;break}if(this.freeCells[m].addCard(v[y],!0,d),v[y].setFacingWithFlippingAnim(!0),v[y].setInteractive(),d){e.next=32;break}return e.next=32,Tl(this.scene,pl.CARD_DEAL_TIME);case 32:y++,e.next=25;break;case 35:m++,e.next=22;break;case 38:b=0;case 39:if(!(b<p.length)){e.next=48;break}for(A=p[b],E=0;E<A.length;E++)this.foundations[b].addCard(A[E],!0,d),A[E].setFacingWithFlippingAnim(!0),A[E].setInteractive();if(d){e.next=45;break}return e.next=45,Tl(this.scene,pl.CARD_DEAL_TIME);case 45:b++,e.next=39;break;case 48:S=0;case 49:if(!(S<f.length)){e.next=63;break}T=f[S],w=0;case 52:if(!(w<T.length)){e.next=60;break}if(this.piles[S].addCardByDeal(T[w],!0,T.length),d){e.next=57;break}return e.next=57,Tl(this.scene,pl.CARD_DEAL_TIME);case 57:w++,e.next=52;break;case 60:S++,e.next=49;break;case 63:if(this.updateLevelProgress(!1),d){e.next=67;break}return e.next=67,Tl(this.scene,400);case 67:if(this.mover.undos=_()(n=[]).call(n,De()(u).call(u,(function(e){return(0,r.Z)({},e)}))),this.boardState=xl.IDLE,this.gameplay.scene.footer.hintBtn.setDisabled(!1),this.updateAfterMove(),d){e.next=74;break}return e.next=74,Tl(this.scene,pl.CARD_MOVE_TIME);case 74:this.mover.enableInput();case 75:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.checkAutoCompleted=function(){this.scene.player.getPlayerSettings().autoMoveToFoundation||this.isAutoCompleting()||(this.canAutoComplete=!1,this.autoCompleteBtn.kill(),this.isCanSmartAutoComplete()?(this.canAutoComplete=!0,this.autoCompleteBtn.revive()):(this.canAutoComplete=!1,this.autoCompleteBtn.kill()))},n.isCanSmartAutoComplete=function(e){return new Ou(this.piles,this.freeCells,this.foundations).isCanSmartAutoComplete(e)},n.isTableauSorted=function(){for(var e=0;e<this.piles.length;e++)if(!this.piles[e].isSorted())return!1;return!0},n.autoMoveCardToFoundation=function(){var e=this;if(!this.scene.player.getPlayerSettings().autoMoveToFoundation)return!1;var t=this.hint.findMovable();if(0===t.length)return!1;for(var n=!1,i=this.isCanSmartAutoComplete(),a=0;a<t.length;a++){var r=t[a],s=this.hint.getAvailableDestinations(r)[0];if(s instanceof Il){if(!this.isCardValidToAutoMoveToFoundation(r)&&!i)continue;n=!0,this.mover.moveCardToFoundation(r,s);break}}if(!n&&i){var o=this.getUnsortedCard();if(o){var c=this.hint.getAvailableDestinations(o),l=Re()(c).call(c,(function(e){return e.isEmpty()})),u=l[0];u&&(n=!0,this.mover.moveCardToPlacement(o,u))}}if(n){this.boardState=xl.AUTO_MOVE_TO_FOUNDATION,!this.isOnLastAutoMoveToFoundation&&i&&(this.isOnLastAutoMoveToFoundation=!0,this.scene.audio.playSound(Ja.Z.AUTO_COMPLETE),this.removeAllCardsGlow());var h=this.isOnLastAutoMoveToFoundation?50:100;return this.scene.time.delayedCall(h,(function(){e.updateAfterMove()})),!0}return!1},n.autoComplete=function(){var e=this;if(this.isGameWon())this.handleGameWon();else{this.updateLevelProgress(),this.updateEligibleFoundationCards(),this.updateAllCardLightOn();var t=this.hint.findMovable();if(0===t.length)return!1;for(var n=!1,i=0;i<t.length;i++){var a=t[i],r=this.hint.getAvailableDestinations(a)[0];if(r instanceof Il){n=!0,this.mover.moveCardToFoundation(a,r);break}}if(!n){var s=this.getUnsortedCard();if(s){var o=this.hint.getAvailableDestinations(s),c=Re()(o).call(o,(function(e){return e.isEmpty()})),l=c[0];l&&this.mover.moveCardToPlacement(s,l)}}this.scene.time.delayedCall(50,(function(){e.autoComplete()}))}},n.getUnsortedCard=function(){var e,t=Re()(e=this.piles).call(e,(function(e){return!e.isSorted()}));if(0!==t.length){var n=t[0];return n.cards[n.cards.length-1]}},n.isCardValidToAutoMoveToFoundation=function(e){var t=e.getCardValue(),n=e.getCardSuit();if(1===t||2===t)return!0;var i=0;return this.foundations.forEach((function(e){e.cards.forEach((function(e){var a=e.getCardValue(),r=e.getCardSuit();a===t-1&&r!==n&&(i+=1)}))})),2===i},n.updateAfterMove=function(){if(this.updateLevelProgress(),this.updateEligibleFoundationCards(),this.updateAllCardLightOn(),this.isGameWon())this.handleGameWon();else{if(this.isIdle())return this.checkAutoCompleted(),void this.checkGameLose();if(this.isPlaying()||this.isOnAutoMoveToFoundation())if(this.scene.player.getPlayerSettings().autoMoveToFoundation)this.autoMoveCardToFoundation()||(this.boardState=xl.PLAYING,this.checkGameLose());else this.checkAutoCompleted(),this.checkGameLose()}},n.checkGameLose=function(){var e=this;this.isGameLose()&&(this.boardState=xl.OUT_OF_MOVE,this.scene.time.delayedCall(1e3,(function(){e.outOfMove()})))},n.isGameLose=function(){var e,t=_()(e=[]).call(e,this.freeCells,this.piles),n=0;return t.forEach((function(e){n+=e.cards.length})),n>0&&!this.hint.canHint()},n.isGameWon=function(){var e;return!D()(e=this.foundations).call(e,(function(e){return!e.isFull()}))},n.outOfMove=function(){this.mover.donePick(),this.boardState=xl.GAME_OVER,this.gameplay.handleGameOver(!1),this.gameplay.saveSystem.clearLastGame()},n.clearOldBoard=function(){this.boardState=xl.NONE,this.canAutoComplete=!1,this.isOnLastAutoMoveToFoundation=!1,this.moves=0,this.time=0,this.score=0,this.mover.disableInput(),this.gameplay.scene.footer.hintBtn.setDisabled(!0),this.gameplay.boardGame.autoCompleteBtn.kill(),this.piles.forEach((function(e){return e.clear()})),this.foundations.forEach((function(e){return e.clear()})),this.freeCells.forEach((function(e){return e.clear()})),this.stock.clear(),this.mover.clear(),this.hint.clear(),this.deck.reset(),this.deck.cards.forEach((function(e){e.setEligibleFoundation(!1),e.setLightOn(!0)}))},n.handleGameWon=function(){this.autoCompleteBtn.kill(),this.gameplay.scene.footer.hintBtn.setDisabled(!0),this.increaseScore(Math.round(1e6/this.time*1e3)),this.scene.audio.playSound(Ja.Z.WON),this.gameplay.saveSystem.clearLastGame(),this.boardState=xl.GAME_OVER,this.gameplay.handleGameOver(!0)},n.update=function(e){(this.isPlaying()||this.isAutoCompleting()||this.isOnAutoMoveToFoundation())&&(this.time+=e),this.isPlaying()&&(this.timeToSaveBoardData+=e,this.timeToSaveBoardData>5e3&&(this.gameplay.saveSystem.saveCurrentBoardData(),this.timeToSaveBoardData=0)),this.stock.update(e),this.mover.update(),this.hint.update(e),this.mover.isPicked()&&this.hint.resetAutoHintTime(),this.isOnAutoMoveToFoundation()||this.isOutOfMove()?(this.scene.footer.undoBtn.setDisabled(!0,!1),this.scene.footer.playBtn.setDisabled(!0,!1)):(this.scene.footer.undoBtn.setDisabled(0==this.mover.undos.length||this.isAutoCompleting()),this.scene.footer.playBtn.setDisabled(this.isDealing()||this.isAutoCompleting()))},n.isDealing=function(){return this.boardState==xl.DEALING},n.isPlaying=function(){return this.boardState==xl.PLAYING},n.isAutoCompleting=function(){return this.boardState==xl.AUTO_COMPLETING},n.isOnAutoMoveToFoundation=function(){return this.boardState==xl.AUTO_MOVE_TO_FOUNDATION},n.isIdle=function(){return this.boardState==xl.IDLE},n.isOutOfMove=function(){return this.boardState==xl.OUT_OF_MOVE},n.isGameOver=function(){return this.boardState==xl.GAME_OVER},n.isNone=function(){return this.boardState==xl.NONE},n.createDevBtn=function(){if(GameCore.Utils.Valid.isDebugger()){this.createAutoPlay(),this.createAutoStepPlay(),this.createPlayWithFriendGameOver(),this.createChallengeMode(),this.createTournamentResultButton(),this.createChallengeResultButton(),this.createNotifyScreenButton(),this.createSeedText(),this.createOpenDevToolButton();var e=this.scene.add.zone(0,0,40,40);Phaser.Display.Align.In.BottomLeft(e,this.scene.gameZone,0,-40);var t=this.scene.ads.getBannerHeight(),n=this.scene.world.getWorldSize(),i=n.width,a=n.height;Phaser.Actions.GridAlign([this.autoPlayBtn,this.autoPlayStepBtn,this.playWithFriendGameOverButton,this.challengeModeButton,this.tournamentResultButton,this.challengeResultButton,this.notificationButton,this.playSeedButton],{width:i>375?1:10,height:i>375?10:1,cellWidth:40,cellHeight:-40,x:20,y:a-120-t-40})}},n.createSeedText=function(){var e=this.scene.ads.getBannerHeight();this.seedText=this.scene.add.bitmapText(0,0,No.Z.PRIMARY.KEY,"#0",this.scene.fontSize(15)),Phaser.Display.Align.In.BottomLeft(this.seedText,this.scene.gameZone,-10,-80-e)},n.updateSeedDebugText=function(e,t){if(GameCore.Utils.Valid.isDebugger()&&this.seedText){var n=t.length>15?S()(t).call(t,0,15)+"...":t;this.seedText.setText("level: "+e+", #"+n)}},n.createAutoPlay=function(){var e,t=this;this.autoPlayBtn=new vu.Z(this.scene,40,40);var n=this.scene.add.image(0,0,Lu,Du.IC_BG_OFF);n.setWorldSize(40,40);var i=this.scene.make.bitmapText({font:No.Z.PRIMARY.KEY,size:this.scene.fontSize(10),text:"Auto\nPlay",origin:{x:.5,y:.5}});i.setCenterAlign(),null==(e=this.autoPlayBtn)||e.add([n,i]);var a=this.scene.time.addEvent({delay:50,repeat:-1,callback:function(){if(t.isIdle()&&(t.boardState=xl.PLAYING),t.scene.player.getPlayerSettings().autoMoveToFoundation){if(!t.isPlaying()&&!t.isOnAutoMoveToFoundation())return a.paused=!0,void i.setText("Auto\nPlay");t.isPlaying()&&t.hint.autoPlayStep()}else{if(!t.isPlaying()||t.canAutoComplete)return a.paused=!0,void i.setText("Auto\nPlay");t.hint.autoPlayStep()}},paused:!0});this.autoPlayBtn.onClick=function(){a.paused?(i.setText("Stop"),a.paused=!1):(i.setText("Auto\nPlay"),a.paused=!0)}},n.createAutoStepPlay=function(){var e,t=this;this.autoPlayStepBtn=new vu.Z(this.scene,40,40);var n=this.scene.add.image(0,0,Lu,Du.IC_BG_OFF);n.setWorldSize(40,40);var i=this.scene.make.bitmapText({font:No.Z.PRIMARY.KEY,size:this.scene.fontSize(10),text:"Step",origin:{x:.5,y:.5}});i.setCenterAlign(),null==(e=this.autoPlayStepBtn)||e.add([n,i]),this.autoPlayStepBtn.onClick=function(){t.isIdle()&&(t.boardState=xl.PLAYING),t.isPlaying()&&t.hint.autoPlayStep()}},n.createPlayWithFriendGameOver=function(){var e,t=this;this.playWithFriendGameOverButton=new vu.Z(this.scene,40,40);var n=this.scene.add.image(0,0,Lu,Du.IC_BG_OFF);n.setWorldSize(40,40);var i=this.scene.make.bitmapText({font:No.Z.PRIMARY.KEY,size:this.scene.fontSize(10),text:"Over",origin:{x:.5,y:.5}});i.setCenterAlign(),null==(e=this.playWithFriendGameOverButton)||e.add([n,i]),this.playWithFriendGameOverButton.onClick=function(){t.outOfMove()}},n.createChallengeMode=function(){var e,t=this;this.challengeModeButton=new vu.Z(this.scene,40,40);var n=this.scene.add.image(0,0,Lu,Du.IC_BG_OFF);n.setWorldSize(40,40);var i=this.scene.make.bitmapText({font:No.Z.PRIMARY.KEY,size:this.scene.fontSize(10),text:"CHL",origin:{x:.5,y:.5}});i.setCenterAlign(),null==(e=this.challengeModeButton)||e.add([n,i]),this.challengeModeButton.onClick=(0,s.Z)(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.scene.handlePlayWithFriend();case 1:case"end":return e.stop()}}),e)})))},n.createTournamentResultButton=function(){var e,t=this;this.tournamentResultButton=new vu.Z(this.scene,40,40);var n=this.scene.add.image(0,0,Lu,Du.IC_BG_OFF);n.setWorldSize(40,40);var i=this.scene.make.bitmapText({font:No.Z.PRIMARY.KEY,size:this.scene.fontSize(10),text:"ToRe",origin:{x:.5,y:.5}});i.setCenterAlign(),null==(e=this.tournamentResultButton)||e.add([n,i]),this.tournamentResultButton.onClick=(0,s.Z)(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.scene.screen.open(qa.o4.TOURNAMENTS_RESULT_SCREEN);case 1:case"end":return e.stop()}}),e)})))},n.createChallengeResultButton=function(){var e=this;this.challengeResultButton=new vu.Z(this.scene,40,40);var t=this.scene.add.image(0,0,Lu,Du.IC_BG_OFF);t.setWorldSize(40,40);var n=this.scene.make.bitmapText({font:No.Z.PRIMARY.KEY,size:this.scene.fontSize(10),text:"CHRe",origin:{x:.5,y:.5}});n.setCenterAlign(),this.challengeResultButton.add([t,n]),this.challengeResultButton.onClick=(0,s.Z)(h().mark((function t(){return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.scene.screen.open(qa.o4.PLAY_WITH_FRIEND_GAME_OVER_SCREEN);case 1:case"end":return t.stop()}}),t)})))},n.createNotifyScreenButton=function(){this.notificationButton=new vu.Z(this.scene,40,40);var e=this.scene.add.image(0,0,Lu,Du.IC_BG_OFF);e.setWorldSize(40,40);var t=this.scene.make.bitmapText({font:No.Z.PRIMARY.KEY,size:this.scene.fontSize(10),text:"NTF",origin:{x:.5,y:.5}});t.setCenterAlign(),this.notificationButton.add([e,t]),this.notificationButton.onClick=(0,s.Z)(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("notify");case 1:case"end":return e.stop()}}),e)})))},n.createOpenDevToolButton=function(){var e=this;this.playSeedButton=new vu.Z(this.scene,40,40);var t=this.scene.add.image(0,0,Lu,Du.IC_BG_OFF);t.setWorldSize(40,40);var n=this.scene.make.bitmapText({font:No.Z.PRIMARY.KEY,size:this.scene.fontSize(10),text:"SEED",origin:{x:.5,y:.5}});n.setCenterAlign(),this.playSeedButton.add([t,n]),this.playSeedButton.onClick=function(){e.scene.seedPanel.setData({seed:e.gameplay.getSeed()})}},n.getVerticalSpacePile=function(){return pl.VERTICAL_PILE_SPACE},n.getMaxCardCanMoveToEmptyPile=function(){return Math.floor(this.getMaxCardCanMoveToNonEmptyPile()/2)},n.getMaxCardCanMoveToNonEmptyPile=function(){var e=this.getNumberOfEmptyFreeCell(),t=this.getNumberOfEmptyPile();return Math.pow(2,t)*(e+1)},n.getNumberOfEmptyFreeCell=function(){var e,t=Re()(e=this.freeCells).call(e,(function(e){return e.isEmpty()})).length;return this.isPickedCardCreateNewEmptyFreeCell()&&(t-=1),t>=0?t:0},n.getNumberOfEmptyPile=function(){var e,t=Re()(e=this.piles).call(e,(function(e){return e.isEmpty()})).length;return this.isPickedCardCreateNewEmptyPile()&&(t-=1),t>=0?t:0},n.isPickedCardCreateNewEmptyPile=function(){if(this.mover.isPicked()){var e=this.mover.getPicked()[0].placement;return e instanceof Cl&&e.isEmpty()}return!1},n.isPickedCardCreateNewEmptyFreeCell=function(){if(this.mover.isPicked()){var e=this.mover.getPicked()[0].placement;return e instanceof Au&&e.isEmpty()}return!1},n.updateAllCardLightOn=function(){var e=(0,s.Z)(h().mark((function e(){var t,n,i,a=this;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(GameCore.Configs.Gameplay.SkipStartAnimation){e.next=4;break}return e.next=4,Tl(this.scene,pl.CARD_MOVE_TIME);case 4:t=!1,this.freeCells.forEach((function(e){e.cards.forEach((function(e){e.setLightOn(!0)}))})),this.foundations.forEach((function(e){e.cards.forEach((function(e){e.setLightOn(!0)}))})),n=this.mover.getPickedPlacement(),i=this.mover.isPicked(),this.piles.forEach((function(e){i&&e==n||(t=!1,e.cards.forEach((function(e,n){var i=t;i||(i=a.hint.isCardValidToMove(e)&&a.isCardCanMoveToNonEmptyPile(e,n),t=i),e.setLightOn(i)})))}));case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.updateEligibleFoundationCards=function(){var e=(0,s.Z)(h().mark((function e(t){var n,i,a,r,s,o,c;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===t&&(t=!0),i=GameCore.Configs.Gameplay.SkipStartAnimation,!t){e.next=6;break}if(i){e.next=6;break}return e.next=6,Tl(this.scene,pl.CARD_MOVE_TIME);case 6:if(a=this.scene.player.getPlayerSettings(),a.highlightLowCards){e.next=9;break}return e.abrupt("return");case 9:if(!this.isOnAutoMoveToFoundation()||!this.isOnLastAutoMoveToFoundation){e.next=11;break}return e.abrupt("return");case 11:if(!this.isAutoCompleting()){e.next=13;break}return e.abrupt("return");case 13:r=De()(n=this.foundations).call(n,(function(e){return e.cards[e.cards.length-1]})),s=De()(r).call(r,(function(e,t){return e?e.getTag()+1:100*ul[t]+1})),this.freeCells.forEach((function(e){e.cards.forEach((function(e){var t=we()(s).call(s,e.getTag());e.setEligibleFoundation(t)}))})),this.foundations.forEach((function(e){e.cards.forEach((function(e){e.setEligibleFoundation(!1)}))})),o=this.mover.getPickedPlacement(),c=this.mover.isPicked(),this.piles.forEach((function(e){c&&e==o||e.cards.forEach((function(e){var t=we()(s).call(s,e.getTag());e.setEligibleFoundation(t)}))}));case 20:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.isCardCanMoveToNonEmptyPile=function(e,t){return e.placement.cards.length-t<=this.getMaxCardCanMoveToNonEmptyPile()},n.isStandardSeedValid=function(e){return this.shuffler.isStandardSeedValid(e)},n.removeAllCardsGlow=function(){var e;_()(e=[]).call(e,this.freeCells,this.piles,this.foundations).forEach((function(e){e.cards.forEach((function(e){e.setEligibleFoundation(!1)}))}))},t}(Phaser.Events.EventEmitter),Fu=Gu,Zu=function(){function e(e){var t=this;this.gameplay=void 0,this.saveCurrentBoardToProfile=(0,na.D)((function(e){t.gameplay.scene.player.setCustomData("current_board",{boardData:e})}),2e3),this.gameplay=e}var t=e.prototype;return t.saveCurrentBoardData=function(){var e,t,n,i,a=this,s=this.gameplay.boardGame;if(s.mover.isPicked())console.error("Can't save the board while picking cards");else{var o={seed:this.gameplay.getSeed(),freeCells:De()(e=s.freeCells).call(e,(function(e){var t;return De()(t=e.cards).call(t,(function(e){return a.cardTagToIdx(e.getTag())}))})),piles:De()(t=s.piles).call(t,(function(e){var t;return De()(t=e.cards).call(t,(function(e){return a.cardTagToIdx(e.getTag())}))})),foundations:De()(n=s.foundations).call(n,(function(e){var t;return De()(t=e.cards).call(t,(function(e){return a.cardTagToIdx(e.getTag())}))})),score:s.getScore(),time:s.getTime(),moves:s.getMoves(),movesData:De()(i=s.mover.undos).call(i,(function(e){return(0,r.Z)({},e)})),level:this.gameplay.getCurrentLevel(),updatedAt:(new Date).getTime()};bs("current_board",{boardData:o}),this.saveCurrentBoardToProfile(o)}},t.clearLastGame=function(){console.log("clear last game"),function(e){try{return localStorage.removeItem(e),!0}catch(t){return!1}}("current_board"),this.gameplay.scene.player.setCustomData("current_board",{}),this.saveCurrentBoardToProfile()},t.getLastGameData=function(){var e=window.game.player.getCustomData("current_board");if(e){var t=e.boardData;if(this.isBoardDataValid(t))return Phaser.Utils.Objects.DeepCopy(t);console.error("Load last game error: current_board not valid!")}},t.isBoardDataValid=function(e){var t,n=GameCore.Utils.Valid;if(!n.isObject(e))return!1;var i=e.freeCells,a=e.piles,r=e.foundations,s=e.movesData,o=e.score,c=e.time,l=e.moves,u=e.seed;if(!n.isNumber(o))return!1;if(!n.isNumber(c))return!1;if(!n.isNumber(l))return!1;if(!n.isString(u))return!1;var h=void 0!==a,d=void 0!==i,f=void 0!==r,p=void 0!==s,g=void 0!==u,m=0;return _()(t=[]).call(t,i,a,r).forEach((function(e){return m+=e.length})),!!(h&&d&&f&&p&&g&&52==m)},t.cardTagToIdx=function(e){var t=e%100,n=(e-t)/100;return 13*(1==n?3:n-2)+t-1},e}(),Uu=Zu,Hu=n(412),Wu=new(n.n(Hu)()),zu={REQUEST_SWITCH_GAME:"request-switch-game"},Yu=function(e){function t(t){var n;return(n=e.call(this)||this).scene=void 0,n.boardGame=void 0,n.level=void 0,n.seed=void 0,n.saveSystem=void 0,n.confettiSmallFallDown=void 0,n.cardsLayer=void 0,n.startGameCount=void 0,n.finishGame=(0,s.Z)(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.boardGame.isGameOver()){e.next=2;break}return e.abrupt("return");case 2:return n.saveSystem.clearLastGame(),e.next=5,n.handleShowInterstitialAd();case 5:case"end":return e.stop()}}),e)}))),n.scene=t,n.startGameCount=0,n.cardsLayer=t.add.layer(),n.cardsLayer.setDepth(pl.DEPTH.CARD),n.boardGame=new Fu((0,Ua.Z)(n)),n.saveSystem=new Uu((0,Ua.Z)(n)),n.createConfetti(),n}(0,o.Z)(t,e);var n=t.prototype;return n.getSeed=function(){return this.seed},n.startNewGame=function(){var e=(0,s.Z)(h().mark((function e(){var t,n,i=this;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.saveSystem.clearLastGame(),Wu.emit(zu.REQUEST_SWITCH_GAME),this.scene.levelLoader.isLevelLoaded()){e.next=5;break}return this.scene.time.delayedCall(500,(function(){return i.startNewGame()})),e.abrupt("return");case 5:if(!this.boardGame.isDealing()){e.next=7;break}return e.abrupt("return");case 7:t=this.scene.levelLoader.randomLevel(),n=this.scene.levelLoader.randomSeed(t),this.level=t,this.seed=n,this.boardGame.startGame(n),this.scene.checkNewUser();case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.checkGameplayBeforeStartNewGame=function(){if(!this.boardGame.isGameWon()&&this.boardGame.getMoves()>0){this.scene.gameStats.addLose();var e=this.scene.gameStats.getNormalStat(),t=e.totalGame,n=e.wins;this.scene.analytics.event(mn._.LEVEL_GIVE_UP,{total_game:t,wins:n,score:this.boardGame.getScore(),moves:this.boardGame.getMoves(),time_played:Math.floor(this.boardGame.getTime()/1e3)})}},n.getCurrentLevel=function(){return this.level},n.getCurrentSeed=function(){return this.seed},n.startGameWith=function(e){this.seed=e,this.boardGame.startGame(e)},n.replayGame=function(){this.boardGame.boardState!==xl.DEALING&&(this.seed?this.boardGame.startGame(this.seed):this.startNewGame())},n.getGameOverScreenKey=function(e){return io.instance.isChallengeMode()?qa.o4.PLAY_WITH_FRIEND_GAME_OVER_SCREEN:io.instance.isTournamentMode()?qa.o4.TOURNAMENTS_RESULT_SCREEN:e?qa.o4.VICTORY_SCREEN:qa.o4.NO_MORE_MOVES_SCREEN},n.handleGameOver=function(){var e=(0,s.Z)(h().mark((function e(t){var n,a,r,o,c,l,u,d,f,p,g,m,v,y,b,A,E,S,T,w,C,I,x,P,k,_,O;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.showWellDoneScreen(t);case 2:if(a=this.boardGame.getScore(),r=this.boardGame.getTime(),o=this.boardGame.getMoves(),c=this.getSeed(),l=this.boardGame.mover.undoClicked>0,null==(n=this.boardGame.updateScoreTimer)||n.remove(),u=Math.floor(r/1e3),d=this.scene.storage.getState(),f=cs(d),p=this.scene.gameStats.getNormalStat(),g=p.totalGame,m=p.wins,v=this.scene.levelLoader.getLevelByWins(m),t?this.scene.gameStats.addWin({score:a,winningMoves:o,winningTime:r,usedUndo:l}):this.scene.gameStats.addLose(),!f){e.next=19;break}return e.next=17,Ts(f);case 17:y=e.sent,this.scene.storage.dispatch(Vs(y));case 19:return this.scene.storage.dispatch(Js({level:m,score:a,time:r,moves:o,total_game:g,difficulty:v,seed:c,time_played:u,success:t})),e.next=22,this.scene.storage.dispatch(function(){var e=(0,s.Z)(h().mark((function e(t,n){var a,r,s,o,c,l,u,d,f,p,g,m,v,y,b,A,E,S;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a=window.game,r=a.analytics,a.facebook,s=n(),o=ts(s),c=vs(s),l=c.score,u=void 0===l?0:l,d=c.level,f=void 0===d?0:d,p=c.time,g=void 0===p?0:p,m=c.moves,v=void 0===m?0:m,y=c.total_game,b=c.difficulty,A=c.seed,E=c.time_played,S=c.success,console.log(vs(s)),t(po(u)),e.next=9,t(vo(o,{score:u,level:f,time:g,moves:v}));case 9:s=n(),r.event(mn._.MATCH_END,{game_mode:GameCore.Utils.String.toUpperCamelCase(o),total_game:y,difficulty:b,level:f,level_name:"level_"+f,score:u,moves:v,time_played:E,success:S,seed:A}),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),(0,i.tO)(e.t0);case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t,n){return e.apply(this,arguments)}}());case 22:b=this.scene.gameStats.getNormalStat(),A=b.bestScore,E=b.bestWinningTime,S=b.bestWinningMoves,T=this.getGameOverScreenKey(t),this.scene.screen.open(T,{score:a,bestScore:A,winningMoves:o,bestWinningMoves:S,winningTime:r,bestWinningTime:E}),w=this.scene.player.getPlayerSettings(),C=w.modifiedOptions,I=w.autoMoveToFoundation,x=w.highlightLowCards,P=we()(C).call(C,Ta.Z.autoMoveToFoundation),k=we()(C).call(C,Ta.Z.highlightLowCards),_=P?""+I:"default",O=k?""+x:"default",this.scene.analytics.event(mn._.LEVEL_END,{total_game:g,difficulty:v,level:m,score:a,moves:o,time_played:u,success:t,seed:c,auto_move_foundation_option:_,highlight_low_cards_option:O});case 31:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.showWellDoneScreen=function(){var e=(0,s.Z)(h().mark((function e(t){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.scene.screen.open(qa.o4.WELL_DONE_SCREEN,{wellDone:t}),e.next=3,Tl(this.scene,2e3);case 3:return this.scene.screen.close(qa.o4.WELL_DONE_SCREEN),e.next=6,Tl(this.scene,300);case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.startGame=function(){if(io.instance.isChallengeMode()){var e=this.scene.storage.getState(),t=this.scene.player.getPlayerId();if(!ds(e,{playerId:t})){var n=window.FBInstant.getEntryPointData();if(n){var i=n.seed;if(void 0!=i)return void this.startGameWith(i)}}}if(io.instance.isTournamentMode()){var a=this.scene.levelLoader.getRandomBeginnerSeed();this.startGameWith(a)}else{var r=this.saveSystem.getLastGameData();r?(this.seed=r.seed,this.level=r.level,this.boardGame.continueGame(r)):this.startNewGame()}},n.tryCreateShortcut=function(){this.startGameCount>=1&&(console.log("attempt to create shortcut"),this.scene.game.facebook.attemptToAddShortcut())},n.startGameWithSeed=function(e){this.boardGame.boardState!==xl.DEALING&&(this.seed=e,this.boardGame.startGame(e))},n.update=function(e){this.boardGame.update(e)},n.handleShowInterstitialAd=function(){var e=(0,s.Z)(h().mark((function e(){var t,n;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.scene,n=t.game.globalScene,!t.ads.canbeShowInterstitialAd()){e.next=17;break}return t.audio.pauseMusic(),t.audio.muteAll(),n.screen.open(qa.o4.NOTIFY_SCREEN,{message:"loading",loading:!0}),e.prev=6,e.next=9,t.ads.showInterstitialAdAsync();case 9:e.next=13;break;case 11:e.prev=11,e.t0=e.catch(6);case 13:n.screen.close(qa.o4.NOTIFY_SCREEN),t.audio.unmuteAll(),t.audio.playMusic(),t.ads.preloadInterstitialAdAsync().catch((function(){}));case 17:case"end":return e.stop()}}),e,this,[[6,11]])})));return function(){return e.apply(this,arguments)}}(),n.createConfetti=function(){var e,t,n=this.scene.gameZone.width,i=new Phaser.Geom.Rectangle(n/2-187.5,-100,375,50),a=De()(e=Ft()(t=Array(40)).call(t,0)).call(e,(function(e,t){var n;return"confetti/papers/"+$c()(n=GameCore.Utils.Number).call(n,t,4,"0")}));this.confettiSmallFallDown=new Qa.Z(this.scene,{rotate:{start:-720,end:0},lifespan:{min:1500,max:2e3},emitZone:{source:i,type:"random"},particleBringToTop:!0,frame:a,tint:void 0}),this.confettiSmallFallDown.setDepth(fn.Z.ON_TOP)},t}(Phaser.Events.EventEmitter),Vu=Yu,Ku={FOOTER:12,TITLE:24,TAB_SELECTOR_LABEL:14,TOURNAMENT_BLOCK:{TITLE:20,JOIN_LABEL:16,LOW_TO_WIN:12}},ju=vn.Z.GAMEPLAY_DEFAULT,Xu=ju.KEY,qu=ju.FRAME,Ju=-10,Qu=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n.settingsBtn=void 0,n.themeBtn=void 0,n.gameStatsButton=void 0,n.playBtn=void 0,n.hintBtn=void 0,n.undoBtn=void 0,n.scene=t,n.setSize(375,68),n.createBackground(),n.createButtons(),t.add.existing((0,Ua.Z)(n)),n}(0,o.Z)(t,e);var n=t.prototype;return n.createBackground=function(){var e=this.scene.world.isLandscape()?0:40,t=this.scene.add.image(0,0,Xu,qu.FOOTER_BG);t.setWorldSize(this.width+e,this.height),this.add(t)},n.createButtons=function(){this.createSettingsBtn(),this.createGameStatsButton(),this.createPlayBtn(),this.createHintBtn(),this.createUndoBtn(),this.alignButtons()},n.createSettingsBtn=function(){var e=this;this.settingsBtn=new vu.Z(this.scene,40,40),this.settingsBtn.setName("Settings");var t=this.scene.add.image(0,Ju,Xu,qu.IC_SETTINGS).setTint(16579837);t.setWorldSize(28,28);var n=this.scene.make.bitmapText({font:No.Z.PRIMARY.KEY,size:this.scene.fontSize(Ku.FOOTER),text:"settings",origin:{x:.5,y:.5},y:14}).setTint(13355979);n.setMaxSize(65,18,!0),this.settingsBtn.add([t,n]),this.settingsBtn.onClick=function(){e.scene.screen.open(qa.o4.SETTINGS_SCREEN)}},n.createGameStatsButton=function(){var e=this;this.gameStatsButton=new vu.Z(this.scene,40,40),this.gameStatsButton.setName("GameStats");var t=this.scene.add.image(0,-10,Xu,qu.MENU_STATISTIC).setTint(16579837);t.setWorldSize(28,28);var n=this.scene.make.bitmapText({font:No.Z.PRIMARY.KEY,size:this.scene.fontSize(Ku.FOOTER),text:"statistics",origin:{x:.5,y:.5},y:14}).setTint(13355979);this.gameStatsButton.add([t,n]),this.gameStatsButton.onClick=function(){e.scene.screen.open(qa.o4.GAME_STATS_SCREEN)}},n.createPlayBtn=function(){var e=this;this.playBtn=new vu.Z(this.scene,40,40),this.playBtn.setName("Play");var t=this.scene.add.image(0,Ju,Xu,qu.ADD_SQUARE).setTint(16579837);t.setWorldSize(28,28);var n=this.scene.make.bitmapText({font:No.Z.PRIMARY.KEY,size:this.scene.fontSize(Ku.FOOTER),text:"game",origin:{x:.5,y:.5},y:14}).setTint(13355979);n.setMaxSize(65,18,!0),this.playBtn.add([t,n]),this.playBtn.onClick=function(){e.scene.screen.open(qa.o4.PLAY_SCREEN)}},n.createHintBtn=function(){var e=this;this.hintBtn=new vu.Z(this.scene,40,40),this.hintBtn.setName("Hint");var t=this.scene.add.image(0,Ju,Xu,qu.IC_HINT).setTint(16579837);t.setWorldSize(28,28);var n=this.scene.make.bitmapText({font:No.Z.PRIMARY.KEY,size:this.scene.fontSize(Ku.FOOTER),text:"hint",origin:{x:.5,y:.5},y:14}).setTint(13355979);n.setMaxSize(75,18,!0),this.hintBtn.add([t,n]),this.hintBtn.onClick=function(){e.scene.gameplay.boardGame.hint.showHint()},this.hintBtn.setDisabled(!0)},n.createUndoBtn=function(){var e=this;this.undoBtn=new vu.Z(this.scene,40,40),this.undoBtn.setName("Undo");var t=this.scene.add.image(0,Ju,Xu,qu.IC_UNDO).setTint(16579837);t.setWorldSize(28,28);var n=this.scene.make.bitmapText({font:No.Z.PRIMARY.KEY,size:this.scene.fontSize(Ku.FOOTER),text:"undo",origin:{x:.5,y:.5},y:14}).setTint(13355979);n.setMaxSize(75,18,!0),n.setCenterAlign(),this.undoBtn.add([t,n]),this.undoBtn.onClick=function(){e.scene.gameplay.boardGame.mover.undo()}},n.createThemeBtn=function(){var e=this;this.themeBtn=new vu.Z(this.scene,40,40),this.themeBtn.setName("Theme");var t=this.scene.add.image(0,Ju,Xu,qu.IC_THEME).setTint(16579837);t.setWorldSize(28,28);var n=this.scene.make.bitmapText({font:No.Z.PRIMARY.KEY,size:this.scene.fontSize(Ku.FOOTER),text:"Theme",origin:{x:.5,y:.5}}).setTint(13355979);this.themeBtn.add([t,n]),this.themeBtn.onClick=function(){e.scene.screen.open(qa.o4.THEME_SCREEN)}},n.alignButtons=function(){var e=[this.settingsBtn,this.gameStatsButton,this.playBtn,this.hintBtn,this.undoBtn];this.add(e);for(var t=0;t<e.length;t++)e[t].setX(75*(t-e.length/2+.5)),e[t].setY(2)},t}(Phaser.GameObjects.Container),$u=Qu,eh=vn.Z.GAMEPLAY_DEFAULT.KEY,th="...",nh=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n.avatar=void 0,n.scoreText=void 0,n.scoreIcon=void 0,n.timeText=void 0,n.moveText=void 0,n.scene=t,n.setSize(124,40),n.createBackground(),n.createAvatar(),n.createIcon(),n.createText(),n.timeText.kill(),n.moveText.kill(),n}(0,o.Z)(t,e);var n=t.prototype;return n.alignLeft=function(){this.scoreIcon.setPosition(-6,0),this.avatar.setPosition(-38,0),this.scoreText.setPosition(6,0),this.scoreText.setLeftAlign(),this.scoreText.setOrigin(0,.5)},n.alignRight=function(){this.scoreIcon.setPosition(6,0),this.avatar.setPosition(38,0),this.scoreText.setPosition(-6,0),this.scoreText.setRightAlign(),this.scoreText.setOrigin(1,.5)},n.createBackground=function(){var e=new Cu(this.scene,{key:"challenge-info-block",radius:6,border:12,width:this.width,height:this.height,y:-200});this.add(e)},n.createAvatar=function(){this.avatar=new Go(this.scene,{width:42,height:42,key:eh,background:"blank"}),this.avatar.background.kill(),this.avatar.loadPhoto(da.Z.AVATAR.KEY,da.Z.AVATAR.FILE,100),this.avatar.setPosition(-38,0),this.add(this.avatar)},n.createIcon=function(){var e=this.scene.add.image(-6,0,eh,"medal-star");e.setWorldSize(16,16),this.add([e]),this.scoreIcon=e},n.createText=function(){var e=this.scene.make.bitmapText({font:No.Z.PRIMARY.KEY,size:this.scene.fontSize(14),text:"0",origin:{x:.5,y:.5},y:0,x:6});this.add(e);var t=this.scene.make.bitmapText({font:No.Z.PRIMARY.KEY,size:this.scene.fontSize(14),text:"00:00",origin:{x:.5,y:.5},y:0,x:6});e.setCenterAlign(),this.add(t);var n=this.scene.make.bitmapText({font:No.Z.PRIMARY.KEY,size:this.scene.fontSize(14),text:"0",origin:{x:0,y:.5},y:18,x:6});this.add(n),this.scoreText=e,this.timeText=t,this.moveText=n},n.updateData=function(e,t,n){this.scoreText.setText(""+(null!=e?e:th)),this.timeText.setText(t?(0,$a.F0)(t,!1):th),this.moveText.setText(""+(null!=n?n:th))},t}(Phaser.GameObjects.Container),ih=nh,ah=16762624,rh=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n.leftBlock=void 0,n.rightBlock=void 0,n.scene=t,n.setSize(375,62),n.createBlocks(),n.createVSText(),n}(0,o.Z)(t,e);var n=t.prototype;return n.createBg=function(){var e=this.width,t=this.height,n=new xu.Z(this.scene,0,0,e,t,0,16579837);this.add(n)},n.createBlocks=function(){this.leftBlock=new ih(this.scene),this.leftBlock.alignRight(),this.rightBlock=new ih(this.scene),this.rightBlock.alignLeft(),this.leftBlock.setX(-90),this.leftBlock.setY(-3),this.rightBlock.setX(90),this.rightBlock.setY(-3),this.add([this.leftBlock,this.rightBlock])},n.createVSText=function(){var e=this.scene.make.bitmapText({font:No.Z.BOLD.KEY,size:this.scene.fontSize(18),text:"VS",origin:{x:.5,y:.5}});e.setTint(11632207),this.add(e),e.setTint(11222016,ah,ah,ah),Phaser.Display.Align.In.Center(e,this)},n.alignChildren=function(){this.leftBlock.setX(-90),this.rightBlock.setX(90)},t}(Phaser.GameObjects.Container),sh=rh,oh=function(e){function t(t){var n;return(n=e.call(this,t)||this).label=void 0,n.text=void 0,n.createLabel(),n.createText(),n.setTintComponents(),n.alignComponents(),n}(0,o.Z)(t,e);var n=t.prototype;return n.createLabel=function(){this.label=this.scene.make.bitmapText({font:No.Z.BOLD.KEY,size:this.scene.fontSize(15),text:"Label",origin:{x:.5,y:.5}}),this.add(this.label)},n.createText=function(){this.text=this.scene.make.bitmapText({font:No.Z.BOLD.KEY,size:this.scene.fontSize(15),text:"999",origin:{x:0,y:.5}}),this.text.setIgnoreLanguage(),this.add(this.text)},n.setTintComponents=function(){this.label.setTint(15527148),this.text.setTint(15527148)},n.alignComponents=function(){Phaser.Display.Align.In.LeftCenter(this.label,this),this.label.x-=this.x,this.label.y-=this.y,Phaser.Display.Align.To.RightCenter(this.text,this.label,7)},t}(Phaser.GameObjects.Container),ch=function(e){function t(t){var n;return(n=e.call(this,t)||this).label.setText("moves"),n.label.setMaxSize(100,25,!0),n.text.setOrigin(1,.5),n.text.setIgnoreLanguage(),Phaser.Display.Align.In.RightCenter(n.text,(0,Ua.Z)(n),0),Phaser.Display.Align.To.LeftCenter(n.label,n.text,7),n.scene.events.on(Phaser.Scenes.Events.UPDATE,(function(){n.label.setX(-n.label.width/2-10-9*n.text.text.length)})),n}return(0,o.Z)(t,e),t}(oh),lh=function(e){function t(t){var n;return(n=e.call(this,t)||this).label.setText("score"),n.label.setMaxSize(100,25,!0),n.scene.events.on(Phaser.Scenes.Events.UPDATE,(function(){n.alignComponents()})),n}return(0,o.Z)(t,e),t}(oh),uh=function(e){function t(t){var n;return(n=e.call(this,t)||this).label.kill(),n.text.setOrigin(.5,.5),n.text.setIgnoreLanguage(),Phaser.Display.Align.In.Center(n.text,(0,Ua.Z)(n)),n}return(0,o.Z)(t,e),t.prototype.alignComponents=function(){Phaser.Display.Align.In.Center(this.text,this)},t}(oh),hh=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n.movesBlock=void 0,n.timeBlock=void 0,n.scoreBlock=void 0,n.scene=t,n.setSize(375,62),n.createContent(),n}(0,o.Z)(t,e);var n=t.prototype;return n.createContent=function(){this.createScore(),this.createTime(),this.createMoves()},n.createMoves=function(){this.movesBlock=new ch(this.scene),this.add(this.movesBlock)},n.createTime=function(){this.timeBlock=new uh(this.scene),this.add(this.timeBlock)},n.createScore=function(){this.scoreBlock=new lh(this.scene),this.add(this.scoreBlock)},n.alignChildren=function(){var e=this.scene.gameplay.boardGame.getHorizontalPileSpace();this.movesBlock.setX(3.9*e-this.movesBlock.width/2),this.scoreBlock.setX(3.9*-e+this.scoreBlock.width/2)},t}(Phaser.GameObjects.Container),dh=hh,fh=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n.movesBlock=void 0,n.timeBlock=void 0,n.scoreBlock=void 0,n.scene=t,n.setSize(375,54),n.createContent(),n}(0,o.Z)(t,e);var n=t.prototype;return n.createContent=function(){this.createScore(),this.createTime(),this.createMoves()},n.createMoves=function(){this.movesBlock=new ch(this.scene),this.add(this.movesBlock)},n.createTime=function(){this.timeBlock=new uh(this.scene),this.add(this.timeBlock)},n.createScore=function(){this.scoreBlock=new lh(this.scene),this.add(this.scoreBlock)},n.alignChildren=function(){var e=this.scene.gameplay.boardGame.getHorizontalPileSpace();this.movesBlock.setX(3.9*e-this.movesBlock.width/2),this.scoreBlock.setX(3.9*-e+this.scoreBlock.width/2)},t}(Phaser.GameObjects.Container),ph=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n._tournamentTitle=void 0,n.scene=t,n.setSize(375,62),n.createContent(),n}(0,o.Z)(t,e);var n=t.prototype;return n.createContent=function(){this.createTitle()},n.createTitle=function(){this._tournamentTitle=this.scene.make.bitmapText({font:No.Z.PRIMARY.KEY,size:this.scene.fontSize(18),text:"Tournament",origin:{x:.5,y:.5},y:-15}),this._tournamentTitle.setIgnoreLanguage(!0,"en"),this.add(this._tournamentTitle),Phaser.Display.Align.In.BottomCenter(this._tournamentTitle,this)},(0,le.Z)(t,[{key:"tournamentTitle",get:function(){return this._tournamentTitle}}]),t}(Phaser.GameObjects.Container),gh=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n._statBlock=void 0,n._titleBlock=void 0,n.scene=t,n.createContent(),n.setSize(375,n._titleBlock.height+n._statBlock.height),n.alignChildren(),n}(0,o.Z)(t,e);var n=t.prototype;return n.createBg=function(){var e=this.width,t=this.height,n=new xu.Z(this.scene,0,0,e,t,0,16579837);this.add(n)},n.createContent=function(){this.createTitle(),this.createStat()},n.createTitle=function(){this._titleBlock=new ph(this.scene),this.add(this._titleBlock)},n.createStat=function(){this._statBlock=new fh(this.scene),this.add(this._statBlock)},n.alignChildren=function(){Phaser.Display.Align.In.TopCenter(this._titleBlock,this),Phaser.Display.Align.In.BottomCenter(this._statBlock,this,0,-5)},(0,le.Z)(t,[{key:"statBlock",get:function(){return this._statBlock}},{key:"titleBlock",get:function(){return this._titleBlock}}]),t}(Phaser.GameObjects.Container),mh=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n.singleInfo=void 0,n.challengeInfo=void 0,n.tournamentInfo=void 0,n.scene=t,n.setSize(375,62),t.add.existing((0,Ua.Z)(n)),n.createChallengeInfo(),n.createSingleInfo(),n.createTournamentInfo(),n}(0,o.Z)(t,e);var n=t.prototype;return n.getInfoContainersWithout=function(e){var t;return Re()(t=[this.singleInfo,this.challengeInfo,this.tournamentInfo]).call(t,(function(t){return t!==e}))},n.useChallengeInfo=function(){var e=this,t=[this.tournamentInfo];this.challengeInfo.revive(),this.singleInfo.revive(),this.scene.tweens.add({targets:this.challengeInfo,y:{from:-200,to:0},duration:500,ease:Phaser.Math.Easing.Sine.Out,onStart:function(){fl(95),e.scene.gameplay.boardGame.alignBoard()}}),this.scene.tweens.add({targets:this.singleInfo,y:{from:-200,to:35},duration:500,ease:Phaser.Math.Easing.Sine.Out}),this.scene.tweens.add({targets:t,y:{from:0,to:-200},duration:500,ease:Phaser.Math.Easing.Sine.In,onComplete:function(){return De()(t).call(t,(function(e){return e.kill()}))}})},n.useSingleInfo=function(){var e=this,t=this.getInfoContainersWithout(this.singleInfo);De()(t).call(t,(function(e){return e.kill()})),this.singleInfo.revive(),this.scene.tweens.add({targets:this.singleInfo,y:{from:-200,to:0},duration:500,ease:Phaser.Math.Easing.Sine.Out,onStart:function(){fl(70),e.scene.gameplay.boardGame.alignBoard()}}),this.scene.tweens.add({targets:t,y:{from:0,to:-200},duration:500,ease:Phaser.Math.Easing.Sine.In,onComplete:function(){return De()(t).call(t,(function(e){return e.kill()}))}})},n.useTournamentInfo=function(){var e=this,t=this.getInfoContainersWithout(this.tournamentInfo);this.tournamentInfo.revive(),this.scene.tweens.add({targets:this.tournamentInfo,y:{from:-200,to:0},duration:500,ease:Phaser.Math.Easing.Sine.Out,onStart:function(){fl(95),e.scene.gameplay.boardGame.alignBoard()}}),this.scene.tweens.add({targets:t,y:{from:0,to:-200},duration:500,ease:Phaser.Math.Easing.Sine.In,onComplete:function(){return De()(t).call(t,(function(e){return e.kill()}))}})},n.createChallengeInfo=function(){var e=new sh(this.scene);this.challengeInfo=e,this.add(e),this.challengeInfo.kill()},n.createSingleInfo=function(){var e=new dh(this.scene);this.singleInfo=e,this.add(e)},n.createTournamentInfo=function(){var e=new gh(this.scene);this.tournamentInfo=e,this.add(e),this.tournamentInfo.kill()},n.update=function(){var e=this.scene.gameplay.boardGame,t=e.getScore(),n=e.getTime(),i=e.getMoves(),a=this.singleInfo,r=a.scoreBlock,s=a.timeBlock,o=a.movesBlock;switch(r.text.setText(""+t),s.text.setText((0,$a.F0)(n,!1)),o.text.setText(""+i),io.instance.getGameMode()){case to.CHALLENGE_FRIENDS:var c=this.challengeInfo.leftBlock;c.scoreText.setText(""+t),c.timeText.setText((0,$a.F0)(n,!1)),c.moveText.setText(""+i);break;case to.TOURNAMENT:var l=this.tournamentInfo.statBlock,u=l.movesBlock,h=l.timeBlock;l.scoreBlock.text.setText(""+t),h.text.setText((0,$a.F0)(n,!1)),u.text.setText(""+i)}},n.alignChildren=function(){this.singleInfo.alignChildren(),this.challengeInfo.alignChildren(),this.tournamentInfo.statBlock.alignChildren()},t}(Phaser.GameObjects.Container),vh=mh,yh=n(670),bh=n(678),Ah=function(e){function t(t){var n;return(n=e.call(this,t)||this).bg=void 0,n.createBackground(),n.createContent(),t.add.existing((0,Ua.Z)(n)),n}(0,o.Z)(t,e);var n=t.prototype;return n.createBackground=function(){this.setSize(360,120);var e=new xu.Z(this.scene,0,0,360,120,16,16119285);e.setAlpha(.85),this.add(e),this.bg=e},n.createContent=function(){this.createNewDealButton(),this.createReplayButton(),this.createCloseButton();var e=this.scene.add.line(0,0,0,0,this.width,0,3947587);e.setLineWidth(.5),e.setAlpha(.36),this.add(e)},n.createNewDealButton=function(){var e=this,t=new vu.Z(this.scene,360,60);t.setName("NewDeal"),t.onClick=(0,s.Z)(h().mark((function t(){return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.scene.screen.close(qa.o4.PLAY_SCREEN),!(e.scene instanceof cm)){t.next=6;break}return t.next=4,e.scene.handlePlaySingle();case 4:return t.next=6,e.scene.gameplay.handleShowInterstitialAd();case 6:e.closeResultScreen();case 7:case"end":return t.stop()}}),t)})));var n=this.scene.make.bitmapText({font:No.Z.PRIMARY.KEY,size:this.scene.fontSize(18),text:"newDeal",origin:{x:.5,y:.5}});n.setMaxSize(300,40),n.setTint(31487),t.add([n]),Phaser.Display.Align.In.TopCenter(t,this.bg,0),this.add([t])},n.createReplayButton=function(){var e=this,t=new vu.Z(this.scene,360,60);t.setName("Replay"),t.onClick=(0,s.Z)(h().mark((function t(){return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.scene.screen.close(qa.o4.PLAY_SCREEN),!(e.scene instanceof cm)){t.next=5;break}return t.next=4,e.scene.gameplay.handleShowInterstitialAd();case 4:e.scene.gameplay.replayGame();case 5:e.closeResultScreen();case 6:case"end":return t.stop()}}),t)})));var n=this.scene.make.bitmapText({font:No.Z.PRIMARY.KEY,size:this.scene.fontSize(18),text:"replay",origin:{x:.5,y:.5}});n.setMaxSize(300,40),n.setTint(31487),t.add([n]),Phaser.Display.Align.In.BottomCenter(t,this.bg,0),this.add([t])},n.createCloseButton=function(){var e=this,t=new bh.Z(this.scene,360,60,16,16579837);t.setName("Close"),t.onClick=function(){e.scene.screen.close(qa.o4.PLAY_SCREEN)};var n=this.scene.make.bitmapText({font:No.Z.BOLD.KEY,size:this.scene.fontSize(18),text:"cancel",origin:{x:.5,y:.5}});n.setMaxSize(300,40),n.setTint(31487),t.add([n]),Phaser.Display.Align.In.TopCenter(t,this.bg,0,3),Phaser.Display.Align.To.BottomCenter(t,this.bg,0,8),this.add([t])},n.closeResultScreen=function(){var e=this.scene.screen.get(qa.o4.NO_MORE_MOVES_SCREEN),t=this.scene.screen.get(qa.o4.VICTORY_SCREEN),n=this.scene.screen.get(qa.o4.PLAY_WITH_FRIEND_GAME_OVER_SCREEN),i=this.scene.screen.get(qa.o4.TOURNAMENTS_RESULT_SCREEN);null!=e&&e.visible&&this.scene.screen.close(qa.o4.NO_MORE_MOVES_SCREEN),null!=t&&t.visible&&this.scene.screen.close(qa.o4.VICTORY_SCREEN),null!=n&&n.visible&&this.scene.screen.close(qa.o4.PLAY_WITH_FRIEND_GAME_OVER_SCREEN),null!=i&&i.visible&&this.scene.screen.close(qa.o4.TOURNAMENTS_RESULT_SCREEN)},t}(Phaser.GameObjects.Container),Eh=Ah,Sh=function(e){function t(t,n,i,a){var r;return(r=e.call(this,t,n,i,a)||this).slideInAnimation=void 0,r.fadeInAnimation=void 0,r.fadeOutAnimation=void 0,r.playContainer=void 0,r.setDepth(qa.Ks.POPUP),r.playContainer=new Eh(t),r.add(r.playContainer),r.background.setTint(1315862),r.background.setAlpha(.5),r.background.setInteractive(),r.playContainer.setInteractive(),r}(0,o.Z)(t,e);var n=t.prototype;return n.open=function(){e.prototype.open.call(this),this.runOpenAnimation()},n.close=function(){this.runCloseAnimation()},n.runOpenAnimation=function(){var e,t,n=this;if(null==(e=this.slideInAnimation)||null==(t=e.tween)||!t.isPlaying()){this.scene.audio.playSound(Ja.Z.POPUP_SHOW);var i=this.scene.game.world.isLandscape()?33:13,a=this.scene.ads.getBannerHeight(),r=this.scene.gameZone.height;this.slideInAnimation||(this.slideInAnimation=new Ao.Z({targets:[this.playContainer],props:{y:{from:r/2,to:r/2-160-a-i,ease:Phaser.Math.Easing.Back.Out}},duration:300,onComplete:function(){n.background.once(Phaser.Input.Events.POINTER_DOWN,(function(){return n.scene.screen.close(qa.o4.PLAY_SCREEN)}))}})),this.fadeInAnimation||(this.fadeInAnimation=new Fc.Z({targets:[this],duration:300,ease:Phaser.Math.Easing.Sine.InOut})),this.slideInAnimation.play(),this.fadeInAnimation.play()}},n.runCloseAnimation=function(){var t,n,i=this;null!=(t=this.fadeOutAnimation)&&null!=(n=t.tween)&&n.isPlaying()||(this.scene.audio.playSound(Ja.Z.POPUP_OFF),this.fadeOutAnimation||(this.fadeOutAnimation=new yh.Z({targets:[this],props:{alpha:0},duration:300,onComplete:function(){e.prototype.close.call(i)}})),this.fadeOutAnimation.play())},t}(GameCore.Screen),Th=Sh,wh=vn.Z.GAMEPLAY_DEFAULT.KEY,Ch=function(e){function t(t,n){var i;return(i=e.call(this,t,60,50)||this).options=void 0,i.button=void 0,i.getBackgroundByStatus=function(){var e=i.options,t=e.enable,n=e.backgroundOn,a=e.backgroundOff;return t?n:a},i.createButton=function(e){var t=i.getBackgroundByStatus();i.button=i.scene.add.image(0,0,e,t),i.add(i.button)},i.button=t.add.image(0,0,wh,"ic_switch_off"),i.button.setWorldSize(40,25),i.add(i.button),i.options={enable:n,backgroundOn:"ic_switch_on",backgroundOff:"ic_switch_off"},i.updateStatus(n),i}(0,o.Z)(t,e);var n=t.prototype;return n.processCallback=function(e){var t=this.options.enable;this.updateStatus(!t),e(!t)},n.updateStatus=function(e){this.options.enable=e;var t=this.getBackgroundByStatus();this.button.setFrame(t)},n.logButtonEvent=function(){var e=this.getParentName(),t=this.name,n=!this.options.enable;this.scene.analytics.event(mn._.BUTTON_CLICK,{button_name:t,screen_name:e,enable:n})},t}(vu.Z),Ih=Ch,xh=vn.Z.GAMEPLAY_DEFAULT,Ph=xh.KEY,kh=xh.FRAME,_h=function(e){function t(t){var n;return(n=e.call(this,t)||this).bg=void 0,n.autoMoveToFoundationButton=void 0,n.createBackground(),n.createContent(),n.createCloseButton(),t.add.existing((0,Ua.Z)(n)),n}(0,o.Z)(t,e);var n=t.prototype;return n.createBackground=function(){var e=new xu.Z(this.scene,0,0,340,452,20,16579837);this.add(e),this.bg=e,this.setSize(e.width,e.height),this.bg.setInteractive()},n.createContent=function(){var e=this.scene.make.bitmapText({font:No.Z.BOLD.KEY,size:this.scene.fontSize(22),text:"settings",origin:{x:.5,y:.5}});e.setMaxSize(250,40,!0),e.setTint(1907997),this.add(e),Phaser.Display.Align.In.TopCenter(e,this,0,-12);var t=this.scene.player.getPlayerSettings(),n=t.sound,i=void 0===n||n,a=(t.vibrate,t.tapToMove),r=void 0===a||a,s=t.autoHints,o=void 0===s||s,c=t.autoMoveToFoundation,l=void 0!==c&&c,u=t.highlightLowCards,h=void 0!==u&&u,d=(kh.IC_VIBRATION,kh.IC_SOUND),f=(kh.IC_MOVE,kh.IC_HINT_SETTINGS,kh.IC_AUTO_COMPLETE,kh.IC_DRAW_MODE,[this.createToggleButton("sound","soundEffects",i,d),this.createThemeButton(),this.createStatisticsButton(),this.createLanguageButton(),this.createToggleButton(Ta.Z.tapToMove,"tapToMove",r,"ic_move"),this.createToggleButton(Ta.Z.autoHints,"autoHints",o,"ic_hint_settings"),this.createToggleButton(Ta.Z.autoMoveToFoundation,"autoMoveToFoundation",l,"ic_auto_complete"),this.createToggleButton(Ta.Z.highlightLowCards,"highlightLowCards",h,"ic_highlight"),this.createHowToPlayButton()]),p=e.y+50,g=this.scene.add.line(0,p-23,0,0,340,0,3774208,1);g.setLineWidth(.6),this.add(g);for(var m=0;m<f.length;m++)if(f[m].setY(44*m+p),m<f.length-1){var v=this.scene.add.line(0,44*m+p+23,0,0,300,0,1907997,.2);v.setLineWidth(.4),this.add(v)}this.add(f)},n.createToggleButton=function(e,t,n,i){var a=this;void 0===i&&(i="ic_sound");var r=1/this.scene.world.getPixelRatio(),s=this.scene.add.container(0,0);s.setSize(340,50);var o=new Ih(this.scene,n);o.setName(e),e===Ta.Z.autoMoveToFoundation&&(this.autoMoveToFoundationButton=o),o.onClick=function(t){a.scene.player.setSetting(e,t),a.scene.events.emit("settings-changed",e,t),e==Ta.Z.sound&&a.handleSoundChanged(t);var n=a.scene.player.getPlayerSettings().modifiedOptions,i=GameCore.Utils.Json.clone(n);we()(i).call(i,e)||i.push(e),a.scene.player.setSetting(Ta.Z.modifiedOptions,i),"vibrate"==e&&a.scene.vibration.performVibrating(100)};var c=this.scene.make.bitmapText({font:No.Z.BOLD.KEY,size:this.scene.fontSize(16),text:t,origin:{x:0,y:.5}});c.setMaxSize(230,40);var l=this.scene.add.image(0,0,Ph,i);return l.setScale(r),l.setSize(24,24),c.setTint(1907997),s.add([o,c,l]),Phaser.Display.Align.In.LeftCenter(l,s,-20,0),Phaser.Display.Align.In.LeftCenter(c,s,-50,0),Phaser.Display.Align.In.RightCenter(o,s,-10,0),s},n.createThemeButton=function(){var e=this,t=new vu.Z(this.scene,300,50);t.setName("Theme"),t.onClick=function(){e.scene.screen.close(qa.o4.SETTINGS_SCREEN),e.scene.screen.open(qa.o4.THEME_SCREEN)};var n=this.scene.make.bitmapText({font:No.Z.BOLD.KEY,size:this.scene.fontSize(16),text:"theme",origin:{x:0,y:.5}});n.setMaxSize(230,40),n.setTint(1907997);var i=this.scene.add.image(0,0,Ph,"ic_theme");i.setWorldSize(24,24);var a=this.scene.add.image(0,0,Ph,kh.IC_NEXT);return a.setWorldSize(16,16),Phaser.Display.Align.In.LeftCenter(n,t,-30),Phaser.Display.Align.In.RightCenter(a,t),Phaser.Display.Align.In.LeftCenter(i,t),t.add([n,i,a]),t},n.createHowToPlayButton=function(){var e=this,t=new vu.Z(this.scene,300,50);t.setName("HowToPlay"),t.onClick=function(){e.scene.screen.close(qa.o4.SETTINGS_SCREEN),e.scene.screen.open(qa.o4.HOW_TO_PLAY_SCREEN)};var n=this.scene.make.bitmapText({font:No.Z.BOLD.KEY,size:this.scene.fontSize(16),text:"howToPlay?",origin:{x:0,y:.5}});n.setMaxSize(230,40),n.setTint(1907997);var i=this.scene.add.image(0,0,Ph,kh.IC_BOOK);i.setWorldSize(24,24);var a=this.scene.add.image(0,0,Ph,kh.IC_NEXT);return a.setWorldSize(16,16),Phaser.Display.Align.In.LeftCenter(n,t,-30),Phaser.Display.Align.In.LeftCenter(i,t),Phaser.Display.Align.In.RightCenter(a,t),t.add([n,i,a]),t},n.createStatisticsButton=function(){var e=this,t=new vu.Z(this.scene,300,50);t.setName("Statistics"),t.onClick=function(){e.scene.screen.close(qa.o4.SETTINGS_SCREEN),e.scene.screen.open(qa.o4.GAME_STATS_SCREEN)};var n=this.scene.make.bitmapText({font:No.Z.BOLD.KEY,size:this.scene.fontSize(16),text:"statistics",origin:{x:0,y:.5}});n.setMaxSize(230,40),n.setTint(1907997);var i=this.scene.add.image(0,0,Ph,kh.IC_STATISTICS);i.setWorldSize(24,24);var a=this.scene.add.image(0,0,Ph,kh.IC_NEXT);return a.setWorldSize(16,16),Phaser.Display.Align.In.LeftCenter(n,t,-30),Phaser.Display.Align.In.LeftCenter(i,t),Phaser.Display.Align.In.RightCenter(a,t),t.add([n,i,a]),t},n.createLanguageButton=function(){var e=this,t=new vu.Z(this.scene,300,50);t.setName("Language"),t.onClick=function(){e.scene.screen.close(qa.o4.SETTINGS_SCREEN),e.scene.screen.open(qa.o4.LANGUAGES_SCREEN)};var n=this.scene.make.bitmapText({font:No.Z.BOLD.KEY,size:this.scene.fontSize(16),text:"languages",origin:{x:0,y:.5}});n.setMaxSize(230,40),n.setTint(1907997);var i=this.scene.add.image(0,0,Ph,kh.IC_LANGUAGES);i.setWorldSize(24,18.5);var a=this.scene.add.image(0,0,Ph,kh.IC_NEXT);return a.setWorldSize(16,16),Phaser.Display.Align.In.LeftCenter(n,t,-30),Phaser.Display.Align.In.LeftCenter(i,t),Phaser.Display.Align.In.RightCenter(a,t),t.add([n,i,a]),t},n.handleSoundChanged=function(e){this.scene.sound.volume=e?1:0},n.createCloseButton=function(){var e=this,t=new vu.Z(this.scene,40,40);t.setName("Close"),t.onClick=function(){e.scene.screen.close(qa.o4.SETTINGS_SCREEN)};var n=this.scene.add.image(0,0,Ph,"ic_close_gray");n.setWorldSize(24,24),t.add(n),Phaser.Display.Align.In.TopRight(t,this.bg,-4,-6),this.add([t])},t}(Phaser.GameObjects.Container),Oh=_h,Rh=function(e){function t(t,n,i,a){var r;return(r=e.call(this,t,n,i,a)||this).slideInAnimation=void 0,r.fadeInAnimation=void 0,r.fadeOutAnimation=void 0,r.settingsContainer=void 0,r.setDepth(qa.Ks.POPUP),r.settingsContainer=new Oh(t),r.add(r.settingsContainer),r.background.setTint(1315862),r.background.setAlpha(.5),r.background.setInteractive(),r.settingsContainer.setInteractive(),r}(0,o.Z)(t,e);var n=t.prototype;return n.open=function(){e.prototype.open.call(this),this.runOpenAnimation()},n.close=function(){this.runCloseAnimation()},n.runOpenAnimation=function(){var e=this;this.scene.audio.playSound(Ja.Z.POPUP_SHOW);var t=this.scene.ads.getBannerHeight();this.slideInAnimation||(this.slideInAnimation=new Ao.Z({targets:[this.settingsContainer],props:{y:{from:this.height/2,to:this.height/2-this.settingsContainer.height/2-20-t,ease:Phaser.Math.Easing.Back.Out}},duration:300,onComplete:function(){e.background.once(Phaser.Input.Events.POINTER_DOWN,(function(){return e.scene.screen.close(qa.o4.SETTINGS_SCREEN)}))}})),this.fadeInAnimation||(this.fadeInAnimation=new Fc.Z({targets:[this],duration:300})),this.slideInAnimation.play(),this.fadeInAnimation.play()},n.runCloseAnimation=function(){var t=this;this.scene.audio.playSound(Ja.Z.POPUP_OFF),this.fadeOutAnimation||(this.fadeOutAnimation=new yh.Z({targets:[this],props:{alpha:0},duration:300,onComplete:function(){t.setAlpha(1),e.prototype.close.call(t)}})),this.fadeOutAnimation.play()},n.getAutoMoveToFoundationButton=function(){return this.settingsContainer.autoMoveToFoundationButton},t}(GameCore.Screen),Lh=Rh,Dh={totalGame:0,wins:0,winsWithoutUndo:0,bestScore:0,averageScore:0,bestWinningTime:0,averageWinningTime:0,mostWinningTime:0,bestWinningMoves:0,mostWinningMoves:0,currentWinningStreak:0,longestWinningStreak:0},Bh=function(){function e(e){this.scene=void 0,this.normal=void 0,this.scene=e;var t=e.player.getCustomData("game_stats");t&&0!=ae()(t).length?this.normal=(0,r.Z)({},t.normal):(this.normal=(0,r.Z)({},Dh),this.pushGameStats())}var t=e.prototype;return t.addWin=function(e){console.log("add win: ",e),this.normal=this.calculateNewStats(this.normal,e),this.pushGameStats()},t.calculateNewStats=function(e,t){var n=t.score,i=t.winningMoves,a=t.winningTime,r=t.usedUndo,s=e.totalGame+1,o=e.wins+1,c=e.winsWithoutUndo+(r?0:1),l=Math.max(e.bestScore,n),u=(e.averageScore*e.wins+n)/o,h=(e.averageWinningTime*e.wins+a)/o,d=Math.min(a,e.bestWinningTime)||a,f=Math.max(a,e.mostWinningTime),p=Math.min(i,e.bestWinningMoves)||i,g=Math.max(i,e.mostWinningMoves),m=e.currentWinningStreak+1;return{totalGame:s,wins:o,winsWithoutUndo:c,bestScore:l,averageScore:u,averageWinningTime:h,bestWinningTime:d,mostWinningTime:f,bestWinningMoves:p,mostWinningMoves:g,currentWinningStreak:m,longestWinningStreak:Math.max(m,e.longestWinningStreak)}},t.addLose=function(){console.log("add lose: "),this.normal=(0,r.Z)({},this.normal,{totalGame:this.normal.totalGame+1,currentWinningStreak:0}),this.pushGameStats()},t.pushGameStats=function(){this.scene.player.setCustomData("game_stats",{normal:this.normal})},t.getWins=function(){return this.normal.wins},t.getNormalStat=function(){return this.normal},e}(),Nh=Bh,Mh=function(){function e(e){this.scene=void 0,this.scene=e,this.loadLevels()}var t=e.prototype;return t.loadLevels=function(){for(var e=1;e<=5;e++){var t="level"+e;this.scene.cache.text.exists(t)||this.scene.load.text(t,"assets/levels/"+t+".txt")}this.scene.load.start()},t.isLevelLoaded=function(){var e=this.getKey();return!!this.scene.cache.text.get(e)&&!!this.scene.cache.text.get(e)},t.getKey=function(){var e=this.scene.gameStats.getWins();return"level"+this.getLevelByWins(e)},t.getLevelByWins=function(e){return e<10?1:e<20?2:e<60?3:e<140?4:5},t.randomLevel=function(){var e=this.scene.gameStats.getWins(),t=this.getLevelByWins(e);return Phaser.Math.RND.between(1,t)},t.randomSeed=function(e){var t="level"+e,n=this.scene.cache.text.get(t);if(!n)throw Error("Level data \u0111\xe2u r\u1ed3i b\u1ea1n \xeai!!!");var i=Phaser.Math.RND.pick(n.split("\n")),a=String((0,fu.Z)(i));return console.log("Random seed: "+a+", level "+e),this.isStandardSeed(a)&&!this.scene.gameplay.boardGame.isStandardSeedValid(a)?this.randomSeed(e):i},t.isStandardSeed=function(e){return e.length<=10},t.getRandomBeginnerSeed=function(){var e=this.scene.cache.text.get("level1");if(!e)throw Error("Level data \u0111\xe2u r\u1ed3i b\u1ea1n \xeai!!!");var t=Phaser.Math.RND.pick(e.split("\n")),n=String((0,fu.Z)(t));return this.isStandardSeed(n)&&!this.scene.gameplay.boardGame.isStandardSeedValid(n)?this.getRandomBeginnerSeed():t},t.getAllSeeds=function(e){var t,n="level"+e,i=this.scene.cache.text.get(n);return De()(t=i.split("\n")).call(t,(function(e){return e}))},t.getDrawMode=function(){},e}(),Gh=Mh,Fh=n(84),Zh=n.n(Fh),Uh=function(e){function t(t){var n;return(n=e.call(this,t)||this).columns=void 0,n.rows=void 0,n.cellWidths=void 0,n.cellHeight=void 0,n.textGroup=void 0,n.iconGroup=void 0,n.aligns=void 0,n.tableData=void 0,n.background=void 0,n.columns=0,n.rows=0,n.tableData=[],n.aligns=[],n.cellWidths=[],n.cellHeight=0,n.textGroup=n.scene.add.group({classType:Phaser.GameObjects.BitmapText}),n.iconGroup=n.scene.add.group({classType:Phaser.GameObjects.Image}),t.add.existing((0,Ua.Z)(n)),n}(0,o.Z)(t,e);var n=t.prototype;return n.setTableSize=function(e,t,n,i,a){this.columns=t,this.rows=e,this.cellWidths=n,this.cellHeight=i,this.aligns=a,this.updateTable()},n.setTableData=function(e){this.tableData=e,this.updateTable()},n.updateTable=function(){var e;this.textGroup.getChildren().forEach((function(e){return e instanceof Phaser.GameObjects.BitmapText&&e.kill()})),this.iconGroup.getChildren().forEach((function(e){return e instanceof Phaser.GameObjects.Image&&e.kill()}));var t=Zh()(e=this.cellWidths).call(e,(function(e,t){return e+t}),0),n=this.rows*this.cellHeight;this.setSize(t,n);var i=this.tableData;if(i)for(var a=0;a<this.rows;a++){var r=i[a];if(!r)break;var s=this.cellHeight*(.5+a)-this.height/2,o=-this.width/2,c=this.spawnIcon();c.setTexture(vn.Z.GAMEPLAY_DEFAULT.KEY,r[2]),c.setWorldSize(24,24),c.setPosition(o-22,s);for(var l=0;l<this.columns;l++)if(r[l]){var u=this.cellWidths[l],h=this.spawnText();h.setText(r[l]),1==this.aligns[l]?(h.setOrigin(1,.5),h.setPosition(o+u,s),h.setIgnoreLanguage()):0==this.aligns[l]?(h.setOrigin(.5,.5),h.setPosition(o+.5*u,s)):(h.setOrigin(0,.5),h.setPosition(o,s),h.setMaxSize(200,25)),o+=u}}},n.drawBorder=function(){this.drawRowBorder(),this.drawColumnBorder();var e=this.scene.add.rectangle(0,0,0,0);e.setOrigin(.5,.5),e.setStrokeStyle(1,1907997,.2),e.setSize(this.width,this.height),e.setPosition(-this.width/2,-this.height/2),this.add(e)},n.drawRowBorder=function(){for(var e=-this.height/2,t=1;t<this.rows;t++){var n=this.scene.add.line(-15,e+this.cellHeight*t,0,0,this.width+35,0,1907997,.1);n.setLineWidth(.2),this.add(n)}},n.drawColumnBorder=function(){for(var e=-this.width/2,t=1;t<this.rows;t++){e+=this.cellWidths[t-1]||0;var n=this.scene.add.line(e,0,0,0,0,this.height,1907997,.1);n.setLineWidth(.2),this.add(n)}},n.spawnText=function(){var e=this.textGroup.getFirstDead()||this.createText();return e.revive(),e},n.createText=function(){var e=this.scene.make.bitmapText({font:No.Z.BOLD.KEY,size:this.scene.fontSize(16),origin:{x:.5,y:.5}});return e.setTint(1907997),this.textGroup.add(e),this.add(e),e},n.spawnIcon=function(){var e=this.iconGroup.get();return e.revive(),e.clearTint(),this.add(e),e},t}(Phaser.GameObjects.Container),Hh=Uh,Wh=43282,zh=15672868,Yh=13425357,Vh=303,Kh=24,jh=12,Xh=24,qh=66,Jh=1e3,Qh=Phaser.Math.Easing.Quadratic.Out,$h=Wh,ed=zh,td=Yh,nd=function(e){function t(t){var n;return(n=e.call(this,t)||this).emptyBar=void 0,n.winRateBar=void 0,n.loseRateBar=void 0,n.cornerRadius=void 0,n.isPlayingAnimation=!1,n.updatedLoseGraphicsWidth=-1,n.setSize(Vh,jh),n.cornerRadius=n.height/2,n.createEmptyBar(),n.createWinRateBar(),n.createLoseRateBar(),n}(0,o.Z)(t,e);var n=t.prototype;return n.createEmptyBar=function(){var e=this.width,t=this.height;this.emptyBar=new xu.Z(this.scene,0,0,e,t,this.cornerRadius).setFillStyle(td),this.add(this.emptyBar)},n.createWinRateBar=function(){var e=this.width,t=this.height;this.winRateBar=new xu.Z(this.scene,0,0,e,t,this.cornerRadius).setFillStyle($h).setOrigin(0,.5),this.add(this.winRateBar),Phaser.Display.Align.In.LeftCenter(this.winRateBar,this)},n.createLoseRateBar=function(){var e=this.width,t=this.height;this.loseRateBar=new xu.Z(this.scene,0,0,e/2,t,this.cornerRadius).setFillStyle(ed).setOrigin(1,.5),this.add(this.loseRateBar),Phaser.Display.Align.In.RightCenter(this.loseRateBar,this)},n.updateWinLoseCount=function(e,t){var n=e+t;if(n<=0)return this.winRateBar.kill(),void this.loseRateBar.kill();e?this.winRateBar.revive():this.winRateBar.kill(),t?this.loseRateBar.revive():this.loseRateBar.kill(),this.bringToTop(t<e?this.loseRateBar:this.winRateBar);var i=t/n*this.width;this.updatedLoseGraphicsWidth=i},n.initAnimation=function(){this.isPlayingAnimation||(this.loseRateBar.width=2*this.cornerRadius,this.winRateBar.width=2*this.cornerRadius)},n.playAnimation=function(){var e=this;this.isPlayingAnimation||(this.isPlayingAnimation=!0,-1!==this.updatedLoseGraphicsWidth?(this.scene.tweens.addCounter({from:2*this.cornerRadius,to:this.updatedLoseGraphicsWidth,ease:Qh,duration:Jh,onUpdate:function(t){e.loseRateBar.width=t.getValue()},onComplete:function(){e.isPlayingAnimation=!1}}),this.scene.tweens.addCounter({from:2*this.cornerRadius,to:this.width-this.updatedLoseGraphicsWidth+2*this.cornerRadius,ease:Qh,duration:Jh,onUpdate:function(t){var n=t.getValue();e.winRateBar.width=n>e.width?e.width:n}})):this.isPlayingAnimation=!1)},t}(Phaser.GameObjects.Container),id=12,ad=Wh,rd=zh,sd=16,od=function(e){function t(t){var n;return(n=e.call(this,t)||this).winCountLabel=void 0,n.loseCountLabel=void 0,n.setSize(Vh,Kh),n.createWinCountLabel(),n.createLoseCountLabel(),n.alignComponents(),n}(0,o.Z)(t,e);var n=t.prototype;return n.createWinCountLabel=function(){this.winCountLabel=this.scene.make.bitmapText({font:No.Z.PRIMARY.KEY,size:this.scene.fontSize(sd),text:"win",origin:{x:0,y:.5}}).setTint(ad),this.winCountLabel.setMaxSize(140,20),this.winCountLabel.setTranslationParameter("v",0),this.add(this.winCountLabel)},n.createLoseCountLabel=function(){this.loseCountLabel=this.scene.make.bitmapText({font:No.Z.PRIMARY.KEY,size:this.scene.fontSize(sd),text:"lose",origin:{x:1,y:.5}}).setTint(rd),this.loseCountLabel.setMaxSize(140,20),this.loseCountLabel.setTranslationParameter("v",0),this.add(this.loseCountLabel)},n.alignComponents=function(){Phaser.Display.Align.In.LeftCenter(this.winCountLabel,this),Phaser.Display.Align.In.RightCenter(this.loseCountLabel,this)},n.updateWinLoseCount=function(e,t){this.winCountLabel.setTranslationParameter("v",e),this.loseCountLabel.setTranslationParameter("v",t)},t}(Phaser.GameObjects.Container),cd=Wh,ld=zh,ud=id,hd=function(e){function t(t){var n;return(n=e.call(this,t)||this).winRateLabel=void 0,n.loseRateLabel=void 0,n.isPlayingAnimation=!1,n.updatedRoundedWinPercentage=-1,n.updatedRoundedLosePercentage=-1,n.setSize(Vh,Xh),n.createWinRateLabel(),n.createLoseRateLabel(),n.alignComponents(),n}(0,o.Z)(t,e);var n=t.prototype;return n.createWinRateLabel=function(){this.winRateLabel=this.scene.make.bitmapText({font:No.Z.PRIMARY.KEY,size:this.scene.fontSize(ud),text:"67%",origin:{x:0,y:.5}}).setTint(cd),this.winRateLabel.setIgnoreLanguage(),this.add(this.winRateLabel)},n.createLoseRateLabel=function(){this.loseRateLabel=this.scene.make.bitmapText({font:No.Z.PRIMARY.KEY,size:this.scene.fontSize(ud),text:"33%",origin:{x:1,y:.5}}).setTint(ld),this.loseRateLabel.setIgnoreLanguage(),this.add(this.loseRateLabel)},n.alignComponents=function(){Phaser.Display.Align.In.LeftCenter(this.winRateLabel,this),Phaser.Display.Align.In.RightCenter(this.loseRateLabel,this)},n.getRoundedWinLosePercentage=function(e,t){if(0===e&&0===t)return{win:0,lose:0};var n=Math.round(100*e);return{win:n,lose:100-n}},n.updateWinLoseRate=function(e,t){var n=e+t,i=n<=0?0:e/n,a=n<=0?0:t/n,r=this.getRoundedWinLosePercentage(i,a),s=r.win,o=r.lose;this.winRateLabel.setText(s+"%"),this.loseRateLabel.setText(o+"%"),this.updatedRoundedWinPercentage=s,this.updatedRoundedLosePercentage=o},n.initAnimation=function(){this.isPlayingAnimation||(this.winRateLabel.setText("0%"),this.loseRateLabel.setText("0%"))},n.playAnimation=function(){var e=this;this.isPlayingAnimation||(this.isPlayingAnimation=!0,-1!==this.updatedRoundedWinPercentage&&-1!==this.updatedRoundedLosePercentage?(this.scene.tweens.addCounter({from:0,to:this.updatedRoundedWinPercentage,ease:Qh,duration:Jh,onUpdate:function(t){var n=Math.round(t.getValue());e.winRateLabel.setText(n+"%")},onComplete:function(){e.isPlayingAnimation=!1}}),this.scene.tweens.addCounter({from:0,to:this.updatedRoundedLosePercentage,ease:Qh,duration:Jh,onUpdate:function(t){var n=Math.round(t.getValue());e.loseRateLabel.setText(n+"%")}})):this.isPlayingAnimation=!1)},t}(Phaser.GameObjects.Container),dd=function(e){function t(t){var n;return(n=e.call(this,t)||this).countLabel=void 0,n.rateLabel=void 0,n.barChart=void 0,n.setSize(Vh,qh),n.createCountLabel(),n.createRateLabel(),n.createBarChart(),n.alignComponents(),n}(0,o.Z)(t,e);var n=t.prototype;return n.setWinLoseCount=function(e,t){this.countLabel.updateWinLoseCount(e,t),this.barChart.updateWinLoseCount(e,t),this.rateLabel.updateWinLoseRate(e,t)},n.initAnimation=function(){this.barChart.initAnimation(),this.rateLabel.initAnimation()},n.playAnimation=function(){this.barChart.playAnimation(),this.rateLabel.playAnimation()},n.createCountLabel=function(){this.countLabel=new od(this.scene),this.add(this.countLabel)},n.createRateLabel=function(){this.rateLabel=new hd(this.scene),this.add(this.rateLabel)},n.createBarChart=function(){this.barChart=new nd(this.scene),this.add(this.barChart)},n.alignComponents=function(){Phaser.Display.Align.In.TopCenter(this.countLabel,this),Phaser.Display.Align.In.Center(this.barChart,this),Phaser.Display.Align.In.BottomCenter(this.rateLabel,this)},n.addBackground=function(){var e="win-lose-chart-background";if(!this.scene.textures.exists(e)){var t=this.width,n=this.height,i=this.scene.add.graphics();i.fillStyle(65280,.2),i.fillRect(0,0,t,n),i.generateTexture(e,t,n),i.destroy()}var a=this.scene.add.image(0,0,e);this.add(a)},t}(Phaser.GameObjects.Container),fd=vn.Z.GAMEPLAY_DEFAULT.FRAME,pd=function(e){function t(t){var n;return(n=e.call(this,t)||this).chart=void 0,n.tableStats=void 0,n.chart=new dd(t),n.tableStats=new Hh(t),n.tableStats.setTableSize(6,2,[135,125],60,[-1,1]),n.tableStats.drawRowBorder(),n.setSize(340,n.chart.height+n.tableStats.height),n.add([n.chart,n.tableStats]),Phaser.Display.Align.In.TopCenter(n.chart,(0,Ua.Z)(n)),Phaser.Display.Align.To.BottomCenter(n.tableStats,n.chart,15),t.add.existing((0,Ua.Z)(n)),n}return(0,o.Z)(t,e),t.prototype.setStats=function(e){var t=e.totalGame,n=e.wins,i=e.winsWithoutUndo,a=e.bestScore,r=e.averageScore,s=e.bestWinningTime,o=e.averageWinningTime;this.chart.setWinLoseCount(n,t-n),this.tableStats.setTableData([["totalGame",""+t,fd.STATS_FLASH],["winsWithoutUndo",""+i,fd.STATS_CROWN],["bestScore",""+a,fd.STATS_MEDAL_START],["avgScore",""+Math.round(r),fd.STATS_STAR],["bestWinningTime",""+(0,$a.F0)(s,!1),fd.STATS_CUP],["avgWinningTime",""+(0,$a.F0)(o,!1),fd.STATS_TIMER]])},t}(Phaser.GameObjects.Container),gd=pd,md=vn.Z.GAMEPLAY_DEFAULT.KEY,vd=function(e){function t(t){var n;return(n=e.call(this,t)||this).bg=void 0,n.tab=void 0,n.gameStats=void 0,n.normalStat=void 0,n.createBackground(),n.createTitle(),n.createGameStats(),n.createCloseButton(),t.add.existing((0,Ua.Z)(n)),n}(0,o.Z)(t,e);var n=t.prototype;return n.createBackground=function(){var e=new xu.Z(this.scene,0,0,340,500,20,16579837),t=this.scene.add.line(0,0,0,0,340,0,3774208,1);t.setLineWidth(.6),this.add([e,t]),this.bg=e,this.setSize(e.width,e.height),this.bg.setInteractive(),Phaser.Display.Align.In.TopCenter(t,this,0,-50)},n.createTitle=function(){var e=this.scene.make.bitmapText({font:No.Z.BOLD.KEY,size:this.scene.fontSize(20),text:"statistics",origin:{x:.5,y:.5}});e.setMaxSize(270,40),e.setTint(1907997),this.add(e),Phaser.Display.Align.In.TopCenter(e,this,0,-12)},n.createGameStats=function(){var e=this.scene.add.container(0,0);this.normalStat=new gd(this.scene),e.setSize(this.normalStat.width,this.normalStat.height),e.add(this.normalStat),this.add(e),Phaser.Display.Align.In.TopCenter(e,this,0,-65),this.gameStats=e},n.createCloseButton=function(){var e=this,t=new vu.Z(this.scene,40,40);t.setName("Close"),t.onClick=function(){e.scene.screen.close(qa.o4.GAME_STATS_SCREEN)};var n=this.scene.add.image(0,0,md,"ic_close_gray");n.setWorldSize(24,24),n.setTint(8750210),t.add(n),Phaser.Display.Align.In.TopRight(t,this.bg,-4,-4),this.add([t])},n.addMask=function(){var e=this,t=this.scene.make.graphics({fillStyle:{color:255,alpha:0},visible:!1});t.setName("MaskGraphics");var n=this.width,i=this.height;t.fillRoundedRect(-(n-10)/2,-i/2,n-10,i,0),this.gameStats.setMask(t.createGeometryMask()),this.scene.events.on("update",(function(){var n=e.getWorldPosition(),i=n.x,a=n.y;t.setPosition(i,a)}))},t}(Phaser.GameObjects.Container),yd=vd,bd=function(e){function t(t,n,i,a){var r;return(r=e.call(this,t,n,i,a)||this).scene=void 0,r.slideInAnimation=void 0,r.fadeInAnimation=void 0,r.fadeOutAnimation=void 0,r.gameStatsContainer=void 0,r.scene=t,r.setDepth(qa.Ks.POPUP),r.gameStatsContainer=new yd(t),r.add(r.gameStatsContainer),r.background.setTint(1315862),r.background.setAlpha(.5),r.background.setInteractive(),r.gameStatsContainer.setInteractive(),r}(0,o.Z)(t,e);var n=t.prototype;return n.open=function(){e.prototype.open.call(this),this.updateStatistics(),this.runOpenAnimation()},n.updateStatistics=function(){var e=this.gameStatsContainer.normalStat,t=this.scene.gameStats.normal;e.setStats(t)},n.close=function(){this.runCloseAnimation()},n.runOpenAnimation=function(){var e,t,n=this;if(null==(e=this.slideInAnimation)||null==(t=e.tween)||!t.isPlaying()){this.scene.audio.playSound(Ja.Z.POPUP_SHOW);var i=[this.gameStatsContainer.normalStat];i.forEach((function(e){e.chart.initAnimation()}));var a=this.scene.ads.getBannerHeight();this.slideInAnimation||(this.slideInAnimation=new Ao.Z({targets:[this.gameStatsContainer],props:{y:{from:this.height/2,to:this.height/2-this.gameStatsContainer.height/2-20-a}},onComplete:function(){n.background.once(Phaser.Input.Events.POINTER_DOWN,(function(){return n.scene.screen.close(qa.o4.GAME_STATS_SCREEN)}))},duration:300})),this.fadeInAnimation||(this.fadeInAnimation=new Fc.Z({targets:[this],duration:300,ease:Phaser.Math.Easing.Sine.InOut,onComplete:function(){var e=(0,s.Z)(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i.forEach((function(e){e.chart.playAnimation()}));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()})),this.slideInAnimation.play(),this.fadeInAnimation.play()}},n.runCloseAnimation=function(){var t,n,i=this;null!=(t=this.fadeOutAnimation)&&null!=(n=t.tween)&&n.isPlaying()||(this.scene.audio.playSound(Ja.Z.POPUP_OFF),this.fadeOutAnimation||(this.fadeOutAnimation=new yh.Z({targets:[this],props:{alpha:0},duration:300,onComplete:function(){e.prototype.close.call(i)}})),this.fadeOutAnimation.play())},t}(GameCore.Screen),Ad=bd,Ed={STATUS:{READY:"ready",RUNNING:"running",STOPPED:"stopped"}},Sd=Ed.STATUS,Td=function(){function e(e){this.state=void 0,this.scene=void 0,this.scene=e}var t=e.prototype;return t.init=function(){this.setState(Sd.READY)},t.start=function(){this.isRunning()||this.setState(Sd.RUNNING)},t.stop=function(){this.isRunning()&&this.setState(Sd.STOPPED)},t.setState=function(e){this.state=e},t.isReady=function(){return this.state===Sd.READY},t.isRunning=function(){return this.state===Sd.RUNNING},t.isStopped=function(){return this.state===Sd.STOPPED},e}(),wd=Td,Cd=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n.setBackground=function(){var e=n.scene.theme.getCurrentThemeConfig().backgroundKey;if(n.scene.load.off("filecomplete-image-"+e,n.setBackground),n.scene.textures.exists(e))return n.scene.setBackground(e),n.scene.events.emit($s.BACKGROUND_CHANGED,e),void n.updateBgApp();n.scene.load.once("filecomplete-image-"+e,n.setBackground)},n.updateCardStyle=function(){var e=n.scene.theme.getCurrentThemeConfig().cardFaceKey;n.scene.load.off("filecomplete-json-"+e,n.updateCardStyle),n.scene.textures.exists(e)?n.scene.gameplay.boardGame.deck.cards.forEach((function(e){return e.updateCardStyle()})):n.scene.load.once("filecomplete-json-"+e,n.updateCardStyle)},n.scene=t,n.setBackground(),n}(0,o.Z)(t,e);var n=t.prototype;return n.updateBgApp=function(){var e=this.scene.theme.getCurrentThemeResources();yn.Z.updateAppBg(e.backgroundFile)},n.changeBackground=function(e){this.scene.theme.changeBackground(e),this.setBackground(),this.scene.analytics.event(mn._.THEME_CHANGED,{theme_type:"background",theme_idx:e})},n.changeCardFace=function(e){this.scene.theme.changeCardFace(e),this.updateCardStyle(),this.scene.analytics.event(mn._.THEME_CHANGED,{theme_type:"card_face",theme_idx:e})},n.changeCardBack=function(e){this.scene.theme.changeCardBack(e),this.updateCardStyle(),this.scene.analytics.event(mn._.THEME_CHANGED,{theme_type:"card_back",theme_idx:e})},n.loadAllCardAtlas=function(){var e=this;this.scene.theme.getCardStyleAtlasConfigs().forEach((function(t){var n=t.key,i=t.textureURL,a=t.atlasURL;e.scene.textures.exists(n)||e.scene.load.atlas(n,i,a)})),this.scene.load.start()},n.loadAllBackgrounds=function(){var e=this;this.scene.theme.getBackgroundConfigs().forEach((function(t){var n=t.key,i=t.url;e.scene.textures.exists(n)||e.scene.load.image(n,i)})),this.scene.load.start()},t}(wd),Id=Cd,xd=function(e){function t(t,n,i,a,r){var s;return void 0===r&&(r=10),(s=e.call(this,t)||this).borderRadius=void 0,s.numOfTabs=void 0,s.tabs=void 0,s.currentIdx=void 0,s.callback=void 0,s.borderRadius=r,s.numOfTabs=a,s.setSize(n,i),s.createBg(),s.createTabs(),s.listenInput(),t.add.existing((0,Ua.Z)(s)),s}(0,o.Z)(t,e);var n=t.prototype;return n.addLabels=function(e){this.add(e);var t=this.width/this.numOfTabs;this.placeCenter(e,0,0,t+1)},n.createBg=function(){var e=new xu.Z(this.scene,0,0,this.width+this.numOfTabs+1,this.height+2,this.borderRadius,this.themeColor);this.add([e])},n.createTabs=function(){this.tabs=[];for(var e=this.width/this.numOfTabs,t=0;t<this.numOfTabs;t++){var n=0==t?{tl:this.borderRadius,bl:this.borderRadius}:t==this.numOfTabs-1?{tr:this.borderRadius,br:this.borderRadius}:0,i=new xu.Z(this.scene,0,0,e,this.height,n,this.backgroundColor);0==t&&i.setAlpha(0),this.tabs.push(i)}this.add(this.tabs),this.placeCenter(this.tabs,0,0,e+1)},n.placeCenter=function(e,t,n,i,a){void 0===a&&(a=0);for(var r=t-(this.numOfTabs/2-.5-a)*i,s=0;s<e.length;s++)e[s].setPosition(r+s*i,n)},n.getIdx=function(e){var t=this.width/this.tabs.length;return Math.floor((e+this.width/2)/t)},n.listenInput=function(){var e=this,t=!1;this.setInteractive({useHandCursor:!0}).on(Phaser.Input.Events.POINTER_DOWN,(function(){t=!0})).on(Phaser.Input.Events.POINTER_OUT,(function(){t=!1})).on(Phaser.Input.Events.POINTER_UP,(function(n){if(t){var i=e.getLocalPoint(n.worldX,n.worldY).x;e.selectTab(e.getIdx(i))}t=!1}))},n.selectTab=function(e){if(e!=this.currentIdx){this.currentIdx=e,this.callback&&this.callback(e);for(var t=0;t<this.tabs.length;t++)this.scene.tweens.add({targets:this.tabs[t],alpha:t!==e?1:0,duration:200,ease:Phaser.Math.Easing.Sine.InOut})}},(0,le.Z)(t,[{key:"themeColor",get:function(){return 3774208}},{key:"backgroundColor",get:function(){return 16579837}}]),t}(Phaser.GameObjects.Container),Pd=xd,kd=function(e){function t(t,n,i,a,r){var s;(s=e.call(this,t,n,i)||this).border=void 0,s.border1=void 0,s.icon=void 0;var o=s.scene.add.image(0,0,a,r);return o.setWorldSize(n,i),s.icon=o,s.add([o]),s.createBorder1(),s.createBorder(),s}(0,o.Z)(t,e);var n=t.prototype;return n.createBorder1=function(){var e=this.width+4,t=this.height+4,n="border "+e+"_"+t;if(!this.scene.textures.exists(n)){console.warn(n+" not found");var i=this.scene.make.renderTexture({width:2*e,height:2*t},!1),a=new xu.Z(this.scene,0,0,2*e,2*t,20,16579837,0).setOrigin(0,0);a.setStrokeStyle(8,16579837),i.draw(a,0,0),i.saveTexture(n)}var r=this.scene.add.image(0,0,n);r.setWorldSize(e,t),this.add(r),this.border1=r},n.createBorder=function(){var e=this.width+2,t=this.height+2,n="border "+e+"_"+t;if(!this.scene.textures.exists(n)){console.warn(n+" not found");var i=this.scene.make.renderTexture({width:2*e+4,height:2*t+4},!1),a=new xu.Z(this.scene,0,0,2*e,2*t,20,16579837,0).setOrigin(0,0);a.setStrokeStyle(4,3774208),i.draw(a,2,2),i.saveTexture(n)}var r=this.scene.add.image(0,0,n);r.setWorldSize(e,t),this.add(r),r.kill(),this.border=r},n.showBorder=function(){this.border.revive()},n.hideBorder=function(){this.border.kill()},n.setCropByViewport=function(e){this.icon.setCropByViewport(e),this.border.setCropByViewport(e),this.border1.setCropByViewport(e)},t}(vu.Z),_d=kd,Od=function(e){function t(t,n,i,a,r,s){var o;return void 0===r&&(r=0),void 0===s&&(s=0),(o=e.call(this,t)||this).margin=void 0,o.viewContainer=void 0,o.items=void 0,o.currentItemInteractive=void 0,o.itemsLength=void 0,o.currentX=void 0,o.offsetLeft=void 0,o.offsetRight=void 0,o.pointerDownX=void 0,o.pointerDownY=void 0,o.lastPointerX=void 0,o.canClickItem=void 0,o.pointerDown=void 0,o.handlePointerDown=function(e){var t=e.worldX,n=e.worldY;o.pointerDown=!0,o.pointerDownX=e.worldX,o.pointerDownY=e.worldY,o.lastPointerX=e.worldX,o.canClickItem=!0,o.items.forEach((function(i){var a=i.item,r=i.onClick;r&&a.getBounds().contains(t,n)&&(a.emit(Phaser.Input.Events.GAMEOBJECT_POINTER_DOWN,e),o.currentItemInteractive={item:a,onClick:r})}))},o.handlePointerMove=function(e){if(o.pointerDown){var t=e.worldX,n=e.worldY;if(Phaser.Math.Distance.Between(o.pointerDownX,o.pointerDownY,t,n)>15&&(o.canClickItem=!1),!o.canClickItem){o.viewContainer.x+=t-o.lastPointerX,o.viewContainer.x>0&&(o.viewContainer.x=0);var i=o.itemsLength-o.width+o.offsetLeft+o.offsetRight;o.viewContainer.x<-i&&(o.viewContainer.x=-i)}if(o.currentItemInteractive){var a=o.currentItemInteractive,r=a.item;a.onClick&&!r.getBounds().contains(t,n)&&(r.emit(Phaser.Input.Events.GAMEOBJECT_POINTER_OUT,e),o.currentItemInteractive=void 0)}o.items.forEach((function(i){var a=i.item,r=i.onClick,s=i.onUpdate;r&&a.getBounds().contains(t,n)&&(a.emit(Phaser.Input.Events.GAMEOBJECT_POINTER_MOVE,e),o.currentItemInteractive={item:a,onClick:r}),s&&s()})),o.lastPointerX=t}},o.handlePointerUp=function(e){o.pointerDown=!1;var t=e.worldX,n=e.worldY;o.items.forEach((function(i){var a=i.item,r=i.onClick;r&&a.getBounds().contains(t,n)&&(a.emit(Phaser.Input.Events.GAMEOBJECT_POINTER_UP,e),o.canClickItem&&GameCore.Utils.Valid.isFunction(r)&&r())})),o.currentItemInteractive=void 0},o.handlePointerOut=function(e){if(o.pointerDown=!1,o.currentItemInteractive){var t=o.currentItemInteractive,n=t.item;t.onClick&&(n.emit(Phaser.Input.Events.GAMEOBJECT_POINTER_OUT,e),o.currentItemInteractive=void 0)}o.currentItemInteractive=void 0},o.setSize(n,i),o.margin=a,o.items=[],o.canClickItem=!0,o.pointerDown=!1,o.itemsLength=0,o.offsetLeft=r,o.offsetRight=s,o.currentX=-n/2+r,o.viewContainer=t.make.container({}),o.add(o.viewContainer),o.setInteractive(),o.listenEvents(),o}(0,o.Z)(t,e);var n=t.prototype;return n.addDebug=function(){var e=new xu.Z(this.scene,0,0,this.width,this.height,0,0);this.add(e)},n.listenEvents=function(){this.on(Phaser.Input.Events.GAMEOBJECT_POINTER_DOWN,this.handlePointerDown),this.on(Phaser.Input.Events.GAMEOBJECT_POINTER_MOVE,this.handlePointerMove),this.on(Phaser.Input.Events.GAMEOBJECT_POINTER_UP,this.handlePointerUp),this.on(Phaser.Input.Events.GAMEOBJECT_POINTER_OUT,this.handlePointerOut)},n.addItem=function(e,t,n){this.items.push({item:e,onClick:t,onUpdate:n}),this.viewContainer.add(e);var i=this.currentX+e.width/2+this.margin;e.x=i,this.itemsLength+=e.width+2*this.margin,this.currentX=i+e.width/2+this.margin},n.updateChildren=function(){this.items.forEach((function(e){e.item,e.onClick;var t=e.onUpdate;t&&t()}))},t}(Phaser.GameObjects.Container),Rd=Od,Ld=vn.Z.GAMEPLAY_DEFAULT.KEY,Dd=vn.Z.THEME_PREVIEW,Bd=0,Nd=40,Md=375,Gd=180,Fd=10,Zd=20,Ud=20,Hd=function(e){function t(t){var n;return(n=e.call(this,t)||this).bg=void 0,n.tab=void 0,n.chooseContainers=void 0,n.currentIdx=0,n.backgroundPreView=void 0,n.cardFacePreView=void 0,n.cardBackPreview=void 0,n.createBackground(),n.createTitle(),n.createTab(),n.createChooseContainer(),n.createCloseButton(),t.add.existing((0,Ua.Z)(n)),n}(0,o.Z)(t,e);var n=t.prototype;return n.updateContainer=function(){this.chooseContainers[this.tab.currentIdx||0].updateChildren()},n.createBackground=function(){var e=new xu.Z(this.scene,0,0,375,250,{tl:20,tr:20,bl:20,br:20},16579837),t=this.scene.add.line(0,0,0,0,e.width-40,0,3774208);t.setLineWidth(.5),Phaser.Display.Align.In.TopCenter(t,e,0,-90),this.add([e,t]),this.bg=e,this.setSize(e.width,e.height),this.bg.setInteractive()},n.createTitle=function(){var e=this.scene.make.bitmapText({font:No.Z.BOLD.KEY,size:this.scene.fontSize(20),text:"theme",origin:{x:.5,y:.5}});e.setMaxSize(300,40),e.setTint(1907997),this.add(e),Phaser.Display.Align.In.TopCenter(e,this,0,-12)},n.createTab=function(){var e,t=this;this.tab=new Pd(this.scene,303,30,3),this.add(this.tab),Phaser.Display.Align.In.TopCenter(this.tab,this,0,-45);var n=De()(e=["background","cardFace","cardBack"]).call(e,(function(e,n){var i=t.scene.make.bitmapText({font:No.Z.PRIMARY.KEY,size:t.scene.fontSize(14),text:e,origin:{x:.5,y:.5}});return i.setCenterAlign(),i.setMaxSize(98,30,!0),n>0&&i.setTint(3774208),i}));this.tab.addLabels(n),this.tab.callback=function(e){n.forEach((function(t,n){return t.setTint(e==n?16579837:3774208)}));var i=t.currentIdx<e?375:-375,a=t.currentIdx;t.scene.tweens.add({targets:t.chooseContainers[t.currentIdx],x:t.currentIdx<e?-375:375,alpha:0,duration:200,onUpdate:function(){t.chooseContainers[a].updateChildren()},ease:Phaser.Math.Easing.Sine.InOut}),t.scene.tweens.add({targets:t.chooseContainers[e],x:{from:i,to:0},alpha:1,duration:200,onUpdate:function(){t.chooseContainers[e].updateChildren()},ease:Phaser.Math.Easing.Sine.InOut}),t.currentIdx=e}},n.createChooseContainer=function(){this.chooseContainers=[],this.createBackgroundChoose(),this.createCardFaceChoose(),this.createCardBackChoose(),this.chooseContainers[1].setAlpha(0),this.chooseContainers[2].setAlpha(0)},n.createBackgroundChoose=function(){var e=this,t=new Rd(this.scene,Md,Gd,Fd,Zd,Ud);t.setPosition(Bd,Nd),this.add(t);for(var n=[],i=this.scene.theme.getThemePreview().Background,a=0;a<5;a++){var r=i[a]||"blank",s=new _d(this.scene,72,112,Dd.KEY,r);s.name="Background",n.push(s)}n.forEach((function(a,r){r<i.length&&(a.onClick=function(){},a.disableInteractive()),t.addItem(a,(function(){n.forEach((function(e){return e.hideBorder()})),a.showBorder(),e.scene instanceof om&&e.scene.themeHandler.changeBackground(r)}),(function(){var t=e.getViewport();a.setCropByViewport(t)}))})),this.chooseContainers.push(t),this.backgroundPreView=n},n.createCardFaceChoose=function(){var e=this,t=new Rd(this.scene,Md,Gd,Fd,Zd,Ud);t.setPosition(Bd,Nd),this.add(t);for(var n=[],i=this.scene.theme.getThemePreview().CardFace,a=0;a<3;a++){var r=i[a]||"blank",s=new _d(this.scene,108,112,Dd.KEY,r);s.name="CardFace",n.push(s)}n.forEach((function(a,r){r<i.length&&(a.onClick=function(){},a.disableInteractive(),t.addItem(a,(function(){n.forEach((function(e){return e.hideBorder()})),a.showBorder(),e.scene instanceof om&&e.scene.themeHandler.changeCardFace(r)}),(function(){var t=e.getViewport();a.setCropByViewport(t)})))})),this.chooseContainers.push(t),this.cardFacePreView=n},n.createCardBackChoose=function(){var e=this,t=new Rd(this.scene,Md,Gd,Fd,Zd,Ud);t.setPosition(Bd,Nd),this.add(t);for(var n=[],i=this.scene.theme.getThemePreview().CardBack,a=0;a<5;a++){var r=i[a]||"blank",s=new _d(this.scene,72,112,Dd.KEY,r);s.name="CardBack",n.push(s)}n.forEach((function(a,r){r<i.length&&(a.onClick=function(){},a.disableInteractive(),t.addItem(a,(function(){n.forEach((function(e){return e.hideBorder()})),a.showBorder(),e.scene instanceof om&&e.scene.themeHandler.changeCardBack(r)}),(function(){var t=e.getViewport();a.setCropByViewport(t)})))})),this.chooseContainers.push(t),this.cardBackPreview=n},n.createCloseButton=function(){var e=this,t=new vu.Z(this.scene,40,40);t.setName("Close"),t.onClick=function(){e.scene.screen.close(qa.o4.THEME_SCREEN)};var n=this.scene.add.image(0,0,Ld,"ic_close_gray");n.setWorldSize(24,24),n.setTint(8750210),t.add(n),Phaser.Display.Align.In.TopRight(t,this.bg,-4,-4),this.add([t])},n.getViewport=function(){var e=this.getWorldPosition();return{x:e.x,y:e.y+Nd,width:Md-Zd-Ud,height:Gd}},t}(Phaser.GameObjects.Container),Wd=Hd,zd=function(e){function t(t,n,i,a){var r;return(r=e.call(this,t,n,i,a)||this).scene=void 0,r.slideInAnimation=void 0,r.fadeInAnimation=void 0,r.fadeOutAnimation=void 0,r.themeContainer=void 0,r.scene=t,r.setDepth(qa.Ks.POPUP),r.themeContainer=new Wd(t),r.add(r.themeContainer),r.background.setTint(1315862),r.background.setAlpha(.3),r}(0,o.Z)(t,e);var n=t.prototype;return n.open=function(){var t=this;e.prototype.open.call(this),this.themeContainer.setAlpha(1),this.scene.themeHandler.loadAllBackgrounds(),this.scene.themeHandler.loadAllCardAtlas(),this.updateSelected(),this.background.setInteractive(),this.zone.once(Phaser.Input.Events.POINTER_DOWN,(function(){return t.scene.screen.close(qa.o4.THEME_SCREEN)})),this.themeContainer.updateContainer(),this.runOpenAnimation()},n.updateSelected=function(){var e=this.scene.theme.getCurrentIdxConfig(),t=e.backgroundIdx,n=e.cardFaceIdx,i=e.cardBackIdx;this.themeContainer.backgroundPreView[t].showBorder(),this.themeContainer.cardFacePreView[n].showBorder(),this.themeContainer.cardBackPreview[i].showBorder()},n.close=function(){this.runCloseAnimation()},n.runOpenAnimation=function(){var e,t,n=this.scene.ads.getBannerHeight();null!=(e=this.slideInAnimation)&&null!=(t=e.tween)&&t.isPlaying()||(this.scene.audio.playSound(Ja.Z.POPUP_SHOW),this.slideInAnimation||(this.slideInAnimation=new Ao.Z({targets:[this.themeContainer],props:{y:{from:this.height/2,to:this.height/2-this.themeContainer.height/2-n-10,ease:Phaser.Math.Easing.Sine.Out}},duration:300})),this.fadeInAnimation||(this.fadeInAnimation=new Fc.Z({ease:Phaser.Math.Easing.Sine.InOut,targets:[this],duration:300})),this.slideInAnimation.play(),this.fadeInAnimation.play())},n.runCloseAnimation=function(){var t,n,i=this;null!=(t=this.fadeOutAnimation)&&null!=(n=t.tween)&&n.isPlaying()||(this.scene.audio.playSound(Ja.Z.POPUP_OFF),this.fadeOutAnimation||(this.fadeOutAnimation=new yh.Z({targets:[this],props:{alpha:0},duration:300,onComplete:function(){e.prototype.close.call(i)}})),this.fadeOutAnimation.play())},t}(GameCore.Screen),Yd=zd,Vd=n(680),Kd=function(e){function t(t,n,i,a){var r;return(r=e.call(this,t,n,i,a)||this).slideInAnimation=void 0,r.fadeOutAnimation=void 0,r.howToPlayContainer=void 0,r.setDepth(qa.Ks.POPUP),r.howToPlayContainer=new Vd.Z(t),r.add(r.howToPlayContainer),r.background.setTint(1315862),r.background.setAlpha(.5),r.background.setInteractive(),r}(0,o.Z)(t,e);var n=t.prototype;return n.open=function(){e.prototype.open.call(this),this.howToPlayContainer.selectStep(0),this.scene.analytics.event(mn._.TUTORIAL_BEGIN),this.runOpenAnimation()},n.close=function(){this.runCloseAnimation()},n.runOpenAnimation=function(){var e,t;null!=(e=this.slideInAnimation)&&null!=(t=e.tween)&&t.isPlaying()||(this.scene.audio.playSound(Ja.Z.POPUP_SHOW),this.slideInAnimation||(this.slideInAnimation=new Fc.Z({targets:[this],duration:300,ease:Phaser.Math.Easing.Sine.InOut})),this.slideInAnimation.play())},n.runCloseAnimation=function(){var t,n,i=this;null!=(t=this.fadeOutAnimation)&&null!=(n=t.tween)&&n.isPlaying()||(this.scene.audio.playSound(Ja.Z.POPUP_OFF),this.fadeOutAnimation||(this.fadeOutAnimation=new yh.Z({targets:[this],props:{alpha:0},duration:300,onComplete:function(){e.prototype.close.call(i)}})),this.fadeOutAnimation.play())},t}(GameCore.Screen),jd=Kd,Xd=function(e){function t(t){var n;return(n=e.call(this,t)||this).icon=void 0,n.label=void 0,n.value=void 0,n.setSize(271,24),n.createIcon(),n.createLabel(),n.createValue(),t.add.existing((0,Ua.Z)(n)),n}(0,o.Z)(t,e);var n=t.prototype;return n.setIcon=function(e,t){this.icon.setTexture(e,t),this.icon.setWorldSize(24,24)},n.setLabel=function(e){this.label.setText(e)},n.setValue=function(e){this.value.setText(e)},n.createIcon=function(){var e=this.scene.add.image(0,0,"");e.setWorldSize(24,24),e.setTint(16579837),this.add(e),this.icon=e},n.createLabel=function(){var e=this.scene.make.bitmapText({font:No.Z.PRIMARY.KEY,size:this.scene.fontSize(16),text:"",origin:{x:0,y:.5}});e.setMaxSize(150,20,!0),e.setTint(16579837),this.add(e),this.label=e},n.createValue=function(){var e=this.scene.make.bitmapText({font:No.Z.BOLD.KEY,size:this.scene.fontSize(16),text:"",origin:{x:1,y:.5}});e.setIgnoreLanguage(),e.setTint(16579837),e.setRightAlign(),this.add(e),this.value=e},n.alignProperties=function(){Phaser.Display.Align.In.LeftCenter(this.icon,this),Phaser.Display.Align.To.RightCenter(this.label,this.icon,12),Phaser.Display.Align.In.RightCenter(this.value,this)},t}(Phaser.GameObjects.Container),qd=Xd,Jd=vn.Z.GAMEPLAY_DEFAULT,Qd=Jd.KEY,$d=Jd.FRAME,ef=function(e){function t(t,n,i,a){var r;return void 0===n&&(n=8),void 0===i&&(i="newGame"),void 0===a&&(a=$d.ADD_SQUARE),(r=e.call(this,t)||this).icon=void 0,r.text=void 0,r.iconTextPadding=void 0,r.labelText=void 0,r.iconFrame=void 0,r.iconTextPadding=n,r.labelText=i,r.iconFrame=a,r.createIcon(),r.createLabelText(),r.updateContainerSize(),r.alignIcon(),r.alignText(),r.text.on("textChanged",(function(){r.updateContainerSize(),r.alignIcon(),r.alignText()})),r}(0,o.Z)(t,e);var n=t.prototype;return n.getIcon=function(){return this.icon},n.getText=function(){return this.text},n.clearTint=function(){this.icon.clearTint(),this.text.clearTint()},n.setMaxSizeText=function(e,t,n,i){this.text.setMaxSize(e,t,n,i)},n.createIcon=function(){this.icon=this.scene.add.image(0,0,Qd,this.iconFrame),this.icon.setWorldSize(20,20),this.icon.setTint(43282),this.add(this.icon)},n.alignIcon=function(){Phaser.Display.Align.In.LeftCenter(this.icon,this)},n.createLabelText=function(){this.text=this.scene.make.bitmapText({font:No.Z.PRIMARY.KEY,size:this.scene.fontSize(16),text:this.labelText,origin:{x:.5,y:.5}}),this.text.setMaxSize(100,30,!0,this.scene.fontSize(16)),this.text.setTint(43282),this.add(this.text)},n.alignText=function(){Phaser.Display.Align.In.RightCenter(this.text,this,0,0)},n.updateContainerSize=function(){this.setSize(this.icon.width+this.iconTextPadding+this.text.width,this.icon.height>this.text.height?this.icon.height:this.text.height)},t}(Phaser.GameObjects.Container),tf=vn.Z.GAMEPLAY_DEFAULT,nf=tf.KEY,af=tf.FRAME,rf=function(e){function t(t){var n;return(n=e.call(this,t)||this).bg=void 0,n.score=void 0,n.time=void 0,n.bestTime=void 0,n.moves=void 0,n.draw=void 0,n.lines=[],n.buttons=[],n.createBackground(),n.createTitle(),n.createStats(),n.createNewGameButton(),n.createDevButtons(),t.add.existing((0,Ua.Z)(n)),n}(0,o.Z)(t,e);var n=t.prototype;return n.setScore=function(e){this.score.setValue(e)},n.setWinningTime=function(e){this.time.setValue(e)},n.setBestWinningTime=function(e){this.bestTime.setValue(e)},n.setMoves=function(e){this.moves.setValue(e)},n.setDraw=function(e){this.draw.setText(e)},n.createBackground=function(){this.setSize(343,374);var e=new Cu(this.scene,{key:"_awesome",radius:6,border:24,width:343,height:374});this.bg=e,this.add(e)},n.createTitle=function(){var e=this.scene.make.bitmapText({font:No.Z.BOLD.KEY,size:this.scene.fontSize(24),text:"awesome",origin:{x:.5,y:.5}});e.setMaxSize(300,35),e.setTint(16777215),this.add(e),Phaser.Display.Align.In.TopCenter(e,this,0,-20);var t=this.scene.make.bitmapText({font:No.Z.PRIMARY.KEY,size:this.scene.fontSize(16),text:"standardMode",origin:{x:.5,y:.5}});t.setMaxSize(300,20),t.setTint(16777215),this.draw=t,this.add([t]),Phaser.Display.Align.To.BottomCenter(t,e,0,8)},n.createStats=function(){var e=[],t=new qd(this.scene);t.setIcon(nf,af.MEDAL_STAR),t.setLabel("score"),t.setValue("687"),this.score=t,e.push(t);var n=new qd(this.scene);n.setIcon(nf,af.ARROW_SWAP_HORIZONTAL),n.setLabel("moves"),n.setValue("798"),this.moves=n,e.push(n);var i=new qd(this.scene);i.setIcon(nf,af.TIMER),i.setLabel("time"),i.setValue("09:48"),this.time=i,e.push(i);var a=new qd(this.scene);a.setIcon(nf,af.CUP),a.setLabel("bestTime"),a.setValue("05:30"),this.bestTime=a,e.push(a),this.add(e);for(var r=0;r<e.length;r++){var s=e[r];if(s.alignProperties(),Phaser.Display.Align.In.TopCenter(s,this,0,-(50*r+112)),r==e.length-1)break;var o=this.scene.add.line(0,0,0,0,271,0,16579837,.2);this.add(o),this.lines.push(o),Phaser.Display.Align.To.BottomCenter(o,s,0,12)}},n.createNewGameButton=function(){var e=this,t=new bh.Z(this.scene,143.5,48,16,16777215);t.onClick=(0,s.Z)(h().mark((function t(){return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.scene.screen.close(qa.o4.VICTORY_SCREEN),!(e.scene instanceof om)){t.next=6;break}return t.next=4,e.scene.gameplay.handleShowInterstitialAd();case 4:return t.next=6,e.scene.handlePlaySingle();case 6:case"end":return t.stop()}}),t)}))),t.setName("NewGame");var n=new ef(this.scene);t.add(n).setSize(143.5,48),this.add([t]),this.buttons.push(t),Phaser.Display.Align.In.BottomCenter(t,this,0,-18),new gc.Z({targets:[t],duration:1e3,props:{scale:"*=1.05"}}).play()},n.createDevButtons=function(){GameCore.Utils.Valid.isDebugger()&&this.createCloseButton()},n.createCloseButton=function(){var e=this,t=new vu.Z(this.scene,40,40),n=this.scene.add.image(0,0,nf,af.IC_BG_OFF);n.setWorldSize(40,40);var i=this.scene.make.bitmapText({font:No.Z.PRIMARY.KEY,size:this.scene.fontSize(10),text:"Close",origin:{x:.5,y:.5}});i.setCenterAlign(),t.add([n,i]),this.add(t),Phaser.Display.Align.In.BottomLeft(t,this,0,-200),t.onClick=function(){e.scene.screen.close(qa.o4.VICTORY_SCREEN)}},n.hideContent=function(){[this.score,this.moves,this.time,this.bestTime].forEach((function(e){return e.setAlpha(0)})),this.lines.forEach((function(e){e.setAlpha(0),e.scaleX=0})),this.buttons.forEach((function(e){e.setAlpha(0)}))},n.runEntranceAnimationButtons=function(){var e=(0,s.Z)(h().mark((function e(){var t,n,i=this;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=De()(t=this.buttons).call(t,(function(e){return new(l())((function(t){i.scene.add.tween({targets:[e],alpha:1,duration:200,onComplete:function(){e.setDisabled(!1),t()}})}))})),e.next=3,l().all(n);case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.runEntranceAnimationRows=function(){var e=(0,s.Z)(h().mark((function e(){var t,n,i=this;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[this.score,this.moves,this.time,this.bestTime],200,n=De()(t).call(t,(function(e,t){return new(l())((function(n){i.scene.add.tween({targets:[e],duration:200,delay:200*t/2,ease:Phaser.Math.Easing.Sine.Out,props:{alpha:{from:0,to:1},y:{from:e.y+e.height/2,to:e.y}},onComplete:n})}))})),e.next=5,l().all(n);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.runEntranceAnimationLines=function(){var e=(0,s.Z)(h().mark((function e(){var t,n,i=this;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return 200,n=De()(t=this.lines).call(t,(function(e,t){return new(l())((function(n){i.scene.add.tween({targets:[e],duration:200,delay:200*t/2,props:{alpha:{from:0,to:1},scaleX:{from:0,to:1}},onComplete:n})}))})),e.next=4,l().all(n);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.runEntranceAnimationRowsLines=function(){var e=(0,s.Z)(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l().all([this.runEntranceAnimationRows(),this.runEntranceAnimationLines()]);case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.runEntranceAnimation=function(){var e=(0,s.Z)(h().mark((function e(){var t;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.runEntranceAnimationRowsLines();case 2:return t=this.scene,e.next=5,t.gameplay.finishGame();case 5:return e.next=7,this.runEntranceAnimationButtons();case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),t}(Phaser.GameObjects.Container),sf=rf,of=vn.Z.GAMEPLAY_DEFAULT,cf=of.KEY,lf=of.FRAME,uf=23.5,hf=47,df=68.5,ff={AXIS:0,FIRST_FROM_LEFT:uf,SECOND_FROM_LEFT:hf,THIRD_FROM_LEFT:df,FIRST_FROM_RIGHT:-uf,SECOND_FROM_RIGHT:-hf,THIRD_FROM_RIGHT:-df},pf=function(e){function t(t){var n;return(n=e.call(this,t)||this).beamAxis=void 0,n.beamFirstFromLeft=void 0,n.beamSecondFromLeft=void 0,n.beamThirdFromLeft=void 0,n.beamFirstFromRight=void 0,n.beamSecondFromRight=void 0,n.beamThirdFromRight=void 0,n.pivot=void 0,n.setSize(375,295),n.createBeamsPivot(),n.createBeams(),n.alignBeams(),n.playAnimation(),n}(0,o.Z)(t,e);var n=t.prototype;return n.rotateBeamToAngleInDegree=function(e,t){Phaser.Actions.RotateAroundDistance([e],this.pivot,t*Math.PI/180,e.height/2+30);var n=180*Math.atan2(e.y-this.pivot.y,e.x-this.pivot.x)/Math.PI;e.angle=n+90+180},n.createBeamsPivot=function(){this.pivot=this.scene.add.image(0,0,cf,lf.ADD_SQUARE),this.add(this.pivot),this.pivot.kill(),Phaser.Display.Align.In.Center(this.pivot,this,0,-this.height/2-30)},n.createBeams=function(){this.beamAxis=this.scene.add.image(0,0,cf,lf.BEAM.AXIS),this.beamFirstFromLeft=this.scene.add.image(0,0,cf,lf.BEAM.AXIS),this.beamSecondFromLeft=this.scene.add.image(0,0,cf,lf.BEAM.AXIS),this.beamThirdFromLeft=this.scene.add.image(0,0,cf,lf.BEAM.AXIS),this.beamFirstFromRight=this.scene.add.image(0,0,cf,lf.BEAM.AXIS),this.beamSecondFromRight=this.scene.add.image(0,0,cf,lf.BEAM.AXIS),this.beamThirdFromRight=this.scene.add.image(0,0,cf,lf.BEAM.AXIS);var e=[this.beamAxis,this.beamFirstFromLeft,this.beamSecondFromLeft,this.beamThirdFromLeft,this.beamFirstFromRight,this.beamSecondFromRight,this.beamThirdFromRight];this.setWorldSizeImages(52,295,e),e.forEach((function(e){e.setAlpha(.6)})),this.add(e)},n.alignBeams=function(){this.rotateBeamToAngleInDegree(this.beamAxis,ff.AXIS),this.rotateBeamToAngleInDegree(this.beamFirstFromLeft,ff.FIRST_FROM_LEFT),this.rotateBeamToAngleInDegree(this.beamSecondFromLeft,ff.SECOND_FROM_LEFT),this.rotateBeamToAngleInDegree(this.beamThirdFromLeft,ff.THIRD_FROM_LEFT),this.rotateBeamToAngleInDegree(this.beamFirstFromRight,ff.FIRST_FROM_RIGHT),this.rotateBeamToAngleInDegree(this.beamSecondFromRight,ff.SECOND_FROM_RIGHT),this.rotateBeamToAngleInDegree(this.beamThirdFromRight,ff.THIRD_FROM_RIGHT)},n.setWorldSizeImages=function(e,t,n){n.forEach((function(n){return n.setWorldSize(e,t)}))},n.playAnimation=function(){var e=this;[this.beamFirstFromLeft,this.beamSecondFromLeft,this.beamThirdFromLeft,this.beamAxis,this.beamThirdFromRight,this.beamSecondFromRight,this.beamFirstFromRight].forEach((function(t,n){e.scene.tweens.add({targets:t,props:{alpha:{from:.2,to:.6}},duration:700,delay:700*n,repeat:-1,yoyo:!0})}))},n.addBackground=function(){var e="win-beams-background";if(!this.scene.textures.exists(e)){var t=this.width,n=this.height,i=this.scene.add.graphics();i.fillStyle(65280,.2),i.fillRect(0,0,t,n),i.generateTexture(e,t,n),i.destroy()}var a=this.scene.add.image(0,0,e);this.add(a)},t}(Phaser.GameObjects.Container),gf=n(424),mf=n.n(gf);function vf(e,t){var n="undefined"!==typeof I()&&P()(e)||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){var n;if(!e)return;if("string"===typeof e)return yf(e,t);var i=S()(n=Object.prototype.toString.call(e)).call(n,8,-1);"Object"===i&&e.constructor&&(i=e.constructor.name);if("Map"===i||"Set"===i)return w()(e);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return yf(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var i=0;return function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function yf(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var bf=vn.Z.GAMEPLAY_DEFAULT,Af=bf.KEY,Ef=bf.FRAME,Sf=Ef.FLAG.LEFT,Tf=function(e){function t(t){var n;return(n=e.call(this,t)||this).flags=[],n.string=void 0,n.tweens=[],n.flagsData=[],n.setSize(230.5,136),n.createString(),n.createFlags(),n}(0,o.Z)(t,e);var n=t.prototype;return n.createFlags=function(){var e=this,t=this.scene.add.image(0,0,Af,Sf+"1");t.setWorldSize(35.5,15.5),Phaser.Display.Align.In.TopLeft(t,this,-180.5,0);var n=this.scene.add.image(0,0,Af,Sf+"2");n.setWorldSize(33.5,37),Phaser.Display.Align.In.TopLeft(n,this,-153,-2);var i=this.scene.add.image(0,0,Af,Sf+"3");i.setWorldSize(32,38),Phaser.Display.Align.In.TopLeft(i,this,-124.5,-23);var a=this.scene.add.image(0,0,Af,Sf+"4");a.setWorldSize(30,38.5),Phaser.Display.Align.In.TopLeft(a,this,-94,-40.25);var r=this.scene.add.image(0,0,Af,Sf+"5");r.setWorldSize(28,38.5),Phaser.Display.Align.In.TopLeft(r,this,-63.235,-56);var s=this.scene.add.image(0,0,Af,Sf+"6");s.setWorldSize(28.5,38.5),Phaser.Display.Align.In.TopLeft(s,this,-31.07,-68.5);var o=this.scene.add.image(0,0,Af,Sf+"7");o.setWorldSize(29.5,38.5),Phaser.Display.Align.In.TopLeft(o,this,2,-79),this.flags=[t,n,i,a,r,s,o],this.add(mf()(this)),mf()(this).forEach((function(t){var n=t.x,i=t.y,a=t.angle;e.flagsData.push({x:n,y:i,angle:a})}))},n.createString=function(){this.string=this.scene.add.image(0,0,Af,Ef.STRING.LEFT),this.string.setWorldSize(215.5,96.5),this.add(this.string),Phaser.Display.Align.In.TopLeft(this.string,this)},n.addBackground=function(){var e="lb-background";if(!this.scene.textures.exists(e)){var t=this.width,n=this.height,i=this.scene.add.graphics();i.fillStyle(65280,.2),i.fillRect(0,0,t,n),i.generateTexture(e,t,n),i.destroy()}var a=this.scene.add.image(0,0,e);this.add(a)},n.playWavingAnimation=function(){var e,t=this;if(!(this.tweens.length>0)){for(var n,i=vf(this.tweens);!(n=i()).done;){if(n.value.isPlaying())return}De()(e=mf()(this)).call(e,(function(e,n){var i=t.flagsData[n],a=i.x,r=i.y,s=i.angle;t.scene.add.tween({targets:e,duration:300,props:{x:{from:a,to:a-2},y:{from:r,to:r-1},angle:{from:s,to:s+5}},yoyo:!0,delay:50*n,repeat:-1})}))}},n.stopWavingAnimation=function(){var e=this;if(0!==this.tweens.length){for(var t,n=vf(this.tweens);!(t=n()).done;){t.value.stop()}this.tweens=[],mf()(this).forEach((function(t,n){e.scene.tweens.killTweensOf(t),t.x=e.flagsData[n].x,t.y=e.flagsData[n].y,t.angle=e.flagsData[n].angle}))}},t}(Phaser.GameObjects.Container);function wf(e,t){var n="undefined"!==typeof I()&&P()(e)||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){var n;if(!e)return;if("string"===typeof e)return Cf(e,t);var i=S()(n=Object.prototype.toString.call(e)).call(n,8,-1);"Object"===i&&e.constructor&&(i=e.constructor.name);if("Map"===i||"Set"===i)return w()(e);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return Cf(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var i=0;return function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Cf(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var If=vn.Z.GAMEPLAY_DEFAULT,xf=If.KEY,Pf=If.FRAME,kf=Pf.FLAG.RIGHT,_f=function(e){function t(t){var n;return(n=e.call(this,t)||this).flags=[],n.string=void 0,n.tweens=[],n.flagsData=[],n.setSize(218,123.5),n.createString(),n.createFlags(),n}(0,o.Z)(t,e);var n=t.prototype;return n.createFlags=function(){var e=this,t=this.scene.add.image(0,0,xf,kf+"1");t.setWorldSize(30.5,26),this.alignTopLeft(t,44.5,26);var n=this.scene.add.image(0,0,xf,kf+"2");n.setWorldSize(29,32.5),this.alignTopLeft(n,93,60.5);var i=this.scene.add.image(0,0,xf,kf+"3");i.setWorldSize(27,33),this.alignTopLeft(i,145.5,95.5);var a=this.scene.add.image(0,0,xf,kf+"4");a.setWorldSize(25.5,33.5),this.alignTopLeft(a,199,124.5);var r=this.scene.add.image(0,0,xf,kf+"5");r.setWorldSize(24,33.5),this.alignTopLeft(r,256.5,152);var s=this.scene.add.image(0,0,xf,kf+"6");s.setWorldSize(25,33.5),this.alignTopLeft(s,311,173.5);var o=this.scene.add.image(0,0,xf,kf+"7");o.setWorldSize(25.5,33),this.alignTopLeft(o,367.5,189.5);var c=this.scene.add.image(0,0,xf,kf+"8");c.setWorldSize(25.5,32),this.alignTopLeft(c,418,201,-3),this.flags=[t,n,i,a,r,s,o,c],this.add(mf()(this)),mf()(this).forEach((function(t){var n=t.x,i=t.y,a=t.angle;e.flagsData.push({x:n,y:i,angle:a})}))},n.createString=function(){this.string=this.scene.add.image(0,0,xf,Pf.STRING.RIGHT),this.string.setWorldSize(209,91.5),this.add(this.string),Phaser.Display.Align.In.TopRight(this.string,this)},n.alignTopLeft=function(e,t,n,i,a){void 0===i&&(i=0),void 0===a&&(a=0),Phaser.Display.Align.In.TopLeft(e,this,-(t-e.width)/2+i,-(n-e.height)/2+a)},n.addBackground=function(){var e="rb-background";if(!this.scene.textures.exists(e)){var t=this.width,n=this.height,i=this.scene.add.graphics();i.fillStyle(65280,.2),i.fillRect(0,0,t,n),i.generateTexture(e,t,n),i.destroy()}var a=this.scene.add.image(0,0,e);this.add(a)},n.playWavingAnimation=function(){var e,t=this;if(!(this.tweens.length>0)){for(var n,i=wf(this.tweens);!(n=i()).done;){if(n.value.isPlaying())return}De()(e=mf()(this)).call(e,(function(e,n){var i=t.flagsData[n],a=i.x,r=i.y,s=i.angle,o=t.scene.add.tween({targets:e,duration:300,props:{x:a+2,y:r-1,angle:s-5},yoyo:!0,delay:50*n,repeat:-1});t.tweens.push(o)}))}},n.stopWavingAnimation=function(){var e=this;if(0!==this.tweens.length){for(var t,n=wf(this.tweens);!(t=n()).done;){t.value.stop()}this.tweens=[],mf()(this).forEach((function(t,n){e.scene.tweens.killTweensOf(t),t.x=e.flagsData[n].x,t.y=e.flagsData[n].y,t.angle=e.flagsData[n].angle}))}},t}(Phaser.GameObjects.Container),Of=function(e){function t(t){var n;return(n=e.call(this,t)||this).leftBunting=void 0,n.rightBunting=void 0,n.leftBuntingInitialPosition=void 0,n.rightBuntingInitialPosition=void 0,n.setSize(375,136),n.createLeftBunting(),n.createRightBunting(),n.moveBelow(n.leftBunting,n.rightBunting),n.leftBuntingInitialPosition={x:n.leftBunting.x,y:n.leftBunting.y},n.rightBuntingInitialPosition={x:n.rightBunting.x,y:n.rightBunting.y},n}(0,o.Z)(t,e);var n=t.prototype;return n.createLeftBunting=function(){var e=new Tf(this.scene);this.add(e),Phaser.Display.Align.In.TopLeft(e,this),this.leftBunting=e},n.createRightBunting=function(){var e=new _f(this.scene);this.add(e),Phaser.Display.Align.In.TopRight(e,this),this.rightBunting=e},n.hideContent=function(){this.leftBunting.setPosition(this.leftBuntingInitialPosition.x-50,this.leftBuntingInitialPosition.y+-100),this.rightBunting.setPosition(this.rightBuntingInitialPosition.x+50,this.rightBuntingInitialPosition.y+-100)},n.runEntranceAnimation=function(){var e=(0,s.Z)(h().mark((function e(){var t,n,i=this;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return 50,-100,t=new(l())((function(e){new Ao.Z({targets:[i.leftBunting],ease:Phaser.Math.Easing.Back.Out,props:{y:{from:i.leftBuntingInitialPosition.y+-100,to:i.leftBuntingInitialPosition.y},x:{from:i.leftBuntingInitialPosition.x-50,to:i.leftBuntingInitialPosition.x}},duration:300,onComplete:e}).play()})),n=new(l())((function(e){new Ao.Z({targets:[i.rightBunting],ease:Phaser.Math.Easing.Back.Out,props:{y:{from:i.rightBuntingInitialPosition.y+-100,to:i.rightBuntingInitialPosition.y},x:{from:i.rightBuntingInitialPosition.x+50,to:i.rightBuntingInitialPosition.x}},duration:300,onComplete:e}).play()})),e.next=6,l().all([t,n]);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),n.playWavingAnimation=function(){this.leftBunting.playWavingAnimation(),this.rightBunting.playWavingAnimation()},n.stopWavingAnimation=function(){this.leftBunting.stopWavingAnimation(),this.rightBunting.stopWavingAnimation()},t}(Phaser.GameObjects.Container),Rf={WIDTH:303,HEIGHT:126},Lf={WIDTH:375,HEIGHT:68},Df=4937547,Bf=.5,Nf={OutOfMoves:{SCREEN:"OUT_OF_MOVES_SCREEN_FILTER",POPUP:"OUT_OF_MOVES_POPUP_FILTER"},Challenge:{SCREEN:"CHALLENGE_SCREEN_FILTER",POPUP:"CHALLENGE_POPUP_FILTER"}},Mf=function(e){function t(t,n,i,a,r,s){var o;return(o=e.call(this,t,n,i)||this).icon=void 0,o.text=void 0,o.createIcon(a,r),o.createText(s),o.add([o.icon,o.text]),o}(0,o.Z)(t,e);var n=t.prototype;return n.createIcon=function(e,t){this.icon=this.scene.add.image(0,-10,e,t).setTint(16579837),this.icon.setWorldSize(28,28)},n.createText=function(e){this.text=this.scene.make.bitmapText({font:No.Z.PRIMARY.KEY,size:this.scene.fontSize(Ku.FOOTER),text:e,origin:{x:.5,y:.5},y:14}).setTint(13355979),this.text.setMaxSize(100,20,!0)},t}(vu.Z),Gf=vn.Z.GAMEPLAY_DEFAULT,Ff=Gf.KEY,Zf=Gf.FRAME,Uf=function(e){function t(t){var n;return(n=e.call(this,t,40,40,Ff,Zf.IC_SETTINGS,"settings")||this).setName("Setting"),n.onClick=function(){t.screen.open(qa.o4.SETTINGS_SCREEN)},n}return(0,o.Z)(t,e),t}(Mf),Hf=vn.Z.GAMEPLAY_DEFAULT,Wf=Hf.KEY,zf=Hf.FRAME,Yf=function(e){function t(t,n){var i;return void 0===n&&(n=qa.o4.TOURNAMENTS_SCREEN),(i=e.call(this,t,40,40,Wf,zf.CUP,"tournaments")||this).setName("Tournaments"),i}return(0,o.Z)(t,e),t}(Mf),Vf=vn.Z.GAMEPLAY_DEFAULT,Kf=Vf.KEY,jf=Vf.FRAME,Xf=function(e){function t(t){var n;return(n=e.call(this,t,40,40,Kf,jf.ADD_SQUARE,"game")||this).setName("Play"),n.onClick=function(){t.screen.open(qa.o4.PLAY_SCREEN)},n}return(0,o.Z)(t,e),t}(Mf),qf=Lf,Jf=qf.WIDTH,Qf=qf.HEIGHT,$f=function(e){function t(t,n,i){var a;return void 0===n&&(n=!1),void 0===i&&(i=qa.o4.TOURNAMENTS_SCREEN),(a=e.call(this,t)||this).scene=void 0,a.settingsButton=void 0,a.playBtn=void 0,a.tournamentsButton=void 0,a.buttons=[],a.parentScreenKeys=void 0,a.scene=t,a.parentScreenKeys=i,a.setSize(Jf,Qf),n&&a.createBackgroundMask(),a.createBackground(),a.createButtons(),a}(0,o.Z)(t,e);var n=t.prototype;return n.createBackgroundMask=function(){var e=this.scene.world.getPixelRatio(),t=this.scene.gameZone,n=t.width,i=t.height,a=this.scene.ads.getBannerHeight(),r=this.scene.theme.getCurrentThemeConfig().backgroundKey,s=this.scene.add.image(0,a+this.height/2,r);s.setOrigin(.5,1),s.setWorldSize(n,i),s.setCrop(0,667*e-(76+a)/s.scaleY,this.width*e,i*e),s.setAlpha(1),this.add(s),this.scene.events.on($s.BACKGROUND_CHANGED,(function(e){s.setTexture(e)}))},n.createBackground=function(){var e=this.scene.gameZone.width>Jf?20:0,t=new xu.Z(this.scene,0,0,this.width,this.height,e,2039583,.4);this.add(t),t.removeInteractive()},n.createButtons=function(){this.buttons=[],this.createSettingsButton(),this.createPlayBtn(),this.alignButtons()},n.createSettingsButton=function(){this.settingsButton=new Uf(this.scene),this.add(this.settingsButton),this.buttons.push(this.settingsButton)},n.createPlayBtn=function(){this.playBtn=new Xf(this.scene),this.add(this.playBtn),this.buttons.push(this.playBtn),this.playBtn.setDisabled(!0)},n.createTournamentsButton=function(){this.tournamentsButton=new Yf(this.scene,this.parentScreenKeys),this.add(this.tournamentsButton),this.buttons.push(this.tournamentsButton)},n.alignButtons=function(){if(0!==this.buttons.length)for(var e=this.width/this.buttons.length,t=0;t<this.buttons.length;++t)this.buttons[t].setX((t-this.buttons.length/2+.5)*e),this.buttons[t].setY(2)},t}(Phaser.GameObjects.Container),ep=vn.Z.GAMEPLAY_DEFAULT,tp=ep.KEY,np=ep.FRAME,ip=function(e){function t(t){var n,i=(n=e.call(this,t)||this).scene.ads.getBannerHeight(),a=n.scene.game.world.isLandscape()?12:0;return n.setSize(375,i+a),n.createBackground(),n.createLogo(),n}(0,o.Z)(t,e);var n=t.prototype;return n.createBackground=function(){if(!this.scene.game.world.isLandscape()){var e=this.scene.add.image(0,0,tp,np.BOTTOM_BG);e.setWorldSize(this.scene.gameZone.width,this.height),this.add(e)}},n.createLogo=function(){var e=this.scene.ads.getBannerHeight(),t=Phaser.Math.Clamp(e-14,0,26.5),n=this.scene.add.image(0,0,tp,np.BOTTOM_LOGO);n.setWorldSize(352.5*t/26.5,t),Phaser.Display.Align.In.BottomCenter(n,this,0,-(e-t)/2),n.setDepth(fn.Z.FOOTER_LOGO),this.add(n)},t}(Phaser.GameObjects.Container),ap=function(e){function t(t,n,i,a){var r;return(r=e.call(this,t,n,i,a)||this).scene=void 0,r.fadeInAnimation=void 0,r.fadeOutAnimation=void 0,r.slideInAnimation=void 0,r.awesomeContainer=void 0,r.beams=void 0,r.bunting=void 0,r.footer=void 0,r.closed=!1,r.handleClickTournaments=function(){r.scene.time.delayedCall(100,(function(){r.closed||r.close()}))},r.setBackground=function(){var e=r.scene.theme.getCurrentThemeConfig().backgroundKey;r.background.setTexture(e);var t=r.scene.gameZone,n=t.width,i=t.height;r.background.setWorldSize(n,i),r.scene.world.isLandscape()&&r.background.setScale(r.background.scaleY,r.background.scaleY),r.scene.events.on($s.BACKGROUND_CHANGED,(function(e){r.background.setTexture(e),r.background.setWorldSize(n,i),r.scene.world.isLandscape()&&r.background.setScale(r.background.scaleY,r.background.scaleY)}))},r.scene=t,r.setBackground(),r.createAwesomeContainer(),r.createBeams(),r.createBuntings(),r.createFooter(),r.setDepth(qa.Ks.POPUP),yn.Z.removeObject(r.background),r}(0,o.Z)(t,e);var n=t.prototype;return n.createAwesomeContainer=function(){this.awesomeContainer=new sf(this.scene),this.add(this.awesomeContainer)},n.createBeams=function(){this.beams=new pf(this.scene),this.add(this.beams),Phaser.Display.Align.In.TopCenter(this.beams,this)},n.createBuntings=function(){this.bunting=new Of(this.scene),this.add(this.bunting),Phaser.Display.Align.In.TopCenter(this.bunting,this)},n.createFooter=function(){this.footer=new $f(this.scene,!1,qa.o4.VICTORY_SCREEN),this.add(this.footer),this.bringToTop(this.footer),this.footer.setInteractive();var e=this.scene.ads.getBannerHeight(),t=this.scene.gameZone.width>375?-10:0;Phaser.Display.Align.In.BottomCenter(this.footer,this.background,0,-e+t)},n.createBottomLogo=function(){if(!this.scene.game.world.isLandscape()){var e=new ip(this.scene);this.add(e),Phaser.Display.Align.In.BottomCenter(e,this)}},n.open=function(t){e.prototype.open.call(this,t),this.closed=!1,this.updateVictoryStats(),this.awesomeContainer.setAlpha(1),this.awesomeContainer.setInteractive(),this.background.setAlpha(1),this.runOpenAnimation(),this.scene.children.bringToTop(this.scene.gameplay.confettiSmallFallDown),this.scene.gameplay.confettiSmallFallDown.run(8,0,0)},n.close=function(){this.closed=!0,this.runCloseAnimation(),this.stopConfettiAnimation()},n.updateVictoryStats=function(){var e,t=null==(e=this.data)?void 0:e.list;if(t){var n=t.score,i=t.winningMoves,a=t.winningTime,r=this.scene.gameStats.getNormalStat().bestWinningTime;this.awesomeContainer.setScore(""+n),this.awesomeContainer.setMoves(""+i),this.awesomeContainer.setWinningTime((0,$a.F0)(a,!1)),this.awesomeContainer.setBestWinningTime((0,$a.F0)(r,!1)),this.awesomeContainer.setDraw("standardMode")}},n.runOpenAnimation=function(){var e=(0,s.Z)(h().mark((function e(){var t,n,i,a=this;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==(t=this.slideInAnimation)||null==(n=t.tween)||!n.isPlaying()){e.next=2;break}return e.abrupt("return");case 2:return this.scene.audio.playSound(Ja.Z.POPUP_SHOW),i=this.scene.ads.getBannerHeight(),this.awesomeContainer.setAlpha(0),this.awesomeContainer.y=i,this.awesomeContainer.hideContent(),this.bunting.stopWavingAnimation(),this.slideInAnimation||(this.slideInAnimation=new Ao.Z({targets:[this.awesomeContainer],ease:Phaser.Math.Easing.Back.Out,props:{y:{from:i,to:-i/2},alpha:{from:0,to:1}},duration:300,onComplete:function(){var e=(0,s.Z)(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.awesomeContainer.runEntranceAnimation();case 2:a.footer.playBtn.setDisabled(!1);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()})),this.fadeInAnimation||(this.fadeInAnimation=new Fc.Z({targets:[this],duration:300,ease:Phaser.Math.Easing.Linear})),this.fadeInAnimation.play(),e.next=13,this.bunting.runEntranceAnimation();case 13:this.bunting.playWavingAnimation(),this.slideInAnimation.play();case 15:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.runCloseAnimation=function(){var t,n,i=this;null!=(t=this.fadeOutAnimation)&&null!=(n=t.tween)&&n.isPlaying()||(this.scene.audio.playSound(Ja.Z.POPUP_OFF),this.fadeOutAnimation||(this.fadeOutAnimation=new yh.Z({targets:[this],ease:Phaser.Math.Easing.Linear,props:{alpha:0},duration:300,onComplete:function(){e.prototype.close.call(i),i.footer.playBtn.setDisabled(!0)}})),this.fadeOutAnimation.play(),this.bunting.stopWavingAnimation())},n.stopConfettiAnimation=function(){this.scene.gameplay.confettiSmallFallDown.emitter.stop()},t}(GameCore.Screen),rp=ap,sp=vn.Z.GAMEPLAY_DEFAULT,op=sp.KEY,cp=sp.FRAME,lp=143.5,up=function(e){function t(t){var n;return(n=e.call(this,t)||this).bg=void 0,n.score=void 0,n.time=void 0,n.bestTime=void 0,n.moves=void 0,n.draw=void 0,n.lines=[],n.buttons=[],n.createBackground(),n.createTitle(),n.createStats(),n.createNewGameButton(),n.createReplayButton(),n.createDevButtons(),t.add.existing((0,Ua.Z)(n)),n}(0,o.Z)(t,e);var n=t.prototype;return n.setScore=function(e){this.score.setValue(e)},n.setWinningTime=function(e){this.time.setValue(e)},n.setBestWinningTime=function(e){this.bestTime.setValue(e)},n.setMoves=function(e){this.moves.setValue(e)},n.setDraw=function(e){this.draw.setText(e)},n.createBackground=function(){this.setSize(343,374);var e=new Cu(this.scene,{key:"_outOfMoves",radius:6,border:24,width:343,height:374});this.bg=e,this.add(e),this.bg.setPipeline("Grayscale")},n.createTitle=function(){var e=this.scene.make.bitmapText({font:No.Z.BOLD.KEY,size:this.scene.fontSize(24),text:"outOfMoves",origin:{x:.5,y:.5}});e.setMaxSize(300,35),e.setTint(16777215),this.add(e),Phaser.Display.Align.In.TopCenter(e,this,0,-20);var t=this.scene.make.bitmapText({font:No.Z.PRIMARY.KEY,size:this.scene.fontSize(16),text:"standardMode",origin:{x:.5,y:.5}});t.setMaxSize(300,20),t.setTint(16777215),this.draw=t,this.add([t]),Phaser.Display.Align.To.BottomCenter(t,e,0,8)},n.createStats=function(){var e=[],t=new qd(this.scene);t.setIcon(op,cp.MEDAL_STAR),t.setLabel("score"),t.setValue("687"),this.score=t,e.push(t);var n=new qd(this.scene);n.setIcon(op,cp.ARROW_SWAP_HORIZONTAL),n.setLabel("moves"),n.setValue("798"),this.moves=n,e.push(n);var i=new qd(this.scene);i.setIcon(op,cp.TIMER),i.setLabel("time"),i.setValue("09:48"),this.time=i,e.push(i);var a=new qd(this.scene);a.setIcon(op,cp.CUP),a.setLabel("bestTime"),a.setValue("05:30"),this.bestTime=a,e.push(a),this.add(e);for(var r=0;r<e.length;r++){var s=e[r];if(s.alignProperties(),Phaser.Display.Align.In.TopCenter(s,this,0,-(50*r+112)),r==e.length-1)break;var o=this.scene.add.line(0,0,0,0,271,0,16579837,.2);this.add(o),this.lines.push(o),Phaser.Display.Align.To.BottomCenter(o,s,0,12)}},n.createNewGameButton=function(){var e=this,t=new bh.Z(this.scene,143.5,48,16,16777215);t.onClick=(0,s.Z)(h().mark((function t(){return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.scene.screen.close(qa.o4.NO_MORE_MOVES_SCREEN),!(e.scene instanceof om)){t.next=6;break}return t.next=4,e.scene.gameplay.handleShowInterstitialAd();case 4:return t.next=6,e.scene.handlePlaySingle();case 6:case"end":return t.stop()}}),t)}))),t.setName("NewGame");var n=new ef(this.scene);t.add(n),Phaser.Display.Align.In.BottomRight(t,this,-16,-18),this.add([t]),this.buttons.push(t),new gc.Z({targets:[t],duration:1e3,props:{scale:"*=1.05"}}).play()},n.createReplayButton=function(){var e=this,t=new bh.Z(this.scene,143.5,48,16,16777215);t.button.setAlpha(.24),t.button.setStrokeStyle(1,16777215),t.onClick=function(){e.scene instanceof om&&(console.log("replay"),e.scene.gameplay.replayGame()),e.scene.screen.close(qa.o4.NO_MORE_MOVES_SCREEN)},t.setName("Replay");var n=this.scene.add.graphics();n.lineStyle(1,16777215),n.strokeRoundedRect(-71.75,-24,lp,48,16);var i=new ef(this.scene,8,"replay",cp.IC_REPLAY);i.clearTint(),i.getIcon().setTintFill(16777215),t.add([n,i]).setSize(lp,48),Phaser.Display.Align.In.BottomLeft(t,this.bg,-16,-18),this.add([t]),this.buttons.push(t)},n.createDevButtons=function(){GameCore.Utils.Valid.isDebugger()&&this.createCloseButton()},n.createCloseButton=function(){var e=this,t=new vu.Z(this.scene,40,40),n=this.scene.add.image(0,0,op,cp.IC_BG_OFF);n.setWorldSize(40,40);var i=this.scene.make.bitmapText({font:No.Z.PRIMARY.KEY,size:this.scene.fontSize(10),text:"Close",origin:{x:.5,y:.5}});i.setCenterAlign(),t.add([n,i]),this.add(t),Phaser.Display.Align.In.BottomLeft(t,this,0,-200),t.onClick=function(){e.scene.screen.close(qa.o4.NO_MORE_MOVES_SCREEN)}},n.hideContent=function(){[this.score,this.moves,this.time,this.bestTime].forEach((function(e){return e.setAlpha(0)})),this.lines.forEach((function(e){e.setAlpha(0),e.scaleX=0})),this.buttons.forEach((function(e){e.setAlpha(0)}))},n.runEntranceAnimationButtons=function(){var e=(0,s.Z)(h().mark((function e(){var t,n,i=this;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=De()(t=this.buttons).call(t,(function(e){return new(l())((function(t){i.scene.add.tween({targets:[e],alpha:1,duration:200,onComplete:function(){e.setDisabled(!1),t()}})}))})),e.next=3,l().all(n);case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.runEntranceAnimationRows=function(){var e=(0,s.Z)(h().mark((function e(){var t,n,i=this;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[this.score,this.moves,this.time,this.bestTime],200,n=De()(t).call(t,(function(e,t){return new(l())((function(n){i.scene.add.tween({targets:[e],duration:200,delay:200*t/2,ease:Phaser.Math.Easing.Sine.Out,props:{alpha:{from:0,to:1},y:{from:e.y+e.height/2,to:e.y}},onComplete:n})}))})),e.next=5,l().all(n);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.runEntranceAnimationLines=function(){var e=(0,s.Z)(h().mark((function e(){var t,n,i=this;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return 200,n=De()(t=this.lines).call(t,(function(e,t){return new(l())((function(n){i.scene.add.tween({targets:[e],duration:200,delay:200*t/2,props:{alpha:{from:0,to:1},scaleX:{from:0,to:1}},onComplete:n})}))})),e.next=4,l().all(n);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.runEntranceAnimationRowsLines=function(){var e=(0,s.Z)(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l().all([this.runEntranceAnimationRows(),this.runEntranceAnimationLines()]);case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.runEntranceAnimation=function(){var e=(0,s.Z)(h().mark((function e(){var t;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.runEntranceAnimationRowsLines();case 2:return t=this.scene,e.next=5,t.gameplay.finishGame();case 5:return e.next=7,this.runEntranceAnimationButtons();case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),t}(Phaser.GameObjects.Container),hp=up,dp=vn.Z.GAMEPLAY_DEFAULT,fp=dp.KEY,pp=dp.FRAME,gp=function(e){function t(t){var n;return(n=e.call(this,t)||this).leftLightning=void 0,n.middleLightning=void 0,n.rightLightning=void 0,n.initialLeftX=void 0,n.initialLeftY=void 0,n.initialMidX=void 0,n.initialMidY=void 0,n.initialRightX=void 0,n.initialRightY=void 0,n.setSize(374,416),n.createLightnings(),n.alignLightnings(),n.initialLeftX=n.leftLightning.x,n.initialLeftY=n.leftLightning.y,n.initialMidX=n.middleLightning.x,n.initialMidY=n.middleLightning.y,n.initialRightX=n.rightLightning.x,n.initialRightY=n.rightLightning.y,n}(0,o.Z)(t,e);var n=t.prototype;return n.createLightnings=function(){this.createLeftLightning(),this.createMiddleLightning(),this.createRightLightning();var e=[this.leftLightning,this.middleLightning,this.rightLightning];e.forEach((function(e){return e.setAlpha(.2)})),this.add(e)},n.createLeftLightning=function(){this.leftLightning=this.scene.add.image(0,0,fp,pp.LIGHTNING.LEFT),this.leftLightning.setWorldSize(182.5,180)},n.createMiddleLightning=function(){this.middleLightning=this.scene.add.image(0,0,fp,pp.LIGHTNING.MIDDLE),this.middleLightning.setWorldSize(106,125.5)},n.createRightLightning=function(){this.rightLightning=this.scene.add.image(0,0,fp,pp.LIGHTNING.RIGHT),this.rightLightning.setWorldSize(130.5,116)},n.alignLightnings=function(){Phaser.Display.Align.In.TopLeft(this.leftLightning,this,0,-60.28),Phaser.Display.Align.In.TopRight(this.middleLightning,this,-125.92,0),Phaser.Display.Align.In.TopRight(this.rightLightning,this,-9.23,-55.4)},n.hideContent=function(){var e=0,t=-300;[this.leftLightning,this.middleLightning,this.rightLightning].forEach((function(n){n.setPosition(e,t).setAlpha(0)}))},n.runEntranceAnimation=function(){var e=(0,s.Z)(h().mark((function e(){var t,n,i,a,r,s=this;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={x:0,y:-300},n=new(l())((function(e){new Ao.Z({targets:[s.leftLightning],ease:Phaser.Math.Easing.Cubic.Out,props:{x:{from:t.x,to:s.initialLeftX},y:{from:t.y,to:s.initialLeftY},alpha:{from:0,to:.2}},duration:150,onComplete:e}).play()})),i=new(l())((function(e){new Ao.Z({targets:[s.rightLightning],ease:Phaser.Math.Easing.Cubic.Out,props:{x:{from:t.x,to:s.initialRightX},y:{from:t.y,to:s.initialRightY},alpha:{from:0,to:.2}},duration:250,onComplete:e}).play()})),a=new(l())((function(e){new Ao.Z({targets:[s.middleLightning],ease:Phaser.Math.Easing.Cubic.Out,props:{x:{from:t.x,to:s.initialMidX},y:{from:t.y,to:s.initialMidY},alpha:{from:0,to:.2}},duration:300,onComplete:e}).play()})),e.next=6,l().all([n,a,i]);case 6:return r=[this.leftLightning,this.middleLightning,this.rightLightning],e.next=9,new(l())((function(e){s.scene.add.tween({targets:r,props:{alpha:.4},yoyo:!0,duration:100,onComplete:e})}));case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),t}(Phaser.GameObjects.Container),mp=vn.Z.GAMEPLAY_DEFAULT,vp=mp.KEY,yp=mp.FRAME,bp=10.4,Ap=30.5,Ep=50.5,Sp={FIRST_FROM_LEFT:bp,SECOND_FROM_LEFT:Ap,THIRD_FROM_LEFT:Ep,FIRST_FROM_RIGHT:-bp,SECOND_FROM_RIGHT:-Ap,THIRD_FROM_RIGHT:-Ep},Tp=function(e){function t(t){var n;return(n=e.call(this,t)||this).pivot=void 0,n.beams=[],n.setSize(375,415.5),n.createBeamsPivot(),n.createBeams(),n.playAnimation(),n}(0,o.Z)(t,e);var n=t.prototype;return n.createBeams=function(){for(var e=0,t=ae()(Sp);e<t.length;e++){var n=t[e],i=Sp[n],a=this.scene.add.image(0,0,vp,yp.BEAM.LOSE_AXIS);a.setWorldSize(65.5,533),this.add(a),this.beams.push(a),this.rotateBeamToAngleInDegree(a,i)}},n.playAnimation=function(){var e=this;this.beams.forEach((function(t,n){e.scene.tweens.add({targets:t,props:{alpha:{from:.2,to:.4}},duration:700,delay:700*n,repeat:-1,yoyo:!0})}))},n.createBeamsPivot=function(){this.pivot=this.scene.add.image(0,0,vp,yp.ADD_SQUARE),this.add(this.pivot),this.pivot.kill(),Phaser.Display.Align.In.Center(this.pivot,this,0,-this.height/2-148.2)},n.rotateBeamToAngleInDegree=function(e,t){Phaser.Actions.RotateAroundDistance([e],this.pivot,t*Math.PI/180,e.height/2);var n=180*Math.atan2(e.y-this.pivot.y,e.x-this.pivot.x)/Math.PI;e.angle=n+90+180},t}(Phaser.GameObjects.Container),wp=function(e){function t(t,n,i,a){var r;return(r=e.call(this,t,n,i,a)||this).scene=void 0,r.fadeInAnimation=void 0,r.fadeOutAnimation=void 0,r.slideInAnimation=void 0,r.outOfMovesContainer=void 0,r.lightnings=void 0,r.beams=void 0,r.footer=void 0,r.closed=!1,r.handleClickTournaments=function(){r.scene.time.delayedCall(100,(function(){r.closed||r.close()}))},r.setBackground=function(){var e=r.scene.theme.getCurrentThemeConfig().backgroundKey;r.background.setTexture(e);var t=r.scene.gameZone,n=t.width,i=t.height;r.background.setWorldSize(n,i),r.scene.world.isLandscape()&&r.background.setScale(r.background.scaleY,r.background.scaleY),r.background.setPipeline("Grayscale"),r.scene.events.on($s.BACKGROUND_CHANGED,(function(e){r.background.setTexture(e),r.background.setWorldSize(n,i),r.scene.world.isLandscape()&&r.scene.world.isLandscape()&&r.background.setScale(r.background.scaleY,r.background.scaleY)}))},r.scene=t,r.setBackground(),r.createOutOfMovesContainer(),r.createLightnings(),r.createBeams(),r.createFooter(),r.setDepth(qa.Ks.POPUP),yn.Z.removeObject(r.background),r}(0,o.Z)(t,e);var n=t.prototype;return n.createBeams=function(){this.beams=new Tp(this.scene),this.add(this.beams),Phaser.Display.Align.In.TopCenter(this.beams,this)},n.createOutOfMovesContainer=function(){this.outOfMovesContainer=new hp(this.scene),this.add(this.outOfMovesContainer)},n.createLightnings=function(){this.lightnings=new gp(this.scene),this.add(this.lightnings),Phaser.Display.Align.In.TopCenter(this.lightnings,this)},n.createFooter=function(){this.footer=new $f(this.scene,!1,qa.o4.NO_MORE_MOVES_SCREEN),this.add(this.footer),this.bringToTop(this.footer),this.footer.setInteractive();var e=this.scene.ads.getBannerHeight(),t=this.scene.gameZone.width>375?-10:0;Phaser.Display.Align.In.BottomCenter(this.footer,this.background,0,-e+t)},n.createBottomLogo=function(){if(!this.scene.world.isLandscape()){var e=new ip(this.scene);this.add(e),Phaser.Display.Align.In.BottomCenter(e,this)}},n.open=function(t){e.prototype.open.call(this,t),yn.Z.openScreen(this,!0),this.updateVictoryStats(),this.outOfMovesContainer.setAlpha(1),this.outOfMovesContainer.setInteractive(),this.background.setAlpha(1),this.runOpenAnimation(),this.closed=!1},n.close=function(){this.closed=!0,this.runCloseAnimation()},n.updateVictoryStats=function(){var e,t=null==(e=this.data)?void 0:e.list;if(t){var n=t.score,i=t.winningMoves,a=t.winningTime,r=this.scene.gameStats.getNormalStat().bestWinningTime;this.outOfMovesContainer.setScore(""+n),this.outOfMovesContainer.setMoves(""+i),this.outOfMovesContainer.setWinningTime((0,$a.F0)(a,!1)),this.outOfMovesContainer.setBestWinningTime((0,$a.F0)(r,!1)),this.outOfMovesContainer.setDraw("standardMode")}},n.runOpenAnimation=function(){var e=(0,s.Z)(h().mark((function e(){var t,n,i,a=this;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==(t=this.slideInAnimation)||null==(n=t.tween)||!n.isPlaying()){e.next=2;break}return e.abrupt("return");case 2:return this.scene.audio.playSound(Ja.Z.POPUP_SHOW),i=this.scene.ads.getBannerHeight(),this.outOfMovesContainer.setAlpha(0),this.outOfMovesContainer.y=i,this.outOfMovesContainer.hideContent(),this.slideInAnimation||(this.slideInAnimation=new Ao.Z({targets:[this.outOfMovesContainer],ease:Phaser.Math.Easing.Sine.In,props:{y:{from:i,to:-i/2},alpha:{from:0,to:1}},duration:300,onComplete:function(){var e=(0,s.Z)(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.outOfMovesContainer.runEntranceAnimation();case 2:a.footer.playBtn.setDisabled(!1);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()})),this.fadeInAnimation||(this.fadeInAnimation=new Fc.Z({targets:[this],duration:300,ease:Phaser.Math.Easing.Sine.In})),this.fadeInAnimation.play(),e.next=12,this.lightnings.runEntranceAnimation();case 12:this.slideInAnimation.play();case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.runCloseAnimation=function(){var t,n,i=this;null!=(t=this.fadeOutAnimation)&&null!=(n=t.tween)&&n.isPlaying()||(this.scene.audio.playSound(Ja.Z.POPUP_OFF),this.fadeOutAnimation||(this.fadeOutAnimation=new yh.Z({targets:[this],ease:Phaser.Math.Easing.Sine.Out,props:{alpha:0},duration:300,onComplete:function(){yn.Z.closeScreen(i),i.footer.playBtn.setDisabled(!0),e.prototype.close.call(i)}})),this.fadeOutAnimation.play())},t}(GameCore.Screen),Cp=wp,Ip=function(e){function t(t){var n;return(n=e.call(this,t)||this).bg=void 0,n.message=void 0,n.createBackground(),n.createMessage(),n.createOKButton(),t.add.existing((0,Ua.Z)(n)),n}(0,o.Z)(t,e);var n=t.prototype;return n.setMessage=function(e){this.message.setText(e)},n.createBackground=function(){var e=new xu.Z(this.scene,0,0,300,160,20,16579837);this.add(e),this.bg=e,this.setSize(e.width,e.height)},n.createMessage=function(){var e=this.scene.make.bitmapText({font:No.Z.PRIMARY.KEY,size:this.scene.fontSize(16),text:"Hello, world!",origin:{x:.5,y:.5}});e.setCenterAlign(),e.setTint(1907997),this.add(e),Phaser.Display.Align.In.Center(e,this,0,-24),this.message=e,this.add([e])},n.createOKButton=function(){var e=this,t=new bh.Z(this.scene,260,40,12,3774208);t.setName("OK"),t.onClick=function(){e.scene.screen.close(qa.o4.NOTIFICATION_SCREEN)};var n=this.scene.make.bitmapText({font:No.Z.PRIMARY.KEY,size:this.scene.fontSize(16),text:"ok",origin:{x:.5,y:.5}});n.setTint(16579837),Phaser.Display.Align.In.Center(n,t,0),t.add([n]),Phaser.Display.Align.In.BottomCenter(t,this.bg,0,-16),this.add([t])},t}(Phaser.GameObjects.Container),xp=Ip,Pp=function(e){function t(t,n,i,a){var r;return(r=e.call(this,t,n,i,a)||this).slideInAnimation=void 0,r.fadeInAnimation=void 0,r.fadeOutAnimation=void 0,r.notificationContainer=void 0,r.setDepth(qa.Ks.POPUP),r.notificationContainer=new xp(t),r.add(r.notificationContainer),r.background.setTint(1315862),r.background.setAlpha(.5),r.background.setInteractive(),r}(0,o.Z)(t,e);var n=t.prototype;return n.open=function(t){e.prototype.open.call(this,t);var n=this.data.list.message,i=void 0===n?"":n;this.notificationContainer.setMessage(i),this.runOpenAnimation()},n.close=function(){this.runCloseAnimation()},n.runOpenAnimation=function(){var e,t;null!=(e=this.fadeInAnimation)&&null!=(t=e.tween)&&t.isPlaying()||(this.scene.audio.playSound(Ja.Z.POPUP_SHOW),this.fadeInAnimation||(this.fadeInAnimation=new Fc.Z({targets:[this],ease:Phaser.Math.Easing.Sine.InOut,duration:300})),this.fadeInAnimation.play())},n.runCloseAnimation=function(){var t,n,i=this;null!=(t=this.fadeOutAnimation)&&null!=(n=t.tween)&&n.isPlaying()||(this.scene.audio.playSound(Ja.Z.POPUP_OFF),this.fadeOutAnimation||(this.fadeOutAnimation=new yh.Z({targets:[this],props:{alpha:0},duration:300,onComplete:function(){e.prototype.close.call(i)}})),this.fadeOutAnimation.play())},t}(GameCore.Screen),kp=Pp,_p=n(662),Op=Ed.STATUS,Rp=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n.gameMode=void 0,n.handleGameModeChanged=function(){n.stop(),n.start()},n.scene=t,n.init(),n}(0,o.Z)(t,e);var n=t.prototype;return n.init=function(){e.prototype.init.call(this),this.gameMode=to.SINGLE,io.instance.on($s.GAME_MODE_CHANGED,this.handleGameModeChanged)},n.start=function(){if(!this.isRunning()){switch(this.gameMode=io.instance.getGameMode(),console.log("\ud83e\udd16 ? Start game with mode:",this.gameMode),this.gameMode){case to.SINGLE:this.startSingleMode();break;case to.TOURNAMENT:this.startTournamentMode();break;case to.CHALLENGE_FRIENDS:this.startChallengeMode();break;default:this.stopChallengeMode(),this.stopTournamentMode()}this.setState(Op.RUNNING)}},n.stop=function(){switch(console.log("\ud83e\udd16 ? Stop game with mode:",this.gameMode),this.gameMode){case to.SINGLE:this.stopSingleMode();break;case to.TOURNAMENT:this.stopTournamentMode();break;case to.CHALLENGE_FRIENDS:this.stopChallengeMode()}this.setState(Op.STOPPED)},n.startSingleMode=function(){this.scene.header.useSingleInfo()},n.stopSingleMode=function(){},n.startTournamentMode=function(){var e=(0,s.Z)(h().mark((function e(){var t,n,a,r,s,o,c,l,u;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.scene.header.useTournamentInfo(),e.next=3,this.updateTournamentInfo();case 3:return e.prev=3,n=this.scene.storage.getState(),console.log({state:n}),a=Zr(n),r=Fr(n),console.log("start tournament",{leaderboardId:a,tournamentId:r}),e.next=11,(0,Ur.H$)(a,{limit:7}).catch((function(e){return console.warn("get leader board",e,a),[]}));case 11:if(s=e.sent,console.log({leaders:s,leaderboardId:a}),!(s.length<1)){e.next=15;break}return e.abrupt("return");case 15:return o=De()(s).call(s,(function(e){return e.playerId})),e.next=18,this.scene.profile.requestProfiles(o).catch((function(e){console.warn("request profile ids",e)}));case 18:if(c=this.scene.profile.getProfiles(),console.log({profiles:c}),l=De()(s).call(s,(function(e){var t=e.playerId,n=e.score,i=e.rank,a=c[t];if(!a)return null;var r=a.name;return{playerId:t,photo:a.photo,score:n,rank:i,name:r}})),!((u=Di()(t=Re()(l).call(l,(function(e){return null!==e}))).call(t,(function(e,t){return t.score-e.score}))).length<1)){e.next=24;break}return e.abrupt("return");case 24:console.log({players:u}),this.scene.analytics.event(mn._.TOURNAMENT_START,{tournament_id:r,leaderboard_id:a}),e.next=34;break;case 28:if(e.prev=28,e.t0=e.catch(3),!(e.t0 instanceof _p.Z)){e.next=32;break}return e.abrupt("return");case 32:console.warn({error:e.t0}),(0,i.tO)(e.t0);case 34:case"end":return e.stop()}}),e,this,[[3,28]])})));return function(){return e.apply(this,arguments)}}(),n.updateTournamentInfo=function(){var e=(0,s.Z)(h().mark((function e(){var t,n,i,a,r;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.scene.storage.getState(),n=Zr(t),e.next=4,(0,Ur.wF)(n);case 4:i=e.sent,a=null==i?void 0:i.name,r=GameCore.Utils.String.removeDiacritics(a||"Your tournament"),console.log("update tournament title",a),this.scene.header.tournamentInfo.titleBlock.tournamentTitle.setText(r);case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.stopTournamentMode=function(){},n.startChallengeMode=function(){this.scene.header.useChallengeInfo();var e=this.scene.header.challengeInfo,t=e.leftBlock,n=e.rightBlock;t.updateData(0,0,0),n.updateData();var i=this.scene.storage.getState(),a=this.scene.player.getPlayer(),r=a.playerId,s=a.photo;t.avatar.loadPhoto(r,s,100);var o=us(i),c=o.playerId,l=o.photo;n.avatar.loadPhoto(c,l,100);var u=os(i),h=u.whitePlayerId,d=u.extraData,f=void 0===d?{}:d;console.warn({matchData:u});var p=r===h?f.blackPlayerData:f.whitePlayerData;if(p){var g=p.score,m=p.moves,v=p.time;n.updateData(g,v,m)}},n.stopChallengeMode=function(){},t}(wd),Lp=Rp,Dp=function(e){return e.WIN="win",e.LOSE="lose",e.DRAW="draw",e.WAITING_FOR_OPPONENT="waiting_for_opponent",e}(Dp||{}),Bp=Dp,Np=vn.Z.DEFAULT,Mp=Np.KEY,Gp=Np.FRAME,Fp=vn.Z.GAMEPLAY_DEFAULT,Zp=Fp.KEY,Up=Fp.FRAME,Hp=function(e){function t(t){var n;return(n=e.call(this,t)||this)._avatar=void 0,n._username=void 0,n._crownZone=void 0,n.setSize(54,94),n.createAvatarFrame(),n.createCrownZone(),n.createText(),n.alignComponents(),n}(0,o.Z)(t,e);var n=t.prototype;return n.setUsername=function(e,t){void 0===t&&(t=!0),"your friend"===e.toLocaleLowerCase()&&(e="yourFriend",t=!1),this.username.setText(e),this.username.setIgnoreLanguage(t)},n.createAvatarFrame=function(){this._avatar=new Go(this.scene,{key:Mp,background:Gp.BLANK,width:64,height:64,loadDelay:100}),this._avatar.update(),this._avatar.background.kill(),this._avatar.loadPhoto(da.Z.AVATAR.KEY,da.Z.AVATAR.FILE,100),this.add(this._avatar)},n.createText=function(){this._username=this.scene.make.text({style:{fontFamily:No.Z.FONT_FAMILY},origin:{x:.5,y:.5}}),this._username.setHighQuality(),this._username.setFontSize(12),this._username.setText("Name"),this._username.setIgnoreLanguage(),this.add(this._username)},n.createCrownZone=function(){this._crownZone=this.scene.add.container(),this._crownZone.setSize(20,20),this.add(this._crownZone);var e=this.scene.add.image(0,0,Zp,Up.AVATAR_CROWN);e.setWorldSize(19,14),Phaser.Display.Align.In.Center(e,this._crownZone),this._crownZone.add(e)},n.alignComponents=function(){Phaser.Display.Align.In.BottomCenter(this._username,this),Phaser.Display.Align.In.TopCenter(this._crownZone,this),Phaser.Display.Align.In.Center(this._avatar,this)},n.addBackground=function(){var e="player-avatar-background";if(!this.scene.textures.exists(e)){var t=this.width,n=this.height,i=this.scene.add.graphics();i.fillStyle(65280,.2),i.fillRect(0,0,t,n),i.generateTexture(e,t,n),i.destroy()}var a=this.scene.add.image(0,0,e);this.add(a)},n.setWinner=function(e){void 0===e&&(e=!0),this._crownZone.setVisible(e)},n.hideContent=function(){this._avatar.setScale(0),this._username.setAlpha(0),this._crownZone.setAlpha(0)},n.runEntranceAnimationAvatar=function(){var e=(0,s.Z)(h().mark((function e(){var t=this;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new(l())((function(e){t.scene.add.tween({targets:t._avatar,duration:300,ease:Phaser.Math.Easing.Cubic.Out,props:{scale:{from:0,to:1}},onComplete:e})})));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),n.runEntranceAnimationUsername=function(){var e=(0,s.Z)(h().mark((function e(){var t=this;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new(l())((function(e){t.scene.add.tween({targets:t._username,duration:300,ease:Phaser.Math.Easing.Sine.Out,props:{alpha:{from:0,to:1}},onComplete:e})})));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),n.runEntranceAnimationCrown=function(){var e=(0,s.Z)(h().mark((function e(){var t=this;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new(l())((function(e){t.scene.add.tween({targets:t._crownZone,ease:Phaser.Math.Easing.Sine.Out,duration:100,props:{alpha:{from:0,to:1},y:{from:t._crownZone.y-t._crownZone.height/4,to:t._crownZone.y}},onComplete:e})})));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),n.runEntranceAnimation=function(){var e=(0,s.Z)(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l().all([this.runEntranceAnimationAvatar(),this.runEntranceAnimationUsername()]);case 2:return e.next=4,this.runEntranceAnimationCrown();case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),(0,le.Z)(t,[{key:"avatar",get:function(){return this._avatar}},{key:"username",get:function(){return this._username}},{key:"crownZone",get:function(){return this._crownZone}}]),t}(Phaser.GameObjects.Container),Wp=16762624,zp=function(e){function t(t){var n;return(n=e.call(this,t)||this)._youAvatar=void 0,n._opponentAvatar=void 0,n._versusText=void 0,n.setSize(231,94),n.createAvatars(),n.createVersusText(),n.alignComponents(),n}(0,o.Z)(t,e);var n=t.prototype;return n.createAvatars=function(){this._youAvatar=new Hp(this.scene),this._opponentAvatar=new Hp(this.scene),this.add([this._youAvatar,this._opponentAvatar])},n.createVersusText=function(){this._versusText=this.scene.make.bitmapText({font:No.Z.BOLD.KEY,size:this.scene.fontSize(18),origin:{x:.5,y:.5}}),this._versusText.setText("VS"),this.setTintVersusText(),this.add(this._versusText)},n.setTintVersusText=function(e){void 0===e&&(e=!0),e?this._versusText.setTint(11222016,Wp,Wp,Wp):this._versusText.clearTint()},n.alignComponents=function(){Phaser.Display.Align.In.Center(this._versusText,this),Phaser.Display.Align.In.LeftCenter(this._youAvatar,this,-20),Phaser.Display.Align.In.RightCenter(this._opponentAvatar,this,-20)},n.addBackground=function(){var e="avatar-zone-background";if(!this.scene.textures.exists(e)){var t=this.width,n=this.height,i=this.scene.add.graphics();i.fillStyle(65280,.2),i.fillRect(0,0,t,n),i.generateTexture(e,t,n),i.destroy()}var a=this.scene.add.image(0,0,e);this.add(a)},n.updateState=function(e){switch(e){case Bp.WIN:this._youAvatar.setWinner(!0),this._opponentAvatar.setWinner(!1),this.setTintVersusText();break;case Bp.LOSE:this._youAvatar.setWinner(!1),this._opponentAvatar.setWinner(!0),this.setTintVersusText(!1);break;case Bp.DRAW:default:this._youAvatar.setWinner(!1),this._opponentAvatar.setWinner(!1),this.setTintVersusText()}},n.hideContent=function(){this._youAvatar.hideContent(),this._opponentAvatar.hideContent(),this._versusText.setAlpha(0)},n.runEntranceAnimationVersusText=function(){var e=(0,s.Z)(h().mark((function e(){var t=this;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new(l())((function(e){t.scene.add.tween({targets:t.versusText,duration:100,ease:Phaser.Math.Easing.Sine.Out,props:{alpha:{from:0,to:1},y:{from:t.versusText.y+t.versusText.height/4,to:t.versusText.y}},onComplete:e})})));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),n.runEntranceAnimation=function(){var e=(0,s.Z)(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l().all([this._youAvatar.runEntranceAnimation(),this._opponentAvatar.runEntranceAnimation()]);case 2:return e.next=4,this.runEntranceAnimationVersusText();case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),(0,le.Z)(t,[{key:"youAvatar",get:function(){return this._youAvatar}},{key:"opponentAvatar",get:function(){return this._opponentAvatar}},{key:"versusText",get:function(){return this._versusText}}]),t}(Phaser.GameObjects.Container),Yp=function(e){function t(t,n,i,a,r){var s;return(s=e.call(this,t)||this).playerStat=void 0,s.opponentStat=void 0,s.setSize(231,40),s.addIcon(n),s.createLabel(i),s.createPlayerStat(a),s.createOpponentStat(r),s}(0,o.Z)(t,e);var n=t.prototype;return n.addBackground=function(){var e="avatar-zone-background";if(!this.scene.textures.exists(e)){var t=this.width,n=this.height,i=this.scene.add.graphics();i.fillStyle(65280,.2),i.fillRect(0,0,t,n),i.generateTexture(e,t,n),i.destroy()}var a=this.scene.add.image(0,0,e);this.add(a)},n.addIcon=function(e){e.setWorldSize(24,24),this.add(e),Phaser.Display.Align.In.TopCenter(e,this)},n.createLabel=function(e){var t=this.scene.make.bitmapText({font:No.Z.PRIMARY.KEY,size:this.scene.fontSize(12),text:e,origin:{x:.5,y:.5}});t.setMaxSize(70,20,!0),this.add(t),Phaser.Display.Align.In.BottomCenter(t,this)},n.createPlayerStat=function(e){var t=this.scene.make.bitmapText({font:No.Z.BOLD.KEY,size:this.scene.fontSize(16),text:e,origin:{x:0,y:.5}});t.setMaxSize(80,25,!0),this.add(t),Phaser.Display.Align.In.LeftCenter(t,this),this.playerStat=t},n.createOpponentStat=function(e){var t=this.scene.make.bitmapText({font:No.Z.BOLD.KEY,size:this.scene.fontSize(16),text:e,origin:{x:1,y:.5}});t.setMaxSize(80,25,!0),this.add(t),Phaser.Display.Align.In.RightCenter(t,this),this.opponentStat=t},n.setPlayerStat=function(e,t){void 0===t&&(t=!0),this.playerStat.setText(e),this.playerStat.setIgnoreLanguage(t)},n.setOpponentStat=function(e,t){void 0===t&&(t=!0),this.opponentStat.setText(e),this.opponentStat.setIgnoreLanguage(t)},t}(Phaser.GameObjects.Container),Vp=vn.Z.GAMEPLAY_DEFAULT,Kp=Vp.KEY,jp=Vp.FRAME,Xp=function(e){function t(t){var n;return(n=e.call(this,t)||this)._scoreStat=void 0,n._movesStat=void 0,n._timeStat=void 0,n.lines=[],n.setSize(231,170),n.createScoreStatEntry(),n.createMovesStatEntry(),n.createTimeStatEntry(),n.createLines(),n}(0,o.Z)(t,e);var n=t.prototype;return n.addBackground=function(){var e="match-statistics-background";if(!this.scene.textures.exists(e)){var t=this.width,n=this.height,i=this.scene.add.graphics();i.fillStyle(65280,.2),i.fillRect(0,0,t,n),i.generateTexture(e,t,n),i.destroy()}var a=this.scene.add.image(0,0,e);this.add(a)},n.createScoreStatEntry=function(){var e=this.scene.add.image(0,0,Kp,jp.MEDAL_STAR);this._scoreStat=new Yp(this.scene,e,"score","1234","687"),this.add(this._scoreStat),Phaser.Display.Align.In.TopCenter(this._scoreStat,this)},n.createMovesStatEntry=function(){var e=this.scene.add.image(0,0,Kp,jp.ARROW_SWAP_HORIZONTAL);this._movesStat=new Yp(this.scene,e,"moves","335","687"),this.add(this._movesStat),this.alignUnder(this._movesStat,this._scoreStat,0,20)},n.createTimeStatEntry=function(){var e=this.scene.add.image(0,0,Kp,jp.TIMER);this._timeStat=new Yp(this.scene,e,"time","07:25","09:45"),this.add(this._timeStat),this.alignUnder(this._timeStat,this._movesStat,0,20)},n.createLines=function(){var e=this;this.list.forEach((function(t){if(t instanceof Yp){var n=e.scene.add.line(0,0,0,0,231,0,16777215,.3);e.add(n),e.lines.push(n),Phaser.Display.Align.In.BottomCenter(n,t,0,10)}}))},n.alignUnder=function(e,t,n,i){void 0===n&&(n=0),void 0===i&&(i=0);var a=(e.height+t.height)/2;Phaser.Display.Align.In.Center(e,t,0+n,a+i)},n.runEntranceAnimationLines=function(){var e=(0,s.Z)(h().mark((function e(){var t,n,i=this;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return 200,n=De()(t=this.lines).call(t,(function(e,t){return new(l())((function(n){i.scene.add.tween({targets:e,duration:200,delay:200*t/2,props:{alpha:{from:0,to:1},scaleX:{from:0,to:1}},onComplete:n})}))})),e.next=4,l().all(n);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.runEntranceAnimationStats=function(){var e=(0,s.Z)(h().mark((function e(){var t,n,i=this;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[this._scoreStat,this._movesStat,this._timeStat],200,n=De()(t).call(t,(function(e,t){return new(l())((function(n){i.scene.add.tween({targets:e,duration:200,delay:200*t/2,ease:Phaser.Math.Easing.Sine.Out,props:{alpha:{from:0,to:1},y:{from:e.y+e.height/2,to:e.y}},onComplete:n})}))})),e.next=5,l().all(n);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.hideContent=function(){this.lines.forEach((function(e){e.setAlpha(0),e.scaleX=0})),[this._scoreStat,this._movesStat,this._timeStat].forEach((function(e){return e.setAlpha(0)}))},n.runEntranceAnimation=function(){var e=(0,s.Z)(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l().all([this.runEntranceAnimationStats(),this.runEntranceAnimationLines()]);case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),(0,le.Z)(t,[{key:"scoreStat",get:function(){return this._scoreStat}},{key:"movesStat",get:function(){return this._movesStat}},{key:"timeStat",get:function(){return this._timeStat}}]),t}(Phaser.GameObjects.Container),qp=function(e){return e.NEW_GAME="new",e.CLOSE="close",e}({}),Jp=function(e){function t(t){var n;return(n=e.call(this,t,143.5,48,16,16777215)||this).closeLabel=void 0,n.newGameLabel=void 0,n._buttonState=void 0,n.setSize(143.5,48),n.setName("NewGameButton"),n.createNewGameLabel(),n.createCloseLabel(),n.switchState(qp.NEW_GAME),n.initOnClick(),n.playPulsateAnimation(),n}(0,o.Z)(t,e);var n=t.prototype;return n.createNewGameLabel=function(){this.newGameLabel=new ef(this.scene),this.add(this.newGameLabel)},n.createCloseLabel=function(){this.closeLabel=this.scene.make.bitmapText({font:No.Z.PRIMARY.KEY,size:this.scene.fontSize(16),text:"ok",origin:{x:.5,y:.5}}).setTint(43282),this.add(this.closeLabel),Phaser.Display.Align.In.Center(this.closeLabel,this)},n.initOnClick=function(){var e=this;this.onClick=(0,s.Z)(h().mark((function t(){var n;return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e._buttonState!==qp.NEW_GAME){t.next=6;break}return n=e.scene,t.next=4,null==n?void 0:n.handlePlaySingle();case 4:t.next=7;break;case 6:e.switchState(qp.NEW_GAME);case 7:e.scene.screen.close(qa.o4.PLAY_WITH_FRIEND_GAME_OVER_SCREEN);case 8:case"end":return t.stop()}}),t)})))},n.playPulsateAnimation=function(){new gc.Z({targets:[this],duration:1e3,props:{scale:"*=1.05"}}).play()},n.hideContent=function(){this.setDisabled(!0)},n.runEntranceAnimation=function(){var e=(0,s.Z)(h().mark((function e(){var t=this;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new(l())((function(e){t.scene.add.tween({targets:t,alpha:1,duration:200,onStart:function(){t.setDisabled(!0)},onComplete:function(){t.setDisabled(!1),e()}})})));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),n.switchState=function(e){if(e!==this._buttonState)switch(e){case qp.CLOSE:this._buttonState=qp.CLOSE,this.closeLabel.revive(),this.newGameLabel.kill();break;case qp.NEW_GAME:this._buttonState=qp.NEW_GAME,this.closeLabel.kill(),this.newGameLabel.revive()}},t}(bh.Z),Qp=143.5,$p=function(e){function t(t){var n;return(n=e.call(this,t,Qp,48)||this).background=void 0,n.border=void 0,n.labelContainer=void 0,n.setName("Share"),n.setSize(Qp,48),n.createBackground(),n.createBorder(),n.createLabel(),n.initOnClick(),n}(0,o.Z)(t,e);var n=t.prototype;return n.createBackground=function(){this.background=new xu.Z(this.scene,0,0,Qp,48,16,16777215,.24),this.add(this.background)},n.createBorder=function(){this.border=this.scene.add.graphics(),this.border.lineStyle(1,16777215).strokeRoundedRect(-71.75,-24,Qp,48,16),this.add(this.border)},n.createLabel=function(){this.labelContainer=new ef(this.scene,8,"share",vn.Z.GAMEPLAY_DEFAULT.FRAME.IC_SHARE),this.labelContainer.clearTint(),this.labelContainer.getIcon().setTintFill(16777215),this.add(this.labelContainer)},n.initOnClick=function(){var e=this;this.onClick=function(){e.scene.storage.dispatch(Io())}},n.hideContent=function(){this.setDisabled(!0)},n.runEntranceAnimation=function(){var e=(0,s.Z)(h().mark((function e(){var t=this;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new(l())((function(e){t.scene.add.tween({targets:t,alpha:1,duration:200,onStart:function(){t.setDisabled(!0)},onComplete:function(){t.setDisabled(!1),e()}})})));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),t}(vu.Z),eg=function(e){function t(t){var n;return(n=e.call(this,t)||this)._newGameButton=void 0,n._shareButton=void 0,n._stat=void 0,n.setSize(303,244),n.createMatchStatistics(),n.createNewGameButton(),n.createShareButton(),n}(0,o.Z)(t,e);var n=t.prototype;return n.createNewGameButton=function(){var e=new Jp(this.scene);this.add(e),Phaser.Display.Align.In.BottomRight(e,this),this._newGameButton=e},n.createShareButton=function(){var e=new $p(this.scene);this.add(e),Phaser.Display.Align.In.BottomLeft(e,this),this._shareButton=e},n.createMatchStatistics=function(){var e=new Xp(this.scene);this.add(e),Phaser.Display.Align.In.TopCenter(e,this),this._stat=e},n.hideContent=function(){this._stat.hideContent(),this._newGameButton.hideContent(),this._shareButton.hideContent()},n.runEntranceAnimation=function(){var e=(0,s.Z)(h().mark((function e(){var t;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._stat.runEntranceAnimation();case 2:return t=this.scene,e.next=5,t.gameplay.finishGame();case 5:return e.next=7,l().all([this._newGameButton.runEntranceAnimation(),this._shareButton.runEntranceAnimation()]);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),(0,le.Z)(t,[{key:"newGameButton",get:function(){return this._newGameButton}},{key:"shareButton",get:function(){return this._shareButton}},{key:"stat",get:function(){return this._stat}}]),t}(Phaser.GameObjects.Container),tg=function(e){function t(t){var n;return(n=e.call(this,t)||this).winLoseText=void 0,n.modeText=void 0,n.waitingAnimationEvent=void 0,n.waitingAnimation=void 0,n.setSize(303,60),n.createWinLoseText(),n.createModeText(),n}(0,o.Z)(t,e);var n=t.prototype;return n.createWinLoseText=function(){var e=this.scene.make.bitmapText({font:No.Z.BOLD.KEY,size:this.scene.fontSize(24),origin:{x:.5,y:.5},text:"youWin"});e.setMaxSize(270,35),this.add(e),Phaser.Display.Align.In.TopCenter(e,this),this.winLoseText=e},n.createModeText=function(){var e=this.scene.make.bitmapText({font:No.Z.PRIMARY.KEY,size:this.scene.fontSize(16),origin:{x:.5,y:.5},text:"standardMode"});e.setMaxSize(270,25),this.add(e),Phaser.Display.Align.In.BottomCenter(e,this),this.modeText=e},n.addBackground=function(){var e="popup-header-background";if(!this.scene.textures.exists(e)){var t=this.width,n=this.height,i=this.scene.add.graphics();i.fillStyle(65280,.2),i.fillRect(0,0,t,n),i.generateTexture(e,t,n),i.destroy()}var a=this.scene.add.image(0,0,e);this.add(a)},n.updateWinLoseText=function(e){switch(this.stopWaitingAnimation(),e){case Bp.WIN:this.winLoseText.setText("youWin");break;case Bp.LOSE:this.winLoseText.setText("youLose");break;case Bp.DRAW:this.winLoseText.setText("draw");break;case Bp.WAITING_FOR_OPPONENT:default:this.winLoseText.setText("waiting"),this.playWaitingAnimation()}},n.playWaitingAnimation=function(){var e=this,t=0;this.waitingAnimationEvent=this.scene.time.addEvent({delay:500,repeat:-1,callback:function(){t=(t+1)%4;var n=Array(t+1).join(".");e.winLoseText.setTranslationParameter("dot",n)}}),this.waitingAnimation=this.scene.add.tween({targets:this.winLoseText,alpha:.5,repeat:-1,yoyo:!0,delay:250,ease:Phaser.Math.Easing.Sine.InOut})},n.stopWaitingAnimation=function(){if(this.waitingAnimationEvent)try{this.waitingAnimationEvent.remove(),this.waitingAnimationEvent.destroy()}catch(e){console.log("cannot remove event")}if(this.waitingAnimation)try{this.waitingAnimation.remove(),this.waitingAnimation.destroy()}catch(t){console.log("cannot remove animation")}this.winLoseText.setAlpha(1)},n.updateDrawMode=function(){this.modeText.setText("standardMode")},t}(Phaser.GameObjects.Container),ng=function(e){function t(t,n,i){var a;return(a=e.call(this,t,n,i)||this)._header=void 0,a._avatarZone=void 0,a._popupBody=void 0,a.background=void 0,a._darkFilter=void 0,a.setSize(343,486),a.createBackground(),a.createDarkFilter(),a.createHeader(),a.createAvatarZone(),a.createBody(),a}(0,o.Z)(t,e);var n=t.prototype;return n.createBackground=function(){var e=new Cu(this.scene,{key:"play-with-friend-game-over-block-background",radius:6,border:24,width:this.width,height:this.height});this.add(e),this.background=e},n.createDarkFilter=function(){var e=Nf.Challenge.POPUP;if(!this.scene.textures.exists(e)){var t=this.background,n=t.width,i=t.height,a=this.scene.add.graphics();a.fillStyle(Df,Bf),a.fillRoundedRect(0,0,n,i,24),a.generateTexture(e,n,i),a.destroy()}var r=this.scene.add.image(0,0,e);r.kill(),this._darkFilter=r,this.add(r)},n.createHeader=function(){this._header=new tg(this.scene),this.add(this._header),Phaser.Display.Align.In.TopCenter(this._header,this,0,-20)},n.createAvatarZone=function(){this._avatarZone=new zp(this.scene),this.add(this._avatarZone),Phaser.Display.Align.In.TopCenter(this._avatarZone,this,0,-104)},n.createBody=function(){this._popupBody=new eg(this.scene),this.add(this._popupBody),Phaser.Display.Align.In.BottomCenter(this._popupBody,this,0,-20)},n.hideContent=function(){this._avatarZone.hideContent(),this._popupBody.hideContent()},n.runEntranceAnimation=function(){var e=(0,s.Z)(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._avatarZone.runEntranceAnimation();case 2:return e.next=4,this._popupBody.runEntranceAnimation();case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),(0,le.Z)(t,[{key:"header",get:function(){return this._header}},{key:"avatarZone",get:function(){return this._avatarZone}},{key:"popupBody",get:function(){return this._popupBody}},{key:"darkFilter",get:function(){return this._darkFilter}}]),t}(Phaser.GameObjects.Container),ig=vn.Z.GAMEPLAY_DEFAULT,ag=ig.KEY,rg=ig.FRAME,sg=function(e){function t(t){var n;return(n=e.call(this,t)||this).background=void 0,n._popup=void 0,n.setContainerSize(),n.createPopup(),n.createDevButtons(),n}(0,o.Z)(t,e);var n=t.prototype;return n.setContainerSize=function(){var e=this.scene.gameZone,t=e.width,n=e.height;this.setSize(t,n)},n.addBackground=function(){var e="challenge-result-container-background";if(!this.scene.textures.exists(e)){var t=this.width,n=this.height,i=this.scene.add.graphics();i.fillStyle(859421,1),i.fillRect(0,0,t,n),i.generateTexture(e,t,n),i.destroy()}this.background=this.scene.add.image(0,0,e),this.background.kill(),this.add(this.background)},n.createDevButtons=function(){GameCore.Utils.Valid.isDebugger()&&this.createCloseButton()},n.createCloseButton=function(){var e=this,t=new vu.Z(this.scene,40,40),n=this.scene.add.image(0,0,ag,rg.IC_BG_OFF);n.setWorldSize(40,40);var i=this.scene.make.bitmapText({font:No.Z.PRIMARY.KEY,size:this.scene.fontSize(10),text:"Close",origin:{x:.5,y:.5}});i.setCenterAlign(),t.add([n,i]),this.add(t),Phaser.Display.Align.In.BottomLeft(t,this,0,-200),t.onClick=function(){e.scene.screen.close(qa.o4.PLAY_WITH_FRIEND_GAME_OVER_SCREEN)}},n.createPopup=function(){this._popup=new ng(this.scene),this.add(this._popup),Phaser.Display.Align.In.Center(this._popup,this,0,0)},n.hideContent=function(){this._popup.hideContent()},n.runEntranceAnimation=function(){var e=(0,s.Z)(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._popup.runEntranceAnimation();case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),(0,le.Z)(t,[{key:"popup",get:function(){return this._popup}}]),t}(Phaser.GameObjects.Container),og=function(e){function t(t){var n;return(n=e.call(this,t)||this)._beams=void 0,n._bunting=void 0,n.setSize(375,295),n.createBeams(),n.createBunting(),n}(0,o.Z)(t,e);var n=t.prototype;return n.createBeams=function(){this._beams=new pf(this.scene),this.add(this._beams),Phaser.Display.Align.In.TopCenter(this._beams,this)},n.createBunting=function(){this._bunting=new Of(this.scene),this.add(this._bunting),Phaser.Display.Align.In.TopCenter(this._bunting,this)},(0,le.Z)(t,[{key:"beams",get:function(){return this._beams}},{key:"bunting",get:function(){return this._bunting}}]),t}(Phaser.GameObjects.Container),cg=function(e){function t(t){var n;return(n=e.call(this,t)||this)._beams=void 0,n._lightnings=void 0,n.setSize(375,416),n.createBeams(),n.createLightnings(),n}(0,o.Z)(t,e);var n=t.prototype;return n.createBeams=function(){this._beams=new Tp(this.scene),this.add(this._beams),Phaser.Display.Align.In.TopCenter(this._beams,this)},n.createLightnings=function(){this._lightnings=new gp(this.scene),this.add(this._lightnings),Phaser.Display.Align.In.TopCenter(this._lightnings,this)},(0,le.Z)(t,[{key:"beams",get:function(){return this._beams}},{key:"lightnings",get:function(){return this._lightnings}}]),t}(Phaser.GameObjects.Container),lg=new(function(){function e(){this._state=void 0,this._state=Bp.WIN}return(0,le.Z)(e,[{key:"state",get:function(){return this._state},set:function(e){var t=game.globalScene.getActiveScene().screen.get(qa.o4.PLAY_WITH_FRIEND_GAME_OVER_SCREEN);t instanceof ug&&t.setGameOverInfo({state:e}),this._state=e}}]),e}());window.resultStateManager=lg;var ug=function(e){function t(t,n,i,a){var r;return(r=e.call(this,t,n,i,a)||this).slideInAnimation=void 0,r.fadeInAnimation=void 0,r.fadeOutAnimation=void 0,r.playWithFriendGameOverContainer=void 0,r.winDecoration=void 0,r.loseDecoration=void 0,r.footer=void 0,r.closed=!1,r.setBackground=function(){var e=r.scene.theme.getCurrentThemeConfig().backgroundKey;r.background.setTexture(e);var t=r.scene.gameZone,n=t.width,i=t.height;r.background.setWorldSize(n,i),r.scene.world.isLandscape()&&r.background.setScale(r.background.scaleY,r.background.scaleY),r.scene.events.on($s.BACKGROUND_CHANGED,(function(e){r.background.setTexture(e),r.background.setWorldSize(n,i),r.scene.world.isLandscape()&&r.background.setScale(r.background.scaleY,r.background.scaleY)}))},r.handleClickTournaments=function(){r.scene.time.delayedCall(100,(function(){r.closed||r.close()}))},r.scene instanceof om&&r.setBackground(),r.setDepth(qa.Ks.POPUP),r.createContainer(),r.createBanners(),r.createFooter(),r.createBottomLogo(),yn.Z.removeObject(r.background),r}(0,o.Z)(t,e);var n=t.prototype;return n.open=function(t){e.prototype.open.call(this,t),this.closed=!1,this.isGameZoneTooWide()&&(this.winDecoration.kill(),this.loseDecoration.kill()),this.background.setAlpha(1),this.runOpenAnimation(),lg.state!==Bp.LOSE&&(this.playConfettiAnimation(),this.updateResultInfo())},n.close=function(){this.closed=!0,this.runCloseAnimation(),this.stopConfettiAnimation()},n.runOpenAnimation=function(){var e=(0,s.Z)(h().mark((function e(){var t,n,i,a,r=this;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==(t=this.slideInAnimation)||null==(n=t.tween)||!n.isPlaying()){e.next=2;break}return e.abrupt("return");case 2:if(this.scene.audio.playSound(Ja.Z.POPUP_SHOW),i=this.scene.ads.getBannerHeight(),a=i,this.playWithFriendGameOverContainer.setAlpha(0).setY(a).hideContent(),this.winDecoration.bunting.stopWavingAnimation(),this.loseDecoration.lightnings.hideContent(),this.slideInAnimation||(this.slideInAnimation=new Ao.Z({targets:[this.playWithFriendGameOverContainer],props:{y:{from:a,to:-i/2-33,ease:Phaser.Math.Easing.Back.Out},alpha:{from:0,to:1}},duration:300,onComplete:function(){var e=(0,s.Z)(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.playWithFriendGameOverContainer.runEntranceAnimation();case 2:r.footer.playBtn.setDisabled(!1);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()})),this.fadeInAnimation||(this.fadeInAnimation=new Fc.Z({targets:[this],duration:300})),this.fadeInAnimation.play(),!this.winDecoration.active){e.next=15;break}return e.next=14,this.winDecoration.bunting.runEntranceAnimation();case 14:this.winDecoration.bunting.playWavingAnimation();case 15:if(!this.loseDecoration.active){e.next=18;break}return e.next=18,this.loseDecoration.lightnings.runEntranceAnimation();case 18:this.slideInAnimation.play();case 19:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.runCloseAnimation=function(){var t,n,i=this;null!=(t=this.fadeOutAnimation)&&null!=(n=t.tween)&&n.isPlaying()||(this.scene.audio.playSound(Ja.Z.POPUP_OFF),this.fadeOutAnimation||(this.fadeOutAnimation=new yh.Z({targets:[this],props:{alpha:0},duration:300,onComplete:function(){yn.Z.closeScreen(i),e.prototype.close.call(i),i.footer.playBtn.setDisabled(!0)}})),this.fadeOutAnimation.play())},n.createBanners=function(){this.createRibbonBanner(),this.createLightningThunderBanner()},n.createRibbonBanner=function(){this.winDecoration=new og(this.scene),this.winDecoration.kill();var e=this.scene.world.getWorldSize().height,t=this.scene.ads.getBannerHeight(),n=Math.max(0,-e/2+t/2+242+100);Phaser.Display.Align.In.TopCenter(this.winDecoration,this,0,n),this.add(this.winDecoration)},n.createLightningThunderBanner=function(){this.loseDecoration=new cg(this.scene),this.loseDecoration.kill(),Phaser.Display.Align.In.TopCenter(this.loseDecoration,this),this.add(this.loseDecoration)},n.createContainer=function(){this.playWithFriendGameOverContainer=new sg(this.scene),this.add(this.playWithFriendGameOverContainer)},n.createFooter=function(){this.footer=new $f(this.scene,!1,qa.o4.PLAY_WITH_FRIEND_GAME_OVER_SCREEN),this.add(this.footer),this.bringToTop(this.footer),this.footer.setInteractive();var e=this.scene.ads.getBannerHeight(),t=this.scene.gameZone.width>375?-10:0;Phaser.Display.Align.In.BottomCenter(this.footer,this.background,0,-e+t)},n.createBottomLogo=function(){if(!this.scene.world.isLandscape()){var e=new ip(this.scene);Phaser.Display.Align.In.BottomCenter(e,this),this.add(e)}},n.isGameZoneTooWide=function(){return this.scene.gameZone.width>450},n.playConfettiAnimation=function(){if(this.scene instanceof om){var e=this.scene.gameplay.confettiSmallFallDown;this.scene.children.bringToTop(e),e.run(8,0,0)}},n.stopConfettiAnimation=function(){this.scene instanceof om&&this.scene.gameplay.confettiSmallFallDown.stop()},n.updateResultInfo=function(){var e=this.scene.storage.getState(),t=ts(e),n=ms(e),i=this.scene.player.getPlayer().playerId,a=us(e).playerId,r=(n[i]||{}).score,s=(n[a]||{}).score,o=ds(e,{playerId:i}),c=fs(e,{opponentId:a});t===ma&&(o=!0,c=!0),console.log({isPlayerFinish:o,isOpponentFinish:c});var l=os(e);console.warn({matchData:l});var u,h,d=l.whitePlayerId,f=l.extraData,p=void 0===f?{}:f,g=i===d,m=g?p.blackPlayerData:p.whitePlayerData,v=(g?p.whitePlayerData:p.blackPlayerData)||{},y=v.moves,b=v.time,A=m||{},E=A.moves,S=A.time,T=o&&c,w=T&&r>s,C=T&&r<s;console.log({isPlayerWin:w,isOpponentWin:C}),u=T?w&&C?Bp.DRAW:w?Bp.WIN:Bp.LOSE:Bp.WAITING_FOR_OPPONENT,console.log({playerScore:r,opponentScore:s}),this.setGameOverInfo({state:u,playerScore:o?r:void 0,opponentScore:c?s:void 0,playerMoves:o?y:void 0,opponentMoves:c?E:void 0,playerTime:o?b:void 0,opponentTime:c?S:void 0}),this.scene.storage.dispatch((void 0===(h=!1)&&(h=!1),{type:"MATCH_RESUTL_FROM_MESSAGE",payload:{matchResultFromMessage:h}}))},n.setGameOverInfo=function(e){var t=this.playWithFriendGameOverContainer.popup,n=t.header,i=t.avatarZone,a=t.popupBody,r=i.youAvatar,s=i.opponentAvatar,o=this.scene.player.getPlayer(),c=o.playerId,l=o.photo,u=o.name;r.avatar.loadPhoto(c,l,100),r.setUsername(u);var h=this.scene.storage.getState(),d=us(h),f=d.playerId,p=d.photo,g=d.name;if(s.avatar.loadPhoto(f,p,100),s.setUsername(g),e.state)switch(n.updateWinLoseText(e.state),i.updateState(e.state),e.state){case Bp.LOSE:this.winDecoration.kill(),this.loseDecoration.revive(),this.enableDarkBackground(),this.stopConfettiAnimation();break;case Bp.WIN:case Bp.DRAW:this.winDecoration.revive(),this.loseDecoration.kill(),this.enableDarkBackground(!1);break;case Bp.WAITING_FOR_OPPONENT:default:this.winDecoration.kill(),this.loseDecoration.kill(),this.stopConfettiAnimation(),this.enableDarkBackground(!1)}n.updateDrawMode();var m="waiting",v=a.stat,y=v.scoreStat,b=v.movesStat,A=v.timeStat;void 0!==e.playerScore?y.setPlayerStat(""+e.playerScore):y.setPlayerStat(m,!1),void 0!==e.opponentScore?y.setOpponentStat(""+e.opponentScore):y.setOpponentStat(m,!1),void 0!==e.playerMoves?b.setPlayerStat(""+e.playerMoves):b.setPlayerStat(m,!1),void 0!==e.opponentMoves?b.setOpponentStat(""+e.opponentMoves):b.setOpponentStat(m,!1),void 0!==e.playerTime?A.setPlayerStat((0,$a.F0)(e.playerTime,!1)):A.setPlayerStat(m,!1),void 0!==e.opponentTime?A.setOpponentStat((0,$a.F0)(e.opponentTime,!1)):A.setOpponentStat(m,!1)},n.enableDarkBackground=function(e){void 0===e&&(e=!0),yn.Z.openScreen(this,e);var t=this.playWithFriendGameOverContainer.popup.background;e?(this.background.setPipeline("Grayscale"),t.setPipeline("Grayscale")):(this.background.resetPipeline(),t.resetPipeline())},n.updateFinishingChallenge=function(){this.playWithFriendGameOverContainer.popup.popupBody.newGameButton.switchState(qp.CLOSE)},t}(GameCore.Screen),hg=function(){function e(){this.payload=void 0}var t=e.prototype;return t.getData=function(){var e=(0,s.Z)(h().mark((function e(){var t,n,i;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.payload){e.next=2;break}return e.abrupt("return",this.payload);case 2:return e.next=4,l().all([this.getAPITournamentData(),this.getFacebookTournamentData()]);case 4:return t=e.sent,n=t[0],i=t[1],this.payload=n||i,e.abrupt("return",this.payload);case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),t.setData=function(e){this.payload=e},t.clearData=function(){this.payload=void 0},t.getAPITournamentData=function(){var e=(0,s.Z)(h().mark((function e(){var t,n,i;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=window.game.storage.getState(),n=Fr(t),e.next=4,(0,Ur.Iy)();case 4:if(0!==(i=e.sent).length){e.next=7;break}return e.abrupt("return",void 0);case 7:return e.abrupt("return",D()(i).call(i,(function(e){return e.id===n})));case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),t.getFacebookTournamentData=function(){var e=(0,s.Z)(h().mark((function e(){var t,n,i,a,r;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,window.game.facebook.getTournamentAsync();case 2:if(t=e.sent,n=t.getPayload()){e.next=6;break}return e.abrupt("return",void 0);case 6:if(i=JSON.parse(n),a=i.playerName,i.leaderboardId){e.next=10;break}return e.abrupt("return",void 0);case 10:return r={id:t.getID(),title:t.getTitle()||a+"'s Tournament",payload:i,endTime:t.getEndTime(),contextID:t.getContextID()},e.abrupt("return",r);case 12:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),e}(),dg=new hg,fg=n(665),pg=vn.Z.GAMEPLAY_DEFAULT,gg=pg.KEY,mg=pg.FRAME,vg=function(e){function t(t){var n;return(n=e.call(this,t)||this).medalNo123=void 0,n.customizedMedal=void 0,n.rankLabel=void 0,n.rank=1,n.setSize(20,20),n.createMedal123(),n.createCustomizedMedal(),n.createRankLabel(),n}(0,o.Z)(t,e);var n=t.prototype;return n.getRank=function(){return this.rank},n.setRank=function(e){var t=function(e){return e>99?"99+":0===e?"?":e.toString()}(e);switch(this.rank=e,this.rankLabel.setText(t),this.medalNo123.kill(),this.customizedMedal.kill(),t){case"1":this.medalNo123.revive(),this.medalNo123.setFrame(mg.GOLD),this.rankLabel.setTint(16777215);break;case"2":this.medalNo123.revive(),this.medalNo123.setFrame(mg.SILVER),this.rankLabel.setTint(5658198);break;case"3":this.medalNo123.revive(),this.medalNo123.setFrame(mg.BRONZE),this.rankLabel.setTint(16777215);break;default:this.customizedMedal.revive(),this.rankLabel.setTint(3774208)}},n.createMedal123=function(){this.medalNo123=this.scene.add.image(0,0,gg,mg.GOLD),this.medalNo123.setWorldSize(19,20.5),this.add(this.medalNo123)},n.createCustomizedMedal=function(){this.customizedMedal=this.scene.add.image(0,0,gg,mg.CUSTOM_MEDAL),this.customizedMedal.setWorldSize(20,20),this.add(this.customizedMedal)},n.createRankLabel=function(){this.rankLabel=this.scene.make.bitmapText({font:No.Z.PRIMARY.KEY,size:this.scene.fontSize(10),origin:{x:.5,y:.5},text:""+this.rank}),this.rankLabel.setIgnoreLanguage(),this.add(this.rankLabel)},t}(Phaser.GameObjects.Container);var yg=vn.Z.DEFAULT,bg=yg.KEY,Ag=yg.FRAME,Eg=vn.Z.GAMEPLAY_DEFAULT,Sg=Eg.KEY,Tg=Eg.FRAME,wg=function(e){function t(t,n){var i;return void 0===n&&(n=!1),(i=e.call(this,t)||this).scene=void 0,i._isPlayer=!1,i.normalPlayerBackground=void 0,i.border=void 0,i.avatar=void 0,i.username=void 0,i.score=void 0,i.medalIcon=void 0,i.scoreIcon=void 0,i.payload=void 0,i.instantPlayerVisualIndicator=!1,i.scene=t,i.setSize(303,44),i.createNormalPlayerBackground(),i.createBorder(),i.createMedalIcon(),i.createAvatar(),i.createUsername(),i.createScore(),i.createScoreIcon(),i.alignComponents(),i.isPlayer=n,i}(0,o.Z)(t,e);var n=t.prototype;return n.createNormalPlayerBackground=function(){this.normalPlayerBackground=new xu.Z(this.scene,0,0,this.width,this.height,8,16777215).setAlpha(1),this.add(this.normalPlayerBackground)},n.createBorder=function(){var e=this.scene.add.graphics();e.lineStyle(1,16777215),e.strokeRoundedRect(-this.width/2,-this.height/2,this.width,this.height,8),this.add(e),this.border=e},n.createAvatar=function(){this.avatar=new Go(this.scene,{key:bg,background:Ag.BLANK,width:42,height:42,loadDelay:100}),this.avatar.update(),this.avatar.background.kill(),this.avatar.loadPhoto(da.Z.AVATAR.KEY,da.Z.AVATAR.FILE,100),this.add(this.avatar)},n.createUsername=function(){this.username=this.scene.make.text({style:{fontFamily:No.Z.FONT_FAMILY},origin:{x:0,y:.5}}),this.username.setHighQuality(),this.username.setFontSize(16),this.username.setTranslationParameter("dot","..."),this.add(this.username)},n.createScore=function(){this.score=this.scene.make.bitmapText({font:No.Z.PRIMARY.KEY,size:this.scene.fontSize(14),origin:{x:1,y:.5}}),this.score.setIgnoreLanguage(),this.add(this.score),this.setScore(0)},n.createScoreIcon=function(){this.scoreIcon=this.scene.add.image(0,0,Sg,Tg.MEDAL_STAR),this.scoreIcon.setWorldSize(20,20),this.add(this.scoreIcon)},n.createMedalIcon=function(){this.medalIcon=new vg(this.scene),this.medalIcon.kill(),this.add(this.medalIcon)},n.setScore=function(e){this.score.setText(""+e)},n.setUsername=function(e,t){void 0===t&&(t=!0),"you"===e.toLocaleLowerCase()&&(e="you",t=!1);var n=GameCore.Utils.String.getShortName(e,12),i=GameCore.Utils.String.removeDiacritics(n);this.username.setText(i),this.username.setIgnoreLanguage(t)},n.getTimerIcon=function(){return this.scoreIcon},n.updateData=function(e){var t,n,i=e.playerId,a=void 0===i?"10":i,r=e.name,s=void 0===r?"???":r,o=e.photo,c=void 0===o?"":o,l=e.score,u=void 0===l?0:l,h=e.rank,d=void 0===h?0:h;this.payload&&(t=e,n=this.payload,t.playerId===n.playerId&&t.photo===n.photo&&t.score===n.score&&t.rank===n.rank&&t.name===n.name)||(this.payload=e,this.isPlayer=a===this.scene.player.getPlayerId(),this.scoreIcon.setAlpha(0),this.score.setAlpha(0),this.username.setAlpha(0),this.avatar.setAlpha(0),this.setScore(u),this.medalIcon.setRank(d),this.updateNormalPlayerBackground(d),0===u?(this.setUsername("waiting",!1),this.avatar.loadPhoto(da.Z.AVATAR.KEY,da.Z.AVATAR.FILE,100)):(this.setUsername(s),this.avatar.loadPhoto(a,c,100)),this.medalIcon.revive(),Phaser.Display.Align.To.LeftCenter(this.scoreIcon,this.score,8),this.playRecentlyUpdatedComponentEntrancesAnimation())},n.getBackgroundColorViaRank=function(e){switch(e){case 1:return 16771094;case 2:return 16777215;case 3:return 14265494;default:return 0}},n.getBackgroundAlphaViaRank=function(e){return 1===e||2===e||3===e?.32:.25},n.updateNormalPlayerBackground=function(e){var t=this.getBackgroundColorViaRank(e),n=this.getBackgroundAlphaViaRank(e);this.normalPlayerBackground.setFillStyle(t,n)},n.alignComponents=function(){Phaser.Display.Align.In.LeftCenter(this.medalIcon,this,-8),Phaser.Display.Align.To.RightCenter(this.avatar,this.medalIcon,6),Phaser.Display.Align.To.RightCenter(this.username,this.avatar,3),Phaser.Display.Align.In.RightCenter(this.score,this,-8),Phaser.Display.Align.To.LeftCenter(this.scoreIcon,this.score,8)},n.playRecentlyUpdatedComponentEntrancesAnimation=function(){this.scene.add.tween({targets:[this.scoreIcon,this.score,this.username,this.avatar],props:{alpha:{from:0,to:1}},duration:150})},n.hideContent=function(){var e;if(this._isPlayer){this.border.kill(),this.normalPlayerBackground.revive();var t=this.getBackgroundAlphaViaRank((null==(e=this.payload)?void 0:e.rank)||1);this.normalPlayerBackground.setAlpha(t)}},n.showSpecialBackgroundAnimation=function(){var e=(0,s.Z)(h().mark((function e(){var t=this;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new(l())((function(e){var n=[t.border];t.scene.add.tween({targets:n,duration:200,onStart:function(){n.forEach((function(e){return e.revive()}))},props:{alpha:{from:0,to:.25}},onComplete:e})})));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),n.runScalingAnimation=function(){var e=(0,s.Z)(h().mark((function e(){var t=this;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new(l())((function(e){t.scene.add.tween({targets:t,duration:200,ease:Phaser.Math.Easing.Cubic.In,props:{scale:.95},onComplete:function(){t.scene.add.tween({targets:t,ease:Phaser.Math.Easing.Elastic.Out,easeParams:[.1,.45],props:{scale:1},onComplete:e})}})})));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),n.runEntranceAnimation=function(){var e=(0,s.Z)(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._isPlayer){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,l().all([this.showSpecialBackgroundAnimation(),this.runScalingAnimation()]);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),(0,le.Z)(t,[{key:"isPlayer",get:function(){return this._isPlayer},set:function(e){this._isPlayer=e,this._isPlayer&&this.instantPlayerVisualIndicator?(this.border.revive(),this.normalPlayerBackground.kill()):(this.border.kill(),this.normalPlayerBackground.revive())}}]),t}(Phaser.GameObjects.Container);var Cg=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n.leaders=[],n.loading=void 0,n.payload=[],n.scene=t,n.createLeaders(),n.alignLeaders(),n.createLoading(),n}(0,o.Z)(t,e);var n=t.prototype;return n.updateLeaders=function(e){(function(e,t){var n,i;if(e.length!==t.length)return!1;for(var a=Di()(n=S()(e).call(e)).call(n,(function(e,t){return e.rank-t.rank})),r=Di()(i=S()(t).call(t)).call(i,(function(e,t){return e.rank-t.rank})),s=0;s<a.length;s++){var o=a[s],c=r[s];if(o.playerId!==c.playerId||o.photo!==c.photo||o.score!==c.score||o.rank!==c.rank||o.name!==c.name)return!1}return!0})(this.payload,e)||(this.payload=e,this.leaders.forEach((function(t,n){t.updateData((0,r.Z)({},e[n]))})))},n.createLeaders=function(){for(var e=0;e<4;e++){var t=new wg(this.scene);this.leaders.push(t),3===e&&(t.isPlayer=!0);var n={playerId:e.toString(),photo:"",score:0,rank:e+1,name:"player"};t.updateData(n)}this.add(this.leaders)},n.alignLeaders=function(){var e=this,t=this.leaders.length,n=t*this.leaders[0].height+8*(t-1);this.setSize(303,n),this.leaders.forEach((function(t,n){0!==n?Phaser.Display.Align.To.BottomCenter(t,e.leaders[n-1],0,8):Phaser.Display.Align.In.TopCenter(t,e)}))},n.createLoading=function(){this.loading=new fg.Z(this.scene),this.loading.revive(),this.add(this.loading)},n.hideContent=function(){this.leaders.forEach((function(e){return e.setAlpha(0)})),this.leaders.forEach((function(e){return e.hideContent()}))},n.runEntranceAnimation=function(){var e=(0,s.Z)(h().mark((function e(){var t,n,i,a,r=this;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=De()(t=this.leaders).call(t,(function(e,t){return new(l())((function(n){r.scene.add.tween({targets:[e],duration:250,delay:250*t/2,ease:Phaser.Math.Easing.Cubic.Out,props:{alpha:{from:0,to:1},y:{from:e.y+e.height/2,to:e.y},scale:{from:.85,to:1,ease:Phaser.Math.Easing.Elastic.Out,easeParams:[.1,.45],duration:1e3}},onComplete:n})}))})),e.next=3,l().all(i);case 3:return a=De()(n=this.leaders).call(n,(function(e){return e.runEntranceAnimation()})),e.next=6,l().all(a);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),t}(Phaser.GameObjects.Container);for(var Ig=function(e){function t(t){var n;return(n=e.call(this,t)||this).endTime=void 0,n.countdownTimer=void 0,n.timerText=void 0,n.updateCountdown=(0,s.Z)(h().mark((function e(){var t,i,a;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=Date.now(),i=1e3*n.endTime-t,a=Math.round(Math.abs(i)/864e5),i<0&&(i=0),0!==i){e.next=7;break}return n.timerText.setText("noCompetition"),e.abrupt("return");case 7:a>=1?(n.timerText.setTranslationParameter("count",a),n.timerText.setText("competitionEndsInDays")):(n.timerText.setTranslationParameter("time",(0,$a.F0)(Math.abs(i),!0)),n.timerText.setText("competitionEndsInHMS"));case 8:case"end":return e.stop()}}),e)}))),n.setSize(375,30),n.createTimerContainer(),n.createCountdownTimer(),t.add.existing((0,Ua.Z)(n)),n}(0,o.Z)(t,e);var n=t.prototype;return n.createTimerContainer=function(){this.timerText=this.scene.make.bitmapText({font:No.Z.PRIMARY.KEY,size:this.scene.fontSize(15.5),origin:{x:.5,y:0},y:-10}),this.timerText.setCenterAlign(),this.timerText.setTint(16579837),this.timerText.setMaxSize(300,40),this.add([this.timerText])},n.createCountdownTimer=function(){var e;void 0!=this.endTime&&(0!=this.endTime?(null==(e=this.countdownTimer)||e.destroy(),this.countdownTimer=this.scene.time.addEvent({loop:!0,delay:1e3,startAt:1e3,callback:this.updateCountdown})):this.timerText.setText("noCompetition"))},n.setCountdown=function(e){this.endTime=e,this.createCountdownTimer()},n.getRemain=function(){if(void 0!=this.endTime){var e=Date.now(),t=1e3*this.endTime-e;return t<0?0:t}},t}(Phaser.GameObjects.Container),xg=Ig,Pg=vn.Z.GAMEPLAY_DEFAULT,kg=Pg.KEY,_g=Pg.FRAME,Og=Rf,Rg=Ku.TOURNAMENT_BLOCK.TITLE,Lg=16777215,Dg=Og.WIDTH,Bg=143.5,Ng=48,Mg={playerId:"10",name:"???",photo:"",score:0,rank:0},Gg=[],Fg=0;Fg<4;Fg++)Gg.push((0,r.Z)({},Mg,{rank:Fg+1}));var Zg=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n.title=void 0,n.timer=void 0,n.topLine=void 0,n.bottomLine=void 0,n.leaderList=void 0,n.rematchButton=void 0,n.newGameButton=void 0,n.lines=[],n.buttons=[],n.scene=t,n.setSize(343,418),n.createBackground(),n.createTitle(),n.createTimer(),n.createTopLine(),n.createLeaderList(),n.createBottomLine(),n.createRematchButton(),n.createNewGameButton(),n.alignComponents(),n.createCloseButton(),n}(0,o.Z)(t,e);var n=t.prototype;return n.createBackground=function(){this.setSize(this.width,this.height);var e=new Cu(this.scene,{key:"tournament-result-container",radius:6,border:24,width:this.width,height:this.height});this.add(e)},n.createTitle=function(){this.title=this.scene.make.bitmapText({font:No.Z.BOLD.KEY,size:this.scene.fontSize(Rg),text:"Summer Tournament",origin:{x:.5,y:.5}}),this.title.setIgnoreLanguage(!0,"en"),this.add(this.title)},n.createTimer=function(){this.timer=new xg(this.scene),this.add(this.timer)},n.createTopLine=function(){this.topLine=this.scene.add.line(0,0,0,0,Og.WIDTH,0,Lg,.2),this.add(this.topLine),this.lines.push(this.topLine)},n.createLeaderList=function(){this.leaderList=new Cg(this.scene),this.add(this.leaderList)},n.createBottomLine=function(){this.bottomLine=this.scene.add.line(0,0,0,0,Og.WIDTH,0,Lg,.2),this.add(this.bottomLine),this.lines.push(this.bottomLine)},n.createRematchButton=function(){var e=this;this.rematchButton=new vu.Z(this.scene,Bg,Ng),this.rematchButton.onClick=function(){e.scene instanceof om&&e.scene.gameplay.replayGame(),e.scene.screen.close(qa.o4.TOURNAMENTS_RESULT_SCREEN)},this.rematchButton.setName("RetryTournament");var t=new xu.Z(this.scene,0,0,Bg,Ng,16,16777215,.24),n=this.scene.add.graphics();n.lineStyle(1,16777215),n.strokeRoundedRect(-71.75,-24,Bg,Ng,16);var i=new ef(this.scene,8,"tryAgain",_g.IC_REPLAY);i.clearTint(),i.getIcon().setTintFill(16777215),this.rematchButton.add([t,n,i]).setSize(Bg,Ng),this.add([this.rematchButton]),this.buttons.push(this.rematchButton)},n.createNewGameButton=function(){var e=this;this.newGameButton=new bh.Z(this.scene,Bg,Ng,16,16777215),this.newGameButton.onClick=(0,s.Z)(h().mark((function t(){return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.scene.gameplay.handleShowInterstitialAd();case 2:return t.next=4,e.scene.handlePlaySingle();case 4:e.scene.screen.close(qa.o4.TOURNAMENTS_RESULT_SCREEN);case 5:case"end":return t.stop()}}),t)}))),this.newGameButton.setName("NewGame");var t=new ef(this.scene);this.newGameButton.add(t),this.newGameButton.setSize(Bg,Ng),this.add([this.newGameButton]),this.buttons.push(this.newGameButton)},n.createCloseButton=function(){var e=this;if(GameCore.Utils.Valid.isDebugger()){var t=new vu.Z(this.scene,40,40);this.add(t);var n=this.scene.add.image(0,0,kg,_g.IC_BG_OFF);n.setWorldSize(40,40);var i=this.scene.make.bitmapText({font:No.Z.PRIMARY.KEY,size:this.scene.fontSize(10),text:"Close",origin:{x:.5,y:.5}});i.setCenterAlign(),t.add([n,i]),Phaser.Display.Align.In.TopRight(t,this,0,-0),t.onClick=(0,s.Z)(h().mark((function t(){return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.scene.screen.close(qa.o4.TOURNAMENTS_RESULT_SCREEN);case 1:case"end":return t.stop()}}),t)})))}},n.alignComponents=function(){Phaser.Display.Align.In.TopCenter(this.title,this,0,-16),Phaser.Display.Align.To.BottomCenter(this.timer,this.title,0,6),Phaser.Display.Align.To.BottomCenter(this.topLine,this.timer,0,20),Phaser.Display.Align.To.BottomCenter(this.leaderList,this.topLine,0,20),Phaser.Display.Align.To.BottomCenter(this.bottomLine,this.leaderList,0,20),Phaser.Display.Align.To.BottomLeft(this.rematchButton,this.bottomLine,0,24),Phaser.Display.Align.To.BottomRight(this.newGameButton,this.bottomLine,0,24);var e=this.rematchButton.x,t=this.newGameButton.x;Phaser.Display.Align.In.BottomCenter(this.rematchButton,this,0,-16),Phaser.Display.Align.In.BottomCenter(this.newGameButton,this,0,-16),this.rematchButton.x=e,this.newGameButton.x=t},n.updateTitle=function(e){void 0===e&&(e="Your tournament");var t=GameCore.Utils.String.removeDiacritics(e);if(this.title.setText(t),!(this.title.width<=Dg))for(var n=1;n<t.length;n++)if(this.title.setText(t.substring(0,n)+"..."),this.title.width>Dg){this.title.setText(t.substring(0,n-1)+"...");break}},n.updateTimer=function(e){this.timer.setCountdown(e)},n.updateLeadersViaId=function(){var e=(0,s.Z)(h().mark((function e(t){var n,i,a,s,o,c,l,u,d,f,p=this;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=_()(n=[]).call(n,Gg),this.leaderList.loading.revive(),this.leaderList.bringToTop(this.leaderList.loading),e.prev=3,e.next=6,(0,Ur.H$)(t,{limit:4});case 6:if(a=e.sent,console.log("update tournament result",{leaders:a}),!(a.length>0)){e.next=24;break}return o=De()(a).call(a,(function(e){return e.playerId})),e.next=12,this.scene.profile.requestProfiles(o);case 12:if(c=this.scene.profile.getProfiles(),l=!1,u=Re()(s=De()(a).call(a,(function(e){var t=e.playerId,n=e.score,i=e.rank,a=c[t];if(t===p.scene.player.getPlayerId()&&(l=!0),!a)return{playerId:t,photo:"",score:n,rank:i,name:"Player"};var r=a.name;return{playerId:t,photo:a.photo,score:n,rank:i,name:r}}))).call(s,(function(e){return null!==e})),!(u.length<1)){e.next=17;break}throw new Error("Leaderboard is empty");case 17:if(this.leaderList.revive(),u.forEach((function(e,t){i[t]=e})),l){e.next=24;break}return e.next=22,this.getCurrentPlayerLeaderDataPayload(t);case 22:d=e.sent,i[3]=(0,r.Z)({},d,{name:"You"});case 24:f=this.scene.player.getPlayerId(),i.forEach((function(e){e.playerId===f&&(e.name="You")})),console.log("update tournament result",{leadersDataPayload:i}),this.leaderList.updateLeaders(i),e.next=33;break;case 30:e.prev=30,e.t0=e.catch(3),console.warn(e.t0);case 33:return e.prev=33,this.leaderList.loading.kill(),e.finish(33);case 36:case"end":return e.stop()}}),e,this,[[3,30,33,36]])})));return function(t){return e.apply(this,arguments)}}(),n.getCurrentPlayerLeaderDataPayload=function(){var e=(0,s.Z)(h().mark((function e(t){var n,i,a,r,s,o,c;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.scene.player.getPlayer(),i=n.playerId,a=n.name,r=n.photo,e.next=3,(0,Ur.xB)(i,t);case 3:return s=e.sent,console.log({player:s}),o=s.score,c=s.rank,e.abrupt("return",{playerId:i,photo:r,score:o,rank:c,name:a});case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.hideContent=function(){this.leaderList.hideContent(),this.lines.forEach((function(e){e.setAlpha(0),e.scaleX=0})),this.buttons.forEach((function(e){return e.setAlpha(0)}))},n.runEntranceAnimationLines=function(){var e=(0,s.Z)(h().mark((function e(){var t,n,i=this;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return 200,n=De()(t=this.lines).call(t,(function(e,t){return new(l())((function(n){i.scene.add.tween({targets:[e],duration:200,delay:200*t/2,props:{alpha:{from:0,to:1},scaleX:{from:0,to:1}},onComplete:n})}))})),e.next=4,l().all(n);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.runEntranceAnimationButtons=function(){var e=(0,s.Z)(h().mark((function e(){var t,n,i=this;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=De()(t=this.buttons).call(t,(function(e){return new(l())((function(t){i.scene.add.tween({targets:e,alpha:1,duration:200,onComplete:function(){e.setDisabled(!1),t(),i.newGameButton.runPulsate()}})}))})),e.next=3,l().all(n);case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.runEntranceAnimation=function(){var e=(0,s.Z)(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.runEntranceAnimationLines();case 2:return e.next=4,this.leaderList.runEntranceAnimation();case 4:return e.next=6,this.scene.gameplay.finishGame();case 6:return e.next=8,this.runEntranceAnimationButtons();case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),t}(Phaser.GameObjects.Container),Ug=function(e){function t(t,n,i,a){var r;return(r=e.call(this,t,n,i,a)||this).scene=void 0,r.fadeInAnimation=void 0,r.fadeOutAnimation=void 0,r.slideInAnimation=void 0,r.container=void 0,r.winDecoration=void 0,r.footer=void 0,r.closed=!1,r.handleClickTournaments=function(){r.scene.time.delayedCall(100,(function(){r.closed||r.close()}))},r.setBackground=function(){var e=r.scene.theme.getCurrentThemeConfig().backgroundKey;r.background.setTexture(e);var t=r.scene.gameZone,n=t.width,i=t.height;r.background.setWorldSize(n,i),r.scene.world.isLandscape()&&r.background.setScale(r.background.scaleY,r.background.scaleY),r.scene.events.on($s.BACKGROUND_CHANGED,(function(e){r.background.setTexture(e),r.background.setWorldSize(n,i),r.scene.world.isLandscape()&&r.background.setScale(r.background.scaleY,r.background.scaleY)}))},r.scene=t,r.setBackground(),r.createContainer(),r.createRibbonBanner(),r.createFooter(),r.createBottomLogo(),r.setDepth(qa.Ks.POPUP),yn.Z.removeObject(r.background),r}(0,o.Z)(t,e);var n=t.prototype;return n.createContainer=function(){this.container=new Zg(this.scene),this.add(this.container)},n.createRibbonBanner=function(){this.winDecoration=new og(this.scene);var e=this.scene.world.getWorldSize().height,t=this.scene.ads.getBannerHeight(),n=Math.max(0,-e/2+t/2+242+90);Phaser.Display.Align.In.TopCenter(this.winDecoration,this,0,n),this.add(this.winDecoration)},n.createFooter=function(){this.footer=new $f(this.scene,!1,qa.o4.NO_MORE_MOVES_SCREEN),this.add(this.footer),this.bringToTop(this.footer),this.footer.setInteractive();var e=this.scene.ads.getBannerHeight(),t=this.scene.gameZone.width>375?-10:0;Phaser.Display.Align.In.BottomCenter(this.footer,this.background,0,-e+t)},n.createBottomLogo=function(){if(!this.scene.world.isLandscape()){var e=new ip(this.scene);this.add(e),Phaser.Display.Align.In.BottomCenter(e,this)}},n.open=function(){var t=(0,s.Z)(h().mark((function t(n){return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.prototype.open.call(this,n),this.updateInfo(),this.container.setAlpha(1),this.container.setInteractive(),this.background.setAlpha(1),this.runOpenAnimation(),this.closed=!1,this.scene.children.bringToTop(this.scene.gameplay.confettiSmallFallDown),this.scene.gameplay.confettiSmallFallDown.run(8,0,0);case 9:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),n.updateInfo=function(){var e=(0,s.Z)(h().mark((function e(){var t,n,i;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,dg.getData().catch((function(){return{id:0,title:"Your Tournament",endTime:604800+Date.now()/1e3,contextID:""}}));case 2:if(n=e.sent){e.next=5;break}return e.abrupt("return");case 5:if(this.container.updateTitle(n.title),this.container.updateTimer(n.endTime),!(i=null==(t=n.payload)?void 0:t.leaderboardId)){e.next=11;break}return e.next=11,this.container.updateLeadersViaId(i);case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.close=function(){this.closed=!0,this.runCloseAnimation(),this.stopConfettiAnimation()},n.runOpenAnimation=function(){var e=(0,s.Z)(h().mark((function e(){var t,n,i,a=this;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==(t=this.slideInAnimation)||null==(n=t.tween)||!n.isPlaying()){e.next=2;break}return e.abrupt("return");case 2:return this.scene.audio.playSound(Ja.Z.POPUP_SHOW),i=this.scene.ads.getBannerHeight(),this.container.setAlpha(0),this.container.y=i,this.container.hideContent(),this.winDecoration.bunting.stopWavingAnimation(),this.container.newGameButton.stopPulsate(),this.slideInAnimation||(this.slideInAnimation=new Ao.Z({targets:[this.container],ease:Phaser.Math.Easing.Back.Out,props:{y:{from:i,to:-i/2},alpha:{from:0,to:1}},duration:300,onComplete:function(){var e=(0,s.Z)(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.container.runEntranceAnimation();case 2:a.footer.playBtn.setDisabled(!1);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()})),this.fadeInAnimation||(this.fadeInAnimation=new Fc.Z({targets:[this],duration:300})),this.fadeInAnimation.play(),e.next=14,this.winDecoration.bunting.runEntranceAnimation();case 14:this.winDecoration.bunting.playWavingAnimation(),this.slideInAnimation.play();case 16:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.runCloseAnimation=function(){var t,n,i=this;null!=(t=this.fadeOutAnimation)&&null!=(n=t.tween)&&n.isPlaying()||(this.scene.audio.playSound(Ja.Z.POPUP_OFF),this.fadeOutAnimation||(this.fadeOutAnimation=new yh.Z({targets:[this],props:{alpha:0},duration:300,onComplete:function(){e.prototype.close.call(i),i.footer.playBtn.setDisabled(!0)}})),this.fadeOutAnimation.play(),this.winDecoration.bunting.stopWavingAnimation())},n.stopConfettiAnimation=function(){this.scene.gameplay.confettiSmallFallDown.emitter.stop()},t}(GameCore.Screen),Hg=vn.Z.GAMEPLAY_DEFAULT,Wg=Hg.KEY,zg=Hg.FRAME,Yg=function(e){function t(t){var n;return(n=e.call(this,t)||this).background=void 0,n.wellDoneLetterBitmapTexts=[],n.outOfMovesLetterBitmapTexts=[],n.wellDoneBitmapText=void 0,n.outOfMovesBitmapText=void 0,n.isPlayingAnimation=!1,n.isWellDone=!0,n.setSize(300,300),n.createRawTexts(),n.createBackground(),n.createWellDoneLetterBitmapTexts(),n.createOutOfMovesLetterBitmapTexts(),n.alignComponents(),n.createDevButtons(),n}(0,o.Z)(t,e);var n=t.prototype;return n.enableWellDone=function(e){void 0===e&&(e=!0),this.isWellDone=e},n.createBackground=function(){this.background=new xu.Z(this.scene,0,0,this.width,this.height,20,16579837,0),this.add(this.background)},n.createRawTexts=function(){this.wellDoneBitmapText=this.scene.make.bitmapText({font:No.Z.BOLD.KEY,size:this.scene.fontSize(30),text:"WELLDONE",origin:{x:.5,y:.5}}),this.wellDoneBitmapText.setMaxSize(360,500,!0),this.wellDoneBitmapText.setPosition(187.5,333.5),this.wellDoneBitmapText.setDepth(1e12),this.wellDoneBitmapText.kill(),this.outOfMovesBitmapText=this.scene.make.bitmapText({font:No.Z.BOLD.KEY,size:this.scene.fontSize(30),text:"OUTOFMOVES",origin:{x:.5,y:.5}}),this.outOfMovesBitmapText.setMaxSize(360,500,!0),this.outOfMovesBitmapText.setPosition(187.5,333.5),this.outOfMovesBitmapText.setDepth(1e12),this.outOfMovesBitmapText.kill(),this.scene.add.existing(this.outOfMovesBitmapText),this.scene.add.existing(this.wellDoneBitmapText)},n.createWellDoneLetterBitmapTexts=function(){var e=this;this.createBitmapTextsFromString(this.scene.i18n.t("WELLDONE"),this.wellDoneLetterBitmapTexts),this.wellDoneLetterBitmapTexts.forEach((function(t){t.setFontSize(e.wellDoneBitmapText.fontSize)}))},n.createOutOfMovesLetterBitmapTexts=function(){var e=this;this.createBitmapTextsFromString(this.scene.i18n.t("OUTOFMOVES"),this.outOfMovesLetterBitmapTexts),this.outOfMovesLetterBitmapTexts.forEach((function(t){console.log(e.outOfMovesBitmapText.fontSize),t.setFontSize(e.outOfMovesBitmapText.fontSize)}))},n.createBitmapTextsFromString=function(e,t){for(var n=e.split(""),i=0;i<Math.max(n.length,t.length);i++){if(i>=t.length){var a=this.scene.make.bitmapText({font:No.Z.BOLD.KEY,size:this.scene.fontSize(30),origin:{x:.5,y:.5},text:""});a.setIgnoreLanguage(),a.setAlpha(0),t.push(a),this.add(a)}i>=n.length?(t[i].kill(),t[i].setText("")):(t[i].revive(),t[i].setText(n[i]))}console.log(t.length)},n.alignComponents=function(){[this.wellDoneLetterBitmapTexts,this.outOfMovesLetterBitmapTexts].forEach((function(e){var t=[];(e=Re()(e).call(e,(function(e){return e.active&&e.visible}))).forEach((function(n,i){if(0!=e[i].text.length)if(0==i){var a=e[i].getTextBounds().characters[0];a&&t.push(a.w/2)}else{var r=e[i-1].getTextBounds().characters[0],s=e[i].getTextBounds().characters[0];if(r&&s){var o=" "==e[i-1].text?10:r.w,c=" "==e[i].text?10:s.w;t.push(t[i-1]+o/2+1+c/2)}}}));var n=-t[t.length-1]/2-5;e.forEach((function(i,a){var r=-(e.length-1)/2*25+25*a;i.setX(r),i.setX(n+t[a])}))}))},n.createDevButtons=function(){GameCore.Utils.Valid.isDebugger()&&this.createCloseButton()},n.createCloseButton=function(){var e=this,t=new vu.Z(this.scene,40,40),n=this.scene.add.image(0,0,Wg,zg.IC_BG_OFF);n.setWorldSize(40,40);var i=this.scene.make.bitmapText({font:No.Z.PRIMARY.KEY,size:this.scene.fontSize(10),text:"X",origin:{x:.5,y:.5}});i.setCenterAlign(),t.add([n,i]),Phaser.Display.Align.To.TopRight(t,this),t.onClick=function(){e.isPlayingAnimation||e.scene.screen.close(qa.o4.WELL_DONE_SCREEN)},this.add(t)},n.hideContent=function(){[this.wellDoneLetterBitmapTexts,this.outOfMovesLetterBitmapTexts].forEach((function(e){e.forEach((function(e){e.setAlpha(0),e.setAngle(10)}))}))},n.runEntranceAnimationText=function(){var e=(0,s.Z)(h().mark((function e(){var t,n,i=this;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return 100,this.createWellDoneLetterBitmapTexts(),this.createOutOfMovesLetterBitmapTexts(),this.alignComponents(),t=this.isWellDone?this.wellDoneLetterBitmapTexts:this.outOfMovesLetterBitmapTexts,n=De()(t).call(t,(function(e,t){return new(l())((function(n){i.scene.add.tween({targets:e,duration:100,delay:100*t/2,ease:Phaser.Math.Easing.Cubic.Out,props:{alpha:1,angle:0,scale:{from:.6,to:1,ease:Phaser.Math.Easing.Elastic.Out,easeParams:[.1,.45],duration:1e3}},onComplete:n})}))})),e.next=8,l().all(n);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.runEntranceAnimation=function(){var e=(0,s.Z)(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isPlayingAnimation){e.next=2;break}return e.abrupt("return");case 2:return this.isPlayingAnimation=!0,e.next=5,this.runEntranceAnimationText();case 5:this.isPlayingAnimation=!1;case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),t}(Phaser.GameObjects.Container),Vg=function(e){function t(t,n,i,a){var r;return(r=e.call(this,t,n,i,a)||this).slideInAnimation=void 0,r.fadeInAnimation=void 0,r.fadeOutAnimation=void 0,r.container=void 0,r.setDepth(qa.Ks.POPUP),r.container=new Yg(t),r.add(r.container),r.background.setTint(1315862),r.background.setAlpha(.5),r}(0,o.Z)(t,e);var n=t.prototype;return n.open=function(t){e.prototype.open.call(this,t),this.container.setAlpha(1),this.background.setAlpha(.5),this.container.setInteractive();var n=(null!=t?t:{}).wellDone;this.container.enableWellDone("boolean"!==typeof n||n),this.runOpenAnimation()},n.close=function(){this.runCloseAnimation()},n.runOpenAnimation=function(){var e=(0,s.Z)(h().mark((function e(){var t,n,i,a=this;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==(t=this.slideInAnimation)||null==(n=t.tween)||!n.isPlaying()){e.next=2;break}return e.abrupt("return");case 2:this.scene.audio.playSound(Ja.Z.POPUP_SHOW),i=this.scene.ads.getBannerHeight(),this.container.hideContent(),this.slideInAnimation||(this.slideInAnimation=new Ao.Z({targets:[this.container],props:{y:{from:i,to:-i/2,ease:Phaser.Math.Easing.Back.Out}},duration:300,onComplete:function(){var e=(0,s.Z)(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.container.runEntranceAnimation();case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()})),this.fadeInAnimation||(this.fadeInAnimation=new Fc.Z({targets:[this],duration:300})),this.slideInAnimation.play(),this.fadeInAnimation.play();case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.runCloseAnimation=function(){var t,n,i=this;null!=(t=this.fadeOutAnimation)&&null!=(n=t.tween)&&n.isPlaying()||(this.scene.audio.playSound(Ja.Z.POPUP_OFF),this.fadeOutAnimation||(this.fadeOutAnimation=new yh.Z({targets:[this],ease:Phaser.Math.Easing.Linear,props:{alpha:0},duration:300,onComplete:function(){e.prototype.close.call(i)}})),this.fadeOutAnimation.play())},t}(GameCore.Screen),Kg=n(664),jg=vn.Z.LANGUAGES,Xg=jg.KEY,qg=jg.FRAME,Jg=function(e){function t(t,n){var i;(i=e.call(this,t,300,39)||this).languageCode=void 0,i.flag=void 0,i.languageName=void 0,i.iconUncheck=void 0,i.iconCheck=void 0,i.setName("Language-"+n),i.languageCode=n;var a=1/t.world.getPixelRatio(),r=i.scene.add.image(0,0,Xg,"name/"+n);r.setScale(a),r.setWorldSize(r.displayWidth,r.displayHeight);var o=i.scene.add.image(0,0,Xg,"flags/"+n);o.setWorldSize(40,40);var c=i.scene.add.image(0,0,Xg,qg.UNCHECK);c.setWorldSize(20,20);var l=i.scene.add.image(0,0,Xg,qg.CHECK);return l.setWorldSize(26,20),Phaser.Display.Align.In.LeftCenter(o,(0,Ua.Z)(i)),Phaser.Display.Align.To.RightCenter(r,o,20),Phaser.Display.Align.In.RightCenter(c,(0,Ua.Z)(i)),Phaser.Display.Align.In.Center(l,c,0,-3),i.flag=o,i.iconCheck=l,i.iconUncheck=c,i.languageName=r,i.add([o,r,c,l]),i.setUncheck(),i.scene.lang.language===i.languageCode&&i.setCheck(),i.onClick=(0,s.Z)(h().mark((function e(){var t;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(t=i.scene.game.globalScene).screen.open(qa.o4.NOTIFY_SCREEN,{message:"loading",loading:!0}),e.next=4,i.scene.lang.changeLanguage(i.languageCode);case 4:t.screen.close(qa.o4.NOTIFY_SCREEN),i.scene.player.setSetting("language2",i.languageCode);case 6:case"end":return e.stop()}}),e)}))),i.listenEventLanguageChanged(),i}(0,o.Z)(t,e);var n=t.prototype;return n.setCheck=function(){this.iconCheck.revive(),this.iconUncheck.setFrame(qg.UNCHECK)},n.setUncheck=function(){this.iconCheck.kill(),this.iconUncheck.setFrame(qg.UNCHECK_GREY)},n.listenEventLanguageChanged=function(){var e=this;this.scene.i18n.on("languageChanged",(function(){e.scene.lang.language===e.languageCode?e.setCheck():e.setUncheck()}))},t}(vu.Z),Qg=Jg,$g=vn.Z.GAMEPLAY_DEFAULT,em=$g.KEY,tm=($g.FRAME,function(e){function t(t){var n;return(n=e.call(this,t)||this).bg=void 0,n.createBackground(),n.createContent(),n.createCloseButton(),t.add.existing((0,Ua.Z)(n)),n}(0,o.Z)(t,e);var n=t.prototype;return n.createBackground=function(){var e=new xu.Z(this.scene,0,0,340,487,20,16579837);this.add(e),this.bg=e,this.setSize(e.width,e.height),this.bg.setInteractive()},n.createContent=function(){var e=this,t=this.scene.make.bitmapText({font:No.Z.BOLD.KEY,size:this.scene.fontSize(22),text:"languages",origin:{x:.5,y:.5}});t.setMaxSize(250,40,!0),t.setTint(1907997),this.add(t),Phaser.Display.Align.In.TopCenter(t,this,0,-12);var n=this.scene.lang.supportedLanguages,i=De()(n).call(n,(function(t){return e.createLanguageButton(t)})),a=t.y+50,r=this.scene.add.line(0,a-19.5,0,0,340,0,3774208,1);r.setLineWidth(.6),this.add(r);for(var s=0;s<i.length;s++)if(i[s].setY(39*s+a),s<i.length-1){var o=this.scene.add.line(0,39*s+a+19.5,0,0,300,0,1907997,.2);o.setLineWidth(.4),this.add(o)}this.add(i)},n.createLanguageButton=function(e){return new Qg(this.scene,e)},n.createCloseButton=function(){var e=this,t=new vu.Z(this.scene,40,40);t.setName("Close"),t.onClick=function(){e.scene.screen.close(qa.o4.LANGUAGES_SCREEN)};var n=this.scene.add.image(0,0,em,"ic_close_gray");n.setWorldSize(24,24),t.add(n),Phaser.Display.Align.In.TopRight(t,this.bg,-4,-6),this.add([t])},t}(Phaser.GameObjects.Container)),nm=tm,im=function(e){function t(t,n,i,a){var r;return(r=e.call(this,t,n,i,a)||this).slideInAnimation=void 0,r.fadeInAnimation=void 0,r.fadeOutAnimation=void 0,r.languagesContainer=void 0,r.setDepth(qa.Ks.POPUP),r.languagesContainer=new nm(t),r.add(r.languagesContainer),r.background.setTint(1315862),r.background.setAlpha(.5),r.background.setInteractive(),r}(0,o.Z)(t,e);var n=t.prototype;return n.open=function(){e.prototype.open.call(this),this.runOpenAnimation()},n.close=function(){this.runCloseAnimation()},n.runOpenAnimation=function(){var e=this;this.scene.audio.playSound(Ja.Z.POPUP_SHOW);var t=this.scene.ads.getBannerHeight();this.slideInAnimation||(this.slideInAnimation=new Ao.Z({targets:[this.languagesContainer],props:{y:{from:this.height/2,to:this.height/2-this.languagesContainer.height/2-20-t,ease:Phaser.Math.Easing.Back.Out}},duration:300,onComplete:function(){e.background.once(Phaser.Input.Events.POINTER_DOWN,(function(){return e.scene.screen.close(qa.o4.SETTINGS_SCREEN)}))}})),this.fadeInAnimation||(this.fadeInAnimation=new Fc.Z({targets:[this],duration:300})),this.slideInAnimation.play(),this.fadeInAnimation.play()},n.runCloseAnimation=function(){var t=this;this.scene.audio.playSound(Ja.Z.POPUP_OFF),this.fadeOutAnimation||(this.fadeOutAnimation=new yh.Z({targets:[this],props:{alpha:0},duration:300,onComplete:function(){t.setAlpha(1),e.prototype.close.call(t)}})),this.fadeOutAnimation.play()},t}(GameCore.Screen),am=im,rm=vn.Z.GAMEPLAY_DEFAULT,sm=(rm.KEY,rm.FRAME,function(e){function t(){for(var t,n,a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=e.call.apply(e,_()(t=[this]).call(t,r))||this).gameplay=void 0,n.header=void 0,n.footer=void 0,n.gameStats=void 0,n.levelLoader=void 0,n.themeHandler=void 0,n.gameModeManager=void 0,n.bottomLogo=void 0,n.seedPanel=void 0,n.handleFinishingChallenge=function(){n.screen.open(qa.o4.PLAY_WITH_FRIEND_GAME_OVER_SCREEN),n.screen.get(qa.o4.PLAY_WITH_FRIEND_GAME_OVER_SCREEN).updateFinishingChallenge()},n.create=function(){e.prototype.create.call((0,Ua.Z)(n)),function(){window.game.world.isLandscape()?(hl.VERTICAL_PILE_SPACE=29,hl.SPACE_BETWEEN_PILE_AND_FOUNDATION=85*1.4):(hl.VERTICAL_PILE_SPACE=24*.925,hl.MIN_VERTICAL_PILE_SPACE=18*.85);var e=dl();hl.CARD_WIDTH=49*e,hl.CARD_HEIGHT=72*e}(),n.themeHandler=new Id((0,Ua.Z)(n)),n.gameModeManager=new Lp((0,Ua.Z)(n)),n.gameStats=new Nh((0,Ua.Z)(n)),n.levelLoader=new Gh((0,Ua.Z)(n)),n.header=new vh((0,Ua.Z)(n)),n.footer=new $u((0,Ua.Z)(n));var t=n.ads.getBannerHeight();Phaser.Display.Align.In.TopCenter(n.header,n.gameZone,0,0);var i=n.gameZone.width>375?-10:0;Phaser.Display.Align.In.BottomCenter(n.footer,n.gameZone,0,-t+i),n.gameplay=new Vu((0,Ua.Z)(n)),n.createScreens(),n.ads.preloadInterstitialAdAsync().catch((function(){})),n.header.alignChildren(),n.createEditor(),n.processStartGame();var a=n.game.globalScene;a instanceof Kg.Z&&a.hideBackground()},n.setBackground=function(e){n.createBackground(e)},n.run=function(){n.player.getPlayerIsNew()&&n.gameplay.startNewGame(),n.ads.getBannerHeight()>0&&n.createBottomLogo(),n.ads.showBannerAdAsync().catch((function(e){console.warn(e)}))},n.handlePlayWithFriend=(0,s.Z)(h().mark((function e(){var t,a;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.storage.dispatch(function(){var e=(0,s.Z)(h().mark((function e(t){var n,a,r,s,o,c,l,u,d,f,p,g,m,v,y,b;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,n=window.game,a=n.player,r=n.facebook,n.globalScene.screen.open(qa.o4.NOTIFY_SCREEN,{message:"loading",loading:!0}),s=a.getPlayerId(),o=a.getConnectedPlayerIds(100,0),c=a.getConnectedPlayers(100,0),0==(l=Re()(o).call(o,(function(e){var t;return $t()(t=io.instance.friendsChallenged).call(t,e)<0&&e!=s}))).length&&(l.push.apply(l,o),io.instance.friendsChallenged=[]),console.log({friendListCanBeChallenged:l}),u="",d="",f=r.contextType,p=null,l.length>0&&(g=Phaser.Math.RND.between(0,l.length-1),u=l[g],c[u]&&(p=c[u],io.instance.friendsChallenged.push(u))),!u||"string"!==typeof u){e.next=18;break}return e.next=17,r.createAsync(u);case 17:d=e.sent;case 18:if(p&&d){e.next=22;break}return e.next=21,t(uo());case 21:return e.abrupt("return");case 22:return ao({contextId:d}),t(Xs()),v=(m=p).name,y=m.photo,b={playerId:u,name:v,photo:y},e.next=28,t(mo(ga,b));case 28:t(Aa(d,f)),so(100),e.next=38;break;case 32:if(e.prev=32,e.t0=e.catch(0),so(100),!(e.t0 instanceof Nr)){e.next=37;break}return e.abrupt("return");case 37:(0,i.tO)(e.t0);case 38:return e.prev=38,e.finish(38);case 40:case"end":return e.stop()}}),e,null,[[0,32,38,40]])})));return function(t){return e.apply(this,arguments)}}());case 2:if(!io.instance.isChallengeMode()){e.next=11;break}if(t=n.storage.getState(),void 0==(null==(a=ps(t))?void 0:a.seed)){e.next=10;break}return n.gameplay.startGameWith(a.seed),e.abrupt("return");case 10:console.warn("Cannot get extra data");case 11:n.gameplay.startNewGame();case 12:case"end":return e.stop()}}),e)}))),n.handlePlaySingle=(0,s.Z)(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,yo();case 2:return e.next=4,n.storage.dispatch(co());case 4:n.gameplay.checkGameplayBeforeStartNewGame(),n.gameplay.startNewGame();case 6:case"end":return e.stop()}}),e)}))),n}(0,o.Z)(t,e);var a=t.prototype;return a.preload=function(){this.events.on(Phaser.Scenes.Events.WAKE,this.run),this.events.on(Phaser.Scenes.Events.CREATE,this.run),this.events.once("player-finish-challenge",this.handleFinishingChallenge)},a.processStartGame=function(){var e=this;this.showLoading(),this.gameModeManager.start(),this.header.setVisible(!1),this.time.delayedCall(500,(function(){e.gameplay.startGame(),e.header.setVisible(!0)}))},a.showLoading=function(){var e=this,t=new fg.Z(this);t.setDepth(fn.Z.ON_TOP),t.setVisible(!0),t.setScale(1.3),this.add.existing(t),Phaser.Display.Align.In.Center(t,this.gameZone,0,0),this.time.delayedCall(500,(function(){e.tweens.add({targets:[t],alpha:0,duration:300})}))},a.createEditor=function(){var e=(0,s.Z)(h().mark((function e(){var t;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!GameCore.Utils.Valid.isDebugger()){e.next=5;break}return e.next=3,Promise.all([n.e(498),n.e(48)]).then(n.bind(n,618));case 3:t=e.sent.default,this.seedPanel=new t(this);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),a.createBottomLogo=function(){var e=new ip(this);e.setDepth(fn.Z.FOOTER_LOGO),this.add.existing(e),Phaser.Display.Align.In.BottomCenter(e,this.gameZone),this.bottomLogo=e},a.createScreens=function(){this.screen.add(qa.o4.NO_MORE_MOVES_SCREEN,Cp),this.screen.add(qa.o4.VICTORY_SCREEN,rp),this.screen.add(qa.o4.PLAY_SCREEN,Th),this.screen.add(qa.o4.SETTINGS_SCREEN,Lh),this.screen.add(qa.o4.LANGUAGES_SCREEN,am),this.screen.add(qa.o4.GAME_STATS_SCREEN,Ad),this.screen.add(qa.o4.THEME_SCREEN,Yd),this.screen.add(qa.o4.HOW_TO_PLAY_SCREEN,jd),this.screen.add(qa.o4.NOTIFICATION_SCREEN,kp),this.screen.add(qa.o4.PLAY_WITH_FRIEND_GAME_OVER_SCREEN,ug),this.screen.add(qa.o4.TOURNAMENTS_RESULT_SCREEN,Ug),this.screen.add(qa.o4.WELL_DONE_SCREEN,Vg)},a.checkNewUser=function(){var e=this;(this.player.getPlayerIsNew()||GameCore.Configs.Tutorial.ForceUseTutorial)&&this.time.delayedCall(1e3,(function(){e.screen.open(qa.o4.HOW_TO_PLAY_SCREEN),e.scene.scene.player.incUserGuideDisplays()}))},a.update=function(e,t){this.gameplay.update(t),this.header.update()},t}(Ga.Z)),om=sm;var cm=om,lm=vn.Z.DEFAULT,um=lm.KEY,hm=lm.FRAME,dm=function(e){function t(t){var n;return(n=e.call(this,t,um,hm.BUTTON_YELLOW_CIRCLE)||this).scene=void 0,n.scene=t,n.button.setSize(87,68).setDisplaySize(87,68),n.setName("Home"),n.createIcon(),n}return(0,o.Z)(t,e),t.prototype.createIcon=function(){var e=this.scene.add.image(0,0,um,hm.ICON_FLAT_HOME);e.setSize(43,43).setDisplaySize(43,43),this.add(e),Phaser.Display.Align.In.Center(e,this)},t}(Jo.Z),fm=dm,pm=vn.Z.DEFAULT,gm=pm.KEY,mm=pm.FRAME,vm=function(e){function t(t){var n;return(n=e.call(this,t,gm,mm.BUTTON_GREEN)||this).scene=void 0,n.scene=t,n.button.setWorldSize(170,72),n.setName("PlayWithFriends"),n.createLabel(),n}return(0,o.Z)(t,e),t.prototype.createLabel=function(){var e=this.scene.make.bitmapText({font:No.Z.PRIMARY.KEY,size:13,text:"PLAY"}),t=10;Phaser.Display.Align.In.Center(e,this,0,-t);var n=this.scene.make.bitmapText({font:No.Z.PRIMARY.KEY,size:9,text:"WITH FRIENDS"});t=12,Phaser.Display.Align.In.Center(n,this,0,t),this.add([e,n])},t}(Jo.Z),ym=vm,bm=vn.Z.DEFAULT,Am=bm.KEY,Em=bm.FRAME,Sm=function(e){function t(t){var n;return(n=e.call(this,t,Am,Em.BUTTON_YELLOW_CIRCLE)||this).scene=void 0,n.scene=t,n.button.setSize(87,68).setDisplaySize(87,68),n.setName("Share"),n.createIcon(),n}return(0,o.Z)(t,e),t.prototype.createIcon=function(){var e=this.scene.add.image(0,0,Am,Em.ICON_FLAT_SHARE);e.setSize(43,43).setDisplaySize(43,43),this.add(e),Phaser.Display.Align.In.Center(e,this)},t}(Jo.Z),Tm=Sm,wm=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n.homeButton=void 0,n.playButton=void 0,n.shareButton=void 0,n.scene=t,n.setName("FooterBar"),n.createButtons(),n.alignButtons(),n.scene.add.existing((0,Ua.Z)(n)),n}(0,o.Z)(t,e);var n=t.prototype;return n.alignButtons=function(){Phaser.Display.Align.In.Center(this.homeButton,this,-140),Phaser.Display.Align.In.Center(this.playButton,this,0),Phaser.Display.Align.In.Center(this.shareButton,this,140)},n.createButtons=function(){this.createHomeButton(),this.createPlayButton(),this.createShareButton()},n.createHomeButton=function(){this.homeButton=new fm(this.scene),this.add(this.homeButton)},n.createPlayButton=function(){this.playButton=new ym(this.scene),this.add(this.playButton)},n.createShareButton=function(){this.shareButton=new Tm(this.scene),this.add(this.shareButton)},t}(Phaser.GameObjects.Container),Cm=wm,Im=n(687),xm=n(686),Pm=(function(e){function t(t){var n;return(n=e.call(this,t,"UpdateAbleObject")||this).updateInfo=void 0,n}(0,o.Z)(t,e)}(Phaser.GameObjects.GameObject),function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).classType=void 0,i.listConfigs=void 0,i.padding=void 0,i.startObjectIndex=void 0,i.endObjectIndex=void 0,i.listObjects=void 0,i.classType=n.classType,i.listConfigs=n.listConfigs,i.padding=n.padding?n.padding:0,i.objects.classType=i.classType,i.updateConfig(i.listConfigs),i}(0,o.Z)(t,e);var n=t.prototype;return n.reset=function(){e.prototype.reset.call(this),this.killAndHideAll()},n.getChildren=function(){var e;return Re()(e=this.listObjects).call(e,(function(e){return void 0!=e&&e.active}))},n.updateConfig=function(e){var t;this.reset(),this.listConfigs=e,this.listObjects=Ft()(t=new Array(e.length)).call(t,void 0),this.addObjectIndex(0,0);var n=this.getEndObjectIndex();this.addObjectIndex(1,n),this.startObjectIndex=this.getStartObjectIndex(),this.endObjectIndex=this.getEndObjectIndex(),this.updateMaxHeight(),this.value=this.marginTop},n.killAndHideAll=function(){var e,t=this;this.listObjects instanceof Array&&De()(e=this.listObjects).call(e,(function(e){void 0!==e&&t.objects.killAndHide(e)}))},n.setItemPosition=function(e,t){var n=e.height;e.setPosition(0,n/2+(n+this.padding)*t-this.height/2)},n.updateMaxHeight=function(){return this.maxHeight=Math.max(this.listConfigs.length*(this.objHeight+this.padding)-this.padding+this.marginBottom-this.height,0)},n.updateObject=function(e){this.objects.incY(e);var t=this.getStartObjectIndex(),n=this.getEndObjectIndex();t!=this.startObjectIndex&&(t>this.startObjectIndex?this.killObjectIndex(this.startObjectIndex,t-1):this.addObjectIndex(t,this.startObjectIndex-1),this.startObjectIndex=t),n!=this.endObjectIndex&&(n<this.endObjectIndex?this.killObjectIndex(n+1,this.endObjectIndex):this.addObjectIndex(this.endObjectIndex+1,n),this.endObjectIndex=n)},n.killObjectIndex=function(e,t){for(var n=e;n<=t;n++){var i=this.listObjects[n];i&&(this.objects.killAndHide(i),this.listObjects[n]=void 0)}},n.addObjectIndex=function(e,t){for(var n=e;n<=t;n++){var i=this.padding,a=this.listConfigs;if(n>=a.length)return;if(this.listObjects[n])console.log("position "+n+" is not empty!");else{var r=this.objects.getFirstDead(!0),s=r.height,o=s/2+(s+i)*n+this.value-this.height/2;r.updateInfo(a[n]),r.setPosition(0,o),r.setActive(!0),r.setVisible(!0),this.addAt(r),this.listObjects[n]=r}}},n.getStartObjectIndex=function(){var e=this.objHeight,t=this.padding;return Math.max(Math.floor((0-this.value)/(e+t)),0)},n.getEndObjectIndex=function(){var e=this.objHeight,t=this.padding,n=this.listConfigs,i=e+t;return Math.min(Math.floor((this.height-this.value)/i),n.length)},n.addBackground=function(){var e="scroller-background";if(!this.scene.textures.exists(e)){var t=this.width,n=this.height,i=this.scene.add.graphics();i.fillStyle(65280,.2),i.fillRect(0,0,t,n),i.generateTexture(e,t,n),i.destroy()}var a=this.scene.add.image(0,0,e);this.add(a)},(0,le.Z)(t,[{key:"objHeight",get:function(){var e=this.objects.getChildren();return 0==e.length?this.maxHeight=0:e[0].height}}]),t}(xm.Z)),km={targets:[],props:{alpha:{duration:500,value:{start:0,from:0,to:1},ease:Phaser.Math.Easing.Cubic.Out},scale:{duration:1e3,value:{start:.8,from:.8,to:1},ease:Phaser.Math.Easing.Elastic.Out,easeParams:[.1,.45]}}},_m=function(e){function t(t){return e.call(this,km,t)||this}return(0,o.Z)(t,e),t}(Ha.Z),Om={targets:[],props:{alpha:{start:0,to:1,duration:500,ease:Phaser.Math.Easing.Cubic.Out},scale:{start:.8,to:1,duration:1e3,ease:Phaser.Math.Easing.Elastic.Out,easeParams:[.1,.45]},y:{start:0,to:0,duration:500,ease:Phaser.Math.Easing.Back.Out}},delay:0},Rm=function(e){function t(t){return e.call(this,Om,t)||this}return(0,o.Z)(t,e),t}(Ha.Z),Lm=vn.Z.DEFAULT,Dm=Lm.KEY,Bm=Lm.FRAME,Nm=function(e){function t(t,n){var i;return(i=e.call(this,t)||this).button=void 0,i.avatar=void 0,i.rankIcon=void 0,i.rankText=void 0,i.username=void 0,i.score=void 0,i.scoreText=void 0,i.background=void 0,i.showPopUp=void 0,i.showItems=void 0,i.payload=void 0,i.handleChallengeFriend=function(){var e=i.payload.playerId;i.scene.storage.dispatch(lo(e))},i.createBackground(),i.updateSize(),i.createAvatar(),i.createRank(),i.createUsername(),i.createScore(),i.createButton(),n&&i.updateInfo(n),i.scene.add.existing((0,Ua.Z)(i)),i}(0,o.Z)(t,e);var n=t.prototype;return n.updateInfo=function(e){this.payload=(0,r.Z)({scoreRight:!0,isHighlight:!1,useChallenge:!1},e),this.updateBackground(),this.updateAvatar(),this.updateRank(),this.updateUsername(),this.updateScore(),this.updatePosition()},n.updatePosition=function(){var e=this.payload.scoreRight,t=this.payload.useChallenge;this.button.setVisible(!!t),e?Phaser.Display.Align.To.RightCenter(this.score,this.avatar,120):Phaser.Display.Align.To.RightCenter(this.score,this.avatar,80)},n.createBackground=function(){this.background=this.scene.make.image({key:Dm,frame:Bm.LEADERBOARD_BG_LIGHT}),this.background.setWorldSize(264,56),this.add(this.background)},n.updateBackground=function(){var e="";e=this.payload.isHighlight?Bm.LEADERBOARD_BG_LIGHT:Bm.LEADERBOARD_BG_DARK,this.background.setFrame(e),this.background.setWorldSize(264,56)},n.updateSize=function(){var e=this.background,t=e.width,n=e.height;this.setSize(t,n)},n.createAvatar=function(){this.avatar=new Go(this.scene,{key:Dm,frame:Bm.AVATAR_FRAME_YELLOW_SMALL,background:Bm.AVATAR_BG_YELLOW_SMALL,width:47.5,height:49.5,radius:40}),this.add(this.avatar),Phaser.Display.Align.In.LeftCenter(this.avatar,this,-10)},n.updateAvatar=function(){var e=this.payload,t=e.playerId,n=e.photo;this.avatar.loadPhoto(t,n)},n.createRank=function(){this.createRankIcon(1),this.createRankText(1)},n.updateRank=function(){var e=this.payload.rank;this.updateRankIcon(e),this.updateRankText(e)},n.getRankIconFrame=function(e){var t=Bm.ICON_FLAG;switch(e){case 1:t=Bm.ICON_CUP_GOLD;break;case 2:t=Bm.ICON_CUP_SILVER;break;case 3:t=Bm.ICON_CUP_COPPER}return t},n.createRankIcon=function(e){var t=this.getRankIconFrame(e);this.rankIcon=this.scene.make.image({key:Dm,frame:t}),t!=Bm.ICON_FLAG?this.rankIcon.setWorldSize(46,30):this.rankIcon.setWorldSize(27,27),this.add(this.rankIcon);var n=e<=3?13:16;Phaser.Display.Align.In.Center(this.rankIcon,this.avatar,0,n)},n.updateRankIcon=function(e){var t=this.getRankIconFrame(e);this.rankIcon.setFrame(t),t!=Bm.ICON_FLAG?this.rankIcon.setWorldSize(46,30):this.rankIcon.setWorldSize(27,27)},n.createRankText=function(e){this.rankText=this.scene.make.bitmapText({font:No.Z.PRIMARY.KEY,size:this.scene.fontSize(15),text:""+e,origin:{x:.5,y:.5}}),this.add(this.rankText),Phaser.Display.Align.In.Center(this.rankText,this.rankIcon,0,-2)},n.updateRankText=function(e){this.rankText.setText(""+e)},n.getShortName=function(e){var t=e.substring(0,7);return t.split(" ")[0]||t},n.createUsername=function(){this.username=this.scene.make.text({text:this.getShortName("FRIEND NAME"),style:{fontFamily:No.Z.FONT_FAMILY,fontSize:"15px",fontStyle:"bold"}}),this.username.setTint(10317116),this.username.setHighQuality(),Phaser.Display.Align.In.LeftCenter(this.username,this.avatar,-53),this.add(this.username)},n.updateUsername=function(){var e=this.payload.name;this.username.setText(this.getShortName(e))},n.createScore=function(){this.score=this.scene.add.container(),this.scoreText=this.scene.make.bitmapText({font:No.Z.PRIMARY.KEY,size:this.scene.fontSize(18),text:"132500",origin:{x:.5,y:.5}}),this.scoreText.setTint(6565e3);var e=this.scene.make.image({key:Dm,frame:Bm.ICON_CUP_MINI});e.setWorldSize(17,18),this.score.add([this.scoreText,e]);var t=-20;Phaser.Display.Align.In.LeftCenter(this.scoreText,e,t),this.add(this.score),t=10,Phaser.Display.Align.In.Center(this.score,this,t)},n.updateScore=function(){var e=this.payload.score;this.scoreText.setText(e)},n.createButton=function(){this.button=new Jo.Z(this.scene,Dm,Bm.BUTTON_GREEN_MINOR_MINI,54,34.5),this.button.setName("ChallengeFriend");var e=this.scene.make.bitmapText({font:No.Z.PRIMARY.KEY,size:this.scene.fontSize(18),text:"PLAY"});Phaser.Display.Align.In.Center(e,this.button,0,-2),this.button.add(e),Phaser.Display.Align.In.RightCenter(this.button,this,-2),this.add(this.button),this.button.onClick=this.handleChallengeFriend},n.runShowPopUpAnimation=function(e,t){this.scene.tweens.killTweensOf(this),this.showPopUp=new Rm({targets:[this],delay:e,duration:t,props:{y:{start:this.y+70,to:this.y}}}),this.showPopUp.play()},n.runShowItemAnimation=function(e,t){var n=this.getAll();this.scene.tweens.killTweensOf(n),this.showItems=new _m({targets:n,duration:t,delay:this.scene.tweens.stagger(50,{start:e+50}),props:{scale:{duration:1e3,getStart:function(e){return.8*e.scale},getEnd:function(e){return e.scale},ease:Phaser.Math.Easing.Elastic.Out,easeParams:[.1,.45]}}}),this.showItems.play()},n.runShowUpAnimation=function(e,t){void 0===e&&(e=0),void 0===t&&(t=300);var n=100*e;this.runShowPopUpAnimation(n,t),this.runShowItemAnimation(n,t)},t}(Phaser.GameObjects.Container),Mm=Nm;function Gm(e,t){var n="undefined"!==typeof I()&&P()(e)||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){var n;if(!e)return;if("string"===typeof e)return Fm(e,t);var i=S()(n=Object.prototype.toString.call(e)).call(n,8,-1);"Object"===i&&e.constructor&&(i=e.constructor.name);if("Map"===i||"Set"===i)return w()(e);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return Fm(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var i=0;return function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Fm(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var Zm=function(e){function t(t){var n;(n=e.call(this,t)||this).scene=void 0,n.currentPlayerId=void 0,n.scroller=void 0,n.scene=t;var i=n.scene.player;return n.currentPlayerId=i.getPlayerId(),n.createReuseScroller(),n.scene.add.existing((0,Ua.Z)(n)),n}(0,o.Z)(t,e);var n=t.prototype;return n.createReuseScroller=function(){this.scroller=new Pm(this.scene,{classType:Mm,listConfigs:[],width:280,height:310,padding:10,marginTop:10,marginBottom:10}),this.scene.renderer instanceof Phaser.Renderer.WebGL.WebGLRenderer&&this.scroller.createBound(vn.Z.DEFAULT.KEY,vn.Z.DEFAULT.FRAME.BLANK,40,16643027),this.scroller.createMask(),this.scroller.setPosition(0,25),this.add(this.scroller)},n.updateData=function(e){var t=Ri()(e)||[];if(t.length<1)return this.scene.isSwitchable=!0,void this.scene.board.showMessage(!0,"Leaderboard is empty!");for(var n,i=[],a=Gm(Di()(t).call(t,(function(e,t){return+t.score-+e.score})));!(n=a()).done;){var r=n.value,s=r.playerId,o=r.photo,c=r.score,l=r.name,u=r.rank;if(s){var h=this.currentPlayerId===s,d={playerId:s,photo:o,name:l,rank:u,score:c,scoreRight:this.scene.tabId===er,useChallenge:!h&&this.scene.tabId===tr,isHighlight:h};i.push(d)}}this.scroller.updateConfig(i),this.showLeaders()},n.removeLeaders=function(){this.scroller.updateConfig([])},n.getLeaders=function(){return this.scroller.getChildren()},n.showLeaders=function(){var e=this,t=this.getLeaders();if(t.length<1)return this.scene.isSwitchable=!0,void this.scene.board.showMessage(!0,"Leaderboard is empty!");for(var n=Math.min(t.length,6),i=0;i<n;i++){var a=t[i];a&&(a.setVisible(!0),a.runShowUpAnimation(i,300))}var r=300+100*n+250;this.scene.time.delayedCall(r,(function(){e.scene.isSwitchable=!0,e.scroller.setEnable(!0)}))},t}(Phaser.GameObjects.Container),Um=Zm,Hm=vn.Z.DEFAULT,Wm=Hm.KEY,zm=Hm.FRAME,Ym=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n.tabWorld=void 0,n.tabFriends=void 0,n.scene=t,n.createTabFriends(),n.createTabWorld(),n}(0,o.Z)(t,e);var n=t.prototype;return n.selectTabFriends=function(){this.tabFriends.button.setFrame(zm.LEADERBOARD_TAB_ON),this.tabWorld.button.setFrame(zm.LEADERBOARD_TAB_OFF)},n.selectTabWorld=function(){this.tabFriends.button.setFrame(zm.LEADERBOARD_TAB_OFF),this.tabWorld.button.setFrame(zm.LEADERBOARD_TAB_ON)},n.createTabFriends=function(){this.tabFriends=new Jo.Z(this.scene,Wm,zm.LEADERBOARD_TAB_OFF),this.tabFriends.button.setSize(85,33).setDisplaySize(85,33),this.tabFriends.setName("FriendsTab");var e=this.scene.make.bitmapText({font:No.Z.PRIMARY.KEY,size:9,text:"FRIENDS",origin:{x:.5,y:.55}});this.tabFriends.add(e),Phaser.Display.Align.In.Center(this.tabFriends,this,-55),this.add(this.tabFriends)},n.createTabWorld=function(){this.tabWorld=new Jo.Z(this.scene,Wm,zm.LEADERBOARD_TAB_OFF),this.tabWorld.button.setSize(85,33).setDisplaySize(85,33),this.tabWorld.setName("WorldTab");var e=this.scene.make.bitmapText({font:No.Z.PRIMARY.KEY,size:9,text:"WORLD",origin:{x:.5,y:.55}});this.tabWorld.add(e),Phaser.Display.Align.In.Center(this.tabWorld,this,55),this.add(this.tabWorld)},t}(Phaser.GameObjects.Container),Vm=Ym,Km=vn.Z.DEFAULT,jm=Km.KEY,Xm=Km.FRAME,qm=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n.background=void 0,n.tabs=void 0,n.leaders=void 0,n.loading=void 0,n.message=void 0,n.messageAnimation=void 0,n.scene=t,n.setSize(310,430),n.createBackground(),n.createLoading(),n.createMessage(),n.createContents(),n.createAnimation(),n.scene.add.existing((0,Ua.Z)(n)),n}(0,o.Z)(t,e);var n=t.prototype;return n.showLoading=function(e){this.loading.setVisible(e),this.showMessage(!1)},n.showMessage=function(e,t){this.message.setVisible(e),t&&(this.message.setText(t),this.messageAnimation.play())},n.createBackground=function(){this.background=new Sc(this.scene,0,0,310,430),this.add(this.background)},n.createLoading=function(){this.loading=new Xa(this.scene),this.loading.setTint(12237498),this.loading.setWorldSize(113,113),this.add(this.loading),Phaser.Display.Align.In.Center(this.loading,this.background)},n.createMessage=function(){this.message=this.scene.make.bitmapText({font:No.Z.PRIMARY.KEY,size:this.scene.fontSize(18),origin:{x:.5,y:.5}}),this.message.setTint(10317116),this.add(this.message),Phaser.Display.Align.In.Center(this.message,this.background)},n.createContents=function(){this.createLeaders(),this.createTitle(),this.createTabs()},n.createLeaders=function(){this.leaders=new Um(this.scene),this.add(this.leaders),Phaser.Display.Align.In.Center(this.leaders,this.background,0,0)},n.createTitle=function(){var e=this.scene.add.container(),t=this.scene.make.image({key:jm,frame:Xm.RIBBON_SHORT});t.setWorldSize(271,81);var n=this.scene.make.bitmapText({font:No.Z.PRIMARY.KEY,size:this.scene.fontSize(30),text:"Leaderboards"});Phaser.Display.Align.In.Center(n,t,0,-10),e.add([t,n]),Phaser.Display.Align.In.TopCenter(e,this.background,0,5),this.add(e)},n.createTabs=function(){this.tabs=new Vm(this.scene),this.add(this.tabs),Phaser.Display.Align.In.TopCenter(this.tabs,this.background,0,-55)},n.createAnimation=function(){this.messageAnimation=new Im.Z({targets:[this.message],duration:60,repeat:2})},t}(Phaser.GameObjects.Container),Jm=qm,Qm=GameCore.Configs.LeadersBoard,$m=function(e){function t(){for(var t,n,i=arguments.length,a=new Array(i),r=0;r<i;r++)a[r]=arguments[r];return(n=e.call.apply(e,_()(t=[this]).call(t,a))||this).board=void 0,n.footerBar=void 0,n.tabId=void 0,n.offset=void 0,n.isRequesting=void 0,n.isSwitchable=void 0,n.run=function(){n.isRequesting=!1;var e=[{selector:Br,callback:function(e){if(n.isRequesting=e,n.board.showLoading(e),!1===e){var t=n.game.storage.getState(),i=Dr(t);n.board.leaders.updateData(i)}}}];n.handleStateChange(e),n.selectFriendTab()},n.handleSelectFriendTab=function(){n.isRequesting||n.isSwitchable&&(n.isSwitchable=!1,n.selectFriendTab())},n.handleSelectWorldTab=function(){n.isRequesting||n.isSwitchable&&(n.isSwitchable=!1,n.selectWorldTab())},n.handlePlayWithFriend=function(){n.storage.dispatch(uo())},n.handleHomeClick=function(){n.scene.switch(xa.C.DASHBOARD_SCENE)},n.handleShareLeaderboard=function(){n.storage.dispatch(ko())},n}(0,o.Z)(t,e);var n=t.prototype;return n.preload=function(){this.events.on("wake",this.run),this.events.on("create",this.run)},n.create=function(){e.prototype.create.call(this),this.gameZone.setPosition(0,0),this.createBackground(da.Z.BACKGROUND.KEY,"0"),this.scene.bringToTop(),this.createBoard(),this.createFooterBar()},n.selectFriendTab=function(){this.tabId=tr,this.offset=0,this.board.showLoading(!0),this.board.leaders.removeLeaders(),this.board.tabs.selectTabFriends(),this.storage.dispatch(_r(Qm.LeaderboardId,tr,Qm.Limit,this.offset))},n.selectWorldTab=function(){this.tabId=er,this.offset=0,this.board.showLoading(!0),this.board.leaders.removeLeaders(),this.board.tabs.selectTabWorld(),this.storage.dispatch(_r(Qm.LeaderboardId,er,Qm.Limit,this.offset))},n.loadMoreTabFriend=function(){this.isRequesting||(this.offset+=Qm.Limit,this.storage.dispatch(_r(Qm.LeaderboardId,tr,Qm.Limit,this.offset)))},n.loadMoreTabWorld=function(){this.isRequesting||(this.offset+=Qm.Limit,this.storage.dispatch(_r(Qm.LeaderboardId,er,Qm.Limit,this.offset)))},n.createBoard=function(){this.board=new Jm(this),Phaser.Display.Align.In.Center(this.board,this.gameZone,0,-20),this.board.tabs.tabWorld.onClick=this.handleSelectWorldTab,this.board.tabs.tabFriends.onClick=this.handleSelectFriendTab},n.createFooterBar=function(){this.footerBar=new Cm(this),Phaser.Display.Align.In.BottomCenter(this.footerBar,this.gameZone,0,-50),this.footerBar.homeButton.onClick=this.handleHomeClick,this.footerBar.playButton.onClick=this.handlePlayWithFriend,this.footerBar.shareButton.onClick=this.handleShareLeaderboard},t}(Ga.Z);var ev=$m,tv=function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).name="LoadResourceFail",i.message=t||"Load resource fail",i.payload=n,i}return(0,o.Z)(t,e),t}((0,z.Z)(Error)),nv=function(e){try{var t=ya(e),n=window.game.player,i=t.entryPointData||{},a=i.playerId,r=i.playerName,s=i.playerPhoto;return n.getPlayer().playerId===a?fa:new pt.Z(a,r,s).toObject()}catch(o){return console.warn(o),fa}},iv=function(){return function(e){try{window.game.facebook.getTournamentAsync().then((function(t){e(oo(t))})).catch((function(e){console.warn(e)}))}catch(t){console.warn(t)}}},av=function(){return function(e,t){try{var n=t(),i=ya(n),a=window.game.player,r=a.getPlayer(),s=i.contextId,o=(i.entryPointData||{}).playerId,c=r.playerId===o,l=nv(n);c||a.updateConnectedPlayers([l]);var u=l.playerId;e(uo(s,u,!0))}catch(h){throw new Error("processInviteMode: "+h)}}},rv=function(){return function(e,t){try{var n=t(),i=ya(n),a=window.game.player.getPlayer(),r=i.entryPointData||{},s=r.matchId,o=r.opponentId,c=r.playerId,l=a.playerId===c;e(fo(s,l?o:c))}catch(u){throw new Error("processChallengeFriendMode: "+u)}}},sv=function(){return function(e,t){try{var n=t(),i=ya(n).entryPointData||{},a=i.playerId,s=i.playerScore;e(qs(a,{score:s,level:0}));var o=nv(n),c=(0,r.Z)({},o,{score:s});e(ho(c))}catch(l){throw new Error("processMatchingGroupMode: "+l)}}},ov=function(){return function(e){try{e(co())}catch(t){throw new Error("processNewUserMode: "+t)}}},cv=n(659),lv={BACKGROUND:{KEY:"background",FILE:"./assets/music/bg_music.mp3"},EFFECTS:{KEY:"effects",FILE:"./assets/sounds/effects.mp3",JSON:"./assets/sounds/effects.json",PATH:"./assets/sounds/"}},uv=n(646),hv="How about diving into the game for a relaxing experience?",dv=GameCore.Configs.Notification.DailyNotificationMessages,fv=void 0===dv?{}:dv,pv=function(){function e(){}e.sendNewUserNotification=function(){var e=(0,s.Z)(h().mark((function e(){var t;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.getInstance(),e.abrupt("return",t.sendNewUserNotificationInstance());case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),e.sendDailyNotification=function(){var e=(0,s.Z)(h().mark((function e(){var t;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.getInstance(),e.abrupt("return",t.sendDailyNotificationInstance());case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),e.sendTestDailyNotification=function(){var e=(0,s.Z)(h().mark((function e(t){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.getInstance();case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),e.getInstance=function(){return this._instance||(this._instance=new e),this._instance};var t=e.prototype;return t.sendNewUserNotificationInstance=function(){var e=(0,s.Z)(h().mark((function e(){var t,n,i,a,r,s;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=window.game,n=t.player,i=t.facebook,a=t.rollbar,e.prev=1,n.getPlayerIsNew()){e.next=5;break}return e.abrupt("return");case 5:if(n.getPlayerASID()){e.next=8;break}return e.abrupt("return");case 8:return e.next=10,FBInstant.player.getDataAsync(["isNotificationFirstSent"]);case 10:if(e.t0=e.sent,e.t0){e.next=13;break}e.t0={};case 13:if(r=e.t0,!0!==r.isNotificationFirstSent){e.next=17;break}return e.abrupt("return");case 17:return s={message:hv,delayTime:14400,type:uv.Z.NEW_USER_NOTIFICATION},e.next=20,i.sendNotificationAsync(s);case 20:FBInstant.player.setDataAsync({isNotificationFirstSent:!0}),e.next=26;break;case 23:e.prev=23,e.t1=e.catch(1),a.sendException(e.t1);case 26:case"end":return e.stop()}}),e,null,[[1,23]])})));return function(){return e.apply(this,arguments)}}(),t.sendDailyNotificationInstance=function(){var e=(0,s.Z)(h().mark((function e(){var t,n,i;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=window.game.rollbar,e.prev=1,n=new Date,i=n.getDay(),e.t0=i,e.next=0===e.t0?7:1===e.t0?10:2===e.t0?13:3===e.t0?16:4===e.t0?19:22;break;case 7:return e.next=9,this.sendMondayNotification();case 9:return e.abrupt("break",22);case 10:return e.next=12,this.sendTuesdayNotification();case 12:return e.abrupt("break",22);case 13:return e.next=15,this.sendWednesdayNotification();case 15:return e.abrupt("break",22);case 16:return e.next=18,this.sendThursdayNotification();case 18:return e.abrupt("break",22);case 19:return e.next=21,this.sendFridayNotification();case 21:return e.abrupt("break",22);case 22:return e.next=24,this.sendSaturdayNotification();case 24:return e.next=26,this.sendSundayNotification();case 26:e.next=31;break;case 28:e.prev=28,e.t1=e.catch(1),t.sendException(e.t1);case 31:case"end":return e.stop()}}),e,this,[[1,28]])})));return function(){return e.apply(this,arguments)}}(),t.sendMondayNotification=function(){var e=(0,s.Z)(h().mark((function e(){var t,n,i,a,r;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=window.game,n=t.facebook,i=t.rollbar,e.prev=1,r={message:null!=(a=fv.MONDAY)?a:hv,delayTime:86400,type:uv.Z.MONDAY_NOTIFICATION},e.next=5,n.sendNotificationAsync(r);case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),i.sendException(e.t0);case 10:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(){return e.apply(this,arguments)}}(),t.sendTuesdayNotification=function(){var e=(0,s.Z)(h().mark((function e(){var t,n,i,a,r;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=window.game,n=t.facebook,i=t.rollbar,e.prev=1,r={message:null!=(a=fv.TUESDAY)?a:hv,delayTime:86400,type:uv.Z.TUESDAY_NOTIFICATION},e.next=5,n.sendNotificationAsync(r);case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),i.sendException(e.t0);case 10:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(){return e.apply(this,arguments)}}(),t.sendWednesdayNotification=function(){var e=(0,s.Z)(h().mark((function e(){var t,n,i,a,r;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=window.game,n=t.facebook,i=t.rollbar,e.prev=1,r={message:null!=(a=fv.WEDNESDAY)?a:hv,delayTime:86400,type:uv.Z.WEDNESDAY_NOTIFICATION},e.next=5,n.sendNotificationAsync(r);case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),i.sendException(e.t0);case 10:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(){return e.apply(this,arguments)}}(),t.sendThursdayNotification=function(){var e=(0,s.Z)(h().mark((function e(){var t,n,i,a,r;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=window.game,n=t.facebook,i=t.rollbar,e.prev=1,r={message:null!=(a=fv.THURSDAY)?a:hv,delayTime:86400,type:uv.Z.THURSDAY_NOTIFICATION},e.next=5,n.sendNotificationAsync(r);case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),i.sendException(e.t0);case 10:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(){return e.apply(this,arguments)}}(),t.sendFridayNotification=function(){var e=(0,s.Z)(h().mark((function e(){var t,n,i,a,r;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=window.game,n=t.facebook,i=t.rollbar,e.prev=1,r={message:null!=(a=fv.FRIDAY)?a:hv,delayTime:86400,type:uv.Z.FRIDAY_NOTIFICATION},e.next=5,n.sendNotificationAsync(r);case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),i.sendException(e.t0);case 10:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(){return e.apply(this,arguments)}}(),t.sendSaturdayNotification=function(){var e=(0,s.Z)(h().mark((function e(){var t,n,i,a,r,s;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=window.game,n=t.facebook,i=t.rollbar,e.prev=1,r=this.findDelayTimeForNextDay(6,10),s={message:null!=(a=fv.SATURDAY)?a:hv,delayTime:r,type:uv.Z.SATURDAY_NOTIFICATION},e.next=6,n.sendNotificationAsync(s);case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),i.sendException(e.t0);case 11:case"end":return e.stop()}}),e,this,[[1,8]])})));return function(){return e.apply(this,arguments)}}(),t.sendSundayNotification=function(){var e=(0,s.Z)(h().mark((function e(){var t,n,i,a,r,s;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=window.game,n=t.facebook,i=t.rollbar,e.prev=1,r=this.findDelayTimeForNextDay(0,10),s={message:null!=(a=fv.SUNDAY)?a:hv,delayTime:r,type:uv.Z.SUNDAY_NOTIFICATION},e.next=6,n.sendNotificationAsync(s);case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),i.sendException(e.t0);case 11:case"end":return e.stop()}}),e,this,[[1,8]])})));return function(){return e.apply(this,arguments)}}(),t.findDelayTimeForNextDay=function(e,t){if(e<0||e>6)throw new Error("Invalid day for notification");if(t<0||t>23)throw new Error("Invalid hour for notification");var n=Date.now(),i=new Date(n).getDay(),a=new Date(n).getHours(),r=e,s=t;if(i===r&&a>=s){var o=3600*(168-a+s);if(o>604800)throw new Error("Notification delay time is more than 7 days");return o}var c=r<i?7-i+r:r-i;s<a&&c--;var l=3600*(24*c+(s<a?24-a+s:s-a));if(l>604800)throw new Error("Notification delay time is more than 7 days");return l},t.sendTestDailyNotificationInstance=function(){var e=(0,s.Z)(h().mark((function e(t){var n,i,a,r;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n={0:"SUNDAY",1:"MONDAY",2:"TUESDAY",3:"WEDNESDAY",4:"THURSDAY",5:"FRIDAY",6:"SATURDAY"},e.prev=1,a=hv,!(t<0||t>6)){e.next=5;break}throw new Error("Invalid day for notification. Day must be between 0 (Sunday) and 6 (Saturday)");case 5:return a=null!=(i=fv[n[t]])?i:hv,r={message:a,delayTime:300,type:uv.Z.GENERIC_NOTIFICATION},e.next=9,window.game.facebook.sendNotificationAsync(r);case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),console.warn(e.t0);case 14:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(t){return e.apply(this,arguments)}}(),e}();pv._instance=void 0;var gv=pv,mv=GameCore.Configs.Notification.ApiUrl,vv=function(){var e=(0,s.Z)(h().mark((function e(t){var n,i;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.playerId,e.next=3,(0,at.v)("players/"+n,t,{},mv,10);case 3:return i=e.sent,e.abrupt("return",(null==i?void 0:i.data)||{});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),yv="9pk2rsf72wcd",bv="solitaire-journey",Av=function(){function e(){var e=this;this.isSwitchGameReady=!1,this.handleSwitchGame=function(){var t;if(e.isSwitchGameReady){var n=window,i=n.GameSDK,a=n.game,r=a.player,s=a.analytics,o=null!=(t=r.getCustomData("lastCallSwitchGame"))?t:0;e.isSameDay(o)||(r.setCustomData("lastCallSwitchGame",Date.now()),s.event(mn._.SWITCH_GAME_POPUP,{target_game_name:bv,target_game_id:yv}),i.switchGameAsync(yv).catch((function(){s.event(mn._.SWITCH_GAME_POPUP_CANCEL,{target_game_name:bv,target_game_id:yv})})))}},this.assignSwitchGameTimer(),this.listenToEvents()}var t=e.prototype;return t.assignSwitchGameTimer=function(){var e,t=this,n=null!=(e=window.game.player.getCustomData("firstLoginDate"))?e:0,i=this.isSameDay(n);setTimeout((function(){t.isSwitchGameReady=!0}),i?6e5:138e4)},t.listenToEvents=function(){Wu.on(zu.REQUEST_SWITCH_GAME,this.handleSwitchGame)},t.isSameDay=function(e){if(!GameCore.Utils.Valid.isNumber(e))return!1;var t=new Date(e),n=new Date,i=t.getDate()===n.getDate(),a=t.getMonth()===n.getMonth(),r=t.getFullYear()===n.getFullYear();return i&&a&&r},e}(),Ev=Av;function Sv(e,t){var n="undefined"!==typeof I()&&P()(e)||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){var n;if(!e)return;if("string"===typeof e)return Tv(e,t);var i=S()(n=Object.prototype.toString.call(e)).call(n,8,-1);"Object"===i&&e.constructor&&(i=e.constructor.name);if("Map"===i||"Set"===i)return w()(e);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return Tv(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var i=0;return function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Tv(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var wv=GameCore.Configs,Cv=wv.AppId,Iv=wv.Notification,xv=[Ja.Z.SHUFFLE],Pv=function(e){function t(){for(var t,n,i=arguments.length,a=new Array(i),r=0;r<i;r++)a[r]=arguments[r];return(n=e.call.apply(e,_()(t=[this]).call(t,a))||this).i18nPromise=void 0,n.isMusicLoaded=!1,n.handleFBInstantGameStarted=function(){window.__fbGameReady=!0,window.__fbPlatform=FBInstant.getPlatform(),n.player.requestConnectedPlayers()},n.processAfterUpdatePlayerProfile=function(){Iv.Enable&&(n.updatePlayerProfileToNotificationService(),Iv.DisableSendNotification||(gv.sendNewUserNotification(),gv.sendDailyNotification()))},n.startGame=function(){n.analytics.event(mn._.APP_READY),n.storage.dispatch((0,cv.I)(xa.C.LOAD_SCENE)),n.storage.dispatch((function(e,t){var n=window.game,i=n.player,a=n.analytics,r=n.globalScene;try{var s=t(),o=ya(s),c=ba(s),l=i.getPlayer(),u=(o.entryPointData||{}).type;if(l.isUserNew&&a.event(mn._.NEW_USER),c===va)return void e(iv());if(c===ga){if(u===ua)return void e(av());if(u===ha)return void e(rv())}if(c===ma)return void e(sv());if(l.isUserNew)return void e(ov());if(c===pa)return void e(co());r.events.emit(xa.K.SWITCH,xa.C.DASHBOARD_SCENE)}catch(h){r.events.emit(xa.K.SWITCH,xa.C.DASHBOARD_SCENE),console.warn(h)}}))},n.handleLoadMusicCompleted=function(){n.audio.initMusic(lv.BACKGROUND.KEY),!!n.game.player.getPlayerSetting("music")&&n.audio.playMusic()},n}(0,o.Z)(t,e);var n=t.prototype;return n.preload=function(){var e,t=this;this.facebook.progressLoading.loadingProgressFbLoadScene(),this.analytics.event(mn._.SCREEN_OPEN,{screen_name:"LoadScene"}),this.load.on("progress",(function(e){t.facebook.progressLoading.onProgress(e)})),this.load.on(Phaser.Loader.Events.FILE_LOAD_ERROR,(function(e){var t=new tv("Load resources at LoadScene failed.");(0,i.R0)(t,{file:null==e?void 0:e.url})}));var n=this.theme.getCurrentThemeResources(),a=n.backgroundKey,r=n.backgroundFile,s=n.cardFaceKey,o=n.cardFaceTexture,c=n.cardFaceJSON;this.theme.updateCurrentCardStyle(),this.load.image(a,r),this.load.atlas({key:s,textureURL:o,atlasURL:c}),this.load.atlas({key:vn.Z.DEFAULT.KEY,textureURL:vn.Z.DEFAULT.TEXTURE,atlasURL:vn.Z.DEFAULT.JSON}),this.load.multiatlas({key:vn.Z.EFFECTS.KEY,path:vn.Z.EFFECTS.PATH,atlasURL:vn.Z.EFFECTS.JSON}),this.load.atlas({key:vn.Z.GAMEPLAY_DEFAULT.KEY,textureURL:vn.Z.GAMEPLAY_DEFAULT.TEXTURE,atlasURL:vn.Z.GAMEPLAY_DEFAULT.JSON}),this.load.atlas({key:vn.Z.CARD_BACK.KEY,textureURL:vn.Z.CARD_BACK.TEXTURE,atlasURL:vn.Z.CARD_BACK.JSON}),this.load.atlas({key:vn.Z.HOW_TO_PLAY.KEY,textureURL:vn.Z.HOW_TO_PLAY.TEXTURE,atlasURL:vn.Z.HOW_TO_PLAY.JSON}),this.load.atlas({key:vn.Z.THEME_PREVIEW.KEY,textureURL:vn.Z.THEME_PREVIEW.TEXTURE,atlasURL:vn.Z.THEME_PREVIEW.JSON}),this.load.atlas({key:vn.Z.LANGUAGES.KEY,textureURL:vn.Z.LANGUAGES.TEXTURE,atlasURL:vn.Z.LANGUAGES.JSON}),this.load.text("level1","assets/levels/level1.txt"),this.textStyler.addFont({type:"local",fontType:"woff",fontName:No.Z.FONT_FAMILY});var l=this.player.getPlayerSetting("language2"),u=null==(e=FBInstant.getLocale())?void 0:e.split("_")[0],h=["ru","en","tr","zh","de","es","id","it","ja","pt","fr"],d=l||u||"ru";we()(h).call(h,d)||(d="ru"),this.i18nPromise=this.lang.initI18n(this,{language:d,fallbackLanguage:"ru",supportLanguages:h,fontKeys:[No.Z.PRIMARY.KEY,No.Z.BOLD.KEY]});for(var f,p=Sv(xv);!(f=p()).done;){var g=f.value;""!=g&&this.load.audio(g,[lv.EFFECTS.PATH+g+".ogg",lv.EFFECTS.PATH+g+".mp3"])}this.player.updateData().then(this.processAfterUpdatePlayerProfile).catch(i.tO)},n.create=function(){var e=(0,s.Z)(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.i18nPromise;case 2:console.log("complete"),this.analytics.event(mn._.LOAD_COMPLETE),this.facebook.on("startgame",this.handleFBInstantGameStarted),this.facebook.gameStarted(),this.setupGlobalScene(),this.lazyLoadResource(),this.handleShowAdWhenStartGame(),this.initModules(),this.startGame();case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.updatePlayerProfileToNotificationService=function(){var e=this.player.getPlayer(),t=e.playerId,n=e.name,i=e.photo,a=e.locale,r=e.ASID,s={appId:Cv,playerId:t,name:n,photo:i,locale:a,ASID:r};console.info("\ud83d\ude80 > profileData",s),vv(s)},n.setupGlobalScene=function(){var e=this.scene.get(xa.C.GLOBAL_SCENE);e instanceof Kg.Z&&e.setup()},n.initModules=function(){new Ev},n.lazyLoadResource=function(){var e=this;setTimeout((function(){e.scene.wake(),e.loadSounds(),e.load.once(Phaser.Loader.Events.COMPLETE,(function(){e.scene.sleep()}))}),500)},n.loadSounds=function(){var e=Phaser.Loader.Events.FILE_KEY_COMPLETE;this.load.once(e+"audio-"+lv.BACKGROUND.KEY,this.handleLoadMusicCompleted);for(var t=Ja.Z,n=0,i=ae()(Ja.Z);n<i.length;n++){var a=t[i[n]];""!=a&&(we()(xv).call(xv,a)||this.load.audio(a,[lv.EFFECTS.PATH+a+".ogg",lv.EFFECTS.PATH+a+".mp3"]))}this.load.start()},n.handleShowAdWhenStartGame=function(){var e=this;if(GameCore.Configs.Ads.InterstitialAdOptions.showWhenStartGame){var t={en:"Initializing...",ru:"\u0418\u043d\u0438\u0446\u0438\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u044f...",pt:"Inicializando...",es:"Inicializando...",ar:"\u062a\u0647\u064a\u0626\u0629...",hi:"\u092a\u094d\u0930\u093e\u0930\u0902\u092d \u0915\u0930 \u0930\u0939\u093e \u0939\u0948...",zh:"\u521d\u59cb\u5316\u4e2d...",tr:"Ba\u015flat\u0131l\u0131yor...",ja:"\u521d\u671f\u5316\u4e2d...",fr:"Initialisation en cours...",id:"Menginisialisasi...",de:"Initialisierung...",it:"Inizializzazione..."}[this.lang.language||""]||"",n=document.createElement("div");n.id="wait-ads-mask";var a=document.createElement("div");a.id="wait-ads-content",n.appendChild(a);var r=document.createElement("div");r.id="wait-ads-dual-ring",a.appendChild(r);var o=document.createElement("div");o.id="wait-ads-text",o.innerHTML=t,a.appendChild(o),document.body.appendChild(n),this.audio.muteAll(),setTimeout((0,s.Z)(h().mark((function t(){return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,e.audio.stopMusic(),e.audio.muteAll(),t.next=5,e.ads.preloadInterstitialAdAsync();case 5:return t.next=7,e.ads.showInterstitialAdAsync();case 7:t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),(0,i.tO)(t.t0);case 12:return t.prev=12,n.remove(),e.ads.preloadInterstitialAdAsync().catch((function(){})),e.audio.unmuteAll(),e.audio.playMusic(),t.finish(12);case 18:case"end":return t.stop()}}),t,null,[[0,9,12,18]])}))),0)}},t}(Phaser.Scene),kv=Pv,_v=vn.Z.DEFAULT,Ov=_v.KEY,Rv=_v.FRAME,Lv=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n.avatar=void 0,n.crown=void 0,n.playerName=void 0,n.playerScore=void 0,n.scene=t,n.createAvatar(),n.updateSize(),n.createWinCrown(),n.createPlayerName(),n.createPlayerScore(),n.scene.add.existing((0,Ua.Z)(n)),n}(0,o.Z)(t,e);var n=t.prototype;return n.showCrown=function(e){this.crown.setVisible(e),e?(this.avatar.setFrame(Rv.AVATAR_FRAME_YELLOW_BIG),this.avatar.setBackground(Rv.AVATAR_BG_YELLOW_BIG)):(this.avatar.setFrame(Rv.AVATAR_FRAME_BLUE_BIG),this.avatar.setBackground(Rv.AVATAR_BG_BLUE_BIG))},n.setPlayerName=function(e){this.playerName.setText(e)},n.setPlayerScore=function(e){this.playerScore.setText(""+e)},n.loadPhoto=function(e,t){this.avatar.loadPhoto(e,t,60)},n.updateSize=function(){var e=this.avatar,t=e.width,n=e.height;this.setSize(t,n)},n.createAvatar=function(){this.avatar=new Go(this.scene,{key:Ov,frame:Rv.AVATAR_FRAME_BLUE_BIG,background:Rv.AVATAR_BG_BLUE_BIG,width:89,height:89}),this.add(this.avatar)},n.createWinCrown=function(){this.crown=this.scene.make.image({key:Ov,frame:Rv.ICON_CROWN}),this.crown.setWorldSize(52,36),Phaser.Display.Align.In.TopCenter(this.crown,this.avatar,0,75),this.add(this.crown)},n.createPlayerName=function(){this.playerName=this.scene.make.text({style:{fontFamily:No.Z.FONT_FAMILY,fontSize:this.scene.fontSize(42)+"px",fontStyle:"bold"},origin:{x:.5,y:.5}}),this.playerName.setTint(11632207),this.playerName.setHighQuality(),Phaser.Display.Align.In.BottomCenter(this.playerName,this.avatar,0,25),this.add(this.playerName)},n.createPlayerScore=function(){this.playerScore=this.scene.make.bitmapText({size:this.scene.fontSize(30),font:No.Z.PRIMARY.KEY,origin:{x:.5,y:.5}}),this.playerScore.setTint(6762627),Phaser.Display.Align.In.BottomCenter(this.playerScore,this.playerName,0,25),this.add(this.playerScore)},t}(Phaser.GameObjects.Container),Dv=Lv,Bv=vn.Z.DEFAULT,Nv=Bv.KEY,Mv=Bv.FRAME,Gv=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n.board=void 0,n.titleText=void 0,n.playerScore=void 0,n.opponentScore=void 0,n.buttonClose=void 0,n.buttonRestart=void 0,n.buttonShare=void 0,n.scene=t,n.createBoard(),n.createTitle(),n.createVSText(),n.createPlayers(),n.createRestartButton(),n.createShareButton(),n.scene.add.existing((0,Ua.Z)(n)),n}(0,o.Z)(t,e);var n=t.prototype;return n.createBoard=function(){this.board=new Sc(this.scene,0,0,600,340),this.board.setDepth(fn.Z.BACKGROUND),this.add(this.board),Phaser.Display.Align.In.Center(this.board,this)},n.createTitle=function(){var e=this.scene.add.container(),t=this.scene.make.image({key:Nv,frame:Mv.RIBBON_FULL});t.setWorldSize(340,75),this.titleText=this.scene.make.bitmapText({font:No.Z.PRIMARY.KEY,size:this.scene.fontSize(32),origin:{x:.5,y:.5}}),Phaser.Display.Align.In.Center(this.titleText,t,0,-10),this.buttonClose=new Jo.Z(this.scene,Nv,Mv.BUTTON_CLOSE,41.8,41.8),this.buttonClose.setName("Close"),Phaser.Display.Align.In.RightCenter(this.buttonClose,t,0,-3),e.setDepth(fn.Z.TILE),e.add([t,this.titleText,this.buttonClose]),this.add(e),Phaser.Display.Align.In.Center(e,this.board,0,-170)},n.createVSText=function(){var e=this.scene.make.bitmapText({font:No.Z.PRIMARY.KEY,size:this.scene.fontSize(70),text:"VS",origin:{x:.5,y:.5}});e.setTint(11632207),e.setDepth(fn.Z.TEXT),this.add(e),Phaser.Display.Align.In.Center(e,this.board,0,-45)},n.createPlayers=function(){this.playerScore=new Dv(this.scene),this.playerScore.setDepth(fn.Z.ITEM),this.add(this.playerScore),Phaser.Display.Align.In.Center(this.playerScore,this.board,-100,-50),this.opponentScore=new Dv(this.scene),this.opponentScore.setDepth(fn.Z.ITEM),this.add(this.opponentScore),Phaser.Display.Align.In.Center(this.opponentScore,this.board,100,-50)},n.createRestartButton=function(){this.buttonRestart=new Hc.Z(this.scene,{key:Nv,button:Mv.BUTTON_GREEN,icon:Mv.ICON_RESUME,text:"Restart"},170,72),this.buttonRestart.setName("Restart"),this.buttonRestart.setDepth(fn.Z.BUTTON),this.add(this.buttonRestart),Phaser.Display.Align.In.Center(this.buttonRestart,this.opponentScore,0,155)},n.createShareButton=function(){this.buttonShare=new Hc.Z(this.scene,{key:Nv,button:Mv.BUTTON_BLUE,icon:Mv.ICON_FLAT_SHARE,text:"Share"},153,72),this.buttonShare.setName("Restart"),this.buttonShare.setDepth(fn.Z.BUTTON),this.add(this.buttonShare),Phaser.Display.Align.In.Center(this.buttonShare,this.playerScore,0,155)},t}(Phaser.GameObjects.Container),Fv=Gv,Zv=function(e){function t(){for(var t,n,a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=e.call.apply(e,_()(t=[this]).call(t,r))||this).main=void 0,n.run=function(){n.getResultInfo()},n.handleClose=function(){n.scene.sleep(xa.C.RESULT_MATCH_SCENE),n.scene.run(xa.C.GAME_OVER_SCENE)},n.handleShareScore=function(){n.storage.dispatch(function(){var e=(0,s.Z)(h().mark((function e(t,n){var a,r,s,o,c,l,u,d,f,p,g;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=window.game,r=a.player,s=a.analytics,o=a.facebook,c=a.globalScene,e.prev=1,c.screen.open(qa.o4.NOTIFY_SCREEN,{message:"loading",loading:!0}),l=n(),e.next=6,Ro(l);case 6:return u=e.sent,wo(u),d=r.getPlayer(),f=d.playerId,p=d.name,g=d.photo,e.next=11,o.shareAsync({text:"Pheww, a great match!",intent:"SHARE",image:u||"",data:{playerId:f,playerName:p,playerPhoto:g,type:ua}});case 11:s.event(mn._.SHARE,{share_content_type:"MatchResult",success:!0}),e.next=18;break;case 14:e.prev=14,e.t0=e.catch(1),s.event(mn._.SHARE,{share_content_type:"MatchResult",success:!1}),(0,i.tO)(e.t0);case 18:return e.prev=18,c.screen.close(qa.o4.NOTIFY_SCREEN),e.finish(18);case 21:case"end":return e.stop()}}),e,null,[[1,14,18,21]])})));return function(t,n){return e.apply(this,arguments)}}())},n.handleRestartMatch=function(){n.storage.dispatch(function(){var e=(0,s.Z)(h().mark((function e(t,n){var a,r,s,o;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,window.game.globalScene.screen.open(qa.o4.NOTIFY_SCREEN,{message:"loading",loading:!0}),r=n(),s=ts(r),$t()(a=[pa,va]).call(a,s)>=0&&(t(Us()),t(Gs())),o=null,s===ga&&(o=us(r),t({type:pi,payload:{}})),t(Xs()),e.next=11,t(mo(s,o));case 11:e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),(0,i.tO)(e.t0);case 16:return e.prev=16,so(300),e.finish(16);case 19:case"end":return e.stop()}}),e,null,[[0,13,16,19]])})));return function(t,n){return e.apply(this,arguments)}}()),n.scene.sleep(xa.C.RESULT_MATCH_SCENE),n.scene.sleep(xa.C.GAME_OVER_SCENE)},n}(0,o.Z)(t,e);var n=t.prototype;return n.preload=function(){this.events.on("wake",this.run),this.events.on("create",this.run)},n.create=function(){e.prototype.create.call(this),this.createMask(.8),this.createMain(),this.createInput()},n.getResultInfo=function(){var e=this.storage.getState(),t=ms(e),n=ts(e),i=this.player.getPlayer(),a=i.photo,r=i.name,s=i.playerId,o=us(e),c=o.playerId,l=o.name,u=o.photo,h=(t[s]||{}).score,d=void 0===h?0:h,f=(t[c]||{}).score,p=void 0===f?0:f,g=ds(e,{playerId:s}),m=fs(e,{opponentId:c});n===ma&&(g=!0,m=!0);var v=g&&m;this.main.playerScore.loadPhoto(s,a),this.main.opponentScore.loadPhoto(c,u),this.main.playerScore.setPlayerName(r),this.main.opponentScore.setPlayerName(l),this.main.playerScore.setPlayerScore(d),this.main.opponentScore.setPlayerScore(p),this.main.playerScore.showCrown(v&&d>p),this.main.opponentScore.showCrown(v&&p>d),g&&m?d===p?this.main.titleText.setText("Draw"):d>p?this.main.titleText.setText("You Win"):d<p&&this.main.titleText.setText("You Lose"):this.main.titleText.setText("Waiting for Opponent"),g&&m&&(d===p||(d>p?this.audio.playSound(Ja.Z.YOU_WIN):d<p&&this.audio.playSound(Ja.Z.YOU_LOSE)))},n.createMain=function(){this.main=new Fv(this),Phaser.Display.Align.In.Center(this.main,this.gameZone,0,13)},n.createInput=function(){this.main.buttonClose.onClick=this.handleClose,this.main.buttonRestart.onClick=this.handleRestartMatch,this.main.buttonShare.onClick=this.handleShareScore},t}(Ga.Z);var Uv=Zv,Hv=n(559),Wv=n(186),zv=function(e){function t(){for(var t,n,i=arguments.length,a=new Array(i),r=0;r<i;r++)a[r]=arguments[r];return(n=e.call.apply(e,_()(t=[this]).call(t,a))||this).config=void 0,n.promisesLoadFonts={},n.promisesLoadAtlas={},n.promisesLoadXml={},n}(0,o.Z)(t,e);var n=t.prototype;return n.getFontKey=function(e,t){return e.replace("{{locale}}",t||this.language)},n.initI18n=function(e,t){var n=this;this.config=(0,r.Z)({fallbackLanguage:"en",fontKeys:[],atlasFonts:[],supportLanguages:["en"]},t);var i=new(l())((function(t){var i=e.i18n;console.log("init i18n"),i.initialize({fallbackLng:n.config.fallbackLanguage,loadPath:"assets/i18n/{{lng}}/{{ns}}.json",debug:GameCore.Utils.Valid.isDebugger(),languages:n.config.supportLanguages,compatibilityJSON:"v3"},(function(){console.log("changing language after init i18n");var e=[n.changeLanguage(n.config.language),n.preloadLanguageResource(n.game.globalScene,n.config.fallbackLanguage)];l().all(e).then((function(){t()}))}))})),a=[i];return new(l())((function(e){l().all(a).then((function(){return e()}))}))},n.changeLanguage=function(e){var t;if(!we()(t=this.supportedLanguages).call(t,e))return l().resolve();var n=this.preloadLanguageResource(this.game.globalScene,e);return new(l())((function(t){n.then((function(){Wv.ZP.changeLanguage(e).then((function(){t()})).catch((function(){t()}))})).catch((function(){t()})).finally((function(){}))}))},n.preloadLanguageResource=function(e,t){var n=this,i=this.config,a=i.fontKeys,r=i.atlasFonts,s=[];return De()(a).call(a,(function(i){return s.push(n.preloadBitmapFont(e,i,t))})),De()(r).call(r,(function(i){var a=i.atlasKey,r=i.fonts;s.push(n.preloadAtlas(e,a,t)),De()(r).call(r,(function(i){return s.push(n.preloadBitmapFontFromAtlas(e,i,a,t))}))})),e.load.start(),s.push(Wv.ZP.loadLanguages(t)),new(l())((function(e){l().all(s).then((function(){return e()}))}))},n.preloadBitmapFont=function(e,t,n){var i=this,a=t.replace("-{{locale}}",""),r=this.getFontKey(t,n);if(console.log({scene:e,fontKey:t,locale:n}),this.game.cache.bitmapFont.exists(r))return l().resolve();if(void 0!==this.promisesLoadFonts[r])return this.promisesLoadFonts[r];var s="assets/fonts/"+n+"/"+a+".png",o="assets/fonts/"+n+"/"+a+".xml";e.load.bitmapFont(r,s,o);var c=new(l())((function(n){var a=e.tweens.addCounter({duration:100,loop:-1,onLoop:function(){i.game.cache.bitmapFont.exists(r)&&(i.game.cache.bitmapFont.exists(t)||i.game.cache.bitmapFont.add(t,i.game.cache.bitmapFont.get(r)),a.remove(),n())}})}));return this.promisesLoadFonts[a]=c,c},n.preloadBitmapFontFromAtlas=function(e,t,n,i){var a=this,r=t.replace("-{{locale}}",""),s=this.getFontKey(t,i),o=n.replace("-{{locale}}",i),c=s+"_data",u="assets/fonts/"+i+"/"+r+".xml";if(this.game.cache.xml.exists(c)&&this.game.textures.exists(o))return l().resolve();if(void 0!==this.promisesLoadXml[c])return this.promisesLoadXml[c];e.load.xml(c,u);var h=new(l())((function(n){var i=e.tweens.addCounter({duration:50,loop:-1,onLoop:function(){a.game.cache.xml.exists(c)&&a.game.textures.exists(o)&&(i.remove(),a.game.cache.bitmapFont.exists(t)||Phaser.GameObjects.BitmapText.ParseFromAtlas(e,t,o,r,c),!1===Phaser.GameObjects.BitmapText.ParseFromAtlas(e,s,o,r,c)&&console.warn("Can't add bitmap font "+t),n())}})}));return this.promisesLoadXml[c]=h,h},n.preloadAtlas=function(e,t,n){var i=this,a=t.replace("-{{locale}}",n),r=t.replace("-{{locale}}",""),s="assets/fonts/"+n+"/"+r+".png",o="assets/fonts/"+n+"/"+r+".json";if(this.game.textures.exists(a))return l().resolve();if(void 0!==this.promisesLoadAtlas[a])return this.promisesLoadAtlas[a];e.load.atlas(a,s,o);var c=new(l())((function(t){var n=e.tweens.addCounter({duration:50,loop:-1,onLoop:function(){i.game.textures.exists(a)&&(n.remove(),t())}})}));return this.promisesLoadAtlas[a]=c,c},(0,le.Z)(t,[{key:"supportedLanguages",get:function(){var e;return _()(e=[]).call(e,this.config.supportLanguages)}},{key:"fallbackLanguage",get:function(){return this.config.fallbackLanguage}},{key:"language",get:function(){return Wv.ZP.language}},{key:"languageIndex",get:function(){var e;return $t()(e=this.supportedLanguages).call(e,this.language)}}]),t}(Phaser.Plugins.BasePlugin),Yv=zv,Vv=n(605),Kv=n(626),jv={Mobile:{Background:["bg-0","bg-1","bg-2","bg-3","bg-4"],CardFace:["card-style-0","card-style-1","card-style-2"],CardBack:["card-back-0","card-back-1","card-back-2","card-back-3","card-back-4"]},Desktop:{Background:["bg-desktop-0","bg-desktop-1","bg-desktop-2","bg-desktop-3","bg-desktop-4"],CardFace:["card-style-0","card-style-desktop-0","card-style-2"],CardBack:["card-back-0","card-back-1","card-back-2","card-back-3","card-back-4"]}},Xv=GameCore.Utils.Image.getImageScale(),qv={Background:{File:"./assets/images/"+Xv+"x/{}.jpg"},CardFaceAtlas:{Texture:"./assets/textures/"+Xv+"x/{}.png",JSON:"./assets/textures/"+Xv+"x/{}.json"}},Jv=qv.Background,Qv=qv.CardFaceAtlas,$v=function(e){function t(){for(var t,n,i=arguments.length,a=new Array(i),r=0;r<i;r++)a[r]=arguments[r];return(n=e.call.apply(e,_()(t=[this]).call(t,a))||this).events=void 0,n.device=void 0,n.backgroundIdx=void 0,n.cardFaceIdx=void 0,n.cardBackIdx=void 0,n}(0,o.Z)(t,e);var n=t.prototype;return n.init=function(t){e.prototype.init.call(this,t),this.events=new Phaser.Events.EventEmitter},n.config=function(){this.device=this.game.world.isLandscape()?"desktop":"mobile"},n.getCurrentThemeResources=function(){var e=this.getCurrentIdxConfig(),t=e.backgroundIdx,n=e.cardFaceIdx;return this.getThemeResources(t,n)},n.getThemeResources=function(e,t){var n="desktop"===this.device?jv.Desktop:jv.Mobile,i=n.Background[e]||n.Background[0],a=(0,Kv.Z)(Jv.File,[i]),r=n.CardFace[t]||n.CardFace[0];return{backgroundKey:i,backgroundFile:a,cardFaceKey:r,cardFaceTexture:(0,Kv.Z)(Qv.Texture,[r]),cardFaceJSON:(0,Kv.Z)(Qv.JSON,[r])}},n.getBackgroundConfigs=function(){var e,t="desktop"===this.device?jv.Desktop:jv.Mobile;return De()(e=t.Background).call(e,(function(e){return{key:e,url:(0,Kv.Z)(Jv.File,[e])}}))},n.getCardStyleAtlasConfigs=function(){var e,t="desktop"===this.device?jv.Desktop:jv.Mobile;return De()(e=t.CardFace).call(e,(function(e){return{key:e,textureURL:(0,Kv.Z)(Qv.Texture,[e]),atlasURL:(0,Kv.Z)(Qv.JSON,[e])}}))},n.getCurrentThemeConfig=function(){var e=this.backgroundIdx,t=this.cardFaceIdx,n=this.cardBackIdx;return"desktop"==this.device?{backgroundKey:jv.Desktop.Background[e],cardFaceKey:jv.Desktop.CardFace[t],cardBackFrame:jv.Desktop.CardBack[n]}:{backgroundKey:jv.Mobile.Background[e],cardFaceKey:jv.Mobile.CardFace[t],cardBackFrame:jv.Mobile.CardBack[n]}},n.getCurrentIdxConfig=function(){var e=this.game.player.getPlayerSettings(),t=e.backgroundDesktopIdx,n=e.cardFaceDesktopIdx,i=e.cardBackDesktopIdx,a=e.backgroundIdx,r=e.cardFaceIdx,s=e.cardBackIdx;return"desktop"==this.device?{backgroundIdx:t,cardFaceIdx:n,cardBackIdx:i}:{backgroundIdx:a,cardFaceIdx:r,cardBackIdx:s}},n.getThemePreview=function(){return"desktop"===this.device?jv.Desktop:jv.Mobile},n.changeBackground=function(e){"desktop"==this.device?this.game.player.setSetting("backgroundDesktopIdx",e):this.game.player.setSetting("backgroundIdx",e),this.backgroundIdx=e},n.changeCardFace=function(e){"desktop"==this.device?this.game.player.setSetting("cardFaceDesktopIdx",e):this.game.player.setSetting("cardFaceIdx",e),this.cardFaceIdx=e},n.changeCardBack=function(e){"desktop"==this.device?this.game.player.setSetting("cardBackDesktopIdx",e):this.game.player.setSetting("cardBackIdx",e),this.cardBackIdx=e},n.updateCurrentCardStyle=function(){var e=this.getCurrentIdxConfig(),t=e.backgroundIdx,n=e.cardFaceIdx,i=e.cardBackIdx;this.setCurrentStyle(t,n,i)},n.setCurrentStyle=function(e,t,n){this.backgroundIdx=e,this.cardFaceIdx=t,this.cardBackIdx=n},t}(Phaser.Plugins.BasePlugin),ey=$v,ty=function(e){function t(t){var n;return(n=e.call(this,{game:t,fragShader:"\nprecision mediump float;\n\nuniform sampler2D uMainSampler[%count%];\nuniform float gray;\n\nvarying vec2 outTexCoord;\nvarying float outTexId;\nvarying vec4 outTint;\nvarying vec2 fragCoord;\n\nvoid main()\n{\n    vec4 texture;\n\n    %forloop%\n\n    gl_FragColor = texture;\n    gl_FragColor.rgb = mix(gl_FragColor.rgb, vec3(0.2126 * gl_FragColor.r + 0.7152 * gl_FragColor.g + 0.0722 * gl_FragColor.b), gray);\n}",uniforms:["uProjectionMatrix","uMainSampler","gray"]})||this).gray=void 0,n.gray=.8,n}return(0,o.Z)(t,e),t.prototype.onPreRender=function(){this.set1f("gray",this.gray)},t}(Phaser.Renderer.WebGL.Pipelines.MultiPipeline),ny=(function(){var e=(0,s.Z)(h().mark((function e(t){var n,i,a,r,o;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=Math.ceil(t/80),i=0,a=function(){var e=(0,s.Z)(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,FBInstant.performHapticFeedbackAsync();case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.log("can not haptic");case 8:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(){return e.apply(this,arguments)}}();case 3:if(!(i<n)){e.next=11;break}return r=a(),o=(0,$a.qZ)(80),i+=1,e.next=9,l().all([r,o]);case 9:e.next=3;break;case 11:case"end":return e.stop()}}),e)})))}(),function(e){try{return!1}catch(t){}}),iy=function(e){function t(){return e.apply(this,arguments)||this}return(0,o.Z)(t,e),t.prototype.performVibrating=function(e){this.game.player.getPlayerSettings().vibrate&&ny(e)},t}(Phaser.Plugins.BasePlugin),ay=iy,ry=function(e){function t(){for(var t,n,i=arguments.length,a=new Array(i),r=0;r<i;r++)a[r]=arguments[r];return(n=e.call.apply(e,_()(t=[this]).call(t,a))||this).isVisible=!0,n.browserPrefixes=["moz","ms","o","","webkit"],n.visibleCallbacks=[],n.hiddenCallbacks=[],n.handleVisibilityChange=function(e){if("boolean"===typeof e)return e?n.onVisibleEvent():n.onHiddenEvent();var t=n.getBrowserPrefix(),i=n.getHiddenPropertyName(t);return document[i]?n.onHiddenEvent():n.onVisibleEvent()},n}(0,o.Z)(t,e);var n=t.prototype;return n.configure=function(){var e=this,t=this.getBrowserPrefix(),n=this.getVisibilityEvent(t);document.addEventListener(n,this.handleVisibilityChange,!1),document.addEventListener("focus",(function(){e.handleVisibilityChange(!0)}),!1),document.addEventListener("blur",(function(){e.handleVisibilityChange(!1)}),!1),window.addEventListener("focus",(function(){e.handleVisibilityChange(!0)}),!1),window.addEventListener("blur",(function(){e.handleVisibilityChange(!1)}),!1)},n.addEventVisible=function(e){this.visibleCallbacks.push(e)},n.addEventHidden=function(e){this.hiddenCallbacks.push(e)},n.isGameVisible=function(){return this.isVisible},n.getHiddenPropertyName=function(e){return e?e+"Hidden":"hidden"},n.getVisibilityEvent=function(e){return(e||"")+"visibilitychange"},n.getBrowserPrefix=function(){for(var e=0;e<this.browserPrefixes.length;e++)if(this.getHiddenPropertyName(this.browserPrefixes[e])in document)return this.browserPrefixes[e];return""},n.onVisibleEvent=function(){this.isVisible||(this.isVisible=!0,console.log("visible"),this.visibleCallbacks.forEach((function(e){e()})))},n.onHiddenEvent=function(){this.isVisible&&(this.isVisible=!1,console.log("hidden"),this.hiddenCallbacks.forEach((function(e){e()})))},t}(Phaser.Plugins.BasePlugin),sy=ry,oy=n(606),cy=n(411),ly=n.n(cy),uy=function(e){if((this._i18nFontKey||this.font)&&this.setFont(this._i18nFontKey||this.font),e!==this._i18nKey&&(this._i18nKey=e.toString()||""),this._isIgnoreLanguage)return this._setText(e);var t=this._setText(Wv.ZP.t(this._i18nKey,this._interpolations)||"");return this.refontSize&&this.refontSize(),this.emit("textChanged",e),t},hy=function(e,t,n){if(we()(e).call(e,"{{locale}}")){e!==this._i18nFontKey&&(this._i18nFontKey=e.toString()||"");var i=this._baseLocale||this.scene.lang.language,a=e.replace("{{locale}}",i);return this._setFont(a,t,n)}},dy={get:function(){return this._interpolations},set:function(e){this._interpolations=e,this.setText(this._i18nKey)}},fy=function(e){this._interpolations||(this._interpolations={}),this._interpolations=(0,r.Z)({},this._interpolations,e),this.setText(this._i18nKey)},py=function(e,t){this._interpolations||(this._interpolations={}),this._interpolations[e]=t,this.setText(this._i18nKey)},gy=function(e){e in this._interpolations&&delete this._interpolations[e],this.setText(this._i18nKey)},my=function(e,t){this._isIgnoreLanguage=void 0==e||e,this._baseLocale=t,this.setText(this._i18nKey)},vy=function(e,t,n,i){var a=this;if((!this._maxWidth||!this._maxHeight||!this._baseFontSize)&&GameCore.Utils.Valid.isDebugger()&&GameCore.Configs.Debugger.ShowBoxBitmapText){var r=this.scene.add.rectangle(0,0,10,10);r.setStrokeStyle(1,16711680,1),this.scene.events.on(Phaser.Scenes.Events.UPDATE,(function(){r.setPosition(a.x,a.y),r.setOrigin(a.originX,a.originY),r.setSize(a._maxWidth,a._maxHeight),a.parentContainer&&a.parentContainer.add(r)}))}this._maxWidth=e||this._maxWidth||Phaser.Math.MAX_SAFE_INTEGER,this._maxHeight=t||this._maxHeight||Phaser.Math.MAX_SAFE_INTEGER,this._baseFontSize=i||this._baseFontSize||this.fontSize,this.setMaxWidth(this._maxWidth,n?Phaser.Math.MAX_SAFE_INTEGER:void 0),this.setText(this._i18nKey)},yy=function(){if(this._maxWidth&&this._maxHeight&&this._baseFontSize){var e=this._maxWidth,t=this._maxHeight,n=this._baseFontSize,i=this.wordWrapCharCode===Phaser.Math.MAX_SAFE_INTEGER;for(this.setFontSize(n);this.width>e||this.height>t||this.getTextBounds().lines.lengths.length>1&&i;)this.setFontSize(.95*this.fontSize)}},by=function(e,t){e.prototype.setText!==uy&&(e.prototype._setText=e.prototype.setText,e.prototype._setFont=e.prototype.setFont,e.prototype.setText=uy,e.prototype.setFont=hy,v()(e.prototype,"interpolations",dy),e.prototype.setTranslationParameter=py,e.prototype.setTranslationParameters=fy,e.prototype.clearTranslationParameter=gy,e.prototype.setIgnoreLanguage=my);var n=Phaser.GameObjects.GameObjectCreator;if(n){var i=n.prototype[t];i&&(delete n.prototype[t],n.register("_"+t,i),n.register(t,(function(e,n){void 0===n&&(n=!1);var i=this.scene.make["_"+t](e,n);return i.interpolations=e.interpolations,i})))}var a=Phaser.GameObjects.GameObjectFactory;if(a){var r=a.prototype[t];r&&(delete a.prototype[t],a.register("_"+t,r))}},Ay={extendText:function(){var e=Phaser.GameObjects.Text;e&&by(e,"text");var t=Phaser.GameObjects.GameObjectFactory;t&&t.register("text",(function(e,t,n,i,a){var r=this.scene.add._text(e,t,n,i);return r.interpolations=a,r}))},extendBitmapText:function(){var e=Phaser.GameObjects.BitmapText;e&&(by(e,"bitmapText"),e.prototype.setMaxSize=vy,e.prototype.refontSize=yy);var t=Phaser.GameObjects.GameObjectFactory;t&&t.register("bitmapText",(function(e,t,n,i,a,r){var s=this.scene.add._bitmapText(e,t,n,i,a);return s.interpolations=r,s}))},extendDynamicBitmapText:function(){var e=Phaser.GameObjects.DynamicBitmapText;e&&by(e,"dynamicBitmapText");var t=Phaser.GameObjects.GameObjectFactory;t&&t.register("dynamicBitmapText",(function(e,t,n,i,a,r){var s=this.scene.add._dynamicBitmapText(e,t,n,i,a);return s.interpolations=r,s}))}},Ey=function(e){function t(){for(var t,n,i=arguments.length,a=new Array(i),r=0;r<i;r++)a[r]=arguments[r];return(n=e.call.apply(e,_()(t=[this]).call(t,a))||this).languageChangedBound=void 0,n}(0,o.Z)(t,e),t.staticConstructor=function(){Ay.extendText(),Ay.extendBitmapText()};var n=t.prototype;return n.boot=function(){var e=this.systems.events;console.log("boot",this.scene),e.on("shutdown",this.shutdown,this),e.on("shutdown",this.shutdown,this),this.languageChangedBound=this.languageChanged.bind(this),this.on("languageChanged",this.languageChangedBound)},n.initialize=function(e,t){Wv.ZP.use(new(ly())(null,e)),e?Wv.ZP.init(e,t):Wv.ZP.init(t)},n.use=function(e){return Wv.ZP.use(e)},n.t=function(e,t){return Wv.ZP.t(e,t)},n.exists=function(e,t){return Wv.ZP.exists(e,t)},n.loadResources=function(e){Wv.ZP.loadResources(e)},n.createInstance=function(e,t){return Wv.ZP.createInstance(e,t)},n.cloneInstance=function(e,t){return Wv.ZP.cloneInstance(e,t)},n.getFixedT=function(e,t){return Wv.ZP.getFixedT(e,t)},n.changeLanguage=function(e,t){return Wv.ZP.changeLanguage(e,t)},n.loadNamespaces=function(e,t){return Wv.ZP.loadNamespaces(e,t)},n.loadLanguages=function(e,t){return Wv.ZP.loadLanguages(e,t)},n.reloadResources=function(e,t){return Wv.ZP.reloadResources(e,t)},n.setDefaultNamespace=function(e){Wv.ZP.setDefaultNamespace(e)},n.dir=function(e){return Wv.ZP.dir(e)},n.on=function(e,t){Wv.ZP.on(e,t)},n.off=function(e,t){Wv.ZP.off(e,t)},n.getResource=function(e,t,n,i){Wv.ZP.getResource(e,t,n,i)},n.addResource=function(e,t,n,i,a){Wv.ZP.addResource(e,t,n,i,a)},n.addResources=function(e,t,n){Wv.ZP.addResources(e,t,n)},n.addResourceBundle=function(e,t,n,i,a){Wv.ZP.addResourceBundle(e,t,n,i,a)},n.hasResourceBundle=function(e,t){return Wv.ZP.hasResourceBundle(e,t)},n.getResourceBundle=function(e,t){return Wv.ZP.getResourceBundle(e,t)},n.removeResourceBundle=function(e,t){Wv.ZP.removeResourceBundle(e,t)},n.recursiveUpdateText=function(e){var t=this;if(!(e instanceof Phaser.GameObjects.Text||e instanceof Phaser.GameObjects.BitmapText))return e instanceof Phaser.GameObjects.Container||e instanceof Phaser.GameObjects.Layer?(console.log(e),void e.list.forEach((function(e){t.recursiveUpdateText(e)}))):void(e.children&&e.children.length>0&&e.children.each((function(e){t.recursiveUpdateText(e)})));e.setText(e._i18nKey)},n.shutdown=function(){this.off("languageChanged",this.languageChangedBound);var e=this.systems.events;e.off("shutdown",this.shutdown,this,!1),e.off("shutdown",this.shutdown,this,!1)},n.languageChanged=function(){console.log("language change",this.scene),this.recursiveUpdateText(this.scene)},(0,le.Z)(t,[{key:"language",get:function(){return Wv.ZP.language}},{key:"languages",get:function(){return Wv.ZP.languages}},{key:"format",get:function(){return Wv.ZP.format}},{key:"options",get:function(){return Wv.ZP.options}},{key:"isInitialized",get:function(){return Wv.ZP.isInitialized}}]),t}(Phaser.Plugins.ScenePlugin);Ey.staticConstructor();var Sy=["Enable"],Ty=function(e){function t(){return e.apply(this,arguments)||this}(0,o.Z)(t,e);var i=t.prototype;return i.boot=function(){var t=(0,s.Z)(h().mark((function t(){return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.prototype.boot.call(this),this.addExtraGameObjectMethods(),this.addExtraFBInstantFunctions(),this.addPlugins(),t.next=6,this.addDevPlugins();case 6:return t.next=8,this.initAdsAsync();case 8:this.addScenes(),this.addDevScenes(),this.initWorld(),this.initManagers(),this.initStorage(),this.initVisibilityChangeHandler(),this.initUtils(),this.initRollbar(),this.initConsole(),this.initDebugger(),this.initStatistics(),this.initParticleEditor(),this.initProfilerPlugin(),this.initAdaptivePerformance(),this.initCanvasRecorderPlugin();case 23:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),i.start=function(){e.prototype.start.call(this)},i.addExtraGameObjectMethods=function(){var e=new A(this);e.addKillRevive(),e.addKillReviveGroup(),e.addDrawDebugBox(),e.addSetWorldSize(),e.addSetWorldSizeForContainer(),e.addGetWorldPosition(),e.addCropByViewport(),e.addHighQuality(),e.addGradientHorizontalTint(),e.addRadius(),e.addSetLineHeightForBitmapText()},i.addExtraFBInstantFunctions=function(){var e=new d.Z(this.facebook);this.facebook.getLocale=e.getLocale,this.facebook.shareAsync=e.shareAsync,this.facebook.inviteAsync=e.inviteAsync,this.facebook.switchAsync=e.switchAsync,this.facebook.chooseAsync=e.chooseAsync,this.facebook.createAsync=e.createAsync,this.facebook.sendMessage=e.sendMessage,this.facebook.getContextID=e.getContextID,this.facebook.getPlayerToken=e.getPlayerToken,this.facebook.matchPlayerAsync=e.matchPlayerAsync,this.facebook.getContextPlayers=e.getContextPlayers,this.facebook.setLoadingProgress=e.setLoadingProgress,this.facebook.attemptToAddShortcut=e.attemptToAddShortcut,this.facebook.attemptToSubscribeBot=e.attemptToSubscribeBot,this.facebook.postSessionScoreAsync=e.postSessionScoreAsync,this.facebook.getRewardedVideoAsync=e.getRewardedVideoAsync,this.facebook.sendNotificationAsync=e.sendNotificationAsync,this.facebook.getInterstitialAdAsync=e.getInterstitialAdAsync,this.facebook.isSupportedAPI=e.isSupportedAPI,e.injectTournament(),this.facebook.progressLoading=new g(this)},i.addPlugins=function(){this.plugins.install("Storage",qi,!0,"storage"),this.plugins.install("Rollbar",dn,!0,"rollbar"),this.plugins.install("AdsManager",q,!0,"ads"),this.plugins.install("AuthManager",be,!0,"auth"),this.plugins.install("AudioManager",ce,!0,"audio"),this.plugins.install("WorldManager",oa,!0,"world"),this.plugins.install("PlayerManager",Mt,!0,"player"),this.plugins.install("ProfileManager",Jt,!0,"profile"),this.plugins.install("AnalyticsManager",$,!0,"analytics"),this.plugins.install("AdaptivePerformance",ke,!0,"performance"),this.plugins.install("ThemeManager",ey,!0,"theme"),this.plugins.install("VibrationManager",ay,!0,"vibration"),this.plugins.install("VisibilityChangeHandler",sy,!0,"visibility"),this.plugins.install("LanguageManager",Yv,!0,"lang"),this.plugins.installScenePlugin("textStyler",ta,"textStyler"),this.plugins.installScenePlugin("ScreenManager",Tn,"screen"),this.plugins.installScenePlugin("FrameCapture",Se,"frameCapture"),this.plugins.installScenePlugin("I18n",Ey,"i18n"),window.SpinePlugin&&this.plugins.installScenePlugin("SpinePlugin",SpinePlugin,"spine"),this.storage=this.plugins.get("Storage"),this.rollbar=this.plugins.get("Rollbar"),this.ads=this.plugins.get("AdsManager"),this.auth=this.plugins.get("AuthManager"),this.audio=this.plugins.get("AudioManager"),this.world=this.plugins.get("WorldManager"),this.theme=this.plugins.get("ThemeManager"),this.player=this.plugins.get("PlayerManager"),this.lang=this.plugins.get("LanguageManager"),this.profile=this.plugins.get("ProfileManager"),this.analytics=this.plugins.get("AnalyticsManager"),this.performance=this.plugins.get("AdaptivePerformance"),this.plugins.install("KawaseBlurFilterPlugin",Hv.Z),this.visibility=this.plugins.get("VisibilityChangeHandler")},i.addDevPlugins=function(){var e=(0,s.Z)(h().mark((function e(){var t,i,a,r,s,o;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(GameCore.Utils.Valid.isDebugger()){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,Promise.all([n.e(7),n.e(942)]).then(n.bind(n,607));case 4:return t=e.sent.default,e.next=7,Promise.all([n.e(498),n.e(739),n.e(530)]).then(n.bind(n,608));case 7:return i=e.sent.default,e.next=10,n.e(401).then(n.bind(n,609));case 10:return a=e.sent.default,e.next=13,Promise.all([n.e(498),n.e(123)]).then(n.bind(n,610));case 13:return r=e.sent.default,e.next=16,Promise.all([n.e(498),n.e(803)]).then(n.bind(n,611));case 16:return s=e.sent.default,e.next=19,Promise.all([n.e(498),n.e(616),n.e(613)]).then(n.bind(n,612));case 19:o=e.sent.default,this.plugins.install("Console",t,!0,"console"),this.plugins.install("Debugger",i,!0,"debugger"),this.plugins.install("Statistics",a,!0,"statistics"),this.plugins.install("Profiler",r,!0,"profiler"),this.plugins.install("ParticleEditor",s,!0,"particle-editor"),this.plugins.install("CanvasRecorder",o,!0,"canvasRecorder"),this.eruda=this.plugins.get("Console"),this.debugger=this.plugins.get("Debugger"),this.statistics=this.plugins.get("Statistics"),this.profiler=this.plugins.get("Profiler"),this.particleEditor=this.plugins.get("ParticleEditor"),this.canvasRecorder=this.plugins.get("CanvasRecorder");case 32:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),i.addScenes=function(){this.scene.add(xa.C.BOOT_SCENE,Ma,!0),this.scene.add(xa.C.LOAD_SCENE,kv,!1),this.scene.add(xa.C.GAME_SCENE,cm,!1),this.scene.add(xa.C.GAME_OVER_SCENE,Jc,!1),this.scene.add(xa.C.DASHBOARD_SCENE,Za,!1),this.scene.add(xa.C.LEADERBOARD_SCENE,ev,!1),this.scene.add(xa.C.RESULT_MATCH_SCENE,Uv,!1),this.scene.add(xa.C.GLOBAL_SCENE,Kg.Z,!1)},i.addDevScenes=function(){var e=(0,s.Z)(h().mark((function e(){var t,i;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(GameCore.Utils.Valid.isDebugger()){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,n.e(638).then(n.bind(n,614));case 4:return t=e.sent.default,e.next=7,n.e(557).then(n.bind(n,615));case 7:i=e.sent.default,this.scene.add(xa.C.TEST_SCENE,t,!1),this.scene.add(xa.C.ANIMATIONS_SCENE,i,!1);case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),i.initAdsAsync=function(){var e=(0,s.Z)(h().mark((function e(){var t,n,i;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=GameCore.Configs.Ads,e.next=3,this.getAdServiceInstance();case 3:(n=e.sent).setGame(this),i=(0,r.Z)({},t.InterstitialAdOptions),this.ads.configure(n,{enabled:t.Enabled,calculateSafeAreaBottom:t.CalculateSafeAreaBottom,enableRewardVideoResetInterstitial:t.EnableRewardVideoResetInterstitial,interstitialAdOptions:i,rewardAdOptions:t.RewardAdOptions,bannerAdOptions:t.BannerAdOptions});case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),i.getAdServiceInstance=function(){var e=(0,s.Z)(h().mark((function e(){var t,i,a,r;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=GameCore.Configs.Ads,i=t.AdService,!t.Mockup.Enable){e.next=6;break}return e.next=4,n.e(131).then(n.bind(n,616));case 4:return a=e.sent.default,e.abrupt("return",a);case 6:if("google"!==i){e.next=19;break}return e.prev=7,e.next=10,this.initGoogleAdInstanceAsync();case 10:if(null===(r=e.sent)){e.next=13;break}return e.abrupt("return",r);case 13:e.next=19;break;case 15:return e.prev=15,e.t0=e.catch(7),console.error("Google Ads failed to load, fallback to GameAdInstance",e.t0),e.abrupt("return",Vv.default);case 19:return e.abrupt("return",Vv.default);case 20:case"end":return e.stop()}}),e,this,[[7,15]])})));return function(){return e.apply(this,arguments)}}(),i.initGoogleAdInstanceAsync=function(){var e=(0,s.Z)(h().mark((function e(){var t,n,i,a,r,s,o,c;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("loaded"!==oy.default.initStatus){e.next=2;break}return e.abrupt("return",oy.default);case 2:if(t=GameCore.Configs.Ads.AdServiceConfigs.Google){e.next=6;break}return console.error("Google Ads config not found"),e.abrupt("return",null);case 6:return n=t.DataAdClient,i=t.DataAdChannel,a=t.DataAdBreakTest,r=t.DataAdFrequencyHint,s=t.DataAdHost,o=t.MaxScriptLoadRetryCount,c={dataAdClient:n,dataAdChannel:i,dataAdBreakTest:a,dataAdFrequencyHint:r,dataAdHost:s,maxScriptLoadRetryCount:o},e.prev=8,oy.default.setGame(this),e.next=12,oy.default.initGoogleAdsAsync(c);case 12:return e.abrupt("return",oy.default);case 15:return e.prev=15,e.t0=e.catch(8),console.error("Google Ads failed to load, fallback to GameAdInstance",e.t0),e.abrupt("return",null);case 19:case"end":return e.stop()}}),e,this,[[8,15]])})));return function(){return e.apply(this,arguments)}}(),i.initWorld=function(){var e=GameCore.Configs.Game,t=e.AutoResize,n=e.PortraitRatio,i=e.PortraitWidth,a=e.PortraitHeight,r=e.LandscapeRatio,s=e.LandscapeWidth,o=e.LandscapeHeight,c=t,l=e.DisableLandscape,u=e.FullSizeOnLandscape,h=n,d=i,f=a,p=r,g=s,m=o;console.info("\ud83d\ude80 > portraitRatio",h),console.info("\ud83d\ude80 > landscapeRatio",p),this.world.configure({autoResize:c,portraitRatio:h,portraitWidth:d,portraitHeight:f,landscapeRatio:p,landscapeWidth:g,landscapeHeight:m,disableLandscape:l,fullSizeOnLandscape:u}),this.world.resize(e.ForcePixelRatio)},i.initManagers=function(){this.theme.config()},i.initStorage=function(){var e=new Ia(this);this.storage.setInitiator(e)},i.initVisibilityChangeHandler=function(){this.visibility.configure()},i.initUtils=function(){this.handlePauseAudio(),this.addPipelines(),this.removeUnusedPipelines()},i.initConsole=function(){GameCore.Utils.Valid.isDebugger()&&(GameCore.Configs.Debugger.ShowConsole&&this.eruda.configure({tool:["console","info"],defaults:{theme:"Dark"}}))},i.initDebugger=function(){if(GameCore.Utils.Valid.isDebugger()){var e=GameCore.Configs.Debugger,t=e.ShowInspector,n=e.ShowMonitoring;(t||n)&&this.debugger.configure(GameCore.Configs.Debugger)}},i.initStatistics=function(){GameCore.Utils.Valid.isDebugger()&&(GameCore.Configs.Statistics.Enable&&this.statistics.configure(GameCore.Configs.Statistics))},i.initParticleEditor=function(){GameCore.Utils.Valid.isDebugger()&&(GameCore.Configs.ParticleEditor.Enable&&this.particleEditor.configure(GameCore.Configs.ParticleEditor))},i.initProfilerPlugin=function(){GameCore.Utils.Valid.isDebugger()&&(GameCore.Configs.ProfilerPlugin.Enable&&this.profiler.configure())},i.initAdaptivePerformance=function(){var e=GameCore.Configs.Performance,t=e.Enable,n=(0,a.Z)(e,Sy);if(t){var i=this.world.getPixelRatio();this.performance.configure((0,r.Z)({pixelRatio:i},n)),this.performance.active()}},i.initCanvasRecorderPlugin=function(){var e=this;if(GameCore.Utils.Valid.isDebugger()){var t=GameCore.Configs.CanvasRecorder;if(t.Enable){var n=t.Options,i=n.Type,a=n.Quality,r=n.RecordFps,o=n.SyncFps;this.canvasRecorder.configure({type:i,quality:a,syncFps:o,recordFps:r});var c=document.querySelector("canvas");if(!c)return console.error("Canvas not found");this.canvasRecorder.setCanvas(c);var u=this.canvasRecorder.getOptions(),d=this.canvasRecorder.waitNextFrame;this.canvasRecorder.waitNextFrame=(0,s.Z)(h().mark((function t(){return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!u.syncFps){t.next=5;break}return e.loop.sleep(),t.abrupt("return",new(l())((function(t){e.events.once(Phaser.Core.Events.POST_RENDER,t),e.loop.lastTime=1e3/u.recordFps,e.loop.step()})));case 5:return e.loop.wake(),t.abrupt("return",d.call(e.canvasRecorder));case 7:case"end":return t.stop()}}),t)})))}}},i.initRollbar=function(){var e=GameCore.Configs.Rollbar.Enable;console.warn({isRollbarEnabled:e}),e&&this.rollbar.setup()},i.handlePauseAudio=function(){var e=this;this.sound.pauseOnBlur=!1,this.visibility.addEventVisible((function(){e.audio.playMusic(),e.audio.resumeAllSounds()})),this.visibility.addEventHidden((function(){e.audio.pauseMusic(),e.audio.pauseAllSounds()}))},i.addPipelines=function(){var e=this.renderer;e instanceof Phaser.Renderer.WebGL.WebGLRenderer&&e.pipelines.add("Grayscale",new ty(this))},i.removeUnusedPipelines=function(){var e=this.renderer;if(e instanceof Phaser.Renderer.WebGL.WebGLRenderer){var t=e.pipelines,n=Phaser.Renderer.WebGL.Pipelines;if(n)[n.ROPE_PIPELINE,n.LIGHT_PIPELINE,n.POSTFX_PIPELINE,n.POINTLIGHT_PIPELINE,n.BITMAPMASK_PIPELINE].forEach((function(e){var n;null==(n=t.get(e))||n.destroy(),t.remove(e)}))}},t}(Phaser.Game),wy=Ty,Cy=GameCore.Utils.Valid.isDebugger(),Iy={parent:"app",type:Phaser.AUTO,width:0,height:0,scale:{autoRound:!0},dom:{createContainer:!1},loader:{maxParallelDownloads:6,crossOrigin:"no-cros"},input:{gamepad:!1,keyboard:Cy,touch:{capture:!0},smoothFactor:1,activePointers:1,windowEvents:!1},disableContextMenu:!0,render:{pixelArt:!1,antialias:!0,antialiasGL:!0,transparent:!0,desynchronized:!1,powerPreference:"high-performance",clearBeforeRender:!1,roundPixels:!1},plugins:{global:[]}};(0,i.j6)();var xy=setInterval((function(){window.__analyticsInitiated&&(window.__fbGameReady=!1,clearInterval(xy),clearInterval(window.__fbInstantLoadingTimer),GameSDK.setLoadingProgress(30),gtag("event","app_initialize",{send_to:["GA"]}),function(){try{var e=new wy(Iy);window.game=e}catch(t){(0,i.tO)(t)}}())}),50)},661:function(e,t,n){"use strict";n.d(t,{Z5:function(){return b},H$:function(){return A},wF:function(){return E},bh:function(){return S},Iy:function(){return T},xB:function(){return w}});var i=n(624),a=n(627),r=n(4),s=n.n(r),o=n(35),c=n.n(o),l=n(1),u=n.n(l),h=n(653),d=n(640),f=n(662),p=GameCore.Configs,g=p.AppId,m=p.OtherHost,v=p.LeadersBoard,y=p.Tournament,b=function(){var e=(0,a.Z)(u().mark((function e(t){var n,a;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n={appId:g,resetScore:0,numberOfLeaders:15,timezone:"utc+0",sortOrder:"desc",statistics:"max",resettable:"manually",description:"no description"},!v.UseMock){e.next=5;break}return e.next=4,(0,d.qZ)(1e3);case 4:return e.abrupt("return",(0,i.Z)({},n,t,{_id:v.LeaderboardId,type:"app_leaderboard",description:"mockup_leaderboard",createdAt:new Date(Date.now()).toISOString(),updatedAt:new Date(Date.now()).toISOString()}));case 5:return"leaderboards",e.next=8,(0,h.v)("leaderboards",(0,i.Z)({},n,t),{},m);case 8:return a=e.sent,e.abrupt("return",(null==a?void 0:a.data)||{});case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),A=function(){var e=(0,a.Z)(u().mark((function e(t,n){var i,a,r,o,l,f,p,g,b,A,E;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===n&&(n={}),t){e.next=3;break}return e.abrupt("return",[]);case 3:if(i=[],!y.UseMock){e.next=9;break}return e.next=7,(0,d.qZ)(1e3);case 7:return l=(o=n).limit,void 0===l?Math.floor(10*Math.random()):l,f=o.offset,p=void 0===f?0:f,e.abrupt("return",s()(a=c()(r=new Array(Math.floor(10*Math.random()))).call(r,null)).call(a,(function(e,t){var n=(t+1)*(p+1),i=v.MockOptions.PlayerEntryIndex===t,a={playerId:"player-0"+n,name:"MPlayer "+n,photo:"./assets/images/others/avatar.jpg",rank:n,score:Math.floor(1e5/n+1e4*Math.random())};if(i){var r=window.game.player.getPlayer(),s=r.playerId,o=r.name,c=r.photo;a.playerId=s,a.name=o,a.photo=c}return a})));case 9:return g=GameCore.Utils.String.params(n),b="leaderboards/"+t+"/leaders",e.next=13,(0,h.U)(b+"?"+g,{},m);case 13:if((A=e.sent)&&(null==A||!A.error)){e.next=16;break}throw new Error((null==A?void 0:A.error)||"Leaderboard not found");case 16:if(!((E=(null==A?void 0:A.data)||[]).length<1)){e.next=19;break}return e.abrupt("return",i);case 19:return i=E,e.abrupt("return",i);case 21:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),E=function(){var e=(0,a.Z)(u().mark((function e(t){var n,i;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return",null);case 2:return n="leaderboards/"+t,e.next=5,(0,h.U)(""+n,{},m);case 5:if((i=e.sent)&&(null==i||!i.error)){e.next=8;break}return e.abrupt("return",null);case 8:return e.abrupt("return",null==i?void 0:i.data);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),S=function(){var e=(0,a.Z)(u().mark((function e(t,n,i){var a;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,h.v)("leaderboards/"+t+"/players/"+n,{score:i},{},m);case 2:return a=e.sent,e.abrupt("return",(null==a?void 0:a.data)||{});case 4:case"end":return e.stop()}}),e)})));return function(t,n,i){return e.apply(this,arguments)}}(),T=function(){var e=(0,a.Z)(u().mark((function e(){var t,n,i,a,r,s,o,c,l;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=GameCore.Utils.String.params({limit:100,type:"world_tournament_leaderboard"}),"leaderboards",e.next=4,(0,h.U)("leaderboards?"+t,{},m);case 4:if((n=e.sent)&&(null==n||!n.error)){e.next=7;break}throw new f.Z;case 7:for(i=(null==n?void 0:n.data)||[],a=[],r=0;r<i.length;r++)s=JSON.parse(i[r].description),o=new Date(i[r].createdAt).getTime(),c=Math.round((6048e5+o)/1e3),l={id:s.tournamentID,title:i[r].name,endTime:c,contextID:s.contextID,payload:{playerId:"",playerName:"",leaderboardId:i[r]._id,level:s.level,image:s.image}},a.push(l);return e.abrupt("return",a);case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),w=function(){var e=(0,a.Z)(u().mark((function e(t,n){var i,a,r,s,o;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=null,t){e.next=3;break}return e.abrupt("return",i);case 3:if(a=v.Prefix+"/"+n+"/players"){e.next=6;break}return e.abrupt("return",i);case 6:return r=GameCore.Utils.String.params({playerIds:t}),e.next=9,(0,h.U)(a+"?"+r,{},m);case 9:if(s=e.sent,!((o=(null==s?void 0:s.data)||[]).length<1)){e.next=13;break}return e.abrupt("return",i);case 13:return i=o[0],e.abrupt("return",i);case 15:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},641:function(e,t,n){"use strict";n.d(t,{_:function(){return i}});var i={BUTTON_CLICK:"button_click",SCREEN_OPEN:"screen_open",LOAD_START:"load_start",LOAD_COMPLETE:"load_complete",APP_READY:"app_ready",TUTORIAL_BEGIN:"tutorial_begin",TUTORIAL_STEP:"tutorial_step",TUTORIAL_COMPLETE:"tutorial_complete",MATCH_START:"match_start",MATCH_RESCUE:"match_rescue",MATCH_END:"match_end",LEVEL_START:"level_start",LEVEL_RESCUE:"level_rescue",LEVEL_CONTINUE:"level_continue",LEVEL_PROGRESS:"level_progress",LEVEL_END:"level_end",LEVEL_GIVE_UP:"level_give_up",SHARE:"share",MESSAGE:"message",INVITE:"invite",SHORTCUT_CREATE:"shortcut_create",SHORTCUT_CREATE_POPUP:"shortcut_create_popup",BOT_SUBSCRIBE:"bot_subscribe",BOT_SUBSCRIBE_POPUP:"bot_subscribe_popup",AD_LOAD:"ad_load",AD_LOAD_FAILED:"ad_load_failed",AD_SHOW:"ad_show",AD_SHOW_FAILED:"ad_show_failed",MISSING_AD_SHOW:"missing_ad_show",NEW_USER:"new_user",AD_IMPRESSION:"ad_impression",JOIN_GROUP:"join_group",THEME_CHANGED:"theme_changed",AD_INIT:"ad_init",TOURNAMENT_SHARE:"tournament_share",TOURNAMENT_CREATE:"tournament_create",TOURNAMENT_POST_SCORE:"tournament_post_score",TOURNAMENT_START:"tournament_start",SWITCH_SOLO_CONTEXT:"switch_solo_context",PAGE_FOLLOW:"page_follow",GROUP_JOIN:"group_join",SWITCH_GAME_POPUP:"switch_game_popup",SWITCH_GAME_POPUP_CANCEL:"switch_game_popup_cancel"}},676:function(e,t){"use strict";t.Z={sound:"sound",music:"music",vibrate:"vibrate",language:"language",language2:"language2",theme:"theme",tapToMove:"tapToMove",autoHints:"autoHints",autoMoveToFoundation:"autoMoveToFoundation",highlightLowCards:"highlightLowCards",backgroundIdx:"backgroundIdx",cardFaceIdx:"cardFaceIdx",cardBackIdx:"cardBackIdx",backgroundDesktopIdx:"backgroundDesktopIdx",cardFaceDesktopIdx:"cardFaceDesktopIdx",cardBackDesktopIdx:"cardBackDesktopIdx",modifiedOptions:"modifiedOptions"}},644:function(e,t,n){"use strict";var i=n(645),a=function(){function e(e,t,n,a){this.playerId=void 0,this.name=void 0,this.photo=void 0,this.locale=void 0,this.playerId=e,this.name=t,this.photo=n||i.Z.AVATAR.FILE,this.locale=a||"en_US"}return e.prototype.toObject=function(){return{playerId:this.playerId,name:this.name,photo:this.photo,locale:this.locale}},e}();t.Z=a},652:function(e,t){"use strict";t.Z={RESIZE:"resize",CHANGE_LAYOUT:"change-layout"}},659:function(e,t,n){"use strict";n.d(t,{I:function(){return a}});var i=n(650),a=function(e){return{type:i.DW,payload:{sceneKey:e}}}},640:function(e,t,n){"use strict";n.d(t,{qZ:function(){return o},Gm:function(){return c},F0:function(){return l}});var i=n(2),a=n.n(i),r=n(13),s=n.n(r),o=function(e){return new(a())((function(t){return setTimeout(t,e)}))},c=function(e){var t=new Date(e),n=new Date;return t.getDate()===n.getDate()&&t.getMonth()===n.getMonth()&&t.getFullYear()===n.getFullYear()},l=function(e,t){void 0===t&&(t=!0);var n=new Date(e).toISOString();return t?s()(n).call(n,11,-5):s()(n).call(n,14,-5)}},635:function(e,t,n){"use strict";n.d(t,{j6:function(){return a},sw:function(){return r},Tv:function(){return s},R0:function(){return c},tO:function(){return l}});n(636),n(123),n(31),n(19);var i=!1,a=function(){var e=setInterval((function(){window.Sentry&&(clearInterval(e),console.warn({isSentryEnabled:i}))}),100)},r=function(e,t){window.Sentry&&window.Sentry.addBreadcrumb({category:e,message:t})},s=function(e){window.Sentry&&window.Sentry.setUser(e)},o=function(e){console.error(e)},c=function(e,t){e&&console.error(e)},l=function(e){e&&o(e)}},646:function(e,t){"use strict";t.Z={GENERIC_NOTIFICATION:0,NEW_USER_NOTIFICATION:1,MONDAY_NOTIFICATION:2,TUESDAY_NOTIFICATION:3,WEDNESDAY_NOTIFICATION:4,THURSDAY_NOTIFICATION:5,FRIDAY_NOTIFICATION:6,SATURDAY_NOTIFICATION:7,SUNDAY_NOTIFICATION:8}},634:function(e,t,n){"use strict";n.d(t,{Z:function(){return r}});var i=JSON.parse('{"data":["Smith","Johnson","Williams","Brown","Jones","Miller","Davis","Garcia","Rodriguez","Wilson","Martinez","Anderson","Taylor","Thomas","Hernandez","Moore","Martin","Jackson","Thompson","White","Lopez","Lee","Gonzalez","Harris","Clark","Lewis","Robinson","Walker","Perez","Hall","Young","Allen","Sanchez","Wright","King","Scott","Green","Baker","Adams","Nelson","Hill","Ramirez","Campbell","Mitchell","Roberts","Carter","Phillips","Evans","Turner","Torres","Parker","Collins","Edwards","Stewart","Flores","Morris","Nguyen","Murphy","Rivera","Cook","Rogers","Morgan","Peterson","Cooper","Reed","Bailey","Bell","Gomez","Kelly","Howard","Ward","Cox","Diaz","Richardson","Wood","Watson","Brooks","Bennett","Gray","James","Reyes","Cruz","Hughes","Price","Myers","Long","Foster","Sanders","Ross","Morales","Powell","Sullivan","Russell","Ortiz","Jenkins","Gutierrez","Perry","Butler","Barnes","Fisher","Henderson","Coleman","Simmons","Patterson","Jordan","Reynolds","Hamilton","Graham","Kim","Gonzales","Alexander","Ramos","Wallace","Griffin","West","Cole","Hayes","Chavez","Gibson","Bryant","Ellis","Stevens","Murray","Ford","Marshall","Owens","Mcdonald","Harrison","Ruiz","Kennedy","Wells","Alvarez","Woods","Mendoza","Castillo","Olson","Webb","Washington","Tucker","Freeman","Burns","Henry","Vasquez","Snyder","Simpson","Crawford","Jimenez","Porter","Mason","Shaw","Gordon","Wagner","Hunter","Romero","Hicks","Dixon","Hunt","Palmer","Robertson","Black","Holmes","Stone","Meyer","Boyd","Mills","Warren","Fox","Rose","Rice","Moreno","Schmidt","Patel","Ferguson","Nichols","Herrera","Medina","Ryan","Fernandez","Weaver","Daniels","Stephens","Gardner","Payne","Kelley","Dunn","Pierce","Arnold","Tran","Spencer","Peters","Hawkins","Grant","Hansen","Castro","Hoffman","Hart","Elliott","Cunningham","Knight","Bradley","Carroll","Hudson","Duncan","Armstrong","Berry","Andrews","Johnston","Ray","Lane","Riley","Carpenter","Perkins","Aguilar","Silva","Richards","Willis","Matthews","Chapman","Lawrence","Garza","Vargas","Watkins","Wheeler","Larson","Carlson","Harper","George","Greene","Burke","Guzman","Morrison","Munoz","Jacobs","Obrien","Lawson","Franklin","Lynch","Bishop","Carr","Salazar","Austin","Mendez","Gilbert","Jensen","Williamson","Montgomery","Harvey","Oliver","Howell","Dean","Hanson","Weber","Garrett","Sims","Burton","Fuller","Soto","Mccoy","Welch","Chen","Schultz","Walters","Reid","Fields","Walsh","Little","Fowler","Bowman","Davidson","May","Day","Schneider","Newman","Brewer","Lucas","Holland","Wong","Banks","Santos","Curtis","Pearson","Delgado","Valdez","Pena","Rios","Douglas","Sandoval","Barrett","Hopkins","Keller","Guerrero","Stanley","Bates","Alvarado","Beck","Ortega","Wade","Estrada","Contreras","Barnett","Caldwell","Santiago","Lambert","Powers","Chambers","Nunez","Craig","Leonard","Lowe","Rhodes","Byrd","Gregory","Shelton","Frazier","Becker","Maldonado","Fleming","Vega","Sutton","Cohen","Jennings","Parks","Mcdaniel","Watts","Barker","Norris","Vaughn","Vazquez","Holt","Schwartz","Steele","Benson","Neal","Dominguez","Horton","Terry","Wolfe","Hale","Lyons","Graves","Haynes","Miles","Park","Warner","Padilla","Bush","Thornton","Mccarthy","Mann","Zimmerman","Erickson","Fletcher","Mckinney","Page","Dawson","Joseph","Marquez","Reeves","Klein","Espinoza","Baldwin","Moran","Love","Robbins","Higgins","Ball","Cortez","Le","Griffith","Bowen","Sharp","Cummings","Ramsey","Hardy","Swanson","Barber","Acosta","Luna","Chandler","Blair","Daniel","Cross","Simon","Dennis","Oconnor","Quinn","Gross","Navarro","Moss","Fitzgerald","Doyle","Mclaughlin","Rojas","Rodgers","Stevenson","Singh","Yang","Figueroa","Harmon","Newton","Paul","Manning","Garner","Mcgee","Reese","Francis","Burgess","Adkins","Goodman","Curry","Brady","Christensen","Potter","Walton","Goodwin","Mullins","Molina","Webster","Fischer","Campos","Avila","Sherman","Todd","Chang","Blake","Malone","Wolf","Hodges","Juarez","Gill","Farmer","Hines","Gallagher","Duran","Hubbard","Cannon","Miranda","Wang","Saunders","Tate","Mack","Hammond","Carrillo","Townsend","Wise","Ingram","Barton","Mejia","Ayala","Schroeder","Hampton","Rowe","Parsons","Frank","Waters","Strickland","Osborne","Maxwell","Chan","Deleon","Norman","Harrington","Casey","Patton","Logan","Bowers","Mueller","Glover","Floyd","Hartman","Buchanan","Cobb","French","Kramer","Mccormick","Clarke","Tyler","Gibbs","Moody","Conner","Sparks","Mcguire","Leon","Bauer","Norton","Pope","Flynn","Hogan","Robles","Salinas","Yates","Lindsey","Lloyd","Marsh","Mcbride","Owen","Solis","Pham","Lang","Pratt","Lara","Brock","Ballard","Trujillo","Shaffer","Drake","Roman","Aguirre","Morton","Stokes","Lamb","Pacheco","Patrick","Cochran","Shepherd","Cain","Burnett","Hess","Li","Cervantes","Olsen","Briggs","Ochoa","Cabrera","Velasquez","Montoya","Roth","Meyers","Cardenas","Fuentes","Weiss","Hoover","Wilkins","Nicholson","Underwood","Short","Carson","Morrow","Colon","Holloway","Summers","Bryan","Petersen","Mckenzie","Serrano","Wilcox","Carey","Clayton","Poole","Calderon","Gallegos","Greer","Rivas","Guerra","Decker","Collier","Wall","Whitaker","Bass","Flowers","Davenport","Conley","Houston","Huff","Copeland","Hood","Monroe","Massey","Roberson","Combs","Franco","Larsen","Pittman","Randall","Skinner","Wilkinson","Kirby","Cameron","Bridges","Anthony","Richard","Kirk","Bruce","Singleton","Mathis","Bradford","Boone","Abbott","Charles","Allison","Sweeney","Atkinson","Horn","Jefferson","Rosales","York","Christian","Phelps","Farrell","Castaneda","Nash","Dickerson","Bond","Wyatt","Foley","Chase","Gates","Vincent","Mathews","Hodge","Garrison","Trevino","Villarreal","Heath","Dalton","Valencia","Callahan","Hensley","Atkins","Huffman","Roy","Boyer","Shields","Lin","Hancock","Grimes","Glenn","Cline","Delacruz","Camacho","Dillon","Parrish","Oneill","Melton","Booth","Kane","Berg","Harrell","Pitts","Savage","Wiggins","Brennan","Salas","Marks","Russo","Sawyer","Baxter","Golden","Hutchinson","Liu","Walter","Mcdowell","Wiley","Rich","Humphrey","Johns","Koch","Suarez","Hobbs","Beard","Gilmore","Ibarra","Keith","Macias","Khan","Andrade","Ware","Stephenson","Henson","Wilkerson","Dyer","Mcclure","Blackwell","Mercado","Tanner","Eaton","Clay","Barron","Beasley","Oneal","Preston","Small","Wu","Zamora","Macdonald","Vance","Snow","Mcclain","Stafford","Orozco","Barry","English","Shannon","Kline","Jacobson","Woodard","Huang","Kemp","Mosley","Prince","Merritt","Hurst","Villanueva","Roach","Nolan","Lam","Yoder","Mccullough","Lester","Santana","Valenzuela","Winters","Barrera","Leach","Orr","Berger","Mckee","Strong","Conway","Stein","Whitehead","Bullock","Escobar","Knox","Meadows","Solomon","Velez","Odonnell","Kerr","Stout","Blankenship","Browning","Kent","Lozano","Bartlett","Pruitt","Buck","Barr","Gaines","Durham","Gentry","Mcintyre","Sloan","Melendez","Rocha","Herman","Sexton","Moon","Hendricks","Rangel","Stark","Lowery","Hardin","Hull","Sellers","Ellison","Calhoun","Gillespie","Mora","Knapp","Mccall","Morse","Dorsey","Weeks","Nielsen","Livingston","Leblanc","Mclean","Bradshaw","Glass","Middleton","Buckley","Schaefer","Frost","Howe","House","Mcintosh","Ho","Pennington","Reilly","Hebert","Mcfarland","Hickman","Noble","Spears","Conrad","Arias","Galvan","Velazquez","Huynh","Frederick","Randolph","Cantu","Fitzpatrick","Mahoney","Peck","Villa","Michael","Donovan","Mcconnell","Walls","Boyle","Mayer","Zuniga","Giles","Pineda","Pace","Hurley","Mays","Mcmillan","Crosby","Ayers","Case","Bentley","Shepard","Everett","Pugh","David","Mcmahon","Dunlap","Bender","Hahn","Harding","Acevedo","Raymond","Blackburn","Duffy","Landry","Dougherty","Bautista","Shah","Potts","Arroyo","Valentine","Meza","Gould","Vaughan","Fry","Rush","Avery","Herring","Dodson","Clements","Sampson","Tapia","Bean","Lynn","Crane","Farley","Cisneros","Benton","Ashley","Mckay","Finley","Best","Blevins","Friedman","Moses","Sosa","Blanchard","Huber","Frye","Krueger","Bernard","Rosario","Rubio","Mullen","Benjamin","Haley","Chung","Moyer","Choi","Horne","Yu","Woodward","Ali","Nixon","Hayden","Rivers","Estes","Mccarty","Richmond","Stuart","Maynard","Brandt","Oconnell","Hanna","Sanford","Sheppard","Church","Burch","Levy","Rasmussen","Coffey","Ponce","Faulkner","Donaldson","Schmitt","Novak","Costa","Montes","Booker","Cordova","Waller","Arellano","Maddox","Mata","Bonilla","Stanton","Compton","Kaufman","Dudley","Mcpherson","Beltran","Dickson","Mccann","Villegas","Proctor","Hester","Cantrell","Daugherty","Cherry","Bray","Davila","Rowland","Levine","Madden","Spence","Good","Irwin","Werner","Krause","Petty","Whitney","Baird","Hooper","Pollard","Zavala","Jarvis","Holden","Haas","Hendrix","Mcgrath","Bird","Lucero","Terrell","Riggs","Joyce","Mercer","Rollins","Galloway","Duke","Odom","Andersen","Downs","Hatfield","Benitez","Archer","Huerta","Travis","Mcneil","Hinton","Zhang","Hays","Mayo","Fritz","Branch","Mooney","Ewing","Ritter","Esparza","Frey","Braun","Gay","Riddle","Haney","Kaiser","Holder","Chaney","Mcknight","Gamble","Vang","Cooley","Carney","Cowan","Forbes","Ferrell","Davies","Barajas","Shea","Osborn","Bright","Cuevas","Bolton","Murillo","Lutz","Duarte","Kidd","Key","Cooke"]}'),a=function(e){return Math.floor(Math.random()*e)},r=function(){if(!i)return"Unknown";if(!i.data)return"Unknown";var e=i.data;if(!Array.isArray(e))return"Unknown";var t=e.length;return e[a(t)]+" "+e[a(t)]}},625:function(e,t){"use strict";t.Z=function(e,t){var n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789*#%&!",i="",a=e;void 0!=t&&(a-=t.length,i+=t);for(var r=0;r<a;r++){var s=Math.floor(67*Math.random());i+=n.charAt(s)}return i}},626:function(e,t){"use strict";t.Z=function(e,t){if(0==t.length)return e;for(var n=e,i=0;i<t.length;i++)n=n.replace(/{}/,""+t[i]);return n}}},t={};function n(i){var a=t[i];if(void 0!==a)return a.exports;var r=t[i]={id:i,loaded:!1,exports:{}};return e[i].call(r.exports,r,r.exports,n),r.loaded=!0,r.exports}n.m=e,n.amdO={},function(){var e=[];n.O=function(t,i,a,r){if(!i){var s=1/0;for(u=0;u<e.length;u++){i=e[u][0],a=e[u][1],r=e[u][2];for(var o=!0,c=0;c<i.length;c++)(!1&r||s>=r)&&Object.keys(n.O).every((function(e){return n.O[e](i[c])}))?i.splice(c--,1):(o=!1,r<s&&(s=r));if(o){e.splice(u--,1);var l=a();void 0!==l&&(t=l)}}return t}r=r||0;for(var u=e.length;u>0&&e[u-1][2]>r;u--)e[u]=e[u-1];e[u]=[i,a,r]}}(),n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,{a:t}),t},n.d=function(e,t){for(var i in t)n.o(t,i)&&!n.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},n.f={},n.e=function(e){return Promise.all(Object.keys(n.f).reduce((function(t,i){return n.f[i](e,t),t}),[]))},n.u=function(e){return e+"."+{7:"8739ca2747453d20e853",48:"e883b6f6c097c97a6767",109:"27c5fa44e493d505afd3",123:"d3d641453bb56c164526",131:"cdb1f715d212bbdd273e",302:"ce42cb1d8d225cc0fecd",401:"59ff5ba9ba9a70043919",498:"0d87220ac07c2e20f4cd",530:"94604c2841abf9b65b28",557:"a47b13456c381ea86433",613:"a1087167d46b19246551",616:"1124ba35afc78961321e",638:"f10b9c7b69af2249e681",739:"bf61d246f06fd276577b",803:"9851d1f68a9e9ee8ccc2",942:"184c26d621325396ee18",961:"ad32bc98714d91a3ae13"}[e]+".bundle.js"},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.hmd=function(e){return(e=Object.create(e)).children||(e.children=[]),Object.defineProperty(e,"exports",{enumerable:!0,set:function(){throw new Error("ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: "+e.id)}}),e},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},function(){var e={},t="game-core:";n.l=function(i,a,r,s){if(e[i])e[i].push(a);else{var o,c;if(void 0!==r)for(var l=document.getElementsByTagName("script"),u=0;u<l.length;u++){var h=l[u];if(h.getAttribute("src")==i||h.getAttribute("data-webpack")==t+r){o=h;break}}o||(c=!0,(o=document.createElement("script")).charset="utf-8",o.timeout=120,n.nc&&o.setAttribute("nonce",n.nc),o.setAttribute("data-webpack",t+r),o.src=i),e[i]=[a];var d=function(t,n){o.onerror=o.onload=null,clearTimeout(f);var a=e[i];if(delete e[i],o.parentNode&&o.parentNode.removeChild(o),a&&a.forEach((function(e){return e(n)})),t)return t(n)},f=setTimeout(d.bind(null,void 0,{type:"timeout",target:o}),12e4);o.onerror=d.bind(null,o.onerror),o.onload=d.bind(null,o.onload),c&&document.head.appendChild(o)}}}(),n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},function(){var e;n.g.importScripts&&(e=n.g.location+"");var t=n.g.document;if(!e&&t&&(t.currentScript&&(e=t.currentScript.src),!e)){var i=t.getElementsByTagName("script");i.length&&(e=i[i.length-1].src)}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),n.p=e}(),function(){var e={757:0};n.f.j=function(t,i){var a=n.o(e,t)?e[t]:void 0;if(0!==a)if(a)i.push(a[2]);else{var r=new Promise((function(n,i){a=e[t]=[n,i]}));i.push(a[2]=r);var s=n.p+n.u(t),o=new Error;n.l(s,(function(i){if(n.o(e,t)&&(0!==(a=e[t])&&(e[t]=void 0),a)){var r=i&&("load"===i.type?"missing":i.type),s=i&&i.target&&i.target.src;o.message="Loading chunk "+t+" failed.\n("+r+": "+s+")",o.name="ChunkLoadError",o.type=r,o.request=s,a[1](o)}}),"chunk-"+t,t)}},n.O.j=function(t){return 0===e[t]};var t=function(t,i){var a,r,s=i[0],o=i[1],c=i[2],l=0;if(s.some((function(t){return 0!==e[t]}))){for(a in o)n.o(o,a)&&(n.m[a]=o[a]);if(c)var u=c(n)}for(t&&t(i);l<s.length;l++)r=s[l],n.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return n.O(u)},i=self.webpackChunkgame_core=self.webpackChunkgame_core||[];i.forEach(t.bind(null,0)),i.push=t.bind(null,i.push.bind(i))}(),n.O(void 0,[216,630,542],(function(){return n(621)})),n.O(void 0,[216,630,542],(function(){return n(622)})),n.O(void 0,[216,630,542],(function(){return n(432)})),n.O(void 0,[216,630,542],(function(){return n(433)})),n.O(void 0,[216,630,542],(function(){return n(629)})),n.O(void 0,[216,630,542],(function(){return n(533)}));var i=n.O(void 0,[216,630,542],(function(){return n(556)}));i=n.O(i)})();