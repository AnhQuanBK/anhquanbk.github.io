(function(){var e={470:function(){HTMLCanvasElement.prototype.toBlob||Object.defineProperty(HTMLCanvasElement.prototype,"toBlob",{value:function(e,t,n){for(var i=atob(this.toDataURL(t,n).split(",")[1]),a=i.length,s=a>>2,r=new Uint8Array(a),o=new Uint32Array(r.buffer,0,s),c=0,l=0;c<s;c++)o[c]=i.charCodeAt(l++)|i.charCodeAt(l++)<<8|i.charCodeAt(l++)<<16|i.charCodeAt(l++)<<24;for(var h=3&a;h--;)r[l]=i.charCodeAt(l++);e(new Blob([r],{type:t||"image/png"}))}})},620:function(e,t,n){"use strict";n.d(t,{J:function(){return H},Z:function(){return Y}});var i=n(51),a=n(134),s=n.n(a),r=n(64),o=n.n(r),c=n(65),l=n.n(c),h=n(47),u=n.n(h),d=n(104),p=n.n(d),g=n(87),f=n.n(g),m=n(129),v=n.n(m),E=n(37),S=n.n(E),A=n(82),y=n(641),T=n(105),I=n.n(T),C=function(e){return function(t){t.preventDefault();var n=document.getElementById("popup-add-shortcut");null==n||n.remove(),e()}},b=function(e){var t=document.createElement("div");return t.innerHTML=I()(e).call(e),t.firstChild},O=function(){var e=(0,i.Z)(S().mark((function e(t,n){var i,a,s;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=b('<div style="height: 50vh;width: 53vh;max-width: 95vw;position:absolute;background-color: rgba(31, 120, 136, 0.48);border-radius: 2vh;margin: auto;right: 0;left: 0;top: 0;bottom: 0;display: flex;flex-direction:column;justify-content:space-evenly;">\n            <p style="color:white;font-size:40px;text-align:center">Add shortcut for this game</p>\n            <p style="color:white;font-size:20px;text-align:center">This game wants to add a shortcut.</p>\n        </div>'),a=b('<button style="border: none;background-color: #1877f2;color: #fff;width: 90%;height: 50px;border-radius: 15px;margin-left: auto;margin-right: auto;font-size: 20px;cursor: pointer;">No</button>'),s=b('<button style="border: none;background-color: #1877f2;color: #fff;width: 90%;height: 50px;border-radius: 15px;margin-left: auto;margin-right: auto;font-size: 20px;cursor: pointer;">Yes</button>'),i&&a&&s||n({code:"CREATE_POPUP_ERROR",message:"Show popup failed"}),i.id="popup-add-shortcut",i.appendChild(a),i.appendChild(s),document.body.appendChild(i),a.addEventListener("click",C(n)),s.addEventListener("click",C(t));case 10:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),P=function(){function e(){this.isFirstCall=!0}var t=e.prototype;return t.canCreateShortcutAsync=function(){var e=(0,i.Z)(S().mark((function e(){return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isFirstCall){e.next=3;break}return this.isFirstCall=!1,e.abrupt("return",!0);case 3:return e.abrupt("return",!1);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),t.createShortcutAsync=function(){var e=(0,i.Z)(S().mark((function e(){return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new(o())((function(e,t){O(e,t)})));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),e}(),R=P,w=function(e){return function(t){t.preventDefault();var n=document.getElementById("popup-subscribe-bots");null==n||n.remove(),e()}},x=function(e){var t=document.createElement("div");return t.innerHTML=I()(e).call(e),t.firstChild},k=function(){var e=(0,i.Z)(S().mark((function e(t,n){var i,a,s;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=x('<div style="height: 50vh;width: 53vh;max-width: 95vw;position:absolute;background-color: rgba(31, 120, 136, 0.48);border-radius: 2vh;margin: auto;right: 0;left: 0;top: 0;bottom: 0;display: flex;flex-direction:column;justify-content:space-evenly;">\n            <p style="color:white;font-size:40px;text-align:center">Turn on messages from this game</p>\n            <p style="color:white;font-size:20px;text-align:center">This game wants to send messages, announcements and more.</p>\n        </div>'),a=x('<button style="border: none;background-color: #1877f2;color: #fff;width: 90%;height: 50px;border-radius: 15px;margin-left: auto;margin-right: auto;font-size: 20px;cursor: pointer;">Not Now</button>'),s=x('<button style="border: none;background-color: #1877f2;color: #fff;width: 90%;height: 50px;border-radius: 15px;margin-left: auto;margin-right: auto;font-size: 20px;cursor: pointer;">Turn On</button>'),i&&a&&s||n({code:"CREATE_POPUP_ERROR",message:"Show popup failed"}),i.id="popup-subscribe-bots",i.appendChild(a),i.appendChild(s),document.body.appendChild(i),a.addEventListener("click",w(n)),s.addEventListener("click",w(t));case 10:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),_=function(){function e(){this.isFirstCall=!0}var t=e.prototype;return t.canSubscribeBotAsync=function(){var e=(0,i.Z)(S().mark((function e(){return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isFirstCall){e.next=3;break}return this.isFirstCall=!1,e.abrupt("return",!0);case 3:return e.abrupt("return",!1);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),t.subscribeBotAsync=function(){var e=(0,i.Z)(S().mark((function e(){return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new(o())((function(e,t){k(e,t)})));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),e}(),L=_,D=n(446),M=n(127);function N(e,t){var n="undefined"!==typeof f()&&v()(e)||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){var n;if(!e)return;if("string"===typeof e)return B(e,t);var i=u()(n=Object.prototype.toString.call(e)).call(n,8,-1);"Object"===i&&e.constructor&&(i=e.constructor.name);if("Map"===i||"Set"===i)return p()(e);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return B(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var i=0;return function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function B(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var G=GameCore.Configs,F=G.AddShortcut,U=G.SubscribeBot,H=function(){function e(){}var t=e.prototype;return t.createAsync=function(){var e=(0,i.Z)(S().mark((function e(t){return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,GameSDK.tournament.createAsync(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t.shareAsync=function(){var e=(0,i.Z)(S().mark((function e(t){return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,GameSDK.tournament.shareAsync(t);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t.joinAsync=function(){var e=(0,i.Z)(S().mark((function e(t){return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,GameSDK.tournament.joinAsync(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t.postScoreAsync=function(){var e=(0,i.Z)(S().mark((function e(t){return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,GameSDK.tournament.postScoreAsync(t);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t.getTournamentsAsync=function(){var e=(0,i.Z)(S().mark((function e(){return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,GameSDK.tournament.getTournamentsAsync();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),e}(),Z=function(){function e(e){var t=this;this.facebook=void 0,this.supportedAPIs=[],this.mockSubscribeBot=void 0,this.mockAddShortcut=void 0,this.isCalledSubscribeBot=!1,this.isCalledCreateShortcut=!1,this.isCanPlayerMatch=null,this.isCanSubscribeBot=null,this.isCanCreateShortcut=null,this.attemptToAddShortcut=(0,i.Z)(S().mark((function e(){var n,i,a,s,r,o;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.isCalledCreateShortcut){e.next=2;break}return e.abrupt("return",!1);case 2:if(e.prev=2,null===t.isCanCreateShortcut&&(F.UseMock?t.isCanCreateShortcut=!0:t.isCanCreateShortcut=t.isSupportedAPI("canCreateShortcutAsync")),t.isCanCreateShortcut){e.next=6;break}return e.abrupt("return",!1);case 6:return e.next=8,GameSDK.player.getDataAsync(["lastCallCreateShortcut"]);case 8:if(e.t0=e.sent,e.t0){e.next=11;break}e.t0={};case 11:if(n=e.t0,!(i=n.lastCallCreateShortcut||0)||!(0,M.Gm)(+i)){e.next=15;break}return e.abrupt("return",!1);case 15:if(!F.UseMock){e.next=21;break}return e.next=18,t.mockAddShortcut.canCreateShortcutAsync();case 18:e.t1=e.sent,e.next=24;break;case 21:return e.next=23,GameSDK.canCreateShortcutAsync();case 23:e.t1=e.sent;case 24:if(a=e.t1,s=Date.now(),GameSDK.player.setDataAsync({lastCallCreateShortcut:s}),!a){e.next=49;break}return r=A._.SHORTCUT_CREATE,o=A._.SHORTCUT_CREATE_POPUP,t.isCalledCreateShortcut=!0,window.game.analytics.event(o),e.prev=31,e.next=34,GameCore.Utils.Valid.isValueChangeAsync(window.__fbGameReady,!0);case 34:if(!F.UseMock){e.next=39;break}return e.next=37,t.mockAddShortcut.createShortcutAsync();case 37:e.next=41;break;case 39:return e.next=41,GameSDK.createShortcutAsync();case 41:return window.game.analytics.event(r,{success:!0}),e.abrupt("return",!0);case 45:return e.prev=45,e.t2=e.catch(31),window.game.analytics.event(r,{success:!1}),e.abrupt("return",!1);case 49:return e.abrupt("return",!1);case 52:return e.prev=52,e.t3=e.catch(2),e.abrupt("return",!1);case 55:case"end":return e.stop()}}),e,null,[[2,52],[31,45]])}))),this.attemptToSubscribeBot=(0,i.Z)(S().mark((function e(){var n,i,a,s,r;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.isCalledSubscribeBot){e.next=2;break}return e.abrupt("return",!1);case 2:if(e.prev=2,null===t.isCanSubscribeBot&&(U.UseMock?t.isCanSubscribeBot=!0:t.isCanSubscribeBot=t.isSupportedAPI("player.canSubscribeBotAsync")),t.isCanSubscribeBot){e.next=6;break}return e.abrupt("return",!1);case 6:if(!U.UseMock){e.next=12;break}return e.next=9,t.mockSubscribeBot.canSubscribeBotAsync();case 9:e.t0=e.sent,e.next=15;break;case 12:return e.next=14,GameSDK.player.canSubscribeBotAsync();case 14:e.t0=e.sent;case 15:if(!e.t0){e.next=49;break}return e.next=19,GameSDK.player.getDataAsync(["lastCallSubscribeBot"]);case 19:if(e.t1=e.sent,e.t1){e.next=22;break}e.t1={};case 22:if(n=e.t1,!(i=n.lastCallSubscribeBot||0)||!(0,M.Gm)(+i)){e.next=26;break}return e.abrupt("return",!1);case 26:return a=Date.now(),GameSDK.player.setDataAsync({lastCallSubscribeBot:a}),s=A._.BOT_SUBSCRIBE,r=A._.BOT_SUBSCRIBE_POPUP,t.isCalledSubscribeBot=!0,window.game.analytics.event(r),e.prev=31,e.next=34,GameCore.Utils.Valid.isValueChangeAsync(window.__fbGameReady,!0);case 34:if(!U.UseMock){e.next=39;break}return e.next=37,t.mockSubscribeBot.subscribeBotAsync();case 37:e.next=41;break;case 39:return e.next=41,GameSDK.player.subscribeBotAsync();case 41:return window.game.analytics.event(s,{success:!0}),e.abrupt("return",!0);case 45:return e.prev=45,e.t2=e.catch(31),window.game.analytics.event(s,{success:!1}),e.abrupt("return",!1);case 49:return e.abrupt("return",!1);case 52:return e.prev=52,e.t3=e.catch(2),e.abrupt("return",!1);case 55:case"end":return e.stop()}}),e,null,[[2,52],[31,45]])}))),this.matchPlayerAsync=function(){var e=(0,i.Z)(S().mark((function e(n,i,a){return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,null===t.isCanPlayerMatch&&(t.isCanPlayerMatch=t.isSupportedAPI("checkCanPlayerMatchAsync")),t.isCanPlayerMatch){e.next=4;break}return e.abrupt("return",!1);case 4:return e.next=6,GameSDK.checkCanPlayerMatchAsync();case 6:if(e.sent){e.next=9;break}return e.abrupt("return",!1);case 9:return e.next=11,GameSDK.matchPlayerAsync(n,i,a);case 11:return e.abrupt("return",!0);case 14:return e.prev=14,e.t0=e.catch(0),e.abrupt("return",!1);case 17:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(t,n,i){return e.apply(this,arguments)}}(),this.getTournamentAsync=(0,i.Z)(S().mark((function e(){var n,i,a;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.facebook.tournament.getTournamentsAsync();case 2:if(n=e.sent,i=GameSDK.context.getID(),!(a=s()(n).call(n,(function(e){return e.getContextID()===i})))){e.next=7;break}return e.abrupt("return",o().resolve(a));case 7:return e.abrupt("return",o().reject(new y.Z(null)));case 8:case"end":return e.stop()}}),e)}))),this.requestTournamentAsync=function(){var e=(0,i.Z)(S().mark((function e(n){var i;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.facebook.getTournamentAsync();case 3:return e.next=5,t.facebook.tournament.shareAsync({score:n});case 5:e.next=12;break;case 7:return e.prev=7,e.t0=e.catch(0),i=GameSDK.player.getName(),e.next=12,t.facebook.tournament.createAsync({initialScore:n,config:{tournamentTitle:i+"'s Tournament"}});case 12:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),this.isSupportedAPI=function(e){var n;return 0===t.supportedAPIs.length&&(t.supportedAPIs=GameSDK.getSupportedAPIs()),l()(n=t.supportedAPIs).call(n,e)},this.facebook=e,this.mockSubscribeBot=new L,this.mockAddShortcut=new R}var t=e.prototype;return t.switchAsync=function(){var e=(0,i.Z)(S().mark((function e(t){return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,GameCore.Utils.Valid.isValueChangeAsync(window.__fbGameReady,!0);case 2:return e.next=4,GameSDK.context.switchAsync(t);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t.chooseAsync=function(){var e=(0,i.Z)(S().mark((function e(){return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,GameCore.Utils.Valid.isValueChangeAsync(window.__fbGameReady,!0);case 3:return e.next=5,GameSDK.context.chooseAsync({filters:["INCLUDE_EXISTING_CHALLENGES"],minSize:2,maxSize:2});case 5:case 15:return e.abrupt("return",GameSDK.context.getID());case 8:if(e.prev=8,e.t0=e.catch(0),!(e.t0 instanceof Object&&GameCore.Utils.Object.hasOwn(e.t0,"code"))){e.next=16;break}e.t1=e.t0.code,e.next="USER_INPUT"===e.t1?14:"SAME_CONTEXT"===e.t1?15:16;break;case 14:return e.abrupt("return",!1);case 16:return e.abrupt("return",null);case 17:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}(),t.createAsync=function(){var e=(0,i.Z)(S().mark((function e(t){return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,GameCore.Utils.Valid.isValueChangeAsync(window.__fbGameReady,!0);case 3:return e.next=5,GameSDK.context.createAsync(""+t);case 5:case 15:return e.abrupt("return",GameSDK.context.getID());case 8:if(e.prev=8,e.t0=e.catch(0),!(e.t0 instanceof Object&&GameCore.Utils.Object.hasOwn(e.t0,"code"))){e.next=16;break}e.t1=e.t0.code,e.next="USER_INPUT"===e.t1?14:"SAME_CONTEXT"===e.t1?15:16;break;case 14:return e.abrupt("return",!1);case 16:return e.abrupt("return",null);case 17:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),t.getPlayerToken=function(){var e=(0,i.Z)(S().mark((function e(){var t;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,GameSDK.player.getSignedPlayerInfoAsync();case 2:return t=e.sent,e.abrupt("return",t.getSignature());case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),t.getContextPlayers=function(){var e=(0,i.Z)(S().mark((function e(t){var n,i,a,s,r,o,c,l;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,GameSDK.context.getPlayersAsync();case 3:n=e.sent,i=[],a=N(n);case 6:if((s=a()).done){e.next=18;break}if(r=s.value,(o=r.getID())!==t){e.next=11;break}return e.abrupt("continue",16);case 11:if(c=r.getName()){e.next=14;break}return e.abrupt("continue",16);case 14:l=r.getPhoto(),i.push(new D.Z(o,c,l).toObject());case 16:e.next=6;break;case 18:return e.abrupt("return",GameCore.Utils.Array.unique(i));case 21:return e.prev=21,e.t0=e.catch(0),e.abrupt("return",[]);case 25:case"end":return e.stop()}}),e,null,[[0,21]])})));return function(t){return e.apply(this,arguments)}}(),t.shareAsync=function(){var e=(0,i.Z)(S().mark((function e(t){return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,GameSDK.shareAsync(t);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t.sendMessage=function(){var e=(0,i.Z)(S().mark((function e(t){var n,i,a,s,r,o;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.data,i=t.image,a=t.template,s=t.cta,r=t.text,o={data:n,image:i,action:"CUSTOM",template:a,cta:s,text:r,strategy:"IMMEDIATE",notification:"PUSH"},e.next=4,GameSDK.updateAsync(o);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t.inviteAsync=function(){var e=(0,i.Z)(S().mark((function e(t){return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,GameSDK.inviteAsync(t);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t.postSessionScoreAsync=function(){var e=(0,i.Z)(S().mark((function e(t){return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,GameSDK.postSessionScoreAsync(t);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t.getRewardedVideoAsync=function(){var e=(0,i.Z)(S().mark((function e(t){return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,GameSDK.getRewardedVideoAsync(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t.getInterstitialAdAsync=function(){var e=(0,i.Z)(S().mark((function e(t){return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,GameSDK.getInterstitialAdAsync(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t.getContextID=function(){return GameSDK.context.getID()},t.setLoadingProgress=function(e){GameSDK.setLoadingProgress(e)},t.getLocale=function(){return GameSDK.getLocale()||"en"},t.injectTournament=function(){var e=(0,i.Z)(S().mark((function e(){var t,i;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!GameCore.Configs.Tournament.UseMock){e.next=11;break}return e.next=4,n.e(302).then(n.bind(n,637));case 4:t=e.sent.default,i=new t,this.facebook.tournament=i,GameSDK.getTournamentAsync=this.getTournamentAsync,GameSDK.tournament=i,e.next=12;break;case 11:this.facebook.tournament=new H;case 12:this.facebook.getTournamentAsync=function(){return FBInstant.getTournamentAsync()},this.facebook.requestTournamentAsync=this.requestTournamentAsync;case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),e}(),Y=Z},438:function(e,t,n){"use strict";n.d(t,{Z:function(){return Je}});var i=n(104),a=n.n(i),s=n(47),r=n.n(s),o=function(e,t){return void 0===t&&(t=1),a()({length:Math.ceil(e.length/t)},(function(n,i){return r()(e).call(e,i*t,i*t+t)}))},c=n(85),l=n.n(c),h=n(65),u=n.n(h),d=function(e,t){return l()(e).call(e,(function(e){return!u()(t).call(t,e)}))},p=function(e){for(var t=e.length-1;t>0;t--){var n=Math.floor(Math.random()*(t+1)),i=[e[n],e[t]];e[t]=i[0],e[n]=i[1]}},g=n(86),f=n.n(g),m=function(e,t,n){return f()(n).call(n,e)===t&&null!==e&&void 0!==e},v=function(e){return l()(e).call(e,m)},E={chunk:o,difference:d,shuffle:p,unique:v},S=n(88),A=n.n(S),y=n(266),T=n.n(y),I=T()((function(e,t){if("string"===typeof e){var n=t[e.toLowerCase()];if("string"===typeof n)return n}return"?"})),C=T()((function(e){for(var t=null,n=[],i=/:([A-Z0-9?]+)/gm;null!==(t=i.exec(e));)n.push(t[1]);return n})),b=T()((function(e){for(var t=null,n=[],i=/([0-9]+[A-Z?]{1}|[A-Z?]{1})/gm;null!==(t=i.exec(e));){var a=t[0];if(a.length>=2){var s,o=a.length,c=r()(a).call(a,0,o-1),l=a[o-1],h=A()(s=new Array(+c)).call(s,l);n.push.apply(n,h)}else n.push(a)}return n})),O=function(e,t){var n=e,i=GameCore.Utils.Object.invert(t),a={},s=0,r=0;return C(n).forEach((function(e){s=0,r++,a[r]||(a[r]={}),b(e).forEach((function(e){s++,a[r][s]=I(e,i)}))})),a},P=T()((function(e,t){var n=t[e];return"string"===typeof n?""+n.toUpperCase():"?"})),R=function e(t,n,i){void 0===i&&(i=!1);var a="";if(!GameCore.Utils.Valid.isObject(t))return a;var s="",o=1;for(var c in t)if(GameCore.Utils.Object.hasOwn(t,c)){var l=t[c];if(GameCore.Utils.Valid.isObject(l))a+=":"+e(l,n,!0);else if(GameCore.Utils.Valid.isString(l)){var h=P(l,n);h===s?(o++,a=r()(a).call(a,0,-2)):o=1,a+=""+o+h,s=h}}return a=a.replace(/1([A-Z])/g,"$1")},w=function(e){try{return atob(e)}catch(t){return""}},x={decodeMap:O,encodeMap:R,hashToString:w,stringToHash:function(e){try{return btoa(e)}catch(t){return""}}},k=function(e){try{return JSON.parse(e)}catch(t){return null}},_=n(89),L=n.n(_),D=function(e){try{return L()(e,null,0)}catch(t){return""}},M=function(e){return k(D(e))},N={clone:M,decode:k,encode:D},B=function(e){var t="object"===typeof e||"function"===typeof e,n=Array.isArray(e);return null!==e&&t&&!n},G=function(e){return void 0===e||null===e},F=function e(t){if(!B(t))return t;for(var n in t){G(t[n])&&delete t[n];var i=t[n];B(i)&&(t[n]=e(i))}return t},U=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},H=n(84),Z=n.n(H),Y=function(e){var t={};return Z()(e).forEach((function(n){if(U(e,n)){var i=e[n];"string"===typeof i&&(t[i]=n)}})),t},V=function(e,t){if(!Array.isArray(e))return{};var n={};return e.forEach((function(e){if(U(e,t)){var i=e[t];"string"===typeof i&&(n[i]=e)}})),n},W={clear:F,hasOwn:U,invert:Y,keyBy:V},z=function(e){return e?e[0].toUpperCase()+r()(e).call(e,1):e},K=function(e){var t=0;if(0==e.length)return t;for(var n=0;n<e.length;n++){t=(t<<5)-t+e.charCodeAt(n),t&=t}return t},j=n(118),X=n.n(j),J=function(e){var t;return X()(t=Z()(e)).call(t,(function(t,n){var i=e[n];return void 0!==i&&t.push(n+"="+i),t}),[]).join("&")},q=function(e){void 0===e&&(e="0x");for(var t=e,n=0;n<6;n++)t+="0123456789ABCDEF"[Math.floor(16*Math.random())];return t},Q=function(e,t){var n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789*#%&!",i="",a=e;void 0!=t&&(a-=t.length,i+=t);for(var s=0;s<a;s++){var r=Math.floor(67*Math.random());i+=n.charAt(r)}return i},$=function(e){return e.normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/[\u0111\u0110]/g,(function(e){return"\u0111"===e?"d":"D"}))},ee=n(63),te=n.n(ee),ne=n(269),ie=n.n(ne),ae=function(e,t){var n,i=e.split(" "),a=(i.length<=1?te()(n=[]).call(n,i):[i[0],i.pop()]).join(" "),s=ie()(a).call(a," ")||0,r=s>=0?s:t;return(a.length>t?a.substring(0,r):a).substring(0,t)},se=n(274),re=n.n(se),oe={capitalize:z,hashCode:K,params:J,toCamelCase:function(e){var t=e.replace(/[-_\s.]+(.)?/g,(function(e,t){return t?t.toUpperCase():""}));return t.substr(0,1).toLowerCase()+t.substr(1)},toUpperCamelCase:function(e){var t=e.replace(/[-_\s.]+(.)?/g,(function(e,t){return t?t.toUpperCase():""}));return t.substr(0,1).toUpperCase()+t.substr(1)},randomColor:q,random:Q,removeDiacritics:$,getShortName:ae,generateObjectId:function(e){void 0===e&&(e=16);var t=function(t){return Math.floor(t).toString(e)};return t(Date.now()/1e3)+re()(" ").call(" ",e).replace(/./g,(function(){return t(Math.random()*e)}))}},ce=function(e){return"boolean"===typeof e},le=function(){return!1},he=function(e){return"function"===typeof e},ue=function(e){return"number"===typeof e},de=function(e){var t;return f()(t=["string","number","symbol"]).call(t,typeof e)>-1},pe=function(e){return"string"===typeof e},ge=n(64),fe=n.n(ge),me=function(e,t,n){var i=n||{},a=i.timeout,s=void 0===a?1e3:a,r=i.checkInterval,o=void 0===r?100:r;return new(fe())((function(n){var i=setInterval((function(){("function"===typeof e?e():e)===("function"===typeof t?t():t)&&(clearInterval(i),n(!0))}),o);s>0&&setTimeout((function(){clearInterval(i),n(!1)}),s)}))},ve={isBoolean:ce,isDebugger:le,isFunction:he,isNumber:ue,isObject:B,isPropertyKey:de,isString:pe,isValueChangeAsync:me},Ee=function(e){var t=e.scene,n=e.key,i=e.newKey,a=t.textures.get(n).getSourceImage();if(!a)return!1;var s=Math.min(a.width,a.height);i||t.textures.removeKey(n);var r=t.textures.createCanvas(i||n,s,s),o=r.context;return o.beginPath(),o.arc(s/2,s/2,s/2,0,2*Math.PI,!1),o.clip(),r.draw((a.width-s)/2,(a.height-s)/2,a),!0},Se=function(e){var t=e.scene,n=e.key,i=e.newKey,a=e.radius,s=e.width,r=e.height,o=t.textures.get(n).getSourceImage();if(!o)return!1;s||(s=o.width),r||(r=o.height),i||t.textures.removeKey(n);var c=t.textures.createCanvas(i||n,s,r),l=c.context,h=Math.min(s,r)/100*a/2;return l.beginPath(),l.moveTo(0+h,0),l.lineTo(0+s-h,0),l.quadraticCurveTo(0+s,0,0+s,0+h),l.lineTo(0+s,0+r-h),l.quadraticCurveTo(0+s,0+r,0+s-h,0+r),l.lineTo(0+h,0+r),l.quadraticCurveTo(0,0+r,0,0+r-h),l.lineTo(0,0+h),l.quadraticCurveTo(0,0,0+h,0),l.closePath(),l.clip(),c.draw(0,0,o),!0},Ae=function(){return GameCore.Utils.Device.isDesktop()||GameCore.Utils.Device.pixelRatio()>1?2:1},ye=function(e,t){var n=e.split(","),i=n[0].match(/:(.*?);/);if(!i)return null;for(var a=i[1],s=atob(n[n.length-1]),r=s.length,o=new Uint8Array(r);r--;)o[r]=s.charCodeAt(r);return new File([o],t,{type:a})},Te=n(175),Ie=n.n(Te),Ce=new Image,be=function(e,t){return void 0===t&&(t=!0),new(fe())((function(n){t&&(Ce=new Image),Ce.onload=function(){n(Ce)},Ce.onerror=function(){n(null)},Ce.src=Ie().createObjectURL(e)}))},Oe=n(51),Pe=n(37),Re=n.n(Pe),we=function(){var e=(0,Oe.Z)(Re().mark((function e(t,n){var i;return Re().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t).then((function(e){return e.blob()})).catch((function(){return null}));case 2:if(i=e.sent){e.next=5;break}return e.abrupt("return",null);case 5:return e.abrupt("return",new File([i],n));case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),xe=function(e){if(f()(e).call(e,".")<0)return e;for(var t=e.length-1;t>=0;t--){if("."==e[t])return e.substring(0,t);if("0"!=e[t])return e.substring(0,t+1)}return e},ke=function(e,t){var n=t||{},i=n.fractionalDigits,a=void 0===i?0:i,s=n.startAbbreviate,r=void 0===s?1e3:s,o=n.abbreviateStep,c=void 0===o?3:o,l=n.maxLength,h=void 0===l?-1:l,u=n.removeLastZero,d=void 0===u||u,p=n.suffixes,g=void 0===p?["","k","m","b","t","q"]:p,f=-1===h?99999999:h;if(e>=r){var m=Math.floor(e/Math.pow(10,c)),v=Math.floor((m.toString().length-1)/c)+1,E=(e/Math.pow(Math.pow(10,c),v)).toFixed(a),S=f-g[v].length,A=E.substring(0,S);return(d?xe(A):A)+g[v]}var y=e.toFixed(a),T=f-g[0].length,I=y.substring(0,T);return d?xe(I):I+g[0]},_e={Array:E,Hash:x,Json:N,Object:W,String:oe,Valid:ve,Image:{drawCircle:Ee,drawBorder:Se,getImageScale:Ae,base64ToFile:ye,blobToHtmlImage:be,blobUrlToFile:we},Number:{toAbbreviatedString:ke,padStart:function(e,t,n){void 0===n&&(n="0");for(var i=e.toString(),a=i.length,s=0;s<t-a;s++)i=n+i;return i},padEnd:function(e,t,n){void 0===n&&(n="0");for(var i=e.toString(),a=i.length,s=0;s<t-a;s++)i+=n;return i},random:function(e,t){var n=t?Math.random()>.5?1:-1:1;return Math.floor(Math.random()*e)*n}},Device:{isDesktop:function(){return!/Android|iPhone|iPad|iPod/i.test(navigator.userAgent)},isMobile:function(){return/Android|iPhone|iPad|iPod/i.test(navigator.userAgent)},isAndroid:function(){return"ANDROID"===FBInstant.getPlatform()},isIOS:function(){return"IOS"===FBInstant.getPlatform()},isMobileWeb:function(){return"MOBILE_WEB"===FBInstant.getPlatform()},pixelRatio:function(){return Math.round(window.devicePixelRatio)||1}},Time:{isToday:function(e){var t=new Date(e),n=new Date;return t.getDate()===n.getDate()&&t.getMonth()===n.getMonth()&&t.getFullYear()===n.getFullYear()},sleepAsync:function(e){return new(fe())((function(t){return setTimeout(t,e)}))}}},Le=n(81),De=n(126),Me={},Ne={AppId:"wood-block-master",ENV:"production",ApiHost:"",OtherHost:"",PlayerDataStore:"XIAOMI-PlayerData.WoodBlockMaster",Notification:{Enable:!1,DailyNotificationMessages:{}},LeadersBoard:{Prefix:"leaderboards"},Debugger:{ShowConsole:!1,ShowInspector:!1,ShowMonitoring:!1},Statistics:{Enable:!1,ShowFPSInGame:!1,ShowMemoryInGame:!1},ParticleEditor:{Enable:!1},Rollbar:{Enable:!0},Ads:{Enabled:!0,AdService:"google",AdServiceConfigs:{Google:{DataAdClient:"ca-pub-3423367744172781",DataAdChannel:"6662285344",DataAdBreakTest:!1}},InterstitialAdOptions:{pID:"interstitial",showWhenStartGame:!1,secondsFirstTime:0,secondsBetweenAds:30},RewardAdOptions:{pID:"rewarded",secondsFirstTime:0,secondsBetweenAds:0},BannerAdOptions:[{placementId:"456",position:"bottom",bannerHeight:51,platform:"ALL",secondsReload:60}]}},Be={ENV:"development",AppId:"405221927720733",ApiHost:"https://fbig-singleplay-apps-dev.sunstudio.io",OtherHost:"https://leaderboards-dev.sunstudio.io",SyncProfileFromAPI:!1,PlayerDataStoreUsingApi:!1,Notification:{Enable:!1,DisableSendNotification:!1,ApiUrl:"https://notifications.sunstudio.io",GameTitle:"Wood Block Master",GameImage:"https://sunstudio.io/images/logo.png",DailyNotificationMessages:{MONDAY:"Kick off your week with some block-puzzling fun! Log in and start clearing those lines. \ud83e\udde9",TUESDAY:"Ready for another round? Your wooden adventure is waiting\u2014stack those blocks and keep the journey going! \ud83c\udf32",WEDNESDAY:"A new day, a new challenge! Log in today and see how far you can go in clearing the board. \ud83c\udfaf",THURSDAY:"Sharpen your skills! Today\u2019s puzzle is ready\u2014can you conquer it? \ud83c\udfc6",FRIDAY:"End your week on a high note with some block-clearing action! Dive back into the game and keep the momentum going. \ud83c\udfa1",SATURDAY:"The weekend is here! Perfect time to relax and enjoy some satisfying puzzle-solving in Wood Block Journey. \ud83c\udf89",SUNDAY:"Wind down with a peaceful game session. Log in and enjoy some calming block stacking today. \u2600\ufe0f"}},AddShortcut:{UseMock:!1},SubscribeBot:{UseMock:!1},PlayerMock:{id:"",signature:""},OpponentMock:{id:"",signature:""},MatchMockFailRate:5,Gameplay:{StartLevel:1,StartScore:0,StartDiamonds:0,DefaultDiamondsForNewUser:300,LevelDifficultRate:{FromUnder30:1.07,FromUnder35:1.05,FromUnder45:1.05,FromUnder200:1.1},StartAdAtLevel:2,GiftTime:10800,AwardDiamonds:100,FreeItems:!1,DelayStart:2e3,DelayLevelUp:1800,DelayFinishGame:500,EnableVibrate:!0,VibrateValue:[0,0,119,199,279,359,439],Progress:{BonusScore:1e3,Milestone:3},MaxGemInPiece:2,RatePieceContainGem:10},Tutorial:{ForceUseTutorial:!1,NumberOfTutorial:{FirstMove:3,TargetScore:1,CurrentScore:1,ColorfulGem:1,ItemPaint:1,ItemHammer:1,ItemShuffle:1}},PlayerDataStore:"YANDEX-PlayerData.WoodBlockJourney",Game:{AutoResize:!0,PortraitRatio:375/667,PortraitWidth:375,PortraitHeight:667,LandscapeRatio:760/450,LandscapeWidth:760,LandscapeHeight:500,ForcePixelRatio:0,AutoDropFps:!1,DisableLandscape:!1,FullSizeOnLandscape:!0},Debugger:{ShowInspector:!1,ShowMonitoring:!1,ShowConsole:!1,Expanded:!0,AutoRefresh:!0,InspectorAutoUpdate:!0,Opacity:.8,ListPlayerDevIds:[]},Statistics:{Enable:!1,DisplayMode:0,FPS:!0,MS:!0,MB:!0,Opacity:.8,ShowFPSInGame:!0,ShowMemoryInGame:!1},ParticleEditor:{Enable:!1,Opacity:.8,Expanded:!0},ProfilerPlugin:{Enable:!1},CanvasRecorder:{Enable:!1,Options:{Type:"png",Quality:.85,RecordFps:60,SyncFps:!0}},Match:{MaxRescueCount:1,RescueGamePopupTimeout:10,DelayNoThank:1e3,ContinueSingleMatchEnabled:!1,SingleMatchStore:"YANDEX-SingleMatch.WoodBlockJourney",JourneyMatchStore:"YANDEX-JourneyMatch.WoodBlockJourney",LivesStore:"lives",LocalSingleMatchDefault:{_id:"12345678890",status:"open",playerId:"",score:0,level:1,startedAt:0,updateAt:0,finishAt:0,data:{}},Levels:[200,500,1e3,1500,2e3,2500,3e3,3600,4200,4800,5400,6e3,6700,7400,8100,8800,9500,10300,11100,11900,12700,13500,14400,15300,16200,17100,18e3],PieceRandoms:{maxPiece:200,measureError:.5}},DailyRewards:{MaxDays:6,MockTime:0,CheckInterrupt:!0},DailyTasks:{Duration:86400},Tournament:{UseMock:!1,ForcePlay:!1,UseLeaderboard:!1,TournamentContextIds:[],YourMockTournamentCount:1},LeadersBoard:{Name:null,UseMock:!1,Prefix:"leaderboards",LeaderboardId:"654da2eec47c666016e628d3",Limit:50,MockOptions:{PlayerEntryIndex:-1}},LanguageSupport:{en:"en"},EnableEffectSceneTransition:!0,DefaultTheme:"default",ThemeSupport:{default:"default"},Ads:{Enabled:!0,AdService:"msgames",FallbackService:"google",AdServiceConfigs:{Google:{DataAdClient:"",DataAdFrequencyHint:30,DataAdBreakTest:!1,MaxScriptLoadRetryCount:3}},CalculateSafeAreaBottom:!0,EnableRewardVideoResetInterstitial:!1,Mockup:{Enable:!1,ErrorRate:5,GiphyApiKey:""},InterstitialAdOptions:{pID:"",showWhenStartGame:!1,secondsFirstTime:30,secondsBetweenAds:30},RewardAdOptions:{pID:"",secondsFirstTime:0,secondsBetweenAds:0},BannerAdOptions:[]},Network:{MaximumRequest:6,Timeout:15e3,Retries:3},Analytics:{GoogleAnalytics:{consoleLog:!1},FacebookAnalytics:{prefix:"fba",consoleLog:!1}},MagnetItem:{key:"magnet-item",scoreForOnePercent:4,maxMagnetPerMatch:5},Board:{cols:9,rows:9},Sentry:{errorCodes:{accepted:[],ignored:["USER_INPUT","NETWORK_FAILURE"]},errorMessages:{accepted:[],ignored:["Load image failed","Script error."]}},DailyChallenge:{Prefix:"leaderboards",LeaderBoardId:"654da492c47c666016e628d6"},Lives:{bonusDurationMins:5,bonusLife:1,livesCapacity:10},Rollbar:{Enable:!1,UseMockup:!1,FilterError:{Codes:{accepted:[],ignored:["USER_INPUT","NETWORK_FAILURE"]},Messages:{accepted:[],ignored:["Load image failed","Request failed to be processed","Script error."]}}},Performance:{Enable:!1,trackingSceneKeys:["DASHBOARD_SCENE","GAME_SCENE"],minQuality:1,maxQuality:2,fpsThreshold:48,checkInterval:2e3,qualityAdjustStep:.1,autoUpgradeQuality:!0,onlyUpdateWhenSwitchScene:!0}};Be=(0,De.TS)((0,Le.Z)({},Be),Ne);var Ge=Be=(0,De.TS)((0,Le.Z)({},Be),Me),Fe=function(e){return function(t){try{var n=window.game,i=t.module;if(n.scene.getScenes(!0)[0].scene.key!==e)return;var a=i.default;n.scene.remove(e),n.scene.add(e,a,!0),n.scene.bringToTop(n.globalScene)}catch(r){var s;null==(s=void 0)||s.invalidate()}}},Ue=n(555),He=n.n(Ue),Ze=n(557),Ye=n.n(Ze),Ve=n(559),We=n.n(Ve),ze=n(201),Ke=!1,je=function e(t,n,i){n.forEach((function(n){if(n.name){var a=null;if(a=i?i.getByName(n.name):t.children.getByName(n.name)){if("Container"===n.type){var s=a,r=n.getAll();if(e(t,r,s),!s.hotContainer)return}var o=He()(n),c=["_events","_sysEvents","input","localTransform","list","displayList"],h=l()(o).call(o,(function(e){if("string"!==typeof e)return!1;if(f()(c).call(c,e)>=0)return!1;if(!a)return!1;var t=Ye()(n,e);return!(t instanceof Function)&&(!(t instanceof Phaser.Scene)&&(!(t instanceof Phaser.GameObjects.Group)&&(!(t instanceof Phaser.GameObjects.GameObject)&&t===Ye()(a,e))))}));h.length<1||h.forEach((function(e){if(a){var t=Ye()(n,e);Ye()(a,e),We()(a,e,t)}}))}}}))},Xe={Configs:Ge,Utils:_e,LiveUpdate:{Scene:Fe,SceneObjects:function(e,t){return void 0===t&&(t=Ke),function(n){try{var i=window.game,a=n.module,s=i.scene.getScenes(!0)[0];if(s.scene.key!==e)return;Ke=t;var r=a.default,o=e+"-draft";i.scene.remove(o);var c=i.scene.add(o,r);s=i.scene.getScene(e),c.events.once(Phaser.Scenes.Events.RENDER,(0,ze.D)((function(){var e=c.children.getAll();je(s,e),i.scene.remove(o)}),50)),i.scene.run(o),i.scene.bringToTop(s),i.scene.bringToTop(i.globalScene)}catch(l){}}}}};window.GameCore=Xe;var Je=Xe},618:function(e,t,n){"use strict";n.r(t);var i=n(51),a=n(14),s=n(65),r=n.n(s),o=n(132),c=n.n(o),l=n(37),h=n.n(l),u=n(82),d=n(206),p=GameCore.Utils.Object,g=GameCore.Ads,f=g.Types,m=g.Status,v="msgames",E=function(e){function t(t,n){var i;return(i=e.call(this,t)||this).instance=void 0,i.placementId=void 0,i.instanceLoadFailedQueue=void 0,i.isHasTooManyInstancesError=void 0,i.instance=null,i.placementId=n,i.instanceLoadFailedQueue=[],i.isHasTooManyInstancesError=!1,i}(0,a.Z)(t,e),t.setGame=function(e){self.game=e};var n=t.prototype;return n.loadAsync=function(){var e=(0,i.Z)(h().mark((function e(){var t,n,i;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.status===m.IDLE){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,this.status=m.LOADING,e.next=6,this.createInstanceByType(this.type);case 6:if(this.instance=e.sent,null!==this.instance){e.next=9;break}throw new GameCore.Ads.AdError("AD_INSTANCE_NOT_INITIATED","Ad instance didn't initiated.");case 9:return e.next=11,this.instance.loadAsync();case 11:this.status=m.FILLED,t=this.getSceneName(),this.type===f.PRE_ROLL&&self.game.analytics.loadPreRollAd(t,v),this.type===f.INTERSTITIAL&&self.game.analytics.loadInterstitialAd(t,v),this.type===f.REWARDED&&self.game.analytics.loadRewardedVideoAd(t,v),e.next=25;break;case 18:throw e.prev=18,e.t0=e.catch(2),this.status=m.IDLE,this.instance&&this.instanceLoadFailedQueue.push(this.instance),this.instance=null,this.isAdTypeValid(this.type)&&(n=this.getSceneName(),i={type:this.type,placement:n,adService:v},self.game.analytics.loadAdFail(i)),e.t0;case 25:case"end":return e.stop()}}),e,this,[[2,18]])})));return function(){return e.apply(this,arguments)}}(),n.showAsync=function(){var e=(0,i.Z)(h().mark((function e(){var t,n,i,a;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=!1,null,e.prev=2,this.status===m.FILLED){e.next=5;break}throw new GameCore.Ads.AdError("AD_NOT_FILLED","Ads no fill.");case 5:if(this.status=m.SHOWING,null!==this.instance){e.next=8;break}throw new GameCore.Ads.AdError("AD_INSTANCE_NOT_INITIATED","Ad instance didn't initiated.");case 8:return this.isHasTooManyInstancesError&&self.game.analytics.event(u._.MISSING_AD_SHOW,{ad_type:this.type}),e.next=11,this.instance.showAsync();case 11:t=!0,this.status=m.IDLE,this.instance=null,e.next=21;break;case 16:throw e.prev=16,e.t0=e.catch(2),e.t0 instanceof Object&&p.hasOwn(e.t0,"code")?("ADS_NOT_LOADED"===e.t0.code?this.status=m.FILLED:(this.status=m.IDLE,this.instance=null),"USER_INPUT"===e.t0.code&&(this.status=m.IDLE,this.instance=null,t=!0)):(this.status=m.IDLE,this.instance=null),e.t0,e.t0;case 21:return e.prev=21,window.focus(),n=this.getSceneName(),t?(this.type===f.PRE_ROLL&&self.game.analytics.showPreRollAd(n,v),this.type===f.INTERSTITIAL&&self.game.analytics.showInterstitialAd(n,v),this.type===f.REWARDED&&self.game.analytics.showRewardedVideoAd(n,v)):this.isAdTypeValid(this.type)&&(i=this.getSceneName(),a={type:this.type,placement:i,adService:v},self.game.analytics.showAdFail(a)),e.finish(21);case 26:case"end":return e.stop()}}),e,this,[[2,16,21,26]])})));return function(){return e.apply(this,arguments)}}(),n.getStatus=function(){return this.status},n.createInstanceByType=function(){var e=(0,i.Z)(h().mark((function e(t){var n;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=self.game.facebook,e.prev=1,e.t0=t,e.next=e.t0===f.REWARDED?5:e.t0===f.INTERSTITIAL||e.t0===f.PRE_ROLL?8:11;break;case 5:return e.next=7,n.getRewardedVideoAsync(this.placementId);case 7:case 10:return e.abrupt("return",e.sent);case 8:return e.next=10,n.getInterstitialAdAsync(this.placementId);case 11:case 20:return e.abrupt("return",null);case 12:e.next=21;break;case 14:if(e.prev=14,e.t1=e.catch(1),!(e.t1 instanceof Object&&p.hasOwn(e.t1,"code"))){e.next=20;break}if("ADS_TOO_MANY_INSTANCES"!==e.t1.code){e.next=20;break}return this.isHasTooManyInstancesError=!0,e.abrupt("return",this.instanceLoadFailedQueue.shift()||null);case 21:case"end":return e.stop()}}),e,this,[[1,14]])})));return function(t){return e.apply(this,arguments)}}(),n.getSceneName=function(){try{var e=self.game.globalScene;return e instanceof d.Z?e.getCurrentScene().scene.getSceneName():"unknown"}catch(t){return"unknown"}},n.isAdTypeValid=function(e){var t;return r()(t=c()(f)).call(t,e)},t}(GameCore.Ads.AdInstance);t.default=E},619:function(e,t,n){"use strict";n.r(t);var i,a=n(51),s=n(83),r=n(45),o=n(14),c=n(64),l=n.n(c),h=n(65),u=n.n(h),d=n(132),p=n.n(d),g=n(37),f=n.n(g),m=n(82),v=n(206),E=GameCore,S=E.Utils.Object,A=E.Ads,y=A.Types,T=A.Status,I="not-loaded",C="loading",b="loaded",O="google",P=function(e){function t(n,i){var a;return(a=e.call(this,n)||this).instance=void 0,a.instance=null,a.status=T.IDLE,window.setInterstitialPlacementType=t.setInterstitialPlacementType,window.setRewardedPlacementType=t.setRewardedPlacementType,window.setPreRollPlacementType=t.setPreRollPlacementType,t.childAdInstances.push((0,r.Z)(a)),t.isPreloadConfigReady&&(a.status=T.FILLED),a}(0,o.Z)(t,e),t.initGoogleAdsAsync=function(){var e=(0,a.Z)(f().mark((function e(n){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("loaded"!==t.initStatus){e.next=3;break}return e.abrupt("return");case 3:t.initStatus=C,t.adsByGoogleConfig=n,t.loadScriptElementAsync(n);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t.configGoogleAdsOnInit=function(){var e=(0,a.Z)(f().mark((function e(){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:window.adsbygoogle=window.adsbygoogle||[],window.adBreak=function(e){adsbygoogle.push(e)},window.adConfig=function(e){adsbygoogle.push(e)},t.initStatus=b,t.runPreloadAdConfig();case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),t.runPreloadAdConfig=function(){var e=(0,a.Z)(f().mark((function e(){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preloadPromise=new(l())((function(e,n){window.adConfig({preloadAdBreaks:"on",onReady:function(){t.isPreloadConfigReady=!0,t.handlePostPreloadAdComplete(),e()}}),setTimeout((function(){t.isPreloadConfigReady||n(new Error("Failed to preload ad config in time."))}),1e4)})),e.abrupt("return",t.preloadPromise);case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),t.loadScriptElementAsync=function(e){return new(l())((function(n,i){!function a(s){var r=e.maxScriptLoadRetryCount,o=document.createElement("script");try{t.assignAdsByGoogleScriptProperties(o,e)}catch(l){t.initStatus=I,i(new Error("Invalid adConfig."))}if(o.onload=function(){t.configGoogleAdsOnInit(),n(!0)},o.onerror=function(){s<r?setTimeout((function(){a(s+1)}),12e4):(t.initStatus=I,i(new Error("Failed to load Google Ads script.")))},document.head.appendChild(o),!!!document.getElementById("adsByGoogleFunctionScript")){var c=document.createElement("script");c.text="window.adsbygoogle = window.adsbygoogle || []; var adBreak = adConfig = function(o) {adsbygoogle.push(o);}",c.id="adsByGoogleFunctionScript",document.head.appendChild(c)}}(0)}))},t.assignAdsByGoogleScriptProperties=function(e,t){var n=t.dataAdClient,i=t.dataAdHost,a=t.dataAdChannel,s=t.dataAdBreakTest,r=t.dataAdFrequencyHint;if(!n&&!i)throw new Error("dataAdClient or dataAdHost is required.");e.async=!0,e.setAttribute("data-ad-frequency-hint",r+"s"),n&&e.setAttribute("data-ad-client",n),a&&e.setAttribute("data-ad-channel",a),i&&e.setAttribute("data-ad-host",i),s&&e.setAttribute("data-adbreak-test","on");var o="";if(n||i){o="?";var c=[];n&&c.push("client="+n),i&&c.push("host="+i),o+=c.join("&")}e.src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"+o,e.crossOrigin="anonymous"};var n=t.prototype;return n.makeAdInstance=function(){var e=this;return{getPlacementID:function(){return""},loadAsync:function(){return e.preloadAdPlacement()},showAsync:function(){return e.createAdPlacement()}}},n.preloadAdPlacement=function(){return t.initStatus!==b?l().reject(new Error("Google Ads not initiated.")):t.isPreloadConfigReady?l().resolve():t.preloadPromise?t.preloadPromise:t.runPreloadAdConfig()},n.createAdPlacement=function(){switch(this.type){case y.PRE_ROLL:return this.createAdPlacementPreroll();case y.REWARDED:return this.createAdPlacementRewarded();case y.INTERSTITIAL:return this.createAdPlacementInterstitial();default:return l().reject(new GameCore.Ads.AdError("UNSUPPORTED_AD_TYPE","Unsupported."))}},n.createAdPlacementPreroll=function(){return new(l())((function(e,n){window.adBreak({type:t.preRollPlacementType,name:"prerollAd",adBreakDone:function(t){switch(t.breakStatus){case"dismissed":case"viewed":return void e();default:return void n(new GameCore.Ads.AdError(t.breakStatus,t.breakType))}}})}))},n.createAdPlacementInterstitial=function(){return new(l())((function(e,n){window.adBreak({type:t.interstitialPlacementType,name:"interstitialAd",beforeAd:function(){self.game.ads.hideBannerAdAsync()},adBreakDone:function(t){switch(self.game.ads.showBannerAdAsync(),t.breakStatus){case"dismissed":case"viewed":return void e();default:return void n(new GameCore.Ads.AdError(t.breakStatus,t.breakType))}}})}))},n.createAdPlacementRewarded=function(){return new(l())((function(e,n){window.adBreak({type:t.rewardedPlacementType,name:"rewardedAd",beforeReward:function(e){self.game.ads.hideBannerAdAsync(),e()},adViewed:function(){},adDismissed:function(){},adBreakDone:function(t){switch(self.game.ads.showBannerAdAsync(),t.breakStatus){case"dismissed":return void n(new GameCore.Ads.AdError("USER_INPUT","User dismissed."));case"viewed":return void e();default:return void n(new GameCore.Ads.AdError(t.breakStatus,t.breakType))}}})}))},t.setGame=function(e){self.game=e},n.getStatus=function(){return this.status},n.loadAsync=function(){var e=(0,a.Z)(f().mark((function e(){var n,i,a;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,t.isPreloadConfigReady&&null==this.instance){e.next=3;break}return e.abrupt("return");case 3:if(this.instance=this.makeAdInstance(),null!==this.instance){e.next=6;break}throw new GameCore.Ads.AdError("AD_INSTANCE_NOT_INITIATED","Ad instance didn't initiated.");case 6:return e.next=8,this.instance.loadAsync();case 8:n=this.getSceneName(),this.type===y.PRE_ROLL&&self.game.analytics.loadPreRollAd(n,O),this.type===y.INTERSTITIAL&&self.game.analytics.loadInterstitialAd(n,O),this.type===y.REWARDED&&self.game.analytics.loadRewardedVideoAd(n,O),e.next=18;break;case 14:throw e.prev=14,e.t0=e.catch(0),this.isAdTypeValid(this.type)&&(i=this.getSceneName(),a={type:this.type,placement:i,adService:O},self.game.analytics.loadAdFail(a)),e.t0;case 18:case"end":return e.stop()}}),e,this,[[0,14]])})));return function(){return e.apply(this,arguments)}}(),n.showAsync=function(){var e=(0,a.Z)(f().mark((function e(){var t,n,i,a;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=!1,e.prev=1,this.status===T.FILLED){e.next=4;break}throw new GameCore.Ads.AdError("AD_NOT_FILLED","Ads no fill.");case 4:if(this.status=T.SHOWING,null!==this.instance){e.next=8;break}return e.next=8,this.loadAsync();case 8:if(null!==this.instance){e.next=10;break}throw new GameCore.Ads.AdError("AD_INSTANCE_NOT_INITIATED","Ad instance didn't initiated.");case 10:return e.next=12,this.instance.showAsync();case 12:t=!0,this.handlePostShowAdStatus(),this.instance=null,e.next=27;break;case 17:if(e.prev=17,e.t0=e.catch(1),!(e.t0 instanceof Object&&S.hasOwn(e.t0,"code"))){e.next=24;break}if("noAdPreloaded"!==e.t0.code){e.next=22;break}return e.abrupt("return");case 22:"USER_INPUT"===e.t0.code&&(t=!0),"frequencyCapped"===e.t0.code&&self.game.analytics.event(m._.MISSING_AD_SHOW,{ad_type:this.type});case 24:throw this.handlePostShowAdStatus(),this.instance=null,e.t0;case 27:return e.prev=27,window.focus(),n=this.getSceneName(),t?(this.type===y.PRE_ROLL&&self.game.analytics.showPreRollAd(n,O),this.type===y.INTERSTITIAL&&self.game.analytics.showInterstitialAd(n,O),this.type===y.REWARDED&&self.game.analytics.showRewardedVideoAd(n,O)):this.isAdTypeValid(this.type)&&(i=this.getSceneName(),a={type:this.type,placement:i,adService:O},self.game.analytics.showAdFail(a)),e.finish(27);case 32:case"end":return e.stop()}}),e,this,[[1,17,27,32]])})));return function(){return e.apply(this,arguments)}}(),n.getSceneName=function(){try{var e=self.game.globalScene;return e instanceof v.Z?e.getCurrentScene().scene.getSceneName():"unknown"}catch(t){return"unknown"}},n.isAdTypeValid=function(e){var t;return u()(t=p()(y)).call(t,e)},n.handlePostShowAdStatus=function(){t.isPreloadConfigReady?this.status=T.FILLED:this.status=T.IDLE},t.handlePostPreloadAdComplete=function(){t.childAdInstances.forEach((function(e){e.status=T.FILLED}))},(0,s.Z)(t,null,[{key:"initStatus",get:function(){return t._initStatus},set:function(e){this._initStatus!==e&&(self.game.analytics.event(m._.AD_INIT,{adService:"adsense",state:e}),this._initStatus=e)}}]),t}(GameCore.Ads.AdInstance);i=P,P.childAdInstances=[],P._initStatus=I,P.isPreloadConfigReady=!1,P.adsByGoogleConfig=void 0,P.preloadPromise=void 0,P.preRollPlacementType="preroll",P.interstitialPlacementType="next",P.rewardedPlacementType="reward",P.setInterstitialPlacementType=function(e){i.interstitialPlacementType=e},P.setRewardedPlacementType=function(e){i.rewardedPlacementType=e},P.setPreRollPlacementType=function(e){i.preRollPlacementType=e},t.default=P},450:function(e,t,n){"use strict";n.d(t,{U:function(){return y},v:function(){return T}});var i=n(81),a=n(51),s=n(37),r=n.n(s),o=n(89),c=n.n(o),l=n(14),h=n(203),u=function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).name="BadRequest",i.message=t||"This request is bad",i.payload=n,i}return(0,l.Z)(t,e),t}((0,h.Z)(Error)),d=function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).name="RequestTimeout",i.message=t||"This request is timeout",i.payload=n,i}return(0,l.Z)(t,e),t}((0,h.Z)(Error)),p=n(127),g=GameCore.Configs,f=g.AppId,m=g.Network,v=function(e){if(!e.ok)throw new u(null,{response:e})},E=function(){var e=window.game.auth.getToken();return{token:e,timeout:m.Timeout,headers:{Authorization:"Bearer "+e,"Content-Type":"application/json"}}},S=function(e,t,n,i){return(0,a.Z)(r().mark((function a(){var s,o,l,h,p;return r().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,s=e+"/apps/"+f+"/"+t,o=new AbortController,n.signal=o.signal,l=setTimeout((function(){o.abort()}),n.timeout),GameCore.Utils.Valid.isObject(i)&&(n.body=c()(i)),a.next=8,fetch(s,n);case 8:return h=a.sent,clearTimeout(l),v(h),a.next=13,h.json();case 13:if(a.t0=a.sent,a.t0){a.next=16;break}a.t0={};case 16:return p=a.t0,a.abrupt("return",p);case 20:if(a.prev=20,a.t1=a.catch(0),!(a.t1 instanceof u)){a.next=24;break}return a.abrupt("return",null);case 24:if(!(a.t1 instanceof Object&&GameCore.Utils.Object.hasOwn(a.t1,"name"))){a.next=27;break}if("AbortError"!==a.t1.name){a.next=27;break}throw new d(null);case 27:throw a.t1;case 28:case"end":return a.stop()}}),a,null,[[0,20]])})))},A=function(){var e=(0,a.Z)(r().mark((function e(t,n){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.abrupt("return",t());case 4:if(e.prev=4,e.t0=e.catch(0),!(e.t0 instanceof d&&n>0)){e.next=18;break}return e.prev=7,e.next=10,(0,p.qZ)(600);case 10:return e.next=12,A(t,n-1);case 12:return e.abrupt("return",e.sent);case 15:return e.prev=15,e.t1=e.catch(7),e.abrupt("return",{});case 18:if(!(e.t0 instanceof d)){e.next=20;break}return e.abrupt("return",{});case 20:return e.abrupt("return",{});case 22:case"end":return e.stop()}}),e,null,[[0,4],[7,15]])})));return function(t,n){return e.apply(this,arguments)}}(),y=function(){var e=(0,a.Z)(r().mark((function e(t,n,a,s){var o,c;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return void 0===n&&(n={}),void 0===s&&(s=m.Retries),e.prev=2,o=(0,i.Z)({},E(),n,{method:"GET"}),c=S(a,t,o),e.next=7,A(c,s);case 7:return e.abrupt("return",e.sent);case 10:return e.prev=10,e.t0=e.catch(2),e.abrupt("return",{});case 14:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(t,n,i,a){return e.apply(this,arguments)}}(),T=function(){var e=(0,a.Z)(r().mark((function e(t,n,a,s,o){var c,l;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return void 0===a&&(a={}),void 0===o&&(o=m.Retries),e.prev=2,c=(0,i.Z)({},E(),a,{method:"POST"}),l=S(s,t,c,n),e.next=7,A(l,o);case 7:return e.abrupt("return",e.sent);case 10:return e.prev=10,e.t0=e.catch(2),e.abrupt("return",{});case 14:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(t,n,i,a,s){return e.apply(this,arguments)}}()},447:function(e,t,n){"use strict";n.d(t,{DW:function(){return c},EH:function(){return s},fJ:function(){return a},kL:function(){return i},qj:function(){return r},rh:function(){return o}});var i="CONTEXT_RECEIVED",a="CONTEXT_PROCESSED",s="CONTEXT_GAME_MODE_DETECTED",r="MESSAGES_SENT_UPDATE",o="MESSAGES_SENT_REMOVE",c="SCENE_KEY_UPDATE"},641:function(e,t,n){"use strict";var i=n(14),a=function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).name="TournamentNotFound",i.message=t||"A Tournament with current context was not found",i.payload=n,i.code="TOURNAMENT_NOT_FOUND",i}return(0,i.Z)(t,e),t}((0,n(203).Z)(Error));t.Z=a},46:function(e,t,n){"use strict";var i=n(126),a=function(){function e(e,t){if(this.scene=void 0,this.config=void 0,this.isStarted=void 0,this.tween=void 0,!(t.targets.length<1)){this.buildConfig(e,t);var n=this.config.targets[0].scene;n&&(this.scene=n,this.isStarted=!1,this.tween=n.tweens.create(this.config))}}var t=e.prototype;return t.buildConfig=function(e,t){this.config=(0,i.TS)(e,t)},t.play=function(){this.tween&&(this.isStarted&&this.tween.hasStarted?this.restart():(this.tween.play(),this.isStarted=!0))},t.restart=function(){var e;null==(e=this.tween)||e.restart()},t.stop=function(){var e;null==(e=this.tween)||e.stop()},t.remove=function(){var e;null==(e=this.tween)||e.remove()},t.next=function(e){return this.tween?(this.tween.off(Phaser.Tweens.Events.TWEEN_COMPLETE,e),this.tween.once(Phaser.Tweens.Events.TWEEN_COMPLETE,e),this.tween):null},e}();t.Z=a},626:function(e,t,n){"use strict";var i=n(45),a=n(14),s=n(46),r={targets:[],repeat:-1,yoyo:!0,duration:33,ease:Phaser.Math.Easing.Sine.InOut,props:{x:5}},o=function(e){function t(t){var n,a,s;return(s=e.call(this,r,t)||this).posX=void 0,s.handleSwitchPosition=function(){var e;s.posX=-s.posX,null==(e=s.tween)||e.updateTo("x",-s.posX)},null!=(n=s.config)&&n.props?(s.posX=s.config.props.x,null==(a=s.tween)||a.on(Phaser.Tweens.Events.TWEEN_REPEAT,s.handleSwitchPosition),s):(0,i.Z)(s)}return(0,a.Z)(t,e),t}(s.Z);t.Z=o},455:function(e,t,n){"use strict";var i=n(14),a=n(46),s={targets:[],duration:600,ease:Phaser.Math.Easing.Linear,props:{angle:{from:0,to:360}}},r=function(e){function t(t){return e.call(this,s,t)||this}return(0,i.Z)(t,e),t}(a.Z);t.Z=r},459:function(e,t,n){"use strict";var i=n(14),a=n(46),s={targets:[],duration:400,ease:n(128).Z,props:{scale:"-=0.1"}},r=function(e){function t(t){return e.call(this,s,t)||this}return(0,i.Z)(t,e),t}(a.Z);t.Z=r},628:function(e,t,n){"use strict";var i=n(14),a=n(46),s={targets:[],duration:400,ease:n(128).Z,props:{scale:"+=0.1"}},r=function(e){function t(t){return e.call(this,s,t)||this}return(0,i.Z)(t,e),t}(a.Z);t.Z=r},128:function(e,t,n){"use strict";var i=n(193),a=n.n(i)()(.48,1.57,.6,.83);t.Z=a},462:function(e,t,n){"use strict";var i=n(14),a=n(46),s={targets:[],duration:600,ease:Phaser.Math.Easing.Cubic.Out,props:{alpha:{start:0,from:0,to:1}}},r=function(e){function t(t){return e.call(this,s,t)||this}return(0,i.Z)(t,e),t}(a.Z);t.Z=r},460:function(e,t,n){"use strict";var i=n(14),a=n(46),s={targets:[],duration:600,ease:Phaser.Math.Easing.Quadratic.Out,props:{alpha:{start:1,from:1,to:0}}},r=function(e){function t(t){return e.call(this,s,t)||this}return(0,i.Z)(t,e),t}(a.Z);t.Z=r},456:function(e,t,n){"use strict";var i=n(14),a=n(46),s={targets:[],duration:300,ease:n(128).Z,props:{scale:{from:1.2,to:1}}},r=function(e){function t(t){return e.call(this,s,t)||this}return(0,i.Z)(t,e),t}(a.Z);t.Z=r},461:function(e,t,n){"use strict";var i=n(14),a=n(46),s={targets:[],duration:600,ease:Phaser.Math.Easing.Back.Out,props:{y:{from:250,to:0},scale:{from:.9,to:1},alpha:{start:0,from:0,to:1}}},r=function(e){function t(t){return e.call(this,s,t)||this}return(0,i.Z)(t,e),t}(a.Z);t.Z=r},458:function(e,t,n){"use strict";var i=n(83),a=n(45),s=n(14),r=n(82),o=n(459),c=n(102),l=n(207),h=n(202),u=function(e){function t(t,n,i,s,r,h){var u;return void 0===h&&(h=!1),(u=e.call(this,t)||this).useSound=!0,u.isClicked=!1,u.scaleUp=-1,u.scaleDown=-1,u.button=void 0,u.upAnimation=void 0,u.downAnimation=void 0,u.isUsePixelPerfect=!1,u.hitArea=void 0,u.hitZone=void 0,u.scaleDownPress=void 0,u.parentName=void 0,u.handelObjectDestroy=function(){u.scene&&u.scene.events.off(Phaser.Scenes.Events.SLEEP,u.handleSceneSleep)},u.handleSceneSleep=function(){u.scene&&u.scene.tweens.killTweensOf((0,a.Z)(u))},u.handlePointerDown=function(){var e;u.isClicked||null!=(e=u.upAnimation)&&null!=(e=e.tween)&&e.isPlaying()||(u.isClicked=!0,u.runDownAnimation())},u.handleOnClick=function(e){return function(){var t,n;u.isClicked&&(null!=(t=u.upAnimation)&&null!=(t=t.tween)&&t.isPlaying()||(u.isClicked=!1,u.runUpAnimation(),null==(n=u.upAnimation)||null==(n=n.tween)||n.once(Phaser.Tweens.Events.TWEEN_COMPLETE,(function(){u.logButtonEvent(),u.addDebugData(),u.processCallback(e)}))))}},u.handlePointerOut=function(){var e;u.isClicked&&(null!=(e=u.upAnimation)&&null!=(e=e.tween)&&e.isPlaying()||(u.isClicked=!1,u.runUpAnimation()))},u.runDownAnimation=function(){var e;-1===u.scaleDown&&(u.scaleUp=u.scale,u.scaleDown=u.scaleDownPress),u.useSound&&u.scene.audio.playSound(l.Z.BUTTON_CLICK),null==(e=u.downAnimation)||e.remove(),u.downAnimation=new o.Z({targets:[(0,a.Z)(u)],duration:150,props:{scale:u.scaleDown},onUpdate:function(){u.hitZone.scale=1/u.scale}}),u.downAnimation.play()},u.runUpAnimation=function(){var e;-1!==u.scaleUp&&(null==(e=u.upAnimation)||e.remove(),u.upAnimation=new o.Z({targets:[(0,a.Z)(u)],duration:150,props:{scale:u.scaleUp},onUpdate:function(){u.hitZone.scale=1/u.scale}}),u.upAnimation.play())},u.isUsePixelPerfect=h,u.setDepth(c.Z.BUTTON),u.createButton(n,i,s,r),u.updateSize(),u.listenEvents(),u.scene.add.existing((0,a.Z)(u)),u}(0,s.Z)(t,e);var n=t.prototype;return n.listenEvents=function(){this.scene.events.on(Phaser.Scenes.Events.SLEEP,this.handleSceneSleep),this.once(Phaser.GameObjects.Events.DESTROY,this.handelObjectDestroy)},n.processCallback=function(e){var t,n,i;null==(t=this.upAnimation)||t.stop(),null==(n=this.downAnimation)||n.stop(),null==(i=this.scene)||i.tweens.killTweensOf(this),-1!==this.scaleUp&&this.setScale(this.scaleUp),e()},n.setDisabled=function(e){var t,n;e?(this.setAlpha(.5),null==(t=this.hitArea)||t.disableInteractive()):(this.setAlpha(1),null==(n=this.hitArea)||n.setInteractive())},n.createButton=function(e,t,n,i){this.button=this.scene.add.image(0,0,e,t),n&&i&&this.button.setWorldSize(n,i),this.scaleDownPress=this.scale-.1;var a=this.button,s=a.displayWidth,r=a.displayHeight;this.hitZone=this.scene.make.zone({displayWidth:s,displayHeight:r}),this.add([this.button,this.hitZone])},n.updateSize=function(){var e=this.button,t=e.width,n=e.height,i=t/100*10,a=n/100*10,s=i<10?i:10,r=a<10?a:10;this.setSize(t+s,n+r),this.hitZone.setSize(t+s,n+r)},n.addDebugData=function(){var e=this.getParentName(),t=this.name;(0,h.sw)("ui-click",e+":"+t)},n.logButtonEvent=function(){var e=this.getParentName(),t=this.name;this.scene.analytics.event(r._.BUTTON_CLICK,{button_name:t,screen_name:e})},n.getParentName=function(){if(this.parentName)return this.parentName;for(var e=this.parentContainer;e;){if(e instanceof GameCore.Screen){var t=e;return this.parentName=t.getScreenName(),this.parentName}e=e.parentContainer}return this.parentName=this.scene.getSceneName(),this.parentName},(0,i.Z)(t,[{key:"onClick",set:function(e){this.isUsePixelPerfect?(this.hitArea=this.button,this.hitArea.setInteractive({useHandCursor:!0,pixelPerfect:!0})):(this.hitArea=this.hitZone,this.updateSize(),this.hitArea.setInteractive({useHandCursor:!0})),this.hitArea.on(Phaser.Input.Events.GAMEOBJECT_POINTER_DOWN,this.handlePointerDown),this.hitArea.on(Phaser.Input.Events.GAMEOBJECT_POINTER_UP,this.handleOnClick(e)),this.hitArea.on(Phaser.Input.Events.GAMEOBJECT_POINTER_OUT,this.handlePointerOut)}},{key:"isUsePixelPerFect",get:function(){return this.isUsePixelPerfect}}]),t}(Phaser.GameObjects.Container);t.Z=u},454:function(e,t,n){"use strict";var i=n(45),a=n(14),s=n(101),r=n(455),o=s.Z.DEFAULT,c=o.KEY,l=o.FRAME,h=function(e){function t(t){var n;return(n=e.call(this,t,0,0,c,l.PRELOADER)||this).anim=void 0,n.runAnimation(),n.setWorldSize(80,80),n.scene.add.existing((0,i.Z)(n)),n}(0,a.Z)(t,e);var n=t.prototype;return n.runAnimation=function(){var e;null==(e=this.anim)||e.remove(),this.anim=new r.Z({targets:[this],repeat:-1,duration:1200}),this.anim.play()},n.setVisible=function(t){return e.prototype.setVisible.call(this,t),t?this.runAnimation():this.anim.stop(),this},t}(Phaser.GameObjects.Image);t.Z=h},457:function(e,t,n){"use strict";var i=n(83),a=n(45),s=n(14),r=n(102),o=n(101).Z.DEFAULT,c=o.KEY,l=o.FRAME,h=function(e){function t(t,n,i,s,o,c){var l;return(l=e.call(this,t,n,i)||this).top=void 0,l.mid=void 0,l.bottom=void 0,l.payload=void 0,l.payload=c,l.setSize(s,o),l.setDepth(r.Z.POPUP),l.createPopup(),l.scene.add.existing((0,a.Z)(l)),l}(0,s.Z)(t,e);var n=t.prototype;return n.createPopup=function(){this.createPopupImages(),this.updatePopupSize(),this.alignPopupImages()},n.createPopupImages=function(){this.top=this.scene.add.image(0,0,c,l.POPUP_TOP),this.mid=this.scene.add.image(0,0,c,l.POPUP_MID),this.bottom=this.scene.add.image(0,0,c,l.POPUP_BOTTOM),this.add([this.top,this.mid,this.bottom])},n.updatePopupSize=function(){var e,t=(null==(e=this.payload)?void 0:e.forceHeightTop)||this.width*this.top.height/this.top.width;this.top.setWorldSize(this.width,t),this.bottom.setWorldSize(this.width,this.width*this.bottom.height/this.bottom.width),this.mid.setWorldSize(this.width,this.height-this.top.displayHeight-this.bottom.displayHeight)},n.alignPopupImages=function(){Phaser.Display.Align.In.Center(this.top,this,0,-this.mid.displayHeight/2-this.top.displayHeight/2),Phaser.Display.Align.In.Center(this.mid,this),Phaser.Display.Align.In.Center(this.bottom,this,0,this.mid.displayHeight/2+this.bottom.displayHeight/2)},n.setFrameTop=function(e,t,n){t||(t=this.top.displayWidth),n||(n=this.top.displayHeight),this.top.setFrame(e),this.top.setWorldSize(t,n)},(0,i.Z)(t,[{key:"onClose",set:function(e){this.setInteractive({useHandCursor:!0}),this.on(Phaser.Input.Events.GAMEOBJECT_POINTER_DOWN,e)}}]),t}(Phaser.GameObjects.Container);t.Z=h},625:function(e,t,n){"use strict";var i=n(81),a=n(83),s=n(45),r=n(14),o=n(103),c=n.n(o),l=n(118),h=n.n(l),u=n(88),d=n.n(u),p=n(85),g=n.n(p),f=n(47),m=n.n(f),v=n(104),E=n.n(v),S=n(87),A=n.n(S),y=n(129),T=n.n(y),I=n(102),C=n(201);function b(e,t){var n="undefined"!==typeof A()&&T()(e)||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){var n;if(!e)return;if("string"===typeof e)return O(e,t);var i=m()(n=Object.prototype.toString.call(e)).call(n,8,-1);"Object"===i&&e.constructor&&(i=e.constructor.name);if("Map"===i||"Set"===i)return E()(e);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return O(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var i=0;return function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function O(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var P=function(e){function t(t,n){var a,r;(r=e.call(this,t)||this).config=void 0,r.isEnable=void 0,r.maxHeight=void 0,r.isScrolling=void 0,r.boundTop=void 0,r.boundBottom=void 0,r.maskGraphics=void 0,r.objects=void 0,r._value=0,r.velocity=0,r.isScrollingSmooth=void 0,r.lastScrollY=void 0,r.isScrollingBack=void 0,r.scrollingBackTo=void 0,r.lastScrollYCount=0,r.hitArea=void 0,r.onScrollEvents=[],r.update=function(e,t){r.isScrollingSmooth&&r.velocity&&r.scrollingSmooth(t),r.isScrollingBack&&r.scrollingBack(t)},r.checkReachBound=function(){return r.isReachTop()||r.isReachBottom()},r.onMouseScroll=(0,C.D)((function(e,t,n){if(r.isEnable){var i;if(r.isScrolling=!0,r.checkReachBound())return r.lastScrollY=c()(i=r.lastScrollY).call(i,(function(){return 0})),void(r.isScrolling=!1);r.stopScrollingBack(),r.startScrollSmooth(-n*r.scrollSmooth/15)}}),100),r.onTouchScroll=function(e){if(r.isEnable){r.velocity&&r.stopScrollSmooth(),r.stopScrollingBack(),r.isScrolling=!0;var t=r.scene.game.world.getZoomRatio(),n=e.position,i=e.prevPosition,a=(n.y-i.y)/t,s=r.height*r.maxScrollOver,o=1;if(r.lastScrollY[++r.lastScrollYCount%r.lastScrollY.length]=a,r.isReachTop()&&a>=0){var c=(s-(r.value-r.marginTop))/s;o=Math.min(o,c)}if(r.isReachBottom()&&a<=0){var l=(s-(-r.maxHeight-r.value))/s;o=Math.min(o,l)}var h=a*o,u=r.maxScrollOver*r.height;r.value+h>r.marginTop+u?r.value=r.marginTop+u:r.value+h<-r.maxHeight-u?r.value=-r.maxHeight-u:r.value+=h,r.callOnScrollEvents(r.value,h)}},r.onTouchDown=function(){r.isEnable&&(r.velocity&&r.stopScrollSmooth(),r.stopScrollingBack())},r.onTouchEnd=function(){var e,t;if(r.isReachTop()&&(r.startScrollingBack(r.marginTop),r.stopScrollSmooth()),r.isReachBottom()&&(r.startScrollingBack(-r.maxHeight),r.stopScrollSmooth()),r.isScrolling){var n=h()(e=r.lastScrollY).call(e,(function(e,t){return e+t}))/r.lastScrollY.length;r.startScrollSmooth(n*r.scrollSmooth),r.lastScrollY=c()(t=r.lastScrollY).call(t,(function(){return 0}))}},r.config=(0,i.Z)({marginTop:0,marginBottom:0,acceleration:1400,maxScrollOver:.15,scrollSmooth:40,scrollingBackRate:5,useMask:!0},n);var o=n.width,l=n.height;return r.isEnable=!1,r.maxHeight=0,r.lastScrollY=d()(a=new Array(3)).call(a,0),r.setSize(o,l),r.createGroup(),r.createInput(),r.createEvents(),r.scene.add.existing((0,s.Z)(r)),r}(0,r.Z)(t,e);var n=t.prototype;return n.onScroll=function(e){this.onScrollEvents.push(e)},n.gotoTop=function(){this.value=this.config.marginTop},n.reset=function(){this.maxHeight=0,this.isScrolling=!1,this.isScrollingBack=!1,this.isScrollingSmooth=!1,this.gotoTop(),this.setEnable(!1)},n.createDebug=function(){this.drawDebugBox(16711680,.8)},n.setEnable=function(e){this.isEnable=e,e?this.setInteractive({draggable:!0,useHandCursor:!0}):this.disableInteractive()},n.addItem=function(e){this.addAt(e),this.objects.add(e);var t=e.y+e.height+this.marginBottom-this.height/2;this.maxHeight=Math.max(this.maxHeight,t,0),this.updateObjectVisible()},n.addItems=function(e){var t=this;this.addAt(e),this.objects.addMultiple(e);var n=c()(e).call(e,(function(e){return e.y+e.height+t.marginBottom-t.height/2}));this.maxHeight=Math.max(this.maxHeight,Math.max.apply(Math,n),0),this.updateObjectVisible()},n.clearItem=function(){this.objects.clear(!0,!0),this.reset()},n.getChildren=function(){var e;return g()(e=this.objects.getChildren()).call(e,(function(e){return e.active}))},n.createBound=function(e,t,n,i){this.boundTop=this.scene.make.image({key:e,frame:t}),this.boundBottom=this.scene.make.image({key:e,frame:t}),i&&(this.boundTop.setTint(i),this.boundBottom.setTint(i)),this.boundTop.setAlpha(0,0,0,0),this.boundBottom.setAlpha(0,0,0,0),this.boundTop.setDepth(I.Z.PRIORITY),this.boundBottom.setDepth(I.Z.PRIORITY);var a=this.width,s=n,r=this.getWorldPosition(),o=r.x,c=r.y;this.boundTop.setDisplaySize(a,s),this.boundBottom.setDisplaySize(a,s),this.boundTop.setY(-this.displayHeight/2+s/2+c-this.y-1),this.boundBottom.setY(this.displayHeight/2-s/2+c-this.y+1),this.boundTop.setX(o-this.x),this.boundBottom.setX(o-this.x),this.add([this.boundTop,this.boundBottom])},n.createMask=function(e){var t;null==(t=this.maskGraphics)||t.destroy(),this.maskGraphics=this.scene.make.graphics({fillStyle:{color:255,alpha:1},visible:!0}),this.maskGraphics.setName("MaskGraphics");var n=this.width,i=this.height;e&&this.maskGraphics.setScale(e),this.maskGraphics.fillRoundedRect(0-n/2,0-i/2,n,i,0),this.config.useMask&&this.setMask(this.maskGraphics.createGeometryMask()),this.scene.events.off(Phaser.Scenes.Events.UPDATE,this.updateMask,this),this.scene.events.on(Phaser.Scenes.Events.UPDATE,this.updateMask,this)},n.updateMask=function(){var e=this.getWorldPosition(),t=e.x,n=e.y;this.maskGraphics.setPosition(t,n)},n.createGroup=function(){this.objects=this.scene.make.group({})},n.updateObject=function(e){this.objects.incY(e),this.updateObjectVisible()},n.updateObjectVisible=function(){for(var e=this.objects.getChildren(),t=0;t<e.length;t++){var n=e[t];n.y+n.height<-this.height/2||n.y-n.height>this.height/2?n.setVisible(!1):n.setVisible(!0)}},n.createInput=function(){this.setInteractive({draggable:!0,useHandCursor:!0}),this.on(Phaser.Input.Events.POINTER_WHEEL,this.onMouseScroll),this.on(Phaser.Input.Events.GAMEOBJECT_DRAG,this.onTouchScroll),this.on(Phaser.Input.Events.GAMEOBJECT_POINTER_DOWN,this.onTouchDown),this.scene.input.on(Phaser.Input.Events.POINTER_UP,this.onTouchEnd,this)},n.createEvents=function(){this.scene.events.on(Phaser.Scenes.Events.UPDATE,this.update)},n.callOnScrollEvents=function(e,t){for(var n,i=b(this.onScrollEvents);!(n=i()).done;){(0,n.value)(this,e,t)}},n.scrollingBack=function(e){var t=(this.scrollingBackTo-this.value)*e*this.scrollingBackRate/1e3;this.value+=t,Math.abs(this.scrollingBackTo-this.value)<.5&&(this.value=this.scrollingBackTo,this.stopScrollingBack()),this.callOnScrollEvents(this.value,t)},n.startScrollingBack=function(e){this.isScrollingBack=!0,this.scrollingBackTo=e},n.stopScrollingBack=function(){this.isScrollingBack=!1},n.scrollingSmooth=function(e){var t=this.velocity*e/1e3;this.value+=t;var n=Math.abs(this.velocity)/this.velocity;this.velocity-=n*this.acceleration*e/1e3,Math.abs(this.velocity)<this.acceleration*e/1e3&&this.stopScrollSmooth(),this.isReachTop()&&(this.startScrollingBack(this.marginTop),this.stopScrollSmooth()),this.isReachBottom()&&(this.startScrollingBack(-this.maxHeight),this.stopScrollSmooth()),this.callOnScrollEvents(this.value,t)},n.startScrollSmooth=function(e){this.isScrollingSmooth=!0,e&&(e*this.velocity>0?this.velocity+=e:this.velocity=e)},n.stopScrollSmooth=function(){this.isScrollingSmooth=!1,this.isScrolling=!1,this.velocity=0},n.isReachTop=function(){return this.value>this.marginTop},n.isReachBottom=function(){return-this.value>this.maxHeight},(0,a.Z)(t,[{key:"marginTop",get:function(){return this.config.marginTop}},{key:"marginBottom",get:function(){return this.config.marginBottom}},{key:"acceleration",get:function(){return this.config.acceleration}},{key:"maxScrollOver",get:function(){return this.config.maxScrollOver}},{key:"scrollSmooth",get:function(){return this.config.scrollSmooth}},{key:"scrollingBackRate",get:function(){return this.config.scrollingBackRate}},{key:"value",get:function(){return this._value},set:function(e){var t=e-this._value;this._value=e,this.updateObject(t)}}]),t}(Phaser.GameObjects.Container);t.Z=P},102:function(e,t){"use strict";t.Z={BACKGROUND:1,FIREWORKS:5,ITEM:10,LOGO:15,BUTTON:20,TILE:25,TEXT:30,ENCOURAGING:31,EFFECT:32,MESSAGE:33,POPUP:999,PRIORITY:80,DEBUG:90,DICE:99,PIECE:99,ON_TOP:1e4}},465:function(e,t){"use strict";t.Z={min:18,max:60}},453:function(e,t){"use strict";t.Z={PRIMARY:{KEY:"font-main",TEXTURE:"./assets/fonts/primary.png",DATA:"./assets/fonts/primary.xml"},PRIMARY_LIGHT:{KEY:"font-main-light",TEXTURE:"./assets/fonts/primary-light.png",DATA:"./assets/fonts/primary-light.xml"},NUMBER_LIGHT:{KEY:"number-light",TEXTURE:"./assets/fonts/number-light.png",DATA:"./assets/fonts/number-light.xml"},NUMBER_DARK:{KEY:"number-dark",TEXTURE:"./assets/fonts/number-dark.png",DATA:"./assets/fonts/number-dark.xml"},FONT_FAMILY:'-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Oxygen,Ubuntu,Cantarell,"Fira Sans","Droid Sans","Helvetica Neue",sans-serif',FONT_FAMILY_ARIAL:"Arial"}},204:function(e,t){"use strict";var n=GameCore.Utils.Image.getImageScale(),i={AVATAR:{KEY:"avatar",FILE:"./assets/images/others/avatar.png",CONFIG:{}},ICON_EARTH:{KEY:"icon-earth",FILE:"./assets/images/others/icon-earth.png",CONFIG:{}},BACKGROUND:{KEY:"background",KEY_LANDSCAPE:"background-landscape",KEY_PORTRAIT:"background-portrait",FILE_LANDSCAPE:"./assets/images/"+n+"x/background-landscape.jpg",FILE_PORTRAIT:"./assets/images/"+n+"x/background-portrait.jpg",CONFIG:{}}};t.Z=i},101:function(e,t,n){"use strict";var i=n(81),a=GameCore.Utils.Image.getImageScale(),s={TUTORIAL:{KEY:"tutorial-resources",TEXTURE:"./assets/textures/"+a+"x/tutorial-resources.png",JSON:"./assets/textures/"+a+"x/tutorial-resources.json",FRAME:{HAND:"hand",BLANK:"blank",BUTTON_BROWN:"brown"}},DEFAULT:{KEY:"default-resources",TEXTURE_32BIT_1x:["./assets/textures/"+a+"x{langcode}/default-resources-32-0.png"],TEXTURE_32BIT_2x:["./assets/textures/"+a+"x{langcode}/default-resources-32-0.png","./assets/textures/"+a+"x{langcode}/default-resources-32-1.png"],JSON:"./assets/textures/"+a+"x{langcode}/default-resources.json",URL:"./assets/textures/"+a+"x{langcode}/",FRAME:{BLANK:"blank",LOGO:"logo",TEXT_LOADING:"loading",BORDER_BOTTOM_PANEL:"border-bottom-panel",BOTTOM_PANEL:"bottom-panel",BOTTOM_LINE:"bottom-line",GLARE:"glare",TITLE_YOUR_SCORE:"title-your-score",BG_YOUR_SCORE:"bg-your-score",LEAF:"leaf",BEST_SCORE_FRAME:"best-score-frame",BEST_SCORE_FRAME_LONG:"best-score-frame-long",FOOTER:"footer",SCORE_PANEL:"score-panel",SCORE_PANEL_DARK:"score-panel-dark",BG_PROGRESS_CIRCLE:"bg-progress-circle",BG_TEXT_TARGET_PANEL:"text-target-panel",WOOD_PANEL:"wood-panel",BORDER_DAILY:"border-daily",BG_STREAK:"bg-streak",BG_COMBO:"bg-combo",LEVEL_PLAYED:"bg/level-played",LEVEL_PLAYING:"bg/level-playing",LEVEL_LOCKED:"bg/level-locked",BG_DARK:"bg/bg-dark",BG_TOP:"bg/bg-top",BG_MIDDLE:"bg/bg-middle",BG_BOTTOM:"bg/bg-bottom",BG_TOP_2:"bg/bg-top-2",BG_MIDDLE_2:"bg/bg-middle-2",BG_BOTTOM_2:"bg/bg-bottom-2",PRELOADER:"preloader/dual-ring",LEADERBOARD_TAB_ON:"leaderboards/tab-on",LEADERBOARD_TAB_OFF:"leaderboards/tab-off",LEADERBOARD_BG_TOP:"leaderboards/bg-top",LEADERBOARD_BG_MIDDLE:"leaderboards/bg-middle",LEADERBOARD_BG_BOTTOM:"leaderboards/bg-bottom",LEADERBOARD_BG_ITEM:"leaderboards/bg-item",LEADERBOARD_BORDER_LEFT:"leaderboards/border-left",LEADERBOARD_BORDER_RIGHT:"leaderboards/border-right",PREFIX_LEADERBOARD_BG_ITEM:"leaderboards/bg-item-",PREFIX_LEADERBOARD_BG_ITEM_0:"leaderboards/bg-item-0",AVATAR_BORDER:"avatar/border",AVATAR_BORDER_BIG:"avatar/border-big",AVATAR_BORDER_CHALLENGE:"avatar/border-challenge",AVATAR_BACKGROUND:"avatar/background",POPUP_TOP:"popup/top",POPUP_TOP_DARK:"popup/top-dark",POPUP_MID:"popup/middle",POPUP_BOTTOM:"popup/bottom",POPUP_CONTENT_BACKGROUND:"popup/background",POPUP_SCORE_PANEL:"popup/score-panel",ICON_ADS:"icons/flat-ad",ICON_CUP_GOLD:"icons/cup-gold",ICON_CUP_SILVER:"icons/cup-silver",ICON_CUP_COPPER:"icons/cup-bronze",ICON_SOUND:"icons/sound",ICON_VIBRATE:"icons/vibrate",ICON_MUSIC:"icons/music",ICON_RANK:"icons/rank",ICON_PLAY:"icons/play",ICON_I_PLAY:"icons/i-play",ICON_PLAY_GREEN:"icons/play-green",ICON_SHARE:"icons/share",ICON_INVITE:"icons/invite",ICON_FLAG:"icons/milestone",ICON_BROWN_JOURNEY:"icons/brown-journey",ICON_WHITE_JOURNEY:"icons/white-journey",ICON_SWORD:"icons/sword",ICON_SWORD_BLUE:"icons/sword-blue",ICON_SETTING:"icons/setting",ICON_REPLAY:"icons/replay",ICON_RETRY:"icons/retry",ICON_HOME:"icons/home",ICON_BACK:"icons/back",ICON_BATTLE:"icons/battle",ICON_CUP:"icons/cup",ICON_SHARE_BLUE:"icons/share-blue",ICON_CROWN:"icons/crown",ICON_CROWN_BIG:"icons/crown-big",ICON_CLOCK:"icons/clock",ICON_DAILY:"icons/icon-daily",ICON_JOURNEY:"icons/icon-journey",ICON_JOURNEY_2:"icon-journey",ICON_DOT_RED:"icons/dot",ICON_STAR:"icons/star",ICON_PLUS:"icons/plus",ICON_CHECK:"icons/check",BUTTON_CLOSE:"buttons/close",BUTTON_BLUE:"buttons/blue",BUTTON_GREEN:"buttons/green",BUTTON_GREEN_BIG:"buttons/green-big",BUTTON_DARK_BLUE:"buttons/dark-blue",BUTTON_DARK_BLUE_BIG:"buttons/dark-blue-big",BUTTON_BROWN:"buttons/brown",BUTTON_GREEN_LARGE:"buttons/green-large",BUTTON_PLAY:"buttons/play",BUTTON_RANDOM:"buttons/random",BUTTON_CHALLENGE_LIGHT:"buttons/challenge_light",BUTTON_SHARE_DARK:"buttons/share",BUTTON_MINOR:"buttons/minor",BUTTON_CIRCLE:"buttons/circle-button",BUTTON_TOGGLE_OFF:"buttons/toggle-off",BUTTON_TOGGLE_ON:"buttons/toggle-on",BUTTON_DARK_BLUE_SMALL:"buttons/dark-blue-small",BUTTON_SKIP:"buttons/skip",DAILY_BORDER:"daily-challenge/border",DAILY_BACKGROUND:"daily-challenge/bg",DAILY_TITLE_PANEL:"daily-challenge/title-panel",DAILY_BORDER_TOP:"daily-challenge/top-panel",DAILY_BORDER_MIDDLE:"daily-challenge/middle-panel",DAILY_BORDER_BOTTOM:"daily-challenge/bottom-panel",DAILY_BG_ITEM_LIGHT:"daily-challenge/bg-item-light",DAILY_BG_ITEM_DARK:"daily-challenge/bg-item-dark",DAILY_BG_TIME:"daily-challenge/time-panel",NO_THANK_TEXT:"texts/no-thank",TEXT_SECOND_CHANGE:"texts/second-chance",TEXT_VS:"texts/vs",TEXT_LOSE:"texts/lose",TEXT_WIN:"texts/win",TEXT_DRAW:"texts/draw",TEXT_CONTINUE:"texts/continue",TEXT_LEADER_BOARD:"texts/leader-board",TEXT_WORLD:"texts/world",TEXT_WORLD_DISABLE:"texts/world-disable",TEXT_FRIENDS:"texts/friends",TEXT_FRIENDS_DISABLE:"texts/friends-disable",TEXT_PLAY_WITH:"texts/play-with",TEXT_PLAY_WITH_BLUE:"texts/play-with-blue",TEXT_JOURNEY:"texts/text-journey",TEXT_SETTING:"texts/setting",TEXT_OFF:"texts/off",TEXT_ON:"texts/on",TEXT_REPLAY:"texts/replay",TEXT_YOUR_SCORE:"texts/your-score",TEXT_WAITING_OPPONENT:"texts/waiting-for-opponent",TEXT_SINGLE:"texts/play-single",TEXT_RETRY:"texts/text-retry",TEXT_LEVEL_FAIL:"texts/level-failed",TEXT_CONGRATULATION:"texts/congratulations",TEXT_NEXT_LEVEL:"texts/text-next-level",TEXT_START_OVER:"texts/start-over",TEXT_SHARE_BLUE:"texts/text-share",TEXT_PLAY:"texts/play",TEXT_MISSION:"texts/mission",TEXT_NEXT_MILESTONE:"texts/next-milestone",TEXT_FIRST_MILESTONE:"texts/first-milestone",TEXT_COLLECT:"texts/collect",TEXT_TARGET_SCORE:"texts/target-score",TEXT_YES:"texts/yes",TEXT_NO:"texts/no",TEXT_TUTORIAL:"texts/text-tutorial",TEXT_DAILY_CHALLENGE:"texts/daily-challenge",TEXT_START:"texts/start",TEXT_RESULT:"texts/result",TEXT_RANKING:"texts/text-ranking",TEXT_INVITE_FRIENDS:"texts/invite-friends",TEXT_KEEP_PLAYING:"texts/keep-playing",TEXT_OUT_OF_LIVE:"texts/out-of-live",TEXT_REFILL_LIVES:"texts/refill-lives",LIVES_HEART:"lives/heart",LIVES_TIME_BLOCK:"lives/time-block",LIVES_TIME_BLOCK_2:"lives/time-block-2",PANEL_BEST_SCORE:"ui-ngang/khung-best-score",PANEL_MISSION:"ui-ngang/khung-mission",PANEL_NEXT_BLOCK:"ui-ngang/khung-next-block",PANEL_SCORE:"ui-ngang/khung-score",TEXT_NEXT_BLOCK:"ui-ngang/text-next-block",TEXT_SCORE:"ui-ngang/text-score",TEXT_MISSION_LANDSCAPE:"ui-ngang/text-mission"}},EFFECTS:{KEY:"effects-resources",TEXTURE:"./assets/textures/"+a+"x{langcode}/effects-resources.png",JSON:"./assets/textures/"+a+"x{langcode}/effects-resources.json",FRAME:{BLANK:"blank",GLOW_CIRCLE:"glow-circle",GLARE_CROSS:"glare-cross",DUST:"dust",DUST_YELLOW:"dust-yellow",FX_STAR:"star",FX_STAR_YELLOW:"star-yellow",FX_CONFETTI_SMALL_1:"confetti/small-1",FX_CONFETTI_SMALL_2:"confetti/small-2",FX_CONFETTI_SMALL_3:"confetti/small-3",FX_CONFETTI_SMALL_4:"confetti/small-4",FX_CONFETTI_HEXAGON:"confetti/hexagon-",FX_CONFETTI_RIBBON:"ribbon",TEXT_COOL:"text/text_cool",TEXT_EXCELLENT:"text/text_excellent",TEXT_GOOD:"text/text_good",FX_COMET:"comet",FX_SPARK:"spark",FX_CIRCLE:"circle",FX_CIRCLE_LIGHT:"circle-light",FX_GLOW_LIGHT:"glow-light",FX_GLOW_SMALL:"glow-small",FX_STAR_WHITE:"star-white",FX_FIREWORKS_SMALL:"fireworks/small",FX_FIREWORKS_BIG_0:"fireworks/big-explosive-0",FX_FIREWORKS_BIG_1:"fireworks/big-explosive-1",FX_FIREWORKS_SOAR_LINE:"fireworks/soar-line",FX_FIREWORKS_SOAR_CIRCLE:"fireworks/soar-circle",PREFIX_ANIMATION_RIBBON_CONFETTI_A:"ribbon/falling-confetti/confetti-a/confetti-a-",PREFIX_ANIMATION_RIBBON_CONFETTI_B:"ribbon/falling-confetti/confetti-b/confetti-b-",PREFIX_ANIMATION_RIBBON_CONFETTI_C:"ribbon/falling-confetti/confetti-c/confetti-c-",PREFIX_ANIMATION_RIBBON_CONFETTI_D:"ribbon/falling-confetti/confetti-d/confetti-d-",ANIMATION_STAR_X:"star-x/star-",ANIMATION_STAR_Y:"star-y/star-"}},ANIMATION_SCENE:{KEY:"effects-resources",PATH:"./assets/textures/"+a+"x/",JSON:"./assets/textures/"+a+"x/animation-scene-resources.json",FRAME:{BLANK:"blank",COIN:"coins/coin",COIN_SMALL:"coins/coin-small",COIN_SMALL_GREY:"coins/coin-small-grey",FX_SPARK_YELLOW:"yellow-spark",FX_CONFETTI_RIBBON:"ribbon/ribbon"}},GAMEPLAY:{KEY:"gameplay-resources",TEXTURE:"./assets/textures/"+a+"x/gameplay-resources.png",TEXTURE_32BIT:"./assets/textures/"+a+"x/gameplay-resources-32.png",JSON:"./assets/textures/"+a+"x/gameplay-resources.json",FRAME:{BLANK:"blank",BG_SCORE:"bg-score",BG_MAIN_SCORE:"bg-main-score",BOARD:"board",VIOLET_GLOW:"violet-glow",MASK:"mask",FLAG:"flag",DUST:"dust",CUP_GLARE:"cup-glare",HAND:"hand",AVATAR_BORDER:"avatars/border",AVATAR_BACKGROUND:"avatars/background",ICON_SETTING:"icons/setting",ICON_CUP:"icons/cup",ICON_CHECK:"icons/check",ICON_STAR:"icons/star",ICON_STAR_1:"icons/star-1",ICON_HOME:"icons/home",ICON_ADD_FRIEND:"icons/add-friends",ICON_BATTLE:"icons/battle",TEXT_NEXT_LEVEL:"text/next-level",BUTTON_WOOD_SMALL:"buttons/wood-small",BUTTON_SKIP:"buttons/button-skip",PROGRESS_BG_LEFT:"progress/bg-left",PROGRESS_BG_MID:"progress/bg-mid",PROGRESS_BG_RIGHT:"progress/bg-right",PROGRESS_BAR_LEFT:"progress/bar-left",PROGRESS_BAR_MID:"progress/bar-mid",PROGRESS_BAR_RIGHT:"progress/bar-right",PROGRESS_BAR_RIGHT_WHITE:"progress/bar-right-white"}},GAMEPLAY_32:{KEY:"gameplay-32-default-resources",TEXTURE:"./assets/textures/"+a+"x/gameplay-resources-32-default.png",JSON:"./assets/textures/"+a+"x/gameplay-resources-32-default.json",FRAME:{GEM:"gem/gem",GEM_LIGHT:"gem/gem_light",GEM_SILVER:"gem/gem_silver",GEM_TRANSPARENT:"gem/gem_transparent",GEM_WHITE:"gem/gem_white",GEM_GLARE:"gem/gem_glare",GEM_HIGHT_LIGHT:"gem/gem_highlight",GEM_DIAMOND_10:"gem/diamond/diamond-10",GEM_DIAMOND_11:"gem/diamond/diamond-11",GEM_DIAMOND_12:"gem/diamond/diamond-12",GEM_DIAMOND_13:"gem/diamond/diamond-13",GEM_DIAMOND_14:"gem/diamond/diamond-14",GEM_DIAMOND_15:"gem/diamond/diamond-15",GEM_DIAMOND_10_LIGHT:"gem/diamond/diamond-10_light",GEM_DIAMOND_11_LIGHT:"gem/diamond/diamond-11_light",GEM_DIAMOND_12_LIGHT:"gem/diamond/diamond-12_light",GEM_DIAMOND_13_LIGHT:"gem/diamond/diamond-13_light",GEM_DIAMOND_14_LIGHT:"gem/diamond/diamond-14_light",GEM_DIAMOND_15_LIGHT:"gem/diamond/diamond-15_light",GEM_RUBY_20:"gem/ruby/ruby-20",GEM_SAPPHIRE_30:"gem/sapphire/sapphire-30",BLOCK_GRADIENT_PREFIX:"gem/block_gradient/block_color"}},DEMO_SPINE:{KEY:"demo-spine",jsonPATH:"./assets/spines/demo/demo.json",atlasPATH:"./assets/spines/demo/demo.atlas"}};GameCore.Utils.Valid.isDebugger()&&(s.EFFECTS.FRAME=(0,i.Z)({},s.ANIMATION_SCENE.FRAME,s.EFFECTS.FRAME)),t.Z=s},205:function(e,t,n){"use strict";n.d(t,{Co:function(){return s},K5:function(){return r}});var i=n(87),a=n.n(i),s={BOOT_SCENE:"BOOT_SCENE",LOAD_SCENE:"LOAD_SCENE",GAME_SCENE:"GAME_SCENE",GLOBAL_SCENE:"GLOBAL_SCENE",DASHBOARD_SCENE:"DASHBOARD_SCENE",GAME_OVER_SCENE:"GAME_OVER_SCENE",LEADERBOARD_SCENE:"LEADERBOARD_SCENE",JOURNEY_SCENE:"JOURNEY_SCENE",LEVEL_SCENE:"LEVEL_SCENE",TEST_SCENE:"TEST_SCENE",ANIMATIONS_SCENE:"ANIMATIONS_SCENE"},r={SWITCH:a()("SWITCH"),LAUNCH:a()("LAUNCH"),RUN:a()("RUN")};!function(e){e[e.SCENE=0]="SCENE",e[e.POPUP=1]="POPUP"}({})},452:function(e,t,n){"use strict";n.d(t,{Ks:function(){return a},o4:function(){return i}});var i={ALERT_SCREEN:"ALERT_SCREEN",NOTIFY_SCREEN:"NOTIFY_SCREEN",REWARD_SCREEN:"REWARD_SCREEN",RESCUE_SCREEN:"RESCUE_SCREEN",SETTINGS_SCREEN:"SETTINGS_SCREEN",BEST_SCORE_SCREEN:"BEST_SCORE_SCREEN",RESULT_SCREEN:"RESULT_SCREEN",DAILY_REWARD_SCREEN:"DAILY_REWARD_SCREEN",DAILY_MISSIONS_SCREEN:"DAILY_MISSIONS_SCREEN",GAME_OVER_SCREEN:"GAME_OVER_SCREEN",TUTORIAL_PLAY_SCREEN:"TUTORIAL_PLAY_SCREEN",LEADER_BOARD_SCREEN:"LEADER_BOARD_SCREEN",MINI_JOURNEY_SCREEN:"MINI_JOURNEY_SCREEN",DAILY_CHALLENGE_SCREEN:"DAILY_CHALLENGE_SCREEN",YOUR_SCORE_SCREEN:"YOUR_SCORE_SCREEN",LEVEL_SCREEN:"LEVEL_SCREEN",MISSION_SCORE_COMPLETE_SCREEN:"MISSION_SCORE_COMPLETE_SCREEN",MISSION_COLLECTION_COMPLETE_SCREEN:"MISSION_COLLECTION_COMPLETE_SCREEN",MISSION_FAIL_SCREEN:"MISSION_FAIL_SCREEN",COLLISION_COMPLETED_SCREEN:"COLLISION_COMPLETED_SCREEN",NO_SPACE_LEFT_SCREEN:"NO_SPACE_LEFT_SCREEN",SCORE_REACHED_SCREEN:"SCORE_REACHED_SCREEN",NEXT_TARGET_SCORE_SCREEN:"NEXT_TARGET_SCORE_SCREEN",COLLECTION_ITEMS_SCREEN:"COLLECTION_ITEMS_SCREEN",TARGET_SCORE_SCREEN:"TARGET_SCORE_SCREEN",LUCKY_REWARD_SCREEN:"LUCKY_REWARD_SCREEN",CLAIM_HEART_SCREEN:"CLAIM_HEART_SCREEN",START_OVER_SCREEN:"START_OVER_SCREEN"},a={SCREEN:200,POPUP:300,PRIORITY:999}},207:function(e,t){"use strict";t.Z={BUTTON_CLICK:"button_click",CONGRATULATION:"congratulation",DAILY_REWARD:"daily_reward",GAME_OVER_SCENE:"game_over_scene",GAME_OVER:"game_over",POPUP_OFF:"popup_off",POPUP_SHOW:"popup_show",SCORE_COUNT:"score_count",PIECE_PICK:"piece_pick",PIECE_DROP:"piece_drop",PIECE_INVALID_MOVE:"piece_invalid_move",BOARD_GAME_OVER:"board_end",RESCUE_TIME:"rescue_timer",EAT_BLOCK:"eat_block",GOOD:"good",COOL:"cool",EXCELLENT:"excellent",SCORE_REACHED:"reach_score",TARGET_REACHED:"reach_goal",WAIT_OPPONENT:"wait_opponent",WIN:"win",LOSE:"lose",DRAW:"draw",FIREWORKS_BIG:"fireworks_big",FIREWORKS_SOAR:"fireworks_soar",FIREWORKS_SMALL:"fireworks_small"}},627:function(e,t,n){"use strict";var i=n(45),a=n(14),s=n(101),r=n(126),o=s.Z.EFFECTS,c=o.KEY,l=o.FRAME,h=function(e){function t(t,n){var a;return(a=e.call(this,t,c,l.BLANK)||this).config=void 0,a.emitter=void 0,a.config=n||{},a.scene.add.existing((0,i.Z)(a)),a}(0,a.Z)(t,e);var n=t.prototype;return n.createEmitters=function(){var e=l.FX_CONFETTI_SMALL_1,t=l.FX_CONFETTI_SMALL_2,n=l.FX_CONFETTI_SMALL_3,i=l.FX_CONFETTI_SMALL_4,a=1/GameCore.Utils.Image.getImageScale(),s={on:!1,particleBringToTop:!0,frame:[e,t,n,i],tint:[14223402,1021804,5420529,16702052],timeScale:1,frequency:300,maxParticles:120,gravityY:-10,speedX:{min:-100,max:100},speedY:{min:80,max:250},alpha:{start:1,end:.8},rotate:{start:0,end:1080},scale:{min:.8*a,max:2*a},angle:{min:20,max:160},lifespan:{min:8e3,max:12e3}},o=(0,r.TS)(s,this.config);this.emitter=this.createEmitter(o)},n.run=function(e,t,n){this.stop(),this.emitter.setQuantity(e),this.emitter.setPosition(t,n),this.emitter.start()},n.explode=function(e,t,n){this.emitter||this.createEmitters(),this.emitter.explode(e,t,n)},n.stop=function(){var e,t,n;null==(e=this.emitter)||e.killAll(),null==(t=this.emitter)||t.stop(),null==(n=this.emitter)||n.remove(),this.createEmitters()},t}(Phaser.GameObjects.Particles.ParticleEmitterManager);t.Z=h},464:function(e,t){"use strict";t.Z={LAYOUT_UPDATE:"layout-update"}},463:function(e,t,n){"use strict";n.d(t,{Z:function(){return p}});var i=n(14),a=n(85),s=n.n(a),r=n(82),o=function(e){function t(t,n,i){var a;return(a=e.call(this,t,0,0,n,i)||this).setOrigin(0,0),a}return(0,i.Z)(t,e),t}(Phaser.GameObjects.Zone),c=n(449),l=n(465),h=n(205),u=n(204),d=n(464),p=function(e){(0,i.Z)(n,e);var t=n.prototype;function n(){var t;return(t=e.call(this,{visible:!1})||this).unsubscribeList=void 0,t.gameZone=void 0,t.background=void 0,t.handleOpenScene=function(){t.logPageviewOnOpen(),t.logEventOpen(),t.scaleGame()},t.handleResize=function(){if(t.background&&t.gameZone){var e=t.world.getResizeEventData(),n=e.width,i=e.height;t.gameZone.setSize(n,i),t.background.setPosition(n/2,i/2),t.background.setDisplaySize(n,i),t.events.emit(d.Z.LAYOUT_UPDATE),t.updateBackgroundImage()}},t.removeStateChange=function(){t.unsubscribeList.forEach((function(e){return e()}))},t}return t.updateBackgroundImage=function(){var e=this,t=u.Z.BACKGROUND.KEY_PORTRAIT,n=u.Z.BACKGROUND.FILE_PORTRAIT;if(this.world.isLandscape()&&(t=u.Z.BACKGROUND.KEY_LANDSCAPE,n=u.Z.BACKGROUND.FILE_LANDSCAPE),this.textures.exists(t))this.handleLoadCompleteBackground(t);else{this.load.image(t,n),this.load.start();this.textures.on(Phaser.Textures.Events.ADD,(function n(i){t==i&&(e.handleLoadCompleteBackground(i),e.textures.off(Phaser.Textures.Events.ADD,n))}))}},t.handleLoadCompleteBackground=function(e){for(var t=this.textures.get(u.Z.BACKGROUND.KEY),n=this.textures.get(e),i=0;i<t.source.length;i++)t.source[i].glTexture=n.source[0].glTexture,t.source[i].glIndex=n.source[0].glIndex,t.source[i].glIndexCounter=n.source[0].glIndexCounter},t.create=function(){var e=this;this.events.on("wake",this.handleOpenScene),this.events.on("resume",this.handleOpenScene),this.events.on("create",this.handleOpenScene),this.world.events.on(c.Z.RESIZE,this.handleResize),this.scaleGame(),this.createGameZone();var t=GameCore.Configs.Game;this.events.on(Phaser.Scenes.Events.UPDATE,(function(){t.AutoDropFps&&e.autoUpdateFPS()}))},t.scaleGame=function(){var e=this.getCamera("main"),t=this.world.getZoomRatio(),n=this.world.getWorldSize(),i=n.width,a=n.height;e.setZoom(t),e.centerOn(i/2,a/2)},t.createGameZone=function(){var e=this.world.getWorldSize(),t=e.width,n=e.height;this.gameZone=new o(this,t,n)},t.autoUpdateFPS=function(){this.allowUpdateFPS()&&(this.tweenPlaying()||this.particlePlaying()?this.game.updateFps(l.Z.max):this.game.updateFps(l.Z.min))},t.allowUpdateFPS=function(){return this.scene.key===h.Co.GAME_SCENE||this.scene.key===h.Co.JOURNEY_SCENE},t.tweenPlaying=function(){for(var e=this.tweens.getAllTweens(),t=0;t<e.length;t++)if(e[t].isPlaying())return!0;return!1},t.particlePlaying=function(){var e=this.getAllParticles();if(!e)return!0;var t=!1;return e.forEach((function(e){e.emitters.list.forEach((function(e){e.alive&&e.alive.length>0&&(t=!0)}))})),t},t.getAllParticles=function(){if(this.input.enabled&&this.scene.isActive()&&!this.scene.isPaused()){var e=this.children.list;return!e||e.length<=0?[]:s()(e).call(e,(function(e){return"ParticleEmitterManager"===e.type}))}},t.getCamera=function(e){return"main"===e?this.cameras.main:this.cameras.getCamera(e)},t.createMask=function(e){void 0===e&&(e=1),this.getCamera("main").setBackgroundColor("rgba(0, 0, 0, "+e+")")},t.fontSize=function(e){return e/2.4},t.createBackground=function(e,t,n,i){try{this.background?(this.background.setTexture(e),t&&this.background.setFrame(t)):this.background=this.make.image({key:e,frame:t}),this.background.setName(e);var a=this.gameZone,s=a.displayWidth,r=a.displayHeight;this.background.setDisplaySize(s,r),GameCore.Utils.Valid.isNumber(n)&&this.background.setAlpha(n),GameCore.Utils.Valid.isNumber(i)&&this.background.setTint(i),Phaser.Display.Align.In.Center(this.background,this.gameZone)}catch(o){}},t.handleStateChange=function(e){var t=this;this.unsubscribeList=[],e.forEach((function(e){var n=e.selector,i=e.callback,a=t.storage.watch(n,i);t.unsubscribeList.push(a)})),this.events.once("sleep",this.removeStateChange),this.events.once("destroy",this.removeStateChange),this.events.once("shutdown",this.removeStateChange)},t.logPageviewOnOpen=function(){this.analytics.pageview(this.scene.key)},t.logEventOpen=function(){this.analytics.event(r._.SCREEN_OPEN,{screen_name:this.getSceneName()})},t.getSceneName=function(){return GameCore.Utils.String.toUpperCamelCase(this.scene.key.toLowerCase())},n}(Phaser.Scene)},206:function(e,t,n){"use strict";n.d(t,{Z:function(){return V}});var i=n(83),a=n(14),s=n(63),r=n.n(s),o=(n(462),n(460)),c=n(101),l=n(205),h=n(452),u=n(451),d=(0,n(448).P1)([function(e){return e.scene.currentSceneKey}],(function(e){return e})),p=n(202),g=n(463),f=n(45),m=n(453),v=n(102),E=c.Z.DEFAULT,S=E.KEY,A=E.FRAME,y=function(e){function t(t){var n;return(n=e.call(this,t,0,0)||this).fps=0,n.fpsString="FPS: %1",n.fpsText=void 0,n.background=void 0,n.lastUpdate=void 0,n.update=function(e){if(!(e-n.lastUpdate<800)){n.lastUpdate=e;var t=Math.floor(n.scene.game.loop.actualFps);n.setFps(t)}},n.createFps(),n.setDepth(v.Z.DEBUG),n.scene.add.existing((0,f.Z)(n)),n.scene.events.on(Phaser.Scenes.Events.UPDATE,n.update),n}(0,a.Z)(t,e);var n=t.prototype;return n.setFps=function(e){this.fps=e;var t=Phaser.Utils.String.Format(this.fpsString,[e]);this.fpsText.setText(t)},n.createFps=function(){this.background=this.scene.make.image({key:S,frame:A.BLANK}),this.background.setName("BG"),this.background.setTint(13801480),this.background.setWorldSize(45,25),this.fpsText=this.scene.make.bitmapText({size:this.scene.fontSize(14),text:this.fpsString,font:m.Z.PRIMARY.KEY,origin:{x:.5,y:.5}}),this.fpsText.setName("FPS Meter"),Phaser.Display.Align.In.Center(this.fpsText,this.background),this.add([this.background,this.fpsText]),this.setFps(0)},t}(Phaser.GameObjects.Container),T=y,I=function(e){function t(t){var n;if((n=e.call(this,t,0,0)||this).performance=void 0,n.memory=0,n.maxMemoryLimit=void 0,n.maxPercentThreshold=void 0,n.normalColor=3459162,n.warningColor=16768343,n.alarmColor=15812200,n.memoryString="Memory: %1MB / %2MB",n.memoryText=void 0,n.lastUpdate=void 0,n.update=function(e){if(!(e-n.lastUpdate<1e3)){n.lastUpdate=e;var t=n.performance.memory.usedJSHeapSize,i=1048576*n.maxMemoryLimit,a=Math.round(t/1048576);n.setMemory(a),n.memoryText.setTint(n.normalColor),t>n.maxPercentThreshold/100*i&&n.memoryText.setTint(n.warningColor),t>i&&n.memoryText.setTint(n.alarmColor)}},n.performance=window.performance,n.createMemory(),n.setDepth(v.Z.DEBUG),n.scene.add.existing((0,f.Z)(n)),!n.isSupport())return n.memoryText.setText("Memory: not supported!"),(0,f.Z)(n);var i=n.performance.memory.jsHeapSizeLimit;return n.maxPercentThreshold=90,n.setMaxMemory(i/1048576),n.scene.events.on(Phaser.Scenes.Events.UPDATE,n.update),n}(0,a.Z)(t,e);var n=t.prototype;return n.isSupport=function(){var e;return this.performance&&!(null==(e=this.performance)||!e.memory)},n.setMaxMemory=function(e){this.maxMemoryLimit=Math.round(e)},n.setMemory=function(e){this.memory=e;var t=Phaser.Utils.String.Format(this.memoryString,[e,this.maxMemoryLimit]);this.memoryText.setText(t)},n.createMemory=function(){this.memoryText=this.scene.make.bitmapText({size:this.scene.fontSize(14),text:this.memoryString,font:m.Z.PRIMARY.KEY,depth:2e3}),this.memoryText.setName("Memory Meter"),this.add(this.memoryText),this.setMemory(0)},t}(Phaser.GameObjects.Container),C=I,b=n(456),O=n(461),P=n(458),R=n(457),w=n(207),x=c.Z.DEFAULT,k=x.KEY,_=x.FRAME,L=function(e){function t(t,n,i,a){var s;return(s=e.call(this,t,n,i,a)||this).popup=void 0,s.title=void 0,s.contents=void 0,s.buttonNo=void 0,s.buttonYes=void 0,s.messageText=void 0,s.messageText2=void 0,s.popupShowUpAnimation=void 0,s.contentShowUpAnimation=void 0,s.popupFadeOutAnimation=void 0,s.onHandleYes=void 0,s.open=function(t){e.prototype.open.call((0,f.Z)(s),t),s.setVisible(!0);var n=s.getData(["message","onHandleYes"]),i=n[0],a=void 0===i?"":i,r=n[1];s.setTextMessage(a),s.onHandleYes=r,s.runOpenAnimation()},s.handleClosePopup=function(){s.runCloseAnimation(),s.popupFadeOutAnimation.next((function(){s.scene.screen.close(s.name)}))},s.handleNo=function(){s.close()},s.handleYes=function(){s.onHandleYes&&s.onHandleYes(),s.close()},s.setVisible(!1),s.setDepth(h.Ks.POPUP),s.createPopup(),s.createPopupContent(),s.background.setAlpha(.5),s}(0,a.Z)(t,e);var n=t.prototype;return n.runAnim=function(){this.messageText.setScale(0).setAlpha(0)},n.createPopup=function(){this.popup=new R.Z(this.scene,0,0,325,260),this.add(this.popup),Phaser.Display.Align.In.Center(this.popup,this.zone)},n.createPopupContent=function(){this.createTitle(),this.createMessage(),this.createMessage2(),this.createButtonNo(),this.createButtonYes(),this.popup.add([this.title]),this.contents=this.scene.make.group({}),this.contents.addMultiple([this.messageText,this.messageText2,this.buttonNo,this.buttonYes])},n.createTitle=function(){this.title=this.scene.add.container();var e=this.scene.world.getPixelRatio(),t=this.scene.make.image({key:k,frame:_.TEXT_TUTORIAL}),n=t.width,i=t.height;t.setWorldSize(n/e,i/e);var a=new P.Z(this.scene,k,_.BUTTON_CLOSE,35,35);a.onClick=this.handleClosePopup,a.setName("Close"),Phaser.Display.Align.In.Center(a,this.title,155,-19),Phaser.Display.Align.In.Center(t,this.title,0,10),this.title.add([t,a]),this.popup.add(this.title),Phaser.Display.Align.In.TopCenter(this.title,this.popup,0,-2)},n.createButtonNo=function(){this.buttonNo=new P.Z(this.scene,k,_.BUTTON_DARK_BLUE,120,40),this.buttonNo.setName("No");var e=this.scene.world.getPixelRatio(),t=this.scene.make.image({key:k,frame:_.TEXT_NO}),n=t.width,i=t.height;t.setWorldSize(n/e,i/e),this.buttonNo.add(t),Phaser.Display.Align.In.Center(t,this.buttonNo),this.popup.add(this.buttonNo),Phaser.Display.Align.In.Center(this.buttonNo,this.popup,80,60),this.buttonNo.onClick=this.handleNo},n.createButtonYes=function(){this.buttonYes=new P.Z(this.scene,k,_.BUTTON_GREEN_LARGE,120,40),this.buttonYes.setName("Yes");var e=this.scene.world.getPixelRatio(),t=this.scene.make.image({key:k,frame:_.TEXT_YES}),n=t.width,i=t.height;t.setWorldSize(n/e,i/e),this.buttonYes.add(t),Phaser.Display.Align.In.Center(t,this.buttonYes),this.popup.add(this.buttonYes),Phaser.Display.Align.In.Center(this.buttonYes,this.popup,-80,60),this.buttonYes.onClick=this.handleYes},n.createMessage=function(){this.messageText=this.scene.make.bitmapText({font:m.Z.PRIMARY.KEY,size:this.scene.fontSize(45),origin:{x:.5,y:.5}}),this.messageText.align=1,this.popup.add(this.messageText),Phaser.Display.Align.In.Center(this.messageText,this.popup,0,-40),this.messageText.setScale(0).setAlpha(0)},n.createMessage2=function(){this.messageText2=this.scene.make.text({style:{fontFamily:m.Z.FONT_FAMILY,fontSize:this.scene.fontSize(45)+"px"},origin:{x:.5,y:.5}}),this.messageText2.setTint(7551258).setHighQuality(),this.messageText2.setVisible(!1),this.popup.add(this.messageText2),Phaser.Display.Align.In.Center(this.messageText2,this.popup,0,-40),this.messageText2.setScale(0).setAlpha(0)},n.runCloseAnimation=function(){this.runPopupExitsAnimation(0,200)},n.runPopupExitsAnimation=function(e,t){var n,i=this;this.popupFadeOutAnimation||(this.popupFadeOutAnimation=new o.Z({targets:[this.popup],delay:e,duration:t,props:{scale:0},onComplete:function(){i.popup.setY(0)}})),null==(n=this.popupFadeOutAnimation)||n.play()},n.setTextMessage=function(e){this.messageText.setText(""+e),"ar"==this.scene.facebook.getLocale()&&(this.messageText2.setText(""+e),this.messageText2.setVisible(!0),this.messageText.setVisible(!1))},n.runOpenAnimation=function(){this.scene.audio.playSound(w.Z.POPUP_SHOW),this.runPopupEntrancesAnimation(0,300),this.runPopupContentEntrancesAnimation(200,300)},n.runPopupEntrancesAnimation=function(e,t){if(!this.popupShowUpAnimation){var n=this.popup,i=(n.y,n.scale);this.popupShowUpAnimation=new O.Z({targets:[this.popup],delay:e,duration:t,props:{y:0,alpha:{start:1,from:1,to:1},scale:{start:0,from:0,to:i}}})}this.popupShowUpAnimation.play()},n.runPopupContentEntrancesAnimation=function(e,t){this.contentShowUpAnimation||(this.contentShowUpAnimation=new b.Z({targets:this.contents.getChildren(),duration:t,delay:this.scene.tweens.stagger(80,{start:e}),props:{alpha:{start:0,from:0,to:1}}})),this.contentShowUpAnimation.play()},t}(GameCore.Screen),D=L,M=n(118),N=n.n(M),B=n(454),G=function(e){function t(t,n,i,a){var s;return(s=e.call(this,t,n,i,a)||this).loadingIcon=void 0,s.messageText=void 0,s.openAnimation=void 0,s.closeTimerEvent=void 0,s.countDownTween=void 0,s.addLoadingIcon(),s.addMessageText(),s.setDepth(h.Ks.PRIORITY),s.background.setAlpha(.8),s}(0,a.Z)(t,e);var n=t.prototype;return n.open=function(t){var n,i,a=this;e.prototype.open.call(this,t);var s=this.getData(["message","duration","loading","countDown"]),r=s[0],o=void 0===r?"":r,c=s[1],l=void 0===c?0:c,h=s[2],u=void 0!==h&&h,d=s[3],p=void 0!==d&&d;null==(n=this.countDownTween)||n.remove(),p?(this.setMessage(o,[Math.round(l/1e3)]),this.countDownTween=this.scene.tweens.addCounter({from:l,to:0,duration:l,onUpdate:function(e){var t=e.getValue();a.setMessage(o,[Math.round(t/1e3)])}})):this.setMessage(o),this.showLoading(u),null==(i=this.closeTimerEvent)||i.remove(),l>0&&(this.closeTimerEvent=this.scene.time.addEvent({delay:l,callback:function(){a.visible&&a.scene.screen.close(a.name)}})),this.runOpenAnimation()},n.addLoadingIcon=function(){this.loadingIcon=new B.Z(this.scene),this.add(this.loadingIcon),Phaser.Display.Align.In.Center(this.loadingIcon,this.zone)},n.addMessageText=function(){this.messageText=this.scene.make.bitmapText({size:this.scene.fontSize(40),font:m.Z.PRIMARY_LIGHT.KEY,origin:{x:.5,y:.5}}),this.messageText.setCenterAlign(),this.add(this.messageText)},n.setMessage=function(e,t){this.messageText.setText(this.printf(e,t)),this.messageText.setScale(1)},n.showLoading=function(e){this.loadingIcon.setVisible(e);var t=!1===e?20:80;Phaser.Display.Align.In.Center(this.messageText,this.zone,0,t)},n.runOpenAnimation=function(){var e,t;null==(e=this.openAnimation)||e.stop(),null==(t=this.openAnimation)||t.remove(),this.openAnimation=new b.Z({targets:[this.messageText,this.loadingIcon],props:{scale:{getStart:function(e){return e.scale-.3},getEnd:function(e){return e.scale}}}}),this.openAnimation.play()},n.logPageviewOnOpen=function(){},n.logPageviewOnClose=function(){},n.printf=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return 0===n.length?e:N()(n).call(n,(function(e,t){return e.replace(/%s|%v|%d|%f|%d/,t)}),e)},t}(GameCore.Screen),F=G,U=c.Z.DEFAULT,H=U.KEY,Z=U.FRAME,Y=function(e){function t(){for(var t,n,i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];return(n=e.call.apply(e,r()(t=[this]).call(t,a))||this).mask=void 0,n.fadeInAnim=void 0,n.fadeOutAnim=void 0,n.fpsMeter=void 0,n.memoryMeter=void 0,n.switchScene=function(e){n.currentScene.key!==e&&n.currentScene.switch(e)},n.runScene=function(e){n.currentScene.run(e)},n.emitGameEventStartScene=function(e){var t=e.scene.key;n.updateSceneState(),n.runMaskFadeOutAnimation(),n.updateActiveSceneKey(t),n.game.events.emit(Phaser.Scenes.Events.START,t),(0,p.sw)("scene","Start scene: "+t)},n.emitGameEventSleepScene=function(e){var t=e.scene.scene.key;t!==l.Co.LOAD_SCENE&&(n.runMaskFadeInAnimation(),n.game.events.emit(Phaser.Scenes.Events.SLEEP,t))},n.emitGameEventWakeScene=function(e){var t=e.scene.scene.key;t!==l.Co.LOAD_SCENE&&(n.updateSceneState(),n.runMaskFadeOutAnimation(),n.updateActiveSceneKey(t),n.game.events.emit(Phaser.Scenes.Events.WAKE,t))},n.emitGameEventPauseScene=function(e){var t=e.scene.scene.key;n.game.events.emit(Phaser.Scenes.Events.PAUSE,t)},n.emitGameEventResumeScene=function(e){var t=e.scene.key;n.game.events.emit(Phaser.Scenes.Events.RESUME,t)},n.emitGameEventShutdownScene=function(e){var t=e.scene.scene.key;n.game.events.emit(Phaser.Scenes.Events.SHUTDOWN,t)},n}(0,a.Z)(t,e);var n=t.prototype;return n.init=function(){this.listenScenesEvents(),this.game.globalScene=this},n.setup=function(){this.scaleGame(),this.addMask(),this.addNotifyScreen(),this.addAlertScreen(),this.addFPS(),this.addMemory()},n.addNotifyScreen=function(){var e=this.screen.add(h.o4.NOTIFY_SCREEN,F);Phaser.Display.Align.In.Center(e,this.gameZone)},n.addAlertScreen=function(){var e=this.screen.add(h.o4.ALERT_SCREEN,D);Phaser.Display.Align.In.Center(e,this.gameZone)},n.addMask=function(){this.mask=this.make.image({key:H,frame:Z.BLANK});var e=this.gameZone,t=e.width,n=e.height;this.mask.setAlpha(0),this.mask.setOrigin(0,0),this.mask.setTint(0),this.mask.setWorldSize(t,n)},n.addFPS=function(){GameCore.Configs.Statistics.ShowFPSInGame&&(this.fpsMeter=new T(this),Phaser.Display.Align.In.TopLeft(this.fpsMeter,this.gameZone,-20,-10))},n.addMemory=function(){GameCore.Configs.Statistics.ShowMemoryInGame&&(this.memoryMeter=new C(this),Phaser.Display.Align.In.TopLeft(this.memoryMeter,this.gameZone,-45,-3))},n.updateSceneState=function(){this.setGlobalSceneOnTop()},n.setGlobalSceneOnTop=function(){this.scene.bringToTop(this)},n.runMaskFadeInAnimation=function(){},n.runMaskFadeOutAnimation=function(){},n.listenScenesEvents=function(){var e=this;this.scene.manager.getScenes(!1).forEach((function(t){t.events.on(Phaser.Scenes.Events.CREATE,e.emitGameEventStartScene),t.events.on(Phaser.Scenes.Events.SLEEP,e.emitGameEventSleepScene),t.events.on(Phaser.Scenes.Events.WAKE,e.emitGameEventWakeScene),t.events.on(Phaser.Scenes.Events.PAUSE,e.emitGameEventPauseScene),t.events.on(Phaser.Scenes.Events.RESUME,e.emitGameEventResumeScene),t.events.on(Phaser.Scenes.Events.SHUTDOWN,e.emitGameEventShutdownScene)})),this.events.on(l.K5.SWITCH,this.switchScene),this.events.on(l.K5.RUN,this.runScene)},n.getActiveScene=function(){return this.scene.manager.getScenes(!0)[0]},n.getCurrentScene=function(){return this.currentScene},n.updateActiveSceneKey=function(e){e!==l.Co.GLOBAL_SCENE&&this.storage.dispatch((0,u.I)(e))},n.logEventOpen=function(){},n.logPageviewOnOpen=function(){},(0,i.Z)(t,[{key:"currentScene",get:function(){var e=this.storage.getState(),t=d(e);return(t?this.scene.manager.getScene(t):this.getActiveScene()).scene}}]),t}(g.Z),V=Y},578:function(e,t,n){"use strict";var i=n(202),a=n(445),s=n(81),r=n(51),o=n(14),c=n(37),l=n.n(c),h=n(620),u=function(){function e(e){this.game=void 0,this.game=e}var t=e.prototype;return t.addKillRevive=function(){var e=this;[Phaser.GameObjects.Container,Phaser.GameObjects.Image,Phaser.GameObjects.Sprite,Phaser.GameObjects.Graphics,Phaser.GameObjects.Text,Phaser.GameObjects.BitmapText,Phaser.GameObjects.Particles.ParticleEmitter,Phaser.GameObjects.Particles.ParticleEmitterManager].forEach((function(t){t.prototype.kill=e.kill,t.prototype.revive=e.revive}))},t.addKillReviveGroup=function(){Phaser.GameObjects.Group.prototype.killGroup=this.killGroup,Phaser.GameObjects.Group.prototype.reviveGroup=this.reviveGroup},t.addSetWorldSize=function(){var e=this;[Phaser.GameObjects.Image,Phaser.GameObjects.Sprite].forEach((function(t){t.prototype.setWorldSize=e.setWorldSize}))},t.addSetWorldSizeForContainer=function(){var e=this;[Phaser.GameObjects.Container].forEach((function(t){t.prototype.setWorldSize=e.setWorldSizeForContainer}))},t.addGetWorldPosition=function(){var e=this;[Phaser.GameObjects.Container,Phaser.GameObjects.Image,Phaser.GameObjects.Sprite,Phaser.GameObjects.Graphics,Phaser.GameObjects.Text,Phaser.GameObjects.BitmapText].forEach((function(t){t.prototype.getWorldPosition=e.getWorldPosition}))},t.addDrawDebugBox=function(){var e=this;[Phaser.GameObjects.Container,Phaser.GameObjects.Image,Phaser.GameObjects.Sprite,Phaser.GameObjects.Graphics,Phaser.GameObjects.Text,Phaser.GameObjects.BitmapText,Phaser.GameObjects.Zone].forEach((function(t){t.prototype.drawDebugBox=e.drawDebugBox}))},t.addHighQuality=function(){var e=this;[Phaser.GameObjects.Text].forEach((function(t){t.prototype.setHighQuality=e.setHighQuality}))},t.addSetLineHeightForBitmapText=function(){Phaser.GameObjects.BitmapText.prototype.setLineHeight=function(e){this.lineHeight=e,this.updateDisplayOrigin()}},t.kill=function(){this.setActive(!1),this.setVisible(!1)},t.revive=function(){this.setActive(!0),this.setVisible(!0)},t.killGroup=function(){this.getChildren().forEach((function(e){e.setActive(!1),e.setVisible(!1)}))},t.reviveGroup=function(){this.getChildren().forEach((function(e){e.setActive(!0),e.setVisible(!0)}))},t.setWorldSize=function(e,t){this.setSize(e,t),this.setDisplaySize(e,t)},t.setWorldSizeForContainer=function(e,t,n){void 0===n&&(n=2),this.setSize(e*n,t*n),this.setDisplaySize(e,t)},t.getWorldPosition=function(){var e=this.getWorldTransformMatrix().decomposeMatrix();return{x:e.translateX,y:e.translateY}},t.drawDebugBox=function(e,t){var n=this.x,i=this.y,a=this.width,s=this.height,r=this.depth,o=this.originX,c=this.originY,l=this.scene.add.rectangle(n,i,a,s,e,t);l.setName("Debug Box"),l.setDepth(r);var h=GameCore.Utils.Valid.isNumber;return h(o)&&h(c)&&l.setOrigin(o,c),l},t.setHighQuality=function(){return this.renderer instanceof Phaser.Renderer.WebGL.WebGLRenderer?this.setResolution(2*this.scene.game.world.getZoomRatio()):this},e}(),d=u,p=n(47),g=n.n(p),f=n(104),m=n.n(f),v=n(87),E=n.n(v),S=n(129),A=n.n(S),y=n(63),T=n.n(y),I=n(64),C=n.n(I),b=n(134),O=n.n(b),P=n(89),R=n.n(P),w=[{url:"./assets/images/others/mock1.jpg",title:"Buy lottery tickets on behalf",description:"\ud83d\udca5\ud83d\udca5\ud83d\udca5 Place an order for lottery tickets from 3 regions!!! \u2705 Fast - Convenient - Safe \u2705 Diverse products \u2705 Payment...",buttonName:"Discover more"},{url:"./assets/images/others/mock2.jpg",title:"SYSTEM-WIDE SALE UP TO 50%",description:'\ud83d\udd25 \ud835\uddec\ud835\uddd8\ud835\uddd4\ud835\udde5 \ud835\uddd8\ud835\udde1\ud835\uddd7 \ud835\udde6\ud835\uddd4\ud835\udddf\ud835\uddd8 | \ud835\udde8\ud835\udde3 \ud835\udde7\ud835\udde2 \ud835\udff1\ud835\udfec% "BIG PARTY" AUTHENTIC SPORTSWEAR SHOCKINGLY REDUCED PRICES! \ud83c\udf81 From...',buttonName:"Discover more"},{url:"./assets/images/others/mock3.jpg",title:"Register now",description:"Play safe, play fun, play 9club!",buttonName:"Register"}],x=function(){function e(){}return e.loadBannerAdAsync=function(){var e=(0,r.Z)(l().mark((function e(){var t,n,i,a,s,r,o,c,h,u;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.currentIdx=(this.currentIdx+1)%w.length,this.hideBannerAdAsync(),e.next=4,new(C())((function(e){setTimeout((function(){e()}),2e3)}));case 4:if(!document.getElementById("mock-banner-ads")){e.next=16;break}return t=w[this.currentIdx],n=t.url,i=t.buttonName,a=t.title,s=t.description,(r=document.getElementById("banner-content-text1"))&&(r.innerHTML=a),(o=document.getElementById("banner-content-text2"))&&(o.innerHTML=s),(c=document.getElementById("mock-banner-ads-avatar"))&&(c.style.background="url("+n+") center center/contain no-repeat"),(h=document.getElementById("banner-content-button"))&&(h.innerHTML=i),e.abrupt("return");case 16:u=GameCore.Utils.Device.isDesktop(),50,u?this.createDesktopBannerAd(50):this.createMobileBannerAd(50);case 19:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),e.createDesktopBannerAd=function(e){var t=this,n=w[this.currentIdx],i=n.url,a=n.buttonName,s=n.title,r=n.description,o=document.createElement("div");o.id="mock-banner-ads",o.style.width="100%",o.style.height=e+"px",o.style.bottom="var(--sab)",o.style.display="flex",o.style.position="absolute",o.style.opacity=this.currentOpacity;var c=document.createElement("div");c.id="mock-banner-ads-display-area",c.style.width="100%",c.style.height="100%",c.style.background="#323436 center center/auto no-repeat",c.style.borderRadius="10px",c.style.marginLeft="4px",c.style.marginRight="4px",c.style.display="block",c.style.alignContent="center";var l=document.createElement("div");l.id="mock-banner-ads-content",l.style.boxSizing="border-box",l.style.flexDirection="row",l.style.display="flex",l.style.position="relative",l.style.alignItems="stretch",l.style.paddingLeft="4px",l.style.paddingRight="4px",l.style.justifyContent="space-between";var h=document.createElement("div");h.id="mock-banner-ads-avatar",h.style.marginLeft="10px",h.style.width=e+"px",h.style.minWidth=e+"px",h.style.height=e+"px",h.style.display="flex",h.style.flexDirection="column",h.style.position="relative",h.style.background="url("+i+") center center/contain no-repeat",h.style.borderRadius="50%";var u=document.createElement("div");u.id="mock-banner-ads-right-content",u.style.width="100%",u.style.paddingLeft="10px",u.style.display="flex",u.style.flexDirection="row",u.style.position="relative",u.style.color="#E4E6EB",u.style.wordWrap="break-word",u.style.textAlign="left",u.style.alignContent="center",u.style.alignItems="center",u.style.fontSize="12px",u.style.fontFamily="Helvetica, Arial, sans-serif, Roboto, Helvetica, Arial, sans-serif",h.style.boxSizing="border-box";var d=document.createElement("div");d.style.flexDirection="column",d.style.display="flex",d.style.justifyContent="center",d.style.flexShrink="1",d.style.flexGrow="1",d.style.flexBasis="0",d.style.boxSizing="border-box",d.style.minWidth="0",d.innerHTML="\n            <div id='banner-content-text1' style=\"font-weight:600;line-height: 1.3333;font-size: .9375rem;text-overflow: ellipsis;-webkit-line-clamp: 1;overflow: hidden;display: -webkit-box;-webkit-box-orient: vertical;\">"+s+"</div>\n            <div id='banner-content-text2' style=\"font-weight:400;line-height: 1.2308;font-size: .8125rem;text-overflow: ellipsis;-webkit-line-clamp: 2;overflow: hidden;display: -webkit-box;-webkit-box-orient: vertical;\">"+r+"</div>";var p=document.createElement("button");p.id="banner-content-button",p.type="button",p.style.width="120px",p.style.height=e-20+"px",p.style.fontWeight="600",p.style.backgroundColor="#3963fc",p.style.border="none",p.style.color="white",p.style.borderRadius="5px",p.style.textAlign="center",p.style.display="inline-block",p.style.cursor="pointer",p.style.marginRight="10px",p.style.marginLeft="10px",p.style.flexShrink="1",p.style.boxSizing="border-box",p.style.paddingRight="2px",p.style.paddingLeft="2px",p.innerHTML=a,p.onclick=function(){"0.2"===t.currentOpacity?o.style.opacity="1":o.style.opacity="0.2",t.currentOpacity=o.style.opacity};var g=document.createElement("button");g.type="button",g.style.width=e-20+"px",g.style.height=e-20+"px",g.style.fontWeight="1000",g.style.backgroundColor="#5a5c5c",g.style.border="none",g.style.color="white",g.style.borderRadius="50%",g.style.textAlign="center",g.style.display="inline-block",g.style.cursor="pointer",g.style.marginRight="10px",g.style.marginLeft="10px",g.style.flexShrink="0",g.style.boxSizing="border-box",g.style.paddingRight="2px",g.style.paddingLeft="2px",g.innerHTML="...",document.body.appendChild(o),o.appendChild(c),c.appendChild(l),l.appendChild(h),l.appendChild(u),u.appendChild(d),u.appendChild(p),u.appendChild(g)},e.createMobileBannerAd=function(e){var t=this,n=w[this.currentIdx],i=n.url,a=n.buttonName,s=n.title,r=n.description,o=document.createElement("div");o.id="mock-banner-ads",o.style.width="100%",o.style.height=e+"px",o.style.bottom="var(--sab)",o.style.display="block",o.style.position="absolute",o.style.opacity=this.currentOpacity;var c=document.createElement("div");c.id="mock-banner-ads-display-area",c.style.background="#ffffff center center/auto no-repeat",c.style.display="block",c.style.alignContent="center";var l=document.createElement("div");l.id="mock-banner-ads-content",l.style.boxSizing="border-box",l.style.flexDirection="row",l.style.display="flex",l.style.position="relative",l.style.alignItems="stretch",l.style.justifyContent="space-between";var h=document.createElement("div");h.id="mock-banner-ads-avatar",h.style.width=e+"px",h.style.minWidth=e+"px",h.style.height=e+"px",h.style.display="flex",h.style.flexDirection="column",h.style.position="relative",h.style.background="url("+i+") center center/contain no-repeat";var u=document.createElement("div");u.id="mock-banner-ads-right-content",u.style.width="100%",u.style.paddingLeft="10px",u.style.display="flex",u.style.flexDirection="row",u.style.position="relative",u.style.color="#000",u.style.wordWrap="break-word",u.style.textAlign="left",u.style.alignContent="center",u.style.alignItems="center",u.style.fontSize="12px",u.style.fontFamily="Helvetica, Arial, sans-serif, Roboto, Helvetica, Arial, sans-serif",h.style.boxSizing="border-box";var d=document.createElement("div");d.style.flexDirection="column",d.style.display="flex",d.style.justifyContent="center",d.style.flexShrink="1",d.style.flexGrow="1",d.style.flexBasis="0",d.style.boxSizing="border-box",d.style.minWidth="0",d.innerHTML="\n            <div id='banner-content-text1' style=\"font-weight:600;line-height: 1.3333;font-size: .9375rem;text-overflow: ellipsis;-webkit-line-clamp: 1;overflow: hidden;display: -webkit-box;-webkit-box-orient: vertical;\">"+s+"</div>\n            <div id='banner-content-text2' style=\"font-weight:400;line-height: 1.2308;font-size: .8125rem;text-overflow: ellipsis;-webkit-line-clamp: 1;overflow: hidden;display: -webkit-box;-webkit-box-orient: vertical;\">"+r+"</div>";var p=document.createElement("button");p.id="banner-content-button",p.type="button",p.style.height="100%",p.style.fontWeight="600",p.style.backgroundColor="#3963fc",p.style.border="none",p.style.color="white",p.style.textAlign="center",p.style.display="inline-block",p.style.cursor="pointer",p.style.marginLeft="10px",p.style.flexShrink="1",p.style.boxSizing="border-box",p.style.paddingRight="7px",p.style.paddingLeft="7px",p.innerHTML=a,p.onclick=function(){"0.2"===t.currentOpacity?o.style.opacity="1":o.style.opacity="0.2",t.currentOpacity=o.style.opacity},document.body.appendChild(o),o.appendChild(c),c.appendChild(l),l.appendChild(h),l.appendChild(u),u.appendChild(d),u.appendChild(p)},e.hideBannerAdAsync=function(){var e=(0,r.Z)(l().mark((function e(){var t;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=document.getElementById("mock-banner-ads")){e.next=3;break}return e.abrupt("return");case 3:t.remove();case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),e}();x.currentIdx=-1,x.currentOpacity="1";var k={LOADED:"loaded",DISPLAYED:"displayed"},_=function(e){return e.IDLE="idle",e.LOADING="loading",e.FILLED="filled",e.SHOWING="showing",e}(_||{}),L=_,D=function(e){return e.REWARDED="rewarded",e.PRE_ROLL="pre-roll",e.INTERSTITIAL="interstitial",e.BANNER="banner",e}(D||{}),M=D,N=n(203),B=function(e){function t(t,n){var i;return(i=e.call(this,n)||this).code=void 0,i.code=t,i.message=n,i}return(0,o.Z)(t,e),t}((0,N.Z)(Error)),G=function(e){this.type=void 0,this.status=void 0,this.type=e,this.status=L.IDLE};function F(e,t){var n="undefined"!==typeof E()&&A()(e)||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){var n;if(!e)return;if("string"===typeof e)return U(e,t);var i=g()(n=Object.prototype.toString.call(e)).call(n,8,-1);"Object"===i&&e.constructor&&(i=e.constructor.name);if("Map"===i||"Set"===i)return m()(e);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return U(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var i=0;return function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function U(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}GameCore.Ads={Types:M,Status:L,Events:k,AdError:B,AdInstance:G};var H=function(e){function t(){for(var t,n,i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];return(n=e.call.apply(e,T()(t=[this]).call(t,a))||this).events=void 0,n.enabled=void 0,n.config=void 0,n.lastInterAdShownTime=void 0,n.lastInterAdLoadedTime=void 0,n.lastRewardAdShownTime=void 0,n.interstitial=void 0,n.rewardedVideo=void 0,n.preRoll=void 0,n.fallbackInterstitial=void 0,n.fallbackRewardedVideo=void 0,n.fallbackPreRoll=void 0,n.safeAreaBottom=void 0,n.showingBannerAd=void 0,n.reloadBannerAdIntervals=void 0,n.bannerAdConfigs=void 0,n.isHaveBannerAdOptions=void 0,n.isFallbackReady=void 0,n.isFallbackInitialized=void 0,n.isBannerAdsShown=void 0,n}(0,o.Z)(t,e);var i=t.prototype;return i.init=function(){this.events=new Phaser.Events.EventEmitter,this.safeAreaBottom=0,this.lastInterAdShownTime=0,this.lastInterAdLoadedTime=0,this.lastRewardAdShownTime=0,this.showingBannerAd={},this.reloadBannerAdIntervals={},this.bannerAdConfigs=[],this.isHaveBannerAdOptions=!0,this.isFallbackReady=!1,this.isFallbackInitialized=!1,this.isBannerAdsShown=!1},i.calculateSafeAreaBottom=function(){try{if(!this.config.calculateSafeAreaBottom)return;this.safeAreaBottom=parseInt(getComputedStyle(document.documentElement).getPropertyValue("--sab")),isNaN(this.safeAreaBottom)&&(this.safeAreaBottom=0)}catch(e){this.safeAreaBottom=0}},i.configure=function(e,t){this.enabled=t.enabled,this.config=t,this.setAdInstance(e),this.setBannerAdConfigStatus(),this.calculateSafeAreaBottom()},i.setBannerAdConfigStatus=function(){for(var e,t=this.config.bannerAdOptions,n=GameCore.Utils.Device.isDesktop(),i=F(t);!(e=i()).done;){var a=e.value,s=a.platform,r="ALL"==s||"DESKTOP"==s&&n||"MOBILE"==s&&!n;this.bannerAdConfigs.push({config:a,canShow:r}),r&&(this.isHaveBannerAdOptions=!0)}},i.setAdInstance=function(e){var t=this.config,n=t.rewardAdOptions,i=t.interstitialAdOptions;this.interstitial=new e(M.INTERSTITIAL,i.pID),this.rewardedVideo=new e(M.REWARDED,n.pID),this.preRoll=new e(M.PRE_ROLL,i.pID)},i.setFallbackAdInstance=function(e){var t=this.config,n=t.rewardAdOptions,i=t.interstitialAdOptions;this.fallbackInterstitial=new e(M.INTERSTITIAL,i.pID),this.fallbackRewardedVideo=new e(M.REWARDED,n.pID),this.fallbackPreRoll=new e(M.PRE_ROLL,i.pID)},i.preloadInterstitialAdAsync=function(){var e=(0,r.Z)(l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.preloadAdAsync(M.INTERSTITIAL);case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),i.showInterstitialAdAsync=function(){var e=(0,r.Z)(l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.canbeShowInterstitialAdByTime()){e.next=2;break}throw new B("INTERSTITIAL_AD_CAN_NOT_SHOW","Can't show interstitial ad");case 2:return e.next=4,this.showAdAsync(M.INTERSTITIAL);case 4:this.lastInterAdShownTime=window.performance.now()/1e3;case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),i.preloadPreRollAdAsync=function(){var e=(0,r.Z)(l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.preloadAdAsync(M.PRE_ROLL);case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),i.showPreRollAdAsync=function(){var e=(0,r.Z)(l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.showAdAsync(M.PRE_ROLL);case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),i.preloadRewardedVideoAsync=function(){var e=(0,r.Z)(l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.preloadAdAsync(M.REWARDED);case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),i.showRewardedVideoAsync=function(){var e=(0,r.Z)(l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.canbeShowRewardAd()){e.next=2;break}throw new B("REWARDED_VIDEO_CAN_NOT_SHOW","Can't show rewarded video");case 2:return e.next=4,this.showAdAsync(M.REWARDED);case 4:this.lastRewardAdShownTime=window.performance.now()/1e3;case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),i.getRemainingRewardTime=function(){var e=window.performance.now()/1e3,t=this.config.rewardAdOptions.secondsBetweenAds,n=e-this.lastRewardAdShownTime;return n<t?t-n:0},i.preloadAdAsync=function(){var e=(0,r.Z)(l().mark((function e(t){var n,i;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.enabled){e.next=2;break}throw new B("ADS_NOT_ENABLED","Ads is't enabled");case 2:return e.next=4,this.preloadMainAdService(t);case 4:if(!0!==(n=e.sent)){e.next=7;break}return e.abrupt("return");case 7:if(this.isFallbackReady){e.next=9;break}throw n;case 9:return e.next=11,this.preloadFallbackAdService(t);case 11:if(!0!==(i=e.sent)){e.next=14;break}return e.abrupt("return");case 14:throw i;case 15:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),i.preloadMainAdService=function(e){var t=this;return new(C())((function(n){var i=!1;t.preloadAdInstanceAsync(e,!1).then((function(){i=!0})).catch((function(e){t.isFallbackReady||t.initFallbackAdsService().catch((function(){t.isFallbackReady=!1})),i=e})).finally((function(){n(i)}))}))},i.preloadFallbackAdService=function(e){var t=this;return new(C())((function(n){var i=!1;t.isFallbackReady||n(new B("FALLBACK_NOT_READY","Fallback ads not ready")),t.preloadAdInstanceAsync(e,!0).then((function(){i=!0})).catch((function(e){i=e})).finally((function(){n(i)}))}))},i.preloadAdInstanceAsync=function(){var e=(0,r.Z)(l().mark((function e(t,n){var i,a=this;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===n&&(n=!1),null!==(i=this.getAdInstanceByType(t,n))){e.next=4;break}throw new B("AD_INSTANCE_NOT_INITIATED","The instance ads not yet initiated");case 4:if(i.getStatus()!==L.LOADING){e.next=8;break}return e.next=7,new(C())((function(e){a.events.once(k.LOADED,e)}));case 7:return e.abrupt("return");case 8:return t!==M.INTERSTITIAL&&t!==M.PRE_ROLL||(this.lastInterAdLoadedTime=window.performance.now()/1e3),e.next=11,i.loadAsync();case 11:this.events.emit(k.LOADED,t);case 12:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}(),i.showAdAsync=function(){var e=(0,r.Z)(l().mark((function e(t){var n,i;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.enabled){e.next=2;break}throw new B("ADS_NOT_ENABLED","Ads is't enabled");case 2:return e.next=4,this.showMainAdService(t);case 4:if(!0!==(n=e.sent)){e.next=7;break}return e.abrupt("return");case 7:if(!this.isUserCancelledAdError(n)&&this.isAdFallbackReadyToShow(t)){e.next=9;break}throw n;case 9:return e.next=11,this.showFallbackAdService(t);case 11:if(!0!==(i=e.sent)){e.next=14;break}return e.abrupt("return");case 14:throw i;case 15:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),i.showMainAdService=function(e){var t=this;return new(C())((function(n){var i=!1;t.showAdInstanceAsync(e,!1).then((function(){i=!0})).catch((function(e){i=e,t.isUserCancelledAdError(e)||t.isFallbackReady||t.initFallbackAdsService().catch((function(){t.isFallbackReady=!1}))})).finally((function(){n(i)}))}))},i.showFallbackAdService=function(e){var t=this;return new(C())((function(n){var i=!1;t.isFallbackReady||n(new B("FALLBACK_NOT_READY","Fallback ads not ready")),t.showAdInstanceAsync(e,!0).then((function(){i=!0})).catch((function(e){i=e})).finally((function(){n(i)}))}))},i.showAdInstanceAsync=function(){var e=(0,r.Z)(l().mark((function e(t,n){var i;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===n&&(n=!1),null!==(i=this.getAdInstanceByType(t,n))){e.next=4;break}throw new B("AD_INSTANCE_NOT_INITIATED","The instance ads not yet initiated");case 4:return t!==M.INTERSTITIAL&&t!==M.PRE_ROLL||(this.lastInterAdShownTime=window.performance.now()/1e3),t===M.REWARDED&&(this.lastRewardAdShownTime=window.performance.now()/1e3,this.config.enableRewardVideoResetInterstitial&&(this.lastInterAdShownTime=this.lastRewardAdShownTime)),e.next=8,i.showAsync();case 8:this.events.emit(k.DISPLAYED,t);case 9:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}(),i.getAdStatus=function(e){var t=this.getAdInstanceByType(e);return t?t.getStatus():null},i.getAdInstanceByType=function(e,t){if(void 0===t&&(t=!1),t)switch(e){case M.INTERSTITIAL:return this.fallbackInterstitial;case M.REWARDED:return this.fallbackRewardedVideo;case M.PRE_ROLL:return this.fallbackPreRoll;default:return null}switch(e){case M.INTERSTITIAL:return this.interstitial;case M.REWARDED:return this.rewardedVideo;case M.PRE_ROLL:return this.preRoll;default:return null}},i.canbeShowInterstitialAd=function(){var e=this.canbeLoadInterstitialAdByTime();return e&&(e=this.canbeShowInterstitialAdByTime()),e},i.canbeLoadInterstitialAdByTime=function(){var e=window.performance.now()/1e3,t=this.config.interstitialAdOptions,n=t.secondsFirstTime,i=t.secondsBetweenAds,a=Math.floor(e-this.lastInterAdLoadedTime);return this.lastInterAdLoadedTime>0?a>=i:a>=n},i.canbeShowInterstitialAdByTime=function(){var e=window.performance.now()/1e3,t=this.config.interstitialAdOptions,n=t.secondsFirstTime,i=t.secondsBetweenAds,a=Math.floor(e-this.lastInterAdShownTime);return this.lastInterAdShownTime>0?a>=i:a>=n},i.canbeShowRewardAd=function(){var e=window.performance.now()/1e3,t=this.config.rewardAdOptions,n=t.secondsFirstTime,i=t.secondsBetweenAds,a=Math.floor(e-this.lastRewardAdShownTime);return this.lastRewardAdShownTime>0?a>=i:a>=n},i.getEnabledBannerAds=function(){if(!this.isHaveBannerAdOptions)return[];for(var e,t=[],n=F(this.bannerAdConfigs);!(e=n()).done;){var i=e.value,a=i.config;i.canShow&&t.push(a)}return t},i.disableBannerAds=function(){this.config.bannerAdOptions=[]},i.showBannerAdAsync=function(){var e=(0,r.Z)(l().mark((function e(){var t;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.enabled){e.next=2;break}return e.abrupt("return");case 2:if(!this.isBannerAdsShown){e.next=5;break}return e.next=5,this.hideBannerAdAsync();case 5:if(0!==(t=this.getEnabledBannerAds()).length){e.next=8;break}return e.abrupt("return");case 8:return this.reloadBannerAdIntervals=this.reloadBannerAdIntervals||{},this.loadBannerAdAsync("",t),e.abrupt("return");case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),i.loadBannerAdAsync=function(){var e=(0,r.Z)(l().mark((function e(t,n){var i,a,s=this;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.enabled){e.next=2;break}return e.abrupt("return");case 2:if(i=this.getSceneName(),a=GameCore.Configs.Ads,e.prev=4,!a.Mockup.Enable){e.next=10;break}return e.next=8,x.loadBannerAdAsync();case 8:e.next=12;break;case 10:return e.next=12,GameSDK.loadBannerAdAsync(t,n);case 12:this.isBannerAdsShown=!0,n.forEach((function(e){var t=e.placementId,n=e.position,r=e.bannerWidth,o=e.bannerHeight;if(t&&""!==t){var c=n+":"+r+"x"+o;s.showingBannerAd[t]=!0,window.game.analytics.showBannerAd(c,i,a.AdService)}})),e.next=21;break;case 16:e.prev=16,e.t0=e.catch(4),this.isBannerAdsShown=!1,n.forEach((function(e){var t=e.position+":"+e.bannerWidth+"x"+e.bannerHeight,n={type:M.BANNER,placement:i,bannerPosition:t,adService:a.AdService};window.game.analytics.showAdFail(n)}));case 21:case"end":return e.stop()}}),e,this,[[4,16]])})));return function(t,n){return e.apply(this,arguments)}}(),i.hideBannerAdAsync=function(){var e=(0,r.Z)(l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.enabled){e.next=2;break}return e.abrupt("return");case 2:if(this.isHaveBannerAdOptions){e.next=4;break}return e.abrupt("return");case 4:if(this.isBannerAdsShown=!1,e.prev=5,!GameCore.Configs.Ads.Mockup.Enable){e.next=12;break}return e.next=10,x.hideBannerAdAsync();case 10:e.next=14;break;case 12:return e.next=14,GameSDK.hideBannerAdAsync();case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(5);case 19:case"end":return e.stop()}}),e,this,[[5,16]])})));return function(){return e.apply(this,arguments)}}(),i.getBannerHeight=function(){var e=this.getBottomBannerConfig();if(!e)return 0;var t=e.bannerHeight,n=(void 0===t?0:t)+this.safeAreaBottom+20;if(this.game.world){var i=this.game.world,a=i.getPixelRatio(),s=i.getZoomRatio();return this.game.world.getPhysicPixels(n,a/s)}return n},i.getBottomBannerConfig=function(){var e=this.getEnabledBannerAds();return 0===e.length?null:O()(e).call(e,(function(e){return"bottom"===e.position}))||null},i.getSceneName=function(){try{var e=self.game.globalScene;return this.globalSceneTypeCheck(e)?e.getCurrentScene().scene.getSceneName():"unknown"}catch(t){return"unknown"}},i.globalSceneTypeCheck=function(e){return"getCurrentScene"in e&&"function"===typeof e.getCurrentScene},i.initFallbackAdsService=function(){var e=(0,r.Z)(l().mark((function e(){var t,n;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=GameCore.Configs.Ads,!this.isFallbackInitialized){e.next=3;break}return e.abrupt("return");case 3:return this.isFallbackInitialized=!0,e.next=6,this.getFallbackAdServiceInstance();case 6:n=e.sent,"none"!==t.FallbackService&&null!==n&&(this.isFallbackReady=!0,this.setFallbackAdInstance(n));case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),i.getFallbackAdServiceInstance=function(){var e=(0,r.Z)(l().mark((function e(){var t,i,a;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=GameCore.Configs.Ads.FallbackService,e.next=3,Promise.resolve().then(n.bind(n,618));case 3:if(i=e.sent.default,"google"!==t){e.next=16;break}return e.prev=5,e.next=8,this.initGoogleAdInstanceAsync();case 8:if(null===(a=e.sent)){e.next=11;break}return e.abrupt("return",a);case 11:e.next=16;break;case 13:e.prev=13,e.t0=e.catch(5);case 16:return e.abrupt("return",i);case 17:case"end":return e.stop()}}),e,this,[[5,13]])})));return function(){return e.apply(this,arguments)}}(),i.initGoogleAdInstanceAsync=function(){var e=(0,r.Z)(l().mark((function e(){var t,i,a,s,r,o,c,h,u;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=GameCore.Configs.Ads.AdServiceConfigs.Google){e.next=3;break}return e.abrupt("return",null);case 3:return i=t.DataAdChannel,a=t.DataAdClient,s=t.DataAdHost,r=t.DataAdBreakTest,o=t.DataAdFrequencyHint,c=t.MaxScriptLoadRetryCount,e.next=6,Promise.resolve().then(n.bind(n,619));case 6:if("loaded"!==(h=e.sent.default).initStatus){e.next=9;break}return e.abrupt("return",h);case 9:return u={dataAdClient:a,dataAdChannel:i,dataAdHost:s,dataAdBreakTest:r,dataAdFrequencyHint:o,maxScriptLoadRetryCount:c},e.prev=10,h.setGame(this.game),e.next=14,h.initGoogleAdsAsync(u);case 14:return e.abrupt("return",h);case 17:return e.prev=17,e.t0=e.catch(10),e.abrupt("return",null);case 21:case"end":return e.stop()}}),e,this,[[10,17]])})));return function(){return e.apply(this,arguments)}}(),i.isUserCancelledAdError=function(e){if(e instanceof B&&"USER_INPUT"===e.code)return!0;try{var t=JSON.parse(R()(e));return"code"in t&&"USER_INPUT"===t.code}catch(e){return!1}},i.isAdFallbackReadyToShow=function(e){if(!this.isFallbackReady)return!1;var t=this.getAdInstanceByType(e,!0);return!!t&&t.getStatus()===L.FILLED},t}(Phaser.Plugins.BasePlugin),Z=H,Y=function(){function e(e,t,n){this.name=void 0,this.color=void 0,this.selfLog=void 0,this.options=void 0,this.name=e,this.color=n||"#FFF",this.options=t,this.selfLog=!0}var t=e.prototype;return t.event=function(e,t,n){this.processEvent(e,t,n),this.selfLog},t.pageview=function(e){var t=this.getPageByKey(e);this.processPageView(t),this.selfLog},t.levelStart=function(e,t,n){this.processLevelStart(e,t,n),this.selfLog},t.levelFail=function(e,t,n){this.processLevelFail(e,t,n),this.selfLog},t.levelRescue=function(e,t,n){this.processLevelRescue(e,t,n),this.selfLog},t.levelComplete=function(e,t,n){this.processLevelComplete(e,t,n),this.selfLog},t.loadPreRollAd=function(e,t){this.processLoadPreRollAd(e,t),this.selfLog},t.showPreRollAd=function(e,t){this.processShowPreRollAd(e,t),this.selfLog},t.loadInterstitialAd=function(e,t){this.processLoadInterstitialAd(e,t),this.selfLog},t.showInterstitialAd=function(e,t){this.processShowInterstitialAd(e,t),this.selfLog},t.loadRewardedVideoAd=function(e,t){this.processLoadRewardedVideoAd(e,t),this.selfLog},t.showRewardedVideoAd=function(e,t){this.processShowRewardedVideoAd(e,t),this.selfLog},t.showBannerAd=function(e,t,n){this.processShowBannerAd(e,t,n),this.selfLog},t.receiveReward=function(e){this.processReceiveReward(e),this.selfLog},t.loadAdFail=function(e){this.processLoadAdFail(e),this.selfLog},t.showAdFail=function(e){this.processShowAdFail(e),this.selfLog},t.getPageByKey=function(e){var t=e.replace(/_/g,"-");return t=t.toLowerCase()},t.processLevelStart=function(e,t,n){},t.processLevelFail=function(e,t,n){},t.processLevelRescue=function(e,t,n){},t.processLevelComplete=function(e,t,n){},t.processLoadInterstitialAd=function(e,t){},t.processShowInterstitialAd=function(e,t){},t.processLoadPreRollAd=function(e,t){},t.processShowPreRollAd=function(e,t){},t.processLoadRewardedVideoAd=function(e,t){},t.processShowRewardedVideoAd=function(e,t){},t.processShowBannerAd=function(e,t,n){},t.processReceiveReward=function(e){},t.processLoadAdFail=function(e){},t.processShowAdFail=function(e){},e}();function V(e,t){var n="undefined"!==typeof E()&&A()(e)||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){var n;if(!e)return;if("string"===typeof e)return W(e,t);var i=g()(n=Object.prototype.toString.call(e)).call(n,8,-1);"Object"===i&&e.constructor&&(i=e.constructor.name);if("Map"===i||"Set"===i)return m()(e);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return W(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var i=0;return function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function W(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}GameCore.Analytics={BaseAnalytics:Y};var z=function(e){function t(){for(var t,n,i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];return(n=e.call.apply(e,T()(t=[this]).call(t,a))||this).analytics=void 0,n.pageview=function(e){if(n.isActive())for(var t,i=V(n.analytics);!(t=i()).done;){t.value.pageview(e)}},n}(0,o.Z)(t,e);var n=t.prototype;return n.init=function(){this.analytics=[]},n.add=function(e){this.analytics.push(e)},n.event=function(e,t,n){if(this.isActive())for(var i,a=V(this.analytics);!(i=a()).done;){i.value.event(e,t,n)}},n.levelStart=function(e,t,n){if(this.isActive())for(var i,a=V(this.analytics);!(i=a()).done;){i.value.levelStart(e,t,n)}},n.levelRescue=function(e,t,n){if(this.isActive())for(var i,a=V(this.analytics);!(i=a()).done;){i.value.levelRescue(e,t,n)}},n.levelFail=function(e,t,n){if(this.isActive())for(var i,a=V(this.analytics);!(i=a()).done;){i.value.levelFail(e,t,n)}},n.levelComplete=function(e,t,n){if(this.isActive())for(var i,a=V(this.analytics);!(i=a()).done;){i.value.levelComplete(e,t,n)}},n.loadPreRollAd=function(e,t){this.isActive()&&this.analytics.forEach((function(n){n.loadPreRollAd(e,t)}))},n.showPreRollAd=function(e,t){this.isActive()&&this.analytics.forEach((function(n){n.showPreRollAd(e,t)}))},n.loadInterstitialAd=function(e,t){this.isActive()&&this.analytics.forEach((function(n){n.loadInterstitialAd(e,t)}))},n.showInterstitialAd=function(e,t){this.isActive()&&this.analytics.forEach((function(n){n.showInterstitialAd(e,t)}))},n.loadRewardedVideoAd=function(e,t){this.isActive()&&this.analytics.forEach((function(n){n.loadRewardedVideoAd(e,t)}))},n.showRewardedVideoAd=function(e,t){this.isActive()&&this.analytics.forEach((function(n){n.showRewardedVideoAd(e,t)}))},n.showBannerAd=function(e,t,n){this.isActive()&&this.analytics.forEach((function(i){i.showBannerAd(e,t,n)}))},n.receiveReward=function(e){if(this.isActive())for(var t,n=V(this.analytics);!(t=n()).done;){t.value.receiveReward(e)}},n.loadAdFail=function(e){this.isActive()&&this.analytics.forEach((function(t){t.loadAdFail(e)}))},n.showAdFail=function(e){this.isActive()&&this.analytics.forEach((function(t){t.showAdFail(e)}))},n.isActive=function(){return this.analytics.length>=1},t}(Phaser.Plugins.BasePlugin),K=z,j=n(467),X=n.n(j),J=n(84),q=n.n(J),Q=function(){function e(e){var t=this;this.game=void 0,this.audios=void 0,this.volume=void 0,this.soundKeys=void 0,this.isMusicEnabled=function(){return!!t.game.player.getPlayerSetting("music")},this.isSoundEnabled=function(){return!!t.game.player.getPlayerSetting("sound")},this.game=e,this.audios=new(X()),this.soundKeys=new(X())}var t=e.prototype;return t.addSoundKeys=function(e){var t=this;q()(e).forEach((function(n){var i=e[n];"string"===typeof i&&t.soundKeys.set(n,i)}))},t.clearSoundKeys=function(){this.soundKeys.clear()},t.play=function(e,t){var n=this,i=(0,s.Z)({volume:this.volume},t||{});i.volume!==this.volume&&(i.volume*=this.volume);var a=this.audios.get(e);if(!a&&this.game.cache.audio.exists(e)){var r=this.game.sound.add(e);this.audios.set(e,r),a=r}if(a)a.play(void 0,i);else{var o=this.soundKeys.get(e);if(o)try{this.game.globalScene.load.audio(e,o),this.game.globalScene.load.on(Phaser.Loader.Events.FILE_KEY_COMPLETE+"audio-"+e,(function(){var t=n.game.sound.add(e);n.audios.set(e,t),t.play(void 0,i)})),this.game.globalScene.load.start()}catch(c){}}},t.pauseAll=function(){this.audios.forEach((function(e){e.pause()}))},t.resumeAll=function(){this.audios.forEach((function(e){e.resume()}))},t.stopAll=function(){this.audios.forEach((function(e){e.stop()}))},t.pause=function(e){var t=this.audios.get(e);t&&t.pause()},t.stop=function(e){var t=this.audios.get(e);t&&t.stop()},t.setVolume=function(e){this.volume=e},e}(),$=Q,ee=function(){function e(e,t){var n=this;this.name=void 0,this.game=void 0,this.isSprite=void 0,this.audio=void 0,this.markers=void 0,this.volume=void 0,this.isMusicEnabled=function(){return!!n.game.player.getPlayerSetting("music")},this.isSoundEnabled=function(){return!!n.game.player.getPlayerSetting("sound")},this.name=t,this.game=e,this.markers={},this.isSprite=!1,this.isSprite||(this.audio=this.game.sound.add(this.name))}var t=e.prototype;return t.play=function(e,t){var n,i,a,r=(0,s.Z)({volume:this.volume},t||{});if(r.volume!==this.volume&&(r.volume*=this.volume),!this.isSprite)return(null==(i=this.audio)?void 0:i.seek)>0?void this.audio.resume():void(null==(a=this.audio)||a.play(e,r));this.createMaker(e),null==(n=this.markers[e])||n.play(e,r)},t.pause=function(e){var t,n;this.isSprite?null==(t=this.markers[e])||t.pause():null==(n=this.audio)||n.pause()},t.stop=function(e){var t,n;this.isSprite?null==(t=this.markers[e])||t.stop():null==(n=this.audio)||n.stop()},t.setVolume=function(e){this.volume=e},t.createMaker=function(e){if(!this.markers[e])try{this.markers[e]=this.game.sound.addAudioSprite(this.name)}catch(t){}},e}(),te=ee,ne=function(e){function t(){for(var t,n,i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];return(n=e.call.apply(e,T()(t=[this]).call(t,a))||this).soundManager=void 0,n.musicManager=void 0,n.isMuteAll=void 0,n.initMusic=function(e){n.musicManager=new te(n.game,e),n.setMusicVolume(1)},n.initSound=function(){n.soundManager=new $(n.game),n.setSoundVolume(1)},n}(0,o.Z)(t,e);var n=t.prototype;return n.importSoundEffectKeys=function(e){this.soundManager.addSoundKeys(e)},n.playSound=function(e,t){try{if(!this.soundManager||this.isMuteAll||!this.game.visibility.isGameVisible())return;if(!this.soundManager.isSoundEnabled())return;this.soundManager.play(e,t)}catch(n){}},n.stopSound=function(e){try{this.soundManager.stop(e)}catch(t){}},n.playMusic=function(e){void 0===e&&(e={});try{if(!this.musicManager||this.isMuteAll||!this.game.visibility.isGameVisible())return;if(!this.musicManager.isMusicEnabled())return;this.musicManager.play("",(0,s.Z)({loop:!0,volume:.2},e))}catch(t){}},n.pauseMusic=function(){try{if(!this.musicManager)return;this.musicManager.pause("")}catch(e){}},n.stopMusic=function(){try{if(!this.musicManager)return;this.musicManager.stop("")}catch(e){}},n.pauseAllSounds=function(){try{if(!this.soundManager)return;this.soundManager.pauseAll()}catch(e){}},n.resumeAllSounds=function(){try{if(!this.soundManager)return;this.soundManager.resumeAll()}catch(e){}},n.setSoundVolume=function(e){try{if(!this.soundManager)return;this.soundManager.setVolume(e)}catch(t){}},n.setMusicVolume=function(e){try{if(!this.musicManager)return;this.musicManager.setVolume(e)}catch(t){}},n.muteAll=function(){this.isMuteAll=!0,this.game.sound.mute=!0},n.unmuteAll=function(){this.isMuteAll=!1,this.game.sound.mute=!1},t}(Phaser.Plugins.BasePlugin),ie=ne,ae=n(83),se="AUTH_TOKEN_REQUEST",re="AUTH_TOKEN_RECEIVED",oe=function(e){function t(t,n){var i;return(i=e.call(this,t)||this).payload=void 0,i.name="RequestTokenFail",i.message=t||"Request token fail",i.payload=n||{},i}return(0,o.Z)(t,e),t}((0,N.Z)(Error)),ce=n(448),le="auth",he=(0,ce.P1)([function(e){return e[le].token}],(function(e){return e})),ue=(0,ce.P1)([function(e){return e[le].isRequesting}],(function(e){return e})),de=function(e){return{type:re,payload:{token:e}}},pe=function(e){function t(){return e.apply(this,arguments)||this}(0,o.Z)(t,e);var n=t.prototype;return n.requestToken=function(){var e=(0,r.Z)(l().mark((function e(){var t;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.game.storage,e.next=3,t.dispatch(function(){var e=(0,r.Z)(l().mark((function e(t,n){var a,s,r,o;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,a=window.game.facebook,s=n(),r=he(s),!ue(s)&&""===r){e.next=7;break}return e.abrupt("return");case 7:return t({type:se,payload:{}}),e.next=10,a.getPlayerToken();case 10:o=e.sent,t(de(o)),e.next=25;break;case 14:if(e.prev=14,e.t0=e.catch(0),!(e.t0 instanceof Object&&GameCore.Utils.Object.hasOwn(e.t0,"code"))){e.next=19;break}if("PENDING_REQUEST"!==e.t0.code){e.next=19;break}return e.abrupt("return");case 19:if(t(de("")),!(e.t0 instanceof Object&&GameCore.Utils.Object.hasOwn(e.t0,"message"))){e.next=24;break}if("string"!==typeof e.t0.message){e.next=24;break}return(0,i.tO)(new Error(e.t0.message)),e.abrupt("return");case 24:(0,i.tO)(new oe);case 25:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(t,n){return e.apply(this,arguments)}}());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.getToken=function(){return he(this.state)},(0,ae.Z)(t,[{key:"state",get:function(){return this.game.storage.getState()}}]),t}(Phaser.Plugins.BasePlugin),ge=pe,fe=function(e,t){void 0===t&&(t=1);var n=new Image;n.onload=function(){var e,n;e=this.width*t,n=this.height*t,Math.floor(n/2),Math.floor(e/2)},n.src=e},me=function(e){function t(){for(var t,n,i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];return(n=e.call.apply(e,T()(t=[this]).call(t,a))||this).width=void 0,n.height=void 0,n.renderOptions=void 0,n.canvas=void 0,n}(0,o.Z)(t,e);var n=t.prototype;return n.preload=function(e){var t=this,n=q()(e);n.length<1||(n.forEach((function(n){t.scene.load.image(n,e[n])})),this.scene.load.start())},n.capture=function(){var e=(0,r.Z)(l().mark((function e(t){var n,i,a;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.width,i=t.height,a=t.renderOptions,this.width=n,this.height=i,this.renderOptions=a,this.createCanvas(),e.prev=5,e.next=8,this.loadImages();case 8:e.next=12;break;case 10:e.prev=10,e.t0=e.catch(5);case 12:return this.drawObjects(),e.abrupt("return",this.snapshotFrame());case 14:case"end":return e.stop()}}),e,this,[[5,10]])})));return function(t){return e.apply(this,arguments)}}(),n.createCanvas=function(){this.canvas||(this.canvas=this.game.textures.createCanvas("FrameCaptureCanvas")),this.canvas.clear(),this.canvas.setSize(this.width,this.height)},n.loadImages=function(){var e=[];for(var t in this.renderOptions){var n=this.renderOptions[t],i=n.name,a=n.image,s=n.fallbackWithImage;if(a)if(this.scene.textures.get(i).key!==i&&""!==i){var r=this.loadImage(i,a,s);e.push(r)}}return this.scene.load.start(),C().all(e)},n.loadImage=function(e,t,n){var i=this;return this.scene.load.image(e,t),new(C())((function(t,a){var s=Phaser.Loader.Events.FILE_KEY_COMPLETE+"image-"+e,r=Phaser.Loader.Events.FILE_LOAD_ERROR,o=function e(n){i.scene.load.off(s,e),i.scene.load.off(r,c),t()},c=function c(l){if(l.key===e)if(i.scene.load.off(s,o),i.scene.load.off(r,c),n)t();else{var h=new Error("Load image failed");a(h)}};i.scene.load.on(s,o),i.scene.load.on(r,c)}))},n.drawObjects=function(){for(var e in this.renderOptions){var t=this.renderOptions[e];switch(t.type){case"text":this.drawText(t);break;case"image":this.drawImage(t)}}},n.drawText=function(e){var t=this.canvas.context,n=e.x,i=e.y,a=e.font,s=e.text,r=e.fillStyle,o=e.lineWidth,c=e.textAlign;t.font=a+' nunito,-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Oxygen,Ubuntu,Cantarell,"Fira Sans","Droid Sans","Helvetica Neue",sans-serif',t.fillStyle=r||"#ffffff",o&&(t.lineWidth=o),c&&(t.textAlign=c),t.fillText(s,n,i)},n.drawImage=function(e){var t=this.canvas.context,n=e.x,i=e.y,a=e.name,s=e.frame,r=e.width,o=e.height,c=e.fallbackWithImage,l=this.scene.textures.get(a),h=l.getSourceImage(s);"__MISSING"===l.key&&c&&(h=(l=this.scene.textures.get(c)).getSourceImage()),t.drawImage(h,n,i,r,o)},n.snapshotFrame=function(){var e=this.canvas.getCanvas().toDataURL("image/jpeg",.85);return GameCore.Utils.Valid.isDebugger()&&fe(e),e},t}(Phaser.Plugins.ScenePlugin),ve=me,Ee={sound:!0,music:!0,vibrate:!0,language:"en",theme:GameCore.Configs.DefaultTheme},Se=n(85),Ae=n.n(Se),ye=n(103),Te=n.n(ye),Ie=Ee.sound,Ce=Ee.music,be=Ee.vibrate,Oe=Ee.language,Pe=Ee.theme,Re=function(){function e(e){this.sound=void 0,this.music=void 0,this.vibrate=void 0,this.language=void 0,this.theme=void 0;var t=e||{},n=t.sound,i=t.music,a=t.vibrate,s=t.language,r=t.theme;this.sound=GameCore.Utils.Valid.isBoolean(n)?n:Ie,this.music=GameCore.Utils.Valid.isBoolean(i)?i:Ce,this.vibrate=GameCore.Utils.Valid.isBoolean(a)?a:be,this.language=GameCore.Utils.Valid.isString(s)?s:Oe,this.theme=GameCore.Utils.Valid.isString(r)?r:Pe}return e.prototype.toObject=function(){return{sound:this.sound,music:this.music,vibrate:this.vibrate,language:this.language,theme:this.theme}},e}(),we=Re,xe=GameCore.Utils,ke=xe.Valid,_e=xe.Object,Le=function(){function e(e){this.score=void 0,this.settings=void 0,this.gameData=void 0,this.userGuideDisplays=void 0,this.timeAddShortcut=void 0,this.setupDefaultData(),this.updateScore(e),this.updateSettings(e),this.updateGameData(e),this.updateUserGuideDisplays(e),this.updateTimeAddShortcut(e)}var t=e.prototype;return t.setupDefaultData=function(){this.score=0,this.settings=(0,s.Z)({},Ee),this.gameData={coins:0,diamond:0,lastReceiveGift:0,dailyRewarded:{lastRewarded:0,logDays:[]},dailyTasks:{startedTime:0,logTasks:{}}},this.userGuideDisplays=0,this.timeAddShortcut=0},t.updateScore=function(e){var t=e.score;!1!==ke.isNumber(t)&&(this.score=t)},t.updateSettings=function(e){var t=e.settings;if(!1!==ke.isObject(t)){var n=new we(t).toObject();this.settings=n}},t.updateGameData=function(e){var t=e.gameData;if(!1!==ke.isObject(t)){if(_e.hasOwn(t,"coins")&&ke.isNumber(t.coins)&&(this.gameData.coins=t.coins),_e.hasOwn(t,"diamond")&&ke.isNumber(t.diamond)&&(this.gameData.diamond=t.diamond),_e.hasOwn(t,"lastReceiveGift")&&ke.isNumber(t.lastReceiveGift)&&(this.gameData.lastReceiveGift=t.lastReceiveGift),_e.hasOwn(t,"dailyRewarded")&&ke.isObject(t.dailyRewarded)){var n=t.dailyRewarded;_e.hasOwn(n,"lastRewarded")&&ke.isNumber(n.lastRewarded)&&(this.gameData.dailyRewarded.lastRewarded=n.lastRewarded),_e.hasOwn(n,"logDays")&&Array.isArray(n.logDays)&&(this.gameData.dailyRewarded.logDays=n.logDays)}if(_e.hasOwn(t,"dailyTasks")&&ke.isObject(t.dailyTasks)){var i=t.dailyTasks;_e.hasOwn(i,"startedTime")&&ke.isNumber(i.startedTime)&&(this.gameData.dailyTasks.startedTime=i.startedTime),_e.hasOwn(i,"logTasks")&&ke.isObject(i.logTasks)&&(this.gameData.dailyTasks.logTasks=i.logTasks)}}},t.updateUserGuideDisplays=function(e){var t=e.userGuideDisplays;!1!==ke.isNumber(t)&&(this.userGuideDisplays=t)},t.updateTimeAddShortcut=function(e){var t=e.timeAddShortcut;!1!==ke.isNumber(t)&&(this.timeAddShortcut=t)},t.toObject=function(){return{score:this.score,settings:this.settings,gameData:this.gameData,userGuideDisplays:this.userGuideDisplays,timeAddShortcut:this.timeAddShortcut}},t.convertToPlayerData=function(){var e=this.gameData,t=e.coins,n=e.diamond,i=e.dailyTasks,a=e.dailyRewarded,s=e.lastReceiveGift;return{score:this.score,settings:this.settings,customFields:{coins:t,diamond:n,dailyTasks:i,dailyRewarded:a,lastReceiveGift:s},userGuideDisplays:this.userGuideDisplays,timeAddShortcut:this.timeAddShortcut}},t.convertToFacebookData=function(e){var t=e.score,n=e.settings,i=e.customFields,a=e.userGuideDisplays,s=e.timeAddShortcut;return this.updateScore({score:t}),this.updateSettings({settings:n}),this.updateGameData({gameData:i}),this.updateUserGuideDisplays({userGuideDisplays:a}),this.updateTimeAddShortcut({timeAddShortcut:s}),this.toObject()},e}(),De=Le,Me=n(450),Ne=GameCore.Configs.ApiHost,Be=function(){var e=(0,r.Z)(l().mark((function e(t){var n;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Ne){e.next=2;break}return e.abrupt("return",{});case 2:return e.next=4,(0,Me.v)("players?platform=ms-games",t,{},Ne,10);case 4:return n=e.sent,e.abrupt("return",(null==n?void 0:n.data)||{});case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ge=function(){var e=(0,r.Z)(l().mark((function e(t){var n;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Ne){e.next=2;break}return e.abrupt("return",{});case 2:return e.next=4,(0,Me.v)("players/"+t+"/user-guide-displays/inc",{},{},Ne);case 4:return n=e.sent,e.abrupt("return",(null==n?void 0:n.data)||{});case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Fe="PLAYER_RECEIVED",Ue="PLAYER_DATA_UPDATE",He="PLAYER_SCORE_UPDATE",Ze="PLAYER_PROFILE_UPDATE",Ye="PLAYER_SETTING_UPDATE",Ve="PLAYER_CONNECTED_PLAYERS_UPDATE",We=n(446),ze=function(e){function t(t,n){var i;return(i=e.call(this,t)||this).payload=void 0,i.name="PlayerDataNameNotSupport",i.message=t||"The name of player data is not supported",i.payload=n||{},i}return(0,o.Z)(t,e),t}((0,N.Z)(Error)),Ke="player",je=(0,ce.P1)([function(e){return e[Ke]}],(function(e){return e})),Xe=(0,ce.P1)([je],(function(e){return e.playerId})),Je=(0,ce.P1)([je],(function(e){return e.ASID})),qe=(0,ce.P1)([function(e){return e[Ke].data}],(function(e){return e})),Qe=((0,ce.P1)([qe],(function(e){return e.settings})),(0,ce.P1)([function(e){return e[Ke].connectedPlayers}],(function(e){return e}))),$e=(0,ce.P1)([Qe,function(e,t){return t.limit},function(e,t){return t.offset}],(function(e,t,n){if("number"!==typeof t)return[];if("number"!==typeof n)return[];var i=q()(e);return g()(i).call(i,n,t+n)||[]})),et=(0,ce.P1)([qe],(function(e){return e.score})),tt=(0,ce.P1)([qe],(function(e){return e.customFields})),nt=GameCore.Configs,it=nt.AppId,at=nt.Tutorial,st=function(e,t){return function(n){var i=e.playerId,a=e.name,s=e.photo,r=e.locale;n({type:Fe,payload:{playerId:i,name:a,photo:s,locale:r,data:t||{}}})}},rt=function(e){return{type:Ve,payload:{connectedPlayers:e}}},ot=function(e,t){return function(){var n=(0,r.Z)(l().mark((function n(a,s){var r,o,c;return l().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,a({type:Ye,payload:{name:e,value:t}});case 3:r=s(),o=qe(r),c=new De({}).convertToFacebookData(o),FBInstant.player.setDataAsync(c),n.next=12;break;case 9:n.prev=9,n.t0=n.catch(0),(0,i.tO)(n.t0);case 12:case"end":return n.stop()}}),n,null,[[0,9]])})));return function(e,t){return n.apply(this,arguments)}}()},ct=function(e,t){return function(){var n=(0,r.Z)(l().mark((function n(a,s){var r,o,c,h,u;return l().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,o={customFields:(r={},r[e]=t,r)},n.next=4,a(ht(o));case 4:c=s(),h=qe(c),u=new De({}).convertToFacebookData(h),FBInstant.player.setDataAsync(u),n.next=15;break;case 10:if(n.prev=10,n.t0=n.catch(0),!(n.t0 instanceof ze)){n.next=14;break}return n.abrupt("return");case 14:(0,i.tO)(n.t0);case 15:case"end":return n.stop()}}),n,null,[[0,10]])})));return function(e,t){return n.apply(this,arguments)}}()},lt=function(e){return function(){var t=(0,r.Z)(l().mark((function t(n,a){var s,r,o,c;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,s={customFields:e},t.next=4,n(ht(s));case 4:r=a(),o=qe(r),c=new De({}).convertToFacebookData(o),FBInstant.player.setDataAsync(c),t.next=16;break;case 10:if(t.prev=10,t.t0=t.catch(0),!(t.t0 instanceof ze)){t.next=15;break}return t.abrupt("return");case 15:(0,i.tO)(t.t0);case 16:case"end":return t.stop()}}),t,null,[[0,10]])})));return function(e,n){return t.apply(this,arguments)}}()},ht=function(e){return{type:Ue,payload:{data:e}}},ut=function(e){return function(){var t=(0,r.Z)(l().mark((function t(n,a){var s,r,o;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,n({type:He,payload:{score:e}});case 3:Be({score:e}),s=a(),r=qe(s),o=new De({}).convertToFacebookData(r),FBInstant.player.setDataAsync(o),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(0),(0,i.tO)(t.t0);case 13:case"end":return t.stop()}}),t,null,[[0,10]])})));return function(e,n){return t.apply(this,arguments)}}()},dt=function(e){return function(){var t=(0,r.Z)(l().mark((function t(n,a){var s,r,o;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,n(ht({timeAddShortcut:e}));case 3:s=a(),r=qe(s),o=new De({}).convertToFacebookData(r),FBInstant.player.setDataAsync(o),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),(0,i.tO)(t.t0);case 12:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e,n){return t.apply(this,arguments)}}()},pt=function(e){function t(){return e.apply(this,arguments)||this}(0,o.Z)(t,e);var n=t.prototype;return n.incUserGuideDisplays=function(){var e=(0,r.Z)(l().mark((function e(){var t;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.game.storage,e.next=3,t.dispatch(function(){var e=(0,r.Z)(l().mark((function e(t,n){var a,s,r,o;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!at.ForceUseTutorial){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,t(ht({userGuideDisplays:1}));case 5:a=n(),s=Xe(a),r=qe(a),o=new De({}).convertToFacebookData(r),FBInstant.player.setDataAsync(o),Ge(s),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),(0,i.tO)(e.t0);case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t,n){return e.apply(this,arguments)}}());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.receiveData=function(){var e=(0,r.Z)(l().mark((function e(t,n){var i;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=this.game.storage,e.next=3,i.dispatch(st(t,n));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}(),n.updateData=function(){var e=(0,r.Z)(l().mark((function e(){var t;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.game.storage,e.next=3,t.dispatch(function(){var e=(0,r.Z)(l().mark((function e(t,n){var a,s,r,o,c,h,u,d;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a=n(),s=je(a),r=s.playerId,o=s.name,c=s.photo,h=s.locale,e.next=6,FBInstant.player.getASIDAsync();case 6:return u=e.sent,d={appId:it,playerId:r,name:o,photo:c,locale:h,ASID:u},e.next=10,t({type:Ze,payload:{profile:d}});case 10:return e.next=12,Be(d);case 12:e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),(0,i.tO)(e.t0);case 17:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(t,n){return e.apply(this,arguments)}}());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.setBestScore=function(){var e=(0,r.Z)(l().mark((function e(t){var n;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.game.storage,e.next=3,n.dispatch(ut(t));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.setTimeAddShortcut=function(){var e=(0,r.Z)(l().mark((function e(t){var n;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.game.storage,e.next=3,n.dispatch(dt(t));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.setSetting=function(){var e=(0,r.Z)(l().mark((function e(t,n){var i;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=this.game.storage,e.next=3,i.dispatch(ot(t,n));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}(),n.setCustomData=function(){var e=(0,r.Z)(l().mark((function e(t,n){var i;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=this.game.storage,e.next=3,i.dispatch(ct(t,n));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}(),n.setMultiCustomData=function(){var e=(0,r.Z)(l().mark((function e(t){var n;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.game.storage,e.next=3,n.dispatch(lt(t));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.requestConnectedPlayers=function(){var e=(0,r.Z)(l().mark((function e(){var t;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.game.storage,e.next=3,t.dispatch(function(){var e=(0,r.Z)(l().mark((function e(t){var n,a,s,r;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,FBInstant.player.getConnectedPlayersAsync();case 3:if(a=e.sent,s=function(e){return!!e},r=Ae()(n=Te()(a).call(a,(function(e){var t=e.getID(),n=e.getName(),i=e.getPhoto();return t&&n&&i?new We.Z(t,n,i).toObject():null}))).call(n,s),!(r.length<1)){e.next=8;break}return e.abrupt("return");case 8:t(rt(r)),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),(0,i.tO)(e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t){return e.apply(this,arguments)}}());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.updateConnectedPlayers=function(){var e=(0,r.Z)(l().mark((function e(t){var n;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.game.storage,e.next=3,n.dispatch(rt(t));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.getPlayer=function(){return je(this.state)},n.getPlayerId=function(){return this.getPlayer().playerId},n.getPlayerASID=function(){return Je(this.state)},n.getPlayerData=function(){return this.getPlayer().data},n.getPlayerSetting=function(e){var t=this.getPlayerSettings();return"string"!==typeof e?null:GameCore.Utils.Object.hasOwn(t,e)?t[e]:GameCore.Utils.Object.hasOwn(Ee,e)?Ee[e]:null},n.getPlayerSettings=function(){return this.getPlayerData().settings},n.getPlayerIsNew=function(){return this.getPlayer().isUserNew},n.getDiamond=function(){var e=this.getCustomData("diamond");return GameCore.Utils.Valid.isNumber(e)?e:0},n.getBestScore=function(){return et(this.state)},n.getCustomData=function(e){var t=tt(this.state);return GameCore.Utils.Valid.isObject(t)&&GameCore.Utils.Object.hasOwn(t,e)?t[e]:null},n.getConnectedPlayers=function(){return Qe(this.state)},n.getConnectedPlayerIds=function(e,t){return $e(this.state,{limit:e,offset:t})},(0,ae.Z)(t,[{key:"state",get:function(){return this.game.storage.getState()}}]),t}(Phaser.Plugins.BasePlugin),gt=pt,ft=GameCore.Configs.ApiHost,mt=function(){var e=(0,r.Z)(l().mark((function e(t){var n,i;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(ft){e.next=2;break}return e.abrupt("return",[]);case 2:return n=GameCore.Utils.String.params(t),e.next=5,(0,Me.U)("players?"+n,{},ft);case 5:return i=e.sent,e.abrupt("return",(null==i?void 0:i.data)||[]);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),vt="PROFILES_DATA_UPDATE",Et="profile",St=(0,ce.P1)([function(e){return e[Et].data}],(function(e){return e})),At=(0,ce.P1)([function(e){return e[Et].profileIds}],(function(e){return e})),yt=function(e){return function(){var t=(0,r.Z)(l().mark((function t(n,a){var s,r,o,c;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,s=a(),r=At(s),!((o=GameCore.Utils.Array.difference(e,r)).length<1)){t.next=6;break}return t.abrupt("return");case 6:return t.next=8,mt({playerIds:o});case 8:c=t.sent,n({type:vt,payload:{data:c}}),t.next=15;break;case 12:t.prev=12,t.t0=t.catch(0),(0,i.tO)(t.t0);case 15:case"end":return t.stop()}}),t,null,[[0,12]])})));return function(e,n){return t.apply(this,arguments)}}()},Tt=function(e){function t(){return e.apply(this,arguments)||this}(0,o.Z)(t,e);var n=t.prototype;return n.requestProfiles=function(){var e=(0,r.Z)(l().mark((function e(t){var n;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.game.storage,e.next=3,n.dispatch(yt(t));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.getProfiles=function(){return St(this.state)},(0,ae.Z)(t,[{key:"state",get:function(){return this.game.storage.getState()}}]),t}(Phaser.Plugins.BasePlugin),It=Tt,Ct=function(e){function t(){return e.apply(this,arguments)||this}return(0,o.Z)(t,e),t.prototype.emit=function(t,n){return e.prototype.emit.call(this,t,n)},t}(Phaser.Events.EventEmitter),bt=Ct,Ot=n(82),Pt=n(449),Rt=function(e){function t(t,n,i,a){var s;(s=e.call(this,t)||this).zone=void 0,s.background=void 0,s.setName(n),s.setVisible(!1);var r=s.scene.world.getWorldSize(),o=r.width,c=r.height;return s.setSize(i||o,a||c),s.addZone(),s.addBackground(),s.registerEvents(),s}(0,o.Z)(t,e);var n=t.prototype;return n.open=function(e){GameCore.Utils.Valid.isObject(e)&&(this.setDataEnabled(),this.setData(e)),this.setBlockInputOutsideEnabled(!0),this.scene.screen.bringToTop(this.name),this.visible||(this.setVisible(!0),this.logPageviewOnOpen(),this.logEventOpen(),this.handleResize())},n.close=function(){this.setBlockInputOutsideEnabled(!1),this.visible&&(this.setVisible(!1),this.logPageviewOnClose())},n.incY=function(e){this.y+=e,this.background.y-=e},n.incX=function(e){this.x+=e,this.background.x-=e},n.incScale=function(e){this.scale+=e,this.background.scale-=e^e*(100/e)},n.setBlockInputOutsideEnabled=function(e){this.scene.input.setTopOnly(e)},n.addZone=function(){this.zone=this.scene.add.zone(0,0,this.width,this.height),this.zone.setInteractive({}),this.add(this.zone)},n.addBackground=function(){var e="screen-background";if(!this.scene.textures.exists(e)){var t=this.width+2,n=this.height+2,i=this.scene.add.graphics();i.fillStyle(0,1),i.fillRect(0,0,t,n),i.generateTexture(e,t,n),i.destroy()}this.background=this.scene.add.image(0,0,e),this.add(this.background)},n.registerEvents=function(){this.scene.world.events.on(Pt.Z.RESIZE,this.handleResize,this)},n.handleResize=function(){var e=this.scene.world.getWorldSize(),t=e.width,n=e.height;this.setSize(t,n).setPosition(t/2,n/2),this.zone.setSize(this.width,this.height),this.background.setDisplaySize(this.width,this.height)},n.logPageviewOnOpen=function(){this.scene.analytics.pageview(this.name)},n.logPageviewOnClose=function(){this.scene.analytics.pageview(this.scene.scene.key)},n.logEventOpen=function(){this.scene.analytics.event(Ot._.SCREEN_OPEN,{screen_name:this.getScreenName()})},n.getScreenName=function(){return GameCore.Utils.String.toUpperCamelCase(this.name.toLowerCase())},t}(Phaser.GameObjects.Container),wt=Rt,xt={OPEN:"open",CLOSE:"close",CREATED:"created"};GameCore.Screen=wt,GameCore.Screens={Events:xt};var kt=function(e){function t(){for(var t,n,i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];return(n=e.call.apply(e,T()(t=[this]).call(t,a))||this).events=void 0,n}(0,o.Z)(t,e);var n=t.prototype;return n.boot=function(){this.events=new bt,this.registryScreenFactory()},n.get=function(e){var t=this.scene.children.getByName(e);return null===t?null:t},n.add=function(e,t,n,i){var a=this.get(e);return a||(a=this.scene.add.screen(e,t,n,i),this.events.emit(GameCore.Screens.Events.CREATED,a),a)},n.open=function(e,t){var n=this.get(e);return!!n&&(n.open(t),n.emit(GameCore.Screens.Events.OPEN,n),this.events.emit(GameCore.Screens.Events.OPEN,n),!0)},n.close=function(e){var t=this.get(e);return!!t&&(t.close(),t.emit(GameCore.Screens.Events.CLOSE,t),this.events.emit(GameCore.Screens.Events.CLOSE,t),!0)},n.bringToTop=function(e){var t=this.scene.children.getByName(e);t&&this.scene.children.bringToTop(t)},n.registryScreenFactory=function(){Phaser.GameObjects.GameObjectFactory.register("screen",this.createScreen)},n.createScreen=function(e,t,n,i){var a=new t(this.scene,e,n,i);return Phaser.Display.Align.In.Center(a,this.scene.gameZone),this.existing(a),a},t}(Phaser.Plugins.ScenePlugin),_t=kt,Lt=n(410),Dt=n.n(Lt),Mt=n(621),Nt=n(622),Bt=n(447),Gt=n(623),Ft={currentSceneKey:"",prevSceneKey:""};(0,Gt.pV)();var Ut,Ht,Zt,Yt,Vt,Wt,zt,Kt,jt,Xt,Jt,qt={processed:!1,contextId:"",contextType:"SOLO",entryPointData:{},currentGameMode:""},Qt=qt,$t={data:{}},en={token:"",isRequesting:!1},tn=((Ut={})[le]=function(e,t){return void 0===e&&(e=en),(0,Gt.ZP)(e,(function(e){var n=t.payload;if(n){var i=n.token;switch(t.type){case se:e.isRequesting=!0;break;case re:e.token=i,e.isRequesting=!1}}}))},Ut),nn=n(126),an={ASID:"",playerId:"",name:"",photo:"",locale:"",connectedPlayers:{},data:{score:0,settings:Ee,userGuideDisplays:0,customFields:{},timeAddShortcut:0},isUserNew:!0},sn=((Ht={})[Ke]=function(e,t){return void 0===e&&(e=an),(0,Gt.ZP)(e,(function(n){var i=t.payload;if(i){var a=i.name,s=i.value,r=i.data,o=void 0===r?{}:r,c=i.score,l=i.connectedPlayers,h=void 0===l?[]:l,u=i.profile;switch(t.type){case Fe:var d=i.playerId,p=i.name,g=i.photo,f=i.locale,m=i.data;if(n.playerId=d,n.name=p,n.photo=g,n.locale=f,GameCore.Utils.Valid.isObject(m)){var v=m;n.data=(0,nn.TS)(e.data,v)}m.userGuideDisplays>0&&(n.isUserNew=!1);break;case Ze:var E=u.playerId,S=u.name,A=u.photo,y=u.locale,T=u.ASID;n.ASID=T,n.playerId=E,n.name=S,n.photo=A,n.locale=y;break;case He:n.data.score=c;break;case Ye:if(!GameCore.Utils.Object.hasOwn(n.data.settings,a))break;n.data.settings[a]=s;break;case Ue:n.data=(0,nn.TS)(e.data,o),o.userGuideDisplays>0&&(n.isUserNew=!1);break;case Ve:if(h.length<=0)break;var I=GameCore.Utils.Object.keyBy(h,"playerId");n.connectedPlayers=(0,nn.TS)(e.connectedPlayers,I)}}}))},Ht),rn=n(603),on=n.n(rn),cn={data:{},profileIds:[]},ln=((Zt={})[Et]=function(e,t){return void 0===e&&(e=cn),(0,Gt.ZP)(e,(function(n){var i=t.payload;if(i){var a=i.data,r=void 0===a?[]:a;if(t.type===vt){var o,c,l=GameCore.Utils.Object.keyBy(r,"playerId"),h=q()(l);n.data=(0,nn.TS)((0,s.Z)({},e.data),l),n.profileIds=T()(o=[]).call(o,new(on())(T()(c=[]).call(c,e.profileIds,h)))}}}))},Zt),hn="match",un="MATCH_GAMEPLAY_INITIALIZE",dn="MATCH_GAMEPLAY_START",pn="MATCH_GAMEPLAY_FINISH",gn="MATCH_GAMEPLAY_UPDATE",fn="MATCH_GAMEPLAY_RESCUE",mn="MATCH_GAMEPLAY_RESET_RESCUE",vn="MATCH_GAMEPLAY_SHOW_MINI_JOURNEY",En="MATCH_STATS_DATA_CLEAR",Sn="MATCH_STATS_DATA_UPDATE",An="MATCH_STATS_CURRENT_UPDATE",yn="MATCH_SINGLE_CREATE_REQUEST",Tn="MATCH_SINGLE_DETAIL_REQUEST",In="MATCH_SINGLE_MOVE_UPDATED",Cn="MATCH_SINGLE_DATA_RECEIVED",bn="MATCH_SINGLE_DATA_CLEAR",On="MATCH_JOURNEY_CREATE_REQUEST",Pn="MATCH_JOURNEY_MOVE_UPDATED",Rn="MATCH_JOURNEY_DATA_RECEIVED",wn="MATCH_JOURNEY_DAILY_CHALLENGE_START",xn="MATCH_JOURNEY_DAILY_CHALLENGE_COMPLETED",kn="MATCH_JOURNEY_SCORE_RECEIVED",_n="MATCH_JOURNEY_LEVEL_RECEIVED",Ln="MATCH_CHALLENGE_JOIN_REQUEST",Dn="MATCH_CHALLENGE_CREATE_REQUEST",Mn="MATCH_CHALLENGE_FINISH_REQUEST",Nn="MATCH_CHALLENGE_CONTINUE_REQUEST",Bn="MATCH_CHALLENGE_DATA_RECEIVED",Gn="MATCH_CHALLENGE_DATA_CLEAR",Fn="MATCH_GROUP_CREATE_REQUEST",Un="MATCH_GROUP_FINISH_REQUEST",Hn="MATCH_ONLINE_CREATE_REQUEST",Zn="MATCH_ONLINE_DATA_RECEIVED",Yn="open",Vn="active",Wn="finished",zn={mode:"",status:Yn,rescued:0,startAt:0,finishAt:0,showMiniJourney:null},Kn={single:{_id:"",data:{fen:""},playerId:"",status:Yn},group:{status:Yn,opponentInfo:{playerId:"",name:"",photo:""}},challenge:{_id:"",status:Yn,whitePlayerId:"",blackPlayerId:"",opponentInfo:{playerId:"",name:"",photo:""}},online:{_id:"",status:Yn,players:{}},journey:{_id:"",data:{fen:""},playerId:"",status:Yn,challengeMode:!1},updateAt:0,isRequesting:!1},jn={current:{updateAt:0},data:{updateAt:0},isRequesting:!1},Xn=((Yt={})[hn]=(0,Mt.UY)({gameplay:function(e,t){return void 0===e&&(e=zn),(0,Gt.ZP)(e,(function(n){var i=t.payload;if(i){var a=i.mode,s=i.status,r=i.stateShowMiniJourney,o=i.rescued;switch(t.type){case un:n.status=Yn,n.mode=zn.mode,n.rescued=zn.rescued,n.startAt=zn.startAt,n.finishAt=zn.finishAt,n.opponentInfo=zn.opponentInfo;break;case dn:n.mode=a,n.status=Vn,n.rescued=o,n.startAt=Date.now();break;case gn:n.mode="string"===typeof a?a:e.mode,n.status=s||e.status;break;case pn:n.status=Wn,n.finishAt=Date.now();break;case fn:n.rescued+=1;break;case vn:n.showMiniJourney=r;break;case mn:n.rescued=0}}}))},match:function(e,t){return void 0===e&&(e=Kn),(0,Gt.ZP)(e,(function(n){var i=t.payload;if(i){var a=i.match,r=i.opponentInfo,o=i.players,c=i.score,l=i.level;switch(t.type){case yn:case Tn:case Ln:case Mn:case Hn:case On:n.isRequesting=!0;break;case In:n.single=(0,s.Z)({},e.single,a),n.updateAt=Date.now();break;case Pn:n.journey=(0,s.Z)({},e.journey,a),n.updateAt=Date.now();break;case wn:n.journey.challengeMode=!0;break;case xn:n.journey.challengeMode=!1;break;case Cn:n.isRequesting=!1,n.single=a||Kn.single;break;case Rn:n.isRequesting=!1,n.journey=a||Kn.journey;break;case kn:n.journey.score=c;break;case _n:n.journey.level=l;break;case bn:n.isRequesting=!1,n.single=Kn.single;break;case"MATCH_JOURNEY_DATA_CLEAR":n.isRequesting=!1,n.journey=Kn.journey;break;case Dn:case Nn:n.isRequesting=!0,n.challenge.opponentInfo=r;break;case Bn:n.isRequesting=!1,n.challenge=(0,s.Z)({},a||Kn.challenge),n.challenge.opponentInfo=e.challenge.opponentInfo;break;case Gn:n.isRequesting=!1,n.challenge=Kn.challenge;break;case Fn:n.group.status=Vn,r&&(n.group.opponentInfo=r);break;case Un:n.group.status=Wn;break;case"MATCH_ONLINE_DATA_CLEAR":n.online.status=Kn.online.status,n.online.players=Kn.online.players;break;case Zn:n.online.status=Vn,n.online.players=o;break;case"MATCH_ONLINE_FINISH_REQUEST":n.online.status=Wn}}}))},stats:function(e,t){return void 0===e&&(e=jn),(0,Gt.ZP)(e,(function(n){var i=t.payload;if(i){var a=i.playerId,r=i.stats,o=i.match,c=i.current,l=i.players,h=i.leaders;switch(t.type){case En:delete n.data[a],n.current=jn.current;break;case"MATCH_STATS_CONTEXT_REQUEST":n.data=jn.data,n.isRequesting=!0;break;case"MATCH_STATS_CONTEXT_RECEIVED":n.data=r,n.isRequesting=!1;break;case Sn:n.data[a]=r;break;case An:n.current=(0,nn.TS)((0,s.Z)({},e.current),r);break;case Zn:q()(l).forEach((function(e){n.data[e]={score:0}}));break;case"MATCH_ONLINE_STATS_UPDATE":h.forEach((function(e){var t=e.playerId,i=e.score,a=e.rank;n.data[t]={score:i,rank:a}}));break;case Bn:var u=o||{},d=u.blackPlayerId,p=u.blackPlayerScore,g=u.whitePlayerId,f=u.whitePlayerScore,m=u.whitePlayerLevel,v=u.blackPlayerLevel;if(!d||!g)break;c&&(n.current=c),n.data[d]={score:p,level:v},n.data[g]={score:f,level:m}}}}))}}),Yt),Jn="TOURNAMENT_ACTIVE",qn="TOURNAMENT_REQUEST",Qn="TOURNAMENT_RECEIVED",$n={active:!1,tournamentId:null,bestSessionScore:0,isRequesting:!1},ei=((Vt={}).tournament=function(e,t){return void 0===e&&(e=$n),(0,Gt.ZP)(e,(function(n){var i=t.payload;if(i){var a=i.score,s=void 0===a?0:a,r=i.tournamentId;switch(t.type){case Jn:n.active=!0,n.tournamentId=r;break;case qn:n.isRequesting=!0;break;case Qn:n.isRequesting=!1,s>e.bestSessionScore&&(n.bestSessionScore=s)}}}))},Vt),ti="leaderboards",ni=n(132),ii=n.n(ni),ai=n(131),si=n.n(ai),ri="LEADERBOARD_DATA_REQUEST",oi="LEADERBOARD_DATA_UPDATE",ci="LEADERBOARD_DATA_CLEAR",li={leaderboardId:"",type:"",limit:0,offset:0,leaders:{},isRequesting:!1},hi=((Wt={})[ti]=function(e,t){return void 0===e&&(e=li),(0,Gt.ZP)(e,(function(n){var i=t.payload;if(i){var a=i.leaderboardId,r=i.type,o=i.limit,c=i.offset,l=i.leaders;switch(t.type){case ri:e.type!==r&&0===c&&(n.leaders=li.leaders),n.isRequesting=!0,n.leaderboardId=a,n.type=r,n.limit=o,n.offset=c;break;case oi:if(n.isRequesting=!1,e.type!==r)break;var h=GameCore.Utils.Json.clone((0,s.Z)({},e.leaders,l)),u=ii()(h),d=Te()(u).call(u,(function(e){return e.name&&e.photo||(e.name="Unknown",e.photo=""),e}));si()(d).call(d,(function(e,t){return+t.score-+e.score})),d.forEach((function(t,i){t.rank=i+1,e.leaders[t.playerId]||(n.leaders[t.playerId]=t)}));break;case ci:n.isRequesting=!1,n.type=li.type,n.limit=li.limit,n.offset=li.offset,n.leaders=li.leaders,n.leaderboardId=li.leaderboardId}}}))},Wt),ui="missions",di="MISSIONS_DATA_REQUEST",pi="MISSIONS_DATA_RECEIVE",gi="MISSION_UPDATE",fi="MISSION_COMPLETED",mi={mission:null,missions:null,isRequesting:!1},vi=((zt={})[ui]=function(e,t){return void 0===e&&(e=mi),(0,Gt.ZP)(e,(function(n){var i,a,s=t.payload;if(s){var r=s.name,o=s.type,c=s.value,l=s.missions;switch(t.type){case di:n.isRequesting=!0;break;case pi:if(n.isRequesting=!1,l.length<1)return;n.missions={},l.forEach((function(e){n.missions[e.name]=e}));break;case"MISSION_START":if(null===e.missions)break;var h=e.missions[r];n.mission={name:r,process:{},require:h.require,reward:h.reward},q()(h.require).forEach((function(e){n.mission.process[e]=0}));break;case gi:if((null==(i=e.mission)?void 0:i.name)!==r)break;n.mission.process[o]+=c;break;case fi:if((null==(a=e.mission)?void 0:a.name)!==r)break;n.mission=null}}}))},zt),Ei="dailyTasks",Si="DAILY_TASKS_DATA_REQUEST",Ai="DAILY_TASKS_DATA_RECEIVE",yi="DAILY_TASKS_PROCESS_UPDATE",Ti="DAILY_TASK_VALUE_ADD",Ii="DAILY_TASK_FINISHED",Ci={tasks:[],process:[],isRequesting:!1,isNotice:!1},bi=((Kt={})[Ei]=function(e,t){return void 0===e&&(e=Ci),(0,Gt.ZP)(e,(function(n){var i=t.payload;if(i){var a=i.id,s=i.type,r=i.value,o=i.tasks,c=i.process;switch(t.type){case Si:n.isRequesting=!0;break;case Ai:n.isRequesting=!1,n.tasks=o;break;case yi:n.process=c;break;case Ti:if(!e.process[a])break;n.process[a][s]+=r;break;case"DAILY_TASK_REWARDED":if(!e.process[a])break;n.process[a].rewarded=!0;break;case"DAILY_TASKS_SEEN":n.isNotice=!1;break;case Ii:n.isNotice=!0}}}))},Kt),Oi={rewards:[],isRequesting:!1},Pi=((jt={}).dailyRewards=function(e,t){return void 0===e&&(e=Oi),(0,Gt.ZP)(e,(function(e){var n=t.payload;if(n){var i=n.rewards;switch(t.type){case"DAILY_REWARDS_REQUEST":e.isRequesting=!0;break;case"DAILY_REWARDS_RECEIVE":e.isRequesting=!1,e.rewards=i}}}))},jt),Ri="dailyChallenge",wi="DAILY_CHALLENGE_REQUEST",xi="DAILY_CHALLENGE_UPDATE",ki="DAILY_CHALLENGE_TIME_PLAY_UPDATE",_i={leaders:{},isRequesting:!1,time:0},Li=((Xt={})[Ri]=function(e,t){return void 0===e&&(e=_i),(0,Gt.ZP)(e,(function(e){var n=t.payload;if(n){var i=n.leaders,a=n.time;switch(t.type){case wi:e.isRequesting=!0;break;case xi:e.isRequesting=!1,e.leaders=i;break;case ki:(e.time>a||0==e.time)&&(e.time=a)}}}))},Xt),Di="lives",Mi="LIVES_REQUEST",Ni="LIVES_UPDATED",Bi="LIVES_RESET",Gi="LIVES_COUNT_DOWN_START",Fi={isRequesting:!1,lives:0,lastBonusLifeTime:0,countDownStartAt:0},Ui=((Jt={})[Di]=function(e,t){return void 0===e&&(e=Fi),(0,Gt.ZP)(e,(function(e){var n=t.payload;if(n){var i=n.data;switch(t.type){case Mi:e.isRequesting=!0;break;case Ni:e.isRequesting=!1,e.lives=i.lives,e.lastBonusLifeTime=i.lastBonusLifeTime;break;case Bi:e.isRequesting=!1,e.lives=Fi.lives,e.lastBonusLifeTime=Fi.lastBonusLifeTime,e.countDownStartAt=0;break;case Gi:e.countDownStartAt=(new Date).getTime()}}}))},Jt),Hi=(0,Mt.UY)((0,s.Z)({scene:function(e,t){return void 0===e&&(e=Ft),(0,Gt.ZP)(e,(function(n){var i=t.payload;if(i){var a=i.sceneKey;if(t.type===Bt.DW)n.currentSceneKey=a,n.prevSceneKey=e.currentSceneKey}}))},context:function(e,t){return void 0===e&&(e=qt),(0,Gt.ZP)(e,(function(e){var n=t.payload;if(n){var i=n.gameMode,a=n.contextId,s=n.contextType,r=n.entryPointData;switch(t.type){case Bt.kL:e.contextId=a,e.contextType=s,e.entryPointData=r;break;case Bt.fJ:e.contextId=a,e.contextType=s,e.processed=!0;break;case Bt.EH:e.currentGameMode=i}}}))},messages:function(e,t){return void 0===e&&(e=$t),(0,Gt.ZP)(e,(function(n){var i=t.payload;if(i){var a=i.opponentId;if("string"===typeof a)switch(t.type){case Bt.qj:e.data[a]?n.data[a].sent=!0:n.data[a]={sent:!0};break;case Bt.rh:e.data[a]?n.data[a].sent=!1:n.data[a]={sent:!1}}}}))}},tn,sn,ln,Xn,ei,hi,vi,bi,Pi,Li,Ui)),Zi=(window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__,Mt.qC),Yi=function(e){var t=Zi((0,Mt.md)(Nt.Z));return(0,Mt.MT)(Hi,e,t)},Vi=function(e){function t(){for(var t,n,i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];return(n=e.call.apply(e,T()(t=[this]).call(t,a))||this).store=void 0,n.initiator=void 0,n.dispatch=function(e){return n.store.dispatch(e)},n.getState=function(){return n.store.getState()},n.subscribe=function(e){return n.store.subscribe(e)},n.watch=function(e,t){var i=Dt()((function(){var t=n.getState();return e(t)}));return n.subscribe(i((function(e){t(e)})))},n}(0,o.Z)(t,e);var n=t.prototype;return n.init=function(){this.store=Yi({})},n.setInitiator=function(e){this.initiator=e},n.syncStore=function(){var e=(0,r.Z)(l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.initiator.initContext(),e.next=3,this.initiator.initPlayer();case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.initPlayerManually=function(){var e=(0,r.Z)(l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.initiator.initPlayer();case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),t}(Phaser.Plugins.BasePlugin),Wi=Vi,zi=n(608),Ki=n.n(zi),ji=function(e){function t(t,n){var i;return(i=e.call(this,t,{type:"webfont",key:n.type})||this).payload=void 0,i.payload=n,i}(0,o.Z)(t,e);var n=t.prototype;return n.load=function(){var e;switch(this.payload.type){case"google":e=this.getGoogleFontConfig(this.payload);break;case"local":e=this.getLocalFontConfig(this.payload)}Ki().load(e)},n.getGoogleFontConfig=function(e){var t=this,n=e.character,i=e.fontName,a=e.fontWeight;return{google:{families:[i+":"+(void 0===a?400:a)],text:n},active:function(){t.loader.nextFile(t,!0)},timeout:15e3}},n.getLocalFontConfig=function(e){var t=this,n=e.fontName,i=e.fontType,a=document.createElement("style");document.head.appendChild(a);var s=a.sheet;if(s){var r='@font-face { font-family: "'+n+'"; src: url("assets/fonts/'+n+("opentype"===i?".otf":".ttf")+'") format("'+i+'"); }';s.insertRule(r,0)}return{custom:{families:[n]},active:function(){t.loader.nextFile(t,!0)},timeout:15e3}},t}(Phaser.Loader.File),Xi=function(e){function t(){return e.apply(this,arguments)||this}return(0,o.Z)(t,e),t.prototype.addFont=function(e){var t=new ji(this.scene.load,e);this.scene.load.addFile(t)},t}(Phaser.Plugins.ScenePlugin),Ji=Xi,qi=n(201),Qi=function(e){function t(){return e.apply(this,arguments)||this}return(0,o.Z)(t,e),t.prototype.emit=function(t){return e.prototype.emit.call(this,t)},t}(Phaser.Events.EventEmitter),$i=Qi;function ea(e,t){var n="undefined"!==typeof E()&&A()(e)||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){var n;if(!e)return;if("string"===typeof e)return ta(e,t);var i=g()(n=Object.prototype.toString.call(e)).call(n,8,-1);"Object"===i&&e.constructor&&(i=e.constructor.name);if("Map"===i||"Set"===i)return m()(e);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return ta(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var i=0;return function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function ta(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var na=function(e){function t(){for(var t,n,i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];return(n=e.call.apply(e,T()(t=[this]).call(t,a))||this).events=void 0,n.previousLayout=void 0,n.resizeEventData=void 0,n.portraitRatio=void 0,n.portraitWidth=void 0,n.portraitHeight=void 0,n.landscapeRatio=void 0,n.landscapeWidth=void 0,n.landscapeHeight=void 0,n.worldWidth=void 0,n.worldHeight=void 0,n.worldRatio=void 0,n.autoResize=void 0,n.disableLandscape=void 0,n.fullSizeOnLandscape=void 0,n.currentLayout=void 0,n.forcePixelRatio=void 0,n.handleResize=(0,qi.D)((function(){n.previousLayout=""+n.currentLayout,n.initWorldSize(),n.resize()}),300),n}(0,o.Z)(t,e);var n=t.prototype;return n.configure=function(e){this.events=new $i;var t=e.autoResize,n=e.portraitRatio,i=e.portraitWidth,a=e.portraitHeight,s=e.landscapeWidth,r=e.landscapeHeight,o=e.landscapeRatio,c=e.disableLandscape,l=e.fullSizeOnLandscape;this.autoResize=t,this.disableLandscape=c,this.fullSizeOnLandscape=l,this.portraitRatio=n,this.portraitWidth=i,this.portraitHeight=a,this.landscapeRatio=o,this.landscapeWidth=s,this.landscapeHeight=r,this.initWorldSize(),this.addEventResize()},n.resize=function(e){e&&e>0&&(this.forcePixelRatio=e);var t=this.getCanvasSizeFixedRatio(this.worldRatio),n=t.width,i=t.height;this.resizeCanvas(n,i);for(var a,s=ea(this.game.scene.scenes);!(a=s()).done;){var r=a.value.cameras.main;if(r){var o=this.getZoomRatio(),c=this.getWorldSize(),l=c.width,h=c.height;r.setZoom(o),r.centerOn(l/2,h/2)}}var u={width:this.worldWidth,height:this.worldHeight,isLayoutChanged:!1,newLayout:this.currentLayout};this.previousLayout!==this.currentLayout&&(u.isLayoutChanged=!0,u.newLayout=this.currentLayout),this.resizeEventData=u,this.events.emit(Pt.Z.RESIZE,u)},n.getResizeEventData=function(){return this.resizeEventData},n.resizeCanvas=function(e,t){this.game.canvas.width=e,this.game.canvas.height=t,this.game.scale.resize(e,t)},n.getWorldSize=function(){return{width:this.worldWidth,height:this.worldHeight}},n.initWorldSize=function(){this.worldWidth=this.portraitWidth,this.worldHeight=this.portraitHeight;var e=GameCore.Utils.Device.isMobile()||GameCore.Utils.Device.isMobileWeb();if(this.isScreenSmallerRatio(this.portraitRatio)||e)this.getScreenHeight()<600&&(this.worldWidth=450),this.worldHeight=this.worldWidth/this.getScreenRatio(),this.currentLayout="portrait";else if(!this.disableLandscape&&(this.worldWidth=this.landscapeWidth,this.worldHeight=this.landscapeHeight,this.currentLayout="landscape",this.fullSizeOnLandscape)){this.worldRatio=this.worldWidth/this.worldHeight,this.landscapeRatio=this.getScreenRatio();var t=this.getCanvasSizeFixedRatio(this.landscapeRatio),n=t.width,i=t.height,a=this.getZoomRatio();this.worldWidth=n/a,this.worldHeight=i/a}this.worldRatio=this.worldWidth/this.worldHeight},n.getZoomRatio=function(){var e=this.getWorldSize().width;return this.getCanvasSizeFixedRatio(this.worldRatio).width/e},n.getPixelRatio=function(){if(this.forcePixelRatio>0)return this.forcePixelRatio;if(GameCore.Utils.Device.isDesktop())return 2;var e=GameCore.Utils.Device.pixelRatio();return e>2&&(e=2),e},n.getPhysicPixels=function(e,t){return e*t},n.getCanvasSizeFixedRatio=function(e){var t=this.getPixelRatio(),n=this.getScreenWidth()*t,i=this.getScreenHeight()*t;return this.isScreenSmallerRatio(e)?i=n/e:n=i*e,{width:n,height:i}},n.getScreenRatio=function(){return this.getScreenWidth()/this.getScreenHeight()},n.getScreenHeight=function(){var e=document,t=e.body,n=e.documentElement,i=t.clientHeight,a=n.clientHeight;return Math.max(a,i)||0},n.getScreenWidth=function(){var e=document,t=e.body,n=e.documentElement,i=t.clientWidth,a=n.clientWidth;return Math.max(a,i)||0},n.isScreenSmallerRatio=function(e){return this.getScreenRatio()<e},n.addEventResize=function(){this.autoResize&&window.addEventListener("resize",this.handleResize)},n.isLandscape=function(){return!this.disableLandscape&&(!GameCore.Utils.Device.isMobile()&&!GameCore.Utils.Device.isMobileWeb()&&this.worldRatio>this.portraitRatio)},t}(Phaser.Plugins.BasePlugin),ia=na,aa=function(){function e(e,t,n){this.contextId=void 0,this.contextType=void 0,this.entryPointData=void 0,this.contextId=e||Qt.contextId,this.contextType=t||Qt.contextType,this.entryPointData=n||Qt.entryPointData}return e.prototype.toObject=function(){return{contextId:this.contextId,contextType:this.contextType,entryPointData:this.entryPointData}},e}(),sa=aa,ra=function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).name="InvalidPlayerId",i.message=t||"The playerId is not valid",i.payload=n,i}return(0,o.Z)(t,e),t}((0,N.Z)(Error)),oa=ra,ca=n(65),la=n.n(ca),ha="share_invite",ua="challenge_friend_match",da="matching_group_match",pa=n(204),ga=new We.Z("10","Your Friend",pa.Z.AVATAR.FILE).toObject(),fa="single",ma="challenge-friends",va="matching-group",Ea="tournaments",Sa="journey",Aa=(0,ce.P1)([function(e){return e.context}],(function(e){return e})),ya=(0,ce.P1)([function(e){return e.context.currentGameMode}],(function(e){return e})),Ta=function(e,t){return{type:Bt.fJ,payload:{contextId:e,contextType:t}}},Ia=function(e){return function(t){t({type:Bt.EH,payload:{gameMode:e}}),(0,i.sw)("game-mode",e)}},Ca={score:"score",settings:"settings",gameData:"gameData",userGuideDisplays:"userGuideDisplays",timeAddShortcut:"timeAddShortcut"},ba=GameCore.Configs.SyncProfileFromAPI,Oa=function(e){var t=this;this.game=void 0,this.initContext=function(){var e=window.GameSDK.context.getID(),n=window.GameSDK.context.getType(),i=window.GameSDK.getEntryPointData(),a=new sa(e,n,i).toObject(),s=a.contextId,r=a.contextType,o=a.entryPointData;t.game.storage.dispatch(function(e,t,n){return{type:Bt.kL,payload:{contextId:e,contextType:t,entryPointData:n}}}(s,r,o))},this.initPlayer=(0,r.Z)(l().mark((function e(){var n,i,a,s,r;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.game.player,i=t.getPlayerInfo(),a=ii()(Ca),e.next=5,FBInstant.player.getDataAsync(a);case 5:return s=e.sent,r=new De(s),e.next=11,t.maintainDataStructure(r);case 11:return r=e.sent,!0===r.toObject().settings.music&&window.game.audio.playMusic(),e.next=16,n.receiveData(i,r.convertToPlayerData());case 16:case"end":return e.stop()}}),e)}))),this.maintainDataStructure=function(){var e=(0,r.Z)(l().mark((function e(t){var n,i,a,r;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,ba){e.next=3;break}return e.abrupt("return",t);case 3:return e.next=5,FBInstant.player.getDataAsync(["isSynced","customFields"]);case 5:if(e.t0=e.sent,e.t0){e.next=8;break}e.t0={};case 8:if(n=e.t0,!0!==(n.isSynced||!1)){e.next=12;break}return e.abrupt("return",t);case 12:if(i=n.customFields||!1){e.next=15;break}return e.abrupt("return",t);case 15:return(a=t.convertToPlayerData()).customFields=i,r=new De({}).convertToFacebookData(a),e.next=20,FBInstant.player.setDataAsync((0,s.Z)({},r,{isSynced:!0}));case 20:return e.abrupt("return",new De(r));case 23:return e.prev=23,e.t1=e.catch(0),e.abrupt("return",t);case 27:case"end":return e.stop()}}),e,null,[[0,23]])})));return function(t){return e.apply(this,arguments)}}(),this.getPlayerInfo=function(){try{var e=window.GameSDK.player.getID(),t=window.GameSDK.player.getName(),n=window.GameSDK.player.getPhoto(),i=window.GameSDK.getLocale();if(!GameCore.Utils.Valid.isString(e))throw new oa(null,{playerId:e});return GameCore.Utils.Valid.isString(t)||(t="You"),new We.Z(e,t,n,i).toObject()}catch(a){return new We.Z("123","You").toObject()}},this.game=e},Pa=n(205),Ra=n(86),wa=n.n(Ra),xa=GameCore.Ads.Types,ka=[Ot._.SCREEN_OPEN],_a=function(e){function t(t,n){var i;(i=e.call(this,"GoogleAnalytics",(0,s.Z)({},n),"#E35335")||this).game=void 0,i.currentPath="/",i.game=t;var a=(GameCore.Configs.Analytics.GoogleAnalytics||{}).consoleLog;return i.selfLog=!!a,i}(0,o.Z)(t,e);var n=t.prototype;return n.processEvent=function(e,t,n){if(!(wa()(ka).call(ka,e)>=0)){var i=this.formatEventName(e),a=t?(0,s.Z)({},t):{};a=n?(0,s.Z)({},a,{value:n}):a,a=(0,s.Z)({},a,{page_path:this.currentPath,send_to:"GA"}),gtag("event",i,a)}},n.processLevelStart=function(e,t,n){this.processEvent(Ot._.LEVEL_START,{level:e,score:t,level_name:n})},n.processLevelRescue=function(e,t,n){this.processEvent(Ot._.LEVEL_RESCUE,{level:e,score:t,level_name:n})},n.processLevelFail=function(e,t,n){this.processEvent(Ot._.LEVEL_END,{level:e,score:t,level_name:n,success:!1})},n.processLevelComplete=function(e,t,n){this.processEvent(Ot._.LEVEL_END,{level:e,score:t,level_name:n,success:!0})},n.processLoadPreRollAd=function(e,t){var n=this.getEdaType(xa.PRE_ROLL);this.processEvent(Ot._.AD_LOAD,{ad_type:n,screen_name:""+e,ad_service:""+t})},n.processShowPreRollAd=function(e,t){var n=this.getEdaType(xa.PRE_ROLL);this.processEvent(Ot._.AD_SHOW,{ad_type:n,screen_name:""+e,ad_service:""+t}),this.processEvent(Ot._.AD_IMPRESSION,{ad_format:n})},n.processLoadInterstitialAd=function(e,t){var n=this.getEdaType(xa.INTERSTITIAL);this.processEvent(Ot._.AD_LOAD,{ad_type:n,screen_name:""+e,ad_service:""+t})},n.processShowInterstitialAd=function(e,t){var n=this.getEdaType(xa.INTERSTITIAL);this.processEvent(Ot._.AD_SHOW,{ad_type:n,screen_name:""+e,ad_service:""+t}),this.processEvent(Ot._.AD_IMPRESSION,{ad_format:"Interstitial"})},n.processLoadRewardedVideoAd=function(e,t){var n=this.getEdaType(xa.REWARDED);this.processEvent(Ot._.AD_LOAD,{ad_type:n,screen_name:""+e,ad_service:""+t})},n.processShowRewardedVideoAd=function(e,t){var n=this.getEdaType(xa.REWARDED);this.processEvent(Ot._.AD_SHOW,{ad_type:n,screen_name:""+e,ad_service:""+t}),this.processEvent(Ot._.AD_IMPRESSION,{ad_format:"Rewarded"})},n.processShowBannerAd=function(e,t,n){var i=this.getEdaType(xa.BANNER);this.processEvent(Ot._.AD_SHOW,{ad_type:i,banner_position:""+e,screen_name:""+t,ad_service:""+n})},n.processLoadAdFail=function(e){var t=e.type,n=e.placement,i=e.adService,a=this.getEdaType(t);this.processEvent(Ot._.AD_LOAD_FAILED,{ad_type:a,screen_name:""+n,ad_service:""+i})},n.processShowAdFail=function(e){var t=e.type,n=e.placement,i=e.adService,a=e.bannerPosition,s={ad_type:this.getEdaType(t),screen_name:""+n,ad_service:""+i};t===xa.BANNER&&(s.banner_position=""+a),this.processEvent(Ot._.AD_SHOW_FAILED,s)},n.processPageView=function(e){var t="/"+this.getGameplayMode()+"/"+e;this.currentPath=t,this.processEvent(Ot._.PAGE_VIEW)},n.getGameplayMode=function(){var e=this.game.storage.getState();return ya(e)},n.formatEventName=function(e){return e.toLowerCase().replace(/:/g,"_")},n.formatPageTitle=function(e,t){return this.toUpperCamelCaseWithSpace(e)+"::"+this.toUpperCamelCaseWithSpace(t)},n.toUpperCamelCaseWithSpace=function(e){var t=e.replace(/[-_\s.]+(.)?/g,(function(e,t){return t?" "+t.toUpperCase():""}));return t.substr(0,1).toUpperCase()+t.substr(1)},n.getEdaType=function(e){switch(e){case xa.INTERSTITIAL:return"interstitial";case xa.PRE_ROLL:return"pre_roll";case xa.REWARDED:return"rewarded_video";case xa.BANNER:return"banner";default:return"unknown"}},t}(GameCore.Analytics.BaseAnalytics),La=_a,Da="G-HH3S41Q58C",Ma=function(e){function t(){for(var t,n,a=arguments.length,s=new Array(a),o=0;o<a;o++)s[o]=arguments[o];return(n=e.call.apply(e,T()(t=[this]).call(t,s))||this).logStart=function(){try{window.funmax.loadStart()}catch(e){}},n.startGame=(0,r.Z)(l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n.auth.requestToken();case 3:return e.next=5,n.storage.syncStore();case 5:return n.configureSentry(),n.configureRollbar(),e.next=9,n.detectGameMode();case 9:n.initGoogleAnalytics(),n.logStart(),n.analytics.event(Ot._.LOAD_START),n.scene.launch(Pa.Co.GLOBAL_SCENE),n.scene.start(Pa.Co.LOAD_SCENE),n.analytics.pageview(Pa.Co.LOAD_SCENE),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(0),(0,i.tO)(e.t0);case 20:return e.prev=20,n.facebook.progressLoading.finishLoadingProgressFbBootScene(),n.scene.sleep(Pa.Co.BOOT_SCENE),e.finish(20);case 24:case"end":return e.stop()}}),e,null,[[0,17,20,24]])}))),n}(0,o.Z)(t,e);var n=t.prototype;return n.create=function(){this.facebook.progressLoading.loadingProgressFbBootScene(),this.startGame()},n.configureSentry=function(){var e=this.player.getPlayer();(0,i.Tv)({id:e.playerId,username:e.name})},n.configureRollbar=function(){if(this.rollbar){var e=this.player.getPlayer();this.rollbar.configure({payload:{person:{id:e.playerId,name:e.name}}})}},n.detectGameMode=function(){var e=(0,r.Z)(l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.storage.dispatch(function(){var e=(0,r.Z)(l().mark((function e(t,n){var i,a,s,r,o,c,h,u,d,p,g,f,m,v,E,S,A;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n(),s=Aa(a),r=window.game.player,o=r.getPlayerId(),c=s.contextId,h=s.entryPointData,d=(u=h||{}).type,p=u.matchId,g=u.playerId,f=u.opponentId,m=void 0===f?ga.playerId:f,v=o===g,E=m===ga.playerId,S=E||la()(i=[m,g]).call(i,o),A=fa,e.prev=10,e.next=13,window.game.facebook.getTournamentAsync();case 13:A=Ea,e.next=18;break;case 16:e.prev=16,e.t0=e.catch(10);case 18:c&&d===ha&&!v&&(A=ma),p&&c&&S&&d===ua&&(A=ma),c&&d===da&&(A=va),t(Ia(A));case 22:case"end":return e.stop()}}),e,null,[[10,16]])})));return function(t,n){return e.apply(this,arguments)}}());case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.initGoogleAnalytics=function(){var e=this.player.getPlayerId();this.analytics.add(new La(this.game,{userId:e,measuringId:Da,version:"4"}))},t}(Phaser.Scene),Na=Ma,Ba=n(45),Ga=n(130),Fa=n.n(Ga),Ua=n(88),Ha=n.n(Ua),Za=n(466),Ya=n.n(Za),Va=n(102),Wa=n(101),za=n(452),Ka=n(207),ja=n(458),Xa=n(453),Ja={STATUS:{READY:"ready",RUNNING:"running",STOPPED:"stopped"}},qa={STATUS:{READY:"ready",RUNNING:"running",STOPPED:"stopped"}},Qa=qa.STATUS,$a=function(){function e(e){this.state=void 0,this.scene=void 0,this.scene=e}var t=e.prototype;return t.init=function(){this.setState(Qa.READY)},t.start=function(){this.isRunning()||this.setState(Qa.RUNNING)},t.stop=function(){this.isRunning()&&this.setState(Qa.STOPPED)},t.setState=function(e){this.state=e},t.isReady=function(){return this.state===Qa.READY},t.isRunning=function(){return this.state===Qa.RUNNING},t.isStopped=function(){return this.state===Qa.STOPPED},e}(),es=$a,ts=n(460),ns=n(456),is=n(461),as=n(457),ss=Wa.Z.DEFAULT,rs=ss.KEY,os=ss.FRAME,cs=function(e){function t(t,n,i,a){var s;return(s=e.call(this,t,n,i,a)||this).popup=void 0,s.contents=void 0,s.buttonPlay=void 0,s.messageText=void 0,s.popupShowUpAnimation=void 0,s.contentShowUpAnimation=void 0,s.popupFadeOutAnimation=void 0,s.onPlay=void 0,s.open=function(t){e.prototype.open.call((0,Ba.Z)(s),t),s.setVisible(!0);var n=s.getData(["onPlay"])[0];s.onPlay=n,s.runOpenAnimation()},s.handlePlay=function(){s.onPlay&&s.onPlay(),s.close()},s.setVisible(!1),s.setDepth(za.Ks.POPUP),s.createPopup(),s.createPopupContent(),s.background.setAlpha(.5),s}(0,o.Z)(t,e);var n=t.prototype;return n.runAnim=function(){this.messageText.setScale(0).setAlpha(0)},n.createPopup=function(){this.popup=new as.Z(this.scene,0,0,325,260),this.add(this.popup),Phaser.Display.Align.In.Center(this.popup,this.zone)},n.createPopupContent=function(){this.createMessage(),this.createButtonPlay(),this.contents=this.scene.make.group({}),this.contents.addMultiple([this.messageText,this.buttonPlay])},n.createButtonPlay=function(){this.buttonPlay=new ja.Z(this.scene,rs,os.BUTTON_GREEN_LARGE,170,55),this.buttonPlay.setName("Play");var e=this.scene.make.bitmapText({font:Xa.Z.PRIMARY.KEY,size:this.scene.fontSize(60),text:this.scene.lang.Text.PLAY,origin:{x:.5,y:.5}});this.buttonPlay.add(e),Phaser.Display.Align.In.Center(e,this.buttonPlay),this.popup.add(this.buttonPlay),Phaser.Display.Align.In.Center(this.buttonPlay,this.popup,0,50),this.buttonPlay.onClick=this.handlePlay},n.createMessage=function(){this.messageText=this.scene.make.bitmapText({font:Xa.Z.PRIMARY.KEY,size:this.scene.fontSize(40),origin:{x:.5,y:.5},text:"The game will end when there s no\nmore space for your given blocks."}),this.messageText.align=1,this.popup.add(this.messageText),Phaser.Display.Align.In.Center(this.messageText,this.popup,0,-45),this.messageText.setScale(0).setAlpha(0)},n.runPopupExitsAnimation=function(e,t){var n,i=this;this.popupFadeOutAnimation||(this.popupFadeOutAnimation=new ts.Z({targets:[this.popup],delay:e,duration:t,props:{y:250,scale:0},onComplete:function(){i.popup.setY(0)}})),null==(n=this.popupFadeOutAnimation)||n.play()},n.runOpenAnimation=function(){this.scene.audio.playSound(Ka.Z.POPUP_SHOW),this.runPopupEntrancesAnimation(0,300),this.runPopupContentEntrancesAnimation(200,300)},n.runPopupEntrancesAnimation=function(e,t){if(!this.popupShowUpAnimation){var n=this.popup,i=n.y,a=n.scale;this.popupShowUpAnimation=new is.Z({targets:[this.popup],delay:e,duration:t,props:{y:{from:350,to:i},alpha:{start:1,from:1,to:1},scale:{start:0,from:0,to:a}}})}this.popupShowUpAnimation.play()},n.runPopupContentEntrancesAnimation=function(e,t){this.contentShowUpAnimation||(this.contentShowUpAnimation=new ns.Z({targets:this.contents.getChildren(),duration:t,delay:this.scene.tweens.stagger(80,{start:e}),props:{alpha:{start:0,from:0,to:1}}})),this.contentShowUpAnimation.play()},t}(GameCore.Screen),ls=cs,hs=[{minCol:0,minRow:0,cols:4,rows:4},{minCol:4,minRow:0,cols:4,rows:4},{minCol:0,minRow:4,cols:4,rows:4},{minCol:4,minRow:4,cols:4,rows:4}],us=[{minCol:0,minRow:0,cols:5,rows:5},{minCol:3,minRow:0,cols:5,rows:5},{minCol:0,minRow:3,cols:5,rows:5},{minCol:3,minRow:3,cols:5,rows:5}],ds=[{minCol:0,minRow:0,cols:6,rows:6},{minCol:3,minRow:0,cols:6,rows:6},{minCol:0,minRow:3,cols:6,rows:6},{minCol:3,minRow:3,cols:6,rows:6}],ps="vertical",gs="horizontal",fs="left",ms="right",vs="top",Es="bottom",Ss="vertical_left",As="vertical_right",ys="horizontal_left",Ts="horizontal_right",Is="gem/gem",Cs="gem/gem",bs="gem/gem",Os="gem/gem",Ps="gem/gem",Rs="gem/gem",ws="gem/gem",xs="gem/gem",ks="gem/gem",_s=[{level:1,frames:[],width:480,height:189},{level:2,frames:[Wa.Z.EFFECTS.FRAME.TEXT_COOL],width:480,height:189},{level:3,frames:[Wa.Z.EFFECTS.FRAME.TEXT_GOOD],width:579,height:189},{level:4,frames:[Wa.Z.EFFECTS.FRAME.TEXT_EXCELLENT],width:906,height:189},{level:5,frames:[Wa.Z.EFFECTS.FRAME.TEXT_EXCELLENT],width:906,height:189},{level:6,frames:[Wa.Z.EFFECTS.FRAME.TEXT_EXCELLENT],width:906,height:189}],Ls=[{level:1,scale:.5,speed:.5,quantity:.5},{level:2,scale:.6,speed:.6,quantity:.6},{level:3,scale:.7,speed:.7,quantity:.7},{level:4,scale:.8,speed:.8,quantity:.8},{level:5,scale:.9,speed:.9,quantity:.9},{level:6,scale:1,speed:1,quantity:1}],Ds="l",Ms="l_1",Ns="l_3",Bs="line_2",Gs="line_3",Fs="line_4",Us="line_5",Hs="square_1",Zs="square_2",Ys="square_3",Vs="trapezoid",Ws="triangle",zs="t_piece",Ks="plus_piece",js="cross_piece_2",Xs="cross_piece_3",Js="cross_piece_4",qs="cross_piece_5",Qs="u_piece",$s=[Ds,Ms,Ns,Bs,Gs,Fs,Us,Hs,Zs,Ys,Ws,Vs,zs,Ks,js,Xs,Js,Qs],er=[{type:Ds,rate:2},{type:Ms,rate:8},{type:Ns,rate:6},{type:Bs,rate:9},{type:Gs,rate:9},{type:Fs,rate:8},{type:Us,rate:8},{type:Hs,rate:9},{type:Zs,rate:8},{type:Ws,rate:2},{type:Vs,rate:2},{type:zs,rate:1},{type:Ks,rate:1},{type:js,rate:2},{type:Xs,rate:1},{type:Js,rate:1},{type:Qs,rate:1}],tr=[[1,0],[1,0],[1,1]],nr=[[0,1],[0,1],[1,1]],ir=[[1,0],[1,1]],ar=[[1,0,0],[1,0,0],[1,1,1]],sr=[[1,1,1],[1,0,0]],rr=[[1,1,1],[0,0,1]],or=[[1,1],[1,0]],cr=[[1,1,1],[1,0,0],[1,0,0]],lr=[[1,1],[0,1],[0,1]],hr=[[1,1],[1,0],[1,0]],ur=[[1,1],[0,1]],dr=[[1,1,1],[0,0,1],[0,0,1]],pr=[[0,0,1],[1,1,1]],gr=[[1,0,0],[1,1,1]],fr=[[0,1],[1,1]],mr=[[0,0,1],[0,0,1],[1,1,1]],vr=[[1],[1]],Er=[[1,1]],Sr=[[1],[1],[1]],Ar=[[1,1,1]],yr=[[1],[1],[1],[1]],Tr=[[1,1,1,1]],Ir=[[1],[1],[1],[1],[1]],Cr=[[1,1,1,1,1]],br=[[1]],Or=[[1,1],[1,1]],Pr=[[1,1,1],[1,1,1],[1,1,1]],Rr=[[1,0],[1,1],[0,1]],wr=[[0,1],[1,1],[1,0]],xr=[[1,1,0],[0,1,1]],kr=[[0,1,1],[1,1,0]],_r=[[0,1],[1,1],[0,1]],Lr=[[1,0],[1,1],[1,0]],Dr=[[0,1,0],[1,1,1]],Mr=[[1,1,1],[0,1,0]],Nr=[[0,0,1],[1,1,1],[0,0,1]],Br=[[1,0,0],[1,1,1],[1,0,0]],Gr=[[0,1,0],[0,1,0],[1,1,1]],Fr=[[1,1,1],[0,1,0],[0,1,0]],Ur=[[0,1,0],[1,1,1],[0,1,0]],Hr=[[1,0],[0,1]],Zr=[[0,1],[1,0]],Yr=[[1,0,0],[0,1,0],[0,0,1]],Vr=[[0,0,1],[0,1,0],[1,0,0]],Wr=[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]],zr=[[0,0,0,1],[0,0,1,0],[0,1,0,0],[1,0,0,0]],Kr=[[1,0,0,0,0],[0,1,0,0,0],[0,0,1,0,0],[0,0,0,1,0],[0,0,0,0,1]],jr=[[0,0,0,0,1],[0,0,0,1,0],[0,0,1,0,0],[0,1,0,0,0],[1,0,0,0,0]],Xr=[[1,1],[0,1],[1,1]],Jr=[[1,0],[1,1],[1,0]],qr=[[1,0,1],[1,1,1]],Qr=[[1,1,1],[1,0,1]],$r=function(){function e(e){this.scene=void 0,this.manager=void 0,this.tweenHand=void 0,this.dataInit={fen:"4bb3/4bb3/4bb3/3bb4/bbbb2bbb/bbbb1bbbb/4bb3/4bb3/4bb3 l tz-vr,b",piece:Hs,position:{x:4,y:3}},this.scene=e.scene,this.manager=e}var t=e.prototype;return t.start=function(){this.initBoardData(),this.handleHighlight(),this.createTweenHand()},t.initBoardData=function(){this.manager.handleGuidePlayStep(this.dataInit.fen)},t.createTweenHand=function(){var e,t=this.scene.layoutManager.objects.main.board,n=t.dataBoard,i=t.cellSize,a=this.scene.layoutManager.objects.footer.pieces,s=a.allPieces,r=a.piecesActive,o=s[r[0].position].getWorldPosition().x+i/2,c=s[r[0].position].getWorldPosition().y+i,l=n[4][4].cell.getWorldPosition().x+i/2,h=n[4][4].cell.getWorldPosition().y+i/2;this.manager.handFrame.setVisible(!0),this.manager.handFrame.setPosition(o,c),null==(e=this.tweenHand)||e.remove(),this.tweenHand=this.scene.add.tween({repeatDelay:500,targets:this.manager.handFrame,repeat:-1,x:{from:o,to:l},y:{from:c,to:h},duration:1500,ease:Phaser.Math.Easing.Sine.InOut})},t.handleHighlight=function(){for(var e=[{x:5,y:3},{x:5,y:4},{x:4,y:4},{x:4,y:5}],t=this.scene.layoutManager.objects.main,n=0;n<e.length;n++){var i=e[n],a=i.x,s=i.y;t.board.dataBoard[s][a].cell.setFrameImageCell(Wa.Z.GAMEPLAY_32.FRAME.GEM_HIGHT_LIGHT),t.board.dataBoard[s][a].cell.stopAnimShaking()}},t.dragStart=function(){this.tweenHand.stop(),this.manager.handFrame.setVisible(!1)},t.invalidMove=function(){this.manager.handFrame.setVisible(!0),this.tweenHand.play(),this.handleHighlight()},t.nextLevel=function(){this.tweenHand.stop().remove()},e}(),eo=$r,to=function(){function e(e){this.scene=void 0,this.manager=void 0,this.tweenHand=void 0,this.dataInit={fen:"x/x/x/x/bbbb1ryry/x/x/x/x l s1,b",piece:Hs,position:{x:4,y:4}},this.scene=e.scene,this.manager=e}var t=e.prototype;return t.start=function(){this.initBoardData(),this.handleHighlight(),this.createTweenHand()},t.initBoardData=function(){this.manager.handleGuidePlayStep(this.dataInit.fen)},t.createTweenHand=function(){var e,t=this.scene.layoutManager.objects.main.board,n=t.dataBoard,i=t.cellSize,a=this.scene.layoutManager.objects.footer.pieces,s=a.allPieces,r=a.piecesActive,o=s[r[0].position].getWorldPosition().x+i/2,c=s[r[0].position].getWorldPosition().y+i/2,l=n[4][4].cell.getWorldPosition().x+i/2,h=n[4][4].cell.getWorldPosition().y+i/2;this.manager.handFrame.setVisible(!0),this.manager.handFrame.setPosition(o,c),null==(e=this.tweenHand)||e.remove(),this.tweenHand=this.scene.add.tween({repeatDelay:500,targets:this.manager.handFrame,repeat:-1,x:{from:o,to:l},y:{from:c,to:h},duration:1500,ease:Phaser.Math.Easing.Sine.InOut})},t.handleHighlight=function(){for(var e=this.dataInit.position,t=e.x,n=e.y,i=this.scene.layoutManager.objects.main,a=0;a<1;a++)for(var s=0;s<1;s++)i.board.dataBoard[n+a][t+s].cell.setFrameImageCell(Wa.Z.GAMEPLAY_32.FRAME.GEM_HIGHT_LIGHT),i.board.dataBoard[n+a][t+s].cell.stopAnimShaking()},t.dragStart=function(){this.tweenHand.stop(),this.manager.handFrame.setVisible(!1)},t.invalidMove=function(){this.manager.handFrame.setVisible(!0),this.tweenHand.play(),this.handleHighlight()},t.nextLevel=function(){this.tweenHand.stop().remove()},e}(),no=to,io=function(){function e(e){this.scene=void 0,this.manager=void 0,this.tweenHand=void 0,this.dataInit={fen:"x/x/x/4bb3/4bb3/5b3/x/x/x l l-dt,b",piece:Hs,position:{x:3,y:3}},this.scene=e.scene,this.manager=e}var t=e.prototype;return t.start=function(){this.initBoardData(),this.handleHighlight(),this.createTweenHand()},t.initBoardData=function(){this.manager.handleGuidePlayStep(this.dataInit.fen)},t.createTweenHand=function(){var e,t=this.scene.layoutManager.objects.main.board,n=t.dataBoard,i=t.cellSize,a=this.scene.layoutManager.objects.footer.pieces,s=a.allPieces,r=a.piecesActive,o=s[r[0].position].getWorldPosition().x+i/2,c=s[r[0].position].getWorldPosition().y+i,l=n[4][3].cell.getWorldPosition().x+i/2,h=n[4][3].cell.getWorldPosition().y+i/2;this.manager.handFrame.setVisible(!0),this.manager.handFrame.setPosition(o,c),null==(e=this.tweenHand)||e.remove(),this.tweenHand=this.scene.add.tween({repeatDelay:500,targets:this.manager.handFrame,repeat:-1,x:{from:o,to:l},y:{from:c,to:h},duration:1500,ease:Phaser.Math.Easing.Sine.InOut})},t.handleHighlight=function(){for(var e=this.dataInit.position,t=e.x,n=e.y,i=this.scene.layoutManager.objects.main,a=0;a<3;a++)for(var s=0;s<1;s++)i.board.dataBoard[n+a][t+s].cell.setFrameImageCell(Wa.Z.GAMEPLAY_32.FRAME.GEM_HIGHT_LIGHT),i.board.dataBoard[n+a][t+s].cell.stopAnimShaking();i.board.dataBoard[5][4].cell.setFrameImageCell(Wa.Z.GAMEPLAY_32.FRAME.GEM_HIGHT_LIGHT),i.board.dataBoard[5][4].cell.stopAnimShaking()},t.dragStart=function(){this.tweenHand.stop(),this.manager.handFrame.setVisible(!1)},t.invalidMove=function(){this.manager.handFrame.setVisible(!0),this.tweenHand.play(),this.handleHighlight()},t.nextLevel=function(){this.tweenHand.stop().remove()},e}(),ao=io,so=function(){function e(e){this.scene=void 0,this.manager=void 0,this.tweenHand=void 0,this.dataInit={fen:"2r/2r/2r/2r/x/x/x/2r/2r l e3-v,r",piece:Gs,position:{x:2,y:4}},this.scene=e.scene,this.manager=e}var t=e.prototype;return t.start=function(){this.initBoardData(),this.handleHighlight(),this.createTweenHand()},t.initBoardData=function(){this.manager.handleGuidePlayStep(this.dataInit.fen)},t.createTweenHand=function(){var e,t=this.scene.layoutManager.objects.main.board,n=t.dataBoard,i=t.cellSize,a=this.scene.layoutManager.objects.footer.pieces,s=a.allPieces,r=a.piecesActive,o=s[r[0].position].getWorldPosition().x+i/2,c=s[r[0].position].getWorldPosition().y+i,l=n[5][2].cell.getWorldPosition().x+i/2,h=n[5][2].cell.getWorldPosition().y+i/2;this.manager.handFrame.setVisible(!0),this.manager.handFrame.setPosition(o,c),null==(e=this.tweenHand)||e.remove(),this.tweenHand=this.scene.add.tween({repeatDelay:500,targets:this.manager.handFrame,repeat:-1,x:{from:o,to:l},y:{from:c,to:h},duration:1500,ease:Phaser.Math.Easing.Sine.InOut})},t.handleHighlight=function(){for(var e=this.dataInit.position,t=e.x,n=e.y,i=this.scene.layoutManager.objects.main,a=0;a<3;a++)for(var s=0;s<1;s++)i.board.dataBoard[n+a][t+s].cell.setFrameImageCell(Wa.Z.GAMEPLAY_32.FRAME.GEM_HIGHT_LIGHT),i.board.dataBoard[n+a][t+s].cell.stopAnimShaking()},t.dragStart=function(){this.tweenHand.stop(),this.manager.handFrame.setVisible(!1)},t.invalidMove=function(){this.manager.handFrame.setVisible(!0),this.tweenHand.play(),this.handleHighlight()},t.nextLevel=function(){this.tweenHand.stop().remove()},e}(),ro=so,oo=Ja.STATUS,co=Wa.Z.DEFAULT,lo=co.KEY,ho=co.FRAME,uo=Wa.Z.GAMEPLAY,po=uo.KEY,go=uo.FRAME,fo=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n.currentLevel=1,n.tutorialId=void 0,n.inputType=void 0,n.handFrame=void 0,n.background=void 0,n.headerContainer=void 0,n.maskGraphics=void 0,n.textTutorial=void 0,n.skipButton=void 0,n.stepOne=void 0,n.stepTwo=void 0,n.stepThree=void 0,n.stepFour=void 0,n.showTutorialWhenStart=function(){var e=n.scene.lang;switch(n.scene.analytics.event(Ot._.TUTORIAL_STEP,{tutorial_step:n.currentLevel}),n.currentLevel){case 1:n.stepOne.start(),n.setTextTutorial(e.Text.MESS_TUTORIAL_1);break;case 2:n.stepTwo.start(),n.setTextTutorial(e.Text.MESS_TUTORIAL_2);break;case 3:n.stepThree.start(),n.setTextTutorial(e.Text.MESS_TUTORIAL_3);break;case 4:n.stepFour.start(),n.setTextTutorial(e.Text.MESS_TUTORIAL_4);break;default:n.handleCompleteTutorial()}},n.nextTutorial=function(){switch(n.currentLevel){case 1:n.stepOne.nextLevel();break;case 2:n.stepTwo.nextLevel();break;case 3:n.stepThree.nextLevel();break;case 4:n.stepFour.nextLevel()}n.currentLevel++,n.showTutorialWhenStart()},n.validTargetPosition=function(e){var t={x:0,y:0};switch(n.currentLevel){case 1:t=n.stepOne.dataInit.position;break;case 2:t=n.stepTwo.dataInit.position;break;case 3:t=n.stepThree.dataInit.position;break;case 4:t=n.stepFour.dataInit.position}return t.x===e.x&&t.y===e.y},n.scene=t,n}(0,o.Z)(t,e);var n=t.prototype;return n.init=function(){this.createHand(),this.createTutorialPlayScreen(),this.createHeader(),this.createSkipButton(),this.initTutorialStep(),this.registerEvents()},n.registerEvents=function(){this.scene.world.events.on(Pt.Z.RESIZE,this.handleResize,this)},n.handleResize=function(){var e=this;this.isRunning()&&(Phaser.Display.Align.In.TopCenter(this.headerContainer,this.scene.gameZone,0,-10),this.scene.time.delayedCall(50,(function(){switch(e.currentLevel){case 1:e.stepOne.createTweenHand();break;case 2:e.stepTwo.createTweenHand();break;case 3:e.stepThree.createTweenHand();break;case 4:e.stepFour.createTweenHand()}})))},n.createTutorialPlayScreen=function(){this.scene.screen.add(za.o4.TUTORIAL_PLAY_SCREEN,ls)},n.createHeader=function(){this.headerContainer=this.scene.add.container(),this.headerContainer.setVisible(!1),this.headerContainer.setSize(355,100);var e=this.scene.add.graphics();e.fillRoundedRect(-177.5,-50,355,100,12),e.fillStyle(0,.5),e.lineStyle(2,0,.55),e.strokeRoundedRect(-177.5,-50,355,100,12),this.headerContainer.add(e),this.textTutorial=this.scene.make.text({style:{fontFamily:Xa.Z.FONT_FAMILY_ARIAL,fontSize:this.scene.fontSize(40)+"px",fontStyle:"700",align:"center"}}),this.textTutorial.setHighQuality(),this.textTutorial.setTint(16442297),this.headerContainer.add(this.textTutorial),Phaser.Display.Align.In.TopCenter(this.headerContainer,this.scene.gameZone,0,-10)},n.createSkipButton=function(){var e=50,t=30;"ru"===this.scene.facebook.getLocale()&&(e=100,t=30),this.skipButton=new ja.Z(this.scene,lo,ho.BUTTON_SKIP,e,t),this.headerContainer.add(this.skipButton),this.skipButton.onClick=this.handleSkip.bind(this),Phaser.Display.Align.In.BottomRight(this.skipButton,this.headerContainer,-this.scene.gameZone.width/2-5,-60)},n.handleSkip=function(){var e=this.scene.game,t=e.globalScene,n=e.lang;t.screen.open(za.o4.ALERT_SCREEN,{message:n.Text.MESS_SKIP_TUTORIAL,onHandleYes:this.handleCompleteTutorial.bind(this)})},n.initTutorialStep=function(){this.stepOne=new no(this),this.stepTwo=new ro(this),this.stepThree=new ao(this),this.stepFour=new eo(this)},n.start=function(){this.isRunning()||(this.scene.analytics.pageview("tutorial-screen"),this.setState(oo.RUNNING),this.headerContainer.setVisible(!0),this.showTutorialWhenStart())},n.setTextTutorial=function(e){var t=this,n=e.split(""),i="";this.scene.time.addEvent({repeat:n.length,delay:10,callback:function(){var e=n.shift()||"";i+=e,t.textTutorial.setText(i),Phaser.Display.Align.In.Center(t.textTutorial,t.headerContainer,-t.scene.gameZone.width/2,-60)}})},n.stop=function(){this.isRunning()&&(this.scene.tweens.killTweensOf([this.background]),this.background.setVisible(!1),this.maskGraphics.setVisible(!1),this.setState(oo.STOPPED))},n.handleCompleteTutorial=function(){this.scene.analytics.pageview("game-scene"),this.scene.analytics.event(Ot._.TUTORIAL_COMPLETE);var e=this.scene.layoutManager.objects.main;this.setState(oo.STOPPED),e.praise.tweenShowScoreText.stop().remove(),this.scene.startGame(),this.handFrame.setVisible(!1),this.headerContainer.setVisible(!1)},n.createHand=function(){this.handFrame=this.scene.make.image({key:po,frame:go.HAND,origin:{x:.5,y:.5}}),this.handFrame.setVisible(!1).setDepth(Va.Z.ON_TOP),this.handFrame.setWorldSize(64,55)},n.isValidForTutorial=function(){return this.scene.game.player.getPlayerIsNew()},n.dragStart=function(){switch(this.currentLevel){case 1:this.stepOne.dragStart();break;case 2:this.stepTwo.dragStart();break;case 3:this.stepThree.dragStart();break;case 4:this.stepFour.dragStart()}},n.skipTutorial=function(){this.isRunning()&&(this.handFrame.setVisible(!1),this.setState(oo.STOPPED))},n.invalidMove=function(){switch(this.currentLevel){case 1:this.stepOne.invalidMove();break;case 2:this.stepTwo.invalidMove();break;case 3:this.stepThree.invalidMove();break;case 4:this.stepFour.invalidMove()}},n.handleGuidePlayStep=function(e){try{var t=this.scene.layoutManager.objects,n=t.main,i=t.footer;n.board.clearBoard(),i.pieces.clearPieces();var a=null,s=null;if(e){var r=n.board.getBoardByFen(e);a=this.scene.handleDynamicFenSize(r),s=i.pieces.getPiecesByFen(e)}n.board.startGame(a),i.pieces.showAvailablePieces(s)}catch(o){}},t}(es),mo=fo,vo={START_GAME:"start-game",REPLAY:"replay",RESCUE:"rescue",RECEIVE_DIAMONDS:"receive-diamonds",GAME_OVER:"game-over"},Eo=n(462),So=n(127),Ao="global",yo="friend",To=GameCore.Configs,Io=To.ApiHost,Co=To.OtherHost,bo=To.LeadersBoard,Oo=bo.Prefix,Po=bo.LeaderboardId,Ro=bo.Name,wo=Oo+"/"+Po+"/leaders",xo=Oo+"/"+Po+"/players",ko=function(e){var t="";return Po?(e===Ao?t=wo:e===yo&&(t=xo),t):t},_o=function(){var e=(0,r.Z)(l().mark((function e(t){var n,i,a,r,o,c;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Io){e.next=2;break}return e.abrupt("return",[]);case 2:return i=Te()(t).call(t,(function(e){return e.playerId})),a=GameCore.Utils.Object.keyBy(t,"playerId"),r=GameCore.Utils.String.params({playerIds:i}),e.next=7,(0,Me.U)("players?"+r,{},Io);case 7:return o=e.sent,c=Te()(n=o.data).call(n,(function(e){var t=a[e.playerId];return(0,s.Z)({},e,{score:t.score,rank:t.rank,getScore:function(){return t.score},getFormattedScore:function(){return""},getTimestamp:function(){return(new Date).valueOf()},getRank:function(){return t.rank},getExtraData:function(){return t.extraData},getPlayer:function(){return{getName:function(){return e.name},getPhoto:function(){return e.photo},getID:function(){return e.playerId}}}})})),e.abrupt("return",c);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Lo=function(){var e=(0,r.Z)(l().mark((function e(t){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===t&&(t={}),null==Po){e.next=3;break}return e.abrupt("return",Do(t));case 3:return e.abrupt("return",Mo(t));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Do=function(){var e=(0,r.Z)(l().mark((function e(t){var n,i,a,s,r;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===t&&(t={}),Co){e.next=3;break}return e.abrupt("return",[]);case 3:if(n=[],i=ko(Ao)){e.next=7;break}return e.abrupt("return",n);case 7:return a=GameCore.Utils.String.params(t),e.next=10,(0,Me.U)(i+"?"+a,{},Co);case 10:if(s=e.sent,!((r=(null==s?void 0:s.data)||[]).length<1)){e.next=14;break}return e.abrupt("return",n);case 14:return n=r,e.abrupt("return",_o(n));case 16:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Mo=function(){var e=(0,r.Z)(l().mark((function e(t){var n,i,a,s,r;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return void 0===t&&(t={}),i=(n=t).limit,a=n.offset,e.next=4,window.GameSDK.getLeaderboardAsync(Ro);case 4:return s=e.sent,e.next=7,s.getEntriesAsync(i,a);case 7:return r=e.sent,e.abrupt("return",r);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),No=function(){var e=(0,r.Z)(l().mark((function e(t){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===t&&(t={}),null==Po){e.next=3;break}return e.abrupt("return",Bo(t));case 3:return e.abrupt("return",Go(t));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Bo=function(){var e=(0,r.Z)(l().mark((function e(t){var n,i,a,s,r;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===t&&(t={}),Co){e.next=3;break}return e.abrupt("return",[]);case 3:if(n=[],i=ko(yo)){e.next=7;break}return e.abrupt("return",n);case 7:return a=GameCore.Utils.String.params(t),e.next=10,(0,Me.U)(i+"?"+a,{},Co);case 10:if(s=e.sent,!((r=(null==s?void 0:s.data)||[]).length<1)){e.next=14;break}return e.abrupt("return",n);case 14:return n=r,e.abrupt("return",_o(n));case 16:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Go=function(){var e=(0,r.Z)(l().mark((function e(t){var n,i,a,s,r;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return void 0===t&&(t={}),i=(n=t).limit,a=n.offset,e.next=4,window.GameSDK.getLeaderboardAsync(Ro);case 4:return s=e.sent,e.next=7,s.getConnectedPlayerEntriesAsync(i,a);case 7:return r=e.sent,e.abrupt("return",r);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Fo=function(){var e=(0,r.Z)(l().mark((function e(t){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==Po){e.next=2;break}return e.abrupt("return",Uo(t));case 2:return e.abrupt("return",Ho());case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Uo=function(){var e=(0,r.Z)(l().mark((function e(t){var n,i,a,s,r;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Co){e.next=2;break}return e.abrupt("return",null);case 2:if(n=null,t){e.next=5;break}return e.abrupt("return",n);case 5:if(i=ko(yo)){e.next=8;break}return e.abrupt("return",n);case 8:return a=GameCore.Utils.String.params({playerIds:t}),e.next=11,(0,Me.U)(i+"?"+a,{},Co);case 11:if(s=e.sent,!((r=(null==s?void 0:s.data)||[]).length<1)){e.next=15;break}return e.abrupt("return",n);case 15:return e.next=17,_o(r);case 17:return n=e.sent[0],e.abrupt("return",n);case 19:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ho=function(){var e=(0,r.Z)(l().mark((function e(){var t,n;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,window.GameSDK.getLeaderboardAsync(Ro);case 2:return t=e.sent,e.next=5,t.getPlayerEntryAsync();case 5:return n=e.sent,e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Zo=function(){var e=(0,r.Z)(l().mark((function e(t,n){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(window.GameSDK.submitGameResultsAsync(n).catch((function(e){})),null==Po){e.next=5;break}if(""!==window.game.auth.getToken()){e.next=4;break}return e.abrupt("return",C().reject("Not logged in"));case 4:return e.abrupt("return",Yo(t,n));case 5:return e.abrupt("return",Vo(n));case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),Yo=function(){var e=(0,r.Z)(l().mark((function e(t,n){var i;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Co){e.next=2;break}return e.abrupt("return",{});case 2:return e.next=4,(0,Me.v)("leaderboards/"+Po+"/players/"+t,{score:n},{},Co);case 4:return i=e.sent,e.abrupt("return",(null==i?void 0:i.data)||{});case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),Vo=function(){var e=(0,r.Z)(l().mark((function e(t){var n;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,window.GameSDK.getLeaderboardAsync(Ro);case 2:return n=e.sent,e.next=5,n.setScoreAsync(t);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();function Wo(e,t){var n="undefined"!==typeof E()&&A()(e)||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){var n;if(!e)return;if("string"===typeof e)return zo(e,t);var i=g()(n=Object.prototype.toString.call(e)).call(n,8,-1);"Object"===i&&e.constructor&&(i=e.constructor.name);if("Map"===i||"Set"===i)return m()(e);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return zo(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var i=0;return function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function zo(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var Ko=GameCore.Configs.LeadersBoard,jo=Ko.UseMock,Xo=Ko.Limit,Jo=Ko.MockOptions,qo=function(e,t,n,a){return void 0===n&&(n=Xo),void 0===a&&(a=0),function(){var s=(0,r.Z)(l().mark((function s(r){var o,c,h,u,d,p,g,f,m,v,E,S,A,y,T,I,C,b,O,P,R;return l().wrap((function(s){for(;;)switch(s.prev=s.next){case 0:if(s.prev=0,o=window.game.player,c=o.getPlayerId(),r($o()),r({type:ri,payload:{leaderboardId:e,type:t,limit:n,offset:a}}),!jo){s.next=11;break}return s.next=8,(0,So.qZ)(1e3);case 8:return d=Te()(h=Ha()(u=new Array(n)).call(u,null)).call(h,(function(e,t){var n=(t+1)*(a+1),i=Jo.PlayerEntryIndex===t,s={playerId:"0"+n,name:"MPlayer "+n,photo:"./assets/images/others/avatar.png",rank:n,score:Math.floor(1e5/n)};if(i){var r=window.game.player.getPlayer(),o=r.playerId,c=r.name,l=r.photo;s.playerId=o,s.name=c,s.photo=l}return s})),r(Qo(d,t)),s.abrupt("return");case 11:if(p=[],t!==Ao){s.next=18;break}return s.next=15,Lo({limit:n,offset:a});case 15:p=s.sent,s.next=31;break;case 18:if(t!==yo){s.next=31;break}return(g=o.getConnectedPlayerIds(n,a)).push(c),f=GameCore.Utils.Array.unique(g),s.next=24,No({playerIds:f,limit:f.length});case 24:p=s.sent,m=l().mark((function e(){var t,n;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=E.value,n=Ae()(p).call(p,(function(e){return e.playerId===t})),n&&0!==n.length||p.push({playerId:t,score:0});case 3:case"end":return e.stop()}}),e)})),v=Wo(f);case 27:if((E=v()).done){s.next=31;break}return s.delegateYield(m(),"t0",29);case 29:s.next=27;break;case 31:for(S={},A=Wo(p);!(y=A()).done;)T=y.value,I=T.playerId,C=T.score,b=T.rank,O=T.getPlayer(),P=O.getPhoto(),R=O.getName(),S[I]={playerId:I,name:R,photo:P,score:C,rank:b};r(Qo(S,t)),s.next=41;break;case 37:s.prev=37,s.t1=s.catch(0),r(Qo([],t)),(0,i.tO)(s.t1);case 41:case"end":return s.stop()}}),s,null,[[0,37]])})));return function(e){return s.apply(this,arguments)}}()},Qo=function(e,t){return{type:oi,payload:{leaders:e,type:t}}},$o=function(){return{type:ci,payload:{}}},ec=function(e){return e[ti]},tc=((0,ce.P1)([function(e){return ec(e).leaderboardId}],(function(e){return e})),(0,ce.P1)([function(e){return ec(e).leaders}],(function(e){return e}))),nc=(0,ce.P1)([function(e){return ec(e).isRequesting}],(function(e){return e})),ic=n(46),ac={targets:[],props:{alpha:{duration:500,value:{start:0,from:0,to:1},ease:Phaser.Math.Easing.Cubic.Out},scale:{duration:1e3,value:{start:.8,from:.8,to:1},ease:Phaser.Math.Easing.Elastic.Out,easeParams:[.1,.45]}}},sc=function(e){function t(t){return e.call(this,ac,t)||this}return(0,o.Z)(t,e),t}(ic.Z),rc=sc,oc={targets:[],props:{alpha:{start:0,to:1,duration:500,ease:Phaser.Math.Easing.Cubic.Out},scale:{start:.8,to:1,duration:1e3,ease:Phaser.Math.Easing.Elastic.Out,easeParams:[.1,.45]},y:{start:0,to:0,duration:500,ease:Phaser.Math.Easing.Back.Out}},delay:0},cc=function(e){function t(t){return e.call(this,oc,t)||this}return(0,o.Z)(t,e),t}(ic.Z),lc=cc,hc=n(454),uc=function(e){function t(t,n){var i;(i=e.call(this,t)||this).payload=void 0,i.loading=void 0,i.photo=void 0,i.avtFrame=void 0,i.background=void 0,i.loadPhotoTimer=void 0,i.handleLoadPhotoAfterDelay=function(e,t){return function(){var n=i.scene.textures.get(e);n&&n.key===e?i.handleLoadComplete(e):(i.scene.load.once("filecomplete-image-"+e,i.handleLoadComplete),i.scene.load.image(e,t),i.scene.load.start())}},i.handleLoadComplete=function(e){if(i.scene){var t=i.payload,n=t.id,a=t.radius,s=void 0===a?0:a;if(n&&n===e){var r=n+"_bordered_"+s,o=s>0?r:n,c=i.scene.textures.get(o);if(c&&c.key===o)i.setPhoto(c.key);else if(0!=s&&s<100){if(!GameCore.Utils.Image.drawBorder({scene:i.scene,key:n,newKey:r,radius:s}))return void i.showLoading(!1);i.setPhoto(r)}else if(100==s){if(!GameCore.Utils.Image.drawCircle({scene:i.scene,key:n,newKey:r}))return void i.showLoading(!1);i.setPhoto(r)}else i.setPhoto(n)}}},i.handleLoadPhotoFailed=function(e){e.key===i.payload.id&&i.setDefaultAvatar(e.key)},i.scene.add.existing((0,Ba.Z)(i)),i.payload=n,i.setSize(n.width,n.height),i.createBackground(),i.createLoading(),i.createPhoto(),i.createFrame();var a=i.payload,s=a.id,r=a.url,o=a.radius;return s&&r&&i.loadPhoto(s,r,o),i.addDefaultListeners(),i}(0,o.Z)(t,e);var n=t.prototype;return n.setFrame=function(e){this.avtFrame.setFrame(e),this.avtFrame.setVisible(!0)},n.setBackground=function(e){this.background.setFrame(e)},n.loadPhoto=function(e,t,n){var i;if(void 0===n&&(n=0),this.payload.id=e,this.payload.url=t,this.payload.radius=n,null==(i=this.loadPhotoTimer)||i.remove(),e&&t){var a=this.scene.textures.get(e);if(a&&a.key===e)this.handleLoadComplete(e);else{this.showLoading(!0);var s=this.payload.loadDelay||0;this.loadPhotoTimer=this.scene.time.delayedCall(s,this.handleLoadPhotoAfterDelay(e,t))}}else this.setPhoto(pa.Z.AVATAR.KEY)},n.addDefaultListeners=function(){var e=this;this.scene.load.on(Phaser.Loader.Events.FILE_LOAD_ERROR,this.handleLoadPhotoFailed),this.on(Phaser.GameObjects.Events.DESTROY,(function(){var t;null==(t=e.loadPhotoTimer)||t.remove(),e.scene.load.off(Phaser.Loader.Events.FILE_LOAD_ERROR,e.handleLoadPhotoFailed)}))},n.setDefaultAvatar=function(e){this.loadPhoto(e,pa.Z.AVATAR.FILE,this.payload.radius)},n.createBackground=function(){var e=this.payload,t=e.key,n=e.background,i=e.borderWidth,a=void 0===i?0:i;this.background=this.scene.make.image({key:t,frame:n}),this.background.setWorldSize(this.width-a,this.height-a),this.add(this.background)},n.createLoading=function(){this.loading=new hc.Z(this.scene),this.loading.setWorldSize(.75*this.width,.75*this.height),this.loading.setVisible(!1),this.add(this.loading)},n.createPhoto=function(){this.photo=this.scene.make.image({x:0,y:0,origin:{x:.5,y:.5},visible:!1}),this.add(this.photo)},n.createFrame=function(){var e=this.payload,t=e.key,n=e.frame,i=e.width,a=e.height;n?(this.avtFrame=this.scene.make.image({key:t,frame:n}),this.avtFrame.setWorldSize(i,a)):this.avtFrame=this.scene.make.image({x:0,y:0,origin:{x:.5,y:.5},visible:!1}),this.add(this.avtFrame)},n.showLoading=function(e){this.photo.setVisible(!e),this.loading.setVisible(e)},n.setPhoto=function(e){this.showLoading(!1),this.photo.setTexture(e),this.photo.setFrame(0);var t=this.payload,n=t.width,i=t.height,a=Math.min(n,i)-(this.payload.borderWidth||8);this.photo.setWorldSize(a,a),Phaser.Display.Align.In.Center(this.photo,this.background)},t}(Phaser.GameObjects.Container),dc=uc,pc=function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).name="InvalidContextId",i.message=t||"This contextId is not valid",i.payload=n,i}return(0,o.Z)(t,e),t}((0,N.Z)(Error)),gc=pc,fc=function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).name="NewScoreIsBad",i.message=t||"The new score is bad",i.payload=n,i}return(0,o.Z)(t,e),t}((0,N.Z)(Error)),mc=fc,vc=function(e){return e[hn]},Ec=(0,ce.P1)([function(e){return vc(e).gameplay.mode}],(function(e){return e})),Sc=((0,ce.P1)([function(e){return vc(e).gameplay.status}],(function(e){return e})),(0,ce.P1)([function(e){return vc(e).gameplay.rescued}],(function(e){return e}))),Ac=(0,ce.P1)([function(e){return vc(e).gameplay.startAt}],(function(e){return e})),yc=(0,ce.P1)([function(e){return vc(e).gameplay.finishAt}],(function(e){return e})),Tc=(0,ce.P1)([function(e){return vc(e).gameplay.showMiniJourney}],(function(e){return e})),Ic=n(624),Cc=function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).name="CurrentTournamentScoreIsNotBest",i.message=t||"The new score is not best",i.payload=n,i}return(0,o.Z)(t,e),t}((0,N.Z)(Error)),bc=Cc,Oc=GameCore.Configs.Tournament.UseLeaderboard,Pc=function(e){return{type:Jn,payload:{tournamentId:e}}},Rc=function(e){return function(){var t=(0,r.Z)(l().mark((function t(n){var a,s,r,o,c,h,u,d,p;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a=window.game.facebook,s=e.playerId,r=e.playerName,o=e.score,c=e.autoStartGame,h=r+"'s Tournament",u=GameCore.Utils.String.generateObjectId(),t.next=7,a.tournament.createAsync({initialScore:o,config:{title:h,tournamentTitle:h},data:{playerId:s,playerName:r,leaderboardId:u}});case 7:return d=t.sent,p=d.getID(),c&&(n(Pc(p)),n(bh())),t.next=12,(0,Ic.Z5)({_id:u,createdBy:s,name:p,description:h,expireTime:6048e5});case 12:if(t.sent._id!==u){t.next=16;break}return t.next=16,(0,Ic.aV)(u,s,o);case 16:t.next=21;break;case 18:t.prev=18,t.t0=t.catch(0),(0,i.tO)(t.t0);case 21:case"end":return t.stop()}}),t,null,[[0,18]])})));return function(e){return t.apply(this,arguments)}}()},wc=function(e){return(0,r.Z)(l().mark((function t(){var n,i,a,s,r;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=window.game.facebook,i=e.playerId,a=e.playerName,s=e.leaderboardId,r=e.score,s&&(0,Ic.aV)(s,i,r),t.next=5,n.tournament.shareAsync({score:r,data:{type:"tournament",playerId:i,playerName:a}});case 5:(0,Ic.aV)(s,i,r);case 6:case"end":return t.stop()}}),t)})))},xc=function(){var e=(0,r.Z)(l().mark((function e(){var t,n,i;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=window.game.facebook,e.next=4,t.getTournamentAsync();case 4:return n=e.sent,i=JSON.parse(n.getPayload()||"{}"),e.abrupt("return",i.leaderboardId);case 9:return e.prev=9,e.t0=e.catch(0),e.abrupt("return",null);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}(),kc=function(){var e=(0,r.Z)(l().mark((function e(){var t;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=window.game.facebook,e.next=4,t.getTournamentAsync();case 4:return e.abrupt("return",e.sent);case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",null);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),_c=function(e){return function(){var t=(0,r.Z)(l().mark((function t(n,i){var a,s,r,o,c,h,u,d,p,g,f,m,v,E;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=null,s=window.game,r=s.player,o=s.facebook,c=s.analytics,t.prev=2,u=i(),d=Ec(u),la()(h=[fa,Ea]).call(h,d)){t.next=7;break}return t.abrupt("return");case 7:return n({type:qn,payload:{}}),p=r.getPlayer(),g=p.playerId,f=p.name,t.next=11,kc();case 11:if(!t.sent){t.next=23;break}if(a=Ot._.TOURNAMENT_SHARE,!Oc){t.next=21;break}return t.next=17,xc();case 17:return m=t.sent,v={playerId:g,playerName:f,score:e,leaderboardId:m},t.next=21,n(wc(v));case 21:t.next=28;break;case 23:if(a=Ot._.TOURNAMENT_CREATE,!Oc){t.next=28;break}return E={playerId:g,playerName:f,score:e,autoStartGame:!1},t.next=28,n(Rc(E));case 28:if(c.event(a,{success:!0}),!1!==Oc){t.next=32;break}return t.next=32,o.requestTournamentAsync(e);case 32:n(Lc(e)),t.next=40;break;case 35:if(t.prev=35,t.t0=t.catch(2),!(t.t0 instanceof bc)){t.next=39;break}return t.abrupt("return");case 39:a&&c.event(a,{success:!1});case 40:case"end":return t.stop()}}),t,null,[[2,35]])})));return function(e,n){return t.apply(this,arguments)}}()},Lc=function(e){return{type:Qn,payload:{score:e}}},Dc=function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).name="InvalidOpponentId",i.message=t||"This opponentId is not valid",i.payload=n,i}return(0,o.Z)(t,e),t}((0,N.Z)(Error)),Mc=Dc,Nc=function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).name="WideFrameRenderFail",i.message=t||"Wide frame render fail",i.payload=n,i}return(0,o.Z)(t,e),t}((0,N.Z)(Error)),Bc=Nc,Gc={PASS_LEVELS:{ID:"pass-levels",EVENTS:{PASS_LEVEL:"pass-level"}},COLLECT_DIAMONDS:{ID:"collect-diamonds",EVENTS:{COLLECT_DIAMONDS:"collect-diamonds"}},INVITE_FRIENDS:{ID:"invite-friends",EVENTS:{INVITED_FRIEND:"INVITED_FRIEND"}},REACH_SCORE:{ID:"reach-score",EVENTS:{ADD_SCORE:"add-score"}},EVENTS:{TASKS_RESET:"tasks-reset",NOTICE_UPDATE:"notice-update"}},Fc=(0,ce.P1)([function(e){return vc(e).stats.data}],(function(e){return e})),Uc=(0,ce.P1)([function(e){return vc(e).stats.current}],(function(e){return e})),Hc=((0,ce.P1)([function(e){return vc(e).stats.isRequesting}],(function(e){return e})),(0,ce.P1)([function(e){return e.messages.data}],(function(e){return e}))),Zc=(0,ce.P1)([Hc,function(e,t){return t.opponentId}],(function(e,t){return!!GameCore.Utils.Valid.isString(t)&&(!!GameCore.Utils.Object.hasOwn(e,t)&&e[t].sent)})),Yc=n(418),Vc=new(n.n(Yc)()),Wc=n(351),zc=n.n(Wc),Kc=function(e,t){return t.playerId},jc=((0,ce.P1)([function(e){return vc(e).match.isRequesting}],(function(e){return e})),(0,ce.P1)([function(e){return vc(e).match.single}],(function(e){return e}))),Xc=(0,ce.P1)([function(e){return vc(e).match.single._id}],(function(e){return e})),Jc=(0,ce.P1)([function(e){return vc(e).match.single.score}],(function(e){return e||0})),qc=((0,ce.P1)([function(e){return vc(e).match.single.level}],(function(e){return e||0})),(0,ce.P1)([function(e){var t;return null==(t=vc(e).match.single.data)?void 0:t.diamond}],(function(e){return e||0})),(0,ce.P1)([function(e){var t;return null==(t=vc(e).match.single.data)?void 0:t.fen}],(function(e){return e||null})),(0,ce.P1)([function(e){return vc(e).match.single.status}],(function(e){return e})),(0,ce.P1)([function(e){return vc(e).match.single.playerId}],(function(e){return e})),(0,ce.P1)([function(e){return vc(e).match.challenge}],(function(e){return e}))),Qc=(0,ce.P1)([function(e){return vc(e).match.challenge._id}],(function(e){return e})),$c=(0,ce.P1)([function(e){return vc(e).match.challenge.status}],(function(e){return e})),el=(0,ce.P1)([function(e){return vc(e).match.challenge.opponentInfo}],(function(e){return e})),tl=((0,ce.P1)([function(e){return vc(e).match.challenge.whitePlayerId}],(function(e){return e})),(0,ce.P1)([function(e){return vc(e).match.challenge.blackPlayerId}],(function(e){return e})),(0,ce.P1)([qc,Kc],(function(e,t){var n=e.whitePlayerId,i=e.blackPlayerId;return n!==t&&i===t?n:i!==t&&n===t?i:""})),(0,ce.P1)([qc,Kc],(function(e,t){var n=e.whitePlayerId,i=e.blackPlayerId;return n===t?n:i===t?i:ga.playerId}))),nl=(0,ce.P1)([qc,Kc],(function(e,t){var n=e.whitePlayerId,i=e.blackPlayerId,a=e.whitePlayerFinish,s=e.blackPlayerFinish;return t&&n===t?a:!(!t||i!==t)&&s})),il=(0,ce.P1)([qc,function(e,t){return t.opponentId}],(function(e,t){var n=e.whitePlayerId,i=e.blackPlayerId,a=e.whitePlayerFinish,s=e.blackPlayerFinish;return t&&n===t?a:!(!t||i!==t)&&s})),al=(0,ce.P1)([function(e){return vc(e).match.group.opponentInfo}],(function(e){return e})),sl=((0,ce.P1)([function(e){return vc(e).match.online.players}],(function(e){return e})),(0,ce.P1)([function(e){return vc(e).match.journey}],(function(e){return e}))),rl=(0,ce.P1)([function(e){return vc(e).match.journey._id}],(function(e){return e})),ol=(0,ce.P1)([function(e){return vc(e).match.journey.level}],(function(e){return e})),cl=(0,ce.P1)([function(e){return vc(e).match.journey.challengeMode}],(function(e){return e})),ll=(0,ce.P1)([function(e){return vc(e).match.journey.score}],(function(e){return e})),hl=function(e){if("string"!==typeof e||!e)throw new Bc(null,{imageShare:e})},ul=function(){return(0,r.Z)(l().mark((function e(){var t,n,a,s,r,o,c,h,u,d,p;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=window.game,n=t.player,a=t.analytics,s=t.facebook,r=t.globalScene,o=t.lang,e.prev=1,r.screen.open(za.o4.NOTIFY_SCREEN,{message:o.Text.LOADING,loading:!0}),e.next=5,dl();case 5:return c=e.sent,hl(c),h=n.getPlayer(),u=h.playerId,d=h.name,p=h.photo,e.next=10,s.shareAsync({text:o.Text.SHARE_BEST_SCORE,intent:"SHARE",image:c||"",data:{playerId:u,playerName:d,playerPhoto:p,type:ha}});case 10:a.event(Ot._.SHARE,{share_content_type:"BestScore",success:!0}),e.next=17;break;case 13:e.prev=13,e.t0=e.catch(1),a.event(Ot._.SHARE,{share_content_type:"BestScore",success:!1}),(0,i.tO)(e.t0);case 17:return e.prev=17,r.screen.close(za.o4.NOTIFY_SCREEN),e.finish(17);case 20:case"end":return e.stop()}}),e,null,[[1,13,17,20]])})))},dl=function(){var e=(0,r.Z)(l().mark((function e(){var t,n,i,a,s,r,o,c,h,u;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=window.game,n=t.player,i=t.globalScene,a=n.getPlayer(),s=a.playerId,r=a.photo,o=a.data,c=(o||{}).score,h=pl({playerId:s,playerPhoto:r,playerScore:c})){e.next=7;break}return e.abrupt("return");case 7:return u={name:"share-best-score",width:952,height:492,renderOptions:h},e.next=10,i.frameCapture.capture(u);case 10:return e.abrupt("return",e.sent);case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),pl=(function(){var e=(0,r.Z)(l().mark((function e(t){var n,i,a,s,r,o,c,h,u,d,p,g;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=window.game,i=n.player,a=n.globalScene,s=Uc(t),r=Fc(t),o=i.getPlayer(),c=o.playerId,h=o.photo,u=r[c]||{},d=u.score,s.bestScore>d&&(d=s.bestScore),p=pl({playerId:c,playerPhoto:h,playerScore:d})){e.next=10;break}return e.abrupt("return");case 10:return g={name:"share-current-score",width:952,height:492,renderOptions:p},e.next=13,a.frameCapture.capture(g);case 13:return e.abrupt("return",e.sent);case 14:case"end":return e.stop()}}),e)})))}(),function(e){var t=e.playerId,n=void 0===t?"10":t,i=e.playerPhoto,a=void 0===i?"":i,s=e.playerScore,r=void 0===s?0:s;return"string"!==typeof n||"string"!==typeof a||"number"!==typeof r?null:{avatar:{name:""+n,type:"image",x:635,y:122,image:a,width:210,height:210,fallbackWithImage:pa.Z.AVATAR.KEY},wideFrame:{name:"wide-frame-message-win",type:"image",x:0,y:0,image:"./assets/wideframes/wide-frame-message-win.png",width:952,height:492},playerScoreShadow:{type:"text",x:740,y:437,font:"600 70px",fillStyle:"#c4683f",text:""+r,textAlign:"center"},playerScore:{type:"text",x:740,y:437,font:"600 70px",fillStyle:"#f2a62e",text:""+r,textAlign:"center"}}}),gl=(function(){var e=(0,r.Z)(l().mark((function e(){var t,n,i,a,s,r,o,c,h,u,d,p,g,f,m,v,E,S,A,y;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=window.game,n=t.player,i=t.profile,a=t.globalScene,s=n.getPlayer(),r=s.playerId,o=s.name,c=s.photo,(h=n.getConnectedPlayerIds(99,0)).push(r),u=[],e.next=7,No({playerIds:GameCore.Utils.Array.unique(h),limit:h.length});case 7:d=e.sent,p=GameCore.Utils.Object.keyBy(d,"playerId"),g={playerId:r,name:o,photo:c,score:0},GameCore.Utils.Object.hasOwn(p,r)&&(g=p[r]),u.push(g),e.t0=zc()(l()).call(l(),p);case 14:if((e.t1=e.t0()).done){e.next=27;break}if(f=e.t1.value,!GameCore.Utils.Object.hasOwn(p,f)){e.next=25;break}if(m=p[f],3!==u.length){e.next=20;break}return e.abrupt("break",27);case 20:if(m.playerId!==r){e.next=22;break}return e.abrupt("continue",14);case 22:if(!(Number(m.score)>Number(g.score))){e.next=24;break}return e.abrupt("continue",14);case 24:u.push(m);case 25:e.next=14;break;case 27:return v=GameCore.Utils.Array.unique(h),e.next=30,i.requestProfiles(v);case 30:if(E=i.getProfiles(),u.forEach((function(e,t){var n=e.playerId;if(GameCore.Utils.Object.hasOwn(E,n)){var i=E[n],a=i.name,s=i.photo;u[t].name=a,u[t].photo=s}})),u.length<3)for(S=0;S<=3-u.length;)u.push({playerId:"bot"+S,name:"???",score:0,photo:"./assets/images/others/avatar.png"}),S++;if(A=gl({playerId:r,playerName:o,playerPhoto:c,listLeaders:u})){e.next=37;break}return e.abrupt("return");case 37:return y={name:"share-leaderboard",width:1500,height:2e3,renderOptions:A},e.next=40,a.frameCapture.capture(y);case 40:return e.abrupt("return",e.sent);case 41:case"end":return e.stop()}}),e)})))}(),function(e){var t=e.playerId,n=void 0===t?"10":t,i=e.playerPhoto,a=void 0===i?"":i,s=e.listLeaders,r=void 0===s?[]:s;if(!Array.isArray(r))return null;if("string"!==typeof n)return null;if("string"!==typeof a)return null;var o={avatar:{name:""+n,type:"image",x:490,y:250,image:a,width:525,height:525,fallbackWithImage:pa.Z.AVATAR.KEY}};return r.forEach((function(e,t){var n=e.playerId,i=e.photo;o["photo_"+n]={name:""+n,type:"image",x:475,y:1215+385*t,image:i,width:150,height:150,fallbackWithImage:pa.Z.AVATAR.KEY}})),o.wideFrame={name:"wide-frame-share",type:"image",x:0,y:0,image:"./assets/wideframes/wide-frame-share.png",width:1500,height:2e3},r.forEach((function(e,t){var n=e.playerId,i=e.name,a=e.score;o["name_"+n]={type:"text",x:690,y:1312+193*t,font:"600 60px",text:i,fillStyle:"#b18151"},o["score_"+n]={type:"text",x:1070,y:1312+193*t,font:"600 55px",text:a,fillStyle:"#b18151"}})),o}),fl=function(){var e=(0,r.Z)(l().mark((function e(t){var n,i,a,s,r,o,c,h,u,d,p,g,f,m,v,E,S,A;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=window.game,i=n.player,a=n.globalScene,s=Fc(t),r=i.getPlayer(),o=r.photo,c=r.playerId,h=el(t),u=h.playerId,d=h.photo,p=nl(t,{playerId:c}),g=il(t,{opponentId:u}),f=s[c]||{},m=f.score,v=s[u]||{},E=v.score,S=ml({playerId:c,playerPhoto:o,playerScore:m,opponentId:u,opponentPhoto:d,opponentScore:E,isPlayerFinished:p,isOpponentFinished:g})){e.next=12;break}return e.abrupt("return");case 12:return A={name:"share-game-result",width:952,height:492,renderOptions:S},e.next=15,a.frameCapture.capture(A);case 15:return e.abrupt("return",e.sent);case 16:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ml=(function(){var e=(0,r.Z)(l().mark((function e(t){var n,i,a,s,r,o,c,h,u,d,p,g,f,m,v;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=window.game,i=n.player,a=n.globalScene,s=Fc(t),r=i.getPlayer(),o=r.photo,c=r.playerId,h=al(t),u=h.playerId,d=h.photo,p=h.score,g=s[c]||{},f=g.score,m=ml({playerId:c,playerPhoto:o,playerScore:f,opponentId:u,opponentPhoto:d,opponentScore:p})){e.next=9;break}return e.abrupt("return");case 9:return v={name:"share-group-match-result",width:952,height:492,renderOptions:m},e.next=12,a.frameCapture.capture(v);case 12:return e.abrupt("return",e.sent);case 13:case"end":return e.stop()}}),e)})))}(),function(e){var t=e.playerId,n=void 0===t?"10":t,i=e.playerPhoto,a=void 0===i?"":i,s=e.playerScore,r=void 0===s?0:s,o=e.opponentId,c=void 0===o?"20":o,l=e.opponentPhoto,h=void 0===l?"":l,u=e.opponentScore,d=void 0===u?0:u,p=e.isPlayerFinished,g=e.isOpponentFinished;if("string"!==typeof n)return null;if("string"!==typeof a)return null;if("number"!==typeof r)return null;if("string"!==typeof c)return null;if("string"!==typeof h)return null;if("number"!==typeof d)return null;if("boolean"!==typeof p)return null;if("boolean"!==typeof g)return null;var f=r===d,m=r>d,v=p||g,E=p&&g,S={leftPhoto:{name:""+n,type:"image",x:55,y:162,image:a,width:200,height:200,fallbackWithImage:pa.Z.AVATAR.KEY},rightPhoto:{name:""+c,type:"image",x:702,y:162,image:h,width:200,height:200,fallbackWithImage:pa.Z.AVATAR.KEY},wideFrame:{name:"wide-frame-game-result",type:"image",x:0,y:0,image:"./assets/wideframes/wide-frame-game-result.png",width:952,height:492}};return v&&(S.leftScoreShadow={type:"text",x:148,y:443,font:"600 70px",fillStyle:"#c4683f",text:p?""+r:"???",textAlign:"center"},S.leftScore={type:"text",x:148,y:443,font:"600 70px",fillStyle:"#f2a62e",text:p?""+r:"???",textAlign:"center"},S.rightScoreShadow={type:"text",x:795,y:443,font:"600 70px",fillStyle:"#c4683f",text:g?""+d:"???",textAlign:"center"},S.rightScore={type:"text",x:795,y:443,font:"600 70px",fillStyle:"#f2a62e",text:g?""+d:"???",textAlign:"center"}),!f&&E&&(m?S.leftCrown={name:"crown-icon",type:"image",x:12,y:122,image:"./assets/images/others/crown-icon.png",width:106,height:78}:S.rightCrown={name:"crown-icon",type:"image",x:665,y:122,image:"./assets/images/others/crown-icon.png",width:106,height:78}),S}),vl=function(){return function(){var e=(0,r.Z)(l().mark((function e(t){var n,a,s,r,o,c,h,u,d,p,g;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=window.game,a=n.player,s=n.analytics,r=n.facebook,o=n.globalScene,c=n.lang,e.prev=1,o.screen.open(za.o4.NOTIFY_SCREEN,{message:c.Text.LOADING,loading:!0}),e.next=5,El();case 5:return h=e.sent,hl(h),u=a.getPlayer(),d=u.playerId,p=u.name,g=u.photo,e.next=10,r.shareAsync({text:"Great! I have a score!",intent:"SHARE",image:h||"",data:{playerId:d,playerName:p,playerPhoto:g,type:ha}});case 10:s.event(Ot._.SHARE,{share_content_type:"Score",success:!0}),e.next=17;break;case 13:e.prev=13,e.t0=e.catch(1),s.event(Ot._.SHARE,{share_content_type:"Score",success:!1}),(0,i.tO)(e.t0);case 17:return e.prev=17,o.screen.close(za.o4.NOTIFY_SCREEN),e.finish(17);case 20:case"end":return e.stop()}}),e,null,[[1,13,17,20]])})));return function(t){return e.apply(this,arguments)}}()},El=function(){var e=(0,r.Z)(l().mark((function e(){var t,n,i,a,s,r,o,c,h;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=window.game,n=t.player,i=t.globalScene,a=n.getPlayer(),s=a.playerId,r=a.photo,o=n.getBestScore(),c=Sl({playerId:s,playerPhoto:r,playerScore:o})){e.next=7;break}return e.abrupt("return");case 7:return h={name:"share-score",width:952,height:492,renderOptions:c},e.next=10,i.frameCapture.capture(h);case 10:return e.abrupt("return",e.sent);case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Sl=function(e){var t=e.playerId,n=void 0===t?"10":t,i=e.playerPhoto,a=void 0===i?"":i,s=e.playerScore,r=void 0===s?0:s;return"string"!==typeof n||"string"!==typeof a||"number"!==typeof r?null:{avatar:{name:""+n,type:"image",x:635,y:122,image:a,width:210,height:210,fallbackWithImage:pa.Z.AVATAR.KEY},wideFrame:{name:"wide-frame-message-win",type:"image",x:0,y:0,image:"./assets/wideframes/wide-frame-message-win.png",width:952,height:492},playerScoreShadow:{type:"text",x:740,y:437,font:"600 70px",fillStyle:"#c4683f",text:""+r,textAlign:"center"},playerScore:{type:"text",x:740,y:437,font:"600 70px",fillStyle:"#f2a62e",text:""+r,textAlign:"center"}}},Al=function(e){var t=e.contextId;if(""===t||"string"!==typeof t)throw new gc(null,{contextId:t})},yl=function(e){var t=e.opponentId,n=e.contextId;if(""===t||"string"!==typeof t)throw new Mc(null,{opponentId:t});if(""===n||"string"!==typeof n)throw new gc(null,{contextId:n})},Tl=function(e){if(null===e.imageShare)throw new Bc},Il=function(e,t){return void 0===t&&(t=!0),function(n,i){var a,s=i(),r=Hc(s);if(t){var o;if(null!=(o=r[e])&&o.sent)return;n(Cl(e))}null!=(a=r[e])&&a.sent&&n(bl(e))}},Cl=function(e){return{type:Bt.qj,payload:{opponentId:e}}},bl=function(e){return{type:Bt.rh,payload:{opponentId:e}}},Ol=function(){var e=(0,r.Z)(l().mark((function e(t,n){var a,s;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,a=window.game.facebook,yl({opponentId:t,contextId:n}),(s=window.game.facebook.getContextID())!==n||""===n){e.next=6;break}return e.abrupt("return",s);case 6:if("10"!==t||""===n){e.next=8;break}return e.abrupt("return",n);case 8:if(!n){e.next=12;break}return e.next=11,a.switchAsync(n);case 11:return e.abrupt("return",window.game.facebook.getContextID());case 12:e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),(0,i.tO)(e.t0);case 17:return e.abrupt("return","");case 18:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(t,n){return e.apply(this,arguments)}}(),Pl=function(e,t){return function(){var n=(0,r.Z)(l().mark((function n(a,s){var r,o,c,h,u,d,p,g,f,m,v,E,S;return l().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=window.game,o=r.player,c=r.analytics,h=r.facebook,n.prev=1,u=t.matchId,d=t.contextId,n.next=5,Ol(e,d);case 5:return p=n.sent,Al({contextId:p}),g=s(),n.next=10,fl(g);case 10:return f=n.sent,Tl({imageShare:f}),m=o.getPlayer(),v=m.name,E=m.playerId,S=window.game.lang.getText({key:"MESSAGE_INVITE",variables:[v]}),n.next=16,h.sendMessage({cta:"Play",text:S,image:f||"",template:"challenge",data:{type:ua,matchId:u,playerId:E,opponentId:e,status:Vn},action:"CUSTOM"});case 16:a(Il(e)),c.event(Ot._.MESSAGE,{message_content_type:"Invite",success:!0}),Vc.emit(Gc.INVITE_FRIENDS.EVENTS.INVITED_FRIEND,{type:"friend",value:1,opponentId:e}),n.next=25;break;case 21:n.prev=21,n.t0=n.catch(1),c.event(Ot._.MESSAGE,{message_content_type:"Invite",success:!1}),(0,i.tO)(n.t0);case 25:case"end":return n.stop()}}),n,null,[[1,21]])})));return function(e,t){return n.apply(this,arguments)}}()},Rl=(function(){var e=(0,r.Z)(l().mark((function e(t,n){var a,s,r,o,c,h,u,d,p,g;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a=window.game,s=a.player,r=a.facebook,o=s.getPlayer(),c=o.playerId,h=o.name,u=o.photo,d=Uc(n),p=d.score,g={type:da,playerId:c,playerName:h,playerPhoto:u,playerScore:p},e.next=7,r.sendMessage({cta:{default:"Play",localizations:{en_US:"Play",vi_VN:"Ch\u01a1i"}},text:{default:h+" beats your high score. Their score: "+p+".",localizations:{en_US:h+" beats your high score. Their score: "+p+".",vi_VN:h+" v\u1eeba v\u01b0\u1ee3t \u0111i\u1ec3m s\u1ed1 cao nh\u1ea5t c\u1ee7a b\u1ea1n! Ch\u01a1i l\u1ea7n n\u1eefa ch\u1ee9?"}},image:t||"",template:"play_turn",data:g,action:"CUSTOM"});case 7:e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),(0,i.tO)(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})))}(),function(){var e=(0,r.Z)(l().mark((function e(t,n){var a,s,r,o,c,h,u,d,p,g;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=window.game,s=a.player,r=a.facebook,e.prev=1,o=s.getPlayer(),c=o.playerId,h=o.name,u=o.photo,d=Uc(n),p=d.score,g={type:da,playerId:c,playerName:h,playerPhoto:u,playerScore:p},e.next=7,r.sendMessage({cta:{default:"Play",localizations:{en_US:"Play",vi_VN:"Ch\u01a1i ngay"}},text:{default:h+" got "+p+" scores. So easy! Can you?",localizations:{en_US:h+" got "+p+" scores. So easy! Can you?",vi_VN:h+" \u0111\xe3 \u0111\u1ea1t "+p+" \u0111i\u1ec3m! Qu\xe1 d\u1ec5 lu\xf4n. Ch\u01a1i l\u1ea1i n\xe0o!"}},image:t||"",template:"play_turn",data:g,action:"CUSTOM"});case 7:e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),(0,i.tO)(e.t0);case 12:case"end":return e.stop()}}),e,null,[[1,9]])})))}(),function(e){try{var t=localStorage.getItem(e);return null===t?null:GameCore.Utils.Json.decode(t)}catch(n){return null}}),wl=function(e,t){try{var n=Rl(e),i={};GameCore.Utils.Valid.isObject(n)&&(i=n);var a=GameCore.Utils.Json.clone(t);if(!GameCore.Utils.Valid.isObject(a))return!1;var s=GameCore.Utils.Object.clear(a),r=(0,nn.TS)(i,s),o=GameCore.Utils.Json.encode(r);return localStorage.setItem(e,o),!0}catch(c){return!1}},xl=function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).name="InvalidMatchId",i.message=t||"Invalid match id",i.payload=n,i}return(0,o.Z)(t,e),t}((0,N.Z)(Error)),kl=GameCore.Configs.ApiHost,_l=(function(){var e=(0,r.Z)(l().mark((function e(t){var n;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"single-matches",e.next=3,(0,Me.v)("single-matches",t,{},kl);case 3:return n=e.sent,e.abrupt("return",(null==n?void 0:n.data)||{});case 5:case"end":return e.stop()}}),e)})))}(),function(){var e=(0,r.Z)(l().mark((function e(){var t;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"single-matches/active",e.next=3,(0,Me.U)("single-matches/active",{},kl);case 3:return t=e.sent,e.abrupt("return",(null==t?void 0:t.data)||{});case 5:case"end":return e.stop()}}),e)})))}(),function(){var e=(0,r.Z)(l().mark((function e(t,n){var i,a;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i="single-matches/"+t+"/move",e.next=3,(0,Me.v)(i,n,{},kl);case 3:return a=e.sent,e.abrupt("return",(null==a?void 0:a.data)||{});case 5:case"end":return e.stop()}}),e)})))}(),function(){var e=(0,r.Z)(l().mark((function e(t){var n,i;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="single-matches/"+t+"/finish",e.next=3,(0,Me.v)(n,{},{},kl);case 3:return i=e.sent,e.abrupt("return",(null==i?void 0:i.data)||{});case 5:case"end":return e.stop()}}),e)})))}(),function(){var e=(0,r.Z)(l().mark((function e(t){var n;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"matches",e.next=3,(0,Me.v)("matches",{opponentPlayerId:t},{},kl);case 3:return n=e.sent,e.abrupt("return",(null==n?void 0:n.data)||{});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),Ll=function(){var e=(0,r.Z)(l().mark((function e(t){var n,i;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="matches/"+t+"/join",e.next=3,(0,Me.v)(n,{},{},kl);case 3:return i=e.sent,e.abrupt("return",(null==i?void 0:i.data)||{});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Dl=function(){var e=(0,r.Z)(l().mark((function e(t){var n,i;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="matches/"+t,e.next=3,(0,Me.U)(n,{},kl);case 3:return i=e.sent,e.abrupt("return",(null==i?void 0:i.data)||{});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ml=function(){var e=(0,r.Z)(l().mark((function e(t,n,i,a){var s,r;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s="matches/"+t+"/finish",e.next=3,(0,Me.v)(s,{matchId:t,score:n,level:i,extraData:a},{},kl);case 3:return r=e.sent,e.abrupt("return",(null==r?void 0:r.data)||{});case 5:case"end":return e.stop()}}),e)})));return function(t,n,i,a){return e.apply(this,arguments)}}(),Nl=function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).name="InvalidMatchStatus",i.message=t||"The match status is not valid",i.payload=n,i}return(0,o.Z)(t,e),t}((0,N.Z)(Error)),Bl=function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).name="InvalidOpponentId",i.message=t||"Invalid opponent id",i.payload=n,i}return(0,o.Z)(t,e),t}((0,N.Z)(Error)),Gl=Bl,Fl=function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).name="InvalidBlackPlayerId",i.message=t||"Invalid black player id",i.payload=n,i}return(0,o.Z)(t,e),t}((0,N.Z)(Error)),Ul=function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).name="InvalidRequestedMatchId",i.message=t||"The matchId in match data not matched with requested matchId",i.payload=n,i}return(0,o.Z)(t,e),t}((0,N.Z)(Error)),Hl=function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).name="InvalidScore",i.message=t||"The score is not valid",i.payload=n,i}return(0,o.Z)(t,e),t}((0,N.Z)(Error)),Zl=function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).name="InvalidWhitePlayerId",i.message=t||"Invalid white player id",i.payload=n,i}return(0,o.Z)(t,e),t}((0,N.Z)(Error)),Yl=function(e){var t=e.matchId,n=e.score;if(""===t||"string"!==typeof t)throw new xl(null,{matchId:t});if("number"!==typeof n)throw new Hl(null,{score:n})},Vl=function(e){var t=e.matchId,n=e.currentMatchId;if(""===t||"string"!==typeof t)throw new xl(null,{matchId:t});if(""===n||"string"!==typeof n)throw new xl(null,{currentMatchId:n});if(t!==n)throw new Ul(null,{matchId:t,currentMatchId:n})},Wl=function(e){var t=e.matchId,n=e.currentMatchId;if(""===t||"string"!==typeof t)throw new xl(null,{matchId:t});if(""===n||"string"!==typeof n)throw new xl(null,{currentMatchId:n});if(t!==n)throw new Ul(null,{matchId:t,currentMatchId:n})},zl=function(e){var t=e.playerId,n=e.match,i=n._id,a=n.playerId,s=n.status;if(""===i||"string"!==typeof i)throw new xl(null,{matchId:i});if("finished"===s||"string"!==typeof s)throw new Nl("This match is finished",{status:s});if(a!==t)throw new oa(null,{playerId:a,currentPlayerId:t})},Kl=function(e){var t=e.opponentId;if(""===t||"string"!==typeof t)throw new Gl(null,{opponentId:t})},jl=function(e){var t=e.matchId;if(""===t||"string"!==typeof t)throw new xl(null,{matchId:t})},Xl=function(e){var t=e.match,n=t._id,i=t.whitePlayerId,a=t.blackPlayerId;if(""===n||"string"!==typeof n)throw new xl(null,{matchId:n});if(""===i||"string"!==typeof i)throw new Zl(null,{whitePlayerId:i});if(""===a||"string"!==typeof a)throw new Fl(null,{blackPlayerId:a})},Jl=GameCore.Configs.Match,ql=function(e){try{return GameCore.Utils.Hash.stringToHash(R()(e))}catch(t){return""}},Ql=function(e){try{return JSON.parse(GameCore.Utils.Hash.hashToString(e))}catch(t){return""}},$l=function(){return function(){var e=(0,r.Z)(l().mark((function e(t){var n,a,r,o,c,h;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.prev=0,n=window.game,a=n.player,r=n.globalScene,o=n.lang,r.screen.open(za.o4.NOTIFY_SCREEN,{message:o.Text.LOADING,loading:!0}),t({type:yn,payload:{}}),c=a.getPlayerId(),h=(0,s.Z)({},Jl.LocalSingleMatchDefault,{status:"active",playerId:c,startedAt:Date.now(),rescued:0}),zl({playerId:c,match:h}),t(nh(h)),wl(Jl.SingleMatchStore,h),e.next=19;break;case 11:if(e.prev=11,e.t0=e.catch(0),t(nh(null)),!(e.t0 instanceof xl)){e.next=16;break}return e.abrupt("return");case 16:if(!(e.t0 instanceof Nl)){e.next=18;break}return e.abrupt("return");case 18:(0,i.tO)(e.t0);case 19:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t){return e.apply(this,arguments)}}()},eh=function(e,t){return function(n,a){try{Yl((0,s.Z)({matchId:e},t));var r=a(),o=rl(r);Vl({matchId:e,currentMatchId:o}),n({type:Pn,payload:{match:t}});var c=t.data;t.data=ql(c),t.challengeMode=!1;var l=window.game.player;wl(Jl.JourneyMatchStore+"-"+l.getPlayerId(),t)}catch(h){if(h instanceof xl)return;(0,i.tO)(h)}}},th=function(e){return function(){var t=(0,r.Z)(l().mark((function t(n,a){var r,o,c,h,u,d,p,g;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:t.prev=0,r=window.game.player,jl({matchId:e}),o=a(),c=Xc(o),h=r.getPlayerId(),Wl({matchId:e,currentMatchId:c}),n({type:"MATCH_SINGLE_FINISH_REQUEST",payload:{matchId:e}}),u=jc(o),zl({playerId:h,match:u}),d=(0,s.Z)({},Jl.LocalSingleMatchDefault,u,{_id:e,status:"finished",playerId:h,finishAt:Date.now()}),n(nh(d)),p=d.data,(g=(0,s.Z)({},d)).data=ql(p),wl(Jl.SingleMatchStore,g),t.next=26;break;case 18:if(t.prev=18,t.t0=t.catch(0),n(nh(null)),!(t.t0 instanceof xl)){t.next=23;break}return t.abrupt("return");case 23:if(!(t.t0 instanceof Nl)){t.next=25;break}return t.abrupt("return");case 25:(0,i.tO)(t.t0);case 26:case"end":return t.stop()}}),t,null,[[0,18]])})));return function(e,n){return t.apply(this,arguments)}}()},nh=function(e){return{type:Cn,payload:{match:e}}},ih=function(e){return{type:Rn,payload:{match:e}}},ah=function(){return{type:bn,payload:{}}},sh=function(e){return function(){var t=(0,r.Z)(l().mark((function t(n){var a,s,r,o,c,h;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a=window.game,s=a.profile,r=a.globalScene,o=a.lang,r.screen.open(za.o4.NOTIFY_SCREEN,{message:o.Text.LOADING,loading:!0}),c=e.playerId,Kl({opponentId:c}),n({type:Dn,payload:{opponentInfo:e}}),t.next=8,_l(c);case 8:return h=t.sent,Xl({match:h}),t.next=12,s.requestProfiles([c]);case 12:n(lh(h)),t.next=23;break;case 15:if(t.prev=15,t.t0=t.catch(0),n(lh(null)),!(t.t0 instanceof xl)){t.next=20;break}return t.abrupt("return");case 20:if(!(t.t0 instanceof Gl)){t.next=22;break}return t.abrupt("return");case 22:(0,i.tO)(t.t0);case 23:case"end":return t.stop()}}),t,null,[[0,15]])})));return function(e){return t.apply(this,arguments)}}()},rh=function(e,t){return void 0===t&&(t=!0),function(){var n=(0,r.Z)(l().mark((function n(a){var s,r,o,c,h,u,d,p,g,f,m;return l().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,s=window.game,r=s.player,o=s.profile,c=s.globalScene,h=s.lang,t&&c.screen.open(za.o4.NOTIFY_SCREEN,{message:h.Text.LOADING,loading:!0}),jl({matchId:e}),a({type:Ln,payload:{matchId:e}}),n.next=7,Ll(e);case 7:if(u=n.sent,Xl({match:u}),d=u.status,p=u.whitePlayerId,g=u.blackPlayerId,d!==Vn){n.next=16;break}return f=r.getPlayerId(),m=f===p?g:p,n.next=16,o.requestProfiles([m]);case 16:a(lh(u)),n.next=25;break;case 19:if(n.prev=19,n.t0=n.catch(0),a(lh(null)),!(n.t0 instanceof xl)){n.next=24;break}return n.abrupt("return");case 24:(0,i.tO)(n.t0);case 25:case"end":return n.stop()}}),n,null,[[0,19]])})));return function(e){return n.apply(this,arguments)}}()},oh=function(e,t){return function(){var n=(0,r.Z)(l().mark((function n(a){var s,r,o,c,h,u,d,p,g,f,m;return l().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,s=window.game,r=s.player,o=s.globalScene,c=s.lang,o.screen.open(za.o4.NOTIFY_SCREEN,{message:c.Text.LOADING,loading:!0}),jl({matchId:e}),a({type:Nn,payload:{matchId:e,opponentInfo:t}}),n.next=7,Dl(e);case 7:h=n.sent,Xl({match:h}),u=h.whitePlayerId,d=h.whitePlayerScore,p=h.blackPlayerScore,g=r.getPlayerId(),f=r.getPlayerData(),m=f.score,a(lh(h,{score:g===u?d:p,bestScore:m})),n.next=23;break;case 17:if(n.prev=17,n.t0=n.catch(0),a(lh(null)),!(n.t0 instanceof xl)){n.next=22;break}return n.abrupt("return");case 22:(0,i.tO)(n.t0);case 23:case"end":return n.stop()}}),n,null,[[0,17]])})));return function(e){return n.apply(this,arguments)}}()},ch=function(e,t,n){return function(){var a=(0,r.Z)(l().mark((function a(s){var r,o,c,h,u;return l().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,r=window.game,o=r.globalScene,c=r.lang,o.screen.open(za.o4.NOTIFY_SCREEN,{message:c.Text.LOADING,loading:!0}),jl({matchId:e}),s({type:Mn,payload:{matchId:e,score:t,extraData:n}}),h=n.level,a.next=8,Ml(e,t,h,n);case 8:return u=a.sent,Xl({match:u}),a.next=12,s(lh(u));case 12:a.next=20;break;case 14:if(a.prev=14,a.t0=a.catch(0),s(lh(null)),!(a.t0 instanceof xl)){a.next=19;break}return a.abrupt("return");case 19:(0,i.tO)(a.t0);case 20:case"end":return a.stop()}}),a,null,[[0,14]])})));return function(e){return a.apply(this,arguments)}}()},lh=function(e,t,n){return void 0===n&&(n=null),{type:Bn,payload:{match:e,opponentInfo:t,current:n}}},hh=function(e){return{type:Fn,payload:{opponentInfo:e}}},uh=function(e,t){return{type:Zn,payload:{matchId:e,players:t}}},dh=function(){return function(){var e=(0,r.Z)(l().mark((function e(t){var n,i,a,r,o,c,h,u,d,p;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=window.game.player,i=n.getPlayer(),a=i.playerId,e.prev=2,t({type:Tn,payload:{}}),e.next=6,window.FBInstant.player.getDataAsync(["level"]);case 6:r=e.sent,o=r.level,c=Rl(Jl.JourneyMatchStore+"-"+a)||{},h=c.data,u=c.level,c.data=Ql(h),o!==u&&(c.data={}),d=o||1,p=(0,s.Z)({},c,{level:d,playerId:a}),t({type:Pn,payload:{match:p}}),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(2);case 20:case"end":return e.stop()}}),e,null,[[2,17]])})));return function(t){return e.apply(this,arguments)}}()},ph=function(){return function(){var e=(0,r.Z)(l().mark((function e(t){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t({type:xn,payload:{}});case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},gh=function(e){return{type:_n,payload:{level:e}}},fh=function(e){return{type:En,payload:{playerId:e}}},mh=function(e,t){return{type:Sn,payload:{playerId:e,stats:t}}},vh=function(e){return{type:An,payload:{stats:e}}},Eh=GameCore.Configs.Match,Sh=[],Ah=function(e){var t=e.contextId;if(""===t||"string"!==typeof t)throw new gc(null,{contextId:t})},yh=null,Th=function(e){clearTimeout(yh),yh=setTimeout((function(){window.game.globalScene.screen.close(za.o4.NOTIFY_SCREEN)}),e)},Ih=function(){return{type:un,payload:{}}},Ch=function(e){return{type:vn,payload:{stateShowMiniJourney:e}}},bh=function(){return function(e){try{e(ah()),e(Dh(Ea))}catch(t){(0,i.tO)(t)}}},Oh=function(){return function(e){try{e(ah()),e(Dh(fa))}catch(t){(0,i.tO)(t)}}},Ph=function(){return function(e){try{e(Mh())}catch(t){(0,i.tO)(t)}}},Rh=function(e,t){return void 0===e&&(e="10"),void 0===t&&(t=!1),function(n){try{n(wh("reset",e,t))}catch(a){(0,i.tO)(a)}}},wh=function(e,t,n){return void 0===t&&(t="10"),void 0===n&&(n=!1),function(){var a=(0,r.Z)(l().mark((function a(s){var r,o,c,h,u,d,p,g,f,m,v,E,S,A,y,T,I,C;return l().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(a.prev=0,r=window.game,o=r.player,c=r.facebook,h=r.globalScene,u=r.lang,h.screen.open(za.o4.NOTIFY_SCREEN,{message:u.Text.LOADING,loading:!0}),d=e,p=c.contextType,t||(g=GameCore.Configs.PlayerIdMock,f=GameCore.Configs.PlayerIdMock2,t=o.getPlayerId()===g?f:g),e){a.next=27;break}return a.next=9,c.chooseAsync();case 9:if(!1!==(d=a.sent)){a.next=13;break}return n&&h.events.emit(Pa.K5.SWITCH,Pa.Co.DASHBOARD_SCENE),a.abrupt("return");case 13:if(a.prev=13,"getTournamentAsync"in c){a.next=16;break}throw new Error("Unavailable feature: tournament");case 16:return a.next=18,c.getTournamentAsync();case 18:return a.next=20,s(bh());case 20:return a.abrupt("return");case 23:a.prev=23,a.t0=a.catch(13);case 25:a.next=37;break;case 27:if(!t||t===ga.playerId){a.next=35;break}return a.next=30,c.createAsync(t);case 30:if(!1!==(d=a.sent)){a.next=34;break}return n&&h.events.emit(Pa.K5.SWITCH,Pa.Co.DASHBOARD_SCENE),a.abrupt("return");case 34:d||"reset"===e||(d=e);case 35:p=c.contextType,s(Ta(d,p));case 37:return Ah({contextId:d}),m=o.getPlayerId(),v=o.getConnectedPlayers(),a.next=42,c.getContextPlayers(m);case 42:return E=a.sent,t!==(S=ga).playerId&&v[t]?S=v[t]:1===E.length&&(S=E[0]),s(fh()),y=(A=S).playerId,T=A.name,I=A.photo,C={playerId:y,name:T,photo:I},a.next=50,s(Dh(ma,C));case 50:s(Ta(d,p)),Vc.emit(vo.START_GAME),a.next=63;break;case 54:if(a.prev=54,a.t1=a.catch(0),!(a.t1 instanceof gc)){a.next=58;break}return a.abrupt("return");case 58:if("USER_INPUT"!==(null==a.t1?void 0:a.t1.code)){a.next=60;break}return a.abrupt("return");case 60:if("INVALID_OPERATION"!==(null==a.t1?void 0:a.t1.code)){a.next=62;break}return a.abrupt("return");case 62:(0,i.tO)(a.t1);case 63:return a.prev=63,Th(1e3),a.finish(63);case 66:case"end":return a.stop()}}),a,null,[[0,54,63,66],[13,23]])})));return function(e){return a.apply(this,arguments)}}()},xh=function(e){var t=window.game.player.getConnectedPlayerIds(20,0);if(!e||0===e.length)return t;for(var n=[],i=0;i<t.length;i++)la()(e).call(e,t[i])||n.push(t[i]);return n},kh=function(){return function(){var e=(0,r.Z)(l().mark((function e(t){var n,a,s,r,o,c,h,u,d,p,g,f,m,v,E,S,A;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,n=window.game,a=n.player,s=n.facebook,r=n.globalScene,o=n.lang,r.screen.open(za.o4.NOTIFY_SCREEN,{message:o.Text.LOADING,loading:!0}),c=xh(Sh),h="",u="",d=s.contextType,c.length>0&&(p=Phaser.Math.RND.between(0,c.length-1),h=c[p],Sh.push(h)),!h||"string"!==typeof h){e.next=13;break}return e.next=12,s.createAsync(h);case 12:u=e.sent;case 13:return Ah({contextId:u}),g=a.getPlayerId(),e.next=17,s.getContextPlayers(g);case 17:return f=e.sent,m=ga,h||1!==f.length||(m=f[0]||ga),t(fh()),E=(v=m).name,S=v.photo,A={playerId:h,name:E,photo:S},e.next=25,t(Dh(ma,A));case 25:t(Ta(u,d)),e.next=35;break;case 28:if(e.prev=28,e.t0=e.catch(0),!(e.t0 instanceof gc)){e.next=34;break}return t(Bh({mode:fa,status:Yn})),t(Oh()),e.abrupt("return");case 34:(0,i.tO)(e.t0);case 35:return e.prev=35,Th(1e3),e.finish(35);case 38:case"end":return e.stop()}}),e,null,[[0,28,35,38]])})));return function(t){return e.apply(this,arguments)}}()},_h=function(e,t){return function(){var n=(0,r.Z)(l().mark((function n(a,s){var r,o,c,h,u,d,p,g,f,m,v,E,S,A,y,T;return l().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,r=window.game,o=r.player,c=r.profile,h=r.facebook,u=r.globalScene,d=r.lang,u.screen.open(za.o4.NOTIFY_SCREEN,{message:d.Text.LOADING,loading:!0}),p=s(),g=o.getPlayerId(p),!((f=o.getConnectedPlayers(p)).length>0)||f[t]){n.next=9;break}return u.events.emit(Pa.K5.SWITCH,Pa.Co.DASHBOARD_SCENE),n.abrupt("return");case 9:return m=ga,n.next=12,h.getContextPlayers(g);case 12:if(v=n.sent,t===g||t===m.playerId||!f[t]){n.next=17;break}m=f[t],n.next=25;break;case 17:if(1!==v.length){n.next=21;break}m=v[0],n.next=25;break;case 21:return n.next=23,c.requestProfiles([t]);case 23:(E=c.getProfiles())[t]&&(m=E[t]);case 25:return n.next=27,a(oh(e,m));case 27:if(p=s(),tl(p,{playerId:g})!==ga.playerId){n.next=32;break}return n.next=32,a(rh(e));case 32:if(p=s(),tl(p,{playerId:g})===g||!f[t]){n.next=37;break}return a(Rh(t,!0)),n.abrupt("return");case 37:if(Qc(p)===e){n.next=41;break}return u.events.emit(Pa.K5.SWITCH,Pa.Co.DASHBOARD_SCENE),n.abrupt("return");case 41:if(S=$c(p),A=nl(p,{playerId:g}),a(Bh({mode:ma,status:S})),y=h.getContextID(),T=h.contextType,a(Ta(y,T)),!A){n.next=52;break}return n.next=50,o.requestConnectedPlayers();case 50:return u.events.emit(Pa.K5.SWITCH,Pa.Co.GAME_SCENE),n.abrupt("return");case 52:u.events.emit(Pa.K5.SWITCH,Pa.Co.GAME_SCENE),n.next=58;break;case 55:n.prev=55,n.t0=n.catch(0),(0,i.tO)(n.t0);case 58:return n.prev=58,Th(1e3),n.finish(58);case 61:case"end":return n.stop()}}),n,null,[[0,55,58,61]])})));return function(e,t){return n.apply(this,arguments)}}()},Lh=function(e){return function(t){try{var n=window.game.player,a=n.getPlayerId();Zo(a,e).catch((function(e){(0,i.tO)(new Error(e))}));var s=n.getPlayerData(),r=s.score,o=void 0===r?0:r,c=s.level;o<e&&n.setBestScore(e);var l={score:e,level:c};t(mh(a,l)),t(vh(l))}catch(h){if(h instanceof mc)return;(0,i.tO)(h)}}},Dh=function(e,t){return void 0===t&&(t=null),function(){var n=(0,r.Z)(l().mark((function n(a,s){var o,c,h,u,d,p,g,f,m,v,E,S,A,y,T,I,C,b,O,P,R,w;return l().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,c=window.game,h=c.player,u=c.analytics,d=c.facebook,p=c.globalScene,g=d.getContextID(),f=0,m=s(),u.event(Ot._.MATCH_START,{game_mode:GameCore.Utils.String.toUpperCamelCase(e),level:1,level_name:"level_1"}),a(Ih()),!la()(o=[fa,Ea]).call(o,e)){n.next=16;break}return n.next=10,a((function(e){try{var t=window.game.player;e({type:Tn,payload:{}});var n=t.getPlayerId(),a=Rl(Jl.SingleMatchStore)||{},s=a.data;a.data=Ql(s),zl({playerId:n,match:a}),e(nh(a))}catch(r){if(e(nh(null)),r instanceof xl)return;if(r instanceof oa)return;if(r instanceof Nl)return;(0,i.tO)(r)}}));case 10:if(m=s(),Xc(m)){n.next=15;break}return n.next=15,a($l());case 15:f=Jc(m);case 16:if(e===va&&a(hh(t)),e!==ma){n.next=26;break}return n.next=20,a(sh(t));case 20:m=s(),v=Qc(m),E=el(m),S=E.playerId,g||(g=window.game.facebook.getContextID()),A=Zc(m,{opponentId:S}),g&&S&&!A&&a(Pl(S,{contextId:g,matchId:v}));case 26:"online"===e&&a(function(){var e=(0,r.Z)(l().mark((function e(t){var n,i,a,s,r,o,c,h;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=window.game.player,s=a.getPlayer(),r=s.playerId,o=s.name,c=s.photo,t({type:Hn,payload:{playerId:r}}),h={},Te()(n=Ha()(i=new Array(20)).call(i,null)).call(n,(function(e,t){var n="0"+(t+1);h[n]={playerId:n,name:"MPlayer "+n,photo:"./assets/images/others/avatar.png"}})),h[r]={playerId:r,name:o,photo:c},t(uh("mock",h));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),m=s(),y=h.getPlayerData(m),T=y.score,I=void 0===T?0:T,C=jc(m),b=C.rescued,O=void 0===b?0:b,a(vh({score:f,bestScore:I})),a({type:dn,payload:{mode:e,contextId:g,rescued:O}}),a(Ia(e)),p.events.emit(Pa.K5.SWITCH,Pa.Co.GAME_SCENE),n.next=44;break;case 37:if(n.prev=37,n.t0=n.catch(0),!(n.t0 instanceof xl)){n.next=43;break}return P=window.game,R=P.globalScene,w=P.lang,R.screen.open(za.o4.NOTIFY_SCREEN,{message:w.Text.NO_REWARDS+"\n"+w.Text.CANCELLED_AD,duration:2500,loading:!1}),n.abrupt("return");case 43:(0,i.tO)(n.t0);case 44:return n.prev=44,Th(0),n.finish(44);case 47:case"end":return n.stop()}}),n,null,[[0,37,44,47]])})));return function(e,t){return n.apply(this,arguments)}}()},Mh=function(){return function(){var e=(0,r.Z)(l().mark((function e(t,n){var a,o,c,h,u,d,p;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,a=window.game,o=a.analytics,c=a.facebook,h=a.globalScene,u=c.getContextID(),d=n(),p=ol(d)||1,o.event(Ot._.MATCH_START,{game_mode:GameCore.Utils.String.toUpperCamelCase(Sa),level:p}),t(Ih()),d=n(),rl(d)){e.next=12;break}return e.next=12,t(function(){var e=(0,r.Z)(l().mark((function e(t,n){var a,r,o,c,h,u,d,p,g;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.prev=0,a=window.game,r=a.player,o=a.globalScene,c=a.lang,o.screen.open(za.o4.NOTIFY_SCREEN,{message:c.Text.LOADING,loading:!0}),t({type:On,payload:{}}),h=n(),u=ol(h)||1,d=cl(h),p=r.getPlayerId(),g=(0,s.Z)({},Jl.LocalSingleMatchDefault,{level:u,status:"active",playerId:p,challengeMode:d,startedAt:Date.now(),updateAt:Date.now()}),zl({playerId:p,match:g}),t(ih(g)),wl(Jl.JourneyMatchStore+"-"+p,g),e.next=22;break;case 14:if(e.prev=14,e.t0=e.catch(0),t(ih(null)),!(e.t0 instanceof xl)){e.next=19;break}return e.abrupt("return");case 19:if(!(e.t0 instanceof Nl)){e.next=21;break}return e.abrupt("return");case 21:(0,i.tO)(e.t0);case 22:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(t,n){return e.apply(this,arguments)}}());case 12:t({type:dn,payload:{mode:Sa,contextId:u}}),h.events.emit(Pa.K5.SWITCH,Pa.Co.JOURNEY_SCENE),e.next=23;break;case 16:if(e.prev=16,e.t0=e.catch(0),!(e.t0 instanceof xl)){e.next=22;break}return window.game.globalScene.screen.open(za.o4.NOTIFY_SCREEN,{message:"Sorry!, you can now\ncreate this match!",duration:2500,loading:!1}),e.abrupt("return");case 22:(0,i.tO)(e.t0);case 23:return e.prev=23,Th(0),e.finish(23);case 26:case"end":return e.stop()}}),e,null,[[0,16,23,26]])})));return function(t,n){return e.apply(this,arguments)}}()},Nh=function(e,t){return function(){var n=(0,r.Z)(l().mark((function n(i,a){var s,r,o,c,h,u,d,p,g,f;return l().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(r=window.game.player,o=t.score,c=void 0===o?0:o,h=t.level,u=void 0===h?0:h,d=a(),!la()(s=[fa,Ea]).call(s,e)){n.next=7;break}return p=Xc(d),n.next=7,i(th(p));case 7:if(e===va&&(i({type:Un,payload:{}}),g=r.getPlayerId(),i(mh(g,t))),e!==ma){n.next=12;break}return f=Qc(d),n.next=12,i(ch(f,c,{level:u}));case 12:i({type:pn,payload:{mode:e}}),Vc.emit(vo.GAME_OVER);case 14:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}()},Bh=function(e){return function(t){var n=e.mode,a=e.status;t({type:gn,payload:{mode:n,status:a}}),(0,i.sw)("game-mode",n)}},Gh=function(){return function(e,t){var n=t(),i=Uc(n).level,a=void 0===i?0:i,s=Ec(n);window.game.analytics.event(Ot._.MATCH_RESCUE,{game_mode:GameCore.Utils.String.toUpperCamelCase(s),level:a,level_name:"level_"+a}),e({type:fn,payload:{}})}},Fh=Wa.Z.DEFAULT,Uh=Fh.KEY,Hh=Fh.FRAME,Zh=function(e){function t(t,n){var i;return(i=e.call(this,t)||this).buttonPlay=void 0,i.buttonShare=void 0,i.avatar=void 0,i.rankIcon=void 0,i.rankText=void 0,i.username=void 0,i.score=void 0,i.scoreText=void 0,i.background=void 0,i.scaleRankIcon=void 0,i.scaleRankText=void 0,i.scaleUsername=void 0,i.scaleScore=void 0,i.scaleScoreText=void 0,i.scaleBackground=void 0,i.showPopUp=void 0,i.showItems=void 0,i.payload=void 0,i.handleChallengeFriend=function(){var e=i.payload.playerId;i.scene.storage.dispatch(Rh(e))},i.handleShare=function(){i.scene.storage.dispatch(vl())},i.createBackground(),i.updateSize(),i.createAvatar(),i.createRank(),i.createUsername(),i.createScore(),i.createButtonShare(),i.createButtonPlay(),n&&i.updateInfo(n),i.scene.add.existing((0,Ba.Z)(i)),i}(0,o.Z)(t,e);var n=t.prototype;return n.updateInfo=function(e){this.payload=(0,s.Z)({scoreRight:!0,isHighlight:!1,useChallenge:!1,backgroundFrame:"",rank:-1},e),this.updateBackground(),this.updateAvatar(),this.updateRank(),this.updateUsername(),this.updateScore(),this.updateButton(),this.alignScoreAndButton(),this.getScaleElements()},n.createBackground=function(){this.background=this.scene.make.image({key:Uh,frame:Hh.LEADERBOARD_BG_ITEM}),this.background.setWorldSize(312,60),this.background.setVisible(!1),this.add(this.background)},n.updateBackground=function(){this.payload.backgroundFrame?(this.background.setVisible(!0),this.background.setFrame(this.payload.backgroundFrame||Hh.LEADERBOARD_BG_ITEM),this.background.setWorldSize(312,60)):this.background.setVisible(!1)},n.updateSize=function(){var e=this.background,t=e.width,n=e.height;this.setSize(t,n)},n.createAvatar=function(){this.avatar=new dc(this.scene,{key:Uh,frame:Hh.AVATAR_BORDER,background:Hh.AVATAR_BACKGROUND,width:40,height:40,radius:30,borderWidth:5}),this.add(this.avatar),Phaser.Display.Align.In.LeftCenter(this.avatar,this,-40)},n.updateAvatar=function(){var e=this.payload,t=e.playerId,n=e.photo;this.avatar.loadPhoto(t,n)},n.createRank=function(){this.createRankIcon(1),this.createRankText(1)},n.updateRank=function(){var e=this.payload.rank;if(e<0)return this.rankIcon.setVisible(!1),this.rankText.setVisible(!0),void this.rankText.setText("99+");this.updateRankIcon(e),this.updateRankText(e)},n.getRankIconFrame=function(e){var t=Hh.ICON_CUP_GOLD;switch(e){case 1:t=Hh.ICON_CUP_GOLD;break;case 2:t=Hh.ICON_CUP_SILVER;break;case 3:t=Hh.ICON_CUP_COPPER}return t},n.createRankIcon=function(e){var t=this.getRankIconFrame(e);this.rankIcon=this.scene.make.image({key:Uh,frame:t}),this.rankIcon.setWorldSize(28,24),this.add(this.rankIcon),Phaser.Display.Align.In.LeftCenter(this.rankIcon,this.background,-6)},n.updateRankIcon=function(e){if(e>3)this.rankIcon.setVisible(!1);else{this.rankIcon.setVisible(!0);var t=this.getRankIconFrame(e);this.rankIcon.setWorldSize(28,24),this.rankIcon.setFrame(t)}},n.createRankText=function(e){this.rankText=this.scene.make.bitmapText({font:Xa.Z.NUMBER_LIGHT.KEY,size:this.scene.fontSize(32),text:""+e,origin:{x:.5,y:.5}}),this.add(this.rankText),Phaser.Display.Align.In.Center(this.rankText,this.rankIcon,0,1)},n.updateRankText=function(e){e<=3?this.rankText.setVisible(!1):(this.rankText.setVisible(!0),this.rankText.setText(""+e),this.rankText.setFont(Xa.Z.NUMBER_DARK.KEY))},n.updateRankUndefined=function(){this.rankIcon.setVisible(!1),this.rankText.setVisible(!0),this.rankText.setText("?"),this.payload.isHighlight?this.rankText.setFont(Xa.Z.NUMBER_LIGHT.KEY):this.rankText.setFont(Xa.Z.NUMBER_DARK.KEY)},n.getShortName=function(e){return e.length>15?e.substring(0,12)+"...":e},n.createUsername=function(){this.username=this.scene.make.text({text:this.getShortName("FRIEND NAME"),style:{fontFamily:Xa.Z.FONT_FAMILY_ARIAL,fontSize:this.scene.fontSize(40)+"px",fontStyle:"700"}}),this.username.setTint(7485207),this.username.setHighQuality(),Phaser.Display.Align.To.RightCenter(this.username,this.avatar,10,0),this.add(this.username)},n.updateUsername=function(){var e=this.payload.name,t=this.scene.game.lang,n="Anonymous"!=e?e:t.Text.Anonymous;this.username.setText(this.getShortName(n)),this.username.setTint(7551258)},n.createScore=function(){this.score=this.scene.add.container(),this.scoreText=this.scene.make.bitmapText({font:Xa.Z.NUMBER_LIGHT.KEY,size:this.scene.fontSize(26),text:"132500",origin:{x:.5,y:.5}}),this.score.add([this.scoreText]),this.add(this.score),Phaser.Display.Align.In.Center(this.score,this.avatar,160,0)},n.updateScore=function(){var e=this.payload.score;this.scoreText.setText(e),this.scoreText.setTint(7551258)},n.createButtonPlay=function(){this.buttonPlay=new ja.Z(this.scene,Uh,Hh.BUTTON_CHALLENGE_LIGHT,54,39),this.buttonPlay.setName("ChallengeFriend"),Phaser.Display.Align.In.RightCenter(this.buttonPlay,this,-15,2),this.buttonPlay.onClick=this.handleChallengeFriend,this.add(this.buttonPlay)},n.createButtonShare=function(){this.buttonShare=new ja.Z(this.scene,Uh,Hh.BUTTON_SHARE_DARK,54,39),this.buttonShare.setName("Share"),Phaser.Display.Align.In.RightCenter(this.buttonShare,this,-15,2),this.buttonShare.onClick=this.handleShare,this.add(this.buttonShare)},n.updateButton=function(){var e=this.payload,t=e.isHighlight;if(!e.useChallenge)return this.buttonShare.setVisible(!1),void this.buttonPlay.setVisible(!1);t?(this.buttonShare.setVisible(!0),this.buttonPlay.setVisible(!1)):(this.buttonShare.setVisible(!1),this.buttonPlay.setVisible(!0))},n.alignScoreAndButton=function(){this.payload.useChallenge?Phaser.Display.Align.In.Center(this.score,this.avatar,150,0):Phaser.Display.Align.In.Center(this.score,this.avatar,200,0)},n.runShowPopUpAnimation=function(e,t){this.scene.tweens.killTweensOf(this),this.showPopUp=new lc({targets:[this],delay:e,duration:t,props:{y:{start:this.y+70,to:this.y}}}),this.showPopUp.play()},n.runShowItemAnimation=function(e,t){var n=this.getAll();this.rankIcon.setScale(this.scaleRankIcon),this.rankText.setScale(this.scaleRankText),this.score.setScale(this.scaleScore),this.scoreText.setScale(this.scaleScoreText),this.username.setScale(this.scaleUsername),this.background.setScale(this.scaleBackground),this.scene.tweens.killTweensOf(n),this.showItems=new rc({targets:n,duration:t,delay:this.scene.tweens.stagger(50,{start:e+50}),props:{scale:{duration:1e3,getStart:function(e){return.8*e.scale},getEnd:function(e){return e.scale},ease:Phaser.Math.Easing.Elastic.Out,easeParams:[.1,.45]}}}),this.showItems.play()},n.runShowUpAnimation=function(e,t){void 0===e&&(e=0),void 0===t&&(t=300);var n=100*e;this.runShowPopUpAnimation(n,t),this.runShowItemAnimation(n,t)},n.setFrameBackground=function(e){this.background.setFrame(e)},n.setUserNameLight=function(){this.username.setTint(16640200)},n.setRankLight=function(){this.rankText.setFont(Xa.Z.NUMBER_LIGHT.KEY)},n.setScoreLight=function(){this.scoreText.setTint(16640200)},n.getScaleElements=function(){this.scaleRankIcon=this.rankIcon.scale,this.scaleRankText=this.rankText.scale,this.scaleScore=this.score.scale,this.scaleScoreText=this.scoreText.scale,this.scaleUsername=this.username.scale,this.scaleBackground=this.background.scale},t}(Phaser.GameObjects.Container),Yh=Zh,Vh=Wa.Z.DEFAULT.FRAME,Wh=function(e){function t(t){var n;return(n=e.call(this,t)||this).myScoreBlock=void 0,n.scene=t,n.setName("FooterBar"),n.createMyScoreBlock(),n.scene.add.existing((0,Ba.Z)(n)),n}(0,o.Z)(t,e);var n=t.prototype;return n.createMyScoreBlock=function(){this.myScoreBlock=new Yh(this.scene),this.myScoreBlock.setFrameBackground(Vh.LEADERBOARD_BG_ITEM),this.myScoreBlock.setVisible(!1),this.add(this.myScoreBlock),Phaser.Display.Align.In.Center(this.myScoreBlock,this)},n.updateMyScoreBlock=function(e){this.myScoreBlock.setVisible(!0),this.myScoreBlock.updateInfo(e),this.myScoreBlock.setRankLight(),this.myScoreBlock.setScoreLight(),this.myScoreBlock.setUserNameLight(),this.myScoreBlock.runShowUpAnimation(0,1e3)},t}(Phaser.GameObjects.Container),zh=Wh,Kh=n(626),jh=n(625),Xh=(function(e){function t(t){var n;return(n=e.call(this,t,"UpdateAbleObject")||this).updateInfo=void 0,n}(0,o.Z)(t,e)}(Phaser.GameObjects.GameObject),function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).classType=void 0,i.listConfigs=void 0,i.padding=void 0,i.startObjectIndex=void 0,i.endObjectIndex=void 0,i.listObjects=void 0,i.classType=n.classType,i.listConfigs=n.listConfigs,i.padding=n.padding?n.padding:0,i.objects.classType=i.classType,i.updateConfig(i.listConfigs),i}(0,o.Z)(t,e);var n=t.prototype;return n.reset=function(){e.prototype.reset.call(this),this.killAndHideAll()},n.getChildren=function(){var e;return Ae()(e=this.listObjects).call(e,(function(e){return void 0!=e&&e.active}))},n.updateConfig=function(e){var t;this.reset(),this.listConfigs=e,this.listObjects=Ha()(t=new Array(e.length)).call(t,void 0),this.addObjectIndex(0,0);var n=this.getEndObjectIndex();this.addObjectIndex(1,n),this.startObjectIndex=this.getStartObjectIndex(),this.endObjectIndex=this.getEndObjectIndex(),this.updateMaxHeight(),this.value=this.marginTop},n.killAndHideAll=function(){var e,t=this;this.listObjects instanceof Array&&(Te()(e=this.listObjects).call(e,(function(e){void 0!==e&&t.objects.killAndHide(e)})),this.objects.getChildren().forEach((function(e){return t.objects.killAndHide(e)})))},n.setItemPosition=function(e,t){var n=e.height;e.setPosition(0,n/2+(n+this.padding)*t-this.height/2)},n.updateMaxHeight=function(){return this.maxHeight=Math.max(this.listConfigs.length*(this.objHeight+this.padding)-this.padding+this.marginBottom-this.height,0)},n.updateObject=function(e){this.objects.incY(e);var t=this.getStartObjectIndex(),n=this.getEndObjectIndex();t!=this.startObjectIndex&&(t>this.startObjectIndex?this.killObjectIndex(this.startObjectIndex,t-1):this.addObjectIndex(t,this.startObjectIndex-1),this.startObjectIndex=t),n!=this.endObjectIndex&&(n<this.endObjectIndex?this.killObjectIndex(n+1,this.endObjectIndex):this.addObjectIndex(this.endObjectIndex+1,n),this.endObjectIndex=n)},n.killObjectIndex=function(e,t){for(var n=e;n<=t;n++){var i=this.listObjects[n];i&&(this.objects.killAndHide(i),this.listObjects[n]=void 0)}},n.addObjectIndex=function(e,t){for(var n=e;n<=t;n++){var i=this.padding,a=this.listConfigs;if(n>=a.length)return;var s=this.objects.getFirstDead(!0),r=s.height,o=r/2+(r+i)*n+this.value-this.height/2;s.updateInfo(a[n]),s.setPosition(0,o),s.setActive(!0),s.setVisible(!0),this.addAt(s),this.listObjects[n]=s}},n.getStartObjectIndex=function(){var e=this.objHeight,t=this.padding;return Math.max(Math.floor((0-this.value)/(e+t)),0)},n.getEndObjectIndex=function(){var e=this.objHeight,t=this.padding,n=this.listConfigs,i=e+t;return Math.min(Math.floor((this.height-this.value)/i),n.length)},(0,ae.Z)(t,[{key:"objHeight",get:function(){var e=this.objects.getChildren();return 0==e.length?this.maxHeight=0:e[0].height}}]),t}(jh.Z));function Jh(e,t){var n="undefined"!==typeof E()&&A()(e)||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){var n;if(!e)return;if("string"===typeof e)return qh(e,t);var i=g()(n=Object.prototype.toString.call(e)).call(n,8,-1);"Object"===i&&e.constructor&&(i=e.constructor.name);if("Map"===i||"Set"===i)return m()(e);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return qh(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var i=0;return function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function qh(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}for(var Qh=Wa.Z.DEFAULT.FRAME,$h=function(e){function t(t){var n;(n=e.call(this,t)||this).scene=void 0,n.currentPlayerId=void 0,n.scroller=void 0,n.scene=t;var i=n.scene.player;return n.currentPlayerId=i.getPlayerId(),n.createReuseScroller(),n.scene.add.existing((0,Ba.Z)(n)),n}(0,o.Z)(t,e);var n=t.prototype;return n.createReuseScroller=function(){this.scroller=new Xh(this.scene,{classType:Yh,listConfigs:[],width:310,height:335,padding:0,marginTop:0,marginBottom:0,maxScrollOver:.3,scrollingBackRate:5,useMask:!0}),this.scene.renderer instanceof Phaser.Renderer.WebGL.WebGLRenderer&&this.scroller.createBound(Wa.Z.DEFAULT.KEY,Wa.Z.DEFAULT.FRAME.BLANK,40,16643027),this.scene.world.isLandscape()?this.scroller.createMask(.85):this.scroller.createMask(),this.scroller.setPosition(0,-10),this.add(this.scroller)},n.updateData=function(e,t){var n=ii()(e)||[];if(!(n.length<1)){for(var i,a=[],s=0,r=Jh(si()(n).call(n,(function(e,t){return+t.score-+e.score})));!(i=r()).done;){var o=i.value,c=o.playerId,l=o.photo,h=o.score,u=o.name,d=o.rank;if(c){var p={playerId:c,photo:l,name:u,rank:d,score:h,scoreRight:t===Ao,useChallenge:t===yo,isHighlight:!1,backgroundFrame:""+Qh.PREFIX_LEADERBOARD_BG_ITEM+s};a.push(p),++s>=2&&(s=0)}}this.scroller.updateConfig(a),this.showLeaders()}},n.removeLeaders=function(){this.scroller.updateConfig([])},n.getLeaders=function(){return this.scroller.getChildren()},n.showLeaders=function(){var e=this,t=this.getLeaders();if(this.scroller.setEnable(!1),!(t.length<1)){for(var n=Math.min(t.length,6),i=0;i<n;i++){var a=t[i];a&&(a.setVisible(!0),a.runShowUpAnimation(i,300))}var s=300+100*n+250;this.scene.time.delayedCall(s,(function(){e.scroller.setEnable(!0)}))}},t}(Phaser.GameObjects.Container),eu=$h,tu=Wa.Z.DEFAULT,nu=tu.KEY,iu=tu.FRAME,au=function(e){function t(t){var n;return(n=e.call(this,t)||this).leaders=void 0,n.loading=void 0,n.message=void 0,n.textMessage=void 0,n.messageAnimation=void 0,n.setSize(310,430),n.createLoading(),n.createMessage(),n.createText(),n.createContents(),n.createAnimation(),n.scene.add.existing((0,Ba.Z)(n)),n}(0,o.Z)(t,e);var n=t.prototype;return n.showLoading=function(e){this.loading.setVisible(e),this.showMessage(!1)},n.showMessage=function(e,t){this.message.setVisible(e),t&&(this.message.setText(t),this.textMessage.setText(t),this.messageAnimation.play()),"ar"==this.scene.facebook.getLocale()&&(this.textMessage.setVisible(!0),this.message.setVisible(!1))},n.createLoading=function(){this.loading=new hc.Z(this.scene),this.loading.setVisible(!1),this.add(this.loading)},n.createMessage=function(){this.message=this.scene.make.bitmapText({font:Xa.Z.PRIMARY.KEY,size:this.scene.fontSize(40),origin:{x:.5,y:.5}}),this.message.setTint(10317116),this.add(this.message),Phaser.Display.Align.In.Center(this.message,this)},n.createText=function(){this.textMessage=this.scene.make.text({style:{fontFamily:Xa.Z.FONT_FAMILY,fontSize:this.scene.fontSize(40)+"px"},origin:{x:.5,y:.5}}),this.textMessage.setTint(7551258).setHighQuality(),this.textMessage.setVisible(!1),this.add(this.textMessage),Phaser.Display.Align.In.Center(this.textMessage,this)},n.createContents=function(){this.createLeaders(),this.createContentBackground()},n.createLeaders=function(){this.leaders=new eu(this.scene),this.add(this.leaders),Phaser.Display.Align.In.Center(this.leaders,this,0,0)},n.createContentBackground=function(){var e=this.scene.make.container({}),t=this.scene.make.image({key:nu,frame:iu.LEADERBOARD_BG_BOTTOM});t.setFlipY(!0),t.setWorldSize(315,22);var n=this.scene.make.image({key:nu,frame:iu.LEADERBOARD_BG_MIDDLE});n.setWorldSize(315,300);var i=this.scene.make.image({key:nu,frame:iu.LEADERBOARD_BG_BOTTOM});i.setWorldSize(315,22),e.add(t),e.add(n),e.add(i),Phaser.Display.Align.In.Center(n,e),Phaser.Display.Align.In.Center(t,n,0,-n.displayHeight/2-t.displayHeight/2),Phaser.Display.Align.In.Center(i,n,0,n.displayHeight/2+i.displayHeight/2),this.add(e),Phaser.Display.Align.In.Center(e,this,0,-10)},n.createAnimation=function(){this.messageAnimation=new Kh.Z({targets:[this.message],duration:60,repeat:2})},t}(Phaser.GameObjects.Container),su=au,ru=GameCore.Configs.LeadersBoard,ou=Wa.Z.DEFAULT,cu=ou.KEY,lu=ou.FRAME,hu=function(e){function t(t,n,a,s){var r;return(r=e.call(this,t,n,a,s)||this).popup=void 0,r.popupShowUpAnimation=void 0,r.popupFadeOutAnimation=void 0,r.popupFadeInMaskAnimation=void 0,r.popupFadeOutMaskAnimation=void 0,r.board=void 0,r.footerBar=void 0,r.isRequesting=void 0,r.isSwitchable=void 0,r.tabId=void 0,r.offset=void 0,r.isStateChanged=void 0,r.open=function(t){e.prototype.open.call((0,Ba.Z)(r),t),r.setVisible(!0),r.selectWorldTab(),r.runOpenAnimation(),r.board.showLoading(!0);var n=[{selector:nc,callback:function(e){if(r.isRequesting=e,r.board.showLoading(e),r.isSwitchable=!1,!1===e){if(!r.scene)return;if(!r.visible||!r.scene.scene.isActive)return;var t=r.scene.game.storage.getState(),n=tc(t);r.scene.time.delayedCall(1050,(function(){r.isSwitchable=!0})),n&&0!==q()(n).length?r.board.leaders.updateData(n,r.tabId):r.board.showMessage(!0,r.scene.lang.Text.LEADERBOARD_EMPTY),r.updatePlayerEntryAsync().catch(i.tO)}}}];r.handleStateChange(n)},r.handleSelectFriendTab=function(){r.isRequesting||r.isSwitchable&&r.selectFriendTab()},r.handleSelectWorldTab=function(){r.isRequesting||r.isSwitchable&&r.selectWorldTab()},r.clickClose=function(){r.runCloseAnimation()},r.setVisible(!1),r.createPopup(),r.createTitle(),r.createBoard(),r.createFooterBar(),r.setDepth(za.Ks.POPUP),r.background.setAlpha(.5),r.scene.world.isLandscape()&&r.popup.setScale(r.popup.scale-.15),r}(0,o.Z)(t,e);var n=t.prototype;return n.handleStateChange=function(e){var t=this;this.isStateChanged||(e.forEach((function(e){var n=e.selector,i=e.callback;t.scene.storage.watch(n,i)})),this.isStateChanged=!0)},n.createPopup=function(){this.popup=new as.Z(this.scene,0,0,340,510,{forceHeightTop:60}),this.add(this.popup),Phaser.Display.Align.In.Center(this.popup,this.zone,0,0)},n.createTitle=function(){var e=this.scene.add.container(),t=this.scene.world.getPixelRatio(),n=this.scene.make.image({key:cu,frame:lu.TEXT_LEADER_BOARD}),i=n.width,a=n.height;n.setWorldSize(i/t,a/t);var s=new ja.Z(this.scene,cu,lu.BUTTON_CLOSE,35,35);s.setName("Close"),s.onClick=this.clickClose,e.add([n,s]),Phaser.Display.Align.In.Center(n,e,0,9),Phaser.Display.Align.In.Center(s,e,160,-15),this.popup.add(e),Phaser.Display.Align.In.TopCenter(e,this.popup)},n.createBoard=function(){this.board=new su(this.scene),this.popup.add(this.board),Phaser.Display.Align.In.Center(this.board,this.popup,0,-25)},n.createFooterBar=function(){this.footerBar=new zh(this.scene),this.popup.add(this.footerBar),Phaser.Display.Align.In.Center(this.footerBar,this.popup,0,178)},n.selectFriendTab=function(){this.tabId=yo,this.offset=0,this.board.showLoading(!0),this.board.leaders.removeLeaders(),this.scene.storage.dispatch($o()),this.scene.storage.dispatch(qo(ru.LeaderboardId,yo,ru.Limit,this.offset))},n.selectWorldTab=function(){this.tabId=Ao,this.offset=0,this.board.showLoading(!0),this.board.leaders.removeLeaders(),this.footerBar.myScoreBlock.setVisible(!1),this.scene.storage.dispatch($o()),this.scene.storage.dispatch(qo(ru.LeaderboardId,Ao,ru.Limit,this.offset))},n.runCloseAnimation=function(){var e;null!=(e=this.popupFadeOutAnimation)&&null!=(e=e.tween)&&e.isPlaying()||(this.runPopupExitsAnimation(50,200),this.runFadeOutMaskAnimation(0,200))},n.runPopupExitsAnimation=function(e,t){var n,i=this;this.popupFadeOutAnimation||(this.popupFadeOutAnimation=new ts.Z({targets:[this.popup],delay:e,duration:t,props:{scale:0},onComplete:function(){i.popup.setY(0),i.board.showLoading(!1),i.close()}})),null==(n=this.popupFadeOutAnimation)||n.play()},n.runOpenAnimation=function(){this.scene.audio.playSound(Ka.Z.POPUP_SHOW),this.runPopupEntrancesAnimation(0,300),this.runFadeInMaskAnimation(100,300)},n.runPopupEntrancesAnimation=function(e,t){if(!this.popupShowUpAnimation){var n=this.popup.scale;this.popupShowUpAnimation=new is.Z({targets:[this.popup],delay:e,duration:t,props:{y:0,alpha:{start:1,from:1,to:1},scale:{start:0,from:0,to:n}}})}this.popupShowUpAnimation.play()},n.updatePlayerEntryAsync=function(){var e=(0,r.Z)(l().mark((function e(){var t,n,i,a;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.scene.player.getPlayerId(),n=this.scene.player.getPlayer(),i=null,e.prev=3,e.next=6,Fo(t);case 6:i=e.sent,e.next=12;break;case 9:e.prev=9,e.t0=e.catch(3),i=null;case 12:a={playerId:t,name:n.name,photo:n.photo,score:""+(n.data.score||0),rank:-1},i&&(a={playerId:t,name:n.name,photo:n.photo,score:""+i.getScore(),rank:i.getRank()}),this.footerBar.updateMyScoreBlock({playerId:a.playerId,rank:a.rank,photo:a.photo,name:a.name,score:a.score,backgroundFrame:lu.LEADERBOARD_BG_ITEM,isHighlight:!0});case 15:case"end":return e.stop()}}),e,this,[[3,9]])})));return function(){return e.apply(this,arguments)}}(),n.runFadeInMaskAnimation=function(e,t){if(!this.popupFadeInMaskAnimation){var n=this.background.alpha;this.popupFadeInMaskAnimation=new Eo.Z({targets:[this.background],delay:e,duration:t,props:{alpha:{start:0,from:0,to:n}}})}this.popupFadeInMaskAnimation.play()},n.runFadeOutMaskAnimation=function(e,t){if(!this.popupFadeOutMaskAnimation){var n=this.background.alpha;this.popupFadeOutMaskAnimation=new ts.Z({targets:[this.background],delay:e,duration:t,props:{alpha:{start:n,from:n,to:0}}})}this.popupFadeOutMaskAnimation.play()},t}(GameCore.Screen),uu=hu,du=n(463),pu={LOGO:{KEY:"spine-logo",JSON:"./assets/spine/logo/logo.json",ATLAS:"./assets/spine/logo/logo.atlas",ANIMATIONS:{START_GROW:"start_grow",IDLE_GROW:"idle_grow"}},BEST_SCORE:{KEY:"best-score",JSON:"./assets/spine/best-score{langcode}/newbest-trim.json",ATLAS:"./assets/spine/best-score{langcode}/newbest-trim.atlas",ANIMATIONS:{ANIM:"anim5"}}},gu=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n.bestScoreSpine=void 0,n.scene=t,t.add.existing((0,Ba.Z)(n)),n}(0,o.Z)(t,e);var n=t.prototype;return n.createSpineEffect=function(){var e=this,t=this.scene.world.getPixelRatio();this.bestScoreSpine=this.scene.add.spine(0,630,pu.BEST_SCORE.KEY,pu.BEST_SCORE.ANIMATIONS.ANIM),this.bestScoreSpine.preMultipliedAlpha=!0,this.bestScoreSpine.scale=1/t,this.add(this.bestScoreSpine),this.bestScoreSpine.on("complete",(function(){e.bestScoreSpine.setVisible(!1)}))},n.playEffect=function(){this.bestScoreSpine?(this.bestScoreSpine.setVisible(!0),this.bestScoreSpine.play(pu.BEST_SCORE.ANIMATIONS.ANIM)):this.createSpineEffect()},t}(Phaser.GameObjects.Container),fu=n(610),mu=n.n(fu),vu=GameCore.Configs,Eu=vu.Gameplay,Su=vu.Match.Levels,Au=function(){function e(){this.levelIndex=0,this.levels=Su,this.recentLevel=void 0}var t=e.prototype;return t.increaseLevel=function(){this.levelIndex++},t.getCurrentTargetScore=function(){return this.levels[this.levelIndex]},t.getNextTargetScoreLevel=function(){return this.levels[this.levelIndex+1]},t.getCurrentIndex=function(){return this.levelIndex},t.updateCurrentLevelByScore=function(e){var t,n=mu()(t=this.levels).call(t,(function(t){return t>e}));if(-1===n)return this.handleAutoGrantNewLevel(e);this.levelIndex=n;var i=this.levels[n-1];return i&&(this.recentLevel=i),this.levels[n]},t.restart=function(){this.levelIndex=0,this.recentLevel=0},t.handleAutoGrantNewLevel=function(e){var t=Eu.Progress.BonusScore,n=this.levels[this.levels.length-1]+t;return this.levels.push(n),n<=e?this.handleAutoGrantNewLevel(e):(this.levelIndex=this.levels.length-1,this.recentLevel=this.levels[this.levelIndex],n)},e}(),yu=n(465),Tu=function(){var e,t=window.game.facebook;return t?(null==(e=t.platform)?void 0:e.toLowerCase())||"":null},Iu=function(){return"web"==Tu()},Cu=Math.sin,bu=Math.cos,Ou=function(e,t,n){return e*bu(t)*n},Pu=function(e,t,n,i){return void 0===i&&(i=10),e*Cu(t)*n-.5*i*Math.pow(n,2)},Ru=Wa.Z.GAMEPLAY_32,wu=Ru.KEY,xu=Ru.FRAME,ku=function(e){function t(t,n){var i;return(i=e.call(this,t,n.x+(n.padding||0),n.y+(n.padding||0))||this).canCapture={direction:"bottom",angle:0},i.status=void 0,i.rateShaking=1,i.t0=0,i.x0=void 0,i.y0=void 0,i.v0=void 0,i.alpha0=void 0,i.scale0=void 0,i.maxScale0=void 0,i.scaleRate0=void 0,i.imageBreak=void 0,i.imageCell=void 0,i.imageGameOver=void 0,i.imageGameStart=void 0,i.imageHighlight=void 0,i.tweenImageGameOver=void 0,i.tweenImageHighlight=void 0,i.tweenScaleDown=void 0,i.tweenAlphaImageBreak=void 0,i.tweenStartMission=void 0,i.setSize(n.width,n.height),i.x0=n.x+(n.padding||0),i.y0=n.y+(n.padding||0),i.createImageCell(),i.createImageGameStart(),i.createImageBreak(),i.createImageGameOver(),i.createImageHighlight(),i.createTweenImageGameOver(),i.createTweenImageGHighlight(),i.createTweenScaleDown(),i.createTweenAlphaImageBreak(),i.createTweenStartMission(),t.add.existing((0,Ba.Z)(i)),i}(0,o.Z)(t,e);var n=t.prototype;return n.createImageCell=function(){this.imageCell=this.scene.make.image({key:wu,frame:xu.GEM_TRANSPARENT}),this.imageCell.setWorldSize(this.width,this.height),this.scale0=this.imageCell.scale,this.add(this.imageCell)},n.createImageBreak=function(){this.imageBreak=this.scene.make.image({key:wu,frame:xu.GEM_WHITE}),this.imageBreak.setVisible(!1),this.imageBreak.setWorldSize(this.width,this.height),this.add(this.imageBreak)},n.createImageGameStart=function(){this.imageGameStart=this.scene.make.image({key:wu,frame:xu.GEM_GLARE}),this.imageGameStart.setVisible(!1),this.imageGameStart.setWorldSize(this.width,this.height),this.add(this.imageGameStart)},n.createImageGameOver=function(){this.imageGameOver=this.scene.make.image({key:wu,frame:xu.GEM_SILVER}),this.imageGameOver.setVisible(!1),this.imageGameOver.setWorldSize(this.width,this.height),this.add(this.imageGameOver)},n.createTweenImageGameOver=function(){this.tweenImageGameOver=this.scene.add.tween({targets:[this.imageGameOver],duration:1200,ease:Phaser.Math.Easing.Quadratic.InOut,alpha:{from:0,to:1,start:0},paused:!0})},n.createImageHighlight=function(){this.imageHighlight=this.scene.make.image({key:wu,frame:xu.GEM_LIGHT}),this.imageHighlight.setVisible(!1),this.imageHighlight.setWorldSize(this.width,this.height),this.add(this.imageHighlight)},n.createTweenImageGHighlight=function(){this.tweenImageHighlight=this.scene.add.tween({targets:[this.imageHighlight],duration:100,ease:Phaser.Math.Easing.Quadratic.InOut,alpha:{from:0,to:1,start:0},paused:!0})},n.createTweenStartMission=function(){this.tweenStartMission=this.scene.add.tween({targets:[this.imageGameStart],duration:200,ease:Phaser.Math.Easing.Quadratic.InOut,scale:{from:0,to:this.scale0,start:0},alpha:{from:0,to:1,start:0},yoyo:!0,paused:!0})},n.createTweenScaleDown=function(){var e=this.imageBreak.scale;this.tweenScaleDown=this.scene.add.tween({delay:100,targets:[this.imageBreak],duration:600,ease:Phaser.Math.Easing.Quadratic.InOut,scale:{from:e,to:0,start:e},paused:!0})},n.createTweenAlphaImageBreak=function(){this.tweenAlphaImageBreak=this.scene.add.tween({targets:[this.imageBreak],duration:150,ease:Phaser.Math.Easing.Sine.InOut,alpha:{from:.2,to:.68},paused:!0})},n.showImageHighlight=function(){this.imageHighlight.setVisible(!0).setAlpha(1)},n.hideImageHighlight=function(){this.imageHighlight.setVisible(!1)},n.isHighlight=function(){return this.imageHighlight.visible},n.isShaking=function(){return"SHAKING"===this.status},n.playAnimShaking=function(){this.status="SHAKING"},n.playTweenBreaking=function(){this.status="BREAKING"},n.setRateShaking=function(e){this.rateShaking=e},n.stopAnimShaking=function(){this.rotation=0,this.status=""},n.reset=function(){this.imageCell.setAlpha(1)},n.resetImageBreak=function(){this.imageBreak.rotation=0,this.imageBreak.scale=this.scale0,this.imageBreak.setVisible(!1)},n.resetImageGameOver=function(){this.imageGameOver.setVisible(!1)},n.playAnimImageGameOver=function(){this.resetImageGameOver(),this.imageGameOver.setVisible(!0).setAlpha(0),this.tweenImageGameOver.play()},n.playTweenScaleDown=function(){this.resetImageBreak(),this.imageBreak.setVisible(!0).setScale(this.scale0).setAlpha(0),this.tweenAlphaImageBreak.play(),this.tweenScaleDown.play()},n.playTweenStartMission=function(){this.imageGameStart.setVisible(!0).setAlpha(0),this.tweenStartMission.play()},n.preUpdate=function(){if("SHAKING"===this.status)this.rotation+=.015*this.rateShaking,this.rotation>.1&&(this.rateShaking=-1),this.rotation<-.1&&(this.rateShaking=1)},n.handleTweenBreaking=function(){var e=this.alpha0<90?1:-1;this.t0+=3e3/1900;var t=.016*this.t0,n=Ou(this.v0,this.alpha0,t),i=Pu(this.v0,this.alpha0,t);this.imageBreak.x=this.x0+n,this.imageBreak.y=this.y0-i,this.imageBreak.rotation+=.04*e,this.imageBreak.scale>.4?this.imageBreak.scale-=this.scale0:this.imageBreak.scale=.4;var a=this.scene.gameZone,s=a.width,r=a.height;(this.imageBreak.x-this.imageBreak.displayWidth/2<0||this.imageBreak.x+this.imageBreak.displayWidth/2>s||this.imageBreak.y-this.imageBreak.displayHeight/2>r)&&(this.status="")},n.setFrameImageCell=function(e){this.imageCell.setFrame(e)},n.setAlphaImageCell=function(e){this.imageCell.setAlpha(e)},n.getFrameImageCell=function(){return this.imageCell.frame.name},t}(Phaser.GameObjects.Container),_u=ku,Lu=n(105),Du=n.n(Lu),Mu=GameCore.Configs.Board,Nu=(Mu.cols,Mu.rows),Bu=void 0===Nu?8:Nu,Gu=0,Fu=function(){return Gu},Uu=function(e,t){Gu=0;for(var n=[],i=e.length,a=e[0].length,s=[],r=[],o=function(t){for(var i=!0,r=0;r<a;r++)0===e[t][r].value&&(i=!1);if(i){s.push(t);for(var o=function(e){n.some((function(n){return n.x===e&&n.y===t}))||n.push({x:e,y:t})},c=0;c<a;c++)o(c)}},c=0;c<i;c++)o(c);for(var l=function(t){for(var a=!0,s=0;s<i;s++)0===e[s][t].value&&(a=!1);if(a){r.push(t);for(var o=function(e){n.some((function(n){return n.x===t&&n.y===e}))||n.push({x:t,y:e})},c=0;c<i;c++)o(c)}},h=0;h<a;h++)l(h);var u=Yu(e,t);if(u&&u.length>0)for(var d=function(){var e=u[p],t=e.x,i=e.y;n.some((function(e){return e.x===t&&e.y===i}))||n.push({x:t,y:i})},p=0;p<u.length;p++)d();return Gu+=s.length,Gu+=r.length,Gu+=Math.floor(u.length/9),n},Hu=function(e,t){if(0===e.length)return!1;var n=Ae()(e).call(e,(function(e){return e.x===t.x&&e.y===t.y}));return!(!n||n.length<=0)},Zu=function(e,t){for(var n=t.x,i=t.y,a=[],s=n;s<n+3;s++)for(var r=i;r<i+3;r++){if(0===e[r][s].value)return[];a.push({x:s,y:r})}return a},Yu=function(e,t){for(var n=[],i=function(e){for(var t,n=[],i=0;i<e.length;i++){var a=(t=e[i],{x:3*Math.floor(t.x/3),y:3*Math.floor(t.y/3)});Hu(n,a)||n.push(a)}return n}(t),a=0;a<i.length;a++){var s=i[a],r=Zu(e,s);n.push.apply(n,r)}return n},Vu=function(e){for(var t=e.length,n=e[0].length,i=[],a=0;a<t;a++){for(var s=!0,r=0;r<n;r++)0===e[a][r].value&&(s=!1);s&&i.push(a)}return i},Wu=function(e){for(var t=e.length,n=e[0].length,i=[],a=0;a<n;a++){for(var s=!0,r=0;r<t;r++)0===e[r][a].value&&(s=!1);s&&i.push(a)}return i},zu=function(e,t){var n=e.length,i=e[0].length;if(0===t.length)return!1;for(var a=0;a<n;a++)for(var s=0;s<i;s++)for(var r=0;r<t.length;r++)if(Ku(e,s,a,t[r]))return!1;return!0},Ku=function(e,t,n,i){for(var a=!0,s=0;s<i.data.length;s++)for(var r=0;r<i.data[s].length;r++)i.data[s][r].texture&&(e[n+s]&&e[n+s][t+r]&&0===e[n+s][t+r].value||(a=!1));return a},ju=function(e,t){for(var n=e.length,i=e[0].length,a=0;a<n;a++)for(var s=0;s<i;s++)if(Ku(e,s,a,t))return!0;return!1},Xu=0,Ju=function(){return Xu++,18+10*(qu()-1)},qu=function(){return Xu+1},Qu=function(e){var t=e;switch(e){case Is:t="b";break;case Cs:t="c";break;case bs:t="d";break;case Os:t="g";break;case Ps:t="o";break;case Rs:t="p";break;case ws:t="q";break;case xs:t="r";break;case ks:t="y";break;case Ds:t="l";break;case Ms:t="l1";break;case Ns:t="l3";break;case Bs:t="e2";break;case Gs:t="e3";break;case Fs:t="e4";break;case Us:t="e5";break;case Hs:t="s1";break;case Zs:t="s2";break;case Ys:t="s3";break;case Vs:t="tz";break;case Ws:t="ta";break;case vs:t="dt";break;case fs:t="dl";break;case ms:t="dr";break;case Es:t="db";break;case ps:t="v";break;case gs:t="h";break;case Ss:t="vl";break;case As:t="vr";break;case ys:t="hl";break;case Ts:t="hr"}return t},$u=function(e){var t=e;switch(e){case"b":t=Is;break;case"c":t=Cs;break;case"d":t=bs;break;case"g":t=Os;break;case"o":t=Ps;break;case"p":t=Rs;break;case"q":t=ws;break;case"r":t=xs;break;case"y":t=ks;break;case"l":t=Ds;break;case"l1":t=Ms;break;case"l3":t=Ns;break;case"e2":t=Bs;break;case"e3":t=Gs;break;case"e4":t=Fs;break;case"e5":t=Us;break;case"s1":t=Hs;break;case"s2":t=Zs;break;case"s3":t=Ys;break;case"tz":t=Vs;break;case"ta":t=Ws;break;case"dt":t=vs;break;case"dl":t=fs;break;case"dr":t=ms;break;case"db":t=Es;break;case"v":t=ps;break;case"h":t=gs;break;case"vl":t=Ss;break;case"vr":t=As;break;case"hl":t=ys;break;case"hr":t=Ts}return t},ed=function(e){for(var t=[],n="12345678x",i=e.split(""),a=0;a<i.length;a++)if(wa()(n).call(n,i[a])>=0)for(var s="x"===i[a]?Bu:Number(i[a]),r=0;r<s;r++)t.push({value:0,frame:"gem/gem_transparent"});else t.push({value:1,frame:$u(i[a])});return t},td=function(e){var t=e.split(","),n=t[0].split("-");if(n.length<=0)throw new Error("Invalid piece");return{type:$u(n[0]),direction:$u(n[1])||null,isReverse:n[2]&&"r"===n[2]||!1,frame:$u(t[1])}},nd=Wa.Z.GAMEPLAY_32,id=nd.KEY,ad=nd.FRAME,sd=GameCore.Configs.Board,rd=sd.cols,od=sd.rows,cd=function(e){function t(n,i,a){var s;return(s=e.call(this,n)||this).scene=void 0,s.wrapPiece=void 0,s.type=void 0,s.frame=void 0,s.direction=void 0,s.data=[],s.isReverse=!1,s.matrixData=void 0,s.cellItems=[],s.cells=[],s.isSetDrag=!1,s.isCreateCell=!1,s.isDragEnd=!1,s.isCanMove=void 0,s.index=void 0,s.distancePY=void 0,s.backupPx=void 0,s.backupPy=void 0,s.moveTopNumber=30,s.correctAlpha=1,s.props=void 0,s.parent=void 0,s.animMoveTopAndScaleUp=void 0,s.animMoveDownAndScaleDown=void 0,s.animScaleUp=void 0,s.animScaleDown=void 0,s.props=a,s.type=a.type,s.matrixData=a.matrixData,s.data=t.buildData(s.matrixData),s.direction=a.direction||null,s.isReverse=a.isReverse||!1,s.parent=i,s.scene=n,s.scene.world.isLandscape()?s.setSize(i.width,i.height/3):s.setSize(i.width/3,i.height),s.scene.add.existing((0,Ba.Z)(s)),s.createWrapPiece(),s.listenEvents(),s}(0,o.Z)(t,e);var n=t.prototype;return n.createWrapPiece=function(){this.wrapPiece=this.scene.make.image({key:id,frame:ad.GEM_TRANSPARENT}),this.wrapPiece.setWorldSize(this.width,this.height)},n.listenEvents=function(){var e=this;this.wrapPiece.removeAllListeners(),this.setInteractiveContainer(),this.wrapPiece.on(Phaser.Input.Events.POINTER_DOWN,(function(){e.parent.playTweenToEnableMaxFps()})),this.wrapPiece.on(Phaser.Input.Events.DRAG_START,(function(t){e.handleDragStart(t)})),this.wrapPiece.on(Phaser.Input.Events.DRAG,(function(t){e.handleDrag(t)})),this.wrapPiece.on(Phaser.Input.Events.DRAG_END,(function(){e.handleDragEnd(),e.parent.stopTweenToEnableMaxFps()}))},n.updateSize=function(){this.scene.world.isLandscape()?this.setSize(this.parent.width,this.parent.height/3):this.setSize(this.parent.width/3,this.parent.height),this.wrapPiece.setWorldSize(this.width,this.height)},n.updatePosition=function(e,t){this.setPosition(e,t),this.backupPx=this.x,this.backupPy=this.y},n.updateWrapPiecePosition=function(){var e=this.getWorldPosition(),t=e.x,n=e.y;this.wrapPiece.setPosition(t,n)},n.setIndex=function(e){this.index=e},n.setInteractiveContainer=function(){this.wrapPiece.setInteractive({useHandCursor:!0}).input.hitArea.setTo(0,0,this.width/this.wrapPiece.scaleX,this.height/this.wrapPiece.scaleY),this.scene.input.setDraggable(this.wrapPiece)},n.handleDragStart=function(e){var t,n,i=this;if(!this.scene.isGameOver&&this.isCanMove){null==(t=this.animScaleUp)||t.stop(),null==(n=this.animScaleDown)||n.stop(),this.setAlpha(this.correctAlpha).setScale(1).setPosition(this.x,this.y),this.isDragEnd=!1,this.isSetDrag=!0,this.setDepth(Va.Z.PIECE+1),this.parent.bringToTop(this),this.animMoveDownAndScaleDown&&this.animMoveDownAndScaleDown.isPlaying()&&(this.animMoveDownAndScaleDown.stop(),this.setScale(1)),this.scene.tutorialManager.isRunning()&&this.scene.tutorialManager.dragStart(),this.scene.audio.playSound(Ka.Z.PIECE_PICK);var a=this.scene.layoutManager.objects.main,s=a.board.cellSize/this.parent.cellSize,r=this.getContainerSize().height,o=e.worldX-this.getWorldPosition().x+this.x,c=0;if(Iu()||this.scene.world.isLandscape())c=e.worldY-this.getWorldPosition().y+this.y-r*s/2;else{var l=this.scene.gameZone.height/2+a.board.width/2-2*this.parent.cellSize+this.moveTopNumber,h=this.y+r*s-l+r;h=this.scene.gameZone.width/this.scene.gameZone.height>=375/619?44+r*s/2:53+r*s/2,c=e.worldY-this.getWorldPosition().y+this.y-h}this.distancePY=e.worldY-c;var u=41*a.board.cellPadding/100;this.updateCellsWithPadding(u),this.animMoveTopAndScaleUp=this.scene.tweens.add({x:o,y:c,scale:s,duration:150,targets:this,ease:Phaser.Math.Easing.Sine.InOut,delay:20,onComplete:function(){if(!i.isDragEnd){i.setPosition(o,c);var e=i.getCellsHighlight();a.board.handleRemoveHighlight(),a.board.handleHighlight(e,i.highlightCellCanCapture.bind(i))}}}),this.drawSuggestCells()}},n.handleDrag=function(e){if(!this.scene.isGameOver&&this.isCanMove&&this.isSetDrag)try{var t=this.scene.layoutManager.objects.main;if(this.animMoveTopAndScaleUp&&this.animMoveTopAndScaleUp.isPlaying()){var n=t.board.cellSize/this.parent.cellSize;this.animMoveTopAndScaleUp.complete(),this.animMoveTopAndScaleUp.stop(),this.setScale(n)}var i=this.checkOutOfThePage(e),a=i.lockX,s=i.lockY;if(a&&s)return;this.resetCellItems(),this.scene.game.updateFps(yu.Z.max);var r=e.worldX-this.getWorldPosition().x+this.x,o=e.worldY-this.distancePY;a?this.setY(o):s?this.setX(r):this.setPosition(r,o),this.canMove();var c=this.getCellsHighlight();t.board.handleRemoveHighlight(),t.board.handleHighlight(c,this.highlightCellCanCapture.bind(this))}catch(l){this.handleDragPieceInvalidMove()}},n.checkOutOfThePage=function(e){var t=this.getContainerSize(),n=t.width,i=t.height,a=this.scene.gameZone,s=a.width,r=a.height,o=e.worldX,c=e.worldY,l=this.distancePY-this.getWorldPosition().y+this.y,h=!1,u=!1;return(o<n/2||o>s-n/2)&&(h=!0),(c-l<i/2||c-l>r)&&(u=!0),{lockX:h,lockY:u}},n.highlightCellCanCapture=function(e,t,n,i){for(var a=this,s=rd,r=od,o=[],c=0;c<i.length;c++){var l=i[c],h=l.x,u=l.y;s>h&&(s=h),r>u&&(r=u)}for(var d=function(){var t=e[p],n=Ae()(i).call(i,(function(e){return e.y===t}));if(!n||0===n.length)return 1;for(var s=0;s<n.length;s++){var r=n[s];a.checkItemInArray(o,r)||o.push(r)}},p=0;p<e.length;p++)d();for(var g=function(){var e=t[f],n=Ae()(i).call(i,(function(t){return t.x===e}));if(!n||0===n.length)return 1;for(var s=0;s<n.length;s++){var r=n[s];a.checkItemInArray(o,r)||o.push(r)}},f=0;f<t.length;f++)g();for(var m=function(){var e=n[v],t=Ae()(i).call(i,(function(t){return t.x===e.x&&t.y===e.y}));if(!t||0===t.length)return 1;var s=t[0];a.checkItemInArray(o,s)||o.push(s)},v=0;v<n.length;v++)m();for(var E=function(){var e,t=o[S],n=t.x,i=t.y,c=Ae()(e=a.cellItems).call(e,(function(e){return e.x===n-s&&e.y===i-r}));if(!c||0===c.length)return 1;c[0].cell.setFrameImageCell(ad.GEM_LIGHT)},S=0;S<o.length;S++)E()},n.resetCellItems=function(){for(var e=0;e<this.cellItems.length;e++)this.cellItems[e].cell.setFrameImageCell(ad.GEM)},n.checkItemInArray=function(e,t){var n=Ae()(e).call(e,(function(e){return e.x===t.x&&e.y===t.y}));return!(!n||0===n.length)},n.handleDragPieceInvalidMove=function(){var e=this.scene.layoutManager.objects.main;e.board.handleRemoveHighlight(),e.board.removeAllCanCaptureCells()},n.handleDragEnd=function(){if(!this.isDragEnd&&this.isSetDrag&&this.isCanMove){this.isDragEnd=!0,this.isSetDrag=!1;var e=this.scene.layoutManager.objects.main;this.setDepth(Va.Z.PIECE),e.board.handleRemoveSuggestMove(),e.board.removeAllCanCaptureCells(),this.resetCellItems();try{this.canMove(),this.scene.audio.playSound(Ka.Z.PIECE_DROP),this.handleBoardMoveCompleted(),this.wrapPiece.disableInteractive()}catch(t){this.handleInvalidMove()}}},n.cancelDrag=function(){if(!this.isDragEnd&&this.isSetDrag){this.isDragEnd=!0,this.isSetDrag=!1;var e=this.scene.layoutManager.objects.main;this.setDepth(Va.Z.PIECE),e.board.handleRemoveSuggestMove(),e.board.removeAllCanCaptureCells(),this.resetCellItems(),e.board.handleRemoveHighlight(),this.handleInvalidMove()}},n.handleBoardMoveCompleted=function(){var e=this,t=this.scene.layoutManager.objects.main,n=this.getPositionTopLeftInBoard();if(n){var i=this.calcScore()||0;this.scene.tutorialManager.isRunning()||(this.scene.handleUpdateScore(i),this.scene.handleAddScoreAnim(i));var a=n.x,s=n.y,r=t.board.dataBoard[s][a].cell.getWorldPosition(),o=r.x,c=r.y,l=this.getWorldPosition(),h=l.x,u=l.y,d=this.x+o-h,p=this.y+c-u,g=this.getContainerSizeOrigin(),f=d+g.width/2,m=p+g.height/2,v=this.getCellsHighlight();this.scene.add.tween({targets:this,x:f,y:m,duration:50,onComplete:function(){e.updateCellsWithPadding(.5),t.board.handleRemoveHighlight(),e.hide(),e.setScale(1),e.parent.removeActivePiece(e.index),t.board.handleMove(v,e.onBoardHandleMoveCompleted.bind(e))}})}else t.board.handleRemoveHighlight()},n.getContainerSizeOrigin=function(){var e=this.data[0].length-1,t=this.data.length-1,n=this.parent.cellSize;return{width:e*n*this.scale,height:t*n*this.scale}},n.calcScore=function(){var e;if(!this.matrixData)return 0;var t=this.matrixData.length||0;if(0===t)return 0;for(var n=(null==(e=this.matrixData[0])?void 0:e.length)||0,i=0,a=0;a<t;a++)for(var s=0;s<n;s++)1===this.matrixData[a][s]&&i++;return i},n.hide=function(){this.setVisible(!1),this.wrapPiece.setVisible(!1)},n.show=function(){this.setVisible(!0),this.wrapPiece.setVisible(!0)},n.playAnimShow=function(){this.setAlpha(0).setScale(0),this.show(),this.animScaleUp.play()},n.onBoardHandleMoveCompleted=function(){this.scene.tutorialManager.isRunning()||(this.parent.setActivePieces(),this.parent.existPiecesActive()||this.parent.showNewPieces())},n.drawSuggestCells=function(){var e=this.scene.layoutManager.objects.main,t=function(e,t){for(var n=e.length,i=e[0].length,a=0,s=0,r=0,o=0;o<n;o++)for(var c=0;c<i;c++)if(Ku(e,c,o,t)&&(s=c,r=o,++a>1))return null;if(0===a)return null;for(var l=[],h=0;h<t.data.length;h++)for(var u=0;u<t.data[h].length;u++)t.data[h][u].texture&&l.push({x:s+u,y:r+h});return l&&l.length>0?l:null}(e.board.dataBoard,{data:this.data});t&&e.board.handleSuggestMove(t)},n.handleInvalidMove=function(){var e=this,t=this.scene.layoutManager.objects.main;this.scene.audio.playSound(Ka.Z.PIECE_INVALID_MOVE),t.board.handleRemoveHighlight(),this.scene.tutorialManager.isRunning()&&this.scene.tutorialManager.invalidMove(),this.animMoveDownAndScaleDown=this.scene.tweens.add({x:this.backupPx,y:this.backupPy,scaleX:1,scaleY:1,duration:300,targets:this,ease:Phaser.Math.Easing.Sine.InOut,delay:20,onComplete:function(){e.updateCellsWithPadding(.5)}})},n.canMove=function(){var e=this.scene.layoutManager.objects.main.board.dataBoard,t=this.getCellsHighlight();if(0===t.length)throw new Error("Invalid Move");for(var n=!0,i=0;i<t.length;i++){var a=t[i],s=a.x,r=a.y;if(!e[r]||!e[r][s]||0!==e[r][s].value){n=!1;break}}if(!n||0===t.length)throw new Error("Invalid Move");return n},n.getCellsHighlight=function(){var e=this.scene.layoutManager.objects.main.board.dataBoard,t=[],n=this.getPositionTopLeftInBoard();if(null===n)return t;if(this.scene.tutorialManager.isRunning()&&!this.scene.tutorialManager.validTargetPosition(n))return t;for(var i=0;i<this.data.length;i++)for(var a=0;a<this.data[i].length;a++)if(this.data[i][a].texture){var s=a+n.x,r=i+n.y,o=e[r]&&e[r][s]?e[r][s].x:0,c=e[r]&&e[r][s]?e[r][s].y:0;if(r>=od||s>=rd||!e[r][s]||1===e[r][s].value)return[];t.push({x:s,y:r,pX:o,pY:c})}return t},n.getPositionTopLeftInBoard=function(){for(var e=this.scene.layoutManager.objects.main,t=this.getContainerSize(),n=t.width,i=t.height,a=this.getWorldPosition(),s=a.x,r=a.y,o=e.board.dataBoard,c=s+this.parent.cellSize*this.scale-n/2,l=r+this.parent.cellSize*this.scale-i/2,h=e.board.cellPadding,u=-1,d=-1,p=0;p<od;p++)for(var g=0;g<rd;g++){var f=o[p][g].cell.getWorldPosition(),m=f.x,v=f.y;if(m-h/2<=c&&m+o[p][g].width+h/2>=c&&v-h/2<=l&&v+o[p][g].height+h/2>=l){u=g,d=p;break}}return u<0||u>rd-1||d<0||d>od-1?null:{x:u,y:d}},t.buildData=function(e){for(var t=[],n=0;n<e.length;n++){t[n]=[];for(var i=0;i<e[n].length;i++){var a=1===e[n][i]?ad.GEM:null;t[n][i]={x:i,y:n,texture:a}}}return t},n.drawPiece=function(){return this.isCreateCell||this.createCells(.5),this.createAnimShow(),this.playAnimShow(),this.wrapPiece.setInteractive(),this},n.createAnimShow=function(){var e=this,t=140*this.index;this.animScaleUp=this.scene.tweens.add({delay:t,paused:!0,duration:163,targets:this,alpha:{from:0,to:this.alpha},scale:{from:0,to:1.2},ease:Phaser.Math.Easing.Sine.Out,onComplete:function(){e.animScaleDown.play()}}),this.animScaleDown=this.scene.tweens.add({delay:83,paused:!0,duration:150,targets:this,scale:1,ease:Phaser.Math.Easing.Sine.Out})},n.createCells=function(e){for(var t=this.parent.cellSize,n=this.data.length,i=this.data[0].length,a=0;a<this.data.length;a++){this.cells[a]=[];for(var s=0;s<this.data[a].length;s++)if(this.data[a][s].texture){var r={x:(s-(i-1)/2)*(t+e),y:(a-(n-1)/2)*(t+e),width:t-2*e,height:t-2*e},o=new _u(this.scene,r);o.setFrameImageCell(ad.GEM),this.cells[a][s]=o,this.cellItems.push({x:s,y:a,cell:o}),this.add(o)}}this.isCreateCell=!0},n.resetPiece=function(){this.cellItems.forEach((function(e){e.cell.destroy()})),this.cells=[],this.cellItems=[],this.createCells(.5)},n.updateCellsWithPadding=function(e){for(var t=this.parent.cellSize,n=this.data.length,i=this.data[0].length,a=0;a<this.data.length;a++)for(var s=0;s<this.data[a].length;s++)if(this.data[a][s].texture){var r=(s-(i-1)/2)*(t+e),o=(a-(n-1)/2)*(t+e);this.cells[a][s].setPosition(r,o)}},n.getContainerSize=function(){for(var e=0,t=this.data.length,n=0;n<this.data.length;n++)this.data[n].length>e&&(e=this.data[n].length);var i=this.parent.cellSize;return{width:e*i*this.scale,height:t*i*this.scale}},n.setCanMove=function(e){this.isCanMove=e,this.correctAlpha=e?1:.4,this.setAlpha(this.correctAlpha)},n.reset=function(){this.setVisible(!1),this.setScale(1),this.wrapPiece.disableInteractive()},t}(Phaser.GameObjects.Container),ld=function(e){function t(n,i,a){return e.call(this,n,i,(0,s.Z)({},a,{matrixData:t.getMatrixData(a.type,a.direction,a.isReverse)}))||this}return(0,o.Z)(t,e),t.getMatrixData=function(e,t,n){void 0===n&&(n=!1);var i=[];switch(t){case fs:n?i=gr:(i=pr,e===Ms&&(i=fr),e===Ns&&(i=mr));break;case ms:n?i=rr:(i=sr,e===Ms&&(i=or),e===Ns&&(i=cr));break;case vs:if(n){i=nr;break}i=tr,e===Ms&&(i=ir),e===Ns&&(i=ar);break;case Es:n?i=hr:(i=lr,e===Ms&&(i=ur),e===Ns&&(i=dr))}return i},t.getData=function(e,n,i){return void 0===i&&(i=!1),t.buildData(t.getMatrixData(e,n,i))},t}(cd),hd=ld,ud=function(e){function t(n,i,a){return e.call(this,n,i,(0,s.Z)({},a,{matrixData:t.getMatrixData(a.type,a.direction)}))||this}return(0,o.Z)(t,e),t.getMatrixData=function(e,t){var n=[];switch(e){case Us:n=t===ps?Ir:Cr;break;case Fs:n=t===ps?yr:Tr;break;case Bs:n=t===ps?vr:Er;break;case Gs:n=t===ps?Sr:Ar}return n},t.getData=function(e,n){return t.buildData(t.getMatrixData(e,n))},t}(cd),dd=ud,pd=function(e){function t(n,i,a){return e.call(this,n,i,(0,s.Z)({},a,{matrixData:t.getMatrixData(a.type)}))||this}return(0,o.Z)(t,e),t.getMatrixData=function(e){var t=[];switch(e){case Hs:t=br;break;case Zs:t=Or;break;case Ys:t=Pr}return t},t.getData=function(e){return t.buildData(t.getMatrixData(e))},t}(cd),gd=pd,fd=function(e){function t(n,i,a){return e.call(this,n,i,(0,s.Z)({},a,{matrixData:t.getMatrixData(a.direction)}))||this}return(0,o.Z)(t,e),t.getMatrixData=function(e){var t=[];switch(e){case"left":default:t=_r;break;case"right":t=Lr;break;case"top":t=Dr;break;case"bottom":t=Mr}return t},t.getData=function(e){return t.buildData(t.getMatrixData(e))},t}(cd),md=fd,vd=function(e){function t(n,i,a){return e.call(this,n,i,(0,s.Z)({},a,{matrixData:t.getMatrixData(a.type,a.direction)}))||this}return(0,o.Z)(t,e),t.getDataByDirectionCross2=function(e){var t=[];switch(e){case"left":default:t=Hr;break;case"right":t=Zr}return t},t.getDataByDirectionCross3=function(e){var t=[];switch(e){case"left":default:t=Yr;break;case"right":t=Vr}return t},t.getDataByDirectionCross4=function(e){var t=[];switch(e){case"left":default:t=Wr;break;case"right":t=zr}return t},t.getDataByDirectionCross5=function(e){var t=[];switch(e){case"left":default:t=Kr;break;case"right":t=jr}return t},t.getMatrixData=function(e,n){var i=[];switch(e){case js:i=t.getDataByDirectionCross2(n);break;case Xs:i=t.getDataByDirectionCross3(n);break;case Js:i=t.getDataByDirectionCross4(n);break;case qs:i=t.getDataByDirectionCross5(n)}return i},t.getData=function(e,n){return t.buildData(t.getMatrixData(e,n))},t}(cd),Ed=vd,Sd=function(e){function t(n,i,a){return e.call(this,n,i,(0,s.Z)({},a,{matrixData:t.getMatrixData(a.direction)}))||this}return(0,o.Z)(t,e),t.getMatrixData=function(e){var t=[];switch(e){case"vertical_left":default:t=Rr;break;case"vertical_right":t=wr;break;case"horizontal_right":t=kr;break;case"horizontal_left":t=xr}return t},t.getData=function(e){return t.buildData(t.getMatrixData(e))},t}(cd),Ad=Sd,yd=function(e){function t(n,i,a){return e.call(this,n,i,(0,s.Z)({},a,{matrixData:t.getMatrixData()}))||this}return(0,o.Z)(t,e),t.getMatrixData=function(){return Ur},t.getData=function(){return t.buildData(t.getMatrixData())},t}(cd),Td=yd,Id=function(e){function t(n,i,a){return e.call(this,n,i,(0,s.Z)({},a,{matrixData:t.getMatrixData(a.direction)}))||this}return(0,o.Z)(t,e),t.getMatrixData=function(e){var t=[];switch(e){case"left":default:t=Nr;break;case"right":t=Br;break;case"top":t=Gr;break;case"bottom":t=Fr}return t},t.getData=function(e){return t.buildData(t.getMatrixData(e))},t}(cd),Cd=Id,bd=function(e){function t(n,i,a){return e.call(this,n,i,(0,s.Z)({},a,{matrixData:t.getMatrixData(a.direction)}))||this}return(0,o.Z)(t,e),t.getMatrixData=function(e){var t=[];switch(e){case"left":default:t=Xr;break;case"right":t=Jr;break;case"top":t=qr;break;case"bottom":t=Qr}return t},t.getData=function(e){return t.buildData(t.getMatrixData(e))},t}(cd),Od=bd,Pd=Wa.Z.DEFAULT,Rd=Pd.KEY,wd=Pd.FRAME,xd=function(){function e(e){this.scene=void 0,this.x=void 0,this.y=void 0,this.background=void 0,this.text=void 0,this.tweenStep1=void 0,this.tweenStep2=void 0,this.tweenStep3=void 0,this.tweenStep4=void 0,this.tweenStep5=void 0,this.tweenStep6=void 0,this.tweenTextStep1=void 0,this.tweenTextStep2=void 0,this.tweenTextStep5=void 0,this.tweenTextStep6=void 0,this.widthText=void 0,this.scene=e,this.init()}var t=e.prototype;return t.init=function(){this.createBackground(),this.createText(),this.createTween()},t.createBackground=function(){this.background=this.scene.make.image({key:Rd,frame:wd.BG_STREAK}),this.background.setWorldSize(106,38),this.background.setVisible(!1)},t.createText=function(){this.text=this.scene.make.bitmapText({font:Xa.Z.PRIMARY_LIGHT.KEY,size:this.scene.fontSize(50),origin:{x:.5,y:.5},text:"3X "+this.scene.lang.Text.STREAK+"!"}),this.text.setVisible(!1)},t.createTween=function(){var e=this,t=this.background.scale+.3;this.tweenStep1=this.scene.tweens.add({targets:[this.background],duration:100,ease:Phaser.Math.Easing.Sine.InOut,props:{scale:{start:0,from:0,to:t}},paused:!0,onComplete:function(){e.tweenStep2.play()}}),this.tweenTextStep1=this.scene.tweens.add({targets:[this.text],duration:200,ease:Phaser.Math.Easing.Sine.InOut,props:{scale:{start:.3,from:.3,to:1.4}},paused:!0,onComplete:function(){e.tweenTextStep2.play()}}),this.tweenStep2=this.scene.tweens.add({targets:[this.background],duration:200,ease:Phaser.Math.Easing.Sine.InOut,props:{scale:{from:t,to:t-.3}},paused:!0,onComplete:function(){e.tweenStep3.play()}}),this.tweenTextStep2=this.scene.tweens.add({targets:[this.text],duration:100,ease:Phaser.Math.Easing.Sine.InOut,props:{scale:{from:1.4,to:1}},paused:!0,onComplete:function(){e.tweenTextStep5.play()}}),this.tweenStep3=this.scene.tweens.addCounter({from:0,to:20,paused:!0,duration:533,ease:Phaser.Math.Easing.Sine.InOut,onUpdate:function(t){var n=t.getValue();e.text.setPosition(e.x,e.y-n),e.background.setPosition(e.x,e.y-n)},onComplete:function(){e.y=e.y-20,e.tweenStep4.play()}}),this.tweenStep4=this.scene.tweens.addCounter({from:0,to:5,paused:!0,duration:333,ease:Phaser.Math.Easing.Sine.InOut,onUpdate:function(t){var n=t.getValue();e.text.setPosition(e.x,e.y+n),e.background.setPosition(e.x,e.y+n)},onComplete:function(){e.y=e.y+5,e.tweenStep5.play(),e.tweenTextStep5.play()}}),this.tweenStep5=this.scene.tweens.add({targets:[this.background],delay:567,duration:67,ease:Phaser.Math.Easing.Sine.InOut,props:{scale:{from:t-.3,to:t}},paused:!0,onComplete:function(){e.tweenStep6.play()}}),this.tweenTextStep5=this.scene.tweens.add({targets:[this.text],delay:467,duration:133,ease:Phaser.Math.Easing.Sine.InOut,props:{scale:{from:1,to:.8}},paused:!0,onComplete:function(){e.tweenTextStep6.play()}}),this.tweenStep6=this.scene.tweens.add({targets:[this.background],duration:200,ease:Phaser.Math.Easing.Sine.InOut,props:{scale:{from:t,to:0}},paused:!0,onComplete:function(){e.text.setVisible(!1),e.background.setVisible(!1),e.text.setScale(0),e.background.setScale(0)}}),this.tweenTextStep6=this.scene.tweens.add({targets:[this.text],duration:167,ease:Phaser.Math.Easing.Sine.InOut,props:{scale:{from:.8,to:1.7},alpha:{from:1,to:0}},paused:!0,onComplete:function(){e.text.setVisible(!1),e.text.setScale(0)}})},t.playAnim=function(e,t){(this.tweenTextStep1.isPlaying()||this.tweenTextStep2.isPlaying()||this.tweenTextStep5.isPlaying()||this.tweenTextStep6.isPlaying())&&(this.tweenTextStep1.stop(),this.tweenTextStep2.stop(),this.tweenTextStep5.stop(),this.tweenTextStep6.stop(),this.text.setScale(0),this.text.setVisible(!1),this.background.setScale(0),this.background.setVisible(!1)),this.x=e,this.y=t,this.text.setScale(0).setAlpha(1),this.background.setScale(0);var n=e,i=this.scene.gameZone.width;n=e-this.widthText/2<0?this.widthText/2+5:e+this.widthText/2>i?i-this.widthText/2-5:e,this.text.setPosition(n,t),this.background.setPosition(n,t),this.text.setVisible(!0),this.tweenTextStep1.play()},t.setTextCombo=function(e){this.text.setText(e+"X  "+this.scene.lang.Text.COMBO),this.text.setScale(1),this.widthText=this.text.width+50},t.setTextStreak=function(e){this.text.setText(e+"X  "+this.scene.lang.Text.STREAK),this.text.setScale(1),this.widthText=this.text.width+50},t.setBgFrame=function(e){this.background.setFrame(e)},e}(),kd=function(){function e(e){this.scene=void 0,this.streakBreak=void 0,this.scene=e}return e.prototype.init=function(){this.streakBreak=new xd(this.scene)},e}(),_d=Wa.Z.DEFAULT,Ld=_d.KEY,Dd=_d.FRAME,Md=function(e){function t(t){var n;return(n=e.call(this,t)||this).background=void 0,n.iconCrown=void 0,n.bestScoreText=void 0,n.setPosition(0,48.5),n.createBackground(),n.createScoreText(),n.createIconCrown(),n.scene.add.existing((0,Ba.Z)(n)),n}(0,o.Z)(t,e);var n=t.prototype;return n.createBackground=function(){this.background=this.scene.make.image({key:Ld,frame:Dd.BEST_SCORE_FRAME}),this.background.setWorldSize(55,77),this.add(this.background),Phaser.Display.Align.In.Center(this.background,this)},n.createScoreText=function(){this.bestScoreText=this.scene.make.bitmapText({font:Xa.Z.NUMBER_LIGHT.KEY,size:this.scene.fontSize(26),origin:{x:.5,y:.5},text:"0"}),this.add(this.bestScoreText),Phaser.Display.Align.In.Center(this.bestScoreText,this.background,0,25)},n.createIconCrown=function(){this.iconCrown=this.scene.make.image({key:Ld,frame:Dd.ICON_CROWN}),this.iconCrown.setWorldSize(20,18),this.add(this.iconCrown),Phaser.Display.Align.In.Center(this.iconCrown,this.background,0,5)},n.setScoreText=function(e){this.bestScoreText.setText(String(e))},n.updateBestScoreText=function(e){var t=this.scene.storage.getState();e>Uc(t).bestScore&&this.setScoreText(e)},t}(Phaser.GameObjects.Container),Nd=Md,Bd=Wa.Z.GAMEPLAY,Gd=Bd.KEY,Fd=Bd.FRAME,Ud=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n.scoreText=void 0,n.background=void 0,n.tweenShow=void 0,n.tweenHide=void 0,n.addScore=void 0,n.score=void 0,n.currentScore=0,n.scene=t,n.scene.add.existing((0,Ba.Z)(n)),n.createBackground(),n.createScoreText(),n}(0,o.Z)(t,e);var n=t.prototype;return n.createBackground=function(){this.background=this.scene.make.image({key:Gd,frame:Fd.BG_MAIN_SCORE}),this.background.setWorldSize(187,48),this.add(this.background),Phaser.Display.Align.In.Center(this.background,this,0,-1)},n.createScoreText=function(){this.scoreText=this.scene.make.bitmapText({font:Xa.Z.NUMBER_LIGHT.KEY,size:this.scene.fontSize(52),text:"0",origin:{x:.5,y:.5}}),this.add(this.scoreText),Phaser.Display.Align.In.Center(this.scoreText,this.background,0,3)},n.setScore=function(e){this.score=e},n.setScoreText=function(e){this.scoreText.setText(String(e))},n.animAddScore=function(e){var t=this,n=this.scene.layoutManager.objects.header,i=this.score+e;this.currentScore=i,this.setScore(i),this.addScore&&this.addScore.isPlaying()&&(this.addScore.remove(),this.setScoreText(i)),this.addScore=this.scene.tweens.addCounter({from:this.score-e,to:this.score,duration:100,ease:Phaser.Math.Easing.Sine.Out,onUpdate:function(e){var i=Math.floor(e.getValue());t.setScoreText(i),n.bestScoreBlock.updateBestScoreText(i),t.scene.updateProgressTargetScore(i)},onComplete:function(){t.setScoreText(t.score),n.bestScoreBlock.updateBestScoreText(t.score),t.scene.tutorialManager.isRunning()?t.scene.tutorialManager.nextTutorial():(t.scene.handleNextTargetScore(),t.scene.bestScoreReached())}})},t}(Phaser.GameObjects.Container),Hd=Ud,Zd=Wa.Z.GAMEPLAY,Yd=Zd.KEY,Vd=Zd.FRAME,Wd=function(e){function t(t){var n;return(n=e.call(this,t)||this).titleSprite=void 0,n.background=void 0,n.textScore=void 0,n.avatar=void 0,n.score=void 0,n}(0,o.Z)(t,e);var n=t.prototype;return n.initScoreBlockAvatar=function(){this.createAvatar(),this.createBackgroundScore(),this.createScoreText(),this.setScore(0),this.setScoreText(0)},n.createAvatar=function(){this.avatar=new dc(this.scene,{key:Yd,frame:Vd.AVATAR_BORDER,background:Vd.AVATAR_BACKGROUND,width:32,height:32,radius:32,borderWidth:5}),this.add(this.avatar),Phaser.Display.Align.In.Center(this.avatar,this,0,-10)},n.createBackgroundScore=function(){this.background=this.scene.make.image({key:Yd,frame:Vd.BG_SCORE}),this.background.setWorldSize(92,27),this.add(this.background),Phaser.Display.Align.In.Center(this.background,this,0,25)},n.createScoreText=function(){this.textScore=this.scene.make.bitmapText({font:Xa.Z.NUMBER_LIGHT.KEY,size:this.scene.fontSize(35),text:"0",origin:{x:.5,y:.5}}),this.add(this.textScore),Phaser.Display.Align.In.Center(this.textScore,this.background)},n.setScore=function(e){this.score=e},n.setScoreText=function(e){this.textScore.setText(String(e))},t}(Phaser.GameObjects.Container),zd=Wd,Kd=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n.addScore=void 0,n.currentScore=0,n.scene=t,n.initScoreBlockAvatar(),n.scene.add.existing((0,Ba.Z)(n)),n}(0,o.Z)(t,e);var n=t.prototype;return n.updateInfo=function(){var e=this.scene.player.getPlayer(),t=e.playerId,n=e.photo;if(this.avatar.loadPhoto(t,n),this.scene.gamePlayMode===ma){var i=this.scene.storage.getState(),a=(Uc(i)[t]||{}).score,s=void 0===a?0:a;this.textScore.setText(String(s))}},n.animAddScore=function(e){var t=this,n=this.scene.layoutManager.objects.header,i=this.score+e;this.currentScore=i,this.setScore(i),this.addScore&&this.addScore.isPlaying()&&(this.addScore.remove(),this.setScoreText(i)),this.addScore=this.scene.tweens.addCounter({from:this.score-e,to:this.score,duration:100,onUpdate:function(e){var i=Math.floor(e.getValue());t.setScoreText(i),n.bestScoreBlock.updateBestScoreText(i),t.scene.updateProgressTargetScore(i)},onComplete:function(){t.setScore(t.score),n.bestScoreBlock.updateBestScoreText(t.score),t.setScoreText(i),t.scene.handleNextTargetScore(),t.scene.bestScoreReached()}})},t}(zd),jd=Kd,Xd=function(e){function t(t){var n;return(n=e.call(this,t)||this).initScoreBlockAvatar(),n.scene.add.existing((0,Ba.Z)(n)),n}return(0,o.Z)(t,e),t.prototype.updateInfo=function(){var e=this.scene.storage.getState(),t=Fc(e),n=el(e),i=n.playerId,a=n.photo,s=(t[i]||{}).score,r=void 0===s?0:s;this.textScore.setText(String(r)),this.avatar.loadPhoto(i,a)},t}(zd),Jd=Xd,qd=n(455),Qd=Wa.Z.EFFECTS,$d=Qd.KEY,ep=Qd.FRAME,tp=function(e){function t(t){var n;return(n=e.call(this,t,$d,ep.FX_STAR_WHITE)||this).emitZone=void 0,n.emitter=void 0,n._isPlaying=!1,n.frequency=void 0,n.count=void 0,n.createEmitZone(),n.createEmitters(),n.scene.add.existing((0,Ba.Z)(n)),n}(0,o.Z)(t,e);var n=t.prototype;return n.createEmitZone=function(){this.emitZone=new Phaser.Geom.Rectangle},n.createEmitters=function(){var e=1/this.scene.world.getPixelRatio();this.emitter=this.createEmitter({frame:ep.DUST_YELLOW,tint:16710522,emitZone:{source:this.emitZone,type:"random"},frequency:16,speedX:{min:-25,max:-10},speedY:{min:-7,max:7},lifespan:{min:500,max:1500},alpha:{start:.7,end:.3},scale:{min:1*e,max:1.5*e},delay:300})},n.run=function(e,t,n,i,a,s){this.emitZone.setSize(a,s),this.emitZone.setPosition(n-a/2,i-s/2),t!=this.frequency&&(this.emitter.setFrequency(t),this.frequency=t),e!=this.count&&(this.emitter.setQuantity(e),this.count=e),this._isPlaying||(this.emitter.start(),this._isPlaying=!0)},n.stop=function(){var e;null==(e=this.emitter)||e.stop(),this._isPlaying=!1},n.isPlaying=function(){return this._isPlaying},t}(Phaser.GameObjects.Particles.ParticleEmitterManager),np=tp,ip=Wa.Z.GAMEPLAY,ap=ip.KEY,sp=ip.FRAME,rp=function(e){function t(t,n,i){var a;return(a=e.call(this,t)||this).scene=void 0,a.leftBg=void 0,a.midBg=void 0,a.rightBg=void 0,a.leftProgress=void 0,a.midProgress=void 0,a.rightProgress=void 0,a.rightWhiteProgress=void 0,a.iconCup=void 0,a.glareCup=void 0,a.tweenRotationGlareCup=void 0,a.targetScore=void 0,a.listPoolMilestoneFrame=[],a.listMilestoneFrame=[],a.particle=void 0,a.emitter=void 0,a.progressBarFull=void 0,a.sparkling=void 0,a.setSize(n,i),a.scene=t,a.init(),a}(0,o.Z)(t,e);var n=t.prototype;return n.init=function(){this.initBg(),this.initProgressBar(),this.createParticle(),this.createEmitter(),this.createGlareCup(),this.createTweenGlare(),this.createIconCup(),this.createSparkling()},n.initBg=function(){this.leftBg=this.scene.make.image({key:ap,frame:sp.PROGRESS_BG_LEFT}),this.midBg=this.scene.make.image({key:ap,frame:sp.PROGRESS_BG_MID}),this.rightBg=this.scene.make.image({key:ap,frame:sp.PROGRESS_BG_RIGHT});var e=this.leftBg,t=e.width,n=e.height,i=t*this.height/n;this.leftBg.setWorldSize(i,this.height);var a=this.rightBg,s=a.width,r=a.height,o=s*this.height/r;this.rightBg.setWorldSize(o,this.height);var c=this.width-(i+o);this.midBg.setWorldSize(c,this.height),this.add(this.leftBg),this.add(this.midBg),this.add(this.rightBg),Phaser.Display.Align.In.LeftCenter(this.leftBg,this,0,0),Phaser.Display.Align.In.Center(this.midBg,this,0,0),Phaser.Display.Align.In.RightCenter(this.rightBg,this,0,0)},n.initProgressBar=function(){this.leftProgress=this.scene.make.image({key:ap,frame:sp.PROGRESS_BAR_LEFT}),this.midProgress=this.scene.make.image({key:ap,frame:sp.PROGRESS_BAR_MID}),this.rightProgress=this.scene.make.image({key:ap,frame:sp.PROGRESS_BAR_RIGHT}),this.rightWhiteProgress=this.scene.make.image({key:ap,frame:sp.PROGRESS_BAR_RIGHT_WHITE});var e=this.leftProgress,t=e.width,n=e.height,i=t*this.height/n;this.leftProgress.setWorldSize(i,this.height);var a=this.rightProgress,s=a.width,r=a.height,o=s*this.height/r;this.rightProgress.setWorldSize(o,this.height);var c=this.rightWhiteProgress,l=c.width,h=c.height,u=l*this.height/h;this.rightWhiteProgress.setWorldSize(u,this.height);var d=this.width-(i+o)+2;this.midProgress.setWorldSize(d,this.height),this.add(this.rightWhiteProgress),this.add(this.leftProgress),this.add(this.midProgress),this.add(this.rightProgress),this.leftProgress.setVisible(!1),this.rightProgress.setVisible(!1),this.midProgress.setVisible(!1),Phaser.Display.Align.In.LeftCenter(this.leftProgress,this,0,0),Phaser.Display.Align.In.Center(this.midProgress,this,0,0),Phaser.Display.Align.In.RightCenter(this.rightProgress,this,0,0),Phaser.Display.Align.In.Center(this.rightWhiteProgress,this,0,0)},n.createIconCup=function(){this.iconCup=this.scene.make.image({key:ap,frame:sp.ICON_CUP}),this.iconCup.setWorldSize(25,20),this.add(this.iconCup),Phaser.Display.Align.In.RightCenter(this.iconCup,this.glareCup,-9,1)},n.createGlareCup=function(){this.glareCup=this.scene.make.image({key:ap,frame:sp.CUP_GLARE}),this.glareCup.setWorldSize(44,44),this.glareCup.setVisible(!1),this.add(this.glareCup),Phaser.Display.Align.In.RightCenter(this.glareCup,this.rightBg,42,-3)},n.createTweenGlare=function(){this.tweenRotationGlareCup=new qd.Z({targets:[this.glareCup],repeat:-1,duration:6e3})},n.createParticle=function(){this.particle=this.scene.add.particles(ap),this.add(this.particle)},n.createEmitter=function(){this.emitter=this.particle.createEmitter({x:0,y:0,scale:{min:.3,max:1},speed:{min:10,max:30},lifespan:{min:500,max:1e3},quantity:1,on:!1,frame:sp.DUST}),this.emitter.setPosition(this.x+this.width/2+20,-3)},n.createSparkling=function(){this.sparkling=new np(this.scene),this.add(this.sparkling)},n.createMilestoneFrame=function(){var e=this.scene.make.image({key:ap,frame:sp.FLAG});return e.setWorldSize(16,22),e},n.getMilestoneFrame=function(){var e,t=Ae()(e=this.listPoolMilestoneFrame).call(e,(function(e){return!e.visible}));if(!t||0===t.length){var n=this.createMilestoneFrame();return this.listPoolMilestoneFrame.push(n),this.add(n),n}return t[0]},n.handleSetAlphaListMilestone=function(e){this.listMilestoneFrame.forEach((function(t){t.score<=e?t.frame.setAlpha(1):t.frame.setAlpha(.5)}))},n.handleSetAlphaCup=function(e){e>=this.targetScore?this.iconCup.setAlpha(1):this.iconCup.setAlpha(.5)},n.runEmitter=function(){this.emitter.start()},n.stopEmitter=function(){this.emitter.stop()},n.runAnimGlare=function(){this.glareCup.setVisible(!0),this.tweenRotationGlareCup.play()},n.stopAnimGlare=function(){this.tweenRotationGlareCup.stop(),this.glareCup.setVisible(!1)},n.hideProgressBar=function(){this.leftProgress.setVisible(!1),this.rightProgress.setVisible(!1),this.midProgress.setVisible(!1)},n.hideMilestone=function(){this.listPoolMilestoneFrame.forEach((function(e){e.setVisible(!1)}))},n.resetListMilestone=function(){this.listMilestoneFrame=[]},n.reset=function(){this.hideMilestone(),this.hideProgressBar(),this.setPercent(0),this.resetListMilestone()},n.setTargetScore=function(e){this.targetScore=e},n.getTargetScore=function(){return this.targetScore},n.setPercent=function(e){var t=e*this.width,n=this.leftProgress.displayWidth,i=this.midProgress.displayWidth,a=this.rightProgress.displayWidth,s=this.leftBg.width+this.midBg.width+this.rightBg.width;if(this.sparkling.setPosition(),0===e)return this.rightWhiteProgress.setVisible(!1),this.sparkling.stop(),this.stopAnimGlare(),void this.stopEmitter();var r=s*(e>1?1:e),o=this.leftBg.x+r-this.leftBg.width/2+this.rightWhiteProgress.width/2-1;if(this.scene.isNextTarget?(this.runSparklingEmitZone(o-2),this.scene.isNextTarget=!1):this.sparkling.run(2,50,o,this.leftBg.y-.5,4,4),this.rightWhiteProgress.setVisible(!0),this.rightWhiteProgress.x=t-s/2+this.rightWhiteProgress.width/2-3,e>=1){this.rightWhiteProgress.x=s-this.rightProgress.x-a;var c=s-this.rightProgress.x-a;if(this.sparkling.run(2,50,c,this.leftBg.y-.5,4,4),this.progressBarFull)return;return this.progressBarFull=!0,this.leftProgress.setVisible(!0),this.midProgress.setVisible(!0),this.rightProgress.setVisible(!0),this.leftProgress.setCrop(0,0,n/this.leftProgress.scaleX,2*this.height),this.midProgress.setCrop(0,0,i/this.midProgress.scaleX,2*this.height),this.rightProgress.setCrop(0,0,a/this.rightProgress.scaleX,2*this.height),this.runAnimGlare(),void this.runEmitter()}if(this.stopAnimGlare(),this.stopEmitter(),this.progressBarFull=!1,t<n)return this.leftProgress.setVisible(!0),e<=.01?(this.leftProgress.setCrop(0,0,5,2*this.height),void(this.rightWhiteProgress.x+=2)):void this.leftProgress.setCrop(0,0,t/this.leftProgress.scaleX,2*this.height);if(t>n+i){this.leftProgress.setVisible(!0),this.midProgress.setVisible(!0),this.midProgress.setCrop(0,0,i/this.midProgress.scaleX,2*this.height),this.rightProgress.setVisible(!0),this.rightProgress.setCrop(0,0,(t-(n+i-2))/this.rightProgress.scaleX,2*this.height),this.rightWhiteProgress.x=this.rightProgress.x-2;var l=this.rightProgress.x-2;this.sparkling.run(2,50,l,this.leftBg.y-.5,4,4)}else this.leftProgress.setVisible(!0),this.leftProgress.setCrop(0,0,n/this.leftProgress.scaleX,2*this.height),this.midProgress.setVisible(!0),this.midProgress.setCrop(0,0,(t-n)/this.midProgress.scaleX,2*this.height)},n.runSparklingEmitZone=function(e){this.scene.tweens.add({targets:this.sparkling.emitZone,x:e,duration:400})},t}(Phaser.GameObjects.Container),op=Wa.Z.GAMEPLAY,cp=op.KEY,lp=op.FRAME,hp=function(e){function t(t){var n;return(n=e.call(this,t,cp,lp.BUTTON_WOOD_SMALL)||this).button.setWorldSize(55,48),n.setName("Setting"),n.createIcon(),n}return(0,o.Z)(t,e),t.prototype.createIcon=function(){var e=this.scene.make.image({key:cp,frame:lp.ICON_SETTING});e.setWorldSize(30,30),this.add(e),Phaser.Display.Align.In.Center(e,this,1,-1.5)},t}(ja.Z),up=hp,dp=Wa.Z.GAMEPLAY,pp=dp.KEY,gp=dp.FRAME,fp=Wa.Z.DEFAULT,mp=fp.KEY,vp=fp.FRAME,Ep=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n.buttonSetting=void 0,n.bestScoreBlock=void 0,n.mainScoreBlock=void 0,n.myScoreBlock=void 0,n.opponentScoreBlock=void 0,n.iconBattle=void 0,n.progressBar=void 0,n.textScore=void 0,n.scene=t,n.setSize(n.scene.gameZone.width,0),n.createIconBattle(),n.createBestScoreBlock(),n.createSettingButton(),n.createMainScoreBlock(),n.createMyScoreBlock(),n.createOpponentScoreBlock(),n.createProgressBar(),n.addTextScore(),t.add.existing((0,Ba.Z)(n)),n}(0,o.Z)(t,e);var n=t.prototype;return n.createBestScoreBlock=function(){this.bestScoreBlock=new Nd(this.scene),this.add(this.bestScoreBlock)},n.createMainScoreBlock=function(){this.mainScoreBlock=new Hd(this.scene),this.add(this.mainScoreBlock)},n.createMyScoreBlock=function(){this.myScoreBlock=new jd(this.scene),this.myScoreBlock.setVisible(!1),this.add(this.myScoreBlock)},n.createOpponentScoreBlock=function(){this.opponentScoreBlock=new Jd(this.scene),this.opponentScoreBlock.setVisible(!1),this.add(this.opponentScoreBlock)},n.createSettingButton=function(){this.buttonSetting=new up(this.scene),this.add(this.buttonSetting),Phaser.Display.Align.In.Center(this.buttonSetting,this,132,51)},n.createProgressBar=function(){this.progressBar=new rp(this.scene,315,13),this.add(this.progressBar)},n.createIconBattle=function(){this.iconBattle=this.scene.make.image({key:pp,frame:gp.ICON_BATTLE}),this.iconBattle.setWorldSize(30,27),this.iconBattle.setVisible(!1),this.add(this.iconBattle)},n.getScore=function(){return this.mainScoreBlock.score},n.showItemSingleMode=function(){this.mainScoreBlock.setVisible(!0),this.myScoreBlock.setVisible(!1),this.opponentScoreBlock.setVisible(!1),this.iconBattle.setVisible(!1),this.bestScoreBlock.setVisible(!0),this.textScore.setVisible(!1),this.scene.world.isLandscape()&&(this.textScore.setVisible(!0),this.progressBar.setPosition(0,0))},n.showItemPlayWithFriendsMode=function(){this.mainScoreBlock.setVisible(!1),this.opponentScoreBlock.setVisible(!0),this.myScoreBlock.setVisible(!0),this.iconBattle.setVisible(!0),this.scene.world.isLandscape()&&(this.bestScoreBlock.setVisible(!1),this.textScore.setVisible(!1),this.progressBar.setPosition(0,-33))},n.updateUIPortrait=function(){this.buttonSetting.setVisible(!0),this.textScore.setVisible(!1),this.myScoreBlock.setPosition(-52,35),this.opponentScoreBlock.setPosition(52,35),this.iconBattle.setPosition(0,24),this.updateUIMainScorePortrait(),this.mainScoreBlock.setPosition(0,52),this.bestScoreBlock.setPosition(-132,-12.5),this.progressBar.setPosition(-19,92)},n.updateUIMainScorePortrait=function(){this.mainScoreBlock.background.setTexture(pp),this.mainScoreBlock.background.setFrame(gp.BG_MAIN_SCORE),this.mainScoreBlock.background.setWorldSize(187,48)},n.addTextScore=function(){var e=this.scene.world.getPixelRatio();this.textScore=this.scene.make.image({key:mp,frame:vp.TEXT_SCORE});var t=this.textScore,n=t.width,i=t.height;this.textScore.setVisible(!1),this.textScore.setWorldSize(n/e,i/e),this.add(this.textScore)},n.updateUILandscape=function(){this.calcSize(),this.buttonSetting.setVisible(!1),this.textScore.setVisible(!0),this.textScore.setPosition(-this.width/2,8),this.opponentScoreBlock.setPosition(100,0).setScale(.8),this.myScoreBlock.setPosition(-100,0).setScale(.8),this.iconBattle.setPosition(0,0),this.updateUIMainScore(),this.updateUIProgress(),this.updateUIBestScore()},n.calcSize=function(){this.setSize(575,110)},n.updateUIMainScore=function(){this.mainScoreBlock.background.setTexture(mp),this.mainScoreBlock.background.setFrame(vp.PANEL_SCORE),this.mainScoreBlock.background.setWorldSize(86.5,49.5),this.mainScoreBlock.setPosition(-this.width/2,56)},n.updateUIProgress=function(){this.progressBar.setPosition(0,0),this.opponentScoreBlock.visible&&this.progressBar.setPosition(0,-33)},n.updateUIBestScore=function(){this.bestScoreBlock.setPosition(-this.width/2,63)},t}(Phaser.GameObjects.Container),Sp=Ep,Ap=function(){function e(){}return e.create=function(e,t,n){var i;switch(n.type){case Ds:case Ms:case Ns:i=new hd(e,t,n);break;case Bs:case Gs:case Fs:case Us:i=new dd(e,t,n);break;case Hs:case Zs:case Ys:i=new gd(e,t,n);break;case Ws:i=new md(e,t,n);break;case zs:i=new Cd(e,t,n);break;case Qs:i=new Od(e,t,n);break;case Ks:i=new Td(e,t,n);break;case js:case Xs:case Js:case qs:i=new Ed(e,t,n);break;case Vs:i=new Ad(e,t,n);break;default:i=new gd(e,t,n)}return i},e}(),yp=Ap,Tp=Wa.Z.GAMEPLAY_32,Ip=Tp.KEY,Cp=Tp.FRAME,bp=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n.tweenToEnableMaxFps=void 0,n.cellSize=void 0,n.canCaptureLines=void 0,n.allPieces=[],n.allPiecesGroup=[],n.piecesActive=[],n.positionPiece=void 0,n.scene=t,n.canCaptureLines={isCapture:!1,direction:"",minLine:5},n.setSizeAndPositionPiece(),t.add.existing((0,Ba.Z)(n)),n}(0,o.Z)(t,e);var n=t.prototype;return n.setSizeAndPositionPiece=function(){this.scene.world.isLandscape()?this.setSize(101,300):this.setSize(375,140);var e=this.scene.gameZone,t=e.width,n=(e.height/2-176-27+100)/-2;this.positionPiece=[{x:-t/3,y:n},{x:0,y:n},{x:t/3,y:n}]},n.init=function(){this.initCellSize(),this.createAllPieces(),this.createAllPiecesGroup(),this.createTweenToEnableMaxFps()},n.registerEvents=function(){},n.handleResize=function(){this.initCellSize(),this.resetAllPieces();for(var e=0;e<this.piecesActive.length;e++){var t=this.allPieces[this.piecesActive[e].position],n=this.positionPiece[e],i=n.x,a=n.y;t.updatePosition(i,a),t.updateWrapPiecePosition()}},n.resetAllPieces=function(){for(var e=0;e<this.allPieces.length;e++){var t=this.allPieces[e];t.resetPiece(),t.updateSize(),t.listenEvents()}},n.initCellSize=function(){var e=this.scene.layoutManager.objects.main;this.scene.world.isLandscape()?this.cellSize=35*e.board.cellSize/100:this.cellSize=41*e.board.cellSize/100},n.createTweenToEnableMaxFps=function(){this.tweenToEnableMaxFps=this.scene.add.tween({targets:[],duration:300,loop:-1,paused:!0})},n.playTweenToEnableMaxFps=function(){this.tweenToEnableMaxFps.play()},n.stopTweenToEnableMaxFps=function(){this.tweenToEnableMaxFps.stop()},n.getDirectionsByType=function(e){if([Hs,Zs,Ys].some((function(t){return t===e})))return[];var t=[];switch(e){case Ds:case Ms:case Ns:t=[vs,fs,ms,Es];break;case Bs:case Gs:case Fs:case Us:t=[ps,gs];break;case Ws:t=[vs,fs,ms,Es];break;case Vs:t=[Ss,As,ys,Ts];break;case zs:case Qs:t=[vs,fs,ms,Es];break;case Ks:t=[];break;case js:case Xs:case Js:case qs:t=[fs,ms]}return t},n.createAllPieces=function(){for(var e=this.cellSize,t=[],n=0;n<$s.length;n++){var i=this.getDirectionsByType($s[n]);if(i.length<=0)t.push({type:$s[n]});else{for(var a=0;a<i.length;a++)t.push({type:$s[n],direction:i[a]});if(Ds===$s[n])for(var r=0;r<i.length;r++)t.push({type:$s[n],direction:i[r],isReverse:!0})}}for(var o=0;o<t.length;o++){var c=(0,s.Z)({},t[o],{texture:Ip,frame:Cp.GEM,x:Math.floor(this.x),y:Math.floor(this.y),width:Math.floor(e/2),height:Math.floor(e/2),cellLength:Math.floor(e/2),parentHeight:this.height,wrap:{x:Math.floor(this.x),y:Math.floor(this.y),width:Math.floor(e/2),height:Math.floor(e/2)}}),l=yp.create(this.scene,this,c);l.hide(),this.add(l),this.allPieces.push(l)}},n.createAllPiecesGroup=function(){for(var e=0;e<this.allPieces.length;e++){var t=this.allPieces[e];this.allPiecesGroup[t.type]||(this.allPiecesGroup[t.type]=[]),this.allPiecesGroup[t.type].push(e)}},n.randomPieces=function(){var e=this;this.scene.game.updateFps(yu.Z.max);for(var t=this.buildPieceRates(!1),n=[],i=function(){var i=Math.floor(Math.random()*t.length),a=t[i];if(!e.allPiecesGroup[a])return 1;var s=Math.floor(Math.random()*e.allPiecesGroup[a].length),r=e.allPiecesGroup[a][s],o=[Fs,Us].some((function(e){return e===a}));if(e.canCaptureLines.isCapture&&o){for(var c=0;c<e.allPiecesGroup[a].length;c++){var l=e.allPiecesGroup[a][c];if(e.allPieces[l]&&e.allPieces[l].direction===e.canCaptureLines.direction){r=l;break}}t=e.buildPieceRates(!1)}n.some((function(e){return e.index===r}))||n.push({index:r,type:a})};n.length<3;)i();for(var a=[],s=0;s<n.length;s++){var r=n[s].index,o=this.allPieces[r];a.push({position:r,texture:Ip,frame:Cp.GEM,type:o.type,direction:o.direction,isReverse:o.isReverse})}this.piecesActive=a},n.buildPieceRates=function(e){void 0===e&&(e=!0);for(var t=this.scene.layoutManager.objects.main,n=[],i=0;i<er.length;i++)n.push((0,s.Z)({},er[i]));if(e){var a=t.board.dataBoard,r=5;if(this.canCaptureLines=t.board.canCaptureLines(a,r),this.canCaptureLines.isCapture)for(var o=0;o<n.length;o++)n[o].type===Us&&(n[o].rate=8);else if(r=4,this.canCaptureLines=t.board.canCaptureLines(a,r),this.canCaptureLines.isCapture)for(var c=0;c<n.length;c++)n[c].type===Fs&&(n[c].rate=8)}for(var l=[],h=0;h<n.length;h++)for(var u=n[h],d=u.type,p=u.rate,g=0;g<p;g++)l.push(d);return l},n.drawPieces=function(){for(var e=0;e<this.piecesActive.length;e++){var t=this.allPieces[this.piecesActive[e].position],n=this.positionPiece[e],i=n.x,a=n.y;t.updatePosition(i,a),t.updateWrapPiecePosition(),t.setIndex(e),t.drawPiece(),this.allPieces[this.piecesActive[e].position]=t}},n.removeActivePiece=function(e){this.piecesActive[e].used=!0},n.existPiecesActive=function(){var e,t=Ae()(e=this.piecesActive).call(e,(function(e){return!e.used}));return t&&t.length>0},n.showNewPieces=function(){for(var e=0;e<this.allPieces.length;e++)this.allPieces[e].reset();this.randomPieces(),this.setActivePieces(),this.drawPieces()},n.calculatePieceInfo=function(){for(var e=0,t=0,n=this.cellSize,i=0;i<this.piecesActive.length;i++){var a=this.allPieces[this.piecesActive[i].position].data;e+=a[0].length,a.length>t&&(t=a.length)}return{cellLength:n/2,cols:e}},n.setActivePieces=function(){for(var e=this.scene.layoutManager.objects.main.board.dataBoard,t=0;t<this.piecesActive.length;t++){var n=this.piecesActive[t].position,i=ju(e,this.allPieces[n]);this.allPieces[n].setCanMove(i)}},n.getPiecesByFen=function(e){var t=[],n=e.split(" ");if(n.length<2)throw new Error("Invalid fen");for(var i=Fa()(n).call(n,2),a=0;a<i.length;a++){var s,r;if("l"!==Du()(s=i[a]).call(s)){var o=td(Du()(r=i[a]).call(r));t.push(o)}}return t},n.getFenByPieces=function(){for(var e="l",t=0;t<this.piecesActive.length;t++){var n=this.piecesActive[t],i=n.type,a=n.direction,s=n.isReverse,r=n.frame;if(!n.used){var o=Qu(i);a&&""!==a&&(o+="-"+Qu(a)),s&&(o+="-r"),e+=" "+o+","+Qu(r)}}return e},n.clearPieces=function(){for(var e=0;e<this.piecesActive.length;e++){var t=this.piecesActive[e].position;this.allPieces[t].hide()}this.piecesActive=[]},n.showAvailablePieces=function(e){if(e&&!(e.length<=0)){for(var t=[],n=0;n<e.length;n++)for(var i=e[n],a=i.type,s=i.direction,r=i.isReverse,o=i.frame,c=0;c<this.allPieces.length;c++){var l=this.allPieces[c];if(a===l.type&&s===l.direction&&r===l.isReverse){t.push({position:c,texture:Ip,frame:o,type:l.type,direction:l.direction,isReverse:l.isReverse});break}}this.piecesActive=t,this.setActivePieces(),this.drawPieces()}},n.debuggerNextPieces=function(){for(var e=0;e<this.piecesActive.length;e++)this.removeActivePiece(e);for(var t=0;t<this.allPieces.length;t++)this.allPieces[t].wrapPiece.setVisible(!1);this.showNewPieces()},t}(Phaser.GameObjects.Container),Op=Wa.Z.GAMEPLAY,Pp=Op.KEY,Rp=Op.FRAME,wp=function(e){function t(t){var n;return(n=e.call(this,t,Pp,Rp.BUTTON_WOOD_SMALL)||this).button.setWorldSize(55,48),n.setName("Setting"),n.createIcon(),n}return(0,o.Z)(t,e),t.prototype.createIcon=function(){var e=this.scene.make.image({key:Pp,frame:Rp.ICON_SETTING});e.setWorldSize(30,30),this.add(e),Phaser.Display.Align.In.Center(e,this,1,-1.5)},t}(ja.Z),xp=wp,kp=Wa.Z.DEFAULT,_p=kp.KEY,Lp=kp.FRAME,Dp=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n.pieces=void 0,n.debugButton=void 0,n.textExist=void 0,n.background=void 0,n.buttonSetting=void 0,n.panelNextBlock=void 0,n.textNextBlock=void 0,n.scene=t,n.setSize(n.scene.gameZone.width,76),t.add.existing((0,Ba.Z)(n)),n.init(),n}(0,o.Z)(t,e);var n=t.prototype;return n.init=function(){this.createDebugButton(),this.addBgPieces(),this.createTextNextBlock(),this.createSettingButton(),this.createPieces()},n.createBackground=function(){this.background=this.scene.make.image({key:_p,frame:Lp.FOOTER});var e=this.scene.gameZone.width;this.background.setWorldSize(e,this.height),this.add(this.background),Phaser.Display.Align.In.BottomCenter(this.background,this)},n.createPieces=function(){this.pieces=new bp(this.scene),this.add(this.pieces),this.pieces.setPosition(0,30)},n.createDebugButton=function(){GameCore.Utils.Valid.isDebugger()&&this.createDebugButtonNextPieces()},n.createDebugButtonNextPieces=function(){this.debugButton=new ja.Z(this.scene,_p,Lp.BUTTON_DARK_BLUE,100,30),this.debugButton.setName("Debug");var e=this.scene.make.bitmapText({font:Xa.Z.PRIMARY.KEY,size:this.scene.fontSize(30),text:"Next pieces",origin:{x:.5,y:.5}});this.debugButton.add([e]),this.debugButton.onClick=this.clickButtonNextPieces.bind(this),this.add(this.debugButton),Phaser.Display.Align.In.BottomLeft(this.debugButton,this),this.textExist=this.scene.make.bitmapText({font:Xa.Z.PRIMARY.KEY,size:this.scene.fontSize(30),text:"Exist",origin:{x:.5,y:.5}}),this.debugButton.add([this.textExist]),Phaser.Display.Align.In.Center(this.textExist,this,80,0)},n.clickButtonNextPieces=function(){this.scene.layoutManager.objects.footer.pieces.debuggerNextPieces()},n.updateUIPortrait=function(){var e,t;this.pieces.setSizeAndPositionPiece(),this.pieces.setPosition(0,30),this.panelNextBlock.setVisible(!1),this.textNextBlock.setVisible(!1),this.buttonSetting.setVisible(!1),null==(e=this.debugButton)||e.setVisible(!0),null==(t=this.textExist)||t.setVisible(!0),this.pieces.handleResize()},n.updateUILandscape=function(){var e,t;this.pieces.setSizeAndPositionPiece(),this.initPosition(),this.scene.tutorialManager.isRunning()||this.buttonSetting.setVisible(!0),this.panelNextBlock.setVisible(!0),this.textNextBlock.setVisible(!0),null==(e=this.debugButton)||e.setVisible(!1),null==(t=this.textExist)||t.setVisible(!1);var n=this.scene.ads.getBannerHeight();Phaser.Display.Align.In.BottomLeft(this.buttonSetting,this.scene.gameZone,-5,-n/2-5),this.pieces.handleResize()},n.initPosition=function(){var e=this.panelNextBlock.displayHeight/3;this.pieces.positionPiece=[{x:0,y:-e},{x:0,y:0},{x:0,y:e}],this.pieces.setPosition(0,0)},n.updateBg=function(){this.background.setVisible(!1)},n.addBgPieces=function(){this.panelNextBlock=this.scene.make.image({key:_p,frame:Lp.PANEL_NEXT_BLOCK}),this.panelNextBlock.setVisible(!1),this.panelNextBlock.setWorldSize(100.5,300),this.add(this.panelNextBlock)},n.createTextNextBlock=function(){var e=this.scene.world.getPixelRatio();this.textNextBlock=this.scene.make.image({key:_p,frame:Lp.TEXT_NEXT_BLOCK});var t=this.textNextBlock,n=t.width,i=t.height;this.textNextBlock.setVisible(!1),this.textNextBlock.setWorldSize(n/e,i/e),this.add(this.textNextBlock),Phaser.Display.Align.In.TopCenter(this.textNextBlock,this.panelNextBlock,0,42)},n.createSettingButton=function(){this.buttonSetting=new xp(this.scene),this.buttonSetting.setWorldSize(52,45),this.buttonSetting.setVisible(!1),this.buttonSetting.onClick=this.handleClickSetting.bind(this),this.buttonSetting.setDepth(Va.Z.BUTTON)},n.handleClickSetting=function(){this.scene.handlePauseGame()},t}(Phaser.GameObjects.Container),Mp=Dp,Np=Wa.Z.GAMEPLAY_32.FRAME,Bp=[""+Np.BLOCK_GRADIENT_PREFIX+10,""+Np.BLOCK_GRADIENT_PREFIX+9],Gp=[],Fp=1;Fp<=10;Fp++)Gp.push(""+Np.BLOCK_GRADIENT_PREFIX+Fp);for(var Up=function(){var e=GameCore.Utils.Device,t=window.navigator.vibrate;return e.isAndroid()&&"function"===typeof t||e.isMobileWeb()&&"function"===typeof t},Hp=(function(){var e=(0,r.Z)(l().mark((function e(t){var n,i,a,s,o;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=Math.round(t/80),i=0,a=function(){var e=(0,r.Z)(l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,FBInstant.performHapticFeedbackAsync();case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0);case 8:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(){return e.apply(this,arguments)}}();case 3:if(!(i<n)){e.next=11;break}return s=a(),o=(0,So.qZ)(80),i+=1,e.next=9,C().all([s,o]);case 9:e.next=3;break;case 11:case"end":return e.stop()}}),e)})))}(),function(e){window.navigator.vibrate(0),window.navigator.vibrate(e)}),Zp=function(e){try{if(!Up())return!1;var t=GameCore.Utils.Device;(t.isAndroid()||t.isMobileWeb())&&Hp(e)}catch(n){}},Yp=function(){function e(e){this.angle=void 0,this.scene=void 0,this.scaleUpTween=void 0,this.breakingTween=void 0,this.breakingDelay=0,this.captureCells=void 0,this.timerEventRemoveCaptureCells=void 0,this.scene=e}var t=e.prototype;return t.init=function(){this.createTweenBreaking()},t.handleShowEffect=function(e){var t=this;e&&0!==e.length&&(this.removeCaptureCell(),this.captureCells=e,this.setValueCaptureCell(),this.breakingTween.resetTweenData(!1),this.breakingTween.restart(),this.timerEventRemoveCaptureCells&&this.timerEventRemoveCaptureCells.remove(),this.timerEventRemoveCaptureCells=this.scene.time.addEvent({delay:500,callback:function(){t.breakingTween.isPlaying()||t.removeCaptureCell()}}))},t.onCaptureCellComplete=function(){var e=this.scene.layoutManager.objects.main;if(this.captureCells&&e&&e.board)for(var t=e.board.dataBoard,n=0;n<this.captureCells.length;n++){var i=this.captureCells[n],a=i.x;t[i.y][a].cell.resetImageBreak()}},t.removeCaptureCell=function(){var e=this.scene.layoutManager.objects.main.board.dataBoard;if(this.captureCells)for(var t=0;t<this.captureCells.length;t++){var n=this.captureCells[t],i=n.x;e[n.y][i].cell.resetImageBreak()}},t.setValueCaptureCell=function(){for(var e=this.scene.layoutManager.objects.main.board.dataBoard,t=Math.round(68.25),n=0;n<this.captureCells.length;n++){var i=Phaser.Math.Between(50,t),a=Phaser.Math.Between(82,98)*Math.PI/180,s=Phaser.Math.Between(3,10)/1e3,r=this.captureCells[n],o=r.x,c=e[r.y][o].cell;c.maxScale0=Phaser.Math.FloatBetween(2.5,4)/10,c.imageBreak.setFrame(Wa.Z.GAMEPLAY_32.FRAME.GEM),c.imageBreak.setVisible(!0),c.v0=i,c.alpha0=a,c.scaleRate0=s}},t.createTweenBreaking=function(){var e=this,t=this.scene.layoutManager.objects.main;this.breakingTween=this.scene.tweens.addCounter({from:0,to:1900,onUpdate:function(n){if(e.captureCells)for(var i=t.board.dataBoard,a=0;a<e.captureCells.length;a++){e.angle=Phaser.Math.Between(-15,15);var s=e.captureCells[a],r=s.x,o=i[s.y][r].cell,c=o.imageBreak,l=o.maxScale0,h=o.alpha0<1.57?1:-1,u=.016*n.getValue(),d=Ou(o.v0,o.alpha0,u),p=Pu(o.v0,o.alpha0,u);c.setVisible(!0),c.x=d,c.y=-p,c.rotation+=.04*h,c.scale>l?c.scale-=o.scaleRate0:c.scale=l}},onComplete:function(){e.onCaptureCellComplete()},delay:this.breakingDelay,duration:2500}).stop()},e}(),Vp=Yp,Wp=Wa.Z.GAMEPLAY,zp=Wp.KEY,Kp=Wp.FRAME,jp=Wa.Z.GAMEPLAY_32,Xp=jp.KEY,Jp=jp.FRAME,qp=Wa.Z.DEFAULT.FRAME,Qp=GameCore.Configs.Board,$p=Qp.cols,eg=Qp.rows,tg=GameCore.Configs.Gameplay.VibrateValue,ng=function(e){function t(t,n,i){var a;return(a=e.call(this,t)||this).scene=void 0,a.suggestCells=[],a.pX=void 0,a.pY=void 0,a.borderLeftSize=4,a.borderTopSize=4,a.cellSize=void 0,a.cellPadding=void 0,a.diceSize=void 0,a.dataBoard=[],a.cellsHighlight=[],a.cellSharking=[],a.boardFrame=void 0,a.woodenEffect=void 0,a.offsetY=-27,a.canCaptureLines=function(e,t){void 0===t&&(t=5);for(var n=e.length,i=e[0].length,a=[],r=[],o=[],c=0;c<n;c++){for(var l=0,h={x:-1,y:-1},u=0;u<i;u++)0===c&&(o[u]={count:0,x:-1,y:-1}),1===e[c][u].value?(o[u].count++,l++):(h.x=u,h.y=c,o[u].x=u,o[u].y=c);if(l===i-1&&r.push((0,s.Z)({row:c},h)),c===n-1)for(var d=0;d<i;d++)o[d].count===n-1&&a.push((0,s.Z)({col:d},o[d]))}if(r.length>=t)for(var p=0,g={x:-1,y:-1},f=0;f<r.length;f++)if(0!==f){if(r[f].x===g.x&&r[f].y===g.y+1?(g.x=r[f].x,g.y=r[f].y,p++):p=1,p>=t)return{isCapture:!0,direction:"vertical",minLine:t}}else g.x=r[f].x,g.y=r[f].y,p++;if(a.length>=t)for(var m=0,v={x:-1,y:-1},E=0;E<a.length;E++)if(0!==E){if(a[E].x===v.x+1&&a[E].y===v.y?(v.x=a[E].x,v.y=a[E].y,m++):m=1,m>=t)return{isCapture:!0,direction:"horizontal",minLine:t}}else v.x=a[E].x,v.y=a[E].y,m++;return{isCapture:!1,direction:"",minLine:t}},a.scene=t,a.setSize(n,i),a.woodenEffect=new Vp(a.scene),a.init(),a}(0,o.Z)(t,e);var n=t.prototype;return n.init=function(){this.createBoard(),this.calcCellLength(),this.initDataBoard()},n.createBoard=function(){this.boardFrame=this.scene.make.image({key:zp,frame:Kp.BOARD}),this.boardFrame.setWorldSize(this.width,this.height),this.add(this.boardFrame)},n.calcCellLength=function(){this.cellPadding=1,this.cellSize=(this.width-2*this.borderLeftSize-this.cellPadding*($p+1))/$p},n.initDataBoard=function(){for(var e=0;e<eg;e++){this.dataBoard[e]=[];for(var t=0;t<$p;t++){var n=(t-($p-1)/2)*(this.cellSize+this.cellPadding)-1,i=(e-(eg-1)/2)*(this.cellSize+this.cellPadding)-1,a={x:n,y:i,width:this.cellSize,height:this.cellSize,texture:Xp,frame:Jp.GEM_TRANSPARENT,depth:Va.Z.PIECE-.1,padding:this.cellPadding,isWoodenEffect:!0},s=new _u(this.scene,a);this.add(s),this.dataBoard[e][t]={x:n,y:i,width:this.cellSize,height:this.cellSize,frame:Jp.GEM_TRANSPARENT,value:0,cell:s}}}},n.handleTweenStartMission=function(){for(var e=this,t=100,n=0;n<eg;n++)for(var i=function(){var i=e.dataBoard[n][a].cell,s=0;s=4==n&&4==a?t:n>=3&&n<=5&&a>=3&&a<=5?200:n>=2&&n<=6&&a>=2&&a<=6?300:n>=1&&n<=7&&a>=1&&a<=7?400:500,e.scene.time.delayedCall(s,(function(){i.playTweenStartMission()}))},a=0;a<$p;a++)i()},n.handleHighlight=function(e,t){this.cellsHighlight=e;for(var n=0;n<e.length;n++){var i=e[n],a=i.x,s=i.y;if(this.dataBoard[s]&&this.dataBoard[s][a]&&0===this.dataBoard[s][a].value){var r=this.dataBoard[s][a].cell;this.dataBoard[s][a].frame=Jp.GEM,r.setFrameImageCell(Jp.GEM),r.setAlphaImageCell(.3)}}this.canCaptureCells(e,t)},n.handleCapturePiece=function(e){var t=this;try{if(!e||e.length<=0)throw Xu=0,new Error("Invalid Capture");for(var n=300,i=0,a=Vu(this.dataBoard),s=Wu(this.dataBoard),r=Fu(),o=function(){var o=e[c],l=o.x,h=o.y,u=t.dataBoard[h][l].cell,d=0,p=0,g=0;if(a.length>0&&s.length>0){var f=0,m=0;i=n/$p,-1!==wa()(a).call(a,h)&&-1===wa()(s).call(s,l)&&(f=i*l,m=0,p=wa()(a).call(a,h)),-1===wa()(a).call(a,h)&&-1!==wa()(s).call(s,l)&&(f=0,m=i*h,p=wa()(s).call(s,l)),-1!==wa()(a).call(a,h)&&-1!==wa()(s).call(s,l)&&(f=i*l,m=i*h,p=Math.max(wa()(s).call(s,l),wa()(a).call(a,h),0)),-1===wa()(a).call(a,h)&&-1===wa()(s).call(s,l)&&(f=i*l,m=i*h),d=Math.max(f,m,0)}else if(s.length>0)d=(i=n/$p)*h,p=wa()(s).call(s,l),g=h;else if(a.length>0)d=(i=n/eg)*l,p=wa()(a).call(a,h),g=l;else{i=100;var v=e[0].x;d=i*(l-v),p=0}u.hideImageHighlight(),t.scene.time.delayedCall(d,(function(){var e="";r>2&&(s.length>=3||a.length>=3)?(e=Gp[g]||Gp[0],u.imageBreak.setFrame(e)):(e=Bp[p]||Bp[0],u.imageBreak.setFrame(e)),u.playTweenScaleDown(),0==t.dataBoard[h][l].value&&u.setFrameImageCell(Jp.GEM_TRANSPARENT)})),t.dataBoard[h][l].frame=Jp.GEM_TRANSPARENT,t.dataBoard[h][l].value=0},c=0;c<e.length;c++)o()}catch(l){}},n.checkPositionCellOnCaptureCell=function(e,t){var n=Ae()(t).call(t,(function(t){return t.x===e.x&&t.y===e.y}));return n&&n.length>0},n.handlePraise=function(e,t){if(t&&0!==t.length){var n=Ju(),i=Fu();i>1&&(n=18*Gu+10*(qu()-1));for(var a=[],s=0;s<e.length;s++){var r=e[s];this.checkPositionCellOnCaptureCell(r,t)&&a.push(this.dataBoard[r.y][r.x])}if(0!==a.length){for(var o=a[0].cell.getWorldPosition(),c=o.x,l=0,h=o.y,u=0,d=0;d<a.length;d++){var p=a[d].cell.getWorldPosition();p.x<c&&(c=p.x),p.x>l&&(l=p.x),p.y<h&&(h=p.y),p.y>u&&(u=p.y)}var g=c+(l-c)/2,f=h+(u-h)/2;this.scene.layoutManager.objects.main.praise.handlePraise(g,f,n,i),this.handleStreakBreak(g,f),this.playEatSound(i)}}},n.handleStreakBreak=function(e,t){if(!this.scene.tutorialManager.isRunning()){var n=Fu(),i=qu()-1,a=this.scene.gameZone.width;if(e-75<0&&(e=75),e+75>a&&(e=a-75),!(i<2||n>=2)){var s=i>6?6:i,r=this.getVibrateByLevel(s);this.scene.player.getPlayerSettings().vibrate&&Zp(r),this.playEatSound(s),this.scene.effectManager.streakBreak.setTextStreak(i),this.scene.effectManager.streakBreak.setBgFrame(qp.BG_STREAK),this.scene.effectManager.streakBreak.playAnim(e,t-20)}}},n.getVibrateByLevel=function(e){return tg[e]||0},n.playEatSound=function(e){switch(this.scene.audio.playSound(Ka.Z.EAT_BLOCK,{volume:1}),e){case 1:default:break;case 2:this.scene.audio.playSound(Ka.Z.GOOD);break;case 3:this.scene.audio.playSound(Ka.Z.COOL);break;case 4:case 5:case 6:this.scene.audio.playSound(Ka.Z.EXCELLENT)}},n.handleRemoveHighlight=function(){try{if(!this.cellsHighlight)return;for(var e=0;e<this.cellsHighlight.length;e++){var t=this.cellsHighlight[e],n=t.x,i=t.y;if(this.dataBoard[i]&&this.dataBoard[i][n]&&0===this.dataBoard[i][n].value){var a=this.dataBoard[i][n].cell;this.dataBoard[i][n].frame=Jp.GEM_TRANSPARENT,a.setFrameImageCell(Jp.GEM_TRANSPARENT),a.setAlphaImageCell(1)}}this.cellsHighlight=[]}catch(s){}},n.canCaptureCells=function(e,t){for(var n=this,i=this.dataBoard,a=[],r=0;r<i.length;r++){a[r]=[];for(var o=0;o<i[r].length;o++)a[r][o]=(0,s.Z)({},i[r][o])}for(var c=0;c<e.length;c++){var l=e[c],h=l.x;a[l.y][h].value=1}this.removeAnimCanCaptureCells(a,e);var u=Uu(a,e);if(!u||u.length<=0)return!1;for(var d=function(){var t=u[p],i=t.x,a=t.y;e.some((function(e){return e.x===i&&e.y===a}))||n.cellSharking.push((0,s.Z)({},u[p]))},p=0;p<u.length;p++)d();for(var g=0;g<this.cellSharking.length;g++){var f=this.cellSharking[g],m=f.x,v=f.y,E=this.dataBoard[v][m].cell;E.isHighlight()||E.showImageHighlight()}t(Vu(a),Wu(a),Yu(a,e),e)},n.removeAnimCanCaptureCells=function(e,t){var n=this;if(0!==this.cellSharking.length){for(var i=Vu(e),a=Wu(e),s=Yu(e,t),r=function(){var e=n.cellSharking[o],t=e.x,r=e.y,c=n.dataBoard[r][t].cell;if(-1!==wa()(i).call(i,r)||-1!==wa()(a).call(a,t)||s.some((function(e){return e.x===t&&e.y===r})))return 1;c.hideImageHighlight()},o=0;o<this.cellSharking.length;o++)r();this.cellSharking=[]}},n.removeAllCanCaptureCells=function(){if(0!==this.cellSharking.length){for(var e=0;e<this.cellSharking.length;e++){var t=this.cellSharking[e],n=t.x,i=t.y;this.dataBoard[i][n].cell.hideImageHighlight()}this.cellSharking=[]}},n.handleSuggestMove=function(e){try{this.suggestCells=e;for(var t=0;t<e.length;t++){var n=e[t],i=n.x,a=n.y,s=this.dataBoard[a][i].cell;s.setFrameImageCell(Jp.GEM_HIGHT_LIGHT),s.setAlphaImageCell(1)}}catch(r){}},n.handleRemoveSuggestMove=function(){try{for(var e=0;e<this.suggestCells.length;e++){var t=this.suggestCells[e],n=t.x,i=t.y,a=this.dataBoard[i][n].cell;this.isCellHighlight(a)||a.setFrameImageCell(Jp.GEM_TRANSPARENT)}this.suggestCells=[]}catch(s){}},n.handleMove=function(e,t){try{for(var n=0;n<e.length;n++){var i=e[n],a=i.x,s=i.y;if(this.dataBoard[s]&&this.dataBoard[s][a]){this.dataBoard[s][a].frame=Jp.GEM,this.dataBoard[s][a].value=1;var r=this.dataBoard[s][a].cell;r.setFrameImageCell(Jp.GEM),r.setAlphaImageCell(1)}}var o=Uu(this.dataBoard,e);this.handleCapturePiece(o),this.checkIsGameOver()&&this.scene.setIsGameOver(!0),this.handlePraise(e,o),t&&t(),this.handleResetFrameBoard(),this.scene.updateMatchData(),this.handleGameOver()}catch(c){}},n.handleResetFrameBoard=function(){for(var e=0;e<eg;e++)for(var t=0;t<$p;t++)if(this.dataBoard[e]&&this.dataBoard[e][t]&&1===this.dataBoard[e][t].value){var n=this.dataBoard[e][t],a=n.frame,s=n.cell;s.visible||(0,i.tO)(new Error("Cell is invisible")),s.getFrameImageCell()!==a&&(0,i.tO)(new Error("Cell is frame not true")),s.setFrameImageCell(a)}},n.checkIsGameOver=function(){for(var e=this.scene.layoutManager.objects.footer,t=[],n=e.pieces.piecesActive,i=e.pieces.allPieces,a=0;a<n.length;a++){var s=n[a],r=s.position;if(!s.used){var o=i[r];t.push({data:o.data,type:o.type,direction:o.direction,isReverse:o.isReverse,frame:o.frame})}}return!!zu(this.dataBoard,t)},n.handleGameOver=function(){this.checkIsGameOver()&&(this.scene.disableInput(),this.runAnimationGameOver())},n.runAnimationGameOver=function(){var e=this;try{this.scene.audio.playSound(Ka.Z.BOARD_GAME_OVER);for(var t=[],n=function(n){for(var i=function(i){if(e.dataBoard[n]&&e.dataBoard[n][i]&&1===e.dataBoard[n][i].value){var a=Math.floor(100*(n+1));t.push({delay:a,x:i,y:n}),e.scene.time.delayedCall(a,(function(){e.dataBoard[n][i].cell.playAnimImageGameOver()}))}},a=0;a<$p;a++)i(a)},i=0;i<eg;i++)n(i);this.scene.time.addEvent({delay:t[t.length-1].delay+300,callback:function(){e.scene.handleRequestFinishGame()}})}catch(a){}},n.rescue=function(){for(var e=0;e<this.dataBoard.length;e++)for(var t=0;t<this.dataBoard[e].length;t++)if(this.dataBoard[e]){var n=this.dataBoard[e][t];n&&1===n.value&&(this.dataBoard[e][t].cell.setFrameImageCell(Jp.GEM),this.dataBoard[e][t].cell.resetImageGameOver())}this.handleUseBomb()},n.hasPieceL5=function(){var e=this.scene.layoutManager.objects.footer.pieces.piecesActive;return Ae()(e).call(e,(function(e){return e.type===Us})).length>0},n.hasPieceCross5=function(){var e=this.scene.layoutManager.objects.footer.pieces.piecesActive;return Ae()(e).call(e,(function(e){return e.type===qs})).length>0},n.handleUseBomb=function(){try{var e=this.hasPieceL5(),t=this.hasPieceCross5(),n=Math.floor(Math.random()*hs.length),i=hs[n];e&&(i=us[n]),t&&(i=ds[n]);for(var a=[],s=i.minRow;s<i.minRow+i.rows;s++)for(var r=i.minCol;r<i.minCol+i.cols;r++)this.dataBoard[s][r].frame!==Jp.GEM_TRANSPARENT&&a.push({x:r,y:s});for(var o=0;o<a.length;o++){var c=a[o],l=c.x,h=c.y,u=this.dataBoard[h][l];u.frame=Jp.GEM_TRANSPARENT,u.value=0,u.cell.setFrameImageCell(Jp.GEM_TRANSPARENT)}this.woodenEffect.handleShowEffect(a),this.scene.layoutManager.objects.footer.pieces.setActivePieces(),this.scene.updateMatchData()}catch(d){}},n.getBoardByFen=function(e){try{var t=[],n=e.split(" ");if(n.length<2)throw new Error("Invalid fen");for(var i=n[0].split("/"),a=i.length,s=0;s<a;s++){t[s]=[];for(var r=ed(i[s]),o=0;o<r.length;o++)t[s][o]=r[o]}return t}catch(c){return this.clearBoard(),this.dataBoard}},n.getFenByBoard=function(){for(var e="",t=0;t<eg;t++){for(var n=0,i="",a=0;a<$p;a++){if(0===this.dataBoard[t][a].value&&n++,1===this.dataBoard[t][a].value)n>0&&(i+=n>=eg?"x":""+n,n=0),i+=""+Qu(this.dataBoard[t][a].frame);a===this.dataBoard[t].length-1&&n>0&&(i+=n>=eg?"x":""+n)}e+=t===this.dataBoard.length-1?""+i:i+"/"}return e},n.startGame=function(e){if(e)for(var t=0;t<e.length;t++)for(var n=0;n<e[t].length;n++){var i=e[t][n],a=i.value,s=i.frame,r=this.dataBoard[t][n];1===a&&(r.value=1,r.frame=s,r.cell.setFrameImageCell(Jp.GEM))}},n.clearBoard=function(){for(var e=0;e<eg;e++)for(var t=0;t<$p;t++){var n=this.dataBoard[e][t];n.value=0,n.frame=Jp.GEM_TRANSPARENT,n.cell.reset(),n.cell.setFrameImageCell(Jp.GEM_TRANSPARENT),n.cell.resetImageGameOver()}},n.isCellHighlight=function(e){var t,n=Ae()(t=this.cellsHighlight).call(t,(function(t){return t.x===e.x&&t.y&&e.y}));return!!(n&&n.length>0)},t}(Phaser.GameObjects.Container),ig=GameCore.Configs.Gameplay.VibrateValue,ag=Wa.Z.EFFECTS,sg=ag.KEY,rg=ag.FRAME,og=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n.listScore=[],n.score=void 0,n.startX=void 0,n.startY=void 0,n.scoreText=void 0,n.tweenShowScoreText=void 0,n.tweenHideScoreText=void 0,n.tweenShowPraiseFrame=void 0,n.tweenHidePraiseFrame=void 0,n.praiseFrame=void 0,n.praiseScoreText=void 0,n.particle=void 0,n.emitter=void 0,n.scene=t,t.add.existing((0,Ba.Z)(n)),n.setVisible(!1).setAlpha(0),n.init(),n}(0,o.Z)(t,e);var n=t.prototype;return n.init=function(){this.createScoreText(),this.createPraiseFrame(),this.createPraiseScoreText(),this.createParticle(),this.createEmitter()},n.createParticle=function(){this.particle=this.scene.add.particles(sg),this.particle.setDepth(Va.Z.ON_TOP+1)},n.createEmitter=function(){this.emitter=this.particle.createEmitter({x:0,y:0,scale:{start:.05,end:.2},speed:{min:20,max:70},lifespan:{min:500,max:1e3},quantity:20,on:!1,tint:[16441092,16422659],frame:rg.FX_STAR,delay:350})},n.createScoreText=function(){this.scoreText=this.scene.make.bitmapText({font:Xa.Z.NUMBER_LIGHT.KEY,size:this.scene.fontSize(50),text:"+0",origin:{x:.5,y:.5}}),this.scoreText.setScale(0).setAlpha(0),this.scoreText.setDepth(Va.Z.ON_TOP),this.scoreText.setVisible(!1)},n.createTweenScoreText=function(){var e,t=this,n=this.scene.storage.getState(),i=Ec(n),a=this.scene.layoutManager.objects.header.mainScoreBlock.scoreText.getWorldPosition(),s=a.x,r=a.y;if(wa()(e=[va,ma,Ea]).call(e,i)>=0){var o=this.scene.layoutManager.objects.header.myScoreBlock.textScore.getWorldPosition(),c=o.x,l=o.y;s=c,r=l}this.tweenShowScoreText=this.scene.tweens.add({paused:!0,targets:this.scoreText,scale:{from:0,to:1},alpha:{from:0,to:1},duration:300,onComplete:function(){t.tweenHideScoreText=t.scene.tweens.add({targets:t.scoreText,scale:{from:1,to:.5},alpha:{from:1,to:.5},x:s,y:r,delay:600,duration:210,onComplete:function(){t.scoreText.setVisible(!1),t.scoreText.setAlpha(0),t.scoreText.setScale(0),t.scene.handleAddScoreAnim(t.score||0)}})}})},n.playAnimShowScoreText=function(){var e=this.scene.layoutManager.objects.header;if(this.tweenHideScoreText&&this.tweenHideScoreText.isPlaying()){var t;this.tweenHideScoreText.stop(),this.scoreText.setPosition(this.startX,this.startY);var n=this.scene.storage.getState(),i=Ec(n),a=0;i===fa?(a=e.mainScoreBlock.score,e.mainScoreBlock.setScore(a+(this.score||0)),e.mainScoreBlock.setScoreText(a+(this.score||0))):wa()(t=[va,ma,Ea]).call(t,i)>=0&&(a=e.myScoreBlock.score,e.myScoreBlock.setScore(a+(this.score||0)),e.myScoreBlock.setScoreText(a+(this.score||0)))}this.score=this.listScore.shift()||0,this.scene.handleUpdateScore(this.score),this.scoreText.setScale(0).setAlpha(0).setVisible(!0),this.tweenShowScoreText.play()},n.createPraiseFrame=function(){this.praiseFrame=this.scene.make.image({x:0,y:0,key:sg}),this.praiseFrame.setScale(0),this.praiseFrame.setAlpha(0),this.praiseFrame.setDepth(Va.Z.ON_TOP),this.praiseFrame.setVisible(!1)},n.createTweenPraiseFrame=function(){var e=this;if(!this.tweenShowPraiseFrame||!this.tweenHidePraiseFrame){var t=this.praiseFrame.scale;this.tweenShowPraiseFrame=this.scene.tweens.add({paused:!0,targets:this.praiseFrame,scale:{from:0,to:t},alpha:{from:0,to:1},duration:300,delay:100,ease:Phaser.Math.Easing.Back.Out,onComplete:function(){e.tweenHidePraiseFrame.play()}}),this.tweenHidePraiseFrame=this.scene.tweens.add({paused:!0,targets:this.praiseFrame,scale:{from:t,to:0},alpha:{from:1,to:0},duration:300,delay:1e3,onComplete:function(){e.praiseFrame.setScale(0),e.praiseFrame.setAlpha(0),e.praiseFrame.setVisible(!1)}})}},n.playAnimShowPraiseFrame=function(){this.createTweenPraiseFrame(),(this.tweenShowPraiseFrame.isPlaying()||this.tweenHidePraiseFrame.isPlaying())&&(this.tweenShowPraiseFrame.resetTweenData(!1),this.tweenHidePraiseFrame.resetTweenData(!1)),this.praiseFrame.setScale(0).setAlpha(0).setVisible(!0),this.tweenShowPraiseFrame.play()},n.createPraiseScoreText=function(){this.praiseScoreText=this.scene.make.bitmapText({font:Xa.Z.PRIMARY.KEY,size:this.scene.fontSize(30),origin:{x:.5,y:.5}}),this.praiseScoreText.setDepth(Va.Z.ON_TOP),this.add(this.praiseScoreText),Phaser.Display.Align.In.Center(this.praiseScoreText,this,0,20)},n.handlePraise=function(e,t,n,i){this.startX=e,this.startY=t+15,this.listScore.push(n);var a=e-10;this.scoreText.setPosition(a,t+15),this.scoreText.setText("+"+n),a-this.scoreText.fontSize/2<0&&(a+=this.scoreText.fontSize/2,this.scoreText.setPosition(a,t+15)),this.playAnimShowScoreText(),this.handlePraiseFrameText(e,t,i);var s=this.getVibrateByLevel(i);this.scene.player.getPlayerSettings().vibrate&&Zp(s),i<=1||this.changeExplode(a,t,i)},n.getVibrateByLevel=function(e){return ig[e]||0},n.changeExplode=function(e,t,n){var i=this.getExplodeByLevel(n);i&&(this.emitter.setScale({start:.05*i.scale,end:.2*i.scale}),this.emitter.setSpeed({min:30*i.speed,max:80*i.speed}),this.emitter.setQuantity(20*i.quantity)),this.emitter.explode(20*i.quantity,e,t)},n.handlePraiseFrameText=function(e,t,n){var i=this.scene.world.getPixelRatio(),a=this.getMainFrameByLevel(n);if(a){switch(a){case rg.TEXT_COOL:case rg.TEXT_GOOD:case rg.TEXT_EXCELLENT:}this.praiseFrame.setFrame(a);var s=this.praiseFrame,r=s.width/i,o=s.height/i;this.praiseFrame.setWorldSize(r,o);var c=this.praiseFrame.displayWidth,l=e,h=this.scene.gameZone.width;l=e-c/2<0?c/2+5:e+c/2>h?h-c/2-5:e,this.praiseFrame.setPosition(l,t-40),this.playAnimShowPraiseFrame()}},n.getExplodeByLevel=function(e){return Ls[e-1]||Ls[0]||null},n.getMainFrameByLevel=function(e){if(e>6)return Wa.Z.EFFECTS.FRAME.TEXT_EXCELLENT;var t=_s[e-1]||_s[0];return Phaser.Utils.Array.GetRandom(t.frames)},n.reset=function(){this.createTweenScoreText()},t}(Phaser.GameObjects.Container),cg=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n.board=void 0,n.praise=void 0,n.scene=t,t.add.existing((0,Ba.Z)(n)),n.init(),n}(0,o.Z)(t,e);var n=t.prototype;return n.init=function(){this.createBoard(),this.createPraise()},n.createBoard=function(){this.board=new ng(this.scene,354,352),this.add(this.board)},n.createPraise=function(){this.praise=new og(this.scene)},t}(Phaser.GameObjects.Container),lg=cg,hg=function(){function e(e){this.scene=void 0,this.group=void 0,this.scene=e,this.createGroup()}var t=e.prototype;return t.getAll=function(){return this.group.getChildren()},t.createGroup=function(){this.group=this.scene.add.group()},e}(),ug=hg,dg=function(e){function t(t){var n;return(n=e.call(this,t)||this).header=void 0,n.main=void 0,n.footer=void 0,n.scene=t,n.createObjects(),n}(0,o.Z)(t,e);var n=t.prototype;return n.createObjects=function(){this.createMain(),this.createHeader(),this.createFooter()},n.createHeader=function(){this.header=new Sp(this.scene),this.group.add(this.header)},n.createMain=function(){this.main=new lg(this.scene),this.group.add(this.main)},n.createFooter=function(){this.footer=new Mp(this.scene),this.group.add(this.footer)},t}(ug),pg=dg,gg=function(){function e(e){this.scene=void 0,this.objects=void 0,this.allUI=void 0,this.groups=void 0,this.scene=e,this.objects=null,this.createGroups()}var t=e.prototype;return t.setUIObjects=function(e){this.objects=e,this.allUI.addMultiple(this.objects.getAll())},t.createGroups=function(){this.groups={},this.allUI=this.scene.add.group(),this.groups.allUI=this.allUI},t.killAllUI=function(){this.allUI.killGroup()},t.reviveAllUI=function(){this.allUI.reviveGroup()},e}(),fg=gg,mg=function(e){function t(t){var n;return(n=e.call(this,t)||this).objects=void 0,n.guideUI=void 0,n.objects=null,n}(0,o.Z)(t,e);var n=t.prototype;return n.alignUI=function(){if(null!==this.objects){var e=this.scene.gameZone;this.objects.header.setSize(e.width,0),Phaser.Display.Align.In.TopCenter(this.objects.header,e),Phaser.Display.Align.In.Center(this.objects.main,e,0,0),Phaser.Display.Align.In.BottomCenter(this.objects.footer,e,0,30),this.objects.header.updateUIPortrait(),this.objects.footer.updateUIPortrait()}},n.createGroups=function(){e.prototype.createGroups.call(this),this.guideUI=this.scene.add.group(),this.groups.guideUI=this.guideUI},n.setUIObjects=function(t){e.prototype.setUIObjects.call(this,t),this.addUIObjectsToGroups()},n.addUIObjectsToGroups=function(){null!==this.objects&&this.addObjectForGuideUI()},n.addObjectForGuideUI=function(){this.objects},t}(fg),vg=mg,Eg=function(e){function t(){return e.apply(this,arguments)||this}return(0,o.Z)(t,e),t.prototype.alignUI=function(){if(null!==this.objects){var e=this.scene.gameZone;Phaser.Display.Align.In.Center(this.objects.header,e,0,-195),Phaser.Display.Align.In.Center(this.objects.main,e,0,20),Phaser.Display.Align.In.Center(this.objects.footer,e,300,0),this.objects.header.updateUILandscape(),this.objects.footer.updateUILandscape()}},t}(vg),Sg=Eg,Ag=n(464),yg=qa.STATUS,Tg=function(e){function t(t){var n;return(n=e.call(this,t)||this).layout=void 0,n.objects=void 0,n.changeLayout=function(){n.scene.world.getResizeEventData().isLayoutChanged?(n.createLayouts(),n.layout.setUIObjects(n.objects),n.layout.alignUI()):n.layout.alignUI()},n.scene=t,n.createObjects(),n.createLayouts(),n.registerEvents(),n}(0,o.Z)(t,e);var n=t.prototype;return n.registerEvents=function(){this.scene.events.on(Ag.Z.LAYOUT_UPDATE,this.changeLayout)},n.init=function(){this.initUILogic(),this.layout.alignUI(),this.setState(yg.READY)},n.start=function(){this.isRunning()||(this.updateUIState(),this.setState(yg.RUNNING))},n.stop=function(){this.isRunning()&&this.setState(yg.STOPPED)},t}(es),Ig=Tg,Cg=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=t,n}(0,o.Z)(t,e);var n=t.prototype;return n.createObjects=function(){this.objects=new pg(this.scene)},n.createLayouts=function(){this.scene.world.isLandscape()?this.layout=new Sg(this.scene):this.layout=new vg(this.scene),this.layout.setUIObjects(this.objects)},n.initUILogic=function(){this.objects.main.board.woodenEffect.init(),this.objects.footer.pieces.init()},n.updateUIState=function(){},t}(Ig),bg=Cg,Og=n(627),Pg=Wa.Z.DEFAULT,Rg=Pg.KEY,wg=Pg.FRAME,xg=function(e){function t(t){var n;return(n=e.call(this,t,Rg,wg.BUTTON_MINOR)||this).button.setWorldSize(64,55),n.setName("Home"),n.createIcon(),n}return(0,o.Z)(t,e),t.prototype.createIcon=function(){var e=this.scene.make.image({key:Rg,frame:wg.ICON_HOME});e.setWorldSize(31,28),this.add(e),Phaser.Display.Align.In.Center(e,this,0,-2)},t}(ja.Z),kg=xg,_g=Wa.Z.DEFAULT,Lg=_g.KEY,Dg=_g.FRAME,Mg=function(e){function t(t){var n;return(n=e.call(this,t,Lg,Dg.BUTTON_MINOR)||this).button.setWorldSize(64,55),n.setName("Share"),n.createIcon(),n}return(0,o.Z)(t,e),t.prototype.createIcon=function(){var e=this.scene.make.image({key:Lg,frame:Dg.ICON_SHARE});e.setWorldSize(24,31),this.add(e),Phaser.Display.Align.In.Center(e,this,0,-2)},t}(ja.Z),Ng=Mg,Bg=Wa.Z.DEFAULT,Gg=Bg.KEY,Fg=Bg.FRAME,Ug=function(e){function t(t){var n;return(n=e.call(this,t,Gg,Fg.BUTTON_DARK_BLUE_BIG)||this).button.setWorldSize(120,55),n.setName("PlayWithFriends"),n.createIcon(),n.createText(),n}(0,o.Z)(t,e);var n=t.prototype;return n.createIcon=function(){var e=this.scene.make.image({key:Gg,frame:Fg.ICON_SWORD_BLUE});e.setWorldSize(22,20),this.add(e),Phaser.Display.Align.In.Center(e,this,-40)},n.createText=function(){var e=this.scene.make.image({key:Gg,frame:Fg.TEXT_PLAY_WITH_BLUE});e.setWorldSize(159.5,15.5),this.add(e),Phaser.Display.Align.In.Center(e,this,12)},t}(ja.Z),Hg=Ug,Zg=Wa.Z.DEFAULT,Yg=Zg.KEY,Vg=Zg.FRAME,Wg=function(e){function t(t){var n;return(n=e.call(this,t,Yg,Vg.BUTTON_GREEN_BIG)||this).icon=void 0,n.text=void 0,n.button.setWorldSize(120,55),n.setName("Play"),n.createIcon(),n.createText(),n.alignItem(),n}(0,o.Z)(t,e);var n=t.prototype;return n.createIcon=function(){this.icon=this.scene.make.image({key:Yg,frame:Vg.ICON_I_PLAY}),this.icon.setWorldSize(22,27),this.add(this.icon),Phaser.Display.Align.In.Center(this.icon,this,-35,-2)},n.createText=function(){var e=this.scene.world.getPixelRatio();this.text=this.scene.make.image({key:Yg,frame:Vg.TEXT_PLAY});var t=this.text,n=t.width,i=t.height;this.text.setWorldSize(n/e,i/e),this.add(this.text),Phaser.Display.Align.In.Center(this.text,this,15,-2)},n.alignItem=function(){var e=this.width,t=this.icon.width,n=this.text.width,i=e/2,a=(e-10-t-n)/2+t/2,s=a+10+t/2+n/2;Phaser.Display.Align.In.Center(this.icon,this,a-i,-2),Phaser.Display.Align.In.Center(this.text,this,s-i,-2)},t}(ja.Z),zg=Wg,Kg=Wa.Z.DEFAULT,jg=Kg.KEY,Xg=Kg.FRAME,Jg=function(e){function t(t){var n;return(n=e.call(this,t)||this).popup=void 0,n.avatarMe=void 0,n.textScoreMe=void 0,n.avatarOpponent=void 0,n.textScoreOpponent=void 0,n.title=void 0,n.titleFrame=void 0,n.contents=void 0,n.popupShowUpAnimation=void 0,n.contentShowUpAnimation=void 0,n.popupFadeOutAnimation=void 0,n.myInfoBlock=void 0,n.tweenMyInfoBlock=void 0,n.opponentInfoBlock=void 0,n.tweenOpponentInfoBlock=void 0,n.icon=void 0,n.tweenIcon=void 0,n.iconCrown=void 0,n.tweenIconCrown=void 0,n.playWithFriendsButton=void 0,n.playButton=void 0,n.homeButton=void 0,n.shareButton=void 0,n.buttonClose=void 0,n.clickPlayWithFriends=function(){n.runCloseAnimation(),n.popupFadeOutAnimation.next((0,r.Z)(l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.scene.storage.dispatch(kh());case 2:Vc.emit(vo.REPLAY);case 3:case"end":return e.stop()}}),e)}))))},n.clickPlay=function(){n.runCloseAnimation(),n.popupFadeOutAnimation.next((0,r.Z)(l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.scene.storage.dispatch(Oh());case 2:Vc.emit(vo.REPLAY);case 3:case"end":return e.stop()}}),e)}))))},n.clickShare=function(){var e=n.scene.storage.getState();Ec(e)!==Ea?n.scene.storage.dispatch(function(){var e=(0,r.Z)(l().mark((function e(t,n){var a,s,r,o,c,h,u,d,p,g,f,m;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=window.game,s=a.player,r=a.analytics,o=a.facebook,c=a.globalScene,h=a.lang,e.prev=1,c.screen.open(za.o4.NOTIFY_SCREEN,{message:h.Text.LOADING,loading:!0}),u=n(),e.next=6,fl(u);case 6:return d=e.sent,hl(d),p=s.getPlayer(),g=p.playerId,f=p.name,m=p.photo,e.next=12,o.shareAsync({text:h.Text.SHARE_GAME_RESULTS,intent:"SHARE",image:d||"",data:{playerId:g,playerName:f,playerPhoto:m,type:ha}});case 12:r.event(Ot._.SHARE,{share_content_type:"MatchResult",success:!0}),e.next=19;break;case 15:e.prev=15,e.t0=e.catch(1),r.event(Ot._.SHARE,{share_content_type:"MatchResult",success:!1}),(0,i.tO)(e.t0);case 19:return e.prev=19,c.screen.close(za.o4.NOTIFY_SCREEN),e.finish(19);case 22:case"end":return e.stop()}}),e,null,[[1,15,19,22]])})));return function(t,n){return e.apply(this,arguments)}}()):n.scene.storage.dispatch(vl())},n.handleShareBestScore=function(){n.scene.storage.dispatch(ul())},n.createPopup(),n.createPopupContent(),n}(0,o.Z)(t,e);var n=t.prototype;return n.createPopup=function(){this.popup=new as.Z(this.scene,0,0,290,290,{forceHeightTop:54}),this.add(this.popup)},n.createPopupContent=function(){this.createTitle(),this.createContentBackground(),this.createMyInfoBlock(),this.createOpponentInfoBlock(),this.createIcon(),this.createIconCrown(),this.createButtons(),this.popup.add([this.title]),this.contents=this.scene.make.group({}),this.contents.addMultiple([this.homeButton,this.playWithFriendsButton,this.playButton,this.shareButton])},n.updateButtons=function(){try{this.checkExistConnectedPlayerId()?(this.playWithFriendsButton.setVisible(!0),this.playButton.setVisible(!1)):(this.playWithFriendsButton.setVisible(!1),this.playButton.setVisible(!0))}catch(e){}},n.createTitle=function(){this.title=this.scene.add.container(),this.titleFrame=this.scene.make.image({key:jg,frame:Xg.TEXT_WAITING_OPPONENT}),this.titleFrame.setWorldSize(238,25),Phaser.Display.Align.In.Center(this.titleFrame,this.title,0,10),this.buttonClose=new ja.Z(this.scene,jg,Xg.BUTTON_CLOSE,35,35),this.buttonClose.setName("Close"),Phaser.Display.Align.In.RightCenter(this.buttonClose,this.title,155,-12),this.title.add([this.titleFrame,this.buttonClose]),this.popup.add(this.title),Phaser.Display.Align.In.TopCenter(this.title,this.popup,0,-2)},n.createContentBackground=function(){var e=this.scene.make.image({key:jg,frame:Xg.POPUP_CONTENT_BACKGROUND});e.setWorldSize(263,140),this.popup.add(e),Phaser.Display.Align.In.Center(e,this.popup,0,-30)},n.createButtons=function(){this.createButtonHome(),this.createButtonPlayWithFriend(),this.createButtonPlay(),this.createButtonShare()},n.createButtonHome=function(){this.homeButton=new kg(this.scene),this.homeButton.onClick=this.clickHome.bind(this),this.popup.add(this.homeButton),Phaser.Display.Align.In.Center(this.homeButton,this.popup,-100,80)},n.clickHome=function(){this.scene.scene.switch(Pa.Co.DASHBOARD_SCENE)},n.createButtonPlayWithFriend=function(){this.playWithFriendsButton=new Hg(this.scene),this.playWithFriendsButton.onClick=this.clickPlayWithFriends,this.playWithFriendsButton.setVisible(!1),this.popup.add(this.playWithFriendsButton),Phaser.Display.Align.In.Center(this.playWithFriendsButton,this.popup,0,80)},n.createButtonPlay=function(){this.playButton=new zg(this.scene),this.playButton.onClick=this.clickPlay,this.playButton.setVisible(!1),this.popup.add(this.playButton),Phaser.Display.Align.In.Center(this.playButton,this.popup,0,80)},n.createButtonShare=function(){this.shareButton=new Ng(this.scene),this.shareButton.onClick=this.clickShare,this.popup.add(this.shareButton),Phaser.Display.Align.In.Center(this.shareButton,this.popup,100,80)},n.createMyInfoBlock=function(){this.myInfoBlock=this.scene.add.container(),this.avatarMe=new dc(this.scene,{key:jg,frame:Xg.AVATAR_BORDER_BIG,background:Xg.AVATAR_BACKGROUND,width:87,height:87,borderWidth:8}),this.myInfoBlock.add(this.avatarMe),Phaser.Display.Align.In.Center(this.avatarMe,this.myInfoBlock,0,0);var e=this.scene.make.image({key:jg,frame:Xg.SCORE_PANEL_DARK});e.setWorldSize(95,26),this.myInfoBlock.add(e),Phaser.Display.Align.In.BottomCenter(e,this.avatarMe,0,10),this.textScoreMe=this.scene.make.bitmapText({font:Xa.Z.NUMBER_LIGHT.KEY,size:this.scene.fontSize(42),text:"0",origin:{x:.5,y:.5}}),this.myInfoBlock.add(this.textScoreMe),Phaser.Display.Align.In.Center(this.textScoreMe,e),this.popup.add(this.myInfoBlock),Phaser.Display.Align.In.Center(this.myInfoBlock,this.popup,-72,-38),this.myInfoBlock.setAlpha(0),this.tweenMyInfoBlock=this.scene.tweens.add({targets:this.myInfoBlock,paused:!0,duration:200,delay:400,scale:{from:1.5,to:1},alpha:{from:0,to:1},ease:Phaser.Math.Easing.Bounce.Out})},n.createOpponentInfoBlock=function(){this.opponentInfoBlock=this.scene.add.container(),this.avatarOpponent=new dc(this.scene,{key:jg,frame:Xg.AVATAR_BORDER_BIG,background:Xg.AVATAR_BACKGROUND,width:87,height:87,borderWidth:8}),this.opponentInfoBlock.add(this.avatarOpponent),Phaser.Display.Align.In.Center(this.avatarOpponent,this.opponentInfoBlock,0,0);var e=this.scene.make.image({key:jg,frame:Xg.SCORE_PANEL_DARK});e.setWorldSize(95,26),this.opponentInfoBlock.add(e),Phaser.Display.Align.In.BottomCenter(e,this.avatarOpponent,0,10),this.textScoreOpponent=this.scene.make.bitmapText({font:Xa.Z.NUMBER_LIGHT.KEY,size:this.scene.fontSize(42),text:"0",origin:{x:.5,y:.5}}),this.opponentInfoBlock.add(this.textScoreOpponent),Phaser.Display.Align.In.Center(this.textScoreOpponent,e),this.popup.add(this.opponentInfoBlock),Phaser.Display.Align.In.Center(this.opponentInfoBlock,this.popup,72,-38),this.opponentInfoBlock.setAlpha(0),this.tweenOpponentInfoBlock=this.scene.tweens.add({targets:this.opponentInfoBlock,paused:!0,duration:200,delay:500,scale:{from:1.5,to:1},alpha:{from:0,to:1},ease:Phaser.Math.Easing.Bounce.Out})},n.createIcon=function(){this.icon=this.scene.make.image({key:jg,frame:Xg.TEXT_VS}),this.icon.setWorldSize(86,16.5);var e=this.icon.scale;this.popup.add(this.icon),Phaser.Display.Align.In.Center(this.icon,this.popup,0,-30),this.icon.setAlpha(0),this.tweenIcon=this.scene.tweens.add({targets:this.icon,paused:!0,duration:200,delay:300,scale:{from:1.5,to:e},alpha:{from:0,to:1},ease:"Power1"})},n.createIconCrown=function(){this.iconCrown=this.scene.make.image({key:jg,frame:Xg.ICON_CROWN_BIG}),this.iconCrown.setWorldSize(50,46),this.iconCrown.setVisible(!1);var e=this.iconCrown.scale;this.popup.add(this.iconCrown),this.iconCrown.setScale(0),this.tweenIconCrown=this.scene.tweens.add({targets:this.iconCrown,paused:!0,duration:200,delay:300,scale:{from:1.5,to:e},alpha:{from:0,to:1},ease:"Power1"})},n.runCloseAnimation=function(){this.runPopupExitsAnimation(0,200)},n.runPopupExitsAnimation=function(e,t){var n,i=this;this.popupFadeOutAnimation||(this.popupFadeOutAnimation=new ts.Z({targets:[this.popup],delay:e,duration:t,props:{scale:0},onComplete:function(){i.popup.setY(0)}})),null==(n=this.popupFadeOutAnimation)||n.play()},n.runOpenAnimation=function(){this.scene.audio.playSound(Ka.Z.POPUP_SHOW),this.runPopupEntrancesAnimation(0,300),this.runPopupContentEntrancesAnimation(200,300)},n.runPopupEntrancesAnimation=function(e,t){if(!this.popupShowUpAnimation){var n=this.popup.scale;this.popupShowUpAnimation=new is.Z({targets:[this.popup],delay:e,duration:t,props:{y:0,alpha:{start:1,from:1,to:1},scale:{start:0,from:0,to:n}}})}this.popupShowUpAnimation.play()},n.runPopupContentEntrancesAnimation=function(e,t){this.contentShowUpAnimation||(this.contentShowUpAnimation=new ns.Z({targets:this.contents.getChildren(),duration:t,delay:this.scene.tweens.stagger(80,{start:e}),props:{alpha:{start:0,from:0,to:1}}})),this.contentShowUpAnimation.play()},n.updateInfo=function(){var e=this.scene.world.getPixelRatio(),t=this.scene.storage.getState(),n=Fc(t),i=this.scene.player.getPlayer().playerId,a=el(t).playerId,s=nl(t,{playerId:i}),r=il(t,{opponentId:a}),o=(n[i]||{}).score,c=void 0===o?0:o,l=(n[a]||{}).score,h=void 0===l?0:l;return this.textScoreMe.setText(String(c)),this.textScoreOpponent.setText(String(h)),s&&r?c===h?(this.titleFrame.setFrame(Xg.TEXT_DRAW),this.titleFrame.setWorldSize(this.titleFrame.width/e,this.titleFrame.width/e),void this.scene.audio.playSound(Ka.Z.DRAW)):c>h?(this.titleFrame.setFrame(Xg.TEXT_WIN),this.titleFrame.setWorldSize(this.titleFrame.width/e,this.titleFrame.width/e),this.iconCrown.setVisible(!0),Phaser.Display.Align.In.Center(this.iconCrown,this.avatarMe,-110,-80),void this.scene.audio.playSound(Ka.Z.WIN)):c<h?(this.titleFrame.setFrame(Xg.TEXT_LOSE),this.titleFrame.setWorldSize(this.titleFrame.width/e,this.titleFrame.width/e),this.iconCrown.setVisible(!0),Phaser.Display.Align.In.Center(this.iconCrown,this.avatarOpponent,35,-80),void this.scene.audio.playSound(Ka.Z.LOSE)):void 0:(this.titleFrame.setFrame(Xg.TEXT_WAITING_OPPONENT),this.titleFrame.setWorldSize(this.titleFrame.width/e,this.titleFrame.width/e),void this.scene.audio.playSound(Ka.Z.WAIT_OPPONENT))},n.loadAvatars=function(){var e=this.scene.storage.getState(),t=this.scene.player.getPlayer(),n=t.photo,i=t.playerId,a=el(e),s=a.playerId,r=a.photo;this.avatarMe.loadPhoto(i,n,5),this.avatarOpponent.loadPhoto(s,r,5)},n.runAnim=function(){this.icon.setVisible(!0),this.myInfoBlock.setVisible(!0),this.opponentInfoBlock.setVisible(!0),this.iconCrown.setScale(0),this.tweenIconCrown.play(),this.tweenIcon.play(),this.tweenMyInfoBlock.play(),this.tweenOpponentInfoBlock.play()},n.checkExistConnectedPlayerId=function(){var e=this,t=this.scene.player.getConnectedPlayerIds(20,0);return!(Ae()(t).call(t,(function(t){return t!==e.scene.player.getPlayerId()})).length<=Sh.length)},t}(Phaser.GameObjects.Container),qg=Jg,Qg={targets:[],yoyo:!0,duration:120,ease:Phaser.Math.Easing.Circular.Out,props:{scale:{from:1,to:1.3}}},$g=function(e){function t(t){return e.call(this,Qg,t)||this}return(0,o.Z)(t,e),t}(ic.Z),ef=Wa.Z.DEFAULT,tf=ef.KEY,nf=ef.FRAME,af=function(e){function t(t){var n;return(n=e.call(this,t,tf,nf.BUTTON_MINOR)||this).button.setWorldSize(62,53),n.setName("JourneyIcon"),n.createIcon(),n}return(0,o.Z)(t,e),t.prototype.createIcon=function(){var e=this.scene.make.image({key:tf,frame:nf.ICON_BROWN_JOURNEY});e.setWorldSize(28,26),this.add(e),Phaser.Display.Align.In.Center(e,this)},t}(ja.Z),sf=af,rf=Wa.Z.DEFAULT,of=rf.KEY,cf=rf.FRAME,lf=function(e){function t(t){var n;return(n=e.call(this,t)||this).popup=void 0,n.title=void 0,n.contents=void 0,n.scoreText=void 0,n.bestScoreText=void 0,n.tweenScoreText=void 0,n.popupShowUpAnimation=void 0,n.contentShowUpAnimation=void 0,n.popupFadeOutAnimation=void 0,n.scoreBlock=void 0,n.bestScoreBlock=void 0,n.playWithFriendsButton=void 0,n.playButton=void 0,n.homeButton=void 0,n.journeyButton=void 0,n.bestScore=void 0,n.currentScore=void 0,n.payload=void 0,n.buttonClose=void 0,n.counterAnimation=void 0,n.scoreAnimation=void 0,n.clickPlayWithFriends=function(){n.runCloseAnimation(),n.popupFadeOutAnimation.next((0,r.Z)(l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.scene.storage.dispatch(kh());case 2:Vc.emit(vo.REPLAY);case 3:case"end":return e.stop()}}),e)}))))},n.clickPlay=function(){n.runCloseAnimation(),n.scene.storage.dispatch(Oh()),Vc.emit(vo.REPLAY)},n.clickJourney1=function(){n.scene.scene.switch(Pa.Co.LEVEL_SCENE)},n.initScore(),n.scene=t,n.createPopup(),n.createPopupContent(),n.createScoreAnimation(),n}(0,o.Z)(t,e);var n=t.prototype;return n.createPopup=function(){this.popup=new as.Z(this.scene,0,0,290,290,{forceHeightTop:54}),this.add(this.popup)},n.createPopupContent=function(){this.createTitle(),this.createScoreBlock(),this.createBestScoreBlock(),this.createButtons(),this.contents=this.scene.make.group({}),this.contents.addMultiple([this.homeButton,this.playWithFriendsButton,this.playButton,this.journeyButton])},n.updateButtons=function(){try{this.playWithFriendsButton.setVisible(!1),this.playButton.setVisible(!0)}catch(e){}},n.createTitle=function(){this.title=this.scene.add.container();var e=this.scene.world.getPixelRatio(),t=this.scene.make.image({key:of,frame:cf.TEXT_YOUR_SCORE});t.setWorldSize(t.width/e,t.height/e),Phaser.Display.Align.In.Center(t,this.title,0,10),this.buttonClose=new ja.Z(this.scene,of,cf.BUTTON_CLOSE,35,35),this.buttonClose.setName("Close"),Phaser.Display.Align.In.RightCenter(this.buttonClose,this.title,155,-12),this.title.add([t,this.buttonClose]),this.popup.add(this.title),Phaser.Display.Align.In.TopCenter(this.title,this.popup,0,-2)},n.createScoreBlock=function(){this.scoreBlock=this.scene.add.container();var e=this.scene.make.image({key:of,frame:cf.SCORE_PANEL});e.setWorldSize(263,70),this.scoreBlock.add(e),this.scoreText=this.scene.make.bitmapText({font:Xa.Z.PRIMARY.KEY,size:this.scene.fontSize(85),text:"0",origin:{x:.5,y:.5}}),this.scoreBlock.add(this.scoreText),Phaser.Display.Align.In.Center(this.scoreText,this.scoreBlock,0,4),this.popup.add(this.scoreBlock),Phaser.Display.Align.In.TopCenter(this.scoreBlock,this.popup,0,-78)},n.createBestScoreBlock=function(){this.bestScoreBlock=this.scene.add.container();var e=this.scene.make.image({key:of,frame:cf.BEST_SCORE_FRAME_LONG});e.setWorldSize(193,77),this.bestScoreBlock.add(e),this.bestScoreText=this.scene.make.bitmapText({font:Xa.Z.NUMBER_LIGHT.KEY,size:this.scene.fontSize(44),text:"0",origin:{x:.5,y:.5}}),this.bestScoreBlock.add(this.bestScoreText),Phaser.Display.Align.In.Center(this.bestScoreText,this.bestScoreBlock,0,16),this.popup.add(this.bestScoreBlock),Phaser.Display.Align.In.Center(this.bestScoreBlock,this.scoreBlock,0,65)},n.createButtons=function(){this.createButtonHome(),this.createButtonPlayWithFriend(),this.createButtonPlay(),this.createButtonJourney()},n.createButtonHome=function(){this.homeButton=new kg(this.scene),this.homeButton.onClick=this.clickHome.bind(this),this.popup.add(this.homeButton),Phaser.Display.Align.In.Center(this.homeButton,this.bestScoreBlock,-100,80)},n.clickHome=function(){this.scene.scene.switch(Pa.Co.DASHBOARD_SCENE)},n.createButtonPlayWithFriend=function(){this.playWithFriendsButton=new Hg(this.scene),this.playWithFriendsButton.onClick=this.clickPlayWithFriends,this.playWithFriendsButton.setVisible(!1),this.popup.add(this.playWithFriendsButton),Phaser.Display.Align.In.Center(this.playWithFriendsButton,this.bestScoreBlock,0,80)},n.createButtonPlay=function(){this.playButton=new zg(this.scene),this.playButton.onClick=this.clickPlay,this.playButton.setVisible(!1),this.popup.add(this.playButton),Phaser.Display.Align.In.Center(this.playButton,this.bestScoreBlock,0,80)},n.createButtonJourney=function(){this.journeyButton=new sf(this.scene),this.journeyButton.onClick=this.clickJourney1,this.popup.add(this.journeyButton),Phaser.Display.Align.In.Center(this.journeyButton,this.bestScoreBlock,100,80)},n.runCloseAnimation=function(){this.runPopupExitsAnimation(0,200)},n.runPopupExitsAnimation=function(e,t){var n,i=this;this.popupFadeOutAnimation||(this.popupFadeOutAnimation=new ts.Z({targets:[this.popup],delay:e,duration:t,props:{scale:0},onComplete:function(){i.popup.setY(0)}})),null==(n=this.popupFadeOutAnimation)||n.play()},n.setBestScore=function(e){this.bestScoreText.setText(""+e)},n.runOpenAnimation=function(){this.scene.audio.playSound(Ka.Z.POPUP_SHOW),this.runPopupEntrancesAnimation(0,300),this.runPopupContentEntrancesAnimation(200,300)},n.runPopupEntrancesAnimation=function(e,t){this.popupShowUpAnimation||(this.popupShowUpAnimation=new is.Z({targets:[this.popup],delay:e,duration:t,props:{y:0,alpha:{start:1,from:1,to:1},scale:{start:0,from:0,to:1}}})),this.popupShowUpAnimation.play()},n.runPopupContentEntrancesAnimation=function(e,t){this.contentShowUpAnimation||(this.contentShowUpAnimation=new ns.Z({targets:this.contents.getChildren(),duration:t,delay:this.scene.tweens.stagger(80,{start:e}),props:{alpha:{start:0,from:0,to:1}}})),this.contentShowUpAnimation.play()},n.initScore=function(){var e=this.scene.player.getBestScore();this.bestScore=e,this.currentScore=0},n.updateScore=function(){var e=this.scene.storage.getState(),t=Uc(e),n=t.score,i=t.bestScore;if(void 0===n&&void 0===i){var a=Fc(e)[this.scene.player.getPlayerId()];n=(null==a?void 0:a.score)||0,i=this.scene.player.getBestScore()}this.bestScore=(i||0)<this.bestScore?this.bestScore:i||0,this.currentScore=n,this.updateData({bestScore:this.bestScore,currentScore:this.currentScore})},n.updateData=function(e){this.payload=e;var t=e.bestScore,n=e.currentScore;if(this.setBestScore(t),n<=t)return this.setCurrentScore(0),this.runScoreAnimation(),void(n>0?this.runScoreCounter():this.counterAnimation=null);this.runAnimation()},n.runAnimation=function(){this.runScoreCounter()},n.runScoreAnimation=function(){this.scoreAnimation.play()},n.createScoreAnimation=function(){this.scoreAnimation=new $g({targets:[this.scoreText],props:{scale:{from:1,to:1.3}}})},n.runScoreCounter=function(){var e,t=this,n=this.payload,i=n.bestScore,a=n.currentScore;null==(e=this.counterAnimation)||e.remove(),this.counterAnimation=this.scene.tweens.addCounter({from:0,to:a,delay:700,duration:2e3,completeDelay:300,onUpdate:function(e){t.scene.audio.playSound(Ka.Z.SCORE_COUNT);var n=Math.floor(e.getValue());t.runScoreAnimation(),t.setCurrentScore(n)},onComplete:function(){t.setBestScore(i<a?a:i),t.setCurrentScore(a)}})},n.setCurrentScore=function(e){this.scoreText.setText(""+e)},t}(Phaser.GameObjects.Container),hf=lf,uf=function(e){function t(t,n,i,a){var s;return(s=e.call(this,t,n,i,a)||this).scene=void 0,s.bestScore=void 0,s.currentScore=void 0,s.confettiLeftEffect=void 0,s.confettiRightEffect=void 0,s.popupYourScore=void 0,s.popupResult=void 0,s.popupFadeInMaskAnimation=void 0,s.popupFadeOutMaskAnimation=void 0,s.open=function(){e.prototype.open.call((0,Ba.Z)(s)),window.focus(),s.scene.addShortcut(),s.popupYourScore.setVisible(!1),s.popupResult.setVisible(!1),s.runFadeInMaskAnimation(100,300),s.initScore(),s.updateScore(),s.showPopupYourScore(),s.scene.audio.playSound(Ka.Z.GAME_OVER_SCENE)},s.onPopupClose=function(){var e,t;null==(e=s.popupYourScore)||e.runCloseAnimation(),null==(t=s.popupResult)||t.runCloseAnimation(),s.runFadeOutMaskAnimation(0,200),s.scene.time.delayedCall(300,(function(){s.close(),s.scene.screen.open(za.o4.MINI_JOURNEY_SCREEN,{onClose:function(){s.scene.storage.dispatch(Oh()),Vc.emit(vo.START_GAME)}})}))},s.scene=t,s.createConfettiSmallAnimation(),s.createPopups(),s.setDepth(za.Ks.POPUP),s.background.setAlpha(.5),s}(0,o.Z)(t,e);var n=t.prototype;return n.showPopupYourScore=function(){this.popupYourScore.setVisible(!0),this.popupYourScore.runOpenAnimation(),this.popupYourScore.updateButtons(),this.popupYourScore.updateScore()},n.createPopups=function(){this.createPopupYourScore(),this.createPopupResult()},n.createPopupYourScore=function(){this.popupYourScore=new hf(this.scene),this.popupYourScore.setVisible(!1),this.popupYourScore.buttonClose.onClick=this.onPopupClose,this.add(this.popupYourScore),Phaser.Display.Align.In.Center(this.popupYourScore,this,0,0)},n.createPopupResult=function(){this.popupResult=new qg(this.scene),this.popupResult.setVisible(!1),this.popupResult.buttonClose.onClick=this.onPopupClose,this.add(this.popupResult),Phaser.Display.Align.In.Center(this.popupResult,this,0,-61)},n.createConfettiSmallAnimation=function(){this.confettiLeftEffect=new Og.Z(this.scene,{speedX:{min:-20,max:100},rotate:{start:-1080,end:0}}),this.confettiRightEffect=new Og.Z(this.scene,{speedX:{min:20,max:-100},rotate:{start:0,end:1080}}),this.confettiLeftEffect.setDepth(Va.Z.ON_TOP),this.confettiRightEffect.setDepth(Va.Z.ON_TOP)},n.initScore=function(){var e=this.scene.player.getBestScore();this.bestScore=e,this.currentScore=0},n.updateScore=function(){var e=this.scene.storage.getState(),t=Uc(e),n=t.score,i=t.bestScore;if(this.bestScore=i,void 0===n||void 0===i){var a=Fc(e)[this.scene.player.getPlayerId()];n=(null==a?void 0:a.score)||0,i=this.scene.player.getBestScore()}this.bestScore=(i||0)<this.bestScore?this.bestScore:i||0,this.currentScore=n},n.runFadeInMaskAnimation=function(e,t){if(!this.popupFadeInMaskAnimation){var n=this.background.alpha;this.popupFadeInMaskAnimation=new Eo.Z({targets:[this.background],delay:e,duration:t,props:{alpha:{start:0,from:0,to:n}}})}this.popupFadeInMaskAnimation.play()},n.runFadeOutMaskAnimation=function(e,t){if(!this.popupFadeOutMaskAnimation){var n=this.background.alpha;this.popupFadeOutMaskAnimation=new ts.Z({targets:[this.background],delay:e,duration:t,props:{alpha:{start:n,from:n,to:0}}})}this.popupFadeOutMaskAnimation.play()},t}(GameCore.Screen),df=uf,pf=n(468),gf=n.n(pf),ff=(GameCore.Utils.Valid.isDebugger(),[{key:"level-0",mapJson:"./assets/json/levels/level-0.json"}]),mf=1;mf<=200;mf++)ff.push({key:"level-"+mf,mapJson:"./assets/json/levels/level-"+mf+".json"});var vf=ff,Ef=function(e){return e[Di]},Sf=(0,ce.P1)([function(e){return Ef(e).lives}],(function(e){return e})),Af=(0,ce.P1)([function(e){return Ef(e).lastBonusLifeTime}],(function(e){return e})),yf=(0,ce.P1)([function(e){return Ef(e).countDownStartAt}],(function(e){return e})),Tf=n(208),If=Wa.Z.GAMEPLAY_32.FRAME,Cf="vertical",bf="horizontal",Of="left",Pf="right",Rf="top",wf="bottom",xf="vertical_left",kf="vertical_right",_f="horizontal_left",Lf="horizontal_right",Df="gem/gem",Mf="gem/diamond/diamond-10",Nf="gem/diamond/diamond-11",Bf="gem/diamond/diamond-12",Gf="gem/diamond/diamond-13",Ff="gem/diamond/diamond-14",Uf="gem/diamond/diamond-15",Hf="gem/ruby/ruby-20",Zf="gem/sapphire/sapphire-30",Yf=[{level:1,frames:[],width:480,height:189},{level:2,frames:[Wa.Z.EFFECTS.FRAME.TEXT_COOL],width:480,height:189},{level:3,frames:[Wa.Z.EFFECTS.FRAME.TEXT_GOOD],width:579,height:189},{level:4,frames:[Wa.Z.EFFECTS.FRAME.TEXT_EXCELLENT],width:906,height:189},{level:5,frames:[Wa.Z.EFFECTS.FRAME.TEXT_EXCELLENT],width:906,height:189},{level:6,frames:[Wa.Z.EFFECTS.FRAME.TEXT_EXCELLENT],width:906,height:189}],Vf=[{level:1,scale:.5,speed:.5,quantity:.5},{level:2,scale:.6,speed:.6,quantity:.6},{level:3,scale:.7,speed:.7,quantity:.7},{level:4,scale:.8,speed:.8,quantity:.8},{level:5,scale:.9,speed:.9,quantity:.9},{level:6,scale:1,speed:1,quantity:1}],Wf="l",zf="l_1",Kf="l_3",jf="line_2",Xf="line_3",Jf="line_4",qf="line_5",Qf="square_1",$f="square_2",em="square_3",tm="trapezoid",nm="triangle",im="t_piece",am="plus_piece",sm="cross_piece_2",rm="cross_piece_3",om="cross_piece_4",cm="cross_piece_5",lm="u_piece",hm=[Wf,zf,Kf,jf,Xf,Jf,qf,Qf,$f,em,nm,tm,im,am,sm,rm,om,cm,lm],um=[{type:Wf,rate:3},{type:zf,rate:4},{type:Kf,rate:2},{type:jf,rate:16},{type:Xf,rate:12},{type:Jf,rate:8},{type:qf,rate:4},{type:Qf,rate:16},{type:$f,rate:8},{type:nm,rate:4},{type:tm,rate:4},{type:im,rate:2},{type:am,rate:1},{type:sm,rate:4},{type:rm,rate:2},{type:om,rate:1},{type:lm,rate:2}],dm=[[1,0],[1,0],[1,1]],pm=[[0,1],[0,1],[1,1]],gm=[[1,0],[1,1]],fm=[[1,0,0],[1,0,0],[1,1,1]],mm=[[1,1,1],[1,0,0]],vm=[[1,1,1],[0,0,1]],Em=[[1,1],[1,0]],Sm=[[1,1,1],[1,0,0],[1,0,0]],Am=[[1,1],[0,1],[0,1]],ym=[[1,1],[1,0],[1,0]],Tm=[[1,1],[0,1]],Im=[[1,1,1],[0,0,1],[0,0,1]],Cm=[[0,0,1],[1,1,1]],bm=[[1,0,0],[1,1,1]],Om=[[0,1],[1,1]],Pm=[[0,0,1],[0,0,1],[1,1,1]],Rm=[[1],[1]],wm=[[1,1]],xm=[[1],[1],[1]],km=[[1,1,1]],_m=[[1],[1],[1],[1]],Lm=[[1,1,1,1]],Dm=[[1],[1],[1],[1],[1]],Mm=[[1,1,1,1,1]],Nm=[[1]],Bm=[[1,1],[1,1]],Gm=[[1,1,1],[1,1,1],[1,1,1]],Fm=[[1,0],[1,1],[0,1]],Um=[[0,1],[1,1],[1,0]],Hm=[[1,1,0],[0,1,1]],Zm=[[0,1,1],[1,1,0]],Ym=[[0,1],[1,1],[0,1]],Vm=[[1,0],[1,1],[1,0]],Wm=[[0,1,0],[1,1,1]],zm=[[1,1,1],[0,1,0]],Km=[[0,0,1],[1,1,1],[0,0,1]],jm=[[1,0,0],[1,1,1],[1,0,0]],Xm=[[0,1,0],[0,1,0],[1,1,1]],Jm=[[1,1,1],[0,1,0],[0,1,0]],qm=[[0,1,0],[1,1,1],[0,1,0]],Qm=[[1,0],[0,1]],$m=[[0,1],[1,0]],ev=[[1,0,0],[0,1,0],[0,0,1]],tv=[[0,0,1],[0,1,0],[1,0,0]],nv=[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]],iv=[[0,0,0,1],[0,0,1,0],[0,1,0,0],[1,0,0,0]],av=[[1,0,0,0,0],[0,1,0,0,0],[0,0,1,0,0],[0,0,0,1,0],[0,0,0,0,1]],sv=[[0,0,0,0,1],[0,0,0,1,0],[0,0,1,0,0],[0,1,0,0,0],[1,0,0,0,0]],rv=[[1,1],[0,1],[1,1]],ov=[[1,1],[1,0],[1,1]],cv=[[1,0,1],[1,1,1]],lv=[[1,1,1],[1,0,1]],hv={1:If.GEM,10:If.GEM_DIAMOND_10,11:If.GEM_DIAMOND_11,12:If.GEM_DIAMOND_12,13:If.GEM_DIAMOND_13,14:If.GEM_DIAMOND_14,15:If.GEM_DIAMOND_15},uv={1:{type:Qf,direction:null,isReverse:!1,data:Nm},I2:{type:jf,direction:Cf,isReverse:!1,data:Rm},I3:{type:Xf,direction:Cf,isReverse:!1,data:xm},I4:{type:Jf,direction:Cf,isReverse:!1,data:_m},I5:{type:qf,direction:Cf,isReverse:!1,data:Dm},II2:{type:jf,direction:bf,isReverse:!1,data:wm},II3:{type:Xf,direction:bf,isReverse:!1,data:km},II4:{type:Jf,direction:bf,isReverse:!1,data:Lm},II5:{type:qf,direction:bf,isReverse:!1,data:Mm},J1:{type:Wf,direction:Rf,isReverse:!0,data:dm},J2:{type:Wf,direction:Of,isReverse:!0,data:bm},J3:{type:Wf,direction:wf,isReverse:!0,data:ym},J4:{type:Wf,direction:Pf,isReverse:!0,data:vm},L1:{type:Wf,direction:Rf,isReverse:!1,data:dm},L2:{type:Wf,direction:Pf,isReverse:!1,data:mm},L3:{type:Wf,direction:wf,isReverse:!1,data:Am},L4:{type:Wf,direction:Of,isReverse:!1,data:Cm},O:{type:$f,direction:null,isReverse:!1,data:Bm},"polyplet-left-2":{type:sm,direction:Of,isReverse:!1,data:Qm},"polyplet-left-3":{type:rm,direction:Of,isReverse:!1,data:ev},"polyplet-left-4":{type:om,direction:Of,isReverse:!1,data:nv},"polyplet-left-5":{type:cm,direction:Of,isReverse:!1,data:av},"polyplet-right-2":{type:sm,direction:Pf,isReverse:!1,data:$m},"polyplet-right-3":{type:rm,direction:Pf,isReverse:!1,data:tv},"polyplet-right-4":{type:om,direction:Pf,isReverse:!1,data:iv},"polyplet-right-5":{type:cm,direction:Pf,isReverse:!1,data:sv},S1:{type:tm,direction:Lf,isReverse:!1,data:Zm},S2:{type:tm,direction:xf,isReverse:!1,data:Fm},T1:{type:nm,direction:Rf,isReverse:!1,data:Wm},T2:{type:nm,direction:Pf,isReverse:!1,data:Vm},T3:{type:nm,direction:wf,isReverse:!1,data:zm},T4:{type:nm,direction:Of,isReverse:!1,data:Ym},TT1:{type:im,direction:wf,isReverse:!1,data:Jm},TT2:{type:im,direction:Of,isReverse:!1,data:Km},TT3:{type:im,direction:Rf,isReverse:!1,data:Xm},TT4:{type:im,direction:Pf,isReverse:!1,data:jm},U1:{type:lm,direction:Rf,isReverse:!1,data:cv},U2:{type:lm,direction:Pf,isReverse:!1,data:ov},U3:{type:lm,direction:wf,isReverse:!1,data:lv},U4:{type:lm,direction:Of,isReverse:!1,data:rv},V1:{type:zf,direction:Pf,isReverse:!1,data:Em},V2:{type:zf,direction:wf,isReverse:!1,data:Tm},V3:{type:zf,direction:Rf,isReverse:!1,data:gm},V4:{type:zf,direction:Of,isReverse:!1,data:Om},VV1:{type:Kf,direction:Pf,isReverse:!1,data:Sm},VV2:{type:Kf,direction:wf,isReverse:!1,data:Im},VV3:{type:Kf,direction:Rf,isReverse:!1,data:fm},VV4:{type:Kf,direction:Of,isReverse:!1,data:Pm},X:{type:am,direction:null,isReverse:!1,data:qm},Z1:{type:tm,direction:_f,isReverse:!1,data:Hm},Z2:{type:tm,direction:kf,isReverse:!1,data:Um}},dv=GameCore.Configs.Board,pv=(dv.cols,dv.rows,0),gv=function(){return pv},fv=function(e,t){pv=0;for(var n=[],i=e.length,a=e[0].length,s=[],r=[],o=function(t){for(var i=!0,r=0;r<a;r++)0===e[t][r].value&&(i=!1);if(i){s.push(t);for(var o=function(i){n.some((function(e){return e.x===i&&e.y===t}))||n.push({x:i,y:t,frame:e[t][i].frame})},c=0;c<a;c++)o(c)}},c=0;c<i;c++)o(c);for(var l=function(t){for(var a=!0,s=0;s<i;s++)0===e[s][t].value&&(a=!1);if(a){r.push(t);for(var o=function(i){n.some((function(e){return e.x===t&&e.y===i}))||n.push({x:t,y:i,frame:e[i][t].frame})},c=0;c<i;c++)o(c)}},h=0;h<a;h++)l(h);var u=Ev(e,t);if(u&&u.length>0)for(var d=function(){var t=u[p],i=t.x,a=t.y;n.some((function(e){return e.x===i&&e.y===a}))||n.push({x:i,y:a,frame:e[a][i].frame})},p=0;p<u.length;p++)d();return pv+=s.length,pv+=r.length,pv+=Math.floor(u.length/9),n},mv=function(e,t){if(0===e.length)return!1;var n=Ae()(e).call(e,(function(e){return e.x===t.x&&e.y===t.y}));return!(!n||n.length<=0)},vv=function(e,t){for(var n=t.x,i=t.y,a=[],s=n;s<n+3;s++)for(var r=i;r<i+3;r++){if(0===e[r][s].value)return[];a.push({x:s,y:r})}return a},Ev=function(e,t){for(var n=[],i=function(e){for(var t,n=[],i=0;i<e.length;i++){var a=(t=e[i],{x:3*Math.floor(t.x/3),y:3*Math.floor(t.y/3)});mv(n,a)||n.push(a)}return n}(t),a=0;a<i.length;a++){var s=i[a],r=vv(e,s);n.push.apply(n,r)}return n},Sv=function(e){for(var t=e.length,n=e[0].length,i=[],a=0;a<t;a++){for(var s=!0,r=0;r<n;r++)0===e[a][r].value&&(s=!1);s&&i.push(a)}return i},Av=function(e){for(var t=e.length,n=e[0].length,i=[],a=0;a<n;a++){for(var s=!0,r=0;r<t;r++)0===e[r][a].value&&(s=!1);s&&i.push(a)}return i},yv=function(e,t){var n=e.length,i=e[0].length;if(0===t.length)return!1;for(var a=0;a<n;a++)for(var s=0;s<i;s++)for(var r=0;r<t.length;r++)if(Tv(e,s,a,t[r]))return!1;return!0},Tv=function(e,t,n,i){for(var a=!0,s=0;s<i.data.length;s++)for(var r=0;r<i.data[s].length;r++)i.data[s][r].texture&&(e[n+s]&&e[n+s][t+r]&&0===e[n+s][t+r].value||(a=!1));return a},Iv=function(e,t){for(var n=e.length,i=e[0].length,a=0;a<n;a++)for(var s=0;s<i;s++)if(Tv(e,s,a,t))return!0;return!1},Cv=0,bv=function(){return Cv++,18+10*(Ov()-1)},Ov=function(){return Cv+1},Pv=function(e){var t=e;switch(e){case Df:t="g";break;case Mf:t="d10";break;case Nf:t="d11";break;case Bf:t="d12";break;case Gf:t="d13";break;case Ff:t="d14";break;case Uf:t="d15";break;case Hf:t="r20";break;case Zf:t="s30";break;case Wf:t="l";break;case zf:t="l1";break;case Kf:t="l3";break;case jf:t="e2";break;case Xf:t="e3";break;case Jf:t="e4";break;case qf:t="e5";break;case Qf:t="s1";break;case $f:t="s2";break;case em:t="s3";break;case tm:t="tz";break;case nm:t="ta";break;case am:t="pl";break;case im:t="tp";break;case sm:t="cr2";break;case rm:t="cr3";break;case om:t="cr4";break;case cm:t="cr5";break;case lm:t="up";break;case Rf:t="dt";break;case Of:t="dl";break;case Pf:t="dr";break;case wf:t="db";break;case Cf:t="v";break;case bf:t="h";break;case xf:t="vl";break;case kf:t="vr";break;case _f:t="hl";break;case Lf:t="hr"}return t},Rv=function(e){var t=e;switch(e){case"g":t=Df;break;case"d10":t=Mf;break;case"d11":t=Nf;break;case"d12":t=Bf;break;case"d13":t=Gf;break;case"d14":t=Ff;break;case"d15":t=Uf;break;case"r20":t=Hf;break;case"s30":t=Zf;break;case"b":case"c":case"d":case"g":case"o":case"p":case"q":case"r":case"y":t="gem/gem";break;case"l":t=Wf;break;case"l1":t=zf;break;case"l3":t=Kf;break;case"e2":t=jf;break;case"e3":t=Xf;break;case"e4":t=Jf;break;case"e5":t=qf;break;case"s1":t=Qf;break;case"s2":t=$f;break;case"s3":t=em;break;case"tz":t=tm;break;case"ta":t=nm;break;case"pl":t=am;break;case"tp":t=im;break;case"cr2":t=sm;break;case"cr3":t=rm;break;case"cr4":t=om;break;case"cr5":t=cm;break;case"up":t=lm;break;case"dt":t=Rf;break;case"dl":t=Of;break;case"dr":t=Pf;break;case"db":t=wf;break;case"v":t=Cf;break;case"h":t=bf;break;case"vl":t=xf;break;case"vr":t=kf;break;case"hl":t=_f;break;case"hr":t=Lf}return t},wv=function(e){for(var t=[],n=e.split(","),i=0;i<n.length;i++){var a=n[i],s=Rv(a);"x"===a?t.push({value:0,frame:"gem/gem_transparent"}):t.push({value:1,frame:s})}return t},xv=function(e){var t=e.split("|"),n=t[0].split("-");if(n.length<=0)throw new Error("Invalid piece");return{type:Rv(n[0]),direction:Rv(n[1])||null,isReverse:n[2]&&"r"===n[2]||!1,fenPiece:t[1]}},kv=Wa.Z.DEFAULT,_v=kv.KEY,Lv=kv.FRAME,Dv=function(e){function t(t){var n;return(n=e.call(this,t,_v,Lv.BUTTON_GREEN_BIG)||this).icon=void 0,n.text=void 0,n.button.setWorldSize(138,50),n.setName("Play"),n.createIcon(),n.createText(),n.alignItem(),n}(0,o.Z)(t,e);var n=t.prototype;return n.createIcon=function(){this.icon=this.scene.make.image({key:_v,frame:Lv.ICON_I_PLAY}),this.icon.setWorldSize(20,26),this.add(this.icon)},n.createText=function(){var e=this.scene.world.getPixelRatio();this.text=this.scene.make.image({key:_v,frame:Lv.TEXT_PLAY});var t=this.text,n=t.width,i=t.height;this.text.setWorldSize(n/e,i/e),this.add(this.text)},n.alignItem=function(){var e=this.width,t=this.icon.width,n=this.text.width,i=e/2,a=(e-10-t-n)/2+t/2,s=a+10+t/2+n/2;Phaser.Display.Align.In.Center(this.icon,this,a-i,-2),Phaser.Display.Align.In.Center(this.text,this,s-i,-2)},t}(ja.Z),Mv=Dv,Nv=Wa.Z.DEFAULT,Bv=Nv.KEY,Gv=Nv.FRAME,Fv=Wa.Z.GAMEPLAY,Uv=Fv.KEY,Hv=Fv.FRAME,Zv=Wa.Z.GAMEPLAY_32,Yv=Zv.KEY,Vv=Zv.FRAME,Wv=GameCore.Configs,zv=Wv.Network,Kv=Wv.Board,jv=function(e){function t(t,n,i,a){var s;(s=e.call(this,t,n,i,a)||this).popup=void 0,s.title=void 0,s.buttonClose=void 0,s.contents=void 0,s.buttonPlay=void 0,s.boardCellData=[],s.targetData=[],s.popupShowUpAnimation=void 0,s.popupFadeOutAnimation=void 0,s.contentShowUpAnimation=void 0,s.popupFadeInMaskAnimation=void 0,s.popupFadeOutMaskAnimation=void 0,s.clickClose=function(){s.runCloseAnimation(),s.popupFadeOutAnimation.next((function(){var e=s.getData(["onClose"])[0];s.scene.screen.close(s.name),e&&e()}))},s.decodeMathData=function(e){try{return JSON.parse(GameCore.Utils.Hash.hashToString(e))}catch(t){return""}};try{s.createPopup(),s.createTitle(),s.createTargetItems(),s.createBoard(),s.createButtonPlay(),s.setDepth(za.Ks.POPUP),s.background.setAlpha(.5)}catch(r){}return s}(0,o.Z)(t,e);var n=t.prototype;return n.open=function(){var t=(0,r.Z)(l().mark((function t(n){return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.prototype.open.call(this,n),t.next=3,this.checkReceiveLevelFromFb();case 3:this.loadLevelConfig();case 4:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),n.startGame=function(){this.runOpenAnimation(),this.updateContent(),this.popup.setVisible(!0)},n.loadLevelConfig=function(){try{var e=this.scene.storage.getState(),t=ol(e),n=vf[t];n||(n=vf[vf.length-1]);var a=n,s=a.key,r=a.mapJson;if(this.scene.cache.tilemap.exists(s))return void this.handleLoadCurrentMapComplete();this.scene.load.tilemapTiledJSON(s,r),this.scene.load.start(),this.scene.load.off(Phaser.Loader.Events.COMPLETE),this.scene.load.once(Phaser.Loader.Events.COMPLETE,this.handleLoadCurrentMapComplete.bind(this))}catch(o){(0,i.tO)(o)}},n.handleLoadCurrentMapComplete=function(){this.hideLoadingScreen(),this.startGame()},n.updateContent=function(){this.resetTarget(),this.drawTargetItems(),this.resetCellBoard(),this.updateCellBoard()},n.checkReceiveLevelFromFb=function(){var e=(0,r.Z)(l().mark((function e(){var t;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,t=this.scene.storage.getState(),!ol(t)){e.next=5;break}return e.abrupt("return");case 5:return this.showLoadingScreen(),e.next=8,this.scene.storage.dispatch(dh());case 8:e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),(0,i.tO)(e.t0);case 13:case"end":return e.stop()}}),e,this,[[0,10]])})));return function(){return e.apply(this,arguments)}}(),n.showLoadingScreen=function(){var e=this.scene.game,t=e.globalScene,n=e.lang;t.screen.open(za.o4.NOTIFY_SCREEN,{message:n.Text.LOADING_LEVEL+"...",duration:zv.Timeout,loading:!0})},n.hideLoadingScreen=function(){this.scene.game.globalScene.screen.close(za.o4.NOTIFY_SCREEN)},n.createPopup=function(){this.popup=new as.Z(this.scene,0,-7,286,373),this.popup.setVisible(!1),this.add(this.popup),Phaser.Display.Align.In.Center(this.popup,this.zone,0,10)},n.createTitle=function(){this.title=this.scene.add.container();var e=this.scene.world.getPixelRatio(),t=this.scene.make.image({key:Bv,frame:Gv.TEXT_JOURNEY});t.setWorldSize(t.width/e,t.height/e),this.buttonClose=new ja.Z(this.scene,Bv,Gv.BUTTON_CLOSE,35,35),this.buttonClose.setName("Close"),this.buttonClose.onClick=this.clickClose,this.title.add([t,this.buttonClose]),this.popup.add(this.title),Phaser.Display.Align.In.Center(t,this.title),Phaser.Display.Align.In.Center(this.buttonClose,this.title,138.5,-19.5),Phaser.Display.Align.In.TopCenter(this.title,this.popup,0,7)},n.createTargetItems=function(){var e=this.scene.world.getPixelRatio(),t=this.scene.make.image({key:Bv,frame:Gv.TEXT_COLLECT}),n=t.width,i=t.height;t.setWorldSize(n/e,i/e);var a=this.scene.make.image({key:Bv,frame:Gv.WOOD_PANEL});a.setWorldSize(200,37),this.popup.add([t,a]),Phaser.Display.Align.In.Center(t,this.popup,0,-155),Phaser.Display.Align.In.Center(a,this.popup,0,-125)},n.drawTargetItems=function(){var e,t,n=this.scene.storage.getState(),i=ol(n),a=vf[i];a||(a=vf[vf.length-1]);var s=this.scene.make.tilemap({key:a.key}).properties;if(s&&(0,Tf.isArray)(s)&&!(s.length<2))for(var r=s[0].value,o=gf()(e=gf()(t=gf()(r).call(r,"{",'{"')).call(t,", ",', "')).call(e,":",'":'),c=JSON.parse(o),l=q()(c),h=this.calcPosition(l.length),u=0;u<l.length;u++){var d=l[u],p=hv[d],g=c[d],f=this.targetData[u];f||(f=this.spawnTargetItem(p,g));var m=f,v=m.container,E=m.text,S=m.gem;v.setVisible(!0),E.setText("x"+g),S.setFrame(p),this.targetData.push(f),Phaser.Display.Align.In.Center(v,this.popup,h[u],-130)}},n.spawnTargetItem=function(e,t){var n=this.scene.make.container({}),i=this.scene.make.image({key:Yv,frame:e});i.setWorldSize(15,15);var a=this.scene.make.bitmapText({font:Xa.Z.PRIMARY_LIGHT.KEY,size:this.scene.fontSize(24),origin:{x:.5,y:.5},text:"x"+t});return n.add([i,a]),Phaser.Display.Align.In.Center(a,n,0,15),this.popup.add(n),{container:n,gem:i,text:a}},n.calcPosition=function(e){for(var t=[],n=150/(e+1),i=n*(e-1)/2,a=0;a<e;a++)t.push(n*a-i);return t},n.createBoard=function(){var e=this.scene.make.image({key:Uv,frame:Hv.BOARD});e.setWorldSize(200,184),this.popup.add(e),Phaser.Display.Align.In.Center(e,this.popup,0,-12),this.initCellBoard()},n.initCellBoard=function(){for(var e=0;e<Kv.rows;e++){this.boardCellData[e]=[];for(var t=0;t<Kv.cols;t++){var n=20*t-86.5+1.65*t,i=19*e-92+1*e,a=Vv.GEM_TRANSPARENT,s=this.spawnCellBoard(a,n,i);this.boardCellData[e].push(s)}}},n.updateCellBoard=function(){var e=this.scene.storage.getState(),t=sl(e).data.fen;if(t){var n=t.split("l")[0];this.drawBoardByFen(n)}else this.drawBoardByMap()},n.resetTarget=function(){for(var e=0;e<this.targetData.length;e++){var t;null==(t=this.targetData[e])||null==(t=t.container)||t.setVisible(!1)}},n.resetCellBoard=function(){for(var e=0;e<Kv.rows;e++)for(var t=0;t<Kv.cols;t++){this.boardCellData[e][t].setFrame(Vv.GEM_TRANSPARENT)}},n.drawBoardByFen=function(e){for(var t=Du()(e).call(e).split("/"),n=0;n<t.length;n++)for(var i=t[n].split(","),a=0;a<i.length;a++){var s=i[a];if("x"!==s){var r=Rv(s);this.boardCellData[n][a].setFrame(r)}}},n.drawBoardByMap=function(){var e=this.scene.storage.getState(),t=ol(e),n=vf[t],i=this.scene.make.tilemap({key:n.key}).layers;if((0,Tf.isArray)(i)){var a=i[0].data;if((0,Tf.isArray)(a))for(var s=0;s<a.length;s++)for(var r=a[s],o=0;o<r.length;o++){var c=r[o];if(!(c.index<0)){var l=hv[c.index-1];this.boardCellData[s][o].setFrame(l)}}}},n.spawnCellBoard=function(e,t,n){var i=this.scene.make.image({key:Yv,frame:e});return i.setWorldSize(20,19),this.popup.add(i),Phaser.Display.Align.In.Center(i,this.popup,t,n),i},n.createButtonPlay=function(){this.buttonPlay=new Mv(this.scene),this.buttonPlay.onClick=this.handlePlay.bind(this),this.popup.add(this.buttonPlay),Phaser.Display.Align.In.Center(this.buttonPlay,this.popup,0,111)},n.handlePlay=function(){var e=this,t=this.scene.storage.getState();Sf(t)<1?this.scene.screen.open(za.o4.CLAIM_HEART_SCREEN):(this.runCloseAnimation(),this.popupFadeOutAnimation.next((function(){e.scene.screen.close(e.name);var t=e.scene.storage.getState();ol(t)>vf.length||e.scene.storage.dispatch(Ph())})))},n.getLevelName=function(e){var t;return"journey_"+Ya()(t=GameCore.Utils.Number).call(t,e,4,"0")},n.runOpenAnimation=function(){var e;null!=(e=this.popupShowUpAnimation)&&null!=(e=e.tween)&&e.isPlaying()||(this.scene.audio.playSound(Ka.Z.POPUP_SHOW),this.runPopupEntrancesAnimation(0,300),this.runFadeInMaskAnimation(100,300))},n.runCloseAnimation=function(){var e;null!=(e=this.popupFadeOutAnimation)&&null!=(e=e.tween)&&e.isPlaying()||(this.runPopupExitsAnimation(50,200),this.runFadeOutMaskAnimation(0,200))},n.runPopupEntrancesAnimation=function(e,t){if(!this.popupShowUpAnimation){var n=this.popup.scale;this.popupShowUpAnimation=new is.Z({targets:[this.popup],delay:e,duration:t,props:{y:0,alpha:{start:1,from:1,to:1},scale:{start:0,from:0,to:n}}})}this.popupShowUpAnimation.play()},n.runPopupContentEntrancesAnimation=function(e,t){var n;null==(n=this.contentShowUpAnimation)||n.remove(),this.contentShowUpAnimation=new ns.Z({targets:this.contents.getChildren(),duration:t,delay:e,props:{alpha:{start:0,from:0,to:1}}}),this.contentShowUpAnimation.play()},n.runPopupExitsAnimation=function(e,t){var n=this;this.popupFadeOutAnimation||(this.popupFadeOutAnimation=new ts.Z({targets:[this.popup],delay:e,duration:t,props:{scale:0},ease:Phaser.Math.Easing.Back.In,onComplete:function(){n.popup.setY(0),n.scene.screen.close(n.name),n.popup.setVisible(!1)}})),this.popupFadeOutAnimation.play()},n.runFadeInMaskAnimation=function(e,t){if(!this.popupFadeInMaskAnimation){var n=this.background.alpha;this.popupFadeInMaskAnimation=new Eo.Z({targets:[this.background],delay:e,duration:t,props:{alpha:{start:0,from:0,to:n}}})}this.popupFadeInMaskAnimation.play()},n.runFadeOutMaskAnimation=function(e,t){if(!this.popupFadeOutMaskAnimation){var n=this.background.alpha;this.popupFadeOutMaskAnimation=new ts.Z({targets:[this.background],delay:e,duration:t,props:{alpha:{start:n,from:n,to:0}}})}this.popupFadeOutMaskAnimation.play()},t}(GameCore.Screen),Xv=Wa.Z.DEFAULT,Jv=Xv.KEY,qv=Xv.FRAME,Qv=function(e){function t(t){var n;return(n=e.call(this,t,Jv,qv.BUTTON_GREEN_BIG)||this).icon=void 0,n.text=void 0,n.button.setWorldSize(138,50),n.setName("Continue"),n.createIcon(),n.createText(),n.alignItem(),n}(0,o.Z)(t,e);var n=t.prototype;return n.createIcon=function(){this.icon=this.scene.make.image({key:Jv,frame:qv.ICON_I_PLAY}),this.icon.setWorldSize(20,26),this.add(this.icon)},n.createText=function(){var e=this.scene.world.getPixelRatio();this.text=this.scene.make.image({key:Jv,frame:qv.TEXT_PLAY});var t=this.text,n=t.width,i=t.height;this.text.setWorldSize(n/e,i/e),this.add(this.text)},n.alignItem=function(){var e=this.width,t=this.icon.width,n=this.text.width,i=e/2,a=(e-10-t-n)/2+t/2,s=a+10+t/2+n/2;Phaser.Display.Align.In.Center(this.icon,this,a-i,-2),Phaser.Display.Align.In.Center(this.text,this,s-i,-2)},t}(ja.Z),$v=Qv,eE=Wa.Z.DEFAULT,tE=eE.KEY,nE=eE.FRAME,iE=function(e){function t(t,n,i,a){var s;return(s=e.call(this,t,n,i,a)||this).scene=void 0,s.popup=void 0,s.title=void 0,s.buttonContinue=void 0,s.contents=void 0,s.textTargetScore=void 0,s.textScore=void 0,s.backgroundContent=void 0,s.popupShowUpAnimation=void 0,s.popupFadeOutAnimation=void 0,s.popupFadeInMaskAnimation=void 0,s.popupFadeOutMaskAnimation=void 0,s.scene=t,s.createPopup(),s.createContentBackground(),s.createTitle(),s.createTexts(),s.createButtons(),s.setDepth(za.Ks.POPUP),s.background.setAlpha(.5),s}(0,o.Z)(t,e);var n=t.prototype;return n.open=function(){e.prototype.open.call(this);var t=this.scene.levelManager.getCurrentTargetScore();this.textScore.setText(""+t),this.runOpenAnimation()},n.createPopup=function(){this.popup=new as.Z(this.scene,0,0,310,300),this.add(this.popup),Phaser.Display.Align.In.Center(this.popup,this.zone)},n.createContentBackground=function(){this.backgroundContent=this.scene.make.image({key:tE,frame:nE.POPUP_CONTENT_BACKGROUND}),this.backgroundContent.setWorldSize(280,200),this.popup.add(this.backgroundContent),Phaser.Display.Align.In.TopCenter(this.backgroundContent,this.popup,0,-55)},n.createTitle=function(){this.title=this.scene.add.container();var e=this.scene.world.getPixelRatio(),t=this.scene.make.image({key:tE,frame:nE.TEXT_NEXT_MILESTONE});t.setWorldSize(t.width/e,t.height/e),this.title.add([t]),this.popup.add(this.title),Phaser.Display.Align.In.Center(t,this.title,0,11),Phaser.Display.Align.In.TopCenter(this.title,this.popup)},n.createTexts=function(){this.createTextTargetScore(),this.createTextScore()},n.createTextTargetScore=function(){var e=this.scene.lang.Text;this.textTargetScore=this.scene.make.bitmapText({font:Xa.Z.PRIMARY.KEY,size:this.scene.fontSize(50),text:e.TARGET_SCORE,origin:{x:.5,y:.5}}),this.popup.add(this.textTargetScore),Phaser.Display.Align.In.Center(this.textTargetScore,this.popup,0,-60)},n.createTextScore=function(){this.textScore=this.scene.make.bitmapText({font:Xa.Z.PRIMARY.KEY,size:this.scene.fontSize(80),text:"0",origin:{x:.5,y:.5}}),this.popup.add(this.textScore),Phaser.Display.Align.In.Center(this.textScore,this.popup,0,-15)},n.createButtons=function(){this.createButtonContinue()},n.createButtonContinue=function(){this.buttonContinue=new $v(this.scene),this.popup.add(this.buttonContinue),this.buttonContinue.onClick=this.clickButtonContinue.bind(this),Phaser.Display.Align.In.Center(this.buttonContinue,this.popup,0,55)},n.clickButtonContinue=function(){this.scene.nextLevel(),this.runCloseAnimation()},n.runOpenAnimation=function(){var e;null!=(e=this.popupShowUpAnimation)&&null!=(e=e.tween)&&e.isPlaying()||(this.scene.audio.playSound(Ka.Z.POPUP_SHOW),this.runPopupEntrancesAnimation(0,300),this.runFadeInMaskAnimation(100,300))},n.runCloseAnimation=function(){var e;null!=(e=this.popupFadeOutAnimation)&&null!=(e=e.tween)&&e.isPlaying()||(this.runPopupExitsAnimation(50,200),this.runFadeOutMaskAnimation(0,200))},n.runPopupEntrancesAnimation=function(e,t){if(!this.popupShowUpAnimation){var n=this.popup.scale;this.popupShowUpAnimation=new is.Z({targets:[this.popup],delay:e,duration:t,props:{y:0,alpha:{start:1,from:1,to:1},scale:{start:0,from:0,to:n}}})}this.popupShowUpAnimation.play()},n.runPopupExitsAnimation=function(e,t){var n=this;this.popupFadeOutAnimation||(this.popupFadeOutAnimation=new ts.Z({targets:[this.popup],delay:e,duration:t,props:{scale:0},onComplete:function(){n.scene.layoutManager.objects.main.board.handleTweenStartMission(),n.popup.setY(0),n.scene.screen.close(n.name)}})),this.popupFadeOutAnimation.play()},n.runFadeInMaskAnimation=function(e,t){if(!this.popupFadeInMaskAnimation){var n=this.background.alpha;this.popupFadeInMaskAnimation=new Eo.Z({targets:[this.background],delay:e,duration:t,props:{alpha:{start:0,from:0,to:n}}})}this.popupFadeInMaskAnimation.play()},n.runFadeOutMaskAnimation=function(e,t){if(!this.popupFadeOutMaskAnimation){var n=this.background.alpha;this.popupFadeOutMaskAnimation=new ts.Z({targets:[this.background],delay:e,duration:t,props:{alpha:{start:n,from:n,to:0}}})}this.popupFadeOutMaskAnimation.play()},t}(GameCore.Screen),aE=function(e){function t(t,n){var i;return(i=e.call(this,t)||this).textMain=void 0,i.payload=void 0,i.chars=void 0,i.listText=[],i.tweenText=void 0,i.payload=n,i.createTextMain(),i.initListText(),i.scene.add.existing((0,Ba.Z)(i)),i}(0,o.Z)(t,e);var n=t.prototype;return n.createTextMain=function(){var e=this.payload,t=e.font,n=e.size,i=e.text;this.textMain=this.scene.make.bitmapText({font:t,size:n,origin:{x:.5,y:.5},text:i}).setVisible(!1),this.add(this.textMain)},n.initListText=function(){var e=this.payload,t=e.text,n=e.font,i=e.size;if(t){this.chars=t.split("");var a=t.length,s=0;a>15&&(s=a-15);for(var r=0,o=0;o<this.chars.length;o++){var c=this.chars[o],l=this.scene.make.bitmapText({font:n,size:i-s,origin:{x:.5,y:.5},text:c});this.listText.push(l),r+=l.width}for(var h=-r/2,u=0;u<this.chars.length;u++){var d=this.listText[u],p=d.width/2;d.setX(h+p),d.setAlpha(0),h+=d.width}this.add(this.listText)}},n.createAnim=function(){if(!this.tweenText){var e=this.payload.text;this.tweenText=this.scene.tweens.add({targets:this.listText,paused:!0,duration:150,scale:{from:0,to:1},alpha:{from:0,to:1},ease:"Back.easeOut",delay:this.scene.tweens.stagger(1700/e.length,{})})}},n.runAnim=function(){this.resetListText(),this.tweenText.play()},n.resetListText=function(){for(var e=0;e<this.listText.length;e++)this.listText[e].setScale(0).setAlpha(0)},n.restart=function(){this.resetListText()},n.start=function(e){var t=this;void 0===e&&(e=0),this.createAnim(),e?this.scene.time.addEvent({delay:e,callback:function(){t.runAnim()}}):this.runAnim()},t}(Phaser.GameObjects.Container),sE=function(e){function t(t,n){var i;return(i=e.call(this,t)||this).textMain=void 0,i.payload=void 0,i.chars=void 0,i.listText=[],i.tweenText=void 0,i.payload=n,i.createTextMain(),i.initListText(),i.scene.add.existing((0,Ba.Z)(i)),i}(0,o.Z)(t,e);var n=t.prototype;return n.createTextMain=function(){var e=this.payload,t=(e.font,e.size),n=e.text;this.textMain=this.scene.make.text({style:{fontFamily:Xa.Z.FONT_FAMILY,fontSize:this.scene.fontSize(t)+"px"},origin:{x:.5,y:.5},text:n}).setAlpha(0),this.textMain.setTint(15651762).setHighQuality(),this.add(this.textMain)},n.initListText=function(){var e=this.payload,t=e.text,n=(e.font,e.size);if(t){this.chars=t.split("");for(var i=0,a=0;a<this.chars.length;a++){var s=this.chars[a],r=this.scene.make.text({style:{fontFamily:Xa.Z.FONT_FAMILY,fontSize:this.scene.fontSize(n)+"px"},origin:{x:.5,y:.5},text:s});r.setTint(15651762),this.listText.push(r),i+=r.width}for(var o=-i/2,c=0;c<this.chars.length;c++){var l=this.listText[c];l.setX(o),l.setAlpha(0),o+=l.width+1}this.add(this.listText)}},n.createAnim=function(){if(!this.tweenText){var e=this.payload.text;this.tweenText=this.scene.tweens.add({targets:this.listText,paused:!0,duration:150,scale:{from:0,to:1},alpha:{from:0,to:1},ease:"Back.easeOut",delay:this.scene.tweens.stagger(1700/e.length,{})})}},n.runAnim=function(){this.textMain.setScale(0).setAlpha(0),this.tweenText.play()},n.resetListText=function(){for(var e=0;e<this.listText.length;e++)this.listText[e].setScale(0).setAlpha(0)},n.restart=function(){this.resetListText()},n.start=function(e){var t=this;void 0===e&&(e=0),this.createAnim(),e?this.scene.time.addEvent({delay:e,callback:function(){t.runAnim()}}):this.runAnim()},t}(Phaser.GameObjects.Container),rE=function(e){function t(t,n,i,a){var s;return(s=e.call(this,t,n,i,a)||this).scene=void 0,s.textNoSpaceLeft=void 0,s.closeTimerEvent=void 0,s.tweenBackground=void 0,s.open=function(t){e.prototype.open.call((0,Ba.Z)(s),t),s.runPopupEntrancesAnimation(300,300),s.handleDelegate()},s.close=function(){e.prototype.close.call((0,Ba.Z)(s))},s.scene=t,s.setDepth(za.Ks.POPUP),s.background.setAlpha(0),s.createContent(),s}(0,o.Z)(t,e);var n=t.prototype;return n.handleDelegate=function(){var e,t=this,n=this.getData(["duration","onClose"]),i=n[0],a=void 0===i?0:i,s=n[1];null==(e=this.closeTimerEvent)||e.remove(),a>0&&(this.closeTimerEvent=this.scene.time.addEvent({delay:a,callback:function(){t.textNoSpaceLeft.setVisible(!1),t.textNoSpaceLeft.restart(),t.visible&&t.scene.screen.close(t.name),s&&s()}}))},n.runAnim=function(){this.textNoSpaceLeft.setVisible(!0),this.textNoSpaceLeft.start(300)},n.createContent=function(){this.createText()},n.createText=function(){var e=this.scene.facebook.getLocale();this.textNoSpaceLeft="ar"==e?new sE(this.scene,{text:this.scene.lang.Text.NO_SPACE_LEFT,font:Xa.Z.PRIMARY_LIGHT.KEY,size:this.scene.fontSize(180)}):new aE(this.scene,{text:this.scene.lang.Text.NO_SPACE_LEFT,font:Xa.Z.PRIMARY_LIGHT.KEY,size:this.scene.fontSize(76)}),this.add(this.textNoSpaceLeft),Phaser.Display.Align.In.Center(this.textNoSpaceLeft,this)},n.runPopupEntrancesAnimation=function(e,t){var n=this;this.tweenBackground||(this.tweenBackground=this.scene.tweens.addCounter({paused:!0,from:0,to:.6,delay:e,duration:t,onUpdate:function(e){var t=e.getValue();n.background.setAlpha(t)},onComplete:function(){n.runAnim()}})),this.tweenBackground.play()},t}(GameCore.Screen),oE=n(128),cE=Wa.Z.DEFAULT,lE=cE.KEY,hE=cE.FRAME,uE=function(e){function t(t){var n;return(n=e.call(this,t,lE,hE.BUTTON_GREEN)||this).icon=void 0,n.text=void 0,n.button.setWorldSize(160,54),n.setName("Continue"),n.createIcon(),n.createText(),n.alignItem(),n}(0,o.Z)(t,e);var n=t.prototype;return n.createIcon=function(){this.icon=this.scene.make.image({key:lE,frame:hE.ICON_ADS}),this.icon.setWorldSize(30,27),this.add(this.icon)},n.createText=function(){var e=this.scene.world.getPixelRatio();this.text=this.scene.make.image({key:lE,frame:this.scene.lang.Texture.CONTINUE});var t=this.text,n=t.width,i=t.height;this.text.setWorldSize(n/e,i/e),this.add(this.text)},n.alignItem=function(){var e=this.width,t=this.icon.width,n=this.text.width,i=e/2,a=(e-5-t-n)/2+t/2,s=a+5+t/2+n/2;Phaser.Display.Align.In.Center(this.icon,this,a-i,-2),Phaser.Display.Align.In.Center(this.text,this,s-i,-2)},t}(ja.Z),dE=uE,pE=Wa.Z.DEFAULT.KEY,gE=function(e){function t(t){var n;(n=e.call(this,t,pE,t.lang.Texture.NO_THANKS)||this).scene=void 0,n.scene=t;var i=n.scene.world.getPixelRatio(),a=(0,Ba.Z)(n),s=a.width,r=a.height;return n.button.setWorldSize(s/i,r/i),n.setName("NoThanks"),n}return(0,o.Z)(t,e),t}(ja.Z),fE=gE,mE=Wa.Z.DEFAULT,vE=mE.KEY,EE=mE.FRAME,SE=GameCore.Configs,AE=SE.Network,yE=SE.Match,TE=function(e){function t(t,n,i,a){var s;return(s=e.call(this,t,n,i,a)||this).scene=void 0,s.isUseRescue=void 0,s.countdownCount=void 0,s.popup=void 0,s.skipText=void 0,s.continueButton=void 0,s.tweenContinueButton=void 0,s.continueButtonAnimation=void 0,s.textRescueTime=void 0,s.tweenTextRescueTime=void 0,s.progressCircle=void 0,s.skipTextTween=void 0,s.countdownTimer=void 0,s.bgProgress=void 0,s.popupShowUpAnimation=void 0,s.popupFadeInMaskAnimation=void 0,s.popupFadeOutMaskAnimation=void 0,s.adsTimer=void 0,s.open=function(){e.prototype.open.call((0,Ba.Z)(s)),s.scene.audio.playSound(Ka.Z.RESCUE_TIME),s.runOpenAnimation()},s.close=function(){e.prototype.close.call((0,Ba.Z)(s)),s.scene.audio.stopSound(Ka.Z.RESCUE_TIME),s.bgProgress.setVisible(!1),s.progressCircle.setVisible(!1),s.continueButton.setVisible(!1),s.skipText.setVisible(!1),s.textRescueTime.setScale(0).setAlpha(0)},s.handleShowRewardedVideoAd=(0,r.Z)(l().mark((function e(){var t,n,i,a,r;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=s.scene.game,n=t.globalScene,i=t.lang,a=t.audio,s.countdownTimer.remove(),e.prev=2,!s.isUseRescue){e.next=5;break}return e.abrupt("return");case 5:return s.isUseRescue=!0,n.screen.open(za.o4.NOTIFY_SCREEN,{message:i.Text.LOADING_AD,duration:0,loading:!0}),a.pauseMusic(),a.muteAll(),a.stopSound(Ka.Z.RESCUE_TIME),e.next=12,new(C())((function(e,t){var n;null==(n=s.adsTimer)||n.remove(),s.adsTimer=s.scene.time.delayedCall(AE.Timeout,t),s.scene.ads.getAdStatus(GameCore.Ads.Types.REWARDED)===GameCore.Ads.Status.LOADING?s.scene.ads.events.once(GameCore.Ads.Events.LOADED,e):s.scene.ads.preloadRewardedVideoAsync().then(e).catch(t)}));case 12:return e.next=14,s.scene.ads.showRewardedVideoAsync();case 14:a.unmuteAll(),a.playMusic(),s.scene.storage.dispatch(Gh()),n.screen.close(za.o4.NOTIFY_SCREEN),Vc.emit(vo.RESCUE),s.scene.screen.close(s.name),s.scene.audio.playSound(Ka.Z.DAILY_REWARD),n.screen.close(za.o4.NOTIFY_SCREEN),e.next=31;break;case 24:if(e.prev=24,e.t0=e.catch(2),!(e.t0 instanceof Object&&GameCore.Utils.Object.hasOwn(e.t0,"code"))){e.next=30;break}if("USER_INPUT"!==e.t0.code){e.next=30;break}return s.showNotifySkipAds(),e.abrupt("return");case 30:s.showNotifyNoAds();case 31:return e.prev=31,null==(r=s.adsTimer)||r.destroy(),window.focus(),s.scene.audio.unmuteAll(),s.scene.audio.playMusic(),s.scene.ads.preloadRewardedVideoAsync().catch((function(e){})),e.finish(31);case 38:case"end":return e.stop()}}),e,null,[[2,24,31,38]])}))),s.showNotifyNoAds=function(e){if(!e||e.name===za.o4.NOTIFY_SCREEN){var t=s.scene.game,n=t.globalScene,i=t.lang;n.screen.events.off(GameCore.Screens.Events.CLOSE),n.screen.events.once(GameCore.Screens.Events.CLOSE,s.showGameOver),n.screen.open(za.o4.NOTIFY_SCREEN,{message:i.Text.NO_ADS_TO_DISPLAY,duration:2e3,loading:!1})}},s.showNotifySkipAds=function(){var e=s.scene.game,t=e.globalScene,n=e.lang;t.screen.events.off(GameCore.Screens.Events.CLOSE),t.screen.events.once(GameCore.Screens.Events.CLOSE,s.showGameOver),t.screen.open(za.o4.NOTIFY_SCREEN,{message:n.Text.NO_REWARDS+"\n"+n.Text.CANCELLED_AD,duration:3e3,loading:!1})},s.showGameOver=function(e){e&&e.name!==za.o4.NOTIFY_SCREEN||(s.countdownTimer.remove(),s.scene.screen.close(s.name),s.scene.endGame())},s.handleSkip=function(){s.countdownTimer.remove(),s.scene.screen.close(s.name),s.scene.endGame()},s.handleRunCountdown=function(){s.countdownCount-=1,s.countdownCount<=0?s.rescueTimeout():s.setTime(s.countdownCount)},s.scene=t,s.countdownCount=yE.MaxRescueCount,s.setDepth(za.Ks.POPUP),s.background.setAlpha(.5),s.createPopup(),s.createContent(),s}(0,o.Z)(t,e);var n=t.prototype;return n.runAnim=function(){this.tweenTextRescueTime.play(),this.skipText.setVisible(!0),this.skipTextTween.play(),this.tweenContinueButton.play()},n.updateInfo=function(){var e=this.scene.storage.getState(),t=Uc(e);this.textRescueTime.setText(String(t.score||0))},n.setTime=function(e){this.textRescueTime.setText(""+e),Phaser.Display.Align.In.Center(this.textRescueTime,this.zone,0,-42)},n.createPopup=function(){this.popup=new as.Z(this.scene,0,-5,290,310),this.add(this.popup)},n.createContent=function(){this.createTitle(),this.createTextRescueTime(),this.createBgProgressCircle(),this.createProgressCircle(),this.createContinueButton(),this.createSkipText()},n.createTitle=function(){var e=this.scene.add.container(),t=this.scene.world.getPixelRatio(),n=this.scene.make.image({key:vE,frame:EE.TEXT_SECOND_CHANGE});n.setWorldSize(n.width/t,n.height/t),Phaser.Display.Align.In.Center(n,e,0,12),e.add([n]),this.popup.add(e),Phaser.Display.Align.In.TopCenter(e,this.popup,0,-2)},n.createTextRescueTime=function(){this.textRescueTime=this.scene.make.bitmapText({font:Xa.Z.NUMBER_LIGHT.KEY,size:this.scene.fontSize(140),origin:{x:.5,y:.5}}),this.textRescueTime.setOrigin(.5).setScale(0).setAlpha(0),this.add(this.textRescueTime),Phaser.Display.Align.In.Center(this.textRescueTime,this,0,-40),this.tweenTextRescueTime=this.scene.tweens.add({delay:100,targets:this.textRescueTime,paused:!0,duration:200,scale:{from:0,to:1},alpha:{from:0,to:1},ease:"Power1"})},n.createProgressCircle=function(){this.progressCircle=this.scene.add.graphics(),this.add(this.progressCircle)},n.setProgressCircle=function(e){var t=Phaser.Math.DegToRad(-90),n=Phaser.Math.DegToRad(e-360-90);this.progressCircle.clear(),this.progressCircle.beginPath(),this.progressCircle.lineStyle(7,16762368),this.progressCircle.arc(0,-44,54,t,n,!0,.02),this.progressCircle.strokePath(),this.progressCircle.closePath()},n.runCountdown=function(){this.startProgressCircle();var e={delay:1e3,loop:!0,callback:this.handleRunCountdown};this.countdownTimer=this.scene.time.addEvent(e)},n.startProgressCircle=function(){var e=this;this.scene.tweens.addCounter({from:0,to:360,duration:1e3*yE.RescueGamePopupTimeout,onUpdate:function(t){var n=+t.getValue().toFixed(2);e.setProgressCircle(n)},onComplete:function(){e.setProgressCircle(0),e.progressCircle.setAlpha(1)}})},n.createBgProgressCircle=function(){this.bgProgress=this.scene.make.image({key:vE,frame:EE.BG_PROGRESS_CIRCLE}),this.bgProgress.setWorldSize(115,115),this.popup.add(this.bgProgress),Phaser.Display.Align.In.Center(this.bgProgress,this.popup,0,-38)},n.rescueTimeout=function(){this.countdownTimer.remove(),this.scene.screen.close(this.name),this.scene.endGame()},n.createContinueButton=function(){this.continueButton=new dE(this.scene),this.continueButton.setScale(0).setAlpha(0),this.continueButton.onClick=this.handleShowRewardedVideoAd,this.add(this.continueButton),Phaser.Display.Align.In.Center(this.continueButton,this.textRescueTime,0,115),this.tweenContinueButton=this.scene.tweens.add({paused:!0,targets:this.continueButton,ease:oE.Z,props:{alpha:{from:0,to:1},scale:{from:1.2,to:1}},delay:300,duration:300})},n.createSkipText=function(){this.skipText=new fE(this.scene),this.skipText.setVisible(!1).setAlpha(0),this.skipText.onClick=this.handleSkip,this.add(this.skipText),Phaser.Display.Align.In.BottomCenter(this.skipText,this.continueButton,0,43.5),this.skipTextTween=this.scene.tweens.add({targets:this.skipText,delay:yE.DelayNoThank,paused:!0,alpha:{from:0,to:1},ease:"Power1",duration:500})},n.runOpenAnimation=function(){var e;null!=(e=this.popupShowUpAnimation)&&null!=(e=e.tween)&&e.isPlaying()||(this.scene.audio.playSound(Ka.Z.POPUP_SHOW),this.runPopupEntrancesAnimation(0,300),this.runFadeInMaskAnimation(100,300))},n.runPopupEntrancesAnimation=function(e,t){var n=this;if(!this.popupShowUpAnimation){var i=this.popup.scale;this.popupShowUpAnimation=new is.Z({targets:[this.popup],delay:e,duration:t,props:{y:0,alpha:{start:1,from:1,to:1},scale:{start:0,from:0,to:i}},onComplete:function(){n.bgProgress.setVisible(!0),n.progressCircle.setVisible(!0),n.continueButton.setVisible(!0),n.skipText.setVisible(!0),n.runAnim(),n.updateInfo(),n.isUseRescue=!1,n.countdownCount=yE.RescueGamePopupTimeout,n.setTime(n.countdownCount),n.runCountdown()}})}this.popupShowUpAnimation.play()},n.runFadeInMaskAnimation=function(e,t){if(!this.popupFadeInMaskAnimation){var n=this.background.alpha;this.popupFadeInMaskAnimation=new Eo.Z({targets:[this.background],delay:e,duration:t,props:{alpha:{start:0,from:0,to:n}}})}this.popupFadeInMaskAnimation.play()},n.runFadeOutMaskAnimation=function(e,t){if(!this.popupFadeOutMaskAnimation){var n=this.background.alpha;this.popupFadeOutMaskAnimation=new ts.Z({targets:[this.background],delay:e,duration:t,props:{alpha:{start:n,from:n,to:0}}})}this.popupFadeOutMaskAnimation.play()},t}(GameCore.Screen),IE=TE,CE=n(616),bE=n.n(CE),OE=function(e,t,n){return void 0===t&&(t=.1),void 0===n&&(n=.04),t*e+bE()(e)*n*e*e},PE=function(e){function t(n){var i;return(i=e.call(this,n)||this).windX=1,i.airFrictionX=.05,i.airFrictionY=.01,i._lastRotaion=0,i.rotationRate=Math.random()+t.bonusRotationRate<.5?-1:1,i.scaleXNumber=i.getRandomFloat(.1,.2),i.scaleYNumber=i.scaleXNumber,i.scaleRate=-1,i.maxScale=i.getRandomFloat(.5,1),i.deltaAlpha=0,i.airFrictionX=.01*Math.random()+(t.bonusAirFrictionX||.007),i.airFrictionY=.004*Math.random()+(t.bonusAirFrictionY||.006),i.maxScale=Math.max(i.scaleXNumber,i.maxScale),i.alpha=0,(0,Ba.Z)(i)||(0,Ba.Z)(i)}(0,o.Z)(t,e);var n=t.prototype;return n.getRandomNumberBetween=function(e,t){return Math.floor(Math.random()*(t-e+1)+e)},n.getRandomFloat=function(e,t){return Math.random()*(t-e)+e},n.setValueAirFrictionX=function(e){t.bonusAirFrictionX=e,this.airFrictionX=.01*Math.random()+(t.bonusAirFrictionX||.007)},n.setValueAirFrictionY=function(e){t.bonusAirFrictionY=e},n.setValueRotationRate=function(e){t.bonusRotationRate=e},n.reset=function(){this.scaleXNumber=this.getRandomFloat(.3,.8),this.scaleYNumber=this.scaleXNumber,this.scaleRate=-1,this.alpha=0,this.deltaAlpha=0},n.update=function(t,n,i){for(var a=e.prototype.update.call(this,t,n,i),s=.5,r=t;r>16.67;)this.velocityX-=OE(this.velocityX,s,this.airFrictionX)/60,this.velocityY-=OE(this.velocityY,s,this.airFrictionY)/60,r-=16.67;if(this.velocityX-=OE(this.velocityX,s,this.airFrictionX)*r/1e3,this.velocityY-=OE(this.velocityY,s,this.airFrictionY)*r/1e3,this._lastRotaion=this.rotation,this.lifeCurrent>3*this.life/4)this.scaleX=this.maxScale,this.scaleY=this.maxScale,this.deltaAlpha+=t/(this.life/4),this.alpha=this.deltaAlpha;else if(this.lifeCurrent>0){var o=this.scaleRate>0?this.maxScale:1;this.scaleXNumber+=o*this.scaleRate*(t/(3*this.life/4)*3),this.scaleYNumber+=o*this.scaleRate*(t/(3*this.life/4)*3),this.scaleX=this.scaleXNumber,this.scaleY=this.scaleYNumber,this.alpha=this.deltaAlpha,this.scaleX<=0&&(this.scaleRate=1),this.scaleX>=this.maxScale&&(this.scaleRate=-1)}else this.reset();return a},t}(Phaser.GameObjects.Particles.Particle);PE.bonusAirFrictionX=0,PE.bonusAirFrictionY=0,PE.bonusRotationRate=0,PE.scaleXNumber=void 0,PE.scaleYNumber=void 0,PE.bonusAirFrictionX=0,PE.bonusAirFrictionY=0,PE.bonusRotationRate=0,PE.scaleXNumber=Math.random(),PE.scaleYNumber=Math.random();var RE=PE,wE=Wa.Z.EFFECTS,xE=wE.KEY,kE=wE.FRAME,_E=function(e){function t(t){var n;return(n=e.call(this,t,xE)||this).position1={x:-70,y:-180},n.emitterStar1=void 0,n.circleImage1=void 0,n.tweenShowCircle1=void 0,n.tweenHideCircle1=void 0,n.position2={x:-20,y:190},n.emitterStar2=void 0,n.circleImage2=void 0,n.tweenShowCircle2=void 0,n.tweenHideCircle2=void 0,n.position3={x:90,y:0},n.emitterStar3=void 0,n.circleImage3=void 0,n.tweenShowCircle3=void 0,n.tweenHideCircle3=void 0,n.setDepth(Va.Z.ON_TOP+1),n.createEmitterStars(),n.createTweenCircle(),n.scene.add.existing((0,Ba.Z)(n)),n}(0,o.Z)(t,e);var n=t.prototype;return n.createEmitterStars=function(){var e=[kE.GLARE_CROSS,kE.DUST],t=[16636263,5289969,15880535];this.emitterStar1=this.createEmitter({name:"Emitter1",frame:e,tint:t,x:this.position1.x,y:this.position1.y,speed:{min:50,max:200},gravityY:40,lifespan:{min:1e3,max:4e3},maxParticles:0,on:!1,alpha:0,particleClass:RE,emitZone:{type:"edge",source:new Phaser.Geom.Circle(0,0,1)}}),this.emitterStar2=this.createEmitter({name:"Emitter1",frame:e,tint:t,x:this.position2.x,y:this.position2.y,speed:{min:100,max:200},gravityY:40,lifespan:{min:1e3,max:4e3},maxParticles:0,on:!1,alpha:0,particleClass:RE,emitZone:{type:"edge",source:new Phaser.Geom.Circle(0,0,1)}}),this.emitterStar3=this.createEmitter({name:"Emitter1",frame:e,tint:t,x:this.position3.x,y:this.position3.y,speed:{min:100,max:200},gravityY:40,lifespan:{min:1e3,max:4e3},maxParticles:0,on:!1,alpha:0,particleClass:RE,emitZone:{type:"edge",source:new Phaser.Geom.Circle(0,0,1)}})},n.createTweenCircle=function(){var e=this;this.circleImage1=this.scene.make.image({x:this.position1.x,y:this.position1.y,key:xE,frame:kE.GLOW_CIRCLE}).setAlpha(0).setVisible(!1).setScale(0),this.tweenShowCircle1=this.scene.add.tween({paused:!0,targets:this.circleImage1,scale:{from:0,to:1},alpha:{from:0,to:1},ease:"Sine.easeInOut",duration:1e3,onComplete:function(){e.tweenHideCircle1.play()}}),this.tweenHideCircle1=this.scene.add.tween({paused:!0,targets:this.circleImage1,alpha:{from:1,to:0},ease:"Sine.easeInOut",duration:1e3,onComplete:function(){e.circleImage1.setVisible(!1),e.emitterStar1.stop()}}),this.circleImage2=this.scene.make.image({x:this.position2.x,y:this.position2.y,key:xE,frame:kE.GLOW_CIRCLE}).setAlpha(0).setVisible(!1).setScale(0),this.tweenShowCircle2=this.scene.add.tween({paused:!0,targets:this.circleImage2,scale:{from:0,to:1},alpha:{from:0,to:1},ease:"Sine.easeInOut",duration:1e3,onComplete:function(){e.tweenHideCircle2.play()}}),this.tweenHideCircle2=this.scene.add.tween({paused:!0,targets:this.circleImage2,alpha:{from:1,to:0},ease:"Sine.easeInOut",duration:1e3,onComplete:function(){e.circleImage2.setVisible(!1),e.emitterStar2.stop()}}),this.circleImage3=this.scene.make.image({x:this.position3.x,y:this.position3.y,key:xE,frame:kE.GLOW_CIRCLE}).setAlpha(0).setVisible(!1).setScale(0),this.tweenShowCircle3=this.scene.add.tween({paused:!0,targets:this.circleImage3,scale:{from:0,to:1},alpha:{from:0,to:1},ease:"Sine.easeInOut",duration:1e3,onComplete:function(){e.tweenHideCircle3.play()}}),this.tweenHideCircle3=this.scene.add.tween({paused:!0,targets:this.circleImage3,alpha:{from:1,to:0},ease:"Sine.easeInOut",duration:1e3,onComplete:function(){e.circleImage3.setVisible(!1),e.emitterStar3.stop()}})},n.getImages=function(){return[this.circleImage1,this.circleImage2,this.circleImage3]},n.playConfettiAnimation=function(){var e=this;this.scene.time.addEvent({delay:300,callback:function(){e.emitterStar1.flow(1e4,30),e.circleImage1.setVisible(!0),e.tweenShowCircle1.play()},callbackScope:this}),this.scene.time.addEvent({delay:800,callback:function(){e.emitterStar2.flow(1e4,25),e.circleImage2.setVisible(!0),e.tweenShowCircle2.play()},callbackScope:this}),this.scene.time.addEvent({delay:1300,callback:function(){e.emitterStar3.flow(1e4,30),e.circleImage3.setVisible(!0),e.tweenShowCircle3.play()},callbackScope:this})},t}(Phaser.GameObjects.Particles.ParticleEmitterManager),LE=_E,DE=function(e){function t(t,n,i,a){var s;return(s=e.call(this,t,n,i,a)||this).scene=void 0,s.textScoreReached=void 0,s.closeTimerEvent=void 0,s.tweenBackground=void 0,s.starSuperTwinkle=void 0,s.open=function(t){e.prototype.open.call((0,Ba.Z)(s),t),s.scene.enableInput(),s.runPopupEntrancesAnimation(300,300),s.textScoreReached.restart(),s.scene.audio.playSound(Ka.Z.SCORE_REACHED)},s.close=function(){e.prototype.close.call((0,Ba.Z)(s))},s.scene=t,s.setDepth(za.Ks.POPUP),s.background.setAlpha(0),s.createContent(),s}(0,o.Z)(t,e);var n=t.prototype;return n.runPopupEntrancesAnimation=function(e,t){var n=this;this.tweenBackground||(this.tweenBackground=this.scene.tweens.addCounter({paused:!0,from:0,to:.6,delay:e,duration:t,onUpdate:function(e){var t=e.getValue();n.background.setAlpha(t)},onComplete:function(){n.textScoreReached.start(),n.starSuperTwinkle.playConfettiAnimation(),n.handleDelegate(),n.runAnim()}})),this.tweenBackground.play()},n.handleDelegate=function(){var e,t=this,n=this.getData(["duration","onClose"]),i=n[0],a=void 0===i?0:i,s=n[1];null==(e=this.closeTimerEvent)||e.remove(),a>0&&(this.closeTimerEvent=this.scene.time.addEvent({delay:a,callback:function(){t.visible&&t.scene.screen.close(t.name),s&&s()}}))},n.runAnim=function(){},n.createContent=function(){this.createText(),this.createAnim()},n.createText=function(){var e=this.scene.facebook.getLocale();this.textScoreReached="ar"==e?new sE(this.scene,{text:this.scene.lang.Text.SCORE_REACHED,font:Xa.Z.PRIMARY_LIGHT.KEY,size:this.scene.fontSize(180)}):new aE(this.scene,{text:this.scene.lang.Text.SCORE_REACHED,font:Xa.Z.PRIMARY_LIGHT.KEY,size:this.scene.fontSize(70)}),this.add(this.textScoreReached),Phaser.Display.Align.In.Center(this.textScoreReached,this)},n.createAnim=function(){this.starSuperTwinkle=new LE(this.scene),this.add(this.starSuperTwinkle),this.add(this.starSuperTwinkle.getImages())},t}(GameCore.Screen),ME=Wa.Z.DEFAULT,NE=ME.KEY,BE=ME.FRAME,GE=function(e){function t(t,n){var i;return(i=e.call(this,t)||this).onClick=void 0,i.options=void 0,i.text=void 0,i.panel=void 0,i.icon=void 0,i.animOn=void 0,i.animOff=void 0,i.setSize(n.width,n.height),i.options=n,i.createPanel(),i.createIcon(),i.createText(),i.createAnimation(),i.updateStatus(i.options.enable),i.createInput(),i}(0,o.Z)(t,e);var n=t.prototype;return n.createInput=function(){var e=this;this.setInteractive({useHandCursor:!0}).on(Phaser.Input.Events.POINTER_DOWN,(function(){e.options.enable?e.animOff.play():e.animOn.play(),e.onClick&&e.onClick(!e.options.enable)}))},n.createPanel=function(){this.panel=this.scene.make.image({key:NE,frame:BE.BUTTON_TOGGLE_ON}),this.panel.setWorldSize(this.width,this.height),this.add(this.panel),Phaser.Display.Align.In.Center(this.panel,this)},n.createIcon=function(){this.icon=this.scene.make.image({key:NE,frame:BE.BUTTON_CIRCLE}),this.icon.setWorldSize(27,27),this.add(this.icon),Phaser.Display.Align.In.LeftCenter(this.icon,this)},n.createText=function(){var e=this.scene.world.getPixelRatio();this.text=this.scene.make.image({key:NE,frame:BE.TEXT_ON});var t=this.text,n=t.width,i=t.height;this.text.setWorldSize(n/e,i/e),this.add(this.text),Phaser.Display.Align.In.Center(this.text,this.panel,-10)},n.createAnimation=function(){var e=this;this.animOn=this.scene.add.tween({targets:this.icon,duration:200,paused:!0,x:{from:-this.panel.width/2+this.icon.width/2,to:this.panel.width/2-this.icon.width/2-3},onComplete:function(){var t=e.scene.world.getPixelRatio();Phaser.Display.Align.In.Center(e.text,e.panel,-10),e.text.setFrame(BE.TEXT_ON);var n=e.text,i=n.width,a=n.height;e.text.setWorldSize(i/t,a/t),e.panel.setFrame(BE.BUTTON_TOGGLE_ON),e.panel.setWorldSize(e.width,e.height),e.options.enable=!0}});var t=this.scene.facebook.getLocale();this.animOff=this.scene.add.tween({targets:this.icon,duration:200,paused:!0,x:{from:this.panel.width/2-this.icon.width/2,to:-this.panel.width/2+this.icon.width/2},onComplete:function(){var n=e.scene.world.getPixelRatio();e.text.setFrame(BE.TEXT_OFF);var i=e.text,a=i.width,s=i.height;e.text.setWorldSize(a/n,s/n),e.panel.setFrame(BE.BUTTON_TOGGLE_OFF),e.panel.setWorldSize(e.width,e.height),e.options.enable=!1;var r=0;"it"==t&&(r=3),"pt"==t&&(r=5),Phaser.Display.Align.In.RightCenter(e.text,e.panel,-11+r)}})},n.updateStatus=function(e){this.options.enable=e,e?this.animOn.play():this.animOff.play()},t}(Phaser.GameObjects.Container),FE=GE,UE=Wa.Z.DEFAULT,HE=UE.KEY,ZE=UE.FRAME,YE=function(e){function t(t){var n;return(n=e.call(this,t,HE,ZE.BUTTON_MINOR)||this).button.setWorldSize(64,55),n.setName("Home"),n.createIcon(),n}return(0,o.Z)(t,e),t.prototype.createIcon=function(){var e=this.scene.make.image({key:HE,frame:ZE.ICON_HOME});e.setWorldSize(31,28),this.add(e),Phaser.Display.Align.In.Center(e,this,0,-2)},t}(ja.Z),VE=YE,WE=Wa.Z.DEFAULT,zE=WE.KEY,KE=WE.FRAME,jE=function(e){function t(t){var n;return(n=e.call(this,t,zE,KE.BUTTON_MINOR)||this).button.setWorldSize(64,55),n.setName("Journey"),n.createIcon(),n}return(0,o.Z)(t,e),t.prototype.createIcon=function(){var e=this.scene.make.image({key:zE,frame:KE.ICON_JOURNEY_2});e.setWorldSize(35,28),this.add(e),Phaser.Display.Align.In.Center(e,this,-.25,-1.5)},t}(ja.Z),XE=jE,JE=Wa.Z.DEFAULT,qE=JE.KEY,QE=JE.FRAME,$E=function(e){function t(t){var n;return(n=e.call(this,t,qE,QE.BUTTON_DARK_BLUE)||this).button.setWorldSize(246,53),n.setName("PlayWithFriends"),n.createIcon(),n.createText(),n}(0,o.Z)(t,e);var n=t.prototype;return n.createIcon=function(){var e=this.scene.make.image({key:qE,frame:QE.ICON_SWORD_BLUE});e.setWorldSize(31,25),this.add(e),Phaser.Display.Align.In.Center(e,this,-60)},n.createText=function(){var e=this.scene.make.image({key:qE,frame:QE.TEXT_PLAY_WITH_BLUE});e.setWorldSize(102,16),this.add(e),Phaser.Display.Align.In.Center(e,this,20)},t}(ja.Z),eS=$E,tS=Wa.Z.DEFAULT,nS=tS.KEY,iS=tS.FRAME,aS=function(e){function t(t){var n;return(n=e.call(this,t,nS,iS.BUTTON_BROWN)||this).icon=void 0,n.text=void 0,n.button.setWorldSize(246,53),n.setName("Replay"),n.createIcon(),n.createText(),n.alignItems(),n}(0,o.Z)(t,e);var n=t.prototype;return n.createIcon=function(){this.icon=this.scene.make.image({key:nS,frame:iS.ICON_REPLAY}),this.icon.setWorldSize(26,31),this.add(this.icon)},n.createText=function(){var e=this.scene.world.getPixelRatio();this.text=this.scene.make.image({key:nS,frame:iS.TEXT_REPLAY});var t=this.text,n=t.width,i=t.height;this.text.setWorldSize(n/e,i/e),this.add(this.text)},n.alignItems=function(){var e=this.icon.width/2+this.text.width/2;Phaser.Display.Align.In.Center(this.icon,this,-e+this.icon.width/2-5,-2),Phaser.Display.Align.In.Center(this.text,this,e-this.text.width/2+5,-1)},t}(ja.Z),sS=aS,rS=Wa.Z.DEFAULT,oS=rS.KEY,cS=rS.FRAME,lS=function(e){function t(t,n,a,s){var o;return(o=e.call(this,t,n,a,s)||this).scene=void 0,o.popup=void 0,o.title=void 0,o.buildVersionText=void 0,o.buttonClose=void 0,o.contents=void 0,o.backgroundContent=void 0,o.settingMusic=void 0,o.settingSound=void 0,o.settingVibrate=void 0,o.settingSoundContainer=void 0,o.settingMusicContainer=void 0,o.settingVibrateContainer=void 0,o.popupShowUpAnimation=void 0,o.popupFadeOutAnimation=void 0,o.contentShowUpAnimation=void 0,o.buttonReplay=void 0,o.buttonPlayWithFriend=void 0,o.buttonHome=void 0,o.buttonJourney=void 0,o.popupFadeInMaskAnimation=void 0,o.popupFadeOutMaskAnimation=void 0,o.handleClose=function(){o.runCloseAnimation()},o.handleMusicSetting=function(e){o.scene.player.setSetting("music",e),e?o.scene.audio.playMusic():o.scene.audio.pauseMusic()},o.handleSoundSetting=function(e){o.scene.player.setSetting("sound",e)},o.handleVibrateSetting=function(e){e&&Zp(199),o.scene.player.setSetting("vibrate",e)},o.clickReplay=function(){o.runCloseAnimation(),o.popupFadeOutAnimation.next((0,r.Z)(l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o.scene.usedRescue=!1,o.scene.screen.close(o.name),e.next=4,o.scene.storage.dispatch(function(){var e=(0,r.Z)(l().mark((function e(t,n){var a,s,r,o,c,h,u;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,s=window.game,r=s.globalScene,o=s.lang,r.screen.open(za.o4.NOTIFY_SCREEN,{message:o.Text.LOADING,loading:!0}),c=n(),h=Ec(c),la()(a=[fa,Ea]).call(a,h)&&(t(ah()),t($l())),u=null,h===ma&&(u=el(c),t({type:Gn,payload:{}})),t(fh()),e.next=11,t(Dh(h,u));case 11:e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),(0,i.tO)(e.t0);case 16:return e.prev=16,Th(300),e.finish(16);case 19:case"end":return e.stop()}}),e,null,[[0,13,16,19]])})));return function(t,n){return e.apply(this,arguments)}}());case 4:Vc.emit(vo.REPLAY);case 5:case"end":return e.stop()}}),e)}))))},o.clickButtonPlayWithFriends=(0,r.Z)(l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.scene.storage.dispatch(wh());case 2:o.scene.startGame(),o.scene.screen.close(o.name);case 4:case"end":return e.stop()}}),e)}))),o.clickButtonHome=function(){o.runCloseAnimation(),o.popupFadeOutAnimation.next((0,r.Z)(l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:o.scene.scene.switch(Pa.Co.DASHBOARD_SCENE);case 1:case"end":return e.stop()}}),e)}))))},o.clickButtonLeaderboard=function(){o.scene.screen.open(za.o4.LEADER_BOARD_SCREEN)},o.clickButtonShare=function(){o.runCloseAnimation(),o.popupFadeOutAnimation.next((0,r.Z)(l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:o.scene.storage.dispatch(vl());case 1:case"end":return e.stop()}}),e)}))))},o.scene=t,o.createPopup(),o.createTitle(),o.createContentBackground(),o.createSwitchButtons(),o.createButtons(),o.createBuildVersionText(),o.addItem(),o.arrangeItems(),o.createInput(),o.setDepth(za.Ks.POPUP),o.background.setAlpha(.5),o.scene.world.isLandscape()&&o.popup.setScale(o.popup.scale-.1),o}(0,o.Z)(t,e);var n=t.prototype;return n.open=function(){var t;e.prototype.open.call(this);var n=this.scene.player.getPlayerSettings(),i=n.sound,a=n.vibrate;this.settingSound.updateStatus(i),null==(t=this.settingVibrate)||t.updateStatus(a),this.runOpenAnimation()},n.createContentBackground=function(){this.backgroundContent=this.scene.make.image({key:oS,frame:cS.POPUP_CONTENT_BACKGROUND}),this.backgroundContent.setWorldSize(263,147),this.popup.add(this.backgroundContent),Phaser.Display.Align.In.TopCenter(this.backgroundContent,this.popup,0,-48)},n.createInput=function(){this.buttonClose.onClick=this.handleClose,this.settingSound.onClick=this.handleSoundSetting,this.settingVibrate&&(this.settingVibrate.onClick=this.handleVibrateSetting)},n.createPopup=function(){this.popup=new as.Z(this.scene,0,0,290,390),this.add(this.popup),Phaser.Display.Align.In.Center(this.popup,this.zone)},n.createTitle=function(){this.title=this.scene.add.container();var e=this.scene.world.getPixelRatio(),t=this.scene.make.image({key:oS,frame:cS.TEXT_SETTING}),n=t.width,i=t.height;t.setWorldSize(n/e,i/e),this.buttonClose=new ja.Z(this.scene,oS,cS.BUTTON_CLOSE,35,35),this.buttonClose.setName("Close"),this.title.add([t,this.buttonClose]),Phaser.Display.Align.In.Center(t,this.title,0,11),Phaser.Display.Align.In.Center(this.buttonClose,this.title,135,-14)},n.createBuildVersionText=function(){if("__GA_CONFIG"in window){var e=window.__GA_CONFIG.BUILD_VERSION,t=void 0===e?"null":e;"null"!==t&&(this.buildVersionText=this.scene.make.bitmapText({font:Xa.Z.PRIMARY_LIGHT.KEY,size:this.scene.fontSize(25),text:"Build: "+t,origin:{x:.5,y:.5}}),this.popup.add(this.buildVersionText),Phaser.Display.Align.In.BottomCenter(this.buildVersionText,this.popup,0,-2))}},n.createButtons=function(){this.createReplayButton(),this.createHomeButton(),this.createJourneyButton()},n.createReplayButton=function(){this.buttonReplay=new sS(this.scene),this.popup.add(this.buttonReplay),this.buttonReplay.onClick=this.clickReplay,Phaser.Display.Align.In.Center(this.buttonReplay,this.popup,0,43)},n.createPlayWithFriendButton=function(){this.buttonPlayWithFriend=new eS(this.scene),this.popup.add(this.buttonPlayWithFriend),this.buttonPlayWithFriend.onClick=this.clickButtonPlayWithFriends,Phaser.Display.Align.In.Center(this.buttonPlayWithFriend,this.buttonReplay,0,65)},n.createHomeButton=function(){this.buttonHome=new VE(this.scene),this.popup.add(this.buttonHome),this.buttonHome.onClick=this.clickButtonHome,Phaser.Display.Align.In.Center(this.buttonHome,this.buttonReplay,-60,72)},n.createJourneyButton=function(){this.buttonJourney=new XE(this.scene),this.popup.add(this.buttonJourney),this.buttonJourney.onClick=this.clickButtonJourney.bind(this),Phaser.Display.Align.In.Center(this.buttonJourney,this.buttonReplay,60,72)},n.clickButtonJourney=function(){var e=this;this.runCloseAnimation(),this.popupFadeOutAnimation.next((0,r.Z)(l().mark((function t(){return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.scene.scene.switch(Pa.Co.LEVEL_SCENE);case 1:case"end":return t.stop()}}),t)}))))},n.createSwitchButtons=function(){var e=this.scene.player.getPlayerSettings(),t=(e.music,e.sound),n=e.vibrate;this.createSoundButton(t),Up()&&!GameCore.Utils.Device.isIOS()?(this.createVibrateButton(n),Phaser.Display.Align.In.Center(this.settingSoundContainer,this.backgroundContent,0,-33),Phaser.Display.Align.In.Center(this.settingVibrateContainer,this.backgroundContent,0,28)):Phaser.Display.Align.In.Center(this.settingSoundContainer,this.backgroundContent,0,0)},n.createMusicButton=function(e){this.settingMusicContainer=this.scene.make.container({});var t=this.scene.make.image({key:oS,frame:cS.ICON_MUSIC});t.setWorldSize(37,40),this.settingMusic=new FE(this.scene,{enable:e,width:89,height:31}),this.settingMusic.setName("Music"),Phaser.Display.Align.In.Center(t,this.settingMusicContainer,-60),Phaser.Display.Align.In.Center(this.settingMusic,this.settingMusicContainer,40),this.settingMusicContainer.add([t,this.settingMusic]),this.popup.add(this.settingMusicContainer),Phaser.Display.Align.In.Center(this.settingMusicContainer,this.backgroundContent,0,60)},n.createVibrateButton=function(e){this.settingVibrateContainer=this.scene.make.container({});var t=this.scene.make.image({key:oS,frame:cS.ICON_VIBRATE});t.setWorldSize(41,48),this.settingVibrate=new FE(this.scene,{enable:e,width:89,height:31}),this.settingVibrate.setName("Vibrate"),this.settingVibrateContainer.add([t,this.settingVibrate]),Phaser.Display.Align.In.Center(t,this.settingVibrateContainer,-60),Phaser.Display.Align.In.Center(this.settingVibrate,this.settingVibrateContainer,35),this.popup.add(this.settingVibrateContainer)},n.createSoundButton=function(e){this.settingSoundContainer=this.scene.make.container({});var t=this.scene.make.image({key:oS,frame:cS.ICON_SOUND});t.setWorldSize(41,36),this.settingSound=new FE(this.scene,{enable:e,width:89,height:31}),this.settingSound.setName("Sound"),this.settingSoundContainer.add([t,this.settingSound]),Phaser.Display.Align.In.Center(t,this.settingSoundContainer,-58),Phaser.Display.Align.In.Center(this.settingSound,this.settingSoundContainer,35),this.popup.add(this.settingSoundContainer)},n.addItem=function(){this.popup.add([this.title]),this.contents=this.scene.add.group(),this.contents.addMultiple([])},n.arrangeItems=function(){Phaser.Display.Align.In.TopCenter(this.title,this.popup)},n.runOpenAnimation=function(){var e;null!=(e=this.popupShowUpAnimation)&&null!=(e=e.tween)&&e.isPlaying()||(this.scene.audio.playSound(Ka.Z.POPUP_SHOW),this.runPopupEntrancesAnimation(0,300),this.runFadeInMaskAnimation(100,300),this.runPopupContentEntrancesAnimation(200,300))},n.runCloseAnimation=function(){var e;null!=(e=this.popupFadeOutAnimation)&&null!=(e=e.tween)&&e.isPlaying()||(this.runPopupExitsAnimation(50,200),this.runFadeOutMaskAnimation(0,200))},n.runPopupEntrancesAnimation=function(e,t){if(!this.popupShowUpAnimation){var n=this.popup.scale;this.popupShowUpAnimation=new is.Z({targets:[this.popup],delay:e,duration:t,props:{y:0,alpha:{start:1,from:1,to:1},scale:{start:0,from:0,to:n}}})}this.popupShowUpAnimation.play()},n.runPopupContentEntrancesAnimation=function(e,t){var n;null==(n=this.contentShowUpAnimation)||n.remove(),this.contentShowUpAnimation=new ns.Z({targets:this.contents.getChildren(),duration:t,delay:e,props:{alpha:{start:0,from:0,to:1}}}),this.contentShowUpAnimation.play()},n.runPopupExitsAnimation=function(e,t){var n=this;this.popupFadeOutAnimation||(this.popupFadeOutAnimation=new ts.Z({targets:[this.popup],delay:e,duration:t,props:{scale:0},onComplete:function(){n.popup.setY(0),n.scene.screen.close(n.name)}})),this.popupFadeOutAnimation.play()},n.runFadeInMaskAnimation=function(e,t){if(!this.popupFadeInMaskAnimation){var n=this.background.alpha;this.popupFadeInMaskAnimation=new Eo.Z({targets:[this.background],delay:e,duration:t,props:{alpha:{start:0,from:0,to:n}}})}this.popupFadeInMaskAnimation.play()},n.runFadeOutMaskAnimation=function(e,t){if(!this.popupFadeOutMaskAnimation){var n=this.background.alpha;this.popupFadeOutMaskAnimation=new ts.Z({targets:[this.background],delay:e,duration:t,props:{alpha:{start:n,from:n,to:0}}})}this.popupFadeOutMaskAnimation.play()},t}(GameCore.Screen),hS=lS,uS=Wa.Z.DEFAULT,dS=uS.KEY,pS=uS.FRAME,gS=function(e){function t(t,n,i,a){var s;return(s=e.call(this,t,n,i,a)||this).scene=void 0,s.popup=void 0,s.title=void 0,s.contents=void 0,s.backgroundContent=void 0,s.textTargetScore=void 0,s.textScore=void 0,s.titleFrame=void 0,s.popupShowUpAnimation=void 0,s.popupFadeOutAnimation=void 0,s.contentShowUpAnimation=void 0,s.popupFadeInMaskAnimation=void 0,s.popupFadeOutMaskAnimation=void 0,s.handleClose=function(){s.runCloseAnimation()},s.scene=t,s.createPopup(),s.createTitle(),s.createContentBackground(),s.createTextTargetScore(),s.createTextScore(),s.addItem(),s.setDepth(za.Ks.POPUP),s.background.setAlpha(.5),s}(0,o.Z)(t,e);var n=t.prototype;return n.open=function(t){var n=this;e.prototype.open.call(this,t);var i=this.scene.levelManager.getCurrentTargetScore(),a=this.scene.levelManager.getCurrentIndex(),s=this.scene.world.getPixelRatio();this.textScore.setText(""+i),0===a?this.titleFrame.setFrame(pS.TEXT_FIRST_MILESTONE):this.titleFrame.setFrame(pS.TEXT_NEXT_MILESTONE),this.titleFrame.setWorldSize(this.titleFrame.width/s,this.titleFrame.height/s);var r=this.getData(["duration"])[0];this.runOpenAnimation(),this.scene.time.delayedCall(r,(function(){n.handleClose()}))},n.createContentBackground=function(){this.backgroundContent=this.scene.make.image({key:dS,frame:pS.POPUP_CONTENT_BACKGROUND}),this.backgroundContent.setWorldSize(263,135),this.popup.add(this.backgroundContent),Phaser.Display.Align.In.TopCenter(this.backgroundContent,this.popup,0,-24)},n.createTextTargetScore=function(){var e=this.scene.lang.Text;this.textTargetScore=this.scene.make.bitmapText({font:Xa.Z.PRIMARY.KEY,size:this.scene.fontSize(50),text:e.TARGET_SCORE,origin:{x:.5,y:.5}}),this.popup.add(this.textTargetScore),Phaser.Display.Align.In.Center(this.textTargetScore,this.backgroundContent,0,-30)},n.createTextScore=function(){this.textScore=this.scene.make.bitmapText({font:Xa.Z.PRIMARY.KEY,size:this.scene.fontSize(80),text:"0",origin:{x:.5,y:.5}}),this.popup.add(this.textScore),Phaser.Display.Align.In.Center(this.textScore,this.backgroundContent,0,15)},n.createPopup=function(){this.popup=new as.Z(this.scene,0,-19,290,218,{forceHeightTop:55}),this.add(this.popup),Phaser.Display.Align.In.Center(this.popup,this.zone)},n.createTitle=function(){var e=this.scene.world.getPixelRatio();this.title=this.scene.add.container(),this.titleFrame=this.scene.make.image({key:dS,frame:pS.TEXT_FIRST_MILESTONE}),this.titleFrame.setWorldSize(this.titleFrame.width/e,this.titleFrame.height/e),this.title.add([this.titleFrame]),this.popup.add(this.title),Phaser.Display.Align.In.Center(this.titleFrame,this.title,0,-10),Phaser.Display.Align.In.TopCenter(this.title,this.popup)},n.addItem=function(){this.popup.add([this.title]),this.contents=this.scene.add.group(),this.contents.addMultiple([])},n.runOpenAnimation=function(){var e;null!=(e=this.popupShowUpAnimation)&&null!=(e=e.tween)&&e.isPlaying()||(this.scene.audio.playSound(Ka.Z.POPUP_SHOW),this.runPopupEntrancesAnimation(0,300),this.runFadeInMaskAnimation(100,300),this.runPopupContentEntrancesAnimation(200,300))},n.runCloseAnimation=function(){var e;null!=(e=this.popupFadeOutAnimation)&&null!=(e=e.tween)&&e.isPlaying()||(this.runPopupExitsAnimation(50,200),this.runFadeOutMaskAnimation(0,200))},n.runPopupEntrancesAnimation=function(e,t){if(!this.popupShowUpAnimation){var n=this.popup.scale;this.popupShowUpAnimation=new is.Z({targets:[this.popup],delay:e,duration:t,props:{y:0,alpha:{start:1,from:1,to:1},scale:{start:0,from:0,to:n}}})}this.popupShowUpAnimation.play()},n.runPopupContentEntrancesAnimation=function(e,t){var n;null==(n=this.contentShowUpAnimation)||n.remove(),this.contentShowUpAnimation=new ns.Z({targets:this.contents.getChildren(),duration:t,delay:e,props:{alpha:{start:0,from:0,to:1}}}),this.contentShowUpAnimation.play()},n.runPopupExitsAnimation=function(e,t){var n=this;this.popupFadeOutAnimation||(this.popupFadeOutAnimation=new ts.Z({targets:[this.popup],delay:e,duration:t,props:{scale:0},onComplete:function(){n.popup.setY(0),n.scene.screen.close(n.name),n.scene.startGameAfterTargetScoreScreenClose()}})),this.popupFadeOutAnimation.play()},n.runFadeInMaskAnimation=function(e,t){if(!this.popupFadeInMaskAnimation){var n=this.background.alpha;this.popupFadeInMaskAnimation=new Eo.Z({targets:[this.background],delay:e,duration:t,props:{alpha:{start:0,from:0,to:n}}})}this.popupFadeInMaskAnimation.play()},n.runFadeOutMaskAnimation=function(e,t){if(!this.popupFadeOutMaskAnimation){var n=this.background.alpha;this.popupFadeOutMaskAnimation=new ts.Z({targets:[this.background],delay:e,duration:t,props:{alpha:{start:n,from:n,to:0}}})}this.popupFadeOutMaskAnimation.play()},t}(GameCore.Screen),fS=gS,mS=Wa.Z.DEFAULT,vS=mS.KEY,ES=mS.FRAME,SS=function(e){function t(t,n,i,a){var s;return(s=e.call(this,t,n,i,a)||this).popup=void 0,s.title=void 0,s.contents=void 0,s.scoreText=void 0,s.bestScoreText=void 0,s.tweenScoreText=void 0,s.popupShowUpAnimation=void 0,s.contentShowUpAnimation=void 0,s.popupFadeOutAnimation=void 0,s.scoreBlock=void 0,s.bestScoreBlock=void 0,s.playWithFriendsButton=void 0,s.homeButton=void 0,s.shareButton=void 0,s.bestScore=void 0,s.currentScore=void 0,s.payload=void 0,s.counterAnimation=void 0,s.scoreAnimation=void 0,s.scene=void 0,s.open=function(t){e.prototype.open.call((0,Ba.Z)(s),t),s.initScore(),s.updateScore(),s.setVisible(!0),s.runOpenAnimation()},s.clickPlayWithFriends=function(){s.scene.storage.dispatch(wh())},s.clickShare=function(){s.scene.storage.dispatch(ul())},s.handleClosePopup=function(){s.runCloseAnimation(),s.popupFadeOutAnimation.next((function(){}))},s.setVisible(!1),s.scene=t,s.setDepth(za.Ks.POPUP),s.createPopup(),s.createPopupContent(),s.createScoreAnimation(),Phaser.Display.Align.In.Center(s.popup,s.zone,0,-100),s.background.setVisible(!1),s}(0,o.Z)(t,e);var n=t.prototype;return n.createPopup=function(){this.popup=new as.Z(this.scene,0,0,300,310),this.add(this.popup)},n.createPopupContent=function(){this.createTitle(),this.createScoreBlock(),this.createBestScoreBlock(),this.createButtons(),this.contents=this.scene.make.group({}),this.contents.addMultiple([this.homeButton,this.playWithFriendsButton,this.shareButton])},n.createTitle=function(){this.title=this.scene.add.container();var e=this.scene.world.getPixelRatio(),t=this.scene.make.image({key:vS,frame:ES.TEXT_YOUR_SCORE}),n=t.width,i=t.height;t.setWorldSize(n/e,i/e),Phaser.Display.Align.In.Center(t,this.title,0,10);var a=new ja.Z(this.scene,vS,ES.BUTTON_CLOSE,35,35);a.onClick=this.handleClosePopup,a.setName("Close"),Phaser.Display.Align.In.RightCenter(a,this.title,165,-15),this.title.add([t,a]),this.popup.add(this.title),Phaser.Display.Align.In.TopCenter(this.title,this.popup,0,-2)},n.createScoreBlock=function(){this.scoreBlock=this.scene.add.container();var e=this.scene.make.image({key:vS,frame:ES.SCORE_PANEL});e.setWorldSize(263,76),this.scoreBlock.add(e),this.scoreText=this.scene.make.bitmapText({font:Xa.Z.PRIMARY.KEY,size:this.scene.fontSize(55),text:"0",origin:{x:.5,y:.5}}),this.scoreBlock.add(this.scoreText),this.popup.add(this.scoreBlock),Phaser.Display.Align.In.TopCenter(this.scoreBlock,this.popup,0,-90)},n.createBestScoreBlock=function(){this.bestScoreBlock=this.scene.add.container();var e=this.scene.make.image({key:vS,frame:ES.BEST_SCORE_FRAME_LONG});e.setWorldSize(193,77),this.bestScoreBlock.add(e),this.bestScoreText=this.scene.make.bitmapText({font:Xa.Z.PRIMARY.KEY,size:this.scene.fontSize(48),text:"0",origin:{x:.5,y:.5}}),this.bestScoreBlock.add(this.bestScoreText),Phaser.Display.Align.In.Center(this.bestScoreText,this.bestScoreBlock,0,16),this.popup.add(this.bestScoreBlock),Phaser.Display.Align.In.Center(this.bestScoreBlock,this.scoreBlock,0,65)},n.createButtons=function(){this.createButtonHome(),this.createButtonPlayWithFriend(),this.createButtonShare()},n.createButtonHome=function(){this.homeButton=new kg(this.scene),this.homeButton.onClick=this.clickHome.bind(this),this.popup.add(this.homeButton),Phaser.Display.Align.In.Center(this.homeButton,this.bestScoreBlock,-100,80)},n.clickHome=function(){this.scene.scene.switch(Pa.Co.DASHBOARD_SCENE)},n.createButtonPlayWithFriend=function(){this.playWithFriendsButton=new Hg(this.scene),this.playWithFriendsButton.onClick=this.clickPlayWithFriends,this.popup.add(this.playWithFriendsButton),Phaser.Display.Align.In.Center(this.playWithFriendsButton,this.bestScoreBlock,0,80)},n.createButtonShare=function(){this.shareButton=new Ng(this.scene),this.shareButton.onClick=this.clickShare,this.popup.add(this.shareButton),Phaser.Display.Align.In.Center(this.shareButton,this.bestScoreBlock,100,80)},n.runCloseAnimation=function(){this.runPopupExitsAnimation(0,200)},n.runPopupExitsAnimation=function(e,t){var n,i=this;this.popupFadeOutAnimation||(this.popupFadeOutAnimation=new ts.Z({targets:[this.popup],delay:e,duration:t,props:{scale:0},onComplete:function(){i.popup.setY(0)}})),null==(n=this.popupFadeOutAnimation)||n.play()},n.setBestScore=function(e){this.bestScoreText.setText(""+e)},n.runOpenAnimation=function(){this.scene.audio.playSound(Ka.Z.POPUP_SHOW),this.runPopupEntrancesAnimation(0,300),this.runPopupContentEntrancesAnimation(200,300)},n.runPopupEntrancesAnimation=function(e,t){if(!this.popupShowUpAnimation){var n=this.popup,i=(n.y,n.scale);this.popupShowUpAnimation=new is.Z({targets:[this.popup],delay:e,duration:t,props:{y:0,alpha:{start:1,from:1,to:1},scale:{start:0,from:0,to:i}}})}this.popupShowUpAnimation.play()},n.runPopupContentEntrancesAnimation=function(e,t){this.contentShowUpAnimation||(this.contentShowUpAnimation=new ns.Z({targets:this.contents.getChildren(),duration:t,delay:this.scene.tweens.stagger(80,{start:e}),props:{alpha:{start:0,from:0,to:1}}})),this.contentShowUpAnimation.play()},n.initScore=function(){var e=this.scene.player.getBestScore();this.bestScore=e,this.currentScore=0},n.updateScore=function(){var e=this.scene.storage.getState(),t=Uc(e),n=t.score,i=t.bestScore;if(void 0===n&&void 0===i){var a=Fc(e)[this.scene.player.getPlayerId()];n=(null==a?void 0:a.score)||0,i=this.scene.player.getBestScore()}this.bestScore=(i||0)<this.bestScore?this.bestScore:i||0,this.currentScore=n,this.updateData({bestScore:this.bestScore,currentScore:this.currentScore})},n.updateData=function(e){this.payload=e;var t=e.bestScore,n=e.currentScore;if(this.setBestScore(t),n<=t)return this.setCurrentScore(n),this.runScoreAnimation(),void(n>0?this.runScoreCounter():this.counterAnimation=null);this.runAnimation()},n.runAnimation=function(){this.runScoreCounter(),this.scene.time.delayedCall(1300,(function(){}))},n.runScoreAnimation=function(){this.scoreAnimation.play()},n.createScoreAnimation=function(){this.scoreAnimation=new $g({targets:[this.scoreText],props:{scale:{from:1,to:1.3}}})},n.runScoreCounter=function(){var e,t=this,n=this.payload,i=n.bestScore,a=n.currentScore;null==(e=this.counterAnimation)||e.remove(),this.counterAnimation=this.scene.tweens.addCounter({from:0,to:a,delay:700,duration:2e3,completeDelay:300,onUpdate:function(e){t.scene.audio.playSound(Ka.Z.SCORE_COUNT);var n=Math.floor(e.getValue());t.runScoreAnimation(),t.setCurrentScore(n)},onComplete:function(){t.setBestScore(i<a?a:i),t.setCurrentScore(a),t.scene.audio.playSound(Ka.Z.GAME_OVER)}})},n.setCurrentScore=function(e){this.scoreText.setText(""+e)},t}(GameCore.Screen),AS=SS;function yS(e,t){var n="undefined"!==typeof E()&&A()(e)||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){var n;if(!e)return;if("string"===typeof e)return TS(e,t);var i=g()(n=Object.prototype.toString.call(e)).call(n,8,-1);"Object"===i&&e.constructor&&(i=e.constructor.name);if("Map"===i||"Set"===i)return m()(e);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return TS(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var i=0;return function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function TS(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var IS=GameCore.Configs,CS=IS.Match,bS=(IS.Network,IS.Tutorial),OS=IS.Board,PS=IS.Ads,RS=Wa.Z.GAMEPLAY_32.FRAME,wS=function(e){function t(){for(var t,n,a=arguments.length,s=new Array(a),o=0;o<a;o++)s[o]=arguments[o];return(n=e.call.apply(e,T()(t=[this]).call(t,s))||this).lastTimeInputEnabled=0,n.usedRescue=!1,n.bestScoreGlareEffect=void 0,n.bestScore=0,n.isBestScoreScreenShowed=void 0,n.isGameOver=void 0,n.isShowedNextTargetScreen=void 0,n.piecesByFen=void 0,n.isGameError=void 0,n.gamePlayMode=void 0,n.isNextTarget=!1,n.layoutManager=void 0,n.tutorialManager=void 0,n.effectManager=void 0,n.levelManager=void 0,n.run=function(){try{var e;n.initManager();var t=n.storage.getState();if(null===Tc(t)&&n.storage.dispatch(Ch(!1)),n.tutorialManager.isValidForTutorial()||bS.ForceUseTutorial)return n.handleStartTutorial(),n.layoutManager.objects.main.praise.reset(),void n.player.incUserGuideDisplays();var i=Ec(t);if(wa()(e=[va,ma]).call(e,i)>=0){var a=n.player.getPlayerId(),s=el(t).playerId,r=nl(t,{playerId:a}),o=il(t,{opponentId:s});if(r&&o)return void n.screen.open(za.o4.GAME_OVER_SCREEN)}n.startGame()}catch(c){}},n.create=function(){e.prototype.create.call((0,Ba.Z)(n)),n.createBackground(pa.Z.BACKGROUND.KEY);var t=n.player.getBestScore();n.bestScore=t,n.createManager(),n.createScreens(),n.createBestScoreGlareEffect(),n.createInput(),n.listenEvents(),n.input.setTopOnly(!0),n.preLoadAds()},n.closeSettingScreen=function(){(0,Ba.Z)(n).screen.close(za.o4.SETTINGS_SCREEN)},n.closeGameOverScreen=function(){(0,Ba.Z)(n).screen.close(za.o4.GAME_OVER_SCREEN)},n.handlePauseGame=function(){n.isGameOver||n.checkReachTargetScore()||(0,Ba.Z)(n).screen.open(za.o4.SETTINGS_SCREEN)},n.handleShowInterstitialAd=function(){var e=(0,r.Z)(l().mark((function e(t){var a,s,r;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===t&&(t=!0),a=n.game,s=a.globalScene,r=a.lang,e.prev=2,n.audio.muteAll(),n.audio.pauseMusic(),n.ads.canbeShowInterstitialAd()){e.next=7;break}return e.abrupt("return");case 7:return s.screen.open(za.o4.NOTIFY_SCREEN,{message:r.Text.LOADING_AD,loading:!0}),e.next=10,n.ads.showInterstitialAdAsync();case 10:e.next=15;break;case 12:return e.prev=12,e.t0=e.catch(2),e.abrupt("return");case 15:return e.prev=15,s.screen.close(za.o4.NOTIFY_SCREEN),t&&n.postSessionScore(),s.screen.close(za.o4.NOTIFY_SCREEN),window.focus(),n.ads.preloadInterstitialAdAsync().catch(i.tO),n.audio.unmuteAll(),n.audio.playMusic(),e.finish(15);case 24:case"end":return e.stop()}}),e,null,[[2,12,15,24]])})));return function(t){return e.apply(this,arguments)}}(),n.rescued=function(){try{var e=n.layoutManager.objects.main,t=n.getLevelLogInfo(),i=t.level,a=t.score,s=t.levelName;n.analytics.levelRescue(i,a,s),e.board.rescue(),n.nextLevel(),n.usedRescue=!0}catch(r){}},n.replay=function(){n.addShortcut(),n.restartGame(),n.startGame()},n.setPlayerBestScore=(0,qi.D)((function(e){n.player.setBestScore(e)}),100),n}(0,o.Z)(t,e);var n=t.prototype;return n.preload=function(){this.events.on(Phaser.Scenes.Events.WAKE,this.run),this.events.on(Phaser.Scenes.Events.CREATE,this.run)},n.preLoadAds=function(){this.ads.preloadInterstitialAdAsync().catch((function(e){})),this.ads.preloadRewardedVideoAsync().catch((function(e){}))},n.createBestScoreGlareEffect=function(){this.bestScoreGlareEffect=new gu(this),this.bestScoreGlareEffect.setDepth(Va.Z.ON_TOP),Phaser.Display.Align.In.Center(this.bestScoreGlareEffect,this.gameZone)},n.createManager=function(){this.layoutManager=new bg(this),this.tutorialManager=new mo(this),this.effectManager=new kd(this),this.levelManager=new Au},n.initManager=function(){this.layoutManager.init(),this.tutorialManager.init(),this.effectManager.init()},n.createInput=function(){this.isGameOver||(this.layoutManager.objects.header.buttonSetting.onClick=this.handlePauseGame)},n.createScreens=function(){this.createSettingScreen(),this.createRescueScreen(),this.createGameOverScreen(),this.createYourScoreScreen(),this.createScoreReachedScreen(),this.createNextTargetScoreScreen(),this.createNoSpaceLeftScreen(),this.createTargetScoreScreen(),this.createLeaderboardScreen(),this.createMiniJourneyScreen()},n.createLeaderboardScreen=function(){this.screen.add(za.o4.LEADER_BOARD_SCREEN,uu)},n.createMiniJourneyScreen=function(){this.screen.add(za.o4.MINI_JOURNEY_SCREEN,jv)},n.createTargetScoreScreen=function(){this.screen.add(za.o4.TARGET_SCORE_SCREEN,fS)},n.createNoSpaceLeftScreen=function(){this.screen.add(za.o4.NO_SPACE_LEFT_SCREEN,rE)},n.createNextTargetScoreScreen=function(){this.screen.add(za.o4.NEXT_TARGET_SCORE_SCREEN,iE)},n.createScoreReachedScreen=function(){this.screen.add(za.o4.SCORE_REACHED_SCREEN,DE)},n.createYourScoreScreen=function(){this.screen.add(za.o4.YOUR_SCORE_SCREEN,AS)},n.createSettingScreen=function(){this.screen.add(za.o4.SETTINGS_SCREEN,hS)},n.startGame=function(){try{var e=this.layoutManager.objects,t=e.header,n=e.footer;this.isGameOver=!1,this.isBestScoreScreenShowed=!1,this.tutorialManager.skipTutorial(),this.closeSettingScreen(),this.closeGameOverScreen(),this.handleUsedRescue(),this.restartGame(),t.setVisible(!0),this.world.isLandscape()&&n.buttonSetting.setVisible(!0),t.progressBar.reset(),this.handleGameModeUI(),this.updateCurrentBestScore(),this.updateLevelManager(),this.updateProgressBar(),t.buttonSetting.setDisabled(!0),this.time.delayedCall(300,(function(){t.buttonSetting.setDisabled(!1)})),this.openTargetScoreScreen(),this.handleGameModeChange()}catch(a){this.isGameError||(this.isGameError=!0,this.replay()),(0,i.R0)(new Error("Start game scene"),{error:a,scene:"GameScene"})}},n.handleGameModeChange=function(){var e=this,t=[{selector:Ec,callback:function(t){t!==e.gamePlayMode&&e.handleGameModeUI()}}];this.handleStateChange(t)},n.handleGameModeUI=function(){var e,t,n=this.storage.getState();this.gamePlayMode=Ec(n),!this.gamePlayMode||wa()(e=[fa,Ea]).call(e,this.gamePlayMode)>=0?this.handleStartGameSingleMode():wa()(t=[va,ma]).call(t,this.gamePlayMode)>=0?this.handleStartGameFriendMode():this.handleStartGameSingleMode()},n.startGameAfterTargetScoreScreenClose=function(){var e,t=this.layoutManager.objects,n=t.main,i=t.footer,a=this.storage.getState(),s=Ec(a),r=this.getLevelLogInfo(),o=r.level,c=r.score,l=r.levelName;this.analytics.levelStart(o,c,l),this.levelManager.getCurrentIndex()>0&&n.board.handleTweenStartMission(),wa()(e=[va,ma,Ea]).call(e,s)>=0?i.pieces.showNewPieces():this.piecesByFen?i.pieces.showAvailablePieces(this.piecesByFen):i.pieces.showNewPieces()},n.openTargetScoreScreen=function(){var e=this;this.disableInput(),this.time.delayedCall(500,(function(){e.enableInput(),e.screen.open(za.o4.TARGET_SCORE_SCREEN,{duration:1500})}))},n.handleUsedRescue=function(){this.usedRescue&&this.storage.dispatch(Gh())},n.handleStartTutorial=function(){var e=this.layoutManager.objects,t=e.header,n=e.footer;this.analytics.event(Ot._.TUTORIAL_BEGIN),this.tutorialManager.start(),t.setVisible(!1),n.buttonSetting.setVisible(!1)},n.handleStartGameSingleMode=function(){var e,t,n=this.layoutManager.objects,i=n.main,a=n.footer,s=n.header;if(s.showItemSingleMode(),this.gamePlayMode==Ea)return i.praise.reset(),i.board.clearBoard(),void a.pieces.clearPieces();var r=this.storage.getState(),o=(null==(e=jc(r))?void 0:e.data)||{},c=(null==(t=jc(r))?void 0:t.score)||0;if(o){var l=o.fen,h=null;if(this.piecesByFen=null,l){var u=i.board.getBoardByFen(l);h=this.handleDynamicFenSize(u),this.piecesByFen=a.pieces.getPiecesByFen(l),this.isFenGameOver(h,this.piecesByFen)&&(h=null,this.piecesByFen=null,this.storage.dispatch(fh()),r=this.storage.getState(),c=0,this.resetRescuedGame())}i.board.clearBoard(),h&&i.board.startGame(h),a.pieces.clearPieces(),s.showItemSingleMode(),s.mainScoreBlock.setScore(c),s.mainScoreBlock.setScoreText(c),i.praise.reset()}},n.handleStartGameFriendMode=function(){var e=this.layoutManager.objects,t=e.header,n=e.main,i=e.footer;t.showItemPlayWithFriendsMode(),t.myScoreBlock.updateInfo(),t.opponentScoreBlock.updateInfo(),n.praise.reset(),n.board.clearBoard(),i.pieces.clearPieces()},n.listenEvents=function(){var e=this;Vc.on(vo.START_GAME,(function(){e.startGame()})),Vc.on(vo.RESCUE,this.rescued),Vc.on(vo.REPLAY,this.replay),Vc.on(vo.GAME_OVER,this.handleGameOver.bind(this)),Vc.on("handle_state_change",this.handleStateChange.bind(this))},n.postSessionScore=function(){var e=this.storage.getState(),t=Uc(e).score,n=void 0===t?0:t;this.storage.dispatch(_c(n))},n.getFen=function(){var e=this.layoutManager.objects,t=e.main,n=e.footer;return t.board.getFenByBoard()+" "+n.pieces.getFenByPieces()},n.createRescueScreen=function(){this.screen.add(za.o4.RESCUE_SCREEN,IE)},n.createGameOverScreen=function(){this.screen.add(za.o4.GAME_OVER_SCREEN,df)},n.updateCurrentBestScore=function(){var e=this.layoutManager.objects.header,t=this.player.getBestScore()||0,n=this.storage.getState(),i=Uc(n),a=i.score,s=void 0===a?0:a,r=i.bestScore,o=void 0===r?0:r,c=t>o?t:o;c=c>s?c:s,this.setPlayerBestScore(c),e.bestScoreBlock.setScoreText(c)},n.updateLevelManager=function(){var e=this.getCurrentScoreByMode();this.levelManager.updateCurrentLevelByScore(e)},n.updateProgressBar=function(){var e=this.layoutManager.objects.header,t=this.getCurrentScoreByMode(),n=this.levelManager.updateCurrentLevelByScore(t);e.progressBar.setTargetScore(n),e.progressBar.setPercent(t/n)},n.setIsGameOver=function(e){this.isGameOver=e},n.handleGameOver=function(){this.isGameOver=!0;var e=this.getLevelLogInfo(),t=e.level,n=e.score,i=e.levelName;this.analytics.levelFail(t,n,i),this.screen.open(za.o4.GAME_OVER_SCREEN)},n.handleRequestFinishGame=function(){var e=this;this.isGameOver=!0;var t=this.storage.getState(),n=Sc(t);n<CS.MaxRescueCount&&this.ads.preloadRewardedVideoAsync().catch((function(e){})),this.screen.open(za.o4.NO_SPACE_LEFT_SCREEN,{duration:3e3,onClose:function(){if(e.enableInput(),n<CS.MaxRescueCount&&PS.Enabled)return e.screen.open(za.o4.RESCUE_SCREEN),void(e.isGameOver=!1);e.usedRescue=!1,e.endGame()}})},n.addShortcut=function(){var e=new Date,t=this.player.getPlayerData().timeAddShortcut,n=new Date(t),i=n.getDay(),a=n.getMonth(),s=n.getFullYear(),r=e.getDay(),o=e.getMonth(),c=e.getFullYear();i==r&&a==o&&s==c||(this.player.setTimeAddShortcut(e.getTime()),this.facebook.attemptToAddShortcut())},n.checkAnimPlaying=function(){var e=this.tweens.getAllTweens();return!(!e||0===e.length)},n.disableInput=function(){var e=this.layoutManager.objects.footer;this.input.enabled=!1,e.pieces.allPieces.forEach((function(e){return e.cancelDrag()}))},n.enableInput=function(){this.input.enabled=!0},n.restartGame=function(){var e,t=this.layoutManager.objects,n=t.header,i=t.main;this.usedRescue=!1,null==(e=n.mainScoreBlock.addScore)||e.stop().remove(),n.mainScoreBlock.setScore(0),n.mainScoreBlock.setScoreText(0),n.myScoreBlock.setScore(0),n.myScoreBlock.setScoreText(0),n.progressBar.hideProgressBar(),n.progressBar.setPercent(0),this.levelManager.restart(),i.praise.listScore=[]},n.endGame=function(){var e=(0,r.Z)(l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.handleShowInterstitialAd(!1).catch(i.tO);case 2:this.storage.dispatch(function(){var e=(0,r.Z)(l().mark((function e(t,n){var a,s,r,o,c,h,u,d,p,g,f,m,v,E;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a=window.game,s=a.analytics,a.facebook,r=a.globalScene,o=a.lang,r.screen.open(za.o4.NOTIFY_SCREEN,{message:o.Text.LOADING,loading:!0}),c=n(),h=Ec(c),u=Uc(c),d=u.score,p=void 0===d?0:d,g=u.level,f=void 0===g?0:g,t(_c(p)),t(Lh(p)),e.next=10,t(Nh(h,{score:p}));case 10:c=n(),m=Ac(c),v=yc(c),E=Math.floor((v-m)/1e3),s.event(Ot._.MATCH_END,{game_mode:GameCore.Utils.String.toUpperCamelCase(h),level:f,level_name:"level_"+f,time_played:E}),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(0),(0,i.tO)(e.t0);case 20:return e.prev=20,Th(300),e.finish(20);case 23:case"end":return e.stop()}}),e,null,[[0,17,20,23]])})));return function(t,n){return e.apply(this,arguments)}}()),this.resetRescuedGame();case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.handleUpdateScore=function(e){if(!this.tutorialManager.isRunning()){var t=this.getCurrentScoreByMode()+e;this.storage.dispatch(vh({score:t})),this.updateMatchData()}},n.handleAddScoreAnim=function(e){var t,n=this.layoutManager.objects.header,i=this.storage.getState(),a=Ec(i);this.tutorialManager.isRunning()?n.mainScoreBlock.animAddScore(e):a&&a!==fa&&a!==Ea&&wa()(t=[va,ma]).call(t,a)>=0?n.myScoreBlock.animAddScore(e):n.mainScoreBlock.animAddScore(e)},n.getBestScore=function(){var e=this.storage.getState();return Uc(e).bestScore},n.bestScoreReached=function(){if(!this.isBestScoreScreenShowed&&!this.isGameOver){var e=this.getBestScore(),t=this.getCurrentScoreByMode();!e||e>=t||(this.setPlayerBestScore(t),this.isBestScoreScreenShowed=!0,this.audio.playSound(Ka.Z.CONGRATULATION),this.bestScoreGlareEffect.playEffect())}},n.updateProgressTargetScore=function(e){var t=this.layoutManager.objects.header,n=e/t.progressBar.getTargetScore();t.progressBar.setPercent(n)},n.checkReachTargetScore=function(){var e=this.layoutManager.objects.header;return this.getCurrentScoreByMode()>=e.progressBar.getTargetScore()},n.handleNextTargetScore=function(){var e=this;if(!this.isGameOver&&(this.checkReachTargetScore()&&!this.isShowedNextTargetScreen)){this.isShowedNextTargetScreen=!0,this.disableInput();var t=this.getLevelLogInfo(),n=t.level,a=t.score,s=t.levelName;this.analytics.levelComplete(n,a,s),this.screen.open(za.o4.SCORE_REACHED_SCREEN,{duration:4e3,onClose:function(){var t=(0,r.Z)(l().mark((function t(){return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.isShowedNextTargetScreen=!1,t.next=3,e.handleShowInterstitialAd(!1).catch(i.tO);case 3:e.showNextTargetScreen();case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()})}},n.getCurrentScoreByMode=function(){var e,t=this.storage.getState(),n=Ec(t),i=this.layoutManager.objects.header;return n&&n!==fa&&n!==Ea&&wa()(e=[va,ma]).call(e,n)>=0?i.myScoreBlock.score:i.mainScoreBlock.score},n.showNextTargetScreen=function(){var e=this.getCurrentScoreByMode();this.levelManager.updateCurrentLevelByScore(e);this.screen.open(za.o4.NEXT_TARGET_SCORE_SCREEN)},n.updateMatchData=function(){if(!this.tutorialManager.isRunning()){var e=this.getFen(),t=this.storage.getState(),n=jc(t).data||{},a=Ec(t),r=Sc(t);if(!a||a===fa){var o,c,l=Xc(t),h=Uc(t).score,u=void 0===h?0:h;this.storage.dispatch((o=l,c={score:u,rescued:r,data:(0,s.Z)({},n,{fen:e}),updateAt:Date.now()},function(e,t){try{Yl((0,s.Z)({matchId:o},c));var n=t(),a=Xc(n);Vl({matchId:o,currentMatchId:a}),e({type:In,payload:{match:c}});var r=c.data;c.data=ql(r),wl(Jl.SingleMatchStore,c)}catch(l){if(l instanceof xl)return;(0,i.tO)(l)}}))}}},n.nextLevel=function(){var e=this.layoutManager.objects.header,t=this.getCurrentScoreByMode(),n=this.levelManager.updateCurrentLevelByScore(t);this.isNextTarget=!0,e.progressBar.hideProgressBar(),e.progressBar.setTargetScore(n),e.progressBar.setPercent(t/n);var i=this.getLevelLogInfo(),a=i.level,s=i.levelName;this.analytics.levelStart(a,t,s)},n.update=function(e){this.input.enabled||this.checkAnimPlaying()?this.lastTimeInputEnabled=e:e-this.lastTimeInputEnabled>=3e3&&(this.enableInput(),this.lastTimeInputEnabled=e)},n.isFenGameOver=function(e,t){for(var n=[],i=0;i<t.length;i++){var a=t[i],s=a.type,r=a.direction,o=a.isReverse;switch(s){case Ds:case Ms:case Ns:n.push({data:hd.getData(s,r,o)});break;case Bs:case Gs:case Fs:case Us:n.push({data:dd.getData(s,r)});break;case Hs:case Zs:case Ys:n.push({data:gd.getData(s)});break;case Ws:n.push({data:md.getData(r)});break;case zs:n.push({data:Cd.getData(r)});break;case Qs:n.push({data:Od.getData(r)});break;case js:case Xs:case Js:case qs:n.push({data:Ed.getData(s,r)});break;case Vs:n.push({data:Ad.getData(r)});break;case Ks:n.push({data:Td.getData()})}}return zu(e,n)},n.handleDynamicFenSize=function(e){var t,n,i=0;if((n=e.length)&&(i=e[0].length),0===n||0===i)return e;var a=T()(t=[]).call(t,e);if(n>OS.rows)Fa()(a).call(a,OS.rows,n-OS.rows);else if(i<OS.rows)for(var s=0;s<OS.rows-n;s++){var r;a.push(Ha()(r=new Array(n)).call(r,{value:0,frame:RS.GEM_TRANSPARENT}))}if(i>OS.cols)for(var o,c=yS(a);!(o=c()).done;){var l=o.value;Fa()(l).call(l,OS.cols,i-OS.cols)}else if(i<OS.cols)for(var h,u=yS(a);!(h=u()).done;)for(var d=h.value,p=0;p<OS.cols-i;p++)d.push({value:0,frame:RS.GEM_TRANSPARENT});return a},n.checkAndAddShortcut=function(){if(!this.game.player.getPlayer().isUserNew){var e=this.storage.getState();ya(e)!=Ea&&this.facebook.attemptToAddShortcut()}},n.getLevelName=function(){var e,t=this.levelManager.getCurrentIndex()+1;return"target_"+Ya()(e=GameCore.Utils.Number).call(e,t,4,"0")},n.getLevelLogInfo=function(){return{level:this.levelManager.getCurrentIndex()+1,score:this.getCurrentScoreByMode(),levelName:this.getLevelName()}},n.resetRescuedGame=function(){this.storage.dispatch((function(e){e({type:mn,payload:{}}),wl(Eh.SingleMatchStore,{rescued:0})}))},t}(du.Z);var xS=wS,kS=n(206),_S=function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).name="LoadResourceFail",i.message=t||"Load resource fail",i.payload=n,i}return(0,o.Z)(t,e),t}((0,N.Z)(Error)),LS=[{id:"pass-levels",title:"PASS_10_LEVELS",require:{level:10},reward:{diamond:100}},{id:"collect-diamonds",title:"COLLECT_300_DIAMONDS",require:{diamond:300},reward:{diamond:100}},{id:"reach-score",title:"REACH_TOTAL_SCORES",require:{score:1e5},reward:{diamond:200}}],DS=function(){var e=(0,r.Z)(l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",LS);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),MS=(0,ce.P1)([function(e){var t;return null==(t=e[Ei])?void 0:t.tasks}],(function(e){return e})),NS=(0,ce.P1)([function(e){var t;return null==(t=e[Ei])?void 0:t.process}],(function(e){return e})),BS=(0,ce.P1)([function(e){var t;return null==(t=e[Ei])?void 0:t.isRequesting}],(function(e){return e})),GS=((0,ce.P1)([function(e){var t;return null==(t=e[Ei])?void 0:t.isNotice}],(function(e){return e})),GameCore.Configs.DailyTasks),FS=function(e){return function(t){t({type:Ai,payload:{tasks:e}});var n=window.game.player.getCustomData("dailyTasks")||{},i=n.startedTime,a=void 0===i?0:i,s=n.logTasks,r=void 0===s?{}:s;t((Date.now()-a)/1e3>GS.Duration?US(e):HS(r))}},US=function(e){return function(t){var n={};e.forEach((function(e){var t=e.id,i=e.require;n[t]={},q()(i).forEach((function(e){var i;n[t]=((i={})[e]=0,i.rewarded=!1,i)}))})),window.game.player.setCustomData("dailyTasks",{logTasks:n,startedTime:Date.now()}),t(HS(n)),Vc.emit(Gc.EVENTS.TASKS_RESET)}},HS=function(e){return{type:yi,payload:{process:e}}},ZS=function(){var e=(window.game.player.getCustomData("dailyTasks")||{}).logTasks;return GameCore.Utils.Json.clone(e)},YS=function(){function e(e,t){var n=this;this.game=void 0,this.id=void 0,this.taskData=void 0,this.requireTypes=void 0,this.process=function(e,t){var i;void 0===t&&(t=!0);var a=e.type,s=e.value;if(!(s<1)&&(-1!==wa()(i=n.requireTypes).call(i,a)&&!n.isPassRequiredTarget(a)&&n.processMore(e))){a=e.type,s=e.value;var r=n.getCorrectValue(a,s);n.game.storage.dispatch(function(e,t,n,i){return void 0===i&&(i=!0),function(a){var s=ZS();if(GameCore.Utils.Valid.isObject(s)){var r=s;GameCore.Utils.Object.hasOwn(r,e)&&!r[e].rewarded&&(i&&(r[e][t]+=n,window.game.player.setCustomData("dailyTasks",{logTasks:r})),a({type:Ti,payload:{id:e,type:t,value:n}}))}}}(n.id,a,r,t)),n.isTaskFinished(a)&&n.game.storage.dispatch(function(e){return function(t){t({type:Ii,payload:{id:e}}),Vc.emit(Gc.EVENTS.NOTICE_UPDATE)}}(n.id))}},this.game=e,this.id=t,this.init()}var t=e.prototype;return t.init=function(){var e=this,t=this.game.storage.getState(),n=MS(t)||[];if(!((null==n?void 0:n.length)<1)){var i=null==n?void 0:O()(n).call(n,(function(t){return t.id===e.id}));i&&(this.taskData=i,this.requireTypes=q()(this.taskData.require),this.initEvents())}},t.getDataByType=function(e){var t=this.game.storage.getState(),n=NS(t),i={value:0,target:0};if(!n)return i;if(!GameCore.Utils.Object.hasOwn(n,this.taskData.id))return i;var a=n[this.taskData.id];if(GameCore.Utils.Valid.isObject(a)&&GameCore.Utils.Object.hasOwn(a,e)){var s=a[e];"number"===typeof s&&(i.value=s)}return i.target=this.taskData.require[e]||0,i},t.getCorrectValue=function(e,t){var n=this.getDataByType(e),i=n.value,a=n.target,s=t;return i+t>a&&(s=a-i),Math.round(s)},t.isPassRequiredTarget=function(e){var t=this.getDataByType(e);return t.value>=t.target},t.isTaskFinished=function(e){var t=this.getDataByType(e);return t.value>=t.target},e}(),VS=YS,WS=Gc.COLLECT_DIAMONDS,zS=WS.ID,KS=WS.EVENTS,jS=function(e){function t(t){return e.call(this,t,zS)||this}(0,o.Z)(t,e);var n=t.prototype;return n.initEvents=function(){Vc.off(KS.COLLECT_DIAMONDS,this.process),Vc.on(KS.COLLECT_DIAMONDS,this.process)},n.processMore=function(){return!0},t}(VS),XS=jS,JS=Gc.PASS_LEVELS,qS=JS.ID,QS=JS.EVENTS,$S=function(e){function t(t){return e.call(this,t,qS)||this}(0,o.Z)(t,e);var n=t.prototype;return n.initEvents=function(){Vc.off(QS.PASS_LEVEL,this.process),Vc.on(QS.PASS_LEVEL,this.process)},n.processMore=function(){return!0},t}(VS),eA=$S,tA=Gc.REACH_SCORE,nA=tA.ID,iA=tA.EVENTS,aA=function(e){function t(t){var n;return(n=e.call(this,t,nA)||this).totalScore=void 0,n.lastUpdate=void 0,n.totalScore=0,n.lastUpdate=Date.now(),n}(0,o.Z)(t,e);var n=t.prototype;return n.initEvents=function(){Vc.off(iA.ADD_SCORE,this.process),Vc.on(iA.ADD_SCORE,this.process)},n.processMore=function(e){var t=e.value,n=Date.now();return n-this.lastUpdate<3e3?(this.totalScore+=t,!1):(e.value+=this.totalScore,this.totalScore=0,this.lastUpdate=n,!0)},t}(VS),sA=aA,rA=function(){function e(e){var t=this;this.game=void 0,this.eventsListener=void 0,this.init=(0,r.Z)(l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.eventsListener={},e.next=3,t.initData();case 3:t.initEvents();case 4:case"end":return e.stop()}}),e)}))),this.initData=(0,r.Z)(l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.game.storage.dispatch(function(){var e=(0,r.Z)(l().mark((function e(t,n){var i,a;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=n(),!BS(i)){e.next=4;break}return e.abrupt("return");case 4:return t({type:Si,payload:{}}),e.next=7,DS();case 7:a=e.sent,t(FS(a));case 9:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}());case 2:case"end":return e.stop()}}),e)}))),this.game=e,this.init()}var t=e.prototype;return t.getEventListener=function(e){return this.eventsListener[e]},t.initEvents=function(){this.eventsListener[Gc.PASS_LEVELS.ID]=new eA(this.game),this.eventsListener[Gc.REACH_SCORE.ID]=new sA(this.game),this.eventsListener[Gc.COLLECT_DIAMONDS.ID]=new XS(this.game)},e}(),oA=rA,cA=GameCore.Configs,lA=cA.Match,hA=cA.Lives,uA=function(e){return function(t){setTimeout((function(){t(gA()),t(pA()),t(dA())}),e)}},dA=function(){return function(e){var t=60*hA.bonusDurationMins*1e3;setInterval((function(){e(gA()),e(pA())}),t)}},pA=function(){return function(e){e({type:Gi,payload:{}})}},gA=function(){return function(){var e=(0,r.Z)(l().mark((function e(t,n){var i,a,s,r,o,c,h;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,i=window.game.player,a=i.getPlayer(),s=a.playerId,r=n(),o=Sf(r),(c=hA.bonusLife+o)>hA.livesCapacity&&(c=hA.livesCapacity),h={lives:c,lastBonusLifeTime:(new Date).getTime()},t({type:Ni,payload:{data:h}}),e.next=11,window.FBInstant.player.setDataAsync({lives:h});case 11:wl(lA.LivesStore+"-"+s,h),e.next=16;break;case 14:e.prev=14,e.t0=e.catch(0);case 16:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(t,n){return e.apply(this,arguments)}}()},fA=function(){return function(){var e=(0,r.Z)(l().mark((function e(t,n){var i,a,s,r,o,c,h;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,i=n(),a=Sf(i)||0,s=Af(i)){e.next=8;break}return e.next=7,t(mA({lives:a,lastBonusLifeTime:(new Date).getTime()}));case 7:return e.abrupt("return");case 8:return r=(new Date).getTime(),o=Math.floor((r-s)/1e3/(60*hA.bonusDurationMins)),(c=o+a)>hA.livesCapacity&&(c=hA.livesCapacity),h={lives:c,lastBonusLifeTime:c===a?s:(new Date).getTime()},e.next=15,t(mA(h));case 15:e.next=19;break;case 17:e.prev=17,e.t0=e.catch(0);case 19:case"end":return e.stop()}}),e,null,[[0,17]])})));return function(t,n){return e.apply(this,arguments)}}()},mA=function(e){return function(){var t=(0,r.Z)(l().mark((function t(n){var i,a,s;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=window.game.player,a=i.getPlayer(),s=a.playerId,n({type:Ni,payload:{data:e}}),t.next=5,window.FBInstant.player.setDataAsync({lives:e});case 5:wl(lA.LivesStore+"-"+s,e);case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},vA=[{name:"collect-red-gems",id:"collect-gems",require:{red:5},reward:50},{name:"collect-blue-gems",id:"collect-gems",require:{blue:5},reward:50},{name:"collect-pink-gems",id:"collect-gems",require:{pink:5},reward:50},{name:"collect-green-gems",id:"collect-gems",require:{green:5},reward:50},{name:"collect-yellow-gems",id:"collect-gems",require:{yellow:5},reward:50},{name:"collect-red-blue-gems",id:"collect-gems",require:{red:5,blue:5},reward:120},{name:"collect-red-pink-gems",id:"collect-gems",require:{red:5,pink:5},reward:120},{name:"collect-red-green-gems",id:"collect-gems",require:{red:5,green:5},reward:120},{name:"collect-red-yellow-gems",id:"collect-gems",require:{red:5,yellow:5},reward:120},{name:"collect-blue-pink-gems",id:"collect-gems",require:{blue:5,pink:5},reward:120},{name:"collect-blue-green-gems",id:"collect-gems",require:{blue:5,green:5},reward:120},{name:"collect-blue-yellow-gems",id:"collect-gems",require:{blue:5,yellow:5},reward:120},{name:"collect-pink-green-gems",id:"collect-gems",require:{pink:5,green:5},reward:120},{name:"collect-pink-yellow-gems",id:"collect-gems",require:{pink:5,yellow:5},reward:120},{name:"collect-green-yellow-gems",id:"collect-gems",require:{green:5,yellow:5},reward:120},{name:"collect-red-blue-pink-gems",id:"collect-gems",require:{red:5,blue:5,pink:5},reward:210},{name:"collect-red-blue-green-gems",id:"collect-gems",require:{red:5,blue:5,green:5},reward:210},{name:"collect-red-blue-yellow-gems",id:"collect-gems",require:{red:5,blue:5,yellow:5},reward:210},{name:"collect-red-pink-green-gems",id:"collect-gems",require:{red:5,pink:5,green:5},reward:210},{name:"collect-red-pink-yellow-gems",id:"collect-gems",require:{red:5,pink:5,yellow:5},reward:210},{name:"collect-red-green-yellow-gems",id:"collect-gems",require:{red:5,green:5,yellow:5},reward:210},{name:"collect-blue-pink-green-gems",id:"collect-gems",require:{blue:5,pink:5,green:5},reward:210},{name:"collect-blue-pink-yellow-gems",id:"collect-gems",require:{blue:5,pink:5,yellow:5},reward:210},{name:"collect-blue-green-yellow-gems",id:"collect-gems",require:{blue:5,green:5,yellow:5},reward:210},{name:"collect-pink-green-yellow-gems",id:"collect-gems",require:{pink:5,green:5,yellow:5},reward:210}],EA=function(){var e=(0,r.Z)(l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",vA);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),SA=(0,ce.P1)([function(e){var t;return null==(t=e[ui])?void 0:t.missions}],(function(e){return e})),AA=(0,ce.P1)([function(e){var t;return null==(t=e[ui])?void 0:t.isRequesting}],(function(e){return e})),yA=((0,ce.P1)([SA,function(e,t){return t.name}],(function(e,t){return e?"string"!==typeof t?null:GameCore.Utils.Object.hasOwn(e,t)?e[t]:null:null})),function(e){return{type:pi,payload:{missions:e}}}),TA={TYPES:{COLLECT_GEMS:"collect-gems",USE_ITEM:"use-item",COMBO:"combo"},EVENTS:{MISSION_START:"mission-start",MISSION_UPDATE:"mission-update",MISSION_FAILED:"mission-failed",MISSION_COMPLETED:"mission-completed"}},IA=(0,ce.P1)([function(e){var t;return null==(t=e[ui])?void 0:t.mission}],(function(e){return e})),CA=((0,ce.P1)([IA],(function(e){return e?e.name:null})),function(){function e(e,t,n){var i=this;this.game=void 0,this.id=void 0,this.name=void 0,this.reward=void 0,this.process=function(e){var t=e.id,n=e.type,a=e.value;a<1||i.id===t&&i.isTypeRequired(n)&&i.processMore(e)&&(i.game.storage.dispatch(function(e,t,n){return{type:gi,payload:{name:e,type:t,value:n}}}(i.name,n,a)),i.isMissionComplete()&&(Vc.emit(TA.EVENTS.MISSION_COMPLETED,{name:i.name,reward:i.reward}),i.game.storage.dispatch(function(e){return{type:fi,payload:{name:e}}}(i.name))))},this.id=t,this.name=n,this.game=e}var t=e.prototype;return t.start=function(){var e=this.game.storage.getState(),t=IA(e);t&&t.name===this.name&&(this.reward=t.reward,this.initEvents())},t.getMissionData=function(){var e=this.game.storage.getState(),t=IA(e);return t?t.name!==this.name?null:t:null},t.getDataByType=function(e){var t=this.getMissionData();if(!t)return null;var n=t.require[e];return{value:t.process[e],target:n}},t.isTypeRequired=function(e){var t=this.getDataByType(e);return!!t&&t.target>0},t.isMissionComplete=function(){var e=this.getMissionData();if(!e)return!0;var t=e.require,n=e.process,i=!0;return q()(t).forEach((function(e){if(i){var a=t[e];n[e]<a&&(i=!1)}})),i},e}()),bA=CA,OA=TA.EVENTS,PA=TA.TYPES,RA=function(e){function t(t,n){return e.call(this,t,PA.COLLECT_GEMS,n)||this}(0,o.Z)(t,e);var n=t.prototype;return n.initEvents=function(){Vc.off(OA.MISSION_UPDATE,this.process),Vc.on(OA.MISSION_UPDATE,this.process)},n.processMore=function(){return!0},t}(bA),wA=RA,xA=TA.EVENTS,kA=TA.TYPES,_A=function(e){function t(t,n){return e.call(this,t,kA.COMBO,n)||this}(0,o.Z)(t,e);var n=t.prototype;return n.initEvents=function(){Vc.off(xA.MISSION_UPDATE,this.process),Vc.on(xA.MISSION_UPDATE,this.process)},n.processMore=function(e){var t=this.getMissionData();if(!t)return!1;var n=e.type;return e.value>=t.require[n]},t}(bA),LA=_A,DA=TA.EVENTS,MA=TA.TYPES,NA=function(e){function t(t,n){return e.call(this,t,MA.USE_ITEM,n)||this}(0,o.Z)(t,e);var n=t.prototype;return n.initEvents=function(){Vc.off(DA.MISSION_UPDATE,this.process),Vc.on(DA.MISSION_UPDATE,this.process)},n.processMore=function(e){return!0},t}(bA),BA=NA,GA=function(){function e(e){var t=this;this.game=void 0,this.listener=void 0,this.init=(0,r.Z)(l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.initData();case 2:t.initListeners(),t.initEvents();case 4:case"end":return e.stop()}}),e)}))),this.initData=(0,r.Z)(l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.game.storage.dispatch(function(){var e=(0,r.Z)(l().mark((function e(t,n){var i,a;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=n(),!AA(i)){e.next=4;break}return e.abrupt("return");case 4:return t({type:di,payload:{}}),e.next=7,EA();case 7:a=e.sent,t(yA(a));case 9:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}());case 2:case"end":return e.stop()}}),e)}))),this.startListener=function(e){t.listener[e]&&t.listener[e].start()},this.game=e,this.init()}var t=e.prototype;return t.initListeners=function(){var e=this;this.listener={};var t=this.game.storage.getState(),n=SA(t);n&&q()(n).forEach((function(t){switch(n[t].id){case TA.TYPES.COLLECT_GEMS:e.listener[t]=new wA(e.game,t);break;case TA.TYPES.COMBO:e.listener[t]=new LA(e.game,t);break;case TA.TYPES.USE_ITEM:e.listener[t]=new BA(e.game,t)}}))},t.initEvents=function(){Vc.off(TA.EVENTS.MISSION_START,this.startListener),Vc.on(TA.EVENTS.MISSION_START,this.startListener)},e}(),FA=GA,UA=function(e){try{var t=Aa(e),n=window.game.player,i=t.entryPointData||{},a=i.playerId,s=i.playerName,r=i.playerPhoto;return n.getPlayer().playerId===a?ga:new We.Z(a,s,r).toObject()}catch(o){return ga}},HA=function(){return function(e){try{window.game.facebook.getTournamentAsync().then((function(t){var n=t.getID().toString();e(Pc(n))})).catch((function(e){})),e(bh())}catch(t){}}},ZA=function(){return function(e,t){try{var n=t(),i=Aa(n),a=window.game.player,s=a.getPlayer(),r=i.contextId,o=(i.entryPointData||{}).playerId,c=s.playerId===o,l=UA(n);c||a.updateConnectedPlayers([l]);var h=l.playerId;e(wh(r,h,!0))}catch(u){throw new Error("processInviteMode: "+u)}}},YA=function(){return function(e,t){try{var n=t(),i=Aa(n),a=window.game.player.getPlayer(),s=i.entryPointData||{},r=s.matchId,o=s.opponentId,c=s.playerId,l=a.playerId===c;e(_h(r,l?o:c))}catch(h){throw new Error("processChallengeFriendMode: "+h)}}},VA=function(){return function(e,t){try{var n=t(),a=Aa(n).entryPointData||{},o=a.playerId,c=a.playerScore;e(mh(o,{score:c,level:0}));var h=UA(n);e(function(e){return function(){var t=(0,r.Z)(l().mark((function t(n){var a,s,r,o,c,h;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a=window.game,s=a.facebook,r=a.globalScene,o=a.analytics,c=a.lang,r.screen.open(za.o4.NOTIFY_SCREEN,{message:c.Text.LOADING,loading:!0}),h=s.getContextID(),Ah({contextId:h}),o.event(Ot._.JOIN_GROUP,{group_id:h}),t.next=8,n(Dh(va,e));case 8:t.next=17;break;case 10:if(t.prev=10,t.t0=t.catch(0),!(t.t0 instanceof gc)){t.next=14;break}return t.abrupt("return");case 14:if("INVALID_OPERATION"!==(null==t.t0?void 0:t.t0.code)){t.next=16;break}return t.abrupt("return");case 16:(0,i.tO)(t.t0);case 17:return t.prev=17,Th(1e3),t.finish(17);case 20:case"end":return t.stop()}}),t,null,[[0,10,17,20]])})));return function(e){return t.apply(this,arguments)}}()}((0,s.Z)({},h,{score:c})))}catch(u){throw new Error("processMatchingGroupMode: "+u)}}},WA=function(){return function(e){try{e(Oh())}catch(t){throw new Error("processNewUserMode: "+t)}}},zA=n(451),KA={BACKGROUND:{KEY:"background",FILE:"./assets/music/bg_music.mp3"},EFFECTS:{button_click:"./assets/sounds/button_click.mp3",congratulation:"./assets/sounds/congratulation.mp3",daily_reward:"./assets/sounds/daily_reward.mp3",game_over_scene:"./assets/sounds/game_over_scene.mp3",game_over:"./assets/sounds/game_over.mp3",popup_off:"./assets/sounds/popup_off.mp3",popup_show:"./assets/sounds/popup_show.mp3",score_count:"./assets/sounds/score_count.mp3",piece_pick:"./assets/sounds/piece_pick.mp3",piece_drop:"./assets/sounds/piece_drop.mp3",piece_invalid_move:"./assets/sounds/piece_invalid_move.mp3",board_end:"./assets/sounds/board_end.mp3",rescue_timer:"./assets/sounds/rescue_timer.mp3",eat_block:"./assets/sounds/eat_block.mp3",good:"./assets/sounds/good.mp3",cool:"./assets/sounds/cool.mp3",excellent:"./assets/sounds/excellent.mp3",reach_score:"./assets/sounds/reach_score.mp3",reach_goal:"./assets/sounds/reach_goal.mp3",wait_opponent:"./assets/sounds/wait_opponent.mp3",win:"./assets/sounds/win.mp3",lose:"./assets/sounds/lose.mp3",draw:"./assets/sounds/win.mp3",fireworks_big:"./assets/sounds/fireworks_big.mp3",fireworks_soar:"./assets/sounds/fireworks_soar.mp3",fireworks_small:"./assets/sounds/fireworks_small.mp3"}},jA=GameCore.Configs.Notification.ApiUrl,XA=function(){var e=(0,r.Z)(l().mark((function e(t){var n,i;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.playerId,e.next=3,(0,Me.v)("players/"+n,t,{},jA,10);case 3:return i=e.sent,e.abrupt("return",(null==i?void 0:i.data)||{});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();function JA(e,t){var n="undefined"!==typeof E()&&A()(e)||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){var n;if(!e)return;if("string"===typeof e)return qA(e,t);var i=g()(n=Object.prototype.toString.call(e)).call(n,8,-1);"Object"===i&&e.constructor&&(i=e.constructor.name);if("Map"===i||"Set"===i)return m()(e);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return qA(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var i=0;return function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function qA(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}for(var QA=GameCore.Configs,$A=QA.AppId,ey=QA.Notification,ty=function(e){function t(){for(var t,n,i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];return(n=e.call.apply(e,T()(t=[this]).call(t,a))||this).isMusicLoaded=!1,n.logReady=function(){try{window.funmax.loadReady()}catch(e){}},n.handleFBInstantGameStarted=function(){window.__fbGameReady=!0,n.player.requestConnectedPlayers()},n.processAfterUpdatePlayerProfile=function(){ey.Enable&&n.updatePlayerProfileToNotificationService()},n.startGame=function(){n.analytics.event(Ot._.APP_READY),n.storage.dispatch((0,zA.I)(Pa.Co.LOAD_SCENE)),n.storage.dispatch((function(e,t){var n=window.game,i=n.player,a=n.analytics,s=n.globalScene;try{var r=t(),o=Aa(r),c=ya(r),l=i.getPlayer(),h=(o.entryPointData||{}).type;if(l.isUserNew&&a.event(Ot._.NEW_USER),c===Ea)return void e(HA());if(c===ma){if(h===ha)return void e(ZA());if(h===ua)return void e(YA())}if(c===va)return void e(VA());if(l.isUserNew)return void e(WA());s.events.emit(Pa.K5.SWITCH,Pa.Co.DASHBOARD_SCENE)}catch(u){s.events.emit(Pa.K5.SWITCH,Pa.Co.DASHBOARD_SCENE)}}))},n.handleLoadMusicCompleted=function(){n.audio.initMusic(KA.BACKGROUND.KEY),!!n.game.player.getPlayerSetting("music")&&n.audio.playMusic()},n}(0,o.Z)(t,e);var n=t.prototype;return n.preload=function(){var e=this,t=this.getLangCode();this.facebook.progressLoading.loadingProgressFbLoadScene(),this.analytics.event(Ot._.SCREEN_OPEN,{screen_name:"LoadScene"}),this.load.on("progress",(function(t){e.facebook.progressLoading.onProgress(t)})),this.load.on(Phaser.Loader.Events.FILE_LOAD_ERROR,(function(e){var t=new _S("Load resources at LoadScene failed.");(0,i.R0)(t,{file:null==e?void 0:e.url})})),this.load.multiatlas(Wa.Z.DEFAULT.KEY,Wa.Z.DEFAULT.JSON.replace(/{\w+}/g,t),Wa.Z.DEFAULT.URL.replace(/{\w+}/g,t)),this.load.bitmapFont(Xa.Z.PRIMARY.KEY,Xa.Z.PRIMARY.TEXTURE.replace(/(fonts)/g,"fonts"+t),Xa.Z.PRIMARY.DATA.replace(/(fonts)/g,"fonts"+t)),this.load.bitmapFont(Xa.Z.PRIMARY_LIGHT.KEY,Xa.Z.PRIMARY_LIGHT.TEXTURE.replace(/(fonts)/g,"fonts"+t),Xa.Z.PRIMARY_LIGHT.DATA.replace(/(fonts)/g,"fonts"+t)),this.load.bitmapFont(Xa.Z.NUMBER_LIGHT.KEY,Xa.Z.NUMBER_LIGHT.TEXTURE,Xa.Z.NUMBER_LIGHT.DATA),this.load.bitmapFont(Xa.Z.NUMBER_DARK.KEY,Xa.Z.NUMBER_DARK.TEXTURE,Xa.Z.NUMBER_DARK.DATA),this.load.atlas({key:Wa.Z.EFFECTS.KEY,textureURL:Wa.Z.EFFECTS.TEXTURE.replace(/{\w+}/g,t),atlasURL:Wa.Z.EFFECTS.JSON.replace(/{\w+}/g,t)}),this.load.atlas({key:Wa.Z.GAMEPLAY_32.KEY,textureURL:Wa.Z.GAMEPLAY_32.TEXTURE,atlasURL:Wa.Z.GAMEPLAY_32.JSON}),this.load.atlas({key:Wa.Z.GAMEPLAY.KEY,textureURL:Wa.Z.GAMEPLAY.TEXTURE,atlasURL:Wa.Z.GAMEPLAY.JSON}),this.world.isLandscape()?this.load.image(pa.Z.BACKGROUND.KEY,pa.Z.BACKGROUND.FILE_LANDSCAPE):this.load.image(pa.Z.BACKGROUND.KEY,pa.Z.BACKGROUND.FILE_PORTRAIT),this.load.image(pa.Z.AVATAR.KEY,pa.Z.AVATAR.FILE),this.load.spine(pu.BEST_SCORE.KEY,pu.BEST_SCORE.JSON.replace(/{\w+}/g,t),pu.BEST_SCORE.ATLAS.replace(/{\w+}/g,t)),this.load.spine(pu.LOGO.KEY,pu.LOGO.JSON,[pu.LOGO.ATLAS],!0),this.player.updateData().then(this.processAfterUpdatePlayerProfile).catch(i.tO)},n.create=function(){this.audio.initSound(),this.audio.importSoundEffectKeys(KA.EFFECTS),this.logReady(),this.analytics.event(Ot._.LOAD_COMPLETE),this.facebook.on("startgame",this.handleFBInstantGameStarted),this.facebook.gameStarted(),this.initModules(),this.setupGlobalScene(),this.lazyLoadResource(),this.startGame()},n.getLangCode=function(){var e="";switch(this.facebook.getLocale()){case"ru":e="/ru";break;case"pt":e="/pt";break;case"fr":e="/fr";break;case"hi":e="/hi";break;case"it":e="/it";break;case"id":e="/id";break;case"de":e="/de";break;case"ja":e="/ja";break;case"es":e="/es";break;case"zh":e="/zh";break;case"ar":e="/ar";break;case"tr":e="/tr"}return e},n.updatePlayerProfileToNotificationService=function(){var e=this.player.getPlayer(),t=e.playerId,n=e.name,i=e.photo,a=e.locale,s=e.ASID;XA({appId:$A,playerId:t,name:n,photo:i,locale:a,ASID:s})},n.setupGlobalScene=function(){var e=this.scene.get(Pa.Co.GLOBAL_SCENE);e instanceof kS.Z&&e.setup()},n.initModules=function(){new FA(this.game),new oA(this.game)},n.lazyLoadResource=function(){var e=this;setTimeout((function(){e.scene.wake(),e.loadSounds(),e.lazyLoadLevel(),e.lazyLoadLives();var t,n,i=e.getLangCode();(e.loadTexture32Bit(Wa.Z.GAMEPLAY.KEY,[Wa.Z.GAMEPLAY.TEXTURE_32BIT.replace(/{\w+}/g,i)]),1===GameCore.Utils.Image.getImageScale())?e.loadTexture32Bit(Wa.Z.DEFAULT.KEY,Te()(t=Wa.Z.DEFAULT.TEXTURE_32BIT_1x).call(t,(function(e){return e.replace(/{\w+}/g,i)}))):e.loadTexture32Bit(Wa.Z.DEFAULT.KEY,Te()(n=Wa.Z.DEFAULT.TEXTURE_32BIT_2x).call(n,(function(e){return e.replace(/{\w+}/g,i)})));e.load.once(Phaser.Loader.Events.COMPLETE,(function(){e.scene.sleep()}))}),1500)},n.lazyLoadLevel=function(){var e=(0,r.Z)(l().mark((function e(){var t;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,t=this.storage.getState(),!ol(t)){e.next=5;break}return e.abrupt("return");case 5:return e.next=7,this.storage.dispatch(dh());case 7:this.loadLevelConfig(),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),(0,i.tO)(e.t0);case 13:case"end":return e.stop()}}),e,this,[[0,10]])})));return function(){return e.apply(this,arguments)}}(),n.lazyLoadLives=function(){var e=(0,r.Z)(l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.storage.dispatch(function(){var e=(0,r.Z)(l().mark((function e(t){var n,i,a,s,r,o,c,h,u,d;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=window.game.player,i=n.getPlayer(),a=i.playerId,e.prev=2,t({type:Mi,payload:{}}),e.next=6,null==(s=window.FBInstant.player.getDataAsync(["lives"]))?void 0:s.lives;case 6:return r=e.sent,o=Rl(lA.LivesStore+"-"+a)||{},c=o.lives,h=void 0===c?hA.livesCapacity:c,u=o.lastBonusLifeTime,d=void 0===u?0:u,r&&(h=r.lives||0,d=r.lastBonusLifeTime||0),t({type:Ni,payload:{data:{lives:h,lastBonusLifeTime:d}}}),t((function(e,t){e(pA());var n=t(),i=60*hA.bonusDurationMins*1e3,a=(new Date).getTime(),s=Af(n);e(a-s<i?uA(i-(a-s)):dA())})),e.next=15,t(fA());case 15:e.next=20;break;case 17:e.prev=17,e.t0=e.catch(2),t({type:Bi,payload:{}});case 20:case"end":return e.stop()}}),e,null,[[2,17]])})));return function(t){return e.apply(this,arguments)}}());case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),(0,i.tO)(e.t0);case 8:case"end":return e.stop()}}),e,this,[[0,5]])})));return function(){return e.apply(this,arguments)}}(),n.loadLevelConfig=function(){try{var e=this.storage.getState(),t=ol(e),n=vf[t];n||(n=vf[vf.length-1]);var a=n,s=a.key,r=a.mapJson;if(this.cache.tilemap.exists(s))return;this.load.tilemapTiledJSON(s,r),this.load.start()}catch(o){(0,i.tO)(o)}},n.loadSounds=function(){this.loadSoundEffects()},n.loadSoundEffects=function(){for(var e,t=JA(q()(KA.EFFECTS));!(e=t()).done;){var n=e.value;this.load.audio(n,KA.EFFECTS[n])}},n.loadMusic=function(){if(!this.isMusicLoaded){this.isMusicLoaded=!0;var e=Phaser.Loader.Events.FILE_KEY_COMPLETE;this.load.once(e+"audio-"+KA.BACKGROUND.KEY,this.handleLoadMusicCompleted),this.load.audio(KA.BACKGROUND.KEY,KA.BACKGROUND.FILE),this.load.start()}},n.handleShowAdWhenStartGame=function(){var e=this;if(GameCore.Configs.Ads.InterstitialAdOptions.showWhenStartGame){var t={en:"Initializing...",ru:"\u0418\u043d\u0438\u0446\u0438\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u044f...",pt:"Inicializando...",es:"Inicializando...",ar:"\u062a\u0647\u064a\u0626\u0629...",hi:"\u092a\u094d\u0930\u093e\u0930\u0902\u092d \u0915\u0930 \u0930\u0939\u093e \u0939\u0948...",zh:"\u521d\u59cb\u5316\u4e2d...",tr:"Ba\u015flat\u0131l\u0131yor...",ja:"\u521d\u671f\u5316\u4e2d...",fr:"Initialisation en cours...",id:"Menginisialisasi...",de:"Initialisierung...",it:"Inizializzazione..."}[this.lang.getCurrentLanguage()||""]||"",n=document.createElement("div");n.id="wait-ads-mask";var a=document.createElement("div");a.id="wait-ads-content",n.appendChild(a);var s=document.createElement("div");s.id="wait-ads-dual-ring",a.appendChild(s);var o=document.createElement("div");o.id="wait-ads-text",o.innerHTML=t,a.appendChild(o),document.body.appendChild(n),this.audio.muteAll(),setTimeout((0,r.Z)(l().mark((function t(){return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,e.audio.stopMusic(),e.audio.muteAll(),t.next=5,e.ads.preloadInterstitialAdAsync();case 5:return t.next=7,e.ads.showInterstitialAdAsync();case 7:t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),(0,i.tO)(t.t0);case 12:return t.prev=12,n.remove(),e.audio.unmuteAll(),e.audio.playMusic(),t.finish(12);case 17:case"end":return t.stop()}}),t,null,[[0,9,12,17]])}))),0)}},n.loadTexture32Bit=function(e,t){for(var n,i=this,a=[],s=JA(t);!(n=s()).done;){var r=n.value,o=GameCore.Utils.String.generateObjectId();this.load.image(o,r),a.push(o)}this.load.start();var c=0;this.textures.on(Phaser.Textures.Events.ADD,(function t(n){var s=wa()(a).call(a,n);if(-1!==s){var r=i.textures.get(n),o=i.textures.get(e);o.source[s].glTexture=r.source[0].glTexture,o.source[s].glIndex=r.source[0].glIndex,o.source[s].glIndexCounter=r.source[0].glIndexCounter,++c===a.length&&i.textures.off(Phaser.Textures.Events.ADD,t)}}))},t}(Phaser.Scene),ny=ty,iy=n(193),ay={targets:[],yoyo:!0,repeat:-1,duration:600,repeatDelay:50,ease:n.n(iy)()(.55,.47,.43,.91),easeParams:[0,.9],props:{scale:{from:1,to:1.2}}},sy=function(e){function t(t){return e.call(this,ay,t)||this}return(0,o.Z)(t,e),t}(ic.Z),ry=Wa.Z.DEFAULT,oy=ry.KEY,cy=ry.FRAME,ly=GameCore.Configs.Lives,hy=function(e){function t(t){var n;return(n=e.call(this,t)||this).background=void 0,n.circle=void 0,n.icon=void 0,n.textLives=void 0,n.textTimer=void 0,n.textFull=void 0,n.groupHeartBeat=void 0,n.heartBeat=void 0,n.textLivesBeat=void 0,n.iconBeat=void 0,n.intervalTimer=void 0,n.scene.add.existing((0,Ba.Z)(n)),n.createBackgroundLives(),n.createTextLives(),n.createTextTimer(),n.createTextFull(),n.createIconPlus(),n.createHeartBeatAnimation(),n.setSize(140,27),n.setInteractive({useHandCursor:!0}).on(Phaser.Input.Events.POINTER_DOWN,(function(){n.scene.screen.open(za.o4.CLAIM_HEART_SCREEN)})),n}(0,o.Z)(t,e);var n=t.prototype;return n.createBackgroundLives=function(){this.background=this.scene.make.image({key:oy,frame:cy.LIVES_TIME_BLOCK}),this.background.setWorldSize(111,27),this.add(this.background),Phaser.Display.Align.In.Center(this.background,this)},n.setFrameLivesTimeBlock2=function(){this.background.setFrame(cy.LIVES_TIME_BLOCK_2)},n.createIconPlus=function(){this.icon=this.scene.make.image({key:oy,frame:cy.ICON_PLUS}),this.icon.setWorldSize(14,14),this.add(this.icon),Phaser.Display.Align.In.Center(this.icon,this,-62,11)},n.createTextLives=function(){this.circle=this.scene.make.image({key:oy,frame:cy.LIVES_HEART}),this.circle.setWorldSize(38,31),this.add(this.circle),Phaser.Display.Align.In.Center(this.circle,this,-51,0);var e=this.scene.storage.getState(),t=Sf(e);this.textLives=this.scene.make.text({text:""+t,style:{fontFamily:Xa.Z.FONT_FAMILY_ARIAL,fontSize:this.scene.fontSize(40)+"px",fontStyle:"700"},origin:{x:.5,y:.5}}),this.add(this.textLives),Phaser.Display.Align.In.Center(this.textLives,this.circle)},n.createTextTimer=function(){this.textTimer=this.scene.make.bitmapText({font:Xa.Z.PRIMARY_LIGHT.KEY,size:this.scene.fontSize(40),text:"00:00",origin:{x:.2,y:.5}}),this.add(this.textTimer),Phaser.Display.Align.In.Center(this.textTimer,this,6,2)},n.createTextFull=function(){this.textFull=this.scene.make.text({text:this.scene.lang.Text.FULL,style:{fontFamily:Xa.Z.FONT_FAMILY,fontSize:this.scene.fontSize(40)+"px"},origin:{x:.5,y:.5}}),this.textFull.setTint(15651762),this.textFull.setVisible(!1),this.add(this.textFull),Phaser.Display.Align.In.Center(this.textTimer,this,6,0)},n.updateTextLives=function(){var e=this.scene.storage.getState(),t=Sf(e);this.textLives.setText(t)},n.startIntervalTimer=function(){var e=this;this.runHeartBeatAnimation();var t=60*ly.bonusDurationMins*1e3,n=this.scene.lang;this.intervalTimer=setInterval((function(){var i,a,s=e.scene.storage.getState(),r=Sf(s)||0;if(r===ly.livesCapacity)return e.textTimer.setText(n.Text.FULL),e.textLives.setText(String(ly.livesCapacity)),void("ar"==e.scene.facebook.getLocale()&&(e.textTimer.setVisible(!1),e.textFull.setVisible(!0)));var o=yf(s),c=Af(s),l=(new Date).getTime();l-c<t&&(o=c);var h=(0,So.ne)(t-(l-o)),u=g()(i="0"+h.minutes).call(i,-2),d=g()(a="0"+h.seconds).call(a,-2);parseInt(e.textLives.text)!==r&&e.updateTextLives(),e.textTimer.setText(u+":"+d)}),1e3)},n.stopIntervalTimer=function(){clearInterval(this.intervalTimer)},n.setLives=function(e){this.textLives.setText(String(e))},n.runHeartBeatAnimation=function(){this.heartBeat.play(),this.textLivesBeat.play(),this.iconBeat.play()},n.createHeartBeatAnimation=function(){this.heartBeat=new sy({targets:[this.circle],props:{scale:"+=0.005"}}),this.textLivesBeat=new sy({targets:[this.textLives],props:{scale:"+=0.05"}}),this.iconBeat=new sy({targets:[this.icon],props:{scale:"+=0.025"}})},t}(Phaser.GameObjects.Container),uy=hy,dy=Wa.Z.DEFAULT,py=dy.KEY,gy=dy.FRAME,fy=GameCore.Configs.Lives,my=function(e){function t(t){var n;return(n=e.call(this,t,py,gy.BUTTON_GREEN)||this).heart=void 0,n.textLives=void 0,n.groupHeartBeat=void 0,n.heartBeat=void 0,n.textLivesBeat=void 0,n.icon=void 0,n.text=void 0,n.button.setWorldSize(251,63),n.setName("RefillLives"),n.createText(),n.createIcon(),n.alignItem(),n.createHeart(),n.createHeartBeatAnimation(),n}(0,o.Z)(t,e);var n=t.prototype;return n.createText=function(){var e=this.scene.world.getPixelRatio();this.text=this.scene.make.image({key:py,frame:gy.TEXT_REFILL_LIVES}),this.text.setWorldSize(this.text.width/e,this.text.height/e),this.add(this.text)},n.createIcon=function(){this.icon=this.scene.make.image({key:py,frame:gy.ICON_ADS}),this.icon.setWorldSize(33,32),this.add(this.icon)},n.alignItem=function(){var e=this.width,t=this.icon.width,n=this.text.width,i=e/2,a=(e-10-t-n)/2+n/2,s=a+10+t/2+n/2;Phaser.Display.Align.In.Center(this.icon,this,s-i,-2),Phaser.Display.Align.In.Center(this.text,this,a-i,-2)},n.createHeart=function(){this.heart=this.scene.make.image({key:py,frame:gy.LIVES_HEART}),this.heart.setAngle(-30),this.heart.setWorldSize(46,36),this.add(this.heart),Phaser.Display.Align.In.Center(this.heart,this,-120,-25),this.textLives=this.scene.make.text({text:"+"+fy.livesCapacity,style:{fontFamily:Xa.Z.FONT_FAMILY_ARIAL,fontSize:this.scene.fontSize(40)+"px",fontStyle:"700"},origin:{x:.5,y:.5}}),this.textLives.setAngle(-30),this.add(this.textLives),Phaser.Display.Align.In.Center(this.textLives,this.heart)},n.runHeartBeatAnimation=function(){this.heartBeat.play(),this.textLivesBeat.play()},n.createHeartBeatAnimation=function(){this.heartBeat=new sy({targets:[this.heart],props:{scale:"+=0.005"}}),this.textLivesBeat=new sy({targets:[this.textLives],props:{scale:"+=0.025"}})},t}(ja.Z),vy=my,Ey=Wa.Z.DEFAULT,Sy=Ey.KEY,Ay=Ey.FRAME,yy=GameCore.Configs,Ty=yy.Network,Iy=yy.Lives,Cy=function(e){function t(t,n,i,a){var s;return(s=e.call(this,t,n,i,a)||this).popup=void 0,s.title=void 0,s.buttonClose=void 0,s.contents=void 0,s.backgroundContent=void 0,s.currentScreen=void 0,s.refillLivesButton=void 0,s.textTitle=void 0,s.livesContent=void 0,s.textContent=void 0,s.textContent2=void 0,s.adsTimer=void 0,s.livesTimer=void 0,s.intervalTimer=void 0,s.textBlock=void 0,s.popupShowUpAnimation=void 0,s.popupFadeOutAnimation=void 0,s.contentShowUpAnimation=void 0,s.popupFadeInMaskAnimation=void 0,s.popupFadeOutMaskAnimation=void 0,s.handleClose=function(){s.runCloseAnimation()},s.clickPlayWithFriend=function(){s.scene.storage.dispatch(wh()),s.currentScreen&&s.currentScreen.setVisible(!1),s.close()},s.handleShowRewardedVideoAd=(0,r.Z)(l().mark((function e(){var t,n,i,a,o,c,h;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=s.scene.game,n=t.globalScene,i=t.audio,a=t.lang,e.prev=1,n.screen.open(za.o4.NOTIFY_SCREEN,{message:a.Text.LOADING_AD+"...",duration:Ty.Timeout,loading:!0}),i.pauseMusic(),i.muteAll(),e.next=7,new(C())((function(e,t){var n;null==(n=s.adsTimer)||n.remove(),s.adsTimer=s.scene.time.delayedCall(Ty.Timeout,t),s.scene.ads.getAdStatus(GameCore.Ads.Types.REWARDED)===GameCore.Ads.Status.LOADING?s.scene.ads.events.once(GameCore.Ads.Events.LOADED,e):s.scene.ads.preloadRewardedVideoAsync().then(e).catch(t)}));case 7:return e.next=9,s.scene.ads.showRewardedVideoAsync();case 9:s.scene.ads.preloadRewardedVideoAsync().catch((function(e){})),n.screen.events.off(GameCore.Screens.Events.CLOSE),i.playSound(Ka.Z.DAILY_REWARD),n.screen.close(za.o4.NOTIFY_SCREEN),s.scene.storage.dispatch(function(){var e=(0,r.Z)(l().mark((function e(t){var n;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n={lives:hA.livesCapacity,lastBonusLifeTime:(new Date).getTime()},e.next=4,t(mA(n));case 4:e.next=8;break;case 6:e.prev=6,e.t0=e.catch(0);case 8:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}()),s.close(),e.next=24;break;case 17:if(e.prev=17,e.t0=e.catch(1),!(e.t0 instanceof Object&&GameCore.Utils.Object.hasOwn(e.t0,"code"))){e.next=23;break}if("USER_INPUT"!==e.t0.code){e.next=23;break}return s.showNotifySkipAds(),e.abrupt("return");case 23:s.showNotifyNoAds();case 24:return e.prev=24,null==(o=s.adsTimer)||o.destroy(),i.unmuteAll(),i.playMusic(),s.scene.screen.close(s.name),c=s.getData(["onClose"]),(h=c[0])&&h(),e.finish(24);case 32:case"end":return e.stop()}}),e,null,[[1,17,24,32]])}))),s.showNotifyNoAds=function(e){if(!e||e.name===za.o4.NOTIFY_SCREEN){var t=s.scene.game,n=t.globalScene,i=t.lang;n.screen.events.off(GameCore.Screens.Events.CLOSE),n.screen.events.once(GameCore.Screens.Events.CLOSE,s.showGameOver),n.screen.open(za.o4.NOTIFY_SCREEN,{message:i.Text.NO_ADS_TO_DISPLAY,duration:2e3,loading:!1})}},s.showNotifySkipAds=function(){var e=s.scene.game,t=e.globalScene,n=e.lang;t.screen.events.off(GameCore.Screens.Events.CLOSE),t.screen.events.once(GameCore.Screens.Events.CLOSE,s.showGameOver),t.screen.open(za.o4.NOTIFY_SCREEN,{message:n.Text.NO_REWARDS+"\n"+n.Text.CANCELLED_AD,duration:3e3,loading:!1})},s.showGameOver=function(e){e&&e.name!==za.o4.NOTIFY_SCREEN||s.scene.screen.close(s.name)},s.createPopup(),s.createLivesTimer(),s.createTitle(),s.createContentBackground(),s.createLiveContent(),s.createTextContent(),s.createButtons(),s.addItem(),s.setDepth(za.Ks.POPUP),s.background.setAlpha(.5),s}(0,o.Z)(t,e);var n=t.prototype;return n.open=function(t){e.prototype.open.call(this,t),this.updateIntervalTimer(),this.startIntervalTimer(),this.runOpenAnimation(),null!=t&&t.currentScreen&&(this.currentScreen=t.currentScreen),this.showLivesTimer()},n.showLivesTimer=function(){var e=this.getData(["showLivesTimer"])[0];this.livesTimer.setVisible(e),e&&this.livesTimer.startIntervalTimer()},n.createLivesTimer=function(){this.livesTimer=new uy(this.scene),this.popup.add(this.livesTimer),Phaser.Display.Align.In.Center(this.livesTimer,this.popup,0,-270)},n.createContentBackground=function(){this.backgroundContent=this.scene.make.image({key:Sy,frame:Ay.LIVES_HEART}),this.backgroundContent.setWorldSize(114,93),this.popup.add(this.backgroundContent),Phaser.Display.Align.In.TopCenter(this.backgroundContent,this.popup,0,-55)},n.createLiveContent=function(){var e=this.scene.storage.getState(),t=Sf(e);this.livesContent=this.scene.make.text({text:""+t,style:{fontFamily:Xa.Z.FONT_FAMILY_ARIAL,fontSize:this.scene.fontSize(150)+"px",fontStyle:"700",align:"center"}}),this.livesContent.setTint(16777215),this.popup.add(this.livesContent),Phaser.Display.Align.In.Center(this.livesContent,this.backgroundContent,0,0)},n.createTextContent=function(){this.textBlock=this.scene.make.image({key:Sy,frame:Ay.LIVES_TIME_BLOCK}),this.popup.add(this.textBlock),this.textBlock.setWorldSize(227,40),Phaser.Display.Align.In.Center(this.textBlock,this.backgroundContent,0,80),this.textContent=this.scene.make.bitmapText({font:Xa.Z.PRIMARY_LIGHT.KEY,size:this.scene.fontSize(40),origin:{x:.5,y:.5}}),this.popup.add(this.textContent),Phaser.Display.Align.In.Center(this.textContent,this.textBlock,0,2),this.textContent2=this.scene.make.text({text:this.scene.lang.Text.LEVEL,style:{fontFamily:Xa.Z.FONT_FAMILY,fontSize:this.scene.fontSize(40)+"px"},origin:{x:.5,y:.5}}),this.textContent2.setTint(15651762).setHighQuality(),this.textContent2.setVisible(!1),this.popup.add(this.textContent2),Phaser.Display.Align.In.Center(this.textContent2,this.textBlock,0,2)},n.startIntervalTimer=function(){var e=this;this.intervalTimer=setInterval((function(){e.updateIntervalTimer()}),1e3)},n.updateIntervalTimer=function(){var e,t,n=60*Iy.bonusDurationMins*1e3,i=this.scene.storage.getState(),a=Sf(i),s=yf(i),r=Af(i),o=(new Date).getTime();o-r<n&&(s=r);var c=(0,So.ne)(n-(o-s)),l=g()(e="0"+c.minutes).call(e,-2),h=g()(t="0"+c.seconds).call(t,-2);this.setTextContent(this.scene.lang.Text.Next_life+": "+l+":"+h);var u=this.scene.world.getPixelRatio();a>0?this.textTitle.setFrame(Ay.TEXT_KEEP_PLAYING):this.textTitle.setFrame(Ay.TEXT_OUT_OF_LIVE);var d=this.textTitle,p=d.width,f=d.height;this.textTitle.setWorldSize(p/u,f/u),parseInt(this.livesContent.text)!=a&&(this.livesContent.setText(""+a),Phaser.Display.Align.In.Center(this.livesContent,this.backgroundContent,0,0)),a===Iy.livesCapacity?(this.setTextContent(this.scene.lang.Text.FULL),this.refillLivesButton.setVisible(!1)):(this.refillLivesButton.setVisible(!0),this.refillLivesButton.runHeartBeatAnimation())},n.stopIntervalTimer=function(){clearInterval(this.intervalTimer)},n.setTextContent=function(e){this.textContent.setText(e),Phaser.Display.Align.In.Center(this.textContent,this.textBlock,0,2);var t=this.scene.facebook.getLocale();"id"==t&&this.textContent.setFontSize(this.scene.fontSize(35)),"ar"==t&&(this.textContent2.setText(e),this.textContent2.setVisible(!0),this.textContent.setVisible(!1),Phaser.Display.Align.In.Center(this.textContent2,this.textBlock,0,2))},n.createPopup=function(){this.popup=new as.Z(this.scene,0,-30,290,323),this.add(this.popup),Phaser.Display.Align.In.Center(this.popup,this.zone,0,-30)},n.createTitle=function(){this.title=this.scene.add.container();var e=this.scene.world.getPixelRatio();this.textTitle=this.scene.make.image({key:Sy,frame:Ay.TEXT_OUT_OF_LIVE});var t=this.textTitle,n=t.width,i=t.height;this.textTitle.setWorldSize(n/e,i/e),this.buttonClose=new ja.Z(this.scene,Sy,Ay.BUTTON_CLOSE,35,35),this.buttonClose.setName("Close"),this.buttonClose.onClick=this.handleClose,this.title.add([this.textTitle,this.buttonClose]),this.popup.add([this.title]),Phaser.Display.Align.In.Center(this.textTitle,this.title,0,11),Phaser.Display.Align.In.Center(this.buttonClose,this.title,135,-14),Phaser.Display.Align.In.TopCenter(this.title,this.popup)},n.createButtons=function(){this.createRefillLivesButton()},n.createRefillLivesButton=function(){this.refillLivesButton=new vy(this.scene),this.popup.add(this.refillLivesButton),this.refillLivesButton.onClick=this.handleShowRewardedVideoAd,Phaser.Display.Align.In.Center(this.refillLivesButton,this.popup,0,85)},n.addItem=function(){this.contents=this.scene.add.group(),this.contents.addMultiple([])},n.runOpenAnimation=function(){var e;null!=(e=this.popupShowUpAnimation)&&null!=(e=e.tween)&&e.isPlaying()||(this.scene.audio.playSound(Ka.Z.POPUP_SHOW),this.runPopupEntrancesAnimation(0,300),this.runFadeInMaskAnimation(100,300),this.runPopupContentEntrancesAnimation(200,300))},n.runCloseAnimation=function(){var e;null!=(e=this.popupFadeOutAnimation)&&null!=(e=e.tween)&&e.isPlaying()||(this.stopIntervalTimer(),this.runPopupExitsAnimation(50,200),this.runFadeOutMaskAnimation(0,200))},n.runPopupEntrancesAnimation=function(e,t){if(!this.popupShowUpAnimation){var n=this.popup.scale;this.popupShowUpAnimation=new is.Z({targets:[this.popup],delay:e,duration:t,props:{y:0,alpha:{start:1,from:1,to:1},scale:{start:0,from:0,to:n}}})}this.popupShowUpAnimation.play()},n.runPopupContentEntrancesAnimation=function(e,t){var n;null==(n=this.contentShowUpAnimation)||n.remove(),this.contentShowUpAnimation=new ns.Z({targets:this.contents.getChildren(),duration:t,delay:e,props:{alpha:{start:0,from:0,to:1}}}),this.contentShowUpAnimation.play()},n.runPopupExitsAnimation=function(e,t){var n=this;this.popupFadeOutAnimation||(this.popupFadeOutAnimation=new ts.Z({targets:[this.popup],delay:e,duration:t,props:{scale:0},onComplete:function(){n.popup.setY(0),n.scene.screen.close(n.name)}})),this.popupFadeOutAnimation.play()},n.runFadeInMaskAnimation=function(e,t){if(!this.popupFadeInMaskAnimation){var n=this.background.alpha;this.popupFadeInMaskAnimation=new Eo.Z({targets:[this.background],delay:e,duration:t,props:{alpha:{start:0,from:0,to:n}}})}this.popupFadeInMaskAnimation.play()},n.runFadeOutMaskAnimation=function(e,t){var n=this;if(!this.popupFadeOutMaskAnimation){var i=this.background.alpha;this.popupFadeOutMaskAnimation=new ts.Z({targets:[this.background],delay:e,duration:t,props:{alpha:{start:i,from:i,to:0}},onComplete:function(){var e=n.getData(["onClose"])[0];e&&e()}})}this.popupFadeOutMaskAnimation.play()},t}(GameCore.Screen),by=Cy,Oy=Wa.Z.DEFAULT,Py=Oy.KEY,Ry=Oy.FRAME,wy=function(e){function t(t){var n;return(n=e.call(this,t)||this).background=void 0,n.scene.add.existing((0,Ba.Z)(n)),n}return(0,o.Z)(t,e),t.prototype.createBackground=function(){this.background=this.scene.make.image({key:Py,frame:Ry.FOOTER,origin:{x:.5,y:1}}),this.background.setWorldSize(375,85),this.add(this.background)},t}(Phaser.GameObjects.Container),xy=wy,ky=Wa.Z.DEFAULT,_y=ky.KEY,Ly=ky.FRAME,Dy=function(e){function t(t){var n,i=(n=e.call(this,t,0,0,_y,Ly.LEAF)||this).scene.gameZone.width,a=i*n.height/n.width;return n.setWorldSize(i,a),n.scene.add.existing((0,Ba.Z)(n)),n}return(0,o.Z)(t,e),t}(Phaser.GameObjects.Image),My=Dy,Ny=function(e){function t(t){var n;return(n=e.call(this,t)||this).leaf=void 0,n.scene.add.existing((0,Ba.Z)(n)),n}return(0,o.Z)(t,e),t.prototype.createLeaf=function(){this.leaf=new My(this.scene),this.add(this.leaf),Phaser.Display.Align.In.Center(this.leaf,this,0,this.leaf.displayHeight/2)},t}(Phaser.GameObjects.Container),By=Ny,Gy=Wa.Z.DEFAULT,Fy=Gy.KEY,Uy=Gy.FRAME,Hy=GameCore.Configs.Match,Zy=function(e){function t(t){var n;return(n=e.call(this,t,Fy,Uy.BUTTON_MINOR)||this).suggestDailyMode=void 0,n.button.setWorldSize(62,53),n.setName("DailyChallenge"),n.createIcon(),n.createSuggestDailyMode(),n}(0,o.Z)(t,e);var n=t.prototype;return n.createIcon=function(){var e=this.scene.make.image({key:Fy,frame:Uy.ICON_DAILY});e.setWorldSize(35,35),this.add(e),Phaser.Display.Align.In.Center(e,this,.5,-2.5)},n.createSuggestDailyMode=function(){this.suggestDailyMode=this.scene.make.image({key:Fy,frame:Uy.ICON_DOT_RED}),this.suggestDailyMode.setWorldSize(17,17),this.suggestDailyMode.setVisible(!1),this.add(this.suggestDailyMode),Phaser.Display.Align.In.Center(this.suggestDailyMode,this,28,-25)},n.checkSuggestDailyMode=function(){var e=window.game.player.getPlayer().playerId,t=Rl(Hy.JourneyMatchStore+"-"+e)||{},n=Object(t).updateAt||0;(0,So.Gm)(n)?this.suggestDailyMode.setVisible(!1):this.suggestDailyMode.setVisible(!0)},t}(ja.Z),Yy=Zy,Vy=Wa.Z.DEFAULT,Wy=Vy.KEY,zy=Vy.FRAME,Ky=function(e){function t(t){var n;return(n=e.call(this,t,Wy,zy.BUTTON_BROWN)||this).icon=void 0,n.text=void 0,n.button.setWorldSize(242,54),n.setName("Journey"),n.createIcon(),n.createText(),n.alignItem(),n}(0,o.Z)(t,e);var n=t.prototype;return n.createIcon=function(){this.icon=this.scene.make.image({key:Wy,frame:zy.ICON_JOURNEY}),this.icon.setWorldSize(35,29),this.add(this.icon)},n.createText=function(){var e=this.scene.world.getPixelRatio();this.text=this.scene.make.image({key:Wy,frame:zy.TEXT_JOURNEY});var t=this.text,n=t.width,i=t.height;this.text.setWorldSize(n/e,i/e),this.add(this.text)},n.alignItem=function(){var e=this.width,t=this.icon.width,n=this.text.width,i=e/2,a=(e-10-t-n)/2+t/2,s=a+10+t/2+n/2;Phaser.Display.Align.In.Center(this.icon,this,a-i,-2),Phaser.Display.Align.In.Center(this.text,this,s-i,-2)},t}(ja.Z),jy=Ky,Xy=function(e){function t(t,n,i){var a;return(a=e.call(this,t,n,i)||this).logo=void 0,a.drawLogo(),t.add.existing((0,Ba.Z)(a)),a}return(0,o.Z)(t,e),t.prototype.drawLogo=function(){var e=this;this.logo=this.scene.add.spine(0,0,pu.LOGO.KEY,pu.LOGO.ANIMATIONS.START_GROW),this.add(this.logo),this.logo.on("complete",(function(t){t.animation.name===pu.LOGO.ANIMATIONS.START_GROW&&e.logo.play(pu.LOGO.ANIMATIONS.IDLE_GROW,!0)}))},t}(Phaser.GameObjects.Container),Jy=Xy,qy=Wa.Z.DEFAULT,Qy=qy.KEY,$y=qy.FRAME,eT=function(e){function t(t){var n;return(n=e.call(this,t,Qy,$y.BUTTON_GREEN_LARGE)||this).icon=void 0,n.text=void 0,n.button.setWorldSize(242,70),n.setName("PlaySingle"),n.createIcon(),n.createText(),n.alignItem(),n}(0,o.Z)(t,e);var n=t.prototype;return n.createIcon=function(){this.icon=this.scene.make.image({key:Qy,frame:$y.ICON_PLAY_GREEN}),this.icon.setWorldSize(31,31),this.add(this.icon)},n.createText=function(){var e=this.scene.world.getPixelRatio();this.text=this.scene.make.image({key:Qy,frame:$y.TEXT_SINGLE});var t=this.text,n=t.width,i=t.height;this.text.setWorldSize(n/e,i/e),this.add(this.text)},n.alignItem=function(){var e=this.width,t=this.icon.width,n=this.text.width,i=e/2,a=(e-10-t-n)/2+t/2,s=a+10+t/2+n/2;Phaser.Display.Align.In.Center(this.icon,this,a-i,-2),Phaser.Display.Align.In.Center(this.text,this,s-i,-2)},t}(ja.Z),tT=eT,nT=Wa.Z.DEFAULT,iT=nT.KEY,aT=nT.FRAME,sT=function(e){function t(t){var n;return(n=e.call(this,t,iT,aT.BUTTON_MINOR)||this).button.setWorldSize(62,53),n.setName("Setting"),n.createIcon(),n}return(0,o.Z)(t,e),t.prototype.createIcon=function(){var e=this.scene.make.image({key:iT,frame:aT.ICON_SETTING});e.setWorldSize(30,30),this.add(e),Phaser.Display.Align.In.Center(e,this,0,-1.5)},t}(ja.Z),rT=sT,oT=function(e){function t(t){var n;return(n=e.call(this,t)||this).logo=void 0,n.playSingleButton=void 0,n.journeyButton=void 0,n.dailyChallengeButton=void 0,n.settingButton=void 0,n.playSingleButtonAnimation=void 0,n.createLogo(),n.createPlaySingleButton(),n.createJourneyButton(),n.createDailyChallengeButton(),n.createSettingButton(),n.alignButton(),n.scene.add.existing((0,Ba.Z)(n)),n}(0,o.Z)(t,e);var n=t.prototype;return n.createLogo=function(){this.logo=new Jy(this.scene,0,0),this.logo.setDepth(Va.Z.ON_TOP),this.add(this.logo),Phaser.Display.Align.In.Center(this.logo,this,0,-140)},n.createPlaySingleButton=function(){this.playSingleButton=new tT(this.scene),this.add(this.playSingleButton)},n.runPlaySingleButtonAnimation=function(){this.playSingleButtonAnimation.play()},n.createPlaySingleButtonAnimation=function(){this.playSingleButtonAnimation=new sy({targets:[this.playSingleButton],props:{scale:{from:1,to:1.05}}})},n.createJourneyButton=function(){this.journeyButton=new jy(this.scene),this.add(this.journeyButton)},n.createDailyChallengeButton=function(){this.dailyChallengeButton=new Yy(this.scene),this.add(this.dailyChallengeButton)},n.createSettingButton=function(){this.settingButton=new rT(this.scene),this.add(this.settingButton)},n.alignButton=function(){Phaser.Display.Align.In.Center(this.playSingleButton,this,0,44),Phaser.Display.Align.In.Center(this.journeyButton,this,0,118),Phaser.Display.Align.In.Center(this.dailyChallengeButton,this,-60,192),Phaser.Display.Align.In.Center(this.settingButton,this,60,192)},t}(Phaser.GameObjects.Container),cT=oT,lT=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n.main=void 0,n.header=void 0,n.footer=void 0,n.scene=t,n.createObjects(),n}(0,o.Z)(t,e);var n=t.prototype;return n.createObjects=function(){this.createMain(),this.createHeader(),this.createFooter()},n.createHeader=function(){this.header=new By(this.scene),this.group.add(this.header)},n.createMain=function(){this.main=new cT(this.scene),this.group.add(this.main)},n.createFooter=function(){this.footer=new xy(this.scene),this.group.add(this.footer)},t}(ug),hT=lT,uT=function(e){function t(t){var n;return(n=e.call(this,t)||this).objects=void 0,n.guideUI=void 0,n.objects=null,n}(0,o.Z)(t,e);var n=t.prototype;return n.alignUI=function(){if(null!==this.objects){var e=this.scene.gameZone;this.objects.footer.setVisible(!0),Phaser.Display.Align.In.TopCenter(this.objects.header,e),Phaser.Display.Align.In.Center(this.objects.main,e),Phaser.Display.Align.In.BottomCenter(this.objects.footer,e)}},n.createGroups=function(){e.prototype.createGroups.call(this),this.guideUI=this.scene.add.group(),this.groups.guideUI=this.guideUI},n.setUIObjects=function(t){e.prototype.setUIObjects.call(this,t),this.addUIObjectsToGroups()},n.addUIObjectsToGroups=function(){null!==this.objects&&this.addObjectForGuideUI()},n.addObjectForGuideUI=function(){this.objects},t}(fg),dT=uT,pT=function(e){function t(){return e.apply(this,arguments)||this}return(0,o.Z)(t,e),t.prototype.alignUI=function(){if(null!==this.objects){var e=this.scene.gameZone;this.objects.main.setPosition(0,0),this.objects.main.setScale(.95),this.objects.footer.setVisible(!1),Phaser.Display.Align.In.Center(this.objects.main.logo,this.objects.main,0,-150),Phaser.Display.Align.In.TopCenter(this.objects.header,e),Phaser.Display.Align.In.Center(this.objects.main,e,0,-15),Phaser.Display.Align.In.BottomCenter(this.objects.footer,e)}},t}(dT),gT=pT,fT=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n.scene=t,n}(0,o.Z)(t,e);var n=t.prototype;return n.createObjects=function(){this.objects=new hT(this.scene)},n.createLayouts=function(){this.scene.world.isLandscape()?this.layout=new gT(this.scene):this.layout=new dT(this.scene),this.layout.setUIObjects(this.objects)},n.initUILogic=function(){},n.updateUIState=function(){},t}(Ig),mT=fT,vT=[{key:"daily-level-0",mapJson:"./assets/json/daily-levels/level-0.json"}],ET=1;ET<=57;ET++)vT.push({key:"daily-level-"+ET,mapJson:"./assets/json/daily-levels/level-"+ET+".json"});var ST=function(){var e=new Date("01/01/2022"),t=(new Date).getTime()-e.getTime();return Math.floor(t/864e5)%vT.length},AT=function(){var e=ST();return vT[e]},yT=Wa.Z.DEFAULT,TT=yT.KEY,IT=yT.FRAME,CT=function(e){function t(t){var n;return(n=e.call(this,t,TT,IT.BUTTON_GREEN_BIG)||this).icon=void 0,n.text=void 0,n.button.setWorldSize(138,50),n.setName("Play"),n.createIcon(),n.createText(),n.alignItem(),n}(0,o.Z)(t,e);var n=t.prototype;return n.createIcon=function(){this.icon=this.scene.make.image({key:TT,frame:IT.ICON_I_PLAY}),this.icon.setWorldSize(20,26),this.add(this.icon)},n.createText=function(){var e=this.scene.world.getPixelRatio();this.text=this.scene.make.image({key:TT,frame:IT.TEXT_PLAY});var t=this.text,n=t.width,i=t.height;this.text.setWorldSize(n/e,i/e),this.add(this.text)},n.alignItem=function(){var e=this.width,t=this.icon.width,n=this.text.width,i=e/2,a=(e-10-t-n)/2+t/2,s=a+10+t/2+n/2;Phaser.Display.Align.In.Center(this.icon,this,a-i,-2),Phaser.Display.Align.In.Center(this.text,this,s-i,-2)},t}(ja.Z),bT=CT,OT="score",PT="collect",RT=Wa.Z.DEFAULT,wT=RT.KEY,xT=RT.FRAME,kT=Wa.Z.GAMEPLAY,_T=kT.KEY,LT=kT.FRAME,DT=Wa.Z.GAMEPLAY_32,MT=DT.KEY,NT=DT.FRAME,BT=GameCore.Configs,GT=BT.Network,FT=BT.Board,UT=function(e){function t(t,n,i,a){var s;(s=e.call(this,t,n,i,a)||this).scene=void 0,s.popup=void 0,s.title=void 0,s.buttonClose=void 0,s.contents=void 0,s.buttonPlay=void 0,s.boardCellData=[],s.targetData=[],s.panelCollection=void 0,s.tileCollection=void 0,s.textScore=void 0,s.popupShowUpAnimation=void 0,s.popupFadeOutAnimation=void 0,s.contentShowUpAnimation=void 0,s.popupFadeInMaskAnimation=void 0,s.popupFadeOutMaskAnimation=void 0,s.clickClose=function(){s.runCloseAnimation(),s.popupFadeOutAnimation.next((function(){var e=s.getData(["onClose"])[0];s.scene.screen.close(s.name),e&&e()}))},s.decodeMathData=function(e){try{return JSON.parse(GameCore.Utils.Hash.hashToString(e))}catch(t){return""}},s.scene=t;try{s.createPopup(),s.createTitle(),s.createTextScore(),s.createTargetItems(),s.createBoard(),s.createButtonPlay(),s.setDepth(za.Ks.POPUP),s.background.setAlpha(.5)}catch(r){}return s}(0,o.Z)(t,e);var n=t.prototype;return n.open=function(){var t=(0,r.Z)(l().mark((function t(n){return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.prototype.open.call(this,n),this.showLoadingScreen(),this.loadLevelConfig();case 3:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),n.startGame=function(){this.runOpenAnimation(),this.updateContent(),this.popup.setVisible(!0)},n.loadLevelConfig=function(){try{var e=AT(),t=e.key,n=e.mapJson;if(this.scene.cache.tilemap.exists(t))return void this.handleLoadCurrentMapComplete();this.scene.load.tilemapTiledJSON(t,n),this.scene.load.start(),this.scene.load.off(Phaser.Loader.Events.COMPLETE),this.scene.load.once(Phaser.Loader.Events.COMPLETE,this.handleLoadCurrentMapComplete.bind(this))}catch(a){(0,i.tO)(a)}},n.handleLoadCurrentMapComplete=function(){this.startGame(),this.hideLoadingScreen()},n.updateContent=function(){this.resetTarget(),this.updateTargetType(),this.drawTargetItems(),this.resetCellBoard(),this.updateCellBoard()},n.checkReceiveLevelFromFb=function(){var e=(0,r.Z)(l().mark((function e(){var t;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,t=this.scene.storage.getState(),!ol(t)){e.next=5;break}return e.abrupt("return");case 5:return e.next=7,this.scene.storage.dispatch(dh());case 7:e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),(0,i.tO)(e.t0);case 12:case"end":return e.stop()}}),e,this,[[0,9]])})));return function(){return e.apply(this,arguments)}}(),n.showLoadingScreen=function(){var e=this.scene.game,t=e.globalScene,n=e.lang;t.screen.open(za.o4.NOTIFY_SCREEN,{message:n.Text.LOADING_LEVEL+"...",duration:GT.Timeout,loading:!0})},n.hideLoadingScreen=function(){this.scene.game.globalScene.screen.close(za.o4.NOTIFY_SCREEN)},n.createPopup=function(){this.popup=new as.Z(this.scene,0,-7,286,373),this.popup.setVisible(!1),this.add(this.popup),Phaser.Display.Align.In.Center(this.popup,this.zone,0,10)},n.createTitle=function(){this.title=this.scene.add.container();var e=this.scene.world.getPixelRatio(),t=this.scene.make.image({key:wT,frame:xT.TEXT_DAILY_CHALLENGE});t.setWorldSize(t.width/e,t.height/e),this.buttonClose=new ja.Z(this.scene,wT,xT.BUTTON_CLOSE,35,35),this.buttonClose.setName("Close"),this.buttonClose.onClick=this.clickClose,this.title.add([t,this.buttonClose]),this.popup.add(this.title),Phaser.Display.Align.In.Center(t,this.title),Phaser.Display.Align.In.Center(this.buttonClose,this.title,138.5,-26),Phaser.Display.Align.In.TopCenter(this.title,this.popup,0,7)},n.createTextScore=function(){this.textScore=this.scene.make.bitmapText({font:Xa.Z.NUMBER_DARK.KEY,size:this.scene.fontSize(54),origin:{x:.5,y:.5},text:"0"}),this.popup.add(this.textScore)},n.createTargetItems=function(){var e=this.scene.world.getPixelRatio();this.tileCollection=this.scene.make.image({key:wT,frame:xT.TEXT_COLLECT});var t=this.tileCollection,n=t.width,i=t.height;this.tileCollection.setWorldSize(n/e,i/e),this.panelCollection=this.scene.make.image({key:wT,frame:xT.WOOD_PANEL}),this.panelCollection.setWorldSize(200,37),this.popup.add([this.tileCollection,this.panelCollection]),Phaser.Display.Align.In.Center(this.tileCollection,this.popup,0,-155),Phaser.Display.Align.In.Center(this.panelCollection,this.popup,0,-125)},n.drawTargetItems=function(){var e,t,n=AT().key,i=this.scene.make.tilemap({key:n}).properties;if(i&&(0,Tf.isArray)(i)&&!(i.length<2))for(var a=i[0].value,s=gf()(e=gf()(t=gf()(a).call(a,"{",'{"')).call(t,", ",', "')).call(e,":",'":'),r=JSON.parse(s),o=q()(r),c=this.calcPosition(o.length),l=0;l<o.length;l++){var h=o[l],u=hv[h],d=r[h],p=this.targetData[l];p||(p=this.spawnTargetItem(u,d));var g=p,f=g.container,m=g.text,v=g.gem;f.setVisible(!0),m.setText("x"+d),v.setFrame(u),this.targetData.push(p),Phaser.Display.Align.In.Center(f,this.popup,c[l],-130)}},n.spawnTargetItem=function(e,t){var n=this.scene.make.container({}),i=this.scene.make.image({key:MT,frame:e});i.setWorldSize(15,15);var a=this.scene.make.bitmapText({font:Xa.Z.PRIMARY_LIGHT.KEY,size:this.scene.fontSize(24),origin:{x:.5,y:.5},text:"x"+t});return n.add([i,a]),Phaser.Display.Align.In.Center(a,n,0,15),this.popup.add(n),{container:n,gem:i,text:a}},n.calcPosition=function(e){for(var t=[],n=150/(e+1),i=n*(e-1)/2,a=0;a<e;a++)t.push(n*a-i);return t},n.createBoard=function(){var e=this.scene.make.image({key:_T,frame:LT.BOARD});e.setWorldSize(200,184),this.popup.add(e),Phaser.Display.Align.In.Center(e,this.popup,0,-12),this.initCellBoard()},n.initCellBoard=function(){for(var e=0;e<FT.rows;e++){this.boardCellData[e]=[];for(var t=0;t<FT.cols;t++){var n=20*t-86.5+1.65*t,i=19*e-92+1*e,a=NT.GEM_TRANSPARENT,s=this.spawnCellBoard(a,n,i);this.boardCellData[e].push(s)}}},n.updateCellBoard=function(){this.drawBoardByMap()},n.resetTarget=function(){for(var e=0;e<this.targetData.length;e++){var t;null==(t=this.targetData[e])||null==(t=t.container)||t.setVisible(!1)}},n.updateTargetType=function(){var e=AT().key,t=this.scene.make.tilemap({key:e}).properties;if(t&&(0,Tf.isArray)(t)&&!(t.length<2)){var n=t[0].value,i=t[1].value,a=this.scene.world.getPixelRatio();if(i===OT){this.panelCollection.setVisible(!1),this.tileCollection.setFrame(xT.TEXT_TARGET_SCORE);var s=this.tileCollection,r=s.width,o=s.height;return this.tileCollection.setWorldSize(r/a,o/a),Phaser.Display.Align.In.Center(this.tileCollection,this.popup,0,-150),this.textScore.setText(""+n).setVisible(!0),void Phaser.Display.Align.In.Center(this.textScore,this.popup,0,-125)}this.panelCollection.setVisible(!0),this.tileCollection.setFrame(xT.TEXT_COLLECT);var c=this.tileCollection,l=c.width,h=c.height;this.tileCollection.setWorldSize(l/a,h/a),Phaser.Display.Align.In.Center(this.tileCollection,this.popup,0,-155),this.textScore.setVisible(!1)}},n.resetCellBoard=function(){for(var e=0;e<FT.rows;e++)for(var t=0;t<FT.cols;t++){this.boardCellData[e][t].setFrame(NT.GEM_TRANSPARENT)}},n.drawBoardByFen=function(e){for(var t=Du()(e).call(e).split("/"),n=0;n<t.length;n++)for(var i=t[n].split(","),a=0;a<i.length;a++){var s=i[a];if("x"!==s){var r=Rv(s);this.boardCellData[n][a].setFrame(r)}}},n.drawBoardByMap=function(){var e=AT().key,t=this.scene.make.tilemap({key:e}).layers;if((0,Tf.isArray)(t)){var n=t[0].data;if((0,Tf.isArray)(n))for(var i=0;i<n.length;i++)for(var a=n[i],s=0;s<a.length;s++){var r=a[s];if(!(r.index<0)){var o=hv[r.index-1];this.boardCellData[i][s].setFrame(o)}}}},n.spawnCellBoard=function(e,t,n){var i=this.scene.make.image({key:MT,frame:e});return i.setWorldSize(20,19),this.popup.add(i),Phaser.Display.Align.In.Center(i,this.popup,t,n),i},n.createButtonPlay=function(){this.buttonPlay=new bT(this.scene),this.buttonPlay.onClick=this.handlePlay.bind(this),this.popup.add(this.buttonPlay),Phaser.Display.Align.In.Center(this.buttonPlay,this.popup,0,111)},n.handlePlay=function(){var e=this;this.runCloseAnimation(),this.popupFadeOutAnimation.next((function(){e.scene.screen.close(e.name);var t=e.scene.storage.getState();ol(t)>vf.length||(e.scene.storage.dispatch(function(){var e=(0,r.Z)(l().mark((function e(t){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t({type:wn,payload:{}});case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.scene.storage.dispatch(Ph()),e.scene.analytics.event(Ot._.DAILY_CHALLENGE_BEGIN))}))},n.getLevelName=function(e){var t;return"journey_"+Ya()(t=GameCore.Utils.Number).call(t,e,4,"0")},n.runOpenAnimation=function(){var e;null!=(e=this.popupShowUpAnimation)&&null!=(e=e.tween)&&e.isPlaying()||(this.scene.audio.playSound(Ka.Z.POPUP_SHOW),this.runPopupEntrancesAnimation(0,300),this.runFadeInMaskAnimation(100,300))},n.runCloseAnimation=function(){var e;null!=(e=this.popupFadeOutAnimation)&&null!=(e=e.tween)&&e.isPlaying()||(this.runPopupExitsAnimation(50,200),this.runFadeOutMaskAnimation(0,200))},n.runPopupEntrancesAnimation=function(e,t){if(!this.popupShowUpAnimation){var n=this.popup.scale;this.popupShowUpAnimation=new is.Z({targets:[this.popup],delay:e,duration:t,props:{y:0,alpha:{start:1,from:1,to:1},scale:{start:0,from:0,to:n}}})}this.popupShowUpAnimation.play()},n.runPopupContentEntrancesAnimation=function(e,t){var n;null==(n=this.contentShowUpAnimation)||n.remove(),this.contentShowUpAnimation=new ns.Z({targets:this.contents.getChildren(),duration:t,delay:e,props:{alpha:{start:0,from:0,to:1}}}),this.contentShowUpAnimation.play()},n.runPopupExitsAnimation=function(e,t){var n=this;this.popupFadeOutAnimation||(this.popupFadeOutAnimation=new ts.Z({targets:[this.popup],delay:e,duration:t,props:{scale:0},ease:Phaser.Math.Easing.Back.In,onComplete:function(){n.popup.setY(0),n.scene.screen.close(n.name),n.popup.setVisible(!1)}})),this.popupFadeOutAnimation.play()},n.runFadeInMaskAnimation=function(e,t){if(!this.popupFadeInMaskAnimation){var n=this.background.alpha;this.popupFadeInMaskAnimation=new Eo.Z({targets:[this.background],delay:e,duration:t,props:{alpha:{start:0,from:0,to:n}}})}this.popupFadeInMaskAnimation.play()},n.runFadeOutMaskAnimation=function(e,t){if(!this.popupFadeOutMaskAnimation){var n=this.background.alpha;this.popupFadeOutMaskAnimation=new ts.Z({targets:[this.background],delay:e,duration:t,props:{alpha:{start:n,from:n,to:0}}})}this.popupFadeOutMaskAnimation.play()},t}(GameCore.Screen),HT=Wa.Z.DEFAULT,ZT=HT.KEY,YT=HT.FRAME,VT=Wa.Z.GAMEPLAY,WT=VT.KEY,zT=VT.FRAME,KT=Wa.Z.GAMEPLAY_32,jT=KT.KEY,XT=KT.FRAME,JT=GameCore.Configs,qT=JT.Network,QT=JT.Board,$T=function(e){function t(t,n,i,a){var s;(s=e.call(this,t,n,i,a)||this).popup=void 0,s.title=void 0,s.buttonClose=void 0,s.contents=void 0,s.buttonPlay=void 0,s.boardCellData=[],s.targetData=[],s.popupShowUpAnimation=void 0,s.popupFadeOutAnimation=void 0,s.contentShowUpAnimation=void 0,s.popupFadeInMaskAnimation=void 0,s.popupFadeOutMaskAnimation=void 0,s.clickClose=function(){s.runCloseAnimation(),s.popupFadeOutAnimation.next((function(){var e=s.getData(["onClose"])[0];s.scene.screen.close(s.name),e&&e()}))},s.decodeMathData=function(e){try{return JSON.parse(GameCore.Utils.Hash.hashToString(e))}catch(t){return""}};try{s.createPopup(),s.createTitle(),s.createTargetItems(),s.createBoard(),s.createButtonPlay(),s.setDepth(za.Ks.POPUP),s.background.setAlpha(.5)}catch(r){}return s}(0,o.Z)(t,e);var n=t.prototype;return n.open=function(){var t=(0,r.Z)(l().mark((function t(n){return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.prototype.open.call(this,n),t.next=3,this.checkReceiveLevelFromFb();case 3:this.loadLevelConfig();case 4:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),n.startGame=function(){this.runOpenAnimation(),this.updateContent(),this.popup.setVisible(!0)},n.loadLevelConfig=function(){try{var e=this.scene.storage.getState(),t=ol(e),n=vf[t];n||(n=vf[vf.length-1]);var a=n,s=a.key,r=a.mapJson;if(this.scene.cache.tilemap.exists(s))return void this.handleLoadCurrentMapComplete();this.scene.load.tilemapTiledJSON(s,r),this.scene.load.start(),this.scene.load.off(Phaser.Loader.Events.COMPLETE),this.scene.load.once(Phaser.Loader.Events.COMPLETE,this.handleLoadCurrentMapComplete.bind(this))}catch(o){(0,i.tO)(o)}},n.handleLoadCurrentMapComplete=function(){this.hideLoadingScreen(),this.startGame()},n.updateContent=function(){this.resetTarget(),this.drawTargetItems(),this.resetCellBoard(),this.updateCellBoard()},n.checkReceiveLevelFromFb=function(){var e=(0,r.Z)(l().mark((function e(){var t;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,t=this.scene.storage.getState(),!ol(t)){e.next=5;break}return e.abrupt("return");case 5:return this.showLoadingScreen(),e.next=8,this.scene.storage.dispatch(dh());case 8:e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),(0,i.tO)(e.t0);case 13:case"end":return e.stop()}}),e,this,[[0,10]])})));return function(){return e.apply(this,arguments)}}(),n.showLoadingScreen=function(){var e=this.scene.game,t=e.globalScene,n=e.lang;t.screen.open(za.o4.NOTIFY_SCREEN,{message:n.Text.LOADING_LEVEL+"...",duration:qT.Timeout,loading:!0})},n.hideLoadingScreen=function(){this.scene.game.globalScene.screen.close(za.o4.NOTIFY_SCREEN)},n.createPopup=function(){this.popup=new as.Z(this.scene,0,-7,286,373),this.popup.setVisible(!1),this.add(this.popup),Phaser.Display.Align.In.Center(this.popup,this.zone,0,10)},n.createTitle=function(){this.title=this.scene.add.container();var e=this.scene.world.getPixelRatio(),t=this.scene.make.image({key:ZT,frame:YT.TEXT_JOURNEY});t.setWorldSize(t.width/e,t.height/e),this.buttonClose=new ja.Z(this.scene,ZT,YT.BUTTON_CLOSE,35,35),this.buttonClose.setName("Close"),this.buttonClose.onClick=this.clickClose,this.title.add([t,this.buttonClose]),this.popup.add(this.title),Phaser.Display.Align.In.Center(t,this.title),Phaser.Display.Align.In.Center(this.buttonClose,this.title,138.5,-19.5),Phaser.Display.Align.In.TopCenter(this.title,this.popup,0,7)},n.createTargetItems=function(){var e=this.scene.world.getPixelRatio(),t=this.scene.make.image({key:ZT,frame:YT.TEXT_COLLECT});t.setWorldSize(t.width/e,t.height/e);var n=this.scene.make.image({key:ZT,frame:YT.WOOD_PANEL});n.setWorldSize(200,37),this.popup.add([t,n]),Phaser.Display.Align.In.Center(t,this.popup,0,-155),Phaser.Display.Align.In.Center(n,this.popup,0,-125)},n.drawTargetItems=function(){var e,t,n=this.scene.storage.getState(),i=ol(n),a=vf[i];a||(a=vf[vf.length-1]);var s=this.scene.make.tilemap({key:a.key}).properties;if(s&&(0,Tf.isArray)(s)&&!(s.length<2))for(var r=s[0].value,o=gf()(e=gf()(t=gf()(r).call(r,"{",'{"')).call(t,", ",', "')).call(e,":",'":'),c=JSON.parse(o),l=q()(c),h=this.calcPosition(l.length),u=0;u<l.length;u++){var d=l[u],p=hv[d],g=c[d],f=this.targetData[u];f||(f=this.spawnTargetItem(p,g));var m=f,v=m.container,E=m.text,S=m.gem;v.setVisible(!0),E.setText("x"+g),S.setFrame(p),this.targetData.push(f),Phaser.Display.Align.In.Center(v,this.popup,h[u],-130)}},n.spawnTargetItem=function(e,t){var n=this.scene.make.container({}),i=this.scene.make.image({key:jT,frame:e});i.setWorldSize(15,15);var a=this.scene.make.bitmapText({font:Xa.Z.PRIMARY_LIGHT.KEY,size:this.scene.fontSize(24),origin:{x:.5,y:.5},text:"x"+t});return n.add([i,a]),Phaser.Display.Align.In.Center(a,n,0,15),this.popup.add(n),{container:n,gem:i,text:a}},n.calcPosition=function(e){for(var t=[],n=150/(e+1),i=n*(e-1)/2,a=0;a<e;a++)t.push(n*a-i);return t},n.createBoard=function(){var e=this.scene.make.image({key:WT,frame:zT.BOARD});e.setWorldSize(200,184),this.popup.add(e),Phaser.Display.Align.In.Center(e,this.popup,0,-12),this.initCellBoard()},n.initCellBoard=function(){for(var e=0;e<QT.rows;e++){this.boardCellData[e]=[];for(var t=0;t<QT.cols;t++){var n=20*t-86.5+1.65*t,i=19*e-92+1*e,a=XT.GEM_TRANSPARENT,s=this.spawnCellBoard(a,n,i);this.boardCellData[e].push(s)}}},n.updateCellBoard=function(){var e=this.scene.storage.getState(),t=sl(e).data.fen;if(t){var n=t.split("l")[0];this.drawBoardByFen(n)}else this.drawBoardByMap()},n.resetTarget=function(){for(var e=0;e<this.targetData.length;e++){var t;null==(t=this.targetData[e])||null==(t=t.container)||t.setVisible(!1)}},n.resetCellBoard=function(){for(var e=0;e<QT.rows;e++)for(var t=0;t<QT.cols;t++){this.boardCellData[e][t].setFrame(XT.GEM_TRANSPARENT)}},n.drawBoardByFen=function(e){for(var t=Du()(e).call(e).split("/"),n=0;n<t.length;n++)for(var i=t[n].split(","),a=0;a<i.length;a++){var s=i[a];if("x"!==s){var r=Rv(s);this.boardCellData[n][a].setFrame(r)}}},n.drawBoardByMap=function(){var e=this.scene.storage.getState(),t=ol(e),n=vf[t];n||(n=vf[vf.length-1]);var i=this.scene.make.tilemap({key:n.key}).layers;if((0,Tf.isArray)(i)){var a=i[0].data;if((0,Tf.isArray)(a))for(var s=0;s<a.length;s++)for(var r=a[s],o=0;o<r.length;o++){var c=r[o];if(!(c.index<0)){var l=hv[c.index-1];this.boardCellData[s][o].setFrame(l)}}}},n.spawnCellBoard=function(e,t,n){var i=this.scene.make.image({key:jT,frame:e});return i.setWorldSize(20,19),this.popup.add(i),Phaser.Display.Align.In.Center(i,this.popup,t,n),i},n.createButtonPlay=function(){this.buttonPlay=new bT(this.scene),this.buttonPlay.onClick=this.handlePlay.bind(this),this.popup.add(this.buttonPlay),Phaser.Display.Align.In.Center(this.buttonPlay,this.popup,0,111)},n.handlePlay=function(){var e=this,t=this.scene.storage.getState();Sf(t)<1?this.scene.screen.open(za.o4.CLAIM_HEART_SCREEN):(this.runCloseAnimation(),this.popupFadeOutAnimation.next((function(){e.scene.screen.close(e.name);var t=e.scene.storage.getState();ol(t)>vf.length||e.scene.storage.dispatch(Ph())})))},n.getLevelName=function(e){var t;return"journey_"+Ya()(t=GameCore.Utils.Number).call(t,e,4,"0")},n.runOpenAnimation=function(){var e;null!=(e=this.popupShowUpAnimation)&&null!=(e=e.tween)&&e.isPlaying()||(this.scene.audio.playSound(Ka.Z.POPUP_SHOW),this.runPopupEntrancesAnimation(0,300),this.runFadeInMaskAnimation(100,300))},n.runCloseAnimation=function(){var e;null!=(e=this.popupFadeOutAnimation)&&null!=(e=e.tween)&&e.isPlaying()||(this.runPopupExitsAnimation(50,200),this.runFadeOutMaskAnimation(0,200))},n.runPopupEntrancesAnimation=function(e,t){if(!this.popupShowUpAnimation){var n=this.popup.scale;this.popupShowUpAnimation=new is.Z({targets:[this.popup],delay:e,duration:t,props:{y:0,alpha:{start:1,from:1,to:1},scale:{start:0,from:0,to:n}}})}this.popupShowUpAnimation.play()},n.runPopupContentEntrancesAnimation=function(e,t){var n;null==(n=this.contentShowUpAnimation)||n.remove(),this.contentShowUpAnimation=new ns.Z({targets:this.contents.getChildren(),duration:t,delay:e,props:{alpha:{start:0,from:0,to:1}}}),this.contentShowUpAnimation.play()},n.runPopupExitsAnimation=function(e,t){var n=this;this.popupFadeOutAnimation||(this.popupFadeOutAnimation=new ts.Z({targets:[this.popup],delay:e,duration:t,props:{scale:0},ease:Phaser.Math.Easing.Back.In,onComplete:function(){n.popup.setY(0),n.scene.screen.close(n.name),n.popup.setVisible(!1)}})),this.popupFadeOutAnimation.play()},n.runFadeInMaskAnimation=function(e,t){if(!this.popupFadeInMaskAnimation){var n=this.background.alpha;this.popupFadeInMaskAnimation=new Eo.Z({targets:[this.background],delay:e,duration:t,props:{alpha:{start:0,from:0,to:n}}})}this.popupFadeInMaskAnimation.play()},n.runFadeOutMaskAnimation=function(e,t){if(!this.popupFadeOutMaskAnimation){var n=this.background.alpha;this.popupFadeOutMaskAnimation=new ts.Z({targets:[this.background],delay:e,duration:t,props:{alpha:{start:n,from:n,to:0}}})}this.popupFadeOutMaskAnimation.play()},t}(GameCore.Screen),eI=Wa.Z.DEFAULT,tI=eI.KEY,nI=eI.FRAME,iI=function(e){function t(t,n,i,a){var s;return(s=e.call(this,t,n,i,a)||this).popup=void 0,s.title=void 0,s.buttonClose=void 0,s.contents=void 0,s.settingSound=void 0,s.settingVibrate=void 0,s.settingSoundContainer=void 0,s.settingMusicContainer=void 0,s.settingVibrateContainer=void 0,s.popupShowUpAnimation=void 0,s.popupFadeOutAnimation=void 0,s.contentShowUpAnimation=void 0,s.popupFadeInMaskAnimation=void 0,s.popupFadeOutMaskAnimation=void 0,s.handleClose=function(){s.runCloseAnimation()},s.handleMusicSetting=function(e){s.scene.player.setSetting("music",e),e?s.scene.audio.playMusic():s.scene.audio.pauseMusic()},s.handleSoundSetting=function(e){s.scene.player.setSetting("sound",e)},s.handleVibrateSetting=function(e){e&&Zp(199),s.scene.player.setSetting("vibrate",e)},s.createPopup(),s.createContentBackground(),s.createTitle(),s.createButtons(),s.addItem(),s.arrangeItems(),s.createInput(),s.setDepth(za.Ks.POPUP),s.background.setAlpha(.5),s}(0,o.Z)(t,e);var n=t.prototype;return n.open=function(){var t;e.prototype.open.call(this);var n=this.scene.player.getPlayerSettings(),i=n.sound,a=n.vibrate;this.settingSound.updateStatus(i),null==(t=this.settingVibrate)||t.updateStatus(a),this.runOpenAnimation()},n.createContentBackground=function(){var e=this.scene.make.image({key:tI,frame:nI.POPUP_CONTENT_BACKGROUND});e.setWorldSize(260,145),this.popup.add(e),Phaser.Display.Align.In.Center(e,this.popup,0,-4)},n.createInput=function(){this.buttonClose.onClick=this.handleClose,this.settingSound.onClick=this.handleSoundSetting,this.settingVibrate&&(this.settingVibrate.onClick=this.handleVibrateSetting)},n.createPopup=function(){this.popup=new as.Z(this.scene,0,0,286,226),this.add(this.popup),Phaser.Display.Align.In.Center(this.popup,this.zone,0,10)},n.createTitle=function(){this.title=this.scene.add.container();var e=this.scene.world.getPixelRatio(),t=this.scene.make.image({key:tI,frame:nI.TEXT_SETTING}),n=t.width,i=t.height;t.setWorldSize(n/e,i/e),this.buttonClose=new ja.Z(this.scene,tI,nI.BUTTON_CLOSE,35,35),this.buttonClose.setName("Close"),this.title.add([t,this.buttonClose]),Phaser.Display.Align.In.Center(t,this.title),Phaser.Display.Align.In.Center(this.buttonClose,this.title,135,-18)},n.createButtons=function(){var e=this.scene.player.getPlayerSettings(),t=e.sound,n=e.vibrate;this.createSoundButton(t),Up()&&!GameCore.Utils.Device.isIOS()?(this.createVibrateButton(n),Phaser.Display.Align.In.Center(this.settingSoundContainer,this.popup,0,-33),Phaser.Display.Align.In.Center(this.settingVibrateContainer,this.popup,0,28)):Phaser.Display.Align.In.Center(this.settingSoundContainer,this.popup,0,0)},n.createVibrateButton=function(e){this.settingVibrateContainer=this.scene.make.container({});var t=this.scene.make.image({key:tI,frame:nI.ICON_VIBRATE});t.setWorldSize(41,48),this.settingVibrate=new FE(this.scene,{enable:e,width:89,height:31}),this.settingVibrate.setName("Vibrate"),this.settingVibrateContainer.add([t,this.settingVibrate]),Phaser.Display.Align.In.Center(t,this.settingVibrateContainer,-60),Phaser.Display.Align.In.Center(this.settingVibrate,this.settingVibrateContainer,35),this.popup.add(this.settingVibrateContainer)},n.createSoundButton=function(e){this.settingSoundContainer=this.scene.make.container({});var t=this.scene.make.image({key:tI,frame:nI.ICON_SOUND});t.setWorldSize(40,35),this.settingSound=new FE(this.scene,{enable:e,width:89,height:31}),this.settingSound.setName("Sound"),this.settingSoundContainer.add([t,this.settingSound]),Phaser.Display.Align.In.Center(t,this.settingSoundContainer,-58),Phaser.Display.Align.In.Center(this.settingSound,this.settingSoundContainer,35),this.popup.add(this.settingSoundContainer),Phaser.Display.Align.In.Center(this.settingSoundContainer,this.popup,0,-33)},n.addItem=function(){this.popup.add([this.title]),this.contents=this.scene.add.group(),this.contents.addMultiple([])},n.arrangeItems=function(){Phaser.Display.Align.In.TopCenter(this.title,this.popup)},n.runOpenAnimation=function(){var e;null!=(e=this.popupShowUpAnimation)&&null!=(e=e.tween)&&e.isPlaying()||(this.scene.audio.playSound(Ka.Z.POPUP_SHOW),this.runPopupEntrancesAnimation(0,300),this.runFadeInMaskAnimation(100,300),this.runPopupContentEntrancesAnimation(200,300))},n.runCloseAnimation=function(){var e;null!=(e=this.popupFadeOutAnimation)&&null!=(e=e.tween)&&e.isPlaying()||(this.runPopupExitsAnimation(50,200),this.runFadeOutMaskAnimation(0,200))},n.runPopupEntrancesAnimation=function(e,t){if(!this.popupShowUpAnimation){var n=this.popup.scale;this.popupShowUpAnimation=new is.Z({targets:[this.popup],delay:e,duration:t,props:{y:0,alpha:{start:1,from:1,to:1},scale:{start:0,from:0,to:n}}})}this.popupShowUpAnimation.play()},n.runPopupContentEntrancesAnimation=function(e,t){var n;null==(n=this.contentShowUpAnimation)||n.remove(),this.contentShowUpAnimation=new ns.Z({targets:this.contents.getChildren(),duration:t,delay:e,props:{alpha:{start:0,from:0,to:1}}}),this.contentShowUpAnimation.play()},n.runPopupExitsAnimation=function(e,t){var n=this;this.popupFadeOutAnimation||(this.popupFadeOutAnimation=new ts.Z({targets:[this.popup],delay:e,duration:t,props:{scale:0},ease:Phaser.Math.Easing.Back.In,onComplete:function(){n.popup.setY(0),n.scene.screen.close(n.name)}})),this.popupFadeOutAnimation.play()},n.runFadeInMaskAnimation=function(e,t){if(!this.popupFadeInMaskAnimation){var n=this.background.alpha;this.popupFadeInMaskAnimation=new Eo.Z({targets:[this.background],delay:e,duration:t,props:{alpha:{start:0,from:0,to:n}}})}this.popupFadeInMaskAnimation.play()},n.runFadeOutMaskAnimation=function(e,t){if(!this.popupFadeOutMaskAnimation){var n=this.background.alpha;this.popupFadeOutMaskAnimation=new ts.Z({targets:[this.background],delay:e,duration:t,props:{alpha:{start:n,from:n,to:0}}})}this.popupFadeOutMaskAnimation.play()},t}(GameCore.Screen),aI=iI,sI=function(e){function t(){for(var t,n,i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];return(n=e.call.apply(e,T()(t=[this]).call(t,a))||this).layoutManager=void 0,n.run=function(){n.initManager(),n.loadLevelDaily(),n.layoutManager.objects.main.dailyChallengeButton.checkSuggestDailyMode()},n.onCreate=function(){var e=n.storage.getState(),t=Tc(e);null===t?n.storage.dispatch(Ch(!1)):!1===t&&n.showMiniJourneyScreen(),n.run()},n.onResume=function(){n.run()},n.onWake=function(){n.run();var e=n.storage.getState();Tc(e)||n.showMiniJourneyScreen()},n.clickPlayWithFriend=function(){n.storage.dispatch(wh())},n.clickPlaySolo=function(){n.storage.dispatch(Oh())},n.clickJourney=function(){n.storage.dispatch(Ph())},n.clickLevelScene=function(){n.scene.switch(Pa.Co.LEVEL_SCENE)},n.clickLeaderBoard=function(){n.screen.open(za.o4.LEADER_BOARD_SCREEN)},n.clickJourney1=function(){n.scene.switch(Pa.Co.LEVEL_SCENE)},n.clickSetting=function(){n.screen.open(za.o4.SETTINGS_SCREEN)},n}(0,o.Z)(t,e);var n=t.prototype;return n.loadLevelDaily=function(){try{var e=AT(),t=e.key,n=e.mapJson;if(this.cache.tilemap.exists(t))return;this.load.tilemapTiledJSON(t,n),this.load.start()}catch(i){}},n.showDailyChallengeScreen=function(){this.storage.dispatch(Ch(!0)),this.screen.open(za.o4.DAILY_CHALLENGE_SCREEN)},n.checkAndAddShortcut=function(){var e=this.storage.getState();ya(e)===fa&&this.facebook.attemptToAddShortcut()},n.preload=function(){this.events.on("wake",this.onWake),this.events.on("resume",this.onResume),this.events.on("create",this.onCreate)},n.create=function(){e.prototype.create.call(this),this.createBackground(pa.Z.BACKGROUND.KEY),this.createManager(),this.createScreens(),this.listenEvents()},n.createBg=function(){var e=this.make.image({key:pa.Z.BACKGROUND.KEY}),t=this.make.image({key:pa.Z.BACKGROUND.KEY});t.setFlipY(!0),Phaser.Display.Align.In.Center(e,this.gameZone),Phaser.Display.Align.In.Center(t,this.gameZone)},n.createManager=function(){this.layoutManager=new mT(this)},n.initManager=function(){this.layoutManager.init()},n.listenEvents=function(){var e=this.layoutManager.objects.main;e.setDepth(Va.Z.LOGO),e.playSingleButton.onClick=this.clickPlaySolo,e.journeyButton.onClick=this.clickLevelScene,e.dailyChallengeButton.onClick=this.showDailyChallengeScreen.bind(this),e.settingButton.onClick=this.clickSetting},n.createScreens=function(){this.createSettingsScreen(),this.createLeaderBoardScreen(),this.createDailyChallengeScreen(),this.createMiniJourneyScreen(),this.createClaimHeartScreen()},n.createSettingsScreen=function(){this.screen.add(za.o4.SETTINGS_SCREEN,aI)},n.createLeaderBoardScreen=function(){this.screen.add(za.o4.LEADER_BOARD_SCREEN,uu)},n.createDailyChallengeScreen=function(){this.screen.add(za.o4.DAILY_CHALLENGE_SCREEN,UT)},n.createMiniJourneyScreen=function(){this.screen.add(za.o4.MINI_JOURNEY_SCREEN,$T)},n.createClaimHeartScreen=function(){this.screen.add(za.o4.CLAIM_HEART_SCREEN,by)},n.showMiniJourneyScreen=function(){this.storage.dispatch(Ch(!0)),this.screen.open(za.o4.MINI_JOURNEY_SCREEN)},t}(du.Z);var rI=sI,oI=Wa.Z.GAMEPLAY_32,cI=oI.KEY,lI=oI.FRAME,hI=function(e){function t(t,n){var i;return(i=e.call(this,t,n.x+(n.padding||0),n.y+(n.padding||0))||this).canCapture={direction:"bottom",angle:0},i.status=void 0,i.rateShaking=1,i.t0=0,i.x0=void 0,i.y0=void 0,i.v0=void 0,i.alpha0=void 0,i.scale0=void 0,i.maxScale0=void 0,i.scaleRate0=void 0,i.imageBreak=void 0,i.imageCell=void 0,i.imageGameOver=void 0,i.imageGameStart=void 0,i.imageHighlight=void 0,i.tweenImageGameOver=void 0,i.tweenImageHighlight=void 0,i.tweenScaleDown=void 0,i.tweenAlphaImageBreak=void 0,i.tweenStartMission=void 0,i.setSize(n.width,n.height),i.x0=n.x+(n.padding||0),i.y0=n.y+(n.padding||0),i.createImageCell(),i.createImageGameStart(),i.createImageBreak(),i.createImageGameOver(),i.createImageHighlight(),i.createTweenImageGameOver(),i.createTweenImageGHighlight(),i.createTweenScaleDown(),i.createTweenAlphaImageBreak(),i.createTweenStartMission(),t.add.existing((0,Ba.Z)(i)),i}(0,o.Z)(t,e);var n=t.prototype;return n.createImageCell=function(){this.imageCell=this.scene.make.image({key:cI,frame:lI.GEM_TRANSPARENT}),this.imageCell.setWorldSize(this.width,this.height),this.add(this.imageCell),this.scale0=this.imageCell.scale},n.createImageBreak=function(){this.imageBreak=this.scene.make.image({key:cI,frame:lI.GEM_WHITE}),this.imageBreak.setVisible(!1),this.imageBreak.setWorldSize(this.width,this.height),this.add(this.imageBreak)},n.createImageGameStart=function(){this.imageGameStart=this.scene.make.image({key:cI,frame:lI.GEM_GLARE}),this.imageGameStart.setVisible(!1),this.imageGameStart.setWorldSize(this.width,this.height),this.add(this.imageGameStart)},n.createImageGameOver=function(){this.imageGameOver=this.scene.make.image({key:cI,frame:lI.GEM_SILVER}),this.imageGameOver.setVisible(!1),this.imageGameOver.setWorldSize(this.width,this.height),this.add(this.imageGameOver)},n.createTweenImageGameOver=function(){this.tweenImageGameOver=this.scene.add.tween({targets:[this.imageGameOver],duration:1200,ease:Phaser.Math.Easing.Quadratic.InOut,alpha:{from:0,to:1,start:0},paused:!0})},n.createImageHighlight=function(){this.imageHighlight=this.scene.make.image({key:cI,frame:lI.GEM_LIGHT}),this.imageHighlight.setVisible(!1),this.imageHighlight.setWorldSize(this.width,this.height),this.add(this.imageHighlight)},n.createTweenImageGHighlight=function(){this.tweenImageHighlight=this.scene.add.tween({targets:[this.imageHighlight],duration:100,ease:Phaser.Math.Easing.Quadratic.InOut,alpha:{from:0,to:1,start:0},paused:!0})},n.createTweenStartMission=function(){this.tweenStartMission=this.scene.add.tween({targets:[this.imageGameStart],duration:200,ease:Phaser.Math.Easing.Quadratic.InOut,scale:{from:0,to:this.scale0,start:0},alpha:{from:0,to:1,start:0},yoyo:!0,paused:!0})},n.createTweenScaleDown=function(){var e=this.imageBreak.scale;this.tweenScaleDown=this.scene.add.tween({delay:100,targets:[this.imageBreak],duration:600,ease:Phaser.Math.Easing.Quadratic.InOut,scale:{from:e,to:0,start:e},paused:!0})},n.createTweenAlphaImageBreak=function(){this.tweenAlphaImageBreak=this.scene.add.tween({targets:[this.imageBreak],duration:150,ease:Phaser.Math.Easing.Sine.InOut,alpha:{from:.2,to:.68},paused:!0})},n.showImageHighlight=function(){var e=this.imageCell.frame.name+"_light";this.imageHighlight.setFrame(e),this.imageHighlight.setVisible(!0).setAlpha(1)},n.hideImageHighlight=function(){this.imageHighlight.setVisible(!1)},n.isHighlight=function(){return this.imageHighlight.visible},n.isShaking=function(){return"SHAKING"===this.status},n.playAnimShaking=function(){this.status="SHAKING"},n.playTweenBreaking=function(){this.status="BREAKING"},n.setRateShaking=function(e){this.rateShaking=e},n.stopAnimShaking=function(){this.rotation=0,this.status=""},n.reset=function(){this.scale=1,this.alpha=1,this.imageCell.setAlpha(1)},n.resetImageBreak=function(){this.imageBreak.rotation=0,this.imageBreak.scale=this.scale0,this.imageBreak.setVisible(!1)},n.resetImageGameOver=function(){this.imageGameOver.setVisible(!1)},n.playAnimImageGameOver=function(){this.resetImageGameOver(),this.imageGameOver.setVisible(!0).setAlpha(0),this.tweenImageGameOver.play()},n.playTweenScaleDown=function(){this.resetImageBreak(),this.imageBreak.setVisible(!0).setScale(this.scale0).setAlpha(0),this.tweenAlphaImageBreak.play(),this.tweenScaleDown.play()},n.playTweenStartMission=function(){this.imageGameStart.setVisible(!0).setAlpha(0),this.tweenStartMission.play()},n.preUpdate=function(){if("SHAKING"===this.status)this.rotation+=.015*this.rateShaking,this.rotation>.1&&(this.rateShaking=-1),this.rotation<-.1&&(this.rateShaking=1)},n.handleTweenBreaking=function(){var e=this.alpha0<90?1:-1;this.t0+=3e3/1900;var t=.016*this.t0,n=Ou(this.v0,this.alpha0,t),i=Pu(this.v0,this.alpha0,t);this.imageBreak.x=this.x0+n,this.imageBreak.y=this.y0-i,this.imageBreak.rotation+=.04*e,this.imageBreak.scale>.4?this.imageBreak.scale-=this.scale0:this.imageBreak.scale=.4;var a=this.scene.gameZone,s=a.width,r=a.height;(this.imageBreak.x-this.imageBreak.displayWidth/2<0||this.imageBreak.x+this.imageBreak.displayWidth/2>s||this.imageBreak.y-this.imageBreak.displayHeight/2>r)&&(this.status="")},n.setFrameImageCell=function(e){this.imageCell.setFrame(e)},n.setAlphaImageCell=function(e){this.imageCell.setAlpha(e)},n.setScaleImageCell=function(e){this.imageCell.setScale(e)},n.getFrameImageCell=function(){return this.imageCell.frame.name},t}(Phaser.GameObjects.Container),uI=hI,dI=Wa.Z.GAMEPLAY_32,pI=dI.KEY,gI=dI.FRAME,fI=GameCore.Configs.Board,mI=fI.cols,vI=fI.rows,EI=function(e){function t(n,i,a){var s;return(s=e.call(this,n)||this).scene=void 0,s.type=void 0,s.direction=void 0,s.isReverse=!1,s.data=[],s.matrixData=void 0,s.texture=void 0,s.frame=void 0,s.maxHeight=void 0,s.cellItems=[],s.originalData=void 0,s.isSetDrag=!1,s.isCreateCell=!1,s.wrap=void 0,s.wrapPiece=void 0,s.isDragEnd=!1,s.isActive=!0,s.isVisible=!0,s.pointerY=void 0,s.parentHeight=void 0,s.index=void 0,s.props=void 0,s.cells=[],s.parent=void 0,s.moveTopNumber=30,s.backupPx=void 0,s.backupPy=void 0,s.animMoveTopAndScaleUp=void 0,s.animMoveDownAndScaleDown=void 0,s.animScaleUp=void 0,s.animScaleDown=void 0,s.distancePY=void 0,s.isCanMove=void 0,s.correctAlpha=1,s.props=a,s.type=a.type,s.matrixData=a.matrixData,s.data=t.buildData(s.matrixData),s.direction=a.direction||null,s.parentHeight=a.parentHeight||0,s.isReverse=a.isReverse||!1,s.parent=i,s.scene=n,s.scene.world.isLandscape()?s.setSize(i.width,i.height/3):s.setSize(i.width/3,i.height),s.scene.add.existing((0,Ba.Z)(s)),s.createWrapPiece(),s.listenEvents(),s}(0,o.Z)(t,e);var n=t.prototype;return n.createWrapPiece=function(){this.wrapPiece=this.scene.make.image({key:pI,frame:gI.GEM_TRANSPARENT}),this.wrapPiece.setWorldSize(this.width,this.height)},n.listenEvents=function(){var e=this;this.wrapPiece.removeAllListeners(),this.setInteractiveContainer(),this.wrapPiece.on(Phaser.Input.Events.POINTER_DOWN,(function(){e.parent.playTweenToEnableMaxFps()})),this.wrapPiece.on(Phaser.Input.Events.DRAG_START,(function(t){e.handleDragStart(t)})),this.wrapPiece.on(Phaser.Input.Events.DRAG,(function(t){e.handleDrag(t)})),this.wrapPiece.on(Phaser.Input.Events.DRAG_END,(function(){e.handleDragEnd(),e.parent.stopTweenToEnableMaxFps()}))},n.updateSize=function(){this.scene.world.isLandscape()?this.setSize(this.parent.width,this.parent.height/3):this.setSize(this.parent.width/3,this.parent.height),this.wrapPiece.setWorldSize(this.width,this.height)},n.updatePosition=function(e,t){this.setPosition(e,t),this.backupPx=this.x,this.backupPy=this.y},n.updateWrapPiecePosition=function(){var e=this.getWorldPosition(),t=e.x,n=e.y;this.wrapPiece.setPosition(t,n)},n.setIndex=function(e){this.index=e},n.updateDataPiece=function(e){this.data=e},n.setInteractiveContainer=function(){this.wrapPiece.setInteractive({useHandCursor:!0}).input.hitArea.setTo(0,0,this.width/this.wrapPiece.scaleX,this.height/this.wrapPiece.scaleY),this.scene.input.setDraggable(this.wrapPiece)},n.handleDragStart=function(e){var t,n,i=this;if(!this.scene.isGameOver&&this.isCanMove){null==(t=this.animScaleUp)||t.stop(),null==(n=this.animScaleDown)||n.stop(),this.setAlpha(this.correctAlpha).setScale(1).setPosition(this.x,this.y),this.isDragEnd=!1,this.isSetDrag=!0,this.setDepth(Va.Z.PIECE+1),this.parent.bringToTop(this),this.animMoveDownAndScaleDown&&this.animMoveDownAndScaleDown.isPlaying()&&(this.animMoveDownAndScaleDown.stop(),this.setScale(1)),this.scene.audio.playSound(Ka.Z.PIECE_PICK);var a=this.scene.layoutManager.objects.main,s=a.board.cellSize/this.parent.cellSize,r=this.getContainerSize().height,o=e.worldX-this.getWorldPosition().x+this.x,c=0;if(Iu()||this.scene.world.isLandscape())c=e.worldY-this.getWorldPosition().y+this.y-r*s/2;else{var l=this.scene.gameZone.height/2+a.board.width/2-2*this.parent.cellSize+this.moveTopNumber,h=this.y+r*s-l+r;h=this.scene.gameZone.width/this.scene.gameZone.height>=375/619?44+r*s/2:53+r*s/2,c=e.worldY-this.getWorldPosition().y+this.y-h}this.distancePY=e.worldY-c;var u=41*a.board.cellPadding/100;this.updateCellsWithPadding(u),this.animMoveTopAndScaleUp=this.scene.tweens.add({x:o,y:c,scale:s,duration:150,targets:this,ease:Phaser.Math.Easing.Sine.InOut,delay:20,onComplete:function(){if(!i.isDragEnd){i.setPosition(o,c);var e=i.getCellsHighlight();a.board.handleRemoveHighlight(),a.board.handleHighlight(e,i.highlightCellCanCapture.bind(i))}}}),this.drawSuggestCells()}},n.getPX=function(e,t){var n=this.scene.gameZone.width,i=this.getContainerSize().width;return e<i?i/2:e>n-i?n-2*i:t},n.handleDrag=function(e){if(!this.scene.isGameOver&&this.isCanMove&&this.isSetDrag)try{var t=this.scene.layoutManager.objects.main;if(this.animMoveTopAndScaleUp&&this.animMoveTopAndScaleUp.isPlaying()){var n=t.board.cellSize/this.parent.cellSize;this.animMoveTopAndScaleUp.complete(),this.animMoveTopAndScaleUp.stop(),this.setScale(n)}var i=this.checkOutOfThePage(e),a=i.lockX,s=i.lockY;if(a&&s)return;this.resetCellItems(),this.scene.game.updateFps(yu.Z.max);var r=e.worldX-this.getWorldPosition().x+this.x,o=e.worldY-this.distancePY;a?this.setY(o):s?this.setX(r):this.setPosition(r,o),this.canMove();var c=this.getCellsHighlight();t.board.handleRemoveHighlight(),t.board.handleHighlight(c,this.highlightCellCanCapture.bind(this))}catch(l){this.handleDragPieceInvalidMove()}},n.checkOutOfThePage=function(e){var t=this.getContainerSize(),n=t.width,i=t.height,a=this.scene.gameZone,s=a.width,r=a.height,o=e.worldX,c=e.worldY,l=this.distancePY-this.getWorldPosition().y+this.y,h=!1,u=!1;return(o<n/2||o>s-n/2)&&(h=!0),(c-l<i/2||c-l>r)&&(u=!0),{lockX:h,lockY:u}},n.highlightCellCanCapture=function(e,t,n,i){for(var a=this,s=mI,r=vI,o=[],c=0;c<i.length;c++){var l=i[c],h=l.x,u=l.y;s>h&&(s=h),r>u&&(r=u)}for(var d=function(){var t=e[p],n=Ae()(i).call(i,(function(e){return e.y===t}));if(!n||0===n.length)return 1;for(var s=0;s<n.length;s++){var r=n[s];a.checkItemInArray(o,r)||o.push(r)}},p=0;p<e.length;p++)d();for(var g=function(){var e=t[f],n=Ae()(i).call(i,(function(t){return t.x===e}));if(!n||0===n.length)return 1;for(var s=0;s<n.length;s++){var r=n[s];a.checkItemInArray(o,r)||o.push(r)}},f=0;f<t.length;f++)g();for(var m=function(){var e=n[v],t=Ae()(i).call(i,(function(t){return t.x===e.x&&t.y===e.y}));if(!t||0===t.length)return 1;var s=t[0];a.checkItemInArray(o,s)||o.push(s)},v=0;v<n.length;v++)m();for(var E=function(){var e,t=o[S],n=t.x,i=t.y,c=Ae()(e=a.cellItems).call(e,(function(e){return e.x===n-s&&e.y===i-r}));if(!c||0===c.length)return 1;var l=a.getFrameLight(c[0].cell.getFrameImageCell());c[0].cell.setFrameImageCell(l)},S=0;S<o.length;S++)E()},n.getFrameLight=function(e){var t=e;switch(e){case gI.GEM:t=gI.GEM_LIGHT;break;case gI.GEM_DIAMOND_10:t=gI.GEM_DIAMOND_10_LIGHT;break;case gI.GEM_DIAMOND_11:t=gI.GEM_DIAMOND_11_LIGHT;break;case gI.GEM_DIAMOND_12:t=gI.GEM_DIAMOND_12_LIGHT;break;case gI.GEM_DIAMOND_13:t=gI.GEM_DIAMOND_13_LIGHT;break;case gI.GEM_DIAMOND_14:t=gI.GEM_DIAMOND_14_LIGHT;break;case gI.GEM_DIAMOND_15:t=gI.GEM_DIAMOND_15_LIGHT}return t},n.resetCellItems=function(){for(var e=0;e<this.cellItems.length;e++){var t=this.cellItems[e].cell.getFrameImageCell().replace("_light","");this.cellItems[e].cell.setFrameImageCell(t)}},n.checkItemInArray=function(e,t){var n=Ae()(e).call(e,(function(e){return e.x===t.x&&e.y===t.y}));return!(!n||0===n.length)},n.handleDragPieceInvalidMove=function(){var e=this.scene.layoutManager.objects.main;e.board.handleRemoveHighlight(),e.board.removeAllCanCaptureCells()},n.handleDragEnd=function(){if(!this.isDragEnd&&this.isSetDrag&&this.isCanMove){this.isDragEnd=!0,this.isSetDrag=!1;var e=this.scene.layoutManager.objects.main;this.setDepth(Va.Z.PIECE),e.board.handleRemoveSuggestMove(),e.board.removeAllCanCaptureCells(),this.resetCellItems();try{this.canMove(),this.scene.audio.playSound(Ka.Z.PIECE_DROP),this.handleBoardMoveCompleted(),this.wrapPiece.disableInteractive()}catch(t){this.handleInvalidMove()}}},n.cancelDrag=function(){if(!this.isDragEnd&&this.isSetDrag){this.isDragEnd=!0,this.isSetDrag=!1;var e=this.scene.layoutManager.objects.main;this.setDepth(Va.Z.PIECE),e.board.handleRemoveSuggestMove(),e.board.removeAllCanCaptureCells(),this.resetCellItems(),e.board.handleRemoveHighlight(),this.handleInvalidMove()}},n.handleBoardMoveCompleted=function(){var e=this,t=this.getPositionTopLeftInBoard(),n=this.scene.layoutManager.objects.main;if(t){if(this.scene.targetMissionManager.getTargetType()===OT){var i=this.calcScore();this.scene.handleUpdateScore(i||0),this.scene.handleAddScoreAnim(i||0)}var a=t.x,s=t.y,r=n.board.dataBoard[s][a].cell.getWorldPosition(),o=r.x,c=r.y,l=this.getWorldPosition(),h=l.x,u=l.y,d=this.x+o-h,p=this.y+c-u,g=this.getContainerSizeOrigin(),f=d+g.width/2,m=p+g.height/2,v=this.getCellsHighlight();this.scene.add.tween({targets:this,x:f,y:m,duration:50,onComplete:function(){e.updateCellsWithPadding(.5),n.board.handleRemoveHighlight(),e.hide(),e.setScale(1),e.parent.removeActivePiece(e.index),n.board.handleMove(v,e.onBoardHandleMoveCompleted.bind(e))}})}else n.board.handleRemoveHighlight()},n.getContainerSizeOrigin=function(){var e=this.data[0].length-1,t=this.data.length-1,n=this.parent.cellSize;return{width:e*n*this.scale,height:t*n*this.scale}},n.calcScore=function(){var e;if(!this.matrixData)return 0;var t=this.matrixData.length||0;if(0===t)return 0;for(var n=(null==(e=this.matrixData[0])?void 0:e.length)||0,i=0,a=0;a<t;a++)for(var s=0;s<n;s++)1===this.matrixData[a][s]&&i++;return i},n.hide=function(){this.setVisible(!1),this.wrapPiece.setVisible(!1)},n.show=function(){this.setVisible(!0),this.wrapPiece.setVisible(!0)},n.playAnimShow=function(){this.setAlpha(0).setScale(0),this.show(),this.animScaleUp.play()},n.onBoardHandleMoveCompleted=function(){this.parent.setActivePieces(),this.parent.existPiecesActive()||this.parent.showNewPieces(),this.scene.tutorialManager.isRunning()&&this.scene.tutorialManager.nextStep()},n.drawSuggestCells=function(){var e=this.scene.layoutManager.objects.main,t=function(e,t){for(var n=e.length,i=e[0].length,a=0,s=0,r=0,o=0;o<n;o++)for(var c=0;c<i;c++)if(Tv(e,c,o,t)&&(s=c,r=o,++a>1))return null;if(0===a)return null;for(var l=[],h=0;h<t.data.length;h++)for(var u=0;u<t.data[h].length;u++)t.data[h][u].texture&&l.push({x:s+u,y:r+h});return l&&l.length>0?l:null}(e.board.dataBoard,{data:this.data});t&&e.board.handleSuggestMove(t)},n.handleInvalidMove=function(){var e=this;this.scene.audio.playSound(Ka.Z.PIECE_INVALID_MOVE),this.scene.layoutManager.objects.main.board.handleRemoveHighlight(),this.animMoveDownAndScaleDown=this.scene.tweens.add({x:this.backupPx,y:this.backupPy,scaleX:1,scaleY:1,duration:300,targets:this,ease:"Sine.easeInOut",delay:20,onComplete:function(){e.updateCellsWithPadding(.5)}}),this.scene.tutorialManager.isRunning()&&this.scene.tutorialManager.handleStep()},n.canMove=function(){var e=this.scene.layoutManager.objects.main.board.dataBoard,t=this.getCellsHighlight();if(0===t.length)throw new Error("Invalid Move");for(var n=!0,i=0;i<t.length;i++){var a=t[i],s=a.x,r=a.y;if(!e[r]||!e[r][s]||0!==e[r][s].value){n=!1;break}}if(!n||0===t.length)throw new Error("Invalid Move");return n},n.getCellsHighlight=function(){var e=this.scene.layoutManager.objects.main.board.dataBoard,t=[],n=this.getPositionTopLeftInBoard();if(null===n)return t;if(this.scene.tutorialManager.isRunning()){if(1==this.index&&0==this.scene.tutorialManager.step)return t;if(!this.scene.tutorialManager.validTargetPosition(n))return t}for(var i=0;i<this.data.length;i++)for(var a=0;a<this.data[i].length;a++)if(this.data[i][a].texture){var s=a+n.x,r=i+n.y,o=e[r]&&e[r][s]?e[r][s].x:0,c=e[r]&&e[r][s]?e[r][s].y:0;if(r>=vI||s>=mI||!e[r][s]||1===e[r][s].value)return[];t.push({x:s,y:r,pX:o,pY:c,frame:this.data[i][a].texture})}return t},n.getPositionTopLeftInBoard=function(){for(var e=this.scene.layoutManager.objects.main,t=this.getContainerSize(),n=t.width,i=t.height,a=this.getWorldPosition(),s=a.x,r=a.y,o=e.board.dataBoard,c=s+this.parent.cellSize*this.scale-n/2,l=r+this.parent.cellSize*this.scale-i/2,h=e.board.cellPadding,u=-1,d=-1,p=0;p<vI;p++)for(var g=0;g<mI;g++){var f=o[p][g].cell.getWorldPosition(),m=f.x,v=f.y;if(m-h/2<=c&&m+o[p][g].width+h/2>=c&&v-h/2<=l&&v+o[p][g].height+h/2>=l){u=g,d=p;break}}return u<0||u>mI-1||d<0||d>vI-1?null:{x:u,y:d}},t.buildData=function(e){for(var t=[],n=0;n<e.length;n++){t[n]=[];for(var i=0;i<e[n].length;i++){var a=1===e[n][i]?gI.GEM:null;t[n][i]={x:i,y:n,texture:a}}}return t},n.drawPiece=function(){return this.isCreateCell?this.updateCells():this.createCells(.5),this.createAnimShow(),this.playAnimShow(),this.wrapPiece.setInteractive(),this},n.createAnimShow=function(){var e=this,t=140*this.index;this.animScaleUp=this.scene.tweens.add({delay:t,paused:!0,duration:163,targets:this,alpha:{from:0,to:this.alpha},scale:{from:0,to:1.2},ease:Phaser.Math.Easing.Linear,onComplete:function(){e.animScaleDown.play()}}),this.animScaleDown=this.scene.tweens.add({delay:83,paused:!0,duration:150,targets:this,scale:1,ease:Phaser.Math.Easing.Linear})},n.createCells=function(e){for(var t=this.parent.cellSize,n=this.data.length,i=this.data[0].length,a=0;a<this.data.length;a++){this.cells[a]=[];for(var s=0;s<this.data[a].length;s++)if(this.data[a][s].texture&&"x"!==this.data[a][s].texture){var r={x:(s-(i-1)/2)*(t+e),y:(a-(n-1)/2)*(t+e),width:t-2*e,height:t-2*e},o=new uI(this.scene,r);o.setFrameImageCell(this.data[a][s].texture),this.cells[a][s]=o,this.cellItems.push({x:s,y:a,cell:o}),this.add(o)}}this.isCreateCell=!0},n.resetPiece=function(){this.cellItems.forEach((function(e){e.cell.destroy()})),this.cells=[],this.cellItems=[],this.createCells(.5)},n.updateCells=function(){for(var e=0;e<this.data.length;e++)for(var t=0;t<this.data[e].length;t++)if(this.data[e][t].texture&&"x"!==this.data[e][t].texture){var n=this.cells[e][t];n.setFrameImageCell(this.data[e][t].texture),this.cells[e][t]=n}},n.updateCellsWithPadding=function(e){for(var t=this.parent.cellSize,n=this.data.length,i=this.data[0].length,a=0;a<this.data.length;a++)for(var s=0;s<this.data[a].length;s++)if(this.data[a][s].texture){var r=(s-(i-1)/2)*(t+e),o=(a-(n-1)/2)*(t+e);this.cells[a][s].setPosition(r,o)}},n.getContainerSize=function(){for(var e=0,t=this.data.length,n=0;n<this.data.length;n++)this.data[n].length>e&&(e=this.data[n].length);var i=this.parent.cellSize;return{width:e*i*this.scale,height:t*i*this.scale}},n.setCanMove=function(e){this.isCanMove=e,this.correctAlpha=e?1:.4,this.setAlpha(this.correctAlpha)},n.reset=function(){this.setVisible(!1),this.setScale(1),this.wrapPiece.disableInteractive(),this.data=t.buildData(this.matrixData)},n.getScore=function(){if(!this.matrixData)return 0;for(var e=0,t=0;t<this.matrixData.length;t++)for(var n=0;n<this.matrixData[0].length;n++)1===this.matrixData[t][n]&&e++;return e},t}(Phaser.GameObjects.Container),SI=function(e){function t(n,i,a){return e.call(this,n,i,(0,s.Z)({},a,{matrixData:t.getMatrixData(a.type,a.direction,a.isReverse)}))||this}return(0,o.Z)(t,e),t.getMatrixData=function(e,t,n){void 0===n&&(n=!1);var i=[];switch(t){case Of:n?i=bm:(i=Cm,e===zf&&(i=Om),e===Kf&&(i=Pm));break;case Pf:n?i=vm:(i=mm,e===zf&&(i=Em),e===Kf&&(i=Sm));break;case Rf:if(n){i=pm;break}i=dm,e===zf&&(i=gm),e===Kf&&(i=fm);break;case wf:n?i=ym:(i=Am,e===zf&&(i=Tm),e===Kf&&(i=Im))}return i},t.getData=function(e,n,i){return void 0===i&&(i=!1),t.buildData(t.getMatrixData(e,n,i))},t}(EI),AI=SI,yI=function(e){function t(n,i,a){return e.call(this,n,i,(0,s.Z)({},a,{matrixData:t.getMatrixData(a.type,a.direction)}))||this}return(0,o.Z)(t,e),t.getMatrixData=function(e,t){var n=[];switch(e){case qf:n=t===Cf?Dm:Mm;break;case Jf:n=t===Cf?_m:Lm;break;case jf:n=t===Cf?Rm:wm;break;case Xf:n=t===Cf?xm:km}return n},t.getData=function(e,n){return t.buildData(t.getMatrixData(e,n))},t}(EI),TI=yI,II=function(e){function t(n,i,a){return e.call(this,n,i,(0,s.Z)({},a,{matrixData:t.getMatrixData(a.type)}))||this}return(0,o.Z)(t,e),t.getMatrixData=function(e){var t=[];switch(e){case Qf:t=Nm;break;case $f:t=Bm;break;case em:t=Gm}return t},t.getData=function(e){return t.buildData(t.getMatrixData(e))},t}(EI),CI=II,bI=function(e){function t(n,i,a){return e.call(this,n,i,(0,s.Z)({},a,{matrixData:t.getMatrixData(a.direction)}))||this}return(0,o.Z)(t,e),t.getMatrixData=function(e){var t=[];switch(e){case Of:t=Ym;break;case Pf:t=Vm;break;case Rf:t=Wm;break;case wf:t=zm;break;default:t=Ym}return t},t.getData=function(e){return t.buildData(t.getMatrixData(e))},t}(EI),OI=bI,PI=function(e){function t(n,i,a){return e.call(this,n,i,(0,s.Z)({},a,{matrixData:t.getMatrixData(a.type,a.direction)}))||this}return(0,o.Z)(t,e),t.getDataByDirectionCross2=function(e){var t=[];switch(e){case Of:t=Qm;break;case Pf:t=$m;break;default:t=Qm}return t},t.getDataByDirectionCross3=function(e){var t=[];switch(e){case Of:t=ev;break;case Pf:t=tv;break;default:t=ev}return t},t.getDataByDirectionCross4=function(e){var t=[];switch(e){case Of:t=nv;break;case Pf:t=iv;break;default:t=nv}return t},t.getDataByDirectionCross5=function(e){var t=[];switch(e){case Of:t=av;break;case Pf:t=sv;break;default:t=av}return t},t.getMatrixData=function(e,n){var i=[];switch(e){case sm:i=t.getDataByDirectionCross2(n);break;case rm:i=t.getDataByDirectionCross3(n);break;case om:i=t.getDataByDirectionCross4(n);break;case cm:i=t.getDataByDirectionCross5(n)}return i},t.getData=function(e,n){return t.buildData(t.getMatrixData(e,n))},t}(EI),RI=PI,wI=function(e){function t(n,i,a){return e.call(this,n,i,(0,s.Z)({},a,{matrixData:t.getMatrixData(a.direction)}))||this}return(0,o.Z)(t,e),t.getMatrixData=function(e){var t=[];switch(e){case xf:t=Fm;break;case kf:t=Um;break;case Lf:t=Zm;break;case _f:t=Hm;break;default:t=Fm}return t},t.getData=function(e){return t.buildData(t.getMatrixData(e))},t}(EI),xI=wI,kI=function(e){function t(n,i,a){return e.call(this,n,i,(0,s.Z)({},a,{matrixData:t.getMatrixData()}))||this}return(0,o.Z)(t,e),t.getMatrixData=function(){return qm},t.getData=function(){return t.buildData(t.getMatrixData())},t}(EI),_I=kI,LI=function(e){function t(n,i,a){return e.call(this,n,i,(0,s.Z)({},a,{matrixData:t.getMatrixData(a.direction)}))||this}return(0,o.Z)(t,e),t.getMatrixData=function(e){var t=[];switch(e){case Of:t=Km;break;case Pf:t=jm;break;case Rf:t=Xm;break;case wf:t=Jm;break;default:t=Km}return t},t.getData=function(e){return t.buildData(t.getMatrixData(e))},t}(EI),DI=LI,MI=function(e){function t(n,i,a){return e.call(this,n,i,(0,s.Z)({},a,{matrixData:t.getMatrixData(a.direction)}))||this}return(0,o.Z)(t,e),t.getMatrixData=function(e){var t=[];switch(e){case Of:t=rv;break;case Pf:t=ov;break;case Rf:t=cv;break;case wf:t=lv;break;default:t=rv}return t},t.getData=function(e){return t.buildData(t.getMatrixData(e))},t}(EI),NI=MI,BI=function(){function e(e){this.scene=void 0,this.currentLevel=void 0,this.scene=e}var t=e.prototype;return t.init=function(){var e=this.scene.storage.getState(),t=ol(e)||1;this.currentLevel=t},t.setLevel=function(e){this.currentLevel=e},t.getLevel=function(){return this.currentLevel},t.getLevelConfig=function(){var e=this.scene.storage.getState();return cl(e)?AT():vf[this.currentLevel]},t.getNextLevel=function(){return this.currentLevel+1},t.getNextLevelConfig=function(){return vf[this.currentLevel+1]},t.increaseLevel=function(){this.currentLevel++},e}(),GI=function(){function e(e){this.scene=void 0,this.map=void 0,this.scene=e}var t=e.prototype;return t.init=function(){this.initMap()},t.initMap=function(){var e=this.scene.levelManager.getLevelConfig();this.map=this.scene.make.tilemap({key:e.key})},t.getTileMap=function(){return Te()(this)},t.reloadMap=function(){var e,t=this.scene.storage.getState();0===ol(t)&&this.scene.levelManager.setLevel(1);var n=this.scene.levelManager.getLevelConfig();null==(e=Te()(this))||e.destroy(),this.map=this.scene.make.tilemap({key:n.key})},e}(),FI=function(){function e(){this.targetType=void 0,this.targetValue=void 0,this.init()}var t=e.prototype;return t.init=function(){},t.setTargetType=function(e){this.targetType=e},t.setTargetValue=function(e){this.targetValue=e},t.getTargetType=function(){return this.targetType},t.getTargetValue=function(){return this.targetValue},e}(),UI=Wa.Z.GAMEPLAY_32.KEY,HI=function(e){function t(t,n,i,a){var s;return(s=e.call(this,t,n,i,a)||this).scene=void 0,s.textWellDone=void 0,s.listTargetFrame=[],s.listAnim=[],s.closeTimerEvent=void 0,s.tweenBackground=void 0,s.open=function(t){e.prototype.open.call((0,Ba.Z)(s),t),s.runPopupEntrancesAnimation(0,300)},s.close=function(){e.prototype.close.call((0,Ba.Z)(s))},s.scene=t,s.setDepth(za.Ks.POPUP),s.background.setAlpha(0),s.createContent(),s}(0,o.Z)(t,e);var n=t.prototype;return n.handleDelegate=function(){var e,t=this,n=this.getData(["duration","onClose"]),i=n[0],a=void 0===i?0:i,s=n[1];null==(e=this.closeTimerEvent)||e.remove(),a>0&&(this.closeTimerEvent=this.scene.time.addEvent({delay:a,callback:function(){t.visible&&t.scene.screen.close(t.name),s&&s()}}))},n.runAnim=function(){},n.createContent=function(){this.createText()},n.createText=function(){var e=this.scene.facebook.getLocale();this.textWellDone="ar"==e?new sE(this.scene,{text:this.scene.lang.Text.WELL_DONE,font:Xa.Z.PRIMARY_LIGHT.KEY,size:this.scene.fontSize(180)}):new aE(this.scene,{text:this.scene.lang.Text.WELL_DONE,font:Xa.Z.PRIMARY_LIGHT.KEY,size:this.scene.fontSize(80)}),this.add(this.textWellDone),Phaser.Display.Align.In.Center(this.textWellDone,this)},n.createTargetItems=function(){var e=this.scene.layoutManager.objects.header.collectItems.getTargetKeys();if(e&&0!==e.length){for(var t=0;t<3;t++){var n=this.scene.make.image({key:UI});n.setWorldSize(30,30),n.setFrame(e[t]||e[0]),n.setVisible(!1).setAlpha(0),this.listTargetFrame.push(n)}this.add(this.listTargetFrame)}},n.updateTargetItems=function(){var e=this.scene.layoutManager.objects.header.collectItems.getTargetKeys();if(e&&0!==e.length)for(var t=0;t<3;t++){var n=this.listTargetFrame[t];n.setWorldSize(30,30),n.setFrame(e[t]||e[0]),n.setVisible(!1).setAlpha(0)}},n.createAnimTargetItems=function(){var e=[100,500,700],t=[-120,0,120],n=[-100,-150,-100],i=[.7,1,.7];if(this.scene.targetMissionManager.getTargetType()!=OT)for(var a=0;a<3;a++){this.listTargetFrame[a].setAlpha(0).setVisible(!0);var s=this.scene.add.tween({targets:this.listTargetFrame[a],delay:e[a],x:{from:0,to:t[a]},y:{from:300,to:n[a]},alpha:{from:0,to:1},scale:{from:0,to:i[a]},rotation:{from:-180,to:0},duration:500});this.listAnim.push(s)}},n.playAnimTargetItems=function(){if(this.scene.targetMissionManager.getTargetType()!=OT)for(var e=0;e<3;e++){this.listTargetFrame[e].setAlpha(0).setVisible(!0),this.listAnim[e].play()}},n.runPopupEntrancesAnimation=function(e,t){var n=this;this.listTargetFrame.forEach((function(e){e.setAlpha(0)})),this.textWellDone.restart(),this.tweenBackground||(this.tweenBackground=this.scene.tweens.addCounter({paused:!0,from:0,to:.6,delay:e,duration:t,onUpdate:function(e){var t=e.getValue();n.background.setAlpha(t)},onComplete:function(){n.textWellDone.start(),0===n.listTargetFrame.length?(n.createTargetItems(),n.createAnimTargetItems()):(n.updateTargetItems(),n.playAnimTargetItems()),n.handleDelegate(),n.runAnim()}})),this.background.setAlpha(0),this.tweenBackground.play()},t}(GameCore.Screen),ZI=Wa.Z.DEFAULT,YI=ZI.KEY,VI=ZI.FRAME,WI=function(e){function t(t,n,i,a){var s;return(s=e.call(this,t,n,i,a)||this).scene=void 0,s.popup=void 0,s.title=void 0,s.buttonBack=void 0,s.buttonContinue=void 0,s.contents=void 0,s.textLevel=void 0,s.textLevel2=void 0,s.textNextLevel=void 0,s.textLevelComplete=void 0,s.textLevelComplete2=void 0,s.backgroundContent=void 0,s.listTargets=[],s.popupShowUpAnimation=void 0,s.popupFadeOutAnimation=void 0,s.contentShowUpAnimation=void 0,s.popupFadeInMaskAnimation=void 0,s.popupFadeOutMaskAnimation=void 0,s.buttonClose=void 0,s.checkFinishAllLevel=function(){var e=s.scene.storage.getState();return ol(e)>=vf.length},s.scene=t,s.createPopup(),s.createContentBackground(),s.createTitle(),s.createTexts(),s.createButtons(),s.setDepth(za.Ks.POPUP),s.background.setAlpha(.5),s}(0,o.Z)(t,e);var n=t.prototype;return n.open=function(){e.prototype.open.call(this),this.updateInfo(),this.runOpenAnimation()},n.updateInfo=function(){var e=this.scene.levelManager.getLevel();this.textLevel.setText(this.scene.lang.Text.Level+" "+e),this.textLevel2.setText(this.scene.lang.Text.Level+" "+e),"ar"==this.scene.facebook.getLocale()&&(this.textLevel2.setVisible(!0),this.textLevel.setVisible(!1))},n.createPopup=function(){this.popup=new as.Z(this.scene,0,0,310,300),this.add(this.popup),Phaser.Display.Align.In.Center(this.popup,this.zone)},n.createContentBackground=function(){this.backgroundContent=this.scene.make.image({key:YI,frame:VI.POPUP_CONTENT_BACKGROUND}),this.backgroundContent.setWorldSize(280,200),this.popup.add(this.backgroundContent),Phaser.Display.Align.In.TopCenter(this.backgroundContent,this.popup,0,-55)},n.createTitle=function(){this.title=this.scene.add.container();var e=this.scene.world.getPixelRatio(),t=this.scene.make.image({key:YI,frame:VI.TEXT_CONGRATULATION});t.setWorldSize(t.width/e,t.height/e),this.buttonClose=new ja.Z(this.scene,YI,VI.BUTTON_CLOSE,35,35),this.buttonClose.setName("Close"),this.buttonClose.onClick=this.clickButtonClose.bind(this),this.title.add([t,this.buttonClose]),this.popup.add(this.title),Phaser.Display.Align.In.Center(t,this.title,0,11),Phaser.Display.Align.In.Center(this.buttonClose,this.title,150,-15),Phaser.Display.Align.In.TopCenter(this.title,this.popup)},n.clickButtonClose=function(){var e=this;this.runCloseAnimation();var t=this.scene.layoutManager.objects.header;this.scene.time.delayedCall(300,(function(){t.progressBar.reset(),e.scene.clearFen(),e.scene.scene.switch(Pa.Co.LEVEL_SCENE)}))},n.createTexts=function(){this.createTextLevel(),this.createTextLevel2(),this.createTextLevelComplete(),"ar"==this.scene.facebook.getLocale()&&(this.createTextLevelComplete2(),this.textLevelComplete.setVisible(!1))},n.createTextLevel=function(){this.textLevel=this.scene.make.bitmapText({font:Xa.Z.PRIMARY.KEY,size:this.scene.fontSize(50),text:this.scene.lang.Text.Level+" 1",origin:{x:.5,y:.5}}),this.popup.add(this.textLevel),Phaser.Display.Align.In.Center(this.textLevel,this.popup,0,-60)},n.createTextLevel2=function(){this.textLevel2=this.scene.make.text({text:this.scene.lang.Text.Level+" 1",style:{fontFamily:Xa.Z.FONT_FAMILY,fontSize:this.scene.fontSize(40)+"px"},origin:{x:.5,y:.5}}),this.textLevel2.setTint(7551258).setHighQuality(),this.textLevel2.setVisible(!1),this.popup.add(this.textLevel2),Phaser.Display.Align.In.Center(this.textLevel2,this.popup,0,-23)},n.createTextLevelComplete=function(){this.textLevelComplete=this.scene.make.bitmapText({font:Xa.Z.PRIMARY.KEY,size:this.scene.fontSize(60),text:this.scene.lang.Text.COMPLETED,origin:{x:.5,y:.5}}),this.popup.add(this.textLevelComplete),Phaser.Display.Align.In.Center(this.textLevelComplete,this.popup,0,-20)},n.createTextLevelComplete2=function(){this.textLevelComplete2=this.scene.make.text({text:this.scene.lang.Text.Completed,style:{fontFamily:Xa.Z.FONT_FAMILY,fontSize:this.scene.fontSize(44)+"px"},origin:{x:.5,y:.5}}),this.textLevelComplete2.setTint(7551258).setHighQuality(),this.popup.add(this.textLevelComplete2),Phaser.Display.Align.In.Center(this.textLevelComplete2,this.popup,0,3)},n.createTargetItems=function(){var e=this.scene.layoutManager.objects.header.collectItems.getTargetKeys();if(e&&0!==e.length){for(var t=this.calcPosition(e.length),n=0;n<e.length;n++){var i=this.scene.make.image({key:Wa.Z.GAMEPLAY.KEY});i.setWorldSize(50,50),i.setFrame(e[n]||e[0]),i.setX(t[n]),this.listTargets.push(i)}this.popup.add(this.listTargets)}},n.updateTargetItems=function(){var e=this.scene.layoutManager.objects.header.collectItems.getTargetKeys();if(e&&0!==e.length){this.popup.remove(this.listTargets);for(var t=this.calcPosition(e.length),n=0;n<e.length;n++){var i=this.listTargets[n];i||(i=this.scene.make.image({key:Wa.Z.GAMEPLAY.KEY}),this.listTargets.push(i)),i.setWorldSize(50,50),i.setFrame(e[n]||e[0]),i.setX(t[n])}this.popup.add(this.listTargets)}},n.calcPosition=function(e){for(var t=[],n=310/(e+1),i=n*(e-1)/2,a=0;a<e;a++)t.push(n*a-i);return t},n.createButtons=function(){this.createButtonBack(),this.createButtonContinue()},n.createButtonBack=function(){var e=this.scene.make.image({key:YI,frame:VI.ICON_BACK});e.setWorldSize(30,30),this.buttonBack=new ja.Z(this.scene,YI,VI.BUTTON_MINOR,70,54),this.buttonBack.setName("Back"),this.buttonBack.add(e),this.popup.add(this.buttonBack),this.buttonBack.onClick=this.clickButtonBack.bind(this),Phaser.Display.Align.In.Center(this.buttonBack,this.popup,-88,55)},n.clickButtonBack=function(){var e=this;this.runCloseAnimation();var t=this.scene.layoutManager.objects.header;this.scene.time.delayedCall(300,(function(){t.progressBar.reset(),e.scene.clearFen(),e.scene.scene.switch(Pa.Co.LEVEL_SCENE)}))},n.createButtonContinue=function(){var e=this.scene.world.getPixelRatio();this.textNextLevel=this.scene.make.image({key:YI,frame:VI.TEXT_NEXT_LEVEL}),this.checkFinishAllLevel()&&this.textNextLevel.setFrame(VI.TEXT_START_OVER),this.textNextLevel.setWorldSize(this.textNextLevel.width/e,this.textNextLevel.height/e),this.buttonContinue=new ja.Z(this.scene,YI,VI.BUTTON_GREEN,172,54),this.buttonContinue.setName("Continue"),this.buttonContinue.add(this.textNextLevel),this.popup.add(this.buttonContinue),this.buttonContinue.onClick=this.clickButtonContinue.bind(this),Phaser.Display.Align.In.Center(this.buttonContinue,this.popup,37,55)},n.clickButtonContinue=function(){var e=this,t=this.scene.storage.getState();if(Sf(t)<1)return this.setVisible(!1),void this.scene.screen.open(za.o4.CLAIM_HEART_SCREEN);ol(t)>=vf.length-1?this.scene.handleClickStartOver():(this.runCloseAnimation(),this.scene.time.delayedCall(300,(function(){e.scene.clearFen(),e.scene.startGame()})))},n.runOpenAnimation=function(){var e;null!=(e=this.popupShowUpAnimation)&&null!=(e=e.tween)&&e.isPlaying()||(this.scene.audio.playSound(Ka.Z.POPUP_SHOW),this.runPopupEntrancesAnimation(0,300),this.runFadeInMaskAnimation(100,300))},n.runCloseAnimation=function(){var e;null!=(e=this.popupFadeOutAnimation)&&null!=(e=e.tween)&&e.isPlaying()||(this.runPopupExitsAnimation(50,200),this.runFadeOutMaskAnimation(0,200))},n.runPopupEntrancesAnimation=function(e,t){if(!this.popupShowUpAnimation){var n=this.popup.scale;this.popupShowUpAnimation=new is.Z({targets:[this.popup],delay:e,duration:t,props:{y:0,alpha:{start:1,from:1,to:1},scale:{start:0,from:0,to:n}}})}this.popupShowUpAnimation.play()},n.runPopupContentEntrancesAnimation=function(e,t){var n;null==(n=this.contentShowUpAnimation)||n.remove(),this.contentShowUpAnimation=new ns.Z({targets:this.contents.getChildren(),duration:t,delay:e,props:{alpha:{start:0,from:0,to:1}}}),this.contentShowUpAnimation.play()},n.runPopupExitsAnimation=function(e,t){var n=this;this.popupFadeOutAnimation||(this.popupFadeOutAnimation=new ts.Z({targets:[this.popup],delay:e,duration:t,props:{scale:0},onComplete:function(){n.popup.setY(0),n.scene.screen.close(n.name)}})),this.popupFadeOutAnimation.play()},n.runFadeInMaskAnimation=function(e,t){if(!this.popupFadeInMaskAnimation){var n=this.background.alpha;this.popupFadeInMaskAnimation=new Eo.Z({targets:[this.background],delay:e,duration:t,props:{alpha:{start:0,from:0,to:n}}})}this.popupFadeInMaskAnimation.play()},n.runFadeOutMaskAnimation=function(e,t){if(!this.popupFadeOutMaskAnimation){var n=this.background.alpha;this.popupFadeOutMaskAnimation=new ts.Z({targets:[this.background],delay:e,duration:t,props:{alpha:{start:n,from:n,to:0}}})}this.popupFadeOutMaskAnimation.play()},t}(GameCore.Screen),zI=Wa.Z.DEFAULT,KI=zI.KEY,jI=zI.FRAME,XI=function(e){function t(t,n,i,a){var s;return(s=e.call(this,t,n,i,a)||this).scene=void 0,s.popup=void 0,s.title=void 0,s.buttonBack=void 0,s.buttonContinue=void 0,s.contents=void 0,s.textLevel=void 0,s.textLevel2=void 0,s.textLevelComplete=void 0,s.textLevelComplete2=void 0,s.backgroundContent=void 0,s.textNextLevel=void 0,s.livesTimer=void 0,s.listTargets=[],s.popupShowUpAnimation=void 0,s.popupFadeOutAnimation=void 0,s.contentShowUpAnimation=void 0,s.popupFadeInMaskAnimation=void 0,s.popupFadeOutMaskAnimation=void 0,s.buttonClose=void 0,s.scene=t,s.createPopup(),s.createContentBackground(),s.createTitle(),s.createTexts(),s.createButtons(),s.createLivesTimer(),s.setDepth(za.Ks.POPUP),s.background.setAlpha(.5),s}(0,o.Z)(t,e);var n=t.prototype;return n.open=function(){e.prototype.open.call(this),this.updateInfo(),this.runOpenAnimation()},n.updateInfo=function(){var e=this.scene.levelManager.getLevel();e<vf.length-1&&(e-=1),e>vf.length-1&&(e=vf.length-1),this.textLevel.setText(this.scene.lang.Text.Level+" "+e),this.textLevel2.setText(this.scene.lang.Text.Level+" "+e),"ar"==this.scene.facebook.getLocale()&&(this.textLevel2.setVisible(!0),this.textLevel.setVisible(!1)),this.updateTextNextLevel()},n.updateTextNextLevel=function(){var e=this.scene.levelManager.getLevel(),t=this.scene.world.getPixelRatio();if(e>vf.length-1)return this.textNextLevel.setFrame(jI.TEXT_START_OVER),void this.textNextLevel.setWorldSize(this.textNextLevel.width/t,this.textNextLevel.height/t);this.textNextLevel.setFrame(jI.TEXT_NEXT_LEVEL),this.textNextLevel.setWorldSize(this.textNextLevel.width/t,this.textNextLevel.height/t)},n.createPopup=function(){this.popup=new as.Z(this.scene,0,0,290,234),this.add(this.popup),Phaser.Display.Align.In.Center(this.popup,this.zone,0,-20)},n.createContentBackground=function(){this.backgroundContent=this.scene.make.image({key:KI,frame:jI.POPUP_CONTENT_BACKGROUND}),this.backgroundContent.setWorldSize(260,147),this.popup.add(this.backgroundContent),Phaser.Display.Align.In.TopCenter(this.backgroundContent,this.popup,0,-66)},n.createTitle=function(){this.title=this.scene.add.container();var e=this.scene.world.getPixelRatio(),t=this.scene.make.image({key:KI,frame:jI.TEXT_CONGRATULATION});t.setWorldSize(t.width/e,t.height/e),this.buttonClose=new ja.Z(this.scene,KI,jI.BUTTON_CLOSE,35,35),this.buttonClose.setName("Close"),this.buttonClose.onClick=this.clickButtonClose.bind(this),this.title.add([t,this.buttonClose]),this.popup.add(this.title),Phaser.Display.Align.In.Center(t,this.title,0,30),Phaser.Display.Align.In.Center(this.buttonClose,this.title,135,5),Phaser.Display.Align.In.TopCenter(this.title,this.popup)},n.createTexts=function(){this.createTextLevel(),this.createTextLevel2(),this.createTextLevelComplete(),"ar"==this.scene.facebook.getLocale()&&(this.createTextLevelComplete2(),this.textLevelComplete.setVisible(!1))},n.createTextLevel=function(){this.textLevel=this.scene.make.bitmapText({font:Xa.Z.PRIMARY.KEY,size:this.scene.fontSize(40),text:this.scene.lang.Text.Level+" 1",origin:{x:.5,y:.5}}),this.popup.add(this.textLevel),Phaser.Display.Align.In.Center(this.textLevel,this.popup,0,-23)},n.createTextLevel2=function(){this.textLevel2=this.scene.make.text({text:this.scene.lang.Text.Level+" 1",style:{fontFamily:Xa.Z.FONT_FAMILY,fontSize:this.scene.fontSize(40)+"px"},origin:{x:.5,y:.5}}),this.textLevel2.setTint(7551258).setHighQuality(),this.textLevel2.setVisible(!1),this.popup.add(this.textLevel2),Phaser.Display.Align.In.Center(this.textLevel2,this.popup,0,-23)},n.createTextLevelComplete=function(){this.textLevelComplete=this.scene.make.bitmapText({font:Xa.Z.PRIMARY.KEY,size:this.scene.fontSize(44),text:this.scene.lang.Text.Completed,origin:{x:.5,y:.5}}),this.popup.add(this.textLevelComplete),Phaser.Display.Align.In.Center(this.textLevelComplete,this.popup,0,3)},n.createTextLevelComplete2=function(){this.textLevelComplete2=this.scene.make.text({text:this.scene.lang.Text.Completed,style:{fontFamily:Xa.Z.FONT_FAMILY,fontSize:this.scene.fontSize(44)+"px"},origin:{x:.5,y:.5}}),this.textLevelComplete2.setTint(7551258).setHighQuality(),this.popup.add(this.textLevelComplete2),Phaser.Display.Align.In.Center(this.textLevelComplete2,this.popup,0,3)},n.createTargetItems=function(){var e=this.scene.layoutManager.objects.header.collectItems.getTargetKeys();if(e&&0!==e.length){for(var t=this.calcPosition(e.length),n=0;n<e.length;n++){var i=this.scene.make.image({key:Wa.Z.GAMEPLAY.KEY});i.setWorldSize(50,50),i.setFrame(e[n]||e[0]),i.setX(t[n]),this.listTargets.push(i)}this.popup.add(this.listTargets)}},n.clickButtonClose=function(){var e=this;this.runCloseAnimation();var t=this.scene.layoutManager.objects.header;this.scene.time.delayedCall(300,(function(){t.progressBar.reset(),e.scene.clearFen(),e.scene.scene.switch(Pa.Co.LEVEL_SCENE)}))},n.updateTargetItems=function(){var e=this.scene.layoutManager.objects.header.collectItems.getTargetKeys();if(e&&0!==e.length){this.popup.remove(this.listTargets);for(var t=this.calcPosition(e.length),n=0;n<e.length;n++){var i=this.listTargets[n];i||(i=this.scene.make.image({key:Wa.Z.GAMEPLAY.KEY}),this.listTargets.push(i)),i.setWorldSize(50,50),i.setFrame(e[n]||e[0]),i.setX(t[n])}this.popup.add(this.listTargets)}},n.calcPosition=function(e){for(var t=[],n=310/(e+1),i=n*(e-1)/2,a=0;a<e;a++)t.push(n*a-i);return t},n.createButtons=function(){this.createButtonBack(),this.createButtonContinue()},n.createButtonBack=function(){var e=this.scene.make.image({key:KI,frame:jI.ICON_BACK});e.setWorldSize(30,30),this.buttonBack=new ja.Z(this.scene,KI,jI.BUTTON_MINOR,62,54),this.buttonBack.setName("Back"),this.buttonBack.add(e),this.popup.add(this.buttonBack),this.buttonBack.onClick=this.clickButtonBack.bind(this),Phaser.Display.Align.In.Center(this.buttonBack,this.popup,-90,52)},n.clickButtonBack=function(){var e=this;this.runCloseAnimation();var t=this.scene.layoutManager.objects.header;this.scene.time.delayedCall(300,(function(){t.progressBar.reset(),e.scene.clearFen(),e.scene.scene.switch(Pa.Co.LEVEL_SCENE)}))},n.createButtonContinue=function(){var e=this.scene.world.getPixelRatio();this.textNextLevel=this.scene.make.image({key:KI,frame:jI.TEXT_NEXT_LEVEL}),this.textNextLevel.setWorldSize(this.textNextLevel.width/e,this.textNextLevel.height/e),this.buttonContinue=new ja.Z(this.scene,KI,jI.BUTTON_GREEN,178,54),this.buttonContinue.setName("Continue"),this.buttonContinue.add(this.textNextLevel),this.popup.add(this.buttonContinue),this.buttonContinue.onClick=this.clickButtonContinue.bind(this),Phaser.Display.Align.In.Center(this.buttonContinue,this.popup,33,52)},n.clickButtonContinue=function(){var e=this,t=this.scene.storage.getState();if(Sf(t)<1)return this.runCloseAnimation(),void this.scene.screen.open(za.o4.CLAIM_HEART_SCREEN,{onClose:function(){e.scene.screen.open(za.o4.MISSION_COLLECTION_COMPLETE_SCREEN)}});if(ol(t)>=vf.length-1)this.scene.handleClickStartOver();else{this.runCloseAnimation();var n=this.scene.layoutManager.objects,i=n.header,a=n.main;this.scene.time.delayedCall(300,(function(){e.scene.analytics.levelStart(e.scene.levelManager.getLevel(),void 0,e.scene.getLevelName());var t=a.board.fadeOut();t?t.on("complete",(function(){i.progressBar.reset(),e.scene.clearFen(),e.scene.startGame()})):(i.progressBar.reset(),e.scene.clearFen(),e.scene.startGame())}))}},n.createLivesTimer=function(){this.livesTimer=new uy(this.scene),this.livesTimer.startIntervalTimer(),this.livesTimer.setFrameLivesTimeBlock2(),this.add(this.livesTimer),Phaser.Display.Align.In.Center(this.livesTimer,this,0,-200)},n.runOpenAnimation=function(){var e;null!=(e=this.popupShowUpAnimation)&&null!=(e=e.tween)&&e.isPlaying()||(this.scene.audio.playSound(Ka.Z.POPUP_SHOW),this.runPopupEntrancesAnimation(0,300),this.runFadeInMaskAnimation(100,300))},n.runCloseAnimation=function(){var e;null!=(e=this.popupFadeOutAnimation)&&null!=(e=e.tween)&&e.isPlaying()||(this.runPopupExitsAnimation(50,200),this.runFadeOutMaskAnimation(0,200))},n.runPopupEntrancesAnimation=function(e,t){if(!this.popupShowUpAnimation){var n=this.popup.scale;this.popupShowUpAnimation=new is.Z({targets:[this.popup],delay:e,duration:t,props:{y:0,alpha:{start:1,from:1,to:1},scale:{start:0,from:0,to:n}}})}this.popupShowUpAnimation.play()},n.runPopupContentEntrancesAnimation=function(e,t){var n;null==(n=this.contentShowUpAnimation)||n.remove(),this.contentShowUpAnimation=new ns.Z({targets:this.contents.getChildren(),duration:t,delay:e,props:{alpha:{start:0,from:0,to:1}}}),this.contentShowUpAnimation.play()},n.runPopupExitsAnimation=function(e,t){var n=this;this.popupFadeOutAnimation||(this.popupFadeOutAnimation=new ts.Z({targets:[this.popup],delay:e,duration:t,props:{scale:0},onComplete:function(){n.popup.setY(0),n.scene.screen.close(n.name)}})),this.popupFadeOutAnimation.play()},n.runFadeInMaskAnimation=function(e,t){if(!this.popupFadeInMaskAnimation){var n=this.background.alpha;this.popupFadeInMaskAnimation=new Eo.Z({targets:[this.background],delay:e,duration:t,props:{alpha:{start:0,from:0,to:n}}})}this.popupFadeInMaskAnimation.play()},n.runFadeOutMaskAnimation=function(e,t){if(!this.popupFadeOutMaskAnimation){var n=this.background.alpha;this.popupFadeOutMaskAnimation=new ts.Z({targets:[this.background],delay:e,duration:t,props:{alpha:{start:n,from:n,to:0}}})}this.popupFadeOutMaskAnimation.play()},t}(GameCore.Screen),JI=Wa.Z.GAMEPLAY,qI=(JI.KEY,JI.FRAME,function(e){function t(t,n,i,a){var s;return(s=e.call(this,t,n,i,a)||this).scene=void 0,s.textNoSpaceLeft=void 0,s.closeTimerEvent=void 0,s.tweenBackground=void 0,s.open=function(t){e.prototype.open.call((0,Ba.Z)(s),t),s.runPopupEntrancesAnimation(300,300),s.handleDelegate()},s.close=function(){e.prototype.close.call((0,Ba.Z)(s))},s.scene=t,s.setDepth(za.Ks.POPUP),s.background.setAlpha(0),s.createContent(),s}(0,o.Z)(t,e);var n=t.prototype;return n.handleDelegate=function(){var e,t=this,n=this.getData(["duration","onClose"]),i=n[0],a=void 0===i?0:i,s=n[1];null==(e=this.closeTimerEvent)||e.remove(),a>0&&(this.closeTimerEvent=this.scene.time.addEvent({delay:a,callback:function(){t.textNoSpaceLeft.setVisible(!1),t.textNoSpaceLeft.restart(),t.visible&&t.scene.screen.close(t.name),s&&s()}}))},n.runAnim=function(){this.textNoSpaceLeft.setVisible(!0),this.textNoSpaceLeft.start(300)},n.createContent=function(){this.createText()},n.createText=function(){var e=this.scene.facebook.getLocale();this.textNoSpaceLeft="ar"==e?new sE(this.scene,{text:this.scene.lang.Text.NO_SPACE_LEFT,font:Xa.Z.PRIMARY_LIGHT.KEY,size:this.scene.fontSize(180)}):new aE(this.scene,{text:this.scene.lang.Text.NO_SPACE_LEFT,font:Xa.Z.PRIMARY_LIGHT.KEY,size:this.scene.fontSize(76)}),this.add(this.textNoSpaceLeft),Phaser.Display.Align.In.Center(this.textNoSpaceLeft,this)},n.runPopupEntrancesAnimation=function(e,t){var n=this;this.tweenBackground||(this.tweenBackground=this.scene.tweens.addCounter({paused:!0,from:0,to:.6,delay:e,duration:t,onUpdate:function(e){var t=e.getValue();n.background.setAlpha(t)},onComplete:function(){n.runAnim()}})),this.tweenBackground.play()},t}(GameCore.Screen)),QI=Wa.Z.DEFAULT,$I=QI.KEY,eC=QI.FRAME,tC=function(e){function t(t){var n;return(n=e.call(this,t,$I,eC.BUTTON_GREEN)||this).icon=void 0,n.text=void 0,n.button.setWorldSize(178,54),n.setName("Retry"),n.createIcon(),n.createText(),n.alignItem(),n}(0,o.Z)(t,e);var n=t.prototype;return n.createIcon=function(){this.icon=this.scene.make.image({key:$I,frame:eC.ICON_RETRY}),this.icon.setWorldSize(33,35),this.add(this.icon)},n.createText=function(){var e=this.scene.world.getPixelRatio();this.text=this.scene.make.image({key:$I,frame:eC.TEXT_RETRY});var t=this.text,n=t.width,i=t.height;this.text.setWorldSize(n/e,i/e),this.add(this.text)},n.alignItem=function(){var e=this.width,t=this.icon.width,n=this.text.width,i=e/2,a=(e-10-t-n)/2+t/2,s=a+10+t/2+n/2;Phaser.Display.Align.In.Center(this.icon,this,a-i,-2),Phaser.Display.Align.In.Center(this.text,this,s-i,-2)},t}(ja.Z),nC=tC,iC=Wa.Z.DEFAULT,aC=iC.KEY,sC=iC.FRAME,rC=function(e){function t(t,n,i,a){var s;return(s=e.call(this,t,n,i,a)||this).scene=void 0,s.popup=void 0,s.title=void 0,s.buttonBack=void 0,s.buttonRetry=void 0,s.contents=void 0,s.backgroundContent=void 0,s.textLevelFail=void 0,s.buttonClose=void 0,s.livesTimer=void 0,s.popupShowUpAnimation=void 0,s.popupFadeOutAnimation=void 0,s.contentShowUpAnimation=void 0,s.popupFadeInMaskAnimation=void 0,s.popupFadeOutMaskAnimation=void 0,s.scene=t,s.createPopup(),s.createContentBackground(),s.createTitle(),s.createTexts(),s.createButtons(),s.createLivesTimer(),s.setDepth(za.Ks.POPUP),s.background.setAlpha(.5),s}(0,o.Z)(t,e);var n=t.prototype;return n.open=function(){e.prototype.open.call(this),this.scene.enableInput(),this.runOpenAnimation()},n.createPopup=function(){this.popup=new as.Z(this.scene,0,0,290,234),this.add(this.popup),this.popup.setFrameTop(sC.POPUP_TOP_DARK),Phaser.Display.Align.In.Center(this.popup,this.zone,0,-20)},n.createContentBackground=function(){this.backgroundContent=this.scene.make.image({key:aC,frame:sC.POPUP_CONTENT_BACKGROUND}),this.backgroundContent.setWorldSize(260,147),this.popup.add(this.backgroundContent),Phaser.Display.Align.In.TopCenter(this.backgroundContent,this.popup,0,-66)},n.createTitle=function(){this.title=this.scene.add.container();var e=this.scene.world.getPixelRatio(),t=this.scene.make.image({key:aC,frame:sC.TEXT_LOSE});t.setWorldSize(t.width/e,t.height/e),this.buttonClose=new ja.Z(this.scene,aC,sC.BUTTON_CLOSE,35,35),this.buttonClose.setName("Close"),this.buttonClose.onClick=this.clickButtonClose.bind(this),this.title.add([t,this.buttonClose]),this.popup.add(this.title),Phaser.Display.Align.In.Center(t,this.title,0,30),Phaser.Display.Align.In.Center(this.buttonClose,this.title,135,5),Phaser.Display.Align.In.TopCenter(this.title,this.popup)},n.createTexts=function(){this.createTextLevelFail()},n.createTextLevelFail=function(){var e=this.scene.world.getPixelRatio();this.textLevelFail=this.scene.make.image({key:aC,frame:sC.TEXT_LEVEL_FAIL}),this.textLevelFail.setWorldSize(this.textLevelFail.width/e,this.textLevelFail.height/e),this.popup.add(this.textLevelFail),Phaser.Display.Align.In.Center(this.textLevelFail,this.popup,0,-10)},n.createButtons=function(){this.createButtonBack(),this.createButtonRetry()},n.createButtonBack=function(){var e=this.scene.make.image({key:aC,frame:sC.ICON_BACK});e.setWorldSize(30,30),this.buttonBack=new ja.Z(this.scene,aC,sC.BUTTON_MINOR,62,54),this.buttonBack.setName("Back"),this.buttonBack.add(e),this.popup.add(this.buttonBack),this.buttonBack.onClick=this.clickButtonBack.bind(this),Phaser.Display.Align.In.Center(this.buttonBack,this.popup,-90,52)},n.clickButtonBack=function(){var e=this;this.runCloseAnimation(),this.scene.time.delayedCall(300,(function(){e.scene.clearFen(),e.scene.scene.switch(Pa.Co.LEVEL_SCENE)}))},n.createButtonRetry=function(){this.buttonRetry=new nC(this.scene),this.popup.add(this.buttonRetry),this.buttonRetry.onClick=this.clickButtonRetry.bind(this),Phaser.Display.Align.In.Center(this.buttonRetry,this.popup,33,52)},n.clickButtonClose=function(){var e=this;this.runCloseAnimation(),this.scene.time.delayedCall(300,(function(){e.scene.clearFen(),e.scene.scene.switch(Pa.Co.LEVEL_SCENE)}))},n.clickButtonRetry=function(){var e=this,t=this.scene.storage.getState();Sf(t)<1?this.scene.screen.open(za.o4.CLAIM_HEART_SCREEN,{currentScreen:this}):(this.runCloseAnimation(),this.scene.time.delayedCall(300,(function(){e.scene.handleRetryLevel()})))},n.createLivesTimer=function(){this.livesTimer=new uy(this.scene),this.livesTimer.startIntervalTimer(),this.livesTimer.setFrameLivesTimeBlock2(),this.add(this.livesTimer),Phaser.Display.Align.In.Center(this.livesTimer,this,0,-200)},n.runOpenAnimation=function(){var e;null!=(e=this.popupShowUpAnimation)&&null!=(e=e.tween)&&e.isPlaying()||(this.scene.audio.playSound(Ka.Z.POPUP_SHOW),this.livesTimer.startIntervalTimer(),this.runPopupEntrancesAnimation(0,300),this.runFadeInMaskAnimation(100,300))},n.runCloseAnimation=function(){var e;null!=(e=this.popupFadeOutAnimation)&&null!=(e=e.tween)&&e.isPlaying()||(this.livesTimer.stopIntervalTimer(),this.runPopupExitsAnimation(50,200),this.runFadeOutMaskAnimation(0,200))},n.runPopupEntrancesAnimation=function(e,t){if(!this.popupShowUpAnimation){var n=this.popup.scale;this.popupShowUpAnimation=new is.Z({targets:[this.popup],delay:e,duration:t,props:{y:0,alpha:{start:1,from:1,to:1},scale:{start:0,from:0,to:n}}})}this.popupShowUpAnimation.play()},n.runPopupContentEntrancesAnimation=function(e,t){var n;null==(n=this.contentShowUpAnimation)||n.remove(),this.contentShowUpAnimation=new ns.Z({targets:this.contents.getChildren(),duration:t,delay:e,props:{alpha:{start:0,from:0,to:1}}}),this.contentShowUpAnimation.play()},n.runPopupExitsAnimation=function(e,t){var n=this;this.popupFadeOutAnimation||(this.popupFadeOutAnimation=new ts.Z({targets:[this.popup],delay:e,duration:t,props:{scale:0},onComplete:function(){n.popup.setY(0),n.scene.screen.close(n.name)}})),this.popupFadeOutAnimation.play()},n.runFadeInMaskAnimation=function(e,t){if(!this.popupFadeInMaskAnimation){var n=this.background.alpha;this.popupFadeInMaskAnimation=new Eo.Z({targets:[this.background],delay:e,duration:t,props:{alpha:{start:0,from:0,to:n}}})}this.popupFadeInMaskAnimation.play()},n.runFadeOutMaskAnimation=function(e,t){if(!this.popupFadeOutMaskAnimation){var n=this.background.alpha;this.popupFadeOutMaskAnimation=new ts.Z({targets:[this.background],delay:e,duration:t,props:{alpha:{start:n,from:n,to:0}}})}this.popupFadeOutMaskAnimation.play()},t}(GameCore.Screen),oC=Wa.Z.DEFAULT,cC=oC.KEY,lC=oC.FRAME,hC=function(e){function t(t){var n;return(n=e.call(this,t,cC,lC.BUTTON_MINOR)||this).button.setWorldSize(64,55),n.setName("Home"),n.createIcon(),n}return(0,o.Z)(t,e),t.prototype.createIcon=function(){var e=this.scene.make.image({key:cC,frame:lC.ICON_HOME});e.setWorldSize(31,28),this.add(e),Phaser.Display.Align.In.Center(e,this,0,-2)},t}(ja.Z),uC=hC,dC=Wa.Z.DEFAULT,pC=dC.KEY,gC=dC.FRAME,fC=function(e){function t(t){var n;return(n=e.call(this,t,pC,gC.BUTTON_MINOR)||this).button.setWorldSize(64,55),n.setName("Journey"),n.createIcon(),n}return(0,o.Z)(t,e),t.prototype.createIcon=function(){var e=this.scene.make.image({key:pC,frame:gC.ICON_JOURNEY_2});e.setWorldSize(35,28),this.add(e),Phaser.Display.Align.In.Center(e,this,-.25,-1.5)},t}(ja.Z),mC=fC,vC=Wa.Z.DEFAULT,EC=vC.KEY,SC=vC.FRAME,AC=function(e){function t(t){var n;return(n=e.call(this,t,EC,SC.BUTTON_DARK_BLUE)||this).button.setWorldSize(246,53),n.setName("PlayWithFriends"),n.createIcon(),n.createText(),n}(0,o.Z)(t,e);var n=t.prototype;return n.createIcon=function(){var e=this.scene.make.image({key:EC,frame:SC.ICON_SWORD_BLUE});e.setWorldSize(31,25),this.add(e),Phaser.Display.Align.In.Center(e,this,-60)},n.createText=function(){var e=this.scene.make.image({key:EC,frame:SC.TEXT_PLAY_WITH_BLUE});e.setWorldSize(102,16),this.add(e),Phaser.Display.Align.In.Center(e,this,20)},t}(ja.Z),yC=AC,TC=Wa.Z.DEFAULT,IC=TC.KEY,CC=TC.FRAME,bC=function(e){function t(t){var n;return(n=e.call(this,t,IC,CC.BUTTON_BROWN)||this).icon=void 0,n.text=void 0,n.button.setWorldSize(246,53),n.setName("Replay"),n.createIcon(),n.createText(),n.alignItems(),n}(0,o.Z)(t,e);var n=t.prototype;return n.createIcon=function(){this.icon=this.scene.make.image({key:IC,frame:CC.ICON_REPLAY}),this.icon.setWorldSize(26,31),this.add(this.icon)},n.createText=function(){var e=this.scene.world.getPixelRatio();this.text=this.scene.make.image({key:IC,frame:CC.TEXT_REPLAY});var t=this.text,n=t.width,i=t.height;this.text.setWorldSize(n/e,i/e),this.add(this.text)},n.alignItems=function(){var e=this.icon.width/2+this.text.width/2;Phaser.Display.Align.In.Center(this.icon,this,-e+this.icon.width/2-5,-2),Phaser.Display.Align.In.Center(this.text,this,e-this.text.width/2+5,-1)},t}(ja.Z),OC=bC,PC=Wa.Z.DEFAULT,RC=PC.KEY,wC=PC.FRAME,xC=function(e){function t(t,n,i,a){var s;return(s=e.call(this,t,n,i,a)||this).scene=void 0,s.popup=void 0,s.title=void 0,s.buttonClose=void 0,s.contents=void 0,s.backgroundContent=void 0,s.settingMusic=void 0,s.settingSound=void 0,s.settingVibrate=void 0,s.settingSoundContainer=void 0,s.settingMusicContainer=void 0,s.settingVibrateContainer=void 0,s.popupShowUpAnimation=void 0,s.popupFadeOutAnimation=void 0,s.contentShowUpAnimation=void 0,s.popupFadeInMaskAnimation=void 0,s.popupFadeOutMaskAnimation=void 0,s.buttonReplay=void 0,s.buttonPlayWithFriend=void 0,s.buttonHome=void 0,s.buttonJourney=void 0,s.debuggerCurrentLevelText=void 0,s.debuggerCurrentLevel=0,s.handleClose=function(){s.runCloseAnimation()},s.handleMusicSetting=function(e){s.scene.player.setSetting("music",e),e?s.scene.audio.playMusic():s.scene.audio.pauseMusic()},s.handleSoundSetting=function(e){s.scene.player.setSetting("sound",e)},s.handleVibrateSetting=function(e){e&&Zp(199),s.scene.player.setSetting("vibrate",e)},s.clickReplay=function(){var e=s.scene.storage.getState();if(Sf(e)<1)return s.setVisible(!1),void s.scene.screen.open(za.o4.CLAIM_HEART_SCREEN);s.runCloseAnimation(),s.popupFadeOutAnimation.next((0,r.Z)(l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:s.scene.screen.close(s.name),s.scene.handleRetryLevel();case 2:case"end":return e.stop()}}),e)}))))},s.clickButtonPlayWithFriends=function(){s.scene.storage.dispatch(wh()),s.scene.screen.close(s.name)},s.clickButtonHome=function(){s.runCloseAnimation(),s.popupFadeOutAnimation.next((0,r.Z)(l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:s.scene.scene.switch(Pa.Co.DASHBOARD_SCENE);case 1:case"end":return e.stop()}}),e)}))))},s.clickButtonLeaderboard=function(){s.scene.screen.open(za.o4.LEADER_BOARD_SCREEN)},s.clickButtonShare=function(){s.scene.storage.dispatch(vl())},s.scene=t,s.createPopup(),s.createTitle(),s.createContentBackground(),s.createSwitchButtons(),s.createButtons(),s.addItem(),s.arrangeItems(),s.createInput(),s.createDebuggerInputLevel(),s.setDepth(za.Ks.POPUP),s.background.setAlpha(.5),s.scene.world.isLandscape()&&s.popup.setScale(s.popup.scale-.1),s}(0,o.Z)(t,e);var n=t.prototype;return n.open=function(){var t;e.prototype.open.call(this);var n=this.scene.player.getPlayerSettings(),i=n.sound,a=n.vibrate;this.settingSound.updateStatus(i),null==(t=this.settingVibrate)||t.updateStatus(a),this.runOpenAnimation()},n.createContentBackground=function(){this.backgroundContent=this.scene.make.image({key:RC,frame:wC.POPUP_CONTENT_BACKGROUND}),this.backgroundContent.setWorldSize(263,147),this.popup.add(this.backgroundContent),Phaser.Display.Align.In.TopCenter(this.backgroundContent,this.popup,0,-48)},n.createInput=function(){this.buttonClose.onClick=this.handleClose,this.settingSound.onClick=this.handleSoundSetting,this.settingVibrate&&(this.settingVibrate.onClick=this.handleVibrateSetting)},n.createPopup=function(){this.popup=new as.Z(this.scene,0,0,290,390),this.add(this.popup),Phaser.Display.Align.In.Center(this.popup,this.zone)},n.createTitle=function(){this.title=this.scene.add.container();var e=this.scene.world.getPixelRatio(),t=this.scene.make.image({key:RC,frame:wC.TEXT_SETTING}),n=t.width,i=t.height;t.setWorldSize(n/e,i/e),this.buttonClose=new ja.Z(this.scene,RC,wC.BUTTON_CLOSE,35,35),this.buttonClose.setName("Close"),this.title.add([t,this.buttonClose]),Phaser.Display.Align.In.Center(t,this.title,0,11),Phaser.Display.Align.In.Center(this.buttonClose,this.title,135,-14)},n.createButtons=function(){this.createReplayButton(),this.createHomeButton(),this.createJourneyButton()},n.createReplayButton=function(){this.buttonReplay=new OC(this.scene),this.popup.add(this.buttonReplay),this.buttonReplay.onClick=this.clickReplay,Phaser.Display.Align.In.Center(this.buttonReplay,this.popup,0,43)},n.createPlayWithFriendButton=function(){this.buttonPlayWithFriend=new yC(this.scene),this.popup.add(this.buttonPlayWithFriend),this.buttonPlayWithFriend.onClick=this.clickButtonPlayWithFriends,Phaser.Display.Align.In.Center(this.buttonPlayWithFriend,this.buttonReplay,0,65)},n.createHomeButton=function(){this.buttonHome=new uC(this.scene),this.popup.add(this.buttonHome),this.buttonHome.onClick=this.clickButtonHome,Phaser.Display.Align.In.Center(this.buttonHome,this.buttonReplay,-60,72)},n.createJourneyButton=function(){this.buttonJourney=new mC(this.scene),this.popup.add(this.buttonJourney),this.buttonJourney.onClick=this.clickButtonJourney.bind(this),Phaser.Display.Align.In.Center(this.buttonJourney,this.buttonReplay,60,72)},n.clickButtonJourney=function(){var e=this;this.runCloseAnimation(),this.popupFadeOutAnimation.next((0,r.Z)(l().mark((function t(){return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.scene.scene.switch(Pa.Co.LEVEL_SCENE);case 1:case"end":return t.stop()}}),t)}))))},n.createSwitchButtons=function(){var e=this.scene.player.getPlayerSettings(),t=(e.music,e.sound),n=e.vibrate;this.createSoundButton(t),Up()&&!GameCore.Utils.Device.isIOS()?(this.createVibrateButton(n),Phaser.Display.Align.In.Center(this.settingSoundContainer,this.backgroundContent,0,-33),Phaser.Display.Align.In.Center(this.settingVibrateContainer,this.backgroundContent,0,28)):Phaser.Display.Align.In.Center(this.settingSoundContainer,this.backgroundContent,0,0)},n.createMusicButton=function(e){this.settingMusicContainer=this.scene.make.container({});var t=this.scene.make.image({key:RC,frame:wC.ICON_MUSIC});t.setWorldSize(37,40),this.settingMusic=new FE(this.scene,{enable:e,width:89,height:31}),this.settingMusic.setName("Music"),Phaser.Display.Align.In.Center(t,this.settingMusicContainer,-60),Phaser.Display.Align.In.Center(this.settingMusic,this.settingMusicContainer,40),this.settingMusicContainer.add([t,this.settingMusic]),this.popup.add(this.settingMusicContainer),Phaser.Display.Align.In.Center(this.settingMusicContainer,this.backgroundContent,0,60)},n.createVibrateButton=function(e){this.settingVibrateContainer=this.scene.make.container({});var t=this.scene.make.image({key:RC,frame:wC.ICON_VIBRATE});t.setWorldSize(41,48),this.settingVibrate=new FE(this.scene,{enable:e,width:89,height:31}),this.settingVibrate.setName("Vibrate"),this.settingVibrateContainer.add([t,this.settingVibrate]),Phaser.Display.Align.In.Center(t,this.settingVibrateContainer,-60),Phaser.Display.Align.In.Center(this.settingVibrate,this.settingVibrateContainer,35),this.popup.add(this.settingVibrateContainer)},n.createSoundButton=function(e){this.settingSoundContainer=this.scene.make.container({});var t=this.scene.make.image({key:RC,frame:wC.ICON_SOUND});t.setWorldSize(41,36),this.settingSound=new FE(this.scene,{enable:e,width:89,height:31}),this.settingSound.setName("Sound"),this.settingSoundContainer.add([t,this.settingSound]),Phaser.Display.Align.In.Center(t,this.settingSoundContainer,-58),Phaser.Display.Align.In.Center(this.settingSound,this.settingSoundContainer,35),this.popup.add(this.settingSoundContainer)},n.addItem=function(){this.popup.add([this.title]),this.contents=this.scene.add.group(),this.contents.addMultiple([])},n.arrangeItems=function(){Phaser.Display.Align.In.TopCenter(this.title,this.popup)},n.runOpenAnimation=function(){var e;null!=(e=this.popupShowUpAnimation)&&null!=(e=e.tween)&&e.isPlaying()||(this.scene.audio.playSound(Ka.Z.POPUP_SHOW),this.runPopupEntrancesAnimation(0,300),this.runFadeInMaskAnimation(100,300),this.runPopupContentEntrancesAnimation(200,300))},n.runCloseAnimation=function(){var e;null!=(e=this.popupFadeOutAnimation)&&null!=(e=e.tween)&&e.isPlaying()||(this.runPopupExitsAnimation(50,200),this.runFadeOutMaskAnimation(0,200))},n.runPopupEntrancesAnimation=function(e,t){if(!this.popupShowUpAnimation){var n=this.popup.scale;this.popupShowUpAnimation=new is.Z({targets:[this.popup],delay:e,duration:t,props:{y:0,alpha:{start:1,from:1,to:1},scale:{start:0,from:0,to:n}}})}this.popupShowUpAnimation.play()},n.runPopupContentEntrancesAnimation=function(e,t){var n;null==(n=this.contentShowUpAnimation)||n.remove(),this.contentShowUpAnimation=new ns.Z({targets:this.contents.getChildren(),duration:t,delay:e,props:{alpha:{start:0,from:0,to:1}}}),this.contentShowUpAnimation.play()},n.runPopupExitsAnimation=function(e,t){var n=this;this.popupFadeOutAnimation||(this.popupFadeOutAnimation=new ts.Z({targets:[this.popup],delay:e,duration:t,props:{scale:0},onComplete:function(){n.popup.setY(0),n.scene.screen.close(n.name)}})),this.popupFadeOutAnimation.play()},n.runFadeInMaskAnimation=function(e,t){if(!this.popupFadeInMaskAnimation){var n=this.background.alpha;this.popupFadeInMaskAnimation=new Eo.Z({targets:[this.background],delay:e,duration:t,props:{alpha:{start:0,from:0,to:n}}})}this.popupFadeInMaskAnimation.play()},n.runFadeOutMaskAnimation=function(e,t){if(!this.popupFadeOutMaskAnimation){var n=this.background.alpha;this.popupFadeOutMaskAnimation=new ts.Z({targets:[this.background],delay:e,duration:t,props:{alpha:{start:n,from:n,to:0}}})}this.popupFadeOutMaskAnimation.play()},n.createDebuggerInputLevel=function(){var e=this;if(GameCore.Utils.Valid.isDebugger()){for(var t=this.scene.make.container({}),n=function(n){var i=e.scene.make.bitmapText({font:Xa.Z.PRIMARY_LIGHT.KEY,size:e.scene.fontSize(34),origin:{x:.5,y:.5},text:""+n});t.add(i),i.setInteractive({useHandCursor:!0}),i.on("pointerdown",(function(){e.debuggerHandleClick(n)})),Phaser.Display.Align.In.Center(i,t,20*n)},i=0;i<10;i++)n(i);this.add(t),Phaser.Display.Align.In.Center(t,this.popup,-100,190),this.debuggerCurrentLevelText=this.scene.make.bitmapText({font:Xa.Z.PRIMARY_LIGHT.KEY,size:this.scene.fontSize(34),origin:{x:.5,y:.5},text:"Level 0"}),this.add(this.debuggerCurrentLevelText),Phaser.Display.Align.In.Center(this.debuggerCurrentLevelText,this.popup,0,210);var a=this.scene.make.bitmapText({font:Xa.Z.PRIMARY_LIGHT.KEY,size:this.scene.fontSize(34),origin:{x:.5,y:.5},text:"Go"});this.add(a),a.setInteractive({useHandCursor:!0}),a.on("pointerdown",(function(){e.close(),e.scene.time.delayedCall(300,(function(){e.scene.levelManager.setLevel(e.debuggerCurrentLevel),e.scene.startGame()}))})),Phaser.Display.Align.In.Center(a,this.popup,-70,210);var s=this.scene.make.bitmapText({font:Xa.Z.PRIMARY_LIGHT.KEY,size:this.scene.fontSize(34),origin:{x:.5,y:.5},text:"Clear"});s.setInteractive({useHandCursor:!0}),s.on("pointerdown",(function(){e.debuggerCurrentLevel=0,e.debuggerCurrentLevelText.setText("Level "+String(e.debuggerCurrentLevel))})),this.add(s),Phaser.Display.Align.In.Center(s,this.popup,70,210)}},n.debuggerHandleClick=function(e){var t=this.debuggerCurrentLevel+""+e;this.debuggerCurrentLevel=parseInt(t),this.debuggerCurrentLevelText.setText("Level "+String(this.debuggerCurrentLevel))},t}(GameCore.Screen),kC=xC,_C=function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).name="InvalidTileMap",i.message=t||"This tile is not valid",i.payload=n,i}return(0,o.Z)(t,e),t}((0,N.Z)(Error)),LC=n(628),DC=n(459),MC=function(){function e(e){this.scene=void 0,this.tweenScaleUp=void 0,this.tweenScaleDown=void 0,this.tweenMoveTo=void 0,this.target=void 0,this.handleOnComplete=void 0,this.playing=void 0,this.path=void 0,this.scene=e,this.path=new Phaser.Curves.Path}var t=e.prototype;return t.runScaleUpAnimation=function(e,t){var n;null==(n=this.tweenScaleUp)||n.remove(),this.tweenScaleUp||(this.tweenScaleUp=new LC.Z({targets:[this.target],delay:e,duration:t,props:{scale:"+=0.05"}})),this.tweenScaleUp.play()},t.runScaleDownAnimation=function(e,t){var n;null==(n=this.tweenScaleDown)||n.remove(),this.tweenScaleDown||(this.tweenScaleDown=new DC.Z({targets:[this.target],delay:e,duration:t,props:{scale:"-=0.15"}})),this.tweenScaleDown.play()},t.runAnimMoveToPosition=function(e,t,n,i){var a=this;this.playing=!0;var s=this.target.getWorldPosition(),r=s.x,o=s.y;this.path.startPoint=new Phaser.Math.Vector2(r,o);for(var c=Math.abs(n-r)/2,l=Math.abs(i-o),h=Phaser.Math.Between(1,2),u=[],d=1;d<4;d++){var p=-1;d%2==0&&(p=1);var g=(c-p*Phaser.Math.Between(c/4,c/3))*h,f=o-d*(l/4);u.push(new Phaser.Math.Vector2(g,f))}u.push(new Phaser.Math.Vector2(n,i)),this.path.splineTo(u),this.path.lineTo(n,i);var m=new Phaser.Curves.Spline(u),v=this.target.x,E=this.target.y;this.tweenMoveTo=this.scene.add.tween({delay:e,targets:this.path,t:{from:0,to:1},ease:"Sine.easeInOut",duration:t,onUpdate:function(e){var t=e.getValue(0),n=m.getPoint(t);a.target.setPosition(n.x-r-v,n.y-o-E)},onComplete:function(){a.playing=!1,a.handleOnComplete&&a.handleOnComplete()}})},t.runGemMoveToPosition=function(e,t,n,i){var a=this;this.playing=!0,this.target.setDepth(Va.Z.ON_TOP);var s=this.target.x,r=this.target.y;this.path.startPoint=new Phaser.Math.Vector2(s,r);for(var o=this.scene.gameZone.width/2,c=Math.abs(n-s)+o-50,l=Math.abs(i-r),h=[],u=1;u<4;u++){var d=-1;u%2==0&&(d=1);var p=1.5*(c-d*Phaser.Math.Between(c/8,c/7)),g=r-u*(l/4);h.push(new Phaser.Math.Vector2(p,g))}h.push(new Phaser.Math.Vector2(n,i)),this.path.splineTo(h),this.path.lineTo(n,i);var f=new Phaser.Curves.Spline(h);return this.tweenMoveTo=this.scene.add.tween({delay:e,targets:this.path,t:{from:0,to:1},ease:"Sine.easeInOut",duration:t,onUpdate:function(e){var t=e.getValue(0),n=1-t+.1,i=f.getPoint(t);a.target.setAlpha(n),a.target.setPosition(i.x,i.y)},onComplete:function(){a.playing=!1,a.handleOnComplete&&a.handleOnComplete()}}),this.tweenMoveTo},t.setTarget=function(e){this.target=e},(0,ae.Z)(e,[{key:"onComplete",set:function(e){this.handleOnComplete=e}},{key:"isPlaying",get:function(){return this.playing}}]),e}(),NC=function(e){function t(t){return e.call(this,t)||this}(0,o.Z)(t,e);var n=t.prototype;return n.runAnimMoveToPosition=function(e,t,n,i){var a=this;this.playing=!0;var s=this.target.getWorldPosition(),r=s.x,o=s.y;this.path.startPoint=new Phaser.Math.Vector2(r,o);for(var c=this.scene.gameZone.height/2,l=Math.abs(n-r),h=Math.abs(i-o)+c-50,u=[],d=1;d<4;d++){var p=-1;d%2==0&&(p=1);var g=Phaser.Math.Between(h/18,h/17),f=r-d*(l/4),m=1.5*(h-p*g);u.push(new Phaser.Math.Vector2(f,m))}u.push(new Phaser.Math.Vector2(n,i)),this.path.splineTo(u),this.path.lineTo(n,i);var v=new Phaser.Curves.Spline(u),E=this.target.x,S=this.target.y;this.tweenMoveTo=this.scene.add.tween({delay:e,targets:this.path,t:{from:0,to:1},ease:"Sine.easeInOut",duration:t,onUpdate:function(e){var t=e.getValue(0),n=v.getPoint(t);a.target.setPosition(n.x-r-E,n.y-o-S)},onComplete:function(){a.playing=!1,a.handleOnComplete&&a.handleOnComplete()}})},n.runGemMoveToPosition=function(e,t,n,i){var a=this;this.playing=!0,this.target.setDepth(Va.Z.ON_TOP);var s=this.target.x,r=this.target.y;this.path.startPoint=new Phaser.Math.Vector2(s,r);for(var o=this.scene.gameZone.height/2,c=Math.abs(n-s),l=Math.abs(i-r)+o-50,h=[],u=1;u<4;u++){var d=-1;u%2==0&&(d=1);var p=s-u*(c/4),g=1.5*(l-d*Phaser.Math.Between(l/18,l/17));h.push(new Phaser.Math.Vector2(p,g))}h.push(new Phaser.Math.Vector2(n,i)),this.path.splineTo(h),this.path.lineTo(n,i);var f=new Phaser.Curves.Spline(h);return this.tweenMoveTo=this.scene.add.tween({delay:e,targets:this.path,t:{from:0,to:1},ease:"Sine.easeInOut",duration:t,onUpdate:function(e){var t=e.getValue(0),n=1-t+.1,i=f.getPoint(t);a.target.setAlpha(n),a.target.setPosition(i.x,i.y)},onComplete:function(){a.playing=!1,a.handleOnComplete&&a.handleOnComplete()}}),this.tweenMoveTo},t}(MC),BC=Wa.Z.DEFAULT,GC=(BC.KEY,BC.FRAME,Wa.Z.GAMEPLAY_32.KEY),FC=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n.imageGem=void 0,n.text=void 0,n.scene=t,n.init(),n}(0,o.Z)(t,e);var n=t.prototype;return n.init=function(){this.createImageGem(),this.createText()},n.createImageGem=function(){this.imageGem=this.scene.make.image({key:GC}),this.imageGem.setWorldSize(35,35),this.add(this.imageGem),Phaser.Display.Align.In.Center(this.imageGem,this,0,-10.5)},n.createText=function(){this.text=this.scene.make.bitmapText({font:Xa.Z.PRIMARY.KEY,size:this.scene.fontSize(42),origin:{x:.5,y:.5},text:"0"}),this.add(this.text),Phaser.Display.Align.In.Center(this.text,this,0,29)},n.updateGem=function(e){this.imageGem.setFrame(e)},n.updateText=function(e){this.text.setText("x"+e)},n.getFrame=function(){return this.imageGem.frame.name},t}(Phaser.GameObjects.Container),UC=Wa.Z.DEFAULT,HC=UC.KEY,ZC=UC.FRAME,YC=function(e){function t(t,n,i,a){var s;return(s=e.call(this,t,n,i,a)||this).scene=void 0,s.popup=void 0,s.title=void 0,s.contents=void 0,s.backgroundContent=void 0,s.listItems=[],s.targetImages=[],s.popupShowUpAnimation=void 0,s.popupFadeOutAnimation=void 0,s.contentShowUpAnimation=void 0,s.listAnimCollectionItem=[],s.popupFadeInMaskAnimation=void 0,s.popupFadeOutMaskAnimation=void 0,s.handleClose=function(){s.runCloseAnimation()},s.scene=t,s.createPopup(),s.createTitle(),s.createContentBackground(),s.addItem(),s.setDepth(za.Ks.POPUP),s.background.setAlpha(.5),s}(0,o.Z)(t,e);var n=t.prototype;return n.open=function(t){var n=this;e.prototype.open.call(this,t);var i=this.getData(["duration"])[0];this.hideAllCollectionItems(),this.createCollectionItems(),this.alginCollectionItems(),this.runOpenAnimation(),this.scene.time.delayedCall(i,(function(){n.handleClose()}))},n.createContentBackground=function(){this.backgroundContent=this.scene.make.image({key:HC,frame:ZC.POPUP_CONTENT_BACKGROUND}),this.backgroundContent.setWorldSize(263,135),this.popup.add(this.backgroundContent),Phaser.Display.Align.In.TopCenter(this.backgroundContent,this.popup,0,-24)},n.createCollectionItems=function(){for(var e=this.getData(["jsonTarget"])[0],t=q()(e),n=0;n<t.length;n++){var i=t[n],a=this.getCollectionItemFree(n);a.updateGem(i),a.updateText(e[i])}},n.getCollectionItemFree=function(e){var t=this.listItems[e];return t||(t=new FC(this.scene),this.popup.add(t),this.listItems.push(t)),t.setVisible(!0),t},n.alginCollectionItems=function(){var e;this.targetImages=[];for(var t=Ae()(e=this.listItems).call(e,(function(e){return e.visible})),n=t.length,i=263/(n+1)+5,a=-i*(n-1)/2,s=0;s<n;s++){var r=t[s];Phaser.Display.Align.In.Center(r,this.backgroundContent,a+i*s);var o=r.getFrame(),c=this.scene.make.image({key:Wa.Z.GAMEPLAY_32.KEY,frame:o});c.setWorldSize(22,22),c.setVisible(!1),this.targetImages.push(c),Phaser.Display.Align.In.Center(c,this.backgroundContent,a+i*s+this.scene.gameZone.width/2,this.scene.gameZone.height/2)}},n.hideAllCollectionItems=function(){for(var e=0;e<this.listItems.length;e++){this.listItems[e].setVisible(!1)}},n.moveGemsToCollectItems=function(){var e=this;this.resetPositionTargetImages();for(var t=this.scene.layoutManager.objects,n=t.header,i=t.main,a=n.collectItems,s=a.getTargetKeys(),r=this.scene.gameZone.width/2,o=function(t){var o=s[t],c=a.getPositionCollectionItem(o),l=r+c.x,h=c.y-23;e.scene.world.isLandscape()&&(l=n.collectItems.getWorldPosition().x,h=n.collectItems.getWorldPosition().y+c.y),e.targetImages[t].setAlpha(1),e.targetImages[t].setVisible(!0);var u=e.getFreeAnim(),d=Phaser.Math.Between(500,1e3);u.setTarget(e.targetImages[t]),u.runGemMoveToPosition(0,d,l,h).on(Phaser.Tweens.Events.TWEEN_COMPLETE,(function(){n.collectItems.showCollectItemByKey(o),e.targetImages[t].setVisible(!1),t==e.targetImages.length-1&&i.board.handleTweenStartMission()}))},c=0;c<s.length;c++)o(c)},n.resetPositionTargetImages=function(){for(var e,t=Ae()(e=this.listItems).call(e,(function(e){return e.visible})),n=263/(t.length+1)+5,i=-n*(t.length-1)/2,a=0;a<t.length;a++){var s;this.targetImages[a]&&(null==(s=this.targetImages[a])||s.setVisible(!1),Phaser.Display.Align.In.Center(this.targetImages[a],this.backgroundContent,i+n*a+this.scene.gameZone.width/2,this.scene.gameZone.height/2))}},n.getFreeAnim=function(){if(!this.scene.world.isLandscape()){var e=new MC(this.scene);return this.listAnimCollectionItem.push(e),e}var t=new NC(this.scene);return this.listAnimCollectionItem.push(t),t},n.createPopup=function(){this.popup=new as.Z(this.scene,0,-19,290,218,{forceHeightTop:55}),this.add(this.popup),Phaser.Display.Align.In.Center(this.popup,this.zone)},n.createTitle=function(){this.title=this.scene.add.container();var e=this.scene.world.getPixelRatio(),t=this.scene.make.image({key:HC,frame:ZC.TEXT_MISSION}),n=t.width,i=t.height;t.setWorldSize(n/e,i/e),this.title.add([t]),this.popup.add(this.title),Phaser.Display.Align.In.Center(t,this.title,0,-10),Phaser.Display.Align.In.TopCenter(this.title,this.popup)},n.addItem=function(){this.popup.add([this.title]),this.contents=this.scene.add.group(),this.contents.addMultiple([])},n.runOpenAnimation=function(){var e;null!=(e=this.popupShowUpAnimation)&&null!=(e=e.tween)&&e.isPlaying()||(this.scene.audio.playSound(Ka.Z.POPUP_SHOW),this.runPopupEntrancesAnimation(0,300),this.runFadeInMaskAnimation(100,300),this.runPopupContentEntrancesAnimation(200,300))},n.runCloseAnimation=function(){var e,t=this;null!=(e=this.popupFadeOutAnimation)&&null!=(e=e.tween)&&e.isPlaying()||(this.runPopupExitsAnimation(50,200),this.scene.time.delayedCall(50,(function(){t.moveGemsToCollectItems()})),this.runFadeOutMaskAnimation(0,200))},n.runPopupEntrancesAnimation=function(e,t){if(!this.popupShowUpAnimation){var n=this.popup,i=(n.y,n.scale);this.popupShowUpAnimation=new is.Z({targets:[this.popup],delay:e,duration:t,props:{y:0,alpha:{start:1,from:1,to:1},scale:{start:0,from:0,to:i}}})}this.popupShowUpAnimation.play()},n.runPopupContentEntrancesAnimation=function(e,t){var n;null==(n=this.contentShowUpAnimation)||n.remove(),this.contentShowUpAnimation=new ns.Z({targets:this.contents.getChildren(),duration:t,delay:e,props:{alpha:{start:0,from:0,to:1}}}),this.contentShowUpAnimation.play()},n.runPopupExitsAnimation=function(e,t){var n=this;this.popupFadeOutAnimation||(this.popupFadeOutAnimation=new ts.Z({targets:[this.popup],delay:e,duration:t,props:{scale:0},onComplete:function(){n.popup.setY(0),n.scene.screen.close(n.name),n.scene.startGameAfterCollectionItemsScreenClose()}})),this.popupFadeOutAnimation.play()},n.runFadeInMaskAnimation=function(e,t){if(!this.popupFadeInMaskAnimation){var n=this.background.alpha;this.popupFadeInMaskAnimation=new Eo.Z({targets:[this.background],delay:e,duration:t,props:{alpha:{start:0,from:0,to:n}}})}this.popupFadeInMaskAnimation.play()},n.runFadeOutMaskAnimation=function(e,t){if(!this.popupFadeOutMaskAnimation){var n=this.background.alpha;this.popupFadeOutMaskAnimation=new ts.Z({targets:[this.background],delay:e,duration:t,props:{alpha:{start:n,from:n,to:0}}})}this.popupFadeOutMaskAnimation.play()},t}(GameCore.Screen),VC=YC,WC=Ja.STATUS,zC=Wa.Z.GAMEPLAY,KC=zC.KEY,jC=zC.FRAME,XC=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n.step=void 0,n.listPositionStart=void 0,n.listPositionTo=void 0,n.positionStart=void 0,n.positionTo=void 0,n.handFrame=void 0,n.tweenHand=void 0,n.validTargetPosition=function(e){var t={x:0,y:0};switch(n.step){case 0:case 1:t={x:3,y:3}}return t.x===e.x&&t.y===e.y},n.scene=t,n.step=0,n.createHand(),n.registerEvents(),n}(0,o.Z)(t,e);var n=t.prototype;return n.registerEvents=function(){this.scene.world.events.on(Pt.Z.RESIZE,this.handleResize,this)},n.handleResize=function(){var e=this;this.isRunning()&&this.scene.time.delayedCall(50,(function(){e.initPosition(),e.positionStart=e.listPositionStart[e.step],e.positionTo=e.listPositionTo[e.step],e.createTweenHand()}))},n.start=function(){this.initPosition(),this.isRunning()||(this.setState(WC.RUNNING),this.handleStep())},n.initPosition=function(){var e=this.scene.layoutManager.objects.main.board,t=e.dataBoard,n=e.cellSize,i=this.scene.layoutManager.objects.footer.pieces,a=i.allPieces,s=i.piecesActive,r=a[s[0].position].piece.getWorldPosition().x+n/2,o=a[s[0].position].piece.getWorldPosition().y+n/2,c=t[3][3].cell.getWorldPosition().x+n/2,l=t[3][3].cell.getWorldPosition().y+n/2,h=a[s[1].position].piece.getWorldPosition().x+n,u=a[s[1].position].piece.getWorldPosition().y+n,d=t[5][5].cell.getWorldPosition().x+n/2,p=t[5][5].cell.getWorldPosition().y+n/2;this.listPositionStart=[{x:r,y:o},{x:h,y:u}],this.listPositionTo=[{x:c,y:l},{x:d,y:p}]},n.createHand=function(){this.handFrame=this.scene.make.image({key:KC,frame:jC.HAND,origin:{x:.5,y:.5}}),this.handFrame.setVisible(!1).setDepth(Va.Z.ON_TOP),this.handFrame.setWorldSize(64,55)},n.createTweenHand=function(){var e;null==(e=this.tweenHand)||e.remove(),this.tweenHand=this.scene.add.tween({paused:!0,repeatDelay:500,targets:this.handFrame,repeat:-1,x:{from:this.positionStart.x,to:this.positionTo.x},y:{from:this.positionStart.y,to:this.positionTo.y},duration:1500,ease:Phaser.Math.Easing.Sine.InOut}),this.tweenHand.play()},n.handleStep=function(){switch(this.positionStart=this.listPositionStart[this.step],this.positionTo=this.listPositionTo[this.step],this.handFrame.setVisible(!0),this.handFrame.setPosition(this.positionStart.x,this.positionStart.y),this.createTweenHand(),this.step){case 0:this.handleStep1();break;case 1:this.handleStep2()}},n.handleStep1=function(){var e=this.scene.layoutManager.objects.main;e.board.dataBoard[3][3].cell.setFrameImageCell(Wa.Z.GAMEPLAY_32.FRAME.GEM_HIGHT_LIGHT),e.board.dataBoard[3][4].cell.setFrameImageCell(Wa.Z.GAMEPLAY_32.FRAME.GEM_HIGHT_LIGHT),e.board.dataBoard[4][3].cell.setFrameImageCell(Wa.Z.GAMEPLAY_32.FRAME.GEM_HIGHT_LIGHT)},n.handleStep2=function(){var e=this.scene.layoutManager.objects.main;e.board.dataBoard[5][3].cell.setFrameImageCell(Wa.Z.GAMEPLAY_32.FRAME.GEM_HIGHT_LIGHT),e.board.dataBoard[5][4].cell.setFrameImageCell(Wa.Z.GAMEPLAY_32.FRAME.GEM_HIGHT_LIGHT),e.board.dataBoard[5][5].cell.setFrameImageCell(Wa.Z.GAMEPLAY_32.FRAME.GEM_HIGHT_LIGHT),e.board.dataBoard[3][5].cell.setFrameImageCell(Wa.Z.GAMEPLAY_32.FRAME.GEM_HIGHT_LIGHT),e.board.dataBoard[4][5].cell.setFrameImageCell(Wa.Z.GAMEPLAY_32.FRAME.GEM_HIGHT_LIGHT)},n.handleCompleteTutorial=function(){this.setState(WC.STOPPED),this.stopAnimHand()},n.nextStep=function(){this.handFrame.setVisible(!1),this.step++,this.step>=2?this.handleCompleteTutorial():this.handleStep()},n.stopAnimHand=function(){var e;this.handFrame.setVisible(!1),null==(e=this.tweenHand)||e.stop()},n.runAnimHand=function(){this.handFrame.setVisible(!0),this.tweenHand.play()},n.validStep=function(e){return this.step===e},n.reset=function(){this.setState(WC.STOPPED),this.stopAnimHand(),this.step=0},t}(es),JC=XC,qC=function(e){return e[Ri]},QC=((0,ce.P1)([function(e){return qC(e).isRequesting}],(function(e){return e})),(0,ce.P1)([function(e){return qC(e).leaders}],(function(e){return e}))),$C=(0,ce.P1)([function(e){return qC(e).time}],(function(e){return e})),eb=Wa.Z.DEFAULT,tb=eb.KEY,nb=eb.FRAME,ib=function(e){function t(t){var n;return(n=e.call(this,t,tb,nb.BUTTON_MINOR)||this).button.setWorldSize(64,55),n.setName("Home"),n.createIcon(),n}return(0,o.Z)(t,e),t.prototype.createIcon=function(){var e=this.scene.make.image({key:tb,frame:nb.ICON_HOME});e.setWorldSize(31,28),this.add(e),Phaser.Display.Align.In.Center(e,this,.5,-2)},t}(ja.Z),ab=ib,sb=Wa.Z.DEFAULT,rb=sb.KEY,ob=sb.FRAME,cb=function(e){function t(t,n){var i;return(i=e.call(this,t)||this).payload=void 0,i.background=void 0,i.avatar=void 0,i.rankIcon=void 0,i.rankText=void 0,i.username=void 0,i.textTime=void 0,i.createBackground(),i.updateSize(),i.createRank(),i.createUsername(),i.createTimeBlock(),n&&i.updateInfo(n),i.scene.add.existing((0,Ba.Z)(i)),i}(0,o.Z)(t,e);var n=t.prototype;return n.updateInfo=function(e){this.payload=(0,s.Z)({backgroundFrame:""},e),this.updateBackground(),this.updateRank(),this.updateUsername(),this.updateTime()},n.createBackground=function(){this.background=this.scene.make.image({key:rb,frame:ob.DAILY_BG_ITEM_DARK}),this.background.setWorldSize(254,38),this.add(this.background)},n.updateBackground=function(){var e=this.payload.backgroundFrame;this.background.setVisible(!0),this.background.setFrame(e||ob.DAILY_BG_ITEM_DARK),this.background.setWorldSize(254,38)},n.updateSize=function(){var e=this.background,t=e.width,n=e.height;this.setSize(t,n)},n.createRank=function(){this.createRankIcon(1),this.createRankText(1)},n.updateRank=function(){var e=this.payload.rank;if(e<0)return this.rankIcon.setVisible(!1),this.rankText.setVisible(!0),void this.rankText.setText("99+");this.updateRankIcon(e),this.updateRankText(e)},n.createRankIcon=function(e){var t=this.getRankIconFrame(e);this.rankIcon=this.scene.make.image({key:rb,frame:t}),this.rankIcon.setWorldSize(28,24),this.add(this.rankIcon),Phaser.Display.Align.In.LeftCenter(this.rankIcon,this.background,-15)},n.getRankIconFrame=function(e){var t=ob.ICON_CUP_GOLD;switch(e){case 1:t=ob.ICON_CUP_GOLD;break;case 2:t=ob.ICON_CUP_SILVER;break;case 3:t=ob.ICON_CUP_COPPER}return t},n.updateRankIcon=function(e){if(e<=3){this.rankText.setVisible(!1),this.rankIcon.setVisible(!0);var t=this.getRankIconFrame(e);this.rankIcon.setFrame(t)}else this.rankText.setVisible(!0).setText(String(e)),this.rankIcon.setVisible(!1)},n.createRankText=function(e){this.rankText=this.scene.make.bitmapText({font:Xa.Z.NUMBER_LIGHT.KEY,size:this.scene.fontSize(32),text:""+e,origin:{x:.5,y:.5}}),this.add(this.rankText),Phaser.Display.Align.In.Center(this.rankText,this.rankIcon,0,1)},n.updateRankText=function(e){e<=3?this.rankText.setVisible(!1):(this.rankText.setVisible(!0),this.rankText.setText(""+e),this.rankText.setFont(Xa.Z.NUMBER_DARK.KEY))},n.getShortName=function(e){var t=e.substring(0,7);return t.split(" ")[0]||t},n.createUsername=function(){this.username=this.scene.make.text({text:this.getShortName("Sang Le"),style:{fontFamily:Xa.Z.FONT_FAMILY_ARIAL,fontSize:this.scene.fontSize(36)+"px",fontStyle:"700"}}),this.username.setTint(7551258),this.username.setHighQuality(),this.add(this.username),Phaser.Display.Align.In.Center(this.username,this.background,-44)},n.updateUsername=function(){var e=this.payload.name;this.username.setText(this.getShortName(e)),this.username.setTint(7551258)},n.createTimeBlock=function(){var e=this.scene.make.container({}),t=this.scene.make.image({key:rb,frame:ob.DAILY_BG_TIME});t.setWorldSize(85,24),e.add(t);var n=this.scene.make.image({key:rb,frame:ob.ICON_CLOCK});n.setWorldSize(17,17),e.add(n),Phaser.Display.Align.In.LeftCenter(n,t,-5),this.textTime=this.scene.make.bitmapText({font:Xa.Z.PRIMARY_LIGHT.KEY,size:this.scene.fontSize(32),text:"0",origin:{x:.5,y:.5}}),e.add(this.textTime),Phaser.Display.Align.In.Center(this.textTime,t,10,1.5),this.add(e),Phaser.Display.Align.In.Center(e,this.background,70)},n.updateTime=function(){var e=this.payload.score;this.textTime.setText(this.secondsToHms(e))},n.secondsToHms=function(e){var t,n,i,a=Math.round(e/1e3%60),s=Math.floor(e/6e4%60),r=Math.floor(e/36e5%24);return g()(t="0"+r).call(t,-2)+":"+g()(n="0"+s).call(n,-2)+":"+g()(i="0"+a).call(i,-2)},t}(Phaser.GameObjects.Container),lb=cb;function hb(e,t){var n="undefined"!==typeof E()&&A()(e)||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){var n;if(!e)return;if("string"===typeof e)return ub(e,t);var i=g()(n=Object.prototype.toString.call(e)).call(n,8,-1);"Object"===i&&e.constructor&&(i=e.constructor.name);if("Map"===i||"Set"===i)return m()(e);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return ub(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var i=0;return function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function ub(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var db=Wa.Z.DEFAULT,pb=db.KEY,gb=db.FRAME,fb=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n.scroller=void 0,n.scrollerValue=void 0,n.tweenMoveToRank=void 0,n.scene=t,n.createReuseScroller(),n.scene.add.existing((0,Ba.Z)(n)),n}(0,o.Z)(t,e);var n=t.prototype;return n.createReuseScroller=function(){this.scroller=new Xh(this.scene,{classType:lb,listConfigs:[],width:260,height:190,padding:0,marginTop:0,marginBottom:0,maxScrollOver:.3,scrollingBackRate:5,useMask:!0}),this.scene.renderer instanceof Phaser.Renderer.WebGL.WebGLRenderer&&this.scroller.createBound(pb,gb.BLANK,40,16643027),this.scene.world.isLandscape()?this.scroller.createMask(.8):this.scroller.createMask(),this.scroller.setPosition(0,70),this.add(this.scroller)},n.updateData=function(e,t){var n=[],i=0;if(!(e.length<1)){for(var a,s=si()(e).call(e,(function(e,t){return+e.score-+t.score})),r=window.game.player.getPlayer().playerId,o=0,c=hb(s);!(a=c()).done;){var l=a.value,h=l.playerId,u=l.score,d=l.name;i++;var p=gb.DAILY_BG_ITEM_LIGHT;i%2==0&&(p=gb.DAILY_BG_ITEM_DARK);var g={playerId:h,name:d,score:u,rank:i,backgroundFrame:p};n.push(g),h==r&&(o=i),t&&t==h&&this.runTweenMoveToRank(i)}if(this.scroller.updateConfig(n),!t){var f=this.scroller.getChildren()[0].height;this.scroller.value=-f*this.showDefaultRank(o)}this.showLeaders()}},n.showDefaultRank=function(e){return e<3?0:e-3},n.runTweenMoveToRank=function(e){var t=this,n=this.scroller.getChildren()[0].height;this.scrollerValue=-n*(e-3),this.tweenMoveToRank=this.scene.tweens.addCounter({from:this.scroller.value,to:this.scrollerValue,duration:1e3,onUpdate:function(e){t.scroller.value=e.getValue()}}),this.scene.time.delayedCall(2500,(function(){1!=e&&2!=e||(t.scroller.value=0)}))},n.removeLeaders=function(){this.scroller.updateConfig([])},n.getLeaders=function(){return this.scroller.getChildren()},n.showLeaders=function(){var e=this,t=this.getLeaders();if(!(t.length<1)){for(var n=Math.min(t.length,6),i=0;i<n;i++){var a=t[i];a&&a.setVisible(!0)}var s=300+100*n+250;this.scene.time.delayedCall(s,(function(){e.scroller.setEnable(!0)}))}},n.getTestData=function(){return[{playerId:"001",name:"A",score:"001",rank:1},{playerId:"002",name:"B",score:"002",rank:2},{playerId:"003",name:"C",score:"003",rank:3},{playerId:"004",name:"D",score:"004",rank:4},{playerId:"005",name:"E",score:"005",rank:5},{playerId:"006",name:"F",score:"006",rank:6},{playerId:"007",name:"G",score:"007",rank:7}]},t}(Phaser.GameObjects.Container),mb=fb;function vb(e,t){var n="undefined"!==typeof E()&&A()(e)||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){var n;if(!e)return;if("string"===typeof e)return Eb(e,t);var i=g()(n=Object.prototype.toString.call(e)).call(n,8,-1);"Object"===i&&e.constructor&&(i=e.constructor.name);if("Map"===i||"Set"===i)return m()(e);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return Eb(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var i=0;return function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Eb(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var Sb=Wa.Z.DEFAULT,Ab=Sb.KEY,yb=Sb.FRAME,Tb=function(e){function t(t,n,i,a){var s;return(s=e.call(this,t,n,i,a)||this).scene=void 0,s.popup=void 0,s.title=void 0,s.buttonHome=void 0,s.contents=void 0,s.avatar=void 0,s.backgroundContent=void 0,s.popupShowUpAnimation=void 0,s.popupFadeOutAnimation=void 0,s.contentShowUpAnimation=void 0,s.popupFadeInMaskAnimation=void 0,s.popupFadeOutMaskAnimation=void 0,s.buttonClose=void 0,s.leaderItems=void 0,s.timeText=void 0,s.scene=t,s.createPopup(),s.createScroller(),s.createContentBackground(),s.createAvatar(),s.createTitle(),s.createTimeText(),s.createButtons(),s.setDepth(za.Ks.POPUP),s.background.setAlpha(.5),s.scene.world.isLandscape()&&s.popup.setScale(s.popup.scale-.2),s}(0,o.Z)(t,e);var n=t.prototype;return n.createScroller=function(){this.leaderItems=new mb(this.scene),this.popup.add(this.leaderItems),Phaser.Display.Align.In.Center(this.leaderItems,this.popup,0,36)},n.updateTimeText=function(){var e=this.scene.storage.getState(),t=$C(e);this.timeText.setText(this.secondsToHms(t))},n.secondsToHms=function(e){var t,n,i,a=Math.round(e/1e3%60),s=Math.floor(e/6e4%60),r=Math.floor(e/36e5%24);return g()(t="0"+r).call(t,-2)+":"+g()(n="0"+s).call(n,-2)+":"+g()(i="0"+a).call(i,-2)},n.getLeadersData=function(){var e=this.scene.game.storage.getState(),t=QC(e),n=[],i=ii()(t)||[],a=si()(i).call(i,(function(e,t){return+e.score-+t.score}));if(a.length>0)for(var s,r=vb(a);!(s=r()).done;){var o=s.value;n.push(o)}return n},n.open=function(){e.prototype.open.call(this),this.loadAvatar(),this.updateTimeText(),this.runOpenAnimation()},n.createPopup=function(){this.popup=new as.Z(this.scene,0,20,290,280,{forceHeightTop:54}),this.add(this.popup),Phaser.Display.Align.In.Center(this.popup,this.zone,0,-10)},n.createContentBackground=function(){this.backgroundContent=this.scene.make.image({key:Ab,frame:yb.DAILY_BACKGROUND}),this.backgroundContent.setWorldSize(258,132),this.popup.add(this.backgroundContent),Phaser.Display.Align.In.TopCenter(this.backgroundContent,this.popup,0,-86)},n.createAvatar=function(){this.avatar=new dc(this.scene,{key:Ab,frame:yb.AVATAR_BORDER,background:yb.AVATAR_BACKGROUND,width:70,height:70,radius:10,borderWidth:10}),this.popup.add(this.avatar),Phaser.Display.Align.In.Center(this.avatar,this.backgroundContent,71,-10)},n.createTitle=function(){this.title=this.scene.add.container();var e=this.scene.world.getPixelRatio(),t=this.scene.make.image({key:Ab,frame:yb.TEXT_RESULT}),n=t.width,i=t.height;t.setWorldSize(n/e,i/e),this.buttonClose=new ja.Z(this.scene,Ab,yb.BUTTON_CLOSE,35,35),this.buttonClose.setName("Close"),this.buttonClose.onClick=this.clickButtonClose.bind(this),this.title.add([t,this.buttonClose]),this.popup.add(this.title),Phaser.Display.Align.In.Center(t,this.title,0,10),Phaser.Display.Align.In.Center(this.buttonClose,this.title,135,0),Phaser.Display.Align.In.TopCenter(this.title,this.popup,0,-30)},n.clickButtonClose=function(){this.runCloseAnimation(),this.scene.storage.dispatch(Ch(!0)),this.scene.screen.open(za.o4.MINI_JOURNEY_SCREEN)},n.createTimeText=function(){this.timeText=this.scene.make.bitmapText({font:Xa.Z.PRIMARY_LIGHT.KEY,size:this.scene.fontSize(35),text:"00:00:00",origin:{x:.5,y:.5}}),this.popup.add(this.timeText),this.timeText.setPosition(70,50)},n.createButtons=function(){this.createButtonHome()},n.createButtonHome=function(){this.buttonHome=new ab(this.scene),this.popup.add(this.buttonHome),this.buttonHome.onClick=this.clickButtonHome.bind(this),Phaser.Display.Align.In.BottomCenter(this.buttonHome,this.popup,0,5)},n.clickButtonHome=function(){var e=this;this.runCloseAnimation(),this.popupFadeOutAnimation.next((0,r.Z)(l().mark((function t(){return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.scene.scene.switch(Pa.Co.DASHBOARD_SCENE);case 1:case"end":return t.stop()}}),t)}))))},n.runOpenAnimation=function(){var e;null!=(e=this.popupShowUpAnimation)&&null!=(e=e.tween)&&e.isPlaying()||(this.scene.audio.playSound(Ka.Z.POPUP_SHOW),this.runPopupEntrancesAnimation(0,300),this.runFadeInMaskAnimation(100,300))},n.runCloseAnimation=function(){var e;null!=(e=this.popupFadeOutAnimation)&&null!=(e=e.tween)&&e.isPlaying()||(this.runPopupExitsAnimation(50,200),this.runFadeOutMaskAnimation(0,200))},n.runPopupEntrancesAnimation=function(e,t){if(!this.popupShowUpAnimation){var n=this.popup.scale;this.popupShowUpAnimation=new is.Z({targets:[this.popup],delay:e,duration:t,props:{y:0,alpha:{start:1,from:1,to:1},scale:{start:0,from:0,to:n}}})}this.popupShowUpAnimation.play()},n.runPopupContentEntrancesAnimation=function(e,t){var n;null==(n=this.contentShowUpAnimation)||n.remove(),this.contentShowUpAnimation=new ns.Z({targets:this.contents.getChildren(),duration:t,delay:e,props:{alpha:{start:0,from:0,to:1}}}),this.contentShowUpAnimation.play()},n.runPopupExitsAnimation=function(e,t){var n=this;this.popupFadeOutAnimation||(this.popupFadeOutAnimation=new ts.Z({targets:[this.popup],delay:e,duration:t,props:{scale:0},onComplete:function(){n.popup.setY(0),n.scene.screen.close(n.name)}})),this.popupFadeOutAnimation.play()},n.runFadeInMaskAnimation=function(e,t){if(!this.popupFadeInMaskAnimation){var n=this.background.alpha;this.popupFadeInMaskAnimation=new Eo.Z({targets:[this.background],delay:e,duration:t,props:{alpha:{start:0,from:0,to:n}}})}this.popupFadeInMaskAnimation.play()},n.runFadeOutMaskAnimation=function(e,t){if(!this.popupFadeOutMaskAnimation){var n=this.background.alpha;this.popupFadeOutMaskAnimation=new ts.Z({targets:[this.background],delay:e,duration:t,props:{alpha:{start:n,from:n,to:0}}})}this.popupFadeOutMaskAnimation.play()},n.loadAvatar=function(){var e=this.scene.player.getPlayer(),t=e.playerId,n=e.photo;this.avatar.loadPhoto(t,n)},t}(GameCore.Screen),Ib=GameCore.Configs,Cb=Ib.OtherHost,bb=Ib.DailyChallenge,Ob=function(){var e=(0,r.Z)(l().mark((function e(t,n){var i;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,Me.v)("leaderboards/"+bb.LeaderBoardId+"/players/"+t,{score:n},{},Cb);case 2:return i=e.sent,e.abrupt("return",(null==i?void 0:i.data)||{});case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),Pb=function(){var e=(0,r.Z)(l().mark((function e(t,n){var i,a,s,r;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Cb){e.next=2;break}return e.abrupt("return",[]);case 2:if(i=[],a=bb.Prefix+"/"+bb.LeaderBoardId+"/leaders"){e.next=6;break}return e.abrupt("return",i);case 6:return e.next=8,(0,Me.U)(a+"?limit="+t+"&offset="+n,{},Cb);case 8:if(s=e.sent,!((r=(null==s?void 0:s.data)||[]).length<1)){e.next=12;break}return e.abrupt("return",i);case 12:return i=r,e.abrupt("return",i);case 14:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();function Rb(e,t){var n="undefined"!==typeof E()&&A()(e)||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){var n;if(!e)return;if("string"===typeof e)return wb(e,t);var i=g()(n=Object.prototype.toString.call(e)).call(n,8,-1);"Object"===i&&e.constructor&&(i=e.constructor.name);if("Map"===i||"Set"===i)return m()(e);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return wb(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var i=0;return function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function wb(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var xb,kb=function(e){return function(){var t=(0,r.Z)(l().mark((function t(n){var a,s,r,o,c,h;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,a=e.time,s=e.currentTime,r=e.limit,o=e.offset,c=window.game.player,h=c.getPlayerId(),n({type:wi,payload:{}}),!(s>a||0==s)){t.next=9;break}return n(Db(a)),t.next=9,Ob(h,a);case 9:return t.next=11,(0,So.qZ)(500);case 11:n(_b({limit:r,offset:o})),t.next=17;break;case 14:t.prev=14,t.t0=t.catch(0),(0,i.tO)(t.t0);case 17:case"end":return t.stop()}}),t,null,[[0,14]])})));return function(e){return t.apply(this,arguments)}}()},_b=function(e){return function(){var t=(0,r.Z)(l().mark((function t(n){var a,s,r,o,c,h,u,d,p,g,f,m,v,E,S,A,y,T,I;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n({type:wi,payload:{}}),a=e.limit,s=e.offset,r=window.game,o=r.player,c=r.profile,h=o.getPlayerId(),o.getConnectedPlayerIds(5,0).push(h),t.next=9,Pb(a,s);case 9:return u=t.sent,d=Te()(u).call(u,(function(e){return e.playerId})),d.push(o.getPlayerId()),t.next=14,c.requestProfiles(d);case 14:p=c.getProfiles(),g={},f=Rb(u);case 17:if((m=f()).done){t.next=26;break}if(v=m.value,E=v.playerId,S=v.score,A=v.rank,p[E]){t.next=22;break}return t.abrupt("continue",24);case 22:y=p[E],T=y.name,I=y.photo,g[E]={playerId:E,name:T,photo:I,score:S,rank:A};case 24:t.next=17;break;case 26:n(Lb(g)),t.next=33;break;case 29:t.prev=29,t.t0=t.catch(0),n(Lb([])),(0,i.tO)(t.t0);case 33:case"end":return t.stop()}}),t,null,[[0,29]])})));return function(e){return t.apply(this,arguments)}}()},Lb=function(e){return{type:xi,payload:{leaders:e}}},Db=function(e){return{type:ki,payload:{time:e}}},Mb=Wa.Z.DEFAULT,Nb=Mb.KEY,Bb=Mb.FRAME,Gb=function(e){function t(t){var n;return(n=e.call(this,t,Nb,Bb.BUTTON_GREEN_BIG)||this).icon=void 0,n.text=void 0,n.button.setWorldSize(138,50),n.setName("Play"),n.createIcon(),n.createText(),n.alignItem(),n}(0,o.Z)(t,e);var n=t.prototype;return n.createIcon=function(){this.icon=this.scene.make.image({key:Nb,frame:Bb.ICON_I_PLAY}),this.icon.setWorldSize(20,26),this.add(this.icon)},n.createText=function(){var e=this.scene.world.getPixelRatio();this.text=this.scene.make.image({key:Nb,frame:Bb.TEXT_PLAY});var t=this.text,n=t.width,i=t.height;this.text.setWorldSize(n/e,i/e),this.add(this.text)},n.alignItem=function(){var e=this.width,t=this.icon.width,n=this.text.width,i=e/2,a=(e-10-t-n)/2+t/2,s=a+10+t/2+n/2;Phaser.Display.Align.In.Center(this.icon,this,a-i,-2),Phaser.Display.Align.In.Center(this.text,this,s-i,-2)},t}(ja.Z),Fb=Gb,Ub=Wa.Z.DEFAULT,Hb=Ub.KEY,Zb=Ub.FRAME,Yb=Wa.Z.GAMEPLAY,Vb=Yb.KEY,Wb=Yb.FRAME,zb=Wa.Z.GAMEPLAY_32,Kb=zb.KEY,jb=zb.FRAME,Xb=GameCore.Configs,Jb=Xb.Network,qb=Xb.Board,Qb=function(e){function t(t,n,i,a){var s;(s=e.call(this,t,n,i,a)||this).scene=void 0,s.popup=void 0,s.title=void 0,s.buttonClose=void 0,s.contents=void 0,s.buttonPlay=void 0,s.boardCellData=[],s.targetData=[],s.popupShowUpAnimation=void 0,s.popupFadeOutAnimation=void 0,s.contentShowUpAnimation=void 0,s.popupFadeInMaskAnimation=void 0,s.popupFadeOutMaskAnimation=void 0,s.clickClose=function(){s.runCloseAnimation(),s.popupFadeOutAnimation.next((function(){var e=s.getData(["onClose"])[0];s.scene.screen.close(s.name),s.scene.scene.switch(Pa.Co.DASHBOARD_SCENE),e&&e()}))},s.decodeMathData=function(e){try{return JSON.parse(GameCore.Utils.Hash.hashToString(e))}catch(t){return""}},s.scene=t;try{s.createPopup(),s.createTitle(),s.createTargetItems(),s.createBoard(),s.createButtonPlay(),s.setDepth(za.Ks.POPUP),s.background.setAlpha(.5)}catch(r){}return s}(0,o.Z)(t,e);var n=t.prototype;return n.open=function(){var t=(0,r.Z)(l().mark((function t(n){return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.prototype.open.call(this,n),t.next=3,this.checkReceiveLevelFromFb();case 3:this.loadLevelConfig();case 4:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),n.startGame=function(){this.runOpenAnimation(),this.updateContent(),this.popup.setVisible(!0)},n.loadLevelConfig=function(){try{var e=this.scene.storage.getState(),t=ol(e),n=vf[t];if(!n)return void this.handleLoadCurrentMapComplete();var a=n.key,s=n.mapJson;if(this.scene.cache.tilemap.exists(a))return void this.handleLoadCurrentMapComplete();this.scene.load.tilemapTiledJSON(a,s),this.scene.load.start(),this.scene.load.off(Phaser.Loader.Events.COMPLETE),this.scene.load.once(Phaser.Loader.Events.COMPLETE,this.handleLoadCurrentMapComplete.bind(this))}catch(r){(0,i.tO)(r)}},n.handleLoadCurrentMapComplete=function(){this.hideLoadingScreen(),this.startGame()},n.updateContent=function(){this.resetTarget(),this.drawTargetItems(),this.resetCellBoard(),this.updateCellBoard()},n.checkReceiveLevelFromFb=function(){var e=(0,r.Z)(l().mark((function e(){var t;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,t=this.scene.storage.getState(),!ol(t)){e.next=5;break}return e.abrupt("return");case 5:return this.showLoadingScreen(),e.next=8,this.scene.storage.dispatch(dh());case 8:e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),(0,i.tO)(e.t0);case 13:case"end":return e.stop()}}),e,this,[[0,10]])})));return function(){return e.apply(this,arguments)}}(),n.showLoadingScreen=function(){var e=this.scene.game,t=e.globalScene,n=e.lang;t.screen.open(za.o4.NOTIFY_SCREEN,{message:n.Text.LOADING_LEVEL+"...",duration:Jb.Timeout,loading:!0})},n.hideLoadingScreen=function(){this.scene.game.globalScene.screen.close(za.o4.NOTIFY_SCREEN)},n.createPopup=function(){this.popup=new as.Z(this.scene,0,-7,286,373),this.popup.setVisible(!1),this.add(this.popup),Phaser.Display.Align.In.Center(this.popup,this.zone,0,10)},n.createTitle=function(){this.title=this.scene.add.container();var e=this.scene.world.getPixelRatio(),t=this.scene.make.image({key:Hb,frame:Zb.TEXT_JOURNEY});t.setWorldSize(t.width/e,t.height/e),this.buttonClose=new ja.Z(this.scene,Hb,Zb.BUTTON_CLOSE,35,35),this.buttonClose.setName("Close"),this.buttonClose.onClick=this.clickClose,this.title.add([t,this.buttonClose]),this.popup.add(this.title),Phaser.Display.Align.In.Center(t,this.title),Phaser.Display.Align.In.Center(this.buttonClose,this.title,138.5,-19.5),Phaser.Display.Align.In.TopCenter(this.title,this.popup,0,7)},n.createTargetItems=function(){var e=this.scene.world.getPixelRatio(),t=this.scene.make.image({key:Hb,frame:Zb.TEXT_COLLECT});t.setWorldSize(t.width/e,t.height/e);var n=this.scene.make.image({key:Hb,frame:Zb.WOOD_PANEL});n.setWorldSize(200,37),this.popup.add([t,n]),Phaser.Display.Align.In.Center(t,this.popup,0,-155),Phaser.Display.Align.In.Center(n,this.popup,0,-125)},n.drawTargetItems=function(){var e,t,n=this.scene.storage.getState(),i=ol(n),a=vf[i];a||(a=vf[vf.length-1]);var s=this.scene.make.tilemap({key:a.key}).properties;if(s&&(0,Tf.isArray)(s)&&!(s.length<2))for(var r=s[0].value,o=gf()(e=gf()(t=gf()(r).call(r,"{",'{"')).call(t,", ",', "')).call(e,":",'":'),c=JSON.parse(o),l=q()(c),h=this.calcPosition(l.length),u=0;u<l.length;u++){var d=l[u],p=hv[d],g=c[d],f=this.targetData[u];f||(f=this.spawnTargetItem(p,g));var m=f,v=m.container,E=m.text,S=m.gem;v.setVisible(!0),E.setText("x"+g),S.setFrame(p),this.targetData.push(f),Phaser.Display.Align.In.Center(v,this.popup,h[u],-130)}},n.spawnTargetItem=function(e,t){var n=this.scene.make.container({}),i=this.scene.make.image({key:Kb,frame:e});i.setWorldSize(15,15);var a=this.scene.make.bitmapText({font:Xa.Z.PRIMARY_LIGHT.KEY,size:this.scene.fontSize(24),origin:{x:.5,y:.5},text:"x"+t});return n.add([i,a]),Phaser.Display.Align.In.Center(a,n,0,15),this.popup.add(n),{container:n,gem:i,text:a}},n.calcPosition=function(e){for(var t=[],n=150/(e+1),i=n*(e-1)/2,a=0;a<e;a++)t.push(n*a-i);return t},n.createBoard=function(){var e=this.scene.make.image({key:Vb,frame:Wb.BOARD});e.setWorldSize(200,184),this.popup.add(e),Phaser.Display.Align.In.Center(e,this.popup,0,-12),this.initCellBoard()},n.initCellBoard=function(){for(var e=0;e<qb.rows;e++){this.boardCellData[e]=[];for(var t=0;t<qb.cols;t++){var n=20*t-86.5+1.65*t,i=19*e-92+1*e,a=jb.GEM_TRANSPARENT,s=this.spawnCellBoard(a,n,i);this.boardCellData[e].push(s)}}},n.updateCellBoard=function(){var e=this.scene.storage.getState(),t=sl(e).data.fen;if(t){var n=t.split("l")[0];this.drawBoardByFen(n)}else this.drawBoardByMap()},n.resetTarget=function(){for(var e=0;e<this.targetData.length;e++){var t;null==(t=this.targetData[e])||null==(t=t.container)||t.setVisible(!1)}},n.resetCellBoard=function(){for(var e=0;e<qb.rows;e++)for(var t=0;t<qb.cols;t++){this.boardCellData[e][t].setFrame(jb.GEM_TRANSPARENT)}},n.drawBoardByFen=function(e){for(var t=Du()(e).call(e).split("/"),n=0;n<t.length;n++)for(var i=t[n].split(","),a=0;a<i.length;a++){var s=i[a];if("x"!==s){var r=Rv(s);this.boardCellData[n][a].setFrame(r)}}},n.drawBoardByMap=function(){var e=this.scene.storage.getState(),t=ol(e),n=vf[t];n||(n=vf[vf.length-1]);var i=this.scene.make.tilemap({key:n.key}).layers;if((0,Tf.isArray)(i)){var a=i[0].data;if((0,Tf.isArray)(a))for(var s=0;s<a.length;s++)for(var r=a[s],o=0;o<r.length;o++){var c=r[o];if(!(c.index<0)){var l=hv[c.index-1];this.boardCellData[s][o].setFrame(l)}}}},n.spawnCellBoard=function(e,t,n){var i=this.scene.make.image({key:Kb,frame:e});return i.setWorldSize(20,19),this.popup.add(i),Phaser.Display.Align.In.Center(i,this.popup,t,n),i},n.createButtonPlay=function(){this.buttonPlay=new Fb(this.scene),this.buttonPlay.onClick=this.handlePlay.bind(this),this.popup.add(this.buttonPlay),Phaser.Display.Align.In.Center(this.buttonPlay,this.popup,0,111)},n.handlePlay=function(){var e=this;this.runCloseAnimation(),this.popupFadeOutAnimation.next((function(){e.scene.screen.close(e.name);var t=e.scene.storage.getState(),n=ol(t);e.scene.storage.dispatch(ph()),n>vf.length||(e.scene.analytics.levelStart(n,void 0,e.getLevelName(n)),e.scene.storage.dispatch(Ph()),e.scene.handleRetryLevel())}))},n.getLevelName=function(e){var t;return"journey_"+Ya()(t=GameCore.Utils.Number).call(t,e,4,"0")},n.runOpenAnimation=function(){var e;null!=(e=this.popupShowUpAnimation)&&null!=(e=e.tween)&&e.isPlaying()||(this.scene.audio.playSound(Ka.Z.POPUP_SHOW),this.runPopupEntrancesAnimation(0,300),this.runFadeInMaskAnimation(100,300))},n.runCloseAnimation=function(){var e;null!=(e=this.popupFadeOutAnimation)&&null!=(e=e.tween)&&e.isPlaying()||(this.runPopupExitsAnimation(50,200),this.runFadeOutMaskAnimation(0,200))},n.runPopupEntrancesAnimation=function(e,t){if(!this.popupShowUpAnimation){var n=this.popup.scale;this.popupShowUpAnimation=new is.Z({targets:[this.popup],delay:e,duration:t,props:{y:0,alpha:{start:1,from:1,to:1},scale:{start:0,from:0,to:n}}})}this.popupShowUpAnimation.play()},n.runPopupContentEntrancesAnimation=function(e,t){var n;null==(n=this.contentShowUpAnimation)||n.remove(),this.contentShowUpAnimation=new ns.Z({targets:this.contents.getChildren(),duration:t,delay:e,props:{alpha:{start:0,from:0,to:1}}}),this.contentShowUpAnimation.play()},n.runPopupExitsAnimation=function(e,t){var n=this;this.popupFadeOutAnimation||(this.popupFadeOutAnimation=new ts.Z({targets:[this.popup],delay:e,duration:t,props:{scale:0},ease:Phaser.Math.Easing.Back.In,onComplete:function(){n.popup.setY(0),n.scene.screen.close(n.name),n.popup.setVisible(!1)}})),this.popupFadeOutAnimation.play()},n.runFadeInMaskAnimation=function(e,t){if(!this.popupFadeInMaskAnimation){var n=this.background.alpha;this.popupFadeInMaskAnimation=new Eo.Z({targets:[this.background],delay:e,duration:t,props:{alpha:{start:0,from:0,to:n}}})}this.popupFadeInMaskAnimation.play()},n.runFadeOutMaskAnimation=function(e,t){if(!this.popupFadeOutMaskAnimation){var n=this.background.alpha;this.popupFadeOutMaskAnimation=new ts.Z({targets:[this.background],delay:e,duration:t,props:{alpha:{start:n,from:n,to:0}}})}this.popupFadeOutMaskAnimation.play()},t}(GameCore.Screen),$b=Wa.Z.DEFAULT,eO=$b.KEY,tO=$b.FRAME,nO=function(e){function t(t,n,i,a){var s;return(s=e.call(this,t,n,i,a)||this).scene=void 0,s.popup=void 0,s.title=void 0,s.contents=void 0,s.backgroundContent=void 0,s.textTargetScore=void 0,s.textScore=void 0,s.titleFrame=void 0,s.popupShowUpAnimation=void 0,s.popupFadeOutAnimation=void 0,s.contentShowUpAnimation=void 0,s.popupFadeInMaskAnimation=void 0,s.popupFadeOutMaskAnimation=void 0,s.handleClose=function(){s.runCloseAnimation()},s.scene=t,s.createPopup(),s.createTitle(),s.createContentBackground(),s.createTextTargetScore(),s.createTextScore(),s.addItem(),s.setDepth(za.Ks.POPUP),s.background.setAlpha(.5),s}(0,o.Z)(t,e);var n=t.prototype;return n.open=function(t){var n=this;e.prototype.open.call(this,t);var i=this.scene.targetMissionManager.getTargetValue();this.textScore.setText(""+i);var a=this.getData(["duration"])[0];this.runOpenAnimation(),this.scene.time.delayedCall(a,(function(){n.handleClose()}))},n.createContentBackground=function(){this.backgroundContent=this.scene.make.image({key:eO,frame:tO.POPUP_CONTENT_BACKGROUND}),this.backgroundContent.setWorldSize(263,135),this.popup.add(this.backgroundContent),Phaser.Display.Align.In.TopCenter(this.backgroundContent,this.popup,0,-24)},n.createTextTargetScore=function(){var e=this.scene.lang.Text;this.textTargetScore=this.scene.make.bitmapText({font:Xa.Z.PRIMARY.KEY,size:this.scene.fontSize(50),text:e.TARGET_SCORE,origin:{x:.5,y:.5}}),this.popup.add(this.textTargetScore),Phaser.Display.Align.In.Center(this.textTargetScore,this.backgroundContent,0,-30)},n.createTextScore=function(){this.textScore=this.scene.make.bitmapText({font:Xa.Z.PRIMARY.KEY,size:this.scene.fontSize(80),text:"0",origin:{x:.5,y:.5}}),this.popup.add(this.textScore),Phaser.Display.Align.In.Center(this.textScore,this.backgroundContent,0,15)},n.createPopup=function(){this.popup=new as.Z(this.scene,0,-19,290,218,{forceHeightTop:55}),this.add(this.popup),Phaser.Display.Align.In.Center(this.popup,this.zone)},n.createTitle=function(){this.title=this.scene.add.container();var e=this.scene.world.getPixelRatio();this.titleFrame=this.scene.make.image({key:eO,frame:tO.TEXT_MISSION});var t=this.titleFrame,n=t.width,i=t.height;this.titleFrame.setWorldSize(n/e,i/e),this.title.add([this.titleFrame]),this.popup.add(this.title),Phaser.Display.Align.In.Center(this.titleFrame,this.title,0,-10),Phaser.Display.Align.In.TopCenter(this.title,this.popup)},n.addItem=function(){this.popup.add([this.title]),this.contents=this.scene.add.group(),this.contents.addMultiple([])},n.runOpenAnimation=function(){var e;null!=(e=this.popupShowUpAnimation)&&null!=(e=e.tween)&&e.isPlaying()||(this.scene.audio.playSound(Ka.Z.POPUP_SHOW),this.runPopupEntrancesAnimation(0,300),this.runFadeInMaskAnimation(100,300),this.runPopupContentEntrancesAnimation(200,300))},n.runCloseAnimation=function(){var e;null!=(e=this.popupFadeOutAnimation)&&null!=(e=e.tween)&&e.isPlaying()||(this.runPopupExitsAnimation(50,200),this.runFadeOutMaskAnimation(0,200))},n.runPopupEntrancesAnimation=function(e,t){if(!this.popupShowUpAnimation){var n=this.popup.scale;this.popupShowUpAnimation=new is.Z({targets:[this.popup],delay:e,duration:t,props:{y:0,alpha:{start:1,from:1,to:1},scale:{start:0,from:0,to:n}}})}this.popupShowUpAnimation.play()},n.runPopupContentEntrancesAnimation=function(e,t){var n;null==(n=this.contentShowUpAnimation)||n.remove(),this.contentShowUpAnimation=new ns.Z({targets:this.contents.getChildren(),duration:t,delay:e,props:{alpha:{start:0,from:0,to:1}}}),this.contentShowUpAnimation.play()},n.runPopupExitsAnimation=function(e,t){var n=this;this.popupFadeOutAnimation||(this.popupFadeOutAnimation=new ts.Z({targets:[this.popup],delay:e,duration:t,props:{scale:0},onComplete:function(){n.popup.setY(0),n.scene.screen.close(n.name),n.scene.startGameAfterCollectionItemsScreenClose()}})),this.popupFadeOutAnimation.play()},n.runFadeInMaskAnimation=function(e,t){if(!this.popupFadeInMaskAnimation){var n=this.background.alpha;this.popupFadeInMaskAnimation=new Eo.Z({targets:[this.background],delay:e,duration:t,props:{alpha:{start:0,from:0,to:n}}})}this.popupFadeInMaskAnimation.play()},n.runFadeOutMaskAnimation=function(e,t){if(!this.popupFadeOutMaskAnimation){var n=this.background.alpha;this.popupFadeOutMaskAnimation=new ts.Z({targets:[this.background],delay:e,duration:t,props:{alpha:{start:n,from:n,to:0}}})}this.popupFadeOutMaskAnimation.play()},t}(GameCore.Screen),iO=nO,aO=Wa.Z.DEFAULT,sO=aO.KEY,rO=aO.FRAME,oO=function(){function e(e){this.scene=void 0,this.x=void 0,this.y=void 0,this.background=void 0,this.text=void 0,this.tweenStep1=void 0,this.tweenStep2=void 0,this.tweenStep3=void 0,this.tweenStep4=void 0,this.tweenStep5=void 0,this.tweenStep6=void 0,this.tweenTextStep1=void 0,this.tweenTextStep2=void 0,this.tweenTextStep5=void 0,this.tweenTextStep6=void 0,this.widthText=void 0,this.scene=e,this.init()}var t=e.prototype;return t.init=function(){this.createBackground(),this.createText(),this.createTween()},t.createBackground=function(){this.background=this.scene.make.image({key:sO,frame:rO.BG_STREAK}),this.background.setWorldSize(106,38),this.background.setVisible(!1)},t.createText=function(){this.text=this.scene.make.bitmapText({font:Xa.Z.PRIMARY_LIGHT.KEY,size:this.scene.fontSize(50),origin:{x:.5,y:.5},text:"3X "+this.scene.lang.Text.STREAK+"!"}),this.text.setVisible(!1)},t.createTween=function(){var e=this,t=this.background.scale+.3;this.tweenStep1=this.scene.tweens.add({targets:[this.background],duration:100,ease:Phaser.Math.Easing.Sine.InOut,props:{scale:{start:0,from:0,to:t}},paused:!0,onComplete:function(){e.tweenStep2.play()}}),this.tweenTextStep1=this.scene.tweens.add({targets:[this.text],duration:200,ease:Phaser.Math.Easing.Sine.InOut,props:{scale:{start:.3,from:.3,to:1.4}},paused:!0,onComplete:function(){e.tweenTextStep2.play()}}),this.tweenStep2=this.scene.tweens.add({targets:[this.background],duration:200,ease:Phaser.Math.Easing.Sine.InOut,props:{scale:{from:t,to:t-.3}},paused:!0,onComplete:function(){e.tweenStep3.play()}}),this.tweenTextStep2=this.scene.tweens.add({targets:[this.text],duration:100,ease:Phaser.Math.Easing.Sine.InOut,props:{scale:{from:1.4,to:1}},paused:!0,onComplete:function(){e.tweenTextStep5.play()}}),this.tweenStep3=this.scene.tweens.addCounter({from:0,to:20,paused:!0,duration:533,ease:Phaser.Math.Easing.Sine.InOut,onUpdate:function(t){var n=t.getValue();e.text.setPosition(e.x,e.y-n),e.background.setPosition(e.x,e.y-n)},onComplete:function(){e.y=e.y-20,e.tweenStep4.play()}}),this.tweenStep4=this.scene.tweens.addCounter({from:0,to:5,paused:!0,duration:333,ease:Phaser.Math.Easing.Sine.InOut,onUpdate:function(t){var n=t.getValue();e.text.setPosition(e.x,e.y+n),e.background.setPosition(e.x,e.y+n)},onComplete:function(){e.y=e.y+5,e.tweenStep5.play(),e.tweenTextStep5.play()}}),this.tweenStep5=this.scene.tweens.add({targets:[this.background],delay:567,duration:67,ease:Phaser.Math.Easing.Sine.InOut,props:{scale:{from:t-.3,to:t}},paused:!0,onComplete:function(){e.tweenStep6.play()}}),this.tweenTextStep5=this.scene.tweens.add({targets:[this.text],delay:467,duration:133,ease:Phaser.Math.Easing.Sine.InOut,props:{scale:{from:1,to:.8}},paused:!0,onComplete:function(){e.tweenTextStep6.play()}}),this.tweenStep6=this.scene.tweens.add({targets:[this.background],duration:200,ease:Phaser.Math.Easing.Sine.InOut,props:{scale:{from:t,to:0}},paused:!0,onComplete:function(){e.text.setVisible(!1),e.background.setVisible(!1),e.text.setScale(0),e.background.setScale(0)}}),this.tweenTextStep6=this.scene.tweens.add({targets:[this.text],duration:167,ease:Phaser.Math.Easing.Sine.InOut,props:{scale:{from:.8,to:1.7},alpha:{from:1,to:0}},paused:!0,onComplete:function(){e.text.setVisible(!1),e.text.setScale(0)}})},t.playAnim=function(e,t){(this.tweenTextStep1.isPlaying()||this.tweenTextStep2.isPlaying()||this.tweenTextStep5.isPlaying()||this.tweenTextStep6.isPlaying())&&(this.tweenTextStep1.stop(),this.tweenTextStep2.stop(),this.tweenTextStep5.stop(),this.tweenTextStep6.stop(),this.text.setScale(0),this.text.setVisible(!1),this.background.setScale(0),this.background.setVisible(!1)),this.x=e,this.y=t,this.text.setScale(0).setAlpha(1),this.background.setScale(0);var n=e,i=this.scene.gameZone.width;n=e-this.widthText/2<0?this.widthText/2+5:e+this.widthText/2>i?i-this.widthText/2-5:e,this.text.setPosition(n,t),this.background.setPosition(n,t),this.text.setVisible(!0),this.tweenTextStep1.play()},t.setTextCombo=function(e){this.text.setText(e+"X "+this.scene.lang.Text.COMBO),this.text.setScale(1),this.widthText=this.text.width+50},t.setTextStreak=function(e){this.text.setText(e+"X  "+this.scene.lang.Text.STREAK),this.text.setScale(1),this.widthText=this.text.width+50},t.setBgFrame=function(e){this.background.setFrame(e)},e}(),cO=function(){function e(e){this.scene=void 0,this.streakBreak=void 0,this.scene=e}return e.prototype.init=function(){this.streakBreak=new oO(this.scene)},e}(),lO=Wa.Z.DEFAULT,hO=lO.KEY,uO=lO.FRAME,dO=function(e){function t(t,n,i,a){var s;return(s=e.call(this,t,n,i,a)||this).popup=void 0,s.title=void 0,s.contents=void 0,s.backgroundContent=void 0,s.textTargetScore=void 0,s.popupShowUpAnimation=void 0,s.popupFadeOutAnimation=void 0,s.contentShowUpAnimation=void 0,s.popupFadeInMaskAnimation=void 0,s.popupFadeOutMaskAnimation=void 0,s.handleClose=function(){s.runCloseAnimation()},s.startOver=function(){(0,s.getData(["onConfirm"])[0])(),s.handleClose()},s.createPopup(),s.createTitle(),s.createContentBackground(),s.createTextTargetScore(),s.createButtons(),s.addItem(),s.setDepth(za.Ks.POPUP),s.background.setAlpha(.5),s}(0,o.Z)(t,e);var n=t.prototype;return n.open=function(t){e.prototype.open.call(this,t),this.runOpenAnimation()},n.createContentBackground=function(){this.backgroundContent=this.scene.make.image({key:hO,frame:uO.POPUP_CONTENT_BACKGROUND}),this.backgroundContent.setWorldSize(263,135),this.popup.add(this.backgroundContent),Phaser.Display.Align.In.TopCenter(this.backgroundContent,this.popup,0,-24)},n.createTextTargetScore=function(){"ar"==this.scene.facebook.getLocale()?(this.textTargetScore=this.scene.make.text({text:this.scene.lang.Text.MESS_START_OVER,style:{fontFamily:Xa.Z.FONT_FAMILY,fontSize:this.scene.fontSize(40)+"px"},origin:{x:.5,y:.5}}),this.textTargetScore.setTint(7551258),this.textTargetScore.setHighQuality(),this.textTargetScore.setAlign("center")):(this.textTargetScore=this.scene.make.bitmapText({font:Xa.Z.PRIMARY.KEY,size:this.scene.fontSize(40),text:this.scene.lang.Text.MESS_START_OVER,origin:{x:.5,y:.5}}),this.textTargetScore.setCenterAlign()),this.popup.add(this.textTargetScore),Phaser.Display.Align.In.Center(this.textTargetScore,this.backgroundContent,0,-30)},n.createButtons=function(){var e,t,n=new ja.Z(this.scene,hO,uO.BUTTON_GREEN_BIG,89,41),i=new ja.Z(this.scene,hO,uO.BUTTON_DARK_BLUE_BIG,89,41);"ar"==this.scene.facebook.getLocale()?(e=this.scene.make.text({text:this.scene.lang.Text.OK,style:{fontFamily:Xa.Z.FONT_FAMILY,fontSize:this.scene.fontSize(40)+"px"},origin:{x:.5,y:.5}}),t=this.scene.make.text({text:this.scene.lang.Text.CANCEL,style:{fontFamily:Xa.Z.FONT_FAMILY,fontSize:this.scene.fontSize(40)+"px"},origin:{x:.5,y:.5}}),e.setTint(15651762).setHighQuality(),t.setTint(15651762).setHighQuality()):(e=this.scene.make.bitmapText({font:Xa.Z.PRIMARY_LIGHT.KEY,size:this.scene.fontSize(40),text:this.scene.lang.Text.OK,origin:{x:.5,y:.5}}),t=this.scene.make.bitmapText({font:Xa.Z.PRIMARY_LIGHT.KEY,size:this.scene.fontSize(40),text:this.scene.lang.Text.CANCEL,origin:{x:.5,y:.5}})),n.add(e),i.add(t),this.popup.add([n,i]),n.onClick=this.startOver,i.onClick=this.handleClose,Phaser.Display.Align.In.Center(n,this.backgroundContent,-60,30),Phaser.Display.Align.In.Center(i,this.backgroundContent,60,30)},n.createPopup=function(){this.popup=new as.Z(this.scene,0,-19,290,218,{forceHeightTop:55}),this.add(this.popup),Phaser.Display.Align.In.Center(this.popup,this.zone)},n.createTitle=function(){if(this.title=this.scene.add.container(),"ar"==this.scene.facebook.getLocale()){var e=this.scene.make.text({text:this.scene.lang.Text.CONFIRM_START_OVER,style:{fontFamily:Xa.Z.FONT_FAMILY,fontSize:this.scene.fontSize(38)+"px"},origin:{x:.5,y:.5}});e.setTint(15651762),e.setHighQuality(),this.title.add([e]),Phaser.Display.Align.In.Center(e,this.title,0,-5)}else{var t=this.scene.make.bitmapText({font:Xa.Z.PRIMARY_LIGHT.KEY,size:this.scene.fontSize(38),text:this.scene.lang.Text.CONFIRM_START_OVER,origin:{x:.5,y:.5}});this.title.add([t]),Phaser.Display.Align.In.Center(t,this.title,0,-5)}this.popup.add(this.title),Phaser.Display.Align.In.TopCenter(this.title,this.popup)},n.addItem=function(){this.popup.add([this.title]),this.contents=this.scene.add.group(),this.contents.addMultiple([])},n.runOpenAnimation=function(){var e;null!=(e=this.popupShowUpAnimation)&&null!=(e=e.tween)&&e.isPlaying()||(this.scene.audio.playSound(Ka.Z.POPUP_SHOW),this.runPopupEntrancesAnimation(0,300),this.runFadeInMaskAnimation(100,300),this.runPopupContentEntrancesAnimation(200,300))},n.runCloseAnimation=function(){var e;null!=(e=this.popupFadeOutAnimation)&&null!=(e=e.tween)&&e.isPlaying()||(this.runPopupExitsAnimation(50,200),this.runFadeOutMaskAnimation(0,200))},n.runPopupEntrancesAnimation=function(e,t){if(!this.popupShowUpAnimation){var n=this.popup.scale;this.popupShowUpAnimation=new is.Z({targets:[this.popup],delay:e,duration:t,props:{y:0,alpha:{start:1,from:1,to:1},scale:{start:0,from:0,to:n}}})}this.popupShowUpAnimation.play()},n.runPopupContentEntrancesAnimation=function(e,t){var n;null==(n=this.contentShowUpAnimation)||n.remove(),this.contentShowUpAnimation=new ns.Z({targets:this.contents.getChildren(),duration:t,delay:e,props:{alpha:{start:0,from:0,to:1}}}),this.contentShowUpAnimation.play()},n.runPopupExitsAnimation=function(e,t){var n=this;this.popupFadeOutAnimation||(this.popupFadeOutAnimation=new ts.Z({targets:[this.popup],delay:e,duration:t,props:{scale:0},onComplete:function(){n.popup.setY(0),n.scene.screen.close(n.name)}})),this.popupFadeOutAnimation.play()},n.runFadeInMaskAnimation=function(e,t){if(!this.popupFadeInMaskAnimation){var n=this.background.alpha;this.popupFadeInMaskAnimation=new Eo.Z({targets:[this.background],delay:e,duration:t,props:{alpha:{start:0,from:0,to:n}}})}this.popupFadeInMaskAnimation.play()},n.runFadeOutMaskAnimation=function(e,t){if(!this.popupFadeOutMaskAnimation){var n=this.background.alpha;this.popupFadeOutMaskAnimation=new ts.Z({targets:[this.background],delay:e,duration:t,props:{alpha:{start:n,from:n,to:0}}})}this.popupFadeOutMaskAnimation.play()},t}(GameCore.Screen),pO=dO,gO=n(438),fO=function(){function e(){}return e.create=function(e,t,n){var i;switch(n.type){case Wf:case zf:case Kf:i=new AI(e,t,n);break;case jf:case Xf:case Jf:case qf:i=new TI(e,t,n);break;case Qf:case $f:case em:i=new CI(e,t,n);break;case nm:i=new OI(e,t,n);break;case im:i=new DI(e,t,n);break;case lm:i=new NI(e,t,n);break;case am:i=new _I(e,t,n);break;case sm:case rm:case om:case cm:i=new RI(e,t,n);break;case tm:i=new xI(e,t,n);break;default:i=new CI(e,t,n)}return i},e}(),mO=fO,vO=Wa.Z.GAMEPLAY_32,EO=vO.KEY,SO=vO.FRAME,AO=gO.Z.Configs,yO=AO.Gameplay,TO=AO.Match,IO=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n.tweenToEnableMaxFps=void 0,n.cellSize=void 0,n.canCaptureLines=void 0,n.allPieces=[],n.allPiecesGroup=[],n.piecesActive=[],n.positionPiece=void 0,n.listPieceMap=[],n.amountPieceContainGem=0,n.hasPieceContainGem=void 0,n.segmentAmountPiece1Min=0,n.segmentAmountPiece1Max=0,n.segmentAmountPiece1Cur=0,n.segmentAmountPiece5Min=0,n.segmentAmountPiece5Max=0,n.segmentAmountPiece5Cur=0,n.segmentAvgScore=0,n.segmentTotalPieceScore=0,n.segmentTotalPiece=0,n.segmentTotalScore=0,n.segmentPieceDistancePerGem=0,n.segmentPieceRandomGem=!1,n.scene=t,n.canCaptureLines={isCapture:!1,direction:"",minLine:5},n.setSizeAndPositionPiece(),t.add.existing((0,Ba.Z)(n)),n}(0,o.Z)(t,e);var n=t.prototype;return n.setSizeAndPositionPiece=function(){this.scene.world.isLandscape()?this.setSize(101,300):this.setSize(375,140);var e=this.scene.gameZone,t=e.width,n=(e.height/2-176-27+100)/-2;this.positionPiece=[{x:-t/3,y:n},{x:0,y:n},{x:t/3,y:n}]},n.init=function(){this.initCellSize(),this.createAllPieces(),this.createAllPiecesGroup(),this.createTweenToEnableMaxFps(),this.addDebuggerBtnRandomPieces()},n.registerEvents=function(){},n.handleResize=function(){this.initCellSize(),this.resetAllPieces2();for(var e=0;e<this.piecesActive.length;e++){var t=this.allPieces[this.piecesActive[e].position].piece,n=this.positionPiece[e],i=n.x,a=n.y;t.updatePosition(i,a),t.updateWrapPiecePosition()}},n.resetAllPieces2=function(){for(var e=0;e<this.allPieces.length;e++){var t=this.allPieces[e].piece;t.resetPiece(),t.updateSize(),t.listenEvents()}},n.initCellSize=function(){var e=this.scene.layoutManager.objects.main;this.scene.world.isLandscape()?this.cellSize=35*e.board.cellSize/100:this.cellSize=41*e.board.cellSize/100},n.createTweenToEnableMaxFps=function(){this.tweenToEnableMaxFps=this.scene.add.tween({targets:[],duration:300,loop:-1,paused:!0})},n.playTweenToEnableMaxFps=function(){this.tweenToEnableMaxFps.play()},n.stopTweenToEnableMaxFps=function(){this.tweenToEnableMaxFps.stop()},n.getDirectionsByType=function(e){if([Qf,$f,em].some((function(t){return t===e})))return[];var t=[];switch(e){case Wf:case zf:case Kf:t=[Rf,Of,Pf,wf];break;case jf:case Xf:case Jf:case qf:t=[Cf,bf];break;case nm:t=[Rf,Of,Pf,wf];break;case tm:t=[xf,kf,_f,Lf];break;case im:case lm:t=[Rf,Of,Pf,wf];break;case am:t=[];break;case sm:case rm:case om:case cm:t=[Of,Pf]}return t},n.createAllPieces=function(){for(var e=this.cellSize,t=[],n=0;n<hm.length;n++){var i=this.getDirectionsByType(hm[n]);if(i.length<=0)t.push({type:hm[n]});else{for(var a=0;a<i.length;a++)t.push({type:hm[n],direction:i[a]});if(Wf===hm[n])for(var r=0;r<i.length;r++)t.push({type:hm[n],direction:i[r],isReverse:!0})}}for(var o=0;o<t.length;o++){var c=(0,s.Z)({},t[o],{texture:EO,frame:SO.GEM,x:Math.floor(this.x),y:Math.floor(this.y),width:Math.floor(e/2),height:Math.floor(e/2),cellLength:Math.floor(e/2),parentHeight:this.height,wrap:{x:Math.floor(this.x),y:Math.floor(this.y),width:Math.floor(e/2),height:Math.floor(e/2)}}),l=mO.create(this.scene,this,c);this.add(l),l.hide(),this.allPieces.push({piece:l,isUsed:!1})}},n.createAllPiecesGroup=function(){for(var e=0;e<this.allPieces.length;e++){var t=this.allPieces[e].piece;this.allPiecesGroup[t.type]||(this.allPiecesGroup[t.type]=[]),this.allPiecesGroup[t.type].push(e)}},n.randomPieces=function(){var e=this;this.scene.game.updateFps(yu.Z.max);for(var t=this.buildPieceRates(!1),n=[],i=function(){var i=Math.floor(Math.random()*t.length),a=t[i];if(!e.allPiecesGroup[a])return 1;var s=Math.floor(Math.random()*e.allPiecesGroup[a].length),r=e.allPiecesGroup[a][s],o=[Jf,qf].some((function(e){return e===a}));if(e.canCaptureLines.isCapture&&o){for(var c=0;c<e.allPiecesGroup[a].length;c++){var l=e.allPiecesGroup[a][c],h=e.allPieces[l].piece;if(h&&h.direction===e.canCaptureLines.direction){r=l;break}}t=e.buildPieceRates(!1)}n.some((function(e){return e.index===r}))||n.push({index:r,type:a})};n.length<3;)i();for(var a=[],s=0;s<n.length;s++){var r=n[s].index,o=this.allPieces[r].piece;a.push({position:r,texture:EO,frame:SO.GEM,type:o.type,direction:o.direction,isReverse:o.isReverse})}this.piecesActive=a},n.buildPieceRates=function(e){void 0===e&&(e=!0);for(var t=[],n=0;n<um.length;n++)t.push((0,s.Z)({},um[n]));var i=this.scene.layoutManager.objects.main;if(e){var a=i.board.dataBoard,r=5;if(this.canCaptureLines=i.board.canCaptureLines(a,r),this.canCaptureLines.isCapture)for(var o=0;o<t.length;o++)t[o].type===qf&&(t[o].rate=8);else if(r=4,this.canCaptureLines=i.board.canCaptureLines(a,r),this.canCaptureLines.isCapture)for(var c=0;c<t.length;c++)t[c].type===Jf&&(t[c].rate=8)}for(var l=[],h=0;h<t.length;h++)for(var u=t[h],d=u.type,p=u.rate,g=0;g<p;g++)l.push(d);return l},n.drawPieces=function(){for(var e=0;e<this.piecesActive.length;e++){var t=this.piecesActive[e],n=t.position,i=t.fenPiece,a=this.allPieces[n].piece,s=this.positionPiece[e],r=s.x,o=s.y;if(i){var c=this.convertFenPiecesToData(i);c&&a.updateDataPiece(c)}else{if(0===this.listPieceMap.length)if(this.isPieceContainGem()){var l=this.getRandomPieceData(a.data);l&&a.updateDataPiece(l)}}a.updatePosition(r,o),a.updateWrapPiecePosition(),a.setIndex(e),a.drawPiece(),this.allPieces[n]={piece:a,isUsed:!0}}},n.isPieceContainGem=function(){if(1===Phaser.Math.Between(0,1)&&!this.hasPieceContainGem)return this.amountPieceContainGem++,this.hasPieceContainGem=!0,!0;if(this.amountPieceContainGem<yO.RatePieceContainGem)return this.amountPieceContainGem++,!1;if(this.amountPieceContainGem>=yO.RatePieceContainGem){var e=this.hasPieceContainGem;return this.amountPieceContainGem=0,this.hasPieceContainGem=!1,!e}return!1},n.convertFenPiecesToData=function(e){if(!e)return null;var t=e.split("/");if(0===t.length)return null;for(var n=[],i=0;i<t.length;i++){var a=t[i].split(",");n[i]=[];for(var s=0;s<a.length;s++){var r=Rv(a[s]);"null"!==a[s]&&"x"!==a[s]||(r=null),n[i].push({x:i,y:s,texture:r})}}return n},n.countDataGem=function(e){for(var t=0,n=0;n<e.length;n++)e[n].texture&&t++;return t},n.getRandomPieceData=function(e){var t=this.scene.layoutManager.objects.header.collectItems.getTargetKeys();if(!t||0===t.length)return null;for(var n=0,i=e.length,a=e[0].length,s=0;s<i;s++)for(var r=0;r<a;r++){var o=this.countDataGem(e[s]);if(e[s][r].texture&&(Phaser.Math.Between(0,1)||n||r+1===o)){var c=SO.GEM;if(n<yO.MaxGemInPiece)c=t[Phaser.Math.Between(0,t.length-1)];e[s][r]={x:s,y:r,texture:c},n++}}return e},n.removeActivePiece=function(e){this.piecesActive[e].used=!0},n.existPiecesActive=function(){var e,t=Ae()(e=this.piecesActive).call(e,(function(e){return!e.used}));return t&&t.length>0},n.showNewPieces=function(){this.resetAllPieces(),this.listPieceMap.length>0?this.showListPieceMap():(this.randomPieces(),this.setActivePieces(),this.drawPieces())},n.setActivePieces=function(){for(var e=this.scene.layoutManager.objects.main.board.dataBoard,t=0;t<this.piecesActive.length;t++){var n=this.piecesActive[t].position,i=this.allPieces[n].piece,a=Iv(e,i);i.setCanMove(a)}},n.getPiecesByFen=function(e){var t=[],n=e.split(" ");if(n.length<2)throw new Error("Invalid fen");for(var i=Fa()(n).call(n,2),a=0;a<i.length;a++){var s,r;if("l"!==Du()(s=i[a]).call(s)){var o=xv(Du()(r=i[a]).call(r));t.push(o)}}return t},n.getFenByPieces=function(){for(var e="l",t=0;t<this.piecesActive.length;t++){var n=this.piecesActive[t],i=n.type,a=n.direction,s=n.isReverse,r=n.used,o=n.position;if(!r){var c=Pv(i);a&&""!==a&&(c+="-"+Pv(a)),s&&(c+="-r");var l=this.allPieces[o].piece;e+=" "+c+"|"+this.getFenDataPiece(l)}}return e},n.getFenDataPiece=function(e){for(var t=e.data,n=t.length,i=t[0].length,a="",s=0;s<n;s++){for(var r="",o=0;o<i;o++)r+=","+Pv(t[s][o].texture);a+="/"+r.substring(1)}return a.substring(1)},n.clearPieces=function(){for(var e=0;e<this.piecesActive.length;e++){var t=this.piecesActive[e].position;this.allPieces[t].isUsed=!1,this.allPieces[t].piece.hide()}this.piecesActive=[],this.listPieceMap=[]},n.resetAllPieces=function(){for(var e=0;e<this.allPieces.length;e++)this.allPieces[e].isUsed=!1,this.allPieces[e].piece.reset()},n.showAvailablePieces=function(e){if(e&&!(e.length<=0)){this.resetAllPieces();for(var t=[],n=0;n<e.length;n++){for(var i=e[n],a=i.type,s=i.direction,r=i.isReverse,o=i.frame,c=!1,l=0;l<this.allPieces.length;l++){var h=this.allPieces[l],u=h.piece,d=h.isUsed;if(a===u.type&&s===u.direction&&r===u.isReverse){if(d){c=!0;continue}c=!1,t.push({position:l,texture:EO,frame:o,type:u.type,direction:u.direction,isReverse:u.isReverse,fenPiece:e[n].fenPiece}),this.allPieces[l].isUsed=!0;break}}if(c){var p=this.spawnPiece(a,s,r),g=p.piece,f=p.index;t.push({position:f,texture:EO,frame:o,type:g.type,direction:g.direction,isReverse:g.isReverse,fenPiece:e[n].fenPiece})}}this.piecesActive=t,this.setActivePieces(),this.drawPieces()}},n.spawnPiece=function(e,t,n){var i=this.cellSize,a={type:e,direction:t,isReverse:n,texture:EO,frame:SO.GEM,x:Math.floor(this.x),y:Math.floor(this.y),width:Math.floor(i/2),height:Math.floor(i/2),cellLength:Math.floor(i/2),parentHeight:this.height,wrap:{x:Math.floor(this.x),y:Math.floor(this.y),width:Math.floor(i/2),height:Math.floor(i/2)}},s=mO.create(this.scene,this,a);return s.hide(),this.allPieces.push({piece:s,isUsed:!0}),this.add(s),{piece:s,index:this.allPieces.length-1}},n.showListPieceMap=function(){var e;this.piecesActive=Fa()(e=this.listPieceMap).call(e,0,3),this.showAvailablePieces(this.piecesActive);var t=this.scene.layoutManager.objects.footer;if(t.textExist){var n=this.listPieceMap.length<=0?"Done":"Exits";t.textExist.setText(n)}},n.validItemsPieceMap=function(e){for(var t,n=!0,i=T()(t=[]).call(t,e),a=function(){var e=i.shift(),t=Ae()(i).call(i,(function(t){return t.type===(null==e?void 0:e.type)&&t.direction===e.direction&&t.isReverse===e.isReverse}));t&&t.length>0&&(n=!1)};i.length>1;)a();return n},n.getPieceDataByType=function(e){return uv[e]},n.addItemPieceMap=function(e){if(e.properties){var t=this.getFenPieceForPropertiesPieceMap(e);t&&(e=(0,s.Z)({},e,{fenPiece:t}))}this.listPieceMap.push(e)},n.getFenPieceForPropertiesPieceMap=function(e){var t,n;if(!e.properties)return"";var i="",a=null==(t=Ae()(n=this.allPieces).call(n,(function(t){var n=t.piece;return n.direction===e.direction&&n.isReverse===e.isReverse&&n.type===e.type}))[0])?void 0:t.piece,s=e.properties[0].value.split(","),r=e.properties[1].value.split(","),o=0;if(!a)return i;for(var c=a.data,l=c.length,h=c[0].length,u=0;u<l;u++){for(var d="",p=0;p<h;p++){var g=c[u][p].texture,f=g,m=wa()(r).call(r,String(o));g&&(-1!==m&&(f=hv[s[m]]),o++);var v=null;f&&(v=Pv(f)),d+=","+v}i+="/"+d.substring(1)}return i.substring(1)},n.start=function(){0!==this.listPieceMap.length?this.showListPieceMap():this.showNewPieces()},n.getListPieceMap=function(){return this.listPieceMap},n.setListPieceMap=function(e){var t;this.listPieceMap=T()(t=[]).call(t,e)},n.buildPiecesByMap=function(){var e=this.scene.mapManager.getTileMap().layers[0].properties;if(e&&!(e.length<=0))for(var t=0;t<e.length;t++){var n=e[t].value;if(n){var i=n.avgScore,a=n.score,s=n.pieceDistancePerGem,r=n.piece1,o=n.piece5;r=r.replace("min",'"min"').replace("max",'"max"'),o=o.replace("min",'"min"').replace("max",'"max"');var c=JSON.parse(r),l=JSON.parse(o);this.segmentAvgScore=i,this.segmentAmountPiece1Min=c.min,this.segmentAmountPiece1Max=c.max,this.segmentAmountPiece5Min=l.min,this.segmentAmountPiece5Max=l.max,this.segmentTotalScore=a,this.segmentPieceDistancePerGem=s,this.segmentTotalPieceScore=0,this.segmentTotalPiece=0,this.listPieceMap=[],this.buildObjectPieces()}}},n.buildObjectPieces=function(){for(;this.checkAverageScore();)this.buildObjectPiece()},n.checkAverageScore=function(){return 0===this.segmentTotalPiece||0===this.segmentTotalPieceScore||!(this.segmentTotalPiece>TO.PieceRandoms.maxPiece)&&!(this.segmentTotalPieceScore/this.segmentTotalPiece<=this.segmentAvgScore+TO.PieceRandoms.measureError&&this.segmentTotalPieceScore/this.segmentTotalPiece>=this.segmentAvgScore-TO.PieceRandoms.measureError&&this.segmentTotalPieceScore>=this.segmentTotalScore)},n.buildObjectPiece=function(){var e=this.getPieceByAvgScore();if(e)if(this.checkPieceMaxAmountConfig(e)){var t="";if(Math.floor((this.segmentTotalPiece-1)/3)%this.segmentPieceDistancePerGem===0){var n=Phaser.Math.Between(0,1);if((this.segmentTotalPiece-1)%3===0&&1===this.segmentPieceDistancePerGem&&(this.segmentPieceRandomGem=!1),n&&!this.segmentPieceRandomGem||!this.segmentPieceRandomGem&&this.segmentTotalPiece%3===2){var i=this.getRandomPieceData(e.data);i&&(e.updateDataPiece(i),t=this.getFenDataPiece(e)),this.segmentPieceRandomGem=!0}}else this.segmentPieceRandomGem=!1;this.listPieceMap.push({type:e.type,direction:e.direction,isReverse:e.isReverse,fenPiece:t})}else this.buildObjectPiece()},n.checkPieceMaxAmountConfig=function(e){var t=e.getScore();switch(t){case 1:if(this.segmentAmountPiece1Max<=this.segmentAmountPiece1Cur)return!1;this.segmentAmountPiece1Cur++;break;case 5:if(this.segmentAmountPiece5Max<=this.segmentAmountPiece5Cur)return!1;this.segmentAmountPiece5Cur++}return this.segmentTotalPiece++,this.segmentTotalPieceScore+=t,!0},n.getPieceByAvgScore=function(){var e=this;if(this.segmentTotalPieceScore<this.segmentTotalScore){var t=this.buildPieceRates(!1),n=t[Math.floor(Math.random()*t.length)];if(!this.allPiecesGroup[n])return null;var i=Math.floor(Math.random()*this.allPiecesGroup[n].length),a=this.allPiecesGroup[n][i];return this.allPieces[a].piece}if(this.segmentTotalPieceScore/this.segmentTotalPiece<=this.segmentAvgScore){var s,r=Ae()(s=this.allPieces).call(s,(function(t){return t.piece.getScore()<=e.segmentAvgScore}));return r&&0!==r.length?r[Phaser.Math.Between(0,r.length-1)].piece:null}if(this.segmentTotalPieceScore/this.segmentTotalPiece>this.segmentAvgScore){var o,c=Ae()(o=this.allPieces).call(o,(function(t){return t.piece.getScore()>e.segmentAvgScore}));return c&&0!==c.length?c[Phaser.Math.Between(0,c.length-1)].piece:null}return null},n.debuggerNextPieces=function(){for(var e=0;e<this.piecesActive.length;e++)this.removeActivePiece(e);for(var t=0;t<this.allPieces.length;t++)this.allPieces[t].piece.wrapPiece.setVisible(!1);this.showNewPieces()},n.addDebuggerBtnRandomPieces=function(){var e=this;if(gO.Z.Utils.Valid.isDebugger())for(var t=[80,187.5,295],n=this.scene.gameZone.height,i=function(i){var a=new ja.Z(e.scene,EO,SO.GEM,50,30);e.add(a),a.onClick=function(){e.debuggerNewPieces(i)},a.setPosition(t[i],n)},a=0;a<3;a++)i(a)},n.debuggerNewPieces=function(e){this.removeActivePiece(e);var t=this.piecesActive[e],n=this.allPieces[t.position].piece;n.setVisible(!1);var i=Phaser.Math.Between(0,this.allPieces.length-1);this.piecesActive[e]={position:i,texture:EO,frame:SO.GEM,type:n.type,direction:n.direction,isReverse:n.isReverse};var a=this.piecesActive[e],s=a.position,r=a.fenPiece,o=this.allPieces[s].piece,c=this.positionPiece[e],l=c.x,h=c.y;if(r){var u=this.convertFenPiecesToData(r);u&&o.updateDataPiece(u)}else{if(0===this.listPieceMap.length)if(this.isPieceContainGem()){var d=this.getRandomPieceData(o.data);d&&o.updateDataPiece(d)}}o.updatePosition(l,h),o.setIndex(e),o.drawPiece()},t}(Phaser.GameObjects.Container),CO=Wa.Z.GAMEPLAY,bO=CO.KEY,OO=CO.FRAME,PO=function(e){function t(t){var n;return(n=e.call(this,t,bO,OO.BUTTON_WOOD_SMALL)||this).button.setWorldSize(55,48),n.setName("Setting"),n.createIcon(),n}return(0,o.Z)(t,e),t.prototype.createIcon=function(){var e=this.scene.make.image({key:bO,frame:OO.ICON_SETTING});e.setWorldSize(30,30),this.add(e),Phaser.Display.Align.In.Center(e,this,1,-1.5)},t}(ja.Z),RO=PO,wO=Wa.Z.GAMEPLAY,xO=wO.KEY,kO=wO.FRAME,_O=Wa.Z.DEFAULT,LO=_O.KEY,DO=_O.FRAME,MO=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n.pieces=void 0,n.debugButton=void 0,n.textExist=void 0,n.background=void 0,n.pX=void 0,n.pY=void 0,n.buttonSetting=void 0,n.panelNextBlock=void 0,n.textNextBlock=void 0,n.scene=t,n.setSize(n.scene.gameZone.width,85),t.add.existing((0,Ba.Z)(n)),n.init(),n}(0,o.Z)(t,e);var n=t.prototype;return n.init=function(){this.createDebugButton(),this.addBgPieces(),this.createTextNextBlock(),this.createSettingButton(),this.createPieces()},n.createBackground=function(){this.background=this.scene.make.image({key:LO,frame:DO.FOOTER});var e=this.scene.gameZone.width;this.background.setWorldSize(e,this.height),this.add(this.background),Phaser.Display.Align.In.BottomCenter(this.background,this)},n.createPieces=function(){this.pieces=new IO(this.scene),this.add(this.pieces),this.pieces.setPosition(0,30)},n.createDebugButton=function(){GameCore.Utils.Valid.isDebugger()&&this.createDebugButtonNextPieces()},n.createDebugButtonNextPieces=function(){this.debugButton=new ja.Z(this.scene,xO,kO.BUTTON_WOOD_SMALL,100,30),this.debugButton.setName("Debug");var e=this.scene.make.bitmapText({font:Xa.Z.PRIMARY.KEY,size:this.scene.fontSize(30),text:"Next pieces",origin:{x:.5,y:.5}});this.debugButton.add([e]),this.debugButton.onClick=this.clickButtonNextPieces.bind(this),this.add(this.debugButton),Phaser.Display.Align.In.BottomLeft(this.debugButton,this),this.textExist=this.scene.make.bitmapText({font:Xa.Z.PRIMARY.KEY,size:this.scene.fontSize(30),text:"Exist",origin:{x:.5,y:.5}}),this.debugButton.add([this.textExist]),Phaser.Display.Align.In.Center(this.textExist,this,80,0)},n.clickButtonNextPieces=function(){this.scene.layoutManager.objects.footer.pieces.debuggerNextPieces()},n.updateUIPortrait=function(){var e,t;this.pieces.setSizeAndPositionPiece(),this.pieces.setPosition(0,30),this.panelNextBlock.setVisible(!1),this.textNextBlock.setVisible(!1),this.buttonSetting.setVisible(!1),null==(e=this.debugButton)||e.setVisible(!0),null==(t=this.textExist)||t.setVisible(!0),this.pieces.handleResize()},n.updateUILandscape=function(){var e,t;this.pieces.setSizeAndPositionPiece(),this.initPosition(),this.panelNextBlock.setVisible(!0),this.textNextBlock.setVisible(!0),this.buttonSetting.setVisible(!0),null==(e=this.debugButton)||e.setVisible(!1),null==(t=this.textExist)||t.setVisible(!1);var n=this.scene.ads.getBannerHeight();Phaser.Display.Align.In.BottomLeft(this.buttonSetting,this.scene.gameZone,-5,-n/2-5),this.pieces.handleResize()},n.initPosition=function(){var e=this.panelNextBlock.displayHeight/3;this.pieces.positionPiece=[{x:0,y:-e},{x:0,y:0},{x:0,y:e}],this.pieces.setPosition(0,0)},n.updateBg=function(){this.background.setVisible(!1)},n.addBgPieces=function(){this.panelNextBlock=this.scene.make.image({key:LO,frame:DO.PANEL_NEXT_BLOCK}),this.panelNextBlock.setVisible(!1),this.panelNextBlock.setWorldSize(100.5,300),this.add(this.panelNextBlock)},n.createTextNextBlock=function(){var e=this.scene.world.getPixelRatio();this.textNextBlock=this.scene.make.image({key:LO,frame:DO.TEXT_NEXT_BLOCK});var t=this.textNextBlock,n=t.width,i=t.height;this.textNextBlock.setVisible(!1),this.textNextBlock.setWorldSize(n/e,i/e),this.add(this.textNextBlock),Phaser.Display.Align.In.TopCenter(this.textNextBlock,this.panelNextBlock,0,42)},n.createSettingButton=function(){this.buttonSetting=new RO(this.scene),this.buttonSetting.setWorldSize(52,45),this.buttonSetting.setVisible(!1),this.buttonSetting.onClick=this.handleClickSetting.bind(this),this.buttonSetting.setDepth(Va.Z.BUTTON)},n.handleClickSetting=function(){this.scene.handlePauseGame()},t}(Phaser.GameObjects.Container),NO=MO,BO=Wa.Z.DEFAULT,GO=BO.KEY,FO=BO.FRAME,UO=function(e){function t(t){var n;return(n=e.call(this,t)||this).background=void 0,n.bestScoreText=void 0,n.titleText=void 0,n.titleText2=void 0,n.dayText=void 0,n.titleDayText=void 0,n.setPosition(0,48.5),n.createBackground(),n.createScoreText(),n.createLevelTitleText(),n.createLevelTitleText2(),n.createTitleDayText(),n.createDayText(),n.scene.add.existing((0,Ba.Z)(n)),n}(0,o.Z)(t,e);var n=t.prototype;return n.createBackground=function(){this.background=this.scene.make.image({key:GO,frame:FO.BEST_SCORE_FRAME}),this.background.setWorldSize(55,77),this.add(this.background),Phaser.Display.Align.In.Center(this.background,this)},n.createScoreText=function(){this.bestScoreText=this.scene.make.bitmapText({font:Xa.Z.NUMBER_LIGHT.KEY,size:this.scene.fontSize(32),origin:{x:.5,y:.5},text:"0"}),this.add(this.bestScoreText),Phaser.Display.Align.In.Center(this.bestScoreText,this.background,0,23)},n.createTitleDayText=function(){var e=this.scene.game.lang,t=this.scene.facebook.getLocale();"ar"==t?(this.titleDayText=this.scene.make.text({style:{fontFamily:Xa.Z.FONT_FAMILY,fontSize:this.scene.fontSize(40)+"px"},origin:{x:.5,y:.5},text:e.Text.mmddyy}),this.titleDayText.setTint(15389360).setHighQuality()):this.titleDayText=this.scene.make.bitmapText({font:Xa.Z.PRIMARY_LIGHT.KEY,size:this.scene.fontSize(30),origin:{x:.5,y:.5},text:e.Text.mmddyy}),"id"==t&&this.titleDayText.setFontSize(this.scene.fontSize(25)),this.add(this.titleDayText),Phaser.Display.Align.In.Center(this.titleDayText,this.background,0,4)},n.createDayText=function(){this.dayText=this.scene.make.bitmapText({font:Xa.Z.PRIMARY_LIGHT.KEY,size:this.scene.fontSize(24),origin:{x:.5,y:.5},text:"0"}),this.add(this.dayText),Phaser.Display.Align.In.Center(this.dayText,this.background,0,23)},n.createLevelTitleText=function(){this.titleText=this.scene.make.bitmapText({font:Xa.Z.PRIMARY_LIGHT.KEY,size:this.scene.fontSize(24),origin:{x:.5,y:.5},text:this.scene.lang.Text.LEVEL}),this.add(this.titleText),Phaser.Display.Align.In.Center(this.titleText,this.background,0,4)},n.createLevelTitleText2=function(){this.titleText2=this.scene.make.text({text:this.scene.lang.Text.LEVEL,style:{fontFamily:Xa.Z.FONT_FAMILY,fontSize:this.scene.fontSize(32)+"px"},origin:{x:.5,y:.5}}),this.titleText2.setTint(15651762).setHighQuality(),this.titleText2.setVisible(!1),this.add(this.titleText2),Phaser.Display.Align.In.Center(this.titleText2,this.background,0,4)},n.setScoreText=function(e){this.bestScoreText.setText(String(e))},n.setDayText=function(e){this.dayText.setText(e)},n.showTextScore=function(){this.titleText.setVisible(!0),this.bestScoreText.setVisible(!0),"ar"==this.scene.facebook.getLocale()&&(this.titleText2.setVisible(!0),this.titleText.setVisible(!1)),this.titleDayText.setVisible(!1),this.dayText.setVisible(!1)},n.showTextDay=function(){this.titleText.setVisible(!1),this.titleText2.setVisible(!1),this.bestScoreText.setVisible(!1),this.titleDayText.setVisible(!0),this.dayText.setVisible(!0)},t}(Phaser.GameObjects.Container),HO=UO,ZO=Wa.Z.GAMEPLAY,YO=ZO.KEY,VO=ZO.FRAME,WO=Wa.Z.GAMEPLAY_32.KEY,zO=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n.imageGem=void 0,n.imageCheck=void 0,n.text=void 0,n.particle=void 0,n.emitter=void 0,n.currentPosition=void 0,n.imageGlow=void 0,n.tweenGlow=void 0,n.imageGlowCrop=void 0,n.tweenCropMaskTopDown=void 0,n.tweenCropMaskDownBottom=void 0,n.imageStar=void 0,n.tweenShowStar=void 0,n.tweenHideStar=void 0,n.tweenShowMe=void 0,n.scene=t,n.init(),n}(0,o.Z)(t,e);var n=t.prototype;return n.init=function(){this.createImageGem(),this.createImageCheck(),this.createText(),this.createParticle(),this.createEmitter(),this.createGlow(),this.createTweenGlow(),this.createGlowCrop(),this.createStar(),this.createTweenStar(),this.createTweenShowMe()},n.createImageGem=function(){this.imageGem=this.scene.make.image({key:WO}),this.imageGem.setWorldSize(22,22),this.add(this.imageGem),Phaser.Display.Align.In.Center(this.imageGem,this,0,-7)},n.createImageCheck=function(){this.imageCheck=this.scene.make.image({key:YO,frame:VO.ICON_CHECK}),this.imageCheck.setWorldSize(22,17),this.imageCheck.setVisible(!1),this.add(this.imageCheck),Phaser.Display.Align.In.Center(this.imageCheck,this.imageGem)},n.createText=function(){this.text=this.scene.make.bitmapText({font:Xa.Z.NUMBER_LIGHT.KEY,size:this.scene.fontSize(24),origin:{x:.5,y:.5}}),this.add(this.text),Phaser.Display.Align.In.Center(this.text,this.imageGem,0,19)},n.createParticle=function(){this.particle=this.scene.add.particles(YO).setDepth(Va.Z.ON_TOP)},n.createEmitter=function(){var e=1.5/this.scene.world.getPixelRatio();this.emitter=this.particle.createEmitter({on:!1,angle:{start:0,end:360,steps:8},frame:[VO.DUST],lifespan:1e3,quantity:1,scale:{start:e,end:0,ease:"Quart.easeIn"},speed:50})},n.createGlow=function(){this.imageGlow=this.scene.make.image({key:YO,frame:VO.VIOLET_GLOW}),this.imageGlow.setVisible(!1).setScale(0).setAlpha(0),this.add(this.imageGlow),Phaser.Display.Align.In.Center(this.imageGlow,this.imageGem)},n.createTweenGlow=function(){var e=this;this.tweenGlow=this.scene.tweens.add({targets:[this.imageGlow],paused:!0,scale:{from:0,to:.6},alpha:{from:0,to:1},delay:100,duration:600,onComplete:function(){e.imageGlow.setVisible(!1).setScale(0).setAlpha(0),e.playAnimMaskCrop(),e.playAnimStar()}})},n.createGlowCrop=function(){this.imageGlowCrop=this.scene.make.image({key:YO,frame:VO.MASK}),this.imageGlowCrop.setVisible(!1),this.imageGlowCrop.setWorldSize(this.imageGem.displayWidth,this.imageGem.displayHeight),this.add(this.imageGlowCrop),Phaser.Display.Align.In.Center(this.imageGlowCrop,this.imageGem)},n.createStar=function(){this.imageStar=this.scene.make.image({key:YO,frame:VO.ICON_STAR_1}),this.imageStar.setVisible(!1).setScale(0).setAlpha(0),this.imageStar.setWorldSize(27,26),this.add(this.imageStar),Phaser.Display.Align.In.Center(this.imageStar,this.imageGem,-10,-10)},n.createTweenStar=function(){var e=this;this.tweenHideStar=this.scene.add.tween({paused:!0,targets:[this.imageStar],scale:{from:1,to:0},alpha:{from:1,to:0},delay:100,duration:500,onComplete:function(){e.imageStar.setVisible(!1).setScale(0).setAlpha(0)}}),this.tweenShowStar=this.scene.add.tween({paused:!0,targets:[this.imageStar],scale:{from:0,to:1},alpha:{from:0,to:1},delay:100,duration:500,onComplete:function(){e.tweenHideStar.play()}})},n.createTweenShowMe=function(){this.tweenShowMe=this.scene.add.tween({paused:!0,targets:[this],alpha:{from:0,to:1},duration:200})},n.cropTopDownImageGlow=function(){var e=this;if(!this.tweenCropMaskTopDown){var t=this.imageGlowCrop.displayHeight,n=this.imageGlowCrop.displayWidth,i=this.imageGlowCrop.scaleX,a=this.imageGlowCrop.scaleY;this.tweenCropMaskTopDown=this.scene.tweens.addCounter({from:0,to:1,delay:200,duration:300,paused:!0,onUpdate:function(s){var r=s.getValue(0)*t;e.imageGlowCrop.setCrop(0,0,n/i,r/a)},onComplete:function(){e.cropDownBottomImageGlow()}})}this.tweenCropMaskTopDown.play()},n.cropDownBottomImageGlow=function(){var e=this;if(!this.tweenCropMaskDownBottom){var t=this.imageGlowCrop.displayHeight,n=this.imageGlowCrop.displayWidth,i=this.imageGlowCrop.scaleX,a=this.imageGlowCrop.scaleY;this.tweenCropMaskDownBottom=this.scene.tweens.addCounter({from:0,to:1,delay:200,duration:300,paused:!0,onUpdate:function(s){var r=s.getValue(0)*t;e.imageGlowCrop.setCrop(0,r/a,n/i,t/a)}})}this.tweenCropMaskDownBottom.play()},n.playAnimStar=function(){this.imageStar.setVisible(!0),this.tweenShowStar.play()},n.playAnimMaskCrop=function(){this.imageGlowCrop.setVisible(!0).setCrop(0,0,0,0),this.cropTopDownImageGlow()},n.setFrame=function(e){this.imageGem.setFrame(e)},n.getFrame=function(){return this.imageGem.frame.name},n.setText=function(e,t){this.text.setText(e+" / "+t)},n.completeMission=function(){this.imageGem.setAlpha(.3),this.text.setAlpha(.3),this.imageCheck.setVisible(!0)},n.reset=function(){this.imageGem.setAlpha(1),this.text.setAlpha(1),this.imageCheck.setVisible(!1)},n.updateCurrentPosition=function(e){this.currentPosition=e},n.runAnimCollectionItem=function(){var e=this.scene.layoutManager.objects.header,t=this.scene.gameZone.width/2+this.currentPosition.x,n=this.currentPosition.y-25;this.scene.world.isLandscape()&&(t=e.collectItems.getWorldPosition().x,n=e.collectItems.getWorldPosition().y+this.currentPosition.y),this.tweenGlow.play(),this.emitter.explode(8,t,n)},n.playAnimShowMe=function(){this.setVisible(!0).setAlpha(0),this.tweenShowMe.play()},t}(Phaser.GameObjects.Container),KO=Wa.Z.GAMEPLAY,jO=KO.KEY,XO=KO.FRAME,JO=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n.target=void 0,n.targetKeys=[],n.jsonPosition={},n.jsonAmount={},n.jsonTarget={},n.jsonCollectItem={},n.background=void 0,n.listCollectItems=[],n.scene=t,n.createBackground(),n}(0,o.Z)(t,e);var n=t.prototype;return n.createBackground=function(){this.background=this.scene.make.image({key:jO,frame:XO.BG_MAIN_SCORE}),this.background.setWorldSize(187,48),this.add(this.background),Phaser.Display.Align.In.Center(this.background,this,0,-1)},n.calcPosition=function(e){var t=[],n=200/(e+1);if(this.scene.world.isLandscape()){n=255/(e+1)}for(var i=n*(e-1)/2,a=0;a<e;a++)t.push(n*a-i);return t},n.parseTargetToJson=function(){if(!(0,Tf.isObject)(this.target))for(var e=JSON.parse(this.target),t=q()(e),n=this.calcPosition(t.length),i=0;i<t.length;i++){var a=t[i],s=hv[a];this.targetKeys.push(s),this.jsonAmount[s]=0,this.jsonTarget[s]=e[a],this.jsonPosition[s]={x:n[i],y:68},this.scene.world.isLandscape()&&(this.jsonPosition[s]={x:68,y:n[i]});var r=this.listCollectItems[i];r||(r=new zO(this.scene),this.add(r),this.listCollectItems.push(r)),r.updateCurrentPosition(this.jsonPosition[s]),r.setVisible(!0),this.scene.world.isLandscape()?r.setY(n[i]):r.setX(n[i]),r.setFrame(s),r.setText(0,e[a]),this.jsonCollectItem[s]=r}},n.alignCollectItems=function(){if(this.target)for(var e=JSON.parse(this.target),t=q()(e),n=this.calcPosition(t.length),i=0;i<this.listCollectItems.length;i++){var a=t[i],s=hv[a];this.jsonPosition[s]={x:n[i],y:68},this.scene.world.isLandscape()&&(this.jsonPosition[s]={x:68,y:n[i]});var r=this.listCollectItems[i];this.scene.world.isLandscape()?r.setPosition(0,n[i]):r.setPosition(n[i],0)}},n.hideListCollectItems=function(){this.listCollectItems.forEach((function(e){e.setVisible(!1),e.reset()}))},n.showListCollectItems=function(){this.listCollectItems.forEach((function(e){e.reset(),e.playAnimShowMe()}))},n.showCollectItemByKey=function(e){var t,n=Ae()(t=this.listCollectItems).call(t,(function(t){return t.getFrame()===e}));n&&0!==n.length&&(this.jsonAmount[e]>=this.jsonTarget[e]?n[0].completeMission():n[0].reset(),n[0].playAnimShowMe())},n.start=function(){this.parseTargetToJson()},n.setTargets=function(e){var t,n;this.target=gf()(t=gf()(n=gf()(e).call(e,"{",'{"')).call(n,", ",', "')).call(t,":",'":')},n.collectItem=function(e){if(e in this.jsonAmount){this.jsonAmount[e]++;var t=this.jsonAmount[e],n=this.jsonTarget[e];t===n&&this.jsonCollectItem[e].completeMission(),this.jsonCollectItem[e].setText(t,n)}},n.checkCompleteMission=function(){for(var e=q()(this.jsonTarget),t=0;t<e.length;t++){var n=e[t];if(this.jsonTarget[n]>this.jsonAmount[n])return!1}return!0},n.reset=function(){this.hideListCollectItems(),this.targetKeys=[],this.jsonAmount={},this.jsonTarget={},this.jsonCollectItem={},this.jsonPosition={}},n.getPositionCollectionItem=function(e){return this.jsonPosition[e]},n.getTargetKeys=function(){return this.targetKeys},n.getJsonAmount=function(){return this.jsonAmount},n.getJsonTarget=function(){return this.jsonTarget},n.getCollectItemByKey=function(e){return this.jsonCollectItem[e]},n.updateJsonAmountByFen=function(e){this.jsonAmount=JSON.parse(R()(e));for(var t=q()(this.jsonTarget),n=0;n<t.length;n++){var i=t[n],a=this.jsonCollectItem[i];this.jsonTarget[i]>this.jsonAmount[i]?a.reset():a.completeMission(),a.setText(this.jsonAmount[i],this.jsonTarget[i])}},n.resetTextAmount=function(){for(var e=q()(this.jsonTarget),t=0;t<e.length;t++){var n=e[t],i=this.listCollectItems[t];i&&i.setText(0,this.jsonTarget[n])}},t}(Phaser.GameObjects.Container),qO=Wa.Z.GAMEPLAY,QO=qO.KEY,$O=qO.FRAME,eP=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n.scoreText=void 0,n.background=void 0,n.tweenShow=void 0,n.tweenHide=void 0,n.addScore=void 0,n.score=0,n.scene=t,n.scene.add.existing((0,Ba.Z)(n)),n.createBackground(),n.createScoreText(),n}(0,o.Z)(t,e);var n=t.prototype;return n.createBackground=function(){this.background=this.scene.make.image({key:QO,frame:$O.BG_MAIN_SCORE}),this.background.setWorldSize(187,48),this.add(this.background),Phaser.Display.Align.In.Center(this.background,this)},n.createScoreText=function(){this.scoreText=this.scene.make.bitmapText({font:Xa.Z.PRIMARY_LIGHT.KEY,size:this.scene.fontSize(52),text:"0",origin:{x:.5,y:.5}}),this.add(this.scoreText),Phaser.Display.Align.In.Center(this.scoreText,this.background)},n.setScore=function(e){this.score=e},n.setScoreText=function(e){this.scoreText.setText(String(e))},n.animAddScore=function(e){var t=this;if(this.addScore&&this.addScore.isPlaying()){this.addScore.stop();var n=this.score+e;this.setScore(n),this.setScoreText(n)}this.addScore=this.scene.tweens.addCounter({from:0,to:e,duration:100,onUpdate:function(e){var n=t.score+Math.floor(e.getValue());t.setScoreText(n),t.scene.updateProgressTargetScore(n)},onComplete:function(){var n=t.score+e;t.setScore(n),t.setScoreText(n),t.scene.handleCompleteScoreMission()}})},n.reset=function(){this.setScore(0),this.setScoreText(0)},t}(Phaser.GameObjects.Container),tP=eP,nP=Wa.Z.GAMEPLAY,iP=nP.KEY,aP=nP.FRAME,sP=function(e){function t(t,n,i){var a;return(a=e.call(this,t)||this).scene=void 0,a.leftBg=void 0,a.midBg=void 0,a.rightBg=void 0,a.leftProgress=void 0,a.midProgress=void 0,a.rightProgress=void 0,a.iconCup=void 0,a.glareCup=void 0,a.tweenRotationGlareCup=void 0,a.targetScore=void 0,a.listPoolMilestoneFrame=[],a.listMilestoneFrame=[],a.particle=void 0,a.emitter=void 0,a.progressBarFull=void 0,a.setSize(n,i),a.scene=t,a.init(),a}(0,o.Z)(t,e);var n=t.prototype;return n.init=function(){this.initBg(),this.initProgressBar(),this.createParticle(),this.createEmitter(),this.createGlareCup(),this.createTweenGlare(),this.createIconCup()},n.initBg=function(){this.leftBg=this.scene.make.image({key:iP,frame:aP.PROGRESS_BG_LEFT}),this.midBg=this.scene.make.image({key:iP,frame:aP.PROGRESS_BG_MID}),this.rightBg=this.scene.make.image({key:iP,frame:aP.PROGRESS_BG_RIGHT});var e=this.leftBg,t=e.width,n=e.height,i=t*this.height/n;this.leftBg.setWorldSize(i,this.height);var a=this.rightBg,s=a.width,r=a.height,o=s*this.height/r;this.rightBg.setWorldSize(o,this.height);var c=this.width-(i+o);this.midBg.setWorldSize(c,this.height),this.add(this.leftBg),this.add(this.midBg),this.add(this.rightBg),Phaser.Display.Align.In.LeftCenter(this.leftBg,this,0,0),Phaser.Display.Align.In.Center(this.midBg,this,0,0),Phaser.Display.Align.In.RightCenter(this.rightBg,this,0,0)},n.initProgressBar=function(){this.leftProgress=this.scene.make.image({key:iP,frame:aP.PROGRESS_BAR_LEFT}),this.midProgress=this.scene.make.image({key:iP,frame:aP.PROGRESS_BAR_MID}),this.rightProgress=this.scene.make.image({key:iP,frame:aP.PROGRESS_BAR_RIGHT});var e=this.leftProgress,t=e.width,n=e.height,i=t*this.height/n;this.leftProgress.setWorldSize(i,this.height);var a=this.rightProgress,s=a.width,r=a.height,o=s*this.height/r;this.rightProgress.setWorldSize(o,this.height);var c=this.width-(i+o)+2;this.midProgress.setWorldSize(c,this.height),this.add(this.leftProgress),this.add(this.midProgress),this.add(this.rightProgress),this.leftProgress.setVisible(!1),this.rightProgress.setVisible(!1),this.midProgress.setVisible(!1),Phaser.Display.Align.In.LeftCenter(this.leftProgress,this,0,0),Phaser.Display.Align.In.Center(this.midProgress,this,0,0),Phaser.Display.Align.In.RightCenter(this.rightProgress,this,0,0)},n.createIconCup=function(){this.iconCup=this.scene.make.image({key:iP,frame:aP.ICON_CUP}),this.iconCup.setWorldSize(25,20),this.add(this.iconCup),Phaser.Display.Align.In.RightCenter(this.iconCup,this.glareCup,-9,1)},n.createGlareCup=function(){this.glareCup=this.scene.make.image({key:iP,frame:aP.CUP_GLARE}),this.glareCup.setWorldSize(44,44),this.glareCup.setVisible(!1),this.add(this.glareCup),Phaser.Display.Align.In.RightCenter(this.glareCup,this.rightBg,42,-3)},n.createTweenGlare=function(){this.tweenRotationGlareCup=new qd.Z({targets:[this.glareCup],repeat:-1,duration:6e3})},n.createParticle=function(){this.particle=this.scene.add.particles(iP),this.add(this.particle)},n.createEmitter=function(){this.emitter=this.particle.createEmitter({x:0,y:0,scale:{min:.3,max:1},speed:{min:10,max:30},lifespan:{min:500,max:1e3},quantity:1,on:!1,frame:aP.DUST}),this.emitter.setPosition(this.x+this.width/2+20,-3)},n.createMilestoneFrame=function(){var e=this.scene.make.image({key:iP,frame:aP.FLAG});return e.setWorldSize(16,22),e},n.getMilestoneFrame=function(){var e,t=Ae()(e=this.listPoolMilestoneFrame).call(e,(function(e){return!e.visible}));if(!t||0===t.length){var n=this.createMilestoneFrame();return this.listPoolMilestoneFrame.push(n),this.add(n),n}return t[0]},n.handleSetAlphaListMilestone=function(e){this.listMilestoneFrame.forEach((function(t){t.score<=e?t.frame.setAlpha(1):t.frame.setAlpha(.5)}))},n.handleSetAlphaCup=function(e){e>=this.targetScore?this.iconCup.setAlpha(1):this.iconCup.setAlpha(.5)},n.runEmitter=function(){this.emitter.start()},n.stopEmitter=function(){this.emitter.stop()},n.runAnimGlare=function(){this.glareCup.setVisible(!0),this.tweenRotationGlareCup.play()},n.stopAnimGlare=function(){this.tweenRotationGlareCup.stop(),this.glareCup.setVisible(!1)},n.hideProgressBar=function(){this.leftProgress.setVisible(!1),this.rightProgress.setVisible(!1),this.midProgress.setVisible(!1)},n.hideMilestone=function(){this.listPoolMilestoneFrame.forEach((function(e){e.setVisible(!1)}))},n.resetListMilestone=function(){this.listMilestoneFrame=[]},n.reset=function(){this.hideMilestone(),this.hideProgressBar(),this.setPercent(0),this.resetListMilestone()},n.setTargetScore=function(e){this.targetScore=e},n.getTargetScore=function(){return this.targetScore},n.setPercent=function(e){var t=e*this.width,n=this.leftProgress.displayWidth,i=this.midProgress.displayWidth,a=this.rightProgress.displayWidth;if(e>=1){if(this.progressBarFull)return;return this.progressBarFull=!0,this.leftProgress.setVisible(!0),this.midProgress.setVisible(!0),this.rightProgress.setVisible(!0),this.leftProgress.setCrop(0,0,n/this.leftProgress.scaleX,2*this.height),this.midProgress.setCrop(0,0,i/this.midProgress.scaleX,2*this.height),this.rightProgress.setCrop(0,0,a/this.rightProgress.scaleX,2*this.height),this.runAnimGlare(),void this.runEmitter()}return this.stopAnimGlare(),this.stopEmitter(),this.progressBarFull=!1,t<n?(this.leftProgress.setVisible(!0),void this.leftProgress.setCrop(0,0,t/this.leftProgress.scaleX,2*this.height)):t>n+i?(this.leftProgress.setVisible(!0),this.midProgress.setVisible(!0),this.midProgress.setCrop(0,0,i/this.midProgress.scaleX,2*this.height),this.rightProgress.setVisible(!0),void this.rightProgress.setCrop(0,0,(t-(n+i-2))/this.rightProgress.scaleX,2*this.height)):(this.leftProgress.setVisible(!0),this.leftProgress.setCrop(0,0,n/this.leftProgress.scaleX,2*this.height),this.midProgress.setVisible(!0),void this.midProgress.setCrop(0,0,(t-n)/this.midProgress.scaleX,2*this.height))},t}(Phaser.GameObjects.Container),rP=Wa.Z.GAMEPLAY,oP=rP.KEY,cP=rP.FRAME,lP=function(e){function t(t){var n;return(n=e.call(this,t,oP,cP.BUTTON_WOOD_SMALL)||this).button.setWorldSize(55,48),n.setName("Setting"),n.createIcon(),n}return(0,o.Z)(t,e),t.prototype.createIcon=function(){var e=this.scene.make.image({key:oP,frame:cP.ICON_SETTING});e.setWorldSize(30,30),this.add(e),Phaser.Display.Align.In.Center(e,this,1,-1.5)},t}(ja.Z),hP=lP,uP=Wa.Z.GAMEPLAY,dP=uP.KEY,pP=uP.FRAME,gP=Wa.Z.DEFAULT,fP=gP.KEY,mP=gP.FRAME,vP=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n.buttonSetting=void 0,n.bestScoreBlock=void 0,n.mainScoreBlock=void 0,n.progressBar=void 0,n.collectItems=void 0,n.textMission=void 0,n.scene=t,n.setSize(n.scene.gameZone.width,0),n.createSettingButton(),n.createBestScoreBlock(),n.createMainScoreBlock(),n.createProgressBar(),n.createCollectItems(),n.addTextScore(),t.add.existing((0,Ba.Z)(n)),n}(0,o.Z)(t,e);var n=t.prototype;return n.createBestScoreBlock=function(){this.bestScoreBlock=new HO(this.scene),this.add(this.bestScoreBlock)},n.createMainScoreBlock=function(){this.mainScoreBlock=new tP(this.scene),this.add(this.mainScoreBlock)},n.createSettingButton=function(){this.buttonSetting=new hP(this.scene),this.add(this.buttonSetting),Phaser.Display.Align.In.Center(this.buttonSetting,this,132,51)},n.createProgressBar=function(){this.progressBar=new sP(this.scene,315,13),this.add(this.progressBar),this.progressBar.setVisible(!1)},n.createCollectItems=function(){this.collectItems=new JO(this.scene),this.add(this.collectItems),this.collectItems.setVisible(!1)},n.getScore=function(){return this.mainScoreBlock.score},n.showItemSingleMode=function(){this.mainScoreBlock.setVisible(!0)},n.showItemPlayWithFriendsMode=function(){this.mainScoreBlock.setVisible(!1)},n.start=function(){var e=this.scene.targetMissionManager.getTargetType();switch(this.scene.world.isLandscape()&&this.updateUILevel(),e){case OT:this.targetScore();break;case PT:this.targetCollect()}},n.targetScore=function(){var e=parseInt(this.scene.targetMissionManager.getTargetValue()),t=this.scene.storage.getState(),n=ll(t)||0;(0,Tf.isArray)(e)||(this.progressBar.reset(),this.progressBar.setVisible(!0),this.progressBar.setTargetScore(e),this.mainScoreBlock.reset(),this.mainScoreBlock.setVisible(!0),cl(t)||(this.progressBar.setPercent(n/e),this.mainScoreBlock.setScore(n),this.mainScoreBlock.setScoreText(n)),this.collectItems.setVisible(!1))},n.targetCollect=function(){this.collectItems.reset(),this.mainScoreBlock.setVisible(!1),this.progressBar.setVisible(!1);var e=this.scene.targetMissionManager.getTargetValue();this.collectItems.setTargets(e),this.collectItems.setVisible(!0),this.collectItems.start()},n.updateUIPortrait=function(){this.buttonSetting.setVisible(!0),this.textMission.setVisible(!1),this.updateUIMainScorePortrait(),this.updateUIMissionGemPortrait(),this.mainScoreBlock.setPosition(0,52),this.bestScoreBlock.setPosition(-132,-12.5),this.progressBar.setPosition(-19,92),this.collectItems.setPosition(0,52),this.collectItems.alignCollectItems()},n.updateUIMainScorePortrait=function(){this.mainScoreBlock.background.setTexture(dP),this.mainScoreBlock.background.setFrame(pP.BG_MAIN_SCORE),this.mainScoreBlock.background.setWorldSize(187,48)},n.updateUIMissionGemPortrait=function(){this.collectItems.background.setTexture(dP),this.collectItems.background.setFrame(pP.BG_MAIN_SCORE),this.collectItems.background.setWorldSize(187,48)},n.updateUILandscape=function(){this.calcSize(),this.buttonSetting.setVisible(!1),this.textMission.setVisible(!0),this.updateUIMainScore(),this.updateUIProgress(),this.updateUIMissionGem(),this.updateUILevel(),this.textMission.setPosition(-this.width/2-5.5,10),this.collectItems.setPosition(-this.width/2-5.5,154),this.collectItems.alignCollectItems()},n.calcSize=function(){this.setSize(575,110)},n.addTextScore=function(){var e=this.scene.world.getPixelRatio();this.textMission=this.scene.make.image({key:fP,frame:mP.TEXT_MISSION_LANDSCAPE});var t=this.textMission,n=t.width,i=t.height;this.textMission.setVisible(!1),this.textMission.setWorldSize(n/e,i/e),this.add(this.textMission)},n.updateUIMainScore=function(){this.mainScoreBlock.background.setTexture(fP),this.mainScoreBlock.background.setFrame(mP.PANEL_SCORE),this.mainScoreBlock.background.setWorldSize(86.5,49.5),this.bestScoreBlock.setPosition(-this.width/2-5.5,115),this.mainScoreBlock.setPosition(-this.width/2-5.5,77)},n.updateUIMissionGem=function(){this.collectItems.background.setTexture(fP),this.collectItems.background.setFrame(mP.PANEL_MISSION),this.collectItems.background.setWorldSize(47.5,232)},n.updateUILevel=function(){switch(this.scene.targetMissionManager.getTargetType()){case PT:this.bestScoreBlock.setY(245);break;case OT:this.bestScoreBlock.setY(85);break;default:this.bestScoreBlock.setY(245)}},n.updateUIProgress=function(){this.progressBar.setPosition(0,-33)},t}(Phaser.GameObjects.Container),EP=vP,SP=function(){function e(e){this.scene=void 0,this.scene=e}var t=e.prototype;return t.handleShowEffect=function(e){var t=this;if(e&&0!==e.length){for(var n=this.scene.layoutManager.objects.header,i=n.collectItems.getTargetKeys(),a=n.collectItems.getJsonAmount(),s=n.collectItems.getJsonTarget(),r=0,o=function(){var n=i[c],o=Ae()(e).call(e,(function(e){return e.frame===n}));a[n]+o.length>=s[n]&&r++,t.showEffect(o)},c=0;c<i.length;c++)o();r===q()(s).length&&this.scene.setLevelCompleted(!0),this.scene.time.delayedCall(2e3,(function(){t.scene.handleCollectionItemsComplete()}))}},t.showEffect=function(e){for(var t=this,n=e.length,i=this.scene.layoutManager.objects,a=i.header,s=i.main.board.dataBoard,r=function(){var i=e[o],r=i.x,c=i.y,l=i.frame,h=s[c][r].cell,u=h.imageBreak,d=t.scene.gameZone.width/2,p=a.collectItems.getPositionCollectionItem(l),g=d+p.x,f=p.y-24;t.scene.world.isLandscape()&&(g=a.collectItems.getWorldPosition().x,f=a.collectItems.getWorldPosition().y+p.y-3);var m=t.getFreeAnim();t.scene.layoutManager.objects.main.board.bringToTop(h),h.resetImageBreak(),u.setVisible(!0),u.setFrame(l),m.setTarget(u),m.onComplete=function(){(n--,u.setVisible(!1),u.setPosition(0,0),a.collectItems.collectItem(l),n<=0)&&(a.collectItems.getCollectItemByKey(l).runAnimCollectionItem(),t.scene.updateMatchData())},m.runScaleUpAnimation(0,300),m.runScaleDownAnimation(450,400),m.runAnimMoveToPosition(700,Phaser.Math.Between(500,1e3),g,f)},o=0;o<e.length;o++)r()},t.getFreeAnim=function(){return this.scene.world.isLandscape()?new NC(this.scene):new MC(this.scene)},e}(),AP=SP,yP=function(){function e(e){this.angle=void 0,this.scene=void 0,this.scaleUpTween=void 0,this.breakingTween=void 0,this.breakingDelay=0,this.captureCells=void 0,this.timerEventRemoveCaptureCells=void 0,this.scene=e}var t=e.prototype;return t.init=function(){this.createTweenBreaking()},t.handleShowEffect=function(e){var t=this;e&&0!==e.length&&(this.removeCaptureCell(),this.captureCells=e,this.setValueCaptureCell(),this.breakingTween.resetTweenData(!1),this.breakingTween.restart(),this.timerEventRemoveCaptureCells&&this.timerEventRemoveCaptureCells.remove(),this.timerEventRemoveCaptureCells=this.scene.time.addEvent({delay:500,callback:function(){t.breakingTween.isPlaying()||t.removeCaptureCell()}}))},t.onCaptureCellComplete=function(){if(this.captureCells){var e=this.scene.layoutManager.objects.main;if(e&&e.board)for(var t=e.board.dataBoard,n=0;n<this.captureCells.length;n++){var i=this.captureCells[n],a=i.x;t[i.y][a].cell.resetImageBreak()}}},t.removeCaptureCell=function(){var e=this.scene.layoutManager.objects.main.board.dataBoard;if(this.captureCells)for(var t=0;t<this.captureCells.length;t++){var n=this.captureCells[t],i=n.x;e[n.y][i].cell.resetImageBreak()}},t.setValueCaptureCell=function(){for(var e=this.scene.layoutManager.objects.main.board.dataBoard,t=Math.round(68.25),n=0;n<this.captureCells.length;n++){var i=Phaser.Math.Between(50,t),a=Phaser.Math.Between(82,98)*Math.PI/180,s=Phaser.Math.Between(3,10)/1e3,r=this.captureCells[n],o=r.x,c=e[r.y][o].cell;c.maxScale0=Phaser.Math.FloatBetween(2.5,4)/10,c.imageBreak.setVisible(!0),c.imageBreak.setFrame(Wa.Z.GAMEPLAY_32.FRAME.GEM),c.v0=i,c.alpha0=a,c.scaleRate0=s}},t.createTweenBreaking=function(){var e=this,t=this.scene.layoutManager.objects.main;this.breakingTween=this.scene.tweens.addCounter({from:0,to:1900,onUpdate:function(n){if(e.captureCells)for(var i=t.board.dataBoard,a=0;a<e.captureCells.length;a++){e.angle=Phaser.Math.Between(-15,15);var s=e.captureCells[a],r=s.x,o=i[s.y][r].cell,c=o.imageBreak,l=o.maxScale0,h=o.alpha0<1.57?1:-1,u=.016*n.getValue(),d=Ou(o.v0,o.alpha0,u),p=Pu(o.v0,o.alpha0,u);c.setVisible(!0),c.x=o.x0+d,c.y=o.y0+-p,c.rotation+=.04*h,c.scale>l?c.scale-=o.scaleRate0:c.scale=l}},onComplete:function(){e.onCaptureCellComplete()},delay:this.breakingDelay,duration:2500}).stop()},e}(),TP=yP,IP=Wa.Z.GAMEPLAY,CP=IP.KEY,bP=IP.FRAME,OP=Wa.Z.GAMEPLAY_32,PP=OP.KEY,RP=OP.FRAME,wP=GameCore.Configs.Board,xP=wP.cols,kP=wP.rows,_P=Wa.Z.DEFAULT.FRAME,LP=GameCore.Configs.Gameplay.VibrateValue,DP=function(e){function t(t,n,i){var a;return(a=e.call(this,t)||this).scene=void 0,a.suggestCells=[],a.pX=void 0,a.pY=void 0,a.borderLeftSize=4,a.borderTopSize=4,a.cellSize=void 0,a.cellPadding=void 0,a.diceSize=void 0,a.dataBoard=[],a.cellsHighlight=[],a.cellSharking=[],a.boardFrame=void 0,a.woodenEffect=void 0,a.collectionEffect=void 0,a.offsetY=-27,a.canCaptureLines=function(e,t){void 0===t&&(t=5);for(var n=e.length,i=e[0].length,a=[],r=[],o=[],c=0;c<n;c++){for(var l=0,h={x:-1,y:-1},u=0;u<i;u++)0===c&&(o[u]={count:0,x:-1,y:-1}),1===e[c][u].value?(o[u].count++,l++):(h.x=u,h.y=c,o[u].x=u,o[u].y=c);if(l===i-1&&r.push((0,s.Z)({row:c},h)),c===n-1)for(var d=0;d<i;d++)o[d].count===n-1&&a.push((0,s.Z)({col:d},o[d]))}if(r.length>=t)for(var p=0,g={x:-1,y:-1},f=0;f<r.length;f++)if(0!==f){if(r[f].x===g.x&&r[f].y===g.y+1?(g.x=r[f].x,g.y=r[f].y,p++):p=1,p>=t)return{isCapture:!0,direction:"vertical",minLine:t}}else g.x=r[f].x,g.y=r[f].y,p++;if(a.length>=t)for(var m=0,v={x:-1,y:-1},E=0;E<a.length;E++)if(0!==E){if(a[E].x===v.x+1&&a[E].y===v.y?(v.x=a[E].x,v.y=a[E].y,m++):m=1,m>=t)return{isCapture:!0,direction:"horizontal",minLine:t}}else v.x=a[E].x,v.y=a[E].y,m++;return{isCapture:!1,direction:"",minLine:t}},a.scene=t,a.setSize(n,i),a.woodenEffect=new TP(a.scene),a.collectionEffect=new AP(a.scene),a.init(),a}(0,o.Z)(t,e);var n=t.prototype;return n.init=function(){this.createBoard(),this.calcCellLength(),this.initDataBoard()},n.createBoard=function(){this.boardFrame=this.scene.make.image({key:CP,frame:bP.BOARD}),this.boardFrame.setWorldSize(this.width,this.height),this.add(this.boardFrame)},n.calcCellLength=function(){this.cellPadding=1,this.cellSize=(this.width-2*this.borderLeftSize-this.cellPadding*(xP+1))/xP},n.initDataBoard=function(){for(var e=0;e<kP;e++){this.dataBoard[e]=[];for(var t=0;t<xP;t++){var n=(t-(xP-1)/2)*(this.cellSize+this.cellPadding)-1,i=(e-(kP-1)/2)*(this.cellSize+this.cellPadding)-1,a={x:n,y:i,width:this.cellSize,height:this.cellSize,texture:PP,frame:RP.GEM_TRANSPARENT,depth:Va.Z.PIECE-.1,padding:this.cellPadding,isWoodenEffect:!0},s=new uI(this.scene,a);s.setFrameImageCell(RP.GEM),this.add(s),this.dataBoard[e][t]={x:n,y:i,width:this.cellSize,height:this.cellSize,frame:RP.GEM_TRANSPARENT,value:0,cell:s}}}},n.handleHighlight=function(e,t){this.cellsHighlight=e;for(var n=0;n<e.length;n++){var i=e[n],a=i.x,s=i.y,r=i.frame;if(this.dataBoard[s]&&this.dataBoard[s][a]&&0===this.dataBoard[s][a].value){var o=this.dataBoard[s][a].cell;this.dataBoard[s][a].frame=r||RP.GEM,o.setFrameImageCell(r||RP.GEM),o.setAlphaImageCell(.3)}}this.canCaptureCells(e,t)},n.handleTweenStartMission=function(){for(var e=this,t=100,n=0;n<kP;n++)for(var i=function(){var i=e.dataBoard[n][a].cell,s=0;s=4==n&&4==a?t:n>=3&&n<=5&&a>=3&&a<=5?200:n>=2&&n<=6&&a>=2&&a<=6?300:n>=1&&n<=7&&a>=1&&a<=7?400:500,e.scene.time.delayedCall(s,(function(){i.playTweenStartMission()}))},a=0;a<xP;a++)i()},n.handleCapturePiece=function(e){var t=this;try{if(!e||e.length<=0)throw Cv=0,new Error("Invalid Capture");var n=Ae()(e).call(e,(function(e){return e.frame!==RP.GEM}));this.collectionEffect.handleShowEffect(n);for(var i=300,a=0,s=Sv(this.dataBoard),r=Av(this.dataBoard),o=gv(),c=function(){var n=e[l],c=n.x,h=n.y,u=t.dataBoard[h][c].cell,d=0,p=0,g=0;if(s.length>0&&r.length>0){var f=0,m=0;a=i/xP,-1!==wa()(s).call(s,h)&&-1===wa()(r).call(r,c)&&(f=a*c,m=0,p=wa()(s).call(s,h)),-1===wa()(s).call(s,h)&&-1!==wa()(r).call(r,c)&&(f=0,m=a*h,p=wa()(r).call(r,c)),-1!==wa()(s).call(s,h)&&-1!==wa()(r).call(r,c)&&(f=a*c,m=a*h,p=Math.max(wa()(r).call(r,c),wa()(s).call(s,h),0)),-1===wa()(s).call(s,h)&&-1===wa()(r).call(r,c)&&(f=a*c,m=a*h),d=Math.max(f,m,0)}else if(r.length>0)d=(a=i/xP)*h,p=wa()(r).call(r,c),g=h;else if(s.length>0)d=(a=i/kP)*c,p=wa()(s).call(s,h),g=c;else{a=100;var v=e[0].x;d=a*(c-v),p=0}u.hideImageHighlight(),t.scene.time.delayedCall(d,(function(){if(u.getFrameImageCell()===RP.GEM){u.resetImageBreak();var e="";o>2&&(r.length>=3||s.length>=3)?(e=Gp[g]||Gp[0],u.imageBreak.setFrame(e)):(e=Bp[p]||Bp[0],u.imageBreak.setFrame(e)),u.playTweenScaleDown()}0==t.dataBoard[h][c].value&&u.setFrameImageCell(RP.GEM_TRANSPARENT)})),t.dataBoard[h][c].frame=RP.GEM_TRANSPARENT,t.dataBoard[h][c].value=0},l=0;l<e.length;l++)c()}catch(h){}},n.checkPositionCellOnCaptureCell=function(e,t){var n=Ae()(t).call(t,(function(t){return t.x===e.x&&t.y===e.y}));return n&&n.length>0},n.handlePraise=function(e,t){for(var n=[],i=0;i<e.length;i++){var a=e[i];this.checkPositionCellOnCaptureCell(a,t)&&n.push(this.dataBoard[a.y][a.x])}if(0!==n.length)if(this.scene.targetMissionManager.getTargetType()!==PT){var s=bv(),r=gv();r>1&&(s=18*pv+10*(Ov()-1));for(var o=n[0].cell.getWorldPosition(),c=o.x,l=0,h=o.y,u=0,d=0;d<n.length;d++){var p=n[d].cell.getWorldPosition();p.x<c&&(c=p.x),p.x>l&&(l=p.x),p.y<h&&(h=p.y),p.y>u&&(u=p.y)}var g=c+(l-c)/2,f=h+(u-h)/2;this.scene.layoutManager.objects.main.praise.handlePraise(g,f,s,r),this.handleStreakBreak(g,f),this.playEatSound(r)}else this.playEatSound(1)},n.handleStreakBreak=function(e,t){var n=gv(),i=Ov()-1,a=this.scene.gameZone.width;if(e-75<0&&(e=75),e+75>a&&(e=a-75),!(i<2||n>=2)){var s=i>6?6:i,r=this.getVibrateByLevel(s);this.scene.player.getPlayerSettings().vibrate&&Zp(r),this.playEatSound(s),this.scene.effectManager.streakBreak.setTextStreak(i),this.scene.effectManager.streakBreak.setBgFrame(_P.BG_STREAK),this.scene.effectManager.streakBreak.playAnim(e,t-20)}},n.getVibrateByLevel=function(e){return LP[e]||0},n.playEatSound=function(e){switch(this.scene.audio.playSound(Ka.Z.EAT_BLOCK),e){case 1:default:break;case 2:this.scene.audio.playSound(Ka.Z.GOOD);break;case 3:this.scene.audio.playSound(Ka.Z.COOL);break;case 4:case 5:case 6:this.scene.audio.playSound(Ka.Z.EXCELLENT)}},n.handleRemoveHighlight=function(){try{if(!this.cellsHighlight)return;for(var e=0;e<this.cellsHighlight.length;e++){var t=this.cellsHighlight[e],n=t.x,i=t.y;if(this.dataBoard[i]&&this.dataBoard[i][n]&&0===this.dataBoard[i][n].value){var a=this.dataBoard[i][n].cell;this.dataBoard[i][n].frame=RP.GEM_TRANSPARENT,a.setFrameImageCell(RP.GEM_TRANSPARENT),a.setAlphaImageCell(1)}}this.cellsHighlight=[]}catch(s){}},n.canCaptureCells=function(e,t){for(var n=this,i=this.dataBoard,a=[],r=0;r<i.length;r++){a[r]=[];for(var o=0;o<i[r].length;o++)a[r][o]=(0,s.Z)({},i[r][o])}for(var c=0;c<e.length;c++){var l=e[c],h=l.x;a[l.y][h].value=1}this.removeAnimCanCaptureCells(a,e);var u=fv(a,e);if(!u||u.length<=0)return!1;for(var d=function(){var t=u[p],i=t.x,a=t.y;e.some((function(e){return e.x===i&&e.y===a}))||n.cellSharking.push((0,s.Z)({},u[p]))},p=0;p<u.length;p++)d();for(var g=0;g<this.cellSharking.length;g++){var f=this.cellSharking[g],m=f.x,v=f.y,E=this.dataBoard[v][m].cell;E.isHighlight()||E.showImageHighlight()}t(Sv(a),Av(a),Ev(a,e),e)},n.removeAnimCanCaptureCells=function(e,t){var n=this;if(0!==this.cellSharking.length){for(var i=Sv(e),a=Av(e),s=Ev(e,t),r=function(){var e=n.cellSharking[o],t=e.x,r=e.y,c=n.dataBoard[r][t].cell;if(-1!==wa()(i).call(i,r)||-1!==wa()(a).call(a,t)||s.some((function(e){return e.x===t&&e.y===r})))return 1;c.hideImageHighlight()},o=0;o<this.cellSharking.length;o++)r();this.cellSharking=[]}},n.removeAllCanCaptureCells=function(){if(0!==this.cellSharking.length){for(var e=0;e<this.cellSharking.length;e++){var t=this.cellSharking[e],n=t.x,i=t.y;this.dataBoard[i][n].cell.hideImageHighlight()}this.cellSharking=[]}},n.handleSuggestMove=function(e){try{this.suggestCells=e;for(var t=0;t<e.length;t++){var n=e[t],i=n.x,a=n.y,s=this.dataBoard[a][i].cell;s.setFrameImageCell(RP.GEM_HIGHT_LIGHT),s.setAlphaImageCell(1)}}catch(r){}},n.handleRemoveSuggestMove=function(){try{for(var e=0;e<this.suggestCells.length;e++){var t=this.suggestCells[e],n=t.x,i=t.y,a=this.dataBoard[i][n].cell;this.isCellHighlight(a)||a.setFrameImageCell(RP.GEM_TRANSPARENT)}this.suggestCells=[]}catch(s){}},n.handleMove=function(e,t){try{for(var n=0;n<e.length;n++){var i=e[n],a=i.x,s=i.y,r=i.frame,o=void 0===r?RP.GEM:r;if(this.dataBoard[s]&&this.dataBoard[s][a]){this.dataBoard[s][a].frame=o,this.dataBoard[s][a].value=1;var c=this.dataBoard[s][a].cell;c.setFrameImageCell(o),c.setAlphaImageCell(1)}}var l=fv(this.dataBoard,e);this.handleCapturePiece(l),this.handlePraise(e,l),t&&t(),this.handleResetFrameBoard(),this.scene.updateMatchData(),this.handleGameOver()}catch(h){}},n.handleResetFrameBoard=function(){for(var e=0;e<kP;e++)for(var t=0;t<xP;t++)if(this.dataBoard[e]&&this.dataBoard[e][t]&&1===this.dataBoard[e][t].value){var n=this.dataBoard[e][t],a=n.frame,s=n.cell;s.visible||(0,i.tO)(new Error("Cell is invisible")),s.getFrameImageCell()!==a&&(0,i.tO)(new Error("Cell is frame not true")),s.setAlpha(1),s.setFrameImageCell(a)}},n.handleGameOver=function(){if(!this.scene.isLevelComplete){for(var e=this.scene.layoutManager.objects.footer,t=[],n=e.pieces.piecesActive,i=e.pieces.allPieces,a=0;a<n.length;a++){var s=n[a],r=s.position;if(!s.used){var o=i[r].piece;t.push({data:o.data,type:o.type,direction:o.direction,isReverse:o.isReverse,frame:o.frame})}}yv(this.dataBoard,t)&&(this.scene.isGameOver=!0,this.scene.disableInput(),this.runAnimationGameOver())}},n.runAnimationGameOver=function(){var e=this;try{this.scene.audio.playSound(Ka.Z.BOARD_GAME_OVER);for(var t=[],n=function(n){for(var i=function(i){if(e.dataBoard[n]&&e.dataBoard[n][i]&&1===e.dataBoard[n][i].value){var a=Math.floor(100*(n+1));t.push({delay:a,x:i,y:n}),e.scene.time.delayedCall(a,(function(){e.dataBoard[n][i].cell.playAnimImageGameOver()}))}},a=0;a<xP;a++)i(a)},i=0;i<kP;i++)n(i);this.scene.time.addEvent({delay:t[t.length-1].delay+300,callback:function(){e.scene.handleRequestFinishGame()}})}catch(a){}},n.getBoardByFen=function(e){var t=[],n=e.split(" ");if(n.length<2)throw new Error("Invalid fen");for(var i=n[0].split("/"),a=i.length,s=0;s<a;s++){t[s]=[];for(var r=wv(i[s]),o=0;o<r.length;o++)t[s][o]=r[o]}return t},n.getFenByBoard=function(){for(var e="",t=0;t<kP;t++){for(var n="",i=0;i<xP;i++){var a=this.dataBoard[t][i],s=a.value,r=a.frame,o=Pv(r)||"g";switch(s){case 0:n+=",x";break;case 1:n+=","+o}}e+="/"+(n=n.substring(1))}return e.substring(1)},n.startGame=function(e,t){if(e){for(var n=0;n<e.length;n++)for(var a=0;a<e[n].length;a++){var s=e[n][a].frame,r=e[n][a].value,o=this.dataBoard[n][a];1===r&&(s&&s!==RP.GEM_TRANSPARENT||((0,i.R0)(new Error("MapByBoardError"),{level:this.scene.levelManager.getLevel(),row:n,col:a,frame:s,fen:t}),s=RP.GEM),o.value=1,o.frame=s,o.cell.setFrameImageCell(s),o.cell.setScale(0))}this.fadeIn()}},n.clearBoard=function(){for(var e=0;e<kP;e++)for(var t=0;t<xP;t++){var n=this.dataBoard[e][t];n.value=0,n.frame=RP.GEM_TRANSPARENT,n.cell.reset(),n.cell.setFrameImageCell(RP.GEM_TRANSPARENT),n.cell.resetImageGameOver()}},n.isCellHighlight=function(e){var t,n=Ae()(t=this.cellsHighlight).call(t,(function(t){return t.x===e.x&&t.y&&e.y}));return!!(n&&n.length>0)},n.setFrameBoardByIndex=function(e,t,n){var i=this.dataBoard[e][t],a=i.cell;a.setFrameImageCell(n),i.frame=n,i.value=1,a.setScale(0)},n.getFrameByMapItemIndex=function(e){return hv[e]},n.fadeOut=function(){for(var e=[],t=0;t<kP;t++)for(var n=0;n<xP;n++){var i=this.dataBoard[t][n];i.value&&e.push(i.cell)}if(!e||0===e.length)return null;var a=this.scene.add.tween({targets:e,duration:300,ease:Phaser.Math.Easing.Quadratic.InOut,alpha:{from:1,to:0},scale:{from:1,to:0},paused:!0});return a.play(),a},n.fadeIn=function(){for(var e=[],t=0;t<kP;t++)for(var n=0;n<xP;n++){var i=this.dataBoard[t][n];i.value&&e.push(i.cell)}e&&0!==e.length&&this.scene.add.tween({targets:e,duration:300,ease:Phaser.Math.Easing.Quadratic.InOut,alpha:{from:0,to:1},scale:{from:0,to:1},paused:!0}).play()},t}(Phaser.GameObjects.Container),MP=GameCore.Configs.Gameplay.VibrateValue,NP=Wa.Z.EFFECTS,BP=NP.KEY,GP=NP.FRAME,FP=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n.listScore=[],n.score=void 0,n.startX=void 0,n.startY=void 0,n.scoreText=void 0,n.tweenShowScoreText=void 0,n.tweenHideScoreText=void 0,n.tweenShowPraiseFrame=void 0,n.tweenHidePraiseFrame=void 0,n.praiseFrame=void 0,n.praiseScoreText=void 0,n.particle=void 0,n.emitter=void 0,n.scene=t,t.add.existing((0,Ba.Z)(n)),n.setVisible(!1).setAlpha(0),n.init(),n}(0,o.Z)(t,e);var n=t.prototype;return n.init=function(){this.createScoreText(),this.createPraiseFrame(),this.createPraiseScoreText(),this.createParticle(),this.createEmitter()},n.createParticle=function(){this.particle=this.scene.add.particles(BP),this.particle.setDepth(Va.Z.ON_TOP+1)},n.createEmitter=function(){this.emitter=this.particle.createEmitter({x:0,y:0,scale:{start:.05,end:.2},speed:{min:20,max:70},lifespan:{min:500,max:1e3},quantity:20,on:!1,tint:[16441092,16422659],frame:GP.FX_STAR,delay:350})},n.createScoreText=function(){this.scoreText=this.scene.make.bitmapText({font:Xa.Z.NUMBER_LIGHT.KEY,size:this.scene.fontSize(50),text:"+0",origin:{x:.5,y:.5}}),this.scoreText.setScale(0).setAlpha(0),this.scoreText.setDepth(Va.Z.ON_TOP),this.scoreText.setVisible(!1)},n.createTweenScoreText=function(){var e=this,t=this.scene.layoutManager.objects.header.mainScoreBlock.scoreText.getWorldPosition(),n=t.x,i=t.y;this.tweenShowScoreText=this.scene.tweens.add({paused:!0,targets:this.scoreText,scale:{from:0,to:1},alpha:{from:0,to:1},duration:300,onComplete:function(){e.tweenHideScoreText=e.scene.tweens.add({targets:e.scoreText,scale:{from:1,to:.5},alpha:{from:1,to:.5},x:n,y:i,delay:1e3,duration:300,onComplete:function(){e.scoreText.setVisible(!1),e.scoreText.setAlpha(0),e.scoreText.setScale(0),e.scene.handleAddScoreAnim(e.score||0)}})}})},n.playAnimShowScoreText=function(){var e=this.scene.layoutManager.objects.header;if(this.tweenHideScoreText&&this.tweenHideScoreText.isPlaying()){this.tweenHideScoreText.stop(),this.scoreText.setPosition(this.startX,this.startY);var t=this.scene.storage.getState(),n=0;Ec(t)===fa&&(n=e.mainScoreBlock.score,e.mainScoreBlock.setScore(n+(this.score||0)),e.mainScoreBlock.setScoreText(n+(this.score||0)))}this.score=this.listScore.shift()||0,this.scene.handleUpdateScore(this.score),this.scoreText.setScale(0).setAlpha(0).setVisible(!0),this.tweenShowScoreText.play()},n.createPraiseFrame=function(){this.praiseFrame=this.scene.make.image({x:0,y:0,key:BP}),this.praiseFrame.setScale(0),this.praiseFrame.setAlpha(0),this.praiseFrame.setDepth(Va.Z.ON_TOP),this.praiseFrame.setVisible(!1)},n.createTweenPraiseFrame=function(){var e=this;if(!this.tweenShowPraiseFrame||!this.tweenHidePraiseFrame){var t=this.praiseFrame.scale;this.tweenShowPraiseFrame=this.scene.tweens.add({paused:!0,targets:this.praiseFrame,scale:{from:0,to:t},alpha:{from:0,to:1},duration:300,delay:100,ease:Phaser.Math.Easing.Back.Out,onComplete:function(){e.tweenHidePraiseFrame.play()}}),this.tweenHidePraiseFrame=this.scene.tweens.add({paused:!0,targets:this.praiseFrame,scale:{from:t,to:0},alpha:{from:1,to:0},duration:300,delay:1e3,onComplete:function(){e.praiseFrame.setScale(0),e.praiseFrame.setAlpha(0),e.praiseFrame.setVisible(!1)}})}},n.playAnimShowPraiseFrame=function(){this.createTweenPraiseFrame(),(this.tweenShowPraiseFrame.isPlaying()||this.tweenHidePraiseFrame.isPlaying())&&(this.tweenShowPraiseFrame.resetTweenData(!1),this.tweenHidePraiseFrame.resetTweenData(!1)),this.praiseFrame.setScale(0).setAlpha(0).setVisible(!0),this.tweenShowPraiseFrame.play()},n.createPraiseScoreText=function(){this.praiseScoreText=this.scene.make.bitmapText({font:Xa.Z.PRIMARY.KEY,size:this.scene.fontSize(30),origin:{x:.5,y:.5}}),this.praiseScoreText.setDepth(Va.Z.ON_TOP),this.add(this.praiseScoreText),Phaser.Display.Align.In.Center(this.praiseScoreText,this,0,20)},n.handlePraise=function(e,t,n,i){this.startX=e,this.startY=t+15,this.listScore.push(n);var a=e-10,s=this.scene.targetMissionManager.getTargetType()===OT;this.scoreText.setPosition(a,t+15),this.scoreText.setText("+"+n),this.scoreText.setVisible(s),a-this.scoreText.fontSize/2<0&&(a+=this.scoreText.fontSize/2,this.scoreText.setPosition(a,t+15)),s&&(this.playAnimShowScoreText(),this.handlePraiseFrameText(e,t,i));var r=this.getVibrateByLevel(i);this.scene.player.getPlayerSettings().vibrate&&Zp(r),i<=1||this.changeExplode(a,t,i)},n.getVibrateByLevel=function(e){return MP[e]||0},n.changeExplode=function(e,t,n){var i=this.getExplodeByLevel(n);i&&(this.emitter.setScale({start:.05*i.scale,end:.2*i.scale}),this.emitter.setSpeed({min:30*i.speed,max:80*i.speed}),this.emitter.setQuantity(20*i.quantity)),this.emitter.explode(20*i.quantity,e,t)},n.handlePraiseFrameText=function(e,t,n){var i=this.scene.world.getPixelRatio(),a=this.getMainFrameByLevel(n);if(a){var s=this.scene.targetMissionManager.getTargetType()===OT?-40:0;switch(a){case GP.TEXT_COOL:case GP.TEXT_GOOD:case GP.TEXT_EXCELLENT:}this.praiseFrame.setFrame(a);var r=this.praiseFrame,o=r.width/i,c=r.height/i;this.praiseFrame.setWorldSize(o,c);var l=this.praiseFrame.displayWidth,h=e,u=this.scene.gameZone.width;h=e-l/2<0?l/2+5:e+l/2>u?u-l/2-5:e,this.praiseFrame.setPosition(h,t+s),this.playAnimShowPraiseFrame()}},n.getExplodeByLevel=function(e){return Vf[e-1]||Vf[0]||null},n.getMainFrameByLevel=function(e){if(e>6)return Wa.Z.EFFECTS.FRAME.TEXT_EXCELLENT;var t=Yf[e-1]||Yf[0];return Phaser.Utils.Array.GetRandom(t.frames)},n.reset=function(){this.createTweenScoreText()},t}(Phaser.GameObjects.Container),UP=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n.board=void 0,n.praise=void 0,n.scene=t,t.add.existing((0,Ba.Z)(n)),n.init(),n}(0,o.Z)(t,e);var n=t.prototype;return n.init=function(){this.createBoard(),this.createPraise()},n.createBoard=function(){this.board=new DP(this.scene,354,352),this.add(this.board)},n.createPraise=function(){this.praise=new FP(this.scene)},t}(Phaser.GameObjects.Container),HP=UP,ZP=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n.header=void 0,n.main=void 0,n.footer=void 0,n.scene=t,n.createObjects(),n}(0,o.Z)(t,e);var n=t.prototype;return n.createObjects=function(){this.createHeader(),this.createMain(),this.createFooter()},n.createHeader=function(){this.header=new EP(this.scene),this.group.add(this.header)},n.createMain=function(){this.main=new HP(this.scene),this.group.add(this.main)},n.createFooter=function(){this.footer=new NO(this.scene),this.group.add(this.footer)},t}(ug),YP=ZP,VP=function(e){function t(t){var n;return(n=e.call(this,t)||this).objects=void 0,n.guideUI=void 0,n.objects=null,n}(0,o.Z)(t,e);var n=t.prototype;return n.alignUI=function(){if(null!==this.objects){var e=this.scene.gameZone;this.objects.header.setSize(e.width,0),Phaser.Display.Align.In.TopCenter(this.objects.header,e),Phaser.Display.Align.In.Center(this.objects.main,e,0,0),Phaser.Display.Align.In.BottomCenter(this.objects.footer,e,0,30),this.objects.header.updateUIPortrait(),this.objects.footer.updateUIPortrait()}},n.createGroups=function(){e.prototype.createGroups.call(this),this.guideUI=this.scene.add.group(),this.groups.guideUI=this.guideUI},n.setUIObjects=function(t){e.prototype.setUIObjects.call(this,t),this.addUIObjectsToGroups()},n.addUIObjectsToGroups=function(){null!==this.objects&&this.addObjectForGuideUI()},n.addObjectForGuideUI=function(){this.objects},t}(fg),WP=VP,zP=function(e){function t(){return e.apply(this,arguments)||this}return(0,o.Z)(t,e),t.prototype.alignUI=function(){if(null!==this.objects){var e=this.scene.gameZone;Phaser.Display.Align.In.Center(this.objects.header,e,0,-195),Phaser.Display.Align.In.Center(this.objects.main,e,0,20),Phaser.Display.Align.In.Center(this.objects.footer,e,300,0),this.objects.header.updateUILandscape(),this.objects.footer.updateUILandscape()}},t}(WP),KP=zP,jP=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n.scene=t,n}(0,o.Z)(t,e);var n=t.prototype;return n.createObjects=function(){this.objects=new YP(this.scene)},n.createLayouts=function(){this.scene.world.isLandscape()?this.layout=new KP(this.scene):this.layout=new WP(this.scene),this.layout.setUIObjects(this.objects)},n.initUILogic=function(){this.objects.main.board.woodenEffect.init(),this.objects.footer.pieces.init()},n.updateUIState=function(){},t}(Ig),XP=jP,JP=GameCore.Configs,qP=JP.Board,QP=JP.Network,$P=Wa.Z.GAMEPLAY_32.FRAME,eR=function(e){function t(){for(var t,n,a=arguments.length,s=new Array(a),o=0;o<a;o++)s[o]=arguments[o];return(n=e.call.apply(e,T()(t=[this]).call(t,s))||this).lastTimeInputEnabled=0,n.layoutManager=void 0,n.tutorialManager=void 0,n.levelManager=void 0,n.mapManager=void 0,n.targetMissionManager=void 0,n.effectManager=void 0,n.isGameOver=void 0,n.isLevelComplete=void 0,n.restartCurrentLevel=0,n.startGameAt=void 0,n.run=function(){n.initManager();var e=n.storage.getState();!0!==Tc(e)&&n.storage.dispatch(Ch(!0)),n.updateCurrentBestScore(),n.preloadNextLevel(),n.startGame(),n.analytics.levelStart(n.levelManager.getLevel(),void 0,n.getLevelName())},n.create=function(){e.prototype.create.call((0,Ba.Z)(n)),n.createBackground(pa.Z.BACKGROUND.KEY),n.createManager(),n.createScreens(),n.createInput(),n.input.setTopOnly(!0),n.preLoadAds()},n.onConfirm=function(){FBInstant.player.setDataAsync({level:1}),n.storage.dispatch(gh(1)),n.levelManager.setLevel(1),n.screen.close(za.o4.START_OVER_SCREEN),n.screen.close(za.o4.MISSION_COLLECTION_COMPLETE_SCREEN),n.handleRestartLevel()},n.handleClickStartOver=function(){n.screen.open(za.o4.START_OVER_SCREEN,{onConfirm:n.onConfirm})},n.handlePauseGame=function(){n.isGameOver||n.isLevelComplete||(0,Ba.Z)(n).screen.open(za.o4.SETTINGS_SCREEN)},n.handleShowInterstitialAd=(0,r.Z)(l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,n.audio.pauseMusic(),n.audio.muteAll(),n.ads.canbeShowInterstitialAd()){e.next=5;break}return e.abrupt("return");case 5:return n.game.globalScene.screen.open(za.o4.NOTIFY_SCREEN,{message:n.game.lang.Text.LOADING_AD,loading:!0}),e.next=8,n.ads.showInterstitialAdAsync();case 8:e.next=13;break;case 10:return e.prev=10,e.t0=e.catch(0),e.abrupt("return");case 13:return e.prev=13,n.game.globalScene.screen.close(za.o4.NOTIFY_SCREEN),window.focus(),n.ads.preloadInterstitialAdAsync().catch(i.tO),n.audio.unmuteAll(),n.audio.playMusic(),e.finish(13);case 20:case"end":return e.stop()}}),e,null,[[0,10,13,20]])}))),n}(0,o.Z)(t,e);var n=t.prototype;return n.preload=function(){this.events.on(Phaser.Scenes.Events.WAKE,this.run),this.events.on(Phaser.Scenes.Events.CREATE,this.run)},n.preLoadAds=function(){this.ads.preloadInterstitialAdAsync().catch((function(e){})),this.ads.preloadRewardedVideoAsync().catch((function(e){}))},n.createManager=function(){this.layoutManager=new XP(this),this.tutorialManager=new JC(this),this.levelManager=new BI(this),this.mapManager=new GI(this),this.effectManager=new cO(this),this.targetMissionManager=new FI},n.initManager=function(){this.layoutManager.init(),this.levelManager.init(),this.mapManager.init(),this.effectManager.init()},n.createInput=function(){this.isGameOver||(this.layoutManager.objects.header.buttonSetting.onClick=this.handlePauseGame)},n.createScreens=function(){this.createMissionScoreCompleteScreen(),this.createMissionCollectionCompleteScreen(),this.createCollectionCompletedScreen(),this.createNoSpaceLeftScreen(),this.createMissionFailScreen(),this.createSettingScreen(),this.createCollectionItemsScreen(),this.createLeaderboardScreen(),this.createDailyChallengeModeScreen(),this.createMiniJourneyScreen(),this.createTargetScoreScreen(),this.createClaimHeartScreen(),this.createStartOverScreen()},n.createLeaderboardScreen=function(){this.screen.add(za.o4.LEADER_BOARD_SCREEN,uu)},n.createCollectionCompletedScreen=function(){this.screen.add(za.o4.COLLISION_COMPLETED_SCREEN,HI)},n.createMissionScoreCompleteScreen=function(){this.screen.add(za.o4.MISSION_SCORE_COMPLETE_SCREEN,WI)},n.createMissionCollectionCompleteScreen=function(){this.screen.add(za.o4.MISSION_COLLECTION_COMPLETE_SCREEN,XI)},n.createDailyChallengeModeScreen=function(){this.screen.add(za.o4.DAILY_CHALLENGE_SCREEN,Tb)},n.createMissionFailScreen=function(){this.screen.add(za.o4.MISSION_FAIL_SCREEN,rC)},n.createNoSpaceLeftScreen=function(){this.screen.add(za.o4.NO_SPACE_LEFT_SCREEN,qI)},n.createSettingScreen=function(){this.screen.add(za.o4.SETTINGS_SCREEN,kC)},n.createCollectionItemsScreen=function(){this.screen.add(za.o4.COLLECTION_ITEMS_SCREEN,VC)},n.createMiniJourneyScreen=function(){this.screen.add(za.o4.MINI_JOURNEY_SCREEN,Qb)},n.createTargetScoreScreen=function(){this.screen.add(za.o4.TARGET_SCORE_SCREEN,iO)},n.createClaimHeartScreen=function(){this.screen.add(za.o4.CLAIM_HEART_SCREEN,by)},n.createStartOverScreen=function(){this.screen.add(za.o4.START_OVER_SCREEN,pO)},n.updateCurrentBestScore=function(){var e=this.layoutManager.objects.header,t=this.player.getBestScore(),n=this.storage.getState(),i=Uc(n).bestScore,a=void 0===i?0:i,s=t>a?t:a;e.bestScoreBlock.setScoreText(s)},n.openLevelScreen=function(){this.screen.open(za.o4.LEVEL_SCREEN)},n.handleNextLevel=function(){var e=this.levelManager.getNextLevelConfig();if(e){var t=e.key;this.cache.tilemap.exists(t)?this.handleLoadMapComplete():(this.preloadNextLevel(),this.load.off(Phaser.Loader.Events.COMPLETE),this.load.once(Phaser.Loader.Events.COMPLETE,this.handleLoadMapComplete.bind(this)))}else{this.levelManager.increaseLevel();var n=this.levelManager.getLevel();FBInstant.player.setDataAsync({level:n})}},n.handleSwitchJourney=function(){var e=this.levelManager.getLevelConfig();if(e){var t=e.key;this.cache.tilemap.exists(t)?this.handleSwitchMode():(this.preloadCurrentLevel(),this.load.off(Phaser.Loader.Events.COMPLETE),this.load.once(Phaser.Loader.Events.COMPLETE,this.handleLoadMapComplete.bind(this)))}},n.handleSwitchMode=function(){var e,t=this.levelManager.getLevel();this.storage.dispatch((e={data:"",level:t,listPieceMap:[]},function(t,n){var i=window.game.player.getPlayerId(),a=n(),r=sl(a),o=(0,s.Z)({},r,e),c=o.data;o.data=ql(c),t(ih(o)),wl(Jl.JourneyMatchStore+"-"+i,o)})),FBInstant.player.setDataAsync({level:t}),this.mapManager.reloadMap(),this.clearFen()},n.handleLoadMapComplete=function(){this.levelManager.increaseLevel();var e=this.levelManager.getLevel();FBInstant.player.setDataAsync({level:e}),this.mapManager.reloadMap()},n.handleGuideIfLevel1=function(){var e=this.storage.getState();cl(e)||1===this.levelManager.getLevel()&&this.tutorialManager.start()},n.startGame=function(){try{var e,t,n=this.layoutManager.objects,a=n.header,s=n.main,r=n.footer;null==(e=a.mainScoreBlock.addScore)||e.stop().remove(),a.mainScoreBlock.setScore(0),a.mainScoreBlock.setScoreText(0),a.progressBar.hideProgressBar(),a.progressBar.setPercent(0),this.isGameOver=!1,this.isLevelComplete=!1,this.mapManager.reloadMap(),null==(t=this.tutorialManager)||t.reset(),s.board.clearBoard(),r.pieces.clearPieces(),this.loadTargetByMap(),a.start(),this.loadBoardAndPieces(),this.loadTargetAmountByFen(),this.loadTextHeader(),this.restartCurrentLevel=0,this.openMissionScreen()}catch(o){this.handleRestartLevel(),(0,i.R0)(o,{scene:"Journey scene"})}},n.startGameAfterCollectionItemsScreenClose=function(){var e,t=this.layoutManager.objects.footer;this.startGameAt=(new Date).getTime();var n=this.storage.getState(),i=cl(n),a=((null==(e=sl(n))?void 0:e.data)||{}).fen;!a||i?(t.pieces.start(),this.handleGuideIfLevel1()):this.loadPiecesByFen(a)},n.openMissionScreen=function(){switch(this.targetMissionManager.getTargetType()){case PT:this.openCollectionItemsScreen();break;case OT:this.openTargetScoreScreen()}},n.openCollectionItemsScreen=function(){var e=this,t=this.layoutManager.objects.header,n=t.collectItems.getJsonTarget();t.collectItems.hideListCollectItems(),this.disableInput(),this.time.delayedCall(500,(function(){e.enableInput(),e.screen.open(za.o4.COLLECTION_ITEMS_SCREEN,{jsonTarget:n,duration:1500})}))},n.openTargetScoreScreen=function(){var e=this;this.disableInput();var t=this.layoutManager.objects,n=t.header,i=t.main;n.collectItems.reset(),i.praise.reset(),this.time.delayedCall(500,(function(){e.enableInput(),e.screen.open(za.o4.TARGET_SCORE_SCREEN,{duration:1500})}))},n.showCollectItems=function(){this.layoutManager.objects.header.collectItems.showListCollectItems()},n.loadBoardAndPieces=function(){var e,t=this.layoutManager.objects,n=t.main,i=t.footer,a=this.storage.getState(),s=cl(a),r=((null==(e=sl(a))?void 0:e.data)||{}).fen,o=null,c=null;if(r&&!s){var l=n.board.getBoardByFen(r);return o=this.handleDynamicFenSize(l),c=i.pieces.getPiecesByFen(r),this.isFenGameOver(o,c)?(this.clearFen(),this.loadBoardByMap(),void this.loadPiecesByMap()):void this.loadBoardByFen(r)}this.loadBoardByMap(),this.loadPiecesByMap()},n.loadBoardByFen=function(e){var t=this.layoutManager.objects.main,n=t.board.getBoardByFen(e);t.board.startGame(n,e)},n.loadBoardByMap=function(){for(var e=this.layoutManager.objects.main,t=this.mapManager.getTileMap().layers,n=t.length,a=0;a<n;a++)for(var s=t[a].data,r=0;r<s.length;r++)for(var o=s[r],c=0;c<o.length;c++){var l=o[c];if(!(l.index<0)){var h=e.board.getFrameByMapItemIndex(l.index-1);h&&h!==$P.GEM_TRANSPARENT||(h=e.board.getFrameByMapItemIndex(1),(0,i.R0)(new Error("MapByBoardError"),{index:l.index,level:this.levelManager.getLevel(),row:r,col:c})),e.board.setFrameBoardByIndex(r,c,h)}}e.board.fadeIn()},n.loadPiecesByFen=function(e){var t=this.layoutManager.objects.footer,n=t.pieces.getPiecesByFen(e);t.pieces.showAvailablePieces(n),this.loadListPieceMapByFen()},n.loadListPieceMapByFen=function(){var e=this.layoutManager.objects.footer,t=this.storage.getState(),n=sl(t).listPieceMap;n&&0!==n.length&&e.pieces.setListPieceMap(n)},n.loadPiecesByMap=function(){var e=this.layoutManager.objects.footer;e.pieces.buildPiecesByMap();var t=this.mapManager.getTileMap().getObjectLayer("spawnOrder");if(t)for(var n=t.objects,i=0;i<n.length;i++){var a=n[i],r=a.type,o=a.properties,c=e.pieces.getPieceDataByType(r);o&&(c=(0,s.Z)({},c,{properties:o})),c&&e.pieces.addItemPieceMap(c)}},n.loadTargetByMap=function(){var e=this.mapManager.getTileMap().properties;if(!e||!(0,Tf.isArray)(e)||e.length<2)throw new _C;var t=e[0].value,n=e[1].value;this.targetMissionManager.setTargetValue(t),this.targetMissionManager.setTargetType(n)},n.loadTargetAmountByFen=function(){var e,t=this.layoutManager.objects.header;t.collectItems.resetTextAmount();var n=this.storage.getState();if(!cl(n)){var i=((null==(e=sl(n))?void 0:e.data)||{}).jsonAmount;i&&0!==q()(i).length&&t.collectItems.updateJsonAmountByFen(i)}},n.loadTextHeader=function(){var e=this.layoutManager.objects.header,t=this.storage.getState();if(cl(t))return e.bestScoreBlock.showTextDay(),void e.bestScoreBlock.setDayText(this.getTextDay());var n=this.levelManager.getLevel();e.bestScoreBlock.showTextScore(),e.bestScoreBlock.setScoreText(n)},n.getTextDay=function(){var e,t=new Date,n="0"+t.getDate(),i="0"+(t.getMonth()+1),a=g()(e=String(t.getFullYear())).call(e,-2);return g()(i).call(i,-2)+"/"+g()(n).call(n,-2)+"/"+a},n.getFen=function(){var e=this.layoutManager.objects,t=e.main,n=e.footer;return t.board.getFenByBoard()+" "+n.pieces.getFenByPieces()},n.handleRestartLevel=function(){this.restartCurrentLevel>0||(this.game.globalScene.screen.open(za.o4.NOTIFY_SCREEN,{message:this.lang.Text.RESTARTING_MAP,duration:QP.Timeout,loading:!0}),this.restartCurrentLevel++,this.preloadCurrentLevel(),this.load.off(Phaser.Loader.Events.COMPLETE),this.load.once(Phaser.Loader.Events.COMPLETE,this.handleLoadCurrentMapComplete.bind(this)),this.load.off(Phaser.Loader.Events.FILE_LOAD_ERROR),this.load.once(Phaser.Loader.Events.FILE_LOAD_ERROR,this.handleLoadCurrentMapError.bind(this)))},n.handleGameOver=function(){this.isGameOver=!0,this.screen.open(za.o4.GAME_OVER_SCREEN)},n.handleRequestFinishGame=function(){var e=this;this.isGameOver=!0,this.clearFen();var t=this.storage.getState();if(cl(t)){var n,a=ST(),s=Ya()(n=GameCore.Utils.Number).call(n,a,4,"0");this.analytics.event(Ot._.DAILY_CHALLENGE_FAIL,{level:a,levelName:"daily_challenge_"+s})}else this.storage.dispatch(function(){var e=(0,r.Z)(l().mark((function e(t,n){var i,a,s,r,o,c,h,u;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,i=window.game.player,a=i.getPlayer(),s=a.playerId,r=n(),o=Sf(r),c=Af(r),(h=o-hA.bonusLife)>hA.livesCapacity&&(h=hA.livesCapacity),h<0&&(h=0),t({type:Ni,payload:{data:u={lives:h,lastBonusLifeTime:c}}}),e.next=13,window.FBInstant.player.setDataAsync({lives:u});case 13:wl(lA.LivesStore+"-"+s,u),e.next=18;break;case 16:e.prev=16,e.t0=e.catch(0);case 18:case"end":return e.stop()}}),e,null,[[0,16]])})));return function(t,n){return e.apply(this,arguments)}}()),this.analytics.levelFail(this.levelManager.getLevel(),void 0,this.getLevelName());this.screen.open(za.o4.NO_SPACE_LEFT_SCREEN,{duration:3e3,onClose:function(){var t=(0,r.Z)(l().mark((function t(){return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.handleShowInterstitialAd().catch(i.tO);case 2:e.screen.open(za.o4.MISSION_FAIL_SCREEN);case 3:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()})},n.checkAnimPlaying=function(){var e=this.tweens.getAllTweens();return!(!e||0===e.length)},n.disableInput=function(){var e=this.layoutManager.objects.footer;this.input.enabled=!1,e.pieces.allPieces.forEach((function(e){return e.piece.cancelDrag()}))},n.enableInput=function(){this.input.enabled=!0},n.handleUpdateScore=function(e){var t=this.layoutManager.objects.header.mainScoreBlock.score+e;this.storage.dispatch(function(e){return{type:kn,payload:{score:e}}}(t))},n.handleAddScoreAnim=function(e){this.layoutManager.objects.header.mainScoreBlock.animAddScore(e)},n.updateProgressTargetScore=function(e){var t=this.layoutManager.objects.header,n=t.progressBar.getTargetScore();t.progressBar.setPercent(e/n)},n.handleCompleteScoreMission=function(){var e=this;if(!this.isGameOver&&this.targetMissionManager.getTargetType()===OT){var t=this.layoutManager.objects.header.mainScoreBlock.score,n=parseInt(this.targetMissionManager.getTargetValue());if(!(t<n)){var a=this.storage.getState();if(cl(a)){var s,o=ST(),c=Ya()(s=GameCore.Utils.Number).call(s,o,4,"0");this.handleSwitchJourney(),this.analytics.event(Ot._.DAILY_CHALLENGE_END,{level:o,levelName:"daily_challenge_"+c})}else this.handleNextLevel(),this.analytics.levelComplete(n,void 0,this.getLevelName());this.isGameOver=!0,this.screen.open(za.o4.COLLISION_COMPLETED_SCREEN,{duration:3e3,onClose:function(){var t=(0,r.Z)(l().mark((function t(){return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.isLevelComplete=!1,t.next=3,e.handleShowInterstitialAd().catch(i.tO);case 3:e.showPopupCompleteScreenAfterCollectionCompleted();case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()})}}},n.canUpdateFenMatch=function(){var e=this.storage.getState(),t=cl(e);return!(this.isGameOver||this.isLevelComplete||t)},n.updateMatchData=function(){var e;if(this.canUpdateFenMatch()){var t=this.layoutManager.objects,n=t.header,i=t.footer,a=this.getFen(),r=this.storage.getState(),o=sl(r).data||{},c=rl(r),l=ll(r)||0,h=this.levelManager.getLevel(),u=n.collectItems.getJsonAmount(),d=i.pieces.getListPieceMap();this.storage.dispatch(eh(c,{score:l,data:(0,s.Z)({},o,{fen:a,jsonAmount:(0,s.Z)({},u)}),level:h,updateAt:Date.now(),listPieceMap:T()(e=[]).call(e,d)}))}},n.clearFen=function(){var e=this.storage.getState(),t=rl(e),n=this.levelManager.getLevel();this.storage.dispatch(eh(t,{score:0,data:{fen:"",jsonAmount:{}},level:n,listPieceMap:[],updateAt:Date.now()}))},n.update=function(e){this.input.enabled||this.checkAnimPlaying()?this.lastTimeInputEnabled=e:e-this.lastTimeInputEnabled>=3e3&&(this.enableInput(),this.lastTimeInputEnabled=e)},n.isFenGameOver=function(e,t){for(var n=[],i=0;i<t.length;i++){var a=t[i],s=a.type,r=a.direction,o=a.isReverse;switch(s){case Wf:case zf:case Kf:n.push({data:AI.getData(s,r,o)});break;case jf:case Xf:case Jf:case qf:n.push({data:TI.getData(s,r)});break;case Qf:case $f:case em:n.push({data:CI.getData(s)});break;case nm:n.push({data:OI.getData(r)});break;case im:n.push({data:DI.getData(r)});break;case lm:n.push({data:NI.getData(r)});break;case sm:case rm:case om:case cm:n.push({data:RI.getData(s,r)});break;case tm:n.push({data:xI.getData(r)});break;case am:n.push({data:_I.getData()})}}return yv(e,n)},n.handleDynamicFenSize=function(e){var t,n,i=0;if((n=e.length)&&(i=e[0].length),0===n||0===i)return e;var a=T()(t=[]).call(t,e);if(n>qP.rows)Fa()(a).call(a,qP.rows,n-qP.rows);else if(i<qP.rows)for(var s=0;s<qP.rows-n;s++){var r;a.push(Ha()(r=new Array(n)).call(r,{value:0,frame:$P.GEM_TRANSPARENT}))}return i>qP.cols?a.forEach((function(e){Fa()(e).call(e,qP.cols,i-qP.cols)})):i<qP.cols&&a.forEach((function(e){for(var t=0;t<qP.cols-i;t++)e.push({value:0,frame:$P.GEM_TRANSPARENT})})),a},n.handleCollectionItemsComplete=function(){var e=this;if(this.targetMissionManager.getTargetType()!==OT&&this.layoutManager.objects.header.collectItems.checkCompleteMission()){this.clearFen(),this.audio.playSound(Ka.Z.TARGET_REACHED);var t=this.levelManager.getLevel(),n=this.storage.getState();if(sl(n).challengeMode){var a,s=ST(),o=Ya()(a=GameCore.Utils.Number).call(a,s,4,"0");this.handleSwitchJourney(),this.analytics.event(Ot._.DAILY_CHALLENGE_END,{level:s,levelName:"daily_challenge_"+o})}else this.handleNextLevel(),this.analytics.levelComplete(t,void 0,this.getLevelName());t>vf.length-1&&this.time.delayedCall(2e3,(function(){e.game.globalScene.screen.open(za.o4.NOTIFY_SCREEN,{message:e.lang.Text.UPDATING_NEW_LEVELS,duration:1e3}),e.time.delayedCall(1e3,(function(){e.scene.switch(Pa.Co.LEVEL_SCENE)}))})),this.screen.open(za.o4.COLLISION_COMPLETED_SCREEN,{duration:3e3,onClose:function(){var t=(0,r.Z)(l().mark((function t(){return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.isLevelComplete=!1,t.next=3,e.handleShowInterstitialAd().catch(i.tO);case 3:e.showPopupCompleteScreenAfterCollectionCompleted();case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()})}},n.showPopupCompleteScreenAfterCollectionCompleted=function(){var e=(0,r.Z)(l().mark((function e(){var t,n,i;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.storage.getState(),!cl(t)){e.next=9;break}return n=(new Date).getTime()-this.startGameAt,i=$C(t),this.storage.dispatch(kb({time:n,currentTime:i,limit:100,offset:0})),this.storage.dispatch(ph()),this.screen.open(za.o4.DAILY_CHALLENGE_SCREEN),e.abrupt("return");case 9:if(this.targetMissionManager.getTargetType()!==OT){e.next=12;break}return this.screen.open(za.o4.MISSION_SCORE_COMPLETE_SCREEN),e.abrupt("return");case 12:this.screen.open(za.o4.MISSION_COLLECTION_COMPLETE_SCREEN);case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.setLevelCompleted=function(e){this.targetMissionManager.getTargetType()!==OT&&(this.isLevelComplete=e)},n.handleRetryLevel=function(){var e=this.storage.getState();if(sl(e).challengeMode){var t,n=ST(),i=Ya()(t=GameCore.Utils.Number).call(t,n,4,"0");this.analytics.event(Ot._.DAILY_CHALLENGE_BEGIN,{level:n,levelName:"daily_challenge_"+i})}else this.analytics.levelStart(this.levelManager.getLevel(),void 0,this.getLevelName());this.layoutManager.objects.header.progressBar.reset(),this.clearFen(),this.startGame()},n.preloadNextLevel=function(){var e=this.levelManager.getNextLevelConfig();if(e){var t=e.key,n=e.mapJson;"level-from-json"!==t&&(this.cache.tilemap.exists(t)||(this.load.tilemapTiledJSON(t,n),this.load.start()))}},n.preloadCurrentLevel=function(){var e=this.levelManager.getLevelConfig();if(e){var t=e.key,n=e.mapJson;this.cache.tilemap.exists(t)?this.handleLoadCurrentMapComplete():(this.load.tilemapTiledJSON(t,n),this.load.start())}},n.handleLoadCurrentMapComplete=function(){var e=this.game.globalScene;this.mapManager.reloadMap(),this.clearFen(),this.startGame(),e.screen.close(za.o4.NOTIFY_SCREEN)},n.handleLoadCurrentMapError=function(e){var t=this.game.globalScene,n=new _S("Load resources at LoadScene failed.");(0,i.R0)(n,{file:null==e?void 0:e.url}),t.screen.close(za.o4.NOTIFY_SCREEN)},n.getLevelName=function(){var e,t=this.levelManager.getLevel();return"journey_"+Ya()(e=GameCore.Utils.Number).call(e,t,4,"0")},t}(du.Z),tR=eR;null==(xb=void 0)||xb.accept(GameCore.LiveUpdate.Scene(Pa.Co.JOURNEY_SCENE));var nR,iR=tR,aR=function(e){if("string"!==typeof e||!e)throw new Bc(null,{imageShare:e})},sR=Wa.Z.GAMEPLAY,rR=sR.KEY,oR=sR.FRAME,cR=function(e){function t(t){var n;return(n=e.call(this,t,rR,oR.BUTTON_WOOD_SMALL)||this).button.setWorldSize(64,55),n.setName("Home"),n.createIcon(),n}return(0,o.Z)(t,e),t.prototype.createIcon=function(){var e=this.scene.make.image({key:rR,frame:oR.ICON_HOME});e.setWorldSize(34,31),this.add(e),Phaser.Display.Align.In.Center(e,this,0,-2)},t}(ja.Z),lR=cR,hR=Wa.Z.DEFAULT,uR=hR.KEY,dR=hR.FRAME,pR=function(e){function t(t){var n;return(n=e.call(this,t,uR,dR.BUTTON_GREEN)||this).nextLevel=void 0,n.button.setWorldSize(182,55),n.setName("Play Level"),n.createText(),n}return(0,o.Z)(t,e),t.prototype.createText=function(){var e=this.scene.world.getPixelRatio();this.nextLevel=this.scene.make.image({key:uR,frame:dR.TEXT_NEXT_LEVEL}),this.nextLevel.setWorldSize(this.nextLevel.width/e,this.nextLevel.height/e),this.add(this.nextLevel),Phaser.Display.Align.In.Center(this.nextLevel,this,0,-1)},t}(ja.Z),gR=pR,fR=Wa.Z.DEFAULT,mR=fR.KEY,vR=fR.FRAME,ER=function(e){function t(t){var n;return(n=e.call(this,t,mR,vR.BUTTON_GREEN)||this).textStartOver=void 0,n.button.setWorldSize(182,55),n.setName("Play Level"),n.createText(),n}return(0,o.Z)(t,e),t.prototype.createText=function(){var e=this.scene.world.getPixelRatio();this.textStartOver=this.scene.make.image({key:mR,frame:vR.TEXT_START_OVER});var t=this.textStartOver,n=t.width,i=t.height;this.textStartOver.setWorldSize(n/e,i/e),this.add(this.textStartOver),Phaser.Display.Align.In.Center(this.textStartOver,this,0,-1)},t}(ja.Z),SR=ER,AR=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n.buttonPlay=void 0,n.buttonStartOver=void 0,n.buttonHome=void 0,n.scene=t,n.init(),n.scene.add.existing((0,Ba.Z)(n)),n}(0,o.Z)(t,e);var n=t.prototype;return n.init=function(){this.createButton()},n.createButton=function(){this.createButtonPlay(),this.createButtonStartOver(),this.createButtonHome()},n.createButtonPlay=function(){this.buttonPlay=new gR(this.scene),this.add(this.buttonPlay),Phaser.Display.Align.In.Center(this.buttonPlay,this,40,1)},n.createButtonStartOver=function(){this.buttonStartOver=new SR(this.scene),this.add(this.buttonStartOver),Phaser.Display.Align.In.Center(this.buttonStartOver,this,40,1)},n.createButtonHome=function(){this.buttonHome=new lR(this.scene),this.add(this.buttonHome),Phaser.Display.Align.In.Center(this.buttonHome,this,-90,1)},n.updateTextButtonPlay=function(){var e=this.scene.storage.getState(),t=ol(e),n=this.scene.world.getPixelRatio();1===t?this.buttonPlay.nextLevel.setFrame(Wa.Z.DEFAULT.FRAME.TEXT_PLAY):this.buttonPlay.nextLevel.setFrame(Wa.Z.DEFAULT.FRAME.TEXT_NEXT_LEVEL),this.buttonPlay.nextLevel.setWorldSize(this.buttonPlay.nextLevel.width/n,this.buttonPlay.nextLevel.height/n)},t}(Phaser.GameObjects.Container),yR=AR,TR=Wa.Z.DEFAULT,IR=TR.KEY,CR=TR.FRAME,bR=function(e){function t(t){var n,i=(n=e.call(this,t,0,0,IR,CR.LEAF)||this).scene.gameZone.width,a=i*n.height/n.width;return n.setWorldSize(i,a),n.scene.add.existing((0,Ba.Z)(n)),n}return(0,o.Z)(t,e),t}(Phaser.GameObjects.Image),OR=bR,PR=Wa.Z.DEFAULT,RR=PR.KEY,wR=PR.FRAME,xR=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n.livesTimer=void 0,n.scene=t,t.add.existing((0,Ba.Z)(n)),n.init(),n}(0,o.Z)(t,e);var n=t.prototype;return n.init=function(){this.createText(),this.createLivesTimer()},n.createText=function(){var e=this.scene.world.getPixelRatio(),t=this.scene.make.image({key:RR,frame:wR.TEXT_JOURNEY});t.setWorldSize(t.width/e,t.height/e),this.add(t),Phaser.Display.Align.In.Center(t,this,0,14)},n.createLeaf=function(){var e=new OR(this.scene);this.add(e),Phaser.Display.Align.In.TopCenter(e,this,0,e.displayHeight/2-30)},n.createLivesTimer=function(){this.livesTimer=new uy(this.scene),this.livesTimer.startIntervalTimer(),this.add(this.livesTimer),Phaser.Display.Align.In.Center(this.livesTimer,this,0,50)},n.updateTextLives=function(){var e=this.scene.storage.getState(),t=Sf(e);this.livesTimer.setLives(t)},t}(Phaser.GameObjects.Container),kR=xR,_R=function(e){return e.PASSED="passed",e.READY="ready",e.WAITING="waiting",e}({}),LR=Wa.Z.DEFAULT,DR=LR.KEY,MR=LR.FRAME,NR=function(e){function t(t,n){var i;return(i=e.call(this,t)||this).scene=void 0,i.levelBackground=void 0,i.tick=void 0,i.levelNumber=void 0,i.level=void 0,i.tweenClick=void 0,i.payload=void 0,i.scene=t,i.init(),n&&i.updateInfo(n),i.scene.add.existing((0,Ba.Z)(i)),i}(0,o.Z)(t,e);var n=t.prototype;return n.init=function(){var e=this;this.createLevelBackground(),this.createImageCheck(),this.createText(),this.updateSize(),this.alignLevelItem(),this.setInteractive({useHandCursor:!0}),this.on(Phaser.Input.Events.POINTER_DOWN,(function(){e.scene.audio.playSound(Ka.Z.BUTTON_CLICK),e.tweenClick?e.tweenClick.play():e.scene.handlePlay()}))},n.createLevelBackground=function(){this.levelBackground=this.scene.make.image({key:DR,frame:MR.LEVEL_PLAYING}),this.levelBackground.setWorldSize(75,60),this.levelBackground.setVisible(!1),this.add(this.levelBackground)},n.updateSize=function(){var e=this.levelBackground,t=e.width,n=e.height;this.setSize(t,n)},n.createImageCheck=function(){this.tick=this.scene.make.image({key:DR,frame:MR.ICON_CHECK}),this.tick.setWorldSize(30,23),this.tick.setVisible(!1),this.add(this.tick)},n.createText=function(){this.levelNumber=this.scene.make.bitmapText({font:Xa.Z.PRIMARY.KEY,size:this.scene.fontSize(40),text:""+this.level,origin:{x:.2,y:.5}}),this.levelNumber.setAlpha(.7),this.levelNumber.setTint(7813671),this.add(this.levelNumber)},n.getLevel=function(){return this.level},n.updateInfoLevel=function(){switch(this.disableInteractive(),this.payload.status){case _R.PASSED:this.levelNumber.setAlpha(.7),this.levelBackground.setFrame(MR.LEVEL_PLAYED),this.tick.setVisible(!0);break;case _R.READY:this.levelNumber.setAlpha(.7),this.setInteractive({useHandCursor:!0}),this.createTweenClick(),this.levelBackground.setFrame(MR.LEVEL_PLAYING),this.tick.setVisible(!1);break;case _R.WAITING:this.levelNumber.setAlpha(.5),this.levelBackground.setFrame(MR.LEVEL_LOCKED),this.tick.setVisible(!1)}},n.updateInfo=function(e){this.payload=(0,s.Z)({},e),this.updateInfoLevel(),this.updateText(),this.updateBackground(),this.alignLevelItem()},n.createTweenClick=function(){var e=this,t=this.scale;this.tweenClick=this.scene.tweens.add({targets:[this],duration:100,paused:!0,yoyo:!0,scale:{from:t,to:t-.1},onComplete:function(){e.scene.handlePlay()}})},n.updateBackground=function(){this.levelBackground.setVisible(!0)},n.updateText=function(){this.levelNumber.setText(""+this.payload.level),Phaser.Display.Align.In.Center(this.levelNumber,this.levelBackground,0,0)},n.alignLevelItem=function(){Phaser.Display.Align.In.Center(this.tick,this.levelBackground,25,10),Phaser.Display.Align.In.Center(this.levelNumber,this.levelBackground,0,0)},n.setStatus=function(e){this.payload.status=e},n.setTextLevel=function(e){this.payload.level=e},t}(Phaser.GameObjects.Container),BR=Wa.Z.DEFAULT,GR=BR.KEY,FR=BR.FRAME,UR=function(e){function t(t,n){var i;return(i=e.call(this,t)||this).scene=void 0,i.background=void 0,i.levelItem1=void 0,i.levelItem2=void 0,i.levelItem3=void 0,i.levelItem4=void 0,i.payload=void 0,i.scene=t,i.init(),n&&i.updateInfo(n),i.scene.add.existing((0,Ba.Z)(i)),i}(0,o.Z)(t,e);var n=t.prototype;return n.init=function(){this.createBackground(),this.updateSize(),this.createLevelItem()},n.createBackground=function(){this.background=this.scene.make.image({key:GR,frame:FR.BG_DARK}),this.background.setWorldSize(325,64),this.background.setVisible(!1),this.add(this.background)},n.updateSize=function(){var e=this.background,t=e.width,n=e.height;this.setSize(t,n)},n.updateInfo=function(e){this.payload=(0,s.Z)({levelItem2:{level:0,status:""},levelItem3:{level:0,status:""},levelItem4:{level:0,status:""}},e),this.updateLevelItem()},n.createLevelItem=function(){this.levelItem1=new NR(this.scene,{level:1,status:_R.WAITING}),this.add(this.levelItem1),Phaser.Display.Align.In.Center(this.levelItem1,this,-120,0),this.levelItem2=new NR(this.scene,{level:2,status:_R.WAITING}),this.add(this.levelItem2),this.levelItem2.setVisible(!1),Phaser.Display.Align.In.Center(this.levelItem2,this,-40,0),this.levelItem3=new NR(this.scene,{level:3,status:_R.WAITING}),this.add(this.levelItem3),this.levelItem3.setVisible(!1),Phaser.Display.Align.In.Center(this.levelItem3,this,40,0),this.levelItem4=new NR(this.scene,{level:4,status:_R.WAITING}),this.add(this.levelItem4),this.levelItem4.setVisible(!1),Phaser.Display.Align.In.Center(this.levelItem4,this,120,0)},n.updateLevelItem=function(){if(this.levelItem1.setStatus(this.payload.levelItem1.status),this.levelItem1.updateInfoLevel(),this.levelItem1.setTextLevel(this.payload.levelItem1.level),this.levelItem1.updateText(),this.levelItem2){if(""==this.payload.levelItem2.status)return this.levelItem2.setVisible(!1),this.levelItem3&&this.levelItem3.setVisible(!1),void(this.levelItem4&&this.levelItem4.setVisible(!1));this.levelItem2.setStatus(this.payload.levelItem2.status),this.levelItem2.updateInfoLevel(),this.levelItem2.setVisible(!0),this.levelItem2.setTextLevel(this.payload.levelItem2.level),this.levelItem2.updateText()}if(this.levelItem3){if(""==this.payload.levelItem3.status)return this.levelItem3.setVisible(!1),void(this.levelItem4&&this.levelItem4.setVisible(!1));this.levelItem3.setStatus(this.payload.levelItem3.status),this.levelItem3.updateInfoLevel(),this.levelItem3.setVisible(!0),this.levelItem3.setTextLevel(this.payload.levelItem3.level),this.levelItem3.updateText()}if(this.levelItem4){if(""==this.payload.levelItem4.status)return void this.levelItem4.setVisible(!1);this.levelItem4.setStatus(this.payload.levelItem4.status),this.levelItem4.updateInfoLevel(),this.levelItem4.setVisible(!0),this.levelItem4.setTextLevel(this.payload.levelItem4.level),this.levelItem4.updateText()}},t}(Phaser.GameObjects.Container),HR=Wa.Z.DEFAULT,ZR=HR.KEY,YR=HR.FRAME,VR=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n.backgroundContent=void 0,n.backgroundContainer=void 0,n.scroller=void 0,n.createBackground=function(){n.backgroundContainer=n.scene.make.container({});var e=n.scene.gameZone,t=e.width,i=e.height,a=YR.BG_TOP,s=YR.BG_BOTTOM,r=YR.BG_MIDDLE;n.scene.world.getScreenHeight()<600&&(a=YR.BG_TOP_2,s=YR.BG_BOTTOM_2,r=YR.BG_MIDDLE_2);var o=n.scene.make.image({key:ZR,frame:a});o.setWorldSize(t,i);var c=n.scene.make.image({key:ZR,frame:s});c.setWorldSize(t,i);var l=n.scene.make.image({key:ZR,frame:r});l.setWorldSize(t,415),n.backgroundContainer.add([o,l,c]),Phaser.Display.Align.In.Center(l,n.backgroundContainer,0,0),Phaser.Display.Align.In.Center(o,l,0,-l.displayHeight/2-o.displayHeight/2),Phaser.Display.Align.In.Center(c,l,0,l.displayHeight/2+c.displayHeight/2),n.backgroundContainer.setDepth(Va.Z.BACKGROUND),n.setSizeBackground(o.displayHeight+l.displayHeight+c.displayHeight),n.backgroundContainer.setSize(t,415),n.add(n.backgroundContainer),Phaser.Display.Align.In.Center(n.backgroundContainer,(0,Ba.Z)(n),0,0)},n.scene=t,n.init(),n.createReuseScroller(),n.scene.add.existing((0,Ba.Z)(n)),n}(0,o.Z)(t,e);var n=t.prototype;return n.init=function(){this.createBackgroundContent(),this.createBackground()},n.createReuseScroller=function(){this.scroller=new Xh(this.scene,{classType:UR,listConfigs:[],width:325,height:385,padding:0,marginTop:0,marginBottom:0,maxScrollOver:.3,scrollingBackRate:5,useMask:!0}),this.scroller.setVisible(!1),this.scene.renderer instanceof Phaser.Renderer.WebGL.WebGLRenderer&&this.scroller.createBound(Wa.Z.DEFAULT.KEY,Wa.Z.DEFAULT.FRAME.BLANK,40,1528359),this.scroller.createMask(),this.scroller.setPosition(0,0),this.add(this.scroller)},n.setSizeBackground=function(e){var t=e*this.backgroundContent.displayWidth/this.backgroundContent.displayHeight;this.backgroundContent.setWorldSize(t,e)},n.updateData=function(){var e=this.scene.storage.getState(),t=ol(e);0===t&&(t=1);for(var n=[],i={levelItem1:{status:"",level:0}},a={levelItem1:{status:"",level:0}},r=1;r<vf.length;r++){var o="";o=r>t?_R.WAITING:r<t?_R.PASSED:_R.READY;var c="";switch(r%4){case 1:c="levelItem1";break;case 2:c="levelItem2";break;case 3:c="levelItem3";break;case 0:c="levelItem4"}i[c]={level:r,status:o},a[c]={level:r,status:o},r%4===0&&(n.push((0,s.Z)({},i)),a={levelItem1:{status:"",level:0}})}(vf.length-1)%4>0&&n.push((0,s.Z)({},a)),this.scroller.updateConfig(n);var l=this.scroller.getChildren()[0].height;if(this.scroller.value=-l*this.showDefaultLevel(t),t>vf.length)this.scene.game.globalScene;else this.showLeaders()},n.showDefaultLevel=function(e){var t=Math.floor((e-1)/4),n=Math.floor((vf.length-1)/4);return n-t<3?n-5:t<3?0:t-2},n.resetScroller=function(){this.scroller.removeAll(!0),this.updateData()},n.getLevelItems=function(){return this.scroller.getChildren()},n.showLeaders=function(){var e=this.getLevelItems();if(!(e.length<1)){for(var t=e.length>8?8:e.length,n=0;n<t;n++){var i=e[n];if(!i)return;i.setVisible(!0)}this.scroller.setEnable(!0)}},n.createBackgroundContent=function(){this.backgroundContent=this.scene.make.image({key:ZR,frame:YR.BG_DARK}),this.backgroundContent.setWorldSize(340,399),this.add(this.backgroundContent)},t}(Phaser.GameObjects.Container),WR=VR,zR=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n.header=void 0,n.main=void 0,n.footer=void 0,n.scene=t,n.createObjects(),n}(0,o.Z)(t,e);var n=t.prototype;return n.createObjects=function(){this.createMain(),this.createHeader(),this.createFooter()},n.createHeader=function(){this.header=new kR(this.scene),this.header.setDepth(Va.Z.BACKGROUND),this.group.add(this.header)},n.createMain=function(){this.main=new WR(this.scene),this.group.add(this.main)},n.createFooter=function(){this.footer=new yR(this.scene),this.footer.setDepth(Va.Z.BACKGROUND),this.group.add(this.footer)},t}(ug),KR=zR,jR=function(e){function t(t){var n;return(n=e.call(this,t)||this).objects=void 0,n.guideUI=void 0,n.objects=null,n}(0,o.Z)(t,e);var n=t.prototype;return n.alignUI=function(){if(null!==this.objects){var e=this.scene.gameZone;Phaser.Display.Align.In.TopCenter(this.objects.header,e,0,-15),Phaser.Display.Align.In.Center(this.objects.main,e,0,0),Phaser.Display.Align.In.BottomCenter(this.objects.footer,e,0,-65),this.objects.main.backgroundContainer.setVisible(!0),this.objects.main.backgroundContent.setVisible(!0),this.scene.background.setVisible(!1),this.objects.main.scroller.setSize(325,385),this.objects.main.scroller.createMask(),this.objects.main.updateData(),this.objects.main.scroller.setVisible(!0),this.objects.footer.setScale(1)}},n.createGroups=function(){e.prototype.createGroups.call(this),this.guideUI=this.scene.add.group(),this.groups.guideUI=this.guideUI},n.setUIObjects=function(t){e.prototype.setUIObjects.call(this,t),this.addUIObjectsToGroups()},n.addUIObjectsToGroups=function(){null!==this.objects&&this.addObjectForGuideUI()},n.addObjectForGuideUI=function(){this.objects},t}(fg),XR=jR,JR=function(e){function t(){return e.apply(this,arguments)||this}return(0,o.Z)(t,e),t.prototype.alignUI=function(){if(null!==this.objects){var e=this.scene.gameZone;Phaser.Display.Align.In.TopCenter(this.objects.header,e,0,-10),Phaser.Display.Align.In.Center(this.objects.main,e,0,-5),Phaser.Display.Align.In.BottomCenter(this.objects.footer,e,0,-60),this.objects.main.backgroundContainer.setVisible(!1),this.objects.main.backgroundContent.setVisible(!1),this.scene.background.setVisible(!0),this.objects.main.scroller.setSize(325,305),this.objects.main.scroller.createMask(),this.objects.main.updateData(),this.objects.main.scroller.setVisible(!0),this.objects.footer.setScale(.9)}},t}(XR),qR=JR,QR=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n.scene=t,n}(0,o.Z)(t,e);var n=t.prototype;return n.createObjects=function(){this.objects=new KR(this.scene)},n.createLayouts=function(){this.scene.world.isLandscape()?this.layout=new qR(this.scene):this.layout=new XR(this.scene),this.layout.setUIObjects(this.objects)},n.initUILogic=function(){},n.updateUIState=function(){},t}(Ig),$R=QR,ew=GameCore.Configs.Network,tw=function(e){function t(){for(var t,n,a=arguments.length,s=new Array(a),o=0;o<a;o++)s[o]=arguments[o];return(n=e.call.apply(e,T()(t=[this]).call(t,s))||this).layoutManager=void 0,n.run=(0,r.Z)(l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.initManager(),e.next=3,n.checkReceiveLevelFromFb();case 3:n.layoutManager.objects.header.updateTextLives(),n.loadLevelConfig();case 6:case"end":return e.stop()}}),e)}))),n.create=function(){e.prototype.create.call((0,Ba.Z)(n)),n.createBackground(pa.Z.BACKGROUND.KEY),n.createManager(),n.createLeaderBoardScreen(),n.createClaimHeartScreen(),n.createStartOverScreen(),n.listenEvents()},n.clickButtonHome=function(){n.scene.switch(Pa.Co.DASHBOARD_SCENE)},n.onConfirm=function(){var e=n.layoutManager.objects.main;FBInstant.player.setDataAsync({level:1}),n.storage.dispatch(gh(1)),n.loadLevelConfig(),e.resetScroller()},n.handleClickStartOver=function(){n.screen.open(za.o4.START_OVER_SCREEN,{onConfirm:n.onConfirm})},n.checkFinishAllLevel=function(){var e=n.layoutManager.objects.footer,t=n.storage.getState(),i=ol(t);if(1==i&&n.layoutManager.objects.main.resetScroller(),i>=vf.length)return e.buttonPlay.setVisible(!1),void e.buttonStartOver.setVisible(!0);e.buttonPlay.setVisible(!0),e.buttonStartOver.setVisible(!1)},n.handleInviteFriends=(0,r.Z)(l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!GameCore.Utils.Device.isAndroid()){e.next=5;break}return e.next=3,n.storage.dispatch((0,r.Z)(l().mark((function e(){var t,n,a,s,r,o,c,h,u,d,p;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=window.game,n=t.player,a=t.analytics,s=t.facebook,r=t.globalScene,o=t.lang,e.prev=1,r.screen.open(za.o4.NOTIFY_SCREEN,{message:o.Text.LOADING,loading:!0}),e.next=5,dl();case 5:return c=e.sent,aR(c),h=n.getPlayer(),u=h.playerId,d=h.name,p=h.photo,e.next=10,s.inviteAsync({cta:{default:"Play",localizations:{en_US:"Play",vi_VN:"Ch\u01a1i ngay"}},text:{default:"Great! I have a best score!",localizations:{en_US:"Great! I have a best score!",vi_VN:"Th\u1eadt tuy\u1ec7t! M\xecnh v\u1eeba ph\xe1 k\u1ef7 l\u1ee5c n\xe0y!"}},image:c||"",data:{playerId:u,playerName:d,playerPhoto:p,type:"journey_invite"},filters:[],sections:[]});case 10:a.event(Ot._.INVITE,{invite_content_type:"BestScore",success:!0}),e.next=17;break;case 13:e.prev=13,e.t0=e.catch(1),a.event(Ot._.INVITE,{invite_content_type:"BestScore",success:!1}),(0,i.tO)(e.t0);case 17:return e.prev=17,r.screen.close(za.o4.NOTIFY_SCREEN),e.finish(17);case 20:case"end":return e.stop()}}),e,null,[[1,13,17,20]])}))));case 3:e.next=7;break;case 5:return e.next=7,n.storage.dispatch(ul());case 7:case"end":return e.stop()}}),e)}))),n.clickLeaderBoard=function(){n.screen.open(za.o4.LEADER_BOARD_SCREEN)},n}(0,o.Z)(t,e);var n=t.prototype;return n.preload=function(){this.events.on(Phaser.Scenes.Events.WAKE,this.run),this.events.on(Phaser.Scenes.Events.CREATE,this.run)},n.startGame=function(){var e=this.layoutManager.objects,t=e.footer,n=e.main;n.updateData(),this.checkFinishAllLevel(),t.updateTextButtonPlay(),n.scroller.setVisible(!0)},n.createManager=function(){this.layoutManager=new $R(this)},n.initManager=function(){this.layoutManager.init()},n.createClaimHeartScreen=function(){this.screen.add(za.o4.CLAIM_HEART_SCREEN,by)},n.createStartOverScreen=function(){this.screen.add(za.o4.START_OVER_SCREEN,pO)},n.listenEvents=function(){var e=this.layoutManager.objects.footer;e.buttonHome.onClick=this.clickButtonHome.bind(this),e.buttonPlay.onClick=this.handlePlay.bind(this),e.buttonStartOver.onClick=this.handleClickStartOver},n.handlePlay=function(){var e=(0,r.Z)(l().mark((function e(){var t;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.storage.getState(),!(Sf(t)<1)){e.next=5;break}return this.screen.open(za.o4.CLAIM_HEART_SCREEN),e.abrupt("return");case 5:ol(t),this.storage.dispatch(ph()),this.storage.dispatch(Ph());case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.checkReceiveLevelFromFb=function(){var e=(0,r.Z)(l().mark((function e(){var t;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,t=this.storage.getState(),!ol(t)){e.next=5;break}return e.abrupt("return");case 5:return this.showLoadingScreen(),e.next=8,this.storage.dispatch(dh());case 8:e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),(0,i.tO)(e.t0);case 13:case"end":return e.stop()}}),e,this,[[0,10]])})));return function(){return e.apply(this,arguments)}}(),n.showLoadingScreen=function(){var e=this.game,t=e.globalScene,n=e.lang;t.screen.open(za.o4.NOTIFY_SCREEN,{message:n.Text.LOADING_LEVEL+"...",duration:ew.Timeout,loading:!0})},n.hideLoadingScreen=function(){this.game.globalScene.screen.close(za.o4.NOTIFY_SCREEN)},n.loadLevelConfig=function(){try{var e=this.storage.getState(),t=ol(e);0===t&&(t=1);var n=vf[t];n||(n=vf[vf.length-1]);var a=n,s=a.key,r=a.mapJson;if(this.cache.tilemap.exists(s))return void this.handleLoadCurrentMapComplete();this.load.tilemapTiledJSON(s,r),this.load.start(),this.load.off(Phaser.Loader.Events.COMPLETE),this.load.once(Phaser.Loader.Events.COMPLETE,this.handleLoadCurrentMapComplete.bind(this))}catch(o){(0,i.tO)(o)}},n.handleLoadCurrentMapComplete=function(){this.hideLoadingScreen(),this.startGame()},n.createLeaderBoardScreen=function(){this.screen.add(za.o4.LEADER_BOARD_SCREEN,uu)},n.getLevelName=function(e){var t;return"journey_"+Ya()(t=GameCore.Utils.Number).call(t,e,4,"0")},t}(du.Z),nw=tw;null==(nR=void 0)||nR.accept(GameCore.LiveUpdate.Scene(Pa.Co.LEVEL_SCENE));var iw=nw,aw=function(e){function t(){for(var t,n,i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];return(n=e.call.apply(e,T()(t=[this]).call(t,a))||this).Text=void 0,n.Texture=void 0,n.currentLocale=void 0,n.supportedLanguages=void 0,n.data=void 0,n.options=void 0,n}(0,o.Z)(t,e);var n=t.prototype;return n.configure=function(e){this.applyOptions(e)},n.getCurrentLanguage=function(){return this.currentLocale},n.switchLanguage=function(e){void 0===e&&(e="en");var t=this.getCorrectLocale(e);this.currentLocale=t,this.Text=this.data[t].Text,this.Texture=this.data[t].Texture},n.getText=function(e){if("object"==typeof e){var t=e.key,n=e.variables,i=void 0===n?[]:n,a=e.locale,s=void 0===a?this.currentLocale:a,r=this.getCorrectLocale(s),o=this.data[r].Text[t];return this.replaceVariables(o,i)}return this.Text[e]},n.getTexture=function(e){if("object"==typeof e){var t=e.key,n=e.variables,i=void 0===n?[]:n,a=e.locale,s=void 0===a?this.currentLocale:a,r=this.getCorrectLocale(s),o=this.data[r].Texture[t];return this.replaceVariables(o,i)}return this.Texture[e]},n.isSupportLanguage=function(e){var t;return wa()(t=this.supportedLanguages).call(t,e)>=0},n.applyOptions=function(e){this.options=(0,s.Z)({},e);var t=e.data,n=e.locale,i=void 0===n?"en":n,a=e.upperCaseText,r=void 0!==a&&a;this.data=t,this.supportedLanguages=q()(t);var o=this.getCorrectLocale(i);if(this.currentLocale=o,this.Text=t[o].Text,this.Texture=t[o].Texture,r)for(var c in this.Text)this.Text[c]=this.Text[c].toUpperCase()},n.makeText=function(e,t){var n,i=t.maxWidth,a=void 0===i?Phaser.Math.MAX_SAFE_INTEGER:i,s=t.maxHeight,r=void 0===s?Phaser.Math.MAX_SAFE_INTEGER:s,o=t.align,c=void 0===o?"center":o,l=t.drawMaxBoxDebug,h=void 0!==l&&l,u=e.make.bitmapText(t);for("center"===c?u.setCenterAlign():"left"===c?u.setLeftAlign():"right"===c&&u.setRightAlign(),wa()(n=t.text||"").call(n," ")>=0&&u.setMaxWidth(a);u.width>a||u.height>=r;)u.setFontSize(.95*u.fontSize);if(h&&GameCore.Utils.Valid.isDebugger()){var d=e.game.globalScene.add.graphics({lineStyle:{width:2,color:16711680}});d.setDepth(Phaser.Math.MAX_SAFE_INTEGER),e.game.globalScene.events.on(Phaser.Scenes.Events.UPDATE,(function(){if(d.clear(),u&&u.visible&&u.active){var e=u.getWorldPosition(),t=e.x,n=e.y;d.strokeRect(t-.5*a+(.5-u.originX)*u.width,n-.5*r+(.5-u.originY)*u.height,a,r)}}))}return u},n.setFontSize=function(e,t,n){var i,a=t||Phaser.Math.MAX_SAFE_INTEGER,s=n||Phaser.Math.MAX_SAFE_INTEGER;for(wa()(i=e.text||"").call(i," ")>=0&&e.setMaxWidth(a);e.width>a||e.height>=s;)e.setFontSize(.95*e.fontSize)},n.replaceVariables=function(e,t){var n=t.length;if(0==n)return e;var i=0;return e.replace(/{.*}/,(function(){return String(t[Math.min(i++,n-1)])}))},n.getCorrectLocale=function(e){var t=e;return this.isSupportLanguage(e)||(t="en"),t},t}(Phaser.Plugins.BasePlugin),sw={en:JSON.parse('{"Text":{"POP JEWELS":"POP JEWELS","DAILY_REWARDS":"DAILY REWARDS","CLAIM":"CLAIM","CLAIM_X2":"CLAIM X2","DAY_{X}":"DAY {X}","PLAY_NOW":"PLAY NOW","PLAY_WITH_FRIENDS":"PLAY WITH FRIENDS","RANK":"RANK","DAILY":"DAILY","GIFT":"GIFT","SETTINGS":"SETTINGS","LEADERBOARDS":"LEADERBOARDS","PLAY":"PLAY","WITH_FRIENDS":"WITH FRIENDS","FRIENDS":"FRIENDS","WORLD":"WORLD","DAILY_MISSION":"DAILY MISSIONS","PASS_10_LEVELS":"PASS 10 LEVELS","COLLECT_300_DIAMONDS":"COLLECT 300 DIAMONDS","INVITE_2_FRIENDS":"INVITE 2 FRIENDS","REACH_TOTAL_SCORES":"REACH TOTAL SCORES","WATCH_A_VIDEO_TO_GET_{X}_DIAMONDS!":"WATCH A VIDEO TO GET\\\\n{X} DIAMONDS!","GET_NOW":"GET NOW!","TARGET":"TARGET","MISSION":"MISSION","YOUR_SCORE":"YOUR SCORE","LEVEL":"LEVEL","REQUESTING":"REQUESTING...","LOADING_INTERSTITIAL_AD":"LOADING INTERSTITIAL AD...","HAMMER":"HAMMER","HAMMER_DESCRIPTION":"USE HAMMER TO SMASH ANY GEM","MAGIC_BOTTLE":"MAGIC BOTTLE","MAGIC_BOTTLE_DESCRIPTION":"USE MAGIC BOTTLE TO CHANGE A GEM COLOR","LEVEL_FAILED":"LEVEL FAILED","FAILED_TEXT":"YOU DID NOT REACH THE TARGET SCORE","CONTINUE":"CONTINUE","BEST_SCORE":"BEST SCORE","GLOBAL":"GLOBAL","JOIN":"JOIN","REPLAY":"REPLAY","HOME":"HOME","TODAY_RECORD":"TODAY RECORD","SHARE":"SHARE","WAITING":"WAITING","WAITING_FOR_OPPONENT":"WAITING FOR OPPONENT","RESTART":"RESTART","DRAW":"DRAW","YOU_LOSE":"YOU LOSE","YOU_WIN":"YOU WIN","VS":"VS","GUIDE_TEXT_GEM":"TAP ON TWO OR MORE GEMS OF THE SAME COLOR TO DESTROY THEM","GUIDE_TEXT_CURRENT_SCORE":"THIS IS YOUR CURRENT SCORE","GUIDE_TEXT_TARGET_SCORE":"THIS IS THE TARGET SCORE FOR EACH LEVEL YOU NEED TO PASS","GUIDE_TEXT_RAINBOW_GEM":"RAINBOW GEM CAN CLEAR THE GEMS SURROUNDING IT","GUIDE_TEXT_HAMMER":"THIS IS A HAMMER, USE IT TO SMASH ANY GEM!","GUIDE_TEXT_SHUFFLE":"THIS IS A SHUFFLE TILE, USE IT TO SHUFFLE ALL GEMS","GUIDE_TEXT_MAGIC_BOTTLE":"THIS IS A MAGIC BOTTLE, USE IT TO CHANGE A GEM COLOUR","NO_ADS_TO_DISPLAY":"NO ADS TO DISPLAY!","NO_REWARDS":"SORRY, NO REWARDS!","CANCELLED_AD":"YOU HAVE CANCELLED THE AD!","LOADING":"LOADING...","LOADING_AD":"LOADING AD ...","YOU_HAVE_JUST_RECEIVED_{X}_DIAMONDS":"YOU HAVE JUST RECEIVED\\\\n{X} DIAMONDS","CLOSE":"CLOSE","LEADERBOARD_EMPTY":"Leaderboard is empty!","MESSAGE_INVITE":"{playerName} challenges you","MESSAGE_FINISH_MATCH":"{playerName} just finished. Check them now.","MESSAGE_BEST_SCORE":"{playerName} beat your high score. Their score: {playerScore}","MESSAGE_FINISH_TURN":"{playerName} got {score} scores. So easy! Can you?","SHARE_LEADERBOARDS":"A ha, I\'m the best!","SHARE_GAME_RESULTS":"Pheww, a great match!","SHARE_BEST_SCORE":"Great! I have a best score!","TARGET_SCORE":"Target score","NO_SPACE_LEFT":"NO SPACE LEFT!","FULL":"Full","LOADING_LEVEL":"Loading level","SCORE_REACHED":"SCORE REACHED!","WELL_DONE":"WELL  DONE!","Level":"Level","Completed":"Completed","COMPLETED":"COMPLETED","Next_life":"Next life","MESS_TUTORIAL_1":"Place the block in the horizontal line\\nand see what happens!","MESS_TUTORIAL_2":"Now see what happens\\nwhen you make a vertical line.","MESS_TUTORIAL_3":"You can also make a 3x3 square.\\nGive it a try!","MESS_TUTORIAL_4":"Arrange lines and squares\\nto get combo points!","COMBO":"COMBO","STREAK":"STREAK","MESS_SKIP_TUTORIAL":"Are you sure you want\\nto skip the tutorial?","MESS_TAKE_A_BREAK_ADS":"Take a break\\nAd display in %s...","UPDATING_NEW_LEVELS":"UPDATING NEW LEVELS...","RESTARTING_MAP":"RESTARTING MAP...","CANCEL":"Cancel","OK":"OK","CONFIRM_START_OVER":"CONFIRM START OVER","MESS_START_OVER":"Are you sure to start over?","mmddyy":"Date","Anonymous":"Anonymous"},"Texture":{"NO_THANKS":"texts/no-thank","COOL":"texts/cool","CONGRATULATIONS":"texts/congratulation","EXCELLENT":"texts/excellent","GOOD":"texts/good","GREAT":"texts/great","LOGO":"logo","CONTINUE":"texts/continue"}}'),ru:JSON.parse('{"Text":{"POP JEWELS":"\u0412\u0417\u0420\u042b\u0412\u041d\u042b\u0415 \u0421\u0410\u041c\u041e\u0426\u0412\u0415\u0422\u042b","DAILY_REWARDS":"\u0415\u0416\u0415\u0414\u041d\u0415\u0412\u041d\u042b\u0415 \u041d\u0410\u0413\u0420\u0410\u0414\u042b","CLAIM":"\u041f\u043e\u043b\u0443\u0447\u0438\u0442\u044c","CLAIM_X2":"\u041f\u043e\u043b\u0443\u0447\u0438\u0442\u044c X2","DAY_{X}":"\u0414\u0415\u041d\u042c {X}","PLAY_NOW":"\u0418\u0413\u0420\u0410\u0422\u042c \u0421\u0415\u0419\u0427\u0410\u0421","PLAY_WITH_FRIENDS":"\u0418\u0413\u0420\u0410\u0422\u042c \u0421 \u0414\u0420\u0423\u0417\u042c\u042f\u041c\u0418","RANK":"\u041c\u0415\u0421\u0422\u041e","DAILY":"\u0415\u0416\u0415\u0414\u041d\u0415\u0412\u041d\u041e","GIFT":"\u041f\u041e\u0414\u0410\u0420\u041e\u041a","SETTINGS":"\u041d\u0410\u0421\u0422\u0420\u041e\u0419\u041a\u0418","LEADERBOARDS":"\u0422\u0410\u0411\u041b\u0418\u0426\u0410 \u041b\u0418\u0414\u0415\u0420\u041e\u0412","PLAY":"\u0418\u0413\u0420\u0410\u0422\u042c","WITH_FRIENDS":"\u0421 \u0414\u0420\u0423\u0417\u042c\u042f\u041c\u0418","FRIENDS":"\u0414\u0420\u0423\u0417\u042c\u042f","WORLD":"\u0412\u0415\u0421\u042c \u041c\u0418\u0420","DAILY_MISSION":"\u0415\u0416\u0415\u0414\u041d\u0415\u0412\u041d\u042b\u0415 \u041c\u0418\u0421\u0421\u0418\u0418","PASS_10_LEVELS":"\u041f\u0420\u041e\u0419\u0414\u0418 10 \u0423\u0420\u041e\u0412\u041d\u0415\u0419","COLLECT_300_DIAMONDS":"\u0421\u041e\u0411\u0415\u0420\u0418 300 \u0410\u041b\u041c\u0410\u0417\u041e\u0412","INVITE_2_FRIENDS":"\u041f\u0420\u0418\u0413\u041b\u0410\u0421\u0418 2 \u0414\u0420\u0423\u0417\u0415\u0419","REACH_TOTAL_SCORES":"\u041d\u0410\u0411\u0415\u0420\u0418 \u041e\u0411\u0429\u0415\u0415 \u0427\u0418\u0421\u041b\u041e \u041e\u0427\u041a\u041e\u0412","WATCH_A_VIDEO_TO_GET_{X}_DIAMONDS!":"\u041f\u041e\u0421\u041c\u041e\u0422\u0420\u0418 \u0412\u0418\u0414\u0415\u041e, \u0427\u0422\u041e\u0411\u042b \u041f\u041e\u041b\u0423\u0427\u0418\u0422\u042c\\n{X} \u0410\u041b\u041c\u0410\u0417\u041e\u0412!","GET_NOW":"\u041f\u041e\u041b\u0423\u0427\u0418 \u041f\u0420\u042f\u041c\u041e \u0421\u0415\u0419\u0427\u0410\u0421!","TARGET":"\u0426\u0415\u041b\u042c","MISSION":"\u041c\u0418\u0421\u0421\u0418\u042f","YOUR_SCORE":"\u0422\u0412\u041e\u0419 \u0420\u0415\u0417\u0423\u041b\u042c\u0422\u0410\u0422","LEVEL":"\u0423\u0420\u041e\u0412\u0415\u041d\u042c","REQUESTING":"\u0417\u0410\u041f\u0420\u041e\u0421...","LOADING_INTERSTITIAL_AD":"\u0417\u0410\u0413\u0420\u0423\u0417\u041a\u0410 \u041f\u0420\u041e\u041c\u0415\u0416\u0423\u0422\u041e\u0427\u041d\u041e\u0419 \u0420\u0415\u041a\u041b\u0410\u041c\u042b...","HAMMER":"\u041c\u041e\u041b\u041e\u0422\u041e\u041a","HAMMER_DESCRIPTION":"\u0418\u0421\u041f\u041e\u041b\u042c\u0417\u0423\u0419 \u041c\u041e\u041b\u041e\u0422\u041e\u041a, \u0427\u0422\u041e\u0411\u042b \u0420\u0410\u0417\u0411\u0418\u0422\u042c \u041b\u042e\u0411\u041e\u0419 \u0421\u0410\u041c\u041e\u0426\u0412\u0415\u0422","MAGIC_BOTTLE":"\u0412\u041e\u041b\u0428\u0415\u0411\u041d\u0410\u042f \u0411\u0423\u0422\u042b\u041b\u041a\u0410","MAGIC_BOTTLE_DESCRIPTION":"\u0418\u0421\u041f\u041e\u041b\u042c\u0417\u0423\u0419 \u0412\u041e\u041b\u0428\u0415\u0411\u041d\u0423\u042e \u0411\u0423\u0422\u042b\u041b\u041a\u0423, \u0427\u0422\u041e\u0411\u042b \u0418\u0417\u041c\u0415\u041d\u0418\u0422\u042c \u0426\u0412\u0415\u0422 \u0421\u0410\u041c\u041e\u0426\u0412\u0415\u0422\u0410","LEVEL_FAILED":"\u0423\u0420\u041e\u0412\u0415\u041d\u042c \u041d\u0415 \u041f\u0420\u041e\u0419\u0414\u0415\u041d","FAILED_TEXT":"\u0422\u042b \u041d\u0415 \u041d\u0410\u0411\u0420\u0410\u041b \u041d\u0423\u0416\u041d\u041e\u0415 \u0427\u0418\u0421\u041b\u041e \u041e\u0427\u041a\u041e\u0412","CONTINUE":"\u041f\u0420\u041e\u0414\u041e\u041b\u0416\u0418\u0422\u042c","BEST_SCORE":"\u041b\u0423\u0427\u0428\u0418\u0419 \u0420\u0415\u0417\u0423\u041b\u042c\u0422\u0410\u0422","GLOBAL":"\u0412\u0415\u0421\u042c \u041c\u0418\u0420","JOIN":"\u041f\u0420\u0418\u0421\u041e\u0415\u0414\u0418\u041d\u0418\u0422\u042c\u0421\u042f","REPLAY":"\u0418\u0413\u0420\u0410\u0422\u042c \u0417\u0410\u041d\u041e\u0412\u041e","HOME":"\u0414\u041e\u041c\u041e\u0419","TODAY_RECORD":"\u0421\u0415\u0413\u041e\u0414\u041d\u042f\u0428\u041d\u0418\u0419 \u0420\u0415\u0417\u0423\u041b\u042c\u0422\u0410\u0422","SHARE":"\u041f\u041e\u0414\u0415\u041b\u0418\u0422\u042c\u0421\u042f","WAITING":"\u041e\u0416\u0418\u0414\u0410\u041d\u0418\u0415","WAITING_FOR_OPPONENT":"\u041e\u0416\u0418\u0414\u0410\u041d\u0418\u0415 \u041e\u041f\u041f\u041e\u041d\u0415\u041d\u0422\u0410","RESTART":"\u041d\u0410\u0427\u0410\u0422\u042c \u0417\u0410\u041d\u041e\u0412\u041e","DRAW":"\u0416\u0415\u0420\u0415\u0411\u042c\u0415\u0412\u041a\u0410","YOU_LOSE":"\u0422\u042b \u041f\u0420\u041e\u0418\u0413\u0420\u0410\u0415\u0428\u042c","YOU_WIN":"\u0422\u042b \u0412\u042b\u0418\u0413\u0420\u0410\u0415\u0428\u042c","VS":"\u041f\u0420\u041e\u0422\u0418\u0412","GUIDE_TEXT_GEM":"\u041d\u0410\u0416\u041c\u0418 \u041d\u0410 \u0414\u0412\u0410 \u0418\u041b\u0418 \u0411\u041e\u041b\u042c\u0428\u0415 \u0421\u0410\u041c\u041e\u0426\u0412\u0415\u0422\u0410 \u041e\u0414\u041d\u041e\u0413\u041e \u0426\u0412\u0415\u0422\u0410, \u0427\u0422\u041e\u0411\u042b \u0423\u041d\u0418\u0427\u0422\u041e\u0416\u0418\u0422\u042c \u0418\u0425","GUIDE_TEXT_CURRENT_SCORE":"\u042d\u0422\u041e \u0422\u0412\u041e\u0419 \u0422\u0415\u041a\u0423\u0429\u0418\u0419 \u0420\u0415\u0417\u0423\u041b\u042c\u0422\u0410\u0422","GUIDE_TEXT_TARGET_SCORE":"\u042d\u0422\u041e \u041d\u0415\u041e\u0411\u0425\u041e\u0414\u0418\u041c\u042b\u0419 \u0420\u0415\u0417\u0423\u041b\u042c\u0422\u0410\u0422 \u0414\u041b\u042f \u041a\u0410\u0416\u0414\u041e\u0413\u041e \u0423\u0420\u041e\u0412\u041d\u042f, \u041a\u041e\u0422\u041e\u0420\u042b\u0419 \u0422\u0415\u0411\u0415 \u041d\u0423\u0416\u041d\u041e \u041f\u0420\u041e\u0419\u0422\u0418","GUIDE_TEXT_RAINBOW_GEM":"\u0420\u0410\u0414\u0423\u0416\u041d\u042b\u0419 \u0421\u0410\u041c\u041e\u0426\u0412\u0415\u0422 \u041c\u041e\u0416\u0415\u0422 \u0423\u0411\u0420\u0410\u0422\u042c \u0421\u0410\u041c\u041e\u0426\u0412\u0415\u0422\u042b, \u041a\u041e\u0422\u041e\u0420\u042b\u0415 \u0415\u0413\u041e \u041e\u041a\u0420\u0423\u0416\u0410\u042e\u0422","GUIDE_TEXT_HAMMER":"\u042d\u0422\u041e \u041c\u041e\u041b\u041e\u0422\u041e\u041a. \u0418\u0421\u041f\u041e\u041b\u042c\u0417\u0423\u0419 \u0415\u0413\u041e, \u0427\u0422\u041e\u0411\u042b \u0420\u0410\u0417\u0411\u0418\u0422\u042c \u041b\u042e\u0411\u041e\u0419 \u0421\u0410\u041c\u041e\u0426\u0412\u0415\u0422!","GUIDE_TEXT_SHUFFLE":"\u042d\u0422\u041e \u041f\u041b\u0418\u0422\u041a\u0410 \u041f\u0415\u0420\u0415\u041c\u0415\u0428\u0418\u0412\u0410\u041d\u0418\u042f. \u0418\u0421\u041f\u041e\u041b\u042c\u0417\u0423\u0419 \u0415\u0415, \u0427\u0422\u041e\u0411\u042b \u041f\u0415\u0420\u0415\u041c\u0415\u0428\u0410\u0422\u042c \u0412\u0421\u0415 \u0421\u0410\u041c\u041e\u0426\u0412\u0415\u0422\u042b","GUIDE_TEXT_MAGIC_BOTTLE":"\u042d\u0422\u041e \u0412\u041e\u041b\u0428\u0415\u0411\u041d\u0410\u042f \u0411\u0423\u0422\u042b\u041b\u041a\u0410. \u0418\u0421\u041f\u041e\u041b\u042c\u0417\u0423\u0419 \u0415\u0415, \u0427\u0422\u041e\u0411\u042b \u0418\u0417\u041c\u0415\u041d\u0418\u0422\u042c \u0426\u0412\u0415\u0422 \u0421\u0410\u041c\u041e\u0426\u0412\u0415\u0422\u0410","NO_ADS_TO_DISPLAY":"\u041d\u0415\u0422 \u0420\u0415\u041a\u041b\u0410\u041c\u042b \u0414\u041b\u042f \u041e\u0422\u041e\u0411\u0420\u0410\u0416\u0415\u041d\u0418\u042f!","NO_REWARDS":"\u0418\u0417\u0412\u0418\u041d\u0418, \u041d\u0410\u0413\u0420\u0410\u0414 \u041d\u0415\u0422!","CANCELLED_AD":"\u0422\u042b \u041e\u0422\u041a\u0410\u0417\u0410\u041b\u0421\u042f \u041e\u0422 \u041f\u0420\u041e\u0421\u041c\u041e\u0422\u0420\u0410 \u0420\u0415\u041a\u041b\u0410\u041c\u042b!","LOADING":"\u0417\u0410\u0413\u0420\u0423\u0417\u041a\u0410...","LOADING_AD":"\u0417\u0410\u0413\u0420\u0423\u0417\u041a\u0410 \u0420\u0415\u041a\u041b\u0410\u041c\u042b...","YOU_HAVE_JUST_RECEIVED_{X}_DIAMONDS":"\u0422\u042b \u0422\u041e\u041b\u042c\u041a\u041e \u0427\u0422\u041e \u041f\u041e\u041b\u0423\u0427\u0418\u041b\\n{X} \u0410\u041b\u041c\u0410\u0417\u041e\u0412","CLOSE":"\u0417\u0430\u043a\u0440\u044b\u0442\u044c","LEADERBOARD_EMPTY":"\u043f\u0443\u0441\u0442\u043e\u0439","MESSAGE_INVITE":"{Playername} \u0431\u0440\u043e\u0441\u0430\u0435\u0442 \u0432\u044b\u0437\u043e\u0432 \u0432\u0430\u043c","MESSAGE_FINISH_MATCH":"{Playername} \u0442\u043e\u043b\u044c\u043a\u043e \u0447\u0442\u043e \u0437\u0430\u043a\u043e\u043d\u0447\u0438\u043b. \u041f\u0440\u043e\u0432\u0435\u0440\u044c\u0442\u0435 \u0438\u0445 \u0441\u0435\u0439\u0447\u0430\u0441.","MESSAGE_BEST_SCORE":"{playername} \u043f\u043e\u0431\u0435\u0434\u0438\u043b \u0432\u0430\u0448 \u0432\u044b\u0441\u043e\u043a\u0438\u0439 \u0431\u0430\u043b\u043b. \u0418\u0445 \u043e\u0446\u0435\u043d\u043a\u0430: {\u0438\u0433\u0440\u043e\u043a\u0438}","MESSAGE_FINISH_TURN":"{Playername} \u043f\u043e\u043b\u0443\u0447\u0438\u043b \u043e\u0446\u0435\u043d\u043a\u0438. \u0422\u0430\u043a \u043f\u0440\u043e\u0441\u0442\u043e! \u0422\u044b \u043c\u043e\u0436\u0435\u0448\u044c?","SHARE_LEADERBOARDS":"\u0425\u0430, \u044f \u043b\u0443\u0447\u0448\u0438\u0439!","SHARE_GAME_RESULTS":"Pheww, \u043e\u0442\u043b\u0438\u0447\u043d\u044b\u0439 \u043c\u0430\u0442\u0447!","SHARE_BEST_SCORE":"\u0411\u043e\u043b\u044c\u0448\u043e\u0439! \u0423 \u043c\u0435\u043d\u044f \u0435\u0441\u0442\u044c \u043b\u0443\u0447\u0448\u0438\u0439 \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442!","TARGET_SCORE":"\u0426\u0435\u043b\u0435\u0432\u043e\u0439 \u0441\u0447\u0435\u0442","NO_SPACE_LEFT":"\u041c\u0415\u0421\u0422\u0410 \u041d\u0415 \u041e\u0421\u0422\u0410\u041b\u041e\u0421\u042c!","FULL":"\u041f\u043e\u043b\u043d\u044b\u0439","LOADING_LEVEL":"\u0417\u0410\u0413\u0420\u0423\u0417\u041a\u0410","SCORE_REACHED":"\u0421\u0427\u0415\u0422 \u0414\u041e\u0421\u0422\u0418\u0413\u041d\u0423\u0422!","WELL_DONE":"\u041e\u0422\u041b\u0418\u0427\u041d\u041e!","Level":"\u0423\u0440\u043e\u0432\u0435\u043d\u044c","Completed":"\u0417\u0430\u0432\u0435\u0440\u0448\u0435\u043d","COMPLETED":"\u0417\u0410\u0412\u0415\u0420\u0428\u0415\u041d","Next_life":"\u0421\u043b\u0435\u0434\u0443\u044e\u0449\u0430\u044f \u0436\u0438\u0437\u043d\u044c","MESS_TUTORIAL_1":"\u041f\u043e\u043c\u0435\u0441\u0442\u0438\u0442\u0435 \u0431\u043b\u043e\u043a \u0432 \u0433\u043e\u0440\u0438\u0437\u043e\u043d\u0442\u0430\u043b\u044c\u043d\u0443\u044e \u043b\u0438\u043d\u0438\u044e \\n\u0438 \u043f\u043e\u0441\u043c\u043e\u0442\u0440\u0438\u0442\u0435, \u0447\u0442\u043e \u043f\u043e\u043b\u0443\u0447\u0438\u0442\u0441\u044f!","MESS_TUTORIAL_2":"\u0410 \u0442\u0435\u043f\u0435\u0440\u044c \u043f\u043e\u0441\u043c\u043e\u0442\u0440\u0438\u0442\u0435, \u0447\u0442\u043e \u043f\u0440\u043e\u0438\u0441\u0445\u043e\u0434\u0438\u0442 \\n\u043a\u043e\u0433\u0434\u0430 \u0432\u044b \u043f\u0440\u043e\u0432\u043e\u0434\u0438\u0442\u0435 \u0432\u0435\u0440\u0442\u0438\u043a\u0430\u043b\u044c\u043d\u0443\u044e \u043b\u0438\u043d\u0438\u044e.","MESS_TUTORIAL_3":"\u0412\u044b \u0442\u0430\u043a\u0436\u0435 \u043c\u043e\u0436\u0435\u0442\u0435 \u0441\u0434\u0435\u043b\u0430\u0442\u044c \u043a\u0432\u0430\u0434\u0440\u0430\u0442 3x3.\\n\u041f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435!","MESS_TUTORIAL_4":"\u0421\u043e\u0441\u0442\u0430\u0432\u043b\u044f\u0439\u0442\u0435 \u043b\u0438\u043d\u0438\u0438 \u0438 \u043a\u0432\u0430\u0434\u0440\u0430\u0442\u044b \\n\u0447\u0442\u043e\u0431\u044b \u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c \u043a\u043e\u043c\u0431\u043e-\u043e\u0447\u043a\u0438!","COMBO":"\u041a\u041e\u041c\u0411\u041e","STREAK":"\u0421\u0422\u0420\u0418\u041a","MESS_SKIP_TUTORIAL":"\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b, \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435\\n\u043f\u0440\u043e\u043f\u0443\u0441\u0442\u0438\u0442\u044c \u0443\u0440\u043e\u043a?","MESS_TAKE_A_BREAK_ADS":"\u0421\u0434\u0435\u043b\u0430\u0439\u0442\u0435 \u043f\u0435\u0440\u0435\u0440\u044b\u0432\\n\u041f\u043e\u043a\u0430\u0437 \u0440\u0435\u043a\u043b\u0430\u043c\u044b \u0432 %s...","UPDATING_NEW_LEVELS":"\u0417\u0410\u0413\u0420\u0423\u0417\u041a\u0410...","RESTARTING_MAP":"\u0417\u0410\u0413\u0420\u0423\u0417\u041a\u0410...","CANCEL":"\u041e\u0442\u043c\u0435\u043d\u0430","OK":"\u0414\u0430","CONFIRM_START_OVER":"\u041f\u041e\u0414\u0422\u0412\u0415\u0420\u0414\u0418\u0422\u042c \u041d\u0410\u0427\u0410\u0422\u042c \u0421\u041d\u0410\u0427\u0410\u041b\u0410","MESS_START_OVER":"\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b,\\n\u0447\u0442\u043e \u043d\u0430\u0447\u043d\u0435\u0442\u0435 \u0441\u043d\u0430\u0447\u0430\u043b\u0430?","mmddyy":"\u0414\u0430\u0442\u0430","Anonymous":"\u0410\u043d\u043e\u043d\u0438\u043c"},"Texture":{"NO_THANKS":"texts/no-thank","COOL":"texts/cool","CONGRATULATIONS":"texts/congratulation","EXCELLENT":"texts/excellent","GOOD":"texts/good","GREAT":"texts/great","LOGO":"logo","CONTINUE":"texts/continue"}}'),pt:JSON.parse('{"Text":{"POP JEWELS":"POP JEWELS","DAILY_REWARDS":"DAILY REWARDS","CLAIM":"CLAIM","CLAIM_X2":"CLAIM X2","DAY_{X}":"DAY {X}","PLAY_NOW":"PLAY NOW","PLAY_WITH_FRIENDS":"PLAY WITH FRIENDS","RANK":"RANK","DAILY":"DAILY","GIFT":"GIFT","SETTINGS":"SETTINGS","LEADERBOARDS":"LEADERBOARDS","PLAY":"JOGAR","WITH_FRIENDS":"WITH FRIENDS","FRIENDS":"FRIENDS","WORLD":"WORLD","DAILY_MISSION":"DAILY MISSIONS","PASS_10_LEVELS":"PASS 10 LEVELS","COLLECT_300_DIAMONDS":"COLLECT 300 DIAMONDS","INVITE_2_FRIENDS":"INVITE 2 FRIENDS","REACH_TOTAL_SCORES":"REACH TOTAL SCORES","WATCH_A_VIDEO_TO_GET_{X}_DIAMONDS!":"WATCH A VIDEO TO GET\\\\n{X} DIAMONDS!","GET_NOW":"GET NOW!","TARGET":"TARGET","MISSION":"MISSION","YOUR_SCORE":"YOUR SCORE","LEVEL":"N\xedvel","REQUESTING":"REQUESTING...","LOADING_INTERSTITIAL_AD":"LOADING INTERSTITIAL AD...","HAMMER":"HAMMER","HAMMER_DESCRIPTION":"USE HAMMER TO SMASH ANY GEM","MAGIC_BOTTLE":"MAGIC BOTTLE","MAGIC_BOTTLE_DESCRIPTION":"USE MAGIC BOTTLE TO CHANGE A GEM COLOR","LEVEL_FAILED":"LEVEL FAILED","FAILED_TEXT":"YOU DID NOT REACH THE TARGET SCORE","CONTINUE":"CONTINUE","BEST_SCORE":"BEST SCORE","GLOBAL":"GLOBAL","JOIN":"JOIN","REPLAY":"REPLAY","HOME":"HOME","TODAY_RECORD":"TODAY RECORD","SHARE":"SHARE","WAITING":"WAITING","WAITING_FOR_OPPONENT":"WAITING FOR OPPONENT","RESTART":"RESTART","DRAW":"DRAW","YOU_LOSE":"YOU LOSE","YOU_WIN":"YOU WIN","VS":"VS","GUIDE_TEXT_GEM":"TAP ON TWO OR MORE GEMS OF THE SAME COLOR TO DESTROY THEM","GUIDE_TEXT_CURRENT_SCORE":"THIS IS YOUR CURRENT SCORE","GUIDE_TEXT_TARGET_SCORE":"THIS IS THE TARGET SCORE FOR EACH LEVEL YOU NEED TO PASS","GUIDE_TEXT_RAINBOW_GEM":"RAINBOW GEM CAN CLEAR THE GEMS SURROUNDING IT","GUIDE_TEXT_HAMMER":"THIS IS A HAMMER, USE IT TO SMASH ANY GEM!","GUIDE_TEXT_SHUFFLE":"THIS IS A SHUFFLE TILE, USE IT TO SHUFFLE ALL GEMS","GUIDE_TEXT_MAGIC_BOTTLE":"THIS IS A MAGIC BOTTLE, USE IT TO CHANGE A GEM COLOUR","NO_ADS_TO_DISPLAY":"SEM AN\xdaNCIOS A EXIBIR!","NO_REWARDS":"DESCULPA, N\xc3O H\xc1 RECOMPENSAS!","CANCELLED_AD":"CANCELASTE O AN\xdaNCIO!","LOADING":"A CARREGAR...","LOADING_AD":"A CARREGAR AN\xdaNCIOS...","YOU_HAVE_JUST_RECEIVED_{X}_DIAMONDS":"YOU HAVE JUST RECEIVED\\\\n{X} DIAMONDS","CLOSE":"CLOSE","LEADERBOARD_EMPTY":"A tabela de classifica\xe7\xe3o est\xe1 vazia!","MESSAGE_INVITE":"{playerName} challenges you","MESSAGE_FINISH_MATCH":"{playerName} just finished. Check them now.","MESSAGE_BEST_SCORE":"{playerName} beat your high score. Their score: {playerScore}","MESSAGE_FINISH_TURN":"{playerName} got {score} scores. So easy! Can you?","SHARE_LEADERBOARDS":"A ha, I\'m the best!","SHARE_GAME_RESULTS":"Pheww, a great match!","SHARE_BEST_SCORE":"\xd3ptimo! Tenho uma das melhores pontua\xe7\xf5es!","TARGET_SCORE":"Pontua\xe7\xe3o alvo","NO_SPACE_LEFT":"N\xc3O TEM MAIS ESPA\xc7O!","FULL":"Completo","LOADING_LEVEL":"A carregar n\xedvel","SCORE_REACHED":"PONTUA\xc7\xc3O ATINGIDA!","WELL_DONE":"BEM FEITO!","Level":"N\xedvel","Completed":"Conclu\xeddo","COMPLETED":"CONCLU\xcdDO","Next_life":"Pr\xf3xima vida","MESS_TUTORIAL_1":"Coloca o bloco na linha horizontal\\ne olha o que acontece!","MESS_TUTORIAL_2":"Agora olha para o que\\nacontece quando fazes uma linha vertical.","MESS_TUTORIAL_3":"Tamb\xe9m se pode fazer um quadrado 3x3.\\nExperimenta!","MESS_TUTORIAL_4":"Organiza linhas e quadrados para\\nobter pontos de combina\xe7\xe3o!","COMBO":"Combina\xe7\xe3o","STREAK":"MAR\xc9 DE SORTE","MESS_SKIP_TUTORIAL":"Tens a certeza de que\\nqueres saltar o tutorial?","MESS_TAKE_A_BREAK_ADS":"Take a break\\nAd display in %s...","UPDATING_NEW_LEVELS":"ACTUALIZA\xc7\xc3O DE NOVOS N\xcdVEIS...","RESTARTING_MAP":"A REINICIAR O MAPA...","CANCEL":"Cancelar","OK":"OK","CONFIRM_START_OVER":"TENS A CERTEZA DE RECOME\xc7AR?","MESS_START_OVER":"Tens a certeza de recome\xe7ar?","mmddyy":"Data","Anonymous":"An\xf3nimo"},"Texture":{"NO_THANKS":"texts/no-thank","COOL":"texts/cool","CONGRATULATIONS":"texts/congratulation","EXCELLENT":"texts/excellent","GOOD":"texts/good","GREAT":"texts/great","LOGO":"logo","CONTINUE":"texts/continue"}}'),fr:JSON.parse('{"Text":{"POP JEWELS":"POP JEWELS","DAILY_REWARDS":"DAILY REWARDS","CLAIM":"CLAIM","CLAIM_X2":"CLAIM X2","DAY_{X}":"DAY {X}","PLAY_NOW":"PLAY NOW","PLAY_WITH_FRIENDS":"PLAY WITH FRIENDS","RANK":"RANK","DAILY":"DAILY","GIFT":"GIFT","SETTINGS":"SETTINGS","LEADERBOARDS":"LEADERBOARDS","PLAY":"PLAY","WITH_FRIENDS":"WITH FRIENDS","FRIENDS":"FRIENDS","WORLD":"WORLD","DAILY_MISSION":"DAILY MISSIONS","PASS_10_LEVELS":"PASS 10 LEVELS","COLLECT_300_DIAMONDS":"COLLECT 300 DIAMONDS","INVITE_2_FRIENDS":"INVITE 2 FRIENDS","REACH_TOTAL_SCORES":"REACH TOTAL SCORES","WATCH_A_VIDEO_TO_GET_{X}_DIAMONDS!":"WATCH A VIDEO TO GET\\\\n{X} DIAMONDS!","GET_NOW":"GET NOW!","TARGET":"TARGET","MISSION":"MISSION","YOUR_SCORE":"YOUR SCORE","LEVEL":"NIVEAU","REQUESTING":"REQUESTING...","LOADING_INTERSTITIAL_AD":"LOADING INTERSTITIAL AD...","HAMMER":"HAMMER","HAMMER_DESCRIPTION":"USE HAMMER TO SMASH ANY GEM","MAGIC_BOTTLE":"MAGIC BOTTLE","MAGIC_BOTTLE_DESCRIPTION":"USE MAGIC BOTTLE TO CHANGE A GEM COLOR","LEVEL_FAILED":"LEVEL FAILED","FAILED_TEXT":"YOU DID NOT REACH THE TARGET SCORE","CONTINUE":"CONTINUE","BEST_SCORE":"BEST SCORE","GLOBAL":"GLOBAL","JOIN":"JOIN","REPLAY":"REPLAY","HOME":"HOME","TODAY_RECORD":"TODAY RECORD","SHARE":"SHARE","WAITING":"WAITING","WAITING_FOR_OPPONENT":"WAITING FOR OPPONENT","RESTART":"RESTART","DRAW":"DRAW","YOU_LOSE":"YOU LOSE","YOU_WIN":"YOU WIN","VS":"VS","GUIDE_TEXT_GEM":"TAP ON TWO OR MORE GEMS OF THE SAME COLOR TO DESTROY THEM","GUIDE_TEXT_CURRENT_SCORE":"THIS IS YOUR CURRENT SCORE","GUIDE_TEXT_TARGET_SCORE":"THIS IS THE TARGET SCORE FOR EACH LEVEL YOU NEED TO PASS","GUIDE_TEXT_RAINBOW_GEM":"RAINBOW GEM CAN CLEAR THE GEMS SURROUNDING IT","GUIDE_TEXT_HAMMER":"THIS IS A HAMMER, USE IT TO SMASH ANY GEM!","GUIDE_TEXT_SHUFFLE":"THIS IS A SHUFFLE TILE, USE IT TO SHUFFLE ALL GEMS","GUIDE_TEXT_MAGIC_BOTTLE":"THIS IS A MAGIC BOTTLE, USE IT TO CHANGE A GEM COLOUR","NO_ADS_TO_DISPLAY":"AUCUNE PUBLICIT\xc9 \xc0 AFFICHER!","NO_REWARDS":"D\xc9SOL\xc9, AUCUNE R\xc9COMPENSE!","CANCELLED_AD":"VOUS AVEZ ANNUL\xc9 LA PUBLICIT\xc9!","LOADING":"CHARGEMENT EN COURS...","LOADING_AD":"CHARGEMENT DES PUBLICIT\xc9S...","YOU_HAVE_JUST_RECEIVED_{X}_DIAMONDS":"YOU HAVE JUST RECEIVED\\\\n{X} DIAMONDS","CLOSE":"CLOSE","LEADERBOARD_EMPTY":"Le classement est vide!","MESSAGE_INVITE":"{playerName} challenges you","MESSAGE_FINISH_MATCH":"{playerName} just finished. Check them now.","MESSAGE_BEST_SCORE":"{playerName} beat your high score. Their score: {playerScore}","MESSAGE_FINISH_TURN":"{playerName} got {score} scores. So easy! Can you?","SHARE_LEADERBOARDS":"A ha, I\'m the best!","SHARE_GAME_RESULTS":"Pheww, a great match!","SHARE_BEST_SCORE":"G\xe9nial\xa0! J\u2019ai un meilleur score!","TARGET_SCORE":"Score cible","NO_SPACE_LEFT":"IL NE RESTE PLUS D\'ESPACE!","FULL":"Plein","LOADING_LEVEL":"Chargement du niveau...","SCORE_REACHED":"SCORE ATTEINT!","WELL_DONE":"BIEN JOU\xc9!","Level":"Niveau","Completed":"Termin\xe9","COMPLETED":"TERMIN\xc9","Next_life":"Vie suivante","MESS_TUTORIAL_1":"Placez le bloc dans la ligne horizontale et\\nconstatez le r\xe9sultat!","MESS_TUTORIAL_2":"\xc0 pr\xe9sent, d\xe9couvrez ce qui se passe\\nquand vous faites une ligne verticale.","MESS_TUTORIAL_3":"Vous pouvez aussi faire un carr\xe9 de 3x3.\\nEssayez pour voir!","MESS_TUTORIAL_4":"Assemblez des lignes et des carr\xe9s\\npour obtenir des points de combinaison!","COMBO":"COMBO","STREAK":"S\xc9RIE","MESS_SKIP_TUTORIAL":"Voulez-vous vraiment\\nignorer le tutoriel?","MESS_TAKE_A_BREAK_ADS":"Take a break\\nAd display in %s...","UPDATING_NEW_LEVELS":"MISE \xc0 JOUR DE NOUVEAUX NIVEAUX...","RESTARTING_MAP":"RED\xc9MARRAGE DE LA CARTE...","CANCEL":"Annuler","OK":"OK","CONFIRM_START_OVER":"CONFIRMER POUR RECOMMENCER","MESS_START_OVER":"Voulez-vous vraiment\\nrecommencer?","mmddyy":"Date","Anonymous":"Anonyme"},"Texture":{"NO_THANKS":"texts/no-thank","COOL":"texts/cool","CONGRATULATIONS":"texts/congratulation","EXCELLENT":"texts/excellent","GOOD":"texts/good","GREAT":"texts/great","LOGO":"logo","CONTINUE":"texts/continue"}}'),hi:JSON.parse('{"Text":{"POP JEWELS":"POP JEWELS","DAILY_REWARDS":"DAILY REWARDS","CLAIM":"CLAIM","CLAIM_X2":"CLAIM X2","DAY_{X}":"DAY {X}","PLAY_NOW":"PLAY NOW","PLAY_WITH_FRIENDS":"PLAY WITH FRIENDS","RANK":"RANK","DAILY":"DAILY","GIFT":"GIFT","SETTINGS":"SETTINGS","LEADERBOARDS":"LEADERBOARDS","PLAY":"PLAY","WITH_FRIENDS":"WITH FRIENDS","FRIENDS":"FRIENDS","WORLD":"WORLD","DAILY_MISSION":"DAILY MISSIONS","PASS_10_LEVELS":"PASS 10 LEVELS","COLLECT_300_DIAMONDS":"COLLECT 300 DIAMONDS","INVITE_2_FRIENDS":"INVITE 2 FRIENDS","REACH_TOTAL_SCORES":"REACH TOTAL SCORES","WATCH_A_VIDEO_TO_GET_{X}_DIAMONDS!":"WATCH A VIDEO TO GET\\\\n{X} DIAMONDS!","GET_NOW":"GET NOW!","TARGET":"TARGET","MISSION":"MISSION","YOUR_SCORE":"YOUR SCORE","LEVEL":"\u0932\u0947\u0935\u0932","REQUESTING":"REQUESTING...","LOADING_INTERSTITIAL_AD":"LOADING INTERSTITIAL AD...","HAMMER":"HAMMER","HAMMER_DESCRIPTION":"USE HAMMER TO SMASH ANY GEM","MAGIC_BOTTLE":"MAGIC BOTTLE","MAGIC_BOTTLE_DESCRIPTION":"USE MAGIC BOTTLE TO CHANGE A GEM COLOR","LEVEL_FAILED":"LEVEL FAILED","FAILED_TEXT":"YOU DID NOT REACH THE TARGET SCORE","CONTINUE":"CONTINUE","BEST_SCORE":"BEST SCORE","GLOBAL":"GLOBAL","JOIN":"JOIN","REPLAY":"REPLAY","HOME":"HOME","TODAY_RECORD":"TODAY RECORD","SHARE":"SHARE","WAITING":"WAITING","WAITING_FOR_OPPONENT":"WAITING FOR OPPONENT","RESTART":"RESTART","DRAW":"DRAW","YOU_LOSE":"YOU LOSE","YOU_WIN":"YOU WIN","VS":"VS","GUIDE_TEXT_GEM":"TAP ON TWO OR MORE GEMS OF THE SAME COLOR TO DESTROY THEM","GUIDE_TEXT_CURRENT_SCORE":"THIS IS YOUR CURRENT SCORE","GUIDE_TEXT_TARGET_SCORE":"THIS IS THE TARGET SCORE FOR EACH LEVEL YOU NEED TO PASS","GUIDE_TEXT_RAINBOW_GEM":"RAINBOW GEM CAN CLEAR THE GEMS SURROUNDING IT","GUIDE_TEXT_HAMMER":"THIS IS A HAMMER, USE IT TO SMASH ANY GEM!","GUIDE_TEXT_SHUFFLE":"THIS IS A SHUFFLE TILE, USE IT TO SHUFFLE ALL GEMS","GUIDE_TEXT_MAGIC_BOTTLE":"THIS IS A MAGIC BOTTLE, USE IT TO CHANGE A GEM COLOUR","NO_ADS_TO_DISPLAY":"\u0926\u093f\u0916\u093e\u0928\u0947 \u0915\u0947 \u0932\u093f\u090f \u0915\u094b\u0908 \u0935\u093f\u091c\u094d\u091e\u093e\u092a\u0928 \u0928\u0939\u0940\u0902 \u0939\u0948\u0902!","NO_REWARDS":"\u0915\u094d\u0937\u092e\u093e \u0915\u0930\u0947\u0902, \u0915\u094b\u0908 \u0930\u093f\u0935\u0949\u0930\u094d\u0921 \u0928\u0939\u0940\u0902 \u0939\u0948\u0902!","CANCELLED_AD":"\u0906\u092a\u0928\u0947 \u0935\u093f\u091c\u094d\u091e\u093e\u092a\u0928 \u0915\u0948\u0902\u0938\u0932 \u0915\u0930 \u0926\u093f\u092f\u093e \u0939\u0948!","LOADING":"\u0932\u094b\u0921 \u0939\u094b \u0930\u0939\u093e \u0939\u0948\u0902...","LOADING_AD":"\u0935\u093f\u091c\u094d\u091e\u093e\u092a\u0928 \u0932\u094b\u0921 \u0939\u094b \u0930\u0939\u0947 \u0939\u0948\u0902...","YOU_HAVE_JUST_RECEIVED_{X}_DIAMONDS":"YOU HAVE JUST RECEIVED\\\\n{X} DIAMONDS","CLOSE":"CLOSE","LEADERBOARD_EMPTY":"\u0932\u0940\u0921\u0930\u092c\u094b\u0930\u094d\u0921 \u0916\u093e\u0932\u0940 \u0939\u0948!","MESSAGE_INVITE":"{playerName} challenges you","MESSAGE_FINISH_MATCH":"{playerName} just finished. Check them now.","MESSAGE_BEST_SCORE":"{playerName} beat your high score. Their score: {playerScore}","MESSAGE_FINISH_TURN":"{playerName} got {score} scores. So easy! Can you?","SHARE_LEADERBOARDS":"A ha, I\'m the best!","SHARE_GAME_RESULTS":"Pheww, a great match!","SHARE_BEST_SCORE":"\u092c\u095d\u093f\u092f\u093e! \u092e\u0948\u0902\u0928\u0947 \u0936\u093e\u0928\u0926\u093e\u0930 \u0938\u094d\u0915\u094b\u0930 \u092c\u0928\u093e\u092f\u093e \u0939\u0948!","TARGET_SCORE":"\u091f\u093e\u0930\u0917\u0947\u091f \u0938\u094d\u0915\u094b\u0930","NO_SPACE_LEFT":"\u091c\u0917\u0939 \u0928\u0939\u0940\u0902 \u092c\u091a\u0940!","FULL":"\u092a\u0942\u0930\u093e","LOADING_LEVEL":"\u0932\u0947\u0935\u0932 \u0932\u094b\u0921 \u0939\u094b \u0930\u0939\u093e \u0939\u0948...","SCORE_REACHED":"\u0938\u094d\u0915\u094b\u0930 \u092a\u0939\u0941\u0902\u091a \u0917\u092f\u093e!","WELL_DONE":"\u092c\u0939\u0941\u0924 \u092c\u095d\u093f\u092f\u093e!","Level":"\u0932\u0947\u0935\u0932","Completed":"\u092a\u0942\u0930\u093e \u0939\u0941\u0906","COMPLETED":"\u092a\u0942\u0930\u093e \u0939\u0941\u0906","Next_life":"\u0905\u0917\u0932\u093e \u091c\u0940\u0935\u0928","MESS_TUTORIAL_1":"\u092c\u094d\u0932\u0949\u0915 \u0915\u094b \u0939\u0949\u0930\u093f\u091c\u0949\u0928\u094d\u091f\u0932 \u0932\u093e\u0907\u0928 \u092e\u0947\u0902 \u0930\u0916\u0947\u0902\\n\u0914\u0930 \u0926\u0947\u0916\u0947\u0902 \u0915\u093f \u0915\u094d\u092f\u093e \u0939\u094b\u0924\u093e \u0939\u0948!","MESS_TUTORIAL_2":"\u0905\u092c \u0926\u0947\u0916\u0924\u0947 \u0939\u0948\u0902 \u0915\u093f \u0915\u094d\u092f\u093e \u0939\u094b\u0924\u093e\\n\u0939\u0948 \u091c\u092c \u0906\u092a \u0935\u0930\u094d\u091f\u093f\u0915\u0932 \u0932\u093e\u0907\u0928 \u092c\u0928\u093e\u0924\u0947 \u0939\u0948\u0902.","MESS_TUTORIAL_3":"\u0938\u093e\u0925 \u0939\u0940 \u0906\u092a 3x3 \u0915\u0947 \u0935\u0930\u094d\u0917 \u092d\u0940 \u092c\u0928\u093e \u0938\u0915\u0924\u0947 \u0939\u0948\u0902.\\n\u0915\u094b\u0936\u093f\u0936 \u0915\u0930\u0947\u0902!","MESS_TUTORIAL_4":"\u0915\u0949\u092e\u094d\u092c\u094b \u092a\u0949\u0907\u0902\u091f\u094d\u0938 \u092a\u093e\u0928\u0947 \u0915\u0947 \u0932\u093f\u090f \u0932\u093e\u0907\u0928\\n\u0914\u0930 \u0935\u0930\u094d\u0917 \u0915\u094b \u0915\u094d\u0930\u092e \u092e\u0947\u0902 \u0930\u0916\u0947\u0902!","COMBO":"\u0915\u0949\u092e\u094d\u092c\u094b","STREAK":"\u0938\u094d\u091f\u094d\u0930\u0940\u0915","MESS_SKIP_TUTORIAL":"\u0915\u094d\u092f\u093e \u0906\u092a \u0935\u093e\u0915\u0908 \u0907\u0938 \u091f\u094d\u092f\u0942\u091f\u094b\u0930\u093f\u092f\u0932\\n\u0915\u094b \u091b\u094b\u095c\u0928\u093e \u091a\u093e\u0939\u0924\u0947 \u0939\u0948\u0902?","MESS_TAKE_A_BREAK_ADS":"Take a break\\nAd display in %s...","UPDATING_NEW_LEVELS":"\u0928\u090f \u0932\u0947\u0935\u0932 \u0905\u092a\u0921\u0947\u091f \u0939\u094b \u0930\u0939\u0947 \u0939\u0948\u0902...","RESTARTING_MAP":"\u092e\u0948\u092a \u0915\u094b \u0930\u0940\u0938\u094d\u091f\u093e\u0930\u094d\u091f \u0915\u093f\u092f\u093e \u091c\u093e \u0930\u0939\u093e \u0939\u0948...","CANCEL":"\u0915\u0948\u0902\u0938\u0932 \u0915\u0930\u0947\u0902","OK":"\u0920\u0940\u0915 \u0939\u0948","CONFIRM_START_OVER":"\u092b\u093f\u0930 \u0938\u0947 \u0936\u0941\u0930\u0942 \u0915\u0930\u0928\u0947 \u0915\u0940 \u092a\u0941\u0937\u094d\u091f\u093f \u0915\u0930\u0947\u0902","MESS_START_OVER":"\u0915\u094d\u092f\u093e \u0906\u092a \u0935\u093e\u0915\u0908 \u092b\u093f\u0930 \u0938\u0947\\n\u0936\u0941\u0930\u0942 \u0915\u0930\u0928\u093e \u091a\u093e\u0939\u0924\u0947 \u0939\u0948\u0902?","mmddyy":"\u0924\u093e\u0930\u0940\u0916","Anonymous":"\u0905\u0928\u093e\u092e"},"Texture":{"NO_THANKS":"texts/no-thank","COOL":"texts/cool","CONGRATULATIONS":"texts/congratulation","EXCELLENT":"texts/excellent","GOOD":"texts/good","GREAT":"texts/great","LOGO":"logo","CONTINUE":"texts/continue"}}'),it:JSON.parse('{"Text":{"POP JEWELS":"POP JEWELS","DAILY_REWARDS":"DAILY REWARDS","CLAIM":"CLAIM","CLAIM_X2":"CLAIM X2","DAY_{X}":"DAY {X}","PLAY_NOW":"PLAY NOW","PLAY_WITH_FRIENDS":"PLAY WITH FRIENDS","RANK":"RANK","DAILY":"DAILY","GIFT":"GIFT","SETTINGS":"SETTINGS","LEADERBOARDS":"LEADERBOARDS","PLAY":"PLAY","WITH_FRIENDS":"WITH FRIENDS","FRIENDS":"FRIENDS","WORLD":"WORLD","DAILY_MISSION":"DAILY MISSIONS","PASS_10_LEVELS":"PASS 10 LEVELS","COLLECT_300_DIAMONDS":"COLLECT 300 DIAMONDS","INVITE_2_FRIENDS":"INVITE 2 FRIENDS","REACH_TOTAL_SCORES":"REACH TOTAL SCORES","WATCH_A_VIDEO_TO_GET_{X}_DIAMONDS!":"WATCH A VIDEO TO GET\\\\n{X} DIAMONDS!","GET_NOW":"GET NOW!","TARGET":"TARGET","MISSION":"MISSION","YOUR_SCORE":"YOUR SCORE","LEVEL":"LIVELLO","REQUESTING":"REQUESTING...","LOADING_INTERSTITIAL_AD":"LOADING INTERSTITIAL AD...","HAMMER":"HAMMER","HAMMER_DESCRIPTION":"USE HAMMER TO SMASH ANY GEM","MAGIC_BOTTLE":"MAGIC BOTTLE","MAGIC_BOTTLE_DESCRIPTION":"USE MAGIC BOTTLE TO CHANGE A GEM COLOR","LEVEL_FAILED":"LEVEL FAILED","FAILED_TEXT":"YOU DID NOT REACH THE TARGET SCORE","CONTINUE":"CONTINUE","BEST_SCORE":"BEST SCORE","GLOBAL":"GLOBAL","JOIN":"JOIN","REPLAY":"REPLAY","HOME":"HOME","TODAY_RECORD":"TODAY RECORD","SHARE":"SHARE","WAITING":"WAITING","WAITING_FOR_OPPONENT":"WAITING FOR OPPONENT","RESTART":"RESTART","DRAW":"DRAW","YOU_LOSE":"YOU LOSE","YOU_WIN":"YOU WIN","VS":"VS","GUIDE_TEXT_GEM":"TAP ON TWO OR MORE GEMS OF THE SAME COLOR TO DESTROY THEM","GUIDE_TEXT_CURRENT_SCORE":"THIS IS YOUR CURRENT SCORE","GUIDE_TEXT_TARGET_SCORE":"THIS IS THE TARGET SCORE FOR EACH LEVEL YOU NEED TO PASS","GUIDE_TEXT_RAINBOW_GEM":"RAINBOW GEM CAN CLEAR THE GEMS SURROUNDING IT","GUIDE_TEXT_HAMMER":"THIS IS A HAMMER, USE IT TO SMASH ANY GEM!","GUIDE_TEXT_SHUFFLE":"THIS IS A SHUFFLE TILE, USE IT TO SHUFFLE ALL GEMS","GUIDE_TEXT_MAGIC_BOTTLE":"THIS IS A MAGIC BOTTLE, USE IT TO CHANGE A GEM COLOUR","NO_ADS_TO_DISPLAY":"NESSUN ANNUNCIO DA VISUALIZZARE!","NO_REWARDS":"SPIACENTE, NESSUNA RICOMPENSA!","CANCELLED_AD":"HAI CANCELLATO L\'ANNUNCIO!","LOADING":"CARICAMENTO...","LOADING_AD":"CARICAMENTO ANNUNCI...","YOU_HAVE_JUST_RECEIVED_{X}_DIAMONDS":"YOU HAVE JUST RECEIVED\\\\n{X} DIAMONDS","CLOSE":"CLOSE","LEADERBOARD_EMPTY":"La classifica \xe8 vuota!","MESSAGE_INVITE":"{playerName} challenges you","MESSAGE_FINISH_MATCH":"{playerName} just finished. Check them now.","MESSAGE_BEST_SCORE":"{playerName} beat your high score. Their score: {playerScore}","MESSAGE_FINISH_TURN":"{playerName} got {score} scores. So easy! Can you?","SHARE_LEADERBOARDS":"A ha, I\'m the best!","SHARE_GAME_RESULTS":"Pheww, a great match!","SHARE_BEST_SCORE":"Ottimo! Ho un punteggio migliore!","TARGET_SCORE":"Punteggio Obiettivo","NO_SPACE_LEFT":"NESSUNO SPAZIO RIMASTO!","FULL":"Pieno","LOADING_LEVEL":"Caricamento livello...","SCORE_REACHED":"PUNTEGGIO RAGGIUNTO!","WELL_DONE":"BEN FATTO!","Level":"Livello","Completed":"Completato","COMPLETED":"COMPLETATO","Next_life":"Prossima vita","MESS_TUTORIAL_1":"Posiziona il blocco nella linea orizzontale\\ne guarda cosa succede!","MESS_TUTORIAL_2":"Ora guarda cosa succede quando\\ncrei una linea verticale.","MESS_TUTORIAL_3":"Puoi anche creare un quadrato 3x3.\\nProva!","MESS_TUTORIAL_4":"Disponi le linee e i quadrati\\nper ottenere punti combo!","COMBO":"COMBO","STREAK":"SERIE","MESS_SKIP_TUTORIAL":"Saltare il tutorial?","MESS_TAKE_A_BREAK_ADS":"Take a break\\nAd display in %s...","UPDATING_NEW_LEVELS":"AGGIORNAMENTO NUOVI LIVELLI...","RESTARTING_MAP":"Riavvio della mappa...","CANCEL":"Annulla","OK":"OK","CONFIRM_START_OVER":"CONFERMA DI VOLER RICOMINCIARE","MESS_START_OVER":"Sei sicuro di ricominciare?","mmddyy":"Data","Anonymous":"Anonimo"},"Texture":{"NO_THANKS":"texts/no-thank","COOL":"texts/cool","CONGRATULATIONS":"texts/congratulation","EXCELLENT":"texts/excellent","GOOD":"texts/good","GREAT":"texts/great","LOGO":"logo","CONTINUE":"texts/continue"}}'),id:JSON.parse('{"Text":{"POP JEWELS":"POP JEWELS","DAILY_REWARDS":"DAILY REWARDS","CLAIM":"CLAIM","CLAIM_X2":"CLAIM X2","DAY_{X}":"DAY {X}","PLAY_NOW":"PLAY NOW","PLAY_WITH_FRIENDS":"PLAY WITH FRIENDS","RANK":"RANK","DAILY":"DAILY","GIFT":"GIFT","SETTINGS":"SETTINGS","LEADERBOARDS":"LEADERBOARDS","PLAY":"PLAY","WITH_FRIENDS":"WITH FRIENDS","FRIENDS":"FRIENDS","WORLD":"WORLD","DAILY_MISSION":"DAILY MISSIONS","PASS_10_LEVELS":"PASS 10 LEVELS","COLLECT_300_DIAMONDS":"COLLECT 300 DIAMONDS","INVITE_2_FRIENDS":"INVITE 2 FRIENDS","REACH_TOTAL_SCORES":"REACH TOTAL SCORES","WATCH_A_VIDEO_TO_GET_{X}_DIAMONDS!":"WATCH A VIDEO TO GET\\\\n{X} DIAMONDS!","GET_NOW":"GET NOW!","TARGET":"TARGET","MISSION":"MISSION","YOUR_SCORE":"YOUR SCORE","LEVEL":"TINGKAT","REQUESTING":"REQUESTING...","LOADING_INTERSTITIAL_AD":"LOADING INTERSTITIAL AD...","HAMMER":"HAMMER","HAMMER_DESCRIPTION":"USE HAMMER TO SMASH ANY GEM","MAGIC_BOTTLE":"MAGIC BOTTLE","MAGIC_BOTTLE_DESCRIPTION":"USE MAGIC BOTTLE TO CHANGE A GEM COLOR","LEVEL_FAILED":"TINGKAT FAILED","FAILED_TEXT":"YOU DID NOT REACH THE TARGET SCORE","CONTINUE":"CONTINUE","BEST_SCORE":"BEST SCORE","GLOBAL":"GLOBAL","JOIN":"JOIN","REPLAY":"REPLAY","HOME":"HOME","TODAY_RECORD":"TODAY RECORD","SHARE":"SHARE","WAITING":"WAITING","WAITING_FOR_OPPONENT":"WAITING FOR OPPONENT","RESTART":"RESTART","DRAW":"DRAW","YOU_LOSE":"YOU LOSE","YOU_WIN":"YOU WIN","VS":"VS","GUIDE_TEXT_GEM":"TAP ON TWO OR MORE GEMS OF THE SAME COLOR TO DESTROY THEM","GUIDE_TEXT_CURRENT_SCORE":"THIS IS YOUR CURRENT SCORE","GUIDE_TEXT_TARGET_SCORE":"THIS IS THE TARGET SCORE FOR EACH LEVEL YOU NEED TO PASS","GUIDE_TEXT_RAINBOW_GEM":"RAINBOW GEM CAN CLEAR THE GEMS SURROUNDING IT","GUIDE_TEXT_HAMMER":"THIS IS A HAMMER, USE IT TO SMASH ANY GEM!","GUIDE_TEXT_SHUFFLE":"THIS IS A SHUFFLE TILE, USE IT TO SHUFFLE ALL GEMS","GUIDE_TEXT_MAGIC_BOTTLE":"THIS IS A MAGIC BOTTLE, USE IT TO CHANGE A GEM COLOUR","NO_ADS_TO_DISPLAY":"TIDAK ADA IKLAN UNTUK DITAMPILKAN!","NO_REWARDS":"MAAF, TIDAK ADA HADIAH!","CANCELLED_AD":"KAMU TELAH MEMBATALKAN IKLANNYA!","LOADING":"MEMUAT...","LOADING_AD":"MEMUAT IKLAN...","YOU_HAVE_JUST_RECEIVED_{X}_DIAMONDS":"YOU HAVE JUST RECEIVED\\\\n{X} DIAMONDS","CLOSE":"CLOSE","LEADERBOARD_EMPTY":"Papan peringkat kosong!","MESSAGE_INVITE":"{playerName} challenges you","MESSAGE_FINISH_MATCH":"{playerName} just finished. Check them now.","MESSAGE_BEST_SCORE":"{playerName} beat your high score. Their score: {playerScore}","MESSAGE_FINISH_TURN":"{playerName} got {score} scores. So easy! Can you?","SHARE_LEADERBOARDS":"A ha, I\'m the best!","SHARE_GAME_RESULTS":"Pheww, a great match!","SHARE_BEST_SCORE":"Hebat! Aku dapat skor terbaik!","TARGET_SCORE":"Skor Target","NO_SPACE_LEFT":"TIDAK ADA RUANG TERSISA!","FULL":"Penuh","LOADING_LEVEL":"Memuat Tingkat...","SCORE_REACHED":"SKOR TERCAPAI!","WELL_DONE":"KERJA BAGUS!","Level":"Tingkat","Completed":"Selesai","COMPLETED":"SELESAI","Next_life":"Kehidupan selanjutnya","MESS_TUTORIAL_1":"Tempatkan blok dalam baris horizontal\\ndan lihat apa yang terjadi!","MESS_TUTORIAL_2":"Sekarang lihat apa yang\\nterjadi saat kamu membuat baris vertikal.","MESS_TUTORIAL_3":"Kamu juga bisa membuat kotak 3x3.\\nCobalah!","MESS_TUTORIAL_4":"Atur baris dan kotak untuk\\nmendapatkan poin kombo!","COMBO":"KOMBO","STREAK":"RENTETAN","MESS_SKIP_TUTORIAL":"Yakin ingin melewati tutorial?","MESS_TAKE_A_BREAK_ADS":"Take a break\\nAd display in %s...","UPDATING_NEW_LEVELS":"MEMPERBARUI TINGKAT BARU...","RESTARTING_MAP":"MEMULAI ULANG PETA...","CANCEL":"Batalkan","OK":"OK","CONFIRM_START_OVER":"KONFIRMASI MULAI ULANG","MESS_START_OVER":"Yakin ingin mulai ulang?","mmddyy":"Tanggal","Anonymous":"Anonim"},"Texture":{"NO_THANKS":"texts/no-thank","COOL":"texts/cool","CONGRATULATIONS":"texts/congratulation","EXCELLENT":"texts/excellent","GOOD":"texts/good","GREAT":"texts/great","LOGO":"logo","CONTINUE":"texts/continue"}}'),de:JSON.parse('{"Text":{"POP JEWELS":"POP JEWELS","DAILY_REWARDS":"DAILY REWARDS","CLAIM":"CLAIM","CLAIM_X2":"CLAIM X2","DAY_{X}":"DAY {X}","PLAY_NOW":"PLAY NOW","PLAY_WITH_FRIENDS":"PLAY WITH FRIENDS","RANK":"RANK","DAILY":"DAILY","GIFT":"GIFT","SETTINGS":"SETTINGS","LEADERBOARDS":"LEADERBOARDS","PLAY":"PLAY","WITH_FRIENDS":"WITH FRIENDS","FRIENDS":"FRIENDS","WORLD":"WORLD","DAILY_MISSION":"DAILY MISSIONS","PASS_10_LEVELS":"PASS 10 LEVELS","COLLECT_300_DIAMONDS":"COLLECT 300 DIAMONDS","INVITE_2_FRIENDS":"INVITE 2 FRIENDS","REACH_TOTAL_SCORES":"REACH TOTAL SCORES","WATCH_A_VIDEO_TO_GET_{X}_DIAMONDS!":"WATCH A VIDEO TO GET\\\\n{X} DIAMONDS!","GET_NOW":"GET NOW!","TARGET":"TARGET","MISSION":"MISSION","YOUR_SCORE":"YOUR SCORE","LEVEL":"EBENE","REQUESTING":"REQUESTING...","LOADING_INTERSTITIAL_AD":"LOADING INTERSTITIAL AD...","HAMMER":"HAMMER","HAMMER_DESCRIPTION":"USE HAMMER TO SMASH ANY GEM","MAGIC_BOTTLE":"MAGIC BOTTLE","MAGIC_BOTTLE_DESCRIPTION":"USE MAGIC BOTTLE TO CHANGE A GEM COLOR","LEVEL_FAILED":"EBENE FAILED","FAILED_TEXT":"YOU DID NOT REACH THE TARGET SCORE","CONTINUE":"CONTINUE","BEST_SCORE":"BEST SCORE","GLOBAL":"GLOBAL","JOIN":"JOIN","REPLAY":"REPLAY","HOME":"HOME","TODAY_RECORD":"TODAY RECORD","SHARE":"SHARE","WAITING":"WAITING","WAITING_FOR_OPPONENT":"WAITING FOR OPPONENT","RESTART":"RESTART","DRAW":"DRAW","YOU_LOSE":"YOU LOSE","YOU_WIN":"YOU WIN","VS":"VS","GUIDE_TEXT_GEM":"TAP ON TWO OR MORE GEMS OF THE SAME COLOR TO DESTROY THEM","GUIDE_TEXT_CURRENT_SCORE":"THIS IS YOUR CURRENT SCORE","GUIDE_TEXT_TARGET_SCORE":"THIS IS THE TARGET SCORE FOR EACH LEVEL YOU NEED TO PASS","GUIDE_TEXT_RAINBOW_GEM":"RAINBOW GEM CAN CLEAR THE GEMS SURROUNDING IT","GUIDE_TEXT_HAMMER":"THIS IS A HAMMER, USE IT TO SMASH ANY GEM!","GUIDE_TEXT_SHUFFLE":"THIS IS A SHUFFLE TILE, USE IT TO SHUFFLE ALL GEMS","GUIDE_TEXT_MAGIC_BOTTLE":"THIS IS A MAGIC BOTTLE, USE IT TO CHANGE A GEM COLOUR","NO_ADS_TO_DISPLAY":"KEINE ANZEIGEN VORHANDEN!","NO_REWARDS":"LEIDER ERH\xc4LTST DU KEINE BELOHNUNGEN!","CANCELLED_AD":"DU HAST DIE ANZEIGE ABGEBROCHEN!","LOADING":"WIRD GELADEN\u2026","LOADING_AD":"ANZEIGEN WERDEN GELADEN\u2026","YOU_HAVE_JUST_RECEIVED_{X}_DIAMONDS":"YOU HAVE JUST RECEIVED\\\\n{X} DIAMONDS","CLOSE":"CLOSE","LEADERBOARD_EMPTY":"Bestenliste ist leer!","MESSAGE_INVITE":"{playerName} challenges you","MESSAGE_FINISH_MATCH":"{playerName} just finished. Check them now.","MESSAGE_BEST_SCORE":"{playerName} beat your high score. Their score: {playerScore}","MESSAGE_FINISH_TURN":"{playerName} got {score} scores. So easy! Can you?","SHARE_LEADERBOARDS":"A ha, I\'m the best!","SHARE_GAME_RESULTS":"Pheww, a great match!","SHARE_BEST_SCORE":"Toll! Ich habe eine Bestpunktzahl erreicht!","TARGET_SCORE":"Zielpunktzahl","NO_SPACE_LEFT":"KEIN PLATZ MEHR \xdcBRIG!","FULL":"Voll","LOADING_LEVEL":"Ebene wird geladen\u2026","SCORE_REACHED":"PUNKTZAHL ERREICHT!","WELL_DONE":"GUT GEMACHT!","Level":"Ebene","Completed":"Abgeschlossen","COMPLETED":"ABGESCHLOSSEN","Next_life":"N\xe4chstes Leben","MESS_TUTORIAL_1":"F\xfcge den Block in die horizontale\\nLinie ein und gib gut acht!","MESS_TUTORIAL_2":"Jetzt bilden wir eine vertikale Linie.\\nPass noch einmal genau auf.","MESS_TUTORIAL_3":"Du kannst auch ein 3x3-Quadrat bilden.\\nVersuch es mal!","MESS_TUTORIAL_4":"Bilde Linien und Quadrate,\\num Kombo-Punkte zu erhalten!","COMBO":"COMBO","STREAK":"STR\xc4HNE","MESS_SKIP_TUTORIAL":"M\xf6chtest du das Tutorial\\nwirklich \xfcberspringen?","MESS_TAKE_A_BREAK_ADS":"Take a break\\nAd display in %s...","UPDATING_NEW_LEVELS":"NEUE EBENE WERDEN AKTUALISIERT\u2026","RESTARTING_MAP":"KARTE WIRD NEU GESTARTET\u2026","CANCEL":"Abbrechen","OK":"OK","CONFIRM_START_OVER":"NEUSTART BEST\xc4TIGEN","MESS_START_OVER":"M\xf6chtest du wirklich von\\nvorn beginnen?","mmddyy":"Datum","Anonymous":"Anonym"},"Texture":{"NO_THANKS":"texts/no-thank","COOL":"texts/cool","CONGRATULATIONS":"texts/congratulation","EXCELLENT":"texts/excellent","GOOD":"texts/good","GREAT":"texts/great","LOGO":"logo","CONTINUE":"texts/continue"}}'),ja:JSON.parse('{"Text":{"POP JEWELS":"POP JEWELS","DAILY_REWARDS":"DAILY REWARDS","CLAIM":"CLAIM","CLAIM_X2":"CLAIM X2","DAY_{X}":"DAY {X}","PLAY_NOW":"PLAY NOW","PLAY_WITH_FRIENDS":"PLAY WITH FRIENDS","RANK":"RANK","DAILY":"DAILY","GIFT":"GIFT","SETTINGS":"SETTINGS","LEADERBOARDS":"LEADERBOARDS","PLAY":"PLAY","WITH_FRIENDS":"WITH FRIENDS","FRIENDS":"FRIENDS","WORLD":"WORLD","DAILY_MISSION":"DAILY MISSIONS","PASS_10_LEVELS":"PASS 10 LEVELS","COLLECT_300_DIAMONDS":"COLLECT 300 DIAMONDS","INVITE_2_FRIENDS":"INVITE 2 FRIENDS","REACH_TOTAL_SCORES":"REACH TOTAL SCORES","WATCH_A_VIDEO_TO_GET_{X}_DIAMONDS!":"WATCH A VIDEO TO GET\\\\n{X} DIAMONDS!","GET_NOW":"GET NOW!","TARGET":"TARGET","MISSION":"MISSION","YOUR_SCORE":"YOUR SCORE","LEVEL":"\u30ec\u30d9\u30eb","REQUESTING":"REQUESTING...","LOADING_INTERSTITIAL_AD":"LOADING INTERSTITIAL AD...","HAMMER":"HAMMER","HAMMER_DESCRIPTION":"USE HAMMER TO SMASH ANY GEM","MAGIC_BOTTLE":"MAGIC BOTTLE","MAGIC_BOTTLE_DESCRIPTION":"USE MAGIC BOTTLE TO CHANGE A GEM COLOR","LEVEL_FAILED":"LEVEL FAILED","FAILED_TEXT":"YOU DID NOT REACH THE TARGET SCORE","CONTINUE":"CONTINUE","BEST_SCORE":"BEST SCORE","GLOBAL":"GLOBAL","JOIN":"JOIN","REPLAY":"REPLAY","HOME":"HOME","TODAY_RECORD":"TODAY RECORD","SHARE":"SHARE","WAITING":"WAITING","WAITING_FOR_OPPONENT":"WAITING FOR OPPONENT","RESTART":"RESTART","DRAW":"DRAW","YOU_LOSE":"YOU LOSE","YOU_WIN":"YOU WIN","VS":"VS","GUIDE_TEXT_GEM":"TAP ON TWO OR MORE GEMS OF THE SAME COLOR TO DESTROY THEM","GUIDE_TEXT_CURRENT_SCORE":"THIS IS YOUR CURRENT SCORE","GUIDE_TEXT_TARGET_SCORE":"THIS IS THE TARGET SCORE FOR EACH LEVEL YOU NEED TO PASS","GUIDE_TEXT_RAINBOW_GEM":"RAINBOW GEM CAN CLEAR THE GEMS SURROUNDING IT","GUIDE_TEXT_HAMMER":"THIS IS A HAMMER, USE IT TO SMASH ANY GEM!","GUIDE_TEXT_SHUFFLE":"THIS IS A SHUFFLE TILE, USE IT TO SHUFFLE ALL GEMS","GUIDE_TEXT_MAGIC_BOTTLE":"THIS IS A MAGIC BOTTLE, USE IT TO CHANGE A GEM COLOUR","NO_ADS_TO_DISPLAY":"\u8868\u793a\u3067\u304d\u308b\u5e83\u544a\u306f\u3042\u308a\u307e\u305b\u3093!","NO_REWARDS":"\u5e83\u544a\u3092\u30ad\u30e3\u30f3\u30bb\u30eb\u3057\u305f\u306e\u3067!","CANCELLED_AD":"\u6b8b\u5ff5\u3067\u3059\u304c\u30ea\u30ef\u30fc\u30c9\u306a\u3057\u3067\u3059\uff01","LOADING":"\u8aad\u307f\u8fbc\u307f\u4e2d...","LOADING_AD":"\u5e83\u544a\u3092\u8aad\u307f\u8fbc\u307f\u4e2d...","YOU_HAVE_JUST_RECEIVED_{X}_DIAMONDS":"YOU HAVE JUST RECEIVED\\\\n{X} DIAMONDS","CLOSE":"CLOSE","LEADERBOARD_EMPTY":"\u30ea\u30fc\u30c0\u30fc\u30dc\u30fc\u30c9\u304c\u7a7a\u3063\u307d\uff01","MESSAGE_INVITE":"{playerName} challenges you","MESSAGE_FINISH_MATCH":"{playerName} just finished. Check them now.","MESSAGE_BEST_SCORE":"{playerName} beat your high score. Their score: {playerScore}","MESSAGE_FINISH_TURN":"{playerName} got {score} scores. So easy! Can you?","SHARE_LEADERBOARDS":"A ha, I\'m the best!","SHARE_GAME_RESULTS":"Pheww, a great match!","SHARE_BEST_SCORE":"\u3059\u3054\u3044\uff01\u30d9\u30b9\u30c8\u30b9\u30b3\u30a2\u3092\u7372\u5f97\u3057\u305f\uff01","TARGET_SCORE":"\u76ee\u6a19\u30b9\u30b3\u30a2","NO_SPACE_LEFT":"\u30b9\u30da\u30fc\u30b9\u304c\u306a\u3044!","FULL":"\u30d5\u30eb","LOADING_LEVEL":"\u30ec\u30d9\u30eb\u3092\u8aad\u307f\u8fbc\u307f\u4e2d...","SCORE_REACHED":"\u5230\u9054\u3057\u305f\u30b9\u30b3\u30a2!","WELL_DONE":"\u304a\u898b\u4e8b!","Level":"\u30ec\u30d9\u30eb","Completed":"\u5b8c\u4e86","COMPLETED":"\u5b8c\u4e86","Next_life":"\u6b21\u306e\u4eba\u751f","MESS_TUTORIAL_1":"\u6a2a\u306e\u30e9\u30a4\u30f3\u304c\u3067\u304d\u308b\u3088\u3046\u306b\u30d6\u30ed\\n\u30c3\u30af\u3092\u914d\u7f6e\u3057\u3066\u307f\u3066\u304f\u3060\u3055\u3044\uff01","MESS_TUTORIAL_2":"\u6b21\u306f\u7e26\u306e\u30e9\u30a4\u30f3\u304c\u3067\u304d\u308b\u3088\u3046\u306b\u914d\u7f6e\\n\u3059\u308b\u3068\u3069\u3046\u306a\u308b\u304b\u898b\u3066\u307f\u307e\u3057\u3087\u3046\u3002","MESS_TUTORIAL_3":"\u307e\u305f\u30013x3 \u306e\u30b9\u30af\u30a8\u30a2\u3092\u4f5c\u308b\u3053\u3068\u3082\u3067\u304d\u307e\u3059\u3002\\n\u3084\u3063\u3066\u307f\u3066\u304f\u3060\u3055\u3044\uff01","MESS_TUTORIAL_4":"\u30e9\u30a4\u30f3\u3084\u30b9\u30af\u30a8\u30a2\u3092\u4f5c\u3063\u3066\u30b3\u30f3\u30dc\\n\u30dd\u30a4\u30f3\u30c8\u3092\u7372\u5f97\u3057\u307e\u3057\u3087\u3046\uff01","COMBO":"\u30b3\u30f3\u30dc","STREAK":"\u9023\u7d9a","MESS_SKIP_TUTORIAL":"\u672c\u5f53\u306b\u30c1\u30e5\u30fc\u30c8\u30ea\u30a2\u30eb\u3092\u30b9\u30ad\u30c3\\n\u30d7\u3057\u3066\u3088\u308d\u3057\u3044\u3067\u3059\u304b\uff1f","MESS_TAKE_A_BREAK_ADS":"Take a break\\nAd display in %s...","UPDATING_NEW_LEVELS":"\u65b0\u3057\u3044\u30ec\u30d9\u30eb\u3092\u30a2\u30c3\u30d7\u30c7\u30fc\u30c8\u4e2d...","RESTARTING_MAP":"\u30de\u30c3\u30d7\u3092\u3084\u308a\u306a\u304a\u3057\u3066\u3044\u307e\u3059...","CANCEL":"\u30ad\u30e3\u30f3\u30bb\u30eb","OK":"OK","CONFIRM_START_OVER":"\u6700\u521d\u304b\u3089\u3084\u308a\u76f4\u3057\u3092\u78ba\u5b9a","MESS_START_OVER":"\u672c\u5f53\u306b\u6700\u521d\u304b\u3089\u3084\u308a\u76f4\u3057\\n\u3066\u3088\u308d\u3057\u3044\u3067\u3059\u304b\uff1f","mmddyy":"\u65e5\u4ed8","Anonymous":"\u533f\u540d"},"Texture":{"NO_THANKS":"texts/no-thank","COOL":"texts/cool","CONGRATULATIONS":"texts/congratulation","EXCELLENT":"texts/excellent","GOOD":"texts/good","GREAT":"texts/great","LOGO":"logo","CONTINUE":"texts/continue"}}'),es:JSON.parse('{"Text":{"POP JEWELS":"POP JEWELS","DAILY_REWARDS":"DAILY REWARDS","CLAIM":"CLAIM","CLAIM_X2":"CLAIM X2","DAY_{X}":"DAY {X}","PLAY_NOW":"PLAY NOW","PLAY_WITH_FRIENDS":"PLAY WITH FRIENDS","RANK":"RANK","DAILY":"DAILY","GIFT":"GIFT","SETTINGS":"SETTINGS","LEADERBOARDS":"LEADERBOARDS","PLAY":"PLAY","WITH_FRIENDS":"WITH FRIENDS","FRIENDS":"FRIENDS","WORLD":"WORLD","DAILY_MISSION":"DAILY MISSIONS","PASS_10_LEVELS":"PASS 10 LEVELS","COLLECT_300_DIAMONDS":"COLLECT 300 DIAMONDS","INVITE_2_FRIENDS":"INVITE 2 FRIENDS","REACH_TOTAL_SCORES":"REACH TOTAL SCORES","WATCH_A_VIDEO_TO_GET_{X}_DIAMONDS!":"WATCH A VIDEO TO GET\\\\n{X} DIAMONDS!","GET_NOW":"GET NOW!","TARGET":"TARGET","MISSION":"MISSION","YOUR_SCORE":"YOUR SCORE","LEVEL":"NIVEL","REQUESTING":"REQUESTING...","LOADING_INTERSTITIAL_AD":"LOADING INTERSTITIAL AD...","HAMMER":"HAMMER","HAMMER_DESCRIPTION":"USE HAMMER TO SMASH ANY GEM","MAGIC_BOTTLE":"MAGIC BOTTLE","MAGIC_BOTTLE_DESCRIPTION":"USE MAGIC BOTTLE TO CHANGE A GEM COLOR","LEVEL_FAILED":"LEVEL FAILED","FAILED_TEXT":"YOU DID NOT REACH THE TARGET SCORE","CONTINUE":"CONTINUE","BEST_SCORE":"BEST SCORE","GLOBAL":"GLOBAL","JOIN":"JOIN","REPLAY":"REPLAY","HOME":"HOME","TODAY_RECORD":"TODAY RECORD","SHARE":"SHARE","WAITING":"WAITING","WAITING_FOR_OPPONENT":"WAITING FOR OPPONENT","RESTART":"RESTART","DRAW":"DRAW","YOU_LOSE":"YOU LOSE","YOU_WIN":"YOU WIN","VS":"VS","GUIDE_TEXT_GEM":"TAP ON TWO OR MORE GEMS OF THE SAME COLOR TO DESTROY THEM","GUIDE_TEXT_CURRENT_SCORE":"THIS IS YOUR CURRENT SCORE","GUIDE_TEXT_TARGET_SCORE":"THIS IS THE TARGET SCORE FOR EACH LEVEL YOU NEED TO PASS","GUIDE_TEXT_RAINBOW_GEM":"RAINBOW GEM CAN CLEAR THE GEMS SURROUNDING IT","GUIDE_TEXT_HAMMER":"THIS IS A HAMMER, USE IT TO SMASH ANY GEM!","GUIDE_TEXT_SHUFFLE":"THIS IS A SHUFFLE TILE, USE IT TO SHUFFLE ALL GEMS","GUIDE_TEXT_MAGIC_BOTTLE":"THIS IS A MAGIC BOTTLE, USE IT TO CHANGE A GEM COLOUR","NO_ADS_TO_DISPLAY":"\xa1NO HAY ANUNCIOS PARA MOSTRAR!","NO_REWARDS":"LO SENTIMOS, NO HAY RECOMPENSAS!","CANCELLED_AD":"HAS CANCELADO EL ANUNCIO!","LOADING":"CARGANDO...","LOADING_AD":"CARGANDO ANUNCIOS...","YOU_HAVE_JUST_RECEIVED_{X}_DIAMONDS":"YOU HAVE JUST RECEIVED\\\\n{X} DIAMONDS","CLOSE":"CLOSE","LEADERBOARD_EMPTY":"\xa1La tabla de clasificaci\xf3n est\xe1 vac\xeda!","MESSAGE_INVITE":"{playerName} challenges you","MESSAGE_FINISH_MATCH":"{playerName} just finished. Check them now.","MESSAGE_BEST_SCORE":"{playerName} beat your high score. Their score: {playerScore}","MESSAGE_FINISH_TURN":"{playerName} got {score} scores. So easy! Can you?","SHARE_LEADERBOARDS":"A ha, I\'m the best!","SHARE_GAME_RESULTS":"Pheww, a great match!","SHARE_BEST_SCORE":"\xa1Muy bien! Tengo la mejor puntuaci\xf3n!","TARGET_SCORE":"Puntuaci\xf3n Objetivo","NO_SPACE_LEFT":"\xa1NO QUEDA ESPACIO!","FULL":"Completo","LOADING_LEVEL":"Cargando nivel...","SCORE_REACHED":"\xa1PUNTUACI\xd3N ALCANZADA!","WELL_DONE":"BIEN HECHO!","Level":"Nivel","Completed":"Completado","COMPLETED":"COMPLETADO","Next_life":"Pr\xf3xima vida","MESS_TUTORIAL_1":"\xa1Coloca el bloque en la l\xednea\\nhorizontal y mira lo que pasa!","MESS_TUTORIAL_2":"Ahora mira lo que sucede cuando haces\\nuna l\xednea vertical.","MESS_TUTORIAL_3":"\xa1Tambi\xe9n puedes hacer un cuadrado de 3x3.\\nPru\xe9balo!","MESS_TUTORIAL_4":"\xa1Organiza l\xedneas y cuadrados para\\nobtener puntos de combo!","COMBO":"COMBO","STREAK":"RACHA","MESS_SKIP_TUTORIAL":"\xbfEst\xe1s seguro de que quieres\\nsaltarte el tutorial?","MESS_TAKE_A_BREAK_ADS":"Take a break\\nAd display in %s...","UPDATING_NEW_LEVELS":"ACTUALIZANDO NUEVOS NIVELES...","RESTARTING_MAP":"REINICIANDO EL MAPA...","CANCEL":"Cancelar","OK":"OK","CONFIRM_START_OVER":"CONFIRMAR EMPEZAR DE NUEVO","MESS_START_OVER":"\xbfSeguro que quieres\\nempezar de nuevo?","mmddyy":"Fecha","Anonymous":"An\xf3nimo"},"Texture":{"NO_THANKS":"texts/no-thank","COOL":"texts/cool","CONGRATULATIONS":"texts/congratulation","EXCELLENT":"texts/excellent","GOOD":"texts/good","GREAT":"texts/great","LOGO":"logo","CONTINUE":"texts/continue"}}'),zh:JSON.parse('{"Text":{"POP JEWELS":"POP JEWELS","DAILY_REWARDS":"DAILY REWARDS","CLAIM":"CLAIM","CLAIM_X2":"CLAIM X2","DAY_{X}":"DAY {X}","PLAY_NOW":"PLAY NOW","PLAY_WITH_FRIENDS":"PLAY WITH FRIENDS","RANK":"RANK","DAILY":"DAILY","GIFT":"GIFT","SETTINGS":"SETTINGS","LEADERBOARDS":"LEADERBOARDS","PLAY":"PLAY","WITH_FRIENDS":"WITH FRIENDS","FRIENDS":"FRIENDS","WORLD":"WORLD","DAILY_MISSION":"DAILY MISSIONS","PASS_10_LEVELS":"PASS 10 LEVELS","COLLECT_300_DIAMONDS":"COLLECT 300 DIAMONDS","INVITE_2_FRIENDS":"INVITE 2 FRIENDS","REACH_TOTAL_SCORES":"REACH TOTAL SCORES","WATCH_A_VIDEO_TO_GET_{X}_DIAMONDS!":"WATCH A VIDEO TO GET\\\\n{X} DIAMONDS!","GET_NOW":"GET NOW!","TARGET":"TARGET","MISSION":"MISSION","YOUR_SCORE":"YOUR SCORE","LEVEL":"\u5173\u5361","REQUESTING":"REQUESTING...","LOADING_INTERSTITIAL_AD":"LOADING INTERSTITIAL AD...","HAMMER":"HAMMER","HAMMER_DESCRIPTION":"USE HAMMER TO SMASH ANY GEM","MAGIC_BOTTLE":"MAGIC BOTTLE","MAGIC_BOTTLE_DESCRIPTION":"USE MAGIC BOTTLE TO CHANGE A GEM COLOR","LEVEL_FAILED":"LEVEL FAILED","FAILED_TEXT":"YOU DID NOT REACH THE TARGET SCORE","CONTINUE":"CONTINUE","BEST_SCORE":"BEST SCORE","GLOBAL":"GLOBAL","JOIN":"JOIN","REPLAY":"REPLAY","HOME":"HOME","TODAY_RECORD":"TODAY RECORD","SHARE":"SHARE","WAITING":"WAITING","WAITING_FOR_OPPONENT":"WAITING FOR OPPONENT","RESTART":"RESTART","DRAW":"DRAW","YOU_LOSE":"YOU LOSE","YOU_WIN":"YOU WIN","VS":"VS","GUIDE_TEXT_GEM":"TAP ON TWO OR MORE GEMS OF THE SAME COLOR TO DESTROY THEM","GUIDE_TEXT_CURRENT_SCORE":"THIS IS YOUR CURRENT SCORE","GUIDE_TEXT_TARGET_SCORE":"THIS IS THE TARGET SCORE FOR EACH LEVEL YOU NEED TO PASS","GUIDE_TEXT_RAINBOW_GEM":"RAINBOW GEM CAN CLEAR THE GEMS SURROUNDING IT","GUIDE_TEXT_HAMMER":"THIS IS A HAMMER, USE IT TO SMASH ANY GEM!","GUIDE_TEXT_SHUFFLE":"THIS IS A SHUFFLE TILE, USE IT TO SHUFFLE ALL GEMS","GUIDE_TEXT_MAGIC_BOTTLE":"THIS IS A MAGIC BOTTLE, USE IT TO CHANGE A GEM COLOUR","NO_ADS_TO_DISPLAY":"\u6ca1\u6709\u53ef\u4ee5\u663e\u793a\u7684\u5e7f\u544a!","NO_REWARDS":"\u62b1\u6b49\uff0c\u6ca1\u6709\u5956\u52b1!","CANCELLED_AD":"\u60a8\u5df2\u53d6\u6d88\u4e86\u5e7f\u544a!","LOADING":"\u6b63\u5728\u52a0\u8f7d...","LOADING_AD":"\u6b63\u5728\u52a0\u8f7d\u5e7f\u544a...","YOU_HAVE_JUST_RECEIVED_{X}_DIAMONDS":"YOU HAVE JUST RECEIVED\\\\n{X} DIAMONDS","CLOSE":"CLOSE","LEADERBOARD_EMPTY":"\u6392\u884c\u699c\u8fd8\u6ca1\u6709\u4eba!","MESSAGE_INVITE":"{playerName} challenges you","MESSAGE_FINISH_MATCH":"{playerName} just finished. Check them now.","MESSAGE_BEST_SCORE":"{playerName} beat your high score. Their score: {playerScore}","MESSAGE_FINISH_TURN":"{playerName} got {score} scores. So easy! Can you?","SHARE_LEADERBOARDS":"A ha, I\'m the best!","SHARE_GAME_RESULTS":"Pheww, a great match!","SHARE_BEST_SCORE":"\u592a\u68d2\u4e86\uff01\u6211\u83b7\u5f97\u4e86\u6700\u4f73\u5f97\u5206!","TARGET_SCORE":"\u76ee\u6807\u5206\u6570","NO_SPACE_LEFT":"\u6ca1\u6709\u5269\u4f59\u7684\u7a7a\u95f4!","FULL":"\u5df2\u6ee1","LOADING_LEVEL":"\u6b63\u5728\u52a0\u8f7d\u5173\u5361...","SCORE_REACHED":"\u8fbe\u5230\u7684\u5206\u6570!","WELL_DONE":"\u592a\u68d2\u4e86!","Level":"\u5173\u5361","Completed":"\u5df2\u5b8c\u6210","COMPLETED":"\u5df2\u5b8c\u6210","Next_life":"\u4e0b\u4e00\u4e2a\u751f\u547d","MESS_TUTORIAL_1":"\u5c06\u6728\u5757\u653e\u5728\u6c34\u5e73\u7ebf\u4e0a\\n\u770b\u770b\u4f1a\u53d1\u751f\u4ec0\u4e48!","MESS_TUTORIAL_2":"\u73b0\u5728\u60a8\u77e5\u9053\u5f53\u60a8\u8fde\u6210\u4e00\u6761\\n\u5782\u76f4\u7ebf\u65f6\u4f1a\u53d1\u751f\u7684\u60c5\u51b5.","MESS_TUTORIAL_3":"\u60a8\u8fd8\u53ef\u4ee5\u5792\u6210\u4e00\u4e2a 3x3 \u7684\u65b9\u5f62.\\n\u8bd5\u8bd5\u5427!","MESS_TUTORIAL_4":"\u540c\u65f6\u8fde\u6210\u76f4\u7ebf\u548c\u65b9\u5f62,\\n\u83b7\u5f97\u8fde\u51fb\u5206\u6570!","COMBO":"COMBO","STREAK":"\u8fde\u80dc","MESS_SKIP_TUTORIAL":"\u786e\u5b9a\u8981\u8df3\u8fc7\u6559\u7a0b\u5417\uff1f","MESS_TAKE_A_BREAK_ADS":"Take a break\\nAd display in %s...","UPDATING_NEW_LEVELS":"\u6b63\u5728\u66f4\u65b0\u65b0\u5173\u5361...","RESTARTING_MAP":"\u6b63\u5728\u91cd\u542f\u5730\u56fe...","CANCEL":"\u53d6\u6d88","OK":"\u786e\u5b9a","CONFIRM_START_OVER":"\u786e\u5b9a\u91cd\u65b0\u5f00\u59cb","MESS_START_OVER":"\u786e\u5b9a\u8981\u91cd\u65b0\u5f00\u59cb\u5417\uff1f","mmddyy":"\u65e5\u671f","Anonymous":"\u533f\u540d"},"Texture":{"NO_THANKS":"texts/no-thank","COOL":"texts/cool","CONGRATULATIONS":"texts/congratulation","EXCELLENT":"texts/excellent","GOOD":"texts/good","GREAT":"texts/great","LOGO":"logo","CONTINUE":"texts/continue"}}'),ar:JSON.parse('{"Text":{"POP JEWELS":"POP JEWELS","DAILY_REWARDS":"DAILY REWARDS","CLAIM":"CLAIM","CLAIM_X2":"CLAIM X2","DAY_{X}":"DAY {X}","PLAY_NOW":"PLAY NOW","PLAY_WITH_FRIENDS":"PLAY WITH FRIENDS","RANK":"RANK","DAILY":"DAILY","GIFT":"GIFT","SETTINGS":"SETTINGS","LEADERBOARDS":"LEADERBOARDS","PLAY":"PLAY","WITH_FRIENDS":"WITH FRIENDS","FRIENDS":"FRIENDS","WORLD":"WORLD","DAILY_MISSION":"DAILY MISSIONS","PASS_10_LEVELS":"PASS 10 LEVELS","COLLECT_300_DIAMONDS":"COLLECT 300 DIAMONDS","INVITE_2_FRIENDS":"INVITE 2 FRIENDS","REACH_TOTAL_SCORES":"REACH TOTAL SCORES","WATCH_A_VIDEO_TO_GET_{X}_DIAMONDS!":"WATCH A VIDEO TO GET\\\\n{X} DIAMONDS!","GET_NOW":"GET NOW!","TARGET":"TARGET","MISSION":"MISSION","YOUR_SCORE":"YOUR SCORE","LEVEL":"\u0645\u0633\u062a\u0648\u0649","REQUESTING":"REQUESTING...","LOADING_INTERSTITIAL_AD":"LOADING INTERSTITIAL AD...","HAMMER":"HAMMER","HAMMER_DESCRIPTION":"USE HAMMER TO SMASH ANY GEM","MAGIC_BOTTLE":"MAGIC BOTTLE","MAGIC_BOTTLE_DESCRIPTION":"USE MAGIC BOTTLE TO CHANGE A GEM COLOR","LEVEL_FAILED":"LEVEL FAILED","FAILED_TEXT":"YOU DID NOT REACH THE TARGET SCORE","CONTINUE":"CONTINUE","BEST_SCORE":"BEST SCORE","GLOBAL":"GLOBAL","JOIN":"JOIN","REPLAY":"REPLAY","HOME":"HOME","TODAY_RECORD":"TODAY RECORD","SHARE":"SHARE","WAITING":"WAITING","WAITING_FOR_OPPONENT":"WAITING FOR OPPONENT","RESTART":"RESTART","DRAW":"DRAW","YOU_LOSE":"YOU LOSE","YOU_WIN":"YOU WIN","VS":"VS","GUIDE_TEXT_GEM":"TAP ON TWO OR MORE GEMS OF THE SAME COLOR TO DESTROY THEM","GUIDE_TEXT_CURRENT_SCORE":"THIS IS YOUR CURRENT SCORE","GUIDE_TEXT_TARGET_SCORE":"THIS IS THE TARGET SCORE FOR EACH LEVEL YOU NEED TO PASS","GUIDE_TEXT_RAINBOW_GEM":"RAINBOW GEM CAN CLEAR THE GEMS SURROUNDING IT","GUIDE_TEXT_HAMMER":"THIS IS A HAMMER, USE IT TO SMASH ANY GEM!","GUIDE_TEXT_SHUFFLE":"THIS IS A SHUFFLE TILE, USE IT TO SHUFFLE ALL GEMS","GUIDE_TEXT_MAGIC_BOTTLE":"THIS IS A MAGIC BOTTLE, USE IT TO CHANGE A GEM COLOUR","NO_ADS_TO_DISPLAY":"\u0644\u0627 \u064a\u0648\u062c\u062f \u0625\u0639\u0644\u0627\u0646\u0627\u062a \u0644\u0639\u0631\u0636\u0647\u0627!","NO_REWARDS":"\u0646\u0623\u0633\u0641\u060c \u0644\u0627 \u064a\u064f\u0648\u062c\u062f \u0645\u0643\u0627\u0641\u0622\u062a!","CANCELLED_AD":"\u0644\u0642\u062f \u0642\u0645\u062a \u0628\u0625\u0644\u063a\u0627\u0621 \u0627\u0644\u0625\u0639\u0644\u0627\u0646!","LOADING":"\u062c\u0627\u0631\u064a \u0627\u0644\u062a\u062d\u0645\u064a\u0644...","LOADING_AD":"\u062c\u0627\u0631 \u062a\u062d\u0645\u064a\u0644 \u0627\u0644\u0625\u0639\u0644\u0627\u0646\u0627\u062a...","YOU_HAVE_JUST_RECEIVED_{X}_DIAMONDS":"YOU HAVE JUST RECEIVED\\\\n{X} DIAMONDS","CLOSE":"CLOSE","LEADERBOARD_EMPTY":"!\u0644\u0648\u062d\u0629 \u0627\u0644\u0645\u062a\u0633\u0627\u0628\u0642\u064a\u0646 \u0641\u0627\u0631\u063a\u0629","MESSAGE_INVITE":"{playerName} challenges you","MESSAGE_FINISH_MATCH":"{playerName} just finished. Check them now.","MESSAGE_BEST_SCORE":"{playerName} beat your high score. Their score: {playerScore}","MESSAGE_FINISH_TURN":"{playerName} got {score} scores. So easy! Can you?","SHARE_LEADERBOARDS":"A ha, I\'m the best!","SHARE_GAME_RESULTS":"Pheww, a great match!","SHARE_BEST_SCORE":"\u0631\u0627\u0626\u0639! \u0644\u0642\u062f \u062d\u0642\u0642\u062a \u0623\u0641\u0636\u0644 \u0631\u0642\u0645 \u0642\u064a\u0627\u0633\u064a","TARGET_SCORE":"\u0647\u062f\u0641 \u0627\u0644\u0631\u0642\u0645 \u0627\u0644\u0642\u064a\u0627\u0633\u064a","NO_SPACE_LEFT":"!\u0644\u0645 \u064a\u062a\u0628\u0642 \u0645\u0633\u0627\u062d\u0629","FULL":"\u0645\u0643\u062a\u0645\u0644","LOADING_LEVEL":"\u062c\u0627\u0631 \u062a\u062d\u0645\u064a\u0644 \u0627\u0644\u0645\u0633\u062a\u0648\u0649...","SCORE_REACHED":"!\u0648\u0635\u0644\u062a \u0627\u0644\u0646\u062a\u064a\u062c\u0629","WELL_DONE":"!\u0623\u062d\u0633\u0646\u062a","Level":"\u0645\u0633\u062a\u0648\u0649","Completed":"\u0627\u0643\u062a\u0645\u0644","COMPLETED":"\u0627\u0643\u062a\u0645\u0644","Next_life":"\u0627\u0644\u062d\u064a\u0627\u0629 \u0627\u0644\u0642\u0627\u062f\u0645\u0629","MESS_TUTORIAL_1":"\u0636\u0639 \u0627\u0644\u0642\u0641\u0644 \u0641\u064a \u062e\u0637 \u0623\u0641\u0642\u064a \u0648\u0631\u0627\u0642\u0628 \u0645\u0627 \u0633\u064a\u062d\u062f\u062b!","MESS_TUTORIAL_2":"\u0631\u0627\u0642\u0628 \u0627\u0644\u0622\u0646 \u0645\u0627 \u0633\u064a\u062d\u062f\u062b \u0639\u0646\u062f\u0645\u0627 \u062a\u0635\u0646\u0639 \u062e\u0637\u064b\u0627 \u0631\u0623\u0633\u064a\u064b\u0627.","MESS_TUTORIAL_3":"\u064a\u0645\u0643\u0646\u0643 \u0623\u064a\u0636\u064b\u0627 \u0625\u0646\u0634\u0627\u0621 \u0645\u0631\u0628\u0639 3x3. \u062d\u0627\u0648\u0644 \u0641\u0639\u0644 \u0630\u0644\u0643!","MESS_TUTORIAL_4":"!\u0631\u062a\u0628 \u0627\u0644\u062e\u0637\u0648\u0637 \u0648\u0627\u0644\u0645\u0631\u0628\u0639\u0627\u062a \u0644\u0644\u062d\u0635\u0648\u0644 \u0639\u0644\u0649 \u0645\u062c\u0645\u0648\u0639\u0629 \u0646\u0642\u0627\u0637","COMBO":"\u0643\u0648\u0645\u0628\u0648","STREAK":"\u0627\u0636\u0631\u0628","MESS_SKIP_TUTORIAL":"\u0647\u0644 \u062a\u0631\u064a\u062f \u0628\u0627\u0644\u062a\u0623\u0643\u064a\u062f \u062a\u062e\u0637\u064a \u0634\u0631\u062d \u0627\u0644\u0644\u0639\u0628\u0629\u061f","MESS_TAKE_A_BREAK_ADS":"Take a break\\nAd display in %s...","UPDATING_NEW_LEVELS":"...\u062a\u062d\u062f\u064a\u062b \u0645\u0633\u062a\u0648\u064a\u0627\u062a \u062c\u062f\u064a\u062f\u0629","RESTARTING_MAP":"...\u062c\u0627\u0631 \u0625\u0639\u0627\u062f\u0629 \u0628\u062f\u0621 \u0627\u0644\u062e\u0631\u064a\u0637\u0629","CANCEL":"\u0625\u0644\u063a\u0627\u0621","OK":"\u0645\u0648\u0627\u0641\u0642","CONFIRM_START_OVER":"\u0642\u0645 \u0628\u062a\u0623\u0643\u064a\u062f \u0625\u0639\u0627\u062f\u0629 \u0627\u0644\u0628\u062f\u0621","MESS_START_OVER":"\u0647\u0644 \u062a\u0631\u064a\u062f \u0628\u0627\u0644\u062a\u0623\u0643\u064a\u062f \u0625\u0639\u0627\u062f\u0629 \u0627\u0644\u0628\u062f\u0621\u061f","mmddyy":"\u062a\u0627\u0631\u064a\u062e","Anonymous":"\u0645\u062c\u0647\u0648\u0644"},"Texture":{"NO_THANKS":"texts/no-thank","COOL":"texts/cool","CONGRATULATIONS":"texts/congratulation","EXCELLENT":"texts/excellent","GOOD":"texts/good","GREAT":"texts/great","LOGO":"logo","CONTINUE":"texts/continue"}}'),tr:JSON.parse('{"Text":{"POP JEWELS":"POP JEWELS","DAILY_REWARDS":"DAILY REWARDS","CLAIM":"CLAIM","CLAIM_X2":"CLAIM X2","DAY_{X}":"DAY {X}","PLAY_NOW":"PLAY NOW","PLAY_WITH_FRIENDS":"PLAY WITH FRIENDS","RANK":"RANK","DAILY":"DAILY","GIFT":"GIFT","SETTINGS":"SETTINGS","LEADERBOARDS":"LEADERBOARDS","PLAY":"PLAY","WITH_FRIENDS":"WITH FRIENDS","FRIENDS":"FRIENDS","WORLD":"WORLD","DAILY_MISSION":"DAILY MISSIONS","PASS_10_LEVELS":"PASS 10 LEVELS","COLLECT_300_DIAMONDS":"COLLECT 300 DIAMONDS","INVITE_2_FRIENDS":"INVITE 2 FRIENDS","REACH_TOTAL_SCORES":"REACH TOTAL SCORES","WATCH_A_VIDEO_TO_GET_{X}_DIAMONDS!":"WATCH A VIDEO TO GET\\\\n{X} DIAMONDS!","GET_NOW":"GET NOW!","TARGET":"TARGET","MISSION":"MISSION","YOUR_SCORE":"YOUR SCORE","LEVEL":"SEVIYE","REQUESTING":"REQUESTING...","LOADING_INTERSTITIAL_AD":"LOADING INTERSTITIAL AD...","HAMMER":"HAMMER","HAMMER_DESCRIPTION":"USE HAMMER TO SMASH ANY GEM","MAGIC_BOTTLE":"MAGIC BOTTLE","MAGIC_BOTTLE_DESCRIPTION":"USE MAGIC BOTTLE TO CHANGE A GEM COLOR","LEVEL_FAILED":"LEVEL FAILED","FAILED_TEXT":"YOU DID NOT REACH THE TARGET SCORE","CONTINUE":"CONTINUE","BEST_SCORE":"BEST SCORE","GLOBAL":"GLOBAL","JOIN":"JOIN","REPLAY":"REPLAY","HOME":"HOME","TODAY_RECORD":"TODAY RECORD","SHARE":"SHARE","WAITING":"WAITING","WAITING_FOR_OPPONENT":"WAITING FOR OPPONENT","RESTART":"RESTART","DRAW":"DRAW","YOU_LOSE":"YOU LOSE","YOU_WIN":"YOU WIN","VS":"VS","GUIDE_TEXT_GEM":"TAP ON TWO OR MORE GEMS OF THE SAME COLOR TO DESTROY THEM","GUIDE_TEXT_CURRENT_SCORE":"THIS IS YOUR CURRENT SCORE","GUIDE_TEXT_TARGET_SCORE":"THIS IS THE TARGET SCORE FOR EACH LEVEL YOU NEED TO PASS","GUIDE_TEXT_RAINBOW_GEM":"RAINBOW GEM CAN CLEAR THE GEMS SURROUNDING IT","GUIDE_TEXT_HAMMER":"THIS IS A HAMMER, USE IT TO SMASH ANY GEM!","GUIDE_TEXT_SHUFFLE":"THIS IS A SHUFFLE TILE, USE IT TO SHUFFLE ALL GEMS","GUIDE_TEXT_MAGIC_BOTTLE":"THIS IS A MAGIC BOTTLE, USE IT TO CHANGE A GEM COLOUR","NO_ADS_TO_DISPLAY":"G\xd6R\xdcNT\xdcLENECEK REKLAM YOK!","NO_REWARDS":"\xdcZG\xdcN\xdcM, \xd6D\xdcL YOK!","CANCELLED_AD":"REKLAMI IPTAL ETTINIZ!","LOADING":"Y\xdcKLEN\u0130YOR...","LOADING_AD":"REKLAM Y\xdcKLEN\u0130YOR...","YOU_HAVE_JUST_RECEIVED_{X}_DIAMONDS":"YOU HAVE JUST RECEIVED\\\\n{X} DIAMONDS","CLOSE":"CLOSE","LEADERBOARD_EMPTY":"Skorbord bo\u015f!","MESSAGE_INVITE":"{playerName} challenges you","MESSAGE_FINISH_MATCH":"{playerName} just finished. Check them now.","MESSAGE_BEST_SCORE":"{playerName} beat your high score. Their score: {playerScore}","MESSAGE_FINISH_TURN":"{playerName} got {score} scores. So easy! Can you?","SHARE_LEADERBOARDS":"A ha, I\'m the best!","SHARE_GAME_RESULTS":"Pheww, a great match!","SHARE_BEST_SCORE":"Harika! En iyi puan\u0131 ald\u0131m!","TARGET_SCORE":"Hedef Skoru","NO_SPACE_LEFT":"BO\u015e YER KALMADI!","FULL":"Tam","LOADING_LEVEL":"Seviye y\xfckleniyor...","SCORE_REACHED":"PUAN ULA\u015eILDI!","WELL_DONE":"AFER\u0130N!","Level":"Seviye","Completed":"Tamamland\u0131","COMPLETED":"TAMAMLANDI","Next_life":"Sonraki hayat","MESS_TUTORIAL_1":"Blo\u011fu yatay \xe7izgiye yerle\u015ftir\\nve ne oldu\u011funu g\xf6r!","MESS_TUTORIAL_2":"\u015eimdi dikey bir \xe7izgi olu\u015fturdu\u011fundan\\ne olaca\u011f\u0131n\u0131 g\xf6r.","MESS_TUTORIAL_3":"Ayr\u0131ca 3x3 kare de yapabilirsin.\\nBir dene!","MESS_TUTORIAL_4":"Kombo puanlar almak i\xe7in \xe7izgileri\\nve kareleri d\xfczenle!","COMBO":"KOMBO","STREAK":"SER\u0130","MESS_SKIP_TUTORIAL":"E\u011fitimi atlamak istedi\u011fine\\nemin misin?","MESS_TAKE_A_BREAK_ADS":"Take a break\\nAd display in %s...","UPDATING_NEW_LEVELS":"YEN\u0130 SEV\u0130YELER G\xdcNCELLEN\u0130YOR...","RESTARTING_MAP":"HARITA YENIDEN BA\u015eLATILIYOR...","CANCEL":"\u0130PTAL ET","OK":"TAMAM","CONFIRM_START_OVER":"BA\u015eTAN BA\u015eLAMAYI ONAYLA","MESS_START_OVER":"Ba\u015ftan ba\u015flamak istedi\u011fine\\nemin misin?","mmddyy":"Tarih","Anonymous":"Anonim"},"Texture":{"NO_THANKS":"texts/no-thank","COOL":"texts/cool","CONGRATULATIONS":"texts/congratulation","EXCELLENT":"texts/excellent","GOOD":"texts/good","GREAT":"texts/great","LOGO":"logo","CONTINUE":"texts/continue"}}')},rw=function(e){function t(){return e.apply(this,arguments)||this}return(0,o.Z)(t,e),t.prototype.configure=function(t){e.prototype.configure.call(this,(0,s.Z)({data:sw,locale:"en",upperCaseText:!1},t))},t}(aw),ow=rw,cw=function(e){function t(){for(var t,n,i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];return(n=e.call.apply(e,T()(t=[this]).call(t,a))||this).isVisible=!0,n.browserPrefixes=["moz","ms","o","","webkit"],n.visibleCallbacks=[],n.hiddenCallbacks=[],n.handleVisibilityChange=function(e){if("boolean"===typeof e)return e?n.onVisibleEvent():n.onHiddenEvent();var t=n.getBrowserPrefix(),i=n.getHiddenPropertyName(t);return document[i]?n.onHiddenEvent():n.onVisibleEvent()},n}(0,o.Z)(t,e);var n=t.prototype;return n.configure=function(){var e=this,t=this.getBrowserPrefix(),n=this.getVisibilityEvent(t);document.addEventListener(n,this.handleVisibilityChange,!1),document.addEventListener("focus",(function(){e.handleVisibilityChange(!0)}),!1),document.addEventListener("blur",(function(){e.handleVisibilityChange(!1)}),!1),window.addEventListener("focus",(function(){e.handleVisibilityChange(!0)}),!1),window.addEventListener("blur",(function(){e.handleVisibilityChange(!1)}),!1)},n.addEventVisible=function(e){this.visibleCallbacks.push(e)},n.addEventHidden=function(e){this.hiddenCallbacks.push(e)},n.isGameVisible=function(){return this.isVisible},n.getHiddenPropertyName=function(e){return e?e+"Hidden":"hidden"},n.getVisibilityEvent=function(e){return(e||"")+"visibilitychange"},n.getBrowserPrefix=function(){for(var e=0;e<this.browserPrefixes.length;e++)if(this.getHiddenPropertyName(this.browserPrefixes[e])in document)return this.browserPrefixes[e];return""},n.onVisibleEvent=function(){this.isVisible||(this.isVisible=!0,this.visibleCallbacks.forEach((function(e){e()})))},n.onHiddenEvent=function(){this.isVisible&&(this.isVisible=!1,this.hiddenCallbacks.forEach((function(e){e()})))},t}(Phaser.Plugins.BasePlugin),lw=cw,hw=n(618),uw=0,dw=0,pw=function(){function e(e){this.game=void 0,this.progressFbTimeEvent=void 0,this.game=e}var t=e.prototype;return t.loadingProgressFbBootScene=function(){var e=this,t=100;dw=30;!function n(){t<=0?clearTimeout(e.progressFbTimeEvent):e.progressFbTimeEvent=setTimeout((function(){e.game.facebook.setLoadingProgress(Math.round(dw)),dw+=30/t,t--,n()}),50)}()},t.finishLoadingProgressFbBootScene=function(){clearTimeout(this.progressFbTimeEvent)},t.loadingProgressFbLoadScene=function(){var e=this;(!dw||dw<30)&&(dw=60),uw=dw;!function t(){e.progressFbTimeEvent=setTimeout((function(){e.game.facebook.setLoadingProgress(Math.round(dw)),dw+=.1,t()}),50)}()},t.onProgress=function(e){var t=100-dw,n=Math.round(e*t+dw);n>uw&&clearTimeout(this.progressFbTimeEvent),this.game.facebook.setLoadingProgress(n)},e}(),gw=pw,fw=function(e){function t(t,n,i){var a;return(a=e.call(this)||this).game=void 0,a.options=void 0,a.performance=void 0,a.isRunning=!1,a.checkTimer=void 0,a.fpsHistory=void 0,a.start=function(){if(!a.isRunning){a.isRunning=!0;var e=a.options.checkInterval;a.checkTimer=e,a.fpsHistory=[],a.game.events.on(Phaser.Core.Events.POST_STEP,a.onPostStep)}},a.stop=function(){a.isRunning&&(a.isRunning=!1,a.game.events.off(Phaser.Core.Events.POST_STEP,a.onPostStep),a.options.onlyUpdateWhenSwitchScene&&a.checkFps())},a.onPostStep=function(e,t){if(a.checkTimer-=t,!(a.checkTimer>0)){var n=a.options,i=n.checkInterval,s=n.onlyUpdateWhenSwitchScene;a.checkTimer+=i,a.fpsHistory.push(a.game.loop.actualFps),!1===s&&a.fpsHistory.length>=5&&a.checkFps()}},a.game=t,a.options=i,a.performance=n,a}(0,o.Z)(t,e);var n=t.prototype;return n.checkFps=function(){if(0!==this.fpsHistory.length){var e=this.options.autoUpgradeQuality,t=!1;this.isLowFps()?t=this.performance.downgradeGraphicsQuality():e&&this.isHighFps()&&(t=this.performance.upgradeGraphicsQuality()),t&&(this.fpsHistory=[])}},n.getFpsMedian=function(){return Phaser.Math.Median(this.fpsHistory)},n.isLowFps=function(){return this.getFpsMedian()<this.options.fpsThreshold},n.isHighFps=function(){return this.getFpsMedian()>1.2*this.options.fpsThreshold},t}(Phaser.Events.EventEmitter),mw=fw,vw=["pixelRatio","minQuality","maxQuality","qualityAdjustStep","trackingSceneKeys"],Ew=function(e){function t(){for(var t,n,i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];return(n=e.call.apply(e,T()(t=[this]).call(t,a))||this).fpsTracker=void 0,n.pixelRatio=void 0,n.minQuality=void 0,n.maxQuality=void 0,n.qualityAdjustStep=void 0,n.trackingSceneKeys=[],n.trackingScene=function(e){var t;if(la()(t=n.trackingSceneKeys).call(t,e)){var i=n.game.scene.getScene(e);i.events.once(Phaser.Scenes.Events.UPDATE,n.fpsTracker.start),i.events.once(Phaser.Scenes.Events.SLEEP,n.fpsTracker.stop)}},n}(0,o.Z)(t,e);var n=t.prototype;return n.configure=function(e){var t=e.pixelRatio,n=e.minQuality,i=e.maxQuality,s=e.qualityAdjustStep,r=e.trackingSceneKeys,o=(0,a.Z)(e,vw);this.pixelRatio=t,this.minQuality=n,this.maxQuality=i,this.qualityAdjustStep=s,this.trackingSceneKeys=r,this.fpsTracker=new mw(this.game,this,o)},n.active=function(){this.game.events.on(Phaser.Scenes.Events.WAKE,this.trackingScene),this.game.events.on(Phaser.Scenes.Events.START,this.trackingScene)},n.downgradeGraphicsQuality=function(){var e=this.pixelRatio;if(e<=this.minQuality)return!1;var t=+(e-this.qualityAdjustStep).toFixed(2);return!(t<this.minQuality)&&(this.pixelRatio=t,this.game.world.resize(this.pixelRatio),!0)},n.upgradeGraphicsQuality=function(){var e=this.pixelRatio;if(e>=this.maxQuality)return!1;var t=+(e+this.qualityAdjustStep).toFixed(2);return!(t>this.maxQuality)&&(this.pixelRatio=t,this.game.world.resize(this.pixelRatio),!0)},t}(Phaser.Plugins.BasePlugin),Sw=Ew,Aw=n(619),yw=["Enable"],Tw=function(e){function t(){return e.apply(this,arguments)||this}(0,o.Z)(t,e);var i=t.prototype;return i.boot=function(){var t=(0,r.Z)(l().mark((function t(){return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.prototype.boot.call(this),this.addExtraGameObjectMethods(),this.addExtraFBInstantFunctions(),this.addPlugins(),t.next=6,this.addDevPlugins();case 6:return t.next=8,this.initAdsAsync();case 8:this.addScenes(),this.addDevScenes(),this.initWorld(),this.initStorage(),this.initLanguage(),this.initVisibilityChangeHandler(),this.initUtils(),this.initRollbar(),this.initConsole(),this.initDebugger(),this.initStatistics(),this.initParticleEditor(),this.initProfilerPlugin(),this.initAdaptivePerformance();case 22:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),i.start=function(){e.prototype.start.call(this)},i.updateFps=function(e){void 0===e&&(e=60),this.getFps()!==e&&this.setFps(e)},i.getFps=function(){var e,t;return this.scene.game&&null!=(e=null==(t=this.scene.game.loop)||null==(t=t.raf)?void 0:t.fps)?e:5},i.setFps=function(e){var t;this.scene.game&&null!=(t=this.scene.game.loop)&&t.raf&&"function"===typeof this.scene.game.loop.raf.updateFps&&this.scene.game.loop.raf.updateFps(e)},i.addExtraGameObjectMethods=function(){var e=new d(this);e.addKillRevive(),e.addKillReviveGroup(),e.addDrawDebugBox(),e.addSetWorldSize(),e.addSetWorldSizeForContainer(),e.addGetWorldPosition(),e.addHighQuality(),e.addSetLineHeightForBitmapText()},i.addExtraFBInstantFunctions=function(){var e=new h.Z(this.facebook);this.facebook.getLocale=e.getLocale,this.facebook.shareAsync=e.shareAsync,this.facebook.inviteAsync=e.inviteAsync,this.facebook.switchAsync=e.switchAsync,this.facebook.chooseAsync=e.chooseAsync,this.facebook.createAsync=e.createAsync,this.facebook.sendMessage=e.sendMessage,this.facebook.getContextID=e.getContextID,this.facebook.getPlayerToken=e.getPlayerToken,this.facebook.matchPlayerAsync=e.matchPlayerAsync,this.facebook.getContextPlayers=e.getContextPlayers,this.facebook.setLoadingProgress=e.setLoadingProgress,this.facebook.attemptToAddShortcut=e.attemptToAddShortcut,this.facebook.attemptToSubscribeBot=e.attemptToSubscribeBot,this.facebook.postSessionScoreAsync=e.postSessionScoreAsync,this.facebook.getRewardedVideoAsync=e.getRewardedVideoAsync,this.facebook.getInterstitialAdAsync=e.getInterstitialAdAsync,e.injectTournament(),this.facebook.progressLoading=new gw(this)},i.addPlugins=function(){this.plugins.install("Storage",Wi,!0,"storage"),this.plugins.install("AdsManager",Z,!0,"ads"),this.plugins.install("AuthManager",ge,!0,"auth"),this.plugins.install("AudioManager",ie,!0,"audio"),this.plugins.install("WorldManager",ia,!0,"world"),this.plugins.install("PlayerManager",gt,!0,"player"),this.plugins.install("ProfileManager",It,!0,"profile"),this.plugins.install("LanguageManager",ow,!0,"lang"),this.plugins.install("AnalyticsManager",K,!0,"analytics"),this.plugins.install("AdaptivePerformance",Sw,!0,"performance"),this.plugins.install("VisibilityChangeHandler",lw,!0,"visibility"),this.plugins.installScenePlugin("textStyler",Ji,"textStyler"),this.plugins.installScenePlugin("ScreenManager",_t,"screen"),this.plugins.installScenePlugin("FrameCapture",ve,"frameCapture"),this.plugins.installScenePlugin("SpinePlugin",SpinePlugin,"spine"),window.SpinePlugin&&this.plugins.installScenePlugin("SpinePlugin",SpinePlugin,"spine"),this.storage=this.plugins.get("Storage"),this.ads=this.plugins.get("AdsManager"),this.auth=this.plugins.get("AuthManager"),this.audio=this.plugins.get("AudioManager"),this.world=this.plugins.get("WorldManager"),this.player=this.plugins.get("PlayerManager"),this.lang=this.plugins.get("LanguageManager"),this.profile=this.plugins.get("ProfileManager"),this.analytics=this.plugins.get("AnalyticsManager"),this.performance=this.plugins.get("AdaptivePerformance"),this.visibility=this.plugins.get("VisibilityChangeHandler")},i.addDevPlugins=function(){var e=(0,r.Z)(l().mark((function e(){var t,i,a,s,r;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(GameCore.Utils.Valid.isDebugger()){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,Promise.all([n.e(7),n.e(942)]).then(n.bind(n,629));case 4:return t=e.sent.default,e.next=7,Promise.all([n.e(498),n.e(868),n.e(530)]).then(n.bind(n,630));case 7:return i=e.sent.default,e.next=10,n.e(401).then(n.bind(n,631));case 10:return a=e.sent.default,e.next=13,Promise.all([n.e(498),n.e(123)]).then(n.bind(n,632));case 13:return s=e.sent.default,e.next=16,Promise.all([n.e(498),n.e(803)]).then(n.bind(n,633));case 16:r=e.sent.default,this.plugins.install("Console",t,!0,"console"),this.plugins.install("Debugger",i,!0,"debugger"),this.plugins.install("Statistics",a,!0,"statistics"),this.plugins.install("Profiler",s,!0,"profiler"),this.plugins.install("ParticleEditor",r,!0,"particle-editor"),this.eruda=this.plugins.get("Console"),this.debugger=this.plugins.get("Debugger"),this.statistics=this.plugins.get("Statistics"),this.profiler=this.plugins.get("Profiler"),this.particleEditor=this.plugins.get("ParticleEditor");case 27:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),i.addScenes=function(){this.scene.add(Pa.Co.BOOT_SCENE,Na,!0),this.scene.add(Pa.Co.LOAD_SCENE,ny,!1),this.scene.add(Pa.Co.GAME_SCENE,xS,!1),this.scene.add(Pa.Co.LEVEL_SCENE,iw,!1),this.scene.add(Pa.Co.JOURNEY_SCENE,iR,!1),this.scene.add(Pa.Co.DASHBOARD_SCENE,rI,!1),this.scene.add(Pa.Co.GLOBAL_SCENE,kS.Z,!1)},i.addDevScenes=function(){var e=(0,r.Z)(l().mark((function e(){var t,i;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(GameCore.Utils.Valid.isDebugger()){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,n.e(638).then(n.bind(n,634));case 4:return t=e.sent.default,e.next=7,n.e(539).then(n.bind(n,635));case 7:i=e.sent.default,this.scene.add(Pa.Co.TEST_SCENE,t,!1),this.scene.add(Pa.Co.ANIMATIONS_SCENE,i,!1);case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),i.initAdsAsync=function(){var e=(0,r.Z)(l().mark((function e(){var t,n,i;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=GameCore.Configs.Ads,e.next=3,this.getAdServiceInstance();case 3:(n=e.sent).setGame(this),i=(0,s.Z)({},t.InterstitialAdOptions),this.ads.configure(n,{enabled:t.Enabled,calculateSafeAreaBottom:t.CalculateSafeAreaBottom,enableRewardVideoResetInterstitial:t.EnableRewardVideoResetInterstitial,interstitialAdOptions:i,rewardAdOptions:t.RewardAdOptions,bannerAdOptions:t.BannerAdOptions});case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),i.getAdServiceInstance=function(){var e=(0,r.Z)(l().mark((function e(){var t,i,a,s;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=GameCore.Configs.Ads,i=t.AdService,!t.Mockup.Enable){e.next=6;break}return e.next=4,n.e(131).then(n.bind(n,636));case 4:return a=e.sent.default,e.abrupt("return",a);case 6:if("google"!==i){e.next=19;break}return e.prev=7,e.next=10,this.initGoogleAdInstanceAsync();case 10:if(null===(s=e.sent)){e.next=13;break}return e.abrupt("return",s);case 13:e.next=19;break;case 15:return e.prev=15,e.t0=e.catch(7),e.abrupt("return",hw.default);case 19:return e.abrupt("return",hw.default);case 20:case"end":return e.stop()}}),e,this,[[7,15]])})));return function(){return e.apply(this,arguments)}}(),i.initGoogleAdInstanceAsync=function(){var e=(0,r.Z)(l().mark((function e(){var t,n,i,a,s,r,o,c;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("loaded"!==Aw.default.initStatus){e.next=2;break}return e.abrupt("return",Aw.default);case 2:if(t=GameCore.Configs.Ads.AdServiceConfigs.Google){e.next=6;break}return e.abrupt("return",null);case 6:return n=t.DataAdClient,i=t.DataAdChannel,a=t.DataAdBreakTest,s=t.DataAdFrequencyHint,r=t.DataAdHost,o=t.MaxScriptLoadRetryCount,c={dataAdClient:n,dataAdChannel:i,dataAdBreakTest:a,dataAdFrequencyHint:s,dataAdHost:r,maxScriptLoadRetryCount:o},e.prev=8,Aw.default.setGame(this),e.next=12,Aw.default.initGoogleAdsAsync(c);case 12:return e.abrupt("return",Aw.default);case 15:return e.prev=15,e.t0=e.catch(8),e.abrupt("return",null);case 19:case"end":return e.stop()}}),e,this,[[8,15]])})));return function(){return e.apply(this,arguments)}}(),i.initWorld=function(){var e=GameCore.Configs.Game,t=e.AutoResize,n=e.PortraitRatio,i=e.PortraitWidth,a=e.PortraitHeight,s=e.LandscapeRatio,r=e.LandscapeWidth,o=e.LandscapeHeight,c=t,l=e.DisableLandscape,h=e.FullSizeOnLandscape,u=n,d=i,p=a,g=s,f=r,m=o;this.world.configure({autoResize:c,portraitRatio:u,portraitWidth:d,portraitHeight:p,landscapeRatio:g,landscapeWidth:f,landscapeHeight:m,disableLandscape:l,fullSizeOnLandscape:h}),this.world.resize(e.ForcePixelRatio)},i.initStorage=function(){var e=new Oa(this);this.storage.setInitiator(e)},i.initLanguage=function(){var e=this.facebook.getLocale();this.lang.configure({locale:e,upperCaseText:!1})},i.initVisibilityChangeHandler=function(){this.visibility.configure()},i.initUtils=function(){this.handlePauseAudio()},i.initConsole=function(){GameCore.Utils.Valid.isDebugger()&&(GameCore.Configs.Debugger.ShowConsole&&this.eruda.configure({tool:["console","info"],defaults:{theme:"Dark"}}))},i.initDebugger=function(){if(GameCore.Utils.Valid.isDebugger()){var e=GameCore.Configs.Debugger,t=e.ShowInspector,n=e.ShowMonitoring;(t||n)&&this.debugger.configure(GameCore.Configs.Debugger)}},i.initStatistics=function(){GameCore.Utils.Valid.isDebugger()&&(GameCore.Configs.Statistics.Enable&&this.statistics.configure(GameCore.Configs.Statistics))},i.initParticleEditor=function(){GameCore.Utils.Valid.isDebugger()&&(GameCore.Configs.ParticleEditor.Enable&&this.particleEditor.configure(GameCore.Configs.ParticleEditor))},i.initProfilerPlugin=function(){GameCore.Utils.Valid.isDebugger()&&(GameCore.Configs.ProfilerPlugin.Enable&&this.profiler.configure())},i.initAdaptivePerformance=function(){var e=GameCore.Configs.Performance,t=e.Enable,n=(0,a.Z)(e,yw);if(t){var i=this.world.getPixelRatio();this.performance.configure((0,s.Z)({pixelRatio:i},n)),this.performance.active()}},i.initRollbar=function(){GameCore.Configs.Rollbar.Enable&&this.rollbar.setup()},i.handlePauseAudio=function(){var e=this;this.sound.pauseOnBlur=!1,this.visibility.addEventVisible((function(){e.audio.playMusic(),e.audio.resumeAllSounds()})),this.visibility.addEventHidden((function(){e.audio.pauseMusic(),e.audio.pauseAllSounds()}))},i.removeUnusedPipelines=function(){var e=this.renderer;if(e instanceof Phaser.Renderer.WebGL.WebGLRenderer){var t=e.pipelines,n=Phaser.Renderer.WebGL.Pipelines;if(n)for(var i=0,a=[n.ROPE_PIPELINE,n.LIGHT_PIPELINE,n.POSTFX_PIPELINE,n.POINTLIGHT_PIPELINE,n.BITMAPMASK_PIPELINE];i<a.length;i++){var s,r=a[i];null==(s=t.get(r))||s.destroy(),t.remove(r)}}},t}(Phaser.Game),Iw=Tw,Cw=GameCore.Configs.Debugger.ShowInspector,bw={parent:"app",type:Phaser.AUTO,width:0,height:0,scale:{autoRound:!0},dom:{createContainer:!1},loader:{maxParallelDownloads:6,crossOrigin:"no-cros"},input:{gamepad:!1,keyboard:Cw,touch:{capture:!0},smoothFactor:1,activePointers:1,windowEvents:!1},disableContextMenu:!0,fps:{},render:{pixelArt:!1,antialias:!0,antialiasGL:!0,transparent:!0,desynchronized:!1,powerPreference:"low-power",clearBeforeRender:!1,roundPixels:!1},plugins:{global:[]}};(0,i.j6)();var Ow=setInterval((function(){window.__analyticsInitiated&&(window.__fbGameReady=!1,clearInterval(Ow),clearInterval(window.__fbInstantLoadingTimer),GameSDK.setLoadingProgress(30),gtag("event","app_initialize",{send_to:["GA"]}),function(){try{var e=new Iw(bw);window.game=e}catch(t){(0,i.tO)(t)}}())}),50)},561:function(e,t,n){"use strict";var i=n(51),a=n(14),s=n(37),r=n.n(s),o=n(64),c=n.n(o),l=function(){function e(){this.payments=void 0}var t=e.prototype;return t.getLocale=function(){return null},t.getPlatform=function(){return null},t.getSDKVersion=function(){return"0.0"},t.getSupportedAPIs=function(){return[]},t.getEntryPointData=function(){return null},t.getEntryPointAsync=function(){return new(c())((function(e){e("")}))},t.canCreateShortcutAsync=function(){return new(c())((function(e,t){t(new Error("Not implemented"))}))},t.quit=function(){},t.performHapticFeedbackAsync=function(){return c().resolve()},t.getFlag=function(){return{}},e}(),h=function(e){function t(t){var n;return(n=e.call(this)||this).sdk=void 0,n.sdk=t,n}(0,a.Z)(t,e);var n=t.prototype;return n.getID=function(){return this.sdk.getID()},n.getType=function(){return this.sdk.getType()},n.isSizeBetween=function(e,t){return this.sdk.isSizeBetween(e,t)},n.switchAsync=function(e){return this.sdk.switchAsync(e)},n.chooseAsync=function(e){return this.sdk.chooseAsync(e)},n.createAsync=function(e){return this.sdk.createAsync(e)},n.getPlayersAsync=function(){return this.sdk.getPlayersAsync()},t}(function(){function e(){}var t=e.prototype;return t.getID=function(){return null},t.getType=function(){return"SOLO"},e}()),u=h,d=function(e){function t(t){var n;return(n=e.call(this)||this).sdk=void 0,n.sdk=t,n}(0,a.Z)(t,e);var n=t.prototype;return n.getID=function(){return this.sdk.getID()},n.getASIDAsync=function(){return this.sdk.getASIDAsync()},n.getSignedASIDAsync=function(){return this.sdk.getSignedASIDAsync()},n.getName=function(){return this.sdk.getName()},n.getPhoto=function(){return this.sdk.getPhoto()},n.getDataAsync=function(e){return this.sdk.getDataAsync(e)},n.setDataAsync=function(e){return this.sdk.setDataAsync(e)},n.flushDataAsync=function(){return this.sdk.flushDataAsync()},n.getSignedPlayerInfoAsync=function(e){return this.sdk.getSignedPlayerInfoAsync(e)},n.canSubscribeBotAsync=function(){return this.sdk.canSubscribeBotAsync()},n.subscribeBotAsync=function(){return this.sdk.subscribeBotAsync()},n.getConnectedPlayersAsync=function(){return this.sdk.getConnectedPlayersAsync()},n.isGuest=function(){return!1},n.signInManuallyAsync=function(){return c().resolve(!0)},t}((function(){})),p=d,g=function(e){function t(t){var n;return(n=e.call(this)||this).sdk=void 0,n.player=void 0,n.context=void 0,n.graphApi=void 0,n.tournament=void 0,n.sdk=t,n.player=new p(t.player),n.context=new u(t.context),n}(0,a.Z)(t,e);var n=t.prototype;return n.getLocale=function(){return this.sdk.getLocale()},n.getPlatform=function(){return this.sdk.getPlatform()},n.getSDKVersion=function(){return this.sdk.getSDKVersion()},n.initializeAsync=function(){return this.sdk.initializeAsync()},n.setLoadingProgress=function(e){this.sdk.setLoadingProgress(e)},n.getSupportedAPIs=function(){return this.sdk.getSupportedAPIs()},n.getEntryPointData=function(){return this.sdk.getEntryPointData()},n.getEntryPointAsync=function(){return this.sdk.getEntryPointAsync()},n.setSessionData=function(e){this.sdk.setSessionData(e)},n.startGameAsync=function(){return this.sdk.startGameAsync()},n.shareAsync=function(e){return this.sdk.shareAsync(e)},n.updateAsync=function(e){return this.sdk.updateAsync(e)},n.switchGameAsync=function(e,t){return this.sdk.switchGameAsync(e,t)},n.canCreateShortcutAsync=function(){return this.sdk.canCreateShortcutAsync()},n.createShortcutAsync=function(){return this.sdk.createShortcutAsync()},n.quit=function(){this.sdk.quit()},n.logEvent=function(e,t,n){return this.sdk.logEvent(e,t,n)},n.onPause=function(e){this.sdk.onPause(e)},n.getInterstitialAdAsync=function(e){return this.sdk.getInterstitialAdAsync(e)},n.getRewardedVideoAsync=function(e){return this.sdk.getRewardedVideoAsync(e)},n.matchPlayerAsync=function(e,t,n){return this.sdk.matchPlayerAsync(e,t,n)},n.checkCanPlayerMatchAsync=function(){return this.sdk.checkCanPlayerMatchAsync()},n.getLeaderboardAsync=function(e){return this.sdk.getLeaderboardAsync(e)},n.postSessionScoreAsync=function(e){return this.sdk.postSessionScoreAsync(e)},n.loadBannerAdAsync=function(e,t){return this.sdk.loadBannerAdAsync(e)},n.hideBannerAdAsync=function(){return this.sdk.hideBannerAdAsync()},n.showGameRating=function(){var e=(0,i.Z)(r().mark((function e(){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",c().reject(new Error("CLIENT_UNSUPPORTED_OPERATION")));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),n.getTournamentAsync=function(){return this.sdk.getTournamentAsync()},n.inviteAsync=function(e){return this.sdk.inviteAsync(e)},n.shareLinkAsync=function(e){return this.sdk.shareLinkAsync(e)},n.getFlags=function(){return{}},t}(l),f=g;"FBInstant"in window&&(window.GameSDK=new f(window.FBInstant)),window.FBInstant=window.GameSDK},624:function(e,t,n){"use strict";n.d(t,{H$:function(){return E},Z5:function(){return v},aV:function(){return S},xB:function(){return A}});var i=n(81),a=n(51),s=n(103),r=n.n(s),o=n(88),c=n.n(o),l=n(37),h=n.n(l),u=n(450),d=n(127),p=GameCore.Configs,g=p.AppId,f=p.OtherHost,m=p.LeadersBoard,v=function(){var e=(0,a.Z)(h().mark((function e(t){var n,a;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(f){e.next=2;break}return e.abrupt("return",{});case 2:if(n={appId:g,resetScore:0,numberOfLeaders:15,timezone:"utc+0",sortOrder:"desc",statistics:"max",resettable:"manually",description:"no description"},!m.UseMock){e.next=7;break}return e.next=6,(0,d.qZ)(1e3);case 6:return e.abrupt("return",(0,i.Z)({},n,t,{_id:m.LeaderboardId,type:"app_leaderboard",description:"mockup_leaderboard",createdAt:new Date(Date.now()).toISOString(),updatedAt:new Date(Date.now()).toISOString()}));case 7:return"leaderboards",e.next=10,(0,u.v)("leaderboards",(0,i.Z)({},n,t),{},f);case 10:return a=e.sent,e.abrupt("return",(null==a?void 0:a.data)||{});case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),E=function(){var e=(0,a.Z)(h().mark((function e(t,n){var i,a,s,o,l,p,g,v,E,S,A,y;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===n&&(n={}),f){e.next=3;break}return e.abrupt("return",[]);case 3:if(i=[],!m.UseMock){e.next=9;break}return e.next=7,(0,d.qZ)(1e3);case 7:return l=(o=n).limit,p=void 0===l?10:l,g=o.offset,v=void 0===g?0:g,e.abrupt("return",r()(a=c()(s=new Array(p)).call(s,null)).call(a,(function(e,t){var n=(t+1)*(v+1),i=m.MockOptions.PlayerEntryIndex===t,a={playerId:"player-0"+n,name:"MPlayer "+n,photo:"./assets/images/others/avatar.jpg",rank:n,score:Math.floor(1e5/n+1e4*Math.random())};if(i){var s=window.game.player.getPlayer(),r=s.playerId,o=s.name,c=s.photo;a.playerId=r,a.name=o,a.photo=c}return a})));case 9:return E=GameCore.Utils.String.params(n),S="leaderboards/"+t+"/leaders",e.next=13,(0,u.U)(S+"?"+E,{},f);case 13:if((A=e.sent)&&(null==A||!A.error)){e.next=16;break}throw new Error((null==A?void 0:A.error)||"Leaderboard not found");case 16:if(!((y=(null==A?void 0:A.data)||[]).length<1)){e.next=19;break}return e.abrupt("return",i);case 19:return i=y,e.abrupt("return",i);case 21:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),S=function(){var e=(0,a.Z)(h().mark((function e(t,n,i){var a;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(f){e.next=2;break}return e.abrupt("return",{});case 2:return e.next=4,(0,u.v)("leaderboards/"+t+"/players/"+n,{score:i},{},f);case 4:return a=e.sent,e.abrupt("return",(null==a?void 0:a.data)||{});case 6:case"end":return e.stop()}}),e)})));return function(t,n,i){return e.apply(this,arguments)}}(),A=function(){var e=(0,a.Z)(h().mark((function e(t,n){var i,a,s,r,o;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(f){e.next=2;break}return e.abrupt("return",{});case 2:if(i=null,t){e.next=5;break}return e.abrupt("return",i);case 5:if(a=m.Prefix+"/"+n+"/players"){e.next=8;break}return e.abrupt("return",i);case 8:return s=GameCore.Utils.String.params({playerIds:t}),e.next=11,(0,u.U)(a+"?"+s,{},f);case 11:if(r=e.sent,!((o=(null==r?void 0:r.data)||[]).length<1)){e.next=15;break}return e.abrupt("return",i);case 15:return i=o[0],e.abrupt("return",i);case 17:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},82:function(e,t,n){"use strict";n.d(t,{_:function(){return i}});var i={BUTTON_CLICK:"button_click",SCREEN_OPEN:"screen_open",LOAD_START:"load_start",LOAD_COMPLETE:"load_complete",APP_READY:"app_ready",TUTORIAL_BEGIN:"tutorial_begin",TUTORIAL_STEP:"tutorial_step",TUTORIAL_COMPLETE:"tutorial_complete",MATCH_START:"match_start",MATCH_RESCUE:"match_rescue",MATCH_END:"match_end",LEVEL_START:"level_start",LEVEL_RESCUE:"level_rescue",LEVEL_END:"level_end",SHARE:"share",MESSAGE:"message",INVITE:"invite",SHORTCUT_CREATE:"shortcut_create",SHORTCUT_CREATE_POPUP:"shortcut_create_popup",BOT_SUBSCRIBE:"bot_subscribe",BOT_SUBSCRIBE_POPUP:"bot_subscribe_popup",AD_LOAD:"ad_load",AD_LOAD_FAILED:"ad_load_failed",AD_SHOW:"ad_show",AD_SHOW_FAILED:"ad_show_failed",MISSING_AD_SHOW:"missing_ad_show",NEW_USER:"new_user",AD_IMPRESSION:"ad_impression",JOIN_GROUP:"join_group",DAILY_CHALLENGE_BEGIN:"daily_challenge_begin",DAILY_CHALLENGE_FAIL:"daily_challenge_fail",DAILY_CHALLENGE_END:"daily_challenge_end",AD_INIT:"ad_init",TOURNAMENT_SHARE:"tournament_share",TOURNAMENT_CREATE:"tournament_create",TOURNAMENT_POST_SCORE:"tournament_post_score",PAGE_VIEW:"page_view"}},446:function(e,t,n){"use strict";var i=n(204),a=function(){function e(e,t,n,a){this.playerId=void 0,this.name=void 0,this.photo=void 0,this.locale=void 0,this.playerId=e,this.name=t,this.photo=n||i.Z.AVATAR.FILE,this.locale=a||"en_US"}return e.prototype.toObject=function(){return{playerId:this.playerId,name:this.name,photo:this.photo,locale:this.locale}},e}();t.Z=a},449:function(e,t){"use strict";t.Z={RESIZE:"resize",CHANGE_LAYOUT:"change-layout"}},451:function(e,t,n){"use strict";n.d(t,{I:function(){return a}});var i=n(447),a=function(e){return{type:i.DW,payload:{sceneKey:e}}}},127:function(e,t,n){"use strict";n.d(t,{Gm:function(){return r},ne:function(){return o},qZ:function(){return s}});var i=n(64),a=n.n(i),s=(n(47),function(e){return new(a())((function(t){return setTimeout(t,e)}))}),r=function(e){var t=new Date(e),n=new Date;return t.getDate()===n.getDate()&&t.getMonth()===n.getMonth()&&t.getFullYear()===n.getFullYear()},o=function(e){var t=e/1e3,n=Math.floor(t/3600),i=Math.floor((t-3600*n)/60);return{hours:n,minutes:i,seconds:Math.floor(t-3600*n-60*i)}}},202:function(e,t,n){"use strict";n.d(t,{R0:function(){return r},Tv:function(){return s},j6:function(){return i},sw:function(){return a},tO:function(){return o}});n(445),n(133),n(89),n(86);var i=function(){var e=setInterval((function(){window.Sentry&&clearInterval(e)}),100)},a=function(e,t){window.Sentry&&window.Sentry.addBreadcrumb({category:e,message:t})},s=function(e){window.Sentry&&window.Sentry.setUser(e)},r=function(e,t){},o=function(e){}},201:function(e,t,n){"use strict";n.d(t,{D:function(){return i}});var i=function(e,t){var n;return function(){for(var i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];clearTimeout(n),n=setTimeout((function(){return e.apply(void 0,a)}),t)}}}},t={};function n(i){var a=t[i];if(void 0!==a)return a.exports;var s=t[i]={id:i,loaded:!1,exports:{}};return e[i].call(s.exports,s,s.exports,n),s.loaded=!0,s.exports}n.m=e,n.amdO={},function(){var e=[];n.O=function(t,i,a,s){if(!i){var r=1/0;for(h=0;h<e.length;h++){i=e[h][0],a=e[h][1],s=e[h][2];for(var o=!0,c=0;c<i.length;c++)(!1&s||r>=s)&&Object.keys(n.O).every((function(e){return n.O[e](i[c])}))?i.splice(c--,1):(o=!1,s<r&&(r=s));if(o){e.splice(h--,1);var l=a();void 0!==l&&(t=l)}}return t}s=s||0;for(var h=e.length;h>0&&e[h-1][2]>s;h--)e[h]=e[h-1];e[h]=[i,a,s]}}(),n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,{a:t}),t},n.d=function(e,t){for(var i in t)n.o(t,i)&&!n.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},n.f={},n.e=function(e){return Promise.all(Object.keys(n.f).reduce((function(t,i){return n.f[i](e,t),t}),[]))},n.u=function(e){return e+".bundle.js"},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.hmd=function(e){return(e=Object.create(e)).children||(e.children=[]),Object.defineProperty(e,"exports",{enumerable:!0,set:function(){throw new Error("ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: "+e.id)}}),e},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},function(){var e={},t="game-core:";n.l=function(i,a,s,r){if(e[i])e[i].push(a);else{var o,c;if(void 0!==s)for(var l=document.getElementsByTagName("script"),h=0;h<l.length;h++){var u=l[h];if(u.getAttribute("src")==i||u.getAttribute("data-webpack")==t+s){o=u;break}}o||(c=!0,(o=document.createElement("script")).charset="utf-8",o.timeout=120,n.nc&&o.setAttribute("nonce",n.nc),o.setAttribute("data-webpack",t+s),o.src=i),e[i]=[a];var d=function(t,n){o.onerror=o.onload=null,clearTimeout(p);var a=e[i];if(delete e[i],o.parentNode&&o.parentNode.removeChild(o),a&&a.forEach((function(e){return e(n)})),t)return t(n)},p=setTimeout(d.bind(null,void 0,{type:"timeout",target:o}),12e4);o.onerror=d.bind(null,o.onerror),o.onload=d.bind(null,o.onload),c&&document.head.appendChild(o)}}}(),n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e},function(){var e;n.g.importScripts&&(e=n.g.location+"");var t=n.g.document;if(!e&&t&&(t.currentScript&&(e=t.currentScript.src),!e)){var i=t.getElementsByTagName("script");if(i.length)for(var a=i.length-1;a>-1&&!e;)e=i[a--].src}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),n.p=e}(),function(){var e={757:0};n.f.j=function(t,i){var a=n.o(e,t)?e[t]:void 0;if(0!==a)if(a)i.push(a[2]);else{var s=new Promise((function(n,i){a=e[t]=[n,i]}));i.push(a[2]=s);var r=n.p+n.u(t),o=new Error;n.l(r,(function(i){if(n.o(e,t)&&(0!==(a=e[t])&&(e[t]=void 0),a)){var s=i&&("load"===i.type?"missing":i.type),r=i&&i.target&&i.target.src;o.message="Loading chunk "+t+" failed.\n("+s+": "+r+")",o.name="ChunkLoadError",o.type=s,o.request=r,a[1](o)}}),"chunk-"+t,t)}},n.O.j=function(t){return 0===e[t]};var t=function(t,i){var a,s,r=i[0],o=i[1],c=i[2],l=0;if(r.some((function(t){return 0!==e[t]}))){for(a in o)n.o(o,a)&&(n.m[a]=o[a]);if(c)var h=c(n)}for(t&&t(i);l<r.length;l++)s=r[l],n.o(e,s)&&e[s]&&e[s][0](),e[s]=0;return n.O(h)},i=self.webpackChunkgame_core=self.webpackChunkgame_core||[];i.forEach(t.bind(null,0)),i.push=t.bind(null,i.push.bind(i))}(),n.O(void 0,[216,542],(function(){return n(638)})),n.O(void 0,[216,542],(function(){return n(639)})),n.O(void 0,[216,542],(function(){return n(470)})),n.O(void 0,[216,542],(function(){return n(438)})),n.O(void 0,[216,542],(function(){return n(561)})),n.O(void 0,[216,542],(function(){return n(562)})),n.O(void 0,[216,542],(function(){return n(640)}));var i=n.O(void 0,[216,542],(function(){return n(578)}));i=n.O(i)})();